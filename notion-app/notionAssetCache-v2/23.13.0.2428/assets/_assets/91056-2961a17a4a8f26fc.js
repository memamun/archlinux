"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[91056],{22394:(e,t,s)=>{s.d(t,{o:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("circleCheck",{viewBox:"0 0 12 12",svg:(0,i.jsx)("path",{d:"M6.09277 11.1855C8.88574 11.1855 11.1855 8.88574 11.1855 6.09277C11.1855 3.30469 8.88086 1 6.08789 1C3.2998 1 1 3.30469 1 6.09277C1 8.88574 3.2998 11.1855 6.09277 11.1855ZM6.09277 10.0674C3.89062 10.0674 2.12305 8.29492 2.12305 6.09277C2.12305 3.89062 3.88574 2.11816 6.08789 2.11816C8.29492 2.11816 10.0625 3.89062 10.0674 6.09277C10.0723 8.29492 8.29492 10.0674 6.09277 10.0674ZM5.57031 8.41699C5.75586 8.41699 5.92188 8.31934 6.0293 8.15332L8.17773 4.81836C8.24609 4.71094 8.2998 4.58887 8.2998 4.47656C8.2998 4.21289 8.07031 4.03711 7.82129 4.03711C7.66016 4.03711 7.51855 4.125 7.41113 4.30078L5.55566 7.2793L4.68652 6.19043C4.56934 6.03906 4.44727 5.98047 4.2959 5.98047C4.03711 5.98047 3.82715 6.18555 3.82715 6.44922C3.82715 6.57129 3.87598 6.68359 3.96387 6.7959L5.0918 8.1582C5.22852 8.3291 5.37988 8.41699 5.57031 8.41699Z"})})},30580:(e,t,s)=>{s.d(t,{Y:()=>i,b:()=>n});s(581454);class i extends(()=>s(757695))().default{getInitialState(){return{step:"backupCodesUninitialized"}}}class n extends(()=>s(658921))()._{constructor(e,t){super(e,"backupCodes"),this.service=void 0,this.service=t}backupCodesInitialSetup(e){if(!this.checkStep("backupCodesUninitialized"))return;const{onLoadingComplete:t,onComplete:s}=e;this.store.setState({step:"backupCodesLoading"}),this.doCreateBackupCodes({forceRecreate:!1,onComplete:s,onLoadingComplete:t}).catch(this.handleUnexpectedError)}backupCodesShowCreate(){this.checkStep("backupCodesUninitialized")&&this.store.setState({step:"backupCodesRegenerateCodes"})}backupCodesRegenerateCodes(){this.checkStep("backupCodesRegenerateCodes")&&(this.store.setState({step:"backupCodesRegenerateCodes",isLoading:!0}),this.doCreateBackupCodes({forceRecreate:!0,onComplete:()=>{},onLoadingComplete:()=>{}}).catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"backupCodesUninitialized"})}async doCreateBackupCodes(e){const{forceRecreate:t,onComplete:i,onLoadingComplete:n}=e,o=await this.withStep(["backupCodesLoading","backupCodesRegenerateCodes"],(()=>this.service.createBackupCodes(t)));if(!o)return;const{result:r}=o;if("already-exists"===r.status)i();else{const e=function(e){const t=s(972435).A.getIntl(),i=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.title",defaultMessage:"Notion Backup Codes"}),n=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.createdAt",defaultMessage:"Created at {createdAt}"},{createdAt:`${new Date}`}),o=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.warningMessage",defaultMessage:"Please store these in a secure location and mark off codes as they are used."}),r=`${i}\n${n}\n\n${e.map(s(219505).H).join("\n")}\n\n${o}\n`;return encodeURIComponent(r)}(r.backupCodes);this.store.setState({step:"backupCodesShowCodes",backupCodes:r.backupCodes,mfaSettingId:r.mfaSettingId,backupCodesFile:e}),n()}}}},42476:(e,t,s)=>{s.d(t,{A:()=>i});const i=(0,s(340498).xh)("personCropCircleBadgeExclamationPoint",{default:{loader:()=>s.e(4643).then(s.bind(s,504643))},small:{loader:()=>s.e(87661).then(s.bind(s,87661))},mini:{loader:()=>s.e(42683).then(s.bind(s,442683))},large:{loader:()=>s.e(94097).then(s.bind(s,894097))}})},73223:(e,t,s)=>{s.r(t),s.d(t,{dismissTutorial:()=>c,resetTutorials:()=>u,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>m,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>d});var i=()=>s(541235),n=()=>s(317909),o=()=>s(755199),r=()=>s(739135),a=()=>s(351360);function l(e,t){var s;const{currentUserSettingsStore:i}=a().default.state;if(!i)return;const n=null===(s=i.getSettings())||void 0===s?void 0:s.tutorials;g({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{o().mJ({userSettingsStore:i,transaction:e,data:{tutorials:{...n,[t]:(0,r().i9)(i,t)}}})},userId:i.id})}function d(e,t){var s;const{currentUserSettingsStore:i}=a().default.state;if(!i)return;const n=null===(s=i.getSettings())||void 0===s?void 0:s.tutorials;g({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{o().mJ({userSettingsStore:i,transaction:e,data:{tutorials:{...n,[t]:(0,r().KD)(i,t)}}})},userId:i.id})}function c(e,t){var s;const{currentUserSettingsStore:n}=a().default.state;if(!n)return;const r=null===(s=n.getSettings())||void 0===s?void 0:s.tutorials;g({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{o().mJ({userSettingsStore:n,transaction:e,data:{tutorials:{...r,[t]:i().YD}}})},userId:n.id})}function u(e){const{currentUserSettingsStore:t}=a().default.state;t&&g({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{o().mJ({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,s){var n;const{currentUserSettingsStore:l}=a().default.state;if(!l||(0,r().x$)(l,t))return;const d=(0,r().gt)(l,t);i().c$[t].steps.findIndex((e=>e.id===d))>=i().c$[t].steps.findIndex((e=>e.id===s))||o().mJ({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(n=l.getSettings())||void 0===n?void 0:n.tutorials,[t]:s}}})}function m(e,t,s){if((0,r().ll)(s))return;const i=(0,r().tb)(t,s);i&&p(e,t,i)}function g(e){return n().createAndCommit({...e,canUndo:!1})}},126550:(e,t,s)=>{s.d(t,{$:()=>l,t:()=>d});var i=()=>s(792071),n=()=>s(848538),o=()=>s(798880),r=()=>s(436856),a=()=>s(47373);function l(e,t){return e.getKeyStore("settings").getKeyStore("seen_guest_membership_requests").getValue()&&(0,a().nJ)()}function d(e,t){const s=i().Bj6.fromAccessRequest(e);if(!s.isPageAccessRequest())return!1;const a=s.getForActorPointer(t.id);return a.table===o().oo&&!r().V.createChildStore(t,n().i1({userId:a.id,spaceId:t.id})).isMember()}},127955:(e,t,s)=>{s.d(t,{fm:()=>ce,Ck:()=>ue,AJ:()=>de,Ay:()=>le});s(898992),s(354520);var i=s(296540),n=()=>s(484714),o=()=>s(56366),r=()=>s(401497),a=()=>s(985595),l=()=>s(959013),d=()=>s(284371),c=()=>s(706024),u=()=>s(317909),p=()=>s(126550),m=()=>s(657328),g=()=>s(351360),h=()=>s(132813),f=()=>s(991249),S=()=>s(118849),y=()=>s(946548),x=()=>s(125565),b=()=>s(8178),v=()=>s(508490),A=(s(581454),()=>s(709438)),w=()=>s(317182),j=(s(672577),()=>s(869190)),M=()=>s(604995),k=()=>s(842599),C=()=>s(416504),I=()=>s(644484),_=()=>s(668725),T=()=>s(742117),P=()=>s(496603),B=()=>s(534177),R=()=>s(746970),D=()=>s(436572),N=()=>s(962730),L=()=>s(630116),U=()=>s(704152),O=()=>s(493823),E=()=>s(864943),F=()=>s(859428),V=()=>s(994006),q=()=>s(453697),G=()=>s(584262),z=()=>s(433847),K=()=>s(179034),W=()=>s(435009),H=()=>s(492414),$=()=>s(296798),Y=()=>s(614505),Q=()=>s(16006),X=s(474848);function Z(e){const{pageAndRole:t,environment:s,intl:i}=e,n=(0,r().IS)((e=>({title:{marginLeft:2},role:{marginLeft:4},linkContainer:{display:"inline-flex",alignItems:"center"}})),[]),a=(0,o().K8)((()=>new(L().Bv)(s,{table:K().ev,id:t.id})),[s,t.id]),l=(0,o().K8)((()=>{var e;return null===(e=a.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:a.getRecordModel})}),[a]),d=(0,o().K8)((()=>(0,H().Ay)({store:a,pageVisitSource:G().y8.LinkInPage})),[a]);return(0,X.jsxs)($().A,{style:n.linkContainer,onClick:()=>{W().oo({environment:s,url:d,openInNew:"tab"})},children:[(0,X.jsx)(Y().A,{icon:l,size:16,isEmptyPage:!1,disabled:!0}),(0,X.jsx)("b",{children:(0,X.jsx)(Q().A,{style:n.title,store:a})}),(0,X.jsx)(x().A,{style:n.role,isSecondaryColor:!0,children:`(${i.formatMessage((0,z().an)(t.role,K().ev)).toLocaleLowerCase()})`})]})}function J(e){const{store:t,request:s}=e,{forActor:a,accessRequest:d,createdByActorsWithReason:c}=s,u=(0,n().v3)(),p=(0,r().IS)((e=>({actionButtons:{display:"flex",alignItems:"center",gap:12},requestMetadata:{minWidth:0,marginLeft:10,marginRight:6},tooltip:{marginBottom:2},tooltipHeader:{color:e.text.contrastSecondary,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em",marginBottom:2},requestBody:{marginLeft:38,marginTop:8}})),[]),m=(0,l().tz)(),g=(0,o().K8)((()=>a.__IM_SORRY__getValue()),[a]),h=(0,o().K8)((()=>(0,P().hS)(c.map((e=>{let{actor:t}=e;return t})),(e=>e.id))),[c]),f=(0,o().K8)((()=>d.getType()),[d]),S=(0,o().K8)((()=>s.createdByActorsWithReason.filter((e=>{let{reason:t}=e;return Boolean(t)})).map((e=>`${e.actor.getDisplayName(m)} · ${e.reason}`))),[s,m]),y=(0,o().K8)((()=>{var e;return d.isGuestInviteRequest()?null===(e=d.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e?void 0:e[0]:void 0}),[d]),b=(0,o().K8)((()=>{if(!d.isGuestInviteRequest())return;const e=(0,k().qh)(a.email),s=e&&(0,k().zN)(e);return s?t.getEmailDomains().find((e=>e===s)):void 0}),[d,a,t]),v=(0,o().K8)((()=>d.created_time),[d]),A=(0,i.useCallback)((async()=>{if(d.isGuestInviteRequest()){(await R().aV({environment:u,requests:[d],status:"approved",from:"requests_center"})).failedUsers.length>0?D().D6({label:(0,X.jsx)(l().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.failure",defaultMessage:"Failed to invite {actorEmail} as a guest",values:{actorEmail:a.email}})}):D().D6({label:(0,X.jsx)(l().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.success",defaultMessage:"Invited {actorEmail} as guest",values:{actorEmail:a.email}})})}else if(d.isSpaceMembershipRequest()){(await R().p4({environment:u,store:t,requests:[d],status:"approved",from:"requests_center"})).failedUsers.length>0?D().D6({label:(0,X.jsx)(l().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.failure",defaultMessage:"Failed to add {actorEmail} as a member",values:{actorEmail:a.email}})}):D().D6({label:(0,X.jsx)(l().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.success",defaultMessage:"Added {actorEmail} as a member",values:{actorEmail:a.email}})})}}),[d,u,a,t]),w=(0,i.useCallback)((()=>{d.isGuestInviteRequest()?R().aV({environment:u,requests:[d],status:"rejected",from:"requests_center"}):d.isSpaceMembershipRequest()&&R().p4({environment:u,store:t,requests:[d],status:"rejected",from:"requests_center"})}),[d,u,t]);if(!(s&&a&&g&&c.length))return null;const I=M().KQ(v,(0,C().P)()),_=(0,j().ZF)({value:I,date_format:"relative",userTimeZone:(0,C().P)(),intl:m,allowRelativeDates:!0}),T=S.length>0||(0,B().O9)(y);return(0,X.jsxs)("div",{style:{width:"100%"},children:[(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,X.jsx)(ie,{forActor:g,type:f}),(0,X.jsxs)("div",{style:p.requestMetadata,children:[(0,X.jsx)(se,{type:f,forActor:g}),(0,X.jsxs)(x().A,{isSmall:!0,children:[(0,X.jsx)(F().A,{renderTooltip:()=>(0,X.jsxs)("div",{style:p.tooltip,children:[(0,X.jsx)(x().A,{style:p.tooltipHeader,children:(0,X.jsx)(l().sA,{defaultMessage:"Requested by",id:"spaceSettingsRequests.requestRowAction.requestedByMoreThanTwo.tooltip"})}),h.map((e=>(0,X.jsx)(oe,{actor:e},e.id)))]}),render:e=>(0,X.jsx)("span",{...e,children:(0,X.jsx)(ne,{request:s,createdByActors:h})})})," · ",_]})]})]}),(0,X.jsxs)("div",{style:p.actionButtons,children:[(0,X.jsx)(O().p,{isGray:!0,onClick:w,children:(0,X.jsx)(l().sA,{defaultMessage:"Decline",id:"spaceSettingsRequests.requestRowAction.declineButton.label"})}),(0,X.jsx)(F().A,{render:e=>(0,X.jsx)(E().A,{size:"lg",color:"uiBlue",onClick:A,...e,children:(0,X.jsx)(l().sA,{defaultMessage:"Approve",id:"spaceSettingsRequests.requestRowAction.acceptButton.label"})}),renderTooltip:()=>(0,X.jsx)("div",{style:{width:300},children:(0,X.jsx)(l().sA,{defaultMessage:"This user will automatically be added to the workspace when approved since {domain} is an allowed email domain",id:"spaceSettingsRequests.requestRowAction.allowedEmailDomain.tooltip",values:{domain:b}})}),disableTooltip:!b,textWrap:!0,placement:N().W.Bottom})]})]}),T&&(0,X.jsxs)("div",{style:p.requestBody,children:[y&&(0,X.jsx)(Z,{pageAndRole:y,environment:u,intl:m}),S.length>0&&(0,X.jsx)(te,{reasonMessages:S})]})]})}function ee(e){return(0,X.jsx)("b",{children:e})}function te(e){const{reasonMessages:t}=e,[s,n]=(0,i.useState)(!1),o=(0,r().IS)((e=>({viewReasonsToggle:{paddingLeft:2,paddingRight:2,borderRadius:2,display:"inline-flex",alignItems:"center"},viewReasonsCaratIcon:{marginLeft:2,width:12,height:12,color:e.accentColors.gray[500]},reasonMessageBody:{marginTop:2}})),[]);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(U().A,{style:o.viewReasonsToggle,onClick:()=>n(!s),children:[(0,X.jsx)(x().A,{isSmall:!0,children:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.requestRowAction.viewReasonsButton.label",defaultMessage:"View reasons"})}),s?(0,_().b)(o.viewReasonsCaratIcon):(0,T().V)(o.viewReasonsCaratIcon)]}),s&&(0,X.jsx)("div",{style:o.reasonMessageBody,children:t.map(((e,t)=>(0,X.jsx)("div",{children:e},t)))})]})}function se(e){const{forActor:t,type:s}=e,i=(0,r().IS)((e=>({title:{display:"flex",gap:4},semibold:{fontWeight:d().Wy.semibold}})),[]),n="guest_invite_request"===s?(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.requestRow.title.guestInviteRequest",defaultMessage:"Invite {actorEmail} as a guest",values:{actorEmail:(0,X.jsx)("span",{style:i.semibold,children:t.email})}}):(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.requestRow.title.membershipRequest",defaultMessage:"Add {actorEmail} as a member",values:{actorEmail:(0,X.jsx)("span",{style:i.semibold,children:t.email})}});return(0,X.jsx)("div",{style:i.title,children:(0,X.jsx)(x().A,{className:"notranslate",children:n})})}function ie(e){const{type:t,forActor:s}=e,i=(0,r().IS)((e=>({avatarWrapper:{borderRadius:"100%",background:e.accentColors.gray[75],width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center"},addPersonIcon:{width:18,height:18,color:e.accentColors.gray[500]}})),[]);return"guest_invite_request"===t?(0,X.jsx)("div",{style:i.avatarWrapper,children:(0,I().g)(i.addPersonIcon)}):(0,X.jsx)(q().A,{userValue:s,size:28,borderStyle:"dashed"})}function ne(e){const{createdByActors:t,request:s}=e,i=(0,l().tz)(),n=(0,o().K8)((()=>t.filter((e=>e.email!==s.forActor.email))),[s,t]),r=(0,o().K8)((()=>{var e;return null===(e=t[0])||void 0===e?void 0:e.getDisplayName(i)}),[t,i]),a=(0,o().K8)((()=>{var e;return null===(e=t[1])||void 0===e?void 0:e.getDisplayName(i)}),[t,i]),d=(0,o().K8)((()=>{var e;return null===(e=n[0])||void 0===e?void 0:e.getDisplayName(i)}),[n,i]),c=n.length!==t.length;return 1===t.length?c?(0,X.jsx)(l().sA,{defaultMessage:"Guest self request",id:"spaceSettingsRequests.requestRowAction.requestedBySingularGuestSelfRequest"}):(0,X.jsx)(l().sA,{defaultMessage:"Requested by <b>{actorName}</b>",id:"spaceSettingsRequests.requestRowAction.requestedBySingular.v2",values:{actorName:r,b:ee}}):c?(0,X.jsx)(l().sA,{defaultMessage:"{numberOfOtherActors, plural, one {Guest self request and requested by <b>{secondActorName}</b>} other {Guest self request and requested by <b>{numberOfOtherActors}</b> more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPluralIncludingGuestSelfRequest.v2",values:{secondActorName:d,numberOfOtherActors:n.length,b:ee}}):(0,X.jsx)(l().sA,{defaultMessage:"{numberOfOtherActors, plural, one {Requested by {firstActorName} and {secondActorName}} other {Requested by {firstActorName} and {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPlural.v2",values:{firstActorName:r,secondActorName:a,numberOfOtherActors:t.length-1}})}function oe(e){let{actor:t}=e;const s=(0,n().v3)(),i=(0,r().IS)((()=>({component:{display:"flex",justifyContent:"space-between",marginBottom:4},email:{marginLeft:5}})),[]),a=(0,o().K8)((()=>t.email),[t]),l=new(L().LU)(s,t.pointer);return(0,X.jsxs)("div",{style:i.component,children:[(0,X.jsx)(V().A,{avatarSize:18,userStore:l}),(0,X.jsx)("div",{style:i.email,children:a})]},t.id)}function re(e){const{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:i}=e,n=(0,o().K8)((()=>s.filter((e=>"pending"===e.accessRequest.status)).sort(((e,t)=>t.accessRequest.created_time-e.accessRequest.created_time))),[s]),d=(0,r().IS)((e=>({requestColumn:{width:"100%"},zeroStateContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor,borderStyle:"solid",borderColor:e.regularDividerColor,borderWidth:1,borderRadius:4},mailIcon:{height:12,width:17,color:e.mediumIconColor,marginRight:6}})),[]),c={key:"request",header:void 0,style:d.requestColumn};return 0===n.length?(0,X.jsxs)("div",{style:d.zeroStateContainer,children:[(0,a().n)(d.mailIcon),(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.emptyRequests.message",defaultMessage:"No invite requests yet"})]}):(0,X.jsx)(w().A,{hideHeader:!0,columns:[c],rows:n.map(((e,s)=>({key:`request${s.toString()}`,columns:[(0,X.jsx)(ae,{request:e,lastOpenedRequestCenterTime:i,spaceStore:t},e.accessRequest.id)]})))})}function ae(e){let{request:t,lastOpenedRequestCenterTime:s,spaceStore:i}=e;const n=(0,o().K8)((()=>s<t.accessRequest.created_time),[s,t.accessRequest]);return(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[n&&(0,X.jsx)("div",{style:{marginLeft:-18,marginRight:10},children:(0,X.jsx)(A().m,{size:8})}),(0,X.jsx)(J,{store:i,request:t})]},t.accessRequest.id)}function le(e){const{spaceStore:t,accessRequestRenderValues:s}=e,c=(0,n().v3)(),[p,m]=(0,i.useState)(Date.now()),f=(0,o().uB)(void 0,h().A),S=(0,o().K8)((()=>f.getValueForSpace(t)),[t,f]),y=(0,o().K8)((()=>s?s.filter((e=>"pending"===e.accessRequest.status)).length:0),[s]),x=(0,o().K8)((()=>t.canAdmin()),[t]),A=(0,r().IS)((e=>({errorContainer:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor},settingHeader:{fontSize:16,fontWeight:d().Wy.medium},requestCount:{color:e.lightTextColor}})),[]);(0,i.useEffect)((()=>{const{currentSpaceViewStore:e}=g().default.state;if(!e)return;const t=e.getKeyStore("settings").getKeyStore("last_opened_request_center").getValue();t&&m(t),u().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:c,canUndo:!0,perform:t=>{u().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_request_center"],command:"set",args:Date.now()},transaction:t})}})}),[]);const w=(0,i.useCallback)((()=>x?null:(0,X.jsx)(me,{securitySettingsStoreState:S,spaceStore:t,environment:c,isReadOnly:!0})),[c,x,S,t]);return s?(0,X.jsxs)(X.Fragment,{children:[x?(0,X.jsx)(v().A,{icon:a().n,title:(0,X.jsx)(l().sA,{id:"spaceSettingsRequest.deeplinkCard.title",defaultMessage:"Change request settings in the <bold>Security</bold> tab",values:{bold:e=>(0,X.jsx)("span",{style:{fontWeight:d().Wy.semibold},children:e})}}),deeplinkTab:{currentTab:"security",defaultSubtab:void 0}}):null,w(),(0,X.jsxs)(b().A,{divider:"none",large:!0,style:A.settingHeader,children:[(0,X.jsx)(l().sA,{id:"spaceSettingsRequest.title",defaultMessage:"Requests"}),(0,X.jsx)("span",{children:" "}),(0,X.jsx)("span",{style:A.requestCount,children:y>0?y:void 0})]}),(0,X.jsx)(re,{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:p})]}):(0,X.jsx)("div",{style:A.errorContainer,children:(0,X.jsx)(ge,{})})}function de(e){return(0,X.jsx)(pe,{...e,title:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.allowMembersToRequestMembers.title",defaultMessage:"Allow members to request adding other members"}),description:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.allowMembersToRequestMembers.description",defaultMessage:"Members can submit requests to admins to add more members"})})}function ce(e){return(0,X.jsx)(pe,{...e,title:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.title",defaultMessage:"Allow any user to request to be added as a member of the workspace"}),description:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.description",defaultMessage:"If enabled, users with teamspace invite links can submit requests to admins to be added as members"})})}function ue(e){return(0,X.jsx)(pe,{...e,title:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.title",defaultMessage:"Allow page guests to request to be added as members to the workspace"}),description:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.description",defaultMessage:"Guests of the workspace can submit requests to admins to be added as members"})})}function pe(e){const{toggleOn:t,shouldShowUpsell:s,onClick:n,style:o,upsellOrigin:a,environment:d,description:c,title:u,isReadOnly:p,isControlledByOrganization:g}=e,h=(0,r().IS)((()=>({toggleContainer:{display:"flex",alignItems:"center",cursor:p?"auto":"pointer",marginBottom:14,...o},titleDescription:{fontSize:14,marginRight:8,flexGrow:1},description:{marginTop:2,width:"80%"}})),[o,p]),b=(0,i.useCallback)((()=>{p||g||(s?f().K(d,{from:a,upsell:{type:"product",product:"plus",limit:{type:"none"}}}):n())}),[d,a,p,s,n,g]);return(0,X.jsxs)("div",{style:h.toggleContainer,onClick:b,children:[(0,X.jsxs)("div",{style:h.titleDescription,children:[u,s?(0,X.jsx)(S().A,{subscriptionTier:"plus",analyticsName:a,onClick:()=>f().K(d,{from:a,upsell:{type:"product",product:"plus",limit:{type:"none"}}}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}}):null,(0,X.jsx)(x().A,{isSmall:!0,isMultiline:!0,style:h.description,children:c})]}),p?(0,X.jsx)(x().A,{isSmall:!0,children:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.readOnlyState.label",defaultMessage:"{isEnabled, select, true {Enabled} other {Disabled}}",values:{isEnabled:t}})}):(0,X.jsx)(y().A,{on:t,disabled:s,isLocked:g,lockedTooltip:(0,m().C)()})]})}function me(e){const{securitySettingsStoreState:t,spaceStore:s,environment:n,isReadOnly:r}=e,a=Boolean(null==t?void 0:t.disableMembershipRequests),l=Boolean(null==t?void 0:t.disableExternalMembershipRequests),d=Boolean(null==t?void 0:t.disableGuestMembershipRequests),u=(0,o().K8)((()=>(0,p().$)(s,n)),[n,s]),m=(0,i.useCallback)((()=>{t&&c().V(n,{securitySettingsState:{...t,disableMembershipRequests:!t.disableMembershipRequests},spaceStore:s})}),[n,t,s]),g=(0,i.useCallback)((()=>{t&&c().V(n,{securitySettingsState:{...t,disableExternalMembershipRequests:!t.disableExternalMembershipRequests},spaceStore:s})}),[n,t,s]),h=(0,i.useCallback)((()=>{t&&c().V(n,{securitySettingsState:{...t,disableGuestMembershipRequests:!t.disableGuestMembershipRequests},spaceStore:s})}),[n,t,s]);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(de,{environment:n,upsellOrigin:"members_settings",toggleOn:!a,shouldShowUpsell:!1,isReadOnly:r,onClick:m}),(0,X.jsx)(ce,{environment:n,upsellOrigin:"members_settings",toggleOn:!l,shouldShowUpsell:!1,isReadOnly:r,onClick:g}),u&&(0,X.jsx)(ue,{environment:n,upsellOrigin:"members_settings",toggleOn:!d,shouldShowUpsell:!1,isReadOnly:r,onClick:h})]})}function ge(){return(0,X.jsx)(l().sA,{defaultMessage:"Something went wrong.",id:"spaceSettingsRequests.unknownErrorMessage"})}},128907:(e,t,s)=>{s.d(t,{R:()=>o});var i=()=>s(604995),n=()=>s(351360);function o(){const e=n().default.state.currentUserSettingsStore;if(!e)return!1;const t=e.getSettings();if(!t)return!1;if(!t.seen_contraction_survey_at)return!0;return Date.now()>(0,i().K1)({date:t.seen_contraction_survey_at,daysToAdd:1})}},130102:(e,t,s)=>{s.d(t,{u:()=>i});const i=(0,s(340498).xh)("pencilLine",{default:{loader:()=>s.e(98161).then(s.bind(s,398161))},small:{loader:()=>s.e(29995).then(s.bind(s,829995))},mini:{loader:()=>s.e(71229).then(s.bind(s,571229))},large:{loader:()=>s.e(61843).then(s.bind(s,661843))}})},149397:(e,t,s)=>{s.d(t,{k:()=>a});var i=s(296540),n=()=>s(484714),o=()=>s(449506),r=s(474848);function a(e){return function(t){const s=(0,n().v3)(),[a,l]=(0,i.useState)({isDomainVerified:!1,settings:{}});(0,i.useEffect)((()=>{o().callApi({eventName:"getEmailDomainSettings",environment:s,data:{}}).then((e=>{"success"===e.type&&l(e.data)}))}),[s]);const d={...t,userEmailDomainSettings:a};return(0,r.jsx)(e,{...d})}}},205224:(e,t,s)=>{s.d(t,{D:()=>v,P:()=>b});s(16280),s(296540);var i=()=>s(959013),n=()=>s(680074),o=()=>s(57605),r=()=>s(224701),a=()=>s(134217),l=()=>s(749240),d=()=>s(952710),c=()=>s(475355),u=()=>s(134696),p=()=>s(966505),m=()=>s(449506),g=()=>s(496414),h=()=>s(579627),f=()=>s(436572),S=()=>s(317909),y=s(474848);const x=(0,i().YK)({removingGuest:{id:"convertGuestToMember.removeGuest.updatingMessage",defaultMessage:"Updating…"},convertingGuest:{id:"convertGuestToMember.convertingGuest.updatingMessage",defaultMessage:"Updating…"}});async function b(e){const{environment:t,store:s,role:m,guestUserStore:b,isConvertToAdmin:v}=e,A=b.id,w=b.getEmail(),j=l().subscriptionDataStoreInstance.state,M=j?await(0,a().$)(t,s.getSpaceId(),j):1;try{if(g().m({message:x.convertingGuest}),!s.isTeamsEnabled()){if(!(await c().oH({environment:t,flowId:"",trackCreateTeamComplete:!1})))return}const i=[{type:"user_permission",role:m,user_id:A}],{serverCommitResult:o}=S().createAndCommit({userAction:"spacePerimssionGuestActions.convertGuestToMember",environment:t,canUndo:!0,perform:e=>{h().dy({environment:t,spaceStore:s,permissionItems:i,transaction:e,from:"convert_to_member"})}});await o,p().gc(t,{member_user_id:A,convert_to:v?"admin":"member",origin:e.origin}),u().Jg(t,{role:m,is_space:!0,invite_targets:[{type:"existingUser",value:{id:A,version:0,email:""},spaceRole:"none"}],is_onboarding:!1,invite_origin:"convert_to_member",permission_items:i,invite_message_length:0,domainType:(0,n().FX)()})}catch(k){f().D6({label:(0,y.jsx)(i().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.snackbar.failure",defaultMessage:"Failed to convert {email} to workspace member",values:{email:w}})})}finally{await r().Ow(t);const e=j?await(0,a().$)(t,s.getSpaceId(),j):1,i=1===M&&e>1,n=s.getSpaceId(),l=n?o().A.getData(t,{spaceId:n}):void 0;if(i&&(null==l||!l.subscription)&&n){const e=await d().dB.trialActions.load();await e.applyMultiplayerReverseTrialIfEligible({spaceId:n,environment:t})}g().V()}}async function v(e){const{environment:t,store:s,guestUserStore:n}=e,o=n.id,a=n.getEmail();try{g().m({message:x.removingGuest});if("success"!==(await m().callApi({eventName:"removeUsersFromSpace",environment:t,data:{userIds:[o],spaceId:s.id,removePagePermissions:!0,revokeUserTokens:!1}})).type)throw new Error("Failed to remove guest");p().wX(t)}catch(l){f().D6({label:(0,y.jsx)(i().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.snackbar.failure",defaultMessage:"Failed to remove {email} from workspace",values:{email:a}})})}finally{await r().Ow(t),g().V(),p().xO(t,{origin:"space_setting_guest_tab",changedNumber:-1})}}},231127:(e,t,s)=>{s.d(t,{V:()=>r});s(296540);var i=()=>s(959013),n=s(474848);const o=(0,i().YK)({switchingToNewTool:{id:"survey.options.switching.placeholder",defaultMessage:"Share the name of the other tools"},switchingToNewAiTool:{id:"survey.options.usingAnotherAIService.placeholder",defaultMessage:"Share the name of the other AI tools"}}),r={consolidatingWorkspaces:{optionName:"consolidating_workspaces",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.consolidatingWorkspaces",defaultMessage:"Consolidating Notion workspaces"})},dataSecurity:{optionName:"data_security",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"churnSurvey.reasons.dataSecurity",defaultMessage:"Data security"})},missingFeatures:{optionName:"missing_features",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.missingFeatures",defaultMessage:"Missing features"})},noLongerNeedAccess:{optionName:"no_longer_need_access",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.noLongerNeedAccess",defaultMessage:"No longer need access to Notion"})},noLongerWorkTogether:{optionName:"no_longer_work_together",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.noLongerWorksHere",defaultMessage:"No longer works here"})},notUsingEnough:{optionName:"not_using_enough",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.notUsingEnough",defaultMessage:"Not using it enough"})},other:{optionName:"other",type:"checkboxAndInput",label:(0,n.jsx)(i().sA,{id:"survey.options.other",defaultMessage:"Other"})},switching:{optionName:"switching",type:"checkboxAndInput",label:(0,n.jsx)(i().sA,{id:"survey.options.switching",defaultMessage:"Switching to another tool"}),placeholderText:o.switchingToNewTool},switchingToAnotherWorkspace:{optionName:"switching_to_another_workspace",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.switchingToAnotherWorkspace",defaultMessage:"Switching to another Notion workspace"})},tooDifficult:{optionName:"too_difficult",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.tooDifficult",defaultMessage:"Too difficult to use"})},tooExpensive:{optionName:"too_expensive",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.tooExpensive",defaultMessage:"Too expensive"})},upgradedByMistake:{optionName:"upgraded_by_mistake",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.upgradedByMistake",defaultMessage:"Upgraded by mistake"})},usingAnotherAiService:{optionName:"using_another_ai_service",type:"checkboxAndInput",label:(0,n.jsx)(i().sA,{id:"churnSurvey.reasons.usingAnotherAIService",defaultMessage:"Using another AI service"}),placeholderText:o.switchingToNewAiTool},qualityOfResults:{optionName:"quality_of_results",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"churnSurvey.reasons.qualityOfResults",defaultMessage:"Quality of results"})}}},234695:(e,t,s)=>{s.d(t,{K:()=>g});s(296540);var i=()=>s(484714),n=()=>s(56366),o=()=>s(427704),r=()=>s(564766),a=()=>s(959013),l=()=>s(780054),d=()=>s(597898),c=()=>s(824011),u=()=>s(249117),p=()=>s(125565),m=s(474848);function g(e){let{spaceStore:t,showDomain:s}=e;const g=(0,i().v3)(),h=(0,a().tz)(),f=(0,n().K8)((()=>t.id),[t]),S=(0,n().K8)((()=>t.getPublicContentDomain()),[t]),y=(0,d().P9)({name:"saml",spaceId:t.id,userId:g.currentUser.id}),x=(0,d().P9)({name:"scim",spaceId:t.id,userId:g.currentUser.id});return(0,m.jsxs)(u().xA,{gap:8,children:[(0,m.jsx)(u().LX,{row:1,col:1,children:(0,m.jsx)(p().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(a().sA,{id:"securitySAMLSettings.SetupInformationSection.workspaceId",defaultMessage:"Workspace ID"})})}),(0,m.jsx)(u().LX,{row:1,col:2,children:(0,m.jsx)(p().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(c().x,{text:f,tooltip:h.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceId.copyTooltip",defaultMessage:"Click to copy ID"})})})}),y?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u().LX,{row:2,col:1,children:(0,m.jsx)(p().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(a().sA,{id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityIDLink",defaultMessage:"SAML SSO/SAML Entity ID"})})}),(0,m.jsx)(u().LX,{row:2,col:2,children:(0,m.jsx)(p().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(c().x,{text:(0,r().Hw)(l().A.domainBaseUrl),tooltip:h.formatMessage({id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityID.copyTooltip",defaultMessage:"Click to copy link"})})})})]}):null,x?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u().LX,{row:3,col:1,children:(0,m.jsx)(p().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(a().sA,{id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl",defaultMessage:"SCIM base URL"})})}),(0,m.jsx)(u().LX,{row:3,col:2,children:(0,m.jsx)(p().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(c().x,{text:l().A.domainBaseUrl+o().JZ.scimApiBasePath,tooltip:h.formatMessage({id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl.copyTooltip",defaultMessage:"Click to copy link"})})})})]}):null,s&&void 0!==S?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u().LX,{row:y?4:2,col:1,children:(0,m.jsx)(p().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(a().sA,{id:"securitySAMLSettings.SetupInformationSection.workspaceDomain",defaultMessage:"Workspace Domain"})})}),(0,m.jsx)(u().LX,{row:y?4:2,col:2,children:(0,m.jsx)(p().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(c().x,{text:S,tooltip:h.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceDomain.copyTooltip",defaultMessage:"Click to copy domain"})})})})]}):null]})}},243923:(e,t,s)=>{s.d(t,{A:()=>T});var i=s(296540),n=()=>s(484714),o=()=>s(56366),r=()=>s(401497),a=s(474848);const l=(0,s(340498).wt)("paperAirplane",{viewBox:"0 0 34 34",svg:(0,a.jsx)("path",{d:"M19.6719 32.7188C20.6406 32.7188 21.3125 31.9375 21.8281 30.625L32.2188 3.45312C32.4375 2.875 32.5625 2.375 32.5625 1.9375C32.5625 1.07812 32.0312 0.546875 31.1719 0.546875C30.7344 0.546875 30.2344 0.671875 29.6562 0.890625L2.39062 11.3281C1.20312 11.7812 0.390625 12.4688 0.390625 13.4375C0.390625 14.625 1.26562 15.0781 2.64062 15.4844L14.2344 18.875L17.5938 30.375C18.0156 31.7969 18.4688 32.7188 19.6719 32.7188ZM14.7812 17.0469L3.51562 13.6719C3.0625 13.5469 2.95312 13.4375 2.95312 13.2812C2.95312 13.125 3.0625 13 3.4375 12.8594L26.6562 4.03125C27.6094 3.67188 28.5469 3.20312 29.375 2.82812C28.6094 3.4375 27.5156 4.29688 26.9062 4.90625L14.7812 17.0469ZM19.8281 30.1719C19.6719 30.1719 19.5625 30.0469 19.4375 29.6094L16.0625 18.3438L28.2031 6.20312C28.8125 5.60938 29.6875 4.5 30.3125 3.70312C29.9219 4.54688 29.4531 5.48438 29.0781 6.45312L20.25 29.6719C20.1094 30.0469 20 30.1719 19.8281 30.1719Z"})});var d=()=>s(640479),c=()=>s(413267),u=()=>s(560686),p=()=>s(959013),m=()=>s(100622),g=()=>s(496603),h=()=>s(284371),f=()=>s(278768),S=()=>s(449506),y=()=>s(38337),x=()=>s(898486),b=()=>s(398194),v=()=>s(802790),A=()=>s(297872),w=()=>s(623580),j=()=>s(957986),M=()=>s(125565),k=()=>s(274602),C=()=>s(653027),I=()=>s(318575),_=()=>s(101919);const T=(0,p().j4)((function(e){let{mfaStatus:t,isError:o,samlEnforced:r,isEducationPlan:l,hasPassword:d,intl:c,onReloadSettings:u,email:m}=e;const g=(0,n().v3)(),h=(0,i.useRef)();(0,i.useEffect)((()=>{if("on"===t&&void 0===h.current){const e=new(s(461857).q)(g),t=new(I().r);h.current=new(I().U)(t,e)}}),[g,t]);const S=(0,i.useCallback)((()=>function(e,t,s){"on"===t?b().A.setState({open:!0,verifyIdentity:!0,onCancel:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.exit()}}):(f().d7(e),b().A.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}))}(g,t,h)),[g,t,h]),{device:y}=g;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s(702723).A,{type:"custom",isMobile:y.isMobile,title:(0,a.jsx)(p().sA,{id:"profileSettings.accountSecuritySection.passwordSetting.label",defaultMessage:"Password"}),caption:(0,a.jsx)(D,{hasPassword:d,isError:o,samlEnforced:r,isEducationPlan:l}),customButton:(0,a.jsx)(s(864943).A,{size:"lg",style:{marginTop:12,marginBottom:4},onClick:S,children:(0,a.jsx)(p().sA,{id:"passwordSetting.changePasswordButton.label",defaultMessage:"Change password"})}),disabled:r}),(0,a.jsx)(Z,{hasPassword:d,intl:c,onReloadSettings:u,isEducationPlan:l,email:m,mfaStatus:t,settingsStateMachineRef:h})]})}));function P(e){return{display:e?"inherit":"none",marginTop:10,textAlign:"center",color:m().Ay.red,fontSize:h().J.UISmall.desktop}}function B(){return(0,a.jsx)(p().sA,{id:"passwordSettings.passwordModal.educationPlanGuidelines",defaultMessage:"If you lose access to your school email address, you'll be able to log in using your password."})}function R(e,t){return!e&&t}function D(e){let{isError:t,samlEnforced:s,isEducationPlan:i,hasPassword:n}=e;return t?(0,a.jsx)(p().sA,{id:"passwordSettings.passwordSetError.message",defaultMessage:"Your password cannot be set at this time. Please try again later."}):s?(0,a.jsx)(p().sA,{id:"passwordSettings.passwordManagedThroughSAMLProvider.message",defaultMessage:"Your password is managed through your SAML single sign-on Provider."}):i?(0,a.jsx)(B,{}):n?(0,a.jsx)(p().sA,{id:"passwordSettings.changePassword.message",defaultMessage:"Change your password to login to your account."}):(0,a.jsx)(p().sA,{id:"passwordSettings.setPassword.message",defaultMessage:"Set a permanent password to login to your account."})}function N(e){return{width:27,height:27,fill:e.regularIconColor}}function L(e){(b().A.isSetNewPasswordModal()||b().A.isRemovePasswordModal())&&b().A.setState({...b().A.state,oldPassword:e.target.value,alert:void 0})}function U(){(b().A.isSetNewPasswordModal()||b().A.isRemovePasswordModal())&&b().A.setState({...b().A.state,oldPassword:"",alert:void 0})}function O(e){b().A.isSetNewPasswordModal()&&b().A.setState({...b().A.state,password:e.target.value,alert:void 0})}function E(){const{onCancel:e}=b().A.state;b().A.reset(),e&&e()}function F(){b().A.isSetNewPasswordModal()&&b().A.setState({...b().A.state,password:"",repeatPassword:"",alert:void 0})}function V(e){b().A.isSetNewPasswordModal()&&b().A.setState({...b().A.state,repeatPassword:e.target.value,alert:void 0})}function q(){b().A.isSetNewPasswordModal()&&b().A.setState({...b().A.state,repeatPassword:"",alert:void 0})}function G(){b().A.setState({open:!0,removePassword:!0,isSuccess:!1,oldPassword:""})}function z(e){if(b().A.isSetNewPasswordModal()){const{password:t,repeatPassword:s}=b().A.state;t&&s&&t!==s&&b().A.setState({...b().A.state,alert:e.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordMismatchError",defaultMessage:"Your new password does not match."})})}}async function K(e,t,s){if(!b().A.isRemovePasswordModal())return;const{oldPassword:i}=b().A.state;if(f().T8(s),!i)return void b().A.setState({...b().A.state,alert:e.formatMessage({id:"passwordSettings.removePasswordModal.oldPasswordNotEnteredError",defaultMessage:"Please enter your current password."})});const n=await S().callApi({eventName:"setPassword",environment:s,data:{oldPassword:i,clearPassword:!0}});if("success"===n.type)t(),b().A.isRemovePasswordModal()&&b().A.setState({...b().A.state,isSuccess:!0,oldPassword:"",alert:void 0});else{const t=(0,x().Hu)(e,n);b().A.setState({...b().A.state,alert:t||e.formatMessage({id:"passwordSettings.removePasswordModal.message",defaultMessage:"Error removing password. Please try again later."})})}}function W(e){let{isEducationPlan:t}=e;const s=(0,r().DP)(),i=(0,o().K8)((()=>b().A.isPasswordSetModal()),[]),n=(0,o().O$)(b().A);if(!i)return null;const{oldPassword:l}=n,d=void 0===l?(0,a.jsx)(p().sA,{id:"passwordSettings.passwordUpdatedModal.passwordSetSuccessModal.title",defaultMessage:"Your password has been set"}):(0,a.jsx)(p().sA,{id:"passwordSettings.passwordUpdatedModal.passwordUpdatedModal.title",defaultMessage:"Your password has been saved"}),u=t?(0,a.jsx)(p().sA,{id:"passwordSettings.passwordUpdateSuccessModal.educationPlan.header",defaultMessage:"You'll be able to log in, even if you lose access to your school email address."}):(0,a.jsx)(p().sA,{id:"passwordSettings.passwordUpdateSuccessModal.header",defaultMessage:"We'll ask for this password when you log in to your account."});return(0,a.jsx)(k().A,{title:d,header:u,icon:(0,c().b)(N(s)),onDismiss:E})}function H(e){let{isEducationPlan:t,mfaStatus:s,onReloadSettings:i}=e;const d=(0,p().tz)(),c=(0,r().DP)(),u=(0,n().v3)(),m=(0,o().K8)((()=>b().A.isRemovePasswordModal()),[]),g=(0,o().O$)(b().A);if(!m)return null;const{oldPassword:f,alert:S}=g,y=(0,a.jsx)(p().sA,{id:"passwordSettings.removePasswordModal.title",defaultMessage:"Remove password for temporary login codes?"}),x=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p().sA,{id:"passwordSettings.removePasswordModal.header",defaultMessage:"You'll receive a link and login code via email when you try to login."}),t&&(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)(p().sA,{id:"passwordSettings.removePasswordModal.educationPlanWarning.message",defaultMessage:"If you lose access to your school email, you'll be unable to log back into Notion."})]}),"on"===s&&(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)(p().sA,{id:"passwordSettings.removePasswordModal.removeMfaWarning.message",defaultMessage:"<boldtext>2-step verification will also be removed if you continue.</boldtext>",values:{boldtext:e=>(0,a.jsx)("span",{style:{fontWeight:h().Wy.semibold},children:e})}})]})]}),v={text:(0,a.jsx)(p().sA,{id:"passwordSettings.removePasswordModal.continueButton.label",defaultMessage:"Continue"}),onClick:()=>K(d,i,u),isRed:!0},A=[{text:(0,a.jsx)(p().sA,{id:"passwordSettings.removePasswordModal.keepUsingPasswordButton.label",defaultMessage:"Keep using password"}),onClick:E,type:"button",view:"plain"}];return(0,a.jsxs)(k().A,{title:y,header:x,icon:l(N(c)),onDismiss:E,primaryAction:v,secondaryActions:A,containerStyles:{width:350,padding:24},children:[(0,a.jsx)(_().A,{hasMarginTop:!0,children:(0,a.jsx)(p().sA,{id:"passwordSettings.removePasswordModal.passwordInput.label",defaultMessage:"Enter your current password"})}),(0,a.jsx)(w().A,{type:"password",value:f,onChange:L,showClearButton:!0,onClearButtonClick:U,placeholder:d.formatMessage({id:"passwordSettings.removePasswordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,a.jsx)(M().A,{isMultiline:!0,style:P(S),children:S})]})}function $(){const e=(0,r().DP)();if(!(0,o().K8)((()=>b().A.isRemovePasswordSuccessModal()),[]))return null;const t=(0,a.jsx)(p().sA,{id:"passwordSettings.removePasswordSuccessModal.title",defaultMessage:"Password removed"}),s=(0,a.jsx)(p().sA,{id:"passwordSettings.removePasswordSuccessModal.header",defaultMessage:"To log into your account, we’ll send you a temporary login code to your email."});return(0,a.jsx)(k().A,{title:t,header:s,icon:(0,c().b)(N(e)),onDismiss:E})}async function Y(e,t,s,i){if(!b().A.isSetNewPasswordModal())return;const{oldPassword:n,password:o,repeatPassword:r}=b().A.state;let a;if(t&&!n)a=s.formatMessage({id:"passwordSettings.changePasswordModal.oldPasswordMissingError",defaultMessage:"Please enter your old password."});else if(o){const e=(0,u().ZK)(o);e.success?r?o!==r&&(a=s.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordsMismatchError",defaultMessage:"Your passwords do not match."})):a=s.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordNotRepeatedError",defaultMessage:"Please repeat your new password."}):a=function(e,t){const s=x().K$[e.type];return s?t.formatMessage(s):t.formatMessage({id:"passwordSettings.genericPasswordSaveError",defaultMessage:"Error saving password. Please try again later."})}(e.reason,s)}else a=s.formatMessage({id:"passwordSettings.changePasswordModal.passwordNotEnteredError",defaultMessage:"Please enter a password."});if(a)return void b().A.setState({...b().A.state,alert:a});const l=await S().callApi({eventName:"setPassword",environment:e,data:{oldPassword:n,newPassword:o}});if("success"===l.type)i(),b().A.setState({...b().A.state,isSet:!0});else{const e=(0,x().Hu)(s,l);b().A.setState({...b().A.state,alert:e})}}function Q(e){let{hasPassword:t,intl:s,onReloadSettings:l,isEducationPlan:c,email:u}=e;const m=(0,r().DP)(),g=(0,n().v3)(),h=(0,i.useCallback)((()=>Y(g,t,s,l)),[g,t,s,l]),f=(0,o().K8)((()=>b().A.isSetNewPasswordModal()?b().A.state:null),[]);if(null===f)return null;const{password:S,repeatPassword:y,oldPassword:x,alert:A}=f,j=t?(0,a.jsx)(p().sA,{id:"profileSettings.changePasswordModal.title",defaultMessage:"Change password"}):(0,a.jsx)(p().sA,{id:"profileSettings.setPasswordModal.title",defaultMessage:"Set a password"}),C=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p().sA,{id:"passwordSettings.passwordModal.passwordGuidelines",defaultMessage:"Use a password at least 15 letters long, or at least 8 characters long with both letters and numbers."}),c&&(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)(B,{})]})]}),I=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_().A,{children:(0,a.jsx)(p().sA,{id:"passwordSettings.passwordModal.newPasswordInput.label",defaultMessage:"Enter a new password"})}),(0,a.jsx)(w().A,{type:"password",value:S,onChange:O,showClearButton:!0,onClearButtonClick:F,placeholder:s.formatMessage({id:"passwordSettings.passwordModal.newPasswordInput.placeholder",defaultMessage:"New password"}),focusInitial:!t,onBlur:()=>z(s),autoComplete:"new-password"}),(0,a.jsx)(v().A,{size:10,isHidden:!0}),(0,a.jsx)(_().A,{children:(0,a.jsx)(p().sA,{id:"passwordSettings.changePasswordModal.confirmPasswordInput.label",defaultMessage:"Confirm your new password"})}),(0,a.jsx)(w().A,{type:"password",value:y,onChange:V,showClearButton:!0,onClearButtonClick:q,placeholder:s.formatMessage({id:"passwordSettings.passwordModal.confirmPasswordInput.placeholder",defaultMessage:"Confirm password"}),onBlur:()=>z(s),autoComplete:"new-password"})]}),T=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w().A,{style:{display:"none"},type:"text",value:u,autoComplete:"username",disabled:!0}),(0,a.jsx)(_().A,{children:(0,a.jsx)(p().sA,{id:"passwordSettings.passwordModal.currentPasswordInput.label",defaultMessage:"Enter your current password"})}),(0,a.jsx)(w().A,{type:"password",value:x,onChange:L,showClearButton:!0,onClearButtonClick:U,placeholder:s.formatMessage({id:"passwordSettings.passwordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,a.jsx)(v().A,{size:10,isHidden:!0}),I]}),D={text:t?(0,a.jsx)(p().sA,{id:"passwordSettings.passwordModal.changePasswordButton.label",defaultMessage:"Change password"}):(0,a.jsx)(p().sA,{id:"passwordSettings.passwordModal.setPasswordButton.label",defaultMessage:"Set a password"}),onClick:h},K=[{text:(0,a.jsx)(p().sA,{id:"passwordSettings.passwordModal.removePasswordButton.label",defaultMessage:"Remove password"}),onClick:G,type:"button",view:"plain"}];return(0,a.jsxs)(k().A,{title:j,header:C,icon:(0,d().r)(N(m)),onDismiss:E,primaryAction:D,secondaryActions:R(c,t)?K:void 0,containerStyles:{width:350,padding:24},children:[t?T:I,(0,a.jsx)(M().A,{isMultiline:!0,style:P(A),children:A})]})}function X(e){let{settingsStateMachineRef:t}=e;const s=(0,o().K8)((()=>b().A.isVerifyIdentityWithMfaModal()),[]);return(0,i.useEffect)((()=>{s&&void 0!==t.current&&t.current.settingsConfirmIdentityForPasswordSetting()})),s&&void 0!==t.current?(0,a.jsx)(C().A,{settingsStateMachine:t.current,onDismiss:E,onStartSMS:g().lQ,onStartTOTP:g().lQ,onStartBackupCodes:g().lQ}):null}function Z(e){let{hasPassword:t,intl:s,onReloadSettings:n,isEducationPlan:r,email:l,mfaStatus:d,settingsStateMachineRef:c}=e;const u=(0,o().K8)((()=>b().A.state.open),[]);return(0,a.jsx)(j().A,{open:u,onDismiss:E,className:y().l0W,preventHideChildrenWhileOpening:!0,render:()=>(0,a.jsx)(A().A,{capture:!0,allowEsc:!0,render:()=>(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(Q,{hasPassword:t,intl:s,onReloadSettings:n,isEducationPlan:r,email:l}),(0,a.jsx)(W,{isEducationPlan:r}),(0,a.jsx)(H,{isEducationPlan:r,mfaStatus:d,onReloadSettings:n}),(0,a.jsx)(X,{settingsStateMachineRef:c}),(0,a.jsx)($,{})]})})})}},274184:(e,t,s)=>{s.d(t,{T:()=>a});var i=()=>s(484714),n=()=>s(56366),o=()=>s(351360),r=()=>s(134217);function a(e){const t=(0,i().v3)();return(0,n().K8)((()=>{const s=o().default.state.currentSpaceStore;return s&&e?(0,r().Th)(t,s.id,e):0}),[t,e])}},280161:(e,t,s)=>{s.d(t,{r:()=>Le});s(898992),s(354520),s(581454);var i=s(296540),n=()=>s(56366),o=()=>s(401497),r=()=>s(467730),a=()=>s(959013),l=()=>s(284371),d=()=>s(698449),c=()=>s(37433),u=()=>s(605402),p=()=>s(641300),m=()=>s(125565),g=(s(737550),()=>s(484714)),h=()=>s(972435),f=()=>s(722872),S=()=>s(632709),y=()=>s(463830),x=()=>s(848237),b=()=>s(898808),v=()=>s(452558),A=()=>s(493823),w=()=>s(760217),j=()=>s(406699),M=()=>s(419357),k=()=>s(928600),C=()=>s(89924),I=s(474848);const _=(0,a().YK)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForGroupMenu.filterForTeams.placeholder"}});function T(e){const t=(0,g().v3)(),s=(0,o().IS)((()=>({teamMenuItem:{fontWeight:400}})),[]),[r,l]=(0,i.useState)(""),d=(0,i.useCallback)((e=>x().F2({environment:t,teamId:e,tab:S().p.Members,from:"teams_dropdown_for_group"})),[t]),u=(0,n().K8)((()=>[{key:"teams for group",render:e=>(0,I.jsx)(C().A,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var i;return(0,I.jsx)(w().A,{icon:(0,I.jsx)(b().x,{disabled:!0,store:e}),title:(0,I.jsx)(m().A,{style:s.teamMenuItem,children:e.getName()}),right:(0,I.jsx)(a().sA,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsInGroupMenu.filterForTeams.numMembers",values:{numMembers:(null===(i=(0,c().PF)(e))||void 0===i?void 0:i.memberCountWithGuests)??0}}),...t})},action:()=>{d(e.id)},closeParentMenu:!0};return t}))}]),[s,e.teamStores,d]),p=r,y=(0,I.jsx)(v().A,{filter:p,context:{blocks:[],environment:t,publicEditMode:void 0},sections:u,initialFocus:0}),A=(0,I.jsx)(C().A,{isInput:!0,children:(0,I.jsx)(M().Ay,{value:p,onChange:(0,i.useCallback)((e=>{l(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:h().A.formatMessage(_.filterTeams)})}),j={menuType:f().gu.Popup,width:280,maxHeight:"50vh",header:e.teamStores.length>5?A:void 0};return(0,I.jsx)(k().A,{...j,children:y})}const P=function(e){const t=(0,n().uB)(void 0,y().A),r=(0,o().IS)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),l=(0,n().K8)((()=>s(988499).A.state.teams.filter((t=>t.getRawMembership().some((t=>"group"===t.entity_type&&t.group_id===e.group.group_id))))),[e.group]);return(0,I.jsx)(j().Ay,{popupType:j().z7.Popup,renderOrigin:e=>(0,I.jsxs)(A().p,{disabled:0===l.length,style:0===l.length?r.noTeams:r.button,...e,children:[0===l.length?(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCountNone",defaultMessage:"None"}):(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCount",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:l.length}}),l.length>0&&(0,s(668725).b)(r.chevron)]}),buttonPopupStore:t,placementToOrigin:s(700250).UV.Bottom,render:e=>(0,I.jsx)(T,{parent:e,teamStores:l}),onClose:(0,i.useCallback)((()=>{t.reset()}),[t])})};var B=()=>s(30626),R=()=>s(496603),D=()=>s(701763),N=()=>s(901389),L=()=>s(426116),U=()=>s(317909),O=()=>s(510473),E=()=>s(456663),F=()=>s(575143),V=()=>s(285790),q=()=>s(939740),G=()=>s(14235);function z(e){const{group:t,spaceStore:s,settingsStore:i}=e,o=(0,n().uB)(void 0,y().A);return(0,I.jsx)(j().Ay,{popupType:G().nl.Popup,render:()=>(0,I.jsx)(K,{group:t,spaceStore:s,popupStore:o,settingsStore:i}),buttonPopupStore:o,renderOrigin:e=>(0,I.jsx)(V().A,{icon:B()._,...e})})}function K(e){const{group:t,spaceStore:s,popupStore:r,settingsStore:l}=e,d=(0,n().K8)((()=>s.canAdmin()),[s]),u=(0,g().v3)(),p=(0,n().K8)((()=>(0,c().sx)({environment:u,spaceStore:s})),[s,u]),m=(0,o().IS)((e=>({deleteButton:{color:e.redBadgeBackground}})),[]),h=(0,i.useCallback)((async()=>{r.setState({open:!1});const{accept:e}=await N().Gh({message:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationMessage",defaultMessage:"Are you sure you want to delete this group?"}),description:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationDescription",defaultMessage:"Any pages that are private to this group will be transferred to you."}),acceptLabel:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationButton.label",defaultMessage:"Yes"})});if(e){const e=(0,O().E)({spaceStore:s,groupId:t.group_id});await U().createAndCommitAsync({environment:u,userAction:"SpacePermissionGroup.handleDelete",waitForServerCommit:!1,perform:async t=>{await L().c$({environment:u,groupStore:e,transaction:t})}}),D().$N(u)}}),[t,u,s,r]),S=(0,i.useCallback)((()=>{l.setState({...l.state,editingNameGroupId:t.group_id,groupNameInputValue:t.name||""}),r.setState({open:!1}),D().yg(u)}),[t,u,r,l]),y=(0,i.useCallback)((()=>{E().A.setState({...E().A.state,name:t.name||"",defaultInviteTargets:[{type:"group",value:t}]}),x().vn("group_settings")}),[t]),b={key:"action_menu",render:e=>(0,I.jsx)(C().A,{...e}),items:R().oE([{key:"rename",render:e=>(0,I.jsx)(F().A,{...e,title:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.renameItem",defaultMessage:"Rename"})}),action:S},p?{key:"create_team_from_group",render:e=>(0,I.jsx)(F().A,{...e,title:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.createTeamFromGroup",defaultMessage:"Create teamspace from group"})}),action:y}:void 0,d&&{key:"delete",render:e=>(0,I.jsx)(F().A,{...e,title:(0,I.jsx)("div",{style:m.deleteButton,children:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.deleteItem",defaultMessage:"Delete"})})}),action:h}])};return(0,I.jsx)(k().A,{menuType:f().gu.Popup,children:(0,I.jsx)(q().Ay,{type:q().Oh.Vertical,initialFocus:0,sections:[b],onAccept:()=>{r.setState({open:!1})}})})}var W=()=>s(187174),H=()=>s(68263),$=()=>s(798880),Y=()=>s(100622),Q=()=>s(449506);var X=()=>s(646736),Z=()=>s(351360),J=()=>s(630116);class ee extends(()=>s(757695))().default{getInitialState(){return{userInputValue:"",temporaryUserIds:[],limitUsers:!0}}}const te=ee;var se=()=>s(34293),ie=()=>s(994006),ne=()=>s(764880),oe=()=>s(842599),re=()=>s(689094),ae=()=>s(106628),le=()=>s(134217),de=()=>s(749240),ce=()=>s(251126),ue=()=>s(64e3),pe=()=>s(204063),me=()=>s(448693),ge=()=>s(856952),he=()=>s(457688);function fe(e){const{group:t,spaceStore:s,groupStore:i,userIds:r,onAddUsers:l}=e,d=(0,n().uB)(void 0,y().A),c=(0,o().IS)((()=>({popup:{width:400},button:{marginTop:4}})),[]);return(0,I.jsx)(j().Ay,{popupType:G().nl.Popup,render:()=>(0,I.jsx)(Se,{spaceStore:s,group:t,userIds:r,popupStore:d,groupStore:i,onAddUsers:l}),buttonPopupStore:d,onClose:()=>i.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),style:c.popup,renderOrigin:e=>(0,I.jsx)("div",{children:(0,I.jsx)(A().p,{isGray:!0,icon:re().W,style:c.button,...e,children:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.groupList.addMemberButton.label",defaultMessage:"Add members"})})})})}function Se(e){const t=(0,g().v3)(),s=(0,a().tz)(),{group:o,userIds:r,spaceStore:l,popupStore:d,groupStore:c,onAddUsers:p}=e,m=(0,n().K8)((()=>c.state.temporaryUserIds.map((e=>{const t=l.getRecordValue({table:$().oo,id:e});return(0,I.jsx)(me().t_,{userValue:t,format:me().t_.Format.Medium,showRemoveButton:!0,onClickRemove:()=>{const t=c.state.temporaryUserIds.filter((t=>t!==e));c.setState({...c.state,temporaryUserIds:t})},shouldShrink:!0,isSingle:!1},e)}))),[l,c]),h=(0,n().K8)((()=>()=>{const{temporaryUserIds:e}=c.state;U().createAndCommit({userAction:"SpacePermissionGroup.handleAddDoneClick",environment:t,canUndo:!0,perform:t=>{for(const s of e){const e=(0,O().A)({spaceStore:l,groupId:o.group_id,userId:s});L().cJ({groupMemberStore:e,spaceId:l.id,groupId:o.group_id,userId:s,transaction:t})}p(e),u().A.setState({...u().A.state,permissionGroupsAndMemberCounts:u().A.state.permissionGroupsAndMemberCounts.map((t=>t.group.group_id===o.group_id?{group:o,memberCount:t.memberCount+e.length}:t))})}}),c.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),d.setState({open:!1}),D().s$(t,{add_member_count:e.length})}),[c,t,d,l,o,p]),S=(0,i.useCallback)((()=>{const{temporaryUserIds:e}=c.state,t=e.slice(0,e.length-1);c.setState({...c.state,temporaryUserIds:t})}),[c]),y=(0,i.useCallback)((e=>{const t=e.target.value,{extractedEmails:s,newInputValue:i}=(0,oe().Ct)(t),{currentSpaceStore:n}=Z().default.state,o=de().subscriptionDataStoreInstance.state;if(!o||!n)return;const r=(0,le().Be)(o).map((e=>e.userId)),a=R().oE(r.map((e=>J().LU.createChildStore(n,{table:$().oo,id:e}).getValue()))).filter((e=>s.includes(e.email)&&!c.state.temporaryUserIds.includes(e.id)));c.setState({...c.state,temporaryUserIds:[...c.state.temporaryUserIds,...a.map((e=>e.id))],userInputValue:i})}),[c]),x=(0,n().K8)((()=>c.state.userInputValue),[c]),b=(0,n().K8)((()=>c.state.temporaryUserIds),[c]);return(0,I.jsx)(k().A,{menuType:f().gu.Popup,tokenInputHeader:!0,header:(0,I.jsx)(ge().Ay,{focus:!0,disabled:!1,focusAfterAnimation:!0,format:ge().le.Group,tokens:m,placeholder:s.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.userSearchInput.placeholder",defaultMessage:"Search for a person…"}),onRemoveLastToken:S,value:x,onChange:y,inputAndTokenWrapRightStyle:{paddingTop:t.device.isMobile?0:6,paddingBottom:t.device.isMobile?0:6},right:(0,I.jsx)(pe().A,{size:"lg",onClick:h,children:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.addUserButton.label",defaultMessage:"Add"})})}),children:(0,I.jsx)(ce().A,{request:{query:x,temporaryUserIds:b},performRequest:async e=>{let{query:s,temporaryUserIds:i}=e;const n=await ae().T.searchActions.load();return(await n.searchVisibleSpaceUsers({environment:t,query:s,membersOnly:!0})).filter((e=>r.indexOf(e.id)<0&&i.indexOf(e.id)<0)).slice(0,20)},render:(e,t)=>(0,I.jsx)(ye,{results:t,spaceStore:l,groupStore:c})})})}function ye(e){const{spaceStore:t,groupStore:s}=e,[i,o]=(0,n().$y)(s,te),r=(e.results||[]).map((e=>{let{id:t}=e;return t})),l=(0,n().K8)((()=>r.map((e=>{const s=J().LU.createChildStore(t,{table:$().oo,id:e}).getValue(),n={key:e,render:e=>(0,I.jsx)(he().A,{...e,actor:(0,ne().MR)(s),useEmailAsTooltip:!0}),action:()=>{const t=[...i.temporaryUserIds,e];o({...i,temporaryUserIds:t,userInputValue:""})}};return n}))),[t,o,i,r]);if(0===r.length)return(0,I.jsx)(C().A,{children:(0,I.jsx)(ue().A,{title:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.noResultsMessage",defaultMessage:"No results"})})});{const e={key:"user_menu",render:e=>(0,I.jsx)(C().A,{...e}),items:l};return(0,I.jsx)(q().Ay,{type:q().Oh.Vertical,initialFocus:0,sections:[e]})}}const xe=10;function be(e){const{group:t,canEdit:s,spaceStore:o,settingsStore:r}=e,l=(0,a().tz)(),c=(0,g().v3)(),u=(0,n().K8)((()=>Z().default.state.currentSpaceStore),[]),p=(0,n().uB)(void 0,te),m=(0,n().K8)((()=>p.state.limitUsers&&!r.state.groupsFilter?xe:void 0),[p,r]),[{value:h}]=(0,W().Yb)((async()=>{const e=await Q().callApi({eventName:"getSpacePermissionGroupMembers",environment:c,data:{groupIds:[t.group_id],spaceId:o.id}});if("success"===e.type){var s;const i=(null===(s=e.data.groupUsersMap[t.group_id])||void 0===s?void 0:s.userIds).map((e=>J().LU.createChildStore(o,{table:$().oo,id:e})));return{allUserStores:(0,d().cp)({userStores:i,spaceStore:u,intl:l})}}}),[u,c,t,l,o]),[f,S]=(0,i.useState)([]);(0,i.useEffect)((()=>{null!=h&&h.allUserStores&&S(h.allUserStores)}),[null==h?void 0:h.allUserStores]);const[y,x]=(0,i.useState)([]);return(0,i.useEffect)((()=>{x(m?f.slice(0,m):f)}),[f,m]),(0,I.jsxs)("div",{style:{padding:"4px 42px 8px"},children:[y.map((t=>(0,I.jsx)(ve,{userStore:t,...e,onRemoveUser:e=>{S(f.filter((t=>t.id!==e))),x(y.filter((t=>t.id!==e)))}},t.id))),m&&f.length>m&&(0,I.jsx)(A().p,{isGray:!0,style:{marginTop:4},onClick:()=>{p.setState({...p.state,limitUsers:!1})},children:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.showMoreUsersButton.label",defaultMessage:"{numberOfHiddenUsers, plural, one {Show {numberOfHiddenUsers} more} other {Show {numberOfHiddenUsers} more}}",values:{numberOfHiddenUsers:f.length-y.length}})}),s&&u?(0,I.jsx)(fe,{group:t,spaceStore:o,groupStore:p,userIds:f.map((e=>e.id))||[],onAddUsers:e=>{const t=e.map((e=>J().LU.createChildStore(o,{table:$().oo,id:e})));S([...f,...t])}}):y.length<1&&(0,I.jsx)(A().p,{disabled:!0,isGray:!0,children:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.groupList.noMembersInside",defaultMessage:"No members inside"})})]})}function ve(e){const{spaceStore:t,userStore:s,group:i,canEdit:o,onRemoveUser:r}=e,l=(0,g().v3)(),d=(0,n().K8)((()=>(0,X().dp)(t,s.id).getMembershipTypeAsRoleOrNone()),[t,s]);return(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,I.jsxs)("div",{style:{display:"flex"},children:[(0,I.jsx)(ie().A,{userStore:s,style:{fontSize:14,fontWeight:400,lineHeight:"17px",paddingRight:6,minHeight:34,width:"100%"},avatarSize:22}),(0,H().EH)(d)&&(0,I.jsx)(se().A,{role:"membership_admin"===d?"membership_admin":"admin"})]}),o&&(0,I.jsx)(A().p,{isGray:!0,hoveredStyle:{color:Y().Ay.red},onClick:async()=>{const{accept:e}=await N().Gh({message:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationMessage",defaultMessage:"Are you sure you want to remove this member?"}),acceptLabel:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationButton.label",defaultMessage:"Yes"})});e&&(U().createAndCommit({userAction:"SpacePermissionGroup.removeUser",environment:l,canUndo:!0,perform:e=>{!function(e){const{groupMemberStore:t,transaction:s}=e;U().applyOperation({store:t,operation:{command:"update",pointer:t.pointer,path:[],args:{removed_at:Date.now()}},transaction:s})}({transaction:e,groupMemberStore:(0,O().A)({spaceStore:t,groupId:i.group_id,userId:s.id})}),r(s.id),u().A.setState({...u().A.state,permissionGroupsAndMemberCounts:u().A.state.permissionGroupsAndMemberCounts.map((e=>e.group.group_id===i.group_id?{group:i,memberCount:e.memberCount>=1?e.memberCount-1:0}:e))})}}),D().G8(l))},children:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupButton.label",defaultMessage:"Remove"})})]},s.id)}var Ae=()=>s(662303),we=()=>s(464699),je=()=>s(138389),Me=()=>s(945778),ke=()=>s(268845),Ce=()=>s(437607),Ie=()=>s(403409),_e=()=>s(173783),Te=()=>s(623580),Pe=()=>s(545805),Be=()=>s(614505),Re=()=>s(859428),De=()=>s(702796);function Ne(e){const{row:t,canEdit:s,open:r,toggleOpenState:c,spaceStore:p,settingsStore:h}=e,f=t.group,S=(0,a().tz)(),y=(0,o().DP)(),x=(0,g().v3)(),b=d().Pf({intl:S,groupName:f.name}),v=(0,o().IS)((e=>({container:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%"},toggle:{flexShrink:0,marginRight:2},chevron:{width:12,height:12,transition:"transform 200ms ease-out",transform:`rotateZ(${r?0:-90}deg)`,fill:"inherit",opacity:.5,marginRight:4},name:{fontFamily:l().vc(Ae().locale).sans,fontSize:14,lineHeight:"17px",marginRight:4},input:{fontWeight:l().Wy.medium,padding:"4px 6px",background:e.contentBackgroundTransparent},icon:{marginRight:9}})),[r]),A=(0,i.useCallback)((e=>{const t=Date.now();U().createAndCommit({userAction:"SpacePermissionGroup.handleIconChange",environment:x,canUndo:!0,perform:s=>{L().O1({spacePermissionGroupStore:(0,O().E)({spaceStore:p,groupId:f.group_id}),transaction:s,value:{icon:e,last_edited_at:t}})}});const s={id:(0,Ce().T1)({spacePermissionGroupId:f.group_id,spaceId:p.id}),icon:e,name:f.name,group_id:f.group_id,space_id:f.space_id,version:f.getVersion(),created_by_id:f.created_by_id,created_by_table:f.created_by_table,created_at:f.created_at,last_edited_by_id:f.last_edited_by_id,last_edited_at:t,last_edited_by_table:f.last_edited_by_table};u().A.setState({...u().A.state,permissionGroupsAndMemberCounts:u().A.state.permissionGroupsAndMemberCounts.map((e=>e.group.group_id===f.group_id?{group:ke().B.fromValue(Ce().n,s),memberCount:e.memberCount}:e))}),D().Nn(x,{is_emoji:(0,Me().A)(e)})}),[f,p,x]),w=(0,i.useCallback)((()=>{h.setState({...h.state,editingNameGroupId:void 0,groupNameInputValue:""})}),[h]),j=(0,i.useCallback)((e=>{h.setState({...h.state,groupNameInputValue:e.target.value})}),[h]),M=(0,i.useCallback)((()=>{const{editingNameGroupId:e,groupNameInputValue:t}=h.state,s=t.trim(),i=Date.now();if(e===f.group_id){if(s!==f.name){const e=(0,O().E)({spaceStore:p,groupId:f.group_id});U().createAndCommit({userAction:"SpacePermissionGroup.handleNameAccept",environment:x,canUndo:!0,perform:t=>{L().O1({spacePermissionGroupStore:e,value:{name:s,last_edited_at:i},transaction:t})}})}const e={id:(0,Ce().T1)({spacePermissionGroupId:f.group_id,spaceId:p.id}),icon:f.icon,name:s,group_id:f.group_id,space_id:f.space_id,version:f.getVersion(),created_by_id:f.created_by_id,created_by_table:f.created_by_table,created_at:f.created_at,last_edited_by_id:f.last_edited_by_id,last_edited_at:i,last_edited_by_table:f.last_edited_by_table};u().A.setState({...u().A.state,permissionGroupsAndMemberCounts:u().A.state.permissionGroupsAndMemberCounts.map((t=>t.group.group_id===f.group_id?{group:ke().B.fromValue(Ce().n,e),memberCount:t.memberCount}:t))}),h.setState({...h.state,editingNameGroupId:void 0,groupNameInputValue:""})}}),[f,x,p,h]),k=(0,n().K8)((()=>h.state.editingNameGroupId===f.group_id),[f,h]),C=(0,n().K8)((()=>h.state.groupNameInputValue),[h]);function _(e){const t={width:e-4,height:e-4,fill:y.mediumIconColor},s={width:12,height:12,fill:y.mediumIconColor};return(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,je().X)(t),(0,we().b)(s)]})}return(0,I.jsxs)("div",{style:v.container,children:[(0,I.jsx)(De().A,{isSidebar:!1,fill:!0,icon:"chevron",open:r,color:y.mediumIconColor,onClick:()=>c(f.group_id),style:v.toggle}),(0,I.jsx)(_e().A,{size:28,style:v.icon}),k?(0,I.jsx)(Pe().A,{debugName:"GroupNameToggle",capture:!0,onEsc:w,children:(0,I.jsx)(Te().A,{disabled:!s,type:Ie().e.Inline,style:v.input,placeholder:S.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.groupNameInput.placeholder",defaultMessage:"Untitled"}),focus:!0,value:C,onChange:j,onBlur:M,onSubmit:M})}):(0,I.jsx)(m().A,{style:v.name,showTooltipWhenTruncated:!0,children:b}),(T=t.isRowHovered,f.icon?s?(0,I.jsx)(Be().A,{disabled:!1,bucket:"public",icon:f.icon?{pointer:p.pointer,icon:f.icon}:void 0,size:18,isEmptyPage:!1,title:b,onChange:A,style:v.icon}):(0,I.jsx)(Be().A,{disabled:!0,bucket:"public",icon:f.icon?{pointer:p.pointer,icon:f.icon}:void 0,size:18,isEmptyPage:!1,title:b,style:v.icon}):T&&s?(0,I.jsx)(Re().A,{renderTooltip:()=>(0,I.jsx)(a().sA,{defaultMessage:"Add icon",id:"spacePermissionsSettings.groupsTab.userGroup.groupIcon.tooltip"}),render:e=>(0,I.jsx)(Be().A,{disabled:!1,bucket:"public",icon:f.icon?{pointer:p.pointer,icon:f.icon}:void 0,size:18,isEmptyPage:!1,title:b,onChange:A,style:{...v.icon,width:30},defaultIcon:_(18),...e})}):void 0)]});var T}function Le(e){let{canEdit:t,spaceStore:s,permissionsSettingsStore:d,containerMarginTop:g}=e;const[h,f]=(0,i.useState)([]),S=(0,o().DP)(),y=(0,n().K8)((()=>u().A.state.permissionGroupsAndMemberCounts.map((e=>e.group))),[]),x=(0,n().K8)((()=>0!==(0,c().zI)()),[]),b=(0,n().K8)((()=>(0,r().Ay)(d.state.groupsFilter,y,(e=>e.name||""))),[d,y]),v=(0,i.useCallback)((e=>{f((t=>t.includes(e)?t.filter((t=>t!==e)):t.concat(e)))}),[f]),A=(0,i.useMemo)((()=>function(e){return e.map((e=>({id:e.group_id,group:e,isClickable:!1})))}(b)),[b]),w=(0,i.useMemo)((()=>function(e){let{openRowIds:t,toggleOpenRowId:s,canEdit:i,showTeamsColumn:n,spaceStore:o,settingsStore:r}=e;const d={id:"title",headerTitle:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.groups",defaultMessage:"Group"}),renderCell:e=>(0,I.jsx)(Ne,{row:e,open:t.includes(e.id),toggleOpenState:s,canEdit:i,spaceStore:o,settingsStore:r}),widthData:{width:120},hasClickableContents:!1,sortable:!1},c={id:"teams",headerTitle:(0,I.jsx)("div",{style:{paddingLeft:8},children:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.teams",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,I.jsx)("div",{style:l().RC,children:(0,I.jsx)(P,{group:e.group})}),widthData:{width:40},hasClickableContents:!1,sortable:!1},u={id:"members",headerTitle:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.member",defaultMessage:"Members"}),renderCell:e=>(0,I.jsx)(Ue,{row:e}),widthData:{width:40},hasClickableContents:!1,sortable:!1},p={id:"menu",headerTitle:null,renderCell:e=>(0,I.jsx)(z,{group:e.group,spaceStore:o,settingsStore:r}),widthData:{width:20},hasClickableContents:!0,sortable:!1};return[d,...n?[c]:[],u,...i?[p]:[]]}({openRowIds:h,toggleOpenRowId:v,canEdit:t,showTeamsColumn:x,spaceStore:s,settingsStore:d})),[h,v,t,x,s,d]),j=(0,p().rC)({columnRenderInfo:w,theme:S,containerMarginTop:g}),M=(0,o().IS)((e=>({noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",gap:4,borderBottom:`1px solid ${e.stroke.primary}`}})),[]);return(0,I.jsx)(p().WE,{showRowBorders:!0,hideHeaderRowPadding:!0,columnRenderInfo:w,rows:A,styles:j,renderNoRowsComponent:()=>(0,I.jsx)(m().A,{isSmall:!0,style:M.noRowContainer,children:y.length>0?(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroupsFound",defaultMessage:"No groups found"}):(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroups",defaultMessage:"No groups"})}),renderRowChild:e=>h.includes(e.id)?(0,I.jsx)(be,{group:e.group,canEdit:t,spaceStore:s,settingsStore:d}):void 0})}function Ue(e){const{row:t}=e,s=(0,n().K8)((()=>(0,d().xQ)({groupId:t.group.group_id})),[t.group]);return(0,I.jsx)("div",{style:l().RC,children:(0,I.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:s}})})}},287978:(e,t,s)=>{s.d(t,{A:()=>Vs});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(354520),s(672577),s(581454);var i=s(296540),n=()=>s(484714),o=()=>s(56366),r=()=>s(401497),a=()=>s(757695),l=()=>s(467730),d=()=>s(187174),c=()=>s(126158),u=()=>s(30626),p=()=>s(560838),m=()=>s(381138),g=()=>s(793565),h=()=>s(206267),f=()=>s(792071),S=()=>s(386164),y=()=>s(68263),x=()=>s(96689),b=()=>s(798880),v=()=>s(322769),A=()=>s(959013),w=()=>s(100622),j=()=>s(496603),M=()=>s(534177),k=()=>s(284371),C=()=>s(701763),I=()=>s(278768),_=()=>s(966505),T=()=>s(492666),P=()=>s(449506),B=()=>s(884107),R=()=>s(901389),D=()=>s(496414),N=()=>s(579627),L=()=>s(426116),U=()=>s(205224),O=()=>s(317909),E=()=>s(704152),F=()=>s(493823),V=()=>s(760217),q=()=>s(406699),G=()=>s(802790),z=()=>s(285790),K=()=>s(623580),W=()=>s(331542),H=()=>s(928600),$=()=>s(939740),Y=()=>s(864943),Q=()=>s(204063),X=()=>s(89924),Z=()=>s(946548),J=()=>s(125565),ee=()=>s(234194),te=()=>s(698449),se=()=>s(605402),ie=()=>s(265665),ne=()=>s(614505),oe=()=>s(75491),re=s(474848);function ae(e){let{spaceStore:t,groupIds:s,onGroupClick:i}=e;const n=(0,A().tz)(),a=(0,r().IS)((e=>({title:{marginRight:8,color:0===s.length?e.lightTextColor:void 0},defaultGroupIconPill:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"},untitled:{color:e.lightTextColor}})),[s]),l=(0,o().K8)((()=>s.map((e=>({key:e,render:s=>{const i=se().A.state.permissionGroupsAndMemberCounts.find((t=>t.group.group_id===e));if(!i)return null;const o=te().Pf({intl:n,groupName:i.group.name});return(0,re.jsx)(V().A,{icon:(0,re.jsx)(ne().A,{disabled:!0,icon:i.group.icon&&t?{pointer:t.pointer,icon:i.group.icon}:void 0,size:18,isEmptyPage:!1,title:o,defaultIcon:(0,ee().M)(a.defaultGroupIconPill)}),title:(0,re.jsx)(J().A,{style:i.group.name?void 0:a.untitled,children:(0,re.jsx)(ie().j,{style:{maxWidth:200},children:o})}),caption:(0,re.jsx)(A().sA,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"groupsDropdownForMember.numMembers",values:{numMembers:i.memberCount}}),inline:!0,...s})},action:i})))),[s,n,i,t,a.defaultGroupIconPill,a.untitled]);return(0,re.jsx)(oe().ED,{title:(0,re.jsx)(J().A,{style:a.title,children:s&&0!==s.length?(0,re.jsx)(A().sA,{id:"groupsDropdownForMember.groupsCount.label",defaultMessage:"{numberOfGroups, plural, one {{numberOfGroups} group} other {{numberOfGroups} groups}}",values:{numberOfGroups:s.length}}):(0,re.jsx)(A().sA,{id:"groupsDropdownForMember.groupsCountNone.label",defaultMessage:"None"})}),items:l,disabled:!s||0===s.length})}var le=()=>s(584262),de=()=>s(668725),ce=()=>s(179034),ue=()=>s(435009),pe=()=>s(492414),me=()=>s(722872),ge=()=>s(397103),he=()=>s(463830),fe=()=>s(630116),Se=()=>s(134217),ye=()=>s(749240),xe=()=>s(678553),be=()=>s(64e3),ve=()=>s(305390),Ae=()=>s(859428);const we=function(e){let{store:t,guestStore:s,isSubscribed:a,guest:l,hideActionButtons:d}=e;const c=(0,r().DP)(),u=(0,n().v3)(),p=(0,o().uB)(void 0,he().A),m=(0,i.useCallback)((()=>(0,re.jsx)(je,{store:t,guestStore:s,isSubscribed:a,guest:l,hideActionButtons:d,buttonPopupStore:p})),[t,s,a,l,d,p]),{device:g}=u;return(0,o().K8)((()=>{l.guestPageIds.map((e=>{fe().Bv.createChildStore(t,{table:ce().ev,id:e}).load()}))}),[t,l]),0===l.guestPageIds.length?(0,re.jsx)(F().p,{disabled:!0,children:(0,re.jsx)(A().sA,{id:"guestPagesPopup.permissionsForUserGuest.label",defaultMessage:"Guest"})}):(0,re.jsx)(q().Ay,{popupType:g.isMobile?q().z7.SlideUp:q().z7.Popup,renderOrigin:e=>(0,re.jsxs)(F().p,{...e,children:[(0,re.jsx)(A().sA,{id:"guestPagesPopup.page",defaultMessage:"{numberOfAccessiblePages, plural, one {{numberOfAccessiblePages} page} other {{numberOfAccessiblePages} pages}}",values:{numberOfAccessiblePages:l.guestPageIds.length}}),(0,de().b)({width:10,marginLeft:4,fill:c.lightIconColor})]}),buttonPopupStore:p,render:m})};function je(e){let{store:t,guestStore:s,isSubscribed:r,guest:a,hideActionButtons:l,buttonPopupStore:d}=e;const c=(0,n().v3)(),u=(0,i.useCallback)((()=>function(e,t,s,i){R().ui({showCancel:!0,keepFocus:!1,message:(0,re.jsx)(A().sA,{id:"guestPagesPopup.removeGuestModal.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to all shared pages."}),items:[{label:(0,re.jsx)(A().sA,{id:"guestPagesPopup.removeGuestModal.removeButton.label",defaultMessage:"Remove"}),color:"red",onAccept:async()=>{i.setState({...i.state,open:!1}),await U().D({environment:e,guestUserStore:s,store:t})}}]})}(c,t,s,d)),[c,t,s,d]),p=(0,i.useCallback)((()=>async function(e,t,s,i,n){const o=i?"read_and_write":"editor";n.setState({...n.state,open:!1}),await U().P({environment:e,guestUserStore:s,role:o,store:t,isConvertToAdmin:!i,origin:"guest_pages_popup"})}(c,t,s,r,d)),[c,t,s,r,d]),{device:m}=c,g=(0,o().K8)((()=>t.canEditMembership()),[t]),h=a.guestPageIds.map((e=>{const s=fe().Bv.createChildStore(t,{table:ce().ev,id:e}),i={key:e,render:e=>(0,re.jsx)(ve().A,{...e,store:s,placeholder:(0,re.jsx)(A().sA,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const s=fe().Bv.createChildStore(t,{table:ce().ev,id:e}),i=(0,pe().Ay)({store:s,fullyQualified:!1,pageVisitSource:le().y8.LinkInPage});ue().oo({environment:c,url:i,openInNew:"tab"})}};return i}));let f;f=m.isMobile?{menuType:me().gu.ActionSheet}:{menuType:me().gu.Popup,width:300};const S=(0,ge().h)(),y=(0,o().K8)((()=>function(){const e=ye().subscriptionDataStoreInstance.state;return Boolean(e&&(0,Se().Fq)(e))}()),[]);let x;S&&(x=(0,re.jsx)(Ae().A,{renderTooltip:()=>y?(0,re.jsx)(A().sA,{id:"guestPagesPopup.addMemberPermissionButton.tooltip",defaultMessage:"This guest will become a member of this workspace."}):(0,re.jsx)(A().sA,{id:"guestPagesPopup.addAdminPermissionButton.tooltip",defaultMessage:"This guest will become an admin of this workspace."}),render:e=>(0,re.jsx)(Y().A,{size:"lg",onClick:p,...e,children:y?(0,re.jsx)(A().sA,{id:"guestPagesPopup.addMemberPermissionButton.label",defaultMessage:"Convert to member"}):(0,re.jsx)(A().sA,{id:"guestPagesPopup.addAdminPermissionButton.label",defaultMessage:"Convert to admin"})})}));const b=!l&&g;return(0,re.jsxs)(H().A,{...f,children:[b&&(0,re.jsx)(xe().A,{title:(0,re.jsxs)("div",{style:{paddingTop:12,paddingBottom:8,display:"flex",alignItems:"flex-start"},children:[x,(0,re.jsx)(Ae().A,{renderTooltip:()=>(0,re.jsx)(A().sA,{id:"guestPagesPopup.removeGuestButton.tooltip",defaultMessage:"This guest will be removed from all pages in this Workspace."}),render:e=>(0,re.jsx)(Y().A,{size:"lg",color:"uiRed",style:{marginLeft:x?8:0},onClick:u,...e,children:(0,re.jsx)(A().sA,{id:"guestPagesPopup.removeGuestButton.label",defaultMessage:"Remove"})})})]})}),b&&(0,re.jsx)(be().A,{title:1===h.length?(0,re.jsx)(A().sA,{id:"guestPagesPopup.guestHasAccessToSinglePageCaption",defaultMessage:"This guest can access this page:"}):(0,re.jsx)(A().sA,{id:"guestPagesPopup.guestHasAccessToMultiplePagesCaption",defaultMessage:"This guest can access these pages:"})}),(0,re.jsx)($().Ay,{type:$().Oh.Vertical,initialFocus:0,sections:[{key:"pages",render:e=>(0,re.jsx)(X().A,{...e}),items:h}]})]})}var Me=()=>s(690197),ke=()=>s(719147),Ce=()=>s(912913),Ie=()=>s(843878),_e=()=>s(8178),Te=()=>s(792223),Pe=()=>s(709438),Be=()=>s(317182),Re=()=>s(972435),De=()=>s(37433),Ne=()=>s(632709),Le=()=>s(351360),Ue=()=>s(848237),Oe=()=>s(898808),Ee=()=>s(452558),Fe=()=>s(419357);const Ve=(0,A().YK)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function qe(e){const{teamGuest:t}=e,s=(0,n().v3)(),i=(0,o().K8)((()=>Le().default.state.currentSpaceStore),[]);if(!i)return null;if(0===t.guestPageIds.length)return null;const r=[{key:"pages",render:e=>(0,re.jsx)(X().A,{...e}),items:t.guestPageIds.map((e=>{const t=fe().Bv.createChildStore(i,{table:ce().ev,id:e}),n={key:e,render:e=>(0,re.jsx)(ve().A,{...e,store:t,placeholder:(0,re.jsx)(A().sA,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const t=fe().Bv.createChildStore(i,{table:ce().ev,id:e}),n=(0,pe().Ay)({store:t,fullyQualified:!1,pageVisitSource:le().y8.LinkInPage});ue().oo({environment:s,url:n,openInNew:"tab"})}};return n}))}],a={menuType:me().gu.Popup,minWidth:300,maxWidth:350,maxHeight:300,header:t.guestPageIds.length>0&&(0,re.jsx)(J().A,{isSmall:!0,style:{color:w().Ay.regularTextColor,marginLeft:15,marginRight:15,paddingTop:6},children:(0,re.jsx)(A().sA,{id:"guestpagesforteamguest.header",defaultMessage:"Pages"})})};return(0,re.jsx)(H().A,{...a,children:(0,re.jsx)($().Ay,{type:$().Oh.Vertical,initialFocus:void 0,sections:r})})}function Ge(e){const t=(0,n().v3)(),[s,a]=(0,i.useState)(""),l=(0,i.useCallback)((e=>Ue().F2({environment:t,teamId:e,tab:Ne().p.Members,from:"teams_dropdown_for_team_guest"})),[t]),d=(0,r().IS)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),c=(0,o().K8)((()=>[{key:"teams for team guest",render:e=>(0,re.jsx)(X().A,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var s;return(0,re.jsx)(V().A,{icon:(0,re.jsx)(Oe().x,{disabled:!0,store:e}),title:(0,re.jsx)(J().A,{style:d.teamMenuItem,children:e.getName()}),caption:(0,re.jsx)(A().sA,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:(null===(s=(0,De().PF)(e))||void 0===s?void 0:s.memberCountWithGuests)??0}}),inline:!0,...t})},action:()=>{l(e.id)},closeParentMenu:!1};return t}))}]),[e.teamStores,d.teamMenuItem,l]),u=(0,re.jsx)(X().A,{isInput:!0,children:(0,re.jsx)(Fe().Ay,{value:s,onChange:(0,i.useCallback)((e=>{a(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:Re().A.formatMessage(Ve.filterTeams)})}),p={menuType:me().gu.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?u:void 0};return(0,re.jsx)(H().A,{...p,children:(0,re.jsx)(Ee().A,{filter:s,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:0,sections:c})})}const ze=function(e){const{teamGuest:t}=e,i=(0,o().K8)((()=>s(988499).A.state.teams),[]),n=(0,o().K8)((()=>i.filter((e=>e.isMemberOrGuest(t.userId,new Set)))),[i,t]),a=(0,r().IS)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),l=n.length??0;return(0,re.jsx)(q().Ay,{popupType:q().z7.Popup,renderOrigin:e=>(0,re.jsx)(F().p,{disabled:0===l,style:0===l?a.noTeams:a.button,...e,children:0===l?(0,re.jsx)(A().sA,{id:"teamsDropdownForTeamGuest.teamsCountNone.label",defaultMessage:"No access"}):(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(A().sA,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:l}}),(0,de().b)(a.chevron)]})}),render:()=>(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(Ge,{teamGuest:t,teamStores:n}),(0,re.jsx)(G().A,{size:"100%"}),(0,re.jsx)(qe,{teamGuest:t})]})})};var Ke=()=>s(37625),We=()=>s(347930),He=()=>s(725118),$e=()=>s(47373),Ye=()=>s(680074),Qe=()=>s(731320),Xe=()=>s(836251),Ze=()=>s(437622),Je=()=>s(274184),et=()=>s(562866),tt=()=>s(716730),st=()=>s(623742),it=()=>s(21735),nt=()=>s(508496),ot=()=>s(973189),rt=()=>s(404141),at=()=>s(309049),lt=()=>s(763392),dt=()=>s(224701),ct=()=>s(971407),ut=()=>s(128907),pt=()=>s(910609),mt=()=>s(847554),gt=()=>s(597898),ht=()=>s(304067),ft=()=>s(42476),St=()=>s(583705),yt=()=>s(385527),xt=()=>s(437607),bt=()=>s(76118),vt=()=>s(201549),At=()=>s(179030),wt=()=>s(127955),jt=()=>s(140828),Mt=()=>s(821879),kt=()=>s(508490),Ct=()=>s(792361),It=()=>s(280161),_t=()=>s(569892),Tt=()=>s(480822),Pt=()=>s(278238),Bt=()=>s(568625),Rt=()=>s(848538),Dt=()=>s(690825);function Nt(e){const t=i.useRef(null),{rows:s,hasMore:n}=(0,o().O$)(e.listSource.rowsStore),r=(0,Dt().Te)({count:s.length,getScrollElement:()=>t.current,estimateSize:t=>e.estimateSize(s[t]),overscan:10}),a=r.getVirtualItems();return(0,i.useEffect)((()=>{!async function(){const t=a[a.length-1];n&&(null==t?void 0:t.index)>=s.length-1&&await e.listSource.loadMore()}()}),[e.listSource,a,s.length,n]),(0,re.jsx)("div",{ref:t,style:{overflow:"auto",...e.style},children:(0,re.jsx)("div",{style:{height:`${r.getTotalSize()}px`,width:"100%",position:"relative"},children:a.map((t=>(0,re.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${t.size}px`,transform:`translateY(${t.start}px)`},children:e.renderRow(s[t.index])},t.key.toString())))})})}class Lt extends a().default{getInitialState(){return{rows:[],hasMore:!0}}}class Ut{constructor(e){this.rowsStore=new Lt,this.sort=void 0,this.filter=void 0,this._isFetching=!1,this.rowsStore.setState({rows:e,hasMore:!0})}async _fetchWithEffect(e){if(!this._isFetching){this._isFetching=!0;try{e(await this.fetch())}finally{this._isFetching=!1}}}async loadMore(){await this._fetchWithEffect((e=>{let{rows:t,hasMore:s}=e;this.rowsStore.setState({rows:[...this.rowsStore.getState().rows,...t],hasMore:s})}))}async setSort(e){this.sort=e,await this.refresh()}async setFilter(e){this.filter=e,await this.refresh()}async refresh(){await this._fetchWithEffect((e=>{let{rows:t,hasMore:s}=e;this.rowsStore.setState({rows:t,hasMore:s})}))}}class Ot extends Ut{constructor(e,t,s,i){super([]),this._allUsers=void 0,this._filteredAndSortedUsers=[],this._currentPage=0,this._limit=void 0,this._query=void 0,this._allUsers=[...e],this._limit=20,this._query=void 0,this.filter=t,this.sort=s,this._query=i,this._updateFilteredAndSortedUsers()}_updateFilteredAndSortedUsers(){let e=this._applyMembershipFilter(this._allUsers);this._query&&(e=this._applySearch(e)),this.sort&&(e=this._applySort(e)),this._filteredAndSortedUsers=e}_applyMembershipFilter(e){return this.filter?e.filter((e=>"members"===this.filter?"member"===e.membership_type:"guests"!==this.filter||"page_guest"===e.membership_type)):e}_applySearch(e){return this._query&&0!==this._query.length?(0,l().Ay)(this._query,e,(e=>[e.name,e.email].filter(Boolean).join(" "))):e}_applySort(e){if(!this.sort)return e;const{field:t,direction:s}=this.sort,i="asc"===s?1:-1,n=e.map((e=>{let s,i;switch(t){case"name_normalized":s=this._normalizeName(e.name)||e.email.toLowerCase();break;case"type":s=this._getMembershipTypeRank(e.membership_type),i=this._normalizeName(e.name)||e.email.toLowerCase();break;case"first_joined":s=e.first_joined_space_time||0;break;default:s=null}return{user:e,sortValue:s,secondarySortValue:i}}));return n.sort(((e,s)=>{if(null===e.sortValue&&null===s.sortValue);else{if(null===e.sortValue)return 1*i;if(null===s.sortValue)return-1*i;if(e.sortValue<s.sortValue)return-1*i;if(e.sortValue>s.sortValue)return 1*i}if("type"===t&&e.secondarySortValue&&s.secondarySortValue){if(e.secondarySortValue<s.secondarySortValue)return-1*i;if(e.secondarySortValue>s.secondarySortValue)return 1*i}return(e.user.id<s.user.id?-1:1)*i})),n.map((e=>e.user))}_normalizeName(e){return null==e?void 0:e.normalize("NFKD").toLowerCase().replace(/\p{Diacritic}/gu,"")}_getMembershipTypeRank(e){switch(e){case"owner":return 5;case"membership_admin":return 4;case"member":return 3;case"page_guest":return 2;case"none":return 1;default:return 0}}async setMembershipFilter(e){this._currentPage=0,this.filter=e,this.rowsStore.setState({rows:[],hasMore:!1}),this._updateFilteredAndSortedUsers(),await this.refresh()}async setSort(e){this._currentPage=0,this.sort=e,this.rowsStore.setState({rows:[],hasMore:!1}),this._updateFilteredAndSortedUsers(),await this.refresh()}async setQuery(e){this._query=e,this._currentPage=0,this.rowsStore.setState({rows:[],hasMore:!1}),this._updateFilteredAndSortedUsers(),await this.refresh()}async fetch(){const e=this._currentPage*this._limit,t=e+this._limit,s=this._filteredAndSortedUsers.slice(e,t),i=t<this._filteredAndSortedUsers.length;return Promise.resolve({rows:s,hasMore:i})}async loadMore(){this._currentPage++,await super.loadMore()}async refresh(){this._currentPage=0,await super.refresh()}TEST_ONLY_setLimit(e){this._limit=e}}class Et extends Ut{constructor(e,t,s,i,n,o){super(e),this._spaceId=void 0,this._environment=void 0,this._cursor=void 0,this._limit=void 0,this._query=void 0,this._environment=t,this._limit=20,this._cursor=void 0,this._query=void 0,this._spaceId=s,this.filter=i,this.sort=n,this._query=o}async setMembershipFilter(e){this._cursor=void 0,this.rowsStore.setState({rows:[],hasMore:!1}),this.filter=e,await this.refresh()}async setSort(e){this._cursor=void 0,this.sort=e,this.rowsStore.setState({rows:[],hasMore:!1}),await this.refresh()}async setQuery(e){this._query=e,this._cursor=void 0,this.rowsStore.setState({rows:[],hasMore:!1}),await this.refresh()}async fetch(){var e,t;const{callApi:i}=await Promise.resolve().then(s.bind(s,449506)),n=await i({eventName:"listUsers",environment:this._environment,data:{cursor:this._cursor,membershipFilter:this.filter,limit:this._limit,sort:null===(e=this.sort)||void 0===e?void 0:e.field,sortDirection:null===(t=this.sort)||void 0===t?void 0:t.direction,query:this._query,spaceId:this._spaceId}});return"success"===n.type?(this._cursor=n.data.nextCursor,{rows:n.data.users,hasMore:n.data.hasMore}):{rows:[],hasMore:!1}}}function Ft(e){let{member:t,store:s}=e;const a=(0,n().v3)(),l=(0,r().IS)((e=>({container:{width:"100%",display:"flex",justifyContent:"flex-end",paddingRight:8},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:16,height:16,fill:e.icon.secondary},removeMenuDivider:{borderTop:e.stroke.secondary},removeButton:{color:Pt().l8[e.mode].red},upgradeIcon:{width:17,height:17}})),[]),d=(0,i.useCallback)((async()=>{const{currentUserSettingsStore:e}=Le().default.state;if(!e)return()=>{};const i=(0,Rt().$N)(t.membership_type);if("none"===i)return()=>{};const n={userId:t.id,role:i,firstJoinedSpaceTime:void 0};return await(0,lt().Vr)({user:n,spaceStore:s,environment:a,userSettingStore:e})}),[s,a,t]),c=new(he().A),u=(0,o().K8)((()=>{var e;return(null===(e=Le().default.state.currentUserStore)||void 0===e?void 0:e.id)===t.id}),[t]);return(0,re.jsx)("div",{style:l.container,children:(0,re.jsx)(q().Ay,{buttonPopupStore:c,popupType:q().z7.Popup,renderOrigin:e=>(0,re.jsx)(F().p,{style:l.button,...e,children:(0,Bt().L)(l.buttonIcon)}),onClick:()=>{C().jR(a,{from:"member",button_name:"actions"})},render:()=>(0,re.jsx)("div",{children:(0,re.jsx)($().Ay,{type:$().Oh.Vertical,initialFocus:void 0,sections:[{key:"remove",render:e=>(0,re.jsx)(X().A,{...e,style:l.removeMenuDivider}),items:[{key:"remove",render:e=>(0,re.jsx)(V().A,{...e,buttonStyle:l.removeButton,icon:(0,p()._)(l.upgradeIcon),title:(0,re.jsx)(A().sA,{id:"peopleSectionmembersTab.removeMember",defaultMessage:"{isCurrentUser, select, true {Leave workspace} other {Remove from workspace}} ",values:{isCurrentUser:u}})}),action:async()=>{c.setState({open:!1}),await d(),C().jR(a,{from:"member",button_name:"remove"})}}]}]})})})})}function Vt(e,t,s){const n=(0,o().uB)(void 0,ot().A);return(0,i.useMemo)((()=>[{id:"member",width:"guests"===e?s?"80%":"100%":"35%",header:e=>{let{sort:t,onSort:s}=e;return(0,re.jsxs)(E().A,{style:{display:"flex",alignItems:"center",gap:"2px",justifyContent:"flex-start"},ignoreLocalHoverState:!0,onClick:()=>null==s?void 0:s("name"),children:[(0,re.jsx)(J().A,{isSmall:!0,isSecondaryColor:!0,children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"})}),"name"===(null==t?void 0:t.by)&&(0,re.jsx)(Ct().X,{up:t.asc})]})},cell:e=>{let{member:t,userStore:s,role:i,restorationStatus:n}=e;return(0,re.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,re.jsx)(st().A,{actorStore:s,restorationStatus:n,spaceRole:(0,st().v)(i),hideRolePill:!0})})}},..."guests"!==e?[{id:"groups",width:"20%",header:()=>(0,re.jsx)(J().A,{isSmall:!0,isSecondaryColor:!0,style:{paddingLeft:12},children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"})}),cell:e=>{let{groupIds:t,store:s,theme:i}=e;return(0,re.jsx)("div",{style:{paddingLeft:8},children:t&&t.length>0?(0,re.jsx)(ae,{spaceStore:s,groupIds:t,onGroupClick:()=>{n.setState({...n.state,currentTab:ot().d.Groups})}}):(0,re.jsx)("div",{style:{color:i.mediumTextColor,fontSize:14,paddingLeft:8},children:"None"})})}},{id:"teamspaces",width:"20%",header:()=>(0,re.jsx)(J().A,{isSmall:!0,isSecondaryColor:!0,style:{paddingLeft:12},children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.teamspacesColumn.header",defaultMessage:"Teamspaces"})}),cell:e=>{let{member:t,role:s,groupIds:i}=e;return(0,re.jsx)("div",{style:{paddingLeft:8},children:"none"!==s&&(0,re.jsx)(Ke().Ay,{memberId:t.id,userPermissionGroupIds:new Set(i??[])})})}},{id:"access-level",width:"15%",header:e=>{let{sort:t,onSort:s}=e;return(0,re.jsxs)(E().A,{style:{display:"flex",alignItems:"center",gap:"2px",justifyContent:"flex-start",paddingLeft:12},ignoreLocalHoverState:!0,onClick:()=>null==s?void 0:s("role"),children:[(0,re.jsx)(J().A,{isSmall:!0,isSecondaryColor:!0,children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"})}),"role"===(null==t?void 0:t.by)&&(0,re.jsx)(Ct().X,{up:t.asc})]})},cell:e=>{let{role:t}=e;return(0,re.jsx)("div",{style:{paddingLeft:12},children:(0,re.jsx)(J().A,{isSmall:!0,isSecondaryColor:!0,children:"editor"===t?"Workspace owner":"membership_admin"===t?"Membership admin":"read_and_write"===t?"Member":"Guest"})})}},{id:"actions",width:"10%",header:()=>null,cell:t=>{let{member:i,store:n}=t;return"members"===e&&s?(0,re.jsx)("div",{children:(0,re.jsx)(Ft,{member:i,store:n})}):null}}]:[],..."guests"===e&&s?[{id:"guest-pages",width:"20%",header:()=>(0,re.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"flex-end",paddingRight:"38px"},children:(0,re.jsx)(J().A,{isSmall:!0,isSecondaryColor:!0,children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})})}),cell:e=>{var t;let{member:s,store:i,userStore:n,role:o,guestPages:r,isAdmin:a,subscribed:l}=e;if("none"===o&&null!=r&&r.guestIdToPages&&(null===(t=r.guestIdToPages[s.id])||void 0===t?void 0:t.pageIds.length)>0){const e=r.guestIdToPages[s.id];if(e)return(0,re.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"flex-end",paddingRight:"12px"},children:(0,re.jsx)(we,{store:i,guest:{...s,userId:s.id,guestPageIds:e.pageIds,role:"none",isTeamGuest:!1,isPageGuest:!0},guestStore:n,isSubscribed:l??!1,hideActionButtons:!1})})}return null}}]:[]]),[e,s,n])}function qt(e){var t;let{member:s,store:i,group:n,recentlyRemovedMembers:a,groupIds:l,guestPages:d}=e;const c=(0,r().DP)(),u=(0,o().K8)((()=>fe().LU.createChildStore(i,{table:b().oo,id:s.id})),[i,s.id]),p=Array.isArray(a)?null===(t=a.find((e=>e.userId===s.id)))||void 0===t?void 0:t.restorationStatus:void 0,m=(0,Rt().$N)(s.membership_type),g=(0,o().K8)((()=>{const e=ye().subscriptionDataStoreInstance.state;return Boolean(e&&Se().Fq(e))}),[]),h=(0,o().K8)((()=>Le().default.state.currentSpaceStore),[]),f=(0,o().K8)((()=>(null==h?void 0:h.canAdmin())??!1),[h]),S=Vt(n,0,f);return(0,re.jsx)("div",{style:{padding:"12px",borderBottom:`1px solid ${c.regularDividerColor}`,display:"flex",alignItems:"center",minHeight:"40px",fontSize:"14px",color:c.regularTextColor,width:"100%",boxSizing:"border-box"},children:S.map((e=>(0,re.jsx)("div",{style:{width:e.width,display:"flex",alignItems:"center"},children:e.cell({member:s,store:i,userStore:u,groupIds:l,role:m,theme:c,guestPages:d,isAdmin:f,restorationStatus:p,subscribed:g})},e.id)))},s.id)}function Gt(e){let{group:t,store:s,recentlyRemovedMembers:a,query:l,sort:c,setSort:u,isLocal:p}=e;const m=(0,r().DP)(),g=(0,n().v3)(),h=(0,o().K8)((()=>Le().default.state.currentSpaceStore),[]),f=(0,o().K8)((()=>(null==h?void 0:h.canAdmin())??!1),[h]),y=(0,i.useMemo)((()=>c?{field:"name"===c.by?"name_normalized":(c.by,"type"),direction:c.asc?"asc":"desc"}:{field:"name_normalized",direction:"asc"}),[c]),x=(0,A().tz)(),v=(0,o().K8)((()=>{if(!p)return[];const e=ye().subscriptionDataStoreInstance.state;if(!e)return[];return Se().Be(e).map((e=>{var t,i;const n=fe().LU.createChildStore(s,{table:b().oo,id:e.userId});return{id:e.userId,email:n.getEmail()||"",space_id:s.id,name:n.getDisplayName(x),profile_photo:null===(t=n.getModel())||void 0===t?void 0:t.profile_photo,membership_type:(0,Rt().jM)(e.role),onboarding_completed:null===(i=n.getModel())||void 0===i?void 0:i.onboarding_completed,first_joined_space_time:zt(e)}}))}),[p,s,x]),w=(0,i.useMemo)((()=>{if(!h)return null;const e=p?new Ot(v,t,y,l):new Et([],g,h.id,t,y,l);return e.refresh(),e}),[g,h,y,l,t,p,v]);(0,i.useEffect)((()=>{w&&c&&w.setSort(y)}),[w,c,y]);const{rows:j}=(0,o().O$)(null==w?void 0:w.rowsStore),[M,k]=(0,i.useState)(!0);(0,i.useEffect)((()=>{null!=j&&j.length&&M&&k(!1)}),[j,M]);const[{value:C}]=(0,d().Yb)((async()=>{if(!h)return;const e=await P().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:g,data:{userIds:(null==j?void 0:j.map((e=>e.id)))??[],spaceId:h.id},headers:(0,S().WS)({cellId:void 0,spaceId:h.id})});return"success"===e.type?e.data.userToGroupMap:void 0}),[h,g,j]),[{value:I}]=(0,d().Yb)((async()=>{if(!h||"guests"!==t||!f)return;const e=await P().callApi({eventName:"getGuestPagesForUserIds",environment:g,data:{spaceId:h.id,guestUserIds:(null==j?void 0:j.map((e=>e.id)))??[]},headers:(0,S().WS)({cellId:void 0,spaceId:h.id})});return"success"===e.type?e.data:void 0}),[h,g,j,t,f]),_=Vt(t,0,f);return M||!w?(0,re.jsx)(W().A,{}):(0,re.jsxs)("div",{style:{width:"100%",fontSize:13,flex:"1 1 0",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,re.jsx)("div",{style:{display:"flex",padding:"12px",borderBottom:`1px solid ${m.regularDividerColor}`,color:m.mediumTextColor},children:_.map((e=>(0,re.jsx)("div",{style:{width:e.width,display:"flex",alignItems:"center"},children:e.header({sort:c,onSort:e=>{"name"!==e&&"role"!==e||u({by:e,asc:c.by===e&&!c.asc})}})},e.id)))}),(0,re.jsx)(Nt,{estimateSize:()=>64,listSource:w,renderRow:e=>(0,re.jsx)(qt,{member:e,store:s,group:t,recentlyRemovedMembers:a,groupIds:null==C?void 0:C[e.id],guestPages:I}),style:{flex:"1 1 0"}})]})}function zt(e){return"firstJoinedSpaceTime"in e?e.firstJoinedSpaceTime??Date.now():Date.now()}var Kt=()=>s(702796),Wt=()=>s(785606),Ht=()=>s(19575),$t=()=>s(970209),Yt=()=>s(324561),Qt=()=>s(972418),Xt=()=>s(334992);const Zt={maxWidth:275,borderRadius:30},Jt={marginTop:8},es={maxWidth:160},ts=50;function ss(e){const{store:t,currentTab:s,inviteLinkCode:i,members:n,guests:o,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:a,accessRequestRenderValues:l}=e;return s===ot().d.Members?(0,re.jsx)(Bs,{isMobile:!1,store:t,inviteLinkCode:i,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:a,members:n}):s===ot().d.Guests?(0,re.jsx)(Rs,{store:t,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:a,guests:o}):s===ot().d.Groups?(0,re.jsx)(As,{store:t,spacePermissionsSettingsStore:r}):s===ot().d.Reprovisioning?(0,re.jsx)(is,{store:t}):s===ot().d.Requests?(0,re.jsx)(wt().Ay,{spaceStore:t,accessRequestRenderValues:l}):void(0,M().HB)(s)}function is(e){let{store:t}=e;const s=(0,r().IS)((()=>({label:{width:"80%"}})),[]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(J().A,{isMultiline:!0,style:s.label,children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption",defaultMessage:"View users that were previously part of the workspace in the past 30 days. Only workspace owners can see this."})}),(0,re.jsx)(J().A,{isMultiline:!0,style:s.label,children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption.disclaimer",defaultMessage:"Only users who had private pages will appear here."})}),(0,re.jsx)(G().A,{size:24,isHidden:!0}),(0,re.jsx)(ns,{store:t})]})}function ns(e){let{store:t}=e;const s=(0,n().v3)(),[o,r]=(0,i.useState)([]),[{value:a,status:l}]=(0,d().Yb)((async()=>{const e=await P().callApi({eventName:"getRecoverableSpaceUserContent",environment:s,data:{spaceId:t.id}});if("failed"===e.type)throw R().Qg(e),e;return e.data}),[s,t.id]),c=(null==a?void 0:a.recentSpaceRecoverPages)??[],u=(0,i.useCallback)((async(e,i)=>{const{accept:n}=await R().Gh({message:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Transfer their private pages?"}),description:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationDescription",defaultMessage:"This action cannot be undone."}),acceptLabel:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})});if(!n)return;r([...o,e]);const a=await P().callApi({eventName:"transferSpaceUserContent",environment:s,data:{spaceId:t.id,fromUserId:e,toUserId:i}});"failed"===a.type&&R().Qg(a),r(o.filter((t=>t!==e)))}),[s,t.id,o]),p=(0,i.useCallback)((e=>{const s=[];for(const{userId:i,privatePagesCount:n}of e){if(n<1)continue;const e=fe().LU.createChildStore(t,{table:b().oo,id:i});s.push({key:i,columns:[(0,re.jsx)(as,{userStore:e},"Member"),n,o.includes(i)?(0,re.jsx)(rs,{}):(0,re.jsx)("div",{style:{marginLeft:-4},children:(0,re.jsx)(jt().A,{mode:Mt().C.Button,focused:!1,title:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.reprovision.toUser.title",defaultMessage:"Transfer private pages"}),parentStore:t,userIds:o,onChange:e=>{let[t]=e;u(i,t)}})})]})}return s}),[t,o,u]);return"pending"===l?(0,re.jsx)(rs,{}):null!=a&&a.recentSpaceRecoverPages?(0,re.jsx)(Be().A,{columns:[{key:"user",header:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"50%"}},{key:"count",header:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.pageCountColumn.header",defaultMessage:"Private pages"}),style:{width:"25%"}},{key:"action",header:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.actionLevelColumn.header",defaultMessage:"Action"}),style:{width:"25%"}}],rows:p(c)}):null}function os(){const e=ye().subscriptionDataStoreInstance.state;return Boolean(e&&Se().Fq(e))}function rs(){return(0,re.jsx)(W().A,{style:{margin:"calc(50% - 1em) auto"}})}function as(e){let{userStore:t,restorationStatus:s}=e;return(0,re.jsx)(st().A,{actorStore:t,restorationStatus:s})}function ls(e){let{user:t,userPermissionGroupIds:s}=e;return"none"!==t.role?(0,re.jsx)(Ke().Ay,{memberId:t.userId,userPermissionGroupIds:s}):null}function ds(e,t,s,i){return t&&t.length>0?(0,l().Ay)(t,e,(e=>{const t=fe().LU.createChildStore(s,{table:b().oo,id:e.userId});return t.isDefined()?t.getSearchName(i):""})):e}function cs(e){let{store:t}=e;return(0,o().K8)((()=>L().CU(t)),[t])?(0,re.jsx)(J().A,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,re.jsx)(A().sA,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})}):(0,re.jsxs)("div",{children:[(0,re.jsx)(J().A,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:2},children:(0,re.jsx)(A().sA,{id:"spaceBasicSettings.membersTab.manageMembersWithoutLinkCaption",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace.",values:{setupdomainlink:e=>(0,re.jsx)(ke().A,{onClick:()=>{rt().A.setState({...rt().A.state,currentTab:"settings",defaultSubtab:void 0})},children:e})}})}),(0,re.jsx)(J().A,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,re.jsx)(A().sA,{id:"spaceBasicSettings.membersTab.learnMore",defaultMessage:"<billingguidelink>Learn more about adding members.</billingguidelink>",values:{billingguidelink:e=>(0,re.jsx)(ke().A,{href:(0,Xe().xS)("guides.billingGuide"),children:e})}})})]})}function us(e){return Se().vl(e)&&os()}function ps(e){let{group:t,user:s,userStore:i,store:o}=e;const r=(0,A().tz)(),a=(0,n().v3)();return(0,re.jsx)(q().Ay,{popupType:q().z7.Popup,renderOrigin:e=>(0,re.jsx)(z().A,{...e,icon:u()._,iconStyle:{height:14,width:14},ariaLabel:r.formatMessage({id:"spacePermissionsSettings.externalTab.userThreeDotMenu.ariaLabel",defaultMessage:"Convert to member or remove from workspace"})}),render:e=>{const n=[{key:"convertToMember",render:e=>(0,re.jsx)(V().A,{...e,icon:(0,g().V)({height:17,width:17}),title:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.title",defaultMessage:"Convert to member"}),shouldWrapCaption:!0,caption:"team_guests"===t&&(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.caption",defaultMessage:"Workspace members are not restricted to specific teamspaces"})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e,o=os()?"read_and_write":"editor";R().ui({message:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.message",defaultMessage:"Are you sure you want to convert this user into a workspace member?"}),description:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.description",defaultMessage:"This is a billable event."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{R().zw(),n.close()},items:[{label:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.confirm",defaultMessage:"Convert to workspace member"}),color:"blue",onAccept:async()=>{n.close(),await U().P({environment:s,guestUserStore:i,role:o,store:t,isConvertToAdmin:!os(),origin:"page_or_teamspace_guest_three_dot_menu"})}}]})}({user:s,userStore:i,parent:e},o,a)},{key:"removeFromWorkspace",render:e=>(0,re.jsx)(V().A,{...e,icon:(0,p()._)({height:17,width:17,color:w().Ay.red}),title:(0,re.jsx)("span",{style:{color:w().Ay.red},children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.title",defaultMessage:"Remove from workspace"})})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e;R().ui({message:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.message",defaultMessage:"Are you sure you want to remove this user from the workspace?"}),description:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.description",defaultMessage:"This action will completely remove the user from the workspace, including any teamspaces and pages they have access to."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{R().zw(),n.close()},items:[{label:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.confirm",defaultMessage:"Remove from workspace"}),color:"red",onAccept:async()=>{n.close(),await U().D({environment:s,guestUserStore:i,store:t})}}]})}({user:s,userStore:i,parent:e},o,a)}],r=[{key:"team section",render:e=>(0,re.jsx)(X().A,{...e}),items:n}];return(0,re.jsx)(H().A,{menuType:me().gu.Popup,children:(0,re.jsx)($().Ay,{type:$().Oh.Vertical,sections:r,initialFocus:void 0,style:{minWidth:265}})})}})}function ms(e){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}}const gs=(0,A().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});function hs(){D().m({message:gs.updatingPermissions})}function fs(){D().V()}async function Ss(e,t,s,i,n){const o=n.currentUser.id;if(e.userId!==o||"none"!==t)hs(),"none"===t?(await P().callApi({eventName:"removeUsersFromSpace",environment:n,data:{userIds:[e.userId],spaceId:i.id,removePagePermissions:!0,revokeUserTokens:!1}}),await dt().Ow(n)):O().createAndCommit({userAction:"SpacePermissionsSettings.handleMemberPermissionRoleChange",environment:n,canUndo:!0,perform:s=>N().dy({environment:n,spaceStore:i,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:s,from:"space_permission_setting_table"})}),fs();else{await L().ev({environment:n,spaceId:i.id,userSettingsStore:s})&&(_().KX(n,{invite_origin:"workspace_leave",domainType:(0,Ye().FX)(),new_workspace_member_count:-1,new_workspace_member_ids:[o]}),rt().A.setState({...rt().A.state,open:!1}))}}function ys(e){let{buttonStyle:t,store:s}=e;const r=(0,n().v3)(),a=(0,o().K8)((()=>s.canEditMembership()),[s]),l=(0,o().K8)((()=>!a&&!s.getDisableMembershipRequests()&&(0,$e().x3)()),[a,s]),d=(0,o().K8)((()=>os()),[]),c=(0,i.useCallback)((()=>{(0,tt().q)(r)}),[r]);return l?(0,re.jsx)(et().cx,{store:s,analyticsFrom:"space_settings_add_members",origin:(0,re.jsx)(Q().A,{size:"lg",onClick:c,children:(0,re.jsx)(A().sA,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,re.jsxs)("div",{style:{display:"flex"},children:[(0,re.jsx)(We().H,{disabled:!a,store:s,onInviteClick:hs,onInviteComplete:fs,isSubscribed:d,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:t,analyticsFrom:"space_settings_add_members"}),(0,re.jsx)(He().R,{inviteOrigin:"space_setting_slack_imports",canEditPermission:a,onInviteClick:hs,onInviteComplete:fs})]})}function xs(e){let{member:t,store:s}=e;const i=(0,n().v3)(),r=(0,A().tz)(),a=i.currentUser.id,{currentUserSettingsStore:l,currentSpaceStore:d}=(0,o().K8)((()=>{const{currentUserSettingsStore:e,currentSpaceStore:t}=Le().default.state;return{currentUserSettingsStore:e,currentSpaceStore:t}}),[]),c=(0,o().K8)((()=>function(e,t){const s=e.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),i=(0,Qe().Qu)();return j().oE(y().Gb.map((e=>{if(i||"membership_admin"!==e)return!t.canAdmin()&&y().EH(e)?{role:e,disabledInfo:{isDisabled:!0,disabledMessage:s}}:{role:e}})))}(r,s)),[r,s]),u=(0,o().K8)((()=>!(s.canAdmin()||s.canEditMembership()&&(y().NB(t.role)||t.userId===a))),[a,t,s]);return l?(0,re.jsx)(Ce().Ay,{role:t.role,table:x().NX,type:"user_permission",disabled:u,isUserPermission:t.userId===a,upgradeButtonName:"space_permission_item",availableRoleItems:c,onChange:async e=>{await Ss(t,e,l,s,i)},buttonStyle:es,onRemoveMemberClick:async()=>{let e,n;if(ut().R()&&(n=h().JW(),e=await(0,ht().G)({environment:i,contractionSurveyId:n}),!e))return null;await(async()=>await(0,ct().B)(i,t.userId,null==d?void 0:d.id))()&&(await(async e=>{await Ss(t,"none",l,s,i),_().ej(i,{member_user_id:t.userId,member_role:t.role,contraction_survey_id:e,is_space:!0,domainType:(0,Ye().FX)(),new_workspace_member_count:-1})})(n),e&&lt().x(i))}}):null}function bs(e,t,s,i,n){const o=n.state.sorts[e];if(!o)return t;switch(o.by){case"role":return t.sort(((e,t)=>(y().TE[t.role]-y().TE[e.role])*(o.asc?-1:1)));case"name":return t.map((e=>({user:e,store:fe().LU.createChildStore(s,{table:b().oo,id:e.userId})}))).sort(((e,t)=>{const s=i.formatMessage(f().Fvx.messages.anonymousPlaceholder),n=e.store.getFullName(i)||s,r=t.store.getFullName(i)||s;return n.localeCompare(r)*(o.asc?1:-1)})).map((e=>e.user))}}function vs(e,t,s){const i=s.state.sorts[e];let n;n=!(!i||i.by!==t)&&i.asc,s.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!n}}})))}function As(e){let{store:t,spacePermissionsSettingsStore:s}=e;const a=(0,A().tz)(),d=(0,r().DP)(),c=(0,n().v3)(),u=(0,i.useCallback)((e=>function(e,t){t.setState({...t.state,groupsFilter:e.target.value})}(e,s)),[s]),p=(0,i.useCallback)((()=>function(e,t,s){O().createAndCommit({userAction:"SpacePermissionsSettings.handleCreateGroupClick",environment:e,canUndo:!0,perform:e=>{const i=L().np({spaceStore:t,transaction:e});if(i){s.setState({...s.state,editingNameGroupId:i.getGroupId(),groupNameInputValue:""});const e=f().Bj6.fromValue(xt().n,i.getValue()),t=[...se().A.state.permissionGroupsAndMemberCounts,{group:e,memberCount:0}],n=(0,l().Ay)(s.state.groupsFilter,t,(e=>e.group.name||""));se().A.setState({...se().A.state,permissionGroupsAndMemberCounts:n})}}}),C().UY(e)}(c,t,s)),[c,t,s]),g=(0,o().K8)((()=>s.state.groupsFilter),[s]),h=(0,o().K8)((()=>us(c)),[c]),S=(0,o().K8)((()=>t.canEditMembership()),[t]),y=(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",defaultMessage:"Only membership admins and workspace owners can add a permission group."}),x=(0,o().K8)((()=>t.isDefined()),[t]),b=(0,o().K8)((()=>0!==(0,Qe().Qo)()),[]),v=(0,o().K8)((()=>(0,De().zI)()>0),[]),w=(0,o().K8)((()=>function(e,t){return us(t)&&e.canEditMembership()}(t,c)),[c,t]);return x?(0,re.jsxs)("div",{style:{overflow:"auto"},children:[h?(0,re.jsx)(J().A,{isMultiline:!0,style:{width:"80%"},children:v?(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})}):(0,re.jsx)($t().A,{subscriptionTier:"plus",from:"permission_groups",icon:St().$,title:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",defaultMessage:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),(0,re.jsx)(G().A,{size:24,isHidden:!0}),(0,re.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"16px 8px"},children:[h&&(0,re.jsx)(Ae().A,{renderTooltip:()=>!S&&y,render:e=>(0,re.jsx)(Q().A,{size:"lg",onClick:p,disabled:!S,...S?void 0:e,children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"})})}),b&&(0,re.jsx)(K().A,{placeholder:a.formatMessage({id:"spacePermissionsSettings.groupsTab.filterGroupNamesInput.placeholder",defaultMessage:"Filter by group name…"}),left:(0,m().q)(ms(d)),showClearButton:!0,format:K().C.Small,value:g,style:{...Zt,marginRight:0},onChange:u,onClick:()=>{C().Z9(c,{current_tab:ot().d.Groups})}})]}),b&&(0,re.jsx)(It().r,{spaceStore:t,permissionsSettingsStore:s,canEdit:w})]}):null}function ws(e){let{groupIds:t,store:s,spacePermissionsSettingsStore:i}=e;return(0,re.jsx)(ae,{spaceStore:s,groupIds:t,onGroupClick:()=>{!function(e,t){t.setState({...t.state,currentTab:e})}(ot().d.Groups,i)}})}function js(e){let{group:t,user:s,userStore:i,store:n}=e;const r=(0,o().K8)((()=>(0,$e().Qd)()),[]),a=(0,o().K8)((()=>os()),[]);return"none"===s.role?r&&"team_guests"===t?(0,re.jsx)(ze,{teamGuest:s}):(0,re.jsx)(we,{store:n,guest:s,guestStore:i,isSubscribed:a,hideActionButtons:r}):(0,re.jsx)(xs,{store:n,member:s})}function Ms(e){let{members:t,store:s}=e;const i=(0,r().IS)((e=>({container:{display:"flex",alignItems:"center",padding:10,paddingRight:2,gap:5,justifyContent:"space-between",width:"100%",borderBottom:`1px solid ${e.lightDividerColor}`,background:e.cardContentBackground},memberContainer:{flexShrink:1,minWidth:50},permissionContainer:{textAlign:"center",marginLeft:"auto",flexShrink:0}})),[]);return(0,re.jsx)(re.Fragment,{children:t.map((e=>{const t=fe().LU.createChildStore(s,{table:b().oo,id:e.userId});return(0,re.jsxs)("div",{style:i.container,children:[(0,re.jsx)("div",{style:i.memberContainer,children:(0,re.jsx)(as,{userStore:t})}),(0,re.jsx)("div",{style:i.permissionContainer,children:(0,re.jsx)(js,{store:s,group:"members",user:e,userStore:t})})]},e.userId)}))})}function ks(e){let{group:t,spaceMembers:s,store:r,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:l}=e;const c=(0,n().v3)(),u=(0,o().K8)((()=>a.state.sorts[t]),[t,a]),p={key:"user",header:(0,re.jsxs)(E().A,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{vs(t,"name",a)},style:{display:"flex",alignItems:"center"},children:[(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),u&&"name"===u.by&&(0,re.jsx)(Ct().X,{up:u.asc})]}),style:{width:"45%"}},m={key:"groups",header:(0,re.jsx)(E().A,{disabled:!0,ignoreLocalHoverState:!0,style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"})}),style:{width:"15%"}},g={key:"teams",header:(0,re.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.teamsColumn.header",defaultMessage:"Teamspaces"})}),style:{width:"20%",textAlign:"center"}},h={key:"access_level",header:(0,re.jsxs)(E().A,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{vs(t,"role",a)},style:{display:"flex",alignItems:"center",paddingLeft:8},children:[(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),u&&"role"===u.by&&(0,re.jsx)(Ct().X,{up:u.asc})]}),style:{width:"20%",textAlign:"center"}},f={key:"pages",header:(0,re.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})}),style:{width:"20%",textAlign:"center"}},y={key:"three_dot",header:(0,re.jsx)(E().A,{disabled:!0,ignoreLocalHoverState:!0})},x=(0,o().K8)((()=>us(c)&&"team_guests"!==t&&"guests"!==t),[c,t]),v=(0,o().K8)((()=>("team_guests"===t||"guests"===t)&&(0,$e().Qd)()&&r.canEditMembership()),[t,r]),w=(0,o().K8)((()=>(0,De().zI)()>0),[]);let j="members"===t&&w?[p,g,h]:v?[p,f,y]:[p,f];x&&(j=[...j.slice(0,1),m,...j.slice(1)]);const M=(0,o().O$)(l),k=(0,o().K8)((()=>s.map((e=>({member:e,store:fe().LU.createChildStore(r,{table:b().oo,id:e.userId})}))).filter((e=>e.store.isDefined()))),[s,r]),C=(0,o().K8)((()=>Le().default.state.currentSpaceStore),[]),[{value:I}]=(0,d().Yb)((async()=>{if(!C)return;const e=await P().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:c,data:{userIds:k.map((e=>e.member.userId)),spaceId:C.id},headers:(0,S().WS)({cellId:void 0,spaceId:C.id})});return"success"===e.type?e.data.userToGroupMap:void 0}),[C,c,k]);return(0,re.jsx)(Be().A,{columns:j,rows:k.map((e=>{var s;const{member:n,store:o}=e,l=I&&I[n.userId],d=Array.isArray(M)?null===(s=M.find((e=>e.userId===n.userId)))||void 0===s?void 0:s.restorationStatus:void 0,c=[(0,re.jsx)(i.Fragment,{children:(0,re.jsx)(st().A,{actorStore:o,restorationStatus:d,spaceRole:(0,st().v)(n.role),hideRolePill:!0})},"member")];return x&&c.push((0,re.jsx)(i.Fragment,{children:(0,re.jsx)(ws,{store:r,spacePermissionsSettingsStore:a,groupIds:l||[]})},"groups")),"members"===t&&w&&c.push((0,re.jsx)(i.Fragment,{children:(0,re.jsx)(ls,{user:n,userPermissionGroupIds:new Set(l??[])})},"teams")),c.push((0,re.jsx)(i.Fragment,{children:(0,re.jsx)(js,{store:r,group:t,user:n,userStore:o})},"user-permission")),v&&c.push((0,re.jsx)(i.Fragment,{children:(0,re.jsx)(ps,{group:t,user:n,userStore:o,store:r})},"three-dot")),{key:n.userId,columns:c}}))})}function Cs(e){var t;let{members:s,store:n,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:a}=e;const l=(0,A().tz)(),d=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitMembers:!1})}(r)),[r]),{membersFilter:c,limitMembers:u}=(0,o().K8)((()=>{const{membersFilter:e,limitMembers:t}=r.state;return{membersFilter:e,limitMembers:t}}),[r]),p=(0,o().K8)((()=>ds(s,c,n,l)),[s,c,n,l]),m=(0,o().K8)((()=>bs("members",p,n,l,r)),[p,n,l,r]),g=(0,Qt().lh)({spaceId:n.id}),h=u?m.slice(0,ts):m,f=(0,Xt().A)(n),S=(0,Yt().Q7)(n.id,g,m.length),y=f&&(null==g?void 0:g.subscription)&&S&&S>0,x=m.length;return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{style:{marginRight:8,flexGrow:1},children:(0,re.jsx)(_e().A,{smallMarginBottom:!0,children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"})})}),(0,re.jsx)(cs,{store:n}),(0,re.jsx)("div",{style:{margin:"24px 0px"},children:y?(0,re.jsx)(Tt().x,{quantityOfSpaceMembers:x,quantityOfPaidSeats:S,nextBillingDate:(null==g||null===(t=g.subscription)||void 0===t?void 0:t.currentPeriodEnd.toLocaleString({month:"short",day:"numeric",year:"numeric"}))??""}):null}),(0,re.jsxs)("div",{children:[(0,re.jsx)(ks,{store:n,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:a,group:"members",spaceMembers:h}),m.length>ts&&u&&(0,re.jsx)(F().p,{isGray:!0,size:"xs",style:Jt,onClick:d,children:(0,re.jsx)(A().sA,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:m.length-ts}})})]})]})}function Is(e){let{guests:t,store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:a}=e;const l=(0,A().tz)(),d=(0,r().DP)(),c=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitTeamGuests:!1})}(n)),[n]),{teamGuestsFilter:u,limitTeamGuests:p}=(0,o().K8)((()=>{const{teamGuestsFilter:e,limitTeamGuests:t}=n.state;return{teamGuestsFilter:e,limitTeamGuests:t}}),[n]),g=t.filter((e=>e.isTeamGuest)),h=(0,o().K8)((()=>ds(g,u,s,l)),[g,u,s,l]),f=(0,o().K8)((()=>bs("team_guests",h,s,l,n)),[h,s,l,n]),S=p?f.slice(0,5):f;return(0,re.jsx)("div",{style:{marginBottom:5},children:(0,re.jsxs)("div",{children:[(0,re.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:(0,re.jsx)(K().A,{placeholder:l.formatMessage({id:"spacePermissionsSettings.membersTab.filterTeamGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,m().q)(ms(d)),showClearButton:!0,format:K().C.Small,value:u,style:Zt,onChange:e=>{n.setState({...n.state,teamGuestsFilter:e.target.value,limitTeamGuests:!0})}})}),(0,re.jsx)(ks,{store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:a,group:"team_guests",spaceMembers:S}),f.length>5&&p&&(0,re.jsx)(F().p,{isGray:!0,size:"xs",style:Jt,onClick:c,children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:f.length-5}})})]})})}function _s(e){let{guests:t,store:s,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:l}=e;const d=(0,A().tz)(),c=(0,r().DP)(),u=(0,n().v3)(),{guestsFilter:p,limitGuests:g}=(0,o().K8)((()=>({guestsFilter:a.state.guestsFilter,sorts:a.state.sorts,limitGuests:a.state.limitGuests})),[a]),h=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitGuests:!1})}(a)),[a]),f=t.filter((e=>!e.isTeamGuest&&e.isPageGuest)),S=(0,o().K8)((()=>ds(f,p,s,d)),[f,p,s,d]),y=(0,o().K8)((()=>bs("guests",S,s,d,a)),[S,s,d,a]),x=(0,o().K8)((()=>(0,$e().Qd)()?5:ts),[]),b=(0,o().K8)((()=>Le().default.state.currentSpaceStore),[]),v=(0,o().O$)(ye().subscriptionDataStoreInstance),w=(0,o().K8)((()=>Boolean(b&&v&&"subscribed_admin"===v.type&&nt().default.checkGate({gateName:"enable_guest_export"}))),[b,v]),j=g?y.slice(0,x):y;return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:[(0,re.jsx)(K().A,{placeholder:d.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,m().q)(ms(c)),showClearButton:!0,format:K().C.Small,value:p,style:Zt,onChange:e=>{a.setState({...a.state,guestsFilter:e.target.value,limitGuests:!0})},onClick:()=>{C().Z9(u,{current_tab:ot().d.Guests})}}),w&&(0,re.jsx)(Y().A,{size:"lg",disabled:!1,color:"uiBlue",onClick:()=>function(e,t,s){const{currentSpaceStore:i}=Le().default.state,n=ye().subscriptionDataStoreInstance.state;i&&n&&"subscribed_admin"===n.type&&vt().s6(s,{intl:t,spaceStore:i,guests:e})}(y,d,u),disabledFeedback:!0,children:(0,re.jsx)(A().sA,{id:"exportGuestsButton.label",defaultMessage:"Export guests as CSV"})})]}),(0,re.jsx)(ks,{store:s,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:l,group:"guests",spaceMembers:j}),y.length>x&&g&&(0,re.jsx)(F().p,{isGray:!0,size:"xs",style:Jt,onClick:h,children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:y.length-x}})})]})}function Ts(e){let{guests:t,store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:r}=e;const[a,l]=(0,i.useState)(!0),[d,c]=(0,i.useState)(!0),u=(0,o().K8)((()=>!Boolean(s.getSettingsStore().getKeyStore("disable_team_guests").getValue())),[s]);return(0,re.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[u&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)("div",{style:{display:"flex"},children:[(0,re.jsx)(Kt().A,{open:a,onClick:()=>l(!a),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),(0,re.jsxs)("div",{style:{marginLeft:3},children:[(0,re.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,re.jsx)(J().A,{style:{fontSize:15},children:(0,re.jsx)(A().sA,{id:"spacePermissionSettings.teamGuests.title",defaultMessage:"Teamspace guests"})}),(0,re.jsx)("span",{children:" "}),(0,re.jsx)(J().A,{isSecondaryColor:!0,style:{fontSize:15},children:t.filter((e=>e.isTeamGuest)).length})]}),(0,re.jsx)(J().A,{isSecondaryColor:!0,style:{fontSize:15},children:(0,re.jsx)(A().sA,{id:"spacePermissionSettings.teamGuests.subtitle",defaultMessage:"Teamspace guests are billed as members and can access all pages in teamspaces they've been invited to."})})]})]}),a&&(0,re.jsx)(Is,{store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:r,guests:t})]}),(0,re.jsxs)("div",{style:{display:"flex"},children:[(0,re.jsx)(Kt().A,{open:d,onClick:()=>c(!d),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),(0,re.jsxs)("div",{style:{marginLeft:3},children:[(0,re.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,re.jsx)(J().A,{style:{fontSize:15},children:(0,re.jsx)(A().sA,{id:"spacePermissionSettings.pageGuests.title",defaultMessage:"Page guests"})}),(0,re.jsx)("span",{children:" "}),(0,re.jsx)(J().A,{isSecondaryColor:!0,style:{fontSize:15},children:t.filter((e=>e.isPageGuest&&!e.isTeamGuest)).length})]}),(0,re.jsx)(J().A,{isSecondaryColor:!0,style:{fontSize:15},children:(0,re.jsx)(A().sA,{id:"spacePermissionSettings.pageGuests.subtitle",defaultMessage:"Page guests are free but can only access pages they've been invited to."})})]})]}),d&&(0,re.jsx)(_s,{store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:r,guests:t})]})}function Ps(e){var t;let{store:s,recentlyRemovedMembersStore:i,membersFilter:n,sorts:r,setMembersSort:a}=e;const l=(0,o().O$)(i),d=(0,Qt().lh)({spaceId:s.id}),c=(0,Xt().A)(s),u=(0,o().O$)(ye().subscriptionDataStoreInstance),p=(0,mt().b)(u),m=c&&(null==d?void 0:d.subscription)&&p>0,g=(0,Yt().Q7)(s.id,d,p);return(0,re.jsxs)(re.Fragment,{children:[m&&(0,re.jsx)("div",{style:{margin:"24px 0px"},children:(0,re.jsx)(Tt().x,{quantityOfSpaceMembers:p,quantityOfPaidSeats:g,nextBillingDate:(null==d||null===(t=d.subscription)||void 0===t?void 0:t.currentPeriodEnd.toLocaleString({month:"short",day:"numeric",year:"numeric"}))??""})}),(0,re.jsx)(Gt,{group:"members",store:s,recentlyRemovedMembers:l,query:n,sort:r.members||{by:"name",asc:!1},setSort:a,isLocal:p<=100})]})}function Bs(e){let{members:t,isMobile:s,store:a,inviteLinkCode:l,spacePermissionsSettingsStore:d,recentlyRemovedMembersStore:c}=e;const u=(0,o().K8)((()=>{const e=it().A.state.shouldUseEdgeCache,t=nt().default.checkGate({gateName:"edge_cache_settings"});return e&&t}),[]),p=(0,n().v3)(),g=(0,A().tz)(),h=(0,r().DP)(),{membersFilter:f,sorts:S}=(0,o().K8)((()=>({membersFilter:d.state.membersFilter,sorts:d.state.sorts})),[d]),y=(0,i.useCallback)((e=>{d.update((t=>({...t,sorts:{...t.sorts,members:{group:"members",by:e.by,asc:e.asc}}})))}),[d]);return s?(0,re.jsx)(Ms,{store:a,members:t}):(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(_t()._A,{spaceStore:a,inviteLinkCode:l,spacePermissionsSettingsStore:d,shouldUseEdgeCache:u}),(0,re.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:[(0,re.jsx)(ys,{store:a}),(0,re.jsx)(K().A,{placeholder:g.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,m().q)(ms(h)),showClearButton:!0,format:K().C.Small,value:f,style:Zt,onChange:e=>{d.setState({...d.state,membersFilter:e.target.value,limitMembers:!0})},onClick:()=>{C().Z9(p,{current_tab:ot().d.Members})}})]}),u?(0,re.jsx)(Ps,{store:a,recentlyRemovedMembersStore:c,membersFilter:f,sorts:S,setMembersSort:y}):(0,re.jsx)(Cs,{store:a,spacePermissionsSettingsStore:d,recentlyRemovedMembersStore:c,members:t})]})}function Rs(e){let{guests:t,store:s,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:l}=e;const d=(0,n().v3)(),c=(0,A().tz)(),u=(0,r().DP)(),p=(0,o().K8)((()=>s.canAdmin()),[s]),g=(0,o().O$)(l),h=(0,o().K8)((()=>it().A.state.shouldUseEdgeCache),[]),{guestsFilter:f,sorts:S}=(0,o().K8)((()=>({guestsFilter:a.state.guestsFilter,sorts:a.state.sorts})),[a]),y=(0,i.useCallback)((e=>{a.update((t=>({...t,sorts:{...t.sorts,guests:{group:"guests",by:e.by,asc:e.asc}}})))}),[a]),x=d.currentUser.id,b=s.id,v=(0,gt()._X)({name:"internal_guests",spaceId:b,userId:x,amount:0}),w=(0,o().O$)(ye().subscriptionDataStoreInstance),j=(0,Je().T)(w),I=(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.deeplinkCard.title",defaultMessage:"Change who can invite guests in the <bold>Security</bold> tab",values:{bold:e=>(0,re.jsx)("span",{style:{fontWeight:k().Wy.semibold},children:e})}}),_=v&&(0,bt().N9)(v,{available:()=>p?(0,re.jsx)(kt().A,{icon:yt().h,title:I,deeplinkTab:{currentTab:"security",defaultSubtab:void 0}}):null,unavailable:e=>{let{limit:t,upsell:s}=e;return p?"product"===s.type||"contact_sales"===s.type?(0,re.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,re.jsx)(Wt().I,{children:(0,re.jsx)(At().l,{iconGroup:ft().A,display:"inline",tint:"yellow",label:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.title",defaultMessage:"Your workspace is over the {limit}-guest limit",values:{limit:t.total}}),description:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To manage guest seats, <saleslink>reach out to sales</saleslink>.",values:{saleslink:e=>(0,re.jsx)(ke().A,{onClick:()=>(0,Ht().lK)({initialQuestion:"manage_guests",openedFrom:"permissions_guest_limit_banner"}),children:e})}})})})}):"contact_account_manager"===s.type?(0,re.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,re.jsx)(Wt().I,{children:(0,re.jsx)(At().l,{iconGroup:ft().A,display:"inline",tint:"yellow",label:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.title",defaultMessage:"Your workspace is over the {limit}-guest limit",values:{limit:t.total}}),description:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.description.sales_assisted",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, reach out to your account manager."})})})}):(0,M().HB)(s):null}}),T=(0,o().K8)((()=>(0,$e().Qd)()),[]);return 0===j?(0,re.jsx)(kt().A,{icon:yt().h,title:p?(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.deeplinkCard.noGuests.title",defaultMessage:"<bold>Your workspace has no guests.</bold> Change who can invite guests in the <bold>Security</bold> tab.",values:{bold:e=>(0,re.jsx)("span",{style:{fontWeight:k().Wy.semibold},children:e})}}):void 0,deeplinkTab:p?{currentTab:"security",defaultSubtab:void 0}:void 0}):(0,re.jsxs)(re.Fragment,{children:[_,T?(0,re.jsx)(Ts,{store:s,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:l,guests:t}):h?(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:(0,re.jsx)(K().A,{placeholder:c.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,m().q)(ms(u)),showClearButton:!0,format:K().C.Small,value:f,style:Zt,onChange:e=>{a.setState({...a.state,guestsFilter:e.target.value,limitGuests:!0})},onClick:()=>{C().Z9(d,{current_tab:ot().d.Guests})}})}),(0,re.jsx)(Gt,{group:"guests",store:s,recentlyRemovedMembers:g,query:f,sort:S.guests||{by:"name",asc:!1},setSort:y,isLocal:j<=100})]}):(0,re.jsx)(_s,{store:s,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:l,guests:t})]})}const Ds={maxWidth:275,borderRadius:30},Ns={marginTop:8},Ls={maxWidth:160},Us=50;function Os(e){const{store:t,isMobile:l,unreadAccessRequests:c}=e,u=(0,n().v3)(),p=(0,o().uB)(void 0,ot().A),m=(0,o().uB)(void 0,a().default),g=(0,pt().o)({spaceId:t.id});(0,s(852507).l)((()=>{!function(e){rt().A.state.open&&"members"===rt().A.state.currentTab&&rt().A.state.defaultSubtab&&(e.setState({...e.state,currentTab:rt().A.state.defaultSubtab}),rt().A.setState({...rt().A.state,defaultSubtab:void 0}))}(p),async function(e,t,s){if(!t.canAdmin())return;const i=await P().callApi({eventName:"getRecentlyRemovedUsers",environment:e,data:{spaceId:t.id}});if("failed"===i.type)throw R().Qg(i),i;s.setState(i.data.recentlyRemovedMembers)}(u,t,m)}));const[{value:h}]=(0,d().Yb)((async()=>{const e=await P().callApi({eventName:"getAccessRequests",environment:u,data:{parentTable:"space",parentId:t.id,size:100,status:"pending"}});if("failed"===e.type)return[];const i=e.data.accessRequestIds;return await s(746970).si(u,t,i)}),[u,t],{throttle:1e3}),f=(0,o().K8)((()=>!s(227440).A.state.online),[]),S=(0,o().O$)(ye().subscriptionDataStoreInstance),y=(0,o().K8)((()=>S?Se().Be(S):[]),[S]),x=(0,o().K8)((()=>!!S&&j().Si(y.map((e=>fe().LU.createChildStore(t,{table:b().oo,id:e.userId}).isReady())))),[t,S,y]),w=(0,o().K8)((()=>y.filter(v().c7)),[y]),I=(0,o().K8)((()=>y.filter(v().QE)),[y]),_=(0,o().K8)((()=>(0,$e().Qd)()),[]),T=(0,o().K8)((()=>it().A.state.shouldUseEdgeCache),[]),{tabs:B,selectedTabIndex:D,currentTab:N}=(0,o().K8)((()=>{const e=Zs(u,I,t),s=e.map((e=>(0,re.jsx)(Fs,{tab:e,unreadAccessRequests:c,accessRequestRenderValues:h},e))),i=p.state.currentTab;return{tabs:s,selectedTabIndex:e.indexOf(i),currentTab:i}}),[u,I,t,p,c,h]),L=(0,i.useCallback)((e=>{!function(e,t,s,i,n){const o=Zs(s,t,i)[e];switch(o){case ot().d.Members:C().K4(s,{tab:"members"});break;case ot().d.Groups:C().K4(s,{tab:"groups"});break;case ot().d.Guests:C().K4(s,{tab:"guests"});break;case ot().d.Reprovisioning:C().K4(s,{tab:"reprovisioning"});break;case ot().d.Requests:C().K4(s,{tab:"requests"});break;default:(0,M().HB)(o)}n.state.currentTab===ot().d.Requests&&o!==ot().d.Requests&&at().A.reset();gi(o,n)}(e,I,u,t,p)}),[I,u,t,p]),U=(0,r().IS)((()=>({tabBarMenuItem:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14,overflowY:void 0,overflowX:void 0},tabTitle:{fontSize:16},labelContainer:{display:"flex",flexDirection:"column",gap:8,marginBottom:20},peopleTabTitleContainer:{display:"flex",alignItems:"center",gap:7},peopleTabTitle:{fontWeight:k().Wy.medium,fontSize:17},peopleSubtitle:{fontSize:15}})),[]);if(f)return(0,re.jsx)(Gs,{});if(!S||!x||void 0===h)return(0,re.jsx)("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,re.jsx)(W().A,{})});if(l)return(0,re.jsx)(Es,{store:t,members:w,spacePermissionsSettingsStore:p,recentlyRemovedMembersStore:m});const O=(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(s(987017).Ay,{tabs:B,selectedIndex:D,onChange:L,style:U.tabBarMenuItem,tabTitleStyle:U.tabTitle}),_&&(0,re.jsxs)("div",{style:U.labelContainer,children:[(0,re.jsxs)("div",{style:U.peopleTabTitleContainer,children:[(0,re.jsx)(J().A,{style:U.peopleTabTitle,children:(0,re.jsx)(A().sA,{id:"spaceBasicSettings.people.title",defaultMessage:"People"})}),(0,re.jsx)(Me().A,{href:(0,Xe().xS)("guides.members"),analyticsFrom:"members_settings"})]}),(0,re.jsx)(J().A,{isSecondaryColor:!0,style:U.peopleSubtitle,children:(0,re.jsx)(A().sA,{id:"spaceBasicSettings.people.subtitle",defaultMessage:"Manage members, external guests, groups and permissions."})})]}),(0,re.jsx)(ss,{store:t,currentTab:N,members:w,inviteLinkCode:g,guests:I,spacePermissionsSettingsStore:p,recentlyRemovedMembersStore:m,accessRequestRenderValues:h})]});return T?(0,re.jsx)("div",{style:{padding:"36px 60px",display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:O}):(0,re.jsx)(Ie().Ay,{children:O})}function Es(e){const{store:t,members:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:n}=e,r=(0,o().K8)((()=>t.canEditMembership()),[t]),a=ni();return(0,re.jsxs)(re.Fragment,{children:[r&&(0,re.jsxs)(X().A,{shouldShowBottomDivider:!0,children:[(0,re.jsx)(ui,{store:t}),(0,re.jsx)("div",{style:a,children:(0,re.jsx)(pi,{store:t,isMobile:!0,spacePermissionsSettingsStore:i})})]}),(0,re.jsx)(X().A,{children:(0,re.jsx)(vi,{isMobile:!0,store:t,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:n,members:s})})]})}function Fs(e){let{tab:t,accessRequestRenderValues:s,unreadAccessRequests:i}=e;const a=(0,n().v3)(),l=(0,o().K8)((()=>Js(a)),[a]),d=(0,o().K8)((()=>se().A.state.permissionGroupsAndMemberCounts.length),[]),c=(0,o().K8)((()=>(0,$e().Qd)()),[]),u=(0,o().O$)(ye().subscriptionDataStoreInstance),p=(0,Je().T)(u),m=(0,mt().b)(u),g=(0,r().IS)((e=>({lightTextColor:{color:e.lightTextColor}})),[]);switch(t){case ot().d.Members:return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members"}),(0,re.jsx)("span",{children:" "}),(0,re.jsx)("span",{style:g.lightTextColor,children:m})]});case ot().d.Groups:return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(A().sA,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),l&&(0,M().O9)(d)&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("span",{children:" "}),(0,re.jsx)("span",{style:g.lightTextColor,children:d})]})]});case ot().d.Guests:return(0,re.jsxs)(re.Fragment,{children:[c?(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.title",defaultMessage:"External"}):(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests"}),(0,re.jsx)("span",{children:" "}),(0,re.jsx)("span",{style:g.lightTextColor,children:p})]});case ot().d.Reprovisioning:return(0,re.jsx)(A().sA,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"});case ot().d.Requests:return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(A().sA,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests"}),(0,re.jsx)("span",{children:" "}),(0,re.jsx)("span",{style:g.lightTextColor,children:(0,re.jsx)(mi,{accessRequestRenderValues:s})}),(0,re.jsx)(oi,{unreadAccessRequests:i})]});default:(0,M().HB)(t)}}const Vs=i.memo(Os);function qs(){const e=ye().subscriptionDataStoreInstance.state;return Boolean(e&&Se().Fq(e))}function Gs(){return(0,re.jsx)(Ie().Ay,{children:(0,re.jsx)(J().A,{isSmall:!0,style:{textAlign:"center"},children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."})})})}function zs(){return(0,re.jsx)("div",{style:{marginTop:24,marginBottom:24},children:(0,re.jsx)(Me().A,{title:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.helpButton.caption",defaultMessage:"Learn about adding members to your workspace"}),href:(0,Xe().xS)("guides.members"),analyticsFrom:"members_settings"})})}function Ks(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?(0,c().m)({...s,transform:"rotate(180deg)"}):(0,c().m)(s)}function Ws(e){let{userStore:t,restorationStatus:s}=e;return(0,re.jsx)(st().A,{actorStore:t,restorationStatus:s})}function Hs(e){let{user:t,userPermissionGroupIds:s}=e;return"none"!==t.role?(0,re.jsx)(Ke().Ay,{memberId:t.userId,userPermissionGroupIds:s}):null}function $s(e){return Boolean(e.getKeyStore("invite_link_enabled").getValue())}function Ys(e,t){var s;return t.canAdmin()&&(0,gt().zD)(e,{name:"content_reprovisioning",spaceId:t.id,userId:null===(s=e.currentUser)||void 0===s?void 0:s.id})}function Qs(e){return e.canEditMembership()&&(0,$e().x3)()}function Xs(e){let{store:t}=e;return(0,o().K8)((()=>L().CU(t)),[t])?(0,re.jsx)(J().A,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,re.jsx)(A().sA,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})}):(0,re.jsxs)("div",{children:[(0,re.jsx)(J().A,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:6},children:(0,re.jsx)(A().sA,{id:"spaceBasicSettings.membersTab.manageMembersDescriptionText",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace automatically.",values:{setupdomainlink:e=>(0,re.jsx)(ke().A,{onClick:()=>{rt().A.setState({...rt().A.state,currentTab:"settings",defaultSubtab:void 0})},children:e})}})}),(0,re.jsx)(J().A,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,re.jsx)(A().sA,{id:"spaceBasicSettings.membersTab.payPerMemberCaption",defaultMessage:"You will be charged for each member added. Visit <billingguidelink>our guide</billingguidelink> for more information on how we bill.",values:{billingguidelink:e=>(0,re.jsx)(ke().A,{href:(0,Xe().xS)("guides.billingGuide"),children:e})}})})]})}function Zs(e,t,s){return[ot().d.Members,ot().d.Groups,ot().d.Guests,...Ys(e,s)?[ot().d.Reprovisioning]:[],...Qs(s)?[ot().d.Requests]:[]]}function Js(e){return Se().vl(e)&&qs()}function ei(e){let{store:t}=e;const s=(0,n().v3)();return(0,o().K8)((()=>t.isDefined()),[t])?(0,re.jsx)(A().sA,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink",defaultMessage:"You can <resetlink>reset the link</resetlink> for all space members to generate a new invite link.",values:{resetlink:e=>(0,re.jsx)(ke().A,{onClick:()=>{R().ui({message:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset the invite link for all space members? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:R().zw,items:[{label:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await P().callApi({eventName:"refreshInviteLink",environment:s,data:{spaceId:t.id}}),dt().Ow(s)}}]})},children:e})}}):null}function ti(e){let{inviteLinkUrl:t,isMobile:s}=e;const i=(0,n().v3)(),{mobileNative:o}=i,r=(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"}),a=async()=>{const e=await B().R.clipboardActions.load();e.copyString({environment:i,stringValue:t,copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),(0,T().b)(i)},l=()=>{o&&o.share(t),(0,T().b)(i)};return s?(0,re.jsxs)("div",{children:[(0,re.jsx)(K().A,{type:"text",format:K().C.Default,value:t,disabled:!0}),o?(0,re.jsx)(Y().A,{size:"lg",onClick:l,style:{marginTop:10,width:"100%"},children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.spaceMembers.inviteLink.shareButton",defaultMessage:"Share link"})}):(0,re.jsx)(Y().A,{size:"lg",onClick:a,style:{marginTop:10,width:"100%"},children:r})]}):(0,re.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",marginTop:12},children:[(0,re.jsx)(K().A,{type:"text",format:K().C.Default,value:t,disabled:!0,style:{borderTopRightRadius:0,borderBottomRightRadius:0,width:"calc(100% - 90px)",height:32}}),(0,re.jsx)(Q().A,{onClick:a,style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},size:"lg",children:r})]})}function si(e){let{group:t,user:s,userStore:i,store:o}=e;const r=(0,A().tz)(),a=(0,n().v3)();return(0,re.jsx)(q().Ay,{popupType:q().z7.Popup,renderOrigin:e=>(0,re.jsx)(z().A,{...e,icon:u()._,iconStyle:{height:14,width:14},ariaLabel:r.formatMessage({id:"spacePermissionsSettings.externalTab.userThreeDotMenu.ariaLabel",defaultMessage:"Convert to member or remove from workspace"})}),render:e=>{const n=[{key:"convertToMember",render:e=>(0,re.jsx)(V().A,{...e,icon:(0,g().V)({height:17,width:17}),title:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.title",defaultMessage:"Convert to member"}),shouldWrapCaption:!0,caption:"team_guests"===t&&(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.caption",defaultMessage:"Workspace members are not restricted to specific teamspaces"})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e,o=qs()?"read_and_write":"editor";R().ui({message:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.message",defaultMessage:"Are you sure you want to convert this user into a workspace member?"}),description:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.description",defaultMessage:"This is a billable event."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{R().zw(),n.close()},items:[{label:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.confirm",defaultMessage:"Convert to workspace member"}),color:"blue",onAccept:async()=>{n.close(),await U().P({environment:s,guestUserStore:i,role:o,store:t,isConvertToAdmin:!qs(),origin:"page_or_teamspace_guest_three_dot_menu"})}}]})}({user:s,userStore:i,parent:e},o,a)},{key:"removeFromWorkspace",render:e=>(0,re.jsx)(V().A,{...e,icon:(0,p()._)({height:17,width:17,color:w().Ay.red}),title:(0,re.jsx)("span",{style:{color:w().Ay.red},children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.title",defaultMessage:"Remove from workspace"})})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e;R().ui({message:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.message",defaultMessage:"Are you sure you want to remove this user from the workspace?"}),description:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.description",defaultMessage:"This action will completely remove the user from the workspace, including any teamspaces and pages they have access to."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{R().zw(),n.close()},items:[{label:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.confirm",defaultMessage:"Remove from workspace"}),color:"red",onAccept:async()=>{n.close(),await U().D({environment:s,guestUserStore:i,store:t})}}]})}({user:s,userStore:i,parent:e},o,a)}],r=[{key:"team section",render:e=>(0,re.jsx)(X().A,{...e}),items:n}];return(0,re.jsx)(H().A,{menuType:me().gu.Popup,children:(0,re.jsx)($().Ay,{type:$().Oh.Vertical,sections:r,initialFocus:void 0,style:{minWidth:265}})})}})}function ii(e){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}}function ni(){const{WindowSizeStore:e}=(0,n().v3)(),t=(0,o().K8)((()=>e.getSafePaddingRightCSS(14)),[e]);return(0,r().IS)((e=>({mobileMenuItem:{display:"flex",paddingTop:14,paddingBottom:14,paddingLeft:14,paddingRight:t,background:e.cardContentBackground}})),[t]).mobileMenuItem}function oi(e){let{unreadAccessRequests:t}=e;const s=(0,r().DP)();return t&&t>0?(0,re.jsx)(Pe().m,{color:s.redBadgeBackground,style:{marginLeft:6}}):null}function ri(){const e=(0,A().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});D().m({message:e.updatingPermissions})}function ai(){D().V()}async function li(e,t,s,i,n){const o=n.currentUser.id;if(e.userId!==o||"none"!==t)ri(),"none"===t?(await P().callApi({eventName:"removeUsersFromSpace",environment:n,data:{userIds:[e.userId],spaceId:i.id,removePagePermissions:!0,revokeUserTokens:!1}}),await dt().Ow(n)):O().createAndCommit({userAction:"SpacePermissionsSettings.handleMemberPermissionRoleChange",environment:n,canUndo:!0,perform:s=>N().dy({environment:n,spaceStore:i,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:s,from:"space_permission_setting_table"})}),ai();else{await L().ev({environment:n,spaceId:i.id,userSettingsStore:s})&&(_().KX(n,{invite_origin:"workspace_leave",domainType:(0,Ye().FX)(),new_workspace_member_count:-1,new_workspace_member_ids:[o]}),rt().A.setState({...rt().A.state,open:!1}))}}function di(e){let{buttonStyle:t,store:s}=e;const r=(0,n().v3)(),a=(0,o().K8)((()=>s.canEditMembership()),[s]),l=(0,o().K8)((()=>!a&&!s.getDisableMembershipRequests()&&(0,$e().x3)()),[a,s]),d=(0,o().K8)((()=>qs()),[]),c=(0,i.useCallback)((()=>{(0,tt().q)(r)}),[r]);return l?(0,re.jsx)(et().cx,{store:s,analyticsFrom:"space_settings_add_members",origin:(0,re.jsx)(Q().A,{size:"lg",onClick:c,children:(0,re.jsx)(A().sA,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,re.jsxs)("div",{style:{display:"flex"},children:[(0,re.jsx)(We().H,{disabled:!a,store:s,onInviteClick:ri,onInviteComplete:ai,isSubscribed:d,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:t,analyticsFrom:"space_settings_add_members"}),(0,re.jsx)(He().R,{inviteOrigin:"space_setting_slack_imports",canEditPermission:a,onInviteClick:ri,onInviteComplete:ai})]})}function ci(e){let{member:t,store:s}=e;const i=(0,n().v3)(),r=(0,A().tz)(),a=i.currentUser.id,{currentUserSettingsStore:l,currentSpaceStore:d}=(0,o().K8)((()=>{const{currentUserSettingsStore:e,currentSpaceStore:t}=Le().default.state;return{currentUserSettingsStore:e,currentSpaceStore:t}}),[]),c=(0,o().K8)((()=>function(e,t){const s=e.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),i=(0,Qe().Qu)();return j().oE(y().Gb.map((e=>{if(i||"membership_admin"!==e)return{role:e,disabledInfo:!t.canAdmin()&&y().EH(e)?{isDisabled:!0,disabledMessage:s}:void 0}})))}(r,s)),[r,s]),u=(0,o().K8)((()=>!(s.canAdmin()||s.canEditMembership()&&(y().NB(t.role)||t.userId===a))),[a,t,s]);return l?(0,re.jsx)(Ce().Ay,{role:t.role,table:x().NX,type:"user_permission",disabled:u,isUserPermission:t.userId===a,upgradeButtonName:"space_permission_item",availableRoleItems:c,onChange:async e=>{await li(t,e,l,s,i)},buttonStyle:Ls,onRemoveMemberClick:async()=>{let e,n;if(ut().R()&&(n=h().JW(),e=await(0,ht().G)({environment:i,contractionSurveyId:n}),!e))return null;await(async()=>await(0,ct().B)(i,t.userId,null==d?void 0:d.id))()&&(await(async e=>{await li(t,"none",l,s,i),_().ej(i,{member_user_id:t.userId,member_role:t.role,contraction_survey_id:e,is_space:!0,domainType:(0,Ye().FX)(),new_workspace_member_count:-1})})(n),e&&lt().x(i))}}):null}function ui(e){let{store:t}=e;const s=(0,r().DP)(),i=ni();return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{style:i,children:(0,re.jsx)(di,{store:t,buttonStyle:{flex:1}})}),(0,re.jsx)("div",{style:{borderBottom:`1px solid ${s.regularDividerColor}`}})]})}function pi(e){let{store:t,isMobile:s,spacePermissionsSettingsStore:i}=e;const r=(0,n().v3)(),a=(0,Te().Gg)({spaceStore:t}),l=(0,pt().o)({spaceId:t.id}),d=(0,o().K8)((()=>function(e,t,s){if(void 0===s)return;const i=e.id;return s?(0,Ze().X$)(t,i,s):void 0}(t,r,l)),[r,t,l]),c=(0,o().K8)((()=>$s(t)),[t]);return a&&d?(0,re.jsxs)("div",{children:[(0,re.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer"},children:[(0,re.jsxs)("div",{style:{marginRight:8,flexGrow:1},children:[(0,re.jsx)(_e().A,{children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.spaceMembers.inviteLink.title",defaultMessage:"Invite link"})}),(0,re.jsxs)(J().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"},children:[(0,re.jsx)(A().sA,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption",defaultMessage:"Share this secret link to invite people to this workspace. Only users who can invite members can see this."})," ",!s&&(0,re.jsx)(ei,{store:t})]})]}),(0,re.jsx)("div",{style:{marginTop:5},children:(0,re.jsx)(Z().A,{on:c,onClick:()=>function(e,t){const s=!$s(e);I().OE(t,{enabled:s}),O().createAndCommit({userAction:"SpacePermissionsSettings.handleInviteLinkClick",environment:t,canUndo:!0,perform:t=>{L().Xk({transaction:t,spaceStore:e,inviteLinkEnabled:Boolean(s)})}})}(t,r)})})]}),i&&c&&d&&(0,re.jsx)("div",{style:s?{marginTop:5}:void 0,children:(0,re.jsx)(ti,{isMobile:s,inviteLinkUrl:d})}),(0,re.jsx)(G().A,{size:40})]}):null}function mi(e){let{accessRequestRenderValues:t}=e;const s=(0,o().K8)((()=>t?t.filter((e=>"pending"===e.accessRequest.status)).length:0),[t]);return t?(0,re.jsx)("span",{children:s}):(0,re.jsx)("span",{})}function gi(e,t){t.setState({...t.state,currentTab:e})}function hi(e,t,s){const i=s.state.sorts[e];let n;n=!(!i||i.by!==t)&&i.asc,s.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!n}}})))}function fi(e){let{groupIds:t,store:s,spacePermissionsSettingsStore:i}=e;return(0,re.jsx)(ae,{spaceStore:s,groupIds:t,onGroupClick:()=>{gi(ot().d.Groups,i)}})}function Si(e){let{group:t,user:s,userStore:i,store:n}=e;const r=(0,o().K8)((()=>(0,$e().Qd)()),[]),a=(0,o().K8)((()=>qs()),[]);return"none"===s.role?r&&"team_guests"===t?(0,re.jsx)(ze,{teamGuest:s}):(0,re.jsx)(we,{store:n,guest:s,guestStore:i,isSubscribed:a,hideActionButtons:r}):(0,re.jsx)(ci,{store:n,member:s})}function yi(e){let{members:t,store:s}=e;const i=(0,r().IS)((e=>({container:{display:"flex",alignItems:"center",padding:10,paddingRight:2,gap:5,justifyContent:"space-between",width:"100%",borderBottom:`1px solid ${e.lightDividerColor}`,background:e.cardContentBackground},memberContainer:{flexShrink:1,minWidth:50},permissionContainer:{textAlign:"center",marginLeft:"auto",flexShrink:0}})),[]),n=(0,o().K8)((()=>nt().default.checkGate({gateName:"dont_load_users"})?[]:t.map((e=>[e,fe().LU.createChildStore(s,{table:b().oo,id:e.userId})]))),[t,s]);return(0,re.jsx)(re.Fragment,{children:n.map((e=>{let[t,n]=e;return(0,re.jsxs)("div",{style:i.container,children:[(0,re.jsx)("div",{style:i.memberContainer,children:(0,re.jsx)(Ws,{userStore:n})}),(0,re.jsx)("div",{style:i.permissionContainer,children:(0,re.jsx)(Si,{store:s,group:"members",user:t,userStore:n})})]},t.userId)}))})}function xi(e){let{group:t,spaceMembers:s,store:r,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:l}=e;const c=(0,n().v3)(),u=(0,o().K8)((()=>a.state.sorts[t]),[t,a]),p={key:"user",header:(0,re.jsxs)(E().A,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{hi(t,"name",a)},style:{display:"flex",alignItems:"center"},children:[(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),u&&"name"===u.by&&(0,re.jsx)(Ks,{up:u.asc})]}),style:{width:"45%"}},m={key:"groups",header:(0,re.jsx)(E().A,{disabled:!0,ignoreLocalHoverState:!0,style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"})}),style:{width:"15%"}},g={key:"teams",header:(0,re.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.teamsColumn.header",defaultMessage:"Teamspaces"})}),style:{width:"20%",textAlign:"center"}},h={key:"access_level",header:(0,re.jsxs)(E().A,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{hi(t,"role",a)},style:{display:"flex",alignItems:"center",paddingLeft:8},children:[(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),u&&"role"===u.by&&(0,re.jsx)(Ks,{up:u.asc})]}),style:{width:"20%",textAlign:"center"}},f={key:"pages",header:(0,re.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})}),style:{width:"20%",textAlign:"center"}},y={key:"three_dot",header:(0,re.jsx)(E().A,{disabled:!0,ignoreLocalHoverState:!0})},x=(0,o().K8)((()=>Js(c)&&"team_guests"!==t&&"guests"!==t),[c,t]),v=(0,o().K8)((()=>("team_guests"===t||"guests"===t)&&(0,$e().Qd)()&&r.canEditMembership()),[t,r]),w=(0,o().K8)((()=>(0,De().zI)()>0),[]);let j="members"===t&&w?[p,g,h]:v?[p,f,y]:[p,f];x&&(j=[...j.slice(0,1),m,...j.slice(1)]);const M=(0,o().O$)(l),k=(0,o().K8)((()=>s.map((e=>({member:e,store:fe().LU.createChildStore(r,{table:b().oo,id:e.userId})}))).filter((e=>e.store.isDefined()))),[s,r]),C=(0,o().K8)((()=>Le().default.state.currentSpaceStore),[]),[{value:I}]=(0,d().Yb)((async()=>{if(!C)return;const e=await P().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:c,data:{userIds:k.map((e=>e.member.userId)),spaceId:C.id},headers:(0,S().WS)({cellId:void 0,spaceId:C.id})});return"success"===e.type?e.data.userToGroupMap:void 0}),[C,c,k]);return(0,re.jsx)(Be().A,{columns:j,rows:k.map((e=>{var s;const{member:n,store:o}=e,l=I&&I[n.userId],d=Array.isArray(M)?null===(s=M.find((e=>e.userId===n.userId)))||void 0===s?void 0:s.restorationStatus:void 0,c=[(0,re.jsx)(i.Fragment,{children:(0,re.jsx)(Ws,{userStore:o,restorationStatus:d})},"member")];return x&&c.push((0,re.jsx)(i.Fragment,{children:(0,re.jsx)(fi,{store:r,spacePermissionsSettingsStore:a,groupIds:l||[]})},"groups")),"members"===t&&w&&c.push((0,re.jsx)(i.Fragment,{children:(0,re.jsx)(Hs,{user:n,userPermissionGroupIds:new Set(l??[])})},"teams")),c.push((0,re.jsx)(i.Fragment,{children:(0,re.jsx)(Si,{store:r,group:t,user:n,userStore:o})},"user-permission")),v&&c.push((0,re.jsx)(i.Fragment,{children:(0,re.jsx)(si,{group:t,user:n,userStore:o,store:r})},"three-dot")),{key:n.userId,columns:c}}))})}function bi(e){let{members:t,store:s,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:d}=e;const c=(0,A().tz)(),u=(0,r().DP)(),p=(0,n().v3)(),g=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitMembers:!1})}(a)),[a]),{membersFilter:h,limitMembers:S}=(0,o().K8)((()=>{const{membersFilter:e,limitMembers:t}=a.state;return{membersFilter:e,limitMembers:t}}),[a]),x=(0,o().K8)((()=>function(e,t,s,i){return t&&t.length>0?(0,l().Ay)(t,e,(e=>{const t=fe().LU.createChildStore(s,{table:b().oo,id:e.userId});return t.isDefined()?t.getSearchName(i):""})):e}(t,h,s,c)),[t,h,s,c]),v=(0,o().K8)((()=>function(e,t,s,i,n){const o=n.state.sorts[e];if(!o)return t;switch(o.by){case"role":return t.sort(((e,t)=>(y().TE[t.role]-y().TE[e.role])*(o.asc?-1:1)));case"name":return t.map((e=>({user:e,store:fe().LU.createChildStore(s,{table:b().oo,id:e.userId})}))).sort(((e,t)=>{const s=i.formatMessage(f().Fvx.messages.anonymousPlaceholder),n=e.store.getFullName(i)||s,r=t.store.getFullName(i)||s;return n.localeCompare(r)*(o.asc?1:-1)})).map((e=>e.user))}}("members",x,s,c,a)),[x,s,c,a]),w=S?v.slice(0,Us):v;return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{style:{marginRight:8,flexGrow:1},children:(0,re.jsx)(_e().A,{children:(0,re.jsx)(A().sA,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"})})}),(0,re.jsx)(Xs,{store:s}),(0,re.jsx)(G().A,{size:16,isHidden:!0}),(0,re.jsxs)("div",{children:[(0,re.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:[(0,re.jsx)(di,{store:s}),(0,re.jsx)(K().A,{placeholder:c.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,m().q)(ii(u)),showClearButton:!0,format:K().C.Small,value:h,style:Ds,onChange:e=>{a.setState({...a.state,membersFilter:e.target.value,limitMembers:!0})},onClick:()=>{C().Z9(p,{current_tab:ot().d.Members})}})]}),(0,re.jsx)(xi,{store:s,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:d,group:"members",spaceMembers:w}),v.length>Us&&S&&(0,re.jsx)(F().p,{isGray:!0,size:"xs",style:Ns,onClick:g,children:(0,re.jsx)(A().sA,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:v.length-Us}})})]})]})}function vi(e){let{members:t,isMobile:s,store:i,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:o}=e;return s?(0,re.jsx)(yi,{store:i,members:t}):(0,re.jsxs)("div",{children:[(0,re.jsx)(zs,{}),(0,re.jsx)(pi,{store:i,isMobile:s,spacePermissionsSettingsStore:n}),(0,re.jsx)(bi,{store:i,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:o,members:t})]})}},289251:(e,t,s)=>{s.d(t,{A:()=>y});var i=s(296540),n=()=>s(662303),o=()=>s(484714),r=()=>s(56366),a=()=>s(869190),l=()=>s(736501),d=()=>s(842599),c=()=>s(959013),u=()=>s(449506),p=()=>s(962730),m=()=>s(351360),g=()=>s(378765),h=()=>s(859428),f=()=>s(702723),S=s(474848);const y=function(e){let{emailDomainSettings:t}=e;const n=(0,o().v3)(),a=(0,r().uB)(void 0,s(40851).A),d=(0,i.useCallback)(((e,s,i)=>(0,S.jsx)(j,{emailDomainSettings:t,requestStore:a,error:e,result:s,ready:i})),[t,a]),c=(0,r().K8)((()=>m().default.state.currentUserStore),[]);return c?(0,S.jsx)(s(251126).A,{requestStore:a,request:{userId:c.id,expiryTime:Date.now()+l().f},performRequest:e=>async function(e,t){const s=await u().callApi({eventName:"getDataAccessConsent",environment:t,data:{}});if("failed"===s.type)throw s.error;return s.data}(0,n),render:d}):null};function x(e){return Boolean(e.prevent_granting_support_access)}function b(e){const t=(0,o().v3)(),{accessGranted:s,onClick:i,expiryTime:r,emailDomainSettings:l}=e,{device:d}=t;return(0,S.jsx)(f().A,{disabled:x(l),isMobile:d.isMobile,title:(0,S.jsx)(c().sA,{id:"personalSettings.supportSection.userDataConsentSettings.label",defaultMessage:"Support access"}),caption:s&&r?(0,S.jsx)(c().sA,{id:"userDataConsentSettings.accessGranted.label",defaultMessage:"You have granted Notion access to your account for support purposes until {expiryTime}.",values:{expiryTime:(0,a().W_)(r,"medium_with_time",n().locale)}}):(0,S.jsx)(c().sA,{id:"personalSettings.supportSection.userDataConsentSettings.message",defaultMessage:"Grant Notion support temporary access to your account so we can troubleshoot problems or recover content on your behalf. You can revoke access at any time."}),type:"toggle",isOn:s,onToggle:i})}function v(e){const{accessGranted:t,onClick:s,expiryTime:i,emailDomainSettings:n}=e,o=(0,r().K8)((()=>{var e;const t=null===(e=m().default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return t?(0,d().zN)(t):void 0}),[]);return(0,S.jsx)(h().A,{disableTooltip:!x(n),renderTooltip:()=>(0,S.jsx)(c().sA,{id:"userDataConsentSetting.disabledByOrganization",defaultMessage:"Granting support access has been disabled by your organization, {emailDomain}",values:{emailDomain:o}}),placement:p().W.Bottom,alignment:p().C.Center,render:e=>(0,S.jsx)("div",{...e,children:(0,S.jsx)(b,{emailDomainSettings:n,accessGranted:t,onClick:s,expiryTime:i})})})}async function A(e,t,s){const i=await u().callApi({eventName:"setDataAccessConsent",environment:t,data:e});if("success"===i.type&&i.data){const e=s.state;s.setState({...e,result:i.data})}}function w(e){let{emailDomainSettings:t,requestStore:s}=e;const n=(0,o().v3)(),a=(0,i.useCallback)((()=>async function(e,t,s){x(t)||await A({expiryTime:Date.now()+l().f},e,s)}(n,t,s)),[n,t,s]),d=(0,i.useCallback)((()=>async function(e,t,s){x(t)||await A({},e,s)}(n,t,s)),[n,t,s]),c=(0,r().K8)((()=>{var e;return null===(e=s.state.result)||void 0===e?void 0:e.expiryTime}),[s]),u=Boolean(c&&Number(c)>Date.now()),p=u?d:a;return(0,S.jsx)(v,{emailDomainSettings:t,accessGranted:u,onClick:p,expiryTime:c})}function j(e){let{error:t,result:s,ready:i,emailDomainSettings:n,requestStore:o}=e;const r=(0,c().tz)();return(0,S.jsx)(g().A,{loaded:i,spinnerSize:"sm",showSpinnerTimeout:600,children:t||!s?(0,S.jsx)("div",{children:r.formatMessage({id:"userDataConsent.render.error",defaultMessage:"Something went wrong"})}):(0,S.jsx)(w,{emailDomainSettings:n,requestStore:o})})}},304067:(e,t,s)=>{s.d(t,{G:()=>g});s(296540);var i=()=>s(130102),n=()=>s(959013),o=()=>s(496603),r=()=>s(252105),a=()=>s(231127),l=()=>s(7674),d=()=>s(107683),c=()=>s(49210),u=()=>s(775471),p=()=>s(841101),m=s(474848);async function g(e){const{environment:t,contractionSurveyId:s}=e;r().u4(t,{name:"contraction_survey_opened",args:{contractionSurveyId:s}});const o=await async function(e){const{iconGroup:t,options:s,title:i,description:o}=e;return await c().T.showAsyncModal((e=>{const r=new(p().a);return r.setOptions(s),(0,m.jsx)(d().s,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{type:"min",length:406},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,m.jsx)(l().tf,{header:(0,m.jsx)(l().YA,{iconAndTitle:(0,m.jsx)("div",{style:{padding:"0 24px"},children:(0,m.jsx)(l().ZQ,{iconGroup:t,title:i})}),description:o}),footer:(0,m.jsx)(l().aO,{layout:"vertical",primaryButtons:[{label:(0,m.jsx)(n().sA,{id:"contractionSurvey.continue",defaultMessage:"Continue"}),onClick:()=>e.resolve(r.toSurveyResult())}],secondaryButtons:[{buttonType:"dismiss"}]}),children:(0,m.jsx)(u().B,{store:r})})})}))}({iconGroup:i().u,title:(0,m.jsx)(n().sA,{id:"contractionSurvey.title",defaultMessage:"Why are you removing this member from your workspace?"}),description:(0,m.jsx)(n().sA,{id:"contractionSurvey.description",defaultMessage:"We'd love your input to make Notion better"}),options:h()});return o?r().u4(t,{name:"contraction_survey_completed",args:{contraction_survey_id:s,reasons:o.reasons,reason_indexes:o.reasonIndexes,reason_other:o.customTextByReason.other}}):r().u4(t,{name:"contraction_survey_dismissed",args:{contractionSurveyId:s}}),o}function h(){return[...(0,o().k4)([a().V.noLongerNeedAccess,a().V.noLongerWorkTogether,a().V.notUsingEnough,a().V.switching,a().V.switchingToAnotherWorkspace,a().V.tooExpensive]),a().V.other]}},309049:(e,t,s)=>{s.d(t,{A:()=>n});class i extends(()=>s(757695))().default{getInitialState(){return{count:0}}}const n=new i},318575:(e,t,s)=>{s.d(t,{U:()=>d,r:()=>l});s(898992),s(354520),s(672577);var i=()=>s(821062),n=()=>s(534177),o=()=>s(398194),r=()=>s(478525);const a={settingsVerifyWithPassword:r().xc.incorrectPassword,settingsVerifyWithSMS:r().xc.smsIncorrectCode,settingsVerifyWithTOTP:r().xc.totpIncorrectCode,settingsVerifyWithBackupCode:r().xc.backupCodeIncorrectCode};class l extends(()=>s(757695))().default{getInitialState(){return{step:"settingsUninitialized"}}}class d extends(()=>s(658921))()._{constructor(e,t){super(e,"settings"),this.service=void 0,this.service=t}settingsConfirmIdentityForPasswordSetting(){this.checkStep("settingsUninitialized")&&(this.store.setState({step:"settingsConfirmIdentity",source:"passwordSetting"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsConfirmIdentityForSettings(){this.checkStep(["settingsUninitialized","settingsDeleteSettings","settingsDisableMFA"])&&(this.store.setState({step:"settingsConfirmIdentity",source:"settings"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsVerifyPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithPassword(e).catch(this.handleUnexpectedError))}settingsForgotPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isForgotPasswordLoading:!0}),this.doForgotPassword(e).catch(this.handleUnexpectedError))}settingsChooseVerifyMethod(e){const t=this.checkStep("settingsVerifyChooseMFAMethod");if(!t)return;const s=e.mfaMethod;switch(s){case"sms":this.store.setState({...t,isSMSLoading:!0,chosenMfaSettingId:e.mfaSettingId}),this.doVerifyIdentitySendSMS({mfaSetting:e});break;case"totp":this.store.setState({mfaSetting:e,step:"settingsVerifyWithTOTP",isLoading:!1,source:t.source});break;case"backup_code":this.store.setState({step:"settingsVerifyWithBackupCode",isLoading:!1,source:t.source});break;default:(0,n().HB)(s)}}settingsTryAnotherMethod(){this.checkStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"])&&this.doTryAnotherMethod().catch(this.handleUnexpectedError)}settingsVerifyTOTP(e){const t=this.checkStep("settingsVerifyWithTOTP");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithTOTP(e).catch(this.handleUnexpectedError))}settingsVerifySMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithSMS(e).catch(this.handleUnexpectedError))}settingsVerifyResendSMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,resentStatus:"resending"}),this.doVerifyIdentityResendSMS(e).catch(this.handleUnexpectedError))}settingsVerifyBackupCode(e){const t=this.checkStep("settingsVerifyWithBackupCode");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithBackupCode({code:e}).catch(this.handleUnexpectedError))}settingsShow(e){const{refresh:t}=e,s=this.getCurrentStep();if("settingsUninitialized"===s.step)return this.settingsConfirmIdentityForSettings();t&&("settingsShowSettings"===s.step||"settingsInitialSetup"===s.step)&&(this.store.setState({step:"settingsLoadSettings"}),this.doLoadSettings().catch(this.handleUnexpectedError))}settingsUpdate(e){this.checkStep("settingsShowSettings")&&this.doUpdateSettings(e).catch(this.handleUnexpectedError)}passkeySettingsShow(){this.store.setState({step:"settingsPasskeyLoadSettings"}),this.doLoadPasskeySettings({nameNewSetting:!1}).catch(this.handleUnexpectedError)}settingsPasskeyAddSetting(e){this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"])&&this.doCreatePasskeySetting(e).catch(this.handleUnexpectedError)}settingsPasskeyRenameSetting(e){this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"])&&this.doRenamePasskeySetting(e).catch(this.handleUnexpectedError)}settingsDeletePasskeySetting(){const e=this.checkStep("settingsDeletePasskeySetting");e&&this.doDeletePasskeySetting({passkeyAuthenticatorId:e.passkeyAuthenticatorIdToDelete}).catch(this.handleUnexpectedError)}settingsConfirmDeletePasskeySetting(e){const t=this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"]);t&&this.store.setState({passkeys:t.passkeys,step:"settingsDeletePasskeySetting",passkeyAuthenticatorIdToDelete:e.passkeyAuthenticatorId})}settingsConfirmDelete(e){const t=this.checkStep("settingsShowSettings");if(!t)return;t.mfaSettings.find((t=>t.mfaSettingId===e.mfaSettingId));const s=t.mfaSettings.filter((e=>"totp"===e.mfaMethod||"sms"===e.mfaMethod));1===s.length?this.store.setState({step:"settingsDisableMFA",lastMFASetting:e}):this.store.setState({step:"settingsDeleteSettings",mfaSettings:t.mfaSettings,mfaSettingToDelete:e,isLoading:!1})}settingsDelete(){const e=this.checkStep("settingsDeleteSettings");e&&(this.store.setState({...e,isLoading:!0}),this.doDeleteSettings(e.mfaSettingToDelete.mfaSettingId).catch(this.handleUnexpectedError))}settingsConfirmDisableMFA(){this.checkStep("settingsShowSettings")&&this.store.setState({step:"settingsDisableMFA"})}settingsDisableMFA(){const e=this.checkStep("settingsDisableMFA");e&&(this.store.setState({step:"settingsConfirmIdentity",source:"disableMFA",lastMFASetting:e.lastMFASetting}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"settingsUninitialized"})}async doConfirmIdentity(){const e=await this.withStep("settingsConfirmIdentity",(()=>this.service.confirmIdentity()));if(!e)return;const{result:t,state:s}=e,i=t.status;switch(i){case"ready":this.store.setState({step:"settingsIdentityConfirmed",source:s.source});const e=s.source;"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(o().A.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,n().HB)(e);break;case"mfa":this.store.setState({step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings,source:s.source});break;case"password":this.store.setState({step:"settingsVerifyWithPassword",isLoading:!1,isForgotPasswordLoading:!1,source:"settings"});break;default:throw(0,n().HB)(i)}}async doForgotPassword(e){if(!e)return void this.store.setState({step:"settingsVerifyWithPassword",source:"settings",isLoading:!1,isForgotPasswordLoading:!1,error:r().xc.unexpectedError});const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.sendTemporaryPassword({email:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isForgotPasswordLoading:!1,alert:r().By.passwordResentLinkSent(e)});break;case"error":this.store.setState({...i,isForgotPasswordLoading:!1,error:r().xc.unexpectedError});break;default:return(0,n().HB)(s.status)}}async doVerifyIdentityWithPassword(e){const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.verifyIdentityWithPassword({password:e})));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithTOTP(e){const t=await this.withStep("settingsVerifyWithTOTP",(()=>this.service.verifyIdentityWithTOTP(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.verifyIdentityWithSMS(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityResendSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.sendSMS({mfaSettingId:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isLoading:!1,resentStatus:"resent",resentAt:Date.now()});break;case"error":this.store.setState({...i,resentStatus:"not-resent",error:r().xc.unexpectedError});break;default:return(0,n().HB)(s.status)}}async doVerifyIdentityWithBackupCode(e){const t=await this.withStep("settingsVerifyWithBackupCode",(()=>this.service.verifyBackupCode(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async handleVerifyIdentityResponse(e){const{status:t,state:s}=e;switch(t){case"match":const e=s.source;this.store.setState({step:"settingsIdentityConfirmed",source:s.source}),"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(o().A.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,n().HB)(e);break;case"incorrect":this.store.setState({...s,isLoading:!1,error:a[s.step]});break;case"error":this.store.setState({...s,isLoading:!1,error:r().xc.unexpectedError});break;default:return(0,n().HB)(t)}}async doTryAnotherMethod(){const e=await this.withStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e;t.settings.length>0?this.store.setState({...s,step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings}):this.store.setState({...s,error:r().xc.unexpectedError})}async doLoadSettings(){const e=await this.withStep(["settingsLoadSettings","settingsIdentityConfirmed"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e,i=s.step;switch(i){case"settingsIdentityConfirmed":case"settingsLoadSettings":t.settings.length>0?this.store.setState({step:"settingsShowSettings",mfaSettings:t.settings}):this.store.setState({step:"settingsInitialSetup"});break;default:return(0,n().HB)(i)}}async doVerifyIdentitySendSMS(e){const{mfaSetting:t}=e,s=await this.withStep("settingsVerifyChooseMFAMethod",(()=>this.service.sendSMS({mfaSettingId:t.mfaSettingId})));if(!s)return;const{result:i,state:o}=s;switch(i.status){case"ok":this.store.setState({mfaSetting:t,step:"settingsVerifyWithSMS",isLoading:!1,resentAt:0,resentStatus:"not-resent",source:o.source});break;case"error":break;default:return(0,n().HB)(i.status)}}async doUpdateSettings(e){const{mfaMethod:t,mfaSettingId:s}=e;if("totp"!==t)return;const n=await this.withStep("settingsShowSettings",(()=>this.service.renameSettings({mfaSettingId:s,friendlyName:e.friendlyName})));if(!n)return;const{result:o,state:a}=n;"saved"===o.status?o.settings.length>0&&!(0,i().A)(o,a.mfaSettings)?this.store.setState({step:"settingsShowSettings",mfaSettings:o.settings}):this.store.setState({...a,error:void 0}):this.store.setState({...a,error:"duplicate"===o.status?r().xc.totpDuplicateFriendlyName:"bad_friendly_name"===o.status?r().xc.totpBadFriendlyName:r().xc.totpEmptyFriendlyName})}async doLoadPasskeySettings(e){let{nameNewSetting:t=!1}=e;const s=await this.withStep(["settingsPasskeyLoadSettings","settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"],(()=>this.service.loadPasskeySettings()));if(!s)return;const{result:i,state:n}=s;this.store.setState({...n,step:t?"settingsPasskeyNameNewSetting":"settingsPasskeyShowSettings",passkeys:i.settings})}async doCreatePasskeySetting(e){const t=await this.withStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"],(()=>this.service.createPasskeySetting(e)));if(!t)return;const{result:s,state:i}=t;!0===s.created?await this.doLoadPasskeySettings({nameNewSetting:!0}):this.store.setState({...i,error:r().xc.unableToSavePasskey})}async doRenamePasskeySetting(e){const{passkeyAuthenticatorId:t,name:s}=e,n=await this.withStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"],(()=>this.service.renamePasskeySetting({passkeyAuthenticatorId:t,name:s})));if(!n)return;const{result:o,state:r}=n;o.settings.length>0&&!(0,i().A)(o.settings,r.passkeys)?this.store.setState({step:"settingsPasskeyShowSettings",passkeys:o.settings}):this.store.setState({...r,error:void 0})}async doDeletePasskeySetting(e){const t=await this.withStep("settingsDeletePasskeySetting",(()=>this.service.deletePasskeySetting(e)));if(!t)return;const{result:s,state:n}=t;s.settings.length>=0&&!(0,i().A)(s.settings,n.passkeys)?this.store.setState({step:"settingsPasskeyShowSettings",passkeys:s.settings}):this.store.setState({...n,error:void 0})}async doDisableMFA(){const e=await this.withStep("settingsIdentityConfirmed",(()=>this.service.disableMFA()));if(!e)return;const{result:t}=e;switch(t.status){case"ok":case"error":break;default:return(0,n().HB)(t.status)}}async doDeleteSettings(e){const t=await this.withStep("settingsDeleteSettings",(()=>this.service.deleteSettings(e)));if(!t)return;const{result:s}=t;this.store.setState({step:"settingsShowSettings",mfaSettings:s.settings})}}},332381:(e,t,s)=>{s.d(t,{L:()=>j});var i=s(296540),n=()=>s(484714),o=()=>s(56366),r=()=>s(842599),a=()=>s(576250),l=()=>s(959013),d=()=>s(534177),c=()=>s(848259),u=()=>s(449506),p=()=>s(705540),m=()=>s(246826),g=()=>s(755636),h=()=>s(72234),f=()=>s(317909),S=()=>s(144114),y=()=>s(351360),x=()=>s(864943),b=()=>s(347306),v=()=>s(963550),A=()=>s(702723),w=s(474848);function j(e){let{target:t}=e;const s=(0,n().v3)(),{desktopAppId:j}=(0,n().Y0)(),M=(0,o().K8)((()=>y().default.state.currentSpaceViewStore),[]),k=(0,o().K8)((()=>{var e,s,i,n;switch(t){case"notify_mobile":case"notify_desktop":case"notify_email":case"notify_email_always":return(null==M||null===(e=M.getKeyStore(t))||void 0===e?void 0:e.getValue())||!1;case"notify_email_digest":return(null==M||null===(s=M.getSettingsStore())||void 0===s||null===(s=s.getKeyStore(t))||void 0===s?void 0:s.getValue())||!1;case"notify_home_digest_email":return(null==M||null===(i=M.getSettingsStore())||void 0===i||null===(i=i.getKeyStore(t))||void 0===i?void 0:i.getValue())??(null==M||null===(n=M.getSettingsStore())||void 0===n||null===(n=n.getKeyStore("notify_email_digest"))||void 0===n?void 0:n.getValue())??!1;case"marketing_emails":case"notify_slack":case"desktop_badge":case"notify_slack_mention":case"notify_slack_all_activity":return!1;default:(0,d().HB)(t)}}),[M,t]),C=(0,i.useCallback)((()=>{if(M){const e=!k;"notify_email_digest"===t?h().T$({environment:s,newValue:e}):"notify_home_digest_email"===t?h().gI(s,e):f().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,canUndo:!0,perform:s=>{m().zv({store:M,data:{[t]:e},transaction:s})}}),"notify_slack"!==t&&"marketing_emails"!==t&&"desktop_badge"!==t&&c().DN(s,{is_on:e,target:t})}}),[M,k,t,s]),I=async()=>{const e=await u().callApi({eventName:"getAuthorizedEmailPreferenceCenterLink",environment:s,data:{}});if(e&&"success"===e.type&&e.data.preferenceCenterLink)return c().iE(s),g().f({environment:s,url:e.data.preferenceCenterLink});{const e=await(0,S().k_)(s),t=(0,r().j5)(e);return c().iE(s),g().f({environment:s,url:t})}},_=()=>{var e;null!==(e=p().electronApi)&&void 0!==e&&e.openExternalUrl&&p().electronApi.openExternalUrl(`x-apple.systempreferences:com.apple.preference.notifications?id=${j}`)};return"marketing_emails"===t?(0,w.jsx)(A().A,{type:"custom",isMobile:!0,title:(0,w.jsx)(v().A,{target:t}),caption:(0,w.jsx)(b().A,{target:t}),customButton:(0,w.jsx)(x().A,{size:"lg",onClick:I,icon:a().y,children:(0,w.jsx)(l().sA,{id:"notificationSettings.marketingEmails.manageSettingsButton",defaultMessage:"Manage settings"})}),disableSettingsItemClick:!0}):"desktop_badge"===t?(0,w.jsx)(A().A,{type:"custom",isMobile:!0,title:(0,w.jsx)(v().A,{target:t}),caption:(0,w.jsx)(b().A,{target:t}),customButton:(0,w.jsx)(x().A,{size:"lg",onClick:_,icon:a().y,children:(0,w.jsx)(l().sA,{id:"notificationSettings.desktopBadge.manageSettingsButton",defaultMessage:"Manage in System Settings"})}),disableSettingsItemClick:!0}):(0,w.jsx)(A().A,{isMobile:!0,title:(0,w.jsx)(v().A,{target:t}),caption:(0,w.jsx)(b().A,{target:t}),type:"toggle",isOn:k,onToggle:C})}},334711:(e,t,s)=>{s.d(t,{$:()=>i,U:()=>n});s(944114);class i extends(()=>s(757695))().default{getInitialState(){return{step:"totpUninitialized"}}}class n extends(()=>s(658921))()._{constructor(e,t){super(e,"totp"),this.service=void 0,this.service=t}totpStart(){this.checkStep("totpUninitialized")&&(this.store.setState({step:"totpLoadingQRCode"}),this.doCreateTOTP().catch(this.handleUnexpectedError))}totpVerifyCode(e){const{friendlyName:t,code:s,onVerified:i}=e;this.doRenameTOTPAndVerifyCode({friendlyName:t,code:s,onVerified:i}).catch(this.handleUnexpectedError)}totpBackupCodesComplete(){this.checkStep("totpBackupCodesLoading")&&this.store.setState({step:"totpVerified"})}totpComplete(){this.checkStep("totpVerified")&&this.store.setState({step:"totpComplete"})}exit(){this.store.setState({step:"totpUninitialized"})}async doCreateTOTP(){const e=await this.withStep("totpLoadingQRCode",(()=>this.service.createTOTP()));if(!e)return;const{result:t}=e;this.store.setState({step:"totpVerifyCode",qrCode:t.qrCode,rawString:t.secret,mfaSettingId:t.mfaSettingId})}async doRenameTOTPAndVerifyCode(e){const{friendlyName:t,code:s,onVerified:i}=e,n=await this.withStep(["totpVerifyCode"],(e=>this.service.renameSettings({mfaSettingId:e.mfaSettingId,friendlyName:t}))),o=await this.withStep("totpVerifyCode",(e=>this.service.verifyTOTP({mfaSettingId:e.mfaSettingId,code:s})));if(!n||!o)return;const{result:r,state:a}=n,{result:l}=o;if("saved"===r.status&&"match"===l.status)this.store.setState({step:"totpBackupCodesLoading"}),i();else{const e=[];switch(r.status){case"duplicate":e.push("totpDuplicateFriendlyName");break;case"empty":e.push("totpEmptyFriendlyName");break;case"bad_friendly_name":e.push("totpBadFriendlyName")}switch(l.status){case"error":e.push("unexpectedError");break;case"incorrect":e.push("totpIncorrectCode")}this.store.setState({...a,step:"totpVerifyCode",errorKeys:e})}}}},334992:(e,t,s)=>{s.d(t,{A:()=>a});var i=()=>s(762433),n=()=>s(497799),o=()=>s(324561),r=()=>s(714300);function a(e){const t=(0,n().H)({spaceStore:e}),s=(0,r().l)({spaceId:e.id}),a=(0,o().Q7)(e.id,s,t.loading?0:t.members.length);return Boolean(!(0,i().Qx)(null==s?void 0:s.subscription)&&!(0,i().N8)(null==s?void 0:s.subscription)&&!(0,i().TB)(s)&&a>0)}},347306:(e,t,s)=>{s.d(t,{A:()=>r});s(296540);var i=()=>s(959013),n=()=>s(534177),o=s(474848);function r(e){let{target:t}=e;switch(t){case"notify_mobile":return(0,o.jsx)(i().sA,{id:"notificationSettings.mobilePushNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments via your mobile app"});case"notify_desktop":return(0,o.jsx)(i().sA,{id:"notificationSettings.desktopNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments immediately on your desktop app"});case"notify_email":return(0,o.jsx)(i().sA,{id:"notificationSettings.emailNotificationSettings.improvedDescription",defaultMessage:"Receive emails when you get comments, mentions, page invites, reminders, access requests, and property changes"});case"notify_email_always":return(0,o.jsx)(i().sA,{id:"notificationSettings.emailAlwaysNotificationSettings.improvedDescription",defaultMessage:"Receive emails about activity in your workspace, even when you're active on the app"});case"notify_slack":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackNotificationsSettings.default.description",defaultMessage:"Receive notifications in your Slack workspace when you're mentioned in a page, database property, or comment"});case"notify_slack_mention":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackMentionNotificationSettings.description",defaultMessage:"Receive notifications in your Slack workspace when you're mentioned in a group, page, database property, or comment."});case"notify_slack_all_activity":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackAllActivityNotificationSettings.description",defaultMessage:"Receive notifications in your Slack workspace when you get comments, mentions, page invites, and property changes."});case"notify_email_digest":return(0,o.jsx)(i().sA,{id:"notificationSettings.pageUpdatesNotificationsSettings.description",defaultMessage:"Receive email digests for changes to pages you’re subscribed to"});case"notify_home_digest_email":return(0,o.jsx)(i().sA,{id:"notificationSettings.homeDigestEmailNotificationsSettings.description",defaultMessage:"Receive email digests of what's happening in your workspace"});case"marketing_emails":return(0,o.jsx)(i().sA,{id:"notificationSettings.marketingEmails.description",defaultMessage:"Receive occasional emails about product launches and new features from Notion"});case"desktop_badge":return(0,o.jsx)(i().sA,{id:"notificationSettings.desktopBadge.description",defaultMessage:'Show/hide the notification badge using the "Badge application icon" switch in System Settings'});default:(0,n().HB)(t)}}},364671:(e,t,s)=>{s.d(t,{A:()=>$});var i=s(296540),n=()=>s(56366),o=()=>s(534177),r=()=>s(957986),a=()=>s(959013),l=()=>s(284371),d=()=>s(331542),c=()=>s(274602),u=s(474848);function p(e){let{errorMessage:t,isLoading:s,onDisplayBackupCodes:i,onCancel:n,onDismiss:o}=e;const r=(0,u.jsx)(a().sA,{id:"mfa.regenerateBackupCodes.title",defaultMessage:"Regenerate backup codes"}),p=(0,u.jsx)(a().sA,{id:"mfa.regenerateBackupCodes.message",defaultMessage:"Backup codes are used to log in if you lose access to your password and second factors. <boldtext>Your existing codes won't work after regenerating new ones.</boldtext>",values:{boldtext:e=>(0,u.jsx)("span",{style:{fontWeight:l().Wy.semibold},children:e})}}),m={text:s?(0,u.jsx)(d().A,{}):(0,u.jsx)(a().sA,{id:"mfa.regenerateBackupCodes.regenerateBackupCodes.button.message",defaultMessage:"Generate new backup codes"}),onClick:i,view:"outline",disabled:s,isRed:!0},g=[{text:(0,u.jsx)(a().sA,{id:"mfa.regenerateBackupCodes.cancel.button.message",defaultMessage:"Cancel"}),onClick:n,view:"outline",type:"button"}];return(0,u.jsx)(c().A,{title:r,header:p,errorMessage:t,primaryAction:m,secondaryActions:g,onDismiss:o})}var m=()=>s(401497),g=()=>s(373204),h=()=>s(414446);function f(e){let{backupCodes:t,backupCodeDownload:s,backupCodeFileName:i,errorMessage:n,onNoted:o,onDownload:r}=e;const d=(0,m().IS)(S,[]),p=(0,u.jsx)(a().sA,{id:"mfa.showBackupCodes.title",defaultMessage:"Save your backup codes"}),f=(0,u.jsx)(a().sA,{id:"mfa.showBackupCodes.message",defaultMessage:"<boldtext>You can only see this once</boldtext>, so be sure to keep them to avoid getting locked out of your account.",values:{boldtext:e=>(0,u.jsx)("span",{style:{fontWeight:l().Wy.semibold},children:e})}}),y={text:(0,u.jsx)(a().sA,{id:"mfa.showBackupCodes.codesNotedDown.button.message",defaultMessage:"I've saved them"}),onClick:o},x=[{text:(0,u.jsx)(a().sA,{id:"mfa.showBackupCodes.downloadAsTextFile.button.message",defaultMessage:"Download as text file"}),href:`data:text/plain;charset=UTF-8,${s}`,saveAs:i,view:"outline",type:"link",onClick:r}];return(0,u.jsx)(c().A,{title:p,header:f,icon:(0,g().K)(d.icon),errorMessage:n,primaryAction:y,secondaryActions:x,children:(0,u.jsx)(h().A,{type:"unencryptedCodes",backupCodes:t})})}function S(e){return(0,m().$4)({icon:{width:30,height:30,fill:e.regularIconColor}})}function y(e){const{backupCodesStateMachine:t,onGoToSettings:s,onDismiss:i}=e,r=(0,n().K8)((()=>t.getCurrentStep()),[t]),a=()=>t.backupCodesRegenerateCodes();switch(r.step){case"backupCodesUninitialized":case"backupCodesLoading":return null;case"backupCodesRegenerateCodes":return(0,u.jsx)(p,{isLoading:r.isLoading,errorMessage:r.error,onDisplayBackupCodes:a,onDismiss:i,onCancel:s});case"backupCodesShowCodes":return(0,u.jsx)(f,{errorMessage:r.error,backupCodes:r.backupCodes,backupCodeDownload:r.backupCodesFile,backupCodeFileName:"Notion Backup Codes.txt",onNoted:s});default:return(0,o().HB)(r)}}var x=()=>s(653027),b=()=>s(22394);function v(e){let{type:t,errorMessage:s,onDismiss:i,onAddMethod:n}=e;const r=(0,m().IS)(A,[]),l=(0,u.jsx)(a().sA,{id:"mfa.setupComplete.confirmation.header",defaultMessage:"Every time you enter your password, Notion will ask you for a verification code to confirm your identity."}),d=[{text:(0,u.jsx)(a().sA,{id:"mfa.setupComplete.confirmation.viewTwoStepMethods.button.message",defaultMessage:"View 2-step methods"}),onClick:n,type:"button",view:"outline"}];return(0,u.jsx)(c().A,{title:"totp"===t?(0,u.jsx)(a().sA,{id:"mfa.totp.setupComplete.confirmation.title",defaultMessage:"2-step verification with authenticator is turned on"}):"sms"===t?(0,u.jsx)(a().sA,{id:"mfa.sms.setupComplete.confirmation.title",defaultMessage:"2-step verification with phone number is turned on"}):(0,o().HB)(t),header:l,errorMessage:s,icon:(0,b().o)(r.confirmationIcon),secondaryActions:d,onDismiss:i})}function A(e){return(0,m().$4)({confirmationIcon:{width:30,fill:"green"}})}s(581454);var w=()=>s(85128),j=()=>s(467730),M=()=>s(413267),k=()=>s(100622),C=()=>s(722872),I=()=>s(920949),_=()=>s(836251),T=()=>s(463830),P=()=>s(700250),B=()=>s(760217),R=()=>s(406699),D=()=>s(623580),N=()=>s(419357),L=()=>s(928600),U=()=>s(939740),O=()=>s(864943),E=()=>s(89924),F=()=>s(125565);const V={name:"United States",countryCode:"1",regionCode:"US"};function q(e){let{isLoading:t,phoneNumber:s,country:o,errorMessage:r,onDismiss:l,onBack:p,onContinue:g}=e;const h=(0,m().IS)(G,[]),f=(0,a().tz)(),[S,y]=(0,i.useState)(s??""),[x,b]=(0,i.useState)([]),[v,A]=(0,i.useState)(""),[k,q]=(0,i.useState)(o??V),z=(0,n().uB)(void 0,T().A),K=(0,i.useMemo)((()=>(0,w().cE)(k.regionCode)),[k.regionCode]),W=(0,i.useCallback)((e=>{const t=e.target.value.replace(/\D/g,"");y(K.reset(t))}),[K]);(0,i.useEffect)((()=>{y(o!==k?K.reset(S??""):K.reset(s??""));const e=new Intl.DisplayNames(["en"],{type:"region"}),t=(0,w().LU)();let i=-1;const n=t.map(((t,s)=>{const n=(0,w().qY)(t).toString(),o=e.of(t);return t===k.regionCode&&(i=s),{name:o??t,countryCode:n,regionCode:t}}));-1!==i&&n.unshift(n.splice(i,1)[0]),b(n)}),[k]);const H=(0,u.jsx)(a().sA,{id:"profileSettings.mfa.sms.addPhoneTitle",defaultMessage:"Add a phone number"}),$=(0,u.jsx)(a().sA,{id:"profileSettings.mfa.sms.addPhoneHeader",defaultMessage:"Enter your phone number to receive a 2-step verification code."}),Y={text:t?(0,u.jsx)(d().A,{}):(0,u.jsx)(a().sA,{id:"profileSettings.mfa.sms.continueButton",defaultMessage:"Continue"}),onClick:()=>g(k,S.trim()),disabled:t||""===S},Q=[{text:(0,u.jsx)(a().sA,{id:"profileSettings.mfa.sms.addPhoneNeedHelp",defaultMessage:"Need help?"}),href:(0,_().xS)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],X=f.formatMessage({id:"profileSettings.mfa.sms.phoneNumberInput.placeholder",defaultMessage:"Enter phone number"}),Z=f.formatMessage({defaultMessage:"Search country code",id:"profileSettings.mfa.sms.countryCodeSelect.placeholder"}),J=e=>(0,u.jsxs)("div",{style:h.countryCodeSelectTitle,children:[e.name,(0,u.jsx)(F().A,{isSmall:!0,children:`+${e.countryCode}`})]}),ee=(0,u.jsx)(R().Ay,{popupType:R().z7.Popup,placementToOrigin:P().UV.Bottom,alignmentToOrigin:P().MY.Start,buttonPopupStore:z,renderOrigin:e=>(0,u.jsx)(O().A,{size:"lg",...e,children:`+${k.countryCode}`}),render:e=>(0,u.jsx)(L().A,{menuType:C().gu.Popup,minWidth:280,maxHeight:"30vh",header:(0,u.jsx)(E().A,{isInput:!0,children:(0,u.jsx)(N().Ay,{value:v,onChange:e=>A(e.target.value),focus:!0,focusAfterAnimation:!0,placeholder:Z})}),children:(0,u.jsx)(U().Ay,{type:U().Oh.Vertical,initialFocus:0,sections:[{key:"countries",render:e=>(0,u.jsx)(E().A,{...e}),items:(0,j().Ay)(v,x,(e=>/\d/.test(v)?`${e.countryCode}`:e.name)).map((t=>({key:t.regionCode,render:e=>(0,u.jsx)(B().A,{...e,title:J(t),right:t.name===k.name?(0,M().b)(h.selectedCountryCodeIcon):void 0}),action:()=>{A(""),q(t),e.close()}})))}]})})});return(0,u.jsx)(c().A,{onDismiss:l,onBack:p,title:H,header:$,errorMessage:r,primaryAction:Y,secondaryActions:Q,children:(0,u.jsxs)("div",{style:h.container,children:[(0,u.jsx)("div",{style:h.countryCodeDropdownMenu,children:ee}),(0,u.jsx)(D().A,{autoFocus:!0,value:S,placeholder:X,spellCheck:!1,style:h.phoneNumberInput,onChange:W,disabled:t,customElementAttributes:I().SY})]})})}function G(e){return(0,m().$4)({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:16,marginBottom:4},countryCodeDropdownMenu:{marginRight:5},selectedCountryCodeIcon:{width:15,height:15},countryCodeSelectTitle:{paddingTop:8,paddingBottom:8},phoneNumberInput:{background:"light"===e.mode?k().Ay.transparent:e.inputBackground}})}var z=()=>s(852310);function K(e){const{smsStateMachine:t,onGoToSettings:s,onDismiss:i,onStartBackupCodes:r}=e,a=(0,n().K8)((()=>t.getCurrentStep()),[t]);switch(a.step){case"smsUninitialized":case"smsVerified":return null;case"smsSendingSMS":case"smsSetPhoneNumber":return(0,u.jsx)(q,{phoneNumber:a.phoneNumber,country:a.country,isLoading:"smsSendingSMS"===a.step,errorMessage:a.error,onDismiss:i,onBack:s,onContinue:(e,s)=>t.smsCreateSMS(e,s)});case"smsVerifyCode":case"smsResendSMS":case"smsBackupCodesLoading":case"smsVerifying":return(0,u.jsx)(z().Ay,{isLoading:"smsVerifying"===a.step||"smsBackupCodesLoading"===a.step,errorMessage:a.error,phoneNumber:`+${a.country.countryCode} ${a.phoneNumber}`,onDismiss:i,onBack:()=>t.smsRestart(),onVerifyCode:e=>t.smsVerifyCode({code:e,onVerified:r}),resentStatus:"smsResendSMS"===a.step?"resending":"resentAt"in a&&void 0!==a.resentAt?"resent":"not-resent",resentAt:"resentAt"in a&&a.resentAt?a.resentAt:0,onResendLink:()=>t.smsResendSMS()});case"smsComplete":return(0,u.jsx)(v,{type:"sms",errorMessage:a.error,onAddMethod:s,onDismiss:i});default:return(0,o().HB)(a)}}var W=()=>s(936457);function H(e){const{totpStateMachine:t,onGoToSettings:s,onStartBackupCodes:i,onDismiss:r}=e,a=(0,n().K8)((()=>t.getCurrentStep()),[t]);switch(a.step){case"totpUninitialized":case"totpVerified":return null;case"totpLoadingQRCode":case"totpBackupCodesLoading":case"totpVerifyCode":return(0,u.jsx)(W().Ay,{isLoading:"totpBackupCodesLoading"===a.step||"totpLoadingQRCode"===a.step,qrCode:"totpVerifyCode"===a.step?a.qrCode:void 0,textCode:"totpVerifyCode"===a.step?a.rawString:void 0,friendlyName:"totpVerifyCode"===a.step?a.friendlyName:void 0,errorMessage:a.error,errorKeys:"totpVerifyCode"===a.step?a.errorKeys:void 0,onDismiss:r,onBack:s,onContinue:(e,s)=>{t.totpVerifyCode({friendlyName:e,code:s,onVerified:i})}});case"totpComplete":return(0,u.jsx)(v,{type:"totp",errorMessage:a.error,onDismiss:r,onAddMethod:s});default:return(0,o().HB)(a)}}function $(e){const{rootStateMachine:t,settingsStateMachine:s,totpStateMachine:a,smsStateMachine:l,backupCodesStateMachine:d,onReloadSettings:c}=e,p=(0,n().K8)((()=>t.getCurrentStep()),[t]),[{showSettings:m,onRootExit:g}]=(0,i.useState)((()=>({onRootExit:()=>t.exit((()=>{s.exit(),a.exit(),l.exit(),d.exit(),c&&c()})),showSettings:()=>t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{s.settingsConfirmIdentityForSettings()}})}))),h=()=>t.rootCloseSettings((()=>{s.exit(),c&&c()})),f=()=>t.rootStartTOTP((()=>a.totpStart())),S=()=>t.rootStartSMS((()=>l.smsStart())),b=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{a.exit(),s.settingsShow({refresh:!0})}})},v=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{l.exit(),s.settingsShow({refresh:!0})}})},A=()=>{d.exit(),t.rootEndBackupCodes({completeTotp:()=>{a.totpComplete()},completeSMS:()=>{l.smsComplete()},showSettings:m})},w=()=>{d.backupCodesInitialSetup({onLoadingComplete:()=>{a.totpBackupCodesComplete(),t.rootShowBackupCodesFromTOTP()},onComplete:()=>{a.totpBackupCodesComplete(),a.totpComplete(),A()}})},j=()=>{d.backupCodesInitialSetup({onLoadingComplete:()=>{l.smsBackupCodesComplete(),t.rootShowBackupCodesFromSMS()},onComplete:()=>{l.smsBackupCodesComplete(),l.smsComplete(),A()}})},M=()=>{t.rootStartBackupCodesFromSettings((()=>d.backupCodesShowCreate()))},k=(0,n().K8)((()=>s.getCurrentStep()),[s]),C=(0,n().K8)((()=>a.getCurrentStep()),[a]),I=(0,n().K8)((()=>l.getCurrentStep()),[l]),_=(0,n().K8)((()=>d.getCurrentStep()),[d]);let T;switch(p.step){case"rootUninitialized":break;case"rootSettings":T={open:"settingsUninitialized"!==k.step,onDismiss:g,render:()=>(0,u.jsx)(x().A,{settingsStateMachine:s,onDismiss:h,onStartTOTP:f,onStartSMS:S,onStartBackupCodes:M})};break;case"rootTOTP":T={open:"totpUninitialized"!==C.step,onDismiss:g,render:()=>(0,u.jsx)(H,{totpStateMachine:a,onGoToSettings:b,onStartBackupCodes:w,onDismiss:g})};break;case"rootSMS":T={open:"smsUninitialized"!==I.step,onDismiss:g,render:()=>(0,u.jsx)(K,{smsStateMachine:l,onGoToSettings:v,onStartBackupCodes:j,onDismiss:g})};break;case"rootBackupCodes":T={open:"backupCodesUninitialized"!==_.step,onDismiss:"backupCodesRegenerateCodes"===_.step?g:void 0,render:()=>(0,u.jsx)(y,{backupCodesStateMachine:d,onGoToSettings:A,onDismiss:g})};break;default:throw(0,o().HB)(p)}return T?(0,u.jsx)(r().A,{...T,preventHideChildrenWhileOpening:!0}):null}},388450:(e,t,s)=>{s.d(t,{R:()=>F});s(898992),s(672577);var i=s(296540),n=()=>s(484714),o=()=>s(56366),r=()=>s(401497),a=()=>s(402904),l=()=>s(959013),d=()=>s(534177),c=()=>s(284371),u=()=>s(848259),p=()=>s(246826),m=()=>s(317909),g=()=>s(881707),h=()=>s(878079),f=()=>s(351360),S=()=>s(53137),y=()=>s(630116),x=()=>s(347306),b=()=>s(963550),v=(s(581454),()=>s(617871)),A=()=>s(831310),w=()=>s(668725),j=()=>s(689094),M=()=>s(973647),k=()=>s(898563),C=()=>s(510683),I=()=>s(722872),_=()=>s(704152),T=()=>s(760217),P=()=>s(406699),B=()=>s(928600),R=()=>s(939740),D=()=>s(89924),N=s(474848);function L(e){const{currentExternalAuthentication:t,externalAuthentications:s,spaceId:a,spaceViewStore:d}=e,c=(0,n().v3)(),u=(0,n().Y0)(),h=(0,o().K8)((()=>S().A.integrations.state.find((e=>e.id===v().zG))),[]),f=(0,r().IS)((e=>({popupContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:14,marginTop:12},dropdownButtonContainer:{display:"flex",alignItems:"center",minWidth:0,padding:"0px 8px",borderRadius:4,marginLeft:8},currentValueLabel:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flex:1},icon:{marginLeft:8,width:12,height:12,color:e.lightTextColor}})),[]);let y;y=u.isPhone?{menuType:I().gu.ActionSheet}:{menuType:I().gu.Popup,width:280,maxHeight:"50vh"};const x=i.useCallback((e=>Object.entries((0,g().Os)(s)).map(((s,i)=>{let[n,o]=s;return{key:n,items:o.map((s=>{let{externalAuthentication:i,workspaceName:n}=s;return{key:i.id,action:()=>{e.close(),U({environment:c,spaceViewStore:d,currentExternalBotId:null==t?void 0:t.parent_id,selectedExternalBotId:i.parent_id})},render:e=>(0,N.jsx)(T().A,{...e,title:n,right:i.id===(null==t?void 0:t.id)&&(0,A().o)({width:12,height:12})})}})),render:e=>(0,N.jsx)(D().A,{...e,title:n,topBorder:0!==i})}}))),[null==t?void 0:t.id,null==t?void 0:t.parent_id,c,s,d]),b=i.useCallback((e=>h?[{key:"disable-notification",items:[{key:"disable-slack-notification",action:()=>{e.close(),function(e){const{environment:t,spaceViewStore:s}=e;m().createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,canUndo:!0,perform:e=>{p().zv({store:s.getSettingsStore(),data:{notify_slack:null},transaction:e})}}),k().YT(t,{type:"personal",source:"notifications_and_settings"})}({environment:c,spaceViewStore:d})},render:e=>(0,N.jsx)(T().A,{...e,title:(0,N.jsx)(l().sA,{id:"personalSlackNotificationsAccountDropdownButton.disableNotification.label",defaultMessage:"Off"}),right:void 0===t&&(0,A().o)({width:12,height:12})})}],render:e=>(0,N.jsx)(D().A,{...e,topBorder:x.length>0})},{key:"create-new-auth",items:[{key:"connect",render:e=>(0,N.jsx)(T().A,{...e,icon:(0,j().W)({width:12,height:12}),title:(0,N.jsx)(l().sA,{id:"database.viewSettings.notificationsTab.slack.addNewAccount.label",defaultMessage:"Add new account"})}),action:async()=>{var e;const t=await C().Jq({environment:c,integration:h,spaceId:a,from:"notifications_and_settings"});if(M().Q.isFail(t))return;const s=null===(e=t.value.externalAuthentication)||void 0===e?void 0:e.parent_id;s&&U({environment:c,spaceViewStore:d,currentExternalBotId:void 0,selectedExternalBotId:s})}}],render:e=>(0,N.jsx)(D().A,{...e,topBorder:!0})}]:[]),[t,c,x.length,a,d,h]);return(0,N.jsx)("div",{style:f.popupContainer,children:(0,N.jsx)(P().Ay,{popupType:P().z7.Popup,alignmentToOrigin:P().yP.End,render:e=>(0,N.jsx)(B().A,{...y,children:(0,N.jsx)(R().Ay,{type:R().Oh.Vertical,initialFocus:0,sections:[...x(e),...b(e)]})}),renderOrigin:t=>(0,N.jsxs)(_().A,{...t,style:f.dropdownButtonContainer,children:[(0,N.jsx)("div",{style:f.currentValueLabel,children:(0,N.jsx)(O,{...e})}),(0,w().b)(f.icon)]})})})}function U(e){const{environment:t,spaceViewStore:s,selectedExternalBotId:i,currentExternalBotId:n}=e,o=s.getSettingsStore(),r=o.getKeyStore("notify_slack").getValue();if(n!==i){const e=(0,h().Z5)();let s=!1;e&&(s=!n||Boolean(null==r?void 0:r.notify_slack_all_activity)),m().createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,canUndo:!0,perform:e=>{p().zv({store:o,data:{notify_slack:{external_bot_id:i,notify_slack_all_activity:s,notify_slack_mention:!n||(null==r?void 0:r.notify_slack_all_activity)}},transaction:e})}}),void 0===n?k().lL(t,{type:"personal",source:"notifications_and_settings"}):k().Eu(t,{type:"personal",source:"notifications_and_settings"})}}function O(e){const{currentExternalAuthentication:t}=e;if(!t)return(0,N.jsx)(l().sA,{id:"SlackNotificationsPersonalSettingsAccountPicker.accountDropdown.selectPlaceholder",defaultMessage:"Off"});const s=(0,g().qO)(t).organizationName;return(0,N.jsx)(N.Fragment,{children:s})}var E=()=>s(702723);function F(e){const t=(0,n().v3)(),{target:s}=e,{isMobile:v}=(0,n().Y0)(),A=(0,o().K8)((()=>f().default.state.currentSpaceViewStore),[]),w=(0,o().K8)((()=>f().default.state.currentSpaceStore),[]),j=(0,o().O$)(S().A.completeSlackAuthentications),M=(0,o().K8)((()=>(0,h().Z5)()),[]),k=(0,o().K8)((()=>{var e;const t=null==A||null===(e=A.getSettings())||void 0===e||null===(e=e.notify_slack)||void 0===e?void 0:e.external_bot_id;if(!t)return;const s=j.find((e=>e.parent_id===t));if(s)return s;if(!A)return;return(0,y().Oo)(A,{id:t,table:a().As}).getValue()}),[A,j]),C=(0,o().K8)((()=>{var e;const t=null==A||null===(e=A.getSettingsStore())||void 0===e||null===(e=e.getKeyStore("notify_slack"))||void 0===e?void 0:e.getValue();switch(s){case"notify_slack_mention":return k&&(null==t?void 0:t.notify_slack_mention)||!1;case"notify_slack_all_activity":return(null==t?void 0:t.notify_slack_all_activity)||!1;case"notify_slack":return!1;default:(0,d().HB)(s)}}),[A,s,k]),I=(0,o().K8)((()=>{var e;const t=null==A||null===(e=A.getSettingsStore())||void 0===e||null===(e=e.getKeyStore("notify_slack"))||void 0===e?void 0:e.getValue();return null==t?void 0:t.notify_slack_all_activity}),[A]),_=(0,i.useCallback)((()=>{if(A){const e=!C,i=A.getSettingsStore();let n=i.getKeyStore("notify_slack").getValue();if(!n)return;"notify_slack_mention"===s?(n[s]=e,e||n.notify_slack_all_activity||(n=void 0),m().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,canUndo:!0,perform:e=>{p().zv({store:i,data:{notify_slack:n},transaction:e})}})):"notify_slack_all_activity"===s&&(n[s]=e,m().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,canUndo:!0,perform:e=>{p().zv({store:i,data:{notify_slack:n},transaction:e})}})),"notify_slack"!==s&&u().DN(t,{is_on:e,target:s})}}),[t,A,C,s]),T=(0,r().IS)((e=>({notifySlackSelectedWorkspaceName:{fontWeight:c().Wy.bold,color:e.darkTextColor},titleWithBadgeContainer:{display:"flex",alignItems:"center"},betaBadgeContainer:{marginTop:-3},betaBadge:{display:"inline",marginLeft:6}})),[]);return A&&w?"notify_slack"===s?(0,N.jsx)(E().A,{type:"custom",isMobile:v,title:(0,N.jsx)(b().A,{target:s}),caption:(0,N.jsx)(N.Fragment,{children:k?(0,N.jsx)(l().sA,{id:"notificationSettings.slackNotificationsSettings.workspaceSelected.description",defaultMessage:"Receive notifications in {slackWorkspaceName} slack workspace{slackNotificationSettingMessage}.",values:{slackWorkspaceName:(0,N.jsx)("span",{style:T.notifySlackSelectedWorkspaceName,children:(0,g().qO)(k).organizationName}),slackNotificationSettingMessage:M?"":" when you're mentioned in a page, database property, or comment"}}):(0,N.jsx)(x().A,{target:s})}),customButton:(0,N.jsx)(L,{currentExternalAuthentication:k,externalAuthentications:j,spaceId:w.id,spaceViewStore:A})}):"notify_slack_mention"===s?k?(0,N.jsx)(E().A,{isMobile:!0,title:(0,N.jsx)(b().A,{target:s}),caption:(0,N.jsx)(x().A,{target:s}),type:"toggle",isOn:C,onToggle:_,disabled:Boolean(I)}):(0,N.jsx)(N.Fragment,{}):k?(0,N.jsx)(E().A,{isMobile:!0,title:(0,N.jsx)(b().A,{target:s}),caption:(0,N.jsx)(x().A,{target:s}),type:"toggle",isOn:C,onToggle:_}):(0,N.jsx)(N.Fragment,{}):null}},405425:(e,t,s)=>{s.d(t,{Q:()=>u});s(898992),s(354520),s(581454);var i=()=>s(484714),n=()=>s(56366),o=()=>s(179034),r=()=>s(534177),a=()=>s(744766),l=()=>s(670631),d=()=>s(351360),c=()=>s(630116);function u(e){const{searchQuery:t,filterCategory:s}=e,u=(0,i().v3)(),p=(0,n().K8)((()=>{const e=l().A.state.offlinePages??{};return Object.keys(e).map((i=>{var n;const l=e[i];if(void 0===l)return;const{isExplicitlyOfflinedOrigin:p,isAutosyncedOrigin:m}=l;if(!p&&!m)return;if(!function(e){const{filterCategory:t,isExplicitlyOfflinedOrigin:s,isAutosyncedOrigin:i}=e;switch(t){case"all":return!0;case"manual":return s;case"autosynced":return i;default:(0,r().HB)(t)}}({filterCategory:s,isExplicitlyOfflinedOrigin:p,isAutosyncedOrigin:m}))return;const g=new(c().Bv)(u,{table:o().ev,id:i});if(Boolean(t)&&!function(e){const{pageBlockStore:t,searchQuery:s}=e,{displayTitle:i}=(0,a().tL)(t);if(void 0===i)return!1;return i.toLowerCase().includes(s.toLowerCase())}({pageBlockStore:g,searchQuery:t}))return;if((null===(n=d().default.state.currentSpaceStore)||void 0===n?void 0:n.id)!==g.getSpaceId())return;const h=g.getLastEditedTime();return{id:i,isClickable:!1,pageBlockStore:g,lastModifiedTime:h,showOptions:p&&!m}})).filter(r().O9)}),[u,t,s]);return p}},413107:(e,t,s)=>{s.d(t,{L:()=>g});var i=s(296540),n=()=>s(484714),o=()=>s(56366),r=()=>s(187174),a=()=>s(959013),l=()=>s(705540),d=()=>s(864943),c=()=>s(702723),u=()=>s(989423),p=()=>s(227440);var m=s(474848);function g(){const e=(0,n().v3)(),{isMobile:t,isElectron:s}=(0,n().Y0)(),g=(0,o().K8)((()=>!p().A.state.online),[]),[h,f]=(0,i.useState)(0),[S,y]=(0,i.useState)(!1),x=(0,i.useCallback)((async()=>{let i;if(s)i=await l().getSqliteDiskUsage();else if(t){var n;i=await(null===(n=e.mobileNative)||void 0===n?void 0:n.getSqliteDiskUsage())}void 0!==i&&f(i)}),[e.mobileNative,s,t]),b=(0,i.useCallback)((async()=>{y(!0),await async function(e){try{var t,s;await(null===(t=e.defaultRecordCache.persistedRecordCache)||void 0===t?void 0:t.flushPendingWrites()),await(null===(s=e.defaultRecordCache.persistedRecordCache)||void 0===s?void 0:s.deleteAllRecordTables())}catch(i){}}(e),(0,u().u4)({environment:e,event:{eventName:"offline_storage_cleared",eventProperties:{cache_size_in_mb_before_clear:h}}}),await x()}),[e,h,x]);return(0,r().Yb)((async()=>{await x()}),[x]),(0,m.jsx)(c().A,{type:"custom",isMobile:!0,title:(0,m.jsx)(a().sA,{id:"offlineSettingsTab.storageManagementSection.title",defaultMessage:"Notion cache"}),disableTitle:g,disableSettingsItemClick:!0,caption:(0,m.jsx)(a().sA,{id:"offlineSettingsTab.storageManagementSection.subheading",defaultMessage:"This will clear { amount } of cache across all of your Notion workspaces.",values:{amount:`${h} MB`}}),shouldHighlight:!1,customButton:(0,m.jsx)(d().A,{size:"lg",style:{marginTop:12,marginBottom:4},onClick:b,disabled:g||S,children:(0,m.jsx)(a().sA,{id:"offlineSettingsTab.storageManagementSection.cta",defaultMessage:"Clear cache"})})})}},420844:(e,t,s)=>{s.d(t,{xF:()=>oe,OC:()=>le,jo:()=>ae});s(898992),s(354520);var i=s(296540),n=()=>s(484714),o=()=>s(56366),r=()=>s(762433),a=()=>s(959013),l=()=>s(534177),d=()=>s(705540),c=()=>s(851650),u=()=>s(317909),p=()=>s(755199),m=()=>s(863569),g=()=>s(959098),h=()=>s(331542),f=()=>s(580635),S=()=>s(234695),y=()=>s(719147),x=()=>s(862961),b=()=>s(243923),v=()=>s(702723),A=()=>s(782649),w=()=>s(289251),j=()=>s(836251),M=()=>s(141966),k=()=>s(963589),C=()=>s(610716),I=()=>s(155959),_=()=>s(351360),T=()=>s(948914),P=()=>s(508496),B=()=>s(410555),R=()=>s(807778),D=()=>s(401497),N=()=>s(502492),L=()=>s(579631),U=()=>s(435009),O=()=>s(187485),E=()=>s(864943),F=()=>s(125565),V=()=>s(780054),q=()=>s(597755),G=()=>s(112799),z=()=>s(927080),K=()=>s(404141),W=s(474848);function H(){const{isMac:e,isDesktop:t}=(0,n().Y0)();return(0,o().K8)((()=>t&&e),[e,t])}function $(e){var t;const s=e.environment.device,{isElectron:i,isMac:n,isWindows:r,isDesktop:a}=s,d=void 0!==(null===(t=(0,o().O$)(T().A).preferences)||void 0===t?void 0:t.isUniversalLinksEnabled);return[a&&(n||r||!1)&&!d?{key:"open-in-desktop-app",renderSettingsItem:()=>(0,W.jsx)(te,{})}:void 0,H()?{key:"open-in-browser",renderSettingsItem:()=>(0,W.jsx)(Q,{})}:void 0,i&&n?{key:"close-browser-tabs",renderSettingsItem:()=>(0,W.jsx)(se,{})}:void 0].filter(l().O9)}function Y(){return(0,W.jsx)(v().A,{isMobile:!1,caption:(0,W.jsx)(a().sA,{id:"openInBrowserSetting.caption.browser",defaultMessage:'If installed, macOS will open links to Notion in the desktop app, even if this setting is turned off. To disable that behavior, enable "Open Notion links in browser" in your app.'}),type:"custom",customButton:(0,W.jsx)(E().A,{size:"lg",onClick:()=>{window.open(N().$J({httpUrl:(0,q().A)(window.location.href),protocol:V().A.protocol}))},children:(0,W.jsx)(a().sA,{id:"openInBrowserSetting.button",defaultMessage:"Set in app"})})})}function Q(){const e=(0,n().Y0)(),{isElectron:t,isMac:s}=e,r=H(),l=(0,o().K8)((()=>{var e;return null===(e=T().A.state.preferences)||void 0===e?void 0:e.isUniversalLinksEnabled}),[]),c=(0,i.useCallback)((()=>{const e=!l;d().electronAppFeatures.setPreference("isUniversalLinksEnabled",e)}),[l]);if(!t&&r)return(0,W.jsx)(Y,{});if(!t||!s||void 0===l)return null;const u=(0,W.jsx)(a().sA,{id:"openInDesktopAppSettings.universalLinks.title",defaultMessage:"Open Notion links in browser"}),p=(0,W.jsx)(a().sA,{id:"openInDesktopAppSettings.universalLinks.caption",defaultMessage:"By default, macOS will open links to Notion in the desktop app. Turning this setting on will redirect links to your browser instead."});return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(v().A,{isMobile:!1,title:u,caption:p,type:"toggle",isOn:!l,onToggle:c}),(0,W.jsx)(X,{show:!1===l})]})}function X(){let{show:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1};const t=(0,D().IS)((e=>({buttonStyle:{display:"flex",alignItems:"center",paddingLeft:12,paddingRight:12,paddingTop:2,paddingBottom:2,borderColor:e.outlineButtonBorder,border:1,borderWidth:1,borderRadius:4,height:32,gap:4,background:e.importOptionsButtonBackground},titleStyle:{fontSize:12,fontWeight:"medium",font:"SF Pro",color:e.text.primary,height:18},divTitleStyle:{color:e.text.secondary,display:"flex",background:e.fill.lightGraySecondary,width:"100%",padding:"16px",justifyContent:"center",alignItems:"center",gap:12,borderRadius:8,borderColor:e.fill.lightGraySecondary},divStyle:{display:"flex",alignItems:"center",marginTop:10,minWidth:0,width:"100%",gap:10},UiLabelStyle:{color:e.text.secondary,font:"SF Pro",fontSize:12,whiteSpace:"normal"}})),[]);return e?(0,W.jsx)("div",{style:t.divStyle,children:(0,W.jsxs)("div",{style:t.divTitleStyle,children:[(0,W.jsx)(F().A,{isSecondaryColor:!0,style:t.UiLabelStyle,children:(0,W.jsx)(a().sA,{id:"openInDesktopAppSettings.universalLinks.guide.caption",defaultMessage:'Notion will redirect links to your browser. You may also want to prevent your browser from opening Notion links in the desktop app. To use Notion in your browser only, ensure that the setting "Open links in desktop app" is turned off in your browser.'})}),(0,W.jsx)("div",{children:(0,W.jsx)("div",{style:{display:"flex"},children:(0,W.jsx)("div",{style:t.titleStyle,children:(0,W.jsx)(Z,{})})})})]})}):null}function Z(){const e=(0,n().v3)();return(0,W.jsx)(O().A,{href:(0,q().A)(window.location.href),external:!0,onClick:()=>{L().mu(e)},children:(0,W.jsx)(E().A,{size:"lg",children:(0,W.jsx)(a().sA,{id:"openInDesktopAppSetting.desktopConfigureButton",defaultMessage:"Set in browser"})})})}function J(){return(0,W.jsx)(a().sA,{id:"openInDesktopAppSetting.title",defaultMessage:"Open links in desktop app"})}function ee(){const e=void 0!==(0,o().K8)((()=>{var e;return null===(e=T().A.state.preferences)||void 0===e?void 0:e.isUniversalLinksEnabled}),[]);let t=(0,W.jsx)(J,{}),s=(0,W.jsx)(a().sA,{id:"openInDesktopAppSetting.desktopConfigureCaption",defaultMessage:"You can configure browser links to open in this app."});return e&&(t=(0,W.jsx)(a().sA,{id:"openInDesktopAppSetting.title.universal",defaultMessage:"Open browser links in desktop app"}),s=(0,W.jsx)(a().sA,{id:"openInDesktopAppSetting.desktopConfigureCaption.universal",defaultMessage:"You can also configure your browser to automatically redirect Notion links to the app."})),(0,W.jsx)(v().A,{isMobile:!1,title:t,caption:s,type:"custom",customButton:(0,W.jsx)(Z,{})})}function te(){const e=(0,n().v3)(),{isElectron:t,isMac:s}=(0,n().Y0)(),i=(0,o().O$)(z().A),r=(0,W.jsx)(J,{}),l=(0,o().K8)((()=>K().A.state.highlightedSetting===K().r.OpenInDesktopApp),[]),d=(0,G().E)();if(t)return(0,W.jsx)(ee,{});const c=s?"macOS":"Windows";return(0,W.jsx)(v().A,{isMobile:!1,title:r,caption:(0,W.jsx)(a().sA,{id:"openInDesktopAppSetting.description.messageWindows",defaultMessage:"You must have the <desktopAppLink>{platform} app</desktopAppLink> installed.",values:{desktopAppLink:function(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return(0,W.jsx)(y().A,{external:!0,onClick:t=>{d.current&&(U().oo({environment:e,url:d.current,openInNew:"tab"}),t.stopPropagation())},children:s})},platform:c}}),type:"toggle",isOn:"always"===i,onToggle:()=>{const t="always"===i?"never":"always";z().A.setState(t),"always"===t&&U().eG({url:(0,q().P)(window.location.href),environment:e}),L().kF(e,{toggled_to:"always"===t?"on":"off"})},shouldHighlight:l})}function se(){const{isElectron:e,isMac:t}=(0,n().Y0)(),s=(0,o().K8)((()=>{var e;return null===(e=T().A.state.preferences)||void 0===e?void 0:e.isClosingBrowserTabs}),[]),r=(0,i.useCallback)((()=>{const e=!s;d().electronAppFeatures.setPreference("isClosingBrowserTabs",e)}),[s]);if(!e||!t||void 0===s)return null;const l=(0,W.jsx)(a().sA,{id:"openInDesktopAppSettings.closeBrowserTabs.title",defaultMessage:"Close redirecting browser tabs"}),c=(0,W.jsx)(a().sA,{id:"openInDesktopAppSettings.closeBrowserTabs.caption",defaultMessage:'When opening links in the desktop app, close "Redirecting to your Notion app..." browser tabs.'});return(0,W.jsx)(v().A,{isMobile:!1,title:l,caption:c,type:"toggle",isOn:s,onToggle:r})}var ie=()=>s(563253),ne=()=>s(993342);function oe(e){let{isPhone:t,isMobileNative:s,showOfflineSettings:i,passwordRequestStore:n,userEmailDomainSettings:o,billingData:a,accountSettings:d}=e;const c=s&&(0,r().et)(a),u=(0,M().l)(),p=!(t&&(0,I().T)("supportsNativeHome")),h=P().default.checkGate({gateName:"block_attribution"});return[{key:"password",renderSettingsItem:()=>(0,W.jsx)(de,{passwordRequestStore:n,billingData:a})},{key:"passkeys",renderSettingsItem:()=>(0,W.jsx)(x().A,{samlEnforced:d.isSamlEnforced,hasPasskeys:d.hasPasskeys})},{key:"appearance",renderSettingsItem:()=>(0,W.jsx)(ce,{isMobile:!0})},s&&P().default.checkGate({gateName:"mobile_open_links_in_external_browser"})?{key:"open-external-links",renderSettingsItem:()=>(0,W.jsx)(ue,{})}:void 0,p?{key:"page-on-app-start",renderSettingsItem:()=>(0,W.jsx)(ne().A,{isMobile:!0})}:void 0,h?{key:"block-attribution",renderSettingsItem:()=>(0,W.jsx)(pe,{isMobile:!0})}:void 0,c?{key:"subscription",renderSettingsItem:()=>(0,W.jsx)(A().L,{})}:void 0,{key:"user-consent",renderSettingsItem:()=>(0,W.jsx)(w().A,{emailDomainSettings:o.settings})},{key:"calendar",renderSettingsItem:()=>(0,W.jsx)(m().A,{})},u?{key:"experiments",renderSettingsItem:()=>(0,W.jsx)(f().Q,{})}:void 0,i&&s?{key:"offline",renderSettingsItem:()=>(0,W.jsx)(C().S,{})}:void 0,{key:"deleteAccount",renderSettingsItem:()=>(0,W.jsx)(g().A,{userEmailDomainSettings:o})},{key:"spaceInfo",renderSettingsItem:()=>(0,W.jsx)(re,{})}].filter(l().O9)}function re(){const e=(0,o().K8)((()=>_().default.state.currentSpaceStore),[]);return e?(0,W.jsx)(S().K,{spaceStore:e,showDomain:!0}):null}function ae(){return[{key:"appearance",renderSettingsItem:()=>(0,W.jsx)(ce,{isMobile:!1})}]}function le(e){var t;const{environment:s}=e,{isElectron:i,isMac:n}=s.device,r=(0,k().X)("block_attribution"),a=(0,o().K8)((()=>(0,R().xu)(s)),[s]),d=(0,o().O$)(T().A),c=d.isQuickSearchSupported,u=Boolean(null===(t=d.preferences)||void 0===t?void 0:t.isQuickSearchEnabled),p=d.isMenuBarIconSupported,m=d.isNewTabSearchSupported,g=i&&c,h=i&&c&&u,f=i&&n&&p&&u;return[a?void 0:{key:"appearance",renderSettingsItem:()=>(0,W.jsx)(ce,{isMobile:!1})},i&&m?{key:"page-on-tab-start",renderSettingsItem:()=>(0,W.jsx)(me,{})}:void 0,...$(e),g?{key:"quick-search-enabled",renderSettingsItem:()=>(0,W.jsx)(ge,{})}:void 0,h?{key:"quick-search-shortcut",renderSettingsItem:()=>(0,W.jsx)(he,{})}:void 0,h?{key:"notion-ai-shortcut",renderSettingsItem:()=>(0,W.jsx)(fe,{})}:void 0,f?{key:"menu-bar-icon-enabled",renderSettingsItem:()=>(0,W.jsx)(Se,{})}:void 0,r?{key:"block-attribution",renderSettingsItem:()=>(0,W.jsx)(pe,{isMobile:!1})}:void 0].filter(l().O9)}function de(e){let{billingData:t,passwordRequestStore:s}=e;const i=(0,r().eh)(t,"student"),n=(0,o().K8)((()=>{var e;return(null===(e=_().default.state.currentUserStore)||void 0===e?void 0:e.getEmail())??""}),[]),{hasPassword:a,canConfigurePassword:l,isSamlEnforced:d,mfaStatus:c,error:u,ready:p}=(0,o().K8)((()=>({...s.state.result,error:s.state.error,ready:s.state.result})),[s]);return u?(0,W.jsx)(b().A,{hasPassword:!1,hasPasswordActions:!1,samlEnforced:!1,mfaStatus:"loading",email:n,onReloadSettings:()=>s.refresh(),isError:!0}):p?(0,W.jsx)(b().A,{hasPassword:a,hasPasswordActions:l,samlEnforced:d,mfaStatus:c,isEducationPlan:i,email:n,onReloadSettings:()=>s.refresh(),isError:!1}):(0,W.jsx)(h().A,{})}function ce(e){let{isMobile:t}=e;const s=(0,n().v3)(),i=(0,o().K8)((()=>c().lv(s)),[s]);return(0,W.jsx)(v().A,{isMobile:t,title:(0,W.jsx)(a().sA,{id:"appearanceSettings.title",defaultMessage:"Appearance"}),caption:(0,W.jsx)(a().sA,{id:"appearanceSettings.description.message",defaultMessage:"Customize how Notion looks on your device."}),type:"dropdown",currentOption:i,options:[{key:"system",label:(0,W.jsx)(a().sA,{id:"appearanceSetting.system.label",defaultMessage:"Use system setting"})},{key:"light",label:(0,W.jsx)(a().sA,{id:"appearanceSetting.light.label",defaultMessage:"Light"})},{key:"dark",label:(0,W.jsx)(a().sA,{id:"appearanceSetting.dark.label",defaultMessage:"Dark"})}],onSelectOption:e=>{c().C5(e)}})}function ue(){const e=(0,o().K8)((()=>B().A.state??"external"),[]);return(0,W.jsx)(v().A,{isMobile:!0,title:(0,W.jsx)(a().sA,{id:"openExternalLinksSettings.title",defaultMessage:"External links"}),caption:(0,W.jsx)(a().sA,{id:"openExternalLinksSettings.description.message",defaultMessage:"Choose how to open links on this device."}),type:"dropdown",currentOption:e,options:[{key:"in-app",label:(0,W.jsx)(a().sA,{id:"openExternalLinksSettings.inAppBrowser.title",defaultMessage:"In-app browser"})},{key:"external",label:(0,W.jsx)(a().sA,{id:"openExternalLinksSettings.externalBrowser.title",defaultMessage:"System default browser"})}],onSelectOption:e=>{B().A.setState(e)}})}function pe(e){let{isMobile:t}=e;const s=(0,n().v3)(),r=(0,o().K8)((()=>_().default.state.currentUserSettingsStore),[]),l=(0,o().K8)((()=>{var e;return(null==r||null===(e=r.getSettings())||void 0===e?void 0:e.show_block_attribution)??!0}),[r]),d=(0,i.useCallback)((()=>{r&&u().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,canUndo:!0,perform:e=>{p().mJ({userSettingsStore:r,data:{show_block_attribution:!l},transaction:e})}})}),[r,l,s]);return(0,W.jsx)(v().A,{isMobile:t,title:(0,W.jsx)(a().sA,{id:"attributionSetting.title",defaultMessage:"Block attribution"}),caption:(0,W.jsx)(a().sA,{id:"attributionSetting.description.message",defaultMessage:"See your teammates’ initials to the left of blocks they created or edited."}),type:"toggle",isOn:l,onToggle:d})}function me(){const{currentPreference:e}=(0,o().K8)((()=>{var e;const t=T().A.state;return{currentPreference:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isNewTabSearchEnabled)}}),[]),t=(0,i.useCallback)((()=>{const t=!e;d().electronAppFeatures.setPreference("isNewTabSearchEnabled",t)}),[e]),s=(0,W.jsx)(a().sA,{id:"desktopNewTabSearch.toggle.title",defaultMessage:"New Tab Search"}),n=(0,W.jsx)(a().sA,{id:"desktopNewTabSearch.toggle.caption",defaultMessage:'Immediately search for and navigate to a specific page when you open a new tab. When turned off, new tabs will follow your "Default page" settings. <inlinelink>Learn more</inlinelink>.',values:{inlinelink:e=>(0,W.jsx)(y().A,{external:!0,href:(0,j().xS)("guides.whyDesktop"),onClick:e=>{e.stopPropagation()},children:e})}});return(0,W.jsx)(v().A,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}function ge(){const{currentPreference:e}=(0,o().K8)((()=>{var e;const t=T().A.state;return{currentPreference:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isQuickSearchEnabled)}}),[]),t=(0,i.useCallback)((()=>{const t=!e;d().electronAppFeatures.setPreference("isQuickSearchEnabled",t)}),[e]),s=(0,W.jsx)(a().sA,{id:"desktopQuickSearch.toggle.title",defaultMessage:"Use Command Search"}),n=(0,W.jsx)(a().sA,{id:"desktopQuickSearch.toggle.caption",defaultMessage:"Open Notion AI and search anywhere with a shortcut, even when your Notion app isn't active."});return(0,W.jsx)(v().A,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}function he(){const{quickSearchShortcut:e,notionAiShortcut:t}=(0,o().K8)((()=>{const e=T().A.state.preferences;return{quickSearchShortcut:null==e?void 0:e.quickSearchShortcut,notionAiShortcut:null==e?void 0:e.notionAiShortcut}}),[]),{isMac:s}=(0,n().Y0)(),r=(0,i.useCallback)((e=>{d().electronAppFeatures.setPreference("quickSearchShortcut",e)}),[]),l=(0,W.jsx)(a().sA,{id:"desktopQuickSearch.shortcut.title",defaultMessage:"Command Search shortcut"}),c=(0,W.jsx)(a().sA,{id:"desktopQuickSearch.shortcut.caption",defaultMessage:"Customize the shortcut used to trigger Command Search."});return(0,W.jsx)(v().A,{isMobile:!1,type:"custom",title:l,caption:c,disableSettingsItemClick:!0,customButton:(0,W.jsx)("div",{children:(0,W.jsx)(ie().np,{shortcut:e,onChange:r,conflictingShortcuts:t?[t]:[],isMac:s})})})}function fe(){const{notionAiShortcut:e,commandSearchShortcut:t}=(0,o().K8)((()=>{const e=T().A.state.preferences;return{notionAiShortcut:null==e?void 0:e.notionAiShortcut,commandSearchShortcut:null==e?void 0:e.quickSearchShortcut}}),[]),s=(0,i.useCallback)((e=>{d().electronAppFeatures.setPreference("notionAiShortcut",e)}),[]),{isMac:r}=(0,n().Y0)(),l=(0,W.jsx)(a().sA,{id:"desktopNotionAi.shortcut.title",defaultMessage:"Notion AI shortcut"}),c=(0,W.jsx)(a().sA,{id:"desktopNotionAi.shortcut.caption",defaultMessage:"Customize the shortcut to trigger Notion AI, if your workspace has AI enabled."});return(0,W.jsx)(v().A,{isMobile:!1,type:"custom",title:l,caption:c,disableSettingsItemClick:!0,customButton:(0,W.jsx)("div",{children:(0,W.jsx)(ie().np,{shortcut:e,onChange:s,conflictingShortcuts:t?[t]:[],isMac:r})})})}function Se(){const{isMenuBarIconEnabled:e}=(0,o().K8)((()=>{var e;const t=T().A.state;return{isMenuBarIconEnabled:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isMenuBarIconEnabled)}}),[]),t=(0,i.useCallback)((()=>{d().electronAppFeatures.setPreference("isMenuBarIconEnabled",!e)}),[e]),s=(0,W.jsx)(a().sA,{id:"menuBarIconMacSetting.toggle.title",defaultMessage:"Show Notion in menu bar"}),n=(0,W.jsx)(a().sA,{id:"menuBarIconMacSetting.toggle.caption",defaultMessage:"Access Notion faster from the top right of your screen."});return(0,W.jsx)(v().A,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}},454529:(e,t,s)=>{s.d(t,{y:()=>i});const i=(0,s(959013).YK)({offlineSettingsTitle:{id:"offlineSettings.title",defaultMessage:"Offline"},offlinePagesSectionSearchPlaceholder:{id:"offlineSettings.offlinePagesSection.searchPlaceholder",defaultMessage:"Search by name"},offlinePagesSectionSearchIconLabel:{id:"offlineSettings.offlinePagesSection.searchIconLabel",defaultMessage:"Search"}})},461857:(e,t,s)=>{s.d(t,{q:()=>o});s(898992),s(672577);var i=()=>s(449506),n=()=>s(775191);class o{constructor(e){this.environment=void 0,this.environment=e}async confirmIdentity(){const{settings:e,sessionVerificationExpirationInSeconds:t}=await this.loadSettings();return t&&t>2*s(720665).m1?{status:"ready"}:e.length>0?{status:"mfa",settings:e}:{status:"password"}}async loadSettings(){const e=await i().callApi({eventName:"authGetLoginConfiguration",environment:this.environment,data:{}});if("success"===e.type){const{data:t}=e;return"required"===t.samlSignIn?{settings:[],sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}:{settings:t.mfaOptions,sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}}throw e}async sendTemporaryPassword(e){const{email:t}=e,s=await i().callApi({eventName:"sendTemporaryPassword",environment:this.environment,data:{passwordReset:!0,email:t}});if("success"===s.type)return{status:"ok"};throw s}async verifyBackupCode(e){var t;const{code:s}=e,n=s.split("-").join(""),o=await i().callApi({eventName:"authVerifyBackupCodesLogin",environment:this.environment,data:{code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithPassword(e){var t;const{password:s}=e,n=await i().callApi({eventName:"authVerifyPassword",environment:this.environment,data:{password:s}});if("success"===n.type)return{status:"match"};if("incorrect_password"===(null===(t=n.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw n}async disableMFA(){const e=await i().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"disable_all"}});if("success"===e.type)return{status:"ok"};throw e}async verifyIdentityWithTOTP(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifyTotpLogin",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithSMS(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifySmsLogin",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async renameSettings(e){var t,s,n;const{mfaSettingId:o,friendlyName:r}=e,a=await i().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"rename",mfaSettingId:o,friendlyName:r}});if("success"===a.type)return{status:"saved",settings:a.data.mfaOptions};if("mfa_duplicate_friendly_name"===(null===(t=a.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"duplicate"};if("mfa_empty_friendly_name"===(null===(s=a.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"empty"};if("mfa_bad_friendly_name"===(null===(n=a.body)||void 0===n||null===(n=n.clientData)||void 0===n?void 0:n.type))return{status:"bad_friendly_name"};throw a}async deleteSettings(e){const t=await i().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"delete",mfaSettingId:e}});if("success"===t.type)return{settings:t.data.mfaOptions};throw t}async createTOTP(){const e=await i().callApi({eventName:"authCreateTotp",environment:this.environment,data:{}});if("success"===e.type)return{mfaSettingId:e.data.mfaSettingId,secret:e.data.authCode,qrCode:e.data.qrCode};throw e}async verifyTOTP(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifyTotpEnroll",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async createSMS(e,t){var s,n,o,r;const a=await i().callApi({eventName:"authCreateSms",environment:this.environment,data:{countryCode:e,phoneNumber:t}});if("success"===a.type)return{status:"created",mfaSettingId:a.data.mfaSettingId};if("already_verified_phone_number"===(null===(s=a.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"already_verified_phone_number"};if("invalid_country_code"===(null===(n=a.body)||void 0===n||null===(n=n.clientData)||void 0===n?void 0:n.type))return{status:"invalid_country_code"};if("invalid_phone_number"===(null===(o=a.body)||void 0===o||null===(o=o.clientData)||void 0===o?void 0:o.type))return{status:"invalid_phone_number"};if("mfa_sms_unsupported_country_code_for_enrollment"===(null===(r=a.body)||void 0===r||null===(r=r.clientData)||void 0===r?void 0:r.type))return{status:"sms_unsupported_country_code_for_enrollment"};throw a}async verifySMS(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifySmsEnroll",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async sendSMS(e){const{mfaSettingId:t}=e,s=await i().callApi({eventName:"authSendSms",environment:this.environment,data:{mfaSettingId:t}});if("success"===s.type)return{status:"ok"};throw s}async createBackupCodes(e){if(!e){const{settings:e}=await this.loadSettings();if(e.find((e=>"backup_code"===e.mfaMethod)))return{status:"already-exists"}}const t=await i().callApi({eventName:"authCreateBackupCodes",environment:this.environment,data:{}});if("success"===t.type)return{status:"new",mfaSettingId:t.data.mfaSettingId,backupCodes:t.data.codes};throw t}async loadPasskeySettings(){const e=await i().callApi({eventName:"authGetLoginConfiguration",environment:this.environment,data:{}});if("success"===e.type){const{data:t}=e;return{settings:t.passkeys}}throw e}async createPasskeySetting(e){const t=await i().callApi({eventName:"generatePasskeyRegistrationOptions",environment:e,data:{}});if("success"!==t.type)return{created:!1};const{options:s,attemptId:o}=t.data,r=await n().Go({options:s});return r?await n().d6({environment:e,attemptId:o,attestation:r}):{created:!1}}async renamePasskeySetting(e){const t=await i().callApi({eventName:"renamePasskey",environment:this.environment,data:e});if("success"===t.type)return{status:"saved",settings:t.data.passkeys};throw t}async deletePasskeySetting(e){const t=await i().callApi({eventName:"removePasskey",environment:this.environment,data:e});if("success"===t.type)return{settings:t.data.passkeys};throw t}}},480822:(e,t,s)=>{s.d(t,{x:()=>g});s(296540);var i=()=>s(401497),n=()=>s(246760),o=()=>s(959013),r=()=>s(84817),a=()=>s(493823),l=()=>s(187485),d=()=>s(460292),c=()=>s(554509),u=()=>s(859428),p=()=>s(21140),m=s(474848);function g(e){let{quantityOfPaidSeats:t,quantityOfSpaceMembers:s,nextBillingDate:n}=e;const r=(0,i().IS)((e=>({container:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",border:`1px solid ${e.stroke.secondary}`,borderRadius:6}})),[]),a=t-s,l=a<0?(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.seatsTooltipText.gracePeriod",defaultMessage:"At the end of this billing period, you'll be automatically charged for {difference, plural, one {# new seat} other {# new seats}} (since your current billing period is only for {difference, plural, one {# seat} other {# seats}}). Please ensure that the member list is up-to-date.",values:{difference:Math.abs(a),seats:t}}):a>0?(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.seatsTooltipText.remainingSeats",defaultMessage:"You can invite {remainingSeats, plural, one {# more member} other {# more members}} without an additional charge, since you've already paid for those seats this billing period. You can also purchase more seats.",values:{remainingSeats:a}}):(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.seatsTooltipText.noSeats",defaultMessage:"All seats are currently filled"});return(0,m.jsxs)("div",{style:r.container,children:[(0,m.jsx)(h,{title:(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.title.paidSeatsTitle",defaultMessage:"Paid seats"}),titleTooltipContent:(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.paidSeatsTooltip",defaultMessage:"The number of paid seats in your workspace"}),body:t}),(0,m.jsx)(h,{title:(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.title.currentMembersTitle",defaultMessage:"Current members"}),titleTooltipContent:l,body:(0,m.jsxs)(p().Ye,{alignItems:"center",gap:4,children:[(0,m.jsx)("span",{children:s}),a<0?(0,m.jsx)("div",{style:{color:"green",fontSize:10},children:"▲"}):a>0?(0,m.jsx)("div",{style:{color:"gray",fontSize:10},children:"▼"}):null]})}),(0,m.jsx)(h,{customStyles:{borderRight:"none"},title:(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.title.nextBillingPeriodTitle",defaultMessage:"Next billing period"}),titleTooltipContent:(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.nextBillingPeriodTooltip",defaultMessage:"You have paid for seats until the next billing period, and you may purchase more before the next billing period"}),body:n})]})}function h(e){let{title:t,titleTooltipContent:s,body:p,customStyles:g}=e;const h=(0,i().IS)((e=>({container:{padding:16,borderRight:`1px solid ${e.stroke.secondary}`,...g},helpIcon:{borderRadius:3,height:"auto",padding:0}})),[g]);return(0,m.jsxs)("div",{style:h.container,children:[(0,m.jsxs)(r().Y1,{direction:"horizontal",align:"center-left",gap:4,style:{marginBottom:4},children:[(0,m.jsx)(c().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t}),(0,m.jsx)(u().A,{allowHover:!0,textWrap:!0,renderTooltip:e=>(0,m.jsxs)(r().Y1,{width:200,gap:2,style:{whiteSpace:"normal"},...e,children:[s,(0,m.jsx)(l().A,{href:"https://www.notion.so/help/guides/adding-members-admins-and-guests",children:(0,m.jsx)(c().D,{colorName:"contrastSecondary",children:(0,m.jsx)(o().sA,{id:"spaceSettings.people.peopleDashboard.clickToLearnMore",defaultMessage:"Click to learn more"})})})]}),render:e=>(0,m.jsx)(a().p,{...e,style:h.helpIcon,className:"tooltip-button",role:"button",href:"https://www.notion.so/help/guides/adding-members-admins-and-guests",children:(0,m.jsx)(d().Q,{iconGroup:n().G,variantName:"small",colorName:"tertiary"})})})]}),(0,m.jsx)(c().D,{styleName:"Heading-17px/Medium",children:p})]})}},508490:(e,t,s)=>{s.d(t,{A:()=>m});s(296540);var i=()=>s(484714),n=()=>s(401497),o=()=>s(442277),r=()=>s(959013),a=()=>s(284371),l=()=>s(966505),d=()=>s(404141),c=()=>s(197190),u=()=>s(125565),p=s(474848);function m(e){const{icon:t,title:s,deeplinkTab:m}=e,g=(0,i().v3)(),h=(0,n().IS)((e=>({cardContainer:{backgroundColor:e.accentColors.gray[30],width:"100%",marginTop:20,marginBottom:20,padding:10,border:4,display:"flex",alignItems:"center",justifyContent:"space-between",gap:4,overflow:"hidden"},title:{flexShrink:1,...a().RC},titleContainer:{display:"flex",alignItems:"center",flexShrink:1,overflow:"hidden"},button:{borderRadius:2,padding:4,display:"flex",alignItems:"center"},linkTitle:{color:e.mediumTextColor,fontWeight:a().Wy.medium},titleIcon:{marginRight:8,height:20,width:20,color:e.mediumTextColor},arrowIcon:{marginLeft:4,color:e.mediumTextColor,height:14,width:14}})),[]);return(0,p.jsxs)("div",{style:h.cardContainer,children:[(0,p.jsxs)("div",{style:h.titleContainer,children:[t(h.titleIcon),(0,p.jsx)(u().A,{style:h.title,showTooltipWhenTruncated:!0,children:s})]}),m?(0,p.jsxs)(c().A,{onClick:()=>function(e,t){l().Gq(t,{source_tab:d().A.state.currentTab,destination_tab:e.currentTab,destination_subtab:e.defaultSubtab}),d().A.setState({...d().A.state,...e})}(m,g),style:h.button,children:[(0,p.jsx)(u().A,{style:h.linkTitle,children:(0,p.jsx)(r().sA,{id:"settingsDeeplinkBanner.deeplinkMessage",defaultMessage:"View settings"})}),(0,o().B)(h.arrowIcon)]}):null]})}},537296:(e,t,s)=>{s.d(t,{U:()=>c});s(581454);var i=s(296540),n=()=>s(484714),o=()=>s(681873),r=()=>s(722872),a=()=>s(141966),l=()=>s(802790),d=s(474848);function c(e){const{items:t}=e,{isMobile:s}=(0,n().Y0)(),c=(0,r().Tf)(),u=(0,a().H)(s,c);return(0,d.jsx)(d.Fragment,{children:(0,o().A)(t.map((e=>{let{key:t,renderSettingsItem:s}=e;return(0,d.jsx)(i.Fragment,{children:s()},t)})),(e=>(0,d.jsx)(l().A,{size:u,isHidden:!s},e)))})}},538669:(e,t,s)=>{s.d(t,{G:()=>r,N:()=>o});var i=()=>s(534177),n=()=>s(478525);class o extends(()=>s(757695))().default{getInitialState(){return{step:"smsUninitialized"}}}class r extends(()=>s(658921))()._{constructor(e,t){super(e,"sms"),this.service=void 0,this.service=t}smsStart(){this.checkStep("smsUninitialized")&&this.store.setState({step:"smsSetPhoneNumber"})}smsRestart(){const e=this.checkStep(["smsResendSMS","smsVerifyCode","smsVerifying"]);e&&this.store.setState({step:"smsSetPhoneNumber",country:e.country,phoneNumber:e.phoneNumber,error:void 0})}smsCreateSMS(e,t){this.checkStep("smsSetPhoneNumber")&&(this.store.setState({country:e,phoneNumber:t,step:"smsSendingSMS"}),this.doCreateSMS().catch(this.handleUnexpectedError))}smsResendSMS(){const e=this.checkStep(["smsVerifyCode","smsVerifying"]);e&&(this.store.setState({...e,step:"smsResendSMS",error:void 0}),this.doResendSMS().catch(this.handleUnexpectedError))}smsVerifyCode(e){const{code:t,onVerified:s}=e,i=this.checkStep("smsVerifyCode");i&&(this.store.setState({...i,step:"smsVerifying",error:void 0}),this.doVerifyCode({code:t,onVerified:s}).catch(this.handleUnexpectedError))}smsBackupCodesComplete(){this.checkStep("smsBackupCodesLoading")&&this.store.setState({step:"smsVerified"})}smsComplete(){this.checkStep("smsVerified")&&this.store.setState({step:"smsComplete"})}exit(){this.store.setState({step:"smsUninitialized"})}async doCreateSMS(){const e=await this.withStep("smsSendingSMS",(e=>this.service.createSMS(e.country.countryCode,e.phoneNumber)));if(!e)return;const{result:t,state:s}=e;switch(t.status){case"created":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:t.mfaSettingId,error:void 0});break;case"already_verified_phone_number":this.store.setState({step:"smsSetPhoneNumber",error:n().xc.smsAlreadyVerifiedPhoneNumber});break;case"invalid_country_code":this.store.setState({step:"smsSetPhoneNumber",error:n().xc.smsInvalidCountryCode});break;case"invalid_phone_number":this.store.setState({step:"smsSetPhoneNumber",error:n().xc.smsInvalidPhoneCode});break;case"sms_unsupported_country_code_for_enrollment":this.store.setState({step:"smsSetPhoneNumber",error:n().xc.smsUnsupportedCountryCodeForEnrollment});break;default:return(0,i().HB)(t)}}async doVerifyCode(e){const{code:t,onVerified:s}=e,o=await this.withStep("smsVerifying",(e=>this.service.verifySMS({mfaSettingId:e.mfaSettingId,code:t})));if(!o)return;const{result:r,state:a}=o;switch(r.status){case"match":this.store.setState({step:"smsBackupCodesLoading",country:a.country,phoneNumber:a.phoneNumber}),s();break;case"error":this.store.setState({...a,step:"smsVerifyCode",error:n().xc.unexpectedError});break;case"incorrect":this.store.setState({...a,step:"smsVerifyCode",error:n().xc.smsIncorrectCode});break;default:return(0,i().HB)(r.status)}}async doResendSMS(){const e=await this.withStep("smsResendSMS",(e=>this.service.sendSMS({mfaSettingId:e.mfaSettingId})));if(!e)return;const{result:t,state:s}=e;switch(t.status){case"ok":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:s.mfaSettingId,error:void 0,resentAt:Date.now()});break;case"error":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:s.mfaSettingId,error:n().xc.unexpectedError});break;default:return(0,i().HB)(t.status)}}}},541235:(e,t,s)=>{s.d(t,{YD:()=>o,c$:()=>i,q_:()=>n});const i={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},n="completed",o="dismissed"},560686:(e,t,s)=>{s.d(t,{ZK:()=>n,aC:()=>o,lO:()=>r});var i=()=>s(496603);function n(e){if(i().sb(e).length<=3)return{success:!1,reason:{type:"password_too_consistent"}};if(e.length>=15)return{success:!0};if(e.length<8)return{success:!1,reason:{type:"password_too_short"}};const t=o(e),s=r(e);return t&&s?{success:!0}:t||s?s?t?{success:!1,reason:{type:"password_too_short"}}:{success:!1,reason:{type:"password_missing_letter"}}:{success:!1,reason:{type:"password_missing_number"}}:{success:!1,reason:{type:"password_missing_letter_and_number"}}}function o(e){return e.match(/[a-z]/i)}function r(e){return e.match(/\d/)}},579631:(e,t,s)=>{s.d(t,{SS:()=>d,_g:()=>a,co:()=>l,e1:()=>r,kF:()=>n,mu:()=>o});var i=()=>s(989423);function n(e,t){i().vd(e,"toggle_open_in_desktop_app",t)}function o(e){i().vd(e,"configure_open_in_desktop_app")}function r(e){i().vd(e,"open_in_desktop_app_popup_dismiss")}function a(e){i().vd(e,"open_in_desktop_app_popup_display")}function l(e){i().vd(e,"open_in_desktop_app_popup_download")}function d(e,t){i().vd(e,"open_in_desktop_app_popup_open_in_app",t)}},580635:(e,t,s)=>{s.d(t,{F:()=>E,Q:()=>V});s(898992),s(354520),s(803949),s(581454);var i=s(296540),n=()=>s(484714),o=()=>s(56366),r=()=>s(401497),a=()=>s(715256),l=()=>s(831310),d=()=>s(668725),c=()=>s(735384),u=()=>s(959013),p=()=>s(100622),m=()=>s(534177),g=()=>s(284371),h=()=>s(449506),f=()=>s(722872),S=()=>s(508496),y=()=>s(686594),x=()=>s(493823),b=()=>s(760217),v=()=>s(406699),A=()=>s(285790),w=()=>s(297872),j=()=>s(623580),M=()=>s(187485),k=()=>s(331542),C=()=>s(928600),I=()=>s(939740),_=()=>s(864943),T=()=>s(824160),P=()=>s(228927),B=()=>s(89924),R=()=>s(843878),D=()=>s(8178),N=()=>s(702723),L=()=>s(987017),U=()=>s(317182),O=s(474848);function E(){const e=(0,n().v3)(),[t,s]=(0,i.useState)(""),[l,d]=(0,i.useState)(void 0),[c,u]=(0,i.useState)([]),[p,f]=(0,i.useState)(0),[x,b]=(0,i.useState)(20),v=(0,o().K8)((()=>S().default.isStatsigEnabled()),[]),A=(0,o().K8)((()=>S().default.checkGate({gateName:"replace_local_overrides_with_statsig",disableExposureLogging:!0})),[]),w=(0,o().K8)((()=>v?function(){const e=new Map,t=y().A.getStatsigClient();return a().T_.forEach((s=>{var i;const n=null==t?void 0:t.getExperiment(s,{disableExposureLog:!0});e.set(s,{experimentId:s,experimentVersion:1,group:S().default.getEligibleGroup({experimentId:s,defaultGroup:a().CJ,disableExposureLogging:!0}),hasStatsigUserOverride:(null==n||null===(i=n.ruleID)||void 0===i?void 0:i.endsWith(":userID:id_override"))||!1,groups:[...(0,a().XZ)(s),"control",a().CJ],statsigOption:"EXPERIMENT",isActive:y().A.getIsExperimentActive(s)})})),a().GI.forEach((s=>{var i;const n=null==t?void 0:t.getFeatureGate(s,{disableExposureLog:!0});e.set(s,{experimentId:s,experimentVersion:1,group:S().default.checkGate({gateName:s,disableExposureLogging:!0}).toString(),hasStatsigUserOverride:(null==n||null===(i=n.ruleID)||void 0===i?void 0:i.endsWith(":id_override"))||!1,groups:["true","false"],statsigOption:"FEATUREGATE",isActive:!0})})),e}():new Map),[v]),M=(0,i.useMemo)((()=>[...w.values()]),[w]),C=(0,i.useMemo)((()=>M.filter((e=>e.hasStatsigUserOverride||c.includes(e.experimentId)))),[M,c]),I=(0,i.useMemo)((()=>M.filter((e=>!t||0===t.length||e.experimentId.includes(t))).sort(((e,t)=>e.experimentId>t.experimentId?1:-1))),[M,t]),T=(0,i.useMemo)((()=>M.filter((e=>!e.isActive)).length),[M]),B=(0,i.useMemo)((()=>I.filter((e=>!e.isActive))),[I]),{gate:R={},experiment:N={}}=y().A.getAllLocalOverrides()??{},U=[...Object.keys(R).map((e=>w.get(e))),...Object.keys(N).map((e=>w.get(e)))].filter(m().O9);(0,i.useEffect)((()=>{A&&U.length>0&&async function(){u(U.map((e=>e.experimentId)));for(const t of U)"EXPERIMENT"===t.statsigOption&&t.group?await h().callApi({eventName:"setStatsigExperimentUserOverride",environment:e,data:{experimentName:t.experimentId,group:t.group}}):"FEATUREGATE"===t.statsigOption&&await h().callApi({eventName:"setStatsigGateUserOverride",environment:e,data:{gateName:t.experimentId,enabled:"true"===t.group}});y().A.removeAllLocalOverrides()}()}),[A,U,e]);const E=(0,r().IS)((e=>({containerStyle:{width:"100%",overflow:"hidden"},filterContainerStyle:{marginLeft:"auto",flexGrow:1,maxWidth:300},description:{display:"flex",alignItems:"flex-start",cursor:"pointer",width:"100%",flexWrap:"wrap",fontSize:12,color:e.mediumTextColor,marginTop:2,marginBottom:16},headerContainer:{fontSize:14,display:"flex",alignItems:"center",paddingBottom:4},overridesHeaderContainer:{fontSize:14,display:"flex",alignItems:"center",paddingBottom:4,height:25},resetButtonContainerStyle:{marginLeft:"auto"}})),[]);return(0,O.jsxs)("div",{style:E.containerStyle,children:[(0,O.jsxs)(D().A,{large:!0,divider:"full",style:{marginBottom:4,paddingBottom:4,display:"flex"},children:["Experiments",(0,O.jsx)("div",{style:{marginLeft:"auto"},children:(0,O.jsx)(_().A,{style:{fontWeight:g().Wy.regular},size:"sm",onClick:()=>{const e=I.map((e=>{const t=e.group;return`${`${e.statsigOption}:${e.experimentId}`}\t${t}`})).join("\n");console.log(e)},children:null!=l&&l.reset?(0,O.jsx)(k().A,{}):"Print all to console"})})]}),(0,O.jsxs)("div",{style:E.description,children:[(0,O.jsx)("div",{children:A?"Set overrides for your user that affect the client and server. If setting an override is still showing old data, try refreshing the page.":"For server-side/production configs, go to console.statsig.com."}),(0,O.jsx)("div",{children:"If an experiment is marked as 'STALE', it is likely no longer active and should be cleaned up!"})]}),!A&&(0,O.jsxs)("div",{style:{marginBottom:20},children:[(0,O.jsxs)("div",{style:E.overridesHeaderContainer,children:[(0,O.jsx)("div",{style:{fontWeight:g().Wy.medium},children:"Local overrides"}),U.length>0?(0,O.jsx)("div",{style:E.resetButtonContainerStyle,children:(0,O.jsx)(_().A,{size:"sm",onClick:()=>{d({reset:!0}),y().A.removeAllLocalOverrides(),d(void 0)},children:null!=l&&l.reset?(0,O.jsx)(k().A,{}):"Clear overrides"})}):null]}),(0,O.jsx)(F,{experimentSettings:U,emptyPlaceholder:"No overridden values",experimentUpdatingState:l,setExperimentUpdatingState:d,overrideUpdates:c,setOverrideUpdates:u})]}),A&&(0,O.jsxs)("div",{style:{marginBottom:20},children:[(0,O.jsx)("div",{style:E.overridesHeaderContainer,children:(0,O.jsx)("div",{style:{fontWeight:g().Wy.medium},children:"Statsig overrides"})}),(0,O.jsx)(F,{experimentSettings:C,emptyPlaceholder:"No overridden values from statsig",experimentUpdatingState:l,setExperimentUpdatingState:d,overrideUpdates:c,setOverrideUpdates:u,showDelete:!0})]}),(0,O.jsx)("div",{style:{...E.headerContainer,height:void 0},children:(0,O.jsx)(L().Ay,{style:{paddingLeft:0},tabs:[(0,O.jsx)("div",{children:`All (${M.length})`},"all"),(0,O.jsx)("div",{style:{display:"flex",alignItems:"center"},children:`Stale (${T})`},"stale")],selectedIndex:p,onChange:e=>f(e),right:(0,O.jsx)("div",{style:E.filterContainerStyle,children:(0,O.jsx)(j().A,{placeholder:"Search...",value:t,showClearButton:!0,autoCapitalize:"off",autoComplete:"off",onChange:e=>{s(e.target.value)}})})})}),(0,O.jsx)(F,{experimentSettings:"stale"===["all","stale"][p]?B:I,emptyPlaceholder:"No results",experimentUpdatingState:l,setExperimentUpdatingState:d,overrideUpdates:c,setOverrideUpdates:u,maxRenderSize:x,showStale:!0,hideTopBorderForFirstRow:!0}),(0,O.jsx)(P().A,{onChange:e=>{e<200&&b(x+50)}})]})}function F(e){let{experimentSettings:t,emptyPlaceholder:s,experimentUpdatingState:i,setExperimentUpdatingState:n,overrideUpdates:o,setOverrideUpdates:a,maxRenderSize:l,showDelete:d,showStale:c,hideTopBorderForFirstRow:u}=e;const p=(0,r().IS)((e=>({emptyState:{borderTop:`1px solid ${e.regularDividerColor}`,paddingTop:12,paddingLeft:10,paddingBottom:14,color:e.mediumTextColor,fontSize:12},experimentNameCell:{paddingLeft:10,paddingRight:10,flexGrow:1,flexShrink:1,overflow:"hidden"},experimentOverrideCell:{paddingLeft:10,paddingRight:10,display:"inline-flex",justifyContent:"space-between",flexGrow:1,flexShrink:0},tableStyle:{display:"block"},tableBodyStyle:{display:"block"},rowStyle:{overflow:"hidden",display:"flex",alignItems:"center"},tableExperimentIDHeaderStyle:{width:"auto"},tableExperimentGroupHeaderStyle:{width:"auto",textAlign:"right"}})),[]),m=[{key:"name",header:"Name",style:p.tableExperimentIDHeaderStyle},{key:"value",header:"Value",style:p.tableExperimentGroupHeaderStyle}];if(!t.length)return(0,O.jsx)("div",{style:p.emptyState,children:s});const g=l?t.slice(0,l):t;return(0,O.jsx)(U().A,{tableStyle:{borderTop:void 0,...p.tableStyle},tableBodyStyle:p.tableBodyStyle,rowStyle:p.rowStyle,cellStyle:e=>{let{columnIndex:t}=e;return 0===t?p.experimentNameCell:p.experimentOverrideCell},columns:m,hideHeader:!0,hideTopBorderForFirstRow:u,rows:g.map((e=>({key:e.experimentId,columns:[(0,O.jsx)(q,{name:e.experimentId,statsigType:e.statsigOption,isStale:c&&!e.isActive},`${e.experimentId}-title`),(0,O.jsx)(G,{experiment:e,experimentUpdatingState:i,onUpdate:e=>{n(e),null!=e&&e.experimentId&&a([...o,null==e?void 0:e.experimentId])},onRefresh:()=>{a([])},refreshNeeded:o.includes(e.experimentId),showDelete:d,showStale:c},`${e.experimentId}-value`)]})))})}function V(e){const t=(0,r().IS)((e=>({headerLabelStyle:{marginTop:2,width:"80%"},PlainButtonStyle:{marginTop:12,marginBottom:4}})),[]);return(0,O.jsx)(N().A,{type:"custom",isMobile:!0,title:"Experiments",disableSettingsItemClick:!0,caption:"Locally toggle experiments.",shouldHighlight:!1,customButton:(0,O.jsx)(v().Ay,{popupType:v().z7.SlideUp,renderOrigin:e=>(0,O.jsx)(_().A,{...e,size:"lg",style:t.PlainButtonStyle,children:"View Experiments"}),render:e=>{const t={menuType:f().gu.Modal,whiteBackground:!0,title:"Experiments",right:(0,O.jsx)(u().sA,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:e.close};return(0,O.jsx)(w().A,{capture:!0,allowEsc:!0,render:()=>(0,O.jsx)(C().A,{...t,children:(0,O.jsx)(R().Ay,{disableScroller:!0,children:(0,O.jsx)(E,{})})})})}})})}function q(e){const{statsigType:t,name:s,isStale:i}=e,o=(0,n().Y0)().isMobile,a=(0,r().IS)((e=>({experimentId:{flexShrink:1,marginRight:5,maxWidth:o?215:300,...g().RC,color:i?e.lightTextColor:void 0},experimentInfo:{display:"flex",flexDirection:o?"column":"row",alignItems:"center"},stalePill:{background:e.redBadgeBackground,color:"white"},typePill:{background:"FEATUREGATE"===t?e.accentColors.blue[100]:e.accentColors.green[100]}})),[o,i,t]);return(0,O.jsxs)("div",{style:a.experimentInfo,children:[(0,O.jsx)("span",{style:a.experimentId,children:s}),t&&(0,O.jsx)(T().A,{innerStyle:a.typePill,children:(0,O.jsx)(M().A,{href:`https://console.statsig.com/6TSma7coh47E7CjMbuSVCO/${"FEATUREGATE"===t?"gates":"experiments"}/${s}`,external:!0,children:`${t}`})}),(0,O.jsx)("div",{style:{marginLeft:4},children:i&&(0,O.jsx)(T().A,{innerStyle:a.stalePill,children:"Stale"})})]})}function G(e){const{experiment:t,experimentUpdatingState:s,onUpdate:i,showDelete:m,showStale:w,refreshNeeded:j,onRefresh:M}=e,_=(0,u().tz)(),T=(0,n().v3)(),P=(0,n().Y0)().isMobile,R=(0,o().K8)((()=>S().default.checkGate({gateName:"replace_local_overrides_with_statsig",disableExposureLogging:!0})),[]),D=(0,r().IS)((e=>({experimentGroup:{maxWidth:P?90:300,...g().RC,color:w&&!t.isActive?e.lightTextColor:void 0},experimentGroupButtonCheckContainerStyle:{width:P?16:14},experimentGroupButtonChevronStyle:{width:10,marginLeft:4,fill:e.lightIconColor},experimentGroupButtonStyle:{overflowX:"hidden",justifyContent:"left"},experimentGroupContainerStyle:{width:"100%",display:"flex",justifyContent:"flex-end",alignItems:"center"},refreshNeededText:{color:e.accentColors.red[500]},deleteIcon:{stroke:e.accentColors.red[400]}})),[P,w,t]),N=(null==s?void 0:s.experimentId)===t.experimentId;return R&&!N&&j?(0,O.jsx)("div",{style:D.experimentGroupContainerStyle,children:(0,O.jsx)(x().p,{style:D.experimentGroupButtonStyle,onClick:async()=>{var e;const s=y().A.getStatsigClient(),n=null==s||null===(e=s.getContext())||void 0===e?void 0:e.user;s&&n&&(i({experimentId:t.experimentId,group:a().CJ}),await new Promise((e=>{setTimeout(e,5e3)})),await s.updateUserAsync(n),M&&M(),y().A.emit(),i(void 0))},children:(0,O.jsxs)("div",{style:D.refreshNeededText,children:["Refresh to update"," "]})})}):(0,O.jsxs)("div",{style:D.experimentGroupContainerStyle,children:[(0,O.jsx)(v().Ay,{popupType:P?v().z7.SlideUp:v().z7.Popup,disabled:N,renderOrigin:e=>(0,O.jsx)(x().p,{...e,style:D.experimentGroupButtonStyle,children:N?(0,O.jsx)(k().A,{}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("span",{style:D.experimentGroup,children:t.group??"unknown"}),(0,d().b)(D.experimentGroupButtonChevronStyle)]})}),render:e=>{let n;n=P?{menuType:f().gu.Modal,title:t.experimentId,right:(0,O.jsx)(u().sA,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:e.close}:{menuType:f().gu.Popup,width:250};const o=t.groups.map((n=>{const o={key:n,action:()=>{var s;let o;R?"EXPERIMENT"===t.statsigOption?o=h().callApi({eventName:"setStatsigExperimentUserOverride",environment:T,data:{experimentName:t.experimentId,group:n}}):"FEATUREGATE"===t.statsigOption&&(o=h().callApi({eventName:"setStatsigGateUserOverride",environment:T,data:{gateName:t.experimentId,enabled:"true"===n}})):"EXPERIMENT"===t.statsigOption?o=new Promise((e=>{y().A.updateLocalOverrideConfig(t.experimentId,n),e(n)})):"FEATUREGATE"===t.statsigOption&&(o=new Promise((e=>{y().A.updateLocalOverrideGate(t.experimentId,n),e(n)}))),i({experimentId:t.experimentId,group:n}),e.close(),null===(s=o)||void 0===s||s.then((()=>{i(void 0)}))},render:e=>{const i=n===a().CJ;return(0,O.jsx)(b().A,{...e,title:n,right:s&&s.experimentId===t.experimentId&&s.group===n?(0,O.jsx)("div",{style:D.experimentGroupButtonCheckContainerStyle,children:(0,O.jsx)(k().A,{})}):n!==t.group||s?void 0:(0,O.jsx)("div",{style:D.experimentGroupButtonCheckContainerStyle,children:(0,l().o)()}),disabled:i,style:{...i&&{color:p().Ay.mediumTextColor}}})}};return o}));return(0,O.jsx)(C().A,{...n,children:(0,O.jsx)(I().Ay,{type:I().Oh.Vertical,initialFocus:void 0,sections:[{key:t.experimentId,render:e=>(0,O.jsx)(B().A,{...e}),items:o}]})})}}),m?(0,O.jsx)(A().A,{icon:c().I,iconStyle:D.deleteIcon,ariaLabel:_.formatMessage({id:"experimentSettings.deleteOverride",defaultMessage:"Delete override for {experimentId}"},{experimentId:t.experimentId}),onClick:async()=>{i({experimentId:t.experimentId,group:a().CJ}),"EXPERIMENT"===t.statsigOption?await h().callApi({eventName:"deleteStatsigExperimentUserOverride",environment:T,data:{experimentName:t.experimentId}}):"FEATUREGATE"===t.statsigOption&&await h().callApi({eventName:"deleteStatsigGateUserOverride",environment:T,data:{gateName:t.experimentId}}),i(void 0)}}):null]})}},583705:(e,t,s)=>{s.d(t,{$:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("group",{viewBox:"0 0 30 30",svg:(0,i.jsx)("path",{d:"M15.011 14.795c1.678 0 3.096-1.502 3.096-3.444C18.107 9.455 16.682 8 15.012 8c-1.67 0-3.096 1.478-3.088 3.367 0 1.926 1.41 3.428 3.088 3.428zm-8.872.178c1.464 0 2.697-1.316 2.697-3.003 0-1.656-1.241-2.917-2.697-2.917-1.448 0-2.697 1.284-2.69 2.933 0 1.671 1.234 2.987 2.69 2.987zm17.722 0c1.456 0 2.69-1.316 2.69-2.987.007-1.649-1.242-2.933-2.69-2.933s-2.697 1.261-2.697 2.917c0 1.687 1.241 3.003 2.697 3.003zM1.917 22h5.747c-.82-1.184.069-3.521 1.8-4.899-.842-.55-1.946-.952-3.325-.952C2.714 16.15.5 18.695.5 20.793.5 21.559.883 22 1.917 22zm26.166 0c1.034 0 1.417-.441 1.417-1.207 0-2.098-2.214-4.644-5.64-4.644-1.378 0-2.474.403-3.317.952 1.732 1.378 2.62 3.715 1.8 4.899h5.74zm-17.852-.008h9.554c1.264 0 1.7-.387 1.7-1.099 0-1.989-2.505-4.728-6.473-4.728-3.977 0-6.475 2.74-6.475 4.728 0 .712.437 1.1 1.693 1.1z"})})},610716:(e,t,s)=>{s.d(t,{S:()=>O,h:()=>N});var i=s(296540),n=()=>s(484714),o=()=>s(56366),r=()=>s(401497),a=()=>s(110750),l=()=>s(381138),d=()=>s(427704),c=()=>s(959013),u=()=>s(435009),p=()=>s(802790),m=()=>s(285790),g=()=>s(419357),h=()=>s(928600),f=()=>s(45552),S=()=>s(864943),y=()=>s(89924),x=()=>s(702723),b=()=>s(989423),v=()=>s(722872),A=()=>s(141966),w=()=>s(963589),j=()=>s(575301),M=()=>s(722038),k=()=>s(454529),C=()=>s(651761),I=()=>s(405425),_=()=>s(931404),T=()=>s(934679),P=()=>s(682817),B=()=>s(413107),R=()=>s(966480),D=s(474848);function N(){const e=(0,n().v3)(),t=(0,c().tz)(),s=(0,M().y)(),r=(0,i.useCallback)((e=>{u().aX(e)}),[]),l=(0,o().K8)((()=>(0,a().Xz)(e.TabbedRouterStore.state)),[e]),d=(0,o().K8)((()=>{var e,t;return Boolean("web"===l.type&&("nativeTab"===l.route.name&&"offline"===l.route.tab||"nativeTab"===(null===(e=l.redirectedTo)||void 0===e?void 0:e.route.name)&&"offline"===(null===(t=l.redirectedTo)||void 0===t?void 0:t.route.tab)))}),[l]);return(0,i.useLayoutEffect)((()=>{if(d){var t;null===(t=e.mobileNative)||void 0===t||t.markTransitionReady({type:"offline_settings"});const s=e.RouterStore.state.route,i="nativeTab"===s.name&&"offline"===s.tab?s.from:void 0;(0,b().u4)({environment:e,event:{eventName:"mobile_settings_navigation",eventProperties:{target:"offline_settings",from:i}}})}}),[e,d]),s?(0,D.jsx)(h().A,{menuType:v().gu.Modal,title:t.formatMessage(k().y.offlineSettingsTitle),left:(0,D.jsx)(f().MobileModalBackButton,{}),onClickLeft:()=>r(e),onCancel:()=>r(e),shouldRenderMobileRefresh:!0,disableScroller:!0,children:(0,D.jsx)(U,{})}):null}function L(e){const{searchQuery:t,setSearchQuery:s,setSearchOpen:i,disabled:n}=e,o=(0,c().tz)(),a=(0,r().IS)((e=>({searchIcon:{width:14,height:14,fill:e.mediumIconColor}})),[]);return(0,D.jsx)(g().Ay,{disabled:n,placeholder:o.formatMessage(k().y.offlinePagesSectionSearchPlaceholder),inputLeft:(0,l().q)(a.searchIcon),value:t,forceShowClearButton:!0,focusInitial:!0,onChange:e=>s(e.target.value),onClearButtonClick:()=>{t.length>0?s(""):i(!1)}})}function U(){const e=(0,c().tz)(),[t,s]=(0,i.useState)(!1),[n,o]=(0,i.useState)(""),[a,d]=(0,i.useState)("all"),u=(0,I().Q)({searchQuery:n,filterCategory:a}),g=(0,C().s)(u,{column:R().BI,sortAscending:!1}),h=0===g.length,f=(0,j().o_)(),S=(0,w().X)("offline_clear_cache"),x=(0,r().IS)((e=>({container:{display:"flex",flexDirection:"column",height:"100%",paddingBottom:f},tableContainer:{flex:1,overflowY:"scroll"},tableContainerInner:{background:h?void 0:e.contentBackground,paddingLeft:8,paddingRight:8,paddingTop:0},searchFilterContainer:{paddingLeft:16,paddingRight:16,marginTop:16,display:"flex",alignItems:"center",justifyContent:"space-between",height:45},searchButton:{height:40,width:40},searchButtonIcon:{width:20,height:20,fill:e.mediumIconColor}})),[h,f]);return(0,D.jsxs)("div",{style:x.container,children:[(0,D.jsxs)("div",{style:{flex:0},children:[(0,D.jsx)(p().A,{size:16,isHidden:!0}),S?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(y().A,{mobileStyle:{borderRadius:0},disableMobilePadding:!0,children:(0,D.jsx)(B().L,{})}),(0,D.jsx)(p().A,{size:(0,A().H)(!0,!0),style:{paddingLeft:16,paddingRight:16}})]}):null,(0,D.jsx)(y().A,{mobileStyle:{borderRadius:0},disableMobilePadding:!0,children:(0,D.jsx)(_().N,{})}),(0,D.jsx)(p().A,{size:(0,A().H)(!0,!0),style:{paddingLeft:16,paddingRight:16}}),(0,D.jsx)(y().A,{mobileStyle:{borderRadius:0},disableMobilePadding:!0,children:(0,D.jsx)(P().f3,{})}),!t&&(0,D.jsxs)("div",{style:x.searchFilterContainer,children:[(0,D.jsx)(T().m,{filterCategory:a,setFilterCategory:d}),(0,D.jsx)(m().A,{icon:l().q,iconStyle:x.searchButtonIcon,style:x.searchButton,disabled:!1,onClick:()=>s(!t),ariaLabel:e.formatMessage(k().y.offlinePagesSectionSearchIconLabel)})]}),t&&(0,D.jsx)(y().A,{children:(0,D.jsx)(L,{searchQuery:n,setSearchQuery:o,setSearchOpen:s,disabled:!1})}),(0,D.jsx)(p().A,{size:16,isHidden:!0})]}),(0,D.jsx)("div",{style:x.tableContainer,children:(0,D.jsx)(y().A,{mobileStyle:x.tableContainerInner,disableMobilePadding:!0,children:(0,D.jsx)(P().oL,{hideHeaderRow:!0,columnRenderInfo:[R().T0,R().jc],rows:g,sortState:void 0,onSortStateChanged:void 0,searchQuery:n})})})]})}function O(e){const t=(0,n().v3)(),s=(0,c().tz)(),o=(0,i.useCallback)((()=>{u().oo({environment:t,url:`${d().GJ.nativeTab}/offline?from=settings`})}),[t]);return(0,D.jsx)(x().A,{type:"custom",isMobile:!0,title:s.formatMessage(k().y.offlineSettingsTitle),disableSettingsItemClick:!0,caption:(0,D.jsx)(c().sA,{id:"mobileSettings.offline.description",defaultMessage:"Manage your workspace storage and offline pages."}),shouldHighlight:!1,customButton:(0,D.jsx)(S().A,{size:"lg",style:{marginTop:12,marginBottom:4},onClick:o,children:(0,D.jsx)(c().sA,{id:"mobileSettings.offline.cta",defaultMessage:"Manage"})})})}},611308:(e,t,s)=>{s.d(t,{A:()=>n});class i extends(()=>s(757695))().default{getInitialState(){return{modalInfoById:{}}}async showModal(e){const t=s(206267).JW();return new Promise((s=>{const i=e((e=>{s(e),this.internalCloseModal(t,(()=>{this.internalRemoveModal(t)}))}));this.update((e=>({modalInfoById:{...e.modalInfoById,[t]:{...i,isOpen:!0}}})))}))}internalRemoveModal(e){this.update((t=>{const s={...t.modalInfoById};return delete s[e],{modalInfoById:s}}))}internalCloseModal(e,t){this.update((s=>({modalInfoById:{...s.modalInfoById,[e]:{...s.modalInfoById[e],isOpen:!1,onClosed:t}}})))}}const n=new i},640479:(e,t,s)=>{s.d(t,{r:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("setPassword",{viewBox:"0 0 31 21",svg:(0,i.jsx)("path",{d:"M29.4746 3.43945L30.1777 2.7168C30.5684 2.32617 30.5781 1.7793 30.1973 1.39844L29.9336 1.14453C29.6016 0.802734 29.0352 0.851562 28.6641 1.22266L27.9609 1.91602L29.4746 3.43945ZM18.2441 13.4883L20.3047 12.5996L28.7227 4.18164L27.209 2.6875L18.8008 11.0957L17.8633 13.0977C17.7656 13.3223 18.0195 13.5859 18.2441 13.4883ZM3.40039 20.0508H23.6543C25.5 20.0508 26.5254 19.0547 26.5254 17.2188V8.88867L24.5918 10.8223V17.0625C24.5918 17.8242 24.1621 18.2637 23.3906 18.2637H3.6543C2.88281 18.2637 2.45312 17.8242 2.45312 17.0625V8.91797C2.45312 8.14648 2.88281 7.7168 3.6543 7.7168H19.6504L21.4375 5.93945H3.40039C1.54492 5.93945 0.519531 6.92578 0.519531 8.77148V17.2188C0.519531 19.0547 1.54492 20.0508 3.40039 20.0508ZM6.06641 14.4453C6.85742 14.4453 7.51172 13.791 7.51172 12.9902C7.51172 12.1895 6.85742 11.5449 6.06641 11.5449C5.25586 11.5449 4.61133 12.1895 4.61133 12.9902C4.61133 13.791 5.25586 14.4453 6.06641 14.4453ZM10.373 14.4453C11.1738 14.4453 11.8184 13.791 11.8184 12.9902C11.8184 12.1895 11.1738 11.5449 10.373 11.5449C9.57227 11.5449 8.91797 12.1895 8.91797 12.9902C8.91797 13.791 9.57227 14.4453 10.373 14.4453ZM14.6797 14.4453C15.4805 14.4453 16.1348 13.791 16.1348 12.9902C16.1348 12.1895 15.4805 11.5449 14.6797 11.5449C13.8789 11.5449 13.2344 12.1895 13.2344 12.9902C13.2344 13.791 13.8789 14.4453 14.6797 14.4453Z"})})},644484:(e,t,s)=>{s.d(t,{g:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("addPerson",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M9.48242 7.91211C10.8076 7.91211 11.8352 6.77783 11.8352 5.35718C11.8352 4.00391 10.7908 2.84717 9.48242 2.84717C8.17407 2.84717 7.12964 4.00952 7.13525 5.36279C7.14087 6.77783 8.16284 7.91211 9.48242 7.91211ZM9.48242 8.87231C8.7356 8.87231 8.04492 8.99585 7.44409 9.22046C8.23022 9.95044 8.72437 10.9836 8.72437 12.1235C8.72437 12.511 8.66821 12.8872 8.55591 13.2466H12.8684C13.969 13.2466 14.3171 12.8479 14.3171 12.2302C14.3171 10.804 12.3967 8.87231 9.48242 8.87231ZM4.74316 15.1895C6.42212 15.1895 7.80347 13.7969 7.80347 12.1235C7.80347 10.4558 6.42212 9.06885 4.74316 9.06885C3.06982 9.06885 1.68286 10.4558 1.68286 12.1235C1.68286 13.7969 3.06982 15.1895 4.74316 15.1895ZM4.74316 14.1675C4.41187 14.1675 4.18726 13.9429 4.18726 13.6172V12.6907H3.27197C2.94629 12.6907 2.72168 12.4661 2.71606 12.1292C2.71045 11.7979 2.93506 11.5732 3.27197 11.5732H4.18726V10.6636C4.18726 10.3379 4.41187 10.1133 4.74316 10.1077C5.08008 10.1021 5.30469 10.3267 5.30469 10.6636V11.5732H6.22559C6.55127 11.5732 6.77588 11.7979 6.77588 12.1292C6.77588 12.4661 6.55127 12.6907 6.22559 12.6907H5.30469V13.6172C5.30469 13.9429 5.08008 14.1675 4.74316 14.1675Z"})})},651761:(e,t,s)=>{s.d(t,{s:()=>n});var i=()=>s(496603);function n(e,t){let{sortAscending:s}=t;const n=s?"asc":"desc";return i().My(e,["lastModifiedTime"],[n])}},653027:(e,t,s)=>{s.d(t,{A:()=>Ce});var i=s(296540),n=()=>s(484714),o=()=>s(56366),r=()=>s(534177),a=()=>s(775191),l=()=>s(186445),d=()=>s(401497),c=()=>s(373204),u=()=>s(959013),p=()=>s(284371),m=()=>s(508382),g=()=>s(274602),h=s(474848);function f(e){const{errorMessage:t,onStartTOTP:s,onStartSMS:n,onDismiss:o}=e,r=(0,d().IS)(S,[]),a=(0,h.jsx)(u().sA,{id:"mfa.turnOnSettings.title",defaultMessage:"Turn on 2-step verification"}),l=(0,h.jsx)(u().sA,{id:"mfa.turnOnSettings.message",defaultMessage:"Confirm it's you when you use a password with a verification code"}),p=(0,i.useMemo)((()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(m().A,{type:"totp",title:(0,h.jsx)(u().sA,{id:"mfa.turnOnSettings.setupAuthenticator.button.title",defaultMessage:"Code from authenticator"}),caption:(0,h.jsx)(u().sA,{id:"mfa.turnOnSettings.setupAuthenticator.button.message",defaultMessage:"Generate a one-time code in your authenticator app"}),onClick:s,style:r.button}),(0,h.jsx)(m().A,{type:"sms",title:(0,h.jsx)(u().sA,{id:"mfa.turnOnSettings.setupSMS.button.title",defaultMessage:"Text me a code"}),caption:(0,h.jsx)(u().sA,{id:"mfa.turnOnSettings.setupSMS.button.message",defaultMessage:"Add and verify your phone number"}),onClick:n,style:r.button})]})),[r,n,s]);return(0,h.jsx)(g().A,{title:a,header:l,children:p,icon:(0,c().K)(r.icon),errorMessage:t,onDismiss:o})}function S(e){return(0,d().$4)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:p().Wy.medium,marginBottom:8},icon:{width:30,height:30,fill:e.regularIconColor}})}var y=()=>s(735384),x=()=>s(331542);function b(e){const{isLoading:t,mfaSetting:s,errorMessage:i,onDismiss:n,onCancel:o,onDeleteMethod:a}=e,l=(0,d().IS)(v,[]),c={text:t?(0,h.jsx)(x().A,{}):(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>a(s),isRed:!0},p=[{text:(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:o,type:"button",view:"outline"}];return(0,h.jsx)(g().A,{title:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.sms.title",defaultMessage:"Delete {phoneHint}",values:{phoneHint:s.phoneNumber}});case"totp":return(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.totp.title",defaultMessage:"Delete {friendlyName}",values:{friendlyName:s.friendlyName}});default:return(0,r().HB)(e)}})(),header:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.sms.header",defaultMessage:"Once deleted, you will no longer receive codes sent to {phoneHint}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{phoneHint:s.phoneNumber,boldtext:e=>(0,h.jsx)("span",{style:l.boldText,children:e})}});case"totp":return(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.totp.header",defaultMessage:"Once deleted, you will no longer be able to use codes generated from {friendlyName}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{friendlyName:s.friendlyName,boldtext:e=>(0,h.jsx)("span",{style:l.boldText,children:e})}});default:return(0,r().HB)(e)}})(),icon:(0,y().I)(l.crossIcon),primaryAction:c,secondaryActions:p,errorMessage:i,onDismiss:n})}function v(e){return(0,d().$4)({crossIcon:{width:30,fill:"red"},boldText:{fontWeight:p().Wy.semibold}})}s(581454);var A=()=>s(920949),w=()=>s(836251);const j=(0,s(340498).wt)("lockedFilledRedOutlinedWhite",{viewBox:"0 0 11 15",svg:(0,h.jsx)("path",{d:"M2.48352 14.5H8.51649C9.08993 14.5 9.61159 14.3415 9.98454 13.9481C10.3531 13.5594 10.5 13.0215 10.5 12.423V7.8578C10.5 7.33161 10.3876 6.85321 10.1075 6.47956C9.90863 6.21422 9.64758 6.03138 9.34616 5.92009V4.70387C9.34616 3.34493 8.90074 2.28402 8.17081 1.56217C7.44518 0.844569 6.47639 0.5 5.49671 0.5C4.51986 0.5 3.55273 0.844872 2.82813 1.5624C2.09925 2.28417 1.65385 3.34494 1.65385 4.70387V5.9209C1.35431 6.03229 1.09426 6.21478 0.895574 6.47875C0.614816 6.85174 0.5 7.32992 0.5 7.8578V12.423C0.5 13.0215 0.646934 13.5594 1.01546 13.9481C1.38841 14.3415 1.91008 14.5 2.48352 14.5ZM3.7022 4.5581C3.7022 3.8322 3.93059 3.32509 4.24526 3.00203C4.56164 2.67723 5.00162 2.50051 5.49671 2.50051C5.99216 2.50051 6.43618 2.67753 6.75611 3.00343C7.07385 3.3271 7.30439 3.83398 7.30439 4.5581V5.78746H3.7022V4.5581Z",fill:"#E12D2D",stroke:"white"})});var M=()=>s(453697);function k(e){const{userStore:t}=e,s=(0,d().IS)(C,[]);return(0,h.jsxs)("div",{style:s.iconContainer,children:[(0,h.jsx)(M().A,{userStore:t,size:36,avatarShouldShowShadow:!0,style:s.userIcon}),(0,h.jsx)("span",{children:j(s.lockIcon)})]})}function C(){return(0,d().$4)({iconContainer:{position:"relative"},userIcon:{position:"relative"},lockIcon:{position:"absolute",width:9,height:20,right:0,left:26,top:21}})}function I(e){const{mfaSettings:t,isSMSLoading:s,chosenMfaSettingId:n,userStore:o,errorMessage:a,onClick:l,onDismiss:c}=e,p=(0,d().IS)(_,[]),f=(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.title",defaultMessage:"To continue, we need to verify your identity"}),S=(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.header",defaultMessage:"Select a method to verify your identity."}),y=[{text:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.needHelp.button",defaultMessage:"Need help?"}),href:(0,w().xS)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],x=(0,i.useMemo)((()=>(0,A().WS)(t).map((e=>{const t=e.mfaMethod;switch(t){case"totp":return(0,h.jsx)(m().A,{type:t,title:e.friendlyName,caption:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useAuthenticator.button.message",defaultMessage:"Use code from authenticator"}),onClick:()=>l(e),style:p.actionButton,isActive:!0,disabled:s});case"sms":return(0,h.jsx)(m().A,{type:t,title:e.phoneNumber,caption:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useSMS.button.message",defaultMessage:"Text me a code"}),onClick:()=>l(e),style:p.actionButton,isActive:!0,isLoading:s&&n===e.mfaSettingId,disabled:s&&n!==e.mfaSettingId});case"backup_code":return(0,h.jsx)(m().A,{type:t,title:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.title",defaultMessage:"Use a backup code"}),caption:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.message",defaultMessage:"Use a one-time backup code"}),onClick:()=>l(e),style:p.actionButton,isActive:!0,disabled:s});default:return(0,r().HB)(t)}}))),[t,l,s,n,p.actionButton]);return(0,h.jsx)(g().A,{title:f,header:S,errorMessage:a,icon:(0,h.jsx)(k,{userStore:o}),secondaryActions:y,onDismiss:c,children:x})}function _(e){return(0,d().$4)({resendLink:{fontWeight:p().Wy.medium,color:e.blueColor},actionButton:{marginBottom:5}})}var T=()=>s(22394);function P(e){const t=(0,d().IS)(B,[]),{errorMessage:s,onDismiss:i}=e,n=(0,h.jsx)(u().sA,{id:"mfa.turnOffMFAComplete.title",defaultMessage:"2-step verification is turned off"}),o=(0,h.jsx)(u().sA,{id:"mfa.turnOffMFAComplete.header",defaultMessage:"2-step verification has been removed from your account. Notion will only ask for your password during log in."}),r=[{text:(0,h.jsx)(u().sA,{id:"mfa.turnOffMFAComplete.button.message",defaultMessage:"Complete"}),onClick:i,type:"button",view:"outline"}];return(0,h.jsx)(g().A,{title:n,header:o,errorMessage:s,icon:(0,T().o)(t.confirmationIcon),secondaryActions:r,onDismiss:i})}function B(e){return(0,d().$4)({confirmationIcon:{width:30,fill:"green"}})}var R=()=>s(213962);function D(e){const{isLoading:t,lastMFASetting:s,errorMessage:i,onDismiss:n,onTurnOffMFA:o,onCancel:r}=e,a=(0,d().IS)(N,[]),l=(0,h.jsx)(u().sA,{id:"mfa.turnOffMFA.title",defaultMessage:"Turn off 2-step verification"}),c={text:t?(0,h.jsx)(x().A,{}):(0,h.jsx)(u().sA,{id:"mfa.turnOffMFA.disableMFA.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:o,isRed:!0},m=[{text:(0,h.jsx)(u().sA,{id:"mfa.turnOffMFA.cancel.button.message",defaultMessage:"Cancel"}),onClick:r,type:"button",view:"outline"}];return(0,h.jsx)(g().A,{title:l,header:s?(0,h.jsx)(u().sA,{id:"mfa.turnOffMFA.lastMFASettingDeleted.header",defaultMessage:"Deleting {mfaSettingName} will turn off 2-step verification and remove the additional layer of security on your account. Notion will only ask for your password during log in.",values:{mfaSettingName:"sms"===s.mfaMethod?`${s.phoneNumber}`:s.friendlyName,boldtext:e=>(0,h.jsx)("span",{style:{fontWeight:p().Wy.semibold},children:e})}}):(0,h.jsx)(u().sA,{id:"mfa.turnOffMFA.header",defaultMessage:"Turning off 2-step verification will remove the additional layer of security on your account. Notion will only ask for your password during log in. "}),icon:(0,R().s)(a.crossIcon),primaryAction:c,secondaryActions:m,errorMessage:i,onDismiss:n})}function N(e){return(0,d().$4)({crossIcon:{width:30,fill:"red"}})}s(898992),s(354520);var L=()=>s(662303),U=()=>s(869190),O=()=>s(802790),E=()=>s(125565),F=()=>s(356756),V=()=>s(30626),q=()=>s(173019),G=()=>s(880156),z=()=>s(704152),K=()=>s(760217),W=()=>s(406699),H=()=>s(623580);function $(e){const{setting:t,setIsEditing:s,isEditing:n,onUpdateMethod:o}=e,r=(0,d().IS)(Y,[]),[a,l]=(0,i.useState)(""),c=t.friendlyName,u=""===a?c:a,p=(0,i.useCallback)((e=>""!==e&&e!==c),[c]),m=(0,i.useCallback)((()=>{p(u)?(o({mfaMethod:t.mfaMethod,mfaSettingId:t.mfaSettingId,action:"rename",friendlyName:u}),l(a)):l(c),s(!n)}),[u,n,s,o,a,c,p,t.mfaMethod,t.mfaSettingId]),g=(0,i.useCallback)((e=>{"Enter"!==e.key&&"Escape"!==e.key||m()}),[m]),f=(0,i.useCallback)((e=>{p(e.target.value)&&l(e.target.value)}),[p]);return n?(0,h.jsx)(H().A,{value:u,maxlength:30,onChange:f,onKeyDown:g,onBlur:m,focus:n,style:r.inputField,inputStyle:r.input}):(0,h.jsx)(E().A,{children:u})}function Y(){return(0,d().$4)({inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14,...p().RC}})}var Q=()=>s(722872),X=()=>s(928600),Z=()=>s(939740),J=()=>s(89924);function ee(e){const{activeMenuActions:t}=e;return(0,h.jsx)(X().A,{menuType:Q().gu.Popup,children:(0,h.jsx)(Z().Ay,{type:Z().Oh.Vertical,sections:[{key:"mfaMethodActions",render:e=>(0,h.jsx)(J().A,{...e}),items:t}],initialFocus:void 0})})}function te(e){const{type:t,title:s,caption:n,setting:o,onDeleteMethod:a,onUpdateMethod:l}=e,c=(0,d().IS)(se,[]),p={totp:(0,F().s)(c.icon),sms:(0,G().A)(c.icon)},[m,g]=(0,i.useState)(!1),f=e=>({key:"deleteMFAMethod",render:e=>(0,h.jsx)(K().A,{...e,title:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:(0,y().I)(c.menuItemIcon)}),action:()=>{a(o),e.close()}}),S=e=>({key:"editMFAMethod",render:e=>(0,h.jsx)(K().A,{...e,title:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Edit title"}),icon:(0,q().r)(c.menuItemIcon)}),action:()=>{g(!0),e.close()}});return(0,h.jsxs)("div",{style:c.activeMethodContainer,children:[(0,h.jsxs)("div",{style:c.activeMethodLeftContainer,children:[(0,h.jsx)("div",{style:c.icon,children:p[t]}),(0,h.jsxs)("div",{style:c.activeMethodText,children:[(()=>{switch(t){case"sms":return(0,h.jsx)(E().A,{children:s});case"totp":return(0,h.jsx)($,{setting:o,setIsEditing:g,isEditing:m,onUpdateMethod:l});default:return(0,r().HB)(t)}})(),(0,h.jsx)("span",{style:c.activeMethodCaption,children:n})]})]}),(0,h.jsx)(W().Ay,{render:e=>{switch(t){case"sms":return(0,h.jsx)(ee,{activeMenuActions:[f(e)]});case"totp":return(0,h.jsx)(ee,{activeMenuActions:[S(e),f(e)]});default:(0,r().HB)(t)}},alignmentToOrigin:W().yP.Start,renderOrigin:e=>(0,h.jsx)(z().A,{style:c.menuButton,disabled:m,...e,children:(0,V()._)(c.menuIcon)}),popupType:W().z7.Popup})]})}function se(e){return(0,d().$4)({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,width:"100%",padding:"10px 14px 10px 16px",alignItems:"start",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:p().J.UISmall.desktop,lineHeight:p().K_.UISmall.desktop,color:e.mediumTextColor,whiteSpace:"normal"},icon:{width:20,height:20,marginRight:10,fill:e.blueColor},menuIcon:{fill:e.lightIconColor,width:15,height:15},menuButton:{borderRadius:4,padding:3},menuItemIcon:{width:17,height:17},inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14}})}function ie(e){const{mfaSettings:t,errorMessage:s,onStartTOTP:n,onStartSMS:o,onTurnOffMFA:a,onStartBackupCodes:l,onDismiss:p,onDeleteMethod:f,onUpdateMethod:S}=e,y=(0,d().IS)(ne,[]),x=(0,h.jsx)(u().sA,{id:"mfa.updateSettings.title",defaultMessage:"2-step verification"}),b=(0,h.jsx)(u().sA,{id:"mfa.settingModal.message",defaultMessage:"Confirm it's you after using a password by providing a verification code."}),v=(0,i.useMemo)((()=>(0,A().WS)(t).map((e=>{const{mfaMethod:t}=e,s=(0,U().v9)(e.createdAt,L().locale);switch(t){case"totp":return(0,h.jsx)(te,{type:t,title:e.friendlyName,caption:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:f,onUpdateMethod:S});case"sms":return(0,h.jsx)(te,{type:t,title:`${e.phoneNumber}`,caption:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.useSMS.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:f,onUpdateMethod:S});case"backup_code":return;default:(0,r().HB)(t)}}))),[t,f,S]),w=t.filter((e=>"totp"===e.mfaMethod)).length,j=t.filter((e=>"sms"===e.mfaMethod)).length,M=(0,i.useMemo)((()=>[{type:"totp",title:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.title",defaultMessage:"Add authenticator"}),caption:w>=2?(0,h.jsx)(u().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.disabled.button.message",defaultMessage:"2 of 2 authenticators added"}):(0,h.jsx)(u().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.message",defaultMessage:"{numOfTotpSettings} of 2 authenticators added",values:{numOfTotpSettings:w}}),onClick:n,style:y.button,disabled:w>=2},{type:"sms",title:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.title",defaultMessage:"Add phone number"}),caption:j>=2?(0,h.jsx)(u().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.disabled.button.message",defaultMessage:"2 of 2 phones added"}):(0,h.jsx)(u().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.message",defaultMessage:"{numOfSmsSettings} of 2 phones added",values:{numOfSmsSettings:j}}),onClick:o,style:y.button,disabled:j>=2},{type:"backup_code",title:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.title",defaultMessage:"Regenerate backup codes"}),caption:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.message",defaultMessage:"Use for account recovery when other methods don't work"}),onClick:l,style:y.button,disabled:!1}].sort(((e,t)=>(e.disabled?1:0)-(t.disabled?1:0)))),[n,o,l,w,j,y]),k=(0,i.useMemo)((()=>M.map(((e,t)=>(0,i.createElement)(m().A,{...e,key:t})))),[M]),C=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(E().A,{style:y.settingsTitle,isSmall:!0,children:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.title",defaultMessage:"Active"})}),v,(0,h.jsx)(O().A,{size:15,isHidden:!0}),(0,h.jsx)(E().A,{style:y.settingsTitle,isSmall:!0,children:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.addMoreMethodsSection.title",defaultMessage:"Add more methods"})}),k]}),I=[{text:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.turnOffVerification.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:a,type:"button",view:"plain",isRed:!0}];return(0,h.jsx)(g().A,{title:x,header:b,errorMessage:s,icon:(0,c().K)(y.icon),onDismiss:p,secondaryActions:I,children:C})}function ne(e){return(0,d().$4)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:p().Wy.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}var oe=()=>s(219505),re=()=>s(100622);function ae(e){const{isLoading:t,userStore:s,errorMessage:n,onDismiss:o,onVerifyBackupCode:r,onTryAnotherMethod:a}=e,l=(0,d().IS)(le,[]),[c,p]=(0,i.useState)(""),m=(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.title",defaultMessage:"To continue, we need to verify your identity"}),f=(0,h.jsx)(u().sA,{id:"profileSeettings.mfa.verifyIdentity.withBackupCode.header",defaultMessage:"Enter an unused one-time backup code."}),S={text:t?(0,h.jsx)(x().A,{}):(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.button.message",defaultMessage:"Continue"}),onClick:()=>r(c.replace(/[^0-9a-zA-Z]/g,"")),disabled:t||""===c},y=[{text:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>a(),disabled:t}];return(0,h.jsx)(g().A,{title:m,header:f,icon:(0,h.jsx)(k,{userStore:s}),primaryAction:S,secondaryActions:y,errorMessage:n,onDismiss:o,children:(0,h.jsx)(H().A,{type:"text",value:c,onChange:e=>{p((0,oe().H)(e.target.value))},placeholder:"0000-0000",style:l.backupCodeInput,disabled:t,autoFocus:!0})})}function le(e){return(0,d().$4)({backupCodeInput:{width:"100%",background:"light"===e.mode?re().Ay.transparent:e.inputBackground}})}function de(e){const{isLoading:t,isForgotPasswordLoading:s,userStore:n,errorMessage:r,alertMessage:a,onDismiss:l,onVerifyPassword:c,onForgotPassword:p}=e,m=(0,d().IS)(ce,[]),[f,S]=(0,i.useState)(""),y=(0,o().K8)((()=>null==n?void 0:n.getEmail()),[n]),b=(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withPassword.title",defaultMessage:"To continue, we need to verify your identity"}),v={text:t?(0,h.jsx)(x().A,{}):(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withPassword.button.message",defaultMessage:"Continue"}),onClick:()=>c(f),disabled:t||""===f},A=[{text:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withPassword.secondaryButton.message",defaultMessage:"Forgot password?"}),view:"plain",type:"button",disabled:s,onClick:()=>p(y)}];return(0,h.jsx)(g().A,{title:b,header:y,icon:(0,h.jsx)(k,{userStore:n}),primaryAction:v,secondaryActions:A,errorMessage:r,alertMessage:a,onDismiss:l,children:(0,h.jsx)(H().A,{type:"password",value:f,onChange:e=>S(e.target.value),placeholder:"Your password",style:m.passwordInput,disabled:t,autoComplete:"current-password",autoFocus:!0})})}function ce(){return(0,d().$4)({passwordInput:{width:"100%"}})}var ue=()=>s(496603),pe=()=>s(217448),me=()=>s(891909);function ge(e){const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:o,resentStatus:r,resentAt:a,onDismiss:l,onVerifySMS:d,onResendLink:c,onTryAnotherMethod:p}=e,[m,f]=(0,i.useState)([]),S=(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withSMS.title",defaultMessage:"To continue, we need to verify your identity"}),y=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u().sA,{id:"profileSeettings.mfa.verifyIdentity.withSMS.header",defaultMessage:"Enter the code sent to {phoneHint}.",values:{phoneHint:`${t.phoneNumber}`}})," ",(0,h.jsx)(pe().n,{resentAt:a,resentStatus:r,onResendLink:c})]}),b={text:s?(0,h.jsx)(x().A,{}):(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withSMS.button.message",defaultMessage:"Continue"}),onClick:()=>d(t.mfaSettingId,m.join("")),disabled:s||"resending"===r||6!==(0,ue().oE)(m).length},v=[{text:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withSMS.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>p(),disabled:s}];return(0,h.jsx)(g().A,{title:S,header:y,icon:(0,h.jsx)(k,{userStore:n}),primaryAction:b,secondaryActions:v,errorMessage:o,onDismiss:l,children:(0,h.jsx)("div",{children:(0,h.jsx)(me().Ay,{numInputs:6,value:m,format:"settings",disabled:!1,onChange:f,autoFocus:!0,isValidKey:me().Vx})})})}function he(e){const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:o,onDismiss:r,onVerifyTOTP:a,onTryAnotherMethod:l}=e,c=(0,d().IS)(fe,[]),[p,m]=(0,i.useState)([]),f=(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withTOTP.title",defaultMessage:"To continue, we need to verify your identity"}),S=(0,h.jsx)(u().sA,{id:"profileSeettings.mfa.verifyIdentity.withTOTP.header",defaultMessage:"Enter code from authenticator <boldtext>{friendlyName}</boldtext>.",values:{friendlyName:t.friendlyName,boldtext:e=>(0,h.jsx)("span",{style:c.boldText,children:e})}}),y={text:s?(0,h.jsx)(x().A,{}):(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withTOTP.button.message",defaultMessage:"Continue"}),onClick:()=>a({mfaSettingId:t.mfaSettingId,code:p.join("")}),disabled:s||6!==(0,ue().oE)(p).length},b=[{text:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withTOTP.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>l(),disabled:s}];return(0,h.jsx)(g().A,{title:f,header:S,icon:(0,h.jsx)(k,{userStore:n}),primaryAction:y,secondaryActions:b,errorMessage:o,onDismiss:r,children:(0,h.jsx)("div",{children:(0,h.jsx)(me().Ay,{numInputs:6,value:p,format:"settings",disabled:!1,onChange:m,autoFocus:!0,isValidKey:me().Vx})})})}function fe(e){return(0,d().$4)({boldText:{fontWeight:p().Wy.semibold}})}s(672577);function Se(e){const{passkeys:t,passkeyAuthenticatorIdToDelete:s,onDismiss:i,onCancel:n,onDeleteMethod:o}=e,r=(0,d().IS)(ye,[]),a=t.find((e=>e.id===s));if(!a)return null;const l=(0,h.jsx)(u().sA,{id:"passkey.deleteSetting.title",defaultMessage:"Delete {passkeyName}",values:{passkeyName:a.authenticatorName}}),c=(0,h.jsx)(u().sA,{id:"passkey.deleteSetting.header",defaultMessage:"Once deleted, you will no longer be able to use the passkey saved in {friendlyName}.{newline}<boldtext>Are you sure you want to delete this?</boldtext>",values:{friendlyName:a.authenticatorName,boldtext:e=>(0,h.jsx)("span",{style:r.boldText,children:e}),newline:(0,h.jsx)("br",{})}}),p={text:(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>o(),isRed:!0},m=[{text:(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:n,type:"button",view:"outline"}];return(0,h.jsx)(g().A,{title:l,header:c,icon:(0,y().I)(r.crossIcon),primaryAction:p,secondaryActions:m,onDismiss:i})}function ye(e){return(0,d().$4)({crossIcon:{width:30,fill:"red"},boldText:{fontWeight:p().Wy.semibold}})}s(803949);var xe=()=>s(984925),be=()=>s(62926);function ve(e){const{setting:t,setIsEditing:s,isEditing:n,onUpdateMethod:o}=e,r=(0,d().IS)(Ae,[]),[a,l]=(0,i.useState)(""),c=t.authenticatorName,u=""===a?c:a,p=(0,i.useCallback)((e=>""!==e&&e!==c),[c]),m=()=>{p(u)?(o({passkeyAuthenticatorId:t.id,name:u}),l(u)):l(c),s(!n)},g=(0,i.useCallback)((e=>{p(e.target.value)&&l(e.target.value)}),[p]);return n?(0,h.jsx)(H().A,{value:u,maxlength:30,onChange:g,onKeyDown:e=>{"Enter"!==e.key&&"Escape"!==e.key||m()},onBlur:m,focus:n,style:r.inputField,inputStyle:r.input}):(0,h.jsx)(E().A,{children:u})}function Ae(){return(0,d().$4)({inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14,...p().RC}})}function we(e){const{caption:t,setting:s,onDeleteMethod:n,onUpdateMethod:o,isEditing:r}=e,a=(0,d().IS)(je,[]),[l,c]=(0,i.useState)(r),p=e=>({key:"deletePasskeyMethod",render:e=>(0,h.jsx)(K().A,{...e,title:(0,h.jsx)(u().sA,{id:"mfa.updatePasskeySettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:(0,y().I)(a.menuItemIcon)}),action:()=>{n({passkeyAuthenticatorId:s.id}),e.close()}}),m=e=>({key:"editPasskeyMethod",render:e=>(0,h.jsx)(K().A,{...e,title:(0,h.jsx)(u().sA,{id:"mfa.updatePasskeySettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Rename passkey"}),icon:(0,q().r)(a.menuItemIcon)}),action:()=>{c(!0),e.close()}});return(0,h.jsxs)("div",{style:a.activeMethodContainer,children:[(0,h.jsxs)("div",{style:a.activeMethodLeftContainer,children:[(0,h.jsx)("div",{style:a.icon,children:(0,be().a)(a.icon)}),(0,h.jsxs)("div",{style:a.activeMethodText,children:[(0,h.jsx)(ve,{setting:s,setIsEditing:c,isEditing:l,onUpdateMethod:o}),(0,h.jsx)("span",{style:a.activeMethodCaption,children:t})]})]}),(0,h.jsx)(W().Ay,{render:e=>(0,h.jsx)(ee,{activeMenuActions:[m(e),p(e)]}),alignmentToOrigin:W().yP.Start,renderOrigin:e=>(0,h.jsx)(z().A,{style:a.menuButton,disabled:l,...e,children:(0,V()._)(a.menuIcon)}),popupType:W().z7.Popup})]})}function je(e){return(0,d().$4)({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,width:"100%",padding:"10px 14px 10px 16px",alignItems:"start",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:p().J.UISmall.desktop,lineHeight:p().K_.UISmall.desktop,color:e.mediumTextColor,whiteSpace:"normal"},icon:{width:20,height:20,marginRight:10,fill:e.blueColor},menuIcon:{fill:e.lightIconColor,width:15,height:15},menuButton:{borderRadius:4,padding:3},menuItemIcon:{width:17,height:17}})}function Me(e){const{passkeySettings:t,errorMessage:s,onDismiss:i,onAddMethod:n,onDeleteMethod:o,onUpdateMethod:r,shouldNameNewSetting:a}=e,l=(0,d().IS)(ke,[]);let p;return null==t||t.forEach((e=>{var t;(!p||e.createdAt>(null===(t=p)||void 0===t?void 0:t.createdAt))&&(p=e)})),(0,h.jsxs)(g().A,{title:"Passkey Settings",header:"Use your device's built-in security features like Face ID to sign in instead of remembering passwords.",errorMessage:s,icon:(0,c().K)(l.icon),onDismiss:i,children:[t.length<5&&(0,h.jsx)(xe().A,{title:"Add new passkey",onClick:n}),(0,h.jsx)(O().A,{size:15,isHidden:!0}),t.length>0&&(0,h.jsx)(E().A,{style:l.settingsTitle,isSmall:!0,children:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.title",defaultMessage:"Active"})}),t.map(((e,t)=>{var s;const i=(0,U().v9)(e.createdAt,L().locale);return(0,h.jsx)(we,{caption:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:i}}),setting:e,onDeleteMethod:o,onUpdateMethod:r,isEditing:a&&e.id===(null===(s=p)||void 0===s?void 0:s.id)},e.id)}))]})}function ke(e){return(0,d().$4)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:p().Wy.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}function Ce(e){const{settingsStateMachine:t,onDismiss:s,onStartTOTP:i,onStartSMS:d,onStartBackupCodes:c}=e,u=(0,n().v3)(),p=(0,n().Y0)(),m=(0,o().K8)((()=>(0,l()._m)(u)),[u]),g=(0,o().K8)((()=>t.getCurrentStep()),[t]);switch(g.step){case"settingsUninitialized":case"settingsPasskeyLoadSettings":case"settingsLoadSettings":return null;case"settingsVerifyWithPassword":return(0,h.jsx)(de,{isLoading:g.isLoading,isForgotPasswordLoading:g.isForgotPasswordLoading,userStore:m,errorMessage:g.error,alertMessage:g.alert,onVerifyPassword:e=>t.settingsVerifyPassword(e),onForgotPassword:e=>t.settingsForgotPassword(e),onDismiss:s});case"settingsVerifyChooseMFAMethod":return(0,h.jsx)(I,{isSMSLoading:g.isSMSLoading,chosenMfaSettingId:g.chosenMfaSettingId,mfaSettings:g.mfaSettings,userStore:m,errorMessage:g.error,onClick:e=>t.settingsChooseVerifyMethod(e),onDismiss:s});case"settingsVerifyWithTOTP":return(0,h.jsx)(he,{isLoading:g.isLoading,mfaSetting:g.mfaSetting,userStore:m,errorMessage:g.error,onDismiss:s,onVerifyTOTP:e=>t.settingsVerifyTOTP(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithSMS":return(0,h.jsx)(ge,{isLoading:g.isLoading,mfaSetting:g.mfaSetting,userStore:m,errorMessage:g.error,resentAt:g.resentAt,resentStatus:g.resentStatus,onDismiss:s,onVerifySMS:(e,s)=>t.settingsVerifySMS({mfaSettingId:e,code:s}),onResendLink:()=>t.settingsVerifyResendSMS(g.mfaSetting.mfaSettingId),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithBackupCode":return(0,h.jsx)(ae,{isLoading:g.isLoading,userStore:m,errorMessage:g.error,onDismiss:s,onVerifyBackupCode:e=>t.settingsVerifyBackupCode(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsInitialSetup":return(0,h.jsx)(f,{errorMessage:g.error,onStartTOTP:i,onStartSMS:d,onDismiss:s});case"settingsShowSettings":const e=g.mfaSettings;return(0,h.jsx)(ie,{mfaSettings:e,errorMessage:g.error,onStartTOTP:i,onStartSMS:d,onStartBackupCodes:c,onTurnOffMFA:()=>t.settingsConfirmDisableMFA(),onDismiss:s,onDeleteMethod:e=>t.settingsConfirmDelete(e),onUpdateMethod:e=>t.settingsUpdate(e)});case"settingsPasskeyShowSettings":case"settingsPasskeyNameNewSetting":return(0,h.jsx)(Me,{passkeySettings:g.passkeys,errorMessage:g.error,onDismiss:s,onAddMethod:()=>p.isElectron?a().Yw(u):t.settingsPasskeyAddSetting(u),onDeleteMethod:e=>t.settingsConfirmDeletePasskeySetting(e),onUpdateMethod:e=>t.settingsPasskeyRenameSetting(e),shouldNameNewSetting:"settingsPasskeyNameNewSetting"===g.step});case"settingsDeletePasskeySetting":return(0,h.jsx)(Se,{passkeys:g.passkeys,passkeyAuthenticatorIdToDelete:g.passkeyAuthenticatorIdToDelete,onDismiss:s,onCancel:()=>t.passkeySettingsShow(),onDeleteMethod:()=>t.settingsDeletePasskeySetting()});case"settingsDeleteSettings":return(0,h.jsx)(b,{isLoading:g.isLoading,mfaSetting:g.mfaSettingToDelete,errorMessage:g.error,onDismiss:s,onCancel:()=>t.settingsConfirmIdentityForSettings(),onDeleteMethod:()=>t.settingsDelete()});case"settingsConfirmIdentity":case"settingsDisableMFA":const n="settingsConfirmIdentity"===g.step&&"disableMFA"===g.source;return"settingsDisableMFA"===g.step||n?(0,h.jsx)(D,{isLoading:n,lastMFASetting:g.lastMFASetting,errorMessage:g.error,onDismiss:s,onTurnOffMFA:()=>t.settingsDisableMFA(),onCancel:()=>t.settingsConfirmIdentityForSettings()}):null;case"settingsIdentityConfirmed":return"disableMFA"===g.source?(0,h.jsx)(P,{errorMessage:g.error,onDismiss:s}):null;default:return(0,r().HB)(g)}}},678894:(e,t,s)=>{s.d(t,{A:()=>o});var i=()=>s(604995);class n extends(()=>s(757695))().default{getInitialState(){return{uploadingProfilePhoto:!1,name:"",startDayOfWeek:(0,i().Lm)(),accountSettings:{hasPassword:!1,canConfigurePassword:!1,isSamlEnforced:!1,mfaStatus:"loading",numMfaSettings:0,regenerateBackupCodes:!1,hasPasskeys:!1,error:void 0}}}getValueForUser(e,t,s){if(e.isDefined()){const n=e.getFullName(s),o=e.getProfilePhoto(),r=t.getSettings();return{...this.state,uploadingProfilePhoto:!1,profilePhoto:o,name:n||"",startDayOfWeek:void 0===(null==r?void 0:r.start_day_of_week)?(0,i().Lm)():null==r?void 0:r.start_day_of_week}}}}const o=n},682817:(e,t,s)=>{s.d(t,{f3:()=>_,v4:()=>k,oL:()=>C});var i=s(296540),n=()=>s(484714),o=()=>s(56366),r=()=>s(401497),a=()=>s(959013),l=()=>s(641300),d=()=>s(125565),c=()=>s(702723),u=()=>s(437622),p=()=>s(351360),m=()=>s(651761),g=()=>s(405425),h=()=>s(934679),f=()=>s(381138),S=()=>s(145214),y=()=>s(285790),x=()=>s(623580),b=()=>s(454529),v=s(474848);function A(e){const{searchQuery:t,setSearchQuery:s,disabled:n}=e,[o,l]=(0,i.useState)(!1),d=(0,a().tz)(),c=(0,r().IS)((e=>({container:{display:"flex",alignItems:"center"},icon:{width:14,height:14,fill:e.mediumIconColor},input:{fontSize:14,lineHeight:"20px",width:"100%",paddingLeft:4}})),[]),u=()=>{s(""),l(!1)};return(0,v.jsxs)("div",{style:c.container,children:[(0,v.jsx)(y().A,{icon:f().q,iconStyle:c.icon,disabled:n,onClick:()=>o?u():l(!0),ariaLabel:d.formatMessage(b().y.offlinePagesSectionSearchIconLabel)}),(0,v.jsx)(S().A,{visible:o,animate:{width:150},initial:{width:0,opacity:0},exit:{width:0,opacity:0},children:(0,v.jsx)(x().A,{style:c.input,format:x().C.Transparent,value:t,onChange:e=>s(e.target.value),placeholder:d.formatMessage(b().y.offlinePagesSectionSearchPlaceholder),focusInitial:o,showClearButton:!0,onClearButtonClick:u,onCancel:u})})]})}var w=()=>s(966480);const j=500,M=[w().T0,w().BI,w().jc];function k(){const[e,t]=(0,i.useState)(""),[s,n]=(0,i.useState)("all"),[o,l]=(0,i.useState)({column:w().BI,sortAscending:!1}),c=(0,g().Q)({searchQuery:e,filterCategory:s}),u=(0,m().s)(c,o),p=(0,r().IS)((e=>({headings:{flexDirection:"column",marginBottom:12},tableActions:{display:"flex",alignItems:"center",marginBottom:12},search:{paddingRight:8,borderRight:`1px solid ${e.tableDividerColor}`},label:{marginLeft:8,marginRight:8}})),[]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{style:p.headings,children:(0,v.jsx)(_,{})}),(0,v.jsxs)("div",{style:p.tableActions,children:[(0,v.jsx)("div",{style:p.search,children:(0,v.jsx)(A,{searchQuery:e,setSearchQuery:t,disabled:0===u.length&&!Boolean(e)})}),(0,v.jsx)(d().A,{isSecondaryColor:!0,style:p.label,children:(0,v.jsx)(a().sA,{id:"offlineSettingsTab.offlinePagesSection.filterPillPrefix",defaultMessage:"Viewing"})}),(0,v.jsx)(h().m,{filterCategory:s,setFilterCategory:n})]}),(0,v.jsx)(C,{columnRenderInfo:M,rows:u,sortState:o,onSortStateChanged:l,searchQuery:e,maxHeight:j})]})}function C(e){const{columnRenderInfo:t,rows:s,sortState:i,onSortStateChanged:n,searchQuery:o,hideHeaderRow:a,maxHeight:d}=e,c=(0,r().IS)((e=>(0,l().rC)({columnRenderInfo:t,theme:e,containerMarginTop:0})),[t]);return(0,v.jsx)(l().WE,{hideHeaderRow:a,hideHeaderRowPadding:!0,setStickyHeaderRow:!0,allowHorizontalScroll:!0,setStickyHeaderColumn:!1,maxHeight:d,columnRenderInfo:t,rows:s,styles:c,renderNoRowsComponent:()=>(0,v.jsx)(I,{isSearching:Boolean(o)}),sortState:i,onSortStateChanged:n})}function I(e){const{isSearching:t}=e,s=(0,r().IS)((()=>({label:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]);return(0,v.jsx)(d().A,{isSmall:!0,style:s.label,children:t?(0,v.jsx)(a().sA,{id:"offlineSettingsTab.offlinePagesSection.noPagesFound",defaultMessage:"No pages found"}):(0,v.jsx)(a().sA,{id:"offlineSettingsTab.offlinePagesSection.noPagesAvailable",defaultMessage:"No pages available"})})}function _(){const e=(0,n().v3)(),t=(0,o().K8)((()=>{const t=p().default.state.currentSpaceStore;if(t)return(0,u().GK)(e,t)}),[e]);return(0,v.jsx)(c().A,{type:"custom",isMobile:!0,title:(0,v.jsx)(a().sA,{id:"offlineSettingsTab.offlinePagesSection.title",defaultMessage:"Offline pages"}),disableSettingsItemClick:!0,caption:t?(0,v.jsx)(a().sA,{id:"offlineSettingsTab.offlinePagesSection.subheadingWithSpaceName",defaultMessage:"{currentSpaceName} pages available for offline use.",values:{currentSpaceName:t}}):(0,v.jsx)(a().sA,{id:"offlineSettingsTab.offlinePagesSection.subheading",defaultMessage:"Pages in this workspace that are available for offline use."}),shouldHighlight:!1,customButton:null})}},704444:(e,t,s)=>{s.d(t,{A:()=>m,y:()=>u});s(296540);var i=()=>s(401497),n=()=>s(75756),o=()=>s(668725),r=()=>s(959013),a=()=>s(529543),l=()=>s(455215),d=()=>s(493823),c=s(474848);function u(e){return(0,a().canSetCookie)(e)&&(0,a().canShowCookieUi)(e)}function p(){const e=(0,i().DP)();return(0,c.jsx)(l().A,{hasDismissButton:!1,renderOrigin:t=>(0,c.jsxs)(d().p,{style:{paddingLeft:8,paddingRight:8,height:32},...t,children:[(0,c.jsx)(r().sA,{id:"cookieSelector.label.customize",defaultMessage:"Customize"}),(0,o().b)({width:10,marginLeft:4,fill:e.lightIconColor})]})})}const m=function(e){let{isMobile:t}=e;return u((0,s(484714).v3)())?(0,c.jsx)(s(702723).A,{isMobile:t,title:(0,c.jsx)(r().sA,{...n().LS.cookieSettingsLabel}),caption:(0,n().Qq)(s(673998).N6,"settings"),type:"custom",customButton:(0,c.jsx)(p,{})}):null}},716730:(e,t,s)=>{s.d(t,{q:()=>o});var i=()=>s(134696),n=()=>s(701763);function o(e){n().CW(e,{type:"request"}),i().vX(e,{type:"request",from:"settings_modal"})}},725118:(e,t,s)=>{s.d(t,{R:()=>o});var i=()=>s(645873);const n=new(i().O2)("SlackImportsInviteWithModal",(async()=>await Promise.all([s.e(23806),s.e(68117)]).then(s.bind(s,559183)))),o=(0,i()._h)(n,(e=>e.SlackImportsInviteWithModal))},739135:(e,t,s)=>{s.d(t,{KD:()=>d,gt:()=>c,i9:()=>l,ll:()=>r,tb:()=>a,x$:()=>o});var i=()=>s(541235),n=()=>s(496603);function o(e,t){return r(c(e,t))}function r(e){return void 0!==e&&(e===i().q_||e===i().YD)}function a(e,t){if(r(t))return;const s=i().c$[e],n=s.steps.findIndex((e=>e.id===t));return-1===n?s.steps[0].id:n===s.steps.length-1?i().q_:s.steps[n+1].id}function l(e,t){const s=c(e,t);if(s&&!r(s))return a(t,s)}function d(e,t){const s=c(e,t);if(s)return function(e,t){const s=i().c$[e];var o;if(r(t))return null===(o=(0,n().HV)(s.steps))||void 0===o?void 0:o.id;const a=s.steps.findIndex((e=>e.id===t));return-1!==a&&0!==a?s.steps[a-1].id:void 0}(t,s)}function c(e,t){var s;if(!e)return;const n=((null===(s=e.getSettings())||void 0===s?void 0:s.tutorials)||{})[t];return void 0===n?i().c$[t].steps[0].id:n}},739793:(e,t,s)=>{s.d(t,{A:()=>y});s(898992),s(354520);var i=s(296540),n=()=>s(484714),o=()=>s(56366),r=()=>s(959013),a=()=>s(534177),l=()=>s(878079),d=()=>s(420844),c=()=>s(351360),u=()=>s(704444),p=()=>s(802790),m=()=>s(332381),g=()=>s(8178),h=()=>s(537296),f=()=>s(388450),S=s(474848);const y=(0,s(149397).k)((function(e){let{isMobile:t,isMobileNative:y,passwordRequestStore:x,userEmailDomainSettings:b,billingData:v}=e;const{isElectron:A,isPhone:w}=(0,n().Y0)(),j=(0,n().v3)(),M=(0,o().K8)((()=>s(227440).A.state.online),[]),k=(0,o().K8)((()=>{var e,s;const i=(null===(e=c().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getNotifyEmail())||!1,n=Boolean(null===(s=c().default.state.currentSpaceViewStore)||void 0===s||null===(s=s.getSettings())||void 0===s?void 0:s.notify_slack),o=(0,l().fb)(),r=(0,l().Z5)();return function(e){const{isMobile:t,isElectron:s,showNotifyEmailAlwaysSetting:i,slackSettingsAndGates:n}=e,o=function(e){const{isSlackNotificationSettingEnabled:t,showSlackNotificationSetting:s,showNotionActivityNotificationsToSlackSetting:i}=e;return s?i?[{key:"notify_slack",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack"})},t?{key:"notify_slack_all_activity",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack_all_activity"})}:void 0,t?{key:"notify_slack_mention",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack_mention"})}:void 0].filter(a().O9):[{key:"notify_slack",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack"})}]:[]}(n);return[{key:"notify_mobile",renderSettingsItem:()=>(0,S.jsx)(m().L,{target:"notify_mobile"})},!t&&s?{key:"notify_desktop",renderSettingsItem:()=>(0,S.jsx)(m().L,{target:"notify_desktop"})}:void 0,{key:"notify_email",renderSettingsItem:()=>(0,S.jsx)(m().L,{target:"notify_email"})},i?{key:"notify_email_always",renderSettingsItem:()=>(0,S.jsx)(m().L,{target:"notify_email_always"})}:void 0,{key:"notify_email_digest",renderSettingsItem:()=>(0,S.jsx)(m().L,{target:"notify_email_digest"})},{key:"notify_home_digest_email",renderSettingsItem:()=>(0,S.jsx)(m().L,{target:"notify_home_digest_email"})},...o,{key:"marketing_emails",renderSettingsItem:()=>(0,S.jsx)(m().L,{target:"marketing_emails"})}].filter(a().O9)}({isMobile:t,isElectron:A,showNotifyEmailAlwaysSetting:i,slackSettingsAndGates:{isSlackNotificationSettingEnabled:n,showSlackNotificationSetting:o,showNotionActivityNotificationsToSlackSetting:r}})}),[t,A]),C=(0,d().OC)({environment:j}),I=(0,o().K8)((()=>Boolean("on"===s(508496).default.getEligibleGroup({experimentId:"settings_refresh_2025",defaultGroup:"control"}))),[]),_=(0,o().uB)(void 0,s(678894).A);(0,s(852507).l)((()=>{s(804411).Q(j,_)}));const T=(0,o().K8)((()=>_.state.accountSettings),[_]),P=(0,s(722038).y)(),B=(0,o().K8)((()=>t?(0,d().xF)({isPhone:w,isMobileNative:y,showOfflineSettings:P,passwordRequestStore:x,userEmailDomainSettings:b,billingData:v,accountSettings:T}):C),[C,t,w,y,P,x,b,v,T]),R=(0,o().K8)((()=>[(0,u().y)(j)?{key:"cookies",renderSettingsItem:()=>(0,S.jsx)(u().A,{isMobile:t})}:void 0,{key:"view-history",renderSettingsItem:()=>(0,S.jsx)(s(991627).L,{isMobile:t})}].filter(a().O9)),[j,t]),D=(0,o().K8)((()=>j.WindowSizeStore.state.paddingBottomCSS),[j]);return(0,i.useEffect)((()=>{s(725614).clear({environment:j})}),[j]),M?(0,S.jsxs)(s(843878).Ay,{disableScroller:t,children:[(0,S.jsx)(g().A,{large:!t,divider:"full",children:I?(0,S.jsx)(r().sA,{id:"notificationAndPersonalSettings.notificationSection.title.v2",defaultMessage:"Notifications"}):(0,S.jsx)(r().sA,{id:"notificationAndPersonalSettings.notificationSection.title",defaultMessage:"My notifications"})}),(0,S.jsx)(h().U,{items:k}),(0,S.jsx)(p().A,{size:48,isHidden:!0}),(0,S.jsx)(g().A,{large:!t,divider:"full",children:I?(0,S.jsx)(r().sA,{id:"notificationAndPersonalSettings.settingsSection.title.v2",defaultMessage:"Preferences"}):(0,S.jsx)(r().sA,{id:"notificationAndPersonalSettings.settingsSection.title",defaultMessage:"My settings"})}),(0,S.jsx)(h().U,{items:B}),(0,S.jsx)(p().A,{size:48,isHidden:!0}),(0,S.jsx)(g().A,{large:!t,divider:"full",children:(0,S.jsx)(r().sA,{id:"notificationAndPersonalSettings.privacySection.title",defaultMessage:"Privacy"})}),(0,S.jsx)(h().U,{items:R}),(0,S.jsx)(p().A,{size:48,isHidden:!1}),(0,S.jsx)("div",{style:{marginTop:4,marginBottom:t?D:void 0},children:(0,S.jsx)(s(690197).A,{title:(0,S.jsx)(r().sA,{id:"notificationSettings.helpButton.caption",defaultMessage:"Learn about notifications & settings"}),href:(0,s(836251).xS)("guides.notificationSettings"),analyticsFrom:"notifications_settings"})})]}):(0,S.jsx)(s(125565).A,{style:{textAlign:"center"},children:(0,S.jsx)(r().sA,{defaultMessage:"Please go online to manage settings.",id:"notificationSettingsButton.goOnline.prompt"})})}))},746970:(e,t,s)=>{s.d(t,{KB:()=>x,Wy:()=>v,aV:()=>b,p4:()=>y,si:()=>A});s(18107),s(967357),s(898992),s(354520),s(581454);var i=()=>s(296344),n=()=>s(96689),o=()=>s(798880),r=()=>s(496603),a=()=>s(134696),l=()=>s(966505),d=()=>s(449506),c=()=>s(579627),u=()=>s(246826),p=()=>s(317909),m=()=>s(680074),g=()=>s(592674),h=()=>s(630116),f=()=>s(309049),S=()=>s(224701);async function y(e){const{environment:t,store:s,status:i,requests:n}=e,a=t.currentUser.id;l().qQ(t,{status:i,user_count:n.length,from:e.from,request_type:"member"});const d=await Promise.all(n.map((e=>w(t,{id:e.getForActorId(),table:o().oo})))).then((e=>(0,r().oE)(e)));if("approved"===i){const e=d.map((e=>({type:"existingUser",value:e.__IM_SORRY__getValue(),spaceRole:"read_and_write"})));if(!(await c().eP({environment:t,store:s,inviteTargets:e,inviteRole:"read_and_write",isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return{failedUsers:d,resolvedUsers:[]}}return p().createAndCommit({userAction:"accessRequestActions.resolveMembershipRequests",environment:t,canUndo:!0,perform:r=>{n.map((n=>{const d=new(h().v3)(t,n.pointer);u().zv({store:d,transaction:r,data:{granted_time:Date.now(),granted_by_table:o().oo,granted_by_id:a,resolved_time:Date.now(),resolved_by_table:o().oo,resolved_by_id:a,status:i}}),l().vn(t,{status:i,request_id:n.id,from:e.from,for_actor_id:n.for_actor_id,space_role:s.getRole()})}))}}),{failedUsers:[],resolvedUsers:d}}async function x(e){const{environment:t,store:s,status:i,requests:n}=e,d=t.currentUser.id;l().qQ(t,{status:i,user_count:n.length,from:e.from,request_type:"member"});const m=await Promise.all(n.map((e=>w(t,{id:e.getForActorId(),table:o().oo})))).then((e=>(0,r().oE)(e)));if("approved"===i){const e=m.map((e=>({type:"existingUser",value:e.__IM_SORRY__getValue(),spaceRole:"read_and_write"})));if(!(await c().eP({environment:t,store:s,inviteTargets:e,inviteRole:"read_and_write",isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return{failedUsers:m,resolvedUsers:[]};const i=s.id,n=await g().A.awaitData(t,{spaceId:i}),o=n?n.map((e=>e.domain.url)):[];a().hp(t,{invite_flow_id:void 0,invite_origin:"membership_request",user_ids:m.map((e=>e.id)),internal_domains:o})}return p().createAndCommit({userAction:"accessRequestActions.resolveMembershipRequests",environment:t,canUndo:!0,perform:e=>{n.map((s=>{const n=new(h().v3)(t,s.pointer);u().zv({store:n,transaction:e,data:{granted_time:Date.now(),granted_by_table:o().oo,granted_by_id:d,resolved_time:Date.now(),resolved_by_table:o().oo,resolved_by_id:d,status:i,type:"space_membership_request"}})}))}}),{failedUsers:[],resolvedUsers:m}}async function b(e){const{environment:t,status:s,requests:i,from:n}=e;l().qQ(t,{status:s,user_count:i.length,from:n,request_type:"guest"});const c=await Promise.all(i.map((async e=>{var i,r,c;const u=await w(t,{id:e.getForActorId(),table:o().oo});if(!u)return{type:"failed",user:void 0};if(!e.isGuestInviteRequest())return{type:"failed",user:u};const p=await d().callApi({eventName:"resolveAccessRequest",environment:t,data:{accessRequestId:e.id,status:s,spaceId:e.getParentId()}}),g=null===(i=e.getAttributes().permission_records_and_roles.at(0))||void 0===i?void 0:i.role,h=null===(r=e.getAttributes().permission_records_and_roles.at(0))||void 0===r?void 0:r.id,f=(null===(c=e.getAttributes().invite_message)||void 0===c?void 0:c.length)??0;return"success"===p.type&&"approved"===s&&a().Jg(t,{role:g,is_space:!1,invite_targets:[{type:"existingUser",value:{id:u.id,version:0,email:u.getEmail()},spaceRole:"none"}],is_onboarding:!1,invite_origin:"guest_invite_request",permission_items:[{type:"user_permission",role:g,user_id:u.id}],invite_message_length:f,domainType:(0,m().FX)()}),"success"===p.type&&l().AE(t,{status:s,request_id:e.id,for_actor_id:e.getForActorId(),created_by_id:e.getCreatedById(),requested_page_id:h,requested_role:g,from:n}),{type:p.type,user:u}})));await S().Ow(t);const u=c.filter((e=>"failed"===e.type)).map((e=>e.user)),p=c.filter((e=>"success"===e.type)).map((e=>e.user));return{failedUsers:(0,r().oE)(u),resolvedUsers:(0,r().oE)(p)}}async function v(e){if(f().A.reset(),!e.canAdmin)return;const{environment:t,spaceId:s}=e,i=await d().callApi({eventName:"getUnreadAccessRequestCount",environment:t,data:{parentTable:n().NX,parentId:s,size:1}});"success"===i.type&&f().A.setState({spaceId:s,count:i.data.count})}async function A(e,t,s){const n=function(e){return Object.values((0,r().$z)(e,(e=>function(e){if(e.isGuestInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${e.getCreatedById()}`}return e.isSpaceMembershipRequest()?`space_membership_${e.getForActorId()}:${e.getCreatedById()}}`:e.isTeamMembershipRequest()?void 0:void e.isPageAccessRequest()}(e)))).map((e=>{const t=(0,r().Ul)(e,(e=>e.getCreatedTime()));return t[t.length-1]}))}(await Promise.all(s.map((async t=>{const s=i().O,n=new(h().v3)(e,{table:s,id:t});return await n.load(),n.getModel()}))).then((e=>(0,r().oE)(e)))),a=await function(e,t){const s=Object.values((0,r().$z)(t,(e=>function(e){if(e.isGuestInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${null==t?void 0:t.role}`}return e.isSpaceMembershipRequest()?`space_membership_${e.getForActorId()}`:e.isTeamMembershipRequest()?void 0:void e.isPageAccessRequest()}(e))));return Promise.all(s.map((async t=>{const s=(0,r().Ul)(t,(e=>e.getCreatedTime())),i=s[0];return{createdByActorsWithReason:await Promise.all(s.map((async t=>{const s=await w(e,{id:t.created_by_id,table:o().oo});if(s)return{actor:s,reason:t.message}}))).then((e=>(0,r().oE)(e))),accessRequest:i}})))}(e,n);return Promise.all(a.map((async t=>{const s=await w(e,{id:t.accessRequest.getForActorId(),table:o().oo});if(s)return{forActor:s,...t}}))).then((e=>(0,r().oE)(e)))}async function w(e,t){const s=new(h().LU)(e,t);return await s.load(),s.getModel()}},763392:(e,t,s)=>{s.d(t,{Vr:()=>b,qb:()=>v,x:()=>x});var i=()=>s(206267),n=()=>s(959013),o=()=>s(966505),r=()=>s(449506),a=()=>s(496414),l=()=>s(579627),d=()=>s(426116),c=()=>s(317909),u=()=>s(755199),p=()=>s(680074),m=()=>s(351360),g=()=>s(404141),h=()=>s(224701),f=()=>s(971407),S=()=>s(128907),y=()=>s(304067);function x(e){const t=m().default.state.currentUserSettingsStore;t&&c().createAndCommit({userAction:"saveContractionSurveySeenDate",environment:e,canUndo:!0,perform:e=>{u().mJ({userSettingsStore:t,transaction:e,data:{seen_contraction_survey_at:(new Date).getTime()}})}})}async function b(e){let{environment:t,user:s,spaceStore:n,userSettingStore:r}=e;let a,l;if(S().R()&&(l=i().JW(),a=await(0,y().G)({environment:t,contractionSurveyId:l}),!a))return;await(async()=>await(0,f().B)(t,s.userId,n.id))()&&(await(async e=>{await v({member:s,newRole:"none",currentUserSettingsStore:r,spaceStore:n,environment:t}),o().ej(t,{member_user_id:s.userId,member_role:s.role,contraction_survey_id:e,is_space:!0,domainType:(0,p().FX)(),new_workspace_member_count:-1})})(l),a&&x(t))}async function v(e){let{member:t,newRole:s,currentUserSettingsStore:i,spaceStore:u,environment:m}=e;const f=m.currentUser.id;if(t.userId!==f||"none"!==s)!function(){const e=(0,n().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});a().m({message:e.updatingPermissions})}(),"none"===s?(await r().callApi({eventName:"removeUsersFromSpace",environment:m,data:{userIds:[t.userId],spaceId:u.id,removePagePermissions:!0,revokeUserTokens:!1}}),await h().Ow(m)):c().createAndCommit({userAction:"contractionActions.handleMemberPermissionRoleChange",environment:m,canUndo:!0,perform:e=>l().dy({environment:m,spaceStore:u,permissionItems:[{type:"user_permission",role:s,user_id:t.userId}],transaction:e,from:"space_permission_setting_table"})}),a().V();else{await d().ev({environment:m,spaceId:u.id,userSettingsStore:i})&&(o().KX(m,{invite_origin:"workspace_remove_member",domainType:(0,p().FX)(),new_workspace_member_count:-1,new_workspace_member_ids:[f]}),g().A.setState({...g().A.state,open:!1}))}}},775471:(e,t,s)=>{s.d(t,{B:()=>g});s(581454),s(296540);var i=()=>s(56366),n=()=>s(401497),o=()=>s(959013),r=()=>s(534177),a=()=>s(84817),l=()=>s(115562),d=()=>s(554509),c=s(474848);function u(e){const{isChecked:t,label:s,onClickToggle:i}=e,o=(0,n().IS)((()=>({row:{alignItems:"center",cursor:"pointer",display:"flex",gap:8}})),[]);return(0,c.jsxs)("label",{style:o.row,children:[(0,c.jsx)(l().W,{checked:t,onChange:i}),(0,c.jsx)(d().D,{styleName:"Body-14px/Regular",children:s})]})}var p=()=>s(623580);function m(e){const{inputText:t,isChecked:s,label:i,onClickToggle:n,placeholderText:o,setInputText:r}=e;return(0,c.jsxs)(a().Y1,{gap:8,children:[(0,c.jsx)(u,{label:i,isChecked:s,onClickToggle:n}),s?(0,c.jsx)(p().A,{autoFocus:!0,value:t,placeholder:o,onChange:e=>r(e.target.value)}):null]})}function g(e){const{store:t}=e,s=(0,n().IS)((e=>({container:{border:`1px solid ${e.stroke.secondary}`,borderRadius:6}})),[]),l=(0,i().K8)((()=>t.state.options),[t]),{selectedIndexes:d,customTextByIndex:p}=(0,i().K8)((()=>{const{selectedIndexes:e,customTextByIndex:s}=t.state;return{selectedIndexes:e,customTextByIndex:s}}),[t]),g=(0,o().tz)();return(0,c.jsx)(a().Y1,{padding:"16px 16px",style:s.container,gap:12,children:l.map(((e,s)=>{const{type:i}=e,n=d.has(s);switch(i){case"checkbox":return(0,c.jsx)(u,{isChecked:n,label:e.label,onClickToggle:()=>t.toggleIndex(s)},s);case"checkboxAndInput":const o="placeholderText"in e&&e.placeholderText?g.formatMessage(e.placeholderText):void 0;return(0,c.jsx)(m,{inputText:p[s]??"",isChecked:n,label:e.label,onClickToggle:()=>t.toggleIndex(s),placeholderText:o,setInputText:e=>t.setCustomTextByIndex(s,e)},s);default:(0,r().HB)(i)}}))})}},782649:(e,t,s)=>{s.d(t,{L:()=>g});s(296540);var i=()=>s(484714),n=()=>s(56366),o=()=>s(959013),r=()=>s(58293),a=()=>s(155959),l=()=>s(749240),d=()=>s(187485),c=()=>s(864943),u=()=>s(125565),p=()=>s(8178),m=s(474848);function g(){const e=(0,i().v3)(),t=(0,n().K8)((()=>function(e){const{device:t,WindowSizeStore:s}=e;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:t.isMobile?s.state.paddingLeftCSS:0,paddingRight:t.isMobile?s.state.paddingRightCSS:0}}(e)),[e]);return(0,m.jsxs)("div",{children:[(0,m.jsx)(f,{}),(0,m.jsxs)("div",{style:t,children:[(0,m.jsx)(u().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,m.jsx)(S,{})}),(0,m.jsx)(h,{})]})]})}function h(){const e=(0,r().r)(),{mobileNative:t}=(0,i().v3)(),{isIOS:s}=(0,i().Y0)(),u=(0,n().K8)((()=>{var e;const t=l().subscriptionDataStoreInstance.state;return"subscribed_admin"===(null==t?void 0:t.type)?null===(e=t.customerData)||void 0===e||null===(e=e.revenueCat)||void 0===e?void 0:e.store:void 0}),[]),p={marginTop:12,marginBottom:4},g=(0,m.jsx)(o().sA,{id:"subscriptionSettings.button",defaultMessage:"Manage subscription"});if(s&&"app_store"===u&&(0,a().T)("supportsAiIAP")&&null!=t&&t.openUpgradeModal&&e)return(0,m.jsx)(c().A,{size:"lg",style:p,onClick:()=>{t.openUpgradeModal(e.getSpaceId(),"settings")},children:g});let h;switch(u){case"app_store":h="https://apps.apple.com/account/subscriptions";break;case"play_store":h="https://play.google.com/store/account/subscriptions"}return(0,m.jsx)(d().A,{href:h,children:(0,m.jsx)(c().A,{size:"lg",style:p,children:g})})}function f(){const e=(0,i().v3)(),{device:t}=e;return(0,m.jsx)(p().A,{large:!t.isMobile||void 0,divider:t.isMobile?void 0:"full",children:(0,m.jsx)(o().sA,{id:"subscriptionSettings.title",defaultMessage:"Subscription"})})}function S(){const e=(0,i().v3)(),{device:t}=e;return t.isMobile?(0,m.jsx)(o().sA,{id:"subscriptionSettings.mobileDescription",defaultMessage:"Manage your subscription through the App Store."}):(0,m.jsx)(o().sA,{id:"subscriptionSettings.description",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. You can manage your subscription in Apple's subscription settings."})}},785606:(e,t,s)=>{s.d(t,{I:()=>r});var i=s(296540),n=()=>s(484714),o=()=>s(134696);function r(e){const{children:t}=e,s=(0,n().v3)();return(0,i.useEffect)((()=>{o().ig(s,{})}),[s]),t}},792361:(e,t,s)=>{s.d(t,{X:()=>n});var i=()=>s(126158);function n(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?(0,i().m)({...s,transform:"rotate(180deg)"}):(0,i().m)(s)}},804411:(e,t,s)=>{s.d(t,{Q:()=>o});var i=()=>s(920949),n=()=>s(449506);async function o(e,t){const s=await n().callApi({eventName:"getEmailDomainSettings",environment:e,data:{}});"success"===s.type&&t.setState({...t.state,emailDomainSettings:s.data});try{const s=await(0,i().Su)(e);t.setState({...t.state,accountSettings:{...s,error:void 0}})}catch(o){t.setState({...t.state,accountSettings:{...t.state.accountSettings,error:o}})}}},841101:(e,t,s)=>{s.d(t,{M:()=>n,a:()=>i});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(803949);class i extends(()=>s(757695))().default{getInitialState(){return{options:[],customTextByIndex:{},selectedIndexes:new Set}}setOptions(e){this.setState({customTextByIndex:{},options:e,selectedIndexes:new Set})}setCustomTextByIndex(e,t){this.update((s=>({...s,customTextByIndex:{...s.customTextByIndex,[e]:t}})))}toggleIndex(e){this.update((t=>{const s=new Set(t.selectedIndexes);return s.has(e)?s.delete(e):s.add(e),{...t,selectedIndexes:s}}))}toSurveyResult(){const{customTextByIndex:e,options:t,selectedIndexes:s}=this.state,i=[],n=[],o={};return s.forEach((s=>{const r=t[s];i.push(r.optionName),n.push(s),"checkboxAndInput"===r.type&&e[s]&&(o[r.optionName]=e[s])})),{reasons:i,reasonIndexes:n,customTextByReason:o}}}const n=new i},862961:(e,t,s)=>{s.d(t,{A:()=>S});var i=s(296540),n=()=>s(484714),o=()=>s(959013),r=()=>s(147294),a=()=>s(864943),l=()=>s(702723),d=()=>s(30580),c=()=>s(461857),u=()=>s(364671),p=()=>s(955302),m=()=>s(318575),g=()=>s(538669),h=()=>s(334711),f=s(474848);function S(e){let{samlEnforced:t,hasPasskeys:s}=e;const S=(0,n().v3)(),y=S.device.isMobile,[{rootStateMachine:x,settingsStateMachine:b,totpStateMachine:v,smsStateMachine:A,backupCodesStateMachine:w}]=(0,i.useState)((()=>{const e=new(c().q)(S),t={totpStore:new(h().$),settingsStore:new(m().r),smsStore:new(g().N),backupCodesStore:new(d().Y),rootStore:new(p().y)};return{mfaService:e,rootStateMachine:new(p().J)(t.rootStore),settingsStateMachine:new(m().U)(t.settingsStore,e),totpStateMachine:new(h().U)(t.totpStore,e),smsStateMachine:new(g().G)(t.smsStore,e),backupCodesStateMachine:new(d().b)(t.backupCodesStore,e)}}));const j=(0,f.jsx)(a().A,{size:"lg",onClick:()=>function(e){let{rootStateMachine:t,settingsStateMachine:s}=e;t.rootShowSettings({refresh:!1,startConfirmIdentity:()=>s.passkeySettingsShow()})}({rootStateMachine:x,settingsStateMachine:b}),disabled:t,children:s?(0,f.jsx)(o().sA,{id:"profileSettings.accountSecuritySection.managePasskeysButton.label",defaultMessage:"Manage passkeys"}):(0,f.jsx)(o().sA,{id:"profileSettings.accountSecuritySection.addPasskeysButton.label",defaultMessage:"Add passkey"})});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l().A,{type:"custom",isMobile:y,title:(0,f.jsx)(o().sA,{id:"profileSettings.accountSecuritySection.passkeySetting.label",defaultMessage:"Passkeys"}),caption:(0,f.jsx)(o().sA,{id:"profileSettings.accountSecuritySection.passkeySetting.message",defaultMessage:"Securely sign-in with on-device biometric authentication."}),badge:(0,f.jsx)(r().E,{newBadgeKey:"passkey_setting",didUserEngage:!1}),shouldHighlight:!1,disabled:t,tooltipLabel:(0,f.jsx)(o().sA,{id:"profileSettings.accountSecuritySection.passkeySetting.tooltip",defaultMessage:"Your organization requires you to use SAML for authentication."}),disableTooltip:!t,customButton:j}),(0,f.jsx)(u().A,{rootStateMachine:x,settingsStateMachine:b,totpStateMachine:v,smsStateMachine:A,backupCodesStateMachine:w})]})}},863569:(e,t,s)=>{s.d(t,{A:()=>a});s(296540);var i=()=>s(959013),n=()=>s(755199),o=()=>s(351360),r=s(474848);const a=function(){const e=(0,s(484714).v3)(),{device:t}=e,o=(0,s(56366).K8)((()=>l()),[]);return(0,r.jsx)(s(702723).A,{isMobile:t.isMobile,title:(0,r.jsx)(i().sA,{id:"calendarSettings.startWeekOnMonday.label",defaultMessage:"Start week on Monday"}),caption:(0,r.jsx)(i().sA,{id:"calendarSettings.startWeekOnMonday.message",defaultMessage:"This will change how all calendars in your app look."}),type:"toggle",isOn:1===o,onToggle:()=>function(e){const t=l();1===t?n().OQ(e):n().Wq(e)}(e)})};function l(){const{currentUserSettingsStore:e}=o().default.state;if(e){const t=e.getSettings();if(t)return t.start_day_of_week}}},881738:(e,t,s)=>{s.d(t,{b:()=>h,l:()=>f});var i=()=>s(243020),n=()=>s(989423),o=()=>s(898486),r=()=>s(972435),a=()=>s(719431),l=()=>s(351360),d=()=>s(589994),c=()=>s(449506),u=()=>s(901389),p=()=>s(496414),m=()=>s(246826);const g=(0,s(959013).YK)({deletingAccount:{id:"accountActions.deletingAccount.loadingMessage",defaultMessage:"Deleting your account…"},noUserError:{id:"accountActions.deletingAccount.noUserToDeleteMessage",defaultMessage:"No account to delete."}});function h(e){const{userStore:t,data:s,transaction:i}=e,n={};"name"in s&&s.name&&(n.name=s.name),"profilePhoto"in s&&(n.profile_photo=s.profilePhoto),0!==Object.keys(n).length&&m().zv({store:t,data:n,transaction:i})}async function f(e){p().m({message:g.deletingAccount});const t=e.currentUser.id,{currentUserRootStore:s,currentUserStore:m}=l().default.state;if(!s||!m||!t)return p().V(),void u().f1(r().A.formatMessage(g.noUserError));n().vd(e,"delete_user");const h=await c().callApi({eventName:"deleteUser",environment:e,data:{}});if("success"===h.type)await d().transactionQueue.clearForUser(t),a().logoutSingleAccount({environment:e,userId:t,logoutOrigin:i().d.DeleteAccount});else{const e=r().A.getIntl();u().f1((0,o().Hu)(e,h))}p().V()}},910609:(e,t,s)=>{s.d(t,{o:()=>a});var i=()=>s(484714),n=()=>s(56366);const o=new(s(848776).U)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{let{spaceId:i}=t;const n=await Promise.resolve().then(s.bind(s,449506)),o=await n.callApi({eventName:"getOrGenerateInviteLinkCode",environment:e,data:{spaceId:i},headers:(0,s(386164).WS)({cellId:void 0,spaceId:i})});if("success"===o.type&&o.data.inviteLinkCode)return o.data.inviteLinkCode}));s(604341).exposeDebugValue("BillingDataStore",o);const r=o;function a(e){let{spaceId:t}=e;const s=(0,i().v3)();return(0,n().K8)((()=>{if(t)return r.getData(s,{spaceId:t})}),[s,t])}},931404:(e,t,s)=>{s.d(t,{N:()=>u});s(296540);var i=()=>s(484714),n=()=>s(56366),o=()=>s(959013),r=()=>s(946548),a=()=>s(702723),l=()=>s(227440),d=()=>s(291606),c=s(474848);function u(){const e=(0,i().v3)(),t=(0,n().K8)((()=>(0,d().AC)()),[]),s=(0,n().K8)((()=>!l().A.state.online),[]);return(0,c.jsx)(a().A,{type:"custom",isMobile:!0,title:(0,c.jsx)(o().sA,{id:"offlineSettingsTab.autosyncedPagesSection.title",defaultMessage:"Automatic offline syncing"}),disableTitle:s,disableSettingsItemClick:!0,caption:(0,c.jsx)(o().sA,{id:"offlineSettingsTab.autosyncedPagesSection.subheading",defaultMessage:"This will make your most recently viewed pages available for offline use."}),shouldHighlight:!1,customButton:(0,c.jsx)(r().A,{disabled:s,on:t,onClick:()=>(0,d().tn)({environment:e})})})}},934679:(e,t,s)=>{s.d(t,{m:()=>x});var i=s(296540),n=()=>s(484714),o=()=>s(401497),r=()=>s(56394),a=()=>s(760217),l=()=>s(928600),d=()=>s(939740),c=()=>s(14235),u=()=>s(89924),p=()=>s(972435),m=()=>s(722872),g=()=>s(962730),h=()=>s(377586),f=s(474848);const S=["all","manual","autosynced"],y=(0,s(959013).YK)({all:{id:"offlineSettingsTab.offlinePagesFilter.all",defaultMessage:"All pages"},manual:{id:"offlineSettingsTab.offlinePagesFilter.manual",defaultMessage:"Manual"},autosynced:{id:"offlineSettingsTab.offlinePagesFilter.autosynced",defaultMessage:"Autosynced"}});function x(e){const{filterCategory:t,setFilterCategory:s}=e,[x,b]=(0,i.useState)(!1),{isMobile:v}=(0,n().Y0)(),A=(0,o().IS)((()=>({pillContainer:{display:"flex",alignItems:"center"},pillInner:{...v?{height:40,paddingLeft:14,paddingRight:14}:{}}})),[v]),w=(0,f.jsx)(r().A,{on:!0,wrapStyle:A.pillContainer,innerStyle:A.pillInner,title:p().A.formatMessage(y[t]),onClick:()=>b(!0)}),j={key:"categories",items:S.map((e=>({key:e,action:()=>{},render:()=>(0,f.jsx)(a().A,{focused:!1,onClick:()=>{s(e),b(!1)},title:p().A.formatMessage(y[e])})}))),render:e=>(0,f.jsx)(u().A,{...e})},M=(0,f.jsx)(l().A,{menuType:m().gu.Popup,header:null,children:(0,f.jsx)(d().Ay,{type:d().Oh.Vertical,initialFocus:0,sections:[j]})});return(0,f.jsx)(c().Ay,{popupType:h().n.Popup,placementToOrigin:g().W.Bottom,alignmentToOrigin:g().C.Start,open:x,render:()=>M,onDismiss:()=>b(!1),origin:w})}},955302:(e,t,s)=>{s.d(t,{J:()=>n,y:()=>i});class i extends(()=>s(757695))().default{getInitialState(){return{step:"rootUninitialized"}}}class n extends(()=>s(658921))()._{constructor(e){super(e,"root")}rootShowSettings(e){const{refresh:t,startConfirmIdentity:s}=e;if(this.checkStep("rootSettings")){if(!t)return}else this.store.setState({step:"rootSettings"});s()}rootStartBackupCodesFromSettings(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootBackupCodes",source:"settings"}),e())}rootStartTOTP(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootTOTP"}),e())}rootShowBackupCodesFromTOTP(){this.checkStep("rootTOTP")&&this.store.setState({step:"rootBackupCodes",source:"totp"})}rootStartSMS(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootSMS"}),e())}rootShowBackupCodesFromSMS(){this.checkStep("rootSMS")&&this.store.setState({step:"rootBackupCodes",source:"sms"})}rootEndBackupCodes(e){const t=this.checkStep("rootBackupCodes");if(t)switch(t.source){case"settings":return this.store.setState({step:"rootSettings"}),e.showSettings();case"sms":return this.store.setState({step:"rootSMS"}),e.completeSMS();case"totp":return this.store.setState({step:"rootTOTP"}),e.completeTotp();default:(0,s(534177).HB)(t.source)}}rootCloseSettings(e){e(),this.store.setState({step:"rootUninitialized"})}exit(e){this.store.setState({step:"rootUninitialized"}),e()}}},959098:(e,t,s)=>{s.d(t,{A:()=>c});s(898992),s(354520),s(581454),s(737550),s(296540);var i=()=>s(959013),n=()=>s(496603),o=()=>s(278768),r=()=>s(437622),a=()=>s(930561),l=()=>s(125565),d=s(474848);const c=function(e){var t;const c=(0,s(484714).v3)(),{device:u}=c,p=(0,i().tz)(),m=(0,s(401497).IS)((e=>({icon:{width:20,height:20,fill:e.lightIconColor},spaceNameList:{listStyle:"none",maxHeight:200,overflowY:"auto",margin:0,padding:"12px 14px",display:"flex",flexDirection:"column",gap:6,border:`1px solid ${e.stroke.secondary}`},spaceItem:{display:"flex",alignItems:"center",lineHeight:"120%",width:"100%",borderRadius:6,paddingTop:4,paddingBottom:4,gap:12,height:44}})),[]),g=(0,s(56366).K8)((()=>{var e;return(0,s(979340).OX)(null===(e=s(749240).subscriptionDataStoreInstance.state)||void 0===e?void 0:e.subscriptionTier)}),[]),h=Boolean(null===(t=e.userEmailDomainSettings)||void 0===t?void 0:t.isDomainVerified),{loading:f,organizationsInfo:S}=(0,s(926938).q)(),y=null==S?void 0:S.some((e=>e.isUserLastOwner)),x=e.disabled||h&&g||y,b=h&&g?(0,d.jsx)(i().sA,{defaultMessage:"Your organization has disabled account deletion.",id:"profileSettings.accountDeleteButton.disabledForManagedUser.tooltip"}):y?(0,d.jsx)(i().sA,{defaultMessage:"You are the last owner of an organization. Add a new organization owner to enable this action.",id:"profileSettings.accountDeleteButton.disabledForLastOrgOwner.tooltip"}):f?(0,d.jsx)(i().sA,{defaultMessage:"Loading account details...",id:"profileSettings.accountDeleteButton.loading.tooltip"}):null,v=async()=>{const{currentUserStore:e,currentUserRootStore:t}=s(351360).default.state;if(!e||!t)return;if(!e.isDefined())return;const g=n().oE(t.getSpaceViewStores().map((e=>e.getSpaceStore()))),h=(0,s(134217).L)().filter((t=>(0,s(68263).Km)(t.role)&&t.userId!==e.id)).length>0,f=g.filter((e=>!(0,s(322769).zL)(e.getModel(),e.getRole(),h))),S=n().oE(f.map((e=>{if(e)return{key:e.id,render:()=>(0,d.jsxs)("div",{style:m.spaceItem,children:[(0,d.jsx)(s(614505).A,{disabled:!0,icon:(0,r().c2)(c,e),isEmptyPage:!1,title:(0,r().GK)(c,e),size:32,isLarge:!0}),(0,d.jsxs)("div",{style:{minWidth:0},children:[(0,d.jsx)(l().A,{className:"notranslate",isMobile:u.isMobile,children:(0,a().rK)(c,e)}),(0,d.jsx)(l().A,{isSmall:!0,isMobile:u.isMobile,children:(0,a().rY)(c,p,e).subtitle})]})]})}}))),y=n().oE(f.map((e=>({id:e.id,name:(0,r().GK)(c,e)}))));o().X0(c);const x=(0,s(209199).vL)(s(662303).locale)?(0,d.jsx)(i().sA,{id:"profileSettings.deleteAccountConfirmationDialog.warning",defaultMessage:"This action cannot be undone. This will permanently delete your entire account. All private workspaces will be deleted, and you will be removed from all shared workspaces."}):(0,d.jsx)(s(418884).A,{translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente su cuenta completa. Se eliminarán todas las áreas de trabajo privadas y se eliminará de todas las áreas de trabajo compartidas. Por favor, escriba su correo electrónico para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит всю вашу учетную запись. Все частные рабочие области будут удалены, и вы будете удалены из всех общих рабочих областей. Пожалуйста, введите ваш адрес электронной почты для подтверждения.",zh:"此操作无法撤消。 这将永久删除您的整个帐户。 将删除所有私有工作空间，您将从所有共享工作空间中删除。 请输入您的电子邮箱进行确认。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird Ihr gesamtes Konto dauerhaft gelöscht. Alle privaten Arbeitsbereiche werden gelöscht und Sie werden aus allen freigegebenen Arbeitsbereichen entfernt. Bitte geben Sie Ihre E-Mail-Adresse zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement votre compte en entier. Tous les espaces de travail privés seront supprimés et vous serez supprimé de tous les espaces de travail partagés. Veuillez taper votre email pour confirmer.",ja:"この操作を元に戻すことはできません。 これによりアカウント全体が完全に削除されます。 すべてのプライベートワークスペースが削除され、あなたはすべての共有ワークスペースから削除されます。 確認のためにメールアドレスを入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'intero account. Tutti gli spazi di lavoro privati verranno eliminati e verranno rimossi da tutti gli spazi di lavoro condivisi. Inserisci la tua email per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente sua conta inteira. Todos os espaços de trabalho privados serão excluídos e você será removido de todos os espaços de trabalho compartilhados. Por favor, digite o seu email para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt uw gehele account permanent verwijderd. Alle privéwerkruimten worden verwijderd en u wordt verwijderd uit alle gedeelde werkruimten. Voer je e-mailadres in om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie całego konta. Wszystkie prywatne obszary robocze zostaną usunięte, a użytkownik zostanie usunięty ze wszystkich współużytkowanych obszarów roboczych. Wpisz swój e-mail, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort hela ditt konto permanent. Alla privata arbetsytor kommer att raderas, och du kommer att tas bort från alla delade arbetsytor. Vänligen skriv in din email för att bekräfta.",uk:"Цю дію не можна скасувати. Таким чином буде видалено весь обліковий запис назавжди. Всі приватні робочі області будуть видалені, і ви будете видалені з усіх спільних робочих областей. Будь ласка, введіть електронний лист для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette hele kontoen din. Alle private arbeidsområder blir slettet, og du vil bli fjernet fra alle delte arbeidsområder. Vennligst skriv inn din epost for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu işlem hesabınızın tamamını kalıcı olarak siler. Tüm özel çalışma alanları silinecek ve paylaşılan tüm çalışma alanlarından kaldırılacaksınız. Lütfen onaylamak için e-postanızı yazın.",cs:"Tuto akci nelze vrátit zpět. Tím bude trvale smazán celý váš účet. Všechny soukromé pracovní prostory budou smazány a budete ze všech sdílených pracovních prostor odstraněni. Pro potvrzení zadejte svůj e-mail.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn toàn bộ tài khoản của bạn. Tất cả các không gian làm việc riêng tư sẽ bị xóa và bạn sẽ bị xóa khỏi tất cả các không gian làm việc chung. Vui lòng nhập email của bạn để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette hele din konto. Alle private arbejdsområder slettes, og du vil blive fjernet fra alle delte arbejdsområder. Indtast venligst din email for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a teljes fiókot. Minden privát munkaterület törlődik, és eltávolításra kerül minden megosztott munkaterületről. Kérjük, írja be e-mail címét, hogy megerősítse.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي الإجراء إلى حذف حسابك بالكامل. سيتم أيضا حذف جميع مساحات العمل الخاصة ، وستتم إزالتك من جميع مساحات العمل المشتركة. يرجى كتابة البريد الإلكتروني الخاص بك للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบบัญชีทั้งหมดของคุณอย่างถาวร พื้นที่ทำงานส่วนตัวทั้งหมดจะถูกลบและคุณจะถูกลบออกจากพื้นที่ทำงานที่ใช้ร่วมกันทั้งหมด กรุณาพิมพ์อีเมลของคุณเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את כל החשבון שלך. כל סביבות העבודה הפרטיות יימחקו, ותוסר מכל סביבות העבודה המשותפות. הקלד את האימייל שלך כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa koko tilin pysyvästi. Kaikki yksityiset työtilat poistetaan ja poistetaan kaikista jaetuista työtiloista. Vahvistaaksesi kirjoita sähköpostiosoitteesi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus seluruh akun Anda. Semua ruang kerja pribadi akan dihapus, dan Anda akan dihapus dari semua ruang kerja bersama. Ketikkan email Anda untuk mengonfirmasi."}});await s(920093).h({title:(0,d.jsx)(i().sA,{id:"profileSettings.deleteAccountConfirmationDialog.title",defaultMessage:"Delete your entire account permanently?"}),message:x,content:(0,d.jsxs)(d.Fragment,{children:[S&&S.length>0?(0,d.jsx)("div",{style:{overflow:"hidden",borderRadius:6},children:(0,d.jsx)("ul",{style:m.spaceNameList,children:S.map((e=>{let{key:t,render:s}=e;return(0,d.jsx)("div",{children:s()},t)}))})}):null,(0,d.jsx)(s(554509).D,{styleName:"Body-14px/Regular",colorName:"primary",children:(0,d.jsx)(i().sA,{id:"profileSettings.deleteAccountConfirmationDialog.prompt",defaultMessage:"Please type in your email to confirm."})})]}),acceptLabel:0===y.length?(0,d.jsx)(i().sA,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountButton.label",defaultMessage:"Permanently delete account"}):c.device.isMobile?(0,d.jsx)(i().sA,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButtonMobile.label",defaultMessage:"{numberOfWorkspaces, plural, one {Delete account & 1 workspace} other {Delete account & {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:y.length}}):(0,d.jsx)(i().sA,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButton.label",defaultMessage:"{numberOfWorkspaces, plural, one {Permanently delete account and 1 workspace} other {Permanently delete account and {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:y.length}}),requiredInputValue:e.getEmail()})&&(o().FZ(c),s(404141).A.reset(),s(881738).l(c))};return(0,d.jsx)(s(702723).A,{type:"custom",useFlexboxStyle:!u.isMobile,isMobile:u.isMobile,title:(0,d.jsx)(i().sA,{id:"profileSettings.accountDeletionSetting.title",defaultMessage:"Delete my account"}),caption:(0,d.jsx)(i().sA,{id:"manageActiveSessions.accountDeletionSetting.label",defaultMessage:"Permanently delete the account and remove access from all workspaces."}),isCritical:!0,customButton:u.isMobile?(0,d.jsx)("div",{style:{marginTop:12},children:(0,d.jsx)(s(864943).A,{size:"lg",color:"uiRed",onClick:v,disabled:x,disabledFeedback:x,children:(0,d.jsx)(i().sA,{id:"profileSettings.deleteMyAccount.button.label",defaultMessage:"Delete my account"})})}):(0,d.jsx)(s(197190).A,{style:{borderRadius:"0.25em"},onClick:v,disabled:x,disabledFeedback:x,children:(0,s(983125).d)(m.icon)}),disabled:x,tooltipLabel:b})}},963550:(e,t,s)=>{s.d(t,{A:()=>r});s(296540);var i=()=>s(959013),n=()=>s(534177),o=s(474848);function r(e){let{target:t}=e;switch(t){case"notify_mobile":return(0,o.jsx)(i().sA,{defaultMessage:"Mobile push notifications",id:"notificationSettings.mobilePushNotificationSettings.title"});case"notify_desktop":return(0,o.jsx)(i().sA,{id:"notificationSettings.desktopNotificationSettings.title",defaultMessage:"Desktop push notifications"});case"notify_email":return(0,o.jsx)(i().sA,{id:"notificationSettings.productNotifEmails.title",defaultMessage:"Activity in your workspace"});case"notify_email_always":return(0,o.jsx)(i().sA,{id:"notificationSettings.emailAlwaysNotificationSettings.title",defaultMessage:"Always send email notifications"});case"notify_slack":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackNotificationSettings.title",defaultMessage:"Slack notifications"});case"notify_slack_mention":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackMentionNotificationSettings.title",defaultMessage:"Only user or group mentions"});case"notify_slack_all_activity":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackAllActivityNotificationSettings.title",defaultMessage:"Activity in your workspace"});case"notify_email_digest":return(0,o.jsx)(i().sA,{id:"notificationSettings.pageUpdatesNotificationSettings.title",defaultMessage:"Page updates"});case"notify_home_digest_email":return(0,o.jsx)(i().sA,{id:"notificationSettings.homeDigestEmailNotificationSettings.title",defaultMessage:"Workspace digest"});case"marketing_emails":return(0,o.jsx)(i().sA,{id:"notificationSettings.marketingEmails.title",defaultMessage:"Announcements and update emails"});case"desktop_badge":return(0,o.jsx)(i().sA,{id:"notificationSettings.desktopBadge.title",defaultMessage:"Desktop badge icon"});default:(0,n().HB)(t)}}},966480:(e,t,s)=>{s.d(t,{BI:()=>m,T0:()=>p,jc:()=>f});var i=s(296540),n=()=>s(484714),o=()=>s(56366),r=()=>s(959013),a=()=>s(406699),l=()=>s(939740),d=()=>s(404141),c=s(474848);function u(e){let{blockStore:t}=e;const n=(0,s(401497).IS)((()=>({container:{width:"100%"},linkBox:{width:"100%"},linkBoxHover:{marginLeft:-10,paddingLeft:10,width:"calc(100% + 10px)"}})),[]),r=(0,o().K8)((()=>(0,s(492414).J8)({store:t,pageVisitSource:s(584262).y8.LinkInPage})),[t]),a=(0,i.useCallback)((e=>{e.metaKey||d().A.setState({...d().A.state,open:!1})}),[]);return(0,c.jsx)("div",{style:n.container,children:(0,c.jsx)(s(296798).A,{href:r,style:n.linkBox,hoveredStyle:n.linkBoxHover,onClick:a,children:(0,c.jsx)(s(744766).oc,{blockStore:t,skipUntitledStyling:!0})})})}const p={id:"pageName",headerTitle:(0,c.jsx)(r().sA,{id:"offlinePagesTable.columnHeader.pageName",defaultMessage:"Page name"}),renderCell:e=>(0,c.jsx)(u,{blockStore:e.pageBlockStore}),widthData:{width:260},sortable:!1},m={id:"lastModifiedTime",headerTitle:(0,c.jsx)(r().sA,{id:"offlinePagesTable.columnHeader.lastModifiedTime",defaultMessage:"Last modified time"}),renderCell:e=>(0,c.jsx)(s(625383).d,{dateTs:e.lastModifiedTime}),widthData:{width:100},sortable:!0};function g(){const{isMobileNative:e}=(0,n().Y0)();return e?(0,c.jsx)(r().sA,{id:"offlinePagesTable.columnHeader.options",defaultMessage:"Options"}):null}function h(e){let{blockStore:t}=e;const i=(0,r().tz)(),d=(0,n().v3)(),u=(0,o().K8)((()=>!s(227440).A.state.online),[]);return(0,c.jsx)(a().Ay,{popupType:a().z7.Popup,renderOrigin:e=>(0,c.jsx)(s(285790).A,{icon:s(568625).L,...e,ariaLabel:i.formatMessage({id:"offlinePagesTable.options",defaultMessage:"Options"})}),render:()=>(0,c.jsx)(s(928600).A,{menuType:s(722872).gu.Popup,children:(0,c.jsx)(l().Ay,{type:l().Oh.Vertical,sections:[{key:"options",render:e=>(0,c.jsx)(s(89924).A,{...e,shouldShowBottomDivider:!0}),items:[{key:"removeOffline",action:()=>{s(589506).toggleExplicitlyOfflined({store:t,environment:d,analyticsFrom:"offline_settings"})},render:e=>(0,c.jsx)(s(760217).A,{...e,title:(0,c.jsx)(r().sA,{defaultMessage:"Remove offline page",id:"offlinePagesTable.options.remove"}),disabled:u,disabledFeedback:!0})}]}],initialFocus:void 0})})})}const f={id:"options",headerTitle:(0,c.jsx)(g,{}),renderCell:e=>e.showOptions?(0,c.jsx)(h,{blockStore:e.pageBlockStore}):null,widthData:{width:24},sortable:!1}},970209:(e,t,s)=>{s.d(t,{A:()=>g});s(296540);var i=()=>s(484714),n=()=>s(401497),o=()=>s(959013),r=()=>s(284371),a=()=>s(148024),l=()=>s(755636),d=()=>s(864943),c=()=>s(204063),u=()=>s(836251),p=()=>s(991249),m=s(474848);const g=function(e){let{style:t,icon:s,title:n,caption:o,upgradeMessage:r,from:a,subscriptionTier:l,onUpgradeClick:d,learnMoreRoute:c}=e;const u=(0,i().v3)();return(0,m.jsxs)("section",{style:f(u,t),children:[(0,m.jsx)(y,{icon:s}),(0,m.jsx)(h,{title:n}),(0,m.jsx)(x,{caption:o}),(0,m.jsx)(A,{upgradeMessage:r,from:a,subscriptionTier:l,onUpgradeClick:d,learnMoreRoute:c})]})};function h(e){let{title:t}=e;return(0,m.jsx)("header",{style:{fontWeight:r().Wy.semibold},children:t})}function f(e,t){const{device:s}=e;return{...t,fontSize:14,...!s.isMobile&&{maxWidth:340}}}function S(e){return{color:e.mediumTextColor,marginTop:4,marginBottom:16}}function y(e){let{icon:t}=e;const s=(0,n().DP)();return t?t(function(e){return{width:32,height:"auto",fill:e.mediumIconColor,marginBottom:8}}(s)):null}function x(e){let{caption:t}=e;const s=(0,n().DP)();return(0,m.jsx)("p",{style:S(s),children:t})}function b(e){let{upgradeMessage:t,from:s,subscriptionTier:n,onUpgradeClick:r}=e;const a=(0,i().v3)();return(0,m.jsx)(c().A,{onClick:e=>function(e,t,s,i,n){p().K(i,{from:t,upsell:{type:"product",product:s,limit:{type:"none"}}}),n&&n(e)}(e,s,n,a,r),size:"lg",children:t||(0,m.jsx)(o().sA,{defaultMessage:"Upgrade",id:"upsellCallout.upgradeButton.text"})})}function v(e){let{from:t,learnMoreRoute:s}=e;const n=(0,i().v3)();return(0,m.jsx)(d().A,{size:"lg",onClick:()=>function(e,t,s){l().f({environment:s,url:(0,u().xS)(t)}),a().FH(s,{from:e})}(t,s,n),children:(0,m.jsx)(o().sA,{defaultMessage:"Learn more",id:"upsellCallout.learnMoreButton.text"})})}function A(e){let{upgradeMessage:t,from:s,subscriptionTier:i,onUpgradeClick:n,learnMoreRoute:o}=e;return(0,m.jsxs)("footer",{style:{display:"flex",flexWrap:"wrap",gap:"8px 12px"},children:[(0,m.jsx)(b,{upgradeMessage:t,from:s,subscriptionTier:i,onUpgradeClick:n}),(0,m.jsx)(v,{from:s,learnMoreRoute:o})]})}},971407:(e,t,s)=>{s.d(t,{B:()=>U});s(944114),s(581454),s(296540);var i=()=>s(662303),n=()=>s(56366),o=()=>s(401497),r=()=>s(869190),a=()=>s(857639),l=s(474848);const d=(0,s(340498).wt)("docOnDoc",{viewBox:"0 0 20 20",svg:(0,l.jsx)("path",{d:"M6.268 5.28V3.61q0-1.107.56-1.674.561-.575 1.661-.575h2.57q.595 0 1.06.171.473.164.855.56l3.404 3.467q.403.417.567.888.165.465.164 1.142v5.414q0 1.107-.567 1.675-.56.567-1.654.567h-1.402v-1.34h1.279q.498 0 .745-.253.252-.26.253-.731v-5.66h-3.008q-.636 0-.964-.322-.328-.328-.328-.963V2.709H8.599q-.492 0-.745.253-.247.253-.247.731V5.28zm6.316.526q0 .177.075.26.083.075.253.075h2.502l-2.83-2.871zm-9.7 10.705V7.118q0-1.107.56-1.675.561-.573 1.661-.574h2.38q.621 0 1.025.137.41.13.82.554l3.705 3.76q.287.293.438.56.15.267.198.595.055.321.055.779v5.257q0 1.107-.561 1.675-.56.567-1.661.567H5.105q-1.1 0-1.66-.567-.561-.56-.561-1.675m1.346-.082q0 .479.247.731.246.253.738.253h6.173q.492 0 .738-.253.253-.253.253-.731V11.41h-3.61q-.725 0-1.086-.355-.363-.363-.363-1.1v-3.74H5.222q-.5 0-.745.253-.247.253-.247.724zm4.676-6.2h3.288L8.503 6.476v3.35q0 .21.096.307.095.096.307.096"})});var c=()=>s(426388),u=()=>s(965998),p=()=>s(798880),m=()=>s(762433),g=()=>s(959013),h=()=>s(252105),f=()=>s(449506),S=()=>s(84817),y=()=>s(7674),x=()=>s(554509),b=()=>s(107683),v=()=>s(453697),A=()=>s(719147),w=()=>s(836251),j=()=>s(497799),M=()=>s(351360),k=()=>s(630116),C=()=>s(324561),I=()=>s(334992),_=()=>s(597898),T=()=>s(611308);function P(e){const{onFinished:t,userId:s,userContractionMessages:i}=e,r=(0,o().IS)((e=>({customIcon:{alignSelf:"center",flexGrow:0},removeIconInCornerOfUserAvatar:{background:"white",borderRadius:"50%",position:"absolute",bottom:0,right:-5},dashedEllipse:{width:56,height:56,position:"absolute",top:-4,left:-4},customIconWrapper:{position:"relative",width:"fit-content",margin:"0 auto"},wrapper:{marginTop:4},descriptionBox:{borderRadius:6,textAlign:"center",background:e.surface.wash,padding:"16px 12px"}})),[]),a=(0,g().tz)(),d=(0,n().K8)((()=>M().default.state.currentSpaceStore),[]),c=(0,n().K8)((()=>{if(!d)return;const e=k().LU.createChildStore(d,{id:s,table:p().oo});return e.isDefined()&&!e.getIsDeleted()?e:void 0}),[d,s]),u=(0,_().P9)({name:"admin_transfer_private_content",spaceId:null==d?void 0:d.id,userId:s}),{name:m,spaceName:h}=(0,n().K8)((()=>({name:null==c?void 0:c.getDisplayName(a),spaceName:null==d?void 0:d.getName()})),[c,a,d]),f=(0,C().f_)({spaceId:null==d?void 0:d.id}),A=(0,C().a9)(f);return(0,l.jsx)(b().s,{areaConstraint:{width:{type:"min",length:406},height:{type:"unlimited",scroll:"allow"}},isOpen:!0,onDismiss:()=>t(!1),animateSizeTransition:!0,render:()=>(0,l.jsx)(y().tf,{header:(0,l.jsx)(y().YA,{iconAndTitle:(0,l.jsxs)(S().Y1,{align:"center",gap:8,direction:"vertical",children:[(0,l.jsx)(v().A,{userStore:c,size:48,style:r.customIcon,borderStyle:"solid"}),(0,l.jsx)(x().D,{styleName:"Heading-17px/Semibold",style:{textAlign:"center"},children:L(h,m)})]})}),footer:(0,l.jsx)(y().aO,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:N(m),onClick:()=>t(!0)}],secondaryButtons:[{buttonType:"outline",label:(0,l.jsx)(g().sA,{id:"contractionConfirmation.manageMembers",defaultMessage:"Manage members"}),onClick:()=>t(!1)}]}),children:(0,l.jsxs)(S().Y1,{style:r.descriptionBox,gap:12,children:[(0,l.jsx)(x().D,{styleName:"UIRegular-14px/Medium",children:(0,l.jsx)(g().sA,{id:"contractionConfirmation.description.withName",defaultMessage:"They have been an active Notion member. {hasTransferrableContent, select, true {} other {Removing them may cause loss of private pages.}}",values:{hasTransferrableContent:u}})}),d&&A&&(0,l.jsx)(D,{spaceStore:d,billingData:A,userContractionMessages:i})]})})})}function B(){return null}function R(e){return e>2e3?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.2000",defaultMessage:"2000+"}):e>1500?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.1500",defaultMessage:"1500+"}):e>1e3?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.1000",defaultMessage:"1000+"}):e>500?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.500",defaultMessage:"500+"}):e>250?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.250",defaultMessage:"250+"}):e>100?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.100",defaultMessage:"100+"}):e>75?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.75",defaultMessage:"75+"}):e>50?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.50",defaultMessage:"50+"}):e>25?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.25",defaultMessage:"25+"}):e>10?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.10",defaultMessage:"10+"}):e>5?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.5",defaultMessage:"5+"}):(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.2",defaultMessage:"2+"})}function D(e){let{spaceStore:t,billingData:s,userContractionMessages:n}=e;const o=(0,j().H)({spaceStore:t}),d=(0,C().Q7)(t.id,s,o.loading?0:o.members.length),c=(0,m().yB)({logFunction:a().log.bind(a()),spaceId:t.id,billingData:s})??d,u=(0,I().A)(t),p=d-1<c;if(s.subscription&&u&&p){const e=(0,r().W_)(s.subscription.currentPeriodEnd.toMillis(),"month_day_long",i().locale);return(0,l.jsx)(x().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:{padding:"0px 12px"},children:(0,l.jsx)(g().sA,{id:"contractionConfirmation.billing.message",defaultMessage:"Your workspace is currently billed for {paidSeats, plural, one {# seat} other {# seats}}. Your bill will remain the same until it is adjusted at the start of your next renewal: {nextBillingDate}. <learnmorelink>Learn more</learnmorelink>",values:{paidSeats:d,nextBillingDate:e,learnmorelink:e=>(0,l.jsx)(A().A,{href:(0,w().xS)("guides.billingGuide"),external:!0,children:e})}})})}return(0,l.jsxs)("div",{style:{padding:"12px 0 0 12px"},children:[(0,l.jsx)(B,{}),(0,l.jsx)(S().Y1,{gap:16,children:n.map(((e,t)=>{let{icon:s,message:i}=e;return(0,l.jsxs)(S().Y1,{direction:"horizontal",align:"center-left",gap:6,children:[(0,l.jsx)(s,{width:14}),(0,l.jsx)(x().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:i})]},t)}))})]})}function N(e){return e&&e.length<16?(0,l.jsx)(g().sA,{id:"contractionConfirmation.remove.withName",defaultMessage:"Remove {name}",values:{name:e}}):(0,l.jsx)(g().sA,{id:"contractionConfirmation.remove",defaultMessage:"Remove member"})}function L(e,t){return t?(0,l.jsx)(g().sA,{id:"contractionConfirmation.title.withName",defaultMessage:"Remove {name} from {space}?",values:{name:t||"this member",space:e||"this workspace"}}):(0,l.jsx)(g().sA,{id:"contractionConfirmation.title",defaultMessage:"Are you sure you want to remove this member?"})}async function U(e,t,s){let i=[],n={};if(s){const o=await f().callApi({eventName:"getUserContractionData",environment:e,data:{userId:t,spaceId:s}});"success"===o.type&&(n=o.data,i=function(e){const t=[];if(!("l28_active"in e))return t;const s=Number(e.num_pages_created);s>1&&t.push({icon:d,message:(0,l.jsx)(g().sA,{id:"contractionConfirmation.numberOfPages",defaultMessage:"Created {numberOfPages} pages",values:{numberOfPages:R(s)}})});const i=Number(e.num_comments);i>1&&t.push({icon:u().M,message:(0,l.jsx)(g().sA,{id:"contractionConfirmation.numberOfComments",defaultMessage:"Made {numberOfComments} comments",values:{numberOfComments:R(i)}})});const n=Number(e.l28_active);return n>1&&t.push({icon:c().S,message:(0,l.jsx)(g().sA,{id:"contractionConfirmation.activity",defaultMessage:"Visited {activeDays} days in the past month",values:{activeDays:R(n)}})}),t}(n))}return h().u4(e,{name:"contraction_contextual_confirmation_shown",args:{userContractionData:n}}),await T().A.showModal((s=>{const o=t=>{t?h().u4(e,{name:"contraction_contextual_confirmation_confirmed",args:{userContractionData:n}}):h().u4(e,{name:"contraction_contextual_confirmation_cancelled",args:{userContractionData:n}}),s(t)};return{dismissUsing:"closeButtonOrEscape",modalStyle:{minWidth:406,padding:20},onDismiss:()=>o(!1),content:(0,l.jsx)(P,{onFinished:o,userId:t,userContractionMessages:i})}}))}},983125:(e,t,s)=>{s.d(t,{d:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("chevronRightRoundedThin",{viewBox:"0 0 24 24",svg:(0,i.jsx)("path",{d:"M17.0078 11.8594C17.0078 11.724 16.9818 11.599 16.9297 11.4844C16.8776 11.3698 16.7995 11.2604 16.6953 11.1562L10.6094 5.20312C10.4375 5.03125 10.224 4.94531 9.96875 4.94531C9.80208 4.94531 9.64844 4.98698 9.50781 5.07031C9.36719 5.14844 9.25521 5.25521 9.17188 5.39062C9.09375 5.52604 9.05469 5.67969 9.05469 5.85156C9.05469 6.09635 9.14844 6.3151 9.33594 6.50781L14.8203 11.8594L9.33594 17.2109C9.14844 17.4036 9.05469 17.625 9.05469 17.875C9.05469 18.0417 9.09375 18.1927 9.17188 18.3281C9.25521 18.4688 9.36719 18.5781 9.50781 18.6562C9.64844 18.7396 9.80208 18.7812 9.96875 18.7812C10.224 18.7812 10.4375 18.6927 10.6094 18.5156L16.6953 12.5625C16.7995 12.4583 16.8776 12.349 16.9297 12.2344C16.9818 12.1198 17.0078 11.9948 17.0078 11.8594Z"})})},984925:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(296540),n=()=>s(401497),o=()=>s(62926),r=()=>s(864943),a=()=>s(125565),l=s(474848);function d(e){const{title:t,onClick:s}=e,[d,c]=(0,i.useState)(!1),u=(0,i.useCallback)((()=>c(!0)),[c]),p=(0,i.useCallback)((()=>c(!1)),[c]),m=(0,n().IS)((e=>({button:{width:"100%",justifyContent:"left",padding:"10px 16px",alignItems:"start",height:"auto"},buttonLoading:{width:"100%",height:59},buttonInner:{minWidth:0},icon:{width:20,height:20,marginRight:10,fill:d?e.blueColor:e.regularIconColor}})),[d]),g=(0,o().a)(m.icon);return(0,l.jsxs)(r().A,{size:"lg",style:m.button,onClick:s,onMouseEnter:u,onMouseLeave:p,hovered:d,children:[(0,l.jsx)("div",{style:m.icon,children:g}),(0,l.jsx)("div",{style:m.buttonInner,children:(0,l.jsx)(a().A,{children:t})})]})}},991627:(e,t,s)=>{s.d(t,{L:()=>g});s(296540);var i=()=>s(484714),n=()=>s(56366),o=()=>s(959013),r=()=>s(317909),a=()=>s(755199),l=()=>s(989423),d=()=>s(836251),c=()=>s(351360),u=()=>s(719147),p=()=>s(702723),m=s(474848);function g(e){let{isMobile:t}=e;const s=(0,i().v3)(),g=(0,n().K8)((()=>c().default.state.currentUserSettingsStore),[]),h=(0,n().K8)((()=>{var e;return!0===(null==g||null===(e=g.getSettings())||void 0===e?void 0:e.disable_page_analytics)?"do_not_record":"record"}),[g]);return(0,m.jsx)(p().A,{isMobile:t,title:(0,m.jsx)(o().sA,{id:"viewHistorySettings.title",defaultMessage:"Show my view history"}),caption:(0,m.jsx)(o().sA,{id:"viewHistorySettings.description.message",defaultMessage:"People with edit or full access will be able to see when you’ve viewed a page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,m.jsx)(u().A,{external:!0,href:(0,d().xS)("guides.pageAnalytics"),children:e})}}),type:"dropdown",currentOption:h,options:[{key:"record",label:(0,m.jsx)(o().sA,{id:"viewHistorySettings.record.label",defaultMessage:"Record"})},{key:"do_not_record",label:(0,m.jsx)(o().sA,{id:"viewHistorySettings.do_not_record.label",defaultMessage:"Don't record"})}],onSelectOption:e=>{const t="do_not_record"===e;r().createAndCommit({userAction:"ViewHistorySettings.onSelectOption",environment:s,canUndo:!0,perform:e=>{g&&a().mJ({userSettingsStore:g,data:{disable_page_analytics:t},transaction:e})}}),l().vd(s,t?"page_analytics_account_opt_out":"page_analytics_account_opt_in")}})}},993342:(e,t,s)=>{s.d(t,{A:()=>p});s(296540);var i=()=>s(484714),n=()=>s(56366),o=()=>s(959013),r=()=>s(980151),a=()=>s(702723),l=()=>s(437622),d=()=>s(351360),c=()=>s(84161),u=s(474848);function p(e){let{isMobile:t}=e;const s=(0,i().v3)(),p=(0,n().K8)((()=>(0,c().S)()),[]),{isElectron:m}=(0,i().Y0)(),g=(0,n().K8)((()=>{var e,t;return l().y$(s,{spaceView:null===(e=d().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getModel(),space:null===(t=d().default.state.currentSpaceStore)||void 0===t?void 0:t.getModel()})}),[s]),h=m?(0,u.jsx)(o().sA,{id:"pageOnAppStoreSetting.desktopDescription.message",defaultMessage:"Choose what to show when opening new windows, switching workspaces, or launching app without restoring tabs."}):(0,u.jsx)(o().sA,{id:"pageOnAppStoreSetting.description.message",defaultMessage:"Choose what to show when Notion starts or when you switch workspaces."}),f=m?(0,u.jsx)(o().sA,{id:"pageOnAppStoreSetting.title",defaultMessage:"Default page"}):(0,u.jsx)(o().sA,{id:"pageOnAppStoreSetting.title.desktop",defaultMessage:"Open on start"});return(0,u.jsx)(a().A,{isMobile:t,title:f,caption:h,type:"dropdown",currentOption:g,options:p,onSelectOption:e=>{r()._V({userAction:"NotificationsAndPersonalSettings.PageOnAppStartSetting",environment:s,option:e,from:"user_settings"})}})}}}]);