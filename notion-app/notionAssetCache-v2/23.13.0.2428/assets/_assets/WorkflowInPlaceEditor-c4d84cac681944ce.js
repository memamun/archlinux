"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[43647,50437],{346:(e,t,n)=>{n.d(t,{MG:()=>m,T1:()=>p,a1:()=>b,dt:()=>f,kg:()=>h,lC:()=>y,n_:()=>v});var i=n(296540),o=()=>n(484714),r=()=>n(56366),a=()=>n(187174),s=()=>n(645873),l=()=>n(941463),d=()=>n(441199),c=()=>n(749687),u=()=>n(737230),g=()=>n(756114);const p=new(s().O2)("PerformanceToolbar",(()=>Promise.all([n.e(23806),n.e(16471),n.e(47123),n.e(17989),n.e(56985),n.e(48680),n.e(45624)]).then(n.bind(n,140401)))),m=(0,s()._h)(p,(e=>e.PerformanceToolbar)),f=(0,s()._h)(p,(e=>e.PerformanceToolbarSettings));function h(){const e=(0,o().v3)();return(0,r().K8)((()=>(0,g().D)(e,e.RouterStore.state)),[e])}function v(){const e=(0,o().v3)(),t=x("PerformanceToolbarStore"),n=x("isPerformanceToolbarVisible");return(0,r().K8)((()=>!(!t||!n)&&n(e,e.RouterStore.state,t.state)),[n,e,t])}function y(){const e=x("PerformanceToolbarStore");return(0,r().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function b(){const e=(0,o().v3)(),t=x("createPerformanceToolbarMouseListeners"),n=x("PerformanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:g,secondarySidebarWidth:p,updateSidebarExpanded:m,updateSidebarWidth:f}=(0,r().K8)((()=>({sidebarExpanded:c().sidebarExpandedStore.state,sidebarWidth:c().sidebarWidthStore.state,secondarySidebarExpanded:d().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,i.useEffect)((()=>{if(n&&t)return t(e,(e=>n.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,g,p,m,f)}),[t,e,n,a,s,g,p,m,f])}function x(e){const t=h(),[{value:n}]=(0,a().Yb)((()=>t?p.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return n}},43013:(e,t,n)=>{n.d(t,{K:()=>d});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var i=()=>n(484714),o=()=>n(56366),r=()=>n(798880),a=()=>n(534177),s=()=>n(630116),l=()=>n(134217);function d(e){const t=(0,i().v3)();return(0,o().K8)((()=>{const n=e.state;if(!n)return{memberEmails:new Set,guestEmails:new Set};const i=l().Ye(n),o=l().oe(n),d=e=>new(s().LU)(t,{table:r().oo,id:e.userId}).getEmail();return{memberEmails:new Set(i.map(d).filter(a().O9)),guestEmails:new Set(o.map(d).filter(a().O9))}}),[t,e])}},43972:(e,t,n)=>{n.d(t,{w:()=>l});n(296540);var i=()=>n(764880),o=()=>n(534177),r=()=>n(256863),a=()=>n(453697),s=n(474848);function l(e){const{actor:t}=e,n={size:e.size??14,style:{marginRight:2,...e.style}};return(0,i().H3)(t)?(0,s.jsx)(r().A,{botValue:t.asActor,...n}):(0,i().ps)(t)?(0,s.jsx)(a().A,{userValue:t.asActor,...n}):(0,i().h2)(t)?(0,s.jsx)(a().A,{userValue:void 0,...n}):void(0,o().HB)(t)}},58293:(e,t,n)=>{n.d(t,{r:()=>r});var i=()=>n(56366),o=()=>n(351360);function r(){return(0,i().K8)((()=>o().default.state.currentSpaceStore),[])}},62616:(e,t,n)=>{n.d(t,{c:()=>o});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M10 2.375c-1.778 0-3.415.256-4.63.69-.604.216-1.138.488-1.532.82-.391.331-.713.784-.713 1.347q0 .157.032.304h-.032v9.232c0 .563.322 1.016.713 1.346.394.333.928.605 1.532.82 1.215.435 2.852.691 4.63.691s3.415-.256 4.63-.69c.604-.216 1.138-.488 1.532-.82.391-.331.713-.784.713-1.347V5.536h-.032q.031-.147.032-.304c0-.563-.322-1.016-.713-1.346-.394-.333-.928-.605-1.532-.82-1.215-.435-2.852-.691-4.63-.691M4.375 5.232c0-.053.028-.188.27-.391.238-.201.62-.41 1.146-.599 1.047-.374 2.535-.617 4.209-.617s3.162.243 4.21.617c.526.188.907.398 1.146.599.24.203.269.338.269.391s-.028.188-.27.391c-.238.202-.62.41-1.146.599-1.047.374-2.535.617-4.209.617s-3.162-.243-4.21-.617c-.526-.188-.907-.397-1.146-.599-.24-.203-.269-.338-.269-.39m11.25 1.718V10c0 .053-.028.188-.27.391-.238.201-.62.41-1.146.599-1.047.374-2.535.617-4.209.617s-3.162-.243-4.21-.617c-.526-.188-.907-.398-1.146-.599-.24-.203-.269-.338-.269-.391V6.95c.297.17.633.32.995.45 1.215.433 2.852.69 4.63.69s3.415-.257 4.63-.69c.362-.13.698-.28.995-.45m-11.25 7.818v-3.05c.297.17.633.32.995.449 1.215.434 2.852.69 4.63.69s3.415-.256 4.63-.69c.362-.13.698-.279.995-.45v3.05c0 .054-.028.189-.27.392-.238.201-.62.41-1.146.599-1.047.374-2.535.617-4.209.617s-3.162-.243-4.21-.617c-.526-.188-.907-.398-1.146-.599-.24-.203-.269-.338-.269-.391"})},o=(0,n(340498).wt)("collection",i)},63467:(e,t,n)=>{n.d(t,{y:()=>c});var i=()=>n(637997),o=()=>n(267419);const r={ko:()=>n.e(2268).then(n.bind(n,224434)),es:()=>n.e(95264).then(n.bind(n,196425)),de:()=>n.e(35390).then(n.bind(n,653703)),fr:()=>n.e(3272).then(n.bind(n,94677)),pt:()=>n.e(27315).then(n.bind(n,766869)),zh:()=>n.e(69945).then(n.bind(n,516814)),ja:()=>n.e(77757).then(n.bind(n,824432)),da:()=>n.e(9423).then(n.bind(n,440761)),fi:()=>n.e(59337).then(n.bind(n,462135)),nb:()=>n.e(2040).then(n.bind(n,937314)),nl:()=>n.e(51106).then(n.bind(n,530897)),sv:()=>n.e(53631).then(n.bind(n,895222))};let a=!1,s=!1;async function l(e){for(const[n,o]of Object.entries(e.emojiLocaleKeywords)){var t;i().fB[n]={...i().fB[n],keywords:[...o,...(null===(t=i().fB[n])||void 0===t?void 0:t.keywords)||[]]}}await o().A.waitUntilLoaded(),o().A.update((t=>{let{emojiByName:n,...i}=t;return{...i,emojiByName:{...n,...e.emojiByName}}}))}async function d(){if(a)return;const[e]=n(662303).locale.split("-");e in r&&(await l(await r[e]()),a=!0)}const c=(0,n(279900).A)((async()=>{await async function(){s||(await l(await n.e(51872).then(n.bind(n,443716))),s=!0)}(),await d()}))},72307:(e,t,n)=>{n.d(t,{A:()=>i});const i={appCursorListener:{sidebar:1,secondarySidebar:2,editor:3,aiChat:3,marketplace:3,teamHome:3}}},72388:(e,t,n)=>{n.d(t,{V:()=>l});var i=()=>n(484714),o=()=>n(56366),r=()=>n(187174),a=()=>n(386164),s=()=>n(449506);function l(e,t){const n=(0,i().v3)(),l=(0,o().K8)((()=>{if(0!==t.length)return{spaceId:e,userIds:t}}),[e,t],{useDeepEqual:!0}),[{value:d}]=(0,r().Yb)((async()=>{if(void 0===l)return{};const t=await s().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:n,data:l,headers:(0,a().WS)({cellId:void 0,spaceId:e})});return"success"===t.type?t.data.userToGroupMap:{}}),[n,l,e],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3});return d}},75846:(e,t,n)=>{n.d(t,{u:()=>i});const i=(0,n(340498).xh)("globe",{default:{loader:()=>n.e(88865).then(n.bind(n,788865))},small:{loader:()=>n.e(60219).then(n.bind(n,60219))},mini:{loader:()=>n.e(29485).then(n.bind(n,629485))},large:{loader:()=>n.e(31331).then(n.bind(n,431331))}})},77279:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});class i extends(()=>n(757695))().default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const o=new i},84161:(e,t,n)=>{n.d(t,{S:()=>u});n(944114),n(296540);var i=()=>n(675910),o=()=>n(926401),r=()=>n(441977),a=()=>n(654601),s=()=>n(959013),l=()=>n(37433),d=()=>n(430483),c=n(474848);function u(){const e=(0,l().nk)(),t=d().zD.isFullPageAssistantInStartOptions(),n=[];return e&&n.push({key:"personal_home",label:(0,c.jsx)(s().sA,{id:"pageOnAppStoreSetting.home.label",defaultMessage:"Home"}),renderIcon:e=>(0,r().J)({width:20,height:20,...e})}),n.push({key:"last_visited_page",label:(0,c.jsx)(s().sA,{id:"pageOnAppStoreSetting.lastVisitedPage.label",defaultMessage:"Last visited page"}),renderIcon:e=>(0,i().M)({width:20,height:20,...e})},{key:"first_page",label:(0,c.jsx)(s().sA,{id:"pageOnAppStoreSetting.firstPage.label",defaultMessage:"Top page in sidebar"}),renderIcon:e=>(0,o().n)({width:20,height:20,padding:2,...e})}),t&&n.push({key:"chat",label:(0,c.jsx)(s().sA,{id:"pageOnAppStoreSetting.chat.label",defaultMessage:"Notion AI"}),renderIcon:e=>(0,a().X)({width:20,height:20,...e})}),n}},101847:(e,t,n)=>{n.d(t,{T:()=>i});const i=(0,n(340498).xh)("gift",{default:{loader:()=>n.e(23202).then(n.bind(n,723202))},small:{loader:()=>n.e(2264).then(n.bind(n,902264))},mini:{loader:()=>n.e(42668).then(n.bind(n,542668))},large:{loader:()=>n.e(25196).then(n.bind(n,725196))}})},130818:(e,t,n)=>{n.d(t,{M:()=>o});n(296540);var i=n(474848);const o=(0,n(340498).wt)("linkedDatabase",{viewBox:"0 0 20 20",svg:(0,i.jsxs)("g",{children:[(0,i.jsx)("path",{fillRule:"evenodd",d:"M10 1.75c-1.996 0-3.835.288-5.202.776-.68.243-1.284.55-1.732.928-.444.375-.816.894-.816 1.546v10c0 .652.372 1.17.816 1.546.448.378 1.052.685 1.732.928.947.338 2.12.58 3.415.697A.729.729 0 009 17.436c0-.4-.313-.727-.71-.764-1.166-.11-2.192-.326-2.987-.61-.587-.21-1.008-.442-1.269-.662-.264-.223-.284-.361-.284-.4v-2.99c.317.175.67.33 1.048.464.947.338 2.12.58 3.415.697A.729.729 0 009 12.436c0-.4-.313-.727-.71-.764-1.166-.11-2.192-.326-2.987-.61-.587-.21-1.008-.442-1.269-.662-.264-.223-.284-.361-.284-.4V7.01c.317.175.67.33 1.048.464 1.367.488 3.206.776 5.202.776s3.835-.288 5.202-.776c.377-.135.731-.29 1.048-.465V8.25a.75.75 0 001.5 0V5c0-.652-.372-1.17-.816-1.546-.448-.378-1.052-.685-1.732-.928-1.367-.488-3.206-.776-5.202-.776zM3.75 5c0-.039.02-.177.284-.4.26-.22.682-.452 1.269-.661C6.469 3.522 8.13 3.25 10 3.25s3.531.272 4.697.689c.587.209 1.009.44 1.269.66.264.224.284.362.284.401 0 .039-.02.177-.284.4-.26.22-.682.452-1.268.661-1.167.417-2.828.689-4.698.689-1.87 0-3.531-.272-4.697-.689-.587-.209-1.008-.44-1.269-.66C3.77 5.176 3.75 5.038 3.75 5z",clipRule:"evenodd"}),(0,i.jsx)("path",{d:"M17.75 15.786a.75.75 0 01-1.5 0V13.31l-4.72 4.72a.75.75 0 11-1.06-1.061l4.72-4.72h-2.476a.75.75 0 010-1.5H17a.75.75 0 01.75.75v4.286z"})]})})},132456:(e,t,n)=>{n.d(t,{J4:()=>C,kw:()=>w,lf:()=>k});n(16280),n(816573),n(878100),n(177936),n(748140),n(821903),n(491134),n(128845),n(237467),n(444732),n(979577),n(581454);var i=n.n(n(883503)),o=()=>n(496603),r=()=>n(720665),a=()=>n(416845),s=()=>n(628536),l=()=>n(96689);const d={version:8,notion_version:0,variant:2},c={version:8,notion_version:1,variant:2},u=0,g=1,p=6,m=8,f=10,h=Date.UTC(2024,0,1);function v(e,t){if(e)return t[u]=255,t[u+1]=240|15&t[u+1],t;const n=Math.floor(((new Date).getTime()-h)/r().nD);if(n>=4096||n<0)throw new Error("Invalid offsetInDays.");return t[u]=n>>4,t[u+1]=n<<4&240|15&t[u+1],t}function y(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[g]=240&t[g]|e/2**32&15;for(let n=0;n<4;n++)t[g+1+n]=e/2**(24-8*n)&255;return t}function b(e,t){const n=e?1:0;return t[p]=d.version<<4&240|d.notion_version<<1&14|1&n,t[m]=d.variant<<6&192|63&t[m],t}function x(e,t){if("block"===e)return t[f]=(0,s().vi)(e)|63&t[f],t;const n=(0,s().vi)(e);return t[f]=n>>8&127,t[f+1]=255&n,t}function S(e,t){const n=(0,s().TG)(e);return t[f]=127&n|128&t[f],t}function w(e,t,n,i){const o=new Uint8Array(16),r=globalThis.crypto.getRandomValues(o);return n!==l().NX&&v(e,r),y(t,r),b(i,r),x(n,r),A(r)}function C(e,t,n,i){return w(e,t,n,i)}function k(e,t,n){return j(e,t,n)}function j(e,t,n){const r=i()(n),l=o().iv(r,2).map((e=>parseInt(e.join(""),16)));if((0,s().ep)(t)){if(void 0===e)throw new(a().Um)(`Deterministic ID for '${t}' must specify a space short id`)}else if(void 0!==e)throw new(a().Um)(`Deterministic ID for '${t}' should not provide a space short id`);const d=new Uint8Array(l);return e&&y(e,d),S(t,d),function(e){e[p]=240&c.version<<4|14&c.notion_version<<1|1&e[p],e[m]=192&c.variant<<6|63&e[m]}(d),A(d)}const I=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function A(e){let t=0;return I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+"-"+I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]+I[e[t++]]}},162342:(e,t,n)=>{n.d(t,{W$:()=>s,fR:()=>r,iv:()=>a});var i=()=>n(228814),o=()=>n(846199);function r(e){o().A.setState({open:!0,...e})}function a(){o().A.setState({open:!1})}function s(e){i().A.setState({open:!0,...e})}},167334:(e,t,n)=>{n.d(t,{A:()=>l});n(296540);var i=()=>n(484714),o=()=>n(401497),r=()=>n(500066),a=()=>n(614505),s=n(474848);function l(e){const{icon:t,isAlias:n,isEmptyPage:l,iconStyle:d,size:c}=e,u=function(){const e=(0,i().v3)();return(0,o().IS)((t=>({wrap:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:e.device.isMobile?28:22,height:e.device.isMobile?24:18,position:"relative"},pageLinkInicator:{position:"absolute",width:"50%",height:"50%",right:0,bottom:-1,fill:"dark"===t.mode?t.regularTextColor:"#3E3C38",stroke:"dark"===t.mode?t.surface.wash:"white",strokeWidth:"dark"===t.mode?"1.85px":"1.5px"}})),[e])}();return(0,s.jsxs)("div",{style:u.wrap,children:[(0,s.jsx)(a().A,{disabled:!0,icon:t,isEmptyPage:l,size:c??19,style:d}),n&&(0,s.jsx)("div",{children:(0,r().G)(u.pageLinkInicator)})]})}},191197:(e,t,n)=>{n.d(t,{i:()=>o,z:()=>r});var i=()=>n(989423);function o(e,t){const{from:n}=t;i().vd(e,"show_tooltip",{from:n,time:Date.now()})}function r(e,t){const{from:n}=t;i().vd(e,"dismiss_tooltip",{from:n,time:Date.now()})}},196131:(e,t,n)=>{n.d(t,{C7:()=>r,CH:()=>a,JD:()=>o});n(898992),n(672577);var i=()=>n(842599);function o(e,t){return!!e&&r(e.getEmail(),t)}function r(e,t){return void 0!==a(e,t)}function a(e,t){if(!e)return;const n=(0,i().zN)(e);return t.find((e=>e.url===n))}},204552:(e,t,n)=>{n.d(t,{c:()=>o,x:()=>r});var i=()=>n(645873);const o=(0,i()._h)(new(i().O2)("UniversalQnaModals",(async()=>await Promise.all([n.e(23806),n.e(37353),n.e(55373),n.e(29151),n.e(16908),n.e(48315),n.e(847),n.e(5887),n.e(17989),n.e(56985),n.e(21627),n.e(82472),n.e(96345),n.e(75659),n.e(47858),n.e(51860),n.e(221),n.e(14358)]).then(n.bind(n,457974)))),(e=>e.UniversalQnaModals)),r=(0,i()._h)(new(i().O2)("SlackConnectionOptions",(async()=>await n.e(85873).then(n.bind(n,210230)))),(e=>e.SlackConnectionOptions))},224011:(e,t,n)=>{n.d(t,{A:()=>r});var i=()=>n(705540);class o extends(()=>n(757695))().default{getInitialState(){return{isFullScreen:window.outerWidth===window.screen.width&&window.outerHeight===window.screen.height}}constructor(){super(),this.updateFromElectronState=async()=>{const e=await i().fullscreen.get();void 0!==e&&this.setState({isFullScreen:e})},i().fullscreen.addListener(this.updateFromElectronState),this.updateFromElectronState()}}const r=new o},228814:(e,t,n)=>{n.d(t,{A:()=>i});const i=n(757695).default.createValue({open:!1},{name:"TrialEndModalStore"})},240562:(e,t,n)=>{n.d(t,{p:()=>r});var i=()=>n(645873);const o=new(i().O2)("HelpButtonContent",(async()=>await n.e(42481).then(n.bind(n,667667)))),r=(0,i()._h)(o,(e=>e.HelpButtonContent))},277201:(e,t,n)=>{n.d(t,{I:()=>x,i:()=>w});var i=n(296540),o=()=>n(484714),r=()=>n(56366),a=()=>n(401497),s=()=>n(420767),l=()=>n(959013),d=()=>n(186445),c=()=>n(38337),u=()=>n(869562),g=()=>n(749687),p=()=>n(962730),m=()=>n(948914),f=()=>n(145214),h=()=>n(285790),v=()=>n(35392),y=()=>n(859428),b=n(474848);function x(e){const t=(0,o().v3)(),n=(0,o().Y0)(),i=(0,l().tz)(),a=(0,r().O$)(g().sidebarMouseEnteredStore),c=(0,r().K8)((()=>m().A.state.isShowingTabBar||!1),[]),p=(0,r().O$)(d().$o),f=i.formatMessage({defaultMessage:"Close sidebar",id:"sidebarUnexpandButton.closeSidebar.tooltip"}),h=(!n.isElectronMac||!p)&&!c&&a;return(0,b.jsx)(w,{isVisible:h,icon:s().B,caption:f,onClick:()=>{u().closeSidebarFromTopbarUnexpandButton(t)},keyboardShortcutName:"toggleSidebar",style:e.style,hoveredStyle:e.hoveredStyle})}const S={width:16,height:16,fill:"inherit"};function w(e){const t=(0,o().Y0)(),n=(0,a().IS)((t=>({keyboardShortcut:{color:t.text.contrastSecondary},button:{fill:t.mediumIconColor},enterAnimation:{opacity:e.isVisible?0:1},animation:{opacity:e.isVisible?1:0}})),[e.isVisible]),r=(0,i.useMemo)((()=>({position:"relative",marginLeft:10,...t.isMobile&&{height:"100%"},...n.button,...e.style})),[e.style,n.button,t.isMobile]);return(0,b.jsx)(y().A,{renderTooltip:()=>(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{children:e.caption}),e.keyboardShortcutName&&(0,b.jsx)(v().A,{style:n.keyboardShortcut,name:e.keyboardShortcutName})]}),originGap:6,placement:t.isElectron?p().W.Right:p().W.Bottom,render:n=>(0,b.jsx)(f().A,{tag:h().A,animate:{opacity:e.isVisible?1:0},ariaLabel:e.caption,disabled:!e.isVisible,icon:e.icon,style:r,hoveredStyle:e.hoveredStyle,iconStyle:S,mobileFeedback:t.isMobile,onClick:e.onClick,className:c().P7S,...n})})}},279900:(e,t,n)=>{function i(e){let t,n,i;return async function(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t?(i=r,n||(n=t.then((()=>(n=void 0,t=e(...i),t))),n)):(t=e(...r),t)}}n.d(t,{A:()=>i})},305961:(e,t,n)=>{n.d(t,{d:()=>o});n(296540);var i=n(474848);const o=(0,n(340498).wt)("eyePadded",{viewBox:"0 0 24 24",svg:(0,i.jsx)("path",{d:"M12 17.9912C17.6055 17.9912 21.3857 13.4727 21.3857 12.0713C21.3857 10.6699 17.5986 6.1582 12 6.1582C6.47656 6.1582 2.60742 10.6699 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.2715 7.63184 7.4707 12 7.4707C16.3613 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 13.0283 16.3613 16.6787 12 16.6787ZM12 15.7559C14.0508 15.7559 15.6914 14.0811 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C9.94238 8.39355 8.29492 10.0137 8.30176 12.0713C8.31543 14.0811 9.94238 15.7559 12 15.7559ZM12 13.2607C11.3369 13.2607 10.7969 12.7275 10.7969 12.0713C10.7969 11.415 11.3369 10.8818 12 10.8818C12.6631 10.8818 13.1963 11.415 13.1963 12.0713C13.1963 12.7275 12.6631 13.2607 12 13.2607Z"})})},308227:(e,t,n)=>{n.d(t,{A:()=>r});var i=()=>n(56366),o=()=>n(508496);function r(e){const{featureGateId:t,whenEnabled:n,whenDisabled:r,disableExposureLogging:a}=e,s=function(e){const{featureGateId:t,disableExposureLogging:n}=e;return(0,i().K8)((()=>o().default.checkGate({gateName:t,disableExposureLogging:n})),[t,n])}({featureGateId:t,disableExposureLogging:a});return s?n:r}},323914:(e,t,n)=>{n.d(t,{c:()=>r,y:()=>o});var i=()=>n(463830);const o=new(i().A),r=new(i().A)},324561:(e,t,n)=>{n.d(t,{Gi:()=>p,Q7:()=>g,UU:()=>m,_3:()=>u,a9:()=>c,f_:()=>d});var i=()=>n(484714),o=()=>n(56366),r=()=>n(857639),a=()=>n(762433),s=()=>n(596513),l=()=>n(714300);function d(e){let{spaceId:t}=e;const n=(0,i().v3)();return(0,o().K8)((()=>{if(t)return s().t.getData(n,{spaceId:t})}),[n,t])}function c(e){if("admin"===(null==e?void 0:e.type))return e}function u(e){let{spaceId:t}=e;return c((0,l().l)({spaceId:t}))}function g(e,t,n){if(!t)return 0;const i=(0,a().yB)({spaceId:e,logFunction:r().log.bind(r()),billingData:t});return i?Math.max(i,n):0}function p(e){var t;const n=null===(t=(0,a().KH)(e,"plan"))||void 0===t?void 0:t.price;if(!n)return;const i=n.unitAmount,o="year"===n.billingInterval?12:1;return{amount:i.amount/o,currencyCode:i.currencyCode}}function m(e){return"app_store"===(null==e?void 0:e.provider)||"play_store"===(null==e?void 0:e.provider)||"mixed"===(null==e?void 0:e.provider)}},332390:(e,t,n)=>{n.d(t,{C7:()=>T,Yf:()=>D,k8:()=>_,lN:()=>P,oG:()=>L});var i=n(296540),o=()=>n(484714),r=()=>n(56366),a=()=>n(700500),s=()=>n(130382),l=()=>n(959013),d=()=>n(534177),c=()=>n(191197),u=()=>n(953006),g=()=>n(68465),p=()=>n(231722),m=()=>n(792002),f=()=>n(465425),h=()=>n(51367),v=()=>n(301421),y=()=>n(351360),b=()=>n(411671),x=()=>n(630116),S=()=>n(24157),w=()=>n(576590),C=()=>n(656633),k=()=>n(972911),j=n(474848);const I=1,A=1,M=(0,l().YK)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Ask AI when searching"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"AI can find pages and synthesize a quick, concise answer for you. Try it now."},showAssistantOriginElementLocationHeader:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.header",defaultMessage:"Start by asking a question"},showAssistantOriginElementLocationContent:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.content",defaultMessage:"Notion AI will find pages and compose a concise answer for you. Try it now."}});function T(){const e=(0,o().v3)(),t=function(){const e=(0,o().v3)(),t=(0,r().K8)((()=>{var e;return null===(e=y().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),n=(0,r().K8)((()=>{const t=y().default.state.mainEditorCurrentBlockStore;return t&&b().A.getMode(e,t)}),[e]);return(0,r().K8)((()=>{if(e.device.isMobile)return;const{currentUserSettingsStore:i,inAppCalloutStore:o}=y().default.state;if(!o.getCalloutVisibility("ai_onboarding_tooltip").canShow)return;const r=null==i?void 0:i.getSettings();if(!r)return;if((0,d().O9)(r.last_used_ai_writer_at))return;if("tooltip"!==r.ai_assistant_onboarding_phase)return;if((0,C().vp)(e,t)){if(!(0,d().O9)(r.ai_sales_assisted_extra_notification_seen_at)||(0,s().Mn)(r.ai_sales_assisted_extra_notification_seen_at)<A)return}else if((0,d().O9)(r.ai_assistant_onboarding_phase_last_set_at)&&(0,s().Mn)(r.ai_assistant_onboarding_phase_last_set_at)<I)return;if("space_for_ai"!==(0,k().V7)())return;if(!(0,g().ZE)(n))return;const l=S().default.state;if("editing"===l.mode){const e=(0,p().H7)(l.multiSelection);if(e&&(0,m().gE)(e.selection)){const t=e.store,n=v().n.findEditableWithStore(t);if(n){const e="block"===t.pointer.table?x().Bv.createChildStore(t,t.pointer):void 0,i=e&&e.getType(),o=Boolean(i&&(0,a().ZW)(i)),r=t.getValue();if(o&&!r)return n}}}}),[e,n,t])}(),[n,c]=(0,i.useState)(!1),f=(0,i.useCallback)((()=>{c(!0)}),[]),h=!n&&Boolean(t);return(0,i.useEffect)((()=>()=>{h&&(0,k().ZI)(e)}),[e,h]),h&&t?(0,j.jsx)(u().k,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,j.jsx)(l().sA,{...M.spaceForAiHeader}),content:(0,j.jsx)(l().sA,{...M.spaceForAiContent}),onCloseClick:f}):null}function _(e){const{originRef:t,openState:n}=e,a=(0,o().v3)(),s=(0,r().K8)((()=>(0,k().V7)()),[]),[d,c]=(0,i.useState)(!1),g=(0,i.useCallback)((()=>{c(!0)}),[]),p="ask_ai_anything"===s&&"initialPrompt"===n.stage&&!d;return(0,i.useEffect)((()=>()=>{!a.device.isMobile&&p&&(0,k().ZI)(a)}),[a,p]),a.device.isMobile||!p?null:(0,j.jsx)(u().k,{origin:t,placementToOrigin:"top",header:(0,j.jsx)(l().sA,{...M.askAiAnythingHeader}),content:(0,j.jsx)(l().sA,{...M.askAiAnythingContent}),onCloseClick:g})}function P(e){const{originRef:t,openState:n,isInputEmpty:a}=e,s=(0,o().v3)(),d=(0,r().K8)((()=>(0,k().V7)()),[]),[c,g]=(0,i.useState)(!1),p=(0,i.useCallback)((()=>{g(!0)}),[]),m="refine_ai_response"===d&&"results"===n.stage&&!n.loading&&"cursor"===n.context.type&&a&&!c;return(0,i.useEffect)((()=>()=>{!s.device.isMobile&&m&&(0,k().ZI)(s)}),[s,m]),s.device.isMobile?null:(0,j.jsx)(u().k,{origin:m?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,j.jsx)(l().sA,{...M.refineAiResponseHeader}),content:(0,j.jsx)(l().sA,{...M.refineAiResponseContent}),onCloseClick:p})}function D(e){const{origin:t}=e,n=(0,o().v3)();(0,i.useEffect)((()=>{c().i(n,{from:"qna_button"}),h().DL(n,{callout_key:"ai_assistant_origin_element_tooltip",placement_key:"Tooltip"})}),[n]);const r=(0,i.useCallback)((()=>{const{currentUserSettingsStore:e}=y().default.state;e&&(c().z(n,{from:"qna_button"}),h().Sq(n,{callout_key:"ai_assistant_origin_element_tooltip",dismiss_type:"tooltip_dismiss",placement_key:"Tooltip"}),(0,w().setQnaOnboardingPhase)(n,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}),f().a(n,"ai_assistant_origin_element_tooltip"))}),[n]);return(0,j.jsx)(u().k,{style:{width:250},pointerLength:25,pointerPosition:"94%",origin:t,placementToOrigin:"top",header:(0,j.jsx)(l().sA,{...M.showAssistantOriginElementLocationHeader}),content:(0,j.jsx)(l().sA,{...M.showAssistantOriginElementLocationContent}),onCloseClick:r})}function L(e){const{origin:t}=e,n=(0,o().v3)();(0,i.useEffect)((()=>{c().i(n,{from:"qna_search"})}),[n]);const r=(0,i.useCallback)((()=>{const{currentUserSettingsStore:e}=y().default.state;e&&(c().z(n,{from:"qna_search"}),(0,w().setQnaOnboardingPhase)(n,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[n]);return(0,j.jsx)(u().k,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,j.jsx)(l().sA,{...M.showAssistantLocationHeader}),content:(0,j.jsx)(l().sA,{...M.showAssistantLocationContent}),onCloseClick:r})}(0,n(466103).exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=y().default.state;t&&n(317909).createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,canUndo:!0,perform:e=>{n(755199).mJ({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},354936:(e,t,n)=>{n.d(t,{Y:()=>S});n(581454),n(296540);var i=()=>n(484714),o=()=>n(56366),r=()=>n(401497),a=()=>n(980585),s=()=>n(284371),l=()=>n(704152),d=()=>n(493823),c=()=>n(760217),u=()=>n(406699),g=()=>n(928600),p=()=>n(939740),m=()=>n(89924),f=()=>n(859428),h=()=>n(722872),v=()=>n(553965),y=()=>n(962730),b=()=>n(88291),x=n(474848);function S(e){const t=e.model,n=(0,i().v3)(),S=(0,r().IS)((e=>({badge:{fontSize:12,fontWeight:500,padding:"1px 6px",backgroundColor:e.cardHoveredBackground,color:e.lightTextColor,borderRadius:4,...s().RC},checkIcon:{width:14}})),[]),C=(0,o().K8)((()=>b().$.getData(n,{})||[]),[n]),k=e.model?w[e.model]||e.model:"Default model";return(0,x.jsx)(u().Ay,{popupType:u().z7.Popup,placementToOrigin:u().sx.Bottom,alignmentToOrigin:u().yP.Start,renderOrigin:t=>(0,x.jsx)(f().A,{renderTooltip:()=>(0,x.jsx)("div",{children:"Select a model"}),placement:y().W.Bottom,alignment:y().C.Center,render:n=>"button"===e.format?(0,x.jsx)(d().p,{...(0,v().A)(t,n),children:k}):(0,x.jsx)(l().A,{...(0,v().A)(t,n),ignoreLocalHoverState:!0,children:(0,x.jsx)("div",{style:S.badge,children:k})})}),render:n=>(0,x.jsx)(g().A,{menuType:h().gu.Popup,children:(0,x.jsx)(p().Ay,{type:p().Oh.Vertical,initialFocus:0,sections:[{key:"models",render:e=>(0,x.jsx)(m().A,{...e,title:"Models",shouldShowBottomDivider:!0}),items:C.map((i=>({key:i,action:()=>{e.setModel(i),n.close()},render:e=>(0,x.jsx)(c().A,{...e,title:w[i]||i,right:i===t?(0,a().n)(S.checkIcon):void 0})})))}]})})})}const w={default:"Default model","openai-gpt-4o":"OpenAI GPT-4o","openai-chatgpt-4o-latest":"OpenAI ChatGPT-4o-latest","openai-gpt-4o-mini":"OpenAI GPT-4o-mini","openai-o1":"OpenAI o1","openai-o1-mini":"OpenAI o1-mini","openai-o3-mini":"OpenAI o3-mini","anthropic-haiku":"Anthropic Haiku","anthropic-sonnet-3.5":"Anthropic Sonnet 3.5","anthropic-sonnet-3.7":"Anthropic Sonnet 3.7","anthropic-opus":"Anthropic Opus","vertex-gemini-1.5-pro":"Vertex Gemini 1.5 Pro","vertex-gemini-1.5-flash":"Vertex Gemini 1.5 Flash","vertex-gemini-2.0-flash":"Vertex Gemini 2.0 Flash","groq-gemma2-9b-it":"Groq Gemma2 9b It","groq-gemma-7b-it":"Groq Gemma 7b It","groq-llama-70b":"Groq Llama 70b","groq-llama-8b":"Groq Llama 8b","groq-mixtral":"Groq Mixtral","fireworks-llama3.1-405b":"Llama 3.1 405b","fireworks-llama3.1-70b":"Llama 3.1 70b","fireworks-llama3.3-70b":"Llama 3.3 70b","fireworks-llama3.3-70b-dedicated":"Llama 3.3 70b Dedicated","fireworks-llama3.1-8b":"Llama 3.1 8b","fireworks-llama3-70b":"Llama 3.70b","fireworks-mixtral-22b":"Mixtral 22b","fireworks-mixtral-7b":"Mixtral 7b","fireworks-ft-router-101":"FT Router 101","fireworks-ft-router-102":"FT Router 102","fireworks-deepseek-v3":"DeepSeek V3","fireworks-deepseek-r1":"DeepSeek R1","cerebras-llama3.1-8b":"Cerebras Llama 3.1 8b","cerebras-llama3.3-70b":"Cerebras Llama 3.3 70b","cerebras-deepseek-r1-distill-llama-70b":"Cerebras DeepSeek R1 Distill Llama 70b","bedrock-nova-pro":"Bedrock Nova Pro","bedrock-nova-lite":"Bedrock Nova Lite","bedrock-nova-micro":"Bedrock Nova Micro"}},364499:(e,t,n)=>{n.d(t,{o:()=>d});var i=()=>n(484714),o=()=>n(56366),r=()=>n(519831),a=()=>n(792415),s=()=>n(508496);const l=new(n(848776).U)((e=>{if("block-space"===e.type)return`${e.type}-${e.blockId}-${e.spaceId}`;(0,n(534177).HB)(e.type)}),(async(e,t)=>{const i=await Promise.resolve().then(n.bind(n,449506)),o={[n(436604).B3]:t.spaceId},r=await i.callApi({eventName:"getPublicPageData",environment:e,data:t,headers:o});return"success"===r.type?r.data:void 0}));function d(e){const{store:t}=e,n=(0,i().v3)();return(0,o().K8)((()=>{if(!s().default.checkGate({gateName:"ui_guest_disable_changes"}))return;if(t.table===r().Vl)return{type:"cannot_add"};const e=t.id,i=t.getSpaceId(),o=a().A.state.publicPageData;var d;if((null==o?void 0:o.pageId)===e)return(null==o||null===(d=o.securitySettings)||void 0===d?void 0:d.guestSetting)??{type:"can_add"};{var c;const t=l.getData(n,{type:"block-space",blockId:e,spaceId:i});return(null==t||null===(c=t.securitySettings)||void 0===c?void 0:c.guestSetting)??{type:"can_add"}}}),[t,n])}},366858:(e,t,n)=>{n.d(t,{A:()=>a});n(581454);var i=()=>n(484714),o=()=>n(56366),r=()=>n(592674);function a(e){const t=(0,i().v3)();return(0,o().K8)((()=>{var n;const i=null==e?void 0:e.id;if(i)return null===(n=r().A.getData(t,{spaceId:i}))||void 0===n?void 0:n.map((e=>e.domain))}),[t,e])}},370360:(e,t,n)=>{n.d(t,{u:()=>o});n(296540);var i=n(474848);const o=(0,n(340498).wt)("showDeletedPages",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M1.89551 8.5498C1.89551 11.9404 4.61621 14.668 8 14.668C11.3838 14.668 14.1045 11.9404 14.1045 8.5498C14.1045 5.16602 11.4043 2.45898 8.02051 2.45898C7.66504 2.45898 7.31641 2.49316 7.01562 2.55469L8.66992 0.920898C8.78613 0.797852 8.85449 0.640625 8.85449 0.462891C8.85449 0.09375 8.56738 -0.207031 8.20508 -0.207031C8.01367 -0.207031 7.84961 -0.138672 7.7334 -0.00878906L4.93066 2.8418C4.79395 2.97852 4.71875 3.15625 4.71875 3.33398C4.71875 3.51855 4.78711 3.68262 4.93066 3.82617L7.7334 6.65625C7.84961 6.7793 8.00684 6.84082 8.20508 6.84082C8.56738 6.84082 8.85449 6.55371 8.85449 6.17773C8.85449 6 8.78613 5.85645 8.66309 5.72656L6.80371 3.88086C7.15234 3.80566 7.56934 3.77148 8.02051 3.77148C10.666 3.77148 12.7646 5.88379 12.7646 8.5498C12.7646 11.2021 10.6455 13.3281 8 13.3281C5.35449 13.3281 3.23535 11.2021 3.23535 8.5498C3.23535 8.14648 2.97559 7.85938 2.5791 7.85938C2.17578 7.85938 1.89551 8.14648 1.89551 8.5498Z"})})},381374:(e,t,n)=>{n.d(t,{p:()=>r});n(296540);var i=()=>n(959013),o=n(474848);function r(e){let{invalidInvites:t,showEmptyError:n,styles:r}=e;if(n)return(0,o.jsx)("div",{style:r,children:(0,o.jsx)(i().sA,{id:"inviteTargetsInput.invalidWarning.noEmails",defaultMessage:"Please enter an email address"})});if(0===t.length)return null;const a=t[0].value.text;return 1===t.length?(0,o.jsx)("div",{style:r,children:(0,o.jsx)(i().sA,{id:"inviteTargetsInput.invalidWarning.singleEmail",defaultMessage:"“{text}” is not a valid email",values:{text:a}})}):(0,o.jsx)("div",{style:r,children:(0,o.jsx)(i().sA,{id:"inviteTargetsInput.invalidWarning.multipleEmails",defaultMessage:"{additionalInvalid, plural, one {“{text}” and {additionalInvalid} other are not valid emails} other {“{text}” and {additionalInvalid} others are not valid emails}}",values:{text:a,additionalInvalid:t.length-1}})})}},383245:(e,t,n)=>{n.d(t,{A:()=>u,m:()=>g});n(16280),n(296540);var i=()=>n(56366),o=()=>n(401497),r=()=>n(284371),a=()=>n(94522),s=()=>n(776690),l=()=>n(363186),d=()=>n(310397),c=n(474848);function u(e){const{module:t,workflowValue:n,workflowDefinitionPointer:i,isInTranscript:a,saveModule:s,store:l}=e,u=(0,o().IS)((e=>({container:{display:"flex",gap:4,flexDirection:"column"},title:{color:e.text.tertiary,fontWeight:r().Wy.medium,fontSize:14}})),[]),g=d().y[t.type],p=s;if(!g)throw new Error(`Module definition not found for module ${t.type}`);if(g.ModuleConfiguration){const{ModuleConfiguration:e}=g;return(0,c.jsx)("div",{style:u.container,children:(0,c.jsx)(e,{module:t,workflowValue:n,workflowDefinitionPointer:i,isInTranscript:a,saveModule:p,store:l})})}return null}function g(e){const{module:t,isInTranscript:n}=e,{workflowStore:o,clientStore:r,threadStore:d,saveModule:g}=(0,l().$O)(),p=(0,s().J)(),m=(0,i().K8)((()=>(0,a().Cq)({workflowStore:o,threadStore:d,clientStore:r})),[o,d,r]),f=o??d;return m&&p&&f?(0,c.jsx)(u,{workflowValue:p,module:t,workflowDefinitionPointer:m,isInTranscript:n,saveModule:g,store:f}):null}},388182:(e,t,n)=>{n.d(t,{A:()=>i});const i=n(757695).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},401996:(e,t,n)=>{n.d(t,{P:()=>d,S:()=>c});n(898992),n(354520),n(581454);var i=()=>n(842599),o=()=>n(535279),r=()=>n(351360),a=()=>n(975971),s=()=>n(542056);const l=n(496603).sg((e=>{let{environment:t,flowId:i,billingData:o,origin:r}=e;n(134696).D2(t,{invite_flow_id:i,billingData:o,invite_origin:r})}),1e3);async function d(e){var t;const{environment:n,event:d,flowId:c,inviteTargetsStore:u,inviteOrigin:g,onInputChanged:p}=e;null==p||p();const m=null===(t=r().default.state.currentSpaceStore)||void 0===t?void 0:t.id,f=m?await a().A.awaitData(n,{spaceId:m}):void 0;u.setState({...u.state,tokenQuery:d.target.value}),l({environment:n,flowId:c,billingData:null==f?void 0:f.billingData,origin:g});const h=d.target.value,{extractedEmails:v,invalidParts:y,newInputValue:b}=(0,i().l2)(h),x=[...await s().Ah(n,v),...y.map((e=>({type:"invalidUser",value:{text:e}})))].filter((e=>!o().P4({inviteTargetsStore:u,target:e}))),S=[...u.state.inviteTargets,...x];u.setState({...u.state,inviteTargets:S,tokenQuery:b})}function c(e){const{targetToRemove:t,inviteTargetsStore:n}=e;if(0===n.state.inviteTargets.length)return;const i=n.state.inviteTargets.filter((e=>e!==t));0===i.length?n.setState({...n.state,inviteTargets:[]}):n.setState({...n.state,inviteTargets:i})}},427774:(e,t,n)=>{n.r(t),n.d(t,{WorkflowInPlaceEditor:()=>Yn});var i=n(296540),o=()=>n(484714),r=()=>n(852507),a=()=>n(56366),s=()=>n(118078),l=()=>n(890754),d=()=>n(351360),c=()=>n(441307),u=()=>n(847),g=()=>n(363186),p=(n(16280),n(898992),n(354520),n(672577),n(581454),()=>n(401497)),m=()=>n(340498),f=n(474848);const h={viewBox:"0 0 20 20",svg:(0,f.jsx)("path",{d:"M11.14 4.735h2.888L10.38 8.38a.875.875 0 0 0 1.24 1.24l3.646-3.647V8.86a.875.875 0 0 0 1.75 0v-5a.875.875 0 0 0-.875-.875h-5a.875.875 0 0 0 0 1.75m-6.406 9.292 3.643-3.643a.875.875 0 0 1 1.237 1.238l-3.643 3.643H8.86a.875.875 0 1 1 0 1.75h-5a.875.875 0 0 1-.875-.875v-5a.875.875 0 1 1 1.75 0z"})},v=(0,m().wt)("arrowExpandDiagonalBottomLeftToTopRightFill",h);var y=()=>n(524658);const b={viewBox:"0 0 20 20",svg:(0,f.jsx)("path",{d:"M12.6 3.172a.625.625 0 0 0-1.201-.344l-4 14a.625.625 0 0 0 1.202.344zM5.842 5.158a.625.625 0 0 1 0 .884L1.884 10l3.958 3.958a.625.625 0 0 1-.884.884l-4.4-4.4a.625.625 0 0 1 0-.884l4.4-4.4a.625.625 0 0 1 .884 0m8.316 0a.625.625 0 0 1 .884 0l4.4 4.4a.625.625 0 0 1 0 .884l-4.4 4.4a.625.625 0 0 1-.884-.884L18.116 10l-3.958-3.958a.625.625 0 0 1 0-.884"})},x=(0,m().wt)("code",b);var S=()=>n(62616),w=()=>n(804059),C=()=>n(129852),k=()=>n(281844),j=()=>n(130818),I=()=>n(863330),A=()=>n(725649),M=()=>n(531896),T=()=>n(724639),_=()=>n(959013),P=()=>n(534177),D=()=>n(284371),L=()=>n(686526),R=()=>n(317909),B=()=>n(272600),O=()=>n(517843),W=()=>n(84817),E=()=>n(493823),K=()=>n(760217),F=()=>n(406699),U=()=>n(285790),V=()=>n(928600),N=()=>n(939740),z=()=>n(8980),H=()=>n(554509),G=()=>n(614505),J=()=>n(16006),Y=()=>n(89924),q=()=>n(946548),$=()=>n(859428),Q=()=>n(167334),X=()=>n(175116),Z=()=>n(921855),ee=()=>n(722872),te=()=>n(963589),ne=()=>n(962730),ie=()=>n(630116),oe=()=>n(691093),re=()=>n(337148),ae=()=>n(94522),se=()=>n(809120),le=()=>n(575127),de=()=>n(564037),ce=()=>n(194193),ue=()=>n(776690),ge=()=>n(383245),pe=()=>n(981928),me=()=>n(614016),fe=(n(737550),()=>n(234459)),he=()=>n(449506);function ve(e){const{store:t,workflowStore:n,hideTitle:r}=e,s=(0,o().v3)(),l=(0,p().IS)((e=>({paneHeader:{display:"flex",alignItems:"center",padding:"1px 8px 0px 8px",marginBottom:18},paneHeaderTitle:{color:e.text.primary,fontSize:17,fontStyle:"normal",fontWeight:D().Wy.medium,lineHeight:"22px",letterSpacing:"-0.442px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",height:28,display:"flex"}})),[]),d=(0,i.useCallback)((e=>{const t=e?JSON.parse(e):void 0;R().createAndCommit({userAction:"WorkflowPageBlock.WorkflowDebugPopupContent.handleSave",environment:s,canUndo:!0,perform:e=>{(0,u().overrideWorkflowData)({environment:s,workflowStore:n,workflow:t,transaction:e})}})}),[n,s]),c=(0,ue().J)(),g=(0,i.useMemo)((()=>c?JSON.stringify(c,null,2):""),[c]),m=(0,a().K8)((()=>!!c&&function(e){return ye.some((t=>t.needsMigration(e)))}(c)),[c]),h=(0,ce().i)(c),v=(0,i.useCallback)((()=>{if(!c)return;const e=function(e,t){let n=e;for(const i of ye)i.needsMigration(n)&&(n=i.migrate(n,t));return n}(c,h);R().createAndCommit({userAction:"WorkflowPageBlock.WorkflowDebugPopupContent.handleMigrate",environment:s,canUndo:!0,perform:t=>{(0,u().overrideWorkflowData)({environment:s,workflowStore:n,workflow:e,transaction:t})}})}),[n,s,c,h]),y=(0,i.useCallback)((async()=>{if(!c)return;const e=await he().callApi({eventName:"getInferenceTranscriptsForUser",environment:s,data:{threadParentPointer:n.pointer}});if("failed"===e.type)return;const i=e.data.transcripts.map((e=>ie().Ei.createChildStore(n,{id:e.id,table:fe().To,spaceId:t.getSpaceId()})));R().createAndCommit({userAction:"WorkflowPageBlock.WorkflowDebugPopupContent.handleBlockMigration",environment:s,canUndo:!0,perform:e=>{(0,u().migrateWorkflowBlockToCollectionViewBlock)({environment:s,store:t,workflowStore:n,workflow:c,transaction:e,workflowThreads:i})}})}),[n,s,t,c]),b=(0,a().K8)((()=>"workflow"===t.getType()),[t]);return(0,f.jsxs)(f.Fragment,{children:[!r&&(0,f.jsx)("div",{style:l.paneHeader,children:(0,f.jsx)("div",{style:l.paneHeaderTitle,children:"Debug"})}),m&&(0,f.jsx)(E().p,{onClick:v,children:"Migrate"}),(0,f.jsx)(pe().X,{value:g,onSave:d,language:"json"}),b&&(0,f.jsx)(E().p,{onClick:y,isRed:!0,children:"Migrate to collection view block"})]})}const ye=[{version:1,needsMigration:function(e){return(e.triggers||[]).some((e=>{var t;return"slack.thread.updated"===(null===(t=e.state)||void 0===t?void 0:t.type)}))},migrate:function(e){return{...e,triggers:(e.triggers||[]).map((e=>{var t;return"slack.thread.updated"!==(null===(t=e.state)||void 0===t?void 0:t.type)?e:{...e,state:{...e.state,type:"slack.message"}}}))}}},{version:2,needsMigration:function(e){return(e.triggers||[]).some((e=>!e.moduleKey))},migrate:function(e,t){const n={"database.page.created":"database","database.page.updated":"database","database.page.deleted":"database","slack.message":"slack","slack.reaction.added":"slack","slack.thread.created":"slack",recurrence:"recurrence","page.discussion.comment.added":"discussions","agent.message":"agent","zendesk.ticket":"zendesk","notionmail.email.received":"notionmail"},i={"slack.":"slack.slack.","zendesk.":"zendesk.zendesk."};return{...e,triggers:(e.triggers||[]).map((e=>{if(e.moduleKey)return e;if(!e.state)return e;const t=e.state.moduleKey,i=n[e.state.type];return{...e,moduleKey:t||i}})),functions:t.map((e=>{if(!e.value)return e;let t=e.value;for(const[n,o]of Object.entries(i))t=t.replaceAll(n,o);return t===e.value?e:{...e,value:t}}))}}}];var be=()=>n(982615),xe=()=>n(931121),Se=()=>n(823209),we=()=>n(212439),Ce=()=>n(105819),ke=()=>n(884107),je=()=>n(704152),Ie=()=>n(623580),Ae=()=>n(204063),Me=()=>n(227316),Te=()=>n(311002);const _e=(0,_().YK)({copyFunctionContents:{id:"workflowFunction.copyFunctionContents",defaultMessage:"Copy function contents"},save:{id:"workflowFunction.save",defaultMessage:"Save"},edit:{id:"workflowFunction.edit",defaultMessage:"Edit function"},cancel:{id:"workflowFunction.cancel",defaultMessage:"Cancel"}});function Pe(e){const{fn:t,functionStore:n}=e,r=(0,o().v3)(),{saveFunction:a}=(0,g().$O)(),[s,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)(t.value||""),u=(0,i.useCallback)((()=>{n&&(a({functionStore:n,fn:{...t,value:d??void 0}}),l(!1))}),[t,d,a,n]),m=(0,_().tz)(),h=(0,p().IS)((e=>({container:{borderRadius:10,border:`1px solid ${e.lightDividerColor}`},header:{borderBottom:`1px solid ${e.lightDividerColor}`,padding:"8px 8px 8px 10px"},icon:{width:16,height:16,fill:e.text.secondary},editor:{whiteSpace:"pre-wrap",wordWrap:"break-word",fontFamily:"monospace",color:e.regularTextColor,margin:0,fontSize:12,border:"none",borderRadius:0,padding:16,lineHeight:1.5,boxShadow:"none"},highlightedCode:{background:e.codeBlockBackground,padding:16}})),[]);return(0,f.jsxs)(W().Y1,{direction:"vertical",style:h.container,children:[(0,f.jsxs)(W().Y1,{direction:"horizontal",gap:"auto",width:"fill",style:h.header,children:[(0,f.jsxs)(W().Y1,{direction:"horizontal",gap:8,align:"center-left",children:[(0,Se().C)(h.icon),(0,f.jsx)(H().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t.key})]}),(0,f.jsx)(W().Y1,{direction:"horizontal",gap:s?6:2,align:"center-right",children:s?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(E().p,{size:"sm",onClick:()=>{c(t.value||""),l(!1)},children:(0,f.jsx)(_().sA,{..._e.cancel})}),(0,f.jsx)(Ae().A,{size:"sm",onClick:u,disabled:d===t.value,children:(0,f.jsx)(_().sA,{..._e.save})})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(U().A,{onClick:async()=>{if(t.value){const e=await ke().R.clipboardActions.load();e.copyString({environment:r,stringValue:t.value,copiedMessage:e.clipboardMessages.copiedCodeToClipboard})}},icon:we().V,ariaLabel:m.formatMessage(_e.copyFunctionContents)}),(0,f.jsx)(U().A,{onClick:()=>{c(t.value||""),l(!0)},icon:Ce().x,ariaLabel:m.formatMessage(_e.edit)})]})})]}),s?(0,f.jsx)(Ie().A,{value:d,onChange:e=>c(e.target.value),textarea:!0,style:h.editor,autosize:!0,autoFocus:!0,spellCheck:!1,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",autosizeMinHeight:80}):(0,f.jsx)(pe().O,{value:t.value||"",styles:h.highlightedCode})]})}function De(e){const{workflow:t,functionStore:n,fn:i}=e,o=(0,p().IS)((e=>({container:{position:"relative"},description:{marginBottom:12,color:e.lightTextColor}})),[]);return t?(0,f.jsxs)("div",{style:o.container,children:[i.description&&(0,f.jsx)("div",{style:o.description,children:i.description}),(0,f.jsx)(Pe,{fn:i,functionStore:n}),(0,f.jsx)(Le,{fn:i,functionStore:n,workflow:t}),(0,f.jsx)(Be,{fn:i,functionStore:n})]}):null}function Le(e){var t;const{fn:n,functionStore:i,workflow:o}=e,r=(0,p().IS)((e=>({container:{marginTop:12,paddingTop:8},titleContainer:{borderBottom:`1px solid ${e.lightDividerColor}`,paddingBottom:8,marginBottom:8},titleText:{fontSize:14,fontWeight:D().Wy.semibold},testStatus:{fontSize:13,color:e.lightTextColor}})),[]),s=(0,a().K8)((()=>o.functionPointers&&i?new Map(o.functionPointers.map((e=>Me().j.createChildStore(i,e))).filter((e=>e.isFunction())).map((e=>{const t=e.getData();return t?[t.key,t]:null})).filter((e=>null!==e))):new Map),[o.functionPointers,i]),l=(0,a().K8)((()=>{var e;return null!==(e=n.callsFunctions)&&void 0!==e&&e.length?n.callsFunctions.map((e=>{var t;const n=s.get(e);return n||(null===(t=o.functions)||void 0===t?void 0:t.find((t=>t.key===e)))})).filter((e=>void 0!==e)):[]}),[n.callsFunctions,s,o.functions]);return null!==(t=n.callsFunctions)&&void 0!==t&&t.length?(0,f.jsxs)(W().Y1,{direction:"vertical",gap:4,style:r.container,children:[(0,f.jsx)(W().Y1,{direction:"horizontal",gap:8,align:"center-left",style:r.titleContainer,children:(0,f.jsx)(H().D,{styleName:"UIHeading-17px/Medium",children:"Referenced by this function"})}),l.map((e=>(0,f.jsx)(Re,{fn:e},e.key)))]}):null}function Re(e){const{fn:t}=e,n=(0,p().IS)((e=>({button:{color:e.text.secondary,fontSize:14},icon:{width:16,height:16,fill:e.text.secondary}})),[]),r=(0,o().v3)(),a=(0,i.useCallback)((()=>{(0,oe().updateWorkflowNavigationState)({environment:r,navigationState:{type:"function",key:t.key}})}),[r,t.key]);return(0,f.jsx)(W().Y1,{direction:"vertical",gap:8,children:(0,f.jsx)(E().p,{onClick:a,icon:Se().C,iconStyle:n.icon,style:n.button,children:(0,f.jsx)(H().D,{colorName:"secondary",children:t.name})})})}function Be(e){var t,n,i;const{fn:o,functionStore:r}=e,a=(0,p().IS)((e=>({container:{marginTop:12,paddingTop:8},titleContainer:{borderBottom:`1px solid ${e.lightDividerColor}`,paddingBottom:8,marginBottom:8},titleText:{fontSize:14,fontWeight:D().Wy.semibold},testStatus:{fontSize:13,color:e.lightTextColor}})),[]),s=(null===(t=o.tests)||void 0===t?void 0:t.length)||0,l=(null===(n=o.tests)||void 0===n?void 0:n.filter((e=>{var t;return null===(t=e.result)||void 0===t?void 0:t.passed})).length)||0;return(0,f.jsxs)(W().Y1,{direction:"vertical",gap:4,style:a.container,children:[(0,f.jsxs)(W().Y1,{direction:"vertical",align:"center-left",style:a.titleContainer,gap:4,children:[(0,f.jsx)(H().D,{styleName:"UIHeading-17px/Medium",children:"Simulated runs"}),(0,f.jsx)(H().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:`${l}/${s} passed`})]}),null===(i=o.tests)||void 0===i?void 0:i.map((e=>(0,f.jsx)(Oe,{test:e,functionStore:r},e.description.name)))]})}function Oe(e){var t,n,o;const{test:r,functionStore:a}=e,[s,l]=(0,i.useState)(!1),d=(0,p().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:4},titleButton:{display:"flex",alignItems:"flex-start",gap:8,padding:"4px 8px",margin:"8px 0px",borderRadius:6},textContainer:{display:"flex",flexDirection:"column",gap:4,flex:1},titleText:{fontSize:13,fontWeight:D().Wy.medium},subtitleText:{fontSize:13,color:e.lightTextColor},sideContainer:{display:"flex",alignItems:"center",gap:8},passedIcon:{marginTop:2,width:16,height:16,fill:e.accentColors.green[400]},failedIcon:{marginTop:2,width:16,height:16,fill:e.accentColors.red[400]}})),[]),{saveTest:c}=(0,g().$O)(),u=(0,i.useCallback)((e=>{if(!a)return;const t=JSON.parse(e);c({functionStore:a,test:t})}),[c,a]),m=(0,i.useCallback)((()=>l((e=>!e))),[]),h=(0,te().X)("workflows_debug_tools"),v=(0,f.jsxs)(f.Fragment,{children:[null!==(t=r.result)&&void 0!==t&&t.passed?(0,be().$)(d.passedIcon):(0,xe().J)(d.failedIcon),(0,f.jsxs)("div",{style:d.textContainer,children:[(0,f.jsx)("div",{style:d.titleText,children:r.description.name}),(0,f.jsx)("div",{style:d.subtitleText,children:r.description.description})]})]});return(0,f.jsxs)("div",{style:d.container,children:[(0,f.jsx)(je().A,{onClick:m,style:d.titleButton,disabled:!Boolean(null===(n=r.result)||void 0===n?void 0:n.effects),children:v}),s&&(0,f.jsxs)(f.Fragment,{children:[(null===(o=r.result)||void 0===o?void 0:o.effects)&&(0,f.jsx)(f.Fragment,{children:r.result.effects.map(((e,t)=>(0,f.jsx)(Te().T,{effect:e,isRunFinished:!0,logTimestamp:0,nextEventLogTimestamp:void 0},t)))}),h&&(0,f.jsx)(pe().X,{value:JSON.stringify(r,null,2),onSave:u,language:"json"})]})]})}var We=()=>n(30626),Ee=()=>n(643016),Ke=()=>n(496603),Fe=()=>n(354936),Ue=()=>n(14235),Ve=()=>n(235956),Ne=()=>n(282273),ze=()=>n(356471);function He(e){const{module:t,store:n}=e,r=(0,o().v3)(),{threadStore:s,workflowStore:l,clientStore:d}=(0,g().$O)(),c=(0,a().K8)((()=>(0,ae().Cq)({workflowStore:l,threadStore:s,clientStore:d})),[l,s,d]),{handleConnect:p,authDetailModalArgs:m}=(0,ze().UV)({module:t,workflowDefinitionPointer:c}),h=function(e){var t;const{module:n,handleConnect:o}=e,r=M().N[n.type],a=n.state,s=!(!a||!("connectionPointer"in a))&&Boolean(a.connectionPointer),{saveModule:l}=(0,g().$O)(),d=(0,i.useCallback)((()=>{l({...n,state:{}})}),[n,l]),c="oauth2"===(null===(t=r.authentication)||void 0===t?void 0:t.type),u="notionmail"===n.type;if(!c&&!u)return[];return Ke().oE([{key:"connect",action:o,render:e=>(0,f.jsx)(K().A,{...e,title:s?"Reconnect":"Connect"})},s&&{key:"disconnect",action:d,render:e=>(0,f.jsx)(K().A,{...e,title:"Disconnect",isRedOnHover:!0})}])}({module:t,handleConnect:p}),v=function(e){const{store:t,workflowStore:n,module:r}=e,s=(0,o().v3)(),l="database"===r.type?r:void 0,{threadStore:d,clientStore:c}=(0,g().$O)(),p=(0,i.useCallback)((()=>{l&&n&&R().createAndCommit({userAction:"DatabaseModuleControls.handleDisconnectDatabase",environment:s,canUndo:!0,perform:e=>{(0,u().disconnectDatabase)({workflowStore:n,module:l,transaction:e})}})}),[l,n,s]),m=(0,i.useCallback)((()=>{n&&R().createAndCommit({userAction:"DatabaseModuleControls.handleCreateDatabase",environment:s,canUndo:!0,perform:e=>(0,Ve().qm)({environment:s,store:t,workflowStore:n,transaction:e})})}),[t,n,s]),h=(0,a().K8)((()=>{if(!n)return"loading-database";const e=(0,ae().qS)({workflowStore:n,threadStore:d,clientStore:c,environment:s});return(0,Ne().rW)({databaseModule:l,workflowValue:e,getCollectionSchema:(0,Ne().DX)(t)})}),[t,l,n,d,c,s]);if(!l||!n)return[];return Ke().oE(["needs-create"===h&&{key:"create",action:m,render:e=>(0,f.jsx)(K().A,{...e,title:"Create databases"})},"loading-database"!==h&&{key:"disconnect",action:p,render:e=>(0,f.jsx)(K().A,{...e,title:"Disconnect database",isRedOnHover:!0})}])}({store:n,workflowStore:l,module:t}),y=(0,i.useCallback)((()=>{l&&R().createAndCommit({userAction:"WorkflowModule.handleRemoveModule",environment:r,canUndo:!0,perform:e=>{(0,u().removeModule)({workflowStore:l,module:t,transaction:e})}})}),[t,l,r]),b=(0,i.useMemo)((()=>{const e=[{key:"actions",render:e=>(0,f.jsx)(Y().A,{...e}),items:[...h,...v,{key:"remove",action:y,render:e=>(0,f.jsx)(K().A,{...e,title:"Remove",isRedOnHover:!0})}]}];return e}),[y,h,v]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Ye,{sections:b}),(0,f.jsx)(ze().jo,{...m})]})}function Ge(e){var t;const{module:n}=e,r=(0,p().IS)((e=>({promptNameRow:{display:"flex",alignItems:"center",gap:8},promptName:{flexShrink:0}})),[]),{saveModule:s,workflowStore:l,threadStore:d,clientStore:c}=(0,g().$O)(),u=(0,o().v3)(),m=(0,i.useCallback)((e=>{var t;s({...n,state:{...n.state,promptNamesToModel:{...(null===(t=n.state)||void 0===t?void 0:t.promptNamesToModel)||{},[e.promptName]:e.model}}})}),[s,n]),h=(0,a().K8)((()=>{const e=(0,ae().n2)({workflowStore:l,threadStore:d,clientStore:c,environment:u});return e?(0,Ee().rC)(e):[]}),[l,d,c,u]),v=(null===(t=n.state)||void 0===t?void 0:t.promptNamesToModel)||{};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(_().sA,{id:"ai.promptNames",defaultMessage:"Prompts"}),h.map((e=>(0,f.jsxs)("div",{style:r.promptNameRow,children:[(0,f.jsx)("div",{style:r.promptName,children:e}),(0,f.jsx)(Fe().Y,{model:v[e],setModel:t=>m({promptName:e,model:t}),format:"button"})]},e)))]})}function Je(e){const{module:t}=e,n=t.state,i=!(!n||!("connectionPointer"in n))&&Boolean(n.connectionPointer);return(0,f.jsx)(f.Fragment,{children:i&&(0,f.jsx)("div",{children:"Connected"})})}function Ye(e){const t=(0,_().tz)(),{sections:n}=e,i=(0,o().Y0)(),r=(0,p().IS)((e=>({iconButton:{height:24,width:24,flexShrink:0,borderRadius:4},icon:{height:16,width:16}})),[]);return(0,f.jsx)(F().Ay,{originGap:0,alignmentToOrigin:F().yP.Center,placementToOrigin:F().sx.Bottom,popupType:i.isMobile?Ue().nl.SlideUp:Ue().nl.Popup,render:()=>{const e={menuType:ee().gu.Popup,width:250};return(0,f.jsx)(V().A,{...e,children:(0,f.jsx)(N().Ay,{type:N().Oh.Vertical,sections:n,initialFocus:0})})},renderOrigin:e=>(0,f.jsx)(U().A,{...e,ariaLabel:t.formatMessage({id:"workflowModule.more",defaultMessage:"More"}),hasBackground:!0,icon:We()._,iconStyle:r.icon,style:r.iconButton})})}var qe=()=>n(212496),$e=()=>n(115512),Qe=()=>n(815883),Xe=()=>n(28755),Ze=()=>n(535511),et=()=>n(807787),tt=()=>n(759113);function nt(e){const{children:t}=e,n=(0,Ze().vV)();return(0,f.jsx)("div",{style:n.wrap,children:(0,f.jsx)("div",{style:n.list,children:t})})}function it(e){const{children:t,icon:n,subtitle:o,onClick:r}=e,a=(0,p().IS)((e=>({componentWrap:{borderRadius:10},buttonWrap:{borderRadius:10},headerWrap:{alignItems:"center"}})),[]),s=(0,et().M0)({disabled:!1,hasActionMenu:!1,isActionMenuVisible:!1,overrideStyles:a}),l=(0,i.useMemo)((()=>({...s.componentWrap,...s.border})),[s.border,s.componentWrap]),d=(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{style:s.headerWrap,children:[n&&(0,f.jsx)("div",{"aria-hidden":"true",style:s.iconContainer,children:(0,f.jsx)("div",{style:s.iconWrap,children:n(s.icon)})}),(0,f.jsx)("div",{style:s.titleWrap,children:t})]}),o&&(0,f.jsx)("div",{style:s.subtitleWrap,children:o})]});return r?(0,f.jsx)("div",{style:s.buttonWrap,children:(0,f.jsx)(je().A,{onClick:r,style:s.componentWrap,children:d})}):(0,f.jsx)("div",{style:l,children:d})}function ot(e){const{trigger:t}=e,{workflowStore:n,clientStore:i,threadStore:o,saveTrigger:r}=(0,g().$O)(),s=(0,ue().J)(),l=(0,a().K8)((()=>(0,ae().Cq)({workflowStore:n,threadStore:o,clientStore:i})),[n,o,i]),d=(0,tt().z)({workflowValue:s,trigger:t});return s&&l?(0,f.jsx)(it,{icon:(null==d?void 0:d.icon)??Xe().z,children:(0,f.jsx)(tt().m,{workflowValue:s,workflowDefinitionPointer:l,trigger:t,saveTrigger:r,isInTranscript:!1})}):null}function rt(e){const{functionKey:t}=e,n=(0,_().tz)(),r=(0,o().v3)(),a=(0,ue().J)(),s=(0,ce().i)(a),l=(0,i.useMemo)((()=>s.find((e=>e.key===t))),[s,t]),d=(0,p().IS)((e=>({title:{fontWeight:500}})),[]),c=(0,i.useCallback)((()=>{(0,oe().updateWorkflowNavigationState)({environment:r,navigationState:{type:"function",key:t}})}),[r,t]);return l?(0,f.jsx)(it,{icon:Qe().N,onClick:c,children:(0,f.jsx)("div",{style:d.title,children:l.name})}):(0,f.jsx)(it,{icon:Qe().N,subtitle:n.formatMessage({defaultMessage:"This automation is misconfigured. The function {functionKey} is not found in the workflow.",id:"aiWorkflow.function.notFound.subtitle"},{functionKey:t}),children:(0,f.jsx)("div",{style:d.title,children:(0,f.jsx)(_().sA,{defaultMessage:"Not found",id:"aiWorkflow.function.notFound.title"})})})}const at=(0,_().YK)({triggerEnabledLabel:{defaultMessage:"Active",id:"aiWorkflow.trigger.triggerEnabledLabel"},triggerPausedLabel:{defaultMessage:"Inactive",id:"aiWorkflow.trigger.triggerPausedLabel"},triggerEnabledHiddenAriaLabel:{defaultMessage:"Trigger is active.",id:"aiWorkflow.trigger.triggerEnabledHiddenAriaLabel"},triggerPausedHiddenAriaLabel:{defaultMessage:"Trigger is paused.",id:"aiWorkflow.trigger.triggerPausedHiddenAriaLabel"},triggerDisabledTooltip:{defaultMessage:"You do not have permission to resume this trigger.",id:"aiWorkflow.trigger.triggerDisabledTooltip"},triggerErrorsDisabledTooltip:{defaultMessage:"Fix any errors or remove failing steps to enable this trigger",id:"aiWorkflow.trigger.triggerErrorsDisabledTooltip"}});function st(e){const{triggerKey:t}=e,n=(0,p().IS)((e=>({section:{display:"flex",flexDirection:"column",gap:8,width:"100%",marginBottom:28},header:{alignItems:"center",display:"flex",flexDirection:"row"},title:{color:e.lightTextColor,fontSize:12,lineHeight:1.3,fontWeight:D().Wy.medium}})),[]),{workflowStore:i,clientStore:r,threadStore:s}=(0,g().$O)(),l=(0,o().v3)(),d=(0,a().K8)((()=>{var e;return null===(e=(0,ae().n2)({workflowStore:i,clientStore:r,threadStore:s,environment:l}))||void 0===e||null===(e=e.triggers)||void 0===e?void 0:e.find((e=>e.key===t))}),[i,t,s,r,l]);return d?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(lt,{trigger:d,cantSaveDueToError:!1,disabled:!1}),(0,f.jsxs)("section",{style:n.section,children:[(0,f.jsx)("header",{style:n.header,children:(0,f.jsx)("div",{style:n.title,children:(0,f.jsx)(_().sA,{defaultMessage:"When",id:"aiWorkflow.trigger.when"})})}),(0,f.jsx)(nt,{children:(0,f.jsx)(ot,{trigger:d})})]}),(0,f.jsxs)("section",{style:n.section,children:[(0,f.jsx)("header",{style:n.header,children:(0,f.jsx)("div",{style:n.title,children:(0,f.jsx)(_().sA,{defaultMessage:"Do",id:"aiWorkflow.trigger.do"})})}),(0,f.jsx)(nt,{children:(0,f.jsx)(rt,{functionKey:d.key})})]})]}):null}function lt(e){const{trigger:t,cantSaveDueToError:n,disabled:r}=e,a=!1!==t.enabled,s=`toggle-${t.key}`,l=(0,o().Y0)().isMobile,{saveTrigger:d}=(0,g().$O)(),c=(0,i.useCallback)((()=>{d({...t,enabled:!a})}),[d,t,a]),u=(0,p().IS)((e=>({labelWrap:{color:r?e.text.tertiary:e.text.secondary,flex:"1 1 auto",fontSize:l?D().J.UIRegular.mobile:D().J.UIRegular.desktop},sectionWrap:{alignItems:"start",display:"flex",flexDirection:"row",gap:6,marginBlockEnd:0,...l?{paddingBottom:0,paddingTop:0}:{paddingBottom:12,borderBottom:`1px solid ${e.stroke.secondary}`,marginBottom:16}},toggleWrap:{flex:"0 0 auto",paddingBlockStart:l?5:2}})),[r,l]),m=at.triggerEnabledLabel,h=a?at.triggerEnabledHiddenAriaLabel:at.triggerPausedHiddenAriaLabel;return(0,f.jsxs)("section",{style:u.sectionWrap,children:[(0,f.jsx)("div",{style:u.toggleWrap,children:(0,f.jsx)($().A,{disableTooltip:!r||!a,renderTooltip:()=>n?(0,f.jsx)(_().sA,{...at.triggerErrorsDisabledTooltip}):(0,f.jsx)(_().sA,{...at.triggerDisabledTooltip}),render:e=>(0,f.jsx)("div",{...e,children:(0,f.jsx)(q().A,{disabled:r,inputId:s,on:a,onClick:c})})})}),(0,f.jsx)("div",{style:u.labelWrap,children:(0,f.jsxs)("label",{htmlFor:s,children:[(0,f.jsx)("span",{"aria-hidden":!0,children:(0,f.jsx)(_().sA,{...m})}),(0,f.jsx)("span",{style:$e().Qg,children:(0,f.jsx)(_().sA,{...h})})]})})]})}var dt=()=>n(743176),ct=()=>n(187174),ut=()=>n(589407),gt=()=>n(433847),pt=()=>n(68263),mt=()=>n(519831),ft=()=>n(36629),ht=()=>n(579627),vt=()=>n(542056),yt=()=>n(620689),bt=()=>n(914436),xt=()=>n(221844),St=()=>n(792071),wt=()=>n(869558),Ct=()=>n(743246),kt=()=>n(985554),jt=()=>n(498212);const It={route:{type:"configure"},chatThreadId:void 0};function At(e){const{RouterStore:t}=e;if("page"!==t.state.route.name)return;const{workflowViewType:n,workflowViewKey:i,chatThreadId:o}=t.state.route;return function(e){const{workflowViewType:t,workflowViewKey:n}=e,i=(0,jt().ZA)(e.chatThreadId);switch(t){case"configure":case"debug":case"preview":case"runtime_actor":return{route:{type:t},chatThreadId:i};case"function":case"module":case"trigger":case"view_settings":case"view":return n?{route:{type:t,key:n},chatThreadId:i}:It;case"chat":return{route:{type:"chat",transcriptId:i},chatThreadId:i};case"runs":return{route:{type:"runs",runId:(0,jt().ZA)(n)},chatThreadId:i};case"test":if(!n)return It;const[e,o]=n.split(",");return e&&o?{route:{type:"test",name:o,functionKey:e},chatThreadId:i}:It;default:return}}({workflowViewType:n,workflowViewKey:i,chatThreadId:o})}var Mt=()=>n(269643);function Tt(e){const{environment:t,collectionStore:n,collectionViewBlockStore:i}=e,o=t.currentUser.id;if(!o)return;const{propertyFilters:r,combinatorFilter:a}=function(e){var t,n,i,o;let{environment:r,collectionStore:a,collectionViewBlockStore:s}=e;const l=null==s||null===(t=s.getFormat())||void 0===t?void 0:t.workflow_id;if(!l)return;const d=ie().NU.createChildStore(s,{table:Ct().C0,id:l,spaceId:null==s?void 0:s.getSpaceId()}),c=null===(n=At(r))||void 0===n?void 0:n.chatThreadId,u=c?ie().Ei.createChildStore(a,{table:fe().To,id:c,spaceId:a.getSpaceId()}):void 0,g=(0,ae().n2)({clientStore:kt().K,workflowStore:d,threadStore:u,environment:r});if(!g)return;const p=null===(i=g.modules)||void 0===i?void 0:i.filter((e=>"database"===e.type)).find((e=>{var t;const n=null===(t=(0,A().DK)(e.state))||void 0===t?void 0:t.pointer;return(null==n?void 0:n.table)===mt().Vl&&(null==n?void 0:n.id)===a.id})),m=null===(o=(0,A().DK)(null==p?void 0:p.state))||void 0===o?void 0:o.filter;if(!m)return;return{propertyFilters:m.propertyFilters,combinatorFilter:m.combinatorFilter}}({environment:t,collectionStore:n,collectionViewBlockStore:i})??{},s=function(e){var t,n;const{collectionStore:i,userId:o,spaceId:r,idCreator:a,propertyFilters:s,combinatorFilter:l}=e,d=i.getSchema(),c=Object.keys(d),u=null===(t=i.getModel())||void 0===t?void 0:t.parent_id;if(!u)return;const g=(0,Ke().Ul)(c,((e,t)=>"title"===e?-1:t)).map((e=>({property:e,visible:!0})));return{id:(0,Mt().D)(a,r,i.id),version:1,parent_id:u,parent_table:"block",alive:!0,space_id:r,created_by_id:o,created_by_table:"notion_user",last_edited_by_id:o,last_edited_by_table:"notion_user",type:"table",name:(0,Z().r4)(null===(n=i.getModel())||void 0===n?void 0:n.getName(),i),format:{table_properties:g,table_wrap:!0,table_frozen_column_index:0,collection_pointer:{table:mt().Vl,id:i.id,spaceId:r},collection_view_source:{type:"collection",id:i.id,spaceId:r},hide_linked_collection_name:!0,property_filters:s},query2:{sort:[],aggregations:[],filter:l},page_sort:[]}}({collectionStore:n,userId:t.currentUser.id,spaceId:n.getSpaceId(),idCreator:t.idCreator,propertyFilters:r,combinatorFilter:a});if(!s)return;const l={table:wt().Gy,id:s.id,spaceId:n.getSpaceId()},d=new(xt().A)({name:"temporaryCache",isTemporaryData:!0});d.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),d.setModelAndRole({pointer:l,userId:o},St().Bj6.fromCollectionView(s),"editor");return new(ie().pS)(t,{table:wt().Gy,id:l.id},{inMemoryRecordCache:d})}var _t=()=>n(872735),Pt=()=>n(745266),Dt=()=>n(938090),Lt=()=>n(64e3),Rt=()=>n(957986),Bt=()=>n(2143),Ot=()=>n(912913),Wt=()=>n(535279),Et=()=>n(108944),Kt=()=>n(58293),Ft=()=>n(646736),Ut=()=>n(913348),Vt=()=>n(984804),Nt=()=>n(540459),zt=()=>n(617014),Ht=()=>n(219249),Gt=()=>n(814429),Jt=()=>n(717162),Yt=()=>n(928074),qt=()=>n(43013),$t=()=>n(98866),Qt=()=>n(72388),Xt=()=>n(756279),Zt=()=>n(377586),en=()=>n(529183),tn=()=>n(970585),nn=()=>n(616092),on=()=>n(749240);const rn={location:"database_settings"};function an(e){var t;const{collectionStore:n,inviteTargetsStore:r,calculatedPermissions:s}=e,l=(0,o().v3)(),d=(0,_().tz)(),[c,u]=(0,i.useState)(!0),g=(0,a().K8)((()=>e.inviteTargetsStore.state.tokenQuery),[e.inviteTargetsStore]),p=(0,a().uB)(void 0,tn().A),[m]=(0,ct().Yb)((async()=>await vt().hQ({query:g,sectionLimit:{userLimit:5,botLimit:0,groupLimit:5,importContactLimit:0},membersOnly:!0,environment:l,intl:d}).finally((()=>u(!1)))),[l,d,g],{debounce:40}),h=(0,$t().x)(),v=(0,a().K8)((()=>n.getSpaceId()),[n]),y=(0,Qt().V)(v,(null===(t=m.value)||void 0===t?void 0:t.inviteUsers.map((e=>e.value.id)).filter(P().O9))??[]),b=(0,a().K8)((()=>{if("resolved"!==m.status)return[];const{value:e}=m,t=[...e.inviteUsers,...e.inviteGroups].map((e=>{const t=(0,Yt().NV)({inviteTarget:e,store:n,calculatedPermissions:s,isRedesignEnabled:!0,userToGroupMap:y}),i="group"===e.type?"group_permission":"user_permission",o=((null==t?void 0:t.mostPermissivePermissions)??[]).find((e=>e.permissionItem.type===i));return[e,(0,pt().Tt)((null==o?void 0:o.permissionItem.role)??"none")?o:void 0]})),i=t.filter((e=>{let[t,n]=e;return void 0!==n})),o=t.filter((e=>{let[t,n]=e;return void 0===n})).map((e=>{let[t]=e;return t})),a=[{key:"invited",render:e=>(0,f.jsx)(Y().A,{...e,style:{padding:0}}),items:i.map((e=>{let[t,i]=e;return{key:"newUser"===t.type?t.value.email:t.value.id,render:e=>(0,pt().oW)(i)?(0,f.jsx)(Vt().A,{store:n,userPermission:i,showInherited:!1,permissionItemArgs:rn,spaceVisibleUserMap:h,menuListItemProps:e,style:{}}):(0,pt().G0)(i)?(0,f.jsx)(Ut().A,{store:n,spaceId:v,groupPermission:i,showInherited:!1,permissionItemArgs:rn,menuListItemProps:e,style:{}}):void 0,action:()=>{}}}))},{key:"not-invited",render:e=>(0,f.jsx)(Y().A,{...e,style:{padding:0}}),items:o.map((e=>{const t=(0,Wt().P4)({target:e,inviteTargetsStore:r});return{key:"newUser"===e.type?e.value.email:e.value.id,render:i=>(0,f.jsx)(Gt().A,{...i,isRedesignEnabled:!0,isMobile:l.device.isMobile,disabled:!1,inviteTarget:e,isInvited:t,spaceVisibleUserMap:h,store:n}),action:()=>{(0,Wt().lW)({inviteTargetsStore:r,inviteTarget:e})}}}))}];return a}),[s,n,l.device.isMobile,r,m,v,h,y]);if(c||"pending"===m.status||"idle"===m.status)return null;if("rejected"===m.status)return(0,f.jsx)(Lt().A,{title:(0,f.jsx)(_().sA,{id:"WorkflowEditorDatabase.DatabaseInviteUserList.errorMessage",defaultMessage:"Something went wrong"})});const x=(0,f.jsx)(N().Ay,{type:N().Oh.Vertical,initialFocus:g.length>0?0:void 0,sections:b,store:p,disableKeyboard:!1});return(0,f.jsx)(Bt().H,{type:Xt().A.Y,children:x})}function sn(e){const{collectionStore:t,calculatedPermissions:n}=e,r=(0,o().v3)(),s=(0,_().tz)(),l=(0,p().IS)((e=>({container:{minWidth:420,padding:12},roleSelect:{height:24,borderRadius:4,color:e.accentColors.gray[500]},inviteContainer:{display:"flex",alignItems:"center",gap:8},inviteButton:{paddingBottom:4}})),[]),d=(0,Kt().r)(),c=(0,Ft().HI)(),u=(0,a().K8)((()=>(0,Et().Uo)(t)),[t]),g=(0,qt().K)(on().subscriptionDataStoreInstance),m=(0,a().uB)(void 0,en().Ay),h=(0,a().K8)((()=>(0,Wt().U1)({inviteTargetsStore:m,includeInputFieldText:!0}).map((e=>(0,Jt().qw)({currentMembersAndGuests:g,inviteTarget:e}))).filter(P().O9)),[m,g]),v=(0,nn().mF)({space:d,spaceUser:c,team:u,invitees:h,store:t}),[y,b]=(0,i.useState)("editor"),[x,S]=(0,i.useState)(!1),w=(0,a().K8)((()=>{const{tokenQuery:e,inviteTargets:t}=m.state;return 0===e.trim().length&&0===t.length?null:(0,f.jsx)(Ot().Ay,{role:y,onChange:b,table:mt().Vl,type:"user_permission",blockType:void 0,isInvite:!0,upgradeButtonName:"database_settings",buttonStyle:l.roleSelect})}),[m,y,l.roleSelect]),C=(0,i.useCallback)((()=>{const e=(0,Wt().U1)({inviteTargetsStore:m,includeInputFieldText:!0}).map((e=>{if("newUser"===e.type)throw new Error("Cannot invite new users via this menu");return"existingUser"===e.type?{type:"user_permission",user_id:e.value.id,role:y}:"group"===e.type?{type:"group_permission",role:y,group_id:e.value.id}:void(0,P().HB)(e)}));R().createAndCommit({environment:r,userAction:"WorkflowEditorDatabase.handleInviteTargets",canUndo:!1,perform:n=>{ht().Wi({environment:r,store:t,permissionItems:e,transaction:n})}})}),[t,r,m,y]),k=(0,f.jsx)(zt().I,{inviteTargetsStore:m,metadata:{inviteOrigin:"database_settings",shareMenuSessionId:void 0},addabilities:v,disabled:!1,right:w,focus:x,onFocus:()=>S(!0),onSubmit:C,placeholder:s.formatMessage({id:"WorkflowEditorDatabase.inviteTargetsInput.placeholder",defaultMessage:"Member or group, separated by commas"})}),j=(0,f.jsx)("div",{style:l.inviteButton,children:(0,f.jsx)(Nt().G,{disabled:!1,onClick:C})});return(0,f.jsxs)("div",{style:l.container,children:[(0,f.jsxs)("div",{style:l.inviteContainer,children:[k,j]}),(0,f.jsx)(an,{collectionStore:t,inviteTargetsStore:m,calculatedPermissions:n})]})}function ln(){return(0,p().IS)((e=>({section:{},sectionTitleContainer:{marginTop:8,display:"flex",alignItems:"center",gap:4,height:24},noPaddingLeft:{paddingLeft:0},sectionTitle:{fontSize:13,color:e.accentColors.gray[500]}})),[])}function dn(e){var t;const n=(0,_().tz)(),{store:r,collectionStore:s}=e,l=(0,o().v3)(),d=(0,a().K8)((()=>{const e=new(c().A)(l),t=Tt({environment:l,collectionStore:s,collectionViewBlockStore:r});return e.setContext({type:"collectionSettings",collectionStore:s,collectionViewBlockStore:r,collectionViewStore:t}),e}),[s,l,r]),u=(0,a().K8)((()=>{var e;const t=(null===(e=s.getModel())||void 0===e?void 0:e.getNormalizedSchema())??{};return Object.entries(t).filter((e=>void 0!==e[1]))}),[s]),g=(0,p().DP)(),m=ln(),h=(0,p().IS)((e=>({propertyItem:{height:36,paddingTop:8,paddingBottom:8,paddingLeft:12,display:"flex",alignItems:"center",justifyContent:"flex-start",gap:8},propertyName:{...D().RC,fontSize:14,lineHeight:"20px",fontWeight:400},expandButtonIcon:{minWidth:18,minHeight:18,width:18,height:18,color:e.icon.secondary},expandButtonText:{color:e.text.secondary}})),[]),[v,y]=(0,i.useState)(void 0),b=(0,i.useRef)(new Map),x=(0,i.useCallback)((e=>{y(e),L().Ow({collectionContextStore:d,collectionSettingsStore:d.settingsStore,initialStack:[{type:"property",property:e,formatKey:void 0}]})}),[d]),S=(0,i.useCallback)((()=>{y(void 0),L().os({collectionSettingsStore:d.settingsStore})}),[d]),[w,C]=(0,i.useState)(!1),k=(0,i.useCallback)((()=>{C(!0),L().Ow({collectionContextStore:d,collectionSettingsStore:d.settingsStore,initialStack:[{type:"propertyType",onAccept:(e,t,n,i)=>{C(!1),ft().nZ({environment:l,collectionContextStore:d,propertyType:e,isSuggestedProperty:t,propertyName:n,selectOptions:i,from:"database_settings"})}}]})}),[d,l]),[j,A]=(0,i.useState)(!1),M=j?u:u.slice(0,5),T=j||M.length===u.length?null:(0,f.jsx)(K().A,{title:(0,f.jsx)(_().sA,{id:"WorkflowEditorDatabase.DatabaseProperties.expand",defaultMessage:"{count, plural, one {# more property} other {# more properties}}",values:{count:u.length-5}}),icon:(0,ut().L)(),focused:!1,onClick:()=>A(!0),style:h.propertyItem,desktopIconStyle:h.expandButtonIcon,desktopTitleStyle:h.expandButtonText});return(0,f.jsx)(Y().A,{disableDesktopPadding:!0,desktopTitleStyle:m.noPaddingLeft,title:(0,f.jsxs)("div",{style:m.sectionTitleContainer,children:[(0,f.jsx)("span",{style:m.sectionTitle,children:(0,f.jsx)(_().sA,{id:"WorkflowEditorDatabase.DatabaseDetails.properties",defaultMessage:"Properties"})}),(0,f.jsx)(X().RI,{value:d,children:(0,f.jsx)(O().V,{collectionContextStore:d,placementToOrigin:ne().W.Bottom,alignmentToOrigin:ne().C.End,originGap:0,marginTop:0,settingsOpen:w,shouldScrollIntoView:!1,origin:(0,f.jsx)(U().A,{icon:I().plusSmallIcon,ariaLabel:n.formatMessage({id:"WorkflowEditorDatabase.DatabaseDetails.access.add",defaultMessage:"Add"}),onClick:k,style:{width:20,height:20}}),originRect:void 0,onDismiss:()=>C(!1)})})]}),children:(0,f.jsxs)("div",{style:m.section,children:[v&&(0,f.jsx)(X().RI,{value:d,children:(0,f.jsx)(O().V,{collectionContextStore:d,placementToOrigin:ne().W.Bottom,alignmentToOrigin:ne().C.End,originGap:0,marginTop:0,settingsOpen:!0,shouldScrollIntoView:!1,originRect:null===(t=b.current.get(v))||void 0===t?void 0:t.getBoundingClientRect(),origin:null,onDismiss:S})}),M.map(((e,t)=>{let[n,i]=e;return(0,f.jsx)(K().A,{ref:e=>{e&&b.current.set(n,e)},focused:!1,style:{paddingLeft:0,paddingRight:0},title:(0,f.jsxs)("div",{style:{...h.propertyItem},children:[(0,f.jsx)(dt().Ay,{type:i.type,icon:i.icon,size:18,theme:g,style:{fill:g.icon.primary}}),(0,f.jsx)("span",{style:h.propertyName,children:i.name})]}),onClick:()=>x(n)},n)})),T]})})}function cn(e){const t=(0,_().tz)(),{collectionStore:n}=e,r=(0,o().v3)(),s=(0,a().K8)((()=>(0,Yt().dR)({store:n,environment:r})),[r,n]),{mostPermissiveUserPermissions:l,mostPermissiveGroupPermissions:d,inheritedPermissions:c}=(0,a().K8)((()=>{const{inheritedPermissions:e,pagePermissions:t}=(0,Yt().kT)({store:n,pagePermissionUIModel:s.pagePermissionUIModel,currentUserId:r.currentUser.id}),{mostPermissiveUserPermissions:i,mostPermissiveGroupPermissions:o}=t;return{mostPermissiveUserPermissions:i,mostPermissiveGroupPermissions:o,inheritedPermissions:e}}),[r,n,s]),u=(0,$t().x)(),[g,m]=(0,i.useState)(!1),h=ln(),v=(0,p().IS)((e=>({permissionItem:{height:60,paddingTop:6,paddingBottom:6}})),[]);return(0,f.jsx)(Y().A,{disableDesktopPadding:!0,desktopTitleStyle:h.noPaddingLeft,title:(0,f.jsxs)("div",{style:h.sectionTitleContainer,children:[(0,f.jsx)("span",{style:h.sectionTitle,children:(0,f.jsx)(_().sA,{id:"WorkflowEditorDatabase.DatabaseDetails.access",defaultMessage:"Access"})}),(0,f.jsx)(Ue().Ay,{popupType:Zt().n.Popup,open:g,render:()=>(0,f.jsx)(sn,{...e,calculatedPermissions:s}),origin:(0,f.jsx)(U().A,{icon:I().plusSmallIcon,ariaLabel:t.formatMessage({id:"WorkflowEditorDatabase.DatabaseDetails.access.add",defaultMessage:"Add"}),onClick:()=>m(!0),style:{width:20,height:20}}),onDismiss:()=>m(!1),originGap:8,placementToOrigin:ne().W.Right,alignmentToOrigin:ne().C.End,trapFocus:!1})]}),children:(0,f.jsxs)("div",{style:h.section,children:[l.map((e=>(0,f.jsx)(Vt().A,{store:n,userPermission:e,showInherited:!1,permissionItemArgs:rn,spaceVisibleUserMap:u,style:{...v.permissionItem}},(0,gt().I$)(e.permissionItem)))),d.map((e=>(0,f.jsx)(Ut().A,{store:n,groupPermission:e,showInherited:!1,permissionItemArgs:rn,spaceId:n.getSpaceId(),style:{...v.permissionItem}},(0,gt().I$)(e.permissionItem)))),(0,f.jsx)(Ht().nU,{store:n,inheritedPagePermissions:c,permissionItemArgs:rn,style:v.permissionItem})]})})}function un(e){const{store:t,collectionStore:n}=e,i=(0,o().v3)(),r=ln(),s=(0,p().IS)((e=>({container:{marginLeft:-10},item:{paddingLeft:12,marginLeft:0},viewItem:{height:36}})),[]),l=(0,a().K8)((()=>t.getCollectionViewStores().filter((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===n.id})).map((e=>{const t=e.getFormatStore().k("collection_view_icon").getValue(),n=e.getType();return{store:e,icon:t,type:n}}))),[t,n]);return(0,f.jsxs)("div",{style:s.container,children:[(0,f.jsx)(cn,{collectionStore:n}),(0,f.jsx)(dn,{store:t,collectionStore:n}),(0,f.jsx)(Y().A,{disableDesktopPadding:!0,desktopTitleStyle:r.noPaddingLeft,title:(0,f.jsx)("div",{style:r.sectionTitleContainer,children:(0,f.jsx)("span",{style:r.sectionTitle,children:(0,f.jsx)(_().sA,{id:"WorkflowEditorDatabase.DatabaseDetails.views",defaultMessage:"Views"})})}),children:(0,f.jsx)("div",{style:r.section,children:l.map(((e,t)=>(0,f.jsx)(K().A,{focused:!1,icon:(0,f.jsx)("div",{style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(Pt().h,{color:"regular",viewIcon:e.icon,viewType:e.type,size:18})}),title:(0,f.jsx)(J().A,{store:e.store}),style:{...s.item,...s.viewItem},desktopIconStyle:{marginLeft:0},itemMarginLeft:0,onClick:()=>{(0,oe().updateWorkflowNavigationState)({environment:i,navigationState:{type:"preview"},viewId:e.store.id})}},e.store.id)))})})]})}function gn(e){const{store:t,collectionStore:n}=e,r=(0,o().v3)(),s=(0,a().K8)((()=>{if(n)return(0,Mt().D)(r.idCreator,n.getSpaceId(),n.id)}),[n,r.idCreator]),[l,d]=(0,i.useState)(void 0),c=(0,a().K8)((()=>yt().u5(r)),[r]),u=(0,a().r6)((()=>!1),[]),g=(0,p().IS)((e=>({container:{paddingTop:64,paddingLeft:60,paddingRight:60,height:"100%"},bodyContainer:{height:"100%",marginTop:-32},breadcrumb:{position:"absolute",top:0,left:12,height:44}})),[]);return s?(0,f.jsxs)("div",{style:g.container,children:[(0,f.jsx)(bt().default,{store:t,ancestorMaxWidth:1200,currentPageMaxWidth:1200,maxAncestorCount:3,showCurrentPageControls:!0,isMobile:r.device.isMobile,style:g.breadcrumb}),l&&(0,f.jsx)(_t().x,{collectionContextStore:l,showHoverActionsStore:u,iconSize:32,titleStyle:{fontSize:32,lineHeight:1.2,fontWeight:D().Wy.bold}}),(0,f.jsx)(Bt().H,{type:Xt().A.Y,style:g.bodyContainer,preventType:c,children:(0,f.jsx)(Dt().dN,{store:t,viewId:s,overridePaddingLeft:0,overridePaddingRight:0,isFullScreen:!0,disabled:!1,headerAllowedActions:["filter","sort","search","viewSettings","addItem"],headerActionsBehavior:"always_show",setCollectionContextStore:e=>{const i=Tt({environment:r,collectionStore:n,collectionViewBlockStore:t});e.setContext({type:"collectionSettings",collectionViewBlockStore:t,collectionStore:n,collectionViewStore:i}),d(e)}})})]}):null}function pn(e){const{collectionStore:t,store:n,isPreviewOpen:i,setIsPreviewOpen:o}=e,r=(0,_().tz)(),a=(0,p().DP)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Rt().A,{ariaLabel:r.formatMessage({id:"WorkflowEditorDatabase.preview.ariaLabel",defaultMessage:"Preview"}),open:i,onDismiss:()=>o(!1),innerStyle:{height:"80%",marginLeft:120,marginRight:120,maxWidth:1200},backgroundStyle:{backgroundColor:a.overlaySmokescreen},render:()=>(0,f.jsx)(gn,{collectionStore:t,store:n})}),(0,f.jsx)(un,{store:n,collectionStore:t})]})}var mn=()=>n(690694),fn=()=>n(966813);function hn(e){const{collectionContextStore:t}=e,n=(0,de().useWorkflowNavigationState)(),{workflowStore:i,store:o}=(0,g().$O)(),r=(0,p().IS)((e=>({container:{overflow:"auto",maxWidth:1200,margin:"0 auto"}})),[]),a=(0,ue().J)();return n&&o?(0,f.jsxs)(W().Y1,{direction:"vertical",height:"fill",gap:28,style:r.container,children:["configure"===n.type||"module"===n.type||"trigger"===n.type||"function"===n.type?(0,f.jsx)(In,{workflow:a,workflowStore:i,store:o,collectionContextStore:t,configNavigationState:n}):null,"runs"===n.type&&i&&a?(0,f.jsx)(qe()._,{store:o,workflowStore:i,workflow:a}):null,"debug"===n.type&&i&&a?(0,f.jsx)(Kn,{workflow:a,store:o,workflowStore:i}):null]}):null}function vn(){return(0,p().IS)((e=>({container:{border:`1px solid ${e.stroke.secondary}`,borderRadius:10},withTopDivider:{borderTop:`1px solid ${e.stroke.secondary}`}})),[])}function yn(e){var t;let{modules:n,store:o,workflowStore:r,collectionContextStore:s}=e;const l=(0,_().tz)(),d=n.filter((e=>"databases"===re().d.getModuleConfigSection(e))),c=(0,a().K8)((()=>s.settingsStore.state.open),[s]),u=(0,i.useRef)(null),p=function(e){let{collectionContextStore:t,workflowStore:n,modules:o}=e;const{addModule:r}=(0,g().$O)();return(0,i.useCallback)((()=>{if(!n)throw new Error("Cannot add database without a workflow store");L().Ow({collectionContextStore:t,collectionSettingsStore:t.settingsStore}),L().R8({collectionSettingsStore:t.settingsStore,item:{type:"createViewSource",existingCollectionStore:void 0,createdCollectionRecordPointerMap:void 0,onSelectCollection:e=>{const n=(0,se().PP)({collectionStore:e,databaseModules:o.filter((e=>"database"===e.type))});r(n),L().os({collectionSettingsStore:t.settingsStore})}}})}),[t,n,r,o])}({collectionContextStore:s,workflowStore:r,modules:n});return 0===d.length?null:(0,f.jsxs)(f.Fragment,{children:[c&&(0,f.jsx)(X().RI,{value:s,children:(0,f.jsx)(O().V,{collectionContextStore:s,placementToOrigin:ne().W.Bottom,alignmentToOrigin:ne().C.Start,originGap:0,marginTop:0,settingsOpen:!0,shouldScrollIntoView:!1,originRect:null===(t=u.current)||void 0===t?void 0:t.getBoundingClientRect(),origin:null})}),(0,f.jsx)(Cn,{label:"Databases",extraButton:(0,f.jsx)(U().A,{ariaLabel:l.formatMessage({defaultMessage:"Add database",id:"workflow.addDatabase"}),icon:I().plusSmallIcon,ref:u,onClick:p,disabled:!r}),children:d.map(((e,t)=>(0,f.jsx)(xn,{module:e,store:o,index:t,isLastItem:t===d.length-1},e.key)))})]})}function bn(e){let{modules:t,store:n}=e;const i=t.filter((e=>{return"connections"===re().d.getModuleConfigSection(e)&&("ai"!==e.type||Object.keys((null===(t=e.state)||void 0===t?void 0:t.promptNamesToModel)??{}).length>0);var t}));return 0===i.length?null:(0,f.jsx)(Cn,{label:"Connections",children:i.map(((e,t)=>(0,f.jsx)(xn,{module:e,store:n,index:t,isLastItem:t===i.length-1},e.key)))})}function xn(e){const{module:t,store:n,index:r,isLastItem:a}=e,s=(0,_().tz)(),l=(0,o().v3)(),d=(0,i.useCallback)((e=>{(0,oe().onConfigItemClick)({environment:l,navigationState:{type:"module",key:e.key}})}),[l]);return(0,f.jsx)(Pn,{labelPrimaryText:re().d.getName(t,s),icon:(0,f.jsx)(Dn,{store:n,module:t}),index:r,isLastItem:a,onClick:()=>d(t)},t.key)}function Sn(e){let{workflow:t,workflowStore:n}=e;const i=(0,ce().i)(t).filter((e=>"client_react_component"===e.type)),{triggers:r=[]}=t,{saveTrigger:a}=(0,g().$O)(),s=(0,o().v3)(),l=kn();return 0===r.length&&0===i.length?null:(0,f.jsxs)(Cn,{label:"Automations",extraButton:(0,f.jsx)(Tn,{triggers:r}),children:[r.map(((e,o)=>{const l=(0,T().VB)(e,t);return(0,f.jsx)(Pn,{index:o,isLastItem:o===r.length-1&&0===i.length,labelPrimaryText:e.name,icon:(0,f.jsx)(z().I,{icon:k().v,size:"lg",color:"yellowPrimary"}),onClick:()=>{(0,oe().onConfigItemClick)({environment:s,navigationState:{type:"trigger",key:e.key}})},right:l?(0,f.jsx)(q().A,{on:e.enabled??!0,onClick:()=>{a({...e,enabled:!e.enabled})}}):(0,f.jsx)(z().I,{icon:C().q,size:"default",color:"uiRedPrimary"}),disabled:!n},e.key)})),i.map(((e,t)=>(0,f.jsx)(Pn,{index:r.length+t,isLastItem:t===i.length-1,labelPrimaryText:e.name,icon:x(l.icon),onClick:()=>{(0,oe().onConfigItemClick)({environment:s,navigationState:{type:"function",key:e.key}})},right:(0,f.jsx)(wn,{fn:e}),disabled:!n},e.key)))]})}function wn(e){var t,n;const{fn:i}=e,o=(null===(t=i.tests)||void 0===t?void 0:t.length)??0,r=(null===(n=i.tests)||void 0===n?void 0:n.filter((e=>{var t;return null===(t=e.result)||void 0===t?void 0:t.passed})).length)??0,a=r===o,s=(0,p().IS)((e=>({container:{display:"flex",alignItems:"center",gap:4,fontWeight:D().Wy.regular,fontSize:13,color:e.text.secondary},icon:{width:12,height:12,fill:a?e.performanceToolbarIndicator.green:e.performanceToolbarIndicator.red}})),[a]);return 0===o?null:(0,f.jsx)($().A,{renderTooltip:()=>(0,f.jsx)("div",{children:`${r} of ${o} functional tests passing`}),placement:ne().W.Top,render:e=>(0,f.jsxs)("span",{style:s.container,children:[(0,y().D)(s.icon),a?"Tests passed":"Tests failed"]})})}function Cn(e){const{label:t,children:n,extraButton:i}=e,o=vn(),r=(0,p().IS)((e=>({label:{fontSize:D().J.UISmall.desktop,fontWeight:D().Wy.semibold,color:e.lightTextColor}})),[]);return(0,f.jsxs)(W().Y1,{direction:"vertical",gap:8,children:[(0,f.jsxs)(W().Y1,{direction:"horizontal",gap:4,align:"center-left",children:[(0,f.jsx)("span",{style:r.label,children:t}),i]}),(0,f.jsx)(W().Y1,{direction:"vertical",style:o.container,children:n})]})}function kn(){return(0,p().IS)((e=>({icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:22,height:22,fill:e.icon.secondary,margin:0},yellow:{fill:e.icon.yellowPrimary},failedIcon:{width:16,height:16,fill:e.accentColors.red[400]}})),[])}function jn(e){const{children:t,isFullWidth:n,style:i}=e,o=(0,p().IS)((()=>({container:{maxWidth:n?void 0:544,margin:"0 auto",width:"100%",...i}})),[n,i]);return(0,f.jsx)("div",{style:o.container,children:t})}function In(e){const{workflow:t,workflowStore:n,store:i,collectionContextStore:r,configNavigationState:a}=e,s=(0,o().v3)(),l="configure"!==a.type;return t?(0,f.jsx)(mn().o,{mainPanel:(0,f.jsx)(An,{workflow:t,store:i,workflowStore:n,collectionContextStore:r}),secondaryPanel:(0,f.jsx)(Mn,{workflow:t,workflowStore:n,store:i,configNavigationState:a}),isSecondaryPanelOpen:l,onBackButtonClick:()=>(0,oe().onConfigItemClick)({environment:s,navigationState:{type:"configure"}})}):(0,f.jsx)(Gn,{collectionContextStore:r,store:i})}function An(e){const{workflow:t,store:n,workflowStore:i,collectionContextStore:o}=e,{modules:r=[]}=t;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(_n,{workflow:t}),(0,f.jsx)(yn,{modules:r,store:n,workflowStore:i,collectionContextStore:o}),(0,f.jsx)(bn,{modules:r,store:n}),(0,f.jsx)(Sn,{workflow:t,workflowStore:i})]})}function Mn(e){let{workflow:t,workflowStore:n,store:i,configNavigationState:o}=e;if("configure"===o.type)return null;const{type:r}=o;switch(r){case"module":return(0,f.jsx)(Bn,{moduleKey:o.key,workflow:t,workflowStore:n,store:i},o.key);case"trigger":return(0,f.jsx)(En,{store:i,triggerKey:o.key,workflow:t},o.key);case"function":return(0,f.jsx)(Fn,{functionKey:o.key,workflow:t,store:i},o.key);default:(0,P().HB)(r)}}function Tn(e){const t=(0,_().tz)(),{triggers:n=[]}=e,{saveTriggers:o}=(0,g().$O)(),r=(0,i.useCallback)((e=>{const t=n.map((t=>t.enabled===e?t:{...t,enabled:e}));o(t)}),[n,o]);return(0,f.jsx)(F().Ay,{popupType:F().z7.Popup,placementToOrigin:F().sx.Bottom,alignmentToOrigin:F().yP.End,renderOrigin:e=>(0,f.jsx)(U().A,{...e,ariaLabel:t.formatMessage({id:"workflowEditorSettings.automationOptions",defaultMessage:"Automation options"}),icon:w().W}),render:e=>{const t=[{key:"enable-all",action:()=>{r(!0),e.close()},render:e=>(0,f.jsx)(K().A,{...e,title:"Enable all triggers"})},{key:"pause-all",action:()=>{r(!1),e.close()},render:e=>(0,f.jsx)(K().A,{...e,title:"Pause all triggers"})}];return(0,f.jsx)(V().A,{menuType:ee().gu.Popup,width:250,children:(0,f.jsx)(N().Ay,{type:N().Oh.Vertical,initialFocus:0,sections:[{key:"automation-actions",render:e=>(0,f.jsx)(Y().A,{...e}),items:t}]})})}})}function _n(e){const{workflow:t}=e;return(0,f.jsxs)(W().Y1,{direction:"vertical",gap:6,children:[(0,f.jsx)(H().D,{styleName:"UITitle-Medium-20px/Semibold",children:t.name}),(0,f.jsx)(H().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t.description})]})}function Pn(e){const{labelPrimaryText:t,labelSecondaryText:n,icon:i,index:o,isLastItem:r,onClick:a,right:s,disabled:l=!1}=e,d=vn(),c=(0,p().IS)((e=>({container:{display:"flex",height:60,padding:"11px 14px",alignItems:"center",width:"100%",...D().RC,...o>0&&d.withTopDivider,...0===o&&{borderTopLeftRadius:6,borderTopRightRadius:6,borderBottomLeftRadius:0,borderBottomRightRadius:0},...o>0&&!r&&{borderRadius:0},...r&&{borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:6,borderBottomRightRadius:6}},labelContainer:{paddingLeft:10,minWidth:0,flex:1,overflow:"hidden"},labelPrimaryText:{lineHeight:"20px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%"},labelSecondaryText:{lineHeight:"18px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%"}})),[o,d,r]);return(0,f.jsxs)(E().p,{shouldShrink:!1,onClick:a,style:c.container,disabled:l,children:[i,(0,f.jsxs)(W().Y1,{direction:"vertical",style:c.labelContainer,children:[(0,f.jsx)(H().D,{styleName:"UIRegular-14px/Medium",customStyles:c.labelPrimaryText,children:t}),n&&(0,f.jsx)(H().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",customStyles:c.labelSecondaryText,children:n})]}),s]})}function Dn(e){const{module:t,store:n}=e,i=kn();return"database"===t.type?(0,f.jsx)(Ln,{module:t,store:n}):(0,le().c)(t)(i.icon)}function Ln(e){let{module:t,store:n}=e;const o=kn(),r=(0,i.useMemo)((()=>(0,ae().V4)({module:t,store:n})),[t,n]),{collectionIcon:s,isExternal:l}=(0,a().K8)((()=>({collectionIcon:null==r?void 0:r.getIcon(),isExternal:(null==r?void 0:r.getParentId())!==n.id})),[r,n]);return r?s?(0,f.jsx)(Q().A,{icon:s,isEmptyPage:!1,isAlias:l,size:20,iconStyle:o.icon}):(0,le().c)(t)(o.icon):null}function Rn(e){const{icon:t,label:n,right:i,children:o}=e,r=(0,p().IS)((e=>({titleIcon:{width:20,height:20,fill:e.icon.primary}})),[]);return(0,f.jsxs)(jn,{isFullWidth:!0,style:{...e.allowOverflowX&&{overflowX:"visible"},display:"flex",flexDirection:"column",gap:4},children:[(0,f.jsxs)(W().Y1,{direction:"horizontal",align:"top-left",children:[(0,f.jsxs)(W().Y1,{direction:"horizontal",align:"center-left",gap:4,style:{flex:1},children:[t?(0,f.jsx)("span",{style:r.titleIcon,children:t(r.titleIcon)}):null,n?(0,f.jsx)(H().D,{styleName:"UITitle-Medium-20px/Semibold",children:n}):null]}),(0,f.jsx)(W().Y1,{width:"hug",direction:"horizontal",gap:8,align:"center-right",style:{flex:0},children:i})]}),o]})}function Bn(e){var t,n;const{workflow:i,workflowStore:o,store:r,moduleKey:a}=e,s=null===(t=i.modules)||void 0===t?void 0:t.find((e=>e.key===a));return s?"database"===s.type&&null!==(n=(0,A().DK)(s.state))&&void 0!==n&&null!==(n=n.pointer)&&void 0!==n&&n.id?(0,f.jsx)(Wn,{module:s,store:r}):(0,f.jsx)(On,{workflowStore:o,store:r,module:s}):null}function On(e){var t;const{workflowStore:n,store:i,module:r}=e,s=(0,_().tz)(),l=(0,p().IS)((e=>({failedIcon:{width:16,height:16,fill:e.accentColors.red[400]},errorMessageContainer:{display:"flex",flexDirection:"column",gap:8,padding:8,borderRadius:4,backgroundColor:e.accentColors.red[100]},errorMessage:{display:"flex",alignItems:"center",gap:8}})),[]),{threadStore:d,clientStore:c}=(0,g().$O)(),u=r?M().N[r.type]:void 0,m=(0,o().v3)(),h=(0,a().K8)((()=>{if(r&&!function(e){var t;const{module:n,workflowStore:i,store:o,threadStore:r,clientStore:a,environment:s}=e,l=(0,ae().n2)({workflowStore:i,threadStore:r,clientStore:a,environment:s});if(!l)return!0;const d=null===(t=l.modules)||void 0===t?void 0:t.find((e=>e.key===n.key));return!!d&&re().d.isValidAndConnected(d,l,o)}({module:r,workflowStore:n,store:i,threadStore:d,clientStore:c,environment:m}))return re().d.getMessageIfNotValid(r,s)}),[r,n,i,s,d,c,m]),v=re().d.getName(r,s),y=(0,le().c)(r);return u?(0,f.jsxs)(Rn,{store:i,label:v,icon:y,right:(0,f.jsx)(He,{module:r,store:i}),children:["oauth2"===(null===(t=u.authentication)||void 0===t?void 0:t.type)&&(0,f.jsx)(Je,{module:r}),"ai"===r.type&&n&&(0,f.jsx)(Ge,{module:r}),h&&(0,f.jsx)("div",{style:l.errorMessageContainer,children:(0,f.jsxs)("div",{style:l.errorMessage,children:[(0,C().q)(l.failedIcon),h]})}),(0,f.jsx)(ge().m,{module:r,isInTranscript:!1}),(0,f.jsx)(Vn,{children:(0,f.jsx)(Nn,{module:r})})]}):null}function Wn(e){const{module:t,store:n}=e,[o,r]=(0,i.useState)(!1),a=(0,i.useMemo)((()=>(0,ae().V4)({module:t,store:n})),[t,n]),s=(0,p().IS)((e=>({openDatabaseButton:{height:28,border:`1px solid ${e.stroke.primary}`}})),[]);return a?(0,f.jsxs)(Rn,{store:n,allowOverflowX:!0,label:(0,f.jsx)(H().D,{styleName:"UITitle-Medium-20px/Semibold",colorName:"primary",children:(0,f.jsx)(J().A,{store:a,shouldWrap:!0})}),right:(0,f.jsx)(E().p,{icon:v,style:s.openDatabaseButton,onClick:()=>{r(!0)},children:(0,f.jsx)(H().D,{styleName:"UIRegular-14px/Medium",colorName:"primary",children:(0,f.jsx)(_().sA,{id:"WorkflowEditorDatabase.DatabaseDetails.openDatabase",defaultMessage:"Open database"})})}),children:[(0,f.jsx)(pn,{collectionStore:a,store:n,isPreviewOpen:o,setIsPreviewOpen:r}),(0,f.jsx)(Vn,{children:(0,f.jsx)(Nn,{module:t})})]}):null}function En(e){const{workflow:t,triggerKey:n,store:i}=e,o=(0,a().K8)((()=>{var e;return null===(e=t.triggers)||void 0===e?void 0:e.find((e=>e.key===n))}),[t,n]);return o?(0,f.jsxs)(Rn,{label:o.name,store:i,children:[(0,f.jsx)(st,{triggerKey:n}),(0,f.jsx)(Vn,{children:(0,f.jsx)(zn,{trigger:o})})]}):null}function Kn(e){const{store:t,workflow:n,workflowStore:i}=e,r=(0,o().v3)(),s=(0,a().K8)((()=>{var e;return(null===(e=i.getData())||void 0===e?void 0:e.modules)??[]}),[i]),l=(0,ce().i)(n)??[],d=kn();return(0,f.jsxs)(Rn,{label:"Debug",store:t,children:[(0,f.jsxs)(Cn,{label:"All modules",children:[s.map(((e,n)=>(0,f.jsx)(xn,{module:e,store:t,index:n,isLastItem:n===s.length-1&&0===l.length},e.key))),l.map(((e,t)=>(0,f.jsx)(Pn,{index:s.length+t,labelPrimaryText:e.name,icon:x(d.icon),onClick:()=>{(0,oe().onConfigItemClick)({environment:r,navigationState:{type:"function",key:e.key}})},right:(0,f.jsx)(wn,{fn:e}),disabled:!i,isLastItem:t===l.length-1},e.key)))]}),(0,f.jsx)(ve,{store:t,workflowStore:i,hideTitle:!0})]})}function Fn(e){const{workflow:t,store:n,functionKey:o}=e,[r,s]=(0,i.useState)(!1),l=(0,te().X)("workflows_debug_tools"),{functionStore:d,fn:c}=(0,a().K8)((()=>{var e;if(t.functionPointers){const e=t.functionPointers.map((e=>ie().je.createChildStore(n,e))).filter((e=>e.isFunction())).find((e=>{var t;return(null===(t=e.getData())||void 0===t?void 0:t.key)===o}));return{functionStore:e,fn:null==e?void 0:e.getData()}}return{functionStore:void 0,fn:null===(e=t.functions)||void 0===e?void 0:e.find((e=>e.key===o))}}),[t,o,n]);return c?(0,f.jsxs)(Rn,{label:c.name,store:n,right:(0,f.jsxs)(W().Y1,{direction:"horizontal",gap:8,align:"center-right",children:[l&&(0,f.jsx)(me().h,{isDebugging:r,onClick:()=>s((e=>!e))}),(0,f.jsx)(fn().Z,{workflowFunction:c,functionArgs:{}})]}),children:[(0,f.jsx)(De,{workflow:t,functionStore:d,fn:c}),(0,f.jsx)(Vn,{children:(0,f.jsx)(Hn,{functionStore:d,fn:c})})]}):null}function Un(e){return JSON.stringify(e,null,2)}function Vn(e){const{children:t}=e,[n,o]=(0,i.useState)(!1),r=(0,te().X)("workflows_debug_tools"),a=(0,p().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:4,borderTop:`1px solid ${e.accentColors.gray[100]}`,marginTop:12,paddingTop:8}})),[]),s=(0,i.useCallback)((()=>o((e=>!e))),[]);return r?(0,f.jsxs)("div",{style:a.container,children:[(0,f.jsx)(E().p,{onClick:s,isGray:!0,children:n?"Hide debug JSON":"View debug JSON"}),n&&t]}):null}function Nn(e){const{module:t}=e,{saveModule:n}=(0,g().$O)(),o=(0,i.useCallback)((e=>{const t=JSON.parse(e);n(t)}),[n]);return(0,f.jsx)(pe().X,{value:Un(t),onSave:o,language:"json"})}function zn(e){const{trigger:t}=e,{saveTrigger:n}=(0,g().$O)(),o=(0,i.useCallback)((e=>{const t=JSON.parse(e);n(t)}),[n]);return(0,f.jsx)(pe().X,{value:Un(t),onSave:o,language:"json"})}function Hn(e){const{functionStore:t,fn:n}=e,{saveFunction:o}=(0,g().$O)(),r=(0,i.useCallback)((e=>{if(!t)return;const n=JSON.parse(e);o({functionStore:t,fn:n})}),[o,t]);return(0,f.jsx)(pe().X,{value:Un(n),onSave:r,language:"json"})}function Gn(e){var t;const{collectionContextStore:n,store:r}=e,s=(0,a().K8)((()=>n.settingsStore.state.open),[n]),l=(0,i.useRef)(null),d=(0,a().K8)((()=>(r.getCollectionPointers()??[]).map((e=>ie().md.createChildStore(r,e)))),[r]),c=(0,o().v3)(),u=(0,i.useCallback)((()=>{L().Ow({collectionContextStore:n,collectionSettingsStore:n.settingsStore}),L().R8({collectionSettingsStore:n.settingsStore,item:{type:"createViewSource",existingCollectionStore:void 0,createdCollectionRecordPointerMap:void 0,onSelectCollection:e=>{R().createAndCommit({userAction:"WorkflowEditor.addDatabase",environment:c,canUndo:!0,perform:t=>{(0,B().p)({collectionViewBlockStore:r,collectionPointer:e.pointer,transaction:t})}}),L().os({collectionSettingsStore:n.settingsStore})}}})}),[n,c,r]),g=(0,p().IS)((e=>({addButton:{margin:"0 -8px"}})),[]);return(0,f.jsx)(W().Y1,{direction:"vertical",padding:"16px 0",children:(0,f.jsx)(W().Y1,{direction:"vertical",gap:28,padding:"26px 40px",children:(0,f.jsx)(jn,{children:(0,f.jsx)(W().Y1,{direction:"vertical",gap:28,children:(0,f.jsx)(Cn,{label:"Databases",children:(0,f.jsxs)(f.Fragment,{children:[s&&(0,f.jsx)(X().RI,{value:e.collectionContextStore,children:(0,f.jsx)(O().V,{collectionContextStore:n,placementToOrigin:ne().W.Bottom,alignmentToOrigin:ne().C.Start,originGap:0,marginTop:0,settingsOpen:!0,shouldScrollIntoView:!1,originRect:null===(t=l.current)||void 0===t?void 0:t.getBoundingClientRect(),origin:null})}),d.map(((e,t)=>(0,f.jsx)(Jn,{collectionStore:e,store:r,index:t,isLastItem:t===d.length-1},e.id))),(0,f.jsx)(E().p,{onClick:u,ref:l,isLightGray:!0,style:g.addButton,children:"Add a database"})]})})})})})})}function Jn(e){const{collectionStore:t,store:n,index:i,isLastItem:o}=e,r=kn(),{collectionName:s,collectionIcon:l,isExternal:d}=(0,a().K8)((()=>({collectionName:(0,Z().r4)(t.getName(),n)||"Untitled",collectionIcon:t.getIcon(),isExternal:t.getParentId()!==n.id})),[t,n]);return(0,f.jsx)(Pn,{isLastItem:o,index:i,labelPrimaryText:s,icon:d?(0,j().M)(r.icon):l?(0,f.jsx)(G().A,{icon:l,isEmptyPage:!1,size:20,disabled:!0,style:r.icon}):(0,S().c)(r.icon),disabled:!0,onClick:()=>{}})}function Yn(){const e=(0,o().v3)(),t=(0,a().K8)((()=>{const e=d().default.state.mainEditorCurrentBlockStore;return null!=e&&e.isCollectionView()?e:void 0}),[]),n=(0,a().K8)((()=>{const n=new(c().A)(e);if(t)return n.setContext({type:"collectionView",collectionViewBlockStore:t,collectionViewStore:t.getCollectionViewStores()[0],collectionStore:void 0,pageVisitSourceOverride:void 0}),n}),[e,t]);(0,i.useEffect)((()=>{"rendered"!==d().default.state.renderPhase&&d().default.setState({...d().default.state,renderPhase:"rendered"})}),[]);const p=(0,l().useIsChatSidebarOpen)();(0,r().w)((()=>{p||(0,s().openChatSidebar)({environment:e})}));const m=(0,a().K8)((()=>null==t?void 0:t.getSpaceId()),[t]);return(0,u().useInitializationOfExternalStores)({environment:e,spaceId:m}),t&&n?(0,f.jsx)(g().X9,{store:t,children:(0,f.jsx)(hn,{collectionContextStore:n})}):null}},454531:(e,t,n)=>{n.d(t,{W:()=>g});var i=()=>n(867772),o=()=>n(681810),r=()=>n(901389),a=()=>n(896628),s=()=>n(383594),l=()=>n(317909),d=()=>n(892632);const c=1500,u=(0,n(959013).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image link…",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function g(e){let{environment:t,intl:n,store:i,rect:o}=e;s().W(t,{originGap:3,originRect:o,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:n.formatMessage(u.pageCover),onDelete:()=>{!function(e){let{environment:t,store:n}=e;s().I(),l().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{a().PT({store:n,transaction:e})}})}({environment:t,store:i})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:n,position:o}=e;m({environment:t,store:i,url:n,position:o})}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:n.formatMessage(u.fileTypeCaption,{idealImageWidth:c}),onUpload:e=>{s().I(),d().QM({environment:t,file:e[0],bucket:"secure",record:i.pointer,onStart:f,onProgress:h,onComplete:e=>{var n;n={environment:t,store:i,url:e},p({...n,position:.5})},onError:()=>{r().f1(n.formatMessage(u.uploadFailed))}})}},{type:"embed",title:n.formatMessage(u.embedTitle),inputPlaceholder:n.formatMessage(u.embedPlaceholder),caption:n.formatMessage(u.embedCaption),buttonText:n.formatMessage(u.embedSubmit),onChange:e=>{var n;n={environment:t,store:i,url:e},p({...n,position:.5}),s().I()}},{type:"unsplash",onChange:e=>{let{url:n,position:o}=e;m({environment:t,store:i,url:n,position:o})}}]})}async function p(e){const{environment:t,store:n,url:r,position:s}=e,{serverCommitResult:d}=l().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{a().fg({store:n,url:r,position:s||.5,transaction:e})}});await d,o().A.state.loadingMode===i().vS&&o().A.setState({loadingMode:i().Gi,dataURL:o().A.state.dataURL,uploadProgress:100})}function m(e){p(e),e.environment.device.isMobile&&s().I()}function f(e){const{file:t,name:n,size:r}=e;if(s().I(),o().A.setState({loadingMode:i().Wc,file:t,name:n,size:r}),t instanceof File&&t.type.indexOf("image")>=0){const e=new FileReader;e.onload=e=>{o().A.state.loadingMode===i().Wc&&o().A.setState({...o().A.state,uploadProgress:0,loadingMode:i().vS,dataURL:e.target.result})},e.readAsDataURL(t)}}function h(e){const{progressPercent:t}=e;o().A.state.loadingMode===i().vS&&o().A.setState({...o().A.state,uploadProgress:t})}},471095:(e,t,n)=>{n.d(t,{i:()=>o});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},o=(0,n(340498).wt)("lockFill",i)},518598:(e,t,n)=>{n.d(t,{K:()=>c});n(296540);var i=()=>n(426388),o=()=>n(959013),r=()=>n(705540),a=()=>n(285790),s=()=>n(745766),l=n(474848);const d=(0,o().YK)({menu:{defaultMessage:"Menu",id:"topbar.appMenuButton.title"}});function c(){const e=(0,o().tz)();return(0,l.jsx)(a().A,{style:{position:"absolute",top:"10px",left:"14px",width:24,height:24,zIndex:1e5,...(0,s().g)({noDrag:!0})},iconStyle:{width:16,height:16},isDarkIconColor:!0,onClick:()=>{r().openAppMenu()},icon:i().S,ariaLabel:e.formatMessage(d.menu)})}},529601:(e,t,n)=>{n.d(t,{$S:()=>s,Im:()=>l,SJ:()=>g,sf:()=>p,yQ:()=>u});n(898992),n(354520),n(581454),n(737550);var i=()=>n(496603),o=()=>n(534177),r=()=>n(842599),a=()=>n(196131);function s(e){let{space:t,domains:n,team:r,spaceUser:a,invitees:s,internalGuestFeatureAvailability:d,guestFeatureAvailability:u,publicPageDataGuestSetting:g}=e;const p=l({domains:n,internalGuestFeatureAvailability:d,guestFeatureAvailability:u,invitees:s,space:t,spaceUser:a,team:r,publicPageDataGuestSetting:g}),f=c({domains:n,internalGuestFeatureAvailability:d,guestFeatureAvailability:u,invitees:s,space:t,spaceUser:a,team:r,publicPageDataGuestSetting:g}),h=s.some((e=>{const t=f[e.email],n=p[e.email];return"can_autojoin"!==t.type&&m(n)}));return(0,i().Cr)(s.map((e=>{const{email:t,currentRole:n}=e,i=f[t],r=p[t];if("member"===n)return[t,{type:"member_page_add"}];if("guest"===n&&"can_add"===r.type)return[t,{type:"guest_page_add"}];if("can_autojoin"===i.type)return[t,{type:"member",reason:"autojoin_domain"}];if("cannot_add"===(a=p[t]).type&&"over_general_guest_limit"===a.reason)return[t,{type:"none",reason:"must_upgrade"}];if("can_add"===i.type&&h)return[t,{type:"member",reason:"over_internal_guest_limit"}];if("can_add"===r.type)return[t,{type:"guest"}];if("can_request"===r.type)return[t,{type:"guest_request"}];if("can_add"===i.type)return[t,{type:"member",reason:"guests_disabled"}];if("can_request"===i.type)return[t,{type:"member_request"}];if("cannot_add"===i.type&&"not_authorized_domain"===i.reason)return[t,{type:"none",reason:"not_authorized_domain"}];if("cannot_add"===r.type){return[t,{type:"none",reason:r.reason}]}if("cannot_add"===i.type){return[t,{type:"none",reason:i.reason}]}return(0,o().HB)(i)&&(0,o().HB)(r);var a})))}function l(e){let{space:t,domains:n,team:o,internalGuestFeatureAvailability:r,guestFeatureAvailability:s,optimism:l="pessimistic",spaceUser:c,invitees:g,publicPageDataGuestSetting:m}=e;const f=u({space:t,team:o,spaceUser:c,publicPageDataGuestSetting:m}),h=d(l,s,p(g)),v=function(e,t){return e.filter((e=>(0,a().C7)(e.email,t)&&!e.currentRole)).length}(g,n),y=d(l,r,v);return(0,i().Cr)(g.map((e=>{const t=(0,a().C7)(e.email,n),i=void 0!==e.currentRole;let o;return o=i||h?!t||i||y?"cannot_add"===f.type?{type:"cannot_add",reason:"disabled_by_admins"}:f:{type:"cannot_add",reason:"over_internal_guest_limit"}:{type:"cannot_add",reason:"over_general_guest_limit"},[e.email,o]})))}function d(e,t,n){const i=t.limit,o="unlimited"===i.total?"unlimited":i.total-i.current;return"optimistic"===e?"unlimited"===o||o>=1:"unlimited"===o||o>=n}function c(e){let{space:t,team:n,domains:a,spaceUser:s,invitees:d,internalGuestFeatureAvailability:c,guestFeatureAvailability:u,publicPageDataGuestSetting:p}=e;const f=g({space:t,domains:a,spaceUser:s}),h=l({space:t,domains:a,internalGuestFeatureAvailability:c,guestFeatureAvailability:u,team:n,spaceUser:s,invitees:d,publicPageDataGuestSetting:p}),v=!s.isMember();return(0,i().Cr)(d.map((e=>{const t=(0,r().zN)(e.email);if(!t)return[e.email,{type:"cannot_add",reason:"invalid_email"}];const n=m(h[e.email]),i=f.autojoinDomains;let a;return i.includes(t)?a={type:"can_autojoin"}:"can_add"===f.type?a={type:"can_add"}:"can_request"===f.type||n&&!v?a={type:"can_request"}:i.length>0?a={type:"cannot_add",reason:"not_authorized_domain"}:"cannot_add"===f.type?a={type:"cannot_add",reason:"disabled_by_admins"}:(0,o().HB)(f),[e.email,a]})))}function u(e){let{space:t,team:n,spaceUser:i,publicPageDataGuestSetting:r}=e;const a=i.isWorkspaceOwner(),s=(0,o().O9)(r)?r:function(e){let t,n,{space:i,team:o}=e;t=o&&o.getDisableGuests()?"cannot_add":o&&!o.getDisableGuests()?"can_add":void 0;const r=i.disable_guests,a=i.getSettings().enable_guest_invite_requests;n=a?"can_request":r?"cannot_add":"can_add";return"can_request"===n?{type:"can_request"}:void 0!==t?{type:t}:{type:n}}({space:t,team:n});return a&&"can_request"===s.type?{type:"can_add"}:s}function g(e){let{space:t,domains:n,spaceUser:i}=e;const o=!i.isMember(),r=function(e){let{space:t,domains:n}=e;const i=n.filter((e=>e.isAutojoinable)).map((e=>e.url));return t.getSettings().disable_membership_requests?{type:"cannot_add",autojoinDomains:i}:{type:"can_request",autojoinDomains:i}}({space:t,domains:n});return o?{type:"cannot_add",autojoinDomains:[]}:i.isWorkspaceOwner()?{...r,type:"can_add"}:r}function p(e){return e.filter((e=>!e.currentRole)).length}function m(e){return"cannot_add"===e.type&&"over_internal_guest_limit"===e.reason}},535279:(e,t,n)=>{n.d(t,{P4:()=>o,U1:()=>a,lW:()=>s});n(944114),n(898992),n(354520),n(737550);var i=()=>n(842599);function o(e){const{target:t,inviteTargetsStore:n}=e;return n.state.inviteTargets.some((e=>"newUser"===t.type?e.type===t.type&&t.value.email===e.value.email:"invalidUser"===t.type?e.type===t.type&&t.value.text===e.value.text:"group"===t.type?e.type===t.type&&e.value.group_id===t.value.group_id:e.type===t.type&&e.value.id===t.value.id))}function r(e){return"invalidUser"!==e.type}function a(e){const{inviteTargetsStore:t,includeInputFieldText:n}=e,a=[...t.state.inviteTargets];if(n){const e=function(e){const t=e.state.tokenQuery.trim();if(!(0,i().DT)(t))return;const n={type:"newUser",value:{email:t},source:"email"};return o({target:n,inviteTargetsStore:e})?void 0:n}(t);e&&a.push(e)}return a.filter(r)}function s(e){const{inviteTargetsStore:t,inviteTarget:n}=e;if(o({target:n,inviteTargetsStore:t})){const e=t.state.inviteTargets.filter((e=>"group"===n.type&&"group"===e.type?n.value.group_id!==e.value.group_id:"existingUser"===n.type&&"existingUser"===e.type?n.value.id!==e.value.id:"newUser"!==n.type||"newUser"!==e.type||n.value.email!==e.value.email));return t.setState({...t.state,inviteTargets:e}),!1}return t.setState({inviteTargets:[...t.state.inviteTargets,n],tokenQuery:""}),!0}},540459:(e,t,n)=>{n.d(t,{G:()=>d});n(296540);var i=()=>n(56366),o=()=>n(959013),r=()=>n(204063),a=()=>n(859428),s=()=>n(663590),l=n(474848);function d(e){const{tooltip:t,disabled:n,onClick:d}=e,c=(0,i().K8)((()=>(0,s().FI)()),[]);return(0,l.jsx)(a().A,{disableTooltip:!Boolean(t),renderTooltip:()=>t,render:e=>(0,l.jsx)(r().A,{size:"lg",style:{marginLeft:8,...c&&{borderRadius:6,paddingLeft:12,paddingRight:12}},disabled:n,onClick:d,...e,children:(0,l.jsx)(o().sA,{id:"shareMenu.inviteButton.invite",defaultMessage:"Invite"})})})}},555267:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(296540),o=()=>n(401497),r=()=>n(62856),a=()=>n(331542),s=n(474848);function l(e){let{loadingMessage:t}=e;const n=(0,o().DP)(),l=(0,r().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l&&(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(a().A,{}),t&&(0,s.jsx)("div",{style:{marginLeft:8,color:n.text.secondary},children:t})]})})}},555555:(e,t,n)=>{n.d(t,{n:()=>o});n(296540);var i=n(474848);const o=(0,n(340498).wt)("import",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},556048:(e,t,n)=>{n.d(t,{C8:()=>g,Dz:()=>l,GC:()=>m,GL:()=>f,YY:()=>p,dM:()=>c,h9:()=>d,jX:()=>s,oF:()=>u,uj:()=>a});var i=()=>n(645873);const o={JiraSyncInfoPopup:new(i().O2)("JiraSyncInfoPopup",(async()=>await Promise.all([n.e(75134),n.e(68744)]).then(n.bind(n,408453)))),ImproveJiraSyncPopup:new(i().O2)("ImproveJiraSyncPopup",(async()=>await Promise.all([n.e(75134),n.e(2686)]).then(n.bind(n,484967)))),JiraDCAuthModal:new(i().O2)("JiraDCAuthModal",(async()=>await n.e(28763).then(n.bind(n,992567)))),ExternalImportAndSyncIndicator:new(i().O2)("ExternalImportAndSyncIndicator",(async()=>await n.e(98288).then(n.bind(n,984289)))),JiraSyncedAllProjectsTooltip:new(i().O2)("JiraSyncedAllProjectsTooltip",(async()=>await Promise.all([n.e(23806),n.e(21446)]).then(n.bind(n,470020)))),JiraSyncedAllIssuesTooltip:new(i().O2)("JiraSyncedAllIssuesTooltip",(async()=>await Promise.all([n.e(23806),n.e(21446)]).then(n.bind(n,470020)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(i().O2)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await Promise.all([n.e(23806),n.e(21446)]).then(n.bind(n,470020)))),JiraSyncSourceTooltip:new(i().O2)("JiraSyncSourceTooltip",(async()=>await Promise.all([n.e(23806),n.e(21446)]).then(n.bind(n,470020)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(i().O2)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await Promise.all([n.e(23806),n.e(21446)]).then(n.bind(n,470020))))},r={JiraSyncTeamSpaceModal:new(i().O2)("JiraSyncTeamSpaceModal",(async()=>Promise.all([n.e(23806),n.e(56188)]).then(n.bind(n,604698))))},a=(0,i()._h)(r.JiraSyncTeamSpaceModal,(e=>e.default)),s=(0,i()._h)(o.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),l=(0,i()._h)(o.JiraDCAuthModal,(e=>e.default)),d=(0,i()._h)(o.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),c=(0,i()._h)(o.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),u=(0,i()._h)(o.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),g=(0,i()._h)(o.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),p=(0,i()._h)(o.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),m=(0,i()._h)(o.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),f=(0,i()._h)(o.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator));(0,n(340498).xh)("jira",{default:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:20},small:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:16},mini:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:14},large:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:24}})},567121:(e,t,n)=>{n.d(t,{EG:()=>a,K5:()=>r,RH:()=>o,Yi:()=>s,ls:()=>i});const i=32,o=202,r=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},578194:(e,t,n)=>{n.d(t,{r:()=>i});const i=(0,n(583835).Dv)("importEvernote")},599500:(e,t,n)=>{n.d(t,{g:()=>y});n(296540);var i=()=>n(484714),o=()=>n(56366),r=()=>n(401497),a=()=>n(101847),s=()=>n(959013),l=()=>n(100622),d=()=>n(704152),c=()=>n(460292),u=()=>n(554509),g=()=>n(859428),p=()=>n(437622),m=()=>n(58293),f=()=>n(962730),h=()=>n(10984),v=n(474848);function y(e){let{onClick:t,showIcon:n=!0}=e;const r=x(n),a=(0,i().v3)(),l=(0,m().r)(),c=(0,o().K8)((()=>l&&(0,p().GK)(a,l)),[a,l]),y=(0,o().K8)((()=>(0,h().AI)()),[]);return void 0===t?(0,v.jsx)("div",{style:{...r.badge,cursor:"default"},children:(0,v.jsx)(b,{showIcon:n})}):(0,v.jsx)(g().A,{placement:f().W.Bottom,style:r.tooltip,render:e=>(0,v.jsx)(d().A,{onClick:t,style:{...r.badge,cursor:"pointer"},hoveredStyle:r.badgeHover,pressedStyle:r.badgePressed,...e,children:(0,v.jsx)(b,{showIcon:n})}),renderTooltip:()=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u().D,{styleName:"UISmall-12px/Medium",colorName:"contrastPrimary",children:(0,v.jsx)(s().sA,{id:"trialBadge.tooltip.title",defaultMessage:"{hasSpaceName, select, true {{spaceName}} other {Your workspace}} is on a free {planName, select, plus {Plus} business {Business} enterprise {Enterprise} other {}} trial",values:{hasSpaceName:Boolean(c),spaceName:c,planName:y}})}),(0,v.jsx)(u().D,{styleName:"UISmall-12px/Regular",colorName:"contrastSecondary",children:(0,v.jsx)(s().sA,{id:"trialBadge.tooltip.description",defaultMessage:"Click to learn more"})})]}),textWrap:!0})}function b(e){let{showIcon:t}=e;const n=x(t);return(0,v.jsxs)(v.Fragment,{children:[t?(0,v.jsx)("span",{style:n.giftIcon,children:(0,v.jsx)(c().Q,{iconGroup:a().T,variantName:"mini",colorName:"orangePrimary"})}):null,(0,v.jsx)(u().D,{styleName:"UISmall-12px/Medium",children:(0,v.jsx)(s().sA,{id:"trialBadge.title",defaultMessage:"Free trial"})})]})}function x(e){return(0,r().IS)((t=>({badge:{display:"flex",flexDirection:"row",gap:4,justifyContent:"center",alignItems:"center",color:t.icon.orangePrimary,background:t.fill.orangeSecondary,padding:e?"0px 6px 0px 4px":"0px 6px",height:e?22:20,borderRadius:6,width:"fit-content"},badgeHover:{background:l().XA[t.mode].orange[100]},badgePressed:{background:l().XA[t.mode].orange[200]},tooltip:{maxWidth:"240px",width:"max-content",display:"flex",padding:"4px 6px",flexDirection:"column",alignItems:"flex-start",gap:2,borderRadius:4},giftIcon:{paddingBottom:1}})),[e])}},608581:(e,t,n)=>{n.d(t,{A:()=>c});n(898992),n(354520),n(581454),n(941795);var i=n(296540),o=()=>n(401497),r=()=>n(451306),a=()=>n(284371),s=()=>n(963575),l=n(474848);function d(e){const{button:t,isLast:n}=e,s=(0,o().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:a().Wy.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return i.cloneElement(t,{...(0,r().AH)(t.props.style,s.button,n&&s.buttonLast),hoveredStyle:(0,r().AH)(s.buttonHovered,n&&s.buttonLast).style,pressedStyle:s.buttonPressed})}const c=function(e){let{children:t,isVisible:c,position:u,style:g}=e;const p=(0,n(484714).v3)(),m=(0,o().IS)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:s().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:p.device.isMobile?"auto":"none",opacity:p.device.isMobile?1:0,fontFamily:a().vc(n(662303).locale).sans,position:"absolute",right:s().A.horizontal.small,bottom:s().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:s().A.vertical.small,bottom:void 0}})),[p]),f=i.Children.toArray(t).filter(n(534177).O9),h=f.length;return(0,l.jsx)(n(145214).A,{animate:{opacity:c?1:0},...(0,r().AH)(m.container,g,c&&m.containerHover,"top"===u&&m.containerTop),children:f.map(((e,t)=>{const o=t===h-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===n(859428).A&&i.isValidElement(e))return i.cloneElement(e,{render:(t,n)=>{const i=e.props.render(t,n);return(0,l.jsx)(d,{isLast:o,button:i},e.key)}});if(e.type===n(704152).A&&i.isValidElement(e))return(0,l.jsx)(d,{isLast:o,button:e},e.key)}}))})}},616092:(e,t,n)=>{n.d(t,{Hq:()=>u,mF:()=>c});var i=()=>n(484714),o=()=>n(56366),r=()=>n(529601),a=()=>n(366858),s=()=>n(364499),l=()=>n(151059),d=()=>n(597898);function c(e){let{space:t,team:n,spaceUser:i,invitees:l,store:c}=e;const u=(0,o().K8)((()=>null==i?void 0:i.getUserId()),[i]),f=(0,d()._X)({name:"internal_guests",spaceId:null==t?void 0:t.id,userId:u,amount:0}),h=(0,d()._X)({name:"guests",spaceId:null==t?void 0:t.id,userId:u,amount:0}),v=(0,s().o)({store:c}),y=g(t),b=p(i),x=m(b,n),S=(0,a().A)(t);return(0,o().K8)((()=>{if(y&&b&&h&&f&&S)return(0,r().$S)({space:y,domains:S,team:x,spaceUser:b,invitees:l,internalGuestFeatureAvailability:f,guestFeatureAvailability:h,publicPageDataGuestSetting:v})}),[y,x,f,h,b,l,S,v])}function u(e){let{space:t,team:n,spaceUser:i,invitees:s,optimism:l="pessimistic",publicPageDataGuestSetting:c}=e;const u=(0,o().K8)((()=>null==i?void 0:i.getUserId()),[i]),f=(0,d()._X)({name:"internal_guests",spaceId:null==t?void 0:t.id,userId:u,amount:0}),h=(0,d()._X)({name:"guests",spaceId:null==t?void 0:t.id,userId:u,amount:0}),v=g(t),y=p(i),b=m(y,n),x=(0,a().A)(t);return(0,o().K8)((()=>{if(v&&y&&h&&f&&x)return(0,r().Im)({space:v,domains:x,team:b,spaceUser:y,invitees:s,optimism:l,guestFeatureAvailability:h,internalGuestFeatureAvailability:f,publicPageDataGuestSetting:c})}),[v,y,x,b,s,h,f,l,c])}function g(e){const t=(0,i().v3)(),n=(0,o().K8)((()=>null==e?void 0:e.getModel()),[e]),r=(0,o().K8)((()=>{if(null==e||!e.id)return;const n=l().A.getData(t,{spaceId:e.id});return n?{id:n.id,disable_guests:n.disableGuests,getSettings:()=>({disable_membership_requests:!1,enable_guest_invite_requests:n.enableGuestInviteRequest})}:void 0}),[e,t]);return n??r}function p(e){return(0,o().K8)((()=>null==e?void 0:e.getModel()),[e])??{isMember:()=>!1,isWorkspaceOwner:()=>!1}}function m(e,t){const n=(0,o().K8)((()=>null==t?void 0:t.getModel()),[t]);return(0,o().K8)((()=>null==e?void 0:e.isMember()),[e])?n:{getDisableGuests:()=>!1}}},617014:(e,t,n)=>{n.d(t,{I:()=>H});n(581454);var i=n(296540),o=()=>n(484714),r=()=>n(56366),a=()=>n(401497),s=()=>n(100622),l=()=>n(496603),d=()=>n(401996),c=()=>n(856952),u=()=>n(529183),g=()=>n(717162),p=()=>n(663590),m=()=>n(437487),f=()=>n(381374),h=()=>n(842599),v=()=>n(126818),y=()=>n(167355),b=()=>n(75846),x=()=>n(949306),S=()=>n(234194),w=()=>n(792071),C=()=>n(798880),k=()=>n(959013),j=()=>n(534177),I=()=>n(84817),A=()=>n(704152),M=()=>n(460292),T=()=>n(554509),_=()=>n(859428),P=()=>n(453697),D=()=>n(698449),L=()=>n(962730),R=()=>n(308227),B=n(474848);const O=(0,k().YK)({autojoinMember:{defaultMessage:"{email} will automatically be added to the workspace since @{domain} is an allowed email domain",id:"inviteTargetToken.autojoinMember.tooltip"},guestsDisabledMember:{defaultMessage:"Since guests are disabled, {email} will automatically be added to the workspace as a member",id:"inviteTargetToken.guestsDisabledMember.tooltip"},guest:{defaultMessage:"{email} will be invited as a guest",id:"inviteTargetToken.guest.tooltip"},guestV2:{defaultMessage:"Invite {email} as a guest",id:"inviteTargetToken.guest.tooltipV2"},guestRequest:{id:"inviteTargetToken.guestRequest.tooltip",defaultMessage:"This guest must be approved by a workspace owner first"},invalidUser:{defaultMessage:"{text} is not a valid email",id:"inviteTargetToken.invalidUser.tooltip"},overInternalGuestLimit:{id:"inviteTargetToken.overInternalGuestLimit.tooltip",defaultMessage:"This workspace has reached its internal guest limit"},overGeneralGuestLimit:{id:"inviteTargetToken.overGeneralGuestLimit.tooltip",defaultMessage:"This workspace has reached its guest limit"},disabledByAdmins:{id:"inviteTargetToken.disabledByAdmins.tooltip",defaultMessage:"Inviting users has been disabled by admins for this page"},notAuthorizedDomain:{id:"inviteTargetToken.notAuthorizedDomain.tooltip",defaultMessage:"{email} does not belong to an allowed email domain"}});function W(e){const{inviteTarget:t,defaultAddability:n,onClickRemove:o}=e,a=function(e,t){if("group"===e.type)return"gray";if("invalidUser"===e.type)return"red";if("existingUser"!==e.type&&"newUser"!==e.type)return(0,j().HB)(e);if(void 0===t)return"red";if("member"===t.type)return"autojoin_domain"===t.reason||"guests_disabled"===t.reason?"green":"over_internal_guest_limit"===t.reason?"yellow":(0,j().HB)(t.reason);if("member_request"===t.type)return"red";if("member_page_add"===t.type)return"gray";if("guest"===t.type)return"yellow";if("guest_request"===t.type)return"yellow";if("guest_page_add"===t.type)return"yellow";if("none"===t.type){if("must_upgrade"===t.reason)return"yellow";if("over_internal_guest_limit"===t.reason)return"red";if("over_general_guest_limit"===t.reason)return"red";if("disabled_by_admins"===t.reason)return"red";if("not_authorized_domain"===t.reason)return"red";if("invalid_email"===t.reason)return"red";if("other"===t.reason)return"red";(0,j().HB)(t.reason)}else(0,j().HB)(t)}(t,n),s=(0,k().tz)(),l=K(a),d=(0,i.useCallback)((()=>{o(t)}),[t,o]),c=(0,r().K8)((()=>(0,p().FI)()),[]),u=function(e){const{inviteTarget:t,defaultAddability:n,intl:i,isRedesignEnabled:o}=e,r=(0,g().K0)(t),a=t.type;if("group"===a)return;if("invalidUser"===a)return i.formatMessage(O.invalidUser,{text:t.value.text});if(!r)return;if("existingUser"!==a&&"newUser"!==a)return(0,j().HB)(a);if(void 0===n)return;if("none"===n.type){if("must_upgrade"===n.reason)return;if("other"===n.reason)return;if("over_internal_guest_limit"===n.reason)return i.formatMessage(O.overInternalGuestLimit);if("over_general_guest_limit"===n.reason)return i.formatMessage(O.overInternalGuestLimit);if("disabled_by_admins"===n.reason)return i.formatMessage(O.disabledByAdmins);if("not_authorized_domain"===n.reason)return i.formatMessage(O.notAuthorizedDomain,{email:r});if("invalid_email"===n.reason)return i.formatMessage(O.invalidUser,{text:"unknown"});(0,j().HB)(n.reason)}if("member"===n.type)return"autojoin_domain"===n.reason?i.formatMessage(O.autojoinMember,{email:r,domain:(0,h().zN)(r)}):"guests_disabled"===n.reason?i.formatMessage(O.guestsDisabledMember,{email:r}):"over_internal_guest_limit"===n.reason?r:(0,j().HB)(n.reason);if("member_request"===n.type)return i.formatMessage(O.disabledByAdmins);if("member_page_add"===n.type)return r;if("guest"===n.type)return o?i.formatMessage(O.guestV2,{email:r}):i.formatMessage(O.guest,{email:r});if("guest_request"===n.type)return i.formatMessage(O.guestRequest);if("guest_page_add"===n.type)return o?i.formatMessage(O.guestV2,{email:r}):i.formatMessage(O.guest,{email:r});(0,j().HB)(n)}({inviteTarget:t,defaultAddability:n,intl:s,isRedesignEnabled:c});return(0,B.jsx)(_().A,{placement:L().W.Top,renderTooltip:()=>u,disableTooltip:!u,render:e=>(0,B.jsx)("div",{style:{maxWidth:"100%"},...e,children:(0,B.jsxs)(I().Y1,{gap:2,style:l.token,borderRadius:c?4:3,padding:"2px 4px",width:"hug",children:[(0,B.jsxs)(I().Y1,{align:"center-left",borderRadius:3,direction:"horizontal",gap:4,width:"hug",children:[(0,B.jsx)(E,{inviteTarget:t,tokenColor:a}),(0,B.jsx)(T().D,{colorName:F(a),styleName:"UIRegular-14px/Regular",customStyles:l.label,children:z(t,s)}),(0,B.jsx)(A().A,{hoveredStyle:l.removeButtonHovered,pressedStyle:l.removeButtonPressed,onClick:d,children:(0,B.jsx)(M().Q,{iconGroup:x().Q,colorName:"secondary",variantName:"mini"})})]}),(0,B.jsx)(R().A,{featureGateId:"guest_limit_debug_ui",whenEnabled:(0,B.jsx)("div",{style:{marginLeft:24,paddingBottom:2},children:(0,B.jsx)(T().D,{colorName:"secondary",styleName:"UISmall-12px/Medium",children:null==n?void 0:n.type})}),whenDisabled:null})]})})})}function E(e){const{inviteTarget:t,tokenColor:n}=e,i=K(n);switch(n){case"green":return(0,B.jsx)(M().Q,{iconGroup:v().g,colorName:"greenPrimary",variantName:"default"});case"yellow":return(0,B.jsx)(M().Q,{iconGroup:b().u,colorName:"yellowPrimary",variantName:"default"});case"red":return(0,B.jsx)(M().Q,{iconGroup:y().F,colorName:"uiRedPrimary",variantName:"default"});case"gray":return"existingUser"===t.type?(0,B.jsx)(I().Y1,{align:"center",width:20,height:20,children:(0,B.jsx)(P().A,{userValue:t.value,size:16})}):(0,B.jsx)("div",{style:i.iconCircle,children:(0,S().M)(i.icon)});default:(0,j().HB)(n)}}function K(e){return(0,a().IS)((t=>({token:U(e,t),iconCircle:{alignItems:"center",backgroundColor:t.white,borderRadius:"50%",display:"flex",height:16,justifyContent:"center",width:16},icon:{color:t.icon.secondary,height:12,width:12},label:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},removeButtonHovered:{background:"transparent",opacity:.8},removeButtonPressed:{background:"transparent",opacity:.6}})),[e])}function F(e){switch(e){case"green":return"greenPrimary";case"yellow":return"yellowPrimary";case"red":return"uiRedPrimary";case"gray":return"grayPrimary";default:(0,j().HB)(e)}}function U(e,t){return{background:V(e,t),border:N(e,t)}}function V(e,t){switch(e){case"green":return t.fill.greenPrimary;case"yellow":return t.fill.yellowSecondary;case"red":return t.tint.uiRed;case"gray":return t.legacyDefaultSelectColor;default:(0,j().HB)(e)}}function N(e,t){switch(e){case"red":return`1px dashed ${t.stroke.uiRedPrimary}`;case"green":case"yellow":case"gray":return;default:(0,j().HB)(e)}}function z(e,t){const{type:n}=e;switch(n){case"newUser":return e.value.email.trim();case"invalidUser":return e.value.text.trim();case"existingUser":return w().Bj6.fromValue(C().oo,e.value).getDisplayName(t);case"group":return(0,D().Pf)({intl:t,groupName:e.value.name});default:(0,j().HB)(n)}}function H(e){const{addabilities:t,disabled:n,metadata:g,focus:h,onFocus:v,onInputChanged:y,onSubmit:b,placeholder:x,right:S,showEmptyError:w,setAutoFocusInput:C}=e,k=(0,o().v3)(),j=(0,o().Y0)(),I=(0,r().uB)(e.inviteTargetsStore,u().Ay),A=(0,r().K8)((()=>I.state.inviteTargets),[I]),M=function(e){const{focus:t,disabled:n,hasTokens:i}=e,o=(0,r().K8)((()=>(0,p().FI)()),[]);return(0,a().IS)((e=>({tokenSpan:{maxWidth:"100%"},inputRightItemStyle:o?{alignSelf:"flex-start"}:{},inputOuterStyle:{borderRadius:o?6:4,...t&&!o&&{background:"none"},...n&&{background:e.inputBackground,color:e.mediumTextColor,fill:s().Ay.white,opacity:.4},...o&&{alignItems:"flex-start"}},inputAndTokenWrapRight:{gap:2},inputInnerStyle:{...!i&&{padding:2}},warningMessage:{color:"#DE5550"}})),[i,o,t,n])}({focus:h,disabled:n,hasTokens:A.length>0}),T=(0,r().K8)((()=>I.state.tokenQuery),[I]),_=(0,r().K8)((()=>(0,p().FI)()),[]),{inputFieldText:P}=(0,r().K8)((()=>({inputFieldText:I.state.tokenQuery.trim()})),[I]),D=(0,i.useCallback)((e=>{d().S({inviteTargetsStore:I,targetToRemove:e})}),[I]);return A?(0,B.jsx)(c().Ay,{focus:h,focusAfterAnimation:!0,onClick:()=>{j.isMobile||null==v||v()},format:c().le.Share,value:T,onChange:e=>{if(_&&0===P.length){const e=m().Ay.state;m().Ay.setState({...e,tab:m().QC.Share,display:m().pP.Invite,focus:m().yZ.Search,source:e.display===m().pP.Invite?e.source:m().NL.Notion,emailMessage:e.display===m().pP.Invite?e.emailMessage:""}),null==C||C(!1)}d().P({environment:k,event:e,inviteTargetsStore:I,inviteOrigin:g.inviteOrigin,flowId:g.inviteFlowId,onInputChanged:y})},type:"email",tokens:A.map(((e,n)=>(0,B.jsx)(W,{inviteTarget:e,onClickRemove:D,defaultAddability:G(e,t)},n))),disabled:n,autoComplete:"off",placeholder:x,onRemoveLastToken:()=>{I.setState({...I.state,inviteTargets:I.state.inviteTargets.slice(0,-1)})},right:S,rightWrapStyle:M.inputRightItemStyle,showBorder:!0,inputStyle:M.inputInnerStyle,inputAndTokenWrapRightStyle:M.inputAndTokenWrapRight,style:M.inputOuterStyle,onSubmit:b,inputFullWidth:!0,message:(0,B.jsx)(f().p,{invalidInvites:(0,l().oE)(A.map((e=>"invalidUser"===e.type?e:void 0))),showEmptyError:w,styles:M.warningMessage})}):null}function G(e,t){const n=(0,g().K0)(e);if(n)return null==t?void 0:t[n]}},675910:(e,t,n)=>{n.d(t,{M:()=>o});n(296540);var i=n(474848);const o=(0,n(340498).wt)("clockAlternate",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M10.417 6.09961C10.5811 6.09961 10.7201 6.15885 10.834 6.27734C10.9525 6.39128 11.0117 6.53027 11.0117 6.69434V11.2949L10.376 9.34668L12.5977 12.3408C12.7116 12.4867 12.7617 12.6416 12.748 12.8057C12.7344 12.9697 12.6592 13.0996 12.5225 13.1953C12.3721 13.3001 12.2148 13.3389 12.0508 13.3115C11.8913 13.2842 11.75 13.1908 11.627 13.0312L9.99316 10.8779C9.93392 10.8005 9.89062 10.7253 9.86328 10.6523C9.83594 10.5749 9.82227 10.4928 9.82227 10.4062V6.69434C9.82227 6.53027 9.87923 6.39128 9.99316 6.27734C10.1117 6.15885 10.2529 6.09961 10.417 6.09961ZM10.6768 17.126C9.93848 17.126 9.22298 17.0098 8.53027 16.7773C7.84212 16.5495 7.20638 16.2259 6.62305 15.8066C6.04427 15.3919 5.54297 14.9111 5.11914 14.3643C4.96875 14.182 4.90495 13.9928 4.92773 13.7969C4.95052 13.6009 5.03939 13.446 5.19434 13.332C5.36296 13.2135 5.53841 13.1748 5.7207 13.2158C5.90299 13.2568 6.06478 13.3571 6.20605 13.5166C6.54785 13.9678 6.94889 14.3597 7.40918 14.6924C7.87402 15.0205 8.37988 15.2734 8.92676 15.4512C9.47819 15.6335 10.0615 15.7269 10.6768 15.7314C11.4606 15.736 12.1943 15.5902 12.8779 15.2939C13.5661 15.0023 14.1676 14.599 14.6826 14.084C15.2021 13.5645 15.6077 12.9629 15.8994 12.2793C16.1956 11.5911 16.3438 10.8529 16.3438 10.0645C16.3438 9.2806 16.1956 8.54688 15.8994 7.86328C15.6077 7.17513 15.2021 6.57357 14.6826 6.05859C14.1676 5.53906 13.5661 5.13346 12.8779 4.8418C12.1943 4.55013 11.4606 4.4043 10.6768 4.4043C9.88835 4.4043 9.15234 4.55013 8.46875 4.8418C7.78971 5.12891 7.19043 5.52995 6.6709 6.04492C6.15137 6.5599 5.74349 7.15918 5.44727 7.84277C5.1556 8.52181 5.00749 9.25326 5.00293 10.0371H3.6084C3.61296 9.07096 3.7998 8.16406 4.16895 7.31641C4.53809 6.46875 5.0485 5.72135 5.7002 5.07422C6.35189 4.42708 7.10156 3.92122 7.94922 3.55664C8.80143 3.1875 9.71061 3.00293 10.6768 3.00293C11.6429 3.00293 12.5521 3.1875 13.4043 3.55664C14.2565 3.92578 15.0062 4.4362 15.6533 5.08789C16.305 5.73503 16.8154 6.4847 17.1846 7.33691C17.5537 8.18913 17.7383 9.09831 17.7383 10.0645C17.7383 11.0306 17.5537 11.9398 17.1846 12.792C16.8154 13.6442 16.305 14.3962 15.6533 15.0479C15.0062 15.6995 14.2565 16.2077 13.4043 16.5723C12.5521 16.9414 11.6429 17.126 10.6768 17.126ZM2.78809 8.66992H6.16504C6.33822 8.66992 6.4681 8.71094 6.55469 8.79297C6.64583 8.87044 6.68913 8.9707 6.68457 9.09375C6.68001 9.21224 6.63216 9.33984 6.54102 9.47656L4.87988 11.7803C4.76595 11.9352 4.63151 12.015 4.47656 12.0195C4.32161 12.0195 4.1849 11.9398 4.06641 11.7803L2.40527 9.47656C2.31413 9.3444 2.26628 9.2168 2.26172 9.09375C2.25716 8.9707 2.29818 8.87044 2.38477 8.79297C2.47591 8.71094 2.61035 8.66992 2.78809 8.66992Z"})})},681810:(e,t,n)=>{n.d(t,{A:()=>i});const i=new(n(867772).Ay)},710857:(e,t,n)=>{n.d(t,{x:()=>o});const i={greeting:!0,tasks:!1,tips:!1,templates:!1,calendar:!1,custom_db:!1};function o(e){const t=(null==e?void 0:e.getHomeEnabledFeatures())??{};return{...i,...t}}},714300:(e,t,n)=>{n.d(t,{l:()=>l});var i=()=>n(484714),o=()=>n(56366),r=()=>n(176983),a=()=>n(596513),s=()=>n(324561);function l(e){let{spaceId:t}=e;const n=(0,i().v3)(),l=(0,r().J)();return(0,o().K8)((()=>{if(!t||!l)return;const e=a().t.getData(n,{spaceId:t});return(0,s().a9)(e)}),[n,t,l],{useDeepEqual:!0})}},717162:(e,t,n)=>{n.d(t,{K0:()=>r,qw:()=>o});var i=()=>n(534177);function o(e){const{currentMembersAndGuests:t,inviteTarget:n}=e,i=r(n);if(!i)return;const o=function(e){const{email:t,currentMembersAndGuests:n}=e;return n.memberEmails.has(t)?"member":n.guestEmails.has(t)?"guest":void 0}({email:i,currentMembersAndGuests:t});return{email:i,currentRole:o}}function r(e){const{type:t}=e;switch(t){case"newUser":case"existingUser":return e.value.email;case"invalidUser":case"group":return;default:(0,i().HB)(t)}}},748539:(e,t,n)=>{n.d(t,{f:()=>i});const i=new(n(645873).O2)("pageCovers",(async()=>n.e(40198).then(n.bind(n,193645))))},756114:(e,t,n)=>{n.d(t,{D:()=>i});function i(e,t){t.route.name;return!1}},759113:(e,t,n)=>{n.d(t,{m:()=>c,z:()=>d});n(898992),n(672577),n(296540);var i=()=>n(56366),o=()=>n(401497),r=()=>n(959013),a=()=>n(284371),s=()=>n(310397),l=n(474848);function d(e){const{workflowValue:t,trigger:n}=e;return(0,i().K8)((()=>{var e,i;const o=null==t||null===(e=t.modules)||void 0===e?void 0:e.find((e=>e.key===n.moduleKey));if(!o||null===(i=n.state)||void 0===i||!i.type)return null;return s().y[o.type].triggers[n.state.type]}),[t,n])}function c(e){const{workflowValue:t,trigger:n,isInTranscript:i,workflowDefinitionPointer:s,saveTrigger:c}=e,u=(0,o().IS)((e=>({container:{display:"flex",gap:4,flexDirection:i?"column":"row",overflow:"hidden"},title:i?{color:e.text.tertiary,fontWeight:a().Wy.medium,fontSize:14}:{fontWeight:500}})),[i]),g=d({workflowValue:t,trigger:n}),p=(0,r().tz)();if(!n.state||!g||!s)return null;if("full"===g.configuration){const{FullConfiguration:e}=g;return(0,l.jsx)("div",{style:u.container,children:(0,l.jsx)(e,{trigger:n,isInTranscript:i,workflowDefinitionPointer:s})})}const{ConfigurationComponent:m}=g;return(0,l.jsxs)("div",{style:u.container,children:[(0,l.jsx)("div",{style:u.title,children:i&&g.transcriptDescription?g.transcriptDescription(p,n):(0,l.jsx)(r().sA,{...g.description})}),m&&(0,l.jsx)(m,{workflowValue:t,trigger:n,isInTranscript:i,workflowDefinitionPointer:s,saveTrigger:c})]})}},765974:(e,t,n)=>{n.d(t,{b:()=>o});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M11.84 3.563c-.817-1.417-2.862-1.417-3.68 0L2.314 13.688c-.818 1.416.205 3.187 1.84 3.187h11.692c1.636 0 2.658-1.77 1.84-3.187zM9.876 6.75c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5"})},o=(0,n(340498).wt)("exclamationMarkTriangleFill",i)},776690:(e,t,n)=>{n.d(t,{J:()=>d});var i=()=>n(484714),o=()=>n(56366),r=n(296540),a=()=>n(496603);var s=()=>n(363186),l=()=>n(94522);function d(){const{workflowStore:e,threadStore:t,clientStore:n}=(0,s().$O)(),d=(0,i().v3)();return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a().n4;const n=(0,r.useRef)(e);return t(n.current,e)||(n.current=e),n.current}((0,o().K8)((()=>(0,l().n2)({workflowStore:e,threadStore:t,clientStore:n,environment:d})),[e,t,n,d]))}},777092:(e,t,n)=>{n.d(t,{JQ:()=>c,d5:()=>u,vt:()=>d});var i=()=>n(764880),o=()=>n(310442),r=()=>n(824862),a=()=>n(798880),s=()=>n(534177),l=()=>n(630116);function d(e){const{parentStore:t,pointer:n}=e,o=(0,l().Oo)(t,n).getValue();if(o)return(0,i().D3)({table:n.table,value:o})}function c(e){const{parentStore:t,pointer:n}=e;return n.table===r().GP?l().vK.createChildStore(t,n):n.table===a().oo?l().LU.createChildStore(t,n):n.table===o().yj?l().pH.createChildStore(t,n):void(0,s().HB)(n)}function u(e){return e.table===r().GP?(0,i().oC)(e.getValue()):e.table===a().oo?(0,i().MR)(e.getValue()):e.table===o().yj?(0,i().w2)(e.getValue()):void(0,s().HB)(e)}},779496:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(296540),o=()=>n(56366),r=()=>n(959013),a=()=>n(125565),s=()=>n(698449),l=n(474848);function d(e){let{inviteTarget:t,isRedesignEnabled:i,isMobile:d,captionOverride:c}=e;const u=(0,r().tz)(),g=(0,o().K8)((()=>n(351360).default.state.currentSpaceStore),[]),p=(0,o().K8)((()=>(0,s().Pf)({groupName:t.value.name,intl:u})),[t,u]),m=(0,o().K8)((()=>{if(g&&t.value.icon)return{pointer:{table:g.table,id:g.id},icon:t.value.icon}}),[g,t]),f=(0,o().K8)((()=>(0,s().xQ)({groupId:t.value.group_id})),[t]),h=(0,n(401497).IS)((()=>({container:(0,n(623275).sH)({isRedesignEnabled:i,isMobile:d}),titleContainer:{display:"flex",alignItems:"center",paddingTop:i?void 0:8,paddingBottom:i?void 0:8,marginLeft:i?void 0:2,minHeight:36},groupInfoContainer:{display:"flex",flexDirection:"column"},nameAndIconContainer:{display:"flex",alignItems:"center"},groupNameLabel:{marginLeft:10,marginRight:4},groupMembersLabel:{marginLeft:10}})),[d,i]);return(0,l.jsxs)("div",{style:h.titleContainer,children:[(0,l.jsx)(n(946928).A,{groupIcon:null==m?void 0:m.icon,isRedesignEnabled:i,spaceId:t.value.space_id}),(0,l.jsxs)("div",{style:h.groupInfoContainer,children:[(0,l.jsxs)("div",{style:h.nameAndIconContainer,children:[(0,l.jsx)(a().A,{style:h.groupNameLabel,children:p}),!i&&Boolean(null==m?void 0:m.icon)&&(0,l.jsx)(n(614505).A,{disabled:!0,bucket:"public",title:p,icon:m,size:18,isEmptyPage:!1})]}),(0,l.jsx)(a().A,{isSmall:!0,style:h.groupMembersLabel,children:c||(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r().sA,{defaultMessage:"Group",id:"blockPermissionsSettings.groupPermission.label"})," · ",(0,l.jsx)(r().sA,{defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} person} other {{numberOfGroupMembers} people}}",id:"blockPermissionsSettings.groupPermission.none",values:{numberOfGroupMembers:f}})]})})]})]})}const c=i.memo(d)},801678:(e,t,n)=>{n.d(t,{A:()=>h});var i=n(296540),o=()=>n(662303),r=()=>n(484714),a=()=>n(56366),s=()=>n(451306),l=()=>n(959013),d=()=>n(100622),c=()=>n(496603),u=()=>n(284371),g=()=>n(720665),p=()=>n(145214),m=n(474848);const f={isRepositioning:!1};const h=function(e){const t=(0,i.useRef)(null),o=(0,r().v3)(),{isMobile:l}=(0,r().Y0)(),[d,u]=(0,i.useState)(f),p=(0,i.useCallback)((()=>{u(f)}),[]),{renderControl:h,onFlushTemporaryPosition:y,style:b,source:x,store:S}=e,{isRepositioning:w,image:C,startDragRenderedPosition:k,startDragImageScreenHeight:j}=d,I=(0,a().K8)((()=>0===n(502438).default.state.stores.length),[]),[A,M]=(0,i.useState)(!1),T=(0,a().uB)(e.mouseStore,n(454305).A),_=(0,a().K8)((()=>T.state.mouseEntered),[T]),P=(0,n(401497).IS)((()=>({dragContainer:{width:"100%",cursor:w?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[w]),D=(0,a().K8)((()=>function(e,t,n){return(0,c().Et)(n)?n:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,c().Et)(e))return e}const n=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,g().pN)(t)?n:t}}const i=t.getFormat(),o=i.page_cover_position;if((0,c().Et)(o))return o;return n}(e,t)}(x,S,d.temporaryPosition)),[d.temporaryPosition,x,S]);(0,i.useEffect)((()=>{const e=e=>{const n=t.current;n&&!n.contains(e.target)&&w&&y({imagePosition:D,reset:()=>{T.reset(),p()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[D,w,T,y,p]),w&&!I&&p();const L=(0,i.useMemo)((()=>(0,c().nF)((e=>{T.setState({...T.state,mouseEntered:!0})}),100)),[T]),R=(0,i.useMemo)((()=>(0,c().sg)((e=>{T.setState({...T.state,mouseEntered:!1})}),100)),[T]),B=(0,i.useCallback)(((e,t)=>{n(778417).IU({environment:o});const i=new Image;i.onload=()=>{u((e=>({...e,isRepositioning:!0,image:i})))},t&&(i.src=t)}),[o]),O=(0,i.useCallback)((e=>{y({imagePosition:D,reset:()=>{p()}})}),[D,y,p]),W=(0,i.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,n(819121).p)(t)&&M(!0)}),[]),E=(0,i.useCallback)((()=>{M(!0)}),[]),K=(0,i.useCallback)((e=>{if(C&&w){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/C.width*C.height;u((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:D})))}}}),[C,D,w]),F=(0,i.useCallback)((e=>{if(w){const t=e.diffY/(j||0)+(k||0);u((e=>({...e,temporaryPosition:(0,c().LI)((0,n(40845).A)(t,0,1),4)})))}}),[w,j,k]),U=(0,i.useCallback)((()=>{u((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),V=(0,a().K8)((()=>h({handleRepositionClick:B,handleSavePositionClick:O,handleCancelClick:p,isVisible:l||_||A||w,isRepositioning:w})),[B,O,A,l,w,_,h,p]);return(0,m.jsxs)("div",{ref:t,onFocus:W,onBlur:E,onMouseEnter:L,onMouseMove:L,onMouseLeave:R,...(0,s().AH)(P.container,b),children:[(0,m.jsx)(n(603820).A,{onDraggableDragStart:K,onDraggableDragMove:F,onDraggableDragEnd:U,onDraggableDragCancel:U,disabled:!w,render:t=>(0,m.jsx)("div",{...(0,s().AH)(P.dragContainer),...t,children:e.render({imagePosition:D,isRepositioning:w})})}),(0,m.jsx)(v,{small:e.small,isRepositioning:w}),V]})};function v(e){let{small:t,isRepositioning:n}=e;if(t)return null;const i={background:d().Ay.blackWithAlpha(.4),borderRadius:4,color:d().Ay.white,fontSize:12,fontFamily:u().vc(o().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,m.jsx)(p().A,{visible:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:i,children:(0,m.jsx)(l().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},814429:(e,t,n)=>{n.d(t,{A:()=>S});var i=n(296540),o=()=>n(56366),r=()=>n(401497),a=()=>n(148307),s=()=>n(831310),l=()=>n(798880),d=()=>n(100622),c=()=>n(534177),u=()=>n(704152),g=()=>n(854672),p=()=>n(619338),m=()=>n(870092),f=()=>n(623275),h=()=>n(623742),v=n(474848);function y(e,t){let{store:i,isInvited:o,isRedesignEnabled:a,disabled:s,spaceVisibleUserMap:l,inviteTarget:d,id:c,focused:u,onClick:g,onAuxClick:p,onMouseEnter:m,role:h,disallowTabbing:y,ignoreLocalHoverState:S,isMobile:w}=e;const C=(0,r().IS)((()=>({container:(0,f().sH)({isRedesignEnabled:a,isMobile:w})})),[w,a]);return(0,v.jsx)(n(760217).A,{ref:t,buttonStyle:C.container,title:"group"===d.type?(0,v.jsx)(n(779496).A,{inviteTarget:d,isRedesignEnabled:a,isMobile:w}):(0,v.jsx)(b,{store:i,inviteTarget:d,isRedesignEnabled:a,spaceVisibleUserMap:l,isMobile:w}),disabled:s,right:!s&&(0,v.jsx)(x,{onClick:g,checked:o,isRedesignEnabled:a}),id:c,focused:u,onClick:g,onAuxClick:p,onMouseEnter:m,role:h,disallowTabbing:y,ignoreLocalHoverState:S})}function b(e){let{store:t,inviteTarget:n,isRedesignEnabled:s,isMobile:d,spaceVisibleUserMap:u}=e;const y=(0,o().K8)((()=>"existingUser"===n.type?(0,p().p)({spaceVisibleUserMap:u,userId:n.value.id,store:t}):void 0),[n,u,t]),b=(0,i.useMemo)((()=>"existingUser"===n.type?{actorStore:m().L.createChildStore(t,{table:l().oo,id:n.value.id}),avatar:void 0}:"newUser"===n.type?{actorStore:void 0,avatar:{email:n.value.email,..."slack"===n.source||"google"===n.source?{name:n.value.name,avatarUrl:n.value.avatar_url}:{name:void 0,avatarUrl:void 0}}}:void(0,c().HB)(n)),[n,t]),x=(0,r().IS)((()=>({container:(0,f().sH)({isRedesignEnabled:s,isMobile:d}),cellMemberAvatarContainer:s?{}:{paddingTop:8,paddingBottom:8},iconBox:{position:"absolute",bottom:-3,right:-3},iconBoxImage:{background:"white",padding:2,borderRadius:"100%"}})),[d,s]);return(0,v.jsx)(h().A,{isLarge:!0,...b,containerStyle:x.cellMemberAvatarContainer,avatarBadge:(()=>{const e=(()=>{if("newUser"!==n.type)return null;switch(n.source){case"slack":return a().A.images.externalIntegrations.slackIconPng;case"google":return a().A.images.externalIntegrations.googleGIconPng;default:return null}})();return e?(0,v.jsx)(g().A,{type:"image_url",imageURL:e,size:18,style:x.iconBox,imageStyle:x.iconBoxImage}):null})(),spaceRole:y})}function x(e){const{checked:t,isRedesignEnabled:n}=e,i=(0,r().IS)((e=>{const i=i=>{if(!n)return t?{background:d().Ay.blue,borderColor:d().Ay.blue}:{background:"transparent",borderColor:e.buttonPressedBackground};switch(i){case"default":return{background:t?e.checkboxBackground:"transparent",borderColor:t?e.checkboxBackground:e.icon.tertiary};case"hovered":return{background:t?e.checkboxHoveredBackground:e.uncheckedCheckboxHoveredBackground,borderColor:t?e.checkboxHoveredBackground:e.icon.tertiary};case"pressed":return{background:t?e.checkboxPressedBackground:e.uncheckedCheckboxPressedBackground,borderColor:t?e.checkboxPressedBackground:e.icon.tertiary};default:return(0,c().ub)(i),{}}};return{circleCheckmark:{display:"flex",justifyContent:"center",alignItems:"center",width:n?18:22,height:n?18:22,borderRadius:"50%",borderStyle:"solid",borderWidth:1.75,...i("default"),marginRight:6},hovered:i("hovered"),pressed:i("pressed"),checkIcon:{height:n?9:12,width:n?9:12,color:"white"}}}),[t,n]);return(0,v.jsx)(u().A,{onClick:e.onClick,style:i.circleCheckmark,hoveredStyle:i.hovered,pressedStyle:i.pressed,children:t&&(0,s().o)(i.checkIcon)})}const S=i.memo(i.forwardRef(y))},846199:(e,t,n)=>{n.d(t,{A:()=>i});const i=n(757695).default.createValue({open:!1},{name:"TrialInfoModalStore"})},867772:(e,t,n)=>{n.d(t,{Ay:()=>l,Gi:()=>r,Wc:()=>i,pF:()=>a,vS:()=>o});const i="loadingLocalImage",o="uploading",r="downloading",a="loaded";class s extends(()=>n(757695))().default{getInitialState(){return{loadingMode:a}}}const l=s},893627:(e,t,n)=>{n.d(t,{K:()=>a});var i=n.n(n(440537)),o=()=>n(132456),r=()=>n(206267);class a{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=n(851941).Yf[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e){const{enableTestDateOffset:t,enableIdSchema:i}=this.getSettings();return i&&e!==n(867178).wI?(this.idCreatorLogger(void 0,e,t?"id_schema_test":"id_schema"),(0,o().J4)(t,this.mainShortId,e,this.isServerOriginated)):this.legacyId(e,"disabled")}pointerInMain(e){return{table:e,id:this.idInMain(e)}}async idWithSpaceId(e,t){const{enableTestDateOffset:n,enableIdSchema:r}=this.getSettings();if(!r||"space"===t)return this.legacyId(t,"disabled");const a=this.mapSpaceIdToShortId(e),s=i().types.isPromise(a)?await a:a;return s?(this.idCreatorLogger(e,t,n?"id_schema_test":"id_schema"),(0,o().kw)(n,s,t,this.isServerOriginated)):this.legacyId(t,"missing_short_id")}async pointerWithSpaceId(e,t){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t)}}idWithSpaceShortId(e,t){const{enableTestDateOffset:n,enableIdSchema:i}=this.getSettings();return i&&"space"!==t?(this.idCreatorLogger(void 0,t,n?"id_schema_test":"id_schema"),(0,o().kw)(n,e,t,this.isServerOriginated)):this.legacyId(t,"disabled")}legacyId(e,t){return this.idCreatorLogger(void 0,e,t),r().JW()}async deterministicIdWithSpaceId(e,t,n){const{enableTestDateOffset:a,enableIdSchema:s}=this.getSettings();if(!s)return this.idCreatorLogger(e,t,"disabled"),r().gB(n);const l=this.mapSpaceIdToShortId(e),d=i().types.isPromise(l)?await l:l;return d?(this.idCreatorLogger(e,t,a?"id_schema_test":"id_schema"),(0,o().lf)(d,t,n)):(this.idCreatorLogger(e,t,"missing_short_id"),r().gB(n))}deterministicIdWithSpaceShortId(e,t,n){const{enableTestDateOffset:i,enableIdSchema:a}=this.getSettings();return a?(this.idCreatorLogger(void 0,t,i?"id_schema_test":"id_schema"),(0,o().lf)(e,t,n)):(this.idCreatorLogger(void 0,t,"disabled"),r().gB(n))}async getSpaceIdCreator(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),o=i().types.isPromise(n)?await n:n;return this.getSpaceShortIdCreator(e,o)}getSpaceIdCreatorSync(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),o=i().types.isPromise(n)?void 0:n;return this.getSpaceShortIdCreator(e,o)}getSpaceShortIdCreator(e,t){const{enableIdSchema:n}=this.getSettings();return n&&t?new l(e,this,t):new s(e,this.idCreatorLogger)}async getSpaceIdCreatorFromModel(e){return e.getShortIdStr()?this.getSpaceShortIdCreator(e.id,Number(e.getShortIdStr())):await this.getSpaceIdCreator(e.id)}}class s{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e){return this.idCreatorLogger(void 0,e,"disabled"),r().JW()}idInMain(e){return this.idCreatorLogger(void 0,e,"disabled"),r().JW()}deterministicIdInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled"),r().gB(t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class l{constructor(e,t,n){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=n}idInSavedSpace(e){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e)}idInMain(e){return this.idCreator.idInMain(e)}deterministicIdInSavedSpace(e,t){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}},914436:(e,t,n)=>{n.d(t,{default:()=>de});var i=n(296540),o=()=>n(484714),r=()=>n(56366),a=()=>n(401497),s=()=>n(284371),l=()=>n(696746),d=()=>n(351360),c=(n(944114),n(581454),()=>n(179034)),u=()=>n(959013),g=()=>n(534177),p=()=>n(705540),m=()=>n(108944),f=()=>n(71304),h=()=>n(37433),v=()=>n(963589),y=()=>n(630116),b=()=>n(704152),x=()=>n(493823),S=()=>n(406699),w=()=>n(928600),C=()=>n(939740),k=()=>n(722872),j=()=>n(584262),I=()=>n(857783),A=()=>n(305390),M=()=>n(89924),T=()=>n(728611),_=()=>n(211716),P=n(474848);function D(e,t){return[{key:"results",render:e=>(0,P.jsx)(M().A,{...e}),items:t.map(((t,n)=>({key:t.id,render:e=>(0,P.jsx)(A().A,{...e,isSubpage:0!==n,store:t,hidePath:!0}),action:n=>{let{event:i}=n;const o=T().Vr(i);t instanceof y().Bv&&I().uK({environment:e,store:t,openInNew:o,visitType:_().ig.Link,pageVisitSource:j().y8.Breadcrumb})}})))}]}var L=()=>n(675811);const R=function(e){const{isMobile:t,stores:i}=e,r=(0,o().v3)(),a={display:"flex",alignItems:"center",flexShrink:0};return(0,P.jsx)(S().Ay,{popupType:t?S().z7.BottomSheet:S().z7.Popup,renderOrigin:e=>t?(0,P.jsxs)(b().A,{style:{...a},mobileFeedback:!0,...e,children:[(0,P.jsx)(L().f,{}),(0,P.jsx)("div",{style:{marginLeft:8,marginRight:8},children:"..."}),(0,P.jsx)(L().f,{})]}):(0,P.jsxs)("div",{style:a,children:[(0,P.jsx)(x().p,{size:"sm",...e,children:"..."}),(0,P.jsx)(L().f,{})]}),render:e=>{let o;return o=t?{menuType:k().gu.Modal,title:(0,P.jsx)(u().sA,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:(0,P.jsx)(n(45552).DoneMenuText,{}),onClickRight:e.close}:{menuType:k().gu.Popup,width:240},(0,P.jsx)(w().A,{...o,children:(0,P.jsx)(C().Ay,{type:C().Oh.Vertical,onAccept:e.close,initialFocus:void 0,sections:D(r,i)})})}})};var B=()=>n(20039);function O(e){const{store:t,showDivider:n,maxWidth:s,iconSize:l,titleStyle:d,iconStyle:c,highlighter:u,onClick:g}=e,p=(0,o().v3)(),{device:m}=p,f=(0,a().IS)((()=>({button:{display:"flex",minWidth:0,fontSize:"inherit",paddingTop:2,paddingBottom:2,paddingLeft:6,paddingRight:6}})),[]);return(0,r().K8)((()=>t.isDefined()),[t])?(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(x().p,{style:f.button,size:"sm",shouldShrink:!0,mobileFeedback:m.isMobile,onClick:g,children:(0,P.jsx)(B().A,{store:t,maxWidth:s,iconSize:l,titleStyle:d,iconStyle:c,highlighter:u})}),n&&(0,P.jsx)(L().f,{})]},t.id):null}var W=()=>n(906719),E=()=>n(565049);function K(e){const{ancestorMaxWidth:t,isMobile:n,homeStore:a,store:s,maxAncestorCount:d}=e,b=(0,o().v3)(),x=(0,u().tz)(),S=(0,v().X)("workflow_container"),w=(0,r().K8)((()=>(0,h().zI)()>0),[]),C=(0,r().K8)((()=>{const e=m().g7(s),t=[];for(let n=e.length-1;n>=0;n--){const i=e[n];if(i instanceof y().Bv){if(i.id===s.id&&s.isNavigableBlock())continue;t.push(i)}else if(i instanceof y().h4)t.push(i);else if(i instanceof y().md&&S){const e=i.getParentStore();(null==e?void 0:e.table)===c().ev&&e.hasMultipleSourceCollections()&&t.push(i)}}return t.length>0&&t[0]instanceof y().h4&&!w?t.slice(1):t}),[s,S,w],{useDeepEqual:!0}),k=(0,r().K8)((()=>C.map((e=>(0,f().Qe)(e,x,b,!0)||(0,f().gG)(e,x)||""))),[b,x,C]);(0,i.useEffect)((()=>(p().setTabBreadcrumbs(k),()=>{p().setTabBreadcrumbs(void 0)})),[k]);const j=(0,r().K8)((()=>(0,l().Nh)(s.id)),[s]),I=(0,i.useCallback)(((e,n)=>e instanceof y().h4?(0,P.jsx)(E().A,{store:e,showDivider:n,maxWidth:t},e.id):e instanceof y().md?(0,P.jsx)(O,{store:e,showDivider:n,maxWidth:t},e.id):e instanceof y().Bv?(0,P.jsx)(W().A,{store:e,showDivider:n,maxWidth:t},e.id):void(0,g().HB)(e)),[t]);if(j&&void 0!==a)return I(a,C.length>0);if(C.length<=d)return(0,P.jsx)(P.Fragment,{children:C.map((e=>I(e,!0)))});const[A,M,T]=[C[0],C.slice(1,C.length-d+1),C.slice(C.length-d+1)];return(0,P.jsxs)(P.Fragment,{children:[I(A,!n),(0,P.jsx)(R,{isMobile:n,stores:n?C:M},"ellipses"),T.map((e=>I(e,!n)))]})}var F=()=>n(989423);var U=()=>n(898286),V=()=>n(478726),N=()=>n(836251),z=()=>n(347199),H=()=>n(953418),G=()=>n(712505);const J=function(e){const{ancestorMaxWidth:t,ignoreMaxLength:n,showDivider:i,store:o}=e,r=(0,a().IS)((()=>({wrapper:{display:"flex",alignItems:"center",flexShrink:1,marginLeft:6,minWidth:0,maxWidth:n?void 0:"100%"}})),[n]);return(0,P.jsxs)("div",{style:r.wrapper,children:[(0,P.jsx)(B().A,{store:o,maxWidth:t,ignoreMaxLength:n}),i&&(0,P.jsx)(L().f,{})]})};function Y(e,t,n,i){return(0,r().K8)((()=>{const o=i.canEdit(),r=i.isNonEditableState(),a=i instanceof y().md?i:i.getCollectionStore(),s=null==a?void 0:a.isSyncedCollection(),d=i instanceof y().Bv&&i.isExternalObjectInstancePageBlockStore(),c=i instanceof y().Bv&&(0,V().fc)(i);return(0,l().Nh)(i.id)||t||(0,N().w6)(e)||G().default.isCenterPeekOpen()||!n||!o||r||d||s||c}),[e,t,n,i])}function q(e,t,n,o){const r=Y(e,t,n,o);return(0,i.useCallback)((()=>{if(o instanceof y().md)return;if(r)return;const t=G().default.isCenterPeekOpen()?z().A.PeekViewScroller:z().A.PageScroller;if(t){const n=t.getNode();if(n&&!H().Np(n))return H().VG({element:n,environment:e,options:{top:0,behavior:"smooth"}}),void function(e){F().vd(e,"click_breadcrumb_current_page_scroll_to_top")}(e)}const i=n.current;if(!i)return;if(!(i instanceof Element))return;const a=i.getBoundingClientRect();U().U({blockStore:o,originRect:a}),function(e){F().vd(e,"open_breadcrumb_current_page_menu")}(e)}),[r,e,n,o])}function $(e,t){const{currentPageMaxWidth:i,isMobile:a,currentPageRef:s,store:l}=e,d=(0,o().v3)(),c=Y(d,a,s,l),u=(0,r().K8)((()=>l instanceof y().Bv&&l.isEmptyPage()),[l]),g=(0,r().K8)((()=>l.getIcon()),[l]),p=a?24:20,m=q(d,a,s,l);return(0,P.jsxs)(x().p,{shouldShrink:!0,onClick:m,size:"sm",ref:t,disabled:c,children:[Boolean(g)&&(0,P.jsx)(n(614505).A,{disabled:!0,icon:g,isEmptyPage:u,size:p,style:{marginRight:6},largeIcon:!0}),(0,P.jsx)(n(16006).A,{store:l,style:{maxWidth:i},enableHover:!0})]})}const Q=(0,i.forwardRef)($);function X(e){const{ancestorMaxWidth:t,isMobile:n,currentPageRef:i,store:a}=e,s=(0,o().v3)(),{mobileNative:d}=s,c=(0,r().K8)((()=>a instanceof y().Bv&&(0,l().lU)(a)),[a]),u=q(s,n,i,a),g=(0,r().K8)((()=>{if(a instanceof y().Bv){const e=m().fU(a);return 0===(a.isNavigableBlock()?e.slice(1):[...e]).length}return!1}),[a]);return c?null:n?(0,P.jsx)(x().p,{shouldShrink:!0,onClick:u,size:"sm",style:null!=d&&d.supportsNativeHomeOnPhone()?{paddingLeft:0}:void 0,children:(0,P.jsx)(J,{store:a,showDivider:!1,ignoreMaxLength:g,ancestorMaxWidth:t})}):(0,P.jsx)(x().p,{shouldShrink:!0,onClick:u,size:"sm",style:{fontSize:"inherit"},children:(0,P.jsx)(J,{store:a,showDivider:!1,ancestorMaxWidth:t})})}function Z(e){const{ancestorMaxWidth:t,store:n}=e,a=(0,o().v3)(),s={display:"flex",alignItems:"center",flexShrink:0},l=(0,r().K8)((()=>{const e=m().fU(n);return e.reverse(),e}),[n]),d=(0,i.useCallback)((()=>{(0,F().u4)({environment:a,event:{eventName:"topbar_breadcrumb_menu_click",eventProperties:{has_parent_pages:l.length>1}}})}),[a,l]);return(0,P.jsx)(S().Ay,{popupType:S().z7.BottomSheet,bottomSheetInitialState:"half",onClick:d,renderOrigin:e=>(0,P.jsx)(b().A,{style:{...s,maxWidth:"100%"},mobileFeedback:!0,...e,children:(0,P.jsx)(J,{store:n,showDivider:!1,ignoreMaxLength:!0,ancestorMaxWidth:t})}),render:e=>(0,P.jsx)(w().A,{menuType:k().gu.Modal,title:(0,P.jsx)(u().sA,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),children:(0,P.jsx)(C().Ay,{type:C().Oh.Vertical,onAccept:e.close,initialFocus:void 0,sections:D(a,l)})})},"pages-popup")}n(898992),n(823215),n(737550);var ee=n(440961),te=()=>n(404085),ne=()=>n(471095),ie=()=>n(68263),oe=()=>n(95313),re=()=>n(750660),ae=()=>n(859428),se=()=>n(962730);function le(e){const{store:t}=e,n=(0,o().v3)(),s=(0,r().K8)((()=>{const{currentSpaceViewStore:e}=d().default.state,i=null==e?void 0:e.getPrivatePages(n);return null==i?void 0:i.some((e=>e.id===t.id))}),[n,t]),l=(0,r().K8)((()=>{const e=n.currentUser.id;return t.getPermissionItems().every((t=>(0,ie().B2)(t)&&e===t.user_id))}),[n,t]),c=(0,a().DP)(),g=(0,i.useRef)(null),p=(0,i.useCallback)((()=>{if(!g)return;const e=ee.findDOMNode(g.current);if(!(e&&e instanceof Element))return;const i=e.getBoundingClientRect(),o=new DOMRect(i.x,i.y,i.width,i.height+5);oe().D3(n),re().ho({environment:n,blocks:[t],originRect:o,moveToContext:"topbar_breadcrumb"})}),[n,g,t]);return s&&l?(0,P.jsx)(ae().A,{placement:se().W.Right,renderTooltip:e=>(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{children:(0,P.jsx)(u().sA,{defaultMessage:"Only you have access",id:"breadcrumb.moveTo.hasPermission.title"})}),(0,P.jsx)("div",{style:{color:c.text.contrastSecondary},children:(0,P.jsx)(u().sA,{defaultMessage:"Click to move",id:"breadcrumb.moveTo.hasPermission.subtitle"})})]}),render:e=>(0,P.jsxs)(x().p,{size:"sm",disabled:!1,onClick:p,ref:g,...e,children:[(0,ne().i)({width:16,fill:c.lightIconColor}),(0,P.jsx)("span",{style:{color:c.lightTextColor,marginLeft:4,marginRight:5},children:(0,P.jsx)(u().sA,{defaultMessage:"Private",id:"breadcrumb.moveTo.privatePages"})}),(0,te().l)({width:11,fill:c.lightIconColor})]})}):null}const de=function(e){const{ancestorMaxWidth:t,maxAncestorCount:c,currentPageMaxWidth:u,isMobile:g,showCurrentPageControls:p,store:m,style:f}=e,h=(0,i.useRef)(null),v=(0,o().v3)(),y=(0,a().IS)((()=>({container:{display:"flex",alignItems:"center",lineHeight:1.2,fontSize:g?s().J.UIRegular.mobile:s().J.UIRegular.desktop,...f},enforceMaxLength:{maxWidth:"100%"}})),[g,f]),b=(0,r().K8)((()=>{var e;return!(null===(e=m.getTitleStore())||void 0===e||!e.isReady())}),[m]),x=(0,r().K8)((()=>{const{currentSpaceViewStore:e}=d().default.state;let t;return e&&e.isReady()&&(t=(0,l().x$)(e)),t}),[]),S=(0,r().K8)((()=>!(0,l().lU)(m)&&p&&m.isReady()),[p,m]),w=(0,r().K8)((()=>{var e;return null===(e=v.mobileNative)||void 0===e?void 0:e.supportsNativeHomeOnPhone()}),[v]);return(0,r().K8)((()=>{var e;if(Boolean(v.currentUser.isLoggedIn()||v.publicDomainUserId))return!1;const t=n(578872).GN(m),i=v.RouterStore.state.route;return!(!(0,n(861017).bh)(i)||(null==t?void 0:t.id)!==m.id)||(null==t||null===(e=t.getSiteStore())||void 0===e||null===(e=e.getHeader())||void 0===e?void 0:e.hideBreadcrumbs)}),[v,m])?null:b?w?(0,P.jsx)("div",{style:{...y.container,...y.enforceMaxLength},className:"notranslate",children:(0,P.jsx)(Z,{store:m,ancestorMaxWidth:t})}):(0,P.jsxs)("div",{style:y.container,className:"notranslate shadow-cursor-breadcrumb",children:[(0,P.jsx)(K,{ancestorMaxWidth:t,maxAncestorCount:c,isMobile:g,homeStore:x,store:m}),S?(0,P.jsx)(Q,{currentPageMaxWidth:u,isMobile:g,currentPageRef:h,ref:h,store:m}):(0,P.jsx)(X,{ancestorMaxWidth:t,isMobile:g,currentPageRef:h,store:m}),(0,P.jsx)(le,{store:m})]}):null}},943647:(e,t,n)=>{n.d(t,{A:()=>y});var i=n(296540),o=()=>n(484714),r=()=>n(56366),a=()=>n(959013),s=()=>n(896628),l=()=>n(454531),d=()=>n(317909),c=()=>n(478726),u=()=>n(867772),g=()=>n(681810),p=()=>n(608581),m=()=>n(145214),f=()=>n(704152),h=()=>n(24611),v=n(474848);const y=function(e){let{store:t,disabled:a,paddingRight:l,paddingLeft:c,height:p,proxyWidth:m}=e;const f=(0,o().v3)(),h=(0,r().uB)(void 0,n(454305).A),y=(0,r().K8)((()=>a||"suggest"===n(77246).Uv.getMode(t)),[a,t]),S=(0,r().K8)((()=>t.getCover()),[t]),w=(0,r().O$)(g().A),[C,k]=(0,i.useState)(void 0);if(!S)return null;const j=w.loadingMode!==u().pF&&w.loadingMode!==u().Wc;return(0,v.jsx)(n(801678).A,{mouseStore:h,onFlushTemporaryPosition:e=>function(e,t,n){const{imagePosition:i,reset:o}=e;d().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:n,canUndo:!0,perform:e=>{s().yY({store:t,coverPosition:i,transaction:e}),o()}})}(e,t,f),renderControl:e=>{let{handleRepositionClick:n,handleSavePositionClick:i,handleCancelClick:o,isVisible:r,isRepositioning:a}=e;return(0,v.jsx)(x,{handleRepositionClick:n,handleSavePositionClick:i,handleCancelClick:o,isVisible:r,isRepositioning:a,lastProxiedUrl:C,store:t,disabled:y,paddingRight:l,paddingLeft:c,mouseStore:h})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:p,maxHeight:280,cursor:"default"},render:e=>(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)(n(360083).A,{url:S.cover,isAuthenticated:!0,permissionRecord:S.pointer,width:m,onFinishedLoadingProxyUrl:k,render:(t,i)=>{const o={width:"100%",height:p,maxHeight:280,objectFit:"cover",opacity:j?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},r={width:"100%",height:p,maxHeight:280};return(0,v.jsx)(n(307440).E,{src:i,placeholderSrc:j?w.dataURL:void 0,placeholderBehavior:j?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:r,imageStyle:o,onLoadComplete:b,testId:"pageCover"})}}),j&&(0,v.jsxs)("div",{style:n(816559).fd,children:[(0,v.jsx)(n(331542).A,{size:"md",style:{marginRight:4}}),(0,v.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:(0,v.jsx)(n(773382).A,{percentage:w.uploadProgress})})]})]})})};function b(){g().A.reset()}function x(e){let{isVisible:t,isRepositioning:n,handleCancelClick:s,handleRepositionClick:d,handleSavePositionClick:y,lastProxiedUrl:b,store:x,disabled:S,paddingRight:w,paddingLeft:C,mouseStore:k}=e;const j=(0,o().v3)(),I=(0,a().tz)(),A=(0,i.useCallback)((e=>function(e,t,n,i,o){o.reset();const r=e.target.getBoundingClientRect();l().W({environment:t,intl:n,store:i,rect:r})}(e,j,I,x,k)),[j,I,x,k]),M=(0,r().K8)((()=>g().A.state.loadingMode),[]),T=(0,r().K8)((()=>function(e){let t;return t=e.isFullWidth()?"100%":c().x6,t}(x)),[x]);if(S||M!==u().pF)return null;const{device:_}=j,{isMobile:P}=_;return(0,v.jsx)(m().A,{animate:{width:T,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,v.jsxs)(p().A,{isVisible:t,position:"bottom",style:{marginRight:w,marginLeft:C},children:[!n&&(0,v.jsx)(f().A,{style:{borderRight:P?"none":void 0,...h().k},onClick:A,children:(0,v.jsx)(a().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!n&&!P&&(0,v.jsx)(f().A,{style:{...h().k,borderRight:"none"},onClick:e=>d(e,b),children:(0,v.jsx)(a().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),n&&!P&&(0,v.jsx)(f().A,{style:h().k,onClick:y,children:(0,v.jsx)(a().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),n&&!P&&(0,v.jsx)(f().A,{style:{...h().k,borderRight:"none"},onClick:s,children:(0,v.jsx)(a().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},948049:(e,t,n)=>{n.d(t,{A:()=>S});n(296540);var i=()=>n(484714),o=()=>n(56366),r=()=>n(401497),a=()=>n(651124),s=()=>n(796073),l=()=>n(693954),d=()=>n(959013),c=()=>n(100622),u=()=>n(686526),g=()=>n(664133),p=()=>n(989423),m=()=>n(493208),f=()=>n(504836),h=()=>n(252833),v=()=>n(907514),y=()=>n(666803),b=()=>n(296798),x=n(474848);const S=function(e){let{collectionStore:t,collectionContextStore:n}=e;return(0,o().K8)((()=>t.isSyncedCollection()),[t])?(0,x.jsx)(j,{collectionStore:t,collectionContextStore:n}):null};function w(e){return{color:e.mediumTextColor,fontSize:14,lineHeight:1.2}}function C(e){let{collectionStore:t,collectionContextStore:n}=e;const a=(0,r().DP)(),g=(0,i().v3)(),p=(0,o().K8)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("syncing").getValue()),[t]),m=(0,o().K8)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("last_synced_at").getValue()),[t]),f=(0,o().K8)((()=>null==n?void 0:n.numberChildrenUnfurledStore.state),[n]),h=(0,o().K8)((()=>null==n?void 0:n.numberChildrenReceivedStore.state),[n]),y=f&&h&&f/h<1&&!g.device.isMobile,S=p&&g.device.isMobile;let C;return m&&(C=(0,x.jsx)(d().sA,{defaultMessage:"Synced {lastSyncedAt}",id:"synced.lastSyncedAt.label",values:{lastSyncedAt:(0,v().nl)(m,{useLowercase:!0})}})),"row_limit_exceeded"===p?(0,x.jsx)(b().A,{style:{display:"inline-flex",...w(a)},onClick:()=>function(e){e&&(u().Ow({collectionContextStore:e,collectionSettingsStore:e.settingsStore}),u().a2({collectionSettingsStore:e.settingsStore,item:{type:"source"}}))}(n),children:(0,x.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...w(a)},children:[(0,l().Q)({fill:(0,c().k5)("orange",a).fill,marginLeft:4,marginRight:4,width:12,alignSelf:"center"}),(0,x.jsx)(d().sA,{defaultMessage:"Partial Sync",id:"synced.partial_sync.label"})]})}):y||S?(0,x.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...w(a)},children:[(0,x.jsx)(d().sA,{defaultMessage:"Syncing",id:"synced.syncing.label"}),(0,s().$)({marginLeft:4,marginRight:4,width:12,alignSelf:"center"},"sync-spinner")]}):(0,x.jsx)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...w(a)},children:C})}function k(){const e=(0,i().v3)(),t=(0,r().IS)((e=>({span:{color:e.mediumTextColor},linkBox:{fontSize:"14px",lineHeight:1.2,color:e.blueColor,marginLeft:"5px",marginRight:"5px"}})),[]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{style:t.span,children:"•"}),(0,x.jsx)(b().A,{inline:!0,onClick:async()=>{await g().jh({environment:e,from:"collection_header"});const t=y().Ay.createNewFlowId();(0,p().u4)({environment:e,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"database_sync",flowId:t}}})},style:t.linkBox,hoveredStyle:{background:"none",textDecoration:"underline"},children:(0,x.jsx)(d().sA,{defaultMessage:"Improve your Jira sync",id:"synced.improve_jira_sync.label"})})]})}function j(e){let{collectionStore:t,collectionContextStore:n}=e;const i=(0,r().DP)(),s=(0,o().K8)((()=>t.getFormatStore().getKeyStore("original_url").getValue()),[t]),l=(0,o().K8)((()=>t.getSpaceId()),[t]),d=(0,o().K8)((()=>Boolean(t.getFormatStore().getKeyStore("sync_state").getValue())),[t]),c=(0,o().K8)((()=>s&&(0,m().e)(s,l)),[l,s]),u=(0,o().K8)((()=>(0,h().fH)(s,l)),[l,s]),g=(0,o().K8)((()=>{if(!(0,f().pB)())return!1;const e=t.getFormat().uri;return!!e&&(t.getFormat().external_collection_type!==a().uO.Jira&&(0,h().Ip)(e))}),[t]);return(0,x.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[c&&(0,x.jsx)(b().A,{href:c,style:{display:"inline-flex"},hoveredStyle:{background:"none",textDecoration:"underline"},innerStyle:{flexShrink:1,width:"none",padding:"2px 0px",marginRight:5,borderRadius:4,display:"flex",alignItems:"center",alignSelf:"center",...w(i)},external:!0,children:u}),d?(0,x.jsx)("span",{style:{color:i.mediumTextColor},children:"•"}):null,d?(0,x.jsx)(C,{collectionStore:t,collectionContextStore:n}):null,g&&(0,x.jsx)(k,{})]})}},969339:(e,t,n)=>{n.d(t,{C6:()=>a,HQ:()=>r,Yo:()=>s});var i=()=>n(645873);const o=new(i().O2)("login",(async()=>{const{default:e}=await Promise.all([n.e(23806),n.e(44711),n.e(35837),n.e(23463),n.e(89244),n.e(25049),n.e(80358),n.e(96966)]).then(n.bind(n,465209)),{default:t}=await Promise.all([n.e(23806),n.e(44711),n.e(35837),n.e(23463),n.e(89244),n.e(25049),n.e(80358),n.e(96966)]).then(n.bind(n,406370)),{default:i}=await Promise.all([n.e(23806),n.e(44711),n.e(35837),n.e(23463),n.e(89244),n.e(25049),n.e(80358),n.e(96966)]).then(n.bind(n,737515)),{default:o}=await Promise.all([n.e(23806),n.e(44711),n.e(35837),n.e(23463),n.e(89244),n.e(25049),n.e(80358),n.e(96966)]).then(n.bind(n,465833)),{default:r}=await Promise.all([n.e(23806),n.e(44711),n.e(35837),n.e(23463),n.e(89244),n.e(25049),n.e(80358),n.e(96966)]).then(n.bind(n,52542));return{LoginPage:e,LoginDesktop:t,LoginMobileNative:i,FrontLoginPage:o,LoginModalContent:r}})),r=(0,i()._h)(o,(e=>e.LoginPage)),a=(0,i()._h)(o,(e=>e.FrontLoginPage)),s=(0,i()._h)(o,(e=>e.LoginModalContent))},973633:(e,t,n)=>{n.d(t,{P:()=>o});n(296540);var i=n(474848);const o=(0,n(340498).wt)("peopleFillCheckmark",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M14.5391 10.3174C14.4115 10.3174 14.2975 10.29 14.1973 10.2354C14.097 10.1807 13.999 10.0964 13.9033 9.98242L12.29 8.01367C12.1715 7.86328 12.1123 7.70833 12.1123 7.54883C12.1123 7.38021 12.1693 7.23665 12.2832 7.11816C12.4017 6.99967 12.5452 6.94043 12.7139 6.94043C12.8141 6.94043 12.9053 6.96322 12.9873 7.00879C13.0739 7.0498 13.1582 7.12272 13.2402 7.22754L14.5117 8.84082L17.2188 4.51367C17.3555 4.28581 17.5309 4.17188 17.7451 4.17188C17.9046 4.17188 18.0482 4.22428 18.1758 4.3291C18.3034 4.42936 18.3672 4.56608 18.3672 4.73926C18.3672 4.81673 18.349 4.89648 18.3125 4.97852C18.2806 5.05599 18.2419 5.12891 18.1963 5.19727L15.1406 9.97559C14.9948 10.2035 14.7943 10.3174 14.5391 10.3174ZM2.85645 16.2441C2.47363 16.2441 2.17285 16.1576 1.9541 15.9844C1.73535 15.8112 1.62598 15.5742 1.62598 15.2734C1.62598 14.8314 1.75814 14.3688 2.02246 13.8857C2.29134 13.4027 2.67643 12.9492 3.17773 12.5254C3.68359 12.1016 4.29199 11.7575 5.00293 11.4932C5.71387 11.2288 6.51139 11.0967 7.39551 11.0967C8.28418 11.0967 9.08398 11.2288 9.79492 11.4932C10.5059 11.7575 11.112 12.1016 11.6133 12.5254C12.1191 12.9492 12.5065 13.4027 12.7754 13.8857C13.0443 14.3688 13.1787 14.8314 13.1787 15.2734C13.1787 15.5742 13.0693 15.8112 12.8506 15.9844C12.6318 16.1576 12.3311 16.2441 11.9482 16.2441H2.85645ZM7.40234 9.87988C6.9056 9.87988 6.44759 9.74544 6.02832 9.47656C5.61361 9.20768 5.27865 8.84538 5.02344 8.38965C4.77279 7.93392 4.64746 7.4235 4.64746 6.8584C4.64746 6.30241 4.77279 5.80111 5.02344 5.35449C5.27865 4.90332 5.61589 4.54557 6.03516 4.28125C6.45443 4.01693 6.91016 3.88477 7.40234 3.88477C7.89909 3.88477 8.3571 4.01465 8.77637 4.27441C9.19564 4.53418 9.5306 4.88965 9.78125 5.34082C10.0365 5.78743 10.1641 6.28874 10.1641 6.84473C10.1641 7.41439 10.0365 7.92936 9.78125 8.38965C9.5306 8.84538 9.19564 9.20768 8.77637 9.47656C8.3571 9.74544 7.89909 9.87988 7.40234 9.87988Z"})})},980151:(e,t,n)=>{n.d(t,{WO:()=>u,_V:()=>g,hK:()=>p});var i=()=>n(869558),o=()=>n(854150),r=()=>n(317909),a=()=>n(559102),s=()=>n(100875),l=()=>n(162674),d=()=>n(710857),c=()=>n(351360);function u(e){const{environment:t,currentSpaceViewStore:n,...i}=e;if(!n.getModel())return;const o=!(0,d().x)(n)[e.feature];r().createAndCommit({userAction:"userHomeActions.toggleHomeFeature",environment:t,canUndo:!0,perform:t=>{r().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings","personal_home","enabled_features"],command:"update",args:{[e.feature]:o}},transaction:t})}}),(0,l().f_)({environment:t,show:o,...i})}function g(e){let{environment:t,option:n,from:i,userAction:o}=e;const a=c().default.state.currentSpaceViewStore;if(!a)return!1;const d=a.getOnAppStartStore().getValue();return r().createAndCommit({userAction:o,environment:t,canUndo:!0,perform:e=>{r().applyOperation({store:a,operation:{pointer:a.pointer,path:["settings","on_app_start"],command:"set",args:n},transaction:e})}}),(0,s().cq)({spaceView:a.getModel(),preference:n}),(0,l().lr)({environment:t,oldValue:d,newValue:n,from:i}),!0}function p(e){const{environment:t,selectedStore:n,currentSpaceViewStore:s,collectionContextStore:d}=e,c=d.collectionViewStore(),u=d.collectionStore(),g=d.collectionViewBlockStore();if(!(u&&c&&g&&s))return;const p=s.getTeamsStores(),m=n.table===o().yK?p.indexOf(n)+1:0,f=n.table===o().yK?n.id:void 0;r().createAndCommit({environment:t,userAction:"PersonalHomeTrendingPanel.setCollectionViewSourceTeamId",canUndo:!0,perform:e=>{r().applyOperation({store:c,operation:{pointer:{id:c.id,table:i().Gy},path:["format","collection_view_source","teamId"],command:"set",args:f},transaction:e}),(0,a().d)({environment:t,collectionViewBlockStore:g,collectionViewStore:c,collectionStore:u,collectionContextStore:d,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1,viewsModuleContext:void 0})}}),(0,l().AP)({environment:t,teamId:f,index:m})}},997513:(e,t,n)=>{n.d(t,{z:()=>p});var i=n(296540),o=()=>n(484714),r=()=>n(56366),a=()=>n(401497),s=()=>n(959013),l=()=>n(107683),d=()=>n(2143),c=()=>n(969339),u=()=>n(756279),g=n(474848);function p(e){let{loginModalStore:t,loginStore:n,title:a,description:s,isSignup:d,disableLoginLink:u,redirectURL:p,className:v,onDismiss:y,trustedDomain:b}=e;const x=(0,o().v3)(),S=(0,r().K8)((()=>t.state.open),[t]),w=(0,i.useId)(),C=(0,i.useId)(),k={loginStore:n,title:a,description:s,isSignup:d,redirectURL:p,disableLoginLink:u,titleAriaId:w,descriptionAriaId:C,trustedDomain:b};return(0,g.jsx)(l().s,{ariaLabelledBy:w,ariaDescribedBy:C,isOpen:S,onDismiss:()=>{h({loginModalStore:t,loginStore:n,onDismiss:y})},areaConstraint:{width:{type:"fixed",length:480},height:{type:"unlimited",scroll:"allow"}},deprecatedCompatibilityOverrides:{tabletsUsePhoneDisplayMode:!0},render:()=>(0,g.jsx)(m,{children:(0,g.jsxs)("div",{className:v,children:[!x.device.isMobile&&(0,g.jsx)(f,{loginModalStore:t,loginStore:n,onDismiss:y}),(0,g.jsx)(c().Yo,{...k})]})})})}function m(e){let{children:t}=e;return(0,o().v3)().device.isMobile?(0,g.jsx)(d().H,{type:u().A.Y,children:t}):t}function f(e){let{loginModalStore:t,loginStore:n,onDismiss:i}=e;const o=(0,a().DP)();return(0,g.jsx)("div",{style:{fontSize:14,color:o.mediumTextColor,position:"absolute",right:0,marginTop:16,marginRight:16,cursor:"pointer",zIndex:1},onClick:()=>{h({loginModalStore:t,loginStore:n,onDismiss:i})},children:(0,g.jsx)(s().sA,{defaultMessage:"Cancel",id:"sidebarSwitcherMultiAccount.addAccountModal.cancelButton.label"})})}function h(e){const{loginModalStore:t,loginStore:n,onDismiss:i}=e;n.reset(),t.setState({open:!1}),i&&i()}}}]);