"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[9034],{112698:(e,s,t)=>{t.d(s,{B:()=>g});t(296540);var i=()=>t(484714),o=()=>t(56366),n=()=>t(401497),a=()=>t(959013),r=()=>t(100622),l=()=>t(534177),d=()=>t(284371),c=()=>t(824160),u=()=>t(859428),p=()=>t(962730),m=()=>t(351360),b=()=>t(991249),f=t(474848);function g(e){let{upsell:s,mobileStyle:t,desktopStyle:g,analyticsName:h,onClick:v,disableTooltip:y}=e;const C=(0,n().DP)(),x=(0,i().v3)(),{device:_}=x,A=(0,o().K8)((()=>{const{currentSpaceStore:e}=m().default.state;return null==e?void 0:e.canAdmin()}),[]),M=(0,o().K8)((()=>function(e,s){if("product"!==e.type)return{};switch(e.product){case"plus":case"business":case"enterprise":return{color:s.blueColor,background:"light"===s.mode?r().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:d().Wy.medium};default:return{}}}(s,C)),[s,C]);if("product"!==s.type)return null;if(_.isMobileNative)return null;const w=(()=>{switch(s.product){case"personal":return(0,f.jsx)(a().sA,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"});case"plus":return(0,f.jsx)(a().sA,{defaultMessage:"Plus ↗",id:"upgradeButton.plus.textWithArrow"});case"business":return(0,f.jsx)(a().sA,{defaultMessage:"Business ↗",id:"upgradeButton.business.textWithArrow"});case"enterprise":return(0,f.jsx)(a().sA,{defaultMessage:"Enterprise ↗",id:"upgradeButton.enterprise.textWithArrow"});case"ai":return(0,f.jsx)(a().sA,{defaultMessage:"AI ↗",id:"upgradeButton.ai.textWithArrow"});case"sites_custom_hostnames":return(0,f.jsx)(a().sA,{defaultMessage:"Custom Hostnames ↗",id:"upgradeButton.sites_custom_hostnames.textWithArrow"});default:(0,l().HB)(s.product)}})();return _.isMobile||!A?(0,f.jsx)(c().A,{mobileStyle:t,children:w}):(0,f.jsx)(u().A,{delayThreshold:120,disableTooltip:y,placement:p().W.Bottom,renderTooltip:()=>(0,f.jsx)("div",{style:{maxWidth:500},children:(0,f.jsx)(a().sA,{defaultMessage:"Upgrade to use this feature.",id:"premiumFeatureUpgradeButton.upgrade.tooltip"})}),originGap:6,render:e=>(0,f.jsx)(c().A,{desktopStyle:g,innerStyle:M,onClick:e=>function(e,s,t,i,o){b().K(i,{from:s,upsell:t}),o&&o(e)}(e,h,s,x,v),...e,children:w})})}},159026:(e,s,t)=>{t.d(s,{Ay:()=>a,NJ:()=>i,d5:()=>o});t(898992),t(354520),t(581454),t(737550);let i=function(e){return e.unselected="unselected",e.workspace_member="workspace_member",e.request_workspace_member="request_workspace_member",e.page_guest="page_guest",e.closed="closed",e}({}),o=function(e){return e[e.closed=0]="closed",e[e.share_page=1]="share_page",e[e.share_workspace=2]="share_workspace",e[e.request_workspace=3]="request_workspace",e}({});class n extends(()=>t(757695))().default{getInitialState(){return{inviteStage:o.closed,selection:i.workspace_member,order:[i.workspace_member,i.page_guest],invitedUsers:[],invitedEmailToUserIdMap:{},flowId:t(206267).JW()}}startWorkspaceInvite(){this.setState({...this.state,inviteStage:o.share_workspace,order:[i.workspace_member,i.page_guest],selection:i.workspace_member})}startRequestMembership(){this.setState({...this.state,inviteStage:o.request_workspace,order:[i.request_workspace_member,i.page_guest],selection:i.request_workspace_member})}hasGuests(){return this.state.invitedUsers.some((e=>e.isGuest))}getGuestEmails(){return this.state.invitedUsers.filter((e=>e.isGuest)).map((e=>e.email))}}const a=n},192421:(e,s,t)=>{t.d(s,{F:()=>d});t(296540);var i=()=>t(484714),o=()=>t(433847),n=()=>t(959013),a=()=>t(583690),r=()=>t(678553),l=t(474848);function d(e){const{role:s}=e,t=(0,n().tz)(),{device:d}=(0,i().v3)(),c=(0,a().I2)(s);return(0,l.jsx)(r().A,{...e,title:t.formatMessage((0,o().sK)(s,void 0).label),shouldWrapCaption:!0,style:d.isMobile?{padding:"12px 4px"}:{padding:4,marginTop:2,marginBottom:2},captionStyle:{marginTop:4},caption:(0,l.jsx)("div",{children:c})})}},328347:(e,s,t)=>{t.d(s,{h:()=>o});t(296540);var i=t(474848);const o=(0,t(340498).wt)("globe2",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM3.88477 3.76465C4.56836 3.11523 5.39551 2.61621 6.31836 2.34277C5.83301 2.82812 5.42285 3.51172 5.11523 4.3457C4.63672 4.19531 4.22656 3.99707 3.88477 3.76465ZM9.68848 2.34961C10.6045 2.62305 11.4316 3.11523 12.1084 3.76465C11.7734 4.00391 11.3633 4.19531 10.8848 4.35254C10.5771 3.51172 10.167 2.82812 9.68848 2.34961ZM8.47852 2.56836C9.0459 2.8418 9.56543 3.58008 9.93457 4.58496C9.4834 4.66699 8.99805 4.71484 8.47852 4.73535V2.56836ZM6.06543 4.58496C6.44141 3.58008 6.9541 2.8418 7.52148 2.56836V4.73535C7.00195 4.71484 6.5166 4.66699 6.06543 4.58496ZM2.05273 7.58594C2.14844 6.42383 2.58594 5.35059 3.25586 4.46875C3.67285 4.77637 4.21289 5.04297 4.8418 5.24121C4.66406 5.95215 4.54785 6.74512 4.51367 7.58594H2.05273ZM11.4863 7.58594C11.4521 6.74512 11.3359 5.95215 11.1582 5.24121C11.7871 5.04297 12.3271 4.7832 12.7373 4.46875C13.4141 5.35059 13.8516 6.42383 13.9473 7.58594H11.4863ZM5.49121 7.58594C5.52539 6.84082 5.62793 6.12988 5.78516 5.4873C6.33203 5.59668 6.91309 5.66504 7.52148 5.69238V7.58594H5.49121ZM8.47852 7.58594V5.69238C9.08691 5.66504 9.66797 5.59668 10.2148 5.4873C10.3721 6.12988 10.4746 6.84082 10.5088 7.58594H8.47852ZM2.05273 8.54297H4.51367C4.54785 9.39746 4.66406 10.1973 4.8418 10.915C4.21973 11.1133 3.68652 11.373 3.27637 11.6807C2.59277 10.792 2.14844 9.71191 2.05273 8.54297ZM5.49121 8.54297H7.52148V10.4707C6.91992 10.498 6.33203 10.5664 5.79199 10.6689C5.62793 10.0195 5.51855 9.29492 5.49121 8.54297ZM8.47852 10.4707V8.54297H10.5088C10.4814 9.29492 10.3721 10.0195 10.208 10.6689C9.66797 10.5664 9.08691 10.498 8.47852 10.4707ZM11.1582 10.915C11.3428 10.1973 11.4521 9.39746 11.4863 8.54297H13.9473C13.8516 9.71191 13.4072 10.792 12.7236 11.6807C12.3135 11.373 11.7803 11.1133 11.1582 10.915ZM8.47852 11.4277C8.99121 11.4482 9.47656 11.4961 9.9209 11.5781C9.55176 12.5625 9.03906 13.2939 8.47852 13.5605V11.4277ZM6.0791 11.5781C6.52344 11.4961 7.00879 11.4482 7.52148 11.4277V13.5605C6.96094 13.2939 6.44824 12.5625 6.0791 11.5781ZM3.90527 12.3848C4.24023 12.1523 4.65039 11.9609 5.12207 11.8105C5.42969 12.6309 5.83301 13.3008 6.30469 13.7793C5.40234 13.5059 4.58203 13.0205 3.90527 12.3848ZM10.8779 11.8105C11.3496 11.9609 11.7598 12.1523 12.0947 12.3848C11.418 13.0205 10.5977 13.5059 9.69531 13.7793C10.167 13.3008 10.5703 12.6309 10.8779 11.8105Z"})})},583690:(e,s,t)=>{t.d(s,{AC:()=>u,I2:()=>d,YC:()=>c});t(296540);var i=()=>t(401497),o=()=>t(212050),n=()=>t(413267),a=()=>t(959013),r=t(474848);function l(e){const{enabled:s,labelIfEnabled:t,labelIfDisabled:o}=e,n=(0,i().IS)((e=>({container:{color:s?e.mediumTextColor:e.lightTextColor}})),[s]);return(0,r.jsxs)("div",{style:n.container,children:[p(s)," ",s?t:o]})}function d(e){const s="none"!==e;return[(0,r.jsx)(l,{enabled:s&&e.read_content,labelIfEnabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.mixedAccess.readContent.enabled",defaultMessage:"Can read content."}),labelIfDisabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.mixedaccess.readContent.disabled",defaultMessage:"Cannot read content."})},"read_content"),(0,r.jsx)(l,{enabled:s&&e.insert_content,labelIfEnabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.enabled",defaultMessage:"Can insert content."}),labelIfDisabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.disabled",defaultMessage:"Cannot insert content."})},"insert_content"),(0,r.jsx)(l,{enabled:s&&e.update_content,labelIfEnabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.enabled",defaultMessage:"Can update content."}),labelIfDisabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.disabled",defaultMessage:"Cannot update content."})},"update_content"),(0,r.jsx)(l,{enabled:s&&e.insert_comment,labelIfEnabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.insertComment.enabled",defaultMessage:"Can comment."}),labelIfDisabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.insertComment.disabled",defaultMessage:"Cannot comment."})},"insert_comment"),(0,r.jsx)(l,{enabled:s&&e.read_comment,labelIfEnabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.readComment.enabled",defaultMessage:"Can read comments."}),labelIfDisabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.readComment.disabled",defaultMessage:"Cannot read comments."})},"read_comment")]}function c(e){return[(0,r.jsx)(l,{enabled:e.read_user_without_email,labelIfEnabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.userAccess.readUsers.enabled",defaultMessage:"Can view users."}),labelIfDisabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.userAccess.readUsers.disabled",defaultMessage:"Cannot view users."})},"read_user_without_email"),(0,r.jsx)(l,{enabled:e.read_user_with_email,labelIfEnabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.enabled",defaultMessage:"Can view user email addresses."}),labelIfDisabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.disabled",defaultMessage:"Cannot view user email addresses."})},"read_user_with_email")]}function u(e){return[(0,r.jsx)(l,{enabled:e.link_preview,labelIfEnabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.linkPreview.enabled",defaultMessage:"Can preview links."}),labelIfDisabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.linkPreview.disabled",defaultMessage:"Cannot preview links."})},"link_preview"),(0,r.jsx)(l,{enabled:e.synced_database,labelIfEnabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.syncedDatabase.enabled",defaultMessage:"Can sync databases."}),labelIfDisabled:(0,r.jsx)(a().sA,{id:"capabilitiesTooltip.syncedDatabase.disabled",defaultMessage:"Cannot sync databases."})},"synced_database")]}function p(e){const s={width:12,display:"inline",verticalAlign:"middle"};return e?(0,n().b)(s):(0,o().u)(s)}},747788:(e,s,t)=>{t.d(s,{R:()=>y,Y:()=>v});t(296540);var i=()=>t(484714),o=()=>t(56366),n=()=>t(401497),a=()=>t(883234),r=()=>t(568625),l=()=>t(433847),d=()=>t(946064),c=()=>t(96689),u=()=>t(959013),p=()=>t(100622),m=()=>t(534177),b=()=>t(963589),f=()=>t(663590),g=()=>t(493823),h=t(474848);function v(e){let{type:s,role:t,events:l,disabled:d,buttonStyle:c,buttonContents:p,icon:m,table:v,isCurrentUser:C,from:x}=e;const{isMobile:_}=(0,i().Y0)(),A=(0,n().IS)((e=>({button:{...c},icon:{width:10,marginLeft:4,fill:e.lightIconColor},label:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},iconContainer:{fill:e.icon.secondary,padding:2}})),[c]),M=m||!d&&a()._,w=(0,o().K8)((()=>"shareMenu"===x&&(0,f().FI)()),[x]),k=(0,b().X)("sharing_anyone_with_the_link");return _&&"shareMenu"===x&&w?d?null:(0,h.jsx)(g().p,{...l,disabled:d,style:A.iconContainer,children:(0,r().L)({height:24,width:24})}):(0,h.jsxs)(g().p,{id:void 0,...l,disabled:d,style:A.button,children:[p||(0,h.jsx)("span",{className:"notranslate",style:A.label,children:(0,h.jsx)(u().sA,{...y({type:s,role:t,table:v,isRemovable:!1,isCurrentUser:C,isRedesignEnabled:w,isPublicShareLink:k}).label})}),M&&M(A.icon)]})}function y(e){let{type:s,role:t,table:i,isRemovable:o,isCurrentUser:n,isRedesignEnabled:a,isPublicShareLink:r}=e;if("access"===t)return{label:l().Sf.variousAccessLabel};if("limited"===t)return{label:l().Sf.limitedAccessLabel};if((0,l().II)(t))return(0,l().sK)(t,i);switch(t){case"editor":return i===c().NX||i===d().y7?{label:l().Sf.workspaceOwnerLabel,caption:l().Sf.workspaceOwnerCaption}:{label:l().Sf.fullAccessLabel,caption:a?l().Sf.fullAccessCaptionV2:l().Sf.fullAccessCaption};case"membership_admin":return i===c().NX||i===d().y7?{label:l().Sf.membershipAdminLabel,caption:l().Sf.membershipAdminCaption}:{label:l().Sf.canEditLabel,caption:a?l().Sf.canEditCaptionV2:l().Sf.canEditCaption};case"read_and_write":return i===c().NX||i===d().y7?{label:l().Sf.memberLabel,caption:l().Sf.memberCaption}:{label:l().Sf.canEditLabel,caption:a?l().Sf.canEditCaptionV2:l().Sf.canEditCaption};case"content_only_editor":return{label:l().Sf.canEditContentLabel,caption:l().Sf.canEditContentCaption};case"reader":return{label:l().Sf.canReadLabel,caption:a?void 0:l().Sf.canReadCaption};case"comment_only":return{label:l().Sf.canCommentLabel,caption:a?l().Sf.canCommentCaptionV2:l().Sf.canCommentCaption};case"none":return"public_permission"===s?r?{label:o?l().Sf.publicShareLinkRemoveLabel:l().Sf.publicShareLinkNoAccessLabel,hideSelectionCheckIcon:o}:{label:a?l().Sf.unpublishPageLabelV2:l().Sf.unpublishPageLabel,caption:l().Sf.unpublishPageCaption}:o?i===c().NX||i===d().y7?n?{label:l().Sf.leaveWorkspaceLabel,style:{color:p().Ay.red}}:{label:l().Sf.removeFromWorkspaceLabel,style:{color:p().Ay.red}}:{label:l().Sf.removeWorkspaceLabel,style:{color:p().Ay.red}}:{label:l().Sf.noAccessLabel,style:{color:p().Ay.red}};default:(0,m().HB)(t)}}},883234:(e,s,t)=>{t.d(s,{_:()=>o});t(296540);var i=t(474848);const o=(0,t(340498).wt)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,i.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},912913:(e,s,t)=>{t.d(s,{Ay:()=>Y});t(944114),t(898992),t(354520),t(672577),t(430670),t(581454),t(296540);var i=()=>t(484714),o=()=>t(56366),n=()=>t(401497),a=()=>t(148307),r=()=>t(831310),l=()=>t(413267),d=()=>t(433847),c=()=>t(68263),u=()=>t(519831),p=()=>t(946064),m=()=>t(96689),b=()=>t(959013),f=()=>t(534177),g=()=>t(701763),h=()=>t(901389),v=()=>t(780054),y=()=>t(38337),C=()=>t(972435),x=()=>t(722872),_=()=>t(553965),A=()=>t(731320),M=()=>t(836251),w=()=>t(11978),k=()=>t(928074),j=()=>t(962730),S=()=>t(351360),I=()=>t(991249),R=()=>t(859428),P=()=>t(112698),T=t(474848);function B(e){const s=(0,i().v3)(),{render:t,upsell:o,analyticsName:n,renderUpgradeTooltip:a,onUpgradeClick:r,alwaysAllowClick:l,tooltipPlacement:d,upgradeButtonDesktopStyle:c,upgradeButtonMobileStyle:u}=e;let p,{onClick:m,renderTooltip:b}=e;return o&&"product"===o.type&&(p=(0,T.jsx)(P().B,{upsell:o,analyticsName:n,desktopStyle:{display:"inline-block",pointerEvents:"none",...c},mobileStyle:{display:"inline-block",pointerEvents:"none",...u}}),l||(m=e=>{I().K(s,{from:n,upsell:o}),r&&r(e)},b=a)),(0,T.jsx)(R().A,{renderTooltip:b||(()=>null),render:e=>t((0,_().A)(e,{onClick:m}),p),disableTooltip:!b,placement:d})}var L=()=>t(807778),U=()=>t(134217),W=()=>t(10984),E=()=>t(597898),O=()=>t(760217),D=()=>t(406699),N=()=>t(928600),F=()=>t(939740),K=()=>t(824160),Z=()=>t(89924),V=()=>t(125565),H=()=>t(719147),X=()=>t(747788),q=()=>t(103448);const G=(0,b().YK)({fullAccessTeamGuestsDisabledMessage:{id:"permissionRoleSelect.teamGuestPermissionItem.disabledPermissionitem.tooltip",defaultMessage:"Teamspace guests can't have full access."}});const Y=function(e){let{isUserPermission:s,type:a,table:r,role:l,isInvite:g,availableRoleItems:h,roleItemOverrides:v,blockType:_,onClick:M,onClose:w,origin:k,isMenuItem:j,isRemovableOverride:S,disabled:I,buttonContents:R,buttonPopupStore:P,buttonStyle:B,placementToOrigin:L,alignmentToOrigin:U,upgradeButtonName:W,onUpgradeButtonClick:E,onChange:K,onRemoveMemberClick:H,onRemoveSelfClick:q,header:Y,footer:z,showPermissionOverrideWarning:$,from:se}=e;const te=(0,i().v3)(),ie=(0,o().uB)(P,t(463830).A),{device:oe}=te,ne=!!s,ae=(0,t(963589).X)("sharing_anyone_with_the_link"),re=(0,o().K8)((()=>function(e){let{type:s,table:t,role:i,isInvite:o,availableRoleItems:n,roleItemOverrides:a,blockType:r,isPublicShareLink:l}=e;if(n&&n.length>0)return n;if("trusted_domain_permission"===s)return[{role:"reader"},{role:"none"}];if(t===u().Vl)return[{role:"editor"},{role:"read_and_write"},{role:"content_only_editor"},{role:"comment_only"},{role:"reader"},{role:"none"}];if(t===p().y7){let e=c().Gb.map((e=>({role:e})));return o&&(e=e.filter((e=>"none"!==e.role))),e}const d=[];"explicit_team_guest_permission"===s?d.push({role:"editor",disabledInfo:{isDisabled:!0,disabledMessage:C().A.formatMessage(G.fullAccessTeamGuestsDisabledMessage)}}):"bot_permission"!==s&&"public_permission"!==s&&d.push({role:"editor"});"space"===t&&(0,A().Qu)()&&d.push({role:"membership_admin"});d.push({role:"read_and_write"}),"collection_view"!==r&&"collection_view_page"!==r||"bot_permission"===s&&"content_only_editor"!==i||"public_permission"===s||d.push({role:"content_only_editor"});t!==m().NX&&("bot_permission"!==s&&d.push({role:"comment_only"}),"bot_permission"===s&&"reader"!==i||d.push({role:"reader"}));o||d.push({role:"none"});if(!a)return d;return d.map((e=>{const s=a.find((s=>s.role===e.role));return s||e}))}({type:a,table:r,role:l,isInvite:g,availableRoleItems:h,roleItemOverrides:v,blockType:_,isPublicShareLink:ae})),[a,r,l,g,h,v,_,ae]),le=(0,o().K8)((()=>"shareMenu"===se&&(0,t(663590).FI)()),[se]),de=(0,o().K8)((()=>oe.isMobile&&le),[oe,le]),ce=(0,o().K8)((()=>ie.state.open),[ie]),ue=(0,n().IS)((e=>({buttonPopupSheet:{borderTopLeftRadius:12,borderTopRightRadius:12,overflow:"hidden",paddingBottom:10,background:e.surface.wash},menuList:{width:"100%",margin:"0 auto"},sectionMenuItem:{overflow:"hidden",background:e.buttonBackground,borderRadius:12,marginLeft:16,marginRight:16,marginBottom:16,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,padding:void 0},scrollerStyle:{background:e.surface.wash},header:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:e.surface.wash,paddingTop:12,paddingBottom:20},headerLabel:{fontSize:16,fontWeight:t(284371).Wy.semibold,marginBottom:12},headerContent:{width:"100%"}})),[]);return(0,T.jsx)(D().Ay,{style:de?ue.buttonPopupSheet:void 0,onClick:e=>{e.preventDefault(),e.stopPropagation(),M&&M()},onClose:w,popupType:oe.isMobile?D().z7.SlideUp:D().z7.Popup,buttonPopupStore:ie,open:ce,renderOrigin:e=>k||(j?(0,T.jsx)(O().A,{...e,title:(0,T.jsx)(b().sA,{...(0,X().R)({type:a,role:l,table:r,isRemovable:!1,isCurrentUser:ne,isRedesignEnabled:le,isPublicShareLink:ae}).label}),focused:!1,showExtensionArrow:!0}):(0,T.jsx)(X().Y,{type:a,role:l,events:e,disabled:I,buttonContents:R,buttonStyle:B,table:r,isCurrentUser:ne,from:se})),placementToOrigin:L||t(700250).UV.Bottom,alignmentToOrigin:U,render:e=>{let i,o;if((0,d().II)(l))i=[{key:"mixed_role_section",render:e=>(0,T.jsx)(Z().A,{...e,topBorder:!1}),items:[{key:"mixed_role_description",render:()=>(0,T.jsx)(t(192421).F,{role:l}),action:()=>{}}]},{key:"bot_capabilities_warning",render:e=>(0,T.jsx)(Z().A,{...e,topBorder:!0}),items:[{key:"warning_details",render:e=>(0,T.jsx)(t(678553).A,{...e,shouldWrapCaption:!0,caption:"Integration permissions cannot be changed on a page. You can manage integrations in settings."}),action:()=>{}}]},{key:"remove_bot",render:e=>(0,T.jsx)(Z().A,{...e,topBorder:!0}),items:[{key:"none",render:e=>(0,T.jsx)(Q,{from:se,role:l,upgradeButtonName:W,onUpgradeButtonClick:E,focused:e.focused,props:e,availableRole:{role:"none"},isCurrentUser:!!s,isRemovableOverride:S,table:r,type:a,isRedesignEnabled:le,isPublicShareLinkEnabled:ae}),action:()=>{J("none",r,l,a,W,te,re,ae,K,E,s,H,q),e.close()}}]}];else if(i=[{key:"roles",render:e=>(0,T.jsx)(Z().A,{...e,topBorder:0!==e.index,style:de?ue.sectionMenuItem:void 0}),items:re.flatMap((t=>{const i={key:t.role,render:e=>(0,T.jsx)(Q,{from:se,role:l,upgradeButtonName:W,onUpgradeButtonClick:E,focused:e.focused,props:e,availableRole:t,isCurrentUser:!!s,isRemovableOverride:S,table:r,type:a,isRedesignEnabled:le,isPublicShareLinkEnabled:ae}),action:()=>{J(t.role,r,l,a,W,te,re,ae,K,E,s,H,q),e.close()}};return le&&"none"===t.role?[]:[t.prefixItem,i].filter(f().O9)}))}],le){const t=re.find((e=>"none"===e.role));(null==t?void 0:t.prefixItem)&&!oe.isMobile&&i.push({key:"prefix-item",render:e=>(0,T.jsx)(Z().A,{...e,topBorder:!0,style:de?ue.sectionMenuItem:void 0}),items:[null==t?void 0:t.prefixItem].filter(f().O9)});const o=re.filter((e=>"none"===e.role));o.length>0&&i.push({key:"none-role",render:e=>(0,T.jsx)(Z().A,{...e,topBorder:!(oe.isMobile&&le),style:de?ue.sectionMenuItem:void 0}),items:o.flatMap((t=>{const i={key:t.role,render:e=>(0,T.jsx)(Q,{from:se,role:l,upgradeButtonName:W,onUpgradeButtonClick:E,focused:e.focused,props:e,availableRole:t,isCurrentUser:!!s,isRemovableOverride:S,table:r,type:a,isRedesignEnabled:le,isPublicShareLinkEnabled:ae}),action:()=>{J(t.role,r,l,a,W,te,re,ae,K,E,s,H,q),e.close()}};return oe.isMobile?[t.prefixItem,i].filter(f().O9):[i].filter(f().O9)}))})}return o=oe.isMobile?{menuType:x().gu.Modal,title:(0,T.jsx)(b().sA,{id:"userPermissionsMenu.mobile.title",defaultMessage:"Select role"}),right:(0,T.jsx)(b().sA,{id:"userPermissionsMenu.mobile.doneButton.label",defaultMessage:"Done"}),onClickRight:e.close}:{menuType:x().gu.Popup,width:264},de?(0,T.jsx)(N().A,{scrollerStyle:ue.scrollerStyle,menuType:x().gu.Popup,height:"50vh",maxWidth:"100%",className:y().yw8,header:(0,T.jsxs)("div",{style:ue.header,children:[(0,T.jsx)(V().A,{style:ue.headerLabel,children:(0,T.jsx)(b().sA,{defaultMessage:"Change access",id:"PermissionRoleSelect.Header.ChangeAccess"})}),(0,T.jsx)("div",{style:ue.headerContent,children:Y})]}),footer:(0,T.jsx)(T.Fragment,{children:z}),children:(0,T.jsx)(F().Ay,{type:F().Oh.Vertical,initialFocus:void 0,sections:i,style:ue.menuList})}):(0,T.jsx)(N().A,{className:y().yw8,header:Y,footer:(0,T.jsxs)(T.Fragment,{children:[z,$&&(0,T.jsx)(ee,{})]}),...o,children:(0,T.jsx)(F().Ay,{type:F().Oh.Vertical,initialFocus:void 0,sections:i})})}})};function z(e,s,t,i){if(!i&&s!==p().y7){if((s===m().NX?c().NB(e):c().p2(e)&&!c().Km(e))&&"public_permission"!==t&&"bot_permission"!==t)return s===m().NX?(0,T.jsx)(q().A,{imageURL:a().A.images.tooltips.upsells.spaceReadAndWritePng,imageWidth:240,imageHeight:100,caption:(0,T.jsx)(b().sA,{defaultMessage:"Members cannot change workspace settings or invite new members.",id:"permissionRoleSelect.spaceReadAndWriteUpgradeTooltip.caption"}),title:(0,T.jsx)(b().sA,{defaultMessage:"Upgrade to add non-admin members",id:"permissionRoleSelect.spaceReadAndWriteUpgradeTooltip.title"})}):(0,T.jsx)(q().A,{imageURL:a().A.images.tooltips.upsells.userReadAndWritePng,imageWidth:240,imageHeight:100,caption:(0,T.jsx)(b().sA,{defaultMessage:"Users with edit access can edit a page but not share it with others.",id:"permissionRoleSelect.userReadAndWriteUpgradeTooltip.caption"}),title:(0,T.jsx)(b().sA,{defaultMessage:"Upgrade to add editors",id:"permissionRoleSelect.userReadAndWriteUpgradeTooltip.title"})})}return!1}function $(e,s){if(void 0!==s)return s;switch(e){case"user_permission":case"bot_permission":case"group_permission":return!0;case"space_permission":case"explicit_team_permission":case"team_permission":case"team_owner_permission":case"explicit_team_owner_permission":case"explicit_team_guest_permission":case"public_permission":case"trusted_domain_permission":case"exclusive_user_permission":return!1;default:(0,f().HB)(e)}}async function J(e,s,t,i,o,n,a,r,l,c,u,f,y){var C,x;const _=(0,k().u)();if(t===e)return;const A=()=>{l&&l(e)};g().Uo({newRole:e,availableRoles:a});const w=await(0,E().Se)(n,{name:"block_read_and_write_role",spaceId:null===(C=S().default.state.currentSpaceStore)||void 0===C?void 0:C.id,userId:null===(x=S().default.state.currentUserStore)||void 0===x?void 0:x.id});if(z(e,s,i,w)&&!v().A.isAdminMode)I().K(n,{from:o,upsell:{type:"product",product:U().Si(n)||"plus",limit:{type:"none"}}}),c&&c();else if(function(e,s,t){return t&&(0,d().$q)(s,e)===s&&"none"===e}(e,t,u))y?y():h().ui({showCancel:!0,keepFocus:!1,message:s===m().NX||s===p().y7?(0,T.jsx)(b().sA,{id:"userPermissionsMenu.removePermissionsModal.removeSelfFromWorkspace.confirmationMessage",defaultMessage:"Are you sure you want to remove your own access? You will lose access to the workspace, and any private pages will be lost."}):(0,T.jsx)(b().sA,{id:"userPermissionsMenu.removePermissionsModal.removeSelfFromPage.confirmationMessage",defaultMessage:"Are you sure you want to remove your own access?"}),items:[{label:(0,T.jsx)(b().sA,{id:"userPermissionsMenu.removePermissionsModal.removeSelfButton.label",defaultMessage:"Remove"}),color:"red",onAccept:A}]});else if(function(e,s,t){return t&&(0,d().$q)(s,e)===s}(e,t,u))h().ui({showCancel:!0,keepFocus:!1,message:(0,T.jsx)(b().sA,{id:"userPermissionsMenu.downgradePermissionsModal.downgradeSelfFromWorkspaceOrPage.confirmationMessage",defaultMessage:"Are you sure you want to downgrade your own access?"}),items:[{label:(0,T.jsx)(b().sA,{id:"userPermissionsMenu.downgradePermissionsModal.downgradeSelfButton.label",defaultMessage:"Downgrade"}),color:"red",onAccept:A}]});else if(function(e,s){return(s===m().NX||s===p().y7)&&"none"===e}(e,s))if(f)f();else{await async function(e){const{message:s}=e;return new Promise((e=>{h().ui({showCancel:!0,keepFocus:!1,handleCancel:()=>e(!1),message:s,items:[{label:(0,T.jsx)(b().sA,{id:"userPermissionsMenu.removePermissionsModal.removeUserButton.label",defaultMessage:"Remove"}),color:"red",onAccept:()=>e(!0)}]})}))}({message:(j=!0,j&&(0,W().OX)()?(0,T.jsx)(b().sA,{id:"userPermissionsMenu.removePermissionsModal.removeUserFromWorkspace.enterprise.confirmationMessage",defaultMessage:"If you remove this member, they will lose workspace access. After their removal, you may transfer their private pages to another member. <transferpagelink>Learn more</transferpagelink>.",values:{transferpagelink:e=>(0,T.jsx)(H().A,{href:(0,M().xS)("guides.transferContent"),external:!0,children:e})}}):j?(0,T.jsx)(b().sA,{id:"userPermissionsMenu.removePermissionsModal.removeUserFromWorkspace.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to the workspace, and any private pages will be lost."}):(0,T.jsx)(b().sA,{id:"userPermissionsMenu.removePermissionsModal.removeUserFromPage.confirmationMessage",defaultMessage:"Are you sure you want to remove this person?"}))})&&A()}else if(function(e,s){return"public_permission"===e&&"none"===s}(i,e)&&_&&!r){await async function(){return new Promise((e=>{h().ui({showCancel:!0,keepFocus:!1,handleCancel:()=>e(!1),description:(0,T.jsx)(b().sA,{id:"permissionRoleSelect.unpublishConfirmation.description",defaultMessage:"Removing access will unpublish this page from the web."}),message:(0,T.jsx)(b().sA,{id:"permissionRoleSelect.unpublishConfirmation.message",defaultMessage:"Are you sure you want to remove access?"}),items:[{label:(0,T.jsx)(b().sA,{id:"userPermissionsMenu.removePermissionsModal.unpublishAction.label",defaultMessage:"Remove access"}),color:"red",onAccept:()=>e(!0)}]})}))}()&&A()}else A();var j}function Q(e){const{availableRole:s,isCurrentUser:t,role:a,table:d,type:c,isRemovableOverride:u,upgradeButtonName:p,onUpgradeButtonClick:m,isRedesignEnabled:f,isPublicShareLinkEnabled:g,from:h}=e,{label:v,caption:y,hideSelectionCheckIcon:C}=(0,X().R)({type:c,role:s.role,table:d,isRemovable:$(c,u),isCurrentUser:t,isRedesignEnabled:f,isPublicShareLink:g}),x=(0,n().DP)(),A=(0,i().v3)(),M=(0,w().O)(),k=(0,o().K8)((()=>{var e;return null===(e=A.currentUser)||void 0===e?void 0:e.id}),[A]),{device:I}=A,{onClick:P,key:U,...W}=e.props,D=s.disabledInfo,N=I.isMobile&&f,F=(0,E()._X)({name:"block_read_and_write_role",spaceId:M,userId:k}),Z=(0,o().K8)((()=>z(s.role,d,c,"available"===(null==F?void 0:F.type))),[s,d,c,F]),V=(0,o().K8)((()=>A.device.isMobile&&!L().S$()),[A]),H=Boolean(Z),q=(0,o().K8)((()=>{var e;return null===(e=S().default.getState().currentSpaceStore)||void 0===e?void 0:e.canAdmin()}),[]),G=H&&(!q||V),Y=(0,n().IS)((e=>{const s={backgroundColor:e.surface.elevated,paddingTop:12,paddingBottom:12,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.stroke.secondary};return{buttonMenuItem:{...s},redButtonMenuItem:{...s,color:e.text.uiRedPrimary},disabledButtonMenuItem:{...s,color:e.text.tertiary}}}),[]);return I.isMobileNative&&H?null:D&&D.isDisabled?(0,T.jsx)(R().A,{delayThreshold:0,renderTooltip:e=>(0,T.jsx)("div",{...e,children:D.disabledMessage}),placement:j().W.Right,textWrap:!0,render:t=>(0,T.jsx)(O().A,{style:N?Y.disabledButtonMenuItem:void 0,...t,focused:e.focused,disabled:!0,disabledFeedback:!0,right:a!==s.role||C?void 0:(0,T.jsx)("div",{style:{width:I.isMobile?16:14},children:f?(0,l().b)():(0,r().o)()}),title:(0,T.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,T.jsx)("div",{style:{...e.style,marginRight:Z?6:0},children:(0,T.jsx)(b().sA,{...v})})}),caption:y&&(0,T.jsx)("span",{style:{color:f?x.text.secondary:x.mediumTextColor},children:(0,T.jsx)(b().sA,{...y})}),shouldWrapCaption:!0})}):(0,T.jsx)(B,{upsell:H&&("unavailable"===(null==F?void 0:F.type)?F.upsell:void 0),analyticsName:p,renderUpgradeTooltip:()=>Z,tooltipPlacement:j().W.Left,onClick:P,onUpgradeClick:m,render:(t,i)=>{const{focused:o,...n}=(0,_().A)(W,t);return(0,T.jsx)(O().A,{...n,style:N?"none"===s.role?Y.redButtonMenuItem:Y.buttonMenuItem:void 0,focused:o||e.focused,right:a!==s.role||C?void 0:(0,T.jsx)("div",{style:{width:I.isMobile?16:14},children:f?(0,l().b)():(0,r().o)()}),title:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,T.jsx)("div",{style:{...e.style,marginRight:Z?6:0},children:(0,T.jsx)(b().sA,{...v})}),i,e.availableRole.tag&&(0,T.jsx)(K().A,{desktopStyle:{marginLeft:7},children:e.availableRole.tag})]}),caption:y&&(0,T.jsx)("span",{style:{color:f?x.text.secondary:x.mediumTextColor},children:(0,T.jsx)(b().sA,{...y})}),shouldWrapCaption:!0,disabled:G,isRedOnHover:(f||"spaceSettings"===h)&&!G&&"none"===s.role})}})}function ee(){const e=(0,n().DP)(),s=(0,i().v3)(),{device:t}=s;return(0,T.jsx)(V().A,{style:{padding:12,backgroundColor:e.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${e.regularDividerColor}`,marginTop:t.isMobile?28:1},isMultiline:!0,isSmall:!0,children:(0,T.jsx)(b().sA,{id:"permissionRoleSelect.overrideMessage.caption",defaultMessage:"You’ll override permissions from the parent page if you change this role."})})}}}]);