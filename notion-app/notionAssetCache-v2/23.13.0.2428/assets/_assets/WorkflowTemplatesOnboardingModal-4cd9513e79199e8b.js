"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[11097,15529,15961,21475,71204],{3486:(e,t,o)=>{o.d(t,{d:()=>i});var n=()=>o(278238);const r={light:{gray:{stroke:{secondary:"rgba(84, 72, 49, 0.15)"},fill:{primary:"rgba(84, 72, 49, 0.15)",secondary:"rgba(84, 72, 49, 0.08)",tertiary:"rgba(84, 72, 49, 0.04)"},text:{primary:"#1D1B16"}},red:{stroke:{secondary:"rgba(244, 171, 159, 0.40)"},fill:{primary:"rgba(244, 171, 159, 0.40)",secondary:"rgba(244, 171, 159, 0.40)",tertiary:"rgba(243, 136, 118, 0.07)"},text:{primary:"#5D1715"}},brown:{stroke:{secondary:"rgba(210, 162, 141, 0.35)"},fill:{primary:"rgba(210, 162, 141, 0.35)",secondary:"rgba(210, 162, 141, 0.17)",tertiary:"rgba(210, 162, 141, 0.07)"},text:{primary:"#442A1E"}},orange:{stroke:{secondary:"rgba(224, 124, 57, 0.27)"},fill:{primary:"rgba(224, 124, 57, 0.27)",secondary:"rgba(224, 124, 57, 0.15)",tertiary:"rgba(224, 124, 57, 0.07)"},text:{primary:"#49290E"}},yellow:{stroke:{secondary:"rgba(236, 191, 66, 0.39)"},fill:{primary:"rgba(236, 191, 66, 0.39)",secondary:"rgba(215, 177, 24, 0.15)",tertiary:"rgba(215, 177, 24, 0.07)"},text:{primary:"#402C1B"}},green:{stroke:{secondary:"rgba(123, 183, 129, 0.27)"},fill:{primary:"rgba(123, 183, 129, 0.27)",secondary:"rgba(123, 183, 129, 0.15)",tertiary:"rgba(123, 183, 129, 0.07)"},text:{primary:"#1C3829"}},blue:{stroke:{secondary:"rgba(93, 165, 206, 0.27)"},fill:{primary:"rgba(93, 165, 206, 0.27)",secondary:"rgba(95, 167, 208, 0.15)",tertiary:"rgba(91, 166, 209, 0.07)"},text:{primary:"#183347"}},purple:{stroke:{secondary:"rgba(168, 129, 197, 0.27)"},fill:{primary:"rgba(168, 129, 197, 0.27)",secondary:"rgba(204, 170, 229, 0.15)",tertiary:"rgba(206, 175, 229, 0.07)"},text:{primary:"#412454"}},pink:{stroke:{secondary:"rgba(225, 136, 179, 0.27)"},fill:{primary:"rgba(225, 136, 179, 0.27)",secondary:"rgba(235, 159, 196, 0.15)",tertiary:"rgba(231, 147, 188, 0.07)"},text:{primary:"#4C2337"}}},dark:{gray:{stroke:{secondary:"rgba(255, 255, 255, 0.09)"},fill:{primary:"rgba(255, 255, 255, 0.13)",secondary:"rgba(255, 255, 255, 0.09)",tertiary:"rgba(255, 255, 255, 0.03)"},text:{primary:"rgba(255, 255, 255, 0.81)"}},red:{stroke:{secondary:"rgba(222, 85, 85, 0.25)"},fill:{primary:"rgba(222, 85, 84, 0.30)",secondary:"rgba(222, 85, 84, 0.30)",tertiary:"rgba(222, 85, 88, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},brown:{stroke:{secondary:"rgba(184, 101, 69, 0.25)"},fill:{primary:"rgba(184, 101, 68, 0.30)",secondary:"rgba(184, 101, 68, 0.30)",tertiary:"rgba(184, 101, 72, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},orange:{stroke:{secondary:"rgba(233, 126, 37, 0.20)"},fill:{primary:"rgba(233, 126, 36, 0.30)",secondary:"rgba(233, 126, 36, 0.30)",tertiary:"rgba(233, 126, 40, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},yellow:{stroke:{secondary:"rgba(179, 129, 61, 0.20)"},fill:{primary:"rgba(231, 161, 55, 0.30)",secondary:"rgba(231, 161, 55, 0.30)",tertiary:"rgba(162, 105, 50, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},green:{stroke:{secondary:"rgba(45, 153, 100, 0.20)"},fill:{primary:"rgba(45, 153, 100, 0.30)",secondary:"rgba(45, 153, 100, 0.30)",tertiary:"rgba(45, 153, 100, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},blue:{stroke:{secondary:"rgba(51, 126, 169, 0.20)"},fill:{primary:"rgba(51, 126, 169, 0.33)",secondary:"rgba(51, 126, 169, 0.33)",tertiary:"rgba(51, 126, 169, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},purple:{stroke:{secondary:"rgba(155, 97, 211, 0.18)"},fill:{primary:"rgba(155, 97, 211, 0.28)",secondary:"rgba(155, 97, 211, 0.28)",tertiary:"rgba(155, 97, 211, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},pink:{stroke:{secondary:"rgba(220, 76, 145, 0.22)"},fill:{primary:"rgba(220, 76, 145, 0.30)",secondary:"rgba(220, 76, 145, 0.30)",tertiary:"rgba(220, 76, 145, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}}}};function i(e,t){const o=(0,n().VA)(e),i="lightgray"===o?"gray":o;return{...r[t.mode][i],icon:{primary:n().l8[t.mode][i]}}}},24184:(e,t,o)=>{o.d(t,{e:()=>n});const n=(0,o(340498).xh)("arrowCounterClockwise",{default:{loader:()=>o.e(79311).then(o.bind(o,579311))},small:{loader:()=>o.e(49121).then(o.bind(o,449121))},mini:{loader:()=>o.e(48591).then(o.bind(o,248591))},large:{loader:()=>o.e(95490).then(o.bind(o,873109))}})},33218:(e,t,o)=>{o.d(t,{UQ:()=>m,gL:()=>f});o(16280),o(898992),o(672577),o(803949);var n=()=>o(651124),r=()=>o(792071),i=()=>o(688728),a=()=>o(369186),l=()=>o(475140),s=()=>o(235692),c=()=>o(778781),d=()=>o(696706),p=()=>o(896628),u=()=>o(317909);function m(e){let{environment:t,transaction:o,layoutStore:n,position:s,updatedModule:c,sessionId:d}=e;const p=i().Zm[s.area],m=n.getRawModules();if("form_conditional_modules"===p){const e=null==m?void 0:m[p];if(!(null==e?void 0:e[s.moduleId]))throw new Error("Unable to find module being updated.");return void u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){u().applyOperation({transaction:e,store:n,operation:r().N4X.updateModuleInArea({pointer:n.pointer,area:p,module:(0,a().Lv)(c)})})},userAction:"BuilderLayoutModules.updateModule"})}if(!m)throw new Error("Unable to find modules");const g=(0,l().LC)(m,(e=>e.id===s.moduleId));if(!g||g.area!==p)throw new Error("Unable to find module being updated.");u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){u().applyOperation({transaction:e,store:n,operation:r().N4X.updateModuleInArea({pointer:n.pointer,module:(0,a().Lv)(c),..."views_main_tab_modules"===g.area?{area:g.area,viewId:g.viewId}:{area:g.area}})})},userAction:"BuilderLayoutModules.updateModule"})}function g(e){var t,o,n;let{collectionStore:r,layoutStore:i}=e;const a=new Map,l=r.getFormat(),s=[...null===(t=i.getModules())||void 0===t?void 0:t.page_main,...null===(o=i.getModules())||void 0===o?void 0:o.page_details],d=new Map;null===(n=l.property_visibility)||void 0===n||n.forEach((e=>{d.set(e.property,e)})),s.forEach((e=>{if(!(0,c()._Q)(e))return(0,c().gx)(e)?(a.set(e.propertyId,{property:e.propertyId}),void d.set(e.propertyId,{property:e.propertyId,visibility:"show"})):void 0;e.propertyIds.forEach((e=>{a.set(e,{property:e}),d.set(e,{property:e,visibility:"show"})}))}));const p=r.getNormalizedPropertyGroups();var u;p?p.forEach((e=>{var t;null===(t=e.propertyIds)||void 0===t||t.forEach((e=>{a.has(e)||a.set(e,{property:e})}))})):null===(u=l.collection_page_properties)||void 0===u||u.forEach((e=>{a.has(e.property)||a.set(e.property,e)}));return{propertiesFormat:Array.from(a.values()),propertyVisibility:Array.from(d.values())}}function f(e){let{environment:t,transaction:o,collectionStore:i,layoutStore:a}=e;const{propertiesFormat:l,propertyVisibility:m}=g({collectionStore:i,layoutStore:a});u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){const t=a.getBlockChildrenPointers(),o=a.getFormat(),g=a.firstModuleOfType("viewsMain");g&&(0,c().y6)(g)&&t.find((e=>d().L3.isEqual(e,g.collection_view_block_pointer)))&&u().applyOperation({transaction:e,store:a,operation:r().N4X.removeBlockChild(a.pointer,g.collection_view_block_pointer.id)});const f=null==o?void 0:o.previousViewsMainCollectionViewBlockPointer,h=f&&t.find((e=>d().L3.isEqual(e,f)));h&&u().applyOperation({transaction:e,store:a,operation:r().N4X.removeBlockChild(a.pointer,h.id)}),u().applyOperation({transaction:e,store:a,operation:r().N4X.setModulesByAreas(a.pointer,(0,s().K5)())}),u().applyOperation({transaction:e,store:a,operation:r().N4X.deleteFormat(a.pointer)});const y=i.getFormat(),{page_section_visibility:v}=y;p().zA({stores:[i],update:{property_groups:void 0,collection_page_properties:l,property_visibility:m,...v?{page_section_visibility:n().Zi}:void 0},transaction:e})},userAction:"BuilderLayoutModules.resetLayoutToDefault"})}},51194:(e,t,o)=>{o.d(t,{a:()=>i});var n=o(296540),r=()=>o(525128);function i(){const e=(0,n.useRef)(!1);return(0,r().E)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},58293:(e,t,o)=>{o.d(t,{r:()=>i});var n=()=>o(56366),r=()=>o(351360);function i(){return(0,n().K8)((()=>r().default.state.currentSpaceStore),[])}},67775:(e,t,o)=>{o.d(t,{l:()=>m,z:()=>g});o(296540);var n=()=>o(401497),r=()=>o(72135),i=()=>o(496603),a=()=>o(720665),l=()=>o(886680),s=()=>o(972435),c=()=>o(78901),d=()=>o(162010),p=o(474848);const u=21;function m(e){const{numberValue:t,numberFormat:o,numberPrecision:m,numberShowAs:f,shouldRenderTooltip:h,withComma:y,style:v,ringWidth:b,className:x,barHeight:w}=e,S=(0,n().DP)();if(i().yr(t)||a().pN(t))return null;const k=e.progressSize??u,C=(null==f?void 0:f.showValue)??!0,I=C&&r().ZV(t,o,s().A.getIntl(),void 0,m);let _;if("bar"===(null==f?void 0:f.type)||"ring"===(null==f?void 0:f.type)){const n=r().XK(t,f.maxValue),{filledColor:i,gapColor:a,unfilledColor:s}=g({theme:S,color:f.color}),u=h?l().lh({numberValue:t,numberFormat:o,numberShowAs:f}):void 0;_="bar"===f.type?(0,p.jsx)(c().z,{percentage:n,filledColor:i,gapColor:a,unfilledColor:s,height:w,style:{height:k,...e.barStyle,...C?{}:{flexBasis:"100%"}},tooltip:u}):(0,p.jsx)(d().C,{percentage:n,filledColor:i,gapColor:a,unfilledColor:s,size:k,ringWidth:b,tooltip:u})}return(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:"6px 8px",...v},className:x,children:[I,_,y?", ":null]})}function g(e){let{theme:t,color:o}=e;const n="default"===o?t.selectLightGray:t.accentColors[o];return{filledColor:"dark"===t.mode?n[500]:n[400],gapColor:n[50],unfilledColor:"dark"===t.mode?n[200]:t.selectLightGray[200]}}},69447:(e,t,o)=>{o.d(t,{Lq:()=>n,WK:()=>i,nh:()=>r});const n=40,r=48,i=60},101209:(e,t,o)=>{o.d(t,{v:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("boltFilled",{svg:(0,n.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},102777:(e,t,o)=>{o.d(t,{b:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("sendArrow",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M9.79883 18.5894C14.6216 18.5894 18.5894 14.6216 18.5894 9.79883C18.5894 4.96777 14.6216 1 9.79053 1C4.95947 1 1 4.96777 1 9.79883C1 14.6216 4.96777 18.5894 9.79883 18.5894ZM9.79883 14.3062C9.20947 14.3062 8.76953 13.9077 8.76953 13.3433V9.69922L8.86914 8.00586L8.25488 8.84424L7.3916 9.81543C7.23389 10.0063 6.98486 10.1143 6.72754 10.1143C6.21289 10.1143 5.84766 9.75732 5.84766 9.25928C5.84766 8.99365 5.92236 8.79443 6.12158 8.58691L8.96045 5.61523C9.19287 5.35791 9.4585 5.2417 9.79883 5.2417C10.1309 5.2417 10.4048 5.36621 10.6372 5.61523L13.4761 8.58691C13.667 8.79443 13.75 8.99365 13.75 9.25928C13.75 9.75732 13.3848 10.1143 12.8618 10.1143C12.6128 10.1143 12.3638 10.0063 12.2061 9.81543L11.3428 8.86914L10.7202 7.99756L10.8281 9.69922V13.3433C10.8281 13.9077 10.3799 14.3062 9.79883 14.3062Z"})})},110165:(e,t,o)=>{o.d(t,{L:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("squareStop",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M9.79469 18.5894C8.59333 18.5894 7.46094 18.3595 6.39753 17.8996C5.33986 17.4398 4.40579 16.8046 3.5953 15.9941C2.78481 15.1836 2.14963 14.2495 1.68978 13.1919C1.22993 12.1284 1 10.9961 1 9.79469C1 8.59333 1.22993 7.46381 1.68978 6.40615C2.14963 5.34274 2.78193 4.40579 3.58667 3.5953C4.39717 2.78481 5.33124 2.14963 6.3889 1.68978C7.45232 1.22993 8.5847 1 9.78607 1C10.9874 1 12.1198 1.22993 13.1832 1.68978C14.2466 2.14963 15.1836 2.78481 15.9941 3.5953C16.8046 4.40579 17.4398 5.34274 17.8996 6.40615C18.3595 7.46381 18.5894 8.59333 18.5894 9.79469C18.5894 10.9961 18.3595 12.1284 17.8996 13.1919C17.4398 14.2495 16.8046 15.1836 15.9941 15.9941C15.1836 16.8046 14.2466 17.4398 13.1832 17.8996C12.1256 18.3595 10.9961 18.5894 9.79469 18.5894ZM7.44944 13.028H12.1399C12.4159 13.028 12.6314 12.9504 12.7866 12.7952C12.9476 12.64 13.028 12.4245 13.028 12.1486V7.42357C13.028 7.15341 12.9476 6.94073 12.7866 6.78553C12.6314 6.63033 12.4159 6.55273 12.1399 6.55273H7.44944C7.17353 6.55273 6.9551 6.63033 6.79415 6.78553C6.63895 6.94073 6.56135 7.15341 6.56135 7.42357V12.1486C6.56135 12.4245 6.63895 12.64 6.79415 12.7952C6.9551 12.9504 7.17353 13.028 7.44944 13.028Z"})})},130102:(e,t,o)=>{o.d(t,{u:()=>n});const n=(0,o(340498).xh)("pencilLine",{default:{loader:()=>o.e(98161).then(o.bind(o,398161))},small:{loader:()=>o.e(29995).then(o.bind(o,829995))},mini:{loader:()=>o.e(71229).then(o.bind(o,571229))},large:{loader:()=>o.e(61843).then(o.bind(o,661843))}})},149375:(e,t,o)=>{o.d(t,{v:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowLeftThick",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.54004 8.05762C1.54004 8.2627 1.62891 8.46094 1.78613 8.61133L6.29102 13.1162C6.45508 13.2734 6.63965 13.3486 6.82422 13.3486C7.25488 13.3486 7.5625 13.041 7.5625 12.6309C7.5625 12.4189 7.48047 12.2344 7.34375 12.1045L5.8125 10.5527L3.78906 8.70703L5.38867 8.80273H13.7012C14.1455 8.80273 14.46 8.49512 14.46 8.05762C14.46 7.61328 14.1455 7.3125 13.7012 7.3125H5.38867L3.7959 7.4082L5.8125 5.5625L7.34375 4.01074C7.48047 3.87402 7.5625 3.68945 7.5625 3.47754C7.5625 3.06738 7.25488 2.7666 6.82422 2.7666C6.63965 2.7666 6.45508 2.83496 6.27734 3.00586L1.78613 7.50391C1.62891 7.64746 1.54004 7.85254 1.54004 8.05762Z"})})},155185:(e,t,o)=>{o.d(t,{I:()=>a,_:()=>i});const n={normalizedTitleWithIcon:!0,properties:!0,property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,views:!0,viewsMain:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,deleted_property:!1,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1},r={properties:!0,property:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,titleWithIcon:!0,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,views:!0,viewsMain:!0,collectionView:!0,collectionViewV2:!0};function i(e){return n[e.type]}function a(e){return r[e.type]}},173019:(e,t,o)=>{o.d(t,{r:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("pencil",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},175116:(e,t,o)=>{o.d(t,{ET:()=>s,Ks:()=>c,RI:()=>l,p2:()=>a});o(16280);var n=o(296540);const r="collectionContextStore",i=(0,o(446943).C)({displayName:r,legacyContextKey:r,modernContextDefaultValue:void 0}),a=i.context,l=i.Provider;function s(){const e=n.useContext(a);if(void 0===e)throw new Error(`No context provided: ${r}`);return e}function c(){return n.useContext(a)}},175213:(e,t,o)=>{o.d(t,{G:()=>i});var n=()=>o(989423),r=()=>o(508496);function i(e,t){n().vd(e,"delete_property",t),r().default.logEvent("delete_property")}},198048:(e,t,o)=>{o.d(t,{C:()=>a});var n=o(296540),r=()=>o(51194),i=()=>o(610104);function a(){const e=(0,r().a)(),[t,o]=(0,n.useState)(0),a=(0,n.useCallback)((()=>{e.current&&o(t+1)}),[t]);return[(0,n.useCallback)((()=>i().Gt.postRender(a)),[a]),t]}},200277:(e,t,o)=>{o.d(t,{$:()=>m,N:()=>p});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(581454);var n=()=>o(428045),r=()=>o(663077),i=()=>o(496603),a=()=>o(534177),l=()=>o(299545),s=()=>o(338907),c=()=>o(913454),d=()=>o(204067);function p(e,t){const o=(0,d().Xg)(e,t),n=new Set(function(e){const t=e.getParentBlockStore();if(null==t||!t.isDefined())return[];return(null==t?void 0:t.getCollectionViewStores().map((e=>e.getName())).filter(a().O9))??[]}(t));return function(e){const t=new Set(e.map((e=>e.templateId))),o=[];for(const n of e)o.push(...u(n).filter((e=>!t.has(e))).map((e=>c().globalWorkflowTemplates.fromId(e))).filter(r().bz).filter((e=>!(0,r().Sz)(e))));return o}(o).filter((e=>"collection_view"!==e.type||!n.has(e.value.name??"")))}function u(e){return"compound"===e.type||"collection"===e.type?e.value.templateItems.filter((e=>"optionalDefaultOn"===e.optionality||"optionalDefaultOff"===e.optionality)).map((e=>e.pointer)):[]}function m(e){let{persona:t,parentStore:o}=e;const r=t?(0,n().Qf)({persona:t,getIsM3_3Enabled:s().Te}):[],a=c().globalWorkflowTemplates.allOfType({templateIds:r??[],type:"collection"}),l=i().hS(g({collectionTemplates:[...a,...c().globalWorkflowTemplates.allOfType({templateIds:(0,n().dj)({isM3_3Enabled:!0}),type:"collection"})],parentStore:o}),(e=>e.templateId)),d=i().hS(g({collectionTemplates:[...a,...c().globalWorkflowTemplates.allOfType({templateIds:(0,n().dj)({isM3_3Enabled:!1}),type:"collection"})],parentStore:o}),(e=>e.templateId));return l.length===d.length&&l.every(((e,t)=>e.templateId===d[t].templateId))?d:(0,s().Te)()?l:d}function g(e){let{collectionTemplates:t,parentStore:o}=e;if(!o)return t;if((0,l().Yu)(o))return t;const n=(0,l().$R)(o)?o.getTeamPageStores():o.getContentStores(),r=new Set,i=new Set;for(const l of n){var a;const e=null===(a=l.getCollectionStore())||void 0===a?void 0:a.getWorkflowTemplateId(),t=e&&(0,c().getCollectionTemplateFromId)(e);t&&(r.add(t.templateId),t.category&&i.add(t.category))}const s=[],d=[];for(const l of t)r.has(l.templateId)||l.category&&i.has(l.category)?s.push(l):d.push(l);return[...d,...s]}},203066:(e,t,o)=>{o.d(t,{N:()=>c});var n=o(296540);class r extends n.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function i({children:e,isPresent:t}){const o=(0,n.useId)(),i=(0,n.useRef)(null),a=(0,n.useRef)({width:0,height:0,top:0,left:0});return(0,n.useInsertionEffect)((()=>{const{width:e,height:n,top:r,left:l}=a.current;if(t||!i.current||!e||!n)return;i.current.dataset.motionPopId=o;const s=document.createElement("style");return document.head.appendChild(s),s.sheet&&s.sheet.insertRule(`\n          [data-motion-pop-id="${o}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${n}px !important;\n            top: ${r}px !important;\n            left: ${l}px !important;\n          }\n        `),()=>{document.head.removeChild(s)}}),[t]),n.createElement(r,{isPresent:t,childRef:i,sizeRef:a},n.cloneElement(e,{ref:i}))}const a=({children:e,initial:t,isPresent:r,onExitComplete:a,custom:s,presenceAffectsLayout:c,mode:d})=>{const p=(0,o(328601).M)(l),u=(0,n.useId)(),m=(0,n.useMemo)((()=>({id:u,initial:t,isPresent:r,custom:s,onExitComplete:e=>{p.set(e,!0);for(const t of p.values())if(!t)return;a&&a()},register:e=>(p.set(e,!1),()=>p.delete(e))})),c?void 0:[r]);return(0,n.useMemo)((()=>{p.forEach(((e,t)=>p.set(t,!1)))}),[r]),n.useEffect((()=>{!r&&!p.size&&a&&a()}),[r]),"popLayout"===d&&(e=n.createElement(i,{isPresent:r},e)),n.createElement(o(786719).t.Provider,{value:m},e)};function l(){return new Map}const s=e=>e.key||"";const c=({children:e,custom:t,initial:r=!0,onExitComplete:i,exitBeforeEnter:l,presenceAffectsLayout:c=!0,mode:d="sync"})=>{(0,o(285238).V)(!l,"Replace exitBeforeEnter with mode='wait'");const p=(0,n.useContext)(o(29473).L).forceRender||(0,o(198048).C)()[0],u=(0,o(51194).a)(),m=function(e){const t=[];return n.Children.forEach(e,(e=>{(0,n.isValidElement)(e)&&t.push(e)})),t}(e);let g=m;const f=(0,n.useRef)(new Map).current,h=(0,n.useRef)(g),y=(0,n.useRef)(new Map).current,v=(0,n.useRef)(!0);if((0,o(525128).E)((()=>{v.current=!1,function(e,t){e.forEach((e=>{const o=s(e);t.set(o,e)}))}(m,y),h.current=g})),(0,o(757491).l)((()=>{v.current=!0,y.clear(),f.clear()})),v.current)return n.createElement(n.Fragment,null,g.map((e=>n.createElement(a,{key:s(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:c,mode:d},e))));g=[...g];const b=h.current.map(s),x=m.map(s),w=b.length;for(let o=0;o<w;o++){const e=b[o];-1!==x.indexOf(e)||f.has(e)||f.set(e,void 0)}return"wait"===d&&f.size&&(g=[]),f.forEach(((e,o)=>{if(-1!==x.indexOf(o))return;const r=y.get(o);if(!r)return;const l=b.indexOf(o);let v=e;if(!v){const e=()=>{f.delete(o);const e=Array.from(y.keys()).filter((e=>!x.includes(e)));if(e.forEach((e=>y.delete(e))),h.current=m.filter((t=>{const n=s(t);return n===o||e.includes(n)})),!f.size){if(!1===u.current)return;p(),i&&i()}};v=n.createElement(a,{key:s(r),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:c,mode:d},r),f.set(o,v)}g.splice(l,0,v)})),g=g.map((e=>{const t=e.key;return f.has(t)?e:n.createElement(a,{key:s(e),isPresent:!0,presenceAffectsLayout:c,mode:d},e)})),n.createElement(n.Fragment,null,f.size?g:g.map((e=>(0,n.cloneElement)(e))))}},235692:(e,t,o)=>{o.d(t,{K5:()=>p,_u:()=>c,oP:()=>u,wC:()=>s,xN:()=>d});o(898992),o(354520),o(581454);var n=()=>o(183558),r=()=>o(155185),i=()=>o(778781),a=()=>o(369186);const l={page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"properties",type:"properties"},{id:"discussions",type:"discussions"},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},s={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},c={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyLabels:"hide",propertyIds:[]},{id:"editor",type:"editor"},{id:"discussions",type:"discussions"}],page_details:[],form_layout_schema:[]};function d(e){return(0,a().jr)({modulesByArea:l,collectionSchema:null==e?void 0:e.collectionSchema,collectionFormat:null==e?void 0:e.collectionFormat})}function p(){return{page_layout_schema:(0,a().ke)(l.page_main).map((e=>{if(!(0,i().cn)(e))return(0,r().I)(e)?{...e,id:(0,n().Ay)()}:e})).filter((e=>void 0!==e)),page_info_layout_schema:(0,a().ke)(l.page_details).map((e=>{if(!(0,i().cn)(e))return(0,r().I)(e)?{...e,id:(0,n().Ay)()}:e})).filter((e=>void 0!==e)),form_layout_schema:void 0}}function u(e,t){const o=void 0===t?[{id:(0,n().Ay)(),type:"formQuestion",formQuestionId:e}]:[{id:(0,n().Ay)(),type:"formQuestion",formQuestionId:e},{id:(0,n().Ay)(),type:"formQuestion",formQuestionId:t}];return{page_layout_schema:void 0,page_info_layout_schema:void 0,form_layout_schema:[{id:(0,n().Ay)(),type:"cover"},{id:(0,n().Ay)(),type:"formTitle"},...o,{id:(0,n().Ay)(),type:"formSubmit"}]}}},261164:(e,t,o)=>{o.d(t,{o:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowRightRounded",{viewBox:"0 0 16 13",svg:(0,n.jsx)("path",{d:"M15.3828 6.85156C15.3828 7.09635 15.2917 7.3099 15.1094 7.49219L9.95312 12.6328C9.77083 12.8099 9.5651 12.8984 9.33594 12.8984C9.09635 12.8984 8.89583 12.8203 8.73438 12.6641C8.57812 12.5078 8.5 12.3125 8.5 12.0781C8.5 11.9583 8.52083 11.8464 8.5625 11.7422C8.60938 11.638 8.67188 11.5469 8.75 11.4688L10.5 9.70312L13.4141 7.04688L13.6875 7.54688L10.9766 7.70312H1.48438C1.22396 7.70312 1.01302 7.625 0.851562 7.46875C0.695312 7.30729 0.617188 7.10156 0.617188 6.85156C0.617188 6.59635 0.695312 6.39062 0.851562 6.23438C1.01302 6.07292 1.22396 5.99219 1.48438 5.99219H10.9766L13.6875 6.15625L13.4141 6.66406L10.5 4L8.75 2.22656C8.67188 2.14844 8.60938 2.0599 8.5625 1.96094C8.52083 1.85677 8.5 1.74219 8.5 1.61719C8.5 1.38281 8.57812 1.1875 8.73438 1.03125C8.89583 0.875 9.09635 0.796875 9.33594 0.796875C9.45052 0.796875 9.5599 0.820312 9.66406 0.867188C9.76823 0.914062 9.86719 0.984375 9.96094 1.07812L15.1094 6.21094C15.2917 6.39323 15.3828 6.60677 15.3828 6.85156Z"})})},265665:(e,t,o)=>{o.d(t,{j:()=>d});var n=o(296540),r=()=>o(484714),i=()=>o(401497),a=()=>o(284371),l=()=>o(859428);var s=()=>o(962730),c=o(474848);function d(e){let{children:t,style:o,tooltipStyle:d,placement:p=s().W.Bottom}=e;const{isSafari:u}=(0,r().Y0)(),m=(0,n.useRef)(null),g=function(e){const[t,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const{current:t}=e;if(!t)return void o(!1);const n="ResizeObserver"in window?new ResizeObserver((e=>{let[t]=e;o(t.target.scrollWidth>t.target.clientWidth)})):void 0;return null==n||n.observe(t),()=>null==n?void 0:n.unobserve(t)}),[]),t}(m),f=(0,i().IS)((()=>({overflowText:{...a().RC,...o}})),[o]);return(0,c.jsx)(l().A,{delayThreshold:500,placement:p,textWrap:!0,style:d,forceVisibleState:!(u||!g)&&void 0,renderTooltip:()=>g?t:void 0,render:e=>(0,c.jsx)("div",{ref:m,style:f.overflowText,...e,children:t})})}},299177:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{}}}const r=new n;o(604341).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},344482:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(672577);class n extends(()=>o(959180))().A{findTableHeaderCell(e,t){return this.find((o=>o.collectionContextStore===e&&o.property===t))}}const r=new n},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>P,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>k,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>S,MAX_RECURRENCE_INTERVAL:()=>y,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>v,RRULE_WEEKDAYS_MAP:()=>h,adjustedStartDateIfPossible:()=>I,areRecurrenceSchedulesEqual:()=>V,convertFromUnpersistedRecurrenceConfig:()=>E,convertToUnpersistedRecurrenceConfig:()=>R,getFormattedEndCondition:()=>A,getFormattedNextRecurrenceTime:()=>M,getNewEndTimestamp:()=>B,getNextDateUtc:()=>T,getRecurrenceAfter:()=>_,isRunningBetweenMidnightAnd3AM:()=>j,isValidRecurrenceInterval:()=>b,isValidRecurrenceNumberOfRuns:()=>x,rruleFromRecurrence:()=>w,templateAncestorsViolateRecurrenceNesting:()=>C});o(898992),o(354520),o(581454);var n=()=>o(244641);o(944114);function r(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];if(0===o.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...r(o[0],...o.slice(1)).map((e=>[a,...e])));return i}var i=()=>o(496603),a=()=>o(534177),l=()=>o(720665),s=()=>o(597777),c=()=>o(869190),d=()=>o(416504),p=()=>o(402390);class u extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>o(912720);const g=(0,o(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),f={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},h={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},y=99,v=999;function b(e){return(0,l().Et)(e)&&Number.isInteger(e)&&e>0&&e<=y}function x(e){return(0,l().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function w(e){const{start_date:t,frequency:o,interval:n,weekdays:i,timezone:l,hour:c,minute:d}=e,p="week"===o&&i?i.map((e=>h[e])):void 0,m={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,s().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,o]=e;return h[t].nth(o)})):(0,a().HB)(e.monthly_restriction)),new u({freq:f[o],dtstart:(0,s().eU)(t),interval:n,byweekday:p,tzid:l,byhour:c??0,byminute:d??0,bysecond:0,...m})}const S=1,k=1;function C(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=n>S,a=o.length>=k;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:r}}function I(e){var t;const{recurrence:o,afterDate:r}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=r)return o;let i=n().c9.fromMillis(o.start_date,{zone:"utc"});const a=n().c9.fromMillis(r,{zone:"utc"});switch(o.frequency){case"year":{const e=Math.floor(a.diff(i,"years").years/o.interval);i=i.plus({years:e*o.interval});break}case"month":{const e=Math.floor(a.diff(i,"months").months/o.interval);i=i.plus({months:e*o.interval});break}case"week":{const e=Math.floor(a.diff(i,"weeks").weeks/o.interval);i=i.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(a.diff(i,"days").days/o.interval);i=i.plus({days:e*o.interval});break}}return{...o,start_date:(0,s().DH)(i.toMillis())}}function _(e){const{recurrence:t,afterDate:o}=e;if((0,m().wt)(t)){const e=(0,s().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=w(I({recurrence:t,afterDate:o})).after((0,s().eU)(o));if(!e)return;return(0,s().h1)(e)}}function j(e){return 0===e.hour||1===e.hour||2===e.hour}function T(e){return w(e).after((0,s().eU)((0,s().Rz)()))||void 0}function M(e){const{recurrence:t,intl:o}=e,r=T(E(t));if(!r)return;const i=j(t),a=n().c9.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,p().H)(o)).setZone(t.timezone),l=(0,c().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(i)return o.formatMessage(g.dateBetweenMidnightAnd3AM,{date:l});{let e=a.toLocaleString(n().c9.TIME_SIMPLE);return t.timezone!==(0,d().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),o.formatMessage(g.dateAtTime,{date:l,time:e})}}function A(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(g.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,c().Yq)({date:n().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(g.noEndCondition)}const P=100;function R(e){return{...e,start_date:(0,s().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,s().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function B(e,t,o){return e.plus(o-t)}function L(e,t){const o=n().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,s().Rz)(o.toJSDate())}}function E(e){return{...e,start_date:(0,s().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?L(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function V(e,t){const o=i().fN(e,(e=>void 0!==e)),n=i().fN(t,(e=>void 0!==e));return i().n4(o,n)}},399762:(e,t,o)=>{o.d(t,{O:()=>c,q:()=>d});o(296540);var n=()=>o(401497),r=()=>o(100622),i=()=>o(284371),a=()=>o(288722),l=()=>o(881690),s=o(474848);function c(e){const{value:t,color:o,format:c,showEllipsis:d,onClickRemove:p,showRemoveButton:u,isSingle:m,shouldShrink:g,hideTooltip:f,description:h,tooltipPlacement:y,...v}=e,b=(0,n().DP)(),x=(0,n().IS)((e=>({token:{...d&&i().RC}})),[d]),{textColor:w,backgroundColor:S}=(0,r().LD)(b,o);return t?(0,s.jsx)(l().A,{format:c,value:(0,s.jsx)(a().A,{children:t}),description:h,onClickRemove:p,showRemoveButton:u,isSingle:m,color:w,backgroundColor:S,shouldShrink:g,tooltipPlacement:y,showTooltip:f?"never":"overflow",style:x.token,...v}):null}function d(e){const{value:t,color:o,format:c,showEllipsis:d,onClickRemove:p,showRemoveButton:u,isSingle:m,shouldShrink:g,groupColor:f,tooltipPlacement:h,description:y,hideTooltip:v,...b}=e,x=(0,n().DP)(),w=(0,n().IS)((()=>({token:{...d&&i().RC}})),[d]);if(!t)return null;const{textColor:S,backgroundColor:k}=(0,r().LD)(x,o??f??"gray");let C;return C=o||(f||"gray"),(0,s.jsx)(l().A,{format:c,value:(0,s.jsx)(a().A,{children:t}),description:y,onClickRemove:p,showRemoveButton:u,isSingle:m,color:S,backgroundColor:k,shouldShrink:g,showTooltip:v?"never":"overflow",style:w.token,isRound:!0,showColoredDot:C,tooltipPlacement:h,...b})}},447934:(e,t,o)=>{o.d(t,{$L:()=>I,Fv:()=>B,HD:()=>L,V_:()=>A,bV:()=>P,jP:()=>M,nh:()=>T,w8:()=>R});o(16280),o(18107),o(967357),o(898992),o(354520);var n=()=>o(206267),r=()=>o(792071),i=()=>o(688728),a=()=>o(475140),l=()=>o(235692),s=()=>o(924329),c=()=>o(778781),d=()=>o(144081),p=()=>o(334261),u=()=>o(661920),m=()=>o(435009),g=()=>o(317909),f=()=>o(519839),h=()=>o(594794),y=()=>o(869562),v=()=>o(351360),b=()=>o(712505),x=()=>o(630116),w=()=>o(449476),S=()=>o(640868),k=()=>o(204521),C=()=>o(33218);function I(e){let{environment:t,transaction:o,collectionStore:n,userId:i,modules:a}=e;const s=(0,h().zP)({environment:t,spaceId:n.getSpaceId(),table:d().zx}),c=x().sk.createChildStore(n,s),{model:p,operations:[u]}=r().wfN.create({pointer:s,parent:n.pointer,createdByUserId:i,modules:a??(0,l().K5)()});g().applyOperation({transaction:o,store:c,operation:u});const m=r().BnK.setLayout(n.pointer,s);return g().applyOperation({transaction:o,store:n,operation:m}),{model:p,store:c}}function _(e){let t;return e?t=e:b().default.state.open&&b().default.state.targetStore?t=b().default.state.targetStore:v().default.state.mainEditorCurrentBlockStore&&(t=v().default.state.mainEditorCurrentBlockStore),t}function j(e){y().setUpdateExpand({environment:e,isExpanded:!1,from:"keyboard_default",saveDetailsSidebarPreference:!1}),u().VN({environment:e,from:"open_page_layout_editor",preventAnimation:!0})}function T(e){var t,o;let{environment:r,blockStore:i,collectionStore:a,collectionViewStore:l,from:s,initialSelectedModuleType:c}=e;const d=function(e){var t;let o=_(e);if(null!==(t=o)&&void 0!==t&&t.isCollectionView()){const e=(0,f().UH)(o);o=e?e.resultsInViewOrder(1).at(0):void 0}return o}(i),p=window.location.href;j(r);const u=n().JW();w().A.setState({isOpen:!0,mode:"layout-editor",collectionStore:a,pageStore:d,siteRootBlockStore:void 0,sessionId:u,initialSelectedModuleId:null==d||null===(t=d.getAssociatedCollectionStore())||void 0===t||null===(t=t.getLayoutStore())||void 0===t||null===(t=t.getModel())||void 0===t||null===(t=t.firstRawModuleOfType(c??"titleWithIcon"))||void 0===t?void 0:t.id,urlOnOpen:p}),(0,k().Ko)({environment:r,from:s,context:"layout",sessionId:u,collectionId:null==a?void 0:a.id,existingLayoutId:null==a||null===(o=a.getLayoutStore())||void 0===o?void 0:o.id,collectionViewId:null==l?void 0:l.id})}function M(e){let{environment:t,store:o,siteRootBlockStore:r,from:i}=e;const a=_(o);j(t);const l=n().JW();w().A.setState({isOpen:!0,mode:"site-settings-editor",pageStore:a,siteRootBlockStore:r,sessionId:l}),(0,k().Ko)({environment:t,context:"site",from:i,sessionId:l,collectionId:void 0,existingLayoutId:void 0})}function A(e){let{slideBlockStore:t}=e;const o=t.getNavigableBlockStore(),r=n().JW();w().A.setState({isOpen:!0,mode:"presentation",pageStore:o,currentSlideStore:t,sessionId:r}),window.document.documentElement.requestFullscreen()}function P(e){let{slideBlockStore:t}=e;w().A.setState({isOpen:!1}),window.document.fullscreenElement&&window.document.exitFullscreen()}function R(e){w().A.getState().isOpen&&B(e)}function B(e){let{environment:t}=e;const o=w().A.getState();if(!o.isOpen)throw new Error("Cannot close page layout editor. Page layout editor is not open.");"layout-editor"===o.mode&&o.urlOnOpen&&window.location.href!==o.urlOnOpen&&m().aX(t),w().A.setState({isOpen:!1})}function L(e){var t;let{environment:o,transaction:n,property:r,layoutStore:l}=e;const d=w().A.getSessionId(),u=null===(t=l.getModel())||void 0===t?void 0:t.getRawModules(),m=l.getCollectionModel();if(!u||!m)return;const g=x().md.createChildStore(l,m.pointer),f=(0,a().yn)(u,(e=>"titleWithIcon"===e.type));if(f&&(0,c().Mj)(f.module)){var h;const{module:e,position:t}=f,a={...e,type:"titleWithIcon",propertyIds:null===(h=e.propertyIds)||void 0===h?void 0:h.filter((e=>e!==r))};(0,C().UQ)({environment:o,sessionId:d,transaction:n,layoutStore:l,position:{area:(0,i().Fw)(t.area),moduleId:e.id},updatedModule:(0,s().X)(a)})}const y=(0,a().LP)(u,(e=>"property"===e.type&&e.propertyId===r));for(const{module:a,position:s}of y){const e=a.id,t=(0,i().Fw)(s.area);(0,S().U)({environment:o,sessionId:d,transaction:n,layoutStore:l,position:{area:t,moduleId:e}})}const v=m.getFormat().collection_page_sections;if(v){const e=v.filter((e=>e.section!==r));p().LK({store:g,pageSectionFormats:e,transaction:n,environment:o})}}},462892:(e,t,o)=>{o.d(t,{_:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("layout",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.39999 2.19999C2.28953 2.19999 2.19999 2.28953 2.19999 2.39998V11.5999C2.19999 11.7103 2.28953 11.7999 2.39999 11.7999H4.99997C5.11042 11.7999 5.19997 11.7103 5.19997 11.5999V2.39998C5.19997 2.28953 5.11042 2.19999 4.99997 2.19999H2.39999ZM1 2.39998C1 1.6268 1.62679 1 2.39999 1H4.99997C5.77316 1 6.39995 1.6268 6.39995 2.39998V11.5999C6.39995 12.3731 5.77316 12.9999 4.99997 12.9999H2.39999C1.62679 12.9999 1 12.3731 1 11.5999V2.39998ZM9 8.80036C8.88954 8.80036 8.8 8.88991 8.8 9.00036V11.6003C8.8 11.7108 8.88954 11.8003 9 11.8003H11.6C11.7105 11.8003 11.8 11.7108 11.8 11.6003V9.00036C11.8 8.88991 11.7105 8.80036 11.6 8.80036H9ZM7.60001 9.00036C7.60001 8.22717 8.2268 7.60037 9 7.60037H11.6C12.3731 7.60037 13 8.22717 13 9.00036V11.6003C13 12.3736 12.3731 13.0003 11.6 13.0003H9C8.2268 13.0003 7.60001 12.3736 7.60001 11.6003V9.00036ZM8.79994 2.39998C8.79994 2.28953 8.88949 2.19999 8.99994 2.19999H11.5999C11.7104 2.19999 11.7999 2.28953 11.7999 2.39998V4.99997C11.7999 5.11043 11.7104 5.19996 11.5999 5.19996H8.99994C8.88949 5.19996 8.79994 5.11043 8.79994 4.99997V2.39998ZM8.99994 1C8.22675 1 7.59995 1.6268 7.59995 2.39998V4.99997C7.59995 5.77316 8.22675 6.39995 8.99994 6.39995H11.5999C12.3731 6.39995 12.9999 5.77316 12.9999 4.99997V2.39998C12.9999 1.6268 12.3731 1 11.5999 1H8.99994Z"})})},507807:(e,t,o)=>{o.d(t,{S:()=>m,f:()=>g});o(944114);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(857639),l=(o(16280),()=>o(439180)),s=()=>o(630116),c=()=>o(317909);var d=()=>o(878423),p=()=>o(733539),u=()=>o(246125);function m(e,t){let{canUndo:o,shouldPersistOperation:m}=t;const g=(0,r().v3)(),f=(0,n.useRef)([]).current,h=(0,n.useCallback)((e=>{f.push(...e)}),[f]),y=(0,n.useCallback)((e=>{m&&!m(e)||h([e])}),[h,m]),v=(0,u().l)(e,{cacheFallback:g.defaultRecordCache.inMemoryRecordCache,isTemporaryData:!0,onOperationCallback:y});(0,n.useEffect)((()=>{d().A.initializeCache(e,v)}),[e,v]);const b=(0,n.useCallback)((()=>{p().default.reset(),d().A.clearCache(e)}),[e]);(0,n.useEffect)((()=>(p().default.reset(),()=>{p().default.reset(),d().A.expire(e)})),[e]);const x=(0,i().K8)((()=>p().default.state.undoStack.length>0),[]);(0,n.useEffect)((()=>{d().A.updateUnsavedCacheState(e,x)}),[e,x]);const w=(0,n.useCallback)((async e=>{if(0===f.length)return void 0;v.assertUnexpired(),function(e){for(const t of p().default.state.undoStack)for(const o of t.transactions)for(const t of o.stores)if(t.inMemoryRecordCache!==e&&!t.inMemoryRecordCache.isMockTextStore){const n=o.getUserActionForAnalyticsPurposesOnly(),r=t.inMemoryRecordCache.name,i=e.name,l=`Undoable user action "${n}" was applied to cache "${r}", but only operations in the cache "${i}" should be in the undo stack!`;(0,a().log)({from:"useLocalDraft",type:"invalidStoreInRevisionStack",level:"error",data:{message:l,miscDataToConvertToString:{userAction:n,inMemoryRecordCacheName:r,expectedInMemoryRecordCacheName:i}}})}}(v);const{serverCommitResult:t}=c().createAndCommit({environment:g,userAction:e,perform(e){!function(e){let{environment:t,transaction:o,operationsWithStores:n}=e;for(const{operation:r,store:i}of n){if(!(i instanceof s().pm))continue;const e=i.clone(t.defaultRecordCache.inMemoryRecordCache);(0,l().ph)(r)?c().applyCrdtTextOperation({store:i,operation:r,transaction:o,invertedOperation:void 0}):c().applyOperation({transaction:o,store:e,operation:r})}}({environment:g,transaction:e,operationsWithStores:f}),e.postSubmitCallbacks.push((e=>{e||(v.expire(),p().default.reset())}))},canUndo:o});return t}),[e,o,g,f,v]);return(0,n.useMemo)((()=>({cache:v,hasChanges:x,persist:w,reset:b})),[x,w,b,v])}function g(e,t){return(0,i().K8)((()=>t.clone(e.cache)),[t,e.cache])}},525884:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M8.65 8.25a.625.625 0 1 0 0 1.25h.725v3.25H8.65a.625.625 0 1 0 0 1.25h2.7a.625.625 0 1 0 0-1.25h-.725V8.875A.625.625 0 0 0 10 8.25zM10.7 6.3a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,n.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},i=(0,o(340498).wt)("infoCircle",r)},551619:(e,t,o)=>{o.d(t,{Hy:()=>P,NV:()=>M,O9:()=>B,Rg:()=>R,Sm:()=>E,dK:()=>V,f7:()=>L,l8:()=>N,n$:()=>F,no:()=>O,sx:()=>A});var n=()=>o(484714),r=()=>o(792485),i=()=>o(56366),a=()=>o(700500),l=()=>o(651124),s=()=>o(519831),c=()=>o(620689),d=()=>o(591197),p=()=>o(519839),u=()=>o(835066),m=()=>o(964345),g=()=>o(68465),f=()=>o(753199),h=()=>o(504836),y=()=>o(478726),v=()=>o(747100),b=()=>o(963589),x=()=>o(665579),w=()=>o(351360),S=()=>o(525569),k=()=>o(508496),C=()=>o(375447),I=()=>o(66496),_=()=>o(548821),j=()=>o(712505),T=()=>o(302022);function M(e){(0,f().SQ)({event:e,context:f().y$.EditorMouseDown,callback:()=>{}})}function A(e){(0,f().SQ)({event:e,context:f().y$.EditorClick,callback:()=>{}})}function P(e){return(0,i().K8)((()=>Boolean(T().A.state.pageMap[e.id])||I().A.state.pages.has(e.id)),[e.id])}function R(e,t){const o=(0,n().v3)(),a=(0,r().S)(),l=P(e),s=(0,i().K8)((()=>{var o,n;return t===_().Rr.Frame?Boolean(null===(o=w().default.state.currentLoadingContainerStore)||void 0===o?void 0:o.state.ready):t===_().Rr.PeekView&&j().default.state.open?Boolean(null===(n=j().default.state.loadingContainerStore)||void 0===n?void 0:n.state.ready):t===_().Rr.CollectionPageView||t===_().Rr.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),c=L(e);return(0,i().K8)((()=>{if(!s)return!1;const t=o.currentUser.isLoggedIn(),n=a&&a.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=n&&n.hasPublicPermission)||"edit"===(null==n?void 0:n.permission))&&!l&&!c&&(!(0,g().ZE)(n)||"completionPopup"!==S().default.state.type))}),[o.currentUser,c,s,a,l,e])}function B(e,t){const o=(0,n().v3)(),a=(0,r().S)(),{isTablet:l}=(0,n().Y0)(),s=(0,b().X)("tablet_refresh_template_pills_gate");return(0,i().K8)((()=>{if(t===_().Rr.SitePreview)return!1;if(o.device.isMobile&&(!l||!s))return!1;if(!o.currentUser.isLoggedIn())return!1;const n=a&&a.publicEditModeStore.state;if(null!=n&&n.hasPublicPermission&&"edit"!==(null==n?void 0:n.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const r=e.getContentStores()[0];if(r&&!r.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const i=m().gZ.state,c=m().Di.state;if(i&&e.id===c)return!1;return!((0,y().L5)(t)?d().VY.state:d().u3.state)}),[o,a,e,t,l,s])}function L(e){return(0,i().K8)((()=>{if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(a().xd.externalObjectInstancePage)}),[e])}function E(e){return(0,i().K8)((()=>{if(!(0,h().pB)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===s().Vl){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function V(e){return(0,i().K8)((()=>{if(!(0,h().pB)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function N(e){return(0,i().K8)((()=>{if(!k().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===l().IE.CsvImport}),[e])}function F(e){const t=(0,n().v3)(),{device:o,WindowSizeStore:r}=t,a=(0,i().K8)((()=>{const e=r.state.height,n=o.isMobile&&C().A.state.open?e:0;return c().C6(t)+n}),[t,r,o.isMobile]);return(0,i().K8)((()=>"home-phone"===e?x().q3:o.isTablet?380:o.isIOS?Math.max(350,a):o.isMobile?400:"side-peek"===e||"center-peek"===e?v().ln:"home"===e?x().wH:"30vh"),[o,a,e])}function O(e){const t=(0,n().v3)(),o=(0,i().K8)((()=>(0,u().dC)(t,e)),[t,e]);return(0,i().K8)((()=>o&&!e.isFullWidth()?(0,u().Zy)(t,(0,v().cq)(e),(0,p().RX)(e)):0),[t,o,e])}},575154:(e,t,o)=>{o.d(t,{q:()=>p});o(898992),o(354520),o(581454);var n=()=>o(56366),r=()=>o(663077),i=()=>o(496603),a=()=>o(863987),l=()=>o(793863),s=()=>o(200277),c=()=>o(437622),d=()=>o(580101);function p(e){let{parentStore:t,returnAllTemplates:o}=e;const p=(0,n().K8)((()=>{const e=a().A.getState();return((null==e?void 0:e.templatesWithRowIds)??[]).map((e=>e.template)).filter((e=>(0,r().Xq)(e,"collection")))}),[],{useDeepEqual:!0}),u=(0,n().K8)((()=>{d().A.getState();const e=(0,c().p3)().function;return e&&(0,r().AU)(e)?e:void 0}),[]),m=(0,n().K8)((()=>(0,s().$)({persona:u,parentStore:t})),[u,t],{useDeepEqual:!0});return(0,n().K8)((()=>(0,i().hS)([...p,...m,...o?(0,l().oA)():[]],(e=>e.templateId))),[p,m,o])}},580101:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){}}const r=new n},591197:(e,t,o)=>{o.d(t,{VY:()=>l,ZJ:()=>i,u3:()=>a});var n=()=>o(496506);class r extends(()=>o(757695))().default{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const i=new r,a=new(n().default)((()=>!1!==i.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),l=new(n().default)((()=>!1!==i.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},598985:(e,t,o)=>{o.d(t,{J:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("templatesNewColored",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{fill:"#FFB110",fillRule:"evenodd",d:"M6.014 16.338a4.429 4.429 0 004.429-4.48H8.88c-.254 0-.512 0-.732-.018a2.26 2.26 0 01-.86-.226 2.24 2.24 0 01-.979-.979 2.26 2.26 0 01-.226-.86 9.471 9.471 0 01-.018-.731V7.48a4.44 4.44 0 014.179 3.111 4.431 4.431 0 00-8.659 1.318 4.43 4.43 0 004.43 4.43z",clipRule:"evenodd"}),(0,n.jsx)("path",{fill:"#097FE8",d:"M12.902 11.044c.463-.802.694-1.203.997-1.338a1.02 1.02 0 01.828 0c.302.135.534.536.996 1.338l2.028 3.512c.463.802.695 1.203.66 1.532-.03.287-.18.548-.414.718-.267.194-.73.194-1.656.194h-4.057c-.925 0-1.388 0-1.656-.194a1.019 1.019 0 01-.414-.718c-.035-.329.197-.73.66-1.532l2.028-3.512z"}),(0,n.jsx)("path",{fill:"#F64932",fillRule:"evenodd",d:"M7.287 4.63c0-.571 0-.856.111-1.074.098-.192.254-.347.445-.445C8.061 3 8.346 3 8.916 3h4.379c.57 0 .855 0 1.073.111.191.098.347.253.445.445.11.218.11.503.11 1.073v3.852a2.24 2.24 0 00-1.521.109c-.46.204-.75.56-.94.83a13.31 13.31 0 00-.594.97l-.024.043-.118.203h-2.81c-.57 0-.855 0-1.073-.11a1.018 1.018 0 01-.445-.445c-.11-.218-.11-.503-.11-1.074V4.63z",clipRule:"evenodd"})]})})},640868:(e,t,o)=>{o.d(t,{U:()=>p});o(16280);var n=()=>o(454984),r=()=>o(688728),i=()=>o(475140),a=()=>o(789280),l=()=>o(778781),s=()=>o(317909),c=()=>o(204521),d=()=>o(658616);function p(e){let{environment:t,transaction:o,layoutStore:p,position:u,sessionId:m,beforePerformDeleteModule:g}=e;const f=p.getModules();if(!f)throw new Error("[deleteModuleAtPosition] modules by area not found for layout store");const h=(0,i().EX)(f,(e=>e.id===u.moduleId));if(!h)return;const{module:y,position:v}=h;if(!(0,a().Fe)(y))throw new Error("[deleteModuleAtPosition] module to delete is not removeable");var b;(s().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){!function(e){const{transaction:t,layoutStore:o,moduleLocation:i,moduleToDelete:a,beforePerformDeleteModule:c}=e;c&&c(t);(0,l().V6)(a)&&(0,d().deleteViewsModuleDependencies)({layoutStore:o,viewsModule:a,transaction:t});if("form_conditional_modules"===i.area){const e=n().N4.removeChildModule({pointer:o.pointer,modulesByArea:o.getModules(),module:a});for(const n of e)s().applyOperation({transaction:t,store:o,operation:n})}else{const e="views_main_tab_modules"===i.area?{area:i.area,viewId:i.viewId}:{area:r().Zm[i.area]};s().applyOperation({transaction:t,store:o,operation:n().N4.deleteModuleInArea({...e,pointer:o.pointer,moduleId:a.id})})}}({environment:t,transaction:e,layoutStore:p,moduleLocation:v,moduleToDelete:y,beforePerformDeleteModule:g})},userAction:"pageLayout.deleteActions.deleteModuleAtPosition"}),m)&&c().PS({environment:t,module:y,sessionId:m,collectionId:null===(b=p.getCollectionModel())||void 0===b?void 0:b.id,layoutId:p.id,context:(0,r().We)(u.area),area:u.area})}},658616:(e,t,o)=>{o.r(t),o.d(t,{deleteViewsModuleDependencies:()=>a});var n=()=>o(220719),r=()=>o(44729),i=()=>o(630116);function a(e){const{layoutStore:t,viewsModule:o,transaction:a}=e,l=(0,n().o9)(i().Bv.createChildStore(t,o.collection_view_block_pointer));r().zz({childStore:l,parentStore:t,transaction:a})}},665579:(e,t,o)=>{o.d(t,{$E:()=>T,$L:()=>l,BZ:()=>d,EC:()=>g,EI:()=>x,Ed:()=>u,Fq:()=>y,Lu:()=>S,Mk:()=>m,O0:()=>_,UO:()=>M,V$:()=>I,VQ:()=>f,Wh:()=>k,Xx:()=>w,Xy:()=>c,YS:()=>h,_g:()=>b,dd:()=>p,pW:()=>s,q3:()=>a,wH:()=>i});var n=()=>o(496603),r=()=>o(534177);const i=160,a=40,l=24,s=20,c=600,d=270,p=405,u=480,m=500,g=void 0,f=16,h=10,y=8,v=(o(69447).nh,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),b=4;function x(e){return{icon:e.mediumIconColor,text:e.mediumTextColor}}function w(e){return{width:48,height:48,fill:e.lightIconColor}}function S(e){let{theme:t,isPhone:o}=e;return o?t.personalHomeBackgroundPhone:t.surface.page}function k(e){let{theme:t,isPhone:o,buttonState:n}=e,r=t.whiteButtonBackground;switch(n){case"hovered":r=t.whiteButtonHoveredBackground;break;case"pressed":r=t.whiteButtonPressedBackground}return o&&(r=void 0),{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",background:r,...v,boxShadow:j({isPhone:o,theme:t,borderOnly:!0}),width:28,height:28,borderRadius:4}}const C=1;function I(e){let{isPhone:t,theme:o}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:o.home.tile.background,boxShadow:j({isPhone:t,theme:o}),...v}}function _(e){let{mode:t,isPhone:o}=e;switch(t){case"dark":return 0;case"light":return C;default:return(0,r().ub)(t),0}}function j(e){let{isPhone:t,theme:o,borderOnly:r}=e;if("dark"===o.mode)return"unset";o.mode;const i=_({mode:o.mode,isPhone:t});return(0,n().oE)([r||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${i}px rgba(0, 0, 0, 0.05)`]).join(", ")}function T(e){return{display:"flex",flexDirection:"column",width:e.isPhone?"100%":700,gap:24}}function M(e){const{isPhone:t,theme:o,borderOnly:n}=e;return{unhoveredBoxShadow:j({isPhone:t,theme:o,borderOnly:n}),hoveredBoxShadow:"light"===o.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):o.homeShadow.card.hovered}}},757491:(e,t,o)=>{o.d(t,{l:()=>r});var n=o(296540);function r(e){return(0,n.useEffect)((()=>()=>e()),[])}},789280:(e,t,o)=>{o.d(t,{Fe:()=>i,wm:()=>a});const n={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,relationsGroup:!0,formSubmit:!0,formQuestion:!0,formTitle:!0,placeholder:!0,transcript:!0,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,views:!0,viewsMain:!1},r={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,formSubmit:!1,formQuestion:!1,formTitle:!1,placeholder:!1,transcript:!1,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,relationsGroup:!0,editor:!1,views:!1,viewsMain:!1};function i(e){return n[e.type]}function a(e){return r[e.type]}},793863:(e,t,o)=>{o.d(t,{H:()=>T,Mq:()=>A,oA:()=>M});o(581454);var n=o(296540),r=()=>o(56366),i=()=>o(401497),a=()=>o(428045),l=()=>o(467730),s=()=>o(47966),c=()=>o(571731),d=()=>o(598985),p=()=>o(919709),u=()=>o(959013),m=()=>o(496603),g=()=>o(939740),f=()=>o(554509),h=()=>o(89924),y=()=>o(902842),v=()=>o(338907),b=()=>o(913454),x=()=>o(32454),w=()=>o(458097),S=()=>o(84817),k=()=>o(115512),C=o(474848);const I=n.forwardRef(((e,t)=>{const{icon:n,label:r,description:a,...l}=e,s=(0,i().IS)((e=>({button:{width:"100%",borderRadius:12,margin:0,...(0,k().nl)({width:1,color:e.stroke.input})},hovered:{background:e.modalBackground,...(0,k().nl)({width:2,color:e.stroke.uiBlueSecondary})},pressed:{background:e.modalBackground,...(0,k().nl)({width:2,color:e.stroke.uiBluePrimary})},templateIcon:{marginTop:a?2:0},enterIcon:{width:16,justifySelf:"end",color:e.icon.tertiary}})),[a]);return(0,C.jsx)(o(760217).A,{...l,buttonStyle:s.button,hoveredStyle:s.hovered,pressedStyle:s.pressed,itemMarginLeft:0,itemMarginRight:0,ref:t,title:(0,C.jsxs)(S().Y1,{direction:"horizontal",align:a?"top-left":"center-left",gap:12,padding:"12px 14px",children:[(0,C.jsx)("div",{style:s.templateIcon,children:n}),(0,C.jsxs)(S().Y1,{gap:4,children:[(0,C.jsx)(f().D,{styleName:"UIRegular-14px/Medium",children:r}),a&&(0,C.jsx)(f().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:a})]}),l.focused&&(0,o(356596).K)(s.enterIcon)]})})}));I.displayName="SearchResultButton";var _=()=>o(992032);function j(e){const{template:t,label:o,description:n}=e;return(0,C.jsx)(I,{icon:(0,C.jsx)(y().z,{template:t,size:18}),label:o??t.value.targetCollection.name,description:n??t.description,...e})}function T(e){let{query:t,onSelectTemplate:o,onAddEmptyPage:l,onAddEmptyDatabase:y,onMarketplaceClick:v,showEmptyPageButton:S}=e;const k=(0,r().K8)((()=>(0,b().getIsSetupGeneratorEnabled)()),[]),T=(0,i().IS)((e=>({optionIcon:{height:16,width:"auto",color:e.icon.secondary},section:{gap:8,padding:"0 0 8px 0"},sectionTitle:{padding:"16px 0 0 0",marginTop:0,marginBottom:4}})),[]),P=function(e){const t=(0,r().K8)((()=>M()),[]);return(0,n.useMemo)((()=>A(e,t)),[e,t])}(t),R=(0,r().K8)((()=>b().globalWorkflowTemplates.fromIdOfType({templateId:a().MH,type:"collection"})),[]),B=P.map((e=>({key:e.templateId,render:t=>{let{ref:o,...n}=t;return(0,C.jsx)(j,{template:e,...n})},action:()=>o(e,{type:"suggested_template",allOrderedTemplateIds:P.map((e=>e.templateId))})}))),L=(0,n.useMemo)((()=>k?{key:a().MH,render:e=>{let{ref:o,...n}=e;return(0,C.jsx)(j,{template:R,label:(0,C.jsx)(u().sA,{id:"workflowTemplatesOnboardingModal.searchResults.buildWithAiLabel",defaultMessage:"Build “{searchQuery}” with AI",values:{searchQuery:t}}),description:(0,C.jsx)(u().sA,{id:"workflowTemplatesOnboardingModal.searchResults.buildWithAiDescription",defaultMessage:"Use AI to generate a tailored setup"}),...n})},action:async()=>{o(R,{type:"ai_generated_template"});const e=w().A.state;if(!e.open||!e.setupGenerator)return;e.setupGenerator.store.setState({...e.setupGenerator.store.state,prompt:(0,p().x9d)(t)}),(0,x().moveToNextOnboardingStep)();await e.setupGenerator.submitPrompt({from:"initial-input"})&&(0,x().moveToNextOnboardingStep)()}}:void 0),[k,R,t,o]),E=(0,n.useMemo)((()=>(0,m().oE)([S?{key:"new-page",render:e=>(0,C.jsx)(I,{icon:(0,s().Y)(T.optionIcon),label:(0,C.jsx)(u().sA,{id:"workflowTemplatesOnboardingModal.searchResults.newPage",defaultMessage:"New “{searchQuery}” page",values:{searchQuery:t}}),...e}),action:()=>l({title:t})}:void 0,{key:"new-database",render:e=>(0,C.jsx)(I,{icon:(0,c().J)(T.optionIcon),label:(0,C.jsx)(u().sA,{id:"workflowTemplatesOnboardingModal.searchResults.newDatabase",defaultMessage:"New “{searchQuery}” database",values:{searchQuery:t}}),...e}),action:()=>y({title:t})},{key:"marketplace",render:e=>(0,C.jsx)(I,{icon:(0,d().J)(T.optionIcon),label:_().Ac,...e}),action:e=>v(e.event)}])),[S,T.optionIcon,t,l,y,v]),V=(0,n.useMemo)((()=>[{key:"collection-templates",items:(0,m().oE)([...B,L]),render:e=>(0,C.jsx)(h().A,{title:(0,C.jsx)(f().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:(0,C.jsx)(u().sA,{id:"workflowTemplatesOnboardingModal.searchResults.topResults",defaultMessage:"Top results"})}),style:T.section,desktopTitleStyle:T.sectionTitle,mobileTitleStyle:T.sectionTitle,...e})},{key:"more-options",items:E,render:e=>(0,C.jsx)(h().A,{title:(0,C.jsx)(f().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:(0,C.jsx)(u().sA,{id:"workflowTemplatesOnboardingModal.searchResults.moreOptions",defaultMessage:"More options"})}),style:T.section,desktopTitleStyle:T.sectionTitle,mobileTitleStyle:T.sectionTitle,...e})}]),[B,L,E,T]);return(0,C.jsx)(g().Ay,{initialFocus:0,type:g().Oh.Vertical,sections:V})}function M(){const e=m().sb([...(0,a().dj)({isM3_3Enabled:(0,v().Te)()}),...(0,a().Lh)({isM3_3Enabled:(0,v().Te)()})]);return b().globalWorkflowTemplates.allOfType({templateIds:e,type:"collection"})}function A(e,t){return(0,l().Ay)(e,t,(e=>`${e.value.targetCollection.name} ${e.description}`),{minThreshold:l().qR,normalizeFuzzyScore:!0})}},806638:(e,t,o)=>{o.d(t,{P:()=>i});var n=()=>o(427704),r=()=>o(435009);function i(e){const{environment:t}=e;r().oo({environment:t,url:n().JZ.marketplace,redirect:!1})}},830739:(e,t,o)=>{o.r(t),o.d(t,{WorkflowTemplatesOnboardingModalWithErrorBoundary:()=>Zn});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(534177),l=()=>o(938090),s=()=>o(84817),c=()=>o(107683),d=()=>o(58283),p=()=>o(951710),u=()=>o(555822),m=()=>o(112995),g=()=>o(989423),f=()=>o(896326),h=()=>o(458097),y=(o(898992),o(354520),o(581454),()=>o(203066)),v=()=>o(153321),b=()=>o(401497),x=()=>o(663077),w=()=>o(919709),S=()=>o(959013),k=()=>o(581218),C=()=>o(710149),I=()=>o(664565),_=()=>o(58293),j=()=>o(102777),T=()=>o(110165),M=()=>o(725614),A=()=>o(285790),P=()=>o(545805),R=()=>o(246722),B=()=>o(38337),L=()=>o(847743),E=()=>o(301421),V=(o(16280),o(672577),o.n(o(794148))),N=()=>o(449506),F=()=>o(130102),O=()=>o(436572),z=()=>o(623580),W=()=>o(7674),D=()=>o(342461),G=o(474848);const K=(0,S().YK)({sendFeedbackButton:{id:"setupGenerator.sendFeedbackButton",defaultMessage:"Send feedback"},feedbackPlaceholder:{id:"setupGenerator.feedbackPlaceholder",defaultMessage:"Share your feedback"},submitSuccess:{id:"setupGenerator.submitSuccess",defaultMessage:"Your feedback has been submitted, thanks!"}});function H(e){const{onSubmit:t}=e,o=(0,S().tz)(),[r,i]=(0,n.useState)(""),a=(0,n.useCallback)((()=>{t(r),O().D6({label:o.formatMessage(K.submitSuccess)})}),[r,o,t]);return(0,G.jsx)(W().tf,{header:(0,G.jsx)(W().YA,{iconAndTitle:(0,G.jsx)("div",{style:{padding:"0 24px"},children:(0,G.jsx)(W().ZQ,{iconGroup:F().u,title:(0,G.jsx)(S().sA,{id:"setupGenerator.feedbackModal.title",defaultMessage:"How can we improve this result?"})})}),description:(0,G.jsx)(S().sA,{id:"setupGenerator.feedbacModal.description",defaultMessage:"Your feedback helps Notion AI improve. We'll share this prompt and the result with the Notion team."})}),footer:(0,G.jsx)(W().aO,{layout:"vertical",primaryButtons:[{label:o.formatMessage(K.sendFeedbackButton),onClick:a,isDisabled:0===r.length}]}),children:(0,G.jsx)(s().Y1,{padding:2,children:(0,G.jsx)(z().A,{placeholder:o.formatMessage(K.feedbackPlaceholder),textarea:!0,focusInitial:!0,value:r,onChange:e=>i(e.target.value)})})})}function U(e){const{traceId:t,spaceId:o,transcript:a}=e??{},[l,s]=(0,n.useState)(void 0),d=(0,i().O$)(h().A),p=(0,r().v3)(),u=a.find((e=>"config"===e.type));if(!u)throw new Error("No config step found");return[l,(0,n.useCallback)((async e=>{if(s(e),void 0!==e&&(V()(d.open,"Trying to submit feedback while modal is not open"),(0,g().u4)({environment:p,event:{eventName:"workflow_template_onboarding_feedback",eventProperties:{feedback_type:e,...(0,f().gM)(d)}}})),o&&(N().callApi({eventName:"saveInferenceTranscriptFeedback",environment:p,data:{spaceId:o,type:u.value.type,traceId:t,feedbackType:e,userComment:void 0}}),"thumbs_down"===e)){const e=await async function(){return await(0,D().showAsyncModal)((e=>(0,G.jsx)(c().s,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{type:"fixed",length:400}},render:()=>(0,G.jsx)(H,{onSubmit:e.resolve})})))}();e&&N().callApi({eventName:"saveInferenceTranscriptFeedback",environment:p,data:{spaceId:o,type:u.value.type,traceId:t,feedbackType:"thumbs_down",userComment:e}})}}),[p,o,t,u,d])]}var $=()=>o(24184),Y=()=>o(340498);const q=(0,Y().xh)("handThumbsDown",{default:{loader:()=>o.e(65728).then(o.bind(o,765728))},small:{loader:()=>o.e(66230).then(o.bind(o,243849))},mini:{loader:()=>o.e(34526).then(o.bind(o,534526))},large:{loader:()=>o.e(28366).then(o.bind(o,528366))}}),Q=(0,Y().xh)("handThumbsDownFill",{default:{loader:()=>o.e(56051).then(o.bind(o,756051))},small:{loader:()=>o.e(64477).then(o.bind(o,864477))},mini:{loader:()=>o.e(3723).then(o.bind(o,503723))},large:{loader:()=>o.e(78113).then(o.bind(o,978113))}}),Z=(0,Y().xh)("handThumbsUp",{default:{loader:()=>o.e(68563).then(o.bind(o,168563))},small:{loader:()=>o.e(48861).then(o.bind(o,548861))},mini:{loader:()=>o.e(60747).then(o.bind(o,860747))},large:{loader:()=>o.e(19617).then(o.bind(o,619617))}}),X=(0,Y().xh)("handThumbsUpFill",{default:{loader:()=>o.e(68748).then(o.bind(o,668748))},small:{loader:()=>o.e(13450).then(o.bind(o,113450))},mini:{loader:()=>o.e(58034).then(o.bind(o,658034))},large:{loader:()=>o.e(32594).then(o.bind(o,332594))}});var J=()=>o(460292),ee=()=>o(859428),te=()=>o(962730);const oe=(0,S().YK)({negativeFeedbackTooltip:{defaultMessage:"Share negative feedback with Notion",id:"setupGenerator.negativeFeedbackTooltip"},positiveFeedbackTooltip:{defaultMessage:"Share positive feedback with Notion",id:"setupGenerator.positiveFeedbackTooltip"},retry:{defaultMessage:"Revert",id:"setupGenerator.retry"}});function ne(e){const{value:t,onChange:o,canRetry:n,onClickRetry:r,variantName:i}=e,a=(0,S().tz)();return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(re,{type:"thumbs_up",isSelected:"thumbs_up"===t,variantName:i,iconGroup:"thumbs_up"===t?X:Z,onClick:o}),(0,G.jsx)(re,{type:"thumbs_down",isSelected:"thumbs_down"===t,variantName:i,iconGroup:"thumbs_down"===t?Q:q,onClick:o}),n?(0,G.jsx)(ee().A,{renderTooltip:()=>(0,G.jsx)("div",{children:(0,G.jsx)(S().sA,{...oe.retry})}),placement:te().W.Bottom,render:e=>(0,G.jsx)(A().A,{onClick:r,icon:()=>(0,G.jsx)(J().Q,{iconGroup:$().e,variantName:i,colorName:"secondary"}),ariaLabel:a.formatMessage(oe.retry),...e})}):null]})}function re(e){const{type:t,onClick:o,isSelected:r,iconGroup:i,variantName:l}=e,s=(0,S().tz)(),c=(0,n.useCallback)((()=>{o(r?void 0:t)}),[o,r,t]),d=(0,n.useMemo)((()=>s.formatMessage(function(e){switch(e){case"thumbs_up":return oe.positiveFeedbackTooltip;case"thumbs_down":return oe.negativeFeedbackTooltip;default:(0,a().HB)(e)}}(t))),[s,t]);return(0,G.jsx)(ee().A,{renderTooltip:()=>(0,G.jsx)("div",{children:d}),placement:te().W.Bottom,render:e=>(0,G.jsx)(A().A,{onClick:c,icon:()=>(0,G.jsx)(J().Q,{iconGroup:i,variantName:l,colorName:r?"uiBluePrimary":"secondary"}),ariaLabel:d,...e})})}const ie={page:!0,bot:!0,team:!0,reminder:!0,date:!0,user:!0,group:!0,heading:!0,templateVariable:!0,formulaContextVariable:!0},ae={type:"none"};function le(e){const{onSubmit:t,value:o,onChange:i,canPressEnter:a,canRetry:l,feedbackArgs:s,onClickRetry:c,onFocus:d,onBlur:p,onClickStop:u,isBusy:m}=e,g=(0,r().v3)(),f=(0,S().tz)(),h=function(){const e=20,t=24;return(0,b().IS)((o=>{const n={boxShadow:o.inputBoxShadow,backgroundColor:o.surface.elevated,borderRadius:16,padding:"8px 8px 8px 12px",gap:"4px 8px",display:"flex",flexShrink:0,overflow:"hidden",height:"100%"};return{oneLineInput:{...n,flexDirection:"row",alignItems:"center",borderRadius:50},multiLineInput:{...n,display:"grid",gridTemplate:"1fr auto"},textWrapper:{paddingRight:4,flexGrow:1,display:"flex",fontSize:14,minWidth:0,overflow:"auto"},textContainer:{maxWidth:"100%",width:"100%",flexGrow:1,minWidth:0,height:"100%"},buttonWrapper:{minHeight:22,display:"flex",justifyContent:"flex-end",alignItems:"center",flexShrink:0,marginLeft:"auto"},icon:{height:e,width:e},stopIcon:{height:e,width:e,fill:o.icon.primary},button:{pointerEvents:"auto",height:Math.max(e,t),width:Math.max(e,t),borderRadius:"100%"}}}),[])}(),{store:y,setValue:v}=(0,L().AI)({initialValue:o,onChange:i});(0,n.useEffect)((()=>{const e=y.getValue();o!==e&&v(o)}),[o,v,y]);const x=(0,w().q4_)(o).length,k=!(0,w().w9s)(o),[C,I]=U(s),_=(0,n.useCallback)((()=>{M().clear({environment:g}),null==p||p()}),[g,p]),V=(0,n.useMemo)((()=>f.formatMessage({id:"setupGenerator.followUp.placeholder",defaultMessage:"Add or make changes..."})),[f]),N=(0,n.useCallback)((e=>{if(e.target===e.currentTarget){const t=E().n.findEditableWithStore(y);t&&t.handleClick(e)}}),[y]),F=x>=35;return(0,G.jsx)(P().A,{debugName:"AiFollowUpInput",capture:!0,children:(0,G.jsxs)("div",{className:B().CCX,style:F?h.multiLineInput:h.oneLineInput,onClick:N,children:[(0,G.jsx)("div",{style:h.textWrapper,children:(0,G.jsx)(R().A,{inPageFind:ae,style:h.textContainer,store:y,disabled:m,disabledMentionTypes:ie,placeholder:V,disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableSuggestEdit:!0,disableUpDownArrows:!0,disableEnter:!k||!a||m,onEnter:t,pasteBehavior:"inline",onFocus:d,onBlur:_})}),(0,G.jsxs)("div",{style:h.buttonWrapper,children:[k||m?null:(0,G.jsx)(ne,{value:C,onChange:I,onClickRetry:c,canRetry:l,variantName:"small"}),k&&!m?(0,G.jsx)(A().A,{icon:j().b,onClick:t,isBlue:k,disabled:!k,ariaLabel:f.formatMessage({id:"aiFollowUpInput.submit",defaultMessage:"Submit"}),style:h.button,iconStyle:h.icon}):null,m?(0,G.jsx)(A().A,{icon:T().L,onClick:u,iconStyle:h.stopIcon,ariaLabel:f.formatMessage({id:"aiFollowUpInput.stop",defaultMessage:"Stop"}),style:h.button}):null]})]})})}var se=()=>o(554509);function ce(e){let{text:t,styleName:o,animate:n}=e;const r=(0,b().IS)((e=>{const t=e.text.quaternary,o=e.text.primary,n={backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundColor:o,backgroundSize:"300% 100%",backgroundRepeat:"no-repeat",userSelect:"none",backgroundImage:`linear-gradient(90deg, ${o} 0%, var(--shimmer-text-faded-color) 50%, ${o} 100%)`,transition:"--shimmer-text-faded-color 0.25s ease-in-out"};return{animated:{...n,"--shimmer-text-faded-color":t},static:{...n,"--shimmer-text-faded-color":o}}}),[]);return(0,G.jsx)(se().D,{styleName:o,children:(0,G.jsx)(v().P.div,{style:n?r.animated:r.static,animate:{backgroundPosition:["150% 0","-50% 0"]},transition:{ease:"linear",duration:3,repeat:1/0},children:t})})}const de=(0,S().YK)({default:{id:"setupGenerator.loading.default",defaultMessage:"Designing database"},addingProperty:{id:"setupGenerator.loading.addingProperty",defaultMessage:"Adding {propertyName}"},addingView:{id:"setupGenerator.loading.addingView",defaultMessage:"Adding {viewName}"},addingPages:{id:"setupGenerator.loading.addingPages",defaultMessage:"Adding pages"}});function pe(e){const{statusLabel:t}=e,o=(0,S().tz)();let n;switch(null==t?void 0:t.type){case"default":n=o.formatMessage(de.default);break;case"addingProperty":n=o.formatMessage(de.addingProperty,{propertyName:t.propertyName});break;case"addingView":n=o.formatMessage(de.addingView,{viewName:t.viewName});break;case"addingPages":n=o.formatMessage(de.addingPages);break;default:return null}return(0,G.jsx)(ce,{styleName:"UITitle-22px/Semibold",text:n,animate:!0})}var ue=()=>o(265665),me=()=>o(972435);const ge=(0,S().YK)({featureTemplateRequired:{id:"featureTemplateRequired",defaultMessage:"This is required"}});function fe(e){let{template:t,isRequired:o,...n}=e;const r=o?me().A.formatMessage(ge.featureTemplateRequired):void 0;return(0,G.jsx)(ee().A,{...n,disableTooltip:void 0===r,renderTooltip:()=>r})}var he=()=>o(902842),ye=()=>o(913454),ve=()=>o(32454),be=()=>o(493823);function xe(e){let{children:t,isSelected:o,disabled:n,onClick:r,tooltipEvents:i,style:a}=e;const l=(0,b().IS)((e=>({button:{fontSize:14,paddingLeft:12,paddingRight:12,borderRadius:24,color:e.text.primary,boxShadow:`0 0 0 1px ${e.stroke.primary}`,...o&&{boxShadow:`0 0 0 1.5px ${e.stroke.uiBluePrimary}`,background:e.buttonBackground},...a},buttonHovered:{...o?{boxShadow:`0 0 0 1.5px ${e.stroke.uiBluePrimary}`,background:e.outlineBlueButtonHoveredBackground}:{boxShadow:`0 0 0 1px ${e.stroke.input}`,background:e.buttonHoveredBackground}}})),[o,a]);return(0,G.jsx)(be().p,{...i,style:l.button,disabled:n,disabledFeedback:!0,onClick:r,hoveredStyle:l.buttonHovered,children:t})}var we=()=>o(149375),Se=()=>o(212050),ke=()=>o(278589),Ce=()=>o(204063),Ie=()=>o(581495),_e=()=>o(338907),je=()=>o(145214),Te=(o(908872),()=>o(148307)),Me=()=>o(743176),Ae=()=>o(784892),Pe=()=>o(591779),Re=()=>o(751735),Be=()=>o(355594),Le=()=>o(816559),Ee=()=>o(78901),Ve=()=>o(67775),Ne=()=>o(399762),Fe=()=>o(828634),Oe=()=>o(953418),ze=()=>o(357339),We=()=>o(184038);const De=[{avatarSrc:Te().A.images.workflowTemplates.previewAvatar1Png,name:(0,G.jsx)(S().sA,{defaultMessage:"Taylor Moore",id:"previewTableView.personProperty.name1"})},{avatarSrc:Te().A.images.workflowTemplates.previewAvatar2Png,name:(0,G.jsx)(S().sA,{defaultMessage:"Emma Johnson",id:"previewTableView.personProperty.name2"})},{avatarSrc:Te().A.images.workflowTemplates.previewAvatar3Png,name:(0,G.jsx)(S().sA,{defaultMessage:"James Smith",id:"previewTableView.personProperty.name3"})}];function Ge(e){const t=(0,b().IS)((e=>({container:{display:"flex",alignItems:"center",width:"100%"},avatarWrapper:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,marginRight:6,boxSizing:"content-box",borderRadius:"100%",overflow:"hidden",outlineWidth:1,outlineStyle:"solid",outlineColor:e.stroke.secondary},avatarImage:{width:"100%",height:"100%",borderRadius:"100%"}})),[]),o=De[e.index%De.length];return(0,G.jsxs)("div",{style:t.container,children:[(0,G.jsx)("div",{style:t.avatarWrapper,children:(0,G.jsx)(Le().Ay,{src:o.avatarSrc,style:t.avatarImage})}),(0,G.jsx)(We().F,{style:Ke(e.index)})]})}function Ke(e){const t=function(e){return 60+(2*(e+3)+43)%(e%5+2)*5}(e);return{width:`${t}%`,maxWidth:"80%"}}const He=[30,45,35,40];function Ue(e){let{index:t,offset:o}=e;return{width:He[(t+o)%He.length]}}const $e=[2,4,3];function Ye(e){let{index:t}=e;const o=$e[t%$e.length],n=(0,b().IS)((e=>({container:{display:"flex",flexDirection:"row",gap:6},file:{width:22,height:22}})),[]);return(0,G.jsx)("div",{style:n.container,children:Array.from({length:o}).map(((e,t)=>(0,G.jsx)(We().F,{style:n.file},t)))})}function qe(e){let{propertyId:t,propertySchema:o,columnIndex:n}=e;switch(o.type){case"file":return(0,ze().Nb)().map(((e,o)=>(0,G.jsx)(Ye,{index:o},`file-${t}-${o}`)));case"number":return(0,ze().Nb)().map(((e,o)=>(0,G.jsx)(We().F,{style:Ue({index:o,offset:n})},`number-${t}-${o}`)));case"text":case"title":return(0,ze().Nb)().map(((e,o)=>(0,G.jsx)(We().F,{style:Ke(o)},`text-skeleton-${t}-${o}`)));case"select":case"multi_select":return(0,ze().de)(o).map(((e,o)=>(0,G.jsx)(Ne().O,{value:e.value,color:e.color,format:Ae().NY.Medium,showRemoveButton:!1,isSingle:!0},`${t}-${o}`)));case"status":return(0,ze().de)(o).map(((e,o)=>(0,G.jsx)(Ne().q,{value:e.value,color:e.color,format:Ae().NY.Medium,showRemoveButton:!1,isSingle:!0,groupColor:e.color},`${t}-${o}`)));case"created_time":case"last_edited_time":case"last_visited_time":case"date":return(0,ze().JC)(o).map(((e,o)=>(0,G.jsx)(We().F,{style:{width:"70%",maxWidth:"70%"}},`date-skeleton-${t}-${o}`)));case"created_by":case"last_edited_by":case"person":return(0,ze().Nb)().map(((e,o)=>(0,G.jsx)(Ge,{index:o},`${t}-${o}`)));case"checkbox":return(0,ze().rQ)().map(((e,o)=>(0,G.jsx)(Be().o,{checked:e,disabled:!0},`${t}-${o}`)));case"formula":return"percent"===o.number_format?(0,ze().Nb)().map(((e,o)=>(0,G.jsx)(Ze,{index:o},`progress-bar-${t}-${o}`))):(0,ze().Nb)().map(((e,o)=>(0,G.jsx)(We().F,{style:Ue({index:o,offset:n})},`formula-${t}-${o}`)));default:return[]}}const Qe=[15,90,55,0];function Ze(e){let{index:t}=e;const o=Qe[t%Qe.length],n=(0,b().DP)(),{filledColor:r,gapColor:i,unfilledColor:a}=(0,Ve().z)({theme:n,color:"green"});return(0,G.jsx)(Ee().z,{percentage:o,filledColor:r,gapColor:i,unfilledColor:a,style:{width:"100%"}})}const Xe=250,Je=150,et=10,tt={duration:.2,ease:"easeInOut",backgroundColor:{duration:.8}};function ot(e){let{recordTitles:t,userCustomizations:o,collectionViewTemplate:r}=e;const[a,...l]=(0,i().K8)((()=>(0,ze().qH)({userCustomizations:o,collectionViewTemplate:r})),[o,r]),c=(0,Pe().ZC)(l),d=(0,n.useMemo)((()=>{if(c&&!(l.length>=c.length))return c.findIndex((e=>!l.includes(e)))}),[l,c]),p=(0,I().j)(200),u=Xe+et+l.reduce(((e,t)=>{var o;return e+((null===(o=t.tablePropertyFormat)||void 0===o?void 0:o.width)??Je)}),0);return(0,G.jsx)(s().Y1,{direction:"horizontal",height:"fill",style:{minWidth:u},children:(0,G.jsxs)(y().N,{children:[a&&(0,G.jsx)(nt,{shouldAnimate:p,propertySchema:a.value,isLastColumn:!1,rowContent:qe({propertyId:ze().DR.templateId,propertySchema:ze().DR.value,columnIndex:0}),width:Xe},a.templateId),l.map(((e,t)=>{var o;const n=e.value,r=e.templateId;return(0,G.jsx)(nt,{shouldAnimate:p,forceScrollTo:void 0!==d&&t===d-1,propertySchema:n,isLastColumn:t===l.length-1,rowContent:qe({propertyId:r,propertySchema:n,columnIndex:t}),width:(null===(o=e.tablePropertyFormat)||void 0===o?void 0:o.width)??Je},r)}))]})})}function nt(e){const{isLastColumn:t,propertySchema:o,rowContent:i,width:a,shouldAnimate:l,forceScrollTo:s}=e,c=(0,r().v3)(),d=(0,b().DP)(),p=(0,n.useRef)(null),u=(0,n.useRef)(l),[m,g]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{const e=setTimeout((()=>{p.current&&(u.current||s)&&(0,Oe().$v)({element:p.current,environment:c,behavior:"smooth",additionalPadding:{right:a}})}),200);return()=>clearTimeout(e)}),[p,a,u,s,c]);const f=(0,b().IS)((e=>({column:{flex:"0 0 auto",overflow:"hidden",background:e.white,minWidth:l?void 0:a,position:"relative"},inner:{position:"absolute",left:0,minWidth:a,height:"100%"},headerCell:{color:e.text.secondary,fontWeight:400,textWrap:"nowrap",padding:"8px 32px 8px 8px",borderBottom:`1px solid ${e.stroke.secondary}`,borderRight:t?void 0:`1px solid ${e.stroke.secondary}`,borderTop:`1px solid ${e.stroke.secondary}`,display:"flex",alignItems:"center",fontSize:14,height:32},icon:{marginRight:6},rowCell:{height:32,borderBottom:`1px solid ${e.stroke.secondary}`,display:"flex",alignItems:"center",overflow:"hidden",fontSize:14,whiteSpace:"pre",textOverflow:"ellipsis",padding:"6px 8px"},rowWrapper:{borderRight:t?void 0:`1px solid ${e.stroke.secondary}`}})),[t,a,l]),h=(i.length>0?i:(0,ze().Nb)().map((()=>""))).map(((e,t)=>(0,G.jsx)("div",{style:f.rowCell,children:e},t))),y=(0,n.useMemo)((()=>{const e=(0,Re().X4)(d.fill.uiBlue,.1),t=(0,Re().X4)(e,0),o=(null==m?void 0:m.width)??a;return l?{initial:{width:0,opacity:0,backgroundColor:e},animate:{width:o,backgroundColor:t,opacity:1},exit:{width:0,backgroundColor:t,opacity:0}}:{initial:{width:o,backgroundColor:t},animate:void 0,exit:{width:0,backgroundColor:t}}}),[l,m,a,d]);return(0,G.jsx)(v().P.div,{ref:p,layoutId:null==o?void 0:o.name,style:f.column,initial:y.initial,animate:y.animate,exit:y.exit,transition:tt,children:(0,G.jsx)(Fe().EE,{onSizeChange:g,children:(0,G.jsxs)("div",{style:f.inner,children:[(0,G.jsx)("div",{style:f.headerCell,children:o?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Me().Ay,{icon:o.icon,size:16,theme:d,type:o.type,style:f.icon}),o.name,"ai_inference"in o&&(0,G.jsx)(k().A,{})]}):null}),(0,G.jsx)("div",{style:f.rowWrapper,children:h})]})})})}function rt(e){let{userCustomizations:t,collectionViewTemplateId:o}=e;const{recordTitles:n}=t,r=(0,i().K8)((()=>o?ye().globalWorkflowTemplates.fromIdOfType({templateId:o,type:"collection_view"}):void 0),[o]),a=(null==r?void 0:r.value.type)||"table";return(0,G.jsx)(je().A,{config:{duration:200},animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},style:{flex:1,display:"flex",flexDirection:"column"},children:r?(0,G.jsx)(ot,{recordTitles:it(n,""),userCustomizations:t,collectionViewTemplate:r}):null},a)}function it(e,t){return e.map((e=>e||t))}var at=()=>o(284371),lt=()=>o(125565),st=()=>o(987017),ct=()=>o(898808);function dt(e){let{icon:t,title:o,indentPixels:n}=e;const r=(0,b().IS)((e=>({sidebarRow:{height:30,paddingTop:4,paddingBottom:4,paddingLeft:8+(n??0),paddingRight:8,display:"flex",alignItems:"center",justifyContent:"flex-start"},sidebarIcon:{},sidebarTitle:{width:"100%",marginLeft:8,fontSize:14,fontWeight:at().Wy.medium,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})),[n]);return(0,G.jsxs)("div",{style:r.sidebarRow,children:[(0,G.jsx)("div",{style:r.sidebarIcon,children:t}),(0,G.jsx)("div",{style:r.sidebarTitle,children:o})]})}const pt=180;function ut(e){let{style:t,children:o,parentStore:n,collectionTemplate:r,userCustomizations:i,previewCollectionInfo:a}=e;const l=!1,s=(0,b().IS)((e=>({wrapper:{...t,display:"flex",flexDirection:"column",flex:1,overflow:"hidden",zIndex:2,position:"relative",height:"100%"},preview:{height:"100%",display:"flex",flexDirection:"column",flex:1,border:`1px solid ${e.stroke.primary}`,borderRadius:12,backgroundColor:e.surface.wash},sidebar:{width:pt,height:400,backgroundColor:e.surface.wash,marginTop:16,padding:8,color:e.text.secondary},content:{padding:"32px 0 0 32px",display:"flex",flexDirection:"column",flex:1,height:"100%",backgroundColor:e.surface.elevated,borderRadius:12,overflowX:"scroll",overflowY:"hidden",minWidth:void 0},peopleLookingAtCollection:{position:"absolute",height:100,width:149,left:240,top:8,marginTop:-100},previewRow:{width:20,height:20,borderRadius:4,background:e.icon.quaternary,display:"flex",alignItems:"center",justifyContent:"center"}})),[t,l]);let c;if(n)switch(n.table){case"team":c=(0,G.jsx)(mt,{teamStore:n});break;case"block":case"space":c=null}else c=null;return(0,G.jsx)("div",{style:s.wrapper,children:(0,G.jsxs)("div",{style:s.preview,children:[l,(0,G.jsxs)("div",{style:s.content,children:[(0,G.jsx)(gt,{userCustomizations:i,collectionTemplate:r,focusViewTemplateId:null==a?void 0:a.focusViewTemplateId}),o]})]})})}function mt(e){let{teamStore:t}=e;const o=(0,i().K8)((()=>t.getName()),[t]);return(0,G.jsx)(dt,{icon:(0,G.jsx)(ct().x,{size:20,store:t,disabled:!0}),title:o})}function gt(e){let{userCustomizations:t,collectionTemplate:o,focusViewTemplateId:r}=e;const a=(0,b().IS)((e=>({headerWrapper:{position:"sticky",left:0,marginBottom:-1.5},titleWrapper:{display:"flex",alignItems:"center",paddingLeft:8,marginTop:8,marginBottom:8},titleText:{fontSize:24,fontWeight:700,lineHeight:"26px",whiteSpace:"pre-line",marginLeft:12,overflow:"initial"},icon:{height:16,width:16,display:"inline-block"},tabTitle:{marginLeft:4,fontSize:14,fontWeight:500}})),[]),l=n.useMemo((()=>t.featureTemplateSelections.filter((e=>"collection_view"===e.template.type&&e.selected)).map((e=>e.template.templateId))),[t.featureTemplateSelections]),s=(0,i().K8)((()=>ye().globalWorkflowTemplates.allOfType({templateIds:l,type:"collection_view"})),[l]),c=(0,i().K8)((()=>{const e=s.findIndex((e=>e.templateId===r));return-1===e?0:e}),[r,s]);return(0,G.jsxs)("div",{style:a.headerWrapper,children:[(0,G.jsxs)("div",{style:a.titleWrapper,children:[(0,G.jsx)(he().z,{template:o,size:28}),(0,G.jsx)(lt().A,{style:a.titleText,children:o.value.targetCollection.name})]}),(0,G.jsx)(st().Ay,{style:{paddingLeft:0,paddingRight:0,boxShadow:"none"},tabBorderStyle:{left:0,right:0},tabs:s.map(((e,t)=>(0,G.jsx)(ft,{collectionViewTemplate:e,index:t,selectedIndex:c},t))),selectedIndex:c,onChange:()=>{},readOnly:!0})]})}function ft(e){let{collectionViewTemplate:t,index:o,selectedIndex:n}=e;const r=o===n,i=(0,b().IS)((e=>({tabContainer:{display:"flex",alignItems:"center"},tabTitle:{marginLeft:4,fontSize:14,fontWeight:500},icon:{fill:r?e.regularIconColor:e.lightIconColor}})),[r]);return(0,G.jsxs)("span",{style:i.tabContainer,children:[(0,G.jsx)(he().z,{template:t,iconStyle:i.icon}),(0,G.jsx)("span",{style:i.tabTitle,children:t.value.name})]})}var ht=()=>o(2143),yt=()=>o(106412),vt=()=>o(963589),bt=()=>o(344482),xt=()=>o(756279),wt=()=>o(180762);var St=()=>o(317909),kt=()=>o(254497),Ct=()=>o(312296),It=()=>o(519839),_t=()=>o(101926),jt=()=>o(290966),Tt=()=>o(204067);function Mt(e){var t;let{environment:o,collectionTemplate:n,featureTemplate:r,collectionViewBlockStore:i,previousFeatureSelections:a,examplePageStores:l}=e;const s=null==i?void 0:i.getCollectionStore();if(!s)return;const c=(0,Tt().Zp)({environment:o,scopeStore:s,templateId:r.templateId});if(c&&!(0,Tt().DM)(c))return;(null===(t=a.find((e=>e.template.templateId===r.templateId)))||void 0===t?void 0:t.selected)??!1?c&&St().createAndCommit({userAction:"workflowTemplatesOnboardingPreview.removeFeatureTemplate",environment:o,canUndo:!1,perform:e=>{Rt({environment:o,transaction:e,collectionViewBlockStore:i,collectionStore:s,instancePointer:c,previousSelectionIds:a.map((e=>e.template.templateId))})}}):St().createAndCommit({userAction:"workflowTemplatesOnboardingPreview.addFeatureTemplate",environment:o,canUndo:!1,perform:e=>{At({environment:o,transaction:e,collectionViewBlockStore:i,collectionStore:s,collectionTemplate:n,featureTemplate:r,existingInstancePointer:c,examplePageStores:l})}})}function At(e){let{environment:t,transaction:o,collectionViewBlockStore:n,collectionStore:r,featureTemplate:i,existingInstancePointer:a,examplePageStores:l,collectionTemplate:s}=e;if(!n||!(0,x().Jb)(i))return;const c=a&&(0,Tt().aI)({environment:t,instancePointer:a,inMemoryRecordCache:r.inMemoryRecordCache});if(!c||"compound"===a.type)if(c&&"compound"===a.type)for(const d of a.instancePointers)if("property"===d.type)Bt({environment:t,transaction:o,propertyId:d.id,collectionStore:r});else{const e=(0,Tt().Fy)({environment:t,collectionStore:r,instancePointerId:d.id});if(!e)return;At({environment:t,transaction:o,collectionViewBlockStore:n,collectionStore:r,collectionTemplate:s,featureTemplate:e,existingInstancePointer:d,examplePageStores:l})}else if(!Pt({environment:t,transaction:o,collectionViewBlockStore:n,collectionStore:r,featureTemplate:i})){if("compound"===i.type)for(const e of i.value.templateItems){const i=ye().globalWorkflowTemplates.fromId(e.pointer);"property"===i.type&&Pt({environment:t,transaction:o,collectionViewBlockStore:n,collectionStore:r,featureTemplate:i})}(0,_t().ai)({environment:t,transaction:o,collectionStore:r,template:i,logger:new(ye().WorkflowTemplateLogger),origin:"onboarding_preview",preserveCollectionFeatureOrdering:s,examplePageStores:l})}}function Pt(e){var t,o;const{environment:n,transaction:r,collectionStore:i,collectionViewBlockStore:a,featureTemplate:l}=e,s=null===(t=It().UH(a))||void 0===t?void 0:t.normalizedDeletedSchemaStore.state,c=s&&(null===(o=Object.entries(s))||void 0===o?void 0:o.find((e=>{var t;let[o,n]=e;return(null==n||null===(t=n.workflow_template_instance)||void 0===t?void 0:t.template_id)===l.templateId})));return!!c&&(Bt({environment:n,transaction:r,propertyId:c[0],collectionStore:i}),!0)}function Rt(e){let{environment:t,transaction:o,collectionViewBlockStore:n,collectionStore:r,instancePointer:i,previousSelectionIds:a}=e;"compound"===i.type?function(e){let{environment:t,transaction:o,collectionViewBlockStore:n,collectionStore:r,instancePointer:i,previousSelectionIds:a}=e;if("compound"!==i.type)return;const l=(0,Tt().FE)({environment:t,collectionStore:r}).find((e=>e.instancePointer.id===i.id));if(!l)return;const s=(0,Tt().aL)({environment:t,collectionStore:r,compoundTemplateInstancesToDelete:[l]}).filter((e=>{const o=(0,Tt().Fy)({environment:t,collectionStore:r,instancePointerId:e.id});return o&&!a.includes(o.templateId)}));for(const c of s)Rt({environment:t,transaction:o,collectionViewBlockStore:n,collectionStore:r,instancePointer:c,previousSelectionIds:a});(0,jt().HQ)({environment:t,transaction:o,collectionStore:r,instance:i})}({environment:t,transaction:o,collectionViewBlockStore:n,collectionStore:r,instancePointer:i,previousSelectionIds:a}):(0,_t().Z5)({environment:t,transaction:o,collectionViewBlockStore:n,collectionStore:r,instancePointer:i})}function Bt(e){let{environment:t,transaction:o,collectionStore:n,propertyId:r}=e;const i=It().KA({deletedSchema:n.getDeletedSchema(),property:r});i&&((0,Ct().F)({environment:t,collectionStore:n,update:i.updateSchema,transaction:o}),(0,kt().E)({collectionStore:n,update:i.updateDeletedSchema,transaction:o}))}function Lt(){const e=(0,r().v3)(),{featureTemplateSelections:t,prevFeatureTemplateSelections:o}=(0,i().K8)((()=>{const e=h().A.state;return e.open&&e.collectionTemplate?{featureTemplateSelections:e.userCustomizations.featureTemplateSelections,prevFeatureTemplateSelections:e.userCustomizations.prevFeatureTemplateSelections}:{}}),[]);(0,n.useEffect)((()=>{o&&(0,_e().wk)()&&function(e){let{environment:t,featureTemplateSelections:o,prevFeatureTemplateSelections:n}=e;const r=h().A.state;if(!r.open||!r.collectionTemplate||!r.previewCollectionInfo)return;const{collectionTemplate:i,previewCollectionInfo:a}=r,l=n.filter((e=>{const t=o.find((t=>t.template.templateId===e.template.templateId));return t&&t.selected!==e.selected}));for(const s of l)Mt({environment:t,collectionTemplate:i,featureTemplate:s.template,previousFeatureSelections:n,collectionViewBlockStore:a.collectionViewBlockStore,examplePageStores:a.examplePageStores})}({environment:e,featureTemplateSelections:t,prevFeatureTemplateSelections:o})}),[e,t,o])}var Et=()=>o(612008),Vt=()=>o(342),Nt=()=>o(507807),Ft=()=>o(441307),Ot=()=>o(227157);const zt=3;o(430670),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(737550);function Wt(e){let{normalizedSchema:t,collectionView:o,considerGroupByAsVisible:n=!1}=e;const r=function(e){let{collectionView:t,includeGroupByProperties:o=!1}=e;const n={},r=e=>{if(e)for(const t of e)n[t.property]||(n[t.property]=[]),n[t.property].push(t)},i=t.getType(),l=t.getFormatStore();switch(i){case"board":if(r(l.getKeyValue("board_properties")),o){const e=l.getKeyValue("board_columns_by");e&&r([{property:e.property,visible:!0}])}break;case"calendar":r(l.getKeyValue("calendar_properties"));break;case"gallery":r(l.getKeyValue("gallery_properties"));break;case"list":r(l.getKeyValue("list_properties"));break;case"timeline":r(l.getKeyValue("timeline_properties")),r(l.getKeyValue("timeline_table_properties"));break;case"table":r(l.getKeyValue("table_properties"));break;case"chart":case"chat":case"feed":case"page":case"form_editor":case"map":case"custom":break;default:(0,a().HB)(i)}if(o){const e=l.getKeyValue("collection_group_by");e&&r([{property:e.property,visible:!0}])}return n}({collectionView:o,includeGroupByProperties:n}),i={visibleProperties:new Set,invisibleProperties:new Set};for(const a of Object.keys(t)){const e=r[a];(null==e?void 0:e.some((e=>e.visible)))??!1?i.visibleProperties.add(a):i.invisibleProperties.add(a)}return i}function Dt(e){let{collectionContextStore:t}=e;const o=(0,i().K8)((()=>{var e;const o=t.collectionStore(),n=null===(e=t.collectionViewStore())||void 0===e?void 0:e.getModel();if(!o||!n)return[];const{invisibleProperties:r}=Wt({normalizedSchema:o.getSchema(),collectionView:n,considerGroupByAsVisible:!0});return Array.from(r)}),[t]),n=o.length,r=(0,b().IS)((e=>({container:{position:"fixed",zIndex:1,bottom:40,right:40,color:e.text.primary,opacity:0===n?0:1,transition:0===n?"opacity 0s ease":"opacity 0.1s ease"},button:{backdropFilter:"blur(40px)"}})),[n]);return(0,G.jsx)("div",{style:r.container,children:(0,G.jsx)(ee().A,{renderTooltip:()=>(0,G.jsx)(Gt,{collectionContextStore:t,invisibleProperties:o}),render:e=>(0,G.jsx)(be().p,{hovered:!0,disabled:!0,...e,style:r.button,children:(0,G.jsx)(se().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,G.jsx)(S().sA,{id:"hiddenPropertiesIndicator.hiddenCount",defaultMessage:"{numHiddenProperties, plural, one {1 hidden property} other {# hidden properties}}",values:{numHiddenProperties:n}})})})})})}function Gt(e){let{collectionContextStore:t,invisibleProperties:o}=e;const n=(0,i().K8)((()=>{var e;const n=(null===(e=t.collectionStore())||void 0===e?void 0:e.getSchema())??{},r={};for(const t of o){var i;const e=null===(i=n[t])||void 0===i?void 0:i.name;e&&(r[t]=e)}return r}),[t,o]);return(0,G.jsx)("div",{children:o.flatMap((e=>{const t=n[e];return t?[(0,G.jsx)("div",{children:t},e)]:[]}))})}const Kt=n.memo(Dt),Ht=32;function Ut(e){let{collectionTemplate:t,flowId:o}=e;const a=(0,r().v3)(),c=(0,vt().X)("packaging_property_visibility_label"),d=(0,n.useMemo)((()=>({flowId:o,location:"workflow_templates_onboarding",isPreviewing:!0,disableAllPointerEvents:!0,disablePageLinks:!0,hideTableAggregationRow:!0,hideViewBlockSource:!0})),[o]),p=function(){const e=(0,r().v3)(),t=(0,Nt().S)(Vt().Zu,{canUndo:!0}),o=(0,n.useRef)(void 0),a=(0,i().O$)(h().A);return(0,n.useEffect)((()=>{if(a.open&&a.collectionTemplate&&a.parentStore&&!o.current){var n;const{performResult:{collectionStore:r,collectionViewBlockStore:i,collectionViewStore:l,examplePageStores:s}}=St().createAndCommit({userAction:"workflowTemplateCustomizationOnboarding.previewCollection",environment:e,perform:o=>{const{collectionStore:n,collectionViewBlockStore:r,collectionViewStore:i,examplePageStores:l}=(0,Ot().mm)({environment:e,existingCollectionInfo:void 0,inMemoryRecordCache:t.cache,parentStore:a.parentStore.clone(t.cache),template:a.collectionTemplate,transaction:o,logger:new(ye().WorkflowTemplateLogger)});if(0===l.length){const t=new(Ft().A)(e);for(let r=0;r<zt;r++)(0,Et().Q)({environment:e,collectionContextStore:t,groupsPointer:[],insertAtIndex:0,shouldCoerce:!0,templateStore:t.defaultPageTemplateStore.state,transaction:o,from:{createBlock:"workflow_template"},inMemoryRecordCache:n.inMemoryRecordCache})}return{collectionViewBlockStore:r,collectionViewStore:i,collectionStore:n,examplePageStores:l}},canUndo:!1});o.current={collectionStore:r,collectionViewBlockStore:i,collectionViewStore:l},h().A.setState({...a,previewCollectionInfo:{collectionViewBlockStore:i,examplePageStores:s,collectionContextStore:void 0,focusViewTemplateId:null===(n=a.previewCollectionInfo)||void 0===n?void 0:n.focusViewTemplateId}})}}),[a,t,e]),o.current}(),u=(0,i().K8)((()=>h().A.getPreviewCollectionContextStore()),[]),m=(0,i().K8)((()=>{const e=null==u?void 0:u.getViewType();return"gallery"===e||"list"===e?Ht:0}),[u]),g=(0,i().K8)((()=>p?function(e){let{collectionStore:t,collectionViewStore:o}=e;const n=t.getSchema(),r=o.getFormat().table_properties;return null==r?void 0:r.filter((e=>{let{property:t}=e;return t in n})).map((e=>{let{property:t}=e;return t}))}(p):void 0),[p]),f=(0,Pe().ZC)(g),y=(0,n.useCallback)((e=>{h().A.updatePreviewCollectionContextStore(e)}),[]);Lt(),function(){const{viewTemplateId:e,collectionViewBlockStore:t,collectionContextStore:o}=(0,i().K8)((()=>{var e;const t=h().A.state;return t.open&&t.collectionTemplate&&null!==(e=t.previewCollectionInfo)&&void 0!==e&&e.collectionContextStore?{viewTemplateId:t.previewCollectionInfo.focusViewTemplateId,collectionViewBlockStore:t.previewCollectionInfo.collectionViewBlockStore,collectionContextStore:t.previewCollectionInfo.collectionContextStore}:{viewTemplateId:void 0,collectionViewBlockStore:void 0,collectionContextStore:void 0}}),[]),a=(0,Pe().ZC)(e),l=(0,r().v3)();(0,n.useEffect)((()=>{var n;if(e===a)return;if((null==o||null===(n=o.collectionViewStore())||void 0===n||null===(n=n.getFormat().workflow_template_instance)||void 0===n?void 0:n.template_id)===e)return;const r=null==t?void 0:t.getCollectionViewStores().find((t=>{var o;return(null===(o=t.getFormat().workflow_template_instance)||void 0===o?void 0:o.template_id)===e}));r&&o&&(0,wt().t)({environment:l,collectionContextStore:o,collectionViewId:r.id,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1})}),[e,a,t,o,l])}(),(0,n.useEffect)((()=>{!function(e){let{collectionContextStore:t,previousPropertyIds:o,propertyIds:n,environment:r}=e;const i=null==t?void 0:t.collectionViewStore(),a=t&&"table"===(null==i?void 0:i.getType())&&n&&o&&n!==o;if(!a)return;if(n.length===o.length)return;if(n.length<o.length){const e=o.findIndex((e=>!n.includes(e)));$t({propertyId:0===e?n[0]:n[e-1],collectionContextStore:t,environment:r})}else{const e=n.filter((e=>!o.includes(e)));$t({propertyId:e[e.length-1],collectionContextStore:t,environment:r})}}({collectionContextStore:u,previousPropertyIds:f,propertyIds:g,environment:a})}),[u,f,g,a]);const v=(0,b().IS)((e=>({container:{position:"relative",backgroundColor:e.contentBackground,paddingTop:Ht,overflowY:"auto",borderRadius:12,border:`1px solid ${e.stroke.primary}`},titleWrapper:{display:"flex",alignItems:"center",paddingLeft:Ht+8,margin:"8px 0"},titleText:{fontSize:24,fontWeight:700,lineHeight:"26px",whiteSpace:"pre-line",marginLeft:12,overflow:"initial"},collectionViewScroller:{height:"100%",paddingBottom:Ht-8}})),[]);return t?(0,G.jsxs)(s().Y1,{height:"fill",style:v.container,children:[(0,G.jsxs)("div",{style:v.titleWrapper,children:[(0,G.jsx)(he().z,{template:t,size:28}),(0,G.jsx)(lt().A,{style:v.titleText,children:t.value.targetCollection.name})]}),(0,G.jsx)(ht().H,{type:xt().A.All,style:v.collectionViewScroller,children:(0,G.jsx)(yt().tx,{value:d,children:p&&(0,G.jsx)(l().dN,{store:p.collectionViewBlockStore,disabled:!0,forceLocalQueryCollection:!0,headerActionsBehavior:"hidden",overridePaddingLeft:Ht,overridePaddingRight:m,setCollectionContextStore:y})})}),u&&c&&(0,G.jsx)(Kt,{collectionContextStore:u})]}):(0,G.jsx)(s().Y1,{height:"fill",style:v.container})}function $t(e){let{propertyId:t,collectionContextStore:o,environment:n}=e;const r=bt().A.findTableHeaderCell(o,t);if(!r)return;const i=r.getNode();if(!i)return;const a=(0,Oe().T8)(i);if(!a)return;const l=i.getBoundingClientRect(),s=a.getBoundingClientRect(),c=l.left-s.left,d=l.right-s.left,p=a.clientWidth,u=150;let m;d>p-u?m=d-p+u:c<u&&(m=c-u),m&&Oe().VG({element:a,environment:n,options:{left:a.scrollLeft+m,behavior:"smooth"}})}function Yt(e){const{sidebar:t,cornerButton:o,preview:n}=e;return(0,G.jsxs)(G.Fragment,{children:[o,(0,G.jsxs)(s().Y1,{direction:"horizontal",height:"fill",padding:24,gap:24,style:{minHeight:0},children:[t?(0,G.jsx)(s().Y1,{width:320,height:"fill",padding:"60px 0 0 0",gap:25,style:{flexShrink:0},children:t}):null,n]})]})}function qt(e){let{children:t,overrides:o={hideCornerButton:!1}}=e;const r=(0,b().IS)((()=>({sidebarFooter:{flexShrink:0}})),[]),a=(0,i().K8)((()=>h().A.state),[]),l=(0,i().K8)((()=>(0,_e().wk)()),[]),c=n.useMemo((()=>{var e,t;if(a.open&&a.collectionTemplate)return null!==(e=a.previewCollectionInfo)&&void 0!==e&&e.focusViewTemplateId?a.previewCollectionInfo.focusViewTemplateId:null===(t=a.userCustomizations.featureTemplateSelections.find((e=>"collection_view"===e.template.type&&e.selected)))||void 0===t?void 0:t.template.templateId}),[a]);if(!a.open||!a.collectionTemplate||!c)return null;const d=l?(0,G.jsx)(Ut,{collectionTemplate:a.collectionTemplate,flowId:a.flowId},a.collectionTemplate.setupId):(0,G.jsx)(ut,{...(0,f().OX)(a),parentStore:a.parentStore,children:(0,G.jsx)(rt,{userCustomizations:a.userCustomizations,collectionViewTemplateId:c})});return(0,G.jsx)(Yt,{sidebar:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(s().Y1,{height:"fill",padding:2,children:t}),(0,G.jsx)(s().Y1,{style:r.sidebarFooter,children:(0,G.jsx)(Zt,{modalState:a})})]}),cornerButton:o.hideCornerButton?null:(0,G.jsx)(oo,{modalState:a}),preview:d})}const Qt=!1;function Zt(e){let{modalState:t}=e;const o=(0,S().tz)(),{isOnFirstModalStep:n,isOnLastModalStep:r}=(0,i().K8)((()=>({isOnFirstModalStep:!(0,f().pp)(t),isOnLastModalStep:!(0,f().Rh)(t)})),[t]),a=(0,i().K8)((()=>{var e;return!!t.open&&(null===(e=t.setupGenerator)||void 0===e?void 0:e.store.state.isBusy)}),[t]);if(!t.collectionTemplate)return null;const l=o.formatMessage({id:"workflowTemplatesOnboardingModalStep.getStarted",defaultMessage:"Get started"}),s=n&&r;return r?(0,G.jsx)(eo,{label:s?l:(0,G.jsx)(S().sA,{id:"workflowTemplatesOnboardingModalStep.done",defaultMessage:"Done"})}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Xt,{disabled:t.isSaving||t.isFollowUpInputFocused||a,modalState:t,label:n?l:o.formatMessage({id:"workflowTemplatesOnboardingModalStep.continue",defaultMessage:"Continue"})}),Qt&&!s&&(0,G.jsx)(Jt,{})]})}function Xt(e){let{modalState:t,label:o,isLoading:n,disabled:i,onClick:a}=e;const l=(0,b().IS)((()=>({button:{padding:10,width:"100%",height:32,borderRadius:8}})),[]),s=(0,r().v3)();return t.collectionTemplate?(0,G.jsx)(Ce().A,{style:l.button,isLoading:n,disabled:i,onClick:async()=>{h().A.update((e=>({...e,isSaving:!0})));const e=await(null==a?void 0:a());if(h().A.update((e=>({...e,isSaving:!1}))),!1===e)return;const o=(0,f().aO)(t);o>=0&&(h().A.update((e=>({...e,currentStepIndex:o}))),(0,g().u4)({environment:s,event:{eventName:"workflow_template_onboarding_next_step",eventProperties:{next_step:(0,f().Wm)(t)[o],step:(0,f().hq)(t),...(0,f().gM)(t)}}}))},children:o}):null}function Jt(){const e=(0,r().v3)(),t=(0,i().K8)((()=>h().A.state),[]);return V()(t.open,"Modal should always be open for this to render."),(0,G.jsx)(be().p,{isGray:!0,style:{height:32,borderRadius:8,justifyContent:"center",marginTop:8},isLoading:t.isSaving,disabled:t.isSaving,onClick:()=>(0,ve().createCollectionTemplateFromModalState)({environment:e,modalState:t}),children:(0,G.jsx)("span",{children:"Customize later"})})}function eo(e){const{label:t}=e,o=(0,r().v3)(),a=(0,i().O$)(h().A);V()(a.open,"Modal should always be open for this to render.");const l=(0,i().K8)((()=>{var e;return null===(e=a.setupGenerator)||void 0===e?void 0:e.store.state.isBusy}),[a]),s=(0,n.useCallback)((()=>{(0,ve().createCollectionTemplateFromModalState)({environment:o,modalState:a})}),[o,a]);return(0,G.jsx)(Ce().A,{style:{height:32,borderRadius:8},isLoading:a.isSaving,disabled:a.isSaving||a.isFollowUpInputFocused||l,onClick:s,children:t})}function to(e){var t;let{title:o,caption:n}=e;const r=(0,i().O$)(h().A),a=r.open?null===(t=r.collectionTemplate)||void 0===t?void 0:t.value.targetCollection.name:void 0,l=(0,b().IS)((e=>({assistantFace:{borderRadius:"100%",width:(0,ke().N)("medium"),boxShadow:e.shadowSM,marginBottom:14},title:{whiteSpace:"pre-line",hangingPunctuation:"first",textWrap:"balance"}})),[]);return(0,G.jsx)("div",{style:{flexShrink:0},children:(0,G.jsxs)(s().Y1,{gap:4,children:[(0,G.jsx)(se().D,{styleName:"UITitle-22px/Semibold",customStyles:l.title,children:o??(0,G.jsx)(S().sA,{id:"workflowTemplatesOnboardingModal.customizeCollection",defaultMessage:"Customize {collectionName}",values:{collectionName:a}})}),n?(0,G.jsx)(se().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:n}):null]})})}function oo(e){const{modalState:t}=e;return 0===t.currentStepIndex?(0,G.jsx)(ro,{}):(0,G.jsx)(io,{modalState:t})}function no(e){const{iconFn:t,onClick:o,style:n}=e,r=(0,b().IS)((e=>({button:{position:"absolute",top:20,left:20,zIndex:1,height:26,paddingLeft:5,paddingRight:5,...n},icon:{width:16,height:16,fill:e.icon.secondary}})),[n]);return(0,G.jsx)(be().p,{onClick:o,style:r.button,children:t(r.icon)})}function ro(){const e=(0,n.useContext)(Ie().eh);return(0,G.jsx)(no,{iconFn:Se().u,onClick:()=>null==e?void 0:e()})}function io(e){const{modalState:t,style:o}=e,i=(0,r().v3)(),a=(0,n.useCallback)((()=>{const e=t.currentStepIndex,o=Math.max(0,t.currentStepIndex-1);(0,ve().moveToPreviousOnboardingStep)(),(0,g().u4)({environment:i,event:{eventName:"workflow_template_onboarding_previous_step",eventProperties:{previous_step:(0,f().Wm)(t)[o],step:(0,f().Wm)(t)[e],...(0,f().gM)(t)}}})}),[i,t]);return t.collectionTemplate?(0,G.jsx)(no,{style:o,iconFn:we().v,onClick:a}):null}function ao(){const e=(0,i().O$)(h().A),t=(0,_().r)(),o=null==t?void 0:t.id,r=(0,b().IS)((()=>({grid:{flex:"1 0 0",display:"grid",gridTemplateRows:"1fr auto",position:"relative",maxHeight:"100%",overflowY:"auto"},features:{},feedbackInput:{display:"flex",flexDirection:"column",minHeight:30,maxHeight:120,flexShrink:0}})),[]),a=(0,i().K8)((()=>{if(e.open)return e.setupGenerator}),[e]),l=(0,n.useCallback)((e=>{!(0,w().w9s)(e)?(0,ve().setFollowUpInputFocused)(!0):(0,ve().setFollowUpInputFocused)(!1),null==a||a.setPrompt(e)}),[a]),c=(0,i().K8)((()=>{var e;return null==a||null===(e=a.store)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.feedbackArgs}),[a]),d=(0,i().K8)((()=>{if(e.open)return a&&c&&e.collectionTemplate&&e.collectionTemplate.isAiGenerated}),[c,e,a]),p=(0,i().K8)((()=>(null==a?void 0:a.store.state.isBusy)??!1),[a]),u=(0,i().K8)((()=>{var e;return p?null==a||null===(e=a.store.state)||void 0===e?void 0:e.progress:void 0}),[a,p]),m=(0,n.useCallback)((()=>{(0,ve().retryAiSetup)()}),[]),g=(0,n.useCallback)((()=>{null==a||a.submitPrompt({from:"follow-up"})}),[a]),y=(0,i().K8)((()=>null==a?void 0:a.store.state.prompt),[a]),v=(0,n.useCallback)((()=>{null==a||a.stopGenerating()}),[a]),x=(0,i().K8)((()=>{var e;return a?(null===(e=a.store.state.transcriptTree)||void 0===e||null===(e=e.toNodes())||void 0===e?void 0:e.filter((e=>"setup"===e.value.type)))??[]:[]}),[a]),S=(0,i().K8)((()=>x.length<5),[x]),k=(0,i().K8)((()=>x.length>=2),[x]);return e.open&&o&&e.collectionTemplate?(0,G.jsxs)(s().Y1,{direction:"vertical",height:"fill",gap:10,children:[(0,G.jsx)(lo,{setupGeneratorProgress:u}),(0,G.jsx)("div",{style:r.grid,children:(0,G.jsx)(fo,{contentStyle:{padding:"5px 2px"},children:(0,G.jsx)("div",{style:r.features,children:(0,G.jsx)(so,{featureTemplateSelections:e.userCustomizations.featureTemplateSelections,isSetupGeneratorBusy:p,...(0,f().OX)(e)})})})}),d&&c?(0,G.jsx)("div",{style:r.feedbackInput,children:S?(0,G.jsx)(le,{canPressEnter:!0,canRetry:k,onClickRetry:m,onSubmit:g,onClickStop:v,value:y,onChange:l,feedbackArgs:c,isBusy:p}):null}):null]}):null}function lo(e){const{setupGeneratorProgress:t}=e;return t?(0,G.jsx)(pe,{statusLabel:t.statusLabel}):(0,G.jsx)(to,{caption:(0,G.jsx)(S().sA,{id:"workflowTemplatesOnboardingModal.selectFeatures",defaultMessage:"Select features to turn on or off"})})}function so(e){let{featureTemplateSelections:t,isSetupGeneratorBusy:o,...r}=e;const{collectionTemplate:a}=r,l=(0,i().K8)((()=>(0,x().A6)(a,ye().globalWorkflowTemplates)),[a]),s=(0,n.useMemo)((()=>(0,f().UA)({collectionViewTemplates:l,featureTemplateSelections:t})),[l,t]);return(0,G.jsx)(co,{featureTemplateSelections:s,templateOnboardingState:r,isLoading:o})}function co(e){const t=(0,r().v3)(),{isLoading:o,featureTemplateSelections:n,templateOnboardingState:i}=e,a=(0,b().IS)((()=>({pillsSection:{display:"flex",flexWrap:"wrap",gap:12,isolation:"isolate"}})),[]),l=(0,I().j)(1e3);return(0,G.jsx)("div",{style:a.pillsSection,children:(0,G.jsx)(y().N,{mode:"popLayout",children:n.map(((e,r)=>(0,G.jsx)(po,{index:r,featureTemplateSelectionsToShow:n,featureSelection:e,isRequired:!1,isLoading:o,shouldAnimate:l,toggleFeatureTemplateSelection:e=>(0,ve().toggleFeatureSelectionInPreview)({template:e,environment:t}),...i},r)))})})}const po=(0,n.forwardRef)((function(e,t){const{featureTemplateSelectionsToShow:o,featureSelection:n,isRequired:i,isLoading:a,toggleFeatureTemplateSelection:l,index:s,shouldAnimate:c,...d}=e,p=(0,r().v3)(),u=n.template;return(0,G.jsx)(fe,{template:u,alignment:te().C.Start,isRequired:i,render:e=>(0,G.jsx)(go,{ref:t,template:u,index:s,isSelected:n.selected,tooltipEvents:e,disabled:i,isLoading:a,shouldAnimate:c,onClick:()=>{(0,g().u4)({environment:p,event:{eventName:"workflow_template_onboarding_feature_select",eventProperties:{selecting:n.selected?"deselecting":"selecting",feature_template_id:u.templateId,feature_template_type:u.type,previously_selected_feature_template_ids:o.filter((e=>e.selected)).map((e=>e.template.templateId)),step:"features",...(0,f().gM)(d)}}}),l(u)}})})})),uo={type:"spring",damping:25,stiffness:250},mo={...uo,delay:.1},go=(0,n.forwardRef)((function(e,t){const{template:o,isSelected:n,isLoading:r,disabled:i,onClick:a,tooltipEvents:l,index:s,shouldAnimate:c}=e,d=(0,b().IS)((e=>({icon:{marginRight:6,fill:n?e.text.uiBluePrimary:e.mediumIconColor},overflowTooltip:{maxWidth:250},selectButton:{maxWidth:"100%"},wrapper:{background:e.surface.wash,borderRadius:24,position:"relative",maxWidth:"100%",willChange:"transform",zIndex:void 0!==s?100-s:void 0},shimmerArea:{pointerEvents:"none"},shimmer:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:24,boxShadow:`0 0 0 1px ${e.stroke.secondary}`}})),[n,s]);return(0,G.jsxs)(v().P.div,{ref:t,style:d.wrapper,layout:!0,transition:uo,initial:!!c&&{x:-50,opacity:.5},animate:{x:0,opacity:1},exit:{scale:.5,opacity:0},children:[(0,G.jsx)(v().P.div,{initial:!!c&&{opacity:0},animate:{opacity:r?0:1},transition:mo,children:(0,G.jsxs)(xe,{tooltipEvents:l,disabled:i,isSelected:n,onClick:a,style:d.selectButton,children:[(0,G.jsx)(he().z,{iconStyle:d.icon,template:o}),(0,G.jsx)(ue().j,{tooltipStyle:d.overflowTooltip,placement:te().W.Right,children:(0,ye().getWorkflowTemplateName)(o)}),"ai_inference"in o.value&&(0,G.jsx)(k().A,{})]})}),(0,G.jsx)(v().P.div,{initial:!1,animate:{opacity:r?1:0},transition:mo,style:r?{}:d.shimmerArea,children:(0,G.jsx)(C().A,{style:d.shimmer})})]})}));function fo(e){let{children:t,fadeHeight:o=30,contentStyle:r={}}=e;const i=(0,n.useRef)(null),[a,l]=(0,n.useState)(!1),[s,c]=(0,n.useState)(!1),d=(0,b().IS)((e=>({content:{height:"100%",overflowY:"auto",...r},fadeTop:{position:"absolute",top:0,left:0,right:0,height:o,background:`linear-gradient(to bottom, ${e.surface.wash}, transparent)`,pointerEvents:"none",opacity:a?1:0,willChange:"opacity",transition:"opacity 0.3s"},fadeBottom:{position:"absolute",bottom:0,left:0,right:0,height:o,background:`linear-gradient(to top, ${e.surface.wash}, transparent)`,pointerEvents:"none",opacity:s?1:0,willChange:"opacity",transition:"opacity 0.3s"}})),[r,o,a,s]),p=(0,n.useCallback)((()=>{if(!i.current)return;const{scrollTop:e,scrollHeight:t,clientHeight:o}=i.current;l(e>0),c(e<t-o-1)}),[i]);return(0,n.useEffect)((()=>{const e=i.current;if(e)return e.addEventListener("scroll",p),window.addEventListener("resize",p),p(),()=>{e.removeEventListener("scroll",p),window.removeEventListener("resize",p)}}),[p,i]),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("div",{ref:i,style:d.content,children:t}),(0,G.jsx)("div",{style:d.fadeTop}),(0,G.jsx)("div",{style:d.fadeBottom})]})}o(18107),o(967357);var ho=()=>o(833744),yo=()=>o(852507),vo=()=>o(921756),bo=()=>o(632625),xo=()=>o(126818);const wo=(0,Y().xh)("circle",{default:{loader:()=>o.e(56780).then(o.bind(o,256780))},small:{loader:()=>o.e(63882).then(o.bind(o,163882))},mini:{loader:()=>o.e(21042).then(o.bind(o,621042))},large:{loader:()=>o.e(55570).then(o.bind(o,555570))}});var So=()=>o(525884),ko=()=>o(995062),Co=()=>o(704152),Io=()=>o(760217),_o=()=>o(364280),jo=()=>o(135221),To=()=>o(939740),Mo=()=>o(89924),Ao=()=>o(437622),Po=()=>o(154152);const Ro=n.forwardRef((function(e,t){const{placeholder:o,value:r,onChange:i,onSubmit:a,canPressEnter:l}=e,s=(0,S().tz)(),c=function(){const e=20,t=24;return(0,b().IS)((o=>({input:{display:"flex",maxWidth:"100%",flexFlow:"column",boxShadow:o.inputBoxShadow,backgroundColor:o.surface.elevated,borderRadius:16,overflow:"inherit",padding:12,gap:"4px 0"},buttonWrapper:{position:"absolute",right:8,bottom:8},stopIcon:{fill:o.icon.primary},icon:{height:e,width:e},button:{pointerEvents:"auto",height:Math.max(e,t),width:Math.max(e,t),borderRadius:"100%"}})),[])}(),d=(0,n.useContext)(Ie().eh),p=!(0,w().w9s)(r),u=null==r?void 0:r.map((e=>(0,w().N8A)(e))).join("");return(0,G.jsx)("div",{style:{position:"relative"},children:(0,G.jsxs)(P().A,{debugName:"AiPromptInput",capture:!0,onEsc:d,priority:1,children:[(0,G.jsx)(z().A,{ref:t,textarea:!0,textareaSubmitOnEnter:!0,autosize:!0,autosizeMinHeight:75,autosizeMaxHeight:240,style:c.input,onChange:e=>{i((0,w().x9d)(e.target.value))},onSubmit:()=>{p&&l&&a()},value:u,placeholder:s.formatMessage(o)}),(0,G.jsx)("div",{style:c.buttonWrapper,children:(0,G.jsx)(A().A,{icon:j().b,onClick:()=>{},isBlue:p,disabled:!p,ariaLabel:s.formatMessage({id:"aiPromptInput.submit",defaultMessage:"Submit"}),onMouseDown:e=>{e.preventDefault(),a()},style:c.button,iconStyle:c.icon})})]})})}));var Bo=()=>o(351360),Lo=()=>o(3486);const Eo=(0,S().YK)({promptPlaceholder:{id:"setupGenerator.promptPlaceholder",defaultMessage:"Make a customer feedback tracker with priority levels, status, and assignee..."}}),Vo={duration:0},No={duration:.7,ease:"anticipate"},Fo={type:"spring",stiffness:150,damping:20,delay:1};function Oo(e){const t=(0,n.useContext)(Ie().eh),o=(0,i().K8)((()=>h().A.state),[]),r=(0,i().K8)((()=>o.open?o.version:void 0),[o]),l=(0,i().K8)((()=>(0,ye().getIsSetupGeneratorEnabled)()||r&&(0,a().Xk)(vo().N,r)),[r]);return(0,i().K8)((()=>o.open?o.setupGenerator:void 0),[o])&&l?o.open?(0,G.jsx)(Wo,{overrides:e.overrides}):null:(0,G.jsx)(qo,{onClickClose:t})}function zo(e){const t=(0,i().K8)((()=>(0,ye().getIsSetupGeneratorEnabled)()),[]),o=(0,n.useContext)(Ie().eh),r=(0,i().K8)((()=>h().A.state),[]),a=(0,i().K8)((()=>r.open?r.setupGenerator:void 0),[r]),l=(0,i().K8)((()=>{var e;return(null==a||null===(e=a.store.state)||void 0===e?void 0:e.progress)??{databases:{},statusLabel:{type:"default"},steps:[]}}),[a]),s=Object.values(l.databases).at(0),c=(null==s?void 0:s.databaseName)??"",d=(null==s?void 0:s.iconName)??"pencil";return a&&t?r.open?(0,G.jsx)(Ko,{collectionName:c,collectionIcon:`/icons/${d}_gray.svg`,progress:l,overrides:e.overrides}):null:(0,G.jsx)(qo,{onClickClose:o})}function Wo(e){const t=(0,S().tz)(),{hideCornerButton:o=!1,...r}=e.overrides??{},a=(0,i().K8)((()=>h().A.state),[]),l=(0,i().K8)((()=>{if(a.open)return a.setupGenerator}),[a]),c=(0,i().K8)((()=>null==l?void 0:l.store.state.prompt),[l]),d=(0,n.useCallback)((async()=>{l&&await(0,Po().z)(l)}),[l]),p=(0,i().K8)((()=>{var e;return null===(e=Bo().default.state.currentUserStore)||void 0===e?void 0:e.getDisplayName(t)}),[t]);return a.open&&l?(0,G.jsxs)(G.Fragment,{children:[o?null:(0,G.jsx)(oo,{modalState:a}),(0,G.jsx)(s().Y1,{width:"fill",height:"fill",align:"top-center",padding:"32px",children:(0,G.jsx)(Do,{currentUserName:p,prompt:c,onChange:l.setPrompt,onSubmit:d,overrides:r})})]}):null}function Do(e){const{currentUserName:t,prompt:o,onChange:r,onSubmit:a,overrides:l}=e,c=(0,i().K8)((()=>(null==l||!l.hideSuggestionPills)&&(0,_e().y8)()),[null==l?void 0:l.hideSuggestionPills]),[d,p]=(0,n.useState)({type:"pills"}),u=(0,b().IS)((()=>({text:{textAlign:"center",textWrap:"balance"},content:{overflow:"auto"}})),[]),m=(0,i().K8)((()=>h().A.state),[]),g=(0,i().K8)((()=>{if(m.open)return m.setupGenerator}),[m]),f=(0,n.useCallback)((e=>{var t;(r(e),c)&&((0,w().w9s)(e)?p({type:"pills"}):("pills"!==d.type||(0,w().w9s)(e))&&("subprompts"!==d.type||!e||(0,w().w9s)(e)||(t=e,d.selectedPill.subprompts.some((e=>Jo(t,e)))))||p({type:"pills"}))}),[r,d,c]),y=(0,n.useRef)(null);(0,yo().w)((()=>{var e;null==g||g.trackSessionStarted(),null===(e=y.current)||void 0===e||e.focus()})),(0,ho().L)({active:!0,closeHandler:()=>{p({type:"pills"})},ref:y,excludedSelectors:["[role='button']"]});const x=(0,n.useCallback)((e=>{var t;let{pill:o,prompt:n}=e;null===(t=y.current)||void 0===t||t.focus(),p({type:"subprompts",selectedPill:o}),r(n)}),[r]),k=(0,n.useMemo)((()=>c?(0,G.jsxs)("div",{style:{position:"relative"},children:[(0,G.jsx)(Qo,{onClick:x,hidden:"pills"!==d.type}),"subprompts"===d.type?(0,G.jsx)(Xo,{userPrompt:o,subprompts:d.selectedPill.subprompts,onSelection:e=>{r(e),a()}}):null]}):null),[x,r,a,o,d,c]);return m.open?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(s().Y1,{height:"fill",align:"center",gap:32,children:[(0,G.jsxs)(s().Y1,{gap:12,align:"top-center",width:400,style:u.text,children:[(0,G.jsx)(v().P.div,{layoutId:"assistant-face",transition:Vo,layout:"position",children:(0,G.jsx)(ko().AssistantAnimatedFaceInner,{sizeVariant:"large",highLevelState:"idle",includeBoxShadow:!0})}),(0,G.jsx)(se().D,{styleName:"UITitle-22px/Semibold",children:"new_user_onboarding"===m.origin?(0,G.jsx)(S().sA,{id:"setupGenerator.greetingForNewSpaces",defaultMessage:"Hey there! Welcome to Notion. What do you want to build today?"}):(0,G.jsx)(S().sA,{id:"setupGenerator.greeting",defaultMessage:"What do you want to build today?",values:{currentUserName:t}})})]}),(0,G.jsxs)(s().Y1,{direction:"vertical",gap:4,width:450,children:[(0,G.jsx)(Ro,{ref:y,placeholder:Eo.promptPlaceholder,value:o,onChange:f,onSubmit:a,canPressEnter:!0}),c?(0,G.jsx)("div",{children:k}):null]})]}),null!=l&&l.hideLearnMore?null:(0,G.jsx)(Go,{})]}):null}function Go(){const e=(0,S().tz)(),t=(0,b().IS)((e=>({button:{position:"absolute",top:20,right:20,zIndex:1,height:26,paddingLeft:5,paddingRight:5},icon:{width:18,height:18,fill:e.icon.secondary}})),[]);return(0,G.jsx)(ee().A,{placement:te().W.Left,renderTooltip:()=>(0,G.jsx)("span",{children:e.formatMessage($o.help)}),render:o=>(0,G.jsx)(A().A,{...o,ariaLabel:e.formatMessage($o.help),icon:So().A,style:t.button,iconStyle:t.icon,href:"https://www.notion.com/help/autofill#create-a-database-with-notion-ai",external:!0})})}function Ko(e){const{collectionName:t,collectionIcon:o,progress:n}=e,{hideCornerButton:r=!1}=e.overrides??{},a=(0,i().K8)((()=>h().A.state),[]),l=null==n?void 0:n.statusLabel,c=(0,b().IS)((e=>({container:{borderRadius:12,border:`1px solid ${e.stroke.secondary}`,backgroundColor:"dark"===e.mode?e.popoverWaxPaperBackground:void 0,backgroundImage:`url(${Te().A.images.workflowTemplates.bgDotsPng})`,backgroundRepeat:"repeat",backgroundSize:"70px 70px",backgroundPosition:"0% 0%",backgroundBlendMode:"multiply",position:"absolute",userSelect:"none",inset:0,zIndex:10},header:{opacity:.6,paddingBottom:20,borderBottom:`1px solid ${e.stroke.primary}`},columns:{display:"grid",gridTemplateColumns:"3fr 2fr 2fr",gap:45},shimmer:{width:"50%",height:9,borderRadius:5},shimmerWide:{width:"100%",height:9,borderRadius:5}})),[]),d=(0,b().DP)();return a.open?(0,G.jsxs)(G.Fragment,{children:[r?null:(0,G.jsx)(oo,{modalState:a}),(0,G.jsx)(Yt,{sidebar:(0,G.jsxs)(s().Y1,{direction:"vertical",gap:36,children:[(0,G.jsxs)(s().Y1,{direction:"vertical",gap:12,children:[(0,G.jsx)(v().P.div,{layoutId:"assistant-face",layout:"position",transition:No,children:(0,G.jsx)(ko().AssistantAnimatedFaceInner,{sizeVariant:"large",highLevelState:"writing",includeBoxShadow:!0})}),(0,G.jsx)(v().P.div,{initial:{opacity:0},animate:{opacity:1},transition:No,children:(0,G.jsx)(pe,{statusLabel:l})})]}),(0,G.jsx)(v().P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:Fo,children:(0,G.jsx)(Uo,{steps:(null==n?void 0:n.steps)??[]})})]}),preview:(0,G.jsx)(v().P.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:Fo,style:{width:"100%",height:"100%",position:"relative"},children:(0,G.jsxs)(s().Y1,{direction:"vertical",height:"fill",width:"fill",padding:"36px 38px",style:c.container,gap:30,children:[(0,G.jsxs)(s().Y1,{direction:"horizontal",align:"center-left",gap:12,height:50,style:c.header,children:[(0,G.jsx)(bo().A,{icon:o,size:20,theme:d}),(0,G.jsx)(se().D,{styleName:"UITitle-22px/Semibold",children:t})]}),(0,G.jsx)("div",{style:c.columns,children:Array.from({length:3}).map(((e,t)=>(0,G.jsxs)(s().Y1,{direction:"vertical",gap:25,children:[(0,G.jsx)(C().A,{style:c.shimmer}),Array.from({length:5}).map(((e,t)=>(0,G.jsx)(C().A,{style:c.shimmerWide},t)))]},t)))})]})})})]}):null}function Ho(e){const{status:t}=e,o=(0,b().IS)((()=>({loadingDotsContainer:{width:24,height:24,gap:3},loadingDot:{width:5,height:5}})),[]);switch(t){case"idle":return(0,G.jsx)(J().Q,{iconGroup:wo,variantName:"large",colorName:"tertiary"});case"in_progress":return(0,G.jsx)(jo().A,{isTriColored:!0,styleParentContainer:o.loadingDotsContainer,style:o.loadingDot});case"completed":return(0,G.jsx)(J().Q,{iconGroup:xo().g,variantName:"large",colorName:"tertiary"});default:(0,a().HB)(t)}}function Uo(e){const{steps:t}=e,o=(0,b().IS)((e=>({separator:{width:1,height:12,background:e.stroke.primary}})),[]);return(0,G.jsx)(s().Y1,{direction:"vertical",gap:2,children:t.map(((e,r)=>{const i=r===t.length-1;return(0,G.jsxs)(n.Fragment,{children:[(0,G.jsx)(Yo,{step:e}),i?void 0:(0,G.jsx)(s().Y1,{width:24,align:"center",children:(0,G.jsx)("div",{style:o.separator})})]},r)}))})}const $o=(0,S().YK)({creatingDatabase:{id:"setupGenerator.progress.createDatabase",defaultMessage:"Creating database"},addingProperties:{id:"setupGenerator.progress.addProperties",defaultMessage:"Adding properties"},addingViews:{id:"setupGenerator.progress.addViews",defaultMessage:"Adding views"},addingPages:{id:"setupGenerator.progress.addPages",defaultMessage:"Adding pages"},help:{id:"setupGenerator.promptInput.learnMore",defaultMessage:"Learn more in help center"}});function Yo(e){const{step:t}=e,o=(0,S().tz)();let n;switch(t.type){case"createDatabases":n=o.formatMessage($o.creatingDatabase);break;case"addProperties":n=o.formatMessage($o.addingProperties);break;case"addViews":n=o.formatMessage($o.addingViews);break;case"addPages":n=o.formatMessage($o.addingPages);break;default:return null}return(0,G.jsxs)(s().Y1,{direction:"horizontal",align:"center-left",gap:6,children:[(0,G.jsx)(Ho,{status:t.status}),(0,G.jsx)(se().D,{styleName:"UIRegular-14px/Medium",colorName:"in_progress"===t.status?"primary":"tertiary",children:n})]})}function qo(e){const{onClickClose:t}=e;return(0,G.jsxs)(G.Fragment,{children:[t?(0,G.jsx)(no,{iconFn:Se().u,onClick:t}):null,(0,G.jsx)(s().Y1,{height:"fill",width:"fill",align:"center",children:(0,G.jsx)(se().D,{styleName:"UIRegular-14px/Regular",children:(0,G.jsx)(S().sA,{id:"setupGenerator.notAvailable",defaultMessage:"This feature is not available."})})})]})}function Qo(e){let{onClick:t,hidden:o}=e;const n=(0,i().K8)((()=>"team"===(0,Ao().p3)().intent?an:un),[]),r=(0,b().IS)((()=>({container:{marginTop:12,display:"flex",flexWrap:"wrap",justifyContent:"center",gap:8,...o?{visibility:"hidden"}:{}}})),[o]);return(0,G.jsx)("div",{style:r.container,children:n.map((e=>{const o=me().A.formatMessage(e.title);return(0,G.jsx)(Zo,{iconString:e.icon,title:o,onClick:()=>t({pill:e,prompt:(0,w().x9d)(o)})},e.key)}))})}function Zo(e){let{onClick:t,iconString:o,title:n}=e;const r=(0,b().DP)(),i=(0,b().IS)((e=>({icon:{fill:(0,Lo().d)(o,e).icon.primary,marginRight:2},pill:{display:"flex",alignItems:"center",padding:"6px 14px 6px 10px",width:"fit-content",borderRadius:100,fontSize:14,fontWeight:at().Wy.medium,background:e.assistantTintedActionButtonBackground},pillHover:{background:e.tint.regular,cursor:"pointer"}})),[o]),a=(0,G.jsx)(bo().A,{icon:o,size:16,style:i.icon,theme:r});return(0,G.jsx)(Co().A,{onClick:t,style:i.pill,hoveredStyle:i.pillHover,children:(0,G.jsxs)(_o().fI,{gap:4,alignItems:"center",children:[a,n]})})}function Xo(e){let{userPrompt:t,subprompts:o,onSelection:n}=e;const r=(0,b().IS)((e=>{const t={padding:8};return{container:{fontSize:14,position:"absolute",top:0,width:"100%"},subpromptItem:{...t,boxShadow:`-1px 10px 0px -9px ${e.stroke.secondary}`},subpromptItemLast:{...t},gray:{color:e.text.tertiary}}}),[]);return(0,G.jsx)("div",{style:r.container,children:(0,G.jsx)(To().Ay,{type:To().Oh.Vertical,initialFocus:0,sections:[{key:"subprompts",render:e=>(0,G.jsx)(Mo().A,{...e,style:{gap:0}}),items:o.filter((e=>!t||Jo(t,e))).map((e=>({key:e.id,action:()=>{const t=me().A.formatMessage(e,{gray:e=>e});n((0,w().x9d)(t))},render:t=>(0,G.jsx)(Io().A,{...t,style:t.focused||t.isBeforeFocused?r.subpromptItemLast:r.subpromptItem,role:"button",title:(0,G.jsx)(S().sA,{...e,values:{gray:e=>(0,G.jsx)("span",{style:r.gray,children:e})}})})})))}]})})}function Jo(e,t){const o=e.map((e=>(0,w().N8A)(e))).join("").trim();return me().A.formatMessage(t,{gray:e=>e}).toUpperCase().includes(o.toUpperCase())}const en=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.makeAPlan",defaultMessage:"Make a plan"},option1:{id:"setupGenerator.suggestionPill.makeAPlan.option1",defaultMessage:"<gray>Make a plan</gray> for a product roadmap"},option2:{id:"setupGenerator.suggestionPill.makeAPlan.option2",defaultMessage:"<gray>Make a plan</gray> for a marketing campaign"},option3:{id:"setupGenerator.suggestionPill.makeAPlan.option3",defaultMessage:"<gray>Make a plan</gray> for an upcoming event"},option4:{id:"setupGenerator.suggestionPill.makeAPlan.option4",defaultMessage:"<gray>Make a plan</gray> for hiring new team members"}}),tn=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.manageTasks",defaultMessage:"Manage tasks"},option1:{id:"setupGenerator.suggestionPill.manageTasks.option1",defaultMessage:"<gray>Manage tasks</gray> for a website redesign"},option2:{id:"setupGenerator.suggestionPill.manageTasks.option2",defaultMessage:"<gray>Manage tasks</gray> for engineering sprints"},option3:{id:"setupGenerator.suggestionPill.manageTasks.option3",defaultMessage:"<gray>Manage tasks</gray> for content production"},option4:{id:"setupGenerator.suggestionPill.manageTasks.option4",defaultMessage:"<gray>Manage tasks</gray> for a product launch"}}),on=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.collectFeedback",defaultMessage:"Collect feedback"},option1:{id:"setupGenerator.suggestionPill.collectFeedback.option1",defaultMessage:"<gray>Collect feedback</gray> on customer satisfaction"},option2:{id:"setupGenerator.suggestionPill.collectFeedback.option2",defaultMessage:"<gray>Collect feedback</gray> on feature requests"},option3:{id:"setupGenerator.suggestionPill.collectFeedback.option3",defaultMessage:"<gray>Collect feedback</gray> on service quality"},option4:{id:"setupGenerator.suggestionPill.collectFeedback.option4",defaultMessage:"<gray>Collect feedback</gray> on a new product launch"}}),nn=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.trackPipeline",defaultMessage:"Track pipeline"},option1:{id:"setupGenerator.suggestionPill.trackPipeline.option1",defaultMessage:"<gray>Track pipeline</gray> for sales leads"},option2:{id:"setupGenerator.suggestionPill.trackPipeline.option2",defaultMessage:"<gray>Track pipeline</gray> for hiring candidates"},option3:{id:"setupGenerator.suggestionPill.trackPipeline.option3",defaultMessage:"<gray>Track pipeline</gray> for content production"},option4:{id:"setupGenerator.suggestionPill.trackPipeline.option4",defaultMessage:"<gray>Track pipeline</gray> for partnership deals"}}),rn=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.runCampaign",defaultMessage:"Run campaign"},option1:{id:"setupGenerator.suggestionPill.runCampaign.option1",defaultMessage:"<gray>Run campaign</gray> for a product launch"},option2:{id:"setupGenerator.suggestionPill.runCampaign.option2",defaultMessage:"<gray>Run campaign</gray> for an email marketing push"},option3:{id:"setupGenerator.suggestionPill.runCampaign.option3",defaultMessage:"<gray>Run campaign</gray> for an event promotion"},option4:{id:"setupGenerator.suggestionPill.runCampaign.option4",defaultMessage:"<gray>Run campaign</gray> for a fundraising effort"}}),an=[{key:"make-a-plan",title:en.primary,icon:"/icons/calendar_green.svg",subprompts:[en.option1,en.option2,en.option3,en.option4]},{key:"manage-tasks",title:tn.primary,icon:"/icons/checkmark-square_blue.svg",subprompts:[tn.option1,tn.option2,tn.option3,tn.option4]},{key:"collect-feedback",title:on.primary,icon:"/icons/inbox_orange.svg",subprompts:[on.option1,on.option2,on.option3,on.option4]},{key:"track-pipeline",title:nn.primary,icon:"/icons/chart_purple.svg",subprompts:[nn.option1,nn.option2,nn.option3,nn.option4]},{key:"run-campaign",title:rn.primary,icon:"/icons/megaphone_yellow.svg",subprompts:[rn.option1,rn.option2,rn.option3,rn.option4]}],ln=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.journalEntries",defaultMessage:"Journal entries"},option1:{id:"setupGenerator.suggestionPill.journalEntries.option1",defaultMessage:"<gray>Journal entries</gray> about daily reflections"},option2:{id:"setupGenerator.suggestionPill.journalEntries.option2",defaultMessage:"<gray>Journal entries</gray> about gratitude practices"},option3:{id:"setupGenerator.suggestionPill.journalEntries.option3",defaultMessage:"<gray>Journal entries</gray> about personal growth"},option4:{id:"setupGenerator.suggestionPill.journalEntries.option4",defaultMessage:"<gray>Journal entries</gray> about travel experiences"}}),sn=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.manageLists",defaultMessage:"Manage lists"},option1:{id:"setupGenerator.suggestionPill.manageLists.option1",defaultMessage:"<gray>Manage lists</gray> for grocery shopping"},option2:{id:"setupGenerator.suggestionPill.manageLists.option2",defaultMessage:"<gray>Manage lists</gray> of books to read"},option3:{id:"setupGenerator.suggestionPill.manageLists.option3",defaultMessage:"<gray>Manage lists</gray> of gift ideas"},option4:{id:"setupGenerator.suggestionPill.manageLists.option4",defaultMessage:"<gray>Manage lists</gray> of travel destinations"}}),cn=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.trackHabits",defaultMessage:"Track habits"},option1:{id:"setupGenerator.suggestionPill.trackHabits.option1",defaultMessage:"<gray>Track habits</gray> for daily workouts"},option2:{id:"setupGenerator.suggestionPill.trackHabits.option2",defaultMessage:"<gray>Track habits</gray> for reading more books"},option3:{id:"setupGenerator.suggestionPill.trackHabits.option3",defaultMessage:"<gray>Track habits</gray> for learning a new skill"},option4:{id:"setupGenerator.suggestionPill.trackHabits.option4",defaultMessage:"<gray>Track habits</gray> for improving sleep quality"}}),dn=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.setGoals",defaultMessage:"Set goals"},option1:{id:"setupGenerator.suggestionPill.setGoals.option1",defaultMessage:"<gray>Set goals</gray> for financial savings"},option2:{id:"setupGenerator.suggestionPill.setGoals.option2",defaultMessage:"<gray>Set goals</gray> for fitness milestones"},option3:{id:"setupGenerator.suggestionPill.setGoals.option3",defaultMessage:"<gray>Set goals</gray> for personal learning"},option4:{id:"setupGenerator.suggestionPill.setGoals.option4",defaultMessage:"<gray>Set goals</gray> for work-life balance"}}),pn=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.saveMemories",defaultMessage:"Save memories"},option1:{id:"setupGenerator.suggestionPill.saveMemories.option1",defaultMessage:"<gray>Save memories</gray> from vacations and trips"},option2:{id:"setupGenerator.suggestionPill.saveMemories.option2",defaultMessage:"<gray>Save memories</gray> from family gatherings"},option3:{id:"setupGenerator.suggestionPill.saveMemories.option3",defaultMessage:"<gray>Save memories</gray> from major life milestones"},option4:{id:"setupGenerator.suggestionPill.saveMemories.option4",defaultMessage:"<gray>Save memories</gray> from concerts and events"}}),un=[{key:"journal-entries",title:ln.primary,icon:"/icons/book_blue.svg",subprompts:[ln.option1,ln.option2,ln.option3,ln.option4]},{key:"manage-lists",title:sn.primary,icon:"/icons/checklist_green.svg",subprompts:[sn.option1,sn.option2,sn.option3,sn.option4]},{key:"track-habits",title:cn.primary,icon:"/icons/trophy_yellow.svg",subprompts:[cn.option1,cn.option2,cn.option3,cn.option4]},{key:"set-goals",title:dn.primary,icon:"/icons/target_orange.svg",subprompts:[dn.option1,dn.option2,dn.option3,dn.option4]},{key:"save-memories",title:pn.primary,icon:"/icons/camera_purple.svg",subprompts:[pn.option1,pn.option2,pn.option3,pn.option4]}];var mn=()=>o(584262);function gn(e){return"new_user_onboarding"===e}var fn=()=>o(179034),hn=()=>o(116225),yn=()=>o(872539),vn=()=>o(857783),bn=()=>o(279047),xn=()=>o(211716),wn=()=>o(981084),Sn=()=>o(630116),kn=()=>o(17090),Cn=()=>o(14235),In=()=>o(413267),_n=()=>o(678553),jn=()=>o(449552),Tn=()=>o(614505),Mn=()=>o(16006);const An=18,Pn=16;function Rn(e){let{store:t,style:o,textStyle:n}=e;const r=(0,b().IS)((e=>({iconAndTitle:{display:"flex",alignItems:"center",gap:4,overflow:"hidden",...o},lockIcon:{width:Pn,height:Pn,margin:(An-Pn)/2,fill:e.icon.primary},text:{flexShrink:1,overflow:"hidden",...n}})),[o,n]),l=(0,i().K8)((()=>{if(t instanceof Sn().SL)return(0,jn().g)(r.lockIcon);const e=null==t?void 0:t.getIcon();return t instanceof Sn().Bv?(0,G.jsx)(Tn().A,{icon:e,disabled:!0,isEmptyPage:!1,size:An}):t instanceof Sn().h4?(0,G.jsx)(ct().x,{store:t,disabled:!0,size:An}):void(0,a().HB)(t)}),[t,r.lockIcon]);return(0,G.jsxs)("div",{style:r.iconAndTitle,children:[l,(0,G.jsx)(se().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",customStyles:r.text,children:t instanceof Sn().SL?(0,G.jsx)(S().sA,{id:"workflowTemplatesOnboardingModalLocationPicker.privateLocationName",defaultMessage:"Private"}):(0,G.jsx)(Mn().A,{store:t})})]})}function Bn(e){let{currentParentStore:t,onSelect:r,onDismiss:l}=e;const s=(0,S().tz)(),[c,d]=(0,n.useState)(""),p=(0,n.useMemo)((()=>{const e=new(o(757695).default)("scrolledToTop");return e.setState(!0),e}),[]),u=(0,i().K8)((()=>{var e;const n=Bo().default.state.currentSpaceStore,r=Bo().default.state.currentSpaceViewStore,i=null===(e=Bo().default.state.currentUserStore)||void 0===e?void 0:e.id;if(!r||!n||!i)return[];const a=o(634157).A.getJoinedTeamStores({userId:i,spaceStore:n}).filter((e=>e.canAddOrRemoveTopLevelPages())),l=(0,Ao().IL)(n)?a:[n,...a],s=l.findIndex((e=>e.id===t.id&&e.table===t.table));if(-1===s)return l;const c=l[s];return[c,...l.filter((e=>e!==c))]}),[t.id,t.table]),m=(0,i().K8)((()=>0===c.length?u:(0,o(467730).Ay)(c,u,(e=>e instanceof Sn().SL?s.formatMessage({id:"workflowTemplatesOnboardingModalLocationPickerMenu.private",defaultMessage:"Private"}):e instanceof Sn().h4?e.getName()??"":void(0,a().HB)(e)))),[c,u,s]),g=(0,n.useCallback)((e=>{p.setState(0===e.currentTarget.scrollTop)}),[p]),f=(0,n.useCallback)((e=>{const t=m.find((t=>t.id===e.key));t&&r(t)}),[m,r]),h=(0,b().IS)((e=>({checkIcon:{width:14,height:14},input:{marginTop:6},inputInner:{fontSize:12},lastMenuItem:{marginBottom:4},menuItemTextWrapper:{display:"flex",alignItems:"center",minHeight:28,marginLeft:10,marginRight:12},locationTitle:{gap:10},overfilteredLabel:{fill:e.text.secondary,paddingBottom:12}})),[]),y=(0,n.useMemo)((()=>[m.length>0?Vn({filteredLocations:m,currentParentStore:t,onSelect:r,locationTitleStyle:h.locationTitle,menuItemTextWrapperStyle:h.menuItemTextWrapper,checkIconStyle:h.checkIcon}):En({intl:s,overfilteredLabelStyle:h.overfilteredLabel})]),[m,t,r,h.locationTitle,h.menuItemTextWrapper,h.checkIcon,h.overfilteredLabel,s]);return(0,G.jsx)(o(928600).A,{menuType:o(722872).gu.Popup,header:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(o(419357).Ay,{style:h.input,inputStyle:h.inputInner,itemMarginLeft:8,itemMarginRight:8,focusInitial:!0,value:c,onChange:e=>d(e.target.value),placeholder:s.formatMessage({id:"workflowTemplatesOnboardingModalLocationPickerMenu.searchInputPlaceholder",defaultMessage:"Add to..."})}),(0,G.jsx)(Ln,{isScrolledToTopStore:p})]}),onClickOutside:l,maxHeight:210,width:252,onScroll:g,children:(0,G.jsx)(To().Ay,{type:To().Oh.Vertical,initialFocus:0,onAccept:f,sections:y})})}function Ln(e){let{isScrolledToTopStore:t}=e;const o=(0,i().O$)(t),n=(0,b().IS)((e=>({divider:{height:1,overflow:"visible",boxShadow:`inset 0 0 0 1px ${e.lightDividerColor}`,opacity:o?0:1,transition:"opacity 0.1s ease-in-out"}})),[o]);return(0,G.jsx)("div",{style:n.divider})}function En(e){let{intl:t,overfilteredLabelStyle:o}=e;return{key:"empty",items:[{key:"noMatchingLocationsItem",render:e=>(0,G.jsx)(_n().A,{...e,title:t.formatMessage({id:"workflowTemplatesOnboardingModalLocationPickerMenu.noLocations",defaultMessage:"No matching teamspaces found"}),style:o}),action:()=>{}}],render:e=>(0,G.jsx)(Mo().A,{...e,disableDesktopPadding:!0})}}function Vn(e){let{filteredLocations:t,currentParentStore:o,onSelect:n,locationTitleStyle:r,menuItemTextWrapperStyle:i,checkIconStyle:a}=e;return{key:"section",items:t.map((e=>({key:e.id,render:t=>(0,G.jsx)(Io().A,{...t,textWrapperStyle:i,right:e.id===o.id&&e.table===o.table?(0,In().b)(a):void 0,title:(0,G.jsx)(Rn,{store:e,style:r})}),action:()=>n(e)}))),render:e=>(0,G.jsx)(Mo().A,{...e,disableDesktopPadding:!1})}}const Nn=n.memo(Bn);function Fn(e){let{currentSelectedStore:t,onSelect:r}=e;const[i,a]=(0,n.useState)(!1),l=(0,n.useCallback)((e=>{r(e),a(!1)}),[r]),s=(0,n.useCallback)((()=>a(!1)),[]),c=(0,n.useCallback)((()=>a(!0)),[]),d=(0,b().IS)((e=>({originContainer:{display:"flex",alignItems:"center",gap:2,maxWidth:300},originText:{fontWeight:at().Wy.medium},addToLabel:{flexShrink:0},button:{width:"max-content",display:"flex",alignItems:"center",gap:4,padding:4,height:24,flexShrink:1,overflow:"hidden"},icon:{width:12,height:12,fill:e.text.tertiary}})),[]);return t?(0,G.jsxs)("div",{style:d.originContainer,children:[(0,G.jsx)(se().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",customStyles:d.addToLabel,children:(0,G.jsx)(S().sA,{id:"workflowTemplatesOnboardingModalLocationPicker.addTo",defaultMessage:"Add to"})}),(0,G.jsx)(Cn().Ay,{open:i,popupType:Cn().nl.Popup,placementToOrigin:te().W.Bottom,alignmentToOrigin:te().C.Start,onDismiss:s,origin:(0,G.jsxs)(be().p,{style:d.button,onClick:c,children:[(0,G.jsx)(Rn,{store:t,textStyle:d.originText}),(0,o(668725).b)(d.icon)]}),render:()=>(0,G.jsx)(Nn,{currentParentStore:t,onSelect:l,onDismiss:s}),trapFocus:!0})]}):null}const On=n.memo(Fn);var zn=()=>o(793863),Wn=()=>o(992032);function Dn(e){let{parentStore:t,searchQuery:o,handleSearchQueryChange:r,handleTopbarSizeChange:a,scrollerStore:l}=e;const c=(0,S().tz)(),d=t.table===fn().ev?void 0:t,p=(0,n.useCallback)((e=>{h().A.update((t=>{if(!1===t.open||"pre_signup_build_with_ai"===t.version)throw new Error("Component should not render for pre-signup version");return{...t,parentStore:e}}))}),[]),u=(0,n.useContext)(Ie().eh),m=(0,b().IS)((e=>({topbar:{position:"absolute",top:0,zIndex:2,padding:"16px 24px",width:"100%",display:"grid",gap:24,gridTemplateColumns:`minmax(${d?123:0}px, 1fr) minmax(0, 296px) minmax(0, 1fr)`},closeButton:{width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.accentColors.translucentGray[75],flexShrink:0},closeButtonHovered:{background:e.accentColors.translucentGray[200]},closeIcon:{width:10,color:e.icon.secondary,stroke:e.icon.secondary,strokeWidth:.5},locationPickerWrapper:{overflow:"hidden"},input:{width:"100%",padding:"8px 12px",background:e.accentColors.washGlass[0],borderRadius:10},divider:{position:"absolute",bottom:0,width:"100%"}})),[d]),g=(0,i().K8)((()=>{const e=h().A.state;return!!e.open&&(gn(e.origin)&&e.setupGenerator)}),[]);return(0,G.jsx)(Fe().EE,{onSizeChange:a,children:(0,G.jsxs)("div",{style:m.topbar,children:[(0,G.jsxs)(s().Y1,{direction:"horizontal",gap:16,align:"center-left",children:[(0,G.jsx)(Co().A,{style:m.closeButton,hoveredStyle:m.closeButtonHovered,onClick:u,children:(0,Se().u)(m.closeIcon)}),d&&(0,G.jsx)("div",{style:m.locationPickerWrapper,children:(0,G.jsx)(On,{currentSelectedStore:d,onSelect:p})})]}),g?null:(0,G.jsx)(z().A,{focusInitial:!0,value:o,onChange:r,style:m.input,placeholder:c.formatMessage({id:"workflowTemplatesOnboardingModal.searchPlaceholder",defaultMessage:"Search"})}),(0,G.jsx)("div",{style:m.divider,children:(0,G.jsx)(bn().A,{type:"top",scrollerStore:l})})]})})}let Gn=0;function Kn(e){let{modalState:t}=e;const o=(0,r().v3)(),a=(0,S().tz)(),[l,c]=(0,n.useState)(Gn),d=(0,i().uB)(void 0,kn().A),p=(0,n.useCallback)((e=>{var t;t=e.height,Gn=t,c(e.height)}),[]),u=t.collectionTemplatesSearchQuery??"";!function(e){let{environment:t,searchQuery:o}=e;const r=(0,Pe().lW)(o,500,((e,t)=>e===t)),a=(0,i().K8)((()=>h().A.state.open?(0,zn().oA)():[]),[]);(0,n.useEffect)((()=>{const{state:e}=h().A;if(!e.open)return;if(e.flowId!==Hn.flowId&&(Hn={query:"",flowId:e.flowId}),Hn.query===r)return;const o=Hn.query.length??0,n=r.length>0,i=o>0;(0,g().u4)({environment:t,event:{eventName:"template_picker_search_changed",eventProperties:{...(0,f().gM)(e),type:n?i?"search_edited":"search_started":"search_ended",shown_templates_for_search:n?(0,zn().Mq)(r,a).map((e=>e.templateId)):void 0}}}),Hn={query:r,flowId:e.flowId}}),[t,r,a])}({environment:o,searchQuery:u});const m=(0,b().IS)((e=>{const t=`\n\t\t\tlinear-gradient(\n\t\t\t\tto bottom,\n\t\t\t\ttransparent ${l+1}px,\n\t\t\t\twhite ${l+1.1}px\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\tto left,\n\t\t\t\tblack 16px,\n\t\t\t\ttransparent 17px\n\t\t\t)`;return{container:{maskImage:t,WebkitMaskImage:t,maskSize:"100% 100%",WebkitMaskSize:"100% 100%",maskPosition:"0 0",WebkitMaskPosition:"0 0",maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:l},content:{maxWidth:"calc(100% - 32px)",paddingBottom:16}}}),[l]),y=(0,n.useCallback)((e=>{h().A.setState({...t,collectionTemplatesSearchQuery:e.target.value})}),[t]),v=(0,n.useCallback)((async e=>{const{title:n}=e??{},r=function(e){let{environment:t,parentStore:o,title:n}=e;const{currentSpaceStore:r,currentSpaceViewStore:i}=Bo().default.state;if(r&&i){if(o instanceof Sn().h4)return yn().A5({environment:t,from:"team_workflow_templates_onboarding_modal",spaceStore:r,spaceViewStore:i,teamStore:o,andNavigate:!0,appendOrPrepend:"append",title:n});if(o instanceof Sn().SL){const e="private",o="workflow_templates_onboarding_modal";return hn().u4({name:"page_created",args:{type:e,from:o}}),yn().SE({environment:t,spaceStore:r,spaceViewStore:i,type:e,outlinerItemFrom:o,title:n})}}}({environment:o,parentStore:t.parentStore,title:n});if(!r)return;const i=await r;i&&(h().A.close({type:"accepted_new_page",newPageTitle:n,blockId:i.id}),(0,g().u4)({environment:o,event:{eventName:"template_picker_empty_item_selected",eventProperties:{...(0,f().gM)(t),type:"page",created_block_id:i.id,created_block_type:i.getType()}}}))}),[o,t]),x=(0,vt().X)("workflow_container"),w=(0,n.useCallback)((e=>{var n;t.open&&(!t.existingCollectionInfo||x?t.parentStore&&(0,Ot().my)({environment:o,parentStore:t.parentStore,collectionViewBlockStore:null===(n=t.existingCollectionInfo)||void 0===n?void 0:n.collectionViewBlockStore,title:null==e?void 0:e.title,onFinish:n=>{(0,g().u4)({environment:o,event:{eventName:"template_picker_empty_item_selected",eventProperties:{...(0,f().gM)(t),type:"database",created_block_id:n.id,created_block_type:n.getType()}}}),vn().uK({environment:o,store:n,visitType:xn().ig.Link,pageVisitSource:mn().y8.Create}),h().A.close({type:"accepted_empty_collection",newCollectionTitle:null==e?void 0:e.title,blockId:n.id})}}):h().A.close({type:"accepted_empty_collection",newCollectionTitle:null==e?void 0:e.title,blockId:t.existingCollectionInfo.collectionViewBlockStore.id}))}),[o,t,x]),k=(0,n.useCallback)(((e,t)=>{(0,ve().handleSelectTemplateFromOnboardingModal)({environment:o,template:e,analyticsArgs:t})}),[o]),C=(0,wn().U)("marketplace_workflow_templates_onboarding_modal",{forceOpenInNewTab:!0}),I=(0,n.useMemo)((()=>({onSelectTemplate:k,onAddEmptyPage:v,onAddEmptyDatabase:w,onMarketplaceClick:C})),[k,v,w,C]),_=(0,i().K8)((()=>{if(t.open)return t.setupGenerator}),[t]),j=(0,i().K8)((()=>null==_?void 0:_.store.state.prompt),[_]),T="collection_settings_create_view_source"!==(M=t.origin)&&"collection_settings_create_view_source_inline"!==M&&"new_page_pills"!==M;var M;const A=gn(t.origin)&&_,P=(0,i().K8)((()=>{var e;return null===(e=Bo().default.state.currentUserStore)||void 0===e?void 0:e.getDisplayName(a)}),[a]),R=(0,n.useCallback)((async()=>{_&&await(0,Po().z)(_)}),[_]);return t.parentStore?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Dn,{parentStore:t.parentStore,searchQuery:u,scrollerStore:d,handleSearchQueryChange:y,handleTopbarSizeChange:p}),(0,G.jsx)(ht().H,{type:xt().A.Y,store:d,style:m.container,children:(0,G.jsxs)(s().Y1,{width:620,style:m.content,children:[A?(0,G.jsx)(Do,{currentUserName:P,prompt:j,onChange:null==_?void 0:_.setPrompt,onSubmit:R,overrides:{hideSuggestionPills:!0,hideLearnMore:!0}}):null,0===u.length?(0,G.jsx)(Wn().oI,{parentStore:t.parentStore,showEmptyPageButton:T,...I}):(0,G.jsx)(zn().H,{query:u,showEmptyPageButton:T,...I})]})})]}):null}let Hn={query:"",flowId:void 0};var Un=()=>o(682146);function $n(){var e;const t=(0,i().O$)(h().A),o=(0,r().v3)(),a=(0,i().K8)((()=>t.open&&t.collectionTemplate?(0,f().OX)(t):null),[t]),l=(0,n.useCallback)((e=>{h().A.updatePreviewFocusViewTemplateId(e)}),[]),c=(0,b().IS)((e=>({grid:{position:"relative",flex:"1 0 0",maxHeight:"100%",overflowY:"auto"}})),[]);return a&&t.open?(0,G.jsxs)(s().Y1,{direction:"vertical",height:"fill",gap:10,children:[(0,G.jsx)(to,{caption:(0,G.jsx)(S().sA,{id:"workflowTemplatesOnboardingModal.selectViews",defaultMessage:"Select how you prefer to see your {collectionName}",values:{collectionName:null===(e=t.collectionTemplate)||void 0===e?void 0:e.value.targetCollection.name}})}),(0,G.jsx)("div",{style:c.grid,children:(0,G.jsx)(fo,{contentStyle:{padding:"5px 2px"},children:(0,G.jsx)(Yn,{toggleViewSelection:e=>{(0,ve().toggleFeatureSelectionInPreview)({template:e,environment:o})},updatePreviewFocusViewTemplateId:l,...a})})})]}):null}function Yn(e){let{toggleViewSelection:t,updatePreviewFocusViewTemplateId:o,...n}=e;const a=(0,r().v3)(),{collectionTemplate:l,userCustomizations:s}=n,c=(0,b().DP)(),d=(0,i().K8)((()=>ye().globalWorkflowTemplates.allOfType({templateIds:l.value.templateItems.map((e=>e.pointer)),type:"collection_view"})),[l]),p=(0,i().K8)((()=>{const e=s.featureTemplateSelections.filter((e=>"collection_view"===e.template.type&&e.selected));return e.length>0?e[0].template.templateId:void 0}),[s]),u=(0,i().K8)((()=>1===s.featureTemplateSelections.filter((e=>e.selected&&"collection_view"===e.template.type)).length),[s]),m=(0,b().IS)((e=>({views:{display:"flex",flexDirection:"column",gap:12,padding:2},button:{display:"flex",width:"100%",flexDirection:"row",alignItems:"center",gap:8,justifyContent:"left",height:52,borderRadius:14,cursor:"pointer",fontSize:14,padding:16,lineHeight:"20px",color:e.text.primary,fontWeight:at().Wy.medium},viewName:{flexGrow:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},baseIconStyle:{flexShrink:0,height:20,width:20},overflowTooltip:{maxWidth:250}})),[]);return p?(0,G.jsx)("div",{style:m.views,children:d.map(((e,r)=>{const i=s.featureTemplateSelections.find((t=>t.template.templateId===e.templateId)),{name:l,type:p,format:h}=e.value,y=Boolean(null==i?void 0:i.selected),v="required"===(null==i?void 0:i.optionality)||u&&y,b=null==h?void 0:h.collection_view_icon;return(0,G.jsxs)(xe,{isSelected:y,style:m.button,onClick:()=>{var r;if(v)return;const i=!y,l=new Set(s.featureTemplateSelections.filter((e=>e.selected)).map((e=>e.template.templateId)));(0,g().u4)({environment:a,event:{eventName:"workflow_template_onboarding_feature_select",eventProperties:{selecting:i?"selecting":"deselecting",previously_selected_feature_template_ids:[...l],feature_template_id:e.templateId,feature_template_type:e.type,step:"viewsSelection",...(0,f().gM)(n)}}}),t(e);const c=(null===(r=n.previewCollectionInfo)||void 0===r?void 0:r.focusViewTemplateId)===e.templateId;if(i)o(e.templateId);else if(c){var p;const t=null===(p=d.find((t=>l.has(t.templateId)&&t.templateId!==e.templateId)))||void 0===p?void 0:p.templateId;o(t)}},children:[b?(0,G.jsx)(bo().A,{theme:c,icon:b,style:{...m.baseIconStyle,...y&&{fill:c.text.uiBluePrimary}},size:m.baseIconStyle.width}):Un().Vw[p]({...m.baseIconStyle,...y&&{fill:c.text.uiBluePrimary}}),(0,G.jsx)(ue().j,{tooltipStyle:m.overflowTooltip,placement:te().W.Right,children:l})]},r)}))}):null}function qn(e){let{display:t="modal",overrides:o}=e;const m=(0,i().O$)(h().A),y=(0,r().v3)();(0,n.useEffect)((()=>{m.open&&l().H6.CollectionViewBlock.load()}),[m.open]);const v=(0,n.useCallback)((()=>{if(!m.open)return;const e=m.setupGenerator;e&&e.trackSessionEnded({reason:"dismissed"}),(0,g().u4)({environment:y,event:{eventName:"workflow_template_onboarding_dismissed",eventProperties:{...(0,f().gM)(m),step:(0,f().hq)(m),dismissed_by:"click_outside"}}})}),[m,y]),b=(0,i().K8)((()=>m.open?(0,f().hq)(m):void 0),[m]),x=(0,n.useCallback)((()=>{h().A.close({type:"canceled"})}),[]),w=(0,n.useMemo)((()=>({width:{type:"fixed",length:1e3},height:{type:"fixed",length:650}})),[]),S=(0,d().FT)({minimumOutsideSpacing:(0,u().a)({partial:{},defaultLength:100})}),k=(0,p().e)([S,{width:{type:"fill"},height:{type:"fill"}}]);return b&&m.open?"embedded"===t?(0,G.jsx)(d().LE,{areaConstraint:k,isSizeTransitionAnimated:!0,children:(0,G.jsx)(d().wC.Consumer,{children:e=>{let{constrainedSize:t}=e;return(0,G.jsx)(s().Y1,{style:t,children:(0,G.jsx)(Xn,{currentModalStep:b,overrides:{...o??{},hideCornerButton:!0}})})}})}):"modal"===t?(0,G.jsx)(c().s,{isOpen:!0,areaConstraint:w,onDismiss:v,onClosed:x,backgroundAppearance:"wash",keyboardAreaPriority:1,render:e=>{let{sizeRange:t}=e;return(0,G.jsx)(s().Y1,{style:t,children:(0,G.jsx)(Xn,{currentModalStep:b,overrides:o})})}}):void(0,a().HB)(t):null}function Qn(e){let{children:t}=e;return(0,G.jsx)(m().K,{fallback:()=>null,from:"WorkflowTemplatesOnboardingModal",children:t})}function Zn(e){return(0,G.jsx)(Qn,{children:(0,G.jsx)(qn,{...e})})}function Xn(e){let{currentModalStep:t,overrides:o}=e;const n=(0,i().K8)((()=>h().A.state),[]);if(!n.open)return null;switch(t){case"templateSelection":return(0,G.jsx)(Kn,{modalState:n});case"setupGeneratorInput":return(0,G.jsx)(Oo,{overrides:o});case"setupGeneratorBuilding":return(0,G.jsx)(zo,{overrides:o});case"features":return(0,G.jsx)(qt,{overrides:o,children:(0,G.jsx)(ao,{})});case"viewsSelection":return(0,G.jsx)(qt,{overrides:o,children:(0,G.jsx)($n,{})});default:(0,a().HB)(t)}}},886680:(e,t,o)=>{o.d(t,{B2:()=>R,zP:()=>w,EI:()=>M,UY:()=>k,w_:()=>S,lA:()=>j,lh:()=>I,Kc:()=>C,F1:()=>_,NN:()=>P,br:()=>A,pi:()=>x});o(898992),o(737550);var n=()=>o(584262),r=()=>o(443239),i=()=>o(970013),a=()=>o(713998);o(296540);const l={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M4.485 8.86V5.369l4.073 4.073a.625.625 0 0 0 .884-.884L5.369 4.485H8.86a.625.625 0 0 0 0-1.25h-5a.625.625 0 0 0-.625.625v5a.625.625 0 1 0 1.25 0m10.146 6.655-4.07-4.07a.625.625 0 1 1 .884-.884l4.07 4.07V11.14a.625.625 0 1 1 1.25 0v5c0 .345-.28.625-.625.625h-5a.625.625 0 1 1 0-1.25z"})},s=(0,o(340498).wt)("arrowExpandDiagonal",l);var c=()=>o(415566),d=()=>o(177256),p=()=>o(72135),u=()=>o(919709),m=()=>o(496603),g=()=>o(534177),f=()=>o(939768),h=()=>o(720665),y=()=>o(41459),v=()=>o(492414),b=()=>o(972435);function x(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function w(e){switch(e){case y().j.Table:return"table";case y().j.Board:return"board";case y().j.ListView:return"list";case y().j.GalleryView:return"gallery";case y().j.Relation:case y().j.RelationSection:return"relation_section";case y().j.Timeline:return"timeline";case y().j.Calendar:return"calendar";case y().j.Page:return"page_properties";case y().j.CompactPage:return"compact_page";case y().j.Mini:return"mini_peek";case y().j.FormEditor:case y().j.FormViewer:case y().j.PropertyModule:return"property_module";default:(0,g().HB)(e)}}function S(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function k(e){const{store:t,property:o,propertySchema:r}=e,i=null==r?void 0:r.type;if("title"===i)return(0,v().Ay)({store:t,fullyQualified:!1,pageVisitSource:n().y8.LinkInPage});{const e=t.getPropertyValue(o);return a().UY(i,e)}}function C(e){let t=(0,u().k4p)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=f().qg(t),n=o.host;if(o.protocol&&n||(o=f().qg(`http://${t}`),n=o.host),!n)return{domain:void 0,restOfUrl:void 0};n&&(n=n.replace(/^www./i,""));const r=t.toLowerCase().indexOf(n.toLowerCase());if(-1===r)return{domain:void 0,restOfUrl:void 0};n=t.slice(r,r+n.length);return{domain:n,restOfUrl:t.slice(r+n.length)}}function I(e){const{numberValue:t,numberFormat:o,numberShowAs:n}=e;if(!(m().yr(t)||h().pN(t)||"bar"!==(null==n?void 0:n.type)&&"ring"!==(null==n?void 0:n.type))){const e=b().A.getIntl();return"percent"===o?p().ZV(t,"percent",e):`${t} / ${n.maxValue}`}}function _(e){const{property:t,collectionStore:o}=e,n=o.isSyncedCollection();return Boolean(n)&&(0,r().u)(t)}function j(e,t){switch(e){case"side_peek":return{icon:d().A,tooltip:b().A.formatMessage(T.openInSidePeekTooltip),caption:t?"":b().A.formatMessage(T.openAsPageTitle)};case"center_peek":return{icon:c().q,tooltip:b().A.formatMessage(T.openInCenterPeekTooltip),caption:t?"":b().A.formatMessage(T.openAsPageTitle)};case"full_page":return{icon:s,tooltip:b().A.formatMessage(T.openAsPageTooltip),caption:t?"":b().A.formatMessage(T.openAsPageTitle)};default:(0,g().HB)(e)}}const T=(0,o(959013).YK)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function M(e){const t=e.getSchema();if(t)for(const[n,r]of Object.entries(t)){var o;if(r&&"text"===r.type&&"summarize"===(null===(o=r.ai_inference)||void 0===o?void 0:o.type)){const t=e.getPropertyValue(n);if(t)return t}}}function A(e){const{store:t,additionalStores:o,collectionContextStore:n}=e,r=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==n?void 0:n.contextType)||!r)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==r.id}))}function P(e){return e===y().j.FormEditor||e===y().j.FormViewer}function R(e){return Boolean(e&&!i().dA.includes(e.type))}},888325:(e,t,o)=>{function n(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>n})},902842:(e,t,o)=>{o.d(t,{n:()=>k,z:()=>w});o(16280),o(296540);var n=()=>o(56366),r=()=>o(401497),i=()=>o(663077),a=()=>o(632625),l=()=>o(743176),s=()=>o(278238),c=()=>o(101209),d=()=>o(366295),p=()=>o(462892),u=()=>o(926329),m=()=>o(534177),g=()=>o(745266),f=()=>o(231314),h=()=>o(3486),y=()=>o(913454),v=o(474848);const b=16;function x(e){let{icon:t,theme:o,size:n,style:i}=e;const l=(0,r().IS)((e=>({icon:{fill:(0,h().d)(t,e).icon.primary,...i}})),[t,i]);return(0,v.jsx)(a().A,{icon:t,theme:o,size:n,style:l.icon})}function w(e){var t;let{template:o,size:n,iconStyle:a}=e;const l=n??b,f=(0,r().IS)((()=>({icon:{width:l,height:l,...a}})),[l,a]),h=(0,r().DP)();if((0,i().cB)(o.templateId))return(0,d().L)(f.icon);const{type:y}=o;switch(y){case"property":return(0,v.jsx)(S,{template:o,iconSize:l,styles:f});case"collection_view":return(0,v.jsx)(g().h,{viewIcon:null===(t=o.value.format)||void 0===t?void 0:t.collection_view_icon,viewType:o.value.type,color:"lightGray",style:f.icon});case"layout":return(0,v.jsx)(v.Fragment,{children:(0,p()._)(f.icon)});case"block":return(0,v.jsx)(v.Fragment,{children:(0,u().b)(f.icon)});case"collection":case"compound":const e="collection"===o.type?o.value.targetCollection.icon:o.icon;if(!(0,s().T8)(e))throw new Error("Only Notion static icons are allowed for template icons");return(0,v.jsx)(x,{icon:e,theme:h,size:l,style:f.icon});case"automation":return(0,v.jsx)(v.Fragment,{children:(0,c().v)(f.icon)});default:(0,m().HB)(y)}}function S(e){let{template:t,iconSize:o,styles:i}=e;const a=(0,r().DP)(),s=(0,n().K8)((()=>{const{relatedCollectionTemplateId:e}=t;if("relation"===t.value.type&&e){return y().globalWorkflowTemplates.fromIdOfType({templateId:e,type:"collection"}).value.targetCollection.icon}return t.value.icon}),[t]);return(0,v.jsx)(l().Ay,{type:t.value.type,icon:s,size:o,style:i.icon,theme:a})}function k(e){let{template:t,backgroundSize:o}=e;const n=(0,r().IS)((e=>({iconContainer:{background:C({theme:e,template:t})[30]},icon:{fill:C({theme:e,template:t})[400]}})),[t]);return(0,v.jsx)(f().y,{backgroundColor:n.iconContainer.background,backgroundSize:o,icon:(0,v.jsx)(w,{template:t,iconStyle:n.icon})})}function C(e){let{theme:t,template:o}=e;const{type:n}=o;switch(n){case"collection_view":case"automation":return t.accentColors.blue;case"property":return"relation"===o.value.type?t.accentColors.yellow:t.accentColors.red;case"layout":return t.accentColors.orange;case"block":return t.accentColors.purple;case"compound":return t.accentColors.green;case"collection":return t.accentColors.pink;default:(0,m().HB)(n)}}},926329:(e,t,o)=>{o.d(t,{b:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("templates",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},966759:(e,t,o)=>{o.d(t,{i:()=>i});var n=()=>o(476492),r=()=>o(175213);function i(e){const{environment:t,collectionContextStore:o,property_type:i,from:a,property:l,...s}=e,c=(0,n().sl)(o)||{};(0,r().G)(t,{property:l,property_type:i,from:a,...s,...c})}},981084:(e,t,o)=>{o.d(t,{U:()=>c});var n=o(296540),r=()=>o(484714),i=()=>o(427704),a=()=>o(435009),l=()=>o(989423),s=()=>o(806638);function c(e,t){const o=(0,r().v3)();return(0,n.useCallback)((n=>{(0,l().u4)({environment:o,event:{eventName:e,eventProperties:{}}});const r="click"===n.type&&(n.metaKey||n.ctrlKey);(null==t?void 0:t.forceOpenInNewTab)||r?a().oo({environment:o,url:i().JZ.marketplace,openInNew:"tab",makeTabActive:!r&&o.device.isDesktop}):(0,s().P)({environment:o})}),[o,e,t])}},987017:(e,t,o)=>{o.d(t,{Ay:()=>c,Jy:()=>s,vU:()=>l});o(581454);var n=o(296540),r=()=>o(722872),i=o(474848);function a(e){let{tabs:t,selectedIndex:a,onChange:c,separatorIndexes:d,right:p,style:u,rightStyle:m,tabStyle:g,tabTitleStyle:f,selectedTabTitleStyle:h,tabBorderStyle:y,selectedTabStyle:v,readOnly:b,hideTabBorder:x,idPrefix:w}=e;const S=(0,n.useContext)(r().xu),{device:k,WindowSizeStore:C}=(0,o(484714).v3)(),{safePaddingLeft:I,safePaddingRight:_}=(0,o(56366).K8)((()=>({safePaddingLeft:C.getSafePaddingLeftCSS(16),safePaddingRight:C.getSafePaddingRightCSS(16)})),[C]),j=(0,o(401497).IS)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...g},o=`inset 0 -1px 0 ${e.regularDividerColor}`,n=S.menuType===r().gu.Popup,i={fontSize:16,paddingTop:2,paddingLeft:n?16:I,paddingRight:n?16:_,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:x?void 0:o,...k.isMobile?i:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...u},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...v},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...y},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...m}}}),[S.menuType,k.isMobile,m,I,_,v,u,y,g,x]);return(0,i.jsxs)("div",{className:"hide-scrollbar",style:j.container,role:"tablist",children:[t.map(((e,t)=>{const r=t===a;return(0,i.jsxs)(n.Fragment,{children:[(0,i.jsxs)("div",{style:r?j.selectedTab:j.tab,children:[(0,i.jsx)(o(493823).p,{style:{...f,...r?h:{}},onClick:()=>c(t),disabled:b,mobileFeedback:k.isMobile,isLightGray:!Boolean(r),role:"tab","aria-selected":r,id:l(w,t),"aria-controls":s(w,t),children:e}),r&&(0,i.jsx)("div",{style:j.border})]},`tabButton-${t}`),d&&d.includes(t)&&(0,i.jsx)("div",{style:j.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),p&&(0,i.jsx)("div",{style:j.rightContainer,children:p})]})}function l(e,t){if(e)return`${e}-tab-${t}`}function s(e,t){if(e)return`${e}-tabpanel-${t}`}const c=n.memo(a)},992032:(e,t,o)=>{o.d(t,{VJ:()=>j,oI:()=>B,Ac:()=>R});o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),l=()=>o(428045),s=()=>o(261164),c=()=>o(366295),d=()=>o(47966),p=()=>o(571731),u=()=>o(598985),m=()=>o(959013),g=()=>o(496603),f=()=>o(197190),h=()=>o(493823),y=()=>o(554509),v=()=>o(989423),b=()=>o(913454),x=()=>o(575154),w=()=>o(349379),S=()=>o(896326),k=()=>o(458097),C=o(474848);function I(e){let{template:t,onSelect:r,index:i}=e;const[l,s]=(0,n.useState)(!1),c=(0,n.useCallback)((()=>s(!0)),[]),d=(0,n.useCallback)((()=>s(!1)),[]),p=(0,n.useCallback)((()=>r(t)),[r,t]),u=(0,a().IS)((e=>{const n=(0,o(3486).d)(t.value.targetCollection.icon,e);return{button:{borderRadius:j,border:`1px solid ${n.stroke.secondary}`,overflow:"hidden"},buttonInner:{borderRadius:j,background:`${n.fill.tertiary}`},buttonHovered:{background:`${n.fill.secondary}`},textContainer:{padding:"20px 20px 10px",color:n.text.primary},description:{marginTop:2,color:n.text.primary,opacity:.6,textWrap:"balance"},outerImageContainer:{overflow:"visible",position:"relative",height:108,width:"calc(100% - 22px)",marginLeft:22,marginTop:-4},imageContainer:{position:"absolute",top:l?0:4,transition:"top 0.2s ease",width:"100%",height:"100%",marginTop:4,lineHeight:0,borderRadius:"6px 0",overflow:"hidden",background:e.modalBackground,boxShadow:"dark"===e.mode?`0 0 0 1px ${e.stroke.secondary}`:`0px 0px 0px 1px ${e.stroke.secondary}, 0px 2px 4px -1px rgba(0, 0, 0, 0.06), 0px 12px 32px -6px rgba(0, 0, 0, 0.12)`}}}),[l,t.value.targetCollection.icon]);return(0,C.jsx)(o(704152).A,{style:u.button,hoveredStyle:u.buttonHovered,wrapperDivStyle:u.buttonInner,ariaLabel:t.value.targetCollection.name,onClick:p,onMouseEnter:c,onMouseLeave:d,children:(0,C.jsxs)(o(84817).Y1,{gap:"auto",height:"fill",children:[(0,C.jsxs)("div",{style:u.textContainer,children:[(0,C.jsx)(y().D,{styleName:"UIRegular-14px/Medium",children:t.value.targetCollection.name}),(0,C.jsx)(y().D,{styleName:"UISmall-12px/Regular",customStyles:u.description,children:t.description})]}),(0,C.jsx)("div",{style:u.outerImageContainer,children:(0,C.jsx)("div",{style:u.imageContainer,children:(0,C.jsx)(o(67064).i,{template:t,index:i})})})]})})}const _=n.memo(I),j=12,T={};function M(e){let{iconFn:t,iconColorName:o,label:n,onClick:r}=e;const i=(0,a().IS)((e=>({button:{padding:"16px 18px",borderRadius:j,borderWidth:1,borderStyle:"solid",borderColor:"dark"===e.mode?e.stroke.secondary:e.stroke.primary},hovered:{background:e.buttonHoveredBackground,borderColor:e.accentColors.translucentGray[100]},icon:{height:19,width:"auto",color:o?e.icon[o]:void 0,marginBottom:8}})),[o]);return(0,C.jsxs)(f().A,{style:i.button,hoveredStyle:i.hovered,onClick:r,children:[(0,C.jsx)("div",{children:t(i.icon)}),(0,C.jsx)(y().D,{styleName:"UIRegular-14px/Medium",children:n})]})}function A(e){let{iconFn:t,iconColorName:o,label:n,onClick:r}=e;const i=(0,a().IS)((e=>({button:{padding:"5px 12px",display:"flex",gap:8,justifyContent:"center",alignItems:"center",borderRadius:20,color:e.text.secondary},icon:{height:19,width:"auto",color:o?e.icon[o]:void 0,marginBottom:0}})),[o]);return(0,C.jsxs)(f().A,{style:i.button,onClick:r,children:[(0,C.jsx)("div",{children:t(i.icon)}),(0,C.jsx)(y().D,{styleName:"UIRegular-14px/Regular",children:n})]})}const P=16,R=(0,C.jsx)(m().sA,{id:"workflowTemplatesOnboardingModal.button.marketplace",defaultMessage:"More in Marketplace"});function B(e){let{parentStore:t,onAddEmptyPage:o,onAddEmptyDatabase:f,onSelectTemplate:I,onMarketplaceClick:j,showEmptyPageButton:B}=e;const L=(0,r().v3)(),E=(0,i().K8)((()=>k().A.getShouldShowExpandedTemplateList()),[]),V=(0,x().q)({parentStore:t,returnAllTemplates:E}),N=(0,n.useMemo)((()=>E?V:function(e){let{arr:t,min:o}=e;if(t.length<=o)return[...t];return t.slice(0,2*Math.floor(t.length/2))}({arr:V,min:1})),[V,E]),F=(0,i().K8)((()=>k().A.state.open&&"new_user_onboarding"===k().A.state.origin),[]),O=(0,i().K8)((()=>(0,b().getIsSetupGeneratorEnabled)()&&!F),[F]),z=!E,W=(0,n.useCallback)((()=>{k().A.setShouldShowExpandedTemplateList(!0),k().A.state.open&&(0,v().u4)({environment:L,event:{eventName:"template_picker_show_more_templates_clicked",eventProperties:(0,S().gM)(k().A.state)}})}),[L]),D=(0,a().IS)((e=>({container:{width:"100%",maxWidth:560+P,alignSelf:"center",alignItems:"center"},basicButtonGrid:{display:"grid",gridTemplateColumns:`repeat(auto-fit, minmax(calc((100% - ${2*P}px) / 3), 1fr))`,maxWidth:"100%",gap:P,marginTop:P,marginBottom:2*P},newUserOnboardingButtons:{display:"flex",gap:4,margin:`${P}px auto 40px auto`,justifyContent:"center"},templateButtonGrid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:P,marginTop:18},showMoreButton:{marginTop:P,height:32,paddingLeft:12,paddingRight:12},marketplaceButton:{padding:"6px 8px 6px 6px",height:32,marginTop:P},marketplaceIcon:{height:19,width:"auto",color:e.icon.secondary,marginRight:10},arrowRightIcon:{height:10,width:"auto",color:e.icon.secondary,marginLeft:6}})),[]);(0,n.useEffect)((()=>{const{state:e}=k().A;e.open&&void 0!==e.flowId&&!T[e.flowId]&&((0,w().DF)({environment:L,eventProperties:{collection_template_ids_shown:N.map((e=>e.templateId)),...(0,S().gM)(e)}}),T[e.flowId]=!0)}),[N,L]);const G=(0,n.useCallback)((()=>{I(b().globalWorkflowTemplates.fromIdOfType({templateId:l().MH,type:"collection"}),{type:"ai_generated_template"})}),[I]),K=(0,n.useCallback)((e=>{I(e,{type:"suggested_template",allOrderedTemplateIds:N.map((e=>e.templateId))})}),[I,N]),H=F?A:M,U=(0,g().oE)([B?(0,C.jsx)(H,{iconFn:d().Y,iconColorName:"secondary",label:(0,C.jsx)(m().sA,{id:"workflowTemplatesOnboardingModal.button.emptyPage",defaultMessage:"Empty page"}),onClick:o},"emptyPage"):void 0,(0,C.jsx)(H,{iconFn:p().J,iconColorName:"secondary",label:(0,C.jsx)(m().sA,{id:"workflowTemplatesOnboardingModal.button.emptyDatabase",defaultMessage:"Empty database"}),onClick:f},"emptyDatabase"),O?(0,C.jsx)(H,{iconFn:c().L,label:(0,C.jsx)(m().sA,{id:"workflowTemplatesOnboardingModal.button.buildWithAi",defaultMessage:"Build with AI"}),onClick:G},"buildWithAi"):void 0]);return(0,C.jsxs)("div",{style:D.container,children:[(0,C.jsx)("div",{style:F?D.newUserOnboardingButtons:D.basicButtonGrid,children:U}),(0,C.jsx)(y().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:(0,C.jsx)(m().sA,{defaultMessage:"Suggested",id:"workflowTemplatesOnboardingModal.templateSelection.heading"})}),(0,C.jsx)("div",{style:D.templateButtonGrid,children:N.map(((e,t)=>(0,C.jsx)(_,{template:e,onSelect:K,index:t},e.templateId)))}),z?(0,C.jsx)(h().p,{style:D.showMoreButton,onClick:W,children:(0,C.jsx)(y().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:(0,C.jsx)(m().sA,{id:"workflowTemplatesOnboardingModalSelectionLanding.seeMore",defaultMessage:"More templates"})})}):(0,C.jsxs)(h().p,{style:D.marketplaceButton,onClick:j,children:[(0,u().J)(D.marketplaceIcon),(0,C.jsx)(y().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:R}),(0,s().o)(D.arrowRightIcon)]})]})}},995062:(e,t,o)=>{o.r(t),o.d(t,{AssistantAnimatedFace:()=>j,AssistantAnimatedFaceInner:()=>T});o(18107),o(967357);var n=()=>o(303848),r=()=>o(244641),i=o(296540),a=()=>o(624919),l=()=>o(56366),s=()=>o(401497),c=()=>o(604341),d=()=>o(592328),p=()=>o(336811),u=()=>o(999752),m=()=>o(763824),g=()=>o(534177),f=()=>o(631611),h=()=>o(295169),y=()=>o(337567),v=()=>o(865241),b=()=>o(998109),x=()=>o(846955),w=()=>o(278589),S=()=>o(783793);const k=o.p+"bc69e69669ca365b.riv",C=["Base_Idle","Idle A","Idle B","Idle C"];var I=o(474848);n().RuntimeLoader.setWasmUrl(o(390654));const _=!1;function j(e){const{sizeVariant:t,includeBoxShadow:o,onMouseEnter:n}=e,r=function(){const e=(0,f().jw)().isWriter,t=(0,l().K8)((()=>{const t=e?(0,y().K1)():h().default.getActiveSession();if(!t)return"idle";const o=t.evaluator.getTranscript().at(-1);if(o&&"observation"===o.type&&"error"===o.observationType)return"error";const n=t.isStreaming();if(!n)return"idle";const r=t.getCombinedSteps().at(-1),i="assistantSearch"===(null==r?void 0:r.type)||"assistantShowSearchResults"===(null==r?void 0:r.type),a="assistantLoading"===(null==r?void 0:r.type)||"human"===(null==r?void 0:r.type);return"groupedEditCard"===(null==r?void 0:r.type)?"writing":i?"searching":a?"thinking":n?"writing":"idle"}),[e]);return(0,i.useEffect)((()=>{_&&M("HighLevelState","Pink",t)}),[t]),t}();return(0,I.jsx)(b().n,{step:"ai_assistant",isFullWidth:!1,highlightStyle:{borderRadius:"100%"},children:(0,I.jsx)(T,{sizeVariant:t,includeBoxShadow:o,highLevelState:r,onMouseEnter:n})})}function T(e){const{sizeVariant:t,highLevelState:o,includeBoxShadow:r,onMouseEnter:f}=e,[h,y]=(0,i.useState)(!1),b=(0,i.useCallback)((()=>{y(!0)}),[]),{onStateChange:j,waitUntilState:T,animationState:A}=function(){const e=(0,i.useRef)("Idle B"),t=(0,i.useMemo)((()=>new(d().A)),[]),o=(0,i.useCallback)((o=>{if(Array.isArray(o.data)&&1===o.data.length){const n=o.data[0];_&&M("State change","DarkGreen",n),e.current=n,t.emit(n)}}),[t]),n=(0,i.useCallback)((()=>new Promise((e=>{const o=n=>{t.removeListener(o),e(n)};t.addListener(o)}))),[t]),r=(0,i.useCallback)((async t=>{(await m().nQ(2e3,(async()=>{for(;!t(e.current);)await n()})())).timeout&&(0,a().NK)("Timed out while waiting for an assistant face state change.")}),[n]);return{animationState:e,waitUntilState:r,onStateChange:o}}(),{rive:P,RiveComponent:R}=(0,n().useRive)({src:k,stateMachines:["Main"],autoplay:!0,onAdvance:b,onStateChange:j});!function(e){const t=(0,l().K8)((()=>v().A.state.isVisible),[]),o=(0,i.useCallback)((()=>{null==e||e.startRendering()}),[e]),n=(0,i.useCallback)((()=>{null==e||e.stopRendering()}),[e]);(0,i.useEffect)((()=>{t?o():n()}),[t,n,o])}(P);const B=function(e){const t=(0,i.useMemo)((()=>{const t=null==e?void 0:e.stateMachineInputs("Main"),o=new Map;if(!t)return o;for(const e of t)o.set(e.name,e);return o}),[e]);(0,i.useEffect)((()=>{(0,c().exposeDebugValue)("AssistantAnimatedFaceTriggers",t)}),[t]);const o=(0,p().T)(),n=(0,i.useCallback)((e=>{var n;o.current&&(_&&M("Firing trigger","MediumBlue",e),null===(n=t.get(e))||void 0===n||n.fire())}),[o,t]);return n}(P),L=(0,i.useMemo)((()=>new(u().O)(1)),[]);(0,i.useEffect)((()=>{L.enqueue((async()=>{"writing"===o?B("WritingInTrigger"):"idle"===o?(await async function(){"Writing_In"===A.current&&await T((e=>"Writing_Loop"===e)),"Writing_Loop"===A.current&&(B("WritingOutTrigger"),await T((e=>(0,g().Xk)(C,e)))),"Thinking_In"!==A.current&&"Thinking_Loop"!==A.current||(B("ThinkingOutTrigger"),await T((e=>(0,g().Xk)(C,e)))),"Searching_In"===A.current&&await T((e=>"Searching_Loop"===e)),"Searching_Loop"===A.current&&(B("SearchingOutTrigger"),await T((e=>(0,g().Xk)(C,e))))}(),B("IdleTrigger")):"searching"===o?B("SearchingInTrigger"):"thinking"===o?B("ThinkingInTrigger"):"error"===o?B("ErrorTrigger"):(0,g().HB)(o)}))}),[o,B,T,L,A]);const E=(0,s().IS)((e=>{const o=(0,w().N)(t);return{wrap:{width:o,height:o,...r&&{boxShadow:e.shadowXS,borderRadius:"100%"},position:"relative"},faceImg:{position:"absolute",height:o,width:o},staticFace:{position:"absolute",left:0,top:0}}}),[t,r]);return(0,I.jsxs)("div",{style:E.wrap,onMouseEnter:e=>{e.stopPropagation(),null==f||f(e),setTimeout((()=>x().default.dismissTourTutorial()),400)},children:[(0,I.jsx)(R,{style:E.faceImg,onMouseEnter:()=>{Math.random()<.1&&B("GreetingTrigger")}}),!h&&(0,I.jsx)(S().o,{variant:t,wrapWithPadding:!0,style:E.staticFace,shadowVariant:r?"strong":"none"})]})}function M(e,t){const o=r().c9.local().toFormat("HH:mm:ss.SSS");for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];console.log(`%c[${o}] %c${e}:`,"color: Grey;",`color: ${t}; font-weight: bold;`,...i)}}}]);