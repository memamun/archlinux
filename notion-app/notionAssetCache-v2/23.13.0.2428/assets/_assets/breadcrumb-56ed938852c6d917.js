"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[3476],{404085:(e,t,n)=>{n.d(t,{l:()=>r});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M9.381 13.619a.875.875 0 0 0 1.238 0l5.4-5.4A.875.875 0 1 0 14.78 6.98L10 11.763 5.219 6.98A.875.875 0 1 0 3.98 8.22z"})},r=(0,n(340498).wt)("arrowChevronSingleDownFill",i)},471095:(e,t,n)=>{n.d(t,{i:()=>r});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},r=(0,n(340498).wt)("lockFill",i)},914436:(e,t,n)=>{n.d(t,{default:()=>ce});var i=n(296540),r=()=>n(484714),s=()=>n(56366),o=()=>n(401497),l=()=>n(284371),a=()=>n(696746),c=()=>n(351360),d=(n(944114),n(581454),()=>n(179034)),u=()=>n(959013),h=()=>n(534177),g=()=>n(705540),x=()=>n(108944),m=()=>n(71304),v=()=>n(37433),f=()=>n(963589),p=()=>n(630116),b=()=>n(704152),j=()=>n(493823),y=()=>n(406699),S=()=>n(928600),M=()=>n(939740),k=()=>n(722872),w=()=>n(584262),A=()=>n(857783),C=()=>n(305390),B=()=>n(89924),P=()=>n(728611),W=()=>n(211716),R=n(474848);function z(e,t){return[{key:"results",render:e=>(0,R.jsx)(B().A,{...e}),items:t.map(((t,n)=>({key:t.id,render:e=>(0,R.jsx)(C().A,{...e,isSubpage:0!==n,store:t,hidePath:!0}),action:n=>{let{event:i}=n;const r=P().Vr(i);t instanceof p().Bv&&A().uK({environment:e,store:t,openInNew:r,visitType:W().ig.Link,pageVisitSource:w().y8.Breadcrumb})}})))}]}var I=()=>n(675811);const _=function(e){const{isMobile:t,stores:i}=e,s=(0,r().v3)(),o={display:"flex",alignItems:"center",flexShrink:0};return(0,R.jsx)(y().Ay,{popupType:t?y().z7.BottomSheet:y().z7.Popup,renderOrigin:e=>t?(0,R.jsxs)(b().A,{style:{...o},mobileFeedback:!0,...e,children:[(0,R.jsx)(I().f,{}),(0,R.jsx)("div",{style:{marginLeft:8,marginRight:8},children:"..."}),(0,R.jsx)(I().f,{})]}):(0,R.jsxs)("div",{style:o,children:[(0,R.jsx)(j().p,{size:"sm",...e,children:"..."}),(0,R.jsx)(I().f,{})]}),render:e=>{let r;return r=t?{menuType:k().gu.Modal,title:(0,R.jsx)(u().sA,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:(0,R.jsx)(n(45552).DoneMenuText,{}),onClickRight:e.close}:{menuType:k().gu.Popup,width:240},(0,R.jsx)(S().A,{...r,children:(0,R.jsx)(M().Ay,{type:M().Oh.Vertical,onAccept:e.close,initialFocus:void 0,sections:z(s,i)})})}})};var K=()=>n(20039);function T(e){const{store:t,showDivider:n,maxWidth:l,iconSize:a,titleStyle:c,iconStyle:d,highlighter:u,onClick:h}=e,g=(0,r().v3)(),{device:x}=g,m=(0,o().IS)((()=>({button:{display:"flex",minWidth:0,fontSize:"inherit",paddingTop:2,paddingBottom:2,paddingLeft:6,paddingRight:6}})),[]);return(0,s().K8)((()=>t.isDefined()),[t])?(0,R.jsxs)(i.Fragment,{children:[(0,R.jsx)(j().p,{style:m.button,size:"sm",shouldShrink:!0,mobileFeedback:x.isMobile,onClick:h,children:(0,R.jsx)(K().A,{store:t,maxWidth:l,iconSize:a,titleStyle:c,iconStyle:d,highlighter:u})}),n&&(0,R.jsx)(I().f,{})]},t.id):null}var D=()=>n(906719),N=()=>n(565049);function L(e){const{ancestorMaxWidth:t,isMobile:n,homeStore:o,store:l,maxAncestorCount:c}=e,b=(0,r().v3)(),j=(0,u().tz)(),y=(0,f().X)("workflow_container"),S=(0,s().K8)((()=>(0,v().zI)()>0),[]),M=(0,s().K8)((()=>{const e=x().g7(l),t=[];for(let n=e.length-1;n>=0;n--){const i=e[n];if(i instanceof p().Bv){if(i.id===l.id&&l.isNavigableBlock())continue;t.push(i)}else if(i instanceof p().h4)t.push(i);else if(i instanceof p().md&&y){const e=i.getParentStore();(null==e?void 0:e.table)===d().ev&&e.hasMultipleSourceCollections()&&t.push(i)}}return t.length>0&&t[0]instanceof p().h4&&!S?t.slice(1):t}),[l,y,S],{useDeepEqual:!0}),k=(0,s().K8)((()=>M.map((e=>(0,m().Qe)(e,j,b,!0)||(0,m().gG)(e,j)||""))),[b,j,M]);(0,i.useEffect)((()=>(g().setTabBreadcrumbs(k),()=>{g().setTabBreadcrumbs(void 0)})),[k]);const w=(0,s().K8)((()=>(0,a().Nh)(l.id)),[l]),A=(0,i.useCallback)(((e,n)=>e instanceof p().h4?(0,R.jsx)(N().A,{store:e,showDivider:n,maxWidth:t},e.id):e instanceof p().md?(0,R.jsx)(T,{store:e,showDivider:n,maxWidth:t},e.id):e instanceof p().Bv?(0,R.jsx)(D().A,{store:e,showDivider:n,maxWidth:t},e.id):void(0,h().HB)(e)),[t]);if(w&&void 0!==o)return A(o,M.length>0);if(M.length<=c)return(0,R.jsx)(R.Fragment,{children:M.map((e=>A(e,!0)))});const[C,B,P]=[M[0],M.slice(1,M.length-c+1),M.slice(M.length-c+1)];return(0,R.jsxs)(R.Fragment,{children:[A(C,!n),(0,R.jsx)(_,{isMobile:n,stores:n?M:B},"ellipses"),P.map((e=>A(e,!n)))]})}var O=()=>n(989423);var F=()=>n(898286),U=()=>n(478726),E=()=>n(836251),V=()=>n(347199),H=()=>n(953418),G=()=>n(712505);const J=function(e){const{ancestorMaxWidth:t,ignoreMaxLength:n,showDivider:i,store:r}=e,s=(0,o().IS)((()=>({wrapper:{display:"flex",alignItems:"center",flexShrink:1,marginLeft:6,minWidth:0,maxWidth:n?void 0:"100%"}})),[n]);return(0,R.jsxs)("div",{style:s.wrapper,children:[(0,R.jsx)(K().A,{store:r,maxWidth:t,ignoreMaxLength:n}),i&&(0,R.jsx)(I().f,{})]})};function q(e,t,n,i){return(0,s().K8)((()=>{const r=i.canEdit(),s=i.isNonEditableState(),o=i instanceof p().md?i:i.getCollectionStore(),l=null==o?void 0:o.isSyncedCollection(),c=i instanceof p().Bv&&i.isExternalObjectInstancePageBlockStore(),d=i instanceof p().Bv&&(0,U().fc)(i);return(0,a().Nh)(i.id)||t||(0,E().w6)(e)||G().default.isCenterPeekOpen()||!n||!r||s||c||l||d}),[e,t,n,i])}function Q(e,t,n,r){const s=q(e,t,n,r);return(0,i.useCallback)((()=>{if(r instanceof p().md)return;if(s)return;const t=G().default.isCenterPeekOpen()?V().A.PeekViewScroller:V().A.PageScroller;if(t){const n=t.getNode();if(n&&!H().Np(n))return H().VG({element:n,environment:e,options:{top:0,behavior:"smooth"}}),void function(e){O().vd(e,"click_breadcrumb_current_page_scroll_to_top")}(e)}const i=n.current;if(!i)return;if(!(i instanceof Element))return;const o=i.getBoundingClientRect();F().U({blockStore:r,originRect:o}),function(e){O().vd(e,"open_breadcrumb_current_page_menu")}(e)}),[s,e,n,r])}function X(e,t){const{currentPageMaxWidth:i,isMobile:o,currentPageRef:l,store:a}=e,c=(0,r().v3)(),d=q(c,o,l,a),u=(0,s().K8)((()=>a instanceof p().Bv&&a.isEmptyPage()),[a]),h=(0,s().K8)((()=>a.getIcon()),[a]),g=o?24:20,x=Q(c,o,l,a);return(0,R.jsxs)(j().p,{shouldShrink:!0,onClick:x,size:"sm",ref:t,disabled:d,children:[Boolean(h)&&(0,R.jsx)(n(614505).A,{disabled:!0,icon:h,isEmptyPage:u,size:g,style:{marginRight:6},largeIcon:!0}),(0,R.jsx)(n(16006).A,{store:a,style:{maxWidth:i},enableHover:!0})]})}const $=(0,i.forwardRef)(X);function Y(e){const{ancestorMaxWidth:t,isMobile:n,currentPageRef:i,store:o}=e,l=(0,r().v3)(),{mobileNative:c}=l,d=(0,s().K8)((()=>o instanceof p().Bv&&(0,a().lU)(o)),[o]),u=Q(l,n,i,o),h=(0,s().K8)((()=>{if(o instanceof p().Bv){const e=x().fU(o);return 0===(o.isNavigableBlock()?e.slice(1):[...e]).length}return!1}),[o]);return d?null:n?(0,R.jsx)(j().p,{shouldShrink:!0,onClick:u,size:"sm",style:null!=c&&c.supportsNativeHomeOnPhone()?{paddingLeft:0}:void 0,children:(0,R.jsx)(J,{store:o,showDivider:!1,ignoreMaxLength:h,ancestorMaxWidth:t})}):(0,R.jsx)(j().p,{shouldShrink:!0,onClick:u,size:"sm",style:{fontSize:"inherit"},children:(0,R.jsx)(J,{store:o,showDivider:!1,ancestorMaxWidth:t})})}function Z(e){const{ancestorMaxWidth:t,store:n}=e,o=(0,r().v3)(),l={display:"flex",alignItems:"center",flexShrink:0},a=(0,s().K8)((()=>{const e=x().fU(n);return e.reverse(),e}),[n]),c=(0,i.useCallback)((()=>{(0,O().u4)({environment:o,event:{eventName:"topbar_breadcrumb_menu_click",eventProperties:{has_parent_pages:a.length>1}}})}),[o,a]);return(0,R.jsx)(y().Ay,{popupType:y().z7.BottomSheet,bottomSheetInitialState:"half",onClick:c,renderOrigin:e=>(0,R.jsx)(b().A,{style:{...l,maxWidth:"100%"},mobileFeedback:!0,...e,children:(0,R.jsx)(J,{store:n,showDivider:!1,ignoreMaxLength:!0,ancestorMaxWidth:t})}),render:e=>(0,R.jsx)(S().A,{menuType:k().gu.Modal,title:(0,R.jsx)(u().sA,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),children:(0,R.jsx)(M().Ay,{type:M().Oh.Vertical,onAccept:e.close,initialFocus:void 0,sections:z(o,a)})})},"pages-popup")}n(898992),n(823215),n(737550);var ee=n(440961),te=()=>n(404085),ne=()=>n(471095),ie=()=>n(68263),re=()=>n(95313),se=()=>n(750660),oe=()=>n(859428),le=()=>n(962730);function ae(e){const{store:t}=e,n=(0,r().v3)(),l=(0,s().K8)((()=>{const{currentSpaceViewStore:e}=c().default.state,i=null==e?void 0:e.getPrivatePages(n);return null==i?void 0:i.some((e=>e.id===t.id))}),[n,t]),a=(0,s().K8)((()=>{const e=n.currentUser.id;return t.getPermissionItems().every((t=>(0,ie().B2)(t)&&e===t.user_id))}),[n,t]),d=(0,o().DP)(),h=(0,i.useRef)(null),g=(0,i.useCallback)((()=>{if(!h)return;const e=ee.findDOMNode(h.current);if(!(e&&e instanceof Element))return;const i=e.getBoundingClientRect(),r=new DOMRect(i.x,i.y,i.width,i.height+5);re().D3(n),se().ho({environment:n,blocks:[t],originRect:r,moveToContext:"topbar_breadcrumb"})}),[n,h,t]);return l&&a?(0,R.jsx)(oe().A,{placement:le().W.Right,renderTooltip:e=>(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{children:(0,R.jsx)(u().sA,{defaultMessage:"Only you have access",id:"breadcrumb.moveTo.hasPermission.title"})}),(0,R.jsx)("div",{style:{color:d.text.contrastSecondary},children:(0,R.jsx)(u().sA,{defaultMessage:"Click to move",id:"breadcrumb.moveTo.hasPermission.subtitle"})})]}),render:e=>(0,R.jsxs)(j().p,{size:"sm",disabled:!1,onClick:g,ref:h,...e,children:[(0,ne().i)({width:16,fill:d.lightIconColor}),(0,R.jsx)("span",{style:{color:d.lightTextColor,marginLeft:4,marginRight:5},children:(0,R.jsx)(u().sA,{defaultMessage:"Private",id:"breadcrumb.moveTo.privatePages"})}),(0,te().l)({width:11,fill:d.lightIconColor})]})}):null}const ce=function(e){const{ancestorMaxWidth:t,maxAncestorCount:d,currentPageMaxWidth:u,isMobile:h,showCurrentPageControls:g,store:x,style:m}=e,v=(0,i.useRef)(null),f=(0,r().v3)(),p=(0,o().IS)((()=>({container:{display:"flex",alignItems:"center",lineHeight:1.2,fontSize:h?l().J.UIRegular.mobile:l().J.UIRegular.desktop,...m},enforceMaxLength:{maxWidth:"100%"}})),[h,m]),b=(0,s().K8)((()=>{var e;return!(null===(e=x.getTitleStore())||void 0===e||!e.isReady())}),[x]),j=(0,s().K8)((()=>{const{currentSpaceViewStore:e}=c().default.state;let t;return e&&e.isReady()&&(t=(0,a().x$)(e)),t}),[]),y=(0,s().K8)((()=>!(0,a().lU)(x)&&g&&x.isReady()),[g,x]),S=(0,s().K8)((()=>{var e;return null===(e=f.mobileNative)||void 0===e?void 0:e.supportsNativeHomeOnPhone()}),[f]);return(0,s().K8)((()=>{var e;if(Boolean(f.currentUser.isLoggedIn()||f.publicDomainUserId))return!1;const t=n(578872).GN(x),i=f.RouterStore.state.route;return!(!(0,n(861017).bh)(i)||(null==t?void 0:t.id)!==x.id)||(null==t||null===(e=t.getSiteStore())||void 0===e||null===(e=e.getHeader())||void 0===e?void 0:e.hideBreadcrumbs)}),[f,x])?null:b?S?(0,R.jsx)("div",{style:{...p.container,...p.enforceMaxLength},className:"notranslate",children:(0,R.jsx)(Z,{store:x,ancestorMaxWidth:t})}):(0,R.jsxs)("div",{style:p.container,className:"notranslate shadow-cursor-breadcrumb",children:[(0,R.jsx)(L,{ancestorMaxWidth:t,maxAncestorCount:d,isMobile:h,homeStore:j,store:x}),y?(0,R.jsx)($,{currentPageMaxWidth:u,isMobile:h,currentPageRef:v,ref:v,store:x}):(0,R.jsx)(Y,{ancestorMaxWidth:t,isMobile:h,currentPageRef:v,store:x}),(0,R.jsx)(ae,{store:x})]}):null}}}]);