"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[9647],{8178:(e,t,i)=>{i.d(t,{A:()=>o});i(296540);var n=i(474848);const o=function(e){const{divider:t,large:o,block:a,children:s,hasMarginTop:r,small:l,style:c,smallMarginBottom:d,isCritical:u,fontSize:p,fontWeight:g}=e,h=(0,i(401497).DP)(),m="full"===t;return(0,i(722872).Tf)()?(0,n.jsx)(i(554509).D,{styleName:"iOS/Title-3/Semibold",colorName:e.isCritical?"uiRedPrimary":"primary",style:{marginTop:r?16:0,paddingBottom:m?12:0},children:s}):(0,n.jsx)("div",{style:{borderBottom:m?`1px solid ${h.regularDividerColor}`:0,marginBottom:m?16:d?2:8,marginTop:r?16:0,paddingBottom:m?12:0,fontSize:p??m?16:o?14:l?12:14,fontWeight:g??m?i(284371).Wy.medium:400,width:a?"100%":"auto",color:u?i(100622).Ay.red:h.regularTextColor,...c},children:s})}},113507:(e,t,i)=>{i.d(t,{A:()=>n});const n=new(i(463830).A)},154585:(e,t,i)=>{i.d(t,{B:()=>A});i(898992),i(354520),i(581454),i(296540);var n=()=>i(56366),o=()=>i(401497),a=()=>i(849974),s=()=>i(846899),r=()=>i(413267),l=()=>i(959013),c=()=>i(284371),d=()=>i(576590),u=()=>i(760217),p=()=>i(928600),g=()=>i(939740),h=()=>i(89924),m=()=>i(21140),v=()=>i(722872),f=()=>i(176983),b=()=>i(99254),x=i(474848);function A(e){const{parent:t,from:i}=e,A=(0,o().IS)((e=>({icon:{width:16,height:16},bannerLikeIcon:{width:16,height:16,fill:e.blueColor,alignSelf:"flex-start",marginBottom:48,marginRight:4},caption:{color:e.lightTextColor,fontSize:c().J.UISmall.desktop,textWrap:"wrap"},bannerLikeCaption:{display:"flex",alignItems:"top",justifyContent:"center",color:e.lightTextColor,whiteSpace:"normal",fontSize:c().J.UISmall.desktop},option:{paddingTop:4,paddingBottom:4},optionLabel:{fontSize:14,marginBottom:2},bannerLikeLabel:{fontSize:14,marginBottom:2,whiteSpace:"normal"},disabledOptionLabel:{color:e.lightTextColor,fontSize:14,marginBottom:2}})),[]),y=(0,f().J)(),C=(0,n().K8)((()=>b().y.state.jiraSyncState),[]),w=(0,n().K8)((()=>b().y.state.analyticsFrom),[]),S="completed"===C,j=[{key:"jira-connection-section",render:e=>(0,x.jsx)(h().A,{...e}),items:[{key:"jira-ingestion-status-connecting",label:(0,x.jsx)(l().sA,{id:"assistantOverflowMenu.jiraIngestion.connecting",defaultMessage:"Connecting"}),caption:(0,x.jsx)(l().sA,{id:"assistantOverflowMenu.jiraIngestion.subtext",defaultMessage:"Your workspace owner is connecting Jira. This can take up to 36 hours"}),iconElement:(0,x.jsx)(x.Fragment,{children:(0,a().y)(A.bannerLikeIcon)}),disabled:!0,hidden:!("in_progress"===C||"editing"===C),action:()=>{}},{key:"jira-ingestion-status-connected",label:(0,x.jsx)(l().sA,{id:"assistantOverflowMenu.jiraIngestion.connected",defaultMessage:"Connected"}),caption:(0,x.jsx)(l().sA,{id:"assistantOverflowMenu.jiraIngestion.connected.subtext",defaultMessage:"Connected by workspace owner"}),icon:r().b,disabled:!0,hidden:!S,action:()=>{}},{key:"jira-ingestion-disconnect",label:(0,x.jsx)(l().sA,{id:"assistantOverflowMenu.jiraIngestion.disconnect",defaultMessage:"Disconnecting..."}),caption:(0,x.jsx)(l().sA,{id:"assistantOverflowMenu.jiraIngestion.disconnecting.subtext",defaultMessage:"Your workspace owner has disconnected Jira. This can take up to 3 hours."}),iconElement:(0,x.jsx)(x.Fragment,{children:(0,a().y)(A.bannerLikeIcon)}),disabled:!0,hidden:"disconnecting"!==C,action:()=>{}},{key:"jira-ingestion-settings",label:(0,x.jsx)(l().sA,{id:"assistantOverflowMenu.jiraIngestion.settings",defaultMessage:"Settings"}),icon:s().B,disabled:!1,hidden:"completed"!==C||!y,action:()=>{null==t||t.close(),(0,d().navigateToJiraUniversalScreen)({screenToShow:"settings_screen",analyticsFrom:i||w||"chat_menu"})}}].filter((e=>!e.hidden)).map((e=>{const{key:t,label:i,caption:n,icon:o,iconElement:a,disabled:s,action:r,labelStyleOverride:l,captionStyleOverride:c,iconStyleOverride:d}=e,p=o?o({width:12,height:12}):a;return{key:t,action:()=>r(),render:e=>(0,x.jsx)(u().A,{...e,disabled:s,title:(0,x.jsx)(m().Ye,{children:(0,x.jsxs)("div",{style:A.option,children:[(0,x.jsx)("div",{style:l??(s?A.disabledOptionLabel:A.optionLabel),children:i}),n&&(0,x.jsx)("div",{style:c??A.caption,children:n})]})}),left:p,leftStyle:d})}}))}];return(0,x.jsx)(p().A,{menuType:v().gu.Popup,minWidth:230,children:(0,x.jsx)(g().Ay,{type:g().Oh.Vertical,sections:j,initialFocus:void 0})})}},163580:(e,t,i)=>{i.d(t,{VT:()=>r,b0:()=>l,gz:()=>c});i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(898992),i(354520),i(581454);var n=()=>i(799288),o=()=>i(332393),a=()=>i(351360),s=()=>i(630116);function r(e,t){const i=t.getAlive(),o=(0,n().hu)(t),a=!l(t),s=l(t),r=Boolean(e.currentUser.id===t.getParentId());return i&&o&&(s&&r||a)}function l(e){if(!e.getAlive||!(0,n().hu)(e))return!1;const{currentUserRootStore:t}=a().default.state,i=e.getIntegrationId();if(!t||!i)return!1;const r=(0,s().Oo)(t,{id:i,table:o().Li}).getKeyStore("type").getValue();return!e.isInternalBot(r?{type:r}:void 0)}function c(e){const{externalIntegrationStoreState:t,integrationId:i}=e;if(!t.loaded)return;const o=t.externalAuthentications.map((e=>{let{parent_id:t}=e;return t})),a=new Set(o),s=t.bots.filter((e=>e.alive&&a.has(e.id)&&(0,n().Sd)(e)&&e.integration_id===i));return s.length?s[0]:void 0}},188799:(e,t,i)=>{i.d(t,{b:()=>o});i(296540);var n=i(474848);const o=(0,i(340498).wt)("taskList",{viewBox:"0 0 18 17",svg:(0,n.jsx)("path",{d:"M3.48438 7.29688C5.35938 7.29688 6.92188 5.73438 6.92188 3.85938C6.92188 1.96875 5.35938 0.40625 3.48438 0.40625C1.59375 0.40625 0.0390625 1.96875 0.0390625 3.85938C0.0390625 5.73438 1.60156 7.29688 3.48438 7.29688ZM3.07031 5.70312C2.89844 5.70312 2.77344 5.61719 2.65625 5.47656L1.78125 4.42969C1.69531 4.32812 1.66406 4.23438 1.66406 4.10156C1.66406 3.85938 1.85156 3.67188 2.08594 3.67188C2.24219 3.67188 2.35156 3.73438 2.45312 3.875L3.05469 4.625L4.44531 2.39062C4.54688 2.23438 4.67969 2.15625 4.83594 2.15625C5.07031 2.15625 5.26562 2.33594 5.26562 2.55469C5.26562 2.66406 5.24219 2.76562 5.16406 2.88281L3.5 5.46875C3.39844 5.61719 3.25 5.70312 3.07031 5.70312ZM9.39844 4.54688H17.2578C17.6406 4.54688 17.9531 4.24219 17.9531 3.85938C17.9531 3.47656 17.6406 3.17188 17.2578 3.17188H9.39844C9.01562 3.17188 8.71875 3.47656 8.71875 3.85938C8.71875 4.24219 9.01562 4.54688 9.39844 4.54688ZM3.48438 16.3281C5.35938 16.3281 6.92188 14.7656 6.92188 12.8828C6.92188 10.9922 5.35938 9.4375 3.48438 9.4375C1.59375 9.4375 0.0390625 11 0.0390625 12.8828C0.0390625 14.7656 1.60156 16.3281 3.48438 16.3281ZM3.48438 15C2.32812 15 1.36719 14.0312 1.36719 12.8828C1.36719 11.7344 2.33594 10.7578 3.48438 10.7578C4.625 10.7578 5.60156 11.7344 5.60156 12.8828C5.60156 14.0312 4.625 15 3.48438 15ZM9.39844 13.5859H17.2578C17.6406 13.5859 17.9531 13.2812 17.9531 12.8984C17.9531 12.5156 17.6406 12.2109 17.2578 12.2109H9.39844C9.01562 12.2109 8.71875 12.5156 8.71875 12.8984C8.71875 13.2812 9.01562 13.5859 9.39844 13.5859Z"})})},192591:(e,t,i)=>{i.d(t,{P:()=>f,_:()=>b});var n=()=>i(861017),o=()=>i(939768),a=()=>i(559926),s=()=>i(901389),r=()=>i(780054),l=()=>i(725951),c=()=>i(313961),d=()=>i(404141),u=()=>i(250933),p=()=>i(449506),g=()=>i(705540),h=()=>i(496414),m=()=>i(957416);const v=(0,i(959013).YK)({authenticatingWithTrello:{id:"trelloActions.authenticatingWithTrello.loadingMessage",defaultMessage:"Authenticating with Trelloâ€¦"},titleMessage:{defaultMessage:"Trello login",id:"trelloActions.loginPopupModal.title"}});async function f(e){const{environment:t,requestStore:i}=e,u=(0,l().LX)(t);let f=(0,n().bQ)(r().A.domainBaseUrl,{authType:u,userId:t.currentUser.id,isElectronDevice:t.device.isElectron});if(f=u.redirectToAuth?f:await(0,l().YN)(t,f),t.device.isElectron)return void g().openExternalUrl(f);const x=await m().P(t,{width:580,height:700,url:f,titleMessage:v.titleMessage});if(!x)return;const A=o().qg(x),y=A.query.oauth_token,C=A.query.oauth_verifier;if(!y||!C)return;h().m({message:v.authenticatingWithTrello});const w=await p().callApi({eventName:"authWithTrello",environment:t,data:{requestToken:y,verifier:C}});"failed"===w.type?(a()._$(t,{import_source:"trello",data:{import_type:"api",status:"failure",error:w.error,userId:t.currentUser.id}}),console.error(w.error),s().Qg(w),h().V()):(a()._$(t,{import_source:"trello",data:{import_type:"api",status:"success",userId:t.currentUser.id}}),a().mu(t,{integration_name:"trello"}),await i.refresh(),c().A.setState({open:!0}),d().A.setState({...d().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),await b(t,i),h().V())}async function b(e,t){u().A.setState({...u().A.state,isFetchingBoards:!0,showLoader:!0});const i=await p().callApi({eventName:"getTrelloBoards",environment:e,data:{}});return await t.refresh(),"success"===i.type?(u().A.setState({...u().A.state,boardsResponse:i.data,isFetchingBoards:!1,showLoader:!1}),i.data):(console.error(i.error),{boards:[]})}},197534:(e,t,i)=>{i.d(t,{Q:()=>o});i(296540);var n=i(474848);const o=(0,i(340498).wt)("settingsMembersFilled",{viewBox:"0 0 20 13",svg:(0,n.jsx)("path",{d:"M13.582 6.00293C15.0723 6.00293 16.3369 4.67676 16.3369 2.96094C16.3369 1.28613 15.0654 0.0078125 13.582 0.0078125C12.0986 0.0078125 10.8203 1.30664 10.8271 2.97461C10.8271 4.67676 12.0918 6.00293 13.582 6.00293ZM5.67969 6.16016C6.97852 6.16016 8.0791 4.99805 8.0791 3.50781C8.0791 2.04492 6.97168 0.9375 5.67969 0.9375C4.3877 0.9375 3.27344 2.06543 3.28027 3.52148C3.28027 4.99805 4.38086 6.16016 5.67969 6.16016ZM1.91309 12.3604H7.0332C6.30859 11.3145 7.1084 9.25 8.64648 8.04688C7.89453 7.55469 6.91016 7.19922 5.67969 7.19922C2.62402 7.19922 0.648438 9.44824 0.648438 11.3076C0.648438 11.9775 0.990234 12.3604 1.91309 12.3604ZM9.31641 12.3604H17.8408C18.9619 12.3604 19.3516 12.0186 19.3516 11.3965C19.3516 9.63281 17.123 7.21289 13.5752 7.21289C10.0342 7.21289 7.80566 9.63281 7.80566 11.3965C7.80566 12.0186 8.19531 12.3604 9.31641 12.3604Z"})})},245464:(e,t,i)=>{i.d(t,{A:()=>v});var n=i(296540),o=()=>i(484714),a=()=>i(56366),s=()=>i(959013),r=()=>i(284371),l=()=>i(317909),c=()=>i(864943),d=()=>i(21140),u=()=>i(989423),p=()=>i(291075),g=()=>i(351360),h=i(474848);const m=(0,s().YK)({githubAIConnectorOauthPopupTitle:{id:"githubAIConnector.oauthPopup.title",defaultMessage:"GitHub Authentication"},mobileNotAvailable:{id:"githubAIConnector.mobileNotAvailable",defaultMessage:"Not available on mobile"}});const v=function(e){var t;let{showDismiss:v,parent:f,minimizePopup:b,setHiddenNotifications:x}=e;const[A,y]=(0,n.useState)(!1),C=(0,a().K8)((()=>p().o.state),[]),w=(0,a().K8)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),S=(0,o().v3)(),j=(0,a().K8)((()=>g().default.state.currentUserSettingsStore),[]),{isMobile:I}=(0,o().Y0)(),k=(0,a().K8)((()=>g().default.state.currentSpaceViewStore),[]),_=(0,n.useCallback)((()=>{j&&k&&l().createAndCommit({userAction:"githubAIConnector.onboarding.dismissPersonalAuthPrompt",environment:S,canUndo:!0,perform:e=>{l().applyOperation({store:k,operation:{pointer:k.pointer,path:["settings"],command:"update",args:{...k.getSettings(),dismissed_github_personal_auth_prompt:!0}},transaction:e})}})}),[j,k,S]),M=(0,n.useCallback)((()=>{(0,u().u4)({environment:S,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"user_auth_dismiss",integration_type:"github",setup_session_id:p().o.state.sessionId,from:"connect_nudge"}}}),p().o.setState({...C,forceShowGithubAuthNotificationTriggeredAt:void 0}),_()}),[_,S,C]),N=v?"connect_nudge":"chat_menu";(0,i(852507).l)((()=>{(0,u().u4)({environment:S,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"show_github_personal_auth_prompt",integration_type:"github",setup_session_id:p().o.state.sessionId,from:N}}})}));const P=(0,i(401497).IS)((e=>({actionRequiredPopupIconStyle:{width:I?18:16,height:I?18:16,fill:e.icon.orangePrimary},connectionStatusHeader:{fontSize:I?r().J.UIRegular.mobile:r().J.UIRegular.desktop,fontWeight:r().Wy.regular,lineHeight:I?r().K_.UIRegular.mobile:r().K_.UIRegular.desktop,textAlign:"left"},connectionStatusCaption:{fontSize:I?r().J.UISmall.mobile:r().J.UISmall.desktop,fontWeight:r().Wy.regular,lineHeight:I?r().K_.UISmall.mobile:r().K_.UISmall.desktop,color:e.text.secondary,textAlign:"left"},actionButton:{fontSize:I?r().J.UIRegular.mobile:r().J.UIRegular.desktop,fontWeight:r().Wy.medium,lineHeight:I?r().K_.UIRegular.mobile:r().K_.UIRegular.desktop,display:"flex",alignItems:"center",maxWidth:97,maxHeight:28,borderRadius:6,gap:3,border:"dark"===e.mode?`1px solid ${e.accentColors.gray[700]}`:`1px solid ${e.accentColors.gray[200]}`,marginTop:6},popupBlock:{paddingBottom:3},iconDivStyles:{paddingTop:1}})),[I]);return(0,h.jsxs)(d().Ye,{gap:8,style:P.popupBlock,children:[(0,h.jsx)("div",{style:P.iconDivStyles,children:(0,i(750559).f)(P.actionRequiredPopupIconStyle)}),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{style:P.connectionStatusHeader,children:(0,h.jsx)(s().sA,{id:"assistantChat.ingestion.githubConnectionStatusActionRequiredForLogin",defaultMessage:"Log in to GitHub"})}),(0,h.jsx)("div",{style:P.connectionStatusCaption,children:(0,h.jsx)(s().sA,{id:"assistantChat.ingestion.githubConnectionStatusActionRequiredForLoginDescription",defaultMessage:"Authenticate to get answers from repositories in {githubOrgName}",values:{githubOrgName:null===(t=C.githubOrg)||void 0===t?void 0:t.name}})}),(0,h.jsxs)(d().Ye,{gap:8,children:[I?(0,h.jsx)("div",{style:P.connectionStatusCaption,children:(0,h.jsx)(s().sA,{...m.mobileNotAvailable})}):(0,h.jsx)(c().A,{size:"lg",style:P.actionButton,disabled:A,onClick:async()=>{if(!w)return;const e=Boolean(C.forceShowGithubAuthNotificationTriggeredAt);p().o.setState({...C,analyticsFrom:N,forceShowGithubAuthNotificationTriggeredAt:void 0}),(0,u().u4)({environment:S,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"user_auth_connect",integration_type:"github",setup_session_id:p().o.state.sessionId,from:e?"connect_nudge_from_find_in":N}}}),e||null==x||x((e=>[...e,"github_user_mapping"])),y(!0);const t=await i(449506).callApi({eventName:"getGithubUserAuthUrl",environment:S,data:{spaceId:w,isDesktop:S.device.isElectron,sessionId:p().o.state.sessionId}});"success"===t.type&&(S.device.isElectron?i(705540).openExternalUrl(t.data.url):i(957416).P(S,{width:800,height:600,url:t.data.url,titleMessage:m.githubAIConnectorOauthPopupTitle}),null==f||f.close(),null==b||b()),y(!1)},children:(0,h.jsx)(s().sA,{id:"assistantChat.ingestion.ctaForGithubPersonalAuth",defaultMessage:"Log in"})}),v?(0,h.jsx)(c().A,{size:"lg",style:P.actionButton,onClick:M,children:(0,h.jsx)(s().sA,{id:"assistantChat.ingestion.dimissGithubAuthNotification",defaultMessage:"Dismiss"})}):(0,h.jsx)(h.Fragment,{})]})]})]})}},250933:(e,t,i)=>{i.d(t,{A:()=>o});class n extends(()=>i(757695))().default{getInitialState(){return{boardsResponse:{boards:[]},isFetchingBoards:!0,showLoader:!1}}}const o=new n},313961:(e,t,i)=>{i.d(t,{A:()=>n});const n=new(i(463830).A)},320865:(e,t,i)=>{i.d(t,{A:()=>o});i(296540);var n=i(474848);const o=function(){return(0,n.jsx)(i(678553).A,{title:(0,n.jsx)(i(331542).A,{})})}},324009:(e,t,i)=>{i.d(t,{J:()=>b,p:()=>x});var n=()=>i(861017),o=()=>i(939768),a=()=>i(559926),s=()=>i(901389),r=()=>i(780054),l=()=>i(725951),c=()=>i(372555),d=()=>i(113507),u=()=>i(522094),p=()=>i(404141),g=()=>i(449506),h=()=>i(705540),m=()=>i(496414),v=()=>i(957416);const f=(0,i(959013).YK)({authenticatingWithEvernote:{id:"evernoteActions.authenticatingWithEvernote.loadingMessage",defaultMessage:"Authenticating with Evernoteâ€¦"},titleMessage:{defaultMessage:"Evernote login",id:"evernoteActions.loginPopupModal.title"}});async function b(e){const{environment:t,requestStore:i}=e,b=(0,l().LX)(t);let A=(0,n().TD)(r().A.domainBaseUrl,{authType:b,userId:t.currentUser.id,isElectronDevice:t.device.isElectron});if(A=b.redirectToAuth?A:await(0,l().YN)(t,A),t.device.isElectron)return m().m({message:f.authenticatingWithEvernote}),c().A.setState({...c().A.state,linkingAccount:!0,showLoader:!0}),void h().openExternalUrl(A);const y=await v().P(t,{width:580,height:700,url:A,titleMessage:f.titleMessage});if(!y)return;const C=o().qg(y),w=C.query.oauth_token,S=C.query.oauth_verifier;if(!w||!S)return;m().m({message:f.authenticatingWithEvernote});const j=await g().callApi({eventName:"authWithEvernote",environment:t,data:{requestToken:w,verifier:S}}),I=u().A.getOrCreateFlowId();if("failed"===j.type)return a()._$(t,{import_source:"evernote",data:{import_type:"api",status:"failure",error:j.error,userId:t.currentUser.id},flowId:I}),console.error(j.error),s().Qg(j),void m().V();a()._$(t,{import_source:"evernote",data:{import_type:"api",status:"success",userId:t.currentUser.id},flowId:I}),a().mu(t,{integration_name:"evernote"}),await i.refresh(),d().A.setState({open:!0}),p().A.setState({...p().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),await x({environment:t,requestStore:i}),m().V()}async function x(e){const{environment:t,requestStore:i}=e;try{c().A.setState({...c().A.state,isFetchingNotebooks:!0,showLoader:!0});const e=await g().callApi({eventName:"getEvernoteNotebooks",environment:t,data:{}});if(await i.refresh(),"success"===e.type){c().A.setState({...c().A.state,notebooksResponse:e.data,isFetchingNotebooks:!1,showLoader:!1});const{userInfo:t,notebooks:i}=e.data;return{userInfo:t,notebooks:i}}return console.error(e.error),{notebooks:[],userInfo:void 0}}catch(n){return console.error(n),{notebooks:[],userInfo:void 0}}}},372555:(e,t,i)=>{i.d(t,{A:()=>o});class n extends(()=>i(757695))().default{getInitialState(){return{notebooksResponse:{notebooks:[]},isFetchingNotebooks:!0,showLoader:!1,linkingAccount:!1}}}const o=new n},377955:(e,t,i)=>{i.d(t,{A:()=>S});i(898992),i(354520),i(581454);var n=i(296540),o=()=>i(484714),a=()=>i(852507),s=()=>i(56366),r=()=>i(401497),l=()=>i(849974),c=()=>i(846899),d=()=>i(413267),u=()=>i(959013),p=()=>i(576590),g=()=>i(760217),h=()=>i(331542),m=()=>i(928600),v=()=>i(939740),f=()=>i(89924),b=()=>i(21140),x=()=>i(722872),A=()=>i(176983),y=()=>i(351360),C=()=>i(756315),w=i(474848);function S(e){const{parent:t,callGetStatusAPI:i,from:S}=e,j=!!i,[I,k]=n.useState(j),_=(0,r().IS)((e=>({icon:{width:16,height:16},bannerLikeIcon:{width:16,height:16,fill:e.blueColor,alignSelf:"flex-start",marginTop:12,marginRight:4},caption:{color:e.lightTextColor,fontSize:12,textWrap:"wrap"},bannerLikeCaption:{display:"flex",alignItems:"top",justifyContent:"center",color:e.lightTextColor,whiteSpace:"normal",fontSize:12},option:{paddingTop:4,paddingBottom:4},optionLabel:{fontSize:14,marginBottom:2},bannerLikeLabel:{fontSize:14,marginBottom:2,whiteSpace:"normal"},disabledOptionLabel:{color:e.lightTextColor,fontSize:14,marginBottom:2}})),[]),M=(0,A().J)(),N=(0,s().K8)((()=>C().d.state.isDisconnecting),[]),P=(0,s().K8)((()=>C().d.state.isEditing),[]),z=(0,s().K8)((()=>C().d.state.initialSyncState),[]),T=(0,s().K8)((()=>y().default.state.currentSpaceStore),[]),L=(0,s().K8)((()=>C().d.state.analyticsFrom),[]),B=(0,o().v3)();if((0,a().l)((async()=>{T&&j&&(k(!0),await(0,p().updateGoogleDriveQnAConnectionState)({environment:B,spaceId:T.getSpaceId()}),k(!1))})),I)return(0,w.jsx)(b().Ye,{style:{width:200,height:50,justifyContent:"center",alignItems:"center"},children:(0,w.jsx)(h().A,{})});const O="in_progress"===z||P,V="completed"===z,W=[{key:"google-connection-section",render:e=>(0,w.jsx)(f().A,{...e}),items:[{key:"google-drive-ingestion-status-connecting",label:(0,w.jsx)(u().sA,{id:"assistantOverflowMenu.googleIngestion.connecting",defaultMessage:"Connecting"}),caption:(0,w.jsx)(u().sA,{id:"assistantOverflowMenu.googleIngestion.subtext",defaultMessage:"This can take up to 36 hours"}),disabled:!0,hidden:!O||N,action:()=>{}},{key:"google-drive-ingestion-status-connected",label:(0,w.jsx)(u().sA,{id:"assistantOverflowMenu.googleIngestion.connected",defaultMessage:"Connected"}),caption:(0,w.jsx)(u().sA,{id:"assistantOverflowMenu.googleIngestion.connected.subtext",defaultMessage:"Connected by workspace owner"}),icon:d().b,disabled:!0,hidden:!V||N,action:()=>{}},{key:"google-drive-ingestion-status-disconnecting",label:(0,w.jsx)(u().sA,{id:"assistantOverflowMenu.googleIngestion.disconnecting",defaultMessage:"Google Drive is disconnecting from Notion"}),caption:(0,w.jsx)(u().sA,{id:"assistantOverflowMenu.googleIngestion.disconnecting.subtext",defaultMessage:"Your workspace owner has disconnected Google Drive. This can take up to 3 hours."}),disabled:!0,hidden:!N,iconElement:(0,w.jsx)(w.Fragment,{children:(0,l().y)(_.bannerLikeIcon)}),action:()=>{},labelStyleOverride:_.bannerLikeLabel,captionStyleOverride:_.bannerLikeCaption},{key:"google-drive-ingestion-settings",label:(0,w.jsx)(u().sA,{id:"assistantOverflowMenu.googleIngestion.settings",defaultMessage:"Settings"}),icon:c().B,disabled:N,hidden:O||N||!M,action:()=>{null==t||t.close(),(0,p().navigateToGoogleDriveUniversalScreen)({screenToShow:"settings_screen",analyticsFrom:S||L||"chat_menu"})}}].filter((e=>!e.hidden)).map((e=>{const{key:t,label:i,caption:n,icon:o,iconElement:a,disabled:s,action:r,labelStyleOverride:l,captionStyleOverride:c,iconStyleOverride:d}=e,u=o?o({width:12,height:12}):a;return{key:t,action:()=>{r()},render:e=>(0,w.jsx)(g().A,{...e,title:(0,w.jsx)(b().Ye,{children:(0,w.jsxs)("div",{style:_.option,children:[(0,w.jsx)("div",{style:l??(s?_.disabledOptionLabel:_.optionLabel),children:i}),n&&(0,w.jsx)("div",{style:c??_.caption,children:n})]})}),left:u,leftStyle:d,disabled:s})}}))}];return(0,w.jsx)(m().A,{menuType:x().gu.Popup,minWidth:230,children:(0,w.jsx)(v().Ay,{type:v().Oh.Vertical,sections:W,initialFocus:void 0})})}},522094:(e,t,i)=>{i.d(t,{A:()=>o});class n extends(()=>i(757695))().default{getInitialState(){return{flowId:void 0}}getOrCreateFlowId(){const e=this.state.flowId||i(206267).JW();return this.state.flowId&&this.setState({flowId:e}),e}}const o=new n},528039:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Le});i(898992),i(354520),i(803949),i(581454);var n=i(296540),o=()=>i(484714),a=()=>i(56366),s=()=>i(401497),r=()=>i(725252),l=()=>i(757695),c=()=>i(799288),d=()=>i(187174),u=()=>i(59326),p=()=>i(824862),g=()=>i(332393),h=()=>i(798880),m=()=>i(322769),v=()=>i(20498),f=()=>i(100622),b=()=>i(498212),x=()=>i(534177),A=()=>i(284371),y=()=>i(939768),C=()=>i(908928),w=()=>i(755636),S=()=>i(426116),j=()=>i(725951),I=()=>i(437622),k=()=>i(320460),_=()=>i(351360),M=()=>i(630116),N=()=>i(555267),P=()=>i(750559),z=()=>i(406018),T=()=>i(959013),L=()=>i(816074),B=()=>i(864943),O=()=>i(204063),V=()=>i(719147),W=i(474848);function H(e){const{integrationValue:t,oauthParams:i}=e,n=(0,o().v3)(),{oauthErrorType:a,title:r,body:l,primaryAction:c}=function(e){const t=(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.genericError.title",defaultMessage:"Something went wrong"});if("invalidClientId"===e.type)return{oauthErrorType:z().l.invalid_request,title:t,body:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.invalidClientId.body",defaultMessage:"Missing or incomplete Client ID. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,W.jsx)(V().A,{href:"https://developers.notion.com/#handling-errors",children:e})}})};if("clientNotFound"===e.type)return{oauthErrorType:z().l.invalid_request,title:t,body:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.clientNotFound.body",defaultMessage:"Missing or incomplete Client ID. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,W.jsx)(V().A,{href:"https://developers.notion.com/#handling-errors",children:e})}})};if("invalidResponseType"===e.type)return{oauthErrorType:z().l.invalid_request,title:t,body:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.invalidResponseType",defaultMessage:"Missing or invalid response_type. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,W.jsx)(V().A,{href:"https://developers.notion.com/#handling-errors",children:e})}})};if("integrationAlreadyInstalled"===e.type)return{oauthErrorType:z().l.access_denied,title:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.integrationAlreadyInstalled.title",defaultMessage:"This integration has already been added to {workspaceName}",values:{workspaceName:e.spaceName}}),body:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.integrationAlreadyInstalled.body",defaultMessage:"You can review and remove added integrations in Settings."}),primaryAction:{onClick:e.primaryAction,title:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.integrationAlreadyInstalled.openWorkspaceSettingsButton.label",defaultMessage:"Open Settings"})}};if("notAnAdmin"===e.type)return{oauthErrorType:z().l.access_denied,title:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.notAnAdmin.title",defaultMessage:"As a guest, you can't install this integration to {workspaceName}.",values:{workspaceName:e.spaceName}}),body:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.notAnAdmin.body",defaultMessage:"You can ask a workspace owner to install the integration, or ask to be upgraded as a member."}),primaryAction:{onClick:e.primaryAction,title:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.notAnAdmin.switchWorkspaceButton.label",defaultMessage:"Switch workspace"})}};if("integrationNotApproved"===e.type)return{oauthErrorType:z().l.access_denied,title:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.integrationNotApproved.title",defaultMessage:"As a member, you can't install this integration to {workspaceName}",values:{workspaceName:e.spaceName}}),body:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.integrationNotApproved.body",defaultMessage:"You can ask a workspace owner to install the integration for you."}),primaryAction:{onClick:e.primaryAction,title:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.notAnAdmin.switchWorkspaceButton.label",defaultMessage:"Switch workspace"})}};if("invalidRedirectUri"===e.type)return{oauthErrorType:z().l.invalid_request,title:t,body:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.invalidRedirectUri.body",defaultMessage:"Missing or invalid redirect_uri. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,W.jsx)(V().A,{href:"https://developers.notion.com/#handling-errors",children:e})}})};(0,x().HB)(e.type)}(e),d=function(){const{isMobile:e}=(0,o().Y0)(),t=e?25:48,i=e?18:20;return(0,s().IS)((()=>({container:{textAlign:"center",flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},icon:{fill:f().Ay.red,width:t,height:t,marginBottom:20,display:"inline-block"},title:{fontSize:i,margin:"0 50px 32px",textAlign:"center",fontWeight:A().Wy.medium,marginBottom:12},body:{marginTop:0,marginBottom:24,width:"80%"}})),[t,i])}();return(0,W.jsxs)("section",{style:d.container,children:[(0,P().f)(d.icon),(0,W.jsx)("header",{style:d.title,children:r}),(0,W.jsx)("p",{style:d.body,children:l}),c&&(0,W.jsx)("div",{style:d.body,children:(0,W.jsx)(O().A,{size:"lg",onClick:c.onClick,children:c.title})}),(0,W.jsx)(B().A,{size:"lg",onClick:()=>{L().D({environment:n,integration:t,errorType:a,params:i})},children:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.cancelButton.label",defaultMessage:"Cancel"})})]})}var U=()=>i(584262),R=()=>i(792071),E=()=>i(433847),K=()=>i(763824),F=()=>i(559926),D=()=>i(901389),Y=()=>i(510683),q=()=>i(496414),G=()=>i(857783),Z=()=>i(435009),J=()=>i(163580),$=()=>i(972435),Q=()=>i(53137),X=()=>i(614505),ee=()=>i(340498);const te=(0,ee().wt)("pageAdd",{viewBox:"0 0 16 17",svg:(0,W.jsx)("path",{d:"M4.135 8.707c2.46 0 4.491 2.023 4.491 4.484 0 .828-.232 1.607-.636 2.277h5.647c1.463 0 2.221-.773 2.221-2.242V7.107h-5.113c-.854 0-1.265-.417-1.265-1.271V.668H6.356c-1.462 0-2.221.772-2.221 2.242v5.797zm6.733-2.598h4.915c-.04-.307-.266-.601-.615-.963l-3.74-3.794c-.334-.342-.642-.575-.956-.616V5.72c0 .26.136.39.396.39zM4.135 16.712c1.914 0 3.52-1.593 3.52-3.52 0-1.928-1.593-3.514-3.52-3.514-1.928 0-3.52 1.592-3.52 3.513a3.537 3.537 0 003.52 3.52zm0-1.285a.441.441 0 01-.465-.465v-1.299h-1.3a.441.441 0 01-.465-.465c0-.287.192-.471.465-.471h1.3v-1.292c0-.274.184-.465.465-.465.28 0 .465.184.465.465v1.292h1.298c.28 0 .465.184.465.471 0 .28-.184.465-.465.465H4.6v1.299a.441.441 0 01-.465.465z"})});var ie=()=>i(188799),ne=()=>i(731320),oe=()=>i(885475);function ae(e){const{integrationValue:t,validIntegrationTemplateId:i,botAccessOption:o,setBotAccessOption:a}=e,[{value:r}]=(0,d().Yb)((async()=>!!i&&await(0,ne().zQ)(i)),[i]);n.useEffect((()=>{a(r?"duplicate_template":"pick_pages")}),[r,a]);const l=(0,s().IS)((()=>({container:{display:"grid",gridTemplateRows:"1fr 1fr",gap:8,marginTop:8},icon:{fill:f().Ay.red,width:20,height:20,marginRight:12},errorContainer:{display:"flex",alignItems:"center"}})),[]);return(0,W.jsxs)("div",{style:l.container,children:[(0,W.jsx)(se,{disabled:!r,title:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.botAccessOption.useTemplate.title",defaultMessage:"Use a template provided by the developer"}),subtitle:r?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.botAccessOption.useTemplate.subtitle",defaultMessage:"{integrationName} will duplicate this template into the Private pages of your workspace. The integration will then be able to {capabilities} content in this new page.",values:{capabilities:(0,W.jsx)(T().dT,{value:(0,oe().s)(t.capabilities),type:"conjunction"}),integrationName:t.name}}):(0,W.jsx)("div",{style:l.errorContainer,children:(0,W.jsx)("div",{children:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.error.invalidTemplate.body",defaultMessage:"The page template is no longer public. <inlinetextlink>Contact the developer</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,W.jsx)(V().A,{href:`mailto:${t.info.email}`,children:e})}})})}),icon:te,isSelected:"duplicate_template"===o,selectOption:()=>a("duplicate_template")}),(0,W.jsx)(se,{title:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.botAccessOption.pickPages.title",defaultMessage:"Select pages to share with {integrationName}",values:{integrationName:t.name}}),subtitle:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.botAccessOption.pickPages.subtitle",defaultMessage:"Select one or multiple pages to share with {integrationName}",values:{integrationName:t.name}}),icon:ie().b,isSelected:"pick_pages"===o,selectOption:()=>a("pick_pages")})]})}function se(e){const{title:t,subtitle:i,icon:n,isSelected:o,selectOption:a,disabled:r}=e,l=(0,s().IS)((e=>({button:{height:"none",padding:12,width:"100%",borderWidth:1,borderColor:e.outlineButtonBorder,borderRadius:4,cursor:r?"not-allowed":void 0},buttonSelected:{background:"white",borderWidth:2,borderColor:f().Ay.blue,padding:11,boxShadow:"0px 4px 8px rgba(66, 129, 219, 0.09), 0px 0px 2px rgba(0, 0, 0, 0.06), 0px 0px 1px rgba(0, 0, 0, 0.04)"},option:{width:"100%",whiteSpace:"normal",display:"grid",gridTemplateColumns:"min-content auto min-content",padding:6},text:{overflowWrap:"normal"},title:{fontSize:14,fontWeight:A().Wy.medium,color:f().Ay.frontTextMedium,marginBottom:6},subtitle:{fontSize:12,lineHeight:"140%",color:e.mediumTextColor},icon:{width:14,height:14,color:f().Ay.regularIconColor,marginRight:12}})),[r]);return(0,W.jsx)(B().A,{size:"lg",onClick:a,style:l.button,hovered:o,hoveredStyle:l.buttonSelected,pressedStyle:l.buttonSelected,disabled:r,children:(0,W.jsxs)("div",{style:l.option,children:[n(l.icon),(0,W.jsxs)("div",{style:l.text,children:[(0,W.jsx)("div",{style:l.title,children:t}),(0,W.jsx)("div",{style:l.subtitle,children:i})]})]})})}var re=()=>i(388693),le=()=>i(97199);function ce(e){const{integrationValue:t,selectedBlockIdsStore:i}=e,n=(0,re().v_)(t),o=(0,s().IS)((e=>({subtitle:{fontSize:14,textAlign:"center",fontWeight:A().Wy.medium,marginBottom:16},linkPreviewSubtitle:{fontSize:14,textAlign:"left",marginBottom:16,color:e.lightTextColor}})),[]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{style:o.subtitle,children:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.selectPagesStep.title",defaultMessage:'Allow "{integrationName}" to access these pages',values:{integrationName:t.name}})}),(0,W.jsx)("div",{style:o.linkPreviewSubtitle,children:n&&(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.selectPagesStep.linkPreviewSubtitle",defaultMessage:"Your selections here will not impact this integration's ability to unfurl links across your workspace"})}),(0,W.jsx)(le().A,{selectedBlockIdsStore:i})]})}i(16280);var de=()=>i(546806),ue=()=>i(851979),pe=()=>i(619082);const ge=(0,ee().wt)("scribble",{viewBox:"0 0 16 15",svg:(0,W.jsx)("path",{d:"M1.048 9.972c.424.41 1.237.505 1.866-.069.226-.198.67-.67 1.367-1.374 3.418-3.459 5.524-5.64 5.9-5.298.3.274-.862 1.921-2.024 3.535-2.126 2.946-3.917 5.1-2.57 6.446 1.053 1.053 2.652.096 5.216-2.153 1.374-1.21 2.33-2.106 2.57-1.873.15.15-.212.745-.677 1.544-.656 1.135-1.531 2.42-.676 3.275.594.595 1.729.335 3.048-.97.274-.267.335-.589.103-.814-.212-.212-.513-.178-.738.027-.855.82-1.49 1.176-1.593 1.06-.13-.123.232-.773.861-1.894.868-1.552 1.401-2.59.602-3.37-1.074-1.04-2.331.061-4.512 1.982-1.853 1.627-2.611 2.051-2.782 1.867-.246-.26.437-1.183 2.46-4.013 2.188-3.049 3.487-5.031 2.257-6.234-1.607-1.566-3.767-.41-9.12 4.887-.779.766-1.264 1.23-1.503 1.518-.623.718-.486 1.51-.055 1.92z"})});var he=()=>i(197534),me=()=>i(319567);const ve=(0,ee().wt)("topbarCommentFilled",{viewBox:"0 0 20 20",svg:(0,W.jsx)("path",{d:"M6.27344 19.0703C5.96094 19.0703 5.71615 18.9688 5.53906 18.7656C5.36719 18.5625 5.28125 18.2865 5.28125 17.9375V16.0156H4.85938C4.10417 16.0156 3.45573 15.8698 2.91406 15.5781C2.3776 15.2865 1.96354 14.8698 1.67188 14.3281C1.38542 13.7812 1.24219 13.1198 1.24219 12.3438V6.28125C1.24219 5.50521 1.38542 4.84635 1.67188 4.30469C1.95833 3.75781 2.3724 3.33854 2.91406 3.04688C3.46094 2.75521 4.1276 2.60938 4.91406 2.60938H15.0781C15.8594 2.60938 16.5234 2.75521 17.0703 3.04688C17.6172 3.33854 18.0339 3.75781 18.3203 4.30469C18.6068 4.84635 18.75 5.50521 18.75 6.28125V12.3438C18.75 13.1198 18.6068 13.7812 18.3203 14.3281C18.0339 14.8698 17.6172 15.2865 17.0703 15.5781C16.5234 15.8698 15.8594 16.0156 15.0781 16.0156H10.25L7.57812 18.3828C7.3125 18.6172 7.08333 18.7891 6.89062 18.8984C6.69792 19.013 6.49219 19.0703 6.27344 19.0703ZM6.65625 17.3438L9.13281 14.8906C9.29948 14.724 9.45312 14.6146 9.59375 14.5625C9.73958 14.5052 9.93229 14.4766 10.1719 14.4766H15.0312C15.7708 14.4766 16.3177 14.2943 16.6719 13.9297C17.0312 13.5599 17.2109 13.013 17.2109 12.2891V6.32812C17.2109 5.60938 17.0312 5.06771 16.6719 4.70312C16.3177 4.33333 15.7708 4.14844 15.0312 4.14844H4.95312C4.21875 4.14844 3.67188 4.33333 3.3125 4.70312C2.95833 5.06771 2.78125 5.60938 2.78125 6.32812V12.2891C2.78125 13.013 2.95833 13.5599 3.3125 13.9297C3.67188 14.2943 4.21875 14.4766 4.95312 14.4766H6.02344C6.24219 14.4766 6.40104 14.526 6.5 14.625C6.60417 14.7188 6.65625 14.8828 6.65625 15.1172V17.3438ZM6.02344 7.25781C5.88802 7.25781 5.77344 7.21094 5.67969 7.11719C5.58594 7.01823 5.53906 6.90104 5.53906 6.76562C5.53906 6.63542 5.58333 6.52344 5.67188 6.42969C5.76562 6.33594 5.88281 6.28906 6.02344 6.28906H13.8828C14.0234 6.28906 14.1406 6.33594 14.2344 6.42969C14.3281 6.52344 14.375 6.63542 14.375 6.76562C14.375 6.90104 14.3281 7.01823 14.2344 7.11719C14.1406 7.21094 14.0234 7.25781 13.8828 7.25781H6.02344ZM6.02344 9.74219C5.88802 9.74219 5.77344 9.69531 5.67969 9.60156C5.58594 9.50781 5.53906 9.39062 5.53906 9.25C5.53906 9.125 5.58333 9.01302 5.67188 8.91406C5.76562 8.8151 5.88281 8.76562 6.02344 8.76562H13.8828C14.0234 8.76562 14.1406 8.8151 14.2344 8.91406C14.3281 9.01302 14.375 9.125 14.375 9.25C14.375 9.39062 14.3281 9.50781 14.2344 9.60156C14.1406 9.69531 14.0234 9.74219 13.8828 9.74219H6.02344ZM6.02344 12.2344C5.88802 12.2344 5.77344 12.1875 5.67969 12.0938C5.58594 12 5.53906 11.8854 5.53906 11.75C5.53906 11.6146 5.58333 11.5 5.67188 11.4062C5.76562 11.3073 5.88281 11.2578 6.02344 11.2578H11.1406C11.276 11.2578 11.3906 11.3073 11.4844 11.4062C11.5833 11.5 11.6328 11.6146 11.6328 11.75C11.6328 11.8854 11.5833 12 11.4844 12.0938C11.3906 12.1875 11.276 12.2344 11.1406 12.2344H6.02344Z"})});function fe(e){const{integrationValue:t,spaceName:i,existingBot:n}=e;if((0,g().SF)(t))throw new Error("Internal integrations should not be part of the Oauth authorization flow");const o=t.info.website_url,a=(0,E()._L)(t.capabilities),r=(0,v().IM)(t.id),l=e=>o?(0,W.jsx)(V().A,{href:o,style:d.inlineTextLink,children:e}):e,c=t.capabilities,d=(0,s().IS)((()=>({inlineTextLink:{color:"black",textDecoration:"none"}})),[]);if(n){const e={};return Object.keys(t.capabilities).forEach((i=>{const o=i;t.capabilities[o]&&!n.capabilities[o]&&(e[o]=!0)})),(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{children:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.existingCapabilties",defaultMessage:"<inlinetextlink>{integrationName}</inlinetextlink> already has the following permissions",values:{integrationName:t.name,inlinetextlink:l}})}),(0,W.jsx)(be,{spaceName:i,capabilities:n.capabilities,integrationName:t.name,integrationInheritsCreatorAccess:a,integrationHasAdminAccess:r}),Object.keys(e).length>0&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{style:{marginTop:24},children:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.newCapabilties",defaultMessage:"<inlinetextlink>{integrationName}</inlinetextlink> will have the following additional permissions",values:{integrationName:t.name,inlinetextlink:l}})}),(0,W.jsx)(be,{spaceName:i,capabilities:e,integrationName:t.name,integrationInheritsCreatorAccess:a,integrationHasAdminAccess:r})]})]})}return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{children:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.intro",defaultMessage:"<inlinetextlink>{integrationName}</inlinetextlink> will have permission to",values:{integrationName:t.name,inlinetextlink:l}})}),(0,W.jsx)(be,{spaceName:i,capabilities:c,integrationName:t.name,integrationInheritsCreatorAccess:a,integrationHasAdminAccess:r})]})}function be(e){const{spaceName:t,capabilities:i,integrationName:n,integrationInheritsCreatorAccess:o,integrationHasAdminAccess:a}=e;return(0,W.jsxs)(W.Fragment,{children:[(null==i?void 0:i.read_content)&&(0,W.jsx)(xe,{icon:ue().h,title:o?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithInheritedAccess",defaultMessage:"View pages you have access to"}):a?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithAdminAccess",defaultMessage:"View all pages"}):(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContent",defaultMessage:"View pages you select"}),children:o?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to view pages you can view.",values:{integrationName:n}}):a?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithAdminAccess.description",defaultMessage:"{integrationName} will be able to view all pages in your workspace",values:{integrationName:n}}):(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContent.description",defaultMessage:"{integrationName} will be able to view pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:n}})}),(null==i?void 0:i.update_content)&&(0,W.jsx)(xe,{icon:ge,title:o?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithInheritedAccess",defaultMessage:"Edit pages you have access to"}):a?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithAdminAccess",defaultMessage:"Edit all pages"}):(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContent",defaultMessage:"Edit pages you select"}),children:o?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to edit pages you can edit",values:{integrationName:n}}):a?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithAdminAccess.description",defaultMessage:"{integrationName} will be able to edit all pages",values:{integrationName:n}}):(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContent.description",defaultMessage:"{integrationName} will be able to edit pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:n}})}),(null==i?void 0:i.insert_content)&&(0,W.jsx)(xe,{icon:te,title:o?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContentWithInheritedAccess",defaultMessage:"Create new content within pages you have access to"}):(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContent",defaultMessage:"Create new content within pages you select"}),children:o?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to add new content or sub-pages wherever you have permission to add new content or sub-pages",values:{integrationName:n,workspaceName:t}}):(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContent.description",defaultMessage:"{integrationName} will be able to add new content or sub-pages to pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:n,workspaceName:t}})}),(null==i?void 0:i.read_comment)&&(0,W.jsx)(xe,{icon:me().N,title:o?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithInheritedAccess",defaultMessage:"View comments within pages you have access to"}):a?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithAdminAccess",defaultMessage:"View all comments"}):(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readComment",defaultMessage:"View comments within pages you select"}),children:o?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to view comments within pages you can access",values:{integrationName:n}}):a?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithAdminAccess.description",defaultMessage:"{integrationName} will be able to view comments within all pages",values:{integrationName:n}}):(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readComment.description",defaultMessage:"{integrationName} will be able to view comments within pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:n}})}),(null==i?void 0:i.insert_comment)&&(0,W.jsx)(xe,{icon:ve,title:o?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertCommentWithInheritedAccess",defaultMessage:"Create comments within pages you have access to"}):(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertComment",defaultMessage:"Create comments within pages you select"}),children:o?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertCommentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to create comments within pages you can access",values:{integrationName:n}}):(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertComment.description",defaultMessage:"{integrationName} will be able to create comments within pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:n}})}),((null==i?void 0:i.read_user_without_email)||(null==i?void 0:i.read_user_with_email))&&(0,W.jsx)(xe,{icon:he().Q,title:null!=i&&i.read_user_with_email?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsersAndEmail",defaultMessage:"View workspace users and their emails"}):(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsers",defaultMessage:"View workspace users"}),children:null!=i&&i.read_user_with_email?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsersAndEmail.detail",defaultMessage:"{integrationName} will be able to see basic information about all workspace members and guest data, including their names, profile images, and email addresses",values:{integrationName:n}}):(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsers.detail",defaultMessage:"{integrationName} will be able to see basic information about all workspace members and guests, like their names and profile images, but not their email addresses",values:{integrationName:n}})}),(null==i?void 0:i.webhooks)&&(0,W.jsx)(xe,{icon:pe().s,title:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.sendWebhooks",defaultMessage:"Receive updates on workspace activity"}),children:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.sendWebhooks.description",defaultMessage:"Changes to pages, permissions, or workspace settings will be shared with {integrationName}",values:{integrationName:n}})})]})}function xe(e){const[t,i]=n.useState(!1),o=(0,s().IS)((e=>({permissionItem:{border:`1px ${f().XA.dark.gray[850]} solid`,borderRadius:4,marginTop:8},permissionItemTitle:{display:"flex",justifyContent:"space-between",padding:"6px 12px",cursor:"pointer",userSelect:"none"},permissionItemHeading:{display:"flex",alignItems:"center"},permissionItemDetails:{paddingLeft:38,paddingRight:24,transition:"all 0.2s ease",color:e.mediumTextColor},rightStyle:{width:22,height:18},sharedIconStyle:{width:24,height:16,textAlign:"center"}})),[]);return(0,W.jsxs)("div",{style:o.permissionItem,children:[(0,W.jsxs)("div",{style:o.permissionItemTitle,onClick:()=>i(!t),children:[(0,W.jsxs)("div",{style:o.permissionItemHeading,children:[(0,W.jsx)("div",{style:o.sharedIconStyle,children:e.icon({width:16,height:16,color:f().Ay.regularIconColor})}),(0,W.jsx)("div",{children:e.title})]}),e.children&&(0,W.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,de().e)({width:12,height:12,color:f().Ay.lightIconColor,transform:t?"rotate(180deg)":void 0,transition:"transform 0.2s ease"})})]}),(0,W.jsx)("div",{style:{...o.permissionItemDetails,opacity:t?1:0,flex:t?1:0,paddingBottom:t?8:0,transform:t?"translate3d(0,-4px,0)":"translate3d(0,-8px,0)"},children:t&&e.children})]})}const Ae={permissions:{header:!0,warning:!0,footer:!0},bot_access_option:{header:!0,warning:!1,footer:!0},page_picker:{header:!1,warning:!1,footer:!1}},ye=(0,T().YK)({loadingMessage:{id:"oauthAuthorization.loadingMessage",defaultMessage:"Authorizingâ€¦"},redirectToIntegrationTimeout:{id:"oauthAuthorization.redirectToIntegrationTimeout",defaultMessage:"Integration appears to have timed out. Please refresh and try again."}});function Ce(e){const{showApprovalWarning:t}=e,[i,o]=n.useState("permissions"),[a,s]=n.useState("duplicate_template"),[r,l]=n.useState(void 0),c=Ae[i].header,d=t&&Ae[i].warning,u=Ae[i].footer;return(0,W.jsxs)(W.Fragment,{children:[c&&(0,W.jsx)(Ie,{...e}),(0,W.jsx)(ke,{...e,currentStep:i,botAccessOption:a,setBotAccessOption:s}),(0,W.jsx)(_e,{...e,currentStep:i,setCurrentStep:o,acceptedIntegrationCapabilities:r,setAcceptedIntegrationCapabilities:l,botAccessOption:a}),d&&(0,W.jsx)("div",{style:{display:"flex",alignItems:"center",marginTop:20},children:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.integrationApprovalNotice",defaultMessage:"Authorizing this integration will add it to your workspace's approval list. Other workspace members will be able to install this integration."})}),u&&(0,W.jsx)(Ne,{...e})]})}function we(){const{isMobile:e}=(0,o().Y0)();return(0,s().IS)((t=>({title:{fontSize:e?18:20,margin:"0 50px 32px",textAlign:"center",fontWeight:A().Wy.medium},inlineTextLink:{color:"black",textDecoration:"none"},buttonGroup:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:24},footer:{fontSize:A().J.UISmall.desktop,color:t.mediumTextColor,paddingTop:32,paddingBottom:16},innerFooterContainer:{color:t.regularTextColor,fontWeight:A().Wy.semibold,marginBottom:4}})),[e])}const Se={cancel:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.cancelButton.label",defaultMessage:"Cancel"}),back:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.selectPagesStep.backButton.label",defaultMessage:"Back"})},je={bot_access_option:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.nextButton.label",defaultMessage:"Next"}),page_picker:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.continueButton.label",defaultMessage:"Select pages"}),authorize:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.selectPagesStep.finishButton.label",defaultMessage:"Allow access"})};function Ie(e){const{integrationValue:t,spaceName:i}=e,n=t.info,o=n.website_url,a=n.icon?{pointer:{table:g().Li,id:t.id},icon:n.icon}:void 0,s=we();return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{style:{padding:15},children:(0,W.jsx)(X().A,{icon:a,disabled:!0,title:t.name,size:54,isEmptyPage:!1,style:{margin:"auto"}})}),(0,W.jsx)("div",{style:s.title,children:(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.title",defaultMessage:"<inlinetextlink>{integrationName}</inlinetextlink> is requesting access to {workspaceName}",values:{integrationName:t.name,workspaceName:i,inlinetextlink:e=>o?(0,W.jsx)(V().A,{style:s.inlineTextLink,href:o,children:e}):e}})})]})}function ke(e){const{currentStep:t,integrationValue:i,spaceName:n,existingBot:o}=e;return"permissions"===t?(0,W.jsx)(fe,{integrationValue:i,spaceName:n,existingBot:o}):"bot_access_option"===t?(0,W.jsx)(ae,{...e,integrationValue:i}):"page_picker"===t?(0,W.jsx)(ce,{...e,integrationValue:i}):void(0,x().HB)(t)}function _e(e){const{currentStep:t,setCurrentStep:i,acceptedIntegrationCapabilities:s,setAcceptedIntegrationCapabilities:r,integrationValue:l,validIntegrationTemplateId:c,oauthParams:d,botAccessOption:u,spaceId:p,selectedBlockIdsStore:h}=e,m=(0,o().v3)(),[f,b]=n.useState(!1),A=(0,a().O$)(h),y=(0,a().K8)((()=>{const e=Q().A.state;return(0,J().gz)({integrationId:l.id,externalIntegrationStoreState:e})}),[l]),w=function(e){const{integrationValue:t,validIntegrationTemplateId:i,botAccessOption:n}=e;if((0,E()._L)(t.capabilities))return["permissions"];if(i){if("duplicate_template"===n)return["permissions","bot_access_option"];if("pick_pages"===n)return["permissions","bot_access_option","page_picker"];if("admin"===n)return["permissions"];(0,x().HB)(n)}return["permissions","page_picker"]}({integrationValue:l,validIntegrationTemplateId:c,botAccessOption:u}),S=w.indexOf(t),j=(0,v().NV)(l.id),I=w[S-1],k=j?void 0:w[S+1],M=I?Se.back:Se.cancel,N=I?()=>{i(I)}:()=>{!function(e){const{environment:t,oauthParams:i,integrationValue:n,createdBotValue:o}=e;o?Z().Vl(t):L().D({environment:t,params:i,integration:n,errorType:z().l.access_denied})}({environment:m,oauthParams:d,integrationValue:l,createdBotValue:y})},P=k?je[k]:je.authorize,T=k?()=>{"permissions"===t&&r(l.capabilities),i(k)}:async()=>{j?(await Y().NB({environment:m,spaceId:p,from:"workspace_connections_redirect",integration:R().Bj6.fromValue(g().Li,l)}),window.close()):async function(e){const{environment:t,botAccessOption:i,integrationValue:n,acceptedIntegrationCapabilities:o,setIsLoading:a,oauthParams:s,spaceId:r,selectedBlockIds:l,createdBotValue:c}=e;let d;"duplicate_template"===i&&(d=n.info.template_page_id),a(!0),q().m({message:ye.loadingMessage});const u=d?[]:Object.keys(l).filter((e=>l[e])),{currentSpaceStore:p,currentSpaceViewStore:g}=_().default.state;if(c){const e=await C().L2({environment:t,templatePageId:d,botValue:c,spaceStore:p,spaceViewStore:g,pages:u});e?G().uK({environment:t,store:e,pageVisitSource:U().y8.Duplicate}):Z().Vl(t),q().V(),a(!1)}else await L().D({environment:t,params:s,integration:n,acceptedIntegrationCapabilities:o,spaceId:r,blockIdsForBot:u,templatePageId:d}),F().ry(t,{selection:i}),await(0,K().wR)(3e4),q().V(),a(!1),D().f1($().A.formatMessage(ye.redirectToIntegrationTimeout))}({environment:m,botAccessOption:u,integrationValue:l,setIsLoading:b,oauthParams:d,spaceId:p,selectedBlockIds:A,createdBotValue:y,acceptedIntegrationCapabilities:s})},V=we();return(0,W.jsxs)("div",{style:V.buttonGroup,children:[(0,W.jsx)(B().A,{size:"lg",onClick:N,children:M}),(0,W.jsx)(O().A,{size:"lg",onClick:T,disabled:f,children:P})]})}const Me="https://notion.notion.site/Integration-Gallery-Terms-of-Service-b74cada95062442d98c2abb1fe3efd9b";function Ne(e){const{integrationValue:t,oauthParams:i}=e,n=we();if((0,g().SF)(t))return null;const o=t.info.terms_of_use_url,a=t.info.privacy_policy_url,s=(i.redirectUri||t.redirect_uris[0]||"").replace("http://","").replace("https://","").split(/[/?#]/)[0],r=(0,v().NV)(t.id)?(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.warning.body.partnerIntegration",defaultMessage:"The third-party products or services to which this integration connects are non-Notion Applications. By enabling this integration, you agree to Notion's <notiontermslink>Integration Gallery Terms</notiontermslink>.",values:{notiontermslink:e=>(0,W.jsx)(V().A,{href:Me,children:e})}}):(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.warning.body",defaultMessage:'If you continue, you may be sharing sensitive information. Notion does not review third party integrations such as "{integrationName}". Learn how "{integrationName}" handles your data by reviewing their <privacypolicylink>Privacy Policy</privacypolicylink> and <termsofservicelink>Terms of Service</termsofservicelink>.',values:{integrationName:t.name,privacypolicylink:e=>a?(0,W.jsx)(V().A,{href:a,children:e}):e,termsofservicelink:e=>o?(0,W.jsx)(V().A,{href:o,children:e}):e}});return(0,W.jsxs)("footer",{style:n.footer,children:[(0,W.jsxs)("div",{style:n.innerFooterContainer,children:[" ",(0,W.jsx)(T().sA,{id:"oauthAuthorizationPage.permissionStep.warning.title",defaultMessage:"Make sure you trust {integrationName} ({redirectUriDomain})",values:{integrationName:t.name,redirectUriDomain:s}})]}),(0,W.jsx)("div",{children:r})]})}var Pe=()=>i(863513);const ze={"929cdebb-09e8-4c5c-bfe5-e8c3c3902987":"development","5dbd3ed0-1160-4532-b10a-1a6749748fc4":"staging"},Te=["makenotion.com","qasource.com"];function Le(e){const t=e.userId,i=e.spaceId,n=(0,o().v3)(),r=(0,a().K8)((()=>_().default.state.currentUserRootStore),[]),l=(0,a().K8)((()=>_().default.state.currentSpaceStore),[]),c=(0,a().K8)((()=>_().default.state.currentSpaceViewStore),[]),d=(0,a().K8)((()=>{var e;return null===(e=_().default.state.currentUserStore)||void 0===e?void 0:e.getEmail()}),[]),u=(0,a().K8)((()=>!!(t&&i&&c)&&(c.getSpaceId()===i&&c.getUserRootParentId()===t)),[t,i,c]),p=function(e){const{WindowSizeStore:t}=e.environment,i=(0,a().K8)((()=>t.state.width>500),[t]),n=(0,a().K8)((()=>t.state.height<900),[t]);return(0,s().IS)((e=>({layoutContainer:{height:"100%",overflow:"auto",backgroundColor:i?f().Ay.frontCreamBackground:f().Ay.white},pageContainer:{display:"flex",justifyContent:"center"},contentBox:{width:"500px",minHeight:"600px",borderRadius:5,backgroundColor:f().Ay.white,boxShadow:i?e.shadowSM:"none",display:"flex",flexDirection:"column",fontSize:A().J.UIRegular.desktop,marginTop:n?16:i?"calc((100vh - 900px) / 2)":0,marginBottom:40,transition:"all 0.2s ease"},contentBody:{paddingLeft:40,paddingRight:40,paddingTop:25,paddingBottom:25,flex:1,display:"flex",flexDirection:"column"}})),[i,n])}({environment:n});return(0,W.jsx)("div",{style:p.layoutContainer,children:(0,W.jsx)("div",{style:p.pageContainer,children:(0,W.jsxs)("div",{style:p.contentBox,children:[(0,W.jsx)(Pe().A,{disableAccountSwitcher:u,singleSpaceToSelect:i,onSpaceSwitch:async t=>{await S().yV({environment:n,spaceViewStore:t});const i=t.getSpaceId(),o=Te.find((e=>null==d?void 0:d.endsWith(e)));if(i&&o&&ze[i]&&e.integrationId&&e.redirectUri){const t=(0,y().P0)({baseUrl:(0,j().sZ)(ze[i]),clientId:e.integrationId,redirectUri:e.redirectUri,state:e.state});w().f({environment:n,url:t,targetSelf:!0})}}}),(0,W.jsx)("div",{style:p.contentBody,children:(0,W.jsx)(Be,{oauthParams:e,spaceStore:l,userRootStore:r})})]})})})}function Be(e){const{oauthParams:t,spaceStore:i,userRootStore:n}=e;return i&&n?(0,W.jsx)(Oe,{oauthParams:t,spaceStore:i,userRootStore:n}):(0,W.jsx)(N().A,{})}function Oe(e){const{oauthParams:t,spaceStore:i,userRootStore:s}=e,{integrationId:f,responseType:A}=t,y=(0,o().v3)(),w=(0,a().K8)((()=>I().GK(y,i)),[y,i]),[S,j]=n.useState(),_=(0,a().K8)((()=>{if(f){const e=(0,M().Oo)(s,{id:f,table:g().Li}).getValue();return e&&"internal"!==e.type?e:void 0}}),[f,s]),P=(0,r().L)({value:_,waitTimeInMs:1e3}),[{value:z}]=(0,d().Yb)((async()=>{if(!_)return;return(await C().Ju({environment:y,table:h().oo,id:s.id,type:_.type})).botIds}),[y,s,_]),T=(0,a().K8)((()=>{if(z&&z.length>0){return z.map((e=>{const t=(0,M().Oo)(s,{table:p().GP,id:e}).getValue();if(t&&t.alive&&(0,c().hu)(t)&&t.created_by_id===s.id&&t.created_by_table===h().oo&&t.integration_id===f)return{botValue:t}})).filter(x().O9)[0]}}),[s,f,z]),L=(0,r().L)({value:z,waitTimeInMs:1e3}),[{value:B}]=(0,d().Yb)((async()=>{if(T)return await C().GO({environment:y,currentSpaceStore:i,botIds:[null==T?void 0:T.botValue.id]})}),[y,T,i]),O=(0,a().K8)((()=>{const e=null==T?void 0:T.botValue.id,t={};if(!e||!B||!B.bots[e])return l().default.createValue(t);return(B.bots[e].pageIds??[]).forEach((e=>{t[e]=!0})),l().default.createValue(t)}),[B,T]),V=(0,a().K8)((()=>{if(!f)return!1;const e=i.getBotSettingsStore().getValue();if(!e)return!0;if((0,m().az)(e)){const t=e.integration_approval_statuses;return!(!t||!t[f])&&Boolean("approved"===t[f].status)}return!0}),[f,i]),U=(0,a().K8)((()=>{const e=P.value;if(e&&!(0,g().SF)(e))return e.info.template_page_id}),[P]),R=(0,a().K8)((()=>Boolean(f&&("datadog"===(0,v().Q2)(f)||(0,v().IM)(f)))),[f]),E=(0,a().K8)((()=>I().IL(i)),[i]),K=(0,a().K8)((()=>i.canAdmin()),[i]);n.useEffect((()=>{P.value&&!S&&j(_)}),[S,j,_,P]);const F=P.value??S;return"pending"===P.status||"pending"===L.status?(0,W.jsx)(N().A,{}):f&&(0,b().uj)(f)||R?F?"code"===A||R?E?(0,W.jsx)(H,{oauthParams:t,spaceName:w,type:"notAnAdmin",integrationValue:F,primaryAction:()=>{k().A.setState({...k().A.state,open:!0})}}):K||V?u().H(F,t.redirectUri)||R?(0,W.jsx)(Ce,{integrationValue:F,existingBot:null==T?void 0:T.botValue,validIntegrationTemplateId:U,spaceName:w,spaceId:i.id,oauthParams:t,showApprovalWarning:K&&!V&&!R,selectedBlockIdsStore:O}):(0,W.jsx)(H,{oauthParams:t,spaceName:w,type:"invalidRedirectUri",integrationValue:F}):(0,W.jsx)(H,{oauthParams:t,spaceName:w,type:"integrationNotApproved",integrationValue:F,primaryAction:()=>{k().A.setState({...k().A.state,open:!0})}}):(0,W.jsx)(H,{type:"invalidResponseType",oauthParams:t,spaceName:w,integrationValue:F}):(0,W.jsx)(H,{type:"clientNotFound",oauthParams:t,spaceName:w}):(0,W.jsx)(H,{type:"invalidClientId",oauthParams:t,spaceName:w})}},566254:(e,t,i)=>{i.d(t,{HC:()=>c,Pz:()=>u,_s:()=>r,ml:()=>p,rA:()=>d,x_:()=>l});var n=()=>i(559926),o=()=>i(666803),a=()=>i(449506),s=()=>i(908928);async function r(e,t){const i=await a().callApi({eventName:"getConnectedAppsStatus",environment:e,data:{spaceId:t}});if("failed"===i.type){const e=i.error;return console.error(e),{drive:[],evernote:void 0,trello:void 0,asana:void 0,confluence:void 0}}return i.data}async function l(e,t){await a().callApi({eventName:"disconnectTrello",environment:e,data:{}}),await t.refresh(),n().kO(e,{integration_name:"trello"})}async function c(e,t){await a().callApi({eventName:"disconnectAsana",environment:e,data:{}}),await t.refresh(),n().kO(e,{integration_name:"asana"})}async function d(e,t){await a().callApi({eventName:"disconnectEvernote",environment:e,data:{}}),await t.refresh(),n().kO(e,{integration_name:"evernote"})}async function u(e,t,i){await a().callApi({eventName:"disconnectConfluence",environment:e,data:{spaceId:i}}),await t.refresh(),n().kO(e,{integration_name:"confluence"})}async function p(e){const{environment:t,requestStore:i,botId:a}=e;await s().KA({environment:t,botId:a,onSuccess:()=>{!async function(e){const{environment:t,requestStore:i}=e;await i.refresh();const a=o().Ay.getInitialState();o().Ay.setState(a),n().kO(t,{integration_name:"jira"})}({environment:t,requestStore:i})}})}},619082:(e,t,i)=>{i.d(t,{s:()=>o});i(296540);var n=i(474848);const o=(0,i(340498).wt)("notificationUnread",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M3.622 12.683v-5.25c0-.62.05-1.172.15-1.655.105-.483.333-.9.684-1.25.351-.352.768-.58 1.251-.684a7.906 7.906 0 0 1 1.654-.157h4.69a2.893 2.893 0 0 0-.185 1.086 1.325 1.325 0 0 0-.007.13l.014.13H7.204c-.36 0-.697.032-1.012.096-.314.064-.567.189-.758.376a1.514 1.514 0 0 0-.376.759c-.06.31-.09.645-.09 1.005v5.605c0 .355.03.688.09.998.063.305.189.554.376.745.191.187.442.315.752.383.314.064.649.096 1.004.096h5.62c.35 0 .68-.032.99-.096.315-.064.566-.191.753-.383.191-.191.319-.44.382-.745.064-.31.096-.643.096-.998V8.191l.123.014c.046 0 .091-.002.137-.007.191.01.378-.002.56-.034.183-.036.356-.087.52-.15v4.669c0 .629-.052 1.184-.157 1.668-.1.483-.324.9-.67 1.25-.356.351-.777.58-1.265.684a7.944 7.944 0 0 1-1.66.157H7.374c-.624 0-1.18-.052-1.668-.157a2.478 2.478 0 0 1-1.25-.683 2.411 2.411 0 0 1-.685-1.251c-.1-.484-.15-1.04-.15-1.668Zm11.56-5.408a2.26 2.26 0 0 1-1.19-.32 2.455 2.455 0 0 1-.854-.862 2.27 2.27 0 0 1-.322-1.183c0-.433.107-.827.322-1.182.214-.36.499-.648.854-.862a2.26 2.26 0 0 1 1.19-.321c.423 0 .813.107 1.169.321.36.214.647.502.86.862.215.355.322.75.322 1.182 0 .429-.107.823-.321 1.183-.214.36-.501.647-.861.861a2.223 2.223 0 0 1-1.17.321Z"})})},685506:(e,t,i)=>{i.d(t,{i:()=>o});i(296540);var n=i(474848);const o=(0,i(340498).wt)("aiFixSpellingGrammar",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M6.57812 14.1621C6.23633 14.1621 5.9834 14.0186 5.74414 13.7246L2.20312 9.29492C2.03223 9.08301 1.95703 8.88477 1.95703 8.67969C1.95703 8.20801 2.30566 7.86621 2.78418 7.86621C3.08496 7.86621 3.29004 7.97559 3.48828 8.24219L6.55078 12.1729L12.4912 2.73926C12.6963 2.41797 12.8945 2.30176 13.2295 2.30176C13.708 2.30176 14.0361 2.62988 14.0361 3.10156C14.0361 3.28613 13.9814 3.47754 13.8379 3.69629L7.41211 13.7178C7.21387 14.0117 6.94043 14.1621 6.57812 14.1621Z"})})},701545:(e,t,i)=>{i.d(t,{p:()=>o});i(296540);var n=i(474848);const o=(0,i(340498).wt)("checkMarkLine",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M6.79297 13.2871C6.48047 13.2871 6.21484 13.1523 5.99609 12.8828L2.96094 9.14453C2.875 9.04297 2.8125 8.94336 2.77344 8.8457C2.73828 8.74805 2.7207 8.64648 2.7207 8.54102C2.7207 8.30664 2.79883 8.11328 2.95508 7.96094C3.11133 7.80859 3.30859 7.73242 3.54688 7.73242C3.81641 7.73242 4.04297 7.84766 4.22656 8.07812L6.76953 11.3008L11.7324 3.4375C11.834 3.28125 11.9395 3.17188 12.0488 3.10938C12.1582 3.04297 12.2949 3.00977 12.459 3.00977C12.6973 3.00977 12.8926 3.08398 13.0449 3.23242C13.1973 3.38086 13.2734 3.57031 13.2734 3.80078C13.2734 3.89453 13.2578 3.98828 13.2266 4.08203C13.1953 4.17578 13.1465 4.27344 13.0801 4.375L7.5957 12.8594C7.4082 13.1445 7.14062 13.2871 6.79297 13.2871Z"})})},843878:(e,t,i)=>{i.d(t,{AL:()=>a,Ay:()=>r,J_:()=>s});i(296540);var n=()=>i(802790),o=i(474848);function a(e){return e?18:60}function s(){return(0,o.jsx)(n().A,{size:37})}const r=function(e){let{children:t,controlRow:n,bannerText:s,controlRowPaddingTopBottom:r,removeBoxShadow:l,contentPaddingLeftRight:c,controlRowPaddingLeftRight:d,getPaddingTopBottom:u,disableScroller:p,maxWidth:g,centerContent:h}=e;const m=(0,i(484714).v3)(),{device:v}=m,f=u?u():v.isMobile?18:36,b=(0,i(401497).IS)((e=>({containerWithScroller:{display:"flex",flexDirection:"column",width:"100%",height:"100%",maxWidth:g??void 0,backgroundColor:e.cardContentBackground},scroller:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:c??a(v.isMobile),paddingRight:c??a(v.isMobile),paddingTop:s?15:f,paddingBottom:s?22:f,...h?{display:"flex",alignItems:"center",justifyContent:"center"}:null},controlRowWithScroller:{flexGrow:0,flexShrink:0,paddingLeft:d??a(v.isMobile),paddingRight:d??a(v.isMobile),paddingTop:r,paddingBottom:r,boxShadow:l?void 0:`0 -1px 0 ${e.regularDividerColor}`},containerWithoutScroller:{paddingLeft:a(v.isMobile),paddingRight:a(v.isMobile)},childrenWithoutScroller:{paddingTop:f,paddingBottom:f},controlRowWithoutScroller:{paddingTop:r,paddingBottom:r,boxShadow:`0 -1px 0 ${e.regularDividerColor}`}})),[g,c,v.isMobile,s,f,d,r,l,h]);return p?(0,o.jsxs)("div",{style:b.containerWithoutScroller,children:[(0,o.jsx)("div",{style:b.childrenWithoutScroller,children:t}),n&&(0,o.jsx)("div",{style:b.controlRowWithoutScroller,children:n})]}):(0,o.jsxs)("div",{style:b.containerWithScroller,children:[s&&(0,o.jsx)(i(716583).A,{styleKey:i(135552).q.Blue,isMobile:!1,children:s}),(0,o.jsx)(i(2143).H,{type:i(756279).A.All,style:b.scroller,children:t}),n&&(0,o.jsx)("div",{style:b.controlRowWithScroller,children:n})]})}},849974:(e,t,i)=>{i.d(t,{y:()=>o});i(296540);var n=i(474848);const o=(0,i(340498).wt)("sync",{viewBox:"0 0 21 21",svg:(0,n.jsx)("path",{d:"M10.4913 20.6992C9.12373 20.6992 7.83685 20.4378 6.63059 19.9151C5.42433 19.3988 4.35999 18.6792 3.43755 17.7563C2.52157 16.8335 1.80233 15.7686 1.27984 14.5618C0.757342 13.3549 0.496094 12.0674 0.496094 10.6992C0.496094 9.33103 0.757342 8.04352 1.27984 6.83668C1.80233 5.62984 2.52157 4.56821 3.43755 3.65178C4.35999 2.72891 5.42111 2.00609 6.62091 1.48334C7.82717 0.960593 9.11406 0.699219 10.4816 0.699219C11.8556 0.699219 13.1457 0.960593 14.3519 1.48334C15.5582 2.00609 16.6225 2.72891 17.545 3.65178C18.4674 4.56821 19.1899 5.62984 19.7124 6.83668C20.2348 8.04352 20.4961 9.33103 20.4961 10.6992C20.4961 12.0674 20.2348 13.3549 19.7124 14.5618C19.1899 15.7686 18.4674 16.8335 17.545 17.7563C16.6225 18.6792 15.5582 19.3988 14.3519 19.9151C13.1457 20.4378 11.8588 20.6992 10.4913 20.6992ZM10.53 16.1784C11.1363 16.1784 11.7201 16.0848 12.2813 15.8977C12.8425 15.7105 13.3295 15.4524 13.7423 15.1232C13.9939 14.9232 14.1455 14.7005 14.1971 14.4553C14.2552 14.21 14.1971 13.9906 14.0229 13.797C13.8552 13.5969 13.6585 13.4937 13.4327 13.4872C13.2069 13.4808 12.9812 13.555 12.7554 13.7099C12.42 13.968 12.0749 14.1649 11.7201 14.3004C11.3653 14.4295 10.9686 14.494 10.53 14.494C9.91716 14.494 9.34628 14.3714 8.81733 14.1261C8.29484 13.8744 7.84975 13.5356 7.48206 13.1097C7.11438 12.6773 6.85636 12.1868 6.708 11.6382H7.6659C7.91103 11.6382 8.06261 11.5414 8.12067 11.3478C8.18518 11.1542 8.14647 10.9606 8.00456 10.767L6.39837 8.5695C6.25646 8.37589 6.07906 8.27908 5.8662 8.27908C5.65978 8.27263 5.48239 8.36943 5.33402 8.5695L3.74718 10.767C3.61172 10.9606 3.57302 11.1542 3.63107 11.3478C3.68913 11.5414 3.84072 11.6382 4.08584 11.6382H5.0631C5.22436 12.5353 5.55979 13.3259 6.06939 14.01C6.58543 14.6941 7.22727 15.2265 7.99488 15.6073C8.7625 15.988 9.60753 16.1784 10.53 16.1784ZM10.5203 5.19099C9.91393 5.19099 9.33015 5.28457 8.76895 5.47173C8.20775 5.65888 7.72074 5.92026 7.3079 6.25585C7.04988 6.44946 6.89506 6.67211 6.84346 6.92381C6.7983 7.16905 6.85958 7.38525 7.0273 7.5724C7.19501 7.77247 7.39176 7.87895 7.61753 7.89186C7.8433 7.89832 8.06907 7.82087 8.29484 7.65953C8.63027 7.40783 8.97215 7.21745 9.32048 7.08838C9.67526 6.95285 10.0752 6.88509 10.5203 6.88509C11.1331 6.88509 11.7007 7.01093 12.2232 7.26263C12.7457 7.50787 13.1908 7.84669 13.5585 8.27908C13.9262 8.70503 14.1842 9.19228 14.3326 9.74084H13.336C13.0844 9.74084 12.9296 9.83765 12.8715 10.0313C12.8135 10.2249 12.8554 10.4153 12.9973 10.6024L14.6035 12.8096C14.739 12.9967 14.9131 13.0935 15.126 13.1C15.3389 13.1064 15.5195 13.0096 15.6678 12.8096L17.2547 10.6024C17.3901 10.4088 17.4288 10.2184 17.3708 10.0313C17.3192 9.83765 17.1676 9.74084 16.916 9.74084H15.9871C15.8259 8.84378 15.4872 8.05643 14.9712 7.37879C14.4616 6.6947 13.823 6.15904 13.0554 5.77182C12.2877 5.3846 11.4427 5.19099 10.5203 5.19099Z"})})},851979:(e,t,i)=>{i.d(t,{h:()=>o});i(296540);var n=i(474848);const o=(0,i(340498).wt)("eye",{viewBox:"0 0 32 32",svg:(0,n.jsx)("path",{d:"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z"})})},874963:(e,t,i)=>{i.d(t,{f:()=>o});i(296540);var n=i(474848);const o=(0,i(340498).wt)("openTeamSearch",{viewBox:"0 0 16 14",svg:(0,n.jsx)("path",{d:"M9.506 13.342h4.447c.348 0 .621-.11.82-.328.2-.22.3-.516.3-.891V4.852c0-.375-.1-.67-.3-.885-.199-.219-.472-.328-.82-.328H9.922v1.136h3.709c.101 0 .178.026.228.077.051.05.076.127.076.228v6.815c0 .101-.025.177-.076.228-.05.05-.127.076-.228.076H9.506v1.143zm2.28-6.358h.925c.129 0 .193-.064.193-.193v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .129.062.193.187.193zm0 2.168h.925c.129 0 .193-.066.193-.199v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .133.062.2.187.2zm0 2.163h.925c.129 0 .193-.067.193-.2v-.896c0-.13-.064-.194-.193-.194h-.926c-.125 0-.187.065-.187.194v.896c0 .133.062.2.187.2zm-10.864.808c0 .375.1.672.299.89.199.22.474.329.826.329H9.44c.348 0 .621-.11.82-.328.204-.22.305-.516.305-.891V1.928c0-.38-.101-.676-.304-.89-.2-.22-.473-.329-.82-.329H2.046c-.352 0-.627.11-.826.328-.2.215-.3.512-.3.89v10.196zm1.142-.228V2.162c0-.105.026-.183.077-.234.05-.051.127-.076.228-.076h6.75c.102 0 .178.025.229.076.05.05.076.129.076.234v9.733c0 .101-.026.177-.076.228-.051.05-.127.076-.229.076H2.37c-.101 0-.178-.025-.228-.076-.051-.05-.077-.127-.077-.228zm1.588.85h.891v-1.946c0-.117.06-.176.182-.176h2.039c.12 0 .181.059.181.176v1.945h.89V10.5c0-.25-.058-.435-.175-.557-.117-.125-.295-.187-.533-.187H4.36c-.238 0-.416.062-.533.187-.117.122-.176.307-.176.557v2.244zm.17-8.362h1.12c.156 0 .234-.078.234-.235v-1.09c0-.156-.078-.234-.235-.234H3.822c-.148 0-.222.078-.222.235v1.09c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.235v-1.09c0-.156-.077-.234-.229-.234H6.541c-.152 0-.229.078-.229.235v1.09c0 .156.077.234.229.234zM3.822 6.627h1.12c.156 0 .234-.078.234-.234V5.309c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.234V5.309c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .156.077.234.229.234zm-2.719 2.25h1.12c.156 0 .234-.08.234-.24V7.553c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .16.074.24.222.24zm2.719 0h1.12c.152 0 .228-.08.228-.24V7.553c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .16.077.24.229.24z"})})},972261:(e,t,i)=>{i.d(t,{Fl:()=>r,PI:()=>o,S:()=>l,Tq:()=>d,_u:()=>a,e5:()=>s,z4:()=>n});i(898992),i(672577);const n=["slack","googleDrive","github","jira","microsoftTeams","sharepoint"],o=[...n,"web","githubCode"],a="7c57d10c-00cc-48bc-a552-fb3911dd7745",s="1031cb6c-4935-4cc1-9c08-c9a4ecaae323",r="65683ef9-c923-4a14-8c5b-bfcf591cf5a1",l="c1f230b1-6635-4ab0-a3f5-f7eb105a87c3",c=[{regex:/https:\/\/(?<workspace>[\w-]+)\.slack\.com\/archives\/(?<channel>[^\/]+)\/p(?<timestamp>\d+)(\?thread_ts=(?<thread_ts>\d+\.\d+)&cid=(?<cid>[^\/]+))?/,type:"slack"},{regex:/https:\/\/docs\.google\.com\/(?<fileType>document|spreadsheets|presentation)\/d\/(?<fileId>[a-zA-Z0-9_-]+)(?:\/\S*)?/,type:"googleDrive"},{regex:/https:\/\/github\.com\/(?<orgName>[^\/]+)\/(?<repoName>[^\/]+)\/(?:blob|tree|blame)\/(?<branchName>[^\/]+)\/(?<codePath>[^#]+)(#(?<lineNumber>L\d+(?:C\d+)?(?:-L\d+)?))?/,type:"githubCode"},{regex:/https:\/\/github\.com\/(?<orgName>[^\/]+)\/(?<repoName>[^\/]+)\/pull\/(?<prNumber>\d+)(\/(files|commits|checks)?)?/,type:"github"},{regex:/https:\/\/app\.graphite\.dev\/github\/pr\/(?<orgName>[^\/]+)\/(?<repoName>[^\/]+)\/(?<prNumber>\d+)(?:\/\S*)?/,type:"github"},{regex:/https:\/\/(?:[^\.]+)\.sourcegraphcloud\.com\/github\.com\/(?<orgName>[^\/]+)\/(?<repoName>[^\/@]+)(?:@(?<branchName>[a-f0-9]+))?\/-\/blob\/(?<codePath>[^?]+)\?(?<lineNumbers>L\d+|l\d+)?/,type:"githubCode"},{regex:/https:\/\/(?<site>[^/]+\.atlassian\.net).*?(?:browse\/|[?&]selectedIssue=)(?<issueKey>[A-Z0-9]+-\d+).*?/,type:"jira"}];function d(e){const t=c.find((t=>t.regex.test(e)));return(null==t?void 0:t.type)??"web"}},975323:(e,t,i)=>{i.d(t,{Q:()=>I});i(944114),i(581454),i(296540);var n=()=>i(484714),o=()=>i(56366),a=()=>i(401497),s=()=>i(874963),r=()=>i(846899),l=()=>i(413267),c=()=>i(735384),d=()=>i(959013),u=()=>i(449506),p=()=>i(705540),g=()=>i(317909),h=()=>i(760217),m=()=>i(928600),v=()=>i(939740),f=()=>i(89924),b=()=>i(21140),x=()=>i(989423),A=()=>i(722872),y=()=>i(176983),C=()=>i(291075),w=()=>i(351360),S=()=>i(245464),j=i(474848);function I(e){var t,i,I;let{parent:k}=e;const _=(0,a().IS)((e=>({icon:{width:16,height:16},caption:{color:e.lightTextColor,fontSize:12,textWrap:"wrap"},option:{paddingTop:4,paddingBottom:4},optionLabel:{fontSize:14,marginBottom:2},disabledOptionLabel:{color:e.lightTextColor,fontSize:14,marginBottom:2},iconWrapper:{paddingTop:4}})),[]),M=(0,y().J)(),N=(0,n().v3)(),P=(0,o().K8)((()=>w().default.getState().currentSpaceViewStore),[]),z=(0,o().K8)((()=>{var e;return null===(e=w().default.getState().currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),T=(0,o().O$)(C().o),L=[];var B;null!==(t=T.githubOrg)&&void 0!==t&&t.isSyncComplete&&L.push({key:"github-admin-auth-connected",label:(0,j.jsx)(d().sA,{defaultMessage:"Connected",id:"githubAIConnector.connectionOptions.publicRepositories"}),caption:(0,j.jsx)(d().sA,{defaultMessage:"The {orgName} GitHub has been connected by your workspace owner",id:"githubAIConnector.connectionOptions.connectedByAdmin",values:{orgName:null===(B=T.githubOrg)||void 0===B?void 0:B.name}}),icon:(0,s().f)(_.icon),disabled:!0,connected:!0,hidden:!1,action:()=>{}});null!==(i=T.githubOrg)&&void 0!==i&&i.isSyncComplete||L.push({key:"github-admin-auth-connecting",label:(0,j.jsx)(d().sA,{defaultMessage:"Connecting GitHub...",id:"githubAIConnector.connectionOptions.connectingGitHub"}),caption:(0,j.jsx)(d().sA,{defaultMessage:"This can take up to 72 hours.",id:"githubAIConnector.connectionOptions.connectingGitHubCaption"}),icon:(0,s().f)(_.icon),disabled:!0,connected:!1,hidden:!1,action:()=>{}}),T.isPersonalAuthComplete||L.push({key:"github-personal-auth-not-complete",hidden:!1,component:(0,j.jsx)("div",{style:{marginLeft:6,marginRight:6,paddingLeft:8,paddingRight:8},children:(0,j.jsx)(S().A,{parent:k,showDismiss:!1})})});const O=[{key:"github-connection-section",render:e=>(0,j.jsx)(f().A,{...e}),items:L.filter((e=>!e.hidden)).map((e=>{if("component"in e){const{key:t,component:i}=e;return{key:t,action:()=>{},render:()=>i}}const{key:t,label:i,caption:n,icon:o,disabled:a,connected:s,action:r}=e;return{key:t,action:async()=>{await r(),null==k||k.close()},render:e=>(0,j.jsx)(h().A,{...e,title:(0,j.jsxs)(b().Ye,{gap:4,children:[(0,j.jsx)("div",{style:_.iconWrapper,children:o}),(0,j.jsxs)("div",{style:_.option,children:[(0,j.jsx)("div",{style:a?_.disabledOptionLabel:_.optionLabel,children:i}),(0,j.jsx)("div",{style:_.caption,children:n})]})]}),right:s&&(0,l().b)({width:12,height:12}),disabled:a})}}))}];if(T.isPersonalAuthComplete&&O.push({key:"github-user-disconnect-section",render:e=>(0,j.jsx)(f().A,{...e,topBorder:!0}),items:[{key:"github-user-auth-disconnect",render:e=>(0,j.jsx)(h().A,{...e,title:(0,j.jsxs)(b().Ye,{gap:4,children:[(0,j.jsx)("div",{style:_.iconWrapper,children:(0,c().I)(_.icon)}),(0,j.jsx)("div",{style:_.option,children:(0,j.jsx)("div",{children:(0,j.jsx)(d().sA,{id:"githubAIConnector.disconnectPersonalAuth",defaultMessage:"Disconnect your account"})})})]}),disabled:!1}),action:async()=>{if(!z)return;(0,x().u4)({environment:N,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"user_auth_disconnect",integration_type:"github",setup_session_id:C().o.state.sessionId,from:C().o.state.analyticsFrom}}}),null==k||k.close();const e=await u().callApi({eventName:"disconnectGithub",environment:N,data:{spaceId:z,disconnectUserAuth:!0}});g().createAndCommit({userAction:"githubAIConnector.onboarding.dismissPersonalAuthPrompt",environment:N,canUndo:!0,perform:e=>{P&&g().applyOperation({store:P,operation:{pointer:P.pointer,path:["settings"],command:"update",args:{...P.getSettings(),dismissed_github_personal_auth_prompt:!0}},transaction:e})}}),C().o.setState({...C().o.state,isPersonalAuthComplete:!1}),"success"===e.type&&e.data.redirectUrl&&(N.device.isElectron?p().openExternalUrl(e.data.redirectUrl):window.open(e.data.redirectUrl,"_blank"))}}]}),null!==(I=T.githubOrg)&&void 0!==I&&I.isSyncComplete&&M&&O.push({key:"github-settings-section",render:e=>(0,j.jsx)(f().A,{...e,topBorder:!0}),items:[{key:"github-settings",action:()=>{z&&((0,x().u4)({environment:N,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"open_settings",integration_type:"github",setup_session_id:C().o.state.sessionId,from:C().o.state.analyticsFrom}}}),C().o.setState({...C().o.state,currentScreen:"settings"}),null==k||k.close())},render:e=>(0,j.jsx)(h().A,{...e,title:(0,j.jsxs)(b().Ye,{gap:4,children:[(0,j.jsx)("div",{style:_.iconWrapper,children:(0,r().B)(_.icon)}),(0,j.jsx)("div",{style:_.option,children:(0,j.jsx)("div",{style:_.optionLabel,children:(0,j.jsx)(d().sA,{id:"githubAIConnector.settings",defaultMessage:"Settings"})})})]})})}]}),T.isDisconnecting){for(;O.length>0;)O.pop();O.push({key:"github-disconnecting-section",render:e=>(0,j.jsx)(f().A,{...e,topBorder:!0}),items:[{key:"github-disconnecting",action:()=>{},render:e=>(0,j.jsx)(h().A,{...e,disabled:!0,title:(0,j.jsxs)(b().Ye,{gap:4,children:[(0,j.jsx)("div",{style:_.iconWrapper,children:(0,c().I)(_.icon)}),(0,j.jsxs)("div",{style:_.option,children:[(0,j.jsx)("div",{style:_.optionLabel,children:(0,j.jsx)(d().sA,{id:"githubAIConnector.disconnecting",defaultMessage:"Disconnecting..."})}),(0,j.jsx)("div",{style:_.caption,children:(0,j.jsx)(d().sA,{id:"githubAIConnector.disconnectingCaption",defaultMessage:"This can take up to 3 hours."})})]})]})})}]})}return(0,j.jsx)(m().A,{menuType:A().gu.Popup,width:220,children:(0,j.jsx)(v().Ay,{type:v().Oh.Vertical,sections:O,initialFocus:void 0})})}}}]);