"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[96385],{10123:(e,t,n)=>{n.d(t,{A:()=>r});var i=()=>n(570551);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e){(0,i().A)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===o(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},30469:(e,t,n)=>{n.d(t,{q:()=>a});var i=n(296540),o=()=>n(56366),r=()=>n(273923);function a(){var e;const t=null===(e=(0,i.useContext)(r().R))||void 0===e?void 0:e.sizeStore;return(0,o().K8)((()=>null==t?void 0:t.getState()),[t])}},135428:(e,t,n)=>{n.d(t,{Vj:()=>a,ax:()=>l});n(898992),n(354520),n(581454),n(737550);var i=()=>n(244641);const o="–",r=" ";function a(e){let{start:t,end:n,locale:a,timeZone:s}=e;const c=i().c9.fromISO(t),d=i().c9.fromISO(n),u=function(e){let{start:t,end:n}=e;const i=n.diff(t);if(i.as("hours")>12)return!0;const o=t.hour<12,r=n.hour<12;return o!==r}({start:c,end:d}),m=l({time:c,showAmPm:u,locale:a,timeZone:s}),g=l({time:d,showAmPm:!0,locale:a,timeZone:s});return`${m}${r}${o}${r}${g}`}function l(e){let{time:t,showAmPm:n,locale:o,timeZone:a}=e;const l=function(e){return i().c9.fromObject({hour:13}).setLocale(e).toLocaleParts(i().c9.TIME_SIMPLE).some((e=>"dayPeriod"===e.type))}(o),s=0!==t.minute||!l,c={...i().c9.TIME_SIMPLE,hour:"numeric",minute:s?"2-digit":void 0,timeZone:a};return l&&!n?t.setLocale(o).toLocaleParts(c).filter((e=>"dayPeriod"!==e.type)).map((e=>e.value.trim())).join(""):t.toLocaleString({...c,hour12:l},{locale:o}).replace(" ",r)}},194188:(e,t,n)=>{function i(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.d(t,{A:()=>i})},196459:(e,t,n)=>{n.d(t,{O:()=>A});n(898992),n(354520);var i=()=>n(244641),o=n(296540),r=()=>n(484714),a=()=>n(56366),l=()=>n(187174),s=()=>n(496603),c=()=>n(534177),d=()=>n(767525),u=()=>n(838924),m=()=>n(351360),g=()=>n(573985);n(823215);function h(e){if(0===e.length)return!0;const t=e[0];return e.every((e=>void 0!==e&&e===t))}var v=()=>n(185984),p=()=>n(307750),f=()=>n(158751),y=()=>n(823115),x=()=>n(377515),C=()=>n(379560),S=()=>n(677169);const b=1e4;function A(){var e;const t=(0,r().v3)(),n=(0,S().m)(),{timeZone:A}=(0,d().mn)(),w=(0,u().s5)(),[I,T]=o.useState(0),[k,M]=o.useState(!0),D=(0,o.useMemo)((()=>(0,s().sg)((()=>{T((e=>e+1)),M(!1),setTimeout((()=>M(!0)),b)}),1e3,{leading:!0,trailing:!1})),[]),{currentSpaceViewStore:E,currentSpaceStore:W}=(0,a().K8)((()=>({currentSpaceViewStore:m().default.state.currentSpaceViewStore,currentSpaceStore:m().default.state.currentSpaceStore})),[]),L=(0,a().K8)((()=>void 0!==C().A.getStateForCurrentSpaceView()),[]),R=(0,a().K8)((()=>{var e,i;const{botSpaceId:o,botUserId:r}=n,a=null==E?void 0:E.getSpaceId(),l=null==E?void 0:E.getUserId(),s=null==W?void 0:W.id,c=null===(e=m().default.state.currentUserStore)||void 0===e?void 0:e.id,d=null===(i=t.currentUser)||void 0===i?void 0:i.id;return h([o,a,s])&&h([r,l,c,d])}),[n,null==W?void 0:W.id,E,null===(e=t.currentUser)||void 0===e?void 0:e.id]),P=o.useRef(void 0),[U]=(0,l().Yb)((async()=>{const e=n.botId;if(!R||!E)return"appNotSynced";if(!e)return n.loading||(0,g().F8)(),"noConnectedBot";const i=await(0,g().qq)({environment:t,currentSpaceViewStore:E,botId:e,forceRefetch:!1,timeRange:(0,f().M)(),reason:"foreground_load"}),o=!P.current,r=P.current&&(P.current.spaceViewId!==E.id||P.current.botId!==e);switch("skipped"===i&&(o||r)&&j({environment:t,currentSpaceViewStore:E,botId:e,forceRefetch:!0,timeRange:(0,f().M)(),updateMethod:"replace",reason:"background_load"}),P.current={spaceViewId:E.id,botId:e},i){case"success":case"skipped":return"loadCompleted";case"failure":return"loadError";default:(0,c().HB)(i)}}),[R,n.botId,n.loading,E,t,I]),{days:N,numDaysWithEvents:B}=(0,a().K8)((()=>{const e=n.botId;if(!e||"resolved"!==U.status||!L||!E)return{days:[],numDaysWithEvents:0};const{timeMin:t,timeMax:o}=(0,f().iI)(),r=(0,p().g2)({events:C().A.getEvents(),calendars:C().A.getCalendarMap(),startDate:i().c9.fromMillis(t,{zone:A}),endDateInclusive:i().c9.fromMillis(o,{zone:A}),getCalendarVisibility:t=>(0,x().Pj)({spaceViewStore:E,botId:e,calendar:t}),eventFilters:{all_day_events:(0,v().E)("all_day_events"),events_without_participants:(0,v().E)("events_without_participants"),events_without_location:(0,v().E)("events_without_location")},timeZone:A});let a=0;return{days:r.filter((e=>{const t=e.allDayEvents.length>0||e.timedEvents.length>0;return t&&a++,t||(0,y().cK)(e.date,w)})),numDaysWithEvents:a}}),[n.botId,U.status,L,E,w,A]);return{isRetryEventLoadingEnabled:k,retryEventLoading:D,eventsLoadingState:U,days:N,numDaysWithEvents:B}}const j=(0,s().sg)(g().qq,1e4,{leading:!0,trailing:!0})},296060:(e,t,n)=>{n.d(t,{a:()=>i});const i=(0,n(296540).createContext)({panelState:void 0});i.displayName="CalendarAnalyticsContext"},338931:(e,t,n)=>{n.d(t,{Gj:()=>o,RN:()=>l,vZ:()=>r});n(944114),n(898992),n(823215),n(354520),n(672577);var i=()=>n(244641);function o(e){const t=i().c9.fromMillis(e.startUnixTimestampMS),n=e.endUnixTimestampMS?i().c9.fromMillis(e.endUnixTimestampMS):void 0,o=i().c9.fromMillis(e.startOfWeekUnixTimestampMS),r=i().c9.fromMillis(e.endOfWeekUnixTimestampMS),a=t.startOf("day"),l=i().c9.max(o,a),s=Math.ceil(l.diff(o,"days").get("days"));let c=1;if(n){const e=n.endOf("day"),t=i().c9.min(r,e);c=Math.ceil(t.diff(l,"days").get("days"))}return{start:t,end:n,startOfWeek:o,endOfWeek:r,startColumn:s,columnCount:c}}function r(e){const t=(e.attendees||[]).filter((e=>!e.self&&!e.resource));return e.hasParticipants&&t.length>0&&t.every((e=>"declined"===e.responseStatus))}const a={upcomingMinsThreshold:10,startingMinsThreshold:5,startedMinsThreshold:15};function l(e){const t=e.filter((e=>{var t;if(!e.conferencing)return!1;return!function(e){if("declined"===e)return!0;return!1}((null===(t=e.attendees)||void 0===t?void 0:t.find((e=>e.self)))?e.responseStatus??"accepted":"accepted")&&!e.isAllDay}));if(0===t.length)return;const{upcomingMinsThreshold:n,startingMinsThreshold:o,startedMinsThreshold:r}=a,l=[],c=[],d=[],u=[],m=[];for(const a of t){if(a.isAllDay)continue;const e=s(a),t=i().c9.now(),g=e.start.diff(t,"minutes").minutes;g>=0&&g<=n?l.push(a):-g>=o?d.push(a):-g>=r?u.push(a):e.contains(t)?c.push(a):m.push(a)}return[...l,...d,...u,...c,...m][0]}function s(e){const t=i().c9.fromISO(e.start.dateTime,{zone:e.start.timeZone}),n=i().c9.fromISO(e.end.dateTime,{zone:e.end.timeZone});return i().IX.fromDateTimes(t,n)}},392998:(e,t,n)=>{n.d(t,{A:()=>a});var i=()=>n(194188),o=()=>n(10123),r=()=>n(570551);function a(e,t){(0,r().A)(2,arguments);var n=(0,o().A)(e),a=(0,i().A)(t);return isNaN(a)?new Date(NaN):a?(n.setDate(n.getDate()+a),n):n}},401826:(e,t,n)=>{n.d(t,{U:()=>o});n(296540);var i=n(474848);const o=(0,n(340498).wt)("zoomLogo",{viewBox:"0 0 13 9",svg:(0,i.jsx)("path",{d:"M1.94727 8.49316C1.42318 8.49316 1.01628 8.35645 0.726562 8.08301C0.440104 7.81283 0.296875 7.41895 0.296875 6.90137V2.07227C0.296875 1.55794 0.444987 1.16081 0.741211 0.880859C1.04069 0.597656 1.44271 0.456055 1.94727 0.456055H7.13281C7.6569 0.456055 8.05566 0.597656 8.3291 0.880859C8.60579 1.16081 8.74414 1.55794 8.74414 2.07227V6.87695C8.74414 7.39128 8.59928 7.78841 8.30957 8.06836C8.02311 8.35156 7.61784 8.49316 7.09375 8.49316H1.94727ZM9.45703 6.03223V2.93164L11.1367 1.49121C11.2376 1.40332 11.3385 1.33496 11.4395 1.28613C11.5436 1.23405 11.6462 1.20801 11.7471 1.20801C11.9456 1.20801 12.1068 1.27311 12.2305 1.40332C12.3542 1.53027 12.416 1.70117 12.416 1.91602V7.05273C12.416 7.26758 12.3542 7.4401 12.2305 7.57031C12.1068 7.70052 11.9456 7.76562 11.7471 7.76562C11.6462 7.76562 11.5436 7.73958 11.4395 7.6875C11.3353 7.63542 11.2344 7.56706 11.1367 7.48242L9.45703 6.03223Z"})})},570551:(e,t,n)=>{function i(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{A:()=>i})},631818:(e,t,n)=>{n.d(t,{A:()=>N,x:()=>U});n(581454);var i=n(296540),o=()=>n(484714),r=()=>n(56366),a=()=>n(401497),l=()=>n(584262),s=()=>n(657222),c=()=>n(861017),d=()=>n(179034),u=()=>n(959013),m=()=>n(284371),g=()=>n(755636),h=()=>n(281948),v=()=>n(768407),p=()=>n(493823),f=()=>n(406699),y=()=>n(928600),x=()=>n(939740),C=()=>n(614505),S=()=>n(16006),b=()=>n(89924),A=()=>n(780054),j=()=>n(886680),w=()=>n(722872),I=()=>n(962730),T=()=>n(351360),k=()=>n(630116),M=n(474848);const D=4,E=4,W={height:20,paddingTop:2,paddingBottom:2,marginTop:-2,marginBottom:-2,paddingLeft:4,paddingRight:4,marginLeft:-D,marginRight:-E};function L(e){let{event:t,onClick:n}=e;const i=(0,o().v3)(),r=(0,a().IS)((()=>({container:{display:"flex",flexDirection:"row",justifyItems:"center",width:"fit-content",maxWidth:"100%",gap:6}})),[]),{attachments:l}=t,[s,...d]=function(e){let{environment:t,attachments:n}=e;if(!n)return[];const i=n.findIndex((e=>"page"===(0,c().parseRoute)({url:e.fileUrl,isMobile:t.device.isMobile,baseUrl:A().A.domainBaseUrl,publicDomainName:A().A.publicDomainName,protocol:A().A.protocol,currentUrl:window.location.href}).name));if(-1===i)return n;return[n[i],...n.slice(0,i),...n.slice(i+1)]}({environment:i,attachments:l});return l&&s?(0,M.jsxs)("div",{style:r.container,children:[(0,M.jsx)(R,{attachment:s,attachmentIndex:0,onClick:n}),(0,M.jsx)(P,{attachments:d,onClickAttachment:n})]}):null}function R(e){let{attachment:t,attachmentIndex:n,menuListItemProps:c,onClick:d}=e;const{fileUrl:u,iconLink:f}=t,y=0===n,x=(0,a().IS)((e=>({button:{gap:4,flexShrink:1,...y?{maxWidth:`calc(100% + ${D+E}px)`}:{width:"100%"},...y&&W},title:{...y?{...(0,j().w_)(e),fontWeight:m().Wy.medium}:{maxWidth:200},...m().RC},icon:{height:16},linkIcon:{height:16,width:16,fill:e.mediumIconColor}})),[y]),b=(0,o().v3)(),A=(0,r().K8)((()=>{const{currentSpaceStore:e}=T().default.state;return U({environment:b,fileUrl:u,currentSpaceStore:e})}),[b,u]),w=(0,r().K8)((()=>{const e=null==A?void 0:A.getIcon();return A&&e?(0,M.jsx)(C().A,{icon:e,isEmptyPage:A.isEmptyPage(),size:16,disabled:!0}):f?(0,M.jsx)("img",{style:x.icon,src:f,alt:`Icon image for the Notion calendar event attachment entitled "${t.title}"`}):(0,s().w)(x.linkIcon)}),[t.title,A,f,x.icon,x.linkIcon]),I=A?(0,M.jsx)(S().A,{store:A,underline:y}):(0,M.jsx)("div",{style:x.title,children:t.title?t.title:(0,M.jsx)(v().lj,{textValue:[[t.fileUrl]]})}),k=(0,i.useCallback)((e=>{if(e.preventDefault(),!u)return;d({index:n,attachmentType:A?"notion":"other",attachmentBlockId:null==A?void 0:A.id});const t=e.metaKey||e.ctrlKey;A?h().VU({environment:b,openInNew:t?"tab":void 0,store:A,pageVisitSource:l().y8.PersonalHomeCalendarAttachment,peekMode:"center_peek",resultsStore:void 0,collectionContextStore:void 0}):g().f({environment:b,url:u})}),[n,A,b,u,d]);return(0,M.jsxs)(p().p,{style:x.button,href:u,metaHref:u,...c,onClick:k,children:[w,I]})}function P(e){let{attachments:t,onClickAttachment:n}=e;const i=(0,o().WS)(),r=(0,a().IS)((e=>({button:{color:e.mediumTextColor,...W,marginRight:0},sectionMenuItem:{display:"flex",flexDirection:"column",padding:4,width:"100%"}})),[]);return t&&0!==t.length?(0,M.jsx)(f().Ay,{alignmentToOrigin:I().C.Start,placementToOrigin:I().W.Bottom,renderOrigin:e=>(0,M.jsx)(p().p,{style:r.button,...e,children:(0,M.jsx)(u().sA,{id:"EventCalendarAttachments.plusMoreAttachments",defaultMessage:"+{numRemainingAttachments}",values:{numRemainingAttachments:t.length}})}),popupType:i?f().z7.SlideUp:f().z7.Popup,render:e=>(0,M.jsx)(y().A,{menuType:w().gu.Popup,maxWidth:300,children:(0,M.jsx)(x().Ay,{onAccept:e.close,type:x().Oh.Vertical,sections:[{key:"all",render:e=>(0,M.jsx)(b().A,{...e,style:r.sectionMenuItem}),items:t.map(((e,t)=>({key:e.fileUrl,render:i=>(0,M.jsx)(R,{menuListItemProps:i,attachment:e,attachmentIndex:t+1,onClick:n},e.fileUrl),action:()=>{}})))}],initialFocus:0})})}):(0,M.jsx)(M.Fragment,{})}function U(e){const{environment:t,currentSpaceStore:n}=e;let i=e.fileUrl;if(!n)return;A().A.isLocalhost&&(i=i.replace("dev.notion.so","localhost:3000").replace("https","http"));const o=(0,c().parseRoute)({url:i,isMobile:t.device.isMobile,baseUrl:A().A.domainBaseUrl,publicDomainName:A().A.publicDomainName,protocol:A().A.protocol,currentUrl:window.location.href}),r="page"===o.name?o.blockId:void 0;if(!r)return;const a=k().Bv.createChildStore(n,{table:d().ev,id:r});return a.load(),a.isReady()?a:void 0}const N=i.memo(L)},680784:(e,t,n)=>{n.d(t,{A:()=>te,f:()=>ee});n(898992),n(430670),n(581454);var i=n(296540),o=()=>n(401497),r=()=>n(338931),a=()=>n(838924),l=()=>n(812109),s=()=>n(823115),c=()=>n(665579),d=()=>n(484714),u=()=>n(56366),m=n(474848);const g=(0,n(340498).wt)("boxedCross",{viewBox:"0 0 10 11",svg:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("g",{clipPath:"url(#a)",children:(0,m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 2.5a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-6Zm7.354.646a.5.5 0 0 1 0 .708L5.707 5.5l1.647 1.646a.5.5 0 1 1-.708.708L5 6.207 3.354 7.854a.5.5 0 1 1-.708-.708L4.293 5.5 2.646 3.854a.5.5 0 1 1 .708-.708L5 4.793l1.646-1.647a.5.5 0 0 1 .708 0Z"})}),(0,m.jsx)("defs",{children:(0,m.jsx)("clipPath",{id:"a",children:(0,m.jsx)("path",{transform:"translate(0 .5)",d:"M0 0h10v10H0z"})})})]})});var h=()=>n(693954),v=()=>n(959013),p=()=>n(751735),f=()=>n(100622),y=()=>n(284371),x=()=>n(125565),C=()=>n(767525),S=()=>n(115512),b=()=>n(645200),A=()=>n(689950),j=(n(354520),()=>n(972435)),w=()=>n(135428);const I=(0,v().YK)({code:{id:"notionCalendarEvent.conferencingCode",defaultMessage:"Code"},room:{id:"notionCalendarEvent.conferencingRoom",defaultMessage:"Room"},number:{id:"notionCalendarEvent.conferencingNumber",defaultMessage:"Number"},id:{id:"notionCalendarEvent.conferencingId",defaultMessage:"ID"}}),T=", ",k=" ⸱ ";function M(e){var t;let{event:n,intl:i,timeZone:o,isOnSameLineAsTitle:r}=e;const a=[n.isAllDay?void 0:(0,w().Vj)({start:n.start.dateTime,end:n.end.dateTime,locale:i.locale,timeZone:o}),[function(e){let{location:t,conferencingURL:n}=e;if(!n||!t)return t;return t.split(T).filter((e=>e!==n)).join(T)}({location:n.location,conferencingURL:null===(t=n.conferencing)||void 0===t?void 0:t.url}),D(n)].filter(Boolean).join(T)||void 0].filter(Boolean).join(k);return r&&a?`${k}${a}`:a}function D(e){const t=e.conferencing;if(t&&t.id)return[t.providerDisplayName,j().A.formatMessage(I[t.idType]),t.id].filter(Boolean).join(" ")}var E=()=>n(30469),W=()=>n(631818),L=()=>n(534177);const R=4,P=10;function U(e){let{event:t,squashedEventIndex:i,titleStartY:a,titleEndY:l}=e;const s=(0,u().K8)((()=>{if("emptyTodayEventPlaceholder"===t)return;const e=n(379560).A.getCalendar(t);return null==e?void 0:e.color}),[t]),c=(0,o().IS)((e=>{const o={background:e.calendarHomeWidget.base.gray},c="emptyTodayEventPlaceholder"===t?o:function(e){let{event:t,eventIndex:n,color:i,titleStartY:o,titleEndY:a}=e;const l=function(e){let{event:t,color:n}=e;const i=(0,p().X4)(n,t.isAllDay?.2:.1),o=`\n\t\trepeating-linear-gradient(\n\t\t\t-45deg,\n\t\t\t${n},\n\t\t\t${n} 2px,\n\t\t\t${i} 2px,\n\t\t\t${i} ${t.isAllDay?3.5:4}px\n\t\t)`;if("outOfOffice"===t.eventType)return{background:i};switch(t.responseStatus){case"accepted":return{background:(0,r().vZ)(t)?o:n};case"tentative":return{background:o};case"needsAction":return{border:`1px dashed ${n}`,background:i};case"declined":return{background:i};case void 0:return{background:t.hasParticipants?i:n};default:(0,L().HB)(t.responseStatus)}}({event:t,color:i});if(!t.isAllDay)return l;const s=`radial-gradient(\n\t\tcircle ${P}px at ${-(z-1.5)}px ${P/2}px,\n\t\ttransparent ${(P+1)/2}px,\n\t\tpurple 0\n\t)`;return{borderRadius:"50%",marginTop:(a-o-P)/2,alignSelf:"flex-Start",marginLeft:(R-P)/2,marginRight:(R-P)/2,width:P,height:P,background:i,...0!==n&&{WebkitMaskImage:s,maskImage:s},...l}}({event:t,eventIndex:i,color:(0,n(569243).Sk)({theme:e,calendarColor:s,eventColor:t.color}),titleStartY:a,titleEndY:l});return{container:{width:R,borderRadius:3,...c}}}),[s,t,i,l,a]);return s||"emptyTodayEventPlaceholder"===t?(0,m.jsx)("div",{style:c.container}):null}const N=i.memo(U);var B=()=>n(401826),O=()=>n(962730);function $(e){var t,r,a;let{event:l,onJoinConferenceClick:s,onCopyConferenceUrlClick:c}=e;const u=(0,d().v3)(),[g,h]=(0,i.useState)(!1),v="wide"===(0,E().q)(),p=(0,o().IS)((e=>{const t="light"===e.mode?f().Ay.blueWithAlpha(.1):f().Ay.blueWithAlpha(.2);return{button:{fontSize:(0,S().ny)(u,"UIRegular"),fontWeight:y().Wy.medium,color:e.blueColor,background:t,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:4,lineHeight:1.2,height:28,padding:8,marginLeft:12},hoveredStyle:{background:"light"===e.mode?f().Ay.blueWithAlpha(.2):f().Ay.blueWithAlpha(.3)},tooltipContainer:{padding:0},tooltip:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:6,height:26,background:e.buttonHoveredBackground,fontWeight:y().Wy.regular,cursor:"pointer"},url:{margin:4,marginLeft:8,marginRight:2},copyIconContainer:{margin:4,marginRight:8,marginLeft:2},copyIcon:{height:13,width:11},zoomLogoIcon:{fill:e.blueColor,width:16,height:16,marginRight:4},divider:{height:"100%",borderWidth:1,borderColor:f().Ay.whiteWithAlpha(.5)}}}),[u]),x=(0,i.useCallback)((async()=>{var e;null!==(e=l.conferencing)&&void 0!==e&&e.url&&(s(),"zoom"===l.conferencing.providerName&&await b().cs({environment:u,url:l.conferencing.url})||n(755636).f({environment:u,url:l.conferencing.url}))}),[u,null===(t=l.conferencing)||void 0===t?void 0:t.providerName,null===(r=l.conferencing)||void 0===r?void 0:r.url,s]),C=(0,i.useCallback)((async()=>{var e;if(null===(e=l.conferencing)||void 0===e||!e.url)return;const t=await n(884107).R.clipboardActions.load();t.copyString({environment:u,stringValue:l.conferencing.url,copiedMessage:t.clipboardMessages.copiedLinkToClipboard}),h(!1),c()}),[u,null===(a=l.conferencing)||void 0===a?void 0:a.url,c]);if(!(0,L().O9)(l.conferencing))return(0,m.jsx)(m.Fragment,{});const{providerName:A,url:j,providerDisplayName:w}=l.conferencing,{domain:I,restOfUrl:T=""}=(0,n(886680).Kc)([[j]]),k=T.length>10?`${I}${T.slice(0,5)}…${T.slice(-6)}`:`${I}${T}`;return(0,m.jsx)(n(859428).A,{allowHover:!0,delayThreshold:500,closeDelay:200,originGap:6,placement:O().W.Top,alignment:O().C.End,style:p.tooltipContainer,forceVisibleState:!!g||void 0,renderTooltip:()=>(0,m.jsxs)("div",{style:p.tooltip,onClick:C,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[(0,m.jsx)("div",{style:p.url,children:k}),(0,m.jsx)(n(802790).A,{size:1,vertical:!0,innerStyle:p.divider}),(0,m.jsx)("div",{style:p.copyIconContainer,children:(0,n(925907).n)(p.copyIcon)})]}),render:e=>(0,m.jsxs)(n(197190).A,{style:p.button,hoveredStyle:p.hoveredStyle,onClick:x,...e,children:[V(A)(p.zoomLogoIcon),_({providerDisplayName:w,isWideTile:v})]})})}function _(e){let{providerDisplayName:t,isWideTile:n}=e;return n?t?(0,m.jsx)(v().sA,{id:"notionCalendarEvent.joinButtonWithProviderWithMeeting",defaultMessage:"Join {providerDisplayName} meeting",values:{providerDisplayName:t}}):(0,m.jsx)(v().sA,{id:"notionCalendarEvent.joinButtonWithMeeting",defaultMessage:"Join meeting"}):t?(0,m.jsx)(v().sA,{id:"notionCalendarEvent.joinButtonWithProvider",defaultMessage:"Join {providerDisplayName}",values:{providerDisplayName:t}}):(0,m.jsx)(v().sA,{id:"notionCalendarEvent.joinButton",defaultMessage:"Join"})}function V(e){switch(e){case"zoom":case"googleMeet":case"around":case"blueJeans":case"customConferencing":case"doxyMe":case"googleDuo":case"microsoftTeams":case"skype":case"vowel":case"webex":case"whereby":case void 0:return B().U;default:return(0,L().ub)(e),B().U}}const Z=i.memo($),z=2,F=4,H=20;function Y(e){var t;let{event:n,onAttachmentClick:i}=e;const r="narrow"===(0,E().q)(),a=n.isAllDay&&!r,l=(0,v().tz)(),{timeZone:s}=(0,C().mn)(),c=(null===(t=n.attachments)||void 0===t?void 0:t.length)??!1,d=M({event:n,intl:l,timeZone:s,isOnSameLineAsTitle:a}),u=!c&&n.isAllDay,g=(0,o().IS)((()=>({singleLineNameAndTimeContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",maxWidth:"100%",gap:4},nameTimeAndAttachmentsContainer:{display:"flex",flexDirection:"column",justifyContent:"start",maxWidth:"100%",minWidth:0,flexShrink:1,gap:u?0:2,marginTop:F,marginBottom:F,overflow:"hidden"}})),[u]),h=(0,m.jsx)(K,{event:n}),p=d?(0,m.jsx)(q,{height:u?void 0:H,timeString:d,isSmall:!a}):(0,m.jsx)(m.Fragment,{}),f=(0,m.jsx)(W().A,{event:n,onClick:i});return(0,m.jsx)("div",{style:g.nameTimeAndAttachmentsContainer,children:a?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{style:g.singleLineNameAndTimeContainer,children:[h,p]}),f]}):(0,m.jsxs)(m.Fragment,{children:[h,f,p]})})}function K(e){let{event:t}=e,n=t.summary;n||"private"!==t.visibility||(n=(0,m.jsx)(v().sA,{id:"notionCalendarEvent.privateEvent.title",defaultMessage:"Busy"}));const i=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"row",maxWidth:"100%",alignItems:"center",height:H,gap:6},title:{fontWeight:y().Wy.medium,...y().RC},warningIcon:{fill:e.grayButtonBackground,width:12,marginTop:1},boxedCrossIcon:{fill:e.grayButtonBackground,width:10.5,marginTop:.5}})),[]),a=(0,r().vZ)(t),l="outOfOffice"===t.eventType;return n?(0,m.jsxs)("div",{style:i.container,children:[a&&(0,h().Q)(i.warningIcon),l&&g(i.boxedCrossIcon),(0,m.jsx)(x().A,{style:i.title,children:n})]}):null}function q(e){let{timeString:t,height:n,isSmall:i}=e;const r=(0,o().IS)((()=>({textContainer:{height:n,display:"flex",alignItems:"center",justifyContent:"flex-start",overflow:"hidden"},timeAndLocationText:y().RC})),[n]);return(0,m.jsx)("div",{style:r.textContainer,children:(0,m.jsx)(x().A,{style:r.timeAndLocationText,isSmall:i,isSecondaryColor:!i,children:t})})}const J=function(e){var t,r;let{event:a,date:s,allSquashedEvents:g=[],isFirstEvent:h=!0,isLastEvent:x=!0,isUpcomingEvent:C=!1,eventToAnalyticsStateStore:j}=e;const w=(0,d().v3)(),[I,T]=(0,i.useState)(!1),k="emptyTodayEventPlaceholder"!==a&&Boolean(null===(t=a.conferencing)||void 0===t?void 0:t.url),M=null===(r=(0,i.useContext)(n(296060).a))||void 0===r?void 0:r.panelState,D="emptyTodayEventPlaceholder"!==a&&a.isAllDay,E=(0,i.useCallback)((()=>{T(!0)}),[T]),W=(0,i.useCallback)((()=>{T(!1)}),[T]),L=C||k&&I,R=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"row",alignContent:"stretch",overflow:"hidden",paddingLeft:4,paddingRight:c().YS,...D&&{paddingLeft:8}},wrapperDivStyle:{...D?{marginLeft:-4,width:"calc(100% + 4px)"}:{paddingTop:h?0:3,paddingBottom:x?0:3,width:"100%"},height:"unset"},colorLabelContainer:{display:"flex",height:"100%",justifyContent:"flex-end",gap:D?z:2,paddingTop:4,paddingBottom:4},eventDetailsContainer:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginLeft:12,minWidth:0,minHeight:28},emptyPlaceholderContainer:{display:"flex",flexDirection:"column",justifyContent:"center",height:40,color:e.lightTextColor,fontSize:(0,S().ny)(w,"UIRegular"),fontWeight:y().Wy.regular,...y().RC},title:{fontWeight:510,color:e.text.primary},hoveredContainer:{background:"light"===e.mode?(0,p().X4)(f().CM.light.darkgray,.05):f().XA.dark.gray[300]},joinButtonContainer:{display:"flex",alignItems:"center"}})),[w,D,h,x]),P=(0,u().K8)((()=>n(351360).default.state.currentSpaceStore),[]),[U]=(0,n(187174).Yb)((async()=>"emptyTodayEventPlaceholder"===a?void 0:await(0,b().lq)({environment:w,baseUrl:a.url,spaceStore:P,collectionViewStore:void 0,from:"homeEventClick"})),[P,w,a]),B=function(e){let{date:t,event:n,eventToAnalyticsStateStore:o,panelState:r}=e;return(0,i.useCallback)((()=>{if("emptyTodayEventPlaceholder"===n)return;if(!t)return;const{eventIndex:e,numDaysFromToday:i}=(null==o?void 0:o.state[ee({event:n,date:t})])??{};return{eventContext:(0,A().IU)({event:n,eventIndex:e??-1,numDaysInFuture:i??-1}),calendarPanelContext:(0,A().sp)(r)}}),[t,n,o,r])}({date:s,event:a,eventToAnalyticsStateStore:j,panelState:M}),O=(0,i.useCallback)((e=>{const t=null==U?void 0:U.value;if("emptyTodayEventPlaceholder"===a||!t)return;const n=B();n&&(0,A().np)({environment:w,target:"body",...n}),(0,b().J7)({environment:w,url:t,from:"homeEventClick"})}),[w,a,B,null==U?void 0:U.value]),$=(0,i.useCallback)((e=>{const t=B();t&&(0,A().G7)({...t,environment:w,attachmentIndex:e.index,notionBlockId:e.attachmentBlockId,attachmentType:e.attachmentType})}),[w,B]),_=(0,i.useCallback)((()=>{const e=B();e&&(0,A().np)({environment:w,target:"conferencing",...e})}),[w,B]),V=(0,i.useCallback)((()=>{const e=B();e&&(0,A().np)({environment:w,target:"copy_conferencing_link",...e})}),[w,B]);return(0,m.jsxs)(n(493823).p,{style:R.container,onClick:O,onMouseEnter:E,onMouseLeave:W,disabled:"emptyTodayEventPlaceholder"===a||!(null!=U&&U.value),wrapperDivStyle:R.wrapperDivStyle,hoveredStyle:R.hoveredContainer,children:[(0,m.jsx)("div",{style:R.colorLabelContainer,children:(0===g.length?[a]:g).map(((e,t)=>(0,m.jsx)(N,{event:e,squashedEventIndex:t,titleStartY:F,titleEndY:F+H},"emptyTodayEventPlaceholder"===e?e:(0,l().z)(e))))}),(0,m.jsx)("div",{style:R.eventDetailsContainer,children:"emptyTodayEventPlaceholder"===a?(0,m.jsx)("div",{style:R.emptyPlaceholderContainer,children:(0,m.jsx)(v().sA,{id:"notionCalendarEvent.emptyTodayPlaceholder",defaultMessage:"No more events"})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Y,{event:a,onAttachmentClick:$}),L&&(0,m.jsx)("div",{style:R.joinButtonContainer,children:(0,m.jsx)(Z,{event:a,onJoinConferenceClick:_,onCopyConferenceUrlClick:V})})]})})]})};function G(e){let{date:t}=e;const n=(0,v().tz)(),i="wide"===(0,E().q)(),r=(0,a().s5)(),l=(0,s().cK)(t,r),c=new Date(t).toLocaleDateString(n.locale,{weekday:i?"long":"short",timeZone:"UTC"}),d=new Date(t).toLocaleDateString(n.locale,{month:i?"long":"short",day:"numeric",timeZone:"UTC"}),u=(0,o().IS)((e=>{const t={color:l?e.text.uiRedPrimary:e.lightTextColor,fontWeight:y().Wy.medium,maxWidth:"100%",...y().RC};return{dateContainer:{display:"flex",alignItems:"start",overflow:"hidden",...i?{flexDirection:"row",minWidth:148,maxWidth:200,paddingRight:16,gap:4,flexWrap:"wrap"}:{flexDirection:"column",maxWidth:94,paddingRight:16,gap:0},paddingLeft:8},dayOfWeekString:{...t,flexShrink:0},dateString:t}}),[l,i]),g=l?(0,m.jsx)(v().sA,{id:"notionCalendarEventDate.today",defaultMessage:"Today"}):c;return(0,m.jsxs)("div",{style:u.dateContainer,children:[(0,m.jsx)(x().A,{isSmall:!0,showTooltipWhenTruncated:!0,style:u.dayOfWeekString,children:g}),(0,m.jsx)(x().A,{isSmall:!0,showTooltipWhenTruncated:!0,style:u.dateString,children:d})]})}const X=i.memo(G);function Q(e){let{days:t,eventToAnalyticsStateStore:i}=e;const l=(0,a().s5)(),d=(0,o().IS)((e=>({container:{display:"grid",gridTemplateColumns:"[days] min-content [events] auto",rowGap:16,paddingBottom:12,paddingTop:3,alignItems:"start"},dateFullHeightContainer:{height:"100%"},dateStickyContainer:{position:"sticky",top:3,paddingTop:5},eventListContainer:{display:"flex",flexDirection:"column",height:"100%",alignItems:"start",paddingRight:c().YS,overflow:"hidden",marginLeft:-4,paddingLeft:4}})),[]);return(0,m.jsx)("div",{style:d.container,children:null==t?void 0:t.flatMap((e=>{const t=(0,n(307750).Om)(e),o=(0,s().cK)(e.date,l),a=o?(0,r().RN)(e.timedEvents.map((e=>e.baseEvent))):void 0;return[(0,m.jsx)("div",{style:d.dateFullHeightContainer,children:(0,m.jsx)("div",{style:d.dateStickyContainer,children:(0,m.jsx)(X,{date:e.date})})},`date_${e.date}`),(0,m.jsxs)("div",{style:d.eventListContainer,children:[0===t.length&&o&&(0,m.jsx)(J,{event:"emptyTodayEventPlaceholder"}),t.map(((n,o)=>{let{baseEvent:r,allSquashedEvents:l}=n;return(0,m.jsx)(J,{date:e.date,eventToAnalyticsStateStore:i,isFirstEvent:0===o,isLastEvent:o===t.length-1,isUpcomingEvent:(null==a?void 0:a.id)===r.id,event:r,allSquashedEvents:l},ee({event:r,date:e.date}))}))]},`events_${e.date}`)]}))})}function ee(e){let{event:t,date:n}=e;return`${t.isAllDay}-${(0,l().z)(t)}-${n}`}const te=i.memo(Q)},851775:(e,t,n)=>{n.d(t,{A:()=>a});var i=()=>n(194188),o=()=>n(10123),r=()=>n(570551);function a(e,t){(0,r().A)(2,arguments);var n=(0,o().A)(e),a=(0,i().A)(t),l=n.getFullYear(),s=n.getDate(),c=new Date(0);c.setFullYear(l,a,15),c.setHours(0,0,0,0);var d=function(e){(0,r().A)(1,arguments);var t=(0,o().A)(e),n=t.getFullYear(),i=t.getMonth(),a=new Date(0);return a.setFullYear(n,i+1,0),a.setHours(0,0,0,0),a.getDate()}(c);return n.setMonth(a,Math.min(s,d)),n}}}]);