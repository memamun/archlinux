"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[19596],{73223:(n,e,i)=>{i.r(e),i.d(e,{dismissTutorial:()=>c,resetTutorials:()=>u,tutorialAdvanceToStep:()=>g,tutorialAdvanceToStepAfter:()=>m,tutorialGoToNextStep:()=>d,tutorialGoToPrevStep:()=>l});var t=()=>i(541235),o=()=>i(317909),a=()=>i(755199),r=()=>i(739135),s=()=>i(351360);function d(n,e){var i;const{currentUserSettingsStore:t}=s().default.state;if(!t)return;const o=null===(i=t.getSettings())||void 0===i?void 0:i.tutorials;f({userAction:"TutorialActions.nextStep",environment:n,perform:n=>{a().mJ({userSettingsStore:t,transaction:n,data:{tutorials:{...o,[e]:(0,r().i9)(t,e)}}})},userId:t.id})}function l(n,e){var i;const{currentUserSettingsStore:t}=s().default.state;if(!t)return;const o=null===(i=t.getSettings())||void 0===i?void 0:i.tutorials;f({userAction:"TutorialActions.prevStep",environment:n,perform:n=>{a().mJ({userSettingsStore:t,transaction:n,data:{tutorials:{...o,[e]:(0,r().KD)(t,e)}}})},userId:t.id})}function c(n,e){var i;const{currentUserSettingsStore:o}=s().default.state;if(!o)return;const r=null===(i=o.getSettings())||void 0===i?void 0:i.tutorials;f({userAction:"TutorialActions.dismissTutorial",environment:n,perform:n=>{a().mJ({userSettingsStore:o,transaction:n,data:{tutorials:{...r,[e]:t().YD}}})},userId:o.id})}function u(n){const{currentUserSettingsStore:e}=s().default.state;e&&f({userAction:"TutorialActions.resetTutorialsDebug",environment:n,perform:n=>{a().mJ({userSettingsStore:e,transaction:n,data:{tutorials:{}}})},userId:e.id})}function g(n,e,i){var o;const{currentUserSettingsStore:d}=s().default.state;if(!d||(0,r().x$)(d,e))return;const l=(0,r().gt)(d,e);t().c$[e].steps.findIndex((n=>n.id===l))>=t().c$[e].steps.findIndex((n=>n.id===i))||a().mJ({userSettingsStore:d,transaction:n,data:{tutorials:{...null===(o=d.getSettings())||void 0===o?void 0:o.tutorials,[e]:i}}})}function m(n,e,i){if((0,r().ll)(i))return;const t=(0,r().tb)(e,i);t&&g(n,e,t)}function f(n){return o().createAndCommit({...n,canUndo:!1})}},171789:(n,e,i)=>{i.d(e,{A:()=>r});i(898992),i(354520),i(581454);var t=i(296540),o=i(474848);function a(){const[n,e]=(0,t.useReducer)(((n,e)=>{switch(e.type){case"push":return[...n.map((n=>({...n,isAnimatingOut:!0}))),{item:e.item,isAnimatingOut:!1}];case"delete":return n.filter((n=>n.item.key!==e.key));case"clear":return n.map((n=>({...n,isAnimatingOut:!0})));default:return n}}),[]);return(0,t.useEffect)((()=>{const n=new(i(496506).default)((()=>i(666429).Ay.state.currentItem),{debugName:"currentItemStore"});let t=null;function o(){const i=n.state;i&&t!==i.key?(e({type:"push",item:i}),t=i.key):i||e({type:"clear"})}return n.addListener(o),()=>{n.removeListener(o)}}),[]),(0,o.jsx)(i(625325).A,{open:n.length>0,zIndex:201,children:n.map((n=>(0,t.createElement)(s,{...n,key:n.item.key,dispatch:e})))})}const r=t.memo(a),s=t.memo((function(n){let{dispatch:e,isAnimatingOut:a,item:r}=n;const s=(0,i(401497).DP)(),d=(0,i(552871).L)(),l=(0,t.useCallback)((()=>{e({type:"delete",key:r.key})}),[e,r.key]),c=(0,t.useRef)(a);(0,t.useEffect)((()=>{if(!c.current&&a){const n=setTimeout(l,270);return()=>{l(),clearTimeout(n)}}c.current=a}),[a,l]);const u=r.position??"bottom",g="top"===u?{top:24}:{bottom:d};return(0,o.jsx)("div",{style:{...g,position:"fixed",left:0,width:"100%",display:"flex",zIndex:1e6,padding:4,pointerEvents:"none"},children:(0,o.jsxs)("div",{"aria-live":"polite",style:{background:s.tooltipBackground,color:s.text.contrastPrimary,borderRadius:8,padding:"11px 16px",boxShadow:s.shadowLG,margin:"0 auto",fontSize:14,display:"flex",alignItems:"center",pointerEvents:"auto",...r.style,animationName:`snackbar-slide-in-${u}`,animationDuration:"270ms",animationTimingFunction:"ease",transitionProperty:"transform, opacity",transitionDuration:"270ms",transitionTimingFunction:"ease",transform:a?"scale(0.95)":"scale(1)",opacity:a?0:1},onTransitionEnd:a?l:void 0,children:[r.label,r.helpUrl&&(0,o.jsx)(i(296798).A,{href:r.helpUrl,external:!0,style:{marginLeft:8,width:16,height:16,color:s.text.contrastPrimary},children:(0,i(133033).$)({fill:s.text.contrastSecondary})}),(0,o.jsx)("div",{style:{marginLeft:4,marginRight:-4},children:r.right})]})})}))},541235:(n,e,i)=>{i.d(e,{YD:()=>a,c$:()=>t,q_:()=>o});const t={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},o="completed",a="dismissed"},552871:(n,e,i)=>{i.d(e,{L:()=>l});var t=()=>i(484714),o=()=>i(792485),a=()=>i(56366),r=()=>i(986260),s=()=>i(351360),d=()=>i(574012);function l(){const n=(0,t().v3)(),e=(0,t().Y0)(),i=(0,o().S)(),l=(0,a().K8)((()=>{if(!e.isMobileNative||!e.isAndroid)return 0;const{mainEditorCurrentBlockStore:t}=s().default.state;if(!t)return 0;return(0,r().rV)(n,t,null==i?void 0:i.publicEditModeStore.state).shouldShow?48:0}),[n,e,i]);return(0,a().K8)((()=>{if(!e.isMobileNative)return 24;const i=d().A.mobileNativeBottomPadding(n);return 24+l+i}),[n,e.isMobileNative,l])}},689216:(n,e,i)=>{i.d(e,{n:()=>s});var t=()=>i(534177),o=()=>i(901389),a=()=>i(898486),r=()=>i(972435);async function s(n){let{onRequest:e,onSuccess:i}=n;const s=await e();switch(s.type){case"success":i&&await i(s);break;case"failed":o().f1((0,a().Hu)(r().A.getIntl(),s));break;default:(0,t().HB)(s)}}},739135:(n,e,i)=>{i.d(e,{KD:()=>l,gt:()=>c,i9:()=>d,ll:()=>r,tb:()=>s,x$:()=>a});var t=()=>i(541235),o=()=>i(496603);function a(n,e){return r(c(n,e))}function r(n){return void 0!==n&&(n===t().q_||n===t().YD)}function s(n,e){if(r(e))return;const i=t().c$[n],o=i.steps.findIndex((n=>n.id===e));return-1===o?i.steps[0].id:o===i.steps.length-1?t().q_:i.steps[o+1].id}function d(n,e){const i=c(n,e);if(i&&!r(i))return s(e,i)}function l(n,e){const i=c(n,e);if(i)return function(n,e){const i=t().c$[n];var a;if(r(e))return null===(a=(0,o().HV)(i.steps))||void 0===a?void 0:a.id;const s=i.steps.findIndex((n=>n.id===e));return-1!==s&&0!==s?i.steps[s-1].id:void 0}(e,i)}function c(n,e){var i;if(!n)return;const o=((null===(i=n.getSettings())||void 0===i?void 0:i.tutorials)||{})[e];return void 0===o?t().c$[e].steps[0].id:o}},775812:(n,e,i)=>{i.d(e,{A:()=>d});i(296540);var t=()=>i(496603),o=()=>i(383594),a=()=>i(962730),r=()=>i(377586),s=i(474848);const d=function(){const n=(0,i(484714).v3)(),{device:e}=n,o=(0,i(56366).O$)(i(969141).A);return(0,s.jsx)(i(14235).Ay,{popupType:e.isMobile?r().n.SlideUp:r().n.Popup,open:o.isActive,originRect:o.isActive?o.originRect:void 0,originGap:o.isActive?o.originGap:void 0,placementToOrigin:a().W.Bottom,alignmentToOrigin:a().C.Center,preventScaleTransition:!0,onDismiss:l,render:()=>{if(o.isActive)return(0,s.jsx)(i(545805).A,{debugName:"MediaMenu",capture:!0,onUp:t().D_,onDown:t().D_,children:(0,s.jsx)(i(126090).Ay,{...o,onCancel:l})})},trapFocus:!0})};function l(){o().I()}},794043:(n,e,i)=>{i.r(e),i.d(e,{OrganizationSettingsConsole:()=>Xn,Redirect:()=>ee});i(898992),i(672577),i(581454);var t=i(296540),o=()=>i(484714),a=()=>i(852507),r=()=>i(56366),s=()=>i(427704),d=()=>i(734459),l=()=>i(713996),c=()=>i(435009),u=()=>i(351360),g=()=>i(534177),m=()=>i(555267),f=()=>i(625319),p=(i(18107),i(967357),i(354520),()=>i(187174)),x=()=>i(449506),h=()=>i(375243);const v=["domain_verification_start","domain_verification_pending","domain_verification_success","organization_configuration","onboarding_success"];function b(n){return e=>{n((n=>{if(n)return{...n,domainVerificationInfo:n.domainVerificationInfo?{...n.domainVerificationInfo,...e}:void 0}}))}}var y=()=>i(511303);var I=()=>i(401497),j=()=>i(148307),S=()=>i(486345),z=()=>i(959013),C=()=>i(901389),w=()=>i(898486),A=()=>i(554509),O=()=>i(689216),k=()=>i(602105),N=()=>i(688437),D=()=>i(174517),V=()=>i(338499),M=()=>i(364280),_=i(474848);function T(n){let{icon:e,title:i,description:t}=n;const o=(0,I().IS)((n=>({iconContainer:{display:"flex",justifyContent:"center"},headerContainer:{paddingTop:64,maxWidth:482,margin:"0 auto",textAlign:"center"}})),[]);return(0,_.jsx)("div",{style:o.headerContainer,children:(0,_.jsxs)(M().VP,{gap:20,children:[(0,_.jsx)("div",{style:o.iconContainer,children:e}),(0,_.jsxs)(M().VP,{gap:12,children:[(0,_.jsx)(A().D,{styleName:"UITitle-22px/Semibold",children:i}),(0,_.jsx)(A().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t})]})]})})}var B=()=>i(920773),R=()=>i(204063),U=()=>i(890494);const P={domain_verification_start:"not_started",domain_verification_pending:"not_started",domain_verification_success:"not_started",organization_configuration:"domain_verified",onboarding_success:"completed"},E=45,K=["not_started","domain_verified","completed"];function $(n){let{currentStageName:e}=n;const i=(0,I().IS)((n=>({header:{width:"100%",padding:12,borderBottom:`1px solid ${n.stroke.secondary}`,height:E}})),[]),t=P[e];return(0,_.jsx)("div",{style:i.header,children:(0,_.jsx)(M().fI,{gap:24,justifyContent:"center",children:K.map(((n,e)=>(0,_.jsx)(q,{stepNumber:e+1,onboardingStep:n,isCurrentStep:n===t},e)))})})}function q(n){let{stepNumber:e,onboardingStep:i,isCurrentStep:t}=n;const o=(0,I().IS)((n=>({stepContainer:{display:"flex",gap:8,alignItems:"center"}})),[]);return(0,_.jsxs)("div",{style:o.stepContainer,children:[(0,_.jsx)(U().A,{number:e,isLightBlueHighlighted:t}),(0,_.jsx)(A().D,{styleName:"UISmall-12px/Medium",colorName:t?"primary":"tertiary",children:function(n){switch(n){case"not_started":return(0,_.jsx)(z().sA,{id:"onboarding.organization.header.verifyEmailDomain",defaultMessage:"Verify email domain"});case"domain_verified":return(0,_.jsx)(z().sA,{id:"onboarding.organization.header.configureOrganization",defaultMessage:"Configure organization"});case"completed":return(0,_.jsx)(z().sA,{id:"onboarding.organization.header.finishSetup",defaultMessage:"Finish setup"});default:(0,g().HB)(n)}}(i)})]})}function L(n){let{header:e,continueButtonLabel:i,onContinue:o,children:a,isContinueDisabled:r,onGoBack:s}=n;const d=(0,I().IS)((n=>({container:{overflowY:"auto",height:`calc(100% - ${E}px)`},contentContainer:{paddingTop:48,paddingBottom:64,maxWidth:533,margin:"0 auto"},continueButtonContainer:{paddingTop:24,width:"100%"},continueButton:{width:"100%",height:32},goBackButtonContainer:{paddingTop:6,width:"100%"},goBackButton:{width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"}})),[]),[l,c]=(0,t.useState)(!1),[u,g]=(0,t.useState)(!1);return(0,_.jsxs)("div",{style:d.container,children:[e,(0,_.jsxs)("div",{style:d.contentContainer,children:[a,(0,_.jsx)("div",{style:d.continueButtonContainer,children:(0,_.jsx)(R().A,{onClick:async()=>{c(!0),await o(),c(!1)},style:d.continueButton,disabled:l||r,children:i})}),s?(0,_.jsx)("div",{style:d.goBackButtonContainer,children:(0,_.jsx)(B().p,{isBlue:!0,size:"lg",onClick:async()=>{g(!0),await s(),g(!1)},style:d.goBackButton,disabled:u,children:(0,_.jsx)(z().sA,{id:"onboarding.domainVerification.goBack",defaultMessage:"Go back"})})}):null]})]})}function H(n){let{setOnboardingState:e,shouldContinue:i}=n;return async()=>{if(i){if(!(await i()))return}e((n=>({...n,currentStageIndex:((null==n?void 0:n.currentStageIndex)??0)+1})))}}function W(n){var e;let{onboardingState:i,setOnboardingState:a}=n;const r=(0,o().v3)(),s=(0,z().tz)(),d=b(a),l=(0,t.useCallback)((async()=>{if(!i.domainVerificationInfo)return!1;const n=await x().callApi({eventName:"setSamlConfig",environment:r,data:{spaceId:i.domainVerificationInfo.spaceId}});if("failed"===n.type)return d({emailDomainError:(0,w().Hu)(s,n)}),!1;const e=await x().callApi({eventName:"createDomainVerificationCode",environment:r,data:{type:"saml_config",spaceId:i.domainVerificationInfo.spaceId,domain:i.domainVerificationInfo.emailDomain??""}});if("success"===e.type){const n=e.data.domainVerification,i=(0,S().pl)(n);return d({domainVerification:i}),!0}return d({emailDomainError:(0,w().Hu)(s,e)}),!1}),[r,s,i,d]);if(!i.domainVerificationInfo)return null;const c=H({setOnboardingState:a,shouldContinue:l});return(0,_.jsx)(L,{header:(0,_.jsx)(J,{}),continueButtonLabel:(0,_.jsx)(z().sA,{id:"onboarding.domainVerification.getVerificationCode",defaultMessage:"Get verification code"}),onContinue:c,isContinueDisabled:!(null!==(e=i.domainVerificationInfo)&&void 0!==e&&e.emailDomain),children:(0,_.jsx)(F,{domainVerificationInfo:i.domainVerificationInfo,setDomainVerificationInfo:d})})}function F(n){let{domainVerificationInfo:e,setDomainVerificationInfo:i}=n;const{emailDomain:t,emailDomainError:o}=e;return(0,_.jsx)(N().K4,{pendingDomain:t,setPendingDomain:n=>{i({emailDomain:n,emailDomainError:void 0})},error:o})}function G(n){var e;let{onboardingState:i,setOnboardingState:a}=n;const r=(0,z().tz)(),s=(0,o().v3)(),d=b(a),l=(0,t.useCallback)((async n=>{if(!i.domainVerificationInfo)return!1;const e=await x().callApi({eventName:"verifyDomain",environment:s,data:{verificationId:n.id}});if("success"===e.type){const e={type:"verified",domain:n.domain};return d({domainVerification:e}),!0}return C().f1((0,w().Hu)(r,e)),!1}),[s,r,i,d]),c=null===(e=i.domainVerificationInfo)||void 0===e?void 0:e.domainVerification,u=(0,t.useCallback)((async()=>{if(c&&"unverified"===c.type)return(0,O().n)({onRequest:()=>x().callApi({eventName:"deleteDomainVerificationCode",environment:s,data:{id:c.id}}),onSuccess:()=>{d({domainVerification:void 0}),a((n=>({...n,currentStageIndex:v.indexOf("domain_verification_start")})))}})}),[s,c,d,a]),g=(0,t.useCallback)((async n=>{const e=i.domainVerificationInfo;if(!e||"invalid"!==n.type)return;const t=await x().callApi({eventName:"deleteDomainVerificationCode",environment:s,data:{id:n.id}});if("failed"===t.type)return C().f1((0,w().Hu)(r,t));const o=await x().callApi({eventName:"createDomainVerificationCode",environment:s,data:{type:"saml_config",domain:n.domain,spaceId:e.spaceId}});if("failed"===o.type)return C().f1((0,w().Hu)(r,o));a((n=>n?{...n,domainVerificationInfo:{...e,domainVerification:(0,V().Hj)(o.data.domainVerification).data}}:n))}),[s,r,i.domainVerificationInfo,a]);if(!c||"verified"===c.type)return null;const m=H({setOnboardingState:a,shouldContinue:()=>"invalid"!==c.type&&l(c)});return(0,_.jsx)(L,{header:(0,_.jsx)(J,{domainToBeVerified:c.domain}),continueButtonLabel:(0,_.jsx)(z().sA,{id:"onboarding.domainVerification.verifyDomain",defaultMessage:"Verify domain"}),onContinue:m,onGoBack:u,children:(0,_.jsx)(D().$,{domainVerification:c,regenerateCode:g})})}function Y(n){var e;let{onboardingState:i,setOnboardingState:o,refreshOnboardingState:a}=n;const r=(0,I().IS)((n=>({rowItemContainer:{width:"100%",borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:n.stroke.secondary,boxShadow:k().v,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"14px 16px"}})),[]),[s,d]=(0,t.useState)(!1),l=null===(e=i.domainVerificationInfo)||void 0===e?void 0:e.domainVerification;if(!l||"verified"!==l.type)return null;const c=H({setOnboardingState:o,shouldContinue:async()=>(d(!0),await a(),!1)});return(0,_.jsx)(L,{header:(0,_.jsx)(J,{}),continueButtonLabel:(0,_.jsx)(z().sA,{id:"onboarding.domainVerification.configureOrganization",defaultMessage:"Configure organization"}),onContinue:c,isContinueDisabled:s,children:(0,_.jsxs)("div",{style:r.rowItemContainer,children:[(0,_.jsx)("div",{children:(0,_.jsx)(A().D,{styleName:"UIRegular-14px/Medium",children:`@${l.domain}`})}),(0,_.jsx)(h().d9,{status:"success"})]})})}function J(n){let{domainToBeVerified:e}=n;return(0,_.jsx)(T,{icon:(0,_.jsx)("img",{src:j().A.images.onboarding.planTypeForWorkSplitIntentDarkmodePng,style:{height:77,width:77}}),title:e?(0,_.jsx)(z().sA,{id:"onboarding.domainVerification.title.withDomain",defaultMessage:"Verify {domainToBeVerified}",values:{domainToBeVerified:e}}):(0,_.jsx)(z().sA,{id:"onboarding.domainVerification.title",defaultMessage:"Verify an email domain"}),description:(0,_.jsx)(z().sA,{id:"onboarding.domainVerification.description",defaultMessage:"Verified email domains can be used to manage user accounts and workspaces created using an email address with that email domain"})})}var Z=()=>i(29037),Q=()=>i(798880),X=()=>i(630116),nn=()=>i(614505),en=()=>i(453697),tn=()=>i(538739),on=()=>i(51703),an=()=>i(629148),rn=()=>i(27198),sn=()=>i(142448),dn=()=>i(477657);function ln(n){var e;let{onboardingState:i,setOnboardingState:t,refreshUserOrganizations:a}=n;const r=(0,o().v3)(),s=null===(e=i.orgConfigurationInfo)||void 0===e?void 0:e.organizationId,u=(0,an().E)({organizationId:s});if(!s||!u)return null;const g=H({setOnboardingState:t,shouldContinue:async()=>(await a(),c().oo({environment:r,url:(0,d().re)({organizationId:s,tabRoute:l().Vo,queryParams:{}})}),!0)});return(0,_.jsx)(L,{header:(0,_.jsx)(cn,{organizationId:s}),continueButtonLabel:(0,_.jsx)(z().sA,{id:"onboarding.configureOrganization.goToAdminConsole",defaultMessage:"Go to organization console"}),onContinue:g,children:(0,_.jsx)(un,{organizationStore:u,setOnboardingState:t})})}function cn(n){var e;let{organizationId:i}=n;const t=(0,an().E)({organizationId:i}),{icon:o,name:a}=(0,r().K8)((()=>({icon:null==t?void 0:t.getIcon(),name:null==t?void 0:t.getName()})),[t]),{state:s}=(0,on().j)(),d=(null===(e=s.value)||void 0===e?void 0:e.memberCount)||0;return t?(0,_.jsx)(T,{icon:(0,_.jsx)(nn().A,{disabled:!0,icon:o,isEmptyPage:!1,title:a,size:80,isLarge:!0}),title:a,description:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(z().sA,{id:"onboarding.configureOrganization.finishSetup.description.enterprise",defaultMessage:"Enterprise"}),(0,_.jsx)(tn().A,{style:{margin:"0 2px"}}),(0,_.jsx)(rn().Qq,{memberCount:d})]})}):null}function un(n){let{organizationStore:e,setOnboardingState:i}=n;const t=(0,o().v3)(),a=(0,r().K8)((()=>e.getEmailDomains()),[e]),s=(0,z().tz)(),d=(0,r().K8)((()=>e.getOwnerIds().map((n=>new(X().LU)(t,{table:Q().oo,id:n})))),[e,t]),l=(0,r().K8)((()=>{var n;return(null===(n=d.at(0))||void 0===n?void 0:n.getDisplayName(s))??""}),[d,s]);return(0,_.jsxs)(M().VP,{gap:16,children:[(0,_.jsx)(gn,{title:(0,_.jsx)(z().sA,{id:"onboarding.configureOrganization.finishSetup.content.verifyEmailDomain",defaultMessage:"Verify email domain"}),rightContent:1===a.length?(0,_.jsx)(A().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",as:"span",children:(0,_.jsx)(z().sA,{id:"onboarding.configureOrganization.finishSetup.content.singleEmailDomain",defaultMessage:"{emailDomain} verified",values:{emailDomain:(0,_.jsx)(A().D,{styleName:"UIMedium-13px/Medium",colorName:"primary",as:"span",children:`@${a[0]}`})}})}):(0,_.jsx)(A().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",children:(0,_.jsx)(z().sA,{id:"onboarding.configureOrganization.finishSetup.content.emailDomainCount",defaultMessage:"{count} {count, plural, one {email domain} other {email domains}}",values:{count:a.length}})})}),(0,_.jsx)(gn,{title:(0,_.jsx)(z().sA,{id:"onboarding.configureOrganization.finishSetup.content.configureOrganization",defaultMessage:"Configure organization"}),rightContent:(0,_.jsxs)(_.Fragment,{children:[1===d.length?(0,_.jsxs)(M().fI,{gap:8,alignItems:"center",children:[(0,_.jsx)(en().A,{userStore:d[0],size:sn().tR,avatarShouldShowShadow:!1,hasTooltip:!1,iconStyle:{fontSize:12}}),(0,_.jsx)(A().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",as:"span",children:(0,_.jsx)(z().sA,{id:"onboarding.configureOrganization.finishSetup.content.singleOwner",defaultMessage:"{userName} invited",values:{userName:(0,_.jsx)(A().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",as:"span",children:l})}})})]}):(0,_.jsx)(dn().t,{users:d,showTooltip:!0,isLoading:!1}),(0,_.jsx)(B().p,{isBlue:!0,size:"sm",onClick:()=>{i((n=>({...n,currentStageIndex:v.indexOf("organization_configuration")})))},children:(0,_.jsx)(z().sA,{id:"onboarding.configureOrganization.finishSetup.content.editOrganization",defaultMessage:"Edit"})})]})})]})}function gn(n){let{title:e,rightContent:i}=n;const t=(0,I().IS)((n=>({rowItemContainer:{width:"100%",borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:n.stroke.secondary,boxShadow:k().v,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"14px 16px"},checkmarkCircle:{display:"flex",borderRadius:"100%",backgroundColor:n.fill.uiBlueSecondary,width:24,height:24,color:n.text.uiBluePrimary,alignItems:"center",justifyContent:"center"},checkmarkIcon:{width:14,height:14},leftContent:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:8},rightContent:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:12}})),[]);return(0,_.jsxs)("div",{style:t.rowItemContainer,children:[(0,_.jsxs)("div",{style:t.leftContent,children:[(0,_.jsx)("div",{style:t.checkmarkCircle,children:(0,Z().checkmarkIcon)(t.checkmarkIcon)}),(0,_.jsx)(A().D,{styleName:"UIRegular-14px/Medium",children:e})]}),(0,_.jsx)("div",{style:t.rightContent,children:i})]})}const mn={viewBox:"0 0 20 20",svg:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("path",{d:"M8.5 9.31a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3"}),(0,_.jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zM4.5 5.375a.875.875 0 0 0-.875.875v5.491l1.996-1.995a.625.625 0 0 1 .883 0l1.98 1.98 4.137-4.137a.625.625 0 0 1 .883 0l2.871 2.87V6.25a.875.875 0 0 0-.875-.875zm11.875 6.852-3.312-3.312-4.137 4.136a.625.625 0 0 1-.884 0l-1.98-1.98-2.437 2.438v.241c0 .483.392.875.875.875h11a.875.875 0 0 0 .875-.875z"})]})},fn=(0,i(340498).wt)("photo",mn);var pn=()=>i(972435),xn=()=>i(623580),hn=(i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(803949),()=>i(764880)),vn=()=>i(784892),bn=()=>i(322769),yn=()=>i(574752),In=()=>i(962730),jn=()=>i(377586),Sn=()=>i(508496),zn=()=>i(939740),Cn=()=>i(64e3),wn=()=>i(14235),An=()=>i(267155),On=()=>i(881690),kn=()=>i(856952),Nn=()=>i(457688),Dn=()=>i(303129),Vn=()=>i(443573);const Mn=5;function _n(n){let{isOpen:e,onDismiss:i,onClick:a,organizationStore:s,organizationOwnerIds:d,setOrganizationOwnerIds:l}=n;const c=(0,z().tz)(),g=(0,I().IS)((n=>({menuItem:{padding:6,borderRadius:k().V.default,maxHeight:240},pillContainer:{margin:"0px 4px 4px 0px",background:n.surface.page,padding:"0px 6px",height:28},pillContents:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},pillText:{marginLeft:6}})),[]),m=(0,t.useCallback)((n=>{const e=d.filter((e=>e!==n));l(e)}),[d,l]),f=(0,t.useCallback)((()=>{d.length>1&&l(d.slice(0,d.length-1))}),[d,l]),p=(0,r().K8)((()=>{var n;return null===(n=u().default.state.currentUserStore)||void 0===n?void 0:n.id}),[]),[x,h]=(0,t.useState)(!1),v=(0,o().v3)(),b=(0,r().K8)((()=>d.map((n=>{const e=new(X().LU)(v,{table:Q().oo,id:n}),i=e.getModel();return(0,_.jsx)(On().A,{showRemoveButton:n!==p,value:(0,_.jsxs)("div",{style:g.pillContents,children:[(0,_.jsx)(en().A,{userStore:e,size:18}),(0,_.jsx)("div",{style:g.pillText,children:(0,_.jsx)(Nn().S,{actor:i?(0,hn().A7)(i):void 0})})]}),style:g.pillContainer,format:vn().NY.Medium,isSingle:!1,onClickRemove:e=>{e.stopPropagation(),m(n),h(!1)}},n)}))),[p,v,m,d,g.pillContainer,g.pillContents,g.pillText]),[y,j]=(0,t.useState)(""),S=(0,t.useCallback)((n=>{j(n.currentTarget.value)}),[]),C=n=>{const e=[...d,n];l(e),j("")};return(0,_.jsx)(wn().Ay,{placementToOrigin:In().W.Bottom,alignmentToOrigin:In().C.Start,originGap:8,open:e,popupType:jn().n.Popup,onDismiss:()=>{h(!1),i()},origin:(0,_.jsx)(kn().Ay,{focus:x,focusInitial:!1,showBorder:!0,onRemoveLastToken:f,format:kn().le.Select,value:y,tokens:b,onChange:S,onClick:()=>{h(!0),a()},placeholder:c.formatMessage({id:"onboarding.configureOrganization.selectOwnersPlaceholder",defaultMessage:"Select organization owners"}),style:g.menuItem}),render:()=>(0,_.jsx)(Tn,{organizationStore:s,query:y,onSelectUser:C,userIdsToExclude:d})})}function Tn(n){let{organizationStore:e,query:i,onSelectUser:t,userIdsToExclude:a}=n;const s=(0,o().v3)(),d=(0,Dn().l)(),{spaceUsers:l}=(0,Vn().$)(d),c=(0,r().K8)((()=>{const n=new Set;for(const e of d){(l[e.id]??[]).forEach((e=>{(0,bn().c7)(e)&&n.add(e.userId)}))}return n}),[d,l]),[{value:u}]=(0,p().Yb)((async()=>{if(Sn().default.checkGate({gateName:"dont_load_users"}))return[];const n=Array.from(c).filter((n=>!(null!=a&&a.includes(n))));return(await(0,yn().searchUsers)({environment:s,query:i,parentStore:e,userIds:n})).slice(0,Mn)}),[c,s,i,e,a]);if(0===i.length||!u)return null;const g=u.length>0?u.map((n=>({key:n.id,render:e=>(0,_.jsx)(Nn().A,{...e,actor:(0,hn().A7)(n)}),action:()=>{t(n.id)}}))):[{key:"no users found",render:()=>(0,_.jsx)(Cn().A,{title:(0,_.jsx)(z().sA,{id:"onboarding.configureOrganization.noMembersFound",defaultMessage:"No members found"})}),action:()=>{}}];return(0,_.jsx)(zn().Ay,{initialFocus:0,type:zn().Oh.Vertical,sections:[{key:"user results",render:n=>(0,_.jsx)(An().z,{loading:!1,...n}),items:g}]})}function Bn(n){let{onboardingState:e,setOnboardingState:i}=n;const a=(0,o().v3)(),{updateCacheWithRecordMap:r}=(0,t.useContext)(y().N),s=function(n){return e=>{n((n=>{if(n)return{...n,orgConfigurationInfo:n.orgConfigurationInfo?{...n.orgConfigurationInfo,...e}:void 0}}))}}(i),d=e.orgConfigurationInfo;if(!d)return null;const l=H({setOnboardingState:i,shouldContinue:async()=>{const n=await x().callApi({eventName:"updateOrganization",environment:a,data:{organizationId:d.organizationId,name:d.organizationName,...d.organizationIcon?{icon:d.organizationIcon}:{},...d.organizationOwners?{ownerIds:d.organizationOwners}:{},onboardingStatus:"completed"}});return"success"===n.type?(r(n),!0):(C().f1((0,w().Hu)(pn().A.getIntl(),n)),!1)}});return(0,_.jsx)(L,{header:(0,_.jsx)(T,{icon:(0,_.jsx)("img",{src:j().A.images.onboarding.planTypeForWorkSplitIntentDarkmodePng,style:{height:77,width:77}}),title:(0,_.jsx)(z().sA,{id:"onboarding.configureOrganization.title",defaultMessage:"Configure organization"}),description:(0,_.jsx)(z().sA,{id:"onboarding.configureOrganization.description",defaultMessage:"Organizations let you view all your members, guests, and security settings in one place, even if you’re managing multiple workspaces"})}),isContinueDisabled:!Un(d),continueButtonLabel:(0,_.jsx)(z().sA,{id:"onboarding.configureOrganization.finishSetup",defaultMessage:"Finish setup"}),onContinue:l,children:(0,_.jsx)(Rn,{organizationConfigurationInfo:d,setOrganizationConfigurationInfo:s})})}function Rn(n){let{organizationConfigurationInfo:e,setOrganizationConfigurationInfo:i}=n;const a=(0,o().v3)(),s=(0,z().tz)(),d=(0,I().IS)((n=>({label:{paddingBottom:6},nameInput:{paddingTop:6,paddingBottom:6},orgOwnerInput:{paddingBottom:8},defaultIcon:{padding:6,color:n.icon.secondary},icon:{height:32,width:32,background:n.tokenInputMenuItemBackground,borderRadius:k().V.default,border:`1px solid ${n.stroke.primary}`}})),[]),l=(0,an().E)({organizationId:e.organizationId}),{primaryWorkspaceName:c,initialOrganizationOwnerIds:u}=(0,r().K8)((()=>({primaryWorkspaceName:(null==l?void 0:l.getName())??"",initialOrganizationOwnerIds:(null==l?void 0:l.getOwnerIds())??[]})),[l]),g=e.organizationName,m=e.organizationIcon,[f,p]=(0,t.useState)(!1),x=a.currentUser.id;if(!l||!x)return null;const h=[x,...u.filter((n=>n!==x))],v=e.organizationOwners??h;return(0,_.jsxs)(M().VP,{gap:24,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{style:d.label,children:(0,_.jsx)(A().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,_.jsx)(z().sA,{id:"onboarding.configureOrganization.chooseIconAndName",defaultMessage:"Choose icon & name"})})}),(0,_.jsxs)(M().fI,{gap:8,children:[(0,_.jsx)(nn().A,{disabled:!1,bucket:"public",icon:void 0===m?void 0:{pointer:l.pointer,icon:m},defaultIcon:fn(d.defaultIcon),isEmptyPage:!1,emojiSize:24,size:32,onChange:n=>{i({organizationIcon:n})},style:d.icon}),(0,_.jsx)(M().VP,{gap:4,width:"100%",children:(0,_.jsx)(xn().A,{value:g,onChange:n=>{i({organizationName:n.target.value})},inputElementAttributes:{required:!0,"aria-describedby":"organization-name-validation-errors"},placeholder:s.formatMessage({id:"onboarding.configureOrganization.organizationNamePlaceholder",defaultMessage:"Name of organization"}),style:d.nameInput})})]})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{style:d.label,children:(0,_.jsx)(A().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,_.jsx)(z().sA,{id:"onboarding.configureOrganization.selectOwners",defaultMessage:"Select who will be organization owner"})})}),(0,_.jsx)("div",{style:d.orgOwnerInput,children:(0,_.jsx)(_n,{isOpen:f,onDismiss:()=>p(!1),onClick:()=>p(!0),organizationStore:l,organizationOwnerIds:v,setOrganizationOwnerIds:n=>{i({organizationOwners:n})}})}),(0,_.jsx)(A().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,_.jsx)(z().sA,{id:"onboarding.configureOrganization.selectOwnersDescription",defaultMessage:"Organization owners have more power than workspace owners. You can add all existing workspace owners of <b>{primaryWorkspaceName}</b>, or only give this role to a few people.",values:{primaryWorkspaceName:c,b:function(){for(var n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(0,_.jsx)("b",{children:e})}}})})]})]})}function Un(n){const e=n.organizationName;return e&&e.length>0}function Pn(n){var e;const{loading:i,onboardingInfo:a,onboardingState:r,refresh:s}=function(n){const e=(0,o().v3)(),{updateCacheWithRecordMap:i}=(0,t.useContext)(y().N),[{status:a,value:r},s]=(0,p().Yb)((async()=>{const t=await x().callApi({eventName:"getOrganizationOnboardingInfo",environment:e,data:{...n,includeRecordMap:!0}});if("success"!==t.type)return"failed"===t.type?{onboardingInfo:{onboardingStatus:"ineligible"},onboardingState:void 0}:(0,g().HB)(t);{i({data:t.data});const n=t.data.result,r=n.onboardingStatus;if("ineligible"===r)return{onboardingInfo:n,onboardingState:void 0};if("not_started"===r){var o,a;const i=n.spaceId,t=await x().callApi({eventName:"getSamlConfigForSpace",environment:e,data:{spaceId:i}});if("failed"===t.type)return{onboardingInfo:n,onboardingState:void 0};const r=null===(o=t.data.samlConfig)||void 0===o?void 0:o.emailDomains,s=null===(a=t.data.samlConfig)||void 0===a?void 0:a.domainVerifications.filter((n=>!(null!=r&&r.includes(n.domain)))).sort(((n,e)=>e.createdAt-n.createdAt)).map(h().W0).map((n=>n.data)).at(0);return{onboardingInfo:n,onboardingState:{currentStageIndex:s?v.indexOf("domain_verification_pending"):v.indexOf("domain_verification_start"),domainVerificationInfo:{spaceId:i,domainVerification:s}}}}if("domain_verified"===r||"completed"===r){const e=n.organizationId;return{onboardingInfo:n,onboardingState:{currentStageIndex:v.indexOf("completed"===r?"onboarding_success":"organization_configuration"),orgConfigurationInfo:{organizationId:e}}}}(0,g().HB)(r)}}),[e,n,i]);return{loading:"pending"===a||"idle"===a,onboardingInfo:null==r?void 0:r.onboardingInfo,onboardingState:null==r?void 0:r.onboardingState,refresh:s}}(n.onboardingProps),[d,l]=(0,t.useState)(void 0);if((0,t.useEffect)((()=>{i||l(r)}),[i,r]),i||!a)return(0,_.jsx)(m().A,{});if("completed"===a.onboardingStatus)return(0,_.jsx)(ee,{organizationId:a.organizationId});if("ineligible"===a.onboardingStatus)return(0,_.jsx)(ee,{organizationId:void 0});if(!d||d.currentStageIndex<0||d.currentStageIndex>=v.length)return(0,_.jsx)(m().A,{});const c=v[d.currentStageIndex],u=(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)($,{currentStageName:c}),En(c,d,l,s,n.refreshUserOrganizations)]}),b=null===(e=d.orgConfigurationInfo)||void 0===e?void 0:e.organizationId;return b?(0,_.jsx)(f().X,{organizationId:b,children:u}):u}function En(n,e,i,t,o){switch(n){case"domain_verification_start":return(0,_.jsx)(W,{onboardingState:e,setOnboardingState:i});case"domain_verification_pending":return(0,_.jsx)(G,{onboardingState:e,setOnboardingState:i});case"domain_verification_success":return(0,_.jsx)(Y,{onboardingState:e,setOnboardingState:i,refreshOnboardingState:t});case"organization_configuration":return(0,_.jsx)(Bn,{onboardingState:e,setOnboardingState:i});case"onboarding_success":return(0,_.jsx)(ln,{onboardingState:e,setOnboardingState:i,refreshUserOrganizations:o});default:(0,g().HB)(n)}}var Kn=()=>i(684088),$n=()=>i(404085),qn=()=>i(737693),Ln=()=>i(493823),Hn=()=>i(710149),Wn=()=>i(529497),Fn=()=>i(590082),Gn=()=>i(216441),Yn=()=>i(182392),Jn=()=>i(687190);function Zn(n){let{organizationId:e,currentUserStore:i,selectedTabName:a}=n;const s=(0,o().v3)(),d=(0,I().DP)(),{availableOrganizationFeatures:c}=(0,t.useContext)(f().D),{clearAllPendingSettings:u,hasPendingSecuritySettings:m}=(0,t.useContext)(Kn().A),{state:p}=(0,on().j)(),x=(0,an().E)({organizationId:e}),h=(0,r().K8)((()=>x?(0,_.jsx)(nn().A,{disabled:!0,icon:x.getIcon(),defaultIcon:(0,qn().V)(),isEmptyPage:!1,size:Fn().WK}):(0,_.jsx)(Hn().A,{style:{height:Fn().WK,width:Fn().WK,borderRadius:6}})),[x]),v=(0,r().K8)((()=>x?x.getName():(0,_.jsx)(Hn().A,{style:{marginTop:4,height:18,width:120,borderRadius:4}})),[x]),b=(0,r().K8)((()=>{var n;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(z().sA,{id:"organization.general.orgMetadata",defaultMessage:"Enterprise plan"}),(0,_.jsx)(tn().A,{style:{margin:"0 2px"}}),(0,_.jsx)(rn().Qq,{memberCount:(null===(n=p.value)||void 0===n?void 0:n.memberCount)||0})]})}),[p.value]),y=(0,r().K8)((()=>l().oh.filter((n=>{if("onboarding"===n.name)return!1;return(0,Gn().N9[n.name])({environment:s,currentUserStore:i,organizationId:e,features:c})}))),[i,s,e,c]),j=(0,t.useMemo)((()=>y.map((n=>{if("onboarding"!==n.name)return{id:n.name,name:Gn().HG[n.name].tab.name,icon:Gn().HG[n.name].tab.icon,isSelected:a===n.name,onClick:async()=>{const i=m();if("security"===a&&i){const{accept:n}=await(0,Wn().S)(d);if(!n)return;u()}(0,Yn().i)({environment:s,organizationId:e,tabRoute:n})}}})).filter(g().O9)),[s,d,y,a,e,m,u]);return(0,_.jsx)(Jn().yc,{sidebarTitle:v,sidebarByline:b,sidebarTitleIcon:h,topEntitySection:(0,_.jsx)(Qn,{}),bottomEntitySection:(0,_.jsx)(Jn().$n,{}),items:j,hideSeparator:!0})}function Qn(){const n=(0,o().v3)(),e=(0,I().IS)((n=>({container:{display:"flex",alignItems:"center",justifyContent:"center",gap:10,width:"fit-content"},iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:n.accentColors.gray[100],height:20,width:20},icon:{height:20,width:20,padding:4,color:n.icon.primary,transform:"rotate(90deg)"}})),[]);return(0,_.jsxs)(Ln().p,{style:e.container,onClick:()=>{c().oo({environment:n,url:s().JZ.root})},children:[(0,_.jsx)("div",{style:e.iconContainer,children:(0,$n().l)(e.icon)}),(0,_.jsx)(A().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",as:"span",children:(0,_.jsx)(z().sA,{id:"organization.general.button.backToNotion",defaultMessage:"Back to Notion"})})]})}const Xn=(ne=function(n){let{organizationId:e,tabRoute:t,properties:a,params:s}=n;const c=(0,o().v3)(),{loading:g,organizationsInfo:m,refresh:p}=(0,i(926938).q)(),x=(0,r().K8)((()=>u().default.state.currentUserStore),[]),h=m.map((n=>n.id)),v=e&&h.includes(e)?e:h[0],{features:b}=(0,i(594137).z)(v),I=(0,r().K8)((()=>!!t&&("onboarding"===t.name||(0,Gn().N9[t.name])({environment:c,currentUserStore:x,organizationId:v,features:b}))),[c,x,v,t,b]);if(g)return null;const j=e===d().Zf;if(j||"onboarding"===(null==t?void 0:t.name)){const n=s[Gn().ge];return j&&!n?(0,_.jsx)(ee,{organizationId:void 0}):(0,_.jsx)(y().$,{children:(0,_.jsx)(Pn,{onboardingProps:j?{spaceId:n}:{organizationId:v},queryParams:s,refreshUserOrganizations:p})})}const S=m.find((n=>n.id===v));if(!v||!S||!t)return(0,_.jsx)(ee,{organizationId:v,queryParams:s});if("completed"!==S.onboardingStatus)return(0,_.jsx)(ee,{organizationId:v,tabRoute:l()._P});const z=Gn().HG[t.name];return I?(0,_.jsx)(y().$,{children:(0,_.jsx)(f().X,{organizationId:v,children:(0,_.jsx)(Kn().m,{children:(0,_.jsx)(i(466492).J,{left:(0,_.jsx)(Zn,{organizationId:v,currentUserStore:x,selectedTabName:t.name}),right:z.scene({properties:a,queryParams:s,organizationId:v,tabRoute:t}),showElevatedConsoleContainer:!0})})})}):(0,_.jsx)(ee,{organizationId:v,queryParams:s})},function(n){return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(i(951622).A,{}),(0,_.jsx)(i(171789).A,{}),(0,_.jsx)(i(775812).A,{}),(0,_.jsx)(ne,{...n})]})});var ne;function ee(n){const e=(0,o().v3)(),{organizationId:i,queryParams:t,tabRoute:r}=n;return(0,a().l)((()=>{i?c().oo({environment:e,url:(0,d().re)({organizationId:i,tabRoute:r??l().Vo,queryParams:t??{}})}):c().oo({environment:e,url:s().JZ.root})})),null}}}]);