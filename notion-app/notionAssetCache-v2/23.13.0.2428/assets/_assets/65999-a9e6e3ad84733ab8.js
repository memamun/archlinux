"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[65999],{319567:(e,t,a)=>{a.d(t,{N:()=>i});a(296540);var n=a(474848);const i=(0,a(340498).wt)("topbarComment",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M5.9375 18.4844C6.38281 18.4844 6.71094 18.2656 7.25 17.7891L9.92969 15.4297H14.6328C16.9844 15.4297 18.3047 14.0703 18.3047 11.75V5.67969C18.3047 3.35938 16.9844 2 14.6328 2H4.67188C2.32812 2 1 3.35938 1 5.67969V11.75C1 14.0781 2.36719 15.4297 4.61719 15.4297H4.9375V17.3438C4.9375 18.0391 5.30469 18.4844 5.9375 18.4844ZM6.32812 16.7344V14.5078C6.32812 14.0469 6.125 13.8672 5.6875 13.8672H4.72656C3.25781 13.8672 2.55469 13.125 2.55469 11.7031V5.72656C2.55469 4.30469 3.25781 3.5625 4.72656 3.5625H14.5859C16.0469 3.5625 16.75 4.30469 16.75 5.72656V11.7031C16.75 13.125 16.0469 13.8672 14.5859 13.8672H9.84375C9.36719 13.8672 9.13281 13.9453 8.80469 14.2891L6.32812 16.7344Z"})})},583690:(e,t,a)=>{a.d(t,{AC:()=>p,I2:()=>l,YC:()=>c});a(296540);var n=()=>a(401497),i=()=>a(212050),s=()=>a(413267),o=()=>a(959013),r=a(474848);function d(e){const{enabled:t,labelIfEnabled:a,labelIfDisabled:i}=e,s=(0,n().IS)((e=>({container:{color:t?e.mediumTextColor:e.lightTextColor}})),[t]);return(0,r.jsxs)("div",{style:s.container,children:[b(t)," ",t?a:i]})}function l(e){const t="none"!==e;return[(0,r.jsx)(d,{enabled:t&&e.read_content,labelIfEnabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.mixedAccess.readContent.enabled",defaultMessage:"Can read content."}),labelIfDisabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.mixedaccess.readContent.disabled",defaultMessage:"Cannot read content."})},"read_content"),(0,r.jsx)(d,{enabled:t&&e.insert_content,labelIfEnabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.enabled",defaultMessage:"Can insert content."}),labelIfDisabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.disabled",defaultMessage:"Cannot insert content."})},"insert_content"),(0,r.jsx)(d,{enabled:t&&e.update_content,labelIfEnabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.enabled",defaultMessage:"Can update content."}),labelIfDisabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.disabled",defaultMessage:"Cannot update content."})},"update_content"),(0,r.jsx)(d,{enabled:t&&e.insert_comment,labelIfEnabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.insertComment.enabled",defaultMessage:"Can comment."}),labelIfDisabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.insertComment.disabled",defaultMessage:"Cannot comment."})},"insert_comment"),(0,r.jsx)(d,{enabled:t&&e.read_comment,labelIfEnabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.readComment.enabled",defaultMessage:"Can read comments."}),labelIfDisabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.readComment.disabled",defaultMessage:"Cannot read comments."})},"read_comment")]}function c(e){return[(0,r.jsx)(d,{enabled:e.read_user_without_email,labelIfEnabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.userAccess.readUsers.enabled",defaultMessage:"Can view users."}),labelIfDisabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.userAccess.readUsers.disabled",defaultMessage:"Cannot view users."})},"read_user_without_email"),(0,r.jsx)(d,{enabled:e.read_user_with_email,labelIfEnabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.enabled",defaultMessage:"Can view user email addresses."}),labelIfDisabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.disabled",defaultMessage:"Cannot view user email addresses."})},"read_user_with_email")]}function p(e){return[(0,r.jsx)(d,{enabled:e.link_preview,labelIfEnabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.linkPreview.enabled",defaultMessage:"Can preview links."}),labelIfDisabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.linkPreview.disabled",defaultMessage:"Cannot preview links."})},"link_preview"),(0,r.jsx)(d,{enabled:e.synced_database,labelIfEnabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.syncedDatabase.enabled",defaultMessage:"Can sync databases."}),labelIfDisabled:(0,r.jsx)(o().sA,{id:"capabilitiesTooltip.syncedDatabase.disabled",defaultMessage:"Cannot sync databases."})},"synced_database")]}function b(e){const t={width:12,display:"inline",verticalAlign:"middle"};return e?(0,s().b)(t):(0,i().u)(t)}},751109:(e,t,a)=>{a.d(t,{z:()=>i});a(296540);var n=a(474848);const i=(0,a(340498).wt)("slackLogo",{viewBox:"0 0 16 16",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M1.68078 11.7915C2.60586 11.7915 3.36156 11.0358 3.36156 10.1107V8.42993H1.68078C0.755701 8.42993 0 9.18563 0 10.1107C0 11.0358 0.755701 11.7915 1.68078 11.7915Z",fill:"#E01E5A"}),(0,n.jsx)("path",{d:"M5.88928 8.42993C4.9642 8.42993 4.2085 9.18563 4.2085 10.1107V14.3192C4.2085 15.2443 4.9642 16 5.88928 16C6.81436 16 7.57006 15.2443 7.57006 14.3192V10.1107C7.57006 9.18563 6.81436 8.42993 5.88928 8.42993Z",fill:"#E01E5A"}),(0,n.jsx)("path",{d:"M4.2085 1.68078C4.2085 2.60586 4.9642 3.36156 5.88928 3.36156H7.57006V1.68078C7.57006 0.755701 6.81436 0 5.88928 0C4.9642 0 4.2085 0.755701 4.2085 1.68078Z",fill:"#36C5F0"}),(0,n.jsx)("path",{d:"M7.57003 5.88928C7.57003 4.9642 6.81433 4.2085 5.88925 4.2085H1.68078C0.755701 4.2085 0 4.9642 0 5.88928C0 6.81436 0.755701 7.57006 1.68078 7.57006H5.88925C6.81433 7.57006 7.57003 6.81436 7.57003 5.88928Z",fill:"#36C5F0"}),(0,n.jsx)("path",{d:"M10.1107 7.57003C11.0358 7.57003 11.7915 6.81433 11.7915 5.88925V1.68078C11.7915 0.755701 11.0358 0 10.1107 0C9.18563 0 8.42993 0.755701 8.42993 1.68078V5.88925C8.42993 6.81433 9.18563 7.57003 10.1107 7.57003Z",fill:"#2EB67D"}),(0,n.jsx)("path",{d:"M14.3192 4.2085C13.3941 4.2085 12.6384 4.9642 12.6384 5.88928V7.57006H14.3192C15.2443 7.57006 16 6.81436 16 5.88928C16 4.9642 15.2443 4.2085 14.3192 4.2085Z",fill:"#2EB67D"}),(0,n.jsx)("path",{d:"M8.42993 10.1107C8.42993 11.0358 9.18563 11.7915 10.1107 11.7915H14.3192C15.2443 11.7915 16 11.0358 16 10.1107C16 9.18563 15.2443 8.42993 14.3192 8.42993H10.1107C9.18563 8.42993 8.42993 9.18563 8.42993 10.1107Z",fill:"#ECB22E"}),(0,n.jsx)("path",{d:"M11.7915 14.3192C11.7915 13.3941 11.0358 12.6384 10.1107 12.6384H8.42993V14.3192C8.42993 15.2443 9.18563 16 10.1107 16C11.0358 16 11.7915 15.2443 11.7915 14.3192Z",fill:"#ECB22E"})]})})},908928:(e,t,a)=>{a.d(t,{GO:()=>P,Ju:()=>E,KA:()=>T,L0:()=>D,L2:()=>H,dA:()=>V,gI:()=>S,oG:()=>B,sK:()=>k});a(898992),a(354520),a(803949);var n=()=>a(386164),i=()=>a(433847),s=()=>a(68263),o=()=>a(388821),r=()=>a(179034),d=()=>a(824862),l=()=>a(161479),c=()=>a(96689),p=()=>a(798880),b=()=>a(534177),m=()=>a(901389),u=()=>a(855801),f=()=>a(594794),C=()=>a(972435),v=()=>a(731320),g=()=>a(630116),_=()=>a(449506),A=()=>a(496414),x=()=>a(579627),I=()=>a(246826),h=()=>a(436572),M=()=>a(317909),j=()=>a(633457);const w=(0,a(959013).YK)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function y(e,t){const{environment:a,spaceStore:n,spaceRole:i}=t,s=function(e){const{name:t,spaceStore:a,userId:n,icon:i,type:s,environment:o}=e,r=Date.now(),l={name:t,created_at:r,created_by_table:p().oo,created_by_id:n,alive:!0,icon:i,space_id:a.id,last_edited_at:r,last_edited_by_id:n,last_edited_by_table:p().oo};switch(s){case"guest":return{...l,type:"guest",capabilities:e.capabilities,parent_table:c().NX,parent_id:a.id,integration_id:void 0};case"scim":return{...l,id:(0,f().Z1)({environment:o,table:d().GP,spaceId:a.id}),type:"scim",parent_table:p().oo,parent_id:n};default:(0,b().HB)(s)}}(t),o=I().eC({environment:a,table:d().GP,value:s,inMemoryRecordCache:a.defaultRecordCache.inMemoryRecordCache,transaction:e});return x().dy({environment:a,spaceStore:n,permissionItems:[{type:"bot_permission",role:i,bot_id:o.id}],transaction:e}),{botStore:o}}function S(e){const{environment:t}=e,{serverCommitResult:a,performResult:{botStore:n}}=M().createAndCommit({userAction:"botActions.createSpaceBot",environment:t,canUndo:!0,perform:t=>y(t,e)});return{botStore:n,transactionPromise:a}}async function T(e){const{environment:t,botId:a,onSuccess:n}=e,i=await _().callApi({eventName:"deleteBot",environment:t,data:{botId:a}});"failed"===i.type?m().Qg(i):"success"===i.type&&n&&(await j().oX({environment:t}),n())}async function E(e){const{environment:t,table:a,id:i,type:s}=e,o=await _().callApi({eventName:"getBots",environment:t,data:{table:a,id:i,type:s},headers:(0,n().WS)({spaceId:a===c().NX?i:void 0})});if("failed"===o.type)throw m().Qg(o),o;return{botIds:o.data.botIds,recordMap:o.data.recordMap}}async function P(e){const{environment:t,currentSpaceStore:a,botIds:n}=e;if(!a)return;const i=await _().callApi({eventName:"getBotSharedPageIds",environment:t,data:{spaceId:a.id,botIds:n}});if("failed"!==i.type)return i.data;m().Qg(i)}async function V(e){const{environment:t,botId:a}=e,n=await _().callApi({eventName:"getBotToken",environment:t,data:{botId:a}});if("failed"!==n.type)return n.data.token;m().Qg(n)}function k(e){const{botValue:t,store:a,environment:n}=e,{id:s,parent_id:o,parent_table:r,capabilities:d}=t,l={type:"bot_permission",bot_id:s,parent_id:o,parent_table:r,role:(0,i().MD)(d)};M().createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:n,canUndo:!0,perform:e=>{x().zP({environment:n,store:a,permissionItems:[l],transaction:e})}})}function B(e){const{botId:t,store:a,environment:n}=e,i=a.getPermissionItems().filter((0,b().u0)((e=>(0,s().P3)(e)?{true:e}:{false:e})));for(const s of i)if(s.bot_id===t){const e={...s,role:"none"};M().createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:n,canUndo:!0,perform:t=>{x().zP({environment:n,store:a,permissionItems:[e],transaction:t})}})}}function D(e){const{currentSpaceStore:t,environment:a,pages:n,botStore:i,addPermission:s}=e;if(!t)return;const o=(0,v().Ws)({botStore:i,addPermission:s});n.forEach((e=>{const n=g().sk.createChildStore(t,{table:r().ev,id:e});M().createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:a,canUndo:!0,perform:e=>{x().zP({environment:a,store:n,permissionItems:[o],transaction:e})}})}))}async function H(e){const{environment:t,spaceStore:a,spaceViewStore:n,templatePageId:i,botValue:s,pages:r}=e;if(!a)return;const c=g().sk.createChildStore(a,{table:d().GP,id:s.id});if(i)return await async function(e){const{environment:t,spaceStore:a,spaceViewStore:n,templatePageId:i,botStore:s}=e;if(!a||!n)return;try{A().m({message:w.duplicatingTemplate});const e=await _().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:i,spaceId:(0,l().e)(void 0)},shallow:!1}});if("failed"===e.type)return;const r=o().RecordMapWithRole.create(e.data.subtreeRecordMap),{createAndDuplicatePageInSpace:d}=await(0,u().nd)(),{performResult:c}=M().createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,canUndo:!0,perform:e=>{const o=d({environment:t,recordMap:r,copyPageId:i,isPrivate:!0,spaceStore:a,spaceViewStore:n,transaction:e,allowCopyExternalObjectInstances:!1}),l=n.getPrivatePageIds();l.length>0&&I().zv({store:n,data:{private_pages:[o.id,...l]},transaction:e});const c=(0,v().Ws)({botStore:s,addPermission:!0});return x().zP({environment:t,store:o,permissionItems:[c],transaction:e}),o}});return c}catch(r){h().D6({label:C().A.formatMessage(w.duplicatingTemplateError)})}finally{A().V()}}({environment:t,templatePageId:i,botStore:c,spaceStore:a,spaceViewStore:n});D({environment:t,currentSpaceStore:a,botStore:c,pages:r,addPermission:!0})}}}]);