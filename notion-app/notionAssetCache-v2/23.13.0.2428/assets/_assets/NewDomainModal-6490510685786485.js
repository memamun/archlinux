"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[40642],{559044:(e,t,s)=>{s.d(t,{a:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("plusWithBorder",{viewBox:"0 0 22 22",svg:(0,i.jsx)("path",{d:"M20.4336 1.61719C21.0273 2.21094 21.4023 2.92187 21.5586 3.75C21.7227 4.57031 21.8047 5.48047 21.8047 6.48047V15.5859C21.8047 16.5938 21.7227 17.5078 21.5586 18.3281C21.4023 19.1484 21.0273 19.8594 20.4336 20.4609C19.832 21.0547 19.1172 21.4336 18.2891 21.5977C17.4609 21.7617 16.5469 21.8438 15.5469 21.8438H6.44141C5.44141 21.8438 4.52734 21.7617 3.69922 21.5977C2.87891 21.4336 2.16797 21.0547 1.56641 20.4609C0.964844 19.8594 0.585938 19.1484 0.429688 18.3281C0.273438 17.5078 0.195312 16.5938 0.195312 15.5859V6.45703C0.195312 5.47266 0.273438 4.57031 0.429688 3.75C0.59375 2.92969 0.972656 2.21875 1.56641 1.61719C2.16797 1.02344 2.87891 0.644531 3.69922 0.480469C4.52734 0.316406 5.43359 0.234375 6.41797 0.234375H15.5469C16.5469 0.234375 17.4609 0.316406 18.2891 0.480469C19.1172 0.644531 19.832 1.02344 20.4336 1.61719ZM19.918 6.16406C19.918 5.5625 19.8633 4.97266 19.7539 4.39453C19.6445 3.81641 19.4102 3.35156 19.0508 3C18.6992 2.64062 18.2305 2.40625 17.6445 2.29688C17.0664 2.17969 16.4766 2.12109 15.875 2.12109H6.16016C5.54297 2.12109 4.9375 2.17969 4.34375 2.29688C3.75781 2.40625 3.28906 2.63672 2.9375 2.98828C2.58594 3.34766 2.35547 3.82031 2.24609 4.40625C2.13672 4.98438 2.08203 5.58203 2.08203 6.19922V15.9141C2.08203 16.5156 2.13672 17.1055 2.24609 17.6836C2.35547 18.2617 2.58594 18.7266 2.9375 19.0781C3.29688 19.4297 3.76562 19.6641 4.34375 19.7812C4.92969 19.8984 5.52344 19.957 6.125 19.957H15.875C16.4766 19.957 17.0664 19.8984 17.6445 19.7812C18.2305 19.6719 18.6992 19.4375 19.0508 19.0781C19.4023 18.7266 19.6328 18.2617 19.7422 17.6836C19.8594 17.1055 19.918 16.5156 19.918 15.9141V6.16406ZM5.57422 11.0391C5.57422 10.7422 5.66406 10.5039 5.84375 10.3242C6.03125 10.1367 6.27734 10.043 6.58203 10.043H10.0273V6.59766C10.0273 6.30078 10.1172 6.05859 10.2969 5.87109C10.4766 5.68359 10.707 5.58984 10.9883 5.58984C11.2852 5.58984 11.5234 5.68359 11.7031 5.87109C11.8906 6.05078 11.9844 6.29297 11.9844 6.59766V10.043H15.4414C15.7383 10.043 15.9766 10.1367 16.1562 10.3242C16.3438 10.5039 16.4375 10.7422 16.4375 11.0391C16.4375 11.3203 16.3438 11.5508 16.1562 11.7305C15.9766 11.9102 15.7383 12 15.4414 12H11.9844V15.457C11.9844 15.7539 11.8906 15.9961 11.7031 16.1836C11.5234 16.3633 11.2852 16.4531 10.9883 16.4531C10.707 16.4531 10.4766 16.3633 10.2969 16.1836C10.1172 15.9961 10.0273 15.7539 10.0273 15.457V12H6.58203C6.28516 12 6.04297 11.9102 5.85547 11.7305C5.66797 11.5508 5.57422 11.3203 5.57422 11.0391Z"})})},868730:(e,t,s)=>{s.r(t),s.d(t,{NewDomainModal:()=>xe});s(898992),s(354520);var i=s(296540),n=()=>s(56366),o=()=>s(107683),a=()=>s(714300),r=()=>s(577173),d=()=>s(562800),l=()=>s(741972),u=()=>s(204270),c=()=>s(280335),m=()=>s(959013),p=()=>s(7674),C=()=>s(581495),f=s(474848);function x(){return(0,f.jsx)(p().YA,{iconAndTitle:(0,f.jsx)(p().ZQ,{iconGroup:c().Z,iconColorName:"redPrimary",title:(0,f.jsx)(m().sA,{id:"sites.addPaymentMethod.title",defaultMessage:"Add a payment method"})}),description:(0,f.jsx)(m().sA,{id:"sites.addPaymentMethod.subtitle",defaultMessage:"Please go to the billing tab to add a payment method on your account"})})}function h(){return(0,f.jsx)(p().aO,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,f.jsx)(m().sA,{id:"sites.addPaymentMethod.continue",defaultMessage:"Got it"}),onClick:()=>r().Wq()}]})}var D=()=>s(484714),y=()=>s(379725),g=()=>s(719147),j=()=>s(3635);function b(){return(0,f.jsx)(p().YA,{iconAndTitle:(0,f.jsx)(p().ZQ,{iconGroup:y().n,title:(0,f.jsx)(m().sA,{id:"sites.newCustomDomain.title",defaultMessage:"Connect new domain"})}),description:(0,f.jsx)(m().sA,{id:"sites.newCustomDomainDnsSettings.subtitle",defaultMessage:"You can also find these instructions in our <helpCenterLink>help center</helpCenterLink>",values:{helpCenterLink:e=>(0,f.jsx)(g().A,{external:!0,href:"https://www.notion.so/help/connect-a-custom-domain-with-notion-sites",children:e})}})})}function w(e){const{onClick:t,validationInProgress:s}=e;return(0,f.jsx)(p().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:s?(0,f.jsx)(m().sA,{id:"sites.validateCustomDomain.verifying",defaultMessage:"Verifying..."}):(0,f.jsx)(m().sA,{id:"sites.validateCustomDomain.verify",defaultMessage:"Verify"}),isDisabled:s,onClick:t}]})}var A=()=>s(898486),v=()=>s(112527),S=()=>s(134420);const M=(0,m().YK)({paymentError:{id:"sites.payment.error",defaultMessage:"An error occurred while processing your payment. {error}"}});function T(){return(0,f.jsx)(p().YA,{iconAndTitle:(0,f.jsx)(p().ZQ,{iconGroup:y().n,title:(0,f.jsx)(m().sA,{id:"sites.newCustomDomain.title",defaultMessage:"Connect new domain"})}),description:(0,f.jsx)(m().sA,{id:"sites.newCustomDomain.subtitle",defaultMessage:"Bring a domain you already own for your site"})})}function N(e){const{isDisabled:t,creationInProgress:s,onClick:i}=e;return(0,f.jsx)(p().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:s?(0,f.jsx)(m().sA,{id:"sites.newCustomDomain.create.creationInProgress",defaultMessage:"Connecting..."}):(0,f.jsx)(m().sA,{id:"sites.newCustomDomain.create",defaultMessage:"Continue"}),isDisabled:t||s,onClick:i}],secondaryButtons:[{buttonType:"dismiss"}]})}var k=()=>s(401497),B=()=>s(895385);function P(){const e=(0,k().IS)((()=>({description:{width:"100%"}})),[]);return(0,f.jsx)(p().YA,{iconAndTitle:(0,f.jsx)(p().ZQ,{iconGroup:B().V,title:(0,f.jsx)(m().sA,{id:"sites.customHostnameValdation.title",defaultMessage:"It's taking a while to verify"})}),description:(0,f.jsx)(m().sA,{id:"sites.customHostnameValdation.subtitle",defaultMessage:"Please check in ~10 mins to see if the domain is ready for publishing"}),descriptionStyle:e.description})}function I(){return(0,f.jsx)(p().aO,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,f.jsx)(m().sA,{id:"sites.newCustomDomainSuccess.close",defaultMessage:"Done"}),isDisabled:!1,onClick:r().Wq}]})}var q=()=>s(126818);function _(e){const{domainName:t,domainType:s}=e,i=(0,k().IS)((()=>({description:{width:"100%",overflow:"hidden",textOverflow:"ellipsis"}})),[]);return(0,f.jsx)(p().YA,{iconAndTitle:(0,f.jsx)(p().ZQ,{iconGroup:q().g,title:(0,f.jsx)(m().sA,{id:"sites.newCustomDomainValidatedSuccess.title",defaultMessage:"Successfully verified"})}),description:t?(0,f.jsx)(m().sA,{id:"sites.success.subtitle",defaultMessage:"You can now use {domainName} to publish sites",values:{domainName:d().MN({domainName:t,domainType:s})}}):(0,f.jsx)(m().sA,{id:"sites.success.subtitle.subtitleWithoutDomainName",defaultMessage:"You can now use the domain to publish sites"}),descriptionStyle:i.description})}function V(){return(0,f.jsx)(p().aO,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,f.jsx)(m().sA,{id:"sites.newCustomDomainSuccess.close",defaultMessage:"Done"}),isDisabled:!1,onClick:r().Wq}]})}var H=()=>s(340498);const O=(0,H().xh)("addSquareRounded",{default:{loader:()=>s.e(85167).then(s.bind(s,985167))},small:{loader:()=>s.e(87937).then(s.bind(s,887937))},mini:{loader:()=>s.e(46383).then(s.bind(s,246383))},large:{loader:()=>s.e(54005).then(s.bind(s,654005))}});function Y(e){const{spaceStore:t}=e,s=(0,l().V)(t);return(0,f.jsx)(p().YA,{iconAndTitle:(0,f.jsx)(p().ZQ,{iconGroup:O,title:(0,f.jsx)(m().sA,{id:"sites.newDefaultDomain.title",defaultMessage:"Create a new Notion domain"})}),description:(0,f.jsx)(m().sA,{id:"sites.newDefaultDomain.subtitle",defaultMessage:"Your workspace can own up to {maximumDomains} free Notion domains",values:{maximumDomains:s}})})}function W(e){const{isDisabled:t,onClick:s}=e;return(0,f.jsx)(p().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,f.jsx)(m().sA,{id:"sites.newDomain.create",defaultMessage:"Create domain"}),isDisabled:t,onClick:s}],secondaryButtons:[{buttonType:"dismiss"}]})}function Z(e){const{domainName:t,domainType:s}=e,i=(0,k().IS)((()=>({description:{width:"100%",overflow:"hidden",textOverflow:"ellipsis"}})),[]);return(0,f.jsx)(p().YA,{iconAndTitle:(0,f.jsx)(p().ZQ,{iconGroup:q().g,title:(0,f.jsx)(m().sA,{id:"sites.newDefaultDomainSuccess.title",defaultMessage:"Successfully added new domain"})}),description:t?(0,f.jsx)(m().sA,{id:"sites.success.subtitle",defaultMessage:"You can now use {domainName} to publish sites",values:{domainName:d().MN({domainName:t,domainType:s})}}):(0,f.jsx)(m().sA,{id:"sites.success.subtitle.subtitleWithoutDomainName",defaultMessage:"You can now use the domain to publish sites"}),descriptionStyle:i.description})}function Q(){return(0,f.jsx)(p().aO,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,f.jsx)(m().sA,{id:"sites.newDefaultDomainSuccess.close",defaultMessage:"Done"}),isDisabled:!1,onClick:r().Wq}]})}const G=(0,H().xh)("addBrowser",{default:{loader:()=>s.e(72823).then(s.bind(s,72823))},small:{loader:()=>s.e(29385).then(s.bind(s,29385))},mini:{loader:()=>s.e(84983).then(s.bind(s,84983))},large:{loader:()=>s.e(75197).then(s.bind(s,875197))}}),K=(0,H().wt)("plug",{viewBox:"0 0 16 16",svg:(0,f.jsx)("path",{d:"M0.429688 8.88281V6.65625C0.429688 6.19531 0.552734 5.84375 0.798828 5.60156C1.04492 5.35938 1.40234 5.23828 1.87109 5.23828H3.78125C4.03906 5.23828 4.25781 5.21289 4.4375 5.16211C4.62109 5.11133 4.78906 5.02539 4.94141 4.9043C5.09375 4.7793 5.25586 4.60742 5.42773 4.38867C5.88867 3.78711 6.45898 3.32617 7.13867 3.00586C7.82227 2.68555 8.53711 2.52539 9.2832 2.52539H11.1875C11.4297 2.52539 11.627 2.60156 11.7793 2.75391C11.9355 2.90234 12.0137 3.09766 12.0137 3.33984V12.1816C12.0137 12.4277 11.9355 12.627 11.7793 12.7793C11.627 12.9316 11.4297 13.0078 11.1875 13.0078H9.2832C8.53711 13.0078 7.82227 12.8477 7.13867 12.5273C6.45898 12.207 5.88867 11.7441 5.42773 11.1387C5.25586 10.9238 5.09375 10.7559 4.94141 10.6348C4.78906 10.5137 4.62109 10.4277 4.4375 10.377C4.25781 10.3262 4.03906 10.3008 3.78125 10.3008H1.87109C1.40234 10.3008 1.04492 10.1797 0.798828 9.9375C0.552734 9.69141 0.429688 9.33984 0.429688 8.88281ZM1.56641 8.77734C1.56641 8.91016 1.59766 9.00781 1.66016 9.07031C1.72656 9.13281 1.82227 9.16406 1.94727 9.16406H3.78125C4.33984 9.16406 4.8125 9.26172 5.19922 9.45703C5.58984 9.65234 5.96484 9.98438 6.32422 10.4531C6.68359 10.918 7.12109 11.2695 7.63672 11.5078C8.15234 11.7461 8.70117 11.8652 9.2832 11.8652H10.7656C10.8086 11.8652 10.8379 11.8594 10.8535 11.8477C10.8691 11.832 10.877 11.8047 10.877 11.7656V3.76172C10.877 3.72656 10.8691 3.70117 10.8535 3.68555C10.8379 3.66992 10.8086 3.66211 10.7656 3.66211H9.2832C8.70117 3.66211 8.15234 3.7832 7.63672 4.02539C7.12109 4.26367 6.68359 4.61719 6.32422 5.08594C5.96484 5.55078 5.58984 5.88281 5.19922 6.08203C4.8125 6.27734 4.33984 6.375 3.78125 6.375H1.94727C1.82227 6.375 1.72656 6.40625 1.66016 6.46875C1.59766 6.53125 1.56641 6.62695 1.56641 6.75586V8.77734ZM11.2754 6.71484V4.71094H14.5625C14.75 4.71094 14.918 4.75586 15.0664 4.8457C15.2188 4.93555 15.3398 5.05664 15.4297 5.20898C15.5234 5.36133 15.5703 5.5293 15.5703 5.71289C15.5703 5.90039 15.5234 6.07031 15.4297 6.22266C15.3398 6.37109 15.2188 6.49023 15.0664 6.58008C14.918 6.66992 14.75 6.71484 14.5625 6.71484H11.2754ZM11.2754 10.8516V8.8418H14.5625C14.75 8.8418 14.918 8.88672 15.0664 8.97656C15.2188 9.06641 15.3398 9.1875 15.4297 9.33984C15.5234 9.49219 15.5703 9.66016 15.5703 9.84375C15.5703 10.0312 15.5234 10.2012 15.4297 10.3535C15.3398 10.502 15.2188 10.623 15.0664 10.7168C14.918 10.8066 14.75 10.8516 14.5625 10.8516H11.2754Z"})});var z=()=>s(559044),L=()=>s(449418),E=()=>s(762433),R=()=>s(323063),U=()=>s(76118),F=()=>s(534177),X=()=>s(284371),$=()=>s(509657),J=()=>s(125565),ee=()=>s(21140),te=()=>s(779795),se=()=>s(517492),ie=()=>s(981046);function ne(e,t){const s=d().u8(t).filter((e=>"custom"===e.domain_type)).length??0;return U().vQ(e.subscription)<=s}function oe(e){const{billingData:t,customDomainsDisabledReason:s}=e,i=t?U().vQ(t.subscription):0;switch(s){case void 0:return(0,f.jsx)(m().sA,{id:"sites.newDomain.customButtonDescription",defaultMessage:"Connect an existing domain you already own"});case"limit_reached":return(0,f.jsx)(m().sA,{id:"sites.newCustomDomain.maxDomainsCreated",defaultMessage:"Only {maximumDomains} custom domains allowed for this workspace",values:{maximumDomains:L().nK}});case"sales_assisted_workspace":return 0===i?(0,f.jsx)(m().sA,{id:"sites.newCustomDomain.salesAssistedNoPlan",defaultMessage:"Your workspace is on a sales assisted plan. Please contact Sales to add custom domains."}):(0,f.jsx)(m().sA,{id:"sites.newCustomDomain.salesAssistedQuantityLimit",defaultMessage:"You’ve utilized all {quantity} custom domains available. Contact Sales to add more.",values:{quantity:i}});case"has_free_legacy_sites_product":return(0,f.jsx)(m().sA,{id:"sites.newCustomDomain.legacyFreeSku",defaultMessage:"You’ve already used up your {quantity} free custom {quantity, plural, one {domain} other {domains}}.",values:{quantity:i}});default:(0,F().HB)(s)}}function ae(){return(0,f.jsx)(p().YA,{iconAndTitle:(0,f.jsx)(p().ZQ,{iconGroup:G,title:(0,f.jsx)(m().sA,{id:"sites.newDomain.title",defaultMessage:"New domain"})}),description:(0,f.jsx)(m().sA,{id:"sites.newDomain.subtitle",defaultMessage:"Create a unique domain for your Notion site"})})}function re(e){const{spaceStore:t,billingData:s,domainType:n,setDomainType:o}=e,a=(0,D().v3)(),d=!s||!s.paymentMethod,l=(0,i.useCallback)((()=>{o(n),(0,j().h6)(a,{selection:"default"===n?"notion_domain":"custom_domain"}),"default"===n?r().qb("NewDefaultDomain"):ne(s,t)?d?r().qb("AddPaymentMethod"):r().qb("SitesAddOnCheckout"):r().qb("NewCustomDomain")}),[o,n,s,t,d,a]);return(0,f.jsx)(p().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,f.jsx)(m().sA,{id:"sites.newDomain.continue",defaultMessage:"Continue"}),onClick:l}],secondaryButtons:[{buttonType:"dismiss"}]})}function de(e){const{spaceStore:t,billingData:s,domainType:i,setDomainType:o}=e,{defaultDomainsCount:a,customDomainsCount:r}=(0,n().K8)((()=>{const e=d().u8(t);return{defaultDomainsCount:e.filter((e=>"default"===e.domain_type)).length,customDomainsCount:e.filter((e=>"custom"===e.domain_type)).length}}),[t]),u=(0,l().V)(t),c=a>=u,p=!c,C=(0,n().K8)((()=>{var e;return r>=L().nK?"limit_reached":ne(s,t)&&E().N8(null==s?void 0:s.subscription)?"sales_assisted_workspace":ne(s,t)&&"legacy"===(null===(e=E().KH(s,"sites_custom_hostnames"))||void 0===e||null===(e=e.price)||void 0===e?void 0:e.state)?"has_free_legacy_sites_product":void 0}),[r,s,t]),x=p&&"default"===i,h=!C&&"custom"===i,D=(0,k().IS)((e=>({buttonIcon:{color:e.mediumTextColor,height:14,width:14,marginTop:4},plugIcon:{color:e.mediumTextColor,height:16,width:16,marginTop:4},newDomainButtonContainer:{width:"100%",display:"flex",flexDirection:"column",gap:6},newDomainButton:{display:"flex",flexDirection:"row",alignItems:"flex-start",flex:1,width:"100%",paddingLeft:12,paddingTop:13,paddingBottom:14,paddingRight:16},defaultDomainButtonBorder:{borderColor:x?e.blueColor:e.outlineButtonBorder},customDomainButtonBorder:{borderColor:h?e.blueColor:e.outlineButtonBorder},newDomainButtonLabel:{display:"flex",flexDirection:"column",flex:1},priceDescription:{color:e.text.tertiary,fontWeight:X().Wy.medium}})),[x,h]),y=function(e){return!E().N8(e.subscription)}(s);return(0,f.jsxs)("div",{style:D.newDomainButtonContainer,children:[(0,f.jsx)($().a,{style:{...D.newDomainButton,...D.defaultDomainButtonBorder},label:(0,f.jsx)(m().sA,{id:"sites.newDomain.notionButtonTitle",defaultMessage:"Notion domain"}),description:(0,f.jsxs)(ee().wt,{gap:4,children:[c?(0,f.jsx)(m().sA,{id:"sites.newDomain.maxDomainsCreated",defaultMessage:"Only {maximumDomains} .notion.site domains allowed for this workspace",values:{maximumDomains:u}}):(0,f.jsx)(m().sA,{id:"sites.newDomain.notionButtonDescription",defaultMessage:"Create a new .notion.site"}),y&&(0,f.jsx)(J().A,{isSmall:!0,style:D.priceDescription,children:(0,f.jsx)(m().sA,{id:"sites.newDomain.notionDomainCostDescription",defaultMessage:"Free"})})]}),additionalContent:(0,z().a)(D.buttonIcon),onChange:()=>{},isDisabled:!p,isSelected:x,onClick:()=>o("default"),value:"default",selectType:"radio",selectAlignXAxis:"right"}),(0,f.jsx)($().a,{style:{...D.newDomainButton,...D.customDomainButtonBorder},label:(0,f.jsx)(m().sA,{id:"sites.newDefaultDomain.customButtonTitle",defaultMessage:"Custom domain"}),description:(0,f.jsxs)(ee().wt,{gap:4,children:[(0,f.jsx)(oe,{customDomainsDisabledReason:C,billingData:s}),y&&(0,f.jsx)(J().A,{isSmall:!0,style:D.priceDescription,children:(0,f.jsx)(le,{spaceStore:t,billingData:s})})]}),additionalContent:K(D.plugIcon),onChange:()=>{},isDisabled:Boolean(C),isSelected:h,onClick:()=>o("custom"),value:"custom",selectType:"radio",selectAlignXAxis:"right"})]})}function le(e){const{spaceStore:t,billingData:s}=e,o=(0,D().v3)();(0,i.useEffect)((()=>{te().$W({environment:o,spaceId:t.id})}),[o,t]);const a=(0,n().K8)((()=>(0,R().z2)({prices:ie().A.state.prices,billingData:s,product:"sites_custom_hostnames"})),[s]);if(a){const e=a.getCostPerBillingInterval({quantity:1});return(0,f.jsx)(m().sA,{id:"checkout.orderSummary.pricePerInterval",defaultMessage:"{price} / {interval, select, month {month} year {year} other {period}}",values:{price:(0,f.jsx)(se().v,{cost:e.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"}),interval:a.billingInterval}})}return(0,f.jsx)(m().sA,{id:"sites.newDomain.customDomainCostDescription",defaultMessage:"Paid"})}var ue=()=>s(916833),ce=()=>s(84817),me=()=>s(836251);function pe(e){const{isTrial:t}=e;return t?(0,f.jsx)(p().YA,{iconAndTitle:(0,f.jsx)(p().ZQ,{iconGroup:ue().z,title:(0,f.jsx)(m().sA,{id:"sites.sitesAddOnCheckout.trial.title",defaultMessage:"Upgrade to Plus and purchase add-on"})}),description:(0,f.jsx)(m().sA,{id:"sites.sitesAddOnCheckout.trial.subtitle",defaultMessage:"You’re currently on a trial of the Plus plan. Upgrade to the Plus plan immediately and add a custom domain to publish with."})}):(0,f.jsx)(p().YA,{iconAndTitle:(0,f.jsx)(p().ZQ,{iconGroup:y().n,title:(0,f.jsx)(m().sA,{id:"sites.sitesAddOnCheckout.title",defaultMessage:"Custom domain add-on"})}),description:(0,f.jsx)(m().sA,{id:"sites.sitesAddOnCheckout.subtitle",defaultMessage:"Notion charges a monthly fee to host your custom domain"})})}function Ce(e){const{isTrial:t,isDisabled:s,onClick:i}=e;return(0,f.jsx)(p().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:t?(0,f.jsx)(m().sA,{id:"sites.sitesAddOnCheckout.continue.trial",defaultMessage:"Upgrade to Plus and purchase add-on"}):(0,f.jsx)(m().sA,{id:"sites.sitesAddOnCheckout.continue",defaultMessage:"Purchase add-on"}),isDisabled:s,onClick:i}],caption:(0,f.jsx)(ce().Y1,{width:"hug",children:(0,f.jsx)(m().sA,{defaultMessage:'By clicking "Purchase add-on" you agree to the{br}<terms>Notion Terms and Conditions</terms>',id:"sites.sitesAddOnCheckout.caption",values:{br:(0,f.jsx)("br",{}),terms:e=>(0,f.jsx)(g().A,{external:!0,href:(0,me().xS)("terms"),children:e})}})})})}const fe={SelectDomainType:function(e){const{spaceStore:t,billingData:s,domainType:i,setDomainType:n}=e;return(0,f.jsx)(C().eh.Provider,{value:r().Wq,children:(0,f.jsx)(p().tf,{header:(0,f.jsx)(ae,{}),footer:(0,f.jsx)(re,{spaceStore:t,billingData:s,domainType:i,setDomainType:n}),children:(0,f.jsx)(de,{spaceStore:t,billingData:s,domainType:i,setDomainType:n})})})},NewDefaultDomain:function(e){const{spaceStore:t,domainName:s,setDomainName:n}=e,o=(0,D().v3)(),a=(0,m().tz)(),[d,l]=(0,i.useState)(void 0),u=(0,i.useCallback)((async()=>{if(s){const{error:e}=await r().qs({environment:o,spaceId:t.id,domainName:s,domainType:"default"});if(e)return void l((0,A().Hu)(a,e));r().qb("NewDefaultDomainSuccess")}}),[t,o,a,s]);return(0,f.jsx)(C().eh.Provider,{value:r().Wq,children:(0,f.jsx)(p().tf,{header:(0,f.jsx)(Y,{spaceStore:t}),footer:(0,f.jsx)(W,{isDisabled:!s,onClick:u}),children:(0,f.jsx)(S().A,{domainName:s,domainType:"default",setDomainName:n,errorMessage:d})})})},NewCustomDomain:function(e){const{spaceStore:t,setDomainId:n,domainName:o,setDomainName:a}=e,d=(0,D().v3)(),l=(0,m().tz)(),[u,c]=(0,i.useState)(!1),[x,h]=(0,i.useState)(void 0),y=(0,i.useCallback)((async()=>{if(o){c(!0);const e=await r().qs({environment:d,spaceId:t.id,domainName:o,domainType:"custom"});if(c(!1),e.error)return void h((0,A().Hu)(l,e.error));if(n(e.domainId),e.subscriptionWasUpdated&&"requires_action"===e.paymentIntentStatus){const t=await(0,v().getStripe)();if(!t)return;const i=await t.handleNextAction({clientSecret:e.paymentIntentClientSecret??""});void 0!==i.error&&(s(252105).cr(d,{error:i.error.code,stripe_decline_code:i.error.decline_code}),h(l.formatMessage(M.paymentError,{error:(0,v().translateStripeError)(l,i.error)})))}r().qb("CustomDomainValidation")}}),[t,d,l,o,n]);return(0,f.jsx)(C().eh.Provider,{value:r().Wq,children:(0,f.jsx)(p().tf,{header:(0,f.jsx)(T,{}),footer:(0,f.jsx)(N,{isDisabled:!o,creationInProgress:u,onClick:y}),children:(0,f.jsx)(S().A,{domainName:o,domainType:"custom",setDomainName:a,isSubmitting:u,errorMessage:x})})})},CustomDomainValidation:function(e){const{spaceStore:t,domainId:n,domainName:o}=e,a=(0,D().v3)(),[d,l]=(0,i.useState)(!1);(0,i.useEffect)((()=>{if(n&&d){const e=s(244641).c9.now();r().hS({environment:a,domainId:n,spaceId:t.id,poll:!0}).then((t=>{t.error?l(!0):"active"===t.domainStatus?(r().qb("NewCustomDomainValidatedSuccess"),(0,j().Aw)(a,{type:"sync",duration_in_milliseconds:-e.diffNow().toMillis()})):(r().qb("NewCustomDomainPendingSuccess"),(0,j().Aw)(a,{type:"async",duration_in_milliseconds:-e.diffNow().toMillis()}))}))}}),[a,t,n,d]);const u=(0,i.useCallback)((()=>{n&&l(!0)}),[n,l]),c=(0,i.useCallback)((()=>{d&&(0,j().NS)(a),r().Wq()}),[a,d]);return n&&o?(0,f.jsx)(C().eh.Provider,{value:c,children:(0,f.jsx)(p().tf,{header:(0,f.jsx)(b,{}),footer:(0,f.jsx)(w,{onClick:u,validationInProgress:d}),children:(0,f.jsx)(s(408044).A,{spaceId:t.id,domainId:n,domainName:o})})}):null},NewDefaultDomainSuccess:function(e){const{domainName:t,domainType:s}=e;return(0,f.jsx)(C().eh.Provider,{value:r().Wq,children:(0,f.jsx)(p().tf,{header:(0,f.jsx)(Z,{domainName:t,domainType:s}),footer:(0,f.jsx)(Q,{}),showDismissButton:!1})})},NewCustomDomainValidatedSuccess:function(e){const{domainName:t,domainType:s}=e;return(0,f.jsx)(C().eh.Provider,{value:r().Wq,children:(0,f.jsx)(p().tf,{header:(0,f.jsx)(_,{domainName:t,domainType:s}),footer:(0,f.jsx)(V,{}),showDismissButton:!1})})},NewCustomDomainPendingSuccess:function(){return(0,f.jsx)(C().eh.Provider,{value:r().Wq,children:(0,f.jsx)(p().tf,{header:(0,f.jsx)(P,{}),footer:(0,f.jsx)(I,{}),showDismissButton:!1})})},SitesAddOnCheckout:function(e){const{spaceStore:t,billingData:i}=e,{price:n,checkoutState:o,isTrial:a,subtotal:d,recurringSubtotal:l}=(0,s(485771).A)({spaceStore:t,billingData:i});return n&&o?(0,f.jsx)(C().eh.Provider,{value:r().Wq,children:(0,f.jsx)(p().tf,{header:(0,f.jsx)(pe,{isTrial:a}),footer:(0,f.jsx)(Ce,{isTrial:a,isDisabled:!n||!d,onClick:()=>r().qb("NewCustomDomain")}),children:(0,f.jsx)(s(963176).A,{billingData:i,price:n,checkoutState:o,subtotal:d,recurringSubtotal:l})})}):null},AddPaymentMethod:function(e){return(0,f.jsx)(C().eh.Provider,{value:r().Wq,children:(0,f.jsx)(p().tf,{header:(0,f.jsx)(x,{}),footer:(0,f.jsx)(h,{})})})}};function xe(e){const{spaceStore:t}=e,s=(0,a().l)({spaceId:t.id}),c=(0,n().K8)((()=>d().u8(t).filter((e=>"default"===e.domain_type)).length),[t])>=(0,l().V)(t),[m,p]=(0,i.useState)(void 0),[C,x]=(0,i.useState)(void 0),[h,D]=(0,i.useState)(c?"custom":"default"),y=(0,n().K8)((()=>{const e=u().A.getState();if(e.isOpen)return e.step}),[]);if(!s)return null;if(!y)return null;const g="NewDefaultDomainSuccess"===y||"NewCustomDomainValidatedSuccess"===y||"NewCustomDomainPendingSuccess"===y||"AddPaymentMethod"===y,j=fe[y];return(0,f.jsx)(o().s,{isOpen:!0,onDismiss:r().Wq,areaConstraint:{width:{type:"fixed",length:g?300:450}},render:()=>(0,f.jsx)(j,{spaceStore:t,billingData:s,domainId:m,domainName:C,domainType:h,setDomainId:p,setDomainName:x,setDomainType:D}),animateSizeTransition:!g})}}}]);