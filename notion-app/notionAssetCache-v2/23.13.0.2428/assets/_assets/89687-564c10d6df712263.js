"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[89687],{12:(e,t,o)=>{o.d(t,{VL:()=>_,XV:()=>f});var n=()=>o(206267),r=()=>o(386164),i=()=>o(388821),a=()=>o(919709),s=()=>o(449506),l=()=>o(508496);let c=function(e){return e[e.NoConfig=100]="NoConfig",e[e.LoadPageChunkFailed=101]="LoadPageChunkFailed",e[e.MissingPageRecord=103]="MissingPageRecord",e[e.InvalidPageParent=104]="InvalidPageParent",e[e.MissingTitle=105]="MissingTitle",e[e.MissingPromptText=106]="MissingPromptText",e[e.MissingCollectionSchema=107]="MissingCollectionSchema",e[e.MissingPromptType=108]="MissingPromptType",e[e.InvalidPromptType=109]="InvalidPromptType",e[e.FavoritesDisabled=110]="FavoritesDisabled",e}({});const d="Prompt type",u="Prompt text",p="Run immediately",m="Help me write",g="Help me edit";function f(){{const e=l().default.getConfigKey("gtm_ai_favorites","space_id"),t=l().default.getConfigKey("gtm_ai_favorites","collection_id");if(e&&t)return{spaceId:e,collectionId:t}}}function v(e,t,o){const n=function(e,t,o){for(const r in e){const i=e[r];var n;if(i&&i.name===o)return null===(n=t.properties)||void 0===n?void 0:n[r]}}(e,t,o);if(n)return(0,a().k4p)(n)}function h(e){return{type:"error",code:e}}async function _(e){var t;const{environment:o,blockId:_}=e;await l().default.waitUntilStatsigReady();const b=f();if(!b)return h(c.NoConfig);const{spaceId:y,collectionId:S}=b,w={eventName:"loadCachedPageChunkV2",environment:o,data:{page:{spaceId:y,id:_},limit:0,cursor:{stack:[]},verticalColumns:!1},headers:(0,r().WS)({spaceId:y,recordId:_})},k=await s().callApi(w);if("success"!==k.type)return h(c.LoadPageChunkFailed);const I=i().RecordMapWithRole.create(k.data.recordMap),A=I.getValue({table:"block",id:_,spaceId:y});if(!A)return h(c.MissingPageRecord);if(A.parent_id!==S)return h(c.InvalidPageParent);const x=(0,a().k4p)(null===(t=A.properties)||void 0===t?void 0:t.title);if(!x)return h(c.MissingTitle);const C=await async function(e){const{environment:t,recordMap:o,blockId:n,spaceId:i,collectionId:a}=e,l=o.getValue({table:"collection",id:a,spaceId:i});if(null!=l&&l.schema)return l.schema;const c=await s().callApi({eventName:"getPublicPageData",environment:t,data:{type:"block-space",blockId:n,spaceId:i},headers:(0,r().WS)({spaceId:i,recordId:n})});return"failed"!==c.type?c.data.collectionSchema:void 0}({environment:o,recordMap:I,blockId:_,spaceId:y,collectionId:S});if(!C)return h(c.MissingCollectionSchema);const T=v(C,A,u);if(!T)return h(c.MissingPromptText);const M=v(C,A,d);if(!M)return h(c.MissingPromptType);const P=(B=M)===g?"helpMeEdit":B===m?"helpMeWrite":void 0;var B;if(!P)return h(c.InvalidPromptType);const R=function(e,t,o){return"Yes"===v(e,t,o)}(C,A,p);return{type:"success",favorite:{id:n().JW(),name:x,executeImmediately:R,gtmFavoriteId:_,action:{type:P,prompt:T,promptTitle:void 0}}}}},342:(e,t,o)=>{o.d(t,{Zu:()=>r,oB:()=>n,oW:()=>i});const n="PageLayoutEditorContext",r="WorkflowTemplatesOnboarding",i="ChartDrilldownContext"},1130:(e,t,o)=>{o.d(t,{Ig:()=>L,wn:()=>j,K2:()=>V,ZS:()=>N,PF:()=>U,LC:()=>F,Wj:()=>E,jy:()=>z,sy:()=>O});o(296540);var n=()=>o(857639),r=()=>o(416845),i=()=>o(763884),a=()=>o(243020),s=()=>o(427704),l=()=>o(96689),c=()=>o(84520),d=()=>o(798880),u=()=>o(959013),p=()=>o(319625),m=()=>o(796756),g=()=>o(901389),f=()=>o(496414),v=()=>o(246826),h=()=>o(435009),_=()=>o(125565),b=()=>o(867899),y=()=>o(235921);const S=new(o(645873).O2)("onboardingStateActions",(async()=>Promise.all([o.e(23806),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(58550),o.e(22900),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(67435),o.e(75355),o.e(70769),o.e(38911),o.e(25426),o.e(89244),o.e(62342),o.e(57869),o.e(98942),o.e(45016)]).then(o.bind(o,616385))));var w=()=>o(989423),k=()=>o(898486),I=()=>o(974233),A=()=>o(972435),x=()=>o(719431),C=()=>o(406792),T=()=>o(351360),M=()=>o(630116),P=()=>o(144114),B=()=>o(607859),R=o(474848);async function E(e,t){if(!e.currentUser.id)return!1;const o=D(e);return!!P().Qf(o)||(t||(t=new(M().LU)(e,{table:d().oo,id:e.currentUser.id}),await t.awaitNonNullValue()),!t.getOnboardingCompleted())}function D(e){return{...i().A.get({userId:e.currentUser.id,key:B().onboardingPreferenceKey}),currentUserId:e.currentUser.id,stageStats:{startedTimeStampMs:Date.now()}}}async function N(e,t){const{state:o}=B().default;if(o.isLoading||o.isOnboarding||!e.currentUser.id)return;const r=D(e);if(!r.isOnboarding)return;if(P().O9(r)&&t&&(null==t?void 0:t.id)!==r.spaceViewId)return;const{flow:i}=r,a="desktop_join_or_create_space"===i||"mobile_join_or_create_space"===i,s=await P().of({environment:e,disableRedirects:a});s&&(r.onboardingData=s),B().default.setState(r);const{spaceId:d}=r;if(d&&(e.device.isMobileNative&&n().log({level:"info",from:"onboardingActions",type:"SpaceSwitchingDebug",data:{message:"onboardingActions.restoreOnboardingState setting space",spaceId:d}}),T().default.setState({...T().default.state,currentSpaceStore:new(M().SL)(e,{table:l().NX,id:d})})),r.isOnboarding&&"spaceViewId"in r&&r.spaceViewId){const t=new(M().vH)(e,{table:c().mu,id:r.spaceViewId});T().default.setState({...T().default.state,currentSpaceViewStore:t})}q(e,r)}async function L(e){await O(e,{type:"create-or-join",source:"create_or_join_space"})}function F(e){const{userStore:t,transaction:o}=e;v().zv({store:t,data:{onboarding_completed:!0},transaction:o})}function U(e){const{userStore:t,transaction:o}=e;v().zv({store:t,data:{mobile_onboarding_completed:!0},transaction:o})}async function O(e,t){(0,w().u4)({environment:e,event:{eventName:"start_onboarding",eventProperties:{type:t.type,redirect_url:t.redirectUrl,disable_redirect_url:t.disableRedirectUrl,source:t.source}}});try{h().oo({environment:e,url:s().JZ.onboarding});const o=C().default.DO_NOT_USE_markLegacy("onboarding.load_dependencies"),n=await P().of({environment:e,disableRedirects:Boolean(t.disableRedirectUrl)||"create-or-join"===t.type}),r=P().sg(n),i=await S.load(),a=await i.getInitialState({environment:e,startOnboardingArgs:t,onboardingData:n,redirectData:r});C().default.DO_NOT_USE_measureLegacy(o,{environment:e,data:{flow:"flow"in a?a.flow:void 0}}),a&&a.isOnboarding&&("invalid"===r.type&&(a.stage="error"),B().default.setState(a),await async function(e,t,o){const{initializeOrRestoreContextualizedOnboardingState:n,memoizeAndTrackContextualizedOnboardingStageWithHistoricalContext:r}=await b().F.contextualizedOnboardingStateActions.load();await n({environment:e,onLoadDependencies:()=>{},isInvalidRedirect:t,shouldRestoreOnboardingState:!1,shouldShowMobileTutorialOnboarding:o});const i=y().A.state,{getContextualizedOnboardingAnalyticsData:a}=await b().F.contextualizedOnboardingHelpers.load(),s=a({onboardingState:i,environment:e});m().Gk(e,s),m().Pz(e,s),r(e,i)}(e,"invalid"===r.type,"mobile-onboarding"===t.type),a.isNewUser&&m().PU(e))}catch(o){const t=(0,p().A)(o);!function(e,t,o){B().default.setState({...B().default.state,isLoading:!1}),m().H$(e,{...P().M6(B().default.state),errorMessage:t.message}),n().log({level:"error",from:"onboardingActions",type:"handleError",error:{message:`Found onboarding error: ${t.message}`}});const r=o?async()=>await x().actuallyLogoutAndDeleteMostLocalData({environment:e,logoutOrigin:a().d.OnboardingError}):void 0;g().rG({message:t.message,onAccept:r})}(e,t,"WorkspaceCreationError"===t.name&&(0,r().US)(t)&&t.data.newUser)}}async function V(e,t){if(t.isOnboarding)try{m().H1(e,P().M6(t));const o=await S.load();let n=await o.updateAndGetNextState(t,e);n.isOnboarding?(n={...n,stageStats:{startedTimeStampMs:Date.now()}},B().default.setState(n),q(e,n)):B().default.setState(n),m().Pz(e,P().M6(n))}catch(o){j(e,(0,p().A)(o))}}async function j(e,t){if(B().default.setState({...B().default.state,isLoading:!1}),n().log({level:"error",from:"onboardingActions",type:"handleOnboardingError",error:{message:`Found onboarding error: ${t.message}`,stack:String(t.stack)}}),f().V(),t instanceof I().C&&(0,r().Ow)(t.data.responseBody)&&"UnauthorizedError"===t.data.responseBody.name)return void m().bn(e,{...P().M6(B().default.state),errorMessage:t.message,debugMessage:"UnauthorizedError"});let o;if(t instanceof I().C){var i;const e=null==t||null===(i=t.data)||void 0===i||null===(i=i.responseBody)||void 0===i?void 0:i.clientData;e&&(o=(0,k().t4)(A().A.getIntl(),e))}m().bn(e,{...P().M6(B().default.state),errorMessage:t.message,debugMessage:o||"undefined"});const{accept:a}=await g().Gh({message:(0,R.jsxs)("div",{children:[(0,R.jsx)(_().A,{style:{fontSize:17,fontWeight:500,lineHeight:"24px",paddingBottom:8},children:(0,R.jsx)(u().sA,{defaultMessage:"Oops, something went wrong.",id:"onboardingActions.onboardingErrorDialog.message"})}),(0,R.jsx)("div",{children:o??t.message})]}),acceptLabel:(0,R.jsx)(u().sA,{defaultMessage:"Start over",id:"onboardingActions.onboardingErrorDialog.startOverButton.label"}),cancelLabel:(0,R.jsx)(u().sA,{defaultMessage:"Close",id:"onboardingActions.onboardingErrorDialog.closeButton.label"})});a&&function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O;const r=B().default.state;P().up(r)?o(e,{type:"new-user",disableRedirectUrl:!0,source:"redirect_to_onboarding_start"}):P().Cy(r)?o(e,{type:"create-or-join",disableRedirectUrl:!0,source:"redirect_to_onboarding_start"}):e.device.isMobile?o(e,{type:"mobile-onboarding",disableRedirectUrl:!0,source:"redirect_to_onboarding_start"}):n().log({level:"error",from:"onboardingActions",type:"handleOnboardingError",error:{message:`Could not redirect onboarding: ${t.message}`,stack:String(t.stack)}})}(e,t)}function z(e){const{state:t}=B().default;m().IY(e,P().M6(t)),B().default.setState({isOnboarding:!1,isLoading:!1,currentUserId:e.currentUser.id})}function q(e,t,o){if(!t.isOnboarding)return;const n=[...t.historicalStages||[],{stageName:t.stage,stageNumber:t.stageNumber,timestamp:Date.now()}];B().default.setState({...t,historicalStages:n.length>20?[{stageName:"truncated",stageNumber:-1,timestamp:Date.now()}]:n}),m().bL(e,"onboarding_stage",{...P().M6(t),historical_stages:n,back:o})}},1346:(e,t,o)=>{o.d(t,{Hq:()=>S,f_:()=>b,jB:()=>w,qB:()=>y,zw:()=>k});o(16280),o(898992),o(354520),o(581454);var n=()=>o(206267),r=()=>o(68263),i=()=>o(798880),a=()=>o(322769),s=()=>o(166386),l=()=>o(449412),c=()=>o(496603),d=()=>o(534177),u=()=>o(252105),p=()=>o(351360),m=()=>o(630116),g=()=>o(134217),f=()=>o(830140),v=()=>o(668721),h=()=>o(749240),_=()=>o(991249);function b(e){f().A.setState({open:!0,addOnFeature:e,stage:"limit_reached",addOnUpgradeId:n().JW(),tax:0})}function y(){f().A.setState({open:!1})}function S(e){const t=f().A.state;t.open&&f().A.setState({...t,stage:"confirm_purchase",coupon:e&&(0,s().J5)(e)?e:void 0})}async function w(e){const{environment:t,spaceStore:o,from:n}=e,s=function(){const e=h().subscriptionDataStoreInstance.state,t=(e?g().Be(e):[]).filter((e=>(0,a().c7)(e)&&(0,r().Km)(e.role))).map((e=>e.userId));if(!t||0===t.length)throw new Error("No admins found in the current space");return(0,c().XM)(t)}(),d=o.getName(),p=m().LU.createChildStore(o,{table:i().oo,id:s});await p.load();const f=p.getEmail();f?u().go(t,{admin_id:s,admin_email:f,space_name:d,from:n}):l().Fg(new Error("Could not get email for admin in sendMemberRequestForAddOn"))}function k(e){const{environment:t,upsellType:o,isAssistantEnabled:n}=e,r=e.from??(n?"ai_assistant_limit_in_app":"ai_qna_limit_in_app");if("upsell"===o)(0,_().K)(t,{from:r,upsell:{type:"product",product:"ai",limit:{type:"none"}}});else if("requestAccess"===o||"requestAccessNoFreeCredits"===o){const e=p().default.state.currentSpaceStore;if(!e)return;w({environment:t,spaceStore:e,from:r});const o=v().A.state;o&&!o.isEligible&&v().A.setState({...o,requestedAccess:!0})}else(0,d().HB)(o)}},2220:(e,t,o)=>{o.d(t,{u:()=>r});var n=()=>o(679924);function r(e){const{environment:t,event:o,opts:r}=e,{eventName:i,eventProperties:a}=o;(0,n().v)(t,i,a,r)}},3020:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isActive:!1}}cloneState(){return o(496603).o8(this.state)}}const r=new n},3284:(e,t,o)=>{o.d(t,{Q:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M6.475 3.125a.625.625 0 1 0 0 1.25h7.975c.65 0 1.175.526 1.175 1.175v6.057l-1.408-1.408a.625.625 0 1 0-.884.884l2.475 2.475a.625.625 0 0 0 .884 0l2.475-2.475a.625.625 0 0 0-.884-.884l-1.408 1.408V5.55a2.425 2.425 0 0 0-2.425-2.425zM3.308 6.442a.625.625 0 0 1 .884 0l2.475 2.475a.625.625 0 1 1-.884.884L4.375 8.393v6.057c0 .649.526 1.175 1.175 1.175h7.975a.625.625 0 0 1 0 1.25H5.55a2.425 2.425 0 0 1-2.425-2.425V8.393L1.717 9.801a.625.625 0 1 1-.884-.884z"})},r=(0,o(340498).wt)("arrowSquarePathUpDown",n)},4319:(e,t,o)=>{o.d(t,{A_:()=>H,De:()=>G,GZ:()=>$,Nv:()=>te,Uz:()=>V,au:()=>X,bi:()=>j,g:()=>ee,ic:()=>q,jG:()=>O,jP:()=>J,kn:()=>F,mL:()=>z,sp:()=>oe,td:()=>L,wr:()=>U});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454);var n=()=>o(584262),r=()=>o(9559),i=()=>o(970013),a=()=>o(713998),s=()=>o(921940),l=()=>o(604995),c=()=>o(683259),d=()=>o(651124),u=()=>o(977345),p=()=>o(416504),m=()=>o(384813),g=()=>o(792071),f=()=>o(450648),v=()=>o(179034),h=()=>o(161479),_=()=>o(798880),b=()=>o(919709),y=()=>o(496603),S=()=>o(450510),w=()=>o(421107),k=()=>o(654062),I=()=>o(780054),A=()=>o(909470),x=()=>o(972435),C=()=>o(919878),T=()=>o(508496),M=()=>o(436696),P=()=>o(612008),B=()=>o(896628),R=()=>o(246826),E=()=>o(778417),D=()=>o(606952),N=()=>o(317909);function L(e){const{environment:t,selectionKey:o,selection:n,currentRowStore:r}=e,i=w().A.state.isActive?w().A.state.currentRowStore:void 0;w().A.setState({isActive:!0,selectionKey:o,selection:n,currentRowStore:r||i}),E().IU({environment:t})}function F(e){w().A.update((t=>({...t,currentRowStore:e})))}function U(){w().A.setState({isActive:!1})}function O(e){const{environment:t,selectionKey:o,shiftKey:n,columnCount:r,selection:i}=e;if(n&&i.end.col>0){const e={col:i.end.col-1,row:i.end.row},n={start:i.start,end:e};return L({environment:t,selectionKey:o,selection:n}),n}if(!n&&i.start.col>0){const e={col:i.start.col-1,row:i.start.row},n={start:e,end:e};return L({environment:t,selectionKey:o,selection:n}),n}if(!n&&0===i.start.col&&i.start.row>0){const e={col:r-1,row:i.start.row-1},n={start:e,end:e};return L({environment:t,selectionKey:o,selection:n}),n}return i}function V(e){const{environment:t,selectionKey:o,shiftKey:n,columnCount:r,rowCount:i,selection:a}=e;if(n&&a.end.col<r-1){const e={col:a.end.col+1,row:a.end.row},n={start:a.start,end:e};return L({environment:t,selectionKey:o,selection:n}),n}if(!n&&a.start.col<r-1){const e={col:a.start.col+1,row:a.start.row},n={start:e,end:e};return L({environment:t,selectionKey:o,selection:n}),n}if(!n&&a.start.col>=r-1&&a.start.row<i-1){const e={col:0,row:a.start.row+1},n={start:e,end:e};return L({environment:t,selectionKey:o,selection:n}),n}return a}function j(e){const{environment:t,selectionKey:o,shiftKey:n,selection:r}=e;if(n&&r.end.row>0){const e={col:r.end.col,row:r.end.row-1},n={start:r.start,end:e};return L({environment:t,selectionKey:o,selection:n}),n}if(!n&&r.start.row>0){const e={col:r.start.col,row:r.start.row-1},n={start:e,end:e};return L({environment:t,selectionKey:o,selection:n}),n}return r}function z(e){const{environment:t,selectionKey:o,shiftKey:n,rowCount:r,selection:i}=e;if(n&&i.end.row<r-1){const e={col:i.end.col,row:i.end.row+1},n={start:i.start,end:e};return L({environment:t,selectionKey:o,selection:{start:i.start,end:e}}),n}if(!n&&i.start.row<r-1){const e={col:i.start.col,row:i.start.row+1},n={start:e,end:e};return L({environment:t,selectionKey:o,selection:n}),n}return i}function q(e){const{selection:t,schema:o,currentRows:n,currentPropertyFormats:r,transaction:a}=e,s=S().hn(t);for(let l=s.minRow;l<=s.maxRow;l++){const e=n[l];if(e)for(let t=s.minCol;t<=s.maxCol;t++){const n=r[t],s=o[n.property];if(i().z3(s))continue;const l=e.getPropertyStore(n.property);D().KY({environment:l.environment,store:l,value:void 0,transaction:a})}}}function H(e){const{selection:t,currentRows:o,event:r,formulasModule:i}=e;if(null===r.clipboardData)return;const a=S().hn(t);let l="";const d=[],u=o.slice(Math.max(0,a.minRow),a.maxRow+1).filter((e=>e&&e.isDefined()));for(const n of u){const t=[];d.push(t);for(let o=a.minCol;o<=a.maxCol;o++){const[r,i]="selectionKey"in e?W({rowStore:n,x:o,collectionViewBlockStore:e.selectionKey.collectionViewBlockStore,...e}):K({rowStore:n,x:o,...e});t.push([r,n.pointer]),i&&(l+=i),o<a.maxCol&&(l+="\t")}n!==y().HV(u)&&(l+="\n")}if(r.preventDefault(),r.clipboardData.setData("text/plain",l),function(e,t){if(null===e.clipboardData)return;e.clipboardData.setData(S().sE,JSON.stringify(t))}(r,d),"simpleTableStore"in e){const{environment:t,simpleTableStore:o,columnOrder:l,exportJsxRenderer:d}=e;if(!d)return;const{default:m,jsxToStaticMarkup:f}=d,_=t.currentUser.id,b=t.defaultRecordCache.inMemoryRecordCache.makeGetRecordValueFn(_),y=g().b4_.fromGetRecordValueFn(b),S=l.slice(a.minCol,a.maxCol+1).filter((e=>void 0!==e)),w=(0,c().g8)({exportArgs:{root:{table:v().ev,id:o.id,spaceId:(0,h().e)(o.pointer.spaceId)},navigableBlockId:o.id,renderParentBlockId:void 0,blockId:o.id,userTimeZone:(0,p().P)(),intl:x().A.getIntl(),getRecordValue:b,numberedListCache:{},bulletedListCache:{},getRecordsWithParent:()=>[],getExportedPathToFile:e=>{let{toFileURI:t}=e;return t},getExportedRenderAsset:e=>{let{toFileURI:t}=e;return t},getExportedPathToPage:e=>{let{toPageId:t}=e;return(0,s().A)({pageId:t,pageModel:y({table:v().ev,id:t}),baseUrl:I().A.domainBaseUrl,pageVisitSource:n().y8.Export})},baseUrl:I().A.domainBaseUrl,publicDomainName:I().A.publicDomainName,table:{[o.id]:{renderRows:u.map((e=>e.id)),renderColumns:S}},katex:t.KatexStore.getKatex(),resultCache:new Map,regExpCache:new Map,experimentService:T().default,collectionFeatureGates:(0,A().i)(),formulasModule:i},renderers:m});if(w){const e=f(w);r.clipboardData.setData("text/html",e)}}}function W(e){const{rowStore:t,x:o,collectionViewBlockStore:n,schema:i,currentPropertyFormats:s,formulasModule:c}=e,d=s[o],m=function(e,t,o,n){const r=t[o];if(!r)throw new Error("Property not found");if(!e.isDefined())return[];const i=e.getPropertyValue(o);if("formula"===r.type){if(!n)return[];if("v2"===r.version){if(!r.formula2)return[];const t=n.evaluateCollectionFormula2({block:e.getModel(),property:o,formulaCode:r.formula2.code,getRecordModel:e.getRecordModel,intl:x().A.getIntl(),userTimeZone:(0,p().P)(),depth:0,visitedProperties:new Set,resultCache:new Map,regExpCache:new Map,experimentService:T().default,collectionFeatureGates:(0,A().i)()});return t?(0,u().Ht)(t):[]}{const r=n.propertyToFormulaValueAsString({property:o,schema:t,block:e.getModel(),getRecordModel:e.getRecordModel,collectionRequestContext:{userId:void 0,userTimeZone:(0,p().P)(),depth:0,intl:x().A.getIntl(),resultCache:new Map,regExpCache:new Map,visitedProperties:new Set,experimentService:T().default,collectionFeatureGates:(0,A().i)()}});return b().x9d(r)}}if("created_time"===r.type&&e.getCreatedTime())return a().m5(l().KQ(e.getCreatedTime(),(0,p().P)()));if("created_by"===r.type&&e.getCreatedByPointer()){const{table:t,id:o}=e.getCreatedByPointer()??{};return o&&t===_().oo?[b().wmz(["u",o])]:o?[b().wmz(["r",o])]:[]}if("last_edited_time"===r.type&&e.getLastEditedTime())return a().m5(l().KQ(e.getLastEditedTime(),(0,p().P)()));if("last_edited_by"===r.type&&e.getLastEditedByPointer()){const{table:t,id:o}=e.getLastEditedByPointer()??{};return o&&t===_().oo?[b().wmz(["u",o])]:o?[b().wmz(["r",o])]:[]}return i||[]}(t,i,d.property,c);if(!t.isDefined())return[m,void 0];return[m,(0,r().W)({property:d.property,schema:i,block:t.getModel(),getRecordModel:n.getRecordModel,collectionRequestContext:{userId:void 0,userTimeZone:(0,p().P)(),depth:0,intl:x().A.getIntl(),visitedProperties:new Set,resultCache:new Map,regExpCache:new Map,experimentService:T().default,collectionFeatureGates:(0,A().i)()},exportedFilePaths:!1,formulasModule:c})]}function K(e){const{rowStore:t,x:o,columnOrder:n,simpleTableStore:r}=e,i=t.getPropertyStore(n[o]);return[i.getValue()||[],(0,f().r4)({textValue:i.getValue(),getRecordModel:r.getRecordModel,userTimeZone:(0,p().P)(),intl:x().A.getIntl()})]}function G(e){H(e),q(e)}function $(e){const{clipboardActions:t,environment:o,selection:n,currentRows:r,event:i,transaction:a,markdownLinkifyIt:s,tinyMceMicrosoftWordPasteFilter:l}=e;if(!i.clipboardData)return;let c;const d=i.clipboardData.getData(S().sE),u=i.clipboardData.getData("text/html");if(d)c=JSON.parse(d);else if(u){const e=document.createElement("div");e.innerHTML=u;const t=e.querySelector("table");if(t){const e=t.querySelectorAll("tr");c=[];for(const t of Array.from(e)){const e=[],o=t.querySelectorAll("td, th");for(const t of Array.from(o)){const o=b().x9d(t.textContent||"");e.push([o,void 0])}c.push(e)}}}if(!c){const e=t.getInlineTextValueFromClipboardData({event:i,markdownLinkifyIt:s,tinyMceMicrosoftWordPasteFilter:l});e&&(c=[[[e,void 0]]])}if(c){const t=S().hn(n),i=c[0].length;let s=Math.floor((t.maxCol-t.minCol+1)/i);0===s&&(s=1);const l=c.length;let d=Math.floor((t.maxRow-t.minRow+1)/l);0===d&&(d=1);for(let o=0;o<d;o++)for(let n=0;n<s;n++){const s=t.minCol+n*i,d=t.minRow+o*l;for(let t=0;t<l;t++){let o=r[d+t];if(!o){const t="selectionKey"in e?Y(e):C().D(e);t&&(e.currentRows.push(t),o=t)}for(let n=0;n<i;n++){const r=c[t][n];if(!r)continue;const i=s+n;"currentPropertyFormats"in e?Q({rowStore:o,x:i,serializedValue:r,currentPropertyFormats:e.currentPropertyFormats,transaction:a,schema:e.schema}):Z({rowStore:o,x:i,serializedValue:r,columnOrder:e.columnOrder,transaction:a})}}}const u={start:{col:t.minCol,row:t.minRow},end:{col:t.minCol+i*s-1,row:t.minRow+l*d-1}};"selectionKey"in e?L({environment:o,selectionKey:e.selectionKey,selection:u}):C().ep({environment:o,start:u.start,end:u.end,simpleTableStore:e.simpleTableStore})}}function Y(e){const{environment:t,currentRows:o,collectionContextStore:n,selectionKey:r,transaction:i}=e,{groupFormat:a}=r,s=(0,P().Q)({environment:t,collectionContextStore:n,groupsPointer:a?[a]:[],insertAtIndex:o.length,shouldCoerce:!0,transaction:i,from:{createBlock:"table_paste_selection"},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache});return null==s?void 0:s.newStore}function Q(e){var t;const{rowStore:o,x:n,serializedValue:r,currentPropertyFormats:i,transaction:s,schema:l}=e,c=i[n];if(!c)return;if("verification"===(null===(t=l[c.property])||void 0===t?void 0:t.type))return;const[d,u]=r,p=o.getPropertyStore(c.property);if(D().KY({environment:p.environment,store:p,value:d,transaction:s}),u){var g;const e=d?a().pJ(d):void 0,t=(0,m().BL)(e,(null===(g=I().A.secureFileConfig)||void 0===g?void 0:g.rootPath)??"","");R().Bn({store:o,source:u,fileIds:t.map((e=>e.id)),transaction:s})}}function Z(e){const{rowStore:t,x:o,serializedValue:n,transaction:r,columnOrder:i}=e,a=i[o];if(!a)return;const[s,l]=n,c=t.getPropertyStore(a);D().KY({environment:c.environment,store:c,value:b().Uee(s,{removeSuggestionAnnotationsAndText:!1,removeSuggestionAnnotations:!0,removeDiscussions:!0}),transaction:r})}function X(e){let{environment:t,collectionViewStore:o,currentValue:n}=e;N().createAndCommit({userAction:"tableActions.toggleTableVerticalLines",environment:t,canUndo:!0,perform:e=>{B().zA({stores:[o],update:{hide_table_vertical_lines:!n},transaction:e})}})}function J(e){let{environment:t,collectionViewStore:o,currentValue:n}=e;const r="title"===n?void 0:"title";N().createAndCommit({userAction:"tableActions.toggleTableSubitemToggleOnTitle",environment:t,canUndo:!0,perform:e=>{B().zA({stores:[o],update:{table_subitem_toggle_column:r},transaction:e})}})}function ee(e){let{environment:t,collectionViewStore:o,currentValue:n}=e;const r=(0,d().u9)(o.getType()??"table")??"table_properties",i=o.getFormat()[r],a=null==i?void 0:i.map((e=>({...e,wrap:!n})));N().createAndCommit({userAction:"tableActions.toggleTableWrapCells",environment:t,canUndo:!0,perform:e=>{B().zA({stores:[o],update:{table_wrap:!n,[r]:a},transaction:e})}})}function te(e){let{property:t,collectionViewStore:o,format:n,formatKey:r,environment:i,currentValue:a}=e;const s=!a,l=o.getFormat().table_wrap,c=n[r]||[];let d=!0;const u=c.map((e=>{let o;return o=e.property===t?s:Boolean(l||e.wrap),o||(d=!1),{...e,wrap:o}})),p={...n,[r]:u,table_wrap:d};N().createAndCommit({userAction:"tableActions.toggleWrapColumn",environment:i,canUndo:!0,perform:e=>{(0,k().F)({collectionViewStore:o,update:{format:p},transaction:e})}})}function oe(e){let{environment:t,collectionContextStore:o,currentIndex:n,entrypoint:r,transaction:i,propertyAction:a}=e;const s=o.collectionViewStore(),l=o.normalizedFormatStore.state;if(!s||void 0===n)return;const c=o.frozoneStore.state.frozenIndex;let d;switch(a){case"toggle":c!==n?d=n:c===n&&(d=-1);break;case"delete":case"hide":if(!(void 0!==c&&n<=c))return;d=c-1;break;case"duplicate":if(!(void 0!==c&&n<=c))return;d=c+1;break;case void 0:if(c!==n)d=n;else if(c===n)return}const u={...l,table_frozen_column_index:d};o.frozoneStore.setState({...o.frozoneStore.state,frozenIndex:d}),d&&T().default.logEvent("freeze_columns","true",{from:r}),(0,M().X)({environment:t,collectionContextStore:o,action:void 0===d?"table_unfreeze_columns":"table_freeze_column",entrypoint:r,propertyIndex:d}),R().zv({store:s.getFormatStore(),data:u,transaction:i})}},5705:(e,t,o)=>{o.d(t,{If:()=>z,KO:()=>j,TC:()=>Y,aD:()=>q,b$:()=>H,f0:()=>K,ke:()=>G,zd:()=>$});o(581454);var n=()=>o(763884),r=()=>o(496603),i=()=>o(404779),a=()=>o(681634),s=()=>o(902731),l=()=>o(21510),c=()=>o(770906),d=()=>o(441199),u=()=>o(869562),p=()=>o(496067),m=()=>o(919878),g=()=>o(351360),f=()=>o(525569),v=()=>o(520257),h=()=>o(195613),_=()=>o(205682),b=()=>o(77238),y=()=>o(609044),S=()=>o(212640),w=()=>o(783848),k=()=>o(899677),I=()=>o(871399),A=()=>o(502438),x=()=>o(795179),C=()=>o(538233),T=()=>o(427155),M=()=>o(466872),P=()=>o(112873),B=()=>o(901265),R=()=>o(522986),E=()=>o(35622),D=()=>o(569577),N=()=>o(898286),L=()=>o(495262),F=()=>o(778417),U=()=>o(436572),O=()=>o(725614),V=()=>o(892632);function j(e){C().A.reset(),T().A.reset(),x().A.reset(),v().A.reset(),R().VN({environment:e,blockPropertyValueOverlayStore:_().A}),V().po(),U().Sy()}function z(e,t){y().A.reset(),S().A.reset(),w().A.reset(),R().VN({environment:e,blockPropertyValueOverlayStore:b().A})}function q(e){var t;F().IU({environment:e}),O().clear({environment:e}),(0,i().y)(),m().wr(),F().rN({pivot:void 0}),B().VN(),I().default.reset(),L().xO(),P().xl(),N().V(e),D().V(e),f().default.resetStore({environment:e}),E().VN(),null===(t=e.NativeMobileActionBarStore)||void 0===t||t.clear(!1)}function H(e){p().A.reset(),k().default.reset(),M().A.state.open&&(M().A.reset(),e.device.isMobile&&u().close()),d().default.isPeekDismissableState()&&!d().default.isTransitioningState()&&c().VI({environment:e}),l().A.state.open&&s().oU(e),(0,a().c)(e)}function W(){const{mainEditorCurrentBlockStore:e}=g().default.state;let t=0,o=[];if(e){var n;const{stores:e}=A().default.state;o=r().oE(e.map((e=>e.id))),t=(null===(n=h().A.state.elementRef.current)||void 0===n?void 0:n.scrollTop)??0}return{scrollTop:t,blockIds:o}}function K(e){let{historyId:t,currentUserId:o}=e;const r=n().A.get({userId:o,key:t});return r?r.index:0}function G(e){let{historyId:t,historyIndex:o,currentUserId:r}=e;const i={scrollTop:0,blockIds:[],index:o};n().A.set({userId:r,key:t,value:i})}function $(e){let{historyId:t,currentUserId:o}=e;const r=n().A.get({userId:o,key:t});if(!r)return;const i={...W(),index:r.index};n().A.set({userId:o,key:t,value:i})}function Y(e){let{RouterStore:t,currentUserId:o}=e;const r=t.state.id;n().A.remove({userId:o,key:r})}},10594:(e,t,o)=>{o.d(t,{$e:()=>U,B2:()=>A,DF:()=>R,FS:()=>F,K0:()=>C,K3:()=>D,LS:()=>E,Qt:()=>O,RP:()=>x,Z3:()=>H,Zl:()=>q,_9:()=>I,_T:()=>M,ck:()=>N,f0:()=>V,nc:()=>T,p_:()=>P,rA:()=>z,w9:()=>B});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454),o(908872),o(737550);var n=()=>o(66689),r=()=>o(708685),i=()=>o(921598),a=()=>o(970013),s=()=>o(452706),l=()=>o(381891),c=()=>o(869190),d=()=>o(604995),u=()=>o(236162),p=()=>o(416504),m=()=>o(72135),g=()=>o(959013),f=()=>o(100622),v=()=>o(496603),h=()=>o(534177),_=()=>o(508496),b=()=>o(682146),y=()=>o(325383),S=()=>o(522827),w=()=>o(972435),k=()=>o(685889);const I=10,A=10,x=50,C=(0,g().YK)({unsupportedGroupAction:{id:"collectionGroupHelpers.unsupportedGroupAction",defaultMessage:"Selected group is not available for this task."},emptyGroupLabel:{id:"database.boardView.uncategorizedColumnTitle",defaultMessage:"No {name}"},today:{id:"database.collectionGroupValue.dateGroup.today",defaultMessage:"Today"},yesterday:{id:"database.collectionGroupValue.dateGroup.yesterday",defaultMessage:"Yesterday"},last_7_days:{id:"database.collectionGroupValue.dateGroup.last7Days",defaultMessage:"Last 7 days"},last_30_days:{id:"database.collectionGroupValue.dateGroup.last_30Days",defaultMessage:"Last 30 days"},tomorrow:{id:"database.collectionGroupValue.dateGroup.tomorrow",defaultMessage:"Tomorrow"},next_7_days:{id:"database.collectionGroupValue.dateGroup.next7Days",defaultMessage:"Next 7 days"},next_30_days:{id:"database.collectionGroupValue.dateGroup.next30Days",defaultMessage:"Next 30 days"},week_differingStartAndEndYear:{id:"database.collectionGroupValue.dateGroup.week.differingStartAndEndYear",defaultMessage:"{startMonth} {startDay} {startYear} – {endMonth} {endDay} {endYear}"},week_differingStartAndEndMonth:{id:"database.collectionGroupValue.dateGroup.week.differingStartAndEndMonth",defaultMessage:"{startMonth} {startDay} – {endMonth} {endDay} {startYear}"},week_sameStartAndEndMonth:{id:"database.collectionGroupValue.dateGroup.week.sameStartAndEndMonth",defaultMessage:"{startMonth} {startDay} – {endDay} {startYear}"},out_of_range:{id:"database.collectionGroupValue.numberGroup.outOfRange",defaultMessage:"Out of range"},range:{id:"database.collectionGroupValue.numberGroup.range",defaultMessage:"{start} to {end}"},groups:{id:"database.groupMenu.groups",defaultMessage:"Groups"},hideGroup:{id:"database.groupMenu.hideGroup",defaultMessage:"Hide group"},showGroup:{id:"database.groupMenu.showGroup",defaultMessage:"Show group"},groupLimitReachedTitle:{id:"database.groupMenu.groupLimitReachedTitle",defaultMessage:"Group limit reached"},groupLimitReachedCaption:{id:"database.groupMenu.groupLimitReachedCaption",defaultMessage:"A maximum of 1,000 groups can be shown"},noGroups:{id:"database.groupMenu.noGroups",defaultMessage:"No groups to display"},pinnedGroups:{id:"database.groupMenu.pinnedGroups",defaultMessage:"Pinned groups"},pinGroup:{id:"database.groupMenu.pinGroup",defaultMessage:"Pin group"},unpinGroup:{id:"database.groupMenu.unpinGroup",defaultMessage:"Unpin group"}});function T(e){let{intl:t,value:o}=e;if("today"===o.type)return t.formatMessage(C.today);if("yesterday"===o.type)return t.formatMessage(C.yesterday);if("last_7_days"===o.type)return t.formatMessage(C.last_7_days);if("last_30_days"===o.type)return t.formatMessage(C.last_30_days);if("tomorrow"===o.type)return t.formatMessage(C.tomorrow);if("next_7_days"===o.type)return t.formatMessage(C.next_7_days);if("next_30_days"===o.type)return t.formatMessage(C.next_30_days);if("day"===o.type){const e=(0,d().AA)(o.range,(0,p().P)(),t.locale);return(0,c().eV)({value:e.start,preset:"medium"})}if("week"===o.type){const e=(0,d().AA)(o.range,(0,p().P)(),t.locale),n=(0,c().eV)({value:e.start,preset:"month_short"}),r=(0,c().eV)({value:e.start,preset:"day"}),i=e.start.year,a=(0,c().eV)({value:e.end,preset:"month_short"}),s=(0,c().eV)({value:e.end,preset:"day"}),l=e.end.year;return i!==l?t.formatMessage(C.week_differingStartAndEndYear,{startMonth:n,startDay:r,endMonth:a,endDay:s,startYear:i,endYear:l}):n!==a?t.formatMessage(C.week_differingStartAndEndMonth,{startMonth:n,startDay:r,endMonth:a,endDay:s,startYear:i}):t.formatMessage(C.week_sameStartAndEndMonth,{startMonth:n,startDay:r,endDay:s,startYear:i})}if("month"===o.type){const e=(0,d().AA)(o.range,(0,p().P)(),t.locale);return(0,c().eV)({value:e.start,preset:"month_year_short"})}if("year"===o.type){return(0,d().AA)(o.range,(0,p().P)(),t.locale).start.year.toString()}(0,h().HB)(o)}function M(e){let{intl:t,value:o,format:n}=e;if("out_of_range"===o.type)return t.formatMessage(C.out_of_range);if("range"===o.type){const e=m().ZV(o.start,n,t),r=m().ZV(o.end,n,t);return t.formatMessage(C.range,{start:e,end:r})}if("unique"===o.type){return m().ZV(o.value,n,t)}(0,h().HB)(o)}function P(e){const{groupBy:t,schema:o,format:n,groupsFormatKey:r,limit:a}=e,l=o[t.property];if(!l||!(0,i().Eg)(l))return;const c=n[r]||[],d=B(t,n);if(_().default.checkGate({gateName:"collection_group_reducer_visible"})){return{type:"groups",version:"v2",groupBy:d,groupSortPreference:c,limit:Math.min(a,s().O3),returnHiddenGroups:e.returnHiddenGroups,aggregation:e.aggregation?{type:"independent",groupAggregation:e.aggregation}:void 0}}const u=c.reduce(((e,t)=>(0,i().tx)(t)?e+1:e),0);return{type:"groups",version:void 0,groupBy:d,groupSortPreference:c.map((e=>e.value)),limit:a+u}}function B(e,t){const o=v().mg(e),n=t.start_week_on??0;return(0,i().Ik)(o)&&"week"===o.groupBy?o.startDayOfWeek=n:"formula"===o.type&&(0,i().Ik)(o.groupBy)&&"week"===o.groupBy.groupBy&&(o.groupBy.startDayOfWeek=n),o}function R(e,t,o){const n=e.filter((e=>!(0,i().Mn)(e,t))),r=n.filter((e=>!(0,i().tx)(e))),a=n.filter((e=>(0,i().tx)(e)));return[...r.slice(0,o-1),t,...r.slice(o-1),...a]}function E(e,t){const o=e.filter((e=>!(0,i().Mn)(e,t))),n=o.filter((e=>!(0,i().tx)(e))),r=o.filter((e=>(0,i().tx)(e)));return[...n,t,...r]}function D(e){return!e.device.isPhone&&(e.isFullScreen||e.isRootChild)}function N(e){const{schema:t,groupBy:o,schemaGroups:a,reducerResults:s,relativeVariableResult:c,getRecordModel:d,viewAppConfigUri:u,allowedCollectionStores:p,renderGroupsFromAggregationArgs:m,removeUncategorized:g,getRecordRole:f}=e,h=_().default.checkGate({gateName:"relations_show_no_access"});if(!o)return[];const y=t[o.property];if(!y||!(0,i().Eg)(y))return[];const S=new Set(p.map((e=>e.id))),w=[...e.formatGroups,...a&&!s?a.map((e=>({property:o.property,value:e}))):[]];let k;if("manual"!==(0,i().Kq)(o).type||m){let e=s;s&&m&&(e=function(e,t){const o=t.aggregationResults,n=t.yAxisSortOrder;return o&&n?v().My(e,(e=>{var o;const n=e.value,r=(0,i().AC)(n);return null===(o=t.groupTotals.get(r))||void 0===o?void 0:o.total}),[n]):e}(s,m));const t=new Map;for(const o of w)t.set((0,i().Ix)(o),o);k=e?e.map((e=>{let{value:n}=e;return t.get((0,i().AC)(n))||{property:o.property,value:n}})):[];for(const o of w)k.push(o)}else{if(k=w,s)for(const{value:e}of s){const t={property:o.property,value:e};k.push(t)}if(u===n().JS){const t=k.map((e=>({value:e.value,type:e.value.type,title:void 0,total:0,aggregationState:void 0,isRestricted:!1})));k=(0,l().yy)(t,e.formatGroups.map((e=>e.value))).map((e=>({property:o.property,value:e.value})))}}if(s){if(o.hideEmptyGroups){const e=new Set,t=new Set;for(const o of s){const n=(0,i().AC)(o.value);0===o.total?t.add(n):e.add(n)}k=k.map((o=>{const n=(0,i().Ix)(o);if(t.has(n))return{...o,emptyHidden:!0};if(e.has(n)){const e={...o};return delete e.emptyHidden,e}return o}))}else k=k.map((e=>{if(e.emptyHidden){const t={...e};return delete t.emptyHidden,t}return e}));k=u===n().JS&&o.property===n().yx.TaskToSprintRelation?k.map((e=>"relation"===e.value.type&&(0,i().zx)(e.value.value)||void 0===e.value||void 0===e.value.value?e:{...e,hiddenByDefault:!0})):k.map((e=>{if(e.hiddenByDefault){const t={...e};return delete t.hiddenByDefault,t}return e}))}const I=k.filter((e=>{if(e.property!==o.property)return!1;const t=e.value;if(t.type!==y.type)return!1;if(g&&void 0===t.value)return!1;if(m&&m.hideZeroAggregations){var n;const e=(0,i().AC)(t),o=null===(n=m.groupTotals.get(e))||void 0===n?void 0:n.total;if(void 0!==o&&0===o)return!1}if(void 0===t.value)return!(0,b().i5)(y);if("formula"===y.type){const t=(0,r().getFormulaPropertySchemaResultType)(y);if(!y.formula&&!y.formula2||"unknown"===t)return!1;if("formula"!==e.value.type||"formula"!==o.type)return!1;const n=e.value.value;if(!n)return!0;if("block"===t&&"text"===n.type)return!0;if(n.type!==t)return!1;const a=o.groupBy;return"relation"===a.type?function(e,t,o){if(!e||!e.value)return!0;if("relation"!==t.type||"relation"!==e.type)return!1;if((0,i().zx)(e.value))return!1;const n=o(e.value);return null==n?void 0:n.alive}(n,{...a,property:o.property},d):L({groupValue:n,groupBy:{property:o.property,...a},getRecordModel:d,relativeVariableResult:c,getRecordRole:f,allowNoAccessRelation:h})}return!("location"===t.type&&t.value&&!S.has(t.value.id))&&L({groupValue:t,groupBy:o,getRecordModel:d,relativeVariableResult:c,propertySchema:y,getRecordRole:f,allowNoAccessRelation:h})}));return v().hS(I,(e=>(0,i().Ix)(e)))}function L(e){const{groupValue:t,groupBy:o,getRecordModel:n,relativeVariableResult:r,propertySchema:a,getRecordRole:s,allowNoAccessRelation:l}=e;if(!t.value)return!0;const c=o.type;if("formula"===c)return!1;if("select"===c){if("select"!==(null==a?void 0:a.type))return!1;return(a.options??[]).some((e=>e.value===t.value))}if("multi_select"===c){if("multi_select"!==(null==a?void 0:a.type))return!1;return(a.options??[]).some((e=>e.value===t.value))}if("status"===c){if("status"!==(null==a?void 0:a.type))return!1;const e=a.options??[],n=a.groups??[];if("status"!==t.type)return!1;const{value:r}=t;return"by_group"===r.type?("status"!==c||"group"===o.groupBy)&&n.some((e=>e.name===r.group)):"by_option"===r.type&&(("status"!==c||"option"===o.groupBy)&&e.some((e=>e.value===r.option)))}return(0,i()._o)(c)?function(e,t){if(!e||!e.value)return!0;if(!(0,i().Ik)(t)||!(0,i().DH)(e)||!t.groupBy)return!1;const o=e.value.type;if("relative"===t.groupBy)return"today"===o||"yesterday"===o||"last_7_days"===o||"last_30_days"===o||"tomorrow"===o||"next_7_days"===o||"next_30_days"===o||"month"===o;if("day"===t.groupBy)return"day"===o;if("week"===t.groupBy)return"week"===o;if("month"===t.groupBy)return"month"===o;if("year"===t.groupBy)return"year"===o;(0,h().HB)(t.groupBy)}(t,o):(0,i().Vs)(c)?function(e,t){if(!e||!e.value)return!0;if(!(0,i().Vh)(t)||!(0,i().kO)(e)||!t.groupBy)return!1;const o=e.value.type;if("alphabet_prefix"===t.groupBy)return"alphabet_prefix"===o||"other"===o;if("exact"===t.groupBy)return"exact"===o;(0,h().HB)(t.groupBy)}(t,o):"number"===c?function(e,t){if(!e||!e.value)return!0;if("number"!==t.type||"number"!==e.type)return!1;const o=e.value;if("out_of_range"===o.type)return o.start===t.start&&o.end===t.end;if("range"===o.type){const e=(0,i().WB)(o.start,t.start,t.end,t.size);return e&&"range"===e.type&&e.start===o.start}if("unique"===o.type){const e=(0,i().WB)(o.value,t.start,t.end,t.size,t.groupBy);return e&&"unique"===e.type&&e.value===o.value}(0,h().HB)(o)}(t,o):"relation"===c?"relation"===(null==a?void 0:a.type)&&function(e){var t;const{propertySchema:o,groupValue:n,groupBy:r,getRecordModel:a,relativeVariableResult:s,getRecordRole:l,allowNoAccessRelation:c}=e;if(!n||!n.value)return!0;if("relation"!==r.type||"relation"!==n.type)return!1;if((0,i().zx)(n.value)){var d,p;const e=o.collection_pointer&&a(o.collection_pointer);if(!s||!e)return!1;const t=null==e||null===(d=e.getFormat())||void 0===d?void 0:d.app_config_uri,r=null===(p=s[e.id])||void 0===p?void 0:p[n.value.value.variable],i=null==e?void 0:e.getSchema();return(0,S().KN)(i,t)&&r}const m=a(n.value);if(!m){const e=null==l?void 0:l(n.value);return!(!c||"none"!==e)}const g=(0,u().zN)({block:m,getRecordModel:a});if(s&&g){if((0,i().VF)({relativeVariableValues:s[null==g?void 0:g.id],pointer:m.pointer}).length>0)return!1}return Boolean(m.alive&&((null==g?void 0:g.id)===o.collection_id||(null==g?void 0:g.id)===(null===(t=o.collection_pointer)||void 0===t?void 0:t.id)))}({propertySchema:a,groupValue:t,groupBy:o,getRecordModel:n,relativeVariableResult:r,getRecordRole:s,allowNoAccessRelation:l}):"location"===c?function(e,t,o){if(!e||!e.value)return!0;if("location"!==t.type||"location"!==e.type)return!1;const n=o(e.value);return Boolean(n)}(t,o,n):!(!(0,i().r4)(c)&&"checkbox"!==c)||void(0,h().HB)(c)}function F(e){var t;const o=null===(t=e.board_columns_by)||void 0===t?void 0:t.disableBoardColorColumns;return void 0===o||o}function U(e){const{environment:t,groupFormat:o,schema:r,format:s,theme:l,ignoreDisableColorColumns:c}=e,d=!c&&F(s);if(s.collection_group_by||!d){if(o){const e=r[o.property];if(e&&!d){const r=o.value;if((0,a().lx)(e)){const t=(e.options||[]).find((e=>e.value===r.value));return(0,f().Q)(l,null==t?void 0:t.color)}if("status"===e.type&&"status"===r.type){var u,p;let t;if("by_group"===(null===(u=r.value)||void 0===u?void 0:u.type)){var m;const o=r.value.group;var g;if(t=null===(m=e.groups)||void 0===m||null===(m=m.find((e=>e.name===o)))||void 0===m?void 0:m.color,void 0===t)t=null===(g=(0,a().D)(e.name,w().A.getIntl()).groups)||void 0===g||null===(g=g.find((e=>e.name.toLowerCase()===o.toLowerCase())))||void 0===g?void 0:g.color}else if("by_option"===(null===(p=r.value)||void 0===p?void 0:p.type)){var v;const o=r.value.option;t=null===(v=e.options)||void 0===v||null===(v=v.find((e=>e.value===o)))||void 0===v?void 0:v.color}return(0,f().Q)(l,t)}if("relation"===e.type&&"relation"===r.type&&(0,i().zx)(r.value)){const o=(0,k().m3)(e,t),i=(0,k().D3)(e,t),a=null==o?void 0:o.getPropertyMapping(),s=null==a?void 0:a[n().Hx.StatusV2],c=i&&s&&i[s];if(c&&"status"===c.type){var h;const e=r.value.value.variable,t=null===(h=c.options)||void 0===h||null===(h=h.find((t=>t.id===e)))||void 0===h?void 0:h.color;if(t)return(0,f().Q)(l,t)}}}}return(0,f().Q)(l,"default")}}function O(e){return!("board"===e.viewType&&"board_columns_by"===e.groupByKey)&&"chart"!==e.viewType}function V(e){const{stores:t,collectionContextStore:o}=e,n=o.collectionStoresStore.state.map((e=>e.id));return"collectionTypedView"===o.contextType?t.filter((e=>{const t=e.getAssociatedCollectionStore();return t&&n.includes(t.id)})):t}const j=(0,g().YK)({manual:{defaultMessage:"Manual",id:"database.viewSettings.groupTab.sortType.manual"},ascending:{defaultMessage:"Ascending",id:"database.viewSettings.groupTab.sortType.ascending"},descending:{defaultMessage:"Descending",id:"database.viewSettings.groupTab.sortType.descending"},alphabetical:{defaultMessage:"Alphabetical",id:"database.viewSettings.groupTab.sortType.alphabetical"},reverseAlphabetical:{defaultMessage:"Reverse alphabetical",id:"database.viewSettings.groupTab.sortType.reverseAlphabetical"},oldestFirst:{defaultMessage:"Oldest first",id:"database.viewSettings.groupTab.sortType.chronological"},newestFirst:{defaultMessage:"Newest first",id:"database.viewSettings.groupTab.sortType.reverseChronological"}});function z(e,t){return"manual"===t?j.manual:"ascending"===t?(0,i().Ik)(e)||"formula"===e.type&&"date"===e.groupBy.type?j.oldestFirst:(0,i().Vh)(e)||"relation"===e.type||"select"===e.type||"multi_select"===e.type||"formula"===e.type&&"text"===e.groupBy.type?j.alphabetical:j.ascending:"descending"===t?(0,i().Ik)(e)||"formula"===e.type&&"date"===e.groupBy.type?j.newestFirst:(0,i().Vh)(e)||"relation"===e.type||"select"===e.type||"multi_select"===e.type||"formula"===e.type&&"text"===e.groupBy.type?j.reverseAlphabetical:j.descending:void(0,h().HB)(t)}function q(e,t,o){const{visibleGroups:n,hiddenGroups:r}=e;if((0,y().Mw)({collectionContextStore:t,isForColumnGroups:o}))return!0;const i=0===n.length&&!t.shouldShowSpinnerStore.state||n.length>0;if("v2"===e.version)return e.hasMore&&i;return t.boardColumnsLimitStore.state<e.total-r.length&&i}function H(e){const{disableReorder:t,groupByKey:o,format:n,canConfigureBlock:r,isMobile:a}=e;if(a)return!1;if(t)return!1;if(!r)return!1;if("chart_config"===o)return!t;const s=n[o];if(!s)return!1;return(0,i().Nf)(s).includes("manual")}},10984:(e,t,o)=>{o.d(t,{$P:()=>m,AI:()=>a,El:()=>p,HO:()=>c,OX:()=>d,aV:()=>_,bw:()=>h,dL:()=>u,jR:()=>g,sP:()=>f,tL:()=>l,wb:()=>v,y4:()=>s});var n=()=>o(979340),r=()=>o(749240),i=()=>o(807778);function a(){var e;return n().Vm(null===(e=r().subscriptionDataStoreInstance.state)||void 0===e?void 0:e.subscriptionTier)}function s(){return n().y4(a())}function l(){return n().tL(a())}function c(){return n().HO(a())}function d(){return n().OX(a())}function u(){return n().dL(a())}function p(){return n().El(a())}function m(){return n().$P(a())}function g(){return n().jR(a())}function f(){return n().sP(a())}function v(){return n().wb(a())}function h(e){return n().Kv(a(),e)}function _(e){return e?(0,i().kh)()?n().M2:n().f(e.subscriptionTier??"free"):0}},12145:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(757695).default.createValue({open:!1,isExistingUser:!0},{name:"PerfmarkTrialIneligibleToastStore"})},13679:(e,t,o)=>{o.d(t,{A:()=>k});o(898992),o(737550);var n=o(296540),r=()=>o(17022),i=()=>o(56366),a=()=>o(401497),s=()=>o(100622),l=()=>o(496603),c=()=>o(778417),d=()=>o(501020),u=()=>o(38337),p=()=>o(753199),m=()=>o(645873);const g={SelectableHoverMenuOverlay:new(m().O2)("SelectableHoverMenuOverlay",(()=>Promise.all([o.e(23806),o.e(43380),o.e(16471),o.e(47123),o.e(17989),o.e(56985),o.e(48680),o.e(51646)]).then(o.bind(o,193924))))},f=(0,m()._h)(g.SelectableHoverMenuOverlay,(e=>e.default));var v=()=>o(93658),h=()=>o(666710),_=()=>o(502438),b=o(474848);const y=10;function S(e){let t=!0;if(e.length<=y){const{selectableElementRectMap:o}=r().A.withListenerIgnored((()=>h().default.getState()));t=e.some((e=>function(e,t){const o=t.target instanceof Element?t.target:t.target.parentElement;if(!o)return!0;if(o.closest(`.${u().zN1}`))return!1;const n=o.closest(`.${u().rb2}`);if(!n)return!0;const r=e.get(n);if(!r)return!0;const i=n.getBoundingClientRect();return!(r.x===i.x&&r.y===i.y&&r.width===i.width&&r.height===i.height)}(o,e)))}t&&c().AP()}function w(e){const{isDefaultContainer:t}=e,{currentRect:o,isActive:n,showSelectionRect:r}=(0,i().K8)((()=>v().default.state.isActive?v().default.state:{currentRect:void 0,isActive:!1,showSelectionRect:!1}),[]),l=(0,a().IS)((()=>({selection:{position:"absolute",pointerEvents:"none",backgroundColor:s().Ay.blueWithAlpha(.14),border:"1px solid transparent",left:null==o?void 0:o.left,top:null==o?void 0:o.top,width:o?o.right-o.left:0,height:o?o.bottom-o.top:0}})),[o]);return n&&r&&t?(0,b.jsx)("div",{style:l.selection}):null}const k=function(e){const{render:t}=e,r=(0,n.useRef)(null),a=(0,n.useRef)({isPeekRenderer:()=>e.isPeekRenderer??!1,getProps:()=>e,getNode:()=>r.current});(0,n.useLayoutEffect)((()=>{a.current.isPeekRenderer=()=>e.isPeekRenderer??!1,a.current.getProps=()=>e,a.current.getNode=()=>r.current}),[e]);const s=(0,o(484714).v3)();(0,o(790748).b)(o(696152).A,(()=>a.current),[]),(0,n.useLayoutEffect)((()=>{const t=a.current;if(e.isDefaultContainer){const o=e.isRootContainer?l().KC([t],_().default.state.defaultContainerStack||[]):l().KC(_().default.state.defaultContainerStack||[],[t]);_().default.setState({..._().default.state,defaultContainerStack:o,pivot:void 0,anchor:void 0,anchorContainer:void 0})}if(e.droppable){const o=e.isRootContainer?l().KC([t],_().default.state.droppableContainerStack||[]):l().KC(_().default.state.droppableContainerStack||[],[t]);_().default.setState({..._().default.state,droppableContainerStack:o})}let o;return c().sf(),r.current&&(o=new MutationObserver(S),o.observe(r.current,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),()=>{if(e.isDefaultContainer){const e=l().FF(_().default.state.defaultContainerStack||[],t);_().default.setState({..._().default.state,defaultContainerStack:e,pivot:void 0,anchor:void 0,anchorContainer:void 0})}if(e.droppable){const e=l().FF(_().default.state.droppableContainerStack||[],t);_().default.setState({..._().default.state,droppableContainerStack:e})}o&&o.disconnect()}}),[a,e.droppable,e.isDefaultContainer,e.isRootContainer]);const{closestSelectable:m}=(0,n.useContext)(d().z)??{},g=(0,n.useCallback)((t=>{const{device:n}=s;e.disableRectangularSelection||0!==t.button||(n.isPhone?(0,p().SQ)({event:t,context:p().y$.EditorMouseDown,callback:()=>{c().IU({environment:s}),(0,o(404779).y)(),o(919878).wr()}}):(0,p().SQ)({event:t,context:p().y$.EditorMouseDown,callback:()=>{if(t.target instanceof Element){if(t.target.closest("button")||t.target.closest('[role="button"]'))return}1!==t.button&&(t.preventDefault(),o(257615).jD({environment:s,target:t.target,startX:t.clientX,startY:t.clientY,showSelectionRect:!0,preventSelectStores:[],allowVerticalEdgeScroll:!0,allowHorizontalEdgeScroll:!1}))}}))}),[s,e.disableRectangularSelection]),y=(0,n.useCallback)((t=>{(function(e){return h().default.hasBeenUpdatedSince(e.timeStamp)})(t)||!e.store.canEdit()||e.store instanceof o(630116).Bv&&(0,o(337567).dL)(e.store)||(0,p().SQ)({event:t,context:p().y$.EditorClick,callback:()=>{var n;if(null!==(n=_().default.getDefaultContainerFromTarget(t.target))&&void 0!==n&&n.isPeekRenderer()||o(661920).Cx(s),!o(592678).Zm()&&!e.disableEditNearestBlock){const{clientX:e,clientY:n,target:r}=t;o(908006).default.afterNextFlush((()=>{o(317909).createAndCommit({userAction:"SelectableContainer.click",environment:s,canUndo:!0,perform:t=>o(725614).editNearestBlockOrInsertIfAtBottomOfPage(s,{x:e,y:n,target:r instanceof Element?r:void 0},t)})}))}}})}),[s,e.disableEditNearestBlock,e.store]),k=(0,i().K8)((()=>Boolean(v().default.state.isActive&&v().default.state.defaultContainer===a.current)),[]),I=(0,i().K8)((()=>(0,b.jsx)("div",{className:u().QHh,style:{display:"contents"},ref:r,children:t({selectableEvents:{onMouseDown:g,onClick:y},selectableHoverMenuOverlay:(0,b.jsx)(f,{selectableContainer:a.current})})})),[y,g,t]),A=(0,n.useMemo)((()=>({selectableContainer:a.current,closestSelectable:m})),[m]);return(0,b.jsx)(d().v,{value:A,children:(0,b.jsx)(o(625325).A,{open:k,origin:I,children:(0,b.jsx)(w,{isDefaultContainer:e.isDefaultContainer})})})}},14307:(e,t,o)=>{o.r(t),o.d(t,{isConnected:()=>i().UJ,isConnecting:()=>i().XE,resetRecordSubscriptions:()=>a,updateEnvironment:()=>s});var n=()=>o(484975),r=()=>o(643893),i=()=>o(444943);function a(){r().A.reset()}function s(e){r().A.updateEnvironment(e),n().A.updateEnvironment(e)}},16990:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isPinned:!1}}}const r=new n},17090:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(803949);class n extends(()=>o(757695))().default{getInitialState(){return{isScrolling:!1,scrollTop_DEPRECATED:0,elementRef:{current:null}}}measureSize(){const e=this.state.elementRef;if(e.current){const t=e.current;let n=o(397248).z8.from(t.getBoundingClientRect());o(297727).A.forEach((e=>{const o=e.getNode();o&&t.contains(o)&&(n=e.customizeEdgeScrollRect(n))}));const r={...this.state,clientRect:n,scrollTop_DEPRECATED:t.scrollTop};return o(496603).n4(this.state,r)||this.setState(r),n}}}const r=n},17945:(e,t,o)=>{o.d(t,{l:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("threeColumns",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{fillRule:"evenodd",d:"M1.5 6a2.75 2.75 0 012.75-2.75h11.5A2.75 2.75 0 0118.5 6v7.5a2.75 2.75 0 01-2.75 2.75H4.25A2.75 2.75 0 011.5 13.5V6zm2.75-1.25C3.56 4.75 3 5.31 3 6v7.5c0 .69.56 1.25 1.25 1.25H6.5v-10H4.25zm7.75 10H8v-10h4v10zm1.5 0h2.25c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25H13.5v10z",clipRule:"evenodd"})})},19575:(e,t,o)=>{o.d(t,{SG:()=>d,cg:()=>c,lK:()=>l});var n=()=>o(449506),r=()=>o(437622),i=()=>o(144114),a=()=>o(351360),s=()=>o(59862);function l(e){let{initialQuestion:t,openedFrom:o}=e;s().A.setState({open:!0,initialQuestion:t,openedFrom:o})}async function c(e){let{environment:t,data:o,urlAnalytics:i}=e;const s=p(i),l=await u(t),c=a().default.state.currentSpaceStore;return await n().callApi({eventName:"submitMarketoForm",environment:t,data:{type:"contactSalesInApp",firstName:o.firstName,lastName:o.lastName,email:o.email,companyName:c?(0,r().GK)(t,c):"Untitled",companySize:g(o.companySize),country:l??"US",demoReason:f(o.question),message:o.additionalFeedback??void 0,ipCountry:l,...s}})}async function d(e){let{environment:t,data:o,urlAnalytics:i}=e;const{externalOrgSummary:s}=o,l=p(i),c=await u(t),d=a().default.state.currentSpaceStore,g=a().default.state.currentUserStore;if(!g||!d)return;const f=g.getName(),v=g.getEmail();if(!f||!v)return;const h=function(e){return"domain"in e?e.domain:void 0}(s),{firstName:_,lastName:b}=function(e){const[t,o=""]=e.trim().split(/\s+/);return{firstName:t,lastName:o}}(f);return await n().callApi({eventName:"submitMarketoForm",environment:t,data:{type:"pingSales",spaceId:d.id,firstName:_,lastName:b,email:v,domain:h,companyName:d?(0,r().GK)(t,d):"Untitled",companySize:m(s),country:c??"US",ipCountry:c,...l}})}async function u(e){return await(0,i().k_)(e)}function p(e){const{utm_source:t,utm_medium:o,utm_content:n,utm_campaign:r,utm_term:i,gclid:a}=e??{};return{gclid:a,utm_source:v(t),utm_medium:v(o),utm_content:v(n),utm_campaign:v(r),utm_term:v(i)}}function m(e){const t="company_employee_count"in e?parseInt(e.company_employee_count??0):0;return t<100?1:t<299?100:t<1999?300:2e3}function g(e){switch(e){case"<100":return 1;case"100-299":return 100;case"300-1999":return 300;case"2000+":return 2e3}}function f(e){switch(e){case"interest_in_enterprise":case"interest_in_business":return"enterprise";case"live_demo":return"demo";case"plan_help":return"pricing";case"manage_guests":case"other":return"other"}}function v(e){return"none"!==e?e:void 0}},19794:(e,t,o)=>{o.d(t,{y:()=>S,A:()=>I});o(944114),o(898992),o(672577),o(430670);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(959013),l=()=>o(496603),c=()=>o(534177),d=()=>o(778417),u=()=>o(725614),p=()=>o(813297),m=()=>o(989423),g=()=>o(891078),f=()=>o(645873);class v extends(()=>o(757695))().default{getInitialState(){return{editing:!1,suppressErrorsForActionIds:[]}}startEditing(e){this.setState({editing:!0,suppressErrorsForActionIds:[],placement:e.placement})}stopEditing(){this.setState({editing:!1,suppressErrorsForActionIds:[]})}suppressErrorsForAction(e){this.setState({...this.state,suppressErrorsForActionIds:l().sb([...this.state.suppressErrorsForActionIds,e])})}}const h=v;var _=()=>o(611371),b=()=>o(859428),y=o(474848);const S=(0,s().YK)({addIconButtonAriaLabel:{defaultMessage:"Add icon",id:"buttonBlock.button.addIconButtonAriaLabel"},editButtonAriaLabel:{defaultMessage:"Edit button",id:"buttonBlock.button.editButtonAriaLabel"},buttonPlaceholder:{defaultMessage:"New button",id:"buttonBlock.button.placeholder"},buttonInsufficientPermissions:{defaultMessage:"You don’t have permission to run this button",id:"buttonBlock.button.insufficientPermissions"},buttonLoading:{defaultMessage:"Loading...",id:"buttonBlock.button.loading"},clickToEdit:{defaultMessage:"Click to edit button",id:"buttonBlock.button.clickToEdit"},deprecatedActionTooltip:{defaultMessage:"An action used in this button is no longer available. Click to submit feedback.",id:"buttonBlock.button.deprecatedActionTooltip"},buttonDisabledDuringTranslation:{id:"buttonBlock.button.disabledDuringTranslation",defaultMessage:"Cannot run button during translation."}});function w(e,t){const{store:a}=e,s=(0,i().uB)(void 0,h),l=(0,r().v3)(),[c,m]=(0,o(997583).z)(),f=(0,n.useRef)(null),v=(0,i().K8)((()=>!a.canEdit()||e.disabled),[a,e.disabled]),_=(0,i().K8)((()=>a.getAutomationPointer()),[a]);(0,o(845715).K)(a,_);const b=(0,n.useCallback)((e=>{var t;u().clear({environment:l}),d().IU({environment:l});(m||(null===(t=c.current)||void 0===t?void 0:t.getBoundingClientRect().width)||0)<300&&!l.device.isPhone&&e?s.startEditing({placement:{type:"popup",originRect:e}}):s.startEditing({placement:{type:"inline"}})}),[s,c,m,l]),S=(0,y.jsxs)(o(155004).s,{allowSelectionWithin:!0,style:{display:"flex"},ref:c,children:[(0,y.jsxs)("div",{style:{flexGrow:1,flexShrink:1,minWidth:0},children:[(0,y.jsx)(k,{store:a,buttonBlockStore:s,onConfigure:b,ref:f,disabledFromEditing:v}),(0,y.jsx)(p().oY,{store:a,disabled:v,buttonBlockStore:s})]}),(0,y.jsx)(o(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,recursivelyLoadAllDiscussions:!0})]});return(0,g().NW)(e.store,t,(0,n.useMemo)((()=>({renderedType:"button",getNode:()=>c.current,getBlockStore:()=>e.store,activate(){var e;null===(e=f.current)||void 0===e||e.activate()},handleCreated(){var e;b(null===(e=f.current)||void 0===e?void 0:e.getBoundingClientRect())}})),[c,b,e.store]),S)}const k=n.forwardRef((function(e,t){const{store:v,buttonBlockStore:h,onConfigure:w,disabledFromEditing:k}=e,I=(0,s().tz)(),A=(0,r().v3)(),{isMobile:x}=(0,r().Y0)(),{value:C}=(0,f().fJ)(o(862292).T.formulas),{value:T}=(0,f().fJ)(p().QV.automationTypecheck),{value:M}=(0,f().fJ)(p().QV.automationActionRegistry),{value:P}=(0,f().fJ)(p().QV.automations),[B,R]=(0,n.useState)(!1),[E,D]=(0,n.useState)(!1),N=(0,i().K8)((()=>v.getAutomationStore()),[v]),L=(0,i().K8)((()=>(null==N?void 0:N.getNameStore().getValue())??""),[N]),F=(0,i().K8)((()=>v.getFormat().block_color||"default"),[v]),U=(0,i().K8)((()=>(0,_().EF)(A)),[A]),O=(0,o(100622).eA)(F,(0,a().DP)()),V=O.background,j=O.color,z=O.hoveredBackground,q=O.pressedBackground,H=(0,i().K8)((()=>null==N?void 0:N.getIconStore().getValue()),[N]),W=function(e){const{store:t,automationStore:n,buttonBlockStore:r,automationsModule:a}=e,s=null==a?void 0:a.automationErrorHelpers,d=(0,o(963589).X)("automation_updated_error_states"),u=(0,o(840094).OW)({store:t,automationStore:n}),p=(0,i().K8)((()=>"translate_locked"===o(77246).Uv.getMode(t)),[t]);return(0,i().K8)((()=>{if(p)return{type:"disabled",tooltip:S.buttonDisabledDuringTranslation};const e=null==u?void 0:u.state,t=null==n?void 0:n.getDeprecatedActionFormUrl();if(t)return{type:"has_deprecated_action",formUrl:t,tooltip:S.deprecatedActionTooltip};if(!e||!s||"loading"===e.executionPermissionStatus)return{type:"loading",tooltip:S.buttonLoading};if("unknown"===e.executionPermissionStatus)return{type:"disabled"};if("insufficient"===e.executionPermissionStatus){if("insufficient"===e.editPermissionStatus)return{type:"disabled",tooltip:S.buttonInsufficientPermissions};{var i;const t=(null===(i=e.typecheckResult)||void 0===i?void 0:i.value.actionValidationFailures)??{},o=Object.values(t).flatMap((e=>e)).find((e=>!1===(null==e?void 0:e.execute))),n=o?s.getErrorMessagesForActionValidationFailure({failure:o,hasAutomationUpdatedErrorStatesEnabled:d}):void 0;return{type:"disabled",tooltip:(null==n?void 0:n.forButtonTooltip)??S.buttonInsufficientPermissions,subtitleTooltip:null==n?void 0:n.forButtonSubtitleTooltip}}}if("sufficient"===e.executionPermissionStatus){if(0===((null==n?void 0:n.getActionIds())??[]).length)return{type:"error",tooltip:s.automationErrorMessages.noActions,hideErrorIconWhenEditorIsOpen:!0};const t=e.typecheckResult.value.actionValidationFailures,i=[];let a=!1;for(const[e,o]of Object.entries(t))o&&(r.state.suppressErrorsForActionIds.includes(e)?a=!0:i.push(...o));const c=l().$1(i);if(c)return{type:"error",tooltip:s.getErrorMessagesForActionValidationFailure({failure:c,hasAutomationUpdatedErrorStatesEnabled:d}).forButtonTooltip};return{type:"enabled",hasSuppressedErrors:a,urlToPreview:(0,o(157857).nD)(n)}}(0,c().HB)(e)}),[s,u,n,r,d,p])}({store:v,automationStore:N,buttonBlockStore:h,automationsModule:P}),K=(0,g().i0)(v),G=(0,g().ty)(v),$=!U||K||G||"disabled"===W.type||"loading"===W.type||B||"error"===W.type&&k,Y=(0,i().K8)((()=>"error"===W.type&&!(W.hideErrorIconWhenEditorIsOpen&&h.state.editing)),[W,h]),Q=(0,a().IS)((e=>{const t=x?"52px":"28px";return{wrap:{display:"flex",alignItems:"center",padding:"2px 0"},configureWrap:{display:"flex",alignItems:"center",marginLeft:4},label:{pointerEvents:"none",color:j,...o(284371).RC},button:{display:"flex",gap:6,minWidth:50,maxWidth:`calc(100% - ${t})`,padding:"8px 12px",fontWeight:500,...$?{cursor:"not-allowed"}:{}},labelPlaceholder:{color:e.lightTextColor},warningIcon:{width:16,height:16,fill:e.errorText,color:e.errorText},spinnerWrap:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",marginLeft:-4}}}),[$,x,j]),Z=(0,n.useRef)(null),X=(0,n.useCallback)((()=>{D(!0)}),[]),J=(0,n.useCallback)((()=>{D(!1)}),[]),ee=(0,n.useCallback)((()=>{var e;w(null===(e=Z.current)||void 0===e?void 0:e.getBoundingClientRect())}),[w,Z]),te=(0,n.useCallback)((()=>{U||(0,_().QY)(A),h.state.editing?(h.stopEditing(),(0,m().u4)({environment:A,event:{eventName:"click_configure_button_done",eventProperties:{block_id:v.id,automation_id:null==N?void 0:N.id}}}),o(508496).default.logEvent("click_configure_button_done")):(ee(),(0,m().u4)({environment:A,event:{eventName:"click_configure_button",eventProperties:{block_id:v.id,automation_id:null==N?void 0:N.id}}}))}),[h,v,N,ee,U,A]),oe=(0,i().K8)((()=>{const e=v.getRecordStoreUIRoot();if(!(C&&T&&M&&N&&e instanceof o(630116).Bv))return;const t=e.isPageBlock()?e:void 0;return{automationStore:N,automationTypecheckModule:T,automationActionRegistryModule:M,blockStore:v,currentUserId:A.currentUser.id,formulasModule:C,intl:o(972435).A.getIntl(),isLoggedIn:A.currentUser.isLoggedIn(),pageStore:t,parentRecordStore:N,type:"button_block"}}),[v,C,T,M,N,A.currentUser]),ne=(0,n.useCallback)((async()=>{if(oe)if(u().clear({environment:A}),d().IU({environment:A}),"error"===W.type)k||ee();else if("enabled"===W.type){if(W.hasSuppressedErrors)return void ee();try{var e;R(!0);const{automationExecutionActions:t}=await p().QV.automations.load();await t.executeClientAutomation({clientContext:oe,environment:A}),null!==(e=A.mobileNative)&&void 0!==e&&e.buzz?A.mobileNative.buzz():window.navigator.vibrate(20)}finally{R(!1)}}else"disabled"===W.type||"loading"===W.type||("has_deprecated_action"===W.type?o(755636).f({environment:A,url:W.formUrl}):(0,c().HB)(W))}),[A,W,k,ee,oe]);(0,n.useImperativeHandle)(t,(()=>({activate:()=>{ne()},getBoundingClientRect:()=>{var e;return null===(e=Z.current)||void 0===e?void 0:e.getBoundingClientRect()}})),[ne]);const re=()=>(0,y.jsx)("div",{style:Q.spinnerWrap,children:(0,y.jsx)(o(331542).A,{})}),ie=e=>(0,y.jsx)(o(614505).A,{largeIcon:!0,disabled:!0,isEmptyPage:!1,size:20,icon:{icon:e,pointer:v.pointer},style:{marginLeft:L?-4:0}}),ae=[];H&&(B||"loading"===W.type?ae.push({key:"left",comp:re()}):ae.push({key:"left",comp:ie(H)})),L?ae.push({key:"name",comp:(0,y.jsx)("div",{style:Q.label,children:L})}):H||ae.push({key:"placeholder",comp:(0,y.jsx)("div",{style:Q.labelPlaceholder,children:(0,y.jsx)(s().sA,{...S.buttonPlaceholder})})}),H||!B&&"loading"!==W.type||ae.push({key:"right",comp:re()}),Y&&ae.push({key:"error",comp:(0,y.jsx)("div",{children:(0,o(693954).Q)(Q.warningIcon)})});const se=e=>(0,y.jsx)(o(864943).A,{size:"lg",disabled:$,disabledFeedback:!0,style:Q.button,ref:Z,...(0,o(553965).A)(e??{},{onClick:ne}),backgroundColor:V,hoveredBackgroundColor:z,pressedBackgroundColor:q,children:ae.map((e=>{let{key:t,comp:o}=e;return(0,y.jsx)(n.Fragment,{children:o},t)}))});return(0,y.jsxs)("div",{style:Q.wrap,onMouseMove:X,onMouseLeave:J,children:[W.tooltip?(0,y.jsx)(b().A,{renderTooltip:()=>{const e=(0,y.jsx)(s().sA,{...W.tooltip});let t=null;return W.subtitleTooltip?t=(0,y.jsx)(s().sA,{...W.subtitleTooltip}):"error"!==W.type||k||(t=(0,y.jsx)(s().sA,{...S.clickToEdit})),(0,y.jsx)(p().Od,{content:e,subtitle:t})},delayThreshold:0,render:se,placement:o(962730).W.Bottom}):W.urlToPreview?(0,y.jsx)(p().Vp,{parentStore:v,renderOrigin:se,urlToPreview:W.urlToPreview}):se(),!k&&(A.device.isMobile||E)&&(0,y.jsxs)("div",{style:Q.configureWrap,children:[!$&&"has_deprecated_action"!==W.type&&(0,y.jsx)(b().A,{renderTooltip:()=>(0,y.jsx)(s().sA,{defaultMessage:"Edit button",id:"buttonBlock.configureTemplate.button.label"}),delayThreshold:300,render:e=>(0,y.jsx)(o(285790).A,{ariaLabel:I.formatMessage(S.editButtonAriaLabel),icon:o(846899).B,onClick:te,...e})}),A.device.isMobile&&(0,y.jsx)(o(496889).A,{tooltipContent:(0,y.jsx)(s().sA,{defaultMessage:"More actions…",id:"buttonBlock.moreActions.button.label"}),store:v,fadeIn:!1})]})]})}));const I=n.memo(n.forwardRef(w),o(821062).A)},20039:(e,t,o)=>{o.d(t,{A:()=>p});o(296540);var n=()=>o(484714),r=()=>o(56366),i=()=>o(401497),a=()=>o(284371),s=()=>o(614505),l=()=>o(16006),c=()=>o(630116),d=()=>o(898808),u=o(474848);function p(e){const{store:t,ignoreMaxLength:o,maxWidth:p,titleStyle:m,iconStyle:g,highlighter:f}=e,{device:v}=(0,n().v3)(),h=e.iconSize??(v.isMobile?24:20),_=e.emojiSize??h,{pageIcon:b,isEmptyPage:y}=(0,r().K8)((()=>({pageIcon:t.getIcon(),isEmptyPage:t instanceof c().Bv&&t.isEmptyPage()})),[t],{useDeepEqual:!0}),S=(0,i().IS)((()=>({containerStyle:{display:"flex",alignItems:"center",minWidth:0},teamRecordTitle:{maxWidth:p,...m},pageRecordTitle:{maxWidth:o?"none":p,...m},recordIconStyle:{marginRight:6,fontWeight:a().Wy.medium,...g}})),[o,p,m,g]),w=t instanceof c().h4?(0,u.jsx)(d().x,{disabled:!0,store:t,size:h,style:S.recordIconStyle}):b&&(0,u.jsx)(s().A,{disabled:!0,icon:b,isEmptyPage:y,size:h,emojiSize:_,style:S.recordIconStyle,largeIcon:!0});return(0,u.jsxs)("div",{style:S.containerStyle,children:[w,(0,u.jsx)(l().A,{store:t,style:S.teamRecordTitle,highlighter:f,enableHover:!0})]},`breadcrumb-recordtitle-${t.id}`)}},20199:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{elector:void 0,broadcastChannel:void 0,localSearchableBlocksCache:void 0,version:void 0}}}const r=new n;(0,o(604341).exposeDebugValue)("localSearchablePagesStore",r);const i=r},20313:(e,t,o)=>{o.d(t,{Ag:()=>h,OL:()=>v,PY:()=>_,Xs:()=>g,eM:()=>y,mP:()=>f,qq:()=>b});o(944114),o(898992),o(354520),o(672577),o(430670),o(803949),o(581454);var n=()=>o(507707),r=()=>o(624919),i=()=>o(179034),a=()=>o(708830),s=()=>o(741237),l=()=>o(534177),c=()=>o(722101),d=()=>o(695625),u=()=>o(502438),p=()=>o(186445),m=()=>o(713972);function g(e,t){return(0,a().Qe)(t,(t=>t.value.store===e))}function f(e,t){const o=g(e,[t]);if(o&&o.length>0)return o[o.length-1]}function v(e){const t=e.container??u().default.getCurrentDefaultContainer();if(!t)return new(a().C2)([]);const o=[];d().T.forEach((n=>{const r=n.getNode();if(!r)return;if(n.getContextSelectableContainer()!==t)return;if(!(n.props.canSelect||e.includeNonSelectableListContainer&&n.props.isListContainer))return;const i=n.props.store;o.push({node:r,store:i,component:n})}));var r;return(r=o,(0,a().Cu)({values:r,compareOrder:(e,t)=>(0,n().A)(e.node,t.node),isAncestor:(e,t)=>m().gR(e.node,t.node)}))||new(a().C2)([])}function h(e){let{rootStore:t,...o}=e;const n=t||(0,p().ZO)();if(!n)return;const r=v(o);return new(a().PH)({store:n,node:void 0,component:void 0},r.children)}function _(e){const{rootStore:t,root:o,target:n}=e,r=(0,a().Qe)(o.children,(e=>e===n));if(void 0===r)return;const i=[t];let s=t;for(const a of r){const e=a.value.store;if(!e)return;const t=s.getTransclusionReferenceTargetStore()??s;let o=t.getContentStores();const n=t.getAutomationStore();if(n){const e=n.getActionStores();o=o.concat(e.flatMap((e=>e.getBlockStores())))}const r=o.find((t=>t.id===e.id));if(!r)return;i.push(r),s=r}return i}function b(e){var t;const{treeOperation:o,deleteFrom:n}=e,r=[],a=null===(t=o.deleteFromParent.value.store)||void 0===t?void 0:t.getContentStore(),s=o.deletingChildren.map((e=>e.value.store)).filter(l().O9);for(const l of s){const e=l.getRecordStoreUIParent(),t=e&&e.table===i().ev&&1===e.path.length&&"content"===e.path[0]&&e,o="record-store-parent"===n&&t||a;o&&r.push({parent:o,childToRemove:l})}return r}function y(e){const{transaction:t,treeOperation:o,deleteFrom:n,observer:r,preferHighLevelOperations:i}=e;switch(o.operation){case"delete":return void b({treeOperation:o,deleteFrom:n}).forEach((e=>{let{parent:n,childToRemove:i}=e;const a={parentStore:n,childToRemoveStore:i,transaction:t};c().TF(a),null==r||r.onRemove(o,a)}));case"insert":{var a;const e=o.insertIntoParent.value.store,n="transclusion_reference"===(null==e?void 0:e.getType())?e.getTransclusionReferenceTargetStore():e,r=null==n?void 0:n.getContentStore(),s=null===(a=o.adjacentSibling)||void 0===a?void 0:a.value.store,l=o.insertChildren.map((e=>e.value.store));("listAfter"===o.direction&&s||"listBefore"===o.direction&&!s)&&l.reverse();for(const a of l)if(r&&a)if("listAfter"===o.direction){const e={insertStore:a,parentStore:r,transaction:t,afterStore:s,preferHighLevelOperations:i};c().WH(e)}else{const e={insertStore:a,parentStore:r,transaction:t,beforeStore:s};c().nc(e)}return}case"move":for(const e of(0,s().E)(o))y({transaction:t,treeOperation:e,deleteFrom:n,observer:void 0,preferHighLevelOperations:i});return void(null==r||r.onMove(o));default:(0,l().HB)(o)}}!function(){const{span:e,object:t,div:o,CONTAINER_STYLE:n}=r().iY;(0,r().EX)({canFormat:e=>Boolean(e&&e instanceof a().PH),header:(r,i)=>e(n,e({},t(r,{useDefaultFormatter:!0})),o({},t(r.value.store)),r.children.length?o({},t(r.children)):void 0),hasBody:(e,t)=>!1,body:e=>null})}()},20489:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{loginType:"email",email:"",password:"",showPassword:!1,signUpLinkSent:!1,hiddenPasscode:!1,forceAdminSamlLogin:!1}}isGoogle(){return"google"===this.state.loginType}isEmail(){return"email"===this.state.loginType}isReverifying(){return"reverify"===this.state.loginType}isTemporaryPasscode(){return"temporary"===this.state.loginType}isExclusiveLoginLinkTemporaryPasscode(){return"temporary"===this.state.loginType&&Boolean(this.state.hiddenPasscode)}isPassword(){return"password"===this.state.loginType}isForgotPassword(){return"forgot"===this.state.loginType}isPasswordResetSent(){return"reset"===this.state.loginType}isSaml(){return"saml"===this.state.loginType}isMfa(){return"mfa"===this.state.loginType}isMicrosoftLogin(){return"microsoft_login"===this.state.loginType}isMicrosoftVerification(){return"microsoft_verification"===this.state.loginType}isTemporaryPasscodeOrMicrosoftVerification(){return"temporary"===this.state.loginType||"microsoft_verification"===this.state.loginType}}const r=n},20498:(e,t,o)=>{o.d(t,{D4:()=>T,Hr:()=>C,IM:()=>P,NV:()=>M,Nl:()=>B,Q2:()=>A,bX:()=>a,jl:()=>x,lW:()=>k});o(581454),o(814603),o(147566),o(198721);var n=()=>o(496603),r=()=>o(939768),i=()=>o(799288);const a={headers:{authorization:{prefix:"Bearer"},hmac:!1},body:{path:["event"]},urlValidator:function(e){return Boolean((0,r().q7)(e))}},s=(0,o(959013).YK)({nightfall:{id:"temporaryWebhookIntegrationConfig.taglines.nightfall",defaultMessage:"Simplify security and compliance with Nightfall AI"},panther:{id:"temporaryWebhookIntegrationConfig.taglines.panther",defaultMessage:"A SIEM built for speed, scale, and flexibility"},sumologic:{id:"temporaryWebhookIntegrationConfig.taglines.sumologic",defaultMessage:"Secure and protect against modern threats with cloud-native log analytics"},runreveal:{id:"temporaryWebhookIntegrationConfig.taglines.runreveal",defaultMessage:"A SIEM you can love"},splunk:{id:"temporaryWebhookIntegrationConfig.taglines.splunk",defaultMessage:"The unified security and observability platform"},datadog:{id:"temporaryWebhookIntegrationConfig.taglines.datadog",defaultMessage:"Detect, investigate, and automate response to threats at any scale"},polymer:{id:"temporaryWebhookIntegrationConfig.taglines.polymer",defaultMessage:"Protect sensitive data across cloud apps and reduce the risk of exposure"},onna:{id:"temporaryAdminIntegrationConfig.taglines.onna",defaultMessage:"Connect. Find. Act."},hanzo:{id:"temporaryAdminIntegrationConfig.taglines.hanzo",defaultMessage:"Manage Risk Everywhere Work Is Done"},aware:{id:"temporaryAdminIntegrationConfig.taglines.aware",defaultMessage:"Secure Your Digital Workplace. Drive Growth. Scale AI."},drata:{id:"temporaryAdminIntegrationConfig.taglines.drata",defaultMessage:"Continuous compliance automation platform"},drataStaging:{id:"temporaryAdminIntegrationConfig.taglines.drataStaging",defaultMessage:"Drata (Staging) tagline"},metomic:{id:"temporaryAdminIntegrationConfig.taglines.metomic",defaultMessage:"Metomic integration tagline"},custom:{id:"temporaryAdminIntegrationConfig.taglines.custom",defaultMessage:"Custom webhook integration that only requires a destination URL."},notionInternal:{id:"temporaryAdminIntegrationConfig.taglines.notionInternal",defaultMessage:"Integration for Notion services to talk to each other."}}),l={id:"a2768733-a1f9-4174-84fa-40a9ff2053d7",name:"nightfall",icon:"/images/external_integrations/nightfall-logo.svg",website_url:"https://www.nightfall.ai/",signupUrl:"https://www.nightfall.ai/integrations/notion",privacy_policy_url:"https://www.nightfall.ai/privacy",terms_of_use_url:"https://www.nightfall.ai/terms",developer_name:"Nightfall AI",installation_info_url:void 0,type:"dlp",tagline:s.nightfall,webhookUrl:"https://notion.nightfall.ai/notion/v1/event",customization:{headers:{hmac:!0}},allowedBotCapabilities:{webhooks:!0,read_content:!0,update_content:!0,read_comment:!0,insert_comment:!0,read_user_without_email:!0,read_user_with_email:!0},allowedEndpoints:["public_getPage","public_getPageProperty","public_getBlock","public_listBlockChildren","public_getDatabase","public_getSelf","public_updatePage","public_updateBlock","public_deleteBlock","public_updateDatabase","public_listComments","public_createComment","public_deleteComment","public_updateComment","public_getComment","public_unsharePageFromWeb","public_removeGuestsFromPage","public_getUser","public_external_deleteExternalBot","public_listUsers"],acceptsSecretToken:!1,integrationGalleryUrl:"https://www.notion.so/integrations/nightfall-ai",redirectUri:"https://app.nightfall.ai/dashboard"},c={id:"fb50a39e-955a-4b9c-9ffb-49587de2a79c",name:"panther",icon:"/images/external_integrations/panther-logo.png",website_url:"https://panther.com/",signupUrl:"https://panther.com/product/request-a-demo/",privacy_policy_url:"https://panther.com/privacy-policy/",terms_of_use_url:"https://panther.com/terms-of-service/",developer_name:"Panther",installation_info_url:void 0,type:"siem",customization:{headers:{hmac:!0},urlValidator:function(e){if(!e||!(0,r().q7)(e))return!1;const t=new URL(e);if("https:"!==t.protocol)return!1;if(!t.pathname.startsWith("/http/"))return!1;const n=t.pathname.replace("/http/","");return!!(0,o(498212).iv)(n)}},tagline:s.panther,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!0,integrationGalleryUrl:"https://www.notion.so/integrations/panther"},d={id:"3ecda536-3b09-4218-a756-bda416c512d7",name:"sumologic",icon:"/images/external_integrations/sumo-logic-logo.jpeg",website_url:"https://www.sumologic.com/",signupUrl:"https://www.sumologic.com/sign-up/",privacy_policy_url:"https://www.sumologic.com/privacy-statement/",terms_of_use_url:"https://www.sumologic.com/terms-conditions/",developer_name:"Sumo Logic",installation_info_url:void 0,type:"siem",tagline:s.sumologic,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!1,integrationGalleryUrl:"https://www.notion.so/integrations/sumo-logic",customization:{urlValidator:function(e){if(!e||!(0,r().q7)(e))return!1;const t=new URL(e);return"https:"===t.protocol&&(!!t.hostname.endsWith("sumologic.com")&&!!t.pathname.startsWith("/receiver/v1/http/"))}}},u={id:"ff522b0f-e688-4986-9b7d-255627316f73",name:"splunk",icon:"/images/external_integrations/splunk-logo.jpeg",website_url:"https://www.splunk.com/",signupUrl:"https://www.splunk.com/en_us/talk-to-sales.html",privacy_policy_url:"https://www.splunk.com/en_us/legal/privacy/privacy-policy.html",terms_of_use_url:"https://www.splunk.com/en_us/legal/terms/terms-of-use.html",developer_name:"Splunk",installation_info_url:void 0,integrationGalleryUrl:"https://www.notion.so/integrations/splunk",customization:{headers:{authorization:{prefix:"Splunk"}},body:{path:["event"]},urlValidator:function(e){if(!e||!(0,r().q7)(e))return!1;const t=new URL(e);if(!["http:","https:"].includes(t.protocol))return!1;let o=t.hostname;return!(!o.startsWith("http-inputs")||!o.endsWith(".splunkcloud.com"))&&(o=o.replace("http-inputs","").replace(".splunkcloud.com",""),!(o.length<2||!o.startsWith("-")&&!o.startsWith("."))&&!!["/services/collector/raw","/services/collector/event"].includes(t.pathname))}},type:"siem",tagline:s.splunk,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!0},p={id:"97d68716-a483-4472-8fa9-da26215d721a",name:"datadog",icon:"/images/external_integrations/datadog-logo.png",website_url:"https://www.datadoghq.com/",signupUrl:"https://www.datadoghq.com/free-datadog-trial/",privacy_policy_url:"https://www.datadoghq.com/legal/privacy/",terms_of_use_url:"https://www.datadoghq.com/legal/terms/",developer_name:"Datadog",installation_info_url:void 0,type:"siem",integrationGalleryUrl:"https://www.notion.so/integrations/datadog",customization:{headers:{hmac:!0}},oauth:{accountInfoPropertyNames:{accountId:"dd_oid",accountName:"dd_org_name"},usePKCE:!0,tokenPath:"/oauth2/v1/token",apiKeyPath:"/api/v2/api_keys/marketplace"},tagline:s.datadog,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!1},m={id:"73da42b2-8736-4900-b53d-20a8d0d46a17",name:"runreveal",icon:"/images/external_integrations/runreveal.png",website_url:"https://runreveal.com/",signupUrl:"https://runreveal.com/signup",privacy_policy_url:"https://runreveal.com/privacy-policy",terms_of_use_url:"https://runreveal.com/terms-of-service",developer_name:"RunReveal",installation_info_url:void 0,type:"siem",tagline:s.runreveal,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!1,integrationGalleryUrl:"https://www.notion.so/integrations/runreveal",customization:{urlValidator:function(e){if(!e||!(0,r().q7)(e))return!1;const t=new URL(e);return"https:"===t.protocol&&!!t.hostname.endsWith(".runreveal.com")}}},g={icon:"/images/external_integrations/polymer-logo.jpeg",website_url:"https://www.polymerhq.io/",signupUrl:"https://www.polymerhq.io/request-demo/",privacy_policy_url:"https://www.polymerhq.io/privacy/",terms_of_use_url:"https://www.polymerhq.io/terms-of-service/",installation_info_url:void 0,type:"dlp",tagline:s.polymer,integrationGalleryUrl:"https://www.notion.so/integrations/polymer",allowedBotCapabilities:{webhooks:!0,read_content:!0,update_content:!0,read_comment:!0,insert_comment:!0,read_user_without_email:!0,read_user_with_email:!0},allowedEndpoints:["public_getPage","public_getPageProperty","public_getBlock","public_listBlockChildren","public_getDatabase","public_getSelf","public_updatePage","public_updateBlock","public_deleteBlock","public_updateDatabase","public_listComments","public_createComment","public_deleteComment","public_updateComment","public_getComment","public_unsharePageFromWeb","public_removeGuestsFromPage","public_listUsers","public_getUser","public_external_deleteExternalBot"],acceptsSecretToken:!1,redirectUri:"https://www.polymerhq.io/"},f={...g,id:"9fb229bb-d287-45de-82f1-7331e99d9c6b",name:"polymer",developer_name:"Polymer",webhookUrl:"https://notion.polymerhq.io/notion/events"},v={...g,id:"1b725b3c-5eda-454d-9b41-0f903de3ba00",name:"polymerDev",developer_name:"PolymerDev",webhookUrl:"https://pilot.qa.polymerhq.io/notion/events"},h={icon:"https://s3-us-west-2.amazonaws.com/public.notion-static.com/3944326d-8881-4093-90f8-63637b1ef75f/metomic.png",website_url:"https://metomic.io/",privacy_policy_url:"https://metomic.io/privacy-policy",terms_of_use_url:"https://metomic.io/terms-and-conditions",signupUrl:"https://metomic.io/",allowedBotCapabilities:{webhooks:!0,read_comment:!0,read_content:!0,insert_content:!0,update_content:!0,read_user_with_email:!0,read_user_without_email:!0,workspace_search:!0},type:"dlp",tagline:s.metomic,allowedEndpoints:["public_getPage","public_getPageProperty","public_getBlock","public_listBlockChildren","public_getDatabase","public_getSelf","public_updatePage","public_updateBlock","public_deleteBlock","public_updateDatabase","public_listComments","public_createComment","public_deleteComment","public_updateComment","public_getComment","public_unsharePageFromWeb","public_removeGuestsFromPage","public_getUser","public_external_deleteExternalBot","public_workspaceSearch","public_listTeamspaces"],acceptsSecretToken:!1,integrationGalleryUrl:"https://www.notion.so/integrations/metomic",redirectUri:"https://metomic.io/",customization:{headers:{hmac:!0}}},_={...h,id:"05d23763-7da5-4fcc-aad4-a147d5034cc3",name:"metomic",developer_name:"Metomic",webhookUrl:"https://integrations-api.metomic.io/notion/webhooks/generic/0188965b-c4f7-589c-45c0-7766857bad32"},b={...h,id:"75b66e0c-be9f-4fc5-bed6-1bc156f91e1c",name:"metomicStaging",developer_name:"Metomic (Staging)",webhookUrl:"https://integrations-api.metomic-staging.io/notion/webhooks/generic/01889547-4e22-1e0b-f363-571468d1b042"},y={id:"7487d286-3fa5-4984-8a62-3aa4c51f50ed",name:"custom",developer_name:"Custom SIEM integration",type:"siem",tagline:s.custom,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!1,integrationGalleryUrl:"https://www.notion.so/integrations",acceptsCustomHeaders:!0},S=["public_exportPage","public_workspaceSearch","public_getUser","public_listUsers","public_listTeamspaces","public_getPage","public_getBlock","public_getDatabase","public_getSelf"],w={workspace_search:!0,workspace_page_export:!0,read_content:!0,read_user_without_email:!0,read_user_with_email:!0,read_teamspace:!0},k={datadog:p,nightfall:l,panther:c,polymer:f,polymerDev:v,metomic:_,metomicStaging:b,splunk:u,sumologic:d,runreveal:m,onna:{id:"bb67e6bb-09f3-48fe-a7b2-428665ff20ac",name:"onna",icon:"/images/external_integrations/onna-icon.jpeg",website_url:"https://onna.com/",privacy_policy_url:"https://onna.com/privacy-policy",terms_of_use_url:"https://onna.com/master-subscription-agreement",developer_name:"Onna",type:"ediscovery",tagline:s.onna,integrationGalleryUrl:"https://www.notion.so/integrations/onna",allowedBotCapabilities:w,allowedEndpoints:S,redirectUri:"https://localhost:3005"},aware:{id:"99b8b727-7eee-40f8-af16-de045fb78e15",name:"aware",icon:"/images/external_integrations/aware-icon.png",website_url:"https://www.awarehq.com/",privacy_policy_url:"https://www.awarehq.com/privacy",terms_of_use_url:"https://www.awarehq.com/terms-conditions",developer_name:"Aware",type:"ediscovery",tagline:s.aware,integrationGalleryUrl:"https://www.notion.so/integrations/aware",allowedBotCapabilities:w,allowedEndpoints:S,redirectUri:"https://localhost:3005"},hanzo:{id:"2ebac254-9d38-4c94-b579-0eac7fe0f43c",name:"hanzo",icon:"/images/external_integrations/hanzo-icon.png",website_url:"https://www.hanzo.co/",privacy_policy_url:"https://www.hanzo.co/privacy",terms_of_use_url:"https://www.hanzo.co/privacy",developer_name:"Hanzo",type:"ediscovery",tagline:s.hanzo,integrationGalleryUrl:"https://www.notion.so/integrations/hanzo",allowedBotCapabilities:w,allowedEndpoints:S,redirectUri:"https://localhost:3005"},drata:{id:"04912200-d72b-4f0c-b61f-a192dc6e4a2f",name:"drata",icon:"/images/external_integrations/drata-icon.png",website_url:"https://drata.com/",privacy_policy_url:"https://drata.com/privacy",terms_of_use_url:"https://drata.com/terms",developer_name:"Drata",type:"ediscovery",tagline:s.drata,integrationGalleryUrl:"https://www.notion.so/integrations/drata",allowedBotCapabilities:w,allowedEndpoints:S,redirectUri:"https://app.drata.com/"},drataStaging:{id:"98e6e1b8-ac1b-414a-89b1-09cf4371d326",name:"drataStaging",website_url:"https://drata.com/",privacy_policy_url:"https://drata.com/privacy",terms_of_use_url:"https://drata.com/terms",developer_name:"Drata (Staging)",type:"ediscovery",tagline:s.drataStaging,integrationGalleryUrl:"https://www.notion.so/integrations/",allowedBotCapabilities:w,allowedEndpoints:S,redirectUri:"http://localhost:5000/callback/notion"},custom:y,notion_automation_public_api:{id:o(617871).XF,name:"notion_automation_public_api",website_url:"https://notion.com/",privacy_policy_url:"https://notion.com/privacy",terms_of_use_url:"https://notion.com/terms",developer_name:"Notion",type:"ediscovery",tagline:s.notionInternal,integrationGalleryUrl:"https://www.notion.so/integrations/",allowedBotCapabilities:{read_content:!0},allowedEndpoints:["public_internal_getObject"],redirectUri:"http://localhost:5000/callback/notion"}},I=(0,o(720665).MU)((0,o(534177).WP)(k).map((e=>{let[t,o]=e;return[o.id,o]})));function A(e){var t;return null===(t=C(e))||void 0===t?void 0:t.name}function x(e){const t=C(e);return Boolean(t&&"ediscovery"===t.type)}function C(e){if(e)return I[e]}function T(e){const t=C(e);if(t&&("siem"===t.type||"dlp"===t.type))return t}function M(e){return Boolean(C(e))}function P(e){if(!e)return!1;const t=C(e);return!!t&&(0,i().qs)(t.allowedBotCapabilities)}function B(e){const{env:t,integrationConfig:o,webhookUrlToValidate:r,experimentService:i,actor:s,spaceId:l}=e,c=(0,n().h1)({},a,o.customization);return!!i.checkGate({actor:s,gateName:"bypass_webhook_url_validation",customIDs:{spaceId:l}})||(!!c.urlValidator(r)||"local"===t&&r.startsWith("http://localhost:3007/"))}},20822:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(178624).R)({key:"appearanceSettingStorageKey",namespace:o(419494).Bq,important:!0,trackingType:"necessary"})},21140:(e,t,o)=>{o.d(t,{Dk:()=>u,Ye:()=>c,wh:()=>s,wt:()=>d});var n=o(296540),r=()=>o(630116),i=o(474848);function a(e){const{style:t,row:o,column:n,reverse:r,inline:i,...a}=e,s={display:i?"inline-flex":"flex"};return n?s.flexDirection=r?"column-reverse":"column":o?s.flexDirection=r?"row-reverse":"row":r&&(s.flexDirection="row-reverse"),Object.assign(s,a,t)}function s(){return a({...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},row:!0})}function l(){return a({...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},column:!0})}const c=n.forwardRef((function(e,t){const{children:o,className:n,...r}=e;return(0,i.jsx)("div",{className:n,style:s(r),ref:t,children:o})})),d=n.forwardRef((function(e,t){const{children:o,className:n,...r}=e;return(0,i.jsx)("div",{className:n,style:l(r),ref:t,children:o})}));function u(e){let{environment:t,pageBlockStore:o,pathToBlockId:n}=e;const i=new(r().pm)({environment:t,pointer:o.pointer,path:n}).getValue();return new(r().Bv)(t,{table:"block",spaceId:o.getSpaceId(),id:i})}},21497:(e,t,o)=>{o.d(t,{J2:()=>c,LR:()=>l,MQ:()=>a,OD:()=>p,_5:()=>h,b4:()=>d,lX:()=>u,o6:()=>n,p2:()=>i,qG:()=>g,rN:()=>s,wA:()=>f,wf:()=>m,xT:()=>r});const n="teamColumn",r="ownersColumn",i="AccessLevelColumn",a="lastUpdatedColumn",s="contextMenuColumn",l=[n,i,a],c="filterAccessAny",d="filterAccessOnlyOpen",u="filterAccessOnlyClosed",p="filterAccessOnlyPrivate",m="filterOwnerAny",g="filterOwnerShowOrphaned",f="filterOwnerById";class v extends(()=>o(757695))().default{getInitialState(){return{searchQuery:"",sortColumn:a,sortAscending:!1,showOnlyArchivedTeams:!1,filterByOwner:{type:m},filterAccess:c,showTeamsWithSecurityOverrides:!1}}}const h=new v},21510:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1,rect:o(397248).v_}}}const r=new n},21735:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{shouldUseEdgeCache:!1}}}const r=new n},21869:(e,t,o)=>{o.d(t,{s:()=>r});var n=()=>o(989423);function r(e,t){n().vd(e,"rich_text_menu_click",t)}},22102:(e,t,o)=>{o.d(t,{k:()=>n});const n=new(o(645873).O2)("isTemplate",(async()=>await o.e(6993).then(o.bind(o,826880))))},22913:(e,t,o)=>{o.d(t,{H:()=>l,U:()=>s});var n=()=>o(859384),r=()=>o(878377),i=()=>o(416726);const a=(0,o(959013).YK)({renameName:{id:"action.rename.name",defaultMessage:"Rename"}}),s=(0,i().Fw)({key:"rename page",displayName:a.renameName,analyticsName:a.renameName.defaultMessage,svg:n().M,validators:[r().IRu,r().Xmj,r().vXb,r()._fc,r().AU6(r().afo),r().AU6(r().ln6),r().AU6(r().kD4),r().AU6(r().dKT),r().AU6(r().Xjv(o(700500).xd.externalObjectInstancePage)),r().AU6(r().PfK),r().AU6(r().IW),r().AU6(r().i6S),r().AU6(r().oy3)],shortcuts:["rename"],closeParentMenu:!0,action:e=>{const{blocks:t,originRect:n}=e;if(t.length>0)return o(898286).U({blockStore:t[0],originRect:n})}}),l=(0,i().Fw)({key:"rename file",displayName:a.renameName,analyticsName:a.renameName.defaultMessage,svg:n().M,validators:[r().p2L,r().vXb,r().ka$,r().AU6(r().Bb5("table"))],shortcuts:["rename"],closeParentMenu:!0,action:e=>{const{blocks:t,originRect:n}=e;if(t.length>0)return o(569577).H({blockStore:t[0],originRect:n})}})},24157:(e,t,o)=>{o.r(t),o.d(t,{TextSelectionStore:()=>l,default:()=>c});var n=()=>o(496506),r=()=>o(496603),i=()=>o(821062),a=()=>o(231722),s=()=>o(630116);class l extends(()=>o(757695))().default{constructor(){super(...arguments),this.isEditingStore=new(n().default)((()=>"editing"===this.state.mode),{debugName:"isEditingStore"}),this.isExpandedStore=new(n().default)((()=>"empty"!==this.state.mode&&!(0,a().kM)(this.state.multiSelection)),{debugName:"isExpandedStore"})}getInitialState(){return{mode:"empty"}}setState(e){if("empty"===e.mode||"empty"===this.instanceState.mode)return super.setState(e);if(!(0,i().A)(this.instanceState,e)){const{savedSelectionXPosition:t,...n}=this.instanceState,{savedSelectionXPosition:r,...a}=e;this.instanceState=e,o(992202).logStoreSet(this,e),(0,i().A)(n,a)||this.emit()}}cloneState(){return"editing"===this.state.mode?{mode:"editing",multiSelection:(0,a().Oj)(this.state.multiSelection),savedSelectionXPosition:this.state.savedSelectionXPosition,forceExtendAnnotations:r().mg(this.state.forceExtendAnnotations)}:"readOnly"===this.state.mode?{mode:"readOnly",multiSelection:(0,a().Oj)(this.state.multiSelection),savedSelectionXPosition:this.state.savedSelectionXPosition}:{mode:"empty"}}isEmptySelection(){if(!this.hasSelection())return!0;const{multiSelection:e}=this.state;return(0,a().kM)(e)}isEditingComment(){return"editing"===this.state.mode&&("comment"===this.state.multiSelection.start.store.table||"comment"===this.state.multiSelection.end.store.table)}isEditingFormQuestion(){return"editing"===this.state.mode&&("form_question"===this.state.multiSelection.start.store.table||"form_question"===this.state.multiSelection.end.store.table)}isEditingCaption(){return"editing"===this.state.mode&&(r().n4(this.state.multiSelection.start.store.path,["properties","caption"])||r().n4(this.state.multiSelection.end.store.path,["properties","caption"]))}hasSelection(){return"empty"!==this.state.mode}isEditingEmptyBlock(){return!(!this.hasSelection()||!this.isEmptySelection())&&!this.state.multiSelection.start.store.isDefined()}getRootBlockStoreOfSelection(){const e=this.hasSelection()&&this.state.multiSelection&&this.state.multiSelection.start.store.getAncestorRecordStoreAtRootPath();return e&&e instanceof s().Bv?e:void 0}getRootFormQuestionStoreOfSelection(){const e=this.hasSelection()&&this.isEditingFormQuestion()&&this.state.multiSelection.start.store.getAncestorRecordStoreAtRootPath();return e&&e instanceof s().c7?e:void 0}}const c=new l},24611:(e,t,o)=>{o.d(t,{Wh:()=>Et,FF:()=>jt,Ay:()=>Ut,k:()=>Rt,KJ:()=>Nt,x7:()=>Vt,t9:()=>Bt});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454);var n=o(296540),r=()=>o(872994),i=()=>o(484714),a=()=>o(56366),s=()=>o(401497),l=()=>o(700500),c=()=>o(304740),d=o(474848);const u=(0,o(340498).wt)("compass",{viewBox:"0 0 30 30",svg:(0,d.jsx)("path",{d:"M18,4.361V3c0-1.657-1.343-3-3-3s-3,1.343-3,3v1.361C6.27,5.718,2,10.854,2,17c0,7.18,5.82,13,13,13s13-5.82,13-13 C28,10.854,23.73,5.718,18,4.361z M14,3c0-0.552,0.448-1,1-1s1,0.448,1,1v1.051C15.669,4.025,15.338,4,15,4s-0.669,0.025-1,0.051V3z M16,27.949V26h-2v1.949C8.724,27.474,4.526,23.276,4.051,18H6v-2H4.051C4.526,10.724,8.724,6.526,14,6.051V8h2V6.051 c5.276,0.476,9.474,4.673,9.949,9.949H24v2h1.949C25.474,23.276,21.276,27.474,16,27.949z M8,24l10-4l4-10l-10,4L8,24z M18.41,13.59 l-1.949,4.871L11.59,20.41l1.949-4.871L18.41,13.59z"})});var p=()=>o(715862),m=()=>o(997769),g=()=>o(332737),f=()=>o(919709),v=()=>o(220719),h=()=>o(959013),_=()=>o(100622),b=()=>o(496603),y=()=>o(284371),S=()=>o(939768),w=()=>o(296511),k=()=>o(437219),I=()=>o(559926),A=()=>o(884107),x=()=>o(901389),C=()=>o(705540),T=()=>o(675074),M=()=>o(383594),P=()=>o(797265),B=()=>o(778417),R=()=>o(725614),E=()=>o(317909),D=()=>o(780054),N=()=>o(186445),L=()=>o(38337),F=()=>o(921855),U=()=>o(943846),O=()=>o(972435),V=()=>o(569912),j=()=>o(836251),z=()=>o(891078),q=()=>o(645873);const H=new(q().O2)("imageHyperlink",(()=>o.e(32644).then(o.bind(o,887750)))),W=(0,q()._h)(H,(e=>e.ImageHyperlinkPreview)),K=(0,q()._h)(H,(e=>e.ImageHyperlinkOverlay));var G=()=>o(406792),$=()=>o(962730),Y=()=>o(227440),Q=()=>o(757695);class Z extends Q().default{getInitialState(){return{hovered:!1,focused:!1,isInFrame:!1}}}const X=Z;var J=()=>o(518888),ee=()=>o(753199),te=()=>o(230062),oe=()=>o(150180),ne=()=>o(657202);let re=null;const ie=Q().default.createClass(void 0,{name:"ErrorStore"});function ae(e){let{source:t,contentWrapStyle:o,handleEmbedComp:r,contentStyle:i}=e;const s=(0,a().uB)(void 0,ie),l=(0,n.useCallback)((e=>function(e,t,o){const n=(0,oe().oq)(e.currentTarget,t);n&&o.setState(n)}(e,t,s)),[t,s]),c=(0,a().K8)((()=>function(e){return{...e,pointerEvents:te().A.state?"none":"auto",position:"relative"}}(i)),[i]);return(0,d.jsx)("div",{style:o,onMouseDown:ee().tr,onTouchStart:ee().tr,children:(0,d.jsxs)("div",{style:c,children:[(0,d.jsx)("audio",{ref:e=>r(e),style:c,controls:!0,preload:"none",onError:l,onPlay:le,onPause:ce,src:t}),(0,d.jsx)(de,{errorStore:s})]})})}const se={render:function(e){const{contentStyle:t,contentWrapStyle:o,handleEmbedComp:n}=e;return(0,d.jsx)(ne().A,{url:e.source,permissionRecord:e.store.pointer,useS3Url:e.useS3Url,render:(e,r,i)=>i?r?(0,d.jsx)(ae,{contentStyle:t,contentWrapStyle:o,source:r,handleEmbedComp:n}):void 0:(0,d.jsx)("div",{})})},resizable:!1,hideActions:!0,rendererType:"audio"};function le(e){re&&re.pause(),re=e.currentTarget}function ce(e){re===e.currentTarget&&(re=null)}function de(e){let{errorStore:t}=e;const o=(0,a().O$)(t);return o?(0,d.jsx)(oe().Ay,{family:"audio",error:o,isSmall:!0}):null}var ue=()=>o(496889),pe=()=>o(460282),me=()=>o(739283),ge=()=>o(158218),fe=()=>o(477450),ve=()=>o(155004),he=()=>o(145214),_e=()=>o(704152),be=()=>o(493823),ye=()=>o(859428);const Se=new(q().O2)("Tldraw",(()=>Promise.all([o.e(42399),o.e(25583)]).then(o.bind(o,873925)))),we=(0,q()._h)(Se,(e=>e.TldrawAdapter));var ke=()=>o(109488),Ie=()=>o(502438);function Ae(e){const t=(0,i().v3)(),r=(0,a().K8)((()=>(0,o(969197).OW)(e.store)),[e.store]),l=(0,s().IS)((t=>({sizer:{height:e.height,display:"flex",borderRadius:3,paddingTop:2,paddingLeft:10,paddingRight:10,paddingBottom:10},border:{display:"flex",flex:1,margin:2,padding:3,boxShadow:r?t.outlineBlueInputBoxShadow:void 0,outline:`1px solid ${t.regularDividerColor}`,transition:"box-shadow 0.1s ease-in-out",willChange:"box-shadow",borderRadius:3},ignoreClickArea:{flex:1,position:"relative",contain:"paint"}})),[r,e.height]),c=(0,n.useCallback)((()=>{R().clear({environment:t}),B().td({environment:t,stores:[e.store],phase:Ie().SelectionPhase.Editing})}),[t,e.store]),u=(0,n.useCallback)((t=>(0,d.jsx)("div",{...t,style:l.ignoreClickArea,className:"notion-disable-webkit-user-select",children:(0,d.jsx)(we,{...e,isEditing:r})})),[l.ignoreClickArea,e,r]);return(0,d.jsx)("div",{style:l.sizer,onPointerDown:c,children:(0,d.jsx)("div",{style:l.border,children:(0,d.jsx)(o(805751).A,{debugName:"DrawingBox",capture:r,allowEsc:!0,children:(0,d.jsx)(ke().A,{capture:!0,render:u})})})})}const xe={render:e=>(0,d.jsx)(Ae,{...e}),resizable:!0,hideActions:!0,rendererType:"drawing"};var Ce=()=>o(187174),Te=()=>o(763824);let Me=0;const Pe="notion_jsonp_callback_";function Be(e){const t=Te().yX(),o=document.createElement("script");o.type="text/javascript";const n=function(){const e=Pe+Me;return Me++,e}();window[n]=e=>{delete window[n],o.parentNode&&o.parentNode.removeChild(o),t.resolve(e)};const r=S().O$(e,{callback:n});return o.src=r,o.onerror=e=>{delete window[n],o.parentNode&&o.parentNode.removeChild(o),t.reject(e)},document.head&&document.head.appendChild(o),t.promise}var Re=()=>o(62856),Ee=()=>o(331542);const De={userSelect:"none",padding:"6px 10px",borderRadius:4,border:"1px solid #dddddd",fontSize:14,width:"100%"},Ne={loading:!0,error:!1,html:void 0};function Le(e){const[t,o]=(0,n.useState)(Ne),r=(0,a().K8)((()=>te().A.getState()),[]);(0,Ce().Yb)((async()=>{const t=`https://gist.github.com/${function(e){const{pathname:t}=S().qg(e);return(t||"").split("/").pop()}(e.source)}.json`;try{const e=await Be(t);o({loading:!1,error:!1,html:e.div});if(!document.querySelector(`link[href="${e.stylesheet}"]`)){const t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e.stylesheet,document.head&&document.head.appendChild(t)}}catch(n){o({loading:!1,error:!0,html:void 0})}}),[e.source]);const i=(0,s().IS)((()=>({container:{width:"100%",marginBottom:"-1em",...t.html&&{overflowY:"auto"},...t.html&&{height:"100%"},...t.html&&{pointerEvents:r?"none":"auto"}}})),[t.html,r]);return(0,d.jsx)("div",{children:(0,d.jsx)(ke().A,{capture:!0,render:o=>(0,d.jsx)("div",{...o,ref:e.handleEmbedComp,style:i.container,children:(0,d.jsx)(Ue,{gistBoxState:t})})})})}const Fe={render:function(e){const{source:t,handleEmbedComp:o}=e;return(0,d.jsx)(Le,{source:t,handleEmbedComp:o})},renderFullScreen:void 0,resizable:!0,embedGhost:!0,hideActions:!0};function Ue(e){let{gistBoxState:t}=e;const{error:o,html:n,loading:r}=(0,a().K8)((()=>{const{error:e,html:o,loading:n}=t;return{error:e,html:o,loading:n}}),[t]),i=(0,Re().A)(r,1e3,500);return i||r?(0,d.jsx)("div",{style:{marginBottom:"1em"},children:(0,d.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",opacity:i?1:0,...De},children:[(0,d.jsx)(Ee().A,{}),(0,d.jsx)("div",{style:{marginLeft:8},children:(0,d.jsx)(h().sA,{defaultMessage:"Loading gist",id:"githubGistRenderer.loading.message"})})]})}):o?(0,d.jsx)("div",{style:{marginBottom:"1em"},children:(0,d.jsx)("div",{style:De,children:(0,d.jsx)(h().sA,{defaultMessage:"Error loading gist",id:"githubGistRenderer.errorLoading.message"})})}):(0,d.jsx)("div",{dangerouslySetInnerHTML:{__html:n??""},className:"notion-gist-block"})}var Oe=()=>o(613147),Ve=(o(16280),o(898992),o(354520),o.n(o(952224))),je=()=>o(522419),ze=()=>o(343666),qe=()=>o(963589),He=()=>o(129522),We=()=>o(508496),Ke=()=>o(553819),Ge=()=>o(816559),$e=()=>o(773382),Ye=()=>o(461515),Qe=()=>o(468993);function Ze(e){const{file:t,fileName:o,fileSize:n,progressPercent:r}=e;return(0,d.jsx)(Qe().A,{disabled:!0,iconSvg:Ye().F,isLoading:!0,progressPercent:r,file:t,name:o,size:n,onClick:b().lQ})}const Xe=Q().default.createClass(void 0,{name:"ErrorStore"});function Je(e){var t,r;const{store:l,dataURL:c,source:u,isFullWidth:p,isRootChild:m,aspectRatio:g,height:f,dragging:v,blockWidth:h,isFullScreen:b,imageBoxRef:y,isPageWidth:S,pageWidth:w,onSrcFailedToLoad:k,onSrcLoad:I,embedRootRef:A,disabled:x}=e,C=(0,i().v3)(),T=(0,a().uB)(void 0,Xe),M=(0,a().O$)(T),P=(0,a().K8)((()=>J().default.getKeyState(J().default.getBlockKey(l.id))),[l]),B=(0,a().K8)((()=>Ke().A.getStatus(l.id)),[l.id]),R=(0,a().K8)((()=>{if("uploading"===B||"completed"===B&&u===Ke().A.getSecureFileURL(l.id))return Ke().A.getDataURL(l.id)}),[B,l.id,u]),D=(0,n.useRef)(u),N=(0,n.useRef)(void 0),L=(0,n.useRef)(void 0),F=(0,n.useRef)(void 0),U=(0,n.useRef)(!1),O=Boolean("image/heic"===L.current),V=O&&(null==c?void 0:c.startsWith("blob:"))&&Boolean(!C.device.isSafari),j=(0,qe().X)("image_sizing_v2"),z=function(e){const t=e.isFullWidth&&!e.dragging?void 0:e.blockWidth,o=window.innerWidth,n=t?Math.min(t,window.innerWidth):window.innerWidth;return e.isFullScreen?o:n}({isFullWidth:e.isFullWidth,isFullScreen:e.isFullScreen,isRootChild:e.isRootChild,isPageWidth:e.isPageWidth,pageWidth:e.pageWidth,blockWidth:e.blockWidth,dragging:e.dragging}),q=null===(t=A.current)||void 0===t?void 0:t.getBoundingClientRect().width,H=(0,n.useMemo)((()=>j?function(e){const{isFullScreen:t,isFullWidth:o,isPageWidth:n,blockWidth:r,embedContainerWidth:i,dragging:a}=e;if(t)return window.innerWidth;if(a)return Math.min(r??window.innerWidth,window.innerWidth);if(o)return window.innerWidth;let s;s=n&&i&&i>0?i:r;if(s){const e=i&&i>0?i:window.innerWidth;return Math.min(s,e)}return window.innerWidth}({isFullWidth:p,isFullScreen:b,isRootChild:m,isPageWidth:S,pageWidth:w,blockWidth:h,embedContainerWidth:q,dragging:v}):0),[p,b,m,S,w,h,q,v,j]),W=j?H:z,K=null===(r=e.embedContainerDimensions)||void 0===r?void 0:r.height,$=j?function(e){const{isFullWidth:t,isRootChild:o,height:n,aspectRatio:r,renderWidth:i,embedContainerHeight:a}=e;return t&&o?n:r&&i?i*r:a}({isFullWidth:p,isRootChild:m,height:e.height,aspectRatio:g,renderWidth:H,embedContainerHeight:K}):void 0;async function Y(t,n){const r=je()._J(e.source)?n:e.source;if(null==k||k(),n){const e=await(0,o(974233).default)({url:n,environment:C,method:"HEAD",format:"text"});if("failed"===e.type){const t=(0,oe().mg)(e.error,r);if(t)return T.setState(t),void G().default.DO_NOT_USE_measureLegacy("image_load",{environment:C,data:{success:!1,status:e.status}})}}T.setState({type:"unknown",source:r}),G().default.DO_NOT_USE_measureLegacy("image_load",{environment:C,data:{success:!1,status:0}})}function Q(e){e||(null==I||I(),T.setState(void 0),G().default.DO_NOT_USE_measureLegacy("image_load",{environment:C,data:{success:!0}}))}(0,n.useEffect)((()=>{F.current=G().default.DO_NOT_USE_markLegacy("image_load")}),[]),(0,n.useEffect)((()=>{null!=P&&P.file.type&&!Boolean(L.current)&&(L.current=null==P?void 0:P.file.type)}),[P]),(0,n.useEffect)((()=>{if(c||!u||!C.mobileNative)return;if(N.current&&u===D.current)return;D.current=u;je()._J(u)&&(0,o(518646).k)(C,{url:u,download:!1,downloadName:"image",permissionRecord:l.pointer},Boolean(o(948914).A.state.isNotionProtocolBugFixed)).then((e=>{N.current=e}))}),[C,D,N,u,l.pointer,c]),(0,n.useLayoutEffect)((()=>{var e;const t=null===(e=y.current)||void 0===e||null===(e=e.elementRef)||void 0===e?void 0:e.current;t&&!P&&(t.onload=()=>{const e=t.getBoundingClientRect().width;e<=1||e!==h&&(O||!x&&l.canEdit()&&(h!==t.naturalWidth||e===t.naturalWidth||U.current||(E().createAndCommit({userAction:"ImageRenderer.updateBlockWidth",environment:C,canUndo:!0,perform:t=>{o(896628).zA({stores:[l],update:{block_width:e},transaction:t})}}),U.current=!0)))})}),[O,h,C,y,l,P,x]);const Z=(0,s().IS)((e=>{const t={},o=S?w:Math.min(h??0,w??0);if(H&&$&&!v&&!b)t.width=H,t.height=$,t.background=_().Ay.contentGrayBackground,t.borderRadius=2;else if(p&&m||!g||!o)p&&m||!g?f&&(t.height=f,t.background=_().Ay.contentGrayBackground):(t.paddingBottom=100*g+"%",t.background=_().Ay.contentGrayBackground);else{const e=o*g;t.height=$?"100%":e,t.background=_().Ay.contentGrayBackground}const n={};return b||p||v||($&&j&&!R?n.maxHeight=$:h&&g&&!R&&(n.maxHeight=h*g)),{content:n,placeholder:t,contentWrap:{}}}),[R,p,m,g,f,b,h,v,S,w,$,H,j]);if(V&&P){const{file:e,name:t,size:o,progressPercent:n}=P;if(e instanceof File)return(0,d.jsx)(Ze,{file:e,fileName:t,fileSize:o,progressPercent:n})}return c?(0,d.jsx)(tt,{...e,proxyError:void 0,renderURL:c,embedError:M,environment:C,signedOriginalURLRef:N,onImageError:Y,onImageLoad:Q,renderHeightV2:$,renderWidth:W,useV2Sizing:j,styles:Z,enableLoadingShimmer:!1}):(0,d.jsx)(o(360083).A,{url:u,width:W,render:(t,o)=>{var n;let r=o;return void 0===o&&void 0!==L.current&&null!==(n=D.current)&&void 0!==n&&n.startsWith("blob:")&&(r=D.current),R&&(r=R),(0,d.jsx)(tt,{...e,proxyError:t,renderURL:r,embedError:M,environment:C,signedOriginalURLRef:N,onImageError:Y,onImageLoad:Q,renderHeightV2:$,renderWidth:W,useV2Sizing:j,styles:Z,enableLoadingShimmer:!0})},isAuthenticated:!0,permissionRecord:l.pointer},`width-${e.contentStyle.width}`)}function et(e){const t=e.getParentStore();if(function(e){return e.getParentTable()===ze().SN}(e)&&(null==t?void 0:t.table)===ze().SN)return t.getContentStores().filter((e=>"image"===e.getType())).filter((e=>Boolean(e.getProperties().source)));const o=Ie().default.getCurrentRootStore();return He().K.getMembersByDOMOrder({filter:e=>"image"===e.renderedType&&Boolean(e.getBlockStore().findRecordStoreUIAncestor((e=>Boolean(o&&e===o))).ancestor)}).map((e=>e.getBlockStore())).filter((e=>Boolean(e.getProperties().source)))}function tt(e){const{proxyError:t,renderURL:o,isFullScreen:r}=e,[i,a]=(0,n.useState)(o);(0,n.useEffect)((()=>{void 0!==o&&o!==i&&a(o)}),[i,o]);const s=(0,oe().mg)(t,void 0)||(0,U().Vh)(t)||e.embedError;return r?(0,d.jsx)(nt,{...e,embedError:s,renderURL:i}):(0,d.jsx)(ot,{...e,embedError:s,renderURL:i})}function ot(e){var t;const{embedError:o,renderURL:r,progressPercent:i,disabled:s,isLoading:l,contentStyle:c,contentWrapStyle:u,handleFullScreen:p,handleEmbedComp:m,isFullWidth:g,isRootChild:f,inlineContentStyle:v,blockLocation:h,imageBoxRef:_,environment:b,onImageError:y,onImageLoad:S,renderWidth:w,signedOriginalURLRef:I,styles:A,store:x,useV2Sizing:C}=e,[M,P]=(0,n.useState)(!1),E=(0,qe().X)("imagerenderer_disable_loading_lazy"),N=T().Ox(h),L=()=>{try{var e;const{currentImageIndex:t,items:o}=function(e,t,o,n){if(!t)throw Error("Lightbox item missing URL");const r=et(e).map((e=>({type:"image",blockId:e.id,renderWidth:n,state:void 0}))),i=r.findIndex((t=>t.blockId===e.id))??-1;if(-1===i)throw new Error("Lightbox item not found.");const a=0===t.indexOf("https:")?t:`${D().A.domainBaseUrl}${t}`;return r[i]={...r[i],previewUrl:Ve()(a),originalUrl:Ve()(o??a)},{currentImageIndex:i,items:r}}(x,r,I.current??void 0,w);null===(e=b.mobileNative)||void 0===e||e.showLightBox({items:o,startingIndex:t,from:"embedded_block_click",showImageLightBoxV2:!0}),B().IU({environment:b}),R().blurActiveElement()}catch{return}},U=()=>{k().v0(b,{from:"embedded_block_click",type:"image"}),We().default.checkGate({gateName:"mobile_lightbox_v2"})?L():(()=>{var e;if(!r)return;const t=0===r.indexOf("https:")?r:`${D().A.domainBaseUrl}${r}`;null===(e=b.mobileNative)||void 0===e||e.showLightBox({items:[{type:"image",previewUrl:Ve()(t),originalUrl:Ve()(I.current??t)}],startingIndex:0,from:"embedded_block_click"}),B().IU({environment:b}),R().blurActiveElement()})()},O=b.mobileNative&&!1===(null==r?void 0:r.startsWith("data:")),V=O?U:N?void 0:p,j=O?U:N?t=>it(t,e.handleFullScreen):void 0,z=N?t=>it(t,e.handleFullScreen):p,q=(0,a().K8)((()=>(0,F().r4)(x.getPropertyValue("alt_text"),x)),[x]),H=(0,a().K8)((()=>{const e=x.getImageHyperlink()||"";return"placeholder"===e?void 0:e}),[x]),W=(0,a().K8)((()=>!!l&&"uploading"!==Ke().A.getStatus(x.id)),[l,x.id]),K=(G={isFullWidth:e.isFullWidth,isRootChild:e.isRootChild,height:e.height,renderURL:r,isLoaded:M,embedContainerHeight:null===(t=e.embedContainerDimensions)||void 0===t?void 0:t.height}).isFullWidth&&G.isRootChild?G.height:G.renderURL&&G.isLoaded?void 0:G.embedContainerHeight;var G;let $=e.renderHeightV2;var Y;!e.dragging||g&&f||($=r&&M||null===(Y=e.embedContainerDimensions)||void 0===Y?void 0:Y.height);const Q=C?$:K;return(0,d.jsx)("div",{ref:m,style:{...u,...A.contentWrap},onClick:s&&!O?z:void 0,children:(0,d.jsxs)("div",{children:[(0,d.jsx)(Ge().Ay,{alt:q,ref:_,src:r,loading:E?void 0:"lazy",isFullScreen:!1,style:{...c,...A.content,...v},href:H,placeholderStyle:A.placeholder,onDoubleClick:V,onClick:j,height:Q,capMaxHeight:g&&f,onError:y,onLoad:e=>{S(e),r&&P(!0)},enableLoadingShimmer:e.enableLoadingShimmer}),o&&(0,d.jsx)(oe().Ay,{error:o,family:"image"}),W&&(0,d.jsxs)("div",{style:Ge().fd,children:[(0,d.jsx)(Ee().A,{size:"md",style:{marginRight:4}}),(0,d.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:(0,d.jsx)($e().A,{percentage:i})})]})]})})}function nt(e){const{contentStyle:t,embedError:o,renderURL:n,onImageError:r,onImageLoad:i,styles:a}=e,s=Math.min(500,window.innerWidth-50);return(0,d.jsx)("div",{style:{alignSelf:"center",margin:0,position:"relative",minWidth:o?s:void 0},children:(0,d.jsxs)("div",{children:[(0,d.jsx)(Ge().Ay,{src:n,isFullScreen:!0,style:{...t,...a.content},placeholderStyle:a.placeholder,capMaxHeight:!1,onError:r,onLoad:i,immediatelyDiscardImageWhenSourceChanges:!0}),o&&(0,d.jsx)(oe().Ay,{error:o,family:"image"})]})})}const rt={rendererType:"image",render:e=>(0,d.jsx)(Je,{...e,isFullScreen:!1}),renderFullScreen:e=>(0,d.jsx)(Je,{...e,isFullScreen:!0}),resizable:!0};function it(e,t){e.stopPropagation(),t()}var at=()=>o(719147),st=()=>o(839010);const lt={render:function(e){const{disabled:t,contentStyle:n,contentWrapStyle:r,handleFullScreen:i,source:a,handleEmbedComp:s,height:l}=e;return(0,d.jsx)("div",{style:r,onClick:t?i:void 0,children:(0,d.jsx)("div",{style:{position:"relative"},children:(0,d.jsx)(st().A,{ref:e=>s(e),source:a,height:l,style:n,background:!1,renderPreview:()=>(0,d.jsx)(o(835779).h,{source:(0,U().Yl)(e)})})})})},renderFullScreen:function(e){const{source:t,height:o,contentStyle:n}=e;return(0,d.jsx)(st().A,{source:t,isFullWidth:!0,height:o,style:n,background:!0})},resizable:!0},ct=lt;var dt=o(440961),ut=()=>o(852507),pt=()=>o(688149);function mt(e){const{handleEmbedComp:t,source:r,fullScreen:i}=e,a=(0,s().DP)(),[l,c]=(0,n.useState)(!1);(0,ut().w)((()=>{c(!Y().A.state.online)}));const u=(0,s().IS)((e=>({main:{width:i?520:"100%",minWidth:"100%",pointerEvents:"auto",margin:i?"-10px auto":"-10px 0"},loading:{userSelect:"none",borderRadius:4,border:"1px solid #dddddd",fontSize:14,width:"100%",padding:"6px 10px"}})),[i]),p=(0,n.useCallback)((async e=>{if(!e)return;const{pathname:t}=S().qg(r),o=(t||"").split("/")[3],n={dnt:!0,lang:"en",width:"100%",theme:"dark"===a.mode?"dark":"light"};if(o&&window.twttr){e.innerHTML="";if(await window.twttr.widgets.createTweetEmbed(o,e,n))return}dt.render((0,d.jsx)("div",{style:u.loading,children:"Error loading tweet"}),e)}),[r,u.loading,a.mode]);return(0,d.jsx)("div",{style:{display:"flex"},children:(0,d.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto",maxWidth:420,minWidth:0,width:"100%",height:l?"200px":void 0},children:l?(0,d.jsx)(oe().Ay,{family:"tweet",error:{type:"offline"}}):(0,d.jsx)(ke().A,{capture:!0,render:e=>(0,d.jsx)("div",{...e,ref:e=>e&&t(e),style:u.main,children:(0,d.jsx)(pt().A,{fetch:()=>o.e(98012).then(o.t.bind(o,268719,23)),loading:e=>e?(0,d.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",...u.loading},children:[(0,d.jsx)(Ee().A,{}),(0,d.jsx)("div",{style:{marginLeft:8},children:(0,d.jsx)(h().sA,{id:"tweetRenderer.loadingTweet.message",defaultMessage:"Loading Tweet"})})]}):null,render:()=>(0,d.jsx)("div",{ref:p})})})})})})}const gt={render:function(e){const{source:t,handleEmbedComp:o}=e;return(0,d.jsx)(mt,{source:t,handleEmbedComp:o,fullScreen:!1})},renderFullScreen:function(e){const{source:t,handleEmbedComp:o}=e;return(0,d.jsx)(mt,{source:t,handleEmbedComp:o,fullScreen:!0})},resizable:!1,embedGhost:!0,hideActions:!0};const ft={position:"absolute",left:"50%",top:"50%",transform:"translate(-30%, -50%)",height:0,width:0,borderStyle:"solid",borderColor:_().Ay.uiBlack,borderRightWidth:0,borderLeftWidth:24.5,borderTopWidth:16.1,borderBottomWidth:16.1,borderTopColor:_().Ay.transparent,borderBottomColor:_().Ay.transparent},vt={position:"relative",height:70,width:70,borderWidth:3,borderStyle:"solid",borderColor:_().Ay.uiBlack,borderRadius:70},ht={position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},_t=Q().default.createClass(!1,{name:"PlayedStore"}),bt=Q().default.createClass(void 0,{name:"ErrorStore"});function yt(e){let{store:t,source:r,contentWrapStyle:i,handleFullScreen:l,aspectRatio:u,height:p,handleEmbedComp:m,isFullWidth:g,preserveScale:f,mediaType:v,useS3Url:h,isRootChild:_,contentStyle:b,blockLocation:y}=e;const S=(0,s().DP)(),w=(0,n.useRef)(null),k=(0,n.useCallback)((e=>{m(e),w.current=e}),[m]),I=(0,a().uB)(void 0,bt),A=(0,a().uB)(void 0,_t);(0,ut().w)((()=>{Y().A.state.online||I.setState({type:"offline"})}));const x=(0,a().K8)((()=>Y().A.state.online),[]),C=(0,o(591779).ZC)(x);(0,n.useEffect)((()=>{var e;void 0!==C&&(x&&!C)&&"offline"===(null===(e=I.state)||void 0===e?void 0:e.type)&&I.setState(void 0)}),[x,I,C]);const T=(0,a().K8)((()=>Ct("embed_url",S,g,_,f,p,b,y,A)),[S,g,_,f,p,b,y,A]);return(0,d.jsx)(ne().A,{url:r,permissionRecord:t.pointer,useS3Url:h,render:(e,t,o)=>{if(!o)return(0,d.jsx)("div",{});const n=(0,oe().mg)(e,void 0)||I.state;return t?"video"===v||(0,c().L_)({url:r})?(0,d.jsx)("div",{style:i,onMouseDown:ee().tr,children:(0,d.jsxs)("div",{style:{position:"relative"},onDoubleClick:l,children:[(0,d.jsx)(xt,{videoRef:w,setVideoRef:k,source:r,isFullWidth:g,isRootChild:_,preserveScale:f,height:p,contentStyle:b,blockLocation:y,playedStore:A,errorStore:I,signedUrl:t}),n&&(0,d.jsx)(kt,{error:n}),(0,d.jsx)(At,{videoRef:w,playedStore:A,errorStore:I})]})}):(0,d.jsx)("div",{style:i,onDoubleClick:l,children:(0,d.jsxs)("div",{style:{position:"relative"},children:[(0,d.jsx)(st().A,{ref:e=>m(e),source:t,height:p,style:T,isFullWidth:g,preserveScale:f,aspectRatio:u,background:!0}),n&&(0,d.jsx)(kt,{error:n})]})}):void 0}})}function St(e){return(0,d.jsx)("div",{style:{...vt,...e.style},children:(0,d.jsx)("div",{style:ft})})}const wt={render:e=>(0,d.jsx)(yt,{...e}),resizable:!0,embedGhost:!0};function kt(e){let{error:t}=e;return(0,d.jsx)(oe().Ay,{family:"video",error:t})}function It(){const e=(0,i().v3)(),{device:t}=e;return t.isFirefox||t.isMobile?null:(0,d.jsx)(St,{})}function At(e){let{videoRef:t,playedStore:o,errorStore:r}=e;const i=(0,n.useCallback)((e=>{const o=t.current;o&&(0,ee().SQ)({event:e,context:ee().y$.EditorClick,callback:()=>{o.play()}})}),[t]);return(0,a().K8)((()=>o.state||r.state),[o,r])?null:(0,d.jsx)("div",{onClick:i,style:ht,children:(0,d.jsx)(It,{})})}function xt(e){let{signedUrl:t,source:o,isFullWidth:r,isRootChild:l,preserveScale:c,height:u,contentStyle:p,blockLocation:m,playedStore:g,errorStore:f,videoRef:v,setVideoRef:h}=e;const _=(0,s().DP)(),b=(0,i().v3)(),y=(0,n.useCallback)((e=>{const{device:t}=b;t.isMobile&&g.setState(!1)}),[b,g]),S=(0,n.useCallback)((()=>{g.setState(!0)}),[g]),w=(0,n.useCallback)((()=>{const{device:e}=b;e.isAndroid&&document.fullscreenElement&&document.exitFullscreen()}),[b]),k=(0,n.useCallback)((()=>{const{device:e}=b,t=v.current;e.isIOS&&t&&t.pause()}),[b,v]),I=(0,n.useCallback)((e=>{const t=(0,oe().oq)(e.currentTarget,o);t&&f.setState(t)}),[o,f]),A=(0,a().K8)((()=>Ct("video_file",_,r,l,c,u,p,m,g)),[_,r,l,c,u,p,m,g]);return(0,d.jsx)("video",{ref:h,style:A,autoPlay:b.device.isIOS,playsInline:!0,controls:!0,preload:"metadata",onPause:y,onPlay:S,onEnded:w,onLoadStart:k,onError:I,src:t})}function Ct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"embed_url",t=arguments.length>1?arguments[1]:void 0,o=arguments.length>5?arguments[5]:void 0,n=arguments.length>7?arguments[7]:void 0,r=arguments.length>8?arguments[8]:void 0;const i={...arguments.length>6?arguments[6]:void 0};return(arguments.length>2?arguments[2]:void 0)&&(arguments.length>3?arguments[3]:void 0)&&(arguments.length>4?arguments[4]:void 0)&&(i.height=o),"video_file"!==e||r.state||(i.pointerEvents="none"),T().Ox(n)&&(i.maxHeight=240),i.backgroundColor=t.embedPlaceholderBackground,i}var Tt=()=>o(192264);function Mt(e){const{store:t,mediaType:o,fileUploadState:n,source:r,getRenderArgs:i}=e,s=(0,a().K8)((()=>function(e,t,o,n){var r;return function(e,t,o){if(t)return Nt.image;if(e){if(e.startsWith("data:")||e.startsWith("<img"))return;const t=(0,c().WT)({url:e,baseUrl:D().A.domainBaseUrl,publicDomainName:D().A.publicDomainName,preferredType:o});if("embed"!==t)return Nt[t]}if(o&&e)return Nt[o];return Oe().A}(e,null==n?void 0:n.dataURL,t??(null===(r=o)||void 0===r?void 0:r.getType()))}(r,o,t,n)),[n,o,r,t]),l=(0,a().K8)((()=>t.getProperties()),[t]);if(s){const e=i({source:r,store:t,properties:l}),o=s.render;return(0,d.jsx)(o,{...e})}return null}var Pt=()=>o(232063);const Bt={background:"rgba(255, 255, 255, 0.055)"},Rt={display:"flex",alignItems:"center",justifyContent:"center",padding:"4px 6px",borderRight:`1px solid ${_().Ay.whiteWithAlpha(.2)}`},Et="opacity 200ms ease-in-out",Dt=230,Nt={tweet:gt,gist:Fe,video:wt,image:rt,audio:se,invision:ct,mixpanel:Oe().A,maps:Oe().A,drive:Oe().A,framer:Oe().A,figma:Oe().A,loom:Oe().A,typeform:Oe().A,codepen:Oe().A,embed:Oe().A,pdf:o(244471).A,whimsical:Oe().A,miro:Oe().A,abstract:Oe().A,sketch:Oe().A,excalidraw:Oe().A,replit:Oe().A,hex:Oe().A,deepnote:Oe().A,drawing:xe},Lt=new Set(["pdf","drive"]);function Ft(e,t){const{store:r,disableMediaMenu:l,disabled:u,mediaType:p,blockLocation:h,preserveScale:_,inlineContentStyle:y,centerWrappedContent:S}=e,w=(0,n.useRef)(null),I=(0,z().bx)(r,u),C=(0,i().v3)(),{device:P}=C,D=(0,n.useRef)(null),[L,F]=(0,n.useState)(0),[V,j]=(0,n.useState)(!1),q=(0,n.useRef)(null),H=(0,a().K8)((()=>r.getType()),[r]),W=(0,a().K8)((()=>r.isNavigableAncestorNonEditableState()),[r]),K=(0,a().K8)((()=>zt(e.source,r)),[e.source,r]),G=(0,a().K8)((()=>o(982254).A.state.unauthorizedIframeUrls??[]),[]),$=(0,U().Pq)({source:K,unauthorizedIframeUrls:G}),Y=(0,a().K8)((()=>{const{block_aspect_ratio:e}=r.getFormat();if(e&&!(L<=0))return L*e}),[r,L]),Q=(0,n.useId)(),Z=(0,a().uB)(e.blockResizerStore??void 0,o(891279).A),ee=(0,a().uB)(void 0,o(463830).A),te=(0,a().uB)(void 0,X),oe=(0,a().K8)((()=>J().default.getKeyState(J().default.getBlockKey(r.id))),[r.id]),ne=(0,a().K8)((()=>Kt(K,p,r,oe)),[oe,p,K,r]),re=(0,a().K8)((()=>{const{block_height:e,block_width:t,block_preserve_scale:o,block_full_width:n,block_page_width:i,block_aspect_ratio:a}=r.getFormat(),{dragging:s,temporaryHeight:l,temporaryWidth:d,temporaryFullWidth:u,temporaryPageWidth:m}=Z.state,g=s?d:t??L,f=s?l:e,v=Boolean(s?u:n),h=Boolean(s?m:i);return{blockWidth:t,blockHeight:e,width:g,height:r.isExternalObjectInstanceBlockStore()&&"image"!==p?f||c().q3:f,dragging:s,preserveScale:Boolean(_||o),isFullWidth:v,isPageWidth:h,aspectRatio:a}}),[Z,L,p,_,r]),{popupWidth:ie,maxHeight:ae,mediaMenuCurrentTab:se,mediaMenuTabs:le,embedButtonText:ce,mediaMenuEmbedCaption:de,urlInputPlaceholder:ue,onRemoveBlockFromComment:pe}=e,me=(0,n.useCallback)((()=>{if(!l&&I){const e=se||"embed",t=(le||[{type:"embed"},{type:"file",fileUpload:!0,imageUpload:P.isAndroid,videoUpload:P.isAndroid}]).map((e=>function(e,t,o,n,r,i){switch(e.type){case"embed":const a=o||O().A.formatMessage(Tt().wO.embedButtonText);return{type:"embed",caption:n||O().A.formatMessage(Tt().wO.embedCaption),buttonText:a,inputPlaceholder:r||O().A.formatMessage(Tt().wO.pastePrompt),onChange:e=>{const o=(0,g().l)(e);m().t(o,"url")?(M().I(),Ht(o,i,t)):x().f1(O().A.formatMessage(Tt().wO.validLink))}};case"file":return{type:"file",fileUpload:Boolean(e.fileUpload),imageUpload:Boolean(e.imageUpload),videoUpload:Boolean(e.videoUpload),onUpload:e=>async function(e,t,o){(0,v().MX)(e.length>0,"Files can't be empty.");const n=t;if(!n)return;const r=N().y0(o);if(T().QM({environment:o,store:n,file:e[0],pageWidth:r,preferredType:n.getType()}),e.length<=1)return;const i=e.slice(1),a=await A().R.clipboardActions.load();E().createAndCommit({userAction:"EmbedBlock.insertOtherFiles",environment:o,canUndo:!0,perform:e=>{a.pasteFilesForBlocks({environment:o,files:i,transaction:e,insertBelowBlockStore:t})}})}(e,i,t)};case"unsplash":return{type:"unsplash",onChange:e=>{let{url:o}=e;M().I(),Ht(o,i,t)}};case"giphy":return{type:"giphy",onChange:e=>{let{url:o}=e;M().I(),Ht(o,i,t)}}}}(e,C,ce,de,ue,r))),o=w.current;if(o&&o instanceof Element){const n=o.getBoundingClientRect();M().W(C,{originRect:n,originGap:0,isSmallWidth:!1,showArrow:!0,currentTab:e,tabs:t,title:O().A.formatMessage(Tt().wO.embedTitle),...ie?{popupWidth:ie}:{},...ae?{maxHeight:ae}:{}})}}}),[I,P.isAndroid,l,C,r,ie,ae,se,le,ce,de,ue]),ge=(0,n.useCallback)((()=>{me()}),[me]),fe=(0,n.useCallback)((()=>{me()}),[me]),he=(0,n.useCallback)((()=>{me(),H&&k().qU(C,{type:"replace",block_type:H,block_id:r.id})}),[H,C,me,r.id]),_e=(0,n.useCallback)((()=>{!function(e,t){const o=e.getPropertyStore("caption");B().hc({environment:t,store:e}),R().setSelectionAtEnd({store:o});const n=e.getType();n&&k().qU(t,{type:"caption",block_type:n,block_id:e.id})}(r,C)}),[C,r]),be=(0,n.useCallback)((e=>{Ht(e,r,C)}),[C,r]),ye=(0,n.useCallback)((async()=>!!pe&&(await pe(r),!0)),[pe,r]),Se=(0,n.useCallback)((()=>{Kt(zt(K,r),p,r,oe)?Gt(r,h,C):he()}),[h,C,oe,p,he,K,r]),we=(0,n.useCallback)((()=>{const{isFullWidth:e,aspectRatio:t}=re,o=D.current;if(o&&o instanceof Element){const n=o.getBoundingClientRect();return e&&t?{...b().VP(n),width:n.width,height:n.width*t}:n}}),[re]),ke=(0,n.useCallback)((()=>!(!ne||!ne.renderFullScreen)),[ne]),Ie=(0,a().K8)((()=>r.getProperties()),[r]),Ae=(0,a().K8)((()=>r.isRootOrDirectChild()),[r]),xe=(0,a().K8)((()=>N().y0(C)),[C]),Ce=(0,a().K8)((()=>Z.state.dragging),[Z]),Te=(0,s().IS)((e=>{const t={position:"relative"};return S&&(t.display="flex",t.justifyContent="center",t.alignItems="center",t.minHeight=220),{content:{display:"block",pointerEvents:Ce?"none":"auto",width:"100%"},wrapper:t}}),[Ce,S]),Me=(0,n.useCallback)((e=>{const{source:t,store:o,properties:n}=e,r=f().k4p(n&&n.title),i=f().k4p(n&&n.size),{blockWidth:a,blockHeight:s,width:l,height:c,dragging:d,preserveScale:u,isFullWidth:m,isPageWidth:g,aspectRatio:v}=re,_=xe,b=Ae,{device:S}=C,A=L&&Y?{width:L,height:Y}:void 0,x={store:o,source:t,blockWidth:a,blockHeight:s,aspectRatio:v,width:l,height:c,dragging:d,preserveScale:u,isFullWidth:m,isPageWidth:g,pageWidth:_,isRootChild:b,dataURL:oe?oe.dataURL:void 0,dataName:r,dataSize:i,disabled:!I,contentStyle:Te.content,contentWrapStyle:Te.wrapper,isLoading:Boolean(oe),progressPercent:oe?oe.progressPercent:0,handleFullScreen:()=>Gt(o,h,C),handleEmbedComp:e=>D.current=e,onSrcFailedToLoad:()=>j(!0),onSrcLoad:()=>j(!1),viewOriginal:()=>function(e,t){const o=e;if(o){T().oD(t,{store:o,from:"view_original"});const n=o.getType();n&&k().qU(t,{type:"original",block_type:n,block_id:e.id})}}(o,C),inlineContentStyle:y,blockLocation:h,mediaType:p,imageBoxRef:q,useS3Url:S.isIOS&&S.isMobileNative,embedContainerDimensions:A,embedRootRef:w};return x}),[re,xe,Ae,C,L,Y,oe,I,Te.content,Te.wrapper,y,h,p,q,j,w]),Pe=(0,n.useCallback)((()=>{if(!K)return;const e=Me({source:K,properties:Ie,store:r});return ne&&ne.renderFullScreen?ne.renderFullScreen(e):void 0}),[Me,Ie,ne,K,r]),Be=(0,a().K8)((()=>o(353643).A.state.isDragging),[]),Re=(0,a().K8)((()=>o(93658).default.state.isActive),[]),Ee=(0,n.useCallback)((()=>{Be||Re||te.setState({...te.state,hovered:!0})}),[te,Re,Be]),De=(0,n.useCallback)((()=>{Be||Re||te.setState({...te.state,hovered:!1})}),[te,Re,Be]),Ne=(0,n.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,o(819121).p)(t)&&te.setState({...te.state,focused:!0})}),[te]),Le=(0,n.useCallback)((()=>{te.setState({...te.state,focused:!1})}),[te]),Fe=oe&&oe.dataURL||K;let Ue;return Ue=$||!Fe?(0,d.jsx)(ve().s,{allowSelectionWithin:!1,ref:w,children:(0,d.jsx)(Ot,{embedBlockStore:te,fileUploadState:oe,canEdit:I,store:r,openMenu:me,handleMouseEnter:Ee,handleMouseLeave:De,disabled:e.disabled,iconSvg:e.iconSvg,unauthorizedElectronUrl:$?K:void 0,children:e.children})}):(0,d.jsx)(ve().s,{allowSelectionWithin:!0,ref:w,children:(0,d.jsx)($t,{store:r,fileUploadState:oe,blockResizerStore:Z,embedBlockStore:te,alignmentPopupStore:ee,isStoreNavigableAncestorNonEditableState:W,captionAriaId:Q,srcFailedToLoad:V,dimensions:re,handleMouseEnter:Ee,handleMouseLeave:De,handleFocus:e=>Ne(e),handleBlur:Le,setEmbedContainerWidth:F,source:Fe,mediaType:p,blockLocation:h,preserveScale:_,disableResizers:e.disableResizers,hideContent:e.hideContent,disableCommentMenu:e.disableCommentMenu,disableActions:e.disableActions,disabled:u,contentBelowSource:e.contentBelowSource,showExpandButton:e.showExpandButton,getRenderArgs:Me,canEdit:I})}),(0,z().NW)(r,t,(0,n.useMemo)((()=>({renderedType:"embed",getBlockStore:()=>r,getNode:()=>w.current,handleCreated:ge,caption:_e,edit:fe,activate:Se,replace:he,embed:be,canRenderFullScreen:ke,getFullScreenNodeRect:we,handleRemoveBlockFromComment:ye,renderFullScreenNode:Pe,getBlockLocation:()=>e.blockLocation,props:e})),[ge,_e,fe,Se,he,be,ke,we,ye,Pe,r,e]),Ue)}const Ut=n.memo(n.forwardRef(Ft),o(821062).A);function Ot(e){const{embedBlockStore:t,fileUploadState:o,blockLocation:r,canEdit:l,iconSvg:c,store:p,openMenu:m,disableCommentMenu:g,hideContent:f,centerWrappedContent:v,handleMouseEnter:_,handleMouseLeave:b,unauthorizedElectronUrl:y}=e,w=(0,i().v3)(),{device:k}=w,I=(0,a().K8)((()=>!Y().A.state.online),[]),A=(0,a().K8)((()=>k.isMobile||t.state.hovered),[k,t]),x=(0,n.useCallback)((()=>{y&&C().openExternalUrl(y)}),[y]),M=T().Ox(r),P=(0,s().IS)((e=>{const t={position:"relative"};v&&(t.display="flex",t.justifyContent="center",t.alignItems="center",t.minHeight=220);const o={display:"flex"};return T().Ox(r)&&(o.borderWidth=1,o.borderColor=e.regularDividerColor,o.borderRadius=3,o.marginBottom=0,o.width=214,o.color=e.text.secondary),{placeholder:t,container:o}}),[r,v]);return(0,d.jsxs)("div",{style:P.container,onMouseEnter:_,onMouseLeave:b,children:[(0,d.jsx)(Qe().A,{style:P.placeholder,disabled:!l||I,iconSvg:void 0!==c?c:u,shouldHideRight:!A,right:l&&(0,d.jsx)(qt,{blockLocation:r,store:p,isPlaceholder:!0}),onClick:y?x:m,isLoading:Boolean(o),progressPercent:o?o.progressPercent:0,file:o?o.file:void 0,name:o?o.name:void 0,size:o?o.size:void 0,isInComment:M,children:y?(0,d.jsx)(h().sA,{id:"embedBlock.isEmbedUrlUnauthorized.placeholder",defaultMessage:"Click to view content from {domain} in the browser. <inlinelink>Learn more</inlinelink>.",values:{domain:S().FB(y),inlinelink:e=>(0,d.jsx)(at().A,{external:!0,href:(0,j().xS)("guides.connectedApps"),children:e})}}):e.children||(0,d.jsx)(h().sA,{defaultMessage:"Embed anything (PDFs, Google Docs, Google Maps, Spotify…)",id:"embedBlock.embedAnything.placeholder"})}),(0,d.jsx)(me().A,{disableCommentMenu:g,hideContent:f,store:p})]})}function Vt(e){const t=e.getProperties(),o=null==t?void 0:t.source,n=f().q4_(o),{display_source:r}=e.getFormat();return(0,c().n4)(r||n)}function jt(e){const{device:t}=e;return t.isMobile?_().Ay.blackWithAlpha(.3):_().Ay.blackWithAlpha(.6)}function zt(e,t){return e||Vt(t)}function qt(e){let{isPlaceholder:t,blockLocation:o,store:n}=e;const r=T().Ox(o),i=r?"comment_media":"default";return(0,d.jsx)(ue().A,{store:n,fadeIn:!1,iconStyle:t?void 0:{fill:_().Ay.white},actionSectionGroupKey:i,hideFilterActionsInput:r,hoveredStyle:Bt,tooltipContent:O().A.formatMessage(Tt().wO.actionMore)})}function Ht(e,t,o){const n=t;if(!n)return;const r=N().y0(o);I().oF(o,{pastedText:e,source:"embed_block_menu"});const i=G().default.mark("embed_render_complete");T().Fy(o,{source:e,isDataURL:!1,store:n,pageWidth:r,preferredType:t.getType(),metric:i})}function Wt(e){const{renderer:t,blockLocation:o,isFullWidth:n,dragging:r,srcFailedToLoad:i,isExternalObjectInstanceBlockStore:a}=e,s={display:"flex"};return T().Ox(o)&&(s.display="inline-flex",s.maxHeight=240),"audio"===t.rendererType&&(s.display="flex"),"image"===t.rendererType&&(i?s.width="100%":a||n||r||(s.width="fit-content")),s}function Kt(e,t,o,n){var r;return function(e,t,o){if(t)return Nt.image;if(e){if(e.startsWith("data:")||e.startsWith("<img"))return;const t=(0,c().WT)({url:e,baseUrl:D().A.domainBaseUrl,publicDomainName:D().A.publicDomainName,preferredType:o});if("embed"!==t)return Nt[t]}return o&&e?Nt[o]:Oe().A}(e,null==n?void 0:n.dataURL,t??(null===(r=o)||void 0===r?void 0:r.getType()))}function Gt(e,t,o){P().iy({environment:o,blockStore:e,blockLocationOfTargetBlock:t});const n=e.getType();n&&k().qU(o,{type:"full_screen",block_type:n,block_id:e.id})}function $t(e){const{store:t,blockLocation:o,fileUploadState:s,mediaType:c,source:u,blockResizerStore:p,isStoreNavigableAncestorNonEditableState:m,embedBlockStore:g,alignmentPopupStore:f,captionAriaId:v,srcFailedToLoad:h,disableResizers:_,disableCommentMenu:b,hideContent:y,disableActions:S,disabled:k,contentBelowSource:I,showExpandButton:A,dimensions:x,handleMouseEnter:C,handleMouseLeave:M,handleFocus:P,handleBlur:B,setEmbedContainerWidth:R,getRenderArgs:E,canEdit:D}=e,N=(0,i().v3)(),{device:U}=N,{blockType:j,altTextTooltipText:z,isExternalObjectInstanceBlockStore:q}=(0,a().K8)((()=>{let e=(0,F().r4)(t.getPropertyValue("alt_text"),t);return e=e.length>100?`${e.slice(0,100)}...`:e,{isExternalObjectInstanceBlockStore:t.isExternalObjectInstanceBlockStore(),blockType:t.getType(),altTextTooltipText:e}}),[t]),{preserveScale:H,isFullWidth:G,dragging:$}=x,[Y,Q]=(0,n.useState)(!0),Z=(0,a().K8)((()=>g.state.hovered),[g]),X=(0,n.useRef)(null),J=(0,n.useRef)(null),ee=(0,a().K8)((()=>t.isRootOrDirectChild()),[t]),te=(0,n.useCallback)((e=>{if(j&&(0,l().UL)(j)&&Lt.has(j))return{leftSide:!1,rightSide:!1,bottom:!1,rightCorner:!0,leftCorner:!0};const t=ee,{preserveScale:o,isFullWidth:n}=x,{resizable:r}=e,i=D&&r&&!_&&!h,a=i&&(!o||n&&t)&&!h,s=a&&!n&&!h;return{leftSide:i&&t&&!h,rightSide:i,bottom:a,rightCorner:s,leftCorner:s&&t&&!h}}),[j,x,_,D,ee,h]),oe=(0,a().K8)((()=>Kt(u,c,t,s)),[s,c,u,t]),ne=(0,r().y)(),re=(0,n.useCallback)(((e,t)=>{e&&oe&&oe.embedGhost&&(0,fe().v)(ne,(()=>e.setAttribute("embed-ghost","")))}),[ne,oe]);(0,n.useLayoutEffect)((()=>{X.current&&re(X.current,u)}),[re,u]),(0,n.useEffect)((()=>{if(!X.current)return;const e=new ResizeObserver((e=>{for(const t of e){const e=t.contentRect.width;e>0&&(R(e),Q(!0))}}));return e.observe(X.current),()=>{e.disconnect()}}),[re,R,u]);const ie=(0,a().K8)((()=>function(e,t){const{block_width:o}=e.getFormat(),{temporaryWidth:n}=t.state;return void 0!==n?n<=Dt:void 0!==o&&o<=Dt}(t,p)),[p,t]);if(oe){const{resizable:e}=oe,{leftSide:n,rightSide:r,bottom:i,leftCorner:a,rightCorner:l}=te(oe),_="external_object_instance"===j,R="video"===j,F="image"===j,Q=Boolean(z&&"image"===j&&!ie&&!T().Ox(o)),ee=D&&!m?Tt().wO.actionEditAltText:Tt().wO.actionViewAltText;return(0,V().A)((T=>(0,d.jsxs)("div",{role:"figure","aria-labelledby":v,ref:X,...T,children:[Y?(0,d.jsxs)("div",{style:Wt({renderer:oe,blockLocation:o,isFullWidth:G,dragging:$,srcFailedToLoad:h,isExternalObjectInstanceBlockStore:q}),ref:J,children:[(0,d.jsxs)("div",{className:L().OiJ,style:{position:"relative",overflow:e?"hidden":"visible",flexGrow:1},onFocus:P,onBlur:B,onMouseLeave:M,onMouseEnter:C,children:[(0,d.jsx)(Mt,{store:t,mediaType:c,fileUploadState:s,source:u,getRenderArgs:E}),n&&(0,d.jsx)(Pt().A,{store:t,resizerType:ge().f9.Horizontal,resizerAlignment:ge()._l.Left,resizeComponent:J,preserveScale:H,isHovered:Z,blockResizerStore:p},"LeftResizer"),r&&(0,d.jsx)(Pt().A,{store:t,resizerType:ge().f9.Horizontal,resizerAlignment:ge()._l.Right,resizeComponent:J,preserveScale:H,isHovered:Z,blockResizerStore:p},"RightResizer"),l&&(0,d.jsx)(Pt().A,{store:t,resizerType:ge().f9.Corner,resizerAlignment:ge()._l.Right,resizeComponent:J,preserveScale:H,isHovered:Z,blockResizerStore:p},"RightCornerResizer"),a&&(0,d.jsx)(Pt().A,{store:t,resizerType:ge().f9.Corner,resizerAlignment:ge()._l.Left,resizeComponent:J,preserveScale:H,isHovered:Z,blockResizerStore:p},"LeftCornerResizer"),i&&(0,d.jsx)(Pt().A,{store:t,resizerType:ge().f9.Vertical,resizeComponent:J,preserveScale:H,isHovered:Z,blockResizerStore:p},"BottomResizer"),!S&&(0,d.jsx)(Tt().il,{store:t,alignmentPopupStore:f,blockResizerStore:p,embedBlockStore:g,fileUploadState:s,isStoreNavigableAncestorNonEditableState:m,mediaType:c,source:u,blockLocation:o,dimensions:x,canEdit:D}),S&&A&&oe.renderFullScreen&&(0,d.jsx)(Yt,{store:t,blockLocation:o}),I,F&&(0,d.jsx)(K,{isHovered:Z,store:t}),F&&(0,d.jsx)(W,{isHovered:Z,store:t,hideText:ie,disableActions:m||!D}),!(_||R)&&(0,d.jsx)(Qt,{show:Q,tooltipText:z,tooltipSecondaryText:O().A.formatMessage(ee),buttonText:"ALT",className:L().bmm,onClickHandler:()=>{w().h({blockStore:t,entrypoint:"block_button",environment:N})}})]}),!G&&!U.isMobile&&(0,d.jsx)(me().A,{disableCommentMenu:b,hideContent:y,store:t,hideIfSidebarOrMarginCommentsVisible:!0})]}):null,(0,d.jsx)(pe().c,{store:t,captionAriaId:v,disabled:k})]})))}return null}function Yt(e){let{store:t,blockLocation:o}=e;const n=(0,i().v3)(),r=(0,s().IS)((e=>({button:{position:"absolute",right:12,top:12,background:e.buttonBackground},hovered:{background:e.buttonHoveredBackground},pressed:{background:e.buttonPressedBackground}})),[]);return(0,d.jsx)(be().p,{style:r.button,icon:e=>(0,p().e)({...e,width:16,height:16}),hoveredStyle:r.hovered,pressedStyle:r.pressed,onClick:()=>Gt(t,o,n),children:(0,d.jsx)(h().sA,{id:"embedBlock.expandFullScreen.button.label",defaultMessage:"Expand"})})}function Qt(e){let{show:t,tooltipText:o,tooltipSecondaryText:n,buttonText:r,onClickHandler:a,className:l}=e;const c=(0,i().v3)(),u=(0,s().IS)((e=>({buttonWrapper:{position:"absolute",bottom:"8px",right:"8px",background:jt(c),borderRadius:4,overflow:"hidden"},button:{padding:"4px 6px",fontSize:12,fontWeight:y().Wy.medium,letterSpacing:.2,color:"white"},tooltipText:{overflow:"hidden",textOverflow:"ellipsis"},tooltipSecondaryText:{color:e.text.contrastSecondary}})),[c]);return(0,d.jsx)(he().A,{visible:t,initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,d.jsx)("div",{style:u.buttonWrapper,children:(0,d.jsx)(ye().A,{renderTooltip:()=>(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:u.tooltipText,children:o}),n&&(0,d.jsx)("div",{style:u.tooltipSecondaryText,children:n})]}),placement:$().W.Bottom,disableTooltip:!t,render:e=>(0,d.jsx)(_e().A,{className:l,...e,ariaLabel:n,style:u.button,hoveredStyle:Bt,disabled:!t,onClick:a,children:r})})})})}},24973:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},26468:(e,t,o)=>{o.d(t,{j:()=>l});var n=()=>o(845710),r=()=>o(731320),i=()=>o(792415),a=()=>o(351360),s=()=>o(326589);function l(e){if(!(0,s().g)())return!1;if(e.currentUser.isLoggedIn()){const t=a().default.state.mainEditorCurrentBlockStore,o=!!t&&(0,r().qb)(e,t);return Boolean(o)}{var t;const e=null===(t=i().A.state.publicPageData)||void 0===t?void 0:t.sharingReceiverExperimentVariant,r="sidebar"===e;var o;if(r||"control"===e)(0,n().u4)({eventName:"sharing_receiver_experiment_exposure",eventData:{group:e,is_client:!0,spaceId:null===(o=i().A.state.publicPageData)||void 0===o?void 0:o.spaceId}});return r}}},27178:(e,t,o)=>{o.d(t,{mN:()=>a,qo:()=>c});var n=()=>o(959013),r=()=>o(972435);const i=(0,n().YK)({default:{defaultMessage:"Default",id:"colors.select.lightGray"},gray:{defaultMessage:"Gray",id:"colors.select.gray"},brown:{defaultMessage:"Brown",id:"colors.select.brown"},orange:{defaultMessage:"Orange",id:"colors.select.orange"},yellow:{defaultMessage:"Yellow",id:"colors.select.yellow"},green:{defaultMessage:"Green",id:"colors.select.green"},blue:{defaultMessage:"Blue",id:"colors.select.blue"},purple:{defaultMessage:"Purple",id:"colors.select.purple"},pink:{defaultMessage:"Pink",id:"colors.select.pink"},red:{defaultMessage:"Red",id:"colors.select.red"}});function a(e){const t=i[e]||i.gray;return r().A.formatMessage(t)}const s=(0,n().YK)({foregroundColorDefault:{id:"action.foregroundColor.default.name",defaultMessage:"Default text"},foregroundColorGray:{id:"action.foregroundColor.gray.name",defaultMessage:"Gray text"},foregroundColorBrown:{id:"action.foregroundColor.brown.name",defaultMessage:"Brown text"},foregroundColorOrange:{id:"action.foregroundColor.orange.name",defaultMessage:"Orange text"},foregroundColorYellow:{id:"action.foregroundColor.yellow.name",defaultMessage:"Yellow text"},foregroundColorGreen:{id:"action.foregroundColor.green.name",defaultMessage:"Green text"},foregroundColorBlue:{id:"action.foregroundColor.blue.name",defaultMessage:"Blue text"},foregroundColorPurple:{id:"action.foregroundColor.purple.name",defaultMessage:"Purple text"},foregroundColorPink:{id:"action.foregroundColor.pink.name",defaultMessage:"Pink text"},foregroundColorRed:{id:"action.foregroundColor.red.name",defaultMessage:"Red text"},backgroundColorGray:{id:"action.backgroundColor.gray.name",defaultMessage:"Gray background"},backgroundColorBrown:{id:"action.backgroundColor.brown.name",defaultMessage:"Brown background"},backgroundColorOrange:{id:"action.backgroundColor.orange.name",defaultMessage:"Orange background"},backgroundColorYellow:{id:"action.backgroundColor.yellow.name",defaultMessage:"Yellow background"},backgroundColorGreen:{id:"action.backgroundColor.green.name",defaultMessage:"Green background"},backgroundColorBlue:{id:"action.backgroundColor.blue.name",defaultMessage:"Blue background"},backgroundColorPurple:{id:"action.backgroundColor.purple.name",defaultMessage:"Purple background"},backgroundColorPink:{id:"action.backgroundColor.pink.name",defaultMessage:"Pink background"},backgroundColorRed:{id:"action.backgroundColor.red.name",defaultMessage:"Red background"},backgroundColorDefault:{id:"action.backgroundColor.default.name",defaultMessage:"Default background"}}),l={default:{...s.foregroundColorDefault},gray:{...s.foregroundColorGray},brown:{...s.foregroundColorBrown},orange:{...s.foregroundColorOrange},yellow:{...s.foregroundColorYellow},teal:{...s.foregroundColorGreen},blue:{...s.foregroundColorBlue},purple:{...s.foregroundColorPurple},pink:{...s.foregroundColorPink},red:{...s.foregroundColorRed},default_background:{...s.backgroundColorDefault},gray_background:{...s.backgroundColorGray},brown_background:{...s.backgroundColorBrown},orange_background:{...s.backgroundColorOrange},yellow_background:{...s.backgroundColorYellow},teal_background:{...s.backgroundColorGreen},blue_background:{...s.backgroundColorBlue},purple_background:{...s.backgroundColorPurple},pink_background:{...s.backgroundColorPink},red_background:{...s.backgroundColorRed}};function c(e){return l[e]}},27654:(e,t,o)=>{o.d(t,{c:()=>n});const n=(0,o(296540).createContext)(!1);n.displayName="ColumnListContext"},27732:(e,t,o)=>{o.d(t,{t$:()=>y,Go:()=>w,cT:()=>S,Iq:()=>k,xI:()=>I,C4:()=>b});var n=()=>o(713998),r=()=>o(183558),i=()=>o(254497),a=()=>o(312296),s=()=>o(342),l=()=>o(685889),c=()=>o(878423),d=()=>o(901952),u=()=>o(299709),p=()=>o(989423);var m=()=>o(235191),g=()=>o(878060),f=()=>o(896628),v=()=>o(606952),h=()=>o(317909);function _(e){const{environment:t,collectionStore:o,collectionPointer:n,property:r,name:i,autoRelate:s,limit:l,targetPropertyID:c,connectedRelation:d,transaction:u,hideByDefaultInUnconfiguredViews:p}=e,m={type:"relation",name:i,collection_id:n.id,collection_pointer:n,limit:"1"===l?1:void 0,property:c,version:"v2",autoRelate:s,connectedRelation:d,hideByDefaultInUnconfiguredViews:p};return(0,a().F)({environment:t,collectionStore:o,update:{[r]:m},transaction:u}),m}function b(e){const{environment:t,collectionStore:o,propertySchema:n,targetPropertyID:r,property:i,autoRelate:s,transaction:l}=e;(0,a().F)({environment:t,collectionStore:o,update:{[i]:{...n,autoRelate:s,property:r,version:"v2"}},transaction:l})}function y(e){const{environment:t,collectionStore:o,property:n,transaction:r}=e,s=o.getSchema()[n];s&&"relation"===s.type&&((0,a().F)({environment:t,collectionStore:o,update:{[n]:null},transaction:r}),(0,i().E)({collectionStore:o,update:{[n]:s},transaction:r}))}function S(e){var t,o;const{environment:n,collectionContextStore:i,collectionStore:a,property:u,propertyName:p,propertyLimit:g,propertyIcon:f,hasInverseRelation:v,inverseName:h,autoRelate:b,intl:y,connectedRelation:S,transaction:w,from:k,analyticsFrom:I,onlyCheckPermissions:A}=e,x=null===(t=c().A.state.caches[s().oB])||void 0===t?void 0:t.inMemoryRecordCache,C=x?null===(o=e.targetCollectionStore)||void 0===o?void 0:o.clone(x):e.targetCollectionStore,T=C.pointer.id===a.id&&Boolean(v)?"separate_property":"same_property",M=a.getSchema()[u],P="subitem"===k||void 0,{propertyId:B}=function(e){const{environment:t,collectionStore:o,property:n,limit:i,collectionPointer:a,selfRelationType:s,oneWay:l,autoRelate:c,connectedRelation:d,transaction:u,hideByDefaultInUnconfiguredViews:p}=e;if(!o)return;const m=o.getSchema()[n];if(!m)return;const g=a.id===o.id?"same_property"===s?n:(0,r().Ay)():l?void 0:(0,r().Ay)();return{propertyId:g,relationPropertySchema:_({environment:t,collectionStore:o,collectionPointer:a,property:n,name:m.name,autoRelate:c,limit:i,targetPropertyID:g,connectedRelation:d,transaction:u,hideByDefaultInUnconfiguredViews:p})}}({environment:n,collectionStore:a,property:u,limit:g,collectionPointer:C.pointer,selfRelationType:T,oneWay:!v,autoRelate:b,connectedRelation:S,transaction:w,hideByDefaultInUnconfiguredViews:P})??{};let R;if((null==M?void 0:M.name)!==p&&(m().YO({collectionStore:a,property:u,name:p,transaction:w}),(0,d().V)({environment:n,collectionContextStore:i,property:u,from:I??"view_settings",action:"rename"})),S&&f&&m().yC({collectionStore:a,property:u,icon:f,transaction:w}),A&&v&&null!=a&&a.canEditCollection()&&B){const e=l().OV({inverseName:h,collectionStore:a,propertySchema:M,intl:y,targetCollectionStore:C,from:k});R=_({environment:n,collectionStore:C,collectionPointer:a.pointer,property:B,name:e,autoRelate:b,limit:"subitem"===k?"1":"no_limit",targetPropertyID:u,connectedRelation:S,transaction:w,hideByDefaultInUnconfiguredViews:P})}if(v&&l().uf(C)&&B){const e=l().OV({inverseName:h,collectionStore:a,propertySchema:M,intl:y,targetCollectionStore:C,from:k});R=_({environment:n,collectionStore:C,collectionPointer:a.pointer,property:B,name:e,autoRelate:b,limit:"subitem"===k?"1":"no_limit",targetPropertyID:u,connectedRelation:S,transaction:w,hideByDefaultInUnconfiguredViews:P})}return{propertyId:u,inverseRelationPropertyId:v?B:void 0,targetRelationPropertySchema:R}}function w(e){var t;const{environment:o,collectionContextStore:n,property:i,hasInverseRelation:a,inverseName:d,autoRelate:u,intl:p,transaction:g}=e,f=l().Jq(n,i);if(!f||"relation"!==f.type)return;const v=null===(t=c().A.state.caches[s().oB])||void 0===t?void 0:t.inMemoryRecordCache;let h=l().pg(n,f);h&&v&&(h=h.clone(v));const S=n.collectionStore();if(!S||!h)return;const w=l().OV({inverseName:d,collectionStore:S,propertySchema:f,intl:p,targetCollectionStore:h});if(a&&!l().D5(n,i,h)){const e=(0,r().Ay)();b({environment:o,collectionStore:S,propertySchema:f,property:i,targetPropertyID:e,autoRelate:u,transaction:g}),_({environment:o,collectionStore:h,collectionPointer:S.pointer,property:e,name:w,autoRelate:u,limit:"no_limit",targetPropertyID:i,transaction:g,hideByDefaultInUnconfiguredViews:void 0})}else if(a){const e=f.property;if(!e)return;m().YO({collectionStore:h,property:e,name:w,transaction:g}),u&&(m().qV({collectionStore:S,property:i,autoRelate:u,transaction:g}),m().qV({collectionStore:h,property:e,autoRelate:u,transaction:g}))}else{u&&m().qV({collectionStore:S,property:i,autoRelate:u,transaction:g});const e=f.property;if(!e)return;b({environment:o,collectionStore:S,propertySchema:f,property:i,targetPropertyID:h.id===S.id?i:void 0,autoRelate:u,transaction:g}),y({environment:o,collectionStore:h,property:e,transaction:g})}}function k(e){const{store:t,propertyId:o,value:r,environment:i,relatedPageId:a,propertySchema:s,transaction:l,collectionContextStore:c,analyticsData:d,isUnthrottled:p}=e,m=t.getPropertyStore(o),f=n().Ap(r);if(v().KY({environment:i,store:m,value:f,transaction:l}),c&&d){var h;const{analyticsFrom:e,isFromBulkActionsToolbar:t}=d;(0,u().E)({environment:i,block_id:a,property:o,property_type:s.type,from:e,collectionContextStore:c,isFromBulkActionsToolbar:t,isUnthrottled:p,integration_id:null===(h=s.connectedRelation)||void 0===h?void 0:h.integration_id,action:"remove",value_count:r.length})}g().n({environment:i,store:t,relationPropertyId:o})}function I(e){const{propertyFormat:t,visibility:o,collectionStore:r,property:i,environment:a}=e,s=t.property,c=l().B7({collectionStore:r,property:i}),d=(0,n().Vf)(c,s,!o),u={...l().TA(r)};u[i]||(u[i]={}),u[i].related_properties=d,h().createAndCommit({userAction:"collectionRelationActions.updateRelationPropertyVisibility",environment:a,canUndo:!0,perform:e=>{f().zA({stores:[r],update:{collection_relation_options:u},transaction:e})}}),function(e,t){p().vd(e,"relation_update_property_visibility",t)}(a,{collection_id:r.id,property_id:i,related_property_id:s,visible:!o})}},30175:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{url:"",status:"draft",name:""}}}const r=new n},30626:(e,t,o)=>{o.d(t,{_:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("dots",{viewBox:"0 0 13 3",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M3,1.5A1.5,1.5,0,1,1,1.5,0,1.5,1.5,0,0,1,3,1.5Z"}),(0,n.jsx)("path",{d:"M8,1.5A1.5,1.5,0,1,1,6.5,0,1.5,1.5,0,0,1,8,1.5Z"}),(0,n.jsx)("path",{d:"M13,1.5A1.5,1.5,0,1,1,11.5,0,1.5,1.5,0,0,1,13,1.5Z"})]})})},31278:(e,t,o)=>{o.d(t,{FU:()=>n,zz:()=>i});const n=5;class r extends(()=>o(757695))().default{getInitialState(){return{type:"idle"}}isAvailable(){return"ready"===this.state.type&&this.state.questions.length>0}}const i=new r},34542:(e,t,o)=>{o.d(t,{Fq:()=>B,f6:()=>P,oC:()=>R,yO:()=>M});o(16280);var n=()=>o(584262),r=()=>o(857639),i=()=>o(126818),a=()=>o(313784),s=()=>o(665344),l=()=>o(94830),c=()=>o(763824),d=()=>o(973647),u=()=>o(466614),p=()=>o(160568),m=()=>o(449506),g=()=>o(901389),f=()=>o(624550),v=()=>o(496414),h=()=>o(857783),_=()=>o(436572),b=()=>o(426116),y=()=>o(812182),S=()=>o(855801),w=()=>o(211716),k=()=>o(972435),I=()=>o(530681),A=()=>o(816360),x=()=>o(351360),C=()=>o(714818),T=()=>o(753035);async function M(e){const{spaceViewStore:t}=e;await b().tR({...e,userSettingsStore:x().default.state.currentUserSettingsStore,userRootStore:x().default.state.currentUserRootStore,pageVisitSource:n().y8.DuplicateTemplateSwitchSpace,navigationType:"switchingToOrLoadingSpace"}),T().A.setState({...T().A.state,spaceStore:t.getSpaceStore(),spaceViewStore:t,teamStore:void 0})}async function P(e){const{open:t,blockStore:o,teamStore:n,spaceStore:r,spaceViewStore:i}=T().A.state;if(t&&o&&r&&i)return B({environment:e,blockStore:o,spaceStore:r,spaceViewStore:i,teamStore:n})}async function B(e){const{environment:t,blockStore:o,spaceStore:n,spaceViewStore:i,teamStore:m,hideModal:h=!1,from:w,templateId:I,duplicationStartedToastProps:A={},duplicationFinishedToastProps:x={},isEmailShared:C,isMobile:M=!1,showDuplicationStartedToast:P=!0,showDuplicationFinishedToast:B=!0}=e,D=k().A.getIntl(),N=await R(t,o.id);P&&function(e){const{intl:t,toastProps:o={},isMobile:n=!1}=e;if(n)return void _().D6({label:t.formatMessage({id:"inApp.template.duplication.started.toast.mobile.message",defaultMessage:"Template is being added to your private space. We will let you know when it’s ready to use."}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}});y().HK({id:"template_duplication_toast",title:t.formatMessage({id:"inApp.template.duplication.started.toast.title",defaultMessage:"Template is being added"}),message:t.formatMessage({id:"inApp.template.duplication.started.toast.message",defaultMessage:"We will let you know when it’s ready to use in your workspace"}),presentationType:"transient",icon:a().S,...o})}({intl:D,toastProps:A,isMobile:M});const L=Date.now();let F,U=!1;const O=T().A.state.isFromTemplateGallery||"inApp"===w||"mobileApp"===w||"notion_template_gallery"===w||"public_page"===w&&!!N&&(0,l().RS)(N);try{await Promise.all([b().yV({environment:t,spaceViewStore:i}),(0,c().wR)(0).then((()=>{T().A.setState({...T().A.state,open:!1})}))]);const e=function(e,t){const o=t?{id:e.idCreator.idInMain(s()._i),table:s()._i}:void 0;return o}(t,O),r=T().A.state.isFromTemplateGallery||"notion_template_gallery"===w?"web_gallery":"inApp"===w?"in_app":"mobileApp"===w?"mobile_app":"public_page",a={duplicateOnlyCollectionSchema:!1,addCopyName:!1,appendWithoutAfter:!0,unlockPage:!0,event:void 0,installationImprint:e},{shouldUseDuplicateTemplateBlock:u}=await(0,S().D6)();if(u(r)||await f().Xm({environment:t,blockId:o.id,spaceId:n.id,templateId:I,installationId:null==e?void 0:e.id,source:r,context:"public_page_duplicate_multiple_workspace",isEmailShared:C}),F=await f().Jx({environment:t,store:o,newParentStore:m||n,templateInstallationMetadata:{source:r,context:"public_page_duplicate_multiple_workspace",isEmailShared:C,isListedTemplate:!!N,isFirstPartyPaidTemplate:void 0!==N&&(0,l().Z1)(N),isFromDuplicateParam:T().A.state.isFromDuplicateParam},...a}),!F||d().Q.isFail(F))throw new Error("Failed to duplicate template");const p=d().Q.unwrap(F);if(null==p||!p.length)throw new Error("Failed to duplicate template");if(U=!0,B){const e=Date.now()-L;e>=5e3?E({environment:t,template:N,intl:D,blockStores:p,toastProps:x,isMobile:M}):await new Promise((o=>{setTimeout((()=>{E({environment:t,template:N,intl:D,blockStores:p,toastProps:x,isMobile:M}),o()}),5e3-e)}))}return p[0]}catch(V){h?r().log({from:"client/checkoutActions",level:"error",type:"aiUpgrade.duplicationFailed",data:{message:"AI Upgrade duplication failed.  Block store not found"}}):F&&d().Q.isFail(F)&&u().Rk(F.error.error)?u().yj({product:F.error.error.clientData.metadata.product}):g().f1(D.formatMessage({id:"forkPageModalActions.duplicateToHelper.failed",defaultMessage:"Template duplication failed"}))}finally{const e=Date.now()-L;p().hB(t,{from:"notion_template_gallery"!==w&&"public_page"!==w&&w?w:"publicPage",success:U,template_id:I??(null==N?void 0:N.id),template_block_id:o.id,target_space_id:n.id,context:"public_page_duplicate_multiple_workspace",template_duplication_duration_ms:e,template_duplication_duration_with_minimum_ms:e,public_template_name:(null==N?void 0:N.name)??""}),v().V()}}async function R(e,t){let o;const n=await m().callApi({eventName:"inAppGetTemplateByBlockId",environment:e,data:{blockId:t}});return"success"===n.type&&n.data.success&&n.data.template&&(o=n.data.template),o}function E(e){const{template:t,intl:o,environment:r,blockStores:a,toastProps:s={},isMobile:l=!1}=e;if(l)return _().N2(),void _().AC({blockToOpenStore:a[0],onOpenBlock:()=>{C().A.setState({...C().A.state,open:!1})},item:{label:o.formatMessage({id:"inApp.template.duplication.finished.toast.mobile.message",defaultMessage:"Template installation successful. You can now use it in your workspace."}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}}});y().HK({id:"template_duplication_toast",title:o.formatMessage({id:"inApp.template.duplication.finished.toast.title",defaultMessage:"Template is ready"}),message:t?o.formatMessage({id:"inApp.template.duplication.finished.toast.templateName.message",defaultMessage:"''{templateName}'' has been added to your workspace"},{templateName:t.name}):o.formatMessage({id:"inApp.template.duplication.finished.toast.message",defaultMessage:"This template has been added to your workspace"}),presentationType:"persistent",iconGroup:i().g,iconGroupColorName:"greenPrimary",iconGroupVariant:"default",actions:{primary:{title:o.formatMessage({id:"inApp.template.duplication.finished.toast.seeTemplate.button",defaultMessage:"See template"}),onAction:()=>{h().uK({environment:r,store:a[0],visitType:w().ig.Link,pageVisitSource:n().y8.Duplicate}),y().UW("template_duplication_toast"),A().A.state.isModalOpen&&I().SU({environment:r})}}},...s})}},34556:(e,t,o)=>{o.d(t,{x:()=>r});var n=()=>o(945895);function r(){n().A.setState({...n().A.state,isActive:!1})}},35622:(e,t,o)=>{o.d(t,{VN:()=>s,o9:()=>a,wX:()=>l});var n=()=>o(195613),r=()=>o(640867),i=()=>o(124952);function a(e){var t;const{environment:o,renderFullScreenNode:a,fullScreenNodeRect:s,contentAspectRatio:l,blockStore:c,imageUrl:d}=e;(0,i().d)(o,{type:"open"}),r().A.setState({...r().A.state,isOpen:!0,fullscreenNodeAnimationComplete:!1,renderFullScreenNode:a,startScrollTop:(null===(t=n().A.state.elementRef.current)||void 0===t?void 0:t.scrollTop)??0,fullScreenNodeRect:s,contentAspectRatio:l,blockStore:c,imageUrl:d})}function s(){r().A.setState({...r().A.state,isOpen:!1})}function l(e){return e<1020?0:32}},36088:(e,t,o)=>{o.d(t,{M:()=>i});var n=()=>o(908006),r=()=>o(725614);async function i(e){const{discussionInputStore:t}=e;await n().default.afterNextFlush(),r().setSelectionAtEnd({store:t.state.textStore})}},36375:(e,t,o)=>{o.d(t,{E:()=>r});var n=()=>o(989423);function r(e){(0,n().u4)({environment:e.environment,event:{eventName:"duplicate_block_duration",eventProperties:{time:e.time,success:e.success,user_action:e.user_action,is_duplication_local:e.is_duplication_local,duplication_size:e.duplication_size,is_await_post_submit_transaction:e.is_await_post_submit_transaction,is_skip_free_chart_post_submit_transaction:e.is_skip_free_chart_post_submit_transaction}}})}},36629:(e,t,o)=>{o.d(t,{XO:()=>j,h3:()=>U,nZ:()=>V,pG:()=>O});o(16280),o(944114),o(898992),o(823215),o(354520),o(803949),o(581454);var n=()=>o(66689),r=()=>o(716016),i=()=>o(970013),a=()=>o(617871),s=()=>o(857639),l=()=>o(388693),c=()=>o(792071),d=()=>o(179034),u=()=>o(332393),p=()=>o(96689),m=()=>o(854150),g=()=>o(496603),f=()=>o(534177),v=()=>o(313892),h=()=>o(254497),_=()=>o(312296),b=()=>o(519839),y=()=>o(601734),S=()=>o(989423),w=()=>o(972435),k=()=>o(395963),I=()=>o(351360),A=()=>o(53137),x=()=>o(630116),C=()=>o(908447),T=()=>o(449506),M=()=>o(84448),P=()=>o(235191),B=()=>o(27732),R=()=>o(686526),E=()=>o(803074),D=()=>o(896628),N=()=>o(317909);const L=(0,o(959013).YK)({aiCustomPromptDefaultPropertyName:{id:"collectionSettingsCreatePropertyActions.createProperty",defaultMessage:"Text"}});function F(e){const{environment:t,collectionContextStore:o,collectionUri:n,feature:r,transaction:i,addFeatureFrom:a,createFeatureStartTime:s}=e;if("dependencies"in r)for(const l of r.dependencies)"property"===l.type&&l.collectionUri===n&&(0,C().Z)({environment:t,collectionContextStore:o,from:"view_settings",property:l.uri,property_type:l.propertySchema.type,is_suggested_property:!0,feature:{id:l.uri,from:a,type:r.uri}});if("dependencies"in r&&r.dependencies.map((e=>e.type)).every((e=>"property"===e))){const e=o.collectionViewStore(),t=o.getPropertyFormatKey(),n=o.normalizedFormatStore.state;if(t&&e){const o=n[t]||[],a=[...o];r.dependencies.forEach((e=>{const t=o.findIndex((t=>t.property===e.uri));-1===t?a.push({visible:!0,property:e.uri}):a[t]={...o[t],visible:!0}})),D().zA({stores:[e],update:{[t]:a},transaction:i})}}if(void 0!==r.propertyIdCollectionSettingToNavigateTo){const e={type:"property",property:r.propertyIdCollectionSettingToNavigateTo,selectNameInitial:!1,formatKey:o.getPropertyFormatKey()};R().a2({collectionSettingsStore:o.settingsStore,item:e})}i.postSubmitCallbacks.push((e=>{S().vd(t,"collection_create_suggested_property_latency",{collection_uri:r.collectionUri,feature_uri:r.uri,time:Date.now()-s,status:Boolean(e)?"fail":"success"})}))}async function U(e){var t;const{appTemplatesSetupActions:o,appTemplatesSprintBoardActions:i,appConfigs:c}=await y().Aw.load(),{environment:g,collectionContextStore:f,feature:h,addFeatureFrom:_}=e,{currentSpaceViewStore:b}=I().default.state,S=f.collectionStore(),w=null==S?void 0:S.getParentBlockStore(),k={},C=e=>{(0,s().log)({level:"error",from:"collectionSettingsCreatePropertyActions",type:"handleCreateNewSuggestedProperty",data:{collectionId:null==S?void 0:S.id,miscDataToConvertToString:{featureUri:h.uri,addFeatureFrom:_,...k,...e}}})};if(!S||!w)return void C({hasCollectionStore:Boolean(S),hasCollectionViewBlockStore:Boolean(w)});if((0,v().u1)(h))return async function(e){const{environment:t,collectionContextStore:o,feature:r,addFeatureFrom:i}=e,{untypedFeaturesSetupActions:a}=await y().Aw.load(),s=o.collectionStore(),l=null==s?void 0:s.getParentBlockStore();if(!s||!l)return;const c=Date.now();N().createAndCommit({environment:t,userAction:"collectionSettingsCreatePropertyActions.handleCreateNewUntypedFeature",canUndo:!0,perform:e=>{a.applyUntypedFeature({environment:t,collectionStore:s,collectionViewBlockStore:l,feature:r,transaction:e}),F({environment:t,collectionContextStore:o,collectionUri:n().iH,feature:r,transaction:e,addFeatureFrom:i,createFeatureStartTime:c})}})}({environment:g,collectionContextStore:f,feature:h,addFeatureFrom:_});const P=f.collectionViewStore(),B=null==w?void 0:w.getParentStore(),R=null==S||null===(t=S.getFormat())||void 0===t?void 0:t.app_config_uri,L=R&&(0,v().lS)(c(),R);if(k.appConfigUri=L&&L.uri,!B||B.table!==p().NX&&B.table!==d().ev&&B.table!==m().yK||!L)return void C({hasAppParentStore:Boolean(B),appParentStoreTable:null==B?void 0:B.table,appConfigUri:L?L.uri:void 0});const U=S.getSchema(),O=w.getFormat().app_id;k.appId=O;const V=O?await T().callApi({eventName:"getCollectionViewBlocksByAppId",environment:g,data:{spaceId:w.getSpaceId(),appId:O}}):void 0,j="success"===(null==V?void 0:V.type)&&V.data.result.length?V.data.result.map((e=>x().Bv.createChildStore(B,{table:d().ev,id:e.blockId,spaceId:w.getSpaceId()}))):[w],z=h.integrationId;if(z){const e=A().A.getIntegrationsAsRecordMap().getValue({table:u().Li,id:z});if(!e||!(0,l().v_)(e))return void C({hasIntegration:Boolean(e)});await E().C4(g,S,e,Boolean(h.canOnlyAdminAuth))}z===a().ob&&U&&0===(0,r().yP)(U).length&&await M().c({environment:g,collectionStore:S});const q=Date.now();N().createAndCommit({environment:g,userAction:"collectionSettingsCreatePropertyActions.handleCreateNewSuggestedProperty",canUndo:!0,perform:e=>{var t;if(!b)return void C({hasCurrentSpaceViewStore:!1});const r=null===(t=S.getFormat())||void 0===t?void 0:t.app_config_uri;if(!r)return void C({hasCollectionUri:!1});const a=o.applyTypedFeatures({environment:g,spaceViewStore:b,appParentStore:B,appUri:L.uri,features:[{type:"simple",featureUri:h.uri}],transaction:e,createOrModify:"modify",appCollectionViewBlockStores:j});i.createSprintPage({environment:g,spaceViewStore:b,appParentStore:B,transaction:e,blockStores:a,creationEntryPoint:{type:"sprint_relation"}}),"notion://tasks/sub_task_feature"===h.uri&&D().zA({stores:[S],update:{subitem_property:n().yx.SubTaskRelation},transaction:e}),"notion://tasks/task_dependencies_feature"===h.uri&&(D().zA({stores:[S],update:{collection_default_arrows_by:n().yx.BlockingRelation},transaction:e}),P&&D().zA({stores:[P],update:{timeline_arrows_by:{property:n().yx.BlockingRelation}},transaction:e})),F({environment:g,collectionContextStore:f,collectionUri:r,feature:h,transaction:e,addFeatureFrom:_,createFeatureStartTime:q}),e.isEmpty()&&C({isEmptyTransaction:!0})}})}function O(e){let{propertyType:t,collectionContextStore:o,propertyId:n}=e;switch(t){case"ai_custom_prompt":case"ai_summary":case"ai_extract":case"ai_translate":return R().a2({collectionSettingsStore:o.settingsStore,item:{type:"propertyAiAutofill",propertySchema:o.normalizedSchemaStore[n],property:n}});case"ai_keywords":return R().a2({collectionSettingsStore:o.settingsStore,item:{type:"property",property:n,formatKey:o.getPropertyFormatKey()}});default:(0,f().HB)(t)}}function V(e){const{environment:t,collectionContextStore:o,propertyType:n,isSuggestedProperty:r,propertyName:a,selectOptions:s,from:l}=e,c=o.collectionStore(),d=o.collectionViewStore(),u=o.getPropertyFormatKey();if(!c)return;if("relation"===n)return void R().a2({collectionSettingsStore:o.settingsStore,item:{type:"selectRelationSource",property:void 0,formatKey:"collection_page_properties"}});let p=a;"ai_custom_prompt"===n&&(p=w().A.formatMessage(L.aiCustomPromptDefaultPropertyName));const{performResult:m}=N().createAndCommit({userAction:"collectionSettingsCreatePropertyActions.handleCreateNewStandardProperty",environment:t,canUndo:!0,perform:e=>P().IL({environment:t,collectionStore:c,collectionViewArgs:d&&u?{collectionViewStore:d,format:d.getFormat(),formatKey:u}:void 0,propertyName:p,propertyType:n,selectOptions:s,transaction:e})});(0,i().hN)(n)?O({propertyType:n,propertyId:m,collectionContextStore:o}):R().n1({collectionSettingsStore:o.settingsStore,property:m,formatKey:u,selectNameInitial:!0});const g="view_settings"===l?{feature:{id:m,from:"new_property",type:n}}:{};(0,C().Z)({environment:t,collectionContextStore:o,from:l,property_type:(0,i().v2)(n),property:(0,i().hN)(n)?n:void 0,is_suggested_property:r,...g})}async function j(e){const{environment:t,collectionContextStore:o,intl:n,connectedRelationProperty:s,from:l,untypedFeatureArgs:d,propertyGroupId:u,propertyLimit:p}=e,m=o.collectionStore(),v=o.collectionViewStore(),y=o.getPropertyFormatKey();if(!m||!y)return;const S=s.integration.id;(0,a().XO)(S)||await E().C4(t,m,s.integration,Boolean(s.canOnlyAdminAuth));const w=m.getSchema();let I;S===a().ob&&w&&0===(0,r().yP)(w).length&&(I=await M().c({environment:t,collectionStore:m})),N().createAndCommit({environment:t,userAction:"collectionSettingsCreatePropertyActions.handleCreateNewConnectedRelationProperty",canUndo:!0,perform:e=>{I&&P().IL({environment:t,collectionStore:m,collectionViewArgs:v?{collectionViewStore:v,format:v.getFormat(),formatKey:y}:void 0,propertyType:"auto_increment_id",transaction:e,propertyGroupId:u});const r=m.getDeletedSchema(),w=(0,f().WP)(r).map((e=>{let[t,o]=e;if(o&&i().UU(o)&&o.connectedRelation.integration_id===a().ob)return{propertyId:t,propertySchema:o}})).filter(f().O9);if(!g().Im(w)){const{propertyId:n}=w[0],i=(0,b().KA)({deletedSchema:r,property:n});if(!i)throw new Error("Deleted property schema was not found");u&&(0,k().En)({collectionStore:m,groupId:u,propertyId:n,transaction:e}),(0,_().F)({environment:t,collectionStore:m,update:i.updateSchema,transaction:e}),(0,h().E)({collectionStore:m,update:i.updateDeletedSchema,transaction:e});const a={type:"property",property:n,formatKey:y};return void R().a2({collectionSettingsStore:o.settingsStore,item:a})}const A=c().Bj6.fromIntegration(s.integration),x=E().qM({environment:t,pattern:s.pattern,integration:A,parentCollectionStore:m,transaction:e}),T=P().IL({environment:t,collectionStore:m,collectionViewArgs:v&&y?{collectionViewStore:v,format:v.getFormat(),formatKey:y}:void 0,propertyType:"relation",transaction:e,propertyId:null==d?void 0:d.propertyId});if(B().cT({environment:t,collectionContextStore:o,collectionStore:m,property:T,propertyName:s.name,propertyIcon:s.integration.info.icon,propertyLimit:p??"no_limit",targetCollectionStore:x,hasInverseRelation:!0,autoRelate:void 0,intl:n,connectedRelation:{integration_id:S},transaction:e}),!d){const e={type:"property",property:T,formatKey:y};R().a2({collectionSettingsStore:o.settingsStore,item:e})}(0,C().Z)({environment:t,collectionContextStore:o,from:"view_settings",property_type:"relation",integration_id:S,feature:{id:T,from:l,type:`notion://feature/connection_${S}`}})}})}},36760:(e,t,o)=>{o.d(t,{wd:()=>g,uM:()=>f,ON:()=>m,Nr:()=>p,HB:()=>u,A7:()=>v});o(898992),o(354520);const n=["slack","google_drive","github","jira","sharepoint"];var r=()=>o(534177),i=()=>o(291075),a=()=>o(973229),s=()=>o(430483),l=()=>o(756315),c=()=>o(99254),d=()=>o(174636);function u(e){return"completed"===e?"completed":"not_started"===e||"pending_selection"===e?"not_started":"in_progress"}function p(){return m().filter((e=>{if("slack"===e){return!(d().R.state.connectedApps||[]).includes("slack-admin")}return"google_drive"===e?"none"===l().d.state.initialSyncState||"not_started"===l().d.state.initialSyncState:"github"===e?"not_started"===i().o.state.status:"jira"===e?"not_started"===c().y.state.jiraSyncState:"sharepoint"!==e&&(0,r().HB)(e)}))}function m(){return n.filter((e=>"slack"===e?s().zD.canUseUniversalSlackSearchScope():"google_drive"===e?s().zD.canUseUniversalGoogleDriveSearchScope():"github"===e?s().zD.canUseUniversalGithubSearchScope():"jira"===e?s().zD.canUseUniversalJiraSearchScope():"sharepoint"!==e&&(0,r().HB)(e)))}function g(){return n.filter((e=>"slack"===e?s().zD.isConnectedToSlackUniversalQnA(d().R.state):"google_drive"===e?s().zD.isConnectedToGoogleDriveUniversalQnA(d().R.state):"github"===e?s().zD.isConnectedToGithubUniversalQnA(i().o.state):"jira"===e?s().zD.isConnectedToJiraUniversalQnA(c().y.state):"sharepoint"!==e&&(0,r().HB)(e)))}function f(){return g().filter((e=>"slack"===e?d().R.state.inProgress:"google_drive"===e?Boolean(l().d.state.ingestionProgress):"jira"===e?"in_progress"===c().y.state.jiraSyncState:"github"===e?"in_progress"===i().o.state.status:"sharepoint"!==e&&void(0,r().HB)(e)))}function v(e){return{slack:d().R,google_drive:l().d,jira:c().y,github:i().o,sharepoint:a().O}[e].state.isLoaded}},37250:(e,t,o)=>{o.d(t,{A6:()=>l,Jz:()=>c,WH:()=>s,ZP:()=>u,mR:()=>d});var n=()=>o(495989),r=()=>o(351360),i=()=>o(317909),a=()=>o(755199);function s(){const{currentUserSettingsStore:e}=r().default.state;if(!e||!e.isReady())return;const t=e.getSettings();return t?t.wiki_onboarding_phase??"unseen":void 0}function l(e){const t=s();if(void 0===t)return;const o=n().wZ.indexOf(t);if(-1!==o&&o<n().wZ.length-1){const{currentUserSettingsStore:t}=r().default.state;if(!t)return;i().createAndCommit({userAction:"wikiOnboardingActions.advanceOnboardingStep",environment:e,canUndo:!0,perform:e=>{a().mJ({userSettingsStore:t,transaction:e,data:{wiki_onboarding_phase:n().wZ[o+1]}})}})}}function c(e){const t=s();if(void 0===t)return;const o=n().wZ.indexOf(t);if(-1!==o&&o>1){const{currentUserSettingsStore:t}=r().default.state;if(!t)return;i().createAndCommit({userAction:"wikiOnboardingActions.previousOnboardingStep",environment:e,canUndo:!0,perform:e=>{a().mJ({userSettingsStore:t,transaction:e,data:{wiki_onboarding_phase:n().wZ[o-1]}})}})}}function d(e){const{currentUserSettingsStore:t}=r().default.state;t&&"unseen"===s()&&a().mJ({userSettingsStore:t,transaction:e,data:{wiki_onboarding_phase:"home"}})}function u(e){if("complete"===s())return;const{currentUserSettingsStore:t}=r().default.state;t&&i().createAndCommit({userAction:"wikiOnboardingActions.completeOnboarding",environment:e,canUndo:!0,perform:e=>{a().mJ({userSettingsStore:t,transaction:e,data:{wiki_onboarding_phase:"complete"}})},userId:t.id})}},37433:(e,t,o)=>{o.d(t,{$D:()=>F,A2:()=>z,AD:()=>E,FQ:()=>te,Gt:()=>G,Gx:()=>se,H1:()=>Q,JS:()=>re,L3:()=>K,Mk:()=>L,NA:()=>ne,PF:()=>$,S:()=>O,Sl:()=>de,TP:()=>ee,XE:()=>Y,XL:()=>D,Y7:()=>J,fm:()=>H,mN:()=>ue,nk:()=>R,p2:()=>V,qd:()=>U,sx:()=>q,tM:()=>j,vd:()=>oe,vm:()=>Z,yH:()=>B,zC:()=>ae,zI:()=>le});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454),o(908872);var n=()=>o(484714),r=()=>o(56366),i=()=>o(857639),a=()=>o(386164),s=()=>o(433847),l=()=>o(68263),c=()=>o(388821),d=()=>o(854150),u=()=>o(798880),p=()=>o(762433),m=()=>o(468006),g=()=>o(496603),f=()=>o(534177),v=()=>o(449506),h=()=>o(780054),_=()=>o(646736),b=()=>o(351360),y=()=>o(605402),S=()=>o(508496),w=()=>o(630116),k=()=>o(988499),I=()=>o(486130),A=()=>o(134217),x=()=>o(134206),C=()=>o(912979),T=()=>o(499446),M=()=>o(731320),P=()=>o(437622);function B(e){return!!R()&&(!!R("dev_only")||Boolean(null==e?void 0:e.getSettings().was_in_personal_home_default_treatment))}function R(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev_beta_and_ga";if(!(null===(e=b().default.state.currentSpaceStore)||void 0===e?void 0:e.canRead()))return!1;switch(t){case"dev_beta_and_ga":return!0;case"dev_only":return!1;default:(0,f().HB)(t)}}function E(){return S().default.checkGate({gateName:"sidebar_pages_hide_toggles"})}function D(){return h().A.isAdminMode}const N=g().Bj((()=>new(o(496506).default)((()=>{const{currentSpaceStore:e}=b().default.state;return!!e&&e.isTeamsEnabled()}),{debugName:"teamsEnabledStore"})));function L(){return N().state}async function F(e){const t=await v().callApi({eventName:"getTeams",environment:e.environment,data:{spaceId:e.spaceId,includeArchived:e.includeArchived,onlyJoined:e.onlyJoined},userId:e.currentUserId,headers:(0,a().WS)({cellId:void 0,recordId:void 0,spaceId:e.spaceId})});return"failed"===t.type?(i().rateLimitedLog({from:"teamsHelpers",level:"error",type:"getTeamsFailed"}),{teamIds:[],teamAggregateData:{},recordMap:{}}):t.data}async function U(e){const{fromCache:t,environment:o,spaceStore:n,includeArchived:r,currentUserId:i}=e;if(t&&!r){const e=k().A.state.teams.filter((e=>void 0===e.getArchivedBy())),t=e.length>0,o=void 0!==k().A.state.lastEmitData.value,r=k().A.state.lastEmitData.spaceId===n.id;if(t&&o&&r)return{teams:e,teamAggregateData:k().A.state.teamAggregateData}}const{teamIds:a,teamAggregateData:s}=await F({environment:o,spaceId:n.id,currentUserId:i,includeArchived:r,onlyJoined:!1});return{teams:a.map((e=>w().h4.createChildStore(n,{table:d().yK,id:e}))),teamAggregateData:s}}async function O(e){let{spaceStore:t,currentUserId:o,includeArchived:n,minRoleOnTeamStores:r,environment:i}=e;if(!t||!o)return[];const a=await v().callApi({eventName:"getAllTeamsInSpaceForAdmin",environment:i,data:{spaceId:t.id,includeArchived:n},userId:o});if("failed"===a.type)return[];const l=a.data.teamIds.map((e=>w().h4.createChildStore(t,{table:d().yK,id:e}))),u=[],p=[];for(const c of l){const e=c.getRole()??"none";(0,s().sG)(e,r)?p.push(c.id):u.push(c)}const m=c().RecordMap.create(a.data.recordMap);x().A.initialize({environment:i,userId:o,spaceId:t.id,teamIds:a.data.teamIds,getRecordWithRole:e=>({role:r,value:m.getValue(e)})});const g=p.map((e=>x().A.createTeamStoreFromCache({environment:i,teamId:e,spaceId:t.id,userId:o}))).filter(f().O9);return[...u,...g]}function V(e){return k().A.state.teams.filter((t=>t.isMemberOrGuest(e,new Set)))}function j(e){return!!e&&"private"===(0,m().MA)(e)}function z(e){return e&&(0,m().qu)(e)}function q(e){let{environment:t,spaceStore:o}=e;return!!o&&(!(0,P().IL)(o)&&((0,P().s7)(t)||!o.getDisableTeamCreation()))}function H(e){const t=(0,M().i0)(e).map((e=>e.permissionItem)),o=t.find(l().Lg),n=(null==o?void 0:o.role)??"none",r=(0,A().L)().reduce(((e,t)=>(e.add(t.userId),e)),new Set),i=t.filter((e=>!(!(0,l().B2)(e)||!r.has(e.user_id))||!!(0,l().Ds)(e))),a=function(e){if(0===e.length)return;return e.reduce(((e,t)=>(0,s().Y1)(t,e)?t:e),e[0])}(i.map((e=>e.role)))??"read_and_write";return{accessLevel:"none"===n?"private":"closed",spacePermissionRole:n,teamPermissionRole:(0,s().$q)(a,n),members:i.map((e=>{const{type:t}=e;return"user_permission"===t?{entity_type:"user",type:"member",user_id:e.user_id}:"group_permission"===t?{entity_type:"group",type:"member",group_id:e.group_id}:void(0,f().HB)(t)}))}}function W(e){let{environment:t,currentSpaceStore:o,billingData:n}=e;return!!o&&(!t.device.isMobile&&!o.isTeamsEnabled()&&!(0,p().et)(n)&&(0,P().p4)(o))}function K(e,t){const{currentSpaceStore:o}=b().default.state;return W({environment:e,currentSpaceStore:o,billingData:t})}function G(e){const t=(0,n().v3)();return(0,r().K8)((()=>{const{currentSpaceStore:o}=b().default.state;return W({environment:t,currentSpaceStore:o,billingData:e})}),[t,e])}function $(e){const t=e.id;if(t in k().A.state.teamAggregateData)return k().A.state.teamAggregateData[t]}function Y(e,t){return e.isDefault()?-1:t.isDefault()?1:0}const Q=["owner","member"],Z=["owner","member","team_level_guest"],X=(0,o(959013).YK)({ownerLabel:{id:"teamPermissionsMenu.ownerItem.label",defaultMessage:"Teamspace owner"},ownerCaption:{id:"teamPermissionsMenu.ownerItem.caption",defaultMessage:"Can edit teamspace settings and full access to teamspace pages."},memberLabel:{id:"teamPermissionsMenu.memberItem.label",defaultMessage:"Teamspace member"},memberCaption:{id:"teamPermissionsMenu.memberItem.caption",defaultMessage:"Cannot edit teamspace settings and can access teamspace pages."},guestLabel:{id:"teamPermissionsMenu.guestItem.label",defaultMessage:"Teamspace guest"},guestCaption:{id:"teamPermissionsMenu.guestItem.caption",defaultMessage:"Only has access to invited teamspaces."}}),J={owner:{label:X.ownerLabel,caption:X.ownerCaption},member:{label:X.memberLabel,caption:X.memberCaption},team_level_guest:{label:X.guestLabel,caption:X.guestCaption}};function ee(e){return`${h().A.domainBaseUrl}/team/${e}/join`}function te(e){var t;return!(null===(t=e.getSettings())||void 0===t||!t.disable_invite_link)}function oe(e){const t=[],o=[];for(const n of e)n.isDefined()&&(void 0===n.getArchivedBy()?o.push(n):t.push(n));return{archivedTeams:t,unarchivedTeams:o}}function ne(e){const t=(0,n().v3)(),{unarchivedTeams:o,isLoaded:i}=(0,r().K8)((()=>{const o=C().A.state;switch(o.loadingState){case"uninitialized":case"loading":return{unarchivedTeams:[],isLoaded:!1};case"loaded":return{unarchivedTeams:(0,T().Gd)({environment:t,teamIds:o.unarchivedTeamIds,spaceStore:e}),isLoaded:!0};default:(0,f().HB)(o)}}),[t,e]);return{unarchivedTeams:o,isLoaded:i}}function re(e){let{currentUserStore:t,currentSpaceStore:o,teamStore:n,members:r}=e;return g().oE(r.map((e=>{const{entity_type:o}=e;return"user"===o?function(e){let{currentUserStore:t,teamStore:o,member:n}=e;if(!t)return;const r=ie({teamStore:o,member:n}),i=w().LU.createChildStore(t,{table:u().oo,id:n.user_id});return{type:"user",memberInfo:n,permissionItem:{type:"user_permission",user_id:n.user_id,role:r},userStore:i}}({currentUserStore:t,teamStore:n,member:e}):"group"===o?function(e){var t;let{teamStore:o,member:n}=e;const r=null===(t=y().A.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===n.group_id)))||void 0===t?void 0:t.group;if(!r||!r.isAlive())return;const i=ie({teamStore:o,member:n});return{type:"group",memberInfo:n,permissionItem:{type:"group_permission",group_id:r.group_id,role:i},permissionGroup:r}}({teamStore:n,member:e}):void(0,f().HB)(o)})))}function ie(e){let{teamStore:t,member:o}=e;const n=t.getPermissionItems();if(!n)return"none";const r=function(e){let{permissions:t,member:o}=e;const n=null==t?void 0:t.find((e=>(0,l().Ds)(e)&&"group"===o.entity_type&&e.group_id===o.group_id||(0,l().B2)(e)&&"user"===o.entity_type&&o.user_id===e.user_id));return null==n?void 0:n.role}({permissions:n,member:o});return r||(0,m().ST)({id:t.id,permissions:t.getPermissionItems()})}function ae(e){const{environment:t,teamStore:o,spaceStore:n}=e,r=t.currentUser.id;if(void 0===r)return!1;const{ownerUserIds:i,ownerGroupIds:a}=o.getAllOwnerIds();return!(i.length>0&&a.length>0)&&(!!(0,_().dp)(n,r).isWorkspaceOwner()&&("private"!==o.getTeamAccessLevel()||("enterprise"===n.getSubscriptionTier()||Boolean(o.isNonGuestMember(r,I()._.getSpacePermissionGroupIds({userId:r,spaceId:n.id}))))))}function se(e,t){const{currentSpaceStore:o}=b().default.state;return o&&!o.isTeamsEnabled()&&(0,P().p4)(o)&&!(0,p().et)(t)}function le(){return k().A.state.teams.filter((e=>!e.isArchived())).length}function ce(e){const t=e.getTeamAccessLevel();return e.isDefault()&&!e.isArchived()&&"open"===t}function de(){return k().A.state.teams.filter(ce).length}function ue(e){const t=e.isArchived(),o=de(),n=e.getTeamAccessLevel();return t&&(o>0||"open"===n)}},38337:(e,t,o)=>{o.d(t,{$0P:()=>Mt,$_L:()=>Ee,A8d:()=>mo,Bbz:()=>Re,CCX:()=>R,CQ2:()=>Je,Cxn:()=>Se,CyB:()=>we,D3T:()=>oe,DJ9:()=>vt,DY5:()=>c,Dkd:()=>v,DxR:()=>Z,E4Q:()=>Ro,E4t:()=>jt,EOV:()=>Ct,EUI:()=>yo,Eo4:()=>Rt,Ex9:()=>Xt,FYj:()=>Pt,FZs:()=>Lt,G1r:()=>Ut,GIL:()=>ao,GSK:()=>Ie,GpG:()=>Lo,GtI:()=>D,H1c:()=>S,HA4:()=>lo,Hfz:()=>I,HlM:()=>ne,Hw6:()=>a,J5z:()=>Co,JRJ:()=>B,Jb:()=>le,Jmu:()=>Ae,Jnf:()=>to,Jv:()=>re,KVM:()=>bt,Kbf:()=>lt,KfS:()=>Wt,Kvs:()=>Xe,LF7:()=>xo,LcC:()=>Tt,LpV:()=>P,LvP:()=>w,MHX:()=>Ye,MUV:()=>y,MaD:()=>Oe,Mbm:()=>Dt,Mdy:()=>So,N11:()=>Yt,NER:()=>vo,NXe:()=>O,N_7:()=>N,OLz:()=>he,OO1:()=>wo,OUt:()=>d,OX4:()=>St,Of1:()=>je,OiJ:()=>n,P2l:()=>Bt,P7S:()=>Ce,Pji:()=>ze,PvQ:()=>pt,QHh:()=>C,Qm5:()=>_e,RYy:()=>f,Rag:()=>r,RrJ:()=>ge,Rsl:()=>m,S4C:()=>it,S6D:()=>pe,SDd:()=>oo,SdC:()=>et,Smt:()=>To,Tel:()=>eo,UMc:()=>po,Uaw:()=>wt,UqD:()=>ho,Uvd:()=>$,V4_:()=>q,VO:()=>X,VRj:()=>ee,Vac:()=>h,Vl:()=>A,WvK:()=>Et,X3W:()=>Pe,XGs:()=>g,Y0h:()=>K,YDC:()=>tt,YZL:()=>yt,ZEs:()=>H,ZLF:()=>Kt,Zf9:()=>Mo,_57:()=>st,_6K:()=>U,_En:()=>Ge,_OD:()=>Ot,_Oc:()=>Ke,_Qb:()=>Po,_qG:()=>se,_sW:()=>ue,a9W:()=>be,aIQ:()=>Y,bFE:()=>Q,bmm:()=>Do,bry:()=>ht,byw:()=>L,bzV:()=>at,c6k:()=>Ue,cZe:()=>b,d0I:()=>bo,d1T:()=>ie,dBr:()=>Ht,dn9:()=>no,e3e:()=>$e,e6S:()=>ut,e6W:()=>me,eGX:()=>Te,eL1:()=>At,f1O:()=>uo,fM9:()=>ft,fRh:()=>p,f_$:()=>Jt,fep:()=>_o,hKK:()=>V,hqd:()=>Ze,iDC:()=>u,iM5:()=>ce,jc0:()=>nt,jnS:()=>dt,jtA:()=>ve,k2l:()=>ye,kJD:()=>ot,kRA:()=>Fe,kXO:()=>_t,kYU:()=>ct,kel:()=>qt,kew:()=>Zt,kyo:()=>He,l0W:()=>Qe,l5X:()=>xe,lpW:()=>De,lyN:()=>Io,mJp:()=>k,mLD:()=>Ve,mVR:()=>J,myD:()=>xt,nGK:()=>fo,nKq:()=>T,ncb:()=>Ao,nfo:()=>de,oCP:()=>mt,oDg:()=>qe,ohG:()=>$t,ojI:()=>Le,okd:()=>Ft,pXT:()=>E,poM:()=>G,prN:()=>Bo,pz7:()=>ke,q5q:()=>kt,qGl:()=>i,qZ1:()=>Eo,rR7:()=>Be,rb2:()=>x,rgg:()=>ae,rkF:()=>te,rm:()=>W,sCR:()=>s,sbV:()=>l,sql:()=>z,st6:()=>Gt,sux:()=>so,tXX:()=>rt,uMd:()=>_,u_N:()=>It,ug9:()=>F,v4C:()=>io,voG:()=>j,w7$:()=>Me,wAf:()=>ro,wgf:()=>We,wgx:()=>ko,wx0:()=>Vt,xAE:()=>No,xeF:()=>Qt,yHP:()=>go,yWO:()=>zt,yle:()=>Nt,yuM:()=>gt,yw8:()=>fe,z$c:()=>co,zN1:()=>M,zqk:()=>Ne});const n="notion-cursor-default",r="hidden",i="notion-fadein",a="notion-mobile",s="notion-fadein-fast",l="notion-desktop-drag-area",c="notion-front-page",d="analytics-scroll-point",u="notion-login",p="notion-light-theme",m="notion-dark-theme",g="notion-scroller",f="vertical",v="horizontal",h="ignore-scrolling-container",_="notion-history-modal",b="notion-block-resizer",y="notion-overlay-container",S="notion-default-overlay-container",w="notion-page-template-modal",k="notion-modal-underlay",I="notion-peek-renderer",A="notion-text-action-menu",x="notion-selectable",C="notion-selectable-container",T="notion-selectable-halo",M="notion-selectable-hover-menu-item",P="notion-selectable-drag-handle",B="notion-suggest-remove",R="notion-focusable-within",E="notion-page-content",D="notion-frame",N="notion-topbar",L="notion-topbar-mobile",F="notion-topbar-more-button",U="notion-topbar-action-buttons",O="notion-share-menu",V="notion-share-menu-publish-tab",j="notion-topbar-share-menu",z="notion-updates-menu",q="notion-topbar-updates-button",H="notion-topbar-favorite-button",W="notion-topbar-comments-button",K="notion-search-menu",G="notion-embed-menu",$="notion-unfurling-menu",Y="notion-media-menu",Q="notion-invite",Z="notion-record-icon",X="notion-calendar-header-days",J="notion-board-group",ee="notion-block-permission-settings-workspace-access",te="notion-block-permission-settings-team-access",oe="notion-block-permission-settings-team-access",ne="notion-block-permission-settings-group-access",re="notion-page-view-discussion",ie="notion-discussion-input-edit-existing-comment",ae="notion-discussion-input",se="notion-discussion-reply-menu",le="notion-comment-overflow-menu",ce="notion-shimmer",de="notion-link",ue="ai-block",pe="peek-top-hover-area",me="peek-details-sidebar",ge="notion-menu-list-focused",fe="notion-sharing-permission-role-select",ve="notion-language-picker",he="notion-dictation-language-picker",_e="notion-cookie-selector",be="notion-activity-section-icon",ye="notion-activity-section-header",Se="notion-activity-section-time",we="notion-activity-section-children",ke="notion-sidebar",Ie="layout-content",Ae="notion-sidebar-mobile",xe="notion-open-sidebar",Ce="notion-close-sidebar",Te="notion-sidebar-switcher",Me="notion-space-settings",Pe="notion-outliner-bookmarks",Be="notion-outliner-workspace",Re="notion-outliner-shared",Ee="notion-outliner-private",De="notion-outliner-offline",Ne="notion-outliner-team",Le="notion-outliner-bookmarks-header",Fe="notion-outliner-workspace-header",Ue="notion-outliner-shared-header",Oe="notion-outliner-private-header",Ve="notion-outliner-offline-header",je="notion-outliner-team-header",ze="notion-outliner-joined-team-header",qe="notion-outliner-unjoined-team-header",He="notion-outliner-search-team-header",We="notion-outliner-public-page-template-includes-header",Ke="notion-outliner-team-context-menu-button",Ge="notion-outliner-team-context-menu",$e="notion-updates-menu",Ye="notion-sidebar-trash-menu",Qe="notion-password-modal",Ze="notion-scim-table-revoke-button",Xe="notion-subscription-checkout-title",Je="notion-subscription-post-upgrade-title",et="notion-subscription-checkout-description",tt="notion-update-sidebar",ot="notion-update-sidebar-tab-comments-filter-control",nt="notion-update-sidebar-tab-comments-filter-button-open",rt="notion-update-sidebar-tab-comments-filter-button-resolved",it="notion-update-sidebar-tab-comments-header",at="notion-update-sidebar-tab-comments-comments-scroller",st="notion-update-sidebar-tab-comments-discussion-item",lt="notion-update-sidebar-tab-updates-header",ct="notion-team-settings-modal",dt="notion-add-members-modal",ut="notion-new-team",pt="notion-use-case-onboarding-profile",mt="notion-use-case-onboarding-persona-survey",gt="notion-workspace-choose",ft="notion-workspace-plan-choose",vt="notion-workspace-collaborative-intent-choose",ht="notion-workspace-create",_t="notion-workspace-invite",bt="notion-onboarding-popup",yt="notion-onboarding-button",St="notion-onboarding-plan-type-team",wt="notion-onboarding-persona-survey-persona",kt="notion-onboarding-persona-survey-role",It="notion-onboarding-persona-survey-companysize",At="notion-onboarding-persona-survey-usecases",xt="notion-onboarding-timed-trial-upsell",Ct="notion-table-view",Tt="notion-table-view-add-column",Mt="notion-table-view-add-row",Pt="notion-table-view-header-row",Bt="notion-table-view-header-cell",Rt="notion-table-view-row",Et="notion-table-view-cell",Dt="notion-table-view-empty-placeholder",Nt="notion-table-view-drag-and-fill-handle",Lt="notion-table-view-frozen-column-repositioner",Ft="notion-board-view",Ut="notion-calendar-view",Ot="notion-list-view",Vt="notion-gallery-view",jt="notion-collection-item",zt="notion-calendar-view-day",qt="notion-collection-view-item-add",Ht="notion-timeline-view",Wt="notion-timeline-item",Kt="notion-timeline-item-row",Gt="notion-timeline-item-properties",$t="notion-collection-view-body",Yt="notion-view-settings-sidebar",Qt="notion-view-settings-popup-background",Zt="notion-layout-add-module-button",Xt="notion-collection-edit-view",Jt="notion-collection-view-tab-button",eo="notion-collection-add-view",to="notion-collection-automation-edit-view",oo="notion-template-picker-item",no="notion-template-picker-item-action-menu",ro="draggable-ghost-section",io="forms-properties-load-more",ao="forms-share-menu",so="notion-automation-builder-modal",lo="notion-modal-overlay-collection-view",co="notion-workflow-editor",uo="developer-integrations-container",po="developer-integration-not-found",mo="notion-table-row-selector",go="notion-table-column-selector",fo="notion-table-row",vo="notion-table-cell",ho="notion-table-cell-text",_o="notion-table-selection-overlay",bo="notion-table-tbody-selectable",yo="notion-table-content",So="notion-temporary-comment",wo="notion-margin-discussion-item",ko="notion-list-item-box-left",Io="notion-transclusion-block-component",Ao="notion-transclusion-block-halo",xo="search-query-result-item",Co="search-result-body-section-title",To="search-result-mobile-body-scroller",Mo="notion-completions-feedback-popup",Po="assistant-grouped-edit-chat-container",Bo="notion-help-button",Ro="notion-ai-button",Eo="notion-assistant-corner-origin-container",Do="altTextBlockButton",No="notion-floating-table-of-contents",Lo="popup-origin-wrapper"},38789:(e,t,o)=>{o.d(t,{A:()=>r});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);class n extends(()=>o(757695))().default{getInitialState(){return{}}getEditedBlocksForCollection(e){const t=this.state[e];if(t)return t;{const t=new Set;return this.state[e]=t,t}}setEditedBlock(e,t){this.getEditedBlocksForCollection(e).add(t),this.emit()}}const r=new n},40226:(e,t,o)=>{o.d(t,{R:()=>a,S:()=>i});o(814603),o(147566),o(198721);var n=()=>o(939768),r=()=>o(492414);function i(e){const{domainBaseLoginUrl:t,currentUrl:o,forceLandLastVisitedPage:r}=e,i=new URL(o);return r&&i.searchParams.set("target","sites_publish"),(0,n().Gm)({url:t,query:{redirectURL:i.toString()}})}function a(e){const{store:t,pageVisitSource:o,embedded:n}=e;return(0,r().Ay)({store:t,preferPublicLink:!0,pageVisitSource:o,disableSlug:n,embedded:n})}},40851:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{ready:!1,loading:!1}}}const r=n},40970:(e,t,o)=>{o.d(t,{DN:()=>u,Lt:()=>c,Y8:()=>l,aq:()=>a,be:()=>s,nQ:()=>r,tC:()=>i,uX:()=>d});var n=()=>o(989423);async function r(e){return n().vd(e,"notion_calendar_connect")}function i(e,t){n().vd(e,"click_open_in_calendar",t)}function a(e){n().vd(e,"calendar_rebrand_onboarding_modal_show")}function s(e,t){n().vd(e,"calendar_rebrand_onboarding_modal_click",t)}function l(e){n().vd(e,"calendar_rebrand_success_modal_show")}function c(e,t){n().vd(e,"calendar_rebrand_success_modal_click",t)}function d(e){n().vd(e,"click_calendar_sidebar_link")}function u(e){n().vd(e,"click_calendar_upsell_prompt_cta")}},41161:(e,t,o)=>{o.d(t,{A:()=>a});var n=()=>o(211716);const r=new class{constructor(){this.frecencyStore=void 0,this.spaceId=void 0,this.userId=void 0}get(e){const{currentSpaceStore:t}=o(351360).default.state,r=t&&t.id;return void 0===r||void 0===e?(this.userId=void 0,this.spaceId=void 0,void(this.frecencyStore=void 0)):(this.spaceId===r&&this.userId===e||(this.spaceId=r,this.userId=e,this.frecencyStore=new(n().Fv)({store:localStorage,prefix:`BlockFrecency:${e}:${r}`,maxBlocks:100,maxStoredVisits:10,version:n().HP}),this.frecencyStore.initialize()),this.frecencyStore)}};const i={lazyFrecencyStore:r,recordVisit:function(e){const{id:t,type:n,timestampForTestingOnly:i,currentUserId:a,systemBlockType:s}=e;if((0,o(90023).kR)(s))return;const l=r.get(a);return l?l.recordVisit({id:t,type:n,timestampForTestingOnly:i}):void 0},sortFrecencyHighToLow:function(e){const{currentUserId:t,items:o,now:n,recordFrecency:i}=e,a=r.get(t);return a?a.sortFrecencyHighToLow({items:o,now:n,recordFrecency:i}):o},getVisitedIds:function(e){const t=r.get(e);return t?t.getVisitedIds():[]},clearForUser:function(e){for(let t=0;t<localStorage.length;t++){const o=localStorage.key(t);o&&o.startsWith(`BlockFrecency:${e}`)&&localStorage.removeItem(o)}},getVisits:function(e,t){const o=r.get(e);if(o){const e=o.getVisits(t);return e?e.recentVisits:[]}return[]}};(0,o(604341).exposeDebugValue)("FrecencyStore",i);const a=i},42425:(e,t,o)=>{o.d(t,{Ay:()=>A,C1:()=>l,FC:()=>_,pU:()=>h});var n=o(296540),r=()=>o(799954),i=()=>o(792002),a=()=>o(155004),s=o(474848);let l=function(e){return e[e.Start=0]="Start",e[e.Center=1]="Center",e[e.End=2]="End",e}({});const{Start:c,Center:d,End:u}=l,p=n.forwardRef((function(e,t){return(0,s.jsxs)("div",{onClick:e.onClick,onMouseMove:e.onMouseMove,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown,style:y(e),ref:t,children:[e.left&&m(e),e.children&&(0,s.jsx)("div",{style:I(e),children:e.children}),e.right&&g(e)]})}));function m(e){return(0,s.jsx)(a().s,{...(0,i().Yl)("start"),allowSelectionWithin:!1,style:w(e),className:o(38337).wgx,children:e.left})}function g(e){return(0,s.jsx)(a().s,{...(0,i().Yl)("end"),allowSelectionWithin:!1,style:k(e),children:e.right})}const f=4,v=2,h=24,_={...r().nE,textAlign:"start"},b={[c]:"flex-start",[d]:"center",[u]:"flex-end"};function y(e){return{display:"flex",alignItems:o(720665).pN(e.alignment)?b[l.Start]:b[e.alignment],width:"100%",...e.style}}function S(e){return{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,minHeight:`calc(1.5em + ${r().nE.paddingTop}px + ${r().nE.paddingTop}px)`}}function w(e){return{marginRight:v,width:h,...S(),...e.leftStyle}}function k(e){return{marginLeft:f,...S(),...e.rightStyle}}function I(e){return{flexGrow:1,flexShrink:1,flexBasis:0,minWidth:1,...e.childrenStyle}}const A=p},42583:(e,t,o)=>{o.d(t,{D:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.537 8.843a.694.694 0 1 1-1.39 0 .694.694 0 0 1 1.39 0m-.695 3.009a.694.694 0 1 0 0-1.389.694.694 0 0 0 0 1.389m.695 1.62a.695.695 0 1 1-1.39 0 .695.695 0 0 1 1.39 0m1.62-3.935a.694.694 0 1 0 0-1.389.694.694 0 0 0 0 1.389m.695 1.621a.694.694 0 1 1-1.39 0 .694.694 0 0 1 1.39 0m-.695 3.009a.695.695 0 1 0 0-1.39.695.695 0 0 0 0 1.39m3.01-5.324a.694.694 0 1 1-1.39 0 .694.694 0 0 1 1.39 0m-7.639 3.009a.694.694 0 1 0 0-1.389.694.694 0 0 0 0 1.389m.694 1.62a.695.695 0 1 1-1.389 0 .695.695 0 0 1 1.39 0m6.249-1.62a.694.694 0 1 0 0-1.389.694.694 0 0 0 0 1.389"}),(0,n.jsx)("path",{d:"M5.25 3.125A2.125 2.125 0 0 0 3.125 5.25v9.5c0 1.174.951 2.125 2.125 2.125h9.5a2.125 2.125 0 0 0 2.125-2.125v-9.5a2.125 2.125 0 0 0-2.125-2.125zm-.875 3.69h11.25v7.935a.875.875 0 0 1-.875.875h-9.5a.875.875 0 0 1-.875-.875z"})]})},i=(0,o(340498).wt)("viewCalendar",r)},42772:(e,t,o)=>{o.d(t,{m:()=>i});var n=()=>o(498212),r=()=>o(875856);function i(){const e=r().default.state.user_id;return e?(0,n().ot)(e):void 0}},42803:(e,t,o)=>{function n(e){return void 0!==e.uiLocation.findAncestor((e=>{var t;return(null===(t=e.store.recordStoreOptions)||void 0===t||null===(t=t.inMemoryRecordCache)||void 0===t?void 0:t.isSyntheticAssistantData)??!1})).ancestor}o.d(t,{n:()=>n})},44729:(e,t,o)=>{o.d(t,{Br:()=>m,Hk:()=>c,NI:()=>u,Ti:()=>p,X$:()=>a,by:()=>l,s8:()=>s,zz:()=>d});o(16280);var n=()=>o(152565),r=()=>o(246826),i=()=>o(317909);function a(e){const{childStore:t,parentStore:o,transaction:n}=e,r=t.getRecordStoreAtRootPath(),a=r.getValue(),s=r.getAssociatedCollectionId();if(a){const{alive:e}=a;if(s!==o.id||!e){const e=o.getParentBlockStore();return e&&e.isCollectionViewPageWithContent()?(u({parentStore:e,childStore:t,transaction:n}),!0):(i().applyOperation({store:o,operation:{pointer:t.pointer,path:[],command:"setParent",args:{parentId:o.id,parentTable:o.table}},transaction:n}),!0)}}return!1}function s(e){const{blockStore:t,transaction:o}=e,r=t.getParentStore();if(r){(0,n().YE)(r.table,t.table)?d({parentStore:r,childStore:t,transaction:o}):l({childStore:t,transaction:o})}}function l(e){const{childStore:t,transaction:o}=e,n=t.getAssociatedCollectionStore();if(null!=n&&n.isPageTreeCollection()){const e=t.getParentBlockStore();e&&d({childStore:t,parentStore:e,transaction:o})}t.getRecordStoreAtRootPath().getAlive()&&r().zv({store:t,data:{alive:!1},transaction:o})}function c(e){const{pageStore:t,transaction:o}=e;t.getRecordStoreAtRootPath().getAlive()&&r().zv({store:t,data:{alive:!1},transaction:o})}function d(e){const{childStore:t,parentStore:o,transaction:r}=e,a=(0,n().YE)(o.table,t.table);if(!a)throw new Error(`Could not find child path for parent table ${o.table} and child table ${t.table}`);i().applyOperation({store:o,operation:{pointer:o.pointer,path:a,command:"removeChild",args:{id:t.id}},transaction:r})}function u(e){const{childStore:t,parentStore:o,transaction:r}=e,a=(0,n().YE)(o.table,t.table);if(!a)throw new Error(`Could not find child path for parent table ${o.table} and child table ${t.table}`);i().applyOperation({store:o,operation:{pointer:o.pointer,path:a,command:"insertChildrenAfter",args:{ids:[t.id],after:e.after}},transaction:r})}function p(e){const{childStore:t,parentStore:o,transaction:r}=e,a=(0,n().YE)(o.table,t.table);if(!a)throw new Error(`Could not find child path for parent table ${o.table} and child table ${t.table}`);i().applyOperation({store:o,operation:{pointer:o.pointer,path:a,command:"insertChildrenBefore",args:{ids:[t.id],before:e.before}},transaction:r})}function m(e){const{parentStore:t,oldChildStore:o,newChildStore:n,transaction:r}=e,i=o.id;(t.getValue()||[]).indexOf(i)>=0&&(u({parentStore:t,childStore:n,transaction:r,after:i}),d({parentStore:t,childStore:o,transaction:r}))}},45359:(e,t,o)=>{o.d(t,{VV:()=>d,WE:()=>m,cO:()=>f,eh:()=>g,fE:()=>u,hX:()=>p,jH:()=>v,vH:()=>c});o(898992),o(430670);var n=()=>o(436572),r=()=>o(666429),i=()=>o(250064),a=()=>o(972435);const s=(0,o(959013).YK)({leftTeam:{id:"teamPermissionsActions.leftTeam",defaultMessage:"Left {teamName}"},leftTeamNoName:{id:"teamPermissionsActions.leftTeamNoName",defaultMessage:"Left teamspace"},leftYetStillInTeam:{id:"teamPermissionsActions.leftYetStillInTeam",defaultMessage:"You are still in {hasTeamName, select, true {{teamName}} other {the teamspace}} because you are a member of the following groups: {groupsString}"},removedYetStillInTeam:{id:"teamPermissionsActions.removedYetStillInTeam",defaultMessage:"{hasMemberName, select, true {{memberName}} other {The removed user}} is still in {hasTeamName, select, true {{teamName}} other {the teamspace}} because they are a member of the following groups: {groupsString}"},joinedTeam:{id:"teamPermissionsActions.joinedTeam",defaultMessage:"Joined {teamName}"},joinedTeamUsingAdminPrivileges:{id:"teamPermissionsActions.joinedTeamUsingAdminPrivileges",defaultMessage:"Joined {teamName} using admin privileges"},upgradedSelfToOwner:{id:"teamPermissionsActions.upgradedSelfToOwnerUsingAdminPrivileges",defaultMessage:"Became owner of {teamName} using admin privileges"},archivedTeam:{id:"teamPermissionsActions.archivedTeam",defaultMessage:"Archived {teamName}"},restoredTeam:{id:"teamPermissionsActions.restoredTeam",defaultMessage:"Restored {teamName}"},restoredTeamNoName:{id:"teamPermissionsActions.restoredTeamNoName",defaultMessage:"Restored teamspace"},duplicatedTeam:{id:"teamPermissionsActions.duplicatedTeam",defaultMessage:"Duplicated {teamName}"},duplicatedTeamNoName:{id:"teamPermissionsActions.duplicatedTeamNoName",defaultMessage:"Duplicated teamspace"}});function l(e,t,o){const r=a().A.formatMessage(e,{...t});n().D6({label:r,durationMs:o})}function c(e){return l(s.upgradedSelfToOwner,{teamName:e})}function d(e){let{teamName:t,usingAdminPrivileges:o}=e;return l(o?s.joinedTeamUsingAdminPrivileges:s.joinedTeam,{teamName:t})}function u(e){return e?l(s.leftTeam,{teamName:e}):l(s.leftTeamNoName)}function p(e,t){const o=(0,i().l)(t.flatMap((e=>e.name||[])));l(s.leftYetStillInTeam,{hasTeamName:void 0!==e,teamName:e,groupsString:o},r().LX)}function m(e,t,o){const n=(0,i().l)(o.flatMap((e=>e.name||[])));l(s.removedYetStillInTeam,{hasMemberName:void 0!==e,hasTeamName:void 0!==t,memberName:e,teamName:t,groupsString:n},r().LX)}function g(e){return l(s.archivedTeam,{teamName:e})}function f(e){return e?l(s.restoredTeam,{teamName:e}):l(s.restoredTeamNoName)}function v(e){return e?l(s.duplicatedTeam,{teamName:e}):l(s.duplicatedTeamNoName)}},46220:(e,t,o)=>{o.d(t,{S:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowRightContained",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M11.673 13.387a.75.75 0 01-1.06-1.06l1.576-1.577H6a.75.75 0 010-1.5h6.19l-1.577-1.577a.75.75 0 111.06-1.06L14.53 9.47a.75.75 0 010 1.06l-2.857 2.857z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.25 3.5A2.75 2.75 0 001.5 6.25v7.5a2.75 2.75 0 002.75 2.75h11.5a2.75 2.75 0 002.75-2.75v-7.5a2.75 2.75 0 00-2.75-2.75H4.25zM3 6.25C3 5.56 3.56 5 4.25 5h11.5c.69 0 1.25.56 1.25 1.25v7.5c0 .69-.56 1.25-1.25 1.25H4.25C3.56 15 3 14.44 3 13.75v-7.5z",clipRule:"evenodd"})]})})},46986:(e,t,o)=>{o.d(t,{K:()=>i,s:()=>r});var n=()=>o(508496);function r(){return n().default.checkGate({gateName:"workflows_ui"})&&n().default.checkGate({gateName:"workflows"})}function i(){return n().default.checkGate({gateName:"workflows_debug_tools"})}},47373:(e,t,o)=>{o.d(t,{C4:()=>g,CH:()=>B,Ck:()=>T,DV:()=>D,Id:()=>x,J0:()=>I,MT:()=>v,Qd:()=>S,RL:()=>A,S5:()=>h,Us:()=>U,WC:()=>N,Wl:()=>y,YA:()=>f,YE:()=>M,Yz:()=>_,_J:()=>L,bW:()=>w,dC:()=>F,eE:()=>u,gU:()=>k,hg:()=>E,i3:()=>m,ml:()=>b,nJ:()=>p,rY:()=>C,s8:()=>P,x3:()=>d,yO:()=>R});o(898992),o(737550);var n=()=>o(662303),r=()=>o(848538),i=()=>o(508496),a=()=>o(630116),s=()=>o(134217),l=()=>o(10984),c=()=>o(437622);function d(){return s().dW()&&"on"===i().default.getEligibleGroup({experimentId:"request_membership",defaultGroup:"control"})}function u(e){return e.device.isMobile?"control":i().default.getEligibleGroup({experimentId:"onboarding_create_workflow_templates",defaultGroup:"control"})}function p(){return s().dW()&&!(0,l().OX)()}function m(e){let{environment:t,spaceStore:o,userRootStore:n}=e;const r=null==o?void 0:o.getPublicSpaceData();return!(!(o&&n&&r&&(0,c().IL)(o))||(0,l().OX)()||t.device.isMobile||!p()||r.disableGuestMembershipRequests||g({userRootStore:n}))}function g(e){let{userRootStore:t}=e;return t.getSpaceViewStores().some((e=>a().VF.createChildStore(e,r().i1({userId:t.id,spaceId:e.getSpaceId()})).isMember()))}function f(){return(0,l().El)()}function v(e){return(0,l().El)()&&"on"===i().default.getEligibleGroup({experimentId:"import_google_contacts",defaultGroup:"control",disableExposureLogging:e})}function h(){return"on"===i().default.getEligibleGroup({experimentId:"improve_onboarding_profile_step",defaultGroup:"control"})}function _(){return"on"===i().default.getEligibleGroup({experimentId:"remove_onboarding_invite_step",defaultGroup:"control"})}function b(){return"on"===i().default.getEligibleGroup({experimentId:"personal_student_usecase_preview",defaultGroup:"control"})}function y(){return i().default.getEligibleGroup({experimentId:"improve_desktop_workspace_create_step",defaultGroup:"control"})}function S(){return"on"===i().default.getEligibleGroup({experimentId:"teamspace_guests",defaultGroup:"control"})}function w(e){return!e.device.isMobile&&!(0,l().OX)()}function k(){return i().default.checkGate({gateName:"drawing_block"})}function I(){return"control"!==i().default.getEligibleGroup({experimentId:"extended_user_profiles",defaultGroup:"control"})}function A(){return"on"===i().default.getEligibleGroup({experimentId:"grant_access_via_mentions",defaultGroup:"control"})}function x(e){return!(!e.device.isMobileNative||e.device.isTablet)&&i().default.checkGate({gateName:"mobile_quick_capture_icons_redesign"})}function C(e){return!e.device.isMobile&&T()}function T(){return i().default.checkGate({gateName:"horizon_1_sidebar_panel_rollout"})}function M(){return i().default.checkGate({gateName:"enable_link_mention_hover"})}function P(){return!1}function B(){return i().default.checkGate({gateName:"new_bookmark"})}function R(){return i().default.checkGate({gateName:"new_hover_designs_lp"})}function E(e){return!e.device.isMobile&&i().default.checkGate({gateName:"persisted_secondary_sidebar_state"})}function D(e){const{environment:t}=e;return!t.device.isMobileNative||t.device.isTablet||"en-US"!==n().locale?"control":i().default.getEligibleGroup({experimentId:"mobile_onboarding_educational_refresh",defaultGroup:"control"})}function N(e){const{environment:t}=e;return!(!t.device.isMobileNative||t.device.isTablet)&&i().default.checkGate({gateName:"mobile_user_activation_template_gallery_refresh_gate"})}function L(){return i().default.checkGate({gateName:"unfurl_disable_store_verify"})}function F(){return i().default.checkGate({gateName:"gmail_action_redirect_improvements"})}function U(){return i().default.checkGate({gateName:"log_show_error_page"})}},48848:(e,t,o)=>{o.d(t,{DZ:()=>r,Ow:()=>i,sM:()=>a});var n=()=>o(416504);const r=(0,o(959013).YK)({whereToDuplicate:{id:"forkPageModal.title",defaultMessage:"Where would you like to add {blockTitle}?"},selectWorkspace:{id:"forkPageModal.selectWorkspace",defaultMessage:"Select a workspace"},untitledBlockRecordTitle:{defaultMessage:"Untitled",id:"forkPageActions.untitledBlockRecordTitle"},untitledSpaceRecordTitle:{defaultMessage:"Untitled",id:"forkPageActions.untitledSpaceRecordTitle"},loadingStateDisplayText:{defaultMessage:"Duplicating {blockTitle} to {spaceTitle}…",id:"forkPageActions.loadingStateDisplayText"}});function i(e,t){var o;const i=null==e||null===(o=e.getModel())||void 0===o?void 0:o.getRenderTitleWithPlaceholder({getRecordModel:e.getRecordModel,userTimeZone:(0,n().P)(),intl:t});return i||t.formatMessage(r.untitledBlockRecordTitle)}function a(e,t){var o;const n=null==e||null===(o=e.getModel())||void 0===o?void 0:o.getRenderTitleWithEmojiOrPlaceholder({intl:t});return n||t.formatMessage(r.untitledSpaceRecordTitle)}},49210:(e,t,o)=>{o.d(t,{b:()=>a,T:()=>s()});o(581454);var n=o(296540),r=()=>o(584931),i=o(474848);const a=n.memo((function(e){const{store:t=r().w}=e,a=(0,o(56366).K8)((()=>t.state.asyncModals),[t]);return(0,i.jsx)(i.Fragment,{children:a.map((e=>{const{id:t,internalRenderModal:o,isOpen:r}=e,a=o(r);return(0,i.jsx)(n.Fragment,{children:a},t)}))})}));var s=()=>o(342461)},49621:(e,t,o)=>{o.d(t,{h:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M5.95 8a.55.55 0 0 1 .55-.55h7a.55.55 0 0 1 0 1.1h-7A.55.55 0 0 1 5.95 8m.55 2.45a.55.55 0 0 0 0 1.1h5a.55.55 0 0 0 0-1.1z"}),(0,n.jsx)("path",{d:"M15.5 3.625c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-4.935l-3.871 2.978a.625.625 0 0 1-1.006-.496v-2.482H4.5a2.125 2.125 0 0 1-2.125-2.125v-7.5c0-1.174.951-2.125 2.125-2.125zm.875 2.125a.875.875 0 0 0-.875-.875h-11a.875.875 0 0 0-.875.875v7.5c0 .483.392.875.875.875h1.813c.345 0 .625.28.625.625v1.838l3.033-2.333a.63.63 0 0 1 .381-.13H15.5a.875.875 0 0 0 .875-.875z"})]})},i=(0,o(340498).wt)("commentFilled",r)},53137:(e,t,o)=>{o.d(t,{A:()=>s});o(898992),o(803949);var n=()=>o(496506),r=()=>o(388821);class i extends(()=>o(757695))().default{constructor(){super(...arguments),this.integrations=new(n().default)((()=>{const e=this.state;return e.loaded?e.integrations:[]}),{debugName:"ExternalIntegrationStore.integrations"}),this.bots=new(n().default)((()=>{const e=this.state;return e.loaded?e.bots:[]}),{debugName:"ExternalIntegrationStore.bots"}),this.externalAuthentications=new(n().default)((()=>{const e=this.state;return e.loaded?e.externalAuthentications:[]}),{debugName:"ExternalIntegrationStore.externalAuthentications"}),this.completeSlackAuthentications=new(n().default)((()=>{const e=this.state;return e.loaded?e.completeSlackAuthentications:[]}),{debugName:"ExternalIntegrationStore.completeSlackAuthentications"}),this.twoWaySyncExternalEntitiesStore=new(n().default)((()=>{const e=this.state;return e.loaded?e.twoWaySyncExternalEntities:[]}),{debugName:"ExternalIntegrationStore.twoWaySyncExternalEntities"})}getInitialState(){return{loaded:!1,loading:!1}}getIntegrationsAsRecordMap(){const e=r().RecordMap.create();return this.integrations.state.forEach((t=>e.setValue({table:o(332393).Li,id:t.id},t))),e}getBotsAsRecordMap(){const e=r().RecordMap.create();return this.bots.state.forEach((t=>e.setValue({table:o(824862).GP,id:t.id},t))),e}getExternalEntitiesAsRecordMap(){const e=r().RecordMap.create();this.twoWaySyncExternalEntitiesStore.state.forEach((t=>e.setModel({table:o(329251).$,id:t.id},t)))}}const a=new i;(0,o(604341).exposeDebugValue)("ExternalIntegrationStore",a);const s=a},53664:(e,t,o)=>{o.d(t,{A:()=>n});const n=function(e){return!(e.getParentTable()===o(519831).Vl)||e.isTemplate()}},54241:(e,t,o)=>{o.d(t,{l:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("drawingBlock",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M17.297 3.112a.852.852 0 011.233-.01c.314.325.306.852-.02 1.2l-8.5 9.118a1.1 1.1 0 01-.387.267l-.973.4-.106.02a.351.351 0 01-.343-.46l.326-.982c.05-.15.132-.29.24-.404l8.531-9.15z"}),(0,n.jsx)("path",{d:"M8.132 4.75c-.368 0-.73.086-1.059.25l-.658.33a.75.75 0 00.67 1.34l.659-.328a.868.868 0 01.388-.092h.09a.777.777 0 01.33 1.482L3.518 10.08A3.5 3.5 0 005 16.75h.08a3.58 3.58 0 002.53-1.048l.171-.172a.75.75 0 00-1.06-1.06l-.172.171c-.39.39-.918.609-1.47.609H5a2 2 0 01-.845-3.81l5.032-2.35a2.277 2.277 0 00-.963-4.34h-.091z"})]})})},54432:(e,t,o)=>{o.d(t,{A:()=>C});var n=o.n(o(32485)),r=o(296540),i=()=>o(484714),a=()=>o(792485),s=()=>o(56366),l=()=>o(401497),c=()=>o(584262),d=()=>o(799954),u=()=>o(500066),p=()=>o(983650),m=()=>o(931075),g=()=>o(959013),f=()=>o(246826),v=()=>o(317909),h=()=>o(492414),_=()=>o(731320),b=()=>o(962730),y=()=>o(735372),S=()=>o(496889),w=()=>o(614505),k=()=>o(859428),I=o(474848);const A={paddingTop:d().nE.paddingTop,paddingBottom:d().nE.paddingBottom,paddingLeft:d().nE.paddingLeft};function x(e,t){const{store:i,onClick:a}=e,d=(0,l().DP)(),u=(0,g().tz)(),[f,v]=(0,r.useState)(!1),_=(0,o(963589).X)("enable_deleted_page_indicator"),S=(0,s().K8)((()=>{const e=o(108944).ze(i);return _&&e}),[_,i]),w=(0,s().K8)((()=>i.inMemoryRecordCache.isTemporaryData),[i]),k=(0,s().K8)((()=>{const e=y().qu.state;if(!e)return!1;return(0,o(919709).q4_)(i.getTitleValue()).toLowerCase().includes(e.toLowerCase())}),[i]),x=(0,s().K8)((()=>{const e=y().wb.state;return!!e&&("block"===e.type&&e.id===i.id)}),[i.id]),C=(0,o(891078).i0)(i)&&!w,T=(0,s().K8)((()=>{var e;if(!(0,o(470928).Io)())return!1;const t=null===(e=o(351360).default.state.currentSpaceStore)||void 0===e?void 0:e.getModel();return t&&(0,m().Xi)(t)}),[]),M=(0,s().K8)((()=>{const e=i.getModel();return(0,m().sN)(e)}),[i]),B=(0,l().IS)((t=>({title:{fontWeight:o(284371).Wy.medium,lineHeight:1.3,borderBottom:e.disableUnderline?"none":`1px solid ${k?"transparent":t.darkDividerColor}`,...S&&{color:t.mediumTextColor}}})),[k,e.disableUnderline,S]),E=(0,r.useCallback)((()=>v(!0)),[]),D=(0,r.useCallback)((()=>v(!1)),[]),N=(0,s().K8)((()=>(0,h().J8)({store:i,fullyQualified:!1,pageVisitSource:c().y8.LinkInPage})),[i]),L=(0,s().K8)((()=>(0,h().J8)({store:e.store,openInSidePeek:!0,fullyQualified:!1,pageVisitSource:c().y8.PeekOpen})),[e.store]),F=(0,s().K8)((()=>o(712505).default.isSidePeekOpen()),[]);return(0,I.jsx)(o(296798).A,{ref:t,href:N,altHref:L,forceAltHref:F,external:!1,onClick:a,style:{borderRadius:4,...e.style},children:(0,I.jsx)(o(42425).Ay,{childrenStyle:A,alignment:b().C.Center,right:(0,I.jsx)(P,{aliasStore:e.aliasStore,disabled:e.disabled,store:e.store,hovered:f}),onMouseMove:E,onMouseLeave:D,children:(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,I.jsx)(R,{store:e.store,disabled:e.disabled,isAlias:e.isAlias,showDeletedPageIndicator:S}),(0,I.jsx)("span",{className:n()(x&&p().wT),style:{overflow:"auto",...k&&(0,p().G3)({theme:d,isSelectedMatch:x})},children:(0,I.jsx)(o(16006).A,{store:i,style:B.title})}),(0,I.jsx)(o(34698).A,{theme:d,intl:u,isPageInTrash:C}),T&&(0,I.jsx)(o(834344).w,{theme:d,isPageVerified:M})]})})})}const C=r.forwardRef(x);function T(e){let{isAlias:t}=e;return t?(0,I.jsx)("div",{children:(0,u().G)({position:"absolute",width:"50%",height:"50%",right:0,bottom:0})}):null}function M(e,t,o){const n=o&&o.publicEditModeStore.state;return!(0,_().QT)(n)&&(e.canEdit()&&!t)}function P(e){let{aliasStore:t,store:o,disabled:n,hovered:r}=e;const l=(0,a().S)(),c=(0,i().v3)(),{device:d}=c;return(0,s().K8)((()=>M(o,n,l)&&(r||d.isMobile)),[d.isMobile,n,r,l,o])?(0,I.jsx)(S().A,{store:t??o,tooltipContent:(0,I.jsx)(g().sA,{defaultMessage:"Rename, delete, and more…",id:"page.blockActionMenu.tooltip"}),style:{marginRight:4},fadeIn:!0}):null}function B(e){let{store:t,disabled:o}=e;const n=(0,a().S)(),r=(0,i().v3)(),l=(0,s().K8)((()=>t.getIcon()),[t]),c=(0,s().K8)((()=>t.getRole()),[t]),d=(0,s().K8)((()=>t.isEmptyPage()),[t]),u=(0,s().K8)((()=>t.getType()),[t]),p=(0,s().K8)((()=>M(t,o,n)),[o,n,t]);return(0,I.jsx)(k().A,{renderTooltip:()=>(0,I.jsx)(g().sA,{defaultMessage:"Change icon",id:"page.changeIcon.tooltip"}),placement:b().W.Top,disableTooltip:o||!p,render:e=>o||!p?(0,I.jsx)(w().A,{disabled:!0,icon:l,isEmptyPage:d,role:c,size:22,style:{width:"100%",height:"100%"},...e,largeIcon:!0}):(0,I.jsx)(w().A,{disabled:!1,bucket:"secure",store:t,icon:l,role:c,isEmptyPage:d,size:22,style:{width:"100%",height:"100%"},iconLoggingData:{recordTable:t.table,source:"subpage",block_type:u},onChange:e=>function(e,t,o){const n=t.getIconStore();n&&v().createAndCommit({userAction:"Page.handleRecordIconChange",environment:o,canUndo:!0,perform:t=>{f().KY({store:n,value:e,transaction:t})}})}(e,t,r),...e,largeIcon:!0})})}function R(e){let{showDeletedPageIndicator:t,store:o,disabled:n,isAlias:r}=e;const a=(0,l().DP)(),s=(0,i().v3)();if(t){const e=s.device.isSafari||s.device.isIOS;return(0,p().PO)({isSafariOrIOS:e,theme:a})}return(0,I.jsxs)("div",{style:{position:"relative",width:24,height:24,marginRight:4},children:[(0,I.jsx)(B,{store:o,disabled:n}),(0,I.jsx)(T,{isAlias:r})]})}},54821:(e,t,o)=>{o.d(t,{OZ:()=>c,QL:()=>d});o(581454);var n=()=>o(496603),r=()=>o(792071),i=()=>o(179034),a=()=>o(437607),s=()=>o(798880),l=()=>o(919709);function c(e){if(e.table===i().ev){const t=e.value;if(t)return r().Bj6.fromBlock(t).getCollectionPointer()}}function d(e){const t=l().RQ(e);return n().oE(t.map((e=>{const t=l().uPN(e),o=l().snh(t),n=l().Sev(t),r=l().SEY(t);if(o){const e=l().NcG(o);if(e)return{table:s().oo,id:e}}else if(n){const e=l().v55(n);if(e)return{table:i().ev,id:e}}else if(r){const e=l().FHi(r);if(e)return(0,a().bj)({spaceId:e.spaceId,spacePermissionGroupId:e.groupId})}})))}},56086:(e,t,o)=>{o.d(t,{A:()=>a});o(296540);var n=()=>o(56366),r=()=>o(634201),i=o(474848);const a=function(e){let{char:t,size:a,sprite:s,testId:l}=e;const c=(0,o(484714).v3)(),d=(0,n().K8)((()=>s||(0,o(712030).FN)(c)),[c,s]),u=(0,o(267419)._)(),p=r().qg.isCustomEmojiString(t),m=(0,n().K8)((()=>{if(p){const e=r().qg.fromCustomEmojiString(t).pointer;return(0,o(87878).nA)({parentStore:void 0,pointer:e})}}),[t,p]);return p?m?(0,i.jsx)(o(448664).A,{emojiStore:m,size:a??"1em",testId:l}):null:(0,i.jsx)(o(450125).A,{char:t,size:a,type:d,emojiData:u,testId:l})}},56125:(e,t,o)=>{o.d(t,{Lx:()=>u,d3:()=>p,En:()=>d});var n=()=>o(452540),r=(o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454),()=>o(99895)),i=()=>o(763824);async function a(e){const t=new Set,o=new(r().G)((()=>new Set));await s(0,e.keys.map((e=>({key:e,parentKey:void 0}))),e,t,o)}async function s(e,t,o,n,r){const a=[],c=[];if(await(0,i().lX)(t,100,(async t=>{const{key:i,parentKey:s}=t,d=o.loadIntoMap.get(i);d?await l(i,d,s,e,a,o,n,r):c.push(t)})),o.loadMultiFn){const t=await o.loadMultiFn(c.map((e=>{let{key:t}=e;return t})));await(0,i().lX)(c,100,(async i=>{let{key:s,parentKey:c}=i;const d=t.get(s);await l(s,d,c,e,a,o,n,r)}))}else await Promise.all(c.map((async t=>{let{key:i,parentKey:s}=t;const c=await o.loadFn(i);await l(i,c,s,e,a,o,n,r)})));a.length>0&&await s(e+1,a,o,n,r)}async function l(e,t,o,n,r,i,a,s){if(i.loadIntoMap.set(e,t),void 0===t)return;const l=(e,t)=>{if(!i.getRelatedPageForCollectionSubpage)return;const o=i.getRelatedPageForCollectionSubpage(e,t[1]);for(const n of o){const e=i.keyToString(n);a.has(e)||(a.add(e),r.push({key:n,parentKey:t[0]}))}};if(i.keyIsCollection&&i.keyIsCollection(e)){const o=s.get(i.keyToString(e));for(const e of o)l(t,e)}const c=await i.recurFn(t,e,o,n)??[];for(const d of c){const o=i.keyToString(d);if(i.keyIsCollection&&i.keyIsCollection(d)){const n=i.loadIntoMap.get(d);n?l(n,[e,t]):s.get(o).add([e,t])}a.has(o)||(a.add(o),r.push({key:d,parentKey:e}))}}var c=()=>o(519831);function d(e){return e.toRecordMap()}async function u(e){await a({keys:e.recordPointers,keyToString:n().jV,recurFn:async(t,o,n,r)=>await e.recurFn(t,n,r),getRelatedPageForCollectionSubpage:e.getRelatedPageForCollectionSubpage,keyIsCollection:e=>e.table===c().Vl,loadFn:e.loadRecordModel,loadMultiFn:async t=>{const o=await e.loadRecordModel(t);return{get:e=>o.getModel(e)}},loadIntoMap:{get:t=>e.recordMap.getModel(t),set(t,o){e.recordMap.setModel(t,o)}}})}async function p(e){const{loadRecordModels:t}=e;await a({keys:e.recordPointers,keyToString:n().jV,recurFn:(t,o,n,r)=>{if(t.model)return e.recurFn(t.model,t.role,n,r)},loadFn:e.loadRecordModel,loadMultiFn:t&&(async e=>{const o=await t(e);return{get(e){const t=o.getModel(e),n=o.getRole(e);if(n)return{model:t,role:n}}}}),loadIntoMap:{get(t){const o=e.recordMap.getModel(t),n=e.recordMap.getRole(t);if(n)return{model:o,role:n}},set(t,o){o&&e.recordMap.setModelAndRole(t,o.model,o.role)}}})}},56322:(e,t,o)=>{o.d(t,{A:()=>r});o(16280),o(944114),o(581454);var n=()=>o(763824);const r=class{constructor(e){this.performRequests=void 0,this.batchSize=void 0,this.maxWorkers=void 0,this.requestDelayMs=void 0,this.requestTimeoutMs=void 0,this.queue=[],this.currentWorkers=0,this.currentSetTimeouts=0,this.dequeue=async e=>{if(this.currentSetTimeouts=0,this.currentWorkers>=this.maxWorkers||0===this.queue.length)return;this.currentWorkers++;const t=this.queue.splice(0,this.batchSize),r=t.map((e=>e.request));let i,a;try{if(this.requestTimeoutMs){const e=await n().nQ(this.requestTimeoutMs,this.performRequests(r));if(e.timeout)throw new Error("Timed out.");i=e.result}else i=await this.performRequests(r)}catch(s){a=(0,o(319625).A)(s),e&&(a.stack+=`\n${e.stack}`)}try{if(a)for(let e=0;e<t.length;e++){t[e].deferred.reject(a)}else if(i)for(let e=0;e<t.length;e++){const o=t[e],n=i[e];o.deferred.resolve(n)}}catch(l){}this.currentWorkers--,this.queue.length>=this.batchSize?this.dequeue(e):this.dequeueAfterTimeout(e)};const{performRequests:t,batchSize:r,maxWorkers:i,requestDelayMs:a,requestTimeoutMs:s}=e;this.performRequests=t,this.batchSize=r,this.maxWorkers=i,this.requestDelayMs=a||0,this.requestTimeoutMs=s}getQueueSize(){return this.queue.length}updateBatchSize(e){this.batchSize=e}updateRequestDelayMs(e){this.requestDelayMs=e}getMaxWorkers(){return this.maxWorkers}updateMaxWorkers(e){this.maxWorkers=e,this.dequeueAfterTimeout()}enqueue(e){const t=n().yX();return this.queue.push({request:e,deferred:t}),this.dequeueAfterTimeout(),t.promise}dequeueAfterTimeout(e){this.currentSetTimeouts<this.maxWorkers&&(this.currentSetTimeouts++,setTimeout(this.dequeue,this.requestDelayMs))}}},57605:(e,t,o)=>{o.d(t,{A:()=>r});o(16280);const n=new(o(848776).U)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{let{spaceId:n}=t;if(n.includes("|"))throw new Error("Invalid spaceId, you're likely passing a spaceUserId instead");const r=await Promise.resolve().then(o.bind(o,449506)),i=await r.callApi({eventName:"getBillingData",environment:e,data:{spaceId:n},headers:(0,o(386164).WS)({cellId:void 0,spaceId:n})});if("success"!==i.type)return;if(!i.data.billingData)return;const a=(0,o(596513).J)(i.data.billingData);return"admin"===a.type?a:void 0}));o(604341).exposeDebugValue("BillingDataStore",n);const r=n},57618:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(672577);class n extends(()=>o(965828))().O{findBlockPropertyValue(e,t,o){return this.find((n=>n.props.store===e&&n.props.property===t&&(!o||n.props.format===o)))}findBlockPropertyValueByBlockId(e,t,o){return this.find((n=>n.props.store.id===e&&n.props.property===t&&(!o||n.props.format===o)))}getRect(e,t){const o=this.findBlockPropertyValue(e,t);if(o){const e=o.getNode();if(e&&e instanceof Element)return e.getBoundingClientRect()}}}const r=new n},58283:(e,t,o)=>{o.d(t,{LE:()=>m,wC:()=>a,on:()=>v,FT:()=>_});var n=o(296540),r=()=>o(484714),i=()=>o(401497);const a=(0,n.createContext)({constrainedSize:{minWidth:0,minHeight:0,maxWidth:void 0,maxHeight:void 0},actualSize:{width:0,height:0},isWidthScrollbarVisible:!1,isHeightScrollbarVisible:!1});a.displayName="ConstrainSizeContext";var s=()=>o(720665);var l=()=>o(530267),c=()=>o(664565),d=()=>o(821062),u=()=>o(828634);var p=o(474848);function m(e){const{children:t,isSizeTransitionAnimated:o,onSizeChanged:m}=e,g=(0,n.useMemo)((()=>(0,l().Ve)(e.areaConstraint)),[e.areaConstraint]),{preferredSize:f,ref:v}=function(e){const t=(0,n.useRef)(null),[o,r]=(0,n.useState)(),i=(0,u().wY)(t),a=e.width.min,s=e.width.max,l=e.height.min,c=e.height.max;return(0,n.useLayoutEffect)((()=>{const e=t.current;if(!e)return;const o=function(e){const{div:t,minWidth:o,maxWidth:n,minHeight:r,maxHeight:i}=e,a={minWidth:t.style.minWidth,maxWidth:t.style.maxWidth,minHeight:t.style.minHeight,maxHeight:t.style.maxHeight,width:t.style.width,height:t.style.height,overflow:t.style.overflow};t.style.width="fit-content",t.style.height="fit-content",t.style.overflow="hidden",t.style.minWidth=`${o}px`,t.style.maxWidth=`${n}px`,t.style.minHeight=`${r}px`,t.style.maxHeight=`${i}px`;const s={width:t.scrollWidth,height:t.scrollHeight};return t.style.width=a.width,t.style.height=a.height,t.style.overflow=a.overflow,t.style.minWidth=a.minWidth,t.style.maxWidth=a.maxWidth,t.style.minHeight=a.minHeight,t.style.maxHeight=a.maxHeight,s}({div:e,minWidth:a,maxWidth:s,minHeight:l,maxHeight:c});r((e=>(0,d().A)(e,o)?e:o))}),[i,a,s,l,c]),{ref:t,preferredSize:o}}(g),h=(0,n.useMemo)((()=>function(e){const{areaConstraint:t,preferredSize:o}=e;return{width:(0,s().qE)((null==o?void 0:o.width)??0,t.width.min,t.width.max),height:(0,s().qE)((null==o?void 0:o.height)??0,t.height.min,t.height.max)}}({areaConstraint:g,preferredSize:f})),[g,f]),_=function(e){const{actualSize:t,preferredSize:o,areaConstraint:n}=e,r="allow"===n.width.scroll,i="allow"===n.height.scroll,a=r&&void 0!==(null==o?void 0:o.width)&&t.width<o.width,s=i&&void 0!==(null==o?void 0:o.width)&&t.height<o.height,l={minWidth:n.width.min,maxWidth:r?void 0:n.width.max,minHeight:n.height.min,maxHeight:i?void 0:n.height.max};return{actualSize:t,constrainedSize:l,isWidthScrollbarVisible:a,isHeightScrollbarVisible:s}}({actualSize:h,preferredSize:f,areaConstraint:g}),b=function(e){const{actualSize:t,areaConstraint:o,isSizeTransitionAnimated:n}=e,a=(0,c().j)(100),{prefersReducedMotion:s}=(0,r().Y0)(),d=(0,l().bv)(o);return(0,i().IS)((()=>{const e="allow"===o.width.scroll,r="allow"===o.height.scroll;return{wrapper:{position:"relative"},content:{height:null==t?void 0:t.height,overflowX:e?"auto":"clip",overflowY:r?"auto":"clip",WebkitOverflowScrolling:"touch",width:null==t?void 0:t.width,transition:n&&a&&!s?"0.25s ease width, 0.25s ease height":void 0},measure:{display:"flex",flexDirection:"column",height:d.height?"fit-content":"100%",maxHeight:o.height.max,maxWidth:o.width.max,minHeight:o.height.min,minWidth:o.width.min,width:d.width?"fit-content":"100%"}}}),[t,o,n,a,s,d])}({actualSize:h,areaConstraint:g,isSizeTransitionAnimated:o});return(0,n.useEffect)((()=>{null==m||m(h,f)}),[h,m,f]),(0,p.jsx)(a.Provider,{value:_,children:(0,p.jsx)("div",{style:b.wrapper,children:(0,p.jsx)("div",{style:b.content,children:(0,p.jsx)("div",{ref:v,className:"measure",style:b.measure,children:t})})})})}var g=()=>o(56366),f=()=>o(661179);function v(){const e=(0,n.useContext)(a),t=(0,g().O$)(f().A);return null!=e&&e.isHeightScrollbarVisible?t:0}var h=()=>o(754735);function _(e){const{minimumOutsideSpacing:t}=e,o=(0,h().lW)();return(0,n.useMemo)((()=>{const e={type:"max",length:o.width-t.left-t.right},n={type:"max",length:o.height-t.top-t.bottom};return(0,l().Ve)({width:e,height:n})}),[t.bottom,t.left,t.right,t.top,o.height,o.width])}},59320:(e,t,o)=>{o.d(t,{G:()=>d});var n=()=>o(206267),r=()=>o(197959),i=()=>o(161479),a=()=>o(534177),s=()=>o(246826),l=()=>o(630116),c=()=>o(337090);function d(e){const{createDiscussionArgs:t,blockStore:o,environment:d,transaction:u,commentTextValue:p,files:m,discussionId:g}=e,f=(0,i().e)(o.pointer.spaceId);let v;"default"===t.type?(v=l().sk.createChildStore(o,{table:r().$Y,id:g,spaceId:f}),s().zv({store:v,data:{type:"default",parent_id:o.id,parent_table:o.table,resolved:!1,context:t.context,space_id:f,property_id:t.property_id},transaction:u})):"suggestion"===t.type?v=s().eC({environment:d,table:r().$Y,value:{id:g,type:"suggestion",parent_id:o.id,parent_table:o.table,resolved:!1,context:{rejected:!1,modifiedBlockIds:t.modifiedBlockIds,latestSessionId:n().JW(),snapshot:{data:t.snapshotTextValue?[{type:"textValue",value:t.snapshotTextValue}]:[]},splitFrom:t.splitFrom},space_id:f},inMemoryRecordCache:o.inMemoryRecordCache,transaction:u}):(0,a().HB)(t);return{discussionStore:v,commentStore:(0,c().G)({discussionStore:v,text:p,files:m,environment:d,transaction:u})}}},59326:(e,t,o)=>{function n(e,t){return t&&e.redirect_uris.includes(t)?t:t||1!==e.redirect_uris.length?void 0:e.redirect_uris[0]}o.d(t,{H:()=>n})},59728:(e,t,o)=>{o.d(t,{A:()=>n});const n=function(){const e=document.documentElement;return new(o(397248).z8)(0,0,e.clientWidth,e.clientHeight)}},59862:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(757695).default.createValue({open:!1},{name:"ContactSalesModalStore"})},60382:(e,t,o)=>{function n(e,t,o,n){return Math.sqrt((e-o)*(e-o)+(t-n)*(t-n))}o.d(t,{A:()=>n})},60676:(e,t,o)=>{o.d(t,{A:()=>k});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(799954),l=()=>o(959013),c=()=>o(324089),d=()=>o(317909),u=()=>o(744705),p=()=>o(494043),m=()=>o(468484),g=()=>o(11048),f=()=>o(704152),v=()=>o(378765),h=()=>o(99945),_=()=>o(42425),b=()=>o(697868),y=()=>o(702796),S=()=>o(176663),w=o(474848);function k(e){const t=(0,r().v3)(),o=(0,a().DP)(),k=(0,n.useRef)(!0);(0,n.useLayoutEffect)((()=>{k.current&&(k.current=!1,c().MB({blockId:e.store.id,currentUserId:t.currentUser.id}),c()._z(t,e.store))}));const I=(0,i().K8)((()=>e.store.getContentStore()),[e.store]),A=(0,i().K8)((()=>m().A.isOpen(e.store.id)&&!e.hideContent),[e.hideContent,e.store.id]),x=(0,i().K8)((()=>!e.store.hasContent()),[e.store]),C=(0,n.useId)(),T=(0,n.useId)(),M=(0,i().K8)((()=>u().X(e.store)||!e.store.isDefaultRecordCache()),[e.store]),P=(0,i().K8)((()=>e.store.getType()),[e.store]);(0,S()._)({loaded:M,blockType:P,isOpen:A});const B=(0,n.useCallback)((()=>{p().qj(t,e.store,e.hideContent)}),[t,e.hideContent,e.store]),R=(0,n.useCallback)((()=>{d().createAndCommit({userAction:"FormatToggleable.handlePlaceholderClick",environment:t,canUndo:!0,perform:o=>{c()._N({environment:t,store:e.store,transaction:o})}})}),[t,e.store]),E=(0,w.jsx)(f().A,{style:{fontSize:"inherit",width:"100%",borderRadius:4,caretColor:o.lightTextColor,...s().nE,marginTop:2},onClick:R,disabled:e.disabled,children:(0,w.jsx)("span",{style:{color:o.lightTextColor},children:(0,w.jsx)(l().sA,{defaultMessage:"Empty toggle. Click or drop blocks inside.",id:"toggleBlockFormat.emptyBlock.placeholderText"})})}),D=(0,w.jsx)(y().A,{"aria-describedby":C,"aria-controls":T,isSidebar:!1,open:A,fill:!x,onClick:B,tapArea:t.device.isMobile?{size:30}:void 0}),N=A?(0,w.jsx)(v().A,{id:T,loaded:M,spinnerSize:"relative",showSpinnerTimeout:500,innerStyle:(0,b().MG)(),style:(0,b().Cu)(),children:(0,w.jsx)(h().A,{store:I,emptyPlaceholder:E,disabled:e.disabled,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag})}):(0,w.jsx)(h().A,{store:I,disabled:e.disabled,disableContent:!0});return(0,w.jsx)(g().A,{name:"FormatToggleableHeader",children:(0,w.jsxs)(_().Ay,{style:{paddingLeft:s().nE.paddingLeft},left:D,leftStyle:{paddingRight:2,...e.toggleStyle},children:[(0,w.jsx)("div",{id:C,style:e.childrenStyleWhenToggleable,children:e.children}),N]})})}},60867:(e,t,o)=>{o.d(t,{B2:()=>ce,Bz:()=>ue,Ch:()=>me,Gr:()=>ne,HF:()=>fe,QK:()=>oe,RJ:()=>X,Uz:()=>ie,VI:()=>pe,VT:()=>he,fA:()=>de,jG:()=>re,un:()=>ve,vX:()=>ge,zM:()=>se,zt:()=>ae});o(16280),o(18107),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(967357),o(898992),o(354520),o(803949),o(581454),o(737550),o(296540);var n=()=>o(908006),r=()=>o(584262),i=()=>o(66689),a=()=>o(970013),s=()=>o(713998),l=()=>o(179034),c=()=>o(161479),d=()=>o(854150),u=()=>o(708830),p=()=>o(695631),m=()=>o(358547),g=()=>o(842989),f=()=>o(220719),v=()=>o(959013),h=()=>o(496603),_=()=>o(534177),b=()=>o(284371),y=()=>o(435345),S=()=>o(857783),w=()=>o(895876),k=()=>o(519839),I=()=>o(855801),A=()=>o(989423),x=()=>o(405417),C=()=>o(594794),T=()=>o(611191),M=()=>o(972435),P=()=>o(685889),B=()=>o(494043),R=()=>o(351360),E=()=>o(589994),D=()=>o(630116),N=()=>o(908447),L=()=>o(970330),F=()=>o(134060),U=()=>o(449506),O=()=>o(317001),V=()=>o(235191),j=()=>o(27732),z=()=>o(901389),q=()=>o(357625),H=()=>o(896628),W=()=>o(44729),K=()=>o(246826),G=()=>o(899453),$=()=>o(797265),Y=()=>o(778417),Q=()=>o(317909),Z=o(474848);function X(e){const{environment:t,transaction:o,blocks:n,action:r}=e,i=(0,k().UH)(n[0]);if(!i)return;const a=i.subitemTreeStore.state;if(!a)return;const s=i.currentSubitemFormatStoreForUiDisplayStore.state;if(!s||!s.property)return;const l=i.collectionViewBlockStore();if(!l)return;const c=new(u().PH)({store:l,pathKey:""},a.map((e=>e)).children),d=function(e,t){const o=new Set(e);let n,r;for(const i of m().Y_(t)){if(!o.has(i.value.store)){if(n)return;continue}const e=(0,u().Qe)([t],(e=>e===i));if(!e||e.length<2)return;if(n??=e,r=e,o.delete(i.value.store),0===o.size)break}if(n&&r)return g().W.fromNearestCommonAncestor(n,r)}(n,c);if(!d)return;const f=p().l.getIndentOperationsFromTreeRange(d,r),v=new Set,h=[],b="unindentSelf"===r?new Set(f.map((e=>e.target))):new Set;for(const m of f){const{target:e,operation:n}=m,r=(0,u().Qe)([c],(t=>t===e));if(void 0===r)return;const a=r[r.length-2];if("indentSelfAndSubtree"===n){if(v.has(a)){v.add(e),h.push(e.value.store);continue}const n=a.children,r=n.indexOf(e);if(0===r)return;const l=n[r-1].value.store;J({environment:t,parentStore:a.value.store,previousSiblingStore:l,targetStore:e.value.store,subitemFormat:s,transaction:o}),h.push(D().Bv.createChildStore(l,e.value.store.pointer)),oe({collectionContextStore:i,pathKey:(0,x().F9)(a.value.pathKey,l)})}else{if("unindentSelf"!==n)break;{var y;if(b.has(a)){b.delete(e),h.push(e.value.store);continue}if(1===r.length)return;const n=null===(y=r[r.length-3])||void 0===y?void 0:y.value.store;ee({environment:t,parentStore:a.value.store,grandparentStore:n,targetStore:e.value.store,subitemFormat:s,transaction:o}),h.push(D().Bv.createChildStore(n&&n.isPageBlock()?n:i.collectionViewBlockStore(),e.value.store.pointer))}}if(p().h.applyMutable(c,m))if("indentSelfAndSubtree"===n)v.add(e);else if("unindentSelf"===n){const t=i.subitemExpandedStore.state,o=a.value.pathKey,n=t.get(o);0===a.children.length&&null!=n&&n.isExpanded&&(t.delete(o),i.subitemExpandedStore.emit()),b.delete(e)}else(0,_().HB)(n)}h&&Y().td({environment:t,stores:h})}function J(e){const{environment:t,parentStore:o,previousSiblingStore:n,targetStore:r,subitemFormat:i,transaction:a}=e;o.isPageBlock()&&G().c3({environment:t,sourceStore:o,destStore:r,propertyWithInverse:i,transaction:a}),G().j$({environment:t,sourceStore:n,destStore:r,propertyWithInverse:i,transaction:a,position:{type:"after"}})}function ee(e){const{environment:t,parentStore:o,grandparentStore:n,targetStore:r,subitemFormat:i,transaction:a}=e;G().c3({environment:t,sourceStore:o,destStore:r,propertyWithInverse:i,transaction:a}),n&&n.isPageBlock()&&G().j$({environment:t,sourceStore:n,destStore:r,propertyWithInverse:i,position:{type:"after",after:o.id},transaction:a})}function te(e){var t,o;const{blocksToDuplicate:n,duplicatedBlocks:r,environment:i,transaction:s,migrateSubitemFormat:l,pageCollectionContextStore:c,originalSubitemSchemas:d}=e;if(n.length!==r.length)throw new Error("Error rebuilding relations. blocksToDuplicate and duplicatedBlocks must be the same length");const u=n.at(0);if(!u)return;const{from:p,to:m}=l||function(e){const t=(0,x().oC)(e);if(!t)throw new Error("Error rebuilding relations");const{subitemFormat:o}=t;return{from:o,to:o}}(u),g=(0,k().UH)(u)||c;if(!g)return;const f=(null===(t=g.collectionStore())||void 0===t?void 0:t.getSchema()[p.property])||(null==d?void 0:d.subitemRelationSchema),v=(null===(o=g.collectionStore())||void 0===o?void 0:o.getSchema()[p.inverse])||(null==d?void 0:d.parentRelationSchema);if(!(f&&v&&(0,a().nC)(f)&&(0,a().nC)(v)))return;const _=new Map(h().yU(n.map((e=>e.id)),r));h().yU(n,r).forEach((e=>{let[t,o]=e;const n=(0,x().rt)({store:t,subitemFormat:{property:p.property},propertySchema:f}),r=(0,x().eO)({store:t,subitemFormat:p,propertySchema:v});n.forEach((e=>{const t=D().Bv.createChildStore(o,e),n=_.get(e.id);n&&(G().c3({environment:i,sourceStore:o,destStore:t,propertyWithInverse:p,transaction:s}),G().j$({environment:i,sourceStore:o,destStore:n,propertyWithInverse:m,transaction:s,position:{type:"after"}}))})),r.forEach((e=>{const t=D().Bv.createChildStore(o,e);_.get(e.id)&&G().c3({environment:i,sourceStore:t,destStore:o,propertyWithInverse:p,transaction:s})}))}))}function oe(e){const{collectionContextStore:t,pathKey:o}=e,n=t.subitemExpandedStore.state,r=n.get(o);null!=r&&r.isExpanded||(n.set(o,{isExpanded:!0,limit:20}),t.subitemExpandedStore.emit())}async function ne(e){const{collectionContextStore:t,forceState:o}=e;let n=!0;const r=t.subitemTreeStore.state,i=new Set,a=new Set;if("open"===o||void 0===o)for(const c of r.children){const{store:e,pathKey:o}=c.value,r=(0,x().r6)(t);if(!r)return!1;const s=t.normalizedSchemaStore.state[r.property];if(!s||"relation"!==s.type)return!1;n=await(0,x().DH)({blockStore:e,subitemExpandedStore:t.subitemExpandedStore,subitemFormat:r,propertySchema:s,pathKey:o,forceStoresToLoad:!0,visitedIds:a,expandedIds:i,resultCache:new Map,regExpCache:new Map})}let s=r.children,l=0;if("closed"===o||0===i.size)for(;s.length>0;){const e=s.shift();if(!e)break;const{value:o,children:r}=e;if(s=[...s,...r],t.subitemExpandedStore.state.set(o.pathKey,{isExpanded:!1,limit:20}),l+=1,l>x().TK){n=!1;break}}return t.subitemExpandedStore.emit(),t.subitemTreeStore.emit(),t.subitemTreeStore.enqueueRecompute(),n}function re(e){const t=(0,k().UH)(e);if(!t)return;const o=t.subitemTreeStore.state,n=(0,u().Qe)(o.children,(t=>t.value.store===e));if(!n)return;const r=n.map((e=>e.value.store.pointer)),i=(0,x().kY)(r),a=t.subitemExpandedStore.state,s=a.get(i);s&&s.isExpanded&&(a.delete(i),t.subitemExpandedStore.emit())}function ie(e){var t;const o=(0,k().UH)(e);if(!o)return;const n=o.subitemTreeStore.state,r=(0,u().Qe)(n.children,(t=>t.value.store===e));if(!r)return;const i=o.currentSubitemFormatStoreForUiDisplayStore.state;if(!i)return;const a=null===(t=o.collectionStore())||void 0===t?void 0:t.getSchema()[i.property];if(!a||"relation"!==a.type)return;if(0===(0,x().rt)({store:e,subitemFormat:i,propertySchema:a}).length)return;const s=r.map((e=>e.value.store.pointer));oe({collectionContextStore:o,pathKey:(0,x().kY)(s)})}function ae(e){var t;const{collectionContextStore:o,relationPropertyId:n,transaction:r,environment:a}=e,s=o.collectionStore();if(!s)return;const l=n?s.getSchema()[n]:void 0,c="relation"===(null==l?void 0:l.type)&&l.property&&"relation"===(null===(t=s.getSchema()[l.property])||void 0===t?void 0:t.type)?l.property:void 0,d=s.getFormat().subitem_property&&n?"collectionViewSubitemActions.changeSubitemProperty":s.getFormat().subitem_property?"collectionViewSubitemActions.turnOffSubitems":"collectionViewSubitemActions.turnOnSubitems";H().zA({stores:[s],update:{subitem_property:n,...s.getFormat().app_config_uri===i().dC?{app_uri_map:{...s.getFormat().app_uri_map?s.getFormat().app_uri_map:{},[i().yx.SubTaskRelation]:n,[i().yx.ParentTaskRelation]:c}}:{}},transaction:r}),A().vd(a,"update_subitem_property",{userAction:d})}async function se(e){const{environment:t,blocks:o,options:n}=e;if(o.some((e=>!e.isPageBlock())))return{result:[],status:"success"};const r=o.at(0);if(!r)return{result:[],status:"success"};const i=e.collectionContextStore??(0,k().UH)(r);if(!i)return{result:[],status:"success"};const s=i.collectionStore();if(!s)return{result:[],status:"success"};const l=i.currentSubitemFormatStoreForCollectionStore.state;if(!l)return{result:[],status:"success"};const c=i.normalizedSchemaStore.state,d=l.property,u=c[d];if(void 0===d||void 0===u||!(0,a().nC)(u))return{result:[],status:"success"};if(!o.some((e=>(0,x().rt)({store:e,subitemFormat:l,propertySchema:u}).length>0)))return{result:[],status:"success"};await E().transactionQueue.drain();const p=s.id,m=s.getSpaceId(),g=await U().callApi({eventName:"getSubitems",environment:t,data:{collection:{id:p,spaceId:m},blocks:o.map((e=>({id:e.id,spaceId:m}))),childRelationProperty:d,canEdit:null==n?void 0:n.canEdit}});return"failed"===g.type?{result:[],status:"failed"}:{result:g.data.blocks.map((e=>D().Bv.createChildStore(s,{table:"block",...e}))),status:"success"}}function le(e){const t=e.at(0);if(void 0===t)return[];const o=(0,k().UH)(t);if(void 0===o)return[];const n=o.collectionStore(),r=o.collectionViewBlockStore();if(void 0===n||void 0===r)return[];const i=o.currentSubitemFormatStoreForCollectionStore.state;if(void 0===i)return[];const s=o.normalizedSchemaStore.state[i.property];if(void 0===s||!(0,a().nC)(s))return[];if(void 0===s.property)return[];const l=new Set(e.map((e=>e.id))),c=[];let d=e;for(;d.length>0;){const e=h().Bq(d.map((e=>(0,x().rt)({store:e,subitemFormat:i,propertySchema:s})))).filter((e=>!l.has(e.id))).map((e=>D().Bv.createChildStore(r,e)));for(const t of e)l.add(t.id);c.push(...e),d=e}return c}function ce(e){let{environment:t,blocks:o,recordMaps:n,analyticsFrom:r,transaction:i,migrateSubitemFormat:a,collectionContextStore:s,originalSubitemSchemas:u,duplicateActionsModule:p}=e;const m=o.at(0);if(!m)return[];const g=(e,o)=>{const r=n?n.get(e.id):p.loadLocalSubtree(t,{blockId:e.id,inMemoryRecordCache:e.inMemoryRecordCache,allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!0,allowCopyExternalObjectInstances:!0,skipBlockContent:!0,includeLegacyTransclusionBlockValues:null==o?void 0:o.includeLegacyTransclusionBlockValues}).recordMap;if(!r)throw new Error("Could not find cached copy of block during sub-item duplication.");return r};o.forEach((e=>{var o;const n=e.getModel();if(!n)return[];const{currentSpaceStore:i}=R().default.getState();let a;i&&n.getParentTable()===d().yK&&n.parent_id&&(a=D().h4.createChildStore(i,{table:d().yK,id:n.parent_id})),L().v(t,{from:r??"copy",type:n.type,teamStore:a,is_toggleable:(0,B().Yt)(n.type,n.getFormat()),collection_id:e.getAssociatedCollectionId()??(null===(o=e.getCollectionStore())||void 0===o?void 0:o.id),new_page_id:"page"===n.type?e.id:void 0,creating_block_id:e.id})}));const v=(0,T().$J)(),h=o.map((e=>{var o;const n=p.localDuplicate({environment:t,transaction:i,sourceBlockId:e.id,targetBlockPointer:(0,C().zP)({environment:t,table:l().ev,spaceId:(0,f().o9)(null===(o=s.collectionStore())||void 0===o?void 0:o.getSpaceId(),"Cannot find spaceId for collectionContextStore here")}),sourceBlockSubtree:g(e,{includeLegacyTransclusionBlockValues:v}),targetInMemoryRecordCache:e.inMemoryRecordCache,addCopyName:!1,deepCopyTransclusionContainers:!m.isTransclusionType(),resolveTemplateVariables:!(m.isInsideTemplate()||m.isInsideFactoryOrDuplicateBlocksAction()),preventLegacyTransclusions:v}).targetBlockStore;return K().zv({store:n,data:{content:[]},transaction:i}),n}));return te({blocksToDuplicate:o,duplicatedBlocks:h,environment:t,transaction:i,migrateSubitemFormat:a,pageCollectionContextStore:s,originalSubitemSchemas:u}),i.postSubmitCallbacks.push((async e=>{e||await Promise.all(o.map(((e,o)=>q().UT(t,y().w,{sourceBlocks:[{id:e.pointer.id,spaceId:(0,c().e)(e.pointer.spaceId)}],targetBlocks:[{id:h[o].pointer.id,spaceId:(0,c().e)(h[o].pointer.spaceId)}],addCopyName:!1,appendContentOnly:!0,isTemplateInstantiation:!0,resolveTemplateVariables:!1,deepCopyTransclusionContainers:!1,userAction:"collectionViewSubitemActions.localDuplicateBlocksWithSubitems"}).next().finally((()=>{})))))})),h}function de(e){let{blocks:t,transaction:o,from:n,to:r,environment:i,originAction:a}=e;return t.forEach((e=>{(0,x().pC)({store:e,subitemFormat:{property:n.property},originAction:a}).forEach((t=>{const n=D().Bv.createChildStore(e,t);G().j$({environment:i,sourceStore:e,destStore:n,propertyWithInverse:r,transaction:o,position:{type:"after"}})}))})),t}async function ue(e){let{droppedStores:t,createdStores:o,collectionStore:n,environment:r,collectionContextStore:i,groupsPointer:a,alreadyMovedToCollection:s,shouldDuplicate:l}=e;const c=t.at(0);if(!c)return;const d=(0,x().oC)(c);let u=(0,x().vd)(n);if(!d)return;const{result:p,status:m}=await se({environment:r,blocks:t,options:{canEdit:!0}});if("success"!==m)return;if(p.length<=0)return;let g=[...p];if(l){const e=await ve({environment:r,blocks:p,analyticsFrom:"subitem_option_drag_drop",collectionContextStore:i});e&&(g=[...e])}Q().createAndCommit({userAction:"collectionGroupActions.handleGroupDrop.subitemsDrop",environment:r,canUndo:!0,perform:e=>{if(!u){pe({transaction:e,collectionContextStore:i,environment:r})&&(u=(0,x().vd)(n))}for(const t of g)(0,O().j)({environment:r,store:t,collectionStore:n,collectionContextStore:i,groupsPointer:a,shouldCoerce:!0,transaction:e,alreadyMovedToCollection:s});u&&me({blocksToDuplicate:[...t,...p],duplicatedBlocks:[...o,...g],environment:r,shouldDuplicate:l,originSubitemFormat:d.subitemFormat,destinationSubitemFormat:u,transaction:e,subitemRelationSchema:d.childRelationSchema,relationPropertyCollectionId:n.id})}}),(0,F().t)(r,{draggedTypes:h().oE(g.map((e=>e.getType()))),from:"subitem_drag",asCopy:l,optionalAnalyticsProperties:{collectionContextStore:i}})}function pe(e){let{transaction:t,collectionContextStore:o,environment:n}=e;if(o.permissionScopesStore.state.isLocked||!o.permissionScopesStore.state.canEditContent)return;const r=o.collectionStore(),i=o.collectionViewStore();if(!r)return;const a=r.getModel();if(!a)return;const s=o.normalizedSchemaStore.state,l=P().$H(M().A.getIntl(),{targetCollectionStore:r,isSelfRelation:!0,sourceSchema:s,createUnique:!0,from:"subitem"}),c=P().zF(M().A.getIntl(),{sourceCollection:a,isSelfRelation:!0,targetCollectionStore:r,createUnique:!0,from:"subitem"}),d=V().IL({environment:n,collectionStore:r,collectionViewArgs:i?{collectionViewStore:i,format:i.getFormat(),formatKey:"collection_page_properties"}:void 0,propertyType:"relation",transaction:t});return j().cT({environment:n,collectionContextStore:o,collectionStore:r,property:d,propertyName:l,targetCollectionStore:r,hasInverseRelation:!0,inverseName:c,autoRelate:{enabled:!1},propertyLimit:"no_limit",intl:M().A.getIntl(),transaction:t,from:"subitem",analyticsFrom:"nested_subitem_operation",onlyCheckPermissions:!0}),ae({environment:n,collectionContextStore:o,relationPropertyId:d,transaction:t}),(0,N().Z)({environment:n,collectionContextStore:o,from:"nested_subitem_operation",property_type:"relation"}),d}function me(e){let{blocksToDuplicate:t,duplicatedBlocks:o,environment:n,shouldDuplicate:r,originSubitemFormat:i,destinationSubitemFormat:a,transaction:s,subitemRelationSchema:l,relationPropertyCollectionId:c}=e;r?te({blocksToDuplicate:t,duplicatedBlocks:o,environment:n,transaction:s,migrateSubitemFormat:{from:i,to:a}}):de({blocks:t,transaction:s,from:i,to:a,environment:n})}async function ge(e){var t;let{blocks:o,subitems:n,environment:r,canUndo:i,skipConfirmation:a}=e;const s=n||le(o),l=[...o,...s];$().rW(l);const c=o.at(0);if(!c)return!1;const d=(0,k().UH)(c)??(0,x().Ib)(c,r);let u=n;if(void 0===u){const{result:e,status:t}=await se({environment:r,blocks:o,options:{canEdit:!0},collectionContextStore:d});if("success"!==t)throw new Error("Failed to fetch subitems");u=e}const p=null==d||null===(t=d.collectionStore())||void 0===t?void 0:t.getFormat().app_config_uri,m=(0,w().$O)(p,!0),g=(0,w().oj)(p,!0);if(!a&&u.length>0){const e=await function(e){let{itemCount:t,subitemCount:o,newItemName:n,newItemNamePlural:r}=e;return new Promise((e=>{z().ui({onDismiss(){e(!1)},description:(0,Z.jsx)(v().sA,{id:"deleteSubitems.confirmation.description",defaultMessage:"This will also delete {subitemCount, plural, one {{subitemCount} sub-{newItemName}} other {{subitemCount} sub-{newItemNamePlural}}}.",values:{subitemCount:o,newItemName:n,newItemNamePlural:r}}),message:(0,Z.jsx)("div",{style:{fontWeight:b().Wy.semibold,fontSize:18},children:(0,Z.jsx)(v().sA,{id:"deleteSubitems.confirmation.message",defaultMessage:"Are you sure you want to delete {itemCount, plural, one {this {newItemName}} other {these {newItemNamePlural}}}?",values:{itemCount:t,newItemName:n,newItemNamePlural:r}})}),innerStyle:{textAlign:"center"},showCancel:!0,keepFocus:!0,items:[{label:(0,Z.jsx)(v().sA,{id:"deleteSubitems.confirmation.acceptLabel",defaultMessage:"Delete"}),color:"red",onAccept:()=>{e(!0)}}]})}))}({itemCount:o.length,subitemCount:u.length,newItemName:m,newItemNamePlural:g});if(!e)return $().q3(l),!1}const{serverCommitResult:f}=Q().createAndCommit({userAction:"collectionViewSubitemActions.removeBlocksWithSubitems",environment:r,canUndo:i,perform:e=>{$().ZL({environment:r,blocks:o,transaction:e});for(const t of u)K().zv({store:t,data:{alive:!1},transaction:e})}});return await f,!0}async function fe(e){const{environment:t,blocks:o,collectionContextStore:n,callback:i}=e,{result:a,status:s}=await se({environment:t,blocks:o,collectionContextStore:n,options:{canEdit:!0}});if("success"!==s)return;await Promise.all(a.map((e=>e.load())));const l=(0,x().n9)(n);if(!l)throw new Error("Could not find subitem info during duplication");const c=l.subitemFormat,d=await I().VI.duplicateActions.load(),{serverCommitResult:u}=Q().createAndCommit({userAction:"collectionViewSubitemActions.duplicateBlocksWithSubitemsFromPage",environment:t,canUndo:!0,perform:e=>{const i=ce({blocks:[...o,...a],environment:t,transaction:e,migrateSubitemFormat:{from:c,to:c},collectionContextStore:n,analyticsFrom:"subitem_duplication_page_menu",duplicateActionsModule:d}),s=n.collectionStore();if(!s)return;i.map((t=>{W().X$({childStore:t,parentStore:s,transaction:e})}));const l=i.at(0);l&&S().uK({environment:t,store:l,pageVisitSource:r().y8.Duplicate})}});u.then(i)}async function ve(e){var t;const{environment:o,blocks:r,analyticsFrom:i,callback:a,collectionContextStore:s}=e,l=r.at(0);if(!l)return;const c=(0,x().oC)(l),d=null===(t=(0,k().UH)(l))||void 0===t?void 0:t.collectionViewBlockStore();if(!c||!d)return;const u=[...r,...le(r)];if($().rW(u),!r.at(-1))return;const{result:p,status:m}=await se({environment:o,blocks:r,options:{canEdit:!0}});if("success"!==m)return;let g=[],f=[];const v=await I().VI.duplicateActions.load(),{serverCommitResult:h}=Q().createAndCommit({userAction:"actionRegistry.duplicateToSelectionWithSubitems",environment:o,canUndo:!0,perform:e=>{f=ce({blocks:[...r,...p],environment:o,transaction:e,analyticsFrom:i,duplicateActionsModule:v,collectionContextStore:s}),g=$().LE({environment:o,blocksToInsert:f,target:r,transaction:e,replaceEmptyTextBlock:!1,preventSetSelection:!0})}});h.then(a);const{parentRelationProperty:_,parentRelationSchema:b}=c,y=(0,x().BK)({blocks:g,parentRelationProperty:_,parentRelationSchema:b,collectionViewBlockStore:d});return n().default.afterNextFlush((()=>{n().default.afterNextFlush((()=>{Y().td({environment:o,stores:y})}))})),$().q3(u),f}function he(e){const{environment:t,blockStore:o,collectionStore:n,subitemFormat:r,transaction:i}=e,a=o.getPropertyValue(r.inverse);s().n(a).forEach((e=>{const a=D().Bv.createChildStore(n,e);G().c3({environment:t,sourceStore:o,destStore:a,propertyWithInverse:{property:r.inverse,inverse:r.property},transaction:i})}))}},62287:(e,t,o)=>{o.d(t,{pd:()=>k,Ff:()=>I});o(898992),o(581454),o(737550);var n=()=>o(700500),r=()=>o(68263),i=()=>o(179034),a=()=>o(919709),s=()=>o(496603),l=()=>o(494043),c=()=>o(65269),d=()=>o(611371),u=()=>o(899038),p=()=>o(722101),m=()=>o(579627),g=()=>o(863168),f=()=>o(246826),v=()=>o(324089),h=(o(354520),()=>o(969197)),_=()=>o(861841),b=()=>o(896628),y=()=>o(547392);function S(e,t){const{store:o,transaction:n,disableAutoChildrenMove:r}=e;return r||function(e){const{environment:t,store:o,transaction:n}=e,r=(0,h().T)(o),i=(null==r?void 0:r.getContentStores())||[];let a=!1;const s=i.filter((e=>{return a?(t=e.getType(),n=o.getType(),!(!t||!n||t===n||"divider"===t||"collection_view"===t||"sub_header"===n&&"header"===t||"sub_sub_header"===n&&("header"===t||"sub_header"===t))||(a=!1,!1)):(e===o&&(a=!0),!1);var t,n}));y().MS({environment:t,targetParentStore:o.getContentStore(),droppedDirection:_().bH.Below,droppedStores:s,duplicate:!1,transaction:n})}(e),b().zA({stores:[o],update:{toggleable:t},transaction:n})}var w=()=>o(317909);function k(e){const{environment:t,block:o,blockType:i,transaction:c,isMultiBlockTransformation:h}=e,_=o.getType(),b=o.getFormat(),y=o.recordStoreUIParentStore;if((0,d().EF)(t)&&_&&!function(e,t){const o=e.type,r=e.format;if(l().pL(t)){var i;return"mermaid_code_block"===t?e.type===n().xd.code&&"Mermaid"===a().q4_(null===(i=e.properties)||void 0===i?void 0:i.language):(0,n().D)(t)?l().i_(t)===e.type&&(0,n().v_)(o,r):l().i_(t)===e.type}return e.type===t&&!(0,n().v_)(o,r)}({type:_,format:b,properties:o.getProperties()},i)){const e=_,a=l().pL(i)?l().i_(i):i;if(f().zv({store:o,data:{type:a},transaction:c}),(0,n().D)(i)&&!l().PQ(o)?function(e){S(e,!0)}({environment:t,store:o,transaction:c,disableAutoChildrenMove:Boolean(h)}):!(0,n().D)(i)&&l().PQ(o)&&function(e){const{store:t}=e;t.recordStoreUIParentStore&&S(e,!1)}({environment:t,store:o,transaction:c,disableAutoChildrenMove:Boolean(h)}),"mermaid_code_block"===i&&u().IA({blocks:[o],language:"Mermaid",transaction:c}),n().BJ[e]&&!n().BJ[i]){o.getPermissionItems().some(r().T6)&&m().P8({environment:t,store:o,transaction:c})}l().BN(o)&&v().xT({blockId:o.id,state:!0,currentUserId:t.currentUser.id});const d=o.getType();d&&y&&_&&(0,n().IU)(_,b)&&!(0,n().IU)(d,o.getFormat())&&function(e){let{environment:t,block:o,parentStore:n}=e;const r=async()=>{const e=o.getContentStores();await Promise.all(e.map((e=>e.load()))),w().createAndCommit({userAction:"transformActions.runAsync",environment:t,canUndo:!0,perform:t=>{const r=s().o8(e).reverse();for(const e of r)p().TF({parentStore:o.getContentStore(),childToRemoveStore:e,transaction:t}),p().WH({parentStore:n,insertStore:e,afterStore:o,transaction:t})}})};r()}({environment:t,parentStore:y,block:o}),g().eY({environment:t,store:o,transaction:c})}return o}function I(e,t){const o=t.getFormat().alias_pointer;if(!o||o.table!==i().ev)return;const n=t.recordStoreUIParentStore;null!=n&&n.valueIs(c()._)&&w().createAndCommit({userAction:"transformActions.transformAliasBlockIntoPageMention",environment:e,canUndo:!0,perform:r=>{const i=(0,a().wmz)((0,a().ld4)(o.id,o.spaceId)),s=f().Wv({environment:e,type:"text",properties:{title:[i]},inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,transaction:r});p().WH({parentStore:n,insertStore:s,afterStore:t,transaction:r}),p().TF({parentStore:n,childToRemoveStore:t,transaction:r})}})}},62856:(e,t,o)=>{o.d(t,{A:()=>r});var n=o(296540);function r(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const[i,a]=(0,n.useState)(r),s=(0,n.useRef)(null),l=(0,n.useRef)(null);return(0,n.useLayoutEffect)((()=>{null!==l.current&&window.clearTimeout(l.current),null!==s.current&&window.clearTimeout(s.current),l.current=null,s.current=null,e?0===t?a(!0):s.current=window.setTimeout((()=>{s.current=null,a(!0)}),t):0===o?a(!1):l.current=window.setTimeout((()=>{l.current=null,a(!1)}),o)}),[e,t,o]),i}},66496:(e,t,o)=>{o.d(t,{A:()=>r});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);class n extends(()=>o(757695))().default{getInitialState(){return{pages:new Set}}setStatus(e,t){t?this.state.pages.add(e):this.state.pages.delete(e),this.emit()}}const r=new n},66788:(e,t,o)=>{o.d(t,{e0:()=>k,Nz:()=>A,Tm:()=>w,Xt:()=>I});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(701218),r=()=>o(777447),i=()=>o(179034),a=()=>o(197959),s=()=>o(161479),l=()=>o(919709),c=()=>o(220719),d=()=>o(496603),u=()=>o(543225),p=()=>o(588836),m=()=>o(413962),g=()=>o(780054),f=()=>o(518736),v=()=>o(494043),h=()=>o(630116),_=()=>o(989423);var b=()=>o(264879),y=()=>o(246826),S=()=>o(317909);function w(e){const{store:t,value:o,transaction:r,expectedVersion:a,onlyLogVersionMismatch:s}=e;(0,c().MX)(!f().SL(t),"setValueInTitleStore should not be used for updating the title of a CRDT block");const d=l().__s(o);S().applyOperation({transaction:r,store:t,operation:{pointer:t.pointer,path:t.path,command:"set",args:t.table===i().ev?(0,n().hA)(d):d,expectedVersion:a,onlyLogVersionMismatch:s}}),k(e)}function k(e){const{environment:t,store:o}=e;if(!o.isTable("block"))return;if(o.inMemoryRecordCache.isTemporaryData)return;const n=o.getRecordStoreAtRootPath();if(!n.inMemoryRecordCache.isMockTextStore){const e=n.getValue();var r;if(e)!function(e,t){_().WU(e,"edit_block_text_60","edit_block_text_60",60,t)}(t,{block_id:e.id,type:e.type,is_toggleable:(0,v().Yt)(e.type,e.format),parent_collection_id:n.getAssociatedCollectionId()??(null===(r=n.getParentBlockStore())||void 0===r?void 0:r.getAssociatedCollectionId())})}}function I(e){const{environment:t,oldTextValue:o,newTextValue:n,transaction:r,rootStore:i,removeInlineRecords:a}=e;if(i instanceof h().Bv){const e=new Set(d().FF(l().j2Y(o),...l().j2Y(n)));if((0,p().u)({blockStore:i,discussionIds:Array.from(e),transaction:r}),i.isType("table_row")){const t=i.getParentBlockStore();t&&(0,p().u)({blockStore:t,discussionIds:Array.from(e),transaction:r})}const a=new Set(d().FF(l().j2Y(n),...l().j2Y(o)));if(x({blockStore:i,discussionIds:a,transaction:r,environment:t}),i.isType("table_row")){x({blockStore:i.getParentBlockStore(),discussionIds:a,transaction:r,environment:t})}}a&&A(e)}function A(e){const{store:t,environment:o,oldTextValue:n,newTextValue:a,transaction:c,rootStore:u}=e;if(u instanceof h().Bv){const e=u.getValue();if(e){const i=(0,r().GS)({parentBlock:e,oldTextValue:n,newTextValue:a,getRecordValue:t.getRecordValue,baseUrl:g().A.domainBaseUrl,publicDomainName:g().A.publicDomainName});b()._I({environment:o,transaction:c,parentStore:u,inlinePageIds:i})}}const p=d().FF(l().jvm(n),...l().jvm(a));for(const r of p){const e=h().Bv.createChildStore(u,{table:i().ev,id:r,spaceId:(0,s().e)(u.pointer.spaceId)});y().zv({store:e,data:{alive:!1},transaction:c})}}function x(e){const{blockStore:t,discussionIds:o,transaction:n,environment:r}=e;if(t)for(const i of o){(0,u().B)({transaction:n,blockStore:t,discussionId:i});const e=h().sk.createChildStore(t,{table:a().$Y,id:i,spaceId:(0,s().e)(t.pointer.spaceId)});e.isSuggestionDiscussion()&&m().c3({environment:r,transaction:n,discussionStore:e,addModifiedBlockIdsAfter:[t.id]})}}},66913:(e,t,o)=>{o.d(t,{V:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("closeSmall",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.732 11.052c-.303.308-.32.877.011 1.202.33.33.894.32 1.203.011L8 9.21l3.05 3.05c.32.325.872.32 1.197-.011a.857.857 0 00.01-1.197L9.21 8.002l3.05-3.056a.857.857 0 00-.01-1.197.857.857 0 00-1.198-.01L8 6.788 4.946 3.732c-.31-.303-.878-.32-1.203.01-.325.331-.314.895-.01 1.203l3.055 3.056-3.056 3.05z"})})},67103:(e,t,o)=>{o.d(t,{Gl:()=>L,hJ:()=>F,nQ:()=>U});o(296540);var n=()=>o(66689),r=()=>o(700500),i=()=>o(206267),a=()=>o(792071),s=()=>o(68263),l=()=>o(179034),c=()=>o(519831),d=()=>o(869558),u=()=>o(919709),p=()=>o(116225),m=()=>o(931075),g=()=>o(498212),f=()=>o(183558),v=()=>o(409902),h=()=>o(104012),_=()=>o(989423),b=()=>o(186445),y=()=>o(682146),S=()=>o(594794),w=()=>o(972435),k=()=>o(347199),I=()=>o(953418),A=()=>o(508496),x=()=>o(630116),C=()=>o(666429),T=()=>o(901389),M=()=>o(246826),P=()=>o(436572),B=()=>o(606952),R=()=>o(317909),E=()=>o(62287),D=()=>o(37250),N=o(474848);const L=(0,o(959013).YK)({home:{id:"wikiActions.collectionView.home",defaultMessage:"Home"},allPages:{id:"wikiActions.collectionView.allPages",defaultMessage:"All pages"},pagesIOwn:{id:"wikiActions.collectionView.pagesIOwn",defaultMessage:"Pages I own"},pagePropertyName:{id:"wikiActions.collectionView.pagePropertyName",defaultMessage:"Page"},ownerPropertyName:{id:"wikiActions.collectionView.ownerPropertyName",defaultMessage:"Owner"},tagsPropertyName:{id:"wikiActions.collectionView.tagsPropertyName",defaultMessage:"Tags"},tagsDesignValue:{id:"wikiActions.collectionView.tagsDesignValue",defaultMessage:"Design"},tagsOnboardingValue:{id:"wikiActions.collectionView.tagsOnboardingValue",defaultMessage:"Onboarding"},verificationPropertyName:{id:"wikiActions.collectionView.verificationPropertyName",defaultMessage:"Verification"},undoToast:{id:"wikiActions.convertToWiki.undo.toastMessage",defaultMessage:"Turned {pageName} into a wiki"}});function F(e){const{blocks:t,transaction:o,environment:s,source:p}=e,v=i().JW(),T=t[0];if(!T||!T.isPageBlock())return;const B=T.getSpaceId(),E=(0,S().Z1)({environment:s,table:c().Vl,spaceId:B}),F=T.getFormat().page_icon,O=(0,f().Ay)(),V=m()._e.Owner,j=m()._e.Verification,z=(0,f().Ay)(),q={title:{name:w().A.formatMessage(L.pagePropertyName),type:"title"},[V]:{name:w().A.formatMessage(L.ownerPropertyName),type:"person",default:"created_by"},[z]:{name:w().A.formatMessage(L.tagsPropertyName),type:"multi_select",options:[{id:i().JW(),value:w().A.formatMessage(L.tagsOnboardingValue),color:"blue"},{id:i().JW(),value:w().A.formatMessage(L.tagsDesignValue),color:"green"}]},[O]:{name:y().dC.last_edited_time,type:"last_edited_time",date_format:"relative"}},H=[{visible:!0,property:"title",width:300},{visible:!0,property:V,width:150},{visible:!0,property:j,width:150},{visible:!0,property:z,width:150},{visible:!0,property:O,width:250}];q[j]={name:w().A.formatMessage(L.verificationPropertyName),type:"verification",verifier_property:V};const W={table:c().Vl,id:E,spaceId:B},{operations:K}=a().WBy.create({id:E,space_id:B,parent:{table:l().ev,id:T.id,spaceId:B},name:T.getTitleValue(),schema:q,cover:T.getFormat().page_cover,format:{collection_mode:{type:"page_tree",root_page_pointer:{table:l().ev,id:T.id,spaceId:B}},app_config_uri:n().pW,property_visibility:[{property:O,visibility:"hide"},{property:z,visibility:"show"},{property:V,visibility:"show"},{property:j,visibility:"show"}],collection_page_properties:H,collection_cover_position:T.getFormat().page_cover_position},icon:F});for(const n of K)R().applyOperation({store:(0,x().Oo)(T,W),operation:n,transaction:o});M().Bn({store:(0,x().Oo)(T,W),source:{id:T.id,table:l().ev,spaceId:T.getSpaceId()},fileIds:T.getFileIds(),transaction:o});const G=(0,S().Z1)({environment:s,table:d().Gy,spaceId:B}),$=(0,S().Z1)({environment:s,table:d().Gy,spaceId:B}),Y=(0,S().Z1)({environment:s,table:d().Gy,spaceId:B});M().zv({store:T,data:{type:r().xd.collectionViewPage,collection_id:E,view_ids:[G,$,Y]},transaction:o}),M().zv({store:T.getFormatStore(),data:{collection_pointer:W,app_config_uri:n().pO,app_uri_map:{[n().pW]:E},app_id:v},transaction:o});const Q={table:d().Gy,id:G,spaceId:B};R().applyOperation({store:(0,x().Oo)(T,Q),operation:{pointer:Q,command:"set",path:[],args:{id:G,version:0,type:"page",name:w().A.formatMessage(L.home),parent_id:T.id,parent_table:"block",space_id:B,format:{page_pointer:{id:(0,g().G2)(T.id),spaceId:B,table:"block"}},alive:!0}},transaction:o});const Z={table:d().Gy,id:$,spaceId:B};R().applyOperation({store:(0,x().Oo)(T,Z),operation:{pointer:Z,command:"set",path:[],args:{id:$,version:0,type:"table",name:w().A.formatMessage(L.allPages),parent_id:T.id,parent_table:"block",space_id:B,format:{table_properties:H},query2:{sort:[{property:O,direction:"descending"}]},alive:!0}},transaction:o});const X={table:d().Gy,id:Y,spaceId:B};R().applyOperation({store:(0,x().Oo)(T,X),operation:{pointer:X,command:"set",path:[],args:{id:Y,version:0,type:"table",name:w().A.formatMessage(L.pagesIOwn),parent_id:T.id,parent_table:"block",space_id:B,format:{table_properties:H,property_filters:[{id:i().JW(),filter:{filter:{value:{type:"relative",value:"me"},operator:"person_contains"},property:V}}]},query2:{sort:[{property:O,direction:"descending"}]},alive:!0}},transaction:o});const J=k().A.PageScroller;J&&I().VG({element:J.getNode(),environment:s,options:{top:0,behavior:"smooth"}}),D().mR(o),function(e,t){_().vd(e,"wiki_convert",t),A().default.logEvent("wiki_convert",void 0,t)}(s,{source:p,root_page_id:T.id,collection_id:E}),function(e){const{environment:t,blocks:o}=e,n=o[0];if(!n||!n.isCollectionViewPageWithContent())return;const r=(0,u().q4_)(n.getTitleValue());C().Ay.setState({...C().Ay.state,shouldReset:!1});const i=(0,b().s0)()===n.id;P().D6({label:w().A.formatMessage(L.undoToast,{pageName:r}),durationMs:C().LX,right:(0,N.jsx)(h().MZ,{blockToOpenStore:i?void 0:n,performUndo:()=>{R().createAndCommit({userAction:"wikiActions.wikiConversionToast.undo",environment:t,canUndo:!0,perform:e=>{P().N2(),U({environment:t,blocks:o,transaction:e,source:"snackbar"})}})}})})}({environment:s,blocks:t})}function U(e){var t;const{environment:o,blocks:n,transaction:i,source:a}=e,l=n[0];if(!l||!l.isCollectionView())return void T().c1("Something went wrong");const c=l.getFormat().collection_pointer;if(!c)return void T().c1("Something went wrong");const d=x().md.createChildStore(l,c),u=null===(t=l.getCover())||void 0===t?void 0:t.cover,m=d.getFormat().collection_cover_position,g=d.getName();E().pd({environment:o,block:l,blockType:r().xd.page,transaction:i}),M().zv({store:l.getFormatStore(),data:{app_config_uri:null,app_uri_map:null,app_id:null,page_cover:u??null,page_cover_position:m??null},transaction:i}),B().KY({environment:o,store:l.getBlockTitleStore(),value:g,transaction:i});for(const r of l.getPermissionItems())if(s().hI(r)&&"content_only_editor"===r.role&&!s().P3(r)){const e={...r,role:"read_and_write"};R().applyOperation({store:l.getPermissionItemsStore(),operation:{pointer:l.pointer,command:"setPermissionItem",path:l.getPermissionItemsStore().path,args:e},transaction:i})}(0,v().h)({collectionViewBlockStore:l,collectionStore:d,transaction:i}),function(e,t){_().vd(e,"wiki_undo_conversion",t),A().default.logEvent("wiki_undo_conversion",void 0,t),p().u4({name:"wiki_undo_conversion",args:t})}(o,{source:a,root_page_id:l.id,collection_id:c.id})}},68465:(e,t,o)=>{o.d(t,{am:()=>y,KW:()=>b,QV:()=>T,ZE:()=>A,gB:()=>S,eR:()=>w,I_:()=>k,t1:()=>P,N9:()=>B,ge:()=>C,O0:()=>x,jq:()=>M,cJ:()=>R,lQ:()=>E});const n="5ee0e0b5-7f0a-4788-a438-f37644514636";var r=()=>o(80586),i=()=>o(985608),a=()=>o(647440),s=()=>o(727706),l=()=>o(654601),c=()=>o(100622),d=()=>o(496603),u=()=>o(578872),p=()=>o(351360),m=()=>o(430483),g=()=>o(508496),f=()=>o(411671),v=()=>o(836251),h=()=>o(437622);const _=(0,o(959013).YK)({helpMeWrite:{defaultMessage:"Ask AI to write...",id:"id.completions.helpMeWrite"},helpMeWritePlaceholder:{defaultMessage:'What would you like to write about?\nFor example, "5 reasons why we should hire a dedicated designer"',id:"id.completions.helpMeWritePlaceholder"},helpMeDraftPlaceholder:{defaultMessage:'What would you like to write about?\nFor example, "article about the benefits of learning a new language"',id:"id.completions.helpMeDraftPlaceholder"},summarize:{defaultMessage:"Summarize",id:"id.completions.summarize"},findActionItems:{defaultMessage:"Find action items",id:"id.completions.findActionItems"},summarizeMeetingTranscript:{id:"id.completions.summarizeMeetingTranscript",defaultMessage:"Summarize meeting"}}),b={key:"helpMeWrite",category:"writeWithAI",name:_.helpMeWrite,svg:l().X,svgFill:c().XA.light.purple[400],requiresContent:!0,steps:[{key:"prompt",name:_.helpMeWritePlaceholder,placeholder:_.helpMeWritePlaceholder,type:"text"}]},y={key:"helpMeDraft",category:"draftWithAI",name:_.helpMeWrite,svg:l().X,svgFill:c().XA.light.purple[400],requiresNoContent:!0,steps:[{key:"prompt",name:_.helpMeDraftPlaceholder,placeholder:_.helpMeDraftPlaceholder,type:"text"}]};function S(e){const{customPrompt:t,isPageEmpty:o}=e;return{key:o?"helpMeDraft":"helpMeWrite",category:"writeWithAI",name:_.helpMeWrite,svg:i()._,svgFill:c().XA.light.purple[400],steps:[{key:"prompt",name:_.helpMeWritePlaceholder,placeholder:_.helpMeWritePlaceholder,type:"text",prefilledValue:t}]}}function w(){return[{key:"summarize",category:"extractFromContent",name:_.summarize,svg:s().G,svgFill:c().XA.light.purple[400]},{key:"findActionItems",category:"extractFromContent",name:_.findActionItems,svg:a().G,svgFill:c().XA.light.purple[400]},b]}function k(){return d().pY(w(),"key")}function I(){const e=p().default.state.currentSpaceStore;return!!e&&e.isAiEnabledOnSpace()}function A(e){if(g().default.checkGate({gateName:"disable_ai_big_red_button"}))return!1;if(g().default.checkGate({gateName:"enable_public_qna_sites"})){var t;const o=p().default.state.mainEditorCurrentBlockStore&&(null===(t=(0,u().GN)(p().default.state.mainEditorCurrentBlockStore))||void 0===t||null===(t=t.getSiteStore())||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.enableQna);if(null!=e&&e.hasPublicPermission&&!(0,v().ok)()&&o)return!0}const o=p().default.state.currentSpaceStore;if((0,h().IL)(o))return!1;const n=null==o?void 0:o.canRead();return!(e&&e.hasPublicPermission&&!n)&&I()}function x(e){return I()}function C(e,t){return A(e)&&t.canEdit()}function T(){return A(void 0)&&g().default.checkGate({gateName:"enable_ai_suggested_properties"})}function M(e,t,o){return A(t)&&o.canEditCollection()}function P(e){return new(r().C)({isInitialized:!0,getEligibleGroup:e=>g().default.getEligibleGroup({experimentId:e}),isAiEnabled:()=>{const t=p().default.state.mainEditorCurrentBlockStore;return A(t&&f().A.getMode(e,t))},isZeroRetentionEnabled:()=>{const e=p().default.state.currentSpaceStore;return!!e&&e.getZeroRetentionEnabled()},getCanSearchWorkspaceWithCollectionIdFilter:()=>{var e;return!(null===(e=p().default.state.currentSpaceStore)||void 0===e||null===(e=e.getSettings())||void 0===e||!e.embedding_index_is_live)||(g().default.checkGate({gateName:"enable_limited_qna"}),!1)},getIsAssistantSpaceSettingEnabled:()=>{var e;return(null===(e=p().default.state.currentSpaceStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.is_assistant_experience_enabled)??!1},getSearchBackend:()=>{var e;return null!==(e=p().default.state.currentSpaceStore)&&void 0!==e&&null!==(e=e.getSettings())&&void 0!==e&&e.embedding_index_is_live?"vector":g().default.checkGate({gateName:"enable_limited_qna"})?"limited_qna":void 0},checkGate:e=>g().default.checkGate({gateName:e}),getSubscriptionTier:()=>{var e;return null===(e=p().default.state.currentSpaceStore)||void 0===e?void 0:e.getSubscriptionTier()}})}function B(e){m().zD.getIsInitialized()||m().zD.setState(P(e))}function R(){var e;return(null===(e=p().default.state.currentSpaceStore)||void 0===e?void 0:e.id)===n}function E(){return!1}},71268:(e,t,o)=>{o.d(t,{A0:()=>m,Lv:()=>k,PG:()=>w,QU:()=>g,TC:()=>S,ZS:()=>h,df:()=>A,eQ:()=>f,nX:()=>_,uy:()=>x,xL:()=>v});o(898992),o(354520),o(581454);var n=()=>o(386164),r=()=>o(94830),i=()=>o(160568),a=()=>o(449506),s=()=>o(435009),l=()=>o(34542),c=()=>o(989423),d=()=>o(508496),u=()=>o(852100);const p=6,m=12,g=12;async function f(e){const{environment:t,locale:o,includeCreator:r,includeCategories:i,userIntent:s,currentSpaceId:l}=e,c=await a().callApi({eventName:"inAppGetTemplates",environment:t,data:{locale:o,limit:p,featured:!0,includeCreator:r,includeCategories:i,userIntent:s,isMobile:t.device.isMobile},headers:(0,n().WS)({spaceId:l})});return"success"===c.type&&c.data.success?c.data.templates:[]}async function v(e){const{environment:t,locale:o,slug:r,includeCreator:i,includeCategories:s,includeAllLocales:l,acquisitionDestinationId:c,currentSpaceId:d}=e,u=await a().callApi({eventName:"inAppGetTemplateBySlug",environment:t,data:{locale:o,slug:r,includeCreator:i,includeCategories:s,includeAllLocales:l,acquisitionDestinationId:c},headers:(0,n().WS)({spaceId:d})});if("success"===u.type&&u.data.success){return{...u.data.template,creator:u.data.creator,categories:u.data.categories,allLocales:u.data.allLocales}}}async function h(e){const{environment:t,locale:o,id:r,includeCreator:i,includeCategories:s,currentSpaceId:l}=e,c=await a().callApi({eventName:"inAppGetTemplates",environment:t,data:{locale:o,limit:1,filterBy:{ids:[r]},includeCreator:i,includeCategories:s},headers:(0,n().WS)({spaceId:l})});if("success"===c.type&&c.data.success){const e=c.data.templates[0];return{...e,creator:e.creator,categories:e.categories}}}async function _(e){const{environment:t,locale:o,creatorContentfulId:r,includeCreator:i,includeCategories:s,offset:l,limit:c=m,excludePinnedTemplates:d,contentfulIds:u,currentSpaceId:p}=e,g=await a().callApi({eventName:"inAppGetTemplates",environment:t,data:{locale:o,limit:c,orderBy:"popular",filterBy:{creatorId:r,excludePinnedTemplates:d,contentfulIds:u},offset:l,includeCreator:i,includeCategories:s,includeCount:!0},headers:(0,n().WS)({spaceId:p})});return"success"===g.type&&g.data.success?{templates:g.data.templates,count:g.data.count}:{templates:[],count:0}}function b(e){return 2===e.length||null==e?void 0:e[0]}function y(e){return 2===e.length||null==e?void 0:e[0]}async function S(e){const{environment:t,locale:o,hasAllCategories:r,offset:i,hasAnyCategories:s,includeCreator:l,hasAtLeastOneCategoryPerGroup:c,madeBy:d,orderBy:u,paid:p,locales:m,excludeContentfulIds:f,currentSpaceId:v}=e,h=await a().callApi({eventName:"inAppGetTemplates",environment:t,data:{locale:o,limit:g,filterBy:{hasAllCategories:r,hasAnyCategories:s,hasAtLeastOneCategoryPerGroup:c,excludeContentfulIds:f,madeBy:b(d),paid:y(p)},orderBy:u,offset:i,excludeDefaultLocale:"user_locale"===m,includeCreator:l,includeCount:!0,isMobile:t.device.isMobile},headers:(0,n().WS)({spaceId:v})});return"success"===h.type&&h.data.success?{templates:h.data.templates,count:h.data.count}:{templates:[],count:0}}function w(e){const{environment:t,template:o}=e,n={product_type:"template",is_paid:(0,r().fN)(o),template_id:o.id};(0,c().u4)({environment:t,event:{eventName:"marketplace_external_link_click",eventProperties:n}}),d().default.logEvent("marketplace_external_link_click",1,n),window.open(o.attributes.purchase_url)}function k(e){const{environment:t,slug:o,openInNewTab:n,makeTabActive:r,route:i,creator:a}=e;s().oo({environment:t,url:(0,u().sO)(o,i,a),makeTabActive:Boolean(r),...n&&{openInNew:"tab"}})}const I=100;async function A(e){const{environment:t,locale:o,contentfulIds:r,includeCreator:i,limit:s}=e,l=await a().callApi({eventName:"inAppGetTemplates",environment:t,data:{filterBy:{contentfulIds:r},locale:o,limit:s??I,includeCreator:i},headers:(0,n().WS)({spaceId:void 0})});if("success"===l.type&&l.data.success){const e=new Map;for(const t of l.data.templates)e.set(t.contentful_id,t);return r.map((t=>e.get(t))).filter((e=>void 0!==e))}return[]}async function x(e){const{environment:t,template:o,templateBlockStore:n,currentSpaceStore:a,currentSpaceViewStore:s,teamStore:d,duplicationStartedToastProps:u={},duplicationFinishedToastProps:p={},isEmailShared:m,from:g="inApp",isMobile:f=!1}=e,v=Date.now(),h=await(0,l().Fq)({environment:t,blockStore:n,spaceStore:a,spaceViewStore:s,teamStore:d,from:g,templateId:o.id,duplicationStartedToastProps:u,duplicationFinishedToastProps:p,isEmailShared:m,isMobile:f}),_=Date.now()-v;i().BX(t,{destination:d?"team":"private",template_block_id:o.block_id,template_duplication_duration_ms:_,team_id:null==d?void 0:d.id,created_page_id:null==h?void 0:h.id}),i().YT(t,{from:e.from||"notion_in_app_template_gallery",is_paid:(0,r().fN)(o),is_first_party:(0,r().RS)(o),template_block_id:o.block_id,template_id:o.id,public_template_name:o.name}),(0,c().u4)({environment:t,event:{eventName:"marketplace_installation_attempt",eventProperties:{product_type:"template",product_id:o.id,block_id:o.block_id,is_paid:(0,r().fN)(o),is_first_party:(0,r().RS)(o)}}})}},71304:(e,t,o)=>{o.d(t,{D_:()=>m,Jq:()=>f,Qe:()=>v,gG:()=>g,tS:()=>h});var n=()=>o(612740),r=()=>o(416504),i=()=>o(869558),a=()=>o(919709),s=()=>o(100622),l=()=>o(519839),c=()=>o(630116),d=()=>o(921855),u=()=>o(682146),p=()=>o(437622);function m(e){return e instanceof c().Bv||e instanceof c().SL||e instanceof c().md||e instanceof c().pS||e instanceof c().h4}function g(e,t){if(e.isDefined())return e.getModel().getEmptyTitlePlaceholder({getRecordModel:e.getRecordModel,userTimeZone:(0,r().P)(),intl:t})}function f(e,t,o){if(e instanceof c().Bv&&!e.isWorkflowPage()||e instanceof c().md&&!e.isSystemCollection()){if("none"===e.getRole())return n().mA(t);const r=e instanceof c().Bv?e.getTitleValue():e.getName(),i=(0,s().O4)({theme:o.ThemeModeStore.state});if(!r||!i||0===(0,a().qAZ)(r).length)return;return(0,d().Vg)(o,i,r,e,!0)}return v(e,t,o,!0)}function v(e,t,o,i){if(e instanceof c().h4)return e.getName();if(e instanceof c().SL)return(0,p().GK)(o,e);if(e instanceof c().pS){const t=e.getName();if(t)return t;const o=e.getType();return o?u().to[o]:void 0}if(!e||!e.isDefined())return;return"none"===e.getRole()?n().mA(t):e.getRenderTitle({userTimeZone:(0,r().P)(),intl:t,disableInsertedAnnotations:i})}function h(e){const{environment:t,intl:o,untitledFallback:r,store:a}=e,s=r?o.formatMessage(r):function(e,t){if(e.table===i().Gy){const o=e.getType();if(o&&"page"!==o&&l().Xg[o])return t.formatMessage(l().Xg[o])}return n().L(t)}(a,o);return v(a,o,t,!1)||g(a,o)||s}},71584:(e,t,o)=>{o.r(t),o.d(t,{attemptServerBackedLocalDuplicate:()=>me,duplicateBlock:()=>ge,loadLocalSubtree:()=>fe,localDuplicate:()=>ue,serverDuplicate:()=>pe,shouldUseDuplicateAndTranslateTemplateBlock:()=>he,shouldUseDuplicateTemplateBlock:()=>ve});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(803949),o(581454);var n=()=>o(700500),r=()=>o(175482),i=()=>o(110192),a=()=>o(857639),s=()=>o(416504),l=()=>o(416845),c=()=>o(777447),d=()=>o(792071),u=()=>o(976618),p=()=>o(388821),m=()=>o(696706),g=()=>o(912720),f=()=>o(199378),v=()=>o(179034),h=()=>o(519831),_=()=>o(869558),b=()=>o(343666),y=()=>o(197959),S=()=>o(37165),w=()=>o(144081),k=()=>o(665344),I=()=>o(161479),A=()=>o(854150),x=()=>o(743246),C=()=>o(919709),T=()=>o(229833),M=()=>o(763824),P=()=>o(973647),B=()=>o(534177),R=()=>o(435345),E=()=>o(583835);const D=(0,E().Dv)("duplicateAndTranslateTemplateBlock"),N=(0,E().Dv)("duplicateTemplateBlock");var L=()=>o(466614),F=()=>o(970330),U=()=>o(679156),O=()=>o(449506),V=()=>o(669548),j=()=>o(901389),z=()=>o(357625),q=()=>o(910302),H=()=>o(899193),W=()=>o(863168),K=()=>o(246826),G=()=>o(666144),$=()=>o(606952),Y=()=>o(317909),Q=()=>o(345913),Z=()=>o(780054),X=()=>o(36375),J=()=>o(898486),ee=()=>o(974233),te=()=>o(594794),oe=()=>o(611191),ne=()=>o(603815),re=()=>o(972435),ie=()=>o(494043),ae=()=>o(351360),se=()=>o(227440),le=()=>o(508496),ce=()=>o(630116);const de=(0,o(959013).YK)({offlineError:{id:"duplicateActions.offlineError.message",defaultMessage:"Please go online to copy this block."},unknownError:{id:"duplicateActions.unknownError.message",defaultMessage:"An unknown error occurred."}});function ue(e){var t,o,n;const{environment:r,sourceBlockId:s,targetBlockPointer:l,sourceBlockSubtree:c,targetInMemoryRecordCache:d,addCopyName:u,deepCopyTransclusionContainers:p,duplicateDiscussions:m,shallowCopyNavigableBlock:g,resolveTemplateVariables:f,transaction:h,preventLegacyTransclusions:_,duplicateOnlyCollectionSchema:b,convertExternalObjectInstancesToPlaceholders:y,installationImprint:S,isTemplateInstantiation:w,templateInstallationMetadata:k,actionStartTimestamp:I,appendContentOnly:A}=e,x=l.spaceId,C=null===(t=c.getModel({id:s,table:v().ev}))||void 0===t?void 0:t.spaceId,T=[],M=I??performance.now(),P=x??(null===(o=ae().default.state.currentSpaceStore)||void 0===o?void 0:o.id)??(null===(n=ae().default.state.mainEditorCurrentBlockStore)||void 0===n?void 0:n.getSpaceId()),B=P?r.idCreator.getSpaceIdCreatorSync(P):void 0,{targetBlockStore:R,originalToDuplicate:E,subtreeSize:D}=V().j({environment:r,sourceBlockId:s,targetBlockPointer:l,sourceBlockSubtree:c,targetRecordCache:d,transaction:h,deepCopyTransclusionContainers:p,duplicateDiscussions:m,shallowCopyNavigableBlock:g,resolveTemplateVariables:f,preventLegacyTransclusions:_,createLegacyTransclusionCopyIndicator:{onCreate(e){T.push(e)}},installationImprint:S,templateInstallationMetadata:k,isTemplateInstantiation:w,spaceIdCreator:B,appendContentOnly:A});if(_e({environment:r,userAction:h.getUserActionForAnalyticsPurposesOnly()||"",startTime:M,isLocal:!0,totalBlocks:D,succeeded:!0}),x!==C&&a().log({level:"info",from:"localDuplicate",type:"local_duplicate_across_spaces",data:{sourceSpaceId:C,targetSpaceId:x,sourceBlockId:s,subTreeSize:c.getSize()}}),u&&R&&R.isNavigableBlock()){const e=R.getTitleStore();if(e){const t=e.getValue(),o=(0,i().g)(t);$().KY({environment:r,store:e,value:o,transaction:h})}}if(T.length){const t=!se().A.state.online;t&&j().f1(re().A.formatMessage(de.offlineError));for(const o of T){const t=R.getSpaceId(),n=ce().Bv.createChildStore(R,{table:v().ev,id:o.duplicateBlockId});pe({environment:r,targetSpaceId:t,targetInMemoryRecordCache:d,transaction:h,userActionSuffix:" (legacy transclusion fix)",sourceBlocks:[{id:o.sourceBlockId,spaceId:C}],copyIndicators:[n],addCopyName:!1,deepCopyTransclusionContainers:p,resolveTemplateVariables:f,templateInstallationMetadata:k,duplicateOnlyCollectionSchema:b,convertExternalObjectInstancesToPlaceholders:y??!1,shouldAttemptServerBackedLocalDuplication:!1,shouldTranslate:e.shouldTranslate,sourceLanguage:e.sourceLanguage,targetLanguage:e.targetLanguage})}U().hi(r,{offline:t,num_blocks_duplicated:T.length,user_action:h.getUserActionForAnalyticsPurposesOnly()})}return{targetBlockStore:R,originalToDuplicate:E}}function pe(e){const{environment:t,sourceBlocks:o,targetInMemoryRecordCache:r,addCopyName:i,deepCopyTransclusionContainers:a,resolveTemplateVariables:c,transaction:d,targetSpaceId:u,convertExternalObjectInstancesToPlaceholders:m,duplicateOnlyCollectionSchema:g,userActionSuffix:f,installationImprint:h,createActivities:_,templateInstallationMetadata:b={},applyTranslationMap:y,isTemplateInstantiation:S,shouldAttemptServerBackedLocalDuplication:w,actionStartTimestamp:k}=e;if(0===o.length)throw new Error("Must duplicate at least one block");if((0,B().O9)(y)&&1!==o.length)throw new Error("applyTranslationMap currently only supported for single (page) block duplication");const A=e.copyIndicators??function(e){const{environment:t,sourceBlocks:o,targetRecordCache:r,transaction:i,spaceId:a}=e,s=o.map(((e,o)=>K().Wv({environment:t,type:n().xd.copyIndicator,inMemoryRecordCache:r,transaction:i,spaceId:a})));if(s.length!==o.length)throw new Error("copyIndicators must be same length as source blocks");if(!(0,B().EI)(s))throw new Error("copyIndicators must cannot be empty");return s}({environment:t,sourceBlocks:o,targetRecordCache:r,transaction:d,spaceId:u});let x=!0;const C=M().yX(),T=k??performance.now();return d.postSubmitCallbacks.push((async n=>{if(n)!function(e,t){const o=(0,l().op)(e)?(0,J().DX)(re().A.getIntl(),e):void 0;t.resolve({status:"error",errorMessage:o??re().A.formatMessage(de.unknownError),error:e})}(n,C);else{const n=`${d.getUserActionForAnalyticsPurposesOnly()}${f?` ${f}`:""}`;if(function(e){for(const t of e)H().n_(t.id)}(A),w&&1===o.length){const{success:e}=await me({environment:t,sourceBlockPointer:o[0],targetBlockStore:A[0],userAction:n,deepCopyTransclusionContainers:a,convertExternalObjectInstancesToPlaceholders:m,addCopyName:i,resolveTemplateVariables:c,isTemplateInstantiation:!!S,templateInstallationMetadata:b,actionStartTimestamp:T});if(e)return be(A),void C.resolve({status:"success"})}const l=ve(b.source),k=he(e.shouldTranslate,e.sourceLanguage,e.targetLanguage),M={sourceBlocks:o,targetBlocks:A.map((e=>({id:e.id,spaceId:e.getSpaceId()}))),addCopyName:i,deepCopyTransclusionContainers:a,convertExternalObjectInstancesToPlaceholders:m,duplicateOnlyCollectionSchema:g,userAction:n,createActivities:_,resolveTemplateVariables:!!c&&{currentUserId:t.currentUser.id,currentTimeZone:(0,s().P)()}},E=o[0].spaceId||u,F=o.map((e=>({...e,spaceId:e.spaceId||E}))),U=l?z().UT(t,N,{...M,source:b.source,context:b.context,isEmailShared:b.isEmailShared,isFromDuplicateParam:b.isFromDuplicateParam,sourceBlocks:F}):k?z().UT(t,D,{...M,sourceLanguage:e.sourceLanguage,targetLanguage:e.targetLanguage,sourceBlocks:F}):z().UT(t,R().w,{...M,installationImprint:h,returnRecordIdMapJson:(0,B().O9)(y),sourceBlocks:M.sourceBlocks});let V;try{for await(const e of U)ye(e,A),L().$2(t,e),V=e}catch(r){x=!1}finally{_e({environment:t,userAction:n,startTime:T,succeeded:x,isLocal:!1,totalBlocks:V&&P().Q.isSuccess(V)?V.value.totalBlocks:0})}if(be(A),V&&!V.error||(O().callApi({eventName:"deleteBlocks",environment:t,data:{blocks:A.filter((e=>e.useCrdt())).map((e=>({id:e.id,spaceId:(0,I().e)(e.pointer.spaceId)}))),permanentlyDelete:!1}}),Q().LS({environment:t,blocks:A.filter((e=>!e.useCrdt()))})),!V)return void C.resolve({status:"error",errorMessage:re().A.formatMessage(de.unknownError),error:new Error(re().A.formatMessage(de.unknownError))});if(V.error){const e=(0,J().A)(re().A.getIntl(),V.error);C.resolve({status:"error",errorMessage:e,error:V.error})}else{const e=V.value.recordIdMapJson;if((0,B().O9)(y)&&(0,B().O9)(e)){const o=p().RecordMapLegacy.create(e),n=q().Js({translationMap:y,recordIdMap:o});Y().createAndCommit({userAction:"serverDuplicate.applyTranslationMap",environment:t,canUndo:!0,perform(e){const o=A[0];for(const[r,i]of Object.entries(n)){const n=ce().Bv.createChildStore(o,{table:v().ev,id:r,spaceId:o.getSpaceId()});let a;if("title"===i.mapping)a=n.getBlockTitleStore();else if("caption"===i.mapping)a=n.getPropertyStore("caption");else{if("unmapped"===i.mapping)continue;if("properties"===i.mapping){Object.entries(i.properties??{}).forEach((o=>{let[r,i]=o;const a=n.getPropertyStore(r);$().KY({environment:t,store:a,value:i.value,transaction:e})}));continue}(0,B().HB)(i.mapping)}$().KY({environment:t,store:a,value:i.value,transaction:e})}}})}C.resolve({status:"success"})}}})),[A,C.promise]}async function me(e){const{environment:t,sourceBlockPointer:o,targetBlockStore:n,userAction:r,deepCopyTransclusionContainers:i,convertExternalObjectInstancesToPlaceholders:s,resolveTemplateVariables:l,addCopyName:c,isTemplateInstantiation:d,templateInstallationMetadata:u,recordLimit:m=500,actionStartTimestamp:v,appendContentOnly:h,targetInMemoryRecordCache:_}=e;let b;const y=_??n.inMemoryRecordCache,S=(0,oe().$J)(),w={blockId:o.id,allowCopyCollections:!0,requireFullSubtree:!0,skipTransclusionContainerChildren:!i,allowCopyExternalObjectInstances:!s,includeLegacyTransclusionBlockValues:S};if(b=fe(t,{...w,inMemoryRecordCache:y}),!b.recordMap&&y===t.defaultRecordCache.inMemoryRecordCache)try{await(0,ne().A$)(t,{table:"block",id:o.id,spaceId:o.spaceId}),b=fe(t,{...w,inMemoryRecordCache:y})}catch(C){a().log({level:"warning",from:"attemptServerBackedLocalDuplicate",type:"persistedRecordCachePreloadError",error:(0,T().n6)(C),data:{message:"Failed to preload subtree from persisted record cache"}})}if(!b.recordMap)try{const e=await O().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:o.id,spaceId:o.spaceId},shallow:!1,recordCountLimit:m}});if("success"!==e.type){const t=(0,ee().V)(e);return a().log({level:"warning",from:"attemptServerBackedLocalDuplicate",type:"loadBlockSubtreeFailure",data:{message:"Error fetching subtree",miscDataToConvertToString:{error:t,sourceBlockPointer:o,cacheSize:n.inMemoryRecordCache.size,targetBlockPointer:{id:n.id,spaceId:n.getSpaceId(),type:n.getType()},userAction:r}}}),{success:!1,size:void 0,pageStore:n}}{const o=p().RecordMapWithRole.create(e.data.subtreeRecordMap);await G()._O({environment:t,inMemoryRecordCache:y,recordMap:o,debugSource:r}),b=fe(t,{...w,inMemoryRecordCache:y})}}catch(C){return a().log({level:"error",from:"attemptServerBackedLocalDuplicate",type:"subtreeLoadError",error:(0,T().n6)(C),data:{message:"Error loading subtree",miscDataToConvertToString:{sourceBlockPointer:o,cacheSize:n.inMemoryRecordCache.size,targetBlockPointer:{id:n.id,spaceId:n.getSpaceId(),type:n.getType()},userAction:r}}}),{success:!1,size:void 0,pageStore:n}}if(!b.recordMap)return a().log({level:"warning",from:"attemptServerBackedLocalDuplicate",type:"subtreeLoadFailure",data:{message:"Failed to load subtree",miscDataToConvertToString:{sourceBlockPointer:o,cacheSize:n.inMemoryRecordCache.size,reason:"error"===b.type?b.reason:void 0,targetBlockPointer:{id:n.id,spaceId:n.getSpaceId(),type:n.getType()},missingRecord:"error"===b.type?b.pointer:void 0,userAction:r}}}),{success:!1,size:void 0,pageStore:n};var k;if(o.spaceId&&L().Lw({sourceSpaceId:o.spaceId,targetSpaceId:n.getSpaceId(),sourceBlockSubtree:b.recordMap}))return a().log({level:"warning",from:"attemptServerBackedLocalDuplicate",type:"accessLockingWarning",data:{message:"Unable to perform local duplication",miscDataToConvertToString:{sourceBlockPointer:o,targetBlockPointer:{id:n.id,spaceId:n.getSpaceId(),type:n.getType()},userAction:r}}}),{success:!1,size:null===(k=b.recordMap)||void 0===k?void 0:k.getSize(),pageStore:n};for(const p of b.recordMap.getTables()){var I;if(p===g().yB||p===f().SC)return a().log({level:"warning",from:"attemptServerBackedLocalDuplicate",type:"invalidRecordType",data:{message:"Local duplication does not support automation tables",miscDataToConvertToString:{sourceBlockPointer:o,targetBlockPointer:{id:n.id,spaceId:n.getSpaceId(),type:n.getType()},userAction:r}}}),{success:!1,size:null===(I=b.recordMap)||void 0===I?void 0:I.getSize(),pageStore:n}}try{var A;const{serverCommitResult:e}=Y().createAndCommit({userAction:r,environment:t,canUndo:!0,isTemplateInstantiationTransaction:!!u,perform:e=>ue({environment:t,sourceBlockId:o.id,targetBlockPointer:n.pointer,sourceBlockSubtree:b.recordMap,targetInMemoryRecordCache:n.inMemoryRecordCache,transaction:e,preventLegacyTransclusions:S,deepCopyTransclusionContainers:i,addCopyName:c,resolveTemplateVariables:l,isTemplateInstantiation:d,templateInstallationMetadata:u,actionStartTimestamp:v,appendContentOnly:h})});return await e,{success:!0,size:null===(A=b.recordMap)||void 0===A?void 0:A.getSize(),pageStore:n,transactionPromise:e}}catch(C){var x;return a().log({level:"error",from:"attemptServerBackedLocalDuplicate",type:"subtreeLoadError",error:(0,T().n6)(C),data:{message:"Failed to load subtree",miscDataToConvertToString:{sourceBlockPointer:o,targetBlockPointer:{id:n.id,spaceId:n.getSpaceId(),type:n.getType()},userAction:r}}}),{success:!1,size:null===(x=b.recordMap)||void 0===x?void 0:x.getSize(),pageStore:n}}}function ge(e){const{environment:t,stores:o,addCopyName:n,deepCopyTransclusionContainers:r,resolveTemplateVariables:i,transaction:a,targetSpaceId:s,preferDuplicateLocation:l,analyticsFrom:c,duplicateOnlyCollectionSchema:d,installationImprint:u,createActivities:p,applyTranslationMap:m,shouldAttemptServerBackedLocalDuplication:g,templateInstallationMetadata:f}=e,h=performance.now();if(0===o.length)throw new Error("Must duplicate at least one block");const _=o[0].getSpaceId();if(!o.every((e=>e.getSpaceId()===_)))throw new Error("All stores must be in the same space");if(o.length>1&&!o.every((e=>e.isTypedCollectionViewBlock())))throw new Error("Multiple source blocks only supported for grouped typed DB duplication");if((0,B().O9)(m)&&1!==o.length&&!o[0].isPageBlock())throw new Error("applyTranslationMap currently only supported for single page block duplication");for(const v of o){const e=v.getRecordStoreAtRootPath().getValue();let o;const{currentSpaceStore:n}=ae().default.getState();var b;if(n&&(null==e?void 0:e.parent_table)===A().yK&&(o=ce().h4.createChildStore(n,{table:A().yK,id:e.parent_id})),e)F().v(t,{from:c??"copy",type:e.type,teamStore:o,is_toggleable:(0,ie().Yt)(e.type,e.format),collection_id:v.getAssociatedCollectionId()??(null===(b=v.getCollectionStore())||void 0===b?void 0:b.id),new_page_id:"page"===e.type?v.id:void 0,creating_block_id:v.id,parent_collection_id:v.getParentCollectionIdUpToTwoLevels(),form_id:v.getFirstFormIdInCollectionViewBlock()})}const y=_!==s,S=f&&(0,k().Fe)(f.source)&&f.isListedTemplate;if("local"===l&&1===o.length&&!S){const e=o[0],l=(0,oe().$J)(),c=fe(t,{blockId:e.id,inMemoryRecordCache:e.inMemoryRecordCache,allowCopyCollections:!1,requireFullSubtree:!0,skipTransclusionContainerChildren:!r,allowCopyExternalObjectInstances:!y,includeLegacyTransclusionBlockValues:l}).recordMap;if(c&&!L().Lw({sourceSpaceId:_,targetSpaceId:s,sourceBlockSubtree:c})){const{targetBlockStore:o}=ue({environment:t,sourceBlockId:e.id,targetBlockPointer:(0,te().zP)({environment:t,table:v().ev,spaceId:s}),sourceBlockSubtree:c,targetInMemoryRecordCache:e.inMemoryRecordCache,addCopyName:n,deepCopyTransclusionContainers:r,resolveTemplateVariables:i,transaction:a,preventLegacyTransclusions:l,installationImprint:u,templateInstallationMetadata:f,actionStartTimestamp:h});return"ai_block"===o.getType()&&W().EF.setState(o.pointer.id),[[o],Promise.resolve({status:"success"})]}}for(const v of o)if(v.inMemoryRecordCache!==t.defaultRecordCache.inMemoryRecordCache)throw new Error("Can only server duplicate from the environment.defaultRecordCache.inMemoryRecordCache.");const w=t.defaultRecordCache.inMemoryRecordCache;se().A.state.online||j().f1(re().A.formatMessage(de.offlineError));const I=pe({environment:t,sourceBlocks:o.map((e=>({id:e.id,spaceId:e.getSpaceId()}))),targetInMemoryRecordCache:w,addCopyName:n,transaction:a,deepCopyTransclusionContainers:r,resolveTemplateVariables:i,targetSpaceId:s,convertExternalObjectInstancesToPlaceholders:y,duplicateOnlyCollectionSchema:d,installationImprint:u,createActivities:p,templateInstallationMetadata:f,applyTranslationMap:m,shouldAttemptServerBackedLocalDuplication:g,actionStartTimestamp:h,shouldTranslate:e.shouldTranslate,sourceLanguage:e.sourceLanguage,targetLanguage:e.targetLanguage});return async function(){const[e,t]=I;if("success"===(await t).status)for(const o of e)if("ai_block"===o.getType())return void W().EF.setState(o.pointer.id)}(),I}function fe(e,t){const{blockId:o,inMemoryRecordCache:i,allowCopyCollections:a,requireFullSubtree:s,skipTransclusionContainerChildren:l,allowCopyExternalObjectInstances:k,skipBlockContent:I,skipNavigableChildren:A,excludeCrdtData:T,includeLegacyTransclusionBlockValues:M,includeDiscussions:P,includeComments:R}=t,E=e.currentUser.id,D=p().RecordMap.create(),N=new Set,L=[{pointer:{table:v().ev,id:o},parentId:"doesn't matter"}];for(;L.length>0;){const e=L.shift();if(!e)continue;if(N.has(e.pointer.id))continue;const t=o===e.pointer.id;if((0,m().Yt)(e.pointer,v().ev)){var F,U,O,V;const o=i.getRecord({pointer:e.pointer,userId:E});if(null==o||!o.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}const a=T?r().ir(o.value):o.value;if(M){if(!t&&a.parent_id!==e.parentId&&!e.isBlockContentChild)continue}else if(!t&&a.parent_id!==e.parentId)continue;if(a.type===n().xd.externalObjectInstance&&!k)return{type:"error",reason:"encountered_external_object_instance",pointer:e.pointer};if(D.setValue(e.pointer,a),!A){const e=d().Bj6.fromBlock(a).getCollectionPointers();for(const t of e)L.push({pointer:t,parentId:a.id});if(a.view_ids)for(const t of a.view_ids)L.push({pointer:{table:_().Gy,id:t,spaceId:a.space_id},parentId:a.id})}if(!(I||l&&"transclusion_container"===a.type||A&&(0,n().$I)(a.type))){const e=d().Bj6.fromBlock(a).getRenderableContentIds();for(const t of e)L.push({pointer:{table:v().ev,id:t},parentId:a.id,isBlockContentChild:!0})}const u=d().Bj6.fromBlock(a).getNonContentChildren();for(const e of u)L.push({pointer:{table:v().ev,id:e},parentId:a.id,isBlockContentChild:!0});if(a.type===n().xd.externalObjectInstance){var j,z;const e=(null===(j=a.format)||void 0===j?void 0:j.related_external_object_uris_to_instance_ids)&&Object.values(null===(z=a.format)||void 0===z?void 0:z.related_external_object_uris_to_instance_ids)||[];for(const t of e)L.push({pointer:{table:v().ev,id:t,spaceId:a.space_id},parentId:a.id})}if(!A&&a.properties){const e=Object.values(a.properties).filter(B().O9);for(const t of e)for(const e of t)for(const t of C().uPN(e)){if(C().jIt(t)){const e=C().v55(t);L.push({pointer:{table:v().ev,id:e},parentId:a.id})}if(C().sh$(t)){const e=C().cQR(t),o=(0,c().lX)({url:e,baseUrl:Z().A.domainBaseUrl,publicDomainName:Z().A.publicDomainName});o&&L.push({pointer:{table:v().ev,id:o},parentId:a.id})}if(C().N53(t)){const e=C().T$c(t);e&&L.push({pointer:{table:v().ev,id:e,spaceId:a.space_id},parentId:a.id})}}}if("form"===a.type&&null!==(F=a.format)&&void 0!==F&&F.form_layout_pointer&&L.push({pointer:a.format.form_layout_pointer,parentId:a.id}),null!==(U=a.format)&&void 0!==U&&U.automation_id&&L.push({pointer:{table:g().yB,id:a.format.automation_id,spaceId:a.space_id},parentId:a.id}),null!==(O=a.format)&&void 0!==O&&O.workflow_id&&L.push({pointer:{table:x().C0,id:a.format.workflow_id,spaceId:a.space_id},parentId:a.id}),null!==(V=a.format)&&void 0!==V&&V.ai_instructions_page_pointer&&L.push({pointer:a.format.ai_instructions_page_pointer,parentId:a.id}),P&&a.discussions)for(const e of a.discussions)L.push({pointer:{table:y().$Y,id:e,spaceId:a.space_id},parentId:a.id})}else if((0,m().Yt)(e.pointer,h().Vl)){var q,H;if(!a)return{type:"error",reason:"encountered_collection",pointer:e.pointer};const t=i.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}if(t.value.parent_id!==e.parentId)continue;const o=t.value;D.setValue(e.pointer,o),i.forEachRecord(E,(t=>{let{model:o}=t;o.table===v().ev&&o&&o.parent_id===e.pointer.id&&o.alive&&L.push({pointer:o.pointer,parentId:e.pointer.id})}));const n=(null===(q=o.format)||void 0===q?void 0:q.automation_ids)??[];for(const e of n)L.push({pointer:{table:g().yB,id:e,spaceId:o.space_id},parentId:o.id});o.schema&&Object.values(o.schema).forEach((e=>{e&&"button"===e.type&&e.automation_id&&L.push({pointer:{id:e.automation_id,spaceId:o.space_id,table:g().yB},parentId:o.id})})),null!==(H=o.format)&&void 0!==H&&H.layout_pointer&&L.push({pointer:o.format.layout_pointer,parentId:o.id})}else if((0,m().Yt)(e.pointer,_().Gy)){var W;const t=i.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}if(t.value.parent_id!==e.parentId)continue;"form_editor"===t.value.type&&null!==(W=t.value.format)&&void 0!==W&&W.form_block_pointer&&L.push({pointer:t.value.format.form_block_pointer,parentId:t.value.id}),D.setValue(e.pointer,t.value)}else if((0,m().Yt)(e.pointer,g().yB)){const t=i.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}if(t.value.parent_id!==e.parentId)continue;D.setValue(e.pointer,t.value);for(const e of t.value.action_ids??[])L.push({pointer:{table:f().SC,id:e,spaceId:t.value.space_id},parentId:t.value.id})}else if((0,m().Yt)(e.pointer,f().SC)){const t=i.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}if(t.value.parent_id!==e.parentId)continue;D.setValue(e.pointer,t.value);for(const e of t.value.blocks??[])L.push({pointer:{table:v().ev,id:e,spaceId:t.value.space_id},parentId:t.value.id})}else if((0,m().Yt)(e.pointer,x().C0)){const t=i.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}if(t.value.parent_id!==e.parentId)continue;D.setValue(e.pointer,t.value)}else if((0,m().Yt)(e.pointer,y().$Y)){const t=i.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}if(t.value.parent_id!==e.parentId)continue;if(D.setValue(e.pointer,t.value),R)for(const e of t.value.comments??[])L.push({pointer:{table:b().SN,id:e,spaceId:t.value.space_id},parentId:t.value.id})}else if((0,m().Yt)(e.pointer,b().SN)){const t=i.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}if(t.value.parent_id!==e.parentId)continue;D.setValue(e.pointer,t.value);for(const e of t.value.content??[])L.push({pointer:{table:v().ev,id:e,spaceId:t.value.space_id},parentId:t.value.id})}else if((0,m().Yt)(e.pointer,w().zx)){const t=i.getRecord({pointer:e.pointer,userId:E}),o=null==t?void 0:t.value;if(!o){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}D.setValue(e.pointer,o);const n=d().Bj6.fromValue(w().zx,o);for(const r of n.getBlockChildrenPointers())L.push({pointer:r,parentId:e.pointer.id});(0,u().E)(o.modules,(t=>{if("formQuestion"===t.type){const n={id:t.formQuestionId,table:S().lo,spaceId:o.space_id};L.push({pointer:n,parentId:e.pointer.id})}}))}else if((0,m().Yt)(e.pointer,S().lo)){const t=i.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}D.setValue(e.pointer,t.value)}N.add(e.pointer.id)}return{type:"success",recordMap:D}}function ve(e){if(!e)return!1;const t=le().default.getConfigKey("enabled_installation_sources_for_duplicate_template_block",e);return Boolean(t)}function he(e,t,o){return Boolean(e&&t&&o)&&le().default.checkGate({gateName:"translate_template_top_bar"})}function _e(e){const{environment:t,userAction:o,startTime:n,succeeded:r,totalBlocks:i,isLocal:a}=e,s=le().default.checkGate({gateName:"duplicate_block_await_post_submit_transaction"}),l=le().default.checkGate({gateName:"duplicate_block_skip_free_chart_post_submit_transaction"});(0,X().E)({environment:t,success:r,time:performance.now()-n,user_action:o,is_duplication_local:a,is_skip_free_chart_post_submit_transaction:l,is_await_post_submit_transaction:s,duplication_size:i})}function be(e){for(const t of e)H().L7(t.id)}function ye(e,t){for(const o of t)H().DW(e,o.id)}},72234:(e,t,o)=>{o.d(t,{dK:()=>w,FJ:()=>h,Jm:()=>g,VW:()=>v,p$:()=>m,EB:()=>f,OV:()=>p,F3:()=>b,Oy:()=>_,kg:()=>A,LH:()=>u,I$:()=>x,Mk:()=>d,ZK:()=>k,OF:()=>I,T$:()=>y,gI:()=>S,AG:()=>c});o(16280),o(18107),o(967357),o(898992),o(354520);var n=()=>o(857639);var r=()=>o(229833),i=()=>o(534177),a=()=>o(989423),s=()=>o(351360),l=()=>o(317909);function c(e,t,o){l().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings"],command:"update",args:{...e.getSettings(),...o}},transaction:t})}function d(e){const{currentSpaceViewStore:t}=s().default.state;t&&l().createAndCommit({environment:e,userAction:"AiSlackQnaNotificationTooltip.setSlackQnaNotificationSeenAtToCurrentTimestamp",canUndo:!0,perform:e=>{c(t,e,{ai_slack_qna_notification_seen_at:Date.now()})}})}function u(e){const{currentSpaceViewStore:t}=s().default.state;t&&l().createAndCommit({environment:e,userAction:"AiGoogleDriveQnaNotificationTooltip.setGoogleDriveQnaNotificationSeenAtToCurrentTimestamp",canUndo:!0,perform:e=>{c(t,e,{ai_google_drive_qna_notification_seen_at:Date.now()})}})}function p(e){var t;const{currentSpaceViewStore:o}=s().default.state;o&&void 0===(null===(t=o.getSettings())||void 0===t?void 0:t.space_analytics_settings_prompt)&&l().createAndCommit({userAction:"userSettingsActions.initializeSpaceAnalyticsPromptSettings",environment:e,canUndo:!0,perform:e=>{c(o,e,{space_analytics_settings_prompt:{status:"showing",num_times_shown:0}})}})}function m(e){var t;const{currentSpaceViewStore:o}=s().default.state;if(!o)return;const n=null===(t=o.getSettings())||void 0===t?void 0:t.space_analytics_settings_prompt;if(!n||"dismissed"===n.status||"hidden"===n.status)return;const r={...n,num_times_shown:n.num_times_shown+1};r.num_times_shown>3&&(r.status="hidden"),l().createAndCommit({userAction:"spaceViewActions.incrementSpaceAnalyticsSettings",environment:e,canUndo:!0,perform:e=>{c(o,e,{space_analytics_settings_prompt:r})}})}function g(e){var t;const{currentSpaceViewStore:o}=s().default.state;if(!o)return;const n=null===(t=o.getSettings())||void 0===t?void 0:t.space_analytics_settings_prompt;n&&"dismissed"!==n.status&&l().createAndCommit({userAction:"spaceViewActions.incrementspaceAnalyticsSettings",environment:e,canUndo:!0,perform:e=>{c(o,e,{space_analytics_settings_prompt:{status:"dismissed"}})}})}function f(e){var t;const{currentSpaceViewStore:o}=s().default.state;o&&void 0===(null===(t=o.getSettings())||void 0===t?void 0:t.mfa_settings_prompt)&&l().createAndCommit({userAction:"userSettingsActions.initializeMfaPromptSettings",environment:e,canUndo:!0,perform:e=>{c(o,e,{mfa_settings_prompt:{status:"showing",num_times_shown:0}})}})}function v(e){var t;const{currentSpaceViewStore:o}=s().default.state;if(!o)return;const n=null===(t=o.getSettings())||void 0===t?void 0:t.mfa_settings_prompt;if(!n||"dismissed"===n.status||"hidden"===n.status)return;const r={...n,num_times_shown:n.num_times_shown+1};r.num_times_shown>3&&(r.status="hidden"),l().createAndCommit({userAction:"spaceViewActions.incrementOrHideMfaPrompt",environment:e,canUndo:!0,perform:e=>{c(o,e,{mfa_settings_prompt:r})}})}function h(e){var t;const{currentSpaceViewStore:o}=s().default.state;if(!o)return;const n=null===(t=o.getSettings())||void 0===t?void 0:t.mfa_settings_prompt;n&&"dismissed"!==n.status&&l().createAndCommit({userAction:"spaceViewActions.dismissMfaPromptSetting",environment:e,canUndo:!0,perform:e=>{c(o,e,{mfa_settings_prompt:{status:"dismissed"}})}})}function _(e,t){var o;const{currentSpaceViewStore:n}=s().default.state;if(!n)return;const r=(null===(o=n.getSettings())||void 0===o?void 0:o.page_analytics_opt_out_list)||[];r.includes(t)||(l().createAndCommit({userAction:"spaceViewActions.optOutOfPageAnalyticsForPage",environment:e,canUndo:!0,perform:e=>{c(n,e,{page_analytics_opt_out_list:[...r,t]})}}),a().vd(e,"page_analytics_page_opt_out"))}function b(e,t){var o;const{currentSpaceViewStore:n}=s().default.state;if(!n)return;const r=(null===(o=n.getSettings())||void 0===o?void 0:o.page_analytics_opt_out_list)||[];r.includes(t)&&(l().createAndCommit({userAction:"spaceViewActions.optInToPageAnalyticsForPage",environment:e,canUndo:!0,perform:e=>{c(n,e,{page_analytics_opt_out_list:r.filter((e=>e!==t))})}}),a().vd(e,"page_analytics_page_opt_in"))}function y(e){var t;let{environment:o,newValue:n}=e;const{currentSpaceViewStore:r}=s().default.state;if(!r)return;const a={notify_email_digest:n};var d;(0,i().O9)(null===(t=r.getSettings())||void 0===t?void 0:t.notify_home_digest_email)||(a.notify_home_digest_email=(null===(d=r.getSettings())||void 0===d?void 0:d.notify_email_digest)??!1);l().createAndCommit({userAction:"userSettingsActions.emailDigestSetting.onToggle",environment:o,canUndo:!0,perform:e=>c(r,e,a)})}function S(e,t){const{currentSpaceViewStore:o}=s().default.state;o&&l().createAndCommit({userAction:"userSettingsActions.homeDigestEmailSetting.onToggle",environment:e,canUndo:!0,perform:e=>{c(o,e,{notify_home_digest_email:t})}})}function w(e){const{currentSpaceViewStore:t}=s().default.state;t&&l().createAndCommit({userAction:"spaceViewActions.confirmAdminContentSearchAcknowledgement",environment:e,canUndo:!0,perform:e=>{c(t,e,{admin_content_search_acknowledgement:!0})}})}function k(e){var t;const{currentSpaceViewStore:o}=s().default.state;o&&(null!==(t=o.getSettings())&&void 0!==t&&t.has_migrated_to_google_drive_external_integration||l().createAndCommit({userAction:"spaceViewActions.setUserMigratedToGoogleDriveExternalIntegrationInSpace",environment:e,canUndo:!0,perform:e=>{c(o,e,{has_migrated_to_google_drive_external_integration:!0})}}))}function I(e,t,o){const r=o||s().default.state.currentSpaceViewStore;if(!r)throw n().log({level:"error",from:"spaceActions",type:"setUserSurveyData",error:{message:"Couldn't find a SpaceViewStore."}}),new Error;l().createAndCommit({userAction:"spaceViewActions.setUserSurveyData",environment:e,canUndo:!0,perform:e=>{c(r,e,{user_survey_data:t})}})}function A(e){let{environment:t,spaceViewStore:o}=e;const i=o.getModel();if(!i)return;const a=function(e){let{spaceView:t}=e;return[{pointer:{table:"user_root",id:t.parent_id},path:["space_views"],command:"listRemove",args:{id:t.id}},{pointer:{table:"user_root",id:t.parent_id},path:["space_view_pointers"],command:"keyedObjectListRemove",args:{remove:{id:t.id}}},{pointer:{table:"space_view",id:t.id,spaceId:t.space_id},path:[],command:"update",args:{alive:!1}}]}({spaceView:i});try{l().createAndCommit({environment:t,userAction:"spaceViewActions.removeUserSpaceViews",canUndo:!0,perform:e=>{for(const t of a)l().applyOperation({store:o,operation:t,transaction:e})}})}catch(s){n().log({level:"error",from:"spaceViewActions",type:"removeUserSpaceViews",error:(0,r().n6)(s)})}}function x(e,t,o){l().createAndCommit({environment:e,userAction:"spaceViewActions.setShouldCreateTemplatesForMailOnboarding",canUndo:!0,perform:e=>{c(t,e,{should_create_templates_for_mail_onboarding:o})}})}},72256:(e,t,o)=>{o.d(t,{A:()=>l,o:()=>s});var n=()=>o(206267),r=()=>o(252105),i=()=>o(981046),a=()=>o(644837);function s(e,t){const o=n().JW();r().Hh(e,{modal_id:o,currency_code:i().A.selectedCurrencyCode,...t.analyticsArgs,desiredProducts:t.desiredProducts,desiredInterval:t.desiredInterval}),a().A.open({modalId:o,...t})}function l(e,t){r().Vq(e,{modalId:t}),a().A.setState({open:!1})}},75368:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},75542:(e,t,o)=>{function n(e){const t=e.id,o=e.getCollectionSource();return"trending"===(null==o?void 0:o.type)?{collectionViewId:t,teamId:o.teamId}:{collectionViewId:t}}o.d(t,{X:()=>n})},75756:(e,t,o)=>{o.d(t,{Gq:()=>p,ID:()=>c,LS:()=>s,Qq:()=>d,qV:()=>u,ti:()=>i});o(296540);var n=()=>o(959013),r=o(474848);const i="v9",a="https://www.notion.so/Cookie-Notice-bc186044eed5488a8387a9e94b14e58c",s=(0,n().YK)({cookieSettingsLabel:{id:"cookieConsent.settings.label",defaultMessage:"Cookie settings"},customizeCookiesHeader:{id:"cookieConsent.customizeCookies.header",defaultMessage:"Customize cookies"},trackingTypeNecessaryTitle:{id:"cookieConsent.trackingTypeNecessary.title",defaultMessage:"Strictly necessary"},trackingTypeNecessaryCaption:{id:"cookieConsent.trackingTypeNecessary.caption",defaultMessage:"Essential for the site to function. Always On."},trackingTypePreferenceTitle:{id:"cookieConsent.trackingTypePreference.title",defaultMessage:"Functional"},trackingTypePreferenceCaption:{id:"cookieConsent.trackingTypePreference.caption",defaultMessage:"Used to remember preference selections and provide enhanced features."},trackingTypePerformanceTitle:{id:"cookieConsent.trackingTypePerformance.title",defaultMessage:"Analytics"},trackingTypePerformanceCaption:{id:"cookieConsent.trackingTypePerformance.caption",defaultMessage:"Used to measure usage and improve your experience."},trackingTypeTargetingTitle:{id:"cookieConsent.trackingTypeTargeting.title",defaultMessage:"Marketing"},trackingTypeTargetingCaption:{id:"cookieConsent.trackingTypeTargeting.caption",defaultMessage:"Used for targeted advertising."},trackingTypeTargetingSubtitleiOS:{id:"cookieConsent.trackingTypeTargeting.subtitleiOS",defaultMessage:"Not collected nor used within the iOS app"},cookieDismissButtonLabel:{id:"cookieConsent.dismissButton.label",defaultMessage:"Done"},acceptAllButtonLabel:{id:"cookieConsent.acceptAllButton.label",defaultMessage:"Accept all"},rejectAllButtonLabel:{id:"cookieConsent.rejectAllButton.label",defaultMessage:"Reject all"},moreOptionsButtonLabel:{id:"cookieConsent.moreOptionsButton.label",defaultMessage:"More options"},reloadAfterSaveMessage:{id:"cookieConsent.reloadAfterSave.message",defaultMessage:"Notion will now reload to apply your cookie preferences. Click okay to continue."}}),l=(0,n().YK)({banner:{id:"cookieConsent.bannerDisclaimer.message",defaultMessage:"Notion uses cookies to offer you a better experience. See<cookielink>Cookie Notice</cookielink>for details."},settings:{id:"cookieConsent.settingsDisclaimer.message",defaultMessage:"Customize cookies. See<cookielink>Cookie Notice</cookielink>for details."},snackbar:{id:"cookieConsent.snackbarDisclaimer.message",defaultMessage:"Notion uses cookies. See<cookielink>Cookie Notice</cookielink>for details."}});function c(e,t){switch(e){case"necessary":return{title:s.trackingTypeNecessaryTitle,caption:s.trackingTypeNecessaryCaption};case"preference":return{title:s.trackingTypePreferenceTitle,caption:s.trackingTypePreferenceCaption};case"performance":return{title:s.trackingTypePerformanceTitle,caption:s.trackingTypePerformanceCaption};case"targeting":const e=t?s.trackingTypeTargetingSubtitleiOS:void 0;return{title:s.trackingTypeTargetingTitle,subtitle:e,caption:s.trackingTypeTargetingCaption}}}function d(e,t){return(0,r.jsx)(n().sA,{...l[t],values:{cookielink:t=>(0,r.jsxs)(r.Fragment,{children:[" ",e(a,t)," "]})}})}const u={necessary:!0,performance:!0,preference:!0,targeting:!0},p={necessary:!0,performance:!1,preference:!1,targeting:!1}},77238:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(764218).A)},77246:(e,t,o)=>{o.d(t,{Or:()=>a,Uv:()=>r,qu:()=>i});o(16280);class n extends(()=>o(757695))().default{getInitialState(){return{blockStoreMode:{}}}isStoreInAiCoEditing(e){return"ai_co_editing"===this.getMode(e)}getStateForBlock(e){if(e in this.state.blockStoreMode)return this.state.blockStoreMode[e]}setStateForBlock(e,t){this.update((o=>({...o,blockStoreMode:{...o.blockStoreMode,[e]:t}})))}clearStateForBlock(e){e in this.state.blockStoreMode&&(delete this.state.blockStoreMode[e],this.emit())}getMode(e,t){var o,n;if(t)return(null===(n=this.getStateForBlock(e.id))||void 0===n?void 0:n.mode)??"default";const r=null===(o=e.getNavigableBlockStore())||void 0===o?void 0:o.id;var i;return r?(null===(i=this.getStateForBlock(r))||void 0===i?void 0:i.mode)??"default":"default"}hasModeSet(e){let t=e;if(!e.isNavigableBlock()){const o=e.getNavigableBlockStore();if(!o)throw new Error("Store doesn't have a navigable block store.");t=o}return Boolean(this.getStateForBlock(t.id))}getSessionId(e){var t;if(!e.isNavigableBlock())throw new Error("getSessionId must be called with a navigable block.");return null===(t=this.getStateForBlock(e.id))||void 0===t?void 0:t.sessionId}getTranslateModeForBlock(e){const t=this.getStateForBlock(e);if(t)return i(t)?t:void 0}isBlockModeInTranslation(e){return Boolean(this.getTranslateModeForBlock(e))}}const r=new n;function i(e){return!!e&&a(e.mode)}function a(e){return"translate_locked"===e||"translate_unlocked"===e}(0,o(604341).exposeDebugValue)("EditorModeStore",r)},77272:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{recentlyUsedColors:[...o(17022).A.withListenerIgnored((()=>o(850213).A.getState()||["yellow_background"]))]}}getMostRecentlyUsedColor(){return(0,o(220719).MX)(this.state.recentlyUsedColors.length>0,"No recently used colors"),this.state.recentlyUsedColors[0]}}const r=new n},79043:(e,t,o)=>{o.d(t,{A:()=>i});var n=()=>o(496603),r=()=>o(753199);function i(e){return e?a:s}const a=Object.freeze({onMouseDown:e=>{(0,r().SQ)({event:e,context:r().y$.EditorMouseDown,callback:n().D_})},onClick:e=>{(0,r().SQ)({event:e,context:r().y$.EditorClick,callback:n().D_})},onDoubleClick:e=>{(0,r().SQ)({event:e,context:r().y$.EditorDoubleClick,callback:n().D_})},onContextMenu:e=>{(0,r().SQ)({event:e,context:r().y$.EditorContextMenu,callback:n().D_})}}),s=Object.freeze({onMouseDown:n().lQ,onClick:n().lQ,onDoubleClick:n().lQ,onContextMenu:n().lQ})},79059:(e,t,o)=>{o.r(t),o.d(t,{getMobileNativeSessionInfo:()=>r,mobileNativeSessionInfoKey:()=>n});const n="__mobileNativeSessionInfo";function r(){return window[n]??{}}},79628:(e,t,o)=>{o.d(t,{A:()=>n});const n=new class{constructor(){this.lruKeyStore=new(o(178624).R)({key:"frequentlyUsedActions",namespace:"NativeMobileActionBar",important:!1,trackingType:"necessary"})}load(){const e=this.lruKeyStore.state;let t={};try{t=e&&JSON.parse(e)||{}}catch(o){}return t}get(){return this.load()}set(e){this.lruKeyStore.setState(JSON.stringify(e))}track(e){const t=this.load(),o=t[e];void 0!==(null==o?void 0:o.frequency)&&void 0!==(null==o?void 0:o.lastAccessed)?(o.frequency+=1,o.lastAccessed=Date.now()):t[e]={frequency:1,lastAccessed:Date.now()},this.set(t)}}},80586:(e,t,o)=>{o.d(t,{C:()=>r});o(898992),o(672577);var n=()=>o(715256);n().P7;class r{constructor(e){this.getSearchBackend=void 0,this.getEligibleGroup=void 0,this.isAiEnabledFn=void 0,this.isZeroRetentionEnabledFn=void 0,this.getCanSearchWorkspaceWithCollectionIdFilter=void 0,this.checkGate=void 0,this.getSubscriptionTier=void 0,this.getIsAssistantSpaceSettingEnabled=void 0,this.isInitialized=void 0,this.getEligibleGroup=e.getEligibleGroup,this.isAiEnabledFn=e.isAiEnabled,this.isZeroRetentionEnabledFn=e.isZeroRetentionEnabled,this.getCanSearchWorkspaceWithCollectionIdFilter=e.getCanSearchWorkspaceWithCollectionIdFilter,this.getSearchBackend=e.getSearchBackend,this.checkGate=e.checkGate,this.getSubscriptionTier=e.getSubscriptionTier,this.getIsAssistantSpaceSettingEnabled=e.getIsAssistantSpaceSettingEnabled,this.isInitialized=e.isInitialized}isAiEnabled(){return this.isAiEnabledFn()}isZeroRetentionEnabled(){return this.isZeroRetentionEnabledFn()}isXMLAssistantEnabled(){return this.modeIsNotControl()}isPdfImageConversionEnabledForUser(){return this.checkGate("assistant_chat_with_pdf_use_images")}isAiBlockV2EnabledForUser(){return this.checkGate("ai_template_filling_use_new_ai_blocks")}getNamespace(){return"prompt_only_server"}showRemindersToUseQnA(){return this.modeIsNotControl()}isAssistantSummarizeThisPageEnabledForUser(){return"on"===this.getEligibleGroup("assistant_show_summarize_this_page_reminder")&&this.modeIsNotControl()}isWebSearchEnabledForUser(){return this.checkGate("ai_assistant_universal_qna_web_search")&&!this.isDeepFindEnabled()}isLoadingWebUrlsEnabledForUser(){return this.checkGate("load-web-page-rollout")}isWorkspaceLeapEligible(e){const{ignoreEnterpriseCheck:t}=e??{ignoreEnterpriseCheck:!1};return t?this.modeIsNotControl()&&!this.isZeroRetentionEnabled():this.modeIsNotControl()&&Boolean(this.getSubscriptionTier())&&"enterprise"!==this.getSubscriptionTier()&&!this.isZeroRetentionEnabled()}isSlackQnaNotificationEnabled(){return this.checkGate("slack_qna_notification_tooltip_enabled")}canUseUniversalSearchScopes(){const e=this.getSubscriptionTier();return this.checkGate("is_third_party_qna_enabled")&&(0,o(979340).jR)(e)&&this.isAiEnabled()}isGoogleDriveQnaEnabled(){return this.checkGate("google_drive_qna_ingestion")}isJiraQnaEnabled(){return this.checkGate("jira_qna_ingestion")}isGithubQnaEnabled(){return this.checkGate("github_qna")}isMicrosoftTeamsQnaEnabled(){return this.checkGate("microsoft_teams_qna")}isSharepointQnaEnabled(){return this.checkGate("sharepoint_qna")}canUseUniversalJiraSearchScope(){return this.isJiraQnaEnabled()&&this.canUseUniversalSearchScopes()}canUseUniversalGoogleDriveSearchScope(){return this.isGoogleDriveQnaEnabled()&&this.canUseUniversalSearchScopes()}canUseUniversalGithubSearchScope(){return this.isGithubQnaEnabled()&&this.canUseUniversalSearchScopes()}canUseUniversalSlackSearchScope(){return this.canUseUniversalSearchScopes()}canUseUniversalMicrosoftTeamsSearchScope(){return this.isMicrosoftTeamsQnaEnabled()&&this.canUseUniversalSearchScopes()}isRouterV2SearchEnabledForLEAP(){return this.checkGate("ai_assistant_router_v2_search_leap")}isRouterV2SearchEnabled(){return this.checkGate("ai_assistant_router_v2_search")}isRouterV2ActionEnabledForLEAP(){return this.checkGate("ai_assistant_router_v2_action_leap")}isRouterV2ActionEnabled(){return this.checkGate("ai_assistant_router_v2_action")}isDatabaseQueryingEnabled(){return this.modeIsAtMost("exploratory")}isDatabaseScopedSearchEnabled(){return this.modeIsAtMost("assistant_0.3")&&this.checkGate("ai_assistant_router_v2_search_in_database")}isMoveToCornerEnabled(){return this.modeIsAtMost("exploratory")}canUseCollectionIdForDBScopedSearch(){return this.getCanSearchWorkspaceWithCollectionIdFilter()}canReceiveAssistantLaunchGrant(){return this.modeIsAtMost("development")}isFullPageTranslateEnabled(){return(this.modeIsAtMost("assistant_0.3")||this.checkGate("full_page_translate"))&&!this.isZeroRetentionEnabled()}canUseAssistantDebugTools(){return this.checkGate("run_assistant_allow_dev_only_args")}areAiActionsOnPasteEnabled(){return this.modeIsNotControl()&&"on"===this.getEligibleGroup("ai_actions_on_paste_experiment")}isReplaceSelectionEnabled(){return this.checkGate("assistant_replace_selection")}isDeepFindEnabled(){return(0,n().nw)({mode:"deep_dive",currentMode:this.getUnifiedFindMode()})&&"quick_find"!==this.getUnifiedFindMode()}isQuickFindEnabled(){return(0,n().nw)({mode:"end_to_end",currentMode:this.getUnifiedFindMode()})||"quick_find"===this.getUnifiedFindMode()}isUnifiedFindDebugToolsEnabled(){return this.checkGate("unified_find_debug_tools")&&(0,n().nw)({mode:"deep_dive",currentMode:this.getUnifiedFindMode()})}isDeepFindAppendKeywordsEnabled(){return"on"===this.getEligibleGroup("deep_find_append_keywords")}isDeepFindNoQuestionEnabled(){return"on"===this.getEligibleGroup("deepfind_querygen_noquestion")}isConflictContentEnabled(){return this.checkGate("compute_related_content")&&this.modeIsAtMost("assistant_0.3")}disableWriterAutoFollow(){return this.modeIsNotControl()&&this.checkGate("ai_disable_writer_auto_follow")}canUseHigherContextLength(){return this.modeIsNotControl()}getMode(){if(!this.isAiEnabledFn())return"control";const e=this.getEligibleGroup("assistant_variant");return e&&n().P7.find((t=>t===e))?e:this.getIsAssistantSpaceSettingEnabled()?"assistant_0.3":n().Nh}getUnifiedFindMode(){if("control"===this.getMode())return"control";const e=this.getEligibleGroup("unified_find_variant");return e&&n().ky.find((t=>t===e))?e:"control"}isDeepFindQueryGenEnabled(){return this.checkGate("deep_find_enable_query_gen")}isDeepFindUniversalBlendingEnabled(){return this.checkGate("deep_find_enable_universal_blending")}areDeepFindThirdPartySourcesEnabled(){return this.checkGate("deep_find_enable_3p_sources")}shouldUnifiedFindCacheQueryGen(){return this.checkGate("unified_find_cache_query_gen")}isMode(e){return this.getMode()===e}modeIsAtMost(e){return(0,n().A2)({mode:e,currentMode:this.getMode()})}modeIsNotControl(){return"control"!==this.getMode()}getIsInitialized(){return this.isInitialized}}},82648:(e,t,o)=>{o.d(t,{CS:()=>u,Hg:()=>c,Tc:()=>d,yd:()=>s});o(898992),o(737550);var n=()=>o(410690),r=()=>o(496603),i=()=>o(807054);const a={};function s(e){void 0===a[e]&&(a[e]=performance.now())}const l={};function c(e){Object.assign(l,e)}function d(){return l}function u(){const{app_start_to_main_start:e,main_start_to_prefetch_initiated:t,prefetch_initiated_to_statsig_bootup_blocking_start:o,statsig_bootup_blocking:s,render_start_to_render_end:l}=(0,i().getSubMetricsAndMetricDataForTracking)({isPrewarmedTab:!1}).sub_metrics,c=(0,n().getAppStartTime)(),d={app_start_to_await_get_spaces_start:p(c,a.await_get_spaces_start),app_start_to_await_get_spaces_end:p(c,a.await_get_spaces_end),app_start_to_browser_repaint_start:p(c,a.browser_repaint_start),app_start_to_browser_repaint_end:p(c,a.browser_repaint_end)},u=r().z7({app_start_to_main_start:e,main_start_to_prefetch_initiated:t,prefetch_initiated_to_statsig_bootup_blocking_start:o,statsig_bootup_blocking:s,render_start_to_render_end:l,...d},r().b0),m=[e,t,o,s,l];return m.some(r().b0)||(u.app_start_to_render_end=r().cz(m)),u}function p(e,t){return void 0===e||void 0===t?void 0:t-e}},83573:(e,t,o)=>{o.d(t,{A:()=>d});o(898992),o(354520),o(581454);var n=()=>o(700500),r=()=>o(179034),i=()=>o(519831),a=()=>o(534177),s=()=>o(720665),l=()=>o(53137);class c extends(()=>o(757695))().default{getInitialState(){return{externalObjectInstanceBlockPointersMap:{},externalCollectionInstancePointersMap:{},externalSyncInstancePointersMap:{}}}addFromRecordMapWithRoleJson(e){this.addFromRecordMapWithRole(o(388821).RecordMapWithRole.create(e))}addFromRecordMapWithRole(e){const t=e.getByTable(i().Vl).filter((e=>{var t;let{value:o}=e;return null==o||null===(t=o.value)||void 0===t||null===(t=t.format)||void 0===t?void 0:t.external_object_id})).map((e=>{let{value:t}=e;return(null==t?void 0:t.value)&&{id:t.value.id,table:i().Vl,spaceId:t.value.space_id}})).filter(a().O9),c=e.getByTable(i().Vl).filter((e=>{var t;let{value:n}=e;return(0,o(488173).zG)(null==n||null===(t=n.value)||void 0===t?void 0:t.format)})).map((e=>{let{value:t}=e;return(null==t?void 0:t.value)&&{id:t.value.id,table:i().Vl,spaceId:t.value.space_id}})).filter(a().O9),d=l().A.getBotsAsRecordMap(),u=e.getByTable(r().ev).filter((e=>{let{value:t}=e;if(!(t&&t.value&&t.value.format&&t.value.format.external_object_id))return!1;if(t.value.type!==n().xd.externalObjectInstancePage&&t.value.type!==n().xd.externalObjectInstance)return!1;const r=t.value.format.bot_id;if(!r)return!1;if(!0===l().A.state.loaded){const e=d.getValue({table:o(824862).GP,id:r});if(e&&e.integration_id&&e.integration_id===o(617871).ob)return!1}return!0})).map((e=>{let{value:t}=e;return null==t?void 0:t.value})).filter(a().O9),p=o(496603).oE(u.map((e=>{if(e.type===n().xd.externalObjectInstancePage&&e.parent_table===i().Vl)return{id:e.parent_id,table:e.parent_table,spaceId:e.space_id}}))),m=(0,s().MU)(u.map((e=>{const t={id:e.id,table:r().ev,spaceId:e.space_id};return[e.id,t]}))),g=(0,s().MU)([...t,...p].map((e=>[e.id,e]))),f=(0,s().MU)(c.map((e=>[e.id,e])));this.setState({externalObjectInstanceBlockPointersMap:{...this.state.externalObjectInstanceBlockPointersMap,...m},externalCollectionInstancePointersMap:{...this.state.externalCollectionInstancePointersMap,...g},externalSyncInstancePointersMap:{...this.state.externalSyncInstancePointersMap,...f}})}reset(){this.setState({externalObjectInstanceBlockPointersMap:{},externalCollectionInstancePointersMap:{},externalSyncInstancePointersMap:{}})}isEmpty(){return 0===Object.keys(this.state.externalCollectionInstancePointersMap).length&&0===Object.keys(this.state.externalObjectInstanceBlockPointersMap).length&&0===Object.keys(this.state.externalSyncInstancePointersMap).length}}const d=new c},84233:(e,t,o)=>{o.d(t,{m:()=>r});var n=()=>o(292588);const r={table:o(495989).xM,recordColumnTypes:{id:n().A.UUID,version:n().A.Number,last_version:n().A.Number,settings:n().A.JSON},metaColumnTypes:{meta_user_id:n().A.UUID,meta_role:n().A.String}}},84349:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},84390:(e,t,o)=>{o.d(t,{Y:()=>n});const n=(0,o(340498).xh)("creditCard",{default:{loader:()=>o.e(34273).then(o.bind(o,34273))},small:{loader:()=>o.e(34273).then(o.bind(o,34273))},mini:{loader:()=>o.e(34273).then(o.bind(o,34273))},large:{loader:()=>o.e(34273).then(o.bind(o,34273))}})},84448:(e,t,o)=>{o.d(t,{c:()=>a});var n=()=>o(857639),r=()=>o(519831),i=()=>o(449506);async function a(e){const{environment:t,collectionStore:o}=e,a={id:o.id,table:r().Vl,spaceId:o.getSpaceId()},s=await i().callApi({eventName:"suggestRecordKey",environment:t,data:{...a,shouldSetSuccessfullySuggestedRecord:!0}});if("success"===s.type)return s.data.key;n().log({level:"error",from:"collectionAutoIncrementIdActions.suggestRecordKeyResponse",type:"JSONParseError",error:{miscDataString:s.error.message}})}},87017:(e,t,o)=>{o.r(t),o.d(t,{duplicateBlocks:()=>T,duplicateBlocksWithMaybeConfirmation:()=>C,insertBlockAbove:()=>P,insertBlockAndEdit:()=>B,insertBlockBelow:()=>M,insertTextAbove:()=>E,insertTextBelow:()=>R});o(18107),o(944114),o(967357);var n=()=>o(908006),r=()=>o(206267),i=()=>o(161479),a=()=>o(496603),s=()=>o(466614),l=()=>o(60867),c=()=>o(669548),d=()=>o(901389),u=()=>o(620689),p=()=>o(797265),m=()=>o(317909),g=()=>o(838256),f=()=>o(521358),v=()=>o(519839),h=()=>o(413962),_=()=>o(780054),b=()=>o(405417),y=()=>o(667925),S=()=>o(53664),w=()=>o(393255),k=()=>o(77246),I=()=>o(502438),A=()=>o(611371),x=()=>o(71584);async function C(e){const{environment:t,blocks:o,duplicateOnlyCollectionSchema:r,callback:i}=e;if(!(0,A().EF)(t))return;let a=o;if(1===o.length){const e=await f().rW({environment:t,block:o[0],action:"duplicate"});if("user_canceled"===e)return void(null==i||i());a=e}const s=a.at(0);if(!s)return;const c=(0,v().UH)(s);if(c&&(0,b().ls)(s,c))await l().un({blocks:a,environment:t,analyticsFrom:"subitem_duplication",callback:i,collectionContextStore:c});else{const{serverCommitResult:e}=m().createAndCommit({userAction:"actionRegistry.duplicateToSelection",environment:t,canUndo:!0,perform:e=>{T({environment:t,blocks:a,transaction:e,preferDuplicateLocation:"local",duplicateOnlyCollectionSchema:r})},transactionTooBigFallback:e=>{T({environment:t,blocks:a,transaction:e,preferDuplicateLocation:"server",duplicateOnlyCollectionSchema:r})}});e.then(i)}n().default.afterNextFlush((()=>{u().BM({environment:t})}))}function T(e){const{environment:t,blocks:o,transaction:n,preferDuplicateLocation:r,lastTopLevelBlockStore:l,preventSetSelection:c,duplicateOnlyCollectionSchema:u}=e,m=a().$z(o,(e=>e.getFormat().app_id??e.id)),g=[];return a().jJ(m,(e=>{const o=e[0],a=!o.isTransclusionType(),[l,c]=x().duplicateBlock({environment:t,stores:e,addCopyName:(0,S().A)(o),transaction:n,deepCopyTransclusionContainers:a,resolveTemplateVariables:!(o.isInsideTemplate()||o.isInsideFactoryOrDuplicateBlocksAction()),targetSpaceId:(0,i().e)(o.pointer.spaceId),baseUrl:_().A.domainBaseUrl,publicDomainName:_().A.publicDomainName,preferDuplicateLocation:r,duplicateOnlyCollectionSchema:u});g.push(...l),c.then((e=>{if("error"===e.status){const o=e.error;s().Rk(o)?s().UK(t,{product:o.clientData.metadata.product}):d().f1(e.errorMessage)}}))})),p().LE({blocksToInsert:g,target:l?[l]:o,environment:t,transaction:n,replaceEmptyTextBlock:!1,preventSetSelection:c}),g}function M(e){const{environment:t,createBlockItem:o,selection:n,transaction:r,analyticsFrom:i,preventSetSelection:a}=e,s=I().default.getCurrentRecordCache(),l=new(g().UF)({environment:t,userFlow:"page"===(null==o?void 0:o.blockType)?"user_flow_create_page":"user_flow_create_block",succeedOnEnqueue:!0});let d;if((0,A().EF)(t)&&o&&s){const e=c().w({environment:t,createBlockItem:o,transaction:r,inMemoryRecordCache:s,from:i,selection:n});l.track(e.pointer,r),d=p().LE({environment:t,blocksToInsert:[e],target:n,transaction:r,replaceEmptyTextBlock:!1,preventSetSelection:a})[0]}else l.fail("invalid_state");return d}function P(e){const{environment:t,createBlockItem:o,selection:n,transaction:r,analyticsFrom:i,preventSetSelection:a}=e,s=I().default.getCurrentRecordCache();let l;if((0,A().EF)(t)&&o&&s){const e=c().w({environment:t,createBlockItem:o,transaction:r,inMemoryRecordCache:s,from:i,selection:n});l=p().t1({environment:t,blocks:[e],selection:n,transaction:r,preventSetSelection:a})[0]}return l}function B(e){const{environment:t,selection:o,transaction:n}=e,i=M({...e,preventSetSelection:!0});if(i){var a;p().x5({environment:t,insertedStores:[i],isCreated:!0});const e=k().Uv.getMode(i);if("suggest"===e){const e=h().RR(t,n,i);h().tM(n,i,{id:r().JW(),type:"insert",discussionId:e.id}),h().c3({environment:t,transaction:n,discussionStore:e,addModifiedBlockIdsAfter:[i.id]})}"suggest"===e&&null!==(a=i.getNavigableBlockStore({skipCurrent:!0}))&&void 0!==a&&a.isCommentOnly()||p().um({transaction:n,blocks:o})}return i}function R(e){const{blocks:t,transaction:o,environment:r,skipAnalytics:i}=e,a=i?void 0:"text_insert_below",s=M({environment:r,selection:t,createBlockItem:y().ry.text,analyticsFrom:a,transaction:o});return s&&n().default.afterNextFlush((()=>{w().zz({environment:r,blockStore:s,insertedTextBlockLocation:"below"})})),s}function E(e){const{blocks:t,transaction:o,environment:r,skipAnalytics:i}=e,a=i?void 0:"text_insert_below",s=P({environment:r,selection:t,createBlockItem:y().ry.text,analyticsFrom:a,transaction:o});return s&&n().default.afterNextFlush((()=>{w().zz({environment:r,blockStore:s,insertedTextBlockLocation:"above"})})),s}},87878:(e,t,o)=>{o.d(t,{nA:()=>a,vZ:()=>i,wA:()=>s});var n=()=>o(351360),r=()=>o(186445);function i(){const e=(0,r().ao)(),t=n().default.state.currentSpaceStore;return e&&e.getSpaceId()!==(null==t?void 0:t.id)?null==e?void 0:e.getSpaceStore():t}function a(e){const t=e.parentStore??i();return null==t?void 0:t.getRecordStore(t,e.pointer)}function s(e){const{spaceStore:t}=e;return!!t&&(t.canAdmin()||t.canRead()&&!t.getSetting("custom_emoji_creation_only_admin"))}},88452:(e,t,o)=>{o.d(t,{Rp:()=>a,dL:()=>r});var n=()=>o(56366);const r="notionscript";function i(){return!1}function a(){return(0,n().K8)(i,[])}},89793:(e,t,o)=>{o.d(t,{F:()=>P});o(898992),o(672577);var n=o(296540),r=()=>o(908006),i=()=>o(56366),a=()=>o(919709),s=()=>o(534177),l=()=>o(921385),c=()=>o(415651),d=()=>o(495262),u=()=>o(778417),p=()=>o(725614),m=()=>o(753199),g=()=>o(962845),f=()=>o(969197),v=()=>o(906537),h=()=>o(792002),_=()=>o(963589),b=()=>o(301421),y=()=>o(393255),S=()=>o(397248),w=()=>o(861841),k=()=>o(77246),I=()=>o(732770),A=()=>o(712505),x=()=>o(502438),C=()=>o(24157),T=o(474848);function M(e){var t;const{canSelectAllBlocks:a,canSelectionDrag:s,disabled:f,disableDrag:y,disableEnter:k,disableHorizontalEdgeScroll:I,disableUpDownArrows:M,isDiscussionInput:P,onBlur:N,onClick:L,onContextMenu:F,topBottomPadding:U,store:O,disableTryCloseSidePeek:V=!1}=e,j=(0,o(484714).v3)(),z=(0,_().X)("editor_basic_rtl"),q=(0,_().X)("mobile_fix_ai_message_click"),H=(0,n.useRef)(!0),W=(0,n.useRef)(!1),K=(0,n.useRef)(null),G=(0,n.useRef)(null),$=(0,o(872994).y)(),{closestSelectable:Y}=(0,n.useContext)(o(501020).z),Q=null==Y||null===(t=Y.props)||void 0===t?void 0:t.store,Z=(0,n.useCallback)((()=>K.current?K.current:G.current?G.current.getNode():null),[]),X=(0,i().K8)((()=>(0,h().j_)(O)),[O],{debugName:"isEditing"}),J=(0,i().K8)((()=>(0,h().Jd)(O)),[O],{debugName:"isPartOfSelection"}),ee=(0,n.useRef)(!1);(0,n.useEffect)((()=>{ee.current&&!X?null==N||N():X&&(ee.current=!0)}),[X,N]),(0,n.useEffect)((()=>()=>{if("editing"!==C().default.state.mode)return;C().default.state.multiSelection.start.store.id!==O.id||b().n.findEditableWithStore(O)||p().clear({environment:j})}),[j,O]);const te=(0,n.useCallback)((e=>{if(f)return;e.preventDefault();const t="empty"!==C().default.state.mode&&C().default.state.multiSelection;if(!t)return;const o=(0,g().ZS)({multiSelection:t,filterCommonAncestors:!0,focus:void 0});o?u().td({environment:j,...o}):null!=Y&&Y.props.canSelect&&u().td({environment:j,stores:[Y.props.store]})}),[j,f,Y]),oe=(0,n.useCallback)((e=>{!f&&(0,l().kx)(e)&&p().arrowUpMultiText({event:e,environment:j,topBottomPadding:U,contentEditableLeafRegistry:null==$?void 0:$.contentEditableLeafRegistry})}),[j,f,U,null==$?void 0:$.contentEditableLeafRegistry]),ne=(0,n.useCallback)((e=>{!f&&(0,l().kx)(e)&&p().arrowDownMultiText({event:e,environment:j,topBottomPadding:U,contentEditableLeafRegistry:null==$?void 0:$.contentEditableLeafRegistry})}),[j,f,U,null==$?void 0:$.contentEditableLeafRegistry]),re=(0,n.useCallback)((e=>{if(f||!(0,l().kx)(e))return;const t=Z();z&&t&&"rtl"===getComputedStyle(t).direction?p().arrowRightMultiText({event:e,environment:j,contentEditableLeafRegistry:null==$?void 0:$.contentEditableLeafRegistry,editorMode:D(O,P)}):p().arrowLeftMultiText({event:e,environment:j,contentEditableLeafRegistry:null==$?void 0:$.contentEditableLeafRegistry})}),[j,z,f,P,O,null==$?void 0:$.contentEditableLeafRegistry,Z]),ie=(0,n.useCallback)((e=>{if(f||!(0,l().kx)(e))return;const t=Z();z&&t&&"rtl"===getComputedStyle(t).direction?p().arrowLeftMultiText({event:e,environment:j,contentEditableLeafRegistry:null==$?void 0:$.contentEditableLeafRegistry}):p().arrowRightMultiText({event:e,environment:j,contentEditableLeafRegistry:null==$?void 0:$.contentEditableLeafRegistry,editorMode:D(O,P)})}),[j,z,f,P,O,null==$?void 0:$.contentEditableLeafRegistry,Z]),ae=(0,n.useCallback)((e=>{f||(e.preventDefault(),p().selectAllTextMulti({environment:j,store:O,canSelectAllBlocks:a,contentEditableContextId:null==$?void 0:$.id}))}),[j,f,a,O,null==$?void 0:$.id]),se=(0,n.useCallback)((e=>{e.preventDefault&&e.preventDefault(),d().tN({environment:j})}),[j]),le=(0,n.useCallback)((e=>{e.preventDefault&&e.preventDefault(),d().ZS({environment:j})}),[j]),ce=(0,n.useCallback)((e=>{E("start",e.shiftKey)}),[]),de=(0,n.useCallback)((e=>{E("end",e.shiftKey)}),[]),ue=(0,n.useCallback)((e=>{e.shiftKey&&!X&&Q?(e.preventDefault(),u().Lt({environment:j,store:Q,selectMode:u().tY(j)}),H.current=!1):H.current=!0}),[j,X,Q]),pe=(0,n.useCallback)((e=>{if(w().Ay.state.isDragging)c().GB(j,{currentX:e.currentX,currentY:e.currentY});else if(e.shiftKey)o(592678).Zm()&&c().v7(j,{startX:e.startX,startY:e.startY,stores:x().default.state.stores,isNativeDrag:!1,getGhostElement:void 0});else{if(o(93658).default.state.isActive)return;if(!s||"mouse"!==e.device)return}const t=Z();if(!t)return;const n=S().fT(t.getBoundingClientRect(),20);S().ux(n,e.currentX,e.currentY)||null!=$&&$.tryEnableMultiSelection()&&(W.current=!0)}),[j,s,Z,$]),me=(0,n.useCallback)((e=>{W.current&&(null==$||$.tryDisableMultiSelection(),W.current=!1),w().Ay.state.isDragging?c().eW({environment:j,analyticsFrom:"page_content",...o(496603).Up(e,["shiftKey","optionKey","commandKey"])}):p().clearForceExtendAnnotations()}),[j,$]),ge=(0,n.useCallback)((()=>{w().Ay.state.isDragging&&(c().Pt(j),u().IU({environment:j}))}),[j]),fe=(0,n.useCallback)((()=>{const e=v().get(),t=(0,g().GI)({contentEditableLeafRegistry:null==$?void 0:$.contentEditableLeafRegistry,range:e,allowInvisibleEndSelection:(0,o(281322).r)().shift});t&&p().selectAndEditMultiSelection({...t,environment:j,readOnly:"infer",focus:void 0})}),[j,null==$?void 0:$.contentEditableLeafRegistry]),ve=(0,n.useCallback)((()=>{r().default.afterNextFlush(fe)}),[fe]),he=(0,n.useCallback)((e=>{(0,m().SQ)({event:e,context:m().y$.EditorClick,callback:()=>{if(null==L||L(e),!e.defaultPrevented)if(function(e){var t;if(!A().default.isSidePeekOpen())return!1;return null===(t=x().default.getDefaultContainerFromTarget(e))||void 0===t?void 0:t.isPeekRenderer()}(e.target)||V||o(661920).Cx(j),H.current){Q?u().hc({environment:j,store:Q}):(u().DN({stores:[]}),u().A({environment:j,phase:x().SelectionPhase.Selected,preventClearEditingText:!0}));try{var t;if(!j.device.isMobile)return;if(X||J)return;const n=Z();if(!n)return;let r;if((0,o(477450).v)($,(()=>{n.classList.add("editor-force-select"),r=v().rangeFromPoint(e.clientX,e.clientY),n.classList.remove("editor-force-select")})),!r)return;const i=(0,o(921855)._S)(j,r);if(!i)return;p().setSelection({store:O,selection:i.selection,readOnly:q?f||(null===(t=G.current)||void 0===t?void 0:t.isDisabled()):void 0}),i.forceEmitSelectionStore&&C().default.emit()}finally{ve()}}else H.current=!0}})}),[j,q,f,L,O,X,J,Q,$,Z,ve,V]),_e=(0,n.useCallback)((e=>{if(!f)if(j.device.isMobile){if(!v().get())return;X||u().hc({environment:j,store:Q}),fe(),r().default.flush()}else(X||"contain"!==e.endpoint)&&fe()}),[j,f,X,Q,fe]),be=(0,n.useCallback)((e=>{F&&(0,m().SQ)({event:e,context:m().y$.EditorContextMenu,callback:()=>{if(F(e),!e.defaultPrevented)return"unhandled"}}),(0,m().SQ)({event:e,context:m().y$.EditorContextMenu,callback:ve})}),[F,ve]);return(0,o(790748).b)(b().n,(()=>({props:e,contentEditableContext:$,getContentEditableLeaf:()=>G.current||void 0,getNode:Z,getContextClosestSelectable:()=>Y,getContextClosestSelectableStore:()=>{var e;return null==Y||null===(e=Y.props)||void 0===e?void 0:e.store},handleClick:he})),[$,Y,Z,he]),(0,T.jsx)(o(11048).A,{name:"Editable",children:(0,T.jsx)(o(545805).A,{debugName:"Editable",capture:X&&!f,onDelete:e.onDelete,onDeleteToEndOfLine:e.onDeleteToEndOfLine,onDeleteNextWord:e.onDeleteNextWord,onBackspace:e.onBackspace,onEnter:k?void 0:e.onEnter,onShiftEnter:e.onShiftEnter,onCommandEnter:e.onCommandEnter,onCommandShiftEnter:e.onCommandShiftEnter,onUp:M?void 0:e.onUp||oe,onDown:M?void 0:e.onDown||ne,onLeft:e.onLeft||re,onRight:e.onRight||ie,onCommandLeft:e.onCommandLeft,onCommandRight:e.onCommandRight,onTab:e.onTab,onUntab:e.onUntab,onSelectAll:e.onSelectAll||ae,onToggleUnderline:e.onToggleUnderline,onToggleHighlight:e.onToggleHighlight,onToggleBold:e.onToggleBold,onToggleItalics:e.onToggleItalics,onToggleStrike:e.onToggleStrike,onToggleCode:e.onToggleCode,onUndo:e.onUndo||se,onRedo:e.onRedo||le,onEsc:e.onEsc||te,onCut:e.onCut,onCopy:e.onCopy,onPaste:e.onPaste,onKeypress:e.onKeypress,onMoveUp:e.onMoveUp,onMoveDown:e.onMoveDown,onHome:ve,onEnd:ve,onGoToBeginningOfLine:e.onGoToBeginningOfLine||ce,onGoToEndOfLine:e.onGoToEndOfLine||de,onGoForwardOneChar:ve,onGoBackwardOneChar:ve,children:(0,T.jsx)(o(603820).A,{cursor:"text",disabled:y,disableHorizontalEdgeScroll:I,enableAndroidContextMenu:f,onDraggableDragStart:ue,onDraggableDragMove:pe,onDraggableDragEnd:me,onDraggableDragCancel:ge,render:t=>e.render((0,o(553965).A)(t,{leafRef:G,wrapperRef:K,onClick:he,onContextMenu:be,onKeyDown:B,onDoubleClick:R}),_e,Boolean(X))})})})}const P=n.memo(M,o(821062).A);function B(e){e.metaKey||e.ctrlKey||e.altKey||(0,y().BJ)(e.key)||I().A.setKeyboardMode(!0)}function R(e){(0,m().SQ)({event:e,context:m().y$.EditorDoubleClick,callback:()=>{}})}function E(e,t){const o=C().default.state;"empty"!==o.mode&&r().default.afterNextFlush((()=>{const{start:n,end:r}=o.multiSelection,i=n.store.getValue();if(i)switch(e){case"start":{const e=a().JWU({textValue:i,substring:"\n",ignoreCase:!1}).reverse().find((e=>{let{endIndex:t}=e;return t<=n.index})),o=(null==e?void 0:e.endIndex)??0,s={store:n.store,index:o};p().setMultiSelection({multiSelection:{start:s,end:t?r:s}});break}case"end":{const e=(0,h().s6)(r.store);if(!e)return;const o=a().JWU({textValue:i,substring:"\n",ignoreCase:!1}).find((e=>{let{startIndex:t}=e;return t>=r.index})),s=(null==o?void 0:o.startIndex)??e.endIndex,l={store:r.store,index:s};p().setMultiSelection({multiSelection:{start:t?n:l,end:l}});break}default:(0,s().HB)(e)}}))}function D(e,t){if(t)return"default";const o=(0,f().T)(e);return o?k().Uv.getMode(o):"default"}},90023:(e,t,o)=>{o.d(t,{dT:()=>i,kR:()=>r,mi:()=>s,xm:()=>a});var n=()=>o(534177);function r(e){switch(e){case"home_main":case"home_trending":case"home_similar_users":case"home_my_tasks":case"home_custom_db":case"home_most_visited":case"home_last_edited":case"home_favorites":case"home_posts":case"person_profile_main":return!0;case void 0:return!1;default:(0,n().HB)(e)}}function i(e){const t=null==e?void 0:e.getSystemBlockType();switch(t){case"home_main":case"home_trending":case"home_similar_users":case"home_most_visited":case"home_last_edited":case"home_my_tasks":case"home_custom_db":case"home_favorites":case"home_posts":case"person_profile_main":return!0;case void 0:return!1;default:(0,n().HB)(t)}}function a(e){switch(e){case"home_main":case"home_trending":case"home_similar_users":case"home_most_visited":case"home_last_edited":case"home_my_tasks":case"home_favorites":case"home_posts":return!0;case"home_custom_db":case"person_profile_main":case void 0:return!1;default:(0,n().HB)(e)}}function s(e){switch(e){case"home_main":case"home_trending":case"home_similar_users":case"home_most_visited":case"home_last_edited":case"home_favorites":return!0;case"home_my_tasks":case"home_custom_db":case"home_posts":case"person_profile_main":case void 0:return!1;default:(0,n().HB)(e)}}},90302:(e,t,o)=>{o.d(t,{Hm:()=>S,TE:()=>p,Qy:()=>m,MB:()=>_,_N:()=>b,cN:()=>f,Fr:()=>g});var n=()=>o(700500),r=()=>o(763884),i=()=>o(972435);class a extends(()=>o(757695))().default{getInitialState(){return{}}setSelected(e,t){this.setState({...this.state,[e]:t})}getSelectedTab(e){return this.state[e]}}const s=new a;var l=()=>o(722101),c=()=>o(246826),d=()=>o(778417),u=()=>o(725614);function p(e){const t=e.getContentStores(),o=e.id,n=s.getSelectedTab(o);return n?t.findIndex((e=>e.id===n)):0}function m(e){const t=p(e),o=e.getContentStores();return o.length>t?o[t]:o[0]}function g(e){const{store:t,index:o,currentUserId:n}=e,r=t.getContentStores()[o];r&&f({store:t,id:r.id,currentUserId:n})}function f(e){const{store:t,id:o,currentUserId:n}=e;s.setSelected(t.id,o),r().A.set({userId:n,key:h(t.id),value:o})}const v="TabBlock";function h(e){return`${v}-${e}`}function _(e){const{blockId:t,currentUserId:o}=e,n=r().A.get({userId:o,key:h(t)});n&&s.setSelected(t,n)}function b(e){const{environment:t,store:o,transaction:r}=e,i=c().Wv({environment:t,type:n().xd.text,inMemoryRecordCache:o.inMemoryRecordCache,transaction:r});l().BC({parentStore:o.getContentStore(),appendStore:i,transaction:r});const a=o.getContentStores()[0];d().hc({environment:t,store:a});const s=a.getBlockTitleStore();u().setSelectionAtStart({store:s})}const y=(0,o(959013).YK)({newTab:{id:"tabBlockActions.addTab.title",defaultMessage:"New tab"}});function S(e){const{environment:t,store:o,transaction:r}=e,a=c().Wv({environment:t,type:n().xd.text,inMemoryRecordCache:o.inMemoryRecordCache,transaction:r,properties:{title:[[i().A.formatMessage(y.newTab)]]}});return l().BC({parentStore:o.getContentStore(),appendStore:a,transaction:r}),s.setSelected(o.id,a.id),a}},90873:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{}}getSharedPagesState(e){const{userId:t,spaceId:o}=e;let n=this.state[t];n||(n={},this.state[t]=n);return n[o]}setSharedPagesState(e){const{userId:t,spaceId:o,state:n}=e;let r=this.state[t];r||(r={},this.state[t]=r),r[o]=n,this.emit()}}const r=new n},90881:(e,t,o)=>{o.r(t),o.d(t,{getBlockSuggestion:()=>s,removeBlockSuggestion:()=>l,removeBlockSuggestionEdit:()=>a,setBlockSuggestion:()=>i});o(898992),o(803949);var n=()=>o(416845),r=()=>o(220719);function i(e,t,o){const n=e.getState().suggestions[t.id],r="crdt"===(null==n?void 0:n.type),a=e.getState(),s=t.id;e.setState({suggestions:{...a.suggestions,[s]:o}});const c=t.getTitleStore();if(!c)return;if("crdt"===o.type){if(r)return;const o=()=>{const o=t.getBlockTitleTextSliceTree(),n=e.getState().suggestions[s];if(!o||!n||"crdt"!==n.type)return;Object.values(n.edits).forEach((e=>null==e?void 0:e.underlineOperations.forEach((e=>o.applyAnnotationOperation(e)))));const r={...n,titleTextValue:o.getTextValue()};i(e,t,r)};return void(null==c||c.addListener(o))}const d=()=>{l(e,s),c.removeListener(d)};null==c||c.addListener(d)}function a(e,t,o){const i=e.getState(),a=t.id,s=i.suggestions[a],l=null==s?void 0:s.edits[o];if(!s||!l)return;if("crdt"!==(null==s?void 0:s.type))throw new(n().yI)("Cannot remove edit from non-crdt suggestion");const c={...s,edits:{...s.edits,[o]:void 0}},d=(0,r().o9)(t.getBlockTitleTextSliceTree());Object.values(c.edits).forEach((e=>{null==e||e.underlineOperations.forEach((e=>d.applyAnnotationOperation(e)))})),c.titleTextValue=d.getTextValue(),e.setState({suggestions:{...i.suggestions,[a]:c}})}function s(e,t){return e.getState().suggestions[t]}function l(e,t){const o=e.getState();o.suggestions[t]&&e.setState({suggestions:{...o.suggestions,[t]:void 0}})}},91451:(e,t,o)=>{o.d(t,{z:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("person",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},92400:(e,t,o)=>{o.d(t,{f:()=>n});o(16280);class n extends Error{constructor(){super("Abort signal received"),this.name="OfflineDownloadAbortedError"}}},92513:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{isModalOpen:!1,currentTab:"selectData",account:void 0,isAccountLinkingInProgress:!1,isAccountDelinkingInProgress:!1,workspaces:[],teamsAndProjects:[],selectedWorkspace:void 0,selectedProjectsAndTeamspaces:{},selectedTeamspacesAndProperties:{},importCompletedTasks:!0,teams:void 0,loadMoreClicks:0,isLoadingProjects:!1,isLoadingAsanaWorkspaces:!1,result:void 0,isComplete:!1,loggerPageId:void 0,templateCreationInProgress:!1,isFetchingAsanaAccount:!1,useSectionAsStatus:!1,choosingWorkspacesCompleted:!1,showOnboardingTour:!1}}resetImport(){const{account:e,workspaces:t}=this.getState();this.setState({...this.getInitialState(),account:e,workspaces:t})}}const r=new n,i=r;(0,o(604341).exposeDebugValue)("AsanaImportStore",r)},93224:(e,t,o)=>{o.d(t,{V:()=>r});var n=()=>o(292588);const r={table:o(294712).GD,recordColumnTypes:{id:n().A.UUID,version:n().A.Number,last_version:n().A.Number,space_views:n().A.StringArray,space_view_pointers:n().A.JSON,left_spaces:n().A.StringArray,deleted_email:n().A.String},metaColumnTypes:{meta_user_id:n().A.UUID,meta_role:n().A.String}}},93658:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isActive:!1}}}const r=new n},94830:(e,t,o)=>{function n(e){return Boolean(e.attributes.checkout_enabled)&&s(e)}function r(e){return!e.attributes.purchase_url&&l(e)}function i(e){return n(e)||r(e)}function a(e){return Boolean(e.attributes.purchase_url)&&!Boolean(e.attributes.checkout_enabled)}function s(e){return void 0!==e.price&&e.price>0}function l(e){return void 0===e.price||0===e.price}o.d(t,{RS:()=>i,Z1:()=>n,ct:()=>a,fN:()=>s,n:()=>r})},94953:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){}getFirstSelectedDiscussionId(){var e;return null===(e=this.state)||void 0===e||null===(e=e.discussionIds)||void 0===e?void 0:e[0]}}const r=new n;(0,o(604341).exposeDebugValue)("DiscussionHoverStore",r);const i=r},95286:(e,t,o)=>{o.d(t,{$8:()=>c,N1:()=>l});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(581454),o(737550);var n=o(296540),r=()=>o(496603),i=()=>o(351360),a=()=>o(151059),s=()=>o(437622);function l(e){const{currentUserRootStore:t}=i().default.state,o=null==t?void 0:t.getSpaceViewStores(),n=r().oE(null==o?void 0:o.map((e=>e.getSpaceId()))).map((t=>a().A.getData(e,{spaceId:t}))),l=function(e){const t=e.map((e=>(0,s().Gb)(e))),o=new Set(r().oE(t));return o.has("enterprise")?"enterprise":o.has("business")?"business":o.has("plus")?"plus":o.has("team_free")?"team_free":o.has("student")?"student":o.has("personal")?"personal":o.has("personal_free")?"personal_free":(o.has("free"),"free")}(n);return{userHighestPlanType:l,isSalesAssistedPlan:r().pb(n,{subscriptionTier:l}).some((e=>{if("none"!==(null==e?void 0:e.role)&&!0===(null==e?void 0:e.is_sales_assisted))return!0}))}}function c(){const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{function e(e){var o,n;"forethoughtWidgetOpened"===(null==e||null===(o=e.data)||void 0===o?void 0:o.event)?t(!0):"forethoughtWidgetClosed"===(null==e||null===(n=e.data)||void 0===n?void 0:n.event)&&t(!1)}return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}})),e}},95313:(e,t,o)=>{o.d(t,{D3:()=>r,Oy:()=>a,X3:()=>c,aM:()=>p,cn:()=>u,dP:()=>l,qN:()=>i,to:()=>d,uU:()=>s});var n=()=>o(989423);function r(e){n().vd(e,"click_breadcrumb_move_to")}function i(e,t){n().vd(e,"move_to_error",t)}function a(e,t){n().vd(e,"move_to",t)}function s(e,t){n().vd(e,"move_to_value_selected",t)}function l(e,t){n().vd(e,"move_to_menu_open",t)}function c(e,t){n().vd(e,"move_to_menu_cancel",t)}function d(e,t){n().vd(e,"add_editor_permission_to_ensure_undo",t)}function u(e,t){n().vd(e,"move_to_autocomplete_query_change",t)}function p(e,t){n().vd(e,"move_to_toggle_click",t)}},97270:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},98244:(e,t,o)=>{o.d(t,{Ju:()=>f,VN:()=>v,dw:()=>g,ns:()=>h});var n=()=>o(919709),r=()=>o(97270),i=()=>o(231722),a=()=>o(906537),s=()=>o(110955),l=()=>o(176106),c=()=>o(375447),d=()=>o(24157),u=()=>o(901997),p=()=>o(606952),m=()=>o(317909);function g(e){const{environment:t,textStore:o,oldSelection:i,oldTextValue:d}=e,p=n().qAZ(o.getValue()||[]),m=i.startIndex;if(":"!==p[m])return;const g=n().Pej(p,m-5,m).join("");if(/[0-9]$/.test(g[g.length-1]))return;if(g.endsWith("http")||g.endsWith("https"))return;if(g.endsWith(":"))return;if(s().A.state.open||r().A.state.open||c().A.state.open||l().A.state.open)return;if(t.device.isPhone)return;const f=a().get();if(!f)return;const v=a().getRect(f);v&&(r().A.setState({open:!0,textStore:o,oldTextValue:d,oldSelection:i,selectionRect:v}),u().Jg(t))}function f(e){const t=r().A.state,{environment:o,emoji:n,transaction:i}=e;t.open&&(p().KY({environment:o,store:t.textStore,value:t.oldTextValue,transaction:i}),p().Wt({environment:o,editorMode:"default",store:t.textStore,selection:t.oldSelection,emoji:n,transaction:i}),v())}function v(){r().A.setState({open:!1})}function h(e){p().DN({direction:"end"});const t=d().default.state;if("editing"!==t.mode)return;const o=(0,i().H7)(t.multiSelection);if(!o)return;let a=!1;if(o.selection.startIndex>0){const e=o.store.getValue()||[],t=n().qAZ(e)[o.selection.startIndex-1];/[\s]/g.test(t)||(a=!0)}m().createAndCommit({userAction:"emojiMenuActions.triggerInsertEmojiMenu",environment:e,canUndo:!0,perform:t=>{a?(p().$D({environment:e,store:o.store,editorMode:"default",string:" ",selection:o.selection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:t}),p().$D({environment:e,store:o.store,editorMode:"default",string:":",selection:{startIndex:o.selection.startIndex+1,endIndex:o.selection.endIndex+1},disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!1,transaction:t})):p().$D({environment:e,store:o.store,editorMode:"default",string:":",selection:o.selection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!1,transaction:t})}});const s=r().A.state;s.open&&r().A.setState({...s,showPopupWithEmptyFilter:!0})}},99042:(e,t,o)=>{o.d(t,{F:()=>w});o(814603),o(147566),o(198721);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(584262),l=()=>o(558842),c=()=>o(179034),d=()=>o(959013),u=()=>o(100622),p=()=>o(989423);function m(e,t){p().u4({environment:e,event:{eventName:"demo_tooltip_tour_action",eventProperties:t}})}var g=()=>o(857783),f=()=>o(435009),v=()=>o(594607),h=()=>o(548527),_=()=>o(559378),b=()=>o(630116),y=()=>o(953006),S=o(474848);function w(e){var t,o,p,w,I,A;let{children:x,step:C,subStep:T,wrapperStyle:M={},highlightStyle:P={}}=e;const B=(0,i().K8)((()=>_().A.state),[]),R=B.step,E=n.useRef(null),D=(0,a().IS)((e=>({tooltip:{width:250},highlight:{background:"dark"===e.mode?u().Ay.whiteWithAlpha(.05):u().Ay.blackWithAlpha(.05),boxShadow:e.outlineBlueInputBoxShadow,borderRadius:4,position:"relative",zIndex:1e3,...P},opacityLayer:{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:999,background:e.surface.wash,opacity:.6}})),[P]),N=void 0!==B.step?null==B||null===(t=B.tooltipTourOutline)||void 0===t||null===(t=t[B.step])||void 0===t?void 0:t.step_type:void 0,L=(0,r().v3)(),[F,U]=(0,h().P)(),O=void 0===R||!B.isActive||!(null!==(o=B.tooltipTourOutline)&&void 0!==o&&o[R])||C!==N&&"demo_signup"!==N,V=!O&&"demo_collection"===N&&T!==(null===(p=B.tooltipTourOutline)||void 0===p?void 0:p[R]).sub_step;if((0,n.useEffect)((()=>{!E.current||U||O||V||E.current.scrollIntoView({behavior:"smooth",block:"center"})}),[R,U,O,V]),O)return(0,S.jsx)(S.Fragment,{children:x});if(V)return(0,S.jsx)(S.Fragment,{children:x});const j=(0,l().Px)(E,F);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:D.highlight,children:(0,S.jsx)(k,{ref:j,style:M,children:x})}),(0,S.jsx)("div",{style:D.opacityLayer}),(0,S.jsx)(v().B,{calloutId:"demo_tour",shouldShow:U,children:(0,S.jsx)(y().k,{onBackButtonClick:()=>{var e,t;if(m(L,{action_type:"back",step:R,total_steps:(null===(e=B.tooltipTourOutline)||void 0===e?void 0:e.length)??0,tour_slug:B.slug}),_().A.decrementStep(),void 0!==C&&"page"===(null===(t=B.tooltipTourOutline)||void 0===t||null===(t=t[R])||void 0===t||null===(t=t.actions)||void 0===t||null===(t=t.back)||void 0===t?void 0:t.type)){var o;const e=null===(o=B.tooltipTourOutline)||void 0===o||null===(o=o[R])||void 0===o||null===(o=o.actions)||void 0===o||null===(o=o.back)||void 0===o?void 0:o.blockId;if(!e)return;const t=new(b().Bv)(L,{table:c().ev,id:e});g().uK({environment:L,store:t,pageVisitSource:s().y8.DemoTour})}},finalButtonContent:"demo_signup"===N?(0,S.jsx)(d().sA,{id:"TutorialTooltip.signupButton",defaultMessage:"Sign up"}):void 0,onPrimaryButtonClick:()=>{var e,t;if(m(L,{action_type:"next",step:R,total_steps:(null===(e=B.tooltipTourOutline)||void 0===e?void 0:e.length)??0,tour_slug:B.slug}),_().A.incrementStep(),void 0!==R){if("demo_signup"===N){const e=new URLSearchParams;return e.set("from","demo_tour"),void f().oo({environment:L,url:`/signup?${e.toString()}`})}if(null!==(t=B.tooltipTourOutline)&&void 0!==t&&null!==(t=t[R])&&void 0!==t&&null!==(t=t.actions)&&void 0!==t&&null!==(t=t.next)&&void 0!==t&&t.type){var o,n;const e=null===(o=B.tooltipTourOutline)||void 0===o||null===(o=o[R])||void 0===o||null===(o=o.actions)||void 0===o||null===(o=o.next)||void 0===o?void 0:o.type,t=null===(n=B.tooltipTourOutline)||void 0===n||null===(n=n[R])||void 0===n||null===(n=n.actions)||void 0===n||null===(n=n.next)||void 0===n?void 0:n.blockId;if(!t)return;const r=new(b().Bv)(L,{table:c().ev,id:t});g().uK({environment:L,store:r,pageVisitSource:s().y8.DemoTour,..."peek"===e?{openInSidePeek:!0}:{}})}}},onSkipButtonClick:()=>{var e;m(L,{action_type:"skip",step:R,total_steps:(null===(e=B.tooltipTourOutline)||void 0===e?void 0:e.length)??0,tour_slug:B.slug}),_().A.endTour()},header:(0,S.jsx)("div",{children:null===(w=B.tooltipTourOutline)||void 0===w||null===(w=w[R])||void 0===w?void 0:w.title}),origin:E,placementToOrigin:"top",content:null===(I=B.tooltipTourOutline)||void 0===I||null===(I=I[R])||void 0===I?void 0:I.text,onCloseClick:()=>{_().A.endTour()},numSteps:(null===(A=B.tooltipTourOutline)||void 0===A?void 0:A.length)??0,currStepIndex:R,style:D.tooltip})})]})}const k=n.forwardRef((function(e,t){let{children:o,style:n}=e;return(0,S.jsx)("div",{ref:t,style:n,children:o})}))},99254:(e,t,o)=>{o.d(t,{y:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{screenToShow:"none",analyticsFrom:"unknown",sessionId:o(206267).JW(),jiraSiteId:"",jiraSiteUrl:"",jiraSyncState:"not_started",jiraSyncProgress:0,syncControl:{exclusionList:[],inclusionList:[],createdAt:Date.now(),updatedAt:Date.now()},isDisconnecting:!1,isLoaded:!1}}}const r=new n;(0,o(604341).exposeDebugValue)("jiraAIConnectionStore",r)},99945:(e,t,o)=>{o.d(t,{A:()=>Q});o(813451),o(944114),o(898992),o(672577),o(581454),o(908872);var n=o(296540),r=()=>o(484714),i=()=>o(792485),a=()=>o(56366),s=()=>o(700500),l=()=>o(179034),c=()=>o(534177),d=()=>o(547392),u=()=>o(317909),p=()=>o(186445),m=()=>o(108944),g=()=>o(731320),f=()=>o(963589),v=()=>o(449476),h=()=>o(644914),_=()=>o(77246),b=()=>o(143197),y=()=>o(630116),S=()=>o(620149),w=(o(737550),()=>o(496603)),k=()=>o(722101),I=()=>o(519839),A=()=>o(835066),x=()=>o(846662),C=()=>o(661491),T=()=>o(611191),M=()=>o(459882),P=()=>o(661179),B=()=>o(712505),R=()=>o(502438),E=()=>o(308701),D=()=>o(199896),N=()=>o(147577),L=o(474848);o(720665).TD;const F=4,U=4,O={quote:U,code:U,header:U,bookmark:U,external_object_instance:U,file:void 0,video:U,embed:U,tweet:U,drive:U,audio:U,gist:U,maps:U,framer:U,invision:U,figma:U,loom:U,typeform:U,mixpanel:U,codepen:U,equation:U,pdf:U,image:U,sub_header:void 0,sub_sub_header:void 0,page:void 0,collection_view:void 0,collection_view_page:void 0,form:void 0,column_list:void 0,column:void 0,personal_home_page:void 0,breadcrumb:void 0,text:void 0,encrypted_text:void 0,bulleted_list:void 0,numbered_list:void 0,to_do:void 0,toggle:void 0,factory:void 0,copy_indicator:void 0,divider:void 0,link_to_collection:void 0,link_to_page:void 0,alias:void 0,transclusion_container:1,transclusion_reference:1,callout:U,table_of_contents:U,whimsical:U,miro:U,abstract:U,sketch:U,excalidraw:U,replit:U,hex:U,deepnote:U,table:1,table_row:void 0,tab:U,external_object_instance_page:U,button:void 0,ai_block:1,drawing:U,slide:U,post:U,workflow:U,transcription:U,person_profile:U},V={quote:F,code:F,bookmark:F,external_object_instance:F,file:void 0,video:F,embed:F,tweet:F,audio:F,drive:F,gist:F,maps:F,framer:F,invision:F,figma:F,loom:F,typeform:F,codepen:F,equation:F,pdf:F,header:"2em",sub_header:"1.4em",sub_sub_header:"1em",image:F,page:void 0,personal_home_page:void 0,collection_view:void 0,collection_view_page:void 0,form:void 0,column_list:void 0,column:void 0,breadcrumb:void 0,text:void 0,encrypted_text:void 0,bulleted_list:void 0,numbered_list:void 0,to_do:void 0,toggle:void 0,factory:void 0,copy_indicator:void 0,divider:void 0,link_to_collection:void 0,link_to_page:void 0,alias:void 0,transclusion_container:1,transclusion_reference:1,callout:F,table_of_contents:F,whimsical:F,miro:F,abstract:F,mixpanel:F,sketch:F,excalidraw:F,replit:F,table:1,table_row:void 0,tab:F,hex:F,deepnote:F,external_object_instance_page:F,button:void 0,ai_block:1,drawing:F,slide:F,post:F,workflow:F,transcription:F,person_profile:F},j={left:"flex-start",center:"center",right:"flex-end"};function z(e){const{store:t,listStore:b,disabled:S,isFirstItem:z,isInsideMarginCollapseContainer:q,canEditList:W,disableSelection:K,disableHoverMenu:G,disableCommentMenu:$,disableDrag:Y,isLastItem:Q,isPageFullWidth:Z,maybeEditorWidthIfSiteSettingsEditor:X,sidePeekWidth:J,shouldShowSidebar:ee,canHideOrphanedBlocks:te,plusButtonBetweenBlocksEnabled:oe}=e,ne=(0,r().v3)(),re=(0,i().S)(),ie=(0,n.useContext)(o(27654).c),ae=(0,n.useRef)(),[se]=(0,n.useState)((()=>o(17022).A.withListenerIgnored((()=>p().kS(t))))),le=(0,a().uB)(void 0,o(891279).A),{isPhantomSyncedBlock:ce,legacyTransclusionParent:de}=(0,a().K8)((()=>{const e=t.getParentId(),o=Boolean(e&&b.id!==e),n=o?b.getRecordStoreAtRootPath():void 0;return{isPhantomSyncedBlock:o,legacyTransclusionParent:n&&n instanceof y().Bv?n:void 0}}),[b,t]),ue=(0,a().K8)((()=>{if(t.isTransclusionType()){if(o(840790).A.state.unsyncingBlockIds.has(t.id))return!0}return!1}),[t]),pe=(0,a().K8)((()=>{const e=re&&re.publicEditModeStore.state;return!S&&(!(0,g().QT)(e)&&t.canEdit())}),[re,S,t]),me=(0,a().K8)((()=>{const e=re&&re.publicEditModeStore.state;return W&&!o(878377).x7S({environment:ne,blocks:[t],publicEditMode:e})}),[ne,re,W,t]),ge=(0,a().K8)((()=>_().Uv.getMode(t)),[t]),fe=(0,a().K8)((()=>(0,A().dC)(ne,t)),[ne,t]),ve=(0,n.useMemo)((()=>(0,o(42803).n)(t)),[t]),he=(0,f().X)("animated_list_item_block"),_e=(0,a().K8)((()=>{const e=re&&re.publicEditModeStore.state;return!(!e||!e.hasPublicPermission)&&("view"===e.permission||("comment"===e.permission?"suggest"!==ge:"edit"!==e.permission&&void(0,c().HB)(e.permission)))}),[re,ge]),{type:be,isFullWidth:ye,canDropOnto:Se,canDropLeftRight:we,shouldShowParentHalo:ke,showHoverMenu:Ie,canDrag:Ae,canSelect:xe,shouldShowSelectionHalo:Ce,shouldShowCommentMenu:Te,numSimpleTableComments:Me,isInlineCollectionView:Pe,isSimpleTable:Be,shouldCollapseTopMargin:Re,isInPeekRenderer:Ee,preventBackgroundDrag:De,disableForceTouch:Ne,alignStyle:Le,canTriggerContextMenu:Fe,isRootChild:Ue,Renderer:Oe}=(0,a().K8)((()=>{const{device:e}=ne,n=t.getFormat(),r=t.getType(),{dragging:i,temporaryFullWidth:a}=le.state,c=(0,o(344051).B)(t),d=i?a:n.block_full_width,u=r===s().xd.page||r===s().xd.collectionViewPage||n.alias_pointer&&(0,o(696706).Yt)(n.alias_pointer,l().ev)||r&&(0,o(494043).Yt)(r,n)&&!o(468484).A.isOpen(t.id),p=Boolean(r&&(0,s().Ef)(r)),m=r===s().xd.table,g=r===s().xd.columnList,f=c===o(938090).dN,v=z&&q&&t.isType(s().u0),h=f,_=t.isRootOrDirectChild(),b=t.getParentStore(),y="block"===(null==b?void 0:b.table)&&b.isType(s().xd.toggle),S=(_||y)&&!g&&!m&&W&&!e.isPhone,w=re&&re.publicEditModeStore.state,k=f&&t.getCollectionStore();let I=f;if(k){void 0===k.getKeyStore("version").getValue()&&(I=!1)}const A=!K&&t.canRead()&&!m&&!I&&(!me||"suggest"===ge),C=!_e&&A&&!f&&!m,T=C,M=(r===s().xd.transclusionContainer||r===s().xd.transclusionReference||r===s().xd.aiBlock)&&function(e){return R().default.state.stores.some((t=>t!==e&&e.uiContains(t)))}(t),P=!_e&&!G&&(!g||oe)&&!m&&!M,E=!$&&!p&&!g&&!(0,x().gV)(t)&&!m&&ne.currentUser.isLoggedIn()&&(!G&&t.canComment()||!W&&("comment"===(null==w?void 0:w.permission)||"comment_only"===t.getRole()))&&(0,o(930545).zp)({blocks:[t]}),D=m?o(980914).Xe({simpleTableStore:t,environment:ne,includeInline:!fe}):0;return{type:r,isFullWidth:d,canDropOnto:u,canDropLeftRight:S,shouldShowParentHalo:T,showHoverMenu:P,canDrag:W&&!g&&!Y,canSelect:A,shouldShowSelectionHalo:C,shouldShowCommentMenu:E,numSimpleTableComments:D,isInlineCollectionView:f,isSimpleTable:m,shouldCollapseTopMargin:v,isInPeekRenderer:Boolean(t.findRecordStoreUIAncestor((e=>e===B().default.peekTargetStore.state)).ancestor),preventBackgroundDrag:h,disableForceTouch:"drawing"===r&&(0,o(969197).OW)(t),alignStyle:n.block_alignment,canTriggerContextMenu:!(0,s().Db)(r,n)&&W&&!g&&!t.inMemoryRecordCache.isSyntheticAssistantData,isRootChild:_,Renderer:c}}),[le,ge,ne,me,fe,re,t,z,q,W,K,G,$,Y,oe,_e],{debugName:"renderStateStore"}),Ve=(0,a().K8)((()=>{const{device:e}=ne,n=ne.WindowSizeStore.state.width,r=(0,h().zo)(ne,Ee)-J,i=ie||!Ue||ve;if(function(e){return Boolean(e.inMemoryRecordCache.snapshotData)}(t)&&!i&&!e.isPhone)return n*(N().oR/100)-N().pN-P().A.state;if(o(489348).A.isBlockInTemplate(t)&&!ie&&!e.isPhone)return n*(E().uL/100)-E().j3-P().A.state;if(v().A.state.isOpen&&"site-settings-editor"===v().A.state.mode&&X){const e=H(ne,t,be)?2*p().F8(ne):0;return X+e}if(i)return"100%";if(Ee){const e=(0,o(154807).eO)({environment:ne,isInPeek:!0});return B().default.getPeekModeWidth(n)-P().A.state-e}let a=n-P().A.state-r;return(0,h().tv)(ne)?(e.isMobile&&!e.isTablet||!ee||(a-=(0,h().kf)(ne)),!Pe&&fe&&(a-=Z?A().Qb:2*(0,A().Zy)(ne,Ee,(0,I().RX)(t))),H(ne,t,be)||(a-=2*p().F8(ne)),a):a}),[ne,Ee,J,ie,t,X,ee,Pe,fe,be,Z,Ue,ve]),je=(0,a().K8)((()=>{if(!function(e,t,o){return!!o&&(Boolean(s().Ib[o])||(0,x().gV)(t)||t.isType("column_list")&&(0,C().kv)(t,e)||t.isType("external_object_instance"))}(ne,t,be))return null;if(be&&(0,o(565304).h)({environment:ne,type:be}))return{width:"100%"};const{dragging:e,temporaryWidth:n,temporaryFullWidth:r,temporaryPageWidth:i}=le.state,{block_width:a,block_full_width:l,block_page_width:c}=t.getFormat(),d=(e?r:l)?Ve:(e?i:c)?"100%":e?n:a;return void 0!==d?{width:d}:null}),[le,ne,Ve,t,be]),ze=(0,a().K8)((()=>{const{device:e}=ne;let n;if(t.isExternalObjectInstanceBlockStore()){var r;const e=(0,o(493208).Cm)({store:t,canEdit:pe,currentUserId:ne.currentUser.id,isInDarkMode:"dark"===ne.ThemeStore.state.mode,showAction:void 0});n=(null==e?void 0:e.renderConfig.previewAttributes)&&(null===(r=e.renderConfig.previewAttributes[0])||void 0===r?void 0:r.mimeType)}const i={};n?"image/*"!==n&&(i.width="100%"):i.width="100%",i.maxWidth=Ve,(e.isMobile&&!ye||ie||!Ue)&&(i.maxWidth="100%"),Le&&!ye&&!e.isPhone&&j[Le]?i.alignSelf=j[Le]:Ue&&be&&(s().H_[be]||(0,x().gV)(t))?i.alignSelf="center":be&&s().Ib[be]&&(i.alignSelf="flex-start"),i.marginTop=z?2:1,i.marginBottom=Q?0:1;const a=be&&(0,s().UL)(be)&&!t.getProperties().source;if(a?i.marginTop=F:be&&V[be]&&(i.marginTop=V[be]),a&&!Q?i.marginBottom=U:!Q&&be&&O[be]&&(i.marginBottom=O[be]),Re&&(i.marginTop=0),Be&&0===Me&&(Ue||e.isPhone)){const e=Ve;i.maxWidth="center_peek"===B().default.getPeekMode()?`calc(100vw - ${2*B().PeekModeOuterPadding-P().A.state}px)`:(0,I().RX)(t)&&!Z?M().x:e,i.width=(0,I().RX)(t)&&!Z?M().x:e,i.alignSelf="center"}return Ue&&fe&&Pe&&(i.zIndex=1),(0,T().iE)()&&ce&&(i.border="3px dashed deeppink"),(0,T().xf)()&&!1===t.getAlive()&&(i.outline="3px dashed deepSkyBlue"),i}),[ne,Ve,ye,ie,t,pe,Le,be,z,Q,Be,Me,Re,fe,Pe,Ue,ce,Z]),qe=(0,a().K8)((()=>m().pp(t)),[t]),He=(0,n.useCallback)((e=>{ae.current&&"edit"in ae.current?ae.current.edit():d().Rp({environment:ne,targetStore:t,targetParentStore:b,isAtStartOfLine:!1,isClick:!1,transaction:e.transaction})}),[ae,ne,b,t]),We=(0,n.useCallback)((e=>{const{droppedDirection:o,droppedStores:n,duplicate:r}=e;u().createAndCommit({userAction:"ListItemBlock.handleDrop",environment:ne,canUndo:!0,perform:e=>{d().MS({environment:ne,targetParentStore:b,targetStore:t,droppedDirection:o,droppedStores:n,duplicate:r,transaction:e})}})}),[ne,b,t]),Ke=(0,n.useCallback)((e=>{const{files:o,droppedDirection:n}=e;u().createAndCommit({userAction:"ListItemBlock.handleNativeDrop",environment:ne,canUndo:!0,perform:e=>d().vZ({environment:ne,files:o,targetParentStore:b,targetStore:t,droppedDirection:n,transaction:e})})}),[ne,b,t]),Ge=(0,n.useCallback)((e=>{const{insertStores:o,transaction:n}=e;return w().o8(o).reverse().map((e=>k().WH({parentStore:b,insertStore:e,afterStore:t,transaction:n}).childStore))}),[b,t]),$e=(0,n.useCallback)((e=>{const{insertStores:o,transaction:n}=e;return w().o8(o).reverse().map((e=>k().nc({parentStore:b,insertStore:e,beforeStore:t,transaction:n}).childStore))}),[b,t]),Ye=(0,n.useCallback)((e=>{d().MB({environment:ne,targetStore:t,targetParentStore:b,isAtStartOfLine:e.isAtStartOfLine,isAtStartOfContainer:e.isAtStartOfContainer,isClick:e.isClick,transaction:e.transaction})}),[ne,b,t]),Qe=(0,n.useCallback)((e=>{{const{transaction:n}=e,r=t.getRecordStoreUIParent();r&&(r.table!==l().ev&&r.table!==o(96689).NX&&r.table!==o(199378).SC||!r.valueIs(o(65269)._)||(o(838256).VS(ne,"user_flow_delete_block",n,"ListItemBlock.handleRemove"),k().TF({parentStore:r,childToRemoveStore:t,transaction:n})))}}),[ne,t]),Ze=()=>Pe?et():(0,o(569912).A)(et),Xe=(0,n.useMemo)((()=>!("suggest"!==ge)&&(!be||!s().D2[be])),[ge,be]),Je=(0,a().K8)((()=>Boolean(t.getFormatStore().getKeyStore("decryption_error").getValue())),[t]),et=t=>{const{store:n,canEditList:r,isFirstItem:i,isLastItem:a}=e;if(Je)return(0,L.jsx)(o(719061).Q2,{blockStore:n});const s={style:ze,store:n,canSelect:xe,canEditText:pe,shouldShowHalo:Ce,shouldShowParentHalo:ke,canDrag:Ae,canDropAbove:r&&i,canDropBelow:r,canDropLeft:we,canDropRight:we,canDropOnto:r&&Se,isLastItem:a,canNativeDropAbove:r&&i,canNativeDropBelow:r,canNativeDropLeft:we,canNativeDropRight:we,onSelectableDrop:We,onNativeDrop:Ke,canTriggerContextMenu:Fe,onInsertBelow:Ge,onInsertAbove:$e,canInsertAbove:r,canInsertBelow:r,onEditText:Ye,onEnter:He,onRemove:Qe,showBlockMenuInput:!0,shouldShowSuggestRemoveHalo:!0,shouldShowSuggestInsertBorder:!0,shouldShowHoverMenu:Ie,disableForceTouch:Ne,shouldShowCommentMenu:Te,shouldShowDropZone:!Be,isListContainer:!0,preventBackgroundDrag:De,analyticsName:"page_content",...t,ignoreForTocSelectionIntersection:"table"===be};return he&&je?(0,L.jsx)(o(145214).A,{tag:D().A,animate:je,...s,children:tt()}):(0,L.jsx)(D().A,{...s,children:tt()})},tt=()=>{const{disabled:t,store:n,disableHoverMenu:r,disableDrag:i,disableCommentMenu:a,numberedListCounterStore:s,bulletedListFormatStore:l}=e;return!qe&&te||ue?null:Oe?(0,L.jsx)(o(108066).I,{blockRef:ae,store:n,type:be,children:(0,L.jsx)(Oe,{ref:ae,store:n,disabled:t||Xe,isFirstItem:z,isLastItem:Q,blockResizerStore:le,disableCommentMenu:a,numberedListCounterStore:s,bulletedListFormatStore:l,disableHoverMenu:r,disableDrag:i,legacyTransclusionParentStore:de,fullWidth:Ve})}):void 0};return se&&be===s().xd.copyIndicator?null:!he&&je?(0,L.jsx)(o(518548).A,{isVisible:!0,animationStyle:je,render:Ze}):Ze()}const q=n.memo(z,o(821062).A);function H(e,t,o){return!!o&&(s().y4[o]||(0,x().gV)(t)||t.isType("column_list")&&(0,C().kv)(t,e)&&t.getFormat().block_full_width)}const W="emptyDroppableKey",K="placeholder",G={depth:1,numberedListBlockIdsWithFormat:[]},$=Object.freeze({depth:0,blockIdFormats:new Map});function Y(e){const t=(0,n.useContext)(o(807005).Z),w=(0,a().K8)((()=>null==t?void 0:t.state),[t]),k=(0,r().v3)(),I=(0,i().S)(),A=(0,a().K8)((()=>{if(e.disabled)return!1;if(S().l.state)return!1;const t=(0,m().Wo)(e.store)&&I&&I.publicEditModeStore.state;return!(0,g().QT)(t)&&e.store.canEdit()}),[I,e.disabled,e.store]),x=(0,a().K8)((()=>!e.disabled&&(!S().l.state&&Boolean(e.store.isCommentOnly()&&(null==I?void 0:I.pageStore)&&"suggest"===_().Uv.getMode(null==I?void 0:I.pageStore)))),[e.store,null==I?void 0:I.pageStore,e.disabled]),C=(0,a().K8)((()=>{if(e.forceIsInsideMarginCollapseContainer)return!0;const t=Z(e.store.id,e.store);return(0,s().wy)(t.getType(),t.getFormat())}),[e.store,e.forceIsInsideMarginCollapseContainer]),T=(0,a().K8)((()=>null==I?void 0:I.pageStore.isFullWidth()),[null==I?void 0:I.pageStore]),M=(0,a().K8)((()=>{if(v().A.state.isOpen&&"site-settings-editor"===v().A.state.mode)return o(622237).A.getEditorWidth()}),[]),P=(0,a().K8)((()=>(0,h().Ql)(k)),[k]),B=(0,a().K8)((()=>p().X4(k).shouldShowSidebar),[k]),R=(0,f().X)("hide_orphan_blocks"),E=(0,o(444570).Jj)(),N=(t,r,i)=>{if(t===W)return(0,L.jsx)(n.Fragment,{children:F()},t);if(t===K)return(0,L.jsx)(n.Fragment,{children:e.emptyPlaceholder},t);{const a=Z(t,e.store),s=i.findLastIndex((e=>(0,o(498212).uj)(e)));return(0,L.jsx)(n.Fragment,{children:(0,L.jsx)(q,{store:a,listStore:e.store,isFirstItem:0===r,isInsideMarginCollapseContainer:C,isLastItem:r===s,disabled:e.disabled,disableLayout:e.disableLayout,canEditList:A||x,disableSelection:e.disableSelection,disableHoverMenu:!(!e.disableFirstItemHoverMenu||0!==r)||e.disableHoverMenu,disableCommentMenu:e.disableCommentMenu,disableDrag:e.disableDrag,numberedListCounterStore:V,bulletedListFormatStore:O,isPageFullWidth:T,maybeEditorWidthIfSiteSettingsEditor:M,sidePeekWidth:P,shouldShowSidebar:B,canHideOrphanedBlocks:R,plusButtonBetweenBlocksEnabled:E})},t)}};function F(){const t=y().Bv.createChildStore(e.store,{table:l().ev,id:e.store.id});return(0,L.jsx)(D().A,{store:t,canDropBelow:A,canNativeDropBelow:A,onSelectableDrop:t=>function(e,t,o){const{droppedDirection:n,droppedStores:r,duplicate:i}=e;u().createAndCommit({userAction:"List.handleEmptyDrop",environment:o,canUndo:!0,perform:e=>{d().MS({environment:o,targetParentStore:t,targetStore:void 0,droppedDirection:n,droppedStores:r,duplicate:i,transaction:e})}})}(t,e.store,k),onNativeDrop:t=>function(e,t,o){const{files:n,droppedDirection:r}=e;u().createAndCommit({userAction:"List.handleEmptyNativeDrop",environment:o,canUndo:!0,perform:e=>{d().vZ({environment:o,files:n,targetParentStore:t,targetStore:void 0,droppedDirection:r,transaction:e})}})}(t,e.store,k),style:e.emptyDroppableStyle,analyticsName:"page_content",shouldShowDropZone:!0})}const U=(0,a().K8)((()=>{const t=e.store.getValue()||[];let o=t;const n=function(e){const{limitParents:t}=b().A.state,o=e.id;let n;return e.findRecordStoreUIAncestor((e=>{const r=t.get(e);return!(!r||!r.hasOwnProperty(o))&&(n=r[o],!0)})),n}(e.store),r=0===t.length;return void 0!==n&&(o=o.slice(0,n)),A&&r&&o.push(W),A&&r&&e.emptyPlaceholder&&o.push(K),o}),[A,e.emptyPlaceholder,e.store]),O=(0,a().r6)((()=>{var t;const o=null===(t=e.bulletedListFormatStore)||void 0===t?void 0:t.getState().depth,n="number"==typeof o?o+1:0,r=new Map;let i;for(const a of U){const t=Z(a,e.store);i=t.getType()===s().xd.bulletedList?t.getFormat().bullet_list_format||i:void 0,i&&r.set(a,i)}return 0===n&&0===r.size?$:{depth:n,blockIdFormats:r}}),[U,e.bulletedListFormatStore,e.store]);(0,a().O$)(O);const V=(0,a().r6)((()=>{var t;const o=[],n=U.length?U[0]:void 0,r=n?Z(n,e.store):void 0,i=null==r?void 0:r.getParentId(),a=null===(t=e.numberedListCounterStore)||void 0===t?void 0:t.state.numberedListBlockIdsWithFormat.find((e=>e.id===i)),l=null==a?void 0:a.format;let d=void 0===(null==a?void 0:a.depth)?0:(null==a?void 0:a.depth)+1,u=l,p=0;for(const g of U)if(g!==W&&g!==K){const t=Z(g,e.store),n=t.getType(),r=t.getFormat();if(u=(null==r?void 0:r.list_format)??u,n===s().xd.numberedList){let e=r.list_start_index;(0,c().O9)(e)&&0!==p&&(e=void 0),p=(0,c().O9)(e)?e:p+1,o.push({id:g,format:u,depth:d||0,index:p})}else u=void 0,o.push({id:void 0,format:u,depth:0,index:p}),d=0,p=0}const m={depth:d||0,numberedListBlockIdsWithFormat:o};return 1===m.depth&&0===m.numberedListBlockIdsWithFormat.length?G:m}),[U,e.numberedListCounterStore,e.store]);return(0,a().O$)(V),e.disableContent?null:(0,L.jsx)(o(11048).A,{name:"List",children:w?U.reduce(((e,t,o,n)=>(w.indexOf(t)>=0&&e.push(N(t,o,n)),e)),[]):U.map(N)})}const Q=n.memo(Y);function Z(e,t){return y().Bv.createChildStore(t,{table:l().ev,id:e})}},100584:(e,t,o)=>{o.d(t,{A:()=>i});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);class n extends(()=>o(757695))().default{getInitialState(){return{openModals:new Set}}}const r=new n,i=r;(0,o(604341).exposeDebugValue)("GlobalModalStore",r)},102586:(e,t,o)=>{o.d(t,{L1:()=>a,MY:()=>c,US:()=>u,Uj:()=>l,if:()=>i,z2:()=>s});o(898992),o(354520);var n=()=>o(755199);const r=100;function i(e,t){return e.prompt===t.prompt&&e.type===t.type}function a(e,t,o){const a=s(t).filter((t=>!i(t,e)));n().mJ({userSettingsStore:t,transaction:o,data:{recent_ai_actions:[e,...a].slice(0,r)}})}function s(e){var t;return(null===(t=e.getModel())||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.recent_ai_actions)??[]}function l(e,t,o){const r=s(t),a=r.filter((t=>!i(t,e)));r.length!==a.length&&n().mJ({userSettingsStore:t,transaction:o,data:{recent_ai_actions:a}})}function c(e){const{clientPrompt:t,additionalContext:o,promptTitle:n}=e,r=null==o?void 0:o.prompt;if(("helpMeWrite"===t.key||"helpMeEdit"===t.key||"helpMeDraft"===t.key)&&r)return{type:"helpMeDraft"===t.key?"helpMeWrite":t.key,prompt:r,promptTitle:n};const i=function(e,t){if(!u(e.key))return;return null==t?void 0:t.topic}(t,o);return i?{type:"helpMeWrite",prompt:i,promptTitle:n}:void 0}const d={brainstormIdeas:!0,blogPost:!0,outline:!0,socialMediaPost:!0,pressRelease:!0,creativeStory:!0,essay:!0,poem:!0,todoList:!0,meetingAgenda:!0,prosConsList:!0,jobDescription:!0,salesEmail:!0,recruitingEmail:!0};function u(e){return d[e]}},102946:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1,formResponseId:void 0,secretKey:void 0,formSpaceId:void 0}}}const r=new n},103448:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=()=>o(284371),r=o(474848);const i=function(e){let{imageURL:t,imageWidth:n,imageHeight:i,caption:s,title:l,imageContainerStyle:c}=e;if(t){const e=(0,o(478184).L)(t);return(0,r.jsxs)("div",{style:{width:n||200,marginTop:4,marginBottom:4},children:[(0,r.jsx)("div",{style:{width:"100%",height:i||100,borderRadius:4,backgroundImage:`url(${e})`,backgroundSize:"cover",marginBottom:6,...c}}),(0,r.jsx)(a,{caption:s,title:l})]})}return(0,r.jsx)(a,{caption:s,title:l,style:{width:n}})};function a(e){let{style:t,caption:o,title:i}=e;return(0,r.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...t},children:[i&&(0,r.jsx)("header",{style:{fontWeight:n().Wy.bold,marginBottom:4},children:i}),o]})}},104012:(e,t,o)=>{o.d(t,{Ag:()=>b,J$:()=>S,MZ:()=>k,kP:()=>w,q6:()=>y});var n=o(296540),r=()=>o(484714),i=()=>o(401497),a=()=>o(584262),s=()=>o(262462),l=()=>o(112452),c=()=>o(959013),d=()=>o(495262),u=()=>o(857783),p=()=>o(435009),m=()=>o(436572),g=()=>o(728611),f=()=>o(211716),v=()=>o(493823),h=o(474848);const _=(0,c().YK)({open:{defaultMessage:"Open",id:"automations.buttonTrigger.open"},undo:{defaultMessage:"Undo",id:"automations.buttonTrigger.undo"}});function b(e){const t=(0,i().DP)();return(0,h.jsx)(v().p,{...e,style:{color:t.text.contrastPrimary,fontWeight:500,height:void 0,marginLeft:0,...e.style}})}function y(e){const{onUndo:t}=e,o=(0,r().v3)();return(0,h.jsx)(b,{onClick:()=>{d().tN({environment:o,preventSelectText:!0}),m().N2(),null==t||t()},children:(0,h.jsx)(c().sA,{defaultMessage:"Undo",id:"snackbar.undo.title"})})}function S(){return(0,h.jsx)(b,{onClick:()=>{},children:(0,h.jsx)(c().sA,{defaultMessage:"Help",id:"snackbar.goToSyncedCollectionHelpButton.title"})})}function w(){const e=(0,r().v3)(),t=(0,n.useCallback)((()=>{p().oo({environment:e,url:"https://notion.so/help/audio-dictation"})}),[e]);return(0,h.jsx)(b,{onClick:t,children:(0,h.jsx)(c().sA,{defaultMessage:"Get help",id:"snackbar.goToGetHelpButton.title"})})}function k(e){const{blockToOpenStore:t,performUndo:o,onOpenBlock:d}=e,p=(0,r().v3)(),m=(0,i().IS)((e=>({icon:{fill:e.text.contrastPrimary},wrap:{display:"flex",columnGap:8}})),[]),v=(0,n.useMemo)((()=>t?e=>{u().uK({environment:p,openInNew:(0,g().Vr)(e),store:t,visitType:f().ig.Link,pageVisitSource:a().y8.ButtonAutomation}),null==d||d(t)}:void 0),[t,p,d]);return(0,h.jsxs)("div",{style:m.wrap,children:[v&&(0,h.jsx)(b,{onClick:v,icon:e=>(0,s().M)({...e,...m.icon,width:16,height:16}),style:{paddingRight:0},children:(0,h.jsx)(c().sA,{..._.open})}),o&&(0,h.jsx)(b,{onClick:o,icon:e=>(0,l()._)({...e,...m.icon,marginTop:-2,width:16,height:16}),children:(0,h.jsx)(c().sA,{..._.undo})})]})}},105652:(e,t,o)=>{o.d(t,{J:()=>r});var n=()=>o(292588);const r={table:o(179034).ev,recordColumnTypes:{id:n().A.UUID,space_id:n().A.UUID,version:n().A.Number,last_version:n().A.Number,type:n().A.String,properties:n().A.JSON,crdt_data:n().A.JSON,crdt_format_version:n().A.Number,content:n().A.StringArray,non_content_children:n().A.UUIDArray,discussions:n().A.StringArray,view_ids:n().A.StringArray,collection_id:n().A.UUID,permissions:n().A.JSON,created_time:n().A.Number,last_edited_time:n().A.Number,copied_from:n().A.UUID,file_ids:n().A.StringArray,ignore_block_count:n().A.Boolean,is_template:n().A.Boolean,parent_id:n().A.UUID,parent_table:n().A.String,alive:n().A.Boolean,moved:n().A.JSON,format:n().A.JSON,created_by:n().A.UUID,last_edited_by:n().A.UUID,created_by_table:n().A.String,created_by_id:n().A.UUID,last_edited_by_table:n().A.String,last_edited_by_id:n().A.UUID,content_classification:n().A.String,moved_to_trash_table:n().A.String,moved_to_trash_id:n().A.UUID,moved_to_trash_time:n().A.Number,deleted_from_trash_time:n().A.Number,deleted_from_trash_table:n().A.String,deleted_from_trash_id:n().A.UUID},metaColumnTypes:{meta_user_id:n().A.UUID,meta_last_access_timestamp:n().A.Number,meta_role:n().A.String}}},106261:(e,t,o)=>{o.d(t,{B:()=>u});var n=o(296540),r=()=>o(959013),i=()=>o(534177),a=()=>o(928600),s=()=>o(722872),l=()=>o(652617),c=()=>o(120303),d=o(474848);function u(e){const{children:t,title:o,displayMode:u}=e,p=(0,n.useContext)(l().e);switch(u){case"phone":return(0,d.jsx)(a().A,{menuType:s().gu.Modal,onClickRight:p,title:o,whiteBackground:!0,disableBottomPadding:!0,right:p?(0,d.jsx)(r().sA,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}):null,children:t});case"desktop":return(0,d.jsxs)(d.Fragment,{children:[t,(0,d.jsx)(c().R,{})]});default:(0,i().HB)(u)}}},106352:(e,t,o)=>{o.d(t,{Ic:()=>N,L1:()=>U,Tr:()=>F,gY:()=>L,xq:()=>V});o(898992),o(672577);var n=o(296540),r=()=>o(662303),i=()=>o(484714),a=()=>o(56366),s=()=>o(401497),l=()=>o(484392),c=()=>o(15440),d=()=>o(784892),u=()=>o(869190),p=()=>o(604995),m=()=>o(416504),g=()=>o(335098),f=()=>o(506391),v=()=>o(959013),h=()=>o(100622),_=()=>o(534177),b=()=>o(284371),y=()=>o(288722),S=()=>o(854672),w=()=>o(802963),k=()=>o(816559),I=()=>o(360083),A=()=>o(447587),x=()=>o(881690),C=()=>o(354584),T=()=>o(712030),M=()=>o(645873),P=()=>o(921855),B=()=>o(972435),R=o(474848);function E(e){const{title:t,color:o,icon:n}=e,r=(0,s().DP)(),i=o?(0,h().C8)(`rgb(${o.r},${o.g},${o.b})`):void 0,a=(0,h().LD)(r,i);return(0,R.jsx)(x().A,{format:d().NY.Medium,value:n?(0,R.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(I().A,{isAuthenticated:!1,url:n,width:32,render:(e,t)=>(0,R.jsx)(k().Ay,{src:t,height:12,placeholderLoadedStyle:{width:12,height:12,marginRight:4}})}),(0,R.jsx)(y().A,{children:(0,l().A)(t)})]}):(0,R.jsx)(y().A,{children:(0,l().A)(t)}),showRemoveButton:!1,color:a.textColor,backgroundColor:a.backgroundColor,isSingle:!0,style:{display:"flex",whiteSpace:"break-spaces",flex:"0 0 auto"}})}function D(e){var t,o,n;const{uri:r,store:i,...s}=e,l=(0,a().K8)((()=>{const e=i.getExternalObjectSubInstanceStores().find((e=>{const t=e.getKeyStore("format").getKeyStore("uri").getValue();return t&&t===r}));if(e)return e.getFormat()}),[i,r]);if(!l)return null;const c=null===(t=l.attributes)||void 0===t?void 0:t.find(f().cz),d=null===(o=l.attributes)||void 0===o?void 0:o.find(f().nN),u=null===(n=l.attributes)||void 0===n?void 0:n.find(f().YX);return c?u?(0,R.jsx)(E,{title:c.values[0],color:u.values[0],icon:null==d?void 0:d.values[0]}):c?(0,R.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[d&&(0,R.jsx)(S().A,{type:"image_url",imageURL:d.values[0],size:16,style:{marginRight:4},imageStyle:s.avatarStyle}),(0,R.jsx)(N,{attribute:c,store:i,...s})]},r):null:null}function N(e){const{attribute:t,formatter:o,store:n,style:r,avatarStyle:i}=e,a=(0,s().DP)();if(!t)return null;if((0,f().cz)(t)){var l;const e=t.values[0];if("enum"===(null===(l=t.format)||void 0===l?void 0:l.type)){const{color:o}=t.format;return(0,R.jsx)(E,{title:e,color:o})}{const t=e.replace(/[\r\n]/g,"").trim(),n=o?B().A.formatMessage(o,{value:t}):t;return(0,R.jsx)("div",{spellCheck:!1,style:{whiteSpace:"nowrap",color:a.mediumTextColor,...r},children:n})}}if((0,f().fk)(t))return(0,R.jsx)(D,{uri:t.values[0],store:n,style:r,avatarStyle:i});if((0,f().RD)(t))return(0,R.jsx)(L,{attribute:t,formatter:e.formatter,style:e.style,dateStyle:"relative"});if((0,f().gh)(t)){const e=t.values[0];return(0,R.jsx)("div",{style:{color:a.mediumTextColor,fontSize:12,...r},children:o?B().A.formatMessage(o,{value:e}):String(e)})}return null}function L(e){const{attribute:t,formatter:o,style:n,dateStyle:i}=e,a=(0,v().tz)(),l=(0,s().DP)(),c=t.values[0];let d;if("datetimerange"===c.type)d=(0,u().ZF)({allowRelativeDates:!1,displayInUserTimezone:!0,intl:a,value:c});else{const e=(0,p().ln)(c,(0,m().P)());i&&"relative"!==i?"exact_time"===i?d=(0,u().W_)(e,"medium_with_time",r().locale):"exact_date"===i?d=(0,u().W_)(e,"medium",r().locale):(0,_().HB)(i):d=(0,u().v9)(e,r().locale)}const g=o?B().A.formatMessage(o,{value:d}):d;return(0,R.jsx)("div",{style:{color:l.mediumTextColor,fontSize:12,whiteSpace:"nowrap",...n},children:g})}function F(e){const t=(0,s().DP)(),{attribute:o,isSmall:n,isUltraSmall:r}=e,i=r?16:n?22:34,a={...e.style,borderRadius:i,boxShadow:t.avatarBoxShadow};return(0,f().nN)(o)?(0,R.jsx)(S().A,{type:"image_url",imageURL:o.values[0],size:i,imageStyle:a}):(0,f().cz)(o)?(0,R.jsx)("div",{style:{...a,borderRadius:i,overflow:"hidden",boxShadow:t.avatarBoxShadow,height:30,width:30},children:(0,R.jsx)(w().A,{size:i,title:o.values[0]})}):null}function U(e){var t;const{attribute:o}=e,{value:i}=(0,M().fJ)(C().y),a=(0,s().IS)((e=>({code:{whiteSpace:"pre-wrap",wordBreak:"break-all",fontFamily:b().vc(r().locale).githubMono,fontSize:"12px",tabSize:2,minWidth:0,textAlign:"left",lineHeight:1.5},text:{fontSize:"85%",flexGrow:1,flexShrink:1,minHeight:"1em"},buttons:{fontWeight:b().Wy.medium}})),[]),l=o.values[0],d=null===(t=o.format)||void 0===t?void 0:t.language,u=n.useMemo((()=>{if(i&&d&&(0,c().aN)(d)&&"Plain Text"!==d){const e=g().y[d],t=i.highlight(l,i.languages[e],d);return(0,R.jsx)("div",{spellCheck:!1,style:a.code,dangerouslySetInnerHTML:{__html:t}})}return(0,R.jsx)("div",{spellCheck:!1,style:a.code,children:(0,R.jsx)("code",{children:l})})}),[i,l,d,a.code]);return(0,R.jsx)("div",{style:{marginTop:4,marginRight:4,marginBottom:4,width:"100%"},children:(0,R.jsx)(A().A,{moreElement:(0,R.jsxs)(R.Fragment,{children:["…"," ",(0,R.jsx)("span",{style:{...a.text,...a.buttons},children:(0,R.jsx)(v().sA,{id:"externalObjectInstance.bodyAttribute.moreLabel",defaultMessage:"more"})})]}),lessElement:(0,R.jsx)("span",{style:{...a.text,...a.buttons},children:(0,R.jsx)(v().sA,{id:"externalObjectInstance.bodyAttribute.showLessLabel",defaultMessage:"show less"})}),maxLines:16,clampOverride:{fontSize:12,lineHeight:1.5},children:u})})}function O(e){const{attribute:t,store:o}=e,n=(0,s().DP)(),r=(0,i().v3)(),l=(0,a().K8)((()=>(0,f().cz)(t)?t.values[0]:(0,P().S5)({environment:r,textValue:{value:t.values,spaceId:o.id},disableHover:!0,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableLinks:!1,disabled:!1,katex:r.KatexStore.getKatex(),parentStore:o,emojiType:(0,T().FN)(r),formulaValueTypes:[],theme:n})),[r,o,n,t]);return(0,R.jsx)("div",{children:l})}function V(e){const t=(0,s().IS)((e=>({text:{color:e.regularTextColor,fontSize:12,lineHeight:1.45},buttons:{fontWeight:b().Wy.medium}})),[]);return(0,R.jsx)("div",{style:{marginRight:4,marginBottom:4,width:"100%"},children:(0,R.jsx)(A().A,{moreElement:(0,R.jsxs)(R.Fragment,{children:["…"," ",(0,R.jsx)("span",{style:{...t.text,...t.buttons},children:(0,R.jsx)(v().sA,{id:"externalObjectInstance.bodyAttribute.moreLabel",defaultMessage:"more"})})]}),lessElement:(0,R.jsx)("span",{style:{...t.text,...t.buttons},children:(0,R.jsx)(v().sA,{id:"externalObjectInstance.bodyAttribute.showLessLabel",defaultMessage:"show less"})}),maxLines:3,clampOverride:{fontSize:t.text.fontSize,lineHeight:t.text.lineHeight},children:(0,R.jsx)("div",{spellCheck:!1,style:t.text,children:(0,R.jsx)(O,{attribute:e.attribute,store:e.store})})})})}},106412:(e,t,o)=>{o.d(t,{Zp:()=>s,tx:()=>i});var n=o(296540);const r=(0,o(446943).C)({displayName:"CollectionPreviewContext",legacyContextKey:"collectionPreviewContext",modernContextDefaultValue:void 0}),i=r.Provider,a=r.context;function s(){return(0,n.useContext)(a)}},106628:(e,t,o)=>{o.d(t,{T:()=>n});const n={searchActions:new(o(645873).O2)("searchActions",(async()=>Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(47123),o.e(5887),o.e(70769),o.e(97965),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(50142),o.e(20838),o.e(88860),o.e(83210),o.e(26090),o.e(96345),o.e(10596),o.e(73285),o.e(78846),o.e(13324),o.e(15724),o.e(99346),o.e(80187)]).then(o.bind(o,574752))))}},106959:(e,t,o)=>{o.d(t,{jn:()=>a,jq:()=>i,mm:()=>r});var n=o(296540);const r={track(e,t){t(!0)},untrack(e){}},i=(0,n.createContext)(r);function a(){const e=(0,n.useContext)(i),[t,o]=(0,n.useState)(!1),r=(0,n.useRef)(null);return[(0,n.useCallback)((t=>{r.current&&(e.untrack(r.current),r.current=null),t&&(r.current=t,e.track(t,o))}),[e]),t]}i.displayName="IFrameManagerContext"},107041:(e,t,o)=>{o.d(t,{LU:()=>c,Qu:()=>u,SJ:()=>l,ek:()=>s});var n=()=>o(534177),r=()=>o(179034),i=()=>o(519831);(0,n().u0)((e=>e&&e.parent_table===r().ev&&a(e)&&e.format&&e.format.original_url&&!e.format.is_placeholder?{true:e}:{false:e})),(0,n().u0)((e=>{var t,o;return e&&e.parent_table===r().ev&&a(e)&&e.format&&void 0===e.format.original_url&&null!==(t=e.format)&&void 0!==t&&t.external_object_id&&null!==(o=e.format)&&void 0!==o&&o.uri&&!e.format.is_placeholder?{true:e}:{false:e}}));const a=(0,n().u0)((e=>d(e)&&"external_object_instance"===e.type?{true:e}:{false:e})),s=((0,n().u0)((e=>d(e)&&"external_object_instance_page"===e.type?{true:e}:{false:e})),(0,n().u0)((e=>e&&e.parent_table===i().Vl&&d(e)&&"external_object_instance_page"===e.type?{true:e}:{false:e})),(0,n().u0)((e=>{var t;return d(e)?{false:e}:e.parent_table===r().ev&&null!==(t=e.format)&&void 0!==t&&t.original_url&&e.format.external_object_id?{true:e}:{false:e}}))),l=(0,n().u0)((e=>{var t;return d(e)?{false:e}:e.parent_table===r().ev&&null!==(t=e.format)&&void 0!==t&&t.original_url&&!e.format.external_object_id?{true:e}:{false:e}})),c=((0,n().u0)((e=>{var t;return!e||d(e)?{false:e}:e.parent_table===i().Vl&&null!==(t=e.format)&&void 0!==t&&t.external_object_id?{true:e}:{false:e}})),(0,n().u0)((e=>{var t,o;return!e||d(e)?{false:e}:null!=e&&null!==(t=e.format)&&void 0!==t&&t.original_url||null!=e&&null!==(o=e.format)&&void 0!==o&&o.external_object_id||u(e)||p(e)||m(e)?{true:e}:{false:e}}))),d=(0,n().u0)((e=>"type"in e&&e.type?{true:e}:{false:e})),u=(0,n().u0)((e=>{var t,o;return!e||d(e)?{false:e}:null!==(t=e.format)&&void 0!==t&&t.is_placeholder&&null!==(o=e.format)&&void 0!==o&&o.integration_id?{true:e}:{false:e}})),p=(0,n().u0)((e=>d(e)?{false:e}:e.parent_table===i().Vl&&e.format&&e.format.uri&&void 0===e.format.external_object_id&&e.format.integration_id?{true:e}:{false:e})),m=(0,n().u0)((e=>d(e)?{false:e}:e.parent_table===i().Vl&&e.format&&e.format.uri&&void 0===e.format.external_object_id&&void 0===e.format.integration_id?{true:e}:{false:e}))},108066:(e,t,o)=>{o.d(t,{I:()=>c});var n=o(296540),r=()=>o(306631),i=()=>o(645873);const a=new(i().O2)("BlockErrorFallback",(()=>o.e(86774).then(o.bind(o,952670)))),s=(0,i()._h)(a,(e=>e.BlockErrorFallback));var l=o(474848);function c(e){let{blockRef:t,children:o,store:i,type:a}=e;const c=(0,n.useRef)(null);(0,n.useEffect)((()=>{var e;c.current=(null===(e=t.current)||void 0===e||null===(e=e.getNode())||void 0===e?void 0:e.parentElement)||null}),[t]);const d=a||"unknown";return(0,l.jsx)(r().S,{from:`Block.${d}`,fallback:e=>{let{errorId:t}=e;return(0,l.jsx)(s,{errorId:t,store:i,type:a})},getParentEl:()=>c.current,children:o})}},108944:(e,t,o)=>{o.d(t,{$l:()=>G,Cf:()=>Z,E:()=>B,Gg:()=>X,IL:()=>T,IS:()=>R,KA:()=>D,Lf:()=>O,Nq:()=>F,Uo:()=>j,Wo:()=>Q,a4:()=>$,fA:()=>U,fU:()=>N,g7:()=>P,me:()=>H,nR:()=>E,pp:()=>V,rD:()=>J,uj:()=>Y,um:()=>z,yQ:()=>q,yR:()=>W,z4:()=>K,ze:()=>L});o(944114),o(898992),o(823215),o(354520),o(672577),o(803949),o(581454),o(737550);var n=()=>o(700500),r=()=>o(142748),i=()=>o(68263),a=()=>o(813690),s=()=>o(388821),l=()=>o(363497),c=()=>o(912720),d=()=>o(199378),u=()=>o(179034),p=()=>o(63128),m=()=>o(519831),g=()=>o(869558),f=()=>o(343666),v=()=>o(197959),h=()=>o(144081),_=()=>o(123382),b=()=>o(96689),y=()=>o(854150),S=()=>o(496603),w=()=>o(534177),k=()=>o(351360),I=()=>o(630116),A=()=>o(299545);function x(e,t){const{table:o,id:n,spaceId:r}=t,i=r||e.pointer.spaceId;if(o===m().Vl)return I().md.createChildStore(e,{table:m().Vl,id:n});if(o===b().NX)return I().SL.createChildStore(e,{table:b().NX,id:n});if(o===u().ev)return I().Bv.createChildStore(e,{table:u().ev,id:n});if(o===g().Gy)return I().pS.createChildStore(e,{table:g().Gy,id:n,spaceId:i});if(o===f().SN){if(i)return I().jg.createChildStore(e,{table:f().SN,id:n,spaceId:i})}else if(o===v().$Y){if(i)return I().cc.createChildStore(e,{table:v().$Y,id:n,spaceId:i})}else if(o===y().yK){if(i)return I().h4.createChildStore(e,{table:y().yK,id:n,spaceId:i})}else if(o===d().SC){if(i)return I().bx.createChildStore(e,{table:d().SC,id:n,spaceId:i})}else if(o===c().yB){if(i)return I().dn.createChildStore(e,{table:c().yB,id:n,spaceId:i})}else if(o===p().qm&&i)return I().ZI.createChildStore(e,{table:p().qm,id:n,spaceId:i})}function C(e){const t=k().default.state.mainEditorCurrentBlockStore;return t?t.inMemoryRecordCache!==e.inMemoryRecordCache?e:t:e}function T(e){const t=C(e);return((o=e)instanceof I().Bv||o instanceof I().SL||o instanceof I().md||o instanceof I().jg||o instanceof I().cc||o instanceof I().h4||o instanceof I().bx||o instanceof I().dn||o instanceof I().ZI)&&e.getRecordStoreUIParent()===t?e:x(t,e.pointer);var o}const M=new(o(752885).p)({debugName:"getPermissionsPathStores",memoizeRecursion:!0,deepEquals:!1,compute:function(e,t){const n=e.getValue();if(!n||!(0,o(212547).ob)(n))return[e];const r=e instanceof I().Bv&&e.getPermissionsParentPointer()||o(696706).L3.getParentPointerFromRecordWithParent(n),i=x(C(e),r);if(!i)return[e];const a=t(i);return[e].concat(a)}});function P(e){const t=T(e);return t?M.getStateFor(t):[]}function B(e){return S().oE(P(e).map((e=>{if(e.table===b().NX){if(!(0,A().Yu)(e))return;return e.getModel()}if(e.table===u().ev){const{pointer:t}=e,o=(0,I().G_)(e,t,"alive").getValue(),n=(0,I().G_)(e,t,"parent_id").getValue(),r=(0,I().G_)(e,t,"type").getValue();if(void 0!==o&&void 0!==n&&void 0!==r)return e.getModel()}else{if(e.table===y().yK){const{pointer:t}=e;if(!(0,I().G_)(e,t,"settings").getValue())return;return e.getModel()}if(e.table===m().Vl)return e.getModel()}})))}function R(e){const{store:t,teamPermissionItems:o}=e,n=s().RecordMap.create(),r=V(t)||k().default.state.currentSpaceStore;return r&&o.forEach((e=>{const t=I().h4.createChildStore(r,{table:y().yK,id:e.team_id,spaceId:r.id});n.setModel({id:t.id,table:y().yK,spaceId:r.id},t.getModel())})),n}async function E(e){const t=[];return await r().U0(e.pointer,a().ho.fromMonomorphicFunctionUnsafe((async o=>{let n;if(o.table===m().Vl?n=I().md.createChildStore(e,o):o.table===b().NX?n=I().SL.createChildStore(e,o):o.table===u().ev?n=I().Bv.createChildStore(e,o):o.table===g().Gy?n=I().pS.createChildStore(e,o):o.table===f().SN?n=I().jg.createChildStore(e,o):o.table===v().$Y&&(n=I().cc.createChildStore(e,o)),n)return t.push(n),await n.load(),n.getValue()}))),t}function D(e){const t=I().sk.fromV1(e);if(t instanceof I().Bv||t instanceof I().md){const e=t.getParentTable(),o=t.getParentId();if(e&&o){if(e===m().Vl)return I().md.createChildStore(t,{table:m().Vl,id:o});if(e===b().NX)return I().SL.createChildStore(t,{table:b().NX,id:o});if(e===u().ev)return I().Bv.createChildStore(t,{table:u().ev,id:o});if(e===f().SN)return I().jg.createChildStore(t,{table:f().SN,id:o,spaceId:t.getSpaceId()});if(e===y().yK)return I().h4.createChildStore(t,{table:y().yK,id:o});if(e===d().SC)return I().bx.createChildStore(t,{table:d().SC,id:o,spaceId:t.getSpaceId()});if(e===_().MC)return I().vG.createChildStore(t,{table:_().MC,id:o,spaceId:t.getSpaceId()});if(e===g().Gy)return I().pS.createChildStore(t,{table:g().Gy,id:o,spaceId:t.getSpaceId()});if(e===h().zx)return I().K_.createChildStore(t,{table:h().zx,id:o,spaceId:t.getSpaceId()});if(e===p().qm)return I().ZI.createChildStore(t,{table:p().qm,id:o,spaceId:t.getSpaceId()});if(e===l().TF)return I().gP.createChildStore(t,{table:l().TF,id:o,spaceId:t.getSpaceId()});(0,w().HB)(e)}}}function N(e){return P(e).filter(((e,t)=>{if(!e.canRead())return!1;if(e instanceof I().Bv){const o=e.getType();return e.isPostCollectionBlock()?0===t:o&&(0,n().$I)(o)}return e instanceof I().h4}))}function L(e){const t=P(e).find((e=>{let t;return(e instanceof I().Bv||e instanceof I().md)&&(t=e.getAlive()),!1===t}));return Boolean(t)}function F(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const o=N(e)[t];return o instanceof I().h4?F(o,t+1):o}function U(e){return e.findRecordStoreUIAncestor((e=>e instanceof I().Bv&&(0,n().$I)(e.getType()))).ancestor}function O(e){const t=N(e);return t[t.length-1]}function V(e){return P(e).find((e=>e.table===b().NX))}function j(e){const t=P(e);return t.find((e=>e.table===y().yK))}function z(e){return e.find((e=>e.table===y().yK))}function q(e){const t=P(e);if(t.some((e=>e.table===u().ev&&e.isPost())))return t.find((e=>e.table===y().yK))}function H(e){return P(e).find((e=>{var t;return e.table===u().ev&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.isPageTreeCollection())}))}function W(e){for(const t of e)if((t instanceof I().Bv||t instanceof I().md)&&(!t.isDefined()||!t.getAlive()))return!1;return!0}function K(e){for(const t of e)if(t instanceof I().Bv||t instanceof I().md){if(!t.isDefined())continue;if(!t.getAlive())return t}}function G(e){for(const t of e)if(t instanceof I().Bv){if(!t.isDefined())continue;if(t.getPermissionItems().some(i().Ny))return t}}function $(e){return Boolean(K(e))}function Y(e){for(const t of e)if(t instanceof I().Bv){if(!t.isDefined())continue;const e=t.getMovedStore().getValue();if(void 0!==e)return{store:t,moved:e}}}function Q(e){return"block"===e.table||"space"===e.table||"collection"===e.table||"comment"===e.table||"discussion"===e.table||"team"===e.table||"automation_action"===e.table||"automation"===e.table||"skill"===e.table||"collection_view"===e.table||"layout"===e.table||"channel"===e.table||"assistant_chat_session"===e.table}function Z(e){const t=P(e).find((e=>{if(e.table===y().yK)return Boolean(e.getArchivedBy())}));return Boolean(t)}function X(e){const t=P(e);for(const o of t)if(o.table===b().NX)return o.getSettings().space_request}function J(e){const{environment:t,store:o}=e,n=t.currentUser.id;if(!n)return!1;const r=P(o),a=r.every((e=>Boolean(e.isReady())));if(!a)return;const s=!r.some((e=>Boolean(e instanceof I().Bv&&!e.isDefined())));if(!s)return!1;const l=r.some((e=>{if(e instanceof I().Bv){const t=(e.getPermissionItemsStore().getValue()||[]).find((e=>(0,i().FP)(e)||(0,i().Ds)(e)||(0,i().Lg)(e)||(0,i().T$)(e)||(0,i()._d)(e)||(0,i().B2)(e)&&e.user_id!==n));return Boolean(t)}return e instanceof I().h4}));return!l}},109488:(e,t,o)=>{o.d(t,{A:()=>i});var n=()=>o(56366),r=()=>o(79043);function i(e){let{capture:t,render:o}=e;const i=(0,r().A)(t);return(0,n().K8)((()=>o(i)),[i,o])}},110192:(e,t,o)=>{o.d(t,{Q:()=>r,g:()=>i});var n=()=>o(919709);function r(e){const t=i([n().Ey_(e)]);return n().q4_(t)}function i(e){const t=n().q4_(e);if(0===t.trim().length||void 0===e)return[n().Ey_(t)];const o=e[e.length-1];if(n().bHQ(o)){return[...e.slice(0,e.length-1),a(o)]}return[...e,a([""])]}function a(e){const t=e=>`(${e})`,{title:o,digit:r}=function(e){const t=e.trimEnd(),o=t.split(" "),n=function(e){if(e.length<3||!e.startsWith("(")||!e.endsWith(")"))return;const t=e.substring(1,e.length-1),o=parseInt(t);return!Number.isNaN(o)&&o>0&&function(e){return Boolean(e.match(/^[1-9][0-9]*$/))}(t)?o:void 0}(o[o.length-1]);let r=t;if(void 0!==n){const e=o.slice(0,o.length-1).join(" ");r=e.length>0?e:void 0}return{title:r,digit:n}}(e[0]),i=void 0===o?"":`${o.trimEnd()} `,a=t(void 0===r?1:r+1);return n().Ey_(`${i}${a}`)}},110955:(e,t,o)=>{o.d(t,{A:()=>i,r:()=>a});var n=()=>o(757695);class r extends n().default{getInitialState(){return{open:!1}}}const i=new r,a=n().default.createValue(!1)},112069:(e,t,o)=>{o.d(t,{$d:()=>h,EQ:()=>l,FD:()=>b,Fw:()=>y,IM:()=>n,Rh:()=>S,WC:()=>a,_J:()=>f,ae:()=>v,kB:()=>s,o_:()=>_});o(581454),o(814603),o(147566),o(198721);const n={local:"http://localhost:3008",development:"https://integrations-api-dev.notion.com",staging:"https://integrations-api-stg.notion.com",production:"https://integrations-api.notion.com"},r={local:"http://localhost:3000/sip",development:"https://dev.notion.so/sip",staging:"https://stg.notion.so/sip",production:"https://notion.so/sip"},i="/install";function a(e){const{env:t,isServerIntegrationsProxyEnabled:o,integrationPath:a}=e;return`${(o?r:n)[t]}${a}${i}`}const s="/salesforce",l="/user",c="/slack",d="/github",u="/zendesk",p="/jira-data-center",m="/gmail",g="/google-contacts";function f(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:c})}function v(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:d})}function h(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:u})}function _(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:p})}function b(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:m})}function y(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:g})}const S={SECURE_EXTERNAL_PREVIEW:"/preview",APP_AUTHORIZE:"/app/authorize",AUTH_AUTHORIZE:"/auth/authorize"}},112452:(e,t,o)=>{o.d(t,{_:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("undo",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M14.542 10.6826C14.542 7.96875 12.71 6.10254 9.59961 6.10254H5.29297L3.70703 6.1709L4.91016 5.15234L6.67383 3.43652C6.80371 3.30664 6.89258 3.14258 6.89258 2.91699C6.89258 2.5 6.59863 2.19238 6.1543 2.19238C5.96973 2.19238 5.76465 2.28125 5.61426 2.4248L1.69043 6.29395C1.5332 6.4375 1.45117 6.64258 1.45117 6.84766C1.45117 7.05273 1.5332 7.25098 1.69043 7.40137L5.61426 11.2705C5.76465 11.4141 5.96973 11.5029 6.1543 11.5029C6.59863 11.5029 6.89258 11.1953 6.89258 10.7715C6.89258 10.5527 6.80371 10.3887 6.67383 10.252L4.91016 8.53613L3.70703 7.52441L5.29297 7.59277H9.64746C11.8486 7.59277 13.0586 8.84375 13.0586 10.6211C13.0586 12.4053 11.8486 13.7109 9.64746 13.7109H8.05469C7.60352 13.7109 7.2959 14.0459 7.2959 14.4629C7.2959 14.873 7.61035 15.208 8.05469 15.208H9.69531C12.751 15.208 14.542 13.4102 14.542 10.6826Z"})})},112873:(e,t,o)=>{o.d(t,{B4:()=>P,UP:()=>R,xl:()=>B});o(898992),o(354520),o(672577),o(581454);var n=()=>o(908006),r=()=>o(197959),i=()=>o(161479),a=()=>o(496603),s=()=>o(763824),l=()=>o(36088),c=()=>o(938045),d=()=>o(555776),u=()=>o(116008),p=()=>o(186445),m=()=>o(682146),g=()=>o(299545),f=()=>o(953418),v=()=>o(517223),h=()=>o(57618),_=()=>o(129522),b=()=>o(143857),y=()=>o(869562),S=()=>o(644914),w=()=>o(737230),k=()=>o(372154),I=()=>o(546574),A=()=>o(630116),x=()=>o(878523),C=()=>o(778417),T=()=>o(725614);function M(e,t){const o=b().A.find((e=>e.getStore().id===t));o&&(C().IU({preventDismissMobileKeyboard:!0,environment:e}),T().setSelectionAtEnd({store:o.getInputStore().state.textStore}))}async function P(e){var t,f,b;const{environment:P,blockStore:B,analyticsFrom:R,discussionIds:D,shouldFocusDiscussion:N,recursivelyLoadAllDiscussions:L,property_id:F,openFullPropertyDiscussionOnly:U,intl:O}=e;let V=(null==D?void 0:D.map((e=>A().sk.createChildStore(B,{table:r().$Y,id:e,spaceId:(0,i().e)(B.pointer.spaceId)}))))||g().Bw(B,{recursivelyLoadAllDiscussions:L,onlyIncludePropertyDiscussions:Boolean(F)});F&&(V=V.filter((e=>e.getPropertyId()===F)),U&&O&&(V=V.filter((e=>(0,m().q7)(e,O,B,F)))));let{rect:j}=e;const{resolved:z,unresolved:q}=g().uy(V),{commentsDependency:H}=await Promise.resolve().then(o.bind(o,774733)),{discussionHelpers:W}=await H.load(),K=W.sortDiscussionStoresByLatestComment(q.length>0?q:z)||[],G=null==K||null===(t=K[0])||void 0===t?void 0:t.id,$=null==K||null===(f=K[0])||void 0===f?void 0:f.getPropertyId(),{device:Y}=P;Y.isMobile&&"updates_sidebar"!==R&&(C().IU({environment:P}),Y.isIOS&&T().blurActiveElement()),I().A.markDiscussionsInteractedWith(K.map((e=>e.id))),await n().default.afterNextFlush();const Q=(0,S().me)(P);if(B.id===(0,p().s0)()&&void 0===$){if(G){"PageDetailsStore"in P&&P.PageDetailsStore.setToggleState({type:"discussion",id:B.id,environment:P},!0);const e=A().sk.createChildStore(B,{table:r().$Y,id:G,spaceId:(0,i().e)(B.pointer.spaceId)});if((Q||!Q&&N)&&E(G),e.getResolved())if((0,S().me)(P))y().setUpdateSidebarCommentsMode("resolved");else if((0,S().Nk)(P))y().setUpdateSidebarTab(w().tF.Comments),y().setUpdateSidebarCommentsMode("resolved");else{const e=_().K.findBlockFromStoreWithMethod(B,"openResolvedDiscussionPopup");e&&(e.openResolvedDiscussionPopup(),await n().default.afterNextFlush(),E(G))}x().o2(P,{from:R,discussion_id:e.id,discussion_type:e.getType()})}if(!Q)return}if(!j&&!Q&&"margin_comments"!==R){const e=F?h().A.getRect(B,F):_().K.getRect(B);if(!e)return;const t=e.width,o=e.height,n=e.right-t;j=new DOMRect(n,e.top,t,o)}let Z,X=k().c.Open;if(G){var J;Z=A().sk.createChildStore(B,{table:r().$Y,id:G,spaceId:(0,i().e)(B.pointer.spaceId)}),Z.getResolved()&&(X=k().c.Resolved);const e=Boolean(B.isCollectionView()),t=null===(J=B.getAssociatedCollectionStore())||void 0===J?void 0:J.getLayoutStore(),o=Boolean(F&&t&&(0,v().Hc)({layoutStore:t,propertyId:F}).isPropertyInPageDetails);!(0,S().Nk)(P)||w().Ay.state.currentTab!==w().tF.Comments||Z.getResolved()||e||o||y().setUpdateSidebarCommentsMode("unresolved")}else X=k().c.Resolved;if(Y.isMobile&&"updates_sidebar"!==R&&(C().IU({environment:P}),Y.isIOS&&T().blurActiveElement()),k().A.setState({open:!0,rect:j,tab:X,blockStore:B,discussionIds:V.map((e=>e.id)),recursivelyLoadAllDiscussions:L,property_id:F}),x().o2(P,{from:R,discussion_id:G,discussion_type:null===(b=Z)||void 0===b?void 0:b.getType()}),!N)return;const ee=u().A.getDiscussionInputStore();if(d().A.state.overlapsExistingDiscussionMenu&&ee){if(await s().wR(10),await n().default.afterNextFlush(),(0,c().w)({animate:!1}),P.device.isMobile)return;(0,l().M)({discussionInputStore:ee,environment:P})}else if(G){if(await s().wR(10),await n().default.afterNextFlush(),E(G),P.device.isMobile)return;(function(e){var t;const{blockStore:o,discussionIds:n}=e;return k().A.state.open&&k().A.state.blockStore.id===o.id&&a().n4(null===(t=k().A.state)||void 0===t?void 0:t.discussionIds,n)})(e)||M(P,G)}else{if(P.device.isMobile)return;q.length>0&&(await s().wR(10),await n().default.afterNextFlush(),M(P,q[0].id))}}function B(){const e=k().A.state;!u().A.hasContent()&&e.open&&u().A.getBlockStore()===e.blockStore&&d().A.state.overlapsExistingDiscussionMenu&&(u().A.reset(),d().A.reset()),e.open&&k().A.setState({open:!1,rect:e.rect})}function R(){const e=k().A.state;if(e.open&&e.tab===k().c.Open){0===g().O3(e.blockStore,{recursivelyLoadAllDiscussions:!1}).length&&B()}}function E(e){const t=b().A.find((t=>t.getStore().id===e&&!t.isSidebarFormat()&&!t.isMarginFormat()));if(t){const e=t.getNode();if(e&&e.parentElement){const t=Array.from(e.parentElement.children).indexOf(e);f().vq(e,{edgeDist:0===t?0:-1,animate:!1})}}}},112995:(e,t,o)=>{o.d(t,{K:()=>c});var n=o(296540),r=()=>o(445356),i=()=>o(449412),a=()=>o(963589),s=()=>o(403831),l=o(474848);function c(e){let{children:t,disableCapture:o,fallback:c,from:d,onError:u,type:p}=e;const m=(0,n.useRef)(),g=(0,a().X)("enable_error_boundary_debugger");return(0,l.jsx)(r().A,{onError:function(e,t){o||(m.current=i().O8(e,{from:d,type:p||"RenderError",data:{miscDataToConvertToString:t}})),null==u||u({error:e,errorInfo:t,errorId:m.current})},fallback:function(e,t){return c({error:e,errorInfo:t,errorId:m.current})},children:g?(0,l.jsx)(s().q,{name:d,children:t}):t})}},113414:(e,t,o)=>{o.d(t,{g:()=>i});o(296540);var n=()=>o(959013),r=o(474848);function i(e){let{children:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:t||(0,r.jsx)(n().sA,{id:"errorLabel.renderError.fullTextLine1",defaultMessage:"An error has occurred."})}),(0,r.jsx)("span",{children:(0,r.jsx)(n().sA,{id:"errorLabel.renderError.fullTextLine2",defaultMessage:"We’re actively working on a fix."})})]})}},114366:(e,t,o)=>{o.d(t,{Z:()=>r});var n=()=>o(292588);const r={table:o(854150).yK,recordColumnTypes:{id:n().A.UUID,version:n().A.Number,last_version:n().A.Number,space_id:n().A.UUID,name:n().A.String,description:n().A.String,icon:n().A.String,created_time:n().A.Number,created_by_table:n().A.String,created_by_id:n().A.UUID,last_edited_time:n().A.Number,last_edited_by_table:n().A.String,last_edited_by_id:n().A.UUID,archived_by:n().A.UUID,archived_at:n().A.Number,team_pages:n().A.UUIDArray,pinned_pages:n().A.UUIDArray,parent_id:n().A.UUID,parent_table:n().A.String,settings:n().A.JSON,is_default:n().A.Boolean,membership:n().A.JSON,permissions:n().A.JSON},metaColumnTypes:{meta_user_id:n().A.UUID,meta_role:n().A.String}}},115512:(e,t,o)=>{o.d(t,{$t:()=>i,Nb:()=>c,Qg:()=>u,ks:()=>s,nl:()=>d,ny:()=>a,pA:()=>l});o(581454);var n=()=>o(534177),r=()=>o(284371);const i={listStyleType:"none",padding:0,margin:0};r().Wy.regular;function a(e,t){const o="UIRegular"===t?r().J.UIRegular:"UISmall"===t?r().J.UISmall:(0,n().HB)(t);return e.device.isMobile?o.mobile:o.desktop}function s(e,t){const o="UIRegular"===t?r().K_.UIRegular:"UISmall"===t?r().K_.UISmall:(0,n().HB)(t);return e.device.isMobile?o.mobile:o.desktop}function l(e){return{display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:e}}function c(e){let{topLeft:t,topRight:o,bottomLeft:n,bottomRight:r}=e;return[t,o,r,n].map((e=>e?`${e}px`:"0")).join(" ")}function d(e){let{width:t,color:o}=e;if(t>1){const e=(t-.5)/2;return{boxShadow:`0px 0px 0px ${e}px ${o}, inset 0px 0px 0px ${e}px ${o}`,borderWidth:.5,borderColor:o}}return{boxShadow:`0px 0px 0px 0px ${o}, inset 0px 0px 0px 0.5px ${o}`,borderWidth:.5,borderColor:o}}const u={position:"absolute",overflow:"hidden",clip:"rect(1px, 1px, 1px, 1px)",whiteSpace:"nowrap",height:1,width:1}},116008:(e,t,o)=>{o.d(t,{A:()=>s});o(898992),o(354520);var n=()=>o(129522),r=()=>o(301421);class i extends(()=>o(757695))().default{getInitialState(){return{open:!1,rect:o(397248).v_}}hasContent(){if(this.state.open){if("comment"===this.state.content)return Boolean(this.state.discussionInputStore.state.textStore.getValue())||this.state.discussionInputStore.state.files.length>0;if("reaction"===this.state.content)return void 0!==this.state.emoji}}isComposingNewDiscussion(){return!(!this.state.open||"comment"!==this.state.content)&&!!this.hasContent()}getBlockStore(){if(this.state.open&&this.state.blockId){var e;const t=null===(e=n().K.findBlockFromId(this.state.blockId))||void 0===e?void 0:e.getBlockStore();return t&&"comment"===this.state.content&&t!==this.state.lastKnownBlockStore&&this.setState({...this.state,lastKnownBlockStore:t}),t}}isDraftCommentOnValidSelection(){return this.isTextWithCommentStillPresent()&&this.isBlockStillAlive()}getClosestBlockStore(){if(this.state.open&&"comment"===this.state.content){const{node:e,blockStore:t}=o(695625).T.findClosestVisibleParent(this.state.lastKnownBlockStore);return{node:e,parentBlockStore:t}}}getLastKnownBlockStore(){if(this.state.open&&"comment"===this.state.content)return this.state.lastKnownBlockStore}getLastSelectedEditables(){if(this.state.open&&"inline"===this.state.type&&this.state.multiSelection&&"comment"===this.state.content)return this.state.lastEditables.filter((e=>{let{store:t}=e;return t.table===o(179034).ev}))}getDiscussionInputStore(){if(this.state.open&&"comment"===this.state.content)return this.state.discussionInputStore}getType(){if(this.state.open)return this.state.type}getMultiSelection(){if(this.state.open&&"inline"===this.state.type)return this.state.multiSelection}getPropertyId(){if(this.state.open&&"comment"===this.state.content&&this.state.property_id)return this.state.property_id}isPropertyComment(){return Boolean(this.state.open&&"comment"===this.state.content&&this.state.property_id)}shouldShowPropertyComment(){var e;return Boolean(this.isPropertyComment()&&(null===(e=o(351360).default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.isInsideCollection()))}ifPropertyCommentShouldDisplay(){return!this.isPropertyComment()||this.shouldShowPropertyComment()}isPropertyWithDraftDiscussion(e){const{blockId:t,propertyId:o}=e;return!(!t||!o)&&(this.state.open&&"comment"===this.state.content&&this.state.blockId===t&&this.isPropertyComment()&&this.state.property_id===o)}updateRect(){const e=this.getBlockStore();if(!this.state.open||!e||this.isPropertyComment())return;if(e.isType("code"))return;const t=n().K.getRect(e);if(!t)return;const o=this.state.rect.left,r=this.state.rect.width,i=this.state.rect.height;this.setState({...this.state,rect:new DOMRect(o,t.top,r,i)})}calculateMultitextSelection(){if(this.state.open&&"inline"===this.state.type&&this.state.multiSelection&&!this.getPropertyId()){var e,t;const i=this.state.multiSelection.start.store.id,a=null===(e=n().K.findBlockFromId(i))||void 0===e?void 0:e.getBlockStore(),s=null==a?void 0:a.getTitleStore(),l=this.state.multiSelection.end.store.id,c=null===(t=n().K.findBlockFromId(l))||void 0===t?void 0:t.getBlockStore().getTitleStore();if(s&&c){const e=r().n.findEditableWithStore(s),t=r().n.findEditableWithStore(c);if(i===l&&a&&a.isType(o(700500).IA))return;t&&e&&-1===(0,o(507707).A)(t.getNode(),e.getNode())?(this.state.multiSelection.start.store=c,this.state.multiSelection.end.store=c):(this.state.multiSelection.start.store=s,this.state.multiSelection.end.store=c)}}}isBlockStillAlive(){if(this.state.open&&"comment"===this.state.content&&this.state.lastKnownBlockStore){const e=this.state.lastKnownBlockStore.pathIsDead();return e&&this.reset(),!e}}isTextWithCommentStillPresent(){if(!this.state.open||"inline"!==this.state.type)return!0;const e=this.getLastSelectedEditables()??[];if(!e.length)return!1;const t=e[0].store.getValue(),n=o(919709).qAZ(t),r=this.state.multiSelection.start.index>n.length-1;return r&&this.reset(),!r}}const a=new i;(0,o(604341).exposeDebugValue)("NewDiscussionMenuStore",a);const s=a},116225:(e,t,o)=>{o.d(t,{LW:()=>s,u4:()=>l});o(944114);var n=o(296540),r=()=>o(591779),i=()=>o(299917);let a=!1;function s(e){const{isEnabled:t,isLoggedIn:o,userId:s,userEmail:c,spaceId:d,sprigConfig:u,userDaysSinceSignup:p,daysSinceSpaceCreated:m,userDomainType:g,isSpaceAdmin:f,spaceMemberCount:v}=e;(0,n.useEffect)((()=>{if(a=t,!t||!o||void 0===s||void 0===c||void 0===u||void 0===g)return;if(window.Sprig)return;const e=function(){e._queue.push(arguments)};e._queue=[],e.appId=u.environmentId,window.Sprig=e,window.UserLeap=e,window.Sprig("setUserId",s),window.Sprig("setEmail",c),d&&window.Sprig("setAttribute","SPACE_ID",d),v&&window.Sprig("setAttribute","SPACE_MEMBER_COUNT",v),m&&window.Sprig("setAttribute","DAYS_SINCE_SPACE_CREATED",m),window.Sprig("setAttribute","DAYS_SINCE_USER_SIGNUP",p),window.Sprig("setAttribute","USER_DOMAIN_TYPE",g),window.Sprig("setAttribute","IS_SPACE_ADMIN",f),p>=3&&p<=14&&"professional"===g&&l(f?{name:"trigger-phase-1"}:{name:"trigger-phase-1-1"}),(0,i().Ay)("https://cdn.sprig.com/shim.js").catch((e=>{console.error("Error loading Sprig shim",e)}))}),[t,o,s,u,c,d,f,g,p,m,v]);const h=(0,r().ZC)(o);(0,n.useEffect)((()=>{h&&!o&&window.Sprig&&window.Sprig("logoutUser")}),[h,o])}function l(e){const t=e.name,o="args"in e?e.args:{};window.Sprig?window.Sprig("track",t,o):a&&console.warn("Sprig not loaded, not tracking: ",t)}},116652:(e,t,o)=>{o.d(t,{o:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,n.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,n.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},118757:(e,t,o)=>{o.d(t,{Bc:()=>r,ke:()=>i,qG:()=>a});var n=()=>o(720665);function r(e,t){t.startsWith("offline -")?t="offline":t.startsWith("mobileNativeError -")&&(t="mobileNativeError");const o=e[t]||0;e[t]=o+1,e._total+=1}const i=1*n().TD,a=.5*n().TD;n().TD,n().TD},119875:(e,t,o)=>{o.d(t,{R:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("book",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M27,23V1H7C4.791,1,3,2.791,3,5v20c0,2.209,1.791,4,4,4h20v-2h-1v-4H27z M21,3v6l-1-1.333L19,9V3H21z M20,11l3,4V3h2v18H9V3 h8v12L20,11z M5,5c0-1.103,0.896-2,2-2v18c-0.729,0-1.411,0.195-2,0.537V5z M24,27H7c-1.104,0-2-0.896-2-2s0.896-2,2-2h17V27z"})})},120303:(e,t,o)=>{o.d(t,{R:()=>u});var n=o(296540),r=()=>o(401497),i=()=>o(66913),a=()=>o(285790),s=()=>o(972435),l=()=>o(58283),c=()=>o(652617),d=o(474848);function u(e){const{onClick:t,onDismiss:o,style:u,hoveredStyle:m,showBackground:g=!0}=e,f=function(e,t){const o=(0,l().on)();return(0,r().IS)((n=>({button:{alignItems:"center",background:t?n.buttonHoveredBackground:"none",borderRadius:"100%",display:"flex",height:22,justifyContent:"center",position:"absolute",right:10+o,top:10,width:22,zIndex:10,...e},buttonHovered:{background:t?n.buttonPressedBackground:n.buttonHoveredBackground}})),[t,e,o])}(u,g),v=(0,n.useContext)(c().e),h=function(e){const{onClick:t,onDismiss:o}=e,r=(0,n.useCallback)((e=>{null==t||t(e),null==o||o()}),[t,o]);return t||o?r:void 0}({onClick:t,onDismiss:o??v});return h?(0,d.jsx)(a().A,{ariaLabel:s().A.formatMessage(p.dismissModalAriaLabel),icon:i().V,onClick:h,style:f.button,hoveredStyle:{...f.buttonHovered,...m}}):null}const p=(0,o(959013).YK)({dismissModalAriaLabel:{id:"dismiss.dismissButton.label",defaultMessage:"Dismiss"}})},120739:(e,t,o)=>{o.d(t,{a:()=>s});var n=()=>o(498212),r=()=>o(939768),i=()=>o(584262),a=()=>o(569238);function s(e){const{teamId:t,peekInfo:o,baseUrl:s,pageVisitSource:l}=e;let c=s||"";if(c+=`/team/${t}`,!o)return c;const{peekViewBlockId:d,peekMode:u}=o,p={};return p[a().Uu]=n().Xw(d),p.pm=u,l&&(p[i().k3]=String(l)),r().Gm({url:c,query:p})}},122058:(e,t,o)=>{o.d(t,{By:()=>s,S9:()=>u,hp:()=>d,nT:()=>l,uU:()=>i,uu:()=>c,yM:()=>a});o(898992),o(354520),o(581454);var n=()=>o(116225),r=()=>o(989423);function i(e){(0,r().u4)({environment:e.environment,event:{eventName:"open_quick_find",eventProperties:{search_session_id:e.searchSessionId}}}),n().u4({name:"open_quick_find",args:{search_session_id:e.searchSessionId}})}function a(e){(0,r().u4)({environment:e.environment,event:{eventName:"close_quick_find",eventProperties:{search_session_id:e.searchSessionId,opened_time_ms:e.openedTimeMs}}}),n().u4({name:"close_quick_find",args:{search_session_id:e.searchSessionId,opened_time_ms:e.openedTimeMs}})}function s(e){(0,r().u4)({environment:e.environment,event:{eventName:"open_deep_find",eventProperties:{ai_session_id:e.sessionId,search_session_id:e.searchSessionId}}}),n().u4({name:"open_deep_find",args:{ai_session_id:e.sessionId,search_session_id:e.searchSessionId}})}function l(e){const t=Boolean(e.spaceStore.getSettings().enable_ai_training);(0,r().u4)({environment:e.environment,event:{eventName:"quick_find_result",eventProperties:{search_session_id:e.searchSessionId,results:e.results,search_session_flow_number:e.searchSessionFlowNumber,query_length:e.queryLength,query_words:e.queryWords,time_to_result:e.timeToResult,query_if_leap:t?e.query:void 0}}})}function c(e){(0,r().u4)({environment:e.environment,event:{eventName:"deep_find_result",eventProperties:{assistant_session_id:e.assistantSessionId,search_session_id:e.searchSessionId,results:e.results.filter((e=>"microsoftTeams"!==e.type)).map((e=>"block"===e.type||"page"===e.type||"properties"===e.type?{id:"block"===e.type?e.pageId:e.id,source:"notion"}:{id:e.id,source:e.type})).filter(((e,t,o)=>"notion"!==e.source||o.findIndex((t=>"notion"===t.source&&t.id===e.id))===t)),query_length:e.queryLength,query_words:e.queryWords,time_to_result:e.timeToResult}}})}function d(e){const{environment:t}=e;(0,r().u4)({environment:t,event:{eventName:"deep_find_search_results_on_client",eventProperties:{assistant_session_id:e.assistantSessionId,search_session_id:e.searchSessionId,time_since_turn_start_ms:e.timeSinceTurnStartMs}}})}function u(e){(0,r().u4)({environment:e.environment,event:{eventName:"deep_find_begin_ai_answer",eventProperties:{assistant_session_id:e.assistantSessionId,search_session_id:e.searchSessionId,time_since_turn_start_ms:e.timeSinceTurnStartMs}}})}},124672:(e,t,o)=>{o.d(t,{q:()=>a});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454);var n=()=>o(487929),r=()=>o(778781),i=()=>o(36682);function a(e){let{modulesByArea:t,collectionSchema:o,collectionFormat:a}=e;const s=function(e){let{modulesByArea:t,collectionSchema:o,collectionFormat:a}=e;const s=(0,i().Q)(t),l={propertyModule:[],pinnedProperty:[],relationsGroup:[],propertiesGroup:[]},c=new Set(Object.keys(o));for(const i of s)if((0,r().gx)(i))l.propertyModule.push(i.propertyId),c.delete(i.propertyId);else if("normalizedTitleWithIcon"===i.type){l.pinnedProperty.push(...i.propertyIds);for(const e of i.propertyIds)c.delete(e)}else if("relationsGroup"===i.type){const e=(0,n().T)({format:a,schema:o,visibilityLevels:["inline","minimal"]});l.relationsGroup.push(...e.map((e=>e.section)));for(const t of e)c.delete(t.section)}return l.propertiesGroup=Array.from(c),l}({modulesByArea:t,collectionSchema:o,collectionFormat:a}),{propertiesGroup:l,...c}=s;return Object.values(c).flat()}},124952:(e,t,o)=>{o.d(t,{d:()=>r});var n=()=>o(989423);function r(e,t){n().vd(e,"full_screen_action",t)}},125958:(e,t,o)=>{o.d(t,{A:()=>l,T:()=>a});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454);var n=()=>o(496603),r=()=>o(700500),i=()=>o(179034);function a(e,t,o){const r=[];return s(t({table:i().ev,id:e}),t,r,!0,new Set,o),n().sb(r)}function s(e,t,o,n,a,l){if(!e)return;if(a.has(e.id))return;if(a.add(e.id),e.isType(r().wK)&&(o.push(e.id),!l))return;const c=e.getType()===r().xd.transclusionReference&&e.getTransclusionReferenceTargetPointer();c&&s(t(c),t,o,!1,a,l);if(l?n||!(0,r().$I)(e.getType())&&(0,r().IU)(e.getType(),e.getFormat())&&e.hasContent():(n||e.getType()===r().xd.columnList||e.getType()===r().xd.column||e.getType()===r().xd.transclusionContainer||e.getType()===r().xd.callout)&&e.hasContent())for(const r of e.getContentIds())s(t({table:i().ev,id:r}),t,o,!1,a,l)}function l(e){const{headerBlockId:t,headerBlockIds:o,index:a,getRecordModel:s}=e,l=s({table:i().ev,id:t});if(!l)return 0;const c=l.getType(),d=n().oE(o.map((e=>s({table:i().ev,id:e}))));if(c===r().xd.header)return 0;const u=n().Kl(d,((e,t)=>t<a&&e.getType()===r().xd.header));if(c===r().xd.subHeader)return u>=0?1:0;const p=n().Kl(d,((e,t)=>t<a&&e.getType()===r().xd.subHeader));return u>=0&&p>u?2:u>=0||p>=0?1:0}},126126:(e,t,o)=>{o.d(t,{eQ:()=>L,hJ:()=>Z,Ay:()=>F,Uo:()=>j,XE:()=>Y});o(944114),o(898992),o(823215),o(581454);var n=o(296540),r=()=>o(662303),i=()=>o(484714),a=()=>o(56366),s=()=>o(401497),l=()=>o(869190),c=()=>o(641007),d=()=>o(798880),u=()=>o(695608),p=()=>o(959013),m=()=>o(100622),g=()=>o(496603),f=()=>o(620689),v=()=>o(549500),h=()=>o(673657),_=()=>o(745766),b=()=>o(680026),y=()=>o(227440),S=()=>o(77246),w=()=>o(948914),k=()=>o(508496),I=()=>o(630116),A=()=>o(704152),x=()=>o(859428),C=()=>o(125565),T=()=>o(994006),M=()=>o(453697),P=()=>o(941541);const B=function(e){const t=(0,i().v3)(),r=(0,n.useRef)(),a=(0,o(336811).T)(),s=(0,n.useCallback)((async()=>{if(await o(589994).transactionQueue.awaitRecordTransaction(e.blockStore.pointer),!a.current)return;const n=(0,o(921997).Ws)(e.blockStore.id);r.current=P().Ay.addListener(n,void 0,g().nF((()=>o(466721).Ds(t,{blockStore:e.blockStore,pageVisitStore:e.pageVisitStore,incremental:!0,limit:e.limit})),1e3),void 0,t)}),[t,a,e.blockStore,e.limit,e.pageVisitStore]),l=(0,n.useCallback)((()=>{r.current&&(P().Ay.removeListener(r.current,t),r.current=void 0)}),[t]);return(0,n.useEffect)((()=>(s(),l)),[s,l]),null};var R=o(474848);const E=5,D=25,N=6,L=22;const F=function(e){let{pageVisitStore:t,presenceStore:o,rootStore:n,maxUsers:r}=e;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(v().a0,{rootStore:n}),(0,R.jsx)(Z,{rootStore:n,pageVisitStore:t,presenceStore:o,maxUsers:r,isShowingInPostFeed:!1}),(0,R.jsx)(B,{blockStore:n,pageVisitStore:t,limit:1+O(r)+D})]})};function U(e){return g().Ul(e,(e=>e.activityTimestampNearestMinuteMs))}function O(e){return e??E}function V(e,t){return I().LU.createChildStore(t,{table:d().oo,id:e})}function j(e){const{environment:t,isShowingTabBar:o,isShowingInPostFeed:n}=e;return{...(0,_().g)({noDrag:t.device.isElectron&&!o}),display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginLeft:4+N,paddingRight:N,transform:"translateZ(0)",...n&&{maxHeight:54,paddingBottom:12}}}function z(e){return{color:e.text.contrastSecondary,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em"}}function q(e){let{userData:t,isPresent:o,rootStore:n,isShowingInPostFeed:c}=e;const d=(0,s().DP)(),m=(0,i().v3)(),g=(0,p().tz)(),f=m.currentUser.id,v=(0,a().K8)((()=>V(t.userId,n)),[t,n]),h=(0,a().K8)((()=>v.isDefined()),[v]),_=(0,a().K8)((()=>(0,u().c6)(g,v.getModel())),[g,v]),b=(0,a().K8)((()=>v.getEmail()),[v]);if(!h)return null;let y;return o?f!==v.id&&(y=t.blockId&&!c?(0,R.jsx)(p().sA,{defaultMessage:"Viewing now. Click to see where they are.",id:"topbar.presenceIndicator.viewingNowWithLocation.tooltip"}):(0,R.jsx)(p().sA,{defaultMessage:"Viewing now",id:"topbar.presenceIndicator.viewingNow.tooltip"})):f!==v.id&&t.activityTimestampNearestMinuteMs&&(y=(0,R.jsx)(p().sA,{defaultMessage:"Last viewed {timeFromNow}",id:"topbar.presenceIndicator.lastViewedTime.tooltip",values:{timeFromNow:(0,l().v9)(Math.min(t.activityTimestampNearestMinuteMs,Date.now()),r().locale)}})),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"notranslate",children:_}),(0,R.jsx)("div",{style:{fontWeight:400},children:b}),y&&(0,R.jsx)("div",{style:{color:d.text.contrastSecondary,minWidth:150,paddingTop:2,paddingBottom:2,lineHeight:1.3},children:y})]})}function H(e){let{userData:t,index:o,rootStore:n}=e;const c=(0,s().DP)(),d=(0,i().v3)(),u=(0,b().dp)(d,t),p=(0,a().K8)((()=>V(t.userId,n)),[t,n]);if(!(0,a().K8)((()=>p.isDefined()),[p]))return null;let m;!u&&t.activityTimestampNearestMinuteMs&&(m=(0,l().v9)(t.activityTimestampNearestMinuteMs,r().locale));const g=(0,R.jsxs)("div",{style:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},children:[(0,R.jsx)(T().A,{userStore:p,avatarSize:18,style:{flexGrow:1}}),(0,R.jsx)("div",{style:{marginLeft:"auto",paddingLeft:12,textAlign:"right",flexShrink:1,color:c.text.contrastSecondary},children:m})]});if(u&&t.blockId){const e=t.blockId;return(0,R.jsx)(A().A,{onClick:()=>f().BL([e],!0,d),style:{display:"flex",alignItems:"center"},children:g})}return(0,R.jsx)("div",{style:{display:"flex",alignItems:"center"},children:g})}function W(e){let{hiddenUsers:t,hiddenUsersCount:o,hasMore:n,rootStore:r}=e;return(0,R.jsx)(x().A,{allowHover:!0,originGap:7,renderTooltip:e=>(0,R.jsx)(K,{hiddenUsers:t,hiddenUsersCount:o,hasMore:n,rootStore:r,events:e}),render:e=>(0,R.jsx)(G,{hiddenUsersCount:o,events:e})})}function K(e){let{hiddenUsers:t,hiddenUsersCount:o,hasMore:n,rootStore:r,events:a}=e;const l=(0,s().DP)(),c=(0,i().v3)(),d=[],u=[];for(const i of t)(0,b().dp)(c,i)?d.push(i):u.push(i);const m=u.slice(0,D-d.length),g=o-(d.length+m.length);return(0,R.jsxs)("div",{...a,children:[d.length>0&&(0,R.jsxs)("div",{style:{marginBottom:4},children:[(0,R.jsx)(C().A,{style:z(l),children:(0,R.jsx)(p().sA,{defaultMessage:"Viewing now",id:"topbar.presenceIndicator.hiddenUsers.viewingNow.tooltip"})}),d.map(((e,t)=>(0,R.jsx)(H,{userData:e,index:t,rootStore:r},t)))]}),m.length>0&&(0,R.jsxs)("div",{style:{marginBottom:4},children:[(0,R.jsx)(C().A,{style:{...z(l)},children:(0,R.jsx)(p().sA,{defaultMessage:"Last viewed by",id:"topbar.presenceIndicator.hiddenUsers.lastViewedBy.tooltip"})}),m.map(((e,t)=>(0,R.jsx)(H,{userData:e,index:t,rootStore:r},t)))]}),(0,R.jsx)($,{remainingHiddenUsersCount:g,hasMore:n})]})}function G(e){let{hiddenUsersCount:t,events:o}=e;const n=(0,s().IS)((e=>({origin:{color:e.mediumTextColor,fontSize:14,marginLeft:2*N,marginRight:-N,whiteSpace:"nowrap"}})),[]);return(0,R.jsx)("div",{style:n.origin,...o,children:(0,R.jsx)(p().sA,{defaultMessage:"{hiddenUsersCount, plural, one {+{hiddenUsersCount}} other {+{hiddenUsersCount}}}",id:"topbar.presenceIndicator.hiddenUsers.otherCount.message",values:{hiddenUsersCount:t}})})}function $(e){let{hasMore:t,remainingHiddenUsersCount:o}=e;const n=(0,s().IS)((e=>({message:{marginLeft:2,marginTop:2,color:e.text.contrastSecondary}})),[]);return o>0?(0,R.jsx)("div",{style:n.message,children:t?(0,R.jsx)(p().sA,{defaultMessage:"{remainingVisitorsCount}+ more…",id:"topbarPresence.presenceIndicator.hiddenUsers.evenMoreUsersNotViewing.tooltip",values:{remainingVisitorsCount:o}}):(0,R.jsx)(p().sA,{defaultMessage:"{remainingVisitorsCount} more…",id:"topbarPresence.presenceIndicator.hiddenUsers.moreUsersNotViewing.tooltip",values:{remainingVisitorsCount:o}})}):null}function Y(e,t){return(0,s().IS)((o=>{const n={width:L,height:L,borderRadius:L},r=e(o);return{button:{transition:"all 0.2s ease",transform:"scale(1)"},buttonHovered:{transform:"scale(1.15)",background:"none"},buttonPressed:{transform:"scale(0.9)",background:"none"},uiUserAvatarStyles:{...n},avatarInnerOutline:{...n,outlineStyle:"solid",outlineColor:o.UIUserAvatarInnerOutline,outlineWidth:.5,outlineOffset:-.5},avatarBorder:t?{...n,outlineStyle:"solid",outlineColor:r,outlineWidth:1.5,outlineOffset:-.5}:{},avatarOuterOutline:{...n,outlineStyle:"solid",outlineColor:t?o.UIUserAvatarOuterOutline:o.UIUserAvatarIdleOutline,outlineWidth:.5,outlineOffset:t?1:0,marginRight:-6,position:"relative"},initialColor:{color:t?r:o.icon.secondary}}}),[e,t])}function Q(e){const{userData:t,rootStore:o,isShowingInPostFeed:r=!1}=e,s=(0,i().v3)(),{userId:l}=t,u=(0,b().dp)(s,t),{userStore:p,showAvatar:g}=(0,a().K8)((()=>{if((0,d().MF)(l))return{userStore:c().px,showAvatar:!0};const e=V(l,o);return{userStore:e,showAvatar:(e.isDefined()||(0,d().MF)(e.id))&&!e.getIsSuspended()}}),[l,o]),v=Y((0,n.useCallback)((e=>l===s.currentUser.id?e.UIUserAvatarSelfBorder:(0,m().Nq)(l,e)),[s.currentUser.id,l]),u);return g?(0,R.jsx)(x().A,{disableTooltip:r,textWrap:!0,renderTooltip:()=>(0,R.jsx)(q,{rootStore:o,userData:t,isPresent:u,isShowingInPostFeed:r}),render:e=>{const o=(0,R.jsx)("div",{style:v.avatarOuterOutline,children:(0,R.jsx)("div",{style:v.avatarBorder,children:(0,R.jsx)(M().A,{iconStyle:v.avatarInnerOutline,userStore:p,style:v.uiUserAvatarStyles,isOffline:!u,size:L,avatarShouldShowShadow:!r,initialOverrideStyle:v.initialColor})})});if(u&&t.blockId){const n=t.blockId;return(0,R.jsx)(A().A,{...e,onClick:()=>f().BL([n],!0,s),style:v.button,hoveredStyle:v.buttonHovered,pressedStyle:v.buttonPressed,children:o})}return(0,R.jsx)("div",{...e,children:o})}}):null}function Z(e){const{rootStore:t,pageVisitStore:o,presenceStore:n,maxUsers:r,isShowingInPostFeed:s}=e,l=(0,i().v3)(),u=l.currentUser.id,p=(0,a().K8)((()=>{const e=l.currentUser.id;if(!e)return;const i=s||(0,b().xm)(n)?(0,b().PZ)({pageVisitStore:o,presenceStore:n}):[];let a=(null==o?void 0:o.state.totalCount)??i.length;const d=[],u=[];for(const t of i)t.userId!==e?(0,b().dp)(l,t)?d.push(t):u.push(t):a--;k().default.checkGate({gateName:"ai_co_editing"})&&"ai_co_editing"===S().Uv.getMode(t,!0)&&d.push({userId:c().px.id,present:!0});const p=[...U(d).reverse(),...U(u).reverse()],m=O(r)-1;return{visibleUsers:p.slice(0,m),hiddenUsers:p.slice(m),totalCount:a,hasMore:Boolean(null==o?void 0:o.state.hasMore)}}),[o,n,l,s,r,t],{useDeepEqual:!0}),{visibleUsers:m,hiddenUsers:g,hiddenUsersCount:f,hasMoreHiddenUsers:_,isEveryUserStoreReady:I}=(0,a().K8)((()=>{if(!u)return{};const{visibleUsers:e=[],hiddenUsers:o=[]}=p??{},n=[u,...e.map((e=>e.userId)),...o.map((e=>e.userId))].map((e=>V(e,t)));return{visibleUsers:e,hiddenUsers:o,hiddenUsersCount:Number(null==p?void 0:p.totalCount)-e.length,hasMoreHiddenUsers:Boolean(null==p?void 0:p.hasMore),isEveryUserStoreReady:n.every((e=>e.isReady()||(0,d().MF)(e.id)))}}),[u,p,t]),A=(0,a().K8)((()=>Boolean(w().A.state.isShowingTabBar)),[]),x=(0,h().useIsDictatingToPage)(t),C=(0,a().K8)((()=>!y().A.state.online),[]);if(!u||!p||!I||C)return null;if(0===m.length&&0===g.length)return x?(0,R.jsx)("div",{style:j({environment:l,isShowingTabBar:A,isShowingInPostFeed:s}),children:(0,R.jsx)(v().hq,{enableClickToScroll:!0,rootStore:t})}):null;{const e=[...m];return e.reverse(),(0,R.jsxs)("div",{style:j({environment:l,isShowingTabBar:A,isShowingInPostFeed:s}),children:[f>0&&(0,R.jsx)(W,{rootStore:t,hiddenUsers:g,hiddenUsersCount:f,hasMore:_}),e.map((e=>(0,R.jsx)(Q,{userData:e,rootStore:t},e.userId))),!s&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Q,{rootStore:t,userData:{userId:u,present:!0}}),(0,R.jsx)(v().hq,{enableClickToScroll:!0,rootStore:t})]})]})}}},126380:(e,t,o)=>{o.d(t,{G:()=>i});var n=()=>o(645873);const r=new(n().O2)("codeBlockValue",(()=>o.e(69734).then(o.bind(o,849332)))),i=(0,n()._h)(r,(e=>e.CodeBlockValueWithDeps))},126818:(e,t,o)=>{o.d(t,{g:()=>n});const n=(0,o(340498).xh)("checkmarkCircle",{default:{loader:()=>o.e(6637).then(o.bind(o,706637))},small:{loader:()=>o.e(31343).then(o.bind(o,331343))},mini:{loader:()=>o.e(78369).then(o.bind(o,878369))},large:{loader:()=>o.e(18183).then(o.bind(o,18183))}})},127097:(e,t,o)=>{o.d(t,{H:()=>u,s:()=>d});o(814603),o(147566),o(198721);var n=()=>o(825237),r=()=>o(187174),i=()=>o(780054),a=()=>o(351360),s=()=>o(227440),l=()=>o(670631),c=()=>o(554894);async function d(e,t){var o;if(!e)return;const r=(0,n().MU)(e,i().A.domainBaseUrl);if(!s().A.state.online)return;if(!(0,c().C)())return;const d=null===(o=a().default.state.mainEditorCurrentBlockStore)||void 0===o||null===(o=o.getNavigableBlockStore())||void 0===o?void 0:o.id;if(!d)return;if(d in(l().A.state.offlinePages??{}))try{if((await fetch(r,{mode:"same-origin",cache:"only-if-cached"})).ok)return}catch(u){try{await fetch(r)}catch(u){return}}}function u(e,t){const[o]=(0,r().Yb)((async()=>{if(!e)return;const t=(0,n().MU)(e,i().A.domainBaseUrl);if(!s().A.state.online&&(0,c().C)())try{const e=await fetch(t,{cache:"force-cache"});if(!e.ok)return;const o=await e.blob(),n=URL.createObjectURL(o);if(n)return n}catch(o){return}}),[e],{});if("resolved"===o.status)return o.value}},128265:(e,t,o)=>{o.d(t,{G:()=>a,n:()=>s});var n=o(296540),r=()=>o(484714),i=()=>o(449506);async function a(e){const t=await i().callApi({eventName:"getExternalOrgData",environment:e,data:{}});if("failed"===t.type)return!1;const o=t.data;return!(!(n=o)||!("company_employee_count"in n))&&parseInt(n.company_employee_count)>99;var n}function s(){const e=(0,r().v3)(),[t,o]=(0,n.useState)(void 0);return(0,n.useEffect)((()=>{a(e).then((e=>{o(e)})).catch((()=>{}))}),[e]),!!t}},128427:(e,t,o)=>{o.d(t,{Y:()=>i});var n=()=>o(989423),r=()=>o(476492);function i(e){const{environment:t,collectionContextStore:o,...i}=e,a=(0,r().sl)(o)||{};n().vd(t,"convert_db_complete",{...a,...i})}},128713:(e,t,o)=>{o.d(t,{qh:()=>B,q5:()=>P,N8:()=>T,oV:()=>S,TG:()=>y,uY:()=>G,Z4:()=>$,V$:()=>Y,ZR:()=>H,Qw:()=>C});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(430670),o(581454);var n=o.n(o(625473)),r=()=>o(496603),i=()=>o(534177),a=()=>o(319954),s=()=>o(700500),l=()=>o(713998),c=()=>o(869190),d=()=>o(315771),u=()=>o(683259),p=()=>o(777447),m=()=>o(792071),g=()=>o(179034);var f=()=>o(335098),v=()=>o(343666),h=()=>o(798880),_=()=>o(919709),b=()=>o(695608);function y(e){const t=_()._XS(e);return"a"===t?"[":"b"===t?"**":"i"===t?"*":"c"===t?"`":"s"===t?"~~":"e"===t?"$":""}function S(e,t,o){const n=_()._XS(e);if(_().sh$(e)){const n=_().cQR(e),r=(0,p().lX)({...o,url:n});return`](${(r?t({toPageId:r}):n)||""})`}return"b"===n?"**":"i"===n?"*":"c"===n?"`":"s"===n?"~~":"e"===n?"$":""}function w(e){const{annotation:t,exportArgs:o}=e,{getRecordValue:n,userTimeZone:r,getExportedPathToPage:a,intl:s,transformAnnotation:l}=o,d=m().b4_.fromGetRecordValueFn(n);if(l){const e=l(t,o);if("string"==typeof e)return e}if(_().rie(t)){const e=_().NcG(t),o=n({table:h().oo,id:e});return`@${(0,b().c6)(s,o)}`}if(_().jIt(t)){const e=_().v55(t),r=n({table:g().ev,id:e});if(r){return`[${C({block:r,exportArgs:o})}](${a({toPageId:e})})`}}else if(_().nNl(t)){const e=_().qS0(t);var p;if(e)return null===(p=d(e))||void 0===p?void 0:p.getRenderTitle()}else{if(_().rDy(t)){var f;const e=_().ZrY(t),r=n({table:v().SN,id:e,spaceId:o.root.spaceId});return null==r||null===(f=r.text)||void 0===f?void 0:f.toString()}if(_().qsB(t)){const{date_format:e,time_format:n,...i}=_().K7D(t);return(0,c().ZF)({value:i,date_format:e,time_format:n,userTimeZone:r,allowRelativeDates:!1,intl:o.intl})}if(_().gir(t))return _().U35(t);if(_().RaC(t)){const e=(0,u().Pf)({annotation:t,exportArgs:o});if(e)return e}else if(_().JCc(t)){var y;if("everyone"===(null===(y=_().FLg(t))||void 0===y?void 0:y.mentionType))return"everyone";const e=(0,u().nZ)({annotation:t,exportArgs:o});if(e)return e}else{if(_().N53(t)){var S;const e=_().T$c(t);return null===(S=n({table:g().ev,id:e,spaceId:o.root.spaceId}))||void 0===S||null===(S=S.format)||void 0===S?void 0:S.original_url}if(_().bZo(t))return"";if(_().ik2(t)){const{href:e}=_().q1R(t);return e}if(_().jcO(t)||_().sh$(t)||_().S4U(t)||_().iQL(t)||_().I1e(t)||_().XkZ(t)||_().jIt(t)||_().EQ8(t)||_().YuY(t)||_().rlz(t)||_().go0(t)||_().lfl(t)||_().tI_(t)||_().iz3(t)||_().s1Y(t)||_().Qmu(t)||_().Si1(t)||_().fL_(t)||_().$ch(t)||_().zpJ(t))return;(0,i().HB)(t)}}}function k(e){const t=/^\s+/.exec(e);return t?t[0]:""}function I(e){const t=/\s+$/.exec(e);return t?t[0]:""}function A(e){const t=I(e);return t.length>0?e.slice(0,-1*t.length):e}function x(e){const t=k(e);return e.slice(t.length)}function C(e){const{block:t,exportArgs:o}=e;return H({textValue:_().RQ(m().Bj6.fromBlock(t).getProperties().title),exportArgs:o})}function T(e){const{block:t,exportArgs:o}=e,{getRecordValue:n}=o,i=t&&t.content?t.content:[];return r().oE(i.map((t=>V({block:n({table:g().ev,id:t}),exportArgs:{...o,blockId:t},visitedBlock:e.visitedBlock}))))}function M(e){return e.split("\n")}function P(e){const{block:t,exportArgs:o}=e,n=_().RQ(m().Bj6.fromBlock(t).getProperties().caption);return n.length>0?[{text:H({textValue:n,exportArgs:o}),breakLines:!0,children:[]}]:[]}function B(e){const{block:t,exportArgs:o}=e;return H({textValue:_().RQ(m().Bj6.fromBlock(t).getProperties().caption),exportArgs:o})}function R(e){var t;const{block:o,exportArgs:n}=e;return{text:C({block:o,exportArgs:n}),prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!0,children:T(e)}}function E(e){return{text:"",breakLines:!0,children:T(e)}}function D(){}function N(e){var t;const{block:o,exportArgs:n}=e;return{text:`# ${C({block:o,exportArgs:n}).trim()}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!0,children:T(e)}}function L(e){var t;const{block:o,exportArgs:n}=e;return{text:`- ${C({block:o,exportArgs:n}).trim()}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!1,childrenPrefix:j,children:T(e)}}function F(e){const{block:t,exportArgs:o}=e,{getExportedRenderAsset:n}=o,{source:r}=m().Bj6.fromBlock(t).getProperties(),i=_().q4_(r),a=n({fromBlockId:o.blockId,toFileURI:i});return{text:`[${B(e)||C({block:t,exportArgs:o})||a}](${a})`,breakLines:!0,children:P(e)}}function U(e){const{block:t,exportArgs:o}=e,{getRecordValue:n,getExportedPathToPage:r,userTimeZone:i,intl:a}=o;if("collection_view"===t.type||"collection_view_page"===t.type){return{text:`[${(0,u()._z)({blockId:t.id,getRecordValue:n,userTimeZone:i,intl:a})}](${r({toPageId:t.id,exportFileExt:".csv"})})`,breakLines:!0,children:[]}}}const O={text:R,encrypted_text:R,header:N,sub_header:function(e){var t;const{block:o,exportArgs:n}=e;return{text:`## ${C({block:o,exportArgs:n}).trim()}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!0,children:T(e)}},sub_sub_header:function(e){var t;const{block:o,exportArgs:n}=e;return{text:`### ${C({block:o,exportArgs:n}).trim()}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!0,children:T(e)}},quote:function(e){var t;const{block:o,exportArgs:n}=e;return{text:`> ${C({block:o,exportArgs:n}).trim()}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!0,childrenPrefix:"> ",children:T(e)}},bulleted_list:L,toggle:L,to_do:function(e){var t;const{block:o,exportArgs:n}=e;let r;return r=l().wu(m().Bj6.fromBlock(o).getProperties().checked)?"- [x] ":"- [ ] ",{text:`${r} ${C({block:o,exportArgs:n}).trim()}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!1,childrenPrefix:j,children:T(e)}},numbered_list:function(e){var t;const{block:o,exportArgs:n}=e,{getRecordValue:i}=n;return{text:`${function(e){const{block:t,getRecordValue:o}=e,n=t.parent_id,i=n?o({table:g().ev,id:n}):void 0;let a;var l;a=i?r().oE(null===(l=i.content)||void 0===l?void 0:l.map((e=>o({table:g().ev,id:e})))):[];const c=r().SL(a,(e=>e.id===t.id)),d=r().di(a,0,c),u=r().Kl(d,(e=>e.type!==s().xd.numberedList));return d.length-(u+1)}({block:o,getRecordValue:i})+1}. ${C({block:o,exportArgs:n})}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!1,childrenPrefix:j,children:T(e)}},code:function(e){var t;const{block:o,exportArgs:n}=e,r=C({block:o,exportArgs:n});return{text:`${`\`\`\`${o.properties&&o.properties.language?function(e){const t=_().q4_(e);if(!t)return"";const o=f().y[t];return void 0===o||o===f().y["Plain Text"]?"":o}(o.properties.language):""}\n${M(r).join("\n")}\n\`\`\``}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!0,children:[]}},page:function(e){const{block:t,exportArgs:o}=e;if(t.id===o.navigableBlockId&&!o.renderParentBlockId)return N(e);const{getExportedPathToPage:n}=o;return{text:`[${C({block:t,exportArgs:o})}](${n({toPageId:t.id})})`,breakLines:!0,children:[]}},image:function(e){const{block:t,exportArgs:n}=e,{getExportedRenderAsset:r}=n,{source:i}=m().Bj6.fromBlock(t).getProperties(),a=_().q4_(i),s=r({fromBlockId:n.blockId,toFileURI:a}),l=function(e){const{block:t,exportArgs:o}=e;return H({textValue:_().RQ(m().Bj6.fromBlock(t).getProperties().alt_text),exportArgs:o})}(e)||B(e)||C({block:t,exportArgs:n});return{text:(0,o(304740).rS)({url:a})?`![${l}](${s})`:`[${l}](${s})`,breakLines:!0,children:P(e)}},video:F,embed:F,bookmark:function(e){const{block:t,exportArgs:o}=e,{link:n}=m().Bj6.fromBlock(t).getProperties(),r=l().MO(n);return{text:`[${C({block:t,exportArgs:o})}](${r})`,breakLines:!0,children:P(e)}},file:F,external_object_instance:function(e){var t;const{block:o}=e,n=null===(t=o.format)||void 0===t?void 0:t.original_url;if(n)return{text:`[${n}](${n})`,breakLines:!0,children:[]}},tweet:F,maps:F,gist:F,framer:F,invision:F,mixpanel:F,drive:function(e){const{block:t}=e;if(t.format&&t.format.drive_properties){const{url:e,title:o}=t.format.drive_properties;return{text:`[${o}](${e})`,breakLines:!0,children:[]}}return F(e)},figma:F,loom:F,pdf:F,typeform:F,codepen:F,audio:F,divider:function(){return{text:"---",breakLines:!0,children:[]}},equation:function(e){var t;const{block:o,exportArgs:n}=e;let r="";return o&&o.properties&&o.properties.title&&(r=_().q4_(o.properties.title)),{text:`$$\n${r}\n$$`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!0,children:[]}},collection_view:U,collection_view_page:U,column_list:E,column:E,factory:D,personal_home_page:D,form:D,post:D,copy_indicator:D,breadcrumb:D,link_to_collection:D,link_to_page:D,callout:function(e){var t,n;const{block:r,exportArgs:i}=e,a=C({block:r,exportArgs:i}),s=null===(t=r.format)||void 0===t?void 0:t.page_icon;return{text:`${(0,o(945778).A)(s)?s:"string"==typeof s?function(e){let{source:t,width:o=40,exportArgs:n}=e;const{getExportedRenderAsset:r}=n,i=r({fromBlockId:n.blockId,toFileURI:t});return`<img src="${i}" alt="${i}" width="${o}px" />`}({source:s,exportArgs:i}):""} ${a}`.trim(),prefix:null===(n=i.getPrefixForBlock)||void 0===n?void 0:n.call(i,r),breakLines:!0,children:T(e),htmlTag:"aside"}},table_of_contents:D,whimsical:F,miro:F,abstract:F,sketch:F,excalidraw:F,replit:F,hex:F,deepnote:F,alias:function(e){const{block:t,exportArgs:n}=e,{getRecordValue:r}=n;if(t.format&&t.format.alias_pointer&&(0,o(696706).Yt)(t.format.alias_pointer,g().ev)){const o=r(t.format.alias_pointer);if(o)return V({block:o,exportArgs:{...n,renderParentBlockId:t.id,blockId:t.format.alias_pointer.id},visitedBlock:e.visitedBlock})}},slide:E,transclusion_container:E,transclusion_reference:function(e){const{block:t,exportArgs:o}=e,{getRecordValue:n}=o;if(t.format&&t.format.transclusion_reference_pointer){const r=n(t.format.transclusion_reference_pointer);if(r)return V({block:r,exportArgs:{...o,renderParentBlockId:t.id,blockId:t.format.transclusion_reference_pointer.id},visitedBlock:e.visitedBlock})}},table:function(e){var t,o;const{block:n,exportArgs:r}=e,{getRecordValue:i}=r,a=(null===(t=n.format)||void 0===t||null===(t=t.table_block_column_order)||void 0===t?void 0:t.length)||0,s=n.content,l={text:"",breakLines:!0,children:[]};if(0===a||!s)return l;const c=s.map((t=>{const o=i({table:g().ev,id:t});return o&&V({block:o,exportArgs:{...r,blockId:t,renderParentBlockId:n.id},visitedBlock:e.visitedBlock})||l})),d={text:`| ${[...Array(a).keys()].map((()=>"---")).join(" | ")} |`,breakLines:!1,children:[]};return{text:"",prefix:null===(o=r.getPrefixForBlock)||void 0===o?void 0:o.call(r,n),breakLines:!0,children:[c[0],d,...c.slice(1)]}},table_row:function(e){var t,o;const{block:n,exportArgs:r}=e,{getRecordValue:i,renderParentBlockId:a}=r;if(!a)return;const s=i({table:g().ev,id:a}),c=null==s||null===(t=s.format)||void 0===t?void 0:t.table_block_column_order;if(!c)return;return{text:`| ${c.map((t=>{const o=l().yQ(n,t);return o?H({textValue:o,exportArgs:e.exportArgs}):void 0})).join(" | ")} |`,prefix:null===(o=r.getPrefixForBlock)||void 0===o?void 0:o.call(r,n),breakLines:!1,children:[]}},tab:function(e){var t;const{block:o,exportArgs:n}=e,{getRecordValue:i}=n;return{text:`${r().oE(null===(t=o.content)||void 0===t?void 0:t.flatMap((e=>{const t=i({table:g().ev,id:e});if(t)return[C({block:t,exportArgs:n}),q(T({block:t,exportArgs:n})).trim()]}))).join("\n\n")}\n\t\t`,breakLines:!0,children:[]}},external_object_instance_page:D,button:D,ai_block:E,drawing:D,workflow:D,transcription:D,person_profile:D};function V(e){const{block:t,forceRenderAsText:o,exportArgs:{transformBlockMapping:n}}=e;if(t&&t.type){if(e.visitedBlock){if(e.visitedBlock.has(t.id))return;e.visitedBlock.add(t.id)}const r=o&&(0,s().Db)(t.type,t.format)?(null==n?void 0:n.text)??O.text:(null==n?void 0:n[t.type])??O[t.type];if(r)return r(e)}}const j="    ";function z(e){const t=e.indexOf(" ");return-1===t?[e,""]:[e.slice(0,t),e.slice(t+1)]}function q(e){let t="";for(const o of e){o.breakLines&&(t+="\n"),o.prefix&&(t+=`${o.prefix}`),o.htmlTag&&(t+=`<${o.htmlTag}>\n`),o.text&&(t+=`${o.text}\n`),o.breakLines&&(t+=o.childrenPrefix?`${o.childrenPrefix}\n`:"\n");let e=q(o.children);const n=o.childrenPrefix;if(e&&n){const t=M(e);e=[...t.slice(0,-1).map((e=>{if(o.prefix){const[t,o]=z(e);return t+n+o}return n+e})),...t.slice(-1)].join("\n")}t+=`${e}`,o.htmlTag&&(t+=`</${o.htmlTag}>\n\n`),o.suffix&&(t+=`${o.suffix}\n\n`)}return t=t.replace(/[\n]{3,}/g,"\n\n"),t}function H(e){const{textValue:t,exportArgs:o}=e;let s="";const l=_().RQ(t);let c=[];for(const p of l){const e=a().r.normalize(_().uPN(p)),t=(0,d().H)(c,e,(e=>n()(e))),l=_().N8A(p),u=e.map((e=>w({annotation:e,exportArgs:o}))).find((e=>(0,i().O9)(e))),m=u??l,g=I(s);s=A(s),t.deleted.reverse();for(const n of t.deleted)s+=S(n,o.getExportedPathToPage,o);s+=g,s+=k(m);for(const o of t.created)s+=y(o);s+=x(m);c=[...r().kP(c,e,((e,t)=>r().n4(e,t))),...t.created]}const u=I(s);s=A(s),c.reverse();for(const n of c)s+=S(n,o.getExportedPathToPage,o);return s+=u,s}function W(e,t){const o=(new e).match(t)||[];if(0===o.length)return t;let n="",r=0;for(const i of o){const e=0===i.index||"<"!==t[i.index-1],o=i.lastIndex===t.length||">"!==t[i.lastIndex],a=Boolean(t.slice(i.index).match(/^[a-z][a-z]+:/i)),s=e&&o&&a;n+=t.slice(r,i.index),s&&(n+="<"),n+=i.raw,s&&(n+=">"),r=i.lastIndex}return n+=t.slice(r),n}function K(e){return e.replace(/\\/g,"\\\\")}function G(e){const{MarkdownIt:t,LinkifyIt:o,markdown:n,plugin:r,disable:i,options:a}=e,s=new t({linkify:!0,...a});return i&&s.disable(i,!1),r&&s.use(r),s.render(K(W(o,n)))}function $(e){const{MarkdownIt:t,LinkifyIt:o,markdown:n,plugin:r}=e,i=new t({linkify:!0});return r&&i.use(r),i.renderInline(K(W(o,n)))}function Y(e,t){const o=new Set;return q(r().oE(e.map((e=>V({block:e,exportArgs:{...t,blockId:e.id},visitedBlock:o}))))).trim()}},129522:(e,t,o)=>{o.d(t,{K:()=>r});o(898992),o(354520),o(672577);class n extends(()=>o(959180))().A{findBlockFromStore(e){return this.find((t=>t.getBlockStore()===e))}findAllBlocksFromStore(e){return this.filter((t=>t.getBlockStore()===e))}findBlockFromStoreWithMethod(e,t){return this.find((o=>o.getBlockStore()===e&&"function"==typeof o[t]))}findBlockFromId(e){return this.find((t=>{const o=t.getBlockStore();return o&&o.id===e}))}findNodeFromStore(e){const t=this.findBlockFromStore(e);if(t)return t.getNode()}getRect(e){const t=this.findNodeFromStore(e);if(t&&t instanceof Element)return t.getBoundingClientRect()}findCollectionViewBlockFromStore(e){return this.find((t=>t.getBlockStore()===e&&("collection_view"===t.renderedType||"collection_view_page"===t.renderedType)&&"collectionContextStore"in t))}findCollectionViewBlockFromId(e){return this.find((t=>{var o;return Boolean((null===(o=t.getBlockStore())||void 0===o?void 0:o.id)===e&&("collection_view"===t.renderedType||"collection_view_page"===t.renderedType)&&"collectionContextStore"in t)}))}}const r=new n;(0,o(604341).exposeDebugValue)("GlobalBlockRegistry",r)},130382:(e,t,o)=>{o.d(t,{Mn:()=>a,YH:()=>s,jX:()=>r,lH:()=>i});var n=()=>o(720665);const r=(0,o(959013).YK)({year:{id:"timeUtils.durationDescriptor.intervalYear",defaultMessage:"{numYears, plural, one {1 year} other {{numYears} years}}"},week:{id:"timeUtils.durationDescriptor.intervalWeek",defaultMessage:"{numWeeks, plural, one {1 week} other {{numWeeks} weeks}}"},day:{id:"timeUtils.durationDescriptor.intervalDay",defaultMessage:"{numDays, plural, one {1 day} other {{numDays} days}}"},hour:{id:"timeUtils.durationDescriptor.intervalHour",defaultMessage:"{numHours, plural, one {1 hour} other {{numHours} hours}}"},minute:{id:"timeUtils.durationDescriptor.intervalMinute",defaultMessage:"{numMinutes, plural, one {1 minute} other {{numMinutes} minutes}}"},second:{id:"timeUtils.durationDescriptor.intervalSecond",defaultMessage:"{numSeconds, plural, one {1 second} other {{numSeconds} seconds}}"}});function i(e,t){const o=Math.floor(e/n().Gq),i=Math.floor(e/n().lG),a=Math.floor(e/n().nD),s=Math.floor(e/n().pT),l=Math.floor(e/n().Xb),c=Math.floor(e/n().TD);return o>=1?t.formatMessage(r.year,{numYears:o}):i>=1?t.formatMessage(r.week,{numWeeks:i}):a>=1?t.formatMessage(r.day,{numDays:a}):s>=1?t.formatMessage(r.hour,{numHours:s}):l>=1?t.formatMessage(r.minute,{numMinutes:l}):t.formatMessage(r.second,{numSeconds:c})}function a(e){return Math.floor((Date.now()-e)/864e5)}function s(e){return Math.floor((Date.now()-e)/6e4)}},131448:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(941795);class n extends(()=>o(757695))().default{getInitialState(){return{messages:new Map,forcedMessages:new Set}}isVisible(e){return void 0!==this.state.messages.get(e)}isForced(e){return this.state.forcedMessages.has(e)}getMessagesForPlacement(e){return Array.from(this.state.messages.values()).filter((t=>(0,o(722559).Q3)(t)===e))}addMessage(e,t){const o=new Map(this.state.messages);o.set(e.key,e);const n=new Set(this.state.forcedMessages);t&&n.add(e.key),this.setState({messages:o,forcedMessages:n})}removeMessage(e){const t=new Map(this.state.messages),o=new Set(this.state.forcedMessages);o.has(e)&&o.delete(e),t.has(e)&&t.delete(e),this.setState({messages:t,forcedMessages:o})}emptyMessages(){return this.state.messages.values().filter((e=>"empty"===e.type)).toArray()}}const r=new n},131581:(e,t,o)=>{o.d(t,{Ju:()=>O,VN:()=>V,en:()=>F,p6:()=>U});o(898992),o(672577),o(814603),o(147566),o(198721);var n=()=>o(908006),r=()=>o(700500),i=()=>o(304740),a=()=>o(522419),s=()=>o(861017),l=()=>o(179034),c=()=>o(869558),d=()=>o(919709),u=()=>o(496603),p=()=>o(449506),m=()=>o(780054),g=()=>o(97270),f=()=>o(186445),v=()=>o(943846),h=()=>o(906537),_=()=>o(129522),b=()=>o(110955),y=()=>o(351360),S=()=>o(176106),w=()=>o(508496),k=()=>o(375447),I=()=>o(630116),A=()=>o(502438),x=()=>o(292167),C=()=>o(437219),T=()=>o(541372),M=()=>o(443120),P=()=>o(896628),B=()=>o(222299),R=()=>o(246826),E=()=>o(797265),D=()=>o(606952),N=()=>o(317909),L=()=>o(62287);function F(e){const t=e.getRecordStoreAtRootPath();return t instanceof I().Bv&&void 0!==t.getAssociatedCollectionStore()}function U(e){const{environment:t,textStore:o,url:n,oldTextValue:r,urlSelection:a}=e;if(b().A.state.open||g().A.state.open||k().A.state.open||S().A.state.open||F(o)&&i().Vp({url:n,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName}))return;const s=h().get();if(!s)return;const l=h().getRect(s);if(!l)return;const c=()=>{S().A.setState({open:!0,willOpen:!1,loading:!1,textStore:o,url:n,oldTextValue:r,urlSelection:a,selectionRect:l}),C().wQ(t,{url:n})},d=w().default.checkGate({gateName:"mobile_embed_menu_cursor_fix"});!t.device.isTablet&&d?(S().A.setState({open:!1,willOpen:!0,loading:!1}),setTimeout(c,0)):c()}async function O(e){const{environment:t}=e,o=S().A.state;if(o.open){const{url:b,textStore:w,oldTextValue:k}=o,F=A().default.state.stores,U=F[0];if(!U)return;const O=(0,a().pc)({source:b,secureFileConfigRootpath:m().A.secureFileConfig.rootPath,secureFileConfigHostname:m().A.secureFileConfig.hostname}),V=O?O.link:b,j=(0,s().parseRoute)({url:V,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,isMobile:t.device.isMobile,protocol:m().A.protocol,currentUrl:window.location.href});if((0,s().Jx)(j))await N().createAndCommitAsync({environment:t,userAction:"embedMenuActions.embedPageAlias",waitForServerCommit:!1,perform:async r=>{let i;if(D().KY({environment:t,store:w,value:k,transaction:r}),j.peekViewBlockId){const e=I().Bv.createChildStore(w,{table:l().ev,id:j.peekViewBlockId});await e.load(),e.isPageBlock()&&(i=e)}if(!i&&"page"===j.name&&j.blockId&&(i=I().Bv.createChildStore(w,{table:l().ev,id:j.blockId})),i){const a="page"===j.name?j.scrollToBlockId:void 0,s="page"===j.name?j.collectionViewId:void 0;if("mention-page"===e.type){const e=i.getRecordModel({id:i.id,table:l().ev});D().Gf({environment:t,editorMode:"default",store:w,selection:{startIndex:o.urlSelection.startIndex,endIndex:o.urlSelection.startIndex},annotation:d().ld4(a??i.id,null==e?void 0:e.space_id),transaction:r,analyticsFrom:"block"})}else if("create-transclusion"===e.type){if(!a)return;T().Ce({environment:t,blocks:A().default.state.stores,copiedBlockIds:[a]})}else if(i.isCollectionView()){const e=s?I().pS.createChildStore(i,{table:c().Gy,id:s}):void 0;await Promise.all([i.load(),e?e.load():void 0]);const o=e?e.getCollectionStore():i.getCollectionStore();o&&(await o.load(),B().oT({environment:t,store:U,collectionStore:o,collectionViewStore:e,transaction:r}))}else{const o=U.getParentBlockStore();if(o){const n=x().s({environment:t,parentBlockStore:o,targetStore:i,transaction:r,..."page-preview"===e.type&&{isPagePreview:!0}});E().LE({environment:t,blocksToInsert:[n],target:F,transaction:r,replaceEmptyTextBlock:!0}),"form"===e.type&&(A().default.reset(),C().ol(t,{url:b,type:e.type,form_id:i.id,block_id:n.id}))}}n().default.afterNextFlush((()=>{N().createAndCommit({userAction:"embedMenuActions.accept",environment:t,canUndo:!0,perform:e=>{E().um({blocks:F,transaction:e})}})}))}}});else if(e.type===r().xd.bookmark||"teamsInvite"===j.name){const{performResult:e}=N().createAndCommit({userAction:"embedMenuActions.insertedBlocks",environment:t,canUndo:!0,perform:e=>{var o;D().KY({environment:t,store:w,value:k,transaction:e});const n=R().Wv({environment:t,type:r().xd.bookmark,inMemoryRecordCache:U.inMemoryRecordCache,transaction:e,spaceId:0!==F.length?F[F.length-1].pointer.spaceId:null===(o=(0,f().ZO)())||void 0===o?void 0:o.pointer.spaceId}),i=E().LE({environment:t,blocksToInsert:[n],target:F,transaction:e,replaceEmptyTextBlock:!0});return P().zA({stores:[n],transaction:e,update:{bookmark_loading_ttl:Date.now()}}),i}});n().default.afterNextFlush((()=>{N().createAndCommit({userAction:"embedMenuActions.accept",environment:t,canUndo:!0,perform:e=>{E().um({blocks:F,transaction:e})}})}));const o=e[0];"teamsInvite"===j.name?await M().Ht({environment:t,store:o,url:b,teamId:j.teamId}):await M().Ht({environment:t,store:o,url:b})}else if(e.type===r().xd.drive){const{performResult:e}=N().createAndCommit({userAction:"embedMenuActions.insertedBlocks",environment:t,canUndo:!0,perform:e=>{var o;D().KY({environment:t,store:w,value:k,transaction:e});const n=R().Wv({environment:t,type:r().xd.drive,inMemoryRecordCache:U.inMemoryRecordCache,transaction:e,spaceId:0!==F.length?F[F.length-1].pointer.spaceId:null===(o=(0,f().ZO)())||void 0===o?void 0:o.pointer.spaceId});return E().LE({environment:t,blocksToInsert:[n],target:F,transaction:e,replaceEmptyTextBlock:!0})}});n().default.afterNextFlush((()=>{N().createAndCommit({userAction:"embedMenuActions.accept",environment:t,canUndo:!0,perform:e=>{E().um({blocks:F,transaction:e})}})}));const o=e[0];n().default.afterNextFlush((()=>{const e=_().K.find((e=>e.getBlockStore()===o));e&&e.initializeGoogleDriveBlockFromUrl(b)}))}else if("link-mention"===e.type){var i,g;S().A.setState({open:!1,willOpen:!1,loading:!0});const e=await p().callApi({eventName:"getDataForLinkMention",environment:t,data:{url:V,spaceId:(null===(i=y().default.state.currentSpaceStore)||void 0===i?void 0:i.id)??(null===(g=y().default.state.mainEditorCurrentBlockStore)||void 0===g?void 0:g.getSpaceId()),source:"link_mention_activate"}});if("success"===e.type){const n=e.data;if("error"in n){const e=d().wmz(d().gru({href:b,title:b.includes("mailto:")?b:new URL(b).hostname}));N().createAndCommit({environment:t,userAction:"embedMenuActions.mention",canUndo:!0,perform:n=>{D().jQ({environment:t,store:w,selection:{startIndex:o.urlSelection.startIndex,endIndex:o.urlSelection.endIndex},transaction:n}),D().yr({environment:t,store:w,tokens:[e],index:o.urlSelection.startIndex,transaction:n})}}),C().vt(t,{domain:b.includes("mailto:")?b:new URL(b).hostname})}else{var h;const{title:e,description:r,author_name:i,provider_name:a,images:s,favicon_url:l,iframe:c,height:u,padding:p,padding_top:m}=n,g=d().wmz(d().gru({href:b,title:e||(a||new URL(b).hostname),description:r,link_author:i,link_provider:a,thumbnail_url:s&&s.length>0?null===(h=s[0])||void 0===h?void 0:h.url:void 0,icon_url:l,iframe_url:b.includes("nytimes.com")?void 0:c,height:u,padding:p,padding_top:m}));N().createAndCommit({environment:t,userAction:"embedMenuActions.mention",canUndo:!0,perform:e=>{D().jQ({environment:t,store:w,selection:{startIndex:o.urlSelection.startIndex,endIndex:o.urlSelection.endIndex},transaction:e}),D().yr({environment:t,store:w,tokens:[g],index:o.urlSelection.startIndex,transaction:e})}})}}else{const e=d().wmz(d().gru({href:b,title:b.includes("mailto:")?b:new URL(b).hostname}));N().createAndCommit({environment:t,userAction:"embedMenuActions.mention",canUndo:!0,perform:n=>{D().jQ({environment:t,store:w,selection:{startIndex:o.urlSelection.startIndex,endIndex:o.urlSelection.endIndex},transaction:n}),D().yr({environment:t,store:w,tokens:[e],index:o.urlSelection.startIndex,transaction:n})}}),C().vt(t,{domain:b.includes("mailto:")?b:new URL(b).hostname})}}else{const{performResult:o}=N().createAndCommit({userAction:"embedMenuActions.insertedBlocks",environment:t,canUndo:!0,perform:e=>{var o;D().KY({environment:t,store:w,value:k,transaction:e});const n=R().Wv({environment:t,type:r().xd.copyIndicator,inMemoryRecordCache:U.inMemoryRecordCache,transaction:e,spaceId:0!==F.length?F[F.length-1].pointer.spaceId:null===(o=(0,f().ZO)())||void 0===o?void 0:o.pointer.spaceId});return E().LE({environment:t,blocksToInsert:[n],target:F,transaction:e,replaceEmptyTextBlock:!0})}});n().default.afterNextFlush((()=>{N().createAndCommit({userAction:"embedMenuActions.accept",environment:t,canUndo:!0,perform:e=>{E().um({blocks:F,transaction:e})}})}));const i=o[0],a=o=>{N().createAndCommit({environment:t,userAction:"embedMenuActions.accept.insertExtractedData",canUndo:!0,perform:t=>{let n;e.type&&"mention-page"!==e.type&&"create-transclusion"!==e.type&&"link-mention"!==e.type&&"page-preview"!==e.type&&"jira-sync"!==e.type?n=e.type:(n=r().xd.embed,o&&o.media&&("photo"===o.media.type?n=r().xd.image:"video"===o.media.type&&(n=r().xd.video))),L().pd({environment:e.environment,block:i,blockType:n,transaction:t})}}),n().default.afterNextFlush((()=>{const e=_().K.find((e=>e.getBlockStore()===i&&u().Tn(e.embed)));e&&e.embed(V)}))};v().DB(t,V).then(a)}}V()}function V(){S().A.setState({open:!1,willOpen:!1,loading:!1})}},132867:(e,t,o)=>{o.d(t,{BO:()=>v,MQ:()=>m,Y1:()=>f,b:()=>p,mE:()=>b,oJ:()=>h,pZ:()=>g,v6:()=>_});o(944114),o(898992),o(354520),o(672577),o(581454);var n=()=>o(700500),r=()=>o(179034),i=()=>o(496603),a=()=>o(186445),s=()=>o(494043),l=()=>o(695625),c=()=>o(65269),d=()=>o(468484),u=()=>o(722101);function p(e){const{parentStore:t,blockStore:o,type:n,transaction:r}=e,i=t.getTransclusionReferenceTargetStore()??t,a=i.getContentStores(),l=a.indexOf(o);if(l<=0)return;const c=a[l-1];if(!c)return;if(!y(i)||!y(c))return;if("transclusion_container"===c.getType()||"transclusion_reference"===c.getType()||c.isCalloutV2())return;u().TF({parentStore:i.getContentStore(),childToRemoveStore:o,transaction:r});const{childStore:p}=u().BC({parentStore:c.getContentStore(),appendStore:o,transaction:r});if("self"===n&&!p.isType("table"))for(const s of p.getContentStores().reverse())u().TF({parentStore:p.getContentStore(),childToRemoveStore:s,transaction:r}),u().WH({parentStore:c.getContentStore(),insertStore:s,afterStore:p,transaction:r});return s().BN(c)&&d().A.setOpen(c.id,!0),p}function m(e){const{grandparentStore:t,parentStore:o,blockStore:n,transaction:r}=e,i=t.getTransclusionReferenceTargetStore()??t;if(i.getContentStores().indexOf(o)<0)return;const a=o.getContentStores(),s=a.indexOf(n);if(s<0)return;if(!y(i)||!y(o))return;if("transclusion_container"===o.getType()||"transclusion_reference"===o.getType()||o.isCalloutV2())return;if(y(n))for(let c=s+1;c<a.length;c++){const e=a[c];u().TF({parentStore:o.getContentStore(),childToRemoveStore:e,transaction:r}),u().BC({parentStore:n.getContentStore(),appendStore:e,transaction:r})}u().TF({parentStore:o.getContentStore(),childToRemoveStore:n,transaction:r});const{childStore:l}=u().WH({parentStore:i.getContentStore(),insertStore:n,afterStore:o,transaction:r});return l}function g(e){const{transaction:t}=e,o=e.blocks,n=o[0];if(!n)return;const r=S(n);if(!r)return;const{previousChildStore:i}=r,a=i.getContentStore();return s().BN(i)&&d().A.setOpen(i.id,!0),o.map((e=>{const o=e.getRecordStoreUIParent();null!=o&&o.valueIs(c()._)&&u().TF({parentStore:o,childToRemoveStore:e,transaction:t});return u().BC({parentStore:a,appendStore:e,transaction:t}).childStore}))}function f(e){const{transaction:t}=e;let o=e.blocks;const n=o[0];if(!n)return;const r=w(n);if(!r)return;const{parentBlockStore:a,grandparentBlockStore:s}=r,l=a.getContentStores(),d=s.getContentStore();if(l){let e;for(const[t,n]of l.entries())if(n.id===o[o.length-1].id){e=l.splice(t+1);break}o=i().o8(o).reverse(),o=o.map(((o,n)=>{const r=o.getRecordStoreUIParent();null!=r&&r.valueIs(c()._)&&u().TF({parentStore:r,childToRemoveStore:o,transaction:t});const i=u().WH({parentStore:d,insertStore:o,afterStore:a,transaction:t});if(0===n&&e&&y(o))for(const a of e){const e=a.getRecordStoreUIParent();null!=e&&e.valueIs(c()._)&&u().TF({parentStore:e,childToRemoveStore:a,transaction:t}),u().WH({parentStore:o.getContentStore(),insertStore:a,transaction:t})}return i.childStore}))}return o}function v(e){const{transaction:t,blocks:o}=e,n=o[0];if(!n)return;const r=a().ZO();if(!r)return;const s=I(r),l=i().SL(s,(e=>e.parentStore===n.getRecordStoreUIParent()&&e.afterStore===n)),c=i().Kl(s,((e,t)=>t<l&&e.parentStore===n.getRecordStoreUIParent())),d=i().Uk(s,((e,t)=>t<c&&!n.uiContains(e.parentStore)));return d?x({blocks:o,listPosition:d,transaction:t}):void 0}function h(e){const{transaction:t,blocks:o}=e,n=i().HV(o);if(!n)return;const r=a().ZO();if(!r)return;const s=I(r),l=i().SL(s,(e=>e.parentStore===n.getRecordStoreUIParent()&&e.afterStore===n)),c=s.find(((e,t)=>t>l&&!n.uiContains(e.parentStore)));return c?x({blocks:o,listPosition:c,transaction:t}):void 0}function _(e){return Boolean(e&&S(e))}function b(e){return Boolean(e&&w(e))}function y(e){const t=a().ao(),o=e.getType(),r=e.getFormat();return o&&((0,n().Z3)(o,r)||e===t||e.isPost())}function S(e){const t=e.getRecordStoreUIParent();if(null==t||!t.isTable(r().ev))return;const o=t.getAncestorRecordStoreAtRootPath();if(null==o||!o.isDefined()||!y(o))return;const n=o.getContentStores(),i=n[n.indexOf(e)-1];return null!=i&&i.isDefined()&&y(i)?{previousChildStore:i}:void 0}function w(e){const t=e.getRecordStoreUIParent();if(null==t||!t.isTable(r().ev))return;const o=t.getAncestorRecordStoreAtRootPath();if(null==o||!o.isDefined()||!y(o))return;const n=o.getRecordStoreUIParent();if(null==n||!n.isTable(r().ev))return;const i=n.getAncestorRecordStoreAtRootPath();return null!=i&&i.isDefined()&&y(i)?{parentBlockStore:o,grandparentBlockStore:i}:void 0}function k(e,t){let o=[];const{store:n}=e.props;if(e.props.canDropAbove&&A(n)){const e=n.getRecordStoreUIParent();null!=e&&e.valueIs(c()._)&&o.push({parentStore:e})}const r=t.filter((t=>t.getContextClosestSelectable()===e));for(const a of r)o=i().KC(o,k(a,t));if(e.props.canDropBelow&&A(n)){const e=n.getRecordStoreUIParent();null!=e&&e.valueIs(c()._)&&(e.id===n.id?o.push({parentStore:e}):o.push({parentStore:e,afterStore:n}))}return o}function I(e){let t=[];const o=l().T.getMembersByDOMOrder({filter:()=>!0}),n=e.getContentStores();for(const r of n){const e=o.find((e=>e.props.store===r));e&&(t=i().KC(t,k(e,o)))}return t}function A(e){return"collection"!==e.getParentTable()}function x(e){const{blocks:t,listPosition:o,transaction:n}=e,r=i().o8(t).reverse();for(const i of t){const e=i.getRecordStoreUIParent();null!=e&&e.valueIs(c()._)&&u().TF({parentStore:e,childToRemoveStore:i,transaction:n})}let a;return a=o.afterStore?r.map((e=>u().WH({insertStore:e,afterStore:o.afterStore,parentStore:o.parentStore,transaction:n}).childStore)):r.map((e=>u().Hs({prependStore:e,parentStore:o.parentStore,transaction:n}).childStore)),a}},133033:(e,t,o)=>{o.d(t,{$:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("help",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 13.7383C4.85547 13.7383 2.33301 11.209 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.667 4.91992 13.6738 8.06445C13.6738 11.209 11.1445 13.7383 8 13.7383ZM7.84277 9.4248C8.21875 9.4248 8.45801 9.21289 8.47852 8.93262C8.47852 8.90527 8.47852 8.87109 8.47852 8.85059C8.49902 8.49512 8.74512 8.25586 9.18945 7.96875C9.85938 7.52441 10.2969 7.13477 10.2969 6.3418C10.2969 5.2002 9.27148 4.55078 8.06152 4.55078C6.89258 4.55078 6.09277 5.08398 5.88086 5.72656C5.83984 5.84277 5.81934 5.95898 5.81934 6.08203C5.81934 6.41016 6.0791 6.61523 6.35254 6.61523C6.60547 6.61523 6.76953 6.5127 6.90625 6.32812L7.01562 6.19141C7.24121 5.81543 7.56934 5.61719 7.97949 5.61719C8.5332 5.61719 8.90918 5.94531 8.90918 6.41016C8.90918 6.84082 8.62207 7.05273 8.04102 7.45605C7.55566 7.79102 7.2002 8.14648 7.2002 8.76855V8.84375C7.2002 9.22656 7.43262 9.4248 7.84277 9.4248ZM7.83594 11.5234C8.27344 11.5234 8.63574 11.2021 8.63574 10.7715C8.63574 10.3408 8.27344 10.0264 7.83594 10.0264C7.3916 10.0264 7.03613 10.3477 7.03613 10.7715C7.03613 11.2021 7.39844 11.5234 7.83594 11.5234Z"})})},133234:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(20489).A)},134060:(e,t,o)=>{o.d(t,{t:()=>i});var n=()=>o(989423),r=()=>o(476492);function i(e,t){const{collectionContextStore:o}=t.optionalAnalyticsProperties||{},i=(0,r().sl)(o)||{},a={from:t.from,block_types:t.draggedTypes,block_count:t.draggedTypes.length,as_copy:t.asCopy||!1,draggable:t.draggableProps,dropzone:t.dropzoneProps,...i};n().vd(e,"drag",a)}},134103:(e,t,o)=>{o.d(t,{t:()=>c});var n=()=>o(56366),r=()=>o(584262),i=()=>o(868840),a=()=>o(492414),s=()=>o(747100),l=()=>o(712505);function c(e){const{scrollToBlockId:t,pageStore:o,isFloatingToc:c}=e,d=(0,n().K8)((()=>Boolean(o&&(0,s().cq)(o))),[o]),u=(0,n().K8)((()=>l().default.getPeekMode()),[]);return{href:(0,n().K8)((()=>{if(void 0!==o&&void 0!==t)return(0,a().J8)({store:o,scrollToBlockId:t,fullyQualified:!1,pageVisitSource:c?r().y8.PageTableOfContents:r().y8.LinkInPage,openInSidePeek:d&&u===i().A,openInCenterPeek:d&&u===i().O})}),[d,c,o,u,t]),replaceHistoryState:!0}}},134206:(e,t,o)=>{o.d(t,{A:()=>i});o(898992),o(354520),o(581454);var n=()=>o(854150);class r extends(()=>o(757695))().default{getInitialState(){return{initialized:!1}}createTeamStoreFromCache(e){let{environment:t,teamId:r,spaceId:i,userId:a}=e;if(this.state.initialized&&i&&a&&this.state.spaceId===i&&this.state.userId===a)return new(o(95758).h)(t,{table:n().yK,id:r},{inMemoryRecordCache:this.state.inMemoryCache})}initialize(e){let{environment:t,userId:r,spaceId:i,teamIds:a,getRecordWithRole:s}=e;const l=new(o(221844).A)({name:"GlobalEnterpriseAdminTeamsStore"});for(const o of a){const e={table:n().yK,id:o};l.setRecord({pointer:e,userId:r},s(e))}return this.setState({initialized:!0,spaceId:i,userId:r,inMemoryCache:l}),a.map((e=>this.createTeamStoreFromCache({environment:t,teamId:e,spaceId:i,userId:r}))).filter(o(534177).O9)}}const i=new r},134217:(e,t,o)=>{o.d(t,{$:()=>te,$C:()=>j,BA:()=>C,Be:()=>re,Bl:()=>Q,EX:()=>H,Fq:()=>T,GU:()=>pe,L:()=>ne,LM:()=>G,Nl:()=>z,RJ:()=>x,Si:()=>W,TQ:()=>Y,Th:()=>J,V$:()=>se,XK:()=>A,Ye:()=>ee,Zt:()=>X,_7:()=>ie,cG:()=>M,cs:()=>q,dW:()=>E,e9:()=>ae,eF:()=>k,eq:()=>F,fk:()=>ce,hr:()=>V,jK:()=>L,mG:()=>$,n:()=>D,o2:()=>U,oC:()=>B,oe:()=>Z,pt:()=>le,qC:()=>de,qc:()=>I,r8:()=>oe,vl:()=>P,xk:()=>R,z8:()=>N});o(944114),o(898992),o(354520),o(581454),o(296540);var n=()=>o(68263),r=()=>o(326215),i=()=>o(322769),a=()=>o(762433),s=()=>o(643819),l=()=>o(807487),c=()=>o(979340),d=()=>o(959013),u=()=>o(780054),p=()=>o(600871),m=()=>o(351360),g=()=>o(57605),f=()=>o(21735),v=()=>o(975971),h=()=>o(843757),_=()=>o(749240),b=()=>o(807778),y=()=>o(10984),S=o(474848);const w=.75,k=1;function I(e){return"subscribed_admin"===(null==e?void 0:e.type)||"unsubscribed_admin"===(null==e?void 0:e.type)}function A(e){if(I(e))return e}function x(e){var t;const o=null===(t=A(e))||void 0===t||null===(t=t.customerData)||void 0===t?void 0:t.stripe;if(function(e){return void 0!==e.plan}(o))return o}function C(e){var t;return null===(t=A(e))||void 0===t||null===(t=t.customerData)||void 0===t?void 0:t.stripe}function T(e){return Boolean(e&&"unsubscribed_admin"!==e.type&&"unsubscribed_member"!==e.type&&"unsubscribed_guest"!==e.type)}function M(e){return!T(e)}function P(e){return!ue(e,["personal","student","personal_free"])}function B(e){const t=x(e),o=t?t.plan:void 0;return Boolean(o&&r().xd.includes(o))}function R(e){const t=x(e),o=t?t.plan:void 0;return Boolean(o&&r().iV.includes(o))}function E(){return(0,y().jR)()}function D(e,t){return t===(0,y().AI)()}function N(e,t,o,n){const r=(0,b().Km)(n),i=(0,b().qp)();return!(!(0,y().dL)()||1===n)&&(!!(r&&null!==i&&i>=0)||Q(e,t,o,n)>=w)}function L(e,t,o,n){return Q(e,t,o,n)>=w}async function F(e){const{environment:t,userRootStore:o}=e;if(!o)return[];return(await Promise.all(o.getAdminSpaceIds().map((e=>g().A.awaitData(t,{spaceId:e}))))).map((e=>(0,a().AI)(e)??"free"))}function U(e){const t=x(e);return"unsubscribed_admin"===e.type||"unsubscribed_member"===e.type?e.accountBalance:t?t.accountBalance:0}function O(e,t,o,n){return(0,y().dL)()&&n>1}function V(e,t,o,n){return M(o)&&O(0,0,0,n)?o.blockUsage:0}function j(e,t,o,n){return O(0,0,0,n)?Math.max(0,(0,c().lP)()-V(0,0,o,n)):void 0}function z(e,t){const{currentUserStore:o}=m().default.state,n=null!=o&&o.isDefined()?o.getEmail():void 0;return e.temporaryBillingEmail||(null==t?void 0:t.email)||n}function q(e){const{currentUserStore:t}=m().default.state,o=null!=t&&t.isDefined()?null==t?void 0:t.getEmail():void 0;return(null==e?void 0:e.email)??o}function H(e){return e||"month"}function W(e){return!!(0,y().dL)()&&((0,p().mM)({environment:e})?"personal":"plus")}function K(e){const{memberCount:t,subscriptionTier:o,addOnFeature:n,isAddOnFeature:r,billingInterval:i,coupon:a}=e,s=function(e){const{subscriptionTier:t,addOnFeature:o,isAddOnFeature:n}=e;if(!u().A.pricing)return;if(n&&void 0!==o)return u().A.pricing[o].productId;const r=u().A.pricing[t];if("productId"in r)return r.productId}({subscriptionTier:o,addOnFeature:n,isAddOnFeature:r});let l,c,d;return s===u().A.pricing.ai.productId?(l=u().A.pricing.ai.yearlyPricePerMember,c=u().A.pricing.ai.monthlyPricePerMember,"ai_fifty_percent"===a&&(l-=4800,c-=500),d="year"===i?l*t:c*t):s===u().A.pricing.personal.productId?(l=u().A.pricing.personal.yearlyPrice,c=u().A.pricing.personal.monthlyPrice,d="year"===i?l:c):s===u().A.pricing.plus.productId?(l=u().A.pricing.plus.yearlyPricePerMember,c=u().A.pricing.plus.monthlyPricePerMember,d="year"===i?l*t:c*t):s===u().A.pricing.business.productId?(l=u().A.pricing.business.yearlyPricePerMember,c=u().A.pricing.business.monthlyPricePerMember,d="year"===i?l*t:c*t):(l=u().A.pricing.enterprise.yearlyPricePerMember,c=u().A.pricing.enterprise.monthlyPricePerMember,d="year"===i?l*t:c*t),{yearlyUnitPrice:l,monthlyUnitPrice:c,planAmount:d}}function G(e,t){var o;if(e&&e.isLoaded)return null===(o=e.result)||void 0===o||null===(o=o.getMonthlyUnitCost(t))||void 0===o?void 0:o.toMoneyValue()}function $(e,t){return e===u().A.pricing.personal.productId||(0,a().et)(t)?"personal":e===u().A.pricing.student.productId?"student":e===u().A.pricing.plus.productId?"plus":e===u().A.pricing.business.productId?"business":e===u().A.pricing.enterprise.productId?"enterprise":e===u().A.pricing.ai.productId?"ai":e===u().A.pricing.sites_custom_hostnames.productId?"sites_custom_hostnames":"legacy"}function Y(e){const{subscriptionTier:t,memberCount:o,currencyCode:n,promo:r,data:i,onlyShowAddOn:a,calculatingTax:c,taxAmount:u,addOnFeature:p,billingInterval:m,coupon:g}=e,f=Math.min(0,U(i));let v=0,h=0,_=0;const b=void 0!==p;if(!a){const e=K({subscriptionTier:t,memberCount:o,isAddOnFeature:!1,billingInterval:m});v+=e.yearlyUnitPrice,h+=e.monthlyUnitPrice,_+=e.planAmount}if(b){const e=K({subscriptionTier:t,memberCount:o,isAddOnFeature:!0,addOnFeature:p,billingInterval:m,coupon:g});v+=e.yearlyUnitPrice,h+=e.monthlyUnitPrice,_+=e.planAmount}const y=(0,l().ex)(_,r),w=s().W.fromValue({amount:_-y.amount+f+(u&&!c?u:0),currencyCode:n}).zeroIfNegative(),k=[{type:"standard",name:(0,S.jsx)(d().sA,{id:"subscriptionHelpers.lineItems.subTotal",defaultMessage:"Subtotal"}),price:s().W.fromValue({amount:_,currencyCode:n})}];return k.push({type:c?"calculating":"standard",name:(0,S.jsx)(d().sA,{id:"subscriptionHelpers.lineItems.taxIfApplicable.title",defaultMessage:"Tax if applicable"}),price:s().W.fromValue({amount:_,currencyCode:n})}),0!==y.amount&&k.push({type:"promotion",name:(0,S.jsx)(d().sA,{id:"subscriptionHelpers.lineItems.promo",defaultMessage:"Coupon"}),price:s().W.fromValue({amount:y.amount,currencyCode:n}),subtitle:y.monthsRemaining?(0,S.jsx)(d().sA,{id:"subscriptionHelpers.lineItems.promo.subtitle",defaultMessage:"Valid for {durationInMonths} months",values:{durationInMonths:y.monthsRemaining}}):void 0}),f<0&&k.push({type:"promotion",name:(0,S.jsx)(d().sA,{id:"subscriptionHelpers.lineItems.balance",defaultMessage:"Balance"}),price:s().W.fromValue({amount:-f,currencyCode:n})}),{yearlyUnitPrice:v,monthlyUnitPrice:h,planAmount:_,payAmount:w,accountBalance:f,lineItems:k,promoInfo:y}}function Q(e,t,o,n){return V(0,0,e,n)/(0,c().lP)()}function Z(e){return re(e).filter(i().QE)}async function X(e,t,o){var n;return f().A.state.shouldUseEdgeCache?(null===(n=await h().P.awaitData(e,{spaceId:t}))||void 0===n?void 0:n.page_guest)??0:Z(o).length}function J(e,t,o){var n;return f().A.state.shouldUseEdgeCache?(null===(n=h().P.getData(e,{spaceId:t}))||void 0===n?void 0:n.page_guest)??0:Z(o).length}function ee(e){return re(e).filter((e=>(0,n().DH)(e.role)))}async function te(e,t,o){if(f().A.state.shouldUseEdgeCache){const o=await h().P.awaitData(e,{spaceId:t}),n=((null==o?void 0:o.member)??0)+((null==o?void 0:o.membership_admin)??0)+((null==o?void 0:o.owner)??0);return 0===n?1:n}return ee(o).length}function oe(){const e=_().subscriptionDataStoreInstance.state;return e?Z(e):[]}function ne(){const e=_().subscriptionDataStoreInstance.state;return e?ee(e):[]}function re(e){return"visibleUsers"in e?e.visibleUsers:e.users}function ie(e,t){return Boolean(t&&"subscribed_admin"===t.type&&(0,a().N8)(null==e?void 0:e.subscription))}function ae(e,t){if(!t)return!1;const o=v().A.getData(e,{spaceId:t});return!!o&&(0,a().N8)(o.billingData.subscription)}function se(e,t,o,n){return V(0,0,o,n)>=(0,c().lP)()}function le(e){return c().OX(e)?"interest_in_enterprise":c().tL(e)?"interest_in_business":void 0}function ce(e){return c().dL(e)}function de(){return(0,y().y4)()}function ue(e,t){const o=(0,y().AI)();return!!o&&t.includes(o)}function pe(e){const{billingData:t,spaceStore:o}=e;return!(0,a().et)(t)&&((null==o?void 0:o.canAdmin())??!1)}},134696:(e,t,o)=>{o.d(t,{D2:()=>x,F1:()=>N,J8:()=>I,Jg:()=>A,Jy:()=>T,R2:()=>U,RH:()=>R,VV:()=>L,Wd:()=>F,_u:()=>B,bT:()=>P,hp:()=>O,ig:()=>V,iv:()=>M,kH:()=>C,l8:()=>D,vX:()=>j,xF:()=>E});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(430670),o(581454);var n=()=>o(842599),r=()=>o(798880),i=()=>o(762433),a=()=>o(116225),s=()=>o(496603),l=()=>o(498212),c=()=>o(989423),d=()=>o(680074),u=()=>o(351360),p=()=>o(508496),m=()=>o(406999),g=()=>o(630116),f=()=>o(134217),v=()=>o(10984),h=()=>o(847554),_=()=>o(749240),b=()=>o(966505),y=()=>o(317909),S=()=>o(755199),w=()=>o(337240);function k(e){var t;const o=e.invite_targets.filter(m().Gz),r=e.invite_targets.filter(m().ju),i=o.length+r.length,a=s().oE(e.permission_items.map((e=>{if("user_permission"===e.type)return e.user_id&&(0,l().ot)(e.user_id)}))),c=new Set(null===(t=u().default.state.currentSpaceStore)||void 0===t?void 0:t.getEmailDomains()),d=e.invite_targets.filter((e=>{if("existingUser"!==e.type&&"newUser"!==e.type)return!1;const t=(0,n().zN)(e.value.email);return t&&c.has(t)})).flatMap((e=>e.value.id?[(0,l().ot)(e.value.id)]:[])),p=(0,v().AI)(),g=e.invitee_ids_with_internal_domain??[];return{role:e.role,user_count:i,new_user_count:o.length,new_workspace_member_count:e.is_space?i:d.length,new_workspace_member_ids:e.is_space?a:d,is_onboarding:e.is_onboarding,invite_flow_id:e.invite_flow_id,invite_origin:e.invite_origin,invitee_ids:a,invite_message_length:e.invite_message_length,subscription_tier:p,domain_type:e.domainType,...!e.is_space&&{share_menu_session_id:e.share_menu_session_id},allow_domain_auto_invite:d.length>0,is_space:e.is_space,collection_id:e.collection_id,parent_collection_id:e.parent_collection_id,is_internal_domain:g.length>0,invitee_ids_with_internal_domain:g,invitee_ids_with_internal_domain_enforced:e.invitee_ids_with_internal_domain_enforced}}function I(e,t){const o=k(t);c().vd(e,"invite_error",o)}function A(e,t){var o;const i=(0,v().AI)(),a=k(t);c().vd(e,"invite",{...a,is_space:t.is_space});const s=null===(o=u().default.state.currentSpaceStore)||void 0===o?void 0:o.id;if(s){if(_().subscriptionDataStoreInstance.waitUntilLoaded().then((()=>{const o=_().subscriptionDataStoreInstance.state,i=(0,h().H)(e,s,o),l=o?f().V$(e,s,o,i):void 0,p=o?f().hr(e,s,o,i):void 0;c().vd(e,"invite_debug_with_block_usage",{...a,is_space:t.is_space,is_over_block_limit:l,block_usage:p}),t.is_space||(!function(e,t){const{currentSpaceStore:o,currentUserStore:i}=u().default.state,a=o&&o.canEditMembership(),s=d().FX(),l=null==i?void 0:i.getEmail();if(!a||!s||!l)return;if("professional"!==s)return;const p=(0,n().zN)(l),m=f().r8().slice(0,50).map((e=>({email:g().LU.createChildStore(o,{table:r().oo,id:e.userId}).getEmail(),guestId:e.userId}))).filter((e=>e.email&&(0,n().zN)(e.email)===p)).map((e=>e.guestId));c().vd(e,"page_invite_guest_summary",{...t,guest_with_same_domain_count:m.length,guest_ids:m})}(e,a),b().xO(e,{inviteTargets:t.invite_targets,origin:t.invite_origin}))})),t.is_space||a.allow_domain_auto_invite){c().vd(e,"space_invite",a),c().mt(e,{space_invited:!0}),p().default.logEvent("space_invite",a.allow_domain_auto_invite?`${t.invite_origin}_allow_domain`:t.invite_origin,a),b().KX(e,{invite_origin:t.invite_origin,domainType:t.domainType,new_workspace_member_count:a.new_workspace_member_count,new_workspace_member_ids:a.new_workspace_member_ids,allow_domain_auto_invite:a.allow_domain_auto_invite});const o=_().subscriptionDataStoreInstance.state,n=o?(0,h().H)(e,s,o):1;!function(e,t){const o=(0,v().AI)();t.visibleMembersCount<=1&&(c().vd(e,"workspace_first_invite_sent"),w().gJ(e,{subscriptionTier:o,domainType:t.domainType}),"professional"===t.domainType&&(c().vd(e,"professional_workspace_first_invite_sent",{visible_members_count:t.visibleMembersCount,is_professional_team_user:t.isProfessionalTeamUser,domain_type:t.domainType}),w().jg(e)))}(e,{visibleMembersCount:n,isProfessionalTeamUser:t.isProfessionalTeamUser,domainType:t.domainType})}t.is_space||a.new_workspace_member_ids.length===t.invite_targets.length||(c().vd(e,"page_invite",a),p().default.logEvent("page_invite",i,a),function(e,t){const{currentUserSettingsStore:o}=u().default.state;if(!o)return;const n=o.getKeyStore("settings").getKeyStore("signup_time").getValue(),r=o.getKeyStore("settings").getKeyStore("first_page_invite_at").getValue();if(!Boolean(r)){const r=Date.now(),i={...t,...n?{signup_time_ready:!0,time_from_signup_to_first_page_invite:n-r}:{signup_time_ready:!1}};c().vd(e,"page_invite_time",i),p().default.logEvent("page_invite_time",t.subscription_tier,i),y().createAndCommit({userAction:"firstPageInvite",environment:e,userId:o.id,canUndo:!0,perform:e=>{S().mJ({userSettingsStore:o,data:{first_page_invite_at:r},transaction:e})}})}}(e,a))}}function x(e,t){const o=(0,i().AI)(t.billingData);c().vd(e,"invite_typed",{invite_flow_id:t.invite_flow_id,invite_origin:t.invite_origin,subscription_tier:o}),p().default.logEvent("invite_typed",o,{...t})}function C(e,t){const{selected_user_token:o}=t;let n;"group"===o.type&&(n={type:o.type,value:{id:o.value.group_id}}),c().vd(e,"invite_select_target",n?{...t,selected_user_token:n}:t),p().default.logEvent("invite_select_target",t.subscription_tier,{selected_user_token_rank:t.selected_user_token_rank,from:t.from,type:t.type??"permission_invite"})}function T(e,t){c().vd(e,"invite_change_role",t),p().default.logEvent("invite_change_role",t.subscription_tier,{...t})}function M(e,t){c().vd(e,"abandon_permissions_invite",t),p().default.logEvent("abandon_permissions_invite",t.subscription_tier,{...t})}function P(e,t){c().vd(e,"open_share_workspace_invite",t),p().default.logEvent("open_share_workspace_invite",t.subscription_tier,{...t})}function B(e,t){c().vd(e,"send_share_workspace",t),p().default.logEvent("send_share_workspace",t.subscription_tier,{...t})}function R(e,t){c().vd(e,"send_membership_request",t),p().default.logEvent("send_membership_request",t.subscription_tier,{...t})}function E(e,t){c().vd(e,"send_guest_request",t),p().default.logEvent("send_guest_request",t.subscription_tier,{...t})}function D(e,t){c().u4({environment:e,event:{eventName:"skip_share_workspace",eventProperties:t}})}function N(e,t){c().vd(e,"open_page_share_invite",t),p().default.logEvent("open_page_share_invite",t.subscription_tier,{...t})}function L(e){c().vd(e,"open_space_invite")}function F(e,t){c().vd(e,"invite_modal_input_focus",t)}function U(e,t){c().vd(e,"invite_users_to_page",t),a().u4({name:"invite_users_to_page"})}function O(e,t){c().vd(e,"internal_domain_enforced",t)}function V(e,t){c().vd(e,"workspace_over_guest_limit",t)}function j(e,t){c().u4({environment:e,event:{eventName:"open_invite_members_modal",eventProperties:t}})}},135552:(e,t,o)=>{o.d(t,{V:()=>r,q:()=>n});let n=function(e){return e.Red="red",e.Blue="blue",e.Beige="beige",e.White="white",e.Purple="purple",e.LightRed="light-red",e.Yellow="yellow",e.PageNotification="page-notification",e.ImportNotification="import-notification",e.LightBlue="light-blue",e.LightGray="light-gray",e}({});function r(e){switch(e){case n.Red:return"red";case n.Blue:return"blue";case n.Beige:return"yellow";case n.White:return"gray";case n.Purple:return"blue";case n.LightRed:return"red";case n.Yellow:return"yellow";case n.PageNotification:return"gray";case n.ImportNotification:case n.LightBlue:return"blue";case n.LightGray:default:return"gray"}}},137586:(e,t,o)=>{o.d(t,{A:()=>x});o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(757695),s=()=>o(959013),l=()=>o(401497),c=()=>o(576250),d=()=>o(284371),u=()=>o(731320),p=()=>o(614505),m=()=>o(42425),g=()=>o(365136),f=o(474848);const v=function(e){let{currentBlockStore:t,backlinkStore:n,scrollToBlockId:a,discussionId:c,showOriginalToken:d,disableCurrentPageToken:p,disableArrow:g}=e;const v=(0,l().DP)(),w=(0,r().v3)(),k=(0,i().K8)((()=>!(0,u().X9)(w,t)&&(0,u().X9)(w,n)),[w,t,n]),I=(0,i().K8)((()=>o(351360).default.state.mainEditorCurrentBlockStore),[]),A=I&&I.id===n.id,x=(0,i().K8)((()=>(0,o(492414).Ay)({store:n,scrollToBlockId:a,discussionId:c,fullyQualified:!0,preferPublicLink:(0,o(836251).w6)(w),pageVisitSource:o(584262).y8.LinkInPage})),[n,a,c,w]);return(0,f.jsx)(o(296798).A,{href:x,external:!1,innerStyle:{paddingLeft:8,paddingRight:16},children:(0,f.jsx)(m().Ay,{childrenStyle:{padding:"4px 2px"},alignment:m().C1.Center,style:{marginBottom:2,marginRight:4},right:(0,f.jsxs)(f.Fragment,{children:[d&&(0,f.jsx)("div",{style:b(w,v),children:(0,f.jsx)(s().sA,{defaultMessage:"Original",id:"backlink.originalTokenLabel"})}),A&&!p&&(0,f.jsx)("div",{style:b(w,v),children:(0,f.jsx)(s().sA,{defaultMessage:"This page",id:"backlink.currentPageTokenLabel"})})]}),children:(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[!g&&(0,f.jsx)(y,{}),(0,f.jsx)(h,{backlinkStore:n}),(0,f.jsx)(o(16006).A,{store:n,style:_(v)}),(0,f.jsxs)("div",{style:{marginTop:-2,minWidth:0,display:"flex",alignItems:"baseline",flex:"2 0 40%",paddingTop:"0.1em"},children:[(0,f.jsx)(o(85356).A,{store:n,style:{paddingLeft:8}}),(0,f.jsx)(S,{isPrivate:k})]})]})})})};function h(e){let{backlinkStore:t}=e;const o=(0,i().K8)((()=>t.getIcon()),[t]),n=(0,i().K8)((()=>t.isEmptyPage()),[t]);return(0,f.jsx)(p().A,{disabled:!0,icon:o,isEmptyPage:n,size:20,style:{marginLeft:4,marginRight:4}})}function _(e){return{fontWeight:d().Wy.medium,fontSize:d().J.UIRegular.desktop,lineHeight:1.3,borderBottom:`1px solid ${e.darkDividerColor}`,flexShrink:1}}function b(e,t){const{device:o}=e;return{padding:"2px 6px",borderRadius:4,color:t.mediumTextColor,background:t.legacyDefaultSelectColor,fontSize:o.isMobile?11:9,lineHeight:o.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap",marginLeft:4}}function y(){const e=(0,l().DP)();return(0,f.jsx)("div",{style:{marginLeft:4,transform:"rotate(180deg)",fill:e.regularIconColor},children:(0,c().y)({width:15,height:15})})}function S(e){let{isPrivate:t}=e;return t?(0,f.jsx)(g().A,{style:{paddingRight:4,marginLeft:12}}):null}var w=()=>o(125565);const k=10,I=a().default.createClass(k,{name:"ShowMoreStore"}),A=a().default.createClass(!1,{name:"HoveredStore"});const x=function(e){let{store:t,originalTransclusionStore:a,disableInaccessiblePages:l,headerText:c,disableArrow:d,disableCurrentPageToken:u}=e;const p=(0,r().v3)(),m=(0,i().uB)(void 0,A),g=(0,i().uB)(void 0,I),h=(0,i().K8)((()=>(0,o(900967).c)(t,p)),[t,p]),_=(0,n.useCallback)((()=>function(e){e.setState(e.state+k)}(g)),[g]),b=(0,n.useCallback)((()=>function(e){e.setState(!1)}(m)),[m]),y=(0,n.useCallback)((()=>function(e){e.setState(!0)}(m)),[m]),S=(0,i().O$)(g),w=(0,i().K8)((()=>a?a.getNavigableBlockStore():void 0),[a]);if(0===h.backlinks.length&&!a)return null;const x=h.backlinks.length>S,T=h.inaccessibleBacklinkCount>0&&!l;return(0,f.jsxs)("div",{onMouseMove:y,onMouseLeave:b,children:[c&&(0,f.jsx)(C,{headerText:c}),a&&w&&(0,f.jsx)(v,{currentBlockStore:t,disableArrow:d,disableCurrentPageToken:u,backlinkStore:w,scrollToBlockId:a.id,showOriginalToken:!0}),h.backlinks.slice(0,S).map((e=>(0,f.jsx)(v,{currentBlockStore:t,disableArrow:d,disableCurrentPageToken:u,...e},e.backlinkStore.id))),(x||T)&&(0,f.jsx)(o(859428).A,{disableTooltip:x,renderTooltip:()=>(0,f.jsx)(s().sA,{defaultMessage:"Synced in pages that you don't have access to.",id:"page.backlinks.privatePagesTooltip"}),render:e=>(0,f.jsx)(o(493823).p,{icon:o(30626)._,isGray:!0,onClick:_,style:{padding:`2px ${d?17:14}px`,width:"100%"},disabled:!x,...e,children:x?(0,f.jsx)(s().sA,{defaultMessage:"{count} more",id:"page.backlinks.more",values:{count:h.backlinks.length-S}}):(0,f.jsx)(s().sA,{id:"page.backlinks.privatePages",defaultMessage:"{count, plural, one {{count} private page} other {{count} private pages}}",values:{count:h.inaccessibleBacklinkCount}})})})]})};function C(e){let{headerText:t}=e;return(0,f.jsx)("div",{style:{display:"flex"},children:(0,f.jsx)(w().A,{isSmall:!0,style:{marginTop:12,marginBottom:8,marginLeft:4,flex:1,paddingLeft:8},children:t})})}},137743:(e,t,o)=>{o.d(t,{Y:()=>f,t:()=>v});o(898992),o(823215),o(296540);var n=()=>o(334003),r=()=>o(959013),i=()=>o(534177),a=()=>o(95313),s=()=>o(750660),l=()=>o(761652),c=()=>o(878377),d=()=>o(776894);var u=()=>o(351360),p=()=>o(416726),m=o(474848);const g=(0,r().YK)({moveToName:{id:"action.moveTo.name",defaultMessage:"Move to"}}),f=(0,p().Fw)({key:"move page to",displayName:g.moveToName,analyticsName:g.moveToName.defaultMessage,shortcuts:["moveTo"],validators:[c().AU6(c().i6S)],closeParentMenu:!0,action:e=>{let{environment:t,publicEditMode:n,analyticsFrom:r,lazyDependencies:i}=e;const{mainEditorCurrentBlockStore:a}=u().default.state;if(!a)return;const s=v.validators||[],l=document.querySelector(`.${o(38337).ug9}`);if(!l)return;const c={environment:t,blocks:[a],originRect:l.getBoundingClientRect(),publicEditMode:n,analyticsFrom:r,lazyDependencies:i};s.every((e=>e(c)))&&v.action(c)}}),v=(0,p().Fw)({key:"move to",displayName:g.moveToName,analyticsName:g.moveToName.defaultMessage,svg:n().F,shortcuts:["moveTo"],validators:[c().lj$,c().M3g,c().AU6(c().bct),c().AU6(c().CeV),c().AU6(c().kD4),c().AU6(c().Xjv(o(700500).xd.externalObjectInstancePage)),c().AU6(c().PfK),c().AU6(c().bmm),c().AU6(c().dKT),c().AU6(c().pe1),c().Xmj,c().AU6(c().i6S),c().AU6(c().oy3),c().AU6(c().J$q)],closeParentMenu:!0,render:(e,t,i)=>{let{styles:a}=i;const{environment:s,blocks:l}=t,c=d().sw({environment:s,blocks:l}),u=c.canMoveBlocks?void 0:h(c.reason),p=Boolean(u);return(0,m.jsx)(o(859428).A,{placement:o(962730).W.Right,textWrap:!0,style:{maxWidth:240},disableTooltip:!p,renderTooltip:()=>u,render:t=>(0,m.jsx)(o(575143).A,{...(0,o(553965).A)(e,t),...a,svg:n().F,title:(0,m.jsx)(r().sA,{...g.moveToName}),disabled:p,disabledFeedback:p,shortcut:"moveTo"})})},action:async e=>{const{environment:t}=e,n=d().sw({environment:t,blocks:e.blocks});if(!n.canMoveBlocks){const{reason:t}=n;return void function(e){let{environment:t,reason:n}=e;switch((()=>o(436572))().D6({label:h(n)}),n.key){case"lockedTopLevelTeamPage":a().qN(t,{type:"locked_top_level_team"});break;case"needsFullAccess":case"needsEditAccessOnParent":case"unknown":a().qN(t,{type:"no_permission"});break;default:(0,i().HB)(n)}}({environment:e.environment,reason:t})}let r=[];const l=u().default.state.mainEditorCurrentBlockStore,c=o(186445).ao();e.blocks.length>0&&e.blocks[0]!==l?r=e.blocks:c&&(r=[c]),e.environment.device.isMobileNative?await s().LP({environment:e.environment,blocks:r,originRect:e.originRect,moveToContext:"action_menu"}):s().ho({environment:e.environment,blocks:r,originRect:e.originRect,moveToContext:"action_menu"})}});function h(e){var t;switch(e.key){case"needsFullAccess":return(0,m.jsx)(r().sA,{id:"blockMenu.moveTo.disabled.fullAccess.reason",defaultMessage:'You need "Full access" to this page to move it.'});case"needsEditAccessOnParent":return null!==(t=e.parentStore)&&void 0!==t&&t.canRead()?(0,m.jsx)(r().sA,{id:"blockMenu.moveTo.disabled.editAccessOnParent.reasonWithParentName",defaultMessage:"You need edit access to {parentPageName} to move this page.",values:{parentPageName:(0,m.jsx)(l().A,{store:e.parentStore,useInvertedColors:!0})}}):(0,m.jsx)(r().sA,{id:"blockMenu.moveTo.disabled.editAccessOnParent.reason",defaultMessage:"You need edit access to the parent page to move this page."});case"unknown":return(0,m.jsx)(r().sA,{id:"action.doNotHavePermissionToMoveBlock",defaultMessage:"You do not have permission to move this page."});case"lockedTopLevelTeamPage":return(0,m.jsx)(r().sA,{id:"action.isLockedTopLevelTeamPage",defaultMessage:"This teamspace has its sidebar locked. You must be a teamspace owner to move this page."});default:(0,i().HB)(e)}}},138856:(e,t,o)=>{o.d(t,{u:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("play",{viewBox:"0 0 14 16",svg:(0,n.jsx)("path",{d:"M1.34699 16C1.73805 16 2.07697 15.8756 2.52017 15.6089L12.8703 9.47556C13.6437 9.01333 14 8.62222 14 8C14 7.37778 13.6437 6.98667 12.8703 6.52444L2.52017 0.391111C2.07697 0.133333 1.73805 0 1.34699 0C0.582247 0 0 0.595556 0 1.57333V14.4356C0 15.4044 0.582247 16 1.34699 16Z"})})},140022:(e,t,o)=>{o.r(t),o.d(t,{trackAIChatTranscriptHistoryChatDeleted:()=>j,trackAIChatTranscriptHistoryItemRestored:()=>O,trackAIChatTranscriptHistoryNewChatCreated:()=>V,trackAcceptAllPill:()=>X,trackAiChatTranscriptHistoryOpenHistoryButtonSelected:()=>z,trackAiDetectedGetSupportPillClick:()=>U,trackAiDetectedGetSupportPillTriggered:()=>F,trackAssistantClosed:()=>_,trackAssistantFollowUpShareButtonClick:()=>he,trackAssistantIntroModalClose:()=>R,trackAssistantIntroModalRead:()=>E,trackAssistantIntroModalTryNow:()=>N,trackAssistantLimitBlurSeen:()=>ve,trackAssistantOpened:()=>h,trackAssistantScopeMenuGetAiConnectorsInteraction:()=>fe,trackAssistantShareModalCopyImageFailure:()=>ye,trackAssistantShareModalCopyImageSuccess:()=>be,trackAssistantShareModalDismiss:()=>_e,trackAssistantSkillSuggestedButtonClick:()=>ie,trackAssistantSlackUnfurlAiActionEvent:()=>pe,trackAssistantSuggestedSkillGroupClick:()=>re,trackAtMentionClick:()=>ne,trackCloseFullPageChatHistory:()=>H,trackConnectAppsClick:()=>Se,trackConnectorInProgressModalOpened:()=>ge,trackDiscardAllPill:()=>ee,trackExpandFullPageChatHistory:()=>q,trackFullPageWelcomePromptCardInteraction:()=>me,trackInferenceEnd:()=>w,trackInferenceStart:()=>y,trackInsertPill:()=>Z,trackLeapDismissed:()=>ce,trackLeapLinkClick:()=>de,trackLeapPreferenceSelect:()=>ae,trackLeapPresented:()=>le,trackLeapSubmit:()=>se,trackLearnMoreAboutAssistantClicked:()=>D,trackLeavingFullPageChat:()=>oe,trackOpeningHelpFromThreeDotMenu:()=>Y,trackOpeningSupportFromThreeDotMenu:()=>Q,trackOpeningThreeDotMenu:()=>$,trackQnASilentRetry:()=>A,trackQnaBackToSearch:()=>T,trackQnaCitationsSeeMoreClick:()=>P,trackQnaCitationsToggle:()=>M,trackQnaFeedbackGiven:()=>x,trackQnaReminderShown:()=>L,trackQnaResultClicked:()=>C,trackQnaSessionInitialized:()=>B,trackSavePagePill:()=>J,trackScopeSearchMenuClose:()=>G,trackScopeSearchMenuOpen:()=>W,trackScopeSearchToggle:()=>K,trackSeeAllSkillsPill:()=>te,trackUserClickedAssistantTryAgain:()=>k,trackUserStoppedAssistantOutput:()=>I});o(944114),o(898992),o(354520);var n=()=>o(239666),r=()=>o(441738),i=()=>o(116225),a=()=>o(534177),s=()=>o(631611),l=()=>o(989423),c=()=>o(291075),d=()=>o(351360),u=()=>o(430483),p=()=>o(874753),m=()=>o(525569),g=()=>o(99254),f=()=>o(749240),v=()=>o(174636);function h(e,t){var o;const{sessionId:n,startTimestamp:a,transcript:s,hasQuery:p,searchSessionId:m,from:h,isReminder:_,reminderType:b}=t,y=u().zD.isXMLAssistantEnabled(),S=u().zD.isLimitedQnaMode(),w=y?"assistant_open":"qna_open";l().vd(e,w,{qna_session_id:n,has_query:p,search_session_id:m,is_limited_qna_session:S,from:h,is_reminder:_,reminder_type:b}),i().u4({name:w,args:{qna_session_id:n,from:h,duration:Date.now()-a,questions_asked_in_session:s.filter((e=>"human"===e.type)).length??0,is_reminder:_,reminder_type:b,is_limited_qna_session:S}});const k=d().default.state.currentSpaceStore,I=null==k?void 0:k.getMemberCountFromPublicSpaceData(),A=(null===(o=f().subscriptionDataStoreInstance.state)||void 0===o?void 0:o.addOns)??[],x=(0,r().GI)(A);k&&I&&!_&&u().zD.isAudienceForAiConnectorSprigSurvey({hasAiAddOn:x,isSpaceAdmin:k.canAdmin(),isMultiplayerWorkspace:I>1,qnaConnectionStoreStates:{slackUniversalQnAConnectionStoreState:v().R.state,githubAIConnectorStoreState:c().o.state,jiraAIConnectionStoreState:g().y.state}})&&i().u4({name:"assistant_open_and_in_ai_connector_sprig_audience",args:{qna_session_id:n,from:h}})}function _(e,t){const{sessionContext:o,from:n}=t,r=null==o?void 0:o.assistantConfigurationState,a=u().zD.isXMLAssistantEnabled(),s=u().zD.isLimitedQnaMode(),c=a?"assistant_close":"qna_close",d=null==r?void 0:r.sessionStartTimestamp;l().vd(e,c,{qna_session_id:null==r?void 0:r.sessionId,qna_session_length:d?Date.now()-d:0,from:n,is_limited_qna_session:s}),i().u4({name:c,args:{qna_session_id:(null==r?void 0:r.sessionId)??"",is_limited_qna_session:s,from:n,duration:d?Date.now()-d:-1,questions_asked_in_session:(null==o?void 0:o.evaluator.getTranscript().filter((e=>"human"===e.type)).length)??0}})}function b(e){if(!(0,s().Ui)(e))return p().P.state.from;switch(m().default.state.type){case"closedWithContext":case"closed":return;case"completionPopup":case"assistantCompletionPopup":return m().default.state.from;default:(0,a().HB)(m().default.state)}}function y(e){var t;const{environment:o,configurationState:r,inferenceId:i,source:a,mentionsUsed:s,skillType:c,from:d,actionCardIdForLogging:p}=e,m=ue(),g=r?r.searchScope:n().W,f=S(g),v=u().zD.isXMLAssistantEnabled(),h=u().zD.isLimitedQnaMode(),_=(null==r||null===(t=r.temporaryUserInputData)||void 0===t?void 0:t.isRetrying)??!1,y=v?"assistant_inference_start":"qna_inference_start";l().vd(o,y,{qna_session_id:r?r.sessionId:void 0,qna_inference_id:i,is_limited_qna_session:h,is_retry:_,is_suggested_question:"suggested_question"===a,is_reminder_suggested_question:"reminder_suggested_question"===a,is_abandoned_search_suggested_question:"abandoned_search_suggested_question"===a,search_scope_type:g.type,search_scope_id:f,mentions_used:s,skill_type:c,action_card_id:p,from:d,search_sources:m,assistant_opened_from:b(d)})}function S(e){if("everything"!==e.type&&"workspace"!==e.type&&"notion"!==e.type&&"slack"!==e.type&&"helpdocs"!==e.type&&"ai-knowledge"!==e.type&&"labeler"!==e.type&&"google-drive"!==e.type&&"github"!==e.type&&"jira"!==e.type&&"sharepoint"!==e.type&&"universal-none"!==e.type&&"notion-none"!==e.type&&"web"!==e.type&&"slackbot"!==e.type&&"universal-workspace"!==e.type)return"teamspace"===e.type?e.teamId:"page"===e.type?e.pageId:"collection"===e.type?e.collectionId:"site"===e.type?e.siteId:(0,a().HB)(e)}function w(e,t){const{configurationState:o,inferenceId:r,timeTook:i,numCitationsShown:a,numSearchResults:s,numSlackSearchResults:c,numGoogleDriveSearchResults:d,searchedHelpdocs:p,citationsBySource:m,resultsBySource:g,selectedSkill:f,assistantActions:v,from:h,observationsBeforeFirstHumanStep:_,observationsAfterFirstHumanStep:y,forcefullyStoppedByUser:w,actionCardId:k}=t;if(!o)return;const I=u().zD.isXMLAssistantEnabled(),A=ue(),x=o.searchScope.type,C=S(o?o.searchScope:n().W);I?l().u4({environment:e,event:{eventName:"assistant_inference_end",eventProperties:{session_id:o.sessionId,inference_id:r,time_took:i,num_citations_shown:a,num_search_results:s,num_slack_search_results:c,num_google_drive_search_results:d,searched_helpdocs:p,citations_by_source:m,results_by_source:g,selected_skill:f,action_card_id:k,assistant_actions:(null==v?void 0:v.length)?v:["none"],search_sources:A,search_scope_type:x,observations_before_first_human_step:_,observations_after_first_human_step:y,search_scope_id:C,from:h,assistant_opened_from:b(h),forcefully_stopped_by_user:w}}}):l().vd(e,"qna_inference_end",{qna_session_id:o.sessionId,qna_inference_id:r,time_took:i,num_citations_shown:a,num_search_results:s,num_slack_search_results:c,citations_by_source:m,search_sources:A,search_scope_type:x,from:h,assistant_opened_from:b(h)})}function k(e,t){l().u4({environment:e,event:{eventName:"assistant_user_clicked_try_again",eventProperties:{session_id:t.sessionId,assistant_surface_type:t.assistantSurfaceType}}})}function I(e,t){l().u4({environment:e,event:{eventName:"assistant_output_stopped_by_user",eventProperties:{session_id:t.sessionId,assistant_surface_type:t.assistantSurfaceType}}})}function A(e,t){l().vd(e,"qna_silent_retry",{qna_session_id:t.sessionId,event:t.event})}function x(e,t,o,n){t&&l().vd(e,"qna_feedback_given",{qna_session_id:t.sessionId,qna_inference_id:o,sentiment:n})}function C(e,t){const{configurationState:o,clickedPageId:n,resultType:r,source:i}=t;o&&l().vd(e,"qna_result_clicked",{qna_session_id:o.sessionId,search_session_id:o.searchSessionId,clicked_page_id:n,result_type:r,source:i})}function T(e,t){l().vd(e,"qna_back_to_search",{qna_session_id:t.sessionId})}function M(e,t){l().vd(e,"qna_citations_toggle",{qna_session_id:t.sessionId,shown:t.shown})}function P(e,t){l().vd(e,"qna_citations_see_more_click",{qna_session_id:t.sessionId})}function B(e,t){l().vd(e,"qna_session_initialized",{current_initialization_count:t.current_initialization_count})}function R(e,t){l().vd(e,"assistant_intro_modal_close",t)}function E(e,t){l().vd(e,"assistant_intro_modal_read",t)}function D(e,t){l().vd(e,"assistant_learn_more_about_assistant_clicked",t)}function N(e,t){l().vd(e,"assistant_intro_modal_continue",t),h(e,{hasQuery:!1,isReminder:!1,transcript:[],searchSessionId:void 0,sessionId:"",startTimestamp:Date.now(),reminderType:void 0,from:"assistant_intro_modal"})}function L(e,t){l().vd(e,"qna_reminder_shown",{number:t.number})}function F(e,t){l().vd(e,"ai_get_help_triggered",{sessionId:t.sessionId})}function U(e,t){l().vd(e,"ai_get_help_click",{sessionId:t.sessionId})}function O(e,t){l().vd(e,"ai_chat_transcript_history.restored",t)}function V(e,t){l().vd(e,"ai_chat_transcript_history.new_chat_created",t)}function j(e,t){l().vd(e,"ai_chat_transcript_history.chat_deleted",t)}function z(e,t){l().vd(e,"ai_chat_transcript_history.open_history_button_selected",t)}function q(e){l().vd(e,"ai_full_page_chat_history.expand")}function H(e){l().vd(e,"ai_full_page_chat_history.close")}function W(e,t){l().vd(e,"ai_scoped_search_menu_open",t)}function K(e,t){const{from:o,scope:n}=t;let r;if("everything"===n.type||"workspace"===n.type||"notion"===n.type||"slack"===n.type||"helpdocs"===n.type||"ai-knowledge"===n.type||"labeler"===n.type||"google-drive"===n.type||"jira"===n.type||"universal-none"===n.type||"github"===n.type||"sharepoint"===n.type||"notion-none"===n.type||"web"===n.type||"slackbot"===n.type||"universal-workspace"===n.type);else if("teamspace"===n.type)r=n.teamId;else if("page"===n.type)r=n.pageId;else if("collection"===n.type)r=n.collectionId;else{if("site"!==n.type)return(0,a().HB)(n);r=n.siteId}l().vd(e,"ai_scoped_search_toggle",{from:o,search_scope_type:n.type,search_scope_id:r})}function G(e,t){l().vd(e,"ai_scoped_search_menu_close",t)}function $(e,t){l().vd(e,"ai_three_dot_menu.open",t)}function Y(e,t){l().vd(e,"ai_three_dot_menu.accessing_help",t)}function Q(e,t){l().vd(e,"ai_three_dot_menu.opening_support",t)}function Z(e,t){l().vd(e,"ai_action_pill.insert",t)}function X(e,t){l().vd(e,"ai_action_pill.accept_all_edits",t)}function J(e,t){l().vd(e,"ai_action_pill.save_page",t)}function ee(e,t){l().vd(e,"ai_action_pill.discard_all_edits",t)}function te(e,t){l().vd(e,"ai_see_all_skills",t)}function oe(e){l().vd(e,"ai_full_page_exit")}function ne(e){l().vd(e,"ai_at_mention_click")}function re(e,t){l().vd(e,"assistant_suggested_skill_group_click",t)}function ie(e,t){l().vd(e,"assistant_suggested_skill_option_click",t)}function ae(e,t){l().vd(e,"leap_select",t)}function se(e,t){l().vd(e,"leap_submit",t)}function le(e){l().vd(e,"leap_presented")}function ce(e){l().vd(e,"leap_dismissed")}function de(e,t){l().vd(e,"leap_open_link",t)}function ue(){const e=["notion","helpdocs"];return u().zD.isConnectedToSlackUniversalQnA(v().R.state)&&e.push("slack"),u().zD.isConnectedToGoogleDriveUniversalQnA(v().R.state)&&e.push("google-drive"),u().zD.isConnectedToGithubUniversalQnA(c().o.state)&&e.push("github"),u().zD.isConnectedToJiraUniversalQnA(g().y.state)&&e.push("jira"),e}function pe(e){const{environment:t,action:o,interaction:n}=e;l().u4({environment:t,event:{eventName:"assistant_slack_unfurl_ai_action_event",eventProperties:{interaction:n,action:o}}})}function me(e){const{environment:t,promptId:o,interaction:n}=e;l().u4({environment:t,event:{eventName:"assistant_full_page_welcome_prompt_card_event",eventProperties:{promptid:o,interaction:n}}})}function ge(e){const{environment:t,connector:o,from:n}=e;l().u4({environment:t,event:{eventName:"ai_connector_in_progress_modal_opened",eventProperties:{from:n,connector:o}}})}function fe(e){const{environment:t,sessionId:o,interaction:n}=e;l().u4({environment:t,event:{eventName:"assistant_scope_menu_get_ai_connectors_interaction",eventProperties:{session_id:o,interaction:n}}})}function ve(e){const{environment:t}=e;l().u4({environment:t,event:{eventName:"assistant_limit_blur_seen",eventProperties:{}}})}function he(e){const{environment:t,sessionId:o,assistantSurfaceType:n}=e;l().u4({environment:t,event:{eventName:"assistant_follow_up_share_action_user_clicked_button",eventProperties:{session_id:o,assistant_surface_type:n}}})}function _e(e){const{environment:t,sessionId:o,assistantSurfaceType:n}=e;l().u4({environment:t,event:{eventName:"assistant_follow_up_share_action_user_dismissed_share_modal",eventProperties:{session_id:o,assistant_surface_type:n}}})}function be(e){const{environment:t,sessionId:o,assistantSurfaceType:n}=e;l().u4({environment:t,event:{eventName:"assistant_follow_up_share_action_user_copied_image_success",eventProperties:{session_id:o,assistant_surface_type:n}}})}function ye(e){const{environment:t,sessionId:o,assistantSurfaceType:n}=e;l().u4({environment:t,event:{eventName:"assistant_follow_up_share_action_user_copied_image_failure",eventProperties:{session_id:o,assistant_surface_type:n}}})}function Se(e){const{environment:t,sessionId:o,assistantSurfaceType:n,source:r}=e;l().u4({environment:t,event:{eventName:"assistant_click_connect_apps",eventProperties:{source:r,session_id:o,assistant_surface_type:n}}})}},140862:(e,t,o)=>{o.d(t,{A:()=>r});var n=o(296540);function r(e){return(0,n.useMemo)((()=>({onMouseDown:t=>{if(e){if(i(t.target))return;i(document.activeElement)&&t.preventDefault()}}})),[e])}function i(e){return e instanceof HTMLElement&&("true"===e.contentEditable||"input"===e.tagName.toLowerCase())}},141032:(e,t,o)=>{o.d(t,{$E:()=>m,Lc:()=>u,Ss:()=>v,yE:()=>c,yL:()=>p});o(16280);var n=()=>o(911981),r=()=>o(857639),i=()=>o(319625),a=()=>o(229833),s=()=>o(763824),l=()=>o(972435);const c="NotionTransactionTimeout",d=(0,o(959013).YK)({ReloadAllTabs:{defaultMessage:"Try closing and re-opening all Notion tabs or windows. Contact support if that doesn’t fix the issue.",id:"localDatabase.errorFixes.reloadAllTabs"},ReloadThisTab:{defaultMessage:"Try reloading Notion. Contact support if that doesn’t fix the issue.",id:"localDatabase.errorFixes.reloadThisTab"},AppProfileCorrupted:{defaultMessage:"Notion's local storage may be damaged. See (?) > Help & documentation > Reset Notion. Contact support if that doesn’t fix the issue.",id:"localDatabase.errorFixes.helpAndSupportPrompt"},FirefoxProfileCorrupted:{defaultMessage:"Your Firefox profile may be damaged. Visit https://firefox-storage-test.glitch.me/ to diagnose. Contact support if that doesn’t fix the issue.",id:"localDatabase.errorFixes.firefoxSettingsDamaged"},ChromeProfileCorrupted:{defaultMessage:"Your Chrome profile may be damaged. If you changed any chrome://flags then please reset them, then restart your browser. If issues persist, try making a new Chrome user. Contact support if that doesn’t fix the issue.",id:"localDatabase.errorFixes.chromeSettingsDamaged"},ChromeIndexedDBBucketError:{defaultMessage:"Your Chrome profile may be damaged. For a more consistent experience download the Notion desktop app: https://www.notion.com/desktop",id:"localDatabase.errorFixes.chromeUpgradeCorruptedSettings"},noDiskSpace:{defaultMessage:"No disk space remaining. Contact support if that doesn’t fix the issue.",id:"localDatabase.erroMessages.noDiskSpaceRemaining"},noDiskSpaceBrowserLimit:{defaultMessage:"No disk space remaining. Your browser settings may restrict the storage Notion can use. Contact support if that doesn’t fix the issue.",id:"localDatabase.erroMessages.noDiskSpaceRemainingBrowserLimit"}});function u(e){return e}function p(e){return Promise.all(e)}class m{constructor(e,t,o,n){this.databaseName=void 0,this.databaseVersion=void 0,this.debugLogger=new(r().BatchedLogger)({from:"IndexedDBWrapper",type:"BulkDebug",level:"info",maxLength:100,logToConsole:false}),this.latestTransactionId=0,this.openDbCallbacks=void 0,this.db=void 0,this.getDBPromise=void 0,this.environment=e,this.databaseName=t,this.databaseVersion=o,this.openDbCallbacks=n}async reset(){try{return await(0,n().MR)(this.databaseName),{value:void 0}}catch(e){return{error:g({environment:this.environment,error:(0,i().A)(e),details:`Failed to reset database ${this.databaseName}`,closed:!1,aborted:!1})}}finally{this.teardown()}}async startTransaction(e,t){const o="startTransaction";let n,r=0;const i=`${e.name}.${this.latestTransactionId++}`;do{try{const l=`${i} attempt #${r+1}`;if(this.debugLogInfo(o,`${l} starting`),n=await this.startTransactionAttempt({...e,name:i},t),!n.error){this.debugLogInfo(o,`${l} succeeded`);break}const c=`${l} errored, type=${n.error.type}`;if(!n.error.closed){this.debugLogInfo(o,`${c}, closed=false`);break}if(this.debugLogInfo(o,`${c}, closed=true`),this.db)try{this.db.close()}catch(a){this.debugLogInfo(o,`db.close() threw ${a}`)}if(this.teardown(),4===r)break;await s().wR(250)}catch(a){return{error:a}}r++}while(r<5);return n}async startTransactionAttempt(e,t){const{storeNames:o,name:n,mode:s,timeoutMs:l}=e,c=`${n} failed`,d="startTransactionAttempt",u=await this.getDB();if(u.error)return u;const p=u.value,f=[];let v;try{v=p.transaction(o,s);const e=Date.now(),t=window.setTimeout((()=>{const t=Date.now()-e,o=`${n} has not completed after ${t} ms, which may prevent other transactions from running.`;this.debugLogInfo(d,o),r().log({from:"IndexedDBWrapper",type:"LongRunningTransactionWarning",level:"warning",data:{message:o,miscDataToConvertToString:{transactionLog:f}}})}),m.longRunningTimeoutMs);v.addEventListener("complete",(function(){window.clearTimeout(t)}));const i=e=>{e.stopPropagation(),window.clearTimeout(t)};v.addEventListener("error",i),v.addEventListener("abort",i)}catch(_){const e=(0,i().A)(_);return{error:g({environment:this.environment,details:`Failed to create ${s} transaction on ${this.databaseName}.${o}`,error:e,aborted:!0,closed:"InvalidStateError"===e.name})}}const h=await this.runTransaction(v,t,n,l,(e=>{r().pushWithMaxLength(f,e,100)}));if("error"in h||h.abort){this.debugLogInfo(d,`${n} command returned failed/aborted status`);try{v.abort()}catch(b){this.debugLogInfo(d,`transaction.abort() threw ${b}`)}return v.done.catch((e=>{e&&r().log({from:"IndexedDBWrapper",type:"TransactionFailure",level:"error",error:(0,a().n6)(g({environment:this.environment,details:c,error:e,aborted:!0,closed:!1}))})})),h}if(this.debugLogInfo(d,`${n} command returned successful status`),"readwrite"===s)try{await v.done}catch(b){return{error:g({environment:this.environment,error:(0,i().A)(b),details:`In await transaction.done: ${c}`,aborted:null===b,closed:!1})}}else v.done.catch((e=>{r().log({from:"IndexedDBWrapper",type:"ReadOnlyTransactonFailureIgnored",level:"error",error:(0,a().n6)(g({environment:this.environment,error:e,details:c,aborted:null===e,closed:!1}))})}));return{value:h.value}}freezeListener(){Boolean(this.db)&&(this.debugLogInfo("freezeListener"),r().log({level:"warning",from:"IndexedDBWrapper",type:"document.freeze",data:{dbName:this.databaseName,dbVersion:this.databaseVersion}}))}teardown(){this.debugLogInfo("teardown"),this.db=void 0,this.getDBPromise=void 0,document.removeEventListener("freeze",this.freezeListener)}debugLogInfo(e,t){this.debugLogger.log({from:"IndexedDBWrapper",level:"info",type:e,data:{message:t}})}async initDB(){try{this.debugLogInfo("initDB","Starting openDB()");const e=await(0,n().P2)(this.databaseName,this.databaseVersion,this.openDbCallbacks);return this.debugLogInfo("initDB","Completed openDB()"),document.addEventListener("freeze",this.freezeListener),e.addEventListener("close",(e=>{r().log({level:"warning",from:"IndexedDBWrapper",type:"db.onclose",data:{dbName:this.databaseName,dbVersion:this.databaseVersion},error:(0,a().n6)(f(e))}),this.teardown()})),e.addEventListener("abort",(e=>{r().log({level:"warning",from:"IndexedDBWrapper",type:"db.onabort",data:{dbName:this.databaseName,dbVersion:this.databaseVersion}})})),e.addEventListener("error",(e=>{r().log({level:"error",from:"IndexedDBWrapper",type:"db.onerror",data:{dbName:this.databaseName,dbVersion:this.databaseVersion},error:(0,a().n6)(f(e))})})),e.addEventListener("versionchange",(()=>{r().log({level:"warning",from:"IndexedDBWrapper",type:"db.onversionchange",data:{dbName:this.databaseName,dbVersion:this.databaseVersion}}),e.close(),this.teardown()})),{value:e}}catch(e){return{error:g({environment:this.environment,details:"Unable to initialize database",error:(0,i().A)(e),aborted:!1,closed:!1})}}}async getDB(){let e=this.db;if(!e){this.getDBPromise||(this.getDBPromise=this.initDB().then((e=>(e.error?this.teardown():(this.db=e.value,this.getDBPromise=void 0),e)),(e=>(this.teardown(),{error:{type:"InitDBException",message:"An unexpected error occurred trying to create the database.",details:"Exception in initDB",error:e,closed:!1,aborted:!1}}))));const t=await this.getDBPromise;if(t&&t.error)return t;e=t.value}return{value:e}}async runTransaction(e,t,o,n,r){try{const i=Date.now(),a=t(e,(e=>{this.debugLogInfo("runTransaction",`${o} command: ${e}`),r(e)}));if(void 0!==n&&n>=0){const e=await s().Vq(a,n);if(e.timeout){const e=Date.now()-i,t=new Error(`Timeout after ${e}ms: exceeded limit ${n}ms by ${e-n}ms`);throw t.name=c,this.debugLogInfo("runTransaction",`${o} ${t.name}: ${t.message}`),this.debugLogger.flush(),t}return e.result}r("Awaiting commandResultPromise.");const l=await a;return r("Done awaiting commandResultPromise."),l}catch(a){return{error:g({environment:this.environment,error:(0,i().A)(a),details:`In runTransaction catch: ${o} failed`,closed:!1,aborted:!1})}}}}function g(e){const{environment:t,error:o,details:n,closed:r,aborted:i}=e;if(o){if(o.name===c)return{type:c,details:n,message:`Storage operation did not complete. ${l().A.formatMessage(d.ReloadAllTabs)}`,error:o,closed:!1,aborted:!1};if("TimeoutError"===o.name&&"Transaction timed out due to inactivity."===o.message)return{type:"TransactionTimeout",details:n,message:`IndexedDB access attempt timed out. ${l().A.formatMessage(d.ReloadThisTab)}`,error:o,closed:r,aborted:i};if("VersionError"===o.name)return{type:"OutdatedSchemaVersion",details:n,message:`This tab is running an outdated version of Notion. ${l().A.formatMessage(d.ReloadThisTab)}`,error:o,closed:r,aborted:i};if("UnknownError"===o.name&&"Internal error opening backing store for indexedDB.open."===o.message)return{type:"ChromeUnknownInternalError",details:n,message:`Cannot open IndexedDB. ${t.device.isNative?l().A.formatMessage(d.AppProfileCorrupted):l().A.formatMessage(d.ChromeProfileCorrupted)}`,error:o,closed:r,aborted:i};if(t.device.isBrowser&&"UnknownError"===o.name&&"Internal error retrieving bucket data directory."===o.message)return{type:"ChromeUnknownInternalError",details:n,message:l().A.formatMessage(d.ChromeIndexedDBBucketError),error:o,closed:r,aborted:i};if("SecurityError"===o.name&&"IDBFactory.open() called in an invalid security context"===o.message)return{type:"SafariIframeSecurityError",details:n,message:"Cannot access IndexedDB in an iframe in your browser. Try opening Notion in a new window or use a different browser.",error:o,closed:r,aborted:i};if("UnknownError"===o.name&&"Connection to Indexed Database server lost. Refresh the page to try again"===o.message)return{type:"SafariIndexedDatabaseServerLost",details:n,message:`Cannot access IndexedDB due to a bug in Safari/WebKit. ${l().A.formatMessage(d.ReloadThisTab)}`,error:o,closed:r,aborted:i};if("InvalidStateError"===o.name&&"A mutation operation was attempted on a database that did not allow mutations."===o.message)return{type:"FirefoxPrivateBrowsing",details:n,message:"Firefox does not allow IndexedDB in Private Browsing. Try opening Notion in a normal window.",error:o,closed:r,aborted:i};if("NotFoundError"===o.name&&"The operation failed because the requested database object could not be found. For example, an object store did not exist but was being opened."===o.message)return{type:"FirefoxObjectStoreNotFound",details:n,message:`An IndexedDB object store does not exist. ${l().A.formatMessage(d.ReloadAllTabs)} ${l().A.formatMessage(d.FirefoxProfileCorrupted)}`,error:o,closed:!0,aborted:i};if("QuotaExceededError"===o.name){let e=l().A.formatMessage(d.noDiskSpace);return t.device.isBrowser&&(e=l().A.formatMessage(d.noDiskSpaceBrowserLimit)),{type:"QuotaFull",details:n,message:e,error:o,closed:r,aborted:i}}if(window.navigator.userAgent.includes("WindowsWechat")&&"AbortError"===o.name&&"Version change transaction was aborted in upgradeneeded event handler."===o.message)return{type:"UnsupportedWechat",details:n,message:"This device or application is unsupported.",error:o,closed:r,aborted:i}}return{type:"UnknownIndexedDBError",details:n,message:`An unknown IndexedDB error occurred. ${l().A.formatMessage(d.ReloadThisTab)}`,error:o||new Error("createIndexedDBError: error was falsy"),closed:r,aborted:i}}function f(e){if(e&&e.target&&"error"in e.target){const t=e.target.error;if(!t)return;return`${t.name}: ${t.message}`}}function v(e,t){if(e.stack)return e;try{const o=new Error(`${e.message} (${t})`);throw o.name=e.name,o}catch(o){return e.stack=(0,i().A)(o).stack,e}}m.longRunningTimeoutMs=5*o(720665).Xb,(0,o(604341).exposeDebugValue)("idbUnwrap",n().oA)},141333:(e,t,o)=>{o.d(t,{CR:()=>i,HD:()=>s,HJ:()=>l,Xg:()=>r,o7:()=>c,sj:()=>u,yE:()=>p});var n=o(296540);function r(e){const[t,o]=(0,n.useState)(0);return a(e,(0,n.useCallback)((()=>{const t=e.current;t&&o(t.scrollWidth)}),[e])),t}function i(e){const[t,o]=(0,n.useState)(0);return a(e,(0,n.useCallback)((()=>{const t=e.current;t&&o(t.scrollHeight)}),[e])),t}function a(e,t){(0,n.useEffect)((()=>{const o=e.current;if(o){const n=new ResizeObserver(t);function r(){if(o)for(const e of Array.from(o.children))n.observe(e)}t(),r();const i=new MutationObserver(r);return i.observe(o,{childList:!0}),()=>{i.disconnect(),n.disconnect()}}}),[e,t])}function s(e){const[t,o]=(0,n.useState)(0);return d(e,"content-box",(0,n.useCallback)((()=>{const t=e.current;t&&o(t.clientWidth)}),[e])),t}function l(e){const[t,o]=(0,n.useState)(0);return d(e,"border-box",(0,n.useCallback)((()=>{const t=e.current;t&&o(t.offsetWidth)}),[e])),t}function c(e){const[t,o]=(0,n.useState)(0);return d(e,"border-box",(0,n.useCallback)((()=>{const t=e.current;t&&o(t.offsetHeight)}),[e])),t}function d(e,t,o){(0,n.useEffect)((()=>{const n=e.current;if(n){const e=new ResizeObserver(o);return o(),e.observe(n,{box:t}),()=>e.disconnect()}}),[e,o,t])}function u(e){const[t,o]=(0,n.useState)(0);return m(e,(0,n.useCallback)((()=>{const t=e.current;t&&o(t.scrollLeft)}),[e])),t}function p(e){var t;const[o,r]=(0,n.useState)((null===(t=e.current)||void 0===t?void 0:t.scrollTop)??0);return m(e,(0,n.useCallback)((()=>{const t=e.current;t&&r(t.scrollTop)}),[e])),o}function m(e,t){(0,n.useEffect)((()=>{const o=e.current;if(o)return t(),o.addEventListener("scroll",t),()=>o.removeEventListener("scroll",t)}),[e,t])}},141465:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){}}const r=new n;(0,o(604341).exposeDebugValue)("ItemHoverStore",r);const i=r},141966:(e,t,o)=>{o.d(t,{H:()=>a,l:()=>s});var n=()=>o(842599),r=()=>o(351360),i=()=>o(508496);function a(e,t){return t?48:e?32:18}function s(){var e;if(i().default.checkGate({gateName:"ks_dev_settings"}))return!1;const t=null===(e=r().default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return"makenotion.com"===(0,n().zN)(t??"")}},143197:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{limitParents:new WeakMap}}setLimitParents(e,t){this.state.limitParents.set(e,t),this.emit()}removeLimitParents(e){this.state.limitParents.delete(e),this.emit()}}const r=new n},143857:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(959180))().A{}const r=new n},144114:(e,t,o)=>{o.d(t,{BH:()=>$,Cy:()=>M,EI:()=>X,FP:()=>te,Gy:()=>ie,Hp:()=>ue,I1:()=>oe,JF:()=>de,JR:()=>E,M6:()=>W,O5:()=>re,O9:()=>L,OU:()=>B,Qf:()=>N,S1:()=>ne,SY:()=>se,TM:()=>Y,TV:()=>Q,ZP:()=>ae,Zz:()=>Z,a3:()=>ce,cp:()=>G,k_:()=>z,kv:()=>F,md:()=>q,mi:()=>D,nV:()=>J,of:()=>j,pk:()=>le,qg:()=>U,sg:()=>K,sr:()=>O,up:()=>P,zX:()=>V,ze:()=>ee});o(898992),o(354520),o(672577),o(581454);var n=()=>o(660237),r=()=>o(842599),i=()=>o(857639),a=()=>o(480388),s=()=>o(96689),l=()=>o(313127),c=()=>o(100622),d=()=>o(496603),u=()=>o(534177),p=()=>o(796756),m=()=>o(449506),g=()=>o(579627),f=()=>o(246826),v=()=>o(426116),h=()=>o(72234),_=()=>o(317909),b=()=>o(989423),y=()=>o(972435),S=()=>o(437622),w=()=>o(719431),k=()=>o(155959),I=()=>o(351360),A=()=>o(508496),x=()=>o(630116),C=()=>o(151168),T=()=>o(607859);function M(e){return e.isOnboarding&&("desktop_join_or_create_space"===e.flow||"mobile_join_or_create_space"===e.flow)}function P(e){return e.isOnboarding&&("desktop_cold_start"===e.flow||"mobile_cold_start"===e.flow||"desktop_joinable_spaces"===e.flow||"mobile_joinable_spaces"===e.flow||"desktop_redirect"===e.flow||"mobile_redirect"===e.flow)}function B(e){const{state:t}=e;return P(t)}const R=(0,o(959013).YK)({personalWorkspaceName:{defaultMessage:"{userName}’s Notion",id:"onboardingHelpers.personalWorkspaceName"},teamWorkspaceName:{defaultMessage:"{userName}’s Workspace",id:"onboardingHelpers.teamWorkspaceName"}});function E(e,t){return t.formatMessage(R.personalWorkspaceName,{userName:e.trim()})}function D(e,t){return t.formatMessage(R.teamWorkspaceName,{userName:e.trim()})}function N(e){return e.isOnboarding&&Boolean(a().$.find((t=>t===e.stage)))}function L(e){return e.isOnboarding&&(Boolean(a().$.find((t=>t===e.stage)))||"invite"===e.stage)}function F(e){return e.isOnboarding&&"template_optout"===e.stage}function U(e){const t=e.userStore.getEmail();if(t&&e.isUserDomainJoinable)return(0,r().zN)(t)}function O(e){return"team"===e}function V(e){return e.device.isMobileNative&&(0,k().T)("supportsNativeHome")&&e.device.isAndroid}async function j(e){var t,o;T().default.setState({...T().default.state,isLoading:!0});const{disableRedirects:r,environment:a}=e;i().log({level:"info",from:"onboardingHelpers",type:"loadOnboardingData",data:{message:"initializeOnboardingDataLoad"}});const[s,l,c,d,p,g,f]=await Promise.all([m().callApi({eventName:"getJoinableSpaces",environment:a,data:{}}),(0,S().ex)({environment:a,disableRedirectUrl:r}),m().callApi({eventName:"isUserDomainJoinable",environment:a,data:{}}),m().callApi({eventName:"isEmailEducation",environment:a,data:{}}),m().callApi({eventName:"validateUserCanCreateWorkspace",environment:a,data:{}}),m().callApi({eventName:"getVerifiedEmailDomain",environment:a,data:{}}),m().callApi({eventName:"getGeoIpLocation",environment:a,data:{}})]);i().log({level:"info",from:"onboardingHelpers",type:"loadOnboardingData",data:{message:"completedOnboardingDataLoad",miscDataToConvertToString:{joinableSpacesResponseType:s.type,joinableSpacesResponseStatus:s.status,joinableSpacesResponseResultsLength:"success"===s.type?s.data.results.length:void 0,userRedirectDataId:l.userRootStore.id,userRedirectDataFirstSpaceViewId:null===(t=l.firstSpaceView)||void 0===t?void 0:t.id,userRedirectDataLastVisitedSpaceViewId:null===(o=l.lastVisitedSpaceView)||void 0===o?void 0:o.id,isUserDomainJoinableResponseType:c.type,isUserDomainJoinableResponseStatus:c.status,validateUserCanCreateWorkspaceStatus:p.status}}}),T().default.setState({...T().default.state,isLoading:!1});const v={isUserDomainJoinable:"success"===c.type&&c.data.isJoinable,isEducationPlanEligible:"success"===d.type&&d.data.isEligible,canUserCreateSpace:"success"!==p.type||p.data.canUserCreateSpace,isUserUsingVerifiedDomain:"success"===g.type&&(0,u().O9)(g.data.id),...l,countryCode:"success"===f.type&&(0,n().Ef)(f.data.countryCodeFromIp)?f.data.countryCodeFromIp:void 0,performanceMarketingTerm:(0,C().TQ)()};return"success"===s.type?{joinableSpaceData:s.data,...v}:{joinableSpaceData:{results:[]},...v}}async function z(e){const t=await m().callApi({eventName:"getGeoIpLocation",environment:e,data:{}});return"success"===t.type&&(0,n().Ef)(t.data.countryCodeFromIp)?t.data.countryCodeFromIp:void 0}function q(e){const{onboardingData:t,isNewUserFlow:o}=e,{userRootStore:n}=t,{results:r}=t.joinableSpaceData,i=n.getSpaceViewStores().map((e=>e.getSpaceId()));return o?r:r.filter((e=>i.indexOf(e.id)<0))}function H(e){return e.isOnboarding&&"profile"!==e.stage&&"error"!==e.stage}function W(e){var t,o,n;const{currentSpaceStore:r}=I().default.state,i=(0,S().p3)(),a="userPersona"in e?e.userPersona:i.function,s="userRole"in e?e.userRole:i.role,l="companySize"in e?e.companySize:i.companySize,c="planSelection"in e?e.planSelection:i.intent,d="useCases"in e?e.useCases:i.useCases,u="categories"in e?e.categories:i.categories,p="collaborativeIntent"in e?e.collaborativeIntent:i.collaborativeIntent;return{flow_name:e.isOnboarding?e.flow:"not_defined",flow_id:e.isOnboarding?e.flowId:void 0,stage:e.isOnboarding?e.stage:"not_defined",initial_workspace_type:H(e)?e.spaceJoinOrCreate:void 0,is_new_onboarding:ee(e),is_create_or_join:M(e),stage_number:e.isOnboarding?e.stageNumber:void 0,num_of_joinable_spaces:e.isOnboarding&&"workspace_choose"===e.stage?(null===(t=e.joinableSpaces)||void 0===t?void 0:t.length)||0:void 0,historical_stages:e.isOnboarding?e.historicalStages:void 0,selectedPresets:e.isOnboarding&&"workspace_setup"===e.stage?e.selectedPresets:void 0,user_persona:a,user_team_role:s,user_use_cases:d,user_categories:u,user_company_size:l,plan_selection:c,plan_type:null==r?void 0:r.getPlanType(),collaborative_intent:p,stage_duration_in_ms:e.isOnboarding&&null!==(o=e.stageStats)&&void 0!==o&&o.startedTimeStampMs?Date.now()-(null===(n=e.stageStats)||void 0===n?void 0:n.startedTimeStampMs):void 0,onboarding_templates:void 0,trial_id:e.isOnboarding?e.trialId:void 0,performance_marketing_term:e.isOnboarding?e.performanceMarketingTerm:void 0}}function K(e){const{redirectSpaceId:t,redirectPageId:o,redirectBlockId:n,forkPageBlockId:r,hasExplicitAccessToRedirectPage:i,canJoinRedirectSpace:a,publicAccessPageId:s,oauthAuthorizationParams:l,inviteCode:c}=e;return l?{type:"oauth_authorization_redirect",...l}:n?{type:"redirect_block",blockId:n}:r?{type:"fork_page",pageId:r}:!s||i||a?!t||i||a?t&&o&&i&&!a?{type:"guest_redirect",pageId:o,spaceId:t}:t&&o&&a?{type:"redirect_page",pageId:o,spaceId:t}:t&&c&&a?{type:"team_invite_redirect",spaceId:t,inviteCode:c}:t&&a?{type:"redirect_space",spaceId:t}:e.performanceMarketingTerm?{type:"performance_marketing_template",pageId:e.redirectPageId}:{type:"getting_started_page"}:{type:"invalid"}:{type:"public_access_page_redirect",pageId:s}}async function G(e,t){const{onboardingData:o,name:n,profilePhoto:r,password:i,emailOptIn:a}=e,s=o.userStore;b().mt(t,{email_optin_product_updates_and_releases:a,email_optin_product_tips_and_news:a,email_optin_resources_and_events:a,email_optin_sales_outreach:a,email_optin_events_and_resources:a,email_optin_product_education_and_how_tos:a,email_optin_notion_for_startups:a}),_().createAndCommit({userAction:"onboardingHelpers.setProfileData",environment:t,canUndo:!0,perform:e=>{const t={...r&&{profile_photo:r}};t.name=n,f().zv({store:s,data:t,transaction:e})}});const l=await w().shouldCreatePassword(t)&&!J();i&&l&&await m().callApi({eventName:"setPassword",environment:t,data:{newPassword:i,sendEmail:!1}})}function $(e){if(!A().default.checkGate({gateName:"survey_data_writes"}))return;const{environment:t,state:o,spaceStore:n,spaceViewStore:r}=e,i=(new Date).getTime();if(r){const e=l().De({maybeFunction:o.userPersona,guessedFunctionVersion:4,maybeRole:o.userRole,guessedRoleVersion:2,maybeCategories:o.categories,guessedCategoriesVersion:1,maybeEducationRole:o.userEducationRole,guessedEducationRoleVersion:1,maybeEducationLevel:o.userEducationLevel,guessedEducationLevelVersion:1,maybeNotionUseFrequency:o.notionUseFrequency,guessedNotionUseFrequencyVersion:1,collectedFrom:"onboarding",collectedAt:i});void 0!==e&&h().OF(t,e,r)}if(n){const e=l()._Z({maybeCollaborativeIntent:o.collaborativeIntent,guessedCollaborativeIntentVersion:1,maybeIntent:o.planSelection,guessedIntentVersion:1,maybeCompanySize:o.companySize,guessedCompanySizeVersion:2,maybeUseCases:o.useCases,guessedUseCasesVersion:3,collectedFrom:"onboarding",collectedAt:i});void 0!==e&&v().DJ(t,e,n)}}async function Y(e,t){const{spaceId:o,onboardingData:n}=e;if(!o)return;const r=x().SL.createChildStore(n.userRootStore,{table:s().NX,id:o});await async function(e,t,o){t.isChecked&&t.joinableUserEmailDomain&&await v().Yk({environment:e,emailDomains:[t.joinableUserEmailDomain],spaceStore:o})}(t,e,r);const{emails:i}=e,a=d().sb(i).map((e=>({type:"newUser",value:{email:e},source:"email"})));i.length>0&&(await g().eP({environment:t,store:r,inviteTargets:a,inviteRole:"editor",isOnboarding:!0,invite:{inviteOrigin:"onboarding_invite"}}),p().gA(t,{...W(e),emails:e.emails,auto_join_space:e.isChecked,is_bulk_invite:e.isBulkInvite}))}function Q(e){const{userStore:t}=e,o=y().A.getIntl(),n=t.getFullName(o),r=t.getProfilePhoto()||null;if(n)return{name:n,profilePhoto:r,password:null,prefilled:!0}}const Z="inviteCode";function X(e){return(e.isBulkInvite?e.emailTokens:e.emailInputs.filter((e=>""!==e.sanitizedEmail))).length>0}function J(){var e;const{currentUserSettingsStore:t}=I().default.state;return t&&t.isReady()&&"email-password"===(null===(e=t.getSettings())||void 0===e?void 0:e.mobile_ads_signup_variant)}function ee(e){return e.isOnboarding&&e.isNewUser}function te(e){return e.device.isMobileBrowser}function oe(e){return!!e&&!e.canJoinSpace&&e.guestPageIds.length>0}function ne(e){return"guest_redirect"===e.type?"guest":"member"}function re(e){if(oe(e)){const t={type:"guest_redirect",pageId:e.guestPageIds[0],spaceId:e.id};return{spaceId:e.id,redirectData:t,spaceJoinOrCreate:"join"}}return{spaceId:e.id,spaceJoinOrCreate:"join"}}const ie={fontSize:12,color:c().Ay.mediumTextColor,fontWeight:o(284371).Wy.medium,lineHeight:"135%",marginTop:20,marginBottom:4},ae={marginTop:14,marginBottom:14},se={marginTop:8,marginBottom:8};function le(e){return{color:e.mediumTextColor}}const ce={width:60},de={marginTop:14,marginBottom:8,fontSize:16,fontWeight:600},ue={boxShadow:`0 0 0 1px ${c().Ay.red}`}},145192:(e,t,o)=>{o.d(t,{A:()=>d});var n=o(296540),r=()=>o(540946),i=()=>o(959013),a=()=>o(771467),s=()=>o(197194),l=()=>o(645873),c=o(474848);function d(e){(0,n.useEffect)((()=>{s().Uw()}),[]);const t=(0,i().tz)();return(0,c.jsx)(l().u2,{dependency:a().V,children:o=>(0,c.jsx)(r().yC,{intl:t,katex:o,...e})})}},147577:(e,t,o)=>{o.d(t,{fi:()=>r,oR:()=>i,pN:()=>n});const n=275,r=90,i=90},147588:(e,t,o)=>{o.d(t,{Y:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("file",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.35645 15.4678H11.6367C13.0996 15.4678 13.8584 14.6953 13.8584 13.2256V7.02539C13.8584 6.0752 13.7354 5.6377 13.1406 5.03613L9.55176 1.38574C8.97754 0.804688 8.50586 0.667969 7.65137 0.667969H4.35645C2.89355 0.667969 2.13477 1.44043 2.13477 2.91016V13.2256C2.13477 14.7021 2.89355 15.4678 4.35645 15.4678ZM4.46582 14.1279C3.80273 14.1279 3.47461 13.7793 3.47461 13.1436V2.99219C3.47461 2.36328 3.80273 2.00781 4.46582 2.00781H7.37793V5.75391C7.37793 6.73145 7.86328 7.20312 8.83398 7.20312H12.5186V13.1436C12.5186 13.7793 12.1836 14.1279 11.5205 14.1279H4.46582ZM8.95703 6.02734C8.67676 6.02734 8.56055 5.9043 8.56055 5.62402V2.19238L12.334 6.02734H8.95703ZM8.59473 12.7266V10.6279L8.54004 9.56152L9.06641 10.1152L9.59277 10.6484C9.68848 10.7646 9.8457 10.833 9.98926 10.833C10.2969 10.833 10.5293 10.6143 10.5293 10.3066C10.5293 10.1357 10.4678 10.0127 10.3379 9.90332L8.45117 8.16699C8.29395 8.02344 8.16406 7.96191 7.99316 7.96191C7.8291 7.96191 7.69922 8.02344 7.54199 8.16699L5.65527 9.90332C5.52539 10.0127 5.46387 10.1357 5.46387 10.3066C5.46387 10.6143 5.68945 10.833 6.00391 10.833C6.14746 10.833 6.29785 10.7646 6.40039 10.6484L6.92676 10.1152L7.45312 9.56152L7.39844 10.6279V12.7266C7.39844 13.0547 7.67188 13.3008 7.99316 13.3008C8.32129 13.3008 8.59473 13.0547 8.59473 12.7266Z"})})},148024:(e,t,o)=>{o.d(t,{$Z:()=>a,DQ:()=>d,FH:()=>c,Kc:()=>u,VX:()=>s,wF:()=>l});var n=()=>o(989423),r=()=>o(644914),i=()=>o(508496);function a(e,t){n().vd(e,"open_support_chat",t)}function s(e,t){n().vd(e,"click_help",{from:t.from,qna_session_id:t.qnaSessionId}),i().default.logEvent("click_help")}function l(e,t){n().vd(e,"click_help_item",{...t,...(0,r().hX)({environment:e})}),"sales_chat"===t.item&&i().default.logEvent("click_help_item")}function c(e,t){n().vd(e,"global_click_learn",t)}function d(e){n().vd(e,"zendesk_metadata_open_messenger")}function u(e){n().vd(e,"zendesk_metadata_signup")}},148777:(e,t,o)=>{o.d(t,{PE:()=>u,So:()=>c,Yp:()=>d,hQ:()=>p});var n=()=>o(351360),r=()=>o(968172),i=()=>o(20199),a=()=>o(713205),s=()=>o(314648);let l={};function c(e){l=e(l)}function d(){return l}function u(e){var t,o,l,c,d,u,m,g,f,v,h;const{environment:_,overrideCurrentUserId:b,overrideSpaceId:y,overrideSpaceViewStore:S,overrideLocalSearchableBlocksCache:w}=e,k=b??(null==_||null===(t=_.currentUser)||void 0===t?void 0:t.id),I=y??(null===(o=n().default.state.currentSpaceStore)||void 0===o?void 0:o.id),A=S??n().default.state.currentSpaceViewStore,x=Boolean(I),C=Boolean(A),T=w??i().A.state.localSearchableBlocksCache,M=I&&k?s().default.getUserSignals({spaceId:I,userId:k}):void 0,{userSignalsLoaded:P,userSignalsStats:B}={userSignalsLoaded:Boolean(M),userSignalsStats:M?{recentPages:null==M||null===(l=M.recentPages)||void 0===l?void 0:l.length,similarUserRecentPages:null===(c=Object.keys(null==M?void 0:M.similarUserRecentPages))||void 0===c?void 0:c.length,topPages7dPageView:null==M||null===(d=M.topPages7dPageView)||void 0===d?void 0:d.length,editedPages:null==M||null===(u=M.editedPages)||void 0===u?void 0:u.length,similarUsersEditedPages:null==M||null===(m=M.similarUsersEditedPages)||void 0===m?void 0:m.length}:void 0},R=I?r().A.get(I):void 0,E=Boolean(R),D=(null==R?void 0:R.length)||0,N=I&&k?null===(g=a().A.getStore({spaceId:I,userId:k}))||void 0===g?void 0:g.getState():void 0,L=Boolean(null==N?void 0:N.pages),F=Object.keys((null==N?void 0:N.pages)??{}).length,U=Boolean(null==N||null===(f=N.config)||void 0===f?void 0:f.isBackfilledFromRecentPageVisits),O=null==N||null===(v=N.config)||void 0===v?void 0:v.backfillTime;return{currentSpaceLoaded:x,currentSpaceViewLoaded:C,globalRecentPagesLoaded:E,globalRecentPagesSize:D,...p(T),userSignalsLoaded:P,userSignalsStats:B,searchFrecencyLoaded:L,searchFrecencySize:F,searchFrecencyBackfilled:Boolean(U),searchFrecencyBackfillTime:O,userId:k,spaceId:I,hasPersistedRecordCache:Boolean(null===(h=_.defaultRecordCache)||void 0===h?void 0:h.persistedRecordCache)}}function p(e){var t;return{localSearchableBlocksCacheLoaded:Boolean(e),localSearchableBlocksCacheSize:(null==e||null===(t=e.blocks)||void 0===t?void 0:t.documentCount)||0,localSearchableBlocksCacheBlockSourceCount:(null==e?void 0:e.blockSourceCount)||void 0}}},150180:(e,t,o)=>{o.d(t,{Ay:()=>A,mg:()=>y,oq:()=>S});var n=o(296540),r=()=>o(522419),i=()=>o(750559),a=()=>o(340498),s=o(474848);const l=(0,a().wt)("imageError",{viewBox:"0 0 32 32",svg:(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)("path",{d:"M6.39515 31.0485c3.44161 0 6.29115-2.8495 6.29115-6.2911 0-3.4355-2.8557-6.2912-6.29732-6.2912-3.43544 0-6.28495 2.8557-6.28495 6.2912 0 3.4416 2.85568 6.2911 6.29112 6.2911zm-.00617-5.366c-.32689 0-.50575-.1912-.51809-.5181l-.08635-3.0468c-.01233-.3393.24671-.5798.59828-.5798.34539 0 .61677.2467.60444.5859l-.09252 3.0407c-.01233.3331-.1912.5181-.50576.5181zm0 2.2698c-.35773 0-.69078-.2838-.69078-.6662s.32689-.6661.69078-.6661c.3639 0 .69079.2776.69079.6661 0 .3886-.33305.6662-.69079.6662z"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 17.5539V3h26v26H12.6862c.4113-.6095.7364-1.282.9578-2H28v-4H13.7749c-.1687-.7106-.4373-1.3825-.7902-2H28V5H6v12.1798c-.69548.0352-1.36626.164-2 .3741zM11.3329 19c-.6875-.5905-1.48192-1.0601-2.35027-1.3757L13 12l2 1 5-5 6 11H11.3329zM12 9c0 1.104-.896 2-2 2s-2-.896-2-2 .896-2 2-2 2 .896 2 2zm3.395 6.434l-1.76-.881L11.887 17h10.744l-3.107-5.695-4.129 4.129z"})]})});var c=()=>o(945529);const d=(0,a().wt)("playbackError",{viewBox:"0 0 32 32",svg:(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)("path",{d:"M6.39515 29.0485c3.44161 0 6.29115-2.8495 6.29115-6.2911 0-3.4355-2.8557-6.2912-6.29732-6.2912-3.43544 0-6.28495 2.8557-6.28495 6.2912 0 3.4416 2.85568 6.2911 6.29112 6.2911zm-.00617-5.366c-.32689 0-.50575-.1912-.51809-.5181l-.08635-3.0468c-.01233-.3393.24671-.5798.59828-.5798.34539 0 .61677.2467.60444.5859l-.09252 3.0407c-.01233.3331-.1912.5181-.50576.5181zm0 2.2698c-.35773 0-.69078-.2838-.69078-.6662s.32689-.6661.69078-.6661c.3639 0 .69079.2776.69079.6661 0 .3886-.33306.6662-.69079.6662z"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.1373 16.1987c0 6.7017-5.542 12.2437-12.2436 12.2437-1.622 0-3.1761-.3246-4.6001-.9118.3323-.4107.6226-.8567.8644-1.3316 1.1612.4325 2.4197.6687 3.7357.6687 5.9082 0 10.6689-4.7608 10.6689-10.669-.0122-5.9082-4.7729-10.65671-10.6812-10.65671-5.5497 0-10.08288 4.20726-10.5961 9.62871-.55173.0075-1.08925.0738-1.60656.193.4362-6.32082 5.78156-11.40862 12.20266-11.40862 6.7139 0 12.2559 5.54199 12.2559 12.24362zm-15.4585 4.4372a7.628 7.628 0 00-.0797-.2566.65573.65573 0 01-.0013-.0424v-8.2764c0-.5004.5859-.7202 1.0498-.4516l6.7016 4.0161c.4395.2686.4517.8911 0 1.1597l-6.7016 3.9917c-.3763.2257-.796.1398-.9688-.1405z"})]})});var u=()=>o(668435),p=()=>o(959013),m=()=>o(534177),g=()=>o(939768),f=()=>o(780054),v=()=>o(974233),h=()=>o(836251),_=()=>o(125565);function b(e,t){if("offline"===t)return u().h;switch(e){case"image":return l;case"pdf":return"document_locked"===t?c().v:i().f;case"audio":case"video":return d;default:return i().f}}function y(e,t){if(e&&e instanceof v().C){let o=t||e.data.url;return g().cW(o)&&(o=g().pf({relativeUrl:o,baseUrl:f().A.domainBaseUrl})),e.data.offline?g().cW(e.data.url)||e.data.url.startsWith(f().A.domainBaseUrl)?{type:"offline"}:{type:"unknown",source:o}:{type:"http",source:o,statusCode:e.data.status}}}function S(e,t){const o=e.error,n=t||e.src;if(o)return o.code===o.MEDIA_ERR_DECODE||o.code===o.MEDIA_ERR_SRC_NOT_SUPPORTED?{type:"unsupported_content_type",extension:n&&(0,r().QC)(n)}:o.code===o.MEDIA_ERR_NETWORK?{type:"offline"}:void 0}function w(){return(0,s.jsx)(p().sA,{id:"embedError.extension.unknown",defaultMessage:"unknown"})}function k(e){const{source:t,statusCode:o}=e,n=g().qg(t).hostname;return(0,s.jsx)(p().sA,{defaultMessage:"{hostname} (Error {statusCode})",id:"embedError.hostnameAndStatusCode",values:{hostname:n,statusCode:o}})}function I(e){switch(e){case"audio":return(0,h().xS)("guides.audioFaqs");case"video":return(0,h().xS)("guides.videosFaqs");case"image":return(0,h().xS)("guides.imagesFaqs");default:return(0,h().xS)("guides.embedsFaqs")}}const A=function(e){let{style:t,error:r,family:i,isSmall:a,onClickLink:l}=e;const c=(0,o(401497).DP)(),d=(0,o(484714).v3)(),u={background:c.embedPlaceholderBackground,cursor:"default",...t||{},position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",alignContent:"center",alignItems:"center",justifyContent:a?"flex-start":"center",padding:a?"7px 14px":"0.5em 1em",textAlign:"center",flexDirection:a?"row":"column",overflow:"hidden"},f=a||"offline"===r.type?25:48,v=a?"0 14px 0 0":"offline"===r.type?"0 0 8px 0":"0 0 14px 0",h=function(e,t){return"image"===t?"unsupported_content_type"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This image format ({extension}) can’t be played on this device.",id:"embedError.image.unsupportedContentType",values:{extension:e.extension||w()}}):"offline"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"Go online to view this image",id:"embedError.image.offline"}):"unknown"===e.type||"invalid_protocol"===e.type||"invalid_url"===e.type||"document_locked"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This image couldn’t be loaded.",id:"embedError.image.unknown"}):404===e.statusCode?(0,s.jsx)(p().sA,{defaultMessage:"This image couldn’t be found.",id:"embedError.image.notFound"}):401===e.statusCode||403===e.statusCode?(0,s.jsx)(p().sA,{id:"embedError.image.permissionDenied",defaultMessage:"Permission denied."}):413===e.statusCode?(0,s.jsx)(p().sA,{id:"embedError.image.imageTooBig",defaultMessage:"Image too big to display."}):(0,s.jsx)(p().sA,{defaultMessage:"This image couldn’t be loaded.",id:"embedError.image.serverError"}):"audio"===t?"unsupported_content_type"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This audio format ({extension}) can’t be played on this device.",id:"embedError.audio.unsupportedContentType",values:{extension:e.extension||w()}}):"offline"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"Go online to view this audio",id:"embedError.audio.offline"}):"unknown"===e.type||"invalid_protocol"===e.type||"invalid_url"===e.type||"document_locked"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This audio couldn’t be loaded.",id:"embedError.audio.unknown"}):404===e.statusCode?(0,s.jsx)(p().sA,{defaultMessage:"This audio couldn’t be found.",id:"embedError.audio.notFound"}):401===e.statusCode||403===e.statusCode?(0,s.jsx)(p().sA,{id:"embedError.audio.permissionDenied",defaultMessage:"Permission denied."}):(0,s.jsx)(p().sA,{defaultMessage:"This audio couldn’t be loaded.",id:"embedError.audio.serverError"}):"video"===t?"unsupported_content_type"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This video format ({extension}) can’t be played on this device.",id:"embedError.video.unsupportedContentType",values:{extension:e.extension||w()}}):"offline"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"Go online to view this video",id:"embedError.video.offline"}):"unknown"===e.type||"invalid_protocol"===e.type||"invalid_url"===e.type||"document_locked"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This video couldn’t be loaded.",id:"embedError.video.unknown"}):404===e.statusCode?(0,s.jsx)(p().sA,{defaultMessage:"This video couldn’t be found.",id:"embedError.video.notFound"}):401===e.statusCode||403===e.statusCode?(0,s.jsx)(p().sA,{id:"embedError.video.permissionDenied",defaultMessage:"Permission denied."}):(0,s.jsx)(p().sA,{defaultMessage:"This video couldn’t be loaded.",id:"embedError.video.serverError"}):"file"===t?"unsupported_content_type"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This file format ({extension}) can’t be played on this device.",id:"embedError.file.unsupportedContentType",values:{extension:e.extension||w()}}):"offline"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"Go online to view this file",id:"embedError.file.offline"}):"unknown"===e.type||"invalid_protocol"===e.type||"invalid_url"===e.type||"document_locked"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This file couldn’t be loaded.",id:"embedError.file.unknown"}):404===e.statusCode?(0,s.jsx)(p().sA,{defaultMessage:"This file couldn’t be found.",id:"embedError.file.notFound"}):401===e.statusCode||403===e.statusCode?(0,s.jsx)(p().sA,{id:"embedError.file.permissionDenied",defaultMessage:"Permission denied."}):(0,s.jsx)(p().sA,{defaultMessage:"This file couldn’t be loaded.",id:"embedError.file.serverError"}):"embed"===t?"unsupported_content_type"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This embed format ({extension}) can’t be played on this device.",id:"embedError.embed.unsupportedContentType",values:{extension:e.extension||w()}}):"offline"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"Go online to view this embed",id:"embedError.embed.offline"}):"unknown"===e.type||"invalid_protocol"===e.type||"invalid_url"===e.type||"document_locked"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This embed couldn’t be loaded.",id:"embedError.embed.unknown"}):404===e.statusCode?(0,s.jsx)(p().sA,{defaultMessage:"This embed couldn’t be found.",id:"embedError.embed.notFound"}):401===e.statusCode||403===e.statusCode?(0,s.jsx)(p().sA,{id:"embedError.embed.permissionDenied",defaultMessage:"Permission denied."}):(0,s.jsx)(p().sA,{defaultMessage:"This embed couldn’t be loaded.",id:"embedError.embed.serverError"}):"pdf"===t?"document_locked"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This PDF is locked",id:"embedError.pdf.locked"}):"offline"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"Go online to view this PDF",id:"embedError.pdf.offline"}):(0,s.jsx)(p().sA,{defaultMessage:"This embed couldn’t be loaded.",id:"embedError.embed.unknown"}):"tweet"===t?"offline"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"Go online to view this Tweet",id:"embedError.tweet.offline"}):(0,s.jsx)(p().sA,{defaultMessage:"This Tweet couldn’t be loaded.",id:"embedError.tweet.unknown"}):void(0,m().HB)(t)}(r,i);return(0,n.useEffect)((()=>{o(437219).Ax(d,{embedType:i,embedErrorType:r.type})}),[d,r.type,i]),(0,s.jsxs)("div",{style:u,children:[b(i,r.type)({fill:c.lightTextColor,width:f,height:f,margin:v}),(0,s.jsxs)(_().A,{isSecondaryColor:!0,isMultiline:!a,style:{margin:v},children:[(0,s.jsx)("div",{style:{display:a?"inline-block":"block",marginRight:a?"14px":void 0},children:h}),"offline"!==r.type&&(0,s.jsx)(o(187485).A,{style:{display:"inline",pointerEvents:"auto",cursor:"auto",borderBottom:`1px solid ${c.lightTextColor}`},href:"document_locked"===r.type?void 0:I(i),external:!0,onClick:()=>{o(148024).FH(d,{from:"embed_error"}),null==l||l()},children:"document_locked"===r.type?(0,s.jsx)(p().sA,{defaultMessage:"Unlock Document",id:"embedError.unlock"}):(0,s.jsx)(p().sA,{defaultMessage:"Learn more",id:"embedError.learnMore"})})]}),!a&&"http"===r.type&&(0,s.jsx)(_().A,{isSmall:!0,isSecondaryColor:!0,children:k(r)}),!a&&"unknown"===r.type&&r.source&&(0,s.jsx)(_().A,{isSmall:!0,isSecondaryColor:!0,children:g().qg(r.source).hostname})]})}},150193:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(370614).A)},151059:(e,t,o)=>{o.d(t,{A:()=>l});var n=()=>o(436604),r=()=>o(848776),i=()=>o(671887);function a(e,t){o(17022).A.withListenerIgnored((()=>{e&&t&&i().D.setState({...i().D.state,[e]:t})}))}const s=new(r().U)((e=>{let{spaceId:t}=e;return t}),(async function(e,t){let{spaceId:i,userId:s}=t,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const c=await Promise.resolve().then(o.bind(o,449506));if((0,o(807778).JM)()){const t=await c.callApi({eventName:"getPublicSpaceData",environment:e,userId:s,data:{type:"space-ids",spaceIds:[i]},headers:{[n().B3]:i}});var d,u;if("success"===t.type&&t.data.results.length>0&&t.data.results[0])a(null===(d=t.data.results[0])||void 0===d?void 0:d.id,null===(u=t.data.results[0])||void 0===u?void 0:u.spaceShortId);return"success"===t.type?t.data.results[0]??void 0:void 0}return(0,r().y)({environment:e,namespace:"PublicSpaceData",key:i,forceRefetch:l,getValue:async()=>{const t=await c.callApi({eventName:"getPublicSpaceData",environment:e,data:{type:"space-ids",spaceIds:[i]},headers:{[n().B3]:i}});var o,r;"success"===t.type&&t.data.results.length>0&&t.data.results[0]&&a(null===(o=t.data.results[0])||void 0===o?void 0:o.id,null===(r=t.data.results[0])||void 0===r?void 0:r.spaceShortId);return"success"===t.type?t.data.results[0]??void 0:void 0}})}));o(604341).exposeDebugValue("PublicSpaceDataStore",s);const l=s},151168:(e,t,o)=>{o.d(t,{TQ:()=>h,Zr:()=>m,Ot:()=>g,E5:()=>p,KF:()=>c,Os:()=>v,EE:()=>f,Q8:()=>u,ie:()=>d});o(814603),o(147566),o(198721);var n=()=>o(677338),r=()=>o(419494);const i=new class{constructor(e,t){this.localStorageStore=void 0,this.localStorageStore=new(r().Ay)({namespace:e,important:t,trackingType:"necessary"})}get(e){return this.localStorageStore.get(e)}set(e,t){return this.localStorageStore.set(e,t)}remove(e){return this.localStorageStore.remove(e)}}(r().Bq,!1);var a=()=>o(61844),s=()=>o(939768),l=()=>o(807778);function c(e){return Boolean("upwork"===e)}function d(e,t){(0,l().cB)(e,t)&&i.set("trialUpsell",e)}function u(){const e=(0,s().iW)(new URL(window.location.href).toString(),(0,n().JU)());null!=e&&e.trial_source&&(e.trial_source=void 0,(0,n().Fo)(e)),i.remove("trialUpsell")}function p(){var e;const t=null===(e=(0,n().JU)())||void 0===e?void 0:e.trial_source;return t&&c(t)?t:i.get("trialUpsell")??"plus"}function m(){return"business"===p()?"business":"plus"}function g(e){const t=p(),o=(0,a().Fo)();return e&&"upwork"!==t?o.enterprise:t&&"upwork"===t?o.upwork:o.default}function f(){return"upwork"===p()}function v(){return"perfmark"===p()}function h(){return i.get("performanceMarketingTerm")}},154489:(e,t,o)=>{o.d(t,{S:()=>r});var n=()=>o(292588);const r={table:o(798880).oo,recordColumnTypes:{id:n().A.UUID,version:n().A.Number,last_version:n().A.Number,email:n().A.String,given_name:n().A.String,family_name:n().A.String,profile_photo:n().A.String,onboarding_completed:n().A.Boolean,mobile_onboarding_completed:n().A.Boolean,clipper_onboarding_completed:n().A.Boolean,reverify:n().A.Boolean,name:n().A.String,is_banned:n().A.Boolean,suspended_time:n().A.Number},metaColumnTypes:{meta_user_id:n().A.UUID,meta_role:n().A.String}}},154807:(e,t,o)=>{o.d(t,{Du:()=>w,QQ:()=>b,SR:()=>A,Wi:()=>y,YG:()=>v,_D:()=>x,eO:()=>S,mQ:()=>k,xt:()=>h});var n=o(296540),r=()=>o(56366),i=()=>o(591779),a=()=>o(496603),s=()=>o(534177),l=()=>o(519839),c=()=>o(747100),d=()=>o(737230),u=()=>o(712505),p=()=>o(455994),m=()=>o(449476),g=()=>o(524165),f=()=>o(517223);const v=380,h=280,_=1040;function b(){return u().SIDEPEEK_MIN_WIDTH+h}function y(e){let{environment:t,isInPeek:o}=e;return m().A.state.isOpen?(0,g().oQ)(t).widthMinusPadding:o?"side_peek"===u().default.getPeekMode()&&u().default.getSidePeekWidth(t.WindowSizeStore.state.width)>_?v:h:d().Ay.state.width}function S(e){var t;let{environment:o,isInPeek:n}=e;if(m().A.state.isOpen)return y({environment:o,isInPeek:!1});const r=null===(t=u().default.peekTargetStore.state)||void 0===t||null===(t=t.getAssociatedCollectionStore())||void 0===t?void 0:t.getLayoutStore();return r&&"static_sidebar"===p().A.getPanelState("peek").displayStyle&&p().A.getPanelState("peek").isOpen&&0!==r.getModules().page_details.length?y({environment:o,isInPeek:n}):0}function w(e,t){const o="peek",a=(0,r().K8)((()=>e.WindowSizeStore.state.width),[e.WindowSizeStore]),s=(0,r().K8)((()=>u().default.state.preferredSidePeekWidth),[]),l=(0,r().K8)((()=>b()),[]),c=(0,r().K8)((()=>l),[l]),[d,m]=(0,n.useState)(!1),{displayStyle:g,isOpen:f}=(0,r().K8)((()=>{const e=p().A.getPanelState(o);return{displayStyle:e.displayStyle,isOpen:e.isOpen}}),[]),v=(0,i().ZC)(s),h=(0,i().ZC)(a),_=(0,i().ZC)(g),y=(0,r().K8)((()=>Boolean(t)),[t]);(0,n.useEffect)((()=>{y&&void 0!==v&&v!==s&&(s<l?f&&(p().A.setClosed(o),m(!0)):d&&(p().A.setOpen(o),m(!1)))}),[f,y,l,s,v,d]),(0,n.useEffect)((()=>{if(!t)return;if(void 0===h||h===a)return;const e="center_peek"===u().default.getPeekMode();a<c||e&&s<c?(p().A.setDisplayStyle({displayStyle:"popup",panelLocation:o}),p().A.setClosed(o)):(p().A.setDisplayStyle({displayStyle:"static_sidebar",panelLocation:o}),"popup"===_&&s<l&&p().A.setClosed(o))}),[t,c,l,a,o,s,_,h]),(0,n.useEffect)((()=>()=>{if(!p().A.state.detailsSidebarIncreasedSizeOfPeekView)return;const{clampedWidth:t}=k("closeDetailsSidebar"),o=e.WindowSizeStore.state.width;u().default.setSidePeekWidth(t,o),p().A.setSidebarIncreasedSizeOfPeekView(!1)}),[e])}function k(e){let t;if("openDetailsSidebar"===e){t=I(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Math.max(h+u().SIDEPEEK_MIN_WIDTH,u().default.state.preferredSidePeekWidth):u().default.state.preferredSidePeekWidth+h)}else"closeDetailsSidebar"===e?t=I(u().default.state.preferredSidePeekWidth-h):(0,s().HB)(e);return{clampedWidth:t,hadEffect:t!==u().default.state.preferredSidePeekWidth}}function I(e){return(0,a().qE)(e,u().SIDEPEEK_MIN_WIDTH,(0,c().QX)())}function A(e){const t=e.getLayoutStore();return!!t&&t.getModules().page_details.length>0}function x(e){const{collectionStore:t}=e;if(!A(t))return!1;const{count:o,isPropertiesModuleInPageDetails:n}=(0,f().pm)({collectionStore:t});if(o>0)return!0;if(n&&e.skipSpecialCaseForEmptyPropertiesGroup)return!1;return l().vo({collectionStore:t,collectionViewBlockStore:t.getParentBlockStore(),checkNavigableAncestorLocked:!1})&&n}},155004:(e,t,o)=>{o.d(t,{s:()=>s});var n=o(296540),r=()=>o(872994),i=o(474848);const a={WebkitUserSelect:"none",userSelect:"none",pseudoSelection:{background:"transparent"}},s=n.forwardRef(((e,t)=>{const{allowSelectionWithin:n,style:s,className:l,...c}=e,d=(0,r().y)(),u=(0,i.jsx)("div",{ref:t,contentEditable:!1,...(0,o(451306).AH)(l,!n&&a,s),...o(295740).t_,...c});return d?(0,i.jsx)(r().e,{void:!0,children:u}):u}));s.displayName="ContentEditableVoid"},155098:(e,t,o)=>{o.d(t,{U:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("pageBlock",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.625 11.25c0-.345.28-.625.625-.625h5.5a.625.625 0 110 1.25h-5.5a.625.625 0 01-.625-.625zm.625 2.375a.625.625 0 100 1.25h5.5a.625.625 0 100-1.25h-5.5z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M16.5 15.75a2.75 2.75 0 01-2.75 2.75h-7.5a2.75 2.75 0 01-2.75-2.75V4.25A2.75 2.75 0 016.25 1.5h4.086c.464 0 .909.184 1.237.513l4.414 4.414c.329.328.513.773.513 1.237v8.086zM5 4.25C5 3.56 5.56 3 6.25 3H9.5v2.75a2.75 2.75 0 002.75 2.75H15v7.25c0 .69-.56 1.25-1.25 1.25h-7.5C5.56 17 5 16.44 5 15.75V4.25zM14.44 7h-2.19C11.56 7 11 6.44 11 5.75V3.56L14.44 7z",clipRule:"evenodd"})]})})},156988:(e,t,o)=>{o.d(t,{Hx:()=>h,KX:()=>y,Nd:()=>m,OY:()=>f,V8:()=>b,gZ:()=>g,lR:()=>u,t4:()=>d,wE:()=>_,zE:()=>v});var n=()=>o(861017),r=()=>o(919709),i=()=>o(534177),a=()=>o(939768),s=()=>o(780054),l=()=>o(958163),c=()=>o(711319);function d(){const e=c().A.state,t=l().A.state;return e.open?e:t.open?t:void 0}function u(e){switch(e.type){case"text":return!!e.editingToken;case"image":return!!e.imageHyperlink;default:(0,i().HB)(e)}}function p(e,t){const o=d();if(o&&o.focusLinkInput!==e)switch(o.type){case"text":c().A.setState({...o,focusLinkInput:e,url:t?"":o.url});break;case"image":l().A.setState({...o,focusLinkInput:e,url:t?"":o.url});break;default:(0,i().HB)(o)}}function m(){p(!0);const e=d();e&&"text"===e.type&&v(!1)}function g(){p(!1)}function f(){p(!1,!0)}function v(e){const t=c().A.state;t.open&&t.focusTitleInput!==e&&c().A.setState({...t,focusTitleInput:e})}function h(e){if("image"===e.type)return e.imageHyperlink;const t="text"===e.type?e.editingToken:void 0;if(!t)return;const o=r().uPN(t),n=r().VtW(o);return n?r().cQR(n):void 0}function _(e){if(!e)return;const t=r().uPN(e);return r().VtW(t)?r().N8A(e):void 0}function b(e){return e.url||""}function y(e){const t=r().ctx(e);if(t&&"url"===t.type){const e=(0,n().parseRoute)({url:t.href,baseUrl:s().A.domainBaseUrl,publicDomainName:s().A.publicDomainName,isMobile:!1,protocol:void 0,currentUrl:void 0});return(0,n().Jx)(e)?{type:"notion",url:t.href,notionPage:e}:{type:"web",url:t.href}}const o=(0,a().q7)(e);if(o)return{type:"other",url:o}}},157857:(e,t,o)=>{o.d(t,{Z6:()=>y,ip:()=>w,jl:()=>b,lp:()=>h,nD:()=>k,sl:()=>S});o(18107),o(967357),o(898992),o(823215),o(354520),o(581454),o(737550);var n=()=>o(496506),r=()=>o(638458),i=()=>o(537012),a=()=>o(999515),s=()=>o(433847),l=()=>o(824862),c=()=>o(973647),d=()=>o(534177),u=()=>o(190019),p=()=>o(508496),m=()=>o(630116),g=()=>o(10984),f=()=>o(68465);const v=new WeakMap;function h(e){const t=v.get(e.automationStore);if(t)return t;{const t=new(n().default)((()=>b(e)),{debugName:"buttonAutomationAnalysisCachedStore"});return v.set(e.automationStore,t),t}}function _(e){const{action:t,automation:o,automationActionRegistryModule:n,formulasModule:i,automationStore:l,isLoggedIn:c,parentPage:d,typecheckContextValues:u}=e;if("http_request"===t.getType()&&!c)return{value:!1};const p=n.getActionRegistryItem(t.getType()),g=(0,r().Q)({automationModel:o,parentPage:d,formulasModule:i,formulaValueTypes:u}),f=a().q.runSync(l.getRecordModel,p.resolveExecutionDependencies(g,t));for(const r of f){const e=(0,m().Oo)(l,r.pointer);if(!e.isReady())return{error:"records_not_loaded"};const t=e.getRole();if(!t||(0,s().sG)(t,r.minimumRole)||!c&&(0,s().dI)(r.minimumRole,"reader"))return{value:!1}}return{value:!0}}function b(e){const t=e.automationStore.getModel();if(!t)return{editPermissionStatus:"unknown",executionPermissionStatus:"unknown",typecheckResult:void 0};const o=e.automationStore.getActionStores().map((e=>e.getModel()));if(!o.every((0,d().u0)((e=>(0,d().O9)(e)?{true:e}:{false:e}))))return{editPermissionStatus:"insufficient",executionPermissionStatus:"insufficient",typecheckResult:void 0};const n=(0,u().Z)({environment:e.environment,automationStore:e.automationStore,automationTypecheckModule:e.automationTypecheckModule,contextType:e.type,formulasModule:e.formulasModule,intl:e.intl});if(c().Q.isFail(n))return{editPermissionStatus:"unknown",executionPermissionStatus:"unknown",typecheckResult:n};for(const i of o){var r;const o=_({action:i,automation:t,automationActionRegistryModule:e.automationActionRegistryModule,formulasModule:e.formulasModule,automationStore:e.automationStore,isLoggedIn:e.isLoggedIn,parentPage:"button_block"===e.type?null===(r=e.pageStore)||void 0===r?void 0:r.getModel():void 0,typecheckContextValues:n.value.valueTypes});if("records_not_loaded"===o.error)return{editPermissionStatus:"loading",executionPermissionStatus:"loading",typecheckResult:void 0};if(!o.value)return{editPermissionStatus:"insufficient",executionPermissionStatus:"insufficient",typecheckResult:n}}return{editPermissionStatus:(0,i().Ls)({automationValue:t.getMinimumFieldsForPermissions(),actionValues:o.map((e=>({config:e.getConfig(),type:e.getType(),space_id:e.getSpaceId()})))}).some((t=>{const o=(0,m().Oo)(e.parentRecordStore,t.pointer).getRole();return!o||(0,s().sG)(o,t.minimumRequiredRole)}))?"insufficient":"sufficient",executionPermissionStatus:Object.values(n.value.actionValidationFailures).some((e=>{const t=e??[];return 0!==t.length&&t.some((e=>(0,d().O9)(e.execute)&&!e.execute))}))?"insufficient":"sufficient",typecheckResult:n}}function y(e,t){var o;const n=e.getModel(),r=null===(o=e.getSpaceStore())||void 0===o?void 0:o.getModel(),i=e.getActionStores(),a=i.filter((e=>e.isDefined())).map((e=>e.getModel())).filter(d().O9);if(!n||a.length!==i.length)return;const s=(0,f().t1)(e.environment);return{automation:n,automationActions:a,checkExperimentGate:e=>p().default.checkGate({gateName:e}),checkExperimentGroup:e=>p().default.getGroup(e),contextType:t,checkType:"canAddAction",isSubscribed:(0,g().y4)(),spaceModel:r,assistantFeatureGate:s}}function S(e){const{environment:t,automationStore:o,automationActionRegistryModule:n,automationTypecheckModule:r,contextType:a,formulasModule:p,intl:m}=e,f=t.currentUser.isLoggedIn(),v=o.getValue(),h=o.getModel();if(!h||!v)return{editPermissionStatus:"unknown",reason:"missing_automation_model"};if(!p)return{editPermissionStatus:"unknown",reason:"missing_formulas_dependency"};if(!n||!r)return{editPermissionStatus:"unknown",reason:"missing_automations_dependency"};const b=o.getActionStores().map((e=>e.getModel()));if(!b.every((0,d().u0)((e=>(0,d().O9)(e)?{true:e}:{false:e}))))return{editPermissionStatus:"unknown",reason:"missing_automation_action_model"};const y=(0,u().Z)({environment:t,automationStore:o,automationTypecheckModule:r,contextType:a,formulasModule:p,intl:m});if(c().Q.isFail(y))return{editPermissionStatus:"unknown",reason:"typecheck_error"};const S=b.length>0&&b.some((e=>!e.isType("slack_notification")));if(h.isType("event")&&S&&!(0,g().y4)())return{editPermissionStatus:"insufficient",reason:"free_workspace"};const w=b.filter((e=>e.isType("slack_notification")||e.isType("send_gmail_notification"))).filter((e=>{const t=_({action:e,automation:h,automationActionRegistryModule:n,formulasModule:p,automationStore:o,isLoggedIn:f,typecheckContextValues:y.value.valueTypes});return c().Q.isFail(t)||!t.value})).at(0);if((0,d().O9)(w)){var k;const e=null===(k=w.getConfig())||void 0===k?void 0:k.external_bot_id;return{editPermissionStatus:"insufficient",reason:"missing_permissions",relatedPointer:e?{table:l().GP,id:e}:void 0}}const I=(0,i().Ls)({automationValue:v,actionValues:b.map((e=>({config:e.getConfig(),type:e.getType()})))});for(const i of I){const e=o.getRecordRole(i.pointer);if(!e||(0,s().sG)(e,i.minimumRequiredRole))return{editPermissionStatus:"insufficient",reason:"missing_permissions",relatedPointer:i.pointer}}return{editPermissionStatus:"sufficient"}}function w(e){const{contextType:t,environment:o}=e,{device:n}=o,r=n.isIOS&&n.isMobileNative;return"event"===t&&!r}function k(e){const t=(null==e?void 0:e.getActionStores())??[];for(const n of t)if(n.isType("open_page")){var o;const e=n.getConfig();if("url"===(null==e||null===(o=e.target)||void 0===o?void 0:o.type))return e.target.url}}},158218:(e,t,o)=>{o.d(t,{Ay:()=>S,_l:()=>y,f9:()=>b});o(16280),o(898992),o(354520),o(672577);var n=o(296540),r=()=>o(700500),i=()=>o(304740),a=()=>o(778417),s=()=>o(186445),l=()=>o(846662),c=()=>o(129522),d=()=>o(489348),u=()=>o(630116),p=()=>o(915440),m=o(474848);const g={[r().xd.image]:36,[r().xd.audio]:24,[r().xd.video]:96,[r().xd.embed]:96,[r().xd.drive]:96,[r().xd.tweet]:96,[r().xd.framer]:96,[r().xd.maps]:96,[r().xd.gist]:96,[r().xd.invision]:96,[r().xd.pdf]:96,[r().xd.drawing]:200},f={[r().xd.image]:36,[r().xd.video]:96,[r().xd.embed]:246,[r().xd.maps]:96,[r().xd.framer]:96,[r().xd.tweet]:250,[r().xd.gist]:96,[r().xd.audio]:96,[r().xd.drive]:300,[r().xd.invision]:96,[r().xd.pdf]:96,[r().xd.columnList]:"page_width",[r().xd.drawing]:300,[r().xd.code]:"300.0"},v={display:"contents"},h=96,_=96;let b=function(e){return e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical",e[e.Corner=2]="Corner",e}({}),y=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});const S=function(e){const t=(0,n.useRef)(void 0),s=(0,o(484714).v3)(),g=(0,n.useRef)(null),f=(0,o(56366).uB)(e.blockResizerStore,o(891279).A),h=(0,n.useCallback)((n=>{n.preventDefault();const i=e.resizeComponent.getNode();if(!(i&&i instanceof Element))return;let m=0;if(g.current){const e=(0,o(953418).NM)(g.current);e&&(m=e.getBoundingClientRect().width)}let v=0;const h=e.store.getRecordStoreUIParent(),_=h&&h.findRecordStoreUIAncestor((e=>e instanceof u().Bv)).ancestor;if(_){const e=c().K.getRect(_);e&&(v=e.width);const t=_.getRecordStoreUIParent(),o=t&&t.findRecordStoreUIAncestor((e=>e instanceof u().Bv)).ancestor;if("tab"===(null==o?void 0:o.getType())){const e=c().K.getRect(o);e&&(v=e.width)}}const b=function(e){const t=e.getRecordStoreUIRoot(),o=d().A.find((e=>e.store===t));if(o)return o.getContentInnerWidth()}(e.store)||0,y=o(502438).default.state.stores.filter((e=>function(e){const t=e&&e.getType();return t&&(r().Ib[t]||(0,l().gV)(e))}(e)));let S;S=o(496603).mK(y,e.store)?y:[e.store];const{block_width:w,block_height:k,block_full_width:I,block_page_width:A}=e.store.getFormat();f.setState({...f.state,dragging:!0,temporaryHeight:k,temporaryWidth:w,temporaryFullWidth:I,temporaryPageWidth:A}),p().A.setState({...p().A.state,isResizing:!0}),a().IU({environment:s});const x=i.getBoundingClientRect();t.current={resizingBlocks:S,startWidth:x.width,startHeight:x.height,parentWidth:v,pageWidth:b,isRootChild:e.store.isChildOfRecordStoreUIRoot(),startScrollerWidth:m,didDragMove:!1}}),[f,s,e.resizeComponent,e.store]),_=(0,n.useCallback)((o=>{let{diffX:n}=o;if(!t.current)return;t.current.didDragMove=!0;const{temporaryHeight:r}=f.state,{width:a,isFullWidth:l,isPageWidth:c}=I({diffX:n,dragState:t.current,resizeHorizontally:e.resizeHorizontally,store:e.store,resizerAlignment:e.resizerAlignment,environment:s});if(e.preserveScale){const e=l?r||i().q3:r;f.setState({...f.state,temporaryWidth:a,temporaryFullWidth:l,temporaryPageWidth:c,temporaryHeight:e})}else f.setState({...f.state,temporaryWidth:a,temporaryFullWidth:l,temporaryPageWidth:c})}),[f,s,e.preserveScale,e.resizeHorizontally,e.resizerAlignment,e.store]),y=(0,n.useCallback)((o=>{let{diffY:n}=o;if(!t.current)return;t.current.didDragMove=!0;const{height:r}=w({diffY:n,dragState:t.current,resizeVertically:e.resizeVertically,store:e.store});f.setState({...f.state,temporaryHeight:r})}),[f,e.resizeVertically,e.store]),S=(0,n.useCallback)((o=>{let{diffX:n,diffY:r}=o;if(!t.current)return;t.current.didDragMove=!0;const{width:i,isFullWidth:a,isPageWidth:l}=I({diffX:n,resizeHorizontally:e.resizeHorizontally,store:e.store,resizerAlignment:e.resizerAlignment,dragState:t.current,environment:s}),{height:c}=w({diffY:r,dragState:t.current,resizeVertically:e.resizeVertically,store:e.store});f.setState({...f.state,temporaryWidth:i,temporaryHeight:c,temporaryFullWidth:a,temporaryPageWidth:l})}),[f,s,e.resizeHorizontally,e.resizeVertically,e.resizerAlignment,e.store]),k=(0,n.useCallback)((t=>e.resizerType===b.Horizontal?_(t):e.resizerType===b.Vertical?y(t):e.resizerType===b.Corner?S(t):void 0),[S,_,y,e.resizerType]),A=(0,n.useCallback)((()=>{f.setState({...f.state,dragging:!1,temporaryPageWidth:void 0,temporaryFullWidth:void 0,temporaryWidth:void 0,temporaryHeight:void 0}),a().IU({environment:s}),p().A.setState({...p().A.state,isResizing:!1}),t.current=void 0}),[f,s]),x=(0,n.useCallback)((n=>{if(!t.current)return;const r=f.state;if(t.current.didDragMove&&r.dragging){const{temporaryPageWidth:n,temporaryFullWidth:r,temporaryWidth:i,temporaryHeight:a}=f.state;o(317909).createAndCommit({userAction:"BlockResizer.handleDragEnd",environment:s,canUndo:!0,perform:e=>{t.current&&o(896628).zA({stores:t.current.resizingBlocks,update:{block_height:a,block_width:i,block_full_width:r,block_page_width:n},transaction:e})}});const l=e.store.getType();l&&o(437219).Wn(s,{block_type:l,block_height:a,block_width:i,block_full_width:r,block_page_width:n})}A()}),[f,A,s,e.store]);return(0,m.jsx)(o(603820).A,{onDraggableDragStart:h,onDraggableDragMove:k,onDraggableDragEnd:x,onDraggableDragCancel:A,preventSidebar:!0,render:t=>(0,m.jsx)("div",{ref:g,style:v,className:o(38337).cZe,...t,children:e.children})})};function w(e){const t=function(e){const{dragState:t,diffY:o,resizeVertically:n,store:r}=e;if(t){if(n){const e=r.getType(),n=e&&g[e]||h;return Math.max(t.startHeight+o,n)}return t.startHeight}return 0}(e);return{height:Math.min(t,i().X6)}}function k(e){const{dragState:t,resizeHorizontally:o,store:n,resizerAlignment:i}=e;let a=e.diffX;if(!t)throw new Error("No start rect.");(function(e){const t=e.getModel();return e.isChildOfRecordStoreUIRoot()&&((null==t?void 0:t.isType(r().H_))||(0,l().gV)(e))})(n)&&(a*=2);let s=t.startWidth;o&&(i===y.Left?s-=a:i===y.Right&&(s+=a));const c=n.getType(),d=c&&f[c]||_,u="page_width"===d?Math.min(t.parentWidth,t.pageWidth):d;return u&&s<u&&(s=u),s}function I(e){const{dragState:t,store:o,environment:n}=e,i=k(e),a=i<144?12:48;const c=Math.round(i/a)*a,d=function(e,t,o){if(e)return e.isRootChild?e.pageWidth<t+o&&e.pageWidth>t-o:e.parentWidth<t+o;return!1}(e.dragState,i,a),u=function(e){const{dragState:t,width:o,round:n,environment:i,store:a}=e;if(t&&t.isRootChild){let e=t.startScrollerWidth;const c=a.getModel();return!c||c.isType(r().y4)||(0,l().gV)(a)||(e-=2*(0,s().F8)(i)),e<o+n}return!1}({dragState:t,width:i,round:a,environment:n,store:o})&&!d;return{width:c,isFullWidth:u,isPageWidth:d}}},158277:(e,t,o)=>{o.d(t,{e:()=>r});var n=()=>o(292588);const r={table:o(158009).f3,recordColumnTypes:{id:n().A.String,space_id:n().A.UUID,space_permission_group_id:n().A.UUID,user_id:n().A.UUID,version:n().A.Number,last_version:n().A.Number,removed_at:n().A.Number},metaColumnTypes:{meta_user_id:n().A.UUID,meta_role:n().A.String}}},159495:(e,t,o)=>{o.d(t,{$S:()=>d,I4:()=>s,IQ:()=>c,L_:()=>l,c0:()=>u});o(898992),o(354520);var n=()=>o(206267),r=()=>o(755199),i=()=>o(102586);function a(e,t){return e.id===t.id}function s(e,t,o){const n=c(t).slice(),s=n.findIndex((t=>a(e,t)));-1===s?n.unshift(e):n.splice(s,1,e),(0,i().Uj)(e.action,t,o),r().mJ({userSettingsStore:t,transaction:o,data:{favorite_ai_actions:n}})}function l(e,t){for(const o of c(e))if((0,i().if)(o.action,t))return o}function c(e){var t;return(null===(t=e.getModel())||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.favorite_ai_actions)??[]}function d(e,t,o){const n=c(t).filter((t=>!a(t,e)));r().mJ({userSettingsStore:t,transaction:o,data:{favorite_ai_actions:n}})}function u(e){return{id:n().JW(),name:e.promptTitle??"",action:{...e,promptTitle:void 0}}}},159588:(e,t,o)=>{o.d(t,{Jg:()=>i,bM:()=>r,ic:()=>s,sQ:()=>a});const n=4,r="150ms ease";function i(){return{borderRadius:6}}function a(e){let{isMobile:t}=e;return t?{}:{borderRadius:6,display:"flex",marginLeft:0,marginRight:0,transition:`background ${r}`}}function s(){return{paddingLeft:12-n,paddingRight:12-n}}},160475:(e,t,o)=>{o.d(t,{t:()=>i});var n=()=>o(989423),r=()=>o(508496);function i(e){const{environment:t,...o}=e;r().default.logEvent("import_entrypoint_cta",e.action),(0,n().u4)({environment:t,event:{eventName:"import_entrypoint_cta",eventProperties:o}})}},160568:(e,t,o)=>{o.d(t,{BX:()=>u,KC:()=>_,RZ:()=>m,Xq:()=>v,YT:()=>c,_I:()=>y,_o:()=>f,bk:()=>k,er:()=>p,hB:()=>l,hS:()=>w,ki:()=>g,oF:()=>S,oO:()=>d,pM:()=>b});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454);var n=()=>o(498212),r=()=>o(534177),i=()=>o(989423),a=()=>o(644914),s=()=>o(508496);function l(e,t){const o={is_paid:!1,...t};i().u4({environment:e,event:{eventName:"duplicate_template",eventProperties:o}}),s().default.logEvent("duplicate_template",o.from,o)}function c(e,t){i().vd(e,"duplicate_template_attempt",t)}function d(e,t){i().vd(e,"template_modal_open",{...t,...(0,a().hX)({environment:e})}),s().default.logEvent("template_modal_open",1)}function u(e,t){const{team_id:o,...n}=t;i().vd(e,"template_modal_accept",n,{forceOverrideAutomaticEventData:{team_id:o}}),s().default.logEvent("template_modal_accept",1)}function p(e,t){i().vd(e,"create_collection_template",t),s().default.logEvent("create_collection_template",1)}function m(e,t){i().vd(e,"activate_collection_template",t),s().default.logEvent("activate_collection_template",1)}function g(e,t){i().u4({environment:e,event:{eventName:"select_template",eventProperties:{is_keyboard:t.is_keyboard,from:t.from,template_type:t.template_type}}})}function f(e,t){i().vd(e,"collection_template_action",t)}function v(e,t){let{from:o,preset_uri:n,created_block_stores:i,destination_team_id:a}=t;const s=[],l=[];for(const r of i){var c;const e=null===(c=r.getCollectionStore())||void 0===c?void 0:c.getDatabaseType();e&&(l.push(r.id),s.push(e))}const d=i.map((e=>{var t;return null===(t=e.getFormat())||void 0===t?void 0:t.app_id})).filter(r().O9);h(e,{from:o,preset_uri:n,created_page_ids:l,database_types:s,destination_team_id:a,app_ids:[...new Set(d)]})}function h(e,t){i().vd(e,"create_app_template",t)}function _(e,t){i().vd(e,"delete_app_template",t)}function b(e,t){i().vd(e,"create_typed_dbs_in_team_latency",t)}function y(e,t){i().vd(e,"apply_preset_features",t)}function S(e,t){i().vd(e,"template_duplication_v2_modal_close",{template_block_id:t.templateBlockId&&(0,n().ot)(t.templateBlockId)})}function w(e,t){i().vd(e,"template_duplication_v2_account_switcher_open",{template_block_id:(0,n().ot)(t.templateBlockId),num_of_users:t.numOfUsers})}function k(e,t){i().vd(e,"template_duplication_v2_switch_space",{template_block_id:(0,n().ot)(t.templateBlockId),template_destination_space_id:t.templateDestinationSpaceId&&(0,n().ot)(t.templateDestinationSpaceId),num_of_users:t.numOfUsers})}},161132:(e,t,o)=>{o.d(t,{Ce:()=>c,W0:()=>p,sw:()=>m,xs:()=>l});var n=()=>o(857639),r=()=>o(763884),i=()=>o(79628),a=()=>o(20822),s=()=>o(41161);async function l(){if("storage"in navigator&&"estimate"in navigator.storage){const{quota:e,usage:t}=await navigator.storage.estimate();if("number"==typeof e&&"number"==typeof t)return{quota:e,usage:t}}if("webkitPersistentStorage"in navigator){const e=navigator.webkitPersistentStorage;if("queryUsageAndQuota"in e)return new Promise((t=>{e.queryUsageAndQuota(((e,o)=>{t("number"==typeof o&&"number"==typeof e?{usage:e,quota:o}:void 0)}),(()=>t(void 0)))}))}}async function c(){if(navigator.storage&&navigator.storage.persist)try{const e=await navigator.storage.persist();return n().clientLogglyEnvironmentData.isPersistent=e,e}catch(e){console.trace("Persistence is disabled",e)}}const d=.9,u=15*o(720665).A2;function p(e){const{quota:t,usage:o}=e;return o/t<=d&&t>=u}function m(e){const{isMobileNative:t,userId:o}=e??{},n=a().A.state;let l;!0===t&&(l=i().A.get()),o?(s().A.clearForUser(o),r().A.clearStorageForUser(o)):localStorage.clear(),a().A.setState(n),!0===t&&l&&i().A.set(l)}},162674:(e,t,o)=>{o.d(t,{AP:()=>d,Ao:()=>a,Ez:()=>m,GE:()=>b,KK:()=>p,X$:()=>_,ZL:()=>i,ZX:()=>v,bS:()=>u,cF:()=>g,f_:()=>l,hY:()=>s,iW:()=>h,kx:()=>f,lr:()=>c});var n=()=>o(989423),r=()=>o(644914);function i(e){let{environment:t,from:o}=e;(0,n().vd)(t,"open_home",{from:o,...(0,r().hX)({environment:t})})}function a(e){let{environment:t,args:o}=e;(0,n().vd)(t,"home_loaded",o)}function s(e){let{environment:t}=e;(0,n().vd)(t,"open_home_more_menu",{})}function l(e){const{environment:t,show:o,feature:r,from:i}=e;(0,n().vd)(t,"toggle_home_feature",{show:o,feature:r,from:i})}function c(e){let{environment:t,oldValue:o,newValue:r,from:i}=e;(0,n().vd)(t,"change_start_page",{old_value:o,new_value:r,from:i})}function d(e){let{environment:t,index:o,teamId:r}=e;(0,n().vd)(t,"change_home_trending_source",{source_type:r?"team":"space",selected_index:o,selected_team_id:r})}function u(e){let{environment:t,from:o}=e;(0,n().vd)(t,"click_empty_my_tasks",{from:o})}function p(e){let{environment:t,from:o}=e;(0,n().u4)({environment:t,event:{eventName:"click_empty_custom_db",eventProperties:{from:o}}})}function m(e){let{environment:t,from:o}=e;(0,n().vd)(t,"close_task_migration_modal",{from:o})}function g(e,t){(0,n().vd)(e,"open_home_tip",t)}function f(e,t){(0,n().vd)(e,"check_home_tip",t)}function v(e,t){(0,n().vd)(e,"show_completed_home_tips",t)}function h(e,t){(0,n().vd)(e,"home_tips_modal_error",t)}function _(e){let{environment:t}=e;(0,n().vd)(t,"visit_home_help_page")}function b(e){let{environment:t,firstUnloadedCachePageIndex:o}=e;(0,n().u4)({environment:t,event:{eventName:"home.recents.first_unloaded_cache_page_index",eventProperties:{first_unloaded_cache_page_index:o}}})}},164575:(e,t,o)=>{o.d(t,{R5:()=>I,pG:()=>k,Im:()=>w});o(18107),o(967357);var n=()=>o(700500),r=(o(296540),()=>o(340498)),i=o(474848);const a={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{fillRule:"evenodd",d:"M5.5 2.375A2.125 2.125 0 0 0 3.375 4.5v5.25c0 1.174.951 2.125 2.125 2.125H13a2.125 2.125 0 0 0 2.125-2.125V4.5A2.125 2.125 0 0 0 13 2.375zM4.625 4.5c0-.483.392-.875.875-.875H13c.483 0 .875.392.875.875v5.25a.875.875 0 0 1-.875.875H5.5a.875.875 0 0 1-.875-.875z",clipRule:"evenodd"}),(0,i.jsx)("path",{d:"M3.375 14.12c0-.345.28-.625.625-.625h12a.625.625 0 1 1 0 1.25H4a.625.625 0 0 1-.625-.625m0 2.88c0-.345.28-.625.625-.625h8.55a.625.625 0 1 1 0 1.25H4A.625.625 0 0 1 3.375 17"})]})},s=(0,r().wt)("caption",a);const l={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 1.633 15.075 4.6 4.6 0 0 1-.228-1.23 6.375 6.375 0 1 1 4.815-4.814q.643.032 1.23.227A7.625 7.625 0 0 0 10 2.375"}),(0,i.jsx)("path",{d:"M7.365 9.665c.49 0 .88-.46.88-1.02s-.39-1.02-.88-1.02-.88.46-.88 1.02.39 1.02.88 1.02m-.187 1.872a.625.625 0 0 1 .867.169 2.36 2.36 0 0 0 1.96 1.044c.812 0 1.536-.416 1.96-1.044a.625.625 0 0 1 1.036.698A3.62 3.62 0 0 1 10.005 14a3.6 3.6 0 0 1-2.996-1.596.625.625 0 0 1 .169-.867m5.457-1.872c.49 0 .88-.46.88-1.02s-.39-1.02-.88-1.02-.88.46-.88 1.02.39 1.02.88 1.02M16 19.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7m1.969-4.094h-1.375v-1.375a.625.625 0 0 0-1.25 0v1.375h-1.375a.625.625 0 0 0 0 1.25h1.375v1.375a.625.625 0 1 0 1.25 0v-1.375h1.375a.625.625 0 0 0 0-1.25"})]})},c=(0,r().wt)("emojiFacePlus",l),d={viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"m5.58 11.757.685 1.855a.625.625 0 0 0 1.172-.434L4.985 6.544a.863.863 0 0 0-1.62 0l-2.45 6.634a.625.625 0 0 0 1.172.434l.686-1.855zm-.463-1.25H3.234l.941-2.548zm4.26-4.527c.345 0 .625.28.625.625v6.165h3.147a.625.625 0 1 1 0 1.25H9.377a.625.625 0 0 1-.625-.625v-6.79c0-.345.28-.625.625-.625m3.147.625c0-.345.28-.625.625-.625h5.35a.625.625 0 1 1 0 1.25h-2.05v6.165a.625.625 0 0 1-1.25 0V7.23h-2.05a.625.625 0 0 1-.625-.625"})},u=(0,r().wt)("textAlt",d);var p=()=>o(441467),m=()=>o(730307),g=()=>o(930545),f=()=>o(878377),v=()=>o(231722),h=()=>o(792002),_=()=>o(129522),b=()=>o(24157),y=()=>o(416726);const S=(0,o(959013).YK)({commentName:{id:"action.comment.name",defaultMessage:"Comment"},captionName:{id:"action.caption.name",defaultMessage:"Caption"},altTextName:{id:"action.altText.name",defaultMessage:"Alt text"},reactName:{id:"action.react.name",defaultMessage:"React"}}),w=(0,y().Fw)({key:"comment",displayName:S.commentName,analyticsName:S.commentName.defaultMessage,svg:o(49621).h,hideFromSlashActionMenu:!0,validators:[g().zp],shortcuts:["comment"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:r,lazyDependencies:{formulasModule:i}}=e;const a=t[0],s=null==a?void 0:a.getModel();if(a){const e="editing"===b().default.state.mode&&b().default.state.multiSelection;if(e&&!(0,v().kM)(e)&&(e.start.store.id===a.id||null!=s&&s.isType("table")&&"properties"===e.start.store.path[0]&&e.start.store.path[1]&&(a.getFormatStore().getKeyStore("table_block_column_order").getValue()??[]).includes(String(e.start.store.path[1]))))p().hN({environment:r,blockStore:a,multiSelection:e,formulasModule:i});else if(a.isDefined()&&null!=s&&s.isType(n().uP)){const e=a.getTitleStore(),t=e&&(0,h().s6)(e);if(e&&t&&t.endIndex>0){const o={startIndex:0,endIndex:t.endIndex};p().hN({environment:r,blockStore:a,multiSelection:(0,v().$U)({store:e,selection:o}),rect:_().K.getRect(a),formulasModule:i})}}else if(a.getAssociatedCollectionStore()){var l;const e=o(299545).oC(a,{recursivelyLoadAllDiscussions:!1}),t=o(57618).A.findBlockPropertyValue(a,"title"),n=null==t||null===(l=t.getNode())||void 0===l?void 0:l.getBoundingClientRect();e>0?o(112873).B4({environment:r,blockStore:a,shouldFocusDiscussion:!0,analyticsFrom:"db_page_comments",rect:n,recursivelyLoadAllDiscussions:!1}):(0,m().l)({environment:r,blockStore:a,rect:n})}else(0,m().l)({environment:r,blockStore:a})}}}),k=(0,y().Fw)({key:"caption",displayName:S.captionName,analyticsName:S.captionName.defaultMessage,svg:s,validators:[f().p2L,f().AU6(f().vEP),f().vXb,f().z9l,f().or([f().i5y("source"),f().i5y("link"),f().Xjv("code")])],shortcuts:["caption"],closeParentMenu:!0,track:{actionName:"init_edit_caption"},action:(e,t,n)=>{let{blocks:r}=t;const i=r.at(0);i&&(o(797265).pG(i),e())}}),I=(0,y().Ls)({key:"alt text",displayName:S.altTextName,analyticsName:S.altTextName.defaultMessage,svg:u,validators:[f().vXb,f().Xjv(n().xd.image),f().i5y("source"),f().or([f().i5y("alt_text"),f().Uo6([f().p2L,f().AU6(f().vEP)])])],closeParentMenu:!0,track:{actionName:"init_edit_alt_text"},action:(e,t,n)=>{let{blocks:r,environment:i}=t;const a=r.at(0);a&&(o(296511).h({environment:i,blockStore:a,entrypoint:"block_menu"}),e())}});(0,y().Fw)({key:"react",displayName:S.reactName,analyticsName:S.reactName.defaultMessage,svg:c,validators:[f().p2L,f().AU6(f().vEP),o(792609).Y,f().AU6(f()._fc),g().bn,f().or([f().vXb,o(202786).T]),f().AU6(f().yAQ),f().SQN("block_reactions")],shortcuts:["react"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:r,lazyDependencies:{formulasModule:i}}=e;const a=t[0],s=null==a?void 0:a.getModel();if(a){const e="editing"===b().default.state.mode&&b().default.state.multiSelection;if(e&&!(0,v().kM)(e)&&(e.start.store.id===a.id||null!=s&&s.isType("table")&&"properties"===e.start.store.path[0]&&e.start.store.path[1]&&(a.getFormatStore().getKeyStore("table_block_column_order").getValue()??[]).includes(String(e.start.store.path[1]))))p().of({environment:r,blockStore:a,multiSelection:e,formulasModule:i});else if(a.isDefined()&&null!=s&&s.isType(n().uP)){const e=a.getTitleStore(),t=e&&(0,h().s6)(e);if(e&&t&&t.endIndex>0){const o={startIndex:0,endIndex:t.endIndex};p().of({environment:r,blockStore:a,multiSelection:(0,v().$U)({store:e,selection:o}),rect:_().K.getRect(a),formulasModule:i})}}else(0,o(517288).O)({environment:r,blockStore:a,formulasModule:i})}}})},166386:(e,t,o)=>{o.d(t,{ER:()=>m,J5:()=>a,Jf:()=>d,OJ:()=>s,Pz:()=>p,b_:()=>g,e8:()=>u,hZ:()=>_,i:()=>h,iJ:()=>c,kd:()=>f,rM:()=>b,u6:()=>l,vk:()=>v});o(898992),o(354520),o(672577),o(908872);var n=()=>o(244641),r=()=>o(534177),i=()=>o(258037);function a(e){if(!e)return!1;switch(e){case"ai_fifty_percent":return!0;case"team_three_months":case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"resurrection_offer":case"enterprise_annual":case"new_year_2025":case"lic_25":case"lic_50":return!1;default:(0,r().HB)(e)}}function s(e){if(!e)return!1;switch(e){case"ai_fifty_percent":case"team_three_months":case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"enterprise_annual":return!0;case"new_year_2025":case"lic_25":case"lic_50":case"resurrection_offer":return!1;default:(0,r().HB)(e)}}function l(e){if(!e)return!1;return"resurrection_offer"===("string"==typeof e?e:e.campaign)}function c(e){switch(e){case"team_three_months":case"ai_fifty_percent":case"lic_50":case"resurrection_offer":case"new_year_2025":return.5;case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"enterprise_annual":return.1;case"lic_25":return.25;default:(0,r().HB)(e)}}function d(e,t,o){if(e&&t&&o)switch(e){case"team_three_months":case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"enterprise_annual":return;case"ai_fifty_percent":return"ai"===t;case"resurrection_offer":return"plus"===t&&"month"===o;case"lic_25":case"lic_50":return"plus"===t||"business"===t;case"new_year_2025":return"ai"===t&&"month"===o;default:(0,r().HB)(e)}}function u(e,t){const o=e.filter((e=>e.offer.type===t));if(0!==o.length)return 1===o.length?o[0]:o.reduce(((e,t)=>e.startDateMs>t.startDateMs?e:t))}function p(e){if(e)return i().bC.find((t=>t.campaign===e))}function m(e,t){const o=f(e);return Math.round(o.diff(t??n().c9.now(),"days").days)}function g(e){return n().dw.fromObject(e.duration)}function f(e){return n().c9.fromMillis(e.endDateMs)}function v(e,t){if(!e)return 0;if("coupon"!==e.type)return 0;const o="decimal_number"===t?.01:1;return e.percentOff*o}function h(e){return e&&"trial"===e.offer.type?e.offer.subscriptionTier:"plus"}function _(e){if(!e)return!1;const t=u(e,"coupon");return!!t&&t.endDateMs>Date.now()}function b(e){return f(e)>n().c9.now()}},167355:(e,t,o)=>{o.d(t,{F:()=>n});const n=(0,o(340498).xh)("exclamationMarkCircle",{default:{loader:()=>o.e(70678).then(o.bind(o,970678))},small:{loader:()=>o.e(71300).then(o.bind(o,371300))},mini:{loader:()=>o.e(13208).then(o.bind(o,513208))},micro:{loader:()=>o.e(26545).then(o.bind(o,126545))},large:{loader:()=>o.e(64888).then(o.bind(o,664888))},max:{loader:()=>o.e(64888).then(o.bind(o,664888))}})},168687:(e,t,o)=>{o.d(t,{t:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("checkPartial",{viewBox:"0 0 14 14",svg:(0,n.jsx)("rect",{x:"1.75",y:"6.125",width:"10.5",height:"1.75"})})},170253:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isDragging:!1,willDrag:!1}}}const r=n},170722:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isActive:!1,isAnimatingClosed:!1,top:0,left:0}}}const r=(0,o(604341).exposeDebugValue)("RichTextMenuStore",new n)},171018:(e,t,o)=>{o.d(t,{A6:()=>c,Ep:()=>l,YB:()=>i,es:()=>d});var n=()=>o(757695),r=()=>o(712505);class i extends n().default{getInitialState(){return{forceShowProperties:!1,searchOpen:!1,searchQuery:""}}}const a="unnamed";class s extends n().default{getInitialState(){return{pagePropertiesStoreMap:{}}}getNewEditorPagePropertiesStore(e){var t;const o=e||a;if(null!==(t=this.state.pagePropertiesStoreMap)&&void 0!==t&&t[o])return this.state.pagePropertiesStoreMap[o];const n=new i,r={pagePropertiesStoreMap:{...this.state.pagePropertiesStoreMap,[o]:n}};return this.setState(r),n}}const l=new s,c=new s;function d(e){const t=e||a;return(r().default.state.open?c:l).state.pagePropertiesStoreMap[t]}},172079:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(757695).default.createValue(!1)},172385:(e,t,o)=>{o.d(t,{EY:()=>d,X_:()=>l,YQ:()=>c});o(814603),o(147566),o(198721);var n=()=>o(498212),r=()=>o(939768),i=()=>o(584262),a=()=>o(569238),s=()=>o(427704);function l(e){const t=s().JZ.chat,o={};return e.configureOpenInDesktopApp&&(o.configureOpenInDesktopApp="true"),e.pageVisitSource&&(o[i().k3]=String(e.pageVisitSource)),e.peekMode&&(o.pm=e.peekMode),e.peekViewBlockId&&(o[a().Uu]=(0,n().Xw)(e.peekViewBlockId)),"assistantQueryPrefill"in e&&e.assistantQueryPrefill&&(o.aq=e.assistantQueryPrefill),(0,r().Gm)({url:t,query:o})}function c(e){const{currentUrl:t,assistantQueryPrefill:o,assistantTargetRedirect:n}=e,r=new URL(t);return void 0!==o&&r.searchParams.set("aq",o),void 0!==n&&r.searchParams.set("target",n),r.toString()}function d(e){const{pageId:t,scrollToBlockId:o,pageVisitSource:s,isMobile:l,peekModeParam:c}=e,d={};return s&&(d[i().k3]=String(s)),l?(0,r().Gm)({url:`/${(0,n().Xw)(t)}`,hash:o&&(0,n().Xw)(o)}):(c&&(d.pm=c),d[a().Uu]=(0,n().Xw)(t),(0,r().Gm)({url:"/chat",query:d,hash:o&&(0,n().Xw)(o)}))}},174636:(e,t,o)=>{o.d(t,{R:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{inProgress:!1,isPublicSync:!1,isPrivateSync:!1,selection:{allSelected:!0,selectedChannels:[],excludedChannels:[],joinFutureChannels:!0,isDisconnecting:!1},isSyncCompleted:!1,currentScreen:"none",sessionId:o(206267).JW(),analyticsFrom:"unknown",authUrl:void 0,canQuery:!0,connectedApps:void 0,noChannelsSelected:void 0,ingestionProgress:void 0,gridSetupUrl:void 0,isSlackGridAiConnectorEnabled:!1,isLoaded:!1}}}const r=new n;(0,o(604341).exposeDebugValue)("slackUniversalQnAConnectionStore",r)},175947:(e,t,o)=>{o.d(t,{$C:()=>i,Hi:()=>r,Qy:()=>a,Uu:()=>s,ek:()=>c,jq:()=>d,pz:()=>u});var n=()=>o(418135);const r=52,i=45,a=44,s=44,l=30;function c(e){return e?s:a}function d(e){return 2*c(e)}function u(e,t,o){return(e&&!t?(0,n().JT)(o):12)+l}},176072:(e,t,o)=>{o.d(t,{D8:()=>a,EC:()=>i,Z6:()=>c,pl:()=>d,rd:()=>u});var n=()=>o(496603),r=()=>o(730688);function i(e){const{store:t,getItemsPerRowForSection:o,sections:n,disableKeyboardArrowWrap:r}=e,{focus:i}=t.state;if(void 0===i.indexLocal)return c({store:t,sections:n,indexGlobal:0});const a=n[i.section],d=o(a.key),u=i.indexLocal+d,p=a.items.length-1;if(u<=p)return c({store:t,sections:n,indexLocal:{section:i.section,indexLocal:u}});const m=function(e){const{indexLocal:t,section:o,itemsPerRow:n}=e,r=l({indexLocal:t,section:o,itemsPerRow:n});if(!r)return;const i=s({section:o,itemsPerRow:n});if(!i)return;return r.rowsBefore===i.rowsBefore}({indexLocal:i.indexLocal,section:a,itemsPerRow:d});if(void 0===m)return;if(!1===m)return c({store:t,sections:n,indexLocal:{section:i.section,indexLocal:p}});const g=function(e){const{currentSection:t,sections:o,disableWrap:n}=e;if(0===o.length)return;if(t&&t>=o.length&&n)return;const r=void 0===t?0:t+1;if(r>=o.length&&n)return;const i=r%o.length,a=o[i];if(!a)return;return{index:i,section:a}}({currentSection:i.section,sections:n,disableWrap:r});if(!g)return;const f=i.indexLocal%d,v=o(g.section.key);return g.section.items.length<=f||v<=f?c({store:t,sections:n,indexLocal:{section:g.index,indexLocal:0}}):c({store:t,sections:n,indexLocal:{section:g.index,indexLocal:f}})}function a(e){const{store:t,getItemsPerRowForSection:o,sections:n,disableKeyboardArrowWrap:i}=e,{focus:a}=t.state;if(void 0===a.indexLocal){return c({store:t,indexGlobal:r().i2(n)-1,sections:n})}const l=o(n[a.section].key),d=a.indexLocal-l;if(d>=0)return c({store:t,sections:n,indexLocal:{section:a.section,indexLocal:d}});const u=function(e){const{currentSection:t,sections:o,disableWrap:n}=e;if(0===o.length)return;if(0===t||void 0===t){if(n)return;const e=o.length-1,t=o[e];if(!t)return;return{index:e,section:t}}const r=o[t-1];if(!r)return;return{index:t-1,section:r}}({currentSection:a.section,sections:n,disableWrap:i});if(!u)return;const p=o(u.section.key),m=s({section:u.section,itemsPerRow:p});if(!m)return;const g=a.indexLocal%l;if(m.column<g)return c({store:t,sections:n,indexLocal:{section:u.index,indexLocal:m.indexLocal}});{const e=m.rowsBefore*p+g;return c({store:t,sections:n,indexLocal:{section:u.index,indexLocal:e}})}}function s(e){const{section:t,itemsPerRow:o}=e;if(0===t.items.length)return;if(0===o)return;const n=t.items.length-1,r=l({indexLocal:n,section:t,itemsPerRow:o});return r?{indexLocal:n,...r}:void 0}function l(e){const{indexLocal:t,section:o,itemsPerRow:n}=e;if(!(n<=0||t>=o.items.length))return{rowsBefore:Math.trunc(t/n),column:t%n}}function c(e){const{store:t,sections:o}=e;if(e.indexLocal){const n=r().WK(e.indexLocal,o);if(!r().SG(e.indexLocal,o))return;t.setState({...t.state,focus:{...e.indexLocal,indexGlobal:n,footerFocused:!1}})}else if(void 0===e.indexGlobal)t.unsetFocus();else{const n=r().e7(e.indexGlobal,o);if(!n)return;t.setState({...t.state,focus:{...n.index,indexGlobal:e.indexGlobal,footerFocused:!1}})}}function d(e){let{store:t,focus:o}=e;"number"==typeof t.state.focus.indexLocal&&(n().n4(o,t.state.focus)||t.setState({...t.state,focus:o}))}function u(e){let{store:t}=e;t.setState({...t.state,focus:{section:void 0,indexLocal:void 0,indexGlobal:void 0,footerFocused:!0}})}},176106:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1,willOpen:!1,loading:!1}}}const r=new n},176663:(e,t,o)=>{o.d(t,{_:()=>a});var n=o(296540),r=()=>o(484714),i=()=>o(406792);function a(e){const{loaded:t,blockType:o,isOpen:a}=e,s=(0,r().v3)(),l=(0,n.useRef)({step:"notMeasured"});(0,n.useEffect)((()=>{if(!0!==a||!1!==t||"notMeasured"!==l.current.step){if(!0===a&&!0===t&&"notMeasured"===l.current.step){const t=performance.now();return e({startTime:t,endTime:t}),void(l.current={step:"complete"})}if(!1!==t||!1!==a||"measuring"!==l.current.step){if(!0===t&&"measuring"===l.current.step)return e({startTime:l.current.loadStartTime}),void(l.current={step:"complete"})}else l.current={step:"complete"}}else l.current={step:"measuring",loadStartTime:performance.now()};function e(e){let{startTime:t,endTime:n}=e;i().default.measure({metricName:"toggle_load",startTime:t,endTime:n},{data:{block_type:o||"unknown"},environment:s})}}),[o,s,t,a])}},176983:(e,t,o)=>{o.d(t,{J:()=>i});var n=()=>o(56366),r=()=>o(351360);function i(){const{currentSpaceStore:e}=(0,n().O$)(r().default);return(0,n().K8)((()=>(null==e?void 0:e.canAdmin())??!1),[e])}},177256:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10.392 6.125a.5.5 0 0 0-.5.5v6.75a.5.5 0 0 0 .5.5h4.683a.5.5 0 0 0 .5-.5v-6.75a.5.5 0 0 0-.5-.5z"}),(0,n.jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v7.5c0 1.174.951 2.125 2.125 2.125h11a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 15.5 4.125zM3.625 6.25c0-.483.392-.875.875-.875h11c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-11a.875.875 0 0 1-.875-.875z"})]})},i=(0,o(340498).wt)("peekSide",r)},178298:(e,t,o)=>{o.d(t,{A:()=>f});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(959013),s=()=>o(508104),l=()=>o(317909),c=()=>o(891078),d=()=>o(502438),u=()=>o(42425),p=o(474848);const m=(0,a().YK)({placeholder:{defaultMessage:"To-do",id:"todoBlock.placeholder"}});function g(e,t){const g=(0,a().tz)(),f=(0,r().Y0)(),v=(0,r().v3)(),h=(0,n.useRef)(null),_=(0,n.useId)(),b=(0,c().bx)(e.store,e.disabled),y=(0,c().pW)(e.store,!0),S=(0,i().K8)((()=>e.store.getBlockTitleStore()),[e.store]),w=(0,i().K8)((()=>e.store.getContentStore()),[e.store]),k=(0,i().K8)((()=>{const t=e.store.getProperties();return!!t&&o(713998).wu(t.checked)}),[e.store]),I=(0,i().K8)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),A=(0,n.useCallback)((()=>{if(b){let t;t=o(496603).mK(d().default.state.stores,e.store)?d().default.state.stores:[e.store],v.mobileNative&&v.mobileNative.buzz(),k?l().createAndCommit({userAction:"TodoBlock.toggleChecked",environment:v,canUndo:!0,perform:e=>{s().E({environment:v,blocks:t,transaction:e})}}):l().createAndCommit({userAction:"TodoBlock.toggleChecked",environment:v,canUndo:!0,perform:e=>{s().z({environment:v,blocks:t,transaction:e})}})}}),[b,v,k,e.store]),x=(0,o(401497).IS)((e=>({root:{paddingLeft:o(799954).nE.paddingLeft,...y},title:{...u().FC,width:void 0,flexGrow:1,...k&&{textDecoration:"line-through",textDecorationColor:I?e.text.uiBlueSecondary:e.strikethroughLineColor,opacity:1,color:e.mediumTextColor}},titlePlaceHolder:{...I?{color:e.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{}}})),[y,k,I]),C=(0,p.jsxs)(u().Ay,{style:{...x.root,...e.style},left:(0,p.jsx)(o(625830).K,{"aria-labelledby":_,checked:k,onClick:A,disabled:!b,size:16,fill:y.color,tapArea:f.isMobile?{size:30}:void 0}),childrenStyle:{display:"flex",flexDirection:"column"},ref:h,children:[(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsx)(o(246722).A,{id:_,style:x.title,disabled:e.disabled,store:S,placeholder:g.formatMessage(m.placeholder),placeholderStyle:x.titlePlaceHolder,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:o(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,p.jsx)(o(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}),!e.hideContent&&(0,p.jsx)(o(99945).A,{disabled:e.disabled,store:w,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag})]});return(0,c().NW)(e.store,t,(0,n.useMemo)((()=>({renderedType:"to_do",getNode:()=>h.current,getBlockStore:()=>e.store,activate:A})),[e.store,A]),C)}const f=n.memo(n.forwardRef(g),o(821062).A)},178658:(e,t,o)=>{o.r(t),o.d(t,{closeInitialPromptAndEndSession:()=>A,closeInitialPromptButContinueSession:()=>x,openHelpMeWriteGenericPopup:()=>M,retryInitialPrompt:()=>I,showInitialPromptForAIBlock:()=>C,toggleInitialPrompt:()=>T});var n=()=>o(908006),r=()=>o(925193),i=()=>o(206267),a=()=>o(534177),s=()=>o(937075),l=()=>o(449506),c=()=>o(725614),d=()=>o(401040),u=()=>o(68465),p=()=>o(231722),m=()=>o(393255),g=()=>o(351360),f=()=>o(430483),v=()=>o(295169),h=()=>o(525569),_=()=>o(508496),b=()=>o(502438),y=()=>o(24157),S=()=>o(972911),w=()=>o(286088);function k(e,t){if((0,w().Ku)(e),!("completionPopup"!==t.type&&"assistantCompletionPopup"!==t.type||"results"!==t.stage&&"initialPrompt"!==t.stage||"textSelection"!==t.context.type&&"cursor"!==t.context.type)){const e=t.context.textSelection;n().default.afterNextFlush((()=>c().setMultiSelection({multiSelection:e})))}}function I(e){h().default.invalidateLastUpdater();const{environment:t}=e,{state:o}=h().default;if("completionPopup"!==o.type||"results"!==o.stage)return;t.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(o.inMemoryRecordCache);const n={type:"completionPopup",stage:"initialPrompt",prefilledValue:"",context:o.context,aiSessionId:o.aiSessionId,from:o.from,futureRevisions:[...o.revisions,...o.futureRevisions]};h().default.setState(n)}function A(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&k(e,h().default.state),h().default.setState({type:"closed"})}function x(e){const{state:t}=h().default;k(e,t),"completionPopup"===t.type&&"initialPrompt"===t.stage&&h().default.setState({type:"closedWithContext",context:t.context,aiSessionId:t.aiSessionId,futureRevisions:t.futureRevisions}),setTimeout((()=>{"closedWithContext"===h().default.state.type&&h().default.reset()}),1)}function C(e){h().default.setState({...e,type:"completionPopup",stage:"initialPromptForAIBlock",from:"ai_block",prefilledValue:"",aiSessionId:i().JW()}),P({environment:e.environment,promptForAnalytics:e.clientPrompt})}async function T(e){const{environment:t,from:n}=e;let{context:i,prefilledValue:a,sessionId:s}=e;const{assistantDependency:c}=await Promise.resolve().then(o.bind(o,650829)),u=await c.load();if(!(await u.assistantMenuActions.closeAssistantRightHandSideMenu({environment:t})))return;let m={type:"closed"};if("closed"===h().default.state.type||"closedWithContext"===h().default.state.type){if(!i&&b().default.state.stores.length>0){const e=y().default.state;i="empty"===e.mode?(0,d().RH)():(0,p().kM)(e.multiSelection)?(0,d().gu)():(0,d().rs)()}i&&(a||(a=""),s||(s=(0,r().gC)()),m=f().zD.isAssistantInWriterEnabled()?{type:"assistantCompletionPopup",stage:"initialPrompt",context:i,from:n,prefilledValue:a,sessionId:s,loading:!1,hasErrored:!1}:{type:"completionPopup",stage:"initialPrompt",context:i,from:n,prefilledValue:a,aiSessionId:s,futureRevisions:[]},g().default.state.currentSpaceStore&&l().callApi({eventName:"publishAiSession",environment:t,data:{inference_type:"writer",spaceId:g().default.state.currentSpaceStore.id,id:"assistantCompletionPopup"===m.type?s:m.aiSessionId,metadata:{from:n}}}),"spacebar"===n&&(0,S().Ut)(t))}h().default.setState(m),P(e)}function M(e){const{title:t,environment:o,prefilledValue:n,from:r}=e,s=(0,d().gu)();if(!s)return;let l;if((0,a().O9)(t)){const e=t?(0,u().gB)({customPrompt:n??t,isPageEmpty:!0}):u().am;l={promptForAnalytics:e,prefilledValue:(0,d().oW)(e)}}else l={prefilledValue:n,promptForAnalytics:void 0};T({environment:o,from:r??"page_menu",sessionId:i().JW(),context:s,...l})}function P(e){const{environment:t,promptForAnalytics:o}=e,{state:n}=h().default;if(("completionPopup"===n.type||"assistantCompletionPopup"===n.type)&&"results"!==n.stage){"initialPromptForAIBlock"===n.stage||_().default.checkGate({gateName:"mobile_assistant_prevent_clear_selection"})||c().clear({environment:t});const e="assistantCompletionPopup"===n.type?n.sessionId:n.aiSessionId,r=v().default.getSessionContext(e);s().g0(t,{session_id:"assistantCompletionPopup"===n.type?n.sessionId:n.aiSessionId,prompt_key:(null==o?void 0:o.key)??("completionPopup"!==n.type||n.prefilledValue?"unknown":"alternative_ui_empty_input"),from:n.from,sessionContext:r}),m().VN({dismissed:!1,environment:t})}}},178687:(e,t,o)=>{o.d(t,{j:()=>n,w:()=>r});const n={localLanguagePreferenceKey:"CodeBlockDefaultLanguage",localCodeWrapPreferenceKey:"CodeBlockDefaultCodeWrap",defaultLanguage:"JavaScript",defaultCodePreviewFormat:"code"},r={localSizePreferenceKey:"QuoteBlockDefaultSize"}},179266:(e,t,o)=>{o.d(t,{L:()=>m});var n=()=>o(522419),r=()=>o(825237),i=()=>o(112069),a=()=>o(939768),s=()=>o(518646),l=()=>o(780054),c=()=>o(943846),d=()=>o(493208),u=()=>o(948914),p=()=>o(589994);async function m(e,t,o){var m;const{url:g,width:f,stripGoogleIconQuery:v}=e;e.isAuthenticated&&await p().transactionQueue.awaitRecordTransaction(e.permissionRecord);let h=g;if(n().JB(g)&&f)h=n().jy(g,f);else if(n().GM(g))h=e.isAuthenticated?r().wY({url:g,width:f,permissionRecord:e.permissionRecord,stripGoogleIconQuery:v,baseUrl:l().A.domainBaseUrl,fullyQualified:!1,userId:t.currentUser.id,freeze:e.disableAnimation}):r().x8({url:g,width:f,stripGoogleIconQuery:v,baseUrl:l().A.domainBaseUrl,fullyQualified:!1,userId:t.currentUser.id});else if(n()._J(g)&&e.isAuthenticated){const o=t.device,n=await(0,s().k)(t,{url:g,permissionRecord:e.permissionRecord,useS3Url:o.isIOS&&o.isMobileNative},Boolean(u().A.state.isNotionProtocolBugFixed));n&&(h=n)}else if(null!==(m=e.permissionRecord)&&void 0!==m&&m.id&&(0,d().x9)(g))h=a().Gm({url:`${l().A.domainBaseUrl}/eap${i().Rh.SECURE_EXTERNAL_PREVIEW}/${e.permissionRecord.id}/${encodeURIComponent(g)}`,query:e.permissionRecord});else if(!(0,c().xy)(h))throw new(c().Ld)(h);return o&&o(h),h}},179534:(e,t,o)=>{o.d(t,{A:()=>i});o(898992),o(672577);var n=()=>o(351360);class r extends(()=>o(757695))().default{getInitialState(){return{results:[]}}getUnreadCountForCurrentSpace(){const{currentSpaceStore:e}=n().default.state,{results:t}=this.state;if(e){const o=t.find((t=>t.spaceId===e.id));if(o)return o.unread}return{mentions:0,following:0,highPriority:0,comments:0,activity:0}}getUnreadMentionsCountForOtherSpaces(){const{currentSpaceStore:e}=n().default.state,t=e&&e.id,{results:o}=this.state;let r=0;for(const n of o)n.spaceId!==t&&(r+=n.unread.mentions);return r}getTotalUnreadMentionsCount(){return this.getTotalUnreadCountForType("mentions")}getTotalUnreadCountForType(e){const{results:t}=this.state;let o=0;for(const r of t){var n;o+=(null===(n=r.unread)||void 0===n?void 0:n[e])??0}return o}}const i=new r},179580:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(803949);var n=()=>o(496603);const r=new class{constructor(e,t){this.messageDispatcher=void 0,this.requestToDependencies=void 0,this.dependencyToRequests=void 0,this.requestKeyToRequest=void 0,this.dependencyToListener=void 0,this.keyFn=void 0,this.fetchingStore=void 0,this.messageDispatcher=o(941541).Ay,this.requestToDependencies={},this.dependencyToRequests={},this.requestKeyToRequest={},this.dependencyToListener={},this.keyFn=e,this.fetchingStore=new(o(848776).U)(e,(async(e,o)=>{const n=await t(e,o);if(n)return this.register(e,o,n.dependencies??[]),n.value}))}getData(e,t){return this.fetchingStore.getData(e,t)}async awaitData(e,t){return await this.fetchingStore.awaitData(e,t)}register(e,t,o){const r=this.keyFn(t),i=this.requestToDependencies[r]??[],a=(0,n().R9)(o,i),s=(0,n().R9)(i,o);this.requestKeyToRequest[r]=t,this.requestToDependencies[r]=o,a.forEach((t=>{const o=this.dependencyToRequests[t]??[];if(this.dependencyToRequests[t]=(0,n().sb)([...o,r]),0===o.length){const o=this.messageDispatcher.addListener(t,void 0,(()=>{this.invalidateDependency(e,t)}),void 0,e);this.dependencyToListener[t]=o}})),s.forEach((t=>{const o=this.dependencyToRequests[t]??[],i=(0,n().R9)(o,[r]);this.dependencyToRequests[t]=i;const a=this.dependencyToListener[t];0===i.length&&a&&this.messageDispatcher.removeListener(a,e)}))}async invalidateDependency(e,t){const n=this.dependencyToRequests[t];await(0,o(763824).lX)(n,10,(t=>{const o=this.requestKeyToRequest[t];return this.fetchingStore.resetData(e,o)}))}TEST_ONLY__addListener(e,t){this.fetchingStore.TEST_ONLY__addListener(e,t)}TEST_ONLY__setMessageDispatcher(e){this.messageDispatcher=e}}((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{const n=await Promise.resolve().then(o.bind(o,449506)),r=await n.callApi({eventName:"getSubscriptionBanner",environment:e,data:t,headers:(0,o(386164).WS)({cellId:void 0,spaceId:t.spaceId})}),i=(0,o(921997).L0)(t);return"success"===r.type?{value:r.data,dependencies:[i]}:void 0}))},180762:(e,t,o)=>{o.d(t,{t:()=>m});var n=()=>o(584262),r=()=>o(763884),i=()=>o(861017),a=()=>o(869558),s=()=>o(857783),l=()=>o(638146),c=()=>o(351360),d=()=>o(630116),u=()=>o(559102),p=()=>o(407031);function m(e){const{environment:t,collectionViewId:o,openInNew:m,collectionContextStore:g,isFullScreen:f,isRootChild:v,isInPeekRenderer:h}=e,_=g.collectionViewBlockStore();if(!_)return;const{RouterStore:b}=t,y=(0,i().Fy)(b.state.route);if(_===c().default.state.mainEditorCurrentBlockStore||m||y)s().uK({environment:t,store:_,openInNew:m,collectionViewId:o,pageVisitSource:n().y8.ChangeCollectionView,...y});else{const e=new(d().pS)(t,{table:a().Gy,id:o},{inMemoryRecordCache:_.inMemoryRecordCache}),n=e.getCollectionStore();(0,u().d)({environment:t,collectionViewBlockStore:_,collectionViewStore:e,collectionStore:n,collectionContextStore:g,isFullScreen:f,isRootChild:v,isInPeekRenderer:h,viewsModuleContext:g.viewsModuleContextStore.state}),r().A.set({userId:t.currentUser.id,key:(0,l().H6)(_.id),value:o})}(0,p().S)({collectionContextStore:g})}},182106:(e,t,o)=>{o.d(t,{A:()=>r});o(944114),o(898992),o(672577),o(803949);class n extends(()=>o(959180))().A{findOutlinerItemFromStore(e){if(e)return this.find((t=>t.store===e))}findOutlinerItemsFromId(e){const t=[];return this.forEach((o=>{o.store.id===e&&t.push(o)})),t}}const r=new n},184701:(e,t,o)=>{o.d(t,{b:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{visible:!1}}}const r=new n},185544:(e,t,o)=>{o.d(t,{IT:()=>h,X$:()=>b,sg:()=>y,yM:()=>_});o(16280),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(581454);var n=()=>o(700500),r=()=>o(179034),i=()=>o(919709),a=()=>o(498212),s=()=>o(534177),l=()=>o(972435),c=()=>o(437622),d=()=>o(630116),u=()=>o(160568),p=()=>o(624550),m=()=>o(722101),g=()=>o(246826),f=()=>o(606952);const v=(0,o(959013).YK)({forkPageError:{defaultMessage:"Could not fork page.",id:"spaceActions.dialogError.forkPageError.message"}});function h(e){const{environment:t,spaceViewStore:o,spaceStore:r,isPrivate:i,prepend:a,title:s,transaction:l,loading:c,tracker:d}=e,u=g().Wv({environment:t,type:c?n().xd.copyIndicator:n().xd.page,inMemoryRecordCache:r.inMemoryRecordCache,transaction:l,spaceId:r.id,tracker:d});return s&&f().KY({environment:t,store:u.getBlockTitleStore(),value:[[s]],transaction:l}),_({environment:t,spaceStore:r,spaceViewStore:o,pageStore:u,isPrivate:i,location:{type:a?"prepend":"append"},transaction:l}),u}function _(e){const{environment:t,spaceStore:o,spaceViewStore:n,pageStore:r,isPrivate:i,location:a,transaction:l}=e,{id:c}=t.currentUser;let d;i?c&&(d={type:"user_permission",role:"editor",user_id:c}):d={type:"space_permission",role:"editor"},g().zv({store:r,data:{permissions:d?[d]:[]},transaction:l}),i&&b({environment:t,spaceStore:o,spaceViewStore:n,transaction:l});const u=a||{type:"append"};"prepend"===u.type?m().Hs({parentStore:i?n.getPrivatePagesStore():o.getPagesStore(),prependStore:r,before:u.before,transaction:l}):"append"===u.type?m().BC({parentStore:i?n.getPrivatePagesStore():o.getPagesStore(),appendStore:r,after:u.after,transaction:l}):(0,s().HB)(u)}function b(e){const{environment:t,spaceStore:o,spaceViewStore:n,transaction:r}=e,i=new Set(n.getPrivatePageStores().map((e=>e.id)));(0,c().I0)(t,o).filter((e=>e.isTopLevelPrivatePage({spaceStore:o,environment:t}))).forEach((e=>{i.has(e.id)||m().BC({parentStore:n.getPrivatePagesStore(),appendStore:e,transaction:r})}))}async function y(e){const{environment:t,userRootStore:o,isPrivate:n,forkedPageId:s,spaceStore:c,spaceViewStore:m}=e;if(c.canEdit()){const e=d().Bv.createChildStore(o,{table:r().ev,id:s});p().Yi({currentUserId:t.currentUser.id,blockId:void 0});const l=Date.now(),g=await p().i1({environment:t,store:e,spaceStore:c,spaceViewStore:m,isPrivate:n}),f=Date.now()-l;if(u().hB(t,{from:"onboarding",success:!g.error,template_block_id:s,target_space_id:(0,a().ot)(c.id),context:"fork_page_into_space",template_duplication_duration_ms:f,public_template_name:i().q4_(e.getTitleValue())}),void 0===g.error)return g.value}throw new Error(l().A.formatMessage(v.forkPageError))}},185991:(e,t,o)=>{function n(e){return e?"shift+command+j":"shift+ctrl+j"}o.d(t,{u:()=>n})},186365:(e,t,o)=>{o.d(t,{H:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("roundedSquareCheckbox",{viewBox:"0 0 14 14",svg:(0,n.jsx)("rect",{x:"0.5",y:"0.5",width:"13",height:"13",rx:"2.5"})})},186445:(e,t,o)=>{o.d(t,{X4:()=>W,jQ:()=>U,y0:()=>re,ZT:()=>ne,s0:()=>F,Gu:()=>N,ao:()=>L,oc:()=>j,ZO:()=>V,_y:()=>G,UZ:()=>se,_m:()=>O,xP:()=>$,fl:()=>de,Ws:()=>oe,F8:()=>te,Qr:()=>pe,jU:()=>le,kS:()=>Y,Te:()=>ae,fI:()=>ie,Wu:()=>q,sj:()=>z,RR:()=>X,jx:()=>me,$o:()=>K,tR:()=>ue,lT:()=>ee,rp:()=>Z,XX:()=>ce,lp:()=>J});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(430670),o(581454),o(737550);var n=()=>o(496506),r=()=>o(700500),i=()=>o(219058),a=()=>o(711059);function s(e,t){const o=t.deviceType,n=t.mobileAppVersion;if(!(0,i().tq)(e)||"local"===e||!t.isMobileNative||!n)return!1;const r=function(e){const{environmentName:t,deviceType:o,mobileAppVersion:n,androidVersions:r,iosVersions:i}=e,s=(0,a().parseMobileAppVersion)(n,"android"===o);if(!s)return!1;if("android"===o&&!r||"ios"===o&&!i)return!1;let l;if("android"===o){if(!r)return!1;l=(0,a().parseMobileAppVersion)(r[t],!0)}else{if(!i)return!1;l=(0,a().parseMobileAppVersion)(i[t],!1)}return!!l&&(0,a().isLessThanVersion)(s,l)}({environmentName:e,deviceType:o,mobileAppVersion:n,iosVersions:{staging:"0.1.1022",development:"0.5.1168",production:"0.4.1021"}});return r}var l=()=>o(946065),c=()=>o(161479),d=()=>o(798880),u=()=>o(496603),p=()=>o(780054),m=()=>o(459882),g=()=>o(696746),f=()=>o(489348),v=()=>o(155959),h=()=>o(756279),_=()=>o(351360),b=()=>o(878423),y=()=>o(732770),S=()=>o(589994),w=()=>o(205682),k=()=>o(77238),I=()=>o(712505),A=()=>o(630116),x=()=>o(502438),C=()=>o(24157),T=()=>o(47373),M=()=>o(342),P=()=>o(396301),B=()=>o(747100),R=()=>o(953418),E=()=>o(437622),D=()=>o(37433);function N(){if(_().default.state.mainEditorCurrentBlockStore)return{id:_().default.state.mainEditorCurrentBlockStore.id,spaceId:(0,c().e)(_().default.state.mainEditorCurrentBlockStore.pointer.spaceId)}}function L(){var e;const t=I().default.state,o=B().m3(),n=t.open&&o?t.targetStore:_().default.state.mainEditorCurrentBlockStore,r=null===(e=b().A.state.caches[M().oB])||void 0===e?void 0:e.inMemoryRecordCache;return r?null==n?void 0:n.clone(r):n}function F(){if(_().default.state.mainEditorCurrentBlockStore)return _().default.state.mainEditorCurrentBlockStore.id}function U(){return B().Gb()?k().A:w().A}function O(e){let t;return _().default.state.currentUserStore?t=_().default.state.currentUserStore:e.currentUser.id&&(t=new(A().LU)(e,{table:d().oo,id:e.currentUser.id})),t}function V(){const e=x().default.getCurrentRootStore();if(e&&e instanceof A().Bv)return e}function j(){const e=x().default.getCurrentRootStore();if(e&&e instanceof A().Bv)return e;const{currentSpaceStore:t}=_().default.state;return t||void 0}function z(e){return"myTasks"===(0,g().IA)({blockOrCollectionId:e})}function q(e){return"customDb"===(0,g().IA)({blockOrCollectionId:e})}const H=new(o(752885).p)({debugName:"getAppRenderState",memoizeRecursion:!0,deepEquals:!1,compute:function(e){var t;const{mainEditorCurrentBlockStore:n,initialized:r}=_().default.state,i=e.currentUser.isLoggedIn(),a=e.RouterStore.state.route,s=Boolean(n&&n.canRead()&&n.isDefined()),l=Boolean(n&&n.canEdit()&&n.isDefined()),c=Boolean(n&&(0,o(299545)._C)(n)),d=n&&s&&(0,o(731320).qb)(e,n),u=Boolean(d),p=d&&(0,o(68263).p2)(d.permissionItem.role),m=l&&!p,f=(null==n||null===(t=n.getModel())||void 0===t?void 0:t.isNonverifiedContentClassification())&&!(n&&o(278715).A.bypassedPage(n.id))&&!m,{publicPageData:v}=o(792415).A.state,h=!r||!c,b=Boolean(n&&n.isReady()&&!s),y=(0,g().lU)(n),S="page"===a.name&&void 0!==a.slug&&!a.blockId,w=r&&!n&&!S,k=(null==n?void 0:n.isPlaceholderWorkflowTemplateBlock())??!1,I=Boolean((0,o(861017).BH)(a)&&(w||b&&!y||f||k||(null==v?void 0:v.requireInterstitial)||(null==v?void 0:v.requireLogin)&&!i));I&&(0,T().Us)()&&o(857639).log({level:"info",from:"appHelpers",type:"shouldShowError",data:{miscDataToConvertToString:{currRoute:a,publicPageData:v,shouldErrorForMissingCurrentBlockStore:w,isPageLoadedButCantRead:b,isPersonalHomeStore:y,shouldShowContentClassification:f,isMainEditorCurrentBlockStoreStillLoadingSlug:S,initialized:r,isLoggedIn:i,mainBlock:Boolean(n),mainBlockCanRead:null==n?void 0:n.canRead(),mainBlockDefined:null==n?void 0:n.isDefined()}}});const A=b&&y;return{shouldShowSidebar:function(){if((0,o(836251).w6)(e))return Boolean(null==v?void 0:v.template);if((0,o(26468).j)(e))return!0;const t=L()&&(null==v?void 0:v.isDLSViewer),n="quickSearch"===a.name,r=("marketplace"===a.name||"gallery"===a.name)&&e.device.isMobile,d=o(449476).A.getState().isOpen;return Boolean(!d&&!n&&!I&&!r&&i&&(h||s&&(l&&!u||c&&!u)&&!f&&!(null!=v&&v.requireInterstitial)&&!t))}(),shouldShowFrame:"team"===a.name||"chat"===a.name||!I,shouldShowError:I,shouldRedirectFromHome:A}}});function W(e){return H.getStateFor(e)}const K=new(n().default)((()=>{const{mainEditorCurrentBlockStore:e}=_().default.state,t=e&&e.isCollectionView();return y().A.state.isKeyboardMode&&!o(172079).A.state&&!o(270710).A.isActive()&&!t&&!o(899677).default.state.open&&!o(735372).Ay.state.open&&!(0,o(229417).y)()&&0===o(150193).A.state.banners.length&&!o(964345).gZ.state}),{debugName:"appHelpers.shouldHideTopbarStore"});function G(e){const{currentSpaceViewStore:t}=_().default.state;if(t){return u().KC(t.getWorkspacePages(),(0,E().cU)(e,t),t.getPrivatePages(e)).filter((e=>e.isNavigableBlock()))}return[]}function $(e){const{currentSpaceViewStore:t}=_().default.state;return t?u().hS([...t.getBookmarkedPages(),...t.getWorkspacePages(),...(0,E().cU)(e,t),...t.getPrivatePages(e)],"id"):[]}function Y(e){return e.getType()===r().xd.copyIndicator&&!S().transactionQueue.isPendingTransactionForRecord(e.pointer)}function Q(e){const{currentSpaceStore:t,currentSpaceViewStore:n,currentUserRootStore:r,currentUserSettingsStore:i}=_().default.state,a=o(749240).subscriptionDataStoreInstance.state;if(!(n&&r&&t&&i))return;const s=(0,T().rY)(e),c=n.getBookmarkedPages(),d=n.getWorkspacePages(),u=n.getTeamsStores(),p=a?(0,o(847554).H)(e,n.getSpaceId(),a):1;let{allPagesStores:m,visiblePagesStores:g}=(0,E().au)({environment:e,spaceViewStore:n,userSettingsStore:i,type:"shared"}).state;const f=(0,E().IL)(n.getSpaceStore())&&"external_pages_sidebar"===o(508496).default.getGroup("sharing_collaboration_sidebar_guest_aggregation");f&&(m=r.getSpaceViewStores().filter((e=>(0,E().IL)(e.getSpaceStore()))).flatMap((t=>(0,E().cU)(e,t))),g=m.slice(0,10));const{allPagesStores:v,visiblePagesStores:h}=(0,E().au)({environment:e,spaceViewStore:n,userSettingsStore:i,type:"private"}).state,b=(0,E().IL)(t),y=1===p&&0===d.length&&"personal"===t.getPlanType(),S=c.length>0,w=ee({isGuest:b,numWorkspacePages:d.length}),k=m.length>0,I=i.hasUserPinnedToOutliner({spaceId:t.id,type:"shared"}),A=(0,E().s7)(e),x=(0,P().RQ)({spaceViewStore:n,type:"teamspaces"}),C=x.truncationLimit===l().vw?u:u.slice(0,x.truncationLimit),M=(0,o(440209).Um)({environment:e,isUserWorkspaceOwner:A}),B=C.some((e=>(e.getMemberInfoUsingSpaceMembers((0,o(134217).L)())??[]).length>1)),R=C.some((e=>e.getTeamPages().length>0)),N=(0,D().Mk)()&&(!M||B||R)&&C.length>0,L=(0,P().RQ)({spaceViewStore:n,type:"shared"}),F=s?m.length>L.truncationLimit&&L.truncationLimit!==l().vw:m.length>E().RC||I,U=(0,P().RQ)({spaceViewStore:n,type:"private"}),O=v.length>U.truncationLimit&&U.truncationLimit!==l().vw,V=!b,j=!(S||w||k||N),z=c.length+m.length+d.length+v.length>=8,q=[S,w,k,V,N].filter(Boolean).length;return{isGuest:b,isPersonalSpace:y,showBookmarksSection:S,showWorkspaceSection:w,showSharedSection:k,showPrivateSection:V,showOnlyPrivateSection:j,showSharedOverflowButton:F,showPrivateOverflowButton:O,shownSidebarSectionCount:q,stickTemplateItemsToBottom:z,allSharedPagesStores:m,allPrivatePagesStores:v,visibleSharedPagesStores:g,visiblePrivatePagesStores:h,showTeamSection:N,userJoinedTeamsStores:u,visibleTeamsStores:C,showCrossWorkspaceGuestPagesPrototype:f}}const Z=u().Bj((e=>new(n().default)((()=>Q(e)),{useDeepEqual:!0,debugName:"sidebarStateStore"}))),X=new(n().default)((()=>y().A.state.isKeyboardMode||o(93658).default.state.isActive||o(861841).Ay.state.isDragging||o(110955).A.state.open||o(375447).A.state.open||o(176106).A.state.open||o(525112).A.state.open||o(210737).A.hasOpenMouseCapturePopup()||w().A.state.isOpen&&!I().default.isCenterPeekOpen()||k().A.state.isOpen||o(597368).A.state.open||o(16990).A.state.isPinned||o(610640).A.state.isHovered),{debugName:"menuIsOpenStore"}),J=new(n().default)((()=>{const{currentSpaceViewStore:e,currentUserStore:t}=_().default.state,n=new Set;if(!e||!t)return n;for(const r of e.getTeamsStores()){r.isMemberOrGuest(t.id,o(486130)._.getSpacePermissionGroupIds({userId:t.id,spaceId:e.getSpaceId()}))&&n.add(r.id)}return n}),{useDeepEqual:!0,debugName:"userTeamsInCurrentSpace"});function ee(e){let{isGuest:t,numWorkspacePages:o}=e;return!t&&!(0,D().Mk)()&&o>0}function te(e){return e.device.isPhone?24:96}function oe(e){return te(e)}function ne(e){const t=x().default.getCurrentDefaultContainer();if(t)return f().A.find((e=>e.store===t.getProps().store))}function re(e){const t=m().x-2*te(e),o=ne();if(o){const e=o.getContentInnerWidth();if(e)return Math.min(t,e)}return t}function ie(){const e=L(),t=C().default.state;if("editing"!==t.mode)return!1;const o=t.multiSelection.start.store;return Boolean(e&&e.id===o.id&&(e.getBlockTitleStore()===o||u().n4(e.getBlockTitleStore().path,o.path)))}function ae(){const e=C().default.state;if("editing"!==e.mode)return!1;const t=e.multiSelection.start.store,o="collection"===t.table;return t.path.includes("name")&&o||!1}function se(){const{currentUserRootStore:e}=_().default.state;if(e){const t=e.getSpaceViewStores();return u().oE(t.map((e=>e.getSpaceId())))}return[]}function le(e){return u().hS(e.getSpaceViewStores(),(e=>e.getSpaceId())).filter((e=>{const t=e.getSpaceStore();return e.isDefined()&&t&&t.canEdit()}))}const ce=new(n().default)((function(){const{currentUserSettingsStore:e}=_().default.state,t=(0,o(604995).Lm)();if(e){const o=e.getSettings();return void 0===(null==o?void 0:o.start_day_of_week)?t:null==o?void 0:o.start_day_of_week}return t}),{debugName:"userSettingsStartOfWeek"});function de(e){const{environment:t,store:o}=e;return o.isCollectionView()?(0,R().z4)(t)?h().A.All:h().A.Y:!B().cq(o)&&I().default.isSidePeekOpen()?h().A.All:h().A.Y}function ue(e){return s("production",e.device)||!(0,v().T)("supportsNativeSearch")}function pe(e){const{currentUserRootStore:t,mainEditorCurrentBlockStore:o}=_().default.state;return"quickSearch"===e.RouterStore.state.route.name&&t||t||o}function me(){p().A.isAdminMode||console.log("%c\n\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\n\tnnnn                         nnnn\n\tnnnnnnn                          nnnn\n\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\n\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\n\tnnnnnnnn                           nnn\n\tnnnnnnnn    nnnnnnnn     nnnnnnn   nnn\n\tnnnnnnnn      nnnnnnn      nnn     nnn\n\tnnnnnnnn      nnnnnnnn     nnn     nnn\n\tnnnnnnnn      nnnnnnnnnn   nnn     nnn\n\tnnnnnnnn      nnn nnnnnnn  nnn     nnn\n\tnnnnnnnn      nnn  nnnnnnnnnnn     nnn\n\tnnnnnnnn      nnn   nnnnnnnnnn     nnn\n\tnnnnnnnn      nnn     nnnnnnnn     nnn\n\tnnnnnnnn      nnn      nnnnnnn     nnn\n\tnnnnnnnn    nnnnnnnn    nnnnnn     nnn\n\t  nnnnnn                           nnn\n\t\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\t\tWe're hiring!\n\t\t  nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\t\tnotion.so/careers\n\n\t“yeah, I would probably eat a lemon for one hundred dollars” --Abraham Lincoln (2023-07-14)\n\t\t\t\t ","font-family: monospace")}},187015:(e,t,o)=>{function n(e){var t;return null==e||null===(t=e.split(".notion."))||void 0===t?void 0:t[1]}o.d(t,{z:()=>n})},187778:(e,t,o)=>{o.d(t,{G:()=>i});var n=()=>o(148777),r=()=>o(351360);const i=(0,o(500815).g)((async function(e,t){const{hasPublicAccessPermission:i}=o(780865).Er(e),a=r().default.state.currentSpaceStore,s=r().default.state.currentSpaceViewStore;if(i)return;if(!a)return;let l=(0,n().PE)({environment:e,overrideSpaceId:a.id,overrideSpaceViewStore:s});const c=await(0,o(448433).h)({environment:e,currentSpaceStore:a,currentSpaceViewStore:s});if(l={...l,...(0,n().hQ)(c)},c){let i=!1,a=0;const s=performance.now();o(20199).A.update((e=>{var t,o,n;const s=null===(t=e.localSearchableBlocksCache)||void 0===t?void 0:t.buildStartTime,l=s&&s>=c.buildStartTime,d=(null===(o=r().default.state.currentSpaceStore)||void 0===o?void 0:o.id)&&(null===(n=r().default.state.currentSpaceStore)||void 0===n?void 0:n.id)!==c.spaceId;return l||d?e:(i=!0,a=(e.version??0)+1,{...e,localSearchableBlocksCache:c,version:a})})),i&&((0,n().So)((e=>({...e,[t]:s,[`${t}0`]:e[t]??s}))),o(406792).default.measure({metricName:"search_local_refresh_searchable_blocks",startTime:c.buildStartTime,endTime:s},{environment:e,data:{buildStartTime:c.buildStartTime,searchSessionId:void 0,documentCount:c.blocks.documentCount,cacheStats:l,refreshTrigger:t,numRecordsRequiredSync:c.numRecordsRequiredSync,readinessTimings:(0,n().Yp)(),timings:c.timings,version:a}}))}}),{concurrency:1})},187959:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},188669:(e,t,o)=>{o.d(t,{Ay:()=>a,Zj:()=>n,jU:()=>i});const n=["page","space","team","space-private-pages"];class r extends(()=>o(757695))().default{getInitialState(){return{isOpen:!1,lastPageId:void 0}}getVariant(){if(this.state.isOpen)return this.state.variant}getDatabaseType(){return this.getOverrideDatabaseType()??this.getTargetsDatabaseType()}getOverrideDatabaseType(){if(this.state.isOpen&&"typed"===this.state.variant)return this.state.overrideDatabaseType}getTargetsDatabaseType(){if(this.state.isOpen)return i(this.state.targets)}}function i(e){var t;if(0===e.length)return;const o=null===(t=e[0].getAssociatedCollectionStore())||void 0===t?void 0:t.getDatabaseType();if(o){for(const t of e){var n;if(o!==(null===(n=t.getAssociatedCollectionStore())||void 0===n?void 0:n.getDatabaseType()))return}return o}}const a=new r},188709:(e,t,o)=>{o.d(t,{tK:()=>c,wY:()=>d});o(944114),o(898992),o(354520);var n=o(296540),r=()=>o(821062);const i=/auto|scroll/;function a(e){const t=getComputedStyle(e),o="border-box"===t.boxSizing,n=i.test(t.overflowY||""),r=i.test(t.overflowX||""),a=parseFloat(t.paddingTop||"0"),s=parseFloat(t.paddingRight||"0"),l=parseFloat(t.paddingBottom||"0"),c=parseFloat(t.paddingLeft||"0"),d=parseFloat(t.borderTopWidth||"0"),u=parseFloat(t.borderRightWidth||"0"),p=parseFloat(t.borderBottomWidth||"0"),m=c+s,g=a+l,f=parseFloat(t.borderLeftWidth||"0")+u,v=d+p,h=r?e.offsetHeight-v-e.clientHeight:0,_=n?e.offsetWidth-f-e.clientWidth:0,b=o?m+f:0,y=o?g+v:0;return{borderBoxWidth:parseFloat(t.width||"0")-b-_+m+_+f,borderBoxHeight:parseFloat(t.height||"0")-y-h+g+h+v}}let s,l;function c(e,t){s=s??new WeakMap,l=l??function(e){return new ResizeObserver((t=>{const o=new Map;for(const e of t)o.set(e.target,e);for(const n of o.values()){const t=n.target,o=e.get(t);if(!o||0===o.length)continue;let r;if("borderBoxSize"in n){const e=n.borderBoxSize[0];r={width:e.inlineSize,height:e.blockSize}}else{const{borderBoxWidth:e,borderBoxHeight:o}=a(t);r={width:e,height:o}}for(const e of o)e(r)}}))}(s),(0,n.useEffect)((()=>{const o=e.current;if(o){var n;if(s.has(o))null===(n=s.get(o))||void 0===n||n.push(t);else l.observe(o),s.set(o,[t]);return()=>{const e=(s.get(o)??[]).filter((e=>e!==t));0===e.length?(l.unobserve(o),s.delete(o)):s.set(o,e)}}}),[t,e])}function d(e){const[t,o]=(0,n.useState)(void 0);return c(e,(0,n.useCallback)((e=>{o((t=>(0,r().A)(t,e)?t:e))}),[])),t}},190019:(e,t,o)=>{o.d(t,{Z:()=>u});o(898992),o(354520),o(581454);var n=()=>o(322867),r=()=>o(416504),i=()=>o(534177),a=()=>o(68465),s=()=>o(351360),l=()=>o(508496),c=()=>o(630116),d=()=>o(597898);function u(e){var t,o;const{environment:u,automationStore:p,automationTypecheckModule:m,contextType:g,formulasModule:f,intl:v}=e,h=p.getModel();if(!(0,i().O9)(h))return{error:new(n().N9)("Missing automation model")};const _=p.getActionStores().map((e=>e.getModel())).filter(i().O9);if(_.length!==h.getActionIds().length)return{error:new(n().N9)("Missing automation action models")};const b=(0,a().t1)(p.environment),y=s().default.state,S=(0,d().zD)(u,{name:"premium_automations",spaceId:null===(t=y.currentSpaceStore)||void 0===t?void 0:t.id,userId:null===(o=y.currentUserStore)||void 0===o?void 0:o.id});let w;if("button_block"===g){const e=p.getRecordStoreUIRoot();if(!(e instanceof c().Bv&&(e.isPageBlock()||e.isCollectionViewPageWithContent())))return{error:new(n().N9)("Missing page block model")};w={actionModels:_,assistantFeatureGate:b,checkExperimentGate:e=>l().default.checkGate({gateName:e}),automationModel:h,contextType:g,formulasModule:f,getRecordModel:p.getRecordModel,getRecordRole:p.getRecordRole,intl:v,isSubscribed:S,pageBlockModel:e.getModel(),userTimeZone:(0,r().P)(),valueTypes:[],env:"production"}}else w={actionModels:_,assistantFeatureGate:b,checkExperimentGate:e=>l().default.checkGate({gateName:e}),automationModel:h,contextType:g,formulasModule:f,getRecordModel:p.getRecordModel,getRecordRole:p.getRecordRole,intl:v,isSubscribed:S,userTimeZone:(0,r().P)(),valueTypes:[],env:"production"};return m.typecheckAutomation(w)}},191597:(e,t,o)=>{o.d(t,{a:()=>i});var n=()=>o(989423),r=()=>o(508496);function i(e){const t=e.collectionContextStore.collectionViewStore();if(!t)return;const o=r().default.checkGate({gateName:"collection_group_reducer_visible"}),i=t.getFormatStore().getKeyStore("collection_group_by").getKeyStore("type").getValue(),a=t.getFormatStore().getKeyStore("board_columns_by").getKeyStore("type").getValue();n().u4({environment:e.environment,event:{eventName:"collection_extraneous_group_request",eventProperties:{view_type:t.getType(),group_by_type:i,sub_group_by_type:a,request_reason:e.request_reason,reducer_version:o?"v2":"v1"}}})}},192264:(e,t,o)=>{o.d(t,{il:()=>se,wO:()=>ie,nE:()=>ae});var n=o(296540),r=()=>o(662303),i=()=>o(484714),a=()=>o(56366),s=()=>o(401497),l=()=>o(700500),c=()=>o(304740),d=()=>o(187174),u=()=>o(576250),p=()=>o(340498),m=o(474848);const g=(0,p().wt)("alignCenter",{viewBox:"0 0 16 16",svg:(0,m.jsx)("path",{d:"M14.44 15.325H1.554a.598.598 0 01-.602-.602c0-.335.267-.601.602-.601H14.44c.334 0 .608.266.608.601a.604.604 0 01-.608.602zm0-13.447H1.554a.598.598 0 01-.602-.601c0-.335.267-.602.602-.602H14.44c.334 0 .608.267.608.602a.604.604 0 01-.608.601zm-8.736 10.34h4.738c1.12 0 1.776-.65 1.776-1.905V5.687c0-1.254-.656-1.905-1.922-1.905H5.704c-1.266 0-1.922.65-1.922 1.905v4.626c0 1.254.656 1.905 1.922 1.905zm.07-1.149c-.545 0-.843-.28-.843-.85V5.78c0-.568.298-.85.843-.85h4.452c.539 0 .843.282.843.85v4.44c0 .568-.304.85-.697.85H5.774z"})}),f=(0,p().wt)("alignLeft",{viewBox:"0 0 16 16",svg:(0,m.jsx)("path",{d:"M14.44 15.325H1.554a.598.598 0 01-.602-.602c0-.335.267-.601.602-.601H14.44c.334 0 .608.266.608.601a.604.604 0 01-.608.602zm0-13.447H1.554a.598.598 0 01-.602-.601c0-.335.267-.602.602-.602H14.44c.334 0 .608.267.608.602a.604.604 0 01-.608.601zM3.372 12.218H8.11c1.12 0 1.776-.65 1.776-1.905V5.687c0-1.254-.657-1.905-1.922-1.905H3.372c-1.266 0-1.922.65-1.922 1.905v4.626c0 1.254.656 1.905 1.922 1.905zm.07-1.149c-.545 0-.844-.28-.844-.85V5.78c0-.568.3-.85.844-.85h4.451c.54 0 .844.282.844.85v4.44c0 .568-.305.85-.697.85H3.442z"})}),v=(0,p().wt)("alignRight",{viewBox:"0 0 16 16",svg:(0,m.jsx)("path",{d:"M14.44 15.325H1.554a.598.598 0 01-.602-.602c0-.335.267-.601.602-.601H14.44c.334 0 .608.266.608.601a.604.604 0 01-.608.602zm0-13.447H1.554a.598.598 0 01-.602-.601c0-.335.267-.602.602-.602H14.44c.334 0 .608.267.608.602a.604.604 0 01-.608.601zm-6.408 10.34h4.738c1.12 0 1.776-.65 1.776-1.905V5.687c0-1.254-.657-1.905-1.922-1.905H8.032c-1.266 0-1.922.65-1.922 1.905v4.626c0 1.254.656 1.905 1.922 1.905zm.07-1.149c-.545 0-.844-.28-.844-.85V5.78c0-.568.3-.85.844-.85h4.451c.54 0 .844.282.844.85v4.44c0 .568-.305.85-.697.85H8.102z"})}),h=(0,p().wt)("caption",{viewBox:"0 0 16 16",svg:(0,m.jsx)("path",{d:"M2.87 8.975h6.74c1.119 0 1.775-.65 1.775-1.904V2.444c0-1.254-.656-1.904-1.922-1.904H2.871C1.605.54.949 1.19.949 2.444V7.07c0 1.254.656 1.904 1.922 1.904zm.07-1.148c-.544 0-.843-.282-.843-.85v-4.44c0-.568.299-.849.844-.849h6.451c.54 0 .844.281.844.85v4.44c0 .567-.305.849-.697.849H2.94zm-1.39 4.386h12.893a.604.604 0 00.608-.601.604.604 0 00-.608-.602H1.55a.598.598 0 00-.601.602c0 .335.266.601.601.601zm8.49 3.247H1.55a.598.598 0 01-.601-.601c0-.335.266-.602.601-.602h8.49c.336 0 .609.267.609.602a.604.604 0 01-.608.601z"})});var _=()=>o(668725);const b=(0,p().wt)("crop",{viewBox:"0 0 16 16",svg:(0,m.jsx)("path",{d:"M15.571 11.703c0 .187-.063.34-.191.458a.68.68 0 01-.492.177H4.21a.573.573 0 01-.424-.157.573.573 0 01-.157-.424V1.127c0-.205.064-.371.191-.499A.646.646 0 014.306.43c.196 0 .357.066.485.198a.675.675 0 01.191.5v9.734c0 .127.066.191.199.191h9.707c.205 0 .369.06.492.178a.613.613 0 01.191.472zM.43 4.306c0-.187.061-.34.184-.458a.68.68 0 01.492-.184h10.692a.56.56 0 01.581.588v10.622a.67.67 0 01-.198.506.658.658 0 01-.486.192.657.657 0 01-.485-.192.684.684 0 01-.191-.506V5.147c0-.132-.066-.198-.199-.198H1.106c-.2 0-.364-.06-.492-.178a.616.616 0 01-.184-.465z"})});var y=()=>o(812318),S=()=>o(715862),w=()=>o(901497),k=()=>o(965998),I=()=>o(959013),A=()=>o(100622),x=()=>o(284371),C=()=>o(437219),T=()=>o(799750),M=()=>o(112873),P=()=>o(675074),B=()=>o(896628),R=()=>o(797265),E=()=>o(778417),D=()=>o(725614),N=()=>o(675925),L=()=>o(317909),F=()=>o(783793),U=()=>o(36088),O=()=>o(730307),V=()=>o(359848),j=()=>o(555776),z=()=>o(116008),q=()=>o(780054),H=()=>o(553965),W=()=>o(299545),K=()=>o(963589),G=()=>o(444796),$=()=>o(962730),Y=()=>o(430483),Q=()=>o(471266),Z=()=>o(553819),X=()=>o(496889),J=()=>o(704152),ee=()=>o(406699),te=()=>o(859428),oe=()=>o(613147),ne=()=>o(24611);const re=230,ie=(0,I().YK)({embedButtonText:{defaultMessage:"Embed link",id:"embedBlock.embedButton.label"},askAiText:{defaultMessage:"Ask AI",id:"EmbedBlockActions.AskAI"},embedCaption:{defaultMessage:"Works with links of PDFs, Google Drive, Google Maps, CodePen…",id:"embedBlock.linkPrompt.caption"},pastePrompt:{defaultMessage:"Paste in https://…",id:"embedBlock.pastePrompt"},validLink:{defaultMessage:"Please enter a valid link.",id:"embedBlock.invalidLinkError.message"},embedTitle:{defaultMessage:"Embed",id:"embedBlock.embedTab.title"},actionComment:{defaultMessage:"Comment",id:"embedBlock.actionButton.tooltip.comment"},actionDownload:{defaultMessage:"Download",id:"embedBlock.actionButton.tooltip.download"},actionOriginal:{defaultMessage:"Original",id:"embedBlock.actionButton.tooltip.original"},actionAlign:{defaultMessage:"Align",id:"embedBlock.actionButton.tooltip.align"},actionCaption:{defaultMessage:"Caption",id:"embedBlock.actionButton.tooltip.caption"},actionExpand:{defaultMessage:"Expand",id:"embedBlock.actionButton.tooltip.expand"},actionMore:{defaultMessage:"More actions",id:"embedBlock.actionButton.tooltip.blockActionMenu"},actionEditImage:{defaultMessage:"Crop image",id:"embedBlock.actionButton.tooltip.cropImage"},actionViewAltText:{defaultMessage:"Click to view alt text",id:"embedBlock.actionButton.tooltip.viewAltText"},actionEditAltText:{defaultMessage:"Click to view and edit alt text",id:"embedBlock.actionButton.tooltip.editAltText"},actionOpenInBrowserText:{defaultMessage:"Open in browser",id:"embedBlock.actionButton.tooltip.openInBrowser"}});function ae(e){let{environment:t,visible:o,height:n}=e;return(0,s().IS)((e=>{const{device:i}=t,{isMobile:a}=i;return{wrapper:{position:"absolute",top:4,right:4,borderRadius:4,color:A().Ay.white,fill:A().Ay.white,fontSize:11.5,background:(0,ne().FF)(t),display:"flex",whiteSpace:"nowrap",alignItems:"center",height:n||26,maxWidth:"calc(100% - 16px)",overflow:"hidden",pointerEvents:o||a?"auto":"none",opacity:o||a?1:0,transition:i.isSafari?void 0:ne().Wh,fontFamily:x().vc(r().locale).sans,zIndex:2}}}),[o,t,n]).wrapper}function se(e){const t=(0,i().v3)(),{device:r}=t,p=(0,i().WS)(),g=(0,I().tz)(),{store:f,blockLocation:v,mediaType:x,source:B,blockResizerStore:L,fileUploadState:X,isStoreNavigableAncestorNonEditableState:se,embedBlockStore:pe,alignmentPopupStore:me,canEdit:ge,dimensions:fe}=e,{hasEditPermission:ve,hasCommentPermission:he,isExternalObjectInstanceBlockStore:_e,blockType:be,originalImageSourceFromStore:ye,pathIsDead:Se}=(0,a().K8)((()=>({hasEditPermission:f.canEdit(),hasCommentPermission:f.canComment(),isExternalObjectInstanceBlockStore:f.isExternalObjectInstanceBlockStore(),blockType:f.getType(),originalImageSourceFromStore:f.getOriginalImageSource(),pathIsDead:f.pathIsDead(),imageHyperlink:f.getImageHyperlink()})),[f]),{block_alignment:we}=(0,a().K8)((()=>f.getFormat()),[f]),{isFullWidth:ke,width:Ie,isPageWidth:Ae}=fe,xe=_e,Ce=(0,a().K8)((()=>function(e,t,o,n){var r;return function(e,t,o){if(t)return ne().KJ.image;if(e){if(e.startsWith("data:")||e.startsWith("<img"))return;const t=(0,c().WT)({url:e,baseUrl:q().A.domainBaseUrl,publicDomainName:q().A.publicDomainName,preferredType:o});if("embed"!==t)return ne().KJ[t]}if(o&&e)return ne().KJ[o];return oe().A}(e,null==n?void 0:n.dataURL,t??(null===(r=o)||void 0===r?void 0:r.getType()))}(B,x,f,X)),[X,x,B,f]),Te=(0,a().K8)((()=>function(e,t){const{block_width:o}=e.getFormat(),{temporaryWidth:n}=t.state;if(void 0!==n)return n<=re;if(void 0!==o)return o<=re;return!1}(f,L)),[L,f]),Me=(0,a().K8)((()=>Z().A.getStatus(f.id)),[f.id]),Pe=(0,a().K8)((()=>L.getState().dragging),[L]),Be=P().Ox(v),Re=!r.isMobile&&!Be&&!xe,Ee=Ie&&!Ae&&!ke&&!p&&!Be,De=!r.isMobile&&((null==Ce?void 0:Ce.renderFullScreen)&&xe||"image"===be),Ne=(0,K().X)("image_cropping"),Le=(0,a().K8)((()=>z().A.state.open&&"comment"===z().A.state.content?z().A.state.discussionInputStore:null),[]),Fe=(0,a().K8)((()=>z().A.state.open&&"comment"===z().A.state.content&&z().A.state.blockId===f.id),[f.id]),Ue=(0,a().K8)((()=>W().oC(f,{recursivelyLoadAllDiscussions:!1})),[f]),{focused:Oe,hovered:Ve}=(0,a().O$)(pe),je=(0,a().K8)((()=>j().A),[]),ze=(0,a().K8)((()=>Q().A),[]),qe=(0,a().K8)((()=>f.isRootOrDirectChild()),[f]),[{value:He}]=(0,d().Yb)((async()=>{const e=await Promise.resolve().then(o.bind(o,650829));return(await e.assistantDependency.load()).assistantActions}),[]),We=(0,n.useCallback)((()=>we||(qe?"center":"left")),[qe,we]),Ke=ae({environment:t,visible:Oe||Ve}),Ge=(0,a().K8)((()=>Y().zD.shouldShowAttachmentImageButton()),[]),$e=(0,s().IS)((e=>({commentButton:{position:"relative",...ne().k,...r.isMobile&&{paddingLeft:8,paddingRight:8}}})),[r.isMobile]);if(X&&"uploading"!==Me)return null;if(Pe||Ce&&Ce.hideActions)return null;{let e=Ue;if(Fe&&(e+=1),"image"!==be||!se&&ge){if(se)return(0,m.jsx)("div",{style:Ke,children:(0,m.jsx)(J().A,{style:ne().k,hoveredStyle:ne().t9,onClick:()=>le(f,t),children:(0,m.jsx)(I().sA,{defaultMessage:"View original",id:"embedBlock.viewOriginalLink.button.label"})})});if(Te)return(0,m.jsx)("div",{style:Ke,children:(0,m.jsx)(ce,{blockLocation:v,store:f})});{const o=300,n=$().W.Top;let i,a;"image"===be&&(a=ye);const s=Ne&&!r.isMobile&&!Be&&"image"===be&&ve&&a&&(0,G().AS)(a)&&!Se,c=fe.blockWidth??fe.width,d=!Be&&"image"===be&&a&&!Se&&!r.isMobile&&Ge&&c&&c>300;if(be&&(0,l().bI)(be))i=(0,m.jsx)(te().A,{renderTooltip:()=>g.formatMessage(ie.actionDownload),placement:n,delayThreshold:o,render:e=>(0,m.jsx)(J().A,{...e,ariaLabel:g.formatMessage(ie.actionDownload),style:ne().k,hoveredStyle:ne().t9,onClick:()=>function(e,t){const o=e.getType(),n={action:"download",block_type:o,from:"embed_block_actions"};(0,N().o)(t,n,(o=>{P().qI({environment:t,store:e,callback:o})})),o&&C().qU(t,{type:"download",block_type:o,block_id:e.id})}(f,t),children:(0,y().k)({width:14,height:14,marginRight:0,fill:A().Ay.white})})});else{const e=r.isElectron?ie.actionOpenInBrowserText:ie.actionOriginal;i=(0,m.jsx)(te().A,{renderTooltip:()=>g.formatMessage(e),placement:n,delayThreshold:o,render:o=>(0,m.jsx)(J().A,{...o,ariaLabel:g.formatMessage(e),style:ne().k,hoveredStyle:ne().t9,onClick:()=>le(f,t),children:(0,u().y)({width:14,height:14,marginRight:0,fill:A().Ay.white})})})}return(0,m.jsxs)("div",{style:Ke,children:[d&&He&&(0,m.jsx)(J().A,{ariaLabel:g.formatMessage(ie.askAiText),style:ne().k,hoveredStyle:ne().t9,onClick:e=>{a&&(He.initializeSessionFromAttachmentBlockSelection({environment:t,selectedAttachmentStore:f}),e.preventDefault(),e.stopPropagation())},children:(0,m.jsx)(F().U,{})}),!Be&&!xe&&he&&(0,m.jsx)(te().A,{renderTooltip:()=>g.formatMessage(ie.actionComment),placement:n,delayThreshold:o,render:o=>(0,m.jsxs)(J().A,{...o,ariaLabel:g.formatMessage(ie.actionComment),style:$e.commentButton,hoveredStyle:ne().t9,onClick:()=>{E().IU({environment:t}),e>0?Fe&&Le?(je.setActiveWithSource("text_annotation"),(0,U().M)({discussionInputStore:Le,environment:t})):M().B4({environment:t,blockStore:f,analyticsFrom:"embed_menu",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1}):(0,O().l)({environment:t,blockStore:f})},children:[(0,k().M)({width:14,height:14,marginRight:e>0?4:0,fill:A().Ay.white}),Fe&&(0,m.jsx)(V().h,{onlyShowDraftDot:!0,customTop:4,customLeft:15,withBackgroundFill:!0}),e>0&&e]})}),ve&&Ee&&(0,m.jsx)(te().A,{renderTooltip:()=>g.formatMessage(ie.actionAlign),placement:n,delayThreshold:o,render:e=>(0,m.jsx)(ee().Ay,{popupType:ee().z7.Popup,buttonPopupStore:me,originGap:1,renderOrigin:t=>(0,m.jsxs)(J().A,{ariaLabel:g.formatMessage(ie.actionAlign),style:ne().k,hoveredStyle:ne().t9,...(0,H().A)(t,e),children:[de(We()),(0,_().b)({width:8,fill:A().Ay.white,marginLeft:4})]}),borderRadius:6,render:e=>(0,m.jsx)(ue,{store:f,alignmentPopupStore:me,buttonPopupParent:e}),popupWrapStyle:{background:(0,ne().FF)(t),display:"flex"}})}),ve&&Re&&(0,m.jsx)(te().A,{renderTooltip:()=>g.formatMessage(ie.actionCaption),placement:n,delayThreshold:o,render:e=>(0,m.jsx)(J().A,{...e,ariaLabel:g.formatMessage(ie.actionCaption),style:ne().k,hoveredStyle:ne().t9,onClick:()=>function(e,t){const o=e.getType(),n={action:"init_edit_caption",block_type:o,from:"embed_block_actions"};(0,N().o)(t,n,(o=>{const n=e.getPropertyStore("caption");E().hc({environment:t,store:e}),D().setSelectionAtEnd({store:n}),o()})),o&&C().qU(t,{type:"caption",block_type:o,block_id:e.id})}(f,t),children:h({width:14,height:14,marginRight:0,fill:A().Ay.white})})}),s&&(0,m.jsx)(te().A,{renderTooltip:()=>g.formatMessage(ie.actionEditImage),placement:n,render:e=>(0,m.jsx)(J().A,{...e,ariaLabel:g.formatMessage(ie.actionEditImage),style:ne().k,hoveredStyle:ne().t9,onClick:()=>{a&&(R().dL(t,[]),ze.openModal({blockStore:f,originalSource:a}),T().h(t,{from:"tooltip"}))},children:b({width:14,height:14,marginRight:0,fill:A().Ay.white})})}),De&&(0,m.jsx)(te().A,{renderTooltip:()=>g.formatMessage(ie.actionExpand),placement:n,delayThreshold:o,render:e=>(0,m.jsx)(J().A,{...e,ariaLabel:g.formatMessage(ie.actionExpand),style:ne().k,hoveredStyle:ne().t9,onClick:()=>function(e,t,o){const n=e.getType(),r={action:"full_screen",block_type:n,from:"embed_block_actions"};(0,N().o)(o,r,(n=>{R().iy({environment:o,blockStore:e,blockLocationOfTargetBlock:t,callback:n})})),n&&C().qU(o,{type:"full_screen",block_type:n,block_id:e.id})}(f,v,t),children:"image"===be?(0,w().J)({width:14,height:14,marginRight:0,fill:A().Ay.white}):(0,S().e)({width:14,height:14,marginRight:0,fill:A().Ay.white})})}),!r.isMobile&&i,(0,m.jsx)(ce,{blockLocation:v,store:f})]})}}return(0,m.jsx)("div",{style:Ke,children:(0,m.jsx)(ce,{blockLocation:v,store:f})})}}function le(e,t){const o=e;if(o){P().oD(t,{store:o,from:"view_original"});const n=o.getType();n&&C().qU(t,{type:"original",block_type:n,block_id:e.id})}}function ce(e){let{isPlaceholder:t,blockLocation:o,store:n}=e;const r=(0,I().tz)(),i=P().Ox(o),a=i?"comment_media":"default";return(0,m.jsx)(X().A,{store:n,fadeIn:!1,iconStyle:t?void 0:{fill:A().Ay.white},actionSectionGroupKey:a,hideFilterActionsInput:i,hoveredStyle:ne().t9,tooltipContent:r.formatMessage(ie.actionMore)})}function de(e){const t={left:f,center:g,right:v},o={width:14,height:14,marginRight:0,fill:A().Ay.white};return t[e](o)}function ue(e){const{store:t,alignmentPopupStore:o}=e,r=(0,i().v3)(),s=(0,a().K8)((()=>t.getFormat()),[t]),l=(0,a().K8)((()=>t.isRootOrDirectChild()),[t]),c=(0,n.useCallback)((()=>{const{block_alignment:e}=s;return e||(l?"center":"left")}),[s,l]),d=(0,n.useCallback)((e=>{let t=.6;return c()===e&&(t=1),{width:26,height:26,opacity:t}}),[c]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(J().A,{style:{...ne().k,...d("left"),borderRight:"none"},hoveredStyle:{...ne().t9,opacity:1},onClick:()=>pe("left",r,t,o),children:de("left")}),(0,m.jsx)("span",{style:{borderRight:`1px solid ${A().Ay.whiteWithAlpha(.2)}`}}),(0,m.jsx)(J().A,{style:{...ne().k,...d("center"),borderRight:"none"},hoveredStyle:{...ne().t9,opacity:1},onClick:()=>pe("center",r,t,o),children:de("center")}),(0,m.jsx)("span",{style:{borderRight:`1px solid ${A().Ay.whiteWithAlpha(.2)}`}}),(0,m.jsx)(J().A,{style:{...ne().k,...d("right"),borderRight:"none"},hoveredStyle:{...ne().t9,opacity:1},onClick:()=>pe("right",r,t,o),children:de("right")})]})}function pe(e,t,o,n){const r=o.getType(),i={action:"set_alignment",block_type:r,from:"embed_block_actions"};(0,N().o)(t,i,(i=>{n.reset();const{serverCommitResult:a}=L().createAndCommit({userAction:"EmbedBlock.handleAlignment",environment:t,canUndo:!0,perform:n=>{B().TP({environment:t,store:o,alignment:e,transaction:n})}});a.then(i);const s=o.getFormat(),l=s.block_alignment,c=s.block_width,d=s.block_height,u=o.isRootOrDirectChild()?"center":"left";r&&C().qU(t,{type:"alignment",block_type:r,block_id:o.id,block_alignment:e,block_height:d,block_width:c,previous_alignment:l,default_alignment:u}),E().sf()}))}},192845:(e,t,o)=>{o.d(t,{G:()=>h,n:()=>y});o(944114),o(898992),o(354520),o(737550);var n=o.n(o(794148)),r=()=>o(496603),i=()=>o(534177),a=()=>o(740912),s=()=>o(443881),l=()=>o(792071),c=()=>o(696706),d=()=>o(728272),u=()=>o(179034),p=()=>o(519831);function m(e,t){n()(e.table===t,`Expected space shard record pointer of table ${t} but got ${e.table}`),n()((0,i().O9)(e.spaceId),"Expected space shard record pointer but missing spaceId")}const g={complete_sprint:e=>{const{config:t,preventClearingConfig:o,visitors:n}=e,a=new(d().d);if(!t)return{config:void 0,remappedRecordPointers:a};const s=(0,r().mg)(t);if(t.sprint_collection){const e=n.visitRecordPointer(t.sprint_collection);if("replace"===e.type){if(e.value)m(e.value,p().Vl),a.add(e.value),s.sprint_collection=e.value;else if(!(0,i().O9)(e.value)&&!o)return{config:void 0,remappedRecordPointers:a}}else"keep"===e.type||(0,i().HB)(e)}if(t.task_collection){const e=n.visitRecordPointer(t.task_collection);if("replace"===e.type){if(e.value)m(e.value,p().Vl),a.add(e.value),s.task_collection=e.value;else if(!(0,i().O9)(e.value)&&!o)return{config:void 0,remappedRecordPointers:a}}else"keep"===e.type||(0,i().HB)(e)}return{config:s,remappedRecordPointers:a}},create_page:e=>{const{config:t,preventClearingConfig:o,visitors:n}=e;let a=new(d().d);if(!t)return{config:void 0,remappedRecordPointers:a};const l=(0,r().mg)(t),g=l.collection;if(l.collection){const e=n.visitRecordPointer(l.collection);"replace"===e.type?e.value?(m(e.value,p().Vl),a.add(e.value),l.collection=e.value):(0,i().O9)(e.value)||(l.collection=void 0):"keep"===e.type||(0,i().HB)(e)}if(!o&&!l.collection)return{config:void 0,remappedRecordPointers:a};if(l.template_page_id){const e=l.template_page_id,t=n.visitRecordPointer(c().L3.fromPointerLike({id:l.template_page_id,table:u().ev}));"replace"===t.type?t.value?(m(t.value,u().ev),a.add(t.value),l.template_page_id=t.value.id):(0,i().O9)(t.value)||(l.template_page_id=void 0):"keep"===t.type||(0,i().HB)(t);(0,i().O9)(g)&&(0,i().O9)(l.collection)&&!c().L3.isEqualIdTable(g,l.collection)&&e===l.template_page_id&&(l.template_page_id=void 0)}if(l.properties&&l.properties.length>0){const e=[];for(const t of l.properties){const o=n.visitCollectionProperty(t);"replace"===o.type?(0,i().O9)(o.value)&&e.push(o.value):"keep"===o.type?e.push(t):(0,i().HB)(o)}l.properties=e}if(l.values){const t={};for(const[o,c]of Object.entries(l.values)){var f;const l=n.visitCollectionProperty(o),d="keep"===l.type?o:l.value;if(!d)continue;const u=(0,r().mg)(c);if((0,i().O9)(null==u||null===(f=u.value)||void 0===f?void 0:f.value)){const{remappedRecordPointers:t,value:o}=(0,s().RI)({baseUrl:e.baseUrl,formula:u.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:n});u.value.value=o,a=a.union(t)}t[d]=u}l.values=t}return{config:l,remappedRecordPointers:a}},define_variables:e=>{const{config:t}=e;let o=new(d().d);if(!t)return{config:void 0,remappedRecordPointers:o};const n=(0,r().mg)(t);if(!n.values)return{config:n,remappedRecordPointers:o};for(const r of Object.values(n.values)){if(!(0,i().O9)(r.value)||!r.value.value)continue;const{remappedRecordPointers:t,value:n}=(0,s().RI)({baseUrl:e.baseUrl,formula:r.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});r.value.value=n,o=o.union(t)}return{config:n,remappedRecordPointers:o}},duplicate_blocks:e=>({config:e.config,remappedRecordPointers:new(d().d)}),http_request:e=>({config:e.config,remappedRecordPointers:new(d().d)}),modal_confirmation:e=>{const{config:t}=e;let o=new(d().d);if(!t)return{config:void 0,remappedRecordPointers:o};const n=(0,r().mg)(t);if(!n.text||!n.text.value)return{config:n,remappedRecordPointers:o};const{remappedRecordPointers:i,value:a}=(0,s().RI)({baseUrl:e.baseUrl,formula:n.text.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});return n.text.value=a,o=o.union(i),{config:n,remappedRecordPointers:o}},open_page:e=>{const{config:t,visitors:o}=e,n=new(d().d);if(!t)return{config:void 0,remappedRecordPointers:n};const a=(0,r().mg)(t);if(!a.target)return{config:a,remappedRecordPointers:n};if("variable"===a.target.type){const e=o.visitFormulaContextValue(a.target.id);"replace"===e.type&&(e.value?a.target.id=e.value:a.target=void 0)}else if("page"===a.target.type){const e=o.visitRecordPointer(a.target.page);if("replace"===e.type){const t=e.value;t?(m(t,u().ev),n.add(t),a.target.page=t):a.target=void 0}}else"url"===a.target.type||(0,i().HB)(a.target);return{config:a,remappedRecordPointers:n}},publish_site:e=>({config:e.config,remappedRecordPointers:new(d().d)}),query_collection:e=>{const{config:t,preventClearingConfig:o,visitors:n}=e,s=new(d().d);if(!t)return{config:void 0,remappedRecordPointers:s};const l=(0,r().mg)(t);if(!l.collection)return{config:void 0,remappedRecordPointers:s};const c=n.visitRecordPointer(l.collection);if("replace"===c.type){const e=c.value;e?(m(e,p().Vl),s.add(e),l.collection=e):l.collection=void 0}if(!o&&!l.collection)return{config:void 0,remappedRecordPointers:s};if(null!=l&&l.filter&&((0,a().w)(l.filter,(e=>{const t=n.visitRecordPointer(e);if("replace"===t.type){if((0,i().O9)(t.value))return s.add(t.value),t.value.id}else{if("keep"===t.type)return e.id;(0,i().HB)(t)}})),(0,a().d)(l.filter,(t=>{const o=e.visitors.visitCollectionProperty(t);return"replace"===o.type?o.value:"keep"===o.type?t:void(0,i().HB)(o)}))),null!=l&&l.sort&&l.sort.length>0){const t=[];for(const o of l.sort){const n=e.visitors.visitCollectionProperty(o.property);"replace"===n.type?(0,i().O9)(n.value)&&t.push({...o,property:n.value}):"keep"===n.type?t.push({...o}):(0,i().HB)(n)}l.sort=t}return{config:l,remappedRecordPointers:s}},send_gmail_notification:e=>{var t,o,n,i,a,l,c;const{config:u}=e;let p=new(d().d);if(!u)return{config:void 0,remappedRecordPointers:p};const m=(0,r().mg)(u);if(null!==(t=m.to)&&void 0!==t&&null!==(t=t.value)&&void 0!==t&&t.value){const{remappedRecordPointers:t,value:o}=(0,s().RI)({baseUrl:e.baseUrl,formula:m.to.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});m.to.value.value=o,p=p.union(t)}if(null!==(o=m.cc)&&void 0!==o&&null!==(o=o.value)&&void 0!==o&&o.value){const{remappedRecordPointers:t,value:o}=(0,s().RI)({baseUrl:e.baseUrl,formula:m.cc.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});m.cc.value.value=o,p=p.union(t)}if(null!==(n=m.bcc)&&void 0!==n&&null!==(n=n.value)&&void 0!==n&&n.value){const{remappedRecordPointers:t,value:o}=(0,s().RI)({baseUrl:e.baseUrl,formula:m.bcc.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});m.bcc.value.value=o,p=p.union(t)}if(null!==(i=m.reply_to)&&void 0!==i&&null!==(i=i.value)&&void 0!==i&&i.value){const{remappedRecordPointers:t,value:o}=(0,s().RI)({baseUrl:e.baseUrl,formula:m.reply_to.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});m.reply_to.value.value=o,p=p.union(t)}if(null!==(a=m.from_name)&&void 0!==a&&a.value){const{remappedRecordPointers:t,value:o}=(0,s().RI)({baseUrl:e.baseUrl,formula:m.from_name.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});m.from_name.value=o,p=p.union(t)}if(null!==(l=m.email_subject)&&void 0!==l&&l.value){const{remappedRecordPointers:t,value:o}=(0,s().RI)({baseUrl:e.baseUrl,formula:m.email_subject.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});m.email_subject.value=o,p=p.union(t)}if(null!==(c=m.email_body)&&void 0!==c&&c.value){const{remappedRecordPointers:t,value:o}=(0,s().RI)({baseUrl:e.baseUrl,formula:m.email_body.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});m.email_body.value=o,p=p.union(t)}return{config:m,remappedRecordPointers:p}},send_in_app_notification:e=>{const{config:t,visitors:o}=e;let n=new(d().d);if(!t)return{config:void 0,remappedRecordPointers:n};const a=(0,r().mg)(t);if(a.target){const t=a.target;if("property"===t.type){if(t.propertyId&&t.collectionPointer){const e=o.visitCollectionPropertyPointer({...t.collectionPointer,propertyId:t.propertyId});if("replace"===e.type){const t=e.value;if(t){m(t,p().Vl);const e=c().L3.fromSpaceShardRecordId({id:t.id,spaceId:t.spaceId},t.table);n.add(e),a.target={collectionPointer:e,propertyId:t.propertyId,type:"property"}}else(0,i().O9)(t)||(a.target=void 0)}else"keep"===e.type||(0,i().HB)(e)}}else if("formula"===t.type){if(t.value&&t.value.value){const{remappedRecordPointers:o,value:r}=(0,s().RI)({baseUrl:e.baseUrl,formula:t.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});t.value.value=r,n=n.union(o)}}else(0,i().HB)(t)}if(a.notification_message&&a.notification_message.value){const{remappedRecordPointers:t,value:o}=(0,s().RI)({baseUrl:e.baseUrl,formula:a.notification_message.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});a.notification_message.value=o,n=n.union(t)}return{config:a,remappedRecordPointers:n}},slack_notification:e=>{const{sourceSpaceId:t,targetSpaceId:o}=e,n=new(d().d);return t!==o?{config:void 0,remappedRecordPointers:n}:{config:e.config,remappedRecordPointers:n}},update_pages:e=>{const{config:t,visitors:o}=e;let n=new(d().d);if(!t)return{config:void 0,remappedRecordPointers:n};const l=(0,r().mg)(t);if(!l.target)return{config:void 0,remappedRecordPointers:n};if(l.target)if("variable"===l.target.type){const e=o.visitFormulaContextValue(l.target.id);"replace"===e.type&&(e.value?l.target.id=e.value:l.target=void 0)}else if("page"===l.target.type){const e=o.visitRecordPointer(l.target.page);if("replace"===e.type){const t=e.value;t?(m(t,u().ev),n.add(t),l.target.page=t):l.target=void 0}}else if("collection"===l.target.type){var c,g;const t=o.visitRecordPointer(l.target.collection);if("replace"===t.type){const e=t.value;e?(m(e,p().Vl),n.add(e),l.target.collection=e):l.target=void 0}else"keep"===t.type||(0,i().HB)(t);if(null!==(c=l.target)&&void 0!==c&&c.filter&&((0,a().w)(l.target.filter,(e=>{const t=o.visitRecordPointer(e);if("replace"===t.type){if((0,i().O9)(t.value))return n.add(t.value),t.value.id}else{if("keep"===t.type)return e.id;(0,i().HB)(t)}})),(0,a().d)(l.target.filter,(t=>{const o=e.visitors.visitCollectionProperty(t);return"replace"===o.type?o.value:"keep"===o.type?t:void(0,i().HB)(o)}))),null!==(g=l.target)&&void 0!==g&&g.sort&&l.target.sort.length>0){const t=[];for(const o of l.target.sort){const n=e.visitors.visitCollectionProperty(o.property);"replace"===n.type?(0,i().O9)(n.value)&&t.push({...o,property:n.value}):"keep"===n.type?t.push({...o}):(0,i().HB)(n)}l.target.sort=t}}else(0,i().HB)(l.target);if(!e.preventClearingConfig&&!l.target)return{config:void 0,remappedRecordPointers:n};if(l.properties&&l.properties.length>0){const t=[];for(const o of l.properties){const n=e.visitors.visitCollectionProperty(o);"replace"===n.type?(0,i().O9)(n.value)&&t.push(n.value):"keep"===n.type?t.push(o):(0,i().HB)(n)}l.properties=t}if(l.values){const t={};for(const[o,a]of Object.entries(l.values??{})){var f;const l=e.visitors.visitCollectionProperty(o),c="keep"===l.type?o:l.value;if(!c)continue;const d=(0,r().mg)(a);if((0,i().O9)(null==d||null===(f=d.value)||void 0===f?void 0:f.value)){const{remappedRecordPointers:t,value:o}=(0,s().RI)({baseUrl:e.baseUrl,formula:d.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});d.value.value=o,n=n.union(t)}t[c]=d}l.values=t}return{config:l,remappedRecordPointers:n}}};function f(e){const{automationActionModel:t,baseUrl:o,preventClearingConfig:n,publicDomainName:r,sourceSpaceId:i,visitors:a}=e,s=t.getType(),l=t.getConfig(),c=function(e){return g[e]}(s);return c({baseUrl:o,config:l,preventClearingConfig:n,publicDomainName:r,sourceSpaceId:i,targetSpaceId:t.space_id,visitors:a})}function v(){return{type:"keep"}}function h(e){const{automationActionModel:t,baseUrl:o,preventClearingConfig:n,publicDomainName:r,sourceSpaceId:i,visitors:a}=e,s={visitCollectionProperty:a.visitCollectionProperty??v,visitCollectionPropertyPointer:a.visitCollectionPropertyPointer??v,visitFormulaContextValue:a.visitFormulaContextValue??v,visitFormulaPageProperty:a.visitFormulaPageProperty??v,visitRecordPointer:a.visitRecordPointer??v},{config:c,remappedRecordPointers:d}=f({automationActionModel:t,baseUrl:o,preventClearingConfig:n,publicDomainName:r,sourceSpaceId:i,visitors:s}),{model:u}=l().RUD.create({alive:!0,config:c??{},id:t.id,parent_id:t.parent_id,parent_table:t.parent_table,space_id:t.space_id,type:t.type,version:t.getVersion()});return{remappedRecordPointers:d,value:u}}const _={button:e=>({config:e.config,remappedRecordPointers:new(d().d)}),event:e=>{const{config:t,visitors:n}=e,s=new(d().d),l=(0,r().mg)(t);if(!l.event.source)return{config:l,remappedRecordPointers:s};if("collection"===l.event.source.type){const e=n.visitRecordPointer(l.event.source.pointer);if("replace"===e.type){const t=e.value;t?(m(t,p().Vl),s.add(t),l.event.source={pointer:t,type:"collection"}):l.event.source=void 0}}else if("collection_view"===l.event.source.type){const e=n.visitRecordPointer(l.event.source.pointer);if("replace"===e.type){const t=e.value;t?(m(t,o(869558).Gy),s.add(t),l.event.source={pointer:t,type:"collection_view"}):l.event.source=void 0}}else"filter"===l.event.source.type||(0,i().HB)(l.event.source);if("some"===l.event.pagePropertiesEdited.type){const t=[];for(const o of l.event.pagePropertiesEdited.some??[]){const s=(0,r().mg)(o),l=n.visitCollectionProperty(s.property);if("replace"===l.type){if(!(0,i().O9)(l.value))continue;s.property=l.value}else"keep"===l.type||(0,i().HB)(l);if("changes_to_any"!==s.filter.operator){const t={property:s.property,filter:s.filter};(0,a().w)(t,(e=>{const t=n.visitRecordPointer(e);if("replace"===t.type){if((0,i().O9)(t.value))return t.value.id}else{if("keep"===t.type)return e.id;(0,i().HB)(t)}})),(0,a().d)(t,(t=>{const o=e.visitors.visitCollectionProperty(t);return"replace"===o.type?o.value:"keep"===o.type?t:void(0,i().HB)(o)}))}t.push(s)}l.event.pagePropertiesEdited.some=t}else if("all"===l.event.pagePropertiesEdited.type){const t=[];for(const o of l.event.pagePropertiesEdited.all??[]){const s=(0,r().mg)(o),l=n.visitCollectionProperty(s.property);if("replace"===l.type){if(!(0,i().O9)(l.value))continue;s.property=l.value}else"keep"===l.type||(0,i().HB)(l);if("changes_to_any"!==s.filter.operator){const t={property:s.property,filter:s.filter};(0,a().w)(t,(e=>{const t=n.visitRecordPointer(e);if("replace"===t.type){if((0,i().O9)(t.value))return t.value.id}else{if("keep"===t.type)return e.id;(0,i().HB)(t)}})),(0,a().d)(t,(t=>{const o=e.visitors.visitCollectionProperty(t);return"replace"===o.type?o.value:"keep"===o.type?t:void(0,i().HB)(o)}))}t.push(s)}l.event.pagePropertiesEdited.all=t}else"none"===l.event.pagePropertiesEdited.type||"any"===l.event.pagePropertiesEdited.type||(0,i().HB)(l.event.pagePropertiesEdited);return{config:l,remappedRecordPointers:s}},recurrence:e=>({config:e.config,remappedRecordPointers:new(d().d)})};function b(e){const{automationModel:t,visitors:o}=e,n=t.getTriggerType(),r=t.getTrigger(),i=function(e){return _[e]}(n);return i({config:r,visitors:o})}function y(e){const{automationModel:t,visitors:o}=e,n={visitCollectionProperty:o.visitCollectionProperty??v,visitRecordPointer:o.visitRecordPointer??v},{remappedRecordPointers:r,config:i}=b({automationModel:t,visitors:n}),{model:a}=l().R$j.create({alive:!0,createdBy:t.getCreatedByPointer(),id:t.id,lastEditedBy:t.getLastEditedByPointer(),parent_id:t.parent_id,parent_table:t.parent_table,space_id:t.space_id,status:t.getStatus(),trigger:i,version:t.getVersion()});return{remappedRecordPointers:r,value:a}}},193513:(e,t,o)=>{function n(e){return"full_page"===(null==e?void 0:e.normalizedFormatStore.state.collection_peek_mode)}o.d(t,{r:()=>n})},193722:(e,t,o)=>{o.d(t,{L:()=>r});var n=()=>o(989423);function r(e,t){n().vd(e,"configure_property",t)}},195613:(e,t,o)=>{o.d(t,{A:()=>r});const n=new(o(17090).A);(0,o(604341).exposeDebugValue)("FrameScrollerStore",n);const r=n},196286:(e,t,o)=>{let n;function r(e){n=e}function i(){return n}o.d(t,{D:()=>i,g:()=>r})},196310:(e,t,o)=>{o.d(t,{A:()=>u});var n=o(296540),r=()=>o(56366),i=()=>o(799954),a=()=>o(891078),s=()=>o(219839),l=o(474848);const c=(0,o(959013).YK)({emptyPlaceholder:{defaultMessage:"Empty quote",id:"quoteBlock.emptyQuote.placeholder"}});function d(e,t){let{disabled:d,disableCommentMenu:u,disableDrag:p,disableHoverMenu:m,hideContent:g,store:f,style:v}=e;const h=(0,n.useRef)(null),_=(0,a().pW)(f),b=(0,r().K8)((()=>{var e;return null===(e=f.getFormat())||void 0===e?void 0:e.quote_size}),[f]),y=(0,r().K8)((()=>f.getBlockTitleStore()),[f]),S=(0,r().K8)((()=>f.getContentStore()),[f]),w=(0,o(401497).IS)((()=>({root:{margin:0,fontSize:"large"===b?"1.2em":"1em",...i().nE,..._,display:"flex",...v},padding:{paddingLeft:i().nE.paddingLeft,paddingRight:i().nE.paddingRight},innerStyle:{borderLeft:"3px solid currentColor",paddingLeft:14,paddingRight:14,width:"100%"}})),[_,b,v]),{blockInsetRight:k}=(0,n.useContext)(s().n),I=(0,l.jsxs)("blockquote",{style:w.root,ref:h,children:[(0,l.jsxs)("div",{style:w.innerStyle,children:[(0,l.jsx)(o(246722).A,{style:w.padding,placeholderStyle:{left:14,width:"auto",right:14},disabled:d,store:y,placeholder:o(972435).A.formatMessage(c.emptyPlaceholder),pasteBehavior:"block",inPageFind:o(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),!g&&(0,l.jsx)(s().n.Provider,{value:{blockInsetRight:k+14},children:(0,l.jsx)(o(99945).A,{disabled:d,store:S,disableCommentMenu:u,disableHoverMenu:m,disableDrag:p})})]}),(0,l.jsx)(o(739283).A,{disableCommentMenu:u,hideContent:g,store:f})]});return(0,a().NW)(f,t,(0,n.useMemo)((()=>({renderedType:"quote",getNode:()=>h.current,getBlockStore:()=>f})),[f]),I)}const u=n.memo(n.forwardRef(d),o(821062).A)},196539:(e,t,o)=>{o.d(t,{B1:()=>s,dX:()=>i,eE:()=>a});var n=()=>o(645873);const r=new(n().O2)("teamspaceMenus",(async()=>{const[{default:e},{OutlinerTeamOverflow:t,TeamOverflowMenu:n}]=await Promise.all([Promise.all([o.e(95794),o.e(75355),o.e(99718)]).then(o.bind(o,127896)),Promise.all([o.e(95794),o.e(75355),o.e(99718)]).then(o.bind(o,693386))]);return{TeamBreadcrumbPopup:e,OutlinerTeamOverflow:t,TeamOverflowMenu:n}})),i=(0,n()._h)(r,(e=>e.TeamBreadcrumbPopup)),a=(0,n()._h)(r,(e=>e.OutlinerTeamOverflow)),s=(0,n()._h)(r,(e=>e.TeamOverflowMenu))},197194:(e,t,o)=>{o.d(t,{G0:()=>x,aT:()=>_,WP:()=>I,vG:()=>w,cy:()=>k,zG:()=>A,B_:()=>S,am:()=>y,Uw:()=>h,vK:()=>b});o(581454);var n=()=>o(148307),r=()=>o(540946),i=()=>o(634201),a=()=>o(299917),s=()=>o(919709),l=()=>o(983650),c=()=>o(496603),d=()=>o(534177),u=()=>o(720665),p=()=>o(989423);var m=()=>o(713972),g=()=>o(231722),f=()=>o(906537),v=()=>o(792002);function h(){return(0,a().Ay)(n().A.katex.katexMinCss,{resourceType:a().vt.Stylesheet})}function _(e){const{source:t,currentEquationToken:o,selectedText:n}=e;return"rich_text_menu"===t?o?{type:"edit",source:t}:{type:"create",source:t,selection:!0}:"input_keyboard_shortcut"===t?o?{type:"edit",source:t}:{type:"create",source:t,selection:Boolean(n)}:"slash_menu"===t?{type:"create",source:t,selection:!1}:"click_token"===t||"arrow_keys"===t?{type:"edit",source:t}:"text_filter"===t?{type:"create",source:t,selection:!0}:void(0,d().HB)(t)}function b(e){const{environment:t,equation:o,from:n}=e;!function(e,t){p().vd(e,"inline_equation_edit",t)}(t,{equation:o,equationNewlineCount:o.split("\n").length-1,equationBackslashCount:o.split("\\").length-1,equationLength:i().PE(o).length,from:n})}function y(e){return m().vq(e)&&e.classList.contains(l().X4)}function S(e){const{selection:t,environment:o}=e,n=f().getRect(t);if(!n){return m().EV(t.startContainer,m().vq).getBoundingClientRect()}if(o.device.isChrome){const e=t.startContainer.childNodes[t.startOffset];return e&&y(e)?e.getBoundingClientRect():m().vq(t.startContainer)?new DOMRect(n.left,n.top,n.width,t.startContainer.getBoundingClientRect().height):new DOMRect(n.left,n.top,n.width,22)}return n}function w(e){const{environment:t,equation:o,displayMode:n}=e,i=t.KatexStore.getKatex();return i&&(0,r().bq)({katex:i,equation:o,options:{displayMode:"block"===n}}).error}function k(e){if("editing"!==e.mode)return;const t=(0,g().H7)(e.multiSelection);if(!t)return;const{store:o,selection:n}=t,{tokensBeforeRange:r,tokensInsideRange:i}=s().AI5(o.getValue(),n.startIndex,n.endIndex);let a=c().cz(r.map(s().WWE));for(const l of i){const e=s().WWE(l),t={startIndex:a,endIndex:a+e};if(s().GiG(l))return{token:l,position:t};a+=e}}function I(e){let t=e;for(let o=0;o<2;o+=1){const e=/^\$(.*)\$$/m.exec(t);if(!e||!e[1])break;t=e[1]}return t}function A(e){const t=(0,g().H7)(e.multiSelection);if(!t)return[];const{selection:o,store:n}=t,r=n.getValue();if(!r)return[];const i=v().gE(o)&&o.startIndex>0?[o.startIndex-1]:[o.startIndex];return v().hH(i,r)[0]||[]}function x(e){const{equationState:t,isTemporary:o}=e,n=t.editingToken?u().h_(s().uPN(t.editingToken),(e=>s().gir(e)||s().lfl(e))):u().h_(t.annotations,(e=>s().gir(e)||s().lfl(e)||s().iGj(e))),r=c().oE([o&&s().TEZ(),...n]);return s().G0H(t.value,r)}},199896:(e,t,o)=>{o.d(t,{A:()=>U,M:()=>N});o(898992),o(672577),o(737550);var n=o.n(o(32485)),r=o(296540),i=()=>o(254751),a=()=>o(484714),s=()=>o(56366),l=()=>o(401497),c=()=>o(496506),d=()=>o(700500),u=()=>o(100622),p=()=>o(720665),m=()=>o(415651),g=()=>o(778417),f=()=>o(501020),v=()=>o(38337),h=()=>o(753199),_=()=>o(553965),b=()=>o(592678),y=()=>o(969197),S=()=>o(906537),w=()=>o(963589),k=()=>o(695625),I=()=>o(861841),A=()=>o(771989),x=()=>o(851802);class C extends(()=>o(757695))().default{getInitialState(){return{shouldShowSelectionHalo:!1,shouldShowDropParentHalo:!1,shouldShowDropZone:!1,shouldShowDropZoneHint:!1,forceRenderSelectionHalo:!1,showActionIsInFlight:!1}}}const T=C;var M=()=>o(502438),P=()=>o(145214),B=()=>o(603820),R=o(474848);const E=4,D="selectable_ref";function N(e){return e instanceof Object&&"refType"in e&&e.refType===D}class L extends i().A{constructor(){super(...arguments),this.lastDropZoneHintIndex=void 0,this.selectableDivRef=r.createRef(),this.storeTypes={draggableStore:A().A,selectableStore:T},this.legacyContextKeys=["scrollerContext","selectable"].concat(i().x),this.selectableContextValueMemoCell=new(o(493720).XQ),this.computedStore=this.createComputedStore((()=>{const e=Y(this.props.store);!p().pN(e)&&e>=0&&(this.lastDropZoneHintIndex=e);const t=J(this.props.store,this.environment,this.props.shouldShowHalo),o=K(this.props.store,Boolean(this.props.shouldShowHalo)),n=G(this.props.store,Boolean(this.props.shouldShowDropZone)),r=$(this.props.store,Boolean(this.props.shouldShowDropZone)),i=this.lastDropZoneHintIndex,a=this.stores.draggableStore.state.dragging,s=this.stores.draggableStore.hasDragged(),l=this.stores.draggableStore.state.initiator,c=this.stores.selectableStore.state,d=this.props.store.getType()||"unknown";return{isDragging:a,initiator:l,hasDragged:s,shouldShowSelectionHalo:t||c.forceRenderSelectionHalo||Boolean(this.props.shouldForceRenderSelectionHalo),shouldShowDropParentHalo:o,currentDropZone:n,dropZoneHint:r,dropZoneHintIndex:i,shouldRenderSelectionHalo:t||c.shouldShowSelectionHalo||c.forceRenderSelectionHalo||Boolean(this.props.shouldForceRenderSelectionHalo),shouldRenderDropParentHalo:o||c.shouldShowDropParentHalo,shouldRenderDropZoneHint:!p().pN(r)||c.shouldShowDropZoneHint,shouldRenderDropZone:!p().pN(n)||c.shouldShowDropZone,propStoreType:d,showActionIsInFlight:c.showActionIsInFlight}}))}get refType(){return D}get registries(){return[k().T]}getNode(){return this.props.nodeRef?this.props.nodeRef.current:this.selectableDivRef.current}getContextClosestSelectable(){var e;return null===(e=this.context.selectable)||void 0===e?void 0:e.closestSelectable}getContextSelectableContainer(){var e;return null===(e=this.context.selectable)||void 0===e?void 0:e.selectableContainer}getScrollerContext(){return this.context.scrollerContext}getSelectableStore(){return this.stores.selectableStore}getContentEditableContext(){return this.context.contentEditableContext}renderComponent(){var e;const{isDragging:t,initiator:r,hasDragged:i,shouldShowDropParentHalo:a,shouldShowSelectionHalo:s,currentDropZone:l,dropZoneHint:c,dropZoneHintIndex:u,shouldRenderSelectionHalo:p,shouldRenderDropParentHalo:m,shouldRenderDropZoneHint:g,shouldRenderDropZone:h,propStoreType:b,showActionIsInFlight:y}=this.computedStore.state,S=Boolean(this.props.shouldShowSuggestRemoveHalo&&!this.props.store.isType(d().tA)&&this.props.store.getRemoveSuggestion()),w=Boolean(this.props.shouldShowSuggestInsertBorder&&!this.props.store.isType(d().Lk)&&this.props.store.getInsertSuggestion()),k=p||m||g||h||S||w,I=n()(v().rb2,`notion-${b}-block`,this.props.className),{inheritDir:A=!1}=this.props,x=this.renderDraggable((e=>(0,R.jsxs)("div",{ref:this.selectableDivRef,style:ee({isPositionRelative:k,isDragging:t,hasDragged:i,initiator:r,showActionIsInFlight:y,shouldRenderSuggestInsertBorder:w},this.theme,this.props.canDrag,this.props.disablePointerEvents,this.props.style),"data-block-id":this.props.store.id,dir:o(508496).default.checkGate({gateName:"editor_basic_rtl"})&&!A?"auto":void 0,className:I,...(0,_().A)(e||{},{onDoubleClick:e=>te(e,this.props.canSelect,this.props.onDoubleClick),onContextMenu:e=>ce(e,this.props.store,this.environment,this.props.canTriggerContextMenu,this.props.contextMenuAndDragStores,this.props.actionSectionGroupKey,this.props.showBlockMenuInput),onMouseOver:e=>oe(e,this.props.store,this.props.canSelect),onMouseOut:()=>ne(this.props.store),onClick:e=>le(e,this.props.store,this.environment,this.props.canSelect,this.props.onEditText,this.props.onClick),onMouseMove:this.props.onMouseMove,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave}),children:[this.props.children,p&&(0,R.jsx)(O,{selectableStore:this.stores.selectableStore,style:this.props.haloStyle,isVisible:s,isLastItem:this.props.isLastItem}),S&&(0,R.jsx)(j,{}),m&&(0,R.jsx)(V,{selectableStore:this.stores.selectableStore,isVisible:a}),g&&(0,R.jsx)(W,{selectableStore:this.stores.selectableStore,direction:c,index:u,aboveDropZoneMargin:this.props.aboveDropZoneMargin,belowDropZoneMargin:this.props.belowDropZoneMargin,dropzoneGap:this.props.dropzoneGap}),h&&(0,R.jsx)(H,{selectableStore:this.stores.selectableStore,direction:l,aboveDropZoneMargin:this.props.aboveDropZoneMargin,belowDropZoneMargin:this.props.belowDropZoneMargin,dropzoneGap:this.props.dropzoneGap})]}))),C=this.selectableContextValueMemoCell.memo((()=>{var e;return{selectableContainer:null===(e=this.context.selectable)||void 0===e?void 0:e.selectableContainer,closestSelectable:this}}),[this,null===(e=this.context.selectable)||void 0===e?void 0:e.selectableContainer]);return(0,R.jsx)(f().v,{value:C,children:x})}displaySelectionHalo(e){this.stores.selectableStore.state.forceRenderSelectionHalo||(this.stores.selectableStore.update((e=>({...e,forceRenderSelectionHalo:!0}))),window.setTimeout((()=>{this.stores.selectableStore.update((e=>({...e,forceRenderSelectionHalo:!1})))}),e))}renderDraggable(e){const{device:t}=this.environment;return this.props.canDrag?(0,R.jsx)(B().A,{draggableStore:this.stores.draggableStore,forceTouch:t.isMobile&&!this.props.disableForceTouch,touchDragOnly:this.props.touchDragOnly,onDraggableDragStart:e=>re(e,this.environment,this.props.canDrag,this.props.onDraggableDragStart),onDraggableDragMove:e=>ie(e,this.props.store,this.environment,this.props.canDrag,this.props.preventBackgroundDrag,this.props.contextMenuAndDragStores,this.props.getGhostElement,this.props.disableScrollToRevealHorizontal,this.props.onDraggableDragMove),onDraggableDragEnd:e=>ae(e,this.props.analyticsName,this.environment,this.props.canDrag,this.props.onDraggableDragEnd),onDraggableDragCancel:e=>se(e,this.environment,this.props.canDrag,this.props.onDraggableDragCancel),disableHorizontalEdgeScroll:this.props.disableHorizontalDragEdgeScroll,render:e}):e(void 0)}}L.displayName="SelectableLegacy";const F=r.forwardRef((function(e,t){const i=(0,a().v3)(),c=(0,r.useContext)(o(789550).R),u=(0,r.useContext)(f().z),m=(0,s().uB)(e.selectableStore,T),g=(0,s().uB)(e.draggableStore,A().A),h=(0,r.useRef)(void 0),b=(0,r.useRef)(null),y=(0,r.useCallback)((()=>e.nodeRef?e.nodeRef.current:b.current),[e.nodeRef]),S=(0,r.useCallback)((e=>{m.state.forceRenderSelectionHalo||(m.update((e=>({...e,forceRenderSelectionHalo:!0}))),window.setTimeout((()=>{m.update((e=>({...e,forceRenderSelectionHalo:!1})))}),e))}),[m]);const{isDragging:I,initiator:x,hasDragged:C,shouldShowDropParentHalo:M,shouldShowSelectionHalo:P,currentDropZone:E,dropZoneHint:N,dropZoneHintIndex:L,shouldRenderSelectionHalo:F,shouldRenderDropParentHalo:U,shouldRenderDropZoneHint:z,shouldRenderDropZone:q,propStoreType:Q,showActionIsInFlight:Z}=(0,s().K8)((()=>{const t=Y(e.store);!p().pN(t)&&t>=0&&(h.current=t);const o=J(e.store,i,e.shouldShowHalo),n=K(e.store,Boolean(e.shouldShowHalo)),r=G(e.store,Boolean(e.shouldShowDropZone)),a=$(e.store,Boolean(e.shouldShowDropZone)),s=h.current,l=g.state.dragging,c=g.hasDragged(),d=g.state.initiator,u=m.state,f=e.store.getType()||"unknown";return{isDragging:l,initiator:d,hasDragged:c,shouldShowSelectionHalo:o||u.forceRenderSelectionHalo||Boolean(e.shouldForceRenderSelectionHalo),shouldShowDropParentHalo:n,currentDropZone:r,dropZoneHint:a,dropZoneHintIndex:s,shouldRenderSelectionHalo:o||u.shouldShowSelectionHalo||u.forceRenderSelectionHalo||Boolean(e.shouldForceRenderSelectionHalo),shouldRenderDropParentHalo:n||u.shouldShowDropParentHalo,shouldRenderDropZoneHint:!p().pN(a)||u.shouldShowDropZoneHint,shouldRenderDropZone:!p().pN(r)||u.shouldShowDropZone,propStoreType:f,showActionIsInFlight:u.showActionIsInFlight}}),[g,i,e.shouldForceRenderSelectionHalo,e.shouldShowDropZone,e.shouldShowHalo,e.store,m]),X=(0,s().K8)((()=>Boolean(e.shouldShowSuggestRemoveHalo&&!e.store.isType(d().tA)&&e.store.getRemoveSuggestion())),[e.shouldShowSuggestRemoveHalo,e.store]),de=(0,s().K8)((()=>Boolean(e.shouldShowSuggestInsertBorder&&!e.store.isType(d().Lk)&&e.store.getInsertSuggestion())),[e.shouldShowSuggestInsertBorder,e.store]),ue=F||U||z||q||X||de,pe=(0,s().K8)((()=>n()(v().rb2,`notion-${Q}-block`,e.className)),[Q,e.className]),{inheritDir:me=!1}=e,ge=(0,l().IS)((t=>({draggable:ee({isPositionRelative:ue,isDragging:I,hasDragged:C,initiator:x,showActionIsInFlight:Z,shouldRenderSuggestInsertBorder:de},t,e.canDrag,e.disablePointerEvents,e.style)})),[C,x,I,ue,e.canDrag,e.disablePointerEvents,e.style,de,Z]),fe=(0,r.useRef)(null),ve=(0,o(872994).y)();fe.current||(fe.current={refType:D,getContextClosestSelectable:()=>u.closestSelectable,getContextSelectableContainer:()=>u.selectableContainer,getScrollerContext:()=>c,displaySelectionHalo:S,getNode:y,props:e,getSelectableStore:()=>m,getContentEditableContext:()=>ve}),(0,r.useLayoutEffect)((()=>{fe.current={refType:D,getContextClosestSelectable:()=>u.closestSelectable,getContextSelectableContainer:()=>u.selectableContainer,getScrollerContext:()=>c,displaySelectionHalo:S,getNode:y,props:e,getSelectableStore:()=>m,getContentEditableContext:()=>ve}}),[ve,S,y,c,u.closestSelectable,u.selectableContainer,m,e]),(0,r.useImperativeHandle)(t,(()=>fe.current)),(0,o(790748).b)(k().T,(()=>fe.current),[]);const he=(0,w().X)("editor_basic_rtl"),_e=function(t){const{device:o}=i;return e.canDrag?(0,R.jsx)(B().A,{draggableStore:g,forceTouch:o.isMobile&&!e.disableForceTouch,touchDragOnly:e.touchDragOnly,onDraggableDragStart:t=>re(t,i,e.canDrag,e.onDraggableDragStart),onDraggableDragMove:t=>ie(t,e.store,i,e.canDrag,e.preventBackgroundDrag,e.contextMenuAndDragStores,e.getGhostElement,e.disableScrollToRevealHorizontal,e.onDraggableDragMove),onDraggableDragEnd:t=>ae(t,e.analyticsName,i,e.canDrag,e.onDraggableDragEnd),onDraggableDragCancel:t=>se(t,i,e.canDrag,e.onDraggableDragCancel),disableHorizontalEdgeScroll:e.disableHorizontalDragEdgeScroll,render:t}):t(void 0)}((t=>(0,R.jsxs)("div",{ref:b,style:ge.draggable,"data-block-id":e.store.id,dir:he&&!me?"auto":void 0,className:pe,...(0,_().A)(t||{},{onDoubleClick:t=>te(t,e.canSelect,e.onDoubleClick),onContextMenu:t=>ce(t,e.store,i,e.canTriggerContextMenu,e.contextMenuAndDragStores,e.actionSectionGroupKey,e.showBlockMenuInput),onMouseOver:t=>oe(t,e.store,e.canSelect),onMouseOut:()=>ne(e.store),onClick:t=>le(t,e.store,i,e.canSelect,e.onEditText,e.onClick),onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave}),children:[e.children,F&&(0,R.jsx)(O,{selectableStore:m,style:e.haloStyle,isVisible:P,isLastItem:e.isLastItem}),X&&(0,R.jsx)(j,{}),U&&(0,R.jsx)(V,{selectableStore:m,isVisible:M}),z&&(0,R.jsx)(W,{selectableStore:m,direction:N,index:L,aboveDropZoneMargin:e.aboveDropZoneMargin,belowDropZoneMargin:e.belowDropZoneMargin,dropzoneGap:e.dropzoneGap}),q&&(0,R.jsx)(H,{selectableStore:m,direction:E,aboveDropZoneMargin:e.aboveDropZoneMargin,belowDropZoneMargin:e.belowDropZoneMargin,dropzoneGap:e.dropzoneGap})]}))),be=(0,r.useMemo)((()=>({selectableContainer:u.selectableContainer,closestSelectable:fe.current})),[u.selectableContainer]);return(0,R.jsx)(f().v,{value:be,children:_e})})),U=r.forwardRef((function(e,t){const o=e=>{const o=e||null;"function"==typeof t?t(o):t&&(t.current=o)};return(0,w().X)("enable_selectable_fc")?(0,R.jsx)(F,{...e,ref:o}):(0,R.jsx)(L,{...e,ref:o})}));function O(e){return(0,R.jsx)(P().A,{visible:e.isVisible,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{e.selectableStore.setState({...e.selectableStore.state,shouldShowSelectionHalo:!0})},onAnimationEnd:()=>{e.isVisible||e.selectableStore.setState({...e.selectableStore.state,shouldShowSelectionHalo:!1})},className:v().nKq,style:{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,background:u().Ay.blueWithAlpha(.14),zIndex:81,borderRadius:4,...e.style}},"halo")}function V(e){return(0,R.jsx)(P().A,{visible:e.isVisible,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{e.selectableStore.setState({...e.selectableStore.state,shouldShowDropParentHalo:!0})},onAnimationEnd:()=>{e.isVisible||e.selectableStore.setState({...e.selectableStore.state,shouldShowDropParentHalo:!1})},className:v().nKq,style:{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,background:u().Ay.blueWithAlpha(.07),borderRadius:4}},"parent")}function j(){const e=(0,l().IS)((e=>({halo:{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,background:e.accentColors.gray[90],borderRadius:4}})),[]);return(0,R.jsx)("div",{className:v().JRJ,style:e.halo})}function z(e,t,o){if(void 0===o)return{};const n=e.isMobile?3:2;return o===I().bH.Above||o===I().bH.Below?{position:"relative",left:-n,width:n,height:E,background:t.contentBackground,transform:"translateZ(100px)"}:{position:"relative",top:-n,width:E,height:n,background:t.contentBackground,transform:"translateZ(100px)"}}function q(e,t,o,n,r){const i={position:"absolute",pointerEvents:"none",background:u().Ay.blueWithAlpha(.43),zIndex:88-t};if(e===I().bH.Onto)i.left=0,i.top=0,i.right=0,i.bottom=0,i.background=u().Ay.blueWithAlpha(.14);else if(e===I().bH.Above||e===I().bH.Below){const t=4;i.left=0,i.right=0,e===I().bH.Above?(i.top=-t,o&&(i.top-=o)):(i.bottom=-t,n&&(i.bottom-=n)),i.height=E}else{const t=8;i.top=0,i.bottom=0,e===I().bH.Left?i.left=r?-r:-t:i.right=r?-r:-t,i.width=E}return i}function H(e){const t=(0,a().Y0)(),o=(0,l().DP)(),n=void 0!==e.direction,r=Q(e.direction);return(0,R.jsx)(P().A,{visible:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{e.selectableStore.setState({...e.selectableStore.state,shouldShowDropZone:!0})},onAnimationEnd:()=>{n||e.selectableStore.setState({...e.selectableStore.state,shouldShowDropZone:!1})},style:q(e.direction??r,0,e.aboveDropZoneMargin,e.belowDropZoneMargin,e.dropzoneGap),children:e.direction!==I().bH.Onto&&(0,R.jsx)("div",{style:z(t,o,e.direction)})},"dropZone")}function W(e){const t=(0,a().Y0)(),o=(0,l().DP)(),n=!p().pN(e.direction),r=Q(e.direction);return(0,R.jsx)(P().A,{visible:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{e.selectableStore.setState({...e.selectableStore.state,shouldShowDropZoneHint:!0})},onAnimationEnd:()=>{n||e.selectableStore.setState({...e.selectableStore.state,shouldShowDropZoneHint:!1})},style:q(e.direction??r,(e.index||0)+1,e.aboveDropZoneMargin,e.belowDropZoneMargin,e.dropzoneGap),children:(0,R.jsx)("div",{style:z(t,o,e.direction)})},"hint")}function K(e,t){if(!t)return!1;const o=I().Ay.state;if(!o.isDragging)return!1;const{currentParentStore:n,currentHintDropZones:r,currentDropZone:i}=o;return(!i||i.type!==I().OX.DropTarget)&&(r.some((e=>e.direction===I().bH.Left||e.direction===I().bH.Right))?Boolean(i&&i.store===e):n===e)}function G(e,t){const o=I().Ay.state;if(!o.isDragging)return;const{currentDropZone:n}=o;return n&&n.type===I().OX.Selectable&&n.store===e&&t?n.direction:void 0}function $(e,t){const o=I().Ay.state;if(!o.isDragging)return;const{currentHintDropZones:n}=o;if(n&&t){const t=n.find((t=>t.type===I().OX.Selectable&&t.store===e));if(t)return t.direction}}function Y(e){const t=I().Ay.state;if(!t.isDragging)return;const{currentHintDropZones:o}=t;return o?o.findIndex((t=>t.type===I().OX.Selectable&&t.store===e)):void 0}function Q(e){const t=(0,r.useRef)(e);return e&&(t.current=e),t.current}const Z=new(c().default)((()=>M().default.state.phase),{debugName:"SelectionPhaseStore"}),X=new(c().default)((()=>{const e=(0,o(286088).SB)(o(525569).default.state);return Boolean(e)}),{debugName:"isCompletionsActiveStore"});function J(e,t,o){const{device:n}=t;if(!o)return!1;if(!(0,y().xK)(n)&&!X.state)return!1;if(Z.state!==M().SelectionPhase.Selected)return!1;const{stores:r}=M().default.state;return r.indexOf(e)>=0&&!I().Ay.state.isDragging}function ee(e,t,o,n,r){const{isPositionRelative:i,isDragging:a,hasDragged:s,showActionIsInFlight:l,initiator:c,shouldRenderSuggestInsertBorder:d}=e,u={};return"touch"===c&&(u.transition="transform 200ms ease-out",o&&a&&!s&&(u.boxShadow=t.shadowMD,u.transform="scale(1.05)",u.borderRadius=3)),i&&(u.position="relative"),l&&(u.opacity=.5),n&&(u.pointerEvents="none"),d&&(u.borderWidth=8,u.borderStyle="solid",u.borderColor=t.accentColors.blue[50]),{...u,...r}}function te(e,t,o){t||(0,h().SQ)({event:e,context:h().y$.EditorDoubleClick,callback:()=>{o&&o(e)}})}function oe(e,t,o){o&&(0,h().SQ)({event:e,context:h().y$.EditorMouseOver,callback:()=>{x().A.setState({...x().A.state,hoveredStore:t,lastHoveredStore:t})}})}function ne(e){x().A.state.hoveredStore===e&&x().A.setState({...x().A.state,hoveredStore:void 0})}function re(e,t,o,n){const{mobileNative:r}=t;o&&r&&r.buzz(),n&&n(e)}function ie(e,t,n,r,i,a,s,l,c){const{device:d}=n;r&&!i?I().Ay.state.isDragging?m().GB(n,{currentX:e.currentX,currentY:e.currentY}):b().Zm()&&(g().Lt({environment:n,store:t,selectMode:g().tY(n)}),m().v7(n,{startX:e.startX,startY:e.startY,stores:a||M().default.state.stores,isNativeDrag:!1,getGhostElement:s})):o(93658).default.state.isActive||d.isPhone||o(257615).jD({environment:n,target:e.target,startX:e.startX,startY:e.startY,showSelectionRect:!0,preventSelectStores:[],allowVerticalEdgeScroll:!0,allowHorizontalEdgeScroll:!l}),c&&c(e)}function ae(e,t,n,r,i){const{device:a}=n;a.isMobile&&o(353643).A.state.isDragging&&e.preventDefault(),r&&I().Ay.state.isDragging&&m().eW({environment:n,shiftKey:e.shiftKey,optionKey:e.optionKey,commandKey:e.commandKey,analyticsFrom:t}),i&&i(e)}function se(e,t,o,n){o&&I().Ay.state.isDragging&&(m().Pt(t),g().IU({environment:t})),n&&n(e)}function le(e,t,n,r,i,a){(0,h().SQ)({event:e,context:h().y$.EditorClick,callback:()=>{var s;if(null!==(s=M().default.getDefaultContainerFromTarget(e.target))&&void 0!==s&&s.isPeekRenderer()||o(661920).Cx(n),(0,y().xK)(n.device))b().Zm()||!r||t.isInlineCollectionView()||g().Lt({environment:n,store:t,selectMode:g().tY(n)});else if(i){const t=(0,o(792002).SL)(e.target);t&&o(317909).createAndCommit({userAction:"Selectable.handleClick",environment:n,canUndo:!0,perform:e=>{i({isAtStartOfLine:"start"===t,isClick:!0,transaction:e})}})}a&&a(e)}})}function ce(e,t,n,r,i,a,s){const{device:l}=n;if(l.isAndroid){const n=o(24157).default.state,r=(0,y().aI)(t),i=r&&"empty"!==n.mode&&(0,o(962845).xk)(n.multiSelection,r);if("editing"!==n.mode||!i)return S().isExpanded(S().get())||e.preventDefault(),e.stopPropagation(),!1}if(r){var c;const r=(0,o(519839).UH)(t),l=void 0!==t.getAssociatedCollectionStore(),d=null==r||null===(c=r.collectionViewStore())||void 0===c?void 0:c.getType();(0,h().SQ)({event:e,context:h().y$.EditorContextMenu,callback:()=>{e.preventDefault(),g().Lt({environment:n,store:t}),o(901265).it({environment:n,stores:i||M().default.state.stores,left:e.clientX,top:e.clientY,actionSectionGroupKey:l?"timeline"===d?"block_in_collection_timeline_view":"block_in_collection":a||"default",showInput:Boolean(s),analyticsFrom:"content_block_menu",optionalAnalyticsProperties:{collectionContextStore:r}})}})}}},200424:(e,t,o)=>{e.exports=o.p+"9ade71d75a1c0e93.png"},201938:(e,t,o)=>{o.d(t,{f:()=>u});var n=()=>o(584262),r=()=>o(763824),i=()=>o(178658),a=()=>o(869562),s=()=>o(722101),l=()=>o(246826),c=()=>o(725614),d=()=>o(317909);async function u(e){const{environment:t,prefill:o}=e,u=await(0,a().quickAddPage)({environment:t,from:"ai_writer_deeplink",pageVisitSource:n().y8.AiWriterDeeplink});if(!u)return;const{performResult:p}=d().createAndCommit({userAction:"routerStateActions.aiWriterDeeplink",environment:t,canUndo:!0,perform:e=>{const o=l().Wv({environment:t,type:"text",inMemoryRecordCache:u.inMemoryRecordCache,transaction:e,spaceId:u.pointer.spaceId});return s().BC({parentStore:u.getContentStore(),appendStore:o,transaction:e}).childStore}}),m=p.getTitleStore();m&&c().setSelection({store:m}),await async function(e){const{environment:t,prefill:o}=e;await r().wR(1e3),(0,i().openHelpMeWriteGenericPopup)({environment:t,from:"deeplink",prefilledValue:o??""})}({environment:t,prefill:o})}},202017:(e,t,o)=>{o.d(t,{n:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M6.375 15c0-.345.28-.625.625-.625h10.1a.625.625 0 1 1 0 1.25H7A.625.625 0 0 1 6.375 15M7 4.375a.625.625 0 1 0 0 1.25h10.1a.625.625 0 1 0 0-1.25zm0 5a.625.625 0 1 0 0 1.25h10.1a.625.625 0 1 0 0-1.25zm-4.025-3.5a.875.875 0 1 0 0-1.75.875.875 0 0 0 0 1.75M3.85 10a.875.875 0 1 1-1.75 0 .875.875 0 0 1 1.75 0m-.975 5.875a.875.875 0 1 0 0-1.75.875.875 0 0 0 0 1.75"})},r=(0,o(340498).wt)("bulletedList",n)},202786:(e,t,o)=>{o.d(t,{T:()=>r});var n=()=>o(24157);function r(){return!n().default.isEmptySelection()}},204521:(e,t,o)=>{o.d(t,{TR:()=>m,do:()=>l,zb:()=>d,PS:()=>c,Ib:()=>g,Ko:()=>s,kA:()=>f,G:()=>h,t0:()=>v,L3:()=>u,GF:()=>p});var n=()=>o(475140),r=()=>o(989423),i=()=>o(778781);function a(e){let{module:t,sessionId:o}=e;const n={type:t.type,session_id:o};return(0,i().gx)(t)?{...n,property_id:t.propertyId,property_type:t.type}:n}function s(e){let{environment:t,context:o,from:n,sessionId:i,collectionId:a,existingLayoutId:s,collectionViewId:l}=e;(0,r().u4)({environment:t,event:{eventName:"page_builder_opened",eventProperties:{context:o,from:n,sessions_id:i,collection_id:a,existing_layout_id:s,collection_view_id:l}}})}function l(e){let{environment:t,context:o,sessionId:i,collectionId:a,existingLayoutId:s,layoutSaved:l,initialLayoutModulesByArea:c,finalModulesByArea:d}=e;const u=!!c&&!!(0,n().ku)(c,(e=>"viewsMain"===e.type)),p=!!d&&!!(0,n().ku)(d,(e=>"viewsMain"===e.type));let m;m=!u&&p?"tabbed":u&&!p?"simple":"unchanged",(0,r().u4)({environment:t,event:{eventName:"page_builder_closed",eventProperties:{context:o,layout_saved:l,sessions_id:i,collection_id:a,existing_layout_id:s,layout_structure_change_in_session:m}}})}function c(e){let{environment:t,context:o,sessionId:n,module:i,collectionId:s,layoutId:l,area:c}=e;(0,r().u4)({environment:t,event:{eventName:"page_builder_module_removed",eventProperties:{...a({module:i,sessionId:n}),context:o,collection_id:s,layout_id:l,area:c}}})}function d(e){let{environment:t,context:o,module:n,sessionId:i,collectionId:s,layoutId:l,isPropertyCreation:c,area:d}=e;(0,r().u4)({environment:t,event:{eventName:"page_builder_module_added",eventProperties:{...a({module:n,sessionId:i}),context:o,collection_id:s,layout_id:l,is_property_created:c,area:d}}})}function u(e){let{environment:t,layoutId:o,collectionId:n,sessionId:i,from:a}=e;(0,r().u4)({environment:t,event:{eventName:"page_builder_page_settings_opened",eventProperties:{layout_id:o,collection_id:n,session_id:i,context:"layout",from:a}}})}function p(e){let{environment:t,layoutId:o,collectionId:n,sessionId:i,structure:a}=e;(0,r().u4)({environment:t,event:{eventName:"page_builder_structure_changed",eventProperties:{layout_id:o,collection_id:n,session_id:i,context:"layout",structure:a}}})}function m(e){let{modulesByArea:t,moduleId:o,newPosition:r}=e;const i=(0,n().JO)(t,(e=>e.id===o));if(i)return"page_main"===i.area&&"page_details"===r.area?"move_to_sidebar":"page_details"===i.area&&"page_main"===r.area?"move_to_main_page":i.area===r.area?"reorder":void 0}function g(e){let{environment:t,context:o,sessionId:n,collectionId:i,layoutId:a,action:s,moduleType:l}=e;(0,r().u4)({environment:t,event:{eventName:"page_builder_module_reordered",eventProperties:{context:o,session_id:n,collection_id:i,layout_id:a,action:s,module_type:l}}})}function f(e){let{environment:t,context:o,sessionId:n,collectionId:i,layoutId:a}=e;(0,r().u4)({environment:t,event:{eventName:"page_builder_reset_to_default",eventProperties:{context:o,session_id:n,collection_id:i,layout_id:a}}})}function v(e){let{environment:t,collectionId:o,layoutId:n}=e;(0,r().u4)({environment:t,event:{eventName:"details_sidebar_open",eventProperties:{collection_id:o,layout_id:n}}})}function h(e){let{environment:t,collectionId:o,layoutId:n}=e;(0,r().u4)({environment:t,event:{eventName:"details_sidebar_closed",eventProperties:{collection_id:o,layout_id:n}}})}},205098:(e,t,o)=>{o.d(t,{Az:()=>$,Cj:()=>S,Dz:()=>q,EA:()=>w,IZ:()=>x,J:()=>h,Jk:()=>X,Ms:()=>y,RR:()=>A,SN:()=>f,WG:()=>B,YL:()=>Y,h0:()=>P,iI:()=>W,kz:()=>C,o1:()=>k,w0:()=>D,wE:()=>Z,xt:()=>m,zZ:()=>b});o(16280),o(898992),o(823215),o(354520),o(581454);var n=()=>o(67657),r=()=>o(289915),i=()=>o(568063),a=()=>o(977345),s=()=>o(931075),l=()=>o(959013),c=()=>o(496603),d=()=>o(534177),u=()=>o(972435);const p={text:{operator:"string_contains",value:{type:"exact",value:void 0}},relation:{operator:"relation_contains",value:{type:"exact",value:void 0}},url:{operator:"string_contains",value:{type:"exact",value:void 0}},checkbox:{operator:"checkbox_is",value:{type:"exact",value:void 0}},created_by:{operator:"person_contains",value:{type:"exact",value:void 0}},last_edited_by:{operator:"person_contains",value:{type:"exact",value:void 0}},select:{operator:"enum_is",value:{type:"exact",value:void 0}},multi_select:{operator:"enum_contains",value:{type:"exact",value:void 0}},status:{operator:"status_is",value:{type:"is_group",value:void 0}},person:{operator:"person_contains",value:{type:"exact",value:void 0}},number:{operator:"number_equals",value:{type:"exact",value:void 0}},auto_increment_id:{operator:"number_equals",value:{type:"exact",value:void 0}},date:{operator:"date_is_relative_to",value:{type:"relative",value:"surrounding",unit:"week"}},created_time:{operator:"date_is",value:{type:"exact",value:void 0}},last_edited_time:{operator:"date_is",value:{type:"exact",value:void 0}},last_visited_time:{operator:"date_is",value:{type:"exact",value:void 0}},email:{operator:"string_contains",value:{type:"exact",value:void 0}},phone_number:{operator:"string_contains",value:{type:"exact",value:void 0}},title:{operator:"string_contains",value:{type:"exact",value:void 0}},file:{operator:"is_not_empty"},location:{operator:"location_is",value:{type:"exact",value:void 0}},verification:{operator:"verification_is",value:{type:"exact",value:void 0}},geo_point:{operator:"geo_point_is_within",value:{type:"exact",value:void 0}}};function m(e){return p[e]}function g(e){return"v2"===e.version?function(e){if(!e.formula2)return{operator:"is_empty"};const t=e.formula2.result_type;if("array"===t.type){const e=(0,a().JK)(t.of);return"array"===e.type||"function"===e.type?{operator:"is_empty"}:"block"===e.type||"unknown"===e.type?{operator:"any",subfilter:m("text")}:{operator:"any",subfilter:m(e.type)}}if("unknown"===t.type||"block"===t.type)return m("text");return m(t.type)}(e):function(e){return e.formula&&e.formula.result_type?m(e.formula.result_type):{operator:"is_empty"}}(e)}function f(e){const{property:t,schema:o}=e,a=o[t];if(!a||"button"===a.type)return{operator:"is_empty"};if("formula"===a.type)return g(a);if("rollup"===a.type){if(a.aggregation&&"show_unique"!==a.aggregation){return m((0,n().ou)((0,n().ZP)(a.aggregation)))}{const t=(0,i().eY)(e);if(!t){return{operator:"any",subfilter:{operator:"is_empty"}}}if("rollup"===t.targetPropertySchema.type){return{operator:"any",subfilter:{operator:"is_empty"}}}if("formula"===t.targetPropertySchema.type){const e=g(t.targetPropertySchema);if((0,r().s1)(e))return e;return{operator:"any",subfilter:e}}if("button"===t.targetPropertySchema.type)return{operator:"is_empty"};return{operator:"any",subfilter:m(t.targetPropertySchema.type)}}}return m(a.type)}const v=(0,l().YK)({date_is_within:{defaultMessage:"Is between",id:"collectionFilterMenuHelpers.operator.dateIsWithin"},date_is_relative_to:{defaultMessage:"Is relative to today",id:"collectionFilterMenuHelpers.operator.dateIsRelativeTo"},is_empty:{defaultMessage:"Is empty",id:"collectionFilterMenuHelpers.operator.isEmpty"},is_not_empty:{defaultMessage:"Is not empty",id:"collectionFilterMenuHelpers.operator.isNotEmpty"},string_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.stringIs"},string_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.stringIsNot"},string_contains:{defaultMessage:"Contains",id:"collectionFilterMenuHelpers.operator.stringContains"},string_does_not_contain:{defaultMessage:"Does not contain",id:"collectionFilterMenuHelpers.operator.stringDoesNotContain"},string_starts_with:{defaultMessage:"Starts with",id:"collectionFilterMenuHelpers.operator.stringStartsWith"},string_ends_with:{defaultMessage:"Ends with",id:"collectionFilterMenuHelpers.operator.stringEndsWith"},checkbox_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.checkboxIs"},checkbox_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.checkboxIsNot"},enum_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.enumIs"},enum_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.enumIsNot"},enum_contains:{defaultMessage:"Contains",id:"collectionFilterMenuHelpers.operator.enumContains"},enum_does_not_contain:{defaultMessage:"Does not contain",id:"collectionFilterMenuHelpers.operator.enumDoesNotContain"},status_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.statusIs"},status_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.statusIsNot"},person_contains:{defaultMessage:"Contains",id:"collectionFilterMenuHelpers.operator.personContains"},person_does_not_contain:{defaultMessage:"Does not contain",id:"collectionFilterMenuHelpers.operator.personDoesNotContain"},relation_contains:{defaultMessage:"Contains",id:"collectionFilterMenuHelpers.operator.relationContains"},relation_does_not_contain:{defaultMessage:"Does not contain",id:"collectionFilterMenuHelpers.operator.relationDoesNotContain"},location_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.locationIs"},location_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.locationIsNot"},number_equals:{defaultMessage:"=",id:"collectionFilterMenuHelpers.operator.numberEquals"},number_does_not_equal:{defaultMessage:"≠",id:"collectionFilterMenuHelpers.operator.numberDoesNotEqual"},number_greater_than:{defaultMessage:">",id:"collectionFilterMenuHelpers.operator.numberGreaterThan"},number_less_than:{defaultMessage:"<",id:"collectionFilterMenuHelpers.operator.numberLessThan"},number_greater_than_or_equal_to:{defaultMessage:"≥",id:"collectionFilterMenuHelpers.operator.numberGreaterThanOrEqualTo"},number_less_than_or_equal_to:{defaultMessage:"≤",id:"collectionFilterMenuHelpers.operator.numberLessThanOrEqualTo"},date_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.dateIs"},date_is_before:{defaultMessage:"Is before",id:"collectionFilterMenuHelpers.operator.dateIsBefore"},date_is_after:{defaultMessage:"Is after",id:"collectionFilterMenuHelpers.operator.dateIsAfter"},date_is_on_or_before:{defaultMessage:"Is on or before",id:"collectionFilterMenuHelpers.operator.dateIsOnOrBefore"},date_is_on_or_after:{defaultMessage:"Is on or after",id:"collectionFilterMenuHelpers.operator.dateIsOnOrAfter"},any:{defaultMessage:"Any",id:"collectionFilterMenuHelpers.operator.any"},none:{defaultMessage:"None",id:"collectionFilterMenuHelpers.operator.none"},every:{defaultMessage:"Every",id:"collectionFilterMenuHelpers.operator.every"},string_has_no_alphabet_prefix:{defaultMessage:"(Not used)",id:"collectionFilterMenuHelpers.operator.stringHasNoAlphabetPrefix"},verification_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.verificationStateIs"},verification_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.verificationStateIsNot"},geo_point_is_within:{defaultMessage:"Is within",id:"collectionFilterMenuHelpers.operator.geoPointIsWithin"},geo_point_is_not_within:{defaultMessage:"Is not within",id:"collectionFilterMenuHelpers.operator.geoPointIsNotWithin"}});function h(e){if("enum_contains_all"===e)throw new Error("enum_contains_all is not supported to be displayed in the filter menu");return u().A.formatMessage(v[e])}const _=(0,l().YK)({today:{defaultMessage:"Today",id:"collectionFilterMenuHelpers.relativeDates.today"},tomorrow:{defaultMessage:"Tomorrow",id:"collectionFilterMenuHelpers.relativeDates.tomorrow"},yesterday:{defaultMessage:"Yesterday",id:"collectionFilterMenuHelpers.relativeDates.yesterday"},one_week_ago:{defaultMessage:"One week ago",id:"collectionFilterMenuHelpers.relativeDates.oneWeekAgo"},one_week_from_now:{defaultMessage:"One week from now",id:"collectionFilterMenuHelpers.relativeDates.oneWeekFromNow"},one_month_ago:{defaultMessage:"One month ago",id:"collectionFilterMenuHelpers.relativeDates.oneMonthAgo"},one_month_from_now:{defaultMessage:"One month from now",id:"collectionFilterMenuHelpers.relativeDates.oneMonthFromNow"}}),b=(0,l().YK)({past:{defaultMessage:"Past",id:"collectionFilterMenuHelpers.relativeDates.past"},future:{defaultMessage:"Next",id:"collectionFilterMenuHelpers.relativeDates.next"}}),y=(0,l().YK)({direction:{defaultMessage:"Direction",id:"collectionFilterMenuHelpers.relativeDates.direction"},unit:{defaultMessage:"Unit",id:"collectionFilterMenuHelpers.relativeDates.unit"}}),S=(0,l().YK)({this:{defaultMessage:"This",id:"collectionFilterMenuHelpers.relativedates.this"}}),w=(0,l().YK)({day:{defaultMessage:"day",id:"collectionFilterMenuHelpers.relativeDates.day"},week:{defaultMessage:"week",id:"collectionFilterMenuHelpers.relativeDates.week"},month:{defaultMessage:"month",id:"collectionFilterMenuHelpers.relativeDates.month"},year:{defaultMessage:"year",id:"collectionFilterMenuHelpers.relativeDates.year"}}),k=(0,l().YK)({day:{defaultMessage:"days",id:"collectionFilterMenuHelpers.relativeDates.days"},week:{defaultMessage:"weeks",id:"collectionFilterMenuHelpers.relativeDates.weeks"},month:{defaultMessage:"months",id:"collectionFilterMenuHelpers.relativeDates.months"},year:{defaultMessage:"years",id:"collectionFilterMenuHelpers.relativeDates.years"}}),I=(0,l().YK)({exactDate:{defaultMessage:"Custom date",id:"collectionFilterMenuHelpers.relativeDates.exactDate"},exactDateRange:{defaultMessage:"Exact dates",id:"collectionFilterMenuHelpers.relativeDates.exactDateRange"}});function A(e){return"exact"===e.type?u().A.formatMessage(I.exactDate):u().A.formatMessage(_[e.value])}const x=(0,l().YK)({custom:{defaultMessage:"Relative range",id:"collectionFilterMenuHelpers.relativeDates.range"},surrounding:{defaultMessage:"Surrounding range",id:"collectionFilterMenuHelpers.relativeDates.customRange"},this_week:{defaultMessage:"This week",id:"collectionFilterMenuHelpers.relativeDates.thisWeek"},the_past_week:{defaultMessage:"The past week",id:"collectionFilterMenuHelpers.relativeDates.thePastWeek"},the_past_month:{defaultMessage:"The past month",id:"collectionFilterMenuHelpers.relativeDates.thePastMonth"},the_past_year:{defaultMessage:"The past year",id:"collectionFilterMenuHelpers.relativeDates.thePastYear"},the_next_week:{defaultMessage:"The next week",id:"collectionFilterMenuHelpers.relativeDates.theNextWeek"},the_next_month:{defaultMessage:"The next month",id:"collectionFilterMenuHelpers.relativeDates.theNextMonth"},the_next_year:{defaultMessage:"The next year",id:"collectionFilterMenuHelpers.relativeDates.theNextYear"}});function C(e){return"custom"===e.value?function(e){const t=u().A.formatMessage(b[e.direction]),o=1===e.count?u().A.formatMessage(w[e.unit]):u().A.formatMessage(k[e.unit]);return 1===e.count?`${t} ${o}`:`${t} ${e.count} ${o}`}(e):"surrounding"===e.value?function(e){const t=u().A.formatMessage(w[e.unit]);return`${u().A.formatMessage(S.this)} ${t}`}(e):"exact"===e.type?u().A.formatMessage(I.exactDateRange):"relative"===e.type?u().A.formatMessage(x[e.value]):void(0,d().HB)(e)}const T=(0,l().YK)({start_date:{defaultMessage:"Start date",id:"collectionFilterMenuHelpers.dateFilterModes.start_date"},end_date:{defaultMessage:"End date",id:"collectionFilterMenuHelpers.dateFilterModes.end_date"}}),M=(0,l().YK)({start_date:{defaultMessage:"For date ranges, filters on the start date. For individual dates, filters on the date.",id:"collectionFilterMenuHelpers.dateFilterModesTooltip.start_date"},end_date:{defaultMessage:"For date ranges, filters on the end date. For individual dates, filters on the date.",id:"collectionFilterMenuHelpers.dateFilterModesTooltip.end_date"}});function P(e){return u().A.formatMessage(T[e])}function B(e){return u().A.formatMessage(M[e])}const R=(0,l().YK)({and:{defaultMessage:"And",id:"collectionFilterMenuHelpers.combinatorOperators.and"},or:{defaultMessage:"Or",id:"collectionFilterMenuHelpers.combinatorOperators.or"}}),E=(0,l().YK)({checked:{defaultMessage:"Checked",id:"collectionFilterMenuHelpers.checkbox.checked"},unchecked:{defaultMessage:"Unchecked",id:"collectionFilterMenuHelpers.checkbox.unchecked"}});function D(e){return e.value?u().A.formatMessage(s().D6(e.value)):""}function N(e){let{filter:t,schema:o}=e;return z({filter:t.subfilter,schema:o})}function L(e){let{filter:t}=e;return A(t.value)}function F(e){let{filter:t}=e;return C(t.value)}function U(e){let{filter:t}=e;return`"${t.value.value||""}"`}function O(e){let{filter:t}=e;return void 0===t.value.value?void 0:t.value.value.toString()}function V(e){let{filter:t}=e;return function(e){const t=e.value?E.checked:E.unchecked;return u().A.formatMessage(t)}(t.value)}const j={is_empty:()=>{},is_not_empty:()=>{},string_is:U,string_is_not:U,string_contains:U,string_does_not_contain:U,string_starts_with:U,string_ends_with:U,checkbox_is:V,checkbox_is_not:V,enum_is:U,enum_is_not:U,enum_contains:U,enum_does_not_contain:U,status_is:U,status_is_not:U,relation_contains:()=>{},relation_does_not_contain:()=>{},person_contains:()=>{},person_does_not_contain:()=>{},location_is:()=>{},location_is_not:()=>{},number_equals:O,number_does_not_equal:O,number_greater_than:O,number_less_than:O,number_greater_than_or_equal_to:O,number_less_than_or_equal_to:O,date_is:L,date_is_before:L,date_is_after:L,date_is_on_or_before:L,date_is_on_or_after:L,date_is_within:F,date_is_relative_to:F,any:N,none:N,every:N,string_has_no_alphabet_prefix:()=>{},verification_is:U,verification_is_not:U,geo_point_is_within:()=>{},geo_point_is_not_within:()=>{}};function z(e){const{filter:t}=e;if("enum_contains_all"===t.operator)throw new Error("enum_contains_all is not supported to be displayed in the filter menu");const o=h(t.operator),n=j[t.operator](e);return c().oE([o,n]).join(" ")}function q(e){const{filter:t,schema:o}=e;if((0,r().dU)(t)){const e=t.filters||[],n=c().oE(e.map((e=>{const t=q({filter:e,schema:o});if(t)return(0,r().dU)(e)?`(${t})`:t}))),i=u().A.formatMessage(R[t.operator]);return n.join(` ${i} `)}if((0,r().yX)(t)){const e=o[t.property];if(!e)return;const n=t.filter,r=e.name,i=z({filter:n,schema:o});return c().oE([r,i]).join(" ")}}const H={text:function(e,t){return(0,r().tk)(t)?{operator:t}:(0,r().fZ)(e)?{operator:t,value:{type:"exact",value:void 0}}:"string_has_no_alphabet_prefix"===e.operator?{operator:t}:{operator:t,value:e.value}},number:function(e,t){return(0,r().tk)(t)?{operator:t}:(0,r().fZ)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value}},checkbox:function(e,t){return{operator:t,value:e.value}},select:function(e,t){return(0,r().tk)(t)?{operator:t}:(0,r().fZ)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value}},multi_select:function(e,t){return(0,r().tk)(t)?{operator:t}:(0,r().fZ)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value}},status:function(e,t){return(0,r().tk)(t)?{operator:t}:(0,r().fZ)(e)?{operator:t,value:{type:"is_option",value:void 0}}:{operator:t,value:e.value}},relation:function(e,t){return(0,r().tk)(t)?{operator:t}:(0,r().fZ)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value}},person:function(e,t){return(0,r().tk)(t)?{operator:t}:(0,r().fZ)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value}},date:function(e,t,o){if((0,r().tk)(t))return{operator:t};const n=(0,r().fZ)(e)?void 0:e.use_end;return"date_is_within"===t?"date_is_within"!==e.operator?{operator:t,value:{type:"exact",value:void 0},use_end:n}:e:"date_is_relative_to"===t?"date_is_relative_to"!==e.operator?{operator:t,value:{type:"relative",value:"surrounding",unit:"week"},use_end:n}:e:(0,r().Cw)(e)?"combinator"===o?{operator:t,value:{type:"relative",value:"today"},use_end:n}:{operator:t,value:{type:"exact",value:void 0},use_end:n}:(0,r().fZ)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value,use_end:n}},file:function(e,t){return{operator:t}},location:function(e,t){return{operator:t,value:e.value}},verification:function(e,t){return{operator:t,value:e.value}},geo_point:function(e,t){return{operator:t,value:e.value}}};function W(e,t,o,n){return(0,H[e])(t,o,n)}const K=(0,l().YK)({and:{defaultMessage:"And",id:"database.filterOperators.and"},or:{defaultMessage:"Or",id:"database.filterOperators.or"}}),G=(0,l().YK)({and:{defaultMessage:"All filters must match",id:"database.filterOperators.andCaption"},or:{defaultMessage:"At least one filter must match",id:"database.filterOperators.orCaption"}});function $(e,t){return"and"===e?t.formatMessage(K.and):t.formatMessage(K.or)}function Y(e,t){return"and"===e?t.formatMessage(G.and):t.formatMessage(G.or)}const Q=(0,l().YK)({any:{defaultMessage:"Any",id:"database.filterOperators.any"},every:{defaultMessage:"Every",id:"database.filterOperators.every"},none:{defaultMessage:"None",id:"database.filterOperators.none"}});function Z(e,t){return"any"===e?t.formatMessage(Q.any):"every"===e?t.formatMessage(Q.every):t.formatMessage(Q.none)}const X=(0,l().YK)({number:{id:"collectionFilterMenuFilter.filterOperators.number.order",defaultMessage:"{operator}{operatorValue}"},text:{id:"collectionFilterMenuFilter.filterOperators.text.order",defaultMessage:"{operator}{operatorValue}"},checkbox:{id:"collectionFilterMenuFilter.filterOperators.checkbox.order",defaultMessage:"{operator}{operatorValue}"},select:{id:"collectionFilterMenuFilter.filterOperators.select.order",defaultMessage:"{operator}{operatorValue}"},multi_select:{id:"collectionFilterMenuFilter.filterOperators.multi_select.order",defaultMessage:"{operator}{operatorValue}"},status:{id:"collectionFilterMenuFilter.filterOperators.status.order",defaultMessage:"{operator}{operatorValue}"},relation:{id:"collectionFilterMenuFilter.filterOperators.relation.order",defaultMessage:"{operator}{operatorValue}"},location:{id:"collectionFilterMenuFilter.filterOperators.location.order",defaultMessage:"{operator}{operatorValue}"},person:{id:"collectionFilterMenuFilter.filterOperators.person.order",defaultMessage:"{operator}{operatorValue}"},date:{id:"collectionFilterMenuFilter.filterOperators.date.order",defaultMessage:"{operator}{operatorValue}"},file:{id:"collectionFilterMenuFilter.filterOperators.file.order",defaultMessage:"{operator}{operatorValue}"},verification:{id:"collectionFilterMenuFilter.filterOperators.verification.order",defaultMessage:"{operator}{operatorValue}"},geo_point:{id:"collectionFilterMenuFilter.filterOperators.geo_point.order",defaultMessage:"{operator}{operatorValue}"}})},205127:(e,t,o)=>{o.d(t,{fN:()=>i().f,l3:()=>s().A,vj:()=>a().A,oK:()=>l});var n=()=>o(645873);const r=new(n().O2)("Breadcrumb",(async()=>{const{default:e}=await o.e(3476).then(o.bind(o,914436));return{Breadcrumb:e}}));var i=()=>o(675811),a=()=>o(565049),s=()=>o(906719);const l=(0,n()._h)(r,(e=>e.Breadcrumb))},205682:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(764218).A)},208459:(e,t,o)=>{o.d(t,{H:()=>n});o(898992),o(737550);function n(e){const t=e.getState().stack;return t.some((e=>"customize"===e.type))?"customize_menu":t.some((e=>"automationSettings"===e.type&&"view_options"!==e.from))?void 0:t.some((e=>"main"===e.type))?"view_options":void 0}},209416:(e,t,o)=>{o.d(t,{a:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"m9.89 10.71 7.985-7.986V2.71a.77.77 0 0 0 0-1.084.77.77 0 0 0-1.083 0L8.793 9.613a1.1 1.1 0 0 0-.232.387l-.284.916c-.052.194.129.374.31.31l.916-.284a.87.87 0 0 0 .387-.232"}),(0,n.jsx)("path",{d:"M4.825 3.25h8.572L12.145 4.5h-7.32c-.649 0-1.175.526-1.175 1.175v6.75c0 .649.526 1.175 1.175 1.175h4.837a.63.63 0 0 1 .382.13l2.65 2.038v-1.543c0-.345.28-.625.625-.625h1.856c.649 0 1.175-.526 1.175-1.175V6.017l1.122-1.122q.126.369.128.78v6.75a2.425 2.425 0 0 1-2.425 2.425h-1.231v2.188a.625.625 0 0 1-1.006.495L9.45 14.85H4.825A2.425 2.425 0 0 1 2.4 12.425v-6.75A2.425 2.425 0 0 1 4.825 3.25"})]})},i=(0,o(340498).wt)("commentPencil",r)},209660:(e,t,o)=>{o.d(t,{Ow:()=>s,Yp:()=>l});var n=()=>o(624307),r=()=>o(351360),i=()=>o(973189),a=()=>o(404141);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{currentTab:t,subtab:o,isMobile:i,openedFrom:s,upsellType:d,highlightedSetting:u}=e;if(i)"notifications"!==t&&"notifications_and_settings"!==t&&"user_settings"!==t||n().A.setState({open:!0});else if(t)a().A.setState({open:!0,openedFrom:s,upsellType:d,...c({currentTab:t,subtab:o}),highlightedSetting:u});else{const{currentSpaceStore:e}=r().default.state;a().A.setState({open:!0,openedFrom:s,upsellType:d,currentTab:l(e),defaultSubtab:void 0,highlightedSetting:u})}}function l(e){return e&&e.canRead()?"members":"settings"}function c(e){const{currentTab:t,subtab:o}=e;if("members"===t){return{currentTab:"members",defaultSubtab:o===i().d.Members||o===i().d.Groups||o===i().d.Guests||o===i().d.Reprovisioning||o===i().d.Requests?o:void 0}}if("integrations"===t){return{currentTab:"integrations",defaultSubtab:"member_connections"===o||"workspace_connections"===o?o:void 0}}if("security"===t){return{currentTab:"security",defaultSubtab:"security"===o||"data_retention"===o?o:void 0}}if("billing"===t){return{currentTab:"billing",defaultSubtab:"address"===o?o:void 0}}if("requests"===t){return{currentTab:"requests",defaultSubtab:"upgrades"===o?o:void 0}}return{currentTab:t,defaultSubtab:void 0}}},210737:(e,t,o)=>{o.d(t,{A:()=>a});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(737550);var n=()=>o(377586);class r extends(()=>o(757695))().default{getInitialState(){return{openPopups:new Set,namedOpenPopups:new Set}}hasOpenPopups(){const{openPopups:e,namedOpenPopups:t}=this.getState();return e.size>0||t.size>0}hasOpenMobileSlideUps(){const{openPopups:e,namedOpenPopups:t}=this.getState();if(t.size>0)return!0;for(const o of e){if(o.current.hidesMobileNativeBottomBar)return!0;if((o.current.popupType===n().n.SlideUp||o.current.popupType===n().n.BottomSheet)&&!o.current.preventSlideUpTransition)return!0}return!1}hasOpenMouseCapturePopup(){const{openPopups:e}=this.state;return e.size>0&&Array.from(e.values()).some((e=>!e.current.disableMouseCapture))}closeAll(){for(const o of this.state.openPopups){var e,t;null===(e=(t=o.current).onDismiss)||void 0===e||e.call(t,null)}}addNamedPopup(e){this.state.namedOpenPopups.add(e),this.emit()}removeNamedPopup(e){this.state.namedOpenPopups.delete(e),this.emit()}}const i=new r;(0,o(604341).exposeDebugValue)("GlobalPopupStore",i);const a=i},211134:(e,t,o)=>{o.d(t,{PF:()=>n});o(944114);function n(e){return"development"===e.env||"local"===e.env||e.isAdminMode}},211716:(e,t,o)=>{o.d(t,{Fv:()=>u,HP:()=>s,fp:()=>d,ig:()=>a});o(944114),o(581454);var n=()=>o(244641),r=()=>o(496603),i=()=>o(825972);let a=function(e){return e.Default="Default",e.Link="Link",e.Favorite="Favorite",e.Search="Search",e}({});const s=3,l={BONUS:{DEFAULT:100,LINK:120,SEARCH:200,FAVORITE:140},BONUS_NORMALIZER:100,TIME_BUCKETS:[{days:4,weight:100},{days:14,weight:70},{days:31,weight:50},{days:90,weight:30}],DEFAULT_BUCKET_WEIGHT:10};function c(e){const{BONUS:t}=l;switch(e){case a.Default:return t.DEFAULT;case a.Link:return t.LINK;case a.Favorite:return t.FAVORITE;case a.Search:return t.SEARCH;default:(0,o(534177).HB)(e)}}function d(e){let{now:t,visitedAt:o}=e;const{TIME_BUCKETS:r,DEFAULT_BUCKET_WEIGHT:i}=l,a=n().c9.fromMillis(t).diff(n().c9.fromMillis(o),"days").get("days");return a<=r[0].days?r[0].weight:a<=r[1].days?r[1].weight:a<=r[2].days?r[2].weight:a<=r[3].days?r[3].weight:i}class u{constructor(e){var t=this;this.maxStoredVisits=void 0,this.visits=void 0,this.recordVisit=e=>{const{id:t,type:n,timestampForTestingOnly:a}=e,s=this.createVisit(n,a),l=this.visits.get(t);if(l.error)return;if((0,i().Dd)()){const{currentSpaceStore:e}=o(351360).default.state,n=e&&e.id,r=e&&e.userId;n&&r&&((0,i().B8)({spaceId:n,pageId:t,visitedAt:s.timestamp}),(0,o(355012).$B)({spaceId:n,userId:r,pageId:t,visitedAt:s.timestamp}))}const c=l.value||this.createVisitCacheEntry();var d,u,p;c.totalVisits+=1,c.recentVisits=(d=c.recentVisits,u=s,p=this.maxStoredVisits,[...(0,r().O6)(d,p-1),u]),this.visits.set(t,c)},this.getVisits=e=>{const t=this.visits.get(e);if(!t.error)return t.value},this.getVisitedIds=()=>{const e=this.visits.keys();return e.error?[]:e.value},this.getFrecencyScore=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();const n=t.getVisits(e);if(!n)return u.UNVISITED_FRECENCY_SCORE;const{totalVisits:i,recentVisits:a}=n;if(0===i||0===a.length)return u.UNVISITED_FRECENCY_SCORE;const s=a.map((e=>{const{type:t,timestamp:n}=e,r=c(t);return d({now:o,visitedAt:n})*(r/l.BONUS_NORMALIZER)})),p=(0,r().cz)(s)/s.length;return Math.ceil(i*p)};const{maxBlocks:n,maxStoredVisits:a,store:s,version:p}=e;this.maxStoredVisits=a,this.visits=new(o(643534).A)({prefix:e.prefix||"FrecencyStore",maxSize:n,store:s,version:p})}initialize(){this.visits.updateVersionAndGC()}sortFrecencyHighToLow(e){const{items:t,now:o,recordFrecency:n}=e;return(0,r().Ul)(t,(e=>{const t="number"==typeof e.score?e.score:1,r=this.getFrecencyScore(e.id,o);n&&(e.frecencyScore=r);const i=e.personalizationBoost??1;return-1*t*Math.max(r,i)}))}createVisitCacheEntry(){return{totalVisits:0,recentVisits:[]}}createVisit(e,t){return{type:e,timestamp:"number"==typeof t?t:Date.now()}}clear(){const e=[];this.visits.scan((t=>e.push(t)));for(const t of e)this.visits.remove(t)}}u.UNVISITED_FRECENCY_SCORE=1},212050:(e,t,o)=>{o.d(t,{u:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("close",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},212326:(e,t,o)=>{o.d(t,{I6:()=>m,Ot:()=>p,Yz:()=>s,_m:()=>c,dl:()=>l});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949);var n=()=>o(284371),r=()=>o(720665),i=()=>o(441199),a=()=>o(424039);function s(e,t){const o=r().$z(e,(e=>{let{notification:t}=e;return t.navigable_block_id??t.id}));return o.forEach(((e,n)=>{const r=[],i=new Set;e.forEach((e=>{const{activity:t}=e;"commented"!==t.type&&r.push(e);const o=t.discussion_id;void 0===o||i.has(o)||(r.push(e),i.add(o))}));const a=r.filter((e=>{let{notification:o}=e;return("mentions"!==t||!o.visited)&&!("archive"===t&&!o.visited)}));0!==a.length?o.set(n,a):o.delete(n)})),o}function l(){const e=a().Ay.state.filter||a().$S;return a().w_.includes(e)?e:a().$S}function c(){return{fontWeight:n().Wy.medium}}function d(e,t){const o=void 0===e?new Date:new Date(e);return o.setDate(o.getDate()-t),o.setHours(0,0,0,0),o.getTime()}function u(e,t){const o=void 0===e?new Date:new Date(e),n=o.getDay();return o.setDate(o.getDate()-n-7*t),o.setHours(0,0,0,0),o.getTime()}function p(e){return[{name:"today",cutoffTime:d(e,0)},{name:"this_week",cutoffTime:u(e,0)},{name:"last_week",cutoffTime:u(e,1)},{name:"older"}]}function m(){const{contentType:e,openState:t}=i().default.state;return"inbox"===e?t:"closed"}},212439:(e,t,o)=>{o.d(t,{V:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("duplicate",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.83887 12.1523H4.00098V13.1846C4.00098 14.6406 4.75977 15.3994 6.24316 15.3994H13.1611C14.6377 15.3994 15.4033 14.6406 15.4033 13.1846V6.21191C15.4033 4.75586 14.6377 3.99707 13.1611 3.99707H11.999V2.96484C11.999 1.50879 11.2334 0.75 9.75684 0.75H2.83887C1.3623 0.75 0.59668 1.50195 0.59668 2.96484V9.93066C0.59668 11.3936 1.3623 12.1523 2.83887 12.1523ZM2.9209 10.8125C2.28516 10.8125 1.93652 10.4844 1.93652 9.82129V3.08105C1.93652 2.41797 2.28516 2.08301 2.9209 2.08301H9.68164C10.3105 2.08301 10.666 2.41797 10.666 3.08105V3.99707H6.24316C4.75977 3.99707 4.00098 4.75586 4.00098 6.21191V10.8125H2.9209ZM6.31836 14.0596C5.68262 14.0596 5.34082 13.7314 5.34082 13.0684V6.32812C5.34082 5.66504 5.68262 5.33691 6.31836 5.33691H13.0791C13.708 5.33691 14.0635 5.66504 14.0635 6.32812V13.0684C14.0635 13.7314 13.708 14.0596 13.0791 14.0596H6.31836Z"})})},212640:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},213525:(e,t,o)=>{o.d(t,{$y:()=>p,CE:()=>y,Kb:()=>b,Lc:()=>u,SM:()=>f,d$:()=>S,f1:()=>h,fT:()=>w,g8:()=>g,kq:()=>v,oP:()=>_,yu:()=>m});o(898992),o(672577),o(581454),o(737550),o(296540);var n=()=>o(959013),r=()=>o(496603),i=()=>o(534177),a=()=>o(920093),s=()=>o(901389),l=()=>o(605402),c=()=>o(37433),d=o(474848);async function u(e){let{isCurrentUser:t,teamName:o,memberName:r}=e;return await s().Gh({message:t?(0,d.jsx)(n().sA,{defaultMessage:"Leave {teamName}?",id:"teamActions.leaveTeam.confirmDialogMessage.removingYourself",values:{teamName:o}}):(0,d.jsx)(n().sA,{id:"teamActions.leaveTeam.confirmDialogMessage.removingSomeoneElse",defaultMessage:"Remove {memberName} from {teamName}?",values:{memberName:r,teamName:o}}),description:t?(0,d.jsx)(n().sA,{id:"teamActions.leaveTeam.confirmDialogDescription.removingYourself",defaultMessage:"You'll no longer see this teamspace in your sidebar and you may lose permissions to the teamspace's pages."}):(0,d.jsx)(n().sA,{id:"teamActions.leaveTeam.confirmDialogDescription.removingSomeoneElse",defaultMessage:"This change won't apply to any restricted pages in the teamspace."}),acceptLabel:t?(0,d.jsx)(n().sA,{defaultMessage:"Leave Teamspace",id:"teamActions.leaveTeam.confirmDialogAcceptLabel.removingYourself"}):(0,d.jsx)(n().sA,{defaultMessage:"Remove",id:"teamActions.leaveTeam.confirmDialogAcceptLabel"}),cancelLabel:(0,d.jsx)(n().sA,{id:"teamActions.leaveTeam.confirmDialogCancelLabel.removingSomeoneElse",defaultMessage:"Cancel"})}).then((e=>e.accept))}function p(){s().rG({message:(0,d.jsx)(n().sA,{id:"teamActions.leaveTeam.onlyTeamMemberLeftDialogMessage",defaultMessage:"Invite another teamspace owner to leave this teamspace"})})}function m(e){s().rG({message:(0,d.jsx)(n().sA,{id:"teamActions.leaveTeam.userMembershipFromGroupDialogMessage",defaultMessage:"You can't leave this teamspace because you're a member of {groupNames}.",values:{groupNames:r().oE(e.map((e=>`"${e.name}"`))).join(", ")}})})}function g(e){var t;let{group:o,onAccept:r}=e;const i=(null===(t=l().A.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===o.group_id)))||void 0===t?void 0:t.memberCount)??0;s().ui({message:o.name?(0,d.jsx)(n().sA,{id:"TeamSettings.groups.removeGroupModal.title",defaultMessage:"Remove {groupName}?",values:{groupName:o.name}}):(0,d.jsx)(n().sA,{id:"TeamSettings.groups.removeGroupModal.title.noGroupName",defaultMessage:"Remove this group?"}),description:(0,d.jsx)(n().sA,{id:"TeamSettings.groups.removeGroupModal.description",defaultMessage:"{numGroupMembers} {numGroupMembers, plural, one {member} other {members}} from this group will be removed from this teamspace.",values:{numGroupMembers:i}}),showCancel:!0,keepFocus:!1,handleCancel:s().zw,items:[{label:(0,d.jsx)(n().sA,{id:"TeamSettings.groups.removeGroupModal.confirmationButton",defaultMessage:"Remove group"}),color:"red",onAccept:r}]})}function f(){s().rG({message:(0,d.jsx)(n().sA,{id:"teamActions.removeGroup.showRemoveOnlyGroupOwnerDialogMessage",defaultMessage:"Invite another teamspace owner to remove this group from the teamspace"})})}async function v(e,t){return await a().h({title:(0,d.jsx)(n().sA,{id:"teamActions.archiveTeam.confirmDialogTitle",defaultMessage:"Archive this teamspace?"}),message:t?(0,d.jsx)(n().sA,{id:"teamActions.archiveTeam.transitionToZeroTeams.confirmDialogDescription",defaultMessage:'This is your last default teamspace. Archiving will remove the "Teamspaces" section in your sidebar. Type the teamspace name to confirm.'}):(0,d.jsx)(n().sA,{id:"teamActions.archiveTeam.confirmDialogDescription",defaultMessage:"Archiving this teamspace will remove access and hide it in the sidebar for all teamspace members. Type the teamspace name to confirm."}),acceptLabel:(0,d.jsx)(n().sA,{id:"teamActions.archiveTeam.confirmDialogAcceptLabel",defaultMessage:"Archive teamspace"}),requiredInputValue:e,width:432})}async function h(e){return await s().Gh({message:(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,d.jsx)(n().sA,{id:"teamActions.movePagesFromArchivedTeam.confirmDialogTitle",defaultMessage:'Would you like to move pages under {teamName} to the "Private" and "Shared" sections in your sidebar?',values:{teamName:e}})}),acceptLabel:(0,d.jsx)(n().sA,{id:"teamActions.movePagesFromArchivedTeam.confirmDialogAcceptLabel",defaultMessage:"Move pages"}),cancelLabel:(0,d.jsx)(n().sA,{id:"teamActions.movePagesFromArchivedTeam.confirmDialogCancelLabel",defaultMessage:"Proceed without moving pages"})}).then((e=>e.accept))}async function _(e){let{teamName:t,currentIsDefault:o,accessLevel:r,isDefault:a,numberOfTeamGuests:l}=e;const c=(0,d.jsx)("div",{style:{marginTop:8},children:(0,d.jsx)(n().sA,{id:"teamActions.confirmTeamAccessDialog.disableDefaultTeamLabel",defaultMessage:"{teamName} will also no longer be a default teamspace and auto-add workspace members.",values:{teamName:t}})});let u,p;return"private"===r?(u=(0,d.jsx)(n().sA,{defaultMessage:"Make {teamName} private?",id:"teamActions.confirmTeamAccessChangeDialog.privateTeam.titleWithName",values:{teamName:t}}),p=(0,d.jsxs)("div",{children:[(0,d.jsx)(n().sA,{id:"teamActions.teamScreen.privateTeam.description",defaultMessage:"Only members will be able to see the teamspace and its content."}),o&&c]})):a?l>0?(u=(0,d.jsx)(n().sA,{id:"teamActions.confirmTeamAccessChangeDialog.defaultTeamWithGuests.titleWithName",defaultMessage:"Make {teamName} a default teamspace?",values:{teamName:t}}),p=(0,d.jsx)(n().sA,{id:"teamActions.teamScreen.defaultTeamWithGuests.description",defaultMessage:"Everyone in the workspace and future workspace members will be added to this teamspace. Additionally, {numberOfTeamGuests} teamspace guests will be removed.",values:{numberOfTeamGuests:l}})):(u=(0,d.jsx)(n().sA,{id:"teamActions.confirmTeamAccessChangeDialog.defaultTeam.titleWithName",defaultMessage:"Make {teamName} a default teamspace?",values:{teamName:t}}),p=(0,d.jsx)(n().sA,{id:"teamActions.teamScreen.defaultTeam.description",defaultMessage:"Everyone in the workspace and future workspace members will be added to this teamspace."})):"open"===r?(u=(0,d.jsx)(n().sA,{defaultMessage:"Make {teamName} open?",id:"teamActions.confirmTeamAccessChangeDialog.openTeam.titleWithName",values:{teamName:t}}),p=(0,d.jsxs)("div",{children:[!o&&(0,d.jsx)(n().sA,{id:"teamActions.teamScreen.openTeam.description",defaultMessage:"Everyone in the workspace will have access to the teamspace and its content."}),o&&c]})):"closed"===r?(u=(0,d.jsx)(n().sA,{defaultMessage:"Make {teamName} closed?",id:"teamActions.confirmTeamAccessChangeDialog.closedTeam.titleWithName",values:{teamName:t}}),p=(0,d.jsxs)("div",{children:[(0,d.jsx)(n().sA,{id:"teamActions.teamScreen.closedTeam.description",defaultMessage:"The teamspace will still be discoverable, but joining will be invite-only."}),o&&c]})):(0,i().HB)(r),await s().Gh({message:u,description:p}).then((e=>e.accept))}async function b(e){let t,o,r="normal";switch(e){case"disable_guests":t=(0,d.jsx)(n().sA,{id:"teamSettings.disableGuests.confirmationTitle",defaultMessage:"Disable guests?"}),o=(0,d.jsx)(n().sA,{id:"teamSettings.disableGuests.confirmationDescription",defaultMessage:"All page guests in this teamspace will be removed."});break;case"disable_public_access":t=(0,d.jsx)(n().sA,{id:"teamSettings.disablePublicPages.confirmationTitle",defaultMessage:"Disable publishing sites and forms?"}),o=(0,d.jsx)(n().sA,{id:"teamSettings.disablePublicPages.confirmationDescription",defaultMessage:"This will remove access for anyone who is not a member or guest of the workspace from all pages in this teamspace."}),r="wide";break;case"disable_export":case"disable_team_page_edits":return!0;default:(0,i().HB)(e)}return await s().Gh({message:t,description:o,mode:r}).then((e=>e.accept))}async function y(e){let t,o;switch(e){case"disable_guests":t=(0,d.jsx)(n().sA,{id:"teamSettings.disableGuestsOverride.confirmationTitle",defaultMessage:"Allow guests on this teamspace?"}),o=(0,d.jsx)(n().sA,{id:"teamSettings.disableGuestsOverride.confirmationDescription",defaultMessage:"By default, guests are not allowed on teamspaces in this workspace."});break;case"disable_public_access":t=(0,d.jsx)(n().sA,{id:"teamSettings.disablePublicPagesOverride.confirmationTitle",defaultMessage:"Allow teamspace pages to be made public?"}),o=(0,d.jsx)(n().sA,{id:"teamSettings.disablePublicPagesOverride.confirmationDescription",defaultMessage:"By default, pages in this workspace cannot be made public."});break;case"disable_export":t=(0,d.jsx)(n().sA,{id:"teamSettings.disableExportOverride.confirmationTitle",defaultMessage:"Allow teamspace pages to be exported?"}),o=(0,d.jsx)(n().sA,{id:"teamSettings.disableExportOverride.confirmationDescription",defaultMessage:"By default, pages in this workspace cannot be exported."});break;case"disable_team_page_edits":return!0;default:(0,i().HB)(e)}return await s().Gh({message:t,description:o,acceptLabel:(0,d.jsx)(n().sA,{id:"teamSettings.workspaceSettingOverride.confirmationButtonLabel",defaultMessage:"Override workspace setting"})}).then((e=>e.accept))}async function S(e){let{environment:t,spaceStore:o,teamName:r}=e;const i=t.currentUser.id;if(!i||!o)return!0;const{teams:a}=await(0,c().qd)({fromCache:!0,environment:t,spaceStore:o,includeArchived:!1,currentUserId:i});return!a.some((e=>{var t;return(null===(t=e.getName())||void 0===t?void 0:t.trim())===r.trim()}))||await s().Gh({message:(0,d.jsx)(n().sA,{id:"teamSettings.confirmDuplicateTeamName.message",defaultMessage:"A teamspace with the same name already exists. Are you sure you want to name this teamspace “{teamName}”?",values:{teamName:r}}),cancelLabel:(0,d.jsx)(n().sA,{id:"teamSettings.confirmDuplicateTeamName.cancelLabel",defaultMessage:"Cancel"})}).then((e=>e.accept))}async function w(){return await s().Gh({message:(0,d.jsx)(n().sA,{id:"teamSettings.setTeamPermissions.ClearCustomTeamPermissionsDialogMessage",defaultMessage:"Raising the permission level for all teamspace members will remove some custom permissions. Are you sure you want to proceed?"}),cancelLabel:(0,d.jsx)(n().sA,{id:"teamSettings.setTeamPermissions.cancelLabel",defaultMessage:"Cancel"})}).then((e=>e.accept))}},214006:(e,t,o)=>{o.d(t,{A:()=>i});o(898992),o(354520),o(581454),o(908872),o(737550);var n=()=>o(630116);class r extends(()=>o(757695))().default{getInitialState(){return{createType:void 0}}getAllSpaceViewStores(e){return e.currentUser.loggedInUserIds.reduce(((t,o)=>[...t,...this.getSpaceViewStores(e,o)]),[])}hasAtLeastOneTeamPlan(e){return this.getAllSpaceViewStores(e).map((e=>{const t=e.getSpaceStore();if(t)return t.getPlanType()})).some((e=>"team"===e))}getSpaceViewStores(e,t){const r=new(n().dZ)(e,{table:o(294712).GD,id:t},{userId:t}).getSpaceViewStores();return o(496603).hS(r,(e=>e.isDefined()&&e.getSpaceId())).filter((t=>Boolean(t.isDefined())&&Boolean(t.getAlive())&&!this.isSpaceDeleted(e,t)))}isSpaceDeleted(e,t){const n=t.getSpaceStore();if(null!=n&&n.isDefined())return!1;const r=t.getSpaceId(),i=o(151059).A.getData(e,{spaceId:r});return(0,o(720665).pN)(i)}isGuestWithZeroSharedPages(e){const t=e.getUserRootParentId(),n=e.getSpaceStore();if(!t||!n)return!1;if(n.canRead())return!1;const r=o(90873).A.getSharedPagesState({spaceId:n.id,userId:t});if(!r||r.loadingDone)return!1;return 0===(r.currentPageIds??[]).length}getUserEmailAddress(e,t){return new(n().LU)(e,{table:o(798880).oo,id:t},{userId:t}).getEmail()}}const i=new r},215087:(e,t,o)=>{o.d(t,{r:()=>n});const n={BRL:{currencyCode:"BRL",minorUnitDigits:2},EUR:{currencyCode:"EUR",minorUnitDigits:2},GBP:{currencyCode:"GBP",minorUnitDigits:2},JPY:{currencyCode:"JPY",minorUnitDigits:0},KRW:{currencyCode:"KRW",minorUnitDigits:0},USD:{currencyCode:"USD",minorUnitDigits:2}}},215152:(e,t,o)=>{o.d(t,{A:()=>i,B:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n,i=n},215206:(e,t,o)=>{o.d(t,{m:()=>s});o(296540);var n=()=>o(56366),r=()=>o(410282),i=()=>o(155004),a=o(474848);function s(e){let{children:t,store:o}=e;const s=(0,n().K8)((()=>{const e=null==o?void 0:o.getRecordStoreUIAncestor(1),t=(0,r().j)(e);return"default_background"===t?void 0:t}),[o]);return(0,a.jsx)(i().s,{allowSelectionWithin:!1,style:l,children:t(s)})}const l={width:"100%"}},216424:(e,t,o)=>{o.d(t,{L:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{type:"closed"}}}const r=new n;(0,o(604341).exposeDebugValue)("automationBuilderModalStore",r)},219058:(e,t,o)=>{o.d(t,{fR:()=>a,tq:()=>i});var n=()=>o(534177);const r=(0,n().uv)({local:"local",staging:"stg",development:"dev",production:"prod"});(0,n().uv)({local:"local",stg:"staging",dev:"development",prod:"production"});function i(e){return"string"==typeof e&&r.includes(e)}const a={local:"localhost:3000",staging:"api-stg.notion.com",development:"api-dev.notion.com",production:"api.notion.com"}},219839:(e,t,o)=>{o.d(t,{n:()=>n});const n=(0,o(296540).createContext)({blockInsetRight:0});n.displayName="BlockRenderingContext"},220738:(e,t,o)=>{o.d(t,{L:()=>p,Q:()=>u});var n=()=>o(919709),r=()=>o(939768),i=()=>o(518888),a=()=>o(383594),s=()=>o(246826),l=()=>o(606952),c=()=>o(317909),d=()=>o(892632);function u(e){const{store:t,file:o,environment:n}=e,r=i().default.getBlockKey(t.id);a().I(),d().QM({environment:n,file:o,bucket:"secure",record:t.pointer,onStart:e=>{i().default.setKeyState(r,{progressPercent:0,file:o,name:e.name,size:e.size})},onProgress:e=>{const t=i().default.getKeyState(r);t&&i().default.setKeyState(r,{...t,progressPercent:e.progressPercent})},onComplete:e=>{const o=i().default.getKeyState(r);o&&c().createAndCommit({userAction:"fileBlockActions.uploadFile",environment:n,canUndo:!0,perform:a=>{p({environment:n,store:t,source:e,name:o.name,size:o.size,transaction:a}),i().default.setKeyState(r,void 0)}})},onError:()=>{i().default.setKeyState(r,void 0)},retryWhenOffline:!0})}function p(e){const{environment:t,store:o,source:i,name:a,size:c,transaction:d}=e;let u;a?u=a:i&&(u=(0,r().Z$)(i)),l().KY({environment:t,store:o.getBlockTitleStore(),value:n().x9d(u),transaction:d}),s().zv({store:o.getPropertiesStore(),data:{source:n().x9d(i),size:n().x9d(c)},transaction:d})}},221424:(e,t,o)=>{o.d(t,{L:()=>n});const n=o(757695).default.createValue({open:!1},{name:"PingSalesModalStore"})},222130:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{}}}const r=new n},222299:(e,t,o)=>{o.d(t,{Oj:()=>E,X6:()=>R,YB:()=>D,Yf:()=>B,bh:()=>M,oT:()=>P});o(16280);var n=()=>o(908006),r=()=>o(700500),i=()=>o(179034),a=()=>o(519831),s=()=>o(869558),l=()=>o(496603),c=()=>o(857783),d=()=>o(519839),u=()=>o(492414),p=()=>o(753199),m=()=>o(594794),g=()=>o(592678),f=()=>o(493260),v=()=>o(129522),h=()=>o(351360),_=()=>o(66496),b=()=>o(630116),y=()=>o(65269),S=()=>o(302022),w=()=>o(292167),k=()=>o(896628),I=()=>o(722101),A=()=>o(246826),x=()=>o(435009),C=()=>o(324089),T=()=>o(317909);function M(e){const{environment:t,store:o,targetStore:n,transaction:r}=e,i=o.getParentBlockStore();if(i){const e=i.getContentStore(),a=w().s({environment:t,parentBlockStore:i,targetStore:n,transaction:r});return I().Br({parentStore:e,oldChildStore:o,newChildStore:a,transaction:r}).childStore}throw new Error("Could not create alias block.")}function P(e){const{environment:t,store:o,collectionStore:l,collectionViewStore:c,transaction:u}=e,{id:p}=t.currentUser,g=o.getRecordStoreUIParent();if(null!=g&&g.valueIs(y()._)){if(!o.isDefined())throw new Error("Block to replace was not defined.");if(g&&p){var h,_;if(g.pointer.spaceId&&o.getSpaceId()&&g.pointer.spaceId!==o.getSpaceId())throw new Error("The parent has a different spaceId than the store.");const e=g.pointer.spaceId||o.getSpaceId(),p=(0,m().Z1)({environment:t,table:i().ev,spaceId:e}),y=null===(h=(0,d().e2)(l))||void 0===h?void 0:h.getFormatStore().getKeyStore("table_properties").getValue(),S=null===(_=(0,d().e2)(l))||void 0===_||null===(_=_.getQueryStore())||void 0===_?void 0:_.getKeyStore("sort").getValue(),w={id:(0,m().Z1)({environment:t,table:s().Gy,spaceId:o.getSpaceId()}),version:0,type:"table",parent_id:p,parent_table:"block",alive:!0,space_id:o.getSpaceId(),format:{table_properties:y,collection_pointer:{table:a().Vl,id:l.id,spaceId:l.pointer.spaceId}},query2:{sort:S}};A().eC({environment:t,table:"collection_view",value:w,inMemoryRecordCache:o.inMemoryRecordCache,transaction:u});const k=A().Wv({environment:t,id:p,type:r().xd.collectionView,spaceId:o.getSpaceId(),inMemoryRecordCache:o.inMemoryRecordCache,transaction:u});A().zv({store:k,data:{view_ids:[w.id]},transaction:u});const x=I().Br({parentStore:g,oldChildStore:o,newChildStore:b().Bv.createChildStore(g,{table:i().ev,id:p}),transaction:u}).childStore;return(0,f().F)(w.id,{viewPointer:null==c?void 0:c.pointer}),n().default.afterNextFlush((()=>{const e=v().K.findBlockFromStoreWithMethod(x,"handleCreated");e&&e.handleCreated()})),x}}}function B(e){const{environment:t,blocks:o,openInNew:n,pageVisitSource:r}=e,i=o[0];if(n){const e=(0,u().Ay)({store:i,pageVisitSource:r,embedded:!1});x().oo({environment:t,url:e,openInNew:n})}else{const e=i.recordStoreUIParentStore instanceof b().Bv&&i.recordStoreUIParentStore.isCollectionView(),{mainEditorCurrentBlockStore:o}=h().default.state;if(e&&o){const e=(0,u().Ay)({store:o,fullyQualified:!1,peekViewBlockId:i.id,pageVisitSource:r});x().oo({environment:t,url:e})}else c().uK({environment:t,store:i,pageVisitSource:r})}}function R(e){const{environment:t,store:o,lock:n}=e,{id:r}=t.currentUser;if(!r)return;const i={block_locked:n,block_locked_by:r};T().createAndCommit({userAction:"pageBlockActions.setPageLock",environment:t,canUndo:!0,perform:e=>{A().zv({store:o.getFormatStore(),data:i,transaction:e})}})}function E(e){const{transaction:t,store:o,coverStore:n,pageCovers:r}=e,i=Object.keys(r),a=r[i[l().yT(0,i.length-1)]],s=a.items[l().yT(0,a.items.length-1)],c=s.coverUrl,d=s.position;A().KY({store:n,value:c,transaction:t}),k().yY({store:o,coverPosition:d,transaction:t})}function D(e,t,o){(0,p().SQ)({event:e,context:p().y$.EditorClick,callback:()=>function(e,t){const o=Boolean(S().A.state.pageMap[e.id])||_().A.state.pages.has(e.id);!e.canEdit()||e.isNonEditableState()||o||(0,g().Zm)()||T().createAndCommit({userAction:"PageViewBlock.handlePlaceholderClick",environment:t,canUndo:!0,perform:o=>{C()._N({environment:t,store:e,transaction:o})}})}(t,o)})}},222917:(e,t,o)=>{o.d(t,{$n:()=>S,WF:()=>w,YR:()=>p,bo:()=>m,fe:()=>h,mG:()=>v,mg:()=>y,o:()=>k,pF:()=>_,rD:()=>g,vl:()=>b,w3:()=>u,wr:()=>I,yN:()=>f});var n=()=>o(116225),r=()=>o(989423),i=()=>o(644914),a=()=>o(430483),s=()=>o(508496),l=()=>o(786601),c=()=>o(899677),d=()=>o(543491);function u(e,t){const o={...t,...(0,i().hX)({environment:e})};r().vd(e,"open_search",o),n().u4({name:"open_search",args:o})}function p(e,t){r().vd(e,"space_invitation_email_clicked",t)}function m(e,t){r().vd(e,"select_search_item",t);const{numKeystrokes:o,timeToSelectMs:n,selectedItemIndex:i,originalPosition:a,context:l,numLocalResults:c,searchSessionId:d,searchSessionFlowNumber:u,numVisibleMembers:p,localSources:m,isMobile:g,timeToRenderResult:f}=t,v=Boolean(!!m&&m.length>0),h=p>1;s().default.logEvent("select_search_item",i,{numKeystrokes:o,timeToSelectMs:n,selectedItemIndex:i,numLocalResults:c,originalItemIndex:a,searchSessionFlowNumber:u,searchSessionId:d,context:l,isMultiplayer:h,isLocalResult:v,isMobile:g,timeToRenderResult:f});const _=1/(i+1);r().vd(e,"quick_find_reciprocal_rank",{reciprocalRank:_,context:l,searchSessionId:d,numLocalResults:c,isMultiplayer:h}),s().default.logEvent("quick_find_reciprocal_rank",_,{context:l,searchSessionId:d,numLocalResults:c,isMultiplayer:h,isLocalResult:v,isMobile:g})}let g=function(e){return e[e.SidePeekPanel=0]="SidePeekPanel",e[e.KeyboardShortcut=1]="KeyboardShortcut",e}({});function f(e,t){r().vd(e,"search_copy_link",t)}function v(e,t){r().vd(e,"abandoned_search",t);const{numKeystrokes:o,timeToAbandonMs:n,numLocalResults:i,numVisibleMembers:a,isMobile:l}=t,c=a>1;s().default.logEvent("abandoned_search",o,{numKeystrokes:o,timeToAbandonMs:n,numLocalResults:i,searchSessionId:t.searchSessionId,isMultiplayer:c,isMobile:l}),r().vd(e,"quick_find_reciprocal_rank",{reciprocalRank:0,searchSessionId:t.searchSessionId,numLocalResults:i,isMultiplayer:c}),s().default.logEvent("quick_find_reciprocal_rank",0,{searchSessionId:t.searchSessionId,numLocalResults:i,isMultiplayer:c,isMobile:l})}function h(e,t){r().vd(e,"search_client_results",t)}function _(e,t){r().vd(e,"search_post_click_page_interaction",t)}function b(e,t){var o;r().vd(e,"search_post_click_page_exit",{dwellTime:(new Date).getTime()-t.timeEntered.getTime()},{forceOverrideAutomaticEventData:{queryId:null===(o=d().A.state)||void 0===o?void 0:o.queryId}})}function y(e,t){const{currentSearchSessionId:o,currentWorkspaceId:n,newWorkspaceId:i}=t;r().vd(e,"search_quick_search_switch_workspace",{current_search_session_id:o,current_workspace_id:n,new_workspace_id:i})}function S(e,t){r().vd(e,"search_open_shortcut_settings_from_command_search_hint",{search_session_id:t.searchSessionId})}function w(e,t){r().vd(e,"search_hover_command_search_hint",{search_session_id:t.searchSessionId})}function k(e,t){r().vd(e,"search_query_has_operators",{operations:t.operations,search_session_id:t.searchSessionId})}function I(){return a().zD.isQuickFindEnabled()?l().A.state.sessionId:c().default.state.sessionId}},224701:(e,t,o)=>{o.d(t,{$D:()=>u,L1:()=>m,M2:()=>d,Ow:()=>p,XO:()=>_,Z:()=>b,dl:()=>f,iw:()=>i,nV:()=>r,qI:()=>g,sC:()=>c,wX:()=>h,xj:()=>s,yU:()=>l,zA:()=>a,zo:()=>v});const n={subscriptionActions:new(o(645873).O2)("subscriptionActions",(()=>Promise.all([o.e(58550),o.e(98497),o.e(65213)]).then(o.bind(o,998497))))},r=S(y("updateSubscription")),i=S(y("trackSubscriptionUpdate")),a=S(y("updatePaymentMethod")),s=S(y("payUnpaidInvoice")),l=S(y("updateAddress")),c=S(y("updateVatId")),d=(S(y("updateBillingEmail")),S(y("cancelSubscription"))),u=S(y("updateCurrentSpace")),p=S(y("refresh")),m=S(y("refreshBillingHistory")),g=S(y("openSubscriptionUpgradeModal")),f=S(y("closeSubscriptionUpgradeModal")),v=S(y("openSubscriptionUpgradeModalForClaimAndUpgrade")),h=S(y("handlePlanChangeClick")),_=S(y("handlePaymentIntentNextActions")),b=(S(y("applyStudentGitHubGrant")),S(y("updateSubscriptionToEducationPlan")));async function y(e){return await n.subscriptionActions.load().then((t=>t[e]))}function S(e){return function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return e.then((e=>e(...o)))}}},229417:(e,t,o)=>{o.d(t,{L:()=>a,y:()=>s});var n=()=>o(227440),r=()=>o(620149);const i=1*o(720665).Xb;function a(){var e;if(n().A.state.online){if(null!==(e=r().A.state.connectionError)&&void 0!==e&&e.startTime){var t;if(Date.now()-(null===(t=r().A.state.connectionError)||void 0===t?void 0:t.startTime)<i)return}return r().A.state.connectionError}}function s(){return Boolean(a())}},230062:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(496506).default)((()=>o(353643).A.state.isDragging||o(861841).Ay.state.isDragging||o(649642).A.state.isDragging||o(93658).default.state.isActive),{debugName:"GlobalIsDraggingStore"})},231722:(e,t,o)=>{o.d(t,{$U:()=>m,An:()=>c,H7:()=>p,KP:()=>s,OH:()=>i,Oj:()=>a,Zq:()=>f,cL:()=>u,kM:()=>l,z_:()=>d});var n=()=>o(792002);function r(e,t){return e.store===t.store&&e.index===t.index}function i(e,t){return!e&&!t||!(!e||!t)&&(r(e.start,t.start)&&r(e.end,t.end))}function a(e){return{start:{...e.start},end:{...e.end}}}function s(e){return!e||e.start.store===e.end.store}function l(e){return s(e)&&e.start.index===e.end.index}function c(e){return 0===e.start.index&&l(e)}function d(e){return l(e)&&(0,n().NG)(e.start.store,{startIndex:e.start.index,endIndex:e.end.index})}function u(e,t){const o=[e.start.store,e.end.store];return o.includes(t.start.store)||o.includes(t.end.store)}function p(e){if(e)return s(e)?{store:e.start.store,selection:{startIndex:e.start.index,endIndex:e.end.index}}:void 0}function m(e){const{store:t,selection:o}=e;if(t&&o)return{start:{store:t,index:o.startIndex},end:{store:t,index:o.endIndex}}}function g(e){return!!(e&&"object"==typeof e&&"store"in e&&"index"in e)}function f(e){if("object"==typeof e&&e&&"start"in e&&"end"in e){const{start:t,end:o}=e;if(g(t)&&g(o))return!0}return!1}},232063:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=o(474848);const s=(0,o(340498).wt)("cornerResize",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{fillRule:"evenodd",strokeWidth:"1.5",d:"M 14 0C 12.8955 0 12 0.895447 12 2L 12 12L 2 12C 0.895508 12 0 12.8954 0 14C 0 15.1046 0.895508 16 2 16L 14 16C 15.1045 16 16 15.1046 16 14L 16 2C 16 0.895447 15.1045 0 14 0Z"})});var l=()=>o(751735),c=()=>o(100622),d=()=>o(891279),u=()=>o(158218),p=()=>o(24611);function m(e){let{store:t,resizerType:o,resizerAlignment:m,resizeComponent:h,preserveScale:_,isHovered:b,blockResizerStore:y}=e;const S=(0,r().v3)(),w=(0,r().Y0)(),k=(0,i().uB)(y,d().A),I=(0,i().K8)((()=>!w.isMobile&&b),[w.isMobile,b]),A=(0,i().K8)((()=>{const e={position:"absolute",pointerEvents:I?"auto":"none",display:"flex",alignItems:"center",justifyContent:"center"};return m===u()._l.Right?e.right=0:m===u()._l.Left&&(e.left=0),o===u().f9.Horizontal?(e.top=0,e.zIndex=1,e.height="100%",e.width=g,e.cursor="col-resize"):o===u().f9.Vertical?(e.bottom=0,e.zIndex=1,e.width="100%",e.height=g,e.cursor="row-resize"):o===u().f9.Corner&&(e.zIndex=2,e.bottom=0,e.width=e.height=v,m===u()._l.Left?e.cursor="nesw-resize":m===u()._l.Right&&(e.cursor="nwse-resize")),e}),[m,o,I]),x=(0,n.useMemo)((()=>{const e={position:"absolute"};return o===u().f9.Vertical||o===u().f9.Corner?e.bottom=f:o===u().f9.Horizontal&&(e.top=f),m===u()._l.Left?e.left=f:m===u()._l.Right&&(e.right=f),{...A,style:e}}),[m,A,o]),C=(0,i().K8)((()=>{const{ThemeStore:e}=S,t=e.state.mode,n={opacity:I?1:0,transition:p().Wh,borderRadius:20,background:(0,l().X4)(c().CM[t].black,.6),border:`1px solid ${c().Ay.whiteWithAlpha(.9)}`};return o===u().f9.Horizontal?(n.width=6,n.height=48,n.maxHeight="50%"):o===u().f9.Vertical&&(n.height=6,n.width=48,n.maxWidth="50%"),n}),[S,o,I]),T=(0,n.useMemo)((()=>o===u().f9.Corner?s({stroke:c().Ay.whiteWithAlpha(.5),fill:c().Ay.blackWithAlpha(.65),width:v,height:v,transition:`opacity ${p().Wh}`,opacity:I?1:0,position:"relative",bottom:3,left:m===u()._l.Left?3:-3,transform:m===u()._l.Left?"rotate(90deg)":"none"}):(0,a.jsx)("div",{style:C})),[m,C,o,I]),M=(0,n.useMemo)((()=>({getNode:()=>h.current})),[h]);return(0,a.jsx)(u().Ay,{store:t,preserveScale:_,resizerType:o,resizerAlignment:m,resizeComponent:M,blockResizerStore:k,resizeHorizontally:!0,resizeVertically:!0,disabled:!1,children:(0,a.jsx)("div",{style:x,children:T})})}const g=15,f=0,v=20},233996:(e,t,o)=>{o.d(t,{w:()=>w});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(187015),r=()=>o(677338),i=()=>o(496603),a=()=>o(498212),s=()=>o(939768),l=()=>o(780054),c=()=>o(607859),d=()=>o(524450),u=()=>o(227440),p=()=>o(559378),m=(o(898992),o(354520),o(672577),()=>o(292930)),g=()=>o(209199),f=()=>o(534177);const v="v2";function h(e){let t=[];if(e.length>0){if(t=e.filter((e=>{let{code:t}=e;return(0,g().wo)(t)})),0===t.length)return"en-US";const o=t[0].quality,n=t.filter((e=>{let{quality:t}=e;return t===o}));let r=n.find((e=>"en"===e.code));return r||(r=n[0]),function(e){let t=(0,f().O)(g().fk,e.code)?g().fk[e.code]:g().fk.en;return"es"===e.code?t="ES"===e.region?"es-ES":"es-LA":"zh"===e.code&&(t="TW"===e.region||"HK"===e.region?"zh-TW":"zh-CN"),t}(r)}return"en-US"}function _(e){const t=function(e){return h(m().parse(e))}(e);return`${v}/${t}`}var b=()=>o(508496);function y(){return b().default.getAcceptLanguageHeader()}var S=()=>o(268405);async function w(e){var t,o,m,g;const{device:f}=e,v="currentUser"in e,h=v?e.RouterStore:void 0,b=null==h||null===(t=h.getState())||void 0===t||null===(t=t.route)||void 0===t?void 0:t.name,w=v?e.WindowSizeStore:void 0,k=null==w?void 0:w.state.width,A=null==w?void 0:w.state.height,x=!!v&&function(e){const t=function(e){var t;return(null==e||null===(t=e.currentUser)||void 0===t?void 0:t.id)||e.publicDomainUserId}(e);return Boolean(t)}(e),C=await(0,S().T)(e),{pathname:T,...M}=(0,s().iW)(null===(o=document.location)||void 0===o?void 0:o.href,(0,r().JU)())||{},P={app_version:f.version,desktop_app_version:f.desktopAppVersion,mobile_app_version:f.mobileAppVersion,is_desktop_app_or_browser:!f.isMobile,is_desktop:f.isElectron,is_mobile:f.isMobile,is_tablet:f.isTablet,is_react_native:f.isMobileNative,is_ios:f.isIOS,is_logged_in:x,deviceType:f.os,device_type:f.deviceType,device_os:f.os,platform:f.platform,browser:f.browserName,browser_version:f.browserVersion,browser_version_bucketized:I(f.browserVersion,f.browserName),dnt:f.doNotTrackEnabled,device_id:C&&(0,a().ot)(C),tags:(0,r().sY)(),host:null===(m=document.location)||void 0===m?void 0:m.host,route_name:b,notion_top_level_domain:(0,n().z)(null===(g=document.location)||void 0===g?void 0:g.hostname),referrer:document.referrer||"none",accept_language_raw:y(),accept_language_preference:_(y()||""),...M,windowWidth:k,windowHeight:A,isActive:d().A.state.active,is_foreground:document.hasFocus(),fired_during_onboarding:c().default.state.isOnboarding,is_experimental_build:"clientExperimental"===l().A.buildTarget,is_demo:p().A.state.isActive,is_online:u().A.state.online};return{...i().z7(P,i().b0),appSource:"client"}}const k=new Set(["Safari","Mobile Safari"]);function I(e,t){const o=e.split(".");return k.has(t)?o.slice(0,2).join("."):o[0]}},235116:(e,t,o)=>{o.d(t,{I5:()=>v,KE:()=>f,OG:()=>_});var n=()=>o(522419),r=()=>o(825237),i=()=>o(857639),a=()=>o(711059),s=()=>o(763824),l=()=>o(780054),c=()=>o(437219),d=()=>o(518646),u=()=>o(705540),p=()=>o(755636);function m(e){if(!Boolean(e.mobileNative))return!1;const{device:t}=e,o=(0,a().parseMobileAppVersion)(t.mobileAppVersion,t.isAndroid);return!!o&&(t.isIOS?(0,a().isGreaterThanOrEqualToVersion)(o,[0,4,669]):!!t.isAndroid&&(0,a().isGreaterThanOrEqualToVersion)(o,[0,6,735]))}async function g(e,t){return e.device.isElectron||e.device.isMobileNative?await(0,d().k)(e,t,!1):(0,r().Ws)({...t,baseURL:l().A.domainBaseUrl,currentUserId:e.currentUser&&e.currentUser.id})}async function f(e,t){let o=t.url;const a=e.mobileNative&&m(e),l=n()._J(t.url);l&&(a&&e.mobileNative.showLightBoxV2({url:void 0,downloadName:t.downloadName,type:"file",from:"download",state:"fetching"}),o=(await s().nQ(r().Eq,g(e,t))).result),o?l&&a?e.mobileNative.showLightBoxV2({url:o,downloadName:t.downloadName,type:"file",from:"download",state:"url_ready"}):l?h({environment:e,url:o}):p().f({environment:e,url:o}):(a&&e.mobileNative.showLightBoxV2({url:void 0,downloadName:t.downloadName,type:"file",from:"download",state:"error"}),i().log({level:"error",from:"routerActions",type:"openFileUrl",data:{message:`failed to get url for ${t.url}`}}))}function v(e,t){const o=e.mobileNative&&m(e);if(n().T8(t)&&o){const o=n().SB({title:void 0,source:t});e.mobileNative.showLightBoxV2({url:void 0,downloadName:o,type:"file",from:"download",state:"fetching"}),e.mobileNative.showLightBoxV2({url:t,downloadName:o,type:"file",from:"download",state:"url_ready"})}else h({environment:e,url:t})}function h(e){const{environment:t,url:o}=e;t.mobileNative?t.mobileNative.openInAppBrowser(o):t.device.isElectron?u().downloadUrl(o):window.location.href=o}async function _(e,t){c().v0(e,{from:"embedded_block_click",type:t.type});let o=t.url;const a=e.mobileNative&&m(e),l=n()._J(t.url);var d;if(l&&(a&&e.mobileNative.showLightBoxV2({url:void 0,downloadName:t.downloadName,type:t.type,from:t.from,state:"fetching"}),o=(await s().nQ(r().Eq,g(e,t))).result),o)return l&&a?e.mobileNative.showLightBoxV2({url:o,downloadName:t.downloadName,type:t.type,from:t.from,state:"url_ready"}):p().f({environment:e,url:o}),void(null===(d=t.callback)||void 0===d||d.call(t));a&&e.mobileNative.showLightBoxV2({url:void 0,downloadName:t.downloadName,type:t.type,from:t.from,state:"error"}),i().log({level:"error",from:"routerActions",type:"openFileUrl",data:{message:`failed to get url for ${t.url}`}})}},235191:(e,t,o)=>{o.d(t,{Z7:()=>V,UM:()=>B,IL:()=>P,BJ:()=>O,PF:()=>U,H_:()=>F,qV:()=>E,a5:()=>L,yC:()=>N,YO:()=>D,Hj:()=>R});o(944114),o(898992),o(672577);var n=()=>o(687871),r=()=>o(970013),i=()=>o(407730),a=()=>o(651124),s=()=>o(390066),l=()=>o(519831),c=()=>o(931075),d=()=>o(496603),u=()=>o(183558),p=()=>o(534177),m=()=>o(254497),g=()=>o(312296),f=()=>o(519839),v=()=>o(682146),h=()=>o(972435),_=()=>o(470928),b=()=>o(395963),y=()=>o(508496),S=()=>o(630116),w=()=>o(908447),k=()=>o(989423);var I=()=>o(686526),A=()=>o(36629),x=()=>o(334261),C=()=>o(896628),T=()=>o(317909),M=()=>o(67103);function P(e){const{environment:t,collectionViewArgs:o,collectionStore:a,propertyName:s,propertyType:l,selectOptions:d,transaction:m,propertyId:f,propertySchema:S,propertyGroupId:w}=e,k={},I=a.getSchema(),A=Object.keys(I),x=(0,i().A)(s??v().dC[l],(e=>!A.find((t=>{const o=I[t];return Boolean(o&&o.name===e)}))));let T;if(S&&S.type===l)T=S;else{const e=(0,v().hn)();if((0,r().hN)(l))switch(l){case"ai_custom_prompt":T={name:x,type:"text",ai_inference:{type:"custom",prompt:"",auto_update_on_edit:e}};break;case"ai_summary":T={name:x,type:"text",ai_inference:{type:"summarize",auto_update_on_edit:e}};break;case"ai_extract":T={name:x,type:"text",ai_inference:{type:"extract",prompt:"",auto_update_on_edit:e}};break;case"ai_translate":T={name:x,type:"text",ai_inference:{type:"translate",targetProperties:["title"],toLanguage:"english",auto_update_on_edit:e}};break;case"ai_keywords":T={name:x,type:"multi_select",select_ai_inference:{type:"multi_select",add_options:!0,auto_update_on_edit:!1}};break;default:(0,p().HB)(l)}else T=!d||"select"!==l&&"multi_select"!==l?{name:x,type:l}:{name:x,type:l,options:d}}const P=a.isPageTreeCollection()&&Boolean(I[n().Z.Owner]),B=y().default.checkGate({gateName:"new_verification_property_id"});let R=f;R||(R=!r().M1(T)||P&&!B?(0,u().Ay)():c()._e.Verification),k[R]=T;if(!((0,_().Io)()&&!a.isPageTreeCollection())&&r().M1(T)){const e=P?n().Z.Owner:c()._e.Owner;A.includes(e)||(k[e]={name:h().A.formatMessage(M().Gl.ownerPropertyName),type:"person",default:"created_by"}),T.verifier_property=e}if(w&&(0,b().En)({collectionStore:a,groupId:w,propertyId:R,transaction:m}),o){const{format:e,formatKey:t,collectionViewStore:n}=o,r=[...e[t]||[],{property:R,visible:!0}];C().zA({stores:[n],update:{[t]:r},transaction:m})}return(0,g().F)({environment:t,collectionStore:a,update:k,transaction:m}),R}function B(e){const{environment:t,collectionStore:o,transaction:n,propertiesToBeAdded:r,collectionViewArgs:i,rootPropertyId:a}=e,s={},l=[];for(const c of r){const e={name:c.name,type:"rollup",relation_property:a,target_property:` ${c.id}`,target_property_type:c.type},t=(0,u().Ay)();s[t]=e,l.push(t)}if(i){const{format:e,formatKey:t,collectionViewStore:o}=i,r=[...e[t]||[],...l.map((e=>({property:e,visible:!0})))];C().zA({stores:[o],update:{[t]:r},transaction:n})}(0,g().F)({environment:t,collectionStore:o,update:s,transaction:n})}function R(e){const{environment:t,collectionStore:o,property:n,type:i,transaction:a}=e,s=o.getSchema()[n];if(!s||s.type===i)return;const l={...s};l.type=(0,r().v2)(i),(0,g().F)({environment:t,collectionStore:o,update:{[n]:l},transaction:a})}function E(e){const{collectionStore:t,property:o,autoRelate:n,transaction:r}=e;t.getSchema()[o]&&T().applyOperation({store:t,operation:{pointer:t.pointer,path:["schema",o,"autoRelate"],command:"set",args:n},transaction:r})}function D(e){const{collectionStore:t,property:o,name:n,transaction:r}=e;t.getSchema()[o]&&T().applyOperation({store:t,operation:{pointer:t.pointer,path:["schema",o,"name"],command:"set",args:n},transaction:r})}function N(e){const{collectionStore:t,property:o,icon:n,transaction:r}=e;t.getSchema()[o]&&T().applyOperation({store:t,operation:{pointer:t.pointer,path:["schema",o,"icon"],command:"set",args:n},transaction:r})}function L(e){const{formatStore:t,formatKey:o,property:n,update:r,transaction:i}=e,a=[...t.getFormat()[o]||[]],s=a.findIndex((e=>e.property===n));-1!==s?a[s]={...a[s],...r}:a.push({property:n,...r}),C().zA({stores:t instanceof S().Bv||t instanceof S().md||t instanceof S().pS?[t]:(0,p().HB)(t),update:{[o]:a},transaction:i})}function F(e){const{propertyGroupId:t,collectionContextStore:o,collectionStore:n,environment:i,isInPeekRenderer:l,onCloseMenu:c,pagePropertiesStore:d,propertyVisibility:u}=e,p=o.settingsStore;I().a2({collectionSettingsStore:p,item:{type:"propertyType",propertyGroupId:t,onAccept:(e,m,g,f)=>{if("relation"===e)return void I().a2({collectionSettingsStore:p,item:{type:"selectRelationSource",property:void 0,formatKey:"collection_page_properties",propertyGroupId:t}});const{performResult:v}=T().createAndCommit({userAction:"PageProperties.handleAddPropertyClick",environment:i,canUndo:!0,perform:t=>P({environment:i,collectionStore:n,collectionViewArgs:void 0,propertyType:e,propertyName:g,selectOptions:f,transaction:t})});(t||u)&&T().createAndCommit({userAction:"PageProperties.handleAddPropertyClick.addPropertyToGroupAndUpdateVisibility",environment:i,canUndo:!0,perform:e=>{t&&(0,b().En)({collectionStore:n,groupId:t,propertyId:v,transaction:e}),u&&x().D7({property:v,visibility:u,format:(0,s().L)(n.getFormat(),n.getSchema(),void 0,a().jf.Collection),store:n,transaction:e})}}),null==c||c(v),I().dP({collectionSettingsStore:p,item:{type:"property",formatKey:"collection_page_properties",property:v,selectNameInitial:!i.device.isMobile}}),d.setState({...d.state,openProperty:{property:v,isInPeekRenderer:l},forceShowProperties:!0}),(0,r().hN)(e)&&A().pG({propertyType:e,propertyId:v,collectionContextStore:o}),(0,w().Z)({environment:i,collectionContextStore:o,from:"page_properties",property_type:(0,r().v2)(e),property:(0,r().hN)(e)?e:void 0,is_suggested_property:m})}}})}async function U(e){const{environment:t,collectionStore:o,schema:n,property:i,transaction:a}=e,s=n[i];if(s)if("relation"===s.type&&r().zO(s)&&s.property&&r().zO(s)!==o.id){const e=new(S().md)(t,r().Nv(s));await e.load(),O({environment:t,collectionStore:o,schema:n,property:i,transaction:a,targetCollectionStore:e})}else O({environment:t,collectionStore:o,schema:n,property:i,transaction:a})}function O(e){const{environment:t,collectionStore:o,schema:n,property:r,transaction:i,targetCollectionStore:a,permanentlyDelete:s}=e;if(!o.isDefined())return;const c=Boolean(s),u=f().Cq({environment:t,collectionId:o.id,schema:n,property:r,targetCollectionStore:a,omitNewSchema:!0});if(!u)return;(0,b().it)({collectionStore:o,propertyId:r,transaction:i}),c||(0,m().E)({collectionStore:o,update:u.deletedSchema,transaction:i});let p=d().mg(u.deletedSchema);for(const l in p)p[l]=null;if((0,g().F)({environment:t,collectionStore:o,update:p,transaction:i}),u.otherCollectionId&&u.otherCollectionSchema){c||(0,m().E)({collectionStore:S().md.createChildStore(o,{table:l().Vl,id:u.otherCollectionId}),update:u.otherCollectionDeletedSchema||{},transaction:i}),p=d().mg(u.otherCollectionDeletedSchema||{});for(const e in p)p[e]=null;(0,g().F)({environment:t,collectionStore:S().md.createChildStore(o,{table:l().Vl,id:u.otherCollectionId}),update:p||{},transaction:i})}const v=n[r];("auto_increment_id"===(null==v?void 0:v.type)||c)&&(0,m().E)({collectionStore:o,update:{[r]:null},transaction:i})}function V(e){let{visibility:t,property:o,schema:n,collectionStore:r,format:i,environment:a,transaction:s}=e;const l=i.collection_page_sections?d().mg(i.collection_page_sections):[];if(!n[o])return;const c=l.findIndex((e=>e.section===o));-1!==c?l[c]={section:o,visibility:t}:l.push({section:o,visibility:t}),l&&(T().createAndCommitOrAppend({userAction:"PagePropertiesRowName.handleShowAsClick",environment:a,canUndo:!0,transaction:s,perform:e=>{x().LK({environment:a,pageSectionFormats:l,store:r,transaction:e})}}),function(e,t){k().vd(e,"relation_show_as",t)}(a,{from:"relation_section",mode:"inline"===t?"page_section":"minimal"===t?"minimal_page_section":"property"}))}},235195:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{connectorTriggeringUpsell:void 0,upsellTriggeredAt:void 0,appsConnectionData:[]}}updateAppsConnectionData(e){this.setState({...this.state,appsConnectionData:e})}}const r=new n;(0,o(604341).exposeDebugValue)("aiConnectorsStore",r);const i=r},235280:(e,t,o)=>{o.d(t,{n:()=>p,q:()=>m});var n=()=>o(763824),r=()=>o(283699),i=(o(16280),()=>o(496603));let a,s,l=!1;function c(){return l}async function d(e){if(l)return;const t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://decagon.ai/loaders/notion.js",t.id="decagon-widget-embed-script";const o=document.getElementsByTagName("script")[0];return null==o||o.parentNode.insertBefore(t,o),new Promise((o=>{t.addEventListener("load",(async t=>{if((0,i().gD)(window.duet))throw new Error("Decagon script not loaded");l=!0,window.duet.setMetadata(e.initArgs),window.duet.setUserId(e.initArgs.userId),await window.duet.hide(),await window.duet.close(),o()}))}))}async function u(e,t,o){if(a)return a;e.planType=t,e.isSalesAssistedPlan=o;const i=(0,n().yX)();a=i.promise,await async function(e){if(!(await r().nQ({service:"zendesk",cookieService:e.cookieService})))return;const t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://solve-widget.forethought.ai/embed.js",t.id="forethought-widget-embed-script",t.setAttribute("data-api-key","c895ee24-2c6c-4ed6-a100-3037e65cadda"),e.initialQuery&&t.setAttribute("initial-query",e.initialQuery);if(t.setAttribute("data-ft-full-name",e.fullName||"Forethought Deflected"),t.setAttribute("data-ft-email",e.email||"forethought@makenotion.com"),e.locale){var o;const n=null===(o=e.locale.split("-")[0])||void 0===o?void 0:o.toLowerCase();n&&t.setAttribute("data-ft-embed-script-language",n)}const n=e.planType||"undefined";"enterprise"===n&&e.isSalesAssistedPlan?(t.setAttribute("data-ft-plan-type","enterprise_free"),t.setAttribute("data-ft-workflow-tag","enterprise_free"),e.initialQuery||t.setAttribute("initial-intent-id","d5cb32d0-3637-4e8e-87fa-c4ea8d79d45f")):(t.setAttribute("data-ft-plan-type",n),t.setAttribute("data-ft-workflow-tag",n));const i=document.getElementsByTagName("script")[0];return null==i||i.parentNode.insertBefore(t,i),window.addEventListener("message",(e=>{var t,o;"forethoughtWidgetClosed"===(null==e||null===(t=e.data)||void 0===t?void 0:t.event)&&(null===(o=Forethought)||void 0===o||o("widget","hide"))})),new Promise((e=>{t.addEventListener("load",(()=>{var t;null===(t=Forethought)||void 0===t||t("widget","hide"),e()}))}))}(e),i.resolve()}async function p(e){if(s)return s;const t=(0,n().yX)();s=t.promise;try{if("forethought"===e.type&&await u({...e.forethoughtInitializeArgs,initialQuery:e.initialQuery},e.userHighestPlanType,e.isSalesAssistedPlan),"decagon"===e.type){!c()&&!!e.decagonInitializeArgs&&await d({initArgs:e.decagonInitializeArgs})}await async function(e){const{locale:t,cookieService:o}=e;if(!(await r().nQ({service:"zendesk",cookieService:o})))return;const n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://static.zdassets.com/ekr/snippet.js?key=b9ad856d-6b98-4cf5-a2f6-d96e50557722",n.id="ze-snippet";const i=document.getElementsByTagName("script")[0];return null==i||i.parentNode.insertBefore(n,i),new Promise((e=>{n.addEventListener("load",(()=>{const o=window.zE;o&&(o("webWidget","setLocale",t),o("webWidget","hide"),e())}))}))}(e)}catch(o){e.onError&&e.onError(o)}finally{t.resolve()}}async function m(e){if(await p(e),"undefined"!=typeof Forethought)Forethought("widget","show"),Forethought("widget","open");else if(c())e.initialQuery&&window.duet.setInitialUserMessage(e.initialQuery),await window.duet.open();else{let e=window.zE;if(!e)return;e("webWidget","show"),e("webWidget","open"),e("webWidget:on","close",(function(t){e=window.zE,e&&e("webWidget","hide")}))}}},235921:(e,t,o)=>{o.d(t,{A:()=>l,l:()=>r});var n=()=>o(867899);const r="contextualizedOnboardingStateKeyV2";function i(e,t){if("undefined"===e.flowName||e.isInvalidRedirect)return;const{onboardingData:n,password:i,...a}=e;o(763884).A.set({userId:t,key:r,value:a})}class a extends(()=>o(757695))().default{setState(e){var t;super.setState(e);const n=null===(t=o(351360).default.state.currentUserStore)||void 0===t?void 0:t.id;n&&i(e,n)}getInitialState(){return{flowId:o(206267).JW(),flowName:"undefined",currentStageIndex:0,isFirstTimeOnboarding:void 0,joinableSpaces:[],isPasswordRequired:!0}}async goToNextStage(e){const t=await n().F.contextualizedOnboardingHelpers.load(),o=await n().F.contextualizedOnboardingStageHelpers.load();let r=this.state.currentStageIndex+1;const i=t.getStages({flowName:this.state.flowName,environment:e});for(;r<=i.length-1&&await o.shouldSkipCurrentStage({flowName:this.state.flowName,stageIndex:r,environment:e});)r++;if(r<=i.length-1)this.setState({...this.state,currentStageIndex:r});else{if("undefined"===this.state.flowName)return;await this.completeOnboarding(e,"create")}}async goToPreviousStage(e){const t=await n().F.contextualizedOnboardingStageHelpers.load(),o=await t.getPreviousStageIndex({flowName:this.state.flowName,stageIndex:this.state.currentStageIndex,environment:e});o>=0&&this.setState({...this.state,currentStageIndex:o})}async completeOnboarding(e,t){const{onboardingFlowNameToFlowConfig:o}=await n().F.contextualizedOnboardingFlowDefinitions.load(),{defaultOnboardingComplete:r,clearAllOnboardingStates:i}=await n().F.contextualizedOnboardingActions.load(),a=o[this.state.flowName];a.onCompleteFlow?await a.onCompleteFlow(e,this.state,t):await r(e,t),i(e)}}const s=new a;(0,o(604341).exposeDebugValue)("contextualizedOnboardingStore",s);const l=s},236030:(e,t,o)=>{o.d(t,{Fh:()=>l,NH:()=>u,PN:()=>d,S8:()=>a,gK:()=>p,hj:()=>c,n1:()=>i,sH:()=>r,tG:()=>s,tz:()=>n});const n=8,r=34,i=42,a=14,s=32,l=s,c=-16,d=400,u="calc(66.66vh - 174px)",p="calc(66.66vh - 50px)"},236262:(e,t,o)=>{o.d(t,{I:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M8.806 8.505a.55.55 0 0 0-1.1 0v5.979a.55.55 0 1 0 1.1 0zm3.488 0a.55.55 0 0 0-1.1 0v5.979a.55.55 0 1 0 1.1 0z"}),(0,n.jsx)("path",{d:"M6.386 3.925v1.464H3.523a.625.625 0 1 0 0 1.25h.897l.393 8.646A2.425 2.425 0 0 0 7.236 17.6h5.528a2.425 2.425 0 0 0 2.422-2.315l.393-8.646h.898a.625.625 0 1 0 0-1.25h-2.863V3.925c0-.842-.683-1.525-1.525-1.525H7.91c-.842 0-1.524.683-1.524 1.525M7.91 3.65h4.18c.15 0 .274.123.274.275v1.464H7.636V3.925c0-.152.123-.275.274-.275m-.9 2.99h7.318l-.39 8.588a1.175 1.175 0 0 1-1.174 1.122H7.236a1.175 1.175 0 0 1-1.174-1.122l-.39-8.589z"})]})},i=(0,o(340498).wt)("trash",r)},239666:(e,t,o)=>{o.d(t,{W:()=>n});const n={type:"everything",dateRangeFilter:{startDate:void 0,endDate:void 0},createdByFilter:[],titleOnlyFilter:!1,ancestorsFilter:[],teamspacesFilter:[]}},243020:(e,t,o)=>{o.d(t,{d:()=>n});let n=function(e){return e.NotSpecified="NotSpecified",e.CreatorProfile="CreatorProfile",e.SpaceSwitcher="SpaceSwitcher",e.DeleteAccount="DeleteAccount",e.NoAvailableSpaces="NoAvailableSpaces",e.MobileNativeListener="MobileNativeListener",e.LogoutRouteVisited="LogoutRouteVisisted",e.AdminActionSelfLogout="AdminActionSelfLogout",e.AdminLogoutFallThrough="AdminActionFallThrough",e.PublicPageAccessDenied="PublicPageAccessDenied",e.PageAccessDenied="PageAccessDenied",e.OnboardingError="OnboardingError",e.OnboardingExit="OnboardingExit",e.ContextualizedOnboardingExit="ContextualizedOnboardingExit",e.WorkspaceNotAllowed="WorkspaceNotAllowed",e}({})},244309:(e,t,o)=>{o.d(t,{v:()=>r});var n=()=>o(534177);function r(e,t){const{notificationId:o,activityId:r,sessionId:i,from:a,alreadyRead:s}=t,l=function(e){const{alreadyRead:t,from:o}=e;switch(o){case"mark_as_unread":return t?"unread":"no_change";case"read_on_page":case"email":case"mark_as_read":case"add_reaction":case"remove_reaction":case"title":case"body":case"frame":case"archive":case"unarchive":case"open_reply_menu":case"mark_all_as_read":case"open_automation_view_all_notifications_menu":case"open_automation_view_error_raised_notification":case"main":case"approve_request_access":case"deny_request_access":return t?"no_change":"read";default:return(0,n().HB)(o)}}({alreadyRead:s,from:a});if("no_change"===l)return;const c={notificationId:o,activityId:r,sessionId:i,from:a,target:l};e.DO_NOT_USE_commonTrackEvent({eventName:"mark_notification_as_read",properties:c})}},244471:(e,t,o)=>{o.d(t,{A:()=>L});o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(852507),a=()=>o(56366),s=()=>o(401497),l=()=>o(522419),c=()=>o(100622),d=()=>o(496603),u=()=>o(778417),p=()=>o(645873);const m=new(p().O2)("react-pdf",(async()=>{const[e]=await Promise.all([Promise.all([o.e(26346),o.e(65129)]).then(o.bind(o,626346)),Promise.all([o.e(26346),o.e(65129)]).then(o.bind(o,951439))]);return e}));var g=()=>o(109488);o(16280),o(814603),o(147566),o(198721);function f(e,t){return{...e,variantOptions:t.opts&&function(e){const t=new URLSearchParams;for(const[o,n]of Object.entries(e))n&&t.append(o,n.toString());return t}(t.opts),variantMode:t.mode}}var v=()=>o(780054);function h(e,t){return function(e,t,o){const n="s3"===t.mode?`${t.bucket}/${t.key}`:t.url;return f({baseUrl:e,sourceMode:t.mode,sourceLocation:n,searchParams:void 0},o)}(v().A.imageProxy.baseUrl,e,t)}function _(e,t){return`${(o=h(e,t)).baseUrl}${[o.sourceMode,o.sourceLocation,o.variantMode].map(encodeURIComponent).concat(void 0!==o.variantOptions?[o.variantOptions.toString()]:[]).join("/")}${o.searchParams?`?${o.searchParams}`:""}`;var o}var b=()=>o(553965),y=()=>o(836251),S=()=>o(756279),w=()=>o(661179),k=()=>o(227440),I=()=>o(331542),A=()=>o(2143),x=()=>o(228927),C=()=>o(150180),T=o(474848);const M={position:"absolute",top:"calc(50% - 9px)",left:"calc(50% - 9px)"},P=200,B=8,R=16,E={PASSWORD_REQUIRED:1,INVALID_PASSWORD:2};function D(e){const{value:t}=(0,p().fJ)(m),o=(0,r().v3)(),{device:f}=o,[v,h]=(0,n.useState)(null),[_,D]=(0,n.useState)({ready:!1,pages:0,showPages:0}),[N,L]=(0,n.useState)(e.width),{showPages:F,pages:U}=_,O=(0,s().IS)((()=>({scroller:{position:"relative",height:e.height,maxHeight:f.isMobile?"75vh":void 0,background:c().Ay.uiExtraLightGray,paddingTop:B,paddingBottom:B,paddingLeft:R,paddingRight:R,overflow:"visible"},lockIcon:{width:18,height:18,paddingRight:4},passwordContainer:{minWidth:80}})),[f.isMobile,e.height]);function V(){u().IU({environment:o})}(0,n.useEffect)((()=>{const t=setTimeout((()=>{L(e.width)}),1e3);return()=>clearTimeout(t)}),[e.width]);const j=(0,a().K8)((()=>Math.min(window.innerWidth,N)-2*R-w().A.state),[N]);function z(e,t){const o=parseInt(t,10);if(o===E.INVALID_PASSWORD){e(prompt("Invalid password. Please try again.")??"")}else h({status:"required",onPassword:e,reason:o})}function q(){if(!v)return;const e=prompt("Enter the password to open this PDF file.");v.onPassword(e??"")}function H(e){e&&e._pdfInfo&&(D({..._,pages:e._pdfInfo.numPages,showPages:1}),h(null))}function W(){D({..._,ready:!0})}function K(e){e<P&&_.ready&&F<U&&D({..._,ready:!1,showPages:F+1})}const{source:G}=e,$=(0,a().K8)((()=>(0,l().T8)(G)&&!(0,y().w6)(o)),[G,o]),[Y,Q]=(0,n.useState)(!1);(0,i().w)((()=>{k().A.state.online||Q(!0)}));const Z=(0,n.useMemo)((()=>Y?{type:"offline"}:Boolean(v)?{type:"document_locked"}:void 0),[Y,v]);if(!t)return null;const{Document:X,Page:J}=t;return(0,T.jsx)(g().A,{capture:!0,render:e=>(0,T.jsxs)(A().H,{type:S().A.All,style:O.scroller,...(0,b().A)(e,{onMouseDown:V}),children:[Z&&(0,T.jsx)("div",{style:O.passwordContainer,children:(0,T.jsx)(C().Ay,{family:"pdf",error:Z,onClickLink:q})}),G&&(0,T.jsx)(X,{file:G,loading:Z?(0,T.jsx)("div",{}):(0,T.jsx)(I().A,{legacySize:18,style:M}),onPassword:z,onLoadSuccess:H,options:{cMapUrl:"/notion-assets/cmaps/",cMapPacked:!0,withCredentials:$,isEvalSupported:!1},children:d().y1(_.showPages).map((e=>(0,T.jsx)(J,{pageNumber:e+1,width:j,loading:"",renderAnnotationLayer:!1,renderInteractiveForms:!1,onRenderSuccess:W},e+1)))}),(0,T.jsx)(x().A,{onChange:K})]})})}function N(e){const{contentWrapStyle:t,width:n,height:i,blockLocation:a,source:s}=e,c=e.store.pointer,d=(0,r().v3)(),[{value:u}]=(0,o(187174).Yb)((async()=>{if(await o(589994).transactionQueue.awaitRecordTransaction(c),(0,l()._J)(s)){const e=d.device;return await(0,o(518646).k)(d,{url:s,permissionRecord:c,useS3Url:e.isIOS&&e.isMobileNative},Boolean(o(948914).A.state.isNotionProtocolBugFixed))}return _({mode:"ext",url:s},{mode:"raw",opts:void 0})}),[d,c,s]);return(0,T.jsx)("div",{style:t,children:(0,T.jsx)(D,{source:u,width:n||500,height:i||(o(675074).Ox(a)?240:500)})})}const L={render:e=>(0,T.jsx)(N,{...e}),embedGhost:!0,resizable:!0}},245128:(e,t,o)=>{o.d(t,{A:()=>n});const n=function(e){const{spaceViewStore:t,pageId:o}=e;return!(!t||!o)&&-1!==t.getBookmarkedPageIds().indexOf(o)}},245241:(e,t,o)=>{o.d(t,{$8:()=>M,Iy:()=>p,N2:()=>c,Ni:()=>I,Nz:()=>x,Vz:()=>l,_x:()=>P,fg:()=>s,gG:()=>k,jp:()=>A,m2:()=>u,vm:()=>d,yq:()=>C});var n=()=>o(638681);const r=n().object({required:{type:n().literal("date"),start_date:n().string()},optional:{}}),i=n().union([n().object({required:{starting:r,ending:n().isUndefined()},optional:{}}),n().object({required:{starting:n().isUndefined(),ending:r},optional:{}}),n().object({required:{starting:r,ending:r},optional:{}}),n().object({required:{starting:n().isUndefined(),ending:n().isUndefined()},optional:{}})]),a=n().union([n().array(n().string()),n().object({required:{teamIds:n().array(n().string()),includeSpaceRecords:n().boolean()},optional:{}})]);function s(e){if(e)return Array.isArray(e)?e:e.teamIds?e.teamIds:void 0}n().object({required:{id:n().string(),type:n().union([n().literal("user"),n().literal("permission_group")])},optional:{}});let l=function(e){return e.CollectionsInSpace="CollectionsInSpace",e.BlocksInSpace="BlocksInSpace",e.BlocksInAncestor="BlocksInAncestor",e.BlocksInParent="BlocksInParent",e.BlocksInCollection="BlocksInCollection",e}({});n().object({required:{ancestors:n().array(n().string()),createdBy:n().array(n().string()),editedBy:n().array(n().string()),lastEditedTime:i,createdTime:i},optional:{requireEditPermissions:n().boolean(),isDeletedOnly:n().boolean(),excludeTemplates:n().boolean(),verificationOwners:n().array(n().string()),isAdminModeDeletedPageSearch:n().boolean(),blockTypes:n().minLength(n().array(n().literals(...Object.values(o(700500).xd))),1),inTeams:a,navigableBlockContentOnly:n().boolean(),includePublicPagesWithoutExplicitAccess:n().boolean(),audience:n().array(n().literals("private","shared_internally","shared_externally","shared_to_web")),dev_excludedPages:n().array(n().string()),dev_excludedTeams:n().array(n().string()),parentId:n().string(),databaseType:n().array(n().literals(...o(636090).kw)),adminContentSearchDeletionStatus:n().nonEmpty(n().array(n().literals("in_trash","deleted_from_trash","alive"))),isOfflineOnly:n().boolean()}});function c(e){return{isDeletedOnly:!1,excludeTemplates:!1,navigableBlockContentOnly:!1,requireEditPermissions:!1,includePublicPagesWithoutExplicitAccess:!1,ancestors:[],parentId:void 0,createdBy:[],editedBy:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},inTeams:[],...e}}function d(e,t){return{...e,...t,createdTime:{...e.createdTime,...t.createdTime},lastEditedTime:{...e.lastEditedTime,...t.lastEditedTime}}}const u={searchModal:"search_modal",searchModalQueueTask:"search_modal_queue_task"},p=["quick_find","quick_find_public","quick_find_input_change","quick_find_scroll","quick_find_filters","quick_find_ancestor_filter","quick_find_navigational_mode","mini_quick_find","mini_quick_find_prefetch","admin_tool_search_as_user","admin_tool_search_eval","admin_tool_search_eval_mini_quick_find"],m=["question_answer_context_search","question_answer_limited_content_search"],g=["cron_attachment_search_input_change","cron_attachment_parent_search_input_change","cron_time_collection_views_query"],f=["mail_get_pages"],v=["legacy_searchPagesWithParent","relation_setup_menu"],h=n().union([...p.map(n().literal),...g.map(n().literal),...f.map(n().literal),...m.map(n().literal),...v.map(n().literal),n().literal("ancestor_filter_page_search"),n().literal("trash"),n().literal("verified_pages_settings"),n().literal("link_to_page_block"),n().literal("link_to_collection_block"),n().literal("mention_menu"),n().literal("move_to_menu"),n().literal("public_home_page_menu"),n().literal("relation_menu"),n().literal("link_existing_menu"),n().literal("layout_builder_page_selector"),n().literal("web_clipper"),n().literal("oauth"),n().literal("collection_group_value"),n().literal("collection_settings_source"),n().literal("collection_settings_select_relation_source"),n().literal("admin_search_permanently_deleted_pages"),n().literal("bot_iterate_blocks_in_space"),n().literal("api_unknown"),n().literal("simple_formula_value_page_search"),n().literal("automation_page_picker"),n().literal("automation_collection_picker"),n().literal("admin_content_search"),n().literal("ediscovery_search_api"),n().literal("admin_content_search_export"),n().literal("export_content_analytics"),n().literal("send_to_notion_database_options"),n().literal("send_to_notion_project_options"),n().literal("search_content_analytics"),n().literal("search_unique_id"),n().literal("collection_page_tree_query"),n().literal("assistant_scoped_search_menu"),n().literal("assistant_search_databases"),n().literal("admin_tool_search_as_user"),n().literal("admin_tool_search_eval"),n().literal("debugging"),n().literal("report_bad_search"),n().literal("benchmark_tests"),n().literal("audit_log"),n().literal("ui_doc"),n().literal("unified_find_deep_dive"),n().literal("legal_hold_pages_search"),n().literal("ai_block_v2_page_context_search")]),_=n().union([n().literal("bulk_index_records")]),b=n().union([n().literal("permanently_delete_space")]),y=(n().union([h,_,b]),["lastEdited","created","scroll","id",...Object.keys({pageViewsLast7Days:"pageViews.pageViewsLast7Days",pageViewsLast28Days:"pageViews.pageViewsLast28Days",pageViewsLast90Days:"pageViews.pageViewsLast90Days",pageViewsAllTime:"pageViews.pageViewsAllTime",uniquePageViewsLast7Days:"uniquePageViews.uniquePageViewsLast7Days",uniquePageViewsLast28Days:"uniquePageViews.uniquePageViewsLast28Days",uniquePageViewsLast90Days:"uniquePageViews.uniquePageViewsLast90Days",uniquePageViewsAllTime:"uniquePageViews.uniquePageViewsAllTime"})]),S=n().object({required:{field:n().literals("relevance")},optional:{}}),w=n().object({required:{field:n().literals(...y),direction:n().literals("asc","desc")},optional:{missing:n().union([n().literal("_first"),n().literal("_last"),n().number(),n().boolean(),n().string()]),searchAfter:n().undefinable(n().union([n().number(),n().string()]))}}),k=n().union([S,w]);let I=function(e){return e.Local="local",e.ElasticSearch="es",e.Postgres="pg",e.VectorDBBlock="vector_block",e.VectorDBCollection="vector_collection",e.ElasticsearchRandom="es_random",e.ElasticsearchUniqueID="es_uniqueId",e.ElasticsearchForcedRecentRecall="es_forced_recent_recall",e.NotionUnknown="notion_unknown",e.UniversalUnknown="universal_unknown",e}({});const A=["spacePage","recentVisit","bookmarkedPage","sharedPage","frecencyStore","teamPage","defaultRecordCache","unknown","similarUser1dRecentPages","topPages7dPageView","editedPages1d","similarUsersEditedPages1d","offlinePage"],x=(0,o(959013).YK)({popularThisWeek:{defaultMessage:"Popular this week",id:"search.result.popularThisWeek.badge.text"},mostViewed:{defaultMessage:"Most viewed",id:"search.result.mostViewed.badge.text"},verified:{defaultMessage:"Verified",id:"search.result.verified.badge.text"},verifiedExpired:{defaultMessage:"Verification Expired",id:"search.result.verifiedExpired.badge.text"},template:{defaultMessage:"Template",id:"search.result.template.badge.text"}}),C={RequestFailed:{type:"RequestFailed",message:"Something went wrong."},NoResults:{type:"NoResultsFound",message:"No results found."},Offline:{type:"Offline",message:"Go online for more results."}},T="gzkNfoUU",M=`<${T}>`,P=`</${T}>`},245865:(e,t,o)=>{o.r(t),o.d(t,{cancelEviction:()=>T,subscribe:()=>x,unsubscribe:()=>R,unsubscribeAfterDelay:()=>N,unsubscribeForAllUsers:()=>P});o(16280);var n=()=>o(908006),r=()=>o(857639),i=()=>o(921997),a=()=>o(365233),s=()=>o(720665),l=()=>o(666144),c=()=>o(508496),d=()=>o(589994),u=(o(944114),o(581454),()=>o(643893)),p=()=>o(444943);const m=!1,g=!1,f=60*s().TD,v=15*s().TD;s().TD;class h{constructor(e){this.map=new Map,this.timeoutMs=e}set(e){const{key:t,onTimeout:o,onClear:n,value:r}=e;this.clear(t);const i=window.setTimeout((()=>{this.map.delete(t),null==o||o()}),this.timeoutMs);this.map.set(t,{timeout:i,value:r,onClear:n})}get(e){var t;return null===(t=this.map.get(e))||void 0===t?void 0:t.value}clear(e){const t=this.map.get(e);var o;void 0!==t&&(window.clearTimeout(t.timeout),this.map.delete(e),null===(o=t.onClear)||void 0===o||o.call(t))}has(e){return this.map.has(e)}}const _=new h(f),b=new h(v);var y=()=>o(484975),S=()=>o(941541);const w="recordSubscriptionActions";function k(e,t,o){const n=i().Zg(t);n?null===o||"number"==typeof o?(p().lD&&((0,p().Yl)(t,{latestUpdateTimestamp:Date.now()}),function(e){if(m&&g)return;const t=_.get(e);t&&(t.latestUpdate=Date.now()),b.clear(e)}(t)),I({environment:e,pointer:n,version:o})):r().rateLimitedLog({level:"warning",from:"handleRemoteVersionUpdate",type:"ValidationError",data:{key:t,miscDataToConvertToString:{pointer:n,version:o}}}):r().rateLimitedLog({level:"warning",from:"handleRemoteVersionUpdate",type:"ValidationError",data:{key:t,miscDataToConvertToString:{version:o}}})}function I(e){const{environment:t,pointer:o,version:n}=e,r=[void 0,...t.currentUser.loggedInUserIds];for(const i of r){if(u().A.getSubscriptionForRecord({userId:i,pointer:o})){const r=t.defaultRecordCache.inMemoryRecordCache.getVersion({pointer:o,userId:i});if(d().transactionQueue.isPendingTransactionForRecord(o))return void(c().default.checkGate({gateName:"defer_remote_version_update_for_pending_tx"})&&A.deferUntilTransactionIsDone(e));if(c().default.getConfigKey("always_force_refetch_for_specific_tables","tables").includes(o.table))return void l().BB({environment:t,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,pointer:o,userId:i});(null===n||n>r)&&l().sy({environment:t,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,pointer:o,userId:i})}}}const A=new class{constructor(e){this.recordUpdates=new Map,this.handleRemoteVersionUpdateForPointer=e}deferUntilTransactionIsDone(e){const{pointer:t,version:n}=e,r=o(696706).L3.toKey(t).toString(),i=this.recordUpdates.get(r);if(i)null===i.version||(null===n||n>i.version)&&this.recordUpdates.set(r,e);else{if(!d().transactionQueue.isPendingTransactionForRecord(t))throw new Error("Pending transaction must exist for record");this.recordUpdates.set(r,e),d().transactionQueue.awaitRecordTransaction(t).then((()=>{const e=(0,o(220719).o9)(this.recordUpdates.get(r),"Pending record update for key must exist");this.recordUpdates.delete(r),this.handleRemoteVersionUpdateForPointer(e)}))}}}(I);function x(e){const{pointer:t,userId:o,environment:r}=e,i={pointer:t,userId:o};C(t)||(T({pointer:t,userId:o}),u().A.isSubscribedToRecord(i)||(u().A.addToSubscribedRecords(i),n().default.afterNextFlush((()=>{const n=r.defaultRecordCache.inMemoryRecordCache.getRecord(i);n?M({record:n,...e}):l().sy({environment:r,inMemoryRecordCache:r.defaultRecordCache.inMemoryRecordCache,userId:o,pointer:t}).then((t=>{M({record:t,...e})}),(()=>{u().A.removeFromSubscribedRecords(i)}))}))))}function C(e){return!e.id||!e.table||("emptyDroppableKey"===e.id||"placeholder"===e.id)}function T(e){const{pointer:t,userId:o}=e,n={pointer:t,userId:o};C(t)||(u().A.removeFromPendingUnsubscribeRecords(n),y().A.removeFromPendingEvictions(n))}function M(e){const{environment:t,pointer:o,userId:n,record:s}=e,l={pointer:o,userId:n};if(!u().A.isSubscribedToRecord(l))return;const c=i().N8(o);(0,a().A)(c)&&(o.id&&o.table?S().Ay.addListener(c,void 0,((e,o)=>k(t,e,o)),w,t):r().rateLimitedLog({level:"warning",from:"recordSubscriptionActions:subscribe",type:"KeyValidationError",data:{pointer:o,miscDataToConvertToString:{record:s,key:l,versionsKey:c}}}))}function P(e){for(const t of e.environment.currentUser.loggedInUserIds)R({...e,userId:t})}function B(e){const{pointer:t}=e;if(C(t))return!1;if(!u().A.isSubscribedToRecord(e))return!1;u().A.removeFromSubscribedRecords(e);const o=i().N8(t);return!!(0,a().A)(o)&&(!(!t.id||!t.table)||(r().rateLimitedLog({level:"warning",from:"recordSubscriptionActions:unsubscribe",type:"KeyValidationError",data:{pointer:t,miscDataToConvertToString:{versionsKey:o}}}),!1))}function R(e){const{environment:t}=e;B(e)&&S().Ay.removeListener({key:i().N8(e.pointer),subscriptionId:w},t)}const E=2*s().Xb,D=E;function N(e){const{pointer:t,environment:o,userId:n}=e;if(C(t))return;if(o.defaultRecordCache.inMemoryRecordCache.hasListener(t))return;const r=i().N8(t);if((0,p().Dy)(r)){const e={pointer:t,userId:n};return y().A.addToPendingEvictions(e,Date.now()+D),void(B(e)&&(0,p().zG)(r,w))}u().A.addToPendingUnsubscribeRecords(e,Date.now()+E)}function L(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u().A.forEachPendingUnsubscribeRecord((o=>{let{pointer:n,userId:r,timestamp:i,environment:a}=o;if(i<e){u().A.removeFromPendingUnsubscribeRecords({pointer:n,userId:r});const e={pointer:n,userId:r};t&&console.log("Unsubscribing and evicting",JSON.stringify(n)),R({pointer:n,userId:r,environment:a}),a.defaultRecordCache.inMemoryRecordCache.deleteRecord(e)}})),y().A.forEachPendingEviction((o=>{let{pointer:n,userId:r,timestamp:i,environment:a}=o;if(i<e){y().A.removeFromPendingEvictions({pointer:n,userId:r});const e={pointer:n,userId:r};t&&console.log("Evicting",JSON.stringify(n)),B(e),a.defaultRecordCache.inMemoryRecordCache.deleteRecord(e)}}))}setInterval((()=>{L(Date.now())}),1e4),(0,o(604341).exposeDebugValue)("forceUnsubscribeAndEvictPendingRecords",(()=>{L(1/0,!0)})),setTimeout((()=>{(0,p().UL)((()=>{u().A.forEachPendingUnsubscribeRecord((e=>{let{pointer:t,userId:o,timestamp:n,environment:r}=e;R({pointer:t,userId:o,environment:r});const i={pointer:t,userId:o};y().A.addToPendingEvictions(i,n),u().A.removeFromPendingUnsubscribeRecords(i)}))}))}),0)},246125:(e,t,o)=>{o.d(t,{l:()=>a});var n=o(296540),r=()=>o(221844),i=()=>o(484714);function a(e,t){const{cacheFallback:o,isMockTextStore:a,isTemporaryData:s,onOperationCallback:l,overrideDefaultRecordCache:c}=t??{},d=(0,i().v3)(),{inMemoryRecordCache:u}=d.defaultRecordCache,p=(0,n.useMemo)((()=>{const t=new(r().A)({isTemporaryData:Boolean(s),name:e});return t.isMockTextStore=Boolean(a),o&&t.addCacheFallback(o),c&&u.addCacheOverride(t),t}),[o,u,a,s,e,c]);return(0,n.useEffect)((()=>{p.onOperationCallback=l}),[p,l]),(0,n.useEffect)((()=>function(){o&&p.removeCacheFallback(o),c&&u.removeCacheOverride(p)}),[o,u,p,c]),p}},246231:(e,t,o)=>{o.d(t,{l:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n;(0,o(604341).exposeDebugValue)("AssistantConnectorProgressModalStore",r)},246722:(e,t,o)=>{o.d(t,{A:()=>X});o(898992),o(430670),o(581454);var n=o(296540),r=()=>o(496506),i=()=>o(700500),a=()=>o(451306),s=()=>o(493720),l=()=>o(379632),c=()=>o(179034),d=()=>o(919709),u=()=>o(983650),p=()=>o(643707),m=()=>o(959013),g=()=>o(100622);function f(e,t){o(989423).vd(e,"keyboard_annotation",t)}var v=()=>o(606952),h=()=>o(315097),_=()=>o(261374),b=()=>o(725614),y=()=>o(317909),S=()=>o(178658),w=()=>o(555776),k=()=>o(116008),I=()=>o(964345),A=()=>o(921855),x=()=>o(972435),C=()=>o(231722),T=()=>o(962845),M=()=>o(792002),P=()=>o(645873),B=()=>o(110955),R=()=>o(351360),E=()=>o(525569),D=()=>o(559378),N=()=>o(77246),L=()=>o(569777),F=()=>o(508496),U=()=>o(735372),O=()=>o(574012),V=()=>o(24157),j=()=>o(846955),z=o(474848);const q=(0,m().YK)({typeTextPlaceholder:{defaultMessage:"Press ‘/’ for commands…",id:"text.commandsMenuNotOpen.placeholder"},expandedPlaceholder:{defaultMessage:"Write, press ‘space’ for AI, ‘/’ for commands…",id:"text.expandedPlaceholder"},postBodyPlaceholder:{defaultMessage:"Share your announcement or update...",id:"text.postBody.placeholder"},typeAiTextPlaceholder:{defaultMessage:"Press ‘space’ for AI, ‘/’ for commands…",id:"text.commandsMenuNotOpen.placeholder.ai"},typeTextAiPlaceholder:{defaultMessage:"Press ‘/’ for commands, ‘space’ for AI…",id:"text.commandsMenuNotOpen.placeholder.textAi"},noSlashTypeTextPlaceholder:{defaultMessage:"Click ‘+’ for commands…",id:"text.commandsMenuNotOpen.placeholder.noSlash"},noSlashExpandedPlaceholder:{defaultMessage:"Write, press ‘space’ for AI, click ‘+’ for commands…",id:"text.expandedPlaceholderNoSlash"},noSlashTypeAiTextPlaceholder:{defaultMessage:"Press ‘space’ for AI, click ‘+’ for commands…",id:"text.commandsMenuNotOpen.placeholder.ai.noSlash"},noSlashTypeTextAiPlaceholder:{defaultMessage:"Click ‘+’ for commands, press ‘space’ for AI…",id:"text.commandsMenuNotOpen.placeholder.textAi.noSlash"},filterPlaceholder:{defaultMessage:"Type to filter…",id:"text.commandsMenuOpen.placeholder"},nativeMABFilterInsert:{defaultMessage:"Insert",id:"text.nativeMABFilter.insert"},nativeMABFilterTurnInto:{defaultMessage:"Turn into",id:"text.nativeMABFilter.turnInto"}}),H=new(r().default)((()=>"on"===F().default.getEligibleGroup({experimentId:"prioritize_slash_menu_block_placeholder",defaultGroup:"control"})),{debugName:"aiTextPlaceholderMessageStore"}),W=new(r().default)((()=>"slash_menu"===F().default.getEligibleGroup({experimentId:"adoption_hide_features_v1",defaultGroup:"control"})),{debugName:"adoptionFeatureRemovalStackRankingExperimentStore"}),K=new(r().default)((()=>{var e;const t=R().default.state.currentSpaceStore;if(!t)return!1;const o=t.getSettings();return Boolean(null===(e=o.exposed_to_stackranking_experiment)||void 0===e?void 0:e.adoption_hide_features_v1)}),{debugName:"AdoptionFeatureRemovalExposureStore"}),G=new(r().default)((()=>{const e=R().default.state.currentUserStore;if(e)return e.id}),{debugName:"CurrentUserStore"}),$=new(r().default)((()=>{const e=R().default.state.currentSpaceStore;if(e)return e.getCreatedById()}),{debugName:"CurrentSpaceCreatorStore"}),Y=new(r().default)((()=>{var e;const t=R().default.state.currentUserSettingsStore;if(t)return null===(e=t.getSettings())||void 0===e?void 0:e.signup_time}),{debugName:"UserSettingsSignupTimeStore"}),Q=new(r().default)((()=>F().default.getConfigKey("adoption_stack_ranking_experiment_start","adoption_hide_features_v1")),{debugName:"AdoptionFeatureRemovalExperimentStartDateStore"});class Z extends(()=>o(254751))().A{constructor(e){super(e),this.editor=null,this.mergeEditorRefs=(0,s().RJ)(),this.triggeredAnalytics=!1,this.reminderTimers={},this.onTutorialNextButtonClick=()=>{if(!B().A.state.open&&!this.props.disableSlashCommands){const e=V().default.state;"editing"===e.mode&&y().createAndCommit({userAction:"TourTutorial.slashTooltip",environment:this.props.environment,canUndo:!0,perform:t=>{v().$D({environment:this.props.environment,editorMode:this.getEditorMode(),string:o(393255).jz,multiSelection:e.multiSelection,disableMentions:!0,disableSlashCommands:!1,disableEmojiCommands:!0,transaction:t})}})}},this.renderContentContainer=(e,t)=>{const n=this.getThemeAndSubscribe(),r=this.getHtmlMemo.memo((()=>this.getHtmlFn(n)),[n]),i=(0,z.jsx)(o(477450).A,{...this.classNameAndStyleStore.state,debugName:"Text",store:this.props.store,onBlur:this.props.onBlur,onFocus:this.props.onFocus,canEditStore:this.canEditStore,spellCheck:!this.canExclusivelyComment()&&!this.props.disableBrowserSpellcheck,getHtml:r,getSelection:this.getContainerSelection,onMutation:this.handleMutation,onCompositionStart:()=>{return e=this.props.onChange,t=this.props.environment,b().setSelectionComposing(t,!0),void(e&&e());var e,t},onCompositionEnd:this.handleCompositionEnd,onSelect:t,placeholder:this.getCurrentPlaceholder(),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,suppressNewlineEvents:!0,disableContentEditableWhenNotEditingTextOnMobile:!0,expandSelectionOnTripleClick:!0,id:this.props.id,tagName:this.props.tagName,...e,ref:this.props.contentEditableLeafRef,leafRef:this.mergeEditorRefs(this.handleEditorRef,e.leafRef)});return this.isPageContentForDemoTutorial()?(0,z.jsx)(o(99042).F,{step:"demo_text_block",children:i}):this.isPageContentForTourTutorial()?(0,z.jsx)(o(998109).n,{step:"create_page_type_slash",showSidebarOverlays:!1,onNextButtonClick:this.onTutorialNextButtonClick,children:i}):i},this.handleEditorRef=e=>{this.editor=e},this.isSpaceComposition=()=>{const e=d().qAZ(this.getTextValue());return 1===e.length&&("　"===e[0]||" "===e[0])},this.handleCompositionEnd=()=>{b().setSelectionComposing(this.props.environment,!1),"suggest"!==this.getEditorMode()&&v().US({environment:this.props.environment,store:this.props.store,usingMultiSelection:!0}),this.props.onChange&&this.props.onChange(),this.shouldRenderInteractiveAiPlaceholderStore.state&&this.isSpaceComposition()?S().toggleInitialPrompt({from:"spacebar",environment:this.props.environment}):y().createAndCommit({userAction:"Text.runAllFiltersAfterCompositionEnd",environment:this.props.environment,canUndo:!0,perform:e=>{this.props.disableFilters||o(863188).Ul({environment:this.props.environment,store:this.props.store,editorMode:this.getEditorMode(),transaction:e})}})},this.handleDelete=e=>{if(!this.canEditStore.state)return;if(this.editor&&this.editor.isComposing())return;this.logTypingLag("typing_delete");const{store:t}=this.props,o=V().default.state;if("editing"===o.mode){const n=o.multiSelection;if(n.start.store===t){const t=this.getEditorMode();y().createAndCommit({userAction:"Text.handleDelete",environment:this.props.environment,canUndo:!0,perform:o=>{h().wT({environment:this.props.environment,multiSelection:n,deleteForwards:!0,transaction:o,event:e,editorMode:t})}})}}ee(),this.props.onChange&&this.props.onChange()},this.handleForwardDeleteAtEndOfLine=e=>{if(!this.canEditStore.state)return;if(this.editor&&this.editor.isComposing())return;const{store:t}=this.props,o=V().default.state;if("editing"!==o.mode)return;const n=o.multiSelection;(0,C().kM)(n)&&(0,M().NG)(t,{startIndex:n.start.index,endIndex:n.end.index})&&this.handleDelete(e)},this.handleBackspace=e=>{if(!this.canEditStore.state||this.editor&&this.editor.isComposing())return;this.logTypingLag("typing_backspace");const{store:t}=this.props,o=V().default.state;if("editing"===o.mode){const n=o.multiSelection;if(n.start.store===t){if(h().CZ({device:this.props.environment.device,event:e,multiSelection:n}))return;const t=this.getEditorMode();y().createAndCommit({userAction:"Text.handleBackspace",environment:this.props.environment,canUndo:!0,perform:o=>{h().wT({environment:this.props.environment,multiSelection:n,deleteForwards:!1,transaction:o,event:e,editorMode:t})}})}}ee(),this.props.onChange&&this.props.onChange(e)},this.handleEnter=e=>{if(!this.canEditStore.state)return;if(this.logTypingLag("typing_enter"),o(713972).Xs(e),this.editor&&this.editor.isComposing())return;const t=V().default.state;if("editing"===t.mode)if(this.props.onEnter)this.props.onEnter(e);else{const{multiSelection:e}=t;y().createAndCommit({userAction:"Text.handleEnter",environment:this.props.environment,canUndo:!0,perform:t=>{_().Ve({environment:this.props.environment,editorMode:this.getEditorMode(),multiSelection:e,transaction:t})}}),ee()}this.props.onChange&&this.props.onChange(e)},this.handleShiftEnter=e=>{if(!this.canEditStore.state)return;if(this.editor&&this.editor.isComposing())return;const t=V().default.state;if("editing"===t.mode){const{device:o}=this.props.environment;if(!("shiftKey"in e)||e.shiftKey&&!o.isIOS){if(this.props.disableShiftEnter)return;y().createAndCommit({userAction:"Text.handleShiftEnter",environment:this.props.environment,canUndo:!0,perform:e=>{v().$D({environment:this.props.environment,editorMode:this.getEditorMode(),string:"\n",multiSelection:t.multiSelection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e,mentionSectionOrdering:this.props.mentionSectionOrdering})}}),this.props.onChange&&this.props.onChange(e)}else this.handleEnter(e)}},this.handleTab=e=>{if(this.canEditStore.state)if("suggest"!==this.getEditorMode()){if(this.logTypingLag("typing_tab"),this.props.onTab){this.props.onTab(e)||e.preventDefault()}else e.preventDefault(),y().createAndCommit({userAction:"Text.handleTab",environment:this.props.environment,canUndo:!0,perform:e=>{v().Mf({environment:this.props.environment,shiftKey:!1,transaction:e})}}),ee();this.props.onChange&&this.props.onChange()}else e.preventDefault()},this.handleUntab=e=>{if(this.canEditStore.state)if("suggest"!==this.getEditorMode()){if(this.logTypingLag("typing_untab"),this.props.onUntab){this.props.onUntab(e)||e.preventDefault()}else e.preventDefault(),y().createAndCommit({userAction:"Text.handleUntab",environment:this.props.environment,canUndo:!0,perform:e=>{v().Mf({environment:this.props.environment,shiftKey:!0,transaction:e})}}),ee();this.props.onChange&&this.props.onChange()}else e.preventDefault()},this.handleAnnotation=(e,t)=>{this.canEditStore.state&&(t.preventDefault(),o(482287).po({environment:this.props.environment,annotation:e}),ee(),this.props.onChange&&this.props.onChange(),f(this.props.environment,{type:d()._XS(e)}))},this.handleToggleHighlight=e=>this.handleAnnotation(["h",o(77272).A.getMostRecentlyUsedColor()],e),this.handleToggleBold=e=>this.handleAnnotation(["b"],e),this.handleToggleItalics=e=>this.handleAnnotation(["i"],e),this.handleToggleStrike=e=>this.handleAnnotation(["s"],e),this.handleToggleUnderline=e=>this.handleAnnotation(["_"],e),this.handleToggleCode=e=>this.handleAnnotation(["c"],e),this.handleClick=e=>{this.handleClickActions(e),this.props.onClick&&this.props.onClick(e)},this.handleContextMenu=e=>{const t=this.parentBlockStore.state;t&&A().PP({environment:this.props.environment,event:e,textValue:this.getTextValue(),editorNode:this.getEditorNode(),store:this.props.store,parentStore:t,canEdit:this.canEditStore.state})},this.handleMouseOver=e=>{A().sp({environment:this.props.environment,event:e,textValue:this.getTextValue(),editorNode:this.getEditorNode(),store:this.props.store,parentStore:this.props.parentStore,canEdit:this.canEditStore.state})},this.handleMouseOut=e=>{A().W5({environment:this.props.environment,event:e,textValue:this.getTextValue(),editorNode:this.getEditorNode(),store:this.props.store,parentStore:this.props.parentStore,canEdit:this.canEditStore.state})},this.handleCut=e=>{if(this.canEditStore.state)return this.props.onCut?(this.props.onCut(e),void ee()):void(this.props.clipboardActions&&(this.props.clipboardActions.cutWithMaybeConfirmation({environment:this.props.environment,event:e,markdownLinkifyIt:this.props.markdownLinkifyIt}),ee(),this.props.onChange&&this.props.onChange()));e.preventDefault()},this.handlePaste=e=>{this.canEditStore.state&&(y().createAndCommit({userAction:"Text.handlePaste",environment:this.props.environment,canUndo:!0,perform:t=>{var o;null===(o=this.props.clipboardActions)||void 0===o||o.paste({environment:this.props.environment,event:e,disableEmbedMenu:Boolean(this.props.disableEmbedMenu),transaction:t,onPasteFiles:this.props.onPasteFiles||this.props.clipboardActions.pasteFilesForBlocks,formulasModule:this.props.formulasModule,markdownLinkifyIt:this.props.markdownLinkifyIt,tinyMceMicrosoftWordPasteFilter:this.props.tinyMceMicrosoftWordPasteFilter})}}),ee(),this.props.onChange&&this.props.onChange())},this.handleKeypress=e=>{const t=this.parentBlockStore.state,n=t&&t.getType(),r=Boolean(n&&(0,i().ZW)(n));if(" "===e.key&&!e.shiftKey&&!e.ctrlKey&&!e.altKey&&this.isEmpty()&&(this.shouldRenderInteractiveAiPlaceholderStore.state||this.isHorizon1PlaceholderEnabledStore.state)&&!this.props.store.inMemoryRecordCache.isMockTextStore&&r&&!o(430483).zD.isOffline())return e.preventDefault(),void S().toggleInitialPrompt({from:"spacebar",environment:this.props.environment});this.canEditStore.state||e.metaKey&&"c"===e.key||e.preventDefault()},this.handleCopy=e=>{!function(e,t,o,n,r){if(t)return void t(e);null==r||r.copy({environment:n,event:e,markdownLinkifyIt:o})}(e,this.props.onCopy,this.props.markdownLinkifyIt,this.props.environment,this.props.clipboardActions)},this.handleMoveUp=e=>{!function(e,t,o){if(o)return void o(e);y().createAndCommit({userAction:"Text.handleMoveUp",environment:t,canUndo:!0,perform:o=>{v().$P({environment:t,transaction:o,direction:"up"})&&e.preventDefault()}})}(e,this.props.environment,this.props.onMoveUp)},this.handleMoveDown=e=>{!function(e,t,o){if(o)return void o(e);y().createAndCommit({userAction:"Text.handleMoveDown",environment:t,canUndo:!0,perform:o=>{v().$P({environment:t,transaction:o,direction:"down"})&&e.preventDefault()}})}(e,this.props.environment,this.props.onMoveDown)},this.isRightMarginCommentActionHoveredStore=this.createComputedStore((()=>{if(!w().A.state.isHovered||"right_margin_button"!==w().A.state.hoverEntryPoint)return!1;const e=o(871399).default.state,t=e.isOpen?e.currentStore:void 0;return(null==t?void 0:t.id)===this.props.store.id})),this.inPageFindFocusedResultStore=this.createComputedStore((()=>{if("none"===this.props.inPageFind.type)return;const e=U().wb.state;return(0,o(792540).wc)(e)&&e.id===this.props.store.id?e:void 0}),{debugName:"inPageFindFocusedResultStore"}),this.canEditStore=this.createComputedStore((()=>{if(this.props.disabled)return!1;if(o(620149).l.state)return!1;const e=this.props.pageContext&&this.props.pageContext.publicEditModeStore.state;return e&&e.hasPublicPermission?this.props.isDiscussionInput?"view"!==e.permission:"comment"===e.permission&&"suggest"===this.getEditorMode()||"edit"===e.permission:!(!this.props.store.canComment()||"suggest"!==this.getEditorMode())||this.props.store.canEdit()}),{debugName:"canEditStore"}),this.getThemeAndSubscribe=()=>{var e;const t=this.props.environment.ThemeModeStore.state;return(0,g().O4)({theme:(null===(e=this.props.themeContext)||void 0===e?void 0:e.mode)??t})},this.getHtmlMemo=new(s().XQ),this.getHtmlFn=e=>()=>{var t,r,i,a;const s=Boolean(this.addLineBreakSuggestionStore.state),c=(null===(t=this.addLineBreakSuggestionStore.state)||void 0===t?void 0:t.discussionId)||(null===(r=this.removeLineBreakSuggestionStore.state)||void 0===r?void 0:r.discussionId);let u=this.getTextValue(),m=!1;if(this.props.canTruncate&&void 0!==this.props.maxChars){d().qAZ(u).length>this.props.maxChars&&(u=d().Ffo(this.getTextValue(),0,this.props.maxChars),m=!0)}if(function(e,t){if(!(0,o(155959).T)("supportsAlwaysMultiTextSelectionBehavior"))return!1;if(t&&e)return!!function(){var e,t,o,n;const r=null===(e=O().A.state.packageName)||void 0===e?void 0:e.includes("com.google.android.inputmethod.latin"),i=(null===(t=O().A.state.activeLocale)||void 0===t?void 0:t.includes("ko"))||(null===(o=O().A.state.activeLocale)||void 0===o?void 0:o.includes("zh"))||(null===(n=O().A.state.activeLocale)||void 0===n?void 0:n.includes("ja"));return Boolean(r&&!i)}();return!1}(Boolean(this.props.renderWhiteSpaceWhenEmptyOnAndroid),this.isEmpty()))return l().A.renderToStaticMarkup((0,z.jsx)("span",{className:p().F8,style:{position:"relative"},placeholder:this.getCurrentPlaceholder(),children:(0,z.jsx)("br",{})}));const g=A().S5({environment:this.props.environment,textValue:u&&{value:u,spaceId:(0,o(161479).e)(this.props.store.pointer.spaceId)},parentStore:this.props.parentStore||this.props.store,disableHover:!1,disableStyleAnnotations:Boolean(this.props.disableStyleAnnotations),disableInsertedDeletedAnnotations:Boolean(this.props.disableInsertedDeletedAnnotations),disableDateStyleAnnotations:Boolean(null===(i=this.props.disabledMentionTypes)||void 0===i?void 0:i.date),disableSuggestionAnnotations:Boolean(this.props.disableSuggestionAnnotations),disableCommentAnnotations:this.props.disableComment??!1,disabled:!this.canEditStore.state,theme:e,emojiType:(0,o(712030).FN)(this.props.environment),katex:this.props.environment.KatexStore.getKatex(),parentBlockId:te(this.props.store),renderedPageBlockId:null===(a=this.props.pageContext)||void 0===a?void 0:a.pageStore.id,formulaValueTypes:this.props.formulaValueTypes??[]}),f=(0,z.jsxs)(n.Fragment,{children:[g,m&&oe(e),c&&ne(e,s?"add":"remove",c)]});return l().A.renderToStaticMarkup(f)},this.clearBrowserSelection=()=>{var e;null===(e=this.getEditorNode())||void 0===e||e.blur()},this.getTextValue=()=>[this.getTextValueHelper()].map((e=>A().Xu({store:this.props.store,textValue:e}))).map(this.applyTemporarySuggestRemovalAnnotation).map(this.applyTemporarySuggestInsertAnnotation)[0],this.applyTemporarySuggestRemovalAnnotation=e=>{const t=this.blockRemoveSuggestionStore.state;return e&&t?A().xh({textValue:e,discussionId:t.discussionId}):e},this.applyTemporarySuggestInsertAnnotation=e=>{const t=this.blockInsertSuggestionStore.state;return e&&t?A().EA({textValue:e,discussionId:t.discussionId}):e},this.getTextValueHelper=()=>{if(this.isNewDiscussionMenuTargetStore.state)return A().Fm({store:this.props.store});if(this.props.hasTemporaryDiscussionOnProperty){const e=k().A.getMultiSelection(),t=this.props.store.getValue();if(e)return d().Mwp({textValue:t,selection:{startIndex:e.start.index,endIndex:e.end.index},annotation:[d().Ifu.TemporaryComment]});if("block"===k().A.getType()){const e=d().qAZ(this.props.store.getValue());return d().Mwp({textValue:t,selection:{startIndex:0,endIndex:e.length},annotation:[d().Ifu.TemporaryComment]})}}if(this.isInlineEquationOverlayTargetStore.state)return A().kw({store:this.props.store,equationStore:L().A});if(this.isMentionMenuTargetStore.state)return A().k5({store:this.props.store,stateType:{type:"mentionMenu",state:this.isMentionMenuTargetStore.state}});if(this.isSlashMenuTargetStore.state)return A().k5({store:this.props.store,stateType:{type:"slashMenu",state:this.isSlashMenuTargetStore.state}});if(this.isRightMarginCommentActionHoveredStore.state&&!this.props.disableRightMarginHoverStyling){const e=d().qAZ(this.props.store.getValue());return A().A6({store:this.props.store,multiSelection:{start:{store:this.props.store,index:0},end:{store:this.props.store,index:e.length}}})}if(this.linkingMenuSelectionStore.state)return A().Vr({store:this.props.store,selection:this.linkingMenuSelectionStore.state});if(U().qu.state&&"none"!==this.props.inPageFind.type&&!this.props.store.inMemoryRecordCache.isSyntheticAssistantData){return A().nu({textValue:this.props.store.getValue(),blockId:this.props.store.id,textProps:this.props.inPageFind,find:U().qu.state,currentFocusedResult:this.inPageFindFocusedResultStore.state})}if(this.isCompletionPopupTargetStore.state)return A().PB({store:this.props.store,temporaryAnnotation:d().Ifu.TemporarySelection,multiSelection:J()});const e=this.pageAnnotationBlockMenuStore.state;if(e)return e;if(this.isEditingStore.state){const e=V().default.state;if("editing"===e.mode){const t=(0,C().H7)(e.multiSelection);if(t){const{textValue:e,modified:o}=A().K8({store:this.props.store,selection:t.selection});if(o)return e}}}const t=(0,o(90881).getBlockSuggestion)(o(780942).T,this.props.store.id);return t?t.titleTextValue:this.props.store.getValue()},this.parentBlockStore=this.createComputedStore((()=>{const{store:e}=this.props;if(e.pointer.table===c().ev)return o(630116).Bv.createChildStore(e,e.pointer)}),{debugName:"parentBlockStore"}),this.isEditingStore=this.createComputedStore((()=>(0,M().j_)(this.props.store)),{debugName:"isEditing"}),this.isSelectionEndpointStore=this.createComputedStore((()=>(0,M().D9)(this.props.store)),{debugName:"isSelectionEndpoint"}),this.shouldRenderInteractiveAiPlaceholderStore=this.createComputedStore((()=>{var e;if(this.isHorizon1PlaceholderEnabledStore.state)return!1;if(this.props.environment.device.isMobile||this.props.environment.device.isMobileNative)return!1;if(this.props.disabled)return!1;if(null===(e=this.props.pageContext)||void 0===e||!e.arePublicEditCompletionsEnabledStore.state)return!1;const t=this.parentBlockStore.state,n=t&&t.getType();return Boolean(n&&(0,i().ZW)(n))&&"contains-selection"===this.isEditingStore.state&&!(t&&(0,o(602098).u)(t))}),{debugName:"shouldRenderInteractiveAiPlaceholder"}),this.isHorizon1PlaceholderEnabledStore=this.createComputedStore((()=>{var e;return!(null===(e=this.props.pageContext)||void 0===e||!e.arePublicEditCompletionsEnabledStore.state)&&!this.props.environment.device.isPhone}),{debugName:"isHorizon1PlaceholderEnabled"}),this.isNewDiscussionMenuTargetStore=this.createComputedStore((()=>{const e=k().A.state;return k().A.calculateMultitextSelection(),e.open&&"inline"===e.type&&Boolean((0,T().xk)(e.multiSelection,this.props.store))}),{debugName:"isNewDiscussionMenuTarget"}),this.blockInsertSuggestionStore=this.createComputedStore((()=>{var e;return null===(e=this.parentBlockStore.state)||void 0===e?void 0:e.getInsertSuggestion()}),{debugName:"blockInsertSuggestion"}),this.blockRemoveSuggestionStore=this.createComputedStore((()=>{var e;return null===(e=this.parentBlockStore.state)||void 0===e?void 0:e.getRemoveSuggestion()}),{debugName:"blockRemoveSuggestion"}),this.addLineBreakSuggestionStore=this.createComputedStore((()=>{var e;return null===(e=this.parentBlockStore.state)||void 0===e?void 0:e.getAddLineBreakSuggestion()}),{debugName:"addLineBreakSuggestionStore"}),this.removeLineBreakSuggestionStore=this.createComputedStore((()=>{var e;return null===(e=this.parentBlockStore.state)||void 0===e?void 0:e.getRemoveLineBreakSuggestion()}),{debugName:"removeLineBreakSuggestionStore"}),this.isCompletionPopupTargetStore=this.createComputedStore((()=>{const e=J();if(!e)return!1;const t=E().default.state;if("assistantCompletionPopup"===t.type){const e=o(295169).default.getSessionContext(t.sessionId);if(e&&e.getAllPendingOperations().length>0)return!1}return Boolean((0,T().xk)(e,this.props.store))}),{debugName:"isCompletionPopupTarget"}),this.isInlineEquationOverlayTargetStore=this.createComputedStore((()=>{var e;return L().A.isOpen()&&(null===(e=(0,C().H7)(L().A.state.savedTextSelectionState.multiSelection))||void 0===e?void 0:e.store)===this.props.store}),{debugName:"isInlineEquationOverlayTarget"}),this.isMentionMenuTargetStore=this.createComputedStore((()=>{const e=o(375447).A.state;return!!e.open&&(e.textStore===this.props.store&&e)}),{debugName:"isMentionMenuTarget"}),this.isSlashMenuTargetStore=this.createComputedStore((()=>{const e=B().A.state;return!!e.open&&(e.textStore===this.props.store&&e)}),{debugName:"isSlashMenuTarget"}),this.linkingMenuSelectionStore=this.createComputedStore((()=>{const e=o(711319).A.state;if(!e.open)return!1;if(!e.focusLinkInput&&!e.focusTitleInput)return!1;if(!this.isEditingStore.state)return!1;const t=(0,C().H7)(e.savedTextSelectionState.multiSelection);return!!t&&t.selection}),{debugName:"linkingMenuSelectionStore"}),this.pageAnnotationBlockMenuStore=this.createComputedStore((()=>{const e=o(407054).A.state;if(!e.isActive)return;const{clickedPageAnnotation:t}=e;if(!t)return;const{parentStore:n,pageAnnotation:r}=t;if(n!==this.parentBlockStore.state)return;const i=this.props.store.getValue();return i?null==i?void 0:i.map((e=>d().qXl(e)?[e[0],e[1].flatMap((e=>d().jIt(e)&&e===r?[r,d().CXp()]:[e]))]:e)):void 0}),{debugName:"pageAnnotationBlockMenuStore"}),this.disabledMentionTypes=new(s().XQ),this.getContainerSelection=()=>{const e=Boolean(this.linkingMenuSelectionStore.state);if(this.isSelectionEndpointStore.state){if(e)return;return(0,M().Do)(this.props.store)}if(this.isEditingStore.state&&!e){const{store:e}=this.props,t=V().default.state;if("editing"===t.mode){const o=(0,T().cR)("Text",t.multiSelection);if(o){const{selection:t}=o,n=e.getValue(),r=d().qAZ(n).length;return{type:"contain",selection:{startIndex:Math.min(t.startIndex,r),endIndex:Math.min(t.endIndex,r)}}}}}},this.getEndSelection=()=>{const e=d().qAZ(this.getTextValue());return{startIndex:e.length,endIndex:e.length}},this.classNameAndStyleStore=this.createComputedStore((()=>(0,a().AH)(this.getStyle(),this.props.className)),{debugName:"classNameAndStyleStore"}),this.showPostPlaceholderStore=this.createComputedStore((()=>{var e,t;const o=null===(e=this.parentBlockStore.state)||void 0===e?void 0:e.getNavigableBlockStore({skipCurrent:!0}),n=(null==o?void 0:o.isPost())&&1===(null==o||null===(t=o.getModel())||void 0===t?void 0:t.getContentLength());return Boolean(n)})),this.handleMutation=this.handleMutation.bind(this)}UNSAFE_willMountOrUpdate(){this.createReminderTimers(),this.props.environment.KatexStore.loadIfNeeded(this.getTextValue)}willUnmount(){this.clearReminderTimers(),o(347469).OZ(this.props.store)}isComposing(){return this.editor&&this.editor.isComposing()}createReminderTimers(){const e=this.getTextValue(),t=d().Cok(e),n=o(496603).oE(t.map((e=>{const t=(0,o(604995).q8)(e,(0,o(416504).P)());return null==t?void 0:t.toMillis()}))),r=Date.now();for(const i of n){const e=i-r;e>0&&e<o(720665).nD&&(i in this.reminderTimers||(this.reminderTimers[i]=setTimeout(this.enqueueForceUpdate,e)))}for(const o in this.reminderTimers)n.includes(Number.parseInt(o))||(clearTimeout(this.reminderTimers[o]),delete this.reminderTimers[o])}clearReminderTimers(){for(const e in this.reminderTimers)clearTimeout(this.reminderTimers[e]),delete this.reminderTimers[e]}renderComponent(){const{disableInsertText:e,disableStyleAnnotations:t,disableSelectAllBlocks:n,disableSelectionDrag:r,disableDrag:i,disabled:a}=this.props;return(0,z.jsx)(o(89793).F,{...this.props,clearBrowserSelection:this.clearBrowserSelection,getEndSelection:this.getEndSelection,canInsertText:!a&&!e,onBlur:this.clearBrowserSelection,onClick:this.handleClick,onContextMenu:this.handleContextMenu,onDelete:this.handleDelete,onDeleteToEndOfLine:this.handleForwardDeleteAtEndOfLine,onDeleteNextWord:this.handleForwardDeleteAtEndOfLine,onBackspace:this.handleBackspace,onEnter:this.handleEnter,onShiftEnter:this.handleShiftEnter,onTab:this.handleTab,onUntab:this.handleUntab,onToggleHighlight:this.handleToggleHighlight,onToggleBold:this.handleToggleBold,onToggleItalics:this.handleToggleItalics,onToggleStrike:this.handleToggleStrike,onToggleUnderline:this.handleToggleUnderline,onToggleCode:this.handleToggleCode,onCopy:this.handleCopy,onCut:this.handleCut,onPaste:this.handlePaste,onKeypress:this.handleKeypress,onMoveUp:this.handleMoveUp,onMoveDown:this.handleMoveDown,render:this.renderContentContainer,disableStyleAnnotations:t,canSelectAllBlocks:!n,canSelectionDrag:!r,disableDrag:i,topBottomPadding:9})}getCurrentPlaceholder(){var e;const{device:t}=this.props.environment,o=H.state,n=this.isSlashDisabled();if(this.shouldRenderInteractiveAiPlaceholderStore.state)return o?n?x().A.formatMessage(q.noSlashTypeAiTextPlaceholder):x().A.formatMessage(q.typeTextAiPlaceholder):n?x().A.formatMessage(q.noSlashTypeTextPlaceholder):x().A.formatMessage(q.typeTextPlaceholder);if(this.props.placeholder)return this.props.placeholder;if(this.props.disabled||I().gZ.state&&this.props.store.id===(null===(e=I().kj.state)||void 0===e?void 0:e.id))return" ";if(this.showPostPlaceholderStore.state)return x().A.formatMessage(q.postBodyPlaceholder);if(!this.props.disableSlashCommands&&"contains-selection"===this.isEditingStore.state&&this.canEditStore.state)if(B().A.state.open){if(B().A.state.isAddMenu)return x().A.formatMessage(q.filterPlaceholder)}else if(!t.isPhone)return this.isHorizon1PlaceholderEnabledStore.state?n?x().A.formatMessage(q.noSlashExpandedPlaceholder):x().A.formatMessage(q.expandedPlaceholder):n?x().A.formatMessage(q.noSlashTypeTextPlaceholder):x().A.formatMessage(q.typeTextPlaceholder);return" "}isPageContentForTourTutorial(){const{device:e}=this.props.environment;return!!(0,j().tourIsActive)(j().default.state)&&!(this.props.disableSlashCommands||"contains-selection"!==this.isEditingStore.state||!this.canEditStore.state||e.isMobile)}isSlashDisabled(){const e=K.state,t=G.state,n=$.state,r=Y.state,i=Q.state;if(!(0,o(440209).mn)({isSpacePreviouslyExposed:e,currentUserId:t,spaceCreatedById:n,userSignUpDate:r,experimentStartDate:i}))return!1;return W.state}isPageContentForDemoTutorial(){var e;const{device:t}=this.props.environment,o=this.props.pageContext&&this.props.pageContext.publicEditModeStore.state;return!!D().A.isActiveDemo()&&!(t.isMobile||!o||(null===(e=this.parentBlockStore.getState())||void 0===e?void 0:e.id)!==D().A.getCurrentStepBlockId())}async handleTriggerAutoCorrect(){var e;if(this.props.isDiscussionInput||null!==(e=this.editor)&&void 0!==e&&e.isComposing())return;if(!F().default.checkGate({gateName:"ai_co_editing"}))return;const t=this.props.store.getAncestorBlockStoreAtRootPath();if(!t)return;if(!N().Uv.isStoreInAiCoEditing(t))return;(await(0,o(488923).uZ)()).submitEvent({type:"blockUpdated",environment:this.props.environment,blockStore:t})}handleMutation(e){if(this.logTypingLag("typing_lag"),!this.canEditStore.state)return;y().createAndCommit({userAction:"Text.handleMutation",environment:this.props.environment,canUndo:!0,perform:t=>{let n=this.props.store;const{multiSelection:r}=e;if(r&&!(0,C().KP)(r))n=r.start.store;else if(this.props.legacyTransclusionParentStore&&this.props.legacyTransclusionActions&&!e.insertedLine&&!e.isComposing&&!e.deletedLine){const e=this.props.legacyTransclusionActions.maybeAutofixLegacyTransclusionProperty({environment:this.props.environment,store:n,parentStore:this.props.legacyTransclusionParentStore,transaction:t});e&&(n=e)}if(v().kE({environment:this.props.environment,store:n,newValue:e.newValue,editorMode:this.getEditorMode(),disableMentions:Boolean(this.props.disableMentions),disabledMentionTypes:this.disabledMentionTypes.memo((()=>(0,o(756005).Yz)(this.props.disabledMentionTypes)),[this.props.disabledMentionTypes]),disableSlashCommands:Boolean(this.props.disableSlashCommands),disableEmojiCommands:Boolean(this.props.disableEmojiCommands),disableFilters:this.props.disableFilters||e.isComposing,transaction:t,multiSelection:r,usePopupForMentionOnMobile:this.props.usePopupForMentionOnMobile,mentionSectionOrdering:this.props.mentionSectionOrdering}),e.insertedLine){const e="editing"===V().default.state.mode&&V().default.state.multiSelection;e&&_().Ve({environment:this.props.environment,editorMode:this.getEditorMode(),multiSelection:e,transaction:t})}this.props.trackEditsToUserFlow&&!t.isEmpty()&&o(838256).VS(this.props.environment,this.props.trackEditsToUserFlow,t)}}),this.handleTriggerAutoCorrect();const{store:t}=this.props,n=this.parentBlockStore.state;if(n){if(n.getType()){const e=n.getSchema()||{};if("properties"===t.path[0]&&t.path[1]){e[t.path[1]]&&!this.triggeredAnalytics&&(this.triggeredAnalytics=!0)}}}if(this.props.onChange){let e;this.isSpaceComposition()&&(e=new KeyboardEvent("keydown",{key:" ",code:"Space",keyCode:32})),this.props.onChange(e)}}getEditorMode(){var e,t;return this.props.isDiscussionInput||this.props.disableSuggestEdit?"default":null!==(e=this.props.pageContext)&&void 0!==e&&e.pageStore?N().Uv.getMode(null===(t=this.props.pageContext)||void 0===t?void 0:t.pageStore):"default"}handleClickActions(e){A().HP({environment:this.props.environment,event:e,textValue:this.getTextValue(),editorNode:this.getEditorNode(),store:this.props.store,parentStore:this.props.parentStore,canEdit:this.canEditStore.state,disableEquationInteraction:this.props.disableEquationInteraction})}canExclusivelyComment(){return e=this.props.disabled,t=this.props.store,!e&&t.canComment()&&!this.canEditStore.state;var e,t}focus(){this.isEditingStore.state||this.props.disableMoveCursorToEndOnFocus||b().setSelectionAtEnd({store:this.props.store})}getEditorNode(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.getNode())||void 0}isEmpty(){return 0===d().RQ(this.getTextValue()).length}logTypingLag(e){const t=!this.props.disabled&&"inline"===this.props.pasteBehavior;(0,o(267856).D)({type:e,environment:this.props.environment,blockStore:this.parentBlockStore.state,store:this.props.store,isInCollectionView:t})}getStyle(){const e=this.getThemeAndSubscribe(),{device:t}=this.props.environment;let o={maxWidth:"100%",width:"100%",whiteSpace:"pre-wrap",wordBreak:"break-word",caretColor:this.canExclusivelyComment()?g().Ay.transparent:e.regularTextColor,...this.props.style};return this.isEmpty()&&(o.minHeight="1em",o={...o,color:e.regularTextColor,WebkitTextFillColor:e.lightTextColor,...this.props.placeholderStyle,...this.showPostPlaceholderStore.state&&{color:e.text.quaternary,WebkitTextFillColor:e.text.quaternary}}),t.isMobile&&this.canEditStore.state&&(this.isEditingStore.state?o.WebkitUserModify="read-write-plaintext-only":(o.userSelect="none",o.WebkitUserSelect="none",o.whenFocusedEditable={userSelect:"text",WebkitUserSelect:"text",WebkitUserModify:"read-write-plaintext-only"})),o}}Z.displayName="Text",Z.contextType=null;const X=n.memo(n.forwardRef((function(e,t){const r=(0,n.useRef)(null),i=(0,n.useRef)(null);(0,n.useEffect)((()=>{i.current&&(r.current=i.current.parentElement)}),[i]);const{value:a}=(0,P().fJ)(o(659602).g),{value:s}=(0,P().fJ)(o(335722).S),{value:l}=(0,P().fJ)(o(862292).T.formulas),{value:c}=(0,P().fJ)(o(884107).R.clipboardActions),{value:d}=(0,P().fJ)(o(764061).l.legacyTransclusionActions),u=(0,o(484714).v3)(),p=(0,n.useContext)(o(396010).K),m=(0,o(792485).S)();return(0,z.jsx)(o(306631).S,{from:"Text",fallback:t=>{let{errorId:n}=t;return(0,z.jsx)(o(215206).m,{store:e.store,children:e=>(0,z.jsx)(o(719061).oj,{backgroundColor:e,errorId:n})})},getParentEl:()=>r.current,children:(0,z.jsx)(Z,{...e,contentEditableLeafRef:i,ref:t,clipboardActions:c,formulasModule:l,legacyTransclusionActions:d,markdownLinkifyIt:a,tinyMceMicrosoftWordPasteFilter:s,environment:u,themeContext:p,pageContext:m})})})));function J(){const e=E().default.state;return("closedWithContext"===e.type||"completionPopup"===e.type&&"initialPromptForAIBlock"!==e.stage||"assistantCompletionPopup"===e.type)&&"textSelection"===e.context.type?e.context.textSelection:void 0}function ee(){o(908006).default.flush()}function te(e){if(e.table===c().ev)return e.id;const{ancestor:t}=e.findRecordStoreUIAncestor((e=>{let{table:t}=e;return t===c().ev}));return t?t.id:void 0}function oe(e){return(0,z.jsxs)(o(719147).A,{disableUnderline:!0,style:{color:e.mediumTextColor},onClick:e=>{e.preventDefault(),e.stopPropagation()},children:["…",(0,z.jsx)("span",{children:(0,z.jsx)(m().sA,{id:"text.truncated.showMoreLabel",defaultMessage:"more"})})]})}function ne(e,t,o){const n={textDecoration:"add"===t?"":"line-through",WebkitTextFillColor:"initial",..."add"===t?(0,u().B0)(e):(0,u().tR)(e)},r=(0,a().ED)({type:"add"===t?"update":"remove"}),i=(0,a().wV)({discussionId:o});return(0,z.jsx)("span",{style:n,className:`${p().gy} ${p().Do} ${r} ${i}`,children:`${d().nfR}`})}},246826:(e,t,o)=>{o.d(t,{Bn:()=>x,KY:()=>I,Wv:()=>k,eC:()=>w,vt:()=>C,zv:()=>A});o(16280),o(944114);var n=()=>o(701218),r=()=>o(175482),i=()=>o(933449),a=()=>o(416845),s=()=>o(792071),l=()=>o(134025),c=()=>o(212547),d=()=>o(696706),u=()=>o(179034),p=()=>o(439180),m=()=>o(496603),g=()=>o(534177),f=()=>o(518736),v=()=>o(594794),h=()=>o(589506),_=()=>o(351360),b=()=>o(630116),y=()=>o(317909),S=()=>o(838256);function w(e){const{environment:t,table:o,value:n,transaction:r,inMemoryRecordCache:i}=e;if(!n.id){const e=n,r=c().ms.create(o,e),i=c().ms.getSpaceId(r);n.id=(0,v().Z1)({environment:t,table:o,spaceId:i})}const a=n,s=c().ms.create(o,a),l=d().L3.fromRecordWithTable(s),u=b().sk.createUniqueRootStore(t,l,{userId:r.userId,inMemoryRecordCache:i});return y().applyOperation({store:u,operation:{pointer:u.pointer,path:[],command:"set",args:n},transaction:r}),u}function k(e){var t,o;const{environment:n,type:i,properties:s,format:c,permissions:d,transaction:m,inMemoryRecordCache:w,createdByTable:k,createdById:I,createdTime:A,lastEditedByTable:x,lastEditedById:C,lastEditedTime:T}=e;let M=e.tracker;const P=e.spaceId||m.spaceId,B=e.id||(0,v().Z1)({environment:n,table:u().ev,spaceId:P}),R=new(b().Bv)(n,{table:u().ev,id:B,spaceId:P},{userId:m.userId,inMemoryRecordCache:w}),E=(0,f().D8)(R.getSpaceStore());if(!M&&!m.getUserFlowForAnalyticsPurposesOnly()){const e="page"===i?"user_flow_create_page":"user_flow_create_block";M=new(S().UF)({environment:n,entryPointName:"recordActions.createBlock",userFlow:e,succeedOnEnqueue:!0})}null===(t=M)||void 0===t||t.track(R.pointer,m);const D=null===(o=_().default.state.currentUserStore)||void 0===o?void 0:o.pointer,N=r().VC({block:{id:B,type:i,permissions:d,properties:s,format:c,space_id:P,created_time:A??Date.now(),created_by_table:k??(null==D?void 0:D.table),created_by_id:I??(null==D?void 0:D.id),last_edited_time:T??void 0,last_edited_by_table:x??void 0,last_edited_by_id:C??void 0},useCrdt:E});for(const r of N)(0,l().$Y)(r)?y().applyOperation({store:R,operation:r,transaction:m}):(0,p().ph)(r)?y().applyCrdtTextOperation({store:R,operation:r,invertedOperation:void 0,transaction:m}):(0,g().HB)(r);return m.postPerformAssertions.push((function(){if(m.isLocal)return;if(!R.getParentStore())throw new(a().yI)(`Created block was not given a parent before being committed in transaction ${m.getUserActionForAnalyticsPurposesOnly()}`)})),h().onBlockCreated({environment:n,store:R}),R}function I(e){const{store:t,value:o,transaction:n}=e,r=t.path;y().applyOperation({store:t,operation:{pointer:t.pointer,path:r,command:"set",args:o??null},transaction:n})}function A(e){const{store:t,transaction:o}=e,r=t.path;let i=e.data;i&&t.table===u().ev&&(m().n4(r,[])?(i=function(e){const{properties:t,format:o,crdt_data:n,crdt_format_version:r,...i}=e;return i}(i),i=n().hA(i)):m().n4(r,["properties"])&&("title"in i||(i=n().hA(i)))),y().applyOperation({store:t,operation:{pointer:t.pointer,path:r,command:"update",args:i},transaction:o})}function x(e){const{store:t,source:o,fileIds:n,transaction:r}=e,i=t.path;for(const a of n)y().applyOperation({store:t,operation:{pointer:t.pointer,path:i,command:"copyFile",args:{source:o,fileId:a}},transaction:r})}function C(e){let{environment:t,table:o,args:n,transaction:r,inMemoryRecordCache:a}=e;const l=s().JUt[o],{model:c,operations:d}=l.create(n),m=b().sk.createUniqueRootStore(t,c.pointer,{userId:r.userId,inMemoryRecordCache:a});for(const s of d)(0,p().ph)(s)?y().applyCrdtTextOperation({store:(0,i().Wg)(m,(e=>e.table===u().ev),`Expected "${u().ev}", got "${m.table}"`),operation:s,invertedOperation:void 0,transaction:r}):y().applyOperation({store:m,operation:s,transaction:r});return m}},247450:(e,t,o)=>{o.d(t,{h:()=>r});var n=()=>o(792415);function r(e){var t;let{blockId:o,setting:r}=e;const{publicPageData:i}=n().A.state;if((null==i?void 0:i.pageId)!==o)return;return null===(t=i.securitySettings)||void 0===t?void 0:t[r]}},248566:(e,t,o)=>{function n(){return!0===window.__mobileAppBackgroundLaunch}o.d(t,{A:()=>n})},248662:(e,t,o)=>{o.d(t,{T:()=>u});var n=()=>o(584262),r=()=>o(970330),i=()=>o(612008),a=()=>o(281948),s=()=>o(186445),l=()=>o(476492),c=()=>o(519839);function d(e){const{blockId:t,collectionContextStore:o}=e,r=(0,s().sj)(t),i=(0,s().Wu)(t),a=o.isInHomeWidgetStore.state;return i?a?n().y8.PersonalHomeTileCustomDbCreate:n().y8.PersonalHomeCustomDbCreate:r?a?n().y8.PersonalHomeTileTasksCreate:n().y8.PersonalHomeTasksCreate:n().y8.Create}function u(e){const{transaction:t,store:o,collectionContextStore:n,environment:s,shouldCoerce:u,templateStore:p,showMoveTo:m,peekModeOverride:g,from:f,isKeyboard:v}=e,h=(0,i().H)({environment:s,collectionContextStore:n,groupsPointer:[],insertAtIndex:0,shouldCoerce:u,templateStore:p,transaction:t,from:f,inMemoryRecordCache:s.defaultRecordCache.inMemoryRecordCache,isKeyboard:v});if(!h)return;const _=g??c().hH(n);a().VU({environment:s,store:h.newStore,peekMode:_,showMoveTo:m,resultsStore:void 0,collectionContextStore:n,pageVisitSource:d({blockId:o.id,collectionContextStore:n})});const b="collectionTypedView"===n.contextType?h.newStore.getAssociatedCollectionId():void 0;return r().v(s,{from:f.createBlock,type:"page",new_page_id:h.newStore.id,creating_block_id:h.newStore.id,...l().sl(n,b)}),h.newStore}},249349:(e,t,o)=>{o.d(t,{j:()=>d});o(898992),o(354520);var n=()=>o(785082),r=()=>o(878523),i=()=>o(246826),a=()=>o(372154),s=()=>o(606846),l=()=>o(94953),c=()=>o(807060);function d(e){var t,o,d;const{environment:u,commentStore:p,discussionStore:m,transaction:g,discussionLocation:f}=e;if(a().A.state.open){var v;const e=null===(v=a().A.state.discussionIds)||void 0===v?void 0:v.filter((e=>e!==m.id));a().A.setState({...a().A.state,discussionIds:e,open:((null==e?void 0:e.length)||0)>0})}i().zv({store:m,data:{resolved:!0},transaction:g}),l().A.setState({...l().A.state,discussionIds:(null===(t=l().A.state)||void 0===t||null===(t=t.discussionIds)||void 0===t?void 0:t.filter((e=>e!==m.id)))||[]});const h=n().eR.includes(f),_=null==m||null===(o=m.getParentStore())||void 0===o?void 0:o.getNavigableBlockStore(),b=m.getPropertyId(),y=m.getParentStore(),{property_type:S,collection_id:w,collection_view_id:k,view_type:I,collection_view_block_id:A}=(0,c().q)(b,y);r().MR(u,{comment_id:null==p?void 0:p.id,discussion_id:m.id,discussion_type:m.getType(),parent_block_id:m.getParentId(),resolution_type:e.resolutionType,from:e.discussionLocation,parent_collection_id:null===(d=m.getParentStore())||void 0===d?void 0:d.getParentCollectionIdUpToTwoLevels(),...h&&{inbox_session_id:s().Ay.state.sessionId,notification_page_id:null==_?void 0:_.id},property_type:S,collection_id:w,collection_view_id:k,view_type:I,collection_view_block_id:A})}},249506:(e,t,o)=>{o.d(t,{W:()=>n,c:()=>r});const n={text:!0,bulleted_list:!0,numbered_list:!0,quote:!0,to_do:!0,header:!0,sub_header:!0,sub_sub_header:!0,callout:!0,toggle:!0,table:!0,equation:!0,code:!0,file:!0,pdf:!0,image:!0},r={...n}},250064:(e,t,o)=>{o.d(t,{l:()=>i});var n=()=>o(972435);const r=(0,o(959013).YK)({twoItems:{id:"formatSettings.twoItems",defaultMessage:"{item1} and {item2}"},threeOrMoreItems:{id:"formatSettings.threeOrMoreItems",defaultMessage:"{item1}, and {numberOfOther} others"},twoItemsWithAmpersand:{id:"formatSettings.twoItems.withAmpersand",defaultMessage:"{item1} & {item2}"},threeOrMoreItemsWithRemoveComma:{id:"formatSettings.threeOrMoreItems.withRemoveComma",defaultMessage:"{item1} and {numberOfOther} others"},threeOrMoreItemsWithAmpersand:{id:"formatSettings.threeOrMoreItems.withAmpersand",defaultMessage:"{item1}, & {numberOfOther} others"},threeOrMoreItemsWithAmpersandAndRemoveComma:{id:"formatSettings.threeOrMoreItems.withAmpersandAndRemoveComma",defaultMessage:"{item1} & {numberOfOther} others"}});function i(e,t){const{removeComma:o,useAmpersand:i}=t||{};if(0===e.length)return"";const a=e[0];if(1===e.length)return a;const s=e[1];if(2===e.length)return i?n().A.formatMessage(r.twoItemsWithAmpersand,{item1:a,item2:s}):n().A.formatMessage(r.twoItems,{item1:a,item2:s});const l=e.length-1;return i?o?n().A.formatMessage(r.threeOrMoreItemsWithAmpersandAndRemoveComma,{item1:a,numberOfOther:l}):n().A.formatMessage(r.threeOrMoreItemsWithAmpersand,{item1:a,numberOfOther:l}):n().A.formatMessage(r.threeOrMoreItems,{item1:a,numberOfOther:l})}},250182:(e,t,o)=>{async function n(){const e={};if(!window.__isElectron)return{};const t=window.__desktopDeviceInfo;if(t)e.desktopOsVersion=t.os,e.desktopKernelVersion=t.kernel,e.desktopElectronVersion=t.electron,e.desktopChromiumVersion=t.chromium,e.desktopArch=t.arch,e.desktopPlatform=t.platform;else{const t=["architecture","fullVersionList","platformVersion"],n=await navigator.userAgentData.getHighEntropyValues(t);e.desktopArch="arm"===(o=n.architecture)?"arm64":o,e.desktopOsVersion=n.platformVersion,e.desktopPlatform=window.__platform;const r=navigator.userAgent.match(/Chrome\/([\d.]+)/);e.desktopChromiumVersion=r?r[1]:"Unknown";const i=navigator.userAgent.match(/Electron\/([\d.]+)/);e.desktopElectronVersion=i?i[1]:"Unknown"}var o;return e}o.r(t),o.d(t,{getDesktopDeviceInfo:()=>n})},250484:(e,t,o)=>{o.d(t,{Ay:()=>s,ZK:()=>r});var n=()=>o(245241);const r=20;let i=function(e){return e.Default="Default",e.Results="Results",e}({});class a extends(()=>o(757695))().default{constructor(){super(...arguments),this.resetQuery=e=>{let{resetFilters:t}=e;this.setState({...this.state,query:{...this.state.query,text:"",...t&&{filters:(0,n().N2)()}},limit:r,source:"quick_find_input_change"})},this.resetFilters=()=>{this.update((e=>({...e,query:{...e.query,filters:(0,n().N2)()}})))},this.updateFilters=e=>{const t=this.state.query.filters,o=(0,n().vm)(t,e);this.setState({...this.state,query:{...this.state.query,filters:o},limit:r,source:"quick_find_filters"})},this.setIsAnyPopupOpen=e=>{this.update((t=>({...t,isPopupOpen:e})))},this.expandFilterBar=()=>{this.updateFilterBarVisibilityState(!0)},this.collapseFilterBar=()=>{this.updateFilterBarVisibilityState(!1)},this.updateFilterBarVisibilityState=e=>{var t;this.update((t=>({...t,filterBar:{...t.filterBar,show:e}})));const n=null===(t=o(351360).default.state.currentUserStore)||void 0===t?void 0:t.id;n&&o(763884).A.set({userId:n,key:o(620333).lv,value:e})},this.updateQueryText=e=>{this.setState({...this.state,query:{...this.state.query,text:e},limit:r,source:"quick_find_input_change"})},this.switchToSearchPane=()=>{this.setState({...this.state,mode:"search"})}}getInitialState(){return{mode:"search",isSidePeekPanelOpen:!1,isDebugSidebarOpen:!1,query:{text:"",filters:(0,n().N2)(),sort:{field:"relevance"}},limit:r,source:"quick_find",hasScrolled:!1,filterBar:{order:["titleToggle","personFilter","teamsFilter","pageFilter","dateFilter","dev_notInPageFilter","dev_notInTeamFilter"],show:!0},isPopupOpen:!1}}updateFilterOrder(e){this.setState({...this.state,filterBar:{...this.state.filterBar,order:e}})}hasQuery(){return Boolean(this.state.query.text)}isDebugSidebarOpen(){return this.state.isDebugSidebarOpen}enableNavigationalMode(){const e=this.state.query.filters,t=(0,n().vm)(e,{navigableBlockContentOnly:!0});this.setState({...this.state,query:{...this.state.query,filters:t},source:"quick_find_navigational_mode"})}disableNavigationalMode(){const e=this.state.query.filters,t=(0,n().vm)(e,{navigableBlockContentOnly:!1});this.setState({...this.state,query:{...this.state.query,filters:t},source:"quick_find"})}}a.Mode=i;const s=new a},251057:(e,t,o)=>{o.d(t,{_w:()=>a,dK:()=>s});o(581454);var n=()=>o(588165),r=()=>o(484392),i=()=>o(534177);function a(e){const{environment:t,forTooltip:o}=e;let n;n=o?t.device.isMac?"command":"control":t.device.isMac?"⌘":"ctrl";let r,i="shift";o||(i="⇧"),r=o?t.device.isMac?"option":"alt":t.device.isMac?"⌥":"alt";let a="control";return o||(a="⌃"),{command:n,enter:"↵",delete:"del",backspace:"del",esc:"escape",left:"←",right:"→",up:"↑",down:"↓",tab:"⇥",alt:r,shift:i,ctrl:a}}function s(e){const{name:t,environment:o,onlyShowFirst:s,forTooltip:l}=e,c=function(e,t){let o=(0,n().c)(t.device,e);return Array.isArray(o)||(o=[o]),o.map((e=>e.split("+")))}(t,o),d=a({environment:o,forTooltip:l});return c.map((e=>e.map((e=>function(e){const{shortcut:t,shortcutItemMap:o}=e;let n=t;return(0,i().O)(o,t)&&(n=o[t]),(0,r().A)(n)}({shortcutItemMap:d,shortcut:e}))).join("+"))).slice(0,s?1:void 0).join(" or ")}},251126:(e,t,o)=>{o.d(t,{A:()=>d});var n=o(296540),r=()=>o(56366),i=()=>o(187174),a=()=>o(496603),s=()=>o(534177),l=o(474848);function c(e){const{performRequest:t,request:o}=e;return{request:function(e){const t=(0,n.useRef)(e);return a().n4(t.current,e)||(t.current=e),t.current}(o),performRequest:(0,n.useCallback)(t,[o])}}function d(e){const{request:t,performRequest:o,render:d,requestStore:u,debounce:p,throttle:m,interval:g,debugName:f}=e,[v,h]=function(e){const{performRequest:t,request:o,options:n}=e,{performRequest:r,request:a}=c({performRequest:t,request:o});return(0,i().Yb)((()=>r(a)),[r,a],n)}({performRequest:o,request:t,options:{debounce:p,throttle:m,interval:g,debugName:f}});(0,n.useEffect)((()=>{if(u){u.refresh=()=>h().then((()=>{}));let e={};"idle"===v.status?e={request:t,ready:!1,loading:!1}:"pending"===v.status?e={request:t,ready:!1,loading:!0}:"resolved"===v.status?e={request:t,error:void 0,result:v.value,ready:!0,loading:!1}:"rejected"===v.status?e={request:t,error:v.error,result:void 0,ready:!0,loading:!1}:(0,s().HB)(v);const o={...u.state,...e};a().n4(u.state,o)||u.setState(o)}}));const _=(0,r().K8)((()=>d(v.error,v.value,"pending"!==v.status&&"idle"!==v.status)),[d,v.error,v.value,v.status]);return(0,l.jsx)(n.Fragment,{children:void 0===_?null:_})}},252105:(e,t,o)=>{o.d(t,{$7:()=>ie,$X:()=>F,AF:()=>O,Ak:()=>ue,BK:()=>H,C3:()=>B,CK:()=>k,D5:()=>x,Ds:()=>de,Fp:()=>N,G3:()=>T,GB:()=>V,Gh:()=>pe,Gk:()=>Q,Gs:()=>E,Hh:()=>b,Hk:()=>$,Hm:()=>te,Jq:()=>j,OC:()=>z,QP:()=>J,VG:()=>C,Vq:()=>S,WB:()=>U,_M:()=>ne,_w:()=>_,ab:()=>oe,ae:()=>P,bT:()=>R,cJ:()=>I,cr:()=>q,dI:()=>D,go:()=>ae,hq:()=>se,jr:()=>ee,kU:()=>ce,m4:()=>M,o6:()=>Z,oC:()=>Y,pT:()=>G,pp:()=>X,qC:()=>L,qv:()=>A,tt:()=>K,u4:()=>me,wD:()=>y,wJ:()=>w,xF:()=>re,xN:()=>W,yF:()=>le});var n=()=>o(244641),r=()=>o(861017),i=()=>o(807487),a=()=>o(498212),s=()=>o(720665),l=()=>o(705540),c=()=>o(780054),d=()=>o(989423),u=()=>o(680074),p=()=>o(508496),m=()=>o(807778),g=()=>o(134217),f=()=>o(10984),v=()=>o(749240),h=()=>o(337240);function _(e){d().vd(e,"pricing_grid_view_end"),p().default.logEvent("pricing_grid_view_end")}function b(e,t){d().vd(e,"subscription_update_modal_open",t),p().default.logEvent("subscription_update_modal_open",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function y(e,t){d().vd(e,"subscription_update_modal_confirmation_click",{modal_id:t.modalId}),p().default.logEvent("subscription_update_modal_confirmation_click",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function S(e,t){d().vd(e,"subscription_update_modal_exit",{modal_id:t.modalId}),p().default.logEvent("subscription_update_modal_exit",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function w(e,t){d().vd(e,"subscription_update_modal_expand_billing_summary",{modal_id:t.modalId}),p().default.logEvent("subscription_update_modal_expand_billing_summary",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function k(e,t){d().vd(e,"subscription_update_modal_hide_billing_summary",{modal_id:t.modalId}),p().default.logEvent("subscription_update_modal_hide_billing_summary",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function I(e){d().vd(e,"subscription_billing_dismissed"),p().default.logEvent("subscription_billing_dismissed",void 0,{device_os:e.device.os,platform:e.device.platform})}function A(e,t){d().vd(e,"subscription_billing_opened",t),p().default.logEvent("subscription_billing_opened",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function x(e){d().vd(e,"subscription_plans_dismissed"),p().default.logEvent("subscription_plans_dismissed",void 0,{device_os:e.device.os,platform:e.device.platform})}function C(e,t){d().vd(e,"subscription_plans_opened",t),p().default.logEvent("subscription_plans_opened",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function T(e){d().vd(e,"currently_subscribed")}function M(e,t){d().u4({environment:e,event:{eventName:"subscription_upgrade_modal_present_price",eventProperties:{external_id:t.externalId}}})}function P(e,t){d().vd(e,"subscription_upgrade_modal_open",t),p().default.logEvent("subscription_upgrade_modal_open",void 0,t)}function B(e,t){const{event:o,modal_id:n,modal_type:r}=t,i={...(0,s().Om)(o),modal_id:n,modal_type:r};d().vd(e,"subscription_upgrade_modal_payment_element_changed",i),p().default.logEvent("subscription_upgrade_modal_payment_element_changed",void 0,{...i,device_os:e.device.os,platform:e.device.platform})}function R(e,t){d().vd(e,"subscription_upgrade_modal_billing_interval_updated",t),p().default.logEvent("subscription_upgrade_modal_billing_interval_updated",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function E(e,t){d().vd(e,"subscription_upgrade_modal_add_on_features_updated",t),p().default.logEvent("subscription_upgrade_modal_add_on_features_updated",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function D(e,t){d().vd(e,"subscription_upgrade_modal_upgrade_accepted",t),p().default.logEvent("subscription_upgrade_modal_upgrade_accepted",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function N(e,t){d().vd(e,"subscription_upgrade_modal_upgrade_click",t),p().default.logEvent("subscription_upgrade_modal_upgrade_click",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function L(e,t){d().vd(e,"subscription_upgrade_modal_upgrade_failed_validation",t),p().default.logEvent("subscription_upgrade_modal_upgrade_failed_validation",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function F(e,t){d().vd(e,"subscription_upgrade_onboarding_failed_validation",t)}function U(e,t){d().vd(e,"subscription_upgrade_modal_upgrade_failed_payment",t),p().default.logEvent("subscription_upgrade_modal_upgrade_failed_payment",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function O(e){d().vd(e,"subscription_upgrade_onboarding_failed_payment")}function V(e,t){d().vd(e,"subscription_upgrade_modal_upgrade_failed_payment_recovery_initiated",t),p().default.logEvent("subscription_upgrade_modal_upgrade_failed_payment_recovery_initiated",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function j(e,t){d().vd(e,"subscription_upgrade_modal_address_form_updated",t),p().default.logEvent("subscription_upgrade_modal_address_form_updated",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function z(e,t){d().vd(e,"subscription_upgrade_modal_exit",t),p().default.logEvent("subscription_upgrade_modal_exit",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function q(e,t){d().vd(e,"subscription_upgrade_modal_stripe_error",t),p().default.logEvent("subscription_upgrade_modal_stripe_error",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function H(e,t){d().u4({environment:e,event:{eventName:"create_subscription",eventProperties:t}}),p().default.logEvent("create_subscription",t.plan,t)}async function W(e,t){var o,s,f,_;const b=u().FX(),y=v().subscriptionDataStoreInstance.state?await(0,g().$)(e,t.spaceId,v().subscriptionDataStoreInstance.state):1,S=!!t.trialEndDate&&t.trialEndDate>=n().c9.now();d().vd(e,"update_subscription_tier",{from:t.from,action:t.action,old_subscription_tier:t.oldSubscriptionTier,new_subscription_tier:t.newSubscriptionTier,old_price_id:t.oldPriceId,new_price_id:t.newPriceId,old_currency:t.oldCurrency,new_currency:t.newCurrency,old_add_ons:t.oldAddOns,new_add_ons:t.newAddOns,old_billing_interval:t.oldBillingInterval,new_billing_interval:t.newBillingInterval,is_cancel_subscription:t.isCancelSubscription,is_professional_team:t.isProfessionalTeamUser,domain_type:b,space_visible_members:y,is_trial:t.isTrial,is_mid_trial:S,is_mm_or_ent_trial:t.isMmOrEnt,trial_end_date:null==t?void 0:t.trialEndDate,trial_id:null===(o=t.trialData)||void 0===o?void 0:o.id,trial_from:null===(s=t.trialData)||void 0===s?void 0:s.from,modal_id:t.modalId}),p().default.logEvent("update_subscription_tier",void 0,{from:t.from,action:t.action,old_subscription_tier:t.oldSubscriptionTier,new_subscription_tier:t.newSubscriptionTier,old_price_id:t.oldPriceId,new_price_id:t.newPriceId,old_currency:t.oldCurrency,new_currency:t.newCurrency,old_add_ons:t.oldAddOns,new_add_ons:t.newAddOns,old_billing_interval:t.oldBillingInterval,new_billing_interval:t.newBillingInterval,is_cancel_subscription:t.isCancelSubscription,space_visible_members:y,is_trial:t.isTrial,is_mid_trial:S,trial_end_date:null==t?void 0:t.trialEndDate,device_os:e.device.os,platform:e.device.platform,is_mm_or_ent_trial:t.isMmOrEnt,modal_id:t.modalId});const w=null===(f=t.oldAddOns)||void 0===f?void 0:f.includes("ai"),k=null===(_=t.newAddOns)||void 0===_?void 0:_.includes("ai");if(!w&&k&&(d().vd(e,"ai_addon_purchased",t),h().FI(e)),!t.oldSubscriptionTier||!t.newSubscriptionTier)return;const{device:I}=e;if(!(0,i()._6)(t.oldSubscriptionTier)&&(0,i()._6)(t.newSubscriptionTier)&&"personal"!==t.newSubscriptionTier){const o={country:t.addressCountry,productName:t.newPriceId,price:t.creditAmount||0,spaceId:(0,a().Xw)(t.spaceId),deviceType:I.isTablet?"tablet":I.isMobile?"mobile":"desktop",subscriptionTier:t.newSubscriptionTier};if("professional"===b&&d().vd(e,"professional_workspace_upgraded",t),d().vd(e,"workspace_upgraded",t),h().lg(e,{...o,domainType:b}),"professional"===b&&h().G0(e),"team"===t.planType&&(d().vd(e,"team_workspace_upgraded",t),h().KP(e)),e.device.isElectron&&!(0,m().Pe)()){const n=(0,r().YO)(c().A.domainBaseUrl,{deviceId:await d().TZ(e),oldSubscriptionTier:t.oldSubscriptionTier,newSubscriptionTier:t.newSubscriptionTier,isProfessionalTeamUser:t.isProfessionalTeamUser,deviceType:e.device.deviceType,domainType:b,eventData:o});return void l().openExternalUrl(n)}}}function K(e,t){d().vd(e,"subscription_update_plan",t),p().default.logEvent("subscription_update_plan",void 0,t)}function G(e,t){d().vd(e,"subscription_update_billing",t),p().default.logEvent("subscription_update_billing",void 0,t)}function $(e,t){const{firstName:o,email:n,...r}=t;d().vd(e,"enterprise_sales_contact",{...r,enterprise_name:o,enterprise_email:n}),p().default.logEvent("enterprise_sales_contact")}function Y(e,t){d().vd(e,"enterprise_sales_contact_opened",t)}function Q(e){d().u4({environment:e,event:{eventName:"enterprise_sales_contact_dismissed",eventProperties:{}}})}function Z(e,t){d().vd(e,"enterprise_sales_contact_updated",t)}function X(e,t){d().vd(e,"cancel_subscription",t),p().default.logEvent("cancel_subscription",void 0,t)}function J(e,t){d().vd(e,"click_upgrade_button",t),p().default.logEvent("click_upgrade_button",void 0,t)}function ee(e,t){d().vd(e,"plan_cta_click",t),p().default.logEvent("plan_cta_click",void 0,t)}function te(e){d().vd(e,"compare_all_features_click"),p().default.logEvent("compare_all_features_click",void 0)}function oe(e,t){d().u4({environment:e,event:{eventName:"block_limit_banner_viewed",eventProperties:t}})}function ne(e){d().WU(e,"approaching_block_limit","approaching_block_limit",60)}function re(e){const t=d().WU(e,"reach_block_limit","reach_block_limit",60);p().default.logEvent("reach_block_limit",1),t&&d().mt(e,{reach_block_limit:!0,reach_block_limit_time:Date.now(),subscription_tier:f().AI()})}function ie(e,t){d().vd(e,"add_on_update_click",t)}function ae(e,t){d().vd(e,"member_requested_ai_addon",t),p().default.logEvent("member_requested_ai_addon",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function se(e,t){d().u4({environment:e,event:{eventName:"student_ai_offer_viewed",eventProperties:t}}),p().default.logEvent("student_ai_offer_viewed",void 0,{device_os:e.device.os,platform:e.device.platform})}function le(e){d().u4({environment:e,event:{eventName:"student_ai_popup_dismissed",eventProperties:{}}}),p().default.logEvent("student_ai_popup_dismissed",void 0,{device_os:e.device.os,platform:e.device.platform})}function ce(e,t){d().vd(e,"partner_trial_signup",t),p().default.logEvent("partner_trial_signup",void 0,{...t})}function de(e){d().vd(e,"cancel_trial_button_clicked"),p().default.logEvent("cancel_trial_button_clicked",void 0)}function ue(e,t){d().u4({environment:e,event:{eventName:"onboarding_trial_offer_accepted",eventProperties:t}})}function pe(e,t,o){d().WU(e,"subscription_uncollectible_blurred_experience_displayed","subscription_uncollectible_blurred_experience_displayed",300,{is_workspace_owner:t,overdue_invoice_count:o})}function me(e,t){const o=t.name,n="args"in t?t.args:void 0;d().vd(e,o,n)}},252651:(e,t,o)=>{o.d(t,{js:()=>b,x6:()=>_});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(803949);var n=()=>o(534177),r=()=>o(310442),i=()=>o(179034),a=()=>o(824862),s=()=>o(96689),l=()=>o(296900),c=()=>o(848538),d=()=>o(854150),u=()=>o(798880);o(16280);class p{constructor(e){this.agentPointer=void 0,this.logErrorFn=void 0;const{agentPointer:t,logErrorFn:o}=e;this.agentPointer=t,this.logErrorFn=o}getActorPointer(){return this.agentPointer}getSpaceRole(e){return"none"}getTeamRole(e){return"none"}getGroupRole(e){return"none"}}function m(e){const{undecoratedGetRecordModel:t,logErrorFn:n,from:r}=e;return o(792071).b4_.fromMonomorphicFunctionUnsafe((e=>{const o=t(e);return void 0===o&&"space_user"!==e.table&&"space_bot"!==e.table&&"space_permission_group"!==e.table&&"space_permission_group_member"!==e.table&&n({from:r,type:"NecessaryRecordWasNotProvided",error:new Error(`${r} needed the following record: ${e.table}/${e.id}, but it was not provided`),data:e}),o}),t.getRecordValue)}class g{logIfUnexpectedSpace(e){this.relevantEntities.relevantSpaceIds.has(e)||this.logErrorFn({from:"BotActorMembership",type:"NonRelevantSpaceRequested",error:new Error(`Space role was requested for ${e}, which was not a pre-determined "relevant" space id`),data:{spaceId:e}})}constructor(e){this.botPointer=void 0,this.getRecordModel=void 0,this.logErrorFn=void 0,this.memoizedSpaceRoles=void 0,this.relevantEntities=void 0;const{botPointer:t,getRecordModel:o,logErrorFn:n,relevantEntities:r}=e;this.botPointer=t,this.logErrorFn=n,this.getRecordModel=m({undecoratedGetRecordModel:o,logErrorFn:n,from:"BotActorMembership"}),this.memoizedSpaceRoles={},this.relevantEntities=r}getActorPointer(){return this.botPointer}getSpaceRole(e){this.logIfUnexpectedSpace(e);const t=this.memoizedSpaceRoles[e];if(void 0!==t)return t;const o=this.getRecordModel((0,l().gZ)({botId:this.botPointer.id,spaceId:e})),n=void 0===o?"none":o.membership_type;return this.memoizedSpaceRoles[e]=n,this.memoizedSpaceRoles[e]}getTeamRole(e){return"none"}getGroupRole(e){return"none"}}o(944114),o(354520),o(737550);class f{logIfUnexpectedSpace(e){this.relevantEntities.relevantSpaceIds.has(e)||this.logErrorFn({from:"UserActorMembership",type:"NonRelevantSpaceRequested",error:new Error(`Space role was requested for ${e}, which was not a pre-determined "relevant" space id`),data:{spaceId:e}})}logIfUnexpectedTeam(e){const{teamId:t,spaceId:o}=e;[...this.relevantEntities.relevantTeamIds.values()].some((e=>e.has(t)))||this.logErrorFn({from:"UserActorMembership",type:"NonRelevantTeamRequested",error:new Error(`Team role was requested for ${t}, which was not a pre-determined "relevant" team id`),data:{teamId:t,spaceId:o}})}logIfUnexpectedGroup(e){var t;const{groupId:o,spaceId:n}=e;null!==(t=this.relevantEntities.relevantGroupIds.get(n))&&void 0!==t&&t.has(o)||this.logErrorFn({from:"UserActorMembership",type:"NonRelevantGroupRequested",error:new Error(`Group role was requested for ${o}, which was not a pre-determined "relevant" group id`),data:e})}constructor(e){this.userPointer=void 0,this.getRecordModel=void 0,this.logErrorFn=void 0,this.relevantEntities=void 0,this.memoizedSpaceRoles=void 0,this.memoizedTeamRoles=void 0,this.memoizedSpaceToGroupMembership=void 0;const{userPointer:t,getRecordModel:o,logErrorFn:n,relevantEntities:r}=e;this.userPointer=t,this.getRecordModel=m({undecoratedGetRecordModel:o,logErrorFn:n,from:"UserActorMembership"}),this.logErrorFn=n,this.relevantEntities=r,this.memoizedSpaceRoles={},this.memoizedTeamRoles={},this.memoizedSpaceToGroupMembership={}}getActorPointer(){return this.userPointer}getSpaceRole(e){this.logIfUnexpectedSpace(e);const t=this.memoizedSpaceRoles[e];if(void 0!==t)return t;const o=this.getRecordModel((0,c().i1)({userId:this.userPointer.id,spaceId:e})),n=void 0===o?"none":o.membership_type;return this.memoizedSpaceRoles[e]=n,this.memoizedSpaceRoles[e]}getTeamRole(e){const{teamId:t,spaceId:r}=e;this.logIfUnexpectedTeam({teamId:t,spaceId:r});const i=this.memoizedTeamRoles[t];if(void 0!==i)return i;const a=this.getRecordModel({table:d().yK,id:t,spaceId:r});if(void 0===a||a.getSpaceId()!==r)return this.memoizedTeamRoles[t]="none",this.memoizedTeamRoles[t];const s=this.getSpaceRole(a.getSpaceId()),l=(0,c().MN)(s);let u=[];l&&a.isDefault()&&u.push("member"),a.getRawMembership().forEach((e=>{if("user"===e.entity_type)e.user_id===this.userPointer.id&&u.push(e.type);else if("group"===e.entity_type)if("owner"===e.type||"member"===e.type){"none"!==this.getGroupRole({spaceId:a.getSpaceId(),groupId:e.group_id})&&u.push(e.type)}else(0,n().HB)(e.type);else(0,n().HB)(e)})),l||(u=u.filter((e=>"team_level_guest"===e)));const p=(0,o(468006).eF)(...u);return this.memoizedTeamRoles[t]=p,this.memoizedTeamRoles[t]}getGroupRole(e){const{groupId:t,spaceId:n}=e;this.logIfUnexpectedGroup({groupId:t,spaceId:n});const r=this.getSpaceRole(n);if(!(0,c().MN)(r))return"none";const i=this.memoizedSpaceToGroupMembership[n];if(i&&i[t])return i[t];i||(this.memoizedSpaceToGroupMembership[n]={});const a=this.getRecordModel((0,o(158009).BZ)({spacePermissionGroupId:t,userId:this.userPointer.id,spaceId:n}));return a&&a.isAlive()?this.memoizedSpaceToGroupMembership[n][t]="member":this.memoizedSpaceToGroupMembership[n][t]="none",this.memoizedSpaceToGroupMembership[n][t]}}class v{constructor(e){this.userActorMemberships=void 0,this.botActorMemberships=void 0,this.agentActorMemberships=void 0,this.logErrorFn=void 0;const{logErrorFn:t,relevantEntities:o,getRecordModel:i,actorPointers:s}=e;this.userActorMemberships={},this.botActorMemberships={},this.agentActorMemberships={},this.logErrorFn=t;for(const l of s)l.table===u().oo?this.userActorMemberships[l.id]=new f({userPointer:l,relevantEntities:o,logErrorFn:t,getRecordModel:i}):l.table===a().GP?this.botActorMemberships[l.id]=new g({botPointer:l,relevantEntities:o,logErrorFn:t,getRecordModel:i}):l.table===r().yj?this.agentActorMemberships[l.id]=new p({agentPointer:l,logErrorFn:t}):(0,n().HB)(l)}getActorMembership(e){let t;if(e.table===u().oo?t=this.userActorMemberships[e.id]:e.table===a().GP?t=this.botActorMemberships[e.id]:e.table===r().yj?t=this.agentActorMemberships[e.id]:(0,n().HB)(e),void 0===t){const t=new Error("Requested actor did not have an actor membership");this.logErrorFn({from:"ActorMemberships",type:"MissingActorMembership",error:t,data:{actorPointer:e}})}return t}*[Symbol.iterator](){yield*Object.values(this.userActorMemberships),yield*Object.values(this.botActorMemberships),yield*Object.values(this.agentActorMemberships)}}var h=()=>o(68263);function _(e){const{recordMapFromWhichToFindRelevantEntities:t,alreadyKnownRelevantEntities:o}=e,r={relevantSpaceIds:new Set,relevantTeamIds:new Map,relevantGroupIds:new Map},a=e=>{null!=o&&o.relevantSpaceIds.has(e)||r.relevantSpaceIds.add(e)},u=(e,t)=>{var n;if(null!=o&&null!==(n=o.relevantTeamIds.get(t))&&void 0!==n&&n.has(e))return;const i=r.relevantTeamIds.get(t);void 0===i?r.relevantTeamIds.set(t,new Set([e])):i.add(e)},p=(e,t)=>{var n;if(null!=o&&null!==(n=o.relevantGroupIds.get(t))&&void 0!==n&&n.has(e))return;const i=r.relevantGroupIds.get(t);void 0===i?r.relevantGroupIds.set(t,new Set([e])):i.add(e)},m=(e,t)=>{e.forEach((e=>{if((0,h().Ds)(e))p(e.group_id,t);else if((0,h().eu)(e)||(0,h().un)(e))u(e.team_id,t);else if(!((0,h().B2)(e)||(0,h().P3)(e)||!(0,h().hI)(e)||(0,h().FP)(e)||(0,h().sk)(e)||(0,h().Jx)(e)||(0,h().Lg)(e)||(0,h()._S)(e)||(0,h().ZK)(e)))throw(0,n().HB)(e)}))};for(const{pointer:n,model:g}of t)if(void 0!==n.spaceId&&a(n.spaceId),n.table===s().NX)a(n.id);else if(n.table===d().yK){if(void 0!==g){const e=g;u(n.id,e.getSpaceId()),a(e.getSpaceId()),e.getRawMembership().forEach((t=>{"group"===t.entity_type&&p(t.group_id,e.getSpaceId())}));m(e.getPermissionItems(),e.getSpaceId());const t=e.getParentPointer();t.table===s().NX&&void 0!==t.id&&a(t.id)}}else if(n.table===c().aJ){const{spaceId:e}=(0,c().SM)(n.id);a(e)}else if(n.table===l().m3){const{spaceId:e}=(0,l().bx)(n.id);a(e)}else if(n.table===i().ev&&void 0!==g){const e=g;a(e.getSpaceId()),m(e.getPermissionItems(),e.getSpaceId())}return r}function b(e){const{recordMap:t,actorPointers:o,logErrorFn:n,getRecordModelFnWithMaybeMissingRecords:r}=e,i=_({recordMapFromWhichToFindRelevantEntities:t});return new v({getRecordModel:r,actorPointers:o,logErrorFn:n,relevantEntities:i})}},252799:(e,t,o)=>{o.d(t,{e:()=>n});const n=1e3},252833:(e,t,o)=>{o.d(t,{Fe:()=>w,Ip:()=>k,Jv:()=>C,L$:()=>D,LA:()=>A,NW:()=>T,Rw:()=>N,Vz:()=>I,cb:()=>P,cd:()=>F,fH:()=>b,jg:()=>E,m0:()=>M,mE:()=>R,o7:()=>L,sP:()=>B,vT:()=>x});o(16280),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(296540);var n=()=>o(617871),r=()=>o(651124),i=()=>o(792071),a=()=>o(179034),s=()=>o(919709),l=()=>o(506391),c=()=>o(959013),d=()=>o(498212),u=()=>o(534177),p=()=>o(53137),m=()=>o(630116),g=()=>o(485634),f=()=>o(504836),v=()=>o(972435),h=()=>o(108944),_=o(474848);function b(e,t){const o=y(e),n=null==o?void 0:o.name,r=function(e,t){if(!e)return;const o=(0,l().$B)({url:e,integrations:p().A.integrations.state,currentSpaceId:t});if("success"!==o.type)return;if(!o.pattern.collectionItemType)return;switch(o.pattern.collectionItemType){case"project":return(0,_.jsx)(c().sA,{defaultMessage:"Project",id:"syncedCollectionIndicators.project.label"});case"pull_request":return(0,_.jsx)(c().sA,{defaultMessage:"Pull Requests",id:"syncedCollectionIndicators.pullRequests.label"});case"issue":return(0,_.jsx)(c().sA,{defaultMessage:"Issues",id:"syncedCollectionIndicators.issues.label"});case"calendar":return(0,_.jsx)(c().sA,{defaultMessage:"Calendar",id:"syncedCollectionIndicators.calendar.label"});case"release":return(0,_.jsx)(c().sA,{defaultMessage:"Releases",id:"syncedCollectionIndicators.releases.label"});default:(0,u().HB)(o.pattern.collectionItemType)}}(e,t);return r?n?(0,_.jsx)(c().sA,{id:"syncedCollectionIndicators.originalUrlWithIntegration",defaultMessage:"{collectionType} in {integrationName}",values:{integrationName:n,collectionType:r}}):(0,_.jsx)("span",{children:n}):(0,_.jsx)(c().sA,{defaultMessage:"Link to original url",id:"syncedCollectionIndicators.originalUrl"})}function y(e,t){if(!e)return;const o=(0,l().$B)({url:e,integrations:p().A.integrations.state,currentSpaceId:t});return"success"===o.type?o.integration:void 0}const S=(0,c().YK)({github_pull:{defaultMessage:"Oauth Pull Request",id:"syncedCollectionIndicators.oauthGithubPullRequest.label"},github_issue:{defaultMessage:"Oauth Issue",id:"syncedCollectionIndicators.oauthGithubIssue.label"},Event:{defaultMessage:"Event",id:"syncedCollectionIndicators.event.label"},figma_file:{defaultMessage:"File",id:"syncedCollectionIndicators.figmaFile.label"},google_drive_file:{defaultMessage:"File",id:"syncedCollectionIndicators.googleDriveFile.label"},zendesk_ticket:{defaultMessage:"Ticket",id:"syncedCollectionIndicators.zendeskTicket.label"},salesforce_account:{defaultMessage:"Account",id:"syncedCollectionIndicators.salesforceAccount.label"},salesforce_contact:{defaultMessage:"Contact",id:"syncedCollectionIndicators.salesforceContact.label"},salesforce_opportunity:{defaultMessage:"Opportunity",id:"syncedCollectionIndicators.salesforceOpportunity.label"},slack_channel:{defaultMessage:"Channel",id:"syncedCollectionIndicators.slackChannel.label"},slack_message:{defaultMessage:"Message",id:"syncedCollectionIndicators.slackMessage.label"}});function w(e){const{pattern:t,integration:o}=e;return`${i().Bj6.isAnyModel(o)?o.getName():o.name} ${function(e){switch(e.name){case"Event":return v().A.formatMessage(S.Event);case"figma_file":return v().A.formatMessage(S.figma_file);case"github_pull":return v().A.formatMessage(S.github_pull);case"github_issue":return v().A.formatMessage(S.github_issue);case"google_drive_file":return v().A.formatMessage(S.google_drive_file);case"zendesk_ticket":return v().A.formatMessage(S.zendesk_ticket);case"slack_channel":return v().A.formatMessage(S.slack_channel);case"slack_message":return v().A.formatMessage(S.slack_message);default:return e.name}}(t)}`}function k(e){const t=y(e);return(null==t?void 0:t.id)===n().me}function I(e,t){return t===r().uO.Jira&&e.type===r().uO.Jira?{self:e.self,accountId:e.accountId,name:e.name,displayName:e.displayName,accountType:"app",emailAddress:e.emailAddress,active:!0,notionUserId:e.notionUserId,type:r().uO.Jira}:e}function A(e){const{syncCollectionType:t,errorCode:o,intl:n}=e;return t===r().uO.Jira?(0,f().Pf)({errorCode:o}):n.formatMessage({id:"syncedCollectionUpdateError.unknownError",defaultMessage:"Failed to update"})}function x(e){const{pageId:t,propertyId:o}=e;return(0,d().gB)(`${t}:${o}`)}function C(e){const{uniquePropertyId:t}=e;g().A.setState({...g().A.getState(),syncingProperties:new Set([...g().A.getState().syncingProperties,t])})}function T(e){const t=g().A.getState().syncingProperties;t.delete(e),g().A.setState({...g().A.getState(),syncingProperties:new Set(t)})}function M(e){var t;const{transaction:o,updateOperation:n,environment:r}=e,a=null==o||null===(t=o.initialRecordMap)||void 0===t?void 0:t.getModel(n.pointer);if(!(a&&a instanceof i().zgg))return!1;const s=a.getParentPointer();if("comment"!==s.table)return!1;const l=P({transaction:o,commentPointer:s,environment:r});return!!l&&{...l,commentPointer:s}}function P(e){var t;const{commentPointer:o,environment:n}=e,r=new(m().jg)(n,o),i=null===(t=h().Nq(r))||void 0===t?void 0:t.getAssociatedCollectionStore(),a=r.getParentBlockStore();return!!(i&&a&&i.isExternallyImportedAndSyncedCollection())&&{collectionStore:i,collectionPagePointer:a.pointer}}function B(e){var t;const{transaction:o,updateOperation:n,environment:r}=e,a=null==o||null===(t=o.initialRecordMap)||void 0===t?void 0:t.getModel(n.pointer);if(!(a&&a instanceof i().zgg&&a.isInsideCollection()))return!1;const s=a.getParentPointer(),l=new(m().md)(r,{id:s.id,table:"collection"});return!(null==l||!l.isExternallyImportedAndSyncedCollection())&&l}function R(e){const{updateOperation:t,transaction:o,collectionStore:n,collectionPagePointer:r}=e,i=JSON.stringify(t.args);if(!i)throw new Error("Could not extract comment content from update operation");const a=n.getFormat().external_collection_type;if(!a)throw new Error("Collection is not an external synced collection");return{syncType:a,syncCollectionUpdates:[{commentData:i,collectionPagePointer:r,updateType:"CREATE_COMMENT",notionCommentId:t.pointer.id,numberOfAttachments:o.operations.filter((e=>{var t;return"set"===e.command&&"embed"===(null===(t=e.args)||void 0===t?void 0:t.type)})).length}],spaceId:o.spaceId}}function E(e){const{updateOperation:t,transaction:o,collectionStore:n}=e,r=function(e,t){var o,n,r;if(2!==e.path.length)return;const i=e.path[1].toString();switch(e.command){case"set":if("person"===(null===(o=t[i])||void 0===o?void 0:o.type)&&Array.isArray(e.args)&&1===e.args.length){var a;const t=null===(a=e.args[0])||void 0===a||null===(a=a[1])||void 0===a?void 0:a[0];return s().rie(t)?{propertyId:i,propertyUpdatedValue:{type:"person",value:s().NcG(t)}}:void 0}return{propertyId:i,propertyUpdatedValue:{type:"text",value:s().q4_(e.args)}};case"addPersonAfter":return{propertyId:i,propertyUpdatedValue:{type:"person",value:"me"===(null===(n=e.args)||void 0===n?void 0:n.pointer)?"me":null===(r=e.args)||void 0===r?void 0:r.pointer.id}};case"removePerson":return{propertyId:i,propertyUpdatedValue:{type:"person",value:void 0}};default:return}}(t,n.getSchema());if(!r)throw new Error("Unsupported update for synced collection");const{propertyId:i,propertyUpdatedValue:l}=r,c=n.getFormat().external_collection_type;if(!c)throw new Error("Collection is not an external synced collection");return{syncType:c,syncCollectionUpdates:[{propertyId:i,propertyUpdatedValue:l,updateType:"UPDATE_PROPERTY",collectionPagePointer:{table:a().ev,id:t.pointer.id,spaceId:t.pointer.spaceId}}],spaceId:o.spaceId}}function D(e){const{commentId:t}=e;g().A.setState({...g().A.getState(),syncingComments:new Set([...g().A.getState().syncingComments,t])})}function N(e){const t=g().A.getState().syncingComments;t.delete(e),g().A.setState({...g().A.getState(),syncingComments:new Set(t)})}function L(e){return g().A.getState().syncingComments.has(e)}function F(e){return"Jira"===e&&(0,f().CS)()}},253021:(e,t,o)=>{o.d(t,{LQ:()=>l,dI:()=>s});var n=()=>o(597777),r=()=>o(763884);function i(e){return`CalendarView:${e}`}function a(e){const{collectionViewId:t,currentUserId:o}=e;return r().A.get({userId:o,key:i(t)})}function s(e){var t;const{collectionViewId:o,currentUserId:n}=e;return(null===(t=a({collectionViewId:o,currentUserId:n}))||void 0===t?void 0:t.dateRangeStart)||Date.now()}function l(e){const{newCalendarStart:t,newCalendarEnd:o,collectionViewId:s,currentUserId:l="0"}=e;(0,n().dV)(t,o,Date.now())?function(e){const{collectionViewId:t,currentUserId:o}=e,n=i(t);r().A.remove({userId:o,key:n})}({collectionViewId:s,currentUserId:l}):function(e){const{collectionViewId:t,dateRangeStart:o,currentUserId:n}=e,s=i(t),l={...a({collectionViewId:t,currentUserId:n})||{},dateRangeStart:o};r().A.set({userId:n,key:s,value:l})}({collectionViewId:s,currentUserId:l,dateRangeStart:t})}},253579:(e,t,o)=>{o.d(t,{Rp:()=>a,iX:()=>u,m5:()=>c,oM:()=>i,pM:()=>l,rW:()=>s,u2:()=>d});var n=()=>o(38337),r=()=>o(713972);function i(e){const{menuElement:t,clickedElement:o}=e;return t!==o&&!t.contains(o)&&(!o.classList.contains("notion-link")&&!(o.closest(`.${n().MUV}`)&&!o.closest(`.${n().Hfz}`)&&!o.closest(`.${n().uMd}`)&&!o.closest(`.${n().LvP}`)))}function a(e){if((0,r().EV)(e,(e=>e.classList&&(e.classList.contains(n().Hfz)||e.classList.contains(n().uMd)||e.classList.contains(n().LvP)||e.classList.contains(n().sux)||e.classList.contains(n().HA4)||e.classList.contains(n().z$c)))))return!1;const t=(0,r().EV)(e,(e=>e.classList&&e.classList.contains(n().MUV)));return Boolean(t)}function s(e){const t=(0,r().EV)(e,(e=>e.classList&&e.classList.contains(n().N11)));return Boolean(t)}function l(e){const t=(0,r().EV)(e,(e=>e.classList&&e.classList.contains(n().xeF)));return Boolean(t)}function c(e){const t=(0,r().EV)(e,(e=>e.classList&&e.classList.contains(n().mJp)));return Boolean(t)}function d(e){const t=(0,r().EV)(e,(e=>e.classList&&e.classList.contains(n().Jnf)));return Boolean(t)}function u(e){const t=(0,r().EV)(e,(e=>e.classList&&e.classList.contains(n().kew)));return Boolean(t)}},254452:(e,t,o)=>{o.d(t,{z:()=>s});o(296540);var n=()=>o(236262),r=()=>o(878377),i=()=>o(416726),a=o(474848);const s=(0,i().Fw)({key:"delete block",displayName:i().AY.deleteName,analyticsName:i().AY.deleteName.defaultMessage,svg:n().I,validators:[r().or([r().Uo6([r().VjU,r().ecY]),r().Uo6([r().or([r().SvZ,r().AVO]),r().AU6(r().xqI)])]),r().or([r().p2L,r().AVO]),r().AU6(r().Uo6([r()._fc,r().AVO])),r().AU6(r().vEP),r().AU6(r().jfA),r().AU6(r().P$I),r().AU6(r().Xjv(o(700500).xd.externalObjectInstancePage)),r().AU6(r().PfK),r().zrb],shortcuts:["delete","backspace"],closeParentMenu:!0,render:(e,t,r)=>{let{styles:s}=r;return(0,a.jsx)(o(575143).A,{...e,...s,isRed:!0,svg:n().I,title:(0,a.jsx)(o(959013).sA,{...i().AY.deleteName}),shortcut:"delete"})},track:{actionName:"delete"},action:async(e,t,n)=>{let{blocks:r,environment:i}=t;await o(797265).Af({environment:i,blocks:r,shouldCheckSuggestEdit:!0,callback:e})}})},254497:(e,t,o)=>{o.d(t,{E:()=>i});var n=()=>o(246826),r=()=>o(630116);function i(e){const{collectionStore:t,update:o,transaction:i}=e;n().zv({store:(0,r()._y)(t,t.pointer,["deleted_schema"]),data:o,transaction:i})}},255460:(e,t,o)=>{o.d(t,{Cf:()=>m,NH:()=>h,YW:()=>g});o(898992),o(354520),o(672577),o(581454);var n=()=>o(179034),r=()=>o(496603),i=()=>o(748197),a=()=>o(108944),s=()=>o(744705),l=()=>o(494043),c=()=>o(351360),d=()=>o(630116),u=()=>o(90302),p=()=>o(324089);function m(e){const t=e.state;return"page"===t.route.name&&t.route.scrollToBlockId?[t.route.scrollToBlockId]:t.historyState?t.historyState.blockIds:[]}function g(e,t){const o=function(e,t){const o=t.map((t=>d().Bv.createChildStore(e,{table:n().ev,id:t}))).map((e=>a().g7(e))).filter((t=>{let o=!1;const n=t.slice(1).find((e=>{if("block"===e.table)return e.isTransclusionType()&&(o=!0),e.isNavigableBlock()}));return n&&(n.id===e.id||o)})).map((e=>{const t=e.findIndex((e=>"block"===e.table&&e.isNavigableBlock()));return e.slice(1,t).filter((e=>"block"===e.table&&(0,l().BN)(e)))}));return r().hS(r().Bq(o),(e=>e.id))}(e,t);for(const n of o)p().xT({blockId:n.id,state:!0,currentUserId:n.environment.currentUser.id});return o}function f(e,t){const o=function(e,t){const o=t.map((t=>d().Bv.createChildStore(e,{table:n().ev,id:t,spaceId:e.pointer.spaceId}))).map((e=>a().g7(e))).filter((t=>{const o=t.slice(1).find((e=>"block"===e.table&&e.isNavigableBlock()));return o&&o.id===e.id})).map((e=>{const t=e.findIndex((e=>"block"===e.table&&e.isNavigableBlock()));return e.slice(1,t).filter((e=>{if("block"!==e.table)return!1;const t=e.getParentStore();return"block"===(null==t?void 0:t.table)&&"tab"===(null==t?void 0:t.getType())}))}));return r().hS(r().Bq(o),(e=>e.id))}(e,t);for(const r of o){const e=r.getParentStore();var i;if((null==e?void 0:e.table)===n().ev&&"tab"===(null==e?void 0:e.getType()))u().cN({store:e,id:r.id,currentUserId:null===(i=c().default.state.currentUserStore)||void 0===i?void 0:i.id})}return o}function v(e,t){const o=function(e,t){const o=t.map((t=>d().Bv.createChildStore(e,{table:n().ev,id:t,spaceId:e.pointer.spaceId}))).map((e=>a().g7(e))).filter((t=>{const o=t.slice(1).find((e=>"block"===e.table&&e.isNavigableBlock()));return o&&o.id===e.id})).map((e=>{const t=e.findIndex((e=>"block"===e.table&&e.isNavigableBlock()));return e.slice(1,t).filter((e=>{if("block"!==e.table)return!1;const t=e.getParentStore();return"block"===(null==t?void 0:t.table)&&"transcription"===(null==t?void 0:t.getType())}))}));return r().hS(r().Bq(o),(e=>e.id)).filter((e=>"block"===e.table))}(e,t);for(const r of o){const e=r.getParentStore();(null==e?void 0:e.table)===n().ev&&"transcription"===(null==e?void 0:e.getType())&&i().c.setTabState(e.id,r.id)}return o}async function h(e,t){await async function(e,t){const o=t.map((t=>d().Bv.createChildStore(e,{table:n().ev,id:t})));await Promise.all(o.map((e=>a().nR(e))))}(e,t);const o=r().hS([...g(e,t),...f(e,t),...v(e,t)],(e=>e.id));await async function(e){await Promise.all(e.map((e=>s().o(e))))}(o)}},256754:(e,t,o)=>{o.d(t,{I:()=>n});const n=(0,o(340498).xh)("arrowUpCircleFill",{default:{loader:()=>o.e(81917).then(o.bind(o,681917))},small:{loader:()=>o.e(49951).then(o.bind(o,849951))},mini:{loader:()=>o.e(31857).then(o.bind(o,631857))},large:{loader:()=>o.e(72791).then(o.bind(o,472791))}})},257120:(e,t,o)=>{o.d(t,{A:()=>b});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454),o(737550);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(965998),s=()=>o(880922),l=o(474848);const c=(0,o(340498).wt)("suggestionDiscussionCombo",{viewBox:"0 0 14 13",svg:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{fillRule:"evenodd",d:"M1.427 7.748c.314.172.674.259 1.081.259h.43V6.963H2.66c-.366 0-.64-.091-.822-.273-.179-.184-.268-.457-.268-.817V2.524c0-.36.09-.631.268-.813.182-.184.456-.276.822-.276h5.682c.363 0 .634.092.813.276.18.18.27.447.272.8h1.127V2.37c0-.446-.087-.83-.26-1.152a1.753 1.753 0 00-.738-.742C9.235.299 8.85.21 8.401.21H2.583c-.448 0-.833.088-1.156.264-.32.172-.565.42-.738.742-.173.323-.26.706-.26 1.152v3.48c0 .445.089.83.264 1.151.18.323.424.572.734.748z",clipRule:"evenodd"}),(0,l.jsx)("path",{d:"M6.492 12.557c-.217 0-.387-.07-.51-.207-.123-.138-.185-.327-.185-.567v-.975h-.28c-.408 0-.768-.087-1.082-.26a1.895 1.895 0 01-.734-.747c-.176-.322-.264-.706-.264-1.151V5.17c0-.446.087-.83.26-1.152.173-.322.419-.57.738-.743.322-.175.708-.263 1.156-.263h5.818c.448 0 .834.088 1.156.263.322.173.568.42.738.743.173.322.26.706.26 1.151v3.48c0 .446-.087.83-.26 1.152a1.78 1.78 0 01-.738.747c-.322.173-.708.26-1.156.26H8.882l-1.485 1.3a2.497 2.497 0 01-.479.343.91.91 0 01-.426.106zm.272-1.257L8.14 9.946a.938.938 0 01.294-.215.96.96 0 01.365-.057h2.544c.364 0 .634-.091.813-.273.182-.184.273-.457.273-.817V5.235c0-.36-.091-.631-.273-.813-.179-.184-.45-.276-.813-.276H5.661c-.366 0-.64.092-.822.276-.178.182-.268.453-.268.813v3.349c0 .36.09.633.268.817.182.182.456.273.822.273h.699c.132 0 .231.03.299.092.07.062.105.166.105.312V11.3zm-.343-3.696a.685.685 0 01-.496-.202.68.68 0 01-.202-.492.67.67 0 01.202-.493.677.677 0 01.496-.206c.194 0 .358.069.493.206a.67.67 0 01.202.493.68.68 0 01-.202.492.67.67 0 01-.493.202zm2.083 0a.685.685 0 01-.496-.202.68.68 0 01-.202-.492.67.67 0 01.202-.493.677.677 0 01.496-.206c.194 0 .358.069.493.206a.663.663 0 01.206.493c0 .19-.069.354-.206.492a.67.67 0 01-.493.202zm2.083 0a.68.68 0 01-.492-.202.68.68 0 01-.202-.492.67.67 0 01.202-.493.672.672 0 01.492-.206c.194 0 .358.069.493.206a.663.663 0 01.206.493c0 .19-.069.354-.206.492a.67.67 0 01-.493.202z"})]})});var d=()=>o(112873),u=()=>o(778417),p=()=>o(186445),m=()=>o(299545),g=()=>o(351360),f=()=>o(372154),v=()=>o(938045),h=()=>o(555776),_=()=>o(116008);function b(e){const t=(0,r().v3)(),{store:o,recursivelyLoadAllDiscussions:l,onlyCountBlockLevelDiscussions:b,propertyId:y}=e,S=(0,i().K8)((()=>{const e=_().A.state.open?_().A.state.blockId:null;return!!l&&(0,m().zo)({blockStore:o,transclusionReferences:"recurseInto",childPages:"omit"}).some((t=>t.id===e))}),[o,l]),w=(0,i().K8)((()=>_().A.state.open&&_().A.state.blockId===o.id&&"comment"===_().A.state.content&&(!_().A.state.property_id||_().A.state.property_id===y)),[y,o.id]),k=(0,i().K8)((()=>_().A.getDiscussionInputStore()),[]),I=w||S,A=(0,i().K8)((()=>{const e=m().O3(o,{recursivelyLoadAllDiscussions:l,onlyIncludeBlockLevelDiscussions:b,onlyIncludePropertyDiscussions:Boolean(y)}).filter((e=>e.getPropertyId()===y));if(0===e.length)return{commentsCount:0,numberOfReactions:0,discussionIsSelected:I&&h().A.state.isActivelyComposing,hasSuggestionDiscussions:!1,hasDefaultDiscussions:!1};const t=new Set(e.map((e=>e.id))),n=f().A.getFramePageFirstSelectedDiscussionId(),r=Boolean(n&&t.has(n)),i=p().ZO();if(i){const e=m().zo({blockStore:i,transclusionReferences:"recurseInto",childPages:"omit"}),n=e.indexOf(o),r=new Set(t);for(let o=n-1;o>=0;o--){const n=e[o],i=m().O3(n,{recursivelyLoadAllDiscussions:!1,excludeSelf:!1,onlyIncludeBlockLevelDiscussions:!1,includeLoadingDiscussions:!0}).map((e=>e.id));for(const e of r)i.includes(e)?t.delete(e):r.delete(e);if(0===t.size)return{commentsCount:0,numberOfReactions:0,discussionIsSelected:!1,hasSuggestionDiscussions:!1,hasDefaultDiscussions:!1};if(0===r.size)break}}const{comments:a,reactions:s,hasSuggestionDiscussions:c,hasDefaultDiscussions:d}=m().qE(o,{recursivelyLoadAllDiscussions:l,onlyIncludeBlockLevelDiscussions:b,onlyIncludePropertyDiscussions:Boolean(y)},y);return{commentsCount:a,numberOfReactions:s,discussionIsSelected:r,hasSuggestionDiscussions:c,hasDefaultDiscussions:d}}),[b,y,l,I,o]),{commentsCount:x,numberOfReactions:C,hasSuggestionDiscussions:T,hasDefaultDiscussions:M}=A,P=(0,n.useCallback)((()=>{if(f().A.state.open)d().xl();else if(u().IU({preventDismissMobileKeyboard:!0,environment:t}),I){if(x>0)h().A.setActiveWithSource("popover_comments"),h().A.setState({...h().A.state,overlapsExistingDiscussionMenu:!0}),d().B4({environment:t,blockStore:e.store,analyticsFrom:"discussion_indicator",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:e.recursivelyLoadAllDiscussions,property_id:e.propertyId});else if(k){const e=g().default.state.mainEditorCurrentBlockStore;(0,v().x)({currentBlockStore:e,discussionInputStore:k,environment:t})}}else d().B4({environment:t,blockStore:e.store,analyticsFrom:"discussion_indicator",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:e.recursivelyLoadAllDiscussions,property_id:e.propertyId})}),[t,I,x,k,e.store,e.recursivelyLoadAllDiscussions,e.propertyId]),B=x>0||C>0||I,R=C>9?"9+":`${C}`,E=T&&!M,D=E?s().A:T&&M?c:a().M,N=x+(I?1:0);return{showIndicator:B,formattedReactionCount:R,onlySuggestions:E,icon:D,showReactionsIcon:C>0&&!I&&0===x,onlyHasDraftIndicator:I&&0===x,commentCountWithDraft:N,formattedCommentCount:N>9?"9+":`${N}`,handleClick:P,discussionIsSelected:A.discussionIsSelected,commentsCount:x,shouldShowDraftIndicator:I}}},257216:(e,t,o)=>{o.d(t,{Bu:()=>v,Zd:()=>f,bn:()=>g});var n=()=>o(212547),r=()=>o(199378),i=()=>o(179034),a=()=>o(519831),s=()=>o(343666),l=()=>o(123382),c=()=>o(96689),d=()=>o(84520),u=()=>o(854150),p=()=>o(294712),m=()=>o(246826);function g(e){const{childStore:t,parentStore:o,transaction:n}=e,r=t.getRecordStoreAtRootPath().getValue();if(r){const{parent_id:i,parent_table:a,alive:s}=r;i===o.id&&a===o.table&&s===e.alive||m().zv({store:t,data:{parent_id:o.id,parent_table:o.table,alive:e.alive},transaction:n})}}function f(e){if((0,n().rt)(e.childStore.table)){const t=e.childStore;return function(e){const{childStore:t,parentStore:o,transaction:n}=e,m=t.getRecordStoreUIParent();if(o.table===c().NX&&t.table===i().ev||o.table===u().yK&&t.table===i().ev||o.table===p().GD&&t.table===d().mu||o.table===r().SC&&t.table===i().ev||o.table===l().MC&&t.table===i().ev)g({childStore:t,parentStore:o,alive:!0,transaction:n});else if(o.table===d().mu&&o.path&&"private_pages"===o.path[0]&&t.table===i().ev){const e=o.getRecordStoreUIParent().getSpaceStore();e&&g({childStore:t,parentStore:e,alive:!0,transaction:n})}else o.table===i().ev&&m&&m.table===d().mu&&m.path&&"private_pages"===m.path[0]?g({childStore:t,parentStore:o,alive:!0,transaction:n}):o.table!==i().ev&&o.table!==a().Vl&&o.table!==s().SN||g({childStore:t,parentStore:o,alive:!0,transaction:n})}({...e,childStore:t})}{const{childStore:t,parentStore:o,transaction:n}=e,{parent_id:r,parent_table:i}=t.getValue()||{};r===o.id&&i===o.table||m().zv({store:t,data:{parent_id:o.id,parent_table:o.table},transaction:n})}}function v(e){const{childStore:t,parentStore:o,transaction:n}=e,{parent_id:r,parent_table:i,alive:a}=t.getValue()||{},s=o.table===d().mu&&o.path&&"private_pages"===o.path[0]&&a,l=r===o.id&&i===o.table&&a;(s||l)&&m().zv({store:t,data:{alive:!1},transaction:n})}},257615:(e,t,o)=>{o.d(t,{K1:()=>h,OG:()=>_,jD:()=>v});o(944114),o(898992),o(354520),o(672577),o(581454);var n=()=>o(496603),r=()=>o(404779),i=()=>o(728611),a=()=>o(281322),s=()=>o(953418),l=()=>o(695625),c=()=>o(919878),d=()=>o(397248),u=()=>o(661179),p=()=>o(93658),m=()=>o(666710),g=()=>o(502438),f=()=>o(778417);function v(e){const{environment:t,target:o,startX:n,startY:d,showSelectionRect:m,preventSelectStores:v,allowVerticalEdgeScroll:_,allowHorizontalEdgeScroll:b}=e,y=g().default.getDefaultContainerFromTarget(o);if(!y)return;if(n>=window.innerWidth-u().A.state)return;if(d>=window.innerHeight-u().A.state)return;const S=s().NM(o),w=s().T8(o),k=l().T.getMembersByDOMOrder({filter:e=>e.getContextSelectableContainer()===y}),I=()=>{p().default.state.isActive&&(f().sf(),h({environment:t,currentX:p().default.state.currentX,currentY:p().default.state.currentY,toggle:a().r().shift}))};S&&i().P4(S,"scroll",I),w&&i().P4(w,"scroll",I),p().default.setState({moved:!1,isActive:!0,startX:n,startY:d,currentX:n,currentY:d,currentRect:void 0,defaultContainer:y,startSelection:g().default.state.stores,startSelectables:k,verticalScrollerEl:S,horizontalScrollerEl:w,startScrollTop:S?S.scrollTop:0,startScrollLeft:w?w.scrollLeft:0,showSelectionRect:m,handleScroll:I,preventSelectStores:v,allowVerticalEdgeScroll:_,allowHorizontalEdgeScroll:b}),f().IU({environment:t}),(0,r().y)(),c().wr()}function h(e){const{environment:t}=e,o=p().default.state;if(o.isActive){const{currentX:r,currentY:i,verticalScrollerEl:a,horizontalScrollerEl:s,startScrollTop:l,startScrollLeft:c,preventSelectStores:u}=o;let g=o.startY;if(a){g-=a.scrollTop-l}let v=o.startX;if(s){v-=s.scrollLeft-c}const h={top:Math.min(g,i),bottom:Math.max(g,i),left:Math.min(v,r),right:Math.max(v,r)},_=m().default.state.selectableRectMap,y=function(e){const t=new Map,o={root:!0};for(const n of e){const e=b(n)||o;t.get(e)||t.set(e,[]),t.get(e).push(n)}return Array.from(t.values())}(o.startSelectables.filter((e=>{const t=_.get(e),n=e.props.store;return e.props.canSelect&&t&&d().HY(h,t)&&u.indexOf(n)<0&&(!o.showSelectionRect||n.isTransclusionType()||!n.isInsideTransclusion())})));let S=[];const w=y.find((e=>e.length>1));if(w)S=w;else{const e=n().HV(y);e&&(S=e)}let k=S.map((e=>e.props.store));if(e.toggle)for(const e of o.startSelection)n().mK(k,e)?k=n().FF(k,e):k.push(e);p().default.setState({...o,moved:!0,currentX:e.currentX,currentY:e.currentY,currentRect:h}),f().td({environment:t,stores:k})}}function _(e){const t=p().default.state;if(t.isActive){const{moved:o,verticalScrollerEl:n,horizontalScrollerEl:r,handleScroll:a}=t;o||f().IU({environment:e}),n&&i().Ol(n,"scroll",a),r&&i().Ol(r,"scroll",a),p().default.setState({isActive:!1})}}function b(e){if(e)for(;;){if(!(e=e.getContextClosestSelectable()))return;if(e.props.canSelect)return e}}},258035:(e,t,o)=>{o.d(t,{CO:()=>K,L5:()=>C,ph:()=>x});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(430670),o(803949),o(581454),o(737550);var n=()=>o(496603),r=()=>o(720665),i=()=>o(700500),a=()=>o(970013),s=()=>o(713998),l=()=>o(175482),c=()=>o(498140),d=()=>o(651124),u=()=>o(857639),p=()=>o(384813),m=()=>o(416845),g=()=>o(997769),f=()=>o(792071),v=()=>o(72135),h=()=>o(134025),_=()=>o(179034),b=()=>o(519831),y=()=>o(869558),S=()=>o(919709);const w="PartialMatch",k="FullMatch",I="ColumnCategory",A=(0,o(959013).YK)({titleColumnName:{id:"database.titleColumn.name",defaultMessage:"Title"},genericColumnName:{id:"database.genericColumn.name",defaultMessage:"Column {columnNumber}"}});function x(e){const{table:t,deps:{intl:o,randomShortID:r,isPhoneNumber:c},options:{useCsvAdaptiveSchema:g,addHeadersToCollectionEnabled:v}}=e,x=function(e,t,o,r){var i;let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;e=e.filter((e=>e.some((e=>Boolean((e.text||"").trim())))));const d=e.length>0?e[0].length:0,p=e.map(((e,t)=>({row:e,rowIndex:t}))).filter((e=>{let{row:t}=e;return t.length!==d}));if(p.length>0){const e=p[0];throw new(m().yI)("CsvImportError",{data:{},clientData:{type:"csv_import_inconsistent_columns",messageValues:{numTitleColumns:d,numBadRows:p.length,firstBadRowIndex:e.rowIndex+1,firstBadRow:JSON.stringify(e.row.map((e=>e.text))),firstBadRowLength:e.row.length}}})}const g=null===(i=e[0])||void 0===i?void 0:i.length;null==l||l.set(I,function(e){return e<50?"lessthan50":e<100?"lessthan100":e<500?"lessthan500":e<1e3?"lessthan1000":e<5e3?"lessthan5000":"greaterthan5000"}(g));let f=[];1===e.length||c?f=e[0].map(((e,o)=>t.formatMessage(A.genericColumnName,{columnNumber:o+1}))):e.length>1&&(f=e[0].map((e=>e.text)),e.shift());const v=e,h=function(e){return[{test:j.bind(null,e),sampledSchemaIsComplete:!0},{test:E,sampledSchemaIsComplete:!0},{test:F,sampledSchemaIsComplete:!0},{test:O,sampledSchemaIsComplete:!0},{test:N,sampledSchemaIsComplete:!0},{test:R,sampledSchemaIsComplete:!1},{test:z,sampledSchemaIsComplete:!1},{test:H,sampledSchemaIsComplete:!1},{test:W,sampledSchemaIsComplete:!0}]}(r),_=performance.now(),b=n().oE(n().sn(v).map((e=>e.length&&e[0].columnType?e[0].columnType:function(e,t,o,r,i,a){const s=t.filter((e=>Boolean(e)));if(0===s.length)return W(e,s);if(i){const n=s.length>1e3?function(e,t){const o=e.length,n=[];for(let r=0;r<t;r++){const t=Math.floor(Math.random()*o);n.push(e[t])}return n}(s,1e3):s;for(const i of r){const r=i.test(e,n,o);if(r){let o=r;if(!1===r.isFullMatch){u().log({level:"info",from:"csvHelper",type:"csvColumnTypes",data:{message:"Partial column type match detected, setting data type as string",columnType:r.schema.type,matchType:"Partial"}}),o=W(e,t);const n=(null==a?void 0:a.get(w))||0;null==a||a.set(w,n+1)}else u().log({level:"info",from:"csvHelper",type:"csvColumnTypes",data:{message:"Complete column type match detected",columnType:r.schema.type,matchType:"Full"}});const n=(null==a?void 0:a.get(k))||0;return null==a||a.set(k,n+1),o}}}else{const t=s.filter((e=>!n().Im(e))).slice(0,100);for(const n of r){const r=n.test(e,t,o);if(r){const i=n.sampledSchemaIsComplete||t.length===s.length?r:n.test(e,s,o);if(i){if(!1===i.isFullMatch){u().log({level:"info",from:"csvHelper",type:"csvColumnTypes",data:{message:"Partial column type match detected, Potential data loss due to parsing failures",columnType:i.schema.type,matchType:"Partial"}});const e=(null==a?void 0:a.get(w))||0;null==a||a.set(w,e+1)}else{const e=(null==a?void 0:a.get(k))||0;null==a||a.set(k,e+1)}return i}}}}return W(e,[])}(t,e.map((e=>null==e?void 0:e.text)),o,h,a,l)))),y=performance.now()-_;null==l||l.set("columnTypeInferenceTimeTakenMS",y);const x=f.map((()=>!1));for(let n=0;n<f.length;n++)if("text"===b[n].schema.type)for(let e=0;e<v.length;e++){const t=v[e][n].textValue;if(t)for(const o of t)if(S().BEe(o)){x[n]=!0,e=v.length;break}}let C=!0;const T={title:{type:"title",name:t.formatMessage(A.titleColumnName)}};f.forEach(((e,t)=>{const n=b[t];if(n)if("text"===n.schema.type&&C&&!x[t]){C=!1,n.id="title",n.schema={type:"title",name:e};const t=T.title;t&&(t.name=e)}else{const t=o();n.id=t,T[t]={name:e,...n.schema}}}));const M=v.map((e=>{const t={};return b.forEach(((o,n)=>{if(o){const{id:r,schema:i,coerce:a}=o,{type:l}=i;if(r){const o=e[n]||"";t[r]="url"===l?s().jw(o.text):"date"===l?s().m5(a(o.text)):"text"===l?o.textValue||S().x9d(a(o.text)):"file"===l?o.textValue||[]:S().x9d(a(o.text))}}})),t}));return{schema:T,types:b,pages:M}}(t,o,r,c,g,e.csvEvalContext,v);return function(e){const{actor:t,blockType:o,root:r,parent:s,name:c,format:u,deps:{randomID:m,spaceIdCreator:g,addFileIdsToBlock:v,createCollectionAsyncWithStatusLabel:w},options:{ignoreBlockCount:k,useCrdt:I},pages:A,schema:x,columnIds:C}=e,T=e.collectionId??(null==g?void 0:g.idInSavedSpace(b().Vl))??m(),M=e.collectionViewId??(null==g?void 0:g.idInSavedSpace(y().Gy))??m(),P=[],B=[],R=[],{operations:E}=f().WBy.create({id:T,parent:r.existing?r.record.pointer:{id:r.id,table:_().ev,spaceId:s.spaceId},space_id:s.spaceId,name:S().x9d(c),schema:x,format:{collection_page_properties:n().oE(C.map((e=>{if(e)return{visible:!0,property:e}}))),...w&&{sync_state:{syncing:!0,last_synced_at:Date.now()},static_import_collection_type:d().IE.CsvImport}}});P.push(...E);const D=r.existing?r.record.id:r.id,{model:N,operations:L}=f().zgg.create({id:D,type:o,collection_id:T,format:{collection_pointer:{table:b().Vl,id:T,spaceId:s.spaceId}},view_ids:[M],createdBy:t,parent:s,space_id:s.spaceId},{useCrdt:I});r.existing?P.push(...l().mP({existingBlock:r.record,updatedBlock:N})):P.push(...L);if(w){const{operations:e}=f().lqf.create({id:M,type:"table",name:"Show All",parent:r.existing?r.record.pointer:{id:r.id,table:_().ev,spaceId:s.spaceId},space_id:s.spaceId,format:{table_properties:n().oE(C.map((e=>{if(e)return{visible:!0,property:e}}))),...u},createdBy:t});P.push(...e)}const F=function(e){const{actor:t,collectionId:o,spaceId:n,pages:r,randomID:a,spaceIdCreator:s,options:l}=e;return r.map((r=>{const c=(null==s?void 0:s.idInSavedSpace(_().ev))??a(),{model:d,operations:u}=f().zgg.create({id:c,parent:{id:o,table:b().Vl,spaceId:n},space_id:n,type:i().xd.page,createdBy:t,properties:r,...l.ignoreBlockCount?{ignore_block_count:!0}:void 0},{useCrdt:l.useCrdt}),m=[...u];if(e.addFileIdsToBlock){const e=(0,p().h7)(d,"","").fileIds;e.length>0&&m.push(h().op.update({pointer:d.pointer,path:[],args:{file_ids:e.map((e=>e.id))}}))}return{id:c,operations:m}}))}({actor:t,collectionId:T,addFileIdsToBlock:v,spaceId:s.spaceId,pages:A,randomID:m,spaceIdCreator:g,options:{useCrdt:I,ignoreBlockCount:k}});for(const{operations:n}of F)B.push(...n);const{operations:U}=f().lqf.create({id:M,type:"table",name:"Show All",parent:r.existing?r.record.pointer:{id:r.id,table:_().ev,spaceId:s.spaceId},space_id:s.spaceId,format:{table_properties:n().oE(C.map((e=>{if(e)return{visible:!0,property:e}}))),...u},page_sort:F.map((e=>e.id)).slice(0,a().WF),createdBy:t});if(B.push(...U),w){const e={table:b().Vl,id:T,spaceId:s.spaceId},t=h().op.update({pointer:e,path:["format","sync_state"],args:{syncing:!1,last_synced_at:Date.now()}});return R.push(t),{operations:B,createCollectionOperations:P,collectionFinishedOperations:R}}return{operations:[...P,...B]}}({...x,columnIds:x.types.map((e=>e.id)),...e})}function C(e){const{table:t,actor:o,parent:n,tableId:a,deps:{randomID:s,spaceIdCreator:l,randomShortID:c},options:{useCrdt:d,ignoreBlockCount:u}}=e,p=[],m=t.length?t[0].map((e=>c())):[],g=t.map((e=>(null==l?void 0:l.idInSavedSpace(_().ev))??s()));p.push(...f().zgg.create({id:a,type:i().xd.table,content:g,format:{table_block_column_order:m},properties:{},parent:n,space_id:n.spaceId,createdBy:o,ignore_block_count:!!u||void 0},{useCrdt:d}).operations);const v=g.flatMap(((e,s)=>{const l=r().MU(m.flatMap(((e,o)=>{var n;const r=null===(n=t[s])||void 0===n||null===(n=n[o])||void 0===n?void 0:n.textValue;return r?[[e,r]]:[]})));return f().zgg.create({id:e,type:i().xd.tableRow,parent:{id:a,table:_().ev,spaceId:n.spaceId},space_id:n.spaceId,properties:l,createdBy:o},{useCrdt:d}).operations}));return p.push(...v),{operations:p}}const T=["yes","Yes","true","True","checked"],M=["no","No","false","False","unchecked"];function P(e){return T.some((t=>e===t))||M.some((t=>e===t))}function B(e,t){return e.length===t.length}function R(e,t){if(t.every(P))return{schema:{type:"checkbox"},validate:P,coerce:e=>T.some((t=>e===t))?a().I1:a().oP}}function E(e,t){const o=t.map(v().sA),n=o[0];if(n&&o.every((e=>Boolean(e&&e.format===n.format))))return{schema:{type:"number",number_format:n.format},validate(e){const t=v().sA(e);return!r().pN(t)&&t.format===n.format},coerce(e){const t=v().sA(e);return`${t?t.value:void 0}`}}}function D(e,t){if(parseInt(t)&&t.length<=6)return!1;const o=c().JC(t,e);return Boolean(o)}function N(e,t){const o=t.filter((t=>D(e,t)));if(o.length>=t.length/2)return{schema:{type:"date"},validate:t=>D(e,t),coerce:t=>c().JC(t,e),isFullMatch:B(t,o)}}function L(e){return e.length<320&&e.includes("@")&&g().t(e,"email")}function F(e,t){const o=t.filter(L);if(o.length>=t.length/2)return{schema:{type:"email"},validate:L,coerce:n().D_,isFullMatch:B(t,o)}}function U(e){return e.length<320&&g().t(e,"url")}function O(e,t){const o=t.filter(U);if(o.length>=t.length/2)return{schema:{type:"url"},validate:U,coerce:n().D_,isFullMatch:B(t,o)}}function V(e,t){return!String(t).match(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)&&e(String(t))}function j(e,t,o){const r=V.bind(null,e),i=o.filter(r);if(i.length>=o.length/2)return{schema:{type:"phone_number"},validate:r,coerce:n().D_,isFullMatch:B(o,i)}}function z(e,t,o){const r=[];t.forEach((e=>e.split(",").forEach((e=>r.push(e.trim())))));const i=new Set(r);if(s=i.size,l=r.length,c=t.length,l>c&&q(s,l)){return{schema:{type:"multi_select",options:Array.from(i).map(((e,t)=>({id:o(),value:e,color:(0,a().Zd)([])})))},validate:e=>i.has(e),coerce:n().D_}}var s,l,c}function q(e,t){return e>0&&e**2<t}function H(e,t,o){const r=new Set(t);if(q(r.size,t.length)){return{schema:{type:"select",options:Array.from(r).map(((e,t)=>({id:o(),value:e,color:(0,a().Zd)([])})))},validate:e=>r.has(e),coerce:n().D_}}}function W(e,t){return{schema:{type:"text"},validate:n().vF,coerce:n().D_}}function K(e){const t=[];let o=[],n="",r=!1;for(let i=0;i<e.length;i++){const a=e[i],s=e[i+1];if('"'===a)r&&'"'===s?(n+='"',i++):r=!r;else if(","!==a||r)if("\n"!==a&&("\r"!==a||"\n"===s)||r){if("\r"===a&&"\n"===s&&!r)continue;n+=a}else o.push(n),t.push(o),o=[],n="";else o.push(n),n=""}return(n||o.length>0)&&(o.push(n),t.push(o)),t}},260488:(e,t,o)=>{o.d(t,{WL:()=>U,XM:()=>E,Yc:()=>F,_N:()=>N,jd:()=>V,st:()=>L,su:()=>D,sv:()=>O});o(16280);var n=()=>o(244641),r=()=>o(206267),i=()=>o(245241),a=()=>o(919709),s=()=>o(449412),l=()=>o(534177),c=()=>o(449506),d=()=>o(949052),u=()=>o(650829),p=()=>o(140022),m=()=>o(31278),g=()=>o(728611),f=()=>o(658883),v=()=>o(351360),h=()=>o(430483),_=()=>o(295169),b=()=>o(948914),y=()=>o(732770),S=()=>o(786601),w=()=>o(899677),k=()=>o(498719),I=()=>o(250484),A=()=>o(24157),x=()=>o(122058),C=()=>o(222917),T=()=>o(705540),M=()=>o(476380),P=()=>o(725614),B=()=>o(317909),R=()=>o(755199);const E=6;function D(e){h().zD.isQuickFindEnabled()&&S().A.state.isOpen?S().A.closeAndResetMetricsState():w().default.state.open?L({environment:e.environment,reset:!1}):N(e)}function N(e){const{environment:t,isQuickSearch:o,isPublicPageSearch:n,isNewElectronTab:i,query:a}=e,l=r().JW(),d=h().zD.isUnifiedFindDebugToolsEnabled(),m=h().zD.isQuickFindEnabled(),g=d?"nav-local-only":"default",f=Date.now().valueOf(),b=S().A.state;if(Boolean(o)||"query-args"===e.analyticsFrom)w().default.setState({open:!1,openAsPage:!0,openedTimeMs:f,sessionId:l,isPublicPageSearch:n??!1,searchMode:g});else{if(w().default.state.open||S().A.state.isOpen)return;if(m&&!d){const o="editing"===A().default.state.mode?A().default.state:void 0,n="sidebar"!==e.analyticsFrom;if(e.shouldUseDeepDiveSurface)if("deep_dive"===b.surface||e.deepFindDomRect){e.deepFindDomRect?S().A.setState({surface:"deep_dive",isOpen:!0,sessionId:l,isNewElectronTab:i??!1,openedTimeMs:f,domRect:e.deepFindDomRect,query:e.miniSearchQuery,previousTextSelection:o}):S().A.update((e=>({...e,isOpen:!0,sessionId:l,isNewElectronTab:i??!1,openedTimeMs:f,previousTextSelection:o}))),(0,x().uU)({searchSessionId:l,environment:t});const n=e.miniSearchQuery||b.query;n&&"selectAll"===e.miniSearchQueryTextAction?P().selectAllText({environment:t,store:n.store,canSelectAllBlocks:!1}):"clear"===e.miniSearchQueryTextAction&&n&&(n.setValue([]),P().setSelectionAtEnd({store:n.store}))}else{const r=new Error("Deep find surface not set but deep find requested");s().Fg(r,{tags:{from:"searchMenuActions",type:"deepFindSurfaceNotSetButDeepFindRequested"},extra:{analyticsFrom:e.analyticsFrom}}),S().A.update((e=>({...e,isOpen:!0,surface:"default",position:n?"center":"sidebar",query:void 0,sessionId:l,isNewElectronTab:i??!1,openedTimeMs:f,previousTextSelection:o}))),(0,x().uU)({searchSessionId:l,environment:t})}else P().clear({environment:t}),S().A.update((e=>({...e,isOpen:!0,surface:"default",position:n?"center":"sidebar",sessionId:l,isNewElectronTab:i??!1,openedTimeMs:f,previousTextSelection:o}))),(0,x().uU)({searchSessionId:l,environment:t})}else{var y;const e=null===(y=v().default.state.currentSpaceStore)||void 0===y?void 0:y.id;e&&c().callApi({eventName:"warmSearchCache",environment:t,data:{spaceId:e}}),w().default.update((e=>({...e,open:!0,openAsPage:!1,isQuickSearch:!1,openedTimeMs:f,sessionId:l,isPublicPageSearch:n??!1,isNewElectronTab:i,searchMode:g})))}M().VN({clearQuery:!1})}if(Boolean(e.doNotTrackOpenSearchEvent)||C().w3(e.environment,{from:e.analyticsFrom,searchSessionId:l,type:m?"mini_search":"modal"}),(!m||d)&&("default"!==g?I().Ay.enableNavigationalMode():I().Ay.disableNavigationalMode(),a&&I().Ay.setState({...I().Ay.state,query:{...I().Ay.state.query,text:a}}),"assistant"===I().Ay.state.mode&&!o)){const o=_().default.getActiveSessionId()||_().default.getNextSessionId(),n=_().default.getActiveSession();u().assistantDependency.load().then((e=>{let{assistantMenuActions:o}=e;o.closeAssistantRightHandSideMenu({environment:t})})),p().trackAssistantOpened(e.environment,{from:"return_to_search",hasQuery:!1,searchSessionId:C().wr(),isReminder:!1,reminderType:void 0,sessionId:o,startTimestamp:(null==n?void 0:n.assistantConfigurationState.sessionStartTimestamp)||Date.now(),transcript:(null==n?void 0:n.evaluator.getTranscript())||[]})}}function L(e){const{environment:t,reset:o}=e;if(w().default.state.open){if(w().default.reset(),y().A.setKeyboardMode(!1),"assistant"===I().Ay.state.mode){const e=_().default.getActiveSession();e&&p().trackAssistantClosed(t,{sessionContext:e,from:"search"})}o&&F({resultStore:e.searchResultStore,secondaryResultStore:void 0})}}function F(e){const{resultStore:t,secondaryResultStore:o}=e;I().Ay.reset(),k().default.reset(),t.reset(),o&&o.reset()}function U(e){w().default.update((e=>({...e,open:!0,openAsPage:!1,openedTimeMs:Date.now(),sessionId:r().JW(),searchMode:"full-content"}))),I().Ay.update((t=>({...t,query:{...t.query,filters:(0,i().vm)(t.query.filters,{navigableBlockContentOnly:!1}),text:e}})))}async function O(e){var t,o,n;const{environment:r,shouldResetAssistantStore:i=!0,quickSearchMode:s,device:l,event:c}=e,d=v().default.state.mainEditorCurrentBlockStore??v().default.state.currentSpaceStore,m=I().Ay.state.query.text,{isNewElectronTab:y}=w().default.state,k=(null===(t=b().A.state.preferences)||void 0===t?void 0:t.isNewTabSearchEnabled)&&y?g().Vr(c)||"tab":g().Vr(c),A=h().zD.isDeepFindEnabled(),x=h().zD.isQuickFindEnabled(),{sessionId:C,openedTimeMs:M}=x?S().A.state:w().default.state,P=m.length>E||A&&m.length>0;if(!d||"assistant"===I().Ay.state.mode)return;const{assistantActions:B,assistantMenuActions:R}=await u().assistantDependency.load();i&&B.clearActiveAssistantSession({environment:r});const D=m.length<=E||A?m:void 0,N=!P||!A,F=h().zD.isFullPageAssistantChatEnabled(r.device),U=(0,f().q)(r);let O;if(l.isMobileBrowser?R.openAssistantRightHandSideMenu({environment:r,primeTextInput:D,from:"search"}):F&&!U?(L({environment:r,reset:!1}),R.openFullPageChat({environment:r,shouldFocusInput:N,openInNew:k,deepFindRequestedForNewTabOrWindow:A,queryTextValue:(0,a().x9d)(m),from:"search"})):(I().Ay.update((e=>({...e,mode:"assistant"}))),R.setPrimeTextInput(D,N),await R.closeAssistantRightHandSideMenu({environment:r})),A||P){const e=await B.resetAndInitializeAssistantSession({environment:r,deepFindRequested:A,searchSessionId:C,searchOpenTimestamp:M});P&&(O=e.sessionId,B.commitHumanStep({environment:r,text:(0,a().x9d)(m),sessionId:O,assistantSurfaceType:"searchPane"}),B.updateAssistantTimestampsAfterSessionInitialization({environment:r}))}O||(O=_().default.getActiveSessionId()??_().default.getNextSessionId());const V=null===(o=_().default.getSessionContext(O))||void 0===o||null===(o=o.assistantConfigurationStore)||void 0===o?void 0:o.state,j=(null===(n=_().default.getSessionContext(O))||void 0===n?void 0:n.evaluator.getTranscript())??[];p().trackAssistantOpened(r,{hasQuery:P,from:e.from,searchSessionId:C,isReminder:!1,reminderType:void 0,sessionId:O,startTimestamp:(null==V?void 0:V.sessionStartTimestamp)||Date.now(),transcript:j}),s&&l.isElectron&&T().quickSearchSetSearchAssistantMode(!0)}async function V(e){let{environment:t,query:r}=e;const{assistantDependency:i}=await Promise.resolve().then(o.bind(o,650829)),a=(await i.load()).getCurrentQnaReminderUserSettings();if(!a)return;const s=n().c9.utc();if((0,l().O9)(a.last_exposed_to_ai_qna_at)){if(s.diff(n().c9.fromMillis(a.last_exposed_to_ai_qna_at),"days").days<7)return}const c=a.ai_qna_abandoned_search_reminder_shown_at??[],d=c[c.length-1];if(c.length>=m().FU)return;if((0,l().O9)(d)&&s.diff(n().c9.fromMillis(d),"days").days<2)return;if(r.trim().length<9)return;if(!h().zD.isQnaAbandonedSearchReminderEnabledForUser())return;if("idle"!==m().zz.state.type)return;m().zz.setState({type:"loading",query:r});const u=v().default.state.currentUserSettingsStore;if(u){const e={ai_qna_abandoned_search_reminder_shown_at:[...c,s.toMillis()]};B().createAndCommit({environment:t,userAction:"searchMenuActions.setAbandonedSearchReminderShownAt",canUndo:!0,perform:t=>{R().mJ({userSettingsStore:u,transaction:t,data:e})}})}return j({environment:t,compareTimestamp:a.last_exposed_to_ai_qna_at,query:r})}async function j(e){const{environment:t,compareTimestamp:n,query:r}=e,{assistantDependency:i}=await Promise.resolve().then(o.bind(o,650829)),a=await i.load(),s=await(0,d().t)({environment:t,type:"keywordSearchToSuggestedQuestions",inputs:[{query:r}]});if(!s)return void m().zz.setState({type:"idle"});const l=function(){const{currentUserSettingsStore:e}=v().default.state;if(e)return e.getSettingsStore().getKeyStore("last_exposed_to_ai_qna_at").getValue()}();l&&n&&l>n?m().zz.setState({type:"idle"}):(m().zz.setState({type:"ready",questions:s}),_().default.endCurrentSession(),a.assistantMenuActions.openAssistantRightHandSideMenu({environment:t,from:"button",isReminder:!0,reminderType:"abandoned_search"}))}(0,o(466103).exposeDebugEnvironmentValue)("showQnaReminderOnAbandonedSearch",(e=>t=>j({environment:e,compareTimestamp:Date.now(),query:t})))},261237:(e,t,o)=>{o.d(t,{c:()=>C});o(16280),o(944114),o(898992),o(737550);var n=o.n(o(36545)),r=o(296540),i=()=>o(199834),a=()=>o(700500),s=()=>o(534177),l=()=>o(831872),c=()=>o(725614),d=()=>o(295740),u=(o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(803949),()=>o(906537));const p=["initial","keyDown","compositionStart","beforeInput","compositionUpdate","domMutations","input","compositionEnd","keyUp"],m={keyDown:"keyUp",beforeInput:"input",input:"domMutations",domMutations:"input",compositionStart:"compositionEnd"},g={compositionUpdate:"beforeInput"};class f{constructor(){this.flowData=new Map,this.nextFlow=new v,this.currentFlow=void 0,this.previousFlow=void 0,this.listeners=new Set,this.handleSelectionChange=()=>{this.nextFlow.beforeRange=u().toStaticRange(u().get())},this.handleKeyDown=e=>{this.advanceToPhase("keyDown").keyDown={event:e},this.emitUpdate(),this.endIfComplete()},this.handleCompositionStart=e=>{this.advanceToPhase("compositionStart").compositionStart={event:e},this.emitUpdate(),this.endIfComplete()},this.handleBeforeInput=e=>{var t;if(!(0,o(713972).vr)(e))return;const n=(null===(t=e.getTargetRanges)||void 0===t?void 0:t.call(e))||[];this.advanceToPhase("beforeInput").beforeInput={event:e,targetRanges:n},this.emitUpdate(),this.endIfComplete()},this.handleCompositionUpdate=e=>{this.advanceToPhase("compositionUpdate").compositionUpdate={event:e},this.emitUpdate()},this.handleInput=e=>{this.advanceToPhase("input").input={event:e},this.emitUpdate(),this.endIfComplete()},this.handleCompositionEnd=e=>{this.advanceToPhase("compositionEnd").compositionEnd={event:e},this.emitUpdate(),this.endIfComplete()},this.handleKeyUp=e=>{this.advanceToPhase("keyUp").keyUp={event:e},this.emitUpdate(),this.endFlow()},this.handleMutations=e=>{let{currentFlow:t}=this;t&&!t.domMutations||(t=this.advanceToPhase("initial")),t.domMutations={afterPhase:t.phase,mutations:e},this.emitUpdate(),this.endIfComplete()}}attachEventListeners(e){const{div:t,document:o}=e;return o.addEventListener("selectionchange",this.handleSelectionChange),t.addEventListener("input",this.handleInput),t.addEventListener("keydown",this.handleKeyDown),t.addEventListener("keyup",this.handleKeyUp),t.addEventListener("beforeinput",this.handleBeforeInput),t.addEventListener("compositionstart",this.handleCompositionStart),t.addEventListener("compositionupdate",this.handleCompositionUpdate),t.addEventListener("compositionend",this.handleCompositionEnd),()=>{o.removeEventListener("selectionchange",this.handleSelectionChange),t.removeEventListener("input",this.handleInput),t.removeEventListener("keydown",this.handleKeyDown),t.removeEventListener("keyup",this.handleKeyUp),t.removeEventListener("beforeinput",this.handleBeforeInput),t.removeEventListener("compositionstart",this.handleCompositionStart),t.removeEventListener("compositionupdate",this.handleCompositionUpdate),t.removeEventListener("compositionend",this.handleCompositionEnd)}}onInputFlowChange(e){return this.listeners.add(e),()=>this.listeners.delete(e)}isComposing(){var e;return this.currentFlow&&!this.currentFlow.isPhase("initial")?this.currentFlow.isComposing():(null===(e=this.previousFlow)||void 0===e?void 0:e.isComposing())||!1}reset(){this.nextFlow=new v,this.currentFlow=void 0,this.previousFlow=void 0,this.flowData=new Map}getCurrentFlow(){const e=this.currentFlow;if(!e)return;return{flow:e,data:this.getData(e)}}getData(e){const t=this.flowData.get(e);if(t)return t;const o={};return this.flowData.set(e,o),o}endIfComplete(){const{currentFlow:e}=this;e&&e.isComplete()&&this.endFlow()}emitUpdate(){const{currentFlow:e}=this;if(e){const t={type:"update",flow:e,data:this.getData(e)};this.listeners.forEach((e=>e(t)))}}endFlow(){const{currentFlow:e}=this;if(e){const t=this.previousFlow;this.previousFlow=e,this.currentFlow=void 0;const o={type:"end",flow:e,data:this.getData(e)};this.listeners.forEach((e=>e(o))),t&&this.flowData.delete(t)}}advanceToPhase(e){return this.currentFlow&&this.currentFlow.canTransitionToPhase(e)||(this.endFlow(),this.currentFlow=this.nextFlow,this.nextFlow=new v),this.currentFlow.phase=e,this.currentFlow}}class v{constructor(){this.phase="initial",this.beforeRange=u().toStaticRange(u().get()),this.initial=void 0,this.keyDown=void 0,this.compositionStart=void 0,this.beforeInput=void 0,this.compositionUpdate=void 0,this.input=void 0,this.compositionEnd=void 0,this.domMutations=void 0,this.keyUp=void 0}isPhase(e){return this.phase===e}hasEvents(){return Boolean(this.compositionStart||this.compositionEnd||this.compositionUpdate||this.keyDown||this.keyUp||this.beforeInput||this.input)}isComposing(){var e;switch(this.phase){case"compositionStart":case"compositionUpdate":return!0;case"compositionEnd":case"initial":return!1;case"beforeInput":case"input":case"keyDown":case"keyUp":return Boolean(null===(e=this[this.phase])||void 0===e?void 0:e.event.isComposing);default:(0,s().HB)(this.phase)}}transitionToPhase(e,t){return!!this.canTransitionToPhase(e)&&(this.phase=e,this[e]=t,!0)}canTransitionToPhase(e){return!this[e]&&(!(!(0,s().O)(g,this.phase)||g[this.phase]!==e)||1===function(e,t){const o=p.indexOf(e),n=p.indexOf(t),r=o-n;if(r<0)return-1;if(r>0)return 1;return 0}(e,this.phase))}isComplete(){for(const[e,t]of(0,s().WP)(m))if(this[e]&&!this[t])return!1;return!0}getTargetRanges(){var e;const t=null===(e=this.beforeInput)||void 0===e?void 0:e.targetRanges;return null!=t&&t.length?t:this.beforeRange?[this.beforeRange]:[]}}var h=()=>o(231722),_=()=>o(962845),b=()=>o(792002),y=(o(581454),()=>o(416845));class S{constructor(e){if(this.leftToRight=new Map,this.rightToLeft=new Map,e)for(const[t,o]of e)this.assoc(t,o)}assoc(e,t){const o=[];if(this.leftToRight.has(e)){const t=this.leftToRight.get(e);o.push((()=>this.rightToLeft.delete(t)))}if(this.rightToLeft.has(t)){const e=this.rightToLeft.get(t);o.push((()=>this.leftToRight.delete(e)))}for(const n of o)n();return this.leftToRight.set(e,t),this.rightToLeft.set(t,e),this}getLeft(e){return this.leftToRight.get(e)}getRight(e){return this.rightToLeft.get(e)}hasLeft(e){return this.leftToRight.has(e)}hasRight(e){return this.rightToLeft.has(e)}deleteLeft(e){if(this.leftToRight.has(e)){const t=this.leftToRight.get(e);return this.leftToRight.delete(e),this.rightToLeft.delete(t),!0}return!1}deleteRight(e){if(this.rightToLeft.has(e)){const t=this.rightToLeft.get(e);return this.leftToRight.delete(t),this.rightToLeft.delete(e),!0}return!1}*[Symbol.iterator](){for(const[e,t]of this.leftToRight)yield[e,t]}}class w{constructor(e,t,o){if(this.leftName=void 0,this.rightName=void 0,this.biMap=void 0,e===t)throw new(y().Um)("NamedBiMap left and right names are equal",{data:{name:e}});if(this.leftName=e,this.rightName=t,this.biMap=new S,o)for(const[n,r]of o)this.biMap.assoc(n,r)}assoc(e){const t=e[this.leftName],o=e[this.rightName];return this.biMap.assoc(t,o),this}get(e){if(this.leftName in e){const t=e[this.leftName];return this.biMap.getLeft(t)}if(this.rightName in e){const t=e[this.rightName];return this.biMap.getRight(t)}throw new(y().Um)("NamedBiMap.get fallthrough should never occur",{data:e})}delete(e){if(this.leftName in e){const t=e[this.leftName];return this.biMap.deleteLeft(t)}if(this.rightName in e){const t=e[this.rightName];return this.biMap.deleteRight(t)}throw new(y().Um)("NamedBiMap.delete fallthrough should never occur",{data:e})}has(e){if(this.leftName in e){const t=e[this.leftName];return this.biMap.hasLeft(t)}if(this.rightName in e){const t=e[this.rightName];return this.biMap.hasRight(t)}throw new(y().Um)("NamedBiMap.has fallthrough should never occur",{data:e})}[Symbol.iterator](){return this.biMap[Symbol.iterator]()}}class k extends(()=>o(959180))().A{constructor(){super(...arguments),this.nodeMap=new w("node","ref",new S)}register(e){const t=super.register(e),o=e.getNode();return o?this.nodeMap.assoc({node:o,ref:e}):this.nodeMap.delete({ref:e}),t}unregister(e){super.unregister(e),this.nodeMap.delete({ref:e})}getByDOMOrder(){const e=Array.from(this.nodeMap.biMap.rightToLeft.entries());return e.sort(((e,t)=>{const n=e[1],r=t[1];return(0,o(507707).A)(n,r)})),e.map((e=>{let[t,o]=e;return{node:o,leaf:t}}))}getParentContentEditableLeaf(e){const t=(0,d().sT)(e),o=t&&this.nodeMap.get({node:t});if(t&&o)return{node:t,leaf:o}}}var I=()=>o(24157),A=o(474848);const x=!1,C=(0,r.forwardRef)((function(e,t){const p=(0,o(959013).tz)(),{children:m,style:g,displayName:v,shouldSelectOnEnter:y,onBlur:S}=e,w=!e.disabled,C=(0,r.useRef)(null),R=(0,r.useRef)(0),[E,D]=(0,r.useState)(null),N=(0,r.useRef)(!1),L=(0,r.useRef)(!1),[F]=(0,r.useState)((()=>function(e){return`${e}-${B++}`}(v))),U=(0,r.useRef)(void 0),O=(0,r.useRef)({displayName:F}),[V]=(0,r.useState)((()=>new f)),[j]=(0,r.useState)((()=>new k)),[z]=(0,r.useState)((()=>new(i().L)({onMutations(e){o(17022).A.withListenerIgnored((()=>{V.handleMutations(e)}))},enableLogging:!1}))),q=(0,r.useRef)(!1),H=(0,r.useCallback)((e=>{q.current!==e&&(q.current=e,z.mutate((()=>{var t,o;e?null===(t=C.current)||void 0===t||t.setAttribute(d().tD,"true"):null===(o=C.current)||void 0===o||o.removeAttribute(d().tD)})))}),[z]),W=(0,r.useRef)(!1),K=(0,r.useCallback)((e=>{W.current!==e&&(W.current=e,z.mutate((()=>{var t,o;e?null===(t=C.current)||void 0===t||t.setAttribute(d().cm,"true"):null===(o=C.current)||void 0===o||o.removeAttribute(d().cm)})))}),[z]),G=(0,r.useCallback)((e=>{C.current=e,z.setNode(e),D(e)}),[z]);(0,r.useImperativeHandle)(t,(()=>C.current));const $=(0,o(484714).v3)(),Y=(0,o(56366).K8)((()=>(0,_().fF)($)),[$]);(0,r.useEffect)((()=>{if(E)return V.attachEventListeners({div:E,document:window.document})}),[V,E]);const{isAndroid:Q}=$.device;(0,r.useEffect)((()=>{const e=e=>{var t;const o=u().get(),n=(0,_().n3)({range:o,contentEditableLeafRegistry:j,allowInvisibleEndSelection:!0,constraintToContentEditableRootNode:C.current||void 0}),r=I().default.state,i="editing"===r.mode?r.multiSelection:void 0;return{leafs:n,multiSelection:Q&&e.isPhase("beforeInput")&&(!i||(0,h().kM)(i))&&u().isExpanded(o)?null===(t=(0,_().GI)({range:o,contentEditableLeafRegistry:j,allowInvisibleEndSelection:!0}))||void 0===t?void 0:t.multiSelection:i,range:u().toStaticRange(o)}};return V.onInputFlowChange((t=>{var r,a;K(V.isComposing());const{flow:u,type:p,data:m}=t;if("end"===p)return void M("flow ended",m,u);if(x){const t=m.log||=[],o={phase:u.phase,hasMutations:Boolean(u.domMutations),target:e(u),isComposing:u.isComposing()};t.push(o),M("flow updated",u.phase,o)}const g=u.hasEvents(),f=x||o(780054).A.isLocalhost||!g;if("update"!==p||!u.isPhase("beforeInput")&&m.target||(m.target=e(u)),Q&&"update"===p&&(0,o(155959).T)("supportsAlwaysMultiTextSelectionBehavior")&&"Unidentified"===(null===(r=u.keyDown)||void 0===r?void 0:r.event.key)&&"deleteContentBackward"===(null===(a=u.beforeInput)||void 0===a?void 0:a.event.inputType)){var v;u.isPhase("beforeInput")&&!m.beforeInputTarget&&(m.beforeInputTarget=e(u));if(Boolean(null===(v=m.beforeInputTarget)||void 0===v?void 0:v.leafs)){var _;if(u.isPhase("beforeInput")){if(null===(_=u.beforeInput)||void 0===_||_.event.preventDefault(),u.domMutations){m.handledMutations=!0,M("deleteContentBackward: revertDOMMutation");const e=u.domMutations.mutations;for(let t=e.length-1;t>=0;t--)(0,i().m)(e[t],f)}}else if(u.isPhase("keyUp")){var y;const e=function(e){var t;if(!e||0!==e.end.index)return e;let o=e;const n=(0,b().H4)(o.end.store),r=n?null===(t=(0,b().s6)(n))||void 0===t?void 0:t.endIndex:void 0;if(!n||void 0===r)return e;o.start.store===n&&o.start.index===r?(o={start:o.end,end:o.end},M("deleteContentBackward: mutating selection for start of line",o)):(0,h().kM)(o)||0!==o.end.index||(o={start:o.start,end:{store:n,index:r}},M("deleteContentBackward: mutating selection for end of line",o));return o}(null===(y=m.beforeInputTarget)||void 0===y?void 0:y.multiSelection);if(e){const t=(0,h().An)(e);M("deleteContentBackward: propagateShortcut backspace");const n=()=>{c().setMultiSelection({multiSelection:e}),l().uj($,new KeyboardEvent("keydown"),"backspace")};t?n():o(908006).default.afterNextFlush(n)}}return}}if("update"===p&&u.domMutations&&!m.handledMutations){var S,w;m.handledMutations=!0;const t=u.domMutations.mutations,o=m.target||e(u),r=null===(S=o.leafs)||void 0===S?void 0:S.start,a=null===(w=o.leafs)||void 0===w?void 0:w.start,l=null==r?void 0:r.leaf.getText();M("onMutations",m,l,u,r);let c=!1,p=!1,v=!1;for(let e=t.length-1;e>=0;e--){const o=t[e];P(o,r);const n=(0,d().sr)(o.target);if(n!==C.current){M("allowed mutation on interior region",n,o);continue}const a=(0,d().xr)(o.target);if(a){M("allowed mutation on error boundary",a,o);continue}if(!g&&"attributes"===o.type&&"style"===o.attributeName)continue;if("attributes"===o.type&&"dir"===o.attributeName)continue;if(!r){(0,i().m)(o,f);continue}if("childList"===o.type){const e=Array.from(o.removedNodes);p||=e.some(d().qb)||e.some(d().hU);const t=Array.from(o.addedNodes);v||=t.some(d().qb)}const l=(0,d().sT)(o.target);if(l&&l===r.node){switch(o.type){case"attributes":(0,i().m)(o,f);continue;case"characterData":case"childList":break;default:(0,s().HB)(o.type)}c=!0}else(0,i().m)(o,f)}if(a&&(c||p)){var k,I,A,T;if("string"!=typeof l)throw new Error("focusedLeafText must be string");const e=null===(k=u.beforeInput)||void 0===k?void 0:k.event,t=null===(I=u.keyDown)||void 0===I?void 0:I.event.keyCode,o="enter"!==(void 0!==t&&n()(t))&&("insertLineBreak"===(null==e?void 0:e.inputType)||"insertParagraph"===(null==e?void 0:e.inputType)||"insertCompositionText"===(null==e?void 0:e.inputType)&&(null==e||null===(A=e.data)||void 0===A?void 0:A.endsWith("\n"))||Q&&v),r={multiSelection:null===(T=m.target)||void 0===T?void 0:T.multiSelection,newValue:l,deletedLine:p,insertedLine:o,isComposing:V.isComposing()};M("delegateMutation",r),a.leaf.delegateMutation(r)}}}))}),[j,$,V,Q,K]),(0,r.useEffect)((()=>{const e=C.current;e&&N.current&&z.mutate((()=>{w?e.contentEditable="true":e.removeAttribute("contentEditable")}))}),[w,z]);const Z=(0,r.useCallback)((()=>{const e=C.current;return!!e&&(N.current?("always"===Y&&H(!0),!1):(z.mutate((()=>{w?e.contentEditable="true":e.removeAttribute("contentEditable"),(0,_()._V)($.device)&&(e.spellcheck=!1)})),z.lock(O.current),N.current=!0,H("gesture"===Y),M("enableMultiSelection"),!0))}),[z,Y,H,$.device,w]),X=(0,r.useCallback)((()=>{const e=C.current;return!(!N.current||!e)&&("always"===Y?(H(!1),!1):!V.isComposing()&&(z.unlock(O.current),e.removeAttribute("contenteditable"),H(!1),M("disableMultiSelection"),N.current=!1,!0))}),[z,Y,H,V]),J=(0,r.useCallback)((()=>{const e=C.current;if(!e)return;const t=u().get();if(null!=t&&t.collapsed&&(0,d().sr)(t.commonAncestorContainer)===e){const e=(0,d().sT)(t.commonAncestorContainer),n=t.startContainer,r=t.startOffset;if(e&&n&&(0,o(921855).a8)(e,n,r)){const i=e.getElementsByClassName(o(983650).gy)[0];i&&(M("Move collapsed selection before EOL marker",{parentLeafNode:e,caretContainer:n,caretOffset:r}),t.setStartBefore(i),t.setEndBefore(i),u().set(t,$.device))}}}),[$.device]);(0,r.useEffect)((()=>{let e=u().get();function t(){var t;const o=null===(t=u().get())||void 0===t?void 0:t.cloneRange(),n=e;e=o;const r=C.current;r&&u().isExpanded(o)&&!u().isExpanded(n)&&(0,d().sr)(o.commonAncestorContainer)===r&&(0,d().sT)(o.commonAncestorContainer)&&Z()&&(r.focus(),u().isExpanded(u().get())||u().set(o,$.device))}return document.addEventListener("selectionchange",t),document.addEventListener("selectionchange",J),()=>{document.removeEventListener("selectionchange",t),document.removeEventListener("selectionchange",J)}}),[Z,J,$.device]);const ee=(0,r.useCallback)((function(){const e=u().get();if(!u().isExpanded(e)&&X()&&e){const t=T(j,C.current,e);t&&t.node&&t.node instanceof HTMLElement&&t.node.focus(),u().set(e,$.device)}}),[j,X,$.device]),te=(0,r.useMemo)((()=>o(496603).sg(ee,50)),[ee]),{KeyboardShortcutStackStore:oe}=$,ne=(0,r.useRef)(),re=(0,r.useCallback)((function(e){const t=C.current;if(!t)return;if(!N.current)return;if(c().maybeHandleExpectedBrowserSelectionUpdate("reactSelectionChange"))return void M("maybeHandleExpectedBrowserSelectionUpdate() returned true");const o=u().get();if(M("onSelect (react selection)",u().toStaticRange(o)),!ne.current&&o&&ue.current&&o.commonAncestorContainer===ue.current)u().clear($);else if(!(ne.current&&o&&u().areRangesEqual(o,ne.current))){if(ne.current=u().toStaticRange(o),o){const n=o.startContainer===t&&0===o.startOffset&&o.endContainer===t&&0===o.endOffset,r=ue.current&&o.startContainer===ue.current&&me.current&&o.endContainer===me.current,i=$.device.isIOS&&$.device.isMobileNative&&e.timeStamp-R.current>500&&function(e,t,o){if(!e.collapsed||0!==e.startOffset)return!1;const n=(0,_().n3)({range:e,contentEditableLeafRegistry:t,allowInvisibleEndSelection:!0,constraintToContentEditableRootNode:o}),r=t.getByDOMOrder()[0];return Boolean(r&&n&&n.start.leaf===r.leaf)}(o,j,t);if(n||r||i)return M("onSelect: propagateShortcut selectAll"),void l().uj({KeyboardShortcutStackStore:oe},new KeyboardEvent("keydown"),"selectAll")}if("contextmenu"!==e.nativeEvent.type){if(o&&(u().isExpanded(o)||"always"===Y)&&(0,d().sr)(o.commonAncestorContainer)===t){if(L.current)return void(U.current=e);const t=T(j,C.current,o);t&&(M("onSelect: delegateSelection",t),t.leaf.delegateSelection("start"))}u().isExpanded(o)||te()}}}),[Y,j,te,oe,$]);(0,r.useEffect)((()=>{if(!w){function e(){const e=u().get(),t=C.current;if(!t||!e)return;const o=(0,_().GI)({contentEditableLeafRegistry:j,range:e,allowInvisibleEndSelection:!0});o&&(0,d().sr)(e.commonAncestorContainer)===t&&c().selectAndEditMultiSelection({...o,environment:$,focus:"start",readOnly:"infer"})}return document.addEventListener("selectionchange",e),()=>document.removeEventListener("selectionchange",e)}}),[$,w,j]);const ie=(0,r.useCallback)((()=>{L.current=!0,U.current=void 0}),[]),ae=(0,r.useCallback)((e=>{const t=U.current;if(L.current=!1,U.current=void 0,R.current=e.timeStamp,t){const e=T(j,C.current);M("handleTouchEnd: delegateSelection",e),null==e||e.leaf.delegateSelection("start")}}),[j]),se=(0,r.useCallback)((e=>{if(R.current=e.timeStamp,!N.current)return;e.target!==C.current||"Enter"!==e.key||!1!==e.ctrlKey||!1!==e.metaKey||!1!==e.altKey||!1!==e.shiftKey||y&&!y()||void 0!==u().get()||!ue.current||u().setOnNode(ue.current,$.device);const t=T(j,C.current);M("handleKeyDown: delegateKeyDown",t),null==t||t.leaf.delegateKeyDown(e)}),[j,$.device,y]);(0,r.useEffect)((()=>{const e=C.current;if(e)return e.addEventListener("beforeinput",t),()=>e.removeEventListener("beforeinput",t);function t(e){if(!N.current)return;const t=T(j,C.current);null==t||t.leaf.delegateBeforeInput(e)}}),[j]),(0,r.useEffect)((()=>{"always"!==Y||N.current||Z()}),[Z,Y]);const le=(0,r.useCallback)((()=>{const e=u().get();return!u().isExpanded(e)&&X()}),[X]),ce=(0,r.useCallback)((()=>!Q&&Boolean(V.isComposing())),[V,Q]),de=(0,o(401497).IS)((e=>{const t={height:1,width:1,caretColor:"transparent"};return{div:{caretColor:e.regularTextColor,...g},whenContentEditable:{WebkitUserModify:"read-write-plaintext-only"},selectionTrapStart:{...t,marginTop:-1},selectionTrapEnd:t}}),[g]),ue=(0,r.useRef)(null),pe=(0,A.jsx)("span",{style:de.selectionTrapStart,ref:ue,...d().ip}),me=(0,r.useRef)(null),ge=(0,A.jsx)("span",{style:de.selectionTrapEnd,ref:me,...d().ip}),fe=(0,r.useCallback)((e=>{if(null==S||S(e),$.device.isIOS&&!u().get()&&"editing"===I().default.state.mode){const e=I().default.state.multiSelection.start.store;if(e instanceof o(630116).Bv){const t=e.getType();if(t===a().xd.linkToPage||t===a().xd.linkToCollection)return}c().clear({environment:$})}}),[$,S]),ve=(0,r.useCallback)((()=>{!C.current||u().get()&&"empty"!==I().default.state.mode||C.current.blur()}),[]),he=(0,r.useRef)(w&&"always"===Y);return(0,A.jsx)("div",{role:"textbox","aria-disabled":!w,"aria-label":p.formatMessage({id:"contentEditableRoot.ariaLabel",defaultMessage:"Start typing to edit text"}),"aria-multiline":!0,tabIndex:w?0:void 0,onBlur:fe,onFocus:$.device.isIOS?ve:void 0,onTouchStart:ie,onTouchEnd:ae,onTouchCancel:ae,onKeyDown:se,onCompositionEnd:function(e){if(!N.current)return;const t=T(j,C.current);null==t||t.leaf.delegateCompositionEnd(e)},ref:G,...(0,o(451306).AH)(de.div,{whenContentEditable:de.whenContentEditable}),onSelect:re,contentEditable:he.current,suppressContentEditableWarning:!0,...d().ph,children:(0,A.jsxs)(o(872994).e,{id:F,tryEnableMultiSelection:Z,tryDisableMultiSelection:le,isComposing:ce,domLock:z,contentEditableLeafRegistry:j,children:[pe,m,ge]})})}));function T(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u().get();const n=(0,_().n3)({range:o,contentEditableLeafRegistry:e,allowInvisibleEndSelection:!0,constraintToContentEditableRootNode:t||void 0});if(n)return n.start}function M(){if(x){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.warn("ContentEditableRoot:",...t)}}function P(e){const t={};if(t.type=e.type,t.target=e.target,t.targetIsText=e.target.nodeType===Node.TEXT_NODE,t.targetIsLeaf=(0,d().qb)(e.target),e.addedNodes.length){const o=Array.from(e.addedNodes);t.added=o,t.addedALeaf=o.some(d().qb),t.addedAText=o.some((e=>e.nodeType===Node.TEXT_NODE))}if(e.removedNodes.length){const o=Array.from(e.removedNodes);t.removed=o,t.removedALeaf=o.some(d().qb),t.removedAText=o.some((e=>e.nodeType===Node.TEXT_NODE))}"characterData"===e.type&&(t.newChars=e.target.textContent,t.oldChars=e.oldValue),t.mutation=e;for(var o=arguments.length,n=new Array(o>1?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];M("mutation: ",t,...n)}let B=0},261374:(e,t,o)=>{o.d(t,{Ad:()=>U,Ve:()=>N});o(18107),o(967357),o(581454);var n=()=>o(908006),r=()=>o(319954),i=()=>o(700500),a=()=>o(179034),s=()=>o(397277),l=()=>o(919709),c=()=>o(220719),d=()=>o(534177),u=()=>o(413962),p=()=>o(534402),m=()=>o(423804),g=()=>o(845489),f=()=>o(594794),v=()=>o(231722),h=()=>o(969197),_=()=>o(494043),b=()=>o(77246),y=()=>o(630116),S=()=>o(24157),w=()=>o(468484),k=()=>o(611371),I=()=>o(970330),A=()=>o(910302),x=()=>o(132867),C=()=>o(722101),T=()=>o(246826),M=()=>o(620689),P=()=>o(778417),B=()=>o(606952),R=()=>o(315097),E=()=>o(725614);function D(e){const t=(0,h().T)(e.store);if(t&&function(e){var t;const o=e.getType();return!!o&&(!!(0,i().B8)(o)&&!(e.id!==(null===(t=e.getParentBlockStore())||void 0===t?void 0:t.getRenderableContentIds().at(-1))))}(t)){const o=x().Y1({environment:e.environment,blocks:[t],transaction:e.transaction});if(o)return void n().default.afterNextFlush((()=>{const e=o[0].getTitleStore();e&&E().setMultiSelection({multiSelection:{start:{store:e,index:0},end:{store:e,index:0}}})}))}R()._I(e)}function N(e){const{environment:t,transaction:o,multiSelection:c}=e;(0,k().EF)(t)?((0,h().Le)(c.start.store)?function(e){const{environment:t,editorMode:o,transaction:r}=e;let a=e.multiSelection;const s=(0,h().T)(a.start.store);if(!s||s.isCollectionView())return;if("default"===o||(0,b().Or)(o)||"ai_co_editing"===o)B().f0({environment:t,multiSelection:a,transaction:r});else{if("suggest"===o)return;(0,d().HB)(o)}const l=S().default.state;a="editing"===l.mode&&l.multiSelection||a;const c=a.start.store,u={environment:t,type:i().xd.text,inMemoryRecordCache:c.inMemoryRecordCache,transaction:r,spaceId:s.pointer.spaceId},p=T().Wv(u),m=C().Hs({parentStore:s.getContentStore(),prependStore:p,transaction:r}).childStore;U({environment:t,blockStore:s,store:c,targetBlockStore:m,splitAtIndex:a.start.index,transaction:r}),n().default.afterNextFlush((()=>{E().setSelectionAtStart({store:m.getBlockTitleStore()})})),I().v(t,{from:"text_enter",type:i().xd.text,creating_block_id:p.id,parent_collection_id:p.getParentCollectionIdUpToTwoLevels()})}(e):(0,v().kM)(c)&&(function(e){const t=e.getRecordStoreUIParent();return t instanceof y().Bv&&e&&t.isType(i().bl)&&0===l().q4_(t.getTitleValue()).length}(c.start.store)||function(e){var t;const o=e.getAncestorBlockStoreAtRootPath();return o&&o.getType()===i().xd.text&&o.isDirectlyWithinCalloutV2Block()&&0===l().q4_(o.getTitleValue()).length&&o.id===(null===(t=o.getParentBlockStore())||void 0===t?void 0:t.getRenderableContentIds().at(-1))}(c.start.store))?D({environment:t,transaction:o,store:c.start.store}):(0,v().An)(c)&&L(c.start.store)&&F(c.start.store)?function(e){const{environment:t,transaction:o,multiSelection:c,editorMode:d}=e,p=c.start.store,v=(0,h().T)(p);if(!v||!(v.canEdit()||v.isCommentOnly()&&(0,m()._1)({blockStore:v,currentUser:t.currentUser})))return;const _=v.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:t}=e;return t(v)})),b=(0,h().T)(v);if(!_||!b)return;const y=T().Wv({environment:t,type:(0,i().B8)(_.type)?_.type:i().xd.text,inMemoryRecordCache:p.inMemoryRecordCache,transaction:o,spaceId:b.pointer.spaceId,properties:_.properties?O(_.properties):void 0,format:_.format?[_.format].map(s().ZU)[0]:void 0,permissions:_.permissions});if(C().nc({parentStore:b.getContentStore(),beforeStore:v,insertStore:y,transaction:o}).childStore,"suggest"===d){var S;const e=(0,g().J)(p),n=e?(0,h().T)(e):void 0,i=(0,u().RR)(t,o,y,{annotations:r().r.fromArray(l().mIW(null==e?void 0:e.getValue())),annotationTypes:[l().Ifu.SuggestionInsertText],currentUser:t.currentUser},n?{blockStore:n,suggestionTypes:["add_line_break"],currentUser:t.currentUser}:void 0);(0,u().tM)(o,y,{type:"add_line_break",id:(0,f().Z1)({table:a().ev,environment:t,spaceId:b.pointer.spaceId}),discussionId:i.id}),null!=v&&null!==(S=v.getNavigableBlockStore())&&void 0!==S&&S.isCommentOnly()&&(0,u().tM)(o,y,{type:"insert",id:(0,f().Z1)({table:a().ev,environment:t,spaceId:b.pointer.spaceId}),discussionId:i.id}),(0,u().c3)({environment:t,transaction:o,discussionStore:i,addModifiedBlockIdsAfter:[y.id]})}I().v(t,{from:"text_enter",type:i().xd.text,creating_block_id:y.id,parent_collection_id:y.getParentCollectionIdUpToTwoLevels()}),t.device.isMobile&&n().default.afterNextFlush((()=>M().pS(t)))}(e):function(e){const{environment:t,editorMode:o,transaction:n,multiSelection:r}=e,a=(0,h().T)(r.start.store);if(!a)return;if(!(a.canEdit()||a.isCommentOnly()&&(0,m()._1)({blockStore:a,currentUser:t.currentUser})))return;const s=(0,h().T)(a);if(!s)return;if(!(0,v().kM)(r))if("suggest"===o){const o=(0,u().RR)(t,n,r);(0,u().rY)({...e,discussionStore:o})}else"default"===o||"translate_unlocked"===o||"ai_co_editing"===o?B().f0(e):"translate_locked"===o?A()._4():(0,d().HB)(o);const l=r.start.store,c=a.getType(),p=a.getContentLength(),g=a.getModel();let f;if((0,_().BN)(a)&&w().A.isOpen(a.id))f=i().xd.text;else if(g&&p>0&&g.isType(i().RG)){f=i().xd.text;const e=a.getContentStores()[0];if(e){const t=e.getType();e.isDefined()&&t&&i().KT[t]&&(f=t)}}else f=c&&g&&!g.isType(i().ev)&&L(l)&&F(l)&&"code"!==c?c:i().xd.text;const b={environment:t,type:f,inMemoryRecordCache:l.inMemoryRecordCache,transaction:n,spaceId:s.pointer.spaceId},y=T().Wv(b),S=s.getRenderableContentIds()||[];let k,x=!1;if((0,_().BN)(a)&&w().A.isOpen(a.id)){const e=a.getContentStore();x=!0,k=C().Hs({parentStore:e,prependStore:y,transaction:n})}else if(g&&p&&g.isType(i().RG)){const e=a.getContentStore();x=!0,k=C().Hs({parentStore:e,prependStore:y,transaction:n})}else k=S.indexOf(a.id)>=0?C().WH({parentStore:s.getContentStore(),afterStore:a,insertStore:y,transaction:n}):C().Hs({parentStore:s.getContentStore(),prependStore:y,transaction:n});const M=k.childStore;if(L(l)&&c&&!x&&!(0,_().BN)(a)){const e=a.getContentStores(),t=a.getContentStore(),o=M.getContentStore();for(const r of e)C().TF({parentStore:t,childToRemoveStore:r,transaction:n}),C().BC({parentStore:o,appendStore:r,transaction:n})}U({environment:t,blockStore:a,store:r.start.store,targetBlockStore:M,splitAtIndex:r.start.index,transaction:n}),(0,u().nZ)({environment:t,transaction:n,sourceBlockStore:a,targetBlockStore:M,selectionIsExpanded:!(0,v().kM)(r),editorMode:o}),I().v(t,{from:"text_enter",type:f,creating_block_id:y.id,is_toggleable:(0,_().Yt)(f,y.getFormat()),parent_collection_id:y.getParentCollectionIdUpToTwoLevels()})}(e),t.device.isMobile||n().default.afterNextFlush((()=>{M().BM({environment:t})}))):(0,k().QY)(t)}function L(e){if(e.table===a().ev){const t=y().Bv.createChildStore(e,{table:a().ev,id:e.id}).getType();return t&&!(0,i().$I)(t)}return!1}function F(e){if(e.table===a().ev){const t=y().Bv.createChildStore(e,{table:a().ev,id:e.id}).getModel();return t&&!t.isType(i().IA)&&!t.isType(i().Ib)}return!1}function U(e){const{environment:t,blockStore:o,store:n,targetBlockStore:r,splitAtIndex:i,transaction:a}=e,s={store:n,index:i},l={start:s,end:s};if(o.useCrdt()&&o.getBlockTitleStore()===n&&r.useCrdt()){(0,c().MX)(r.useCrdt(),"Calling splitText() with a non-CRDT target block is not currently supported");(0,v().z_)(l)||p().X0({sourceBlockStore:o,targetBlockStore:r,splitAtGraphemeIndex:i,transaction:a,moveIntoNewBlock:!0})}else B().jN({environment:t,sourceStore:l.end.store,sourceIndex:l.end.index,targetStore:r.getBlockTitleStore(),targetIndex:0,transaction:a});P().hc({environment:t,store:r}),E().setSelectionAtStart({store:r.getBlockTitleStore()})}function O(e){const{title:t,...o}=e;return o}},262462:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("settingsConnectedApps",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M16.492 3.922C15.695 3.125 14.57 3 13.234 3H7.148c-1.312 0-2.437.125-3.234.922C3.117 4.719 3 5.836 3 7.14v6.03c0 1.337.117 2.446.914 3.243.797.797 1.922.922 3.25.922h6.07c1.336 0 2.461-.125 3.258-.922.797-.797.914-1.906.914-3.242V7.164c0-1.336-.117-2.453-.914-3.242zm-.344 3.023v6.438c0 .812-.101 1.64-.578 2.117-.468.469-1.312.578-2.117.578h-6.5c-.805 0-1.648-.11-2.125-.578-.469-.477-.57-1.305-.57-2.117V6.969c0-.82.101-1.664.57-2.133.477-.477 1.328-.578 2.149-.578h6.476c.805 0 1.649.11 2.117.578.477.476.578 1.305.578 2.11zm-3.492 5.149c.344 0 .57-.266.57-.625V7.78c0-.46-.25-.64-.648-.64h-3.71c-.368 0-.602.226-.602.57s.242.57.617.57h1.422l1.156-.125-1.219 1.133-2.875 2.883a.62.62 0 00-.187.422c0 .351.226.578.57.578.188 0 .336-.07.445-.18l2.875-2.875 1.125-1.203-.117 1.219v1.351c0 .368.227.61.578.61z"})})},263928:(e,t,o)=>{o.d(t,{J:()=>a,u:()=>s});o(16280);var n=()=>o(496603),r=()=>o(37433),i=()=>o(634157);async function a(e){let{environment:t,spaceId:o,userId:n}=e;if(!t.currentUser.loggedInUserIds.includes(n))throw new Error("Must be logged in user.");i().A.getUserJoinedTeamsState({userId:n,spaceId:o})||await s({environment:t,spaceId:o,userId:n})}async function s(e){var t;let{environment:o,spaceId:a,userId:s,emitValue:l}=e;if(!o.currentUser.loggedInUserIds.includes(s))throw new Error("Must be logged in user.");i().A.setHasFetched({userId:s,spaceId:a});const{teamIds:c}=await(0,r().$D)({environment:o,spaceId:a,currentUserId:s,onlyJoined:!0,includeArchived:!1}),d=(null===(t=i().A.getUserJoinedTeamsState({userId:s,spaceId:a}))||void 0===t?void 0:t.joinedTeamsIds)||[],u=c.length!==d.length||0!==n().R9(c,d).length;i().A.setUserJoinedTeamsState({userId:s,spaceId:a,state:{joinedTeamsIds:u?c:d,lastEmitValue:l}})}},264879:(e,t,o)=>{o.d(t,{D8:()=>x,_I:()=>A,nT:()=>I,oj:()=>k,zz:()=>C});o(898992),o(672577),o(803949),o(581454);var n=()=>o(700500),r=()=>o(179034),i=()=>o(220719),a=()=>o(534177),s=()=>o(44729),l=()=>o(62287),c=()=>o(186445),d=()=>o(108944),u=()=>o(731320),p=()=>o(351360),m=()=>o(411671),g=()=>o(630116),f=()=>o(970330),v=()=>o(557281),h=()=>o(722101),_=()=>o(524539),b=()=>o(750660),y=()=>o(257216),S=()=>o(246826),w=()=>o(317909);function k(e){const{environment:t,transaction:o,titleText:n,recordStoreParentStore:a}=e,{databaseTemplateStore:s,createInValue:l}=function(e,t){let o;if("page"===e.type){const n=g().Bv.createChildStore(t,{table:r().ev,id:e.id});if(n.isTemplate()){const t=(0,d().Nq)(n,1);t&&(o=n,e={type:"page",id:t.id})}}return{databaseTemplateStore:o,createInValue:e}}(e.createInValue,a),c="block"===l.type?g().Bv.createChildStore(a,{table:r().ev,id:l.id}):void 0,u=S().Wv({transaction:o,environment:t,type:"page",inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,properties:n?{title:[[n]]}:void 0,spaceId:a.pointer.spaceId});let p;if("block"===l.type)y().bn({transaction:o,childStore:u,parentStore:(0,i().o9)(c),alive:!0});else p=b().HY({transaction:o,environment:t,targets:[u],value:l});return{environment:t,databaseTemplateStore:s,createdPages:[u],moveToStorePromise:p}}async function I(e){const{environment:t,createdPages:o,databaseTemplateStore:n,moveToStorePromise:i}=e.createInState;let a,s;(null==o?void 0:o.length)>0&&(a=o[0].id,s=o[0].getParentCollectionIdUpToTwoLevels()),f().v(t,{type:"page",from:e.analyticsFrom,new_page_id:a,creating_block_id:a,parent_collection_id:s});const{currentSpaceStore:l}=p().default.state;if(n)w().createAndCommit({userAction:"inlinePageActions.completeCreateIn",environment:t,canUndo:!0,perform:e=>{o.forEach((o=>v().n5({title:{text:o.getTitleValue()},environment:t,store:o,templateStore:n,isKeyboard:!1,isCreateIn:!0,transaction:e,from:"inline_page_action"})))}}),l&&await _().Ym(l,l.id,n.id);else{const e=await i;l&&e&&e.table===r().ev&&await _().Ym(l,l.id,e.id)}}function A(e){const{environment:t,transaction:o,parentStore:i,inlinePageIds:l}=e;if(0===l.length)return;const c=g().Bv.createChildStore(i,i.pointer),p=(0,d().g7)(c).find((e=>{if(e.table!==r().ev)return!1;const t=e.getType(),o=e.getFormat();return!(!t||!o)&&((0,n().IU)(t,o)||(0,n().$I)(t))})),f=p&&p.isCollectionView()?p.getCollectionStore():p,v=f&&m().A.getMode(t,f);if(!f||(0,u().QT)(v)||!f.canEdit()){for(const e of l)s().Hk({pageStore:g().Bv.createChildStore(i,{table:r().ev,id:e}),transaction:o});return}let _=i;for(const n of l){const e=g().Bv.createChildStore(i,{table:r().ev,id:n});if(e.isEmptyPage()){s().Hk({pageStore:e,transaction:o});continue}const t=!e.isDefined()||Boolean(e.getAlive());y().bn({parentStore:f,childStore:e,transaction:o,alive:t}),"block"!==f.table?"collection"!==f.table&&(0,a().HB)(f):(h().WH({parentStore:f.getContentStore(),afterStore:_,insertStore:e,transaction:o}),_=e)}}function x(e){const t=c().ao();if(t){if(e&&e.table===r().ev)return{pageStore:(0,d().Nq)(e,0)||t,createInValue:{type:"block",id:e.id}};if(e&&(0,d().Wo)(e)){const t=(0,d().Nq)(e,0);if(t)return{pageStore:t,createInValue:{type:"page",id:t.id}}}return{pageStore:t,createInValue:{type:"page",id:t.id}}}}async function C(e,t){const{createInValue:o,blocksToTransform:n}=t,i="page"===o.type?new(g().Bv)(e,{table:r().ev,id:o.id}):void 0,a=Boolean(i&&i.isTemplate()),{performResult:{transformedPages:s,pageStore:c}}=await w().createAndCommitAsync({environment:e,userAction:"inlinePageActions.createNewPageIn",waitForServerCommit:!0,perform:async t=>{const s=n.map((o=>l().pd({environment:e,block:o,blockType:"page",transaction:t})));let c;if("page"===o.type)if(i&&a){const o=i.getAssociatedCollectionStore(),n=null==o?void 0:o.getParentPointer();n&&n.table===r().ev&&(c=await b().YX({transaction:t,environment:e,targets:s,value:{type:"page",id:n.id}}))}else{const{mainEditorCurrentBlockStore:n}=p().default.state;n&&n.id!==o.id&&(c=await b().YX({transaction:t,environment:e,targets:s,value:o}))}else"team"===o.type&&await b().HY({transaction:t,environment:e,targets:s,value:o});return{transformedPages:s,pageStore:c}}});await I({analyticsFrom:"new_page_in",createInState:{environment:e,createdPages:s,databaseTemplateStore:a?i:void 0,moveToStorePromise:Promise.resolve(c)}})}},265201:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},267419:(e,t,o)=>{o.d(t,{A:()=>a,_:()=>s});var n=()=>o(56366);class r extends(()=>o(757695))().default{getInitialState(){return{positionalEmojiData:{},emojiByName:{},emojiByCategory:{},emojiByColorRaw:{},emojiByColorProcessed:{}}}async waitUntilLoaded(){await(0,o(987201).x)()}}const i=new r,a=i;function s(){return(0,n().O$)(i)}},267430:(e,t,o)=>{o.d(t,{F6:()=>d,Le:()=>s,hS:()=>l,js:()=>a,o2:()=>c});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(581454);var n=()=>o(467730),r=()=>o(496603);const i=25;function a(e){const{sections:t,context:o,query:a}=e;let s=a.trim().toLowerCase();if(s.startsWith("/")&&(s=s.slice(1)),!s)return c(t,o);const l=function(e){return e.map((e=>({...e,actions:e.actions.map((t=>{const o=t.searchName||t.displayName||"",n=[o,e.searchTitle||e.title||"",o].join(" ");return{...t,searchName:n}}))})))}(function(e,t){const o=[];for(const n of e){const e={...n,actions:[]};for(const r of n.actions)if(d(r,t))if(r.subActions){const i=c(r.subActions(t),t);if(r.hideSubActions){e.actions.push(r);continue}if(r.collapseSubActionsIntoParent){for(const t of i)for(const o of t.actions)e.actions.push(o);continue}const a=i.map((e=>({...e,key:`${n.key} ${r.key} ${e.key}`,title:e.title||r.displayName,searchTitle:[r.searchName||r.displayName,e.searchTitle||e.title].filter(Boolean).join(" ")})));for(const e of a)o.push(e)}else e.actions.push(r);e.actions.length&&o.push(e)}return o}(t,o)),u=[],p=new Map;for(const n of l)for(const e of n.actions)p.set(e,n),u.push(e);const m=(0,n().Ay)(s,u,(e=>e.searchName||""),{minThreshold:i,getSortScore:e=>-e.score*(e.original.sortScoreMultiplier??1)}),g=new Set(m),f=u.filter((e=>Boolean(e.alwaysShowInSearch)&&!g.has(e))),v=f.filter((e=>"start"===e.alwaysShowInSearch)),h=f.filter((e=>"end"===e.alwaysShowInSearch)),_=r().$z([...v,...m,...h],(e=>{const t=p.get(e);if(t)return t.title})),b=[];for(const n of Object.keys(_)){const e=_[n],t=p.get(e[0]);t&&b.push({...t,actions:e})}return b}function s(e,t){if(!t)return e;let o=0;const n=[];for(const r of e){if(o>=t)break;const e=r.actions.slice(0,t-o);e.length>0&&(o+=e.length,n.push({...r,actions:e}))}return n}function l(e,t){const o=[];for(const n of e){const e=n.actions.filter(t);e.length>0&&o.push({...n,actions:e})}return o}function c(e,t){return l(e,(e=>d(e,t)))}function d(e,t){if(e.validators){return e.validators.every((e=>e(t)))}return!0}},267856:(e,t,o)=>{o.d(t,{D:()=>a});var n=()=>o(406792),r=()=>o(712505),i=()=>o(150749);function a(e){const{environment:t,type:o,blockStore:a,store:s,isInCollectionView:l}=e,c=n().default.DO_NOT_USE_markLegacy(o),d=null==a?void 0:a.getType(),u=null==a?void 0:a.useCrdt();n().default.DO_NOT_USE_measureAfterNextFlushLegacy(c,{environment:t,getData:()=>{const e=null==a?void 0:a.getType(),t=a&&"properties"===s.path[0]&&"title"===s.path[1],o=a&&"properties"===s.path[0]&&"caption"===s.path[1];return{table:s.table,block_property:t?"title":o?"caption":void 0,block_type:e,use_crdt:u,block_type_initial:e!==d?d:void 0,peek_mode:r().default.state.mode,is_in_collection_view:l,profiling_tool:i().getProfilingToolForSession()}},sendToStatsig:!0})}},268405:(e,t,o)=>{o.d(t,{T:()=>i});var n=()=>o(498212),r=()=>o(529543);async function i(e){const t=await(0,r().getBrowserId)(e);return t&&(0,n().ot)(t)}},269429:(e,t,o)=>{o.d(t,{A:()=>u});var n=o(296540),r=o(440961),i=()=>o(584262),a=()=>o(606952),s=()=>o(211716),l=()=>o(891078),c=o(474848);function d(e,t){const d=(0,o(484714).v3)(),u=(0,n.useContext)(o(484792).n),p=(0,n.useRef)(null),m=(0,n.useRef)(null),g=(0,l().bx)(e.store,e.disabled),f=(0,l().pW)(e.store),v=(0,n.useCallback)((()=>{o(899963).KO(d),o(296206).l8(d,{page_visit_id:o(990261).uk.getCurrentPageVisitId(),mentioned_page_id:e.store.id,source_type:"page_block",hover_preview_enabled:!0,is_navigable_block:e.store.isNavigableBlock()}),o(41161).A.recordVisit({id:e.store.id,systemBlockType:e.store.getSystemBlockTypeStore().getValue(),type:s().ig.Link,currentUserId:d.currentUser.id})}),[d,e.store]),h=(0,n.useCallback)((()=>{if(!m||!m.current)return;const t=r.findDOMNode(m.current);return(0,o(921855).ng)(e.store,t)}),[e.store]),_=(0,n.useCallback)((t=>{const o=h(),n=e.store.getTitleStore();n&&o&&a().xE({environment:d,event:t,interactiveToken:o,store:n,canEdit:g})}),[g,d,h,e.store]),b=(0,n.useCallback)((t=>{const o=h(),n=e.store.getTitleStore();n&&o&&a().HH({environment:d,event:t,interactiveToken:o,store:n,canEdit:g})}),[g,d,h,e.store]),y=(0,n.useCallback)((()=>{if(u){const t=(0,o(492414).Ay)({store:e.store,pageVisitSource:i().y8.Create});u(t)}else o(857783).uK({environment:d,store:e.store,visitType:s().ig.Link,openInSidePeek:o(712505).default.isSidePeekOpen(),pageVisitSource:i().y8.Create})}),[d,u,e.store]);(0,n.useEffect)((()=>()=>{o(347469).OZ(e.store.getTitleStore())}),[e.store]);const S=(0,o(56366).K8)((()=>e.store.recordStoreParentDiffersFromPersistedParent()),[e.store]);return(0,l().NW)(e.store,t,(0,n.useMemo)((()=>({renderedType:"page",getNode:()=>p.current,getBlockStore:()=>e.store,activate:y,handleCreated(){y(),o(732770).A.setKeyboardMode(!1)}})),[y,e.store]),(0,c.jsx)(o(155004).s,{allowSelectionWithin:!1,onMouseOver:_,onMouseOut:b,ref:p,children:(0,c.jsx)(o(599945).c,{step:"demo_sub_page",store:e.store,children:(0,c.jsx)(o(54432).A,{ref:m,store:e.store,style:{...f,...e.style},isAlias:S,disabled:e.disabled,onClick:v})})}))}const u=n.memo(n.forwardRef(d),o(821062).A)},269643:(e,t,o)=>{function n(e,t,o){return e.getSpaceIdCreatorSync(t).deterministicIdInSavedSpace("collection_view",`${o}-settings`)}o.d(t,{D:()=>n})},270710:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{}}isActive(){return Boolean(this.state.clonedBlockStore)}}const r=new n},271372:(e,t,o)=>{o.d(t,{D2:()=>d,gq:()=>l,vl:()=>c});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(430670),o(581454);var n=()=>o(455348),r=()=>o(179034),i=()=>o(372657),a=()=>o(108944),s=()=>o(895876);function l(e){let{environment:t,typedDatabases:o,spaceStore:n,joinedTeamIds:r,blocksToFilterParents:i}=e;return function(e){let{environment:t,typedDatabases:o,spaceStore:n,joinedTeamIds:r}=e;const{sharedDatabases:i,privateDatabases:a,restrictedDatabases:l,teamDatabases:c}=(0,s().uK)({environment:t,typedCollections:o,spaceStore:n}),d=Object.values(l),u=Object.values(a),p=Object.values(i),m=function(e){let{teamDatabases:t,joinedTeamIds:o}=e;const n=[];for(const[i,a]of Object.entries(t))for(const e of a)n.push([i,e]);if(0===n.length)return[];const r=new Map([...o,...Object.keys(t).filter((e=>!o.includes(e)))].map(((e,t)=>[e,t])));return Object.entries(t).flatMap((e=>{let[t,o]=e;return o.map((e=>({teamIndex:r.get(t),name:String(e.getName()),store:e})))})).sort(((e,t)=>e.teamIndex-t.teamIndex||e.name.localeCompare(t.name))).map((e=>e.store))}({teamDatabases:c,joinedTeamIds:r});return[...m,...p,...u,...d]}({environment:t,spaceStore:n,typedDatabases:c({typedDatabases:o.filter((e=>{const t=(0,a().Uo)(e);return!t||!t.isArchived()})),blocksToFilterParents:i}),joinedTeamIds:r})}function c(e){let{typedDatabases:t,blocksToFilterParents:o}=e;const n=o?new Set((0,i().rD)(o)):void 0;return t.filter((e=>{if(!e.canEdit())return!1;if(!n)return!0;const t=e.getParentPointer();return!t||t.table!==r().ev||!n.has(t.id)}))}function d(e){const t=e.getPropertyMapping(),o=e.getSchema();return n().u9.toViewSchema(o,t)}},271584:(e,t,o)=>{o.d(t,{d:()=>n,o:()=>r});const n=(0,o(498212).Ay)(),r=18e5},274511:(e,t,o)=>{o.d(t,{j:()=>i,U:()=>a});var n=()=>o(645873);const r=new(n().O2)("moveTo",(()=>Promise.all([o.e(23806),o.e(75134),o.e(90409),o.e(74562),o.e(95794),o.e(28271),o.e(17254),o.e(67435),o.e(1440),o.e(49471),o.e(76983)]).then(o.bind(o,844545)))),i=(0,n()._h)(r,(e=>e.MoveToMenuRenderer));async function a(){return(await o.e(4876).then(o.bind(o,450486))).moveToTeamImpl}},276282:(e,t,o)=>{o.d(t,{A:()=>r});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);class n extends(()=>o(757695))().default{getInitialState(){return{updatingUrls:new Set}}add(e){this.state.updatingUrls.add(e),this.emit()}delete(e){this.state.updatingUrls.delete(e),this.emit()}}const r=new n},276470:(e,t,o)=>{o.d(t,{e:()=>g});o(944114),o(898992),o(672577),o(581454);var n=()=>o(857639),r=()=>o(436604),i=()=>o(386164),a=()=>o(388821),s=()=>o(696706),l=()=>o(534177),c=()=>o(520348),d=()=>o(508496),u=()=>o(83573),p=()=>o(449506);const m=new(o(56322).A)({performRequests:async e=>{const t=d().default.checkGate({gateName:"multi_cell_sync_record_values"}),s=new Array(e.length),m=e.map(((e,t)=>({environment:e.environment,request:e.args,index:t}))),g=o(496603).$z(m,(e=>e.request.userId));for(const[h,_]of Object.entries(g)){const e=_[0].environment,m=[];if(t){const{mainDbObjects:t,spaceCellObjects:a,spaceCellObjectsWithShortSpaceId:s,spaceCellObjectsMissingSpaceId:u}=(0,c().Qs)(_.map((e=>{let{request:{pointer:t,version:o}}=e;return{pointer:t,version:o}})),(e=>e.pointer)),g=[];0!==t.length&&g.push({endpointType:"main",requests:t});for(const[e,n]of Object.entries(a)){var f;const t=null===(f=n.find((e=>{var t;const n=null===(t=e.pointer)||void 0===t?void 0:t.id;return(0,l().O9)(n)&&(0,o(498212)._q)(n)})))||void 0===f||null===(f=f.pointer)||void 0===f?void 0:f.id,r=(0,i().WS)({cellId:void 0,recordId:t,spaceId:e});g.push({endpointType:"space",cellHeaders:r,requests:n})}if(0!==u.length){n().rateLimitedLog({level:"info",from:"syncRecordValuesBatched",type:"recordPointerMissingSpaceId",data:{miscDataToConvertToString:{requests:u}}});const t=(0,c().L8)(e);let o;if(r().B3 in t&&(o=t[r().B3]),o){const e=g.find((e=>{var t;return(null===(t=e.cellHeaders)||void 0===t?void 0:t[r().B3])===o}));e?e.requests.push(...u):g.push({endpointType:"space",requests:u})}else g.push({endpointType:"space",requests:u})}for(const[e,o]of Object.entries(s)){var v;const e=(0,i().WS)({cellId:void 0,recordId:null===(v=o[0].pointer)||void 0===v?void 0:v.id,spaceId:void 0});g.push({endpointType:"space",cellHeaders:e,requests:o})}await o(763824).lX(g,20,(async t=>{const{requests:o,cellHeaders:n,endpointType:r}=t;if("main"===r){const t=await p().callApi({eventName:"syncRecordValuesMain",environment:e,data:{requests:o},userId:"undefined"===h?void 0:h,headers:n??{}});m.push(t)}else if("space"===r){if(d().default.checkGate({gateName:"sync_record_values_fanout"})){const t=p().callMultiCellApi({eventName:"syncRecordValuesSpace",environment:e,data:{requests:o},userId:"undefined"===h?void 0:h,headers:n??{}});for await(const e of t)m.push(e)}else{const t=await p().callApi({eventName:"syncRecordValuesSpace",environment:e,data:{requests:o},userId:"undefined"===h?void 0:h,headers:n??{}});m.push(t)}}else(0,l().HB)(r)}))}else{const t=_.map((e=>{let{request:{pointer:t,version:o}}=e;return{pointer:t,version:o}})),o=await p().callApi({eventName:"syncRecordValues",environment:e,data:{requests:t},userId:"undefined"===h?void 0:h});m.push(o)}const g=a().RecordMapWithRole.create();let b;for(const t of m)"failed"!==t.type?g.assign(a().RecordMapWithRole.create(t.data.recordMap)):(b||(b=t.error),n().rateLimitedLog({level:"error",from:"syncRecordValuesBatched",type:"responseError",error:t.error}));if(b)throw b;u().A.addFromRecordMapWithRole(g),u().A.isEmpty()||o(633457).lK({environment:e});for(const{request:t,index:o}of _)if(t.pointer){const e=g.getValue(t.pointer),n=g.getRole(t.pointer);n&&(s[o]={value:e,role:n})}}return s},batchSize:500,maxWorkers:2,requestDelayMs:20,requestTimeoutMs:30*o(720665).TD});async function g(e,t){if(t.pointer&&(0,s().TX)(t.pointer))try{const o=await m.enqueue({environment:e,args:t});return o||-1!==t.version?o:{value:void 0,role:"editor"}}catch(o){if(console.error("syncRecordValue error",o),t.shouldThrowError)throw o}}},278589:(e,t,o)=>{o.d(t,{N:()=>i});var n=()=>o(534177),r=()=>o(126126);function i(e){return"avatar"===e?r().eQ:"xsmall"===e?18:"small"===e?28:"medium"===e?36:"large"===e?50:"xlarge"===e?94:"plans"===e?20:"deep_dive"===e?16:(0,n().HB)(e)}},278715:(e,t,o)=>{o.d(t,{A:()=>r});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);class n extends(()=>o(757695))().default{getInitialState(){return{bypassedPageIds:new Set}}bypassedPage(e){return this.state.bypassedPageIds.has(e)}bypassPage(e){this.state.bypassedPageIds.add(e),this.emit()}}const r=new n},278768:(e,t,o)=>{o.d(t,{EA:()=>c,FZ:()=>p,Kn:()=>h,OE:()=>_,Om:()=>b,T8:()=>f,X0:()=>u,Y7:()=>s,_J:()=>y,bt:()=>a,d7:()=>g,hy:()=>m,kF:()=>S,wG:()=>v,x8:()=>d,ym:()=>l});var n=()=>o(989423),r=()=>o(644914),i=()=>o(508496);function a(e,t){n().u4({environment:e,event:{eventName:"open_settings",eventProperties:{...t,...(0,r().hX)({environment:e})}}})}function s(e,t){n().vd(e,"toggle_settings_tab",t)}function l(e,t){n().vd(e,"site_settings_action",t)}function c(e){n().vd(e,"upload_profile_photo")}function d(e,t){n().vd(e,"name_changed",t)}function u(e){n().vd(e,"delete_account_clicked")}function p(e){n().vd(e,"delete_account_confirmed")}function m(e){n().vd(e,"log_out_from_active_sessions_clicked")}function g(e){n().vd(e,"change_password_clicked")}function f(e){n().vd(e,"remove_password_clicked")}function v(e,t){n().vd(e,"locale_changed",t)}function h(e,t){n().vd(e,"change_locale_clicked",t)}function _(e,t){n().vd(e,"invite_link_updated",t),i().default.logEvent("invite_link_updated",String(t.enabled),t)}function b(e,t){n().vd(e,"allowed_email_domains_updated",t)}function y(e,t){n().vd(e,"security_settings_tab_changed",t)}function S(e,t){n().vd(e,"cdrr_setting_updated",t)}},280335:(e,t,o)=>{o.d(t,{Z:()=>n});const n=(0,o(340498).xh)("exclamationMarkTriangle",{default:{loader:()=>o.e(11674).then(o.bind(o,311674))},small:{loader:()=>o.e(12720).then(o.bind(o,112720))},mini:{loader:()=>o.e(4964).then(o.bind(o,304964))},large:{loader:()=>o.e(88580).then(o.bind(o,888580))}})},281322:(e,t,o)=>{o.d(t,{r:()=>r});const n={shift:!1,option:!1,control:!1,command:!1};function r(){return n}function i(e){n.shift=Boolean(e.shiftKey),n.option=Boolean(e.altKey),n.control=Boolean(e.ctrlKey),n.command=Boolean(e.metaKey)}window.addEventListener("keydown",i),window.addEventListener("keyup",i),window.addEventListener("mousemove",i),window.addEventListener("focus",(function(e){n.shift=!1,n.option=!1,n.control=!1,n.command=!1}))},281948:(e,t,o)=>{o.d(t,{ET:()=>m,NQ:()=>p,VU:()=>u});var n=()=>o(584262),r=()=>o(172385),i=()=>o(492414),a=()=>o(351360),s=()=>o(712505),l=()=>o(645302),c=()=>o(661920),d=()=>o(435009);function u(e){const{environment:t,store:o,peekMode:l,openInNew:u,showMoveTo:p,saveParent:m,resultsStore:g,collectionContextStore:f,pageVisitSource:v}=e,h=e.currentBlockStore??a().default.state.mainEditorCurrentBlockStore;let _;if("chat"===t.RouterStore.state.route.name&&"side_peek"===l){const e=o.getNavigableBlockStore();if(!e)return;_=(0,r().EY)({pageId:e.id,scrollToBlockId:void 0,pageVisitSource:n().y8.AIChat,isMobile:t.device.isMobile})}else _=Boolean(u)||"full_page"===l||!h?(0,i().J8)({store:o,fullyQualified:!1,showMoveTo:p,saveParent:m,pageVisitSource:v}):(0,i().J8)({store:h,peekViewBlockId:o.id,peekMode:(0,s().getUrlParamFromPeekMode)(l),fullyQualified:!1,showMoveTo:p,saveParent:m,pageVisitSource:v});d().oo({environment:t,url:_,openInNew:u}),c().DN({resultsStore:g,collectionContextStore:f,pageVisitSource:v})}function p(){const{resultsStore:e}=s().default.state,t=null==e?void 0:e.getState();if(s().default.state.open&&t){const{targetStore:e}=s().default.state,o=t.findIndex((t=>t.id===e.id)),{mainEditorCurrentBlockStore:r}=a().default.state;if(r&&o>0){const e=(0,i().J8)({store:r,fullyQualified:!1,peekViewBlockId:t[o-1].id,peekMode:(0,s().getUrlParamFromPeekMode)(s().default.state.mode),pageVisitSource:n().y8.PeekScroll});d().oo({environment:r.environment,url:e}),l().EK(r.environment,{direction:"up"})}}}function m(){const{resultsStore:e}=s().default.state,t=null==e?void 0:e.getState();if(s().default.state.open&&t){const{targetStore:e}=s().default.state,o=t.findIndex((t=>t.id===e.id)),{mainEditorCurrentBlockStore:r}=a().default.state;if(r&&o<t.length-1){const e=(0,i().J8)({store:r,fullyQualified:!1,peekViewBlockId:t[o+1].id,peekMode:(0,s().getUrlParamFromPeekMode)(s().default.state.mode),pageVisitSource:n().y8.PeekScroll});d().oo({environment:r.environment,url:e}),l().EK(r.environment,{direction:"down"})}}}},281994:(e,t,o)=>{o.d(t,{HI:()=>f,ZU:()=>g,dL:()=>u});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(970013),r=()=>o(452540),i=()=>o(999515),a=()=>o(247331),s=()=>o(443881),l=()=>o(501053),c=()=>o(490704),d=()=>o(433847);function u(e){return p({...e,depth:0,visitedPointers:new Set})}function*p(e){const{depth:t,formulasModule:o,permission:r,spaceId:i,typecheckContextValues:l,visitedPointers:d}=e,u=[];if(t>a().FORMULA_MAX_DEPTH)return u;const p=(0,c().MP)({formulas:o,formulaTypecheckContextValues:l,spaceId:i,value:r.value});for(const a of p){const e=(0,s().G7)(a);if(!d.has(e))if((0,n().pq)(a)){const e=yield*m({depth:t,formulasModule:o,minimumRole:r.minimumRole,pointer:a,spaceId:i,typecheckContextValues:l,visitedPointers:d});u.push(...e)}else d.add(e),u.push({minimumRole:r.minimumRole,pointer:{id:a.id,spaceId:a.spaceId,table:a.table},type:"record_permission"})}return u}function*m(e){const{depth:t,formulasModule:o,minimumRole:r,pointer:c,spaceId:d,typecheckContextValues:u,visitedPointers:g}=e,f=[],v=(0,s().G7)(c);if(g.has(v))return f;g.add(v),f.push({minimumRole:r,pointer:{id:c.id,spaceId:c.spaceId,table:c.table},type:"record_permission"});const h=yield*i().q.fetchRecord(c);if(!h)return f;const _=h.getNormalizedSchema(),b=_[c.propertyId];if(!b)return f;if((0,n().nC)(b)){const e=(0,n().Nv)(b);e&&f.push({minimumRole:r,pointer:e,type:"record_permission"})}else if((0,n().bT)(b)){if(!b.relation_property||!b.target_property)return f;const e=_[b.relation_property];if(!e||"relation"!==e.type)return f;const a=(0,n().Nv)(e);if(!a)return f;const s=yield*i().q.fetchRecord(a);f.push({minimumRole:r,pointer:a,type:"record_permission"});const l=(null==s?void 0:s.getNormalizedSchema())??{};if(b.target_property_type){const e=l[b.target_property];if(e&&b.target_property_type===e.type){const n="formula"===e.type?t+1:t,i=yield*m({depth:n,formulasModule:o,minimumRole:r,pointer:{...a,propertyId:b.target_property},spaceId:d,typecheckContextValues:u,visitedPointers:g});f.push(...i)}}}else if((0,n().lb)(b))if("v2"===b.version){var y;if(null!==(y=b.formula2)&&void 0!==y&&y.code){const e=yield*p({depth:t+1,formulasModule:o,permission:{minimumRole:r,value:{type:"formula",value:b.formula2.code}},spaceId:d,typecheckContextValues:[{kind:a().FormulaContextValueKind.ThisRow,type:{collection:c,type:"block"}}],visitedPointers:g});f.push(...e)}}else{const e=(0,l().kh)(b.formula);for(const n of e){const e=_[n];if(!e)continue;const i="formula"===e.type?t+1:t,a=yield*m({depth:i,formulasModule:o,minimumRole:r,pointer:{...c,propertyId:n},spaceId:d,typecheckContextValues:u,visitedPointers:g});f.push(...a)}}return f}function g(e){const{formulaValueTypes:t,minimumRole:o,targetId:n,formulasModule:r}=e,i=r.findFormulaTypecheckContextValue(t,n);if(i){const e=i.type;if("array"===e.type&&"block"===e.of.type&&e.of.collection)return[{type:"record_permission",pointer:e.of.collection,minimumRole:o??"reader"}];if("block"===e.type&&e.collection)return[{type:"record_permission",pointer:e.collection,minimumRole:o??"reader"}]}return[]}function f(e){const t=new Map;for(const o of e){const e=(0,r().wx)(o.pointer),n=t.get(e);n&&!(0,d().Pr)(o.minimumRole,n.minimumRole)||t.set(e,o)}return[...t.values()]}},282883:(e,t,o)=>{o.d(t,{En:()=>a,nH:()=>i});var n=()=>o(939768),r=()=>o(66689);function i(e){return(0,n().FB)(e)}const a=[r().yx.Status,r().yx.Priority,r().yx.Assign]},284030:(e,t,o)=>{o.d(t,{u:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("googleDriveColor",{viewBox:"0 0 87.3 78",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{fill:"#0066da",d:"M6.6 66.85l3.85 6.65c.8 1.4 1.95 2.5 3.3 3.3L27.5 53H0c0 1.55.4 3.1 1.2 4.5z"}),(0,n.jsx)("path",{fill:"#00ac47",d:"M43.65 25L29.9 1.2c-1.35.8-2.5 1.9-3.3 3.3l-25.4 44A9.06 9.06 0 000 53h27.5z"}),(0,n.jsx)("path",{fill:"#ea4335",d:"M73.55 76.8c1.35-.8 2.5-1.9 3.3-3.3l1.6-2.75L86.1 57.5c.8-1.4 1.2-2.95 1.2-4.5H59.798l5.852 11.5z"}),(0,n.jsx)("path",{fill:"#00832d",d:"M43.65 25L57.4 1.2C56.05.4 54.5 0 52.9 0H34.4c-1.6 0-3.15.45-4.5 1.2z"}),(0,n.jsx)("path",{fill:"#2684fc",d:"M59.8 53H27.5L13.75 76.8c1.35.8 2.9 1.2 4.5 1.2h50.8c1.6 0 3.15-.45 4.5-1.2z"}),(0,n.jsx)("path",{fill:"#ffba00",d:"M73.4 26.5l-12.7-22c-.8-1.4-1.95-2.5-3.3-3.3L43.65 25 59.8 53h27.45c0-1.55-.4-3.1-1.2-4.5z"})]})})},284611:(e,t,o)=>{o.d(t,{b:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M16.153 5.05a2.875 2.875 0 0 0-5.75 0v3.6a2.875 2.875 0 1 0 5.75 0zm-4.5 3.6v-3.6a1.625 1.625 0 1 1 3.25 0v3.6a1.625 1.625 0 1 1-3.25 0"}),(0,n.jsx)("path",{d:"M8.013 10.732a.625.625 0 0 1 .87.16 5.33 5.33 0 0 0 4.395 2.308 5.33 5.33 0 0 0 4.395-2.309.625.625 0 1 1 1.029.71 6.58 6.58 0 0 1-4.8 2.82v1.929h3.426a.625.625 0 0 1 0 1.25h-8.1a.625.625 0 1 1 0-1.25h3.425v-1.93a6.58 6.58 0 0 1-4.8-2.818.625.625 0 0 1 .16-.87m1.206-6.607H2.25a.625.625 0 1 0 0 1.25h6.969zm-6.969 7h4.24c.119.401.283.83.505 1.25H2.25a.625.625 0 1 1 0-1.25"}),(0,n.jsx)("path",{d:"M2.25 14.625h6.269c-.5.272-.923.67-1.067 1.25H2.25a.625.625 0 1 1 0-1.25m0-7h6.969v1.25H2.25a.625.625 0 1 1 0-1.25"})]})},i=(0,o(340498).wt)("microphoneText",r)},285288:(e,t,o)=>{o.d(t,{A:()=>n});const n=(0,o(604341).exposeDebugValue)("PeekViewScrollerStore",new(o(17090).A))},286088:(e,t,o)=>{o.d(t,{B2:()=>M,FO:()=>B,K3:()=>P,Ku:()=>x,Ne:()=>A,Q9:()=>C,SB:()=>k,j0:()=>T,q2:()=>w,uP:()=>I});o(898992),o(354520),o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(416504),l=()=>o(591779),c=()=>o(450648),d=()=>o(534177),u=()=>o(884107),p=()=>o(862292),m=()=>o(951177),g=()=>o(812072),f=()=>o(972435),v=()=>o(906537),h=()=>o(141333),_=()=>o(351360),b=()=>o(430483),y=()=>o(195613),S=()=>o(285288);function w(){const e=(0,r().v3)(),t=(0,i().K8)((()=>e.device.isPhone),[e]);return(0,a().IS)((e=>{const o="dark"===e.mode?e.accentColors.purple[900]:e.accentColors.purple[400];return{purpleButton:{padding:4,fontWeight:600,color:o},keyboardShortcut:{textTransform:"uppercase",fontWeight:500,fontSize:11,marginLeft:6,color:e.lightTextColor,display:t?"none":void 0},lightweightButton:{display:"flex",alignItems:"baseline",justifyContent:"center",fontSize:14,padding:"5px 8px",borderRadius:6,color:e.mediumTextColor,height:32,marginTop:2},returnIndicatorIconStyles:{width:14,height:14,paddingLeft:4,fill:e.lightIconColor},keyboardShortcutInverted:{color:e.text.contrastSecondary,paddingLeft:4},writingLabel:{flex:1,color:o,fontWeight:500,flexDirection:"row",gap:6,display:"flex",alignItems:"center"},inputActions:{height:36,display:"flex",alignSelf:"flex-end",alignItems:"center"},loadingDots:{backgroundColor:o}}}),[t])}function k(e){if("completionPopup"===e.type||"assistantCompletionPopup"===e.type)return e}function I(e){return"initialPromptForAIBlock"===e.stage?"aiBlock":e.context.type}function A(e){return"initialPromptForAIBlock"===e.stage?"write":function(e){switch(e.type){case"cursor":return"write";case"blockSelection":case"textSelection":return"edit"}}(e.context)}function x(e){v().clear(e)}function C(e){if("initialPromptForAIBlock"===e.stage){const t=e.originRef.current;if(!t)return;return{origin:t.getBoundingClientRect(),scrollerStore:P(e.store.getRecordStoreUIRoot())}}return{origin:e.context.origin,scrollerStore:e.context.scrollerStore}}function T(e){const{areWeLoading:t,scrollerStore:o,resetWhenScrolledToBottom:r}=e,a=(0,l().ZC)(t);(0,n.useEffect)((()=>{t!==a&&c(!1)}),[t,a]);const[s,c]=(0,n.useState)(!1),d=(0,i().K8)((()=>(null==o?void 0:o.state.elementRef)??{current:null}),[o]),u=(0,h().yE)(d),p=(0,h().CR)(d),m=(0,h().o7)(d),g=(0,l().ZC)(u),f=p-m;return(0,n.useEffect)((()=>{void 0!==g&&void 0!==u&&g-u>1&&c(!0)}),[u,g]),(0,n.useEffect)((()=>{r&&void 0!==u&&void 0!==f&&Math.abs(u-f)<1&&c(!1)}),[f,u,r]),s}function M(e){const{scrollerRef:t,areWeLoading:o,unpauseAfterMs:r}=e,[a,s,l]=function(e){const t=(0,n.useRef)(e),[o,r]=(0,n.useReducer)(((e,o)=>{const n=o instanceof Function?o(e):o;return t.current=n,n}),e);return[o,t,r]}(!1),c=(0,n.useRef)(void 0),d=(0,i().K8)((()=>b().zD.disableWriterAutoFollow()),[]);return(0,n.useEffect)((()=>{const e=t.current;if(e&&!d){if(o){let t;const o=()=>{!1!==r&&(t&&window.clearTimeout(t),t=void 0)},n=()=>{if(!1===r)return;o();const e=c.current;e&&(t=window.setTimeout((()=>{e===c.current&&(c.current=void 0),l(!1)}),Math.max(0,r-(Date.now()-e))))};s.current&&n();const i=e=>{Math.abs(e.deltaY)>0&&0===e.deltaX&&(l(!0),c.current=Date.now(),n())};return e.addEventListener("wheel",i),()=>{o(),e.removeEventListener("wheel",i)}}c.current=void 0,l(!1)}}),[o,t,s,l,r,d]),d||a}function P(e){return e===_().default.state.mainEditorCurrentBlockStore?y().A:S().A}async function B(e,t){const o=f().A.getIntl(),n=(0,c().r4)({intl:o,textValue:t.getBlockTitleStore().getValue(),getRecordModel:t.getRecordModel,userTimeZone:(0,s().P)()}),r=t.getRenderableContentStores().map((e=>e.getValue())).filter(d().O9),i=await u().R.clipboardActions.load(),a=await p().T.formulas.load();return{title:n,content:[i.serializePagePropertiesAsText({rootBlock:{...t.pointer,spaceId:t.getSpaceId()},getRecordValue:t.getRecordValue}),(0,m().ZI)({rootBlock:{...t.pointer,spaceId:t.getSpaceId()},getRecordValue:t.getRecordValue,blockValues:r,isWindows:e.device.isWindows,markdownSerializationOptions:(0,g().ez)(),markdownLinkifyIt:void 0,formulasModule:a}).markdown].filter(d().O9).join("\n\n")}}},287133:(e,t,o)=>{o.d(t,{Lc:()=>p,Zm:()=>u});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"m4.897 3.085-.122-.142a.625.625 0 1 0-.95.814l.755.88A7.6 7.6 0 0 0 2.375 10v1.151L1.188 9.964a.625.625 0 1 0-.884.884l2.254 2.254c.244.244.64.244.884 0l2.254-2.254a.625.625 0 1 0-.884-.884l-1.187 1.187V10a6.35 6.35 0 0 1 1.772-4.41l8.258 9.634A6.35 6.35 0 0 1 10 16.375a6.35 6.35 0 0 1-4.338-1.703.625.625 0 0 0-.85.915A7.6 7.6 0 0 0 10 17.626a7.6 7.6 0 0 0 4.472-1.448l.754.88a.625.625 0 0 0 1.041-.67L4.989 3.228a.6.6 0 0 1-.093-.144M16.22 14.411A7.6 7.6 0 0 0 17.625 10V8.849l1.187 1.187a.625.625 0 1 0 .884-.884l-2.254-2.254a.625.625 0 0 0-.884 0l-2.254 2.254a.625.625 0 1 0 .884.884l1.187-1.187V10a6.35 6.35 0 0 1-.998 3.427zM7.435 4.162A6.35 6.35 0 0 1 10 3.625c1.676 0 3.2.646 4.338 1.703a.625.625 0 1 0 .85-.916A7.6 7.6 0 0 0 10 2.375a7.6 7.6 0 0 0-3.409.802z"})},r=(0,o(340498).wt)("arrowCircleLoopSlash",n);o(898992),o(672577);var i=()=>o(129522),a=()=>o(840790);async function s(e){const{environment:t,store:n}=e;if(!n.isTransclusionType())throw new(o(416845).yI)("Unknown transclusion type");const r=n.getRecordStoreUIParent();let s;if(s="transclusion_reference"===n.getType()?n.getTransclusionReferenceTargetStore():n,!r||!(0,o(299545).iU)(r)||!s)return;const l=function(e){return i().K.find((t=>t.getBlockStore()===e))}(s);if(!l)return;if("transclusion_container"===n.getType()){if(!(await l.confirmUnsyncTransclusionContainer()))return}else if(!(await l.confirmUnsyncTransclusionReference()))return;const c=(0,o(357625).UT)(t,o(526088).K,{block:{id:n.pointer.id,spaceId:(0,o(161479).e)(n.pointer.spaceId)}});"transclusion_reference"===n.getType()&&a().A.addUnsyncingBlockId(n.id);for await(const i of c)o(973647).Q.isSuccess(i)&&("started"===i.value.status||"succeeded"===i.value.status||("failed"===i.value.status?a().A.removeUnsyncingBlockId(n.id):(0,o(534177).HB)(i.value.status)))}var l=()=>o(878377),c=()=>o(416726);const d=(0,o(959013).YK)({unsyncTransclusionReferenceName:{id:"action.unsyncTransclusionReference.name",defaultMessage:"Unsync"},unsyncTransclusionReferenceFuzzySearch:{id:"action.unsyncTransclusionReference.fuzzySearchKeywords",defaultMessage:"Unsync ungroup"},unsyncTransclusionContainerName:{id:"action.unsyncTransclusionContainerName.name",defaultMessage:"Unsync all"},unsyncTransclusionContainerFuzzySearch:{id:"action.unsyncTransclusionContainer.fuzzySearchKeywords",defaultMessage:"Unsync all ungroup"}}),u=(0,c().Fw)({key:"unsyncTransclusionReference",displayName:d.unsyncTransclusionReferenceName,analyticsName:d.unsyncTransclusionReferenceName.defaultMessage,fuzzySearchKeywords:d.unsyncTransclusionReferenceFuzzySearch,svg:r,validators:[l().p2L,l().Lzj,l().vXb],shortcuts:["ungroup"],closeParentMenu:!0,action:e=>{s({environment:e.environment,store:e.blocks[0]})}}),p=(0,c().Fw)({key:"unsyncTransclusionContainer",displayName:d.unsyncTransclusionContainerName,analyticsName:d.unsyncTransclusionContainerName.defaultMessage,fuzzySearchKeywords:d.unsyncTransclusionContainerFuzzySearch,svg:r,validators:[l().p2L,l().fAV,l().vXb],shortcuts:["ungroup"],closeParentMenu:!0,action:e=>{s({environment:e.environment,store:e.blocks[0]})}})},287882:(e,t,o)=>{o.d(t,{J1:()=>a,PL:()=>s,Uw:()=>c,Vl:()=>i,rN:()=>d,sV:()=>l});var n=()=>o(720665),r=()=>o(869190);const i={days:n().i5,years:n().xq},a=10*i.years,s=1*i.days;function l(e){return e&&e%i.years==0?"years":"days"}function c(e,t){return e?Math.ceil(e/i[t]):30}function d(e,t){const o=l(e),n={[o]:c(e,o)};return(0,r().up)(n,t)}},289068:(e,t,o)=>{o.d(t,{Re:()=>be,SM:()=>ne,CF:()=>he});var n=()=>o(645873),r=(o(898992),o(672577),o(581454),o(296540)),i=()=>o(662303),a=()=>o(484714),s=()=>o(56366),l=()=>o(401497),c=()=>o(757695),d=()=>o(584262),u=()=>o(700500),p=()=>o(987555),m=()=>o(738418),g=()=>o(959013),f=()=>o(100622),v=()=>o(821062),h=()=>o(534177),_=()=>o(284371),b=()=>o(901389),y=()=>o(778417),S=()=>o(324089),w=()=>o(317909),k=()=>o(989423),I=()=>o(38337),A=()=>o(492414),x=()=>o(753199),C=()=>o(864145),T=()=>o(722872),M=()=>o(592678),P=()=>o(731320),B=()=>o(836251),R=()=>o(906537),E=()=>o(891078),D=()=>o(353643),N=()=>o(712505),L=()=>o(93658),F=()=>o(871399),U=()=>o(137586),O=()=>o(351360);const V=function(e){const t=(0,a().v3)(),n=(0,s().K8)(j,[]);return(0,r.useEffect)((()=>{if(!n)return t.LocalBacklinkStore.initializeBacklinks({block:{id:e.store.pointer.id,spaceId:(0,o(161479).e)(e.store.pointer.spaceId)},currentUserId:t.currentUser.id,environment:t}),()=>{t.LocalBacklinkStore.destroyBacklinks(e.store.id,t)}}),[t,n,e.store.id,e.store.pointer.id,e.store.pointer.spaceId]),null};function j(){const{mainEditorCurrentBlockStore:e}=O().default.state;return Boolean(e&&"15776535-3f2c-4705-bd45-474e5ba8b46c"===e.id)}var z=()=>o(155004),q=()=>o(145214),H=()=>o(704152),W=()=>o(406699),K=()=>o(296798),G=()=>o(331542),$=()=>o(928600),Y=()=>o(16006),Q=()=>o(89924),Z=()=>o(962036),X=()=>o(21140),J=()=>o(99945),ee=o(474848);const te=(0,g().YK)({copySuccessMessage:{defaultMessage:"Copied! Now paste in any page to sync content.",id:"transclusionContainerBlock.actions.copySuccessMessage"}});function oe(e,t){const n=(0,a().v3)(),i=(0,l().DP)(),d=(0,r.createRef)(),{disabled:p,referenceStore:m,store:v}=e,h=(0,r.useMemo)((()=>c().default.createValue(!1)),[]),_=(0,r.useMemo)((()=>c().default.createValue(!1)),[]),b=(0,r.useMemo)((()=>c().default.createValue(!1)),[]),A=(0,s().O$)(h),T=(0,s().K8)((()=>{const t=se(e.store,e.referenceStore);return(0,C().B)(t,A)}),[A,e.referenceStore,e.store]),N=(0,s().K8)((()=>!(T!==C().l.Selected&&T!==C().l.SelectedDescendant||o(170722).A.state.isActive||o(861841).Ay.state.isDragging||L().default.state.isActive||o(732770).A.state.isKeyboardMode)),[T]),F=(0,r.useMemo)((()=>new(o(496506).default)((()=>{const t=(0,o(900967).J)(e.store,n);return t.backlinksCount+t.inaccessibleBacklinkCount}),{debugName:"numberOfBacklinksStore"})),[n,e.store]),[U,O]=(0,r.useState)(void 0),j=(0,s().K8)((()=>e.store.getFormatStore().getKeyStore("unsync_transclusion_task_id").getValue()),[e.store]);(0,r.useEffect)((()=>{let e=!1,t=!1;return async function(){if(!j)return;const r=o(357625).BP({environment:n,eventName:o(526088).K,taskId:j});for await(const o of r){if(e)break;if("success"===o.taskStatus){O("succeeded");break}if("failure"===o.taskStatus){O(t?"failed_show_error":"failed");break}"in_progress"===o.taskStatus&&(t=!0,O("in_progress"))}}(),()=>{e=!0}}),[n,j]);const K=(0,s().K8)((()=>N?F.state:-1),[F,N]),G=(0,s().K8)((()=>!(!m||!m.pathIsDead())||!(!m||!(0,o(337567).dL)(m))),[m]),$=(0,s().K8)((()=>{if(o(780054).A.isAdminMode)return!1;if(p&&!G)return!0;const e=se(v,m);if(!e.canEdit())return!0;const t=e.findRecordStoreUIAncestor((t=>t!==e&&t instanceof o(630116).Bv&&t.getType()===u().xd.transclusionContainer));return Boolean(t.ancestor)}),[G,p,m,v]),Y=(0,s().K8)((()=>{if(!m||!v.canEdit()||!m.canEdit())return!1;const e=(0,P().i0)(v).map((e=>{let{permissionItem:t}=e;return t})),t=(0,P().i0)(m).map((e=>{let{permissionItem:t}=e;return t})),n=(0,o(433847).ny)(e,t).created.find((e=>!(0,o(68263).P3)(e)));return Boolean(n)}),[m,v]),Q=(0,s().K8)((()=>o(227440).A.state.online),[]),Z=(0,r.useCallback)((async()=>{y().td({environment:n,stores:[se(e.store,e.referenceStore)]});const t=await o(884107).R.clipboardActions.load(),r=d.current;r&&n.device.isSafari?(R().setOnNode(r,n.device),t.triggerBrowserCopy(),R().clear(n)):t.triggerBrowserCopy(),function(e){k().vd(e,"transclusion_container_copy_button")}(n),o(436572).D6({label:o(972435).A.formatMessage(te.copySuccessMessage),helpUrl:(0,B().xS)("guides.transclusions")})}),[n,d,e.referenceStore,e.store]),X=(0,r.useCallback)((()=>(0,ee.jsx)(fe,{store:e.store,hasDifferingReadPermissionsFromSource:Y})),[Y,e.store]),oe=(0,r.useCallback)((()=>{D().A.state.isDragging||L().default.state.isActive||$||h.setState(!0)}),[$,h]),ne=(0,r.useCallback)((()=>{D().A.state.isDragging||L().default.state.isActive||$||h.setState(!1)}),[$,h]),ie=(0,r.useCallback)((()=>{h.setState(!1),y().IU({environment:n});const t=e.store.getContentStores()[0];t&&t.getType()===u().xd.text&&(y().hc({environment:n,store:t}),o(725614).setSelectionAtStart({store:t.getBlockTitleStore()}))}),[n,h,e.store]),ae=(0,r.useCallback)((async()=>{if(0===F.state)return{canRemove:!0,canUndo:!0};const e=await re({header:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.remove.header",defaultMessage:"Delete original?"}),text:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.remove.text",defaultMessage:"These blocks are synced in {numberOfBacklinks, plural, one {{numberOfBacklinks} other page} other {{numberOfBacklinks} other pages}}. If you delete the original, the blocks will no longer be synced.",values:{numberOfBacklinks:F.state}}),acceptLabel:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.remove.confirm",defaultMessage:"Delete and unsync copies"})});return{canRemove:e,canUndo:e}}),[F]),pe=(0,r.useCallback)((async()=>0===F.state||re({header:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncTransclusionReference.header",defaultMessage:"Unsync this?"}),text:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncTransclusionReference.text",defaultMessage:"The selected blocks will no longer be synced with the original."}),acceptLabel:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncTransclusionReference.confirm",defaultMessage:"Unsync"})})),[F]),ve=(0,r.useCallback)((async()=>0===F.state||re({header:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncTransclusionContainer.header",defaultMessage:"Unsync all?"}),text:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncTransclusionContainer.text",defaultMessage:"{numberOfBacklinks, plural, one {{numberOfBacklinks} other page} other {{numberOfBacklinks} other pages}} will no longer sync with these blocks.",values:{numberOfBacklinks:F.state}}),acceptLabel:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncTransclusionContainer.confirm",defaultMessage:"Unsync all"})})),[F]),he=(0,r.useRef)(null),_e=()=>{const{isDesktop:t}=n.device;return(0,ee.jsxs)(ee.Fragment,{children:[Q&&(0,ee.jsx)(W().Ay,{popupType:W().z7.Popup,onClick:()=>function(e,t,o){y().td({environment:t,stores:[se(e,o)]}),function(e,t){k().vd(e,"transclusion_container_open_backlinks",t)}(t,{from:"action_bar"})}(e.store,n,e.referenceStore),originGap:4,renderOrigin:e=>(0,ee.jsxs)(H().A,{style:ce(i),...e,children:[K>0?(0,ee.jsx)(g().sA,{defaultMessage:"Editing in {icon} {numberOfBacklinks, plural, one {{numberOfBacklinks} other page} other {{numberOfBacklinks} other pages}}",id:"transclusionContainerBlock.editingMultiple",values:{icon:(0,o(576250).y)({width:14,transform:"rotate(180deg)",marginLeft:4,marginRight:4}),numberOfBacklinks:K}}):(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.editingOriginal",defaultMessage:"Editing original"}),Y&&(0,o(693954).Q)({width:14,fill:(0,f().k5)("orange",i).fill,marginLeft:6}),(0,o(668725).b)({width:10,fill:i.mediumIconColor,marginLeft:4})]}),render:X}),t&&(0,ee.jsx)(H().A,{style:ce(i),onClick:Z,children:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.copy",defaultMessage:"Copy and sync"})}),(0,ee.jsx)(o(496889).A,{store:se(e.store,e.referenceStore),fadeIn:!1,style:{width:30,height:void 0},iconStyle:{marginTop:1,fill:i.regularTextColor}})]})},be=(0,s().K8)((()=>e.store.pathIsDead()),[e.store]),ye=(0,s().K8)((()=>T!==C().l.Default||_.state||b.state),[T,_,b]),Se=(0,s().K8)((()=>!e.store.hasContent()),[e.store]),we=(0,s().K8)((()=>e.disabled||"in_progress"===U),[e.disabled,U]),ke=(()=>{const{store:t}=e,{device:o}=n,r=Boolean(e.referenceStore);return be&&r?(0,ee.jsx)(de,{store:e.store,blockType:"transclusion_container"}):$?(0,ee.jsx)(J().A,{disabled:we,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,store:e.store.getContentStore()}):(0,ee.jsxs)("div",{ref:he,className:I().lyN,style:{display:"flex"},children:[(0,ee.jsx)("span",{ref:d,style:{height:"1px",width:"1px"}}),(0,ee.jsxs)("div",{style:{display:"flex",flexDirection:"column",position:ye?"relative":void 0,paddingTop:3,paddingBottom:3,width:"100%"},onMouseLeave:ne,onMouseEnter:oe,onClick:Se?t=>function(e,t,o){(0,x().SQ)({event:e,context:x().y$.EditorClick,callback:()=>{(0,M().Vt)(e)||w().createAndCommit({userAction:"TransclusionContainerBlock.handleEmptyClick",environment:o,canUndo:!0,perform:e=>{S()._N({environment:o,store:t,transaction:e})}})}})}(t,e.store,n):void 0,children:[(0,ee.jsx)(ue,{unsyncStatus:U}),(0,ee.jsx)(J().A,{disabled:we,store:e.store.getContentStore(),emptyPlaceholder:(0,ee.jsx)(me,{}),disableHoverMenu:e.disableHoverMenu||T!==C().l.SelectedDescendant||G,disableDrag:o.isMobile}),(0,ee.jsx)(V,{store:t},t.id),ye&&(0,ee.jsx)(ge,{haloShouldBeVisibleStore:_,state:T}),ye&&(0,ee.jsx)(z().s,{allowSelectionWithin:!1,children:(0,ee.jsx)(q().A,{visible:N,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{b.setState(!0)},onAnimationEnd:()=>{N||b.setState(!1)},style:le(i),children:_e()})})]})]})})();return(0,E().NW)(e.store,t,(0,r.useMemo)((()=>({renderedType:"transclusion_container",getBlockStore:()=>e.store,getNode:()=>he.current,handleCreated:ie,canRemoveBlock:ae,confirmUnsyncTransclusionReference:pe,confirmUnsyncTransclusionContainer:ve})),[ae,ve,pe,ie,e.store]),ke)}const ne=r.memo(r.forwardRef(oe),v().A);function re(e){const{header:t,text:o,acceptLabel:n}=e;return new Promise((e=>{b().ui({showCancel:!0,keepFocus:!1,message:(0,ee.jsxs)("div",{children:[(0,ee.jsx)("div",{style:{fontWeight:_().Wy.semibold},children:t}),o]}),items:[{label:n,color:"red",onAccept:()=>{e(!0)}}],handleCancel:()=>{e(!1)}})}))}function ie(){return(0,ee.jsx)(g().sA,{defaultMessage:"Learn more about Synced blocks",id:"transclusionContainerBlock.learnMoreLabel"})}function ae(){return(0,ee.jsx)(Q().A,{topBorder:!0,children:(0,ee.jsx)(Z().A,{title:(0,ee.jsx)(ie,{}),href:(0,B().xS)("guides.transclusions"),analyticsFrom:"transclusion_container_block"})})}function se(e,t){return t||e}function le(e){return{position:"absolute",zIndex:85,top:-40,right:-2,borderRadius:6,height:32,fontSize:14,lineHeight:1.2,display:"flex",whiteSpace:"nowrap",fontFamily:_().vc(i().locale).sans,background:e.popoverBackground,boxShadow:e.shadowMD}}function ce(e){return{display:"flex",alignItems:"center",padding:"0 8px",borderRight:`1px solid ${f().Ay.whiteWithAlpha(.2)}`,boxShadow:`1px 0 0 ${e.regularDividerColor}`,marginRight:1}}function de(e){let{store:t,blockType:o}=e;const n=(0,l().DP)(),r=(0,s().K8)((()=>(0,A().Ay)({store:t,fullyQualified:!1,pageVisitSource:d().y8.LinkInPage})),[t]),i=(0,s().K8)((()=>(0,A().Ay)({store:t,openInSidePeek:!0,fullyQualified:!1,pageVisitSource:d().y8.PeekOpen})),[t]),a=(0,s().K8)((()=>N().default.isSidePeekOpen()),[]),c=(0,ee.jsx)(K().A,{href:r,altHref:i,forceAltHref:a,external:!1,inline:!0,underline:!0,children:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.deletedContainerBanner.viewDeletedPage",defaultMessage:"View deleted page"})});return(0,ee.jsxs)(X().Ye,{style:{color:n.text.secondary,background:n.accentColors.gray[30],padding:"16px 16px 16px 12px",borderRadius:4},alignItems:"center",children:[(0,m().G)({width:24,height:24,flexShrink:0,marginRight:10,padding:2}),(0,ee.jsx)("div",{style:{fontSize:14},children:(0,ee.jsx)(pe,{pageLink:c,blockType:o})})]})}function ue(e){let{unsyncStatus:t}=e;const o=(0,l().DP)();if(!t||"failed"===t)return null;return(0,ee.jsxs)(X().Ye,{style:{color:o.text.secondary,background:o.accentColors.gray[30],padding:"16px 16px 16px 12px",borderRadius:4},alignItems:"center",children:[(0,m().G)({width:24,height:24,flexShrink:0,marginRight:10,padding:2}),(0,ee.jsx)("div",{style:{fontSize:14},spellCheck:!1,children:(e=>{switch(e){case"in_progress":return(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncingInProgressBanner.inProgress",defaultMessage:"Unsync operation in progress"});case"failed_show_error":return(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncingInProgressBanner.failed",defaultMessage:"Unsync operation failed, please try again."});case"succeeded":return(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncingInProgressBanner.succeeded",defaultMessage:"Unsync operation completed successfully."});case"failed":return null;default:return(0,h().HB)(e)}})(t)}),(e=>{if("in_progress"===e)return(0,ee.jsx)(G().A,{style:{marginLeft:10}})})(t)]})}function pe(e){const{pageLink:t,blockType:o}=e;return o===u().xd.collectionView?(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.deletedContainerBanner.syncedContentPageDeleted.collection",defaultMessage:"The original database has been deleted and cannot be edited. {pageLink}",values:{pageLink:t}}):o===u().xd.transclusionContainer?(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.deletedContainerBanner.syncedContentPageDeleted.syncedBlock",defaultMessage:"The page with the original synced block has been deleted. {pageLink}",values:{pageLink:t}}):void(0,h().HB)(o)}function me(){const e=(0,l().DP)();return(0,ee.jsx)("div",{style:{caretColor:e.lightTextColor,color:e.lightTextColor,paddingTop:4,paddingBottom:4},children:(0,ee.jsx)(g().sA,{defaultMessage:"Click or drag blocks here, then paste in another page to sync content.",id:"transclusionContainerBlock.emptyEditingPlaceholder"})})}function ge(e){let{state:t,haloShouldBeVisibleStore:o}=e;const n=(0,s().K8)((()=>F().default.state.isOpen&&F().default.state.isHoveringPlusButton&&t===C().l.Hovered),[t]),r=t!==C().l.Default,i=(0,l().IS)((e=>({halo:{position:"absolute",left:-6,right:-6,top:-3,bottom:-3,pointerEvents:"none",borderRadius:8,border:`2px solid ${e.transclusionBorderColor}`}})),[]);return(0,ee.jsx)(q().A,{visible:r&&!n,initial:{opacity:0},animate:{opacity:t===C().l.Hovered?.45:1,scale:1},exit:{opacity:0},onAnimationStart:()=>{o.setState(!0)},onAnimationEnd:()=>{r||o.setState(!1)},className:I().ncb,style:i.halo})}function fe(e){let{store:t,hasDifferingReadPermissionsFromSource:o}=e;const n=(0,l().DP)(),r={menuType:T().gu.Popup,width:400},i=(0,s().K8)((()=>t.getNavigableBlockStore()),[t]),a=(0,s().K8)((()=>i&&(0,A().Ay)({store:i,fullyQualified:!1,pageVisitSource:d().y8.Breadcrumb})),[i]),c=o&&i?(0,ee.jsx)(K().A,{underline:!0,inline:!0,href:a,style:{color:n.mediumTextColor},children:(0,ee.jsx)(Y().A,{store:i,style:{display:"inline"},shouldWrap:!0,maxLength:30})}):void 0;return(0,ee.jsxs)($().A,{...r,children:[o&&i&&(0,ee.jsx)(Q().A,{style:{background:n.sidebarSecondaryBackground},children:(0,ee.jsxs)("div",{style:{display:"flex",fontSize:12,padding:"6px 16px"},children:[(0,p().T)({width:16,marginTop:6,marginRight:8,color:n.regularIconColor}),(0,ee.jsx)("div",{style:{flexGrow:1,minWidth:0},children:(0,ee.jsx)("span",{style:{overflowWrap:"break-word"},children:(0,ee.jsx)(g().sA,{defaultMessage:"Viewership permissions on this page are different from the original page <page></page>. Some members might not have access.",id:"transclusionContainerBlock.differingPermissionsWarning",values:{page:()=>c}})})})]})}),(0,ee.jsx)(Q().A,{topBorder:o,children:(0,ee.jsx)(U().A,{type:"transclusion_container",store:t,originalTransclusionStore:t,disableArrow:!0})}),(0,ee.jsx)(ae,{})]})}function ve(e,t){const n=(0,g().tz)(),i=(0,r.useRef)(null),a=(0,s().K8)((()=>e.store.getTransclusionReferenceTargetStore()),[e.store]),c=(0,s().K8)((()=>a&&a.canRead()),[a]),d=(0,s().K8)((()=>e.store.useCrdt()!==(null==a?void 0:a.useCrdt())),[e.store,a]),u=(0,l().IS)((e=>({paddedContainer:{paddingTop:8,paddingBottom:8}})),[]),p=(0,s().K8)((()=>null==a?void 0:a.isReady()),[a]);return(0,E().NW)(e.store,t,(0,r.useMemo)((()=>({renderedType:"transclusion_reference",getNode:()=>{const e=i.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(()=>{if(!a||!p)return null;if(!c)return(0,ee.jsx)(z().s,{allowSelectionWithin:!1,style:u.paddedContainer,children:(0,ee.jsx)(be,{targetStore:a})});const t=(0,ee.jsx)(ne,{store:a,disabled:e.disabled,intl:n,referenceStore:e.store,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,ref:i});return d?(0,ee.jsx)(z().s,{allowSelectionWithin:!0,children:(0,ee.jsx)(o(261237).c,{displayName:"TransclusionReferenceBlock.mixedCrdtTransclusion",disabled:!1,children:t})}):t})())}const he=r.memo(r.forwardRef(ve),v().A),_e={RestrictedTransclusionBlockContent:new(n().O2)("RestrictedTransclusionBlockContent",(async()=>Promise.all([o.e(23806),o.e(67032),o.e(2865)]).then(o.bind(o,190553))))},be=(0,n()._h)(_e.RestrictedTransclusionBlockContent,(e=>e.default))},289117:(e,t,o)=>{o.d(t,{Y:()=>n});function n(){return!1}},291050:(e,t,o)=>{o.d(t,{Ay:()=>d,Zw:()=>c});var n=o(296540),r=()=>o(662303),i=()=>o(819121),a=()=>o(401497),s=()=>o(284371),l=o(474848);const c={fontSize:12,paddingTop:2,paddingBottom:2};function d(e){const[t,o]=(0,n.useState)(!1),{isInComment:c}=e,d=(0,a().IS)((o=>({root:{width:"100%",fontSize:14,fontFamily:s().vc(r().locale).sans,color:o.mediumTextColor,borderRadius:4,background:o.embedPlaceholderBackground,position:"relative",...e.style},right:{position:"absolute",top:4,right:4,transition:"opacity 200ms ease-in",opacity:e.shouldHideRight&&!t?0:1},inner:{padding:12,paddingRight:36,display:"flex",alignItems:"center",textAlign:"left",width:"100%",overflow:"hidden",...c?{padding:"8px 10px 10px 8px",paddingRight:10,gap:10}:{}},iconContainer:c?{background:o.tint.regular,height:32,width:32,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}:{},icon:{width:25,height:25,flexShrink:0,marginRight:12,fill:o.mediumIconColor,...e.iconStyle},children:c?{color:o.text.secondary}:{}})),[e.style,e.shouldHideRight,e.iconStyle,t,c]);return(0,l.jsxs)("div",{style:d.root,onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,i().p)(t)&&o(!0)},onBlur:()=>o(!1),children:[(0,l.jsxs)("div",{style:d.inner,children:[(0,l.jsx)("div",{style:d.iconContainer,children:e.iconSvg(d.icon)}),(0,l.jsx)("div",{style:{...s().RC,...d.children},children:e.children})]}),e.right&&(0,l.jsx)("div",{style:d.right,children:e.right})]})}},291075:(e,t,o)=>{o.d(t,{o:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{currentScreen:"none",selection:{allSelected:!0,selectedRepos:[],excludedRepos:[],ingestNewRepos:!0},status:"not_started",sessionId:o(206267).JW(),analyticsFrom:"unknown",authUrl:void 0,githubOrg:void 0,isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,forceShowGithubAuthNotificationTriggeredAt:void 0,isLoaded:!1}}}const r=new n;(0,o(604341).exposeDebugValue)("githubAIConnectorStore",r)},292167:(e,t,o)=>{o.d(t,{s:()=>u});o(16280);var n=()=>o(584262),r=()=>o(700500),i=()=>o(179034),a=()=>o(343666),s=()=>o(780054),l=()=>o(108944),c=()=>o(630116),d=()=>o(246826);function u(e){const{environment:t,parentBlockStore:o,targetStore:u,transaction:p,isPagePreview:m}=e;if(!u.isDefined())throw new Error("Target store was not defined.");if(!o.isDefined())throw new Error("Parent block store was not defined.");const g=u instanceof c().Bv;let f;if(!g){if(l().Nq(u)&&u.isDefined()){const e=u.getParentStore(),t=null==e?void 0:e.getParentStore();var v;if(null!=e&&e.isDefined())f=null==t||null===(v=t.getModel())||void 0===v?void 0:v.getRenderUrl({getRecordModel:u.getRecordModel,baseUrl:s().A.domainBaseUrl,discussionId:e.id,pageVisitSource:n().y8.LinkInPage})}}const h=d().Wv({environment:t,type:r().xd.alias,format:{alias_pointer:{table:g?i().ev:a().SN,id:u.id,spaceId:u.getSpaceId()},comment_alias_url:f,alias_page_preview:m||void 0},spaceId:o.getSpaceId(),inMemoryRecordCache:o.inMemoryRecordCache,transaction:p}).pointer.id;return c().Bv.createChildStore(o.getContentStore(),{table:i().ev,id:h,spaceId:o.getSpaceId()})}},293596:(e,t,o)=>{o.d(t,{B:()=>n});o(944114);class n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};this.buckets={},this.count=0,this.total=0,this.unique=0,this.startedAt=new Map,this.logger=e}async measureErrors(e,t,o,n){const r=`${e} ${++this.unique}`;this.start(r);try{const e=await n();return this.end(r,t),e}catch(i){throw this.end(r,o,i),i}}get average(){return Math.floor(this.total/this.count)}get summary(){const e=[];e.push(`avg ${this.average}ms for ${this.count} calls`);for(const[t,n]of(0,o(534177).WP)(this.buckets)){if(!n)continue;const o=Math.floor(n.total/n.count),r=(n.count/this.count*100).toFixed(2);e.push(`[${t}: ${r}% avg ${o}ms]`)}return e.join(" ")}start(e){this.startedAt.set(e,"object"==typeof performance?performance.now():Date.now())}end(e,t){const o=this.startedAt.get(e);if(!o)return;this.startedAt.delete(e);const n=("object"==typeof performance?performance.now():Date.now())-o;this.count++,this.total=this.total+n;let r=this.buckets[t];r||(r={count:0,total:0},this.buckets[t]=r),r.count++,r.total=r.total+n;for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];this.logger(`end ${e} ${t}: ${n}ms`,...a)}}},294448:(e,t,o)=>{o.d(t,{J:()=>r});var n=()=>o(292588);const r={table:o(343666).SN,recordColumnTypes:{id:n().A.UUID,version:n().A.Number,last_version:n().A.Number,parent_id:n().A.UUID,parent_table:n().A.String,text:n().A.JSON,created_time:n().A.Number,last_edited_time:n().A.Number,alive:n().A.Boolean,created_by_table:n().A.String,created_by_id:n().A.UUID,space_id:n().A.UUID,content:n().A.UUIDArray,reactions:n().A.UUIDArray},metaColumnTypes:{meta_user_id:n().A.UUID,meta_role:n().A.String}}},294917:(e,t,o)=>{o.d(t,{J:()=>i});var n=()=>o(763884),r=()=>o(787812);function i(e){const{environment:t,groupFormat:o,toggleStateStore:i,newValue:a,collectionContextStore:s}=e,l=s.collectionViewStore();l&&(i.setState(a),n().A.set({userId:t.currentUser.id,key:(0,r().i)(l.id,o),value:a}))}},295169:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});o(16280);var n=()=>o(925193),r=()=>o(604341);const i=10*o(720665).Xb;class a extends(()=>o(757695))().default{constructor(){super(...arguments),this.nextSessionId=void 0}getInitialState(){return{activeAiSessionId:void 0,sessions:{},lastSessionInitializedUnixEpochTime:Date.now()}}clearAllSessions(){this.reset()}getActiveSessionId(){return this.state.activeAiSessionId}getNextSessionId(){return this.nextSessionId||(this.nextSessionId=(0,n().gC)()),this.nextSessionId}getNextSessionIdAndIncrement(){const e=this.getNextSessionId();return this.nextSessionId=(0,n().gC)(),e}getActiveSession(){const e=this.state.activeAiSessionId;if(e)return this.state.sessions[e]}getActiveAssistantConfigurationStore(){var e;return null===(e=this.getActiveSession())||void 0===e?void 0:e.assistantConfigurationStore}getActiveAssistantConfigurationState(){var e;return null===(e=this.getActiveAssistantConfigurationStore())||void 0===e?void 0:e.state}getSessionContext(e){return this.state.sessions[e]}getSessionContextOrThrow(e){const t=this.getSessionContext(e);if(!t)throw new Error("No assistant context for given session");return t}setActiveSessionId(e){this.update((t=>({...t,activeAiSessionId:e})))}setNewActiveSession(e){const{sessionId:t,context:o}=e;this.update((e=>({...e,activeAiSessionId:t,sessions:{...e.sessions,[t]:o},lastSessionInitializedUnixEpochTime:Date.now()})))}addNewSession(e){const{sessionId:t,context:o}=e;this.update((e=>({...e,sessions:{...e.sessions,[t]:o}})))}endCurrentSession(){this.update((e=>({...e,activeAiSessionId:void 0})))}setLastSessionInitializedUnixEpochTime(){this.update((e=>({...e,lastSessionInitializedUnixEpochTime:Date.now()})))}wasActiveSessionLastOpenedOutsideOfHistorySavedWindow(){const e=this.state.lastSessionInitializedUnixEpochTime;return!e||Date.now()-e>=i}}const s=new a,l=s;(0,r().exposeDebugValue)("AssistantRegistryStore",s),(0,r().exposeDebugValue)("getTranscript",(()=>{var e;const t=(null===(e=s.getActiveSession())||void 0===e?void 0:e.evaluator.getTranscript())??[];return JSON.stringify(t)}))},295740:(e,t,o)=>{o.d(t,{AD:()=>l,Hz:()=>v,Id:()=>S,b2:()=>y,cm:()=>p,dv:()=>i,hU:()=>h,ip:()=>d,ph:()=>s,qb:()=>f,sT:()=>b,sr:()=>w,tD:()=>u,t_:()=>g,xr:()=>k});var n=()=>o(713972);const r="data-content-editable-leaf",i={[r]:!0},a="data-content-editable-root",s={[a]:!0},l="data-content-editable-error",c="data-content-editable-root-tiny-selection-trap",d={[c]:!0},u="data-content-editable-selecting",p="data-content-editable-composing",m="data-content-editable-void",g={[m]:!0};function f(e){return n().vq(e)&&e.hasAttribute(r)}function v(e){return n().vq(e)&&e.hasAttribute(c)}function h(e){return Boolean(n().vq(e)&&e.querySelector(`[${r}]`))}function _(e){return n().vq(e)&&e.hasAttribute(a)}function b(e){return n().EV(e,f)}function y(e,t){return e.parentElement===t?e:n().EV(e,(e=>e.parentElement===t))||e}function S(e,t){if(!e||!t)return!1;const o=w(e),n=w(t);return Boolean(o&&o===n)}function w(e){const t=n().EV(e,(e=>_(e)||function(e){return n().vq(e)&&e.hasAttribute(m)}(e)));if(t&&_(t))return t}function k(e){return n().EV(e,(e=>function(e){return n().vq(e)&&e.hasAttribute(l)}(e)))}},296206:(e,t,o)=>{o.d(t,{Av:()=>_,BI:()=>h,Hp:()=>d,Q_:()=>g,Z3:()=>m,ZX:()=>p,bp:()=>s,dC:()=>u,l8:()=>f,o2:()=>l,qX:()=>v,sM:()=>c,wZ:()=>b});var n=()=>o(116225),r=()=>o(498212),i=()=>o(989423),a=()=>o(508496);function s(e,t){i().vd(e,"open_mention_menu",t),a().default.logEvent("open_mention_menu",void 0,t)}function l(e,t){const{clickIndexLocal:o,clickIndexGlobal:n}=t,r=void 0!==o?1/(o+1):void 0,s=void 0!==n?1/(n+1):void 0,l={...t,localReciprocalRank:r,globalReciprocalRank:s};i().vd(e,"insert_mention_from_mention_menu",l),a().default.logEvent("insert_mention_from_mention_menu",r,l)}function c(e,t){i().vd(e,"mention_menu_abandon",t),a().default.logEvent("mention_menu_abandon",void 0,t)}function d(e,t){i().vd(e,"mention_user",{mentioned_user_id:(0,r().ot)(t.user_id),mentioned_user_access_level:t.user_access_level,from:t.from,block_type:t.block_type,share_menu_selection:t.share_menu_selection}),a().default.logEvent("mention_user",t.user_access_level,t),t.is_current_user||"none"===t.user_access_level||"reader"===t.user_access_level||n().u4({name:"mention_other_user"})}function u(e,t){i().vd(e,"mention_group",{mentioned_group_id:(0,r().ot)(t.group_id),from:t.from,block_type:t.block_type})}function p(e,t){i().vd(e,"hover_mention_group",{group_id:(0,r().ot)(t.group_id)})}function m(e,t){i().vd(e,"hover_page_mention_start",t)}function g(e,t){i().vd(e,"hover_page_mention_end",t)}function f(e,t){i().vd(e,"page_mention_click",t)}function v(e,t){i().vd(e,"mention_date",t)}function h(e,t){i().vd(e,"mention_page",{mentioned_page_id:(0,r().ot)(t.page_id),from:t.from,block_type:t.block_type})}function _(e,t){i().vd(e,"hyperlink_hover",t),a().default.logEvent("hyperlink_hover",t.type,void 0)}function b(e,t){i().vd(e,"link_mention_hover",t),a().default.logEvent("link_mention_hover",t.type,void 0)}},296511:(e,t,o)=>{o.d(t,{V:()=>d,h:()=>c});var n=()=>o(38337),r=()=>o(921855),i=()=>o(129522),a=()=>o(24973),s=()=>o(989423);var l=()=>o(778417);function c(e){let{blockStore:t,entrypoint:o,environment:n}=e;const r=!t.getPropertyValue("alt_text");a().A.setState({open:!0,blockStore:t,originRect:u(t),isEmptyOnOpen:r}),function(e,t){s().vd(e,"alt_text_open",t)}(n,{entrypoint:o,is_empty:r})}function d(e){let t=0,o=!1;const n=a().A.state.blockStore;a().A.state.open&&null!=n&&n.getPropertyValue("alt_text")&&(t=(0,r().r4)(n.getPropertyValue("alt_text"),n).length,o=a().A.state.isEmptyOnOpen),function(e,t){s().vd(e,"alt_text_close",t)}(e,{number_of_characters:t,did_create:o}),a().A.setState({open:!1,blockStore:n}),l().IU({environment:e})}function u(e){var t;const o=i().K.findNodeFromStore(e);return o&&o instanceof Element?null===(t=o.querySelector(`.${n().bmm}`))||void 0===t?void 0:t.getBoundingClientRect():void 0}},297590:(e,t,o)=>{o.d(t,{L:()=>s});o(296540);var n=()=>o(959013),r=()=>o(719147);var i=o(474848);function a(e){let{errorId:t,showLink:o}=e;const n=t.slice(0,8);return o?(0,i.jsx)(r().A,{href:(a=t,`https://notion.sentry.io/issues/?query=id%3A${a}`),external:!0,children:n}):n;var a}function s(e){return(0,i.jsx)("span",{children:(0,i.jsx)(n().sA,{defaultMessage:"Error ID: {errorId}",id:"errorLabel.errorMessage.errorId",values:{errorId:a(e)}})})}},297727:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(959180))().A{}const r=new n},299545:(e,t,o)=>{o.d(t,{$R:()=>b,Bw:()=>B,Lz:()=>T,Md:()=>k,No:()=>j,O3:()=>R,P4:()=>F,Yu:()=>Y,_C:()=>X,_p:()=>y,bN:()=>w,c7:()=>S,dd:()=>z,eK:()=>K,eP:()=>q,g5:()=>$,gp:()=>W,hS:()=>J,hq:()=>E,iU:()=>ee,j3:()=>te,jA:()=>G,jP:()=>H,nw:()=>Q,oC:()=>N,qE:()=>L,rY:()=>P,uB:()=>O,uy:()=>D,wc:()=>V,wm:()=>U,zo:()=>C});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(430670),o(581454),o(908872);var n=()=>o(601813),r=()=>o(696706),i=()=>o(801634),a=()=>o(179034),s=()=>o(343666),l=()=>o(946064),c=()=>o(96689),d=()=>o(854150),u=()=>o(919709),p=()=>o(220719),m=()=>o(496603),g=()=>o(630116),f=()=>o(752885),v=()=>o(972435),h=()=>o(108944);const _=128;function b(e){return e.table===d().yK}function y(e){return e.table===a().ev}function S(e){return B(e,{recursivelyLoadAllDiscussions:!1}).filter(te)}function w(e){return(0,g().G_)(e,e.pointer,"discussions")}function k(e){let t=0;return e.findRecordStoreUIAncestor((o=>(o!==e&&e.id&&o.id===e.id&&o.table===e.table&&m().n4(e.path,o.path)&&t++,!1))),t>1}const I=new(f().p)({debugName:"recursiveChildBlocks",memoizeRecursion:!0,deepEquals:!1,compute:function(e,t){return A({blockStore:e,traverseTransclusionReferences:!0}).flatMap((e=>[e,..."page"===e.getType()?[]:t(e)]))}});function A(e){const{blockStore:t,traverseTransclusionReferences:n}=e;if(k(t))return[];return t.getContentStores().map((e=>{const t=e.getType();if(t){if("transclusion_reference"===t){if(!n)return;const t=e.getTransclusionReferenceTargetStore();return t||void 0}return e}})).filter(o(534177).O9)}const x=new(f().p)({debugName:"recursiveWihTransclusionChildBlocks",memoizeRecursion:!0,deepEquals:!1,compute:function(e,t){return A({blockStore:e,traverseTransclusionReferences:!1}).flatMap((e=>[e,..."page"===e.getType()?[]:t(e)]))}});function C(e){const{blockStore:t,transclusionReferences:o,childPages:n}=e,r=("recurseInto"===o?I:x).getStateFor(t);return"includeWithoutRecursion"===n?r:r.filter((e=>!e.isType("page")))}function*T(e){const{blockStores:t,traverseTransclusionReferences:o}=e;for(const n of t){yield n;for(const e of C({blockStore:n,transclusionReferences:o?"recurseInto":"omit",childPages:"omit"}))yield e}}const M=new(f().p)({debugName:"loadedDiscussionStores",memoizeRecursion:!1,deepEquals:!1,compute:function(e){const t=w(e),n=((null==t?void 0:t.getValue())||[]).map((t=>g().sk.createChildStore(e,r().L3.fromPointerLike({table:o(197959).$Y,id:t,spaceId:e.pointer.spaceId}))));return n.reverse(),n}});function P(e){return e.table===s().SN}function B(e,t){const o=t.excludeSelf?[]:[e],n=null!=t&&t.recursivelyLoadAllDiscussions?[...o,...C({blockStore:e,transclusionReferences:"recurseInto",childPages:"omit"})]:o,r=new Set;return n.flatMap(M.getStateFor).filter((e=>{if(!(null!=t&&t.includeLoadingDiscussions||e.isDefined()))return!1;if(r.has(e.id))return!1;if(null!=t&&t.onlyIncludePropertyDiscussions){if(void 0===e.getPropertyId())return!1}else if((null==t||!t.includePropertyDiscussions)&&void 0!==e.getPropertyId())return!1;return r.add(e.id),!0}))}function R(e,t){return D(B(e,t)).unresolved}function E(e,t){return D(B(e,t)).resolved}function D(e){const t=e.filter((e=>e.isDefined())),[o,n]=m().jB(t,(e=>e.getResolved()));return{resolved:o,unresolved:n}}function N(e,t){return(Array.isArray(e)?e:R(e,t)).reduce(((e,o)=>{const n=o.getModel();return n?t.onlyIncludeBlockLevelDiscussions&&!te(o)?e:e+(n.getComments()||[]).length:e}),0)}function L(e,t,o){let n=Array.isArray(e)?e:R(e,t);return o&&(n=n.filter((e=>e.getPropertyId()===o))),n.reduce(((e,o)=>{const n=o.getModel();return n?t.onlyIncludeBlockLevelDiscussions&&!te(o)?e:{comments:e.comments+(n.getComments()||[]).length,reactions:e.reactions+g().Lk.getUserVisibleReactions(o).length,hasSuggestionDiscussions:!!e.hasSuggestionDiscussions||"suggestion"===n.getType(),hasDefaultDiscussions:!!e.hasDefaultDiscussions||"default"===n.getType()}:e}),{comments:0,reactions:0,hasSuggestionDiscussions:!1,hasDefaultDiscussions:!1})}function F(e){return!!U(e)&&0===function(e,t){return R(e,t).length}(e,{recursivelyLoadAllDiscussions:!1})}function U(e){if("text"!==e.getType())return!1;const t=e.getBlockTitleStore().getValue();return(!t||!t.length)&&!e.hasContent()}function O(e){return(0,g().G_)(e,e.pointer,"comments")}function V(e){if(!e)return[];const t=O(e);return(t.getValue()||[]).map((e=>g().jg.createChildStore(t,{table:s().SN,id:e,spaceId:t.pointer.spaceId})))}function j(e){if(e.isDefined())return g().sk.createChildStore(e,e.getParentPointer())}function z(e){const t=q(e);return(t.getValue()||[]).map((o=>g().Bv.createChildStore(t,r().L3.fromPointerLike({table:a().ev,id:o,spaceId:e.pointer.spaceId}))))}function q(e){return(0,g().G_)(e,e.pointer,"content")}function H(e){return(0,g().G_)(e,e.pointer,"last_edited_time")}function W(e){return(0,g().G_)(e,e.pointer,"text")}function K(e){if(e.isDefined())return g().sk.createChildStore(e,e.getParentPointer())}function G(e,t,o){return g().sk.createChildStore(e,{table:i().kz,id:t,spaceId:o})}function $(e){if(e.isDefined())return G(e,e.getActivityId(),e.getSpaceId())}function Y(e){return e.table===c().NX}function Q(e){return e.table===l().y7}(0,o(604341).exposeDebugValue)("getDiscussionStores",B);const Z=m().nF((e=>{o(857639).log(e)}),500);function X(e){let t=e,o=0;for(;t;){if(!t.isReady())return!1;if(o>=_)return Z({level:"error",from:"recordStoreHelpers",type:"areAncestorsLoaded",data:{message:"max depth reached",miscDataToConvertToString:{maxDepth:_,id:e.id,table:e.table,currentStoreId:t.id,currentTable:t.table}}}),!1;o+=1,t=(0,h().KA)(t)}return!0}async function J(e){let t=e,o=0;for(;t;){if(t.isReady()||await t.load(),o>=_)return Z({level:"error",from:"recordStoreHelpers",type:"loadAncestors",data:{message:"max depth reached",miscDataToConvertToString:{maxDepth:_,id:e.id,table:e.table,currentStoreId:t.id,currentTable:t.table}}}),!1;o+=1,t=(0,h().KA)(t)}}function ee(e){return e.table===a().ev&&m().n4(e.path,["content"])}function te(e){if(!e.isDefined())return!1;if("suggestion"===e.getType())return!1;if(e.getPropertyId())return!1;const t=e.getContext(),o=t?(0,n().l8)({discussionContextData:t,discussionType:(0,p().o9)(e.getType()),discussionId:e.id,intl:v().A.getIntl()}):void 0;if(!o)return!0;return function(e){return 0===u().j2Y(e).length}(u().JJ$(o,(t=>!u().iQL(t)||u().Orm(t)===e.id)))}},299709:(e,t,o)=>{o.d(t,{E:()=>a});var n=()=>o(476492),r=()=>o(405417),i=()=>o(810519);function a(e){var t;const{environment:o,collectionContextStore:a,block_id:s,property:l,property_type:c,from:d,isFromBulkActionsToolbar:u,isUnthrottled:p,collection_id:m,...g}=e,f=(0,n().sl)(a,m)||{};let v;if(null!==(t=a.currentSubitemFormatStoreForCollectionStore.state)&&void 0!==t&&t.property){v=(0,r().Tk)({blockId:s,collectionContextStore:a})?"subitem":"parent_item"}else a.currentArrowsByFormatStore.state&&(v="timeline_arrows_by");(0,i().u)(o,{block_id:s,property:l,property_type:c,property_context:v,from:d,isFromBulkActionsToolbar:u,...g,...f},p||!1)}},299917:(e,t,o)=>{o.d(t,{Ay:()=>a,dC:()=>i,vt:()=>r});const n={};let r=function(e){return e[e.Javascript=0]="Javascript",e[e.Stylesheet=1]="Stylesheet",e}({});function i(e){const t=n[e];void 0!==t&&(t.element.remove(),delete n[e])}const a=function(e){let{resourceType:t=r.Javascript,id:o,attributes:i={},async:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=n[e];if(s)return s.loaded;let l;switch(t){case r.Javascript:if(l=document.createElement("script"),l.async=a,l.src=e,void 0!==o&&(l.id=o),void 0!==i)for(const e in i)l.setAttribute(e,i[e]);break;case r.Stylesheet:l=document.createElement("link"),l.href=e,l.type="text/css",l.rel="stylesheet"}const c=new Promise(((e,t)=>{l.addEventListener("load",(()=>{e(void 0)})),l.addEventListener("error",(()=>{t()}));document.getElementsByTagName("head")[0].appendChild(l)}));return n[e]={loaded:c,element:l},c}},300857:(e,t,o)=>{o.d(t,{b:()=>a});var n=()=>o(451306),r=()=>o(620689),i=()=>o(374026);function a(e){let{discussionId:t,blockId:o,environment:a,animate:s=!0}=e;const l=(0,i().S)({discussionId:t,blockId:o}),c=document.getElementsByClassName((0,n().wV)({discussionId:t}))[0];return!(!l||!c)&&(r().hT({element:c,environment:a,scrollerContext:l.getScrollerContext(),vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:s}),!0)}},301421:(e,t,o)=>{o.d(t,{n:()=>r});o(898992),o(672577);class n extends(()=>o(959180))().A{findEditableWithinSelectable(e){return this.find((t=>t.getContextClosestSelectable()===e))}findEditableWithStore(e){return this.find((t=>t.props.store===e))}findNodeFromStore(e){const t=this.findEditableWithStore(e);if(t)return t.getNode()}findStoreFromNode(e){const t=this.find((t=>t.getNode()===e));if(t)return t.props.store}}const r=new n},301523:(e,t,o)=>{o.d(t,{x:()=>a});var n=()=>o(720665),r=()=>o(246826),i=()=>o(299545);function a(e,t){const o=i().jP(e);r().KY({store:o,value:(0,n().WY)(Date.now()),transaction:t})}},301608:(e,t,o)=>{o.d(t,{Bt:()=>p,Eb:()=>i,Yr:()=>s,_v:()=>m,bo:()=>d,jf:()=>r,jy:()=>a,mj:()=>l,tV:()=>u,xV:()=>c});var n=()=>o(959013);const r=["last_7_days","last_28_days","last_90_days","all_time"];const i={last_7_days:7,last_28_days:28,last_90_days:90},a=((0,o(534177).u0)((e=>7===e||28===e||90===e?{true:e}:{false:e})),(0,n().YK)({last_7_days:{id:"spaceAnalyticsUserTab.dateFilter.last7days",defaultMessage:"Last 7 Days"},last_28_days:{id:"spaceAnalyticsUserTab.dateFilter.last28days",defaultMessage:"Last 28 Days"},last_90_days:{id:"spaceAnalyticsUserTab.dateFilter.last90days",defaultMessage:"Last 90 Days"},all_time:{id:"spaceAnalyticsUserTab.dateFilter.allTime",defaultMessage:"All Time"}})),s=(0,n().YK)({last_7_days:{id:"spaceAnalyticsUserTab.dateFilter.lowercase.last7days",defaultMessage:"last 7 days"},last_28_days:{id:"spaceAnalyticsUserTab.dateFilter.lowercase.last28days",defaultMessage:"last 28 days"},last_90_days:{id:"spaceAnalyticsUserTab.dateFilter.lowercase.last90days",defaultMessage:"last 90 days"},all_time:{id:"spaceAnalyticsUserTab.dateFilter.lowercase.allTime",defaultMessage:"all time"}});function l(e,t,o){const n=e||0,r=t||0;return o?n-r:r-n}function c(e,t,o){const n=e||-1,r=t||-1;return o?n-r:r-n}const d=(0,n().YK)({page:{id:"contentAnalyticsHeaderMessages.columnHeader.page",defaultMessage:"Page"},pageId:{id:"contentAnalyticsHeaderMessages.columnHeader.pageId",defaultMessage:"Page ID"},teams:{id:"contentAnalyticsHeaderMessages.columnHeader.teamspace",defaultMessage:"Teamspace"},audience:{id:"contentAnalyticsHeaderMessages.columnHeader.audience",defaultMessage:"Audience"},allViews:{id:"contentAnalyticsHeaderMessages.columnHeader.allViews",defaultMessage:"All views"},uniqueViews:{id:"contentAnalyticsHeaderMessages.columnHeader.uniqueViews",defaultMessage:"Unique views"},createdBy:{id:"contentAnalyticsHeaderMessages.columnHeader.createdBy",defaultMessage:"Created by"},createdAt:{id:"contentAnalyticsHeaderMessages.columnHeader.createdAt",defaultMessage:"Created at"},lastEditedBy:{id:"contentAnalyticsHeaderMessages.columnHeader.lastEditedBy",defaultMessage:"Last edited by"},lastEditedAt:{id:"contentAnalyticsHeaderMessages.columnHeader.lastEditedAt",defaultMessage:"Last edited at"}});const u={num_searches:"numSearches",num_unique_users:"numUniqueUsers",ctr:"ctr"},p={numSearches:"num_searches",numUniqueUsers:"num_unique_users",ctr:"ctr"};function m(e){return e<=1?"1":e<=50?"2-50":e<=100?"51-100":e<=500?"101-500":e<=1e3?"501-1000":e<=5e3?"1001-5000":"5001-plus"}},302022:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:o}=this.state;t?o[e]=!0:delete o[e],this.emit()}}const r=new n},302033:(e,t,o)=>{o.d(t,{A:()=>i});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(757695);class r extends n().default{constructor(){super(...arguments),this.containerDomNodeStore=n().default.createValue(null,{name:"containerDomNodeStore"})}getInitialState(){return{overlays:new Set}}}const i=r},303626:(e,t,o)=>{o.d(t,{N:()=>r});var n=()=>o(870618);const r=(0,o(604341).exposeDebugValue)("offlineDebugger",new class{constructor(){var e=this;this.enableLogging=!1,this.operationLatency={},this.log=function(t){if(e.enableLogging){for(var o=arguments.length,n=new Array(o>1?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];console.groupCollapsed(t,...n),console.trace(),console.groupEnd()}},this.generateLocalRecordMap=n().ww,this.getLocalRecord=n().h7,this.getLocalBlocksWithParent=n().wB}async measure(e,t,n){var r=this;const i=`OFFLINE: ${e}:`;return this.operationLatency[e]||(this.operationLatency[e]=new(o(293596).B)((function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r.log(i,...t)}))),this.operationLatency[e].measureErrors(t,"hit","miss",n)}trace(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];this.log("OFFLINE:",...t)}debug(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];this.log("OFFLINE:",...t)}traceMiss(e,t){for(var o=arguments.length,n=new Array(o>2?o-2:0),r=2;r<o;r++)n[r-2]=arguments[r];this.trace(`missed: record ${e}:${t}`,...n)}clearMemory(){o(666144).IL(window.__console.environment)}})},304740:(e,t,o)=>{o.d(t,{CN:()=>ne,L_:()=>J,Ql:()=>v,US:()=>se,Vp:()=>ee,WT:()=>oe,X6:()=>u,Xc:()=>m,ck:()=>H,dA:()=>te,n4:()=>le,pw:()=>re,q3:()=>p,rS:()=>z});o(944114),o(898992),o(354520),o(581454),o(737550),o(814603),o(147566),o(198721);var n=()=>o(496603),r=()=>o(939768),i=()=>o(720665),a=()=>o(700500),s=()=>o(522419),l=()=>o(735577),c=()=>o(861017),d=()=>o(919709);const u=930,p=320,m=708,g=700,f=500;function v(e,t){if(e&&t){const o=r().qg(e).pathname||"";return o.substring(o.length-t.length,o.length).toLowerCase()===t}return!1}const h=/^(https?:)?(\/\/)?app\.hex\.tech\/[^\/]+\/app\/[^\/]+/;const _=/^(https?:)?(\/\/)?embed\.deepnote\.com\/[^\/]+/;const b=/^(https?:)?(\/\/)?gist\.github\.com\/([^\/]+\/)?[0-9a-f]+/;const y=/^(https?:)?(\/\/)?(drive|docs|sheets)\.google\.com\/(open|(document|spreadsheets|presentation)\/d\/).+/;const S=/^(https?:)?(\/\/)?docs\.google\.com\/document\/d\/[^\/]+\/edit.*/;function w(e){return S.test(e.url)}const k=/^(https?:)?(\/\/)?docs\.google\.com\/presentation\/d\/[^\/]+\/edit.*/;function I(e){return k.test(e.url)}const A=/^(https?:)?(\/\/)?docs\.google\.com\/spreadsheets\/d\/[^\/]+\/edit.*/;const x=/^(https?:)?(\/\/)?(twitter|x)\.com\/[^\/]+\/status\/[^\/]+/;const C=/^(https?:)?(\/\/)?(www\.)?google\.com\/maps\/.+/;const T=/^(https?:)?(\/\/)?framer\.cloud\/.+/;const M=/^(https?:)?(\/\/)?(www\.)?whimsical\.com\/.+/,P=/^(https?:)?(\/\/)?(www\.)?whimsical\.com\/blog\/.+/;const B=/^(https?:)?(\/\/)?(www\.)?miro\.com\/app\/.+/;const R=/^(https?:)?(\/\/)?app\.abstract\.com\/share\/.+/,E=/^(https?:)?(\/\/)?share\.goabstract\.com\/.+/;const D=/^(https?:)?(\/\/)?sketch\.(com|cloud)\/s\/.+/;const N=/^(https?:)?(\/\/)?excalidraw\.com\/.+/;const L=/^(https?:)?(\/\/)?(replit\.com|repl\.it)\/.+/;const F=/^(https?:)?(\/\/)?invis\.io\/.+/,U=/^(https?:)?(\/\/)?invisionapp\.com\/.+/,O=/^(https?:)?(\/\/)?invisionapp\.com\/inside-design\/.+/;const V=/^(https?:)?(\/\/)?(?:eu\.)?mixpanel\.com\/(project|s|public|report|p)\/.+/;const j=[".png",".jpg",".jpeg",".gif",".tif",".tiff",".bmp",".svg",".heic",".webp"];function z(e){return(0,s().JB)(e.url)||(0,s().SR)(e.url)||j.some((t=>v(e.url,t)))}const q=[".mp3",".wav",".ogg",".oga",".m4a"];function H(e){return q.some((t=>v(e.url,t)))}const W=/^(https?:)?(\/\/)?(www\.)?youtube\.com\/[watch|embed].+/,K=/^(https?:)?(\/\/)?vimeo.com\/[0-9]+/;const G=/^(https?:)?(\/\/)?([\w\.-]+\.)?figma.com\/(file|proto|board|design|slides|deck)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/;const $=/^(https?:)?(\/\/)?(www\.)?(use)?loom\.com\/share\/.+/;const Y=/^(https?:)?(\/\/)?[\w\.]+\.typeform\.com\/to\/.+/,Q=/^(https?:)?(\/\/)?[\w\.]+\.typeform\.com\/.+/;const Z=/^(https?:)?(\/\/)?codepen\.io\/[^\/]+\/pen\/.+/;const X=[".webm",".mkv",".flv",".flv",".vob",".ogv",".ogg",".drc",".gifv",".mng",".avi",".mov",".qt",".wmv",".yuv",".rm",".rmvb",".asf",".amv",".mp4",".m4p",".m4v",".mpg",".mp2",".mpeg",".mpe",".mpv",".mpg",".mpeg",".m2v",".m4v",".svi",".3gp",".3g2",".mxf",".roq",".nsv",".flv",".f4v",".f4p",".f4a",".f4b"];function J(e){return X.some((t=>v(e.url,t)))}function ee(e){if(!(0,l().A)(e.url))return!1;const t=(0,c().parseRoute)({url:e.url,baseUrl:e.baseUrl,publicDomainName:e.publicDomainName,isMobile:!1,protocol:void 0,currentUrl:void 0});return!(0,c().Jx)(t)}const te={image:z,video:function(e){return J(e)||W.test(e.url)||K.test(e.url)},tweet:function(e){return x.test(e.url)},drive:function(e){return y.test(e.url)},gist:function(e){return b.test(e.url)},invision:function(e){return!z(e)&&!O.test(e.url)&&(F.test(e.url)||U.test(e.url))},framer:function(e){return T.test(e.url)},audio:H,maps:function(e){return C.test(e.url)},figma:function(e){return G.test(e.url)},loom:function(e){return $.test(e.url)},typeform:function(e){return Y.test(e.url)||Q.test(e.url)},codepen:function(e){return Z.test(e.url)},pdf:function(e){const t=r().qg(e.url);return Boolean(t.pathname&&t.pathname.indexOf(".pdf")>=0)},whimsical:function(e){return M.test(e.url)&&!P.test(e.url)},miro:function(e){return B.test(e.url)},abstract:function(e){return R.test(e.url)||E.test(e.url)},sketch:function(e){return D.test(e.url)},excalidraw:function(e){return N.test(e.url)},replit:function(e){return L.test(e.url)},embed:function(e){if(!(0,l().A)(e.url))return!1;const t=(0,c().parseRoute)({url:e.url,baseUrl:e.baseUrl,publicDomainName:e.publicDomainName,isMobile:!1,protocol:void 0,currentUrl:void 0});return!(0,c().Jx)(t)&&!i().HP(te).filter((e=>"embed"!==e)).map((e=>te[e])).some((t=>t(e)))},hex:function(e){return h.test(e.url)},mixpanel:function(e){return V.test(e.url)},deepnote:function(e){return _.test(e.url)},drawing:function(e){return!1}};function oe(e){const{preferredType:t}=e,o=i().HP(te),n=[];for(const r of o)if(te[r](e)){if(r===t&&"embed"!==t)return r;n.push(r)}return n.length>0?n[0]:"embed"}function ne(e){const{width:t,height:o,scale:n,type:r,pageWidth:i}=e,a={block_width:t,block_height:o,block_preserve_scale:Boolean(n),block_full_width:!1,block_page_width:!1};return"embed"===r||"pdf"===r?(a.block_page_width=!a.block_width,a.block_height=o||p):"video"===r&&o?(a.block_page_width=!0,a.block_aspect_ratio=o/t):"image"===r&&o?a.block_aspect_ratio=o/t:"audio"===r||"maps"===r?(a.block_width=void 0,a.block_page_width=!0):"whimsical"===r||"framer"===r||"miro"===r||"excalidraw"===r?(a.block_width=void 0,a.block_page_width=!0,a.block_height=400):"replit"===r&&(a.block_width=void 0,a.block_page_width=!0,a.block_height=600),t>i&&(a.block_page_width=!0,"image"!==r&&"video"!==r||(a.block_height=void 0)),a}async function re(e){const{type:t,isDataURL:o,source:n,trackEmbedType:r}=e;return function(e){const{type:t,isDataURL:o,url:n}=e;if(t===a().xd.tweet||t===a().xd.gist||t===a().xd.figma||t===a().xd.audio||t===a().xd.image||o||t===a().xd.invision||t===a().xd.pdf||t===a().xd.drive&&(w({url:n})||I({url:n})))return!0;return!1}({type:t,isDataURL:o,url:n})&&r(t),t===a().xd.tweet?function(e){const{source:t}=e;return{type:"tweet",properties:{source:d().x9d(t)},format:{display_source:void 0}}}(e):t===a().xd.gist?function(e){const{source:t}=e;return{type:"gist",properties:{source:d().x9d(t)},format:{display_source:void 0}}}(e):t===a().xd.figma?function(e){const{source:t}=e,o=t.replace("www.figma.com","embed.figma.com"),n=new URL(o);return n.searchParams.append("embed-host","notion"),n.searchParams.append("footer","false"),n.searchParams.append("theme","system"),{type:"figma",properties:{source:d().x9d(n.href.toString())},format:{display_source:void 0,block_height:p}}}(e):t===a().xd.audio?function(e){const{source:t}=e;return{type:"audio",properties:{source:d().x9d(t)},format:{display_source:void 0}}}(e):t===a().xd.image||o?function(e){const{source:t}=e;return{type:"image",properties:{source:d().x9d(t)},format:{display_source:t}}}(e):t===a().xd.invision?function(e){const{source:t}=e;return{type:"invision",properties:{source:d().x9d(t)},format:{display_source:void 0,block_height:p}}}(e):t===a().xd.pdf?function(e){const{source:t}=e;return{type:"pdf",properties:{source:d().x9d(t)},format:{display_source:void 0,block_height:p}}}(e):t===a().xd.drive&&w({url:n})?async function(e){const{source:t,type:o,pageWidth:n,getEmbedData:r}=e;if(t.includes("preview")){const e=await r({source:t,pageWidth:n,type:o});if(e&&!e.empty)return e}return{type:o,properties:{source:d().x9d(t)},format:{display_source:t,block_height:p}}}(e):t===a().xd.drive&&I({url:n})?async function(e){const{source:t,type:o,pageWidth:n,isMobileDevice:r,getEmbedData:i}=e,a=await i({source:t,pageWidth:n,type:o});if(a&&!a.empty)return a;return{type:o,properties:{source:d().x9d(t)},format:{display_source:t,block_height:r?p:f,block_width:g}}}(e):t===a().xd.drive&&function(e){return A.test(e.url)}({url:n})?async function(e){const{source:t,type:o,pageWidth:n,getEmbedData:r,isMobileDevice:i}=e;if(t.includes("preview")){const e=await r({source:t,pageWidth:n,type:o});if(e&&!e.empty)return e}return{type:o,properties:{source:d().x9d(t)},format:{display_source:t,block_height:i?p:f,block_width:g}}}(e):(r("generic"),async function(e){const{pageWidth:t,getEmbedData:o,source:n,type:r}=e,i=await o({source:n,pageWidth:t,type:r});if(i&&!i.empty)return i;let s=r,l={...ne({type:r,width:400,height:void 0,scale:!1,pageWidth:t}),display_source:n},c={source:d().x9d(n)};null!=i&&i.headerValidationFailed&&function(e){if("drive"===e||"figma"===e||"gist"===e||"invision"===e)return!1;return!0}(s)?(s=a().xd.bookmark,l={},c={link:d().x9d(n),title:d().x9d(n)}):(l={block_height:p},c={source:d().x9d(n)});return{type:s,properties:c,format:l}}(e))}const ie=["http:","https:"],ae="http:";function se(e){if((0,s().Nh)(e))return e;const t=r().qg(e);let o=e;if(t.protocol){if(ie.indexOf(t.protocol)<0){const n=e.slice(t.protocol.length);o=`${ae}${n}`}}else o=`${ae}//${(0,n().Dw)(e,"/")}`;return o}function le(e){var t,o,n,i,a;const s=r().qg(e,{slashesDenoteHost:!0});if(!s)return e;if(s.host&&s.host.endsWith(".embedly.com")&&s.query.src)return s.query.src;if("www.youtube.com"===s.hostname&&"/watch"===s.pathname&&s.query&&s.query.v)return r().Gm({url:`https://www.youtube.com/embed/${s.query.v}`,query:{...s.query,v:void 0}});if("whimsical.com"===s.hostname&&s.pathname){const e=s.pathname.split("/").slice(-1)[0];return r().Gm({url:`https://whimsical.com/embed/${e}`})}if("miro.com"===s.hostname&&s.pathname){const e=s.pathname.split("/")[3],t=s.query.playRecording?s.query.playRecording:void 0;return r().Gm({url:`https://miro.com/app/live-embed/${e}/`,query:{embedMode:t?"board_recording_player":"view_only_without_ui",autoplay:"true",playRecording:t}})}if(null!==(t=s.hostname)&&void 0!==t&&t.includes("replit.com")||null!==(o=s.hostname)&&void 0!==o&&o.includes("repl.it")){return"true"===new URLSearchParams(e).get("lite")?e:r().O$(e,{lite:"true"})}if(null!==(n=s.hostname)&&void 0!==n&&n.includes("docs.google.com")&&null!==(i=s.pathname)&&void 0!==i&&i.includes("presentation")&&null!==(a=s.pathname)&&void 0!==a&&a.includes("/edit")){const e=s.pathname.replace("/edit","/preview");return r().Gm({url:`https://${s.hostname}${e}`,query:{...s.query},hash:s.hash||void 0})}return e}},306631:(e,t,o)=>{o.d(t,{S:()=>c});o(296540);var n=()=>o(872994),r=()=>o(852507),i=()=>o(11048),a=()=>o(295740),s=()=>o(112995),l=o(474848);function c(e){let{children:t,fallback:o,from:r,getParentEl:c,onError:u,...p}=e;const m=(0,n().y)();return(0,l.jsx)(s().K,{...p,fallback:function(e){return(0,l.jsx)(i().A,{name:`${r}.ContentEditableErrorBoundary`,children:(0,l.jsx)(d,{onRender:function(){null==m||m.domLock.mutate((()=>{var e;null===(e=c())||void 0===e||e.removeAttribute(a().AD)}))},children:o(e)})})},from:r,onError:function(e){var t;null===(t=c())||void 0===t||t.setAttribute(a().AD,"true"),null==u||u(e)},children:t})}function d(e){let{children:t,onRender:o}=e;return(0,r().w)((()=>{o()})),(0,l.jsx)(l.Fragment,{children:t})}},308145:(e,t,o)=>{o.d(t,{$5:()=>n,Bz:()=>r,Z5:()=>i,al:()=>a});o(898992),o(803949),o(908872);const n=5,r=10,i=Object.entries({image:["JPG","JPEG","PNG","GIF","SVG","BMP","HEIC","TIF","TIFF","WEBP","ICO","PSD"],video:["MP4","MOV","AVI","WMV","MKV","FLV","WEBM","MPEG","M4V","3GP","3G2","OGV"],audio:["MP3","WAV","AAC","FLAC","OGG","M4A","WMA","ALAC","AIFF","OPUS","MID","MIDI"],pdf:["PDF"],slides:["PPT","PPTX","PPS","PPSX","ODP"],sheet:["XLS","XLSX","ODS","CSV","TSV"],cad:["STL","STEP"],other:["TXT","MD","LOG","DOC","DOCX","ODT","RTF"]}).reduce(((e,t)=>{let[o,n]=t;return n.forEach((t=>{e[t]=o})),e}),{});function a(e){return i.hasOwnProperty(e.toUpperCase())}},308701:(e,t,o)=>{o.d(t,{DF:()=>i,j3:()=>r,uL:()=>n});const n=90,r=275,i=32},310001:(e,t,o)=>{o.d(t,{Mo:()=>d,R7:()=>u,_I:()=>c});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454);var n=()=>o(799288),r=()=>o(332393),i=()=>o(20498),a=()=>o(534177),s=()=>o(351360),l=()=>o(878710);function c(e){const{currentUserRootStore:t}=s().default.state;if(!t||!e)return!1;const o=(0,l().v3)(t,{id:e,table:r().Li}).getKeyStore("capabilities").getValue();return(0,n().qs)(o)}function d(e){const t={},o={};for(const n of e){const e=n.getIntegrationId();if(n.isInternalBot()||!e)continue;(0,i().Q2)(e)?(t[e]??=[],t[e].push(n.id)):(o[e]??=[],o[e].push(n.id))}return{compliance:t,nonCompliance:o}}function u(e){return new Set(e.filter((e=>e.isDefined()&&!e.isInternalBot())).map((e=>e.getIntegrationId())).filter(a().O9))}},310795:(e,t,o)=>{o.d(t,{LB:()=>i,jw:()=>a,qr:()=>s});var n=()=>o(508496),r=()=>o(654534);function i(){return"on"===n().default.getEligibleGroup({experimentId:"generic_importer",defaultGroup:"control"})}function a(){return n().default.checkGate({gateName:"zip_importer_enabled"})}function s(e){const t=n().default.getEligibleGroup({experimentId:"special_case_generic_file_size",defaultGroup:r().Sj.toString()});return Number(t)}},311890:(e,t,o)=>{o.d(t,{NG:()=>l,O1:()=>s});var n=()=>o(584262),r=()=>o(534177),i=()=>o(351360),a=()=>o(696746);function s(e){let{blockOrCollectionId:t}=e;const o=l({blockOrCollectionId:t});switch(o){case"home":return n().y8.PersonalHomePage;case"home_tile_recents":return n().y8.PersonalHomeTileRecents;case"home_tile_trending":return n().y8.PersonalHomeTileTrending;case"home_tile_tips":return n().y8.PersonalHomeTileTips;case"home_tile_tasks":return n().y8.PersonalHomeTileTasks;case"home_tasks":return n().y8.PersonalHomePageTasks;case"home_tile_custom_db":return n().y8.PersonalHomeTileCustomDb;case"home_custom_db":return n().y8.PersonalHomePageCustomDb;case"home_tile_similar_users":return n().y8.PersonalHomeTileSimilarUsers;case"home_tile_most_visited":return n().y8.PersonalHomeTileMostVisited;case"home_tile_last_edited":return n().y8.PersonalHomeTileLastEdited;case"home_tile_favorites":return n().y8.PersonalHomeTileFavorites;case"home_unknown":return n().y8.PersonalHomeUnknown;case"home_tile_notes":return n().y8.PersonalHomeNotes;case void 0:return;default:(0,r().HB)(o)}}function l(e){let{blockOrCollectionId:t}=e;const o=(0,a().IA)({blockOrCollectionId:t}),{mainEditorCurrentBlockStore:n}=i().default.state;if(o)switch(o){case"main":return"home";case"myTasksAssignedToMeCollectionView":case"myTasks":return(0,a().lU)(n)?"home_tile_tasks":"home_tasks";case"customDbCollectionView":case"customDb":return(0,a().lU)(n)?"home_tile_custom_db":"home_custom_db";case"trendingCollectionView":return"home_tile_trending";case"similarUsersCollectionView":return"home_tile_similar_users";case"mostVisitedCollectionView":return"home_tile_most_visited";case"lastEditedCollectionView":return"home_tile_last_edited";case"favoritesCollectionView":return"home_tile_favorites";case"trending":case"trendingCollection":case"similarUsers":case"similarUsersCollection":case"mostVisited":case"mostVisitedCollection":case"lastEdited":case"lastEditedCollection":case"favorites":case"favoritesCollection":case"posts":case"postsCollectionView":case"postsFollowingCollectionView":case"postsDiscoverCollectionView":return"home_unknown";default:(0,r().HB)(o)}}},312296:(e,t,o)=>{o.d(t,{F:()=>a});var n=()=>o(970013),r=()=>o(246826),i=()=>o(724456);function a(e){const{environment:t,collectionStore:o,update:a,transaction:s}=e,l=o.getSchema(),c=n().q(a);r().zv({store:o.getSchemaStore(),data:c,transaction:s}),(0,i().H)({environment:t,collectionStore:o,oldSchema:l,newSchema:o.getSchema(),transaction:s})}},313462:(e,t,o)=>{o.d(t,{I:()=>s});var n=()=>o(604341),r=()=>o(780054);let i=!1;function a(){i=!0,localStorage.setItem("__console.enableVerboseAnalytics","true")}function s(){return r().A.isAdminMode||i}(0,n().exposeDebugValue)("enableVerboseAnalytics",a),(0,n().exposeDebugValue)("disableVerboseAnalytics",(function(){i=!1,localStorage.setItem("__console.enableVerboseAnalytics","false")})),"undefined"!=typeof window&&"true"===localStorage.getItem("__console.enableVerboseAnalytics")&&a()},313784:(e,t,o)=>{o.d(t,{S:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("hourglass",{viewBox:"0 0 16 16",svg:(0,n.jsx)("g",{children:(0,n.jsx)("path",{d:"M5.521 13.475c-.316 0-.566-.09-.75-.27-.183-.176-.275-.43-.275-.762v-.111c0-.36.08-.719.24-1.078a5.66 5.66 0 01.61-1.037 9.91 9.91 0 01.756-.908c.261-.274.486-.506.673-.698.192-.183.29-.38.293-.591.008-.211-.09-.415-.293-.61a85.634 85.634 0 01-.673-.697c-.258-.274-.51-.574-.756-.902a5.767 5.767 0 01-.61-1.032 2.682 2.682 0 01-.24-1.09v-.093c0-.336.092-.592.275-.768.184-.18.434-.27.75-.27h4.946c.32 0 .572.09.756.27.183.176.275.432.275.768v.093c0 .364-.082.727-.246 1.09a5.34 5.34 0 01-.61 1.032c-.245.328-.497.628-.755.902-.258.273-.483.506-.674.697-.2.195-.295.399-.287.61.008.21.103.408.287.591.191.192.416.424.674.698.258.273.51.576.756.908.246.328.449.674.609 1.037.164.36.246.719.246 1.078v.111c0 .332-.092.586-.275.762-.184.18-.436.27-.756.27H5.52zm2.936-6.422c.105-.09.248-.225.428-.405.18-.183.37-.386.574-.609.207-.223.4-.443.58-.662.18-.223.32-.42.422-.592.066-.105.086-.197.059-.275-.024-.078-.092-.117-.205-.117H5.674c-.106 0-.172.039-.2.117-.027.078-.01.17.053.275.106.172.248.37.428.592.18.219.371.44.574.662.203.223.395.426.575.61.183.18.326.314.427.404.168.14.323.21.463.21.145 0 .299-.07.463-.21z"})})})},313790:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(302033).A)},313892:(e,t,o)=>{o.d(t,{$h:()=>z,$n:()=>I,BI:()=>j,BL:()=>S,DH:()=>E,Hb:()=>D,Ib:()=>N,Kb:()=>R,LS:()=>J,T6:()=>k,TW:()=>Z,Ts:()=>L,Un:()=>Q,YH:()=>T,_q:()=>X,aJ:()=>te,cc:()=>$,i$:()=>P,jP:()=>O,lK:()=>A,lS:()=>w,ne:()=>K,nf:()=>q,o$:()=>ee,rv:()=>F,s6:()=>V,sZ:()=>U,u1:()=>x,u6:()=>M,yl:()=>y});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(672577),o(430670),o(803949),o(581454),o(737550);var n=()=>o(66689),r=()=>o(687871),i=()=>o(151744),a=()=>o(289915),s=()=>o(455348),l=()=>o(604995),c=()=>o(617871),d=()=>o(416504),u=()=>o(799829),p=()=>o(332393),m=()=>o(931075),g=()=>o(496603),f=()=>o(534177),v=()=>o(522827),h=()=>o(470928),_=()=>o(508496),b=()=>o(53137);function y(e,t){return e.find((e=>e.uri===t))}function S(e,t){return e.find((e=>e.presets.some((e=>e.uri===t))))}function w(e,t){if(!t)return;return e.find((e=>e.allFeatures.find((e=>{if(A(e))for(const o of e.dependencies)if("collection"===o.type&&o.uri===t)return!0}))))}function k(e,t){const o=S(e,t.uri);if(!o)return[];return[...t.requiredFeatures,...t.defaultOnFeatures].filter((e=>{const t=o.allFeatures.find((t=>t.uri===e.featureUri));if(!t)return!1;const{type:n}=e;return"simple"===n?"dependencies"in t:"with_variant"===n?"variants"in t:void(0,f().HB)(n)}))}function I(e){return"variants"in e&&(0,i().ec)(e.collectionUri)}function A(e){return"dependencies"in e&&(0,i().ec)(e.collectionUri)}function x(e){return"dependencies"in e&&(0,i().XA)(e.collectionUri)}const C=[r().Z.Owner,m()._e.Owner];function T(e,t){const o=w(e,t);if(o)for(const n of o.allFeatures)if(A(n)){const e=n.dependencies.find((e=>"collection"===e.type&&e.uri===t));if(e)return e.value.schema??{}}}function M(e){let{featurePointers:t,appConfig:o}=e;const n=g().oE(t.map((e=>{const{type:t}=e;return"simple"===t?e.featureUri:"with_variant"===t?e.defaultVariantUri:void(0,f().HB)(t)}))),r={};for(const s of o.allFeatures)r[s.uri]=s;const i=n.map((e=>r[e])).filter((e=>A(e))),a={};for(const s of i)for(const e of s.dependencies)a[e.uri]=e;return Object.values(a)}function P(e){return e.endsWith(n().W)}const B={[n().yx.Status]:["status","checkbox","select"]};function R(e,t,o){const n=t.type,r=e in B?B[e]:[n];return Object.entries(o).filter((e=>{let[t,o]=e;if(o)return r.includes(o.type)}))}function E(e,t){const o={};for(const[n,r]of Object.entries(e)){if(!n.startsWith("notion://"))continue;if(null==r?void 0:r.type){const e=R(n,r,t);1===e.length&&(o[n]=e[0][0])}}return o}function D(e){var t,o,n,r,l,c,d,u;const{environment:p,viewDependency:m,collectionStore:g}=e,h=s().u9.derivePropertyUris((null==g?void 0:g.getSchema())??{},null==g?void 0:g.getPropertyMapping()),_=m.optionalProperties??[],b=e=>!_.includes(e)&&!h.has(e),y=m.value;switch(y.type){case"table":case"list":case"gallery":case"timeline":if(null!==(t=y.format)&&void 0!==t&&t.collection_group_by){const e=y.format.collection_group_by.property;if(!(0,i().LE)(e)||b(e))return!1}if(null!==(o=y.query2)&&void 0!==o&&o.timeline_by){const e=y.query2.timeline_by;if(!(0,i().LE)(e)||b(e))return!1}break;case"board":if(null!==(n=y.format)&&void 0!==n&&n.board_columns_by){const e=y.format.board_columns_by.property;if(!(0,i().LE)(e)||b(e))return!1}if(null!==(r=y.format)&&void 0!==r&&r.collection_group_by){const e=y.format.collection_group_by.property;if(!(0,i().LE)(e)||b(e))return!1}break;case"calendar":if(null!==(l=y.query2)&&void 0!==l&&l.calendar_by){const e=y.query2.calendar_by;if(!(0,i().LE)(e)||b(e))return!1}break;case"chart":if(null!==(c=y.format)&&void 0!==c&&c.chart_config){var S;if("placeholder"===(null===(S=y.format)||void 0===S?void 0:S.chart_config.type))return!1;if("groups_reducer"===y.format.chart_config.dataConfig.type){const e=y.format.chart_config.dataConfig.groupBy;if(!(0,i().LE)(e.property)||b(e.property))return!1}else{const e=y.format.chart_config.dataConfig.nameProperty;if(!(0,i().LE)(e)||b(e))return!1}}break;case"page":case"form_editor":case"feed":case"map":case"chat":case"custom":return!1;default:(0,f().HB)(y.type)}const w=e=>!!(0,a().t_)(e)||(0,i().LE)(e.property)&&!b(e.property);if(null!==(d=y.format)&&void 0!==d&&d.property_filters)for(const i of y.format.property_filters){if(!H(i.filter,w))return!1;if(!(0,v().t6)(p,i.filter,g))return!1}if(null!==(u=y.query2)&&void 0!==u&&u.filter){const e=y.query2.filter;if(e.filters)for(const t of e.filters){if(!W(t,w))return!1}}return!0}function N(e){const{environment:t,appConfig:o,collectionStore:n,collectionViewBlockStore:r}=e,i=o.allFeatures.filter((e=>(e=>{var o;if(!A(e)||1!==e.dependencies.length||"collection_view"!==e.dependencies[0].type)return!1;const i=e.dependencies[0],a=r.getFormat().app_config_uri,s=n.getFormat().app_config_uri,l=(null===(o=r.getFormat())||void 0===o?void 0:o.app_uri_map)??{};return!(!a||!s)&&i.collectionViewBlockUri===a&&i.collectionUri===s&&!(i.uri in l)&&"notion://projects/task_by_status_feature"!==e.uri&&D({environment:t,viewDependency:i,collectionStore:n})})(e)));return g().hS(i,"uri")}function L(e,t){return F(e,t.allFeatures)}function F(e,t){const o=[];for(const n of t)(A(n)||x(n))&&o.push(...n.dependencies);return g().hS(o.filter((t=>e.includes(t.uri))),(e=>e.uri))}function U(e){return"app_container"===e.getFormatStore().getKeyStore("collection_view_sub_type").getValue()}function O(e,t,o,i){if(!(0,h().Io)()&&t===n().pW&&(o===r().Z.Owner||o===m()._e.Owner))return!0;const a=s().u9.derivePropertyUri(o,i.getPropertyMapping());if(!a)return!1;const l=function(e,t){if(t===n().pW)return C;const o=T(e,t);return o?Object.keys(o):void 0}(e,t);return!!l&&l.includes(a)}function V(e,t,o){return(0,u().e0)(e,t,o)}function j(e){return e===n().IZ||e===n().QW}function z(e){return e!==n().Lu}function q(e,t){const o=[];for(const r of t)"property"===r.type||"database_template"===r.type?e.has(r.collectionUri)&&o.push(r):"block"===r.type?e.has(r.parentUri)&&o.push(r):"collection"!==r.type&&"collection_view"!==r.type||e.has(r.collectionViewBlockUri)&&o.push(r);let n=[];return o.length>0&&(n=q(new Set(o.map((e=>e.uri))),t)),[...o,...n]}function H(e,t){return!!t(e)}function W(e,t){if((0,a().yX)(e)){if(!H(e,t))return!1}else{if((0,a().LB)(e))return!0;if(e.filters)for(const o of e.filters){if(!W(o,t))return!1}}return!0}function K(e,t){const o=[];if(e.filters)for(const n of e.filters){const e=G(n,t);if(!e)throw new Error("Invalid filter");o.push(e)}return{...e,filters:o}}function G(e,t){if((0,a().yX)(e))return null!=t&&t[e.property]?{...e,property:t[e.property]}:e;if((0,a().LB)(e))return e;if((0,a().dU)(e)){if(e.filters){const o=[];for(const n of e.filters){const e=G(n,t);if(!e)throw new Error("Invalid filter");o.push(e)}return{operator:e.operator,filters:o}}}else(0,f().HB)(e)}function $(e){const{collectionViewBlockStore:t,dependencyUri:o}=e,n=null==t?void 0:t.getCollectionViewStores();if(!t)return;return null==n?void 0:n.find((e=>e.getAppConfigUri()===o))}function Y(e){const{propertyDependency:t,viewDependency:o,collectionViewStore:n,collectionStore:r}=e;if(o.optionalProperties&&o.optionalProperties.includes(t.uri))return!1;const i=n.getQuery(r.getSchema()),s=n.getFormat(),l=null==i?void 0:i.sort;if(l){if(l.some((e=>t.uri===e.property)))return!0}const c=n.getFormat().property_filters;if(c){const e=e=>!(0,a().t_)(e)&&e.property===t.uri;if(c.some((t=>H(t.filter,e))))return!0}const d=null==i?void 0:i.filter;if(void 0!==d&&d.filters){const e=e=>!!(0,a().t_)(e)||e.property!==t.uri;for(const t of d.filters){if(!W(t,e))return!0}}switch(n.getType()){case"table":case"list":case"gallery":case"timeline":if(s.collection_group_by){if(s.collection_group_by.property===t.uri)return!0}if(null!=i&&i.timeline_by){if(i.timeline_by===t.uri)return!0}break;case"board":if(s.board_columns_by){if(s.board_columns_by.property===t.uri)return!0}if(s.collection_group_by){if(s.collection_group_by.property===t.uri)return!0}break;case"calendar":if(null!=i&&i.calendar_by){if(i.calendar_by===t.uri)return!0}}return!1}function Q(e,t){const o=(0,d().P)(),n=(0,l().iB)(e,1,o);return(0,l().Mk)(n.valueOf(),n.plus({weeks:t}).minus({days:1}).valueOf(),o)}function Z(e,t){const o=(0,l().HF)(e,(0,d().P)()).plus({days:t});return(0,l().lN)(o)}const X=[n().d0,n().bq,n().IE];function J(e){var t;const{dependencies:o,collectionStore:n,collectionViewBlockStore:r,viewStores:i,validDependencies:a,formulasModule:l}=e,c=o.filter((e=>"property"===e.type)),d=[...c.filter((e=>"rollup"===e.propertySchema.type)),...c.filter((e=>"formula"===e.propertySchema.type))],u=o.filter((e=>"collection_view"===e.type)),p=s().u9.derivePropertyUris(n.getSchema(),n.getPropertyMapping()),m=null===(t=r.getFormat())||void 0===t?void 0:t.app_uri_map,g={validDependencies:a,propertyDeps:[],viewDeps:[]};if(!p||!m)return g;for(const s of d){if(!p.has(s.uri))continue;const e=n.getSchema()[s.uri];if(e){if("rollup"===e.type){const t=a.some((t=>t.uri===e.relation_property));t&&(a.push(s),g.propertyDeps.push(e))}if("formula"===e.type){const t=l.getFormulaDependencies(e).some((e=>{for(const t of a)if(t.uri===e)return!0}));t&&(a.push(s),g.propertyDeps.push(e))}}}for(const s of u){if(!m[s.uri])continue;const e=i.find((e=>e.id===m[s.uri]));if(!e)continue;a.some((t=>"property"===t.type&&Y({propertyDependency:t,viewDependency:s,collectionViewStore:e,collectionStore:n})))&&(a.push(s),g.viewDeps.push(e))}return g.validDependencies=a,g}function ee(){return _().default.checkGate({gateName:"typed_db_migration"})}function te(){return b().A.getIntegrationsAsRecordMap().getModel({table:p().Li,id:c().io})&&_().default.checkGate({gateName:"cron_connected_relation"})}},314648:(e,t,o)=>{o.r(t),o.d(t,{USER_SIGNALS_KEYS:()=>i,default:()=>u,getInitialUserSignalsState:()=>a,shouldPersistUserSignals:()=>c});var n=()=>o(757695),r=()=>o(351360);const i=["recentPages","similarUserRecentPages","topPages7dPageView","editedPages","similarUsersEditedPages"];function a(){return{lastUpdatedTime:void 0,recentPages:[],similarUserRecentPages:{},topPages7dPageView:[],editedPages:[],similarUsersEditedPages:[]}}class s extends n().default{getInitialState(){return{lastUpdatedTime:void 0,recentPages:[],similarUserRecentPages:{},topPages7dPageView:[],editedPages:[],similarUsersEditedPages:[]}}}class l extends n().default{getInitialState(){return{stores:{},refreshIntervalId:void 0}}getStore(e){let{spaceId:t,userId:n,version:r}=e;const i=function(e){let{spaceId:t,userId:o,version:n}=e;return`userSignals:${t}:${o}:${n??0}`}({spaceId:t,userId:n,version:r});return this.state.stores[i]||(c()?(this.instanceState.stores[i]=new(o(178624).R)({key:i,namespace:o(419494).Bq,important:!0,trackingType:"necessary"}),void 0===this.instanceState.stores[i].state&&this.instanceState.stores[i].setState({lastUpdatedTime:void 0,recentPages:[],similarUserRecentPages:{},topPages7dPageView:[],editedPages:[],similarUsersEditedPages:[]})):this.state.stores[i]=new s),this.state.stores[i]}getUserSignals(e){const t=this.getStore(e).state??{lastUpdatedTime:void 0,recentPages:[],similarUserRecentPages:{},topPages7dPageView:[],editedPages:[],similarUsersEditedPages:[]};return o(496603).cJ(t,"lastUpdatedTime")}setUserSignals(e){const{spaceId:t,userId:o,userSignals:n,initialize:r}=e,i=this.getStore({spaceId:t,userId:o});let a={lastUpdatedTime:void 0,recentPages:[],similarUserRecentPages:{},topPages7dPageView:[],editedPages:[],similarUsersEditedPages:[]};!r&&i.state&&(a=i.state),i.setState({...a,...n,lastUpdatedTime:Date.now()})}}function c(){var e;const t=d.state.shouldPersist;return void 0!==t?t:!(null===(e=r().default.getState().currentSpaceStore)||void 0===e||!e.environment.defaultRecordCache.persistedRecordCache)}const d=new l,u=d},315097:(e,t,o)=>{o.d(t,{CZ:()=>H,_I:()=>V,oZ:()=>U,wT:()=>q});o(410838),o(898992),o(672577),o(581454);var n=()=>o(908006),r=()=>o(319954),i=()=>o(700500),a=()=>o(713998),s=()=>o(416845),l=()=>o(919709),c=()=>o(220719),d=()=>o(496603),u=()=>o(534177),p=()=>o(413962),m=()=>o(534402),g=()=>o(518736),f=()=>o(423804),v=()=>o(845489),h=()=>o(231722),_=()=>o(969197),b=()=>o(792002),y=()=>o(494043),S=()=>o(301421),w=()=>o(695625),k=()=>o(393255),I=()=>o(110955),A=()=>o(77246),x=()=>o(24157),C=()=>o(896628),T=()=>o(910302),M=()=>o(132867),P=()=>o(722101),B=()=>o(44729),R=()=>o(797265),E=()=>o(778417),D=()=>o(606952),N=()=>o(725614),L=()=>o(508104),F=()=>o(62287);function U(e){const{store:t,block:o,targetStore:n,targetBlock:r}=e;o&&(0,g().Le)({store:t,blockStore:o})&&r&&(0,g().Le)({store:n,blockStore:r})?m().LT({...e,targetStore:n,sourceBlockStore:o}):O(e)}function O(e){const{environment:t,transaction:o,store:n,targetStore:r}=e,i=(0,b().s6)(r);i?D().jN({environment:t,sourceStore:n,sourceIndex:0,targetStore:r,targetIndex:i.endIndex,transaction:o}):D().jQ({environment:t,transaction:o,store:n,selection:{startIndex:0,endIndex:1/0}})}function V(e){const{environment:t,store:o,transaction:r}=e;r.annotateWithUserAction("textBackspaceActions.annotatedContentBlockBackspaceAtBeginning");const s=(0,_().T)(o);if(s){if("callout"===s.getType()&&C().zA({stores:[s],update:{block_color:void 0},transaction:r}),s.isType("to_do")){const e=s.getProperties();e&&a().wu(e.checked)&&L().E({environment:t,blocks:[s],transaction:r})}let e=s,o=i().xd.text;if(y().PQ(s)){const e=s.getType();e&&(o=e)}e=F().pd({environment:t,block:s,blockType:o,transaction:r}),n().default.afterNextFlush((()=>{const o=w().T.findEditableStoreWithin(e);o&&(N().setSelectionAtStart({store:o}),E().hc({environment:t,store:e}))}))}return o}function j(e){const{environment:t,editorMode:o,multiSelection:n,transaction:i,deleteForwards:a}=e;if("suggest"===o)return void function(e){const{multiSelection:t}=e,o=(0,_().T)(t.start.store);if(!o)throw new(s().yI)("Can not make suggest edits without associated block store");(0,h().kM)(t)?function(e){const{environment:t,multiSelection:o,transaction:n,deleteForwards:i,blockStore:a}=e,c=o.start,d={indexOfAboutToBeDeletedChar:i?c.index:c.index-1,indexOfLeadingChar:i?c.index-1:c.index,annotateSelectionIndex:i?[c.index,c.index+1]:[c.index-1,c.index],newCursorIndex:i?c.index+1:c.index-1},u={start:{store:c.store,index:d.annotateSelectionIndex[0]},end:{store:c.store,index:d.annotateSelectionIndex[1]}},m=(0,b().aR)(c.store.getValue(),d.indexOfAboutToBeDeletedChar),g=(0,f().x5)(a,r().r.fromArray(m),t.currentUser,l().Ifu.SuggestionInsertText);if(g)return D().f0({...e,multiSelection:u}),void(0,p().c3)({environment:t,transaction:n,discussionStore:g.discussionStore});const[v,h]=[d.indexOfAboutToBeDeletedChar,d.indexOfLeadingChar].map((e=>{const t=(0,b().IX)(c.store.getValue(),e,l().Ifu.SuggestionRemoveText);if(t&&l().I1e(t))return l().vu(t)})),_=l().qAZ(c.store.getValue()).length;(i&&c.index<_||!i&&c.index>0)&&z(c.store,d.newCursorIndex);if(v)return;let y;if(h){const e=p().Iw(u,h);if(!e)throw new(s().yI)("Could not get discussion store from selection and leadingSuggestRemoveDiscussionId");(0,f().Ih)(e,t.currentUser)&&(y=e)}y||(y=p().RR(t,n,u));p().rY({environment:t,transaction:n,multiSelection:u,discussionStore:y})}({...e,blockStore:o}):function(e){const{environment:t,transaction:o,multiSelection:n,blockStore:r}=e,i=p().RR(t,o,r);p().rY({environment:t,transaction:o,multiSelection:n,discussionStore:i}),z(n.start.store,n.start.index)}({...e,blockStore:o})}(e);let c;i.annotateWithUserAction("textBackspaceActions.textBackspaceWithinContent"),c=(0,h().kM)(n)?a?{start:n.start,end:{store:n.start.store,index:n.start.index+1}}:{start:{store:n.start.store,index:n.start.index-1},end:n.start}:n,D().f0({environment:t,multiSelection:c,transaction:i})}function z(e,t){N().setMultiSelection({multiSelection:{start:{store:e,index:t},end:{store:e,index:t}}})}function q(e){const{environment:t,editorMode:o,multiSelection:r,transaction:a,deleteForwards:s,event:m}=e,g=t.device.isApple&&m.metaKey,C=!(t.device.isIOS&&(0,h().kM)(r));N().clearForceExtendAnnotations();const D=(0,h().H7)(r);if(D&&0===D.selection.startIndex&&0===D.selection.endIndex&&!s){const{store:e}=D;m.preventDefault();const r=(0,_().T)(e);if(r){const s=r.getModel();if(s){const r=s.isType(i().bl);r&&!g?V({environment:t,store:e,transaction:a}):s.isType(i().ti)||r&&g?function(e){const{store:t,editorMode:o,transaction:r,environment:i}=e;r.annotateWithUserAction("textBackspaceActions.textBackspaceAtBeginning");const a=(0,_().T)(t);if(!a)return;if(I().A.state.open&&I().A.state.isAddMenu&&""===l().q4_(t.getValue()))return void k().VN({environment:i,dismissed:!0});const s=(0,_().T)(a),c=s&&(0,_().T)(s);if(s&&c){const e=s.getRenderableContentIds()??[];if(!(d().HV(e)!==a.id||s.isTransclusionType()||y().BN(s)&&d().$1(e)===a.id||"tab"===c.getType())){const e=M().MQ({blockStore:a,parentStore:s,grandparentStore:c,transaction:r});if(e)return void n().default.afterNextFlush((()=>{if(e){const t=w().T.findEditableStoreWithin(e);t&&(E().hc({environment:i,store:e}),N().setSelectionAtStart({store:t}))}}))}s.isCalloutV2()&&1===e.length&&R().ZL({environment:i,blocks:[s],transaction:r})}const m=(0,v().J)(t),g=m?(0,_().T)(m):void 0;if(m&&a&&g){const e=()=>{const e=(0,b().s6)(m);if(U({environment:i,transaction:r,store:t,block:a,targetStore:m,targetBlock:g}),N().setSelection({store:m,selection:e}),E().hc({environment:i,store:g}),!y().BN(a)&&s){const e=a.getContentStores();for(const o of e)P().nc({parentStore:s.getContentStore(),beforeStore:a,insertStore:o,transaction:r});const t=a.getContentStore();for(const o of e)P().TF({parentStore:t,childToRemoveStore:o,transaction:r})}R().TF({store:a,transaction:r})},n=()=>{const e=(0,b().s6)(m);N().setSelection({store:m,selection:e})};if("suggest"===o){var h;if("page"===g.getType()||m.path.includes("caption"))return;const o=null===(h=(0,f().jS)({blockStore:g,currentUser:i.currentUser,type:l().Ifu.SuggestionInsertText}))||void 0===h?void 0:h.discussionStore,s=(0,f().Vv)({blockStore:g,currentUser:i.currentUser,suggestionType:"add_line_break"});if(o)n(),e(),p().c3({environment:i,transaction:r,discussionStore:o,removeModifiedBlockIds:[t.id]});else if(s)0===g.getTitleValue().length?(R().TF({store:g,transaction:r}),N().setSelection({store:t,selection:{startIndex:0,endIndex:0}})):(p().X2({environment:i,transaction:r,blockStore:g,type:"add_line_break",removeDiscussionId:!0}),n());else{const e=0===a.getTitleValue().length;p().tW({environment:i,transaction:r,blockStore:g,createDiscussionStore:()=>p().RR(i,r,g,void 0,e?{blockStore:a,suggestionTypes:["remove_line_break"],currentUser:i.currentUser}:void 0),type:"remove_line_break"}),n()}}else"default"===o||"translate_unlocked"===o||"ai_co_editing"===o?(g.getAddLineBreakSuggestion()?p().X2({environment:i,transaction:r,blockStore:g,type:"add_line_break",removeDiscussionId:!0}):g.getRemoveLineBreakSuggestion()&&p().X2({environment:i,transaction:r,blockStore:g,type:"remove_line_break",removeDiscussionId:!0}),e()):"translate_locked"===o?T()._4():(0,u().HB)(o)}}({environment:t,editorMode:o,store:e,transaction:a}):D.store.path.includes("caption")&&function(e){const{environment:t,editorMode:o,store:n,transaction:r}=e;if("suggest"===o)return;r.annotateWithUserAction("textBackspaceActions.captionBackspaceAtBeginning");const i=S().n.getMembersByDOMOrder({filter:()=>!0}),a=i.findIndex((e=>e.props.store===n)),s=i.findLast(((e,t)=>t<a&&e.props.canInsertText)),l=null==s?void 0:s.props.store;if(!l)return;const d=(0,c().o9)((0,_().T)(n)),u=(0,c().o9)((0,_().T)(l)),p=(0,b().s6)(l);O({environment:t,store:n,targetStore:l,transaction:r,targetBlock:d,block:u}),N().setSelection({store:l,selection:p});const m=(0,_().T)(l);E().hc({environment:t,store:m})}({environment:t,editorMode:o,store:e,transaction:a})}}}else D&&(0,b().NG)(D.store,D.selection)&&s?(m.preventDefault(),function(e){const{environment:t,editorMode:o,store:n,transaction:r}=e;r.annotateWithUserAction("textBackspaceActions.textDeleteAtEnd");const i=S().n.getMembersByDOMOrder({filter:()=>!0}),a=d().SL(i,(e=>e.props.store===n)),s=i.find(((e,t)=>Boolean(t>a&&e.props.canInsertText))),l=s?s.props.store:void 0,c=(0,_().T)(n),m=l?(0,_().T)(l):void 0;if(c&&m&&l)if("suggest"===o){if(m.path.includes("caption"))return;const e=(0,v().J)(n),o=e?(0,_().T)(e):void 0,i=o&&0===c.getTitleValue().length;p().tW({environment:t,transaction:r,blockStore:c,type:"remove_line_break",createDiscussionStore:()=>p().RR(t,r,c,void 0,i?{blockStore:o,suggestionTypes:["remove_line_break"],currentUser:t.currentUser}:void 0)}),N().setSelection({store:l,selection:{startIndex:0,endIndex:0}})}else if("default"===o||(0,A().Or)(o)||"ai_co_editing"===o)if(c.isEmptyTextBlock()){const e=(0,_().T)(c);e&&B().zz({childStore:c,parentStore:e,transaction:r}),N().setMultiSelection({multiSelection:{start:{store:l,index:0},end:{store:l,index:0}}})}else{const e="readOnly"===x().default.state.mode,o="empty"!==x().default.state.mode&&x().default.state.multiSelection;if(U({environment:t,transaction:r,store:l,block:m,targetStore:n,targetBlock:c}),m){const t=(0,_().T)(m);if(t){const e=m.getContentStore(),o=m.getContentStores();for(const n of o)P().TF({parentStore:e,childToRemoveStore:n,transaction:r}),P().nc({parentStore:t.getContentStore(),beforeStore:m,insertStore:n,transaction:r})}R().TF({store:m,transaction:r}),o&&N().setMultiSelection({multiSelection:o,readOnly:e})}}else(0,u().HB)(o)}({environment:t,editorMode:o,store:D.store,transaction:a})):C&&(m.preventDefault(),j({environment:t,editorMode:o,multiSelection:r,deleteForwards:s,transaction:a}));const L=x().default.state;"editing"===L.mode&&(0,b().oT)(L.multiSelection.start.store.getValue(),L.multiSelection.start.index-1,"c")&&N().setExtendAnnotation({annotation:["c"],extend:!0})}function H(e){const{event:t,multiSelection:o,device:n}=e;return(n.isApple&&t.metaKey||!n.isApple&&t.ctrlKey||n.isApple&&t.altKey)&&!(0,b().ts)(o)}},315564:(e,t,o)=>{o.d(t,{S:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("locked",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.79395 14.7227H11.1992C12.252 14.7227 12.7783 14.1963 12.7783 13.0479V8.20801C12.7783 7.19629 12.3682 6.66992 11.541 6.56055V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.56055C3.625 6.66992 3.21484 7.19629 3.21484 8.20801V13.0479C3.21484 14.1963 3.73438 14.7227 4.79395 14.7227ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.54004H5.75098V4.83105ZM4.99219 13.5059C4.69141 13.5059 4.54102 13.3623 4.54102 13V8.25586C4.54102 7.89355 4.69141 7.76367 4.99219 7.76367H11.0078C11.3086 7.76367 11.4521 7.89355 11.4521 8.25586V13C11.4521 13.3623 11.3086 13.5059 11.0078 13.5059H4.99219Z"})})},315957:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{}}isActive(){return Boolean(this.state.blockStore)}}const r=new n},316221:(e,t,o)=>{o.d(t,{KV:()=>p,gS:()=>m});o(898992),o(737550),o(296540);var n=()=>o(529099),r=()=>o(430483),i=()=>o(227440),a=()=>o(621793),s=()=>o(416726),l=o(474848);const c=[...a().XI,e=>{const{blocks:t}=e;return t.some((e=>{const t=e.getType();return void 0!==t&&(!!(r().zD.isAttachmentUploadEnabledForUser()||"pdf"!==t&&"file"!==t&&"image"!==t)&&o(249506).W[t])}))}],d=[...a().XI,e=>r().zD.isXMLAssistantEnabled()],u=(0,o(959013).YK)({blockSelectionCompletionName:{id:"action.blockSelectionCompletionName.name",defaultMessage:"Ask AI"},pageCompletionName:{id:"action.pageCompletionName.name",defaultMessage:"Notion AI"},executeFillAiSectionName:{id:"action.executeAiSection.name",defaultMessage:"Fill with AI"},editAiSectionName:{id:"action.editAiSection.name",defaultMessage:"Edit AI autofill"},writeWithAiName:{id:"action.writeWithAI.name",defaultMessage:"Write with AI"}}),p=(0,s().Fw)({key:"block selection completion",displayName:u.blockSelectionCompletionName,analyticsName:u.blockSelectionCompletionName.defaultMessage,svg:n().v,shortcuts:["commandJ"],validators:c,hideFromSlashActionMenu:!0,closeParentMenu:!0,action:async(e,t)=>{const{environment:n,blocks:r}=e,i=await Promise.resolve().then(o.bind(o,650829)),a=await i.assistantDependency.load();if(a.assistantActions.isSelectionValidAttachmentSelection(r))return void a.assistantActions.initializeSessionFromAttachmentBlockSelection({environment:n,selectedAttachmentStore:r[0]});const{aiDependency:s}=await Promise.resolve().then(o.bind(o,662453));(await s.load()).completionInitialPromptActions.toggleInitialPrompt({from:"block_action_menu",environment:n})},disabled:()=>!i().A.state.online,renderTooltip:()=>o(972435).A.formatMessage(s().AY.unavailableOfflineTooltip),disableTooltip:()=>i().A.state.online}),m=((0,s().Ls)({key:"page completion",displayName:u.pageCompletionName,analyticsName:u.pageCompletionName.defaultMessage,svg:e=>(0,l.jsx)("img",{style:{borderRadius:"100%",background:"white",border:"1px solid rgba(0, 0, 0, 0.09)",...e,width:"22px",height:"22px",marginLeft:"-3px",marginRight:"-3px",overflowX:"visible"},src:o(200424)}),validators:d,closeParentMenu:!0,action:async(e,t)=>{const{environment:n}=e,{assistantDependency:r}=await Promise.resolve().then(o.bind(o,650829));(await r.load()).assistantMenuActions.openAssistantRightHandSideMenu({environment:n,from:"sidebar"})}}),(0,s().Fw)({key:"ai prompt menu",analyticsName:"ai_prompt_menu",displayName:void 0,validators:[...a().XI,o(878377).O1v],shortcuts:["commandJ"],closeParentMenu:!0,action:async e=>{let{environment:t}=e;const{aiDependency:n}=await Promise.resolve().then(o.bind(o,662453));(await n.load()).completionInitialPromptActions.toggleInitialPrompt({from:"keyboard_shortcut",environment:t})}}));(0,s().Fw)({key:"write with ai",analyticsName:"write with AI",displayName:u.writeWithAiName,validators:a().m7,shortcuts:["commandJ"],closeParentMenu:!0,svg:e=>(0,n().v)(e),action:async e=>{let{environment:t}=e;const{aiDependency:n}=await Promise.resolve().then(o.bind(o,662453));(await n.load()).completionInitialPromptActions.toggleInitialPrompt({from:"slash_menu",environment:t})}})},317001:(e,t,o)=>{o.d(t,{j:()=>_});o(898992),o(672577);var n=()=>o(700500),r=()=>o(592269),i=()=>o(416504),a=()=>o(797809),s=()=>o(496603),l=()=>o(797535),c=()=>o(519839),d=()=>o(186445),u=()=>o(873050),p=()=>o(972435),m=()=>o(508496),g=()=>o(44729),f=()=>o(246826),v=()=>o(317909),h=()=>o(394653);function _(e){var t;const{environment:o,store:_,collectionStore:b,collectionContextStore:y,groupsPointer:S,transaction:w,shouldCoerce:k,alreadyMovedToCollection:I}=e,A=b.getSchema(),x=b.getParentBlockStore(),C=x&&x.isNonEditableState();let T=!k;const M=(null==y||null===(t=y.groupsStore.getGroupState(S))||void 0===t?void 0:t.resultsStore.state)||[];if(_.isDefined()){var P,B;const e=I?(0,a().RX)(p().A.getIntl()):_.getSchema()||{},t=null===(P=_.getAssociatedCollectionStore())||void 0===P?void 0:P.getDatabaseType(),n=b.getDatabaseType(),i=void 0!==t&&t===n,d=r().Yt({blockProperties:_.getProperties(),oldSchema:e,oldPropertyMapping:null===(B=_.getAssociatedCollectionStore())||void 0===B?void 0:B.getPropertyMapping(),newPropertyMapping:b.getPropertyMapping(),newSchema:A,typesMatch:i});d.propertyUpdate&&(0,h().l)({environment:o,blockStore:_,properties:d.propertyUpdate,transaction:w}),s().n4(A,d.newSchema)||C||!c().vo({collectionStore:b,collectionViewBlockStore:x,checkNavigableAncestorLocked:!1})||(0,l().I)({environment:o,collectionStore:b,update:{schema:d.newSchema},transaction:w})}if(_.getType()===n().xd.page||_.getType()===n().xd.collectionViewPage&&_.isAssociatedCollectionAPageTree()||b.isPageTreeCollection()||_.getType()===n().xd.copyIndicator||_.getType()===n().xd.externalObjectInstancePage||f().zv({store:_,data:{type:n().xd.page},transaction:w}),y){if(y.collectionViewStore()){var R;const e=_.getModel(),t=y.relativeVariableStore.state,n=null===(R=y.viewsModuleContextStore.currentPageStore())||void 0===R?void 0:R.id,a=(0,u().Ay)(y,!1);if(e&&k){const s=_.getAssociatedCollectionStore()??b,l="collectionTypedView"===y.contextType&&s?s.getSchema():y.normalizedSchemaStore.state,c=r().H3({block:e,schema:l,groupBy:y.getGroupByAndGroupFormats().groupBy,propertyMapping:b.getPropertyMapping(),filter:a,userFilterContext:{userId:o.currentUser.id,userTimeZone:(0,i().P)(),userStartOfWeek:d().XX.state},relativeVariableResult:t,currentPageInRelatedCollection:n,groupsPointer:S,getRecordModel:b.getRecordModel,intl:p().A.getIntl(),resultCache:new Map,regExpCache:new Map,experimentService:m().default});(0,h().l)({environment:o,blockStore:_,properties:c.update,transaction:w}),T=c.coercionSucceeded}}}const E="collectionTypedView"===(null==y?void 0:y.contextType)&&c().UH(_)===y;if(I||E?v().applyOperation({store:_,operation:{pointer:_.pointer,path:["alive"],command:"set",args:!0},transaction:w}):g().X$({childStore:_,parentStore:b,transaction:w}),y&&y.resultSetStore.addLocalChange([_.id]),y){var D;const e=null===(D=y.groupsStore.getGroupState(S))||void 0===D?void 0:D.currentLimit;if(e){const t=e.state,o=M.find((e=>e.id===_.id));M.length>=t&&!o&&e.setState(M.length+1)}}return T}},317182:(e,t,o)=>{o.d(t,{A:()=>s});o(581454),o(296540);var n=o(474848);const r={height:32,width:"100%"},i={paddingTop:8,paddingBottom:8},a={fontWeight:o(284371).Wy.regular,textAlign:"left",paddingTop:8,paddingBottom:8};const s=function(e){let{columns:t,rows:s,cellStyle:d,tableStyle:u,rowStyle:p,tableBodyStyle:m,hideHeader:g,hideTopBorderForFirstRow:f,hideTopBorderForHeader:v}=e;const h=(0,o(401497).DP)();return(0,n.jsxs)("table",{style:{...l(h,v),...u},children:[!g&&(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{style:r,children:t.map((e=>(0,n.jsx)("th",{style:{...a,...e.style},children:(0,n.jsx)(o(125565).A,{isSmall:!0,children:e.header})},e.key)))})}),(0,n.jsx)("tbody",{style:m,children:s.map(((e,o)=>(0,n.jsx)("tr",{style:{...c(h),...0===o&&f?{borderTop:void 0}:{},..."function"==typeof p?p({rowIndex:o}):p},children:e.columns.map(((e,r)=>{const a=t[r];return(0,n.jsx)("td",{style:{...i,..."function"==typeof d?d({rowIndex:o,columnIndex:r}):d},children:e},a.key)}))},e.key)))})]})};function l(e,t){return{width:"100%",fontSize:13,borderTop:t?void 0:`1px solid ${e.regularDividerColor}`,borderBottom:`1px solid ${e.regularDividerColor}`}}function c(e){return{width:"100%",borderTop:`1px solid ${e.regularDividerColor}`}}},317909:(e,t,o)=>{o.r(t),o.d(t,{DEADLOCK_WARNING_TIMEOUT_MS:()=>be,MetadataUpdateManager:()=>Se,applyCrdtTextOperation:()=>Ae,applyCrdtTextOperations:()=>xe,applyOperation:()=>Ie,createAndCommit:()=>Ne,createAndCommitAsync:()=>Fe,createAndCommitOrAppend:()=>De,updateConnectionState:()=>ye});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(672577),o(430670),o(803949),o(581454),o(737550);var n=()=>o(17022),r=()=>o(624919),i=()=>o(413468),a=()=>o(857639),s=()=>o(236162),l=()=>o(384813),c=()=>o(522419);var d=()=>o(152565),u=()=>o(416845),p=()=>o(792071),m=()=>o(134025),g=()=>o(364692),f=()=>o(696706),v=()=>o(548632),h=()=>o(912720),_=()=>o(199378),b=()=>o(179034),y=()=>o(519831),S=()=>o(869558),w=()=>o(343666),k=()=>o(144081),I=()=>o(96689),A=()=>o(798880),x=()=>o(439180),C=()=>o(449412);var T=()=>o(220719),M=()=>o(496603),P=()=>o(229833),B=()=>o(534177),R=()=>o(720665),E=()=>o(780054),D=()=>o(701218),N=()=>o(901389),L=()=>o(886564),F=()=>o(508496);var U=()=>o(504836),O=()=>o(972435),V=()=>o(108944),j=()=>o(841696),z=()=>o(847463),q=()=>o(227440),H=()=>o(38789),W=()=>o(589994),K=()=>o(630116),G=()=>o(502438),$=()=>o(24157),Y=()=>o(224701),Q=()=>o(91913),Z=()=>o(933449),X=()=>o(41273),J=()=>o(495074);function ee(e){const{transaction:t,inMemoryRecordCache:o,store:n,operation:r}=e,i=r.command;switch(i){case"insertText":case"deleteText":case"addAnnotation":case"removeAnnotation":case"splitText":const e=(0,Z().o9)(n.getBlockTitleTextSliceTree(),Q().cf);return a=n,s=new re(t,r),J().A.getPageStoreForBlockStore(a)||ie("source",a,s),function(e){const{inMemoryRecordCache:t,store:o,operation:n,textSliceTreeToMutate:r}=e,i=r.getTextValue(),a=n.command;switch(a){case"insertText":r.applyInsertTextOperation({type:a,...n.args});break;case"deleteText":r.applyDeleteOperation({type:a,...n.args});break;case"addAnnotation":case"removeAnnotation":r.applyAnnotationOperation({type:a,...n.args});break;case"splitText":r.applySplitOperation({type:a,...n.args});break;default:(0,B().HB)(a)}const s=te({blockValueOrStore:o,role:ne(t,o),textSliceTree:r,originalTextValue:i});return[s]}({inMemoryRecordCache:o,textSliceTreeToMutate:e,store:n,operation:r});case"moveTextSlice":return oe({transaction:t,inMemoryRecordCache:o,sourceStore:n,operation:r});case"moveTextSliceIntoBlock":return function(e){const{transaction:t,inMemoryRecordCache:o,sourceStore:n,operation:r}=e;return(0,Z().MX)(r.args.targetBlockId!==r.pointer.id,"Target block should be different from source block."),oe({transaction:t,inMemoryRecordCache:o,sourceStore:n,operation:{...r,command:"moveTextSlice",args:{...r.args,targetTextInstanceId:r.args.targetBlockId,targetTextSliceEndItemId:"end"}},debugInfo:new re(t,r)})}({transaction:t,inMemoryRecordCache:o,sourceStore:n,operation:r});case"replaceTextInBlock":throw new Error("replaceTextInBlock operation should not be applied on the client");default:(0,B().HB)(i)}var a,s}function te(e){const{blockValueOrStore:t,textSliceTree:o,role:n,originalTextValue:r}=e,i=t instanceof K().Bv?(0,Z().o9)(t.getValue(),Q().v6):t,a=M().mg(i);return X().B4({blockValue:a,textSliceTree:o,originalTextValue:r}),{pointer:{table:b().ev,id:a.id,spaceId:a.space_id},newValue:a,role:n,updatePaths:[["crdt_data","title"],["properties","title"],["crdt_format_version"],["discussions"]]}}function oe(e){const{transaction:t,inMemoryRecordCache:o,sourceStore:n,operation:r,debugInfo:i}=e,a=(0,Z().o9)(n.getValue(),Q().v6),s=ne(o,n),l=(0,Z().o9)(n.getBlockTitleTextSliceTree(),Q().cf),c=r.args.targetBlockId===n.id?n:new(K().Bv)(n.environment,{table:b().ev,id:r.args.targetBlockId});return function(e,t,o){const n=J().A.getPageStoreForBlockStore(e);if(!n)return void ie("source",e,o);const r=J().A.getPageBlockTrackerForPage(n.pointer),i=null==r?void 0:r.getPathToBlock(t.pointer.id);i||ie("target",t,o)}(n,c,i??new re(t,r)),function(e){const{transaction:t,inMemoryRecordCache:o,sourceRole:n,sourceValue:r,sourceRootTextSliceTree:i,targetStore:a,operation:s}=e,l=(0,Z().o9)(i.findTextSliceTreeContainingItemWithId(s.args.textInstanceId,s.args.textSliceStartItemId),Q().Dp);(0,Z().MX)(l!==i,"Can not move root node of text slice tree.");const c=i.getTextValue();!function(e,t){const o=t.getRecordStoreAtRootPath().getValue(),n=t.getRecordStoreAtRootPath().getRole(),r=e.initialRecordMap.getRole(t.pointer);r||(n?e.initialRecordMap.setValueAndRole(t.pointer,o,n):e.initialRecordMap.delete(t.pointer))}(t,a);const d=s.args.targetBlockId===r.id,u=d?i:(0,Z().o9)(a.getBlockTitleTextSliceTree(),Q().cf),p=(0,Z().o9)(u.findTextSliceTreeContainingItemWithId(s.args.targetTextInstanceId,s.args.targetTextSliceEndItemId,{type:"end"}),Q().Dp),m=d?c:u.getTextValue();l.detachFromParent(),p.appendChild(l);const g=te({blockValueOrStore:r,role:n,textSliceTree:i,originalTextValue:c}),f=[g];if(!d){const e=te({blockValueOrStore:a,role:ne(o,a),textSliceTree:u,originalTextValue:m});f.push(e)}return f}({transaction:t,inMemoryRecordCache:o,sourceValue:a,sourceRole:s,sourceRootTextSliceTree:l,targetStore:c,operation:r})}function ne(e,t){return e.getRole({pointer:t.pointer,userId:t.userId})??"editor"}class re{constructor(e,t){this.transaction=e,this.operation=t}get(){return{transactionName:this.transaction.getUserActionForAnalyticsPurposesOnly(),operationName:this.operation.command}}}function ie(e,t,o){const{transactionName:n,operationName:i}=o.get();(0,r().NK)(`The ${e} block store for CRDT text operation "${i}" in transaction "${n}" is not on the page. Undoing the transaction may not work!`,[["block id =",t.id]])}var ae=()=>o(679156),se=()=>o(541258),le=()=>o(323316),ce=()=>o(813690),de=()=>o(388821),ue=()=>o(56125);var pe=()=>o(666144),me=()=>o(495262);const ge={updateSyncedCollectionActions:new(o(645873).O2)("updateSyncedCollectionActions",(async()=>o.e(70522).then(o.bind(o,748768))))};let fe;const ve=new Set;let he=0;const _e=(0,o(959013).YK)({invalidBlockOperation:{defaultMessage:"Hey there! Blocks cannot be moved inside of themselves.",id:"saveChanges.errorDialog.blocksCannotBeMovedInsideSelf.message"},saveEditsError:{id:"saveEditsError.message",defaultMessage:"There was an issue persisting your edits. Please message us for help."}}),be=25*R().TD;function ye(e){q().A.state.online&&e.currentUser.id&&W().transactionQueue.unpause()}class Se{constructor(e){this.transaction=void 0,this.timeMs=void 0,this.userId=void 0,this.skipUpdatingEditedMetadata=void 0,this.seenStoreIds=void 0,this.operations=void 0,this.transaction=e.transaction,this.timeMs=e.timeMs,this.userId=e.userId,this.skipUpdatingEditedMetadata=e.skipUpdatingEditedMetadata,this.seenStoreIds=new Set,this.operations=new Map}addStoreWithLargeSubtree(e){this.addStoreInternal(e,{shouldDebounceEditedTime:!0})}addStore(e){this.addStoreInternal(e,{shouldDebounceEditedTime:!1})}getAllOperations(){return Array.from(this.operations.entries())}addStoreInternal(e,t){if(e.inMemoryRecordCache.recordHasOverride({pointer:e.pointer,userId:this.transaction.userId}))return;if(this.seenStoreIds.has(e.id))return;this.seenStoreIds.add(e.id);const o={};M().h1(o,this.collectCreationMetadata(e),this.skipUpdatingEditedMetadata?{}:this.collectEditionMetadata(e,t.shouldDebounceEditedTime)),Object.keys(o).length>0&&this.operations.set(e,{pointer:e.pointer,path:[],command:"update",args:o})}collectCreationMetadata(e){const t={};(e.isDefined()?e.getCreatedById():void 0)||(t.created_by_id=this.userId,t.created_by_table=A().oo);return(e.isDefined()?e.getCreatedTime():void 0)||(t.created_time=this.timeMs),t}collectEditionMetadata(e,t){const o={},n=e.isDefined()?e.getLastEditedTime():-1,r=t?this.hasDebounceEnded(n,this.timeMs):n!==this.timeMs;if(r&&(o.last_edited_time=this.timeMs),e instanceof K().Bv||e instanceof K().SL||e instanceof K().dn||e instanceof K().K_||e instanceof K().nH){const t=o;((e.isDefined()?e.getLastEditedById():void 0)!==this.userId||r)&&(t.last_edited_by_id=this.userId,t.last_edited_by_table=A().oo)}return o}hasDebounceEnded(e,t){return R().WY(e)!==R().WY(t)}}function we(e){M().hS(e.stores,(e=>e.id)).forEach((t=>{if(!t.inMemoryRecordCache.recordHasOverride({pointer:t.pointer,userId:e.userId}))if(t.table===b().ev){const o=K().Bv.fromRecordStore(t);if(o.isDefined()){const t=o.getModel(),n=(0,l().yf)({block:t,secureFileConfigRootpath:E().A.secureFileConfig.rootPath,secureFileConfigHostname:E().A.secureFileConfig.hostname,recordPointer:t.pointer}),r=n.fileIds,i=n.operations,a=o.getFileIds();for(const s of r)a.indexOf(s.id)<0&&Ie({transaction:e,store:o,operation:{pointer:o.pointer,path:["file_ids"],command:"listAfter",args:{id:s.id}}});for(const s of i)(0,x().ph)(s)?Ae({transaction:e,store:o,operation:s,invertedOperation:void 0}):(0,m().$Y)(s)||(0,m().mP)(s)?Ie({transaction:e,store:o,operation:s}):(0,B().HB)(s)}}else if(t.table===y().Vl){const o=K().md.fromRecordStore(t),n=o.getFileIds(),r=o.getIconStore().getValue(),i=o.getCoverStore().getValue();if(o.isDefined()){const t=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(t&&!e.file_ids)return[];const r=[],{cover:i,icon:a}=e;if(i){const e=(0,c().EY)(i,o,n);e&&r.push(e)}if(a){const e=(0,c().EY)(a,o,n);e&&r.push(e)}return r}({cover:i,icon:r,file_ids:n},!1,E().A.secureFileConfig.rootPath,E().A.secureFileConfig.hostname),a=n;for(const n of t)a.indexOf(n.id)<0&&Ie({transaction:e,store:o,operation:{pointer:o.pointer,path:["file_ids"],command:"listAfter",args:{id:n.id}}})}}}))}function ke(e){var t,o;const{environment:n,userId:i,userAction:s,cellTarget:l,isUndoTransaction:c,isTemplateInstantiationTransaction:d}=e,u=l&&F().default.checkGate({gateName:"transaction-space-id-override"})?"main"===l||null==l?void 0:l.spaceWithId:se().LU(),p=new Error("Potential transaction deadlock"),m=new(j().Z)({spaceId:u,userId:i||n.currentUser.id,deadlockTimeoutMs:be,onDeadlockWarning:()=>{ve.delete(m);const e=m.getUserActionForAnalyticsPurposesOnly();(0,r().NK)(`A ${e} transaction hasn't been committed in ${be} ms.`,[["stack =",p.stack]]),C().Fg(p,{extra:{operations_count:m.operations.length},tags:{userAction:e}}),ae().JV(n,{operations_count:m.operations.length,user_action:e});const t=m.operations.map((e=>({command:e.command,stringifiedArgs:(0,P().WS)({path:e.path,pointer:e.pointer})})));a().log({level:"warning",from:"transactionActions",type:"transactionDeadlockWarning",data:{userAction:e,operations:t}})},debugLogging:{logToConsole:L().A.isDebuggingEnabled(),collect:!1},isUndoTransaction:c,isTemplateInstantiationTransaction:d});return null!==(t=m.debugLogging)&&void 0!==t&&t.collect&&m.postEnqueueActions.push((()=>{const e=m.getDebugLog();0===e.length||m.isLocal||a().log({level:"info",from:"transactionActions",type:"transactionDebugLog",data:{transactionId:m.id,userAction:m.getUserActionForAnalyticsPurposesOnly(),userFlow:m.getUserFlowForAnalyticsPurposesOnly(),miscDataToConvertToString:e}})})),m.beforeSelection=G().default.cloneState(),m.beforeTextSelection=$().default.cloneState(),m.annotateWithUserAction(s),ve.add(m),null===(o=L().A.provider)||void 0===o||o.onTransactionEvent("create",m),m}function Ie(e){const{store:t,operation:o,transaction:n}=e,{inMemoryRecordCache:r}=t;if((0,m().mP)(o)){const i=(0,d().cQ)(o,r.makeGetRecordValueFn(n.userId)),a=(0,d().d4)(o,r.makeGetRecordValueFn(n.userId));for(const n of a)o.additionalUpdatedPointers||(o.additionalUpdatedPointers=[]),o.additionalUpdatedPointers.push(n.pointer),Te({...e,operation:n,isInvertible:!1,store:(0,K().Oo)(t,n.pointer)});return n.operations.push(o),void n.invertedOperations.push(...i)}(0,m().$Y)(o)?Te({store:t,operation:o,transaction:n,isInvertible:!0}):(0,B().HB)(o)}function Ae(e){const{store:t,operation:o,invertedOperation:n,transaction:r}=e;xe({store:t,operations:[o],invertedOperations:n?[n]:[],transaction:r})}function xe(e){var t;const{store:o,operations:n,transaction:r}=e;r.invertedOperations.push(...e.invertedOperations),null===(t=L().A.provider)||void 0===t||t.rememberStackTrace(e.invertedOperations);for(const i of n)Te({store:o,operation:i,transaction:r,isInvertible:!0})}const Ce="editor";function Te(e){var t;const{store:o,operation:n,transaction:r}=e,{inMemoryRecordCache:i,environment:a,pointer:l,userId:c}=o;if(i.assertUnexpired(),r.annotateWithOperation(n.command),null===(t=L().A.provider)||void 0===t||t.onApplyOperation(e),r.committed)throw new Error("Transaction has already been committed.");const d=o.getRecordStoreAtRootPath().getValue(),u=o.getRecordStoreAtRootPath().getRole(),m=(0,x().ph)(n)?[]:e.isInvertible?[g().eR(n,d)].filter(B().O9):[];let f;if(r.initialRecordMap.getRole(l)||(u?r.initialRecordMap.setValueAndRole(l,d,u):r.initialRecordMap.delete(l)),(0,x().ph)(n))f=ee({transaction:r,inMemoryRecordCache:i,store:(0,T().oC)(o,K().Bv,`Expected "${K().Bv.keyName}", got "${o.table}"`),operation:n});else{!function(e,t){if(!D().mZ||e.pointer.table!==b().ev)return;const o=t.getUserActionForAnalyticsPurposesOnly();if(null==o||!o.startsWith("revisionActions"))switch(e.command){case"set":if(0===e.path.length)n({operation:e,message:"a new block was not created in a CRDT-aware way!",advice:"Please use a CRDT-aware function instead, such as recordActions.createBlock().",successMessage:"Block created in a CRDT-aware way (this is good)."});else if(M().n4(e.path,["properties","title"]))n({operation:e,message:"a title update was not performed in a CRDT-aware way!",advice:"Please use a CRDT-aware function instead, such as textActions.setValue().",successMessage:"Title update performed in a CRDT-aware way (this is good)."});else if(M().n4(e.path,["properties"])||M().n4(e.path,["format"])){const[t]=e.path;n({operation:e,message:`a ${t} update was not performed in a CRDT-aware way!`,advice:"Please use a CRDT-aware function instead, such as recordActions.updateValue()."})}break;case"update":0===e.path.length&&M().Gv(e.args)&&"properties"in e.args||M().n4(e.path,["properties"])&&M().Gv(e.args)&&"title"in e.args?n({operation:e,message:"a properties update was not performed in a CRDT-aware way!",advice:"Please use textActions.setValue() to set the title separately from the rest of the properties."}):(0===e.path.length&&M().Gv(e.args)&&"format"in e.args||M().n4(e.path,["format"])&&M().Gv(e.args)&&("use_crdt"in e.args||"text_slice_tree"in e.args||"text_clocks"in e.args))&&n({operation:e,message:"a format update was not performed in a CRDT-aware way!",advice:"Please use a CRDT-aware function instead, such as recordActions.updateValue()."})}function n(e){const{operation:t,message:n,advice:r,successMessage:i}=e;if((0,D().vO)(t.args))L().A.isDebuggingEnabled()&&"string"==typeof i&&console.log(i);else{F().default.checkGate({gateName:"show_crdt_warnings"});const e={command:t.command,pointer:t.pointer,path:t.path};C().Fg(new Error(n),{tags:{userAction:o,warningType:"possiblyCrdtUnawareOperation"},extra:{operation:e}})}}}(n,r);const e=g().KW(n,d),t=i.getRole({pointer:l,userId:c});!d&&(0,B().Xk)(j().T,l.table)&&o instanceof K().WE[l.table]&&r.newlyCreatedStoresForPermissionInference.set(l,{store:o,inferredPermissionFromParent:void 0});const a="update"===n.command?Object.keys(n.args).map((e=>n.path.concat([e]))):[n.path];f=[{pointer:l,newValue:e,role:t??Ce,updatePaths:a}]}for(const g of f){const{pointer:e,newValue:t,role:n,updatePaths:l}=g;if(pe().PC({environment:a,inMemoryRecordCache:i,pointer:e,userId:c,force:!0,model:p().Bj6.fromValue(o.pointer.table,t),role:n,updatePaths:l,debugSource:r.getUserActionForAnalyticsPurposesOnly()??"applyOperation"}),"block"===o.table){const e=t;if(e){const t=(0,s().zN)({block:e,getRecordValue:i.makeGetRecordValueFn(r.userId)});t&&H().A.setEditedBlock(t.id,e.id)}0}}r.isLocal=!o.shouldCacheSaveTransactions(),r.isLocal&&i.onOperationCallback&&i.onOperationCallback({operation:n,store:o}),e.isInvertible&&(r.operations.push(n),r.invertedOperations.push(...m)),r.stores.push(o),r.annotateWithOperation(void 0),i.appliedTransaction=!0}const Me=[{type:"userAction",allowedUserAction:"revisionActions.undoRevision"},{type:"userAction",allowedUserAction:"revisionActions.redoRevision"}];function Pe(e){var t;null===(t=L().A.provider)||void 0===t||t.onTransactionEvent("cancel",e),e.cancelDeadlockWarning(),ve.delete(e);const o=M().hS(e.stores,(e=>e.id));for(const n of o){pe().oX({inMemoryRecordCache:n.inMemoryRecordCache,persistedRecordCache:n.environment.defaultRecordCache.persistedRecordCache,pointer:n.pointer,userId:n.userId,environment:n.environment});const t=e.initialRecordMap.getValue(n.pointer),o=e.initialRecordMap.getRole(n.pointer);o&&pe().PC({environment:n.environment,inMemoryRecordCache:n.inMemoryRecordCache,pointer:n.pointer,userId:n.userId,updatePaths:[[]],model:p().Bj6.fromValue(n.pointer.table,t),role:o,debugSource:"cancelTransaction"})}for(const n of e.postCancelCallbacks)n()}const Be=M().nF(((e,t)=>{ae().Ip(e,{errorType:t.type||t.name}),t.type===o(141032).yE?N().tW(t.message):N().tW(O().A.formatMessage(_e.saveEditsError))}),3e4);function Re(e){return new Promise((async(t,o)=>{var n,r;ve.delete(e.transaction);const s=Array.from(ve).filter((e=>e.operations.length>0));var l,c;if(s.length>0&&ae().JW(e.environment,{committed_transaction_user_action:e.transaction.getUserActionForAnalyticsPurposesOnly(),first_uncommitted_transaction_user_action:s[0].getUserActionForAnalyticsPurposesOnly(),uncommitted_transaction_count:s.length}),0===e.transaction.operations.length)return null===(l=W().transactionQueue.logEmptyTaskForDebugging)||void 0===l||l.call(W().transactionQueue,e.transaction.getUserActionForAnalyticsPurposesOnly()),e.transaction.committed=!0,e.transaction.done(),null===(c=L().A.provider)||void 0===c||c.onTransactionEvent("commitEmpty",e.transaction),t(void 0);void 0===e.canUndo&&(e.canUndo=!0);const{transaction:d,canUndo:u}=e,m=function(e){for(const t of e.stores)if("block"===t.table){const e=V().KA(t);if(e&&V().g7(e).find((e=>e.table===t.table&&e.id===t.id)))return O().A.formatMessage(_e.invalidBlockOperation)}}(d);if(m)return Pe(d),N().f1(m),void t(void 0);null===(n=fe)||void 0===n||n(e.environment,d),d.cancelDeadlockWarning();for(const e of d.preEnqueueActions)e();if(function(e){const{environment:t,transaction:o,skipUpdatingEditedMetadata:n}=e,r=t.currentUser.adminUserId?A().mc.id:t.currentUser.id,a=new Se({transaction:o,userId:r,skipUpdatingEditedMetadata:n,timeMs:Date.now()}),s=M().hS(o.stores,(e=>e.id));for(const l of s)if(l.table===b().ev){const e=K().Bv.createChildStore(l,l.pointer);if(e.canEdit()&&a.addStore(e),!e.isNavigableBlock()){const t=V().Nq(e);t&&t.canEdit()&&a.addStoreWithLargeSubtree(t)}}else if(l.table===w().SN){if(l.path.length)continue;const e=l.pointer,t=o.initialRecordMap.getValue(e),n=l.getValue();(void 0===t||i().k(p().Bj6.fromValue(w().SN,t),p().Bj6.fromValue(w().SN,n)))&&a.addStore(K().jg.createChildStore(l,l.pointer))}else if(l.table===I().NX)a.addStoreWithLargeSubtree(K().SL.createChildStore(l,l.pointer));else if(l.table===y().Vl){const e=K().md.createChildStore(l,l.pointer).getParentBlockStore();e&&e.canEdit()&&a.addStore(e)}else if(l.table===S().Gy){const e=K().pS.createChildStore(l,l.pointer);e.canAdmin()&&a.addStore(e);const t=e.getParentBlockStore();t&&t.canEdit()&&a.addStoreWithLargeSubtree(t)}else if(l.table===h().yB){if(l.canEdit()){const e=K().dn.createChildStore(l,l.pointer);a.addStore(e);const t=e.getParentBlockStore();t&&t.canEdit()&&a.addStore(t)}}else if(l.table===_().SC){if(l.canEdit()){const e=K().bx.createChildStore(l,l.pointer).getParentStore();e&&e.canEdit()&&a.addStore(e)}}else if(l.table===k().zx){if(l.canEdit()){const e=K().K_.createChildStore(l,l.pointer);a.addStore(e)}}else if(l.table===v().YV&&l.canEdit()){const e=K().nH.createChildStore(l,l.pointer);a.addStore(e)}a.getAllOperations().forEach((e=>{let[t,n]=e;return Ie({transaction:o,store:t,operation:n})}))}({environment:e.environment,transaction:d,skipUpdatingEditedMetadata:e.skipUpdatingEditedMetadata}),we(d),function(e,t){const o=t.operations.filter((e=>e.pointer.table===S().Gy));o.length>0&&f().L3.uniq(o.map((e=>e.pointer))).map((e=>t.initialRecordMap.getRole(e))).includes(void 0)&&t.postSubmitCallbacks.push((()=>{Y().Ow(e)}))}(e.environment,d),d.afterSelection=G().default.cloneState(),d.afterTextSelection=$().default.cloneState(),u&&me().Fn({transaction:d,undoCheckpoint:e.undoCheckpoint}),null===(r=L().A.provider)||void 0===r||r.onTransactionEvent("commit",d),(0,U().CS)())try{const t=await ge.updateSyncedCollectionActions.load();await t.updateSyncedData({transaction:d,environment:e.environment})}catch{return void Pe(d)}if(d.isLocal){for(const e of d.postEnqueueActions)e();d.done(),t(void 0)}else{const n=e=>{d.done(e),e?o(e):t(void 0)},{LocalBacklinkStore:r,currentUser:i}=e.environment;r&&async function(e,t){const{LocalBacklinkStore:o,currentUser:n}=e;if(0===t.stores.length)return;const r=t.stores[0].inMemoryRecordCache,i=[],a=de().RecordMap.create(),s=new Set;for(const p of t.stores)s.has(p.id)||(s.add(p.id),i.push(p.pointer),a.setValue(p.pointer,p.getRecordStoreAtRootPath().getValue()));const l=ue().En(t.initialRecordMap),{createdBacklinks:c,deletedBacklinks:d}=await(0,le().JT)({loadRecordValue:ce().ho.fromGetRecordValueFn(r.makeGetRecordValueFn(n.id)),operationPointers:i,getInitialRecordModel:p().b4_.fromRecordMap(l),getFinalRecordModel:p().b4_.fromRecordMap(a)}),u=o.updateBacklinks({createdBacklinks:c,deletedBacklinks:d,currentUserId:n.id});t.postSubmitCallbacks.push((e=>{e&&o.resetBacklinkState({blockIds:u,currentUserId:n.id})}))}({LocalBacklinkStore:r,currentUser:i},d);const s=Date.now();s<he&&ae().hQ(e.environment,{regression_amount:he-s}),he=s,W().transactionQueue.enqueueTask((0,z().Sk)({transaction:d,timestamp:s,callback:n})).catch((t=>{a().log({level:"error",from:"transactionActions",type:"enqueueTask",error:(0,P().n6)(t)}),e.environment.device.isMobileNative&&"SqliteOutOfSpace"===t.name||Be(e.environment,t),Pe(d),n(t)}));for(const e of d.postEnqueueActions)e()}const g=d.userId;for(const[e,i]of d.newlyCreatedStoresForPermissionInference.entries()){const{store:t}=i,o=t.inMemoryRecordCache.getRole({pointer:e,userId:d.userId}),n=Ee({transaction:d,store:t});n!==o&&t.inMemoryRecordCache.setModelAndRole({pointer:e,userId:g},t.getModel(),n)}d.committed=!0}))}function Ee(e){const{transaction:t,store:o}=e,{pointer:n}=o,r=o.inMemoryRecordCache.getRole({pointer:n,userId:t.userId});if(r&&r!==Ce)return r;const i=t.newlyCreatedStoresForPermissionInference.get(n);if(!i)return Ce;if(i.inferredPermissionFromParent)return i.inferredPermissionFromParent;const a=o.getParentStore();if(!a||a.table!==b().ev||!a.isReady())return Ce;const s=Ee({store:a,transaction:t});return i.inferredPermissionFromParent=s,s}function De(e){const{transaction:t,...o}=e;return t?o.perform(t):Ne(o).performResult}function Ne(e){const{userAction:t,environment:o,userId:r,perform:i,canUndo:a,undoCheckpoint:s,transactionTooBigFallback:l,skipUpdatingEditedMetadata:c,skipDefaultPostPerformValidationChecks:d,useSudoMode:p,cellTarget:m,isUndoTransaction:g,isTemplateInstantiationTransaction:f}=e;return n().A.withListenerIgnored((()=>{const n=ke({environment:o,userId:r,userAction:t,cellTarget:m,isUndoTransaction:g,isTemplateInstantiationTransaction:f});let v;p&&(n.useSudoMode=!0);try{v=i(n),d||function(e){if(e.isLocal)return;for(const t of e.stores){const o=t.inMemoryRecordCache.checkRecordForTemporaryData(t);if(o)throw new(u().yI)(`Transaction "${e.getUserActionForAnalyticsPurposesOnly()}" is manipulating a store with temporary local changes from an in-memory record cache named "${o.name}"!`)}}(n);for(const e of n.postPerformAssertions)e()}catch(h){throw Pe(n),Le({transaction:n,type:"createAndCommit",error:h}),h}finally{0}if(l&&(0,z().vY)(n))return Pe(n),Ne({...e,perform:l,transactionTooBigFallback:void 0,userAction:`${t} transactionTooBigFallback`});return{performResult:v,serverCommitResult:Re({environment:o,transaction:n,canUndo:a,undoCheckpoint:s,skipUpdatingEditedMetadata:c,isUndoTransaction:g,isTemplateInstantiationTransaction:f}).catch((e=>{throw Le({transaction:n,type:"commit",error:e}),e}))}}))}function Le(e){const{transaction:t,type:o,error:n}=e,r=t.getUserActionForAnalyticsPurposesOnly(),i=t.getUserFlowForAnalyticsPurposesOnly(),s=t.getOperationForAnalyticsPurposesOnly(),l=t.getDebugTagsForAnalyticsPurposesOnly(),c=l&&function(e){const t={};return e.forEach((e=>t[e]=!0)),t}(l),d=C().Fg(n,{tags:{userAction:r,userFlow:i,operation:s,...c}});a().log({level:"error",from:"transactionActions",type:o,error:(0,P().n6)(n),data:{userAction:r,userFlow:i,debugTags:l,spaceId:t.spaceId,transactionId:t.id,miscDataToConvertToString:{transactionDebugLog:t.getDebugLog()}},sentryEventId:d});const u=`A ${r} transaction with id ${t.id} threw an exception!`;E().A.isLocalhost?(console.group(u),console.error(n),console.log(t),L().A.provider||console.log("Consider using __console.toggleTransactionDebugging() and re-running this transaction for better logging."),console.groupEnd()):console.log(u)}async function Fe(e){const{environment:t,perform:o,waitForServerCommit:n,userAction:r,userId:i,canUndo:s,undoCheckpoint:l,skipUpdatingEditedMetadata:c,useSudoMode:d,isUndoTransaction:u,isTemplateInstantiationTransaction:p}=e,m=ke({environment:t,userId:i,userAction:r,isUndoTransaction:u,isTemplateInstantiationTransaction:p});let g;d&&(m.useSudoMode=!0);try{g=await o(m);for(const e of m.postPerformAssertions)e()}catch(v){m.cancelDeadlockWarning();const t=m.getUserActionForAnalyticsPurposesOnly(),o=m.getOperationForAnalyticsPurposesOnly();ve.delete(m);const n=m.operations.length>0;throw n&&ae().NX(e.environment,{user_action:t,operation_count:m.operations.length}),C().Fg(v,{tags:{userAction:t,operation:o,transactionOperationCount:m.operations.length}}),a().log({level:"error",from:"transactionActions",type:"createAndCommitAsync",error:(0,P().n6)(v),data:{message:n?`POSSIBLE DATA LOSS: asynchronous transaction had ${m.operations.length} operations`:void 0,userAction:t}}),v}const f=Re({environment:t,transaction:m,canUndo:s,undoCheckpoint:l,skipUpdatingEditedMetadata:c});return n&&await f,{performResult:g,serverCommitResult:f}}},317965:(e,t,o)=>{o.d(t,{hX:()=>T,ol:()=>M});var n=()=>o(638681);const r=n().union([n().number(),n().string(),n().boolean(),n().isNull(),n().array(n().string())]),i=n().undefinable(r),a=n().union([r,n().record(n().string(),r)]),s=n().union([i,n().record(n().string(),i)]),l=n().union([s,n().record(n().string(),s)]),c=l,d=n().without(n().without(n().nonEmpty(n().string()),"{"),"}");n().object({required:{key:d,value:a,ttl:n().undefinable(n().number())},optional:{}}),n().object({required:{key:d,value:s,version:n().number()},optional:{}}),n().object({required:{key:d,value:n().number(),ttl:n().undefinable(n().number())},optional:{}}),n().object({required:{key:d,value:n().number(),version:n().number()},optional:{}}),n().object({required:{key:d,amount:n().number(),ttl:n().undefinable(n().number())},optional:{passThroughData:c}}),n().object({required:{key:d,value:n().number(),version:n().number()},optional:{}}),n().object({required:{key:d,field:n().string(),value:s,ttl:n().undefinable(n().number())},optional:{}}),n().object({required:{key:d,field:n().string(),value:l,version:n().number()},optional:{}}),n().object({required:{id:n().string()},optional:{}}),n().object({required:{setValueTime:n().number()},optional:{}}),n().object({required:{ackId:n().string()},optional:{}}),n().object({required:{},optional:{}}),n().object({required:{key:d,field:n().string(),updates:n().record(n().string(),i),ttl:n().undefinable(n().number())},optional:{onDisconnectFields:n().undefinable(n().object({required:{presenceOnDisconnectFlag:n().literals("register","clear"),subscriptionId:n().string(),pageVisitId:n().undefinable(n().string()),spaceId:n().string(),pageId:n().string()},optional:{}}))}}),n().object({required:{key:d,field:n().string(),value:l,version:n().number()},optional:{}});const u=n().object({required:{blockId:n().string(),userId:n().string(),spaceId:n().string(),operation:n().literal("logPageExit"),pageVisitId:n().undefinable(n().string()),ts:n().number()},optional:{}}),p=(n().object({required:{key:d},optional:{}}),n().object({required:{key:d,value:s,version:n().number()},optional:{}}),n().object({required:{operation:n().literal("setValue"),key:d,value:n().string(),ttl:n().undefinable(n().number())},optional:{}})),m=n().object({required:{operation:n().literal("setValue"),key:d,value:s,version:n().number()},optional:{}}),g=n().object({required:{operation:n().literal("increment"),key:d,amount:n().number(),ttl:n().undefinable(n().number())},optional:{passThroughData:c}}),f=n().object({required:{operation:n().literal("increment"),key:d,value:n().number(),version:n().number()},optional:{}}),v=n().object({required:{operation:n().literal("setIfGreater"),key:d,value:n().number(),ttl:n().undefinable(n().number())},optional:{}}),h=n().object({required:{operation:n().literal("setIfGreater"),key:d,value:n().number(),version:n().number()},optional:{}}),_=n().object({required:{operation:n().literal("setField"),key:d,field:n().string(),value:s,ttl:n().undefinable(n().number())},optional:{}}),b=n().object({required:{operation:n().literal("setField"),key:d,field:n().string(),value:l,version:n().number()},optional:{}}),y=n().object({required:{operation:n().literal("updateField"),key:d,field:n().string(),updates:n().record(n().string(),i),ttl:n().undefinable(n().number())},optional:{onDisconnectFields:n().undefinable(n().object({required:{presenceOnDisconnectFlag:n().literals("register","clear"),subscriptionId:n().string(),pageVisitId:n().undefinable(n().string()),spaceId:n().string(),pageId:n().string()},optional:{}}))}}),S=n().object({required:{operation:n().literal("updateField"),key:d,field:n().string(),value:l,version:n().number()},optional:{}}),w=n().object({required:{operation:n().literal("logPageExit"),spaceId:n().string(),userId:n().string(),blockId:n().string(),pageVisitId:n().undefinable(n().string())},optional:{}}),k=n().object({required:{operation:n().literal("logPageExit")},optional:{}}),I={setValue:p,increment:g,setIfGreater:v,setField:_,updateField:y,logPageExit:w},A=n().union(Object.values(I)),x={setValue:m,increment:f,setIfGreater:h,setField:b,updateField:S,logPageExit:k},C=n().union(Object.values(x)),T=(n().object({required:{operations:n().array(A)},optional:{}}),n().object({required:{responses:n().array(C)},optional:{}}),n().object({required:{subscriptions:n().array(n().object({required:{key:d,version:n().number()},optional:{authorizationToken:n().string()}}))},optional:{}}),n().object({required:{responses:n().array(n().object({required:{key:d,wasNotified:n().boolean()},optional:{}})),internalProcessingTimeMs:n().number()},optional:{}}),n().object({required:{key:d,version:n().number()},optional:{authorizationToken:n().string()}}),n().object({required:{key:d,wasNotified:n().boolean()},optional:{}}),n().object({required:{keys:n().array(d)},optional:{}}),n().object({required:{keys:n().array(d),internalProcessingTimeMs:n().number()},optional:{}}),n().object({required:{key:d},optional:{}}),n().object({required:{key:d},optional:{}}),n().object({required:{disconnectId:n().string(),operations:n().array(A)},optional:{}}),n().object({required:{disconnectId:n().string(),hadDisconnect:n().boolean()},optional:{}}),n().object({required:{disconnectId:n().string()},optional:{}}),n().object({required:{disconnectId:n().string(),wasRemoved:n().boolean()},optional:{}}),n().union([n().object({required:{type:n().literal("notification"),key:d,value:l,version:n().number()},optional:{ackId:n().string(),passThroughData:c}}),n().object({required:{type:n().literal("response"),status:n().literals("ok","error"),requestId:n().string(),result:n().any()},optional:{}})])),M=n().object({required:{userId:n().string(),present:n().boolean()},optional:{activityTimestamp:n().number(),blockId:n().union([n().isNull(),n().string()]),onTrustedDomain:n().boolean()}});n().object({required:{spaceId:n().string(),visitedAt:n().number()},optional:{blockId:n().string()}}),n().object({required:{max_records:n().number()},optional:{}}),n().object({required:{values:n().array(u)},optional:{}}),n().object({required:{last_length:n().number(),new_length:n().number(),added:n().boolean()},optional:{}})},320460:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},321172:(e,t,o)=>{o.d(t,{XP:()=>g,T:()=>f,Tk:()=>m});o(898992),o(354520),o(581454),o(296540);var n=()=>o(959013),r=()=>o(989423);var i=()=>o(508496);var a=()=>o(901389),s=()=>o(380682),l=()=>o(712505),c=()=>o(212640),d=()=>o(538233),u=()=>o(437487),p=o(474848);function m(e){u().Ay.reset(),l().default.state.open?c().A.setState({...c().A.state,open:!0}):d().A.setState({...d().A.state,open:!0}),function(e,t){r().vd(e,"open_page_share",t),i().default.logEvent("open_page_share")}(e,{share_menu_session_id:u().Ay.state.sessionId})}function g(e){l().default.state.open?c().A.setState({...c().A.state,open:!1}):d().A.setState({...d().A.state,open:!1}),s().A.setState({...s().A.state,siteSettingContentType:"initial"}),function(e,t){r().vd(e,"close_page_share",t)}(e,{share_menu_session_id:u().Ay.state.sessionId})}async function f(e){const{inviteTargetsStore:t}=e,o=(0,p.jsx)(n().sA,{id:"shareMenu.closeInviteDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Discard changes?"}),r=(0,p.jsx)(n().sA,{id:"shareMenu.closeInviteDialog.confirmationButton.label",defaultMessage:"Yes"}),i=(0,p.jsx)(n().sA,{id:"shareMenu.closeInviteDialog.cancelButton.label",defaultMessage:"Cancel"});if(t.state.inviteTargets.length>0){return(await a().Gh({message:o,acceptLabel:r,cancelLabel:i})).accept}return!1}},322769:(e,t,o)=>{o.d(t,{C0:()=>v,D1:()=>f,Fu:()=>u,PM:()=>C,QE:()=>A,UL:()=>I,ao:()=>p,az:()=>m,c7:()=>x,kF:()=>_,me:()=>h,nH:()=>g,vW:()=>k,zL:()=>d,zq:()=>b});var n=()=>o(534177),r=()=>o(939768),i=()=>o(617871),a=()=>o(68263),s=()=>o(861017),l=()=>o(437607),c=()=>o(158009);function d(e,t,o){return!e||!t||!(0,a().Km)(t)||o}function u(e){let{groupId:t,spaceId:o,userId:n}=e;return{command:"set",pointer:(0,c().BZ)({userId:n,spacePermissionGroupId:t,spaceId:o}),path:[],args:{id:(0,c().bq)({userId:n,spacePermissionGroupId:t,spaceId:o}),space_permission_group_id:t,user_id:n,space_id:o}}}function p(e){let{spaceId:t,groupId:o,args:n}=e;return{command:"set",pointer:(0,l().bj)({spacePermissionGroupId:o,spaceId:t}),path:[],args:{id:(0,l().T1)({spacePermissionGroupId:o,spaceId:t}),group_id:o,space_id:t,created_at:Date.now(),name:l().uh,...n}}}function m(e){const t=null==e?void 0:e.integration_restrictions;return"approved_only"===t||"approved_or_built_by_notion"===t}function g(e){const{spaceBotSettings:t,integrationId:o,env:n}=e;return!t||(!m(t)||(!(!t.integration_approval_statuses||!t.integration_approval_statuses[o])||!("approved_or_built_by_notion"!==t.integration_restrictions||!(0,i().CX)({integrationId:o,env:n}))))}const f=(0,n().u0)((e=>e&&"personal_external_transfer"===e.type&&"completed"!==e.status?{true:e}:{false:e})),v=(0,n().u0)((e=>e&&"organization_personal_external_transfer"===e.type&&"completed"!==e.status?{true:e}:{false:e})),h=(0,n().u0)((e=>e&&"team_claim_upgrade"===e.type&&"requested"===e.status?{true:e}:{false:e})),_=((0,n().u0)((e=>e&&"organization_claiming_space"===e.type&&"requested"===e.status?{true:e}:{false:e})),(0,n().u0)((e=>{if(!e||"domain_claim_space_deletion"!==e.type)return{false:e};switch(e.status){case"started":return{true:e};case"canceled":return{false:e}}}))),b=(0,n().u0)((e=>{if(!e||"organization_domain_claim_space_deletion"!==e.type)return{false:e};switch(e.status){case"started":return{true:e};case"canceled":return{false:e}}})),y=((0,n().u0)((e=>y(e)||S(e)||w(e)?{true:e}:{false:e})),(0,n().u0)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"started":return{true:e};case"failed_with_closed_source":case"failed":case"completed":case"dry_run_completed":case"pending_deletion":return{false:e}}}))),S=(0,n().u0)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"completed":return{true:e};case"dry_run_completed":case"failed":case"started":case"failed_with_closed_source":case"pending_deletion":return{false:e}}})),w=((0,n().u0)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"pending_deletion":return{true:e};case"dry_run_completed":case"failed":case"started":case"failed_with_closed_source":case"completed":return{false:e}}})),(0,n().u0)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"failed_with_closed_source":return{true:e};case"dry_run_completed":case"failed":case"started":case"completed":case"pending_deletion":return{false:e}}}))),k=(0,n().u0)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"failed_with_closed_source":case"started":case"completed":case"pending_deletion":return{true:e};case"dry_run_completed":case"failed":return{false:e}}}));function I(e){const{spaceId:t,baseUrl:o}=e,n=(0,s().p0)({route:{name:"space",spaceId:t,spaceDomain:void 0,requestedOnPublicDomain:void 0,searchQuery:void 0,searchRequest:void 0}});return(0,r().pf)({relativeUrl:n,baseUrl:o})}function A(e){return"none"===e.role}function x(e){return"none"!==e.role}function C(e){const t=T.exec(e);if(t&&t[1])return parseInt(t[1],16).toString()}const T=new RegExp("^v2_([a-fA-F0-9]{1,10})[a-fA-F0-9]{40}$")},322867:(e,t,o)=>{o.d(t,{Dr:()=>m,F_:()=>f,N9:()=>r,Ob:()=>_,PD:()=>y,Q:()=>v,Qo:()=>I,WY:()=>d,Zm:()=>k,_r:()=>a,dd:()=>u,g7:()=>g,k2:()=>h,kB:()=>s,oM:()=>b,rl:()=>p,rm:()=>w,ry:()=>l,tC:()=>c,yc:()=>i,zK:()=>S});o(16280);var n=()=>o(973647);class r extends Error{}class i extends Error{constructor(){super("Recurrence trigger missing schedule!")}}class a extends Error{constructor(e,t){super(t),this.automationId=void 0,this.type=e}}function s(e,t){return async o=>{const r=await e(o);return n().Q.isFail(r)&&(r.error.automationId=t(o)),r}}class l extends a{constructor(e){super("invalid_record_pointer","Invalid record pointer"),this.data=e}}class c extends a{constructor(e){super("record_pointer_in_trash","Record pointer is in trash"),this.data=e}}class d extends a{constructor(e){super("invalid_record","Invalid record"),this.data=e}}class u extends a{constructor(e){super("invalid_variable_type","Invalid variable type"),this.data=e}}class p extends a{constructor(e){super(e.type,e.message),this.data=e}}class m extends a{constructor(e){super("invalid_property_schema","Invalid property schema"),this.data=e}}class g extends a{constructor(e){super("unsupported_context","Unsupported context"),this.data=e}}class f extends a{constructor(e){super("formula_execution_failed","Formula execution failed"),this.data=e}}class v extends a{constructor(e){super("missing_context_value","Missing context value"),this.data=e}}class h extends a{constructor(e){super("missing_action_config","Missing automation action config"),this.data=e}}class _ extends a{constructor(e){super("notification_unresolvable_target_error","One or more of the send-in-app-notification targets could not be resolved to a user ID."),this.data=e}}class b extends a{constructor(e){super("misc",e.message),this.data=e}}class y extends a{constructor(e){super("execute_server_side_effect_error",e.message),this.data=e}}class S extends a{constructor(e){super("mismatch_trigger_context",e.message),this.data=e}}class w extends a{constructor(e){super("timeout","Automation execution timed out"),this.data=e}}Error;class k extends a{constructor(e){super("missing_current_sprint","No current sprint, unable to execute automation"),this.data=e}}class I extends a{constructor(e){super("unsupported_sprint_schema","Unsupported sprint schema, the collection may be using sprints V1"),this.data=e}}},322931:(e,t,o)=>{o.d(t,{z:()=>i});var n=()=>o(744705),r=()=>o(630116);function i(e,t){const o=r().dn.createChildStore(e,t);if(!o||!o.isDefined())return!1;const i=o.getActionStores();for(const r of i){if(!r.isDefined())return!1;const e=r.getBlockStores();for(const t of e){if(!n().X(t))return!1}}return!0}},323316:(e,t,o)=>{o.d(t,{Dm:()=>k,JT:()=>_,xP:()=>w});o(944114),o(898992),o(354520),o(581454),o(737550);var n=()=>o(496603),r=()=>o(821062),i=()=>o(534177),a=()=>o(700500),s=()=>o(970013),l=()=>o(315771),c=()=>o(236162),d=()=>o(792071),u=()=>o(142748),p=()=>o(696706),m=()=>o(179034),g=()=>o(343666),f=()=>o(197959),v=()=>o(161479),h=()=>o(919709);async function _(e){const{loadRecordValue:t,operationPointers:o,getInitialRecordModel:r,getFinalRecordModel:i}=e,a=[],s=[],c=async(o,n)=>{var r;const i=e.getSpaceIdFromBlockId?await e.getSpaceIdFromBlockId(o,n):void 0;if(i)return i;return null===(r=await t({table:m().ev,id:o,spaceId:n}))||void 0===r?void 0:r.space_id};return await Promise.all(o.map((async o=>{if((0,p().Yt)(o,m().ev)){const p=r.getRecordValue(o),g=i.getRecordValue(o),S=null==g?void 0:g.space_id,A={...o,spaceId:(0,v().e)(S)};let x;if(p&&(x=d().Bj6.fromBlock(p).getCollectionPointer()),(!p||!x)&&g){const o=d().Bj6.fromBlock(g).getCollectionPointer();if(o){let n=i.getRecordValue(o);if(n||(n=await t(o)),n&&n.parent_id!==g.id){const t=n.space_id;var u;if(!t)null===(u=e.logBacklinkUpdatesMissingSpaceId)||void 0===u||u.call(e,{updateType:"create",backlinkType:"collection_reference",sourceBlockId:n.parent_id,referencePointer:{id:g.id,spaceId:g.space_id,table:m().ev}});a.push({space_id:t,block_id:n.parent_id,mentioned_from:{type:"collection_reference",block_id:g.id,pointer:{id:g.id,spaceId:g.space_id,table:m().ev}}})}}}const C=(0,l().H)(y(p),y(g),b);for(const{blockId:t,propertyId:n}of C.created){const r=await c(t,S);var f;if(!r)null===(f=e.logBacklinkUpdatesMissingSpaceId)||void 0===f||f.call(e,{updateType:"create",backlinkType:"property_mention",sourceBlockId:t,referencePointer:A});a.push({space_id:r,block_id:t,mentioned_from:{type:"property_mention",block_id:o.id,property_id:n,pointer:A}})}for(const{blockId:t,propertyId:n}of C.deleted){const r=await c(t,S);var h;if(!r)null===(h=e.logBacklinkUpdatesMissingSpaceId)||void 0===h||h.call(e,{updateType:"delete",backlinkType:"property_mention",sourceBlockId:t,referencePointer:A});s.push({space_id:r,block_id:t,mentioned_from:{type:"property_mention",block_id:o.id,property_id:n,pointer:A}})}const P=T(p),B=T(g);if(P&&!n().n4(P,B)){const t=P.spaceId;var _;if(!t)null===(_=e.logBacklinkUpdatesMissingSpaceId)||void 0===_||_.call(e,{updateType:"delete",backlinkType:"alias",sourceBlockId:P.id,referencePointer:A});s.push({space_id:t,block_id:P.id,mentioned_from:{type:"alias",pointer:A}})}if(B&&!n().n4(P,B)){const t=B.spaceId;var w;if(!t)null===(w=e.logBacklinkUpdatesMissingSpaceId)||void 0===w||w.call(e,{updateType:"create",backlinkType:"alias",sourceBlockId:B.id,referencePointer:A});a.push({space_id:t,block_id:B.id,mentioned_from:{type:"alias",pointer:A}})}const R=M(p),E=M(g);if(R&&!n().n4(R,E)){const t=R.spaceId;var k;if(!t)null===(k=e.logBacklinkUpdatesMissingSpaceId)||void 0===k||k.call(e,{updateType:"delete",backlinkType:"transclusion_reference",sourceBlockId:R.id,referencePointer:A});s.push({space_id:t,block_id:R.id,mentioned_from:{type:"transclusion_reference",pointer:A}})}if(E&&!n().n4(R,E)){const t=E.spaceId;var I;if(!t)null===(I=e.logBacklinkUpdatesMissingSpaceId)||void 0===I||I.call(e,{updateType:"create",backlinkType:"transclusion_reference",sourceBlockId:E.id,referencePointer:A});a.push({space_id:t,block_id:E.id,mentioned_from:{type:"transclusion_reference",pointer:A}})}}else if((0,p().Yt)(o,g().SN)){const t=r.getRecordValue(o),n=i.getRecordValue(o),d=null==n?void 0:n.space_id,u={...o,spaceId:(0,v().e)(d)},p=(0,l().p)(S(t),S(n));for(const r of p.created){const t=await c(r,d);var A;if(!t)null===(A=e.logBacklinkUpdatesMissingSpaceId)||void 0===A||A.call(e,{updateType:"create",backlinkType:"comment_mention",sourceBlockId:r,referencePointer:u});a.push({space_id:t,block_id:r,mentioned_from:{type:"comment_mention",comment_id:o.id,pointer:u}})}for(const r of p.deleted){const t=await c(r,d);var x;if(!t)null===(x=e.logBacklinkUpdatesMissingSpaceId)||void 0===x||x.call(e,{updateType:"delete",backlinkType:"comment_mention",sourceBlockId:r,referencePointer:u});s.push({space_id:t,block_id:r,mentioned_from:{type:"comment_mention",comment_id:o.id,pointer:u}})}}}))),{createdBacklinks:a,deletedBacklinks:s}}function b(e){return`${e.blockId}${e.propertyId}`}function y(e){const t=d().Bj6.fromValue(m().ev,e),o=[];if(!t)return o;const n=t.getProperties();if(!n)return o;for(const r in n){const e=h().N5L(t.getProperty(r));for(const t of e)o.push({propertyId:r,blockId:t})}return o}function S(e){const t=d().Bj6.fromValue(g().SN,e);return t&&t.alive?h().N5L(t.getText()):[]}function w(e){var t,o,n,r;return"comment_mention"===e.mentioned_from.type?{table:g().SN,id:e.mentioned_from.comment_id,spaceId:(0,v().e)(null===(t=e.mentioned_from.pointer)||void 0===t?void 0:t.spaceId)}:"reference"===e.mentioned_from.type?{table:m().ev,id:e.mentioned_from.parent_block_id,spaceId:(0,v().e)(null===(o=e.mentioned_from.parent_pointer)||void 0===o?void 0:o.spaceId)}:"property_mention"===e.mentioned_from.type?{table:m().ev,id:e.mentioned_from.block_id,spaceId:(0,v().e)(null===(n=e.mentioned_from.pointer)||void 0===n?void 0:n.spaceId)}:"collection_reference"===e.mentioned_from.type?{table:m().ev,id:e.mentioned_from.block_id,spaceId:(0,v().e)(null===(r=e.mentioned_from.pointer)||void 0===r?void 0:r.spaceId)}:"alias"===e.mentioned_from.type||"transclusion_reference"===e.mentioned_from.type?e.mentioned_from.pointer:void(0,i().HB)(e.mentioned_from)}function k(e){const{backlinks:t,getRecordModel:o,sourceBlockRecordPointer:r}=e,i=(0,u().Yn)(r,o),a=n().HV(i),s=i[0];return a&&"block"===s.table?t.filter((t=>{const n=w(t),r=(0,u()._n)(n,o),i=(0,u().Yn)(n,o);return r&&I({...e,mentionedFromRecordPointer:n,shouldCheckSourceBlockPublicPermission:{sourceBlockRecordPointer:s}})&&A({mentionedFromRecordPath:i})&&x({...e,backlink:t,shouldPerformRelationCheck:{sourceBlock:s}})&&C({...e,backlink:t,mentionedFromRecordPath:i})})):[]}function I(e){const{actor:t,actorHasPermissionViaPublicAccessOnlyFn:o,mentionedFromRecordPointer:n,shouldCheckSourceBlockPublicPermission:i}=e,a=o({actor:t,recordPointer:n});if(a){if(!i)return!1;{const e=o({actor:t,recordPointer:i.sourceBlockRecordPointer});if(!e)return!1;if(!(0,r().A)(a.from,e.from))return!1}}return!0}function A(e){const{mentionedFromRecordPath:t}=e;return!t.some((e=>e.table===f().$Y&&e.resolved))}function x(e){const{getRecordModel:t,backlink:o,shouldPerformRelationCheck:n}=e;if("property_mention"===o.mentioned_from.type){var r;const e=t({table:m().ev,id:o.mentioned_from.block_id,spaceId:(0,v().e)(null===(r=o.mentioned_from.pointer)||void 0===r?void 0:r.spaceId)});if(!e)return!1;const i=(0,c().zN)({block:e,getRecordModel:t});if(i){const e=d().Bj6.fromCollection(i);if("title"!==o.mentioned_from.property_id){const r=s().JW(i),a=o.mentioned_from.property_id,l=r[a];if(!l)return!1;if("relation"===l.type){if(!n)return!1;{const o=n.sourceBlock,r=(0,c().zN)({block:o,getRecordModel:t}),i=s().zO(l);if(!r||r.id!==i)return!1;if(s().G2({...e.pointer,propertyId:a,propertySchema:l},r))return!1}}else if("title"!==l.type&&"text"!==l.type)return!1}}else if("title"===o.mentioned_from.property_id){if(!(0,a().Db)(e.type,e.getFormat()))return!1}else{if("caption"!==o.mentioned_from.property_id)return!1;if(!d().Bj6.fromBlock(e).isType(a().IA))return!1}}return!0}function C(e){const{getRecordModel:t,backlink:o,mentionedFromRecordPath:n}=e,r=(0,u().NB)(n)[0],i=(0,u().fU)({table:m().ev,id:o.block_id},t)[1];return!r||!i||r.id!==i.id}function T(e){const t=d().Bj6.fromValue(m().ev,e);if(t&&"alias"===t.type)return t.getAliasTargetPointer()}function M(e){const t=d().Bj6.fromValue(m().ev,e);if(t&&"transclusion_reference"===t.type)return t.getTransclusionReferenceTargetPointer()}},324089:(e,t,o)=>{o.d(t,{MB:()=>I,_N:()=>w,_z:()=>A,xT:()=>k,In:()=>C});o(944114),o(898992),o(823215),o(430670),o(803949),o(581454);var n=()=>o(700500),r=()=>o(763884),i=()=>o(386164),a=()=>o(161479),s=()=>o(496603),l=()=>o(494043),c=()=>o(129522),d=()=>o(508496),u=()=>o(468484),p=()=>o(436604);const m=new(o(56322).A)({performRequests:async e=>{const{environment:t}=e[0],n=s().$z(e,(e=>{const t=e.headers;return t[p().eG]||t[p().B3]}));return await o(763824).lX(Object.values(n),10,(async e=>{if(e.length>0){const n=await o(449506).callApi({eventName:"loadCachedPageChunks",environment:t,data:{requests:e.map((e=>e.args))},headers:e[0].headers});if("failed"===n.type)throw n.error}})),[]},batchSize:50,maxWorkers:2,requestDelayMs:20,requestTimeoutMs:10*o(720665).TD});var g=()=>o(294917),f=()=>o(60867),v=()=>o(722101),h=()=>o(246826),_=()=>o(778417),b=()=>o(725614);const y="ToggleBlock";function S(e){return`${y}-${e}`}function w(e){const{environment:t,store:o,transaction:r}=e,i=h().Wv({environment:t,type:n().xd.text,inMemoryRecordCache:o.inMemoryRecordCache,transaction:r,spaceId:o.pointer.spaceId});v().BC({parentStore:o.getContentStore(),appendStore:i,transaction:r});const a=o.getContentStores()[0];_().hc({environment:t,store:a});const s=a.getBlockTitleStore();b().setSelectionAtStart({store:s})}function k(e){let{blockId:t,state:o,currentUserId:n}=e;u().A.setOpen(t,o),r().A.set({userId:n,key:S(t),value:o})}function I(e){let{blockId:t,currentUserId:o}=e;const n=r().A.get({userId:o,key:S(t)});u().A.setOpen(t,n)}function A(e,t){if(!t.isDefaultRecordCache())return;if(!t.hasContent())return;const o=t.pointer;!async function(e,t,o){await m.enqueue({environment:e,args:t,headers:o})}(e,{page:{id:o.id,spaceId:(0,a().e)(o.spaceId)},limit:30,cursor:{stack:[]},verticalColumns:!1},(0,i().WS)({recordId:o.id,spaceId:o.spaceId}))}function x(e,t){const o=(null==t?void 0:t.toggleBlockIds)||[],r=(null==t?void 0:t.collectionBlockIds)||[],i=e.getType();if((0,l().BN)(e)&&o.push(e.id),"collection_view"!==i&&"collection_view_page"!==i||r.push(e.id),i===n().xd.transclusionReference){const t=e.getTransclusionReferenceTargetStore();t&&x(t,{toggleBlockIds:o,collectionBlockIds:r})}else{const t=e.getContentStores();for(const e of t)e.isNavigableBlock()||x(e,{toggleBlockIds:o,collectionBlockIds:r}),"collection_view"===e.getType()&&r.push(e.id)}return{toggleBlockIds:o,collectionIds:r}}function C(e){const{environment:t,blockStore:o,includeSubitems:n}=e,{toggleBlockIds:r,collectionIds:i}=x(o),a=o.environment.currentUser.id;r.forEach((e=>I({blockId:e,currentUserId:a})));const l=s().oE(i.map((e=>function(e){const t=c().K.findCollectionViewBlockFromId(e);if(t&&"collectionContextStore"in t)return t.collectionContextStore}(e)))),p=l.flatMap((e=>e.groupsStore.getAllGroupStates())),m=r.every((e=>u().A.isOpen(e))),v=p.every((e=>e.toggleStateStore.state)),h=!(m&&v);r.forEach((e=>k({blockId:e,state:h,currentUserId:a}))),function(e,t,o){for(const n of t)for(const t of n.groupsStore.getAllGroupStates())(0,g().J)({environment:e,collectionContextStore:n,groupFormat:t.groupsPointer[0],toggleStateStore:t.toggleStateStore,newValue:o})}(t,l,h);const _=d().default.checkGate({gateName:"expand_sub_items_hotkey"});if(!n||!_)return;const b=r.length>0;for(const s of l)f().Gr({collectionContextStore:s,forceState:b?h?"open":"closed":void 0})}},324234:(e,t,o)=>{o.r(t),o.d(t,{handleTokenRefresh:()=>v,initializeMobileNativeApp:()=>m,invalidateToken:()=>f,registerPushNotifications:()=>g,waitForCssInsets:()=>h});var n=()=>o(857639),r=()=>o(873005),i=()=>o(651170),a=()=>o(229833),s=()=>o(763824),l=()=>o(989423),c=()=>o(630116),d=()=>o(276470),u=()=>o(246826),p=()=>o(317909);async function m(e){if(e.device.isMobileNative&&e.mobileNative&&(await h(e),e.mobileNative.updateReceiveApiHandlers({track:t=>{l().vd(e,t.eventName,{...t.eventData,logging_source:"mobile_native"})}}),e.mobileNative&&e.mobileNative.sqliteConnection)){try{await e.mobileNative.sqliteConnection.ensureMigrated()}catch(t){n().log({level:"error",from:"mobileNativeActions",type:"sqliteConnectionEnsureMigratedError",error:(0,a().n6)(t),data:(0,i().CS)(t,{isBrowser:!1})})}e.mobileNative.sqliteConnection.optimize().catch((e=>{n().log({level:"error",from:"mobileNativeActions",type:"sqliteConnectionOptimizeError",error:(0,a().n6)(e),data:(0,i().CS)(e,{isBrowser:!1})})}))}}async function g(e){const{mobileNative:t}=e;if(t&&t.api.registerPushNotifications){const o=await t.api.registerPushNotifications();o&&v(e,o,"registration")}}function f(e){const{environment:t,token:o,userId:n}=e,i=(0,r().ON)({user_id:n,token:o}),a=new(c().pm)({environment:t,pointer:{table:r().T2,id:i}});p().createAndCommit({userAction:"mobileNativeActions.invalidateToken",userId:n,canUndo:!0,environment:t,perform:e=>{u().zv({store:a,data:{invalid:!0},transaction:e})}})}async function v(e,t,o){const n=e.currentUser.id;if(t&&n){const o=(0,r().ON)({user_id:n,token:t}),i=await(0,d().e)(e,{pointer:{table:r().T2,id:o},userId:n,version:-1});let a=!1;i&&(i.value&&!i.value.invalid||(p().createAndCommit({userAction:"mobileNativeActions.handleTokenRefresh",environment:e,canUndo:!0,perform:i=>{u().eC({environment:e,table:r().T2,value:{id:o,token:t,user_id:n,invalid:!1},inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,transaction:i})}}),a=!0))}}async function h(e){if(!e.device.isIOS||!e.device.isMobileNative)return;const t=document.createElement("div");t.style.width=`calc(${["env(safe-area-inset-top)","env(safe-area-inset-bottom)","env(safe-area-inset-left)","env(safe-area-inset-right)"].join(" + ")})`,t.style.visibility="hidden",document.body.appendChild(t);let o=0;for(;o<50&&!(t.offsetWidth>0);)await s().wR(1),o++;document.body.removeChild(t),e.WindowSizeStore.updateWindowSize()}},325383:(e,t,o)=>{o.d(t,{Kk:()=>s,Mw:()=>a,c_:()=>i,iv:()=>r});var n=()=>o(496603);function r(e){const{collectionContextStore:t,groupsPointer:o,hasPartialResults:r}=e,i=t.shouldShowSpinnerStore.state,a="load_general"===t.loadingDetailsStore.state.type&&!r||"load_more_blocks"===t.loadingDetailsStore.state.type&&n().n4(t.loadingDetailsStore.state.group,o);return i&&a}function i(e){const{collectionContextStore:t,displayState:o}=e;return t.shouldShowSpinnerStore.state&&0===o.visibleGroups.length}function a(e){const{collectionContextStore:t,isForColumnGroups:o}=e,n=o?"load_more_columns":"load_more_groups";return t.isLoadingStore.state&&t.loadingDetailsStore.state.type===n}function s(e){const{collectionContextStore:t,groupsPointer:o}=e;return t.shouldShowSpinnerStore.state&&"load_more_blocks"===t.loadingDetailsStore.state.type&&n().n4(t.loadingDetailsStore.state.group,o)}},326406:(e,t,o)=>{o.d(t,{A:()=>r});var n=()=>o(677338);function r(){return!!n().$m()}},326589:(e,t,o)=>{o.d(t,{g:()=>r});var n=()=>o(792415);function r(){var e,t;return!(null===(e=n().A.state.publicPageData)||void 0===e||!e.isPublicShareLink)||!(null===(t=n().A.state.publicPageData)||void 0===t||!t.isInNewReceiverExperimentVariant)}},327994:(e,t,o)=>{o.d(t,{Cz:()=>l,jK:()=>s,uy:()=>i,yh:()=>a});var n=()=>o(751735),r=()=>o(59364);const i=r().Z+6,a=r().Z,s=r().S;function l(e,t){return{fill:t?e.icon.secondary:(0,n().X4)(e.icon.secondary,.5),transition:"0.15s"}}},328523:(e,t,o)=>{o.d(t,{Mq:()=>s,cW:()=>i,gS:()=>a,l7:()=>l,np:()=>r,yY:()=>c});var n=()=>o(989423);function r(e,t){n().vd(e,"tap_mobile_action_bar_item",{item_name:t.itemName,from:t.from})}function i(e){n().vd(e,"scroll_mobile_action_bar")}function a(e){n().vd(e,"open_mobile_sidebar")}function s(e,t){n().vd(e,"tap_mobile_bottom_bar_item",{...t})}function l(e){n().vd(e,"mobile_add_to_menu_accept")}function c(e,t){n().vd(e,"navigation",{...t})}},329418:(e,t,o)=>{o.d(t,{g:()=>i});var n=()=>o(763884),r=()=>o(271584);function i(e){const t=n().A.get({userId:e.userId,key:`${e.spaceId}:analytics_session`});if(!(t&&Date.now()-t.lastFocusedTime>r().o))return t}},330013:(e,t,o)=>{o.d(t,{$c:()=>P,Fo:()=>U,JP:()=>O,Jm:()=>b,Kg:()=>R,Li:()=>W,M2:()=>E,NJ:()=>T,OL:()=>G,OR:()=>V,Pf:()=>N,W3:()=>X,W9:()=>B,Y8:()=>z,_D:()=>M,d6:()=>L,ew:()=>$,g8:()=>H,gh:()=>D,i4:()=>F,lg:()=>Q,qM:()=>j,rH:()=>C,ry:()=>Y,sm:()=>q,tB:()=>x,tV:()=>Z,zv:()=>K});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(803949),o(581454);var n=()=>o(212547),r=()=>o(696706),i=()=>o(179034),a=()=>o(292588),s=()=>o(105652),l=()=>o(630105),c=()=>o(430476),d=()=>o(964085),u=()=>o(496603),p=()=>o(534177);const m={Records:{tableName:"records",idColumn:"record_id",priorityColumns:"importance, timestamp",priorityColumnsOrderBy:"importance DESC, timestamp DESC"},Block:{tableName:"block",idColumn:"id",priorityColumns:"meta_last_access_timestamp",priorityColumnsOrderBy:"meta_last_access_timestamp DESC"}},g=Object.keys({record_table:!0,record_id:!0,record_value:!0,space_id:!0,timestamp:!0,parent_table:!0,parent_id:!0,importance:!0,user_id:!0});async function f(e){return await(0,c().G2)({...e,webLockRequest:{tables:"sqliteRecordCache",isWrite:!1}})}async function v(e){return await(0,c().G2)({...e,webLockRequest:{tables:"sqliteRecordCache",isWrite:!0}})}async function h(e){return await(0,c().G2)({...e,webLockRequest:{tables:"offlineStorage",isWrite:!1}})}async function _(e){return await(0,c().G2)({...e,webLockRequest:{tables:"offlineStorage",isWrite:!0}})}async function b(e,t){await v({connection:e,statements:[{sql:"\n\t\t\t\tUPDATE records SET user_id = ? WHERE user_id is null\n\t\t\t\t",args:[t]}],queryName:"backfillRecordsWithUserId"})}function y(e){const t=u().$z(e.records,(e=>e.pointer.table)),o=[];return Object.entries(t).forEach((t=>{let[n,r]=t;const i=l().M.find((e=>e.table===n));if(!i)return;const a=(0,p().uv)(i.recordColumnTypes),s=(0,p().uv)(i.metaColumnTypes),d=[...a,...s];u().iv(r,Math.floor(c().Zj/d.length)).forEach((t=>{const r=`(${d.join(",")})`,i=Array(t.length).fill(`(${"?, ".repeat(d.length-1)}?)`).join(",");let l;l=e.maybeStaleRecords&&d.includes("version")?`INSERT INTO ${n} ${r} VALUES ${i}`.concat("ON CONFLICT (id, meta_user_id) DO UPDATE SET").concat("\n").concat(d.map((e=>`${e} = excluded.${e}`)).join(",")).concat("\n").concat(`WHERE excluded.version > ${n}.version`):`INSERT OR REPLACE INTO ${n} ${r} VALUES ${i}`;const c=u().Bq(t.map((e=>{let{value:t,timestamp:o,userId:n}=e;if(!t)return[];const r=t.value;if(!r)return[];const i=a.map((e=>function(e){if(null==e)return null;if("string"==typeof e||"number"==typeof e)return e;if("boolean"==typeof e)return e?1:0;return JSON.stringify(e)}((0,p().O)(r,e)?r[e]:void 0))),l=s.map((e=>{switch(e){case"meta_user_id":return n;case"meta_role":return t.role;case"meta_last_access_timestamp":return o;default:throw new Error(`Unknown meta column ${e}`)}}));return i.concat(l)})));o.push({sql:l,args:c})}))})),o}function S(e){const[t,o]=u().jB(e.records,(e=>J(e))),r=y({records:t,maybeStaleRecords:e.maybeStaleRecords}),i=function(e){const{records:t,maybeStaleRecords:o}=e;return u().iv(t,Math.floor(c().Zj/g.length)).map((e=>{let t=`\n\t\t\tINSERT INTO records\n\t\t\t(\n\t\t\t\trecord_table,\n\t\t\t\trecord_id,\n\t\t\t\trecord_value,\n\t\t\t\ttimestamp,\n\t\t\t\tparent_table,\n\t\t\t\tparent_id,\n\t\t\t\timportance,\n\t\t\t\tuser_id,\n\t\t\t\tspace_id\n\t\t\t)\n\t\t\tVALUES ${Array(e.length).fill("(?, ?, ?, ?, ?, ?, ?, ?, ?)").join(",")}`;return t=o?t.concat("\n\t\t\t\tON CONFLICT (record_table, record_id, user_id) DO UPDATE SET\n\t\t\t\t\trecord_value =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.record_value\n\t\t\t\t\t\tELSE records.record_value\n\t\t\t\t\t\tEND,\n\t\t\t\t\ttimestamp =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.timestamp\n\t\t\t\t\t\tELSE records.timestamp\n\t\t\t\t\t\tEND,\n\t\t\t\t\tparent_table =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.parent_table\n\t\t\t\t\t\tELSE records.parent_table\n\t\t\t\t\t\tEND,\n\t\t\t\t\tparent_id =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.parent_id\n\t\t\t\t\t\tELSE records.parent_id\n\t\t\t\t\t\tEND,\n\t\t\t\t\timportance =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.importance\n\t\t\t\t\t\tELSE records.importance\n\t\t\t\t\t\tEND,\n\t\t\t\t\tuser_id =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.user_id\n\t\t\t\t\t\tELSE excluded.user_id\n\t\t\t\t\t\tEND,\n\t\t\t\t\t-- space_id never changes.\n\t\t\t\t\tspace_id = COALESCE(records.space_id, excluded.space_id)"):t.concat("\n\t\t\t\tON CONFLICT (record_table, record_id, user_id) DO UPDATE SET\n\t\t\t\t\trecord_value = excluded.record_value,\n\t\t\t\t\ttimestamp = excluded.timestamp,\n\t\t\t\t\tparent_table = excluded.parent_table,\n\t\t\t\t\tparent_id = excluded.parent_id,\n\t\t\t\t\timportance = excluded.importance,\n\t\t\t\t\tuser_id = excluded.user_id,\n\t\t\t\t\t-- space_id never changes.\n\t\t\t\t\tspace_id = COALESCE(records.space_id, excluded.space_id)"),{sql:t,args:u().Bq(e.map((e=>{let{pointer:t,value:o,timestamp:r,importance:i,userId:a}=e,s=null,l=null;return o&&o.value&&(0,n().ob)(o.value)&&(s=o.value.parent_id,l=o.value.parent_table),[t.table,t.id,(0,c().Fm)(o),r,l,s,"number"==typeof i?i:null,a,t.spaceId||null]})))}}))}({records:o,maybeStaleRecords:e.maybeStaleRecords});return[...w(t),...k(o.filter((e=>l().z.has(e.pointer.table)))),...r,...i]}function w(e){return u().iv(e,Math.floor(c().Zj/(2*e.length))).map((e=>{const t=d().F.or(e.map((e=>d().F`(records.record_id = ${e.pointer.id} AND records.user_id = ${e.userId})`)));return d().F`DELETE FROM records WHERE ${t}`.asWrite()}))}function k(e){const t=u().$z(e,(e=>e.pointer.table)),o=[];return Object.entries(t).forEach((e=>{let[t,n]=e;u().iv(n,Math.floor(c().Zj/(2*n.length))).forEach((e=>{const n=d().F.or(e.map((e=>d().F`(id = ${e.pointer.id} AND meta_user_id = ${e.userId})`)));o.push(d().F`DELETE FROM ${d().F.ident(t)} WHERE ${n}`.asWrite())}))})),o}async function I(e,t){if(0===t.length)return[];const o=u().$z(t,(e=>e.pointer.table)),n=[];Object.entries(o).forEach((t=>{let[o,i]=t;const a=l().M.find((e=>e.table===o));if(!a)return;const s=Array(i.length).fill("(id = ? AND meta_user_id = ?)").join(" OR "),c=u().qI(i,(e=>{let{pointer:{table:t,id:o},userId:n}=e;return[o,n]}));n.push(async function(){const[t]=await f({connection:e,statements:[{sql:`\n\t\t\t\tSELECT * FROM ${o}\n\t\t\t\tWHERE ${s}`,args:c,getData:!0}],queryName:"getRecordsFromSeparateTables"});return t.data.map((e=>function(e,t,o){return{pointer:r().L3.fromPointerLike({table:e,id:t.id,spaceId:t.space_id||void 0}),value:{role:t.meta_role,value:A(t,o)},timestamp:t.meta_last_access_timestamp,importance:0,userId:t.meta_user_id}}(o,e,a)))}())}));const i=await Promise.all(n);return u().Bq(i)}function A(e,t){const o={};return(0,p().uv)(t.recordColumnTypes).forEach((n=>{const r=t.recordColumnTypes[n];if(null!==e[n])switch(r){case a().A.UUID:case a().A.String:case a().A.Number:o[n]=e[n];break;case a().A.StringArray:case a().A.JSON:o[n]=JSON.parse(e[n]);break;case a().A.XML:o[n]=e[n];break;case a().A.UUIDArray:o[n]=JSON.parse(e[n]);break;case a().A.Boolean:o[n]=1===e[n];break;case a().A.CIDR:o[n]=e[n];break;case a().A.NumberArray:o[n]=JSON.parse(e[n]);break;case a().A.Blob:o[n]=e[n];break;default:(0,p().HB)(r)}})),o}async function x(e,t){const[o,n]=u().jB(t,(e=>l().z.has(e.pointer.table))),i=await I(e,o),a=new Set(i.map((e=>r().tr.toKey({pointer:e.pointer,userId:e.userId})))),s=o.filter((e=>!a.has(r().tr.toKey(e)))),c=await async function(e,t){if(0===t.length)return[];const o=Array(t.length).fill("(record_table = ? AND record_id = ? AND user_id = ?)").join(" OR "),n=u().qI(t,(e=>{let{pointer:{table:t,id:o},userId:n}=e;return[t,o,n]})),[i]=await f({connection:e,statements:[{sql:`\n\t\t\t\tSELECT * FROM records\n\t\t\t\tWHERE ${o}`,args:n,getData:!0}],queryName:"getRecordsFromRecordsTable"});return i.data.map((e=>({pointer:r().L3.fromPointerLike({table:e.record_table,id:e.record_id,spaceId:e.space_id||void 0}),value:JSON.parse(e.record_value),timestamp:e.timestamp,importance:"number"==typeof e.importance?e.importance:void 0,userId:e.user_id})))}(e,n.concat(s)),d=c.filter((e=>!J(e)));return i.concat(d)}async function C(e,t){const o=d().F`
  SELECT * FROM block
  WHERE parent_table = ${t.parent.table}
  AND parent_id = ${t.parent.id}
  AND meta_user_id = ${t.userId}
  `.asRead(),n=d().F`
  UPDATE block
  SET meta_last_access_timestamp = ${t.timestamp}
  WHERE parent_table = ${t.parent.table}
  AND parent_id = ${t.parent.id}
  AND meta_user_id = ${t.userId}
  `.asWrite(),[a]=await v({connection:e,statements:[o,n],queryName:"getBlocksWithParent"});return a.data.map((e=>({pointer:r().L3.fromPointerLike({table:i().ev,id:e.id,spaceId:e.space_id||void 0}),value:{role:e.meta_role,value:A(e,s().J)},userId:t.userId})))}async function T(e,t){const o=d().F`
    WITH RECURSIVE page_blocks AS (
      SELECT * FROM block
      WHERE id = ${t.page.id}
      AND meta_user_id = ${t.userId}

      UNION

      SELECT block.*
      FROM
        block INDEXED BY block_parent_id,
        page_blocks
      WHERE
      (
        page_blocks.id = ${t.page.id}
        OR page_blocks.type NOT IN ('page', 'toggle')
      )
      AND block.parent_table = 'block'
      AND block.parent_id = page_blocks.id
      AND block.meta_user_id = ${t.userId}
    )
    SELECT * FROM page_blocks
    `,n=await o.all(e,"getPageBlocksByParent");return 0===n.length?[]:n.map((e=>({pointer:r().L3.fromPointerLike({table:i().ev,id:e.id,spaceId:e.space_id||void 0}),value:{role:e.meta_role,value:A(e,s().J)},userId:t.userId})))}async function M(e,t){const o=t.filter((e=>"set"===e.type&&!e.maybeStaleRecord)),n=t.filter((e=>"set"===e.type&&e.maybeStaleRecord)),r=t.filter((e=>{let{type:t}=e;return"access"===t})),a=t.filter((e=>{let{type:t}=e;return"delete"===t})),s=[];if(r.forEach((e=>{const t=e.record.pointer.table;J(e.record)?t===i().ev&&s.push(d().F`
	        UPDATE block
	        SET meta_last_access_timestamp = ${e.record.timestamp}
	        WHERE id = ${e.record.pointer.id}
	        AND meta_user_id = ${e.record.userId}
	        `.asWrite()):s.push({sql:"UPDATE records\n          SET timestamp = ?\n          WHERE record_table = ?\n          AND record_id = ?\n          AND user_id = ?",args:[e.record.timestamp,t,e.record.pointer.id,e.record.userId]})})),o.length>0||n.length>0){if(o.length>0){const e=o.map((e=>e.record));s.push(...S({records:e,maybeStaleRecords:!1}))}if(n.length>0){const e=n.map((e=>e.record));s.push(...S({records:e,maybeStaleRecords:!0}))}}if(a.length>0){const e=a.map((e=>e.record));s.push(...function(e){const t=k(e.filter((e=>l().z.has(e.pointer.table)))),o=w(e);return t.concat(o)}(e))}0!==s.length&&await v({connection:e,statements:s,queryName:"applyRecordCacheOperations"})}async function P(e){const{connection:t,tables:o,maxSize:n,offlineRecordIds:r}=e;if(0===o.length)return;const i=o.map((e=>function(e){const{table:t,maxSize:o,offlineRecordIds:n}=e,{tableName:r,idColumn:i,priorityColumns:a,priorityColumnsOrderBy:s}=m[t],l=`\n\t\tWITH offline_record_ids(id) AS (\n\t\t\t${n.length>0?`VALUES ${n.map((()=>"(?)")).join(", ")}`:"SELECT 1 WHERE false"}\n\t\t)\n\n\t`,c=`\n\t\t\n\t\tSELECT\n\t\t\t${i},\n\t\t\t0 as preservation_priority,\n\t\t\t${a}\n\t\tFROM ${r}\n\t\tWHERE ${i} IN (SELECT id FROM offline_record_ids)\n\t\n\t\tUNION\n\t\t\n\t\tSELECT\n\t\t\t${i},\n\t\t\t1 as preservation_priority,\n\t\t\t${a}\n\t\tFROM ${r}\n\t\tWHERE ${i} NOT IN (SELECT id FROM offline_record_ids)\n\t\n\t\tORDER BY preservation_priority ASC, ${s}\n\t\tLIMIT ${Math.max(o,n.length)}\n\t`;return{sql:`\n\t\t\t${l}\n\t\t\tDELETE FROM ${r}\n\t\t\tWHERE ${i} NOT IN (\n\t\t\t\tSELECT ${i} FROM (\n\t\t\t\t\t${c}\n\t\t\t\t)\n\t\t\t)\n\t\t`,args:n}}({table:e,maxSize:n,offlineRecordIds:r})));await v({connection:t,statements:i,queryName:"evictTables"})}async function B(e){const{connection:t,userId:o,orderBy:n}=e,[{data:r}]=await h({connection:t,statements:[{sql:`\n\t\t\t\t\tSELECT\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tlast_downloaded_at,\n\t\t\t\t\t\tlast_downloaded_version,\n\t\t\t\t\t\tCASE \n\t\t\t\t\t\t\t\tWHEN EXISTS (\n\t\t\t\t\t\t\t\t\tSELECT 1 FROM offline_action\n\t\t\t\t\t\t\t\t\tWHERE offline_action.impacted_page_id = offline_page.id\n\t\t\t\t\t\t\t\t\tAND offline_action.origin_page_id = offline_page.id\n\t\t\t\t\t\t\t\t\tAND offline_action.autosync_type = 'not_autosynced'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\tTHEN 1\n\t\t\t\t\t\t\t\tELSE 0\n\t\t\t\t\t\tEND AS is_explicitly_offlined_origin,\n\t\t\t\t\t\tCASE\n\t\t\t\t\t\t\t\tWHEN EXISTS (\n\t\t\t\t\t\t\t\t\tSELECT 1 FROM offline_action\n\t\t\t\t\t\t\t\t\tWHERE offline_action.impacted_page_id = offline_page.id\n\t\t\t\t\t\t\t\t\tAND offline_action.origin_page_id = offline_page.id\n\t\t\t\t\t\t\t\t\tAND offline_action.autosync_type = 'frecent'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\tTHEN 1\n\t\t\t\t\t\t\t\tELSE 0\n\t\t\t\t\t\tEND AS is_autosynced_origin\n\t\t\t\t\tFROM offline_page\n\t\t\t\t\tWHERE meta_user_id = ?\n\t\t\t\t\t${"mostStaleFirst"===n?"ORDER BY last_downloaded_at ASC":""}\n\t\t\t\t`,args:[o],getData:!0}]}),i=[];for(const a of r)(0,p().Gv)(a)&&(0,p().O)(a,"id")&&"string"==typeof a.id&&i.push([a.id,{lastDownloadedAt:"number"==typeof a.last_downloaded_at?a.last_downloaded_at:void 0,lastDownloadedVersion:"number"==typeof a.last_downloaded_version?a.last_downloaded_version:void 0,isExplicitlyOfflinedOrigin:1===a.is_explicitly_offlined_origin,isAutosyncedOrigin:1===a.is_autosynced_origin}]);return i}async function R(e){const{connection:t,userId:o}=e,[{data:n}]=await h({connection:t,statements:[d().F`
				SELECT 
					id,
					last_downloaded_at,
					last_downloaded_version,
					CASE 
							WHEN EXISTS (
								SELECT 1 
								FROM offline_action
								WHERE offline_action.impacted_page_id = offline_page.id
								AND offline_action.origin_page_id = offline_page.id
							)
							THEN 1
							ELSE 0
					END AS is_origin,
					CASE 
							WHEN EXISTS (
								SELECT 1 
								FROM offline_action
								WHERE offline_action.impacted_page_id = offline_page.id
								AND offline_action.origin_page_id = offline_page.id
								AND offline_action.autosync_type = 'not_autosynced'
							)
							THEN 1
							ELSE 0
					END AS is_explicitly_offlined_origin,
					CASE 
							WHEN EXISTS (
								SELECT 1 
								FROM offline_action
								WHERE offline_action.impacted_page_id = offline_page.id
								AND offline_action.origin_page_id = offline_page.id
								AND offline_action.autosync_type = 'frecent'
							)
							THEN 1
							ELSE 0
					END AS is_autosynced_origin 
				FROM offline_page 
				WHERE meta_user_id = ${o} 
					AND is_origin = 1 
				ORDER BY last_downloaded_at ASC
			`.asRead()]}),r=[];for(const i of n)(0,p().Gv)(i)&&(0,p().O)(i,"id")&&"string"==typeof i.id&&r.push([i.id,{lastDownloadedAt:"number"==typeof i.last_downloaded_at?i.last_downloaded_at:void 0,lastDownloadedVersion:"number"==typeof i.last_downloaded_version?i.last_downloaded_version:void 0,isExplicitlyOfflinedOrigin:1===i.is_explicitly_offlined_origin,isAutosyncedOrigin:1===i.is_autosynced_origin}]);return r}async function E(e){const{connection:t,userId:o}=e,[{data:n}]=await h({connection:t,statements:[d().F`
				SELECT 
					id,
					last_downloaded_at,
					last_downloaded_version,
					CASE 
							WHEN EXISTS (
								SELECT 1 
								FROM offline_action
								WHERE offline_action.impacted_page_id = offline_page.id
								AND offline_action.origin_page_id = offline_page.id
							)
							THEN 1
							ELSE 0
					END AS is_origin,
					CASE 
							WHEN EXISTS (
								SELECT 1 
								FROM offline_action
								WHERE offline_action.impacted_page_id = offline_page.id
								AND offline_action.origin_page_id = offline_page.id
								AND offline_action.autosync_type = 'not_autosynced'
							)
							THEN 1
							ELSE 0
					END AS is_explicitly_offlined_origin,
					CASE 
							WHEN EXISTS (
								SELECT 1 
								FROM offline_action
								WHERE offline_action.impacted_page_id = offline_page.id
								AND offline_action.origin_page_id = offline_page.id
								AND offline_action.autosync_type = 'frecent'
							)
							THEN 1
							ELSE 0
					END AS is_autosynced_origin 
				FROM offline_page 
				WHERE meta_user_id = ${o} 
					AND is_autosynced_origin = 1 
				ORDER BY last_downloaded_at ASC
			`.asRead()]}),r=[];for(const i of n)(0,p().Gv)(i)&&(0,p().O)(i,"id")&&"string"==typeof i.id&&r.push([i.id,{lastDownloadedAt:"number"==typeof i.last_downloaded_at?i.last_downloaded_at:void 0,lastDownloadedVersion:"number"==typeof i.last_downloaded_version?i.last_downloaded_version:void 0,isExplicitlyOfflinedOrigin:1===i.is_explicitly_offlined_origin,isAutosyncedOrigin:!0}]);return r}async function D(e){const{connection:t,pageId:o,userId:n}=e,[{data:r}]=await h({connection:t,statements:[d().F`SELECT COUNT(*) FROM offline_page WHERE id = ${o} AND meta_user_id = ${n} LIMIT 1`.asRead()]});return 1===u().Jt(r,"[0][COUNT(*)]")}async function N(e){const{connection:t,impactedPageId:o,userId:n}=e,[{data:r}]=await h({connection:t,statements:[d().F`SELECT * FROM offline_action WHERE impacted_page_id = ${o} AND meta_user_id = ${n}`.asRead()]}),i=[];for(const s of r)(0,p().Gv)(s)&&(0,p().O)(s,"impacted_page_id")&&"string"==typeof s.impacted_page_id&&(!(0,p().O)(s,"autosync_type")||"frecent"!==s.autosync_type&&"not_autosynced"!==s.autosync_type||i.push({impactedPageId:s.impacted_page_id,originPageId:"string"==typeof s.origin_page_id?s.origin_page_id:void 0,autosyncType:(a=s.autosync_type,"frecent"===a||"not_autosynced"===a?s.autosync_type:void 0)}));var a;return i}async function L(e){const{connection:t,pageId:o,userId:n}=e,[{data:[r]}]=await h({connection:t,statements:[d().F`
				SELECT last_downloaded_version FROM offline_page
				WHERE id = ${o}
				AND meta_user_id = ${n}
			`.asRead()]});if((0,p().Gv)(r)&&(0,p().O)(r,"last_downloaded_version")&&"number"==typeof r.last_downloaded_version)return r.last_downloaded_version}async function F(e){const{connection:t,userId:o,pageId:n}=e;await _({connection:t,statements:[d().F`INSERT OR IGNORE INTO offline_page (meta_user_id, id) VALUES (${o}, ${n})`.asWrite()]})}async function U(e){const{connection:t,userId:o,originPageId:n,impactedPageId:r,autosyncTypes:i}=e;await _({connection:t,statements:i.map((e=>d().F`INSERT OR IGNORE INTO offline_action (meta_user_id, origin_page_id, impacted_page_id, autosync_type) VALUES (${o}, ${n}, ${r}, ${e})`.asWrite()))})}async function O(e){const{connection:t,userId:o,originPageId:n,impactedPageIds:r}=e,i=r.map((e=>"?")).join(","),a="string"==typeof n?{sql:`\n\t\t\t\t\t\tDELETE FROM offline_action\n\t\t\t\t\t\tWHERE meta_user_id = ?\n\t\t\t\t\t\tAND origin_page_id = ?\n\t\t\t\t\t\tAND impacted_page_id IN (${i})\n\t\t\t\t\t`,args:[o,n,...r]}:{sql:`\n\t\t\t\t\t\tDELETE FROM offline_action\n\t\t\t\t\t\tWHERE meta_user_id = ?\n\t\t\t\t\t\tAND impacted_page_id IN (${i})\n\t\t\t\t\t`,args:[o,...r]};await _({connection:t,statements:[a,d().F`DELETE FROM offline_page 
			WHERE meta_user_id = ${o}
			AND NOT EXISTS (
				SELECT 1 
				FROM offline_action 
				WHERE offline_action.impacted_page_id = offline_page.id
				AND offline_action.meta_user_id = ${o}
			)`.asWrite()]})}async function V(e){const{connection:t,userId:o,impactedPageId:n,originPageId:r,autosyncTypes:i,downloadStatus:a}=e,s=[d().F`INSERT OR IGNORE INTO offline_page (
			id,
			meta_user_id,
			download_status
		) VALUES (
			${n},
			${o},
			${a}
		)`.asWrite(),...i.map((e=>d().F`INSERT OR IGNORE INTO offline_action (
				meta_user_id,
				origin_page_id,
				impacted_page_id,
				autosync_type
			) VALUES (
				${o},
				${r},
				${n},
				${e}
			)`.asWrite()))];await _({connection:t,statements:s})}async function j(e){const{connection:t,pageId:o,userId:n,lastDownloadedAt:r,lastDownloadedVersion:i}=e,a=[d().F`
			UPDATE offline_page
			SET
				last_downloaded_at = ${r},
				last_downloaded_version = ${i??null}
			WHERE id = ${o}
			AND meta_user_id = ${n}
		`.asWrite()];await _({connection:t,statements:a})}async function z(e){const{connection:t,originPageId:o,userId:n}=e,[{data:r}]=await h({connection:t,statements:[d().F`SELECT impacted_page_id FROM offline_action WHERE ${d().F.and([d().F`meta_user_id = ${n}`,d().F`origin_page_id = ${o}`])}`.asRead()]});return r.map((e=>e.impacted_page_id))}async function q(e){const{connection:t,pageId:o,userId:n}=e,[{data:r}]=await h({connection:t,statements:[d().F`SELECT download_status FROM offline_page WHERE id = ${o} AND meta_user_id = ${n} LIMIT 1`.asRead()]});if(0!==r.length)return u().Jt(r,"[0][download_status]")}async function H(e){const{connection:t,pageId:o,userId:n,downloadStatus:r}=e;await _({connection:t,statements:[d().F`UPDATE offline_page SET download_status = ${r} WHERE id = ${o} AND meta_user_id = ${n}`.asWrite()]})}async function W(e){const{connection:t,originPageId:o,userId:n,autosyncType:r}=e;await _({connection:t,statements:[d().F`DELETE FROM offline_action WHERE ${d().F.and([d().F`meta_user_id = ${n}`,d().F`origin_page_id = ${o}`,d().F`autosync_type = ${r}`])}`.asWrite(),d().F`DELETE FROM offline_page 
			WHERE meta_user_id = ${n}
			AND NOT EXISTS (
				SELECT 1
				FROM offline_action 
				WHERE offline_action.impacted_page_id = offline_page.id
				AND offline_action.meta_user_id = ${n}
			)`.asWrite()]})}async function K(e){const{connection:t,userId:o}=e;await _({connection:t,statements:[d().F`DELETE FROM offline_action WHERE ${d().F.and([d().F`meta_user_id = ${o}`,d().F`autosync_type = ${"frecent"}`])}`.asWrite(),d().F`DELETE FROM offline_page 
			WHERE meta_user_id = ${o}
			AND NOT EXISTS (
				SELECT 1
				FROM offline_action 
				WHERE offline_action.impacted_page_id = offline_page.id
				AND offline_action.meta_user_id = ${o}
			)`.asWrite()]})}async function G(e){const{connection:t,pageId:o,userId:n}=e,[{data:r}]=await h({connection:t,statements:[d().F`SELECT COUNT(*) FROM offline_action WHERE ${d().F.and([d().F`meta_user_id = ${n}`,d().F`impacted_page_id = ${o}`,d().F`origin_page_id = ${o}`])} LIMIT 1`.asRead()]});return 1===u().Jt(r,"[0][COUNT(*)]")}async function $(e){const{connection:t,pageId:o,userId:n}=e,[{data:r}]=await h({connection:t,statements:[d().F`SELECT offline_page.id FROM offline_action
			JOIN offline_page ON offline_action.impacted_page_id = offline_page.id
			WHERE ${d().F.and([d().F`offline_page.meta_user_id = ${n}`,d().F`offline_action.meta_user_id = ${n}`,d().F`offline_action.origin_page_id = ${o}`,d().F`offline_action.impacted_page_id <> ${o}`])}`.asRead()]}),a=r.map((e=>(0,p().Gv)(e)&&(0,p().O)(e,"id")&&"string"==typeof e.id?e.id:void 0)).filter(p().O9);if(0===a.length)return[];return(await x(t,a.map((e=>({userId:n,pointer:{id:e,table:i().ev}}))))).map((e=>{var t,o,n;if(null!==(t=e.value)&&void 0!==t&&t.value)return"type"in(null===(o=e.value)||void 0===o?void 0:o.value)&&"collection_view"===(null===(n=e.value)||void 0===n||null===(n=n.value)||void 0===n?void 0:n.type)?e.pointer.id:void 0})).filter(p().O9)}async function Y(e){const t=[];l().z.forEach((e=>{t.push(d().F`DELETE FROM ${d().F.ident(e)}`.asWrite())})),await v({connection:e,statements:t,queryName:"deleteAllCachedRecordsFromSeparateTables"})}async function Q(e){await v({connection:e,statements:[{sql:"DELETE FROM records"}],queryName:"deleteAllCachedRecordsFromRecordsTable"})}async function Z(e){await Y(e),await Q(e),await async function(e){await _({connection:e,statements:[d().F`DELETE FROM offline_action`.asWrite(),d().F`DELETE FROM offline_page`.asWrite()],queryName:"deleteAllCachedRecordsFromOfflineTables"})}(e)}async function X(e){const{connection:t,maxSize:o}=e,n={Records:{sql:`SELECT COUNT(*) FROM ${m.Records.tableName}`,getData:!0},Block:{sql:`SELECT COUNT(*) FROM ${m.Block.tableName}`,getData:!0}},r=await f({connection:t,statements:Object.values(n),queryName:"getTablesThatNeedEviction"}),i=u().Jt(r,"[0][data][0][COUNT(*)]"),a=u().Jt(r,"[1][data][0][COUNT(*)]");if("number"!=typeof i||"number"!=typeof a)throw new Error("getTablesThatNeedEviction query returned malformed results.");return[...i>o?["Records"]:[],...a>o?["Block"]:[]]}function J(e){return l().z.has(e.pointer.table)&&void 0!==e.value&&void 0!==e.value.value}},331435:(e,t,o)=>{o.d(t,{e:()=>a,u:()=>i});o(898992),o(823215);var n=()=>o(757695);const r=new Map;function i(e){const t=r.get(e);if(t)return t;{const t=n().default.createValue(!1,{name:"newStore"});return r.set(e,t),t}}function a(){const e=Array.from(r.entries());return 0===e.length||e.every((e=>!e[1].state))}},332751:(e,t,o)=>{o.d(t,{I:()=>i});var n=()=>o(170722),r=()=>o(369241);function i(){n().A.state.isActive&&(r().A.setState({...r().A.state,open:!1}),n().A.setState({...n().A.state,isActive:!1,isAnimatingClosed:!0}))}},333665:(e,t,o)=>{o.d(t,{ZC:()=>c,aX:()=>a,mX:()=>s,vD:()=>l});o(898992),o(354520);var n=()=>o(634201),r=()=>o(919709),i=()=>o(496603);function a(e,t,o){const a=e.getValue(),s=r().qAZ(t),l=r().qAZ(a);if(0===s.length&&0===l.length)return""===o?{filter:{startIndex:0,endIndex:0}}:void 0;const c=i().o8(s).reverse(),d=i().o8(l).reverse(),u=l.findIndex(((e,t)=>e!==s[t])),p=d.findIndex(((e,t)=>e!==c[t]));if(-1===u||-1===p)return;const m=n().PE(o),g={filter:{startIndex:u+(m.length>0?1:0),endIndex:u+l.length-s.length}};if(m.length>0){const e=g.filter.startIndex-m.length,t=g.filter.startIndex;l.slice(e,t).join("")===o&&(g.prefix={startIndex:e,endIndex:t})}return g}function s(e,t){if(!t)return;const o=e.getValue();return r().qAZ(o).slice(t.filter.startIndex,t.filter.endIndex).join("")}function l(e,t,o){return s(e,a(e,t,o?"@":""))}function c(e,t,o,n,a){if(void 0===e)return!0;if(t&&o&&n>3)return!0;if(1===e.length){const t=i().HV(e);if(t){if(/\s/g.test(t)){const e=a.getValue();if(e&&e.length>=1){const t=r().q4_(e);return!(2===t.length&&t.startsWith("/"))}}}}else if(e.length>=2){return e.endsWith("  ")}return!1}},334003:(e,t,o)=>{o.d(t,{F:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M12.408 4.792a.625.625 0 0 1 .884-.884l4.4 4.4a.625.625 0 0 1 0 .884l-4.4 4.4a.625.625 0 0 1-.884-.884l3.333-3.333H5.25a.875.875 0 0 0-.875.875v5a.625.625 0 1 1-1.25 0v-5c0-1.173.951-2.125 2.125-2.125h10.491z"})},r=(0,o(340498).wt)("arrowTurnUpRight",n)},334261:(e,t,o)=>{o.d(t,{VN:()=>m,ho:()=>p,LK:()=>v,OD:()=>f,D7:()=>g});o(581454);var n=()=>o(534177),r=()=>o(796249),i=()=>o(609044),a=()=>o(630116),s=()=>o(795179),l=()=>o(989423);var c=()=>o(901265),d=()=>o(896628),u=()=>o(317909);function p(e){const{originRect:t}=e;s().A.reset(),i().A.reset(),c().VN(),r().A.setState({isOpen:!0,rect:t})}function m(){r().A.setState({isOpen:!1})}function g(e){const{format:t,store:o,property:n,visibility:r,transaction:i}=e,a=t.property_visibility;a&&d().zA({stores:[o],update:{property_visibility:Object.values(a||{}).map((e=>({property:e.property,visibility:n===e.property?r:e.visibility})))},transaction:i})}function f(e){const{store:t,pageSection:o,visibility:r,environment:i,format:s}=e,c=s.page_section_visibility;c&&(!function(e,t){l().vd(e,"update_page_section_visibility",t)}(i,{section:o,visibility:r}),u().createAndCommit({userAction:"customizePageActions.updatePageSectionVisibility",environment:i,canUndo:!0,perform:e=>{d().zA({stores:t instanceof a().md||t instanceof a().Bv?[t]:(0,n().HB)(t),update:{page_section_visibility:{...c,[o]:r}},transaction:e})}}))}function v(e){const{store:t,transaction:o,pageSectionFormats:r}=e;d().zA({stores:t instanceof a().md||t instanceof a().Bv?[t]:(0,n().HB)(t),update:{collection_page_sections:r},transaction:o})}},335098:(e,t,o)=>{o.d(t,{q:()=>i,y:()=>r});var n=()=>o(979004);const r={ABAP:n().PrismLanguages.abap,Agda:n().PrismLanguages.agda,Arduino:n().PrismLanguages.arduino,"ASCII Art":"null",Assembly:n().PrismLanguages.nasm,Bash:n().PrismLanguages.bash,BASIC:n().PrismLanguages.basic,BNF:n().PrismLanguages.bnf,C:n().PrismLanguages.c,"C#":n().PrismLanguages.csharp,"C++":n().PrismLanguages.cpp,Clojure:n().PrismLanguages.clojure,CoffeeScript:n().PrismLanguages.coffeescript,Coq:n().PrismLanguages.coq,CSS:n().PrismLanguages.css,Dart:n().PrismLanguages.dart,Dhall:n().PrismLanguages.dhall,Diff:n().PrismLanguages.diff,Docker:n().PrismLanguages.docker,EBNF:n().PrismLanguages.ebnf,Elixir:n().PrismLanguages.elixir,Elm:n().PrismLanguages.elm,Erlang:n().PrismLanguages.erlang,"F#":n().PrismLanguages.fsharp,Flow:n().PrismLanguages.flow,Fortran:n().PrismLanguages.fortran,Gherkin:n().PrismLanguages.gherkin,GLSL:n().PrismLanguages.glsl,Go:n().PrismLanguages.go,GraphQL:n().PrismLanguages.graphql,Groovy:n().PrismLanguages.groovy,Haskell:n().PrismLanguages.haskell,HCL:n().PrismLanguages.hcl,HTML:n().PrismLanguages.html,Idris:n().PrismLanguages.idris,Java:n().PrismLanguages.java,JavaScript:n().PrismLanguages.jsx,JSON:n().PrismLanguages.json,Julia:n().PrismLanguages.julia,Kotlin:n().PrismLanguages.kotlin,LaTeX:n().PrismLanguages.latex,Less:n().PrismLanguages.less,Lisp:n().PrismLanguages.lisp,LiveScript:n().PrismLanguages.livescript,"LLVM IR":n().PrismLanguages.llvm,Lua:n().PrismLanguages.lua,Makefile:n().PrismLanguages.makefile,Markdown:n().PrismLanguages.markdown,Markup:n().PrismLanguages.markup,MATLAB:n().PrismLanguages.matlab,Mathematica:n().PrismLanguages.mathematica,Mermaid:n().PrismLanguages.mermaid,Nix:n().PrismLanguages.nix,"Notion Formula":n().PrismLanguages.notion,"Objective-C":n().PrismLanguages.objectivec,OCaml:n().PrismLanguages.ocaml,Pascal:n().PrismLanguages.pascal,Perl:n().PrismLanguages.perl,PHP:n().PrismLanguages.php,"Plain Text":"null",PowerShell:n().PrismLanguages.powershell,Prolog:n().PrismLanguages.prolog,Protobuf:n().PrismLanguages.protobuf,PureScript:n().PrismLanguages.purescript,Python:n().PrismLanguages.python,R:n().PrismLanguages.r,Racket:n().PrismLanguages.racket,Reason:n().PrismLanguages.reason,Ruby:n().PrismLanguages.ruby,Rust:n().PrismLanguages.rust,Sass:n().PrismLanguages.sass,Scala:n().PrismLanguages.scala,Scheme:n().PrismLanguages.scheme,Scss:n().PrismLanguages.scss,Shell:n().PrismLanguages.bash,Smalltalk:n().PrismLanguages.smalltalk,Solidity:n().PrismLanguages.solidity,SQL:n().PrismLanguages.sql,Swift:n().PrismLanguages.swift,TOML:n().PrismLanguages.toml,TypeScript:n().PrismLanguages.tsx,"VB.Net":n().PrismLanguages.vbnet,Verilog:n().PrismLanguages.verilog,VHDL:n().PrismLanguages.vhdl,"Visual Basic":n().PrismLanguages.visualBasic,WebAssembly:n().PrismLanguages.wasm,XML:n().PrismLanguages.xml,YAML:n().PrismLanguages.yaml,"Java/C/C++/C#":n().PrismLanguages.clike,[o(15440).jA.NotionScript]:n().PrismLanguages.javascript},i={[n().PrismLanguages.abap]:"ABAP",[n().PrismLanguages.agda]:"Agda",[n().PrismLanguages.arduino]:"Arduino",[n().PrismLanguages.bash]:"Shell",[n().PrismLanguages.basic]:"BASIC",[n().PrismLanguages.bnf]:"BNF",[n().PrismLanguages.c]:"C",[n().PrismLanguages.clojure]:"Clojure",[n().PrismLanguages.coffeescript]:"CoffeeScript",[n().PrismLanguages.coq]:"Coq",[n().PrismLanguages.cpp]:"C++",[n().PrismLanguages.csharp]:"C#",[n().PrismLanguages.css]:"CSS",[n().PrismLanguages.dart]:"Dart",[n().PrismLanguages.dhall]:"Dhall",[n().PrismLanguages.diff]:"Diff",[n().PrismLanguages.docker]:"Docker",[n().PrismLanguages.ebnf]:"EBNF",[n().PrismLanguages.elixir]:"Elixir",[n().PrismLanguages.elm]:"Elm",[n().PrismLanguages.erlang]:"Erlang",[n().PrismLanguages.flow]:"Flow",[n().PrismLanguages.fortran]:"Fortran",[n().PrismLanguages.fsharp]:"F#",[n().PrismLanguages.gherkin]:"Gherkin",[n().PrismLanguages.glsl]:"GLSL",[n().PrismLanguages.go]:"Go",[n().PrismLanguages.graphql]:"GraphQL",[n().PrismLanguages.groovy]:"Groovy",[n().PrismLanguages.haskell]:"Haskell",[n().PrismLanguages.hcl]:"HCL",[n().PrismLanguages.html]:"HTML",[n().PrismLanguages.idris]:"Idris",[n().PrismLanguages.java]:"Java",[n().PrismLanguages.javascript]:"JavaScript",[n().PrismLanguages.json]:"JSON",[n().PrismLanguages.jsx]:"JavaScript",[n().PrismLanguages.julia]:"Julia",[n().PrismLanguages.kotlin]:"Kotlin",[n().PrismLanguages.latex]:"LaTeX",[n().PrismLanguages.less]:"Less",[n().PrismLanguages.lisp]:"Lisp",[n().PrismLanguages.livescript]:"LiveScript",[n().PrismLanguages.llvm]:"LLVM IR",[n().PrismLanguages.lua]:"Lua",[n().PrismLanguages.makefile]:"Makefile",[n().PrismLanguages.markdown]:"Markdown",[n().PrismLanguages.markup]:"Markup",[n().PrismLanguages.matlab]:"MATLAB",[n().PrismLanguages.mathematica]:"Mathematica",[n().PrismLanguages.mermaid]:"Mermaid",[n().PrismLanguages.nasm]:"Assembly",[n().PrismLanguages.notion]:"Notion Formula",[n().PrismLanguages.nix]:"Nix",[n().PrismLanguages.objectivec]:"Objective-C",[n().PrismLanguages.ocaml]:"OCaml",[n().PrismLanguages.pascal]:"Pascal",[n().PrismLanguages.perl]:"Perl",[n().PrismLanguages.php]:"PHP",[n().PrismLanguages.powershell]:"PowerShell",[n().PrismLanguages.prolog]:"Prolog",[n().PrismLanguages.protobuf]:"Protobuf",[n().PrismLanguages.purescript]:"PureScript",[n().PrismLanguages.python]:"Python",[n().PrismLanguages.r]:"R",[n().PrismLanguages.racket]:"Racket",[n().PrismLanguages.reason]:"Reason",[n().PrismLanguages.ruby]:"Ruby",[n().PrismLanguages.rust]:"Rust",[n().PrismLanguages.sass]:"Sass",[n().PrismLanguages.scala]:"Scala",[n().PrismLanguages.scheme]:"Scheme",[n().PrismLanguages.scss]:"Scss",[n().PrismLanguages.smalltalk]:"Smalltalk",[n().PrismLanguages.solidity]:"Solidity",[n().PrismLanguages.sql]:"SQL",[n().PrismLanguages.swift]:"Swift",[n().PrismLanguages.toml]:"TOML",[n().PrismLanguages.tsx]:"TypeScript",[n().PrismLanguages.typescript]:"TypeScript",[n().PrismLanguages.vbnet]:"VB.Net",[n().PrismLanguages.verilog]:"Verilog",[n().PrismLanguages.vhdl]:"VHDL",[n().PrismLanguages.visualBasic]:"Visual Basic",[n().PrismLanguages.wasm]:"WebAssembly",[n().PrismLanguages.xml]:"XML",[n().PrismLanguages.yaml]:"YAML",[n().PrismLanguages.clike]:"Java/C/C++/C#"}},335722:(e,t,o)=>{o.d(t,{S:()=>n});const n=new(o(645873).O2)("tinymce-word-paste-filter",(async()=>(await o.e(96316).then(o.bind(o,818640))).default))},337090:(e,t,o)=>{o.d(t,{G:()=>u});var n=()=>o(343666),r=()=>o(722101),i=()=>o(246826),a=()=>o(606952),s=()=>o(594794),l=()=>o(299545),c=()=>o(855821),d=()=>o(301523);function u(e){const{discussionStore:t,files:o,text:u,environment:p,transaction:m}=e,g=(0,s().Z1)({environment:p,table:n().SN,spaceId:t.pointer.spaceId}),f=i().vt({environment:p,table:n().SN,args:{id:g,parent:t.pointer},inMemoryRecordCache:t.inMemoryRecordCache,transaction:m}),v=l().uB(t);r().BC({parentStore:v,appendStore:f,transaction:m});const h=l().gp(f);return a().KY({environment:p,store:h,value:u,transaction:m}),(0,c().t)({commentStore:f,files:o,environment:p,transaction:m}),(0,d().x)(f,m),f}},337240:(e,t,o)=>{o.d(t,{D$:()=>S,FI:()=>y,G0:()=>_,IA:()=>g,KP:()=>b,M8:()=>m,PU:()=>s,c3:()=>d,gJ:()=>f,i_:()=>c,jg:()=>v,lg:()=>h,qF:()=>u,qq:()=>p});var n=()=>o(554279),r=()=>o(763824),i=()=>o(680074),a=()=>o(351360);function s(e,t){n().u4({device:e.device,cookieService:e.cookieService,event:{google:{eventName:"registration"}},source:"client"}),(async()=>{const o=await async function(){var e;return await(0,r().nQ)(2500,(null===(e=a().default.state.currentUserSettingsStore)||void 0===e?void 0:e.waitUntil((()=>{var e;return void 0!==(null===(e=a().default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.domain_type)})))||Promise.resolve()),(0,i().FX)()}();!function(e,t){l(e,{event:"sign_up_flow_complete",data:t})}(e,{domainType:o,metaEventId:t})})()}function l(e,t){n().u4({device:e.device,cookieService:e.cookieService,event:{google:{eventName:"custom",data:t}},source:"client"})}function c(e){l(e,{event:"sign_up_flow_start"})}function d(e){l(e,{event:"login_success"})}function u(e,t){const{planType:o,subscriptionTier:n,domainType:r}=t;o&&"team"===o?l(e,{event:"create_space",data:{planType:o}}):n&&l(e,{event:"create_space",data:{subscriptionTier:n,domainType:r}})}function p(e,t){l(e,{event:"professional_workspace_created",data:t})}function m(e,t){l(e,{event:"team_workspace_created",data:t})}function g(e){l(e,{event:"onboarding_complete"})}function f(e,t){l(e,{event:"workspace_first_invite_sent",data:t})}function v(e){l(e,{event:"professional_workspace_first_invite_sent"})}function h(e,t){l(e,{event:"workspace_upgraded",data:t})}function _(e){l(e,{event:"professional_workspace_upgraded"})}function b(e){l(e,{event:"team_workspace_upgraded"})}function y(e){l(e,{event:"ai_addon_purchased"})}function S(e,t){l(e,{event:"trial_apply_attempt",data:t})}},337567:(e,t,o)=>{o.d(t,{A5:()=>f,Fm:()=>u,K1:()=>m,Lz:()=>p,Vk:()=>g,dL:()=>d,pQ:()=>c,x3:()=>l});o(898992),o(354520),o(581454),o(737550);var n=()=>o(861017),r=()=>o(496603),i=()=>o(534177),a=()=>o(295169),s=()=>o(525569);function l(){return r().oE([a().default.getActiveSession(),m()])}function c(e){return l().some((t=>t.groupedPendingOperations.state.some((t=>t.pageId===e))))}function d(e){const t=e.getNavigableBlockStore();return Boolean(t&&c(t.id))}function u(e){const t=e.getNavigableBlockStore();if(!t)return!1;const o=t.id;return l().some((e=>e.groupedPendingOperations.state.some((e=>"updatedPage"===e.type&&e.pageId===o&&e.didCreatePage))))}function p(e){const t=a().default.getActiveSession();if(!t)return[];const o=(0,n().hZ)(e.RouterStore.state.route);return t.groupedPendingOperations.state.filter((0,i().u0)((e=>"updatedPage"===e.type&&e.didCreatePage?{true:e}:{false:e}))).filter((e=>o.includes(e.pageId)))}function m(){const e=s().default.state;if("assistantCompletionPopup"===e.type)return a().default.getSessionContext(e.sessionId)}function g(){const e=a().default.getActiveSession();if(!e)return;return e.groupedPendingOperations.state.filter((e=>"updatedPage"===e.type&&e.didCreatePage)).map((e=>e.pageId))}function f(){return l().some((e=>e.getAllPendingNonCreateExecutableOperations().length>0))}},338907:(e,t,o)=>{o.d(t,{M6:()=>r,Te:()=>s,Tl:()=>c,u_:()=>u,wk:()=>l,y8:()=>i,zx:()=>a});var n=()=>o(508496);function r(){return s()?"M3_3":d()?"prod":"holdout"}function i(){return n().default.checkGate({gateName:"packaging_prompt_pills"})&&d()}function a(){return n().default.checkGate({gateName:"workflow_templates_modal_in_new_page_pills"})&&d()}function s(){return n().default.checkGate({gateName:"packaging_m3.3"})&&n().default.checkGate({gateName:"workflow_templates_settings_dev"})&&n().default.checkGate({gateName:"packaging_m3.1"})&&d()}function l(){return n().default.checkGate({gateName:"workflow_templates_settings_dev"})&&n().default.checkGate({gateName:"packaging_m3.1"})&&d()}function c(){return n().default.checkGate({gateName:"packaging_m3.1"})&&d()}function d(){return"treatment"===n().default.getEligibleGroup({experimentId:"packaging_m3_holdout"})}function u(e){return!e.device.isPhone}},339034:(e,t,o)=>{o.d(t,{formsEditorDependency:()=>n});const n=new(o(645873).O2)("collectionFormsEditor",(()=>Promise.all([o.e(78846),o.e(86227)]).then(o.bind(o,536308))))},342461:(e,t,o)=>{o.r(t),o.d(t,{showAsyncModal:()=>a,showAsyncModalComponent:()=>s,testOnly:()=>f});o(898992),o(354520),o(672577),o(581454);var n=o(296540),r=()=>o(206267),i=()=>o(584931);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i().w;return new Promise(((o,n)=>{try{l({asyncModal:p({renderModal:e,promiseResolve:o,promiseReject:n,store:t}),store:t})}catch(r){n(r)}}))}function s(e){return a((t=>n.createElement(e,t)),arguments.length>1&&void 0!==arguments[1]?arguments[1]:i().w)}function l(e){const{asyncModal:t,store:o=i().w}=e;o.update((e=>({asyncModals:[...e.asyncModals,t]})))}function c(e){const{id:t,promiseResolve:o,store:n=i().w}=e;return e=>{const r=m({id:t,store:n});null!=r&&r.isOpen&&(g({id:t,store:n,update:{isOpen:!1}}),o(e))}}function d(e){const{id:t,promiseResolve:o,store:n=i().w}=e;return()=>{const e=m({id:t,store:n});null!=e&&e.isOpen&&(g({id:t,store:n,update:{isOpen:!1}}),o())}}function u(e){const{id:t,store:o=i().w}=e;return()=>{o.update((e=>({asyncModals:e.asyncModals.filter((e=>e.id!==t))})))}}function p(e){const{renderModal:t,promiseResolve:o,promiseReject:n,store:a=i().w}=e,s=r().JW(),l=u({id:s,store:a}),p=d({id:s,promiseResolve:o,store:a}),m=c({id:s,promiseResolve:o,store:a});return{id:s,internalRenderModal:e=>{try{return t({isOpen:e,onClosed:l,onDismiss:p,resolve:m})}catch(o){throw n(o),o}},isOpen:!0}}function m(e){const{id:t,store:o=i().w}=e;return o.state.asyncModals.find((e=>e.id===t))}function g(e){const{id:t,update:o,store:n=i().w}=e;n.update((e=>({asyncModals:e.asyncModals.map((e=>e.id!==t?e:{...e,...o}))})))}const f={addAsyncModal:l,createAsyncModal:p,createOnClosed:u,createOnDismiss:d,createResolve:c,getAsyncModal:m,updateAsyncModal:g}},344051:(e,t,o)=>{o.d(t,{B:()=>Ca});var n=()=>o(604917),r=()=>o(645873);const i={TranscriptionBlock:new(r().O2)("TranscriptionBlock",(async()=>({TranscriptionBlock:(await Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(2681),o.e(90372),o.e(22464)]).then(o.bind(o,268100))).TranscriptionBlock})))},a=(0,r().jQ)(i.TranscriptionBlock,(e=>e.TranscriptionBlock));var s=()=>o(849839),l=()=>o(563615),c=o(296540),d=()=>o(56366),u=()=>o(340498),p=o(474848);const m=(0,u().wt)("abstract",{viewBox:"0 0 32 32",svg:(0,p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 16C0 3.199 3.199 0 16 0s16 3.199 16 16-3.199 16-16 16S0 28.801 0 16zm9.976 7.71a6.128 6.128 0 003.398 1.043 6.14 6.14 0 006.146-6.127 6.126 6.126 0 10-9.544 5.085zm11.521.79h3.004v-17H7.499v2.997h13.998V24.5zm-5-5.874a3.123 3.123 0 11-6.246 0 3.123 3.123 0 016.246 0z"})});var g=()=>o(959013),f=()=>o(821062),v=()=>o(891078),h=()=>o(891279),_=()=>o(24611);const b=(0,g().YK)({embedButtonText:{defaultMessage:"Embed Abstract",id:"abstractBlock.embeds.button.label"}});function y(e,t){const o=(0,g().tz)(),n=(0,c.useRef)(null),r=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"abstract",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:r,ref:n,store:e.store,iconSvg:m,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with Abstract links with public access enabled",id:"abstractBlock.embeds.caption"}),embedButtonText:o.formatMessage(b.embedButtonText),urlInputPlaceholder:"https://abstract.com/…",children:(0,p.jsx)(g().sA,{defaultMessage:"Embed Abstract",id:"abstractBlock.placeholder"})}))}const S=c.memo(c.forwardRef(y),f().A);var w=()=>o(662303),k=()=>o(484714),I=()=>o(401497),A=()=>o(668725),x=()=>o(654601),C=()=>o(100622),T=()=>o(284371),M=()=>o(937075),P=()=>o(38337),B=()=>o(864145),R=()=>o(972435),E=()=>o(907514),D=()=>o(463830),N=()=>o(525569),L=()=>o(861841),F=()=>o(353643),U=()=>o(732770),O=()=>o(93658),V=()=>o(170722),j=()=>o(155004),z=()=>o(145214),q=()=>o(704152),H=()=>o(364280),W=()=>o(864943),K=()=>o(99945),G=()=>o(936916);const $={AiBlockV2:new(r().O2)("AiBlockV2",(()=>Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(77282)]).then(o.bind(o,423098))))},Y=(0,r()._h)($.AiBlockV2,(e=>e.AiBlockV2)),Q=c.forwardRef((function(e,t){const{store:n,disabled:r,disableHoverMenu:i,ai:{completionActions:a,completionInitialPromptActions:s},assistant:{AssistantFeatureGateStore:l}}=e,u=(0,k().v3)(),[m,g]=(0,c.useState)(!1),[f,v]=(0,c.useState)(!1),[h,_]=(0,c.useState)(!1),b=(0,d().uB)(void 0,D().A),y=(0,c.useRef)(null),S=(0,o(402838).s)(y),w=!S||S.width<400,I=(0,d().K8)((()=>!n.hasContent()),[n]),A=(0,d().K8)((()=>I?B().l.Hovered:(0,B().B)(n,m)),[I,m,n]),x=(0,d().K8)((()=>A!==B().l.Default||f||h||b.state.open),[h,f,A,b]),C=(0,c.useCallback)((e=>{const{prompt:t,clientPrompt:o}=e;s.showInitialPromptForAIBlock({environment:u,store:n,originRef:y,prompt:t,clientPrompt:o})}),[s,u,n]),T=(0,d().K8)((()=>l.isAiBlockConfigurationMenuEnabledForUser()),[l]);return(0,p.jsx)(X,{store:n,setIsHovering:g,showingOverlay:x,forwardedRef:t,containerRef:y,isV2Enabled:T,children:T?(0,p.jsx)(Y,{store:n,hoveredOrSelectionState:A,setHaloShouldBeVisible:v,triggerCompletionForAiBlock:a.triggerCompletionForAiBlock,showInitialPromptForAiBlock:C,showingOverlay:x,isCompact:w,disabled:r,configurationPopupStore:b,disableHoverMenu:i}):(0,p.jsx)(Z,{store:n,hoveredOrSelectionState:A,setHaloShouldBeVisible:v,triggerCompletionForAiBlock:a.triggerCompletionForAiBlock,showInitialPromptForAiBlock:C,showingOverlay:x,isCompact:w,disabled:r,setActionBarShouldBeVisible:_,disableHoverMenu:i})})}));function Z(e){const t=(0,k().Y0)(),{store:n,hoveredOrSelectionState:r,setHaloShouldBeVisible:i,showInitialPromptForAiBlock:a,showingOverlay:s,isCompact:l,disabled:u,triggerCompletionForAiBlock:m,setActionBarShouldBeVisible:f,disableHoverMenu:h}=e,_=(0,k().v3)(),{titleStore:b}=(0,d().K8)((()=>{const e=n.getBlockTitleStore();return{titleStore:e,titleValue:e.getValue()}}),[n]),{prompt:y,additionalContext:S}=(0,G().SJ)({store:n}),w=(0,c.useCallback)((()=>"helpMeWrite"===y.key?S||R().A.formatMessage(G().yc.helpMeWrite):R().A.formatMessage(G().yc[y.key])),[S,y.key]),[A,C]=(0,c.useState)(!1),T=(0,c.useCallback)((()=>{a({prompt:S,clientPrompt:y})}),[a,S,y]),P=(0,c.useCallback)((()=>{M().DZ(_,{type:"generate",prompt_key:y.key}),C(!0),m({environment:_,store:n,prompt:y,additionalContext:S?{prompt:S}:void 0}).then((()=>{C(!1)}))}),[_,y,m,n,S]),E=(0,G().FF)({store:n,isGenerating:A}),D=(0,I().IS)((e=>({icon:{fill:e.accentColors.purple[300],width:21,height:21,position:"relative",top:5},generateButtonStyles:{fontWeight:500,color:e.accentColors.purple[500],opacity:E?.5:1,cursor:E?"not-allowed":"pointer"}})),[E]),L=(0,d().K8)((()=>!n.hasContent()),[n]),F=(0,v().bx)(n,u),U=(0,d().K8)((()=>"completionPopup"===N().default.state.type&&"results"===N().default.state.stage&&N().default.state.loading),[]),O=(0,d().K8)((()=>n.getContentStore()),[n]);var V;return L?(0,p.jsxs)(j().s,{allowSelectionWithin:!0,children:[(0,p.jsxs)(H().fI,{justifyContent:"space-between",padding:8,gap:8,wrap:l?"wrap":"initial",children:[(0,p.jsxs)(H().fI,{gap:12,alignItems:"baseline",grow:1,children:[(null===(V=y.svg)||void 0===V?void 0:V.call(y,D.icon))??(0,x().X)(D.icon),"helpMeWrite"===y.key?(0,p.jsx)(o(246722).A,{onFocus:T,disabled:!F,store:b,placeholder:R().A.formatMessage(G().yc.helpMeWrite),pasteBehavior:"block",style:{flexGrow:1,flexBasis:0},onEnter:P,inPageFind:o(792540).Os.block_match}):w()]}),(0,p.jsx)(W().A,{size:"lg",disabled:E,onClick:P,style:D.generateButtonStyles,children:A?(0,p.jsx)(g().sA,{id:"aiBlock.generate.loading.label",defaultMessage:"Generating…"}):(0,p.jsx)(g().sA,{id:"aiBlock.generate.label",defaultMessage:"Generate"})})]}),(0,p.jsx)(G().gM,{hoveredOrSelectionState:r,setHaloShouldBeVisible:i})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(K().A,{disabled:u,store:O,disableHoverMenu:h||r!==B().l.SelectedDescendant,disableDrag:t.isMobile}),s&&(0,p.jsx)(G().gM,{hoveredOrSelectionState:r,setHaloShouldBeVisible:i}),!U&&s&&(0,p.jsx)(J,{hoveredOrSelectionState:r,store:n,handleGenerateClick:P,isGenerating:A,setActionBarShouldBeVisible:f,showInitialPromptForAiBlock:a})]})}function X(e){const{children:t,forwardedRef:o,store:n,showingOverlay:r,setIsHovering:i,containerRef:a,isV2Enabled:s}=e,l=(0,c.useCallback)((()=>{F().A.state.isDragging||O().default.state.isActive||i(!0)}),[i]),u=(0,c.useCallback)((()=>{F().A.state.isDragging||O().default.state.isActive||i(!1)}),[i]),m=(0,d().K8)((()=>s&&!n.hasContent()),[s,n]),g=(0,p.jsx)("div",{className:P()._sW,style:{display:"flex"},ref:a,children:(0,p.jsx)("div",{style:{position:r?"relative":void 0,paddingTop:3,paddingBottom:3,width:"100%",...!m&&{marginTop:4,marginBottom:4}},onMouseLeave:u,onMouseEnter:l,children:t})});return(0,v().NW)(n,o,(0,c.useMemo)((()=>({renderedType:"ai_block",getBlockStore:()=>n,getNode:()=>null==a?void 0:a.current})),[a,n]),g)}function J(e){const{hoveredOrSelectionState:t,store:o,showInitialPromptForAiBlock:n,isGenerating:r,handleGenerateClick:i,setActionBarShouldBeVisible:a}=e,s=(0,d().K8)((()=>!(t!==B().l.Selected&&t!==B().l.SelectedDescendant||V().A.state.isActive||L().Ay.state.isDragging||O().default.state.isActive||U().A.state.isKeyboardMode)),[t]),{prompt:l,additionalContext:u}=(0,G().SJ)({store:o}),m=(0,k().v3)(),f=(0,c.useCallback)((()=>{M().DZ(m,{type:"edit_prompt"}),n({prompt:u,clientPrompt:l})}),[n,m,l,u]),v=(0,d().K8)((()=>o.getFormat().ai_last_edited),[o]),h=(0,G().FF)({store:o,isGenerating:r}),_=(0,I().IS)((e=>({actionBar:{position:"absolute",zIndex:85,top:-40,right:-2,borderRadius:6,height:32,fontSize:14,lineHeight:1.2,display:"flex",whiteSpace:"nowrap",fontFamily:T().vc(w().locale).sans,background:e.popoverBackground,boxShadow:e.shadowMD},actionButton:{display:"flex",alignItems:"center",padding:"0 8px",borderRight:`1px solid ${C().Ay.whiteWithAlpha(.2)}`,boxShadow:`1px 0 0 ${e.regularDividerColor}`,marginRight:1},actionBarSparklesIcon:{width:16,height:16,fill:e.accentColors.purple[400]},generatedByAiHeader:{color:e.accentColors.purple[500],fontWeight:500},lastEditedTime:{color:e.accentColors.purple[300]},chevronDownIcon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);return(0,p.jsx)(z().A,{visible:s,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{a(!0)},onAnimationEnd:()=>{s||a(!1)},style:_.actionBar,children:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(q().A,{style:{..._.actionButton,display:"flex",gap:4},onClick:f,disabled:h,children:[(0,x().X)(_.actionBarSparklesIcon),(0,p.jsx)("span",{style:_.generatedByAiHeader,children:(0,p.jsx)(g().sA,{id:"aiBlock.generated",defaultMessage:"Generated by AI"})}),v?(0,p.jsx)("span",{style:_.lastEditedTime,children:(0,E().nl)(v,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0})}):null,h?null:(0,A().b)(_.chevronDownIcon)]}),(0,p.jsx)(q().A,{onClick:i,disabled:h,style:{..._.actionButton,opacity:h?.5:1,cursor:h?"not-allowed":"pointer"},children:r?(0,p.jsx)(g().sA,{id:"aiBlockBlock.update.loading",defaultMessage:"Updating…"}):(0,p.jsx)(g().sA,{id:"aiBlockBlock.update",defaultMessage:"Update"})})]})})}const ee=c.memo(c.forwardRef((function(e,t){const{value:n}=(0,r().fJ)(o(662453).aiDependency),{value:i}=(0,r().fJ)(o(650829).assistantDependency);return(0,p.jsx)(o(11048).A,{name:"LazyAiBlock",children:n&&i&&(0,p.jsx)(Q,{...e,ai:n,assistant:i,ref:t})})})),f().A);var te=()=>o(441265);const oe=(0,g().YK)({embedButtonText:{defaultMessage:"Embed audio",id:"audioBlock.embedAudio.button.label"}});function ne(e,t){const n=(0,g().tz)(),r=(0,c.useRef)(null),i=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"audio",getNode:()=>{const e=r.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:i,ref:r,store:e.store,iconSvg:o(607624).i,mediaMenuCurrentTab:"file",mediaMenuTabs:[{type:"file",fileUpload:!0},{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with .MP3s, .WAVs, and .OGGs",id:"audioBlock.embed.caption"}),embedButtonText:n.formatMessage(oe.embedButtonText),urlInputPlaceholder:"https://…",children:(0,p.jsx)(g().sA,{defaultMessage:"Add an audio file",id:"audioBlock.placeholder"})}))}const re=c.memo(c.forwardRef(ne),f().A);var ie=()=>o(919709),ae=()=>o(939768),se=()=>o(720665),le=()=>o(559926),ce=()=>o(383594),de=()=>o(778417),ue=()=>o(725614),pe=()=>o(47373),me=()=>o(115512),ge=()=>o(496889),fe=()=>o(460282),ve=()=>o(739283),he=()=>o(854672),_e=()=>o(816559),be=()=>o(296798),ye=()=>o(331542),Se=()=>o(554509),we=()=>o(360083),ke=()=>o(125565),Ie=()=>o(468993),Ae=()=>o(21140);const xe={width:16,height:16,minWidth:16,marginRight:6},Ce={flexGrow:4,flexShrink:1,flexBasis:180,padding:14,paddingTop:12,overflow:"hidden",textAlign:"left"},Te=2*se().Xb,Me=(0,g().YK)({linkPlaceholder:{defaultMessage:"Paste in https://…",id:"bookmarkBlock.editBookmark.linkPlaceholder"},bookmarkTitle:{defaultMessage:"Bookmark",id:"bookmarkBlock.bookmark.title"},errorMessage:{defaultMessage:"Please enter a valid link",id:"bookmarkBlock.invalidLinkError.message"}});function Pe(e,t){const{store:n}=e,r=(0,c.useRef)(null),i=(0,k().v3)(),a=(0,k().Y0)(),s=(0,v().bx)(e.store,e.disabled),l=(0,d().K8)((()=>n.getProperties()),[n]),[u,m]=(0,c.useState)(!1),f=a.isMobile||u,h=(0,d().K8)((()=>(0,pe().CH)()),[]),_=(0,c.useCallback)((()=>{const e=n.getPropertyStore("caption");de().hc({environment:i,store:n}),ue().setSelectionAtEnd({store:e})}),[i,n]),b=(0,c.useCallback)((e=>(le().oF(i,{pastedText:e,source:"bookmark_block_menu"}),o(443120).Ht({environment:i,store:n,url:e}))),[i,n]),y=(0,c.useCallback)((()=>{const e=ie().q4_((null==l?void 0:l.link)??[]);e&&o(755636).f({environment:i,url:e})}),[i,l]),S=(0,c.useCallback)((e=>b(e)),[b]),w=(0,c.useCallback)((()=>{const e=r.current;if(s){if(!(e&&e instanceof Element))return;const t=e.getBoundingClientRect();ce().W(i,{originRect:t,originGap:0,isSmallWidth:!0,showArrow:!0,title:R().A.formatMessage(Me.bookmarkTitle),currentTab:"embed",tabs:[{type:"embed",caption:(0,p.jsx)(g().sA,{defaultMessage:"Create a visual bookmark from a link.",id:"bookmarkBlock.visualBookmark.prompt"}),buttonText:(0,p.jsx)(g().sA,{defaultMessage:"Create bookmark",id:"bookmarkBlock.visualBookmark.create"}),inputPlaceholder:R().A.formatMessage(Me.linkPlaceholder),onChange:e=>{const t=o(332737).l(e);o(997769).t(t,"url")?(ce().I(),S(t)):o(901389).f1(R().A.formatMessage(Me.errorMessage))}}]})}}),[s,i,S]),I=null!=l&&l.link?h?(0,p.jsx)(Ne,{ref:r,store:n,canEdit:s,showActionButton:f,setHover:m,hideContent:e.hideContent,disableCommentMenu:e.disableCommentMenu,disabled:e.disabled}):(0,p.jsx)(De,{ref:r,store:n,canEdit:s,showActionButton:f,setHover:m,hideContent:e.hideContent,disableCommentMenu:e.disableCommentMenu,disabled:e.disabled}):(0,p.jsx)(Ee,{ref:r,store:e.store,hideContent:e.hideContent,disableCommentMenu:e.disableCommentMenu,canEdit:s,disabled:e.disabled,showActionButton:f,onClick:w,setHover:m});return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"bookmark",getBlockStore:()=>n,getNode:()=>r.current,handleCreated:w,edit:w,caption:_,embed:b,activate:y})),[y,_,b,w,n]),I)}const Be=c.memo(c.forwardRef(Pe),f().A);function Re(e){let{imageURL:t,store:o}=e;const n={display:"block",width:"100%",height:"100%",objectFit:"cover"};return(0,p.jsx)("div",{style:{flexGrow:1,flexShrink:1,flexBasis:180,display:"block",position:"relative"},children:(0,p.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0},children:(0,p.jsx)(we().A,{url:t,isAuthenticated:!0,permissionRecord:o.pointer,width:250,render:(e,t)=>t&&(0,p.jsx)(_e().Ay,{style:n,src:t})})})})}const Ee=c.forwardRef((function(e,t){const{store:n,hideContent:r,disableCommentMenu:i,canEdit:a,disabled:s,showActionButton:l,onClick:c,setHover:d}=e;return(0,p.jsxs)(j().s,{ref:t,allowSelectionWithin:!1,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),style:{display:"flex"},children:[(0,p.jsx)(Ie().A,{iconSvg:o(119875).R,disabled:s,shouldHideRight:!l,right:a&&(0,p.jsx)(ge().A,{store:e.store,fadeIn:!1}),onClick:c,isLoading:!1,progressPercent:0,children:(0,p.jsx)(g().sA,{defaultMessage:"Add a web bookmark",id:"bookmarkBlock.addWebBookmark.placeholder"})}),(0,p.jsx)(ve().A,{disableCommentMenu:i,hideContent:r,store:n})]})})),De=c.forwardRef((function(e,t){const{store:n,setHover:r,showActionButton:i,canEdit:a}=e,s=(0,k().v3)(),l=(0,c.useId)(),u=(0,v().pW)(n),m=(0,d().K8)((()=>n.getProperties()),[n]),f=(0,d().K8)((()=>n.getFormat()),[n]),h=ie().k4p(null==m?void 0:m.description),b=f.bookmark_cover,y=f.bookmark_icon,S=f.bookmark_loading_ttl,w=S?S-Date.now()-Te:0,[A,x]=(0,c.useState)(w>0),T=(0,c.useCallback)((()=>r(!0)),[r]),M=(0,c.useCallback)((()=>r(!1)),[r]);(0,c.useEffect)((()=>{let e;return w>0&&(e=setTimeout((()=>{x(!1)}),w+1e3)),()=>clearTimeout(e)}),[A,w]);const P=(0,I().IS)((e=>({content:{display:"flex",flexWrap:"wrap-reverse",alignItems:"stretch",textAlign:"left",overflow:"hidden",border:`1px solid ${e.darkDividerColor}`,borderRadius:4,position:"relative",...u},loadingLabel:{minHeight:24,marginBottom:2,display:"inline-flex",alignItems:"center",color:e.mediumTextColor},link:{color:e.regularTextColor},menuButton:{position:"absolute",top:4,right:4,background:(0,_().FF)(s)}})),[u,s]),B=ie().k4p(null==m?void 0:m.link);let R=ie().k4p(null==m?void 0:m.title);if(B===R||!R){const e=ae().qg(B);e.hostname&&(R=e.hostname)}return(0,p.jsxs)(j().s,{role:"figure",ref:t,"aria-labelledby":l,allowSelectionWithin:!0,children:[(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsx)(o(657202).A,{permissionRecord:n.pointer,url:B,render:(t,o)=>(0,p.jsxs)(be().A,{href:o,external:!0,style:{flexGrow:1,minWidth:0},innerStyle:P.content,onMouseMove:T,onMouseLeave:M,children:[(0,p.jsxs)("div",{style:Ce,children:[A?(0,p.jsxs)(ke().A,{style:P.loadingLabel,children:[(0,p.jsx)(ye().A,{style:{marginRight:8}})," ",(0,p.jsx)(g().sA,{defaultMessage:"Fetching preview",id:"bookmarkBlock.loadWhileFetching.message"})]}):(0,p.jsx)(ke().A,{style:{minHeight:24,marginBottom:2},children:R}),h&&(0,p.jsx)(ke().A,{isSmall:!0,isMultiline:!0,style:{height:32,overflow:"hidden"},children:h}),(0,p.jsxs)("div",{style:{display:"flex",marginTop:6},children:[y&&y.length>0&&(0,p.jsx)(we().A,{url:y,isAuthenticated:!0,permissionRecord:e.store.pointer,render:(e,t)=>t&&(0,p.jsx)("img",{src:t,style:xe})}),(0,p.jsx)(ke().A,{style:P.link,isSmall:!0,children:B})]})]}),b&&(0,p.jsx)(Re,{store:e.store,imageURL:b}),i&&a&&(0,p.jsx)(ge().A,{store:e.store,style:P.menuButton,iconStyle:{fill:C().Ay.white},fadeIn:!0})]})}),(0,p.jsx)(ve().A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}),(0,p.jsx)(fe().c,{store:e.store,captionAriaId:l,disabled:e.disabled})]})})),Ne=c.forwardRef((function(e,t){const{store:o,setHover:n,showActionButton:r,canEdit:i}=e,a=(0,c.useId)(),s=(0,k().Y0)(),l=(0,v().pW)(o),u=(0,d().K8)((()=>o.getProperties()),[o]),{imageURL:m,faviconURL:g,loadingTtl:f}=(0,d().K8)((()=>{const e=o.getFormat();return{imageURL:e.bookmark_cover,faviconURL:e.bookmark_icon,loadingTtl:e.bookmark_loading_ttl}}),[o]),h=ie().k4p(null==u?void 0:u.description),_=f?f-Date.now()-Te:0,[b,y]=(0,c.useState)(_>0),S=(0,c.useCallback)((()=>n(!0)),[n]),w=(0,c.useCallback)((()=>n(!1)),[n]);(0,c.useEffect)((()=>{let e;return _>0&&(e=setTimeout((()=>{y(!1)}),_+1e3)),()=>clearTimeout(e)}),[b,_]);const A=(0,I().IS)((e=>({content:{display:"flex",flexWrap:"wrap-reverse",alignItems:"stretch",textAlign:"left",overflow:"hidden",border:`1px solid ${e.darkDividerColor}`,borderRadius:4,position:"relative",...l},loadingLabel:{minHeight:24,marginBottom:2,display:"inline-flex",alignItems:"center",color:e.mediumTextColor},link:{color:e.regularTextColor},menuButton:{position:"absolute",top:4,right:4,border:"1px solid var(--Stroke-Deemphasized, rgba(227, 226, 224, 0.50))",background:"dark"===e.mode?e.accentColors.gray[100]:e.buttonBackground,zIndex:1,cursor:"pointer",transition:"box-shadow 0.1s ease, background 0.1s ease",borderRadius:6},mainContainer:{display:"flex",flexDirection:s.isMobile?"column":"row",flexWrap:"wrap",flexGrow:1,alignItems:"stretch",borderRadius:4,border:`1px solid ${e.tableDividerColor}`,position:"relative",...l},imageContainer:{height:154,position:"relative",flexGrow:1,flexShrink:1,flexBasis:100,overflow:"hidden",display:"block",width:"-webkit-fill-available"},contentContainer:{display:"flex",width:"--webkit-fill-available",padding:"18px 24px 14px 24px",gap:8,flexDirection:"column",flex:"1 0 0",justifyContent:"space-between",alignItems:"flex-start",alignSelf:"stretch",flexGrow:4,flexShrink:1,flexBasis:s.isMobile?145:180,overflow:"hidden",textAlign:"left"}})),[l,s]),x=ie().k4p(null==u?void 0:u.link);let T=ie().k4p(null==u?void 0:u.title);if(x===T||!T){const e=ae().qg(x);e.hostname&&(T=e.hostname)}return(0,p.jsxs)(j().s,{role:"figure",ref:t,"aria-labelledby":a,allowSelectionWithin:!0,children:[(0,p.jsxs)(be().A,{href:x,external:!0,style:A.mainContainer,onMouseMove:S,onMouseLeave:w,children:[m&&(0,p.jsx)("div",{style:A.imageContainer,children:(0,p.jsx)("div",{style:{position:"absolute",inset:0},children:(0,p.jsx)(_e().Ay,{src:m,style:{width:"100%",height:"100%",borderTopLeftRadius:3,borderBottomLeftRadius:3,position:"relative",objectFit:"cover"}})})}),(0,p.jsxs)(Ae().wt,{style:A.contentContainer,children:[(0,p.jsxs)(Ae().wt,{style:{alignSelf:"stretch",gap:3},children:[g&&g.length>0&&(0,p.jsx)(he().A,{type:"image_url",imageURL:g,size:24,style:{margin:1}}),(0,p.jsx)(Se().D,{styleName:"UIHeading-17px/Medium",colorName:"primary",customStyles:{...(0,me().pA)(1),textOverflow:"ellipsis"},children:T}),h&&(0,p.jsx)(Se().D,{styleName:"UIMedium-13px/Regular",colorName:"primary",customStyles:{...(0,me().pA)(2),textOverflow:"ellipsis"},children:h})]}),(0,p.jsx)(Ae().wt,{style:{alignSelf:"stretch"},children:(0,p.jsx)(Se().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",customStyles:{...(0,me().pA)(1)},children:x})})]}),r&&i&&(0,p.jsx)(ge().A,{store:e.store,style:A.menuButton,iconStyle:{fill:C().Ay.uiGray},fadeIn:!0})]}),(0,p.jsx)(fe().c,{store:e.store,captionAriaId:a,disabled:e.disabled})]})}));var Le=()=>o(799954);function Fe(e,t){const n=(0,c.useRef)(null),r=(0,k().Y0)(),i=(0,v().bx)(e.store,e.disabled),a=(0,d().K8)((()=>e.store.getNavigableBlockStore()),[e.store]),s=a?(0,p.jsxs)(j().s,{allowSelectionWithin:!0,style:{display:"flex",paddingTop:Le().nE.paddingTop,paddingBottom:Le().nE.paddingBottom},ref:n,children:[(0,p.jsx)(o(205127).oK,{showCurrentPageControls:!1,ancestorMaxWidth:200,currentPageMaxWidth:300,store:a,maxAncestorCount:3,isMobile:r.isMobile,style:{flexGrow:1,minWidth:0,fontSize:"inherit"}}),r.isMobile&&i&&(0,p.jsx)(ge().A,{store:e.store,fadeIn:!0,style:{marginTop:2,marginRight:4}}),(0,p.jsx)(ve().A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}):null;return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"breadcrumb",getNode:()=>n.current,getBlockStore:()=>e.store})),[e.store]),s)}const Ue=c.memo(c.forwardRef(Fe),f().A);var Oe=()=>o(870571),Ve=()=>o(19794),je=()=>o(596514),ze=()=>o(161479),qe=()=>o(846662),He=()=>o(459882),We=()=>o(158218),Ke=()=>o(925907),Ge=()=>o(884107),$e=()=>o(675925),Ye=()=>o(493823);function Qe(e){let{disabled:t,store:o,onEditCaption:n}=e;const r=(0,k().v3)(),i=(0,k().Y0)(),a=(0,I().DP)(),s=(0,v().bx)(o,t),l=(0,c.useCallback)((()=>{(0,$e().o)(r,{action:"copy_text",block_type:"code",from:"code_block_actions"},(async e=>{const t=ie().k4p(o.getBlockTitleStore().getValue()),n=await Ge().R.clipboardActions.load();n.copyString({environment:r,stringValue:t,copiedMessage:n.clipboardMessages.copiedCodeToClipboard}).then(e)}))}),[r,o]),d=(0,c.useCallback)((()=>{(0,$e().o)(r,{action:"init_edit_caption",block_type:"code",from:"code_block_actions"},(e=>{n(),e()}))}),[r,n]),u={height:25,background:a.codeBlockButtonBackground,color:a.regularTextColor,fontWeight:T().Wy.regular,padding:"4px 6px",fontSize:11.5};return(0,p.jsxs)("div",{style:{color:a.mediumTextColor,display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,marginTop:4,marginRight:4},children:[!i.isMobile&&(0,p.jsxs)(Ye().p,{isGray:!0,size:"xs",onClick:l,style:{...u,borderTopRightRadius:0,borderBottomRightRadius:0},children:[(0,Ke().n)({height:16,width:16,paddingRight:4}),(0,p.jsx)(g().sA,{defaultMessage:"Copy",id:"codeBlock.copyToClipboard.button"})]}),!i.isMobile&&s&&(0,p.jsx)(Ye().p,{isGray:!0,size:"xs",onClick:d,style:{...u,marginLeft:1,marginRight:1,borderRadius:0},children:(0,p.jsx)(g().sA,{defaultMessage:"Caption",id:"codeBlock.caption.button"})}),s&&(0,p.jsx)(ge().A,{style:{height:25,background:a.codeBlockButtonBackground,borderTopLeftRadius:i.isMobile?3:0,borderBottomLeftRadius:i.isMobile?3:0,paddingLeft:8,paddingRight:8},store:o,fadeIn:!1})]})}var Ze=()=>o(534177);const Xe=(0,u().wt)("codePreviewOnly",{viewBox:"0 0 24 20",svg:(0,p.jsx)("path",{d:"M2.608 11.906h1.21v1.032c0 1.463.766 2.215 2.243 2.215h9.33c1.477 0 2.243-.758 2.243-2.215V6.444c0-1.463-.766-2.221-2.242-2.221H14.12V3.197c0-1.463-.772-2.221-2.242-2.221h-9.27C1.132.976.366 1.734.366 3.197v6.494c0 1.457.766 2.215 2.242 2.215zm.082-1.34c-.635 0-.984-.328-.984-.99v-6.27c0-.662.349-.99.984-.99h9.106c.629 0 .984.328.984.99v.917H6.06c-1.476 0-2.242.758-2.242 2.221v4.122H2.69zm3.453 3.254c-.636 0-.985-.335-.985-.998V6.561c0-.664.349-.998.985-.998h9.167c.628 0 .984.334.984.998v6.261c0 .663-.356.998-.984.998H6.143zm2.713-1.77c0 .307.335.437.595.287l3.972-2.324a.372.372 0 00-.007-.643L9.451 7.046c-.26-.15-.595-.027-.595.287v4.717z"})}),Je=(0,u().wt)("splitView",{viewBox:"0 0 24 20",svg:(0,p.jsx)("path",{d:"M13.456 11.143V2.864c0-1.476-.766-2.242-2.222-2.242H2.915C1.452.622.693 1.388.693 2.864v8.278c0 1.477.76 2.243 2.222 2.243h8.32c1.462 0 2.221-.766 2.221-2.242zm-1.34-.083c0 .636-.335.985-.998.985H3.024c-.663 0-.99-.349-.99-.985V7.663h10.082v3.397zM2.033 2.946c0-.629.328-.984.991-.984h8.094c.663 0 .998.355.998.984v3.405H2.033V2.946z"})});var et=()=>o(899038),tt=()=>o(89924),ot=()=>o(416726);const nt=(0,g().YK)({showCodePreviewSection:{id:"action.codePreviewSection.name",defaultMessage:"Show in block"}}),rt=(0,ot().Ls)({key:"show code",displayName:ot().AY.showOnlyCodeFormat,analyticsName:ot().AY.showOnlyCodeFormat.defaultMessage,svg:o(628149).Z,validators:[],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;et().s9({environment:o,blocks:t,previewFormat:"code"})}}),it=(0,ot().Ls)({key:"show preview on code block",displayName:ot().AY.showCodePreviewFormat,analyticsName:ot().AY.showCodePreviewFormat.defaultMessage,svg:Xe,validators:[],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;et().s9({environment:o,blocks:t,previewFormat:"preview"})}}),at=(0,ot().Ls)({key:"show code and preview",displayName:ot().AY.showSplitViewFormat,analyticsName:ot().AY.showSplitViewFormat.defaultMessage,svg:Je,validators:[],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;et().s9({environment:o,blocks:t,previewFormat:"split_view"})}}),st=[{key:"code preview actions block",render:e=>(0,p.jsx)(tt().A,{...e}),title:R().A.formatMessage(nt.showCodePreviewSection),actions:[rt,it,at]}];var lt=()=>o(722872),ct=()=>o(700250),dt=(o(18107),o(967357),()=>o(921855));const ut=new(r().O2)("NotionScriptRenderer",(()=>Promise.all([o.e(46933),o.e(51197)]).then(o.bind(o,20911)))),pt=(0,r()._h)(ut,(e=>e.NotionScriptRenderer));var mt=()=>o(616610),gt=()=>o(337567),ft=(o(16280),o(814603),o(147566),o(198721),()=>o(206267)),vt=()=>o(319625);const ht=new(r().O2)("mermaidAPI",(async()=>{const e=(await Promise.all([o.e(49889),o.e(42838),o.e(96304)]).then(o.bind(o,622279))).default;return e.initialize({startOnLoad:!1,securityLevel:"strict",themeVariables:{fontFamily:T().O9}}),e})),_t="\n---\n";var bt=()=>o(719147);const yt=(()=>{try{return"true"===new URLSearchParams(window.location.search).get("disableMermaid")}catch(e){return!1}})(),St={lineHeight:1.16};function wt(e){const{mermaidAPI:t,source:o}=e,n=(0,c.useRef)(null),r=(0,c.useRef)(`mermaid-${ft().JW()}`),[i,a]=(0,c.useState)(),s=(0,I().IS)((e=>({diagram:(0,Ae().wh)({alignContent:"center",justifyContent:"center"})})),[]),l=function(e){switch(e){case"dark":return"dark";case"light":return"neutral";default:(0,Ze().HB)(e)}}((0,I().DP)().mode),d=(0,c.useMemo)((()=>function(e){const{source:t,theme:o}=e,n=`%%{init: {'theme':'${o}'}}%%\n`;return t.startsWith("---\n")&&t.includes(_t)?t.replace(_t,`${_t}${n}`):`${n}${t}`}({source:o,theme:l})),[o,l]);return(0,c.useLayoutEffect)((()=>{if(!t)return;let e=!1;try{t.render(r.current,d).then((t=>{const o=t.svg,r=t.bindFunctions;if(e)return;if(!n.current)return;n.current.innerHTML=o;const i=n.current.firstChild;i&&i instanceof SVGSVGElement&&i.removeAttribute("height");try{r&&r(n.current),a(void 0)}catch(s){a((0,vt().A)(s))}}),(e=>{a((0,vt().A)(e))}))}catch(o){a((0,vt().A)(o))}return()=>{e=!0}}),[d,t]),(0,p.jsxs)(p.Fragment,{children:[i&&(0,p.jsx)(kt,{error:i}),(0,p.jsx)("div",{style:s.diagram,ref:n})]})}function kt(e){const{error:t}=e,o=(0,I().IS)((e=>({label:{color:e.errorText,marginBottom:4,whiteSpace:"pre-wrap"}})),[]);return"str"in t?(0,p.jsx)("div",{children:(0,p.jsxs)(ke().A,{isMultiline:!0,style:o.label,children:[t.str,(0,p.jsx)("div",{children:(0,p.jsx)(bt().A,{external:!0,href:"https://mermaid-js.github.io/mermaid/#/examples",children:(0,p.jsx)(g().sA,{id:"mermaidRenderer.error.seeMermaidExamples",defaultMessage:"See Mermaid examples"})})})]})}):(0,p.jsx)(ke().A,{isMultiline:!0,style:o.label,children:(0,p.jsx)(g().sA,{id:"mermaidRenderer.error.unknownError",defaultMessage:"Syntax error in Mermaid diagram: {error}",values:{error:`${t.name}: ${t.message}`}})})}function It(e){const t=(0,d().K8)((()=>e.store.getBlockTitleStore()),[e.store]),o="code"===e.currentCodePreviewFormat,n=(0,c.useMemo)((()=>xt(e.currentLanguage)),[e.currentLanguage]),r=(0,d().K8)((()=>t.getValue()),[t]),i=(0,d().K8)((()=>{const e=(0,gt().x3)().at(0);return!(null==e||!e.isStreaming())&&(t.inMemoryRecordCache.isTemporaryData&&t.inMemoryRecordCache.name.includes(mt().b))}),[t]);if(o||!r||!n)return null;const a=n.component;return(0,p.jsx)("div",{style:Tt(e.currentCodePreviewFormat),children:(0,p.jsx)(a,{source:dt().r4(r,t),isAssistantDataLoading:i})})}const At={Mermaid:{component:function(e){const{source:t,isAssistantDataLoading:n}=e,i=(0,o(591779).lW)(t,300,Object.is),a=(0,r().fJ)(ht),s=yt?new Error("Mermaid is disabled because 'disableMermaid=true' was in the query string when the page loaded. Reload the page to re-enable Mermaid."):a.error;return(0,p.jsx)("div",{style:s?void 0:St,children:s?!n&&(0,p.jsx)(kt,{error:s}):(0,p.jsx)(wt,{mermaidAPI:a.value,source:i})})}},NotionScript:{component:pt}};function xt(e){const t=(0,Ze().O)(At,e)?At[e]:void 0;if(t)return t}function Ct(e){return Boolean(xt(e))}function Tt(e){switch(e){case"split_view":return{padding:16,flexGrow:1,flexShrink:0};case"preview":return{padding:16,paddingTop:40,alignSelf:"center",flexGrow:1,flexShrink:0};case"code":return{};default:(0,Ze().HB)(e)}}var Mt=()=>o(452558),Pt=()=>o(406699),Bt=()=>o(928600);function Rt(e){const t=(0,k().v3)(),o=(0,k().Y0)(),n=(0,I().DP)(),r=(0,v().bx)(e.store,e.disabled),i=(0,d().uB)(void 0,D().A),a=(0,c.useCallback)((n=>{const r=(0,p.jsx)(Mt().A,{context:{blocks:[e.store],environment:t,publicEditMode:void 0,analyticsFrom:"code_block_preview_menu"},sections:st,initialFocus:["code","preview","split_view"].findIndex((t=>t===e.currentCodePreviewFormat)),onAccept:n.close});let i;return i=o.isMobile?{menuType:lt().gu.ActionSheet}:{menuType:lt().gu.Popup,width:167,maxHeight:"50vh"},(0,p.jsx)(Bt().A,{...i,children:r})}),[o.isMobile,t,e.currentCodePreviewFormat,e.store]);return Ct(e.currentLanguage)?(0,p.jsx)(Pt().Ay,{popupType:o.isMobile?Pt().z7.SlideUp:Pt().z7.Popup,renderOrigin:t=>(0,p.jsxs)(Ye().p,{isGray:!0,size:"xs",disabled:!r,style:{marginRight:5},...t,children:[Et(e.currentCodePreviewFormat),r&&(0,A().b)({width:10,marginLeft:4,fill:n.lightIconColor})]}),buttonPopupStore:i,placementToOrigin:ct().UV.Bottom,render:a}):null}function Et(e){let t;switch(e){case"split_view":t=ot().AY.showSplitViewFormat;break;case"preview":t=ot().AY.showCodePreviewFormat;break;case"code":t=ot().AY.showOnlyCodeFormat;break;default:(0,Ze().HB)(e)}return(0,p.jsx)(g().sA,{...t})}o(898992),o(354520),o(581454);var Dt=()=>o(792485),Nt=()=>o(15440),Lt=()=>o(763884),Ft=()=>o(317909),Ut=()=>o(857437),Ot=()=>o(88452),Vt=()=>o(178687),jt=()=>o(77246),zt=()=>o(760217),qt=()=>o(419357);function Ht(e){const t=(0,Dt().S)(),o=(0,g().tz)(),n=(0,k().v3)(),r=(0,k().Y0)(),i=(0,I().DP)(),a=(0,d().K8)((()=>t&&t.pageStore?jt().Uv.getMode(t.pageStore):"default"),[t]),s=null!=t&&t.pageStore?a:"default",l=(0,v().bx)(e.store,e.disabled)&&"suggest"!==s,[u,m]=(0,c.useState)(""),f=(0,d().uB)(void 0,D().A),h=(0,Ot().Rp)(),[_,b]=(0,Ut().$)(),y=(0,c.useCallback)((e=>{m(e.target.value)}),[]),S=(0,c.useCallback)((()=>{m("")}),[]),w=(0,c.useCallback)((t=>{Ft().createAndCommit({userAction:"CodeBlock.setPersistedLanguage",environment:n,canUndo:!0,perform:o=>{et().IA({blocks:[e.store],language:t,transaction:o})}}),Lt().A.set({userId:n.currentUser.id,key:Vt().j.localLanguagePreferenceKey,value:t})}),[n,e.store]),x=(0,c.useCallback)((t=>{const i=Nt().Dm.filter((e=>!(!h&&e===Nt().jA.NotionScript)&&"Java/C/C++/C#"!==e)),a=[{key:0,render:e=>(0,p.jsx)(tt().A,{...e}),actions:i.map((e=>{const o={key:e,displayName:e,analyticsName:e,searchName:e,render:t=>(0,p.jsx)(zt().A,{title:e,...t}),action:()=>{w(e),t.close()},closeParentMenu:!0};return o}))}],s=(0,p.jsx)(Mt().A,{filter:u,context:{blocks:[],environment:n,publicEditMode:void 0,analyticsFrom:"code_block_language_menu"},sections:a,initialFocus:u?0:i.findIndex((t=>t===e.currentLanguage)),comboboxProps:b}),l=(0,p.jsx)(tt().A,{isInput:!0,children:(0,p.jsx)(qt().Ay,{value:u,onChange:y,focus:!r.isMobile||void 0,placeholder:o.formatMessage(ot().AY.searchPlaceholder),focusAfterAnimation:!0,..._})});let c;return c=r.isMobile?{menuType:lt().gu.Modal,title:(0,p.jsx)(g().sA,{defaultMessage:"Language",id:"codeBlock.mobileLanguageMenu.title"}),right:(0,p.jsx)(g().sA,{defaultMessage:"Done",id:"codeBlock.mobileLanguageMenu.doneButton.label"}),onClickRight:t.close,header:l}:{menuType:lt().gu.Popup,width:240,maxHeight:"50vh",header:l},(0,p.jsx)(Bt().A,{...c,children:s})}),[e.currentLanguage,r.isMobile,n,y,o,u,w,h,_,b]);return(0,p.jsx)(Pt().Ay,{popupType:r.isMobile?Pt().z7.SlideUp:Pt().z7.Popup,renderOrigin:t=>(0,p.jsxs)(Ye().p,{isGray:!0,size:"xs",disabled:!l,style:{marginRight:5},...t,children:[e.currentLanguage,l&&(0,A().b)({width:10,marginLeft:4,fill:i.lightIconColor})]}),buttonPopupStore:f,placementToOrigin:ct().UV.Bottom,render:x,onClose:S})}var Wt=()=>o(232063);const Kt="opacity 300ms ease-in";function Gt(e,t){const n=(0,k().v3)(),{isMobile:r}=(0,k().Y0)(),i=(0,c.useId)(),a=(0,c.useRef)(null),s=(0,d().uB)(void 0,h().A),{store:l,disabled:u}=e,m=(0,d().K8)((()=>(0,qe().Z0)(l)),[l]),g=o(335098).y[m],f=(0,d().K8)((()=>(0,qe().X$)(l)),[l]),_=(0,d().K8)((()=>l.getFormat().code_wrap),[l]),b=(0,d().K8)((()=>l.getBlockTitleStore()),[l]),[y,S]=(0,c.useState)(!1),[w,A]=(0,c.useState)(!1),x=(0,d().K8)((()=>U().A.state.isKeyboardMode),[]),C="ASCII Art"===m?1:void 0,T=(0,d().K8)((()=>!!l.isRootOrDirectChild()),[l]),M=(0,d().K8)((()=>(0,qe().gV)(l)),[l]),P=(0,d().K8)((()=>{let e;const t=o(712505).default.isSidePeekOpen(),r=(0,o(747100).cq)(l),i=(0,o(835066).xK)(n,r),a=o(622237).A.getWidth(r),s=l.getFormat().block_width;if(!T)return e;if(r)return e;if(t){if(!s||!i||!a)return e;i>=a&&s>=i?i>He().x?e=i:s>He().x&&(e=He().x):a>=i&&s>=a&&(a>He().x?e=a:s>He().x&&(e=He().x))}return e}),[n,T,l]),B=(0,I().IS)((t=>({resizableRootContainer:{display:"flex",position:"relative",margin:"auto",overflow:"visible",width:P},resizableContentContainer:{justifyContent:"center",alignItems:"center",width:"100%",maxWidth:"100%",overflow:"scroll"},valueAndPreview:{padding:"22px"},wrapper:{flexGrow:1,textAlign:"left",position:"relative",minWidth:0,lineHeight:C,width:"100%",background:t.codeBlockBackground,borderRadius:4,...e.style},languageSelector:{position:"absolute",top:8,left:8,zIndex:1,color:t.mediumTextColor,display:"flex",alignItems:"center",justifyContent:"flex-end",opacity:y||w||r?1:0,transition:Kt},header:{position:"absolute",top:3,right:1,zIndex:1,color:t.mediumTextColor,display:"flex",alignItems:"center",justifyContent:"flex-end",height:25,fontSize:11.5,opacity:r||w||!x&&y?1:0,transition:Kt},captionContainer:{background:t.contentBackground,paddingRight:105}})),[C,w,y,x,r,e.style,P]),R=(0,c.useCallback)((()=>{const e=l.getPropertyStore("caption");de().hc({environment:n,store:l}),ue().setSelectionAtEnd({store:e})}),[n,l]),E=(0,c.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,o(819121).p)(t)&&A(!0)}),[]),D=(0,c.useCallback)((e=>{A(!1)}),[]),N=(0,c.useCallback)((()=>{S(!0)}),[]),L=(0,c.useCallback)((()=>{S(!1)}),[]),F=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{onFocus:E,onBlur:D,style:B.languageSelector,children:[(0,p.jsx)(Ht,{disabled:e.disabled,store:e.store,currentLanguage:m}),(0,p.jsx)(Rt,{disabled:e.disabled,store:e.store,currentLanguage:m,currentCodePreviewFormat:f})]}),(0,p.jsx)("div",{onFocus:E,onBlur:D,style:B.header,children:(0,p.jsx)(Qe,{store:e.store,disabled:e.disabled,onEditCaption:R})}),(0,p.jsxs)("div",{style:B.valueAndPreview,children:[Yt(m,f)&&(0,p.jsx)(o(126380).G,{store:b,blockStore:l,language:g,disabled:u,codeWrap:Boolean(_),isQuickFind:Boolean(e.isQuickFind),parentSpaceId:(0,ze().e)(l.pointer.spaceId)}),(0,p.jsx)(It,{store:l,disabled:u,currentCodePreviewFormat:f,currentLanguage:m})]}),(0,p.jsx)("div",{style:B.captionContainer,children:(0,p.jsx)(fe().c,{store:e.store,captionAriaId:i,disabled:e.disabled})})]}),O=(0,p.jsx)(p.Fragment,{children:"​"}),V=(0,p.jsx)(ve().A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,hideIfSidebarOrMarginCommentsVisible:!0}),z=M?(0,p.jsxs)("div",{ref:a,style:B.resizableRootContainer,children:[(0,p.jsxs)("div",{style:{width:"100%"},onMouseMove:N,onMouseLeave:L,children:[T&&(0,p.jsx)(Wt().A,{store:l,resizerType:We().f9.Horizontal,resizerAlignment:We()._l.Left,resizeComponent:a,preserveScale:!1,isHovered:y,blockResizerStore:s},"LeftResizer"),(0,p.jsxs)("div",{style:B.resizableContentContainer,children:[(0,p.jsx)(j().s,{role:"figure","aria-labelledby":i,allowSelectionWithin:!0,style:B.wrapper,children:F}),O]}),(0,p.jsx)(Wt().A,{store:l,resizerType:We().f9.Horizontal,resizerAlignment:We()._l.Right,resizeComponent:a,preserveScale:!1,isHovered:y,blockResizerStore:s},"RightResizer")]}),V]}):(0,p.jsxs)("div",{ref:a,style:{display:"flex"},children:[(0,p.jsx)(j().s,{role:"figure","aria-labelledby":i,allowSelectionWithin:!0,style:B.wrapper,onMouseMove:N,onMouseLeave:L,children:F}),O,V]});return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"code",getBlockStore:()=>l,getNode:()=>a.current,caption:R})),[R,l]),z)}const $t=c.memo(c.forwardRef(Gt),f().A);function Yt(e,t){return!Ct(e)||"preview"!==t}const Qt=(0,u().wt)("codepen",{viewBox:"0 0 40 40",svg:(0,p.jsx)("path",{d:"M39.9834,13.7071 C39.8236,12.6665 38.6647,12.1063 37.8655,11.586 C36.4269,10.6255 35.0283,9.70502 33.5897,8.74452 C30.1931,6.46334 26.7564,4.18216 23.3598,1.90098 C22.5606,1.38071 21.7613,0.820424 20.9621,0.300155 C20.4027,-0.100052 19.6434,-0.100052 19.044,0.300155 C16.7663,1.82094 14.4485,3.38175 12.1708,4.90253 L2.10066,11.626 C1.22152,12.1863 0.0626603,12.7466 0.0226996,13.9472 C-0.0172612,15.2679 0.0226996,16.6286 0.0226996,17.9493 L0.0226996,24.3526 C0.0226996,25.5132 -0.217065,26.8739 0.861875,27.5943 C3.41936,29.3552 6.01681,31.036 8.61426,32.7569 C11.8111,34.878 15.008,37.0391 18.2048,39.1602 C19.084,39.7606 19.9631,40.4009 21.0421,39.6805 C21.9611,39.0802 22.8403,38.4799 23.7594,37.8796 C27.3159,35.5184 30.8724,33.1171 34.4289,30.7559 L38.385,28.1145 C38.6248,27.9544 38.9045,27.7944 39.1443,27.5943 C39.7037,27.1941 39.9435,26.6338 39.9435,25.9534 L39.9435,14.9477 C39.9834,14.5075 40.0234,14.1073 39.9834,13.7071 C39.9834,13.7871 39.9834,13.6671 39.9834,13.7071 Z M21.7214,4.94255 L35.1882,13.9472 L29.194,17.9893 L21.7214,12.9867 L21.7214,4.94255 Z M18.2848,4.94255 L18.2848,12.9467 L10.8521,17.9493 L4.81799,13.9472 L18.2848,4.94255 Z M3.45932,17.1489 L7.73512,20.0304 L3.45932,22.9118 L3.45932,17.1489 Z M18.2848,35.1182 L4.81799,26.1135 L10.8121,22.0714 L18.2448,27.074 L18.2448,35.1182 L18.2848,35.1182 Z M20.0031,24.1125 L13.929,20.0304 L20.0031,15.9482 L26.0771,20.0304 L20.0031,24.1125 Z M21.7214,35.1182 L21.7214,27.114 L29.1541,22.1114 L35.1482,26.1535 L21.7214,35.1182 Z M36.5468,22.9118 L32.271,20.0304 L36.5868,17.1489 L36.5468,22.9118 Z"})});function Zt(e,t){const o=(0,c.useRef)(null),n=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"codepen",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:n,ref:o,store:e.store,iconSvg:Qt,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with any public CodePen link…",id:"codepenBlock.embed.caption"}),children:(0,p.jsx)(g().sA,{defaultMessage:"Embed CodePen",id:"codepenBlock.placeholder"})}))}const Xt=c.memo(c.forwardRef(Zt),f().A);var Jt=()=>o(938090),eo=()=>o(908006),to=()=>o(547392),oo=()=>o(661491),no=()=>o(753199),ro=()=>o(666710),io=()=>o(454305),ao=()=>o(230062);const so={width:46,handleWidth:4};function lo(e){const t=(0,d().uB)(e.mouseStore,io().A),{showHandle:o,onMouseDown:n,onTouchStart:r,onContextMenu:i,onDoubleClick:a}=e,s=(0,k().v3)(),l=(0,d().K8)((()=>o&&(t.state.mouseEntered||s.device.isMobile&&ao().A.state)),[o,t,s.device]),u=(0,c.useCallback)((()=>{t.setState({...t.state,mouseEntered:!1}),ao().A.removeListener(u)}),[t]),m=(0,c.useCallback)((()=>{ao().A.removeListener(u),ao().A.state||t.setState({...t.state,mouseEntered:!0})}),[u,t]),g=(0,c.useCallback)((()=>{ao().A.state?ao().A.addListener(u):t.setState({...t.state,mouseEntered:!1})}),[u,t]),f=(0,I().IS)((e=>{const t={position:"relative",width:so.width,flexGrow:0,flexShrink:0,transition:"opacity 200ms ease-out",opacity:0};return{base:t,hovered:{...t,opacity:1,cursor:"col-resize"},handle:{position:"absolute",top:0,bottom:0,left:so.width/2-so.handleWidth/2,width:so.handleWidth,height:"100%",background:e.darkDividerColor}}}),[]),v=l?f.hovered:f.base;return(0,p.jsx)("div",{style:v,onDoubleClick:a,onMouseDown:n,onTouchStart:r,onContextMenu:i,onMouseEnter:m,onMouseLeave:g,children:o&&(0,p.jsx)("div",{style:f.handle})})}const co=c.memo(lo);var uo=()=>o(199896);function po(e,t){const{ratio:n,store:r,isLastItem:i,disabled:a,numColumns:s}=e,l=(0,k().v3)(),u=(0,c.useRef)(!1),m=(0,v().bx)(r,a),g=c.useRef(null),f=(0,d().K8)((()=>1===r.getContentLength()),[r]),h=(0,d().K8)((()=>{const e={width:"100%"};return s>1&&(e.width=`calc((100% - ${so.width*(s-1)}px) * ${n})`),(0,oo().l2)(r,l)||(e.width="100%"),e}),[l,s,n,r]),_=(0,d().K8)((()=>(0,oo().l2)(r,l)),[r,l]),b=(0,p.jsx)(z().A,{animate:h,ref:g,style:fo(_),onMouseDown:e=>{(0,oo().l2)(r,l)&&(0,no().SQ)({event:e,context:no().y$.EditorMouseDown,callback:()=>{u.current=!0,e.preventDefault(),o(257615).jD({environment:l,target:e.target,startX:e.clientX,startY:e.clientY,showSelectionRect:!0,preventSelectStores:[],allowVerticalEdgeScroll:!0,allowHorizontalEdgeScroll:!1})}})},onMouseUp:e=>{if(u.current&&!o(592678).Vt(e)){const{clientX:t,clientY:o,target:n}=e;eo().default.afterNextFlush((()=>{ue().editNearestBlock(l,{x:t,y:o,target:n instanceof Element?n:void 0}),u.current=!1}))}},onClick:t=>function(e,t,o){if(ro().default.hasBeenUpdatedSince(e.timeStamp))return;if(t.canEdit()){const{clientX:n,clientY:r,target:i}=e;eo().default.afterNextFlush((()=>{Ft().createAndCommit({userAction:"Column.handleClick",environment:o,canUndo:!0,perform:e=>{ue().insertIfAtBottomOfColumn(o,{x:n,y:r,target:i instanceof Element?i:void 0},t,e)}})}))}}(t,e.store,l),children:(0,p.jsx)(o(852302).l,{children:(0,p.jsx)(uo().A,{store:r,canDropLeft:m&&_,canDropRight:i&&m&&_,onSelectableDrop:t=>function(e,t,o,n){const{droppedDirection:r,droppedStores:i,duplicate:a}=e;Ft().createAndCommit({userAction:"Column.handleDrop",environment:n,canUndo:!0,perform:e=>{to().MS({environment:n,droppedDirection:r,droppedStores:i,targetParentStore:t.getContentStore(),targetStore:o,duplicate:a,transaction:e})}})}(t,e.columnListStore,e.store,l),analyticsName:"column",style:{display:"flex",flexDirection:"column"},shouldShowDropZone:!0,isListContainer:!0,children:(0,p.jsx)(K().A,{store:r.getContentStore(),disabled:a,disableLayout:f,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag})})})});return(0,v().NW)(r,t,(0,c.useMemo)((()=>({renderedType:"column",getBlockStore:()=>r,getNode:()=>g.current})),[r]),b)}const mo=c.memo(c.forwardRef(po),f().A),go=12;function fo(e){const t={paddingTop:go,paddingBottom:go};return e?{...t,flexGrow:0,flexShrink:0}:t}o(944114),o(803949);var vo=()=>o(700500),ho=()=>o(496603),_o=()=>o(896628),bo=()=>o(757695);class yo extends bo().default{getInitialState(){return{dragging:!1}}}const So=yo;var wo=()=>o(40845),ko=()=>o(129522),Io=()=>o(989423);function Ao(e){const{columnListStore:t}=e;t.setState({dragging:!1})}function xo(e){const{columnListBlockStore:t,diffX:o,columnListStore:n,leftColumnStore:r,rightColumnStore:i}=e;if(n.state.dragging){const{leftColumnStartWidth:e}=n.state,a=(0,wo().A)(n.state.leftColumnStartRatio,0,1),{rightColumnStartWidth:s}=n.state,l=(0,wo().A)(n.state.rightColumnStartRatio,0,1),c=e+s,d=a+l,u=(0,wo().A)(e+o,0,c),p=(0,wo().A)(s-o,0,c),m=d*(u/c),g=d*(p/c);if(0===u&&0===p)return n.setState({...n.state,temporaryRatios:{}}),{leftColumnNewRatio:a,rightColumnNewRatio:l};{const e=1/(8*t.getContentLength());let o=Math.round(m/e)*e,s=g+(m-o);return o<e&&(o=e,s=a+l-e),s<e&&(s=e,o=l+a-e),n.setState({...n.state,temporaryRatios:{[r.id]:o,[i.id]:s}}),{leftColumnNewRatio:o,rightColumnNewRatio:s}}}}function Co(e){const{environment:t,columnListStore:o,transaction:n,leftColumnStore:r,rightColumnStore:i}=e,a=xo(e);if(a){const{leftColumnNewRatio:e,rightColumnNewRatio:s}=a;_o().zA({stores:[r],update:{column_ratio:e},transaction:n}),_o().zA({stores:[i],update:{column_ratio:s},transaction:n}),o.state.dragging&&o.setState({...o.state,temporaryRatios:{}}),function(e){Io().vd(e,"resize_column")}(t)}}function To(e){const{columnListBlockStore:t,transaction:o,environment:n}=e,r=1/t.getContentLength();_o().zA({stores:t.getContentStores(),update:{column_ratio:r},transaction:o}),function(e){Io().vd(e,"reset_column_sizes")}(n)}function Mo(e){const t=(0,d().uB)(e.mouseStore,io().A),{canDrag:n,columnListBlockStore:r,leftColumnBlockStore:i,rightColumnBlockStore:a,columnListStore:s}=e,l=(0,k().v3)(),u=(0,c.useCallback)((e=>{n&&(e.preventDefault(),function(e){const{environment:t,columnListStore:o,leftColumnStore:n,rightColumnStore:r}=e,i=ko().K.getRect(n),a=ko().K.getRect(r);i&&a&&(o.setState({dragging:!0,temporaryRatios:{},leftColumnStartWidth:i.width,leftColumnStartRatio:n.getColumnRatio(),rightColumnStartWidth:a.width,rightColumnStartRatio:r.getColumnRatio()}),de().IU({environment:t}),ue().clear({environment:t}))}({environment:l,columnListStore:s,leftColumnStore:i,rightColumnStore:a}),de().IU({environment:l}),ue().blurActiveElement())}),[n,l,i,s,a]),m=(0,c.useCallback)((e=>{n&&xo({columnListBlockStore:r,columnListStore:s,leftColumnStore:i,rightColumnStore:a,diffX:e.diffX})}),[n,r,s,i,a]),g=(0,c.useCallback)((e=>{Ft().createAndCommit({userAction:"ColumnDivider.handleDragEnd",environment:l,canUndo:!0,perform:t=>{n&&Co({environment:l,columnListBlockStore:r,columnListStore:s,leftColumnStore:i,rightColumnStore:a,diffX:e.diffX,transaction:t})}}),Ao({columnListStore:s})}),[n,r,s,l,i,a]),f=(0,c.useCallback)((()=>{Ao({columnListStore:s})}),[s]),v=(0,c.useCallback)((()=>{Ft().createAndCommit({userAction:"ColumnDivider.handleDoubleClick",environment:l,canUndo:!0,perform:e=>{n&&To({environment:l,columnListBlockStore:r,transaction:e})}})}),[n,r,l]);return n?(0,p.jsx)(o(603820).A,{allowDragWhileTextEditing:!0,onDraggableDragStart:u,onDraggableDragMove:m,onDraggableDragEnd:g,onDraggableDragCancel:f,disableHorizontalEdgeScroll:!0,disableVerticalEdgeScroll:!0,render:e=>(0,p.jsx)(co,{showHandle:!0,mouseStore:t,onDoubleClick:v,...e})}):(0,p.jsx)(co,{mouseStore:t,showHandle:!1})}const Po=c.memo(Mo),Bo={display:"flex",position:"relative",flexGrow:1};function Ro(e,t){const n=(0,k().v3)(),r=(0,v().bx)(e.store,e.disabled),i=(0,c.useRef)(null),a=(0,d().uB)(void 0,So),s=(0,d().uB)(void 0,h().A),{store:l}=e,u=(0,d().K8)((()=>(0,oo().l2)(l,n)),[n,l]),m=(0,c.useCallback)((()=>{const e=l.getContentStores()[0];if(e&&e.getType()===vo().xd.column){const t=e.getContentStores()[0];t&&t.getType()===vo().xd.text&&(de().hc({environment:n,store:t}),ue().setSelectionAtStart({store:t.getBlockTitleStore()}))}}),[n,l]),g=(0,c.useCallback)((()=>{Ft().createAndCommit({userAction:"ColumnList.handleResizeDoubleClick",environment:n,canUndo:!0,perform:e=>{if(l.canEdit()){const t=!l.getFormat().block_full_width;_o().zA({stores:[l],transaction:e,update:{block_full_width:t}})}}})}),[n,l]),f=(0,d().K8)((()=>{const{limitParents:t}=o(143197).A.state;let n;return e.store.findRecordStoreUIAncestor((o=>{const r=t.get(o);return!!r&&(n=r[e.store.id],!0)})),n}),[e.store]),_=(0,d().K8)((()=>r&&(0,oo().kv)(e.store,n)),[r,n,e.store]);let b=(0,d().K8)((()=>e.store.getContentStores()),[e.store]);const{disabled:y}=e;ho().Et(f)&&(b=ho().di(b,0,f));let S=(0,d().K8)((()=>b.map(((e,t)=>{let o;return o=a.state.dragging&&a.state.temporaryRatios.hasOwnProperty(e.id)?a.state.temporaryRatios[e.id]:e.getColumnRatio(),o}))),[a,b]);const w=ho().cz(S);S=S.map((e=>e/w));const I=[];b.forEach(((t,o)=>{const n=0===o,i=o===b.length-1;I.push((0,p.jsx)(mo,{store:t,isFirstItem:n,isLastItem:i,numColumns:b.length,ratio:S[o],disabled:y,columnListStore:e.store},t.id)),i||I.push((0,p.jsx)(Po,{canDrag:r,columnListBlockStore:e.store,leftColumnBlockStore:t,rightColumnBlockStore:b[o+1],columnListStore:a},`divider${t.id}`))}));const A=(0,d().K8)((()=>{const e=Boolean(l.getFormat().block_full_width),t=e&&s.state.dragging?s.state.temporaryFullWidth:e;return{position:"relative",transition:"padding 0.2s linear",paddingLeft:t?so.width:void 0,paddingRight:t?so.width:void 0}}),[s,l]),x=(0,c.useMemo)((()=>({getNode:()=>i.current})),[]);let C;return C=_?(0,p.jsx)("div",{ref:i,style:A,children:(0,p.jsxs)("div",{style:Bo,children:[(0,p.jsx)(We().Ay,{disabled:!r,blockResizerStore:s,resizeComponent:x,resizerType:We().f9.Horizontal,resizerAlignment:We()._l.Left,preserveScale:!0,resizeHorizontally:!0,resizeVertically:!1,store:e.store,children:(0,p.jsx)("div",{style:Do("left"),children:(0,p.jsx)(co,{onDoubleClick:g,showHandle:r})})},"divider-left-edge"),I,(0,p.jsx)(We().Ay,{disabled:!r,resizeComponent:x,resizerType:We().f9.Horizontal,resizerAlignment:We()._l.Right,preserveScale:!0,resizeHorizontally:!0,resizeVertically:!1,store:e.store,blockResizerStore:s,children:(0,p.jsx)("div",{style:Do("right"),children:(0,p.jsx)(co,{onDoubleClick:g,showHandle:r})})},"divider-right-edge")]})}):(0,p.jsx)("div",{ref:i,style:{display:u?"flex":"block"},children:I}),(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"column_list",getBlockStore:()=>e.store,getNode:()=>i.current,handleCreated:m})),[m,e.store]),(0,p.jsx)(o(27654).c.Provider,{value:!0,children:C}))}const Eo=c.memo(c.forwardRef(Ro),f().A);function Do(e){return{display:"flex",position:"absolute",top:0,bottom:0,right:"left"===e?"100%":"auto",left:"right"===e?"100%":"auto"}}function No(e,t){const n=c.useRef(null),r=(0,I().IS)((()=>({root:{minHeight:"1.5em",display:"flex",alignItems:"center"},wrapper:{...Le().nE},progressBar:{flex:1,margin:"0 8px"}})),[]);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"copy_indicator",getNode:()=>n.current,getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(j().s,{allowSelectionWithin:!1,style:r.wrapper,ref:n,children:(0,p.jsxs)("div",{style:r.root,children:[(0,p.jsx)(ye().A,{}),(0,p.jsx)("div",{style:r.progressBar,children:(0,p.jsx)(o(575650).A,{targetRecordId:e.store.id})})]})}))}const Lo=c.memo(c.forwardRef(No),f().A),Fo=(0,u().wt)("deepnote",{viewBox:"0 0 92 92",svg:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("path",{fill:"#fff",d:"M0 0h92v92H0z"}),(0,p.jsx)("path",{fill:"#0265B4",fillRule:"evenodd",d:"M20 73h22.153l12.461-4.673-4.673-18.346-14.365 1.558L20 73z",clipRule:"evenodd"}),(0,p.jsx)("path",{fill:"#002868",fillRule:"evenodd",d:"M42.153 73s7.004-3.695 8.3-10.242c1.296-6.546-5.1-11.22-14.876-11.22 0-.172 8.582-12.114 8.582-12.114l20.84.605-4.622 24.407-8.628 6.74L42.153 73z",clipRule:"evenodd"}),(0,p.jsx)("path",{fill:"#3793EF",fillRule:"evenodd",d:"M20 44.615l17.307-25.614s.424.004 1.385 0c6.784-.03 34.268 1.315 34.268 25.467 0 27.57-30.807 28.53-30.807 28.53s12.865-2.463 12.865-14.687-11.619-13.696-19.095-13.696H20z",clipRule:"evenodd"})]})}),Uo=(0,g().YK)({embedButtonText:{defaultMessage:"Embed Deepnote",id:"deepnoteBlock.embeds.button.label"}});function Oo(e,t){const o=(0,g().tz)(),n=(0,c.useRef)(null),r=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"deepnote",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:r,ref:n,store:e.store,iconSvg:Fo,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with Deepnote blocks with public links",id:"deepnoteBlock.embeds.caption"}),embedButtonText:o.formatMessage(Uo.embedButtonText),urlInputPlaceholder:"https://deepnote.com/…",children:(0,p.jsx)(g().sA,{defaultMessage:"Embed Deepnote",id:"deepnoteBlock.placeholder"})}))}const Vo=c.memo(c.forwardRef(Oo),f().A);var jo=()=>o(502438);function zo(e,t){let{store:n}=e;const r=(0,k().Y0)(),i=(0,k().v3)(),a=(0,c.useRef)(null),s=(0,o(444570).Jj)(),l=(0,I().IS)((e=>({root:{color:e.darkDividerColor,pointerEvents:"auto",...s?{marginTop:9,marginBottom:8}:{}}})),[s]),d=(0,c.useCallback)((e=>{r.isMobile&&(de().Lt({environment:i,store:n}),o(901265).it({environment:i,stores:jo().default.state.stores,left:e.clientX,top:e.clientY,actionSectionGroupKey:"default",showInput:!0,analyticsFrom:"content_block_menu"}))}),[r.isMobile,i,n]);return(0,v().NW)(n,t,(0,c.useMemo)((()=>({renderedType:"divider",getNode:()=>a.current,getBlockStore:()=>n,handleCreated(){Ft().createAndCommit({userAction:"DividerBlock.handleCreated",environment:i,canUndo:!0,perform:e=>to().Rp({environment:i,targetStore:n,targetParentStore:n.getRecordStoreUIParent(),isAtStartOfLine:!1,isClick:!1,transaction:e})})}})),[i,n]),(0,p.jsx)(o(802790).A,{className:P().OiJ,size:13,style:l.root,onClick:d,ref:a}))}const qo=c.memo(c.forwardRef(zo),f().A);function Ho(e,t){const o=(0,c.useRef)(null),n=(0,k().v3)(),r=(0,pe().gU)()?{source:"https://www.notion.so/product/drawing"}:{};return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"drawing",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store,handleCreated(){ue().clear({environment:n}),de().td({environment:n,stores:[e.store],phase:jo().SelectionPhase.Editing})}})),[n,e.store]),(0,p.jsx)(_().Ay,{...e,...r,ref:o,mediaMenuTabs:[],disableMediaMenu:!0,preserveScale:!1,showURLInput:!1}))}const Wo=c.memo(c.forwardRef(Ho),f().A);var Ko=()=>o(869190),Go=()=>o(305491),$o=()=>o(415559),Yo=()=>o(606952),Qo=()=>o(855801),Zo=()=>o(619400);class Xo extends bo().default{getInitialState(){return{error:!1,loading:!1}}}const Jo=Xo,en={flexGrow:1,flexShrink:1,flexBasis:180,overflow:"hidden",textAlign:"left",justifyContent:"center",display:"flex",flexDirection:"column"},tn={display:"block",width:"100%",height:"100%",objectFit:"cover",objectPosition:"top"},on={position:"absolute",top:0,left:0,right:0,bottom:0},nn={display:"block",position:"relative",width:"100%",paddingBottom:"55%"},rn=(0,g().YK)({menuTitle:{defaultMessage:"Embed",id:"googleDriveBlock.mediaMenuActions.embedTab.title"}});function an(e,t){const{store:n}=e,r=(0,o(311029).B)(),i=(0,c.useRef)(null),a=(0,k().v3)(),s=(0,v().bx)(e.store,e.disabled),{properties:l,format:u}=(0,d().K8)((()=>({properties:n.getProperties(),format:n.getFormat()})),[n]),m=(0,d().uB)(void 0,Jo),[f,h]=(0,c.useState)(!1),_=(0,c.useCallback)((async e=>{const t=o(943846).Or(e);if(!t)return void(await pn(e,n,a));const r=await $o().Dx({environment:a,store:n,fileId:t});r&&r.auth_error&&($o().pQ(a,{onSuccess:e=>{wn(t,e,a,n,m)},onFailure:()=>{pn(e,n,a)}}),mn("url_embed",a))}),[m,a,n]),b=(0,c.useCallback)((()=>{const{device:e}=a,t=[];return t.push({type:"embed",caption:(0,p.jsx)(g().sA,{defaultMessage:"Works with any file in your Google Drive",id:"googleDriveBlock.embedTab.caption"}),buttonText:(0,p.jsx)(g().sA,{defaultMessage:"Embed Google Drive file",id:"googleDriveBlock.embedTab.embedButton.label"}),onChange:e=>{ce().I(),_(e)}}),e.isMobile||t.push({type:"drive",title:(0,p.jsx)(g().sA,{defaultMessage:"Browse Google Drive",id:"googleDriveBlock.mediaPicker.googleDriveTab.title"}),onSelect:async e=>{if(ce().I(),e&&e.token)kn(e.token,a,n,m),le().pu(a);else{const e=await $o().W3(a);e&&e.token&&kn(e.token,a,n,m),mn("drive_file_picker",a)}}}),t}),[m,a,_,n]),y=(0,c.useCallback)((()=>{const{device:e}=a;if(s){const t=i.current;if(t&&t instanceof Element){const o=t.getBoundingClientRect();ce().W(a,{originRect:o,originGap:0,isSmallWidth:!1,showArrow:!0,currentTab:e.isMobile?"embed":"drive",tabs:b(),title:R().A.formatMessage(rn.menuTitle),popupWidth:320,maxHeight:420})}}}),[s,a,b]);(0,c.useEffect)((()=>{u&&u.drive_properties&&u.drive_properties.file_id&&u.drive_status&&u.drive_status.last_fetched+5*se().Xb<Date.now()&&$o().ub(a,{id:n.id,spaceId:(0,ze().e)(n.pointer.spaceId)})}),[a,u,n.id,n.pointer.spaceId]);const S=(0,c.useCallback)((()=>h(!0)),[h]),w=(0,c.useCallback)((()=>h(!1)),[h]),I=(0,p.jsx)(j().s,{allowSelectionWithin:!0,ref:i,style:{position:"relative"},children:u&&u.drive_properties&&u.drive_status?(0,p.jsx)(ln,{...e,store:n,canEdit:s,captionAriaId:r,fileData:u.drive_properties,driveStore:m,shouldShowActionButton:Sn(a,f),handleMouseEnter:S,handleMouseLeave:w}):l&&l.source?(0,p.jsx)(dn,{...e,store:n,handleMouseEnter:S,handleMouseLeave:w}):(0,p.jsx)(cn,{...e,store:n,onClick:y,shouldShowActionButton:Sn(a,f),canEdit:s,driveStore:m,handleMouseEnter:S,handleMouseLeave:w})});return(0,v().NW)(n,t,(0,c.useMemo)((()=>({renderedType:"drive",getBlockStore:()=>n,getNode:()=>i.current,handleCreated:y,initializeGoogleDriveBlockFromUrl:_})),[y,_,n]),I)}const sn=c.memo(c.forwardRef(an),f().A);function ln(e){const{store:t,fileData:o,captionAriaId:n,driveStore:r,canEdit:i,disableCommentMenu:a,hideContent:s,disabled:l,shouldShowActionButton:c,handleMouseEnter:d,handleMouseLeave:u,style:m}=e,g=(0,v().pW)(t),f=(0,I().IS)((e=>({linkBox:{display:"flex",alignItems:"center",border:`1px solid ${e.tableDividerColor}`,borderRadius:4,borderTopLeftRadius:0,borderTopRightRadius:0,flexDirection:"column",width:"100%",...m,...g},title:{fontWeight:T().Wy.medium,...T().RC,color:e.regularTextColor},uiLabel:{color:e.mediumTextColor,fontSize:12}})),[m,g]);return(0,p.jsxs)("div",{role:"figure","aria-labelledby":n,children:[(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsxs)(be().A,{href:o.url,external:!0,style:f.linkBox,onMouseLeave:u,onMouseEnter:d,children:[(0,p.jsx)(yn,{store:t,driveStore:r,fileData:o}),(0,p.jsx)(bn,{fileData:o}),c&&i&&(0,p.jsx)(gn,{store:t})]}),(0,p.jsx)(ve().A,{disableCommentMenu:a,hideContent:s,store:t})]}),(0,p.jsx)(fe().c,{store:t,captionAriaId:n,disabled:l})]})}function cn(e){const{disabled:t,store:o,canEdit:n,driveStore:r,disableCommentMenu:i,hideContent:a,onClick:s,shouldShowActionButton:l,handleMouseEnter:c,handleMouseLeave:u}=e,m=(0,d().K8)((()=>o.getFormat().drive_status),[o]),f=!(!m||!m.authed),v=(0,d().K8)((()=>r.getState().loading),[r]);return(0,p.jsxs)("div",{onMouseEnter:c,onMouseLeave:u,style:{display:"flex"},children:[(0,p.jsx)(Ie().A,{iconSvg:Go().x,disabled:t,shouldHideRight:l,right:n&&(0,p.jsx)(ge().A,{store:o,fadeIn:!1}),onClick:s,isLoading:v,progressPercent:0,children:f?(0,p.jsx)(g().sA,{defaultMessage:"Choose a file to embed from Google Drive",id:"googleDriveBlock.placeholder.authenticated"}):(0,p.jsx)(g().sA,{defaultMessage:"Connect Google Drive to Notion to embed a file",id:"googleDriveBlock.placeholder.notAuthenticated"})}),(0,p.jsx)(ve().A,{disableCommentMenu:i,hideContent:a,store:o})]})}function dn(e){const{store:t,handleMouseEnter:o,handleMouseLeave:n}=e,r=(0,I().IS)((e=>({container:{overflow:"hidden",borderRadius:6,border:`1px solid ${e.tableDividerColor}`,borderBottom:void 0,position:"relative"}})),[]);return(0,p.jsx)("div",{style:r.container,children:(0,p.jsx)(_().Ay,{...e,store:t,iconSvg:Go().x,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with Google Docs, Google Sheets…",id:"googleDriveBlock.legacyLinkInput.caption"}),contentBelowSource:(0,p.jsx)(un,{...e,handleMouseLeave:n,handleMouseEnter:o}),children:(0,p.jsx)(g().sA,{defaultMessage:"Embed a file from Google Drive",id:"googleDriveBlock.legacy.placeholder"})})})}function un(e){const{store:t,handleMouseEnter:o,handleMouseLeave:n,style:r}=e,{properties:i,format:a}=(0,d().K8)((()=>({properties:t.getProperties(),format:t.getFormat()})),[t]),s=(0,v().pW)(t),l=(0,I().IS)((e=>({linkBox:{display:"flex",alignItems:"center",border:`1px solid ${e.tableDividerColor}`,borderRadius:4,borderLeft:"none",borderRight:"none",borderTopLeftRadius:0,borderTopRightRadius:0,padding:"8px 12px",...r,...s},title:{fontWeight:T().Wy.medium,...T().RC,color:e.regularTextColor},uiLabel:{color:e.mediumTextColor,fontSize:12}})),[r,s]),c=ie().k4p(i&&i.source);let u=a.link_title;const m=a.link_provider?`${a.link_provider} Embed`:"Google Drive Embed";c!==u&&u||(u=c.includes("spreadsheets")?"A Google Sheets file":c.includes("document")?"A Google Docs file":c.includes("presentation")?"A Google Slides file":"A Google Drive file");return(0,p.jsxs)(be().A,{href:c,external:!0,style:{flexGrow:1,minWidth:0},innerStyle:l.linkBox,onMouseMove:o,onMouseLeave:n,children:[(0,p.jsx)("div",{style:{display:"flex",alignSelf:"start",height:32,width:32,marginRight:12,marginLeft:4,marginTop:3,marginBottom:3,position:"relative"},children:(0,p.jsx)(he().A,{type:"image_url",imageURL:"https://s3-us-west-2.amazonaws.com/public.notion-static.com/8fb58690-ee50-4584-b9fd-ca9b524f56aa/google-drive-icon-19632.png",size:38})}),(0,p.jsxs)("div",{style:en,children:[(0,p.jsx)(ke().A,{style:l.title,children:u}),(0,p.jsx)("div",{style:{display:"flex"},children:(0,p.jsx)(ke().A,{style:l.uiLabel,isSmall:!0,children:m})})]})]})}async function pn(e,t,o){const n=await(0,Qo().zQ)();Ft().createAndCommit({userAction:"DriveBlock.convertToTextBlock",environment:o,canUndo:!0,perform:r=>{Yo().KY({environment:t.environment,store:t.getBlockTitleStore(),value:[ie().Ey_(e,[ie().Sez(e)])],transaction:r}),n({environment:o,blocks:[t],blockType:"text",transaction:r})}})}function mn(e,t){le().iT(t,{integration_name:"google",from:e})}function gn(e){let{store:t}=e;const o=(0,k().v3)();return(0,p.jsx)(ge().A,{store:t,style:{position:"absolute",top:4,right:4,background:(0,_().FF)(o)},iconStyle:{fill:C().Ay.white},fadeIn:!0})}function fn(e){return{...nn,paddingBottom:"20%",minHeight:80,background:e.embedPlaceholderBackground}}function vn(e){return{width:"100%",minHeight:60,padding:14,paddingTop:12,overflow:"hidden",borderTop:`1px solid ${e.darkDividerColor}`}}function hn(e){return{fontSize:12,lineHeight:1.3,color:e.mediumTextColor,maxHeight:32,overflow:"hidden"}}function _n(e){let{fileData:t}=e;const o=(0,I().DP)(),n=t.user_name||t.modified_time?(0,p.jsx)(g().sA,{defaultMessage:"Last modified {hasUserName, select, true {by {userName}} other {}} {hasLastModifiedTime, select, true {{lastModifiedTime}} other {}}",id:"googleDriveBlock.pageDescription",values:{hasUserName:Boolean(t.user_name),userName:t.user_name,hasLastModifiedTime:Boolean(t.modified_time),lastModifiedTime:t.modified_time&&(0,Ko().v9)(t.modified_time,w().locale)}}):void 0;return(0,p.jsxs)("div",{style:hn(o),children:[t.trashed&&(0,p.jsx)(g().sA,{defaultMessage:"This file is in trash.",id:"googleDriveBlock.pageDeleted.caption"}),n]})}function bn(e){let{fileData:t}=e;const o=(0,I().DP)(),n=t.title,r=t.url,i=ae().qg(r).hostname;return(0,p.jsxs)("div",{style:vn(o),children:[n&&(0,p.jsx)(ke().A,{style:{marginBottom:2},children:n}),(0,p.jsx)(_n,{fileData:t}),(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:6},children:[t.icon&&(0,p.jsx)("div",{style:(a=t.icon,{flexShrink:0,backgroundImage:`url(${a})`,backgroundSize:"cover",width:16,height:16,marginRight:6})}),(0,p.jsx)(ke().A,{style:{color:o.regularTextColor},isSmall:!0,children:i})]})]});var a}function yn(e){let{fileData:t,store:o,driveStore:n}=e;const r=(0,I().DP)(),i=(0,d().uB)(n,Jo),a=t.thumbnail,s=(0,d().K8)((()=>i.state.error),[i]);return a&&!s?(0,p.jsx)("div",{style:nn,children:(0,p.jsx)("div",{style:on,children:(0,p.jsx)(we().A,{url:a,width:1e3,isAuthenticated:!0,permissionRecord:o.pointer,render:(e,o)=>{if(o){const e=ae().O$(o,{v:t.version});return(0,p.jsx)("img",{src:e,style:tn,onError:e=>{i.setState({error:!0,loading:!1})}})}e&&i.setState({error:!0,loading:!1})}})})}):(0,p.jsx)("div",{style:fn(r)})}function Sn(e,t){const{device:o}=e;return o.isMobile||t}async function wn(e,t,o,n,r){r.setState({loading:!0,error:!1});const i=await $o().Dx({environment:o,store:n,fileId:e,token:t});r.setState({loading:!1,error:!i||!!i.auth_error})}function kn(e,t,o,n){Zo().openGoogleDriveFilePicker({environment:t,accessToken:e.accessToken,callback:r=>{wn(r,e,t,o,n)}})}const In=(0,u().wt)("tex",{viewBox:"0 0 32 21",svg:(0,p.jsxs)("g",{children:[" ",(0,p.jsxs)("g",{id:"d7fc5246-3c04-467c-8f25-6c129c5642ac","data-name":"tex",children:[" ",(0,p.jsxs)("g",{id:"ec363c67-067d-4da0-8c27-f8d029e068bd","data-name":"E",children:[" ",(0,p.jsx)("path",{id:"e1948427-1829-4c96-a9f4-14a99a3d5b97","data-name":"path0 fill",d:"M497.33,497.82c-1.2,0-2.11-.06-3-0.06a0.5,0.5,0,0,0-.55.27c0,0.15.17,0.23,0.57,0.32a1.08,1.08,0,0,1,1.06,1.23c0,0.55,0,1,0,3.32s-0.08,4.43-.13,5.21c-0.08,1-.42,1.2-1.39,1.41a0.59,0.59,0,0,0-.53.32c0,0.21.23,0.25,0.59,0.25,0.7,0,1.08-.09,2.13-0.09,2.76,0,6,.13,6.21.13a0.7,0.7,0,0,0,.36-0.21,14.63,14.63,0,0,0,.68-2.07c0-.21,0-0.53-0.15-0.53a0.78,0.78,0,0,0-.48.55,2.41,2.41,0,0,1-1.54,1.41,9,9,0,0,1-1.8.15,10.57,10.57,0,0,1-1.69-.13,0.74,0.74,0,0,1-.38-0.44,7,7,0,0,1-.15-1.56c0-.78,0-2.49.06-2.93a0.26,0.26,0,0,1,.17-0.17c0.53,0,1.29,0,1.9,0,1.06,0.06,1.18.13,1.44,1a0.52,0.52,0,0,0,.32.4c0.15,0,.23-0.19.23-0.53s-0.06-.68-0.06-1.2,0-.84.06-1.35c0-.17,0-0.46-0.17-0.46a0.54,0.54,0,0,0-.36.42c-0.34.87-.38,0.93-2.09,0.93h-1.27a0.18,0.18,0,0,1-.17-0.17c0-.44,0-3.84.08-4.29a0.5,0.5,0,0,1,.27-0.55,21.09,21.09,0,0,1,2.7.1,1.4,1.4,0,0,1,1.25,1.31,0.54,0.54,0,0,0,.3.47,0.46,0.46,0,0,0,.3-0.51c0-.38,0-1.08,0-1.84a0.28,0.28,0,0,0-.17-0.23,14.12,14.12,0,0,1-1.75.08h-2.81Z",transform:"translate(-484.44 -490.06)"})," "]})," ",(0,p.jsxs)("g",{id:"8dfbf0a9-85f0-49da-99d8-6229354b9534","data-name":"T",children:[" ",(0,p.jsx)("path",{id:"8602b8e9-f5d6-42d3-88c6-0649b350ce04","data-name":"path1 fill",d:"M490.48,490.82c-2.18,0-3.91-.06-4.39-0.11a1.32,1.32,0,0,1-.68-0.34,0.85,0.85,0,0,0-.3-0.3,0.39,0.39,0,0,0-.28.32,19.85,19.85,0,0,1-.38,2.55,0.4,0.4,0,0,0,.23.42c0.08,0,.19,0,0.38-0.42a5.64,5.64,0,0,1,.61-1,1.72,1.72,0,0,1,1.35-.44c0.32,0,1.94,0,2.3.09a0.26,0.26,0,0,1,.17.25v2.26c0,1.46-.09,5.3-0.13,6.44-0.06,1.41-.11,1.71-1.41,2a0.47,0.47,0,0,0-.38.34c0,0.11.19,0.23,0.57,0.23s1.33-.13,2.22-0.13,2.13,0.1,2.28.1,0.53,0,.53-0.25a0.65,0.65,0,0,0-.49-0.34c-1.22-.25-1.31-0.53-1.39-1.33s-0.1-2.6-.1-4.81c0-1.63,0-3.61,0-4.5a0.35,0.35,0,0,1,.15-0.25c0.29-.06,2.26-0.06,2.6,0,1.12,0.06,1.37.15,1.5,1.16,0.06,0.48.15,0.61,0.28,0.61a0.43,0.43,0,0,0,.32-0.38,11.69,11.69,0,0,1,.42-2.2c0.1-.27,0-0.44-0.09-0.44a0.72,0.72,0,0,0-.28.13,2.49,2.49,0,0,1-1.33.32C494,490.8,491.49,490.82,490.48,490.82Z",transform:"translate(-484.44 -490.06)"})," "]})," ",(0,p.jsxs)("g",{id:"88168da7-a35d-4a6e-af2a-2bab78b9d062","data-name":"X",children:[" ",(0,p.jsx)("path",{id:"f33958e3-fb20-476c-b2a8-674ffe821a96","data-name":"path2 fill",d:"M504,491a0.52,0.52,0,0,0,.51.36,3,3,0,0,1,1.84,1.14,53.54,53.54,0,0,1,3,4.73,0.22,0.22,0,0,1-.06.27c-1.14,1.58-2.22,2.87-3,3.72a4.47,4.47,0,0,1-2.22,1.27c-0.51.1-.7,0.27-0.7,0.44s0.15,0.21.51,0.21,1.2-.1,2-0.1c0.61,0,1.48.06,2,.06,0.25,0,.46-0.08.46-0.27a0.53,0.53,0,0,0-.46-0.32c-0.74-.27-1-0.47-0.17-1.82,0.53-.78,1.44-2,2.05-2.72a0.15,0.15,0,0,1,.19,0c0.23,0.21,2.09,3.17,2.53,4a0.26,0.26,0,0,1-.08.34,3.18,3.18,0,0,1-.68.23c-0.32.11-.42,0.19-0.42,0.34s0.11,0.25.47,0.25,1-.08,1.58-0.08c1.12,0,2.17.11,2.79,0.11,0.42,0,.57-0.09.57-0.25a0.49,0.49,0,0,0-.44-0.36,3.37,3.37,0,0,1-2.34-1.73c-0.49-.67-2.7-4-2.83-4.31a0.45,0.45,0,0,1,0-.23c0.91-1.27,2.17-2.7,2.85-3.52a3.79,3.79,0,0,1,2.38-1.41,0.5,0.5,0,0,0,.44-0.34,0.44,0.44,0,0,0-.46-0.21c-0.44,0-1.56.06-2,.06s-1.12,0-1.69,0c-0.36,0-.53.1-0.53,0.25a0.49,0.49,0,0,0,.48.34c0.67,0.13,1,.34.72,0.89a32.86,32.86,0,0,1-2.53,3.44,0.14,0.14,0,0,1-.19,0,33.44,33.44,0,0,1-2.3-3.63c-0.21-.38,0-0.59.34-0.68s0.46-.21.46-0.36a0.43,0.43,0,0,0-.47-0.21c-0.55,0-.91,0-1.63,0s-2-.1-2.39-0.1S504,490.84,504,491Z",transform:"translate(-484.44 -490.06)"})," "]})," "]})," "]})});function An(e,t){const n=(0,k().Y0)(),i=(0,I().DP)(),a=(0,k().v3)(),{store:s}=e,l=(0,v().bx)(s,e.disabled),u=(0,v().pW)(s),m=(0,c.useRef)(null),[f,h]=(0,c.useState)(!1),[_,b]=(0,c.useState)(!1),[y,S]=(0,c.useState)(!1),w=(0,d().K8)((()=>{const e=s.getBlockTitleStore().getValue();return ie().k4p(e)}),[s]),A=Boolean(w),x=(0,c.useCallback)((()=>{h(!0)}),[]),T=(0,c.useCallback)((()=>{h(!1)}),[]),M=(0,c.useCallback)((()=>{b(!0)}),[]),P=(0,c.useCallback)((()=>{b(!1)}),[]),B=(0,c.useCallback)((()=>{S(!0)}),[]),R=(0,c.useCallback)((()=>{S(!1),de().Lt({environment:a,store:s})}),[a,s]),E=(0,c.useCallback)((()=>{!function(e,t){Io().vd(e,"equation_block_edit",t)}(a,{equation:w})}),[a,w]),D=(0,c.useCallback)((e=>{Ft().createAndCommit({userAction:"EquationBlock.handleChange",environment:a,canUndo:!0,perform:t=>{Yo().KY({environment:a,store:s.getBlockTitleStore(),value:ie().x9d(e),transaction:t})}})}),[a,s]),N=(0,c.useCallback)((()=>{y?R():B()}),[R,B,y]),L=(0,d().K8)((()=>o(197194).vG({environment:a,equation:w,displayMode:"block"})),[a,w]),F=(0,I().IS)((e=>{const t=n.isMobile||_||f;return{container:{display:"flex",padding:"4px 8px",width:"100%",flexDirection:A?"column":void 0,overflow:A?"auto":void 0,color:A?void 0:C().Ay.contentPlaceholder,...u},error:{background:e.equationErrorPlaceholderBackground},actionMenuButton:{position:"absolute",top:4,right:4,color:e.mediumTextColor,opacity:t?1:0},button:{position:"relative",width:"100%",borderRadius:4,background:A?void 0:e.surface.wash}}}),[u,n.isMobile,f,_,A]),U=y?{isOpen:!0,equationValue:w,error:L}:{isOpen:!1,equationValue:void 0,error:void 0},O=!l,V=(0,p.jsxs)(j().s,{ref:m,allowSelectionWithin:!0,style:{display:"flex",position:"relative"},children:[(0,p.jsx)(r().u2,{dependency:o(354584).y,children:e=>(0,p.jsx)(o(548901).A,{...U,Prism:e,displayMode:"block",disabled:O,origin:(0,p.jsxs)(q().A,{onMouseMove:M,onMouseLeave:P,onClick:B,style:F.button,children:[w?(0,p.jsx)(o(145192).A,{theme:i,display:"block",equation:w,style:F.container,errorStyle:{...F.container,...F.error}}):(0,p.jsx)(o(291050).Ay,{iconSvg:In,iconStyle:{width:28,height:28,marginRight:8},style:{background:void 0},children:(0,p.jsx)(g().sA,{defaultMessage:"Add a TeX equation",id:"equationBlock.empty.placeholder"})},"button"),l&&(0,p.jsx)(ge().A,{onFocus:x,onBlur:T,store:s,tooltipContent:(0,p.jsx)(g().sA,{defaultMessage:"Rename, delete, and more…",id:"equationBlock.actions.tooltip"}),style:F.actionMenuButton,fadeIn:!1})]}),onDismiss:R,onChange:D,onSubmit:E})}),(0,p.jsx)(ve().A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,hideIfSidebarOrMarginCommentsVisible:!0})]});return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"equation",getBlockStore:()=>e.store,getNode:()=>m.current,handleCreated:B,edit:B,activate:N})),[N,B,e.store]),V)}const xn=c.memo(c.forwardRef(An),f().A),Cn=(0,u().wt)("excalidraw",{viewBox:"0 0 32 32",svg:(0,p.jsxs)("g",{children:[(0,p.jsx)("path",{d:"m14.2933 1.41174c-.8308.66246-2.1108 1.78526-3.1214 2.75088l-.7972.75228.146.98807c.0786.53895.2246 1.59439.3144 2.33544.101.74105.2021 1.43719.2358 1.53825.0449.13473 0 .2021-.1235.2021-.2134 0-.2246-.05614.3593 1.79654.2133.7073.4154 1.3586.4379 1.4259.0224.0786.1122.1123.2133.0786.1011-.0449.1572-.1347.1235-.2133-.0337-.0898.0225-.1797.1123-.2133.1235-.045.1123-.1348-.0786-.4604-.3032-.5053-1.0779-4.81685-1.1228-6.20913-.0337-.98807-.0337-.9993.3817-1.5607.4043-.55018 1.3362-1.38105 2.7734-2.43649.4042-.30316.8084-.64.9207-.75228.1684-.20211.247-.14597 1.6617 1.35859.8197.86456 1.7292 1.75158 2.0211 1.97614l.5389.40422-.4154.87579c-.2246.47157-1.134 2.29052-2.0323 4.01966-1.8751 3.6379-1.4933 3.2898-3.6716 3.3235l-1.4147.0112-.4716.539c-.494.5726-.5614.7859-.3256 1.1452.0898.1235.1572.3257.1572.4492 0 .2021.0786.2358.5277.2582.2807.0112.539.0449.5726.0786.0337.0337.0786.7298.1123 1.5495l.0449 1.4821-.7522 1.6168c-1.2464 2.6948-1.74039 3.9299-1.74039 4.3341 0 .2133.04491.3929.08982.3929.11227 0 .11227-.0112 4.68207-9.5438 2.1221-4.4239 4.132-8.5895 4.4688-9.27441.3369-.68491.64-1.31369.6625-1.40351.0224-.10105-.7523-.87579-1.9874-1.96491-1.1116-.98807-2.0884-1.88632-2.1782-1.98737-.2583-.314389-.64-.213336-1.325.33684zm.3818 12.91226c-.5165.9993-.539 1.0106-1.9537 1.0779-1.2463.0674-1.2688.0562-1.2688-.1796 0-.1348-.0449-.3144-.101-.4042-.0674-.1011-.0225-.2807.1347-.5278l.247-.3817h1.1228c.6176-.0112 1.325-.0562 1.572-.1011s.4603-.0673.4828-.0561c.0224.0112-.0898.2695-.2358.5726zm-.9432 1.7965c-.0898.2358-.3256.7298-.5165 1.1004-.3143.6287-.348.6512-.4266.393-.0449-.1572-.0786-.6176-.0898-1.033-.0113-.8197-.0337-.8084.9094-.8646l.3032-.0112z"}),(0,p.jsx)("path",{d:"m14.6302 4.08401c-.2021.14597-.2583.29193-.2583.66246 0 .43789.0337.50526.3369.62877s.3817.11228.7298-.12351c.4604-.31439.4716-.39298.1348-.89824-.292-.4379-.5839-.51649-.9432-.26948zm.64.40421c.1796.31439.0674.55018-.2695.55018-.3031 0-.4379-.30316-.2695-.60632.1348-.24701.393-.22456.539.05614z"}),(0,p.jsx)("path",{d:"m21.6702 6.61034c0 .05614-.0674.11228-.146.11228-.0674 0-.2582.31439-.4042.69614-.4491 1.16772-4.9404 10.04914-4.9516 9.76844 0-.146-.0673-.247-.1796-.247-.1572 0-.1797.0898-.1123.5277.0674.5053.0224.6175-1.5719 3.7165-.8983 1.7628-1.8639 3.6042-2.1446 4.0982-.2919.5165-.5165 1.0779-.5389 1.3137-.0337.4042.0112.4604.988 1.3025.5614.494 1.28 1.1115 1.5944 1.3922 1.4147 1.2913 2.0772 1.8078 2.2569 1.7741.2694-.0449 4.435-4.4127 4.4463-4.6597 0-.1122-.2021-1.8189-.4492-3.7951-.4266-3.3684-.8308-7.3094-.7859-7.6912.0337-.2358-.1348-1.4259-.2583-1.9424-.101-.4043-.0561-.5727.7523-2.4141.4716-1.0891 1.0891-2.42524 1.3586-2.96419.2583-.53894.4828-1.01052.4828-1.04421 0-.03368-.0786-.05614-.1684-.05614s-.1684.04492-.1684.11228zm-2.5825 8.38736c.1235.786.3705 2.6723.5502 4.1881.3481 2.7845.7523 5.8723.8646 6.6582.0673.393.0224.4716-.7074 1.28-1.2688 1.426-2.6162 2.8295-3.0765 3.1888l-.4267.3368-2.1894-2.0435c-2.0211-1.8638-2.1895-2.0547-2.066-2.2793.0674-.1235.64-1.1677 1.2688-2.3129.6287-1.1453 1.4596-2.6723 1.8414-3.3909.3929-.7299.7522-1.3586.8196-1.3923.0786-.0449.1011 1.0891.0786 3.5032-.0449 3.6042-.0337 3.6154.3256 3.5368.0449 0 .0786-1.819.0786-4.0309v-4.0196l1.179-2.3579c.6512-1.3025 1.1901-2.3467 1.2126-2.3355.0225.0113.1347.6737.247 1.4709z"})]})}),Tn=(0,g().YK)({embedButtonText:{defaultMessage:"Embed Excalidraw",id:"excalidrawBlock.embeds.button.label"}});function Mn(e,t){const o=(0,g().tz)(),n=(0,c.useRef)(null),r=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"excalidraw",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:r,ref:n,store:e.store,iconSvg:Cn,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with Excalidraw whiteboards.",id:"excalidrawBlock.embeds.caption"}),embedButtonText:o.formatMessage(Tn.embedButtonText),urlInputPlaceholder:"https://excalidraw.com/…",children:(0,p.jsx)(g().sA,{defaultMessage:"Embed Excalidraw",id:"excalidrawBlock.placeholder"})}))}const Pn=c.memo(c.forwardRef(Mn),f().A);var Bn=()=>o(361873);var Rn=()=>o(797265),En=()=>o(962730);const Dn=(0,g().YK)({tombstoneLabelNoPermission:{id:"factoryBlock.tombstoneLabelNoPermission",defaultMessage:"Template buttons are no longer supported"},tombstoneLabel:{id:"factoryBlock.tombstoneLabel",defaultMessage:"Template buttons are no longer supported. Click to turn into a button block."},titlePlaceholder:{id:"factoryBlock.titlePlaceholder",defaultMessage:"New button"}});function Nn(e,t){const{store:n,disabled:r}=e,i=(0,k().v3)(),a=(0,c.useRef)(null),s=(0,o(416504).P)(),l=(0,g().tz)(),u=(0,d().K8)((()=>{var e;return null===(e=n.getModel())||void 0===e?void 0:e.getRenderTitle({getRecordModel:n.getRecordModel,userTimeZone:s,intl:l})}),[l,n,s]),m=(0,d().K8)((()=>r||!n.canEdit()),[n,r]),f=(0,c.useCallback)((async()=>{const e=await Promise.resolve().then(o.bind(o,87017));Ft().createAndCommit({userAction:"FactoryBlock.handleClickUpgrade",environment:i,canUndo:!0,perform:t=>{var o;const r=e.duplicateBlocks({environment:i,blocks:[n],transaction:t,preferDuplicateLocation:"local"});Rn().ZL({environment:i,blocks:[n],transaction:t}),function(e,t){Io().u4({environment:e,event:{eventName:"factory_block_upgrade",eventProperties:t}})}(i,{factory_block_id:n.id,button_block_id:null===(o=r[0])||void 0===o?void 0:o.id})}})}),[i,n]),h=(0,I().IS)((e=>({iconStyle:{fill:e.errorText},buttonStyle:{overflowX:"auto",...m?{cursor:"not-allowed"}:{},...T().RC,fontWeight:500,margin:"2px 0"}})),[m]),_=(0,p.jsx)(o(859428).A,{placement:En().W.Bottom,renderTooltip:()=>(0,p.jsx)(g().sA,{...m?Dn.tombstoneLabelNoPermission:Dn.tombstoneLabel}),render:e=>(0,p.jsx)(W().A,{size:"lg",disabled:m,disabledFeedback:!0,style:h.buttonStyle,ref:a,icon:o(693954).Q,iconStyle:h.iconStyle,onClick:f,...e,children:u??(0,p.jsx)(g().sA,{...Dn.titlePlaceholder})})});return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"factory",getBlockStore:()=>e.store,getNode:()=>{var e;return(null===(e=a.current)||void 0===e?void 0:e.parentElement)??null}})),[e.store]),_)}const Ln=c.memo(c.forwardRef(Nn),f().A),Fn=(0,u().wt)("figma",{viewBox:"0 0 36 55",svg:(0,p.jsx)("path",{d:"M19.5,27.5 C19.5,23.08142 23.08142,19.5 27.5,19.5 C31.9186,19.5 35.5,23.08142 35.5,27.5 C35.5,31.9186 31.9186,35.5 27.5,35.5 C23.08142,35.5 19.5,31.9186 19.5,27.5 Z M0.5,46.5 C0.5,42.08142 4.08142,38.5 8.5,38.5 L16.5,38.5 L16.5,46.5 C16.5,50.9186 12.9186,54.5 8.5,54.5 C4.08142,54.5 0.5,50.9186 0.5,46.5 Z M19.5,16.5 L19.5,0.5 L27.5,0.5 C31.9186,0.5 35.5,4.08142 35.5,8.5 C35.5,12.9186 31.9186,16.5 27.5,16.5 L19.5,16.5 Z M8.5,16.5 C4.08142,16.5 0.5,12.9186 0.5,8.5 C0.5,4.08142 4.08142,0.5 8.5,0.5 L16.5,0.5 L16.5,16.5 L8.5,16.5 Z M8.5,35.5 C4.08142,35.5 0.5,31.9186 0.5,27.5 C0.5,23.08142 4.08142,19.5 8.5,19.5 L16.5,19.5 L16.5,35.5 L8.5,35.5 Z"})});function Un(e,t){const o=(0,c.useRef)(null),n=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"figma",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,ref:o,blockResizerStore:n,store:e.store,iconSvg:Fn,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with any public Figma shareable link",id:"figmaBlock.caption"}),children:(0,p.jsx)(g().sA,{defaultMessage:"Embed Figma",id:"figmaBlock.placeholder"})}))}const On=c.memo(c.forwardRef(Un),f().A);var Vn=()=>o(489436);const jn=(0,u().wt)("framer",{viewBox:"0 0 32 32",svg:(0,p.jsx)("g",{children:(0,p.jsx)("path",{d:"m9 6h14v7h-7zm0 7h7l7 7h-14zm0 7h7v7z"})})}),zn=(0,g().YK)({embedButtonText:{defaultMessage:"Embed Framer",id:"framerBlock.embedFramer.button.label"}});function qn(e,t){const o=(0,g().tz)(),n=(0,c.useRef)(null),r=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"framer",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:r,ref:n,store:e.store,iconSvg:jn,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with Framer prototypes",id:"framerBlock.linkInput.caption"}),embedButtonText:o.formatMessage(zn.embedButtonText),urlInputPlaceholder:"https://framer.com/…",children:(0,p.jsx)(g().sA,{defaultMessage:"Embed a Framer prototype",id:"framerBlock.placeholder"})}))}const Hn=c.memo(c.forwardRef(qn),f().A);const Wn=(0,g().YK)({embedButtonText:{defaultMessage:"Embed Gist",id:"gistBlock.embedButton.label"}});function Kn(e,t){const n=(0,g().tz)(),r=(0,c.useRef)(null),i=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"gist",getNode:()=>{const e=r.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:i,ref:r,store:e.store,iconSvg:o(595797).F,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with links to Gists on GitHub",id:"gistBlock.linkInput.caption"}),embedButtonText:n.formatMessage(Wn.embedButtonText),urlInputPlaceholder:"https://gist.github.com/…",children:(0,p.jsx)(g().sA,{defaultMessage:"Embed a Gist",id:"gistBlock.placeholder"})}))}const Gn=c.memo(c.forwardRef(Kn),f().A);var $n=()=>o(895007);const Yn=(0,u().wt)("hex",{viewBox:"0 0 92 92",svg:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("path",{fill:"#fff",d:"M0 0h92v92H0z"}),(0,p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.8 34v8.368h-2.4V34H15v24h8.4V46h2.4v12h8.4V34h-8.4Zm10.7995 24h19.2v-9.6h-8.4v6h-2.4V46h10.8V34h-19.2v24Zm8.4-15.6v-4.8h2.4v4.8h-2.4Zm24.0007 0V34h8.4v6l-3.6 4.2 3.6 4.2V58h-8.4V45.968h-2.4V58h-8.4v-9.6l3.6-4.2-3.6-4.2v-6h8.4v8.4h2.4Z",fill:"#473982"})]})}),Qn=(0,g().YK)({embedButtonText:{defaultMessage:"Embed Hex",id:"hexBlock.embeds.button.label"}});function Zn(e,t){const o=(0,g().tz)(),n=(0,c.useRef)(null),r=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"hex",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:r,ref:n,store:e.store,iconSvg:Yn,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with Hex cell links with public access.",id:"hexBlock.embeds.caption"}),embedButtonText:o.formatMessage(Qn.embedButtonText),urlInputPlaceholder:"https://hex.tech/…",children:(0,p.jsx)(g().sA,{defaultMessage:"Embed Hex",id:"hexBlock.placeholder"})}))}const Xn=c.memo(c.forwardRef(Zn),f().A),Jn=(0,u().wt)("picture",{viewBox:"0 0 30 30",svg:(0,p.jsx)("path",{d:"M1,4v22h28V4H1z M27,24H3V6h24V24z M18,10l-5,6l-2-2l-6,8h20L18,10z M11.216,17.045l1.918,1.918l4.576-5.491L21.518,20H9 L11.216,17.045z M7,12c1.104,0,2-0.896,2-2S8.104,8,7,8s-2,0.896-2,2S5.896,12,7,12z"})});var er=()=>o(675074),tr=()=>o(436572),or=()=>o(500507),nr=()=>o(186445),rr=()=>o(937182);const ir=(0,g().YK)({urlPlaceholder:{defaultMessage:"Paste the image link…",id:"imageBlock.linkInput.placeholder"},embedButtonText:{defaultMessage:"Embed image",id:"imageBlock.embedImage.button.label"}}),ar=[{type:"file",imageUpload:!0},{type:"embed"},{type:"unsplash"}],sr=[...ar,{type:"giphy"}];function lr(e,t){const n=(0,g().tz)(),r=(0,k().v3)(),i=(0,c.useRef)(null),a=(0,d().uB)(e.blockResizerStore,h().A),s=(0,v().bx)(e.store,e.disabled),l=(0,d().K8)((()=>o(508496).default.checkGate({gateName:"enable_giphy_feature_gate"})?sr:ar),[]);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"image",getNode:()=>i.current,getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)("div",{ref:i,children:(0,p.jsx)(or().V,{type:rr().Dn,dropTargetKey:`image-block-${e.store.id}`,onDropFile:s?t=>{if("invalidFileDrop"===t.type)return void tr().D6({label:(0,p.jsx)(g().sA,{id:"imageBlock.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})});const o=nr().y0(r);er().QM({environment:r,store:e.store,file:t.file,pageWidth:o,preferredType:e.store.getType()})}:ho().lQ,children:(0,p.jsx)(_().Ay,{...e,blockResizerStore:a,store:e.store,urlInputPlaceholder:n.formatMessage(ir.urlPlaceholder),iconSvg:Jn,preserveScale:!0,mediaMenuCurrentTab:"file",mediaMenuTabs:l,mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with any image from the web",id:"imageBlock.linkInput.caption"}),embedButtonText:n.formatMessage(ir.embedButtonText),popupWidth:540,maxHeight:420,children:(0,p.jsx)(g().sA,{defaultMessage:"Add an image",id:"imageBlock.placeholder"})})})}))}const cr=c.memo(c.forwardRef(lr),f().A),dr=(0,u().wt)("invision",{viewBox:"0 0 215 182",svg:(0,p.jsxs)("g",{stroke:"none",strokeWidth:"1",children:[" ",(0,p.jsxs)("g",{transform:"translate(0.000000, -222.000000)",children:[" ",(0,p.jsxs)("g",{children:[" ",(0,p.jsx)("path",{d:"M98.9196618,401.249534 L67.23738,401.249534 C69.0283748,394.069758 70.787323,387.019973 72.4415558,380.387695 C68.8636285,384.425558 65.4170469,389.032134 61.2582199,392.866884 C50.6503674,402.647395 38.1012175,405.941417 24.0797327,402.23079 C13.9819165,399.55829 7.92421985,391.917675 6.61663119,381.562133 C5.46837247,372.464529 7.41824578,363.782628 9.57890401,355.080416 C13.7219334,338.391847 17.8017725,321.687933 21.9028255,304.989434 C22.0454551,304.409889 22.1339216,303.817254 22.2995706,302.96283 L-0.0003,302.96283 C2.30975824,294.403698 4.53721769,286.151943 6.78995327,277.806756 L60.5229552,277.806756 C60.3491817,278.642223 60.2273147,279.357627 60.0512844,280.059943 C53.0231647,308.023022 45.9535198,335.97572 39.0057421,363.95911 C38.1427426,367.435481 37.6331576,371.059899 37.479244,374.638277 C37.2535643,379.877659 40.2013936,382.783512 45.4935844,382.824134 C53.5440336,382.885068 60.4588621,379.769784 66.3955944,374.554776 C72.743064,368.979131 77.1564578,362.201967 79.1663619,353.808936 C83.0828089,337.452117 87.2971531,321.167064 91.379249,304.850416 C91.5232327,304.276286 91.5715282,303.678686 91.6933952,302.909569 L69.2513464,302.909569 C69.6155936,301.479211 69.9089773,300.269116 70.2316994,299.067145 C71.9843286,292.540938 73.758623,286.020597 75.4882328,279.488522 C75.7789084,278.389461 76.0555918,277.645621 77.5008451,277.651037 C92.8448135,277.709714 108.18833,277.692562 123.531847,277.702492 C123.75166,277.702492 123.97102,277.781931 124.411096,277.867238 C122.458966,286.803255 120.511801,295.717606 118.565087,304.631958 C118.656261,304.671226 118.747887,304.710043 118.838611,304.749311 C120.277996,302.605804 121.639297,300.404524 123.17076,298.328721 C129.752485,289.408051 137.659853,281.997178 148.043831,277.728671 C168.022811,269.515732 188.005402,280.685076 192.142563,302.283534 C193.975534,311.851454 193.064691,321.305631 190.553778,330.628914 C187.175803,343.16994 183.622249,355.664024 180.318748,368.224458 C179.661569,370.722733 179.467484,373.448493 179.624106,376.035235 C179.988804,382.073072 185.463796,384.737899 190.442292,381.268749 C192.360119,379.932273 194.120421,378.060937 195.308399,376.052387 C197.438816,372.450086 199.08989,368.563429 200.922861,364.787355 C201.278532,364.054347 201.552056,363.281168 201.937066,362.346854 C206.06836,363.936993 210.106223,365.491476 214.381049,367.137584 C210.178891,380.337594 205.268551,393.058261 192.248181,399.864312 C181.021966,405.732889 169.389528,405.395272 158.535233,398.5987 C151.013326,393.889214 148.484358,386.186312 148.027131,377.697592 C147.620005,370.133709 149.656088,362.968376 151.693976,355.800786 C154.30148,346.629159 157.031754,337.485517 159.315182,328.232646 C160.272516,324.353211 160.657977,320.20973 160.534756,316.210233 C160.26394,307.425422 153.949871,301.479211 145.147908,301.094201 C135.701404,300.681207 128.636273,304.704626 123.601357,312.562796 C119.514296,318.940958 117.721496,326.162711 115.917863,333.384916 C110.367494,355.603993 104.804488,377.819911 99.2455434,400.036731 C99.157077,400.390597 99.0564238,400.741303 98.9196618,401.249534 Z M28.7006165,241.023028 C28.6658618,230.356047 37.1446512,221.982425 47.9637399,222.000028 C58.6717942,222.017631 67.1365914,230.335285 67.169992,240.873176 C67.2033927,251.467488 58.5991253,259.984192 47.8874602,259.958916 C37.2349231,259.934091 28.7349198,251.545573 28.7006165,241.023028 Z"})," "]})," "]})," "]})}),ur=(0,g().YK)({embedButtonText:{defaultMessage:"Embed Invision",id:"invisionBlock.embeds.button.label"}});function pr(e,t){const o=(0,g().tz)(),n=(0,c.useRef)(null),r=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"invision",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:r,ref:n,store:e.store,iconSvg:dr,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with Invision projects",id:"invisionBlock.embeds.caption"}),embedButtonText:o.formatMessage(ur.embedButtonText),urlInputPlaceholder:"https://invis.io/…",children:(0,p.jsx)(g().sA,{defaultMessage:"Embed an Invision project",id:"invisionBlock.placeholder"})}))}const mr=c.memo(c.forwardRef(pr),f().A);var gr=()=>o(106628),fr=()=>o(361330),vr=()=>o(351360);class hr extends bo().default{getInitialState(){return{query:""}}}const _r=hr;var br=()=>o(251126),yr=()=>o(545805),Sr=()=>o(519831),wr=()=>o(222299),kr=()=>o(575301),Ir=()=>o(630116),Ar=()=>o(939740),xr=()=>o(64e3),Cr=()=>o(305390),Tr=()=>o(790748),Mr=()=>o(556544),Pr=()=>o(377586),Br=()=>o(297872),Rr=()=>o(623580),Er=()=>o(14235);function Dr(e){const{autocompleteStore:t,disableMouseCapture:o,focus:n,format:r,inputPlaceholder:i,inputStyle:a,isOpen:s,onBgClick:l,onInputBlur:u,onInputClick:m,onInputFocus:g,onQueryUpdate:f,popupStyle:v,preventCaptureEsc:h,queryUpdateDebounce:_,renderPopup:b}=e,y=(0,k().Y0)(),S=(0,d().K8)((()=>t.state.query),[t]);(0,Tr().b)(Mr().A,(()=>({isOpen:s})),[s]);const w=(0,c.useMemo)((()=>ho().sg((e=>{f&&f({query:e,autocompleteStore:t})}),_)),[f,_,t]);return(0,p.jsx)(Er().Ay,{alignmentToOrigin:En().C.Start,disableDarkOverlayBackground:y.isPhone,disableMouseCapture:o,onDismiss:l,open:s,origin:(0,p.jsx)(Nr,{isOpen:s,value:S,inputPlaceholder:i,focus:n,handleInputChange:e=>{const o=e.target.value;t.setState({...t.state,query:o}),w(o)},handleInputClick:m,handleInputFocus:g,handleInputBlur:u,inputStyle:a,format:r}),originGap:4,placementToOrigin:En().W.Bottom,popupType:y.isPhone?Pr().n.SlideUp:Pr().n.Popup,preventCaptureEsc:h,render:b,style:v})}function Nr(e){const{focus:t,format:o,handleInputChange:n,inputPlaceholder:r,inputStyle:i,isOpen:a,handleInputBlur:s,handleInputClick:l,handleInputFocus:c,value:d}=e;return(0,p.jsx)(Br().A,{allowMenuList:!0,capture:a,render:e=>(0,p.jsx)(j().s,{allowSelectionWithin:!0,...e,children:(0,p.jsx)(Rr().A,{focus:t,format:void 0!==o?o:Rr().C.Transparent,onBlur:s,onChange:n,onClick:l,onFocus:c,placeholder:r,style:i,value:d})})})}const Lr=(0,g().YK)({inputPlaceholder:{defaultMessage:"Search for a database…",id:"linkToCollectionBlock.input.placeholder"}});function Fr(e){const t=(0,g().tz)(),o=(0,k().v3)(),n=(0,k().Y0)(),r=(0,c.useRef)(!1),i=(0,kr().o_)(),a=(0,c.useCallback)((()=>{const t=(e.results||[]).map((t=>{const n=Ir().md.createChildStore(e.store,{table:Sr().Vl,id:t});return{key:t,render:e=>(0,p.jsx)(Cr().A,{...e,store:n}),action:()=>{r.current||(r.current=!0,Ft().createAndCommit({userAction:"LinkToCollectionBlock.menuListItem",environment:o,canUndo:!0,perform:t=>{const r=wr().oT({environment:o,store:e.store,collectionStore:n,collectionViewStore:void 0,transaction:t});r&&de().td({environment:o,stores:[r]})}}))}}}));let a,s;return a=e.results&&0===t.length?(0,p.jsx)(tt().A,{title:(0,p.jsx)(g().sA,{defaultMessage:"Select a database",id:"linkToCollectionBlock.menuItem.noResults.title"}),loading:!e.ready,children:(0,p.jsx)(xr().A,{title:(0,p.jsx)(g().sA,{defaultMessage:"No results",id:"linkToCollectionBlock.menuItem.noResults.label"})})}):(0,p.jsx)(Ar().Ay,{type:Ar().Oh.Vertical,initialFocus:0,sections:[{key:0,render:t=>(0,p.jsx)(tt().A,{...t,title:(0,p.jsx)(g().sA,{defaultMessage:"Select a database",id:"linkToCollectionBlock.menuItem.showResults.title"}),loading:!e.ready}),items:t}]}),s=n.isPhone?{menuType:lt().gu.ActionSheet,disableBottomPadding:!0,maxHeight:`calc(70vh - ${i}px)`}:{menuType:lt().gu.Popup,width:460,maxHeight:"40vh"},(0,p.jsx)(Bt().A,{...s,children:a})}),[n.isPhone,o,e.ready,e.results,e.store,i]),s=(0,c.useCallback)((()=>{ue().clear({environment:o}),r.current||(r.current=!0,Ft().createAndCommit({userAction:"LinkToCollectionBlock.handleBlur",environment:o,canUndo:!0,perform:t=>{Rn().TF({store:e.store,transaction:t})}}))}),[o,e.store]);return(0,p.jsx)(Dr,{loading:!e.ready,isOpen:!0,autocompleteStore:e.autocompleteStore,queryUpdateDebounce:fr().tu,inputPlaceholder:t.formatMessage(Lr.inputPlaceholder),focus:!0,inputStyle:{...Ur(),borderBottom:void 0},onBgClick:s,renderPopup:a})}function Ur(){return{lineHeight:1.3}}function Or(e,t){const n=(0,k().v3)(),r=(0,c.useRef)(null),i=(0,d().uB)(void 0,_r),a=(0,d().K8)((()=>i.state.query),[i]),s=(0,d().K8)((()=>{const t=o(24157).default.state;return Boolean("editing"===t.mode&&(0,o(231722).KP)(t.multiSelection)&&t.multiSelection.start.store.id===e.store.id)}),[e.store.id]);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"link_to_collection",getNode:()=>r.current,getBlockStore:()=>e.store,handleCreated(){de().A({environment:n,phase:jo().SelectionPhase.Editing}),ue().setSelection({store:e.store,selection:void 0})}})),[n,e.store]),s?(0,p.jsx)(br().A,{request:a,performRequest:t=>async function(e,t,o){const n=await gr().T.searchActions.load(),{currentSpaceStore:r}=vr().default.state,i=await n.searchCollections(o,{query:e,limit:20,source:"link_to_collection_block",spaceStore:r,searchSessionId:void 0});return i.results}(t,e.store,n),debounce:fr().tu,render:(t,o,n)=>(0,p.jsx)(yr().A,{debugName:"LinkToCollectionBlock",capture:s,children:(0,p.jsx)(Fr,{store:e.store,results:o,ready:n,autocompleteStore:i})})}):null)}const Vr=c.memo(c.forwardRef(Or),f().A);o(672577);var jr=()=>o(68263),zr=()=>o(179034),qr=()=>o(731320);const Hr=(0,g().YK)({inputPlaceholder:{defaultMessage:"Search for a page…",id:"linkToPageBlock.searchPlaceholder"}});function Wr(e){const t=(0,g().tz)(),o=(0,k().v3)(),n=(0,k().Y0)(),r=(0,kr().o_)(),i=(0,c.useRef)(!1),a=(0,c.useCallback)((()=>{const t=(e.results||[]).map((t=>{const n=Ir().Bv.createChildStore(e.store,{table:zr().ev,id:t});return{key:t,render:e=>(0,p.jsx)(Cr().A,{...e,store:n,showVerifiedPageBadge:!0}),action:()=>{i.current||(i.current=!0,Ft().createAndCommit({userAction:"LinkToPageBlock.menuListItem",environment:o,canUndo:!0,perform:t=>{const r=wr().bh({environment:o,store:e.store,targetStore:n,transaction:t});r&&de().td({environment:o,stores:[r]})}}))}}}));let a,s;return a=e.results&&0===t.length?(0,p.jsx)(tt().A,{title:(0,p.jsx)(g().sA,{defaultMessage:"Select a page",id:"linkToPageBlock.selectPrompt"}),loading:!e.ready,children:(0,p.jsx)(xr().A,{title:(0,p.jsx)(g().sA,{defaultMessage:"No results",id:"linkToPageBlock.noSearchResults"})})}):(0,p.jsx)(Ar().Ay,{type:Ar().Oh.Vertical,initialFocus:0,sections:[{key:0,render:t=>(0,p.jsx)(tt().A,{...t,title:(0,p.jsx)(g().sA,{defaultMessage:"Select a page",id:"linkToPageBlock.selectPrompt.withContents"}),loading:!e.ready}),items:t}]}),s=n.isPhone?{menuType:lt().gu.ActionSheet,disableBottomPadding:!0,maxHeight:`calc(70vh - ${r}px)`}:{menuType:lt().gu.Popup,width:460,maxHeight:"40vh"},(0,p.jsx)(Bt().A,{...s,children:a})}),[o,n.isPhone,r,e.ready,e.results,e.store]),s=(0,c.useCallback)((()=>{ue().clear({environment:o}),i.current||(i.current=!0,Ft().createAndCommit({userAction:"LinkToPageBlock.handleBlur",environment:o,canUndo:!0,perform:t=>{Rn().TF({store:e.store,transaction:t})}}))}),[o,e.store]);return(0,p.jsx)(Dr,{loading:!e.ready,isOpen:!0,autocompleteStore:e.autocompleteStore,queryUpdateDebounce:fr().tu,inputPlaceholder:t.formatMessage(Hr.inputPlaceholder),focus:!0,inputStyle:{...Kr(),borderBottom:void 0},onBgClick:s,renderPopup:a})}function Kr(){return{lineHeight:1.3}}function Gr(e,t){const n=(0,k().Y0)(),r=(0,k().v3)(),i=(0,c.useRef)(null),a=(0,d().uB)(void 0,_r),s=(0,d().K8)((()=>a.state.query),[a]);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"link_to_page",getNode:()=>i.current,getBlockStore:()=>e.store,handleCreated(){de().A({environment:r,phase:jo().SelectionPhase.Editing}),ue().setSelection({store:e.store,selection:void 0}),n.isMobile&&o(574012).A.onShow((()=>o(620689).pS(r)))}})),[n.isMobile,r,e.store]),(0,p.jsx)(br().A,{request:s,performRequest:t=>async function(e,t,o){const{currentSpaceStore:n,mainEditorCurrentBlockStore:r}=vr().default.state,i=(0,qr().i0)(t).find((e=>{let{permissionItem:t}=e;return(0,jr().FP)(t)}));if(n||i){if(!e)return i&&!n&&r?[r.id]:nr().xP(o).map((e=>e.id));{const t=await gr().T.searchActions.load();if(n){return(await t.searchPageIds({environment:o,query:e,limit:20,spaceId:n.id,requireEditPermissions:!1,excludeTemplates:!1,source:"link_to_page_block",boostRecentlyViewedPages:!0})).results}if(i&&i.from.table===zr().ev){return(await t.searchPageIdsInAncestor({environment:o,query:e,limit:20,ancestorId:i.from.blockId,excludeTemplates:!1,source:"link_to_page_block"})).results}}}return[]}(t,e.store,r),debounce:fr().tu,render:(t,o,n)=>(0,p.jsx)(yr().A,{debugName:"LinkToPageBlock",capture:!0,children:(0,p.jsx)(Wr,{store:e.store,results:o,ready:n,autocompleteStore:a})})}))}const $r=c.memo(c.forwardRef(Gr),f().A),Yr=(0,u().wt)("loom",{viewBox:"0 0 190 190",svg:(0,p.jsx)("path",{d:"M189.611 84.2622H134.166L182.184 56.539L171.639 38.2692L123.621 65.9923L151.338 17.9781L133.068 7.42678L105.351 55.4409V0H84.2598V55.4462L56.5322 7.42678L38.2681 17.9728L65.9904 65.987L17.9723 38.2692L7.42658 56.5337L55.4447 84.2569H0V105.349H55.4394L7.42658 133.072L17.9723 151.342L65.9851 123.624L38.2628 171.638L56.5322 182.184L84.2545 134.165V189.611H105.346V134.17L133.063 182.184L151.332 171.638L123.61 123.619L171.628 151.342L182.174 133.072L134.161 105.354H189.6V84.2622H189.611ZM94.8055 123.491C78.9021 123.491 66.0116 110.601 66.0116 94.6968C66.0116 78.7929 78.9021 65.9021 94.8055 65.9021C110.709 65.9021 123.599 78.7929 123.599 94.6968C123.599 110.601 110.709 123.491 94.8055 123.491Z"})});function Qr(e,t){const o=(0,c.useRef)(null),n=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"loom",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:n,ref:o,store:e.store,iconSvg:Yr,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with any Loom shareable link",id:"loomBlock.embed.caption"}),children:(0,p.jsx)(g().sA,{defaultMessage:"Embed Loom",id:"loomBlock.placeholder"})}))}const Zr=c.memo(c.forwardRef(Qr),f().A),Xr=(0,u().wt)("maps",{viewBox:"0 0 160 164",svg:(0,p.jsxs)("g",{children:[" ",(0,p.jsx)("polyline",{points:"16 163.155 76.159 103 136.314 163.155 16 163.155"})," ",(0,p.jsx)("path",{d:"M91.1523093,12 C89.1061243,15.5558234 87.6020864,19.4206238 86.7688642,23.441 C84.8448642,33.084 86.5958642,43.241 91.3038642,51.836 C91.8382207,52.8588753 92.3925227,53.8704894 92.9644441,54.8718184 L0,147.839 L0,24.942 C0,17.799 5.796,12 12.942,12 L91.1523093,12 L91.1523093,12 Z M27.8186945,28.8787927 C20.9826945,31.9947927 15.9026945,38.8067927 15.1686945,46.3227927 C13.7376945,56.9777927 21.5856945,67.7337927 32.0706945,69.9057927 C40.5536945,71.9007927 50.5746945,68.4527927 54.8196945,60.5497927 C57.5256945,56.1347927 57.8816945,50.7917927 57.3626945,45.7587927 C50.5816945,45.0857927 43.5296945,45.6577927 36.6486945,45.4797927 C36.5946945,48.0237927 36.6096945,50.5677927 36.7256945,53.1037927 C40.8396945,53.0417927 44.9526945,53.0807927 49.0736945,53.0727927 C47.8296945,58.9497927 41.9446945,62.9007927 36.0456945,62.2127927 C27.0296945,62.0967927 20.6586945,51.4727927 24.4936945,43.3927927 C27.4236945,35.1807927 39.1766945,32.2347927 45.4326945,38.4437927 C47.4426945,36.5027927 49.4526945,34.5547927 51.4096945,32.5597927 C45.1536945,26.7907927 35.5196945,25.3527927 27.8186945,28.8787927 Z"})," ",(0,p.jsx)("path",{d:"M124.80036,20.6120969 C120.325021,21.6105482 116.569675,25.5689693 116.191987,30.2012296 C115.721991,34.5142624 118.24735,38.8911407 122.112695,40.7949674 C126.304191,43.0118678 131.806442,42.332644 135.307176,39.1288306 C138.574835,36.2380909 139.764822,31.2458343 138.057917,27.2058756 C136.037937,22.1505427 130.041845,19.2713414 124.80036,20.6120969 Z M129.322621,0 C138.754833,0.539994477 147.978584,5.14840888 153.696218,12.7298698 C157.440026,17.5182824 159.529236,23.4620677 160,29.4989291 L160,31.7396754 C159.779233,43.4418634 152.290848,53.047919 145.807068,62.1501336 C138.528681,72.435413 131.801058,83.6445291 129.937231,96.3213226 C129.438005,98.4697621 129.034302,102.445875 127.470333,102.445875 C124.80036,102.3677 123.210376,86.842958 120.185792,80.3707165 C116.755058,72.8300244 111.978183,66.0154787 107.125156,59.3463161 C104.17134,55.3471262 101.384446,51.2079378 99.0798538,46.7964445 C95.4583524,40.1849736 94.1114431,32.3719766 95.591428,24.9543602 C96.8052617,19.097497 99.8698458,13.6698602 104.112879,9.47298004 C109.830513,3.88303721 117.561972,0.499225663 125.538045,0 L129.322621,0 Z"})," ",(0,p.jsx)("path",{d:"M151.652474,72 L151.652474,148.672145 C135.535571,132.464045 127.553192,124.419378 127.705338,124.538145 C131.041338,123.277145 130.263338,119.369145 130.912338,116.576145 C133.335338,100.096145 142.081338,85.5241452 151.543338,72.1531452 C151.579693,72.102109 151.616072,72.0510607 151.652474,72 Z"})," ",(0,p.jsx)("path",{d:"M106.040648,74 L92,88.0399478 L125.952845,121.992793 C123.906994,113.374953 121.723258,103.970177 117.61803,95.9459594 C114.174293,88.3766869 110.811044,80.7912134 106.040648,74 Z"})," "]})}),Jr=(0,g().YK)({embedButtonText:{defaultMessage:"Embed Map",id:"googleMapsBlock.embedButton.label"}});function ei(e,t){const o=(0,g().tz)(),n=(0,c.useRef)(null),r=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"maps",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:r,ref:n,store:e.store,iconSvg:Xr,urlInputPlaceholder:"https://www.google.com/maps…",embedButtonText:o.formatMessage(Jr.embedButtonText),mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with places on Google Maps",id:"googleMapsBlock.embed.caption"}),children:(0,p.jsx)(g().sA,{defaultMessage:"Embed a Google Map",id:"googleMapsBlock.placeholder"})}))}const ti=c.memo(c.forwardRef(ei),f().A),oi=(0,u().wt)("miro",{viewBox:"0 0 32 32",svg:(0,p.jsx)("path",{d:"M13.75 20.895l1.761.359v-7.82l-1.76.344v7.117zm4.604-4.28v4.28l1.761.359V16.88c0-.993.56-1.441 1.432-1.607l1.015-.186v-1.835l-1.015.164c-1.935.44-3.193 1.073-3.193 3.197zm-7.446-.256c0-2.313-1.539-3.085-2.777-3.068-.984.014-1.785.423-2.265 1.047-.478-.685-1.325-1.068-2.016-1.068-.85 0-1.597.373-2.09.97v-.806L0 13.778v7.117l1.76.359v-4.895c0-.776.568-1.328 1.418-1.328.836 0 1.403.552 1.403 1.328v4.536l1.76.359v-4.895c0-.776.568-1.328 1.404-1.328.835 0 1.402.552 1.402 1.328v4.536l1.76.359v-4.895h.001zm17.176 5.059c2.356 0 3.916-1.636 3.916-4.081 0-2.446-1.56-4.067-3.916-4.067-2.446 0-4.082 1.62-4.082 4.067 0 2.445 1.636 4.08 4.082 4.08zm0-1.65c-1.366 0-2.281-.976-2.281-2.431 0-1.456.915-2.416 2.281-2.416 1.275 0 2.115.96 2.115 2.416 0 1.455-.84 2.43-2.115 2.43zm-13.416-7.552c.641 0 1.065-.445 1.065-1.11S15.31 10 14.668 10c-.665 0-1.11.44-1.11 1.106 0 .665.445 1.11 1.11 1.11"})}),ni=(0,g().YK)({embedButtonText:{defaultMessage:"Embed Miro",id:"miroBlock.embeds.button.label"}});function ri(e,t){const o=(0,g().tz)(),n=(0,c.useRef)(null),r=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"miro",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:r,ref:n,store:e.store,iconSvg:oi,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with Miro links with public access enabled",id:"miroBlock.embeds.caption"}),embedButtonText:o.formatMessage(ni.embedButtonText),urlInputPlaceholder:"https://miro.com/app/board/…",children:(0,p.jsx)(g().sA,{defaultMessage:"Embed Miro",id:"miroBlock.placeholder"})}))}const ii=c.memo(c.forwardRef(ri),f().A),ai=(0,u().wt)("mixpanel",{viewBox:"0 0 101 106",svg:(0,p.jsx)("g",{children:(0,p.jsx)("path",{d:"M31.008 41.412h13.385c-3.342-2.09-4.593-5.021-6.272-10.454l-5.022-18.613C30.803 3.982 28.918.005 19.714.005H.484v5.022H3.21c5.639 0 6.273 2.091 7.952 8.364l4.387 16.315c2.297 7.952 5.861 11.706 15.476 11.706h-.016zm30.968 0h13.37c9.614 0 12.956-3.77 15.27-11.706l4.387-16.315c1.679-6.273 2.502-8.364 7.952-8.364h2.724V.006H86.655c-9.41 0-11.294 3.77-13.385 12.34l-5.02 18.611c-1.68 5.639-2.93 8.363-6.273 10.454zM44.393 58.963h17.584l-.001-17.55H44.393v17.55zM.484 100.369h19.23c9.204 0 11.088-3.976 13.385-12.34l5.022-18.611c1.679-5.434 2.93-8.364 6.272-10.455H31.008c-9.615 0-13.179 3.77-15.475 11.706l-4.388 16.315c-1.68 6.273-2.297 8.364-7.952 8.364H.484v5.021zm86.14 0h19.023v-5.021h-2.724c-5.433 0-6.273-2.091-7.952-8.364L90.583 70.67c-2.296-7.952-5.639-11.706-15.27-11.706H61.976c3.343 2.091 4.546 4.816 6.225 10.455l5.022 18.612c2.09 8.57 3.975 12.339 13.385 12.339h.015z"})})}),si=(0,g().YK)({embedButtonText:{defaultMessage:"Embed Mixpanel",id:"mixpanelBlock.embeds.button.label"}});function li(e,t){const o=(0,g().tz)(),n=(0,c.useRef)(null),r=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"mixpanel",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:r,ref:n,store:e.store,iconSvg:ai,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with Mixpanel projects",id:"mixpanelBlock.embeds.caption"}),embedButtonText:o.formatMessage(si.embedButtonText),urlInputPlaceholder:"https://mixpanel.com/…",children:(0,p.jsx)(g().sA,{defaultMessage:"Embed a Mixpanel project",id:"mixpanelBlock.placeholder"})}))}const ci=c.memo(c.forwardRef(li),f().A);var di=()=>o(405789),ui=()=>o(269429),pi=()=>o(565304),mi=()=>o(196310);const gi=(0,u().wt)("replit",{viewBox:"0 0 793.8 871.5",svg:(0,p.jsx)("g",{children:(0,p.jsx)("path",{d:"M396.9 356.1H227.2c-16.6 0-30-13.4-30-30v-99.8c0-16.6 13.4-30 30-30h139.7c16.6 0 30 13.4 30 30v129.8zm169.7 159.7H396.9V356.1h169.7c16.5 0 29.9 13.4 29.9 29.9v99.8c0 16.6-13.4 30-29.9 30zM366.9 675.6H227.2c-16.5 0-29.9-13.4-29.9-29.9v-99.8c0-16.5 13.4-29.9 29.9-29.9h169.7v129.8c0 16.3-13.4 29.8-30 29.8z"})})}),fi=(0,g().YK)({embedButtonText:{defaultMessage:"Embed a repl",id:"replitBlock.embeds.button.label"}});function vi(e,t){const o=(0,g().tz)(),n=(0,c.useRef)(null),r=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"replit",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:r,ref:n,store:e.store,iconSvg:gi,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with Replit.",id:"replitBlock.embeds.caption"}),embedButtonText:o.formatMessage(fi.embedButtonText),urlInputPlaceholder:"https://replit.com/…",children:(0,p.jsx)(g().sA,{defaultMessage:"Embed a repl",id:"replitBlock.placeholder"})}))}const hi=c.memo(c.forwardRef(vi),f().A),_i=(0,u().wt)("sketch",{viewBox:"0 0 46 46",svg:(0,p.jsx)("g",{fillRule:"evenodd",children:(0,p.jsx)("path",{d:"M23.0831783 10.0045301l8.1450351.8960958c.2099814.0231017.4008968.1324906.5270123.3019626l6.0917147 8.1859511c.2137793.2872733.1982297.6847539-.0373384.9544486L23.4296391 36.806161c-.2072579.2372831-.5676296.2616233-.8049127.0543654l-.0543655-.0543654L8.19039805 20.3429882c-.23556813-.2696947-.25111774-.6671753-.03733843-.9544486l6.09171468-8.1859511c.1261155-.169472.3170309-.2788609.5270123-.3019626l8.1450351-.8960958a.76060447.76060447 0 01.1663566 0zm2.0141776 2.4229231c-.0693405-.0648437-.1764661-.0687976-.2504897-.0092454-.081512.0655766-.0939018.1841651-.0276733.2648747l3.8573181 4.7007387c.055083.0671271.085151.1509825.085151.2374739 0 .207984-.1702805.3765884-.3803321.3765884H17.6186701c-.0873512 0-.1720402-.0297721-.2398346-.0843129-.163024-.1311532-.1878035-.3683301-.0553465-.5297494l3.8573181-4.7007387c.0601442-.073295.0561509-.1793661-.0093373-.2480242-.0721132-.0756035-.1924706-.0790085-.2688257-.0076051l-5.750016 5.3771171c-.0774384.0724164-.1819972.1093609-.2882425.1018466-.2095178-.0148182-.3672335-.1950067-.352268-.4024622l.2753824-3.8174045c.0064096-.0888512-.0509385-.1699933-.1374402-.1944648-.1009848-.0285688-.206239.0293302-.2350918.129321L13.1553109 17.98681c-.0869135.3012032-.3194364.539875-.62031.6367138l-2.76499194.8899366c-.07834118.0252148-.13137885.0975058-.13137885.1790711 0 .1039921.08514024.1882942.19016605.1882942h2.66553224c.3250892 0 .6276464.1644528.8021788.4360184L20.3459621 31.28552c.0777639.1209976.2347663.165079.3651002.1025088.1417556-.0680534.2009545-.2370061.1322245-.3773663l-5.0526479-10.3185107c-.0376144-.0768161-.0571558-.1610746-.0571558-.2464434 0-.3119761.2554207-.5648827.5704981-.5648827h13.3920376c.0862174 0 .1713136.0193492.2488932.0565933.2835111.1361069.401909.4740123.2644491.7547328l-5.0526479 10.3185107c-.0631922.129051-.0186726.2845081.1035279.3615065.1329093.0837462.3092182.0449521.3937968-.086649l7.0494549-10.9686759c.1745324-.2715656.4770896-.4360184.8021788-.4360184h2.5849257c.0818532 0 .1545231-.0518618.1804073-.1287503.0332121-.0986555-.0206353-.2052903-.1202715-.2381755l-2.6912281-.888246c-.2977515-.0982735-.5273437-.3357047-.6135671-.6345159l-1.2609059-4.3697316c-.0247148-.0856502-.1066636-.1424338-.196398-.1360873-.1047589.0074091-.1836168.0975033-.176134.2012311l.2753824 3.8174045c.0075889.1051994-.0297228.2087291-.1028592.2854053-.1442263.1512071-.3849411.158017-.5376513.0152103z"})})}),bi=(0,g().YK)({embedButtonText:{defaultMessage:"Embed Sketch",id:"sketchBlock.embeds.button.label"}});function yi(e,t){const o=(0,g().tz)(),n=(0,c.useRef)(null),r=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"sketch",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:r,ref:n,store:e.store,iconSvg:_i,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with Sketch links with Public Link Access enabled",id:"sketchBlock.embeds.caption"}),embedButtonText:o.formatMessage(bi.embedButtonText),urlInputPlaceholder:"https://sketch.com/…",children:(0,p.jsx)(g().sA,{defaultMessage:"Embed Sketch",id:"sketchBlock.placeholder"})}))}const Si=c.memo(c.forwardRef(yi),f().A),wi={SlideBlock:new(r().O2)("SlideBlock",(async()=>await o.e(52009).then(o.bind(o,505902))))},ki=(0,r().jQ)(wi.SlideBlock,(e=>e.default));var Ii=()=>o(993553),Ai=()=>o(687519),xi=()=>o(90302),Ci=()=>o(689094),Ti=()=>o(197959),Mi=()=>o(722101),Pi=()=>o(898286),Bi=()=>o(94953),Ri=()=>o(108944),Ei=()=>o(953418),Di=()=>o(695625),Ni=()=>o(756279),Li=()=>o(65269),Fi=()=>o(17090),Ui=()=>o(439264),Oi=()=>o(614505),Vi=()=>o(16006),ji=()=>o(2143),zi=()=>o(59822);function qi(e){const t=(0,g().tz)(),o=(0,k().v3)(),n=(0,I().DP)(),r=(0,I().IS)((e=>({baseStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},mobileStyle:$i(e),desktopStyle:Gi(e),scrollerOverlayStyle:Yi(e)})),[]),i=(0,d().uB)(void 0,Fi().A),a=(0,c.useRef)(null);return(0,p.jsxs)(j().s,{allowSelectionWithin:!0,style:{...o.device.isMobile?r.mobileStyle:r.desktopStyle,...r.baseStyle},children:[(0,p.jsx)(ji().H,{role:"tablist","aria-label":t.formatMessage(Ki.tabListLabel),type:Ni().A.X,ref:a,store:i,children:(0,p.jsx)(Ui().Ay,{disabled:e.disabled,direction:"horizontal",keys:e.tabs.map((e=>e.id)),renderKey:(t,o)=>(0,p.jsx)(Hi,{index:o,...e}),onDrop:(t,n)=>function(e){const{environment:t,parentStore:o,onDropArgs:n,newTabs:r}=e;Ft().createAndCommit({userAction:"TabBlockMenu.handleTabReorder",environment:t,canUndo:!0,perform:e=>{const{key:t,endPosition:i}=n,a=o.getContentStores().find((e=>e.id===t)),s=r[i-1],l=o.getContentStores().find((e=>e.id===s));a&&Mi().Yb({parentStore:o.getContentStore(),afterStore:l,currentStore:a,transaction:e})}})}({environment:o,newTabs:t,parentStore:e.parentStore,onDropArgs:n}),disableHorizontalEdgeScroll:!1})}),(0,p.jsx)(zi().A,{store:i,rightOverlayStyle:r.scrollerOverlayStyle}),!e.disabled&&(0,p.jsx)(Ye().p,{"aria-label":t.formatMessage(Ki.addTab),style:{height:28,width:28,marginTop:6,display:"flex",justifyContent:"center"},onClick:()=>{!function(e,t,o){var n;const{performResult:r}=Ft().createAndCommit({userAction:"TabBlockMenu.newTab",environment:e,canUndo:!0,perform:o=>xi().Hm({environment:e,store:t,transaction:o})}),i=()=>{const e=t.getContentStores(),o=e[e.length-1];Pi().U({blockStore:r,renderDelete:!0,originRect:o?Di().T.getRectFromStore(o):void 0})},a=null===(n=o.current)||void 0===n?void 0:n.getNode();a?(Ei().VG({element:a,environment:e,options:{left:a.scrollWidth,behavior:"smooth"}}),Ei().gT(a,i)):i()}(o,e.parentStore,a)},children:(0,Ci().W)({fill:n.mediumIconColor,width:16,height:16})})]})}function Hi(e){const t=(0,k().v3)(),o=(0,g().tz)(),{index:n,parentStore:r,selectedIndex:i,tabs:a}=e,s=a[n],l=(0,I().IS)((e=>({selectedTab:{...{paddingTop:6,paddingBottom:12,whiteSpace:"nowrap",minWidth:0,flexShrink:0,fontWeight:500},position:"relative"},tab:{paddingTop:6,paddingBottom:12,whiteSpace:"nowrap",minWidth:0,flexShrink:0,fontWeight:500},border:Qi(e)})),[]),c=(0,d().K8)((()=>{const e=Bi().A.getFirstSelectedDiscussionId();if(!e)return!1;const t=Ir().cc.createChildStore(s,{table:Ti().$Y,id:e,spaceId:s.getSpaceId()});return(0,Ri().g7)(t).map((e=>e.id)).includes(s.id)}),[s]),{device:u}=t,m=i===n,f=n===a.length-1,v=0===n,h=a.length;return(0,p.jsx)(uo().A,{store:s,analyticsName:"tab",canSelect:!0,canDrag:!1,canDropBelow:!1,canDropLeft:!v,canDropAbove:!1,canNativeDropBelow:!1,canNativeDropLeft:!v,canNativeDropRight:!f,canDropOnto:!0,dropzoneShouldNeverUseOrigin:!0,dropzoneMustBeWithinHorizontalBound:!0,canInsertAbove:!v,canDropRight:!f,canInsertBelow:!f,shouldShowHalo:!0,shouldShowDropZone:!0,shouldShowParentHalo:!0,dropzoneGap:10,onSelectableDrop:e=>{const{droppedDirection:o,droppedStores:n,duplicate:r}=e;Ft().createAndCommit({userAction:"TabBlockMenu.dropOntoTab",environment:t,canUndo:!0,perform:e=>{to().MS({environment:t,targetParentStore:s.getContentStore(),targetStore:s,droppedDirection:o,droppedStores:n,duplicate:r,transaction:e})}})},onRemove:()=>{!function(e){const{environment:t,parentStore:o,tabStore:n,index:r}=e;Ft().createAndCommit({userAction:"TabBlockMenu.handleRemoveTab",environment:t,canUndo:!0,perform:e=>{const i=o.getContentStores();if(1===i.length){const t=o.getRecordStoreUIParent();"block"!==(null==t?void 0:t.table)&&"space"!==(null==t?void 0:t.table)||null==t||!t.valueIs(Li()._)||Mi().TF({parentStore:t,childToRemoveStore:o,transaction:e})}else{const e=r<i.length-1?i[r+1]:i[r-1];xi().cN({store:o,id:e.id,currentUserId:t.currentUser.id})}Mi().TF({parentStore:o.getContentStore(),childToRemoveStore:n,transaction:e})}})}({environment:t,parentStore:r,tabStore:s,index:n})},children:(0,p.jsxs)("div",{style:{...m?l.selectedTab:l.tab},children:[(0,p.jsxs)(Ye().p,{role:"tab","aria-selected":m,"aria-controls":m?e.contentAriaId:void 0,"aria-posinset":n+1,"aria-setsize":h,id:m?e.selectedTabAriaId:void 0,style:{fontSize:16},onClick:()=>function(e,t,o){if(e.onChange(t),o&&!e.disabled){const o=e.parentStore.getContentStores()[t];Pi().U({blockStore:o,renderDelete:!0})}}(e,n,m),disabled:e.readOnly,mobileFeedback:u.isMobile,hovered:c,isGray:!m,children:[(0,p.jsx)(Wi,{store:s}),(0,p.jsx)(Vi().A,{store:s,placeholder:o.formatMessage(Ki.untitledTab)})]}),m&&(0,p.jsx)("div",{style:l.border})]},n)},n)}function Wi(e){const{store:t}=e,{icon:o,isEmptyPage:n}=(0,d().K8)((()=>({icon:t.hasIcon()&&t.getIcon(),isEmptyPage:t.isEmptyPage()})),[t]);return o?(0,p.jsx)(Oi().A,{disabled:!0,icon:o,isEmptyPage:n,size:20,style:{marginRight:6}}):null}const Ki=(0,g().YK)({untitledTab:{id:"tabMenuBlock.title.placeholder",defaultMessage:"Untitled"},addTab:{id:"tabMenuBlock.addTab",defaultMessage:"Add tab"},tabListLabel:{defaultMessage:"Tab block",id:"tabBlockMenu.tabListLabel"}});function Gi(e){return{display:"flex",fontSize:14,width:"100%",paddingLeft:8,paddingRight:8,boxShadow:`0 1px 0 ${e.regularDividerColor}`,position:"relative",zIndex:1}}function $i(e){return{display:"flex",fontSize:16,width:"100%",paddingTop:2,paddingLeft:16,paddingRight:16,boxShadow:`0 1px 0 ${e.regularDividerColor}`,position:"relative",zIndex:2,height:44,background:e.popoverBackground}}function Yi(e){return{background:e.regularDividerColor,right:28,opacity:1,marginTop:6,marginBottom:12,width:1}}function Qi(e){return{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:0,right:0}}function Zi(e,t){const{store:n,style:r,disabled:i,disableCommentMenu:a,hideContent:s}=e,l=(0,k().v3)(),u=(0,v().pW)(n,!0),m=(0,I().IS)((()=>({root:{paddingLeft:Le().nE.paddingLeft,flex:1,...u,...r},tabContainer:{display:"flex",flexDirection:"column"}})),[r,u]);(0,c.useEffect)((()=>{xi().MB({blockId:n.id,currentUserId:l.currentUser.id})}),[l,n]);const g=(0,c.useId)(),f=(0,c.useId)(),h=(0,d().K8)((()=>n.getContentStores()),[n]),_=(0,d().K8)((()=>xi().TE(n)),[n]),b=(0,v().bx)(n,i),y=(0,d().K8)((()=>o(744705).X(n)),[n]),S=(0,c.useRef)(null),w=(0,p.jsxs)("div",{style:m.root,ref:S,children:[(0,p.jsx)("div",{style:m.tabContainer,children:(0,p.jsx)(qi,{contentAriaId:g,selectedTabAriaId:f,disabled:!b,parentStore:n,tabs:h,selectedIndex:_,onChange:e=>xi().Fr({store:n,index:e,currentUserId:l.currentUser.id})})}),(0,p.jsx)("div",{role:"tabpanel",id:g,"aria-labelledby":f,style:{position:"relative"},children:(0,p.jsx)(o(378765).A,{loaded:y,spinnerSize:"relative",showSpinnerTimeout:500,innerStyle:{display:"flex",flexDirection:"column"},children:(0,p.jsx)(Xi,{...e})})}),(0,p.jsx)(ve().A,{disableCommentMenu:a,hideContent:s,store:n,hideIfSidebarOrMarginCommentsVisible:!0})]});return(0,v().NW)(n,t,(0,c.useMemo)((()=>({renderedType:"tab",getNode:()=>S.current,getBlockStore:()=>n})),[n]),w)}function Xi(e){const{store:t,disabled:o}=e,{selectedContentStore:n,contentStore:r}=(0,d().K8)((()=>{const e=xi().Qy(t),o=e.getContentStore();return{selectedContentStore:e,contentStore:o}}),[t]),i=(0,I().IS)((()=>({selectable:{display:"flex",flexDirection:"column"}})),[]),a=(0,v().bx)(t,o);return(0,p.jsx)(uo().A,{store:n,analyticsName:"page_content",canSelect:!1,canDrag:!1,isListContainer:!0,style:i.selectable,children:(0,p.jsx)(K().A,{store:r,disabled:o,disableContent:!1,emptyPlaceholder:(0,p.jsx)(Ji,{store:n,canEdit:a})})},n.id)}function Ji(e){const{store:t,canEdit:o}=e,n=(0,I().IS)((e=>({button:{fontSize:"inherit",width:"100%",borderRadius:4,caretColor:e.lightTextColor,...Le().nE,marginTop:2},text:{color:e.lightTextColor}})),[]),r=(0,k().v3)(),i=(0,c.useCallback)((()=>{Ft().createAndCommit({userAction:"TabBlock.handlePlaceholderClick",environment:r,canUndo:!0,perform:e=>{xi()._N({environment:r,store:t,transaction:e})}})}),[t,r]);return(0,p.jsx)(q().A,{style:n.button,onClick:i,disabled:!o,children:(0,p.jsx)("span",{style:n.text,children:(0,p.jsx)(g().sA,{defaultMessage:"Empty tab. Click or drop blocks inside.",id:"tabBlock.emptyBlock.placeholderText"})})})}const ea=c.memo(c.forwardRef(Zi),f().A);var ta=()=>o(125958),oa=()=>o(134103),na=()=>o(42425);function ra(e,t){const n=(0,k().v3)(),r=(0,k().Y0)(),i=(0,c.useRef)(null),a=(0,v().bx)(e.store,e.disabled),s=e.disabled||!a,{navigableAncestorStore:l,headerStores:d}=(0,o(960701).d)({parentStore:e.store}),u=(0,I().IS)((e=>({root:{position:"relative"},placeholder:{...sa,paddingTop:Le().nE.paddingTop,paddingBottom:Le().nE.paddingBottom,color:e.lightTextColor,...!s&&r.isMobile&&{marginRight:36}},actionMenuButton:{position:"absolute",top:3,right:6}})),[r.isMobile,s]),m=(0,p.jsx)("div",{style:u.placeholder,children:(0,p.jsx)(g().sA,{defaultMessage:"Add headings to create a table of contents. <linktohelpbutton>Learn more</linktohelpbutton>.",id:"tableOfContentsBlock.placeholder",values:{linktohelpbutton:e=>(0,p.jsx)(bt().A,{href:(0,o(836251).xS)("guides.tableOfContents"),external:!0,onClick:()=>o(148024).FH(n,{from:"table_of_contents_placeholder"}),children:e})}})}),f=(0,p.jsxs)(j().s,{allowSelectionWithin:!0,style:u.root,ref:i,children:[d.map((t=>(0,p.jsx)(aa,{headerStore:t,index:d.indexOf(t),headerStores:d,store:e.store,navigableAncestorStore:l,style:e.style},t.id))),0===d.length&&m,!s&&r.isMobile&&(0,p.jsx)(ge().A,{style:u.actionMenuButton,tooltipContent:(0,p.jsx)(g().sA,{defaultMessage:"More actions…",id:"tableOfContentsBlock.mobileActionMenu.button.label"}),store:e.store,fadeIn:!1})]});return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"table_of_contents",getNode:()=>i.current,getBlockStore:()=>e.store})),[e.store]),f)}const ia=c.memo(c.forwardRef(ra),f().A);function aa(e){const t=(0,d().K8)((()=>ta().A({headerBlockId:e.headerStore.id,headerBlockIds:e.headerStores.map((e=>e.id)),index:e.index,getRecordModel:e.store.getRecordModel})),[e.headerStore.id,e.headerStores,e.index,e.store.getRecordModel]),o=(0,v().pW)(e.store),n=(0,I().IS)((()=>({container:o,innerHeader:{...sa,display:"flex",alignItems:"center",marginLeft:na().pU*t,paddingTop:2*Le().nE.paddingTop,paddingBottom:2*Le().nE.paddingBottom}})),[o,t]),r=(0,oa().t)({scrollToBlockId:e.headerStore.id,pageStore:e.navigableAncestorStore});return e.navigableAncestorStore?(0,p.jsx)("div",{style:{...n.container,...e.style},children:(0,p.jsx)(be().A,{...r,external:!1,children:(0,p.jsx)("div",{style:n.innerHeader,children:(0,p.jsx)(Vi().A,{store:e.headerStore,shouldWrap:!1,underline:!0})})})}):null}const sa={paddingRight:Le().nE.paddingRight,paddingLeft:Le().nE.paddingLeft,fontSize:14,lineHeight:1.3};var la=()=>o(718725),ca=()=>o(178298),da=()=>o(697868),ua=()=>o(289068);const pa=(0,g().YK)({embedButtonText:{defaultMessage:"Embed Tweet",id:"tweetBlock.embedTweet.button.label"}});function ma(e,t){const n=(0,g().tz)(),r=(0,c.useRef)(null),i=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"tweet",getNode:()=>{const e=r.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:i,ref:r,store:e.store,iconSvg:o(701685).X,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with links to Tweets",id:"tweetBlock.linkInput.caption"}),embedButtonText:n.formatMessage(pa.embedButtonText),urlInputPlaceholder:"https://twitter.com/… or https://x.com/",children:(0,p.jsx)(g().sA,{defaultMessage:"Embed a Tweet from X",id:"tweetBlock.placeholder"})}))}const ga=c.memo(c.forwardRef(ma),f().A),fa=(0,u().wt)("typeform",{viewBox:"0 0 30 31",svg:(0,p.jsx)("path",{d:"M15.027 30.53c-4.294-.036-8.467-2.247-11.47-5.222C.553 22.333-.09 19.78.009 15.654.107 11.53 1.2 7.81 4.047 4.68 6.895 1.55 10.121.11 14.25.006c4.129-.103 7.291 1.046 10.44 4.156 3.15 3.11 5.242 7.127 5.31 11.392.067 4.266-1.978 6.94-4.972 9.936-2.994 2.995-5.706 5.077-10 5.04zm-4.891-19.66h3.818v10.304h1.903V10.87h3.818V9.071h-9.54v1.798z"})});function va(e,t){const o=(0,c.useRef)(null),n=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"typeform",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,blockResizerStore:n,ref:o,store:e.store,iconSvg:fa,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with any public Typeform link",id:"typeformBlock.embed.caption"}),children:(0,p.jsx)(g().sA,{defaultMessage:"Embed Typeform",id:"typeformBlock.placeholder"})}))}const ha=c.memo(c.forwardRef(va),f().A),_a=(0,u().wt)("video",{viewBox:"0 0 30 30",svg:(0,p.jsx)("path",{d:"M2,2v26h26V2H2z M26,6h-2V4h2V6z M22,14H8V4h14V14z M6,10H4V8h2V10z M6,12v2H4v-2H6z M6,16v2H4v-2H6z M6,20v2H4v-2H6z M8,16 h14v10H8V16z M24,20h2v2h-2V20z M24,18v-2h2v2H24z M24,14v-2h2v2H24z M24,10V8h2v2H24z M6,4v2H4V4H6z M4,24h2v2H4V24z M24,26v-2h2v2 H24z"})}),ba=(0,g().YK)({urlPlaceholder:{defaultMessage:"Paste the video link…",id:"videoBlock.linkInput.placeholder"},embedButtonText:{defaultMessage:"Embed video",id:"videoBlock.embedVideo.button.label"}});function ya(e,t){const o=(0,g().tz)(),n=(0,k().v3)(),r=(0,c.useRef)(null),i=(0,d().uB)(e.blockResizerStore,h().A),a=(0,v().bx)(e.store,e.disabled);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"video",getNode:()=>r.current,getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)("div",{ref:r,children:(0,p.jsx)(or().V,{type:rr().Rt,dropTargetKey:`video-block-${e.store.id}`,onDropFile:a?t=>{if("invalidFileDrop"===t.type)return void tr().D6({label:(0,p.jsx)(g().sA,{id:"videoBlock.invalidVideoDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})});const o=nr().y0(n);er().QM({environment:n,store:e.store,file:t.file,pageWidth:o,preferredType:e.store.getType()})}:()=>{},children:(0,p.jsx)(_().Ay,{...e,blockResizerStore:i,store:e.store,iconSvg:_a,preserveScale:!0,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"},{type:"file",videoUpload:!0}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with YouTube, Vimeo, and more",id:"videoBlock.linkInput.caption"}),embedButtonText:o.formatMessage(ba.embedButtonText),urlInputPlaceholder:o.formatMessage(ba.urlPlaceholder),children:(0,p.jsx)(g().sA,{defaultMessage:"Embed or upload a video",id:"videoBlock.placeholder"})})})}))}const Sa=c.memo(c.forwardRef(ya),f().A),wa=(0,u().wt)("whimsical",{viewBox:"0 0 32 32",svg:(0,p.jsxs)("g",{children:[(0,p.jsx)("path",{opacity:".8",fillRule:"evenodd",clipRule:"evenodd",d:"M12.807 9.772a.497.497 0 00-.705 0L5.76 16.146a.502.502 0 000 .708l6.343 6.374c.195.195.51.195.705 0l6.343-6.374a.503.503 0 000-.708l-6.343-6.374zm.352-2.479a.993.993 0 00-1.41 0l-8.457 8.499a1.005 1.005 0 000 1.416l8.458 8.499a.993.993 0 001.41 0l8.457-8.499c.39-.391.39-1.025 0-1.416l-8.458-8.499z",fill:"#A7A6A2"}),(0,p.jsx)("mask",{id:"a",maskUnits:"userSpaceOnUse",x:"3",y:"7",width:"19",height:"19",children:(0,p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.807 9.772a.497.497 0 00-.705 0L5.76 16.146a.502.502 0 000 .708l6.343 6.374c.195.195.51.195.705 0l6.343-6.374a.503.503 0 000-.708l-6.343-6.374zm.352-2.479a.993.993 0 00-1.41 0l-8.457 8.499a1.005 1.005 0 000 1.416l8.458 8.499a.993.993 0 001.41 0l8.457-8.499c.39-.391.39-1.025 0-1.416l-8.458-8.499z",fill:"#fff"})}),(0,p.jsx)("g",{filter:"url(#filter0_d)",mask:"url(#a)",children:(0,p.jsx)("path",{d:"M18.84 7.293a.993.993 0 011.41 0l8.458 8.499c.39.39.39 1.025 0 1.416l-8.458 8.499a.993.993 0 01-1.41 0l-8.457-8.499a1.005 1.005 0 010-1.416l8.457-8.499z",fill:"#000",fillOpacity:".01"})}),(0,p.jsx)("path",{d:"M18.84 7.293a.993.993 0 011.41 0l8.458 8.499c.39.39.39 1.025 0 1.416l-8.458 8.499a.993.993 0 01-1.41 0l-8.457-8.499a1.005 1.005 0 010-1.416l8.457-8.499z",fill:"#A7A6A2"}),(0,p.jsx)("defs",{children:(0,p.jsxs)("filter",{id:"filter0_d",x:"8.055",y:"4.964",width:"22.98",height:"23.071",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,p.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,p.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,p.jsx)("feOffset",{}),(0,p.jsx)("feGaussianBlur",{stdDeviation:"1.018"}),(0,p.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0"}),(0,p.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),(0,p.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})]})})]})}),ka=(0,g().YK)({embedButtonText:{defaultMessage:"Embed Whimsical",id:"whimsicalBlock.embeds.button.label"}});function Ia(e,t){const o=(0,g().tz)(),n=(0,c.useRef)(null),r=(0,d().uB)(e.blockResizerStore,h().A);return(0,v().NW)(e.store,t,(0,c.useMemo)((()=>({renderedType:"whimsical",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,p.jsx)(_().Ay,{...e,ref:n,store:e.store,iconSvg:wa,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,p.jsx)(g().sA,{defaultMessage:"Works with Whimsical links with Public Link Access enabled",id:"whimsicalBlock.embeds.caption"}),embedButtonText:o.formatMessage(ka.embedButtonText),urlInputPlaceholder:"https://whimsical.com/…",blockResizerStore:r,children:(0,p.jsx)(g().sA,{defaultMessage:"Embed Whimsical",id:"whimsicalBlock.placeholder"})}))}const Aa=c.memo(c.forwardRef(Ia),f().A);let xa;function Ca(e){const t=e.getType();if(t)return"collection_view"===t&&e.recordStoreParentDiffersFromPersistedParent()?n().A:(xa||(xa={text:la().A,encrypted_text:la().A,image:cr,video:Sa,bookmark:Be,drive:sn,audio:re,tweet:ga,gist:Gn,maps:ti,framer:Hn,invision:mr,file:Vn().A,page:ui().A,to_do:ca().A,toggle:da().Ay,bulleted_list:Oe().A,numbered_list:di().A,code:$t,factory:Ln,button:Ve().A,divider:qo,column_list:Eo,copy_indicator:Lo,embed:_().Ay,breadcrumb:Ue,equation:xn,header:$n().A,sub_header:Ii().A,sub_sub_header:Ai().A,quote:mi().A,collection_view:Jt().dN,collection_view_page:n().A,link_to_page:$r,link_to_collection:Vr,figma:On,loom:Zr,codepen:Xt,typeform:ha,column:mo,pdf:pi().A,callout:je().A,table_of_contents:ia,whimsical:Aa,miro:ii,abstract:S,sketch:Si,excalidraw:Pn,alias:te().oA,transclusion_container:ua().SM,transclusion_reference:ua().CF,replit:hi,external_object_instance:Bn().A,external_object_instance_page:void 0,table:s().K,table_row:s().W,tab:ea,hex:Xn,deepnote:Vo,mixpanel:ci,ai_block:ee,drawing:Wo,slide:ki,personal_home_page:void 0,form:void 0,post:void 0,workflow:l().RX,transcription:a,person_profile:void 0}),xa[t])}},344367:(e,t,o)=>{o.d(t,{y:()=>r});var n=()=>o(292588);const r={table:o(96689).NX,recordColumnTypes:{id:n().A.UUID,version:n().A.Number,last_version:n().A.Number,name:n().A.String,email_domains:n().A.StringArray,pages:n().A.StringArray,icon:n().A.String,disable_public_access:n().A.Boolean,disable_public_access_requests:n().A.Boolean,disable_guests:n().A.Boolean,disable_move_to_space:n().A.Boolean,disable_export:n().A.Boolean,disable_space_page_edits:n().A.Boolean,beta_enabled:n().A.Boolean,created_time:n().A.Number,last_edited_time:n().A.Number,deleted_by:n().A.UUID,permanently_deleted_time:n().A.Number,created_by_table:n().A.String,created_by_id:n().A.UUID,last_edited_by_table:n().A.String,last_edited_by_id:n().A.UUID,admin_disable_public_access:n().A.Boolean,space_pages:n().A.UUIDArray,plan_type:n().A.String,invite_link_enabled:n().A.Boolean,initial_use_cases:n().A.String,public_home_page:n().A.String,bot_settings:n().A.JSON,settings:n().A.JSON,subscription_tier:n().A.String,disable_team_creation:n().A.Boolean,overdue_subscription:n().A.JSON,short_id:n().A.Number,short_id_str:n().A.String},metaColumnTypes:{meta_user_id:n().A.UUID,meta_role:n().A.String}}},345913:(e,t,o)=>{o.d(t,{LS:()=>E,Ne:()=>R,Ys:()=>N,aR:()=>U,iN:()=>P,oD:()=>B,tP:()=>L,tz:()=>D});o(944114),o(581454);var n=()=>o(584262),r=()=>o(624090),i=()=>o(416845),a=()=>o(734410),s=()=>o(179034),l=()=>o(161479),c=()=>o(287882),d=()=>o(979340),u=()=>o(857783),p=()=>o(989423),m=()=>o(972435),g=()=>o(869562),f=()=>o(718807),v=()=>o(792415),h=()=>o(351360),_=()=>o(666429),b=()=>o(449506),y=()=>o(901389),S=()=>o(44729),w=()=>o(507785),k=()=>o(435009),I=()=>o(436572),A=()=>o(812182),x=()=>o(317909),C=()=>o(755199),T=()=>o(664713);const M=(0,o(959013).YK)({deletePageConfirmationMessage:{id:"trashActions.deletePagePermanentlyDialog.prompt",defaultMessage:"Are you sure you want to delete this page from Trash?"},deletePageConfirmationButton:{id:"trashActions.deletePagePermanentlyDialog.confirmDeleteButton.label",defaultMessage:"Delete page"},permanentlyDeleteFailedToast:{id:"trashActions.deletePagePermanentlyDialog.actionFailed.toast",defaultMessage:"Failed to delete, please try again later."},permanentlyDeletePermissionsFailure:{id:"trashActions.deletePagePermanentlyDialog.actionFailed.permissions",defaultMessage:"You do not have sufficient permissions to delete this page from Trash."},purgePageConfirmationMessage:{id:"trashActions.purgePageDialog.message",defaultMessage:"Are you sure you want to permanently delete this page?"},purgePageConfirmationDescription:{id:"trashActions.purgePageDialog.description",defaultMessage:"You won't be able to view or restore it."},purgePageConfirmationButton:{id:"trashActions.purgePageDialog.confirm",defaultMessage:"Permanently delete"},purgeFailedToast:{id:"trashActions.purgePageDialog.actionedFailed",defaultMessage:"Failed to permanently delete, please try again later."},restorationFailedToast:{id:"trashActions.restoreDeletedFromTrashPage.actionFailed.toast",defaultMessage:"Failed to restore page, please try again later."},trashDeletionToast:{defaultMessage:"Starting September 19th, pages in Trash will be automatically deleted after {duration}",id:"trashDeletionToast.body"}});async function P(e){const{environment:t,block:o,spaceId:r,from:i,restoreWithoutNavigation:a}=e;f().Ay.state.excludePages.add(o.id),f().Ay.emit(),await b().callApi({eventName:"restoreBlock",environment:t,data:{pointer:{table:s().ev,id:o.id,spaceId:r}}});const l=await w().Li({environment:t,request:{type:"block-space",blockId:o.id,spaceId:r},ignoreLocalResult:!0});v().A.setState({publicPageData:l}),p().vd(t,"restore_trash_page",{from:i}),Boolean(a)||(u().uK({environment:t,store:o,pageVisitSource:n().y8.Restore}),t.device.isMobile&&g().close())}function B(e){const{environment:t,blocks:o,transaction:n,permanentlyDelete:r=!1}=e;for(const i of o)S().s8({blockStore:i,transaction:n});n.postSubmitCallbacks.push((async e=>{e||await b().callApi({eventName:"deleteBlocks",environment:t,data:{blocks:o.map((e=>({id:e.id,spaceId:(0,l().e)(e.pointer.spaceId)}))),permanentlyDelete:r}})}))}function R(e){const{environment:t,handleSuccess:o,blocks:n}=e;p().vd(t,"open_delete_trash_page_modal"),y().ui({message:m().A.formatMessage(M.deletePageConfirmationMessage),showCancel:!0,keepFocus:!1,items:[{label:m().A.formatMessage(M.deletePageConfirmationButton),color:"red",onAccept:async()=>{await E(e),null==o||o(n)}}],handleCancel:()=>{p().vd(t,"cancel_delete_trash_page")}})}async function E(e){const{blocks:t,environment:o,from:n}=e,{currentSpaceStore:r}=h().default.state,a=e.environment.currentUser.id;if(r&&a){await b().callApi({eventName:"deleteBlocks",environment:e.environment,data:{blocks:t.map((e=>({id:e.id,spaceId:(0,l().e)(e.pointer.spaceId)}))),permanentlyDelete:!0}}).then((e=>{if("failed"===e.type)throw function(e){let t=M.permanentlyDeleteFailedToast;(0,i().io)(e)&&(t=M.permanentlyDeletePermissionsFailure);I().D6({label:m().A.formatMessage(t),durationMs:_().LX})}(e.body),e.error})),p().vd(o,"delete_trash_page",{from:n});for(const e of t)f().Ay.state.excludePages.add(e.id),f().Ay.emit();await T().C({environment:o,spaceId:r.id,userId:a}),k().VP({environment:e.environment,blocks:t})}}function D(e){const{blockStore:t,handleSuccess:o,environment:n}=e;y().ui({message:m().A.formatMessage(M.purgePageConfirmationMessage),description:m().A.formatMessage(M.purgePageConfirmationDescription),showCancel:!0,keepFocus:!1,items:[{label:m().A.formatMessage(M.purgePageConfirmationButton),color:"red",onAccept:async()=>{await b().callApi({eventName:"purgeBlockTree",environment:n,data:{pointer:t.pointer}}).then((e=>{if("failed"===e.type)throw function(){const e=M.purgeFailedToast;I().D6({label:m().A.formatMessage(e),durationMs:_().LX})}(),e.error;null==o||o(t.id)}))}}],handleCancel:()=>{}})}async function N(e){"failed"!==(await b().callApi({eventName:"restoreBlock",environment:e.environment,data:{pointer:{id:e.blockStore.id,table:s().ev,spaceId:e.spaceId},deletedFromTrashRestorationOption:"restore_to_private"}})).type?(p().vd(e.environment,"restore_trash_page",{from:e.from,destination:"private_pages"}),e.navigateToPage&&u().uK({environment:e.environment,store:e.blockStore,pageVisitSource:n().y8.Restore})):F()}async function L(e){"failed"!==(await b().callApi({eventName:"restoreBlock",environment:e.environment,data:{pointer:{id:e.blockStore.id,table:s().ev,spaceId:e.spaceId},deletedFromTrashRestorationOption:"restore_original_access"}})).type?p().vd(e.environment,"restore_trash_page",{from:e.from,destination:"original_location"}):F()}function F(){const e=M.restorationFailedToast;I().D6({label:m().A.formatMessage(e),durationMs:_().LX})}function U(e){var t;let{experimentStore:o,currentSpaceStore:n,currentUserSettingsStore:i,intl:s,environment:l}=e;const u=new Date>=new Date("2024-09-19"),g=!(0,d().OX)(n.getSubscriptionTier()),f=null===(t=i.getSettings())||void 0===t?void 0:t.seen_trash_autodeletion_announcement,v=l.device.isMobile;if(!u&&g&&!f&&!v){const e=()=>{(0,p().u4)({environment:l,event:{eventName:"trash_deletion_toast",eventProperties:{actionType:"dismissed",subscriptionTier:n.getSubscriptionTier()}}}),x().createAndCommit({userAction:"TrashDeletionToast.handleDismiss",environment:l,canUndo:!0,perform:e=>{C().mJ({transaction:e,userSettingsStore:i,data:{seen_trash_autodeletion_announcement:!0}})}})},t=function(e){const{deleteFromTrashDelaySeconds:t,intl:o,onDismiss:n}=e;return{presentationType:"transient",id:"trash_deletion_toast",icon:a().q,message:m().A.formatMessage(M.trashDeletionToast,{duration:(0,c().rN)(t,o)}),onDismiss:n}}({deleteFromTrashDelaySeconds:(0,r().XX)(null==n?void 0:n.getModel())/1e3,intl:s,environment:l,onDismiss:e});(0,p().u4)({environment:l,event:{eventName:"trash_deletion_toast",eventProperties:{actionType:"viewed",subscriptionTier:n.getSubscriptionTier()}}}),A().HK(t)}}},346436:(e,t,o)=>{o.d(t,{A:()=>re});o(898992),o(672577);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(617871),l=()=>o(668725),c=()=>o(30626),d=()=>o(738418),u=()=>o(796073),p=()=>o(693954),m=()=>o(959013),g=()=>o(751735),f=()=>o(100622),v=()=>o(284371),h=()=>o(559926),_=()=>o(901389),b=()=>o(510683),y=()=>o(797265),S=()=>o(317909),w=()=>o(633457),k=()=>o(645873);const I=new(k().O2)("ExternalObjectInstanceBlockMenu",(()=>Promise.all([o.e(23806),o.e(43380),o.e(17989),o.e(56985),o.e(73006)]).then(o.bind(o,487808)))),A=(0,k()._h)(I,(e=>e.ExternalObjectInstanceBlockMenu));var x=()=>o(572088),C=()=>o(493208),T=()=>o(972435),M=()=>o(351360),P=()=>o(53137),B=()=>o(700250),R=()=>o(444768),E=()=>o(704152),D=()=>o(493823),N=()=>o(406699),L=()=>o(854672),F=()=>o(864943),U=(o(944114),o(354520),o(803949),()=>o(133033)),O=()=>o(494167),V=()=>o(689094),j=()=>o(735384),z=()=>o(884107),q=()=>o(755636),H=()=>o(722872),W=()=>o(836251),K=()=>o(963589),G=()=>o(760217),$=()=>o(802790),Y=()=>o(928600),Q=()=>o(939740),Z=()=>o(89924),X=o(474848);const J=(0,m().YK)({copiedDebuggingInfo:{id:"externalObjectBlock.errorDropdown.copiedDebuggingInfo",defaultMessage:"Copied to clipboard."}});function ee(e){const{state:t,store:n,onUpdate:l,onReplace:c,onAuthenticate:d,onRemove:p,description:g,statusCode:v,errorDescription:b,isInlineMenu:y}=e,{userHasBotForIntegration:S,pattern:k,integration:I,botIds:A,originalUrl:x}=t,C=(0,r().Y0)(),T=(0,r().v3)(),B=(0,a().IS)((e=>({menuIcon:{fill:e.regularIconColor,width:16},redThemeColor:(0,f().k5)("red",e)})),[]),R=(0,i().K8)((()=>{var e;return Boolean(null===(e=M().default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit())}),[]),E=(0,i().K8)((()=>n.isExternalObjectInstanceBlockStore()),[n]),N=(0,i().K8)((()=>n.isExternalObjectInstancePageBlockStore()),[n]),F=(0,K().X)("gdrive_scope_migration_gate"),ee=(0,i().K8)((()=>P().A.externalAuthentications.state.filter((e=>e.integration_id===s().Hd))),[]),te=I.id===s().Hd&&F&&428===v;let oe;oe=C.isMobile?{menuType:H().gu.ActionSheet}:{menuType:H().gu.Popup,minWidth:220};const ne={key:"learn",render:e=>te?(0,X.jsx)(D().p,{icon:U().$,isLightGray:!0,style:{width:"100%",justifyContent:"flex-start",padding:"2px 8px"},...e,children:(0,X.jsx)(m().sA,{id:"unfurling.errorOptions.googleDriveAccounts.learnMore.title",defaultMessage:"Learn more"})}):(0,X.jsx)(G().A,{title:(0,X.jsx)(m().sA,{defaultMessage:"Learn more about this error",id:"unfurling.errorOptions.learnMore.title"}),icon:(0,O().n)(B.menuIcon),...e}),action:()=>{const e=[{label:(0,X.jsx)(m().sA,{id:"externalObjectInstanceBlockErrorDropdown.dialogItem.copyDebugData",defaultMessage:"Copy debugging information"}),color:void 0,onAccept:async()=>{const e=await z().R.clipboardActions.load(),t={statusCode:v,integrationId:I.id,botIds:A,url:x,debugMessage:b};e.copyString({environment:T,stringValue:JSON.stringify(t,null,2),copiedMessage:J.copiedDebuggingInfo})}}];te||e.unshift({label:(0,X.jsx)(m().sA,{id:"externalObjectInstanceBlockErrorDropdown.dialogItem.reviewGuide",defaultMessage:"View guide"}),color:"blue",onAccept:()=>{q().f({environment:T,url:(0,W().xS)("guides.unfurling")}),h().pU(T,{integrationId:I.id,entity:null==k?void 0:k.name,statusCode:v})}}),_().ui({items:e,showCancel:!0,keepFocus:!1,message:g})}},re={key:"remove",render:e=>(0,X.jsx)(G().A,{title:(0,X.jsx)(m().sA,{defaultMessage:"Remove",id:"unfurling.errorOptions.removeAction.title"}),style:{color:B.redThemeColor.color},icon:(0,j().I)({fill:B.redThemeColor.fill,width:16}),...e}),action:()=>{null==p||p()}},ie={key:"replace",render:e=>(0,X.jsx)(G().A,{title:(0,X.jsx)(m().sA,{defaultMessage:"Change URL",id:"unfurling.errorOptions.replace.title"}),icon:(0,u().$)(B.menuIcon),...e}),action:()=>{c()}},ae={key:"update",render:e=>(0,X.jsx)(G().A,{title:(0,X.jsx)(m().sA,{defaultMessage:"Try again",id:"unfurling.errorOptions.tryAgainAction.title"}),icon:(0,u().$)(B.menuIcon),...e}),action:()=>{null==l||l()}},se={key:"authenticate",render:e=>(0,X.jsx)(G().A,{title:S?401===v||439===v?(0,X.jsx)(m().sA,{defaultMessage:"Re-authenticate account",id:"unfurling.errorOptions.authenticateAction.reAuthenticate.title"}):y?(0,X.jsx)(m().sA,{defaultMessage:"Connect a different account",id:"unfurling.errorOptions.authenticateAction.alreadyAuthenticatedCompact.title"}):(0,X.jsx)(m().sA,{defaultMessage:"Connect a different {integration} account",id:"unfurling.errorOptions.authenticateAction.alreadyAuthenticated.title",values:{integration:I.name}}):(0,X.jsx)(m().sA,{defaultMessage:"Connect {integration} account",id:"unfurling.errorOptions.authenticateAction.notAuthenticated.title",values:{integration:I.name}}),icon:(0,X.jsx)(L().A,{type:"image_url",imageURL:I.icon,size:16}),...e}),action:()=>{null==d||d()}},le=[];te&&(le.push({key:"gdrive-accounts-header",render:e=>(0,X.jsx)(Z().A,{...e,disableDesktopPadding:!0,title:(0,X.jsx)(m().sA,{defaultMessage:"Select account",id:"unfurling.errorOptions.googleDriveAccounts.title"})}),action:()=>{}}),ee.forEach((e=>{le.push({key:`gdrive-account-${e.id}`,render:t=>(0,X.jsx)(G().A,{title:e.account_name||"Google Drive Account",icon:(0,X.jsx)(L().A,{type:"image_url",imageURL:I.icon,size:20,style:B.menuIcon}),style:{padding:"2px 8px"},...t}),action:async()=>{var t,r;const{openGoogleDriveFilePicker:i}=await Promise.resolve().then(o.bind(o,619400)),a=await w().Nl({environment:T,externalAuthenticationValue:e});if(!a||"failed"===a.type)return;const s=((null===(t=n.getFormat())||void 0===t?void 0:t.original_url)||(null===(r=n.getFormat())||void 0===r?void 0:r.uri)||"").match(/\/d\/([^/]+)\//),c=s?s[1]:"";await i({environment:T,accessToken:a.data.access_token,from:"external_object_instance_block",initialFileId:c,callback:t=>{t&&(null==l||l(e.id))}})}})})),le.push({key:"gdrive-connect-new-account",render:e=>(0,X.jsx)(G().A,{title:(0,X.jsx)(m().sA,{defaultMessage:"Connect a new account",id:"unfurling.errorOptions.googleDriveAccounts.connectNewAccount"}),style:{padding:"2px 8px"},icon:(0,V().W)(B.menuIcon),...e}),action:()=>{null==d||d()}}),le.push({key:"gdrive-accounts-divider-top",render:e=>(0,X.jsx)($().A,{size:1,style:{margin:"2px 0"},...e}),action:()=>{}}),le.push(ae),le.push(re),le.push({key:"gdrive-accounts-divider-bottom",render:e=>(0,X.jsx)($().A,{size:1,style:{margin:"2px 0"},...e}),action:()=>{}}),le.push(ne));const ce=[ne];R&&("error"===t.type?ce.push(ie):("placeholder"===t.type?ce.push(ie):ce.push(ae),!te&&(E||N&&[s().Hd,s().e1].includes(I.id))&&ce.push(se))),p&&ce.push(re);const de=[];return te?de.push({key:0,render:e=>(0,X.jsx)(Z().A,{...e,disableDesktopPadding:y}),items:le}):de.push({key:0,render:e=>(0,X.jsx)(Z().A,{...e,disableDesktopPadding:y,title:(0,X.jsx)(m().sA,{defaultMessage:"Try these options",id:"unfurling.errorOptions.menuTitle"})}),items:ce}),(0,X.jsx)(Y().A,{...oe,children:(0,X.jsx)(Q().Ay,{type:Q().Oh.Vertical,initialFocus:y?void 0:0,sections:de})})}function te(e){const t=(0,i().K8)((()=>{var t;return e.isCollectionView()?null===(t=e.getCollectionStore())||void 0===t||null===(t=t.getFormat().error)||void 0===t?void 0:t.status_code:e.getFormatStore().getKeyStore("error").getKeyStore("status_code").getValue()}),[e]),o=(0,i().K8)((()=>{let t;var o;e.isCollectionView()?t=null===(o=e.getCollectionStore())||void 0===o?void 0:o.getFormat().bot_id:t=e.getFormat().bot_id;const n=P().A.bots.state.find((e=>e.id===t));if(n)return(0,s().$1)(n.integration_id)}),[e]),{message:r,description:a}=n.useMemo((()=>(0,x().LU)(t,o)),[t,o]);return{statusCode:t,message:r,description:a}}function oe(e){const{onAuthenticate:t,onReplace:o,onUpdate:n,state:i,store:s,onRemove:c,style:d}=e,u=(0,a().IS)((e=>({orangeThemeColor:(0,f().k5)("orange",e),dropdownIcon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),{statusCode:g,message:v,description:h}=te(s),{isMobile:b}=(0,r().v3)().device;return(0,X.jsx)(N().Ay,{popupType:N().z7.Popup,originGap:4,renderOrigin:e=>439!==g?428===g?(0,X.jsxs)(F().A,{size:"lg",icon:e=>(0,p().Q)({...e,fill:u.orangeThemeColor.fill}),...e,...b&&{onClick:()=>{_().ui({showCancel:!1,keepFocus:!1,message:(0,X.jsx)(m().sA,{defaultMessage:"Please use the Notion desktop app or a web browser to select a file",id:"unfurling.errorOptions.googleDriveAccounts.mobileSelectFile"}),items:[{label:(0,X.jsx)(m().sA,{defaultMessage:"OK",id:"unfurling.errorOptions.googleDriveAccounts.mobileSelectFileOk"}),onAccept:()=>{}}]})}},children:[(0,X.jsx)(m().sA,{defaultMessage:"Select file to preview",id:"unfurling.errorOptions.googleDriveAccounts.selectFile"}),(0,l().b)(u.dropdownIcon)]}):(0,X.jsxs)(D().p,{style:d,icon:e=>(0,p().Q)({...e,fill:u.orangeThemeColor.fill}),...e,children:[(0,X.jsx)("span",{children:T().A.formatMessage(v)}),(0,l().b)(u.dropdownIcon)]}):(0,X.jsx)(D().p,{style:d,...e,children:(0,l().b)(u.dropdownIcon)}),render:e=>(0,X.jsx)(ee,{state:i,store:s,onUpdate:n?t=>{n(t),e.close()}:void 0,onAuthenticate:t?()=>{t(),e.close()}:void 0,onReplace:()=>{o(),e.close()},onRemove:c?()=>{c(),e.close()}:void 0,statusCode:g,errorDescription:h.description,description:T().A.formatMessage(h,{integrationName:i.integration.name,statusCode:g})})})}function ne(e){const{onAuthenticate:t,onReplace:o,onUpdate:n,state:r,store:i,onRemove:l}=e,c=(0,a().IS)((e=>({orangeThemeColor:(0,f().k5)("orange",e)})),[]),{statusCode:d,message:u,description:m}=te(i),g=r.integration.id===s().Hd&&428===d;return(0,X.jsxs)("div",{style:{alignSelf:"stretch"},children:[!g&&(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:v().J.UIRegular.desktop,fontWeight:v().Wy.medium,marginBottom:4},children:[(0,p().Q)({width:18,height:18,marginRight:6,fill:c.orangeThemeColor.fill}),(0,X.jsx)("span",{children:T().A.formatMessage(u)})]}),(0,X.jsx)("div",{style:{margin:"0 -14px"},children:(0,X.jsx)(ee,{state:r,store:i,onUpdate:n,onAuthenticate:t,onReplace:o,onRemove:l,statusCode:d,errorDescription:m.description,description:T().A.formatMessage(m,{integrationName:r.integration.name,statusCode:d}),isInlineMenu:!0})})]})}const re=function(e){let{store:t,canEdit:n,forceActionForUIDoc:s,postActionCallback:l,openPlaceholderMenu:c,buttonStyle:d,isHoverPreview:u,renderDefaultAction:p}=e;const f=(0,a().DP)(),v=(0,r().v3)(),_=(0,i().K8)((()=>(0,C().Cm)({store:t,isInDarkMode:ie(v),canEdit:n,currentUserId:v.currentUser.id,showAction:s})),[t,v,n,s]),b=(0,i().K8)((()=>ie(v)),[v]),w=(0,o(646736).HI)(),k=(0,i().K8)((()=>Boolean(null==w?void 0:w.isMember())),[w]),I=(0,i().K8)((()=>Boolean(null==w?void 0:w.isWorkspaceOwner())),[w]),A=(0,i().K8)((()=>{var e;return null===(e=M().default.state.currentSpaceStore)||void 0===e?void 0:e.getBotSettingsStore().getValue()}),[]);if(!_)return null;const{integration:T,action:P}=_,{r:B,g:R,b:E}=T.accentColor,N=`rgba(${B},${R},${E},${b?.6:1})`,F=I||(0,o(322769).nH)({spaceBotSettings:A,integrationId:T.id,env:"production"}),U={state:_,store:t,onUpdate:e=>{le({from:"external_object_instance_block_error_dropdown",botIds:e?[e]:void 0},t,v,l)},onAuthenticate:()=>{de({from:"external_object_instance_block_error_dropdown"},v,t,_,l)},onReplace:()=>{null==c||c()}},O={...U,onRemove:()=>{!function(e,t,o,n){var r;S().createAndCommit({userAction:"ExternalObjectInstanceAction.handleRemove",environment:e,canUndo:!0,perform:o=>{y().ZL({environment:e,blocks:[t],transaction:o})}}),h().gc(e,{integrationId:o.integration.id,entity:null===(r=o.pattern)||void 0===r?void 0:r.name}),null==n||n()}(v,t,_,l)}};return(0,X.jsxs)(X.Fragment,{children:["authenticate"===P&&(0,x().fY)(v)&&k&&F&&(0,X.jsx)(D().p,{icon:e=>(0,X.jsx)(L().A,{type:"image_url",imageURL:T.accentIcon,size:20,style:{...e,width:16,height:16,marginRight:8,marginLeft:2}}),onClick:()=>de({from:"external_object_instance_block"},v,t,_,l),style:{...ae(f,d),background:N,fontSize:14,height:32,paddingRight:12,color:b?f.regularTextColor:f.text.contrastPrimary},hoveredStyle:{background:(0,g().e$)(N,.4)},pressedStyle:{background:(0,g().e$)(N,.9)},children:(0,X.jsx)(m().sA,{defaultMessage:"Connect to {integration} to update",id:"unfurling.authenticateButton.title",values:{integration:_.integration.name}})}),"update"===P&&(0,X.jsx)(ce,{store:t,postActionCallback:l,buttonStyle:d,isHoverPreview:u}),"error"===P&&(u?(0,X.jsx)(ne,{...U}):(0,X.jsx)(oe,{...O,style:ae(f,d)})),!P&&p?(0,X.jsx)(se,{renderDefaultAction:p,buttonStyle:d,store:t}):null]})};function ie(e){return"dark"===e.ThemeStore.state.mode}function ae(e,t){return{marginRight:4,color:e.mediumTextColor,...t}}function se(e){let{renderDefaultAction:t,buttonStyle:o,store:n}=e;const i=(0,a().DP)(),s=(0,r().v3)(),{isMobile:l}=s.device;return(0,X.jsx)(N().Ay,{popupType:l?N().z7.SlideUp:N().z7.Popup,renderOrigin:e=>(0,X.jsx)(E().A,{...e,mobileFeedback:l,style:{display:"flex",alignItems:"center",justifyContent:"center",width:l?36:28,height:l?36:28,borderRadius:4,flexShrink:0,opacity:"shown"===t?1:0,...ae(i,o)},children:(0,c()._)({width:l?18:14,color:i.mediumIconColor})}),placementToOrigin:B().UV.Bottom,render:e=>(0,X.jsx)(A,{titleForReloadMenuOption:(0,X.jsx)(m().sA,{id:"linkPreview.reload",defaultMessage:"Reload preview"}),store:n,onAccept:()=>e.close(),extraSecondaryItemKey:"preview_to_mention"})})}function le(e,t,o,n){var r;const{from:i,botIds:a}=e,s=null===(r=M().default.state.currentSpaceStore)||void 0===r?void 0:r.id;s&&(w().lf({environment:o,from:i,store:t,spaceId:s,bypassCache:"external_object_instance_block_error_dropdown"===i,botIds:a}),null==n||n())}function ce(e){let{store:t,postActionCallback:o,buttonStyle:n,isHoverPreview:i}=e;const s=(0,a().DP)(),l=(0,r().v3)(),c=(0,X.jsx)(D().p,{onClick:()=>le({from:"external_object_instance_block"},t,l,o),style:ae(s,n),icon:e=>(0,u().$)({...e}),children:(0,X.jsx)(m().sA,{defaultMessage:"Update",id:"unfurling.updateButton.title"})});return i?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:v().J.UIRegular.desktop,marginBottom:4},children:[(0,d().G)({width:18,height:18,marginRight:6}),(0,X.jsx)("span",{children:(0,X.jsx)(m().sA,{defaultMessage:"This link preview is out-of-date.",id:"unfurling.updateButton.header"})})]}),c]}):c}function de(e,t,o,n,r){var i;const{from:a}=e,s=n.originalUrl,{currentSpaceStore:l}=M().default.state;if(!l)return;const c=null===(i=(0,C().g8)(s,l.id))||void 0===i?void 0:i.integration;c&&s&&(b().Jq({environment:t,integration:c,spaceId:l.id,unfurlUrl:s,externalObjectInstanceBlockId:o.id,from:a}),R().A.reset(),null==r||r())}},346615:(e,t,o)=>{o.d(t,{p:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("chevronDownRoundedThick",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M6.02734 8.80274C6.27148 8.80274 6.47168 8.71484 6.66211 8.51465L10.2803 4.82324C10.4268 4.67676 10.5 4.49609 10.5 4.28125C10.5 3.85156 10.1484 3.5 9.72363 3.5C9.50879 3.5 9.30859 3.58789 9.15234 3.74902L6.03223 6.9668L2.90722 3.74902C2.74609 3.58789 2.55078 3.5 2.33105 3.5C1.90137 3.5 1.55469 3.85156 1.55469 4.28125C1.55469 4.49609 1.62793 4.67676 1.77441 4.82324L5.39258 8.51465C5.58789 8.71973 5.78808 8.80274 6.02734 8.80274Z"})})},347199:(e,t,o)=>{o.d(t,{A:()=>n});const n={}},347469:(e,t,o)=>{o.d(t,{co:()=>v,OZ:()=>h,LO:()=>f});o(898992),o(354520);var n=()=>o(919709),r=()=>o(983650),i=()=>o(534177),a=()=>o(667019),s=(o(581454),()=>o(94953));var l=()=>o(555776),c=()=>o(47373),d=()=>o(947983),u=()=>o(351360),p=()=>o(786074),m=()=>o(230062),g=()=>o(141465);function f(e){var t;if(m().A.state)return;const o=(0,c().J0)(),{token:f,store:h}=e,_=n().uPN(f.textToken),b=null===(t=u().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId(),y=b?n().EF0(_).filter((e=>!(0,r().TH)({annotation:e,spaceId:b,getRecordModel:h.getRecordModel}))):[],S=b?n().QVD(_).filter((e=>!(0,r().TH)({annotation:e,spaceId:b,getRecordModel:h.getRecordModel}))):[],w=n().Pqo(_),k=n().i54(_),I=[n().VtW(_),n().$CJ(_),n().PVS(_),n().MzR(_),n().SEY(_),n().G6d(_),n().Sev(_)||void 0,n().lqY(_),n().zKJ(_),o&&n().snh(_)||void 0,...y,...S,n().g2K(_),w,k].filter(i().O9);I.length>0?(g().A.setState({type:"token",token:f,store:h,annotations:I}),(y.length>0||S.length>0)&&function(e){let{source:t,discussionAnnotations:o}=e;s().A.setState({source:t,discussionIds:o.map(n().fmO)})}({discussionAnnotations:[...y,...S],source:"editor"}),w&&!d().A.containedByAssistantEditCard(f.node)&&p().A.setState({...p().A.state,hoveredEditId:w[1]}),n().zKJ(_)&&l().A.setHoverWithSource("text_annotation"),k&&a().W.setState({hoveredEditId:k[1]})):v()}function v(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{relatedNode:o}=t;var n,r;g().A.state&&g().A.setState(void 0),n="editor",(null===(r=s().A.state)||void 0===r?void 0:r.source)===n&&s().A.setState(void 0),l().A.resetHoverSource("text_annotation"),!p().A.state.hoveredEditId||o&&d().A.containedByAssistantEditCard(o)||p().A.setState({...p().A.state,hoveredEditId:void 0}),null!==(e=a().W.state)&&void 0!==e&&e.hoveredEditId&&a().W.setState({hoveredEditId:void 0})}function h(e){e&&g().A.state&&g().A.state.store===e&&v()}},350188:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},352271:(e,t,o)=>{o.d(t,{Au:()=>c,GF:()=>r,_N:()=>s,ad:()=>g,g:()=>v,nc:()=>l,qe:()=>f,tu:()=>m,tz:()=>u,uM:()=>i,x3:()=>p,x4:()=>h,yP:()=>d});o(898992),o(354520),o(581454);var n=()=>o(496603);const r="COMPLETE_SPRINT_NEXT_SPRINT_DATE_RANGE",i="COMPLETE_SPRINT_ACTION_TYPE",a={duplicate_blocks:{display:!0},create_page:{display:!0},modal_confirmation:{display:!0},open_page:{display:!0},query_collection:{display:!0},slack_notification:{display:!0},update_pages:{display:!0},send_in_app_notification:{display:!0},send_gmail_notification:{display:!0},define_variables:{display:!0},http_request:{display:!0},publish_site:{display:!0},complete_sprint:{display:!1}};function s(e){return Object.entries(a).filter((t=>{let[o,n]=t;return n[e]})).map((e=>{let[t]=e;return t}))}function l(e,t){return a[e][t]}const c=["replace","append","remove","toggle"],d="replace";function u(e){return(null==e?void 0:e.action)||d}const p=100,m=50;function g(e){const{isGenericRecurrenceAllowed:t}=e;return{recurrence:t?{min:1,max:"default_bound"}:{min:1,max:1},button:{min:0,max:"default_bound"},event:{min:1,max:"default_bound"}}}function f(e){return l(e.type,"display")}function v(e){return"recurrence"===e.automation.getTriggerType()}function h(e){return(0,n().cz)(Object.values(e.actionValidationFailures).map((e=>(null==e?void 0:e.length)??0)))>0}},353643:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{initiator:"none",isDragging:!1,disableVerticalEdgeScroll:!1,disableHorizontalEdgeScroll:!1}}}const r=new n},354584:(e,t,o)=>{o.d(t,{y:()=>n});const n=new(o(645873).O2)("prismjs",(async()=>{const e=await Promise.resolve().then(o.bind(o,979004));return await e.importPrism()}))},355012:(e,t,o)=>{o.d(t,{$B:()=>l,C8:()=>a,K2:()=>c,Kn:()=>p,Wt:()=>s,fB:()=>u,oG:()=>d});o(944114),o(898992),o(803949),o(581454);var n=()=>o(496603),r=()=>o(41161),i=()=>o(713205);function a(e){let{spaceId:t,userId:o,pageId:n}=e;const r=i().A.getStore({spaceId:t,userId:o}).getState();if(!r)return;const a=r.pages[n];return a?{totalVisits:a.t,visits:a.v.map((e=>g(r.config,e)))}:void 0}function s(e){let{spaceId:t,userId:o,pageId:r,now:i,weightForVisit:s}=e;const l=a({spaceId:t,userId:o,pageId:r});if(!l)return;const c=l.visits.map((e=>s({now:i,visitedAt:e})));return l.totalVisits*(0,n().i2)(c)}function l(e){let{spaceId:t,userId:o,pageId:n,visitedAt:r}=e;c({spaceId:t,userId:o,visits:[{pageId:n,visitedAt:r}]})}function c(e){let{spaceId:t,userId:o,visits:n,isFromRecentPageVisits:a,isBackfill:s}=e;i().A.getStore({spaceId:t,userId:o}).update((e=>{if(s&&null!=e&&e.config.isBackfilledFromRecentPageVisits)return e;const t=s?{config:{maxEvents:1e3,minPages:100,maxVisitsPerPage:7,visitTimestampGranularity:"minute",isBackfilledFromRecentPageVisits:!1},pages:{},lastFrecencyUpdateFromRecentPageVisitsTime:0}:e??{config:{maxEvents:1e3,minPages:100,maxVisitsPerPage:7,visitTimestampGranularity:"minute",isBackfilledFromRecentPageVisits:!1},pages:{},lastFrecencyUpdateFromRecentPageVisitsTime:0};if(s&&(n.push(...function(e){let{userId:t}=e;const o=r().A.getVisitedIds(t),n=[];return o.forEach((e=>{r().A.getVisits(t,e).forEach((t=>n.push({pageId:e,visitedAt:t.timestamp})))})),n}({userId:o})),t.config.isBackfilledFromRecentPageVisits=!0,t.config.backfillTime=Date.now()),n.sort(m),a&&n.length){const e=n[n.length-1];t.lastFrecencyUpdateFromRecentPageVisitsTime=Math.max(t.lastFrecencyUpdateFromRecentPageVisitsTime,e.visitedAt)}let i=!1;for(const o of n){const e=o.pageId,n=f(t.config,o.visitedAt);if(v({state:t,pageId:e,truncatedVisitedAt:n}))continue;const r=t.pages[e]??{t:0,v:[]};i=!0,r.t+=1,r.v.push(n),r.v.sort(),r.v.length>t.config.maxVisitsPerPage&&r.v.shift(),t.pages[e]=r}if(!i)return t;const l=function(e){const t=[],o=Object.keys(e.pages);return o.forEach((o=>{(e.pages[o].v??[]).forEach((e=>t.push({pageId:o,visitedAt:e})))})),t.sort(m),t}(t);let c=l.length,d=Object.keys(t.pages).length;for(let o=0;c>t.config.maxEvents&&d>=t.config.minPages&&o<l.length;o++){const e=l[o],n=t.pages[e.pageId];if(c--,!n)continue;const r=n.v.shift();n.v.length||(d<=t.config.minPages&&r?(n.v.push(r),c++):(d--,delete t.pages[e.pageId]))}return t}))}function d(e){var t;let{spaceId:o,userId:n}=e;return null===(t=i().A.getStore({spaceId:o,userId:n}).getState())||void 0===t?void 0:t.lastFrecencyUpdateFromRecentPageVisitsTime}function u(e){var t;let{spaceId:o,userId:n}=e;return!0===(null===(t=i().A.getStore({spaceId:o,userId:n}).getState())||void 0===t?void 0:t.config.isBackfilledFromRecentPageVisits)}function p(e){let{spaceId:t,userId:o}=e;const n=i().A.getStore({spaceId:t,userId:o}).getState();if(!n||!n.config.isBackfilledFromRecentPageVisits)return;const r=[];return Object.keys(n.pages).forEach((e=>{const t=n.pages[e].v??[];r.push({pageId:e,visitedAt:g(n.config,t[t.length-1])})})),r.sort(((e,t)=>t.visitedAt-e.visitedAt))}function m(e,t){return e.visitedAt-t.visitedAt!=0?e.visitedAt-t.visitedAt:e.pageId.localeCompare(t.pageId)}function g(e,t){return"minute"===e.visitTimestampGranularity?60*t*1e3:(e.visitTimestampGranularity,0)}function f(e,t){return"minute"===e.visitTimestampGranularity?Math.floor(t/60/1e3):(e.visitTimestampGranularity,0)}function v(e){let{state:t,pageId:o,truncatedVisitedAt:n}=e;const r=t.pages[o]??void 0;if(!r)return!1;const i=r.v??void 0;return!!i&&i.includes(n)}},356596:(e,t,o)=>{o.d(t,{K:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("enter",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M5.38965 14.1667C5.81812 14.1667 6.10156 13.8767 6.10156 13.468C6.10156 13.2571 6.01587 13.0989 5.89062 12.967L4.18994 11.3125L3.02979 10.3369L4.55908 10.4028H12.7922C14.4402 10.4028 15.1389 9.65796 15.1389 8.04297V4.13403C15.1389 2.48608 14.4402 1.78735 12.7922 1.78735H9.13379C8.70532 1.78735 8.4021 2.11035 8.4021 2.50586C8.4021 2.90137 8.69873 3.22437 9.13379 3.22437H12.7593C13.4316 3.22437 13.7151 3.50781 13.7151 4.17358V7.99683C13.7151 8.67578 13.425 8.95923 12.7593 8.95923H4.55908L3.02979 9.03174L4.18994 8.04956L5.89062 6.39502C6.01587 6.26978 6.10156 6.11157 6.10156 5.89404C6.10156 5.48535 5.81812 5.19531 5.38965 5.19531C5.21167 5.19531 5.01392 5.27441 4.8689 5.41943L1.08521 9.1438C0.933594 9.28882 0.854492 9.48657 0.854492 9.68433C0.854492 9.87549 0.933594 10.0732 1.08521 10.2183L4.8689 13.9492C5.01392 14.0876 5.21167 14.1667 5.38965 14.1667Z"})})},357307:(e,t,o)=>{o.d(t,{Y:()=>c});var n=()=>o(110750),r=()=>o(607859),i=()=>o(155959),a=()=>o(351360),s=()=>o(210737),l=()=>o(991699);function c(e){var t,o;const{currentUserStore:c}=a().default.state,d=Boolean(null==c?void 0:c.id),u=r().default.state.isOnboarding,p=(0,i().T)("supportsNativeBottomBarOverlappingWebView")?s().A.hasOpenMobileSlideUps():s().A.hasOpenPopups(),m=l().A.state.open,g=(0,n().Xz)(e.TabbedRouterStore.state),f="web"!==g.type,v="web"===g.type&&("nativeTab"===g.route.name&&["members","trash","help","offline","settings"].includes(g.route.tab)||"nativeTab"===(null===(t=g.redirectedTo)||void 0===t?void 0:t.route.name)&&["members","trash","help","offline","settings"].includes(null===(o=g.redirectedTo)||void 0===o?void 0:o.route.tab)),h=d&&!m&&!u&&!p&&!v;return(0,i().T)("supportsWebManagedTabNavigation")&&!!f||h}},357473:(e,t,o)=>{o.d(t,{Cm:()=>a,Ug:()=>s,lw:()=>l,rE:()=>c});o(16280),o(898992),o(354520),o(581454);var n=o.n(o(702189)),r=()=>o(634201);const i=new(n()),a=n().DIFF_DELETE,s=n().DIFF_INSERT,l=n().DIFF_EQUAL;function c(e,t){const o=d(e,{count:0,encoding:{},decoding:{}}),n=o.encodedString,r=d(t,o.cypher),a=r.encodedString,s=r.cypher,l=function(e,t){return e.map((e=>{let[o,n]=e;return[o,u(n,t)]}))}(i.diff_main(n,a),s);return l.filter((e=>{let[t,o]=e;return""!==o}))}function d(e,t){const o=r().PE(e).map((e=>{const o=t.encoding[e];if(o)return o;{const o=String.fromCharCode(t.count);return t.count++,t.encoding[e]=o,t.decoding[o]=e,o}}));if(t.count>65535)throw new Error("This string has way too many different characters.");const n=o.join("");return{cypher:t,encodedString:n}}function u(e,t){return e.split("").map((e=>t.decoding[e])).join("")}},357625:(e,t,o)=>{o.d(t,{BP:()=>l,UT:()=>s,fJ:()=>d,u_:()=>u});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(416845),r=()=>o(386164),i=()=>o(449506),a=()=>o(787172);async function*s(e,t,o,n){const a={task:{eventName:t,request:o}},s=await i().callApi({eventName:"enqueueTask",environment:e,data:a,headers:n?(0,r().WS)(n):void 0});if("failed"===s.type)yield{error:s.error,taskStatus:"not_started"};else{const{taskId:n}=s.data;d.add(n),yield*l({environment:e,eventName:t,taskId:n,request:o})}}async function*l(e){const{environment:t,eventName:o,taskId:r,request:i}=e;for(;;){const e=await c(r);if("success"===e.state){const n=e.status;(0,a().s)({environment:t,eventName:o,response:n}),yield{value:n,taskStatus:"success"};break}if("failure"===e.state||"dead"===e.state||"timeout_before_execution"===e.state){yield{error:new(n().mv)(e.error||"Something went wrong.",{eventName:o,request:i},e.clientData),taskStatus:"failure"};break}"in_progress"===e.state&&e.status&&(yield{value:e.status,taskStatus:"in_progress"})}}async function c(e){return new Promise(((t,o)=>{u.addOnceListener(e,(e=>{t(e)}))}))}const d=new Set,u=new(o(752196).A)},358373:(e,t,o)=>{o.d(t,{v:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("dot",{viewBox:"0 0 5 4",svg:(0,n.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})},358547:(e,t,o)=>{o.d(t,{Lu:()=>a,Xi:()=>i,Y_:()=>r});o(16280);var n=()=>o(534177);function*r(e){yield e;for(const t of e.children)yield*r(t)}function*i(e){for(let t=e.startPath.length-1;t>=0;t--){const o=e.getStartBoundary(t);if(!o)throw new Error("Start boundary must be defined");t===e.startPath.length-1?yield o.parent:yield*o.childrenInsideRange}}function*a(e){for(const{position:t,tree:o}of function*(e){for(let t=e.startPath.length-1;t>=0;t--){const o=e.getStartBoundary(t);if(o&&(t===e.startPath.length-1&&(yield{position:"start",tree:o.parent}),t>0))for(const e of o.childrenInsideRange)yield{position:"within",tree:e}}for(let t=0;t<e.endPath.length;t++){const o=e.getEndBoundary(t);if(o)for(const t of o.childrenInsideRange)e.isInEndPath(t)?yield{position:"endPath",tree:t}:yield{position:"within",tree:t}}}(e))switch(t){case"start":case"endPath":yield o;break;case"within":yield*r(o);break;default:(0,n().HB)(t)}}},359848:(e,t,o)=>{o.d(t,{h:()=>l});o(296540);var n=()=>o(401497),r=()=>o(358373),i=()=>o(965998),a=o(474848);const s="#CB9433";function l(e){const{onlyShowDraftDot:t,customTop:o,customLeft:l,withBackgroundFill:c}=e,d=(0,n().IS)((e=>({icon:{height:24,width:24,color:e.lightTextColor},sharedDotStyles:{position:"absolute",borderRadius:"50%",color:s,stroke:e.whiteButtonBackground,strokeWidth:"1.2px",pointerEvents:"none"},absoluteDot:{top:o??20,left:l??"calc(50% + 4px)",height:12,width:12},absoluteOnlyDot:{top:o??6,left:l??19,height:8,width:8},withBackgroundFill:{backgroundColor:s,fill:"transparent"},container:{width:"100%",display:"flex",justifyContent:"center",marginBottom:10}})),[l,o]);return t?(0,r().v)({...d.sharedDotStyles,...d.absoluteOnlyDot,...c&&d.withBackgroundFill}):(0,a.jsxs)("div",{style:d.container,children:[(0,i().M)(d.icon),(0,r().v)({...d.sharedDotStyles,...d.absoluteDot})]})}},361051:(e,t,o)=>{o.d(t,{a:()=>r});var n=()=>o(292588);const r={table:o(519831).Vl,recordColumnTypes:{id:n().A.UUID,version:n().A.Number,last_version:n().A.Number,name:n().A.JSON,description:n().A.JSON,icon:n().A.String,cover:n().A.String,schema:n().A.JSON,format:n().A.JSON,parent_id:n().A.UUID,parent_table:n().A.String,alive:n().A.Boolean,file_ids:n().A.StringArray,template_pages:n().A.StringArray,copied_from:n().A.UUID,migrated:n().A.Boolean,space_id:n().A.UUID,deleted_schema:n().A.JSON},metaColumnTypes:{meta_user_id:n().A.UUID,meta_role:n().A.String}}},361330:(e,t,o)=>{o.d(t,{GR:()=>r,ab:()=>i,tu:()=>n});const n=300,r=75,i=225},361873:(e,t,o)=>{o.d(t,{A:()=>D});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(534177),s=()=>o(633457),l=()=>o(493208),c=()=>o(891078);class d extends(()=>o(757695))().default{getInitialState(){return{error:!1,loading:!1}}}const u=d;var p=()=>o(155004),m=()=>o(401497);function g(e,t){o(989423).vd(e,"view_link_preview",t)}o(581454);var f=()=>o(681873),v=()=>o(506391),h=()=>o(284371),_=()=>o(645873);const b=new(_().O2)("TooltipOnSlackEmbed",(async()=>await Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(49908)]).then(o.bind(o,909492)))),y=(0,_()._h)(b,(e=>e.TooltipOnSlackEmbed));var S=()=>o(106352),w=()=>o(854672),k=()=>o(296798),I=o(474848);const A=n.forwardRef((function(e,t){var s;const{state:d,store:u,style:p,externalObjectTokenStore:_,canEdit:b,forceActionForUIDoc:w,onClick:A,showDefaultAction:M}=e,{originalUrl:P,renderConfig:B,integration:R,updating:E,status_code:D}=d,N=(0,r().v3)(),L=(0,n.useRef)(null),F="placeholder"===d.type,U="error"===d.type,O=(0,i().K8)((()=>P&&(0,l().e)(P,u.pointer.spaceId)),[u.pointer,P]),{botId:V,externalObjectId:j}=(0,i().K8)((()=>{const e=u.getFormat();return{botId:(null==e?void 0:e.bot_id)||"",externalObjectId:(null==e?void 0:e.external_object_id)||""}}),[u]),z=(0,i().K8)((()=>o(131448).default.isVisible("ai_slack_qna_embed_tooltip")),[]),q=(0,i().K8)((()=>_.state.loading),[_]);(0,n.useEffect)((()=>{g(N,{integrationName:R.name,integrationId:R.id,botId:V,externalObjectId:j})}),[R,V,j,N]);const H=(0,c().pW)(u),W=(0,m().IS)((e=>{const t=!(!Boolean(B.previewAttributes)||!B.previewAttributes)&&(0,a().EI)(B.previewAttributes);return{linkBox:{flexGrow:1,minWidth:0,...(F||U)&&{background:e.embedPlaceholderBackground}},linkBoxInner:{display:"flex",alignItems:"center",border:`1px solid ${e.tableDividerColor}`,borderRadius:t?"0px 0px 4px 4px":4,borderLeft:t?"none":`1px solid ${e.tableDividerColor}`,borderRight:t?"none":`1px solid ${e.tableDividerColor}`,padding:"8px 12px",...H,...p},title:{fontWeight:h().Wy.medium,...h().RC,color:e.regularTextColor},subHeaderContainer:{display:"flex",alignItems:"center",color:e.mediumTextColor,fontSize:12}}}),[F,U,B.previewAttributes,H,p]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(k().A,{style:W.linkBox,innerStyle:W.linkBoxInner,...F||U?{onClick:A}:{href:O,external:!0},children:[(0,I.jsx)("div",{style:{display:"flex",alignSelf:"start",height:32,width:32,marginRight:12,marginLeft:4,marginTop:3,marginBottom:3,position:"relative"},children:(0,I.jsx)(x,{renderConfig:B,integrationIcon:R.icon})}),(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",flexGrow:1,flexShrink:1,overflow:"hidden"},children:[(0,I.jsxs)("div",{style:{display:"flex",alignItems:"baseline",fontSize:14},children:[(0,f().A)((null===(s=B.headerAttributes)||void 0===s?void 0:s.map(((e,t)=>(0,I.jsx)(S().Ic,{...e,store:u,style:0===t?W.title:{}},`attribute-${t}`))))||[],(e=>(0,I.jsx)("span",{style:{marginRight:6}},`spacer-${e}`))),(E||439===D||q)&&(0,I.jsx)(o(331542).A,{style:{marginLeft:6}})]}),B.bodyAttribute&&((0,v().Q7)(B.bodyAttribute)?(0,I.jsx)(S().L1,{attribute:B.bodyAttribute}):(0,I.jsx)(S().xq,{attribute:B.bodyAttribute,store:u})),(0,I.jsxs)("div",{style:W.subHeaderContainer,children:[B.subheaderIcon&&(0,I.jsx)(C,{attribute:B.subheaderIcon}),B.subheaderAttributes&&(0,f().A)(B.subheaderAttributes.map((e=>(0,I.jsx)(T,{attributeConfig:e,store:u},e.attribute.id))),(e=>(0,I.jsx)("span",{style:{marginLeft:3,marginRight:3},children:"•"},e)))]})]}),(0,I.jsx)(o(346436).A,{canEdit:b,forceActionForUIDoc:w,store:u,renderDefaultAction:M?"shown":"invisible",buttonStyle:B.bodyAttribute?{alignSelf:"flex-start",marginTop:4}:{marginLeft:4},openPlaceholderMenu:A})]}),(0,I.jsx)(o(594607).B,{shouldShow:z,calloutId:"ai_slack_qna_embed_tooltip",children:(0,I.jsx)(y,{origin:L,originalUrl:P})})]})}));function x(e){let{renderConfig:t,integrationIcon:n}=e;const r=(0,m().DP)(),i=o(496603).hS(t.icons||[],(e=>`${e.type}:${e.values[0].toString()}`));return i.length>=2?(0,I.jsxs)("div",{style:{width:32,height:32},children:[(0,I.jsx)(S().Tr,{attribute:i[0],isSmall:!0}),(0,I.jsx)(S().Tr,{attribute:i[1],isSmall:!0,style:{position:"absolute",bottom:0,right:2}}),(0,I.jsx)(w().A,{type:"image_url",imageURL:n,size:16,style:{position:"absolute",bottom:-3,right:-3},imageStyle:M(r)})]}):1===i.length?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(S().Tr,{attribute:i[0],isSmall:!1}),(0,I.jsx)(w().A,{type:"image_url",imageURL:n,size:16,style:{position:"absolute",bottom:-2,right:-2},imageStyle:M(r)})]}):(0,I.jsx)(w().A,{type:"image_url",imageURL:n,size:38})}function C(e){let{attribute:t}=e;const n=(0,m().DP)();if((0,v().nN)(t)){const e=t.values[0];return(0,I.jsx)(o(360083).A,{isAuthenticated:!1,url:e,width:32,render:(e,t)=>(0,I.jsx)(o(816559).Ay,{src:t,height:12,placeholderLoadedStyle:{width:12,height:12,marginRight:4}})})}if((0,v().YX)(t)){const e=t.values[0],r=e?`rgb(${e.r},${e.g},${e.b})`:"gray",{colorName:i,shade:a}=(0,o(100622).zl)(r);return(0,I.jsx)("div",{style:{width:12,height:12,marginRight:4,background:n.accentColors[i][a],borderRadius:4,flexShrink:0}})}return null}function T(e){let{attributeConfig:t,store:o}=e;return(0,I.jsx)(S().Ic,{...t,store:o})}function M(e){return{filter:`\n            drop-shadow(0px 0px 1px ${e.contentBackground})\n            drop-shadow(0px 0px 1px ${e.contentBackground})\n            drop-shadow(0px 0px 1px ${e.contentBackground})\n        `}}const P=n.forwardRef((function(e,t){const{attributes:s,state:l,store:c,blockResizerStore:d,externalObjectTokenStore:u,canEdit:p,forceActionForUIDoc:f,onClick:v,showDefaultAction:h}=e,_=s[0],{values:b,mimeType:y}=_,S=b[0],w=(0,r().v3)(),k=(0,i().K8)((()=>c.isExternalObjectInstanceBlockStore()?c:void 0),[c]),{botId:x,externalObjectId:C}=(0,i().K8)((()=>{const e=c.getFormat();return{botId:(null==e?void 0:e.bot_id)||"",externalObjectId:(null==e?void 0:e.external_object_id)||""}}),[c]);(0,n.useEffect)((()=>{g(w,{integrationName:l.integration.name,integrationId:l.integration.id,botId:x,externalObjectId:C})}),[l.integration,x,C,w]);const T=(0,m().IS)((e=>({container:{overflow:"hidden",borderRadius:6,border:`1px solid ${e.tableDividerColor}`,borderBottom:void 0,position:"relative"}})),[]);let M;"image/*"===y?M="image":"audio/*"===y?M="audio":"video/*"===y?M="video":"application/pdf"===y?M="pdf":"text/html"===y?M="embed":(0,a().HB)(y);const P="image"===M||"pdf"===M||"embed"===M;return k?(0,I.jsx)("div",{style:T.container,children:(0,I.jsx)(o(24611).Ay,{store:k,source:S,showExpandButton:P,mediaType:M,disabled:!1,preserveScale:"image"===M,blockResizerStore:d,contentBelowSource:(0,I.jsx)(A,{state:l,store:c,canEdit:p,externalObjectTokenStore:u,forceActionForUIDoc:f,ref:t,onClick:v,showDefaultAction:h})})}):null}));function B(e){const{originalUrl:t,store:o}=e,n=(0,c().pW)(o),r=(0,m().IS)((e=>({linkBox:{display:"flex",alignItems:"center",border:`1px solid ${e.tableDividerColor}`,borderRadius:4,borderLeft:`1px solid ${e.tableDividerColor}`,borderRight:`1px solid ${e.tableDividerColor}`,padding:"8px 12px",...n}})),[n]);return(0,I.jsxs)(k().A,{href:t,external:!0,style:{flexGrow:1,minWidth:0},innerStyle:r.linkBox,children:[(0,I.jsx)(R,{style:{width:38,height:38}}),(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"column",flexGrow:1},children:[(0,I.jsx)(R,{style:{width:"50%",height:14,margin:4}}),(0,I.jsx)(R,{style:{width:"40%",height:12,margin:4}})]})]})}function R(e){let{style:t}=e;const o=(0,m().IS)((e=>({container:{overflow:"hidden",position:"relative",background:e.selectLightGray[30],...t},shimmerDiv:{position:"absolute",height:"100%",width:"100%",zIndex:1,animation:"shimmer 1s infinite",background:`linear-gradient(to right, ${e.selectLightGray[30]} 0%, ${e.selectLightGray[50]} 20%, ${e.selectLightGray[30]} 40%, ${e.selectLightGray[30]} 100%)`}})),[t]);return(0,I.jsx)("div",{style:o.container,children:(0,I.jsx)("div",{style:o.shimmerDiv})})}function E(e,t){const{store:d}=e,m=(0,n.useRef)(null),g=(0,r().v3)(),f=(0,c().bx)(d,e.disabled),[v,h]=(0,n.useState)(!1),_=v||g.device.isMobile,b=(0,i().uB)(void 0,u),y=(0,i().uB)(e.blockResizerStore,o(891279).A),S=(0,n.useCallback)((()=>{h(!0)}),[]),w=(0,n.useCallback)((()=>{h(!1)}),[]),k=(0,i().K8)((()=>(0,l().Cm)({store:d,isInDarkMode:N(g),canEdit:f,currentUserId:g.currentUser.id,showAction:e.forceActionForUIDoc})),[f,g,e.forceActionForUIDoc,d],{useDeepEqual:!0}),x=(0,i().K8)((()=>(0,l().gV)(d)),[d]),C=(0,n.useCallback)((()=>{if("placeholder"===(null==k?void 0:k.type)||"error"===(null==k?void 0:k.type)){const e=m.current;if(e&&e instanceof Element)return e}}),[k]),T=(0,n.useCallback)((()=>{const e=C();e&&function(e,t,o,n,r){const i=(0,l().gV)(o);s().pk({originRect:e.getBoundingClientRect(),environment:t,externalObjectInstanceBlockStore:o,placeholderIntegrationId:null==i?void 0:i.integration_id,integration:null==r?void 0:r.integration,externalObjectTokenStore:n})}(e,g,d,b,k)}),[g,b,C,d,k]),M=k?"error"!==k.type||null!=x&&x.integration_id?(0,I.jsx)(p().s,{allowSelectionWithin:!0,ref:m,onMouseEnter:S,onMouseLeave:w,children:k.renderConfig.previewAttributes&&(0,a().EI)(k.renderConfig.previewAttributes)?(0,I.jsx)(P,{attributes:k.renderConfig.previewAttributes,blockResizerStore:y,canEdit:f,externalObjectTokenStore:b,state:k,store:d,forceActionForUIDoc:e.forceActionForUIDoc,onClick:T,ref:m,showDefaultAction:_}):(0,I.jsx)(A,{canEdit:f,externalObjectTokenStore:b,state:k,store:d,forceActionForUIDoc:e.forceActionForUIDoc,style:e.style,onClick:T,ref:m,showDefaultAction:_})}):(0,I.jsx)(p().s,{allowSelectionWithin:!0,ref:m,children:(0,I.jsx)(B,{store:d,style:e.style,originalUrl:k.originalUrl})}):(0,I.jsx)(p().s,{allowSelectionWithin:!0,ref:m,children:(0,I.jsx)(B,{store:d,style:e.style,originalUrl:void 0})});return(0,c().NW)(d,t,(0,n.useMemo)((()=>({renderedType:"external_object_instance",getBlockStore:()=>d,getNode:()=>m.current,handleCreated:T})),[T,d]),M)}const D=n.memo(n.forwardRef(E),o(821062).A);function N(e){return"dark"===e.ThemeStore.state.mode}},363019:(e,t,o)=>{o.d(t,{F:()=>u});var n=()=>o(209416),r=()=>o(473227),i=()=>o(930545),a=()=>o(878377),s=()=>o(792609),l=()=>o(202786),c=()=>o(416726);const d=(0,o(959013).YK)({suggestName:{id:"action.suggest.name",defaultMessage:"Suggest"}});function u(e){return(0,c().Fw)({key:"suggest",displayName:d.suggestName,analyticsName:d.suggestName.defaultMessage,svg:n().a,hideFromSlashActionMenu:!0,validators:[a().AU6(a().FrL),a().$9,a().AU6(a().vEP),s().Y,i()._h,i().bn,a().or([a().vXb,l().T]),a().AU6(a().yAQ)],shortcuts:["suggest"],closeParentMenu:!0,action:t=>{let{blocks:o,environment:n}=t;o[0]&&r().tf({environment:n,navigableBlockStore:o[0],mode:"suggest",location:e})}})}},365002:(e,t,o)=>{o.d(t,{Y:()=>s,_:()=>l});var n=()=>o(484714),r=()=>o(56366),i=()=>o(351360),a=()=>o(134217);function s(e,t){return(0,r().K8)((()=>a()._7(e,t.state)),[e,t])}function l(){const e=(0,n().v3)(),t=(0,r().K8)((()=>{var e;return null===(e=i().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]);return(0,r().K8)((()=>a().e9(e,t)),[e,t])}},365136:(e,t,o)=>{o.d(t,{A:()=>a});o(296540);var n=()=>o(959013),r=()=>o(100622),i=o(474848);const a=function(e){let{style:t}=e;return(0,i.jsx)(o(859428).A,{renderTooltip:()=>(0,i.jsx)(n().sA,{defaultMessage:"Only you can see this page",id:"privatePageBadge.tooltip"}),render:e=>(0,i.jsx)("div",{style:{display:"flex",alignItems:"flex-start",...t||{}},...e,children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)("div",{style:{flexShrink:0,marginTop:-1,marginRight:4,fill:r().Ay.red},children:(0,o(315564).S)({width:12})}),(0,i.jsx)("span",{style:{fontSize:12,fontWeight:o(284371).Wy.semibold,color:r().Ay.red},children:(0,i.jsx)(n().sA,{defaultMessage:"Private",id:"privatePageBadge.label"})})]})})})}},365233:(e,t,o)=>{o.d(t,{A:()=>n});o(898992),o(908872);function n(e){return![".","#","$","[","]"].map((t=>-1!==e.indexOf(t))).reduce(((e,t)=>e||t),!1)}},366295:(e,t,o)=>{o.d(t,{L:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("face",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.00992 2.5822C7.37564 1.60345 5.34973 1.8529 4.00205 3.05811C3.69329 3.33423 3.66683 3.80837 3.94295 4.11712C4.21906 4.42588 4.6932 4.45234 5.00196 4.17622C5.874 3.39637 7.18434 3.23731 8.23923 3.86907C8.49682 4.02334 8.71888 4.21224 8.90393 4.42579C9.17518 4.73883 9.64885 4.7727 9.96188 4.50144C10.2749 4.23018 10.3088 3.75652 10.0375 3.44348C9.7497 3.11132 9.40554 2.81913 9.00992 2.5822ZM10.5773 5.23958C11.7812 3.22935 14.3868 2.57569 16.397 3.77958C17.031 4.15924 17.5315 4.6799 17.8804 5.27786C18.0892 5.6356 17.9685 6.09487 17.6107 6.30365C17.253 6.51244 16.7937 6.39169 16.5849 6.03394C16.3601 5.64878 16.038 5.31297 15.6264 5.06646C14.3268 4.2882 12.6425 4.71076 11.8642 6.01027L6.20294 15.4633L10.5234 16.1636C10.9322 16.2299 11.21 16.615 11.1437 17.0239C11.0774 17.4328 10.6922 17.7105 10.2834 17.6443L4.87132 16.767C4.62587 16.7272 4.41609 16.5684 4.31125 16.3429C4.2064 16.1175 4.22013 15.8547 4.34788 15.6414L10.5773 5.23958ZM14.4038 8.94146C14.2934 9.6229 13.6514 10.0858 12.97 9.97532C12.2885 9.86487 11.8257 9.22291 11.9361 8.54147C12.0466 7.86003 12.6885 7.39716 13.37 7.50761C14.0514 7.61806 14.5143 8.26002 14.4038 8.94146ZM7.81488 7.87364C7.70443 8.5551 7.06245 9.01799 6.38099 8.90754C5.69953 8.79708 5.23663 8.15511 5.34709 7.47364C5.45755 6.79218 6.09952 6.32929 6.78099 6.43975C7.46245 6.5502 7.92534 7.19218 7.81488 7.87364Z"})})},369186:(e,t,o)=>{o.d(t,{Lv:()=>k,dI:()=>w,fx:()=>b,jr:()=>y,ke:()=>A});o(16280),o(944114),o(898992),o(354520),o(672577),o(581454);var n=()=>o(534177),r=()=>o(31503),i=()=>o(708685),a=()=>o(970013),s=()=>o(487929),l=()=>o(713998),c=()=>o(651124),d=()=>o(390066),u=()=>o(924329),p=()=>o(778781),m=()=>o(691678),g=()=>o(475140),f=()=>o(564262),v=()=>o(976618),h=()=>o(120997),_=()=>o(251822);function b(e){const{rawModulesByArea:t,relatedRecordData:o,normalizationOptions:r}=e,{collectionSchema:i,collectionFormat:a,viewsModuleCollectionViewBlock:s,formQuestionModels:l}=o,{includeDeletedPropertyModules:c}=r;let d={page_main:[],page_details:[],form_layout_schema:[]};if(!t||!i)return d;const g=(0,v().E)(t,(e=>function(e){const{module:t}=e;if((0,p().cn)(t))return;if("property"===t.type)return w({...e,module:t});if("titleWithIcon"===t.type)return(0,u().X)(t);return t}({module:e,collectionSchema:i}))),f={page_main:g.page_layout_schema||[],page_details:g.page_info_layout_schema||[],form_layout_schema:g.form_layout_schema||[],...g.form_conditional_modules?{form_conditional_modules:g.form_conditional_modules}:{},...g.views_main_tab_modules?{views_main_tab_modules:g.views_main_tab_modules}:{}};return d=(0,m()._V)(f),d=y({modulesByArea:d,collectionSchema:i,collectionFormat:a,formQuestionModels:l,includeDeletedPropertyModules:c}),d=function(e){const t=function(e,t){const o=new Map,n=[];for(const r of e)t.includes(r.type)?o.has(r.type)||(o.set(r.type,r),n.push(r)):n.push(r);return n}(e.page_main,["normalizedTitleWithIcon"]);return{...e,page_main:S(t)}}(d),d=function(e){const{modulesByArea:t,viewsModuleCollectionViewBlock:o}=e;if(o)return t;let r=t;r=(0,m().KO)(t,(e=>"viewsMain"!==e.type));const i=r.views_main_tab_modules;if(!i)return r;const{nonMoveableHeaderModules:a,moveableModules:s,nonMoveableFooterModules:l}=(0,_().jS)("page_main",r.page_main),c=[],d=[],u=[];for(const p of(0,n().uv)(i)){const e=i[p],{nonMoveableHeaderModules:t,moveableModules:o,nonMoveableFooterModules:n}=(0,_().jS)("views_main_tab_modules",e);c.push(...t),d.push(...o),u.push(...n)}return r.page_main=[...a,...c,...s,...d,...l,...u],r.views_main_tab_modules=void 0,r}({modulesByArea:d,viewsModuleCollectionViewBlock:s}),d}function y(e){const{modulesByArea:t,collectionFormat:o,collectionSchema:i,formQuestionModels:u,includeDeletedPropertyModules:v}=e;let b=t;return b=(0,m().KO)(t,(e=>"expandedBacklinks"!==e.type)),b=function(e){const{collectionFormat:t,collectionSchema:o,modulesByArea:n}=e;let r=(0,m().KO)(n,(e=>!(0,p().N1)(e)&&!(0,p().QV)(e)));return r=function(e){var t;const{collectionFormat:o,collectionSchema:n,modulesByArea:r}=e,i=Boolean((0,g().JO)(r,p().V_)),a=o&&n?(0,d().L)(o,n,void 0,c().jf.Collection):void 0,l=a&&n?(0,s().u)({schema:n,format:a,visibilityLevels:["inline","minimal"]}):void 0,u=Boolean(null==l?void 0:l.length);if(u&&i)return r;if(!u&&!i)return r;if(!u&&i)return(0,m().KO)(r,(e=>!(0,p().V_)(e)));const v=(0,f().W)(r),h="views_main_tab_modules"===v.area?null==r||null===(t=r.views_main_tab_modules)||void 0===t?void 0:t[v.viewsMainTabId]:r.page_main;if(!h)throw new Error("layout area to add relations group module to is not initialized");const{nonMoveableHeaderModules:b,moveableModules:y,nonMoveableFooterModules:S}=(0,_().jS)(v.area,h),w=[...b,...y,{id:"relations_group",type:"relationsGroup"},...S];let k;k="views_main_tab_modules"===v.area?{...r,views_main_tab_modules:{...r.views_main_tab_modules,[v.viewsMainTabId]:w}}:{...r,page_main:w};return k}({collectionFormat:t,collectionSchema:o,modulesByArea:r}),r}({collectionFormat:o,collectionSchema:i,modulesByArea:b}),v||(b=(0,m().KO)(b,(e=>!(0,p().nM)(e)))),b=function(e){const{modulesByArea:t,collectionSchema:o,formQuestionModels:i}=e;if(!o||!i)return t;const s={...t,form_layout_schema:[],form_conditional_modules:{}},c=t.form_layout_schema,d=[...c],u=e=>{var t;if("formQuestion"!==e.type)return e;const s={...e,conditionalGroups:void 0},c=i.find((t=>t&&t.id===e.formQuestionId)),d=null==c||null===(t=c.getConfig())||void 0===t?void 0:t.propertyId;if(!d)return s;const u=(0,l()._g)({schema:o,property:d});if(!u)return s;const p=(0,a().lx)(u)||(0,l().MW)(u),m=c.getInternalQuestionErrorState({collectionSchema:o});if(!p||m)return s;const g=(0,r().hm)(u,c),f=(e.conditionalGroups??[]).map((e=>{const t=(0,r().xj)({propertyId:d,propertySchema:u,conditionalGroup:e});if(!t)return;const{filter:o}=t.trigger;return"enum_contains_all"===o.operator&&1===g?{...e,trigger:{...e.trigger,filter:{...o,operator:"enum_contains"}}}:t})).filter(n().O9);return{...e,conditionalGroups:f}};for(;d.length>0;){const e=d.shift();if(!e)continue;const o=u(e);if(o&&((0,h().p)(o,"form_conditional_modules")&&void 0!==o.parentModuleId?(s.form_conditional_modules||(s.form_conditional_modules={}),s.form_conditional_modules[o.id]=o):s.form_layout_schema.push(o),"formQuestion"===o.type))for(const n of o.conditionalGroups??[])for(const e of n.children??[]){var p;const o=null===(p=t.form_conditional_modules)||void 0===p?void 0:p[e];o&&d.push(o)}}return s}({modulesByArea:b,collectionSchema:i,formQuestionModels:u}),b}function S(e){const t=[...e],o=t.findIndex((e=>"editor"===e.type));if(-1!==o&&o!==t.length-1){const e=t.splice(o,1)[0];t.push(e)}return t}function w(e){const{module:t}=e;let o;if(o=e.collectionSchema?e.collectionSchema[t.propertyId]:e.collectionModel.getNormalizedSchema()[t.propertyId],!o)return{type:"deleted_property",id:t.id,rawModule:t};if((0,a().JY)(o)){var n;const e=`property_${o.type}`;return{type:e,propertyId:t.propertyId,id:t.id,style:(null===(n=t.config)||void 0===n||null===(n=n[e])||void 0===n?void 0:n.style)??"compact"}}var r,s,l;if((0,a().AM)(o))return{type:`property_${o.type}`,propertyId:t.propertyId,id:t.id,style:(null===(r=t.config)||void 0===r||null===(r=r.property_number)||void 0===r?void 0:r.style)??"large"};if("formula"===o.type)return{type:`property_${o.type}`,propertyId:t.propertyId,id:t.id,style:(0,i().isNumberFormulaPropertySchema)(o)?(null===(s=t.config)||void 0===s||null===(s=s.property_formula)||void 0===s?void 0:s.style)??"large":"small"};if("file"===o.type)return{type:`property_${o.type}`,propertyId:t.propertyId,id:t.id,style:(null===(l=t.config)||void 0===l||null===(l=l.property_file)||void 0===l?void 0:l.style)??"landscape"};return{type:`property_${o.type}`,propertyId:t.propertyId,id:t.id}}function k(e){if((0,p().gx)(e)){return{type:"property",propertyId:e.propertyId,id:e.id,config:I(e)}}return"deleted_property"===e.type?e.rawModule:"normalizedTitleWithIcon"===e.type?(0,u().I)(e):e}function I(e){if((0,p().gx)(e))switch(e.type){case"property_person":case"property_created_by":case"property_last_edited_by":case"property_number":case"property_formula":case"property_file":return{[e.type]:{style:e.style}};default:return{}}return{}}function A(e){return e.map((e=>k(e)))}},369241:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},370614:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{banners:[]}}}const r=n},372154:(e,t,o)=>{o.d(t,{A:()=>a,c:()=>n});let n=function(e){return e[e.Open=0]="Open",e[e.Resolved=1]="Resolved",e[e.NewThread=2]="NewThread",e}({});class r extends(()=>o(757695))().default{getInitialState(){return{open:!1,rect:o(397248).v_}}getFramePageFirstSelectedDiscussionId(){var e,t;return this.state.open&&(o(489348).A.isBlockInFrame(this.state.blockStore)||this.state.blockStore.id===(null===(e=o(351360).default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id))?null===(t=this.state.discussionIds)||void 0===t?void 0:t[0]:void 0}addNewDiscussionId(e){this.state.open&&this.setState({...this.state,discussionIds:[...this.state.discussionIds??[],e],keepNewDiscussionAtBottom:!0})}}const i=new r;(0,o(604341).exposeDebugValue)("BlockDiscussionMenuStore",i);const a=i},372657:(e,t,o)=>{o.d(t,{Hc:()=>g,Pk:()=>u,n6:()=>m,rD:()=>p,zO:()=>d});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520);var n=()=>o(700500),r=()=>o(179034),i=()=>o(519831),a=()=>o(861841),s=()=>o(188669),l=()=>o(630116),c=()=>o(776894);function d(e,t){return!(!e.isNavigableBlock()&&e.getType()!==n().xd.alias)&&(!e.isLinkedCollectionView()&&(!e.getMovedStore().getValue()&&!(0,c().qy)({targets:t,destination:e,direction:a().bH.Onto})))}function u(e){let{recentPageResults:t,blockResults:o,suggestedPages:n}=e;const r=new Set;for(const i of n){const e=i instanceof l().md?i.getParentId():i.id;e&&r.add(e)}return[...t.filter((e=>!r.has(e.blockId))),...o.filter((e=>!r.has(e.blockId)))]}function p(e){const t=[];for(const n of e){const e=n.getParentPointer();if(e)if(e.table===r().ev)t.push(e.id);else if(e.table===i().Vl){var o;const e=null===(o=n.getAssociatedCollectionStore())||void 0===o?void 0:o.getParentPointer();e&&e.table===r().ev&&t.push(e.id)}}return t}function m(){const e=s().Ay.getDatabaseType();return"typed"===s().Ay.getVariant()&&e&&"notion://wiki_collection"!==e}function g(){return s().Ay.state.isOpen&&s().Ay.state.targets.length>0}},373444:(e,t,o)=>{o.d(t,{O:()=>n});const n=new(o(645873).O2)("workflowTemplatesOnboardingActions",(async()=>await Promise.all([o.e(96346),o.e(36192),o.e(90409),o.e(63077),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(21475)]).then(o.bind(o,32454))))},374026:(e,t,o)=>{o.d(t,{S:()=>a,V:()=>i});var n=()=>o(451306),r=()=>o(695625);function i(e){var t;let o,{discussionId:i}=e;const a=null===(t=document.getElementsByClassName(`${(0,n().wV)({discussionId:i})}`))||void 0===t?void 0:t[0];return a&&(o=r().T.findSelectableFromChildNode(a)),o}function a(e){let{discussionId:t,blockId:o}=e,n=i({discussionId:t});if(!n){const e=r().T.findScrollToSelectablesFromIds([o]);e.length>0&&(n=e[0])}return n}},375447:(e,t,o)=>{o.d(t,{A:()=>a,k:()=>r});var n=()=>o(40851);const r=["date","user","page","team","group","heading","bot","formula","custom-formula","createPage"];class i extends(()=>o(757695))().default{getInitialState(){return{open:!1,sessionId:void 0,botRequestStore:new(n().A),emptyQueryUserRequestStore:new(n().A),mentionTypes:{page:!1,heading:!1,createPage:!1,user:!1,inviteUserToWorkspace:!1,inviteUserToPage:!1,bot:!1,date:!1,reminder:!1,templateVariable:!1,group:!1,team:!1,formulaContextVariable:!1}}}updateOpenState(e){const t=this.state;t.open&&this.setState({...t,...e})}getMentionMenuContext(){const e=this.state;if(e.open)return e.textStore.table===o(179034).ev?"block":"comment"}getInviteOrigin(){return"comment"===this.getMentionMenuContext()?"comment_mention":"inline_mention"}getIsMockText(){var e;const t=this.state;return t.open&&(null===(e=t.textStore)||void 0===e?void 0:e.inMemoryRecordCache.isMockTextStore)}}const a=new i},375555:(e,t,o)=>{function n(e,t){const{device:o}=e;o.isAndroid&&t.focus(),t.select()}o.d(t,{G:()=>n})},376413:(e,t,o)=>{o.r(t),o.d(t,{importGtmFavorite:()=>g});o(296540);var n=()=>o(959013),r=()=>o(937075),i=()=>o(901389),a=()=>o(436572),s=()=>o(317909),l=()=>o(351360),c=()=>o(159495),d=()=>o(401497),u=o(474848);function p(e){const{favorite:t,isReplacingFavorite:o}=e,r=(0,d().IS)((e=>({title:{fontWeight:700,marginBottom:"1em"},prompt:{color:e.lightTextColor,maxHeight:"5em",overflowX:"hidden",overflowY:"scroll",whiteSpace:"pre-wrap"}})),[]),i=o?(0,u.jsx)(n().sA,{defaultMessage:"Overwrite “{favoriteName}” AI action?",id:"ai.favoriteActions.importFavorite.overwriteMessage",values:{favoriteName:t.name}}):(0,u.jsx)(n().sA,{defaultMessage:"Add “{favoriteName}” AI action?",id:"ai.favoriteActions.importFavorite.addMessage",values:{favoriteName:t.name}}),a=(0,u.jsx)(n().sA,{defaultMessage:"“{favoritePrompt}”",id:"ai.favoriteActions.importFavorite.prompt",values:{favoritePrompt:t.action.prompt}});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{style:r.title,children:i}),(0,u.jsx)("div",{style:r.prompt,children:a})]})}var m=()=>o(12);async function g(e){const{environment:t}=e,o=await(0,m().VL)({environment:t,blockId:e.importArgs.blockId});"error"!==o.type?await async function(e){const{environment:t,newFavorite:o}=e,{currentUserSettingsStore:d}=l().default.state;if(!d)return;const m=(0,c().IQ)(d);let g=(0,u.jsx)(n().sA,{defaultMessage:"Add AI action",id:"ai.favoriteActions.importFavorite.addAction"}),f=(0,u.jsx)(n().sA,{defaultMessage:"Cancel",id:"ai.favoriteActions.importFavorite.cancelAction"}),v=(0,u.jsx)(n().sA,{defaultMessage:"“{favoriteName}” AI action added to your Favorites.",id:"ai.favoriteActions.importFavorite.favoriteAdded",values:{favoriteName:o.name}}),h=!1;for(const r of m)if(r.name===o.name){if(r.action.type===o.action.type&&r.action.prompt===o.action.prompt)return void a().D6({label:(0,u.jsx)(n().sA,{defaultMessage:"“{favoriteName}” AI action is already in your Favorites.",id:"ai.favoriteActions.importFavorite.alreadyInFavorites",values:{favoriteName:o.name}})});o.id=r.id,h=!0,g=(0,u.jsx)(n().sA,{defaultMessage:"Overwrite existing AI action",id:"ai.favoriteActions.importFavorite.overwriteAction"}),f=(0,u.jsx)(n().sA,{defaultMessage:"Keep existing AI action",id:"ai.favoriteActions.importFavorite.keepExistingAction"}),v=(0,u.jsx)(n().sA,{defaultMessage:"“{favoriteName}” AI action updated in your Favorites.",id:"ai.favoriteActions.importFavorite.favoriteUpdated",values:{favoriteName:o.name}});break}const{accept:_}=await i().Gh({message:(0,u.jsx)(p,{favorite:o,isReplacingFavorite:h}),acceptLabel:g,cancelLabel:f});if(!_)return;s().createAndCommit({userAction:"favoriteActions.handleFavoriteImport",environment:t,canUndo:!0,perform(e){(0,c().I4)(o,d,e)}}),a().D6({label:v}),r().c7(t,{type:"create_from_url",session_id:void 0,gtm_favorite_id:o.gtmFavoriteId})}({environment:t,newFavorite:o.favorite}):a().D6({label:(0,u.jsx)(n().sA,{defaultMessage:"An error occurred when loading the AI action. ({errorCode})",id:"ai.favoriteActions.importFavorite.favoriteFailedToLoad",values:{errorCode:o.code}})})}},377315:(e,t,o)=>{o.d(t,{CA:()=>d});o(16280),o(898992),o(354520),o(581454);var n=()=>o(534177),r=()=>o(720665),i=()=>o(638681);const a=Symbol("JSON Schema"),s=Symbol("JSON Schema Components"),l=Symbol("No JSON Schema");const c={isNull:()=>({type:"null",[s]:{}}),boolean:()=>({type:"boolean",[s]:{}}),number:()=>({type:"number",[s]:{}}),integer:()=>({type:"integer",[s]:{}}),string:()=>({type:"string",[s]:{}}),dateString:()=>({type:"string",format:"date",[s]:{}}),literal:e=>({enum:[e],[s]:{}}),literals:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return{enum:t,[s]:{}}},uuid:()=>({type:"string",format:"uuid",[s]:{}}),uuidWithoutDashes:()=>({type:"string",format:"uuid",[s]:{}}),array:e=>({type:"array",items:e[a],[s]:e[a][s]}),tuple:e=>({type:"tuple",items:!1,prefixItems:e.map((e=>e[a])).filter((e=>e!==l)),[s]:Object.assign({},...e.map((e=>e[a][s])))}),record:(e,t)=>({type:"object",additionalProperties:t[a],[s]:t[a][s]}),object:e=>{let{required:t,optional:o,exact:n}=e;return{type:"object",properties:(0,r().MU)(Object.entries({...t,...o}).filter((e=>{let[t,o]=e;return o[a]!==l})).map((e=>{let[t,o]=e;return[t,o[a]]}))),...n&&{additionalProperties:!1},...Object.keys(t).length>0&&{required:Object.keys(t)},[s]:Object.assign({},...Object.values({...t,...o}).map((e=>e[a][s])))}},union:e=>({anyOf:e.map((e=>e[a])).filter((e=>e!==l)),[s]:Object.assign({},...e.map((e=>e[a][s])))}),gte:(e,t)=>{const o=e[a];return o!==l?{...o,minimum:t}:o},lte:(e,t)=>{const o=e[a];return o!==l?{...o,maximum:t}:o},maxLength:(e,t)=>{const o=e[a];if(o===l)return o;if("type"in o){if("string"===o.type)return{...o,maxLength:t};if("array"===o.type)return{...o,maxItems:t}}throw new Error("Unknown type for max length.")},minLength:(e,t)=>{const o=e[a];if(o===l)return o;if("type"in o){if("string"===o.type)return{...o,minLength:t};if("array"===o.type)return{...o,minItems:t}}throw new Error("Unknown type for min length.")},nonEmpty:e=>{const t=e[a];if(t===l)return t;if("type"in t){if("string"===t.type)return{...t,minLength:1};if("object"===t.type)return{...t,minProperties:1};if("array"===t.type)return{...t,minItems:1}}throw new Error("Unknown non-emptyable type.")},nullable:e=>{const t=e[a];if(t===l)return t;if("type"in t)if(Array.isArray(t.type)){if("null"===t.type[1])return t;(0,n().HB)(t.type[1])}else{if("string"===t.type)return{...t,type:[t.type,"null"]};if("object"===t.type)return{...t,type:[t.type,"null"]};if("array"===t.type)return{...t,type:[t.type,"null"]};if("tuple"===t.type)return{...t,type:[t.type,"null"]};if("boolean"===t.type)return{...t,type:[t.type,"null"]};if("integer"===t.type)return{...t,type:[t.type,"null"]};if("number"===t.type)return{...t,type:[t.type,"null"]};if("null"===t.type)return t;(0,n().HB)(t.type)}else{if("const"in t)return{...t,enum:[t.const,null]};if("enum"in t)return{...t,enum:[...t.enum,null]};if("anyOf"in t)return{...t,anyOf:t.anyOf.map((e=>c.nullable({[a]:e})))};if("$ref"in t)return{anyOf:[t,{type:"null"}],[s]:t[s]};if(o=t,(0,n().Gv)(o)&&0===Object.keys(o).length)return t;(0,n().HB)(t)}var o}},d=(0,r().MU)(Object.entries(c).map((e=>{let[t,o]=e;return[t,function(){for(var e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];return 1===r.length&&(0,n().Gv)(r[0])&&("id"in r[0]||"description"in r[0])?function(){const{description:e,examples:n,id:l}=r[0];let c={description:e,...n&&{examples:n},...o(...arguments)};return l&&(c={$ref:`#/components/schemas/${l}`,[s]:{...c[s],[l]:c}}),{[a]:c,...i()[t](...arguments)}}:{[a]:o(...r),...i()[t](...r)}}]})));Symbol("Exact empty object ({})"),d.object({id:"emptyObject"})({required:{},optional:{},exact:!0})},377586:(e,t,o)=>{o.d(t,{n:()=>n});let n=function(e){return e[e.Popup=0]="Popup",e[e.SlideUp=1]="SlideUp",e[e.BottomSheet=2]="BottomSheet",e}({})},380682:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{siteSettingContentType:"initial"}}}const r=new n},383594:(e,t,o)=>{o.d(t,{I:()=>a,W:()=>i});var n=()=>o(969141),r=()=>o(778417);function i(e,t){t.disableClearSelection||r().IU({environment:e}),n().A.setState({...t,isActive:!0})}function a(){const e=n().A.state;e.isActive&&e.onCancel&&e.onCancel(),n().A.reset()}},388487:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(296540),r=()=>o(908006),i=()=>o(595985);function a(e){let{capture:t,preventType:o}=e;(0,n.useEffect)((()=>{if(t){const e={preventType:o};return r().default.afterNextFlush((()=>{i().A.state.capturingAreas.add(e),i().A.emit()})),()=>{r().default.afterNextFlush((()=>{i().A.state.capturingAreas.delete(e),i().A.emit()}))}}}),[t,o])}},389658:(e,t,o)=>{o.d(t,{Bw:()=>A,EO:()=>U,GK:()=>j,Hg:()=>Z,L5:()=>q,Tf:()=>x,_N:()=>$,aI:()=>W,g$:()=>C,h0:()=>G,jY:()=>V,kE:()=>K,mT:()=>P,n2:()=>Y,n4:()=>B,qP:()=>F,sj:()=>O,vq:()=>z});o(18107),o(967357),o(581454);var n=()=>o(244641),r=()=>o(594013),i=()=>o(970013),a=()=>o(713998),s=()=>o(254947),l=()=>o(604995),c=()=>o(416504),d=()=>o(206267),u=()=>o(388821),p=()=>o(179034),m=()=>o(519831),g=()=>o(919709),f=()=>o(959013),v=()=>o(496603),h=()=>o(183558),_=()=>o(534177),b=()=>o(972435),y=()=>o(351360),S=()=>o(430483),w=()=>o(508496),k=()=>o(712505);const I=(0,f().YK)({addNewTodoTitle:{defaultMessage:"Add a new to-do",id:"blockTemplates.templateButton.addNewTodoTitle"}});function A(){return u().RecordMapLegacy.create({block:{root:{id:"root",version:27,type:"factory",properties:{title:[[b().A.formatMessage(I.addNewTodoTitle)]]},content:["to_do"]},to_do:{id:"to_do",version:4,type:"to_do",parent_table:"block",parent_id:"root",alive:!0}}})}function x(){return u().RecordMapLegacy.create({block:{root:{id:"root",version:0,type:"button",format:{automation_id:"automation"}}},automation:{automation:{id:"automation",parent_id:"root",parent_table:p().ev,alive:!0,status:"active",trigger:{id:d().JW(),type:"button"},action_ids:[],properties:{name:""}}}})}function C(){return u().RecordMapLegacy.create({block:{root:{id:"root",type:"collection_view_page",alive:!0}}})}const T=(0,f().YK)({chartViewTitle:{defaultMessage:"Chart",id:"blockTemplates.chart.chartViewTitle"},dataViewTitle:{defaultMessage:"Data",id:"blockTemplates.chart.dataViewTitle"}});const M=(0,f().YK)({responderPropertyTitle:{defaultMessage:"Respondent",id:"blockTemplates.form.responderPropertyTitle"},createdTimePropertyName:{defaultMessage:"Submission time",id:"blockTemplates.form.createdTimePropertyName"},formInitialQuestionPropertyTitle:{defaultMessage:"Question 1",id:"blockTemplates.form.formInitialQuestionPropertyTitle"},formInitialQuestionPropertySelect:{defaultMessage:"Question 2",id:"blockTemplates.form.formInitialQuestionPropertySelect"},formInitialQuestionPropertySelectOption1:{defaultMessage:"Option 1",id:"blockTemplates.form.formInitialQuestionPropertySelectOption1"},formInitialQuestionPropertySelectOption2:{defaultMessage:"Option 2",id:"blockTemplates.form.formInitialQuestionPropertySelectOption2"},formInitialQuestionPropertySelectOption3:{defaultMessage:"Option 3",id:"blockTemplates.form.formInitialQuestionPropertySelectOption3"}});function P(e){const{isInline:t,name:o}=e,n=(0,h().Ay)(),r=(0,h().Ay)(),i=(0,h().Ay)(),a=(0,h().Ay)(),s=(0,h().Ay)(),l=(0,h().Ay)();return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:[],alive:!0}},collection:{collection:{id:"collection",name:o,schema:{title:{name:b().A.formatMessage(M.formInitialQuestionPropertyTitle),type:"title"},[n]:{name:b().A.formatMessage(M.responderPropertyTitle),type:"created_by"},[r]:{name:b().A.formatMessage(M.createdTimePropertyName),type:"created_time"},[i]:{name:b().A.formatMessage(M.formInitialQuestionPropertySelect),type:"multi_select",options:[{id:a,value:b().A.formatMessage(M.formInitialQuestionPropertySelectOption1),color:"blue"},{id:s,value:b().A.formatMessage(M.formInitialQuestionPropertySelectOption2),color:"yellow"},{id:l,value:b().A.formatMessage(M.formInitialQuestionPropertySelectOption3),color:"red"}]}},format:{},parent_id:"root",parent_table:"block",alive:!0}}})}const B=(0,f().YK)({namePropertyTitle:{defaultMessage:"Name",id:"blockTemplates.table.namePropertyTitle"},tagsPropertyTitle:{defaultMessage:"Tags",id:"blockTemplates.table.tagsPropertyTitle"}});const R=(0,f().YK)({viewTitle:{defaultMessage:"Board view",id:"blockTemplates.board.viewTitle"},namePropertyTitle:{defaultMessage:"Name",id:"blockTemplates.board.namePropertyTitle"},assignPropertyTitle:{defaultMessage:"Assign",id:"blockTemplates.board.assignPropertyTitle"},statusPropertyTitle:{defaultMessage:"Status",id:"blockTemplates.board.statusPropertyTitle"},card1Title:{defaultMessage:"Card 1",id:"blockTemplates.board.card1Title"},card2Title:{defaultMessage:"Card 2",id:"blockTemplates.board.card2Title"},card3Title:{defaultMessage:"Card 3",id:"blockTemplates.board.card3Title"}});const E=(0,f().YK)({viewTitle:{defaultMessage:"Calendar view",id:"blockTemplates.calendar.viewTitle"},namePropertyTitle:{defaultMessage:"Name",id:"blockTemplates.calendar.namePropertyTitle"},datePropertyTitle:{defaultMessage:"Date",id:"blockTemplates.calendar.datePropertyTitle"},tagsPropertyTitle:{defaultMessage:"Tags",id:"blockTemplates.calendar.tagsPropertyTitle"}});const D=(0,f().YK)({viewTitle:{defaultMessage:"Timeline view",id:"blockTemplates.timeline.viewTitle"},datePropertyTitle:{defaultMessage:"Date",id:"blockTemplates.timeline.datePropertyTitle"}});const N=(0,f().YK)({viewTitle:{defaultMessage:"Gallery view",id:"blockTemplates.gallery.viewTitle"},namePropertyTitle:{defaultMessage:"Name",id:"blockTemplates.gallery.namePropertyTitle"},tagsPropertyTitle:{defaultMessage:"Tags",id:"blockTemplates.gallery.tagsPropertyTitle"},createdPropertyTitle:{defaultMessage:"Created",id:"blockTemplates.gallery.createdPropertyTitle"},page1Title:{defaultMessage:"Page 1",id:"blockTemplates.gallery.page1Title"},page2Title:{defaultMessage:"Page 2",id:"blockTemplates.gallery.page2Title"},page3Title:{defaultMessage:"Page 3",id:"blockTemplates.gallery.page3Title"},page1TodoTitle:{defaultMessage:"To-do",id:"blockTemplates.gallery.page1TodoTitle"},page1CompletedTodoTitle:{defaultMessage:"Completed To-do",id:"blockTemplates.gallery.page1CompletedTodoTitle"}});const L=(0,f().YK)({viewTitle:{defaultMessage:"List view",id:"blockTemplates.list.viewTitle"},namePropertyTitle:{defaultMessage:"Name",id:"blockTemplates.list.namePropertyTitle"},tagsPropertyTitle:{defaultMessage:"Tags",id:"blockTemplates.list.tagsPropertyTitle"},createdPropertyTitle:{defaultMessage:"Created",id:"blockTemplates.list.createdPropertyTitle"},page1Title:{defaultMessage:"Page 1",id:"blockTemplates.list.page1Title"},page2Title:{defaultMessage:"Page 2",id:"blockTemplates.list.page2Title"},page3Title:{defaultMessage:"Page 3",id:"blockTemplates.list.page3Title"}});function F(e){const{isInline:t,viewType:o,name:d,chartType:p}=e;return"table"===o?function(e){var t;const{isInline:o,name:n,skipDefaultRowsAndColumns:r}=e,i=(0,h().Ay)(),a=!(r||null!==(t=y().default.state.currentUserSettingsStore)&&void 0!==t&&null!==(t=t.getSettings())&&void 0!==t&&t.no_default_rows_or_columns_for_new_databases||"on"===w().default.getEligibleGroup({experimentId:"packaging_db_empty_states"}));return u().RecordMapLegacy.create({block:{root:{id:"root",type:o?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["view"],alive:!0},...a&&{item_1:{id:"item_1",type:"page",parent_id:"collection",parent_table:"collection",alive:!0},item_2:{id:"item_2",type:"page",parent_id:"collection",parent_table:"collection",alive:!0},item_3:{id:"item_3",type:"page",parent_id:"collection",parent_table:"collection",alive:!0}}},collection_view:{view:{id:"view",version:0,type:"table",format:{collection_pointer:{table:m().Vl,id:"collection"},table_properties:[{property:"title",visible:!0,width:276},{property:i,visible:!0}],table_wrap:!0},page_sort:a?["item_1","item_2","item_3"]:[],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:n,schema:{title:{name:b().A.formatMessage(B.namePropertyTitle),type:"title"},...a&&{[i]:{name:b().A.formatMessage(B.tagsPropertyTitle),type:"multi_select"}}},format:{...a&&{collection_page_properties:[{property:i,visible:!0}]}},parent_id:"root",parent_table:"block",alive:!0}}})}({isInline:t,name:d}):"board"===o?function(e){const{isInline:t,name:o}=e,n=(0,h().Ay)(),r=(0,h().Ay)(),a="on"!==w().default.getEligibleGroup({experimentId:"packaging_db_empty_states"});return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["view"],alive:!0},...a&&{item_1:{id:"item_1",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().A.formatMessage(R.card1Title)]]}},item_2:{id:"item_2",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().A.formatMessage(R.card2Title)]]}},item_3:{id:"item_3",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().A.formatMessage(R.card3Title)]]}}}},collection_view:{view:{id:"view",version:0,type:"board",name:b().A.formatMessage(R.viewTitle),query2:{aggregations:[{aggregator:"count"}]},format:{collection_pointer:{table:m().Vl,id:"collection"},board_columns_by:{property:n,type:"status",groupBy:"option",sort:{type:"ascending"}},board_columns:[{property:n,value:{type:"status",value:{type:"by_option",option:b().A.formatMessage(s().M_.statusOptionNotStarted)}}},{property:n,value:{type:"status",value:{type:"by_option",option:b().A.formatMessage(s().M_.statusOptionInProgress)}}},{property:n,value:{type:"status",value:{type:"by_option",option:b().A.formatMessage(s().M_.statusOptionDone)}}}],board_properties:[{property:n,visible:!1},{property:r,visible:!0}]},page_sort:a?["item_1","item_2","item_3"]:[],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:o,schema:{title:{name:b().A.formatMessage(R.namePropertyTitle),type:"title"},[r]:{name:b().A.formatMessage(R.assignPropertyTitle),type:"person"},[n]:(0,i().D)(b().A.formatMessage(R.statusPropertyTitle),b().A.getIntl())},format:{collection_page_properties:[{property:n,visible:!0},{property:r,visible:!0}]},parent_id:"root",parent_table:"block",alive:!0}}})}({isInline:t,name:d}):"calendar"===o?function(e){const{isInline:t,name:o}=e,n=(0,h().Ay)(),r=(0,h().Ay)();return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["view"],alive:!0}},collection_view:{view:{id:"view",version:0,type:"calendar",name:b().A.formatMessage(E.viewTitle),format:{collection_pointer:{table:m().Vl,id:"collection"}},query2:{calendar_by:n},parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:o,schema:{title:{name:b().A.formatMessage(E.namePropertyTitle),type:"title"},[n]:{name:b().A.formatMessage(E.datePropertyTitle),type:"date"},[r]:{name:b().A.formatMessage(E.tagsPropertyTitle),type:"multi_select"}},parent_id:"root",parent_table:"block",alive:!0}}})}({isInline:t,name:d}):"list"===o?function(e){const{isInline:t,name:o}=e,n=(0,h().Ay)(),r=(0,h().Ay)(),i="on"!==w().default.getEligibleGroup({experimentId:"packaging_db_empty_states"});return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["view"],alive:!0},...i&&{item_1:{id:"item_1",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().A.formatMessage(L.page1Title)]]}},item_2:{id:"item_2",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().A.formatMessage(L.page2Title)]]}},item_3:{id:"item_3",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().A.formatMessage(L.page3Title)]]}}}},collection_view:{view:{id:"view",version:0,type:"list",name:b().A.formatMessage(L.viewTitle),query2:{aggregations:[{aggregator:"count"}]},format:{collection_pointer:{table:m().Vl,id:"collection"},list_properties:[{property:n,visible:!0}]},page_sort:i?["item_1","item_2","item_3"]:[],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:o,schema:{title:{name:b().A.formatMessage(L.namePropertyTitle),type:"title"},[n]:{name:b().A.formatMessage(L.tagsPropertyTitle),type:"multi_select",options:[]},[r]:{name:b().A.formatMessage(L.createdPropertyTitle),type:"created_time"}},format:{collection_page_properties:[{property:r,visible:!0},{property:n,visible:!0}]},parent_id:"root",parent_table:"block",alive:!0}}})}({isInline:t,name:d}):"gallery"===o?function(e){const{isInline:t,name:o}=e,n=(0,h().Ay)(),r=(0,h().Ay)(),i="on"!==w().default.getEligibleGroup({experimentId:"packaging_db_empty_states"});return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["view"],alive:!0},...i&&{item_1:{id:"item_1",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().A.formatMessage(N.page1Title)]]},content:["to_do_1","to_do_2"]},item_2:{id:"item_2",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().A.formatMessage(N.page2Title)]]}},item_3:{id:"item_3",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().A.formatMessage(N.page3Title)]]}},to_do_1:{id:"to_do_1",type:"to_do",parent_id:"item_1",parent_table:"block",alive:!0,properties:{title:[[b().A.formatMessage(N.page1TodoTitle)]]}},to_do_2:{id:"to_do_2",type:"to_do",parent_id:"item_1",parent_table:"block",alive:!0,properties:{title:[[b().A.formatMessage(N.page1CompletedTodoTitle)]],checked:[["Yes"]]}}}},collection_view:{view:{id:"view",version:0,type:"gallery",name:b().A.formatMessage(N.viewTitle),query2:{aggregations:[{aggregator:"count"}]},format:{collection_pointer:{table:m().Vl,id:"collection"},gallery_cover:{type:"page_content"}},page_sort:i?["item_1","item_2","item_3"]:[],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:o,schema:{title:{name:b().A.formatMessage(N.namePropertyTitle),type:"title"},[n]:{name:b().A.formatMessage(N.tagsPropertyTitle),type:"multi_select",options:[]},[r]:{name:b().A.formatMessage(N.createdPropertyTitle),type:"created_time"}},format:{collection_page_properties:[{property:r,visible:!0},{property:n,visible:!0}]},parent_id:"root",parent_table:"block",alive:!0}}})}({isInline:t,name:d}):"timeline"===o?function(e){const{isInline:t,name:o}=e,r=(0,h().Ay)(),s=(0,h().Ay)(),d=(0,h().Ay)();return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["view"],alive:!0},item_1:{id:"item_1",type:"page",parent_id:"collection",parent_table:"collection",properties:{title:[[b().A.formatMessage(R.card1Title)]],[r]:(0,a().m5)((0,l().Mk)(n().c9.now().minus({days:5}).startOf("day").valueOf(),n().c9.now().minus({days:1}).startOf("day").valueOf(),(0,c().P)()))},alive:!0},item_2:{id:"item_2",type:"page",parent_id:"collection",parent_table:"collection",properties:{title:[[b().A.formatMessage(R.card2Title)]],[r]:(0,a().m5)((0,l().Mk)(n().c9.now().minus({days:3}).startOf("day").valueOf(),n().c9.now().plus({days:1}).startOf("day").valueOf(),(0,c().P)()))},alive:!0},item_3:{id:"item_3",type:"page",parent_id:"collection",parent_table:"collection",properties:{title:[[b().A.formatMessage(R.card3Title)]],[r]:(0,a().m5)((0,l().Mk)(n().c9.now().minus({days:1}).startOf("day").valueOf(),n().c9.now().plus({days:3}).startOf("day").valueOf(),(0,c().P)()))},alive:!0}},collection_view:{view:{id:"view",version:0,type:"timeline",name:b().A.formatMessage(D.viewTitle),format:{collection_pointer:{table:m().Vl,id:"collection"},timeline_show_table:!t,timeline_properties:[{property:"title",visible:!0}],timeline_table_properties:[{property:"title",visible:!0,width:280},{property:r,visible:!1,width:180},{property:s,visible:!1,width:180},{property:d,visible:!1,width:180}]},page_sort:["item_1","item_2","item_3"],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:o,schema:{title:{name:b().A.formatMessage(R.namePropertyTitle),type:"title"},[r]:{name:b().A.formatMessage(D.datePropertyTitle),type:"date"},[s]:{name:b().A.formatMessage(R.assignPropertyTitle),type:"person"},[d]:(0,i().D)(b().A.formatMessage(R.statusPropertyTitle),b().A.getIntl())},format:{collection_page_properties:[{property:r,visible:!0},{property:s,visible:!0},{property:d,visible:!0}]},parent_id:"root",parent_table:"block",alive:!0}}})}({isInline:t,name:d}):"page"===o?u().RecordMapLegacy.create({}):"chart"===o?function(e){const{isInline:t,name:o,chartType:n}=e,s=(0,h().Ay)(),d=(0,h().Ay)(),p=(0,i().D)(b().A.formatMessage(R.statusPropertyTitle),b().A.getIntl()),g="line"===n?{title:{name:b().A.formatMessage(B.namePropertyTitle),type:"title"},[d]:{name:b().A.formatMessage(E.datePropertyTitle),type:"date"}}:{title:{name:b().A.formatMessage(B.namePropertyTitle),type:"title"},[s]:p},f="donut"===n?(0,r().ZS)({collectionSchema:g}):(0,r().EZ)({collectionSchema:g,axisChartType:n}),v=(0,c().P)(),_={type:"date",start_date:(0,l().kB)((0,l().ah)(v).minus({days:4}))},y={type:"date",start_date:(0,l().kB)((0,l().ah)(v).minus({days:3}))},S={type:"date",start_date:(0,l().kB)((0,l().ah)(v).minus({days:2}))},w={type:"date",start_date:(0,l().kB)((0,l().ah)(v).minus({days:1}))},k="line"===n?[{[d]:(0,a().m5)(_)},{[d]:(0,a().m5)(y)},{[d]:(0,a().m5)(S)},{[d]:(0,a().m5)(S)},{[d]:(0,a().m5)(S)},{[d]:(0,a().m5)(w)}]:[{[s]:[[p.options.at(0).value]]},{[s]:[[p.options.at(1).value]]},{[s]:[[p.options.at(1).value]]},{[s]:[[p.options.at(2).value]]}];return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["chart_view","data_view"],alive:!0},item_1:{id:"item_1",type:"page",parent_id:"collection",parent_table:"collection",properties:k[0],alive:!0},item_2:{id:"item_2",type:"page",parent_id:"collection",parent_table:"collection",properties:k[1],alive:!0},item_3:{id:"item_3",type:"page",parent_id:"collection",parent_table:"collection",properties:k[2],alive:!0},item_4:{id:"item_4",type:"page",parent_id:"collection",parent_table:"collection",properties:k[3],alive:!0},..."line"===n&&{item_5:{id:"item_5",type:"page",parent_id:"collection",parent_table:"collection",properties:k[4],alive:!0},item_6:{id:"item_6",type:"page",parent_id:"collection",parent_table:"collection",properties:k[5],alive:!0}}},collection_view:{chart_view:{id:"chart_view",version:0,type:"chart",name:b().A.formatMessage(T.chartViewTitle),format:{collection_pointer:{table:m().Vl,id:"collection"},chart_config:f,subitem_display_mode:"flattened",hide_linked_collection_name:!0},page_sort:[],parent_id:"root",parent_table:"block",alive:!0},data_view:{id:"data_view",version:0,type:"table",parent_id:"root",parent_table:"block",alive:!0,name:b().A.formatMessage(T.dataViewTitle),format:{table_properties:[{property:"title",visible:!0}],table_wrap:!0,hide_linked_collection_name:!0}}},collection:{collection:{id:"collection",name:o,schema:g,format:{collection_page_properties:[{property:s,visible:!0}]},parent_id:"root",parent_table:"block",alive:!0}}})}({isInline:t,name:d,chartType:p}):"form_editor"===o||"feed"===o||"map"===o||"chat"===o||"custom"===o?u().RecordMapLegacy.create({}):void(0,_().HB)(o)}function U(e){const{isInline:t,viewType:o,chartType:n}=e;return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",view_ids:["view"],alive:!0}},collection_view:{view:{id:"view",version:0,type:o,parent_id:"root",parent_table:"block",alive:!0,format:n?{chart_config:{type:"placeholder",placeHolderType:n}}:{}}}})}function O(e){const{isInline:t,viewType:o,integrationId:n}=e;return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["view"],alive:!0}},collection:{collection:{id:"collection",name:void 0,schema:{},format:{is_placeholder:!0,integration_id:n},parent_id:"root",parent_table:"block",alive:!0}},collection_view:{view:{id:"view",version:0,type:o,format:{collection_pointer:{table:m().Vl,id:"collection"}},parent_id:"root",parent_table:"block",alive:!0}}})}function V(){return u().RecordMapLegacy.create({block:{root:{id:"root",type:"transclusion_container",content:["empty_text"],alive:!0},empty_text:{id:"empty_text",type:"text",parent_id:"root",parent_table:"block",alive:!0}}})}function j(e){var t,o;const n=S().zD.isAiBlockConfigurationMenuEnabledForUser(),r=(null===(t=k().default.peekTargetStore.state)||void 0===t?void 0:t.id)??(null===(o=y().default.state.mainEditorCurrentBlockStore)||void 0===o?void 0:o.id);let i;if(n){i={ai_block_configuration_menu:{version:2,type:"custom",context:r?[{type:"currentPage",pageId:r}]:[],title:void 0,autofillInstructions:void 0,placeholderText:void 0}}}else i={ai_prompt_key:e};return u().RecordMapLegacy.create({block:{root:{id:"root",type:"ai_block",content:[],alive:!0,format:i}}})}function z(e){const t=v().Hn(e,(e=>`column${e+1}`));return u().RecordMapLegacy.create({block:{root:{id:"root",type:"column_list",content:t,alive:!0},...Object.assign({},...t.map((t=>{const o=`${t}_text`;return{[t]:{id:t,type:"column",parent_id:"root",parent_table:"block",content:[o],alive:!0,format:{column_ratio:1/e}},[o]:{id:o,type:"text",parent_id:t,parent_table:"block",alive:!0}}})))}})}function q(){const e=[(0,h().Ay)(),(0,h().Ay)()];return u().RecordMapLegacy.create({block:{root:{id:"root",type:"table",content:["row_1","row_2","row_3"],alive:!0,format:{table_block_column_order:e}},row_1:{id:"row_1",type:"table_row",parent_id:"root",parent_table:"block",alive:!0},row_2:{id:"row_2",type:"table_row",parent_id:"root",parent_table:"block",alive:!0},row_3:{id:"row_3",type:"table_row",parent_id:"root",parent_table:"block",alive:!0}}})}const H=(0,f().YK)({tab1Title:{defaultMessage:"Tab 1",id:"blockTemplates.list.tab1Title"},tab2Title:{defaultMessage:"Tab 2",id:"blockTemplates.list.tab2Title"},tab3Title:{defaultMessage:"Tab 3",id:"blockTemplates.list.tab3Title"}});function W(){return u().RecordMapLegacy.create({block:{root:{id:"root",type:"tab",alive:!0,content:["tab1","tab2","tab3"]},tab1:{id:"tab1",parent_id:"root",parent_table:"block",type:"text",alive:!0,properties:{title:[[b().A.formatMessage(H.tab1Title)]]}},tab2:{id:"tab2",parent_id:"root",parent_table:"block",type:"text",alive:!0,properties:{title:[[b().A.formatMessage(H.tab2Title)]]}},tab3:{id:"tab3",parent_id:"root",parent_table:"block",type:"text",alive:!0,properties:{title:[[b().A.formatMessage(H.tab3Title)]]}}}})}function K(e){return u().RecordMapLegacy.create({[p().ev]:{root:{id:"root",type:e,format:{toggleable:!0}}}})}function G(e,t){return u().RecordMapLegacy.create({[p().ev]:{root:{id:"root",type:"code",properties:{title:g().x9d(t),language:g().x9d(e)}}}})}function $(){return u().RecordMapLegacy.create({[p().ev]:{root:{id:"root",type:"drawing",format:{drawing_value:void 0,block_page_width:!0,block_height:480}}}})}function Y(){return w().default.checkGate({gateName:"create_v2_callouts"})?u().RecordMapLegacy.create({block:{root:{id:"root",type:"callout",content:["empty_text"],format:{callout_version:2},alive:!0},empty_text:{id:"empty_text",type:"text",parent_id:"root",parent_table:"block",alive:!0}}}):u().RecordMapLegacy.create({block:{root:{id:"root",type:"callout",alive:!0}}})}const Q=(0,f().YK)({notesHeader:{defaultMessage:"Notes",id:"blockTemplates.transcription.notesHeader"}});function Z(){return u().RecordMapLegacy.create({block:{root:{id:"root",type:"transcription",alive:!0,content:["transcription_notes","transcription_transcript"],format:{transcription_notes_id:"transcription_notes",transcription_transcript_id:"transcription_transcript"}},transcription_notes:{id:"transcription_notes",type:"text",parent_id:"root",parent_table:"block",content:["transcription_notes_header","transcription_notes_list"],alive:!0},transcription_notes_header:{id:"transcription_notes_header",type:"sub_sub_header",parent_id:"transcription_notes",parent_table:"block",alive:!0,properties:{title:[[b().A.formatMessage(Q.notesHeader)]]}},transcription_notes_list:{id:"transcription_notes_list",type:"bulleted_list",parent_id:"transcription_notes",parent_table:"block",alive:!0},transcription_transcript:{id:"transcription_transcript",type:"text",parent_id:"root",parent_table:"block",alive:!0}}})}},390575:(e,t,o)=>{o.d(t,{NU:()=>i,ZC:()=>r});var n=()=>o(534177);function r(e,t){if(!(0,n().O9)(t)||"production"===e)return t;const o=`notion-${e}-`;return t.startsWith(o)?t:`${o}${t}`}function i(e){return e&&e.startsWith("//")?`https:${e}`:e}},393255:(e,t,o)=>{o.d(t,{jz:()=>M,Ju:()=>N,dw:()=>E,VN:()=>L,zz:()=>D,Tj:()=>F,BJ:()=>R});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520);var n=()=>o(757695),r=()=>o(700500),i=()=>o(206267),a=()=>o(919709),s=()=>o(970330),l=()=>o(741496),c=()=>o(778417),d=()=>o(606952),u=()=>o(725614),p=()=>o(97270),m=()=>o(989423),g=()=>o(969197),f=()=>o(333665),v=()=>o(906537),h=()=>o(494043),_=()=>o(663038),b=()=>o(695625),y=()=>o(176106),S=()=>o(732770),w=()=>o(375447),k=()=>o(502438),I=(o(581454),()=>o(351360)),A=()=>o(875464),x=()=>o(846955);var C=()=>o(878855),T=()=>o(110955);const M="/",P=new Set([M,"／"]);const B={"ja-JP":new Set(["；"])}[o(662303).locale]||new Set;function R(e){return!!P.has(e)||!!B.has(e)}function E(e){const{environment:t,textStore:o,oldSelection:r,oldTextValue:s}=e,l=a().qAZ(o.getValue()||[]),c=r.startIndex,d=l[c];if(!R(d))return;const u=a().Pej(l,c-10,c).join("");if(/[0-9]$/.test(u[u.length-1]))return;if(u.endsWith("http:")||u.endsWith("http:/")||u.endsWith("https:")||u.endsWith("https:/"))return;if(0!==c&&!(0,_().Yv)(u[u.length-1])&&S().A.state.isKeyboardMode)return;if(T().A.state.open||p().A.state.open||w().A.state.open||y().A.state.open)return;if(t.device.isPhone&&!t.device.isIpad)return;const g=v().get();if(!g)return;let f=v().getRect(g);if(!f)return;(P.has(d)||B.has(d))&&(f={...f,left:f.left-11}),(0,x().tourIsActive)(x().default.state)&&"create_page_type_slash"===x().default.state.step&&function(){var e;if(!(0,x().tourIsActive)(x().default.state))return;const t=x().default.state.type,o=x().default.state.step,n=(0,A().DI)(t),r={teamStoreIds:((null===(e=I().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getTeamsStores())||[]).map((e=>e.id)),initialTeamStoreId:x().default.state.initialTeamStoreId},i=(0,A().sX)(n,o,r);var a,s;null===i?(null===(a=(s=x().default.state).onCompleteOrClose)||void 0===a||a.call(s),x().default.setState({type:"inactive"})):x().default.setState({...x().default.state,type:t,step:i})}();const h=i().JW();T().A.setState({id:h,open:!0,isAddMenu:!1,collapsed:!0,textStore:o,oldTextValue:s,oldSelection:r,selectionRect:f,lettersAtLastResult:0,filter:"",temporaryInputDataStore:n().default.createValue(void 0,{name:"temporaryInputData"}),insertedTextBlockLocation:"none"}),(0,m().u4)({environment:t,event:{eventName:"open_slash_menu",eventProperties:{id:h,source:"slash_command"}}})}function D(e){const{environment:t,blockStore:o,insertedTextBlockLocation:r}=e,a=T().A.state;if(c().hc({environment:t,store:o}),u().setSelectionAtStart({store:o.getBlockTitleStore()}),!a.open&&!t.device.isPhone){const e=o.getBlockTitleStore(),a=b().T.getRectFromStore(o),s=i().JW();a&&(T().A.setState({id:s,open:!0,isAddMenu:!0,collapsed:!0,textStore:e,oldTextValue:e.getValue(),oldSelection:{startIndex:0,endIndex:0},selectionRect:a,lettersAtLastResult:0,filter:"",temporaryInputDataStore:n().default.createValue(void 0,{name:"temporaryInputData"}),insertedTextBlockLocation:r}),u().clear({environment:t}),u().setSelectionAtStart({store:e}),(0,m().u4)({environment:t,event:{eventName:"open_slash_menu",eventProperties:{id:s,source:"add_button"}}}))}}function N(e){const{transaction:t,environment:o,action:n,sectionKey:r,searchEventSource:i,itemIndex:a}=e,s=T().A.state;if(s.open){const{textStore:e,oldTextValue:p,oldSelection:f,filter:v,id:_}=s,b=k().default.state.stores[0];if(b){const e=b.getType(),t=b.getFormat();(0,l().N)(o,{analyticsName:n.analyticsName,action_type:n.analyticsActionType,from:"slash_menu",block_id:b.id,block_type:e,is_toggleable:e?(0,h().Yt)(e,t):void 0,slash_menu_filter_length:v.length,slash_menu_section:r,parent_collection_id:b.getParentCollectionIdUpToTwoLevels(),slash_menu_id:_})}d().KY({environment:o,store:e,value:p,transaction:t});const y=void 0!==a?a+1:void 0;(0,m().u4)({environment:o,event:{eventName:"slash_menu_search",eventProperties:{id:s.id,source:i||(s.filter?{type:"query",query:s.filter}:{type:"scroll",rank:y})}}}),C().A.track(n),L({dismissed:!1});const S=(0,g().T)(e);S&&c().hc({environment:o,store:S}),u().setSelection({store:e,selection:f})}}function L(e){const{dismissed:t,environment:o}=e,n=T().A.state;if(n.open&&n.isAddMenu&&o&&t&&"none"!==n.insertedTextBlockLocation){const e="above"===n.insertedTextBlockLocation?"text_insert_above":"text_insert_below";s().v(o,{from:e,type:r().xd.text,creating_block_id:void 0})}T().A.setState({open:!1,previousFilter:n.open?n.filter:void 0})}function F(e){return f().vD(e.textStore,e.oldTextValue,!e.isAddMenu)}},394653:(e,t,o)=>{o.d(t,{l:()=>r});var n=()=>o(586481);function r(e){const{environment:t,blockStore:o,properties:r,transaction:i}=e;n().L({environment:t,store:o,properties:r,transaction:i})}},395963:(e,t,o)=>{o.d(t,{En:()=>c,PA:()=>m,Px:()=>g,QI:()=>v,Tk:()=>f,Yf:()=>p,_h:()=>u,it:()=>d});o(16280),o(898992),o(354520),o(581454);var n=()=>o(706665),r=()=>o(797809),i=()=>o(183558),a=()=>o(517223),s=()=>o(896628);class l extends Error{constructor(e,t){super();const o=`Collection with id ${t} had no property groups on format.property_groups`;this.message=`${e} -- ${o}`}}function c(e){var t;let{collectionStore:o,groupId:r,propertyId:i,transaction:a}=e;const c=null===(t=o.getFormat())||void 0===t?void 0:t.property_groups;if(!c)throw new l("cannot reorder properties",o.id);const d=(0,n().xR)({propertyGroups:c,groupId:r,propertyIds:[i]});s().zA({stores:[o],update:{property_groups:d},transaction:a})}function d(e){let{collectionStore:t,propertyId:o,transaction:r}=e;const i=t.getNormalizedPropertyGroups();if(!i)return;const a=(0,n().V7)({propertyGroups:i,propertyId:o});s().zA({stores:[t],update:{property_groups:a},transaction:r})}function u(e){let{collectionStore:t,newPartialPropertyIds:o,groupId:r,transaction:i}=e;const a=t.getNormalizedPropertyGroups();if(!a)throw new l("cannot reorder properties",t.id);const c=(0,n().H9)({propertyGroups:a,groupId:r,errorMessageIfMissing:"cannot reorder properties"}),{id:d,...u}=(0,n().xU)({propertyGroup:c,newPartialProperties:o}),p=(0,n().S5)({propertyGroups:a,groupId:d,newValue:u});s().zA({stores:[t],update:{property_groups:p},transaction:i})}function p(e){let{collectionStore:t,newGroups:o,transaction:r}=e;s().zA({stores:[t],update:{property_groups:(0,n().UW)(o)},transaction:r})}function m(e){let{collectionStore:t,newGroupTitle:o,transaction:n}=e;const l=t.getNormalizedPropertyGroups(),c={title:o,id:(0,i().Ay)()};if(!l){const e=(0,a().HZ)({format:t.getFormat(),propertyGroupId:void 0,propertyIds:void 0}).map((e=>{let{property:t}=e;return t})).filter((e=>!(0,r().TV)(e)));c.propertyIds=e}const d=[c,...l||[]];return s().zA({stores:[t],update:{property_groups:d},transaction:n}),c.id}function g(e){let{collectionStore:t,groupId:o,transaction:r}=e;const i=t.getNormalizedPropertyGroups();if(!i)return;const l=(0,a().HZ)({propertyIds:void 0,propertyGroups:t.getNormalizedPropertyGroups(),propertyGroupId:o,format:t.getFormat()}),c=(0,n().Q9)({propertyGroups:i,groupId:o});s().zA({stores:[t],update:{property_groups:c,...Boolean(null==c?void 0:c.length)?void 0:{collection_page_properties:l}},transaction:r})}function f(e){let{collectionStore:t,groupId:o,transaction:r}=e;const i=t.getNormalizedPropertyGroups();if(!i)return;const a=(0,n().ZG)({propertyGroups:i,groupId:o});s().zA({stores:[t],update:{property_groups:a},transaction:r})}function v(e){let{collectionStore:t,groupId:o,transaction:r}=e;const i=t.getNormalizedPropertyGroups();if(!i)return;const a=(0,n().wJ)({propertyGroups:i,groupId:o});s().zA({stores:[t],update:{property_groups:a},transaction:r})}},396301:(e,t,o)=>{o.d(t,{$e:()=>A,BP:()=>W,KP:()=>Q,Kv:()=>H,L$:()=>I,Lh:()=>U,Mr:()=>D,NX:()=>E,OJ:()=>F,RQ:()=>j,VR:()=>Y,XA:()=>z,dp:()=>P,o_:()=>B,ox:()=>M,rE:()=>R,s4:()=>N,xy:()=>q,yD:()=>x});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(581454);var n=()=>o(584262),r=()=>o(700500),i=()=>o(604995),a=()=>o(416504),s=()=>o(763884),l=()=>o(946065),c=()=>o(179034),d=()=>o(343666),u=()=>o(854150),p=()=>o(496603),m=()=>o(534177),g=()=>o(351360),f=()=>o(41161),v=()=>o(630116),h=()=>o(186445),_=()=>o(211716),b=()=>o(972435),y=()=>o(776894),S=()=>o(437622);const w=new Set([r().xd.page,r().xd.collectionView,r().xd.collectionViewPage,r().xd.alias]),k=new Set([r().xd.factory]);function I(e){const{allPages:t,state:o,intl:n}=e,{query:r}=o;return t.map((e=>{if(!e.isDefined())return;const t=e.getLastEditedTime()||e.getCreatedTime();if(!t)return;const o=e.getLastEditedByPointer()??e.getCreatedByPointer();return(0,l().Pt)({block:e.getModel(),query:r,getRecordModel:e.getRecordModel,userTimeZone:(0,a().P)(),intl:n})?{blockId:e.id,store:e,timestamp:t,authorPointer:o}:void 0})).filter(m().O9)}function A(e){const{pageItems:t}=e;return p().Ul(t,(e=>{let{timestamp:t}=e;return t})).reverse()}function x(e){const{rootStore:t}=e,o=e.shouldSkipItemTypes??k,n=e.shouldShowItemTypes??w,r=[],i=new Set,a=[t];for(;a.length>0;){const e=a.shift();if(i.has(e.id))continue;i.add(e.id);const s=T(e,t,o,n);r.push(...s.outlinerItems),a.unshift(...s.subtree)}return r}const C=new(o(752885).p)({debugName:"getOutlinerItemsStoresInSubtreePageMentions",memoizeRecursion:!1,deepEquals:!1,compute(e){var t;const n=null===(t=e.getTitleStore())||void 0===t?void 0:t.getValue(),r=o(919709).moK(n);return e.getRecordStoreArray(e,r).filter((t=>t.getParentId()===e.id)).concat(e.getContentStores())}});function T(e,t,o,n){var i;const a=e.getType();if(a&&o.has(a)||(null===(i=e.getModel())||void 0===i||null===(i=i.getAliasTargetPointer())||void 0===i?void 0:i.table)===d().SN)return{outlinerItems:[],subtree:[]};if(a&&e!==t&&n.has(a))return{outlinerItems:[e],subtree:[]};const s=e.getType()===r().xd.transclusionReference?e.getTransclusionReferenceTargetStore():e;if(!s)return{outlinerItems:[],subtree:[]};return{outlinerItems:[],subtree:C.getStateFor(s)}}function M(e){let{environment:t,draggingStores:o,parentStore:n,currentSpaceStore:r}=e;if(!t.currentUser.id)return!1;if(!o.every((e=>e.isNavigableBlock())))return!1;if(!(0,y().w8)({environment:t,blocks:o}))return!1;if((null==n?void 0:n.table)===u().yK){return P({environment:t,teamStore:v().h4.createChildStore(r,{table:u().yK,id:n.id,spaceId:r.id})})}return!0}function P(e){let{environment:t,teamStore:o}=e;const n=t.currentUser.id;if(!o.isDefined())return!1;return!(o.getDisableTeamPageEdits()&&n&&!o.isOwner(n))&&o.canAddOrRemoveTopLevelPages()}function B(e){let{typeWithTeam:t,currentSpaceViewStore:o,sidebarState:n}=e;switch(t.type){case"team":return t.teamStore.getTeamPagesStores();case"bookmarks":return o.getBookmarkedPages();case"workspace":return o.getWorkspacePages();case"shared":return n.visibleSharedPagesStores;case"private":return n.visiblePrivatePagesStores;default:(0,m().HB)(t)}}function R(e){let{typeWithTeam:t,currentSpaceStore:o,currentSpaceViewStore:n}=e;switch(t.type){case"team":return t.teamStore.getTeamPagesStore();case"bookmarks":return n.getBookmarkedPagesStore();case"workspace":return o.getPagesStore();case"shared":return n.getSharedPagesStore();case"private":return n.getPrivatePagesStore();default:(0,m().HB)(t)}}function E(e){let{type:t,from:o}=e;switch(t){case"bookmarks":return n().y8.SidebarBookmark;case"workspace":return n().y8.SidebarWorkspace;case"shared":return"main_sidebar"===o?n().y8.SidebarShared:n().y8.SidebarSharedPane;case"private":return"main_sidebar"===o?n().y8.SidebarPrivate:n().y8.SidebarPrivatePane;case"team":return n().y8.SidebarTeam;case"teamSidebar":case"teamBrowserSearch":case"teamBrowserUnjoinedTeams":case"teamBrowserJoinedTeams":return n().y8.SidebarTeamBrowser;case l().yy:return n().y8.SidebarPublicPageTemplateIncludes;default:(0,m().HB)(t)}}function D(e){return x({rootStore:v().Bv.createChildStore(e,{table:c().ev,id:e.id}),shouldSkipItemTypes:k,shouldShowItemTypes:w})}function N(e){const{store:t,toOpen:o,environment:n,isTopLevelItem:r}=e;r&&s().A.set({userId:n.currentUser.id,key:`Outliner-${t.id}`,value:o})}const L=(0,o(959013).YK)({updatedToday:{id:"sharedWithMePopover.updatedTodaySection.label",defaultMessage:"Updated today"},today:{id:"sharedWithMePopover.todaySection.label",defaultMessage:"Today"},updatedPastWeek:{id:"sharedWithMePopover.updatedPastWeekSection.label",defaultMessage:"Updated in the past week"},pastWeek:{id:"sharedWithMePopover.pastWeekSection.label",defaultMessage:"Past week"},updatedEarlier:{id:"sharedWithMePopover.updatedEarlierSection.label",defaultMessage:"Updated earlier"},earlier:{id:"sharedWithMePopover.earlierSection.label",defaultMessage:"Earlier"}});function F(e){const{section:t,isFirst:o}=e;switch(t){case"today":return o?b().A.formatMessage(L.updatedToday):b().A.formatMessage(L.today);case"past-week":return o?b().A.formatMessage(L.updatedPastWeek):b().A.formatMessage(L.pastWeek);case"earlier":return o?b().A.formatMessage(L.updatedEarlier):b().A.formatMessage(L.earlier);case"all":return;default:throw(0,m().HB)(t)}}function U(e){const t="today",o="past-week",n="earlier",r=(0,i().ah)((0,a().P)()),s=r.valueOf(),l=r.minus({week:1}).valueOf(),c=p().$z(e,(e=>{let{timestamp:r}=e;return r>s?t:r>l?o:n}));let d=-1;return p().oE([t,o,n].map((e=>{const t=c[e];if(t&&0!==t.length)return{key:e,pages:t.map((e=>(d+=1,{...e,index:d})))}})))}const O=new Date("May 16 2024 08:00:00 GMT+0000").getTime();function V(){var e;const{currentUserSettingsStore:t,currentSpaceStore:o}=g().default.state;if(!o)return!0;const n=null==t||null===(e=t.getSettings())||void 0===e?void 0:e.signup_time,r=null==o?void 0:o.getCreatedTime();return(0,m().O9)(n)&&n>O||(0,m().O9)(r)&&r>O}function j(e){const{spaceViewStore:t,type:o}=e,{currentUserSettingsStore:n}=g().default.state,r=t.getSpaceStore(),i=((null==r?void 0:r.getMemberCountFromPublicSpaceData())||0)<=1?10:5,a=r&&(null==n?void 0:n.hasUserPinnedToOutliner({spaceId:r.id,type:"shared"})),s={sortOption:{private:V()?"lastEdited":"manual",shared:a?"manual":"lastEdited"},truncationLimit:{private:i,shared:i,teamspaces:i}},l=p().h1(p().mg(s),null==t?void 0:t.getSidebarSectionMenuConfig());return{sortOption:l.sortOption[o]??"manual",truncationLimit:l.truncationLimit[o]??5}}function z(e){const{spaceViewStore:t}=e;return"lastEdited"===j({spaceViewStore:t,type:"private"}).sortOption}function q(e){let t,{environment:o,store:n,type:r}=e;switch(r){case"bookmarks":t=_().ig.Favorite;break;case"team":case"workspace":case"shared":case"private":t=_().ig.Link;break;default:(0,m().HB)(r)}f().A.recordVisit({id:n.id,systemBlockType:n.getSystemBlockTypeStore().getValue(),type:t,currentUserId:o.currentUser.id})}const H={bookmarks:"favorites",team:"teamspaces",workspace:"workspace",shared:"shared",private:"private",teamSidebar:void 0,teamBrowserSearch:void 0,teamBrowserUnjoinedTeams:void 0,teamBrowserJoinedTeams:void 0,publicPageTemplateIncludes:void 0},W={favorites:"bookmarks",teamspaces:"team",workspace:"workspace",shared:"shared",private:"private"},K=["favorites","workspace","teamspaces","shared","private"],G=["favorites","private","teamspaces","shared"],$=["favorites","teamspaces","shared","private"];function Y(){const{currentSpaceStore:e,currentSpaceViewStore:t}=g().default.state,o=V(),n=(0,h().lT)({isGuest:(0,S().IL)(e),numWorkspacePages:(null==t?void 0:t.getWorkspacePages().length)||0})?K:o?G:$;if(!t)return n;const r=t.getSidebarOrder(),i=p().sb(r),a=n.filter((e=>!i.includes(e)));return[...i,...a]}function Q(e){let{sidebarOrder:t,sidebarState:o,showLockedSidebar:n}=e;if(!o)return t;return t.filter((e=>{switch(e){case"workspace":return o.showWorkspaceSection;case"favorites":return o.showBookmarksSection;case"private":return o.showPrivateSection;case"shared":return o.showSharedSection||n;case"teamspaces":return o.showTeamSection||n;default:(0,m().HB)(e)}}))}},397248:(e,t,o)=>{o.d(t,{z8:()=>a,fT:()=>v,$E:()=>h,HY:()=>p,Wi:()=>m,IA:()=>g,Lq:()=>l,GL:()=>_,KK:()=>w,l6:()=>y,ux:()=>c,X6:()=>d,JK:()=>u,v_:()=>s});o(944114),o(898992),o(581454),o(908872);class n{constructor(e){this.parentOf=void 0,this.sizeOf=void 0,this.parentOf=[],this.sizeOf=[],this.ensureCapacity(e)}get capacity(){return this.parentOf.length}ensureCapacity(e){if(!(e<=this.capacity))for(let t=this.parentOf.length;t<e;t++)this.parentOf[t]=t,this.sizeOf[t]=1}getNodeSize(e){return this.ensureCapacity(e+1),this.sizeOf[e]}getSets(){const e=[],t=[];for(let o=0;o<this.capacity;o++){const n=this.findRoot(o);n===o&&e.push(o),t[n]??=[],t[n].push(o)}return e.map((e=>t[e]))}unionContainingSets(e,t){return this.ensureCapacity(Math.max(e,t)+1),this.unionContainingSetsInternal(e,t)}unionContainingSetsInternal(e,t){if((e=this.findRootInternal(e))===(t=this.findRootInternal(t)))return e;const[o,n]=this.sizeOf[e]>this.sizeOf[t]?[e,t]:[t,e];return this.parentOf[n]=o,this.sizeOf[o]=this.sizeOf[o]+this.sizeOf[n],o}findRoot(e){return this.ensureCapacity(e+1),this.findRootInternal(e)}findRootInternal(e){for(;this.parentOf[e]!==e;){const t=this.parentOf[e];this.parentOf[e]=this.parentOf[this.parentOf[e]],e=t}return e}isRoot(e){return this.parentOf[e]===e}}var r=()=>o(496603),i=()=>o(659026);class a{static from(e){return new a(e.left,e.top,e.width,e.height)}constructor(e,t,o,n){this.x=e,this.y=t,this.width=o,this.height=n,this.top=this.height<0?this.y+this.height:this.y,this.bottom=this.height<0?this.y:this.y+this.height,this.left=this.width<0?this.x+this.width:this.x,this.right=this.width<0?this.x:this.x+this.width}toJSON(){return{...this}}}const s=new a(0,0,0,0);function l(e){return Boolean(e&&(r().Et(e.top)||r().Et(e.left)))}function c(e,t,o){return e.left<=t&&t<=e.right&&e.top<=o&&o<=e.bottom}function d(e,t){return e.left<=t.left&&e.right>=t.right}function u(e,t){return e.top<=t.top&&e.bottom>=t.bottom}function p(e,t){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)}function m(e,t){return!(e.right<=t.left||t.right<=e.left)}function g(e,t){return!(e.bottom<=t.top||t.bottom<=e.top)}function f(e,t,o){return new a(e.left+t,e.top+o,e.width,e.height)}function v(e,t){return new a(e.left-t,e.top-t,e.width+2*t,e.height+2*t)}function h(e,t){return new a(e.left-t.left,e.top-t.top,t.left+e.width+t.right,t.top+e.height+t.bottom)}function _(e){const t=e.top+e.height/2,o=e.left+e.width/2;return new a(o,t,0,0)}function b(e){const t=e.slice();return t.sort(((e,t)=>{const o=e.top-t.top;if(0!==o)return o;const n=e.left-t.left;if(0!==n)return n;const r=t.width-e.width;return 0!==r?r:t.height-e.height})),t}function y(e,t){const o=Math.min(e.left,t.left),n=Math.min(e.top,t.top),r=Math.max(e.right,t.right),i=Math.max(e.bottom,t.bottom);return new a(o,n,r-o,i-n)}function S(e){const t=new n(e.length),o=b(e);for(let n=0;n<o.length;n++)for(let e=n+1;e<o.length;e++)p(o[n],o[e])&&t.unionContainingSets(n,e);return b(t.getSets().map((e=>e.map((e=>o[e])).reduce(((e,t)=>y(e,t))))))}function w(e){const t=S(e);if(0===t.length)return{total:new a(0,0,0,0),rects:[]};if(1===t.length){const e=a.from(t[0]);return{total:e,rects:[{original:e,translate:(0,i().zg)(),translated:e}]}}const[o,...n]=t;let r=a.from(o);const s=[{original:o,translate:(0,i().zg)(),translated:o}];for(const a of n){if(g(o,a)){r=y(r,a),s.push({original:a,translate:(0,i().zg)(),translated:a});continue}const e={x:r.right,y:r.top},t=(0,i().Nh)(e,a),n=f(a,t.x,t.y);s.push({original:a,translate:t,translated:n}),r=y(r,n)}return{total:r,rects:s}}(0,o(604341).exposeDebugValue)("Rect",{ComparableRect:a,simplifyIntersectingRects:S,intersects:p,undoTextWrapping:w})},397292:(e,t,o)=>{o.d(t,{G:()=>i,c:()=>r});var n=()=>o(508496);function r(){return"on"===n().default.getEligibleGroup({experimentId:"monday_importer",defaultGroup:"control"})}function i(){return n().default.checkGate({gateName:"monday_v2_enabled"})}},397740:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{loading:!1,areAccountsFetched:!1,accountsResponse:{accounts:[]}}}}const r=new n},398194:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1,hasPassword:!1}}isSetNewPasswordModal(){const e=this.state;return!0===e.setNewPassword&&!1===e.isSet}isPasswordSetModal(){const e=this.state;return!0===e.setNewPassword&&!0===e.isSet}isRemovePasswordModal(){const e=this.state;return!0===e.removePassword&&!1===e.isSuccess}isRemovePasswordSuccessModal(){const e=this.state;return!0===e.removePassword&&!0===e.isSuccess}isVerifyIdentityWithMfaModal(){return!0===this.state.verifyIdentity}isPasswordModalClosed(){return!this.state.open}}const r=new n},398209:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},399561:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{toasts:{}}}}const r=new n},400851:(e,t,o)=>{o.d(t,{X:()=>d,Y:()=>c});var n=()=>o(56366),r=()=>o(179034),i=()=>o(731320),a=()=>o(77246),s=()=>o(548821),l=()=>o(411671);function c(e){let{environment:t,blockStore:o,from:n,blockContext:c}=e;const{device:d,currentUser:u}=t;if(!u.isLoggedIn()||(0,i().qb)(t,o)&&!l().A.state.editing)return!1;if(d.isMobile)return!1;if(c===s().Rr.InPageSnapShot)return!1;if("suggest"===a().Uv.getMode(o))return!1;if(o.pathIsDead())return!1;if(o.isCollectionView()&&"topControls"!==n)return Boolean(o.canEditCollection()&&o.getCollectionViewSourceCollectionStore()&&!o.isCollectionViewPageWithContent()&&!o.isLocked());if(o.isPageBlock()||o.isExternalObjectInstancePageBlockStore()){const e=o.getAssociatedCollectionStore(),t=null==e?void 0:e.getParentStore();return Boolean(!o.isLocked()&&e&&e.canEditCollection()&&!e.isPageTreeCollection()&&(null==t?void 0:t.table)===r().ev&&!t.isLocked())}return!1}function d(e){let{environment:t,blockStore:o,from:r,blockContext:i}=e;return(0,n().K8)((()=>!!o&&c({environment:t,blockStore:o,from:r,blockContext:i})),[i,o,t,r])}},401040:(e,t,o)=>{o.d(t,{RH:()=>g,gu:()=>f,oW:()=>m,rs:()=>v});var n=()=>o(496603),r=()=>o(534177),i=()=>o(286088),a=()=>o(102586),s=()=>o(301421),l=()=>o(630116),c=()=>o(502438),d=()=>o(24157),u=()=>o(972435),p=()=>o(969197);function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u().A.getIntl();if("helpMeEdit"===e.key||"helpMeDraft"===e.key||"helpMeWrite"===e.key){var o;const n=null===(o=e.steps)||void 0===o?void 0:o[0],r="text"===(null==n?void 0:n.type)&&n.prefilledValue;return r?t.formatMessage({id:"completionPopup.prefilledValue",defaultMessage:"Write about {prefilledValue} "},{prefilledValue:r}):""}if(!(0,a().US)(e.key))return"";switch(e.key){case"brainstormIdeas":return t.formatMessage({id:"completionPopup.brainStorm.prefilledValue",defaultMessage:"Brainstorm ideas on "});case"blogPost":return t.formatMessage({id:"completionPopup.blogPost.prefilledValue",defaultMessage:"Write a blog post about "});case"outline":return t.formatMessage({id:"completionPopup.outline.prefilledValue",defaultMessage:"Write an outline about "});case"socialMediaPost":return t.formatMessage({id:"completionPopup.socialMediaPost.prefilledValue",defaultMessage:"Write a social media post about "});case"pressRelease":return t.formatMessage({id:"completionPopup.pressRelease.prefilledValue",defaultMessage:"Write a press release about "});case"creativeStory":return t.formatMessage({id:"completionPopup.creativeStory.prefilledValue",defaultMessage:"Write a creative story about "});case"essay":return t.formatMessage({id:"completionPopup.essay.prefilledValue",defaultMessage:"Write an essay about "});case"poem":return t.formatMessage({id:"completionPopup.poem.prefilledValue",defaultMessage:"Write a poem about "});case"todoList":return t.formatMessage({id:"completionPopup.todoList.prefilledValue",defaultMessage:"Write a todo list about "});case"meetingAgenda":return t.formatMessage({id:"completionPopup.meetingAgenda.prefilledValue",defaultMessage:"Write a meeting agenda about "});case"prosConsList":return t.formatMessage({id:"completionPopup.prosConsList.prefilledValue",defaultMessage:"Write a pros and cons list about "});case"jobDescription":return t.formatMessage({id:"completionPopup.jobDescription.prefilledValue",defaultMessage:"Write a job description about "});case"salesEmail":return t.formatMessage({id:"completionPopup.salesEmail.prefilledValue",defaultMessage:"Write a sales email about "});case"recruitingEmail":return t.formatMessage({id:"completionPopup.recruitingEmail.prefilledValue",defaultMessage:"Write a recruiting email about "});default:(0,r().HB)(e.key)}}function g(){const{stores:e}=c().default.state,t=e[0],o=n().HV(e),r=t?t.getRecordStoreUIRoot():void 0;if(r&&r instanceof l().Bv&&o){return{type:"blockSelection",stores:e,currentPage:r,origin:o,scrollerStore:(0,i().K3)(r)}}}function f(){const e=d().default.state;if("editing"!==e.mode)return;const t=e.multiSelection,o=t.start.store,n=o.getRecordStoreUIRoot(),r=s().n.findNodeFromStore(o),a=(0,p().T)(o),c=null==a?void 0:a.getRecordStoreUIParent(),u=(0,i().K3)(n),m=a&&a instanceof l().Bv&&a!==n?a:void 0,g=m??r;if(!(n&&n instanceof l().Bv&&g))return;return{type:"cursor",textSelection:t,currentPage:n,currentBlock:m,origin:g,currentParent:c,scrollerStore:u,isPageTitle:n.id===o.id}}function v(){const{stores:e}=c().default.state,t=d().default.state,o="empty"!==t.mode?t.multiSelection:void 0,n="empty"!==t.mode?t.multiSelection.start.store:void 0;let r=n?n.getRecordStoreUIRoot():void 0;if(!(r instanceof l().Bv)){let e,t=null==n?void 0:n.getRecordStoreUIParent();for(;null!=t;)t instanceof l().Bv&&(e=t),t=t.getRecordStoreUIParent();e&&(r=e)}if(o&&r&&r instanceof l().Bv){const t=(0,p().T)(o.end.store),n=null==t?void 0:t.getRecordStoreUIParent(),a=(0,i().K3)(r);if(t&&n){return{type:"textSelection",stores:e,textSelection:o,currentPage:r,origin:t,endBlock:t,endBlockParent:n,scrollerStore:a}}}}},402838:(e,t,o)=>{o.d(t,{s:()=>i});var n=o(296540),r=()=>o(472090);function i(e,t){const[o,i]=(0,n.useState)(void 0),a=e.current;return(0,n.useEffect)((()=>{if(!a)return;const e=new(r().E)({throttleMs:t});return e.observe(a),e.rect.addListener((e=>{i(e.state)})),()=>{e.destroy()}}),[a,t]),o}},403409:(e,t,o)=>{o.d(t,{e:()=>s,A:()=>p});var n=o(296540),r=()=>o(484714),i=()=>o(496603),a=()=>o(534177);let s=function(e){return e.Inline="Inline",e.InlineWrap="InlineWrap",e.Textarea="Textarea",e}({}),l=function(e){return e.Submit="Submit",e.Newline="Newline",e}({});function c(e){const{device:t,e:o,action:n,onSubmit:r}=e;if(n===l.Submit)r&&r(o);else if(n===l.Newline){if(!t.isIOS)return;o.preventDefault&&o.preventDefault(),document.execCommand("insertLineBreak")}else(0,a().HB)(n)}var d=()=>o(728611),u=o(474848);const p=(0,n.forwardRef)((function(e,t){const[p,m]=(0,n.useState)(),g=(0,n.useRef)(null),f=(0,r().Y0)(),v=(0,r().v3)(),{onBlur:h,onCancel:_,type:b,onSubmit:y,onLeft:S,onRight:w,onChange:k,getHtml:I,onCompose:A}=e;(0,n.useEffect)((()=>{const e=e=>{var t;const o=null===(t=g.current)||void 0===t?void 0:t.getNode();o&&e.target instanceof Node&&!o.contains(e.target)&&h&&h()};return d().P4(window,"mousedown",e),()=>d().Ol(window,"mousedown",e)}),[h]),(0,n.useEffect)((()=>{e.focus&&!p&&(e.selectAll?m({startIndex:0,endIndex:e.value.length}):m({startIndex:e.value.length,endIndex:e.value.length}))}),[e.focus,e.selectAll,e.value.length,p]);const x=(0,n.useCallback)((()=>{const t=i().ih(e.value+(e.value.length>0?"\n":""));return I?I(t):t}),[I,e.value]),C=(0,n.useCallback)((()=>!!e.disabled||!e.focus),[e.disabled,e.focus]),T=(0,n.useCallback)((()=>p&&{type:"contain",selection:p}),[p]);(0,n.useImperativeHandle)(t,(()=>({getSelection:T})),[T]);const M=(0,n.useCallback)((()=>{const e=o(921855)._S(v,o(906537).get());e&&(i().n4(e.selection,p)||m(e.selection),e.forceEmitSelectionStore&&o(24157).default.emit())}),[v,p]),P=(0,n.useCallback)((()=>{o(908006).default.afterNextFlush((()=>{M()}))}),[M]),B=(0,n.useCallback)((e=>{P(),null==_||_(e)}),[P,_]),R=(0,n.useCallback)((e=>{if(C())return;const t=function(e){const{device:t,type:o,e:n}=e;return o===s.Inline?l.Submit:o===s.InlineWrap?t.isPhone?l.Submit:"altKey"in n&&n.altKey||"shiftKey"in n&&n.shiftKey?l.Newline:l.Submit:o===s.Textarea?l.Newline:void(0,a().HB)(o)}({device:f,type:b,e});c({device:f,e,action:t,onSubmit:y})}),[f,C,y,b]),E=(0,n.useCallback)((e=>{f.isIOS&&!("shiftKey"in e)?c({device:f,e,action:l.Newline}):R(e)}),[f,R]),D=(0,n.useCallback)((e=>{C()||(P(),null==S||S(e))}),[C,P,S]),N=(0,n.useCallback)((e=>{C()||(P(),null==w||w(e))}),[C,P,w]),L=(0,n.useCallback)((e=>{let{newValue:t,isComposing:o}=e;M(),null==A||A(o),!o&&k(t)}),[k,M,A]);return(0,u.jsx)(o(545805).A,{debugName:"ContentEditableInput",capture:!C(),onDelete:P,onBackspace:P,onEnter:R,onShiftEnter:E,onCommandEnter:P,onCommandShiftEnter:P,onUp:P,onDown:P,onLeft:D,onRight:N,onTab:P,onUntab:P,onSelectAll:P,onToggleBold:P,onToggleItalics:P,onToggleStrike:P,onToggleCode:P,onUndo:P,onRedo:P,onEsc:B,onCut:P,onCopy:P,onPaste:P,onKeypress:P,onHome:P,onEnd:P,onGoToBeginningOfLine:P,onGoToEndOfLine:P,onGoForwardOneChar:P,onGoBackwardOneChar:P,children:(0,u.jsx)(o(477450).A,{leafRef:g,style:{...e.style,whiteSpace:"pre-wrap"},debugName:"ContentEditableInput",placeholder:e.placeholder,placeholderStyle:e.placeholderStyle,spellCheck:!1,autoCorrect:e.autoCorrect,autoCapitalize:e.autoCapitalize,isDisabled:C(),getHtml:x,getSelection:T,onMutation:L,suppressNewlineEvents:b===s.Inline,expandSelectionOnTripleClick:!0})})}))},403831:(e,t,o)=>{o.d(t,{X:()=>a,q:()=>i});var n=()=>o(645873);const r=new(n().O2)("errorBoundaryDebugger",(async()=>await o.e(14068).then(o.bind(o,415168)))),i=(0,n()._h)(r,(e=>e.ErrorBoundaryDebugger)),a=new(n().O2)("errorBoundaryDebuggingStore",(async()=>await o.e(82430).then(o.bind(o,731506))))},404141:(e,t,o)=>{o.d(t,{A:()=>i,r:()=>n});let n=function(e){return e[e.OpenInDesktopApp=0]="OpenInDesktopApp",e[e.TwoStepVerification=1]="TwoStepVerification",e[e.LanguageSetting=2]="LanguageSetting",e[e.StudentPlanOffer=3]="StudentPlanOffer",e}({});class r extends(()=>o(757695))().default{getInitialState(){return{open:!1,currentTab:"settings",defaultSubtab:void 0,highlightedSetting:void 0,openedFrom:void 0}}}const i=new r},404482:(e,t,o)=>{o.d(t,{D8:()=>a,Nw:()=>i});var n=()=>o(662303),r=()=>o(236005);Boolean("en-US"===n().locale);function i(e){const t="https://www.notion.so";return"en-US"!==n().locale?`${t}/${n().locale.toLocaleLowerCase()}${e}`:`${t}${e}`}function a(e,t){if(e.device.isElectron||e.device.isMobileNative)return!1;const o=(0,r().H2)(t,e.currentUser.isLoggedIn());return!!o&&"devOnly"!==o}},404779:(e,t,o)=>{o.d(t,{y:()=>s});var n=()=>o(4319),r=()=>o(945895),i=()=>o(502438),a=()=>o(34556);function s(){n().wr(),function(){const e=r().A.state,t=i().default.state;e.isActive&&1===t.stores.length&&t.stores[0].id===e.store.id||(0,a().x)()}()}},404783:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{constructor(e,t){super(),this.environment=void 0,this.spaceId=void 0,this.environment=e,this.spaceId=t,this.reset()}getInitialState(){if(!this.environment)return;const e=new(o(221844).A)({name:"DiscussionInputStore",isTemporaryData:!0});return{textStore:new(o(630116).pm)({environment:this.environment,pointer:(0,o(594794).zP)({environment:this.environment,table:o(343666).SN,spaceId:this.spaceId}),path:["text"],recordStoreOptions:{inMemoryRecordCache:e}}),localRecordCache:e,files:[],showAttachFileIntro:!1,renderFileAttachIntro:!1}}isEmpty(){const e=this.state.textStore.getValue();return!e||0===e.length}hasNewLineCharacter(){const e=this.state.textStore.getValue();return o(919709).q4_(e).includes("\n")}}const r=n},405417:(e,t,o)=>{o.d(t,{BK:()=>X,Ch:()=>B,DH:()=>q,F9:()=>F,Ib:()=>G,Kk:()=>re,Ku:()=>te,Pi:()=>S,Px:()=>ee,QV:()=>Z,TK:()=>z,Tk:()=>Q,W5:()=>J,aR:()=>K,ag:()=>D,ay:()=>O,eI:()=>j,eO:()=>P,f5:()=>N,jF:()=>R,jz:()=>oe,kY:()=>L,ls:()=>Y,n9:()=>H,oC:()=>W,pC:()=>T,qS:()=>A,qr:()=>x,r6:()=>I,rt:()=>C,v2:()=>E,vd:()=>$,x2:()=>k,xC:()=>ne,yS:()=>U,yy:()=>w});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(581454),o(737550);var n=()=>o(700500),r=()=>o(289915),i=()=>o(970013),a=()=>o(713998),s=()=>o(244149),l=()=>o(416504),c=()=>o(708830),d=()=>o(496603),u=()=>o(519839),p=()=>o(862292),m=()=>o(129522),g=()=>o(695625),f=()=>o(441307),v=()=>o(508496),h=()=>o(630116),_=()=>o(186445),b=()=>o(909470),y=()=>o(972435);const S=4,w=24,k=10;function I(e){var t;const o=null===(t=e.collectionStore())||void 0===t?void 0:t.getFormat().subitem_property,n=e.collectionStore();if(!n||!n.getSchema()||!o)return;const r=n.getSchema()[o];if(!r||"relation"!==r.type||i().zO(r)!==n.id)return;const a=r.property;if(!a)return;const s=n.getSchema()[a];return s&&"relation"===s.type?{property:o,inverse:a}:void 0}function A(e){return"table"===e||"timeline"===e||"list"===e}function x(e){var t;const o=(0,u().UH)(e),n=null==o||null===(t=o.collectionViewStore())||void 0===t?void 0:t.getType();return Boolean((null==o?void 0:o.currentSubitemFormatStoreForUiDisplayStore.state)&&n&&A(n))}function C(e){const{store:t,subitemFormat:o,propertySchema:n}=e,r=t.getPropertyValue(o.property),i=(0,a().n)(r),s=t.getRecordModel;return a().bG({relationValue:i,propertySchema:n,getRecordModel:s})}function T(e){const{store:t,subitemFormat:o,originAction:n}=e,r=t.getPropertyValue(o.property),i=(0,a().n)(r),s=t.getRecordModel;return a().pj({relationValue:i,getRecordModel:s,originAction:n})}async function M(e){const{store:t,subitemFormat:o,propertySchema:n}=e,r=t.getPropertyValue(o.property),i=(0,a().n)(r);await Promise.all(i.map((e=>h().Bv.createChildStore(t,e).load())));const s=t.getRecordModel;return a().bG({relationValue:i,propertySchema:n,getRecordModel:s,includeDeleted:v().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:v().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:v().default.checkGate({gateName:"relations_show_no_access"})})}function P(e){const{store:t,subitemFormat:o,propertySchema:n}=e,r=t.getPropertyValue(o.inverse),i=(0,a().n)(r),s=t.getRecordModel;return a().bG({relationValue:i,propertySchema:n,getRecordModel:s})}function B(e){var t;const{store:o,collectionStore:n,collectionContextStore:i,subitemFormat:a,subitemPathKey:s,propertyFilters:c,combinatorFilter:d,currentUserId:u,resultCache:p,regExpCache:m,formulasModule:g}=e,f=n.getSchema()[a.property];if(!f||"relation"!==f.type)return[];const v=C({store:o,subitemFormat:a,propertySchema:f});if(0===v.length)return[];let S=v.filter((e=>!s.includes(e.id))).map((e=>h().Bv.createChildStore(o,e)));const w=i.relativeVariableStore.state,k={schema:i.normalizedSchemaStore.state,userId:u,userTimeZone:(0,l().P)(),userStartOfWeek:_().XX.state,intl:y().A.getIntl(),relativeVariableResult:w,currentPageInRelatedCollection:null===(t=i.viewsModuleContextStore.currentPageStore())||void 0===t?void 0:t.id,collectionFeatureGates:(0,b().i)()};if(c&&c.length>0||d){const e=(0,r().oR)({filter:{filters:d?[...c.filter((e=>!(0,r().t_)(e.filter))).map((e=>e.filter)),d]:c.filter((e=>!(0,r().t_)(e.filter))).map((e=>e.filter)),operator:"and"},propertyMapping:void 0,context:k});S=S.filter((t=>V({blockStore:t,compiledFilter:e,subitemFormat:a,propertySchema:f,visitedIds:new Set,resultCache:p,regExpCache:m,formulasModule:g})))}return S}function R(e,t){var o,n;const r=e.currentSubitemFormatStoreForUiDisplayStore.state;if(!r)return new(c().C2)([]);const a=e.collectionStore();if(!a)return new(c().C2)([]);const u=e.currentSortsStore.state,p=a.getRecordModel,m=e.formulasCodeStore.state,g=s().kX({userTimeZone:(0,l().P)(),intl:y().A.getIntl(),userSorts:u,userId:e.getCurrentUserId(),apiSorts:[],schema:e.normalizedSchemaStore.state,formulasModule:m}),f=e.normalizedSchemaStore.state[r.property],h=f&&"relation"===f.type&&i().zO(f)===(null===(o=e.collectionStore())||void 0===o?void 0:o.id)&&f.property,_=null===(n=e.collectionViewStore())||void 0===n?void 0:n.getType(),S=!h||_&&A(_)?void 0:{property:h,filter:{operator:"is_empty"}},w=[...S&&h?[{id:h,filter:S}]:[],...e.currentPropertyFiltersStore.state],k=e.currentCombinatorFilterStore.state,I=e.subitemExpandedStore.state,x=d().Bq(e.groupsStore.getAllGroupStates().map((e=>e.resultsStore.state))),C=new Map,T=new Map;return new(c().C2)(x.map((o=>{const n=N(o);return(0,c().v)(n,(o=>{let{store:n,pathKey:i}=o;const l=I.get(i);if(!l)return{value:{store:n,pathKey:i},children:[]};const c=function(e){const{store:t,collectionStore:o,collectionContextStore:n,subitemFormat:r,querySorts:i,limit:a,subitemPathKey:l,propertyFilters:c,combinatorFilter:u,currentUserId:p,getRecordModel:m,resultCache:g,regExpCache:f,formulasModule:h}=e,_=B({store:t,collectionStore:o,collectionContextStore:n,subitemFormat:r,subitemPathKey:l,propertyFilters:c,combinatorFilter:u,currentUserId:p,resultCache:g,regExpCache:f,formulasModule:h});if(!_)return[];const y=new(s().z8)([...i,...s().e$(_.map((e=>e.id))??[])]),S=(0,b().i)();_.forEach((e=>{y.updateBlock({block:e.getModel(),schema:o.getSchema(),propertyMapping:void 0,getRecordModel:m,resultCache:g,regExpCache:f,experimentService:v().default,collectionFeatureGates:S})}));const w=_.map((e=>e.id))??[],k=s().bC(w,y),I={};return k.forEach(((e,t)=>{I[e]=t})),d().Ul(_,(e=>I[e.id])).slice(0,a)}({store:n,collectionStore:a,collectionContextStore:e,subitemFormat:r,querySorts:g,limit:l.limit,subitemPathKey:i,propertyFilters:w,combinatorFilter:k,currentUserId:t,getRecordModel:p,resultCache:C,regExpCache:T,formulasModule:m}).map((e=>({store:e,pathKey:F(i,e)})));return{value:{store:n,pathKey:i},children:c}}))})))}function E(e,t){const o=e?[e]:[],n=t.groupsStore.getGroupState(o);if(!n)return[];const r=n.resultsStore.state;if(!t.currentSubitemFormatStoreForUiDisplayStore.state)return r;const i=[],a=t.subitemTreeStore.state.children.filter((e=>r.includes(e.value.store)));for(const s of a)U({results:i,tree:s});return i}function D(e){return(0,c().wI)(e.children[e.children.length-1])}function N(e){return{store:e,pathKey:L([e.pointer])}}function L(e){return e.map((e=>e.id)).join(",")}function F(e,t){return e?`${e},${t.id}`:t.id}function U(e){const{results:t,tree:o}=e;t.push(o.value.store);for(const n of o.children)U({results:t,tree:n})}function O(e){var t,o;const{block:n,collectionContextStore:r}=e,s=null==r||null===(t=r.currentSubitemFormatStoreForUiDisplayStore.state)||void 0===t?void 0:t.inverse;if(!s)return!1;const l=r.normalizedSchemaStore.state[s];if(!l||!(0,i().nC)(l))return!1;const c=null===(o=r.collectionViewBlockStore())||void 0===o?void 0:o.getRecordModel;if(!c)return!1;return(0,a().O4)({block:n,propertySchema:l,getRecordModel:c,collectionFeatureGates:(0,b().i)()}).length>0}function V(e){const{blockStore:t,compiledFilter:o,subitemFormat:n,propertySchema:r,visitedIds:i,resultCache:a,regExpCache:s,formulasModule:l}=e;i.add(t.id);const c=t.getModel();if(!c)return!1;if(o({block:c,getRecordModel:t.getRecordModel,propertyMapping:void 0,resultCache:a,regExpCache:s,experimentService:v().default,formulasModule:l}))return!0;const d=C({store:t,subitemFormat:n,propertySchema:r});return 0!==d.length&&d.map((e=>h().Bv.createChildStore(t,e))).filter((e=>!i.has(e.id))).some((e=>V({blockStore:e,compiledFilter:o,subitemFormat:n,propertySchema:r,visitedIds:i,resultCache:a,regExpCache:s,formulasModule:l})))}async function j(e){const{blockStore:t,compiledFilter:o,subitemFormat:n,propertySchema:r,subitemExpandedStore:i,pathKey:a,forceStoresToLoad:s,visitedIds:l,resultCache:c,regExpCache:d}=e;if(await t.load(),l.has(t.id))return;l.add(t.id);const u=s?await M({store:t,subitemFormat:n,propertySchema:r}):C({store:t,subitemFormat:n,propertySchema:r});if(0!==u.length){i.state.set(a,{isExpanded:!0,limit:20});for(const e of u){const u=h().Bv.createChildStore(t,e),m=u.getModel();if(!m)continue;const g=await p().T.formulas.load();o({block:m,getRecordModel:u.getRecordModel,propertyMapping:void 0,resultCache:c,regExpCache:d,experimentService:v().default,formulasModule:g})||await j({blockStore:u,compiledFilter:o,subitemFormat:n,propertySchema:r,subitemExpandedStore:i,pathKey:F(a,u),forceStoresToLoad:s,visitedIds:l,resultCache:c,regExpCache:d})}}}const z=100;async function q(e){var t;const{blockStore:o,subitemFormat:n,propertySchema:r,subitemExpandedStore:i,pathKey:a,forceStoresToLoad:s,visitedIds:l,expandedIds:c,resultCache:d,regExpCache:u}=e;if(l.size>z)return!1;if(l.has(o.id))return!0;await o.load(),l.add(o.id);const p=s?await M({store:o,subitemFormat:n,propertySchema:r}):C({store:o,subitemFormat:n,propertySchema:r});if(0===p.length)return!0;(null===(t=i.state.get(a))||void 0===t?void 0:t.isExpanded)||(i.state.set(a,{isExpanded:!0,limit:20}),c.add(o.id));let m=!0;for(const g of p){const e=h().Bv.createChildStore(o,g);if(!e.getModel())continue;const t=await q({blockStore:e,subitemFormat:n,propertySchema:r,subitemExpandedStore:i,pathKey:F(a,e),forceStoresToLoad:s,visitedIds:l,expandedIds:c,resultCache:d,regExpCache:u});m=m&&t}return m}function H(e){if(!e.collectionStore())return;const t=e.currentSubitemFormatStoreForCollectionStore.state,o=e.normalizedSchemaStore.state,n=(null==t?void 0:t.inverse)&&o[t.inverse],r=(null==t?void 0:t.property)&&o[t.property];if(!(r&&(0,i().nC)(r)&&n&&(0,i().nC)(n)))return;const a=n.property,s=r.property;return a&&s?{childRelationProperty:a,parentRelationProperty:s,childRelationSchema:n,parentRelationSchema:r,subitemFormat:t}:void 0}function W(e){const t=(0,u().UH)(e);if(t)return H(t)}function K(e,t){const o=G(e,t);if(o)return H(o)}function G(e,t){if(!e)return;if(!(e.isType(n().xd.collectionViewPage)||e.isType(n().xd.page)))return;const o=e.getAssociatedCollectionStore();if(!o)return;const r=new(f().A)(t);return r.setContext({type:"collectionPage",collectionViewBlockStore:void 0,collectionStore:o}),r}function $(e){const t=e.getFormat().subitem_property;if(!t)return;const o=e.getSchema()[t];if(!o||"relation"!==o.type)return;const n=o.property;return n?{property:t,inverse:n}:void 0}function Y(e,t){if(!e.isType("page")||e.isTemplate())return!1;if(!t)return!1;return!!t.collectionStore()&&Boolean(t.currentSubitemFormatStoreForCollectionStore.state)}function Q(e){var t,o;const{blockId:n,collectionContextStore:r}=e,i=null===(t=r.currentSubitemFormatStoreForCollectionStore)||void 0===t?void 0:t.state,a=null==i?void 0:i.inverse;if(!i||!a)return!1;const s=e.blockStore??(null===(o=m().K.findBlockFromId(n))||void 0===o?void 0:o.getBlockStore());if(!s)return!1;const l=s.getSchema();if(!l)return!1;const c=l[a];return!(!c||"relation"!==c.type)&&P({store:s,subitemFormat:i,propertySchema:c}).length>0}function Z(e){var t;const{collectionContextStore:o,blockStore:n}=e,r=null===(t=o.currentSubitemFormatStoreForCollectionStore)||void 0===t?void 0:t.state,i=null==r?void 0:r.property;if(!r||!i)return!1;const a=n.getSchema();if(!a)return!1;const s=a[i];return!(!s||"relation"!==s.type)&&C({store:n,subitemFormat:r,propertySchema:s}).length>0}function X(e){let{blocks:t,parentRelationProperty:o,parentRelationSchema:n,collectionViewBlockStore:r}=e;const i=new Set;for(const a of t)i.add(a.id);return d().Bq(t.map((e=>{const t=(e=>{const t=e.getPropertyValue(o);return a().bG({relationValue:a().n(t),propertySchema:n,getRecordModel:e.getRecordModel})})(e),s=t.map((e=>e.id));if(0===t.length)return[h().Bv.createChildStore(r,e.pointer)];return g().T.findAllSelectablesFromIds(s.filter((e=>!i.has(e)))).map((e=>e.props.store)).map((t=>h().Bv.createChildStore(t,e.pointer)))})))}function J(e,t){const o=e.subitemTreeStore,n=(0,c().Qe)(o.state.children,(e=>e.value.store===t)),r=n?L(n.map((e=>e.value.store))):"";return e.subitemExpandedStore.state.get(r)}function ee(e,t){const o=te(e,t);return e.filter(((e,t)=>o.includes(t)))}function te(e,t){const o=new Set;e.forEach((e=>{o.add(e.pointer.id)}));const n=[];return e.forEach(((e,r)=>{const i=e.getPropertyValue(t.inverse);a().n(i).some((e=>o.has(e.id)))||n.push(r)})),n}function oe(e){var t;let{collectionContextStore:o}=e;return I(o)&&"flattened"===(null===(t=o.collectionViewStore())||void 0===t?void 0:t.getFormat().subitem_display_mode)}function ne(e){let{collectionContextStore:t,blockStore:o}=e;return oe({collectionContextStore:t})&&Q({blockId:o.id,collectionContextStore:t,blockStore:o})}function re(e){let{collectionContextStore:t,blockStore:o}=e;return function(e){var t;let{collectionContextStore:o}=e;return I(o)&&"hidden"===(null===(t=o.collectionViewStore())||void 0===t?void 0:t.getFormat().subitem_display_mode)}({collectionContextStore:t})&&Z({collectionContextStore:t,blockStore:o})}},405789:(e,t,o)=>{o.d(t,{A:()=>f});var n=o(296540),r=()=>o(56366),i=()=>o(959013),a=()=>o(891078),s=()=>o(42425),l=(o(898992),o(672577),()=>o(451306)),c=()=>o(544303),d=o(474848);function u(e){const{rank:t,index:o,listFormat:n}=e;if("numbers"===n)return{index:o,listFormat:n};if("letters"===n)return{index:(0,c().GB)(o),listFormat:n};if("roman"===n)return{index:(0,c().ao)(o),listFormat:n};{const e=t%3;return 0===e?{index:o,listFormat:"numbers"}:1===e?{index:(0,c().GB)(o),listFormat:"letters"}:{index:(0,c().ao)(o),listFormat:"roman"}}}const p=function(e){const t=(0,r().K8)((()=>{if(!e.numberedListCounterStore)return u({rank:0,index:1,listFormat:void 0});const t=e.numberedListCounterStore.state.numberedListBlockIdsWithFormat.find((t=>t.id===e.store.id));return u({rank:(null==t?void 0:t.depth)||0,index:(null==t?void 0:t.index)||0,listFormat:null==t?void 0:t.format})}),[e.numberedListCounterStore,e.store.id]);if("roman"===t.listFormat){const e=t.index;return(0,d.jsx)("span",{...(0,l().AH)({pseudoBefore:{content:`"${e}."`},textAlign:"left",width:(0,c().KK)(e),whiteSpace:"nowrap"})})}{const e=t.index.toString().length;let o=24;return 3===e?o=32:4===e?o=42:e>4&&(o="unset"),(0,d.jsx)("span",{...(0,l().AH)({pseudoBefore:{content:`"${t.index}."`},width:o,textAlign:"center",whiteSpace:"nowrap"})})}};const m=(0,i().YK)({listPlaceholder:{defaultMessage:"List",id:"numberedListBlock.placeholder.label"}});function g(e,t){const l=(0,i().tz)(),c=n.useRef(null),u=(0,r().K8)((()=>e.store.getBlockTitleStore()),[e.store]),g=(0,r().K8)((()=>e.store.getContentStore()),[e.store]),f=(0,a().pW)(e.store,!0),v=(0,r().K8)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),h=(0,o(401497).IS)((t=>({root:{paddingLeft:o(799954).nE.paddingLeft,...f,...e.style},title:{...s().FC},titlePlaceHolder:{...v?{color:t.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{}},leftStyle:{width:"unset"}})),[f,v,e.style]),_=(0,d.jsxs)(s().Ay,{style:h.root,left:(0,d.jsx)(p,{store:e.store,numberedListCounterStore:e.numberedListCounterStore}),leftStyle:h.leftStyle,childrenStyle:{display:"flex",flexDirection:"column"},ref:c,children:[(0,d.jsxs)("div",{style:{display:"flex"},children:[(0,d.jsx)(o(246722).A,{style:h.title,disabled:e.disabled,store:u,placeholder:l.formatMessage(m.listPlaceholder),placeholderStyle:h.titlePlaceHolder,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:o(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,d.jsx)(o(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}),!e.hideContent&&(0,d.jsx)(o(99945).A,{disabled:e.disabled,store:g,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag,numberedListCounterStore:e.numberedListCounterStore})]});return(0,a().NW)(e.store,t,(0,n.useMemo)((()=>({renderedType:"numbered_list",getNode:()=>c.current,getBlockStore:()=>e.store})),[e.store]),_)}const f=n.memo(n.forwardRef(g),o(821062).A)},405981:(e,t,o)=>{o.d(t,{HR:()=>p,_y:()=>m});var n=()=>o(534177),r=()=>o(878523),i=()=>o(901389),a=()=>o(972435),s=()=>o(351360),l=()=>o(116008),c=()=>o(681634),d=()=>o(938045);const u=(0,o(959013).YK)({discardCommentConfirmationPrompt:{id:"newDiscussionMenu.discardCommentConfirmationDialog.prompt",defaultMessage:"Do you want to discard the comment?"},discardCommentButtonLabel:{id:"newDiscussionMenu.discardCommentConfirmationDialog.discardButton.label",defaultMessage:"Discard"},draftCommentConfirmationPromptTitle:{id:"newDiscussionMenu.draftCommentConfirmationDialogTitle.prompt",defaultMessage:"Finish your draft comment?"},draftCommentConfirmationStartingNewDescription:{id:"newDiscussionMenu.draftCommentConfirmationStartingNewDescription.prompt",defaultMessage:"You have a draft comment that will be lost if you start a new one"},draftCommentConfirmationNavigateAwayPromptDescription:{id:"newDiscussionMenu.draftCommentConfirmationNavigateAwayPromptDescription.prompt",defaultMessage:"You have a draft comment that will be lost if you leave the page"},returnToPageButtonLabel:{id:"newDiscussionMenu.discardCommentConfirmationDialog.returnToPage.label",defaultMessage:"Return to draft"}});function p(e){const{discussionInputStore:t,environment:o,discussionHelpers:n,reason:s}=e;l().A.isComposingNewDiscussion()?m({environment:o,reason:s??"navigating_away"}):n.hasCommentChanged(t)?(r().yO(o),i().ui({message:a().A.formatMessage(u.discardCommentConfirmationPrompt),showCancel:!0,handleCancel:()=>r().Ie(o),keepFocus:!0,items:[{label:a().A.formatMessage(u.discardCommentButtonLabel),color:"red",onAccept:()=>{r().QP(o),(0,c().c)(o)}}]})):(0,c().c)(o)}function m(e){const{environment:t}=e;if(!l().A.isDraftCommentOnValidSelection())return;const o=l().A.getDiscussionInputStore();r().yO(t),i().ui({message:a().A.formatMessage(u.draftCommentConfirmationPromptTitle),description:(()=>{switch(e.reason){case"starting_new":return a().A.formatMessage(u.draftCommentConfirmationStartingNewDescription);case"navigating_away":return a().A.formatMessage(u.draftCommentConfirmationNavigateAwayPromptDescription);default:(0,n().HB)(e.reason)}})(),keepFocus:!0,innerStyle:{textAlign:"center"},showCancel:!1,shouldRenderDraftCommentIcon:!0,items:[{label:a().A.formatMessage(u.returnToPageButtonLabel),buttonType:"solid",color:"blue",onAccept:()=>{(0,d().x)({currentBlockStore:s().default.state.mainEditorCurrentBlockStore,discussionInputStore:o,environment:t}),r().Ie(t)}},{label:a().A.formatMessage(u.discardCommentButtonLabel),color:"gray",buttonType:"plain",onAccept:()=>{r().QP(t),(0,c().c)(t)}}]})}},406018:(e,t,o)=>{o.d(t,{l:()=>n});const n={invalid_request:"invalid_request",unauthorized_client:"unauthorized_client",access_denied:"access_denied",unsupported_response_type:"unsupported_response_type",invalid_scope:"invalid_scope",server_error:"server_error",temporarily_unavailable:"temporarily_unavailable"}},406792:(e,t,o)=>{o.r(t),o.d(t,{NotionPerformanceClass_TEST_ONLY:()=>w,default:()=>S});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(803949);var n=()=>o(908006),r=()=>o(410690),i=()=>o(248566),a=()=>o(449412),s=()=>o(989423),l=()=>o(675742),c=()=>o(807054),d=()=>o(150749),u=()=>o(508496),p=()=>o(961581),m=()=>o(745875);const g=Object.entries({jsHeapSizeLimit:"browser.mem.heap_size_limit",totalJSHeapSize:"browser.mem.total_heap_size",usedJSHeapSize:"browser.mem.used_heap_size"});function f(e,t,n){const{computedStoreCount:r,computedStoreSubscriptionCount:i,computedStoreRecomputesTotal:a,computedStoreRerendersTotal:s}=(0,o(496506).g5)();v(e,t,{eventName:"computed_store_metrics",eventProperties:{computed_store_metrics:{"computed_store.instances.total":r,"computed_store.subscriptions.total":i,"computed_store.recomputes.total":a,"computed_store.rerenders.total":s},collected_during:t,...n}})}function v(e,t,o,n){var r;const i=n??Math.random(),a=u().default.getConfigKey("event_trail_events",o.eventName),l=a&&"sampleRatesByMetric"in a&&"object"==typeof a.sampleRatesByMetric&&(null===(r=a.sampleRatesByMetric)||void 0===r?void 0:r[t])||0;(0,m().ox)(l,(()=>i))&&(0,s().u4)({environment:e,event:o,opts:{sampling:{behavior:"custom",sampleRate:1}}})}function h(){const e=navigator.webdriver,t=window.notionIsPlaywrightTimeFrozen;return e&&t}const _=new Set(["navigation_page_render","navigation_database_render","typing_lag"]);class b{constructor(){this.startTimesByMetricName={},this.lastVisibilityChange=0,o(865241).A.addListener((()=>{this.lastVisibilityChange=performance.now()}))}DO_NOT_USE_markLegacy(e){return this.mark(e)}mark(e){var t;if(h())return{metricName:e,startTime:performance.now(),sentryTransaction:void 0};let o;if(Boolean(null===(t=performance)||void 0===t?void 0:t.mark)){const t=performance.mark(e);if(t)o=t.startTime;else{const t=performance.getEntriesByName(e);o=t[t.length-1].startTime}}else o=performance.now();const n="sentry"===d().getProfilingToolForSession()&&_.has(e)?a().nb({name:e}):void 0;return this.startTimesByMetricName[e]={startTime:o,sentryTransaction:n},{metricName:e,startTime:o,sentryTransaction:n}}DO_NOT_USE_markAllOfLegacy(e){this.markAllOf(e)}markAllOf(e){if(0===e.length)return;const t=performance.now();for(const o of e)this.startTimesByMetricName[o]={startTime:t,sentryTransaction:"sentry"===d().getProfilingToolForSession()&&_.has(o)?a().nb({name:o}):void 0}}DO_NOT_USE_measureLegacy(e,t){h()||this.measure(e,t)}measure(e,t){this._measure(e,t)}DO_NOT_USE_measureAfterNextFlushLegacy(e,t){this.measureAfterNextFlush(e,t)}measureAfterNextFlush(e,t){n().default.afterNextFlush((()=>{const o="getData"in t?t.getData():void 0;"getData"in t&&void 0===o||this._measure(e,{...t,data:o})}))}DO_NOT_USE_measureFromPageOriginLegacy(e,t){this.measureFromPageOrigin(e,t)}measureFromPageOrigin(e,t){if((0,i().A)())return;const o="object"==typeof e?e.metricName:e,n=y(t.environment);"number"==typeof n&&this.measure({metricName:o,startTime:n,..."object"==typeof e?{endTime:e.endTime}:{}},t)}measureFromAppStart(e,t){if((0,i().A)())return;const o="object"==typeof e?e.metricName:e,n="RouterStore"in(a=t.environment)&&(0,c().isPrewarmedTabInitialRender)(a)?p().A.state.prewarmedTabAppStartTimeOverride:r().getAppStartTime();var a;"number"==typeof n&&this.measure({metricName:o,startTime:n,..."object"==typeof e?{endTime:e.endTime}:{}},t)}DO_NOT_USE_measureFromPageOriginAfterNextFlushLegacy(e,t){this.measureFromPageOriginAfterNextFlush(e,t)}measureFromPageOriginAfterNextFlush(e,t){if((0,i().A)())return;const o="object"==typeof e?e.metricName:e;n().default.afterNextFlush((()=>{const n="getData"in t?t.getData():void 0;if("getData"in t&&void 0===n)return;const r=y(t.environment);"number"==typeof r&&this._measure({metricName:o,startTime:r,..."object"==typeof e?{endTime:e.endTime}:{}},{...t,data:n})}))}hasMetricBeenMarked(e){return void 0!==this.startTimesByMetricName[e]}_measure(e,t){const{shouldExcludeFromTimeline:n}=t;if("object"==typeof e){const{startTime:o,endTime:r,metricName:i,sentryTransaction:a}=e;this.startTimesByMetricName[i]=void 0;const s=this.getDuration({metricName:i,startTime:o,endTime:r,shouldExcludeFromTimeline:n});a&&a.finish(r),this.trackDuration({metricName:i,startTime:o,duration:s,options:t})}else if("string"==typeof e){const o=e,r=this.startTimesByMetricName[o];if(!r)return;const{startTime:i,sentryTransaction:a}=r;this.clearStartTimesByMetricName(o);const s=this.getDuration({metricName:o,startTime:i,shouldExcludeFromTimeline:n});a&&a.finish(),this.trackDuration({metricName:o,startTime:i,duration:s,options:t})}else(0,o(534177).HB)(e)}clearStartTimesByMetricName(e){this.startTimesByMetricName[e]&&(this.startTimesByMetricName[e]=void 0)}getDuration(e){const{metricName:t,startTime:o,shouldExcludeFromTimeline:n}=e,r="number"==typeof e.endTime?e.endTime:performance.now();if(!n)try{return performance.measure(t,{start:o,end:r}).duration}catch(i){}return r-o}async trackDuration(e){const{metricName:t,duration:o,startTime:n,options:r}=e,{environment:i,preboot:a,sendToStatsig:c}=r,d="data"in r?r.data:void 0;if(document.hidden)return;if("number"==typeof this.lastVisibilityChange&&n<this.lastVisibilityChange)return;const p=void 0!==r.sampleDecision?r.sampleDecision:await s().LM({eventName:t,eventProperties:d,sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:r.shouldSendIfStatsigNotInitialized?"track":"drop"}});if(p){if(i.device.isElectron&&l().H&&l().H.windowIsVisible){if(!(await l().H.windowIsVisible()))return}if(i.device.isElectron&&l().H&&l().H.isActiveTab&&l().H.isActiveTab.get){if(!(await l().H.isActiveTab.get()))return}s().u4({environment:i,event:{eventName:t,eventProperties:{time:o,...d,sample_decision:p,is_document_focused:document.hasFocus()}},opts:{preboot:a,sampling:{behavior:"decided",sampleDecision:p}}}),c&&u().default.logEvent(t,o),function(e,t,o){if(!("memory"in(window.performance||{})))return;const n=Math.random();g.forEach((r=>{let[i,a]=r;if(!(i in window.performance.memory))return;const s={eventName:a,eventProperties:{bytes:window.performance.memory[i],collected_during:t,...o}};v(e,t,s,n)}))}(i,t,d),f(i,t,d)}}}function y(e){return"RouterStore"in e&&(0,c().isPrewarmedTabInitialRender)(e)?p().A.state.prewarmedTabAppStartTimeOverride:r().getPageOriginTime()}const S=new b;class w extends b{}},406859:(e,t,o)=>{o.d(t,{M:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{blockStoreMode:{},siteTemplateStatus:{}}}getStateForBlock(e){if(e in this.state.blockStoreMode)return this.state.blockStoreMode[e]}setStateForBlock(e,t){this.update((o=>({...o,blockStoreMode:{...o.blockStoreMode,[e]:t}})))}setSiteTemplateStatus(e,t){this.update((o=>({...o,siteTemplateStatus:{[e]:t}})))}isTemplateListing(e){var t;return(null===(t=this.state.siteTemplateStatus[e])||void 0===t?void 0:t.templateListingExists)??!1}clearStateForBlock(e){e in this.state.blockStoreMode&&(delete this.state.blockStoreMode[e],this.emit())}}const r=new n;(0,o(604341).exposeDebugValue)("MarketplaceTemplateStore",r)},406999:(e,t,o)=>{o.d(t,{Gz:()=>r,eL:()=>i,ju:()=>n,nV:()=>s,qs:()=>a});o(898992),o(823215);function n(e){return"existingUser"===e.type}function r(e){return"newUser"===e.type}function i(e){return"newUser"===e.type||"existingUser"===e.type}function a(e){const t=e.inviteTargets[0];return!(!t||"bot"!==t.type)}function s(e){return e.inviteTargets.every((e=>"existingUser"===e.type||"newUser"===e.type||"group"===e.type))}},407031:(e,t,o)=>{o.d(t,{S:()=>r});var n=()=>o(129522);function r(e){const{collectionContextStore:t}=e,o=t.collectionViewBlockStore();if(!o)return;const r=n().K.findCollectionViewBlockFromStore(o);r&&"resetLeftScrollAfterFlush"in r&&r.resetLeftScrollAfterFlush&&r.resetLeftScrollAfterFlush()}},407054:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isActive:!1}}}const r=new n},407730:(e,t,o)=>{function n(e,t){if(t(e))return e;let o,n=0;do{n++,o=`${e} ${n}`}while(!t(o));return o}o.d(t,{A:()=>n})},409902:(e,t,o)=>{o.d(t,{h:()=>a});o(898992),o(354520);var n=()=>o(246826),r=()=>o(317909),i=()=>o(414360);function a(e){var t;const{collectionViewBlockStore:o,collectionStore:a,transaction:s}=e;if(!o.isDefined()||!a.isDefined())return;const l=o.getCollectionViewStores().filter((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===a.id}));for(const n of l)(0,i().T)({collectionViewBlockStore:o,collectionViewStore:n,transaction:s});(null===(t=o.getFormat().collection_pointer)||void 0===t?void 0:t.id)===a.id&&(n().zv({store:o,data:{collection_id:null},transaction:s}),n().zv({store:o.getFormatStore(),data:{collection_pointer:null},transaction:s})),r().applyOperation({store:o,operation:{pointer:o.pointer,command:"keyedObjectListRemove",path:["format","collection_pointers"],args:{remove:a.pointer}},transaction:s});a.getAlive()&&a.getParentId()===o.id&&n().zv({store:a,data:{alive:!1},transaction:s})}},410282:(e,t,o)=>{o.d(t,{j:()=>i});var n=()=>o(100622),r=()=>o(630116);function i(e){for(;null!==(t=e)&&void 0!==t&&t.isTable("block");){var t;const o=e.getRecordStoreUIParent(),i=o?r().Bv.createChildStore(o,e.pointer):void 0,a=null==i?void 0:i.getFormat().block_color;if(a&&(0,n().Cg)(a))return a;e=e.getRecordStoreUIAncestor(1)}return"default_background"}},411387:(e,t,o)=>{o.d(t,{jx:()=>p,_d:()=>u,e2:()=>g,RN:()=>h,iI:()=>d,t:()=>i(),N9:()=>f,Vi:()=>v});o(898992),o(354520);var n=()=>o(496603),r=()=>o(534177),i=()=>o(638681),a=()=>o(762433);const s=["student","personal","plus","business","enterprise"];function l(e){return(0,r().Xk)(s,e)}var c=()=>o(979340);const d=["plus","business","enterprise","ai","sites_custom_hostnames"];function u(e,t,o,n){return g(p(e,t,o,n))}function p(e,t,o,n){const{name:i,scope:s,actor:l}=n,c={...n,billingData:s.billingData},d=s.premiumFeatureOverrides,u=i in d?function(e,t,o){const n={type:"contact_account_manager"},i=e[t.name].type;if("check"===i){const e={type:"none"};return!0===o?{type:"available",limit:e}:{type:"unavailable",upsell:n,limit:e}}if("per_use"===i){const e=t.amount,r={type:"per_use",amount:o};return"unlimited"===o||o>e?{type:"available",limit:r}:{type:"unavailable",upsell:n,limit:r}}if("cumulative"===i){const e=t.amount,r=t.data.current,i={type:"cumulative",current:r,total:o};return"unlimited"===o||o>=r+e?{type:"available",limit:i}:{type:"unavailable",upsell:n,limit:i}}(0,r().HB)(i)}(t,n,d[i]):o[i](c);let p;if("available"===u.type){const e=u.upsell?m(s.billingData,u.upsell,n.supportedProducts):void 0;p={...u,upsell:e}}else{const e=m(s.billingData,u.upsell,n.supportedProducts);p={...u,upsell:e}}const g=(0,a().N8)(s.billingData.subscription);return Math.random()<.001&&e.logFunction({level:"info",from:"premiumFeatureFramework",type:"getPremiumFeatureAvailability",data:{featureName:i,featureScope:s,featureActor:l,rawFeatureAvailability:u,isSalesAssisted:g,featureBillingData:s.billingData}}),e.trackFunction({feature_name:i,is_feature_available:"available"===p.type}),p}function m(e,t,o){if((0,a().N8)(e.subscription))return{type:"contact_account_manager"};if("product"!==(null==t?void 0:t.type)||o.includes(t.product)||!l(t.product))return t;const r=t.product,i=o.filter((e=>l(e))).filter((e=>"student"!==e)).filter((e=>c().o3[e]>=c().o3[r])),s=(0,n().wq)(i,(e=>c().o3[e]));return s?{...t,product:s}:{type:"contact_sales"}}function g(e){return"available"===(null==e?void 0:e.type)}function f(e,t){let{available:o,unavailable:n}=t;return"available"===e.type?o():"unavailable"===e.type?n(e):(0,r().HB)(e)}function v(e,t){if(void 0!==e)return f(e,{available:()=>{},unavailable:t})}function h(e){return i().object({required:e,optional:{}})}},411671:(e,t,o)=>{o.d(t,{A:()=>s,s:()=>i});var n=()=>o(68263),r=()=>o(792415);const i={disabled:{hasPublicPermission:!1},view:{hasPublicPermission:!0,permission:"view"},comment:{hasPublicPermission:!0,permission:"comment"},edit:{hasPublicPermission:!0,permission:"edit"}};Object.freeze(i),Object.freeze(i.disabled),Object.freeze(i.view),Object.freeze(i.comment),Object.freeze(i.edit);class a extends(()=>o(757695))().default{getInitialState(){return{editing:!1,commenting:!1}}getMode(e,t){const o=this.getModeType(e,t)||"disabled";return i[o]}getModeType(e,t){if(!t.isDefaultRecordCache()||!(0,o(731320).qb)(e,t))return;const i=t.getRole(),a=!i||(0,n().p2)(i),s=!i||(0,n().ok)(i),l=e.currentUser.isLoggedIn();return a&&l&&(this.state.editing||null!==(c=r().A.state.publicPageData)&&void 0!==c&&c.isPublicShareLink||null!==(d=r().A.state.publicPageData)&&void 0!==d&&d.isInNewReceiverExperimentVariant)?"edit":s&&l?"comment":"view";var c,d}}const s=new a},413267:(e,t,o)=>{o.d(t,{b:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},413468:(e,t,o)=>{o.d(t,{k:()=>r});var n=()=>o(496603);function r(e,t){return t.getAlive()!==e.getAlive()||!n().n4(t.getText(),e.getText())||!n().n4(t.getContent(),e.getContent())}},413962:(e,t,o)=>{o.d(t,{HG:()=>q,Iw:()=>Z,RR:()=>ne,Rq:()=>Q,X2:()=>K,c3:()=>X,d9:()=>G,kE:()=>se,nZ:()=>ae,rY:()=>ie,tM:()=>te,tW:()=>$});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(430670),o(803949),o(581454);var n=()=>o(319954),r=()=>o(700500),i=()=>o(416845),a=()=>o(206267),s=()=>o(179034),l=()=>o(197959),c=()=>o(161479),d=()=>o(798880),u=()=>o(397277),p=()=>o(919709),m=()=>o(449412),g=()=>o(220719),f=()=>o(496603),v=()=>o(534177),h=()=>o(878523),_=()=>o(571062),b=()=>o(112873),y=()=>o(722101),S=()=>o(246826),w=()=>o(797265),k=()=>o(606952),I=()=>o(315097),A=()=>o(317909),x=()=>o(423804),C=()=>o(845489),T=()=>o(594794),M=()=>o(962845),P=()=>o(108944),B=()=>o(20313),R=()=>o(969197),E=()=>o(792002),D=()=>o(351360),N=()=>o(77246),L=()=>o(630116),F=()=>o(835066),U=()=>o(543225),O=()=>o(59320),V=()=>o(588836),j=()=>o(249349),z=()=>o(583824);function q(e){const{action:t,environment:o,commentStore:n,discussionStore:r,transaction:s,discussionLocation:l,currentPageStore:c}=e;if(!c)throw new(i().yI)("Expected current page store to be defined");const u=r.getSuggestModifiedBlockStores()??[],{currentUserStore:m}=D().default.state;if(!m)throw new(i().yI)("Expected current user store to be defined");const v=u.filter((e=>{const t=P().fA(e);return c.id===(null==t?void 0:t.id)}));if(v.length!==u.length)return void function(e){const{action:t,blockStoresInPage:o,discussionStore:n,transaction:r,environment:s,discussionLocation:l,currentPageStore:c}=e,d=n.getParentStore();if(!d)throw new(i().yI)("Suggestion should have parent block store");const u=n.getRawContextStore(),m=u.getValue(),v=o.map((e=>e.id));S().KY({store:u,value:{...m,modifiedBlockIds:f().FF(n.getSuggestModifiedBlockIds(),...v),resolvedBlockIds:v},transaction:r});const{discussionStore:h,commentStore:_}=Y({environment:s,transaction:r,blockStore:d,modifiedBlockIds:v,splitFrom:n.id,skipAnnotatingTransaction:!0});(function(e){const{environment:t,blockStores:o,oldDiscussionStore:n,newDiscussionStore:r,transaction:i}=e;o.forEach((o=>{(0,V().u)({transaction:i,blockStore:o,discussionIds:[n.id]}),(0,U().B)({transaction:i,blockStore:o,discussionId:r.id});const s=ee(o,n.id);s&&(oe({environment:t,transaction:i,blockStore:o,blockSuggestionId:s.id,removeDiscussionId:{discussionId:s.discussionId}}),X({environment:t,transaction:i,discussionStore:n}),te(i,o,{id:a().JW(),type:s.type,discussionId:r.id})),function(e){const{blockStore:t,oldDiscussionStore:o,newDiscussionStore:n,transaction:r,environment:i}=e,a=(0,g().o9)(t.getTitleStore()),s=t.getTitleValue();for(let l=0;l<s.length;l++){const e=p().uPN(s[l]);for(const t of e)if(p().I1e(t)&&p().vu(t)===o.id){const e=(0,g().o9)(E().Bv(s,l));k().gw({environment:i,store:a,selection:e,annotationKey:p().JIi(t),transaction:r,updateSelection:!1});const o=p()._kG(t,n.id);k().Mw({environment:i,store:a,selection:e,annotation:o,transaction:r})}}}({...e,blockStore:o})}))})({blockStores:o,oldDiscussionStore:n,newDiscussionStore:h,transaction:r,environment:s}),q({action:t,environment:s,commentStore:_,discussionStore:h,transaction:r,discussionLocation:l,currentPageStore:c})}({action:t,discussionLocation:l,blockStoresInPage:v,discussionStore:r,transaction:s,environment:o,currentPageStore:c});(0,j().j)({environment:o,commentStore:n,discussionStore:r,transaction:s,discussionLocation:l,resolutionType:t}),function(e){const{blockStores:t,discussionStore:o,environment:n,transaction:r,action:i}=e;for(const a of t){const e=ee(a,o.id);if(e&&(oe({environment:n,transaction:r,blockStore:a,blockSuggestionId:e.id}),("reject"===i&&"insert"===e.type||"accept"===i&&"remove"===e.type)&&w().ZL({environment:n,blocks:[a],transaction:r}),"reject"===i&&"add_line_break"===e.type||"accept"===i&&"remove_line_break"===e.type)){const e=(0,g().o9)(a.getTitleStore()),t=(0,C().b)(e),o=t?(0,R().T)(t):void 0;if(t&&o){I().oZ({environment:n,transaction:r,store:t,block:o,targetStore:e,targetBlock:a});const i=o.getContentStores(),s=(0,g().o9)((0,R().T)(a));for(const e of i)y().nc({parentStore:s.getContentStore(),beforeStore:o,insertStore:e,transaction:r}),y().TF({parentStore:o.getContentStore(),childToRemoveStore:e,transaction:r});w().ZL({environment:n,transaction:r,blocks:[o]})}}}}({environment:o,transaction:s,blockStores:u,discussionStore:r,action:t});for(const a of u){if(a.isType("table_row")){var h;const e=(null===(h=a.getParentBlockStore())||void 0===h?void 0:h.getFormat().table_block_column_order)??[];for(const n of e){H({environment:o,transaction:s,discussionStore:r,titleStore:a.getPropertyStore(n),action:t})}}else{const e=a.getTitleStore(),n=a.getCaptionStore();if(!e&&!n)throw new(i().yI)("Could not get title store or caption store for block");e&&H({environment:o,transaction:s,discussionStore:r,titleStore:e,action:t}),n&&H({environment:o,transaction:s,discussionStore:r,titleStore:n,action:t})}(0,U().B)({transaction:s,blockStore:a,discussionId:r.id})}const _=(0,g().o9)(r.getSuggestionRawContextStore());S().zv({store:_,data:{rejected:"reject"===t,resolvedBy:{id:m.id,table:d().oo}},transaction:s})}function H(e){const{environment:t,transaction:o,discussionStore:n,titleStore:r,action:a}=e,s=r.getValue();if(s)for(let l=s.length-1;l>=0;l--){const e=p().uPN(s[l]);for(const c of e)if(p().I1e(c)&&p().vu(c)===n.id){const e=E().Bv(s,l);if(!e)throw new(i().yI)("Could not generate selection for token");W({annotation:c,action:a,selection:e,environment:t,transaction:o,titleStore:r})}}}function W(e){const{annotation:t,action:o,selection:n,environment:r,transaction:i,titleStore:a}=e,s=p().JIi(t);if("accept"===o)if(p().O3D(t))k().gw({environment:r,store:a,selection:n,annotationKey:s,transaction:i,updateSelection:!1});else if(p().ZRT(t))k().jQ({environment:r,store:a,selection:n,transaction:i});else if(p().MXn(t)||p().zIw(t)){k().gw({environment:r,store:a,selection:n,annotationKey:s,transaction:i,updateSelection:!1});const e=p().Dew(t);if(p().MXn(t))k().Mw({environment:r,store:a,selection:n,annotation:e,transaction:i});else{const t=p().JIi(e);k().gw({environment:r,store:a,selection:n,annotationKey:t,transaction:i,updateSelection:!1})}}else(0,v().HB)(t);else"reject"===o?p().ZRT(t)||p().MXn(t)||p().zIw(t)?k().gw({environment:r,store:a,selection:n,annotationKey:s,transaction:i,updateSelection:!1}):p().O3D(t)?k().jQ({environment:r,store:a,selection:n,transaction:i}):(0,v().HB)(t):(0,v().HB)(o)}function K(e){const{environment:t,transaction:o,blockStore:n,type:r,removeDiscussionId:i}=e;let a;"add_line_break"===r?a=n.getAddLineBreakSuggestion():"remove_line_break"===r?a=n.getRemoveLineBreakSuggestion():"insert"===r?a=n.getInsertSuggestion():"remove"===r?a=n.getRemoveSuggestion():(0,v().HB)(r),a&&oe({environment:t,transaction:o,blockStore:n,blockSuggestionId:a.id,removeDiscussionId:i?{discussionId:a.discussionId}:void 0})}function G(e){const{environment:t,transaction:o,blockStores:n,formulasModule:r}=e;if(0===n.length)return;const s=(0,z().i)({environment:t,blockStore:n[0],commentTextValue:[[""]],transaction:o,files:[],type:"suggestion",formulasModule:r});if(!s)throw new(i().yI)("Discussion must be created when creating a block with suggestion");return n.forEach((e=>{te(o,e,{id:a().JW(),type:"remove",discussionId:s.id}),X({environment:t,transaction:o,discussionStore:s,addModifiedBlockIdsAfter:[e.id]})})),s}function $(e){const{environment:t,transaction:o,blockStore:n,type:r,createDiscussionStore:s}=e;if(n.getAddLineBreakSuggestion()||n.getRemoveLineBreakSuggestion())return;const l=s();if(te(o,n,{id:a().JW(),type:r,discussionId:l.id}),!l)throw new(i().yI)("Discussion must be created when creating a block with suggestion");return X({environment:t,transaction:o,discussionStore:l,addModifiedBlockIdsAfter:[n.id]}),l}function Y(e){var t;const{environment:o,transaction:n,blockStore:r,modifiedBlockIds:a,splitFrom:s,skipAnnotatingTransaction:c}=e;if(!c&&n.getSuggestionDiscussionStore())throw new(i().yI)("Calling createSuggestionDiscussion when already have a suggestion discussion store in the transaction.");const d={createDiscussionArgs:{type:"suggestion",modifiedBlockIds:a,splitFrom:s},blockStore:r,environment:o,transaction:n,commentTextValue:[[""]],files:[],discussionId:(0,T().Z1)({environment:o,table:l().$Y,spaceId:r.pointer.spaceId})},u=(0,O().G)(d);return c||n.annotationWithSuggestionDiscussionStore(u.discussionStore),h().bJ(o,{comment_id:u.commentStore.id,discussion_id:u.discussionStore.id,discussion_type:"suggestion",parent_block_id:u.discussionStore.getParentId(),parent_collection_id:null===(t=u.discussionStore.getParentStore())||void 0===t?void 0:t.getParentCollectionIdUpToTwoLevels()}),u}function Q(e){return(0,R().T)(e.start.store)}function Z(e,t){const o=(0,R().T)(e.start.store);if(o)return L().sk.createChildStore(o,{table:l().$Y,id:t,spaceId:(0,c().e)(o.pointer.spaceId)})}function X(e){var t;const{environment:o,transaction:n,discussionStore:r,addModifiedBlockIdsBefore:a=[],addModifiedBlockIdsAfter:s=[],removeModifiedBlockIds:l=[],addModifiedBlockIdsAfterAnchor:c}=e;if("suggestion"!==r.getType())throw new(i().yI)("This fn only used for suggestion");const d=r.getContext(),p=(0,g().o9)(r.getSuggestionRawContextStore());if(a.length>0||s.length>0||l.length>0){const e=r.getSuggestModifiedBlockIds()??[],t=f().FF(a,...e),o=f().FF(s,...e),{first:i,second:d}=(0,u().wF)(e,c),m=[...t,...i,...o,...d].filter((e=>!l.includes(e)));S().zv({store:p,data:{modifiedBlockIds:m},transaction:n})}let m;const v=r.getSuggestModifiedBlockStores()??[];if(0===v.length)m=void 0;else{const e=v[0],t=P().fA(e);m=t?N().Uv.getSessionId(t):void 0}m&&p.getKeyStore("latestSessionId").getValue()!==m&&S().zv({store:p,data:{latestSessionId:m},transaction:n});const h=r.getSuggestionSnapshotStore();if(!h)throw new(i().yI)("Suggestion discussion snapshot store required to update context");const b=null===(t=r.getModel())||void 0===t?void 0:t.getLiveContext(r.getRecordModel);b&&S().zv({store:h,data:{data:b},transaction:n}),d&&d.length>0?_().Vq({environment:o,suggesting_session_id:m,discussion_id:r.id,suggestion_types:J(r),target_block_id:r.getParentId()}):_().A2({environment:o,suggesting_session_id:m,discussion_id:r.id,suggestion_types:J(r),target_block_id:r.getParentId()})}function J(e){const t=e.getContext();if(!t)return[];const o=e.id,n=new Set;for(const r of t)if("textValue"===r.type){const e=r.value.flatMap((e=>p().uPN(e))).filter((e=>p().I1e(e)&&p().vu(e)===o));let t=!1,i=!1;for(const o of e)o[0]===p().Ifu.SuggestionInsertText?t=!0:o[0]===p().Ifu.SuggestionRemoveText?i=!0:o[0]===p().Ifu.SuggestionAnnotate?n.add("add_annotation"):o[0]===p().Ifu.SuggestionUnannotate&&n.add("remove_annotation");t&&i?n.add("replace_text"):(t&&n.add("add_text"),i&&n.add("remove_text"))}else if("blockSuggestion"===r.type){const e=r.value.type;switch(e){case"insert":n.add("add_block");break;case"remove":n.add("remove_block");break;case"remove_line_break":n.add("remove_line_break");break;case"add_line_break":n.add("add_line_break");break;default:(0,v().HB)(e)}}else(0,v().HB)(r);return Array.from(n)}function ee(e,t){const o=e.getSuggestionsStore().getValue();return null==o?void 0:o.find((e=>e.discussionId===t))}function te(e,t,o){if("page"===t.getType()){const o=new(i().yI)("Page-level suggestion added.");m().O8(o,{from:"suggestionActions",type:"pageLevelSuggestionAdded",data:{miscDataToConvertToString:{blockId:t.id,blockType:t.getType(),userAction:e.getUserActionForAnalyticsPurposesOnly(),oldBlock:t.getCreatedTime()<Date.now()-5e3}}})}const n=t.getFormatStore().getKeyStore("suggestions");A().applyOperation({store:t,operation:{pointer:n.pointer,command:"keyedObjectListAfter",path:n.path,args:{value:o}},transaction:e}),(0,U().B)({transaction:e,blockStore:t,discussionId:o.discussionId})}function oe(e){const{transaction:t,blockStore:o,blockSuggestionId:n,removeDiscussionId:r}=e,i=o.getFormatStore().getKeyStore("suggestions");A().applyOperation({store:o,operation:{pointer:i.pointer,command:"keyedObjectListRemove",path:i.path,args:{remove:{id:n}}},transaction:t}),r&&(0,V().u)({transaction:t,blockStore:o,discussionIds:[r.discussionId]})}function ne(e,t,o,n,r){const{discussionStore:a,blockStore:s}=function(e,t,o,n,r){let a;if(o instanceof L().Bv)a=o;else{const e=o.start.store.getAncestorRecordStoreAtRootPath();if(!(e&&e instanceof L().Bv))throw new(i().yI)("Cannot create a suggestion on a RecordStore that's not a block.");a=e}const s=t.getSuggestionDiscussionStore();if(s)return{discussionStore:s,blockStore:a};const d=a.getInsertSuggestion();if(d){const o=L().sk.createChildStore(a,{table:l().$Y,id:d.discussionId,spaceId:(0,c().e)(a.pointer.spaceId)});if((0,x().Ih)(o,e.currentUser))return t.annotationWithSuggestionDiscussionStore(o),{discussionStore:o,blockStore:a}}if(n)for(const i of n.annotationTypes){const e=(0,x().x5)(a,n.annotations,n.currentUser,i);if(e)return{discussionStore:e.discussionStore,blockStore:a}}if(r)for(const i of r.suggestionTypes){const e=r.blockStore.getAllBlockSuggestions().find((e=>{if(e.type===i){const t=L().sk.createChildStore(r.blockStore,{table:l().$Y,id:e.discussionId,spaceId:(0,c().e)(r.blockStore.pointer.spaceId)});return(0,x().Ih)(t,r.currentUser)}}));if(e)return{discussionStore:L().sk.createChildStore(r.blockStore,{table:l().$Y,id:e.discussionId,spaceId:(0,c().e)(r.blockStore.pointer.spaceId)}),blockStore:a}}const u=Y({transaction:t,blockStore:a,modifiedBlockIds:[a.id],environment:e});return{discussionStore:u.discussionStore,blockStore:a}}(e,t,o,n,r);return F().$N(e,s)&&b().B4({environment:e,blockStore:s,shouldFocusDiscussion:!0,analyticsFrom:"new_suggestion",discussionIds:[a.id],recursivelyLoadAllDiscussions:!1}),a}function re(e){const{environment:t,store:o,discussionStore:n,selection:r,transaction:i}=e,a=p().LPC({textValue:o.getValue(),startIndex:r.startIndex,endIndex:r.endIndex,groupingKey:p().Ifu.SuggestionInsertText}).map((e=>{let{annotation:n,startIndex:i,endIndex:a}=e;const s=p().vu(n),l=(0,x().o9)({store:o,discussionId:s});if(l&&(0,x().Ih)(l,t.currentUser))return{startIndex:Math.max(i,r.startIndex),endIndex:Math.min(a,r.endIndex),annotation:n}}));k().Mw({environment:t,store:o,annotation:[p().Ifu.SuggestionRemoveText,n.id],selection:r,transaction:i}),a.reverse().forEach((e=>{if(e){k().jQ({environment:t,store:o,selection:{startIndex:e.startIndex,endIndex:e.endIndex},transaction:i});const n=p().vu(e.annotation),r=(0,x().o9)({store:o,discussionId:n});r&&X({environment:t,transaction:i,discussionStore:r})}}))}function ie(e){const{environment:t,multiSelection:o,transaction:n,discussionStore:i}=e,s=(0,M().$W)(o);if(0===s.length)return;if(1===s.length){const{store:e,selection:o}=s[0];return re({environment:t,store:e,selection:o,transaction:n,discussionStore:i}),void X({environment:t,transaction:n,discussionStore:i,addModifiedBlockIdsAfter:[e.id]})}const{start:l,end:c}=o;re({environment:t,store:l.store,selection:{startIndex:l.index,endIndex:1/0},transaction:n,discussionStore:i}),X({environment:t,transaction:n,discussionStore:i,addModifiedBlockIdsAfter:[l.store.id]});const d=[o.start.store.id],u=(0,M().Tp)({multiSelection:o,includeNonSelectable:!0});if(!u)return;const{treeRange:p}=u;for(const m of p.iterateDeletion())"delete"===m.operation&&(0,B().qq)({treeOperation:m,deleteFrom:"record-store-parent"}).forEach((e=>{let{childToRemove:t}=e;t.id===o.start.store.id||t.id===o.end.store.id||(0,r().$I)((0,g().o9)(t.getType()))||(d.push(t.id),te(n,t,{id:a().JW(),type:"remove",discussionId:i.id}))}));X({environment:t,transaction:n,discussionStore:i,addModifiedBlockIdsAfter:d}),re({environment:t,store:c.store,selection:{startIndex:0,endIndex:o.end.index},transaction:n,discussionStore:i}),X({environment:t,transaction:n,discussionStore:i,addModifiedBlockIdsAfter:[c.store.id]})}function ae(e){const{environment:t,sourceBlockStore:o,targetBlockStore:r,transaction:i,selectionIsExpanded:d,editorMode:u}=e,m=o.getAddLineBreakSuggestion()??o.getRemoveLineBreakSuggestion();if(m){const e=L().sk.createChildStore(o,{id:m.discussionId,table:l().$Y,spaceId:(0,c().e)(o.pointer.spaceId)});S().zv({store:e,data:{parent_id:r.id,parent_table:s().ev},transaction:i}),te(i,r,m),X({environment:t,transaction:i,discussionStore:e,addModifiedBlockIdsBefore:[r.id],removeModifiedBlockIds:[o.id],addModifiedBlockIdsAfterAnchor:o.id}),oe({environment:t,transaction:i,blockStore:o,blockSuggestionId:m.id,removeDiscussionId:{discussionId:m.discussionId}})}if("suggest"===u){var g,f;const e=null===(g=(0,x().jS)({blockStore:o,currentUser:t.currentUser,type:p().Ifu.SuggestionInsertText}))||void 0===g?void 0:g.discussionStore;if(null!==(f=r.getNavigableBlockStore())&&void 0!==f&&f.isCommentOnly()){const e=i.getSuggestionDiscussionStore()??ne(t,i,o,{annotations:n().r.fromArray(p().mIW(o.getTitleValue())),annotationTypes:[p().Ifu.SuggestionInsertText],currentUser:t.currentUser});te(i,r,{type:"insert",id:a().JW(),discussionId:e.id}),X({environment:t,transaction:i,discussionStore:e,addModifiedBlockIdsAfter:[r.id],addModifiedBlockIdsAfterAnchor:o.id})}if(!e){const e=i.getSuggestionDiscussionStore()??Y({transaction:i,blockStore:o,modifiedBlockIds:[o.id],environment:t}).discussionStore;te(i,o,{id:a().JW(),type:"add_line_break",discussionId:e.id});X({environment:t,transaction:i,discussionStore:e,addModifiedBlockIdsAfter:d?[o.id,r.id]:[o.id],addModifiedBlockIdsAfterAnchor:o.id})}if(0===r.getTitleValue().length||e){const n=i.getSuggestionDiscussionStore()??e??Y({transaction:i,blockStore:r,modifiedBlockIds:[r.id],environment:t}).discussionStore;te(i,r,{id:a().JW(),type:"insert",discussionId:n.id}),X({environment:t,transaction:i,discussionStore:n,addModifiedBlockIdsAfter:[r.id],addModifiedBlockIdsAfterAnchor:o.id})}}}function se(e){const{environment:t,transaction:o,currentPageStore:n,blockStore:r}=e,i=f().sb([...r.getAllBlockSuggestions().map((e=>e.discussionId)),...r.getInlineSuggestionDiscussionIds()]);for(const a of i){const e=L().cc.createChildStore(r,{table:l().$Y,id:a,spaceId:r.getSpaceId()});if(!e.isDefined())continue;const i=e.getCommentStores()[0];i&&q({environment:t,transaction:o,action:"reject",discussionStore:e,commentStore:i,discussionLocation:"ai_reject_all_suggestions",currentPageStore:n})}}},414360:(e,t,o)=>{o.d(t,{T:()=>s});var n=()=>o(869558),r=()=>o(896628),i=()=>o(722101),a=()=>o(630116);function s(e){const{collectionViewBlockStore:t,collectionViewStore:o,transaction:s}=e,l=a().pS.createChildStore(t,{table:n().Gy,id:o.id,spaceId:t.getSpaceId()}),c=o.getFormat().app_config_uri;if(c){var d;const e=null===(d=t.getFormat())||void 0===d?void 0:d.app_uri_map;e&&delete e[c],r().zA({stores:[t],update:{app_uri_map:e},transaction:s})}i().TF({parentStore:t.getCollectionViewsStore(),childToRemoveStore:l,transaction:s})}},415559:(e,t,o)=>{o.d(t,{Dx:()=>_,QZ:()=>y,W3:()=>w,oA:()=>k,pQ:()=>S,ub:()=>b});var n=()=>o(386164),r=()=>o(861017),i=()=>o(161479),a=()=>o(939768),s=()=>o(559926),l=()=>o(901389),c=()=>o(705540),d=()=>o(780054),u=()=>o(725951),p=()=>o(931432),m=()=>o(589994),g=()=>o(449506),f=()=>o(496414),v=()=>o(957416);const h=(0,o(959013).YK)({authenticatingWithGoogle:{id:"googleDriveActions.authenticatingWithGoogle.loadingMessage",defaultMessage:"Authenticating with Google…"},googleLoginTitle:{defaultMessage:"Google login",id:"googleDriveActions.loginWithGoogleModal.title"}});async function _(e){const{environment:t,store:o,fileId:r,token:a}=e;await m().transactionQueue.awaitRecordTransaction(o.pointer);const c=await g().callApi({eventName:"initializeGoogleDriveBlock",environment:t,data:{block:{id:o.id,spaceId:(0,i().e)(o.pointer.spaceId)},fileId:r,token:a},headers:(0,n().WS)({spaceId:(0,i().e)(o.pointer.spaceId)})});if("failed"!==c.type)return c.data.file&&s().sn(t,{file_type:c.data.file.mimeType??void 0}),c.data;l().Qg(c)}function b(e,t){g().callApi({eventName:"refreshGoogleDriveBlock",environment:e,data:{block:t}})}async function y(e){const t=await g().callApi({eventName:"getGoogleDriveAccounts",environment:e,data:{}});return"success"===t.type&&t.data.accounts?t.data:{accounts:[]}}function S(e,t){const{onSuccess:o,onFailure:n}=t;p().A.setState({open:!0,onConfirm:async()=>{const t=await w(e);t&&t.token?o(t.token):n&&n()},onDecline:n})}async function w(e){const t=(0,u().LX)(e);let o=(0,r()._)(d().A.domainBaseUrl,{authType:t});if(o=t.redirectToAuth?o:await(0,u().YN)(e,o),e.device.isElectron)return void c().openExternalUrl(o);const n=await v().P(e,{width:610,height:700,url:o,titleMessage:h.googleLoginTitle});if(!n)return;const i=a().qg(n);return await k(e,i.query.code)}async function k(e,t){if(!t)return;f().m({message:h.authenticatingWithGoogle});const o=await g().callApi({eventName:"authWithGoogleForDrive",environment:e,data:{code:t}});if(f().V(),"failed"!==o.type)return s().mu(e,{integration_name:"google"}),o.data;{const e=o.error;console.error(e),l().Qg(o)}}},415566:(e,t,o)=>{o.d(t,{q:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M5.93 7.125a.5.5 0 0 0-.5.5v4.75a.5.5 0 0 0 .5.5h8.145a.5.5 0 0 0 .5-.5v-4.75a.5.5 0 0 0-.5-.5z"}),(0,n.jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v7.5c0 1.174.951 2.125 2.125 2.125h11a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 15.5 4.125zM3.625 6.25c0-.483.392-.875.875-.875h11c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-11a.875.875 0 0 1-.875-.875z"})]})},i=(0,o(340498).wt)("peekCenter",r)},415651:(e,t,o)=>{o.d(t,{GB:()=>F,MS:()=>O,Pt:()=>D,b:()=>L,eW:()=>N,up:()=>V,v7:()=>U});o(944114),o(898992),o(672577),o(803949),o(581454),o(908872);var n=()=>o(700500),r=()=>o(634201),i=()=>o(416504),a=()=>o(206267),s=()=>o(161479),l=()=>o(100622),c=()=>o(496603),d=()=>o(498212),u=()=>o(534177),p=()=>o(466614),m=()=>o(519839),g=()=>o(413962),f=()=>o(780054),v=()=>o(71584),h=()=>o(989423),_=()=>o(38337),b=()=>o(108944),y=()=>o(53664),S=()=>o(585533),w=()=>o(182106),k=()=>o(695625),I=()=>o(861841),A=()=>o(77246),x=()=>o(871399),C=()=>o(502438),T=()=>o(134060),M=()=>o(901389),P=()=>o(797265),B=()=>o(778417),R=()=>o(482287),E=()=>o(725614);function D(e,t){I().Ay.state.isDragging&&(I().Ay.reset(),B().A({environment:e,phase:C().SelectionPhase.Selected,preventClearEditingText:t}))}function N(e){if(I().Ay.state.isDragging){const{draggedStores:r,currentDropZone:i}=I().Ay.state,a=e.optionKey;let s;if(i){var t,o;const e=i.type===I().OX.Selectable?k().T.findSelectablesFromStore(i.store):S().A.findDropTargetsFromKey(i.key);null===(t=e.find((e=>Boolean(e.props.onSelectableDrop))))||void 0===t||null===(t=t.props)||void 0===t||null===(o=t.onSelectableDrop)||void 0===o||o.call(t,{droppedDirection:i.direction,droppedStores:r,duplicate:a}),s=function(e,t){const o=t.props,n="store"in o?o.store:void 0,r=n?w().A.findOutlinerItemFromStore(n):void 0,i=n&&b().Uo(n),a=i&&(0,h()._d)(i),s={...r&&{...a,type:r.type},..."analyticsName"in o&&{dropzone_from:o.analyticsName}};if(!e)return{...s,has_dropzone:!1};let l;switch(e.direction){case I().bH.Above:l="above";break;case I().bH.Below:l="below";break;case I().bH.Left:l="left";break;case I().bH.Onto:l="onto";break;case I().bH.Right:l="right";break;default:(0,u().HB)(e.direction)}if(e.type===I().OX.Selectable)return{...s,has_dropzone:!0,dropzone_type:"selectable",dropzone_block_id:(0,d().Xw)(e.store.id),dropzone_direction:l};return{...s,has_dropzone:!0,dropzone_type:"drop_target",dropzone_key:e.key,dropzone_direction:l}}(i,e[0])}const l=r.find((e=>{const t=e.getType();return Boolean(t&&(0,n().$I)(t))})),p=l&&b().Uo(l),g=l&&(0,m().UH)(l);(0,T().t)(e.environment,{draggedTypes:c().oE(r.map((e=>e.getType()))),from:e.analyticsFrom,asCopy:a,draggableProps:{draggable_from:e.analyticsFrom,...p&&(0,h()._d)(p)},dropzoneProps:s,optionalAnalyticsProperties:{collectionContextStore:g}}),D(e.environment),e.environment.device.isPhone&&B().IU({environment:e.environment})}}function L(e){const{environment:t,files:o,analyticsFrom:n}=e;if(I().Ay.state.isDragging){var r;const e=I().Ay.state.currentDropZone;let s;var i,a;if(e)s=e.type===I().OX.Selectable?k().T.findSelectableFromStore(e.store):S().A.findDropTargetFromKey(e.key),null===(i=s)||void 0===i||null===(i=i.props)||void 0===i||null===(a=i.onNativeDrop)||void 0===a||a.call(i,{files:o,droppedDirection:e.direction});(0,T().t)(t,{draggedTypes:[],from:n,asCopy:!1}),D(t,null===(r=s)||void 0===r?void 0:r.props.keepTextSelectionOnDrop)}}function F(e,t){I().Ay.state.isDragging&&(E().clear({environment:e}),I().Ay.setState({...I().Ay.state,...t}))}function U(e,t){if(I().Ay.state.isDragging)return!1;{const{startX:o,startY:n,isNativeDrag:r}=t,i=B().Ko(t.stores);E().clear({environment:e});const a=k().T.getRectFromStore(i[0]);return I().Ay.setState({isDragging:!0,startX:o,startY:n,currentX:o,currentY:n,offsetX:o-(a&&a.left||0),offsetY:n-(a&&a.top||0),currentHintDropZones:[],draggedStores:i,isNativeDrag:r,ghostElements:i.map((e=>t.getGhostElement?t.getGhostElement(e):function(e){const{store:t}=e,o=k().T.findSelectablesFromStore(t);return c().oE(o.map((e=>{if(e.props.canSelect){const t=e.getNode();if(t)return V(t)}})))}({store:e})))}),B().A({environment:e,phase:C().SelectionPhase.Selected}),x().default.reset(),!0}}function O(e){const{droppedStores:t,transaction:o,environment:r,duplicate:l}=e,c=e.resolveTemplateVariables,d=t.map((e=>{if(!k().T.findSelectableFromStore(e))return e;if(l){const i=!e.isTransclusionType(),[a,l]=v().duplicateBlock({environment:r,stores:[e],addCopyName:(0,y().A)(e),transaction:o,deepCopyTransclusionContainers:i,targetSpaceId:(0,s().e)(e.pointer.spaceId),resolveTemplateVariables:e.getType()!==n().xd.factory&&c,baseUrl:f().A.domainBaseUrl,publicDomainName:f().A.publicDomainName,preferDuplicateLocation:"local"}),d=a[0];return l.then((e=>{if("error"===e.status){const o=e.error;p().Rk(o)?1===t.length?p().yj({product:o.clientData.metadata.product}):p().UK(r,{product:o.clientData.metadata.product}):M().f1(e.errorMessage)}})),d}return c&&R().hz({environment:r,store:e,context:{currentUserId:r.currentUser.id,currentTimeZone:(0,i().P)()},transaction:o}),P().TF({store:e,transaction:o}),e}));if(d.length>0&&"suggest"===A().Uv.getMode(d[0])){const e=g().RR(r,o,d[0]);d.forEach((t=>{g().tM(o,t,{type:"insert",discussionId:e.id,id:a().JW()})})),g().c3({environment:r,transaction:o,discussionStore:e,addModifiedBlockIdsAfter:d.map((e=>e.id))})}return d}function V(e){const t=e.style.transform,o=e.style.transition;e.style.transform="",e.style.transition="";const n=e.getBoundingClientRect();e.style.transform=t,e.style.transition=o;const r=e.cloneNode(!0);!function(e,t){const{firstElementChild:o}=e;if(o&&o.hasAttribute("embed-ghost")){const o=j(e,[]);if(o){const r=z(e,o),i=z(t,o);if(r&&i)if(r.shadowRoot){const e=r.shadowRoot;let t=null;if(i.createShadowRoot)t=i.createShadowRoot();else if(i.attachShadow)try{t=i.attachShadow({mode:"open"})}catch(n){}t&&(t.innerHTML=e.innerHTML)}else if(!r.src&&r.contentDocument){const e=document.createElement("iframe");e.width=r.offsetWidth,e.height=r.offsetHeight,q(e,i),i.parentElement.replaceChild(e,i),e.onload=t=>{const o=e.contentDocument.children[0],n=r.contentDocument.children[0];q(o,n),o.innerHTML=n.innerHTML}}else i.width=r.offsetWidth,i.height=r.offsetHeight,i.style.backgroundColor=l().Ay.blackWithAlpha(.12),i.style.backgroundImage=null,i.src=""}}}(e,r);const i=getComputedStyle(e);for(let l=0;l<i.length;l++){const e=i[l],t=i.getPropertyValue(e);"app-region"===e&&"none"===t||"-webkit-text-fill-color"!==e&&(r.style[e]=t)}"absolute"!==i.position&&"relative"!==i.position||(r.style.position="",r.style.top="",r.style.left="",r.style.bottom="",r.style.right="");const a=r.querySelectorAll(`.${_().nKq}`);for(const l of a)l.remove();r.style.pointerEvents="none";const s=r.querySelectorAll("*");for(const l of s)l.style&&(l.style.pointerEvents="none");return{cloned:r,rect:n}}function j(e,t){if(e.shadowRoot)return t;if(e instanceof HTMLIFrameElement)return t;{const{firstElementChild:o,nextElementSibling:n}=e;if(o){t.push(0);const e=j(o,t);if(e)return e;t.pop()}if(n){t[t.length-1]+=1;const e=j(n,t);if(e)return e}return null}}function z(e,t){return t.reduce(((e,t)=>e&&e.children&&e.children[t]?e.children[t]:null),e)}function q(e,t){r().PE(t.attributes).forEach((t=>{let{name:o,value:n}=t;e.setAttribute(o,n)}))}},416726:(e,t,o)=>{o.d(t,{Kg:()=>q,gy:()=>L,Fw:()=>B,Ls:()=>R,uk:()=>F,fi:()=>O,Mf:()=>j,cz:()=>H,uo:()=>U,R2:()=>E,qs:()=>T,eW:()=>z,AY:()=>C,G9:()=>P});o(18107),o(967357),o(898992),o(581454),o(737550),o(296540);var n=o(474848);const r=(0,o(340498).wt)("stopThinOutlineIcon",{viewBox:"0 0 16 16",svg:(0,n.jsx)("g",{children:(0,n.jsx)("path",{d:"M7.998 14.97c-3.808 0-6.973-3.165-6.973-6.972 0-3.815 3.159-6.973 6.966-6.973 3.815 0 6.98 3.158 6.98 6.973 0 3.807-3.159 6.972-6.973 6.972m0-1.162a5.79 5.79 0 0 0 5.81-5.81c0-3.227-2.59-5.81-5.817-5.81a5.777 5.777 0 0 0-5.797 5.81 5.783 5.783 0 0 0 5.804 5.81m-1.811-3.322c-.424 0-.684-.253-.684-.67V6.179c0-.424.26-.67.684-.67h3.609c.43 0 .684.246.684.67v3.637c0 .417-.253.67-.684.67h-3.61Z"})})});var i=()=>o(959013),a=()=>o(100622),s=()=>o(534177),l=()=>o(675925),c=()=>o(317909),d=()=>o(575143),u=()=>o(452558),p=()=>o(760217),m=()=>o(331542),g=()=>o(928600),f=()=>o(45552),v=()=>o(574036),h=()=>o(859428),_=()=>o(662971),b=()=>o(780054),y=()=>o(878377),S=()=>o(478184),w=()=>o(972435),k=()=>o(722872),I=()=>o(553965),A=()=>o(700251),x=()=>o(962730);const C=(0,i().YK)({deleteName:{id:"action.delete.name",defaultMessage:"Delete"},moveToTrashName:{id:"action.moveToTrash.name",defaultMessage:"Move to Trash"},undoName:{id:"action.undo.name",defaultMessage:"Undo"},redoName:{id:"action.redo.name",defaultMessage:"Redo"},duplicateName:{id:"action.duplicate.name",defaultMessage:"Duplicate"},duplicateToPrivateName:{id:"action.duplicateToPrivate.name",defaultMessage:"Duplicate to Private"},turnIntoName:{id:"action.turnInto.name",defaultMessage:"Turn into"},copyLinkName:{id:"action.copyLink.name",defaultMessage:"Copy link to block"},copyLinkNavigableTypeName:{id:"action.copyLinkNavigableType.name",defaultMessage:"Copy link"},showCodePreviewFormat:{id:"action.showCodePreviewFormat.name",defaultMessage:"Preview"},showOnlyCodeFormat:{id:"action.showOnlyCodeFormat.name",defaultMessage:"Code"},showSplitViewFormat:{id:"action.showSplitViewFormat.name",defaultMessage:"Split"},searchPlaceholder:{defaultMessage:"Search for a language…",id:"codeBlock.searchPrompt"},foregroundColorDefaultKeywords:{id:"action.foregroundColor.default.fuzzySearchKeyword",defaultMessage:"Default Black White"},backgroundColorDefaultKeywords:{id:"action.backgroundColor.default.fuzzySearchKeyword",defaultMessage:"Default Black White defaultbackground Defaultbackground"},foregroundColorGrayKeywords:{id:"action.foregroundColor.gray.fuzzySearchKeyword",defaultMessage:"Grey Gray"},backgroundColorGrayKeywords:{id:"action.backgroundColor.gray.fuzzySearchKeyword",defaultMessage:"Grey Gray background Greybackground Graybackground"},foregroundColorBrownKeywords:{id:"action.foregroundColor.brown.fuzzySearchKeyword",defaultMessage:"Brown"},backgroundColorBrownKeywords:{id:"action.backgroundColor.brown.fuzzySearchKeyword",defaultMessage:"Brown background Brownbackground"},foregroundColorOrangeKeywords:{id:"action.foregroundColor.orange.fuzzySearchKeyword",defaultMessage:"Orange"},backgroundColorOrangeKeywords:{id:"action.backgroundColor.orange.fuzzySearchKeyword",defaultMessage:"Orange background Orangebackground"},foregroundColorYellowKeywords:{id:"action.foregroundColor.yellow.fuzzySearchKeyword",defaultMessage:"Yellow"},backgroundColorYellowKeywords:{id:"action.backgroundColor.yellow.fuzzySearchKeyword",defaultMessage:"Yellow background Yellowbackground"},foregroundColorTealKeywords:{id:"action.foregroundColor.teal.fuzzySearchKeyword",defaultMessage:"Teal green"},backgroundColorTealKeywords:{id:"action.backgroundColor.teal.fuzzySearchKeyword",defaultMessage:"Teal green background Tealbackground Greenbackground"},foregroundColorBlueKeywords:{id:"action.foregroundColor.blue.fuzzySearchKeyword",defaultMessage:"Blue"},backgroundColorBlueKeywords:{id:"action.backgroundColor.blue.fuzzySearchKeyword",defaultMessage:"Blue background Bluebackground"},foregroundColorPurpleKeywords:{id:"action.foregroundColor.purple.fuzzySearchKeyword",defaultMessage:"Purple"},backgroundColorPurpleKeywords:{id:"action.backgroundColor.purple.fuzzySearchKeyword",defaultMessage:"Purple background Purplebackground"},foregroundColorPinkKeywords:{id:"action.foregroundColor.pink.fuzzySearchKeyword",defaultMessage:"Pink"},backgroundColorPinkKeywords:{id:"action.backgroundColor.pink.fuzzySearchKeyword",defaultMessage:"Pink background Pinkbackground"},foregroundColorRedKeywords:{id:"action.foregroundColor.red.fuzzySearchKeyword",defaultMessage:"Red"},backgroundColorRedKeywords:{id:"action.backgroundColor.red.fuzzySearchKeyword",defaultMessage:"Red background Redbackground"},backgroundSectionKeywords:{id:"action.section.background.fuzzySearchKeywords",defaultMessage:"Color Background"},backgroundSection:{id:"action.section.background",defaultMessage:"Background color"},colorSection:{id:"action.section.color",defaultMessage:"Text color"},colorName:{id:"action.color.name",defaultMessage:"Color"},duplicateCollectionSchemaOnlyName:{id:"action.duplicateSchemaOnly.name",defaultMessage:"Duplicate without content"},duplicateCollectionWithDataName:{id:"action.duplicateWithData.name",defaultMessage:"Duplicate with content"},convertToLinkMentionName:{id:"action.convertToLinkMention.name",defaultMessage:"Turn into mention"},unavailableOfflineTooltip:{id:"action.tooltip.unavailableOffline",defaultMessage:"Unavailable while offline"}});function T(e){let{title:t}=e;return t}const M={maxWidth:400,whiteSpace:"pre-wrap"};function P(e,t){return(o,n)=>{var r;const i={action:e,block_type:null===(r=o.blocks.at(0))||void 0===r?void 0:r.getType(),from:o.analyticsFrom};return(0,l().o)(o.environment,i,(e=>t(e,o,n)))}}function B(e){const{key:t,displayName:o,displayNameInterpolatedValues:n,contextualDisplayName:r,analyticsName:i,analyticsActionType:a,fuzzySearchKeywords:s,svg:l,svgCustomFill:c,validators:d,shortcuts:u,sortScoreMultiplier:p,closeParentMenu:m,subActions:g,collapseSubActionsIntoParent:f,nativeImageReference:v,alwaysShowInSearch:h,right:_,renderTooltip:b,disableTooltip:y,userProvidedSearchName:S,hideFromSlashActionMenu:w,badge:k,clientSkill:I,disabled:A}=e,{formattedDisplayName:x,searchName:C}=D({displayName:o,displayNameInterpolatedValues:n,userProvidedSearchName:S,fuzzySearchKeywords:s}),T=e.render??N({svg:l,svgCustomFill:c,formattedDisplayName:x,right:_,contextualDisplayName:r,shortcut:u[0],renderTooltip:b,disableTooltip:y,badge:k,disabled:A});return{key:`action ${t}`,displayName:x,analyticsName:i,analyticsActionType:a,searchName:C,validators:d,shortcuts:u,sortScoreMultiplier:p,action:e.track?P(e.track.actionName,e.action):e.action,subActions:g,collapseSubActionsIntoParent:f,closeParentMenu:m,render:T,nativeImageReference:v,alwaysShowInSearch:h,hideFromSlashActionMenu:w,svg:l,svgCustomFill:c,clientSkill:I}}function R(e){const{key:t,displayName:o,displayNameInterpolatedValues:n,contextualDisplayName:r,analyticsName:i,analyticsActionType:a,fuzzySearchKeywords:s,fuzzySearchKeywordsArray:l,svg:c,svgCustomFill:d,validators:u,sortScoreMultiplier:p,closeParentMenu:m,subActions:g,collapseSubActionsIntoParent:f,hideSubActions:v,nativeImageReference:h,alwaysShowInSearch:_,right:b,renderTooltip:y,disableTooltip:S,userProvidedSearchName:w,clientSkill:k,tooltipPlacement:I,badge:A,isRed:x,disabled:C}=e,{formattedDisplayName:T,searchName:M}=D({displayName:o,displayNameInterpolatedValues:n,userProvidedSearchName:w,fuzzySearchKeywords:s,fuzzySearchKeywordsArray:v?l:void 0}),B=e.render??N({svg:c,svgCustomFill:d,formattedDisplayName:T,right:b,contextualDisplayName:r,renderTooltip:y,disableTooltip:S,tooltipPlacement:I,badge:A,isRed:x,disabled:C});return{key:(R=t,`action ${R}`),displayName:T,analyticsName:i,analyticsActionType:a,searchName:M,validators:u,sortScoreMultiplier:p,action:e.track?P(e.track.actionName,e.action):e.action,subActions:g,collapseSubActionsIntoParent:f,hideSubActions:v,closeParentMenu:m,render:B,nativeImageReference:h,alwaysShowInSearch:_,svg:c,svgCustomFill:d,clientSkill:k};var R}function E(e){if("string"==typeof e)return e.split(" ").at(-1)}function D(e){const{displayName:t,displayNameInterpolatedValues:o,fuzzySearchKeywords:n,fuzzySearchKeywordsArray:r,userProvidedSearchName:i}=e,a=t?w().A.formatMessage(t,o):void 0,s=n||t,l=n?w().A.formatMessage(n):a,c=null==r?void 0:r.map((e=>w().A.formatMessage(e))).join(" ");let d=i;return d||(d=s?l===s.defaultMessage?c?`${c} ${l}`:l:`${l} ${s.defaultMessage}`:void 0),{formattedDisplayName:a,searchName:d}}function N(e){const{formattedDisplayName:t,svg:o,svgCustomFill:r,shortcut:i,right:a,renderTooltip:s,disableTooltip:l,badge:c,isRed:u,tooltipPlacement:p=x().W.Right,disabled:m}=e;return function(g,f,v){var _;const b=(null===(_=e.contextualDisplayName)||void 0===_?void 0:_.call(e,f))||t;return(0,n.jsx)(h().A,{render:e=>{var t;return(0,n.jsx)(d().A,{...(0,I().A)(g,e),...v.styles,title:b,svg:o,svgCustomFill:r??(null===(t=v.styles)||void 0===t?void 0:t.svgCustomFill),shortcut:i,badge:c,isRed:u,right:"function"==typeof a?a(g,f,v):a,disabled:null==m?void 0:m(),disabledFeedback:null==m?void 0:m()})},renderTooltip:()=>(0,n.jsx)("div",{style:M,children:null==s?void 0:s({title:b})}),disableTooltip:!s||(null==l?void 0:l()),placement:p})}}function L(e){const{key:t,title:o,overrideSearchTitle:n,render:r,actions:i}=e,a=o?w().A.formatMessage(o):void 0,s=n||o,l=s&&w().A.formatMessage(s);return{key:t,title:a,searchTitle:s?l===s.defaultMessage?l:`${l} ${s.defaultMessage}`:void 0,render:r,actions:i}}function F(e){const{key:t,displayName:o,displayNameInterpolatedValues:r,analyticsName:a,validators:s,subActions:l,collapseSubActionsIntoParent:c,hideSubActions:m,svg:v,icon:h,right:b,rightStyle:y,width:S,initialFocus:w,clientSkill:I,fuzzySearchKeywordsArray:A}=e,x=R({clientSkill:I,key:`extension ${t}`,displayName:o,displayNameInterpolatedValues:r,analyticsName:a,validators:s,subActions:l,collapseSubActionsIntoParent:c,hideSubActions:m,fuzzySearchKeywordsArray:A,closeParentMenu:!0,action:()=>{},render:(e,t,r)=>(0,n.jsx)(_().A,{...e,renderOrigin:(e,t)=>v?(0,n.jsx)(d().A,{...e,title:x.displayName,svg:v,right:b,rightStyle:y,ref:t}):(0,n.jsx)(p().A,{...e,title:x.displayName,icon:h,right:b,rightStyle:y,ref:t}),onFocus:r.onFocus,renderExtension:(e,a)=>function(e){const{context:t,extensionMenuParent:o,actionMenuListParent:r,popupEvents:a,displayName:s,width:l,initialFocus:c,subActions:d}=e,p=(0,k().Tf)();let m;m=t.environment.device.isPhone?p?{menuType:k().gu.Modal,onClickLeft:o.close,left:(0,n.jsx)(f().MobileModalBackButton,{}),shouldRenderMobileRefresh:p,paddingTop:10,title:(0,n.jsx)(i().sA,{...s}),...a}:{menuType:k().gu.Modal,right:(0,n.jsx)(f().DoneMenuText,{}),onClickRight:o.close,...a}:{menuType:k().gu.Popup,width:l??220,...a};return(0,n.jsx)(g().A,{...m,children:(0,n.jsx)(u().A,{initialFocus:c??0,context:t,sections:d(t),onAccept:r.onAccept})})}({context:t,extensionMenuParent:a,actionMenuListParent:r,popupEvents:e,displayName:o,width:S,initialFocus:w,subActions:l})})});return x}const U=[y().AU6(y().Xjv(o(700500).xd.externalObjectInstancePage)),y().AU6(y().PfK),y().AU6(y().IW),y().p2L,y().AU6((e=>e.blocks.some((e=>e.isDefined()&&(0,o(313892).sZ)(e))))),y().AU6(y().IuJ),y().zrb];function O(e){function t(t){let{environment:o,blocks:n,analyticsFrom:r}=t;return c().createAndCommit({userAction:"actionRegistry.createToggleAction",environment:o,canUndo:!0,perform:t=>{var i;const a=n[0],s=!e.isEnabled(a);e.action(o,a,t,r),null===(i=e.afterAction)||void 0===i||i.call(e,s,o)}})}const o={key:`format ${e.key}`,displayName:e.displayName,analyticsName:e.displayName.defaultMessage,validators:e.validators,render:(t,o)=>{var r,i;let{blocks:s,environment:l}=o;const c=s[0],d=e.isEnabled(c),u=(null===(r=e.isLoading)||void 0===r?void 0:r.call(e,c))||!1,p=(0,a().O4)({theme:l.ThemeModeStore.state}),m=(0,A().xI)({isMobile:l.device.isMobile});return(0,n.jsx)(h().A,{placement:x().W.Right,disableTooltip:!e.renderTooltip||(null===(i=e.disableTooltip)||void 0===i?void 0:i.call(e,c)),renderTooltip:()=>{var t;return(0,n.jsx)("div",{style:M,children:null===(t=e.renderTooltip)||void 0===t?void 0:t.call(e,{title:e.label})})},render:o=>{var r,i;return(0,n.jsx)(v().A,{...(0,I().A)(t,o),title:e.label,icon:V({svg:e.svg,svgWhenEnabled:e.svgWhenEnabled,size:m,isLoading:u,isEnabled:d,theme:p}),badge:e.badge,on:d,disabled:null===(r=e.disabled)||void 0===r?void 0:r.call(e,c),disabledFeedback:null===(i=e.disabled)||void 0===i?void 0:i.call(e,c)})}})},closeParentMenu:!1};return R(e.track?{...o,track:e.track,action:(e,o)=>{const{serverCommitResult:n}=t(o);n.then(e)}}:{...o,action:t})}function V(e){const{svg:t,svgWhenEnabled:o,isLoading:r,isEnabled:i,size:a,theme:s}=e;if(!t)return;const l={display:"flex",alignItems:"center",justifyContent:"center",width:a,height:a};if(r)return(0,n.jsx)("div",{style:l,children:(0,n.jsx)(m().A,{size:"md"})});const c=i&&o?o:t;return(0,n.jsx)("div",{style:l,children:c({fill:s.icon.primary})})}function j(e){switch(e){case"default":return C.foregroundColorDefaultKeywords;case"default_background":return C.backgroundColorDefaultKeywords;case"gray":return C.foregroundColorGrayKeywords;case"gray_background":return C.backgroundColorGrayKeywords;case"brown":return C.foregroundColorBrownKeywords;case"brown_background":return C.backgroundColorBrownKeywords;case"orange":return C.foregroundColorOrangeKeywords;case"orange_background":return C.backgroundColorOrangeKeywords;case"yellow":return C.foregroundColorYellowKeywords;case"yellow_background":return C.backgroundColorYellowKeywords;case"teal":return C.foregroundColorTealKeywords;case"teal_background":return C.backgroundColorTealKeywords;case"blue":return C.foregroundColorBlueKeywords;case"blue_background":return C.backgroundColorBlueKeywords;case"purple":return C.foregroundColorPurpleKeywords;case"purple_background":return C.backgroundColorPurpleKeywords;case"pink":return C.foregroundColorPinkKeywords;case"pink_background":return C.backgroundColorPinkKeywords;case"red":return C.foregroundColorRedKeywords;case"red_background":return C.backgroundColorRedKeywords;default:return(0,s().HB)(e)}}function z(e){const t=e.thumbnail?(0,S().L)(null==e?void 0:e.thumbnail):void 0,o=Boolean(void 0!==t&&/^https?:\/\//.test(t));return{remoteImageUrl:t?`${o?"":b().A.domainBaseUrl}${t}`:void 0,localAssetBundleImagePath:o?void 0:t}}function q(e,t,o){const n=e.device.isAndroid?(0,a().O4)({theme:"light"}):(0,a().O4)({theme:e.ThemeStore.state.mode}),r=(0,a().k5)(t,n);let i,s,l;const c="default_background"!==t;t.includes("background")||null!=o&&o.includes("background")?(i="background",s=c?"square.fill":"square",l="textBackgroundColor"):(i="color",s="character",l="textColor");const d=i in r?r[i]:void 0,u=d&&(0,a().vU)(d);return{sfProGlyphName:s,localImageIdentifier:l,imageTintColor:c?u:void 0}}function H(e,t){return t?(0,n.jsxs)("div",{style:{color:e.lightTextColor,fontSize:14,display:"flex",flexDirection:"row",alignItems:"center",gap:2},children:[r({width:14,height:14}),"Stop"]}):void 0}},418135:(e,t,o)=>{o.d(t,{JT:()=>l,WS:()=>c,rx:()=>s,vN:()=>a,y$:()=>i,yU:()=>r});var n=()=>o(496603);const r=.5,i=4.9,a=.1,s=1;function l(e){switch(n().qE(n().LI(e,1),r,i)){case r:return 155;case.6:return 128;case.7:return 108;case.8:return 94;case.9:return 83;default:return 75}}function c(e){const t=n().qE(n().LI(e,1),r,i);switch(t){case r:return 273;case.6:return 228;case.7:return 195;case.8:return 171;case.9:return 151;case 1:return 136;case 1.1:return 123;case 1.2:return 113;case 1.3:return 105;case 1.4:return 97;case 1.5:return 91;case 1.6:return 85;default:return Math.max(85-Math.floor(10*(t-1.6)*5),0)}}},419101:(e,t,o)=>{o.d(t,{On:()=>i,Vp:()=>a,YL:()=>r});var n=()=>o(620149);function r(){n().A.setState({...n().A.state,connectionError:void 0})}function i(e){const{connectionError:t}=n().A.state,o=Date.now(),r=void 0===e.backoffEstimate?void 0:e.backoffEstimate+o;n().A.setState({...n().A.state,connectionError:{startTime:(null==t?void 0:t.startTime)??o,numAttempts:t?t.numAttempts+1:1,approximateBackoffDelayEndTime:r,retryReason:e.retryReason??(null==t?void 0:t.retryReason)}})}const a={onReset:r,onBackoff(e,t){i({backoffEstimate:e,retryReason:t})}}},419942:(e,t,o)=>{o.d(t,{o:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M4.93 6.125a.5.5 0 0 0-.5.5v6.75a.5.5 0 0 0 .5.5h10.145a.5.5 0 0 0 .5-.5v-6.75a.5.5 0 0 0-.5-.5z"}),(0,n.jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v7.5c0 1.174.951 2.125 2.125 2.125h11a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 15.5 4.125zM3.625 6.25c0-.483.392-.875.875-.875h11c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-11a.875.875 0 0 1-.875-.875z"})]})},i=(0,o(340498).wt)("peekFull",r)},421107:(e,t,o)=>{o.d(t,{A:()=>a,g:()=>r});var n=()=>o(496603);function r(e,t){return e.collectionViewBlockStore===t.collectionViewBlockStore&&n().n4(e.groupFormat,t.groupFormat)}class i extends(()=>o(757695))().default{getInitialState(){return{isActive:!1}}cloneState(){return n().o8(this.state)}}const a=new i},421559:(e,t,o)=>{o.d(t,{T:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v7.5c0 1.174.951 2.125 2.125 2.125h11a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 15.5 4.125zm11.875 7h-5.75v-2.25h5.75zm-5.75 1.25h5.75v1.375a.875.875 0 0 1-.875.875h-4.875zm-1.25-1.25h-5.75v-2.25h5.75zm-5.75 1.25h5.75v2.25H4.5a.875.875 0 0 1-.875-.875zm0-4.75V6.25c0-.483.392-.875.875-.875h4.875v2.25zm7 0v-2.25H15.5c.483 0 .875.392.875.875v1.375z"})},r=(0,o(340498).wt)("viewTable",n)},423804:(e,t,o)=>{o.d(t,{Ih:()=>p,Vv:()=>m,_1:()=>f,jS:()=>g,o9:()=>u,x5:()=>d});o(898992),o(672577);var n=()=>o(319954),r=()=>o(179034),i=()=>o(197959),a=()=>o(161479),s=()=>o(798880),l=()=>o(919709),c=()=>o(630116);function d(e,t,o,n){for(const r of t.findByGroupingKey(n)){if(!l().I1e(r))continue;const t=l().vu(r),n=c().sk.createChildStore(e,{table:i().$Y,id:t,spaceId:(0,a().e)(e.pointer.spaceId)});if(p(n,o))return{discussionStore:n,annotation:r}}}function u(e){const{store:t,discussionId:o}=e,n=t.getAncestorRecordStoreAtRootPath();if(!n||n.table!==r().ev)return;return n.getDiscussionStores().find((e=>e.id===o))}function p(e,t){const o=e.getCommentStores();if(!o[0])return!1;const n=o[0].getCreatedByPointer();return(null==n?void 0:n.table)===s().oo&&(null==n?void 0:n.id)===t.id}function m(e){const{blockStore:t,suggestionType:o,currentUser:n}=e;let r;if("insert"===o?r=t.getInsertSuggestion():"remove"===o?r=t.getRemoveSuggestion():"add_line_break"===o?r=t.getAddLineBreakSuggestion():"remove_line_break"===o&&(r=t.getRemoveSuggestion()),r){return p(c().sk.createChildStore(t,{table:i().$Y,id:r.discussionId,spaceId:(0,a().e)(t.pointer.spaceId)}),n)}}function g(e){const{blockStore:t,currentUser:o,type:r}=e,i=t.getTitleValue(),a=l().mIW(i);return d(t,n().r.fromArray(a),o,r)}function f(e){const{blockStore:t,currentUser:o}=e,n=t.getInsertSuggestion();if(n){return p(c().sk.createChildStore(t,{table:i().$Y,id:n.discussionId,spaceId:(0,a().e)(t.pointer.spaceId)}),o)}return!1}},423938:(e,t,o)=>{o.d(t,{Z:()=>u});var n=()=>o(908006),r=()=>o(885110),i=()=>o(686526),a=()=>o(508496),s=()=>o(179034),l=()=>o(478251),c=()=>o(896461);var d=()=>o(180762);function u(e){const{environment:t,collectionContextStore:o,newViewType:u="table",transaction:p,skipOpenSettings:m}=e,g=o.collectionViewBlockStore(),f=o.collectionViewStore(),v=o.settingsStore;if(!g)return;const h=function(e){var t,o;const{environment:n,collectionContextStore:r,collectionViewBlockStore:i,newViewType:a,existingCollectionViewStore:d,transaction:u}=e,p=r.collectionStore(),m=null==p||null===(t=p.getFormat())||void 0===t?void 0:t.collection_default_arrows_by,g=(0,l().i)({environment:n,collectionViewBlockStore:i,collectionView:{type:a??"table",parent_id:i.id,parent_table:s().ev,alive:!0,space_id:i.getSpaceId(),format:{table_properties:null==d||null===(o=d.getFormat())||void 0===o?void 0:o.table_properties,timeline_arrows_by:m?{property:m}:void 0,table_subitem_toggle_column:"title",...d&&"collectionTypedView"===r.contextType?{collection_view_source:d.getFormat().collection_view_source,property_filters:d.getFormat().property_filters}:{}}},transaction:u});return(0,c().W)({environment:n,collectionContextStore:r,collectionViewStore:g,collectionStore:p,newViewType:a,transaction:u}),g}({environment:t,collectionContextStore:o,collectionViewBlockStore:g,newViewType:u,existingCollectionViewStore:f,transaction:p});"chart"===u&&(r().Z({environment:t,collectionContextStore:o,collectionViewId:h.id,from:"new_view_button"}),a().default.logEvent("chart_created")),(0,d().t)({environment:t,collectionContextStore:o,collectionViewId:h.id,isFullScreen:o.isFullScreenStore.state,isRootChild:o.isRootChildStore.state,isInPeekRenderer:o.isInPeekRendererStore.state}),m||n().default.afterNextFlush((()=>{if(i().Ow({collectionContextStore:o,collectionSettingsStore:v}),g.getCollectionViewSourceCollectionStore())i().R8({collectionSettingsStore:v,item:{type:"createView"}});else{var e;o.hasSingleCollection()&&"page"!==(null===(e=o.collectionViewStore())||void 0===e?void 0:e.getType())&&i().R8({collectionSettingsStore:v,item:{type:"linkToDatabase",existingCollectionStore:void 0}})}}))}},424039:(e,t,o)=>{o.d(t,{$S:()=>r,Ay:()=>c,CV:()=>s,w_:()=>i});var n=()=>o(994310);const r="unread_and_read",i=["unread_and_read","unread_only","archived_only","all_updates"],a={filter:r},s="notification_inbox_panel";const l=o(757695).default.createValue(function(){const e=n().A.get(s);return{...a,...e}}(),{name:"preferenceStore"});l.addListener((e=>{try{t=e.state,n().A.set(s,t)}catch{}var t}));const c=l},424746:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(959180))().A{}const r=new n},425946:(e,t,o)=>{o.d(t,{L:()=>a,M:()=>i});var n=()=>o(496603),r=()=>o(402390);const i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function a(e,t){if(n().Kg(e))return e;{const o=e[t];return void 0!==o?o:e[r().q]}}},426116:(e,t,o)=>{o.d(t,{cJ:()=>We,np:()=>qe,bz:()=>Ae,c$:()=>Ke,cN:()=>Oe,CU:()=>Xe,DT:()=>Le,ev:()=>Ue,rr:()=>xe,t9:()=>Pe,tR:()=>Me,IO:()=>Be,iz:()=>ze,xu:()=>Ze,Mr:()=>Ve,Od:()=>je,uK:()=>Ye,Xk:()=>Ne,DJ:()=>Qe,M1:()=>$e,ne:()=>Ge,yV:()=>Ce,O1:()=>He,l3:()=>De,Yk:()=>Re,Ef:()=>Ee});o(16280),o(944114),o(898992),o(354520),o(672577),o(581454);var n=()=>o(584262),r=()=>o(857639),i=()=>o(416845),a=()=>o(206267),s=()=>o(68263),l=()=>o(388821),c=()=>o(179034),d=()=>o(96689),u=()=>o(84520),p=()=>o(854150),m=()=>o(294712),g=()=>o(322769),f=()=>o(994310),v=()=>o(496603),h=()=>o(229833),_=()=>o(763824),b=()=>o(821062),y=()=>o(534177),S=()=>o(583835);const w=(0,S().Dv)("deleteSpace"),k=(0,S().Dv)("moveToSpace");var I=()=>o(857783),A=()=>o(662453),x=()=>o(650829),C=()=>o(780054),T=()=>o(549500),M=()=>o(989423),P=()=>o(680074),B=()=>o(529543),R=()=>o(211716),E=()=>o(972435),D=()=>o(100875),N=()=>o(731320),L=()=>o(437622),F=()=>o(37433),U=()=>o(510473),O=()=>o(935370),V=()=>o(1130),j=()=>o(144114),z=()=>o(162674),q=()=>o(696746),H=()=>o(770906),W=()=>o(441199),K=()=>o(214006),G=()=>o(351360),$=()=>o(430483),Y=()=>o(227440),Q=()=>o(508496),Z=()=>o(150193),X=()=>o(968172),J=()=>o(630116),ee=()=>o(224701),te=()=>o(981046),oe=()=>o(701763),ne=()=>o(278768),re=()=>o(966505),ie=()=>o(449506),ae=()=>o(934839),se=()=>o(901389),le=()=>o(357625),ce=()=>o(824772),de=()=>o(433052),ue=()=>o(722101),pe=()=>o(496414),me=()=>o(899193),ge=()=>o(579627),fe=()=>o(824188),ve=()=>o(246826),he=()=>o(435009),_e=()=>o(537941),be=()=>o(706024),ye=()=>o(185544),Se=()=>o(72234),we=()=>o(317909),ke=()=>o(840153);const Ie=(0,o(959013).YK)({deletingWorkspace:{id:"spaceActions.deletingWorkspace.loadingMessage",defaultMessage:"Deleting workspace…"},goOnlineCreateSpace:{id:"spaceActions.dialogError.createWorkspaceError.goOnline.message",defaultMessage:"Please go online to create your workspace."},createSpaceError:{id:"spaceActions.dialogError.createWorkspaceError.message",defaultMessage:"Sorry! We could not create your workspace. Please try again."},loginToCreateSpace:{id:"spaceActions.dialogError.createWorkspaceError.notLoggedIn.message",defaultMessage:"Please log in to create a workspace."},moveToSpaceOnlineError:{id:"spaceActions.dialogError.moveContentError.goOnline.message",defaultMessage:"Please go online to move content to another workspace."},loginToMoveContent:{id:"spaceActions.dialogError.movetoWorkspace.notLoggedIn.message",defaultMessage:"Please log in to move content to another workspace."},cannotMoveShardRestriction:{id:"spaceActions.dialogError.moveContentError.cannotMovePages.message",defaultMessage:"Cannot move pages from multiple workspaces at once."},cannotMoveContent:{id:"spaceActions.dialogError.couldNotMoveContentError.message",defaultMessage:"Sorry! We could not move this content. Please try again."},spaceContentDuplicationTooLarge:{id:"spaceActions.dialogError.spaceContentDuplicationTooLarge.message",defaultMessage:"Content too large to duplicate. Please try breaking it up into smaller batches."},spaceContentDuplicationRefreshRequired:{id:"spaceActions.dialogError.spaceContentDuplicationRefreshRequired.message",defaultMessage:"Content successfully duplicated. A refresh is required to load the new content."},unableToJoinSpace:{id:"spaceActions.dialogError.unableToJoinSpace.message",defaultMessage:"Cannot join since you previously belonged to this workspace. Please ask an administrator to invite you directly."},inviteLinkDisabled:{id:"spaceActions.dialogError.inviteLinkDisabled.message",defaultMessage:"Invite link disabled. Please ask an administrator to invite you directly to this workspace."},invalidSpaceStoreOnNavigate:{id:"spaceActions.dialogError.navigateToWorkspace.invalidStorage.message",defaultMessage:"Failed to load workspace data."},noSpaceViewOnJoin:{id:"spaceActions.dialogError.joinWorkspace.invalidWorkspaceStorage.message",defaultMessage:"No workspace view data was created."},noLocalDataForPermissionGroup:{id:"spaceActions.dialogError.createOrUpdatePermissionGroup.invalidWorkspaceStorage.message",defaultMessage:"No local data about this workspace."}});async function Ae(e){const{environment:t,name:o,domain:n,userRootStore:i,emailDomains:a,analyticsFrom:s,icon:l,planType:c,userPersona:g,shouldCreateUserPersonaTeam:f,shouldMakeUserPersonaTeamDefault:h,collaborativeIntent:_}=e,{id:b}=t.currentUser;if(b){const e=await ie().callApi({eventName:"createSpace",environment:t,data:{name:o,domain:n,emailDomains:a,icon:l,planType:c,initialPersona:g,shouldCreateUserPersonaTeam:f,shouldMakeUserPersonaTeamDefault:h,domainType:(0,P().FX)(),collaborativeIntent:_,deviceId:await(0,B().getExperimentDeviceId)(t),deviceType:t.device.deviceType}});if("failed"===e.type){if(e.offline)throw new Error(E().A.formatMessage(Ie.goOnlineCreateSpace));throw new Error(E().A.formatMessage(Ie.createSpaceError))}Q().default.logEvent("create_workspace",c,{analyticsFrom:s,userPersona:g,collaborativeIntent:_,deviceType:t.device.deviceType});const{spaceId:y,teamId:S,inviteLinkCode:w}=e.data,k=new(J().SL)(t,{table:d().NX,id:y}),I=S?J().h4.createChildStore(k,{table:p().yK,id:S}):void 0,{serverCommitResult:A,performResult:{spaceViewStore:x}}=we().createAndCommit({userAction:"spaceActions.createSpace",environment:t,canUndo:!0,perform:e=>{const o=ve().eC({environment:t,table:u().mu,value:{space_id:k.id,notify_mobile:!0,notify_desktop:!0,notify_email:!0,parent_id:b,parent_table:m().GD,alive:!0,joined:!0,joined_teams:I&&v().oE([null==I?void 0:I.id]),settings:{notify_email_digest:!0,notify_home_digest_email:!0},first_joined_space_time:Date.now()},inMemoryRecordCache:i.inMemoryRecordCache,transaction:e}),n=new(J().vH)(t,o.pointer);return ue().BC({parentStore:i.getSpaceViewsStore(),appendStore:o,transaction:e}),ue().B8({parentStore:i.getSpaceViewPointersStore(),appendStore:o,transaction:e}),t.device.isMobileNative&&r().log({level:"info",from:"spaceActions",type:"SpaceSwitchingDebug",data:{message:"spaceActions.createSpace setting space"}}),G().default.setState({...G().default.state,currentSpaceStore:k,currentSpaceViewStore:n}),re().qF(t,{from:s,planType:c,isProfessionalTeamUser:(0,P().YD)(),domain_type:(0,P().FX)()}),{spaceViewStore:n}}});return await A,await ce().fD(t),{spaceViewStore:x,spaceStore:k,inviteLinkCode:w,teamStore:I}}throw new Error(E().A.formatMessage(Ie.loginToCreateSpace))}async function xe(e){const{environment:t,blockStores:o,spaceId:n,targetParent:a}=e,{id:s}=t.currentUser;if(s){if(!Y().A.state.online)return{error:{message:E().A.formatMessage(Ie.moveToSpaceOnlineError)}};const e=[],p=[];for(const t of o)t.isDefined()&&(e.push({id:t.id,spaceId:t.getSpaceId()}),p.push(n));if(v().sb(p).length>1)return{error:{message:E().A.formatMessage(Ie.cannotMoveShardRestriction)}};if(a&&a.spaceId!==n)return{error:{message:E().A.formatMessage(Ie.cannotMoveShardRestriction)}};const m=(0,le().UT)(t,k,{blocks:e,targetSpaceId:n,targetParent:a,clearPermissions:(0,F().zI)()>0});let g;for await(const o of m){if(me().DW(o,n),o.error)return M().vd(t,"move_to_space_error",{}),r().log({level:"error",from:"spaceActions",type:"moveSpaceError",error:(0,h().n6)(o.error),data:{userId:s,blocks:e,spaceId:n}}),(0,i().Xd)(o.error)?{error:{message:E().A.formatMessage(Ie.spaceContentDuplicationTooLarge),data:o.error}}:{error:{message:E().A.formatMessage(Ie.cannotMoveContent),data:o.error}};if(void 0===o.value.recordMap){if("success"===o.taskStatus)return{error:{message:E().A.formatMessage(Ie.spaceContentDuplicationRefreshRequired)}}}else{const e=l().RecordMapWithRole.create(o.value.recordMap).getByTable(c().ev);for(const{value:t}of e){var d,u;if("copy_indicator"===(null==t||null===(d=t.value)||void 0===d?void 0:d.type))g=null==t||null===(u=t.value)||void 0===u?void 0:u.id}}}return me().L7(n),{value:g}}return{error:{message:E().A.formatMessage(Ie.loginToMoveContent)}}}async function Ce(e){const{environment:t,spaceViewStore:o,openInNew:n,isNewlyCreatedSpace:i,leavingSpace:a}=e;await o.awaitNonNullValue();const s=o.getSpaceStore();if(!s)throw new Error(E().A.formatMessage(Ie.invalidSpaceStoreOnNavigate));if(!n){try{const{dictationActions:e}=await T().$O.load();await e.stopDictation({environment:t,from:"space_switch"})}catch(d){}if(ae().zA({bannerStore:Z().A,id:"SubscriptionEditingBlocker"}),t.device.isMobileNative&&r().log({level:"info",from:"spaceActions",type:"SpaceSwitchingDebug",data:{message:"spaceActions.switchToSpace",spaceId:s.id}}),G().default.setState({...G().default.state,currentSpaceStore:s,currentSpaceViewStore:o}),a){const e=await(0,L().zd)(t,o);e&&((0,D().hr)({spaceView:o.getModel(),pageId:e.id}),G().default.setState({...G().default.state,mainEditorCurrentBlockStore:e}))}}te().A.reset();const l=t.currentUser.id,c=o.getUserRootParentId();if(c&&l!==c){const e=await ke().T({environment:t,newCurrentUserId:c});await ee().$D({environment:e,spaceId:s.id,isNewlyCreatedSpace:i});const{currentUserSettingsStore:o,currentUserRootStore:n}=G().default.state;return{switchedUser:!0,newEnvironment:e,newUserRootStore:n,newUserSettingsStore:o}}return await ee().$D({environment:t,spaceId:s.id,isNewlyCreatedSpace:i}),{switchedUser:!1}}async function Te(e){const{spaceViewStore:t,redirectPageId:o,openInNew:i,isNewlyCreatedSpace:a,templateGalleryItem:s,projectManagementLaunch:l,redirect:d,leavingSpace:u,pageVisitSource:p,forceLandLastVisitedPage:m,navigateToStore:g}=e;let{environment:f,userSettingsStore:v,userRootStore:h}=e;const _=t.getSpaceStore();if(!_)throw new Error(E().A.formatMessage(Ie.invalidSpaceStoreOnNavigate));const b=await Ce({environment:f,spaceViewStore:t,openInNew:i,isNewlyCreatedSpace:a,leavingSpace:u});b.switchedUser&&(f=b.newEnvironment,v=b.newUserSettingsStore,h=b.newUserRootStore),W().default.isOpen()&&(0,H().VI)({environment:f}),$().zD.isAiEnabled()&&(x().assistantDependency.load().then((e=>{let{assistantActions:t}=e;t.clearAllAssistantSessions()})),async function(){const{aiQnaActions:e}=await A().aiDependency.load();e.resetAllAiConnectors()}());const y=h&&h.getSpaceViewStores(),S=L().y$(f,{space:_.getModel(),spaceView:null==t?void 0:t.getModel()}),w=q().x$(t);if(g)return void I().uK({environment:f,store:g,visitType:R().ig.Link,pageVisitSource:n().y8.NewWorkspaceWorkflowTemplateOnboarding});if(o)return void I().uK({environment:f,store:new(J().Bv)(f,{table:c().ev,id:o}),openInNew:i,pageVisitSource:p,redirect:d});if((0,j().zX)(f)&&_e().navigateToHomeTab(f),h&&await fe().reinitializeGlobalRecentPagesStoreState(f,h.id,_.id),m||"last_visited_page"===S){const e=function(e){const{spaceId:t}=e,o=X().A.getWithoutSubscribing(t);if(!Array.isArray(o))return;const n=o[0];if(void 0===(null==n?void 0:n.pageId))return;return n.store}({environment:f,spaceId:_.id});if(e&&e.canRead()&&e.pathIsAccessibleAndAlive()&&!N().qb(f,e))return void I().uK({environment:f,store:e,openInNew:i,templateGalleryItem:s,projectManagementLaunch:l,pageVisitSource:n().y8.LastVisitedPage,redirect:d})}if("chat"===S&&!f.device.isTablet)return void he().oo({environment:f,url:"/chat",redirect:d});if(("personal_home"===S||"chat"===S&&f.device.isTablet)&&w&&(await w.load(),w.canRead()))return I().uK({environment:f,store:w,openInNew:i,templateGalleryItem:s,projectManagementLaunch:l,pageVisitSource:n().y8.DefaultHome,redirect:d}),void(0,z().ZL)({environment:f,from:"on_app_start_page"});const k=await(0,L().zd)(f,t);if(k)return(0,D().hr)({spaceView:t.getModel(),pageId:k.id}),void I().uK({environment:f,store:k,openInNew:i,templateGalleryItem:s,projectManagementLaunch:l,pageVisitSource:p,redirect:d});if(_.canEdit()){const{performResult:e}=we().createAndCommit({userAction:"spaceActions.createdPage",environment:f,canUndo:!0,perform:e=>ye().IT({environment:f,spaceStore:_,spaceViewStore:t,isPrivate:!0,transaction:e,prepend:!1})});I().uK({environment:f,store:e,openInNew:i,pageVisitSource:p,redirect:d})}else{if(v&&h&&y&&y.length>0&&y[0]&&y[0].id!==t.id)return de().Aj(),f.device.isMobileNative&&r().log({level:"info",from:"spaceActions",type:"SpaceSwitchingDebug",data:{message:"navigateToFirstSpace because navigateToSpace didn't find a page"}}),void(await Pe({environment:f,userRootStore:h,userSettingsStore:v,openInNew:i,pageVisitSource:p}));de().Aj(),await V().Ig(f)}}async function Me(e){G().default.setState({...G().default.state,spaceTransitionStatus:e.navigationType}),await Te(e),await ce().fD(e.environment,!0),G().default.setState({...G().default.state,spaceTransitionStatus:"notTransitioning"})}async function Pe(e){const{environment:t,userRootStore:o,ignoreSpaceId:r,userSettingsStore:i,openInNew:a,skipPendingTransferWorkspaces:s,leavingSpace:l,templateGalleryItem:c,projectManagementLaunch:d,pageVisitSource:u,redirect:p,forceLandLastVisitedPage:m}=e;if(u===n().y8.PublicShareLink)return void de().Aj();await o.load();const f=o.getSpaceViewStores();await Promise.all(f.map((e=>e.load())));const v=f.filter((e=>{var t,o;if(!e.isDefined())return!1;if(r)return e.getSpaceId()!==r;const n=(0,g().D1)(null===(t=e.getSpaceStore())||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.space_request)||(0,g().C0)(null===(o=e.getSpaceStore())||void 0===o||null===(o=o.getSettings())||void 0===o?void 0:o.space_request);return!s||!n}));let h;for(const n of v){if(!L().IL(n.getSpaceStore())){h=n;break}{const e=await(0,L().zd)(t,n);if(e&&e.isDefined()){h=n,(0,D().hr)({spaceView:n.getModel(),pageId:e.id});break}}}h?await Me({environment:t,spaceViewStore:h,userSettingsStore:i,userRootStore:o,openInNew:a,leavingSpace:l,templateGalleryItem:c,projectManagementLaunch:d,pageVisitSource:u,redirect:p,navigationType:"switchingToOrLoadingSpace",forceLandLastVisitedPage:m}):(de().Aj(),await V().Ig(t))}async function Be(e){const{environment:t,index:o,userRootStore:r,userSettingsStore:i}=e,a=K().A.getAllSpaceViewStores(t)[o];a&&await Me({environment:t,spaceViewStore:a,userSettingsStore:i,userRootStore:r,pageVisitSource:n().y8.SwitchSpace,navigationType:"switchingToOrLoadingSpace"})}async function Re(e){const{environment:t,spaceStore:o}=e;o.isDefined()&&!(0,b().A)(o.getEmailDomains(),e.emailDomains)&&ne().Om(t,{domains:e.emailDomains||[],confirmed:!0});const n={email_domains:e.emailDomains};e.name&&(n.name=e.name);const r={};for(const i of(0,y().uv)(n)){const e=o.getKeyStore(i).getValue(),t=n[i];v().n4(e,t)||(r[i]=t||null)}v().Im(r)||await new Promise(((e,n)=>{we().createAndCommit({userAction:"spaceActions.updateSpace",environment:t,canUndo:!0,perform:t=>{ve().zv({store:o,data:r,transaction:t}),t.postSubmitCallbacks.push((t=>{t?n(t):e()}))}})}))}async function Ee(e){const{environment:t,spaceStore:o,spaceBasicSettingsStore:n,securitySettingsStore:r}=e,{name:i,emailDomains:a}=n.state;await Promise.all([Re({environment:t,spaceStore:o,name:i,emailDomains:a}),r?be().V(t,{spaceStore:o,securitySettingsState:r.state}):Promise.resolve()])}function De(e){const{environment:t,transaction:o,spaceStore:n,disablePublicAccess:r,disableGuests:i,disableMoveToSpace:a,disableExport:s,disableSpacePageEdits:l,disablePublicAccessRequests:c,disableTeamCreation:d,disableMembershipRequests:u,disableExternalMembershipRequests:p,disableGuestMembershipRequests:m,enableAiFeature:g,disableTeamGuests:f,enableGuestInviteRequests:v,enableAiTraining:h,zeroRetentionEnabled:_,disableMemberUpgradeRequests:b}=e;ve().zv({store:n,data:{disable_public_access:r,disable_guests:i,disable_move_to_space:a,disable_export:s,disable_space_page_edits:l,disable_public_access_requests:c,settings:{...n.getSettings(),enable_ai_feature:g,disable_team_guests:f,enable_guest_invite_requests:v,enable_ai_training:h,...!1===h&&{is_assistant_experience_enabled:!1},zero_retention_enabled:_,disable_member_upgrade_requests:b},disable_team_creation:d},transaction:o}),we().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings","disable_membership_requests"],command:"set",args:u},transaction:o}),we().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings","disable_external_membership_requests"],command:"set",args:p},transaction:o}),we().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings","disable_guest_membership_requests"],command:"set",args:m},transaction:o}),we().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings","disable_member_upgrade_requests"],command:"set",args:b},transaction:o}),c&&oe().FX(t,{disable_public_access_requests:c})}function Ne(e){const{transaction:t,spaceStore:o,inviteLinkEnabled:n}=e;ve().zv({store:o,data:{invite_link_enabled:n},transaction:t})}async function Le(e){var t;const{environment:i,spaceId:a,userRootStore:s,navigate:l,analyticsFrom:c,userSettingsStore:d,redirectPageId:u,inviteCode:p,redirectSource:m,isOnboarding:g,isJoinableTrustedDomainViewer:v}=e,_=await Fe({userRootStore:s,spaceId:a,waitForLoad:!1});if(!_||v){const t=await ie().callApi({eventName:"addUsersToSpace",environment:i,data:{userIds:[s.id],spaceId:e.spaceId,inviteCode:p}});var b;if("failed"===t.type)switch(r().log({level:"error",from:"spaceActions",type:"addUsersToSpace",error:(0,h().n6)(t.error),data:{miscDataToConvertToString:{response:t}}}),null===(b=t.body)||void 0===b||null===(b=b.clientData)||void 0===b?void 0:b.type){case"unable_to_join_space":throw new Error(E().A.formatMessage(Ie.unableToJoinSpace));case"invite_link_disabled":throw f().A.remove(j().Zz),new Error(E().A.formatMessage(Ie.inviteLinkDisabled));default:throw t.error}}const y=_||await Fe({userRootStore:s,spaceId:a,waitForLoad:!1});if(!y)throw new Error(E().A.formatMessage(Ie.noSpaceViewOnJoin));await y.load();const S=y.getJoined();S||(we().createAndCommit({userAction:"spaceActions.joinSpace",environment:i,canUndo:!0,perform:e=>{!function(e){ve().zv({store:e.spaceViewStore,data:{joined:!0},transaction:e.transaction})}({spaceViewStore:y,transaction:e})}}),C().A.isAdminMode||(ie().callApi({eventName:"setSpaceNotificationsAsRead",environment:i,data:{timestamp:Date.now(),spaceId:a}}),re().gy(i,{from:m??c})),g||await async function(e){const{environment:t,spaceViewStore:n,userSettingsStore:r,userRootStore:i}=e,{onboardingActionsDependency:a}=await Promise.resolve().then(o.bind(o,935370)),{createOnboardingTemplatesActions:s}=await a.load(),l=s.getStarterTemplatesForSpace({environment:t,onboardingPlanType:"team",categories:[],isJoiner:!0,intl:E().A.getIntl()});await s.createTemplatePagesInSpace({environment:t,redirectData:{type:"getting_started_page"},spaceViewStore:n,isPrivate:!0,userSettingsStore:r,userRootStore:i,templatesToCreateInSpace:{pageTemplates:l},planType:"team",spaceJoinOrCreate:"join",useCases:[],userPersona:"other",isNewUserOnboarding:!1})}({environment:i,spaceViewStore:y,userSettingsStore:d,userRootStore:s}));if((null===(t=y.getSettings())||void 0===t?void 0:t.should_create_templates_for_mail_onboarding)&&await async function(e){const{environment:t,spaceViewStore:o,userSettingsStore:n,userRootStore:r}=e;Se().I$(t,o,!1);const{createOnboardingTemplatesActions:i}=await O().onboardingActionsDependency.load(),a=i.getStarterTemplatesForSpace({environment:t,onboardingPlanType:"personal",categories:[],isJoiner:!1,intl:E().A.getIntl()});await i.createTemplatePagesInSpace({environment:t,redirectData:{type:"getting_started_page"},spaceViewStore:o,isPrivate:!0,userSettingsStore:n,userRootStore:r,templatesToCreateInSpace:{pageTemplates:a},planType:"personal",spaceJoinOrCreate:"create",useCases:[],userPersona:"unfilled",isNewUserOnboarding:!0,teamStore:void 0})}({environment:i,spaceViewStore:y,userSettingsStore:d,userRootStore:s}),l&&await Me({environment:i,spaceViewStore:y,userSettingsStore:d,redirectPageId:u,userRootStore:s,pageVisitSource:n().y8.SwitchSpace,navigationType:_?"switchingToOrLoadingSpace":"joiningOrCreatingSpace"}),!_&&(G().default.setState({...G().default.state,currentSpaceStore:y.getSpaceStore(),currentSpaceViewStore:y}),ee().$D({environment:i,spaceId:a}).then((()=>{re().eR(i,{from:c})})),f().A.remove(j().Zz),i.device.isMobileNative&&r().log({level:"info",from:"spaceActions",type:"SpaceSwitchingDebug",data:{message:"spaceActions.joinSpace"}}),await ce().fD(i),!S)){const e=p?"shareable_link_join":"verified_domain_join";re().KX(i,{invite_origin:e,domainType:(0,P().FX)(),new_workspace_member_count:1,new_workspace_member_ids:[s.id]})}return{spaceViewStore:y}}async function Fe(e){const t=e.userRootStore.getSpaceViewStores();return e.waitForLoad&&await _().lX(t,10,(e=>e.load())),t.find((t=>t.getSpaceId()===e.spaceId))}async function Ue(e){const{environment:t,spaceId:o,userSettingsStore:r}=e,{currentUserRootStore:i,currentUserStore:a}=G().default.state;if(i&&a){const e=await ie().callApi({eventName:"removeUsersFromSpace",environment:t,data:{userIds:[a.id],spaceId:o,removePagePermissions:!0,revokeUserTokens:!1}});return"success"===e.type?(Pe({environment:t,userRootStore:i,ignoreSpaceId:o,userSettingsStore:r,leavingSpace:!0,pageVisitSource:n().y8.SwitchSpace}),!0):(se().Qg(e),!1)}}async function Oe(e){const{environment:t,spaceId:o,organizationId:n,onDelete:r}=e;pe().m({message:Ie.deletingWorkspace});try{const{value:e}=await(0,le().UT)(t,w,{spaceId:o,source:"user_initiated_deletion",organizationId:n}).next();if(e.error)throw e.error;await r()}finally{pe().V()}}function Ve(e){const{environment:t,blocks:o,transaction:n}=e,r=t.currentUser.id;if(r)for(const i of o){const e=i.getPermissionItems().filter((e=>(0,s().P3)(e)));ve().zv({store:i,data:{permissions:[...e,{type:"user_permission",role:"editor",user_id:r}]},transaction:n})}}function je(e){const{environment:t,blocks:o,transaction:n}=e;if(t.currentUser.id)for(const r of o){const e=r.getPermissionItems(),o=e.find((e=>"space_permission"===e.type)),i=e.filter((e=>(0,s().P3)(e)));o||ge().zP({environment:t,store:r,permissionItems:[...i,{type:"space_permission",role:"editor"}],transaction:n})}}function ze(e){const{blocks:t,transaction:o}=e;for(const n of t){const e=n.getPermissionItems().filter((e=>(0,s().P3)(e)));ve().zv({store:n,data:{permissions:e.length>0?e:null},transaction:o})}}function qe(e){const{spaceStore:t,transaction:o}=e;if(!t.isDefined())throw new Error(E().A.formatMessage(Ie.noLocalDataForPermissionGroup));const n=(0,a().JW)(),r=(0,U().E)({spaceStore:t,groupId:n});return we().applyOperation({store:r,operation:(0,g().ao)({spaceId:t.id,groupId:n}),transaction:o}),r}function He(e){const{transaction:t,spacePermissionGroupStore:o,value:n}=e;we().applyOperation({store:o,operation:{command:"update",pointer:o.pointer,path:[],args:{...n}},transaction:t})}function We(e){const{groupMemberStore:t,spaceId:o,groupId:n,userId:r,transaction:i}=e;we().applyOperation({store:t,operation:(0,g().Fu)({groupId:n,spaceId:o,userId:r}),transaction:i})}async function Ke(e){const{environment:t,groupStore:o,transaction:n}=e;await o.load();const r=o.getGroupId(),i=o.getSpaceId();i&&r&&(we().applyOperation({store:o,operation:{pointer:o.pointer,path:[],command:"update",args:{deleted_at:Date.now()}},transaction:n}),await ie().callApi({eventName:"transferPermissionGroup",environment:t,data:{spaceId:i,groupId:r}}))}function Ge(e){var t;const{environment:o,spaceStore:n,experimentId:i,source:a}=e,s={userId:o.currentUser.id,experimentId:i,source:a},l=n||G().default.state.currentSpaceStore;if(!l)throw r().log({level:"error",from:"spaceActions",type:"setStackRankingExperimentExposure",error:{message:"Couldn't find a SpaceStore."},data:{miscDataToConvertToString:s}}),new Error;if(!l.canEdit()||!l.canAdmin())return void r().log({level:"info",from:"spaceActions",type:"setStackRankingExperimentExposure",error:{message:"User does not have permission to edit space settings."},data:{miscDataToConvertToString:{...s,spaceId:l.id}}});const c=l.getSettings();if(!(null===(t=c.exposed_to_stackranking_experiment)||void 0===t?void 0:t[i]))try{we().createAndCommit({userAction:"spaceActions.setStackRankingExperimentExposure",environment:o,canUndo:!0,perform:e=>{e.logDebugMessage(`Setting stack ranking experiment exposure for space ${l.id} to ${i} from ${a}`),Je(l,e,{exposed_to_stackranking_experiment:{...c.exposed_to_stackranking_experiment,[i]:!0}})}})}catch(d){r().log({level:"error",from:"spaceActions",type:"setStackRankingExperimentExposure",error:{message:"Error setting stack ranking experiment exposure."},data:{miscDataToConvertToString:{...s,spaceId:l.id,error:d}}})}}function $e(e){const{userRootStore:t,spaceViewIds:o,transaction:n,spaceViewPointers:r}=e;ve().zv({store:t,data:{space_views:o,space_view_pointers:r},transaction:n})}function Ye(e){const{planType:t,spaceStore:o,transaction:n}=e;ve().zv({store:o,data:{plan_type:t},transaction:n})}function Qe(e,t,o){const n=o||G().default.state.currentSpaceStore;if(!n)throw r().log({level:"error",from:"spaceActions",type:"setSpaceSurveyData",error:{message:"Couldn't find a SpaceStore."}}),new Error;we().createAndCommit({userAction:"spaceActions.setSpaceSurveyData",environment:e,canUndo:!0,perform:e=>{Je(n,e,{space_survey_data:t})}})}function Ze(e,t){const o=t||G().default.state.currentSpaceStore;if(!o)throw r().log({level:"error",from:"spaceActions",type:"setHIPAACompliancyData",error:{message:"Couldn't find a SpaceStore."}}),new Error;const n=e.currentUser.id;if(!n)throw r().log({level:"error",from:"spaceActions",type:"setHIPAACompliancyData",error:{message:"No User"}}),new Error;const i={last_edited_time:Date.now(),last_edited_by_id:n};we().createAndCommit({userAction:"spaceActions.setHIPAACompliancyData",environment:e,canUndo:!0,perform:e=>{Je(o,e,{hipaa_compliancy_data:i})}})}function Xe(e){const t=e.getEditDomain();return t?`${window.location.host}/${t}`:null}function Je(e,t,o){we().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings"],command:"update",args:{...e.getSettings(),...o}},transaction:t})}},427155:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},429825:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{constructor(){super(...arguments),this.isSwipingStore=new(o(496506).default)((()=>this.state.swiping),{debugName:"SidebarMobileSwipeStore_isSwipingStore"})}getInitialState(){return{touching:!1,swiping:!1}}}const r=new n},430483:(e,t,o)=>{o.d(t,{hV:()=>l,rm:()=>s,ts:()=>a,zD:()=>c});o(898992),o(823215);var n=()=>o(534177),r=()=>o(508496);class i extends(()=>o(757695))().default{getInitialState(){return new(o(80586).C)({isInitialized:!1,getEligibleGroup:()=>"control",isAiEnabled:()=>!1,isZeroRetentionEnabled:()=>!1,getCanSearchWorkspaceWithCollectionIdFilter:()=>!1,getSearchBackend(){},checkGate:()=>!1,getSubscriptionTier(){},getIsAssistantSpaceSettingEnabled:()=>!1})}getIsInitialized(){return Boolean(this.state.getIsInitialized()&&r().default.isStatsigReady())}isAiEnabled(){return this.state.isAiEnabled()}isOffline(){return!o(227440).A.state.online}isEphemeralViewDatabaseQueryingEnabled(){return this.modeIsAtMost("assistant_0.3")}isDatabaseQueryingEnabled(){return this.state.isDatabaseQueryingEnabled()}isDatabaseScopedSearchEnabled(){return this.state.isDatabaseScopedSearchEnabled()}isQnATooltipsVisible(e,t){if(!t||!t.isReady())return!1;if(e.isMobile)return!1;if(this.isXMLAssistantEnabled())return!1;const o=t.getSettings();return!!o&&"tooltip"===o.ai_qna_intro_onboarding_phase}shouldDisableForMobileBrowser(e){return e.isMobileBrowser&&!this.modeIsNotControl()}shouldShowSearchMenuItemAskAI(e){return this.modeIsNotControl()}isAssistantThumbsUpDownFeedbackBarActionEnabled(e){return e&&this.modeIsNotControl()}showRemindersToUseQnA(){return this.state.showRemindersToUseQnA()}canSeeGoogleDriveUniversalQnaAnnouncementModal(){return this.state.canUseUniversalGoogleDriveSearchScope()}canSeeGithubAIConnectorAnnouncementModal(){return this.state.canUseUniversalGithubSearchScope()}isWorkspaceLeapEligible(e){return this.state.isWorkspaceLeapEligible(e)}shouldShowAttachmentImageButton(){return this.isAttachmentUploadEnabledForUser()&&r().default.checkGate({gateName:"attachment_show_ask_ai_in_images"})}disableWriterAutoFollow(){return this.state.disableWriterAutoFollow()}isSlackQnaNotificationEnabled(){return this.state.isSlackQnaNotificationEnabled()}shouldShowAnimatedAssistantFace(e){return e.isMobile&&!e.isIOS?this.modeIsAtMost("development"):this.modeIsNotControl()}canShowWebSearchScope(){return this.state.isWebSearchEnabledForUser()}canLoadWebPageURLs(){return this.state.isLoadingWebUrlsEnabledForUser()}shouldUseMarkdown(){return r().default.checkGate({gateName:"ai_assistant_markdown"})}isAssistantSummarizeThisPageEnabledForUser(){return this.state.isAssistantSummarizeThisPageEnabledForUser()}isAiBlockConfigurationMenuEnabledForUser(){return r().default.checkGate({gateName:"ai_template_filling_use_new_ai_blocks"})}isQnaAbandonedSearchReminderEnabledForUser(){if(!this.modeIsNotControl())return!1;const e=r().default.getConfigKey("qna_ai_reminders","abandonedSearchReminderProbability");return(0,o(745875).ox)(e)&&"on"===r().default.getEligibleGroup({experimentId:"qna_abandoned_search_reminders",defaultGroup:"unassigned"})}shouldShowAssistantBadge(){const e=this.getMode();switch(e){case"assistant_0.3":case"development":case"exploratory":return!0;case"control":case"assistant_0.25_with_marketing":return!1;default:(0,n().HB)(e)}return"control"!==e}getNamespace(){return this.state.getNamespace()}showAiSearchQueryRecommendationTreatment(e){const{disableExposureLogging:t}=e;t||r().default.manuallyLogExperimentExposure("ai_search_query_expansion");const o=r().default.getEligibleGroup({experimentId:"ai_search_query_expansion",disableExposureLogging:t});return o||"control"}getNavigationTargetForTryAssistantNowButton(){const e=r().default.getEligibleGroup({experimentId:"025m_ai_launch_entrypoints",defaultGroup:"control"});return void 0===e?"fullPage":"corner"===e?"corner":"writer"===e?"writer":"control"===e?"fullPage":void(0,n().HB)(e)}showSearchDebugTools(){return this.modeIsAtMost("development")}canUseAssistantDebugTools(){return r().default.checkGate({gateName:"run_assistant_allow_dev_only_args"})}isResearchModeUnifiedFindEnabled(){return r().default.checkGate({gateName:"ai_research_mode_unified_find"})}isResearchModeWelcomePageAiEnabled(){return r().default.checkGate({gateName:"ai_research_mode_welcome_page_ai"})}isResearchModeWebSearchEnabled(){return r().default.checkGate({gateName:"ai_research_mode_web_search"})}isResearchModeMultiturnEnabled(){return r().default.checkGate({gateName:"ai_research_mode_multiturn"})}showsLimitedQnaLabel(){return"control"!==r().default.getEligibleGroup({experimentId:"qna_vectorless_enabled",defaultGroup:"control"})&&r().default.checkGate({gateName:"show_limited_qna_label"})&&this.isLimitedQnaMode()}isLimitedQnaMode(){return"limited_qna"===this.state.getSearchBackend()}isParameterizationAndEmptyStateEnabled(){return this.modeIsNotControl()}isRichTextMenuSuggestionEnabled(){return this.isAssistantInWriterEnabled()}isBottomBarSuggestionsEnabled(){return this.isAssistantInWriterEnabled()}isFullPageTranslateEnabled(){return this.state.isFullPageTranslateEnabled()}shouldRouteToWriterOrPlansAfterSignup(){return"control"===r().default.getEligibleGroup({experimentId:"ai_signup_redirect_to_writer",defaultGroup:"control"})?"plans":"writer"}areAiActionsOnPasteEnabled(){return this.state.areAiActionsOnPasteEnabled()}isReplaceSelectionEnabled(){return this.state.isReplaceSelectionEnabled()}isMoveToCornerEnabled(){return this.state.isMoveToCornerEnabled()}canShowUniversalSearchScopes(){return this.state.canUseUniversalSearchScopes()}isGoogleDriveQnaEnabled(){return this.state.isGoogleDriveQnaEnabled()}isJiraQnaEnabled(){return this.state.canUseUniversalJiraSearchScope()}isMicrosoftTeamsQnaEnabled(){return this.state.canUseUniversalMicrosoftTeamsSearchScope()}canUseUniversalSlackSearchScope(){return this.state.canUseUniversalSlackSearchScope()}canUseUniversalGoogleDriveSearchScope(){return this.state.canUseUniversalGoogleDriveSearchScope()}canUseUniversalGithubSearchScope(){return this.state.canUseUniversalGithubSearchScope()}canUseUniversalJiraSearchScope(){return this.state.canUseUniversalJiraSearchScope()}canUseUniversalMicrosoftTeamsSearchScope(){return this.state.canUseUniversalMicrosoftTeamsSearchScope()}getCollectionViewEntrypointVariant(e){let{device:t}=e;if(t.isMobile)return"none";if(!this.isAiEnabled())return"none";if(this.modeIsAtMost("assistant_0.3")){const e=r().default.getEligibleGroup({experimentId:"ai_collection_view_entrypoint"});return"button"===e||"search_input"===e?e:"none"}return"none"}isNewFullPageWelcomeStateEnabled(){return r().default.checkGate({gateName:"ai_full_page_welcome_state"})}isNewCornerChatWelcomeStateEnabled(e){return e.canShowNewCornerChatWelcomeState&&r().default.checkGate({gateName:"ai_corner_chat_welcome_state"})}isNewLargerInputActive(e){return this.isNewCornerChatWelcomeStateEnabled(e)||e.canShowNewFullPageWelcomeState&&this.isNewFullPageWelcomeStateEnabled()}isNewWriterInputDesignEnabled(e){return e.canShowNewWriterDesign&&r().default.checkGate({gateName:"ai_yassified_writer"})}getUnfurlingMenuAiActionSectionVariant(e){let{device:t,slackUniversalQnAConnectionStoreState:o}=e;return r().default.checkGate({gateName:"ai_slack_connector_option_on_paste"})?this.isConnectedToSlackUniversalQnA(o)?"feature":this.canShowUniversalSearchScopes()?t.isMobile?"hidden":o.inProgress?"modal_in_progress":"modal_onboarding":"hidden":"hidden"}isAudienceForAiConnectorSprigSurvey(e){const{hasAiAddOn:t,isSpaceAdmin:o,isMultiplayerWorkspace:n,qnaConnectionStoreStates:r}=e,{slackUniversalQnAConnectionStoreState:i,githubAIConnectorStoreState:a,jiraAIConnectionStoreState:s}=r,l=[this.notYetConnectedToSlackUniversalQnA(i),this.notYetConnectedToGoogleDriveUniversalQnA(i),this.notYetConnectedToGithubUniversalQnA(a),this.notYetConnectedToJiraUniversalQnA(s)].every(Boolean);return t&&o&&n&&l&&this.state.canUseUniversalSearchScopes()}isConnectedToSlackUniversalQnA(e){const{connectedApps:t,inProgress:o}=e;return this.canShowUniversalSearchScopes()&&Boolean(null==t?void 0:t.includes("slack-admin"))&&!o}notYetConnectedToSlackUniversalQnA(e){const{connectedApps:t}=e;return!Boolean(null==t?void 0:t.includes("slack-admin"))}isConnectedToGoogleDriveUniversalQnA(e){const{connectedApps:t}=e;return this.canUseUniversalGoogleDriveSearchScope()&&Boolean(null==t?void 0:t.includes("google-drive"))}notYetConnectedToGoogleDriveUniversalQnA(e){const{connectedApps:t}=e;return!Boolean(null==t?void 0:t.includes("google-drive"))}isConnectedToGithubUniversalQnA(e){const{isConnected:t,isPersonalAuthComplete:o,isDisconnecting:n}=e;return this.canUseUniversalGithubSearchScope()&&t&&o&&!n}notYetConnectedToGithubUniversalQnA(e){const{isConnected:t,isDisconnecting:o}=e;return!t&&!o}isConnectedToJiraUniversalQnA(e){const{jiraSyncState:t}=e;return this.canUseUniversalJiraSearchScope()&&"completed"===t}isConnectedToMicrosoftTeamsUniversalQnA(e){const{connectionStatus:t}=e;return this.canUseUniversalMicrosoftTeamsSearchScope()&&"completed"===t}notYetConnectedToJiraUniversalQnA(e){const{jiraSyncState:t}=e;return"not_started"===t}isDeepFindQueryGenEnabled(){return this.state.isDeepFindQueryGenEnabled()}isDeepFindUniversalBlendingEnabled(){return this.state.isDeepFindUniversalBlendingEnabled()}canShowHelpdocsScope(){return r().default.checkGate({gateName:"ai_assistant_helpdocs_scoped_search"})}sessionStartersEnabledInChat(){return!1}canEditAssistantWriterFavorite(){return this.modeIsNotControl()}canSeeExploratoryAiReportsUi(){return this.modeIsAtMost("exploratory")}isDeepFindEnabled(){return this.state.isDeepFindEnabled()}isQuickFindEnabled(){return this.state.isQuickFindEnabled()}isUnifiedFindDebugToolsEnabled(){return this.state.isUnifiedFindDebugToolsEnabled()}getUnifiedFindMode(){return this.state.getUnifiedFindMode()}isAttachmentUploadEnabledForUser(){return this.modeIsNotControl()&&r().default.checkGate({gateName:"assistant_enable_attachment_upload"})}isFullPageAssistantChatEnabled(e){return this.modeIsNotControl()&&!e.isMobile}isFullPageAssistantInStartOptions(){return this.modeIsNotControl()}isAssistantInWriterEnabled(){return this.modeIsNotControl()}isXMLAssistantEnabled(){return this.state.isXMLAssistantEnabled()}isInPageFindQnaOptionEnabledForUser(){return this.modeIsNotControl()}shouldEnablePageTitleDiffs(e){return this.modeIsNotControl()&&!e.isMobile}shouldShowAssistantFace(){return this.modeIsNotControl()}showAssistantNotionAiCopy(){return this.isXMLAssistantEnabled()}canSeeAssistantFeaturePromotionalModal(){return this.modeIsNotControl()}isShowingQNAOnMobile(){return this.modeIsNotControl()}showSearchAiFeatures(){return this.modeIsNotControl()}isShowingAssistantInsteadOfHelpCenterInBottomRight(){return this.modeIsNotControl()}shouldShowAssistantInCorner(e){return!(e.isMobileNative&&e.isPhone)&&this.modeIsNotControl()}isQnaRightSideDeeplinkEnabled(){return this.modeIsNotControl()}getMode(){return this.state.getMode()}isMode(e){return this.state.isMode(e)}modeIsAtMost(e){return this.state.modeIsAtMost(e)}modeIsNotControl(){return this.state.modeIsNotControl()}}const a=new(o(496506).default)((()=>c.shouldShowAssistantFace()),{debugName:"ShouldShowAssistantFaceStore"});function s(){return r().default.checkGate({gateName:"compute_related_content"})}function l(){return r().default.checkGate({gateName:"ai_co_editing"})}const c=new i;(0,o(604341).exposeDebugValue)("AssistantFeatureGateStore",c)},431404:(e,t,o)=>{o.d(t,{Q:()=>n});const n=(0,o(959013).YK)({abstractTitle:{id:"newBlock.abstract.title",defaultMessage:"Abstract"},audioTitle:{id:"newBlock.audio.title",defaultMessage:"Audio"},bookmarkTitle:{id:"newBlock.bookmark.title",defaultMessage:"Web bookmark"},breadcrumbTitle:{id:"newBlock.breadcrumb.title",defaultMessage:"Breadcrumb"},bulletedListTitle:{id:"newBlock.bulletedList.title",defaultMessage:"Bulleted list"},buttonTitle:{id:"newBlock.button.title",defaultMessage:"Button"},calloutTitle:{id:"newBlock.callout.title",defaultMessage:"Callout"},codeTitle:{id:"newBlock.code.title",defaultMessage:"Code"},codepenTitle:{id:"newBlock.codepen.title",defaultMessage:"CodePen"},columnListTitle:{id:"newBlock.columnList.title",defaultMessage:"Columns"},databaseTitle:{id:"newBlock.database.title",defaultMessage:"Database"},deepnoteTitle:{id:"newBlock.deepnote.title",defaultMessage:"Deepnote"},dividerTitle:{id:"newBlock.divider.title",defaultMessage:"Divider"},drawingTitle:{id:"newBlock.drawing.title",defaultMessage:"Drawing"},driveTitle:{id:"newBlock.drive.title",defaultMessage:"Google Drive"},embedTitle:{id:"newBlock.embed.title",defaultMessage:"Embed"},encryptedTextTitle:{id:"newBlock.encryptedText.title",defaultMessage:"Encrypted Text"},equationTitle:{id:"newBlock.equation.title",defaultMessage:"Block equation"},excalidrawTitle:{id:"newBlock.excalidraw.title",defaultMessage:"Excalidraw"},factoryTitle:{id:"newBlock.factory.title",defaultMessage:"Template button"},fileTitle:{id:"newBlock.file.title",defaultMessage:"File"},figmaTitle:{id:"newBlock.figma.title",defaultMessage:"Figma"},framerTitle:{id:"newBlock.framer.title",defaultMessage:"Framer"},gistTitle:{id:"newBlock.gist.title",defaultMessage:"GitHub Gist"},headerTitle:{id:"newBlock.header.title",defaultMessage:"Heading 1"},hexTitle:{id:"newBlock.hex.title",defaultMessage:"Hex"},imageTitle:{id:"newBlock.image.title",defaultMessage:"Image"},invisionTitle:{id:"newBlock.invision.title",defaultMessage:"Invision"},linkToPageTitle:{id:"newBlock.linkToPage.title",defaultMessage:"Link to page"},loomTitle:{id:"newBlock.loom.title",defaultMessage:"Loom"},mapsTitle:{id:"newBlock.maps.title",defaultMessage:"Google Maps"},miroTitle:{id:"newBlock.miro.title",defaultMessage:"Miro"},mixpanelTitle:{id:"newBlock.mixpanel.title",defaultMessage:"Mixpanel"},numberedListTitle:{id:"newBlock.numberedList.title",defaultMessage:"Numbered list"},pageTitle:{id:"newBlock.page.title",defaultMessage:"Page"},pdfTitle:{id:"newBlock.pdf.title",defaultMessage:"PDF"},quoteTitle:{id:"newBlock.quote.title",defaultMessage:"Quote"},replitTitle:{id:"newBlock.replit.title",defaultMessage:"Replit"},simpleTableTitle:{id:"newBlock.simple_table.title",defaultMessage:"Table"},slideTitle:{id:"newBlock.slide.title",defaultMessage:"Slide"},sketchTitle:{id:"newBlock.sketch.title",defaultMessage:"Sketch"},subHeaderTitle:{id:"newBlock.subHeader.title",defaultMessage:"Heading 2"},subSubHeaderTitle:{id:"newBlock.subSubHeader.title",defaultMessage:"Heading 3"},tabTitle:{id:"newBlock.tab.title",defaultMessage:"Tabs"},tableOfContentsTitle:{id:"newBlock.tableOfContents.title",defaultMessage:"Table of contents"},textTitle:{id:"newBlock.text.title",defaultMessage:"Text"},toDoTitle:{id:"newBlock.toDo.title",defaultMessage:"To-do list"},toggleTitle:{id:"newBlock.toggle.title",defaultMessage:"Toggle list"},transcriptionTitle:{id:"newBlock.transcription.title",defaultMessage:"Transcription"},transclusionContainerTitle:{id:"newBlock.transclusionContainer.title",defaultMessage:"Synced block"},tweetTitle:{id:"newBlock.tweet.title",defaultMessage:"Tweet"},typeformTitle:{id:"newBlock.typeform.title",defaultMessage:"Typeform"},videoTitle:{id:"newBlock.video.title",defaultMessage:"Video"},whimsicalTitle:{id:"newBlock.whimsical.title",defaultMessage:"Whimsical"}})},431481:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{cache:{}}}getBlockIdForSlug(e){return this.state.cache[e]}setBlockIdForSlug(e,t){this.state.cache[e]||this.setState({cache:{...this.state.cache,[e]:t}})}}const r=new n},433052:(e,t,o)=>{o.d(t,{Aj:()=>_,fm:()=>h,uv:()=>g,v4:()=>f,wA:()=>v});var n=()=>o(120739),r=()=>o(861017),i=()=>o(179034),a=()=>o(994310),s=()=>o(780054),l=()=>o(492414),c=()=>o(731320),d=()=>o(630116);const u="lastVisitedRoute",p="lastVisitedRouteUserId",m="lastVisitedRouteSpaceId";function g(e,t){const o=r().parseRoute({url:window.location.href,isMobile:e.device.isMobile,baseUrl:s().A.domainBaseUrl,publicDomainName:s().A.publicDomainName,protocol:s().A.protocol,currentUrl:window.location.href}),{route:n,userId:a}=b();("root"===o.name||"workflowTemplates"===o.name||"new"===o.name||"nativeTab"===o.name)&&n&&"page"===n.name&&n.blockId&&a===t&&new(d().Bv)(e,{table:i().ev,id:n.blockId,spaceId:n.spaceId}).load()}function f(e){const{route:t,userId:o}=b();if("page"===(null==t?void 0:t.name)&&t.blockId){return{url:(0,l().Ay)({fullyQualified:!1,store:new(d().Bv)(e,{table:i().ev,id:t.blockId,spaceId:t.spaceId},{userId:o}),scrollToBlockId:t.scrollToBlockId,peekViewBlockId:t.peekViewBlockId,peekMode:t.peekMode,collectionViewId:t.collectionViewId,templateGalleryItem:t.templateGalleryItem,projectManagementLaunch:t.projectManagementLaunch,discussionId:void 0,pageVisitSource:void 0}),userId:o}}if("team"===(null==t?void 0:t.name))return{url:(0,n().a)({teamId:t.teamId}),userId:o};if("space"===(null==t?void 0:t.name)){return{url:(0,r().p0)({route:t}),userId:o}}return{}}async function v(e){const{route:t,userId:o}=b();let a,s;if(t)if("page"===t.name&&t.blockId){const n=new(d().Bv)(e,{table:i().ev,id:t.blockId,spaceId:t.spaceId},{userId:o});await n.load();c().qb(e,n)?(s=t.spaceId??n.getSpaceId(),a=s?r().nX(s):void 0):(a=(0,l().Ay)({fullyQualified:!1,store:n,scrollToBlockId:t.scrollToBlockId,peekViewBlockId:t.peekViewBlockId,peekMode:t.peekMode,collectionViewId:t.collectionViewId,templateGalleryItem:t.templateGalleryItem,projectManagementLaunch:t.projectManagementLaunch,discussionId:void 0,pageVisitSource:void 0}),s=n.getSpaceId())}else"space"===t.name?(s=t.spaceId,a=(0,r().p0)({route:t})):"nativeTab"===t.name?s=t.spaceId:"team"===t.name&&(a=(0,n().a)({teamId:t.teamId}));return{url:a,userId:o,route:t,spaceId:s}}function h(e){const{route:t,userId:o,spaceId:n}=e;a().A.set(u,t),a().A.set(p,o),a().A.set(m,n)}function _(){a().A.remove(u),a().A.remove(p),a().A.remove(m)}function b(){return{route:a().A.get(u),userId:a().A.get(p),spaceId:a().A.get(m)}}},434663:(e,t,o)=>{o.d(t,{r:()=>c});o(296540);var n=()=>o(484714),r=()=>o(84817),i=()=>o(460292),a=()=>o(125565),s=()=>o(297590),l=o(474848);function c(e){const{children:t,iconGroup:o,overrideSize:c,errorId:d,direction:u}=e,p=(0,n().v3)();return(0,l.jsxs)(r().Y1,{style:{cursor:"default",...e.style},direction:u,align:"horizontal"===u?"center-left":"center",gap:"horizontal"===u?10:5,children:[(0,l.jsx)(i().Q,{iconGroup:o,variantName:"default",colorName:"secondary",overrideSize:c}),(0,l.jsx)(a().A,{isInline:!0,isMobile:p.device.isMobile,isSecondaryColor:!0,showTooltipWhenTruncated:!0,children:(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"horizontal"===u?"row":"column",alignItems:"center",gap:"horizontal"===u?6:2,fontWeight:"initial"},children:[t,d&&["dev","local"].includes("production")&&(0,l.jsx)(s().L,{errorId:d,showLink:!0})]})})]})}},435009:(e,t,o)=>{o.d(t,{Mu:()=>re,VP:()=>ae,Vl:()=>ue,_r:()=>ce,aX:()=>se,eG:()=>ie,kc:()=>oe,navigateOnBaseUrl:()=>ee,oo:()=>te,qf:()=>ne,sY:()=>le,up:()=>de});o(16280),o(898992),o(672577),o(814603),o(147566),o(198721);var n=()=>o(908006),r=()=>o(110750),i=()=>o(584262),a=()=>o(386164),s=()=>o(861017),l=()=>o(427704),c=()=>o(179034),d=()=>o(496603),u=()=>o(183558),p=()=>o(502492),m=()=>o(534177),g=()=>o(939768),f=()=>o(449506),v=()=>o(681445),h=()=>o(405981),_=()=>o(116008),b=()=>o(780054),y=()=>o(989423),S=()=>o(108944),w=()=>o(836251),k=()=>o(449476),I=()=>o(406792),A=()=>o(695625),x=()=>o(869562),C=()=>o(644914),T=()=>o(749687),M=()=>o(737230),P=()=>o(155959),B=()=>o(351360),R=()=>o(77246),E=()=>o(948914),D=()=>o(982254),N=()=>o(977390),L=()=>o(712505),F=()=>o(630116),U=()=>o(543491),O=()=>o(452939),V=()=>o(222917),j=()=>o(502626),z=()=>o(705540),q=()=>o(622232),H=()=>o(910302),W=()=>o(433052),K=()=>o(255460),G=()=>o(426116),$=()=>o(857783),Y=()=>o(755636),Q=()=>o(5705),Z=()=>o(877688),X=()=>o(537941);const J=[`${i().y8.MentionInPage}`,`${i().y8.LinkInPage}`,`${i().y8.PeekOpen}`,`${i().y8.Expand}`,`${i().y8.Duplicate}`,`${i().y8.Move}`,`${i().y8.PageTableOfContents}`];function ee(e){const t=function(e,t){try{const o=e.startsWith("/")?new URL(e,b().A.domainBaseUrl):new URL(e);if(t)for(const[e,n]of Object.entries(t))o.searchParams.append(e,n);return o.pathname+o.search+o.hash}catch{throw new Error(`${e} is neither a URL nor an absolute path`)}}(e.url,e.extraSearchParams);if(!e.openInNewTab)return te({...e,url:`${b().A.domainBaseUrl}${t}`});window.open(`${b().A.domainBaseUrl}${t}`,"_blank")}function te(e){var t,n,r;const{environment:l,openInNew:d,frontPreserveScrollPosition:y,callback:S}=e,{RouterStore:A,currentUser:P}=l,q=P.id,{savedSidebarExpandedStoreState:W}=L().default.state;W&&T().sidebarExpandedStore.setState(!0),k().A.setState({isOpen:!1});const K=A.state.route,G=s().parseRoute({url:e.url,baseUrl:b().A.domainBaseUrl,publicDomainName:b().A.publicDomainName,isMobile:l.device.isMobile,protocol:b().A.protocol,currentUrl:window.location.href}),$=e.queryId??("page"===G.name&&G.queryId),{redirect:X,updateMobileTabbedRouterArgs:ee}=function(e,t){var o;const n={redirect:e.redirect,updateMobileTabbedRouterArgs:e.updateMobileTabbedRouterArgs};if(!w().Al(e.environment))return n;"login"!==t.name&&"logout"!==t.name&&"onboarding"!==t.name||(n.redirect=!0,n.updateMobileTabbedRouterArgs={...n.updateMobileTabbedRouterArgs,clearNativeRootPageOverride:!0});(null===(o=e.updateMobileTabbedRouterArgs)||void 0===o||!o.tabbedRouterStateAlreadyUpdated)&&(e.environment.TabbedRouterStore.state.modal??[]).length>0&&(n.redirect=!0,n.updateMobileTabbedRouterArgs={...n.updateMobileTabbedRouterArgs,clearNativeRootPageOverride:!0});return n}(e,G),te=g().bk(window.location.href),oe=g().bk(e.url),re=Boolean((null==oe?void 0:oe.hostname)&&(oe.hostname!==(null==te?void 0:te.hostname)||(null==te?void 0:te.port)&&oe.port!==te.port));if("external"===G.name||re)return void Y().f({environment:l,url:e.url,targetSelf:re&&!d});const ie=p().kb({schemeUrl:e.url,baseUrl:b().A.domainBaseUrl}),ae=g().ZO(e.url);let se=!1,le=e.makeTabActive;const ce=D().A.state.currentTab.isPinned,de=null===(t=E().A.state.preferences)||void 0===t?void 0:t.isPinnedTabNewTabEnabled;if(!d&&de&&ce&&s().WZ(K)&&("page"===G.name||"chat"===G.name||"team"===G.name)){var ue;const e="page"===K.name&&"page"===G.name&&K.blockId===G.blockId,t=Boolean(G.peekViewBlockId),o=Boolean(K.peekViewBlockId&&("chat"===G.name||"team"===G.name||(null===(ue=B().default.state.mainEditorCurrentBlockStore)||void 0===ue?void 0:ue.id)===G.blockId)&&!t);e||t||o||(se=!0,le=!0)}if("tab"===d||se){if(!l.device.isElectron||"page"!==G.name&&"chat"!==G.name&&"marketplace"!==G.name&&"team"!==G.name)Y().f({environment:l,url:ie});else{const e="pageVisitSource"in G?G.pageVisitSource:void 0;z().openInNewTabAfterFlush(l,{url:ae,position:"after-children",makeTabActive:le,isNewPage:e===`${i().y8.Create}`})}return}if("window"===d&&l.device.isElectron&&("page"===G.name||"chat"===G.name||"marketplace"===G.name||"team"===G.name))return void z().openInNewWindow(ae);if("quickSearch"===K.name&&l.device.isElectron&&"chat"!==G.name)return void z().openQuickSearchResult(ae);const pe="page"===K.name&&"page"===G.name&&K.blockId===G.blockId,me="page"===K.name&&"page"===G.name&&K.spaceDomain!==G.spaceDomain&&(K.requestedOnPublicDomain||G.requestedOnPublicDomain),ge=l.AppUpdateStore.state.appUpdate;if(!pe&&!e.redirect&&j().JM(l,ge))return void j().JG({environment:l,url:ae,version:ge.version,versionCreatedTime:ge.versionCreatedTime});if(_().A.isComposingNewDiscussion()){const e=_().A.state,t=e.open&&"comment"===e.content&&e.discussionInputStore||void 0;if(t)return void(async()=>{const{commentsDependency:e}=await Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(3560),o.e(37125)]).then(o.bind(o,774733)),{discussionHelpers:n}=await e.load();(0,h().HR)({discussionInputStore:t,environment:l,discussionHelpers:n,reason:"navigating_away"})})()}if(X||pe||(Q().zd({historyId:A.state.id,currentUserId:q}),"page"===K.name&&B().default.state.mainEditorCurrentBlockStore&&R().Uv.isBlockModeInTranslation(B().default.state.mainEditorCurrentBlockStore.id)&&H().DL({environment:l,pageStore:B().default.state.mainEditorCurrentBlockStore,triggeredFrom:"navigation"}),(0,C().Nk)(l)&&(x().setUpdateExpand({environment:l,isExpanded:!1,from:"close_for_space",saveDetailsSidebarPreference:!1}),M().Ay.update((e=>({...e,canRender:!1})))),v().S.state.isOpen&&v().S.setState({isOpen:!1})),Q().b$(l),me)return void Y().f({environment:l,url:e.url,targetSelf:!0});const fe=(0,u().Ay)();X?window.history.replaceState({id:fe,currentUserId:l.currentUser.id},void 0,ae):window.history.pushState({id:fe,currentUserId:l.currentUser.id},void 0,ae);const ve=Q().f0({historyId:A.state.id,currentUserId:q});if(Q().ke({historyId:fe,historyIndex:X?ve:ve+1,currentUserId:q}),"pageVisitSource"in G&&(0,m().Xk)(J,G.pageVisitSource)&&O().R1(l,K,G),!pe&&"page"===K.name&&U().A.state&&(null===(n=U().A.state)||void 0===n?void 0:n.pageId)===K.blockId&&V().vl(l,U().A.state),l.device.isElectron&&D().A.update((e=>({...e,unauthorizedIframeUrls:[]}))),Z().Yw({environment:l,id:fe,action:X?"replace":"push",href:ae,updateMobileTabbedRouterArgs:ee}).then((()=>{"page"===G.name&&G.blockId&&!pe&&$?U().A.setState({queryId:$,pageId:G.blockId,timeEntered:new Date}):U().A.reset()})).then((()=>{S&&S()})),"nativeTab"===G.name&&"assistant"===G.tab){const{currentSpaceStore:e}=B().default.state;e&&f().callApi({eventName:"warmVectorDBCache",environment:l,data:{spaceId:e.id},headers:(0,a().WS)({spaceId:e.id})})}if(pe||"nativeTab"===K.name&&"page"===G.name&&(null===(r=B().default.state.mainEditorCurrentBlockStore)||void 0===r?void 0:r.id)===G.blockId||"chat"===K.name&&"chat"===G.name){const e="chat"===G.name&&G.peekViewBlockId&&B().default.state.currentSpaceStore?F().Bv.createChildStore(B().default.state.currentSpaceStore,{table:c().ev,id:G.peekViewBlockId}):void 0;ne(l,e)}!y&&window.scrollTo(0,0),N().A.update((e=>({...e,isMeasuring:!0}))),I().default.DO_NOT_USE_markLegacy("initial_page_render_after_login")}function oe(e){te({environment:e,url:l().JZ.onboarding})}async function ne(e,t){const{RouterStore:o}=e,r=B().default.state.mainEditorCurrentBlockStore??t;if(r&&("page"===o.state.route.name||"chat"===o.state.route.name)){if(o.state.route.scrollToBlockId){const e=[o.state.route.scrollToBlockId];0===d().oE(A().T.findSelectablesFromIds(e)).length&&(await K().NH(r,e),await n().default.afterNextFlush())}q().$(e,{animateScrollToBlocks:!0})}}function re(e){var t;const{environment:o,url:n}=e;if(!w().Al(o))return;const{TabbedRouterStore:i}=o,a=(0,r().Xz)(i.state);if("web"!==a.type)return;const l=s().parseRoute({url:n,baseUrl:b().A.domainBaseUrl,publicDomainName:b().A.publicDomainName,isMobile:o.device.isMobile,protocol:b().A.protocol,currentUrl:window.location.href}),c=(null===(t=a.redirectedTo)||void 0===t?void 0:t.route)??a.route;if(l.name!==c.name)return;const d=g().ZO(e.url);a.redirectedTo?(a.redirectedTo.route=l,a.redirectedTo.url=d):(a.route=l,a.url=d)}async function ie(e){const{environment:t,url:o,callbackType:n}=e,r=g().ZO(o);if(t.device.isNative)te({url:r,environment:t});else{const e="nativemailredirect"===n,o="nativecalendarredirect"===n,i=e||o,a=i?`${b().A.domainBaseUrl}${r}`:r,s=e?b().A.mail.protocol:o?b().A.calendar.desktopProtocol:b().A.protocol;window.location.href=g().O$(p().$J({httpUrl:a,protocol:s,includePort:i}),{di:await(0,y().TZ)(t)})}}async function ae(e){const{environment:t,blocks:o}=e,{mainEditorCurrentBlockStore:n,currentSpaceViewStore:r,currentUserSettingsStore:a,currentUserRootStore:s}=B().default.state,l=n&&o.find((e=>e.id===n.id));if(l&&r){const e=S().Nq(l,1);(0,P().T)("supportsNativeHome")?w().UL(t)?se(t):X().navigateToHomeTab(t):e?$().uK({environment:t,store:e,pageVisitSource:i().y8.LeaveOrRemove}):await G().tR({environment:t,spaceViewStore:r,userSettingsStore:a,userRootStore:s,pageVisitSource:i().y8.LeaveOrRemove,navigationType:"switchingToOrLoadingSpace"})}Boolean(o.find((e=>{var t;return e.id===(null===(t=L().default.peekTargetStore.state)||void 0===t?void 0:t.id)})))&&n&&$().uK({environment:t,store:n,pageVisitSource:i().y8.LeaveOrRemove})}function se(e){w().Al(e)?function(e){const{TabbedRouterStore:t}=e,o=t.state,n=(0,r().XB)(o);if(!n)return;const i=n.type;"native"===i?t.updateWithNativePage({page:n,clearPages:!1,navigationAction:"pop",navigationSource:"mobile-back-navigation"}):"web"===i?window.history.back():(0,m().HB)(i)}(e):window.history.back()}function le(){window.history.forward()}function ce(){const e=B().default.state.mainEditorCurrentBlockStore;return!!e&&!!S().Nq(e,1)}function de(e){const t=B().default.state.mainEditorCurrentBlockStore;if(!t)return;const o=S().Nq(t,1);o&&$().uK({environment:e,store:F().Bv.createChildStore(o,o.pointer),pageVisitSource:i().y8.Breadcrumb})}function ue(e){const{url:t}=W().v4(e);te({url:t||l().JZ.root,environment:e})}},435345:(e,t,o)=>{o.d(t,{w:()=>n});const n=(0,o(583835).Dv)("duplicateBlock")},436371:(e,t,o)=>{function n(e){const{collectionContextStore:t}=e,{localResultStore:o,remoteRequestStore:n,remoteRequestStoreCallback:r,localResultStoreCallback:i}=t;r&&n.removeListener(r),i&&o.removeListener(i),t.infiniteScrollLongTaskObserver.disconnect()}o.d(t,{u:()=>n})},436572:(e,t,o)=>{o.d(t,{AC:()=>p,D6:()=>s,Kp:()=>d,N2:()=>l,Sy:()=>m,rL:()=>c,yq:()=>u});o(296540);var n=()=>o(183558),r=()=>o(104012),i=()=>o(666429),a=o(474848);function s(e){const t={...e,key:(0,n().Ay)()};i().Ay.setState({...i().Ay.state,currentItem:t}),"keep"!==t.durationMs&&setTimeout((()=>{i().Ay.state.currentItem===t&&"keep"!==i().Ay.state.currentItem.durationMs&&i().Ay.setState({...i().Ay.state,currentItem:void 0,shouldReset:!0})}),t.durationMs??i().ey)}function l(){i().Ay.setState({...i().Ay.state,currentItem:void 0})}function c(e){const{item:t,undoFunc:o}=e;s({...t,right:(0,a.jsx)(r().q6,{onUndo:o})})}function d(e){const{item:t}=e;s({...t,right:(0,a.jsx)(r().kP,{})})}function u(e){const{item:t}=e;s({...t,right:(0,a.jsx)(r().J$,{})})}function p(e){const{blockToOpenStore:t,item:o,performUndo:n,onOpenBlock:i}=e;s({...o,right:(0,a.jsx)(r().MZ,{blockToOpenStore:t,performUndo:n,onOpenBlock:i})})}function m(){i().Ay.state.shouldReset&&i().Ay.reset()}},436696:(e,t,o)=>{o.d(t,{X:()=>a});o(898992),o(672577);var n=()=>o(476492),r=()=>o(755022),i=()=>o(504066);function a(e){var t;const{environment:o,collectionContextStore:a,action:s,original_view_type:l,new_view_type:c,new_view_id:d,property_type:u,new_date_shift_mode:p,new_avoid_weekends:m,charts_analytics_context:g}=e,f=(0,n().sl)(a);if(!f||!f.view_type)return;const v=null==a||null===(t=a.collectionViewBlockStore())||void 0===t||null===(t=t.getCollectionViewStores())||void 0===t?void 0:t.find((e=>e.id===d)),h=null==v?void 0:v.getCollectionSource(),_="typed"===(null==h?void 0:h.type)?h.databaseType:void 0;(0,r().D)(o,{action:s,...f,view_type:f.view_type,original_view_type:l,new_view_type:c,new_view_id:d,new_database_type:_,property_type:u,new_date_shift_mode:p,new_avoid_weekends:m,charts_analytics_context:g}),(0,i().f)({action:s,from:"view_settings",property_type:u})}},436725:(e,t,o)=>{o.d(t,{e:()=>u});o(16280);var n=()=>o(134025),r=()=>o(179034),i=()=>o(439180),a=()=>o(496603),s=()=>o(246826),l=()=>o(606952),c=()=>o(317909),d=()=>o(630116);function u(e){const{environment:t,operation:o,transaction:u,inMemoryRecordCache:p}=e;if(o.pointer.table!==r().ev)throw new Error("Expected block operation");const m=new(d().Bv)(t,o.pointer,{inMemoryRecordCache:p});(0,n().$Y)(o)?function(e){const{environment:t,operation:o,store:n,transaction:r}=e;if("update"===o.command&&a().n4(o.path,["properties"])&&"title"in o.args){const{title:e,...i}=o.args;l().KY({environment:t,store:n.getBlockTitleStore(),value:e,transaction:r}),Object.keys(i).length>0&&s().zv({store:n.getPropertiesStore(),data:i,transaction:r})}else if("set"===o.command&&a().n4(o.path,["properties","title"]))l().KY({environment:t,store:n.getBlockTitleStore(),value:o.args,transaction:r});else{if("update"===o.command&&0===o.path.length&&"properties"in o.args||"set"===o.command&&a().n4(o.path,["properties"]))throw new Error("Woah woah woah - this is a collaborative app here. We can't just overwrite the entire properties object!");c().applyOperation({store:n,operation:o,transaction:r})}}({environment:t,operation:o,store:m,transaction:u}):(0,i().ph)(o)?c().applyCrdtTextOperation({store:m,operation:o,invertedOperation:void 0,transaction:u}):c().applyOperation({store:m,operation:o,transaction:u})}},437219:(e,t,o)=>{o.d(t,{$r:()=>g,Ax:()=>f,Hg:()=>u,Wn:()=>a,ol:()=>d,qU:()=>i,uR:()=>s,v0:()=>l,vt:()=>p,vz:()=>m,wQ:()=>c});var n=()=>o(939768),r=()=>o(989423);function i(e,t){(0,r().u4)({environment:e,event:{eventName:"embed_block_action",eventProperties:t}})}function a(e,t){(0,r().u4)({environment:e,event:{eventName:"embed_block_resize",eventProperties:t}})}function s(e,t){(0,r().u4)({environment:e,event:{eventName:"download_file",eventProperties:t}})}function l(e,t){(0,r().u4)({environment:e,event:{eventName:"file_open_attempt",eventProperties:t}})}function c(e,t){const o=(0,n().bk)(t.url);(0,r().u4)({environment:e,event:{eventName:"open_embed_menu",eventProperties:{url_domain:null==o?void 0:o.hostname}}})}function d(e,t){let o;o=void 0===t.url?void 0:t.url.includes("mailto:")?t.url:(0,n().qg)(t.url).hostname,(0,r().u4)({environment:e,event:{eventName:"click_embed_menu",eventProperties:{url_domain:o,type:t.type,form_id:t.form_id,block_id:t.block_id}}})}function u(e,t){(0,r().u4)({environment:e,event:{eventName:"url_turned_bookmark",eventProperties:{}}})}function p(e,t){(0,r().u4)({environment:e,event:{eventName:"link_mention_shows_placeholder",eventProperties:t}})}function m(e,t){(0,r().u4)({environment:e,event:{eventName:"embed_type",eventProperties:t}})}function g(e,t){(0,r().u4)({environment:e,event:{eventName:"embed_render",eventProperties:t}})}function f(e,t){(0,r().u4)({environment:e,event:{eventName:"embed_client_error",eventProperties:t}})}},437487:(e,t,o)=>{o.d(t,{Ay:()=>c,NL:()=>a,QC:()=>n,mc:()=>i,pP:()=>r,yZ:()=>s});let n=function(e){return e.Share="share",e.Publish="publish",e}({}),r=function(e){return e.MainShareMenu="mainShareMenu",e.Invite="invite",e.Publish="publish",e}({}),i=function(e){return e.InviteBackButton="invite_back_navigation",e.ShareTopbarButton="share_topbar_button_click",e.ShareTab="share_tab_click",e}({}),a=function(e){return e.Notion="notion",e.Slack="slack",e.Google="google",e}({}),s=function(e){return e.Search="search",e.Message="message",e}({});class l extends(()=>o(757695))().default{getInitialState(){return{sessionId:o(206267).JW(),display:r.MainShareMenu,tab:n.Share,isInitialized:!1,source:i.ShareTopbarButton}}getIsInitialized(){return this.state.isInitialized}}const c=new l},437622:(e,t,o)=>{o.d(t,{RC:()=>ee,X$:()=>ue,aB:()=>ke,hN:()=>Pe,km:()=>me,zd:()=>X,e3:()=>pe,y$:()=>ge,rc:()=>ne,au:()=>oe,p3:()=>Be,cU:()=>ae,c2:()=>le,I0:()=>de,GK:()=>ce,RF:()=>be,p4:()=>_e,jy:()=>Se,s7:()=>ye,Qx:()=>he,bN:()=>Ie,hT:()=>Ee,r7:()=>Me,IL:()=>fe,dT:()=>De,XZ:()=>Re,oT:()=>we,Ar:()=>ve,ex:()=>se,mQ:()=>xe,Mz:()=>Te,u_:()=>Ae,Gb:()=>Ce});o(16280),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454);var n=()=>o(496506),r=()=>o(584262),i=()=>o(130382),a=()=>o(617871),s=()=>o(493720),l=()=>o(792071),c=()=>o(946065),d=()=>o(179034),u=()=>o(96689),p=()=>o(798880),m=()=>o(294712),g=()=>o(495989),f=()=>o(677338),v=()=>o(322769),h=()=>o(313127),_=()=>o(496603),b=()=>o(534177),y=()=>o(624550),S=()=>o(433052),w=()=>o(507785),k=()=>o(457395),I=()=>o(664713),A=()=>o(780054),x=()=>o(646736),C=()=>o(165162),T=()=>o(607859);var M=()=>o(696746),P=()=>o(644914),B=()=>o(82648),R=()=>o(155959),E=()=>o(351360),D=()=>o(90873),N=()=>o(605402),L=()=>o(508496),F=()=>o(151059),U=()=>o(630116),O=()=>o(752885),V=()=>o(640812),j=()=>o(486130),z=()=>o(134217),q=()=>o(186445),H=()=>o(47373),W=()=>o(492414),K=()=>o(972435),G=()=>o(100875),$=()=>o(396301),Y=()=>o(108944),Q=()=>o(299545),Z=()=>o(37433);async function X(e,t){var o;const n=e.currentUser.id,r=t.getSpaceStore();if(!r||!n)return;await t.load();t.hasRemoteSharedPages()||await I().C({environment:e,spaceId:r.id,userId:n});const i=(0,q().rp)(e).state;if(!i)return;const a=(0,$().VR)(),s=(0,$().KP)({sidebarOrder:a,sidebarState:i,showLockedSidebar:!1});for(const d of s)switch(d){case"favorites":return t.getBookmarkedPages()[0];case"teamspaces":const e=J(t);if(e)return e;break;case"shared":return i.visibleSharedPagesStores[0];case"private":const o=i.visiblePrivatePagesStores;if(o.length>0)return o[0];break;case"workspace":return t.getWorkspacePages()[0];default:(0,b().HB)(d)}const l=J(t);if(l)return l;const c=D().A.getSharedPagesState({spaceId:r.id,userId:n}),u=null==c||null===(o=c.currentPageIds)||void 0===o?void 0:o[0];return u?U().Bv.createChildStore(r,{table:d().ev,id:u,spaceId:r.id}):void 0}function J(e){const t=e.getTeamsStores();for(const o of t){const e=o.getTeamPagesStores();if(e.length>0)return e[0]}}const ee=7,te={};function oe(e){const t=e.type,o=te[t]??new(s().XQ);return te[t]||(te[t]=o),o.memo((()=>new(n().default)((()=>ne(e)),{debugName:"pageContextStore"})),[e.environment,e.spaceViewStore,e.userSettingsStore])}function ne(e){const{environment:t,spaceViewStore:o,userSettingsStore:n,type:r}=e,i=o.getSpaceId();let a="shared"===r?ae(t,o):function(e,t){const o=t.getPrivatePages(e),n=(0,$().XA)({spaceViewStore:t});if(n)return re(o);return o}(t,o);if(a=a.filter((e=>{const{isCopyIndicator:t,shouldShowAsLoadingSpinner:o}=(0,P().u8)(e);return!t||t&&o})),!i)return{allPagesStores:a,visiblePagesStores:a};if("private"===r||"shared"===r&&(0,H().rY)(t)){const e=(0,$().RQ)({spaceViewStore:o,type:r});return{allPagesStores:a,visiblePagesStores:e.truncationLimit===c().vw?a:a.slice(0,e.truncationLimit)}}if(!n.hasUserPinnedToOutliner({type:$().BP[r],spaceId:i}))return{allPagesStores:a,visiblePagesStores:a.slice(0,ee)};const s=new Set(a.map((e=>{let{id:t}=e;return t})));return{allPagesStores:a,visiblePagesStores:o.getPinnedSharedPages().filter((e=>{let{id:t}=e;return s.has(t)}))}}function re(e){const t=e.map((e=>{if(!e.isDefined())return;const t=e.getLastEditedTime()||e.getCreatedTime();return t?{store:e,timestamp:t}:void 0})).filter(b().O9);return _().Ul(t,(e=>{let{timestamp:t}=e;return t})).reverse().map((e=>e.store))}const ie=new(s().XQ);function ae(e,t){const o=e.currentUser.id,n=t.getSpaceStore();if(n&&o){const r=D().A.getSharedPagesState({spaceId:n.id,userId:o}),i=r&&r.currentPageIds?r.currentPageIds:[],a=ie.memo((()=>function(e,t){return new(O().p)({debugName:"isValidSharedRemotePage",memoizeRecursion:!1,deepEquals:!1,compute:function(o){const n=e.currentUser.id;if(!n)return!1;const r=(0,x().dp)(t,n),i=(0,Y().Lf)(o);let a=!1;return i&&((0,Q()._p)(i)?a=!(0,Z().Mk)()&&e.currentUser.id&&t.isDefined()&&o.hasSpacePermission()?Boolean(r.isMember()):i.id!==o.id&&i.canRead():(0,Q().$R)(i)&&(a=Boolean(i.isMemberOrGuest(e.currentUser.id,j()._.getSpacePermissionGroupIds({userId:e.currentUser.id,spaceId:o.getSpaceId()})))&&i.canRead())),!(!((0,Q()._C)(o)&&o.canRead()&&o.isNavigableBlock()&&o.isSharedPage(t,e))||(0,Y().ze)(o)||a)}})}(e,n)),[e,n]),s=_().oE(i.map((e=>{const t=U().Bv.createChildStore(n.getPagesStore(),{table:d().ev,id:e,spaceId:n.id});if(a.getStateFor(t))return t}))),l=new Set(s.map((e=>e.id)));let c;const u=t.getSharedPageStores(),p=0===u.length;if(p){c=de(e,n).filter((e=>{l.has(e.id)}))}else c=u.filter((e=>!(0,Y().ze)(e)&&l.has(e.id)));(0,B().Hg)({use_legacy_shared_pages_ordering:p&&c.length>0});const m=[...c,...s],g=_().hS(m,(e=>e.id));if((0,H().rY)(e)){const{sortOption:e}=(0,$().RQ)({spaceViewStore:t,type:"shared"});if("lastEdited"===e)return re(g)}return g}return[]}async function se(e){const{disableRedirectUrl:t,environment:o,blockNoAccessRedirect:n}=e;o.device.isMobileNative&&(0,C().Sx)("mobile_app_launch_blank_page")||await k().y();const{id:i}=o.currentUser,{url:a,spaceId:s,route:c}=await S().wA(o),d=y().MC(i),v=w().Ch(i),h=f().pG();if(!i)throw new Error("User not logged in.");const I=new(U().LU)(o,{table:p().oo,id:i}),A=new(U().dZ)(o,{table:m().GD,id:i}),x=new(U().GG)(o,{table:g().xM,id:i}),[T,P]=await Promise.all([I.awaitNonNullValue(),A.awaitNonNullValue(),x.awaitNonNullValue()]),B=s?me(s):void 0,E=function(e){const{environment:t,lastVisitedUrl:o}=e,n=t.RouterStore.state.initialRoute;if("page"===n.name)return{url:o,isPersonalHomeUrl:!1};if(t.device.isMobileNative&&t.device.isPhone&&(0,C().Sx)("mobile_app_launch_blank_page"))return{url:"/blank",isPersonalHomeUrl:!1};return function(e){const{environment:t,lastVisitedUrl:o,lastVisitedSpaceView:n,lastVisitedSpace:i}=e,a=ge(t,{space:null==i?void 0:i.getModel(),spaceView:null==n?void 0:n.getModel()});switch(a){case"last_visited_page":return o?{url:o,isPersonalHomeUrl:!1}:void 0;case"first_page":case"chat":return;case"personal_home":if(!n)return;const e=M().x$(n);if(!e)return;return{url:(0,W().Ay)({store:e,preferPublicLink:!1,pageVisitSource:r().y8.DefaultHome}),isPersonalHomeUrl:!0};default:(0,b().HB)(a)}}(e)}({environment:o,lastVisitedUrl:a,lastVisitedSpaceView:B,lastVisitedSpace:s?U().SL.createChildStore(A,{table:u().NX,id:s}):void 0}),D=null==E?void 0:E.url,N=!!T&&Boolean(T.onboarding_completed),L=function(e){const{userValue:t}=e;if(!t)return!1;if(Boolean(t.mobile_onboarding_completed))return!0;return(0,R().T)("isAutomatedQABuild")}({userValue:T}),F=function(e,t){const o=l().Bj6.fromValue(m().GD,e),n=o.getSpaceViewPointers();return n&&n.length>0?U().vH.createChildStore(t,n[0]):void 0}(P,A);F&&await F.load();const O=F?F.getSpaceStore():void 0;if(c&&!t){const e=await w().Li({environment:o,request:{type:"block-space",spaceId:s,...c}});if(e){const t="page"===c.name&&c.blockId?c.blockId:void 0;let r=!1;if(n&&"page"===c.name){const{blockId:e,spaceId:t}=c;if(e){const n=new(U().Bv)(o,{table:"block",id:e,spaceId:t});await n.load(),r="none"===n.getRole()}}const i=["read_and_write","comment_only","reader"].includes(e.publicAccessRole);if(!r&&e&&!_().Im(e)&&(e.canJoinSpace||e.userHasExplicitAccess||!i))return{userStore:I,userSettingsStore:x,userRootStore:A,firstSpace:O,firstSpaceView:F,lastVisitedSpaceView:B,redirectUrl:D,forkPageBlockId:d,publicAccessPageId:v,oauthAuthorizationParams:h,redirectPageId:t,redirectBlockId:void 0,hasExplicitAccessToRedirectPage:e.userHasExplicitAccess,canRequestAccessToRedirectPage:e.canRequestAccess,redirectSpaceName:e.spaceName,redirectSpaceId:e.spaceId,canJoinRedirectSpace:e.canJoinSpace,onboardingCompleted:N,mobileOnboardingCompleted:L,isPersonalHomeRedirect:(null==E?void 0:E.isPersonalHomeUrl)??!1,lastVisitedUrl:a,inviteCode:void 0}}}return{userStore:I,userSettingsStore:x,userRootStore:A,firstSpace:O,firstSpaceView:F,lastVisitedSpaceView:B,forkPageBlockId:d,publicAccessPageId:v,oauthAuthorizationParams:h,redirectUrl:void 0,redirectBlockId:void 0,redirectPageId:void 0,hasExplicitAccessToRedirectPage:void 0,canRequestAccessToRedirectPage:void 0,redirectSpaceId:void 0,canJoinRedirectSpace:void 0,onboardingCompleted:N,mobileOnboardingCompleted:L,redirectSpaceName:void 0,isPersonalHomeRedirect:!1,lastVisitedUrl:void 0,inviteCode:void 0}}function le(e,t){return U().sk.fromV1(t).getIcon()}function ce(e,t){const o=t.getName(),n=K().A.getIntl().formatMessage({defaultMessage:"Untitled workspace",id:"spaceHelpers.getSpaceName.untitledWorkspace.name"});if(o)return o||n;{const o=F().A.getData(e,{spaceId:t.id});if(o)return o.name||n}return n}function de(e,t){const o=t.getPagesStore();return function(e,t){const o=e.currentUser.id,n=t.getPagesStore().getValue();if(n&&o){const e=V().A.getSpaceInaccessiblePages(t.id,o);return e?n.filter((t=>!e.has(t))):n}return[]}(e,t).map((e=>U().Bv.createChildStore(o,{table:d().ev,id:e})))}function ue(e,t,o){const n=F().A.getData(e,{spaceId:t}),r=!Boolean(null==n?void 0:n.domainIsAutogenerated),i=_().oE([r&&(null==n?void 0:n.domain),"invite",o]).join("/");return`${A().A.domainBaseUrl}/${i}`}function pe(e){let{environment:t,spaceStore:o,inviteLinkCode:n}=e;if(void 0===n)return;return ue(t,o.id,n)}function me(e){const{currentUserRootStore:t}=E().default.state;return null==t?void 0:t.getSpaceViewStores().find((t=>t.getSpaceId()===e))}function ge(e,t){var o;let{space:n,spaceView:r}=t;const i=function(e,t){var o,n;if(null!==(o=e.mobileNative)&&void 0!==o&&o.supportsNativeHomeOnPhone())return{setting:"last_visited_page",fromExplicitSetting:!1};const r=null==t||null===(n=t.getSettings())||void 0===n?void 0:n.on_app_start;if((0,b().O9)(r))return{setting:r,fromExplicitSetting:!0};const{isPhone:i,isMobileNative:a}=e.device,s=!(i&&a||function(){const e=E().default.state.spaceTransitionStatus;let t;switch(e){case"joiningOrCreatingSpace":t=!0;break;case"switchingToOrLoadingSpace":case"notTransitioning":t=!1;break;default:(0,b().HB)(e)}return t||T().default.state.isOnboarding}());return{setting:s?"personal_home":"last_visited_page",fromExplicitSetting:!1}}(e,r);if("personal_home"!==i.setting){const e=i.setting;return(0,G().cq)({spaceView:r,preference:e}),e}const a=null==r?void 0:r.getSpaceId(),s=null==r?void 0:r.getUserId(),l=!L().default.isStatsigEnabledAndInitialized()||!a||!s||a!==(null===(o=E().default.state.currentSpaceStore)||void 0===o?void 0:o.id)||s!==e.currentUser.id;let c;c=i.fromExplicitSetting?l?function(e){var t;const o=null==e||null===(t=e.getPersonalHomeSettings())||void 0===t?void 0:t.home_landing_page_enabled;switch(o){case"home_landing_page_with_default":case"home_landing_page_without_default":return!0;case"no_home_landing_page":case void 0:return!1;default:(0,b().HB)(o)}}(r):(0,Z().nk)():l?function(e){var t;const o=null==e||null===(t=e.getPersonalHomeSettings())||void 0===t?void 0:t.home_landing_page_enabled;switch(o){case"home_landing_page_with_default":return!0;case"home_landing_page_without_default":case"no_home_landing_page":case void 0:return!1;default:(0,b().HB)(o)}}(r):(0,Z().yH)(n);const d=c?"personal_home":"last_visited_page";return(0,G().cq)({spaceView:r,preference:d}),d}function fe(e){return!!e&&!e.canRead()}function ve(e){return!!e&&e.getZeroRetentionEnabled()}function he(e,t){const o=(0,z().Be)(t)||[],n=e.currentUser.id;for(const r of o)if(r.userId===n&&"none"===r.role&&r.isTeamGuest)return!0;return!1}function _e(e){return!!e&&e.canAdmin()}function be(e){var t;let{groupId:o}=e;return null===(t=N().A.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===o)))||void 0===t?void 0:t.group}function ye(e){const t=E().default.state.currentSpaceStore,o=e.currentUser.id;return Boolean(t&&o&&(0,x().dp)(t,o).isWorkspaceOwner())}function Se(){const e=E().default.state.currentSpaceStore;return!(null==e||!e.isDefined())&&"enterprise"===e.getSubscriptionTier()}function we(e){const t=e.getSubscriptionTier();return"plus"===t||"business"===t||"enterprise"===t}function ke(e){const t=null==e?void 0:e.getCreatedTime();return t?(0,i().Mn)(t):null}function Ie(e){const t=ke(e);return null!==t&&t<=7}function Ae(e){return(0,b().Vq)(e)&&"none"!==e.role?e.planType:void 0}function xe(e){return(0,b().Vq)(e)&&"none"!==e.role?e.createdTime:void 0}function Ce(e){return(0,b().Vq)(e)&&"none"!==e.role?e.subscriptionTier:void 0}function Te(e){return(0,b().Vq)(e)&&"none"!==e.role?e.memberCount:void 0}function Me(e){return null==e?void 0:e.getEnableGuestInviteRequest()}function Pe(e){return Boolean(Me(e))&&!Boolean(null==e?void 0:e.canAdmin())}function Be(){var e,t,o,n,r,i,a,s,l,c,d,u,p,m;const{currentSpaceStore:g,currentSpaceViewStore:f}=E().default.state,v=null==g?void 0:g.getSpaceSurveyData(),_=null==f?void 0:f.getUserSurveyData();return{function:null!=_&&null!==(e=_.function)&&void 0!==e&&e.value?(0,h().Tj)(null==_||null===(t=_.function)||void 0===t?void 0:t.value):void 0,role:null!=_&&null!==(o=_.role)&&void 0!==o&&o.value?(0,h().t_)(null==_||null===(n=_.role)||void 0===n?void 0:n.value):void 0,educationRole:null==_||null===(r=_.education_role)||void 0===r?void 0:r.value,educationLevel:null==_||null===(i=_.education_level)||void 0===i?void 0:i.value,useCases:null!=v&&null!==(a=v.use_cases)&&void 0!==a&&a.value?(0,h().h0)(null==v||null===(s=v.use_cases)||void 0===s?void 0:s.value):void 0,companySize:null!=v&&null!==(l=v.company_size)&&void 0!==l&&l.value?(0,h().JE)(null==v||null===(c=v.company_size)||void 0===c?void 0:c.value):void 0,intent:null!=v&&null!==(d=v.intent)&&void 0!==d&&d.value?(0,h().j9)(null==v||null===(u=v.intent)||void 0===u?void 0:u.value):void 0,categories:null==_||null===(p=_.categories)||void 0===p?void 0:p.value,collaborativeIntent:null==v||null===(m=v.collaborative_intent)||void 0===m?void 0:m.value}}function Re(e){return e.getSetting("disable_notion_calendar")}function Ee(e){return Boolean(e.getSetting("self_serve_enterprise_eligible"))}function De(e){let{env:t,spaceStore:o}=e;return!(0,v().nH)({spaceBotSettings:o.getBotSettings(),integrationId:a().io,env:t})||fe(o)||Re(o)}},438754:(e,t,o)=>{o.d(t,{A:()=>i});var n=()=>o(529543);class r extends(()=>o(757695))().default{getInitialState(){return{permission:o(75756).qV}}getId(){return this.getState().id}getPermission(){return this.getState().permission}setPermission(e){this.setState({...this.state,permission:e})}async setCookieConsent(e,t){this.setState(t),await(0,n().setCookieConsentCookie)(e,t)}clearCookieConsent(){this.reset(),(0,n().removeCookieConsentCookie)()}}const i=new r},439270:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(354520),o(672577);class n extends(()=>o(959180))().A{findCellsInRowFromStore(e,t,o){return this.filter((n=>{const r=n.getProps();return e?r.store===e:r.simpleTableStore===t&&r.rowIndex===o}))}findCellsInColumnFromStore(e,t){return this.filter((o=>{const n=o.getProps();return n.simpleTableStore===e&&("number"==typeof t&&n.columnIndex===t||"string"==typeof t&&n.columnID===t)}))}findCellFromTextStore(e){return this.find((t=>t.getTextStore()===e))}findCellFromElement(e,t){return this.find((o=>o.getProps().simpleTableStore===t&&o.getNode()===e))}}const r=new n},440209:(e,t,o)=>{o.d(t,{Um:()=>c,f1:()=>s,mn:()=>l});var n=()=>o(186445),r=()=>o(733848),i=()=>o(680074),a=()=>o(508496);function s(e){const{environment:t,variant:o,experimentId:s,isUserWorkspaceOwner:c}=e,d=function(e){var t,o;const{environment:s,experimentId:c,isUserWorkspaceOwner:d}=e;let u;try{u=(0,r().oM)(s)}catch(h){return!1}if(!u)return!1;const p=null===(t=u.getSettings().exposed_to_stackranking_experiment)||void 0===t?void 0:t[c],m=(0,n()._m)(s);if(!m)return!1;const g=m.id,f=u.getCreatedById(),v=(0,i().R$)(s);return!!v&&l({isSpacePreviouslyExposed:p,currentUserId:g,spaceCreatedById:f,userSignUpDate:null===(o=v.getSettings())||void 0===o?void 0:o.signup_time,isUserWorkspaceOwner:d,experimentStartDate:a().default.getConfigKey("adoption_stack_ranking_experiment_start",c)})}({environment:t,experimentId:s,isUserWorkspaceOwner:c});if(!d)return!1;const u=a().default.getEligibleGroup({experimentId:s,defaultGroup:"control"});return"control"!==u&&u===o}function l(e){let{isSpacePreviouslyExposed:t,currentUserId:o,spaceCreatedById:n,userSignUpDate:r,experimentStartDate:i,isUserWorkspaceOwner:a}=e;return!!t||!!(r&&i&&i<=r&&a&&o===n)}function c(e){const{environment:t,isUserWorkspaceOwner:o}=e;return s({environment:t,experimentId:"adoption_hide_features_v1",variant:"teamspace",isUserWorkspaceOwner:o})||s({environment:t,experimentId:"adoption_hide_features_v1",variant:"inbox_and_teamspace",isUserWorkspaceOwner:o})}},441199:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});var n=()=>o(534177);class r extends(()=>o(757695))().default{getInitialState(){return{mode:"peek",modeByContentType:{none:"peek",inbox:"peek",activity:"peek",private_pages:"peek",shared_pages:"peek",assistant:"peek",teams:"peek"},openState:"closed",contentType:"none",isResizerHovered:!1,isResizing:!1,isMouseEntered:!1,flowId:o(206267).JW(),autoClosed:!1}}isOpen(){const{openState:e}=this.state;switch(e){case"open":case"opening":return!0;case"closed":case"closing":return!1;default:(0,n().HB)(e)}}isVisible(){const{openState:e}=this.state;switch(e){case"open":case"opening":case"closing":return!0;case"closed":return!1;default:(0,n().HB)(e)}}isTransitioningState(){const{openState:e}=this.state;switch(e){case"opening":case"closing":return!0;case"open":case"closed":return!1;default:(0,n().HB)(e)}}isPeekDismissableState(){return"peek"===this.state.mode&&this.isVisible()}isPanelPinnedState(){return"panel"===this.state.mode&&this.isOpen()}isTogglingToPanelModeState(){return"open"===this.state.openState&&"panel"===this.state.mode}}const i=new r},441265:(e,t,o)=>{o.d(t,{oA:()=>i});var n=()=>o(645873);const r={aliasBlock:new(n().O2)("aliasBlock",(()=>Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(17989),o.e(56985),o.e(78846),o.e(13324),o.e(15724),o.e(81141),o.e(72915),o.e(69689),o.e(43647),o.e(65999),o.e(88488)]).then(o.bind(o,388138)))),aliasBlockPopupMenu:new(n().O2)("aliasBlockPopupMenu",(()=>Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(17989),o.e(56985),o.e(78846),o.e(13324),o.e(15724),o.e(81141),o.e(72915),o.e(69689),o.e(43647),o.e(65999),o.e(88488)]).then(o.bind(o,176789))))},i=(0,n().jQ)(r.aliasBlock,(e=>e.default));(0,n()._h)(r.aliasBlockPopupMenu,(e=>e.default))},441307:(e,t,o)=>{o.d(t,{A:()=>Q});o(944114),o(898992),o(823215),o(354520),o(672577),o(581454),o(908872),o(737550);var n=()=>o(496506),r=()=>o(757695),i=()=>o(66689),a=()=>o(289915),s=()=>o(921598),l=()=>o(970013),c=()=>o(329199),d=()=>o(455348),u=()=>o(737658),p=()=>o(799829),m=()=>o(179034),g=()=>o(519831),f=()=>o(797809),v=()=>o(496603),h=()=>o(534177),_=()=>o(873050),b=()=>o(405417);function y(e,t,n){var r;const i=t.collectionViewStore(),a=t.searchQueryStore.state;if(!i)return;const s=t.currentSubitemFormatStoreForUiDisplayStore.state,c=null==i?void 0:i.getType(),d=(0,_().Ay)(t,!0),u=t.currentSortsStore.state,p=function(e){const t=e.reducersStore.state,o={};return v().jJ(t,((e,t)=>{e&&(o[t]=e.reducer)})),o}(t);if(v().Im(p))return;let m;if(t.reducerDependencies.size>0){m={};for(const[e,o]of t.reducerDependencies)m[e]=[...o]}const g=(0,o(161479).e)(i.pointer.spaceId),f=i.getCollectionSource();if(!f)return;const h=t.normalizedSchemaStore.state,y=(null==s?void 0:s.property)&&h[s.property],S=null===(r=t.viewsModuleContextStore.currentPageStore())||void 0===r?void 0:r.id;return{source:f,collectionView:{id:i.id,spaceId:g},loader:{reducers:p,filter:d,sort:u,searchQuery:a,userId:e.currentUser.id,userTimeZone:n,...y&&(0,l().nC)(y)&&c&&(0,b().qS)(c)&&{upwardTraversalRelation:y},reducerDependencies:m,currentPageInRelatedCollection:S}}}o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);function S(e){switch(e){case"trending":case"similarUsers":case"mostVisited":case"lastEdited":case"favorites":return{title:{name:"Name",type:"title"}};case"myTasks":case"customDb":case"posts":return{};default:(0,h().HB)(e)}}function w(e){let{source:t,collectionId:o}=e;const{type:n}=t;return{id:o,parent_table:m().ev,parent_id:n,version:1,alive:!0,space_id:t.spaceId,format:{},schema:S(n)}}var k=()=>o(792071),I=()=>o(186445),A=()=>o(476492),x=()=>o(972435),C=()=>o(406792),T=()=>o(696746),M=()=>o(508496),P=()=>o(38789),B=()=>o(630116);var R=()=>o(519839),E=(o(16280),()=>o(449412));function D(e,t,o){E().lE("collections"),E().O8(new Error("Callback waited over time limit for item to be rendered"),{from:"CollectionItemMountedCallbacks",type:e,data:{miscDataToConvertToString:{blockPointer:t,delayMs:o}}})}class N{constructor(){this.callbackMap=void 0,this.storeTimeoutMap=void 0,this.callbackMap=new WeakMap,this.storeTimeoutMap=new WeakMap}registerCallback(e,t){var o;this.callbackMap.has(e)||this.callbackMap.set(e,[]),null===(o=this.callbackMap.get(e))||void 0===o||o.push(t);const n=this.storeTimeoutMap.get(e);n&&clearTimeout(n.timeoutId);const r=window.setTimeout((()=>{this.callbackMap.has(e)&&D("TimeoutError",e.pointer,15e3)}),15e3);this.storeTimeoutMap.set(e,{timeoutId:r,registeredAt:performance.now()})}executeCallbacks(e){const t=this.callbackMap.get(e)??[],o=performance.now();for(const r of t)r();this.callbackMap.delete(e);const n=this.storeTimeoutMap.get(e);if(n){clearTimeout(n.timeoutId);const t=o-n.registeredAt;t>5e3&&D("SlowExecutionError",e.pointer,t),this.storeTimeoutMap.delete(e)}}}class L{constructor(){this.timings=void 0,this.trackTimings=void 0,this.timings={queryCollectionRequests:[],collectionReducerRequests:{}},this.trackTimings=!0}startRequestTracking(){if(this.trackTimings)return{start:performance.now()}}finishRequestTracking(e,t){if(!this.trackTimings||!e)return;const o=performance.now(),n=o-e.start;this.timings.queryCollectionRequests.push({start:e.start,end:o,duration_ms:n,status:t})}mountCollectionReducerRequest(e,t){this.trackTimings&&!this.timings.collectionReducerRequests[e]&&(this.timings.collectionReducerRequests[e]={id:e,reducer_type:t,mounted_at:performance.now()})}unmountCollectionReducerRequest(e){this.trackTimings&&this.timings.collectionReducerRequests[e]&&(this.timings.collectionReducerRequests[e].unmounted_at=performance.now())}getMetrics(e){return this.trackTimings=!1,{render_started_at:e.cvbBlockRenderStart,mounted_at:e.cvbBlockRenderMount,items_started_at:e.itemsStart,items_visible:e.itemsVisible,query_request_count:this.timings.queryCollectionRequests.length,query_request_times:this.timings.queryCollectionRequests,collection_reducer_request_count:Object.keys(this.timings.collectionReducerRequests).length,collection_reducer_request_times:Object.values(this.timings.collectionReducerRequests),collection_prefetch_processing_time:o(680091).X.getProcessingTime()}}reset(){this.timings={queryCollectionRequests:[],collectionReducerRequests:{}},this.trackTimings=!0}}class F extends r().default{getInitialState(){return 0}}class U{constructor(){this._cache=Object.create(null)}get cache(){return this._cache}reset(){this._cache={}}getBlockHeightStore(e){return this.getBlockEntry(e).heightStore}getPropertyHeightStore(e,t){return this.getPropertyEntry(e,t).heightStore}getBlockHeightCache(e){return this.cache[e]}propertyCanExpandStore(e,t){return this.getPropertyEntry(e,t).canExpandStore}cachePropertyHeight(e,t,o){this.getPropertyEntry(e,t).heightStore.setState(o)}expandHeightToTallestCached(e){if(!this.cache[e])return;const t=this.getBlockEntry(e),{height:o}=this.findTallestProperty(t);t.heightStore.setState(o)}propertyCanExpand(e,t){if(!e||!t||!this.cache[e])return!1;const o=this.getBlockEntry(e);return(this.getPropertyEntry(e,t).heightStore.state??0)>o.heightStore.state}findTallestProperty(e){let t="",o=0;for(const[n,{heightStore:r}]of Object.entries(e.propertyHeights))r.state>o&&(o=r.state,t=n);return{height:o,property:t}}getBlockEntry(e){return this.cache[e]||(this.cache[e]={heightStore:new F,propertyHeights:Object.create(null)}),this.cache[e]}getPropertyEntry(e,t){const o=this.getBlockEntry(e);return o.propertyHeights[t]||(o.propertyHeights[t]={heightStore:new F,canExpandStore:new(n().default)((()=>this.propertyCanExpand(e,t)),{debugName:"PropertyCanExpandStore"})}),o.propertyHeights[t]}}class O{constructor(e){this.rowVirtualizer=void 0,this.collectionContextStore=void 0,this.horizontalScrollerRef=void 0,this.horizontalScrollerRefStore=void 0,this.blockHeightsCache=void 0,this.virtualizedColumnsEnabled=void 0,this.collectionContextStore=e,this.blockHeightsCache=new U,this.horizontalScrollerRefStore=r().default.createValue(void 0)}reset(){this.rowVirtualizer=void 0,this.blockHeightsCache.reset()}setRowVirtualizer(e){this.rowVirtualizer=e}setHorizontalScrollerRefStore(e){this.horizontalScrollerRefStore.setState(e)}getHorizontalScrollerRefStore(){return this.horizontalScrollerRefStore}getBlockHeightsCache(){return this.blockHeightsCache}setVirtualizedColumnsEnabled(e){this.virtualizedColumnsEnabled=e}getVirtualizedColumnsEnabled(){return this.virtualizedColumnsEnabled}async waitToScrollToBlock(e,t){if(!this.rowVirtualizer)return;const o=this.collectionContextStore.groupsStore.getGroupState(e);if(!o)return;const n=o.resultsStore.state.findIndex((e=>e===t));if(!(n>=0))return new Promise((e=>{const n=r=>{if(!this.rowVirtualizer)return o.resultsStore.removeListener(n),void e();const i=r.state.findIndex((e=>e===t));i>=0&&(this.rowVirtualizer.scrollToIndex(i,{behavior:"smooth"}),o.resultsStore.removeListener(n),e())};o.resultsStore.addListener(n)}));this.rowVirtualizer.scrollToIndex(n,{behavior:"smooth"})}}var V=()=>o(989423),j=()=>o(10594),z=()=>o(522827);class q{constructor(e){this.supportsLongTask=void 0,this.entriesObserved=void 0,this.observer=void 0,this.observing=!1,this.supportsLongTask=PerformanceObserver.supportedEntryTypes.includes("longtask"),this.entriesObserved=[],this.observer=new PerformanceObserver((t=>{this.entriesObserved.push(...t.getEntries()),e&&e(t,this.observer)}))}observe(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.supportsLongTask&&(this.observer.observe({type:"longtask",buffered:e}),this.observing=!0)}get isObserving(){return this.observing}disconnect(){this.observer.disconnect(),this.observing=!1}takeRecords(){const e=this.entriesObserved;return this.entriesObserved=[],e}}var H=()=>o(351360);class W extends r().default{constructor(e,t){super(),this.collectionContextStore=e,this.environment=t}getInitialState(){return new Map}getGroupState(e){const t=Array.isArray(e)?e:void 0!==e?[e]:[],o=(0,s().Hm)(t),i=this.state.get(o);if(i)return i;const a=function(e,t,o){const i=r().default.createValue(void 0,{name:"reducerResultStore"}),a=e.collectionViewBlockStore();if(!a)return;let s;o.length>0?(s=a.clone(),s.setRecordStoreUIParent(a)):s=a;const l=R().CG(e,t.device.isMobile),c=new(n().default)((()=>{const e=i.state;return(e&&"results"===e.type?e.blockIds:[]).map((e=>B().Bv.createChildStore(s,{id:e,table:m().ev})))}),{debugName:"resultsStore"});return{groupsPointer:o,groupUiParentStore:s,reducerResultStore:i,resultsStore:c,currentLimit:r().default.createValue(l,{name:"currentLimit"}),toggleStateStore:r().default.createValue(!1,{name:"toggleStateStore"})}}(this.collectionContextStore,this.environment,t);return a?(this.state.set(o,a),this.emit(),a):void 0}getAllGroupStates(){return[...this.state.values()]}anyGroupHasResults(){for(const e of this.state.values())if(e.reducerResultStore.state)return!0;return!1}anyGroupHasNonEmptyResults(){for(const t of this.state.values()){var e;if(null!==(e=t.reducerResultStore.state)&&void 0!==e&&null!==(e=e.blockIds)&&void 0!==e&&e.length)return!0}return!1}anySpecifiedGroupHasResults(e){for(const t of e){const e=this.getGroupState(t);if(null!=e&&e.reducerResultStore.state)return!0}return!1}resetAllLimits(){const e=R().CG(this.collectionContextStore,this.environment.device.isMobile);for(const t of this.state.values())t.currentLimit.setState(e)}setLimitIfGreater(e,t){const o=this.getGroupState(e),n=null==o?void 0:o.currentLimit;n&&t>n.state&&n.setState(t)}incrementLimit(e){const{isFullScreen:t,currentResultCount:o,groupsPointer:n,incrementLimitsInRelatedGroups:r}=e,i=this.collectionContextStore.collectionViewStore();if(!i)return;const a=this.getGroupState(n);if(!a)return;const l=r?[...this.state.values()].filter((e=>1===n.length?1===e.groupsPointer.length:2===n.length&&(0,s().Mn)(n[0],e.groupsPointer[0]))):[a];for(const s of l){const e=s.currentLimit,n=e.state+R().zE({collectionViewStore:i,isFullScreen:t,currentResultCount:o,isMobile:this.environment.device.isMobile});e.setState(n)}}}class K extends r().default{getInitialState(){return{hasLocalUpdates:!1,blockIds:new Set}}addLocalChange(e){for(const t of e)this.state.blockIds.add(t);this.state.hasLocalUpdates=!0,this.emit()}resetWithRemote(){const e=this.getInitialState();for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];e.blockIds=new Set(...o),this.setState(e)}}var G=()=>o(53137);class $ extends r().default{getInitialState(){}getViewsModule(){var e;return null===(e=this.state)||void 0===e?void 0:e.viewsModule}isInLayoutBuilder(){var e;return"layoutBuilder"===(null===(e=this.state)||void 0===e?void 0:e.location)}getViewModuleType(){var e;return null===(e=this.state)||void 0===e?void 0:e.viewsModule.type}currentPageStore(){var e;return null===(e=this.state)||void 0===e?void 0:e.currentPageStore}getCurrentPageCollectionStore(){var e;return null===(e=this.state)||void 0===e||null===(e=e.currentPageStore)||void 0===e?void 0:e.getAssociatedCollectionStore()}selectViewsModule(){var e;"layoutBuilder"===(null===(e=this.state)||void 0===e?void 0:e.location)&&this.state.selectViewsModule()}}class Y{constructor(e,t){this.contextStore=r().default.createValue(void 0,{name:"contextStore"}),this.reducersStore=r().default.createValue({},{name:"reducersStore"}),this.reducerDependencies=new Map,this.shouldDelayRenderStore=r().default.createValue(!1,{name:"shouldDelayRenderStore"}),this.resultSetStore=new K,this.remoteResultStore=r().default.createValue(void 0,{name:"remoteResultStore"}),this.remoteErrorStore=r().default.createValue(void 0,{name:"remoteErrorStore"}),this.remoteCollectionIdsStore=r().default.createValue([],{name:"remoteCollectionIdsStore"}),this.lastRemoteRequestStore=r().default.createValue(void 0,{name:"lastRemoteRequestStore"}),this.searchOpenStore=r().default.createValue(!1,{name:"searchOpenStore"}),this.searchQueryStore=r().default.createValue("",{name:"searchQueryStore"}),this.isLoadingStore=r().default.createValue(!1,{name:"isLoadingStore"}),this.isLoadedStore=r().default.createValue(!1,{name:"isLoadedStore"}),this.didFireLoadEventsStore=r().default.createValue(!1,{name:"didFireLoadEvents"}),this.isCreatingNewChartCollectionStore=r().default.createValue(!1,{name:"isCreatingNewChartCollectionStore"}),this.loadingDetailsStore=r().default.createValue({type:"load_general"},{name:"loadingDetailsStore"}),this.wasCreatedThisSessionStore=r().default.createValue(!1,{name:"wasCreatedThisSessionStore"}),this.isFullScreenStore=r().default.createValue(!1,{name:"isFullScreenStore"}),this.isRootChildStore=r().default.createValue(!1,{name:"isRootChildStore"}),this.isInPeekRendererStore=r().default.createValue(!1,{name:"isInPeekRendererStore"}),this.relationResultsCacheStore=r().default.createValue(new Map,{name:"relationResultsCacheStore"}),this.privateRelativeVariableStore=r().default.createValue({},{name:"privateRelativeVariableStore"}),this.groupsStore=void 0,this.groupsLimitStore=r().default.createValue(j()._9,{name:"groupsLimitStore"}),this.boardColumnsLimitStore=r().default.createValue(j()._9,{name:"boardColumnsLimitStore"}),this.settingsStore=r().default.createValue({open:!1,stack:[]},{name:"settingsStore"}),this.collectionSettingsDuplicateExistingViewLimitStore=r().default.createValue(!0,{name:"collectionSettingsDuplicateExistingViewLimitStore"}),this.filtersBarOpenStore=r().default.createValue(void 0,{name:"filtersBarOpenStore"}),this.temporaryStateStore=r().default.createValue({},{name:"temporaryStateStore"}),this.filterBarItemSettingsStoreMap=new Map,this.frozoneStore=r().default.createValue({isScrolled:!1,scrollerWidth:void 0,scrollerLeftOffset:void 0,scrollerLeftPadding:void 0,frozenIndex:void 0,tryShowHiddenFrozenColumn:!1},{name:"frozoneStore"}),this.filterBarSortSettingsStore=r().default.createValue({open:!1,stack:[]},{name:"filterBarSortSettingsStore"}),this.filterBarCombinatorFilterSettingsStore=r().default.createValue({open:!1,stack:[]},{name:"filterBarCombinatorFilterSettingsStore"}),this.filterOptionsItemSettingsStoreMap=new Map,this.filterOptionsCombinatorFilterSettingsStore=r().default.createValue({open:!1,stack:[]},{name:"filterOptionsCombinatorFilterSettingsStore"}),this.dateRangeStartStore=r().default.createValue(Date.now(),{name:"dateRangeStartStore"}),this.dateRangeEndStore=r().default.createValue(Date.now(),{name:"dateRangeEndStore"}),this.subitemExpandedStore=r().default.createValue(new Map,{name:"subitemExpandedStore"}),this.chartErrorStore=r().default.createValue(new Map,{name:"chartErrorStore"}),this.updateFreeChartsResultStore=r().default.createValue(new Map,{name:"updateFreeChartsResultStore"}),this.numberChildrenReceivedStore=r().default.createValue(0,{name:"numberChildrenReceivedStore"}),this.numberChildrenUnfurledStore=r().default.createValue(0,{name:"numberChildrenUnfurledStore"}),this.formsBaseLayoutEditorContextValueStore=r().default.createValue(void 0,{name:"formsBaseLayoutEditorContextValueStore"}),this.formsSpecificLayoutEditorContextValueStore=r().default.createValue(void 0,{name:"formsSpecificLayoutEditorContextValueStore"}),this.formShareMenuButtonPopupStore=new(o(463830).A),this.renderEmitter=new(o(592328).A),this.remoteRequestStoreCallback=void 0,this.localResultStoreCallback=void 0,this.updateCounter={latestRequestUpdateCounter:0,setRemoteResultCounter:void 0},this.isClientModeEnabledStore=r().default.createValue(!1,{name:"isClientModeEnabledStore"}),this.wasServerResponseFromCache=void 0,this.relationQueryingGroup=void 0,this.requestBackend=void 0,this.isViewSpecificClientModeEnabledStore=r().default.createValue(!1,{name:"isViewSpecificClientModeEnabledStore"}),this.throttleMsStore=r().default.createValue(o(252799).e,{name:"throttleMsStore"}),this.timedOutRequestCounter=0,this.asyncAggregationStatusStore=r().default.createValue({calculating:!1,aggregation:void 0,changingType:!1},{name:"asyncAggregationStatusStore"}),this.infiniteScrollLongTaskObserver=new q,this.visitSessionId=o(206267).JW(),this.viewsModuleContextStore=new $,this.forceLocalQueryCollection=!1,this.collectionStoresStore=new(n().default)((()=>{const e=this.collectionViewBlockStore();if(!e)return[];const t=this.collectionStore();return t?[t]:this.remoteCollectionIdsStore.state.map((t=>B().md.createChildStore(e,{table:g().Vl,id:t})))}),{debugName:"collectionStoresStore"}),this.localResultStore=new(n().default)((()=>function(e,t){var n;const{blockIds:r,hasLocalUpdates:a}=t.resultSetStore.state,s=t.collectionViewStore(),l=e.currentUser.id,p=t.remoteRequestStore.state,f=t.remoteResultStore.state;if(!s||!s.isDefined()||!p)return;const _=Date.now(),y=x().A.getIntl(),S=s.getRecordModel,R=s.getRecordRole,E=s.getFormat(),D=s.getType(),N=s.getCollectionSource();if(!N)return;const L=t.collectionStoresStore.state,F=[];for(const o of L){const e=S(o);e&&F.push(e)}if(0===F.length)return;if(t.isLoadedStore.setState(!1),!F.some((e=>P().A.getEditedBlocksForCollection(e.id).size>0))&&f&&!a&&(0,v().n4)(t.lastRemoteRequestStore.state,p))return t.isLoadedStore.setState(!0),f;const U=C().default.DO_NOT_USE_markLegacy("collections.compute_local_result_latency");let O={};switch(t.contextType){case"collectionTypedView":const e=t.databaseType,o=e?(0,i().G2)(e,y):{},n=(0,d().dW)({schemas:[...F.map((e=>{var t;const o=null==e||null===(t=e.getFormat())||void 0===t?void 0:t.app_uri_map,n=e.getNormalizedSchema();return d().u9.toViewSchema(n,o)})),o],onlyPropertyIds:Object.keys(o),prioritizeLooserLimitRule:!0});if(n.error)throw n.error;O=n.value;break;case"collectionSystemView":case"collectionView":case"collectionPage":case"collectionSettings":case void 0:O=F[0].getNormalizedSchema();break;default:(0,h().HB)(t.contextType)}const V=c().Fg(E,D,O),j=t.relativeVariableStore.state,{groupsReducerIds:z,reducerIdsWithNoGroupDependencies:q}=c().M(p.loader.reducers,p.loader.reducerDependencies),H=M().default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs"),W=t.formulasCodeStore.state,K={pageSort:s.getPageSort(),schema:O,loader:p.loader,userId:l,userStartOfWeek:I().XX.state,currentTime:_,getRecordModel:S,getRecordRole:R,intl:x().A.getIntl(),isSorted:!1,visibleProperties:V,relativeVariableResult:j,currentPageInRelatedCollection:null===(n=t.viewsModuleContextStore.currentPageStore())||void 0===n?void 0:n.id,isSprintPlanningView:E.app_config_uri===i().JS,collectionSourceType:N.type,groupsReducerIds:z,reducerIdsWithNoGroupDependencies:q,formulaTimeoutMs:H,resultCache:new Map,regExpCache:new Map,experimentService:M().default,collectionFeatureGates:(0,o(909470).i)(),formulasModule:W},G={...K,loader:{...p.loader,filter:void 0}},$=f?new Set(c().uX({result:f,onlyTypes:["results"]})):new Set,Y=c().zl(K),Q=e.idCreator.getSpaceIdCreatorSync(N.spaceId);for(const i of r){const e=B().Bv.createChildStore(s,{table:m().ev,id:i}),n=e.getAssociatedCollectionStore();if(u().Yd.hasCollections(N)&&(!n||!L.find((e=>{let{id:t}=e;return n.id===t}))))continue;const r=S(e);let a;switch(t.contextType){case"collectionSystemView":if((0,u().TR)(N)){const e=(0,o(415246).XC)(N.type,Q);a=S({table:g().Vl,id:e,spaceId:N.spaceId})}else if((0,u().hJ)(N)){const e=(0,T().NY)((0,o(90634).L)(N));a=e&&k().Bj6.fromCollection(w({source:N,collectionId:e}))}else N.type;break;case"collectionTypedView":case"collectionView":case"collectionPage":case"collectionSettings":case void 0:a=n&&S(n);break;default:(0,h().HB)(t.contextType)}if(!a||!r)continue;const l={...p.loader.upwardTraversalRelation&&$.has(i)&&(0,b().ay)({block:k().Bj6.fromBlock(r),collectionContextStore:t})&&!t.isClientModeEnabledStore.state?G:K,schema:(0,d().zC)(N.type,O,a)};c().UC(r,a,l,Y)}for(const o of F){const e=P().A.getEditedBlocksForCollection(o.id),t=(0,d().zC)(N.type,O,o);for(const n of e){if(r.has(n))continue;const e=S(B().Bv.createChildStore(s,{table:m().ev,id:n}));e&&c().UC(e,o,{...K,schema:t},Y)}}const{result:Z}=c().Mo(K,Y);if(t.isLoadedStore.setState(!0),"reducer"!==Z.type)return;const X=A().kz(t);return C().default.DO_NOT_USE_measureLegacy(U,{environment:e,data:X}),Z}(this.environment,this)),{useDeepEqual:!0,debugName:"localResultStore"}),this.isEmptyStore=new(n().default)((()=>{var e;if(this.isLoadingStore.state||this.shouldShowSpinnerStore.state||v().Im(this.reducersStore.state))return!1;const t=this.localResultStore.state,o=this.remoteResultStore.state,n=this.wasCreatedThisSessionStore.state;if(!t&&o&&0===this.collectionStoresStore.state.length)return!0;const r=null===(e=this.collectionViewStore())||void 0===e?void 0:e.getCollectionSource();if(((0,u().TR)(r)||(0,u().hJ)(r))&&o){if(Object.values(o.reducerResults).every((e=>"results"===e.type&&0===e.blockIds.length)))return!0}if(!t||"reducer"!==t.type||!o||"reducer"!==o.type)return!1;const i=Object.values(t.reducerResults).filter((e=>"results"===e.type)),a=Object.values(o.reducerResults).filter((e=>"results"===e.type));return!(!n&&0===a.length)&&(0!==i.length&&i.every((e=>"results"===e.type&&0===e.blockIds.length)))}),{debugName:"isEmptyStore"}),this.remoteRequestStore=new(n().default)((()=>{var e;const t=(null===(e=H().default.state.currentUserSettingsStore)||void 0===e?void 0:e.getSettingsStore().getKeyStore("time_zone").getValue())||(0,o(416504).P)();return y(this.environment,this,t)}),{debugName:"remoteRequestStore"}),this.normalizedFormatStore=new(n().default)((()=>{const e=this.collectionViewBlockStore(),t=this.collectionViewStore(),o=null==t?void 0:t.getType(),n=this.normalizedQueryStore.state,r=this.normalizedSchemaStore.state,i=null==t?void 0:t.getNormalizedFormat(r);return e&&t&&o&&n&&i?this.isInHomeWidgetStore.state?{...i,...(0,T().m6)()}:i:{}}),{useDeepEqual:!0,debugName:"normalizedFormatStore"}),this.normalizedSchemaStore=new(n().default)((()=>{const e=this.contextStore.state;switch(null==e?void 0:e.type){case"collectionTypedView":const t=(0,i().X)(e.databaseType,x().A.getIntl())??{};if(!this.collectionViewBlockStore())return t;const n=this.collectionStoresStore.state;if(0===n.length)return t;const r=(0,d().dW)({schemas:[...n.map(o(271372).D2),t],onlyPropertyIds:Object.keys(t),prioritizeLooserLimitRule:!0});return r.error?t:r.value;case"collectionSystemView":case"collectionView":case"collectionPage":case"collectionSettings":case void 0:const a=this.collectionStore();return a?a.getSchema():(0,f().RX)(x().A.getIntl());default:(0,h().HB)(e)}}),{useDeepEqual:!0,debugName:"normalizedSchemaStore"}),this.normalizedDeletedSchemaStore=new(n().default)((()=>{if("collectionTypedView"===this.contextType)return{};const e=this.collectionStore();return e?e.getDeletedSchema():(0,f().RX)(x().A.getIntl())}),{useDeepEqual:!0,debugName:"normalizedDeletedSchemaStore"}),this.normalizedQueryStore=new(n().default)((()=>{const e=this.collectionViewStore();if(e){const t=e.getType();if(t){const o=this.normalizedSchemaStore.state;return(0,c().cu)({type:t,query2:e.getQueryStore().getValue()},o)}}}),{useDeepEqual:!0,debugName:"normalizedQueryStore"}),this.subitemTreeStore=new(n().default)((()=>(0,b().jF)(this,this.environment.currentUser.id)),{debugName:"subitemTreeStore"}),this.shouldShowSpinnerStore=new(n().default)((()=>{var e,t,o,n;if(!this.isLoadingStore.state)return!1;const r=null===(e=this.lastRemoteRequestStore.state)||void 0===e?void 0:e.loader,i=null===(t=this.remoteRequestStore.state)||void 0===t?void 0:t.loader;if(!v().n4(null==r?void 0:r.filter,null==i?void 0:i.filter))return!0;if(!v().n4(null==r?void 0:r.sort,null==i?void 0:i.sort))return!0;if(!v().n4(null==r?void 0:r.searchQuery,null==i?void 0:i.searchQuery))return!0;if(!v().n4(null===(o=this.lastRemoteRequestStore.state)||void 0===o?void 0:o.source,null===(n=this.remoteRequestStore.state)||void 0===n?void 0:n.source))return!0;const a=(null==r?void 0:r.reducers)||{},s=(null==i?void 0:i.reducers)||{};for(const l in s){const e=s[l],t=a[l];if(!v().n4(e,t))return!0}return!1}),{debugName:"shouldShowSpinner"}),this.shouldShowSourceStore=new(n().default)((()=>{const e=this.collectionViewBlockStore(),t=this.collectionViewStore(),o=this.collectionStore();if(!e||!t||!o)return!1;if("form_editor"===t.getType())return!1;const n=Boolean(e.getCollectionPointerIfSingleSource());return!(this.isFullScreenStore.state&&n||this.normalizedFormatStore.state.hide_linked_collection_name)}),{debugName:"shouldShowSource"}),this.isInlineViewStore=new(n().default)((()=>!this.isFullScreenStore.state),{debugName:"isInlineView"}),this.isUnlistedViewStore=new(n().default)((()=>{var e;return(null===(e=this.collectionViewStore())||void 0===e||null===(e=e.getUnlistedStatus())||void 0===e?void 0:e.isUnlisted)??!1}),{debugName:"isUnlistedView"}),this.isInHomeWidgetStore=new(n().default)((()=>{const e=this.collectionViewBlockStore(),t=null==e?void 0:e.getParentBlockStore();return!(!e||!t)&&((0,T().lU)(H().default.state.mainEditorCurrentBlockStore)&&(0,T().lU)(t)&&!this.isInPeekRendererStore.state&&!this.isUnlistedViewStore.state&&!o(489348).A.isBlockInTemplate(e))}),{debugName:"isInHomeWidget"}),this.isEditableHomeCollectionStore=new(n().default)((()=>{var e;const t=null===(e=this.collectionViewBlockStore())||void 0===e?void 0:e.id;return!!t&&((0,I().sj)(t)||(0,I().Wu)(t))}),{debugName:"isEditableHomeCollection"}),this.isInTrashStore=new(n().default)((()=>{const e=this.collectionStore(),t=null==e?void 0:e.getParentBlockStore(),o=Boolean(null==t?void 0:t.pathIsDead()),n=this.collectionViewBlockStore(),r=Boolean(null==n?void 0:n.pathIsDead());return o||r}),{debugName:"isInTrash"}),this.permissionScopesStore=new(n().default)((()=>{var e;const t=this.collectionStore(),n=this.collectionViewStore(),r=this.collectionViewBlockStore(),i=this.isFullScreenStore.state,a=null==t?void 0:t.getParentBlockStore(),s=Boolean(null==a?void 0:a.pathIsDead()),l=Boolean(null==r?void 0:r.pathIsDead()),c=this.viewsModuleContextStore.isInLayoutBuilder(),d=s||l,u=!d&&(R().vo({collectionStore:t,collectionViewBlockStore:r,checkNavigableAncestorLocked:!i})||"collectionTypedView"===this.contextType),p=Boolean(null==r?void 0:r.isLocked()),m=Boolean(null==t?void 0:t.isSyncedCollection()),g=Boolean(null==t?void 0:t.isExternallyImportedAndSyncedCollection())&&"on"===M().default.getEligibleGroup({experimentId:"jira_import_and_sync",defaultGroup:"control"});if(null!==(e=this.previewContext)&&void 0!==e&&e.disableAllPointerEvents)return{canConfigureCollection:!1,canConfigureBlock:!1,canEditContent:!1,isLocked:!1,isSyncedCollection:!1,isExternallyImportedAndSyncedCollection:!1};if(!n||!r)return{canConfigureCollection:u,canConfigureBlock:Boolean((null==r?void 0:r.canEditCollection())&&!r.isNonEditableState()),canEditContent:Boolean((null==r?void 0:r.canEditCollection())||(null==r?void 0:r.canEditContentOnly()))&&!d&&!c,isLocked:p,isSyncedCollection:m,isExternallyImportedAndSyncedCollection:g};if("collectionSettings"===this.contextType)return{canConfigureCollection:!0,canConfigureBlock:!0,canEditContent:!1,isLocked:!1,isSyncedCollection:!1,isExternallyImportedAndSyncedCollection:!1};if(this.viewsModuleContextStore.state&&!this.viewsModuleContextStore.isInLayoutBuilder())return{canConfigureCollection:!1,canConfigureBlock:!1,canEditContent:Boolean((null==r?void 0:r.canEditCollection())||(null==r?void 0:r.canEditContentOnly()))&&!d&&!c,isLocked:p,isSyncedCollection:m,isExternallyImportedAndSyncedCollection:g};const f=!i&&r.isNavigableAncestorNonEditableState(),v=Boolean(r.inMemoryRecordCache.snapshotData),h=o(411671).A.getMode(this.environment,r);if(f||v||"comment"===(null==h?void 0:h.permission)||"view"===(null==h?void 0:h.permission))return{canConfigureCollection:u,canConfigureBlock:!1,canEditContent:!1,isLocked:p,isSyncedCollection:m,isExternallyImportedAndSyncedCollection:g};const _=r.canEditCollection()&&!(p||l);let b=!d&&!c&&("collectionTypedView"===this.contextType||Boolean(t&&t.canEdit()));if((null==r?void 0:r.isLinkedCollectionView())&&!c){const e=null==r?void 0:r.getRole(),t=n.getFormatStore().getKeyStore("collection_pointer").getValue();if(t){const n=new(B().md)(this.environment,t).getParentBlockStore(),r=null==n?void 0:n.getRole();e&&r&&(0,o(433847).sO)(r,e)&&(b=(0,o(68263).p2)(e))}}return this.isUnlistedViewStore.state&&(b=!1),{canConfigureCollection:u,canConfigureBlock:_,canEditContent:b,isLocked:p,isSyncedCollection:m,isExternallyImportedAndSyncedCollection:g}}),{debugName:"permissionScopes"}),this.localStateDiffStore=new(n().default)((()=>(0,_().Ml)(this,"normalized")),{useDeepEqual:!0,debugName:"localStateDiffStore"}),this.currentCombinatorFilterStore=new(n().default)((()=>{var e;const t=this.temporaryStateStore.state.combinatorFilter;return t?t.value:null===(e=this.normalizedQueryStore.state)||void 0===e?void 0:e.filter}),{useDeepEqual:!0,debugName:"currentCombinatorFilterStore"}),this.currentSubitemFormatStoreForUiDisplayStore=new(n().default)((()=>{var e,t;const o=(null===(e=this.collectionViewStore())||void 0===e?void 0:e.getFormat().subitem_display_mode)??"show";if("disabled"===o||"hidden"===o||"flattened"===o)return;const n=(0,b().r6)(this),r=null===(t=this.collectionViewStore())||void 0===t?void 0:t.getType(),i=(0,_().N1)({collectionContextStore:this,applySubitemFilter:!1,filterOutHideSubitemsQuickFilter:!1}),s=(0,a().GV)(i);return s&&(0,a().CU)(s,(e=>!!(0,a().yX)(e)&&(e.property===(null==n?void 0:n.property)||e.property===(null==n?void 0:n.inverse))))&&r&&!(0,b().qS)(r)?void 0:n}),{useDeepEqual:!0,debugName:"currentSubitemFormatStoreForUiDisplay"}),this.currentSubitemFormatStoreForCollectionStore=new(n().default)((()=>(0,b().r6)(this)),{useDeepEqual:!0,debugName:"currentSubitemFormatStoreForCollection"}),this.currentArrowsByFormatStore=new(n().default)((()=>(0,o(690471).tH)(this)),{useDeepEqual:!0,debugName:"currentArrowsByFormatStore"}),this.currentPropertyFiltersStore=new(n().default)((()=>{const e=this.normalizedSchemaStore.state,t=this.temporaryStateStore.state.propertyFilters;return(t?t.value||[]:this.normalizedFormatStore.state.property_filters||[]).map((t=>{const o=(0,c().hs)(t.filter,e),n=this.collectionViewBlockStore();if(e[t.filter.property]&&o&&(0,a().tn)(e,t.filter.property,o.filter,null==n?void 0:n.getRecordModel))return o&&{id:t.id,filter:o}})).filter(h().O9).sort((0,_().IW)())}),{useDeepEqual:!0,debugName:"currentPropertyFiltersStore"}),this.currentSortsStore=new(n().default)((()=>{var e;const t=this.temporaryStateStore.state.sorts;return t?t.value||[]:(null===(e=this.normalizedQueryStore.state)||void 0===e?void 0:e.sort)||[]}),{useDeepEqual:!0,debugName:"currentSortsStore"}),this.defaultPageTemplateStore=new(n().default)((()=>{var e,t;const o=this.collectionStore(),n=this.collectionViewStore(),r=v().oE([null==n||null===(e=n.getFormat())||void 0===e?void 0:e.collection_view_default_template,null==o||null===(t=o.getFormat())||void 0===t?void 0:t.collection_default_template]),i=null==o?void 0:o.getTemplatePageStores();for(const a of r){if("empty"===a)return;const e=null==i?void 0:i.find((e=>e.id===a.template_page_id));if(null!=e&&e.getAlive())return e}}),{debugName:"defaultPageTemplateStore"}),this.relativeVariableStore=new(n().default)((()=>{const e=this.contextStore.state;if(!e)return;const t=e.collectionViewBlockStore;if(!t)return;const o={},n=this.privateRelativeVariableStore.state;for(const[r,i]of(0,h().WP)(n)){const e=B().md.createChildStore(t,{id:r,table:g().Vl}),n=e.getSchema(),a=null==e?void 0:e.getFormat().app_config_uri;if(a&&(0,p().GN)(n,a)){o[r]={};for(const[t,s]of(0,h().WP)(i)){const i=B().Bv.createChildStore(e,{id:s,table:m().ev});i.isDefined()&&((0,z().QZ)({blockStore:i,collectionId:r,appConfigUri:a,variable:t,schema:n})&&(o[r][t]=s))}}}return o}),{useDeepEqual:!0,debugName:"relativeVariableStore"}),this.relativeVariablesAreStaleStore=new(n().default)((()=>{const e=this.contextStore.state;if(!e)return!1;const t=e.collectionViewBlockStore;if(!t)return!1;const o=this.privateRelativeVariableStore.state;for(const[n,r]of(0,h().WP)(o)){const e=B().md.createChildStore(t,{id:n,table:g().Vl}),o=e.getSchema(),i=null==e?void 0:e.getFormat().app_config_uri;if(i&&(0,p().GN)(o,i))for(const[t,a]of(0,h().WP)(r)){const r=B().Bv.createChildStore(e,{id:a,table:m().ev});if(r.isDefined()&&!(0,z().QZ)({blockStore:r,collectionId:n,appConfigUri:i,variable:t,schema:o}))return!0}}return!1}),{debugName:"relativeVariablesAreStale"}),this.aliveAutomationCountStore=new(n().default)((()=>{const e=this.collectionStore();if(!e)return 0;const t=e.getAutomationStores();let o=0;for(const n of t)n.isDisplayableInCollectionSettings()&&n.getAlive()&&(o+=1);return o}),{debugName:"aliceAutomationCount"}),this.completeSprintButtonContextStore=new(n().default)((()=>{var e,t;if((null===(e=this.collectionViewStore())||void 0===e?void 0:e.getFormatStore().getKeyStore("app_config_uri").getValue())!==i().Lu)return;const o=this.sprintSettingsContextStore.state;if(!o||!o.sprintCollectionStore)return;if(!o.automationContext)return;const{sprintCollectionStore:n,taskCollectionStore:r,automationContext:a}=o,s=this.getAutomationCollectionValue(r),l=this.getAutomationCollectionValue(n),c=null==l||null===(t=l.format)||void 0===t?void 0:t.app_config_uri,d=n.getSchema();return(0,p().wy)({appUri:c,collectionSchema:d})&&s&&l?{...o,sprintCollectionStore:n,taskCollectionValue:s,sprintCollectionValue:l,sprintCollectionSchema:d,automationContext:a}:void 0}),{useDeepEqual:!0,debugName:"getCompleteSprintButtonContext"}),this.sprintSettingsContextStore=new(n().default)((()=>{const e=(()=>{var e;const t=this.collectionStore(),o=this.collectionViewBlockStore();if(!o||!t)return;const n=t.getParentBlockStore();if(!n||!Boolean(n.pathIsAccessibleAndAlive()))return;const r=t.getDatabaseType();if(r!==i().av&&r!==i().dC)return;let a,s,c,d;if(r===i().dC){var u;a=t,s=n;const e=null===(u=a.getFormatStore().getKeyStore("app_uri_map").getValue())||void 0===u?void 0:u[i().yx.TaskToSprintRelation];if(!e)return{currentCollectionViewBlockStore:o,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:void 0,sprintCollectionViewBlockStore:void 0,automationContext:void 0,automationContextLoaded:!0};const r=a.getSchemaStore().getKeyStore(e).getValue();if(!r||!l().nC(r))return;const p=l().Nv(r);if(!p)return{currentCollectionViewBlockStore:o,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:void 0,sprintCollectionViewBlockStore:void 0,automationContext:void 0,automationContextLoaded:!0};if(c=B().md.createChildStore(o,p),d=c.getParentBlockStore(),!d)return{currentCollectionViewBlockStore:o,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:void 0,sprintCollectionViewBlockStore:void 0,automationContext:void 0,automationContextLoaded:!0};if(c.getDatabaseType()!==i().av)return}else if(r===i().av){var p;c=t,d=n;const e=null===(p=c.getFormatStore().getKeyStore("app_uri_map").getValue())||void 0===p?void 0:p[i().Hx.SprintToTaskRelation];if(!e)return;const r=c.getSchemaStore().getKeyStore(e).getValue();if(!r||!l().nC(r))return;const u=l().Nv(r);if(!u)return;if(a=B().md.createChildStore(o,u),s=a.getParentBlockStore(),a.getDatabaseType()!==i().dC||!s)return}else(0,h().HB)(r);if(!Boolean(a.getAlive())||!s.pathIsAccessibleAndAlive())return;if(!Boolean(c.getAlive())||!d.pathIsAccessibleAndAlive())return{currentCollectionViewBlockStore:o,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:void 0,sprintCollectionViewBlockStore:void 0,automationContext:void 0,automationContextLoaded:!0};const m=null===(e=c)||void 0===e?void 0:e.getAutomationStores();if(null!=m&&m.some((e=>!e.isDefined())))return{currentCollectionViewBlockStore:o,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:void 0,sprintCollectionViewBlockStore:void 0,automationContext:void 0,automationContextLoaded:!0};let g;for(const i of m)if(Boolean(i.getAlive())&&i.isCompleteSprintAutomation()){const e=i.getActionStores();if(1===e.length&&Boolean(e[0].getAlive())&&e[0].isType("complete_sprint")){g={automationStore:i,automationActionStore:e[0]};break}}const f=c.isDefined()&&m.every((e=>e.isDefined()&&e.getActionStores().every((e=>e.isDefined()))));return{currentCollectionViewBlockStore:o,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:c,sprintCollectionViewBlockStore:d,automationContext:g,automationContextLoaded:f}})(),t=(e=>{var t;if(!e)return;if(!e.taskCollectionViewBlockStore.canEditCollection())return{canEdit:!1};const o=e.sprintCollectionViewBlockStore,n=Boolean(null===(t=e.sprintCollectionViewBlockStore)||void 0===t?void 0:t.canEditCollection());return o&&!n?{canEdit:!1}:!e.sprintCollectionViewBlockStore||n&&!e.automationContext?{canEdit:!0,sprintsEnabled:!1}:n&&e.automationContext?{canEdit:!0,sprintsEnabled:!0}:void 0})(e);return e&&t?{...e,permissionsContext:t}:void 0}),{useDeepEqual:!0,debugName:"sprintSettingsContextStore"}),this.formulasCodeStore=r().default.createValue(void 0,{name:"formulasCodeStore"}),this.itemMountedCallbacks=new N,this.databaseItemsVisibleTracker=void 0,this.onItemMount=e=>{var t;null===(t=this.databaseItemsVisibleTracker)||void 0===t||t.handleItemMount(),this.trackInfiniteScrollLongTasksDebounced(),e&&this.itemMountedCallbacks.executeCallbacks(e)},this.trackInfiniteScrollLongTasksDebounced=v().sg(this.trackInfiniteScrollLongTasks,1e3),this.groupsForTypedDatabasesStore=new(n().default)((()=>{const e=H().default.state.currentSpaceStore;if(e&&"collectionTypedView"===this.contextType)return(0,o(895876).uK)({environment:this.environment,typedCollections:this.collectionStoresStore.state,spaceStore:e})}),{debugName:"groupsForTypedDatabasesStore"}),this._virtualizedModule=new O(this),this.timingTracker=new L,this.externalSyncStore=new(n().default)((()=>{const e=this.collectionStore();if(!e)return;if(!e||!e.isExternallyImportedAndSyncedCollection())return;const t=M().default.checkGate({gateName:"jira_2_way_sync"}),n=e.getFormat().synced_collection_instance_type,{synced_collection_external_url:r}=e.getFormatStore().getValue()||{},i=G().A.twoWaySyncExternalEntitiesStore.state.filter((e=>{var t;if(e.external_integration_id!==o(617871).me)return!1;const n=Object.keys((null===(t=e.getMetainfo())||void 0===t?void 0:t.supportedSites)||{});return!!n.length&&(r&&n.includes(r))}));return{shouldAllowUserToEditSyncedCollection:()=>{var o;if(!t)return!1;if(i.length>0&&"DataCenter"!==n)return!0;const r=null===(o=e.getFormat())||void 0===o?void 0:o.bot_id;return!!r&&!!G().A.externalAuthentications.getState().find((e=>e.parent_id===r))}}}),{debugName:"externalSyncStore"}),this.environment=e,this.previewContext=t,this.groupsStore=new W(this,e)}setContext(e){this.contextStore.setState(e)}get contextType(){var e;return null===(e=this.contextStore.state)||void 0===e?void 0:e.type}get isMultiSourceView(){return"collectionTypedView"===this.contextType}get databaseType(){const e=this.contextStore.state;if(e){if("collectionTypedView"===e.type)return e.databaseType;if("collectionView"===e.type){const t=e.collectionStore;return null==t?void 0:t.getDatabaseType()}}}getPreviewContextAnalytics(){if(this.previewContext)return{location:this.previewContext.location,flowId:this.previewContext.flowId}}collectionViewStore(){const e=this.contextStore.state,t=null==e?void 0:e.type;if(t)switch(t){case"collectionTypedView":case"collectionView":case"collectionSystemView":case"collectionSettings":return e.collectionViewStore;case"collectionPage":return;default:(0,h().HB)(t)}}collectionStore(){const e=this.contextStore.state;if(e&&"collectionTypedView"!==e.type)return"collectionSystemView"===e.type||"collectionView"===(null==e?void 0:e.type)||"collectionPage"===(null==e?void 0:e.type)||"collectionSettings"===(null==e?void 0:e.type)?e.collectionStore:void(0,h().HB)(e)}hasSingleCollection(){switch(this.contextType){case"collectionTypedView":case"collectionSystemView":return!1;case"collectionSettings":case"collectionPage":case"collectionView":case void 0:return!0;default:(0,h().HB)(this.contextType)}}collectionViewBlockStore(){const e=this.contextStore.state;return null==e?void 0:e.collectionViewBlockStore}formatStore(){const e=this.contextStore.state;if(e)return"collectionPage"===e.type?e.collectionStore:"collectionView"===e.type||"collectionTypedView"===e.type||"collectionSystemView"===e.type?e.collectionViewStore:void("collectionSettings"!==e.type&&(0,h().HB)(e))}getPropertyFormatKey(){const e=this.contextStore.state;if("collectionPage"===(null==e?void 0:e.type))return"collection_page_properties";if("collectionView"===(null==e?void 0:e.type)||"collectionTypedView"===(null==e?void 0:e.type)){const t=e.collectionViewStore,n=null==t?void 0:t.getType();if(!n)return;return o(651124).u9(n)}}getPropertyFormat(e){var t;const o=null===(t=this.formatStore())||void 0===t?void 0:t.getFormat(),n=null==this?void 0:this.getPropertyFormatKey();if(!o||!n)return;return(o[n]??[]).find((t=>t.property===e))}createUpdateCounter(){return this.updateCounter.latestRequestUpdateCounter++,this.updateCounter}shouldUpdate(e){return M().default.checkGate({gateName:"collection_view_update_counter"})?!this.updateCounter.setRemoteResultCounter||this.updateCounter.setRemoteResultCounter<=e:this.updateCounter.latestRequestUpdateCounter===e}setUpdateCounterWithResponseCounter(e){this.updateCounter.setRemoteResultCounter=Math.max(e,this.updateCounter.setRemoteResultCounter??0)}getCurrentUserId(){return this.environment.currentUser.id}getViewType(){const e=this.collectionViewStore();if(null!=e&&e.isDefined())return e.getType();const t=this.contextStore.state;return"collectionPage"===(null==t?void 0:t.type)?"page":void 0}currentViewHasSort(){const e=this.normalizedQueryStore.state;return Boolean(e&&e.sort&&e.sort.length>0)}resetLoadingState(){this.isLoadingStore.setState(!1),this.loadingDetailsStore.reset()}getCollectionViewBlockSourceState(){const e=this.collectionViewBlockStore();if(!e)return"uninitialized";if(e.getCollectionViewSourceCollectionStore())return"source";return e.getCollectionViewStores().some((e=>Boolean(e.getCollectionStore())))||this.isEditableHomeCollectionStore.state?"linked":"uninitialized"}getFilterBarItemSettingsStore(e){let t=this.filterBarItemSettingsStoreMap.get(e.id);return t||(t=r().default.createValue({open:!1,stack:[]}),this.filterBarItemSettingsStoreMap.set(e.id,t)),t}getFilterOptionsItemSettingsStore(e){let t=this.filterOptionsItemSettingsStoreMap.get(e.id);return t||(t=r().default.createValue({open:!1,stack:[]}),this.filterOptionsItemSettingsStoreMap.set(e.id,t)),t}allowScrollingWhenCollectionSettingsSidebarOpen(){return"form_editor"===this.getViewType()}viewIsFlushToTopbar(){if(!this.collectionStore())return!1;if(this.shouldShowSourceStore.state)return!1;if(this.filtersBarOpenStore.state)return!1;return void 0===this.completeSprintButtonContextStore.state}shouldAllowNewItemCreation(e){var t;const o=this.permissionScopesStore.state,n="collectionTypedView"===this.contextType;return(null===(t=this.collectionStore())||void 0===t||!t.isExternallyImportedAndSyncedCollection()||"on"!==M().default.getEligibleGroup({experimentId:"jira_import_and_sync",defaultGroup:"control"}))&&(!o.isSyncedCollection&&(o.canEditContent||n&&(null==e?void 0:e.overrideAllowForTypedViews)))}shouldShowPageIcon(){var e;return(null===(e=this.collectionViewStore())||void 0===e?void 0:e.shouldShowPageIcon())??!0}getAutomationCollectionValue(e){if(e.isDefined())return{id:e.id,space_id:e.getSpaceId(),schema:e.getSchema(),format:e.getFormat()}}registerCallbackForItemMounted(e,t){this.itemMountedCallbacks.registerCallback(e,t)}async trackInfiniteScrollLongTasks(){if(!this.infiniteScrollLongTaskObserver.isObserving)return;this.infiniteScrollLongTaskObserver.disconnect();const e=this.infiniteScrollLongTaskObserver.takeRecords(),t=A().kz(this),o=await V().LM({eventName:"collections.infinite_scroll_long_tasks.max_duration",eventProperties:t,sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}});if(!o)return;const n=e.reduce(((e,t)=>(e.entryCount++,e.maxDuration=Math.max(e.maxDuration,t.duration),e)),{maxDuration:0,entryCount:0});V().vd(this.environment,"collections.infinite_scroll_long_tasks.count",{count:n.entryCount,...t,sample_decision:o},{sampling:{behavior:"decided",sampleDecision:o}}),n.entryCount>0&&V().vd(this.environment,"collections.infinite_scroll_long_tasks.max_duration",{time:n.maxDuration,...t,sample_decision:o},{sampling:{behavior:"decided",sampleDecision:o}})}getPageVisitSourceOverride(){var e;switch(null===(e=this.contextStore.state)||void 0===e?void 0:e.type){case"collectionTypedView":case"collectionSystemView":case"collectionView":return this.contextStore.state.pageVisitSourceOverride;case"collectionPage":case"collectionSettings":case void 0:return;default:(0,h().HB)(this.contextStore.state)}}getGroupByAndGroupFormats(){const e=this.getViewType(),t=this.normalizedFormatStore.state,o="board"===e?{groupByKey:"board_columns_by",groupsFormatKey:"board_columns"}:{groupByKey:"collection_group_by",groupsFormatKey:"collection_groups"};return{groupBy:t[o.groupByKey],groupFormats:t[o.groupsFormatKey]??[]}}resultsInViewOrder(e){var t;const o=this.collectionViewBlockStore(),n=this.collectionViewStore(),r=this.collectionStoresStore.state;if(!o||!n||!r.length)return[];const{groupBy:i,groupFormats:a}=this.getGroupByAndGroupFormats(),l=this.normalizedSchemaStore.state,c=(0,h().O9)(i)?(0,s().oH)({schema:l,groupBy:i}):[],d=Object.values((null===(t=this.localResultStore.state)||void 0===t?void 0:t.reducerResults)??{}).find((e=>"groups"===e.type));if(!d)return[];const u="v2"===d.version?a:(0,j().ck)({getRecordModel:o.getRecordModel,getRecordRole:o.getRecordRole,schema:l,groupBy:i,formatGroups:a,schemaGroups:c,reducerResults:(null==d?void 0:d.results)??[],relativeVariableResult:this.relativeVariableStore.state,viewAppConfigUri:n.getFormat().app_config_uri,allowedCollectionStores:r});let p,m;if(0===u.length){const e=this.localResultStore.state;if(e){const t=Object.values(e.reducerResults).find((e=>"results"===e.type));p=((null==t?void 0:t.blockIds)??[]).map((e=>B().Bv.createChildStore(n,{table:"block",id:e})))}else p=[]}else{p=[];for(const e of u){const t=this.groupsStore.getGroupState(e),o=null==t?void 0:t.resultsStore.state;p.push(...o??[])}}if(p=v().hS(p,(e=>e.id)),this.currentSubitemFormatStoreForUiDisplayStore.state){m=[];const t=this.subitemTreeStore.state;for(const o of p){if(void 0!==e&&m.length>=e)break;const n=t.children.find((e=>e.value.store.id===o.id));if(n){const e=[];(0,b().yS)({results:e,tree:n}),m.push(...e)}}}else m=p;return void 0!==e?m.slice(0,e):m}collectionStoreResultsInViewOrder(){if("collectionTypedView"!==this.contextType){const e=this.collectionStore();return e?[e]:[]}const e=this.resultsInViewOrder(void 0);return v().oE(v().hS(e.map((e=>e.getAssociatedCollectionStore())),"id"))}get virtualizedModule(){return this._virtualizedModule}}Y.incrementScrollOffset=600;const Q=Y},441467:(e,t,o)=>{o.d(t,{DZ:()=>U,Ek:()=>q,hN:()=>V,i5:()=>j,of:()=>O});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(803949);var n=()=>o(700500),r=()=>o(179034),i=()=>o(197959),a=()=>o(161479),s=()=>o(798880),l=()=>o(919709),c=()=>o(878523),d=()=>o(112873),u=()=>o(383594),p=()=>o(246826),m=()=>o(332751),g=()=>o(538527),f=()=>o(317909),v=()=>o(892632),h=()=>o(594794),_=()=>o(972435),b=()=>o(962845),y=()=>o(299545),S=()=>o(347199),w=()=>o(953418),k=()=>o(906537),I=()=>o(486666),A=()=>o(372154),x=()=>o(630116),C=()=>o(404783),T=()=>o(555776),M=()=>o(116008),P=()=>o(543225),B=()=>o(59320),R=()=>o(528787),E=()=>o(681634),D=()=>o(583824),N=()=>o(36088),L=()=>o(807060),F=()=>o(405981);const U=(0,o(959013).YK)({emojiPicker:{defaultMessage:"Reaction",id:"ReactionBar.emojiModalMenu.title"},emojiTitle:{id:"recordIcon.emojiTab.title",defaultMessage:"Emoji"}});function O(e){const{environment:t,blockStore:o,multiSelection:n,rect:r,formulasModule:i}=e;let a=r;if(!a){const e=k().get();if(!e)return;a=k().getRect(e)}if(!a)return;const s=a.width,l=a.height,c=a.right-s;M().A.setState({open:!0,rect:new DOMRect(c,a.top,s,l),type:"inline",content:"reaction",blockStore:o,blockId:o.id,multiSelection:n,emoji:void 0}),u().W(t,{originGap:4,originRect:a,popupWidth:I().jv,popupHeight:I().GF,isSmallWidth:!1,title:_().A.formatMessage(U.emojiPicker),currentTab:"emoji",onCancel:()=>M().A.reset(),tabs:[{type:"emoji",title:_().A.formatMessage(U.emojiTitle),hideRandomButton:!0,onChange:e=>{const o=M().A.state;o.open&&"reaction"===o.content&&(M().A.setState({...o,emoji:e}),j({environment:t,formulasModule:i}),u().I())}}]})}async function V(e){var t;const{environment:o,blockStore:n,multiSelection:r,rect:i,from:s,property_id:l}=e;if(M().A.hasContent())return void(0,F()._y)({environment:o,reason:"starting_new"});let d=i;if(!d){const e=k().get();if(!e)return;d=k().getRect(e)}if(!d)return;const u=d.width,p=d.height,g=d.right-u,f=new(C().A)(o,(0,a().e)(n.pointer.spaceId));M().A.setState({open:!0,rect:new DOMRect(g,d.top,u,p),type:"inline",content:"comment",blockStore:n,lastKnownBlockStore:n,blockId:n.id,multiSelection:r,lastEditables:(0,b().$W)(r),discussionInputStore:f,property_id:l,from:s}),w().VG({element:null===(t=S().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:o,options:{top:0,behavior:"smooth"}}),T().A.setActiveWithSource("text_annotation"),m().I(),await(0,N().M)({discussionInputStore:f,environment:o}),c().z0(o,{from:s})}function j(e){const{environment:t,allowActionsWhileCommenting:o,skipOpeningDiscussion:a,formulasModule:u}=e,p=M().A.state;if(p.open){const e="comment"===p.content?p.property_id:void 0,m=M().A.getBlockStore()??M().A.getLastKnownBlockStore();if(M().A.hasContent()&&(!o||m))if("inline"===p.type)f().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:a=>{const s=function(e){const{environment:t,multiSelection:o,transaction:a,allowActionsWhileCommenting:s}=e,{id:c}=t.currentUser;if(!c)return;const d=s?M().A.getLastSelectedEditables():(0,b().$W)(o).filter((e=>{let{store:t}=e;return t.table===r().ev}));if(!d||0===d.length)return;const u=d[0].store.getRecordStoreAtRootPath(),p=(0,h().Z1)({environment:t,table:i().$Y,spaceId:u.pointer.spaceId}),m=[],f=new Set;d.forEach(((e,o)=>{let{store:r,selection:i}=e;f.add(r.id);const s=r.getRecordStoreAtRootPath();if(!(s instanceof x().Bv))return;const c=s.getType(),d=s.getFormat();if(c&&(0,n().pD)(c,d))return;let u=r.getValue();const v=l().xbM(u,i);g().Mw({environment:t,store:r,selection:v,annotation:[l().Ifu.Discussion,p],transaction:a}),u=r.getValue();const h=l().Ffo(u,v.startIndex,v.endIndex),_=0===o?[]:[l().Ey_("\n")];m.push(..._,...h)}));const v=(0,b().ZS)({multiSelection:o,filterCommonAncestors:!1,focus:void 0});if(v)for(const r of v.stores){if(f.has(r.id))continue;const e=r.getType(),t=r.getFormat();e&&(0,n().pD)(e,t)||(0,P().B)({blockStore:r,discussionId:p,transaction:a})}return{blockStore:u,context:m,discussionId:p}}({environment:t,multiSelection:p.multiSelection,transaction:a,allowActionsWhileCommenting:o});if(!s)return;const{context:d,blockStore:u,discussionId:f}=s;if("comment"===p.content){const n=p.discussionInputStore.state.textStore.getValue()||[],r=p.discussionInputStore.state.files,{discussionStore:i,commentStore:s}=(0,B().G)({createDiscussionArgs:{type:"default",context:d,property_id:e},blockStore:u,environment:t,transaction:a,commentTextValue:n,files:v().JC(r),discussionId:f}),{property_type:l,collection_id:g,collection_view_id:h,view_type:_,collection_view_block_id:b}=(0,L().q)(e,m);c().bJ(t,{discussion_id:i.id,discussion_type:i.getType(),comment_id:s.id,parent_block_id:i.getParentId(),from:M().A.state.open&&"comment"===M().A.state.content?M().A.state.from:void 0,property_id:e,property_type:l,collection_view_id:h,view_type:_,collection_id:g,collection_view_block_id:b}),o&&A().A.addNewDiscussionId(f)}else p.emoji&&z({context:d,blockStore:u,environment:t,transaction:a,icon:p.emoji,discussionId:f})},skipUpdatingEditedMetadata:!0});else if("block"===p.type)if("comment"===p.content){const n=p.discussionInputStore.state.textStore.getValue()||[],r=p.discussionInputStore.state.files;o?m&&f().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:o=>{(0,D().i)({environment:t,type:"default",blockStore:m,commentTextValue:n||[],files:r,transaction:o,property_id:e,formulasModule:u})},skipUpdatingEditedMetadata:!0}):f().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:o=>{(0,D().i)({environment:t,type:"default",blockStore:p.blockStore,commentTextValue:n||[],files:r,transaction:o,property_id:e,formulasModule:u})},skipUpdatingEditedMetadata:!0})}else{const e=t.currentUser.id,{emoji:o,blockStore:n}=p,r=y().O3(n,{recursivelyLoadAllDiscussions:!1}).find((e=>e.getReactions().length>0));o&&e&&f().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDefaultDiscussion.addReaction",environment:t,canUndo:!0,perform:i=>{null!=r&&r.isDefined()?R().createReaction({environment:t,transaction:i,store:r,icon:o,currentActorPointer:{table:s().oo,id:e},discussionLocation:"block_menu"}):z({context:void 0,blockStore:n,environment:t,transaction:i,icon:o})},skipUpdatingEditedMetadata:!0})}(0,E().c)(t);const _=o?m&&m.getAssociatedCollectionStore():p.blockStore.getAssociatedCollectionStore();a||e||!_||d().B4({environment:t,blockStore:o?m??p.blockStore:p.blockStore,shouldFocusDiscussion:!0,analyticsFrom:"db_page_comments",rect:M().A.state.rect,recursivelyLoadAllDiscussions:!1})}}function z(e){const{context:t,blockStore:o,environment:n,transaction:r,icon:l}=e,c=e.discussionId??(0,h().Z1)({environment:n,table:i().$Y,spaceId:o.pointer.spaceId});if(void 0===n.currentUser.id)return;const d=p().eC({environment:n,table:"discussion",value:{type:"default",id:c,parent_id:o.id,parent_table:o.table,resolved:!1,context:t,space_id:(0,a().e)(o.pointer.spaceId)},inMemoryRecordCache:o.inMemoryRecordCache,transaction:r});(0,P().B)({transaction:r,blockStore:o,discussionId:d.id});const u={table:s().oo,id:n.currentUser.id};return R().createReaction({environment:n,transaction:r,store:d,icon:l,currentActorPointer:u,discussionLocation:"block_menu"}),d}function q(e){const{environment:t}=e;if(!t.currentUser.id)return;const o=M().A.getPropertyId();if(o){var r;const e=null===(r=M().A.getBlockStore())||void 0===r?void 0:r.getPropertyStore(o);if(e)return{blockStore:e,context:e.getValue()}}const i=M().A.getLastSelectedEditables();if(!i||0===i.length)return;const a=i[0].store.getRecordStoreAtRootPath(),s=[],c=new Set;return i.forEach(((e,t)=>{let{store:o,selection:r}=e;c.add(o.id);const i=o.getRecordStoreAtRootPath();if(!(i instanceof x().Bv))return;const a=i.getType(),d=i.getFormat();if(a&&(0,n().pD)(a,d))return;const u=o.getValue(),p=l().xbM(u,r),m=l().Ffo(u,p.startIndex,p.endIndex),g=0===t?[]:[l().Ey_("\n")];s.push(...g,...m)})),{blockStore:a,context:s}}},441738:(e,t,o)=>{o.d(t,{GI:()=>c,Mc:()=>i,Nf:()=>d,Of:()=>r,dx:()=>a,hq:()=>l,i_:()=>s,yP:()=>u});o(16280),o(898992),o(672577),o(737550);var n=()=>o(416845);const r=["ai","sites_custom_hostnames"],i=["ai_add_on_employee_discount_monthly","ai_add_on_employee_discount_yearly"],a=["ai_add_on_standard_sales_assisted","ai_add_on_standard_sales_assisted_eur","ai_add_on_standard_sales_assisted_gbp","ai_add_on_standard_sales_assisted_jpy","ai_add_on_standard_sales_assisted_krw","ai_add_on_employee_discount_monthly","ai_add_on_employee_discount_yearly","ai_add_on_marketing_discount_monthly","ai_add_on_marketing_discount_yearly","sites_custom_hostnames_add_on_sales_assisted_gbp","sites_custom_hostnames_add_on_sales_assisted_usd","sites_custom_hostnames_add_on_sales_assisted_eur","sites_custom_hostnames_add_on_sales_assisted_jpy","sites_custom_hostnames_add_on_sales_assisted_krw","ai_add_on_standard_trial_monthly_usd","ai_add_on_standard_trial_yearly_usd","ai_add_on_standard_trial_monthly_eur","ai_add_on_standard_trial_yearly_eur","ai_add_on_standard_trial_monthly_gbp","ai_add_on_standard_trial_yearly_gbp","ai_add_on_standard_trial_monthly_jpy","ai_add_on_standard_trial_yearly_jpy","ai_add_on_standard_trial_monthly_krw","ai_add_on_standard_trial_yearly_krw",...["ai_add_on_standard_monthly_10","ai_add_on_standard_monthly_eur","ai_add_on_standard_monthly_gbp","ai_add_on_standard_monthly_jpy","ai_add_on_standard_monthly_krw","ai_add_on_standard_yearly_96","ai_add_on_standard_yearly_eur","ai_add_on_standard_yearly_gbp","ai_add_on_standard_yearly_jpy","ai_add_on_standard_yearly_krw","sites_custom_hostnames_add_on_monthly_usd","sites_custom_hostnames_add_on_yearly_usd","sites_custom_hostnames_add_on_monthly_eur","sites_custom_hostnames_add_on_yearly_eur","sites_custom_hostnames_add_on_monthly_gbp","sites_custom_hostnames_add_on_yearly_gbp","sites_custom_hostnames_add_on_monthly_jpy","sites_custom_hostnames_add_on_yearly_jpy","sites_custom_hostnames_add_on_monthly_krw","sites_custom_hostnames_add_on_yearly_krw"]];function s(e){return!!e&&e.length>0}function l(e){return r.some((t=>t===e))}function c(e){return!!e&&e.some((e=>"ai"===e.feature))}function d(e){return e===n()._D}class u extends Error{constructor(e){super(e),this.name="PaymentRequiredError"}}},443120:(e,t,o)=>{o.d(t,{Ht:()=>g,ed:()=>f,uS:()=>v});o(814603),o(147566),o(198721);var n=()=>o(700500),r=()=>o(386164),i=()=>o(161479),a=()=>o(919709),s=()=>o(763824),l=()=>o(722101),c=()=>o(351360),d=()=>o(449506),u=()=>o(246826),p=()=>o(606952),m=()=>o(317909);async function g(e){const{store:t,url:o,environment:l,teamId:g}=e,f=void 0!==e.transformTimeout?e.transformTimeout:3e3,{serverCommitResult:v}=m().createAndCommit({userAction:"bookmarkBlockActions.createBookmark",environment:l,canUndo:!0,perform:e=>{u().zv({store:t.getPropertiesStore(),data:{link:a().x9d(o)},transaction:e}),p().KY({environment:l,store:t.getBlockTitleStore(),value:a().x9d(o),transaction:e})}}),{winner:h,rest:_}=await s().O4([v,s().wR(f)]);if(1===h&&(await async function(e,t){const{serverCommitResult:o}=m().createAndCommit({userAction:"bookmarkBlockActions.transformIntoBookmark",environment:e,canUndo:!0,perform:e=>{u().zv({store:t,data:{type:n().xd.bookmark},transaction:e})}});await o}(l,t),await _),g){const{currentSpaceStore:e}=c().default.state;await d().callApi({eventName:"setBookmarkMetadata",environment:l,data:{type:"team-invite-bookmark",block:{id:t.id,spaceId:(0,i().e)(t.pointer.spaceId)},url:o,teamId:g,spaceId:e&&e.id},headers:(0,r().WS)({spaceId:(0,i().e)(t.pointer.spaceId)})})}else await d().callApi({eventName:"setBookmarkMetadata",environment:l,data:{type:"external-bookmark",block:{id:t.id,spaceId:(0,i().e)(t.pointer.spaceId)},url:o},headers:(0,r().WS)({spaceId:(0,i().e)(t.pointer.spaceId)})})}function f(e){var t;const{transaction:o,blockStore:n,parentBlockStore:r,token:i}=e,{tokenIndex:a}=i;if(!n.isDefined())return;const s=null===(t=r.getParentBlockStore())||void 0===t?void 0:t.getContentStore();if(!s)return;p().eF({block:r,editorMode:"default",transaction:o,tokenIndex:a})&&l().WH({parentStore:s,insertStore:n,afterStore:r,transaction:o})}async function v(e){const{environment:t,blocks:o}=e,r=o[0],i=r.getPropertyValue("link");if(!i)return;const s=i[0][0];await(async e=>{var o,n;return await d().callApi({eventName:"getDataForLinkMention",environment:t,data:{url:e,spaceId:(null===(o=c().default.state.currentSpaceStore)||void 0===o?void 0:o.id)??(null===(n=c().default.state.mainEditorCurrentBlockStore)||void 0===n?void 0:n.getSpaceId()),source:"bookmark_to_link_mention"}})})(s).then((e=>{m().createAndCommit({userAction:"bookmarkBlockActions.transformBookmarkToLinkMention",environment:t,canUndo:!0,perform:o=>{if("success"===e.type){const l=e.data;if("error"in l){const e=a().wmz(a().gru({href:s,title:s.includes("mailto:")?s:new URL(s).hostname}));u().zv({store:r,data:{type:n().xd.text},transaction:o}),p().KY({environment:r.environment,store:r.getBlockTitleStore(),value:[e],transaction:o})}else{var i;const{title:e,description:c,author_name:d,provider_name:m,images:g,favicon_url:f,iframe:v,height:h,padding:_,padding_top:b}=l,y=a().wmz(a().gru({href:s,title:e||(m||new URL(s).hostname),description:c,link_author:d,link_provider:m,thumbnail_url:g&&g.length>0?null===(i=g[0])||void 0===i?void 0:i.url:void 0,icon_url:f,iframe_url:v,height:h,padding:_,padding_top:b}));u().zv({store:r,data:{type:n().xd.text},transaction:o}),p().KY({environment:t,store:r.getBlockTitleStore(),value:[y],transaction:o})}}else{const e=a().wmz(a().gru({href:s,title:s.includes("mailto:")?s:new URL(s).hostname}));u().zv({store:r,data:{type:n().xd.text},transaction:o}),p().KY({environment:t,store:r.getBlockTitleStore(),value:[e],transaction:o})}u().zv({store:r,data:{type:n().xd.text},transaction:o})}})}))}},443616:(e,t,o)=>{o.d(t,{DX:()=>k,II:()=>S,J1:()=>I,Rw:()=>B,kl:()=>P,nd:()=>A,qC:()=>x,qW:()=>w});o(581454),o(296540);var n=()=>o(100622),r=()=>o(496603),i=()=>o(896628),a=()=>o(906590),s=()=>o(482287),l=()=>o(317909),c=()=>o(491073),d=()=>o(89924),u=()=>o(878377),p=()=>o(27178),m=()=>o(299545),g=()=>o(792609),f=()=>o(508496),v=()=>o(77272),h=()=>o(630116),_=()=>o(416726),b=o(474848);const y=(0,o(959013).YK)({lastUsedHighlightTitle:{id:"action.lastUsedHighlight.title",defaultMessage:"Last used"},lastUsedHighlightKeywords:{id:"action.lastUsedHighlight.fuzzySearchKeywords",defaultMessage:"Color last used"},highlightName:{id:"action.highlight.name",defaultMessage:"Highlight"}});function S(e){const{itemRenderer:t}=e;return(0,_().gy)({key:"text color actions",title:_().AY.colorSection,render:e=>(0,b.jsx)(d().A,{...e}),actions:n().N.map((e=>T({blockColor:e,itemRenderer:t})))})}const w=S({itemRenderer:e=>{const{color:t,overrideDisplayName:o,selected:n}=e;return(0,b.jsx)(c().Ay,{...e.menuListItemProps,color:t,overrideDisplayName:o,selected:n})}});function k(e){const{itemRenderer:t}=e;return(0,_().gy)({key:"background color actions",title:_().AY.backgroundSection,overrideSearchTitle:_().AY.backgroundSectionKeywords,render:e=>(0,b.jsx)(d().A,{...e}),actions:n().AQ.map((e=>T({blockColor:e,itemRenderer:t})))})}const I=k({itemRenderer:e=>{const{color:t,overrideDisplayName:o,selected:n}=e;return(0,b.jsx)(c().Ay,{...e.menuListItemProps,color:t,overrideDisplayName:o,selected:n})}}),A=(0,_().gy)({key:"background color selection actions",title:_().AY.backgroundSection,overrideSearchTitle:_().AY.backgroundSectionKeywords,render:e=>(0,b.jsx)(d().A,{...e}),actions:n().AQ.map((e=>M(e)))}),x=(0,_().gy)({key:"text color selection actions",title:_().AY.colorSection,render:e=>(0,b.jsx)(d().A,{...e}),actions:n().N.map((e=>M(e)))});function C(){return[u().p2L,u().AU6(u().vEP),g().Y,u().My5,u().AU6(u().Cuf),u().P5O]}function T(e){const{blockColor:t,overrideKey:o,overrideDisplayName:c,itemRenderer:d}=e,u=c||(0,p().qo)(t),g=(0,_().Ls)({key:`color ${o||t}`,displayName:u,analyticsName:u.defaultMessage,analyticsActionType:"change_block_color",fuzzySearchKeywords:(0,_().Mf)(t),validators:C(),track:{actionName:"set_color"},action:(e,o,c)=>{let{blocks:d,environment:u}=o;const p=f().default.checkGate({gateName:"updated_color_picker"});a().Q(t,!p);const{serverCommitResult:g}=l().createAndCommit({userAction:"actionRegistry.createBlockColorAction",environment:u,canUndo:!0,perform:e=>{if(1===d.length&&d[0].isFirstBlockInCalloutV2Block()){const e=d[0].getParentStore();e instanceof h().Bv&&(d=[e])}(0,n().Cg)(t)||(s().Vd({environment:u,annotationKey:"hb",blocks:d,transaction:e}),s().Vd({environment:u,annotationKey:"hf",blocks:d,transaction:e}),i().zA({stores:r().qI(d,(e=>(0,m().zo)({blockStore:e,transclusionReferences:"omit",childPages:"omit"}))),update:{block_color:void 0},transaction:e})),i().zA({stores:d,update:{block_color:t},transaction:e})}});g.then(e)},closeParentMenu:!0,render:(e,o)=>{let{blocks:n}=o;const r=t===(n.length>0?n[0].getFormat().block_color:"default");return d({menuListItemProps:e,color:t,selected:r,overrideDisplayName:g.displayName})},nativeImageReference:e=>{let{environment:n}=e;return(0,_().Kg)(n,t,o)}});return g}function M(e,t,n){const r=n||(0,p().qo)(e),i=(0,_().Ls)({key:`color ${t||e}`,displayName:r,analyticsName:r.defaultMessage,fuzzySearchKeywords:(0,_().Mf)(e),validators:C(),action:async t=>{let{blocks:n,environment:r}=t;var i;o(986260).jk(r)&&await(null===(i=r.NativeMobileActionBarStore)||void 0===i?void 0:i.clearNativeActionMenuAndRestoreSelectionIfNecessary());const l=f().default.checkGate({gateName:"updated_color_picker"});a().Q(e,!l),s().po({environment:r,annotation:["h",e]}),(0,o(21869).s)(r,{action:"h",color:e})},closeParentMenu:!0,render:t=>(0,b.jsx)(c().Ay,{...t,color:e,overrideDisplayName:i.displayName}),nativeImageReference:o=>{let{environment:n}=o;return(0,_().Kg)(n,e,t)}});return i}const P=(0,_().gy)({key:"toggle last highlight",title:y.lastUsedHighlightTitle,overrideSearchTitle:y.lastUsedHighlightKeywords,render:e=>(0,b.jsx)(d().A,{...e}),actions:[(0,_().Fw)({key:"toggle highlight action",displayName:y.highlightName,analyticsName:y.highlightName.defaultMessage,validators:C(),shortcuts:["toggleHighlight"],closeParentMenu:!0,track:{actionName:"set_color"},action:(e,t,o)=>{let{environment:n,blocks:a}=t;const s=v().A.getMostRecentlyUsedColor(),{serverCommitResult:c}=l().createAndCommit({userAction:"actionRegistry.toggleLastUsedHighlight",environment:n,canUndo:!0,perform:e=>{const t=r().Si(a.map((e=>{const t=e.getFormat();return t&&t.block_color===s})))?void 0:s;i().zA({stores:a,update:{block_color:t},transaction:e})}});c.then(e)},render:e=>{const t=v().A.getMostRecentlyUsedColor();return(0,b.jsx)(c().Ay,{...e,color:t,shortcuts:["toggleHighlight"]})}})]}),B=(0,_().uk)({key:"color section",displayName:_().AY.colorName,analyticsName:_().AY.colorName.defaultMessage,svg:o(933152).M,validators:C(),subActions:()=>[P,w,I]})},443881:(e,t,o)=>{o.d(t,{D3:()=>x,G7:()=>A,RI:()=>T,zm:()=>I});o(944114),o(898992),o(430670),o(908872);var n=()=>o(496603),r=()=>o(973647),i=()=>o(534177),a=()=>o(970013),s=()=>o(452540),l=()=>o(728272),c=()=>o(912720),d=()=>o(179034),u=()=>o(519831),p=()=>o(798880),m=()=>o(778555),g=()=>o(919709),f=()=>o(247331),v=()=>o(349835),h=()=>o(977345);function _(e){for(const t of e)if(t.kind===f().FormulaContextValueKind.ThisRow)return t}function b(e){const{formulaTokenBlockProperty:t,formulaTypecheckContextValues:o,spaceId:n}=e;if("collection"in t){const{collection:e}=t;if(e)return{id:e.id,propertyId:(0,h().Yi)(t.property),spaceId:e.spaceId,table:u().Vl};const n=_(o);if(n&&"block"===n.type.type&&n.type.collection)return{id:n.type.collection.id,propertyId:t.property,spaceId:n.type.collection.spaceId,table:u().Vl}}else if("contextValueId"in t){const{contextValueId:e}=t,r=(0,h()._H)(o,(0,h().GH)(e));if("block"===(null==r?void 0:r.type.type)&&r.type.collection)return{id:r.type.collection.id,propertyId:(0,h().Yi)(t.property),spaceId:r.type.collection.spaceId??n,table:u().Vl}}else(0,i().HB)(t)}function y(e){const{formulaTokenContextValue:t,formulaTypecheckContextValues:o,spaceId:n}=e,{valueId:r}=t,i=(0,h()._H)(o,(0,h().GH)(r));return i?(0,h().qU)(i,n):[]}function S(e){const{formulaToken:t,formulaTypecheckContextValues:o,spaceId:n}=e;switch(t.type){case f().FormulaTokenType.Checkbox:case f().FormulaTokenType.Date:return[];case f().FormulaTokenType.Block:return[{id:t.blockId,spaceId:t.spaceId,table:d().ev}];case f().FormulaTokenType.Person:return[{id:t.userId,table:p().oo}];case f().FormulaTokenType.BlockProperty:{const e=b({formulaTokenBlockProperty:t,formulaTypecheckContextValues:o,spaceId:n});return e?[e]:[]}case f().FormulaTokenType.ContextValue:return y({formulaTokenContextValue:t,formulaTypecheckContextValues:o,spaceId:n});default:(0,i().HB)(t)}}function w(e){const{formulaTypecheckContextValues:t,memberPropertyToken:o}=e;if(o.collection)return{id:o.collection.id,propertyId:(0,h().Yi)(o.property),table:u().Vl,spaceId:o.collection.spaceId};const n=_(t);return n&&"block"===n.type.type&&n.type.collection?{id:n.type.collection.id,propertyId:o.property,spaceId:n.type.collection.spaceId,table:u().Vl}:void 0}function k(e){const{formulaTypecheckContextValues:t,nodes:o,spaceId:r}=e;return(0,n().oE)(o).flatMap((e=>I({formulaTypecheckContextValues:t,node:e,spaceId:r})))}function I(e){const{formulaTypecheckContextValues:t,node:o,spaceId:n}=e;switch(o.kind){case v().NM.Conditional:return k({formulaTypecheckContextValues:t,nodes:[o.condition,o.expIfFalse,o.expIfTrue],spaceId:n});case v().NM.Equality:case v().NM.Relational:case v().NM.Additive:case v().NM.Multiplicative:case v().NM.Exponentiation:return k({formulaTypecheckContextValues:t,nodes:[o.lhs,o.rhs],spaceId:n});case v().NM.Call:return k({formulaTypecheckContextValues:t,nodes:[...o.arguments,o.expression],spaceId:n});case v().NM.Unary:case v().NM.UnifiedFunctionProperty:return I({formulaTypecheckContextValues:t,node:o.expression,spaceId:n});case v().NM.LogicalAnd:case v().NM.LogicalOr:case v().NM.Array:return k({formulaTypecheckContextValues:t,nodes:o.elements,spaceId:n});case v().NM.NotionToken:return S({formulaTypecheckContextValues:t,formulaToken:o.token,spaceId:n});case v().NM.MemberBlockProperty:{const e=I({formulaTypecheckContextValues:t,node:o.expression,spaceId:n}),r=w({formulaTypecheckContextValues:t,memberPropertyToken:o.propertyToken});return r&&e.push(r),e}case v().NM.RecoveryNode:case v().NM.String:case v().NM.Boolean:case v().NM.Identifier:case v().NM.Number:return[];default:(0,i().HB)(o)}}function A(e){return(0,a().pq)(e)?`${e.spaceId}:${e.id}:${e.table}:${e.propertyId}`:(0,s().wx)(e)}function x(e){const{formulas:t,formulaTypecheckContextValues:o,formulaValue:i,spaceId:a}=e,s=t.parseFormulaInputToAst(i);if(r().Q.isFail(s))return[];const l=I({formulaTypecheckContextValues:o,node:s.value,spaceId:a});return(0,n().hS)(l,(e=>A(e)))}function C(){return{type:"keep"}}function T(e){const{baseUrl:t,formula:o,publicDomainName:r,spaceId:a,visitors:s}=e,d={visitFormulaContextValue:s.visitFormulaContextValue??C,visitFormulaPageProperty:s.visitFormulaPageProperty??C,visitRecordPointer:s.visitRecordPointer??C},u=new(l().d);function p(e){const{requested:t}=e,o=d.visitRecordPointer(t);return"replace"===o.type?(0,i().O9)(o.value)&&o.value.table===t.table?(u.add(o.value),o.value):t:"keep"===o.type?t:void(0,i().HB)(o)}const f=o.reduce(((e,o)=>{const s=g().uPN(o),l=g().tVx(s);if(l){const t=g().iVq(l),r=d.visitFormulaContextValue(t.id);return"replace"===r.type?(0,i().O9)(r.value)&&e.push(g().wmz(g().CA$({id:r.value}))):"keep"===r.type?e.push((0,n().mg)(o)):(0,i().HB)(r),e}const f=g().TVE(s);if(f){const t=g().GCe(f);let r;r="contextValueId"in t?{property:t.property,contextValueId:t.contextValueId}:{property:t.property,collection:t.collection};const a=d.visitFormulaPageProperty(r);return"replace"===a.type?(void 0===a.value||(("collection"in t&&"collection"in a.value&&(0,i().O9)(a.value.collection)&&!(0,n().n4)(t.collection,a.value.collection)||"contextValueId"in t&&"collection"in a.value&&(0,i().O9)(a.value.collection))&&u.add(a.value.collection),e.push(g().wmz(g().ESw(a.value)))),e):(e.push((0,n().mg)(o)),e)}const v=(0,m().u)({baseUrl:t,mapper:p,publicDomainName:r,requester:{table:c().yB,id:"",spaceId:a},resolveTemplateVariables:!1,token:{spaceId:a,token:o}});return e.push(v),e}),[]);return{remappedRecordPointers:u,value:f}}},444196:(e,t,o)=>{o.d(t,{k:()=>i});var n=()=>o(498212),r=()=>o(551625);function i(e,t){(0,r().T)({environment:e,userId:(0,n().ot)(t.user_id),traits:{...t,user_id:(0,n().ot)(t.user_id)}})}},444570:(e,t,o)=>{o.d(t,{Jj:()=>v,KG:()=>m,TH:()=>p,mC:()=>g,zb:()=>f});var n=()=>o(700500),r=()=>o(534177),i=()=>o(186445),a=()=>o(963589),s=()=>o(695625),l=()=>o(508496),c=()=>o(630116),d=()=>o(666710),u=()=>o(327994);function p(e){var t,o,r;const{environment:a,store:l,selectableBoundingRect:u}=e,p=l.getType();if(!p||!(0,n().UL)(p))return(null==u?void 0:u.width)??0;const m=null===(t=l.getParentBlockStore())||void 0===t?void 0:t.getType();if("page"===m)return i().y0(a);const g=null===(o=l.getRecordStoreUIParent())||void 0===o||null===(o=o.findRecordStoreUIAncestor((e=>Boolean(e instanceof c().Bv&&e.isPath([])&&s().T.findSelectableFromStore(e)))))||void 0===o?void 0:o.ancestor,f=g&&g instanceof c().Bv?s().T.findSelectableFromStore(g):void 0,v=f?null===(r=d().default.state.selectableRectMap.get(f))||void 0===r?void 0:r.width:(null==u?void 0:u.width)??0,h=m?function(e){switch(e){case"bulleted_list":case"toggle":case"to_do":case"numbered_list":return 26;case"callout":return 60;default:return 0}}(m):0;return(v??0)-h}function m(e){const{store:t,selectableBoundingRect:o,containerWidth:i}=e,a=t.getType();if(!(o&&i&&a&&(0,n().UL)(a)))return 0;const s=(e=>{const o=null===(e=t.getFormat())||void 0===e?void 0:e.block_alignment;if(!o){return t.isRootOrDirectChild()?"center":"left"}return o})();switch(s){case"right":const e=i/2;return o.width-e-e;case"center":return(o.width-i)/2;case"left":return 0;default:(0,r().HB)(s)}}function g(e){if(!l().default.checkGate({gateName:"selectable_top_margin"}))return 0;const t=e.getNode();return t?parseInt(getComputedStyle(t).marginTop):0}function f(){return l().default.checkGate({gateName:"plus_button_between_blocks"})?u().uy:u().yh}function v(){return(0,a().X)("plus_button_between_blocks")}},444768:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},444796:(e,t,o)=>{o.d(t,{AS:()=>l,EH:()=>c});var n=()=>o(522419),r=()=>o(220719),i=()=>o(691648),a=()=>o(179266);const s=["png","jpg","jpeg","webp","heic","heif"];function l(e){if(!e)return!1;const t=n().QC(e);if(!t)return!1;const o=n()._J(e),r=s.includes(t.toLowerCase());return o&&r}async function c(e,t){const o=e.getOriginalImageSource();if((0,r().o9)(o),!o)return;const n=await(0,a().L)({url:o,isAuthenticated:!0,permissionRecord:e.pointer},t),{imageEditActions:s}=await i().h.load();return s.cropAndUploadImage({store:e,environment:t,proxiedOriginalUrl:n})}},444943:(e,t,o)=>{o.d(t,{zG:()=>Ee,yn:()=>L,Yq:()=>Pe,SU:()=>F,K6:()=>he,FA:()=>_e,ry:()=>ve,i$:()=>be,UJ:()=>de,XE:()=>ue,lD:()=>pe,Dy:()=>Re,zg:()=>De,UL:()=>xe,x:()=>Me,B1:()=>Le,uQ:()=>Ne,al:()=>Ue,cP:()=>Te,Yl:()=>me});o(16280),o(944114),o(898992),o(354520),o(672577),o(803949),o(581454);var n=()=>o(857639),r=()=>o(206267),i=(o(737550),()=>o(999752)),a=()=>o(763824),s=()=>o(882362);const l=class{constructor(e){this.performRequests=void 0,this.batchSize=void 0,this.maxWorkers=void 0,this.maxDelayMs=void 0,this.timeSource=void 0,this.queue=[],this.workerTasks=new Map,this.nextWorkerId=0,this.currentWorkers=0,this.requestsRunning=0,this.awaitingTimeout=!1,this.dequeue=async()=>{if(this.currentWorkers>=this.maxWorkers||0===this.queue.length)return;const e=this.nextWorkerId;this.nextWorkerId++,this.currentWorkers++;const t=this.queue.splice(0,this.batchSize),n=t.map((e=>e[0]));let r,i;this.workerTasks.set(e,t),this.requestsRunning+=t.length;try{r=await this.performRequests(n)}catch(a){i=(0,o(319625).A)(a)}try{if(i)for(let e=0;e<t.length;e++){t[e][1].reject(i)}else if(r)for(let e=0;e<t.length;e++){const o=t[e],n=r[e];o[1].resolve(n)}}catch(a){}this.currentWorkers--,this.workerTasks.delete(e),this.requestsRunning-=t.length,this.dequeueAfterFilledBatchOrTimeout()};const{performRequests:t,batchSize:n,maxWorkers:r,maxDelayMs:i}=e;this.performRequests=t,this.batchSize=n,this.maxWorkers=r,this.maxDelayMs=i,this.timeSource=s().u}getStats(){return{queue:this.queue.length,running:this.requestsRunning,workers:this.currentWorkers}}updateTimeSource(e){this.timeSource=e}updateBatchSize(e){this.batchSize=e}updateMaxDelayMs(e){this.maxDelayMs=e}updateMaxWorkers(e){this.maxWorkers=e,this.dequeueAfterFilledBatchOrTimeout()}enqueue(e){const t=a().yX();return this.queue.push([e,t]),this.dequeueAfterFilledBatchOrTimeout(),(0,i().c)({promise:t.promise,canCancel:()=>this.queue.some((e=>e[1]===t)),cancel:e=>{const o=this.queue.findIndex((e=>e[1]===t));o>=0&&(this.queue.splice(o,1),t.reject(e))}})}dequeueAfterFilledBatchOrTimeout(){this.queue.length>=this.batchSize?this.dequeue():this.awaitingTimeout||(this.awaitingTimeout=!0,this.timeSource.setTimeout((()=>{this.awaitingTimeout=!1,this.dequeue()}),this.maxDelayMs))}cancel(){const e=this.workerTasks,t=this.queue;this.workerTasks=new Map,this.queue=[];for(const o of e.values())for(const e of o)e[1].reject(new Error("CanceledTask."));for(const o of t)o[1].reject(new Error("CanceledTask."))}};var c=()=>o(317965),d=()=>o(921997),u=()=>o(449412),p=()=>o(496603),m=()=>o(229833),g=()=>o(720665),f=()=>o(671593),v=()=>o(989423),h=()=>o(508496),_=()=>o(695905);var b=()=>o(780054),y=()=>o(406792),S=()=>o(227440);const w=window.location.host.endsWith(b().A.publicDomainName);var k=()=>o(908006);function I(e,t){k().default.afterNextFlush((()=>{h().default.checkGate({gateName:"message_store_client_send_request_metric_enabled"})&&v().vd(e,"message_store.client.send_request",t)}))}const A=async()=>Promise.all([o.e(2681),o.e(36733)]).then(o.bind(o,976060)),x=!1,C=90*g().TD,T=.5*g().TD,M=30*g().TD,P=3e3,B=10*g().TD,R={versions:!0,collection:!0,activity:!0,notification:!0,teams_in_space:!0,user_page_visit:!0,backlinks:!0,user_content:!0,page_visit:!0,user_shared_pages_in_space:!0,presence:!0,user_joined_teams_in_space:!0,teams_migration_completed_in_space:!0,diagnosticPing:!0,_other:!0};function E(e){const t=e.indexOf("/");if(-1===t)return"_other";const o=e.substring(0,t);return o in R?o:"_other"}function D(e,t){var o;const n=E(t),r=null===(o=(0,d().Zg)(t))||void 0===o?void 0:o.table,i=e[n];if(i){if(r){const e=i[r];if(!e)return void Qe(`Warning: "${n}.${r}" has no existing counters!`);i[r]=e-1}i._total-=1,e._total-=1}else Qe(`Warning: "${n}" has no existing counters!`)}function N(e){return{_id:e,charactersSent:0,requestsSent:0,requestsTimedOut:0,responsesReceivedWithoutHandlers:0,successfulResponsesReceived:0,unsuccessfulResponsesReceived:0,invalidMessagesReceived:0,notificationsReceived:0,messagesReceived:0}}function L(){return{...re}}function F(e){const t=re;if(e._id===t._id)return{charactersSent:t.charactersSent-e.charactersSent,requestsSent:t.requestsSent-e.requestsSent,requestsTimedOut:t.requestsTimedOut-e.requestsTimedOut,responsesReceivedWithoutHandlers:t.responsesReceivedWithoutHandlers-e.responsesReceivedWithoutHandlers,successfulResponsesReceived:t.successfulResponsesReceived-e.successfulResponsesReceived,unsuccessfulResponsesReceived:t.unsuccessfulResponsesReceived-e.unsuccessfulResponsesReceived,invalidMessagesReceived:t.invalidMessagesReceived-e.invalidMessagesReceived,notificationsReceived:t.notificationsReceived-e.notificationsReceived,messagesReceived:t.messagesReceived-e.messagesReceived}}const U=new Map,O=new Map;class V extends Map{isCancelable(e){return Boolean(this.getCancelable(e))}getCancelable(e){const t=this.get(e);if(null!=t&&t.canCancel())return t}}const j=new V,z=new V,q=new Map,H=new Map,W=Date.now();let K={_total:0};const G="messageStoreInternals",$=new(n().BatchedLogger)({from:G,type:"BulkDebug",level:"info",maxLength:250,logToConsole:x});let Y,Q,Z,X,J,ee=0,te=0,oe=0,ne=0,re=N(0),ie=0,ae=s().u,se=!1,le="uninitialized",ce=!0;function de(){return"open"===le}function ue(){return"uninitialized"===le||"opening"===le}const pe=!0;function me(e,t){let o=H.get(e);o||(o={},H.set(e,o)),Object.assign(o,t)}function ge(e){$.log({level:"info",from:G,type:e})}function fe(){Q=we(this),ge(`ping:${Q}`),Y=Date.now(),Qe(`Incoming primus ping received from server via ${Q}.`)}function ve(){return K}function he(){return{...Oe.getStats(),batchSubscribeQueue:je.getStats(),batchUnsubscribeQueue:ze.getStats()}}function _e(e){const{lastOfflineTimestamp:t}=S().A.getState(),o=he(),{batchSubscribeQueue:n,batchUnsubscribeQueue:r}=o;return{currentConnectionCounters:re,timeSinceLastIncomingPing:Y&&e-Y,lastIncomingPingTransportType:Q,timeSinceLastResponseReceived:Z&&e-Z,timeSinceLastReadyStateChange:X&&e-X,timeSinceLastOffline:t&&e-t,largestMessageSize:ie||void 0,messageStoreRequestsQueued:o.queue,messageStoreRequestsRunning:o.running,batchSubscribeQueue:n,batchUnsubscribeQueue:r,messageStoreConnectionState:le,uptime:e-W,subscriptionCounters:K,primusEndEventsReceived:te,primusErrorEventsReceived:oe,connectionResetsDueToFailedRequests:ne}}function be(){const e=[];O.forEach(((t,o,n)=>{const r=(0,d().Zg)(o);r&&t.value&&e.push({id:r.id,table:r.table,version:t.value})}));const t=p().$z(e,(e=>e.table)),o={};return Object.entries(t).map((e=>{let[t,o]=e;const n={};return o.forEach((e=>{n[e.id]=e.version})),{table:t,value:n}})).forEach((e=>{o[e.table]=e.value})),o}function ye(e){switch($.log({level:"info",from:G,type:"readyStateChange",data:{message:e}}),X=Date.now(),e){case"end":le="closed";break;case"open":le="open";break;case"opening":le="opening"}}const Se=p().Bj((e=>async function(e){if(w)return;ee+=1;const{createClient:t}=await A(),i=h().default.getConfigKey("message_store_client_config","min_reconnect_delay_secs"),a=h().default.getConfigKey("message_store_client_config","max_reconnect_delay_secs"),s=t({minReconnectDelayMs:i*g().TD,maxReconnectDelayMs:a*g().TD});return s.on("data",(t=>function(e,t){re.messagesReceived+=1;const o=(0,f().tf)(c().hX,e);if(o)return re.invalidMessagesReceived+=1,void n().rateLimitedLog({level:"warning",from:G,type:"ValidationError",data:{miscDataToConvertToString:e},error:(0,m().n6)(o)});const i=e;if("response"===i.type){var a;const{requestId:e,status:t,result:o}=i,n=q.get(e);if(q.delete(e),$.log({level:"info",from:G,type:"responseReceived",data:{requestId:e,response:t,time:n&&Date.now()-n.sendTime,internalProcessingTimeMs:null===(a=i.result)||void 0===a?void 0:a.internalProcessingTimeMs}}),!n)return void(re.responsesReceivedWithoutHandlers+=1);Z=Date.now(),window.clearTimeout(n.timeout),"ok"===t?(re.successfulResponsesReceived+=1,n.resolve(o)):(re.unsuccessfulResponsesReceived+=1,n.reject(new Ye(o)))}else{re.notificationsReceived+=1;const{ackId:e,key:o,value:a,version:l,passThroughData:c}=i;e&&async function(e){if(w)return;const{method:t,request:o,environment:n}=e,i=await Ge(n);(function(e,t){k().default.afterNextFlush((()=>{h().default.checkGate({gateName:"send_request_ack_metric_enabled"})&&v().u4({environment:e,event:{eventName:"message_store.client.send_request_ack",eventProperties:t}})}))})(n,{primus_transport_type:i}),Oe.enqueue((()=>($e({message:{type:`${b().A.messageStore.api}/${t}`,requestId:r().JW(),...o},environment:n}),Promise.resolve({}))))}({method:"ackNotification",request:{ackId:e},environment:t});const{listeners:d}=U.get(o)||{};if(!d)return;O.set(o,{version:l,value:a,passThroughData:c});for(const{listener:t}of d)try{t(o,a,c,l)}catch(s){n().log({level:"warning",from:G,type:"ListenerError",error:(0,m().n6)(s)})}}}(t,e))),s.on("open",(()=>{ge("open"),function(e){(function(e){const t=_().A.state.numConnectionAttempts;h().default.checkGate({gateName:"log_messagestore_attempts"})&&(0,v().u4)({environment:e,event:{eventName:"message_store.client.num_connection_attempts",eventProperties:{num_connection_attempts:t}}}),_().A.setState({isConnected:!0,numConnectionAttempts:0})})(e),re=N(re._id+1),ce?(ce=!1,ke(e)):(J&&window.clearTimeout(J),J=window.setTimeout((()=>{de()&&ke(e)}),1e3));x&&function(){const e=Date.now(),t=20;function o(){const n=he();function r(e){return 0===e.queue&&0===e.running}if(r(n)&&r(n.batchSubscribeQueue)&&r(n.batchUnsubscribeQueue))return Qe(`Queues emptied after ${Date.now()-e} ms`),void(Ie=void 0);Ie=window.setTimeout(o,t)}Ie&&window.clearTimeout(Ie);Qe("Starting measurement of time until send queues are empty."),o()}()}(e)})),s.on("reconnected",(e=>{Ce(),$.log({level:"info",from:G,type:"reconnected",data:{message:`Reconnected in ${null==e?void 0:e.duration} ms`}})})),s.on("reconnect",(()=>{ge("reconnect")})),s.on("reconnect scheduled",(e=>{_().A.update((e=>({isConnected:!1,numConnectionAttempts:e.numConnectionAttempts+1}))),$.log({level:"info",from:G,type:"reconnect scheduled",data:{message:`Reconnecting in ${null==e?void 0:e.scheduled} ms, attempt ${null==e?void 0:e.attempt} of ${null==e?void 0:e.retries}`}})})),s.on("reconnect timeout",(()=>{ge("reconnect timeout")})),s.on("reconnect failed",(()=>{ge("reconnect failed")})),s.on("timeout",(()=>{ge("timeout")})),s.on("destroy",(()=>{ge("destroy")})),s.on("close",(()=>{ge("close")})),s.on("online",(()=>{ge("online")})),s.on("offline",(()=>{ge("offline")})),s.on("error",(e=>{let t;t="TransportError"===e.type?{level:"info",from:G,type:"primusTransportError",error:(0,m().n6)(e)}:{level:"error",from:G,type:"unknownPrimusError",error:(0,m().n6)(e)};(0,o(745875).rQ)(1)&&n().rateLimitedLog(t),$.log(t),oe+=1})),s.on("incoming::ping",fe),s.on("readyStateChange",ye),s.on("end",(()=>{ge("end"),s.off("readyStateChange",ye),te+=1,async function(e,t){var o,r;n().log({level:"info",from:G,type:"messageStoreEnd",error:{message:`SocketId: ${null==e||null===(o=e.socket)||void 0===o?void 0:o.id} Query:${null==e||null===(r=e.transport)||void 0===r?void 0:r.query}`}}),J&&(window.clearTimeout(J),J=void 0);Ce(),ae.setTimeout((()=>{void 0!==e&&e.destroy()}),0);const i=await Se(t);if(e!==i)return;Se.cache.clear(),ae.setTimeout((()=>{Se(t)}),2*g().TD)}(s,e)})),window.__primusClient=s,s}(e)),(function(){return"primus"}));function we(e){var t;const o=null==e||null===(t=e.socket)||void 0===t||null===(t=t.transport)||void 0===t||null===(t=t.query)||void 0===t?void 0:t.transport;if("websocket"===o||"polling"===o)return o}function ke(e){J&&(window.clearTimeout(J),J=void 0),U.forEach(((t,o)=>{let{authorizationToken:r}=t;const i=O.get(o);Be(o,i?i.version:-1,r,e).catch((e=>{n().log({level:"warning",from:G,type:"ReconnectSubscriptionError",error:(0,m().n6)(e)})}))}))}let Ie,Ae;function xe(e){if(Ae)throw new Error("Having more than one onRestartMessageStoreConnectionHandler is not currently supported");Ae=e}function Ce(){var e;se=!1,je.cancel(),ze.cancel(),function(){for(const e of q.values())window.clearTimeout(e.timeout);q.clear()}(),j.clear(),z.clear(),qe.cancel(),Oe.cancel(),H.clear(),K={_total:0},null===(e=Ae)||void 0===e||e()}async function Te(e){var t;const{key:o,field:n,updates:r,ttl:i,environment:a,onDisconnectFields:s}=e,l=await Ge(a);await(null===(t=Ke({method:"updateField",request:{key:o,field:n,updates:r,ttl:i,onDisconnectFields:s},environment:a,primusTransportType:l}))||void 0===t?void 0:t.response)}async function Me(e){var t;const{key:o,field:n,value:r,ttl:i,environment:a}=e,s=await Ge(a);await(null===(t=Ke({method:"setField",request:{key:o,field:n,value:r,ttl:i},environment:a,primusTransportType:s}))||void 0===t?void 0:t.response)}async function Pe(e){if(w)return{type:"messageStoreDisabled"};const t=r().JW(),{environment:o}=e,n=(0,d().VF)(t),i="diagnosticPing",s=a().yX(),l=e.logToConsole??x,c={};function p(e,t){c[e]=t,l&&console.log(`diagnosticPing ${e}=${t}`)}const m=await a().Vq(async function(){var e;const r=await Ge(o),a=performance.now();await Le(n,void 0,((e,t)=>{t&&s.resolve(performance.now())}),i,o);const l=performance.now(),d=l-a;p("registerSubscriptionResponseMs",d);const u=await(null===(e=Ke({method:"diagnosticPing",request:{id:t},environment:o,primusTransportType:r,onRequestSent:()=>{p("diagnosticPingEnqueuedMs",performance.now()-l)}}))||void 0===e?void 0:e.response);if(!u)return{type:"canceled",key:n,...c};const m=function(e){const t=c[e];if(void 0===t)throw new Error(`Assertion failure, expected timing for "${e}" to be defined`);return t}("diagnosticPingEnqueuedMs"),g=u.setValueTime;p("diagnosticPingServerSideSetValueMs",g);const f=performance.now()-l;p("diagnosticPingResponseMs",f);const v=await s.promise-l;p("diagnosticPingNotificationMs",v);const h=performance.now();await Ue(n,i,o);const _=performance.now();return{type:"success",key:n,registerSubscriptionResponseMs:d,diagnosticPingEnqueuedMs:m,diagnosticPingServerSideSetValueMs:g,diagnosticPingResponseMs:f,diagnosticPingNotificationMs:v,unregisterSubscriptionResponseMs:_-h,totalMs:_-a}}().catch((e=>(u().O8(e,{from:G,type:"diagnosticPingError",data:{key:n}}),{type:"error",key:n,...c}))),M);return m.timeout?{type:"timeout",key:n,...c}:m.result}async function Be(e,t,o,n){pe&&me(e,{latestRegisterSubscriptionRequestTimestamp:Date.now()}),function(e,t){var o;const n=E(t),r=null===(o=(0,d().Zg)(t))||void 0===o?void 0:o.table;let i=e[n];if(i||(i={_total:0},e[n]=i),r){const e=i[r]||0;i[r]=e+1}i._total+=1,e._total+=1}(K,e);const r=z.getCancelable(e);if(r)r.cancel(new Error("Cancelled by sendRegisterSubscription()"));else{const r={key:e,version:t,authorizationToken:o},i=je.enqueueCancelable({request:r,environment:n});if(i){j.set(e,i.asyncQueuePromise);try{await i.response}finally{j.delete(e)}}}pe&&me(e,{latestRegisterSubscriptionResponseTimestamp:Date.now()})}function Re(e){return j.isCancelable(e)}function Ee(e,t){const o=j.getCancelable(e);if(!o)throw new Error(`Assertion failure, subscription request for key ${e} does not exist or is not cancelable`);Fe(e,t)&&(D(K,e),o.cancel(new Error("Cancelled by cancelRegisterSubscription()")),pe&&H.delete(e))}async function De(e,t,o){var n;const r=await Ge(o);await(null===(n=Ke({method:"registerOnDisconnect",request:{disconnectId:e,operations:t},environment:o,primusTransportType:r}))||void 0===n?void 0:n.response)}async function Ne(e,t){var o;const n=await Ge(t);await(null===(o=Ke({method:"unregisterOnDisconnect",request:{disconnectId:e},environment:t,primusTransportType:n}))||void 0===o?void 0:o.response)}async function Le(e,t,o,n,r){if(w)return;let{listeners:i}=U.get(e)||{};if(!i||0===i.length)return i=[{listener:o,listenerId:n}],U.set(e,{authorizationToken:t,listeners:i}),void(de()?await Be(e,-1,t,r):"uninitialized"===le&&await Se(r));if(i.find((e=>e.listenerId===n)))i=[...i.filter((e=>e.listenerId!==n)),{listener:o,listenerId:n}],U.set(e,{authorizationToken:t,listeners:i});else{i=[...i,{listener:o,listenerId:n}],U.set(e,{authorizationToken:t,listeners:i});const r=O.get(e);r&&o(e,r.value,r.passThroughData)}}function Fe(e,t){if(w)return!1;const{authorizationToken:o,listeners:n}=U.get(e)||{};if(!n)return!1;const r=n.filter((e=>e.listenerId!==t));return r.length!==n.length&&(0===r.length?(U.delete(e),O.delete(e),!0):(U.set(e,{authorizationToken:o,listeners:r}),!1))}async function Ue(e,t,o){Fe(e,t)&&de()&&await async function(e,t){pe&&me(e,{latestUnregisterSubscriptionRequestTimestamp:Date.now()}),D(K,e);const o=j.getCancelable(e);if(o)o.cancel(new Error("Cancelled by sendUnregisterSubscription()"));else{const o={key:e},n=ze.enqueueCancelable({request:o,environment:t});if(n){z.set(e,n.asyncQueuePromise);try{await n.response}finally{z.delete(e)}}}pe&&H.delete(e)}(e,o)}const Oe=new(i().O)(20);class Ve{constructor(e,t){this.queue=void 0,this.wrappedPerformRequests=async e=>{const t=e[0].environment;Qe(`Sending a batch of ${e.length} ${this.methodName} requests.`);const o=this.performRequests(t,e.map((e=>e.request)));if(!o)throw new Error("MessageStore is disabled.");const n=await o;if(!n)throw new Error("Request cancelled.");return n},this.methodName=e,this.performRequests=t,this.queue=new l({performRequests:this.wrappedPerformRequests,batchSize:250,maxDelayMs:T,maxWorkers:1})}updateTimeSource(e){this.queue.updateTimeSource(e)}getStats(){return this.queue.getStats()}cancel(){this.queue.cancel()}enqueueCancelable(e){if(w)return;const t=this.queue.enqueue(e),o=t.catch((e=>{Qe(`enqueueCancelable() for ${this.methodName} cancelled (${e.message})`)}));return{asyncQueuePromise:t,response:o}}}const je=new Ve("registerSubscription",((e,t)=>qe.enqueue((async()=>{var o;const n=await Ge(e),r=Ke({method:"registerBatchSubscriptions",request:{subscriptions:t},environment:e,primusTransportType:n});return null===(o=await(null==r?void 0:r.response))||void 0===o?void 0:o.responses})))),ze=new Ve("unregisterSubscription",((e,t)=>qe.enqueue((async()=>{var o;const n=await Ge(e),r=Ke({method:"unregisterBatchSubscriptions",request:{keys:t.map((e=>e.key))},environment:e,primusTransportType:n});return null===(o=await(null==r?void 0:r.response))||void 0===o?void 0:o.keys.map((e=>({key:e})))})))),qe=new(i().O)(1);let He;function We(){if(!He)return;const{totalRequests:e,requestCounts:t,startTime:o}=He;Qe("checkRequestThroughputForBurstWarning requestCounts =",t),e>P&&n().log({level:"warning",from:G,type:"BurstThroughputExceeded",data:{time:Date.now()-o,totalRequests:e,requestCounts:t}}),He=void 0}function Ke(e){if(w)return;const{method:t,request:o,environment:n,primusTransportType:i}=e,s=y().default.DO_NOT_USE_markLegacy("message_store.client.send_request.in_queue_time");I(n,{status:"enqueued",primus_transport_type:i,endpoint:t}),pe&&function(e){He||(He={startTime:Date.now(),totalRequests:0,requestCounts:{}},ae.setTimeout(We,B)),He.totalRequests+=1,He.requestCounts[e]=(He.requestCounts[e]||0)+1}(t);const l=Oe.enqueue((()=>{var l;const c=r().JW();!function(e,t){k().default.afterNextFlush((()=>{h().default.checkGate({gateName:"message_store_client_send_request_metric_enabled"})&&(v().vd(e,"message_store.client.send_request.queue_running_size",{value:t.running}),v().vd(e,"message_store.client.send_request.queue_backup_size",{value:t.queue}))}))}(n,Oe.getStats());const d=y().default.DO_NOT_USE_markLegacy("message_store.client.send_request.round_trip_time");y().default.DO_NOT_USE_measureLegacy(s,{environment:n,data:{endpoint:t}});const u=a().yX(),p=Date.now(),m=pe?window.setTimeout((()=>{"open"===le&&(re.requestsTimedOut+=1,$.log({level:"info",from:G,type:"requestTimeout",data:{requestId:c,time:Date.now()-p}}))}),C):void 0;q.set(c,{resolve:u.resolve,reject:u.reject,timeout:m,sendTime:p}),$.log({level:"info",from:G,type:"requestSent",data:{requestId:c,method:t}});const g={type:`${b().A.messageStore.api}/${t}`,requestId:c,...o};return re.requestsSent+=1,$e({message:g,environment:n}),null===(l=e.onRequestSent)||void 0===l||l.call(e),u.promise.then((e=>{y().default.DO_NOT_USE_measureLegacy(d,{environment:n,data:{endpoint:t}}),I(n,{status:"success",primus_transport_type:i,endpoint:t})})).catch((e=>{const o=Oe.getStats();I(n,{status:"failure",primus_transport_type:i,endpoint:t,queue_running_size:o.running,queue_backup_size:o.queue})})),u.promise}));return{response:l.catch((e=>{e instanceof Ye&&!se?(se=!0,ne+=1,ge("connectionResetDueToFailedRequest"),Se(n).then((e=>{null==e||e.end()})),Qe(`sendRequest() for ${t} returned server error (${e.message}), resetting connection`,o)):Qe(`sendRequest() cancelled or errored for ${t} (${e.message})`,o)})),asyncQueuePromise:l}}async function Ge(e){const t=await Se(e);if(t){const e=we(t);if(e)return e}return"unknown"}async function $e(e){const{message:t,environment:o}=e,n=JSON.stringify(t);re.charactersSent+=n.length,ie<n.length&&(ie=n.length);const r=await Se(o);null==r||r.write(t)}class Ye extends Error{constructor(e){super(e),this.name="FailedMessageStoreRequestError"}}function Qe(){if(x){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.info("messageStoreInternals:",...t)}}},445120:(e,t,o)=>{o.d(t,{b:()=>r,m:()=>n});const n="guest";class r{constructor(e){this.data=void 0,this.data=e??{}}get size(){return Object.keys(this.data).length}getUserRecordMap(e){const t=e??n;let r=this.data[t];return r||(r=o(388821).RecordMapWithRole.create(),this.data[t]=r),r}getValue(e){return this.getUserRecordMap(e.userId).getValue(e.pointer)}getRole(e){return this.getUserRecordMap(e.userId).getRole(e.pointer)}getModelWithBackfilledSpaceId(e){return this.getUserRecordMap(e.userId).getModelWithBackfilledSpaceId(e.pointer)}setValueAndRole(e,t,o){return this.getUserRecordMap(e.userId).setValueAndRole(e.pointer,t,o),this}setModelAndRole(e,t,o){return this.getUserRecordMap(e.userId).setModelAndRole(e.pointer,t,o),this}delete(e){this.getUserRecordMap(e.userId).delete(e.pointer)}*[Symbol.iterator](){for(const[e,t]of(0,o(534177).WP)(this.data))for(const{pointer:o,model:r,role:i}of t)void 0!==r&&(yield{pointer:o,model:r,role:i,userId:e===n?void 0:e})}}},447438:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(672577);class n extends(()=>o(965828))().O{shouldPreventMobileAutoScroll(e){const t=this.find((t=>t.capture&&!(t.allowMobileAutoScroll&&e.device.isMobile)));return Boolean(t)}}const r=new n},447587:(e,t,o)=>{o.d(t,{A:()=>s});var n=o(296540),r=()=>o(401497),i=()=>o(719147),a=o(474848);function s(e){const{children:t,maxLines:o,onMore:i,onLess:s,clampOverride:c}=e,d=(0,n.useRef)(null),u=(0,n.useRef)(null),p=(0,n.useRef)(null),[m,g]=(0,n.useState)(!1),[f,v]=(0,n.useState)(!o),[h,_]=(0,n.useState)(0),[b,y]=(0,n.useState)(0),S=c&&o&&c.fontSize*c.lineHeight*o+.5,w=Boolean(c);(0,n.useEffect)((()=>{if(m){var e;const t=null===(e=u.current)||void 0===e?void 0:e.getClientRects()[0];_((null==t?void 0:t.height)??0),y((null==t?void 0:t.width)??0)}}),[m]);const k=(0,n.useCallback)((()=>{d.current&&g(d.current.scrollHeight>d.current.clientHeight+5)}),[]);(0,n.useEffect)((()=>{!f&&o&&k()}),[f,o,k]),(0,n.useEffect)((()=>{if(p.current){const e=new MutationObserver((()=>{f||k()})),t=new ResizeObserver((()=>{f||k()}));return t.observe(p.current),e.observe(p.current,{childList:!0,subtree:!0,characterData:!0}),()=>{t.disconnect(),e.disconnect()}}}),[f,k]);const I=(0,n.useCallback)((e=>{i?i(e):(e.preventDefault(),e.stopPropagation(),v(!0))}),[i]),A=(0,n.useCallback)((e=>{s?s(e):(e.preventDefault(),e.stopPropagation(),v(!1))}),[s]),x=(0,n.useMemo)((()=>(0,a.jsx)(l,{style:{position:"absolute",right:0,bottom:0},onClick:I,children:(0,a.jsx)("div",{ref:u,children:e.moreElement})})),[e.moreElement,I]),C=(0,n.useMemo)((()=>(0,a.jsx)(l,{onClick:A,children:e.lessElement})),[e.lessElement,A]),T=(0,r().IS)((e=>({base:{display:"-webkit-box",WebkitBoxOrient:"vertical",...!w&&{WebkitLineClamp:f?void 0:o},...w&&{maxHeight:f?void 0:S}},clamped:{WebkitMaskPosition:"right bottom",WebkitMask:`linear-gradient(0deg,transparent 0,transparent ${h}px,#000 ${h}px),\n\t\t\t\t\t\t\t linear-gradient(270deg,transparent 0,transparent ${b}px,#000 ${2*b}px)`}})),[o,f,h,b,S,w]);return(0,a.jsxs)("div",{style:{position:"relative"},dir:"auto",children:[(0,a.jsxs)("div",{ref:d,style:{...T.base,...m&&!f&&T.clamped,...e.style},children:[(0,a.jsx)("div",{ref:p,children:t}),m&&f&&C]}),m&&!f&&x]})}function l(e){let{onClick:t,style:o,children:n}=e;return(0,a.jsx)(i().A,{disableUnderline:!0,style:o,onClick:e=>{t(e)},children:n})}},448433:(e,t,o)=>{o.d(t,{ey:()=>P,h:()=>M});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(803949),o(581454);var n=()=>o(474424),r=()=>o(700500),i=()=>o(207289),a=()=>o(792071),s=()=>o(142748),l=()=>o(212547),c=()=>o(813690),d=()=>o(388821),u=()=>o(56125),p=()=>o(179034),m=()=>o(496603),g=()=>o(534177),f=()=>o(870618),v=()=>o(108944),h=()=>o(355012),_=()=>o(437622),b=()=>o(670631),y=()=>o(508496),S=()=>o(41161),w=()=>o(968172),k=()=>o(630116),I=()=>o(314648),A=()=>o(523584);const x=432e5,C=1e3;async function T(e){let{currentSpaceStore:t,environment:o,blockSourceLookup:r,recordsIdsToSubscribe:g}=e;const h=performance.now(),_=t.id,b=d().RecordMapWithRole.create(),y=Array.from(r.keys()).map((e=>({table:p().ev,id:e,spaceId:_}))),S=new Set;await(0,u().d3)({recordPointers:y,recordMap:b,loadRecordModel:async e=>{const n=await(0,f().h7)({environment:o,pointer:e});if(!n){S.add(e.id);const o=k().sk.createChildStore(t,e);await o.load();const n=o.getRole(),r=o.getModel();if(n)return{model:r,role:n}}return n},recurFn:e=>m().oE([(0,l().A0)(e)&&e.getParentPointer(),e.table===p().ev&&e.getCollectionPointer()])});const w=performance.now(),I=c().xb.fromRecordMapWithRole(b),A=a().b4_.fromGetRecordValueFn(I),x=new Array;for(const[a,l]of r.entries()){const e={table:p().ev,id:a,spaceId:_};let o;g.has(a)&&(o=k().sk.createChildStore(t,e));const r=A(e);if(!r)continue;const c=(0,s().n1)(e,b);if(0===c.length)continue;if(r.getSpaceId()!==t.id)continue;if(!l)continue;const d=(0,v().um)(c);if(d&&Boolean(d.value.archived_by))continue;const u=(0,i().KM)((0,n().g)({blockValue:r,getRecordValue:I}).text);if(!u)continue;const m=u.substring(0,C).trim();x.push({blockModel:r,text:m,path:c,source:l,blockStore:o})}return{indexRecords:x.map((e=>{return{id:e.blockModel.id,text:e.text,inits:(t=e.text,t.split(" ").map((e=>Array.from(e).slice(0,1))).join("")),block:e};var t})),recordMap:b,numRecordsRequiredSync:S.size,recordsLoadedMs:w-h,textGeneratedMs:performance.now()-w}}async function M(e){const{environment:t,currentSpaceStore:o,currentSpaceViewStore:n}=e,i=performance.now();let a=i;const s=(0,A().Fr)().finally((()=>{a=performance.now()})),{id:l}=o,c=new Map,d=new Set;function u(e,t){var o;c.has(e)?null===(o=c.get(e))||void 0===o||o.add(t):c.set(e,new Set([t]))}const m=(new Date).getTime();if(n)for(const r of n.getBookmarkedPageIds())u(r,"bookmarkedPage");const f=t.currentUser.id;if(n){for(const{id:o}of(0,_().cU)(t,n))u(o,"sharedPage");const e=m-x;t.defaultRecordCache.inMemoryRecordCache.forEachRecord(f,(t=>{let{model:n}=t;if(n.table===p().ev&&n.spaceId===o.id){const{id:t,last_edited_time:o,last_edited_by_id:i,type:a}=n;(0,r().$I)(a)&&i===f&&o&&o>e&&(u(t,"defaultRecordCache"),d.add(t))}}))}const v=S().A.getVisitedIds(f);for(const r of v)u(r,"frecencyStore"),d.add(r);if(f)for(const r of(0,h().Kn)({spaceId:l,userId:f})??[])u(r.pageId,"frecencyStore"),d.add(r.pageId);if(l&&f){var k;const e=I().default.getUserSignals({spaceId:l,userId:f});var C,M;if(Object.values((null==e?void 0:e.similarUserRecentPages)??{}).forEach((e=>{let{pageId:t}=e;u(t,"similarUser1dRecentPages"),d.add(t)})),null==e||null===(k=e.topPages7dPageView)||void 0===k||k.forEach((e=>{let{pageId:t}=e;u(t,"topPages7dPageView"),d.add(t)})),"on"===y().default.getGroup("search-include-all-local-sources"))null==e||null===(C=e.editedPages)||void 0===C||C.forEach((e=>{let{pageId:t}=e;u(t,"editedPages1d"),d.add(t)})),null==e||null===(M=e.similarUsersEditedPages)||void 0===M||M.forEach((e=>{let{pageId:t}=e;u(t,"similarUsersEditedPages1d"),d.add(t)}))}const P=w().A.get(l);P&&P.forEach((e=>{let{pageId:t}=e;u(t,"recentVisit"),d.add(t)}));const B=b().A.state.offlinePages;if(B)for(const r of(0,g().uv)(B))r&&u(r,"offlinePage");const R={spacePage:0,recentVisit:0,bookmarkedPage:0,sharedPage:0,frecencyStore:0,teamPage:0,defaultRecordCache:0,unknown:0,similarUser1dRecentPages:0,topPages7dPageView:0,editedPages1d:0,similarUsersEditedPages1d:0,offlinePage:0};c.forEach((e=>{e.forEach((e=>{R[e]+=1}))}));const E=performance.now(),{indexRecords:D,recordMap:N,numRecordsRequiredSync:L,recordsLoadedMs:F,textGeneratedMs:U}=await T({currentSpaceStore:o,environment:t,blockSourceLookup:c,recordsIdsToSubscribe:d}),{index:O,getAllBlocks:V}=await s,j=performance.now();await O.addAllAsync(D);const z=performance.now();return{spaceId:o.id,blocks:O,getAllBlocks:V,recordMap:N,blockSourceCount:R,buildStartTime:i,numRecordsRequiredSync:L,timings:{blocksGatheredMs:E-i,recordsLoadedMs:F,textGeneratedMs:U,indexMs:z-j,indexConstructedMs:a-i}}}async function P(e){let{currentSpaceStore:t,id:o,source:n}=e;const r=new Map;r.set(o,n);const i=new Set([o]),a=t.environment,{indexRecords:s}=await T({currentSpaceStore:t,environment:a,blockSourceLookup:r,recordsIdsToSubscribe:i});return s.find((e=>e.id===o))}},448619:(e,t,o)=>{o.d(t,{IV:()=>f,Wx:()=>g,t5:()=>h});o(16280);var n=()=>o(908006),r=()=>o(919709),i=()=>o(534177),a=()=>o(197194),s=()=>o(231722),l=()=>o(906537),c=()=>o(792002),d=()=>o(569777),u=()=>o(24157),p=()=>o(606952),m=()=>o(725614);function g(e){var t;const{environment:o,selectedToken:n,selectionRect:i,analyticsFrom:p}=e,g=l().get();if(!g)return;if("editing"!==u().default.state.mode)return;const f=null===(t=(0,s().H7)(u().default.state.multiSelection))||void 0===t?void 0:t.store;if(!f)return;const v=n||a().cy(u().default.state);v&&m().setSelection({store:f,selection:v.position});const h=c().O7(u().default.state),_=v?r().u$N(v.token):a().WP(h),b=a().vG({environment:o,equation:_,displayMode:"inline"}),y=v?{editingToken:v.token}:{annotations:a().zG(u().default.state)};d().A.setState({open:!0,value:_,error:b,savedTextSelectionState:u().default.state,savedTextSelectionRect:i||a().B_({environment:o,selection:g}),...y,analyticsFrom:a().aT({source:p,currentEquationToken:Boolean(v),selectedText:h})}),m().clear({environment:o})}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d().q.Forward;d().A.isOpen()&&(v({equationStore:d().A,getNextSelection:t=>e===d().q.Forward?{startIndex:t.endIndex,endIndex:t.endIndex}:e===d().q.Backward?{startIndex:t.startIndex,endIndex:t.startIndex}:(0,i().HB)(e)}),d().A.reset(),n().default.afterNextFlush((()=>{u().default.emit()})))}function v(e){const{equationStore:t,getNextSelection:o}=e;if(!t.isOpen())return;const{savedTextSelectionState:n}=t.state,r=(0,s().H7)(n.multiSelection);if(!r)return;const i=o(r.selection);if(m().setSelection({store:r.store,selection:i}),"editing"!==u().default.state.mode)throw new Error("TextSelectionStore should have a selection after calling `setSelection`.");t.setState({...t.state,savedTextSelectionState:u().default.state})}function h(e){const{environment:t,equationStore:o,transaction:n}=e;o.isOpen()&&(o.state.error||o.state.editingToken&&r().u$N(o.state.editingToken)===o.state.value||(!function(e){const{environment:t,equationStore:o,transaction:n}=e;if(!o.isOpen())return;if(o.state.error)return;const{savedTextSelectionState:i}=o.state,{multiSelection:s}=i;let l;p().f0({environment:t,multiSelection:s,transaction:n}),o.state.value&&(l=a().G0({equationState:o.state,isTemporary:!1}),p().yr({environment:t,store:s.start.store,index:s.start.index,tokens:[l],transaction:n})),v({equationStore:o,getNextSelection:e=>{const t=l?r().qAZ([l]).length:0;return{startIndex:e.startIndex,endIndex:e.startIndex+t}}})}({environment:t,equationStore:d().A,transaction:n}),v({equationStore:o,getNextSelection:e=>({startIndex:e.endIndex,endIndex:e.endIndex})}),a().vK({environment:t,equation:o.state.value,from:o.state.analyticsFrom})))}},448664:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(e){let{emojiStore:t,size:r,testId:i}=e;const a=(0,o(484714).v3)(),s=(0,o(401497).IS)((e=>({icon:{fill:e.icon.tertiary,width:r}})),[r]);return(0,o(56366).K8)((()=>t.isDefined()&&t.getAlive()?(0,n.jsx)(o(853002).A,{emojiId:t.id,emojiName:t.getName(),emojiUrl:t.getUrl(),spaceId:t.pointer.spaceId,size:r,baseUrl:o(780054).A.domainBaseUrl,currentUserId:a.currentUser.id,disableAnimation:a.device.prefersReducedMotion,testId:i}):(0,o(736492).G)(s.icon)),[t,r,a.currentUser.id,a.device.prefersReducedMotion,s.icon,i])}},448801:(e,t,o)=>{o.d(t,{i:()=>r});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(371562);n();function r(e,t){const o=n().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(e,t);if(!o)return{beforeOps:{},removeOps:new Set};let r=[],i=[];for(const n in o)"_t"!==n&&("_"===n[0]?r.push(parseInt(n.slice(1),10)):1===o[n].length&&i.push({index:parseInt(n,10),value:o[n][0]}));const a={},s=new Set,l=[...e];r=r.sort(((e,t)=>e-t));for(let n=r.length-1;n>=0;n--){const e=r[n],t=l.splice(e,1)[0];s.add(t)}i=i.sort(((e,t)=>e.index-t.index));for(let n=0;n<i.length;n++){const e=i[n];a[e.value]=l[e.index],l.splice(e.index,0,e.value)}return{beforeOps:a,removeOps:s}}},449195:(e,t,o)=>{o.d(t,{LN:()=>m,Rn:()=>u,SB:()=>f,SE:()=>c,_f:()=>_,ln:()=>h,nl:()=>v,vk:()=>g,z5:()=>p});var n=()=>o(713998),r=()=>o(651124),i=()=>o(534177),a=()=>o(351360),s=()=>o(712505);function l(){const{mainEditorCurrentBlockStore:e}=a().default.state;return s().default.state.open&&s().default.state.targetStore||e}function c(){var e;return null===(e=l())||void 0===e?void 0:e.getAssociatedCollectionStore()}function d(){const e=l();return c()||e}function u(){const e=d();if(!e)return;return p(e.getFormat().page_section_visibility)}function p(e){return(null==e?void 0:e.comments)??r().Zi.comments}function m(){const e=d();if(!e)return;return g(e.getFormat().page_section_visibility)}function g(e){return(null==e?void 0:e.margin_comments)??r().Zi.margin_comments}function f(e){return"always_show"===e?"always_show":"section_hide"===e||"inline"===e||"minimal"===e?"section_hide":"section_show"===e||"section_collapsed"===e?"section_collapsed":void(0,i().HB)(e)}function v(e){return f((null==e?void 0:e.backlinks)??r().Zi.backlinks)}function h(){var e,t;const o=(null===(e=c())||void 0===e||null===(e=e.getParentBlockStore())||void 0===e?void 0:e.isLocked())??!1;return((null===(t=l())||void 0===t?void 0:t.isLocked())??!1)||o}function _(e){const{propertySchema:t}=e,{type:o}=t,r=(0,n().MW)(t);return!(["created_time","created_by","last_edited_time","last_edited_by"].includes(o)||r)}},449476:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isOpen:!1}}getSessionId(){return this.state.isOpen?this.state.sessionId:void 0}}const r=new n},449506:(e,t,o)=>{o.r(t),o.d(t,{callApi:()=>B,callMultiCellApi:()=>R,callStreamApi:()=>E});o(898992),o(581454),o(908872);var n=()=>o(905343),r=()=>o(857639),i=()=>o(416845),a=()=>o(243020);const s={getPageBacklinks:{initial:"getBacklinksForBlockInitial",fanout:"getBacklinksForBlockFanout"},testMultiCell:{initial:"testMultiCellInitial",fanout:"testMultiCellFanout"},getSpaces:{initial:"getSpacesInitial",fanout:"getSpacesFanout"},getUserNotifications:{initial:"getUserNotificationsInitial",fanout:"getUserNotificationsFanout"},getWebClipperData:{initial:"getWebClipperDataInitial",fanout:"getWebClipperDataFanout"},syncRecordValuesSpace:{initial:"syncRecordValuesSpaceInitial",fanout:"syncRecordValuesSpaceFanout"}};var l=()=>o(427704),c=()=>o(532659),d=()=>o(496603),u=()=>o(763824),p=()=>o(989423),m=()=>o(754704),g=()=>o(898486),f=()=>o(974233),v=()=>o(972435),h=()=>o(740456),_=()=>o(836251),b=()=>o(719431),y=()=>o(133234),S=()=>o(459225),w=()=>o(351360),k=()=>o(227440),I=()=>o(961581),A=()=>o(787172),x=()=>o(901389),C=()=>o(435009);const T=d().sg((async(e,t)=>{await b().actuallyLogoutAndDeleteMostLocalData({environment:e,userId:t,doNotRedirect:!0,logoutOrigin:a().d.PageAccessDenied})}),1e3);let M;async function P(e,t,o,n){if((0,i().IQ)(o.body)){x().Qg(o);const t=o.body.clientData&&(0,g().Yu)(o.body.clientData);p().vd(e,"show_user_validation_response",{type:null==t?void 0:t.type})}if(o.offline)return o;console.error(o.error);const{RouterStore:s}=e;if(401===o.status&&r().log({level:"error",from:"api",type:"httpTrigger401",data:{eventName:t,isLoggedIn:e.currentUser.isLoggedIn(),miscDataToConvertToString:{response:o},routeName:s.state.route.name}}),403===o.status&&o.headers["content-type"]&&o.headers["content-type"].startsWith("text/html")&&r().logWithSampleRate({logMessage:{level:"error",from:"api",type:"httpTrigger403",data:{eventName:t,isLoggedIn:e.currentUser.isLoggedIn(),miscDataToConvertToString:{response:o},userId:e.currentUser.id,routeName:s.state.route.name}},samplePercentage:1}),(0,i().PK)(o.body)&&n&&n===e.currentUser.id){const t=[{label:v().A.formatMessage(x()._0.tryAgainButtonLabel),onAccept:d().D_},{label:v().A.formatMessage(x()._0.logoutButtonLabel),onAccept:async()=>{await b().actuallyLogoutAndDeleteMostLocalData({environment:e,userId:n,nextLocation:l().JZ.root,logoutOrigin:a().d.WorkspaceNotAllowed})}}];x().Qg(o,void 0,t)}if(401===o.status&&Boolean(o.body&&o.body.errorId)&&e.currentUser.isLoggedIn())switch(s.state.route.name){case"page":if((0,_().w6)(e)){await b().actuallyLogoutAndDeleteMostLocalData({environment:e,nextLocation:window.location.pathname,logoutOrigin:a().d.PublicPageAccessDenied});break}case"root":case"space":case"onboarding":case"myIntegrations":case"creatorProfile":case"creatorProfileAnalytics":case"creatorProfileTemplates":case"creatorProfileCoupons":case"creatorProfileIntegrations":case"studentGroupSignup":if(n&&n===e.currentUser.id){await T(e,n);!function(e,t){const{RouterStore:o}=e;if((0,i().op)(t.body)&&"saml_sso_required"===t.body.clientData.type){const e=(0,g().Hu)(v().A.getIntl(),t);y().A.setState({...y().A.state,loginType:"saml",alert:e})}else if((0,i().op)(t.body)&&"email_verification_required"===t.body.clientData.type){const{email:e,thirdPartyToken:o}=t.body.clientData;y().A.setState({...y().A.state,loginType:"microsoft_login",email:e,thirdPartyToken:o,needsSendTemporaryPasswordReason:"microsoft_login_verification"})}else if((0,i().op)(t.body)&&("login_custom_session_expired"===t.body.clientData.type||"login_generic_session_expired"===t.body.clientData.type)){const e=v().A.getIntl().formatMessage("login_custom_session_expired"===t.body.clientData.type?g().YT.login_custom_session_expired:g().YT.login_generic_session_expired,{errorCode:t.status});y().A.setState({...y().A.state,alert:e})}C().oo({environment:e,url:"page"===o.state.route.name?window.location.href:l().JZ.login})}(await b().clearCurrentUser(e),o)}}return o}async function B(e){const{environment:t,eventName:o,data:a,userId:l,tracking:c,abortSignal:u,prefetchCacheKey:p,encoding:g,headers:v,prefetchMultiCellFanout:_,inMemoryRecordCache:b}=e;!function(e){for(const t of Object.keys(e)){const o=e[t];(d().kZ(o)||d().b0(o))&&delete e[t]}}(a);const y=l||t.currentUser.id,x=(0,m().createApiHttpJsonRequestOptions)({environment:t,eventName:o,data:a,activeUserId:y,tracking:c,abortSignal:u,encoding:g,eventListeners:(0,S().getPerformanceEventListeners)({eventName:o,isPrefetchRequest:!1}),headers:v});let C;if(p&&t.prefetchCache){let e=p;if(_){if(!(p in s))throw new(i().yI)("prefetchMultiCellFanout can only enable prefetching for multi-cell api events");e=`${p}-${(0,h().hK)(x)}`}C=t.prefetchCache.getPrefetchedHttpRequest({key:e,request:x,abortSignal:u,isMobileNative:t.device.isMobileNative})}C??=(0,f().default)(x),I().A.incrementNumApiCallsInitiated();const T=Date.now(),B=await C,R=Date.now();return n().A.addTrace({type:"api_call",name:o,start:T,end:R}),I().A.incrementNumApiCallsCompleted(),"success"===B.type?(A().s({environment:t,eventName:o,response:B.data,userId:y,inMemoryRecordCache:b}),function(e){const{environment:t,responseUserId:o,eventName:n}=e;if(!o)return;if("saveTransactions"!==n&&"saveTransactionsMain"!==n&&"saveTransactionsFanout"!==n)return;const{id:i}=t.currentUser;if(o!==i){if(M===o)return;const{currentUserStore:e,currentUserRootStore:t,currentUserSettingsStore:a,currentSpaceViewStore:s}=w().default.state,l=i||"<undefined>",c=`currentUser ${l} didn't match user's cookie ${o}`;r().log({from:"client/api",level:"error",type:"currentUserWrong",data:{eventName:n,miscDataToConvertToString:{responseUserId:o,connectionStoreState:k().A.state,currentUserId:l,userStoreId:e&&e.id,userRootStoreId:t&&t.id,userSettingsStoreId:a&&a.id,currentSpaceViewStoreParentId:s&&s.getParentId()},message:c}}),M=o}else M=void 0}({environment:t,eventName:o,responseUserId:B.headers["X-Notion-User-Id"]}),B):P(t,o,B,y)}async function*R(e){const{eventName:t}=e,{initial:o,fanout:n}=function(e){return s[e]}(t),r=await B({...e,eventName:o});if("failed"===r.type)return void(yield r);if(yield r,!r.data.fanoutData)return;const i=async function*(t){const o=await u().lX(t,10,(async t=>B({...e,data:t.request,eventName:n,headers:t.headers,prefetchMultiCellFanout:!0})));for(const e of o)yield e;const r=o.map((e=>{if("success"===e.type)return e.data.fanoutData})).reduce(((e,t)=>t?e.concat(t):e),[]);r&&r.length&&(yield*i(r))};yield*i(r.data.fanoutData)}async function E(e){const{eventName:t,environment:o,data:n,userId:r,tracking:i,abortSignal:a,headers:s}=e,l=r||o.currentUser.id,d=(0,m().createApiHttpRequestOptions)({environment:o,eventName:t,data:n,activeUserId:l,tracking:i,abortSignal:a,eventListeners:(0,S().getPerformanceEventListeners)({eventName:t,isPrefetchRequest:!1}),format:"jsonStream",headers:s}),u=await(0,f().default)(d);return"failed"===u.type?P(o,t,u,l):(c().hS.is(u.data)||A().s({environment:o,eventName:t,response:u.data,userId:l}),u)}},449552:(e,t,o)=>{o.d(t,{g:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("lockedFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.69141 14.6338H11.3018C12.2178 14.6338 12.6689 14.1826 12.6689 13.1914V8.08496C12.6689 7.18945 12.293 6.72461 11.541 6.64941V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.67676C3.74805 6.78613 3.32422 7.2373 3.32422 8.08496V13.1914C3.32422 14.1826 3.77539 14.6338 4.69141 14.6338ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.64258L5.75098 6.64941V4.83105Z"})})},449918:(e,t,o)=>{o.d(t,{e:()=>a});var n=()=>o(496603),r=()=>o(875856),i=()=>o(42772);function a(){const e={user_id:(0,i().m)(),user_email:r().default.state.user_email,email:r().default.state.user_email,name:r().default.state.user_name};return n().z7(e,n().b0)}},450510:(e,t,o)=>{o.d(t,{B2:()=>x,BC:()=>y,BJ:()=>C,GW:()=>T,QP:()=>k,Ty:()=>M,fU:()=>f,hn:()=>h,oe:()=>I,sE:()=>v,sG:()=>_,si:()=>b,ut:()=>S,wy:()=>w,yR:()=>A});var n=()=>o(700500),r=()=>o(100622),i=()=>o(284371),a=()=>o(720665),s=()=>o(519839),l=()=>o(835066),c=()=>o(186445),d=()=>o(405417),u=()=>o(478726),p=()=>o(644914),m=()=>o(502438),g=()=>o(236030);function f(e,t){return e.col===t.col&&e.row===t.row}const v="text/_notion-table";function h(e){return{minCol:Math.min(e.start.col,e.end.col),maxCol:Math.max(e.start.col,e.end.col),minRow:Math.min(e.start.row,e.end.row),maxRow:Math.max(e.start.row,e.end.row)}}function _(e){let{isMobile:t}=e;return t?36:32}function b(e){let{columnIndex:t,titleColumnIndex:o,indentLevel:n,isSubitemToggleOnTitleColumn:r}=e;if(y({columnIndex:t,titleColumnIndex:o,isSubitemToggleOnTitleColumn:r})&&n>0){return d().yy*n+5}return 0}function y(e){let{columnIndex:t,titleColumnIndex:o,isSubitemToggleOnTitleColumn:n}=e;return n?t===o:0===t}function S(e){let{collectionViewBlockId:t}=e;const o=m().default.state.stores;return 0!==o.length&&!(0,s().Rd)(o,t)}function w(e){const{environment:t,collectionContextStore:o,isPhone:n,stickyLeft:i,theme:a}=e;if(n)return{};const l=o.collectionViewBlockStore(),c=null==l?void 0:l.getParentBlockStore();let d;const u=o.isInPeekRendererStore.state;if("dark"===a.mode&&u&&(d=a.peekModalBackground),"dark"===a.mode&&o.isInHomeWidgetStore.state&&(d=a.accentColors.gray[90]),c&&!o.isFullScreenStore.state&&(null==l||!l.isRootOrDirectChild())){var m;const e=null===(m=c.getModel())||void 0===m?void 0:m.getFormat().block_color;e&&(d=(0,r().k5)(e,a).background)}const f=o.frozoneStore.state.scrollerLeftOffset??0,v=(0,p().kf)(t),h=Math.max(v-f,0),_=k(t,o)?h:0,b=o.frozoneStore.state.scrollerLeftPadding,y=(0,s().f5)({environment:t,collectionContextStore:o});return{background:d||a.contentBackground,position:"sticky",left:`calc(${(i||0)+_-(b||0)+(y?g().Fh:0)}px + -1 * var(--sticky-horizontal-offset, 0px))`,zIndex:83}}function k(e,t){const o=t.collectionViewBlockStore();return!!o&&(o.isRootOrDirectChild()&&(0,l().dC)(e,o)&&!t.isFullScreenStore.state&&!(0,u().Ck)(o,void 0,e)&&!o.isCollectionViewPageWithContent())}function I(e){const{environment:t,propertyFormat:o}=e,n=o.width;if(!t.device.isPhone)return n;const r=t.WindowSizeStore.getSafePaddingLeftPx((0,c().F8)(t)),i=t.WindowSizeStore.getSafePaddingRightPx((0,c().F8)(t)),a=t.WindowSizeStore.state.width-r-i;return n?Math.min(n,a):a}function A(e,t,o){return{start:{col:(0,a().qE)(e.start.col,0,t-1),row:(0,a().qE)(e.start.row,0,o-1)},end:{col:(0,a().qE)(e.end.col,0,t-1),row:(0,a().qE)(e.end.row,0,o-1)}}}function x(e){const{blockStore:t,isFullScreen:o,environment:r,collectionContextStore:i}=e;if(o)return!1;if(!(0,s().f5)({environment:r,collectionContextStore:i}))return!1;const a=t.getParentBlockStore(),l=null==a?void 0:a.getType(),c=null==a?void 0:a.getFormat();return!(!a||!l)&&(0,n().Z3)(l,c)}function C(e){let{theme:t,isMobile:o,hideTextWithTransition:n,hideTextWithoutTransition:r}=e;return{button:{display:"flex",alignItems:"center",height:_({isMobile:o})+1,width:"100%",paddingLeft:g().tz,lineHeight:i().K_.UIRegular.desktop},buttonInner:{fontSize:14,color:t.lightTextColor,display:"inline-flex",alignItems:"center",position:"sticky",left:o?g().Fh:g().tz+g().Fh,opacity:n?0:1,transition:"opacity 0.2s ease",...r&&{display:"none"}},icon:{width:14,height:14,marginLeft:o?0:1,marginRight:7,fill:t.lightIconColor}}}function T(e,t){const o=M(e,t);return o&&o.table_properties?o.table_properties:[]}function M(e,t){const{temporaryFormat:o}=t.state;return o||e}},450519:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isActive:!1}}cloneState(){return o(496603).o8(this.state)}}const r=new n},452939:(e,t,o)=>{o.d(t,{$W:()=>B,A8:()=>P,K5:()=>A,LT:()=>k,Mb:()=>T,ND:()=>m,Pg:()=>C,R1:()=>M,TG:()=>h,Tv:()=>R,Xx:()=>b,bL:()=>w,ff:()=>S,p:()=>y,rr:()=>v,uB:()=>I,vO:()=>f,xL:()=>x,xn:()=>_,yP:()=>g});var n=()=>o(554279),r=()=>o(584262),i=()=>o(677338),a=()=>o(763824),s=()=>o(939768),l=()=>o(989423),c=()=>o(311890),d=()=>o(644914),u=()=>o(155959),p=()=>o(508496);function m(e){if(e.isCollectionView())return"database";return"collection"===e.getParentTable()?"database_page":"page"}function g(e,t){const{page_id:o,query:n,team_id:i,page_visit_id:a,previous_page_visit_id:p,marketplace_state:m,page_visit_source_override:g,...f}=t,v=s().qn(n,r().k3),h=g??parseInt(v),_="push"===e.RouterStore.getState().action,b=(0,r().z2)(h)&&_?(0,r().hJ)(r().y8.LinkInPage):(0,r().hJ)(h),y=s().qn(n,r().rh),S=c().NG({blockOrCollectionId:o}),w=e.device.isPhone&&(0,u().T)("supportsNativeHome")?{is_sidebar_open:!1}:(0,d().hX)({environment:e}),k={eventName:"page_visit",eventProperties:{...f,page_visit_source:b,notification_id:y,page_visit_id:a,previous_page_visit_id:p,entered_at:Date.now(),home_page_type:S,marketplace_state:m,...w}};l().u4({environment:e,event:k,opts:{forceOverrideAutomaticEventData:{team_id:i}}})}function f(e,t){const{pageVisitId:o,pageVisitDuration:n,...r}=t;l().vd(e,"page_exit",{exited_at:Date.now(),visit_duration:n,page_visit_id:o},{forceOverrideAutomaticEventData:r})}function v(e){const t=[{name:"initial_partner_stack_key",value:e.partner_stack_key,operation:"setOnce"},{name:"partner_stack_key",value:e.partner_stack_key,operation:"set"}];l().J1(t)}function h(e,t){const o=s().iW(t,(0,i().JU)());if(o){const{fbclid:e,gclid:t}=o;e&&n().Mj({type:"facebook",id:e}),t&&n().Mj({type:"google",id:t}),(0,i().Fo)(o)}l().u4({environment:e,event:{eventName:"visit",eventProperties:{}}})}function _(e,t){l().vd(e,"page_error",t)}function b(e,t){l().vd(e,"page_error_button_click",t)}function y(e,t){l().vd(e,"reorder_workspaces",t)}function S(e,t){l().vd(e,"multi_account_add_or_create_account_clicked",t)}function w(e){l().vd(e,"content_classification_proceed")}function k(e,t){l().vd(e,"notion_topbar_click",t,{dontWait:!0}),p().default.logEvent("notion_topbar_click",t.variant)}function I(e,t){l().vd(e,"template_gallery_public_page_topbar_click",t,{dontWait:!0}),p().default.logEvent("template_gallery_public_page_topbar_click",t.target)}function A(e,t){l().vd(e,"getting_started_page_create",t)}function x(e,t){l().vd(e,"debug_getting_started_page_error",t)}function C(e,t){l().vd(e,"landing_page_visit",{routerName:t.routerName,from_cta:t.fromCta}),(0,a().wR)(4e3).then((o=>{p().default.logEvent(`${t.routerName}_page_visit`,e.device.deviceType,{})}))}function T(e,t){l().vd(e,"desktop_app_signup_browser_visit",{desktop_app_reroute_email:t.desktopAppRerouteEmail,desktop_app_device_id:t.desktopAppDeviceId})}function M(e,t,o){const n=e=>({blockId:"blockId"in e?e.blockId:void 0,peekViewBlockId:"peekViewBlockId"in e?e.peekViewBlockId:void 0}),{blockId:i,peekViewBlockId:a}=n(t),{blockId:s,peekViewBlockId:c}=n(o),d="pageVisitSource"in o&&o.pageVisitSource?(0,r().hJ)(parseInt(o.pageVisitSource)):void 0;l().vd(e,"click_in_page_navigation",{current_route_name:t.name,next_route_name:o.name,page_visit_source:d,current_page_id:i,current_peek_view_page_id:a,next_page_id:s,next_peek_view_page_id:c})}function P(e){l().vd(e,"public_page_topbar_edit_click",{},{dontWait:!0}),p().default.logEvent("public_page_topbar_edit_click")}function B(e){l().vd(e,"public_page_topbar_comment_click",{},{dontWait:!0}),p().default.logEvent("public_page_topbar_comment_click")}function R(e){l().vd(e,"public_page_topbar_menu_sign_up_log_in_click",{},{dontWait:!0}),p().default.logEvent("public_page_topbar_menu_sign_up_log_in_click")}},452951:(e,t,o)=>{o.d(t,{Z:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowRight",{viewBox:"0 0 30 30",svg:(0,n.jsx)("polygon",{points:"1 14 25.188 14 16.594 5.406 18 4 29 15 18 26 16.594 24.594 25.188 16 1 16"})})},454305:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{mouseEntered:!1,mousePressed:!1}}enter(){this.setState({...this.state,mouseEntered:!0})}exit(){this.setState({...this.state,mouseEntered:!1})}}const r=n},454503:(e,t,o)=>{o.d(t,{D:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M7.592 4.792a.625.625 0 1 0-.884-.884l-4.4 4.4a.625.625 0 0 0 0 .884l4.4 4.4a.625.625 0 1 0 .884-.884L4.259 9.375H14a2.625 2.625 0 0 1 0 5.25h-1.42a.625.625 0 1 0 0 1.25H14a3.875 3.875 0 0 0 0-7.75H4.259z"})},r=(0,o(340498).wt)("arrowUTurnUpLeft",n)},455215:(e,t,o)=>{o.d(t,{A:()=>x});o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(75756),l=()=>o(839816),c=()=>o(959013),d=()=>o(673998),u=()=>o(38337),p=()=>o(722872),m=()=>o(438754),g=()=>o(700250),f=()=>o(493823),v=()=>o(760217),h=()=>o(406699),_=()=>o(928600),b=()=>o(939740),y=()=>o(89924),S=()=>o(946548),w=()=>o(125565),k=o(474848);function I(e){let{hasDismissButton:t,onDismiss:o}=e;const i=(0,r().v3)(),g=(0,a().DP)(),v=(0,c().tz)(),[h,S]=(0,n.useState)(!1);(0,n.useEffect)((()=>()=>{t||h&&d().wB()}),[v,h,t]);const I=[{key:"trackingTypes",render:e=>(0,k.jsx)(y().A,{...e,topBorder:0!==e.index}),items:l().dc.map((e=>({key:e,render:t=>(0,k.jsx)(A,{menuListItemProps:t,trackingType:e,setShowReloadOnMenuClose:S,isNativeiOSApp:i.device.isMobileNative&&i.device.isIOS}),action:()=>d().Ef(i,e)})))}];return(0,k.jsxs)(_().A,{className:u().Qm5,menuType:p().gu.Popup,width:260,children:[(0,k.jsx)("div",{style:{display:"flex",alignItems:"center",paddingTop:t?4:0},children:t&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(w().A,{isSmall:!0,isMultiline:!0,style:{width:"80%",paddingLeft:14},children:(0,k.jsx)("b",{children:(0,k.jsx)(c().sA,{...s().LS.customizeCookiesHeader})})}),(0,k.jsx)(f().p,{style:{float:"right",marginLeft:-8,paddingLeft:8,paddingRight:8,color:g.blueColor},onClick:()=>{d().gz(i,m().A.getPermission()),o&&o()},children:(0,k.jsx)(c().sA,{...s().LS.cookieDismissButtonLabel})})]})}),(0,k.jsx)(b().Ay,{type:b().Oh.Vertical,initialFocus:void 0,sections:I})]})}function A(e){const{menuListItemProps:t,trackingType:o,setShowReloadOnMenuClose:n,isNativeiOSApp:l}=e,{title:u,caption:p,subtitle:g}=(0,s().ID)(o,l),[{permission:f}]=(0,i().$y)(m().A),h=(0,a().DP)(),_=(0,r().v3)();return(0,k.jsx)(v().A,{...t,title:(0,k.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,k.jsx)("div",{style:{marginRight:0},children:(0,k.jsx)(c().sA,{...u})})}),caption:(0,k.jsxs)("div",{children:[g&&(0,k.jsx)("div",{children:(0,k.jsx)("span",{style:{color:h.errorText},children:(0,k.jsx)(c().sA,{...g})})}),(0,k.jsx)("div",{children:(0,k.jsx)("span",{style:{color:h.mediumTextColor},children:(0,k.jsx)(c().sA,{...p})})})]}),shouldWrapCaption:!0,right:(0,k.jsx)("div",{style:{display:"flex",width:"100%",alignItems:"center",cursor:"pointer"},children:(0,k.jsx)(S().A,{on:f[o],disabled:"necessary"===o,onClick:()=>{n(!0),d().Ef(_,o)}})})})}const x=function(e){let{renderOrigin:t,hasDismissButton:o,onDismiss:n}=e;return(0,k.jsx)(h().Ay,{popupType:h().z7.Popup,placementToOrigin:g().UV.Bottom,alignmentToOrigin:g().MY.Start,renderOrigin:t,render:()=>(0,k.jsx)(I,{hasDismissButton:o,onDismiss:n})})}},455968:(e,t,o)=>{o.d(t,{U:()=>a});var n=()=>o(496603);var r=()=>o(991385),i=()=>o(351360);function a(){const{currentUserSettingsStore:e}=i().default.state;if(e&&e.isDefined()){let o={};const i=e.getSettings();return i&&(o={user_persona:i.persona,user_source:i.source,user_use_case:i.use_case,time_zone:i.time_zone,time_zone_region:"string"==typeof i.time_zone?(t=i.time_zone,"N/A"===t?t:t.split("/")[0]):void 0,locale:i.locale,preferred_locale:i.preferred_locale,signup_time:i.signup_time,used_desktop_web_app:i.used_desktop_web_app,used_mobile_web_app:i.used_mobile_web_app,used_mac_app:i.used_mac_app,used_windows_app:i.used_windows_app,used_ios_app:i.used_ios_app,used_android_app:i.used_android_app,user_session_count:(0,r().B)(e.id)}),n().z7(o,n().b0)}var t}},455994:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{panelStates:{mainPage:{isOpen:!1,displayStyle:void 0,isMouseHoveringPanel:!1},peek:{isOpen:!1,displayStyle:void 0,isMouseHoveringPanel:!1}}}}updatePanelState(e,t){this.setState({...this.state,panelStates:{...this.state.panelStates,[e]:{...this.state.panelStates[e],...t}}})}resetPanelState(e){this.setState({...this.state,panelStates:{...this.state.panelStates,[e]:this.getInitialState().panelStates[e]}})}setOpen(e){this.state.panelStates[e].isOpen||this.updatePanelState(e,{isOpen:!0})}setClosed(e){this.state.panelStates[e].isOpen&&this.updatePanelState(e,{isOpen:!1})}setDisplayStyle(e){const{panelLocation:t,displayStyle:o}=e;this.state.panelStates[t].displayStyle!==o&&this.updatePanelState(t,{displayStyle:o})}setIsMouseHoveringPanel(e){const{panelLocation:t,isMouseHoveringPanel:o}=e;this.state.panelStates[t].isMouseHoveringPanel!==o&&this.updatePanelState(t,{isMouseHoveringPanel:o})}setSidebarIncreasedSizeOfPeekView(e){e!==this.state.detailsSidebarIncreasedSizeOfPeekView&&this.setState({...this.state,detailsSidebarIncreasedSizeOfPeekView:e})}getPanelState(e){return this.state.panelStates[e]}}const r=new n},456328:(e,t,o)=>{o.d(t,{BS:()=>c,CO:()=>a,Hb:()=>l,Y3:()=>i,_T:()=>d});o(898992),o(672577),o(803949),o(814603),o(147566),o(198721);var n=()=>o(997769),r=()=>o(792071);const i=8,a=70,s=1e3;(0,o(959013).YK)({member:{id:"sharedContextualInviteHelpers.member.inviteMessage2",defaultMessage:"{userName} shared a page {pageName} with you."},guest:{id:"sharedContextualInviteHelpers.guest.inviteMessage2",defaultMessage:"Accept {userName}{userNameEndsWithS, select, true {’} other {’s}} invite to view {pageName}."},default:{id:"sharedContextualInviteHelpers.default.inviteMessage",defaultMessage:"Your invitation message"},optional:{id:"sharedContextualInviteHelpers.default.inviteMessagePrefix",defaultMessage:"Optional message..."}});function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if(!e)return"";const o=n().I(e,"url");let r=e.slice();return o.forEach(((e,t)=>{r=r.replace(e.value,"[link]")})),r.length>t&&(r=`${r.substring(0,t)}...`),r}function c(e){if(!e)return!1;return n().I(e,"url").length>0}function d(e,t){var o;const n=null===(o=r().Bj6.fromValue("block",e).getPermissionItems())||void 0===o?void 0:o.find((e=>"user_permission"===e.type&&e.user_id===t.invited_user_id));if(n&&"invite_id"in n)return n.invite_id}},456663:(e,t,o)=>{o.d(t,{A:()=>i,o:()=>n});let n=function(e){return e[e.Team=0]="Team",e[e.Members=1]="Members",e}({});class r extends(()=>o(757695))().default{getInitialState(){return{open:!1,screen:n.Team,description:"",accessLevel:"open",isDefault:!1,name:"",icon:void 0,flowId:o(206267).JW(),pageNumber:1,onClose:void 0}}}const i=new r},457395:(e,t,o)=>{o.d(t,{n:()=>y,y:()=>S});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(803949);var n=()=>o(17022),r=()=>o(763884),i=()=>o(388821),a=()=>o(179034),s=()=>o(96689),l=()=>o(84520),c=()=>o(294712),d=()=>o(870618),u=()=>o(554493),p=()=>o(303626),m=()=>o(82648),g=()=>o(227440),f=()=>o(508496),v=()=>o(671887),h=()=>o(640812),_=()=>o(449506),b=()=>o(666144);function y(e,t){!function(){w&&g().A.removeListener(w);h().A.reset()}();const o=new AbortController;!async function(e){const{environment:t,userId:o,abortSignal:n}=e,r=await p().N.measure("loadUserContent","(current user)",(()=>async function(e){const{environment:t,abortSignal:o}=e,{defaultRecordCache:n,currentUser:r}=t;if(!n.persistedRecordCache)return;const i=r.id;if(!i)return;const a=[],u=await d().ww({environment:t,recordPointers:[{table:c().GD,id:i}],recurFn:e=>{const t=[],o=e=>{e&&(e.table!==l().mu&&e.table!==c().GD||a.push(e),t.push(e))};return e.table===c().GD?(o(e.getUserPointer()),e.getSpaceViewPointers().forEach(o)):e.table===l().mu?(e.getBookmarkedPagePointers().forEach(o),e.getSharedPagePointers().forEach(o),e.getSharedPagesManualSortPointers().forEach(o),o(e.getSpacePointer())):e.table===s().NX&&e.getPagePointers().forEach(o),t},recordIsRequired:e=>e.table===c().GD||e.table===l().mu});if(o.aborted)return;for(const s of a){const e=u.getModel(s);if(u.getRole(s)&&!e)return void 0}return{recordMap:u.toJson()}}({environment:t,abortSignal:n})));if(!r)return;if(n.aborted)return;const a=i().RecordMapWithRole.create(r.recordMap);b()._O({environment:t,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,recordMap:a,debugSource:"fetchLocalUserContent"}),h().A.setState({...h().A.state,localSpaceInaccessiblePages:A(a,o)}),h().A.state.readyPromise.resolve(),k(a)}({environment:e,userId:t,abortSignal:o.signal}),I(e).then((()=>{o.abort()}));let n=g().A.state.online;w=()=>{const t=g().A.state.online;!t||n||h().A.state.remoteSpaceInaccessiblePages||I(e),n=t},g().A.addListener(w)}async function S(){await h().A.state.readyPromise.promise}let w;function k(e){n().A.withListenerIgnored((()=>{for(const t of e.getModelsByTable(s().NX)){const e=t.getShortIdStr();e&&t.id&&v().D.setState({...v().D.state,[t.id]:e})}}))}async function I(e){const t=e.currentUser.id,o=f().default.checkGate({gateName:"multi_cell_aware_apis"});if(r().A.set({userId:e.currentUser.id,key:(0,u().H)("prefetchGetSpaces"),value:o}),o){m().yd("await_get_spaces_end");const o=_().callMultiCellApi({eventName:"getSpaces",environment:e,data:{},headers:{},prefetchCacheKey:"getSpaces"}),n={};for await(const e of o){if("success"!==e.type)throw new Error("Request failed");const t=e.data;for(const[e,o]of Object.entries(t.users))n[e]??=[],n[e].push(i().RecordMapWithRole.create(o))}m().yd("await_get_spaces_end");for(const[r,a]of Object.entries(n)){const o=i().RecordMapWithRole.merge(a);b()._O({environment:e,userId:r,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,recordMap:o,debugSource:"fetchAllUserSpaces"}),r===t&&(h().A.setState({...h().A.state,remoteSpaceInaccessiblePages:A(o,r)}),h().A.state.readyPromise.resolve()),k(o)}}else{m().yd("await_get_spaces_start");const o=await _().callApi({eventName:"getSpaces",environment:e,data:{},prefetchCacheKey:"getSpaces"});if(m().yd("await_get_spaces_end"),"success"!==o.type)throw o.error;for(const[n,r]of Object.entries(o.data)){const o=i().RecordMapWithRole.create(r);b()._O({environment:e,userId:n,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,recordMap:o,debugSource:"fetchAllUserSpaces"}),n===t&&(h().A.setState({...h().A.state,remoteSpaceInaccessiblePages:A(o,n)}),h().A.state.readyPromise.resolve()),k(o)}}}function A(e,t){const o={};for(const{pointer:n}of e.getByTable(s().NX)){const r=n.id,i=e.getValue({table:s().NX,id:r});if(i){const n=new Set;if(i.pages){for(const t of i.pages){e.getValue({table:a().ev,id:t})||n.add(t)}o[t]||(o[t]={}),o[t][r]=n}}}return o}},459882:(e,t,o)=>{o.d(t,{x:()=>n});const n=900},459887:(e,t,o)=>{o.d(t,{r:()=>r});var n=()=>o(994310);class r{static getNumber(e){const t=n().A.get(e);if("number"==typeof t&&!isNaN(t))return t}static getLatest(){return this.getNumber(this.LAST_TIMEOUT_STORAGE_KEY)}static trackPersistently(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();n().A.set(this.LAST_TIMEOUT_STORAGE_KEY,e);const t=this.getTotal()??0;n().A.set(this.TOTAL_TIMEOUTS_STORAGE_KEY,t+1)}static getTotal(){return this.getNumber(this.TOTAL_TIMEOUTS_STORAGE_KEY)}static clear(){n().A.remove(this.LAST_TIMEOUT_STORAGE_KEY),n().A.remove(this.TOTAL_TIMEOUTS_STORAGE_KEY)}static hasOccurredRecently(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();const t=this.getLatest();return"number"==typeof t&&e-t<this.RECENT_TIME_WINDOW_MS}}r.LAST_TIMEOUT_STORAGE_KEY="latestNotionTransactionTimeout",r.TOTAL_TIMEOUTS_STORAGE_KEY="totalNotionTransactionTimeouts",r.RECENT_TIME_WINDOW_MS=7*o(720665).nD,(0,o(604341).exposeDebugValue)("IndexedDBTimeoutTracker",r)},460282:(e,t,o)=>{o.d(t,{c:()=>S});o(296540);var n=()=>o(484714),r=()=>o(56366),i=()=>o(401497),a=()=>o(799954),s=()=>o(959013),l=()=>o(284371),c=()=>o(296511),d=()=>o(835066),u=()=>o(792540),p=()=>o(231722),m=()=>o(644914),g=()=>o(962730),f=()=>o(24157),v=()=>o(704152),h=()=>o(859428),_=()=>o(246722),b=o(474848);const y=(0,s().YK)({imageCaption:{defaultMessage:"Write a caption…",id:"block.imageCaption.placeholder"},altText:{defaultMessage:"Add alt text",id:"block.imageCaption.altText.tooltip"}});function S(e){let{captionAriaId:t,disabled:o,store:S}=e;const w=(0,n().v3)(),k=(0,n().Y0)(),I=(0,s().tz)(),A=(0,r().K8)((()=>S.getPropertyStore("caption")),[S]),{shouldShowCaption:x,shouldShowAltTextButton:C}=(0,r().K8)((()=>{var e;const t=A.getValue(),o=!t||0===t.length,n="editing"===f().default.state.mode&&(null===(e=(0,p().H7)(f().default.state.multiSelection))||void 0===e?void 0:e.store)===A;return{shouldShowCaption:!o||n,shouldShowAltTextButton:n&&o&&"image"===S.getType()&&!S.getPropertyValue("alt_text")}}),[A,S]),T=(0,r().K8)((()=>{const{block_full_width:e,block_width:t,block_page_width:o}=S.getFormat();if(k.isMobile)return!1;if(o)return!1;if(e)return!0;const n=(0,d().dC)(w,S);return(t||0)>=w.WindowSizeStore.state.width-(0,m().kf)(w)-(n&&S.isFullWidth()?d().Qb:0)}),[k.isMobile,w,S]),M=(0,i().IS)((e=>({root:{fontSize:14,lineHeight:1.4,color:e.mediumTextColor,paddingTop:6,paddingBottom:6,paddingLeft:a().nE.paddingLeft,...T&&{paddingLeft:26,paddingRight:26}},buttonWrapper:{position:"absolute",top:3.5,right:0,background:e.tint.regular,color:e.text.secondary,borderRadius:6,opacity:C?1:0,transition:k.isSafari?void 0:"opacity 300ms ease-in",overflow:"hidden"},button:{padding:"4px 6px",fontSize:12,fontWeight:l().Wy.medium,letterSpacing:.2}})),[T,k.isSafari,C]);return x?(0,b.jsxs)("div",{style:{position:"relative"},children:[(0,b.jsx)(_().A,{id:t,disabled:o,style:M.root,placeholderStyle:M.root,placeholder:I.formatMessage(y.imageCaption),disableSlashCommands:!0,disableEmbedMenu:!0,disableRightMarginHoverStyling:!0,store:A,pasteBehavior:"block",inPageFind:u().Os.block_match}),(0,b.jsx)("div",{style:M.buttonWrapper,children:(0,b.jsx)(h().A,{renderTooltip:()=>I.formatMessage(y.altText),placement:g().W.Bottom,disableTooltip:!C,render:e=>(0,b.jsx)(v().A,{...e,ariaLabel:I.formatMessage(y.altText),style:M.button,disabled:!C,onClick:()=>{c().h({blockStore:S,entrypoint:"caption",environment:w})},children:"ALT"})})})]}):null}},461515:(e,t,o)=>{o.d(t,{F:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("image",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M2,2v26h26V2H2z M26,26H4v-4h22V26z M26,20H4V4h22V20z M8,10c1.104,0,2-0.896,2-2S9.104,6,8,6S6,6.896,6,8S6.896,10,8,10z M18,7l-5,5l-2-1l-5,7h18L18,7z M11.635,13.553l1.76,0.881l4.129-4.129L20.631,16H9.887L11.635,13.553z"})})},463830:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=n},464291:(e,t,o)=>{o.d(t,{p:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zm14 2.625h-5.75v2.25h5.75zm0 3.5h-5.75v2.25H15.5a.875.875 0 0 0 .875-.875zm-7-3.5h-5.75v2.25h5.75zm0 3.5h-5.75v1.375c0 .483.392.875.875.875h4.875z"})},r=(0,o(340498).wt)("tableHeaderRow",n)},464510:(e,t,o)=>{o.d(t,{Kc:()=>Wt,Ug:()=>vt,je:()=>xt,bz:()=>no,PT:()=>ft,SS:()=>Zt,w7:()=>Xt,uh:()=>Rt,d0:()=>Nt,Mg:()=>io,Ii:()=>Pt,it:()=>Dt,X$:()=>St,Uh:()=>oo,Ko:()=>wt,Sk:()=>qt,L_:()=>Ut,mA:()=>Ft,vx:()=>$t,s$:()=>ro,Eg:()=>_t,nA:()=>Bt,DO:()=>mt,CQ:()=>bt,DM:()=>zt,IC:()=>yt,c1:()=>Tt,LI:()=>Mt,V4:()=>Ot,ic:()=>kt,Mq:()=>to,SP:()=>gt,t$:()=>At,Oh:()=>Ct,Wj:()=>Qt,Dg:()=>ut,Sf:()=>dt,ne:()=>Yt,KY:()=>Et,h8:()=>ht,bO:()=>Kt,xW:()=>It,M8:()=>Lt,D$:()=>Ht,Zv:()=>lo,$i:()=>so,V:()=>ao,v_:()=>ct,u1:()=>pt});o(16280),o(944114),o(898992),o(354520),o(672577),o(581454),o(964979),o(814603),o(147566),o(198721);var n=()=>o(584262),r=()=>o(172385),i=()=>o(90023),a=()=>o(857639),s=()=>o(243020),l=()=>o(590265),c=()=>o(386164),d=()=>o(868840),u=()=>o(388821),p=()=>o(861017),m=()=>o(427704),g=()=>o(179034),f=()=>o(197959),v=()=>o(161479),h=()=>o(84520),_=()=>o(798880),b=()=>o(294712),y=()=>o(677338),S=()=>o(994310),w=()=>o(20498),k=()=>o(319625),I=()=>o(498212),A=()=>o(183558),x=()=>o(534177),C=()=>o(939768),T=()=>o(671593),M=()=>o(638681),P=()=>o(662453),B=()=>o(421107),R=()=>o(780054),E=()=>o(867899),D=()=>o(235921),N=()=>o(572088),L=()=>o(529543),F=()=>o(597755),U=()=>o(211716),O=()=>o(310001),V=()=>o(972435),j=()=>o(108944),z=()=>o(836251),q=()=>o(437622),H=()=>o(465425),W=()=>o(719431),K=()=>o(905654),G=()=>o(133234),$=()=>o(222130);class Y extends(()=>o(757695))().default{getInitialState(){return{args:void 0}}}const Q=new Y;var Z=()=>o(852100),X=()=>o(645200),J=()=>o(694498),ee=()=>o(838824),te=()=>o(1130),oe=()=>o(144114),ne=()=>o(607859),re=()=>o(712287),ie=()=>o(154807),ae=()=>o(455994),se=()=>o(406792),le=()=>o(162674),ce=()=>o(696746),de=()=>o(578136),ue=()=>o(869562),pe=()=>o(749687),me=()=>o(737230),ge=()=>o(40226),fe=()=>o(155959),ve=()=>o(792415),he=()=>o(351360),_e=()=>o(945895),be=()=>o(559378),ye=()=>o(508496),Se=()=>o(53137),we=()=>o(102946),ke=()=>o(41161),Ie=()=>o(188669),Ae=()=>o(865688),xe=()=>o(990261),Ce=()=>o(547726),Te=()=>o(712505),Me=()=>o(650031),Pe=()=>o(630116),Be=()=>o(502438),Re=()=>o(404141),Ee=()=>o(151168),De=()=>o(559926),Ne=()=>o(452939),Le=()=>o(848259),Fe=()=>o(222917),Ue=()=>o(449506),Oe=()=>o(541258),Ve=()=>o(901389),je=()=>o(415559),ze=()=>o(705540),qe=()=>o(433052),He=()=>o(496414),We=()=>o(816074),Ke=()=>o(466721),Ge=()=>o(775191),$e=()=>o(661920),Ye=()=>o(730570),Qe=()=>o(507785),Ze=()=>o(666144),Xe=()=>o(260488),Je=()=>o(426116),et=()=>o(633457),tt=()=>o(857783),ot=()=>o(755636),nt=()=>o(5705),rt=()=>o(867201),it=()=>o(836285),at=()=>o(435009),st=()=>o(537941);const lt=(0,o(959013).YK)({errorSamlMessage:{defaultMessage:"Could not log you in.",id:"router.loginWithSamlError.message"},appleErrorMessage:{id:"loginActions.loggingInWithApple.errorMessage",defaultMessage:"Something went wrong while trying to log in with Apple."},microsoftErrorMessage:{id:"loginActions.loggingInWithMicrosoft.errorMessage",defaultMessage:"Something went wrong while trying to log in with Microsoft."},passkeyLoginErrorMessage:{id:"loginActions.passkeyLoginError.message",defaultMessage:"Something went wrong while trying to log in with your passkey."},passkeyRegistrationErrorMessage:{id:"loginActions.passkeyRegistrationError.message",defaultMessage:"Something went wrong while trying to register your passkey."},authenticating:{id:"externalIntegrationAuthActions.authenticationWithIntegration.loadingMessage",defaultMessage:"Authorizing with integration…"},joinedTeamMessage:{id:"joinedTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},backToContent:{id:"router.joinSpaceError.acceptLabel.backToContent",defaultMessage:"Back to my content"},goBack:{id:"router.joinSpaceError.acceptLabel.goBack",defaultMessage:"Go back"},thirdPartyDebugPrefix:{id:"router.debugMessage.thirdPartyError",defaultMessage:"Error from third party"},inviteLinkError:{id:"router.inviteError.message",defaultMessage:"Invite link is not valid. Please contact workspace admin."}});function ct(e,t){if(L().canSetCookie(e))try{const o=new URL(t),n=o.searchParams.get("ps_partner_key"),r=o.searchParams.get("ps_xid"),i="ernot"===o.searchParams.get("utm_content");if(r&&n&&!i){const t={partnerKey:window.atob(n),clickId:r};return L().setS2STrackingCookie(e,t),void Ne().rr({partner_stack_key:t.partnerKey})}const a=o.searchParams.get("gspk");if(a&&!i){const t=window.atob(a);return L().setPartnerStackCookie(e,t),void Ne().rr({partner_stack_key:t})}}catch(o){}}async function dt(e){at().oo({environment:e,url:m().JZ.root,redirect:!0}),await he().default.waitUntil((()=>void 0!==he().default.state.currentSpaceStore));const{currentSpaceStore:t}=he().default.state;if(q().IL(t)){const t=await L().getCookie(e,"notion_browser_id"),o=Boolean(t)?`?from=marketing&notionDeviceId=${t}`:"?from=marketing";ot().f({environment:e,url:`${R().A.calendar.domainBaseUrl}${o}`,targetSelf:!0})}else J().A.setState({signupCtaAttribution:"marketing"}),X().AJ(e)}async function ut(e){await he().default.waitUntil((()=>void 0!==he().default.state.currentSpaceStore)),H().UW(e,"mwn_feature_modal")}function pt(e,t){if(t)try{const{experimentGroups:o,inviteeEmail:n,inviterName:r}=JSON.parse(window.atob(t));Fe().YR(e,{invitee_email:n,invitation_experiment_groups:o}),$().A.setState({...$().A.state,inviteeEmail:n,inviterName:r}),n&&G().A.setState({...G().A.state,email:n})}catch(o){}}async function mt(e,t,o,n){if(!e.currentUser.id)return void at().oo({environment:e,url:m().JZ.root,redirect:!0});let r;if(t.spaceId)r=t.spaceId;else{const{spaceId:t}=await qe().wA(e);r=t}Oe().w({nextRoute:{...t,spaceId:r},currentRoute:o,environment:e,query:""}),"updates"===t.tab&&Le().gI({environment:e,from:"pop"===n?"mobile-back-navigation":"mobile-bottom-bar"})}async function gt(e,t,o){if(!e.currentUser.id)return;Oe().w({nextRoute:t,currentRoute:o,environment:e,query:""});const n=e.device.isElectron&&!(await ze().quickSearchVisibilityState.isVisible());Xe()._N({environment:e,analyticsFrom:"quick-search",isQuickSearch:!0,doNotTrackOpenSearchEvent:n})}async function ft(e,t,o){e.currentUser.id&&await Oe().w({nextRoute:t,currentRoute:o,environment:e,query:""})}function vt(e,t,o){Oe().w({nextRoute:t,currentRoute:o,environment:e,query:""})}async function ht(e,t,o){if(e.currentUser.id)return ye().default.waitUntilStatsigReady().then((()=>{(0,de().D)({isMobileNative:e.device.isMobileNative,disableExposureLogging:!0})?Oe().w({nextRoute:t,currentRoute:o,environment:e,query:""}):at().oo({environment:e,url:m().JZ.root,redirect:!0})}))}async function _t(e,t,o){if(e.currentUser.id)if(await ye().default.waitUntilStatsigReady(),t.templateGalleryItem)await It(e,t);else if("gallery"===t.name){const o=new URL(window.location.href);let n="";n=void 0===t.pageType?t.showBuyerProfileModal?`${m().JZ.marketplace}?bp=true`:m().JZ.marketplace:o.toString().replace("/gallery/","/marketplace/"),at().oo({environment:e,url:n,redirect:!0})}else if(t.pageType&&!(0,l().T6)(t.pageType))at().oo({environment:e,url:m().JZ.marketplace,redirect:!0});else if("search"!==t.pageType||t.query){await Oe().w({nextRoute:t,currentRoute:o,environment:e,query:""});const n=o&&("gallery"===o.name||"marketplace"===o.name),r=o&&n?o:void 0,i=void 0!==r?{url:(0,l().Zi)(R().A,r),marketplace_page_type:r.pageType??"home",product_slug:r.slug,is_previewing:"templates"===r.pageType&&r.preview}:void 0;let a={url:window.location.href,marketplace_page_type:t.pageType??"home",product_slug:t.slug,is_previewing:"templates"===t.pageType&&t.preview,from:i};const s=o&&n&&o.pageType&&!(0,l().T6)(o.pageType),c=o&&n&&"search"===o.pageType&&!o.query;(s||c)&&(a={...a,marketplace_page_type:"home",is_redirect:!0});const d=t.pageType&&(0,l().T6)(t.pageType)?(0,l().xv)({routePageType:t.pageType,slug:t.slug}):"home";ye().default.logEvent("marketplace_visit",d,{source:"in_app"}),Ne().yP(e,{query:"",page_id:"",is_peek:!1,peek_mode:void 0,type:"marketplace",page_visit_id:void 0,previous_page_visit_id:void 0,marketplace_state:a})}else at().oo({environment:e,url:m().JZ.marketplace,redirect:!0})}async function bt(e,t){if(!e.currentUser.id)return void at().oo({environment:e,url:m().JZ.root,redirect:!0});const{id:o,type:n,from:r}=t;let i,a;if(t.spaceId)i=t.spaceId;else{const{spaceId:t}=await qe().wA(e);i=t}if(i){const{currentUserSettingsStore:t}=he().default.state,o=new(Pe().dZ)(e,{table:b().GD,id:e.currentUser.id});if(await o.load(),void 0===he().default.state.currentSpaceStore||he().default.state.currentSpaceStore.id!==i)try{const n=ye().default.checkGate({gateName:"new_page_navigation_fix"}),r=await Je().DT({environment:e,userRootStore:o,spaceId:i,navigate:!n,analyticsFrom:"redirect",userSettingsStore:t,redirectSource:"handle_new_page"});n&&he().default.setState({...he().default.state,currentSpaceViewStore:r.spaceViewStore,currentSpaceStore:r.spaceViewStore.getSpaceStore()})}catch(s){return void Ve().rG({message:(0,k().A)(s).message,onAccept:()=>{at().aX(e)}})}}else at().oo({environment:e,url:m().JZ.root,redirect:!0}),await he().default.waitUntil((()=>void 0!==he().default.state.currentSpaceStore&&void 0!==he().default.state.currentSpaceViewStore&&void 0!==he().default.state.currentUserRootStore));if(n){if(!(0,T().tf)(M().literals(...Ie().Zj),n)){const e=n;switch(e){case"page":case"team":o&&(a={type:e,spaceId:i,id:o});break;case"space":o&&(a={type:e,id:o});break;case"space-private-pages":a={type:e,spaceId:i}}}}ue().quickAddPage({environment:e,from:r||"route",redirect:!0,quickAddParentOverride:a})}async function yt(e){if(e.currentUser.isLoggedIn()){if(await te().Wj(e)){await te().ZS(e);const{initializeOrRestoreContextualizedOnboardingState:t}=await E().F.contextualizedOnboardingStateActions.load();await t({environment:e,onLoadDependencies:()=>{},shouldRestoreOnboardingState:!0})}}else{const t=ne().default.state,o=D().A.state,n=S().A.get(oe().Zz);t.isOnboarding||"undefined"!==o.flowName||n?at().oo({environment:e,url:m().JZ.signup}):at().oo({environment:e,url:m().JZ.login})}}async function St(e,t){const{code:o,frontPathName:n,upsell:r}=t;if(!o)return void at().oo({environment:e,url:m().JZ.signup});r&&(0,Ee().ie)(r,e);"fail"===(await W().requestLoginWithGoogleOneTap({environment:e,store:G().A,idToken:o,frontPathName:n})).status&&at().oo({environment:e,url:jt()})}function wt(e){e.currentUser.isLoggedIn()||at().oo({environment:e,url:m().JZ.login}),at().oo({environment:e,url:m().JZ.creatorProfileIntegrations})}function kt(e,t,o){var n;if(e.device.isMobile)return;const r=Te().default.state;let a,s,l=!1,c=!1;if("page"===t.name&&t.peekViewBlockId){const{mainEditorCurrentBlockStore:e}=he().default.state;if(e){const o=Pe().Bv.createChildStore(e,{table:g().ev,id:t.peekViewBlockId});l=Boolean(t.showMoveTo),c=Boolean(t.saveParent),a=o;const n="page"===t.name&&t.peekMode?t.peekMode:void 0;s=(0,Te().getPeekModeFromUrlParam)(n)}}else if("team"===t.name&&t.peekViewBlockId){l=!1,c=!1,a=new(Pe().Bv)(e,{table:g().ev,id:t.peekViewBlockId});const o=t.peekMode?t.peekMode:void 0;s=(0,Te().getPeekModeFromUrlParam)(o)??d().O}else if("chat"===t.name&&t.peekViewBlockId){l=!1,c=!1,a=new(Pe().Bv)(e,{table:g().ev,id:t.peekViewBlockId});const o="chat"===t.name&&t.peekMode?t.peekMode:void 0;s=(0,Te().getPeekModeFromUrlParam)(o)??d().A}if(!(0,i().mi)(null===(n=a)||void 0===n?void 0:n.getSystemBlockTypeStore().getValue())){if(a&&(!r.open||a.id!==r.targetStore.id||s!==r.mode)){var u,p;r.open&&Ye().J(r.presenceStore,e,xe().o,r.targetStore);const t=xe().o.getCurrentPageVisitId();xe().o.initializeNewPageVisitId();const n=Be().default.cloneState(),i=B().A.cloneState(),m=_e().A.cloneState(),g=e.currentUser.id;nt().If(e,r.mode),nt().b$(e),nt().aD(e);const f=a.getAssociatedCollectionStore(),v=null==f?void 0:f.getLayoutStore(),h=!(null==v||!v.firstModuleOfType("viewsMain")),{publicPageData:_}=ve().A.state;Ne().yP(e,{page_id:a.id,collection_id:(null==f?void 0:f.id)??(null===(u=a.getCollectionStore())||void 0===u?void 0:u.id),layout_id:null==v?void 0:v.id,layout_has_tabbed_structure:h,team_id:null===(p=(0,j().Uo)(a))||void 0===p?void 0:p.id,form_id:a.isFormBlock()?a.id:void 0,is_peek:!0,peek_mode:s,type:Ne().ND(a),query:o,page_visit_id:xe().o.getCurrentPageVisitId(),previous_page_visit_id:t,user_has_explicit_access:null==_?void 0:_.userHasExplicitAccess,is_dls_viewer:null==_?void 0:_.isDLSViewer,trusted_domains:null==_?void 0:_.domainLinkSharingEnabledDomains});const b=new(Pe().Bv)(e,a.pointer),S=new(Ce().A),w=new(Me().A),k=new(Ae().A);$e().ho(e,{mode:s??d().O,targetStore:b,pageVisitStore:S,presenceStore:w,showMoveTo:l,saveParent:c,loadingContainerStore:k,savedSelectionStoreState:n,savedTableSelectionStoreState:i,savedCollectionViewSelectionStoreState:m,savedSidebarExpandedStoreState:pe().sidebarExpandedStore.state}),Ye().I({userId:g,authorizationToken:null==_?void 0:_.presenceAuthorizationToken,rootStore:b,presenceStore:w,environment:e,pageVisitIdStore:xe().o}),Ke().FZ(e,{blockStore:b,pageVisitStore:S,timestamp:Date.now(),fromPageRefresh:(0,y().oJ)()}),ke().A.recordVisit({id:a.id,systemBlockType:a.getSystemBlockTypeStore().getValue(),type:U().ig.Default,currentUserId:g})}r.open&&!a&&($e().YH(),Ye().J(r.presenceStore,e,xe().o,r.targetStore),nt().If(e,r.mode))}}async function It(e,t){if(!e.device.isMobile&&("page"===t.name||"marketplace"===t.name)&&t.templateGalleryItem){const o=(0,I().G2)(t.templateGalleryItem);let n=m().JZ.marketplace;const r=await Ue().callApi({eventName:"inAppGetTemplateByBlockId",environment:e,data:{blockId:o},userId:e.currentUser.id});if("success"===r.type&&r.data.success&&r.data.template){const e={name:"marketplace"};n=(0,Z().sO)(r.data.template.slug,e)}at().oo({environment:e,url:n,redirect:!0})}}async function At(e,t,o){const i=t.currentUser.isLoggedIn(),{RouterStore:s,device:l}=t,c=l.isMobileNative,d=s.state.route,u=(e,t)=>{c&&"root"!==s.state.route.name?a().log({level:"warning",from:"routerActions",type:"handleRootRedirect",data:{message:`Prevented ${e} as route has since changed to "${s.state.route.name}"]. Initial route at the start of handleRootRedirect was "${d.name}"}`}}):(c&&a().log({level:"info",from:"routerActions",type:"handleRootRedirect",data:{message:`Redirecting for ${e} as route is still root. Initial route at the start of handleRootRedirect was "${d.name}"}`}}),t())};if(i){c&&a().log({level:"info",from:"routerActions",type:"handleRootRedirect",data:{message:"Called handleRootRedirect"}});const e=await(0,q().ex)({environment:t,disableRedirectUrl:!1,blockNoAccessRedirect:!0}),{firstSpaceView:r,lastVisitedSpaceView:s,publicAccessPageId:l,oauthAuthorizationParams:d,userRootStore:p,redirectUrl:m,userSettingsStore:f,userStore:v,isPersonalHomeRedirect:_,lastVisitedUrl:b}=e;_&&(0,le().ZL)({environment:t,from:"on_app_start_page"}),await ye().default.waitUntil((()=>ye().default.state.isLoaded));await te().Wj(t,v)&&await te().ZS(t);const y=ne().default.state,w=t.currentUser.id,k=S().A.get(oe().Zz);if(k&&i)return void(await Kt(t,k));if(d&&r&&(e.onboardingCompleted||oe().Qf(y))){const{responseType:e,redirectUri:o,integrationId:n,state:r,owner:i,userId:a,spaceId:s}=d;return void We().t({environment:t,responseType:e,redirectUri:o,integrationId:n,state:r,owner:i,userId:a,spaceId:s})}const I=it().s(void 0);it().I({currentUserId:void 0,params:void 0});const A=(null==o?void 0:o.templateGalleryItem)||(null==I?void 0:I.tg),x=(null==o?void 0:o.projectManagementLaunch)||Boolean(null==I?void 0:I.pjm),T=(null==o?void 0:o.mwnFeatureModalRedirect)||Boolean(null==I?void 0:I.mwn2024);if(y.isOnboarding)if(oe().Qf(y)){if(y.spaceViewId){const e=new(Pe().vH)(t,{table:h().mu,id:y.spaceViewId});"workspace_setup"!==y.stage&&await Je().tR({environment:t,spaceViewStore:e,userSettingsStore:f,userRootStore:p,templateGalleryItem:null==o?void 0:o.templateGalleryItem,projectManagementLaunch:null==o?void 0:o.projectManagementLaunch,pageVisitSource:n().y8.Onboarding,navigationType:"joiningOrCreatingSpace",forceLandLastVisitedPage:null==o?void 0:o.forceLandLastVisitedPage,redirect:!0})}}else at().kc(t);else if(d&&e.onboardingCompleted){const{responseType:e,integrationId:o,redirectUri:n,state:r,owner:i,userId:a,spaceId:s}=d;We().t({environment:t,responseType:e,integrationId:o,redirectUri:n,state:r,owner:i,userId:a,spaceId:s})}else if(l&&e.onboardingCompleted){Qe().iZ({currentUserId:w,blockId:void 0});const e=Pe().Bv.createChildStore(p,{table:g().ev,id:l});await e.load(),tt().uK({environment:t,store:e,pageVisitSource:n().y8.Direct})}else if(r&&e.onboardingCompleted){const r=m;if(t.device.isMobile&&!e.mobileOnboardingCompleted)await te().sy(t,{type:"mobile-onboarding",redirectUrl:m,source:"handle_root_redirect"});else if(null!=o&&o.forceLandLastVisitedPage&&b)u("redirectUrl",(()=>{at().oo({environment:t,url:b,redirect:!0})}));else if(r){const e=new URLSearchParams(window.location.search).get("prompt");let o=r;(x||A||T)&&(o=C().O$(o,{tg:A,pjm:x,mwn2024:T})),e&&(o=C().O$(o,{prompt:e})),u("redirectUrl",(()=>{at().oo({environment:t,url:o,redirect:!0})}))}else s?u("lastVisitedSpaceView",(()=>{Je().tR({environment:t,spaceViewStore:s,userRootStore:p,userSettingsStore:f,templateGalleryItem:A,projectManagementLaunch:x,pageVisitSource:n().y8.Login,navigationType:"switchingToOrLoadingSpace",forceLandLastVisitedPage:null==o?void 0:o.forceLandLastVisitedPage,redirect:!0})})):(t.device.isMobileNative&&a().log({level:"info",from:"routerActions",type:"SpaceSwitchingDebug",data:{message:"navigateToFirstSpace because handleRootRedirect"}}),u("spaceActions.navigateToFirstSpace",(()=>{Je().t9({environment:t,userRootStore:p,userSettingsStore:f,templateGalleryItem:A,projectManagementLaunch:x,pageVisitSource:n().y8.Login,forceLandLastVisitedPage:null==o?void 0:o.forceLandLastVisitedPage,redirect:!0})})))}else{const{publicPageData:e}=ve().A.state;if(null!=e&&e.isDLSViewer&&e.pageId){const o=Pe().Bv.createChildStore(p,{table:g().ev,id:e.pageId});return await o.load(),void rt().Y({environment:t,store:o,pageVisitSource:n().y8.Login})}await te().sy(t,{type:"new-user",redirectUrl:m,source:"handle_root_redirect"})}}else if(null!=o&&o.assistantQueryPrefill||null!=o&&o.assistantTargetRedirect){const e=(0,r().YQ)({currentUrl:window.location.href,assistantQueryPrefill:null==o?void 0:o.assistantQueryPrefill,assistantTargetRedirect:null==o?void 0:o.assistantTargetRedirect}),n=(0,C().Gm)({url:`${R().A.domainBaseUrl}${m().JZ.login}`,query:{redirectURL:e}});at().oo({environment:t,url:n,redirect:!0})}else if(null!=o&&o.forceLandLastVisitedPage){const e=(0,ge().S)({domainBaseLoginUrl:`${R().A.domainBaseUrl}${m().JZ.login}`,currentUrl:window.location.href,forceLandLastVisitedPage:null==o?void 0:o.forceLandLastVisitedPage});at().oo({environment:t,url:e,redirect:!0})}else at().oo({environment:t,url:m().JZ.login,redirect:!0})}async function xt(e,t){const{callbackType:o,encryptedToken:n,encryptedNonce:r,code:i,error:a,encryptedUserObject:s,webBrowserDeviceId:l}=e;if("native"===o&&!t.device.isNative)return void at().eG({url:window.location.href,environment:t});if("user_cancelled_authorize"===a)return G().A.setState({...G().A.state,loginType:"email"}),void at().oo({environment:t,url:Vt()});if(a||!i||!n||!r){const e=V().A.formatMessage(lt.appleErrorMessage);return G().A.setState({...G().A.state,alert:e}),void at().oo({environment:t,url:Vt()})}const c=await W().loginWithAppleAuth({environment:t,encryptedToken:n,encryptedNonce:r,code:i,encryptedUserObject:s,webBrowserDeviceId:l});c&&(G().A.setState({...G().A.state,alert:c}),at().oo({url:Vt(),environment:t}))}async function Ct(e,t){let o;if(e.userId)await W().loginSamlUser({environment:t,userId:e.userId,isNewSignup:e.isNewSignup||!1,previousUserId:e.previousUserId});else if(e.token&&e.csrfState)o=await W().loginSamlUserWithToken({environment:t,csrfState:e.csrfState,token:e.token,isNewSignup:e.isNewSignup||!1,email:G().A.state.email});else{const n=t.device.isElectronMail?void 0:V().A.formatMessage(lt.errorSamlMessage);o=e.error||n}o&&(G().A.setState({...G().A.state,alert:o}),at().oo({environment:t,url:Vt()}))}async function Tt(e,t){let o;if(e.attestation&&e.attemptId)await W().loginUserWithPasskeyVerifyChallenge({environment:t,attestation:JSON.parse(e.attestation),attemptId:e.attemptId});else{const n=t.device.isElectronMail?void 0:V().A.formatMessage(lt.passkeyLoginErrorMessage);o=e.error||n}o&&(G().A.setState({...G().A.state,alert:o}),at().oo({environment:t,url:Vt()}))}async function Mt(e,t){let o;if(e.response&&e.attemptId&&e.csrfToken){const o=await Ge().d6({environment:t,attemptId:e.attemptId,attestation:JSON.parse(e.response),shouldValidateCsrfToken:!0,csrfToken:e.csrfToken});null==o||o.created,at().oo({environment:t,url:"?target=profile"})}else{const n=t.device.isElectronMail?void 0:V().A.formatMessage(lt.passkeyRegistrationErrorMessage);o=e.error||n}o&&(G().A.setState({...G().A.state,alert:o}),at().oo({environment:t,url:m().JZ.login}))}async function Pt(e,t){const{callbackType:o,encryptedToken:n,code:r,error:i,webBrowserDeviceId:a}=e;if("native"===o&&!t.device.isNative)return void at().eG({url:window.location.href,environment:t});if("access_denied"===i&&G().A.setState({...G().A.state,loginType:"email"}),i||!r||!n)return G().A.setState({...G().A.state,alert:i}),void at().oo({environment:t,url:Vt()});const s=await W().loginWithGoogleAuth({environment:t,encryptedToken:n,code:r,callbackType:"native"===o||"nativeredirect"===o||"nativemailredirect"===o||"nativecalendarredirect"===o?o:void 0,webBrowserDeviceId:a,source:y().dY()});s&&(G().A.setState({...G().A.state,alert:s}),at().oo({url:Vt(),environment:t}))}async function Bt(e,t){const{callbackType:o,encryptedToken:n,encryptedNonce:r,state:i,code:a,error:s,webBrowserDeviceId:l}=e;if("native"===o&&!t.device.isNative)return void at().eG({url:window.location.href,environment:t});if("access_denied"===s&&G().A.setState({...G().A.state,loginType:"email"}),s||!a||!n||!r||!i){const e=V().A.formatMessage(lt.microsoftErrorMessage);return G().A.setState({...G().A.state,alert:e}),void at().oo({environment:t,url:Vt()})}G().A.setState({...G().A.state,loginType:"microsoft_login",thirdPartyToken:n});const c=await W().loginWithMicrosoftAuth({environment:t,encryptedToken:n,encryptedNonce:r,code:a,state:i,callbackType:"native"===o||"nativeredirect"===o||"nativemailredirect"===o||"nativecalendarredirect"===o?o:void 0,webBrowserDeviceId:l,source:y().dY()});c&&(G().A.setState({...G().A.state,loginType:"email",alert:c}),at().oo({url:Vt(),environment:t}))}function Rt(e,t){et().oX({environment:t}),at().oo({environment:t,url:m().JZ.login})}async function Et(e){const{route:t,environment:o}=e;"legacy"===t.type?await async function(e){const{route:{code:t,state:o},environment:n}=e;let r;if(t&&o){const e=await Ue().callApi({eventName:"authWithSlack",environment:n,data:{code:t,encryptedState:o}});"failed"===e.type&&(r=e.error.message)}else r="Something went wrong.";r&&Ve().c1(r);const{url:i}=qe().v4(n);at().oo({url:i||m().JZ.root,environment:n})}({environment:o,route:t}):"new"===t.type?await async function(e){const{route:{error:t},environment:o}=e;if(t){const e=V().A.formatMessage((0,N().yJ)(t),{value:t});Ve().f1(e)}else await et().oX({environment:o});const{url:n}=qe().v4(o);at().oo({url:n||m().JZ.root,environment:o})}({environment:o,route:t}):(0,x().HB)(t)}function Dt(e,t){const{code:o,error:n}=e;!n&&o&&je().oA(t,o);const{url:r}=qe().v4(t);at().oo({url:r||m().JZ.root,environment:t})}async function Nt(e){const{route:t,environment:o,preventRedirectToLastVisitedPage:n}=e;let r=t.error?t.errorDescription||V().A.formatMessage((0,N().yJ)(t.error),{value:t.error}):void 0;try{if(!t.notionState)throw new Error("No notionState.");const e=JSON.parse(decodeURIComponent(t.notionState));await et().oX({environment:o}),await et().A1({environment:o,notionState:e})}catch(i){r||(r="An unknown error occurred.")}r&&Ve().c1(r),n||at().Vl(o)}async function Lt(e){const{route:t,environment:o,integrationId:n,from:r,options:i}=e;let a=t.error?t.errorDescription||V().A.formatMessage((0,N().yJ)(t.error),{value:t.error}):void 0;try{if(!t.state)throw new Error("No state provided.");if(!t.code)throw new Error("No code provided.");He().m({message:lt.authenticating});const e=await Ue().callApi({eventName:"authWithExternalIntegration",environment:o,data:{code:t.code,state:t.state,...t.name===p().I2.datadogAuthCallback?{accountName:t.organizationName,accountId:t.organizationId,accountDomain:t.site,domain:t.domain}:void 0}});if(He().V(),"failed"===e.type){var s;const t="access_token_retrieval_failed"===(null===(s=e.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type)?V().A.formatMessage(lt.thirdPartyDebugPrefix):void 0;Ve().Qg(e,t)}else{const{externalObjectInstanceBlockId:t,spaceId:r}=e.data;if(await et().oX({environment:o}),await et().A1({environment:o,notionState:{externalObjectInstanceBlockId:t,spaceId:r}}),n&&(0,w().NV)(n)){const e=Se().A.bots.state.filter((e=>e.integration_id===n))[0];De().dm(o,{integration_id:n,configuration_type:"oauth",bot_id:null==e?void 0:e.id})}}}catch(l){a||(a=(0,k().A)(l).message)}a&&Ve().c1(a),await async function(e){const{environment:t,integrationId:o,from:n}=e;if((0,O()._I)(o)&&!(0,w().IM)(o)){const{spaceId:e}=await qe().wA(t);We().t({environment:t,responseType:"code",spaceId:e,integrationId:o,redirectUri:void 0,state:void 0,owner:void 0,userId:void 0})}else"workspace_connections_redirect"!==n&&at().Vl(t)}({environment:o,integrationId:n,shouldOpenSettings:null==i?void 0:i.shouldOpenSettings,from:r})}async function Ft(e,t){const{state:o,password:n,isSignup:r,redirectURL:i,webBrowserDeviceId:a,isMicrosoft:s}=e;se().default.mark("login_time.passcode");const l=await W().loginWithTemporaryPasscode({environment:t,state:o,password:n,redirectURL:i,webBrowserDeviceId:a,passcodeEnterMethod:"magic_link",email:G().A.state.email});s&&G().A.setState({...G().A.state,loginType:"microsoft_login",thirdPartyToken:""}),"fail"===l.status&&(G().A.setState({...G().A.state,alert:l.errorMessage}),r?at().oo({url:jt(),environment:t}):at().oo({url:Vt(),environment:t}))}async function Ut(e,t){const{args:o}=Q.getState(),{webBrowserDeviceId:n}=e;o?await W().handleLoginWithTemporaryPasscodeSuccess({environment:t,...o,webBrowserDeviceId:n}):(a().log({level:"error",from:"routerActions",type:"handleLoginSuccessRedirect",data:{message:"empty args for handleLoginSuccessRedirect"}}),at().oo({url:m().JZ.root,environment:t}))}async function Ot(e,t){const{state:o,password:n}=e,r=await W().loginPasswordReset({environment:t,csrfState:o,password:n,loginStore:G().A});r&&(G().A.setState({...G().A.state,loginType:"email",alert:r}),at().oo({url:Vt(),environment:t}))}function Vt(){switch(y().dY()){case"mail":return m().JZ.loginMail;case"calendar":return m().JZ.loginCalendar;default:return m().JZ.login}}function jt(){switch(y().dY()){case"mail":return m().JZ.signupMail;case"calendar":return m().JZ.signupCalendar;default:return m().JZ.signup}}async function zt(e,t){y().NI(e);const{userId:o,spaceId:n}=e;if(n){const e=o?[o]:t.currentUser.loggedInUserIds;for(const o of e){const e=new(Pe().dZ)(t,{table:b().GD,id:o},{userId:o});await e.load();const r=e.getSpaceViewStores();if(r.length>0){await Promise.all(r.map((e=>e.load())));const e=r.find((e=>e.getSpaceId()===n));if(e)return void(await Je().yV({environment:t,spaceViewStore:e}))}}}const{currentUserRootStore:r}=he().default.state;if(r){await r.load();const e=r.getSpaceViewStores().find((e=>{var t;return Boolean(null===(t=e.getSpaceStore())||void 0===t?void 0:t.canRead())}));if(e)return void(await Je().yV({environment:t,spaceViewStore:e}))}at().oo({environment:t,url:m().JZ.login,redirect:!0})}function qt(e){let{environment:t,routeName:o,option:n,redirectUrl:r}=e;const i="microsoft_login"===G().A.state.loginType;if((0,z().w6)(t)){const e=C().t4({publicDomainName:R().A.publicDomainName},window.location.host);Oe().AG({spaceDomain:e,environment:t})}else if(i||!t.currentUser.isLoggedIn()||null!=n&&n.doNotRedirectWhenLoggedIn){const e=new URLSearchParams(window.location.search).get("prompt");Ne().Pg(t,{routerName:o,fromCta:e?"ai_magic_box":void 0})}else at().oo({environment:t,url:r??m().JZ.root,redirect:!0})}async function Ht(e,t){const o=e.currentUser.id;if(!o)return void Jt(e);const r=new(Pe().dZ)(e,{table:b().GD,id:o},{userId:o});await r.load();const i=await async function(e,t,o){if(o.spaceDomain){const t=await Ue().callApi({eventName:"getIdFromUniqueId",environment:e,data:{spaceDomain:o.spaceDomain,uniqueId:o.uniqueId}});return"success"===t.type&&t.data.id?t.data.id:void 0}for(const n of t.getSpaceViewStores()){const t=n.getSpaceId();if(!t)continue;const r=await Ue().callApi({eventName:"getIdFromUniqueId",environment:e,data:{spaceId:t,uniqueId:o.uniqueId}});if("failed"!==r.type&&r.data.id)return r.data.id}}(e,r,t);if(!i)return void Jt(e);const a=Pe().Bv.createChildStore(r,{table:g().ev,id:i});await a.load(),rt().Y({environment:e,store:a,pageVisitSource:n().y8.Direct})}async function Wt(e){const{environment:t,route:o}=e;at().oo({environment:t,url:m().JZ.root,redirect:!0});const[{favoriteImportActions:n}]=await Promise.all([P().aiDependency.load(),async()=>{await he().default.waitUntil((()=>void 0!==he().default.state.currentUserSettingsStore&&void 0!==he().default.state.currentSpaceStore&&void 0!==he().default.state.currentSpaceViewStore&&void 0!==he().default.state.currentUserRootStore)),await he().default.waitUntilRendered()}]);await n.importGtmFavorite({environment:t,importArgs:o})}async function Kt(e,t){const o=await Ue().callApi({eventName:"getPublicPageDataForInviteLink",environment:e,data:{inviteLinkCode:t}});if("success"!==o.type)throw o.error;const r=o.data;ve().A.setState({publicPageData:r});const i=()=>{S().A.set(oe().Zz,t),at().kc(e)};if(e.currentUser.isLoggedIn()&&r.spaceId){const{id:o}=e.currentUser;if(o){const s=new(Pe().LU)(e,{table:_().oo,id:o});await s.load();if(!s.getFullName(V().A.getIntl())){i();const t=await(0,q().ex)({environment:e,disableRedirectUrl:!1});return void(await te().sy(e,{type:"new-user",redirectUrl:t.redirectUrl,source:"team_invite"}))}const l=new(Pe().dZ)(e,{table:b().GD,id:o});await l.load();const{currentUserSettingsStore:c}=he().default.state;try{const o=await Je().DT({environment:e,userRootStore:l,userSettingsStore:c,spaceId:r.spaceId,navigate:!1,analyticsFrom:"redirect",inviteCode:t,redirectSource:"handle_team_invite"});await Je().tR({environment:e,spaceViewStore:o.spaceViewStore,userSettingsStore:c,userRootStore:l,pageVisitSource:n().y8.SwitchSpace,navigationType:"joiningOrCreatingSpace",redirect:!0})}catch(a){Gt(e,(0,k().A)(a).message)}}}else e.currentUser.isLoggedIn()&&!r.spaceId?Gt(e,V().A.formatMessage(lt.inviteLinkError)):i()}function Gt(e,t){const{currentUserRootStore:o,currentUserSettingsStore:r}=he().default.state,i=o&&r;Ve().rG({message:t,acceptLabel:i?V().A.formatMessage(lt.backToContent):V().A.formatMessage(lt.goBack),onAccept:()=>{S().A.remove(oe().Zz),i?Je().t9({environment:e,userRootStore:o,userSettingsStore:r,pageVisitSource:n().y8.Onboarding}):at().aX(e)}})}async function $t(e){await W().actuallyLogoutAndDeleteMostLocalData({environment:e,logoutOrigin:s().d.LogoutRouteVisited})}async function Yt(e){const{environment:t,nextRoute:o,currentRoute:n}=e;"page"===(null==n?void 0:n.name)&&n.blockId||"page"!==o.name||ae().A.setDisplayStyle({panelLocation:"mainPage",displayStyle:t.device.isMobile?"popup":"sidebar"});const r=n&&p().WZ(n)&&n.peekViewBlockId;if(ae().A.getPanelState("peek").isOpen&&r){const e="page"===o.name&&n.peekViewBlockId===o.blockId,r=p().WZ(o)&&n.peekViewBlockId===o.peekViewBlockId&&n.peekMode!==o.peekMode,i=p().WZ(o)&&o.peekViewBlockId&&"page"===o.name&&o.name===n.name&&o.blockId===n.blockId&&n.peekViewBlockId!==o.peekViewBlockId;(e||r||i)&&(0,re().j)({environment:t,layoutStore:void 0,from:"topbar",panelLocation:o.peekMode?"peek":"mainPage",preventPeekWidthResize:r})}const i=p().WZ(o),a="page"===(null==n?void 0:n.name)&&"page"===o.name&&n.blockId!==o.blockId;!r||i&&o.peekViewBlockId&&n.name===o.name&&!a||ae().A.resetPanelState("peek");const s=p().WZ(o)&&o.peekViewBlockId;!r&&s&&ae().A.setDisplayStyle({panelLocation:"peek",displayStyle:t.WindowSizeStore.state.width<(0,ie().QQ)()?"popup":"static_sidebar"});const l=Te().default.peekTargetStore.state,{mainEditorCurrentBlockStore:c}=he().default.state;if(!c&&!l)return;const d="page"===o.name?o.blockId:void 0,u=d&&c?Pe().Bv.createChildStore(c,{table:g().ev,id:d}):void 0;if("page"===o.name&&o.discussionId&&u){const e=(0,Pe().Oo)(u,{table:f().$Y,id:o.discussionId,spaceId:(0,v().e)(u.pointer.spaceId)});await e.load();if(e.getKeyStore("resolved").getValue())return ue().setUpdateSidebarTab(me().tF.Comments),ue().setUpdateExpand({environment:t,isExpanded:!0,from:"resolved_comment",saveDetailsSidebarPreference:!0}),void ue().setUpdateSidebarCommentsMode("resolved")}}async function Qt(e,t){"configureOpenInDesktopApp"in t&&t.configureOpenInDesktopApp&&(await ye().default.waitUntilStatsigReady(),e.device.isDesktop&&(e.device.isMac||e.device.isWindows)&&Re().A.setState({open:!0,openedFrom:"misc",currentTab:"user_settings",defaultSubtab:void 0,highlightedSetting:Re().r.OpenInDesktopApp}))}function Zt(e){let t;var o;e&&(t=null===(o=ye().default.getConfigKey("demo_tooltip_tour_config","tour"))||void 0===o?void 0:o[e]);be().A.setState({tooltipTourOutline:t,isActive:!0,step:t?0:void 0,slug:e})}function Xt(e){let t;try{t=C().he((0,F().P)(window.location.href))}catch{}t&&at().oo({environment:e,url:t})}function Jt(e){const t={name:"notFound"};e.RouterStore.setState({id:(0,A().Ay)(),route:t,action:"push",initialRoute:e.RouterStore.state.initialRoute||t})}function eo(e){at().oo({environment:e,url:m().JZ.root,redirect:!0})}async function to(e,t,o){if(e.device.isMobileNative&&(0,fe().T)("supportsPostsTab")){if(!e.currentUser.id)return;await Oe().w({nextRoute:t,currentRoute:o,environment:e,query:""})}else eo(e)}async function oo(e,t){var o;null!==(o=e.mobileNative)&&void 0!==o&&o.supportsNativeHomeOnPhone()&&ye().default.checkGate({gateName:"allow_mobile_home_redirect"})?st().navigateToHomeTab(e):e.device.isMobileNative?eo(e):await async function(e){const{environment:t,peekViewBlockId:o,peekMode:r,redirect:i}=e,a=(0,C().qn)(window.location.href,"pvs");let s=t.currentUser.id;if(!s&&(at().oo({environment:t,url:m().JZ.login,redirect:!0}),await he().default.waitUntil((()=>void 0!==he().default.state.currentUserStore&&void 0!==he().default.state.currentUserRootStore&&void 0!==he().default.state.currentSpaceStore)),s=t.currentUser.id,!s))return;const l=await Ue().callApi({eventName:"getHomeEnabledSpaceViews",environment:t,data:{}});if("failed"===l.type)return void eo(t);const{usersToSpaceViews:d}=l.data,p=[],g=new(Pe().dZ)(t,{table:b().GD,id:s});for(const n of Object.values(d)){const e=u().RecordMapWithRole.create(n.recordMap);Ze()._O({environment:t,userId:s,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,recordMap:e,debugSource:"navigateToPersonalHome"}),p.push(...n.homeEnabledSpaceViewIds.map((e=>Pe().vH.createChildStore(g,{table:h().mu,id:e}))))}const{spaceId:f}=await qe().wA(t),v=function(e){let{currentUserId:t,lastVisitedSpaceId:o,homeEnabledSpaceViewStores:n}=e;const r=o&&n.find((e=>e.getSpaceId()===o&&e.getParentId()===t));if(r)return r;const i=n.find((e=>e.getParentId()===t));if(i)return i;return n[0]}({currentUserId:s,lastVisitedSpaceId:f,homeEnabledSpaceViewStores:p}),_=ce().x$(v);if(!_||!v)return void eo(t);if(await _.load(),!_.isDefined()){const e=await Ue().callApi({eventName:"getUserHomePages",environment:t,data:{spaceViewId:v.id,spaceId:v.getSpaceId()},userId:v.getUserId(),headers:(0,c().WS)({cellId:void 0,recordId:v.id,spaceId:v.getSpaceId()})});if("failed"===e.type||void 0===e.data.recordMap.block)return Ne().xn(t,{type:"invalid_home_block_from_redirect",flow_id:"home_redirect"}),void eo(t)}const y=a?Number(a):n().y8.PersonalHomeLink;(0,le().ZL)({environment:t,from:y===n().y8.PersonalHomeEmailLink?"email_link":"link"}),tt().uK({environment:t,store:_,redirect:i,peekViewBlockId:o,peekMode:r,pageVisitSource:y})}({environment:e,peekViewBlockId:t.peekViewBlockId,peekMode:t.peekMode})}async function no(e,t){t?(await(0,W().clearMostUserStorageAndState)(e),(0,K().kD)()):e.currentUser.isLoggedIn()?await X().J7({environment:e,url:`${R().A.domainBaseUrl}/calendarAuth/`,from:"handleCalendarRedirect",targetSelf:!0}):(0,K().kD)()}async function ro(e,t){t?(await(0,W().clearMostUserStorageAndState)(e),(0,K().kD)()):e.currentUser.isLoggedIn()?await(0,ee().Z)({environment:e,from:"handleMailRedirect",targetSelf:!0}):(0,K().kD)()}function io(e,t){if(!t.formResponseId||!t.secretKey||!t.formSpaceId)return void at().oo({environment:e,url:m().JZ.root,redirect:!0});e.currentUser.id?function(e,t,o,n){ao(t,o,n),at().oo({environment:e,url:m().JZ.root})}(e,t.formResponseId,t.secretKey,t.formSpaceId):(y().hl(t.formResponseId,t.secretKey,t.formSpaceId,t.formSpaceIntent),at().oo({environment:e,url:m().JZ.login,redirect:!0}))}function ao(e,t,o){we().A.setState({open:!0,formResponseId:e,secretKey:t,formSpaceId:o}),y().ip()}function so(e){const{environment:t,redirectRoute:o,options:n}=e;if(t.currentUser.isLoggedIn())return{redirected:!1};return co({environment:t,redirectURL:C().Gm(o),options:n})}function lo(e){const{environment:t,page:o,options:n}=e;if(t.currentUser.isLoggedIn()||!o.blockId)return{redirected:!1};return co({environment:t,redirectURL:C().Gm({url:`/${(0,I().Xw)(o.blockId)}`,query:{...o.shouldDuplicate?{duplicate:"true"}:{},...o.workspaceId?{workspaceId:o.workspaceId}:{}}}),options:n})}function co(e){const{environment:t,redirectURL:o,options:n}=e;if(t.currentUser.isLoggedIn())return{redirected:!1};const r=C().Gm({url:`${R().A.domainBaseUrl}${m().JZ.login}`,query:{redirectURL:o}});return(0,z().J0)(r)?(at().oo({environment:t,url:r,redirect:!0,openInNew:null==n?void 0:n.openInNew}),{redirected:!0}):{redirected:!1}}},465425:(e,t,o)=>{o.d(t,{Wf:()=>T,OX:()=>x,a:()=>A,Ez:()=>I,UW:()=>k,TD:()=>F,HH:()=>D,wK:()=>N,X3:()=>R,bc:()=>C,rG:()=>S,r5:()=>L,$j:()=>w,Y1:()=>B,mg:()=>P});o(898992),o(354520),o(581454);var n=()=>o(244641),r=()=>o(722559),i=()=>o(690495),a=()=>o(917629),s=()=>o(449506),l=()=>o(72234),c=()=>o(317909),d=()=>o(755199),u=()=>o(351360);o(944114);class p{constructor(e){if(this.exposures=void 0,this.exposures=new Map,e)for(const t of e){const e=(0,r().$s)(t.placement);if(e&&t.timestamps){const o=this.exposures.get(e);o?o.push(...t.timestamps):this.exposures.set(e,[...t.timestamps])}}}get(e){return this.exposures.get(e)??[]}add(e,t){let o=this.get(e);o.push(t),o.sort(((e,t)=>e-t)),o.length>10&&(o=o.slice(o.length-10)),this.exposures.set(e,o)}exportUserSetting(){return Array.from(this.exposures.entries()).map((e=>{let[t,o]=e;return{placement:t,timestamps:o}}))}}var m=()=>o(720665);class g{constructor(e){this.name=void 0,this.name=e}}o(737550);class f extends g{constructor(e,t,o){super("FrequencyCapRule"),this.placement=void 0,this.cap=void 0,this.window=void 0,this.placement=e,this.cap=t,this.window=o}check(e,t){var o;const r=null===(o=u().default.state.currentUserSettingsStore)||void 0===o?void 0:o.getSettings();if(!r)return!1;const i=new p(null==r?void 0:r.callout_placement_exposures);let a;a="all"===this.placement?Array.from(i.exposures.values()).flat():i.get(this.placement);const s=n().c9.now().toMillis()-this.window;return a.filter((e=>e>=s)).length<this.cap}}var v=()=>o(131448);class h extends g{constructor(e){super("MaxConcurrentRule"),this.maxConcurrent=void 0,this.maxConcurrent=e}check(e,t){const o=(0,r().Q3)(t);return v().default.getMessagesForPlacement(o).length<this.maxConcurrent}}const _=[new class extends g{constructor(){super("DismissalRule")}check(e,t){const o=(0,r().K0)(t);if("once_per_user"===o){var n,i;const e=null===(n=u().default.state.currentUserSettingsStore)||void 0===n?void 0:n.getSettings();return!!e&&!(null!==(i=e.callout_dismissal_timestamps)&&void 0!==i&&i.some((e=>e.name===t.key)))}if("once_per_space"===o){var a,s;const e=null===(a=u().default.state.currentSpaceViewStore)||void 0===a?void 0:a.getSettings();return!!e&&!(null!==(s=e.callout_dismissal_timestamps)&&void 0!==s&&s.some((e=>e.name===t.key)))}return!0}},new class extends g{constructor(){super("BlocklistRule")}check(e,t){const n=o(508496).default.getConfigKey("callout_config","callout_blocklist");return!n||!n.includes(t.key)}},new class extends g{constructor(){super("CorrectPlatformRule")}check(e,t){const o=(0,r().zL)(e.device);return(0,r().tr)(t).includes(o)}},new class extends g{constructor(){super("WithinStartEndRule")}check(e,t){const o="static"===t.type&&t.key in i().lU?i().lU[t.key]:void 0;if(o){const e=o.start,t=o.end,r=n().c9.now().toMillis();return(!e||r>=e)&&(!t||r<=t)}return!0}}],b={Modal:[new class extends g{constructor(e){super("MinimumAccountAgeRule"),this.minimumAccountAge=void 0,this.minimumAccountAge=e}check(e,t){var o;const r=null===(o=u().default.state.currentUserSettingsStore)||void 0===o?void 0:o.getSettings();if(!r||!r.signup_time)return!1;return n().c9.now().toMillis()-r.signup_time>this.minimumAccountAge}}(4*m().nD),new f("Modal",1,m().lG),new h(1)],SidebarFooter:[new h(1)],Tooltip:[new f("Tooltip",1,m().nD)],None:[]};var y=()=>o(731741);function S(e,t,o){if(!o){const o=function(e,t){for(const n of _)if(!n.check(e,t))return{success:!1,error:n.name};const o=(0,r().Q3)(t);for(const n of b[o])if(!n.check(e,t))return{success:!1,error:n.name};return{success:!0}}(e,t);if(!o.success)return o}if(!u().default.state.inAppCalloutStore.updateCalloutStatus({calloutId:t.key,visible:!0,validateCanShow:!o}))return{success:!1,error:"InAppCalloutStore"};const n=(0,r().Q3)(t);if("Modal"===n||"SidebarFooter"===n)for(const[i,a]of v().default.state.messages)(0,r().Q3)(a)===n&&v().default.removeMessage(a.key);return v().default.addMessage(t,o),{success:!0}}function w(e,t){return S(e,{id:"",type:"static",key:t,props:{}})}function k(e,t){I(e,{id:"",type:"static",key:t,props:{}})}function I(e,t){S(e,t,!0)}function A(e,t){x(e,{id:"",key:t,type:"static",props:{}})}function x(e,t){if(v().default.isVisible(t.key)){const o=(0,r().Q3)(t);v().default.removeMessage(t.key),function(e,t){const o=u().default.state.currentUserSettingsStore,r=null==o?void 0:o.getSettings();if(!r||!o)return;const i=new p(r.callout_placement_exposures);for(const a of t)i.add(a,n().c9.now().toMillis());c().createAndCommit({environment:e,userAction:"messageActions.addPlacementExposures",canUndo:!0,perform:e=>{d().mJ({userSettingsStore:o,transaction:e,data:{callout_placement_exposures:i.exportUserSetting()}})}})}(e,[o]),M(e,t),u().default.state.inAppCalloutStore.updateCalloutStatus({calloutId:t.key,visible:!1}),"static"!==t.type&&async function(e,t){const o=y().A.getConfig(t)||{};if(o.message){const t=o.message;await s().callApi({eventName:"updateInAppMessage",environment:e,data:{messageId:t.id,state:"done"}})}}(e,t.key)}}function C(e){const t=u().default.state.currentUserSettingsStore;if(!t)return;const o=new p;c().createAndCommit({environment:e,userAction:"messageActions.addPlacementExposures",canUndo:!0,perform:e=>{d().mJ({userSettingsStore:t,transaction:e,data:{callout_placement_exposures:o.exportUserSetting()}})}})}function T(e,t){M(e,{id:"",key:t,type:"static",props:{}})}function M(e,t){const o=(0,r().K0)(t);"once_per_user"===o?function(e,t){const o=u().default.state.currentUserSettingsStore,r=null==o?void 0:o.getSettings();if(!o||!r)return;const i=r.callout_dismissal_timestamps??[],a=new Map(i.map((e=>[e.name,e])));a.has(t.key)||a.set(t.key,{name:t.key,timestamp:n().c9.now().toMillis()});c().createAndCommit({environment:e,userAction:"messageActions.addUserSettingsDismissal",canUndo:!0,perform:e=>{d().mJ({userSettingsStore:o,transaction:e,data:{callout_dismissal_timestamps:Array.from(a.values())}})}})}(e,t):"once_per_space"===o&&function(e,t){const o=u().default.state.currentSpaceViewStore,r=null==o?void 0:o.getSettings();if(!o||!r)return;const i=r.callout_dismissal_timestamps??[],a=new Map(i.map((e=>[e.name,e])));a.has(t.key)||a.set(t.key,{name:t.key,timestamp:n().c9.now().toMillis()});c().createAndCommit({environment:e,userAction:"messageActions.addSpaceViewDismissal",canUndo:!0,perform:e=>{l().AG(o,e,{callout_dismissal_timestamps:Array.from(a.values())})}})}(e,t)}function P(e){const t=e.callout_dismissal_timestamps??[];for(const o of t){if(!o.name)continue;const e=(0,a().h2)(o.name);if(!e)continue;"once_per_user"===i().lU[e].dismissal_type&&(v().default.isVisible(e)&&!v().default.isForced(e)&&v().default.removeMessage(e))}}function B(e){const t=e.callout_dismissal_timestamps??[];for(const o of t){if(!o.name)continue;const e=(0,a().h2)(o.name);if(!e)continue;"once_per_space"===i().lU[e].dismissal_type&&(v().default.isVisible(e)&&!v().default.isForced(e)&&v().default.removeMessage(e))}}function R(e,t){const{currentUserSettingsStore:o,currentSpaceViewStore:n}=u().default.state,r=null==o?void 0:o.getSettings();if(o&&r&&r.callout_dismissal_timestamps){let n=r.callout_dismissal_timestamps;n=n.filter((e=>e.name!==t)),c().createAndCommit({environment:e,userAction:"messageActions.resetDismissal",canUndo:!0,perform:e=>{d().mJ({userSettingsStore:o,transaction:e,data:{callout_dismissal_timestamps:n}})}})}const i=null==n?void 0:n.getSettings();if(n&&i){let o=i.callout_dismissal_timestamps??[];o=o.filter((e=>e.name!==t)),c().createAndCommit({environment:e,userAction:"messageActions.resetDismissal",canUndo:!0,perform:e=>{l().AG(n,e,{callout_dismissal_timestamps:o})}})}}const E=new(o(645873).O2)("inAppMessages",(()=>o.e(74688).then(o.bind(o,890443))));async function D(e,t){const o=await E.load(),{shown:n}=await o.maybeShowMessagesImpl(e,[t]);return n.length>0}async function N(e,t){const o=await E.load();await o.maybeShowMessagesImpl(e,t)}async function L(e){const t=await E.load();await t.showStartupMessagesImpl(e)}async function F(e,t){const o=await E.load(),{eligibleKeys:n}=await o.getEligibleStaticMessages(e,[t]);return n.length>0}},465741:(e,t,o)=>{o.d(t,{C0:()=>S,CK:()=>T,Dx:()=>A,Fc:()=>P,Gi:()=>h,TW:()=>C,Vm:()=>B,YA:()=>I,d0:()=>f,eb:()=>v,ls:()=>w,mY:()=>b,px:()=>k});o(296540);var n=()=>o(56366),r=()=>o(584262),i=()=>o(959013),a=()=>o(284371),s=()=>o(720665),l=()=>o(901389),c=()=>o(476492),d=()=>o(492414),u=()=>o(972435),p=()=>o(731320),m=()=>o(630116),g=o(474848);const f=5e3,v=500,h=(0,i().YK)({characterLimitReached:{defaultMessage:"Character limit reached.",id:"form.characterLimitReached"},questionLimitReachedTitle:{defaultMessage:"Question limit reached",id:"form.questionLimitReached.title"},questionLimitReachedSubtitle:{defaultMessage:"Please delete a question before creating a new one.",id:"form.questionLimitReached.subtitle"},questionLimitReachedFullMessage:{defaultMessage:"Question limit reached. Please delete a question before creating a new one.",id:"form.questionLimitReached.fullMessage"}}),_=(0,i().YK)({title:{defaultMessage:"Title",id:"database.questionTypeName.title"},text:{defaultMessage:"Text",id:"database.questionTypeName.text"},number:{defaultMessage:"Number",id:"database.questionTypeName.number"},url:{defaultMessage:"URL",id:"database.questionTypeName.url"},multi_select:{defaultMessage:"Multiple choice",id:"database.questionTypeName.multi_select"},person:{defaultMessage:"Person",id:"database.questionTypeName.person"},email:{defaultMessage:"Email",id:"database.questionTypeName.email"},phone_number:{defaultMessage:"Phone",id:"database.questionTypeName.phone_number"},date:{defaultMessage:"Date",id:"database.questionTypeName.date"},file:{defaultMessage:"Files & media",id:"database.questionTypeName.file"},checkbox:{defaultMessage:"Checkbox",id:"database.questionTypeName.checkbox"},relation:{defaultMessage:"Relation",id:"database.questionTypeName.relation"}}),b={title:u().A.formatMessage(_.title),text:u().A.formatMessage(_.text),number:u().A.formatMessage(_.number),url:u().A.formatMessage(_.url),multi_select:u().A.formatMessage(_.multi_select),person:u().A.formatMessage(_.person),email:u().A.formatMessage(_.email),phone_number:u().A.formatMessage(_.phone_number),date:u().A.formatMessage(_.date),file:u().A.formatMessage(_.file),checkbox:u().A.formatMessage(_.checkbox),relation:u().A.formatMessage(_.relation)},y=["relation","person"];function S(e,t){return t?"closed":e?"shared_to_web":"shared_to_space"}function w(e){const{formSharingState:t,isOverBlockLimit:o,spaceName:n}=e;if(o)return(0,g.jsx)(i().sA,{id:"editorFormResponderWarning.overBlockLimit.message",defaultMessage:"You are over the block limit. No new responses can be submitted through this form."});switch(t){case"closed":return(0,g.jsx)(i().sA,{id:"editorFormResponderWarning.closed.message",defaultMessage:"This form is closed. No new responses can be submitted."});case"shared_to_web":return(0,g.jsx)(i().sA,{id:"editorFormResponderWarning.public.message",defaultMessage:"This form is public. Anyone with the link can submit a response."});case"shared_to_space":return(0,g.jsx)(i().sA,{id:"editorFormResponderWarning.internal.message",defaultMessage:"Only members at {spaceName} can fill out this form.",values:{spaceName:n}})}}function k(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.getIsFormPublic()?(0,d().Ay)({store:e,preferPublicLink:!0,pageVisitSource:r().y8.FormPublicPage}):(0,d().Ay)({store:e,openInCenterPeek:t,pageVisitSource:r().y8.FormInternalPage})}function I(e){var t,o;let{collectionContextStore:n,propertyId:r,questionId:i}=e;const a=n?(0,c().sl)(n):void 0,s=null==n?void 0:n.collectionViewStore(),l=null==s?void 0:s.getFormat(),d=null==l||null===(t=l.form_block_pointer)||void 0===t?void 0:t.id;return{question_type:null==n||null===(o=n.normalizedSchemaStore.state)||void 0===o||null===(o=o[r])||void 0===o?void 0:o.type,question_id:i,form_id:d,...a??{}}}function A(e){const t=null==e?void 0:e.getFormat().form_layout_pointer;if(t)return m().K_.createChildStore(e,t)}const x=new(o(178624).R)({key:"opt_out_form_content_warning",namespace:o(419494).cd,important:!1,trackingType:"preference"});function C(e){const t=x.getState(),o=void 0===t||Date.now()-t>s().nD,n="file"===e.propertyType?(0,g.jsx)(i().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.file.message",defaultMessage:"Download file?"}):(0,g.jsx)(i().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.url.message",defaultMessage:"Open link?"}),r=(0,g.jsx)(i().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.description",defaultMessage:"This content was submitted anonymously. Only proceed if you trust the source."}),c="file"===e.propertyType?(0,g.jsx)(i().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.file.confirmLabel",defaultMessage:"Download anyway"}):(0,g.jsx)(i().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.url.confirmLabel",defaultMessage:"Open anyway"});o?l().ui({showCancel:!1,showCloseButton:!0,keepFocus:!0,mode:"wide",message:(0,g.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",fontWeight:a().Wy.medium},children:n}),description:(0,g.jsx)("div",{style:{textAlign:"center",fontSize:14},children:r}),items:[{label:c,onAccept:e.onConfirm,color:"red",buttonType:"solid"}],selectionItems:[{key:"opt_out",showBelowLabels:!0,text:(0,g.jsx)("span",{style:{fontWeight:a().Wy.regular},children:(0,g.jsx)(i().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.optOut",defaultMessage:"Don't show again for 24 hours"})}),onSelect:e=>{!0===e?x.setState(Date.now()):x.setState(void 0)}}]}):e.onConfirm()}function T(e){const{environment:t,propertyType:o,propertySchema:n,isPublicForm:r}=e;if(r&&y.includes(o)){if("person"===o)return"invalid_property_type_for_public_form";if("relation"===(null==n?void 0:n.type)){const e=n.collection_pointer;if(e){const o=new(m().md)(t,e);if(o.isDefined()){if(!(0,p().qw)(o))return"related_collection_not_public"}}}}}const M=(0,i().YK)({checkboxYes:{id:"FormResponseSnapshotModal.Checkbox.Yes",defaultMessage:"Yes"},checkboxNo:{id:"FormResponseSnapshotModal.Checkbox.No",defaultMessage:"No"}});function P(e){return"true"===e?u().A.formatMessage(M.checkboxYes):u().A.formatMessage(M.checkboxNo)}function B(e){const{formQuestionStore:t,propertySchema:o}=e;return(0,n().K8)((()=>{var e;if(!t||!o)return!1;return 1===("multi_select"===o.type?null===(e=t.getPropertyTypeSpecificConfig("multi_select"))||void 0===e?void 0:e.maxSelectionCount:void 0)||"select"===(null==o?void 0:o.type)}),[t,o])}},466614:(e,t,o)=>{o.d(t,{$2:()=>S,F:()=>y,Lw:()=>k,Rk:()=>_,UK:()=>w,yj:()=>b});var n=()=>o(416845),r=()=>o(693954),i=()=>o(402390),a=()=>o(792071),s=()=>o(100622),l=()=>o(973647),c=()=>o(435009),d=()=>o(436572),u=()=>o(812182),p=()=>o(972435),m=()=>o(71268),g=()=>o(852100),f=()=>o(351360),v=()=>o(508496),h=()=>o(547162);function _(e){return!!(e instanceof n().mv&&e.clientData&&"invalid_destination_imprinted_block"===e.clientData.type)}function b(e){h().A.setState({isOpen:!0,content:e.product})}function y(){h().A.setState({isOpen:!1,content:null})}function S(e,t){if(l().Q.isSuccess(t)&&t.value.restrictedContent.length>0)for(const o of t.value.restrictedContent)w(e,{product:o})}async function w(e,t){var o;const n=t.product,a=null==n?void 0:n.id,l=e.ThemeModeStore.state,v=(0,s().O4)({theme:l}),h=e.device.isMobile,_=null===(o=f().default.state.currentSpaceStore)||void 0===o?void 0:o.id;if(h||!a)return void d().D6({label:p().A.getIntl().formatMessage({defaultMessage:"The copied content belonged to a protected template. It has been removed, as the creator has limited redistribution.",id:"accessLocking.restrictedContent.snackbar.title"}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}});const b=await(0,m().ZS)({environment:e,locale:(0,i().H)(p().A.getIntl()),id:a,currentSpaceId:_}),y=null==b?void 0:b.slug;u().Iz({id:a,title:p().A.getIntl().formatMessage({defaultMessage:"A piece of content that was copied belonged to a template",id:"accessLocking.restrictedContent.callout.title"}),message:p().A.getIntl().formatMessage({defaultMessage:"Check out the original template listing in Marketplace",id:"accessLocking.restrictedContent.callout.message"}),presentationType:"persistent",icon:()=>(0,r().Q)({color:v.accentColors.red[500],height:16,width:16}),actions:h?void 0:{primary:{title:p().A.getIntl().formatMessage({defaultMessage:"View template",id:"accessLocking.restrictedContent.callout.action.title"}),onAction:()=>function(t){if(u().UW(a),t){const o={name:"marketplace"};c().oo({environment:e,url:(0,g().sO)(t,o)})}}(y)}}})}function k(e){const{sourceSpaceId:t,targetSpaceId:o,sourceBlockSubtree:n}=e;if(!v().default.checkGate({gateName:"enable_template_access_restriction"}))return!1;if(!(o!==t))return!1;const r=function(e){for(const{model:t}of e)if(t instanceof a().zgg&&t.getIsImprintableBlock()&&t.getFormat().installation_imprint)return!0;return!1}(n);return r}},466721:(e,t,o)=>{o.d(t,{Ds:()=>S,FD:()=>b,FZ:()=>y});o(898992),o(354520),o(581454);var n=()=>o(90023),r=()=>o(179034),i=()=>o(874852),a=()=>o(559653),s=()=>o(161479),l=()=>o(496603),c=()=>o(534177),d=()=>o(211716),u=()=>o(731320),p=()=>o(299545),m=()=>o(351360),g=()=>o(41161),f=()=>o(589994),v=()=>o(630116),h=()=>o(449506);const _=32,b=100;async function y(e,t){await m().default.waitUntilRendered();const{fromPageRefresh:o,blockStore:l,pageVisitStore:c,timestamp:_}=t,b=e.currentUser.id;if(void 0===b||o)return;t.blockStore.id!==c.state.pageId&&c.setState({...c.getInitialState(),pageId:t.blockStore.id});const y=(0,v().Oo)(l,{table:a().F9,id:(0,a().$5)({parent_id:l.id,user_id:b}),spaceId:(0,s().e)(l.pointer.spaceId)}),S=(0,v().Oo)(l,{table:i().ou,id:(0,a().$5)({parent_id:l.id,user_id:b}),spaceId:(0,s().e)(l.pointer.spaceId)});if(await f().transactionQueue.awaitRecordTransaction({table:r().ev,id:l.id}),await(0,p().hS)(l),!l.canRead()||(0,u().qb)(e,l))return;await y.load(),await S.load();const k=y.getKeyStore("visited_at").getValue(),I=S.getKeyStore("exited_at").getValue(),A=await async function(e,t,o,r){const{id:i}=e.currentUser,a=t.id,s=t.getSystemBlockTypeStore().getValue();if((0,n().kR)(s))return{type:"skipped"};if(i){var l;null==e||null===(l=e.mobileNative)||void 0===l||l.recordPageVisit(i,{blockId:a,spaceId:o,visitedAt:r}),g().A.recordVisit({id:a,systemBlockType:s,type:d().ig.Default,currentUserId:i})}const c=await h().callApi({eventName:"recordPageVisit",environment:e,data:{block:{id:a,spaceId:o},timestamp:r},headers:{recordId:a,spaceId:o}});return c}(e,l,(0,s().e)(l.pointer.spaceId),_);if("skipped"===A.type)return;if("failed"===A.type)return;const x=w({pageVisits:A.data.pageVisits,currentState:c.state,blockStore:l,totalCount:void 0,hasMore:void 0});c.state.pageId===l.id&&c.setState({...x,lastViewTime:k,lastExitTime:I})}async function S(e,t){await m().default.waitUntilRendered();const o=e.currentUser.id;if(void 0===o)return;const{blockStore:n,pageVisitStore:r,incremental:i}=t,a=t.limit||_;let d;if(i){const{pageId:e,lastViewTime:t,lastExitTime:n,totalCount:i,hasMore:a,...s}=r.state,u=Object.entries(s).map((e=>{let[t,n]=e;if(o===t)return;const r=n.getVisitedAt();return void 0!==r?r+1:void 0}));d=l().T9(u.filter(c().O9))}const u=await h().callApi({eventName:"getPageVisitors",environment:e,data:{block:{id:n.id,spaceId:(0,s().e)(n.pointer.spaceId)},sinceTimestamp:d,limit:a,includeTotalCount:t.includeTotalCount},headers:{recordId:n.id,spaceId:(0,s().e)(n.pointer.spaceId)}});if("failed"===u.type)return;const p=w({pageVisits:u.data.pageVisits,blockStore:n,currentState:r.state,totalCount:u.data.totalCount,hasMore:u.data.hasMore});let g;if(Object.keys(p).length<=b)g=p;else{const{pageId:e,lastViewTime:t,lastExitTime:o,totalCount:n,hasMore:r,...i}=p,a=(0,c().WP)(i).map((e=>{let[t,o]=e;return[t,o.getVisitedAt()??0]}));g={pageId:e,lastViewTime:void 0,lastExitTime:void 0,totalCount:n,hasMore:r};const s=l().Ul(a,(e=>{let[,t]=e;return-t})).slice(0,b);for(const[l]of s)g[l]=p[l]}r.state.pageId===p.pageId&&r.setState(g)}function w(e){const{blockStore:t,pageVisits:o,currentState:n,totalCount:r,hasMore:i}=e,l={...n,pageId:t.id,totalCount:r,hasMore:i};for(const c of o){const{id:e,user_id:o}=c;o in l||(l[o]=v().sk.createChildStore(t,{table:a().F9,id:e,spaceId:(0,s().e)(t.pointer.spaceId)}))}return l}},466872:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},467676:(e,t,o)=>{o.d(t,{t:()=>u});var n=()=>o(66689),r=()=>o(110192),i=()=>o(869558),a=()=>o(594794),s=()=>o(972435),l=()=>o(519839),c=()=>o(478251);const d=(0,o(959013).YK)({currentSprintViewDefaultName:{defaultMessage:"Current Sprint",id:"collectionViewActions.typedView.currentSprintViewName"}});function u(e){var t;const{environment:o,collectionViewBlockStore:u,collectionViewStore:p,intl:m,transaction:g,copyNameExactly:f=!1}=e;if(!u)return;const v=p.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:t}=e;return t(p)}));if(!v)return;let h;(null===(t=v.format)||void 0===t?void 0:t.app_config_uri)===n().Lu?s().A.formatMessage(d.currentSprintViewDefaultName):h=f?v.name:(0,r().Q)(v.name||m.formatMessage(l().Xg[v.type]));const _=(0,a().Z1)({environment:o,table:i().Gy,spaceId:u.getSpaceId()}),b={...v,id:_,name:h};return(0,c().i)({environment:o,collectionViewBlockStore:u,collectionView:b,transaction:g})}},468484:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{}}setOpen(e,t){this.setState({...this.state,[e]:t})}toggle(e){this.setState({...this.state,[e]:!this.isOpen(e)})}isOpen(e){return!!this.state[e]}}const r=new n},468993:(e,t,o)=>{o.d(t,{A:()=>u});o(296540);var n=()=>o(401497),r=()=>o(284371),i=()=>o(774733),a=()=>o(645873),s=()=>o(331542),l=()=>o(773382),c=()=>o(291050),d=o(474848);const u=function(e){let{isLoading:t,file:r,name:i,size:a,progressPercent:s,style:l,iconSvg:u,onClick:m,disabled:g,right:f,shouldHideRight:v,isInComment:h,children:_}=e;const b=(0,n().IS)((e=>({container:{background:e.embedPlaceholderBackground,width:"100%",borderRadius:4},hoveredStyle:h?{background:e.surface.wash}:{}})),[h]);return t?(0,d.jsx)(p,{file:r,name:i,size:a,progressPercent:s,style:l,iconSvg:u,isInComment:h}):(0,d.jsx)("div",{style:b.container,children:(0,d.jsx)(o(704152).A,{onClick:m,disabled:g,hoveredStyle:b.hoveredStyle,children:(0,d.jsx)(c().Ay,{style:{background:void 0,...l},iconSvg:u,right:f,shouldHideRight:v,isInComment:h,children:_})})})};function p(e){let{file:t,name:o,size:u,progressPercent:p,style:m,iconSvg:g,isInComment:f}=e;const v=(0,n().DP)(),{value:h}=(0,a().fJ)(i().commentsDependency);let _;if(t){if(!h)return null;const e=h.discussionHelpers.formatFileSize(u);_=(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:f?{fontWeight:r().Wy.medium,color:v.text.primary,fontSize:14,lineHeight:"18px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}:{},children:o}),(0,d.jsx)("div",{style:f?{fontSize:12,lineHeight:"15px"}:c().Zw,children:(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",...f?{gap:4}:{}},children:[(0,d.jsx)("div",{style:f?{color:v.text.secondary}:{},children:e}),(0,d.jsx)("div",{style:f?{color:v.text.tertiary}:{marginLeft:3},children:f?"—":" – "}),(0,d.jsx)(s().A,{style:f?{}:{marginLeft:3,marginRight:3}}),(0,d.jsx)(l().A,{style:f?{color:v.text.tertiary}:{},percentage:p})]})})]},"FileLoadingSpinner")}else _=(0,d.jsx)("div",{children:(0,d.jsx)(s().A,{style:{marginLeft:3,marginRight:3}})},"LoadingSpinner");return(0,d.jsx)(c().Ay,{style:{...m,...f?{borderRadius:12,background:v.surface.wash}:{}},iconSvg:g,isInComment:f,children:_})}},470928:(e,t,o)=>{o.d(t,{$3:()=>y,Do:()=>A,EG:()=>C,Es:()=>S,Io:()=>h,Ur:()=>T,Wk:()=>_,aF:()=>x,h4:()=>k,i1:()=>w,k$:()=>I,xE:()=>b});o(898992),o(803949),o(737550);var n=()=>o(687871),r=()=>o(970013),i=()=>o(713998),a=()=>o(179034),s=()=>o(96689),l=()=>o(245241),c=()=>o(979340),d=()=>o(931075),u=()=>o(646736),p=()=>o(351360),m=()=>o(77246),g=()=>o(508496),f=()=>o(682146),v=()=>o(972435);function h(){return g().default.checkGate({gateName:"page_verification"})}function _(e){var t;let{environment:o,blockStore:n,showUpsell:r}=e;if(!h())return!1;if(o.device.isMobile)return!1;const i=null==n||null===(t=n.getSpaceStore())||void 0===t?void 0:t.getModel();if(!(i&&(0,d().Xi)(i))&&!r)return!1;const a=null==n?void 0:n.getPropertyStore(d()._e.Verification);return(null==a||!a.isDefined())&&((null==n||!n.pathIsDead())&&(!(null==n||!n.canEdit())&&"suggest"!==m().Uv.getMode(n)))}function b(e){return!!h()&&(!!g().default.checkGate({gateName:"page_verification_new_badge"})&&!e.device.isMobile)}function y(e){var t;let{environment:o,collectionStore:n}=e;if(!h())return!1;if(!g().default.checkGate({gateName:"page_verification_upsell"}))return!1;if(o.device.isMobile)return!1;if(n){if(n.isPageTreeCollection())return!1}const r=null===(t=o.currentUser)||void 0===t?void 0:t.id;if(!r)return!1;const{currentSpaceStore:i}=p().default.state;if(!i)return!1;const a=(0,u().dp)(i,r),s=i.getSubscriptionTier(),l=a.isWorkspaceOwner(),d=(0,c().$P)(s);return Boolean(l&&d)}function S(e){var t;let{blockStore:o}=e;if(!h())return!1;const n=null==o||null===(t=o.getSpaceStore())||void 0===t?void 0:t.getModel();if(!n||!(0,d().Xi)(n))return!1;const r=null==o?void 0:o.getPropertyStore(d()._e.Verification);return Boolean(null==r?void 0:r.isDefined())}function w(e){const t=e.getPropertyStore(d()._e.Verification).getValue(),o=(0,d().U1)(t);return(0,d().B2)(o)}function k(e){let{blockStore:t}=e;const o=t.getPropertyStore(d()._e.Owner).getValue(),n=(0,i().e5)({textValue:o,propertySchema:{type:"person",name:"verifier"},blockCreatorPointer:void 0});if(0===n.length){const e=t.getCreatedByPointer();return e?{verificationOwners:[e],isCreatedByDefault:!0}:{verificationOwners:[]}}return{verificationOwners:n}}function I(e){return e===d()._e.Owner||e===n().Z.Owner}function A(e){let{collectionStore:t,propertyId:o}=e;const n=t.getSchema()[o];return!!n&&r().M1(n)}function x(e){const t=e.getSchema(),o=Object.keys(t).some(I),n=(0,f().L6)(t,"verification");return o&&n}function C(e){const{results:t,recordMap:o}=e;if(!h())return;const n={type:"verified",label:v().A.formatMessage(l().Nz.verified),properties:{}};t.forEach((e=>{const{id:t,badges:r,spaceId:i}=e;if(Boolean(r&&r.some((e=>"verified"===e.type))))return;const l=o.getModel({table:s().NX,id:i});if(!l||!(0,d().Xi)(l))return;const c=o.getModel({table:a().ev,id:t});(0,d().sN)(c)&&(e.badges=[...r||[],n])}))}function T(e){var t;const{environment:o,spaceStore:n}=e;if(!h())return!1;const r=n.getModel();if(!r)return!1;const i=null===(t=o.currentUser)||void 0===t?void 0:t.id;if(!i)return!1;const a=(0,u().dp)(n,i),s=n.getSubscriptionTier(),l=(0,c().$P)(s)&&a.isWorkspaceOwner();return(0,d().Xi)(r)||l}},471266:(e,t,o)=>{o.d(t,{A:()=>s});var n=()=>o(917992),r=()=>o(553819);const i={open:!0,isImageLoaded:!1,saveButtonLoading:!1,imageRef:void 0,fixedAspectSelection:void 0,aspectSelectionFlipped:!1,outerContainerSize:void 0,innerContainerSize:void 0};class a extends(()=>o(757695))().default{getInitialState(){return{open:!1}}openModal(e){const{originalSource:t,blockStore:o}=e,a="uploading"===r().A.getStatus(o.id)&&r().A.getMetadataByBlockId(o.id)||{...n().b,...o.getImageEditMetadata()};this.setState({...i,blockStore:o,originalSource:t,editMetadata:a,cropAspect:"Circle"===a.mask?1:void 0})}setSaveButtonLoading(e){this.state.open&&this.setState({...this.state,saveButtonLoading:e})}closeModal(e){var t;null==e||null===(t=e.onClose)||void 0===t||t.call(e),this.setState({open:!1})}getEditMetadata(){return this.state.open&&this.state.editMetadata||n().b}getIsImageLoaded(){return!!this.state.open&&this.state.isImageLoaded}setIsImageLoaded(e){this.state.open&&this.setState({...this.state,isImageLoaded:!0,imageRef:e})}setCrop(e){if(this.state.open){const t={...this.state.editMetadata,crop:e};this.setState({...this.state,editMetadata:t})}}setMask(e){if(this.state.open)switch(this.setState({...this.state,fixedAspectSelection:void 0,aspectSelectionFlipped:!1}),e){case"None":return void this.setFreeform();case"Circle":return void this.setCircleMask();default:(0,o(534177).HB)(e)}}async setFixedAspectRatio(e,t){if(!this.state.open)return;const{width:o,height:r}=n().oU[e],i=t?r/o:o/r,a=this.state.editMetadata,s=await this.getAspectCrop(a,i);s&&this.setState({...this.state,cropAspect:i,editMetadata:{...a,crop:s,mask:"None"},fixedAspectSelection:e,aspectSelectionFlipped:t})}setFreeform(){if(!this.state.open)return;const e=this.state.editMetadata;this.setState({...this.state,cropAspect:void 0,editMetadata:{...e,mask:"None"}})}async setCircleMask(){if(!this.state.open)return;const e=this.state.editMetadata,t=await this.getAspectCrop(e,1);t&&this.setState({...this.state,cropAspect:1,editMetadata:{crop:t,mask:"Circle"}})}async getAspectCrop(e,t){if(this.state.open){var n;const r=null===(n=this.state.imageRef)||void 0===n?void 0:n.current,i=null==e?void 0:e.crop;if(!r||!i)return;const{makeAspectCrop:a}=await o(691648).h.load();return a(i,t,r.width,r.height)}}resetCrop(){this.state.open&&(this.setCrop(n().b.crop),this.setMask(n().b.mask))}}const s=new a},472090:(e,t,o)=>{o.d(t,{E:()=>r});var n=()=>o(397248);class r{constructor(e){this.rect=o(757695).default.createValue(n().v_,{name:"rect"}),this.el=void 0,this.resizeObserver=void 0,this.recomputeThrottled=void 0,this.recompute=()=>{var e;const t=(null===(e=this.el)||void 0===e?void 0:e.getBoundingClientRect())??n().v_;return this.rect.setState(t),t};const t=(null==e?void 0:e.throttleMs)??10;t&&(this.recomputeThrottled=o(496603).nF(this.recompute,t,{leading:!0,trailing:!0}))}observe(e){var t;this.el!==e&&(null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.el=e,"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(this.getRecomputeFn()),this.resizeObserver.observe(this.el)),this.recompute())}destroy(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0),this.el=void 0}getRecomputeFn(){return this.recomputeThrottled||this.recompute}}},473227:(e,t,o)=>{o.d(t,{CR:()=>l,Nz:()=>u,PD:()=>c,eB:()=>p,tf:()=>d,v8:()=>s});o(16280);var n=()=>o(206267),r=()=>o(534177),i=()=>o(77246),a=()=>o(571062);function s(e){const{navigableBlockStore:t,editorModeConfig:o}=e;if(!t.isNavigableBlock())throw new Error("Can only set editor mode on navigable block.");i().Uv.setStateForBlock(t.id,o)}function l(e){const{navigableBlockStore:t}=e;if(!t.isNavigableBlock())throw new Error("Can only clear editor mode on navigable block.");i().Uv.state&&i().Uv.clearStateForBlock(t.id)}function c(e){const{navigableBlockStore:t,mode:o}=e;"default"===o?p(e):"suggest"===o?u(e):(0,i().Or)(o)||"ai_co_editing"===o||(0,r().HB)(o);let n=t;if(!t.isNavigableBlock()){const e=t.getNavigableBlockStore();if(!e)throw new Error("Store doesn't have a navigable block store.");n=e}const a=i().Uv.state;i().Uv.setState({...a,blockStoreMode:{...a.blockStoreMode,[n.id]:{...a.blockStoreMode[n.id],mode:o}}})}function d(e){const t=i().Uv.getMode(e.navigableBlockStore);c({...e,mode:"default"===t?"suggest":"default"})}function u(e){const{environment:t,location:o}=e,r=n().JW();a().FW({environment:t,from:o,suggesting_session_id:r}),i().Uv.setState({blockStoreMode:{...i().Uv.state.blockStoreMode,[e.navigableBlockStore.id]:{...i().Uv.state.blockStoreMode[e.navigableBlockStore.id],startMilliseconds:Date.now(),sessionId:r}}})}function p(e){const{environment:t,location:o}=e,n=i().Uv.state.blockStoreMode[e.navigableBlockStore.id];n.sessionId&&n.startMilliseconds&&a().uW({environment:t,from:o,suggesting_session_id:n.sessionId,duration_ms:Date.now()-n.startMilliseconds}),i().Uv.setState({blockStoreMode:{...i().Uv.state.blockStoreMode,[e.navigableBlockStore.id]:{...i().Uv.state.blockStoreMode[e.navigableBlockStore.id],startMilliseconds:void 0,sessionId:void 0}}})}},474424:(e,t,o)=>{o.d(t,{g:()=>c});o(581454);var n=()=>o(700500),r=()=>o(713998),i=()=>o(792071),a=()=>o(179034),s=()=>o(519831),l=()=>o(919709);function c(e){const{getRecordValue:t,blockValue:o}=e;let c="";const d={user:new Map},u=i().Bj6.fromBlock(o),p=i().b4_.fromGetRecordValueFn(t);if(u.isCollectionView()){const e=function(e){const{getRecordModel:t,model:o}=e,n=o.getRenderFormatPointer(t);if(!n)return;const i=t(n);if(!i)return;if(i.table===a().ev)return(0,r().yQ)(i,"title")||[];if(i.table===s().Vl)return i.getNormalizedName()}({model:u,getRecordModel:p});e&&e.length>0&&(c=l().$VL(e,p,d).text)}else if(u.isType("file")){c=`${l().$VL(u.getProperty("title"),p,d).text} ${l().$VL(u.getProperty("caption"),p,d).text}`}else if(u.isType("bookmark")){c=`${l().$VL(u.getProperty("title"),p,d).text} ${l().$VL(u.getProperty("description"),p,d).text} ${l().$VL(u.getProperty("caption"),p,d).text}`}else if(u.isType(n().Ib)){const e=u.getProperty("caption");c=l().$VL(e,p,d).text}else if(u.isType(n().xd.tableRow)){const e=function(e){const{blockModel:t,getRecordModel:o}=e,n=o({table:a().ev,id:t.getParentId(),spaceId:t.getSpaceId()});return null==n?void 0:n.getFormatValue("table_block_column_order")}({blockModel:u,getRecordModel:p});if(e){c=e.map((e=>l().$VL(u.getProperty(e),p,d).text)).join(" ")}}else{const e=(0,r().yQ)(o,"title");c=l().$VL(e,p,d).text}return{text:c.trim()||void 0,mentions:d}}},476380:(e,t,o)=>{o.d(t,{HC:()=>R,Hc:()=>D,T5:()=>M,V9:()=>E,VN:()=>C,c2:()=>N,ho:()=>T,zV:()=>P});o(898992),o(354520),o(672577),o(803949),o(941795);var n=()=>o(908006),r=()=>o(919709),i=()=>o(643707),a=()=>o(496603),s=()=>o(534177),l=()=>o(413962),c=()=>o(792540),d=()=>o(347199),u=()=>o(953418),p=()=>o(792002),m=()=>o(712287),g=()=>o(455994),f=()=>o(656219),v=()=>o(143857),h=()=>o(735372),_=()=>o(171018),b=()=>o(24157),y=()=>o(112873),S=()=>o(620689),w=()=>o(255460),k=()=>o(436572),I=()=>o(606952),A=()=>o(725614),x=()=>o(317909);function C(e){const{clearQuery:t,overridePreviousTextSelection:o}=e,{textSelectionOnOpen:n,open:r}=h().Ay.state;r&&("editing"!==b().default.state.mode&&(o?b().default.setState({forceExtendAnnotations:{},mode:"editing",multiSelection:o}):n&&b().default.setState({...n,multiSelection:{start:n.multiSelection.end,end:n.multiSelection.end}})),h().Ay.update((e=>({...e,focused:!1,open:!1,findQuery:t?"":e.findQuery}))))}function T(e){const{environment:t,selectedString:o,textSelectionOnOpen:n}=e,r=o&&o.length>0;h().Ay.update((e=>({...e,open:!0,findQuery:r?o:h().Ay.state.findQuery,focused:!0,showReplaceInput:!1,textSelectionOnOpen:n}))),A().clear({environment:t})}function M(){h().Ay.state.focused||h().Ay.update((e=>({...e,focused:!0})))}function P(){h().Ay.update((e=>({...e,showReplaceInput:!e.showReplaceInput,focused:e.showReplaceInput})))}const B=200;function R(e){const{environment:t,matches:o,replace:n,find:i,intl:d,editorViewEditorModeMap:u}=e,{pageDetails:{activePageDetails:m,secondaryPageDetails:g}}=e,f=n.length-i.length,v=o.filter(s().O9).filter((e=>(0,c().M5)({environment:t,match:e,pageStore:e.view===m.view?m.store:null==g?void 0:g.store}))),_={id:"",columnId:void 0,offset:0};0!==v.length?(v.length>1&&C({clearQuery:!1}),a().iv(v,B).forEach((e=>{x().createAndCommit({userAction:"findAndReplaceInstance",environment:t,canUndo:!0,perform:o=>{e.forEach((e=>{if(!e.allowReplace)return;const{blockStore:a,selection:s}=e,c="block"===e.type,d=c?e.propertyType:e.propertyId,m=a.getPropertyStore(d);if(!m)return;const g=e.blockStore.id,v=c?void 0:e.propertyId;_.id!==g||_.columnId!==v?(_.id=g,_.columnId=v,_.offset=0):_.offset+=f;const h=s.startIndex+_.offset,b=s.endIndex+_.offset,y=("main"===e.view?u.main:u.side_peek)??"default",S=(0,p().DX)({startIndex:h,endIndex:b},m,y).toArray().filter(r().Ta1);if("suggest"===y){const n={start:{store:m,index:h},end:{store:m,index:b}},r=(0,l().RR)(t,o,e.blockStore);(0,l().rY)({environment:t,multiSelection:n,transaction:o,discussionStore:r}),_.offset+=i.length}else I().jQ({environment:t,selection:{startIndex:h,endIndex:b},store:m,transaction:o});const w=S.length>0?[n,S]:[n];I().yr({environment:t,index:"default"===y?h:h+i.length,store:m,tokens:[w],transaction:o,editorMode:y})}))}}),k().rL({item:{label:d.formatMessage({id:"inPageFind.replaceAll.snackbarCopy",defaultMessage:"{numMatches, plural, one {Replaced {numMatches} match} other {Replaced {numMatches} matches}}"},{numMatches:e.length})},undoFunc:()=>{h().Ay.update((e=>({...e,open:!0,showReplaceInput:!0})))}})}))):k().D6({label:d.formatMessage({id:"inPageFind.replaceAll.noMatches",defaultMessage:"No matches replaced"})})}async function E(e){var t;const{match:o,pagePropertiesStore:r,pageStore:a,environment:s}=e;if(!a)return;function l(e){let{isPeek:t}=e;const o=t?"peek":"mainPage";"popup"===g().A.getPanelState(o).displayStyle&&(0,m().F)({environment:s,from:"search",panelLocation:o,layoutStore:void 0})}const c="main"!==o.view;switch(o.type){case"block":case"simple_table_cell":await w().NH(a,[o.blockStore.id]),l({isPeek:c});break;case"page_property_name":case"page_property_value":const e=a.getAssociatedCollectionStore(),i=null==e||null===(t=e.getNormalizedPropertyGroups())||void 0===t?void 0:t.find((e=>{let{propertyIds:t}=e;return null==t?void 0:t.includes(o.propertyId)}));o.visible||!r||r.state.forceShowProperties||r.update((e=>({...e,forceShowProperties:!0})));if(!(null==e?void 0:e.getLayoutStore()))break;o.isMatchInLayoutPageDetails?(0,m().j)({environment:s,from:"search",panelLocation:c?"peek":"mainPage",layoutStore:void 0}):l({isPeek:c}),o.isPropertyInGroup&&i&&f().A.setPropertyGroupExpandedOverride({groupId:i.id,override:"open"});break;case"comment":l({isPeek:c}),await w().NH(a,[o.blockStore.id]);const d=v().A.find((e=>e.getStore().id===o.discussionId)),p=null==d?void 0:d.getNode();if(!(p&&p instanceof Element))return;const g=p.getBoundingClientRect();await y().B4({analyticsFrom:"in_page_find",blockStore:o.blockStore,environment:s,shouldFocusDiscussion:!1,recursivelyLoadAllDiscussions:!1,rect:g}),await n().default.afterNextFlush((()=>{const e=null==d?void 0:d.getMarginDiscussionScrollContainer();if(e){const t=e.getNode();t&&u().VG({element:t,environment:s,options:{top:t.scrollHeight,behavior:"smooth"}})}}))}("page_property_name"!==o.type&&"page_property_value"!==o.type||!o.isMatchInLayoutPageDetails)&&await async function(e,t){await n().default.afterNextFlush();const o=document.getElementsByClassName(i().wT).item(0);if(!o)return;const r="main"===e.view?d().A.PageScroller:d().A.PeekViewScroller;if(!r)return;S().hT({element:o,environment:t,scrollerContext:{verticalScroller:r,horizontalScroller:void 0},vertical:{reveal:"closest"},horizontal:void 0,animate:!1})}(o,s)}function D(e,t){const o=e.getElementsByClassName(i().wT);if(!o.length)return;const n=o.item(0);n&&(0,u().$v)({element:n,environment:t,blockAlignment:"center",inlineAlignment:"nearest",behavior:"auto"})}function N(e,t){var o;if("page_property_name"!==t.type&&"page_property_value"!==t.type)return;const n=t.propertyId,r=e.getAssociatedCollectionStore(),i=null==r||null===(o=r.getNormalizedPropertyGroups())||void 0===o?void 0:o.find((e=>{let{propertyIds:t}=e;return null==t?void 0:t.includes(n)}));return(0,_().es)(null==i?void 0:i.id)}},476492:(e,t,o)=>{o.d(t,{nL:()=>E,sl:()=>I,kz:()=>C,tv:()=>B,ax:()=>R,Cu:()=>T,K6:()=>P});o(898992),o(354520),o(672577),o(803949);var n=()=>o(584262),r=()=>o(410690),i=(o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454),o(908872),o(737550),()=>o(534177)),a=()=>o(720665),s=()=>o(289915),l=()=>o(921598),c=()=>o(970013),d=()=>o(381891);function u(e,t,o){return void 0!==e&&((0,s().dU)(e)?Boolean(null===(n=e.filters)||void 0===n?void 0:n.some((e=>u(e,t,o)))):!!(0,s().yX)(e)&&o.has(e.property));var n}function p(){return(0,a().MU)(c().Pl.map((e=>[e,0])))}function m(e,t){const o=p();if(void 0===e)return o;var n;if((0,s().dU)(e))return(null===(n=e.filters)||void 0===n?void 0:n.reduce(((e,o)=>{const n=m(o,t);for(const[t,r]of(0,i().WP)(n))e[t]+=r;return e}),o))||o;if((0,s().yX)(e)){var r;const n=null===(r=t[e.property])||void 0===r?void 0:r.type;return n&&(o[n]+=1),o}if((0,s().LB)(e))return o[e.timestamp]+=1,o;(0,i().HB)(e)}function g(e,t){const o=new Set;if((0,s().yX)(e)){var n;const r=e.filter.operator;"relation"===(null===(n=t[e.property])||void 0===n?void 0:n.type)&&(0,s().j)(r)&&o.add(r)}else(0,s().dU)(e)?e.filters&&e.filters.forEach((e=>g(e,t).forEach((e=>o.add(e))))):(0,s().LB)(e)||(0,i().HB)(e);return o}function f(e,t,o,n){const r=(0,i().uv)(e),a=new Set;for(const i of r){var s;(null===(s=e[i])||void 0===s?void 0:s.type)===n&&a.add(i)}const l=u(t,e,a),c=Boolean(o&&o.some((e=>a.has(e.property))));return l&&c?"in_filter_and_sort":c?"in_sort":l?"in_filter":void 0}var v=()=>o(329199),h=()=>o(632905),_=()=>o(248566),b=()=>o(680091),y=()=>o(351360),S=()=>o(940371),w=()=>o(961581),k=()=>o(347320);function I(e,t){const o=null==e?void 0:e.collectionViewBlockStore(),r=null==e?void 0:e.collectionStore(),i=null==e?void 0:e.collectionViewStore(),a=null==e?void 0:e.filtersBarOpenStore.state,s=null==i?void 0:i.getType(),l=(null==e?void 0:e.settingsStore)&&(0,S().S)(null==e?void 0:e.settingsStore),c=null==i?void 0:i.getChartType(),d=null==i?void 0:i.getChartPlaceholderType(),u=null==i?void 0:i.getFormId(),p=null==o?void 0:o.id,m=null==e?void 0:e.getPageVisitSourceOverride(),g=!(null==e||!e.viewsModuleContextStore.getState()),f=g&&!(null==e||!e.viewsModuleContextStore.isInLayoutBuilder()),v=null==e?void 0:e.getPreviewContextAnalytics(),h="workflow_templates_onboarding"===(null==v?void 0:v.location);return{view_type:s,context_type:null==e?void 0:e.contextType,is_full_screen:null==e?void 0:e.isFullScreenStore.state,settings_menu:null!=e&&e.settingsStore.state.open&&l?l.type:void 0,collection_id:t||(null==r?void 0:r.id),collection_view_id:null==i?void 0:i.id,collection_view_block_id:p,filters_bar_open:a,is_in_wiki:null==o?void 0:o.isCollectionViewPageWithContent(),module:g?"viewsMain":void 0,is_in_template_onboarding:h,flow_id:null==v?void 0:v.flowId,is_in_page_builder:f,personal_home_type:m?(0,n().hJ)(m):void 0,database_visit_id:null==e?void 0:e.visitSessionId,chart_type:"placeholder"===c?d:c,is_chart_placeholder:"placeholder"===c,form_id:u}}const A="missing_context_store",x="missing_schema";function C(e,t){var o,n,r,a,s,c,u,h;if(!e)return{view_type:A,row_count_category:A,column_count_category:A,has_relation_column:A,has_rollup_column:A,has_formula_column:A,formula_property_state:A,rollup_property_state:A,is_client_mode_enabled:A,tracking_source:void 0,collection_view_block_id:A,collection_view_id:A,collection_id:A,collection_type:A,collection_request_backend:A,has_groups:A,has_aggregations:A,has_estimated_aggregations:A,group_reducer_version:A,database_visit_id:A,is_full_screen:A,is_multi_source_view:A,uses_subitems:A,property_visibility:A,property_sort:A,property_filter:A,property_groups:A,relation_loader_status:A,group_sorts:A,is_wiki:A,is_relation_querying_eligible:A,virtualized_columns_enabled:void 0};const _=e.isClientModeEnabledStore.state,b=e.isFullScreenStore.state,y=(null===(o=e.collectionViewBlockStore())||void 0===o?void 0:o.id)||"missing",S=e.collectionViewStore(),w=(null==S?void 0:S.id)||"missing",k=(null===(n=e.collectionStore())||void 0===n?void 0:n.id)||"missing",I=null==S?void 0:S.getCollectionSource(),C=null===(r=e.collectionStore())||void 0===r?void 0:r.getSchema(),P=e.requestBackend,B=e.isMultiSourceView;if(!C)return{view_type:x,row_count_category:x,column_count_category:x,has_relation_column:x,has_rollup_column:x,has_formula_column:x,formula_property_state:x,rollup_property_state:x,is_client_mode_enabled:_,tracking_source:t,collection_view_block_id:y,collection_view_id:w,collection_id:k,collection_type:(null==I?void 0:I.type)||"missing",collection_request_backend:P,has_groups:x,has_aggregations:x,has_estimated_aggregations:x,group_reducer_version:x,database_visit_id:e.visitSessionId,is_full_screen:b,is_multi_source_view:B,uses_subitems:x,property_visibility:x,property_sort:x,property_filter:x,property_groups:x,relation_loader_status:x,group_sorts:x,is_wiki:x,is_relation_querying_eligible:x,virtualized_columns_enabled:void 0};const{has_relation_column:R,has_rollup_column:E,has_formula_column:D}=function(e){if(void 0===e)return{has_relation_column:x,has_rollup_column:x,has_formula_column:x};let t=!1,o=!1,n=!1;for(const r of Object.values(e))if("relation"===(null==r?void 0:r.type)&&(t=!0),"rollup"===(null==r?void 0:r.type)&&(o=!0),"formula"===(null==r?void 0:r.type)&&(n=!0),t&&o&&n)break;return{has_relation_column:t,has_rollup_column:o,has_formula_column:n}}(C),N=null===(a=e.remoteRequestStore.state)||void 0===a?void 0:a.loader;let L="missing",F="missing",U="missing";N&&(L=v().V0(N),F=v().NM(N),U=v().P1(N));const O=e.getPropertyFormatKey(),V=p();let j=0;if(S&&O){var z;const e=null==S||null===(z=S.getPropertyFormatsStore(O))||void 0===z?void 0:z.getValue();e&&e.forEach((e=>{if(e.visible){var t;j+=1;const o=null===(t=C[e.property])||void 0===t?void 0:t.type;o&&(V[o]+=1)}}))}const q=Boolean(null===(s=e.collectionStore())||void 0===s?void 0:s.getFormat().subitem_property),H=V,W=function(e,t){const o=p();return void 0===e||e.forEach((e=>{var n;const r=null===(n=t[e.property])||void 0===n?void 0:n.type;r&&(o[r]+=1)})),o}(null==N?void 0:N.sort,C),K=m(null==N?void 0:N.filter,C),G=function(e){const t=p();if(null==e||!e.reducers)return t;const o=Object.values(e.reducers).filter((e=>"groups"===e.type));if(0===o.length)return t;for(const n of o)t[n.groupBy.type]+=1,void 0!==n.subGroup&&(t[n.subGroup.groupBy.type]+=1);return t}(N),$=function(e){const t={manual:0,ascending:0,descending:0};if(null==e||!e.reducers)return t;const o=(0,i().WP)(e.reducers).filter((e=>{let[t,o]=e;return(0,d().BF)(o)}));if(0===o.length)return t;for(const[n,r]of o)(0,d().BF)(r)&&!n.startsWith(l().RO)&&(t[("formula"===r.groupBy.type?r.groupBy.groupBy:r.groupBy).sort.type]+=1);return t}(N),Y=function(e,t){const o={is_empty:!1,is_not_empty:!1,relation_contains:!1,relation_does_not_contain:!1,in_group:!1};if(!e)return o;if(e.filter&&g(e.filter,t).forEach((e=>o[e]=!0)),!e.reducers)return o;for(const r of Object.values(e.reducers)){var n;(0,d().BF)(r)&&(o.in_group="relation"===r.groupBy.type||"relation"===(null===(n=r.subGroup)||void 0===n?void 0:n.groupBy.type)),((0,d().dV)(r)||(0,d().DW)(r))&&r.filter&&g(r.filter,t).forEach((e=>o[e]=!0))}return o}(N,C),Q=(Z=Y).in_group||Z.relation_does_not_contain||Z.is_empty||Z.is_not_empty;var Z;const X=Boolean(null===(c=e.collectionStore())||void 0===c?void 0:c.isPageTreeCollection()),J=null===(u=Object.values((null==N?void 0:N.reducers)??{}).find((e=>"groups"===e.type)))||void 0===u?void 0:u.version;return{view_type:e.getViewType()||"unknown",row_count_category:T(null===(h=e.remoteResultStore.state)||void 0===h?void 0:h.sizeHint),column_count_category:M(j),has_relation_column:R,has_rollup_column:E,has_formula_column:D,formula_property_state:f(C,null==N?void 0:N.filter,null==N?void 0:N.sort,"formula"),rollup_property_state:f(C,null==N?void 0:N.filter,null==N?void 0:N.sort,"rollup"),is_client_mode_enabled:_,tracking_source:t,collection_view_block_id:y,collection_view_id:w,collection_id:k,collection_type:(null==I?void 0:I.type)||"missing",collection_request_backend:P,has_groups:L,has_aggregations:F,has_estimated_aggregations:U,group_reducer_version:J,database_visit_id:e.visitSessionId,is_full_screen:b,is_multi_source_view:B,uses_subitems:q,property_visibility:H,property_sort:W,property_filter:K,property_groups:G,relation_loader_status:Y,is_relation_querying_eligible:Q,group_sorts:$,is_wiki:X,virtualized_columns_enabled:e.virtualizedModule.getVirtualizedColumnsEnabled()}}function T(e){return void 0===e?"unknown":(t=e)<=1e3?"0-1K":t<=2500?"1K-2.5K":t<=5e3?"2.5K-5K":t<=1e4?"5K-10K":t<=25e3?"10K-25K":t<=5e4?"25K-50K":t<=1e5?"50K-100K":t<=2e5?"100K-200K":t<=5e5?"200K-500K":t<=1e6?"500K-1M":"1M+";var t}function M(e){return void 0===e?"unknown":e<=5?"0-5":e<=10?"6-10":e<=20?"10-20":e<=50?"20-50":"51_or_more"}function P(e){const{from:t,collectionContextStore:o,sizeHintAtStart:n}=e,r=C(o),{row_count_category:i,...a}=r;return{...a,from:t,property_type:"property_type"in e?e.property_type:void 0,did_trigger_fetch:o?o.isLoadingStore.state:A,row_count_category:T(n)}}function B(e){const{collectionContextStore:t,is_native_drop:o,is_empty:n}=e;return{...C(t),is_native_drop:o,is_empty:n}}function R(e){var t,o;const{environment:n,collectionContextStore:i,visibleItemsCount:a,isPrewarmedTab:s,cvbLoadingStateOnInitialRender:l}=e,c=C(i),d=i.remoteResultStore.state?v().uX({result:i.remoteResultStore.state}).length:0,u=0===d?void 0:a/d,p=null===(t=y().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId(),m=i.collectionViewStore(),g=null==m?void 0:m.id,f=(0,k().A)(g),S=null===(o=n.prefetchCache)||void 0===o?void 0:o.getPrefetchAnalytic(f);return{...c,percentage_of_remote_result_visible:void 0===u?"empty_remote_result":0===u?"0":u<=.25?"0-25":u<=.5?"25-50":u<=.75?"50-75":u<1?"75-100":1===u?"100":"greater_than_100",wasm_sqlite_initialized:w().A.state.metricDataStore.state.wasm_sqlite_initialized,did_prefetch:"hit-match"===(null==S?void 0:S.type),prefetch_analytic_type:null==S?void 0:S.type,initial_cvb_loading_state:l,collections_page_chunk_cvb_prefetch_group:b().X.getPageChunkCVBPrefetchGroup(),is_mobile_background_launch:(0,_().A)(),was_server_response_from_cache:i.wasServerResponseFromCache,was_initial_render_empty:e.wasInitialRenderEmpty,collection_request_backend:i.requestBackend,relation_querying_group:i.relationQueryingGroup,workspace_tag:void 0!==p?h().wB[p]:void 0,includes_page_origin_to_app_start:!0,time_origin_to_app_start:r().getAppStartTime(),is_prewarmed_tab:s}}function E(e){const t=e.collectionViewStore(),o=null==t?void 0:t.getChartConfig();return{new_data_config:"placeholder"===(null==o?void 0:o.type)||null==o?void 0:o.dataConfig,chart_type:null==t?void 0:t.getChartType()}}},477450:(e,t,o)=>{o.d(t,{A:()=>v,v:()=>h});o(16280);var n=o(296540),r=()=>o(872994),i=()=>o(17022),a=()=>o(484714),s=()=>o(56366),l=()=>o(534177),c=()=>o(921855),d=()=>o(713972),u=()=>o(906537),p=()=>o(24157),m=o(474848);let g=!1;const f=new(o(757695).default)("FALSE_STORE");f.setState(!1);const v=n.forwardRef((function(e,t){const v=(0,a().Y0)(),b=(0,a().v3)(),y=(0,o(959013).tz)(),S=(0,n.useRef)(null),w=(0,n.useRef)(!1),k=(0,n.useRef)(!1),I=(0,r().y)(),{debugName:A,store:x,onContextMenu:C,onDoubleClick:T,onMouseDown:M,onTouchStart:P,placeholder:B,onBlur:R,onFocus:E,onMouseOver:D,onMouseOut:N,suppressNewlineEvents:L,getHtml:F,getSelection:U,expandSelectionOnTripleClick:O,onSelect:V,onMutation:j,onClick:z}=e,q=(0,s().O$)(e.canEditStore||f,{debugName:"ContentEditableLeaf_canEditStore"}),H=e.canEditStore?!q:e.isDisabled??!1,W=(0,o(645873).fJ)(o(403831).X,{disabled:!0}),K=(0,n.useRef)(""),G=(0,n.useRef)(!1),$=(0,n.useRef)(),Y=(0,s().K8)((()=>{const e=`${A}.ContentEditableLeaf`;try{const{status:t,value:o}=W;if("resolved"===t&&o.ErrorBoundaryDebuggingStore.shouldComponentThrow(e))throw new Error(`Simulated RenderError from ${e}`);return F()}catch(t){return G.current||(G.current=!0,$.current=o(449412).O8(t,{from:`${A}.ContentEditableLeaf`,type:"RenderError"})),K.current}}),[A,W,F],{recomputeSchedule:"eager"});K.current=Y;const Q=(0,n.useCallback)((()=>Boolean(w.current||(null==I?void 0:I.isComposing()))),[I]),Z=(0,n.useCallback)((()=>H),[H]),X=(0,o(963589).X)("force_update_celeaf_oncompositionend"),J=(0,o(396182).I)(),ee=(0,n.useCallback)((()=>{X&&k.current&&(k.current=!1,J());const t=e.onCompositionEnd;null==t||t()}),[J,X,e.onCompositionEnd]),te=(0,n.useCallback)((t=>{const o=e.onKeyDown;null==o||o(t)}),[e.onKeyDown]),oe=(0,n.useCallback)((e=>{Q()||null==V||V({endpoint:e,component:fe.current})}),[Q,V]),ne=(0,n.useCallback)((()=>c().Z6(b,S.current)),[b]),re=(0,n.useCallback)((()=>S.current),[]),ie=!(0,o(962845)._V)(v)&&e.spellCheck,ae=e.tagName??"div",se=(0,n.useCallback)((e=>{null==j||j(e),o(908006).default.flush()}),[j]),le=(0,n.useCallback)((()=>{se({newValue:ne(),insertedLine:!1,isComposing:Q()})}),[ne,se,Q]),ce=(0,n.useCallback)((()=>{if(v.isAndroid)return;w.current=!0;const t=e.onCompositionStart;null==t||t()}),[v.isAndroid,e.onCompositionStart]),de=(0,n.useCallback)((()=>{if(v.isAndroid)return;w.current=!1,le();const t=e.onCompositionEnd;null==t||t()}),[v.isAndroid,le,e.onCompositionEnd]),ue=(0,n.useCallback)((e=>function(e){const{event:t,suppressNewlineEvents:o,rootRef:n,getText:r,handleMutation:i,isComposing:a,device:s}=e;if(!d().vr(t))throw new Error("Invalid event");g;s.isAndroid&&"insertText"===t.inputType&&""===t.data&&t.preventDefault();if(o){var l;if("insertLineBreak"!==t.inputType&&"insertParagraph"!==t.inputType||t.preventDefault(),s.isAndroid&&"insertCompositionText"===t.inputType&&null!==(l=t.data)&&void 0!==l&&l.endsWith("\n")&&t.target===n.current){var c;g;const e=()=>{var t;i({insertedLine:!0,deletedLine:!1,newValue:r(),multiSelection:void 0,isComposing:a()}),null===(t=n.current)||void 0===t||t.removeEventListener("input",e)};null===(c=n.current)||void 0===c||c.addEventListener("input",e)}}}({event:e,suppressNewlineEvents:L,rootRef:S,getText:ne,handleMutation:se,isComposing:Q,device:v})),[v,ne,se,Q,L]),pe=(0,n.useCallback)((()=>{oe("contain")}),[oe]),me=(0,n.useCallback)((e=>{3===e.nativeEvent.detail&&O&&(c().oB(v),oe("contain")),null==z||z(e)}),[oe,v,z,O]);(0,n.useEffect)((()=>{const e=S.current;if(e&&d().a2)return e.addEventListener("beforeinput",ue),()=>e.removeEventListener("beforeinput",ue)}),[ue]);const ge=Boolean(!Y),fe=function(e,t){const i=(0,r().y)(),{getNode:a,delegateCompositionEnd:s,delegateKeyDown:l,delegateBeforeInput:c,delegateMutation:d,delegateSelection:u,getText:p,isComposing:m,isDisabled:g}=t,f=(0,n.useRef)(null);f.current||(f.current={isComposing:m,getText:p,delegateCompositionEnd:s,delegateKeyDown:l,delegateBeforeInput:c,delegateMutation:d,delegateSelection:u,getNode:a,isDisabled:g});return(0,n.useLayoutEffect)((()=>{f.current.getNode=a,f.current.delegateCompositionEnd=s,f.current.delegateKeyDown=l,f.current.delegateBeforeInput=c,f.current.delegateMutation=d,f.current.delegateSelection=u,f.current.getText=p,f.current.isComposing=m,f.current.isDisabled=g}),[c,s,l,d,u,a,p,m,g]),(0,(()=>o(790748))().b)(null==i?void 0:i.contentEditableLeafRegistry,(()=>f.current),[]),(0,n.useImperativeHandle)(e,(()=>f.current),[]),f}(e.leafRef,{getNode:re,delegateCompositionEnd:ee,delegateKeyDown:te,delegateBeforeInput:ue,delegateMutation:se,delegateSelection:oe,getText:ne,isComposing:Q,isDisabled:Z});!function(e,t,o,m,g,f,v){const b=(0,n.useRef)(!1),y=(0,n.useRef)(null);y.current||(y.current=document.createElement("div"));const S=(0,n.useRef)(),w=(0,r().y)(),k=(0,a().Y0)(),I=(0,a().v3)(),A=(0,s().K8)(f,[f]),x=function(e){const{disableContentEditableWhenNotEditingTextOnMobile:t=!1,disabled:o,rootRef:s}=e,l=(0,a().Y0)(),c=(0,r().y)(),d=l.isMobile&&t,u=(0,n.useRef)(null);null===u.current&&(u.current=!!d&&i().A.withListenerIgnored((()=>!p().default.isEditingStore.state)));return(0,n.useEffect)((()=>{if(d){function e(){u.current=!p().default.isEditingStore.state,s.current&&_(s.current,c,o||u.current)}return p().default.isEditingStore.addListener(e),()=>p().default.isEditingStore.removeListener(e)}u.current=!1}),[c,o,s,d]),u}({disabled:m,rootRef:e,disableContentEditableWhenNotEditingTextOnMobile:g});(0,n.useLayoutEffect)((()=>{const n=!b.current;b.current=!0;const r=e.current;if(r)if(_(r,w,m||x.current),o)v.current=!0;else{if(n)h(w,(()=>{r.innerHTML=t}));else{S.current!==t&&(S.current=t,y.current.innerHTML=t);const e=r.innerHTML,o=y.current.innerHTML??"";e!==o&&h(w,(()=>{r.innerHTML=t}))}if(m)return;if(u().isMouseSelecting())return;if(u().isMouseRightClicking())return void u().resetMouseRightClicking();if(A)switch(A.type){case"start":case"end":{null==w||w.tryEnableMultiSelection();const e=c().vA(r,A.index),t={endpoint:A.type,onlyIfEqual:w,position:e};u().setDOMEndpoint(t,k),function(e,t,o){const n=u().get(),r=u().getIncompleteDOMEndpoint();if(n&&r===o)switch(o.endpoint){case"start":return void u().setDOMEndpoint({endpoint:"end",onlyIfEqual:t,position:{container:n.endContainer,offset:n.endOffset}},e);case"end":return void u().setDOMEndpoint({endpoint:"start",onlyIfEqual:t,position:{container:n.startContainer,offset:n.startOffset}},e);default:(0,l().HB)(o.endpoint)}}(k,w,t);break}case"contain":{const e=c().rM(r,A.selection.startIndex,A.selection.endIndex),t=u().get();c().Rq(t,e)||(k.isAndroid&&document.activeElement!==r&&r.focus(),u().set(e,k));break}default:(0,l().HB)(A)}else if(!n){const e=u().get(),t=!k.isAndroid||i().A.withListenerIgnored((()=>"empty"===p().default.state.mode));e&&e.commonAncestorContainer&&d().Ll(e.commonAncestorContainer)&&r.contains(e.commonAncestorContainer)&&t&&u().clear(I)}}}))}(S,Y,Q(),H,e.disableContentEditableWhenNotEditingTextOnMobile,U,k);const ve=(0,n.useRef)(H);return(0,m.jsx)(o(11048).A,{name:"ContentEditableLeaf",children:G.current?(0,m.jsx)(o(215206).m,{store:x,children:e=>(0,m.jsx)(o(719061).oj,{backgroundColor:e,errorId:$.current})}):(0,m.jsx)(ae,{id:e.id,ref:(0,o(558842).Px)(t,S),...(0,o(451306).AH)(e.className,ge&&e.placeholderStyle?e.placeholderStyle:e.style,!H&&"notranslate"),onCompositionStart:ce,onCompositionEnd:de,onInput:le,spellCheck:ie,autoCorrect:e.autoCorrect,autoCapitalize:e.autoCapitalize,onSelect:pe,onClick:me,onBlur:R,onFocus:E,onContextMenu:C,onKeyDown:te,onDoubleClick:T,onMouseDown:M,onTouchStart:P,onMouseOver:D,onMouseOut:N,placeholder:B,contentEditable:!ve.current,suppressContentEditableWarning:!0,...o(295740).dv,...void 0===I?{tabIndex:0,role:"textbox","aria-label":y.formatMessage({id:"contentEditableLeaf.ariaLabel",defaultMessage:"Start typing to edit text"})}:{}})})}));function h(e,t){const o=null==e?void 0:e.domLock;return o?o.mutate(t):t()}function _(e,t,o){const n=e.getAttribute("contenteditable");o?"false"!==n&&h(t,(function(){e.contentEditable="false"})):"true"!==n&&h(t,(function(){e.contentEditable="true"}))}},478184:(e,t,o)=>{o.d(t,{L:()=>i});var n=()=>o(662303),r=()=>o(425946);function i(e){return r().L(e,n().locale)}},478251:(e,t,o)=>{o.d(t,{i:()=>s});var n=()=>o(869558),r=()=>o(722101),i=()=>o(246826),a=()=>o(630116);function s(e){const{environment:t,collectionViewBlockStore:o,collectionView:s,transaction:l,isEphemeral:c=!1}=e,d=i().eC({environment:t,table:n().Gy,value:s,inMemoryRecordCache:o.inMemoryRecordCache,transaction:l}),u=a().pS.createChildStore(o,{table:n().Gy,id:d.id,spaceId:o.getSpaceId()});return c||r().BC({parentStore:o.getCollectionViewsStore(),appendStore:u,transaction:l}),u}},478726:(e,t,o)=>{o.d(t,{$n:()=>M,Cg:()=>b,Ck:()=>I,In:()=>S,L5:()=>A,NR:()=>w,OU:()=>x,XD:()=>T,fc:()=>_,gV:()=>v,mb:()=>C,sV:()=>h,uf:()=>k,x6:()=>f,yU:()=>y});o(944114),o(898992),o(803949);var n=()=>o(700500),r=()=>o(651124),i=()=>o(390066),a=()=>o(519831),s=()=>o(747100),l=()=>o(953418),c=()=>o(548821),d=()=>o(712505),u=()=>o(630116),p=()=>o(186445),m=()=>o(504836),g=()=>o(108944);const f=900;function v(e){const t=e.getAssociatedCollectionStore();if(!t)return;const o=e.getSchema(),n=t.getFormat();return(0,i().L)(n,o,void 0,r().jf.Collection)}function h(e){if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(n().xd.externalObjectInstancePage)}function _(e){if(!(0,m().pB)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===a().Vl){const e=t.getFormat();return!(null==e||!e.external_collection_type)}return!1}function b(e){if(!(0,m().CS)())return!1;const t=e.getAssociatedCollectionStore();if(t){const e=t.getFormatStore(),o=e.getKeyStore("sync_state").getValue(),n=e.getKeyStore("app_config_uri").getValue();if(null!=o&&o.enable_two_way_sync&&(null==o||!o.syncing)&&"notion://tasks_collection"===n)return!0}return!1}function y(e){if(!(0,m().pB)())return!1;const t=g().fU(e),o=[];t.forEach((e=>{e instanceof u().h4||o.push(e)}));const n=o.find((e=>_(e)));return Boolean(n)}function S(e){return!e.hasContent()&&(!e.isCollectionView()||e.isType("collection_view_page")&&e.isCollectionViewPageWithContent())}function w(e,t){const o={width:"100%",display:"flex",flexDirection:"column",alignItems:"center",flexShrink:0,flexGrow:0};return e.isCollectionView()&&(e.isNonEditableState()&&(o.cursor="default"),l().z4(t)&&(o.position="sticky",o.left=0)),o}function k(e,t,o){return I(e,t,o)?"100%":f}function I(e,t,o){const{device:n}=o,{isPhone:r}=n;if(r)return!0;if(t&&A(t))return!0;if(t===c().Rr.CollectionPageViewFullScreen||t===c().Rr.CollectionViewBlockFullScreen)return!0;const i=e.getRecordStoreUIRoot();return i instanceof u().Bv&&i.isFullWidth()}function A(e){return e===c().Rr.PeekView}function x(e,t){if(e===c().Rr.PeekView){const e=d().default.getPeekMode();return d().PeekModePadding.horizontal[e]}return(0,p().F8)(t)}function C(e){return(0,s().cq)(e)&&(d().default.isSidePeekOpen()||d().default.isSidePeekClosingStore.state)}function T(e,t){return t.device.isMobile?16:A(e)||e===c().Rr.Form?32:80}function M(e){return e.device.isMobile?12:4}},479199:(e,t,o)=>{o.d(t,{A:()=>r});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);class n extends(()=>o(757695))().default{getInitialState(){return{isModalOpen:!1,account:void 0,selectedImportType:"FullImport",workspaces:[],isLoadingProjects:!1,selectedProjectsAndTeamspaces:{},templateCreationInProgress:!1,currentTab:"selectData",loggerPageId:void 0,showAuthPopup:!1,email:void 0,APIToken:void 0,result:void 0,isComplete:!1,selectedWorkspace:void 0,isLoadingMondayWorkspaces:!1,isFetchingMondayAccount:!1,excludeProjectsAndTasks:!1,isLoadingHierarchy:!1,isLoadingBoards:!1,fetchedHierarchy:!1,selectedTeamspacesForFullImport:{},selectedFolderIdsForFullImport:new Set,selectedBoardIdsForFullImport:new Set,mondayFoldersDetailsMap:{},mondayBoardsDetailsMap:{}}}resetImport(){const{account:e,workspaces:t}=this.getState();this.setState({...this.getInitialState(),account:e,workspaces:t})}}const r=new n},479490:(e,t,o)=>{o.d(t,{A:()=>r});var n=o(296540);function r(e){const[t,o]=n.useState((()=>window.matchMedia(e).matches));return n.useEffect((()=>{const t=window.matchMedia(e);function n(){o(t.matches)}return n(),t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}}),[e]),t}},480289:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(959180))().A{}const r=new n},480388:(e,t,o)=>{o.d(t,{$:()=>r,M:()=>n});const n=670,r=["template_optout","workspace_setup"]},481235:(e,t,o)=>{o.d(t,{H:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("dateInterval",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M4.345 10.359l1.832 1.36c.191.146.378.182.56.11.183-.074.274-.226.274-.459v-.847H8.96a.52.52 0 00.54-.533.513.513 0 00-.157-.376.521.521 0 00-.383-.158H7.01V8.63c0-.246-.093-.4-.28-.465-.186-.068-.371-.034-.553.103L4.345 9.64a.43.43 0 00-.185.362c0 .146.062.264.185.356zm11.31 0l-1.832 1.36c-.191.146-.378.182-.56.11-.183-.074-.274-.226-.274-.459v-.847H11.04a.533.533 0 01-.383-.15.521.521 0 01-.157-.383c0-.146.052-.272.157-.376a.521.521 0 01.383-.158h1.95V8.63c0-.246.093-.4.28-.465.186-.068.371-.034.553.103l1.832 1.374a.43.43 0 01.185.362.423.423 0 01-.185.356zM3.378 15.16c.183 0 .33-.051.445-.16a.553.553 0 00.17-.42V5.449a.592.592 0 00-.17-.438.601.601 0 00-.445-.17.592.592 0 00-.437.17.592.592 0 00-.171.438v9.132c0 .173.057.31.17.42s.26.16.438.16zm13.24 0c.183 0 .33-.051.445-.16a.552.552 0 00.17-.42V5.447a.592.592 0 00-.17-.437.6.6 0 00-.445-.17.592.592 0 00-.437.17.593.593 0 00-.171.437v9.132c0 .173.057.31.17.42.115.11.26.16.438.16z"})})},482287:(e,t,o)=>{o.d(t,{Vd:()=>g,hz:()=>f,po:()=>m});o(898992),o(908872);var n=()=>o(173979),r=()=>o(496603),i=()=>o(962845),a=()=>o(299545),s=()=>o(792002),l=()=>o(24157),c=()=>o(246826),d=()=>o(606952),u=()=>o(725614),p=()=>o(317909);function m(e){const{environment:t,annotation:o}=e,n=l().default.state;if("editing"!==n.mode)return;if(l().default.isEmptySelection())return void u().toggleExtendAnnotation({annotation:o});const{multiSelection:r}=n;(0,i().$W)(r).length>0&&(p().createAndCommit({userAction:"textAnnotationActions.annotateSelection",environment:t,canUndo:!0,perform:t=>{d().sr({...e,transaction:t,multiSelection:r})}}),u().setMultiSelection({multiSelection:r}))}function g(e){const{environment:t,annotationKey:o,blocks:n,transaction:r}=e;for(const i of(0,a().Lz)({blockStores:n,traverseTransclusionReferences:!1})){const e=i.getBlockTitleStore(),n=(0,s().mk)(e);n&&d().gw({environment:t,store:e,annotationKey:o,selection:n,transaction:r,updateSelection:!1})}}function f(e){const{environment:t,store:o,context:i,transaction:a}=e;if(!o.canEdit())return;const{title:s,...l}=o.getProperties(),u=Object.entries(l).reduce(((e,t)=>{let[o,a]=t;if(a){const t=(0,n().f$)(a,i);r().n4(a,t)||(e[o]=t)}return e}),{});r().Im(u)||c().zv({store:o.getPropertiesStore(),data:u,transaction:a});const p=o.getTitleValue();if(p){const e=(0,n().f$)(p,i);r().n4(p,e)||d().KY({environment:t,store:o.getBlockTitleStore(),value:e,transaction:a})}}},483461:(e,t,o)=>{function n(e){return e.isType("page")&&!e.isNonEditableState()&&!e.isCollectionView()&&!e.isInsideCollection()&&!e.isAssociatedCollectionAPageTree()&&e.canAdmin()}function r(e){var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.isPageTreeCollection())??!1}o.d(t,{E:()=>r,S:()=>n})},484792:(e,t,o)=>{o.d(t,{B:()=>r,n:()=>i});const n=(0,o(446943).C)({modernContextDefaultValue:void 0,displayName:"OverrideLinkClickContext",legacyContextKey:"overrideLinkClick"}),r=n.Provider,i=n.context},484975:(e,t,o)=>{o.d(t,{A:()=>r});o(16280);var n=()=>o(221844);const r=new class{constructor(){this.pendingEvictions=void 0,this.environmentProvider=void 0,this.environmentProvider=()=>{throw new Error("Environment not ready")},this.pendingEvictions=new Map}getPendingEvictionCount(){return this.pendingEvictions.size}updateEnvironment(e){this.environmentProvider=()=>e}addToPendingEvictions(e,t){const o=(0,n().Z)(e),r={...e,timestamp:t};this.pendingEvictions.set(o,r)}removeFromPendingEvictions(e){this.pendingEvictions.delete((0,n().Z)(e))}forEachPendingEviction(e){for(const{pointer:t,userId:o,timestamp:n}of this.pendingEvictions.values())e({userId:o,pointer:t,timestamp:n,environment:this.environmentProvider()})}}},485634:(e,t,o)=>{o.d(t,{A:()=>r});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);class n extends(()=>o(757695))().default{getInitialState(){return{syncingProperties:new Set,syncingComments:new Set}}hasPendingSyncedCollectionChanges(){return this.state.syncingProperties.size>0||this.state.syncingComments.size>0}}const r=new n},486130:(e,t,o)=>{o.d(t,{_:()=>a});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(689025),r=()=>o(508496);class i extends(()=>o(757695))().default{getInitialState(){return{}}getSpacePermissionGroupIds(e){var t;let{userId:o,spaceId:i}=e;return r().default.checkGate({gateName:"migrate_current_user_space_group_membership_store_multi_user_space"})?(o&&i&&(null===(t=this.state[o])||void 0===t||null===(t=t[i])||void 0===t?void 0:t.spacePermissionGroupIds))??new Set:n().A.state.spacePermissionGroupIds}shouldRefetch(e){let{userId:t,spaceId:o,emitValue:i}=e;return r().default.checkGate({gateName:"migrate_current_user_space_group_membership_store_multi_user_space"})?!this.state[t]||!this.state[t][o]||this.state[t][o].lastEmitValue!==i:n().A.shouldRefetch({currentUserId:t,currentSpaceId:o,emitValue:i})}}const a=new i},486666:(e,t,o)=>{o.d(t,{FU:()=>m,GF:()=>f,H:()=>_,MP:()=>b,Sq:()=>l,Te:()=>i,UA:()=>d,Vq:()=>r,Zl:()=>c,bc:()=>n,cx:()=>v,jv:()=>g,ru:()=>u,w$:()=>h,zG:()=>p,zR:()=>s,zf:()=>a});const n=12,r=9,i=2,a=12,s=16,l=32,c=24,d=44,u=32,p=12,m=9,g=l*n+2*p,f=356,v=390,h=305,_=10,b=2},487532:(e,t,o)=>{o.d(t,{DZ:()=>l,Lu:()=>a,N$:()=>s,Rq:()=>c});var n=()=>o(496603),r=()=>o(92400),i=()=>o(570241);function a(e){const t=new AbortController;return i().Z.setState({...i().Z.state,abortControllersByPage:{...i().Z.state.abortControllersByPage,[e]:t}}),AbortSignal.any([t.signal,i().Z.state.globalAbortController.signal])}function s(e){var t;null===(t=i().Z.state.abortControllersByPage[e])||void 0===t||t.abort(new(r().f)),l(e)}function l(e){i().Z.setState({...i().Z.state,abortControllersByPage:n().cJ(i().Z.state.abortControllersByPage,e)})}function c(){i().Z.state.globalAbortController.abort(new(r().f)),i().Z.reset()}},487929:(e,t,o)=>{o.d(t,{T:()=>a,u:()=>s});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949);var n=()=>o(651124),r=()=>o(390066);function i(e){let{format:t,schema:o,visibilityLevels:i}=e;const a=(0,r().L)(t,o,void 0,n().jf.Collection);if(null==a||!a.collection_page_sections)return[];const s=new Set(i);return a.collection_page_sections.filter((e=>s.has(e.visibility)))}function a(e){let{format:t,schema:o,visibilityLevels:n}=e;return i({format:t,schema:o,visibilityLevels:n}).filter((e=>o[e.section]))}function s(e){const{format:t,schema:o,visibilityLevels:n}=e,r=i({format:t,schema:o,visibilityLevels:n}),a=[];return r.forEach((e=>{o[e.section]&&a.push(e.section)})),a}},487941:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{focused:!1,hovered:!1}}}const r=n},488173:(e,t,o)=>{o.d(t,{UY:()=>s,fW:()=>l,zG:()=>c});var n=()=>o(66689),r=()=>o(617871),i=()=>o(651124);const a=8*o(615234).pT,s=new Map([[n().yx.Status,"status"],["title","title"],[n().yx.Priority,"priority"],[n().yx.Tags,"tags"],[n().yx.Assign,"assignee"],[n().yx.DueDate,"duedate"],[n().yx.SubTaskRelation,"subtasks"],[n().yx.ParentTaskRelation,"parent_task"],[n().yx.BlockingRelation,"blocking_tasks"],[n().yx.BlockedRelation,"blocked_by_tasks"],[n().yx.TaskToProjectRelation,"task_to_project"]]);new Map([[n().K4.Status,"status"],["title","title"],[n().K4.Priority,"priority"],[n().K4.Collaborators,"collaborators"],[n().K4.CompletionRollup,"completion_rollup"],[n().K4.People,"people"],[n().K4.ProjectDates,"project_dates"],[n().K4.ProjectToTaskRelation,"project_to_task"]]),i().uO.Jira,r().me,i().uO.Salesforce,r().Iy;function l(e){let{isUserOnEnterprisePlan:t,twoWaySyncEnabled:o,canEdit:n,isEditableProperty:r}=e;return t?o?r?n?"full_access":"connect_to_integration":"property_not_editable":"two_way_sync_not_enabled":"upgrade_to_enterprise"}function c(e){var t,o;return!(null==e||!e.external_collection_type)&&((null===(t=e.sync_state)||void 0===t||!t.syncing)&&(!(null===(o=e.sync_state)||void 0===o||!o.last_synced_at)&&Date.now()-e.sync_state.last_synced_at>a))}},488923:(e,t,o)=>{o.d(t,{YY:()=>i,uZ:()=>s});var n=()=>o(645873);const r=new(n().O2)("coediting",(()=>Promise.all([o.e(16471),o.e(8184),o.e(53095)]).then(o.bind(o,643852)))),i=(0,n()._h)(r,(e=>e.HoverCoEditingOverlayRenderer));let a;async function s(){if(!a){const e=await r.load();a=new e.CoEditingTasksManager}return a}},489348:(e,t,o)=>{o.d(t,{A:()=>i});o(898992),o(672577);var n=()=>o(548821);class r extends(()=>o(959180))().A{isBlockInFrame(e){const t=e.getRecordStoreUIRoot();return Boolean(this.find((e=>e.blockContext===n().Rr.Frame&&e.store===t)))}isBlockInTemplate(e){const t=e.getRecordStoreUIRoot();return Boolean(this.find((e=>e.blockContext===n().Rr.InAppTemplatePreview&&e.store===t)))}isBlockInPageSnapshot(e){const t=e.getRecordStoreUIRoot();return Boolean(this.find((e=>e.blockContext===n().Rr.InPageSnapShot&&e.store===t)))}isBlockInWiki(e){const t=e.getRecordStoreUIRoot();return Boolean(this.find((e=>(0,o(483461).E)(e.store)&&e.store===t)))}openNewPageDiscussionInput(e){const t=this.find((t=>t.store.id===e.id));if(!t)return;const{pageViewBlockStore:o}=t;o.setState({...o.state,forceDiscussionOpen:!0})}}const i=new r},489436:(e,t,o)=>{o.d(t,{A:()=>D,n:()=>R});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(799954),l=()=>o(522419),c=()=>o(187174),d=()=>o(147588),u=()=>o(919709),p=()=>o(959013),m=()=>o(284371),g=()=>o(559926),f=()=>o(220738),v=()=>o(383594),h=()=>o(317909),_=()=>o(500507),b=()=>o(38337),y=()=>o(937182),S=()=>o(891078),w=()=>o(554283),k=()=>o(518888),I=()=>o(496889),A=()=>o(739283),x=()=>o(704152),C=()=>o(125565),T=()=>o(42425),M=o(474848);const P=(0,p().YK)({fileTitle:{defaultMessage:"File",id:"fileBlock.fileTab.title"},embedButtonText:{defaultMessage:"Embed link",id:"fileBlock.embedButton.label"},embedFilePrompt:{defaultMessage:"Paste a file link…",id:"fileBlock.linkPrompt.placeholder"},embedCaption:{defaultMessage:"Works with links of PDFs, Google Drive, Google Maps, CodePen…",id:"fileBlock.linkPrompt.caption"}});function B(e,t){var a,s;const c=Boolean(e.commentProps),m=null===(a=e.commentProps)||void 0===a?void 0:a.onRemoveBlockFromComment,b=(0,p().tz)(),w=(0,r().v3)(),x=(0,r().Y0)(),C=(0,n.useRef)(null),T=(0,n.useId)(),[B,D]=(0,n.useState)(!1),N=(0,S().bx)(e.store,e.disabled),L=(0,S().pW)(e.store),F=(0,i().K8)((()=>{const t=e.store.getProperties(),o=t&&t.source,n=u().q4_(o),{display_source:r}=e.store.getFormat();return r||n}),[e.store]),U=(0,i().K8)((()=>k().default.getKeyState(k().default.getBlockKey(e.store.id))),[e.store.id]),O=x.isMobile||B,V=(0,i().K8)((()=>e.store.getProperties()),[e.store]),j=(0,n.useMemo)((()=>u().k4p(V&&V.title)),[V]),z=(0,n.useMemo)((()=>u().k4p(V&&V.size)),[V]),q=O&&N&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(E,{fileBlockStore:e.store}),(0,M.jsx)(I().A,{style:{marginRight:4},store:e.store,fadeIn:!0})]}),H=(0,n.useCallback)((()=>{const t=e.store.getPropertyStore("caption");o(778417).hc({environment:w,store:e.store}),o(725614).setSelectionAtEnd({store:t})}),[w,e.store]),W=(0,n.useCallback)((t=>{const o=t[0];h().createAndCommit({userAction:"FileBlock.handleUpload",environment:w,canUndo:!0,perform:t=>{f().L({environment:w,store:e.store,source:void 0,name:void 0,size:void 0,transaction:t})}}),g().Sy(w,{source:"upload",file:o.name}),f().Q({environment:w,store:e.store,file:o})}),[w,e.store]),K=(0,n.useCallback)((t=>{t.file&&f().Q({environment:w,store:e.store,file:t.file})}),[w,e.store]),G=(0,n.useCallback)((()=>{const t=C.current;if(N&&t){const o=t.getBoundingClientRect();v().W(w,{originRect:o,originGap:0,isSmallWidth:!0,showArrow:!0,title:b.formatMessage(P.fileTitle),currentTab:"file",tabs:[{type:"file",fileUpload:!0,imageUpload:x.isAndroid,videoUpload:x.isAndroid,onUpload:W},{type:"embed",buttonText:b.formatMessage(P.embedButtonText),inputPlaceholder:b.formatMessage(P.embedFilePrompt),caption:b.formatMessage(P.embedCaption),onChange:t=>{v().I(),h().createAndCommit({userAction:"FileBlock.handleOpenMenu",environment:w,canUndo:!0,perform:o=>{f().L({environment:w,store:e.store,source:t,name:void 0,size:void 0,transaction:o})}}),g().Sy(w,{file:t,source:"embed"}),g().oF(w,{pastedText:t,source:"file_block_menu"})}}]})}}),[N,x.isAndroid,w,W,b,e.store]),$=(0,n.useCallback)((()=>{o(675074).oD(w,{store:e.store,from:"embedded_block_click"})}),[w,e.store]),Y=(0,n.useMemo)((()=>({flexGrow:1,minWidth:0,borderRadius:4,...o(496603).cJ(L,["fontSize","lineHeight"])})),[L]),Q=(0,M.jsx)("div",{role:"figure","aria-labelledby":T,ref:C,children:(0,M.jsxs)(_().V,{type:y().cM,dropTargetKey:`file-block-${e.store.id}`,onDropFile:N?K:()=>{},children:[(0,M.jsxs)("div",{onMouseMove:()=>D(!0),onMouseLeave:()=>D(!1),style:{display:"flex"},children:[c?(0,M.jsx)(o(774733).vY,{title:l().SB({title:j,source:F}),source:F,size:z,store:e.store,onClick:$,showBlockActionMenuButton:!(null!==(s=e.commentProps)&&void 0!==s&&s.shouldHideBlockActionMenu)}):(0,M.jsx)(R,{title:j,url:F,size:z,onClick:$,right:q,style:Y}),(0,M.jsx)(A().A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}),(0,M.jsx)(o(460282).c,{store:e.store,captionAriaId:T,disabled:e.disabled})]})}),Z=(0,M.jsx)("div",{ref:C,children:(0,M.jsx)(_().V,{type:y().cM,dropTargetKey:`file-block-${e.store.id}`,onDropFile:N?K:()=>{},children:(0,M.jsxs)(o(155004).s,{allowSelectionWithin:!1,onMouseMove:()=>D(!0),onMouseLeave:()=>D(!1),style:{display:"flex"},children:[(0,M.jsx)(o(468993).A,{disabled:e.disabled,iconSvg:d().Y,shouldHideRight:!O,right:N&&(0,M.jsx)(I().A,{store:e.store,fadeIn:!1}),isLoading:Boolean(U),progressPercent:U?U.progressPercent:0,file:null==U?void 0:U.file,name:null==U?void 0:U.name,size:null==U?void 0:U.size,onClick:G,children:(0,M.jsx)(p().sA,{defaultMessage:"Upload or embed a file",id:"fileBlock.uploadOrEmbed.placeholder"})}),(0,M.jsx)(A().A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]})})}),X=F?Q:Z;return(0,S().NW)(e.store,t,(0,n.useMemo)((()=>({renderedType:"file",getNode:()=>C.current,getBlockStore:()=>e.store,caption:H,handleCreated:G,edit:G,activate:G,replace:G,...m&&{handleRemoveBlockFromComment:()=>m(e.store)}})),[H,G,m,e.store]),X)}function R(e){const{style:t,right:o,title:n,url:r,size:i,onClick:a}=e,c={paddingTop:s().nE.paddingTop,paddingBottom:s().nE.paddingBottom,paddingLeft:s().nE.paddingLeft};return(0,M.jsx)(x().A,{style:t,onClick:a,children:(0,M.jsx)(T().Ay,{style:c,left:(0,d().Y)(),leftStyle:{width:"1.35em",height:"1.35em"},alignment:T().C1.Center,right:o,children:(0,M.jsxs)("div",{style:{display:"flex",alignItems:"baseline"},children:[(0,M.jsx)("div",{style:{...m().RC},children:l().SB({title:n,source:r})}),i&&(0,M.jsx)(C().A,{isSmall:!0,style:{marginLeft:6,whiteSpace:"nowrap"},children:i})]})})})}function E(e){const{fileBlockStore:t}=e,[{value:s}]=(0,c().Yb)((async()=>{const e=await Promise.resolve().then(o.bind(o,650829));return(await e.assistantDependency.load()).assistantActions}),[]),[l,d]=(0,w().B)(),u=(0,a().IS)((e=>({askAiText:{fontSize:14,color:e.aiPurpleColor,marginRight:4,paddingTop:4,paddingBottom:4,paddingRight:6,paddingLeft:6,borderRadius:6,background:d?e.buttonHoveredBackground:void 0}})),[d]),m=(0,i().K8)((()=>s&&s.isSelectionValidAttachmentSelection([t])),[s,t]),g=(0,r().v3)(),f=(0,n.useCallback)((e=>{s&&(s.initializeSessionFromAttachmentBlockSelection({environment:g,selectedAttachmentStore:t}),e.preventDefault(),e.stopPropagation())}),[s,g,t]);return m?(0,M.jsx)("div",{style:u.askAiText,onClick:f,className:b().qGl,ref:l,children:(0,M.jsx)(p().sA,{defaultMessage:"Ask AI",id:"FileBlock.AssistantChatWithAiTextButton"})}):null}const D=n.memo(n.forwardRef(B),o(821062).A)},490704:(e,t,o)=>{o.d(t,{BT:()=>k,BZ:()=>b,FW:()=>m,Iv:()=>_,LU:()=>u,M0:()=>g,MP:()=>w,eU:()=>y,fd:()=>p,h0:()=>v,ii:()=>f,qB:()=>h,yP:()=>S});o(944114),o(898992),o(354520),o(581454);var n=()=>o(496603),r=()=>o(534177),i=()=>o(681873),a=()=>o(519831),s=()=>o(161479),l=()=>o(919709),c=()=>o(443881),d=()=>o(977345);function u(e){const t=[];for(const o of e)if((0,l().bHQ)(o))t.push(o[0]);else if((0,l().BEe)(o))t.push((0,l().N8A)(o));else if((0,l().qXl)(o)){const e=(0,l().uPN)(o),n=l().snh(e);if(n){t.push(n);continue}const r=l().Sev(e);if(r){t.push(r);continue}const i=l().tVx(e);if(i){t.push(i);continue}const a=l().TVE(e);if(a){t.push(a);continue}}return t}function p(e){if(void 0!==e)return[f(e)]}function m(e){const t=e||[],o=[];for(const n of t){const e=l().uPN(n),t=l().snh(e)||l().Sev(e)||l().tVx(e)||l().TVE(e)||l().$CJ(e);t&&o.push(t);const r=l().N8A(n).split(",");for(const n of r){const e=n.trim(),t=e.indexOf('"'),r=e.lastIndexOf('"');if(t>=0&&r>=0){const n=e.slice(t+1,r);n.length>0&&o.push(n)}else"true"===e?o.push(!0):"false"===e&&o.push(!1)}}return o}function g(e){const t=n().hS(e,(e=>JSON.stringify(e)));if(0!==t.length)return l().__s([["["],...(0,i().A)(t.map(f),(()=>[", "])),["]"]])}function f(e){return"string"==typeof e?[`"${e}"`]:"boolean"==typeof e?[`${e}`]:l().wmz(e)}function v(e,t){return e.filter((e=>JSON.stringify(e)!==JSON.stringify(t)))}function h(e,t,o){const n=_(e,t,o);if(n)return b(n)}function _(e,t,o){if("text"===o.type||"url"===o.type||"email"===o.type||"phone_number"===o.type||"title"===o.type||"geo_point"===o.type)return{type:"text"};if("checkbox"===o.type)return{type:"checkbox"};if("multi_select"===o.type)return{type:"select_array",collection:e,property:t};if("select"===o.type||"status"===o.type)return{type:"select",collection:e,property:t};if("person"===o.type)return{type:"person_array"};if("number"===o.type||"auto_increment_id"===o.type)return{type:"number"};if("date"===o.type)return{type:"date"};if("relation"===o.type){if(o.collection_pointer)return{type:"block_array",collection:{table:a().Vl,id:o.collection_pointer.id,spaceId:(0,s().e)(o.collection_pointer.spaceId)}};if(o.collection_id)return{type:"block_array",collection:{table:a().Vl,id:o.collection_id,spaceId:e.spaceId}}}else{if("formula"===o.type||"rollup"===o.type||"last_edited_by"===o.type||"last_edited_time"===o.type||"button"===o.type||"created_time"===o.type||"created_by"===o.type||"file"===o.type||"location"===o.type||"verification"===o.type||"last_visited_time"===o.type)return;(0,r().HB)(o)}}function b(e){return"text"===e.type||"number"===e.type||"checkbox"===e.type||"date"===e.type?e:"block_array"===e.type?{type:"array",of:{type:"block",collection:e.collection}}:"person_array"===e.type?{type:"array",of:{type:"person"}}:"select"===e.type?{type:"select",collection:e.collection,property:e.property}:"select_array"===e.type?{type:"array",of:{type:"select",collection:e.collection,property:e.property}}:void(0,r().HB)(e)}function y(e){return"string"!=typeof e&&"boolean"!=typeof e}function S(e){return(e.value??[]).map((e=>{if(!l().qXl(e))return;const t=l().tVx(e[1]);if(!t)return;return l().iVq(t).id})).filter(r().O9)}function w(e){const{formulas:t,formulaTypecheckContextValues:o,value:n,spaceId:i}=e;return(0,r().O9)(n.value)?"formula"===n.type?(0,c().D3)({formulas:t,formulaTypecheckContextValues:o,formulaValue:n.value,spaceId:i}):"simple"===n.type?k({formulaTypecheckContextValues:o,simpleFormulaValue:n.value,spaceId:i}):void(0,r().HB)(n.type):[]}function k(e){const{formulaTypecheckContextValues:t,simpleFormulaValue:o,spaceId:n}=e,r=[],i=l().kNd(o);for(const a of i){const e=(0,d()._H)(t,a.id);e&&r.push(...(0,d().qU)(e,n))}const s=l().IQD(o);for(const c of s)if((0,l()._Nw)(c)){const e=(0,d()._H)(t,c.contextValueId);if(!e)continue;r.push(...(0,d().qU)(e,n))}else c.collection&&r.push({...c.collection,spaceId:n,table:a().Vl});return r}},491073:(e,t,o)=>{o.d(t,{Ay:()=>g,Nc:()=>u,Yr:()=>d});var n=o(296540),r=()=>o(401497),i=()=>o(100622),a=()=>o(284371),s=()=>o(963589),l=()=>o(760217),c=o(474848);function d(e,t){return`inset 0 0 0 ${t?"2px":"1px"} ${e}`}function u(e,t,o){"dark"!==o.mode&&t||"default"!==e&&"default_background"!==e||(e="gray");const n=i().Ld[e];return n?t?o.stroke[`${n}Primary`]:o.stroke[`${n}Secondary`]:o.text.primary}function p(e){const{color:t,selected:o,isHovered:n,overrideStyles:l}=e,p=(0,s().X)("updated_color_picker"),m=(0,i().Cg)(t),g=(0,r().IS)((e=>{const r=(0,i().k5)(t,e);if(!p)return{icon:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,textAlign:"center",fontSize:16,borderRadius:4,fontWeight:a().Wy.medium,boxShadow:e.innerBorderBoxShadow,...r,...l}};const s=u(t,o??!1,e);return{icon:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:26,height:26,textAlign:"center",padding:8,margin:0,fontSize:16,borderRadius:6,fontWeight:a().Wy.medium,boxShadow:d(s,o||n),...r,...l}}}),[t,o,p,n,l]);return(0,c.jsx)("div",{style:g.icon,"aria-hidden":"true",children:p&&m?"":"A"})}function m(e,t){const i=(0,o(484714).Y0)(),[a,s]=(0,n.useState)(!1),{color:d,overrideDisplayName:m,right:g,shortcuts:f,selected:v,shouldShowUpdatedColorPicker:h,desktopTitleStyle:_,iconStyle:b,itemMarginLeft:y,itemMarginRight:S,desktopIconStyle:w,rightStyle:k,selectedStyle:I}=e,A=m||o(972435).A.formatMessage((0,o(27178).qo)(d)),x=!i.isMobile&&f&&f[0],C=(0,r().IS)((e=>{if(!h)return{selected:{width:16,padding:"1px 1px",...I},shortcut:{color:e.lightTextColor,fontSize:12,whiteSpace:"nowrap"},tooltipStyle:{},desktopStyleIcon:{},buttonStyle:{},menuItemStyle:{},disableButtonStyleHoverOrPressed:{}};return{selected:{width:14,height:14,position:"absolute",top:-3,right:-4,borderRadius:"50%",borderStyle:"solid",borderWidth:1,color:u(d,v??!1,e),background:e.popoverBackground,borderColor:e.popoverBackground,...I},tooltipStyle:{display:"inline-block",width:30,padding:0,lineHeight:1},desktopStyleIcon:{position:"absolute"},buttonStyle:{display:"inline-block",width:"100%",height:"100%",margin:0,padding:2,position:"relative"},menuItemStyle:{margin:0,padding:0,gap:0,minHeight:26},disableButtonStyleHoverOrPressed:{background:"transparent"},shortcut:{}}}),[d,v,h,I]),T=(0,n.useCallback)((()=>(0,c.jsx)(p,{color:d,selected:v,isHovered:a,overrideStyles:b})),[d,a,v,b]);return h?(0,c.jsx)(o(859428).A,{renderTooltip:()=>(0,c.jsx)("div",{children:A}),render:o=>(0,c.jsx)("div",{style:{...C.tooltipStyle},...o,onMouseEnter:e=>{var t;s(!0),null===(t=o.onMouseEnter)||void 0===t||t.call(o,e)},onMouseLeave:e=>{var t;s(!1),null===(t=o.onMouseLeave)||void 0===t||t.call(o,e)},children:(0,c.jsx)(l().A,{...e,ref:t,icon:T(),style:C.menuItemStyle,itemMarginLeft:y,itemMarginRight:S,hoveredStyle:C.disableButtonStyleHoverOrPressed,pressedStyle:C.disableButtonStyleHoverOrPressed,desktopIconStyle:w||C.desktopStyleIcon,right:g,buttonStyle:C.buttonStyle,desktopTitleStyle:_,rightStyle:k})})}):(0,c.jsx)(l().A,{...e,ref:t,title:A,icon:T(),dontShrinkRight:!0,right:g||x&&(0,c.jsx)(o(35392).A,{name:x,style:C.shortcut})||v&&(0,c.jsx)("div",{style:C.selected,children:(0,o(413267).b)()}),itemMarginLeft:y,itemMarginRight:S,desktopIconStyle:w,desktopTitleStyle:_,rightStyle:k})}const g=n.forwardRef(m)},492414:(e,t,o)=>{o.d(t,{Ay:()=>S,Ef:()=>y,J8:()=>_,QN:()=>b});o(16280);var n=()=>o(921940),r=()=>o(142748),i=()=>o(868840),a=()=>o(861017),s=()=>o(939768),l=()=>o(780054),c=()=>o(562800),d=()=>o(578872),u=()=>o(431481),p=()=>o(351360),m=()=>o(712505),g=()=>o(638146),f=()=>o(108944),v=()=>o(836251);function h(e){let t,o,n;const{store:i}=e,a=(i.getSpaceId()&&i.getSpaceStore())??p().default.state.currentSpaceStore,s=(0,f().E)(i),m=(0,r().ot)(s),g=(0,v().w6)(i.environment);return m&&(e.preferPublicLink||g)?((e.fullyQualified||e.preferPublicLink&&!g||d().Nt(i))&&(o=c().QN(i)),e.disableSlug||(n=function(e){const t=d().LC(e);if((null==t?void 0:t.public_home_page)===e.id)return"";return e.getSlug()}(i),n&&u().A.setBlockIdForSlug(n,i.id))):(t=null==a?void 0:a.getEditDomain(),e.fullyQualified&&(o=l().A.domainBaseUrl)),{spaceDomain:t,baseUrl:o,slug:n}}function _(e){var t,o;const{store:r,collectionViewId:s,showMoveTo:l,saveParent:c,duplicate:d,pageVisitSource:u,queryId:v,embedded:_}=e;let b;if(s)b=s;else if(r&&r.isCollectionView()){const e=(0,g().cf)({userId:r.environment.currentUser.id,viewBlockId:r.id});if(e)b=e;else{const e=r.getCollectionViewsStore().getValue();e&&(b=e[0])}}const{spaceDomain:y,baseUrl:S,slug:w}=h({fullyQualified:!0,...e});let k=r,I=e.scrollToBlockId;if(r.isReady()&&!r.isNavigableBlock()){const e=(0,f().Nq)(r);e&&(k=e,I=r.id)}const A=p().default.state.mainEditorCurrentBlockStore;let x,C,T;k.canRead()?A&&e.openInSidePeek?(x=A,C=k.id,T=(0,m().getUrlParamFromPeekMode)(i().A)):A&&e.openInCenterPeek?(x=A,C=k.id,T=(0,m().getUrlParamFromPeekMode)(i().O)):(x=k,C=e.peekViewBlockId,T=e.peekMode):(x=k,C=e.peekViewBlockId,T=e.peekMode);const M=null===(t=e.demoSettingsStore)||void 0===t||null===(o=t.isActiveDemo)||void 0===o?void 0:o.call(t);return(0,n().A)({pageId:x.id,pageModel:x.getModel(),pageVisitSource:u,queryId:v,scrollToBlockId:I,peekViewBlockId:C,peekMode:T,workflowViewType:e.workflowViewType,workflowViewKey:e.workflowViewKey,workflowStepId:e.workflowStepId,chatThreadId:e.chatThreadId,collectionViewId:b,discussionId:e.discussionId,spaceDomain:y,baseUrl:S,showMoveTo:l,saveParent:c,duplicate:d,templateGalleryItem:e.templateGalleryItem,projectManagementLaunch:e.projectManagementLaunch,demoWorkspaceMode:M,slug:w,embedded:void 0===_?(0,a().bh)(r.environment.RouterStore.state.route):_})}function b(e){let t;const o=p().default.state.mainEditorCurrentBlockStore,n=null==o?void 0:o.getRecordStore(o,e);if(n){const{baseUrl:e,spaceDomain:o}=h({store:n,fullyQualified:!0});e&&(t=(0,s().hd)(e,o||""))}return t}function y(e){const{environment:t,updates:o}=e,n=o.store??p().default.state.mainEditorCurrentBlockStore;if(!n)throw new Error("No store provided and no current block store is found in AppStore");return _({...function(e){const t={pageVisitSource:void 0};switch(e.name){case"page":const o=e;return{...o,...t,disableSlug:!o.slug};case"chat":case"aiInferenceTranscript":case"home":case"posts":case"team":case"marketplace":case"gallery":return{...e,...t};default:return t}}(t.RouterStore.state.route),...o,store:n})}const S=_},492696:(e,t,o)=>{o.d(t,{E:()=>r,c:()=>n});const n="calloutBlockIcon",r="calloutBlockBackground"},493208:(e,t,o)=>{o.d(t,{Cm:()=>f,Su:()=>v,au:()=>m,e:()=>h,g8:()=>g,gV:()=>p,jj:()=>_,x9:()=>b});o(898992),o(354520),o(672577),o(581454);var n=()=>o(612740),r=()=>o(561565),i=()=>o(19916),a=()=>o(506391),s=()=>o(534177),l=()=>o(351360),c=()=>o(508496),d=()=>o(53137),u=()=>o(276282);function p(e){if(e.isCollectionView()){var t,o;if(null===(t=e.getCollectionStore())||void 0===t||!t.isSyncedCollection())return;return null===(o=e.getCollectionStore())||void 0===o?void 0:o.getFormat()}return e.getFormat()}function m(e,t){const o=d().A.state;if(!e||!o.loaded)return[];const n=(0,a().$B)({url:e,integrations:d().A.integrations.state,currentSpaceId:t});return"success"!==n.type?[]:o.bots.filter((e=>e.integration_id===n.integration.id))}function g(e,t){if(!e)return;const o=(0,a().$B)({url:e,integrations:d().A.integrations.state,currentSpaceId:t});return"success"===o.type?o:void 0}function f(e){const{store:t,isInDarkMode:o}=e,r=p(t);if(null!=r&&r.is_placeholder||null!=r&&r.error){const e=d().A.integrations.state.find((e=>{let{id:t}=e;return r.integration_id===t}));if(e){const t=d().A.bots.state.filter((t=>t.integration_id===e.id)).map((e=>{let{id:t}=e;return t})),{icon:s,dark_icon:c,accent_color:u,accent_icon:p}=e.info,m=o&&c?c:s;if(!m||!u||!p)return;const g=r.original_url;let f;if(g){var i;const t=(0,a().$B)({url:g,integrations:[e],currentSpaceId:null===(i=l().default.state.currentSpaceStore)||void 0===i?void 0:i.id});"success"===t.type&&(f=t.pattern)}return{type:null!=r&&r.is_placeholder?"placeholder":"error",userHasBotForIntegration:t.length>0,renderConfig:{headerAttributes:[{formatter:n().MC.placeholder,attribute:{id:"title",name:"Title",type:"inline",values:[e.name],format:{type:"title"}}}]},action:g&&!f?"error":void 0,updating:!1,originalUrl:g,pattern:f,integration:{id:e.id,icon:m,name:e.name,accentColor:u,accentIcon:p},botIds:t}}}return v({...e,getRenderFn:e=>e.block})}function v(e){var t;const{store:o,isInDarkMode:n,canEdit:i,currentUserId:c,showAction:d,getRenderFn:f}=e,v=p(o);if(!v||v.is_placeholder)return;if(void 0===v.external_object_id&&void 0!==v.uri)return;const h=v.original_url||v.uri;if(!o.isDefined())return;const _=g(h,o.getSpaceId()??(null===(t=l().default.state.currentSpaceStore)||void 0===t?void 0:t.id));if(!h||!_)return;const b=m(h,o.getSpaceId()),y=b.length>0,S=o.getExternalObjectSubInstanceStores(),w=S.map((e=>e.getFormat())).filter(s().O9);if(w.length!==S.length)return;const{integration:k,pattern:I}=_,{icon:A,dark_icon:x,accent_color:C,accent_icon:T}=k.info,M=n&&x?x:A;if(!M||!C||!T)return;const P=(0,r().e)(I.name),B=(0,a().WS)({url:h,integration:k}),R=f(P)({integrationIcon:M,root:v,relations:w,parsedAttributes:B});if(!R)return;const E=u().A.state.updatingUrls.has(h);let D;var N;o.isCollectionView()?D=null===(N=o.getCollectionStore())||void 0===N||null===(N=N.getFormat().error)||void 0===N?void 0:N.status_code:D=o.getFormatStore().getKeyStore("error").getKeyStore("status_code").getValue();const L=Date.now(),F=Boolean(o.getCreatedById()!==c&&o.getCreatedTime()&&L-o.getCreatedTime()<6e4);let U;return!E&&i&&c&&(d?U=d:v.error?U="error":(null==v||!v.stale)&&v.attributes||F||(U=y?"update":"authenticate")),{type:"active",renderConfig:R,action:U,updating:E,status_code:D,originalUrl:h,integration:{id:k.id,icon:M,name:k.name,accentColor:C,accentIcon:T},pattern:I,userHasBotForIntegration:y,botIds:b.map((e=>{let{id:t}=e;return t}))}}function h(e,t){if(!t)return e;const o=g(e,t);return"success"!==(null==o?void 0:o.type)?e:(0,i().y)({url:e,integration:o.integration,pattern:o.pattern})}function _(){return"on"===c().default.getEligibleGroup({experimentId:"link_preview_resizing_api",defaultGroup:"control"})}function b(e){const t=c().default.checkGate({gateName:"use_eap_secureexternalpreview"});return e.includes("eap/proxy/files")&&t}},493260:(e,t,o)=>{o.d(t,{F:()=>i,v:()=>r});const n=new Map;function r(e){return n.get(e)}function i(e,t){n.set(e,t)}},494043:(e,t,o)=>{o.d(t,{BN:()=>p,O3:()=>c,PQ:()=>m,Yt:()=>l,i_:()=>d,pL:()=>s,qj:()=>g,x_:()=>u});var n=()=>o(700500),r=()=>o(324089),i=()=>o(502438),a=()=>o(468484);function s(e){return Boolean(n().B$[e])}function l(e,t){return Boolean("toggle"===e||n().kC[e]&&(null==t?void 0:t.toggleable))}function c(e){return Boolean(n().kC[e])}function d(e){return n().B$[e]}function u(e){return n().kC[e]}function p(e){return"toggle"===e.getType()||m(e)}function m(e){const t=e.getType(),o=e.getFormat();return Boolean(void 0!==t&&(0,n().v_)(t,o))}function g(e,t,o){let n;n=i().default.state.stores.includes(t)?i().default.state.stores:[t];const s=!(a().A.isOpen(t.id)&&!o);for(const i of n)r().xT({blockId:i.id,state:s,currentUserId:e.currentUser.id})}},494167:(e,t,o)=>{o.d(t,{n:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("helpButtonGuide",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 2.77344C7.39844 2.0625 6.05859 1.42676 4.48633 1.42676C2.3877 1.42676 0.692383 2.51367 0.241211 3.5459V13.8066C0.241211 14.4766 0.678711 14.7363 1.16406 14.7363C1.52637 14.7363 1.73145 14.627 1.96387 14.4561C2.42871 14.0801 3.1875 13.6426 4.48633 13.6426C5.79199 13.6426 6.68066 14.0801 7.07715 14.415C7.2959 14.5791 7.54883 14.7363 8 14.7363C8.45117 14.7363 8.69727 14.5654 8.92285 14.415C9.34668 14.1006 10.208 13.6426 11.5137 13.6426C12.8125 13.6426 13.585 14.0869 14.0361 14.4561C14.2686 14.627 14.4736 14.7363 14.8359 14.7363C15.3213 14.7363 15.7588 14.4766 15.7588 13.8066V3.5459C15.3076 2.51367 13.6191 1.42676 11.5137 1.42676C9.94141 1.42676 8.6084 2.0625 8 2.77344ZM1.72461 4.01758C1.90918 3.56641 2.9209 2.80078 4.48633 2.80078C6.05176 2.80078 7.09766 3.57324 7.26172 4.01758V13.0342C6.55762 12.5283 5.55273 12.2549 4.48633 12.2549C3.41309 12.2549 2.41504 12.5283 1.72461 13.0547V4.01758ZM14.2754 4.01758V13.0547C13.585 12.5283 12.5869 12.2549 11.5137 12.2549C10.4473 12.2549 9.44238 12.5283 8.73828 13.0342V4.01758C8.90234 3.57324 9.94824 2.80078 11.5137 2.80078C13.0791 2.80078 14.0908 3.56641 14.2754 4.01758Z"})})},494237:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(959180))().A{}const r=new n},495074:(e,t,o)=>{o.d(t,{A:()=>u});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(452540),r=()=>o(592328),i=()=>o(220719),a=(o(16280),o(581454),()=>o(496603));class s extends r().A{constructor(e){super(),this.blocks=void 0,this.liveBlocks=void 0,this.rootBlock=void 0,this.detachedRootBlocks=void 0,this.blocks=new Map,this.liveBlocks=new Map,this.rootBlock=this.createBlock(e,"page"),this.detachedRootBlocks=new Map}hasBlock(e){return this.blocks.has(e)}getBlock(e){return(0,i().o9)(this.blocks.get(e))}createBlock(e,t){(0,i().MX)(!this.hasBlock(e.id),"Block already exists on page");const o=new l({blockStore:e,tracker:this,reference:t,onCreated:e=>{this.blocks.set(e.getId(),e)}});return o.hasLiveReference()&&this.addLiveBlock(o),o}removeBlock(e){(0,i().MX)(this.hasBlock(e),"Block must exist on page"),(0,i().MX)(!this.liveBlocks.has(e),"Should not be possible to remove a live block"),this.blocks.delete(e)}getLiveBlocks(){return[...this.liveBlocks.values()]}addLiveBlock(e){(0,i().MX)(!this.liveBlocks.has(e.getId()),"Block already added to live blocks"),this.liveBlocks.set(e.getId(),e),this.emit({type:"add_block",blockStore:e.blockStore})}removeLiveBlock(e){this.liveBlocks.delete(e.getId()),this.emit({type:"remove_block",blockId:e.getId()})}destroy(){for(const e of this.blocks.values())e.destroy();this.blocks.clear(),this.liveBlocks.clear(),this.detachedRootBlocks.clear()}getClosestPageAndTransclusionReferenceAncestorIds(e){const t=this.liveBlocks.get(e);return t?t.getClosestPageAndTransclusionReferenceAncestors().map((e=>e.getId())):[]}getPathToBlock(e){const t=this.liveBlocks.get(e);if(!t)return;const o=[];let n=t;for(;n;){o.unshift(n.getId());const e=n.liveReferences.values().next().value;if("page"===e)return o;e&&(n=e)}throw new Error("Block should have a page ancestor")}}class l{constructor(e){this.tracker=void 0,this.blockStore=void 0,this.liveReferences=void 0,this.detachedReferences=void 0,this.childBlocks=void 0,this.childBlocksList=void 0,this.contentStoreListener=void 0;const{blockStore:t,tracker:o,reference:n,onCreated:r}=e;this.tracker=o,this.blockStore=t,this.liveReferences=new Set,this.detachedReferences=new Set,"page"===n||n.hasLiveReference()?this.liveReferences.add(n):this.detachedReferences.add(n),this.childBlocks=new Map,this.childBlocksList=[],r(this),this.contentStoreListener=()=>this.handleContentStoreChange(),this.blockStore.getKeyStore("type").addListener(this.contentStoreListener),this.blockStore.getContentStore().addListener(this.contentStoreListener),this.blockStore.getFormatStore().getKeyStore("transclusion_reference_pointer").addListener(this.contentStoreListener),this.handleContentStoreChange()}handleContentStoreChange(){const e=[...this.childBlocks.keys()],t=new Map,n=this.blockStore.getType();if(this.liveReferences.has("page")||n&&!(0,o(700500).$I)(n))for(const i of(0,o(653609).W)(this.blockStore))t.set(i.id,i);const r=[...t.keys()],s=a().R9(r,e),l=a().R9(e,r);for(const o of s)if(this.tracker.hasBlock(o)){const e=this.tracker.getBlock(o);e.addReference(this),this.childBlocks.set(o,e)}else{const e=this.tracker.createBlock((0,i().o9)(t.get(o)),this);this.childBlocks.set(o,e)}for(const o of l){const e=(0,i().o9)(this.childBlocks.get(o));this.childBlocks.delete(o),e.removeReference(this)}this.childBlocksList=[...t.keys()].map((e=>(0,i().o9)(this.childBlocks.get(e)))),this.tracker.emit({type:"content_store_change"})}getId(){return this.blockStore.id}hasLiveReference(){return this.liveReferences.size>0}addReference(e){e.hasLiveReference()?this.addLiveReference(e):this.addDetachedReference(e)}addLiveReference(e){if((0,i().MX)(!this.liveReferences.has(e),"Reference already exists for block"),this.liveReferences.add(e),1===this.liveReferences.size){this.tracker.addLiveBlock(this);for(const e of this.childBlocks.values())e.updateReference(this)}}addDetachedReference(e){this.detachedReferences.add(e)}removeReference(e){e.hasLiveReference()?this.removeLiveReference(e):this.removeDetachedReference(e)}removeLiveReference(e){if(this.liveReferences.delete(e),this.detachedReferences.add("detached"),this.tracker.detachedRootBlocks.set(this.getId(),this),0===this.liveReferences.size){this.tracker.removeLiveBlock(this);for(const e of this.childBlocks.values())e.updateReference(this)}return this}removeDetachedReference(e){if(this.detachedReferences.delete(e),0===this.liveReferences.size&&0===this.detachedReferences.size){for(const[e,t]of this.childBlocks.entries())this.childBlocks.delete(e),t.removeReference(this);this.tracker.removeBlock(this.getId()),this.destroy()}}updateReference(e){const t=this.hasLiveReference();this.liveReferences.has(e)&&!e.hasLiveReference()?(this.liveReferences.delete(e),this.detachedReferences.add(e)):this.detachedReferences.has(e)&&e.hasLiveReference()&&(this.liveReferences.add(e),this.detachedReferences.delete(e));const o=this.hasLiveReference();if(t!==o){o?this.tracker.addLiveBlock(this):this.tracker.removeLiveBlock(this);for(const e of this.childBlocks.values())e.updateReference(this)}return this}getClosestPageAndTransclusionReferenceAncestors(){if(0===this.liveReferences.size)return[];if(this===this.tracker.rootBlock)return[this];const e=new Set,t=new Set,o=[this];for(;o.length>0;){const n=(0,i().o9)(o.shift());if(t.has(n))continue;const r=n.liveReferences;for(const t of r)"page"===t?e.add(n):"transclusion_reference"===t.blockStore.getType()?e.add(t):o.push(t);t.add(n)}return(0,i().MX)(e.size>0,"Block must have one or more ancestors"),[...e]}destroy(){this.contentStoreListener&&(this.blockStore.getKeyStore("type").removeListener(this.contentStoreListener),this.blockStore.getContentStore().removeListener(this.contentStoreListener),this.blockStore.getFormatStore().getKeyStore("transclusion_reference_pointer").removeListener(this.contentStoreListener),this.contentStoreListener=void 0)}}class c{constructor(e){this.blockTextInstanceMap=void 0,this.textInstanceBlockMap=void 0,this.blockTextSliceTreeListenerMap=void 0,this.pageBlockTracker=void 0,this.pageBlockTrackerListener=void 0,this.blockTextInstanceMap=new Map,this.textInstanceBlockMap=new Map,this.blockTextSliceTreeListenerMap=new Map,this.pageBlockTracker=e,this.pageBlockTrackerListener=e=>this.handlePageEvent(e),this.pageBlockTracker.addListener(this.pageBlockTrackerListener);for(const{blockStore:t}of e.getLiveBlocks())this.addBlock(t)}handlePageEvent(e){const t=e.type;switch(t){case"add_block":this.addBlock(e.blockStore);break;case"remove_block":this.removeBlock(e.blockId);break;case"content_store_change":break;default:(0,o(534177).HB)(t)}}addBlock(e){const t=e.id;if(this.blockTextSliceTreeListenerMap.has(t))return;const o=()=>{this.handleTextSliceTreeChange(t,e.getBlockTitleTextSliceTree())};e.getSerializedTextSliceTreeStore().addListener(o),this.blockTextSliceTreeListenerMap.set(t,{blockStore:e,textSliceTreeListener:o}),this.handleTextSliceTreeChange(t,e.getBlockTitleTextSliceTree())}removeBlock(e){this.removeMappingForBlock(e);const{blockStore:t,textSliceTreeListener:o}=(0,i().o9)(this.blockTextSliceTreeListenerMap.get(e));t.getSerializedTextSliceTreeStore().removeListener(o),this.blockTextSliceTreeListenerMap.delete(e)}handleTextSliceTreeChange(e,t){if(this.removeMappingForBlock(e),t)for(const o of t.getTextInstanceIds())this.addBlockTextInstanceMapping(e,o)}removeMappingForBlock(e){const t=this.blockTextInstanceMap.get(e);if(t)for(const o of t)this.removeBlockTextInstanceMapping(e,o)}addBlockTextInstanceMapping(e,t){const o=this.blockTextInstanceMap.get(e)??new Set;o.add(t),this.blockTextInstanceMap.set(e,o);const n=this.textInstanceBlockMap.get(t)??new Set;n.add(e),this.textInstanceBlockMap.set(t,n)}removeBlockTextInstanceMapping(e,t){const o=(0,i().o9)(this.blockTextInstanceMap.get(e));o.delete(t),0===o.size&&this.blockTextInstanceMap.delete(e);const n=(0,i().o9)(this.textInstanceBlockMap.get(t));n.delete(e),0===n.size&&this.textInstanceBlockMap.delete(t)}getTextInstanceIdsForBlock(e){return this.blockTextInstanceMap.has(e)?[...(0,i().o9)(this.blockTextInstanceMap.get(e))]:[]}getBlockIdsForTextInstance(e){return this.textInstanceBlockMap.has(e)?[...(0,i().o9)(this.textInstanceBlockMap.get(e))]:[]}getBlockIdForTextInstanceItemId(e,t,o){const n=this.getBlockIdsForTextInstance(e);for(const r of n){const n=(0,i().o9)(this.blockTextSliceTreeListenerMap.get(r)).blockStore;if((0,i().o9)(n.getBlockTitleTextSliceTree()).findTextSliceTreeContainingItemWithId(e,t,o))return n.id}}destroy(){for(const e of this.blockTextSliceTreeListenerMap.keys())this.removeBlock(e);this.pageBlockTracker.removeListener(this.pageBlockTrackerListener)}}class d extends r().A{constructor(){super(...arguments),this.pageInfoMap=new(o(795727).A)({getKey:e=>(0,n().jV)(e)})}trackPage(e){if(this.pageInfoMap.has(e.pointer))return void(0,i().o9)(this.pageInfoMap.get(e.pointer)).pageStores.add(e);const t=new s(e),o=new c(t),r=new Set([e]);this.pageInfoMap.set(e.pointer,{pageBlockTracker:t,pageTextInstanceTracker:o,pageStores:r}),this.emit({type:"track_page",combinedId:(0,n().jV)(e.pointer)})}untrackPage(e){const t=e.pointer,o=(0,i().o9)(this.pageInfoMap.get(t));var r;(o.pageStores.delete(e),0===o.pageStores.size)&&(o.pageBlockTracker.destroy(),null===(r=o.pageTextInstanceTracker)||void 0===r||r.destroy(),this.pageInfoMap.delete(t));this.emit({type:"untrack_page",combinedId:(0,n().jV)(e.pointer)})}clear(){const e=[];for(const[o,r]of this.pageInfoMap){var t;r.pageBlockTracker.destroy(),null===(t=r.pageTextInstanceTracker)||void 0===t||t.destroy(),this.pageInfoMap.delete(o),e.push({type:"untrack_page",combinedId:(0,n().jV)(o)})}this.emit(...e)}getPageStoreForBlockStore(e){for(const[t,o]of this.pageInfoMap)for(const n of o.pageStores)if(n.uiLocation.contains(e.uiLocation))return n;for(const[t,o]of this.pageInfoMap)for(const n of o.pageStores){const t=this.pageInfoMap.get(n.pointer);if(null!=t&&t.pageBlockTracker&&t.pageBlockTracker.hasBlock(e.pointer.id))return n}}getPageBlockTrackerForPage(e){var t;return null===(t=this.pageInfoMap.get(e))||void 0===t?void 0:t.pageBlockTracker}getPageTextInstanceTrackerForPage(e){var t;return null===(t=this.pageInfoMap.get(e))||void 0===t?void 0:t.pageTextInstanceTracker}}const u=new d},495249:(e,t,o)=>{o.d(t,{Dz:()=>r,Nq:()=>a,Tl:()=>i,ud:()=>n});o(944114);function n(e){const{ids:t,table:o,userStore:n}=e,i=[];for(const r of t){const e=n.getRecordModel({id:r,table:o});e&&i.push(e)}return r(i)}function r(e){return e.slice().sort(((e,t)=>t.created_at-e.created_at))}const i=["all","internal","public"],a={[o(824862).GP]:"internal",[o(332393).Li]:"public"}},495262:(e,t,o)=>{o.d(t,{BB:()=>I,Bl:()=>T,Fn:()=>y,JM:()=>x,ZS:()=>w,fH:()=>A,li:()=>C,tN:()=>S,xO:()=>k,xy:()=>M});o(18107),o(944114),o(967357),o(898992),o(354520),o(672577),o(737550);var n=()=>o(933449),r=()=>o(134025),i=()=>o(696706),a=()=>o(179034),s=()=>o(439180),l=()=>o(220719),c=()=>o(496603),d=()=>o(534177),u=()=>o(436725),p=()=>o(886564),m=()=>o(630116),g=()=>o(733539),f=()=>o(502438),v=()=>o(24157),h=()=>o(551864),_=()=>o(496879),b=()=>o(317909);function y(e){const t=g().default.state,{undoStack:o,invertedTextOperationIdMapper:n}=t,r=e.currentTime??Date.now(),i=e.transaction.getUserActionForAnalyticsPurposesOnly()??"unknown";if("string"==typeof e.undoCheckpoint){const t=o.find((t=>t.namedRevisionId===e.undoCheckpoint));t?(t.transactions.push(e.transaction),t.userActions.push(i)):o.push({userActions:[i],transactions:[e.transaction],timestamp:r,namedRevisionId:e.undoCheckpoint,undoRedoCount:0})}else{const t=o.at(-1);!e.undoCheckpoint&&t&&!t.namedRevisionId&&r-t.timestamp<=g().groupIntervalMs&&0===t.undoRedoCount&&t.transactions[0].isLocal===e.transaction.isLocal&&t.transactions[0].operations.some(s().ph)===e.transaction.operations.some(s().ph)?(t.transactions.push(e.transaction),t.userActions.push(i)):o.push({userActions:[i],transactions:[e.transaction],timestamp:r,undoRedoCount:0})}g().default.setState({undoStack:o,redoStack:[],invertedTextOperationIdMapper:n}),g().default.emit()}function S(e){const{environment:t,preventSelectText:o,callback:n}=e,r=g().default.state,{undoStack:i,redoStack:a}=E(r),s=i.pop();if(!s)return void(null==n||n());if(s.namedRevisionId)return void x({environment:t,namedRevisionId:s.namedRevisionId,callback:n});const{invertedTextOperationIdMapper:l}=r,c=B({environment:t,revision:s,preventSelectText:o,invertedTextOperationIdMapper:l,callback:n});a.push(c),g().default.setState({undoStack:i,redoStack:a,invertedTextOperationIdMapper:l})}function w(e){const{environment:t,preventSelectText:o,callback:n}=e,r=g().default.state,{undoStack:i,redoStack:a}=E(r),s=a.pop();if(!s)return;const{invertedTextOperationIdMapper:l}=r,c=B({environment:t,revision:s,preventSelectText:o,invertedTextOperationIdMapper:l,callback:n});i.push(c),g().default.setState({undoStack:i,redoStack:a,invertedTextOperationIdMapper:l})}function k(){g().default.reset()}function I(){return Boolean(C())}function A(){return Boolean(T())}function x(e){const{environment:t,namedRevisionId:o,skipDefaultPostPerformValidationChecks:n,callback:r}=e,i=g().default.state,{undoStack:a,redoStack:s}=E(i),l=a.findIndex((e=>e.namedRevisionId===o));if(l<0)return;const c=a.splice(l,1)[0],{invertedTextOperationIdMapper:d}=i,u=B({environment:t,revision:c,invertedTextOperationIdMapper:d,skipDefaultPostPerformValidationChecks:n,callback:r});s.push(u),g().default.setState({undoStack:a,redoStack:s,invertedTextOperationIdMapper:d})}function C(){const e=g().default.state.undoStack.at(-1);return e?P(e):void 0}function T(){const e=g().default.state.redoStack.at(-1);return e?P(e):void 0}function M(e){return g().default.state.undoStack.some((t=>t.namedRevisionId===e))}function P(e){return{getUserActions:()=>e.userActions.slice(),getFirstStore(){var t;return null==e||null===(t=e.transactions)||void 0===t||null===(t=t[0].stores)||void 0===t?void 0:t[0]}}}function B(e){const{environment:t,revision:o,invertedTextOperationIdMapper:n,preventSelectText:s,skipDefaultPostPerformValidationChecks:l,callback:m}=e;let{transactions:g}=o;p().A.isDebuggingEnabled()&&console.log("Undoing/redoing transactions with user actions",o.userActions.join(","));const{performResult:h,serverCommitResult:y}=b().createAndCommit({userAction:"revisionActions.performUndoRedoRevisionTransaction",environment:t,canUndo:!1,isUndoTransaction:!0,skipDefaultPostPerformValidationChecks:l,perform:e=>{g=c().o8(g),g.reverse();for(const l of g){const p=c().o8(l.invertedOperations);p.reverse(),e.copyDebugTagsFrom(l);for(const s of p)if((0,_().E)(s))R({environment:t,invertedOperation:s,invertedTextOperationIdMapper:n,transaction:l,newTransaction:e});else if((0,r().$Y)(s)||(0,r().mP)(s)){var o;const n=l.stores.find((e=>(0,i().Z2)(e.pointer,s.pointer)));if(!n)continue;if(n.table===a().ev&&!n.inMemoryRecordCache.isMockTextStore&&null!==(o=n.getAncestorBlockStoreAtRootPath())&&void 0!==o&&o.useCrdt()){(0,u().e)({environment:t,operation:s,transaction:e,inMemoryRecordCache:n.inMemoryRecordCache});continue}b().applyOperation({transaction:e,store:n,operation:s})}else(0,d().HB)(s);l.beforeSelection&&f().default.setState({...f().default.state,...l.beforeSelection}),l.beforeTextSelection&&!s&&v().default.setState(l.beforeTextSelection)}return e}});y.then(m);return{...o,transactions:[h],undoRedoCount:o.undoRedoCount+1}}function R(e){const{environment:t,invertedOperation:o,invertedTextOperationIdMapper:r,transaction:a,newTransaction:s}=e,c=a.stores.filter((e=>(0,i().Z2)(e.pointer,o.pointer)&&e instanceof m().Bv)),u=c.find((e=>Boolean(e.uiLocation.uiParent)))??c.at(0);if(!u)return;const g=s.operations.length,f=r.getInvertedTextOperationWithMaybeRemappedIds(o),v=(0,h().e)({environment:t,store:u,transaction:s,operation:f});if("success_non_crdt"===v)return;"success"!==v&&p().A.logInvertedTextOperationError({transaction:a,invertedOperation:o,maybeRemappedInvertedOperation:f,errorCode:v});const _=s.operations.length;if("invertedDeleteText"===f.command&&_>g){const e=(0,n().o9)(s.operations.slice(g,_).find((e=>"insertText"===e.command)),"New operations should contain an InsertTextOperation");r.remapIdsForReinsertedText(f,(0,l().Wg)(e,(0,d().u0)((e=>"insertText"===e.command?{true:e}:{false:e})),`Expected "insertText" operation, got "${e.command}"`))}}function E(e){const{undoStack:t,redoStack:o}=e;return{undoStack:t.slice(),redoStack:o.slice()}}},496067:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},496414:(e,t,o)=>{o.d(t,{V:()=>a,m:()=>i});var n=()=>o(972435),r=()=>o(991699);function i(e){let{message:t,interpolatedValues:o,targetRecordId:i}=e;r().A.setState({open:!0,message:n().A.formatMessage(t,o),targetRecordId:i})}function a(){r().A.setState({open:!1,targetRecordId:void 0})}},496879:(e,t,o)=>{o.d(t,{E:()=>i,c:()=>a});var n=()=>o(534177);const r={invertedInsertText:!0,invertedDeleteText:!0,invertedMoveTextSlice:!0,invertedAddAnnotation:!0,invertedRemoveAnnotation:!0};function i(e){return Boolean(r[e.command])}function a(e){const{pointer:t,invertedCrdtOperation:o,previousTextValue:r}=e,i=o.type;switch(i){case"invertedInsertText":return{command:"invertedInsertText",pointer:t,path:[],args:{...o,previousTextValue:r}};case"invertedDeleteText":return{command:"invertedDeleteText",pointer:t,path:[],args:{...o,previousTextValue:r}};case"invertedAddAnnotation":return{command:"invertedAddAnnotation",pointer:t,path:[],args:{...o,previousTextValue:r}};case"invertedRemoveAnnotation":return{command:"invertedRemoveAnnotation",pointer:t,path:[],args:{...o,previousTextValue:r}};default:(0,n().HB)(i)}}},496889:(e,t,o)=>{o.d(t,{A:()=>p,X:()=>g});o(296540);var n=()=>o(401497),r=()=>o(568625),i=()=>o(901265),a=()=>o(778417),s=()=>o(38337),l=()=>o(553965),c=()=>o(502438),d=()=>o(704152),u=o(474848);const p=function(e){let{tooltipContent:t,fadeIn:n,style:r,hoveredStyle:s,store:l,onClick:d,extraAnalyticsData:p,hideFilterActionsInput:m,actionSectionGroupKey:f,onFocus:v,onBlur:h,iconStyle:_,isFromCollectionView:b}=e;const y=(0,o(484714).v3)();function S(e){!function(e,t,o,n,r,s,l,d){a().Lt({environment:o,store:t}),i().it({environment:o,stores:c().default.state.stores,left:e.clientX,top:e.clientY,showInput:!s,actionSectionGroupKey:Boolean(d)?"block_in_collection":l||"default",analyticsFrom:"block_more_menu",optionalAnalyticsProperties:{isFromBulkActionsToolbar:r?r.isFromBulkActionsToolbar:void 0}}),null==n||n()}(e,l,y,d,p,m,f,b)}return t?(0,u.jsx)(o(859428).A,{renderTooltip:()=>t,delayThreshold:300,render:e=>(0,u.jsx)(g,{environment:y,tooltipEvents:e,fadeIn:n,style:r,hoveredStyle:s,onClick:S,onFocus:v,onBlur:h,iconStyle:_})}):(0,u.jsx)(g,{environment:y,fadeIn:n,style:r,hoveredStyle:s,onClick:S,onFocus:v,onBlur:h,iconStyle:_})};function m(e,t,o){const{device:n}=e;return{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:26,height:26,fill:n.isMobile?t.lightIconColor:t.mediumIconColor,transition:"opacity 200ms ease-in",...o}}function g(e){let{environment:t,tooltipEvents:o={},fadeIn:i,style:a,hoveredStyle:c,onClick:p,onFocus:g,onBlur:f,iconStyle:v,ariaLabel:h}=e;const _=(0,n().DP)();return(0,u.jsx)(d().A,{className:i?s().qGl:void 0,style:m(t,_,a),hoveredStyle:c,onClick:p,ariaLabel:h,...(0,l().A)(o,{onFocus:g,onBlur:f}),children:(0,r().L)({width:16,height:16,...v})})}},497259:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1,openAnimationCompleted:!0,closeAnimationCompleted:!0}}}const r=n},498719:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{selectedQueryResult:!1,numKeystrokes:0,numServerRequests:0,numLocalRequests:0,hadMetaClick:!1,firstKeyStrokeTimeMs:void 0}}}const r=new n},499446:(e,t,o)=>{o.d(t,{Gd:()=>h,R6:()=>v,WQ:()=>g,zY:()=>f});o(898992),o(354520),o(581454),o(296540);var n=()=>o(854150),r=()=>o(959013),i=()=>o(496603),a=()=>o(534177),s=()=>o(901389),l=()=>o(706024),c=()=>o(351360),d=()=>o(21497),u=()=>o(630116),p=()=>o(848237),m=o(474848);function g(e){let{data:t,sortColumn:o,sortAscending:r}=e;const s=[r?"asc":"desc"],l=[r?"desc":"asc"];switch(o){case d().o6:return i().My(t,(e=>e.name),l);case d().p2:return i().My(t,(e=>n().nJ.indexOf(e.accessLevel)),s);case d().MQ:return i().My(t,(e=>e.lastUpdated),s);default:(0,a().HB)(o)}}async function f(e){let{newSettingValue:t,environment:o,workspaceSecuritySettings:n,spaceStore:i}=e;const a="allowTeamCreation"===t?(0,m.jsx)(r().sA,{id:"manageTeamsHelpers.confirmChangeSecuritySetting.allowTeamCreation",defaultMessage:"Allow all members of this workspace to create teamspaces?"}):(0,m.jsx)(r().sA,{id:"manageTeamsHelpers.confirmChangeSecuritySetting.workspaceOwners.disableTeamCreation",defaultMessage:"Limit teamspace creation to only workspace owners?"}),{accept:c}=await s().Gh({message:a});return!!c&&(l().V(o,{securitySettingsState:{...n,disableTeamCreation:"disableTeamCreation"===t},spaceStore:i}),!0)}async function v(e){let{addedTeams:t,removedTeams:o,environment:n,spaceStore:r}=e;if(!r.isDefined())return!1;return await p().FE({addedStores:t.map((e=>{let{store:t}=e;return t})),removedStores:o.map((e=>{let{store:t}=e;return t})),environment:n,spaceStore:r,createNewTeamFlowId:void 0,from:"workspace_settings"})}function h(e){let{environment:t,teamIds:o,spaceStore:r}=e;const{currentSpaceStore:i,currentUserStore:s}=c().default.state,l=i||r;return l&&s?o.map((e=>{const o=u().h4.createChildStore(l,{table:n().yK,id:e,spaceId:l.id});if(o.canRead())return o;const r=i&&p().M8({environment:t,teamId:o.id,spaceStore:i,from:"manage_teams_table"});return null!=r&&r.canRead()?r:void 0})).filter(a().O9):[]}},499755:(e,t,o)=>{o.d(t,{S0:()=>r,e0:()=>a,gN:()=>i});var n=()=>o(970013);let r=function(e){return e.manual="manual",e.resultsAdvanced="results-advanced",e.yAscending="y-ascending",e.yDescending="y-descending",e.xAscending="x-ascending",e.xDescending="x-descending",e}({});function i(e){switch(null==e?void 0:e.type){case"manual":return r.manual;case"descending":return r.xDescending;default:return r.xAscending}}function a(e){return!(0,n().$L)(e)}},500472:(e,t,o)=>{o.d(t,{Dp:()=>m,KA:()=>l,Ow:()=>c,Zw:()=>d,m:()=>p,n_:()=>u});o(16280),o(581454);var n=()=>o(857639),r=()=>o(430476),i=()=>o(964085),a=()=>o(229833);const s="sqliteTransactionStorage";async function l(e,t){await i().F`
		INSERT OR REPLACE INTO transactions (
		    id,
		    user_id,
		    space_id,
		    operations,
		    timestamp,
			debug
		)
		VALUES (
		    ${t.id},
		    ${t.userId||null},
		    ${t.spaceId||null},
		    ${JSON.stringify(t.operations)},
		    ${t.timestamp},
			${t.debug?JSON.stringify(t.debug):null}
		)
	`.run(e)}function c(e){try{const t=JSON.parse(e);if(!Array.isArray(t))throw new Error(`JSON value is not an array: ${t}`);return t}catch(t){return n().log({from:s,level:"error",type:"safeParseArray",error:(0,a().n6)(t)}),[]}}async function d(e){return(await(0,r().qU)({connection:e,sql:"SELECT COUNT(*) AS count FROM transactions"}))[0].count}async function u(e,t){return(await(0,r().qU)({connection:e,sql:"SELECT COUNT(*) AS count FROM transactions WHERE user_id = ?",args:[t]}))[0].count}async function p(e){await i().F`DELETE FROM transactions`.run(e)}async function m(e,t){const[o]=await(0,r().G2)({connection:e,statements:[{sql:"SELECT * FROM transactions WHERE user_id = ?",args:[t],getData:!0},{sql:"DELETE FROM transactions WHERE user_id = ?",args:[t]}],queryName:"deleteTransactionsForUser"});return o.data.map((e=>e.id))}},501020:(e,t,o)=>{o.d(t,{v:()=>s,z:()=>a});const n={selectableContainer:void 0,closestSelectable:void 0},r="selectable",i=(0,o(446943).C)({modernContextDefaultValue:n,displayName:r,legacyContextKey:r}),a=i.context,s=i.Provider},501666:(e,t,o)=>{o.d(t,{BK:()=>f,GC:()=>b,ar:()=>h,d:()=>_,fi:()=>g,sp:()=>v});o(898992),o(672577);var n=()=>o(919709),r=()=>o(156988),i=()=>o(231722),a=()=>o(906537),s=()=>o(792002),l=()=>o(711319),c=()=>o(24157),d=()=>o(538527),u=()=>o(606952),p=()=>o(725614),m=()=>o(317909);function g(e){const t=c().default.state;if("editing"!==t.mode)return;const o="selectionFocus"===e.type?(0,i().$U)({store:e.store,selection:e.selection}):t.multiSelection,s=(0,i().H7)(o);if(!s)return;const{tokensInsideRange:d}=n().AI5(s.store.getValue(),o.start.index,o.end.index),u=d.find((e=>Boolean(n().So_(e)))),p=a().get();if(!p)return;const m=a().getRect(p);if(!m)return;const g=Boolean(u);let f="";if(!u){const e=n().k4p(d),t=n().ctx(e);t&&(f=t.href)}l().A.setState({open:!0,url:f,title:u&&(0,r().wE)(u)||"",type:"text",editingToken:u,savedTextSelectionState:{...t,multiSelection:o},selectionRect:m,focusLinkInput:!g&&e.focus,focusTitleInput:g&&e.focus,trapFocus:"focusOnly"===e.type})}function f(e){const{environment:t,transaction:o,url:n,title:r,editingToken:a,savedTextSelectionState:s}=e,l=(0,i().H7)(s.multiSelection);if(!l)return;a&&u().gw({environment:t,store:l.store,annotationKey:"a",selection:l.selection,transaction:o,updateSelection:!1});const c=["a",n];return d().Mw({environment:t,store:l.store,annotation:c,selection:l.selection,transaction:o}),p().setSelection({store:l.store,selection:{startIndex:l.selection.startIndex,endIndex:l.selection.endIndex}}),r?{editingToken:[r,[c]]}:void 0}function v(e){const t=l().A.state;if(!t.open)return;const{editingToken:o,savedTextSelectionState:n}=t;if(!o)return;const r=(0,i().H7)(n.multiSelection);r&&(m().createAndCommit({userAction:"linkAnnotationActions.unlinkSelection",environment:e,canUndo:!0,perform:t=>{u().gw({environment:e,store:r.store,annotationKey:"a",selection:r.selection,transaction:t,updateSelection:!1})}}),c().default.emit(),l().A.reset())}function h(e){const{environment:t,title:o,transaction:r,editingToken:a,savedTextSelectionState:s}=e;if(!o||!a)return;const l=(0,i().H7)(s.multiSelection);if(!l)return;const c=l.store;u().f0({environment:t,multiSelection:s.multiSelection,transaction:r});const d=l.selection.startIndex,m=d+o.length,g={startIndex:d,endIndex:m},f=["a",n().So_(a)],v=n().Ey_(o,[f]);return u().yr({environment:t,store:c,tokens:[v],index:d,transaction:r}),p().setSelection({store:c,selection:g}),{editingToken:[o,[f]],savedTextSelectionState:{...s,multiSelection:{start:{store:c,index:d},end:{store:c,index:m}}}}}function _(){l().A.setState({open:!1,type:"text"})}function b(){const e=l().A.state;if(!e.open)return!1;if(e.focusLinkInput||e.focusTitleInput)return!1;const t=c().default.state;if("editing"!==t.mode)return!0;const o=(0,i().H7)(t.multiSelection);if(!o)return!0;const{store:r,selection:a}=o;return(0,s().gE)(a)?!n().wuy(r.getValue(),a.startIndex,a.endIndex,n().Ifu.Link):!(0,i().OH)(t.multiSelection,e.savedTextSelectionState.multiSelection)}},502438:(e,t,o)=>{o.r(t),o.d(t,{SelectionPhase:()=>r,default:()=>a});o(898992),o(354520),o(672577),o(581454);var n=()=>o(712505);let r=function(e){return e[e.Selected=0]="Selected",e[e.Editing=1]="Editing",e}({});class i extends(()=>o(757695))().default{getInitialState(){return{stores:[],phase:r.Selected}}cloneState(){return{stores:[...this.state.stores],phase:this.state.phase}}getEditing(){if(this.state.phase===r.Editing)return this.state.stores[0]}isSelected(){return this.state.stores.length>0&&this.state.phase===r.Selected}getNodes(){return this.state.stores.map((e=>o(695625).T.findNodeFromStore(e)||void 0)).filter(o(534177).O9)}getCurrentRootStore(){var e,t;const n=null===(e=this.getCurrentDefaultContainer())||void 0===e?void 0:e.getProps().store;return n&&n instanceof o(630116).Bv?n:null===(t=this.getDefaultContainer())||void 0===t||null===(t=t.getProps())||void 0===t?void 0:t.store}getCurrentRecordCache(){const e=this.getCurrentRootStore();if(e)return e.inMemoryRecordCache}getDefaultContainerFromTarget(e){const t=e.closest(`.${o(38337).QHh}`);if(t)return o(696152).A.find((e=>{const o=e.getNode();return Boolean(o&&o===t)}))}getCurrentDefaultContainer(){const e=this.state.anchorContainer;return e||this.getDefaultContainer()}getDefaultContainer(){const e=this.state.defaultContainerStack;if(e&&e.length>0)return e[e.length-1]}isInPeekRenderer(){if(this.state.anchorContainer)return Boolean(this.state.anchorContainer.isPeekRenderer());if(!n().default.state.open)return!1;if(!this.state.anchor)return!0;const e=this.state.anchor.isPageBlock(),t=this.state.anchor===n().default.state.targetStore;return e&&t}}const a=new i},502626:(e,t,o)=>{o.d(t,{qZ:()=>R,fC:()=>b,wp:()=>E,bg:()=>x,B0:()=>A,K7:()=>I,Cv:()=>k,K0:()=>D,JG:()=>_,wT:()=>P,KD:()=>B,qr:()=>w,JM:()=>y,Dv:()=>C});o(16280);var n=()=>o(857639),r=()=>o(427704),i=()=>o(677338),a=()=>o(994310),s=()=>o(711059),l=()=>o(720665),c=()=>o(780054),d=()=>o(989423),u=()=>o(404482),p=()=>o(150193),m=()=>o(589994);var g=()=>o(934839),f=()=>o(901389),v=()=>o(705540),h=()=>o(755636);function _(e){var t;const{environment:o,url:r,version:a,versionCreatedTime:s}=e,{AppUpdateStore:l,device:c}=o;c.isElectron&&r.startsWith("https:")?n().log({level:"error",from:"appUpdateActions",type:"installAppJsUpdate",error:{message:"Attempting to refresh app js on desktop for an https url",stack:(new Error).stack},data:{url:r}}):(l.setState({electronUpdate:l.state.electronUpdate,appUpdate:void 0}),a&&w(a,s),b(a)||(o.mobileNative&&o.mobileNative.showSplashscreen(),(0,i().ED)(!0),null!==(t=v().electronApi)&&void 0!==t&&t.installAppJsUpdate?v().electronApi.installAppJsUpdate(r):r!==window.location.href?window.location.href=r:window.location.reload()))}function b(e){return(0,s().isEqualVersion)(e,A())}function y(e,t){if(!t)return!1;if("ready"!==t.state)return!1;if(m().transactionQueue.hasTasks())return!1;if(!e.currentUser.isLoggedIn())return!1;if(t.type===s().UpdateType.Silent){if(e.device.isMobileNative)return!1;const t=I(),o=168;if(t&&(Date.now()-t)/l().pT<o)return!1;n().log({level:"info",from:"appUpdateActions",type:"shouldUpdateOnNavigate",data:{lastKnownUpdateTime:t}})}return!0}const S="lastKnownAppJsVersion";function w(e,t){a().A.set(S,{version:e,time:t})}function k(){const e=a().A.get(S);if(e&&e.version)return e.version;{const e=(0,s().parseVersion)(c().A.version),t=c().A.lastUpdatedTime;return a().A.set(S,{version:e,time:t}),e}}function I(){const e=a().A.get(S);if(e&&e.time)return e.time}function A(){return(0,s().parseVersion)(c().A.version)}function x(){return c().A.lastUpdatedTime}function C(e,t,o){const n=t===s().UpdateType.Major?"major":t===s().UpdateType.Minor?"minor":"patch";(0,d().u4)({environment:e,event:{eventName:"client_app_updated",eventProperties:{type:n,intervention:o}}})}const T=336*l().pT,M=672*l().pT;function P(){const e=x();return(I()||Date.now())-e>T}function B(){const e=x();return(I()||Date.now())-e>M}const R=!1,E="electronUpdateReady2";function D(e){const{AppUpdateStore:t,device:o}=e;if(function(e){d().vd(e,"confirm_app_update")}(e),R){const t=(0,u().Nw)(r().JZ.releases);h().f({environment:e,url:t})}if(o.isElectron&&t.state.electronUpdate&&"ready"===t.state.electronUpdate.state){const e=v().getDesktopVersion();a().A.set(E,(0,s().formatVersion)(e)),v().installElectronUpdate()}else t.state.appUpdate&&"ready"===t.state.appUpdate.state?(_({environment:e,url:window.location.href,version:t.state.appUpdate.version,versionCreatedTime:t.state.appUpdate.versionCreatedTime}),f().zw(),g().Re({bannerStore:p().A})):(w((0,s().parseVersion)(c().A.version),c().A.lastUpdatedTime),f().zw(),g().Re({bannerStore:p().A}))}},502856:(e,t,o)=>{o.d(t,{D0:()=>D,MC:()=>N,SN:()=>E,xc:()=>P});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(581454),o(737550);var n=()=>o(496603),r=()=>o(763824),i=()=>o(534177),a=()=>o(67657),s=()=>o(289915),l=()=>o(970013),c=()=>o(713998),d=()=>o(455348),u=()=>o(835243),p=()=>o(247331),m=()=>o(236162),g=()=>o(792071),f=()=>o(577449),v=()=>o(400017),h=()=>o(212547),_=()=>o(388821),b=()=>o(56125),y=()=>o(696706),S=()=>o(54821),w=()=>o(179034),k=()=>o(519831),I=()=>o(559653);function A(e){return`${e.collectionPointer.spaceId}:${e.collectionPointer.id}:${e.property}`}async function x(e){let{record:t,dependencies:n,blockIdToAssociatedCollectionModelCache:r,getRecordModel:i,loadRecordModel:a,loadRecordModelForFormulas:s,userTimeZone:l,intl:d,formulaTimeoutMs:f,logFormulaStatsFn:v,logFormulaTimeoutFn:h,checkCancellation:_,dependencyCache:b,resultCache:A,regExpCache:x,experimentService:C,collectionFeatureGates:T,userId:M}=e;_&&_();const P=[],B=t.value;if(B.parent_table&&B.parent_id&&P.push(y().L3.getParentPointerFromRecordWithParent(B)),t.table!==w().ev||!t.value)return P;const R=t.value,E=g().Bj6.fromBlock(R),D=E.getCollectionPointer();D&&P.push(D);const L=r[E.id]??await(0,m().wC)({block:E,loadRecordModel:a});if(!L)return P;E.id in r||(r[E.id]=L);const F=n.get(L.id);if(null==F||!F.size)return P;const U=[...(null==F?void 0:F.get("title"))??[],...(null==F?void 0:F.get("text"))??[]].map((e=>{let{property:t}=e;return t}));for(const o of U){var O;const e=null===(O=R.properties)||void 0===O?void 0:O[o];e&&P.push(...(0,S().QL)(e))}(null==F?void 0:F.get("created_by"))&&R.created_by_table&&R.created_by_id&&P.push({table:R.created_by_table,id:R.created_by_id,spaceId:R.space_id});(null==F?void 0:F.get("last_edited_by"))&&R.last_edited_by_table&&R.last_edited_by_id&&P.push({table:R.last_edited_by_table,id:R.last_edited_by_id,spaceId:R.space_id});(null==F?void 0:F.get("auto_increment_id"))&&P.push((0,u().aZ)({spaceId:R.space_id,parentTable:k().Vl,parentId:L.id}));const V=null==F?void 0:F.get("last_visited_time");if(M&&V){const e=(0,I().$5)({parent_id:R.id,user_id:M});P.push({table:I().F9,id:e,spaceId:R.space_id})}if(!(0,c().Xw)(R))return P;const j=F.get("relation");if(j)for(const o of j){const e=(0,c().yQ)(R,o.property),t=(0,c().Zq)(e);for(const n of t)P.push({table:w().ev,id:n,spaceId:o.collectionPointer.spaceId})}const z=F.get("person");if(z)for(const o of z){const e=(0,c().yQ)(R,o.property),t=(0,c().e5)({textValue:e,propertySchema:o.propertySchema,bypassLimit:!0,blockCreatorPointer:E.getCreatedByPointer()});for(const o of t)P.push(o)}const q=F.get("formula");if(q&&l&&d){const e=await Promise.all([o.e(62475),o.e(3151),o.e(98629),o.e(28721),o.e(22542)]).then(o.bind(o,80979));for(const t of q){var H;const o=performance.now();_&&_();const n=t.propertySchema;if(void 0===n.version||void 0===n.formula2)return P;let a;const c=e.getFormula2ResultCache({resultCache:A,blockId:R.id,property:t.property});if(void 0!==c)a={value:e.formulaValueToCollectionFormulaValue(c)};else{const o={values:[{kind:p().FormulaContextValueKind.ThisRow,value:{type:"block",value:{table:"block",id:R.id}}}],handleDataRequest:N({blockIdToAssociatedCollectionModelCache:r,checkCancellation:_,collectionFeatureGates:T,dependencyCache:b,experimentService:C,formulaTimeoutMs:f,getRecordModel:i,loadRecordModel:s,logFormulaStatsFn:v,logFormulaTimeoutFn:h,regExpCache:x,resultCache:A}),intl:d,userTimeZone:l,depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:f&&Date.now()+f,logFormulaTimeoutFn:h,resultCache:A,regExpCache:x,experimentService:C,spaceId:R.space_id,collectionFeatureGates:T},c=await e.executeFormulaAsync(n.formula2.code,o);"value"in c&&e.setFormula2ResultCache({resultCache:A,blockId:R.id,property:t.property,value:c.value}),a=e.mapExecuteFormulaResult(c),e.setFormula2Thunk(g().Bj6.fromBlock(R),L,t.property,(()=>a))}null==v||v({executionTimeMs:performance.now()-o,cachedCount:c?1:0,uncachedCount:c?0:1,error:null===(H=a.error)||void 0===H?void 0:H.type})}}return P}async function C(e){return T(e,new(v().A)(A))}async function T(e,t){var r;const{collectionPointer:i,schema:a,property:s,loadRecordModel:c,dependencyCache:d}=e,u=a[s];if(!u)return[];const p=null===(r=d.get(i.id))||void 0===r?void 0:r.get(s);if(p)return p;const m={collectionPointer:i,property:s,propertySchema:u};if(t.has(m))return[m];if(t.add(m),u.derived_property_record_metadata){const e=u.derived_property_record_metadata.pointer_property_uri,t=a[e];if(t){return[{collectionPointer:i,property:e,propertySchema:t}]}}else{if("relation"===u.type){const e=(0,l().Nv)(u);return e&&await c(e),[]}if("formula"===u.type){const e=await Promise.all([o.e(62475),o.e(3151),o.e(98629),o.e(28721),o.e(22542)]).then(o.bind(o,80979)),r=n().oE(e.getFormulaDependencies(u).map((e=>{const t=a[e];if(t){return{collectionPointer:i,property:e,propertySchema:t}}}))),l=await Promise.all(r.map((e=>{let{property:o}=e;return T({collectionPointer:i,schema:a,property:o,loadRecordModel:c,dependencyCache:d},t)}))),p=n().hS([...r,...n().Bq(l)],(e=>{let{collectionPointer:t,property:o}=e;return`${t.id}${o}`}));return M({dependencyCache:d,collectionPointer:i,property:s,result:p}),p}if("rollup"===u.type&&u.relation_property&&u.target_property){const e=a[u.relation_property];if(!e||"relation"!==e.type)return[];const o=(0,l().Nv)(e);if(!o)return[];const r=await c(o),p=(null==r?void 0:r.getNormalizedSchema())??{},m=[],g={collectionPointer:i,property:u.relation_property,propertySchema:e};if(m.push(g),u.target_property_type){const e=p[u.target_property];if(e&&u.target_property_type===e.type){const t={collectionPointer:{table:k().Vl,id:o.id,spaceId:null==r?void 0:r.space_id},property:u.target_property,propertySchema:e};m.push(t)}}const f=await T({collectionPointer:o,schema:p,property:u.target_property,loadRecordModel:c,dependencyCache:d},t);m.push(...f);const v=n().hS(m,(e=>{let{collectionPointer:t,property:o}=e;return`${t.id}${o}`}));return M({dependencyCache:d,collectionPointer:i,property:s,result:v}),v}}return[]}function M(e){const{dependencyCache:t,collectionPointer:o,property:n,result:r}=e,i=t.get(o.id);if(void 0!==i)i.set(n,r);else{const e=new Map;e.set(n,r),t.set(o.id,e)}}function P(e){const{filter:t,propertyIdSet:o}=e;if((0,s().yX)(t))o.add(t.property);else if((0,s().dU)(t)){const e=t.filters||[];for(const t of e)P({filter:t,propertyIdSet:o})}}function B(e){const{loader:t,schema:o,loadAllProperties:r,searchProperties:i}=e,s=new Set,l=new Set;if(t){var c;if(null!=t&&null!==(c=t.upwardTraversalRelation)&&void 0!==c&&c.property&&s.add(t.upwardTraversalRelation.property),(t.filter||t.filterToComputeDependencies)&&P({propertyIdSet:s,filter:t.filterToComputeDependencies??t.filter}),t.sort)for(const n of t.sort){var d;"formula"===(null===(d=o[n.property])||void 0===d?void 0:d.type)?l.add(n.property):s.add(n.property)}const e=t.reducers||{};n().jJ(e,(e=>{if(e){"groups"!==e.type&&e.filter&&P({propertyIdSet:s,filter:e.filter});const t=[];if("aggregation"===e.type&&(0,a().G9)(e.aggregation)&&t.push(e.aggregation.property),"groups"===e.type&&(t.push(e.groupBy.property),e.subGroup&&t.push(e.subGroup.groupBy.property),e.aggregation&&("intersection_and_independent"===e.aggregation.type||"intersection"===e.aggregation.type)&&(0,a().G9)(e.aggregation.intersectionAggregation)&&t.push(e.aggregation.intersectionAggregation.property),e.aggregation&&("intersection_and_independent"===e.aggregation.type||"independent"===e.aggregation.type)&&e.aggregation.groupAggregation&&(0,a().G9)(e.aggregation.groupAggregation)&&t.push(e.aggregation.groupAggregation.property),e.aggregation&&("intersection_and_independent"===e.aggregation.type||"independent"===e.aggregation.type)&&e.aggregation.subGroupAggregation&&(0,a().G9)(e.aggregation.subGroupAggregation)&&t.push(e.aggregation.subGroupAggregation.property)),0===t.length)return;for(const e of t){const t=o[e];"formula"===(null==t?void 0:t.type)?l.add(e):s.add(e)}}}))}const u=function(e){return Boolean(null==e?void 0:e.searchQuery)||Boolean(Object.values((null==e?void 0:e.reducers)||{}).some((e=>Boolean("results"===e.type&&e.searchQuery))))}(t);if(u)for(const n of i??Object.keys(o)){const e=o[n];if(e){if("rollup"===e.type||"formula"===e.type)continue;s.add(n)}}if(r)for(const n of Object.keys(o))l.add(n);for(const n of l)s.has(n)&&l.delete(n);return{filterStagePropertyIdsSet:s,incrementStagePropertyIdsSet:l}}function R(e){return"property"in e}async function E(e){const{collectionValueOrModel:t,loader:o,recordMap:n,loadRecordModel:r,loadAllProperties:i,apiSorts:a,dependencyCache:s,searchProperties:l}=e,c=g().Bj6.fromValue(k().Vl,t),u=c.getNormalizedSchema(),p=c.getPropertyMapping(),m=a?[...a.filter(R)]:[],{filterStagePropertyIdsSet:h,incrementStagePropertyIdsSet:_}=B({loader:o,schema:u,loadAllProperties:i,searchProperties:l}),b=new Set([...h,..._,...m.map((e=>e.property))]),y=d().u9.fromViewPropertyIds(Array.from(b),p);return(await async function(e){const{recordMap:t,loadRecordModel:o,collectionModelOrValue:n,properties:r,schema:i,dependencyCache:a}=e,s=f().h.throughRecordMap(t,o),l=new(v().A)(A),c=g().Bj6.fromValue(k().Vl,n).pointer;return await Promise.all(r.map((async e=>{const t=i[e];if(t){const o={collectionPointer:c,property:e,propertySchema:t};l.add(o);const n=await C({collectionPointer:c,schema:i,property:e,loadRecordModel:s,dependencyCache:a});for(const e of n)l.add(e)}}))),l}({recordMap:n,loadRecordModel:r,collectionModelOrValue:c,properties:y,schema:u,dependencyCache:s})).valuesArray()}async function D(e){const{blocks:t,recordMap:o,dependencies:n,blockIdToAssociatedCollectionModelCache:r,loadRecordModel:i,loadRecordModelForFormulas:a,userTimeZone:s,intl:l,formulaTimeoutMs:c,logFormulaStatsFn:d,logFormulaTimeoutFn:u,checkCancellation:p,dependencyCache:m,resultCache:v,regExpCache:_,experimentService:y,collectionFeatureGates:S,userId:w}=e;p&&p();const k=[];for(const f of t){const e=g().Bj6.fromBlock(f),t=e.pointer;k.push(t),o.setModel(e.pointer,e)}const I=new Map,A=new Map;for(const g of n){const e=g.collectionPointer.id,t="formula"===g.propertySchema.type?I:A;let o=t.get(e);void 0===o&&(o=new Map,t.set(e,o));const n=o.get(g.propertySchema.type);void 0===n?o.set(g.propertySchema.type,[g]):n.push(g)}const C=f().h.throughRecordMap(o,i),T=f().h.throughRecordMap(o,a);for(const f of[A,I]){const e=new Set;await(0,b().Lx)({recordPointers:k,recurFn:async(t,n,i)=>{if(S.collections_dedupe_dependency_loading){const o=`${t.table}:${t.id}:${null==n?void 0:n.table}:${null==n?void 0:n.id}`;if(e.has(o))return[];e.add(o)}return await x({record:h().ms.create(t.table,t.__IM_SORRY__getValue()),dependencies:f,dependencyCache:m,blockIdToAssociatedCollectionModelCache:r,getRecordModel:g().b4_.fromRecordMap(o),loadRecordModel:C,loadRecordModelForFormulas:T,intl:l,userTimeZone:s,formulaTimeoutMs:c,logFormulaTimeoutFn:u,logFormulaStatsFn:d,checkCancellation:p,resultCache:v,regExpCache:_,experimentService:y,collectionFeatureGates:S,userId:w})},loadRecordModel:C,recordMap:o})}}function N(e){let{blockIdToAssociatedCollectionModelCache:t,checkCancellation:o,collectionFeatureGates:a,dependencyCache:s,experimentService:l,formulaTimeoutMs:c,getRecordModel:d,loadRecordModel:u,logFormulaStatsFn:p,logFormulaTimeoutFn:m,regExpCache:h,resultCache:b}=e;return e=>{var y;o&&o();let S=0,w=0;const k=performance.now(),I=f().h.sideEffect((()=>(w++,Promise.resolve())),u),A=[],x=_().RecordMap.create();if(null===(y=e.recordPointers)||void 0===y||y.forEach((e=>{const t=d(e);void 0!==t?(x.setModel(e,t),S++):A.push(e)})),0===A.length&&(void 0===e.collectionBlockProperties||0===e.collectionBlockProperties.length))return null==p||p({getRecordModelRecordCount:S,loadRecordModelRecordCount:w,recordFetchTimeMs:performance.now()-k}),{getRecordModel:g().b4_.fromRecordMap(x)};const T=void 0!==e.collectionBlockProperties?L(e.collectionBlockProperties):[],M=s??new Map,P=b??new Map,B=h??new Map,R=t??{},E=f().h.throughRecordMap(x,I);return new Promise((async(e,t)=>{try{const t=new(v().A)((e=>`${e.id}${e.table}`));t.add(...A),T.forEach((e=>{let{blockPointers:o,collectionPointer:n}=e;t.add(...o),t.add(n)})),await(0,r().lX)(t.valuesArray(),500,(async e=>{await E(e)})),await(0,r().lX)(T,5,(async e=>{let{blockPointers:t,collectionPointer:r,schema:s,property:d}=e;const u=await C({collectionPointer:r,schema:s,property:d,loadRecordModel:E,dependencyCache:M}),g=n().hS(t,(e=>e.id)).map((e=>x.getModel(e))).filter(i().O9),f=x.getModel(r);f&&g.forEach((e=>{R[e.id]=f})),await D({blocks:g,dependencies:u,blockIdToAssociatedCollectionModelCache:R,recordMap:x,loadRecordModel:E,loadRecordModelForFormulas:E,formulaTimeoutMs:c,logFormulaTimeoutFn:m,logFormulaStatsFn:p,checkCancellation:o,dependencyCache:M,resultCache:P,regExpCache:B,experimentService:l,collectionFeatureGates:a,userId:void 0})})),null==p||p({getRecordModelRecordCount:S,loadRecordModelRecordCount:w,recordFetchTimeMs:performance.now()-k}),e({getRecordModel:g().b4_.fromRecordMap(x)})}catch(s){t(s)}}))}}function L(e){const t=[];for(const o of e){const e=t.find((e=>(0,y().Z2)(e.collectionPointer,o.collectionPointer)&&e.property===o.property));void 0!==e?e.blockPointers.push(...o.blockPointers):t.push({...o,blockPointers:[...o.blockPointers]})}return t}},504066:(e,t,o)=>{o.d(t,{f:()=>i});var n=()=>o(116225);o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);const r=new Set(["rename","change_icon","change_type","select_add_option","select_delete_option","select_rename_option","select_change_color","select_options_reorder","select_change_auto_sort_options","status_change_format","status_set_default","status_change_group","select_set_description","date_change_format","date_change_time_format","formula_edit","formula_v2_edit","relation_edit","relation_toggle_inverse_on","relation_toggle_inverse_off","auto_relation_toggle_on","auto_relation_toggle_off","person_toggle_limit_on","person_toggle_limit_off","relation_toggle_limit_on","relation_toggle_limit_off","number_change_show_as","number_change_precision","number_change_format","url_toggle_show_full_off","url_toggle_show_full_on","toggle_include_subpages","unique_id_change_collection_key","configure_github_pr_automation","set_description"]);function i(e){const{action:t,from:o,property_type:i,new_property_type:a}=e;if(void 0!==i)if("create_property"!==t)r.has(t)&&n().u4({name:"configure_property",args:{analytics_action:t,property_type:i,new_property_type:a}}),"group_by_property_accept"===t&&n().u4({name:"group_property",args:{analytics_action:t,property_type:i}});else{if("table"!==o&&"view_settings"!==o)return;n().u4({name:"create_property",args:{analytics_action:t,from:o,property_type:i}})}}},504836:(e,t,o)=>{o.d(t,{Be:()=>h,CS:()=>v,Pf:()=>b,Sd:()=>g,X7:()=>d,Yq:()=>S,Zf:()=>u,ay:()=>y,nh:()=>p,pB:()=>c,ru:()=>f,yX:()=>m});var n=()=>o(66689),r=()=>o(700500),i=()=>o(970013),a=()=>o(282883),s=()=>o(508496),l=()=>o(972435);function c(){return"on"===s().default.getEligibleGroup({experimentId:"jira_import_and_sync",defaultGroup:"control"})}function d(){return"on"===s().default.getEligibleGroup({experimentId:"jira_sync_data_center_integration",defaultGroup:"control"})}function u(){return s().default.checkGate({gateName:"jira_dc_members_flow_enabled"})}function p(){return s().default.checkGate({gateName:"jira_dc_basic_auth_enabled"})}function m(){return s().default.checkGate({gateName:"disable_jira_sync_source_for_members"})}function g(){return s().default.checkGate({gateName:"jira_onboarding_tour"})}function f(){return s().default.checkGate({gateName:"jira_dc_streaming_projects"})&&d()}function v(){return s().default.checkGate({gateName:"jira_2_way_sync"})}function h(e){let t=null,o=null;if(!e)return{projectCollectionPointer:t,taskCollectionPointer:o};const r=e.getFormat();if(r.app_config_uri===n().Tw){t=e.pointer;const r=e.getSchema()[n().K4.ProjectToTaskRelation];r&&(0,i().nC)(r)&&r.collection_pointer&&(o=r.collection_pointer)}else if(r.app_config_uri===n().dC){o=e.pointer;const r=e.getSchema()[n().yx.TaskToProjectRelation];r&&(0,i().nC)(r)&&r.collection_pointer&&(t=r.collection_pointer)}return{projectCollectionPointer:t,taskCollectionPointer:o}}const _=(0,o(959013).YK)({issueKeyNotFound:{id:"jiraSyncedCollectionUpdateError.issueKeyNotFound",defaultMessage:"Could not find jira issue key from Notion task"},collectionPageNotFound:{id:"jiraSyncedCollectionUpdateError.collectionPageNotFound",defaultMessage:"Found error getting collection page"},collectionNotFound:{id:"jiraSyncedCollectionUpdateError.collectionNotFound",defaultMessage:"Found error getting collection"},invalidPropertyId:{id:"jiraSyncedCollectionUpdateError.invalidPropertyId",defaultMessage:"Invalid property id"},unsupportedPropertyForTwoWaySync:{id:"jiraSyncedCollectionUpdateError.unsupportedPropertyForTwoWaySync",defaultMessage:"Unsupported property for two way sync"},invalidPropertyValue:{id:"jiraSyncedCollectionUpdateError.invalidPropertyValue",defaultMessage:"Invalid property value"},updateFailed:{id:"jiraSyncedCollectionUpdateError.updateFailed",defaultMessage:"Failed to update Jira issue"},permissionDeniedOrResourceNotFound:{id:"jiraSyncedCollectionUpdateError.permissionDeniedOrResourceNotFound",defaultMessage:"Permission denied or resource not found in Jira"},unknownError:{id:"jiraSyncedCollectionUpdateError.unknownError",defaultMessage:"Failed to update jira"},transitionNotFound:{id:"jiraSyncedCollectionUpdateError.transitionNotFound",defaultMessage:"Status not found in the Jira issue workflow"},jiraUserNotFound:{id:"jiraSyncedCollectionUpdateError.jiraUserNotFound",defaultMessage:"Jira user not found"},notionUserNotFound:{id:"jiraSyncedCollectionUpdateError.notionUserNotFound",defaultMessage:"Notion user not found"},convertNotionCommentToJiraCommentBodyFailed:{id:"jiraSyncedCollectionUpdateError.convertNotionCommentToJiraCommentBodyFailed",defaultMessage:"Failed to convert notion comment to jira comment body"}});function b(e){const{errorCode:t}=e,o=l().A.getIntl();switch(t){case"issue_key_not_found":return o.formatMessage(_.issueKeyNotFound);case"collection_page_not_found":return o.formatMessage(_.collectionPageNotFound);case"collection_not_found":return o.formatMessage(_.collectionNotFound);case"invalid_property_id":return o.formatMessage(_.invalidPropertyId);case"unsupported_property_for_two_way_sync":return o.formatMessage(_.unsupportedPropertyForTwoWaySync);case"invalid_property_value":return o.formatMessage(_.invalidPropertyValue);case"update_failed":return o.formatMessage(_.updateFailed);case"permission_denied_or_resource_not_found":return o.formatMessage(_.permissionDeniedOrResourceNotFound);case"transition_not_found":return o.formatMessage(_.transitionNotFound);case"jira_user_not_found":return o.formatMessage(_.jiraUserNotFound);case"notion_user_not_found":return o.formatMessage(_.notionUserNotFound);case"convert_notion_comment_to_jira_comment_body_failed":return o.formatMessage(_.convertNotionCommentToJiraCommentBodyFailed);default:return o.formatMessage(_.unknownError)}}function y(e){var t;return null===(t=(0,a().nH)(e))||void 0===t?void 0:t.split(".")[0]}function S(e){if(!c())return!1;const t=e.getType(),o=e.getFormat();return!(!t||!(0,r().Ef)(t)||(null==o?void 0:o.app_config_uri)!==n().d0&&(null==o?void 0:o.app_config_uri)!==n().bq)}},506090:(e,t,o)=>{o.d(t,{A:()=>i,p:()=>n});let n=function(e){return e.CurrentSpace="current-space",e.TargetSpace="domain-claim-upgrade-team-plan-workspace",e}({});class r extends(()=>o(757695))().default{getInitialState(){return{open:!1}}closeWithSuccess(){this.setState({open:!1,succeeded:!0})}closeWithFailure(){this.setState({open:!1,succeeded:!1})}open(e){const{subscriptionTier:t,addOnFeature:o,billingInterval:r,coupon:i,isTrial:a,sessionId:s,dismissMobilePlansModal:l}=e;this.setState({open:!0,temporaryBillingInterval:r,temporaryAddress:{name:"",businessName:"",addressLine1:"",addressLine2:"",zipCode:"",city:"",state:"",country:""},appliedPromo:void 0,error:void 0,subscriptionTier:t,vatApplicable:!1,calculatingTax:!1,payButtonState:"enabled",type:n.CurrentSpace,addOnFeature:o,onlyShowAddOn:void 0!==o,sessionId:s,coupon:i,isTrial:a,dismissMobilePlansModal:l})}setAddressField(e){this.state.open&&this.setState({...this.state,temporaryAddress:{...this.state.temporaryAddress,...e},taxCalculationError:void 0})}}const i=new r},506406:(e,t,o)=>{o.d(t,{Q:()=>n});const n={assistant_basic:"https://notion.notion.site/198efdeead058086b9b1f970461920be?pvs=105"}},506671:(e,t,o)=>{o.d(t,{d:()=>l});var n=()=>o(908006),r=()=>o(745875),i=()=>o(534177),a=()=>o(508496),s=()=>o(271584);async function l(e){const{eventName:t,eventProperties:o,sampling:l}=e;if("decided"===l.behavior)return l.sampleDecision;if("custom"===l.behavior)return!!(0,r().ox)(l.sampleRate)&&"custom";await n().default.afterNextFlush();const c=a().default.getConfigKey("event_trail_events",t);let d=r().ox;if("object"==typeof c&&"string"==typeof c.sampleMethod&&"client_init_id"===c.sampleMethod&&(d=r().fp.bind(null,s().d)),"object"==typeof c&&"object"==typeof c.sampleRateByProperty){const{sampleRateByProperty:e}=c;for(const[t,n]of Object.entries(e)){const e=n[null==o?void 0:o[t]];if(void 0!==e)return!!d(e)&&"by_property"}}if("object"==typeof c&&"number"==typeof c.sampleRate)return!!d(c.sampleRate)&&"by_event";if("custom"===l.fallbackBehavior)return!!d(l.fallbackSampleRate)&&"fallback_in_code";const u=a().default.getConfigKey("event_trail_events","defaultSampleRate");if("number"==typeof u)return!!d(u)&&"default";const{statsigNotAvailableBehavior:p}=l;switch(p){case"track":return"statsig_not_available";case"drop":return!1;default:(0,i().HB)(p)}}},506828:(e,t,o)=>{o.d(t,{L:()=>r});var n=()=>o(292588);const r={table:o(204384).ez,recordColumnTypes:{id:n().A.UUID,space_id:n().A.UUID,version:n().A.Number,last_version:n().A.Number,created_time:n().A.Number,parent_id:n().A.UUID,parent_table:n().A.String,icon:n().A.String,actors:n().A.JSON},metaColumnTypes:{meta_user_id:n().A.UUID,meta_role:n().A.String}}},507785:(e,t,o)=>{o.d(t,{Ty:()=>V,Ch:()=>O,Li:()=>L,cG:()=>F,iZ:()=>U});o(16280),o(944114),o(898992),o(354520),o(581454);var n=()=>o(17022),r=()=>o(857639),i=()=>o(763884),a=()=>o(792071),s=()=>o(436604),l=()=>o(142748),c=(o(672577),()=>o(842599)),d=()=>o(68263),u=()=>o(179034),p=()=>o(519831),m=()=>o(96689),g=()=>o(979340);function f(e){const{space:t,actor:o,publicAccessRequestExpEnabled:n,canActorJoinSpace:r}=e;return!!r||function(e,t){const o=Boolean(e.disable_public_access_requests||e.admin_disable_public_access);return!(!t||!t.getActorUserId()||o)}(t,o)&&n}function v(e){const{space:t,trustedDomains:o,enableTrustedDomainPermissionRedesign:n,user:r,spaceUser:i}=e;if(!r)return"disabled";if(null!=i&&i.isMember())return"click_to_join";if(!r.email)return"disabled";const a=(0,c().zN)(r.email);let s;s=n&&(0,g().OX)(t.subscription_tier)?(o||[]).map((e=>({domain:e.email_domain,joinSpaceMethod:e.join_space_method}))):(t.getEmailDomains()||[]).map((e=>({domain:e,joinSpaceMethod:"click_to_join"})));const l=s.find((e=>e.domain===a));return(null==l?void 0:l.joinSpaceMethod)??"disabled"}function h(e){const{block:t,viewer:o,canViewerJoinSpace:n,spaceUserIds:r}=e;if(!t)return;if(null==o||!o.isUser()||!n)return;const i=t.getPermissionItems().filter((e=>"user_permission"===e.type&&(0,d().Km)(e.role))).map((e=>e.user_id));return 0!==i.length?i.find((e=>r.includes(e))):void 0}function _(e){const{spaceDomain:t,actor:o,userHasExplicitAccess:n,intl:r,requireInterstitial:i,requireLogin:s,publicAccessRole:l,publicHomePage:c,template:d,presenceAuthorizationToken:g,securitySettings:_,spaceUserIds:y,isDeleted:S,spaceUser:w,publicDomainName:k,isDLSViewer:I,trustedDomains:A,siteGoogleAnalyticsId:x,associatedLayoutModel:C,siteTheme:T,customEmojiUrl:M,isPublicShareLink:P,enableTrustedDomainPermissionRedesign:B,sharingReceiverExperimentVariant:R,isInNewReceiverExperimentVariant:E}=e,D=a().Bj6.fromValue(u().ev,e.block),N=a().Bj6.fromValue(m().NX,e.space),L=a().Bj6.fromValue(p().Vl,e.associatedCollectionValue),F="none"!==l,U=(null==o?void 0:o.isUser())&&function(e){return"click_to_join"===v(e)}({space:N,trustedDomains:A,enableTrustedDomainPermissionRedesign:B,user:o,spaceUser:w}),O=L&&(n||F)?L.getNormalizedSchema():void 0,V=L&&(n||F)?L.id:void 0,j=L&&(n||F)?L.getFormat():void 0,z=n||F?null==C?void 0:C.id:void 0,q=n||F?null==C?void 0:C.getRawModules():void 0,H=n||F?null==C?void 0:C.getFormat():void 0;return{pageId:null==D?void 0:D.id,...b({space:N,intl:r}),spaceDomain:t,spaceShortId:N.getShortIdStr(),canJoinSpace:U,userHasExplicitAccess:n,ownerUserId:h({block:D,viewer:o,spaceUserIds:y,canViewerJoinSpace:U}),collectionId:V,collectionSchema:O,collectionFormat:j,layoutId:z,layoutModules:q,layoutFormat:H,canRequestAccess:!(null==o||!o.isUser())&&f({space:N,actor:o,canActorJoinSpace:U,publicAccessRequestExpEnabled:e.publicAccessRequestExpEnabled}),requireInterstitial:i,requireLogin:Boolean(s),publicAccessRole:l,publicHomePage:c,presenceAuthorizationToken:g,securitySettings:_,template:d,isDeleted:S,publicDomainName:k,isDLSViewer:I,domainLinkSharingEnabledDomains:null==A?void 0:A.filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())),siteGoogleAnalyticsId:x,siteTheme:T,...M?{icon:M}:{},isPublicShareLink:P,sharingReceiverExperimentVariant:R,isInNewReceiverExperimentVariant:E}}function b(e){let{space:t,intl:o}=e;return{spaceName:t.name||o.formatMessage({id:"publicPageDataHelpers.untitledWorkspace.placeholder",defaultMessage:"Untitled Workspace"}),spaceId:t.id,icon:t.icon,betaEnabled:t.beta_enabled}}var y=()=>o(212547),S=()=>o(277816),w=()=>o(798880),k=()=>o(322769),I=()=>o(319625),A=()=>o(229833),x=()=>o(534177),C=()=>o(972435),T=()=>o(870618),M=()=>o(303626),P=()=>o(508496),B=()=>o(671887),R=()=>o(134217),E=()=>o(449506);const D="publicAccessPageId";async function N(e){const{firstResult:t,localPromise:o,remotePromise:n}=await async function(e){const{environment:t,request:o}=e,n="block-space"===o.type?M().N.measure("loadPublicPageData",`block:${o.blockId} space:${o.spaceId}`,(()=>async function(e,t){if("block-space"!==t.type)return{error:Error("Shouldn't be looking for a non-block-space page")};const{blockId:o}=t,{id:n}=e.currentUser;if(o&&n){let t,d,g,f,v,h;const b=[];try{var r;const c=await T().ww({environment:e,recordPointers:[{table:u().ev,id:o},{table:w().oo,id:n}],recurFn:e=>{const n=[];return e.table===u().ev&&e.id===o&&(t=e),e.table===m().NX&&(d=e),e.table===p().Vl&&t&&t.parent_id===e.id&&(g=e),e.table===w().oo&&(v=e),e.table===S().A&&b.push(e),(0,y().A0)(e)&&n.push(e.getParentPointer()),n},recordIsRequired:()=>!0});var i;if(d&&v)h=null===(i=await T().h7({environment:e,pointer:v.toSpaceUserPointer(d.id)}))||void 0===i?void 0:i.model;const k=null===(r=g)||void 0===r?void 0:r.getLayoutPointer();var s;if(k)f=null===(s=await T().h7({environment:e,pointer:k}))||void 0===s?void 0:s.model;if(t&&d&&v&&h){const e={table:u().ev,id:o},n=l().MR(e,c),r=!l()._n(e,a().b4_.fromRecordMapWithRole(c)),i=v,s=Boolean(l().uA(n,i)),p=l().Y1(n),m=(0,R().L)().map((e=>e.userId));return{value:_({block:t,space:d,spaceDomain:void 0,associatedCollectionValue:g,associatedLayoutModel:f,actor:i,userHasExplicitAccess:s,intl:C().A.getIntl(),requireInterstitial:void 0,publicAccessRole:p,securitySettings:void 0,publicHomePage:void 0,template:void 0,publicAccessRequestExpEnabled:P().default.checkGate({gateName:"allow_public_page_access_request",disableExposureLogging:!0}),isDeleted:s?r:void 0,spaceUserIds:m,spaceUser:h,isDLSViewer:!1,trustedDomains:b,enableTrustedDomainPermissionRedesign:P().default.checkGate({gateName:"trusted_domain_permission_redesign",disableExposureLogging:!0})})}}}catch(c){return{error:(0,I().A)(c)}}}return{error:Error("No offline public page data found.")}}(t,o))).then((e=>({from:"local",result:"value"in e?e.value:void 0}))):Promise.resolve({from:"local",result:void 0}),r=V({environment:t,request:o}).then((e=>({from:"remote",result:e}))),i=await Promise.race([n,r].filter(x().O9));return{firstResult:i,localPromise:n,remotePromise:r}}(e);if(t.result){if("local"===t.from&&!e.ignoreLocalResult)return t.result;if("remote"===t.from&&"success"===t.result.type)return t.result.data}const r=await n;if("local"===t.from){if("success"===r.result.type)return r.result.data}else if("remote"===t.from){const t=await o;if(t.result&&!e.ignoreLocalResult)return t.result}const i="Error loading public page data both locally and remotely";throw"failed"===r.result.type?new Error(`${i}: ${r.result.error}`):new Error(i)}async function L(e){try{const t=await N(e);return n().A.withListenerIgnored((()=>{t.spaceId&&t.spaceShortId&&B().D.setState({...B().D.state,[t.spaceId]:t.spaceShortId})})),t}catch(t){return void r().log({level:"error",from:"publicPageDataActions",type:"loadPublicPageData",error:(0,A().n6)(t)})}}async function F(e){try{const t=await N(e);return n().A.withListenerIgnored((()=>{t.spaceId&&t.spaceShortId&&B().D.setState({...B().D.state,[t.spaceId]:t.spaceShortId})})),t}catch(t){throw r().log({level:"error",from:"publicPageDataActions",type:"loadPublicPageDataUnsafely",error:(0,A().n6)(t)}),t}}function U(e){let{currentUserId:t,blockId:o}=e;i().A.set({userId:t,key:D,value:o})}function O(e){return i().A.get({userId:e,key:D})}async function V(e){const{environment:t,request:o}=e,n="invite-link"===o.type?(0,k().PM)(o.inviteLinkCode):void 0,r={[s().eG]:n};return function(e){return Boolean("block-space"===e.type&&(e.blockId||e.spaceId))}(o)?E().callApi({eventName:"getPublicPageData",environment:t,data:o,headers:r}):"spaceDomain"in o&&o.spaceDomain?E().callApi({eventName:"getPublicPageDataForDomain",environment:t,data:{...o,type:"block-space",spaceDomain:o.spaceDomain},headers:r}):E().callApi({eventName:"getPublicPageData",environment:t,data:o,headers:r})}},508104:(e,t,o)=>{o.d(t,{z:()=>s,E:()=>l});var n=()=>o(713998),r=()=>o(989423);function i(e,t){r().vd(e,"todo_block_check",t)}var a=()=>o(246826);function s(e){const{blocks:t,transaction:o,environment:r}=e;for(const i of t)a().zv({store:i.getPropertiesStore(),data:{checked:n().rN(!0)},transaction:o});i(r,{is_checked:!0})}function l(e){const{environment:t,blocks:o,transaction:r}=e;for(const i of o)a().zv({store:i.getPropertiesStore(),data:{checked:n().rN(!1)},transaction:r});i(t,{is_checked:!1})}},508496:(e,t,o)=>{o.r(t),o.d(t,{ExperimentStoreV3:()=>p,default:()=>m,localExperimentsV2Key:()=>d});o(16280),o(898992),o(672577),o(803949);var n=()=>o(715256),r=()=>o(656048),i=()=>o(496603),a=()=>o(534177);function s(e){const t={};return e?((0,a().WP)(e).forEach((e=>{let[o,n]=e;null!=o&&null!=n&&(t[String(o)]=i().Kg(n)?n:JSON.stringify(n))})),t):t}var l=()=>o(165162),c=()=>o(686594);const d="experimentsSettingsV2";class u extends(()=>o(757695))().default{getInitialState(){return{isLoaded:!1}}updateState(e,t){!e.test&&this.state.isLoaded&&this.state.test||(this.setState(e),o(763884).A.set({userId:e.userId,key:d,value:e}))}setState(e){super.setState(e)}getExperimentsForCurrentSpace(){if(!this.state.isLoaded)return[];if(this.state.test)return this.state.experiments;const e=o(351360).default.state.currentSpaceStore;return e&&this.state.experimentsBySpace[e.id]||this.state.experimentsWithoutSpace}getGroup(e){if(n().bl.has(e))return r().Jl;let t;if(this.state.isLoaded){const o=this.getExperimentsForCurrentSpace().find((t=>t.experimentId===e));if(!o)return r().Jl;t=o.group}return t||r().Jl}getExperimentsMap(){const e={};return this.state.isLoaded&&this.getExperimentsForCurrentSpace().forEach((t=>{e[t.experimentId]=t.group})),e}getExperimentMap(){const e=new Map;return this.state.isLoaded&&this.getExperimentsForCurrentSpace().forEach((t=>{e.set(t.experimentId,t)})),e}getUsedNonControlExperimentsMap(){const e={};return this.state.isLoaded&&this.getExperimentsForCurrentSpace().forEach((t=>{"control"!==t.group&&(0,n().XK)(t.experimentId)&&(e[t.experimentId]=t.group)})),e}getAcceptLanguageHeader(){if(this.state.isLoaded)return this.state.acceptLanguageHeader}}class p extends u{constructor(){super(),this.statsigExposureCacheForAnalytics={},this.computedStoreMap=new Map,this.isStatsigEnabled()&&c().A.addListener((()=>{this.recomputeAllGroupStores()}))}isStatsigEnabled(){var e;return Boolean(null===(e=o(780054).A.statsig)||void 0===e?void 0:e.apiKey)}isStatsigEnabledAndInitialized(){return this.isStatsigEnabled()&&c().A.isInitialized()}isLoaded(){return this.state.isLoaded}getGroup(e,t){return(0,n().o7)(e)?this.getEligibleGroup({experimentId:e,defaultGroup:r().Jl,disableExposureLogging:null==t?void 0:t.disableExposureLogging}):r().Jl}getEligibleGroup(e){const{experimentId:t,defaultGroup:o,parameter:n=c().K,disableExposureLogging:r=!1}=e,i=(null==n?void 0:n.toLowerCase())===c().K,s=this.getExperimentOverrideForBrowserTest(t);if((0,a().O9)(s))return s[n];const l=e.actor;this.validateActor(l),this.state.isLoaded;const d=`eligibleGroup.${t}.${n}${r?".disableLogging":""}`;return this.createComputedGroupStore(d,(()=>{if(!this.isStatsigEnabledAndInitialized())return;const e=this.validateGroupIsString(c().A.getGroup(t,r));return void 0!==e&&(this.statsigExposureCacheForAnalytics[`statsig-${t}`]=e),i?e:c().A.getGroup(t,r,n,o)})).state.group??o}manuallyLogExperimentExposure(e){c().A.manuallyLogExperimentExposure(e)}validateActor(e){if(void 0!==e&&e!==n().S3){const t=this.isStatsigEnabledAndInitialized()&&c().A.state.currentUserId?{table:o(798880).oo,id:c().A.state.currentUserId}:void 0;if(t&&e!==t)throw new Error("Invalid user: actor does not match currentUser")}}checkGate(e){return this.getGateCheckStore(e).state.gate}getGateCheckStore(e){const{gateName:t,disableExposureLogging:o=!1}=e,n=e.actor;return this.validateActor(n),this.createComputedGateStore(`gate.${t}${o?".disableLogging":""}`,(()=>{const e=this.getFeatureGateOverrideForBrowserTest(t);if((0,a().O9)(e))return e;const n=this.getFeatureGateOverrideForUnitTest(t);if((0,a().O9)(n))return n;if(!this.isStatsigEnabledAndInitialized())return!1;const r=c().A.checkGate(t,o);return this.statsigExposureCacheForAnalytics[`statsig-${t}`]=r,r}))}getConfigKey(e,t,o){const r=n().Hb[e][t];return this.createComputedDynamicConfigKeyStore(e,t,(()=>{var n;return this.isStatsigEnabledAndInitialized()?(null===(n=c().A.getConfig(e,o))||void 0===n?void 0:n.get(String(t),r))??r:r})).state.value}logEvent(e,t,n){return this.isStatsigEnabledAndInitialized()?c().A.logEvent(e,t,s(n)):(o(857639).log({level:"error",from:"ExperimentStore.ts",type:"statsigIsNotInitialized",data:{miscDataToConvertToString:{eventName:e,value:t,metadata:s(n),isStatsigEnabled:this.isStatsigEnabled(),isInitialized:c().A.isInitialized()}}}),!1)}getExperimentsMap(){return{...super.getExperimentsMap(),...this.getStatsigExperimentsMap()}}getStatsigExperimentsMap(){return this.getBootstrappedExperimentGroups(),this.statsigExposureCacheForAnalytics}updateState(e,t){(void 0===e.userId||this.state.isLoaded&&this.state.userId!==e.userId)&&(this.statsigExposureCacheForAnalytics={}),super.updateState(e,t)}reset(){super.reset(),this.statsigExposureCacheForAnalytics={},this.recomputeAllGroupStores()}async waitUntilStatsigReady(){this.isStatsigEnabled()&&await c().A.waitUntil((()=>c().A.state.ready))}isStatsigReady(){return c().A.state.ready}recomputeAllGroupStores(){this.computedStoreMap.forEach((e=>e.enqueueRecompute()))}createComputedGroupStore(e,t){return this.createComputedStore(e,(()=>({group:t(),lastUpdatedMinute:(new Date).getMinutes()})))}createComputedGateStore(e,t){return this.createComputedStore(e,(()=>({gate:t(),lastUpdatedMinute:(new Date).getMinutes()})))}createComputedDynamicConfigKeyStore(e,t,o){return this.createComputedStore(`config.${e}.${String(t)}`,(()=>({value:o(),lastUpdatedMinute:(new Date).getMinutes()})))}createComputedStore(e,t){let n=this.computedStoreMap.get(e);return n||(n=new(o(496506).default)(t,{debugName:`ExperimentStore.${e}`}),n.addListener(i().lQ),this.computedStoreMap.set(e,n)),n}getFeatureGateOverrideForBrowserTest(e){}getExperimentOverrideForBrowserTest(e){}getFeatureGateOverrideForUnitTest(e){}validateGroupIsString(e){return"string"==typeof e?e:void 0}getBootstrappedExperimentGroups(){for(const e of n().jy){if(void 0!==this.statsigExposureCacheForAnalytics[`statsig-${e}`])continue;const t=(0,l().gg)(e);void 0!==t&&(this.statsigExposureCacheForAnalytics[`statsig-${e}`]=t)}for(const e of n().TQ){if(void 0!==this.statsigExposureCacheForAnalytics[`statsig-${e}`])continue;const t=(0,l().Sx)(e);null!==t&&(this.statsigExposureCacheForAnalytics[`statsig-${e}`]=t)}}}const m=new p},510473:(e,t,o)=>{o.d(t,{A:()=>s,E:()=>a});var n=()=>o(437607),r=()=>o(158009),i=()=>o(630116);function a(e){const{spaceStore:t,groupId:o}=e;return i().Cv.createChildStore(t,(0,n().bj)({spacePermissionGroupId:o,spaceId:t.id}))}function s(e){const{spaceStore:t,groupId:o,userId:n}=e;return i().mm.createChildStore(t,(0,r().BZ)({spacePermissionGroupId:o,spaceId:t.id,userId:n}))}},510683:(e,t,o)=>{o.d(t,{Jq:()=>L,En:()=>F,NB:()=>N,Je:()=>V,_2:()=>O});o(16280),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454);var n=()=>o(617871),r=()=>o(388693),i=()=>o(861017),a=()=>o(427704),s=()=>o(112069),l=()=>o(677338),c=()=>o(20498),d=()=>o(973647),u=()=>o(534177),p=()=>o(939768),m=()=>o(780054),g=()=>o(989423),f=()=>o(725951),v=()=>o(974233),h=()=>o(508496),_=()=>o(53137),b=()=>o(666803),y=()=>o(404141),S=()=>o(559926),w=()=>o(449506),k=()=>o(901389),I=()=>o(705540),A=()=>o(664133),x=()=>o(351360);var C=()=>o(433052),T=()=>o(957416),M=()=>o(464510),P=()=>o(435009),B=()=>o(977239),R=()=>o(72234),E=()=>o(633457);const D=(0,o(959013).YK)({authenticating:{id:"externalIntegrationAuthActions.authenticationWithIntegration.loadingMessage",defaultMessage:"Authorizing with integration…"},titleMessage:{id:"externalIntegrationAuthActions.loginWithExternalIntegrationPopupModal.title",defaultMessage:"Authenticate"}});async function N(e){const{environment:t,integration:o,spaceId:n,from:r}=e,a=o.id,s=t.currentUser.id,l=(0,f().LX)(t);if(!s)throw new Error("No user id found");let d;S().xI(t,{integrationId:a,from:r});const u=(0,c().Hr)(a);if("dlp"===(null==u?void 0:u.type)||"ediscovery"===(null==u?void 0:u.type)){const e=await w().callApi({eventName:"createOauthAuthorizationCode",environment:t,data:{integrationId:a,spaceId:n}});if("failed"===e.type)return k().Qg(e),{error:`Unexpected error creating authorization code: ${(0,v().V)(e)}`};d=e.data.code}await q({environment:t,notionAuthorizationCode:d,integration:o,spaceId:n,userId:s,authType:l,from:r,callbackRouteName:(null==u?void 0:u.id)===c().lW.datadog.id?i().I2.datadogAuthCallback:i().I2.authCallback}),await E().oX({environment:t}),"workspace_connections_redirect"===r&&y().A.setState({open:!0,openedFrom:"workspace_connections_redirect",currentTab:"integrations",defaultSubtab:"workspace_connections",highlightedSetting:void 0})}async function L(e){const{environment:t,spaceId:o,integration:r,from:i}=e;if(r.id===n().F6)return await A().jh({environment:t,from:i,action:"add_account"}),(0,g().u4)({environment:t,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",flowId:b().Ay.createNewFlowId(),from:"my_connections"}}}),{value:{externalAuthentication:void 0}};if(r.id===n().Fv){if(!t.currentUser.id)return{error:"User must be signed in."};const n=(0,f().LX)(t),a={externalObjectInstanceBlockId:e.externalObjectInstanceBlockId,spaceId:o,callbackType:n.callbackType,...n.redirectToAuth&&{redirectToAuth:"true"}};return function(e){const{currentSpaceStore:t}=x().default.state;if(!t)return;const o=b().Ay.getFlowId();b().Ay.setState({...b().Ay.state,type:"dc-auth",open:!0,instanceValue:b().cK.DataCenter,spaceId:e.spaceId,notionState:e.notionState}),(0,g().u4)({environment:e.environment,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira-dc",actionType:"auth_render",flowId:o}}})}({environment:t,from:i,action:"add_account",spaceId:o,notionState:e.externalObjectInstanceBlockId&&a}),S().xI(t,{integrationId:r.id,from:i}),{value:{externalAuthentication:void 0}}}return r.id===n().mn?(B().rT({environment:t,from:i,action:"add_account"}),{value:{externalAuthentication:void 0}}):await F(e)}async function F(e){const{environment:t,spaceId:o,integration:c,externalObjectInstanceBlockId:u,unfurlUrl:g,preventRedirectToLastVisitedPage:b,from:y}=e;l().NI(void 0);const A=c.id,x=A===n().zG?_().A.completeSlackAuthentications.state:_().A.externalAuthentications.state,B=new Set(x.filter((e=>{let{integration_id:t}=e;return t===A})).map((e=>e.parent_id)));A===n().Hd&&R().ZK(t);const N=(0,n().CX)({integrationId:A,env:"production"}),L=(0,r().UI)(m().A.domainBaseUrl),F=c.redirect_uris.includes(L)?L:c.redirect_uris[0],O=await w().callApi({eventName:"createOauthAuthorizationCode",environment:t,data:{integrationId:A,spaceId:o,...N?{redirectUri:F}:{}}});if("failed"===O.type)return k().Qg(O),{error:`Unexpected error creating authorization code: ${(0,v().V)(O)}`};const V=O.data.code,j=t.currentUser.id,H=(0,f().LX)(t),W=i().I2.authCallback;if(!j)return{error:"User must be signed in."};const K={environment:t,notionAuthorizationCode:V,integration:c,spaceId:o,externalObjectInstanceBlockId:u,unfurlUrl:g,authType:H,from:y,userId:j,callbackRouteName:W};(0,n().CX)({integrationId:A,env:"production"})?await async function(e){const{environment:t,redirectUri:o,notionAuthorizationCode:r,integration:l,spaceId:c,externalObjectInstanceBlockId:u,unfurlUrl:g,authType:f,userId:v}=e,_=await async function(e){const{integration:t}=e;if("external"===t.type&&void 0!==t.info.handled_by_integrations_server)return"github"===t.info.handled_by_integrations_server?(await async function(e){const{environment:t,notionAuthorizationCode:o,spaceId:n,authType:r}=e,l={notion_workspace_id:n,notion_user_id:t.currentUser.id,notion_last_visited_url:window.location.href,notion_authorization_code:o,callback_type:r.callbackType,...r.redirectToAuth&&{redirectToAuth:"true"}},c=h().default.checkGate({gateName:"enable_server_integrations_proxy"}),d=(0,p().Gm)({url:(0,s().ae)("production",c),query:{...l}});if((t.device.isTablet||t.device.isMobile)&&t.mobileNative&&"on"===h().default.getEligibleGroup({experimentId:"allow_auth_with_app_browser_for_mobile",defaultGroup:"control"}))return void t.mobileNative.openInAppBrowser(d);if(t.device.isElectron){if(h().default.checkGate({gateName:"enable_oauth_from_desktop_ux_v2"})){const e=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(d)}});I().openExternalUrl(e)}else I().openExternalUrl(d);return}const u=await T().P(t,{width:610,height:700,url:d,titleMessage:D.titleMessage});if(!u)return;const g=(0,i().parseRoute)({url:u,isMobile:t.device.isMobile,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,protocol:m().A.protocol,currentUrl:window.location.href}),{url:f}=C().v4(t);"externalAuthCallback"===g.name&&await M().d0({route:g,environment:t});P().oo({url:f||a().JZ.root,environment:t})}(e),{value:{success:!0}}):"slack"===t.info.handled_by_integrations_server?(await async function(e){const{environment:t,userId:o,spaceId:n,authType:r,from:l,externalObjectInstanceBlockId:c,options:d,notionAuthorizationCode:u}=e,g={notion_workspace_id:n,notion_user_id:o,notion_last_visited_url:window.location.href,auth_initiator:l,callback_type:r.callbackType,slack_workspace_id:null==d?void 0:d.slackWorkspaceId,external_object_instance_block_id:c,...r.redirectToAuth&&{redirectToAuth:"true"},notion_authorization_code:u},f=h().default.checkGate({gateName:"enable_server_integrations_proxy"}),v=(0,p().Gm)({url:(0,s()._J)("production",f),query:{...g}});if(t.mobileNative)return void t.mobileNative.openInAppBrowser(v);if(t.device.isElectron){if(h().default.checkGate({gateName:"enable_oauth_from_desktop_ux_v2"})){const e=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(v)}});I().openExternalUrl(e)}else I().openExternalUrl(v);return}const _=await T().P(t,{width:610,height:700,url:v,titleMessage:D.titleMessage});if(!_)return;const b=(0,i().parseRoute)({url:_,isMobile:t.device.isMobile,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,protocol:m().A.protocol,currentUrl:window.location.href});"externalAuthCallback"===b.name&&await M().d0({route:b,environment:t})}(e),{value:{success:!0}}):"zendesk"===t.info.handled_by_integrations_server?(await U(e),{value:{success:!0}}):"salesforce"===t.info.handled_by_integrations_server?(await async function(e){const{environment:t,notionAuthorizationCode:o,spaceId:r,authType:l,externalObjectInstanceBlockId:c,integration:d}=e,u={notion_workspace_id:r,notion_user_id:t.currentUser.id,notion_last_visited_url:window.location.href,callback_type:l.callbackType,external_object_instance_block_id:c,notion_authorization_code:o,...l.redirectToAuth&&{redirectToAuth:"true"}},g=h().default.checkGate({gateName:"enable_server_integrations_proxy"}),f=d.id===n().mn?s().kB:`${s().kB}${s().EQ}`,v=(0,p().Gm)({url:(0,s().WC)({env:"production",isServerIntegrationsProxyEnabled:g,integrationPath:f}),query:{...u}});if(t.device.isElectron)return void I().openExternalUrl(v);const _=await T().P(t,{width:610,height:700,url:v,titleMessage:D.titleMessage});if(!_)return;const b=(0,i().parseRoute)({url:_,isMobile:t.device.isMobile,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,protocol:m().A.protocol,currentUrl:window.location.href}),{url:y}=C().v4(t);"externalAuthCallback"===b.name&&await M().d0({route:b,environment:t});P().oo({url:y||a().JZ.root,environment:t})}(e),{value:{success:!0}}):"gmail"===t.info.handled_by_integrations_server?(await z(e,"gmail"),{value:{success:!0}}):"google_contacts"===t.info.handled_by_integrations_server?(await z(e,"google_contacts"),{value:{success:!0}}):"jira_data_center"===t.info.handled_by_integrations_server?(await U(e),{value:{success:!0}}):{error:{success:!1}};return{error:{success:!1}}}(e);if(d().Q.isSuccess(_))return;const b={externalObjectInstanceBlockId:u,spaceId:c,userId:v,callbackType:f.callbackType,...f.redirectToAuth&&{redirectToAuth:"true"}},y={code:r,notion_state:JSON.stringify(b),integration_id:l.id,external_url:g,redirect_uri:o},S=(0,p().Gm)({url:o,query:{...y}});if(t.device.isElectron){if(h().default.checkGate({gateName:"enable_oauth_from_desktop_ux_v2"})){const e=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(S)}});I().openExternalUrl(e)}else I().openExternalUrl(S);return}const w=await T().P(t,{width:610,height:700,url:S,titleMessage:D.titleMessage});if(!w)return;const k=(0,i().parseRoute)({url:w,isMobile:t.device.isMobile,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,protocol:m().A.protocol,currentUrl:window.location.href});"externalAuthCallback"===k.name&&await M().d0({route:k,environment:t})}({...K,integration:c,notionAuthorizationCode:V,redirectUri:F,preventRedirectToLastVisitedPage:b}):await q(K),S().xI(t,{integrationId:c.id,numberOfAccountsAlreadyConnected:B.size,from:y}),await E().oX({environment:t});return{value:{externalAuthentication:_().A.externalAuthentications.state.filter((e=>{let{integration_id:t}=e;return t===A})).find((e=>!B.has(e.parent_id)))}}}async function U(e){const{environment:t,notionAuthorizationCode:o,spaceId:n,authType:r,externalObjectInstanceBlockId:s}=e,l={notion_workspace_id:n,notion_user_id:t.currentUser.id,notion_last_visited_url:window.location.href,notion_authorization_code:o,external_object_instance_block_id:s,callback_type:r.callbackType,integration_id:e.integration.id,...r.redirectToAuth&&{redirectToAuth:"true"}},c=(0,p().Gm)({url:`${m().A.domainBaseUrl}/initiateExternalAuthentication`,query:{...l}});if(t.device.isElectron){const e=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(c)}});return void I().openExternalUrl(e)}const d=await T().P(t,{width:610,height:700,url:c,titleMessage:D.titleMessage});if(!d)return;const u=(0,i().parseRoute)({url:d,isMobile:t.device.isMobile,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,protocol:m().A.protocol,currentUrl:window.location.href}),{url:g}=C().v4(t);"externalAuthCallback"===u.name&&await M().d0({route:u,environment:t}),P().oo({url:g||a().JZ.root,environment:t})}function O(e){const{environment:t,notion_workspace_id:o,notion_user_id:n,notion_last_visited_url:r,notion_authorization_code:i,external_object_instance_block_id:l,callback_type:c,redirectToAuth:d,zendeskSubDomain:u}=e,g={notion_workspace_id:o,notion_user_id:n,notion_last_visited_url:r,notion_authorization_code:i,external_object_instance_block_id:l,callback_type:c,zendeskSubDomain:u,...d&&{redirectToAuth:"true"}},f=h().default.checkGate({gateName:"enable_server_integrations_proxy"}),v=(0,p().Gm)({url:(0,s().$d)("production",f),query:{...g}});if(t.device.isElectron){const e=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(v)}});I().openExternalUrl(e)}else window.location.href=v}function V(e){const{environment:t,notion_workspace_id:o,notion_user_id:n,notion_last_visited_url:r,notion_authorization_code:i,external_object_instance_block_id:l,callback_type:c,redirectToAuth:d,domain:u,personalAccessToken:g,username:f,password:v,authType:_}=e,b={notion_workspace_id:o,notion_user_id:n,notion_last_visited_url:r,notion_authorization_code:i,external_object_instance_block_id:l,callback_type:c,domain:u,personalAccessToken:g,username:f,password:v,authType:_,...d&&{redirectToAuth:"true"}},y=h().default.checkGate({gateName:"enable_server_integrations_proxy"}),S=(0,p().Gm)({url:(0,s().o_)("production",y),query:{...b}});if(t.device.isElectron){const e=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(S)}});I().openExternalUrl(e)}else window.location.href=S}function j(e){const t=h().default.checkGate({gateName:"enable_server_integrations_proxy"});return"gmail"===e?(0,s().FD)("production",t):"google_contacts"===e?(0,s().Fw)("production",t):void(0,u().HB)(e)}async function z(e,t){const{environment:o,notionAuthorizationCode:n,spaceId:r,authType:s,externalObjectInstanceBlockId:l,preventRedirectToLastVisitedPage:c}=e,d={notion_workspace_id:r,notion_user_id:o.currentUser.id,notion_last_visited_url:window.location.href,callback_type:s.callbackType,external_object_instance_block_id:l,notion_authorization_code:n,...s.redirectToAuth&&{redirectToAuth:"true"}},u=(0,p().Gm)({url:j(t),query:{...d}});if(o.device.isElectron){const e=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(u)}});return void I().openExternalUrl(e)}const g=await T().P(o,{width:610,height:700,url:u,titleMessage:D.titleMessage});if(!g)return;const f=(0,i().parseRoute)({url:g,isMobile:o.device.isMobile,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,protocol:m().A.protocol,currentUrl:window.location.href});if("externalAuthCallback"===f.name&&await M().d0({route:f,environment:o,preventRedirectToLastVisitedPage:c}),!c){const{url:e}=C().v4(o);P().oo({url:e||a().JZ.root,environment:o})}}async function q(e){const{environment:t,notionAuthorizationCode:o,integration:n,spaceId:r,userId:s,authType:l,externalObjectInstanceBlockId:c,from:d,callbackRouteName:u}=e,g=n.id,v={notionAuthorizationCode:o,userId:s,spaceId:r,integrationId:g,externalObjectInstanceBlockId:c,callbackType:l.callbackType,...l.redirectToAuth&&{redirectToAuth:"true"}};let h=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.externalIntegrationPopupRedirect}`,query:{...v}});if(h=l.redirectToAuth?h:await(0,f().YN)(t,h),t.device.isElectron)return void I().openExternalUrl(h);const _=await T().P(t,{width:610,height:700,url:h,titleMessage:D.titleMessage});if(!_)return;const b=(0,i().parseRoute)({url:_,isMobile:t.device.isMobile,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,protocol:m().A.protocol,currentUrl:window.location.href});b.name===u&&await M().M8({route:b,environment:t,integrationId:g,from:d})}},512665:(e,t,o)=>{o.d(t,{B:()=>g});var n=()=>o(59728),r=()=>o(962730),i=()=>o(397248),a=()=>o(700250);const{Top:s,Bottom:l,Left:c,Right:d}=r().W,{Start:u,Center:p}=r().C,m=12;function g(e){const{viewportAdditionalBottomPadding:t,originGap:o,viewportPadding:r}=e,a=(0,n().A)();let s=r??m;o&&o>s&&(s=o+m);let l=i().fT(a,-s);0!==t&&(l=new(i().z8)(l.x,l.y,l.width,l.height-t)),f({...e,viewportRect:l})}function f(e){const{store:t,placementToOrigin:o,alignmentToOrigin:n,popupRect:r,originRect:u,viewportRect:p,repositionedPlacement:m,disableFlippingPlacement:g,popupRectBottomPadding:h}=e,_=v(r,u,o,n,h),b=Math.max(p.left-_.left,0)+Math.min(p.right-_.right,0),y=Math.max(p.top-_.top,0)+Math.min(p.bottom-_.bottom,0),S={offsetX:0,offsetY:0};if(!g)if(void 0!==m)S.repositionedPlacement=m;else{const t=o===c&&Math.abs(b)>0,m=o===d&&Math.abs(b)>0,g=o===s&&Math.abs(y)>0,h=o===l&&Math.abs(y)>0;if(t||m||g||h){const s=t||m,c=s?i().X6:i().JK,d=(0,a().W0)(o);if(c(p,v(r,u,d,n)))S.repositionedPlacement=d;else if(s){if(i().JK(p,v(r,u,l,n)))return f({...e,placementToOrigin:l,repositionedPlacement:l})}}}const w=void 0!==S.repositionedPlacement;if((!w||o!==c&&o!==d)&&(S.offsetX=Math.round(b)),(!w||o!==s&&o!==l)&&(S.offsetY=Math.round(y)),w)if(o===l){const e=u.top-r.height;p.y>e&&(S.offsetY=Math.round(p.y-e))}else if(o===s){const e=u.bottom+r.height;p.bottom<e&&(S.offsetY=Math.round(p.bottom-e))}t.setState({...t.state,...S})}function v(e,t,o,n,r){if(o===s||o===l){let i,a;return i=n===u?t.left:n===p?t.left+t.width/2-e.width/2:t.right-e.width,a=o===s?t.top-e.height:t.bottom,new DOMRect(i,a,e.width,e.height+(r??0))}let i,a;return i=n===u?t.top:n===p?t.top+t.height/2-e.height/2:t.bottom-e.height,a=o===c?t.left-e.width:t.right,new DOMRect(a,i,e.width,e.height+(r??0))}},515402:(e,t,o)=>{o.d(t,{d:()=>g,g:()=>m});o(898992),o(354520),o(581454);var n=()=>o(857639),r=()=>o(388821),i=()=>o(332393),a=()=>o(606219),s=()=>o(496603),l=()=>o(229833),c=()=>o(351360),d=()=>o(992237),u=()=>o(449506),p=()=>o(847307);async function m(e){const{currentSpaceStore:t}=c().default.state;t&&await g({environment:e.environment,spaceId:t.id,force:!0})}async function g(e){const{environment:t,spaceId:o,force:m}=e;if(!t.currentUser.id)return;await c().default.waitUntilRendered();const g=d().A.state;if(!g.loaded&&!g.loading||g.loaded&&o!==g.spaceId||m){d().A.setState({...d().A.state,loading:!0});const e=async()=>{const e=await u().callApi({eventName:"searchIntegrations",environment:t,data:{query:"",type:"compliance",spaceId:o}});return"success"!==e.type?(n().log({level:"error",from:"complianceIntegrationActions",type:"searchIntegrationsError",error:(0,l().n6)(e.error)}),{status:"rejected",error:e.error}):{status:"resolved",value:e}},c=async()=>{try{return{status:"resolved",value:await p().C({environment:t,spaceId:o})}}catch(e){return n().log({level:"error",from:"complianceIntegrationActions",type:"fetchWebhookSubscriptionsError",error:(0,l().n6)(e)}),{status:"rejected",error:e}}},[m,g]=await Promise.all([e(),c()]);if("rejected"===m.status||"rejected"===g.status)return;const{value:f}=m,{value:v}=g,h=r().RecordMapWithRole.create(f.data.recordMap),_=r().RecordMapWithRole.create(v.recordMap);d().A.setState({loaded:!0,loading:!1,spaceId:o,integrations:s().Ul(s().oE(f.data.integrationIds.map((e=>h.getModel({table:i().Li,id:e})))).filter(i().kC),(e=>{let{created_at:t}=e;return t})),webhookSubscriptions:s().oE(v.webhookSubscriptionIds.map((e=>_.getModel({table:a().TF,id:e,spaceId:o}))))})}}},517223:(e,t,o)=>{o.d(t,{HZ:()=>_,Hc:()=>S,LD:()=>I,Ul:()=>b,_1:()=>w,e7:()=>y,pm:()=>k});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(803949),o(581454),o(908872),o(737550);var n=()=>o(56366),r=()=>o(487929),i=()=>o(713998),a=()=>o(651124),s=()=>o(416504),l=()=>o(390066),c=()=>o(120997),d=()=>o(124672),u=()=>o(706665),p=()=>o(778781),m=()=>o(797809),g=()=>o(534177),f=()=>o(909470),v=()=>o(847743),h=()=>o(508496);function _(e){let{propertyGroups:t,propertyIds:o,propertyGroupId:n,format:r}=e;const i=o?o.map((e=>({property:e,visible:!0}))):void 0;if(i)return i;if(n){if(!t)return[];const e=(0,u().z5)({propertyGroups:t,groupId:n});return null!=e&&e.propertyIds?e.propertyIds.map((e=>({property:e,visible:!0}))):[]}return(r.collection_page_properties||[]).filter((e=>{var t;return null===(t=r.collection_page_sections)||void 0===t||!t.some((t=>t.section===e.property&&("inline"===t.visibility||"minimal"===t.visibility)))}))}function b(e){let{collectionStore:t,modulesByArea:o}=e;const n=(0,l().L)(t.getFormat(),t.getSchema(),void 0,a().jf.Page),r=_({propertyGroups:[],propertyIds:void 0,propertyGroupId:void 0,format:n}),i=new Set((0,d().q)({modulesByArea:o,collectionSchema:t.getSchema(),collectionFormat:n}));return r.filter((e=>!i.has(e.property)))}function y(e){let{store:t,format:o,schema:n,collectionStore:r,propertyIds:c,propertyGroupId:d,intl:u,environment:p,formulasModule:m}=e;const g=t.getModel(),b=(0,l().L)(o,n,void 0,a().jf.Page),y=_({propertyGroups:r.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0}),propertyIds:c,propertyGroupId:d,format:b}),S=b&&b.property_visibility;if(S){return y.map((e=>{const o=n[e.property];let r;return r=("formula"!==(null==o?void 0:o.type)||!v().Pe)&&!Boolean(g&&i().r8({block:g,property:e.property,schema:n,getRecordModel:t.getRecordModel,userId:p.currentUser.id,userTimeZone:(0,s().P)(),intl:u,experimentService:h().default,collectionFeatureGates:(0,f().i)(),formulasModule:m})),{visibility:"show",hasValue:r,name:(null==o?void 0:o.name)??"",...e,...S.find((t=>t.property===e.property))}}))}return y?y.map((e=>{var o;return{...e,visibility:"show",hasValue:Boolean(t.getPropertyValue(e.property)),name:(null===(o=n[e.property])||void 0===o?void 0:o.name)??""}})):[]}function S(e){const{layoutStore:t,propertyId:o}=e;let n=!1,r=!1;const i=t.getModules(),a=Boolean(i.page_main.some((e=>(0,p().gx)(e)?o===e.propertyId:"normalizedTitleWithIcon"===e.type&&e.propertyIds.includes(o))));return a||(r=!!i.page_details.some((e=>!!(0,p().gx)(e)&&o===e.propertyId))),n=!a&&!r,n&&(r=!!i.page_details.find((e=>{let{type:t}=e;return"properties"===t}))),{isPropertyInPageDetails:r,isPropertyInGroup:n,isPropertyInMainPage:a}}function w(e){const{propertyId:t,store:o}=e;return(0,n().K8)((()=>{var e;const n=null==o||null===(e=o.getAssociatedCollectionStore())||void 0===e?void 0:e.getLayoutStore();return n&&t?S({layoutStore:n,propertyId:t}):{isPropertyInPageDetails:!1,isPropertyInGroup:!1,isPropertyInMainPage:!1}}),[t,o])}function k(e){var t;const{collectionStore:o}=e,n=o.getLayoutStore(),i=null==n?void 0:n.getModules();if(null==i||null===(t=i.page_details)||void 0===t||!t.length)return{count:0,isPropertiesModuleInPageDetails:!1};const a=o.getSchema(),s=o.getFormat(),l=(0,r().T)({format:s,schema:a,visibilityLevels:["inline","minimal"]}).map((e=>e.section));let d=!1;const u=new Set,f=new Set;i.page_main.forEach((e=>{if((0,c().p)(e,"page_main"))if((0,p().gx)(e))u.add(e.propertyId);else if((0,p().V_)(e))l.forEach((e=>u.add(e)));else if("normalizedTitleWithIcon"!==e.type)switch(e.type){case"deleted_property":case"inlinePageSections":case"expandedBacklinks":case"discussions":case"cover":case"editor":case"views":case"viewsMain":case"transcript":case"bottomControls":case"placeholder":case"properties":return;default:(0,g().HB)(e)}else e.propertyIds.forEach((e=>{u.add(e)}))})),i.page_details.forEach((e=>{(0,c().p)(e,"page_details")&&((0,p().i_)(e)?d=!0:(0,p().gx)(e)?f.add(e.propertyId):"deleted_property"!==e.type&&(0,g().HB)(e))}));const v=o.getSchema();return{count:Object.keys(v).reduce(((e,t)=>{const o=v[t];return o?(0,m().TV)(o.type)?e:f.has(t)||!u.has(t)&&d?e+1:e:e}),0),isPropertiesModuleInPageDetails:d}}function I(e){const{module:t,collectionSchema:o}=e;return t.propertyIds.filter((e=>Boolean(o[e])))}},517288:(e,t,o)=>{o.d(t,{O:()=>c});var n=()=>o(383594),r=()=>o(972435),i=()=>o(486666),a=()=>o(129522),s=()=>o(116008),l=()=>o(441467);function c(e){const{environment:t,blockStore:o,rect:c,skipOpeningDiscussionOnSubmit:d,formulasModule:u}=e,p=c??a().K.getRect(o);if(!p)return;const m=p.width,g=p.height,f=p.right-m;s().A.setState({open:!0,rect:new DOMRect(f,p.top,m,g),type:"block",content:"reaction",blockStore:o,blockId:o.id,emoji:void 0}),n().W(t,{originGap:4,originRect:p,popupWidth:i().jv,popupHeight:i().GF,isSmallWidth:!1,title:r().A.formatMessage(l().DZ.emojiPicker),currentTab:"emoji",onCancel:()=>s().A.reset(),tabs:[{type:"emoji",title:r().A.formatMessage(l().DZ.emojiTitle),hideRandomButton:!0,onChange:e=>{const o=s().A.state;o.open&&"reaction"===o.content&&(s().A.setState({...o,emoji:e}),(0,l().i5)({environment:t,skipOpeningDiscussion:d,formulasModule:u}),n().I())}}]})}},518362:(e,t,o)=>{o.d(t,{F:()=>a});var n=()=>o(763884),r=()=>o(720665),i=()=>o(834211);function a(e){let{currentUserId:t,spaceId:o}=e;const a=n().A.get({userId:t,key:(0,i().Y)(o)});if(a){const e=(0,r().$l)(a);return Array.isArray(e)?e:[]}return[]}},518548:(e,t,o)=>{o.d(t,{A:()=>v});o(16280),o(944114),o(898992),o(803949),o(296540);var n=o(440961),r=()=>o(908006),i=()=>o(757695),a=()=>o(496603),s=()=>o(534177),l=o(474848);const c={opacity:1},d={opacity:!0},u={width:!0,height:!0,maxWidth:!0,maxHeight:!0,paddingTop:!0,paddingRight:!0,paddingLeft:!0,paddingBottom:!0,marginTop:!0,marginRight:!0,marginLeft:!0,marginBottom:!0},p=200,m=0,g="ease";class f extends(()=>o(254751))().A{constructor(){super(...arguments),this.node=null,this.paused=!1,this.currentStyle={},this.initialStyle={},this.animationTimeout=void 0,this.isVisible=!1,this.didBecomeVisible=!1,this.lastSavedChild=void 0,this.clearCSSAnimation=e=>{this.animationTimeout&&(clearTimeout(this.animationTimeout),this.animationTimeout=void 0,e&&this.handleAnimationEnd())},this.handleAnimationStyleStoreChange=()=>{const e=_(this.props.isVisible,this.props.animationStyle,this.props.exitAnimationStyle);this.applyAnimatedStyle({style:e,animate:!0})}}UNSAFE_willMountOrUpdate(e){!this.isVisible&&e.isVisible&&(this.isVisible=!0,this.didBecomeVisible=!0)}didMount(){const e=h(this.props);e&&e.addListener(this.handleAnimationStyleStoreChange)}didUpdate(e){const t=h(e),o=h(this.props);t!==o&&(t&&t.removeListener(this.handleAnimationStyleStoreChange),o&&o.addListener(this.handleAnimationStyleStoreChange))}didMountOrUpdate(){const e=this.node;if(this.node=b(n.findDOMNode(this)),this.didBecomeVisible)this.initialStyle=this.props.enterAnimationStyle||_(this.props.isVisible,this.props.animationStyle,this.props.exitAnimationStyle),this.applyAnimatedStyle({style:this.initialStyle,animate:!1,force:!0});else if(this.node!==e){const t=e?this.currentStyle:this.initialStyle;this.applyAnimatedStyle({style:t,animate:!1,force:!0})}this.applyAnimatedStyle({style:_(this.props.isVisible,this.props.animationStyle,this.props.exitAnimationStyle),animate:!0}),this.didBecomeVisible&&(this.didBecomeVisible=!1)}willUnmount(){const e=h(this.props);e&&e.removeListener(this.handleAnimationStyleStoreChange),this.paused&&(this.paused=!1,r().default.unpause())}renderComponent(){if(this.isVisible){let e,t=!1;return this.isVisible&&!this.props.isVisible?(t=!0,e=this.lastSavedChild):(e=this.props.render(),this.lastSavedChild=e),(0,l.jsx)(o(753004).q.Provider,{value:t,children:e})}}applyAnimatedStyle(e){const{style:t,animate:o,force:n}=e;if(!n&&a().n4(this.currentStyle,t))return;this.currentStyle=t;Object.prototype.hasOwnProperty.call(setTimeout,"clock");o&&!this.props.skipAnimation?(this.clearCSSAnimation(!1),this.handleAnimationStart(),window.requestAnimationFrame((()=>{this.mutateDOM((()=>{var e,o,n;const r={durationMS:(null===(e=this.props.animationConfig)||void 0===e?void 0:e.durationMS)??p,delayMS:(null===(o=this.props.animationConfig)||void 0===o?void 0:o.delayMS)??m,timingFunction:(null===(n=this.props.animationConfig)||void 0===n?void 0:n.timingFunction)??g};this.renderNodeStyle({properties:t,animationConfig:r}),this.animationTimeout=setTimeout((()=>{this.clearCSSAnimation(!0)}),r.durationMS)}))}))):(this.clearCSSAnimation(!0),this.mutateDOM((()=>{this.renderNodeStyle({properties:t})})))}renderNodeStyle(e){const{properties:t,animationConfig:n}=e,r=this.node;if(!r)return[];let i=!1,l="";const p=this.props.forceTransformStyle,m=[];(0,s().uv)(t).forEach((e=>{const n=t[e],g=0!==n||p,f=1!==n||p;if("transformOrigin"===e&&a().Kg(n))i=!0,r.style.transformOrigin=n;else if(a().Kg(n))r.style.setProperty(e,n),m.push(e);else if("opacity"===e)r.style.opacity=`${(0,o(40845).A)(n,0,1)}`,m.push("opacity");else if((0,s().O)(u,e))r.style[e]=`${n}px`,m.push(e);else if((0,s().O)(d,e)){const t=(0,s().O)(c,e);(!t||t&&c[e]!==n)&&r.style.setProperty(e,String(n))}else"translateX"===e?(i=!0,g&&(l+=`translateX(${n}px) `)):"translateXPercent"===e?(i=!0,g&&(l+=`translateX(${n}%) `)):"translateXCalc"===e?(i=!0,g&&(l+=`translateX(calc(${n})) `)):"translateY"===e?(i=!0,g&&(l+=`translateY(${n}px) `)):"translateYPercent"===e?(i=!0,g&&(l+=`translateY(${n}%) `)):"translateYViewHeight"===e?(i=!0,g&&(l+=`translateY(${n}vh) `)):"translateYCalc"===e?(i=!0,g&&(l+=`translateY(calc(${n})) `)):"scale"===e?(i=!0,f&&(l+=`scale(${Math.max(n??0,0)}) `)):"scaleX"===e?(i=!0,f&&(l+=`scaleX(${Math.max(n??0,0)}) `)):"scaleY"===e&&(i=!0,f&&(l+=`scaleY(${Math.max(n??0,0)}) `))}));const g=t.opacity,f=a().Et(g)&&0!==g&&1!==g;if(this.props.useCompositeLayer&&(""!==l||f)&&(l+="translateZ(0)"),""!==l||i){m.push("transform");const e=r.style;e.mozTransform=e.msTransform=e.webkitTransform=e.transform=l}if(n){const{durationMS:e,delayMS:t,timingFunction:o}=n;return r.style.transitionProperty=m.join(", "),r.style.transitionDuration=`${e}ms`,r.style.transitionDelay=`${t}ms`,r.style.transitionTimingFunction=o,m}{const e=r.style;e.transitionProperty=null,e.transitionDuration=null,e.transitionTimingFunction=null}return[]}handleAnimationStart(){this.didBecomeVisible&&this.props.blockRenderQueueOnEnter&&!1===this.paused&&(this.paused=!0,r().default.pause()),this.props.onAnimationStart&&this.props.onAnimationStart(this.isVisible)}handleAnimationEnd(){this.paused&&(this.paused=!1,r().default.unpause()),this.isVisible&&!this.props.isVisible&&(this.isVisible=!1,this.enqueueForceUpdate()),this.props.onAnimationEnd&&this.props.onAnimationEnd(this.isVisible)}}f.displayName="Animated";const v=f;function h(e){const t=e.animationStyle;if(t instanceof i().default)return t}function _(e,t,n){return e?t instanceof i().default?o(17022).A.withListenerIgnored((()=>t.state)):t||{}:n||{}}function b(e){if(e instanceof HTMLElement){const t=e?window.getComputedStyle(e):void 0;if("contents"===(null==t?void 0:t.display)){if(e.childElementCount>1){const e=new Error("Animated: Can't animate multiple nodes at once");o(449412).Fg(e)}return b((null==e?void 0:e.firstElementChild)??null)}return e}return Text,null}},518646:(e,t,o)=>{o.d(t,{k:()=>g});o(898992),o(354520),o(803949),o(581454);var n=o.n(o(169749)),r=()=>o(522419),i=()=>o(825237),a=()=>o(386164),s=()=>o(502492),l=()=>o(780054),c=()=>o(449506);function d(e){return[e.url,e.downloadName,e.download].filter(Boolean).join(":")}const u=new class{constructor(){this.lru=new(n())({max:1e3,maxAge:o(720665).pT})}set(e,t){this.lru.set(d(e),t)}get(e){return this.lru.get(d(e))}},p=new(o(56322).A)({performRequests:async e=>{const t=e.map((e=>{let{url:t}=e;return t})),n=e[0].environment,r=(0,i().De)(t);if(o(989423).u4({environment:n,event:{eventName:"multi_cell.batch_by_space_id.num_batches",eventProperties:{event_name:"getSignedFileUrls",num_batches:r.length}}}),o(508496).default.checkGate({gateName:"multi_cell_get_signed_urls"})){const e=new Map;for(const{spaceId:t,urls:i}of r){const o=await m({environment:n,urls:i,spaceId:t});for(const[t,n]of i.entries())e.set(d(n),o[t])}const o=new Array(t.length);for(const[n,r]of t.entries())o[n]=e.get(d(r));return o}return await m({environment:n,urls:t,spaceId:void 0})},batchSize:500,maxWorkers:1});async function m(e){const{environment:t,urls:o,spaceId:n}=e,r=await c().callApi({eventName:"getSignedFileUrls",environment:t,data:{urls:o},headers:(0,a().WS)({spaceId:n})});if("failed"===r.type)throw r.error;const{signedUrls:i}=r.data;return o.forEach(((e,t)=>{const o=i[t];u.set(e,o)})),i}async function g(e,t,o){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const a=u.get(t);let c;if(a)c=a;else if(n)c=await p.enqueue({environment:e,url:t});else{const o=(0,i().De)([t]);if(0===o.length)return c;const{spaceId:n,urls:r}=o[0],a=await m({environment:e,urls:r,spaceId:n});if(0===a.length)return c;c=a[0]}return c&&(0,r().T8)(c)&&o&&(c=(0,s().$J)({httpUrl:c,protocol:l().A.protocol,includePort:!0})),c}},518736:(e,t,o)=>{o.d(t,{D8:()=>d,Fh:()=>a,Le:()=>l,SL:()=>c,tX:()=>s});var n=()=>o(179034),r=()=>o(969197),i=()=>o(351360);const a=100,s=(0,o(855355).bX)();function l(e){const{store:t,blockStore:o}=e;return o.useCrdt()&&o.getBlockTitleStore()===t}function c(e){if(!e.isTable(n().ev))return!1;const t=(0,r().T)(e);return!!t&&l({store:e,blockStore:t})}function d(e){var t;const o=(null==e?void 0:e.getCrdtStatus())??(null===(t=i().default.state.currentSpaceStore)||void 0===t?void 0:t.getCrdtStatus())??"off";return"prefer_on"===o||"migrating"===o||"on"===o}},518888:(e,t,o)=>{o.r(t),o.d(t,{GlobalFileUploadStore:()=>n,default:()=>r});o(814603),o(147566),o(198721);class n extends(()=>o(757695))().default{getInitialState(){return{}}getKeyState(e){return this.state[e]}setKeyState(e,t){const o=this.state;let n;if(t){var r;const a=t.file.type.indexOf("image")>=0;var i;if(t.file!==(null===(r=o[e])||void 0===r?void 0:r.file)&&a&&t.file instanceof File)n=null===(i=o[e])||void 0===i?void 0:i.dataURL,t.dataURL=URL.createObjectURL(t.file);o[e]={...t,dataURL:t.dataURL}}else{var a;n=null===(a=o[e])||void 0===a?void 0:a.dataURL,delete o[e]}if(n){const e=n;setTimeout((()=>{URL.revokeObjectURL(e)}),1e3)}this.emit()}isUploading(e){const t=this.state,o=Object.keys(t);for(const n of o){if(e&&!e(n))continue;if(t[n])return!0}return!1}getBlockKey(e){return e}}const r=new n},519839:(e,t,o)=>{o.d(t,{As:()=>Ce,CG:()=>ge,Cn:()=>be,Cq:()=>se,Dj:()=>$e,Eh:()=>We,HG:()=>ae,In:()=>ne,KA:()=>le,LI:()=>Ye,MW:()=>Oe,Mf:()=>Qe,NB:()=>Ze,NM:()=>De,O:()=>Be,OO:()=>Ie,Oq:()=>pe,Oz:()=>Je,RX:()=>Se,Rd:()=>He,UH:()=>je,VZ:()=>ze,W4:()=>ce,XQ:()=>he,Xg:()=>Ge,aK:()=>me,d4:()=>Me,e2:()=>Ae,f5:()=>qe,fG:()=>_e,h6:()=>oe,hH:()=>Ee,hc:()=>Re,l0:()=>we,ln:()=>ye,mM:()=>ve,og:()=>Pe,os:()=>Te,oy:()=>ie,qi:()=>Ke,rU:()=>Xe,rq:()=>ke,t2:()=>Le,vo:()=>xe,wh:()=>Ne,wy:()=>Fe,zE:()=>fe,zv:()=>re});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(672577),o(581454);var n=()=>o(56366),r=()=>o(401497),i=()=>o(584262),a=()=>o(148307),s=()=>o(172385),l=()=>o(700500),c=()=>o(592269),d=()=>o(970013),u=()=>o(713998),p=()=>o(329199),m=()=>o(448801),g=()=>o(110192),f=()=>o(304740),v=()=>o(651124),h=()=>o(416504),_=()=>o(706665),b=()=>o(912720),y=()=>o(179034),S=()=>o(519831),w=()=>o(869558),k=()=>o(919709),I=()=>o(959013),A=()=>o(100622),x=()=>o(496603),C=()=>o(183558),T=()=>o(895876),M=()=>o(42803),P=()=>o(236030),B=()=>o(450510),R=()=>o(794959),E=()=>o(186445),D=()=>o(873050),N=()=>o(544073),L=()=>o(492414),F=()=>o(594794),U=()=>o(972435),O=()=>o(478726),V=()=>o(747100),j=()=>o(963575),z=()=>o(494043),q=()=>o(129522),H=()=>o(489348),W=()=>o(644914),K=()=>o(351360),G=()=>o(441307),$=()=>o(508496),Y=()=>o(548821),Q=()=>o(712505),Z=()=>o(630116),X=()=>o(502438),J=()=>o(308701),ee=()=>o(193513);new Set(["gallery","list","calendar"]);const te=(0,I().YK)({addTypedItemTitle:{id:"collectionViewBlock.action.newItem.typedDatabaseTitle",defaultMessage:"New {singleItemName}"},addItemTitle:{id:"collectionViewBlock.action.newItem.nonTypedDatabaseTitle",defaultMessage:"New"}});function oe(e){return"collectionTypedView"===e.contextType?U().A.formatMessage(te.addTypedItemTitle,{singleItemName:(0,T().$O)(e.databaseType)}):U().A.formatMessage(te.addItemTitle)}function ne(e){const t=Object.keys(e);return t.find((t=>{const o=e[t];return Boolean(o&&"status"===o.type)}))||t.find((t=>{const o=e[t];return Boolean(o&&"select"===o.type)}))||t.find((t=>{const o=e[t];return Boolean(o&&"person"===o.type)}))||t.find((t=>{const o=e[t];return Boolean(o&&"multi_select"===o.type)}))||t.find((t=>{const o=e[t];return Boolean(o&&"relation"===o.type)}))}function re(e){const t=Object.keys(e);return t.find((t=>{const o=e[t];return Boolean(o&&"date"===o.type)}))||t.find((t=>{const o=e[t];return Boolean(o&&"created_time"===o.type)}))||t.find((t=>{const o=e[t];return Boolean(o&&"last_edited_time"===o.type)}))}function ie(e){return Object.keys(e).find((t=>{const o=e[t];return Boolean(o&&"geo_point"===o.type)}))}function ae(e){return Object.keys(e).find((t=>{const o=e[t];return Boolean(o&&"date"===o.type)}))}function se(e){const{collectionId:t,schema:o,property:n,targetCollectionStore:r,omitNewSchema:i}=e,a=o[n];if(!a)return;const s={newSchema:i?{}:{...o,[n]:void 0},deletedSchema:{[n]:o[n]}};if("relation"===a.type&&d().zO(a)&&a.property&&!(0,u().di)(a))if(d().zO(a)===t&&a.property!==n){const e=i?{}:{...s.newSchema,[a.property]:void 0},t={...s.deletedSchema,[a.property]:o[a.property]};s.newSchema=e,s.deletedSchema=t}else if(d().zO(a)!==t&&null!=r&&r.canEditCollection()&&r.isDefined()){const e=d().Dp({id:r.id,schema:r.getSchema(),format:r.getFormat(),space_id:r.getSpaceId()}),t=i?{}:{...e,[a.property]:void 0},o={[a.property]:e[a.property]};s.otherCollectionId=r.id,s.otherCollectionSchema=t,s.otherCollectionDeletedSchema=o}return s}function le(e){const{deletedSchema:t,property:o}=e;if(t[o])return{updateSchema:{[o]:t[o]},updateDeletedSchema:{[o]:null}}}async function ce(e){const{schema:t,properties:o,property:n,propertyGroups:r,parentStore:i,spaceId:a,environment:s}=e,l=t[n];if(!l)return;if(d().st(l))return;const c=(0,C().Ay)(),u={...l,name:(0,g().Q)(l.name)};let p;if("button"===u.type&&u.automation_id){const e=Z().dn.createChildStore(i,{id:u.automation_id,spaceId:a,table:b().yB});await e.load();const t=e.getActionStores();await Promise.all(t.map((e=>e.load())));const o=(0,F().Z1)({environment:s,table:b().yB,spaceId:a});u.automation_id=o,p={sourceAutomationStore:e,targetAutomationId:o}}return{newProperty:c,newPropertySchema:u,newProperties:(()=>{if(!o)return[];const e=o.findIndex((e=>e.property===n)),t=o[e],r={property:c,visible:!0,width:t&&t.width},i=[...o];return i.splice(e+1,0,r),i})(),newPropertyGroups:(()=>{if(!r)return;const e=r.find((e=>(0,_().xT)({propertyGroup:e,propertyId:n})));if(!e)return;return(0,_().mK)({propertyGroups:r,propertyIds:[c],groupId:e.id,belowPropertyId:n})})(),automationUpdate:p}}function*de(e){const{rootStore:t,depth:o=0}=e;if(t.getType()===l().xd.transclusionReference){const e=t.getTransclusionReferenceTargetStore();e&&(yield*de({rootStore:e,depth:o}))}else{const n=t.getContentStores();for(const t of n)yield{blockStore:t,depth:o},t.isNavigableBlock()||!e.goIntoToggles&&z().BN(t)||(yield*de({rootStore:t,depth:t.getType()===l().xd.columnList||t.getType()===l().xd.column||t.getType()===l().xd.transclusionContainer||t.getType()===l().xd.transclusionReference?o:o+1}))}}function ue(e){const{rootStore:t,renderAdditionalBlocks:o,startBlockId:n,tableRenderMode:r}=e,i={image:void 0,blocks:[],isDefined:!0},a=de({rootStore:t,goIntoToggles:void 0!==n});let s=0,c=0,d=!1;for(const{blockStore:u,depth:m}of a){if(n&&!d){if(u.id!==n)continue;d=!0}if(s++,s>p().Tl)return i;u.isDefined()||(i.isDefined=!1);const e=u.getType(),t=u.getModel();if(!e||!t)continue;const a=u.getProperties();if(t.isType(l().Ib)&&!i.image&&a){const t=(0,k().q4_)(a.source);if(t&&((0,f().rS)({url:t})||e===l().xd.image))return i.image={pointer:{table:"block",id:u.id},url:t},i}const g=(0,l().Mp)(e),v=u.isCalloutV2(),h=t.isType(l().EY)&&(!u.isEmptyTitle()||g||v);let _=u;n&&u.id===n&&"table_row"===e&&(_=_.getParentBlockStore());const b=o&&_&&void 0!==(0,R().F)({store:_,tableRenderMode:r});(h||b)&&c<p().Xz&&(i.blocks.push({blockStore:u,depth:m}),g||c++)}return i}function pe(e){const{image:t,blocks:o,isDefined:n}=ue(e);return t?{image:t,blockIds:[],isDefined:n}:{image:void 0,blockIds:o.map((e=>e.blockStore.id)),isDefined:n}}function me(e){var t,o;const{rootStore:n,renderAdditionalBlocks:r,theme:i}=e;if(r&&n.isCollectionView()&&(null===(t=n.getModel())||void 0===t||!t.hasWikiBlockUri())&&(null===(o=n.getAssociatedCollectionStore())||void 0===o||!o.isPageTreeCollection()))return{image:{url:"dark"===i?a().A.images.blockRendererCovers.collectionTableDarkPng:a().A.images.blockRendererCovers.collectionTableLightPng,pointer:{id:n.id,table:n.table,spaceId:n.getSpaceId()}},blockIds:[],isDefined:!0};const{image:s,blocks:c,isDefined:d}=ue({rootStore:n,renderAdditionalBlocks:r,tableRenderMode:"image"});if(s)return{image:s,blockIds:[],isDefined:d};return{image:void 0,blockIds:c.filter((e=>{const{blockStore:t,depth:o}=e;return 0===o&&t.getType()!==l().xd.transclusionReference&&t.getType()!==l().xd.transclusionContainer})).map((e=>e.blockStore.id)),isDefined:d}}function ge(e,t){const o=e.isFullScreenStore.state,n=e.collectionViewStore();if(!n)throw new Error("Collection view store not defined.");const r=e.normalizedFormatStore.state,i=n.isDefined()&&n.getType(),a="board"===i,s="table"===i,l="feed"===i,c=r.collection_group_by,d=r.board_columns,u=c||d;if(u&&t&&$().default.checkGate({gateName:"collection_mobile_load_limits"}))return 10;if(!o||u||l){const e=v().i3(r.inline_collection_first_load_limit,Boolean(c));if("load_limit"===e.type)return e.limit}if(a)return 20;if(o){if(s&&!Boolean(c)){const e=$().default.getConfigKey("collection_virtualized_load_limits","table");return(null==e?void 0:e.initial_limit)??50}return 50}return 20}function fe(e){const{collectionViewStore:t,isFullScreen:o,currentResultCount:n,isMobile:r}=e,i=t.isDefined()&&t.getType(),a="board"===i,s="table"===i,l=t.getFormatStore().getKeyStore("collection_group_by").getValue(),c=t.getFormatStore().getKeyStore("board_columns_by").getValue();if((l||c)&&r&&$().default.checkGate({gateName:"collection_mobile_load_limits"}))return 10;if(a)return 20;if(o){if(s&&!Boolean(l)){const e=$().default.getConfigKey("collection_virtualized_load_limits","table");return(null==e?void 0:e.increment_limit)??50}return 50}return n<=50?50:100}function ve(e,t){const o=e.collectionViewStore();if(!o)return!1;if("collectionSystemView"===e.contextType)return!1;const n=o.getFormatStore().getKeyStore("collection_group_by").getValue();return!t||Boolean(n)}function he(e){const{collectionContextStore:t,isFullScreen:o,reducerResult:n}=e;return n&&n.blockIds.length>0&&!((r=n)&&!r.hasMore)&&ve(t,o);var r}function _e(e){var t;const{collectionContextStore:o,environment:n,intl:r}=e,{device:i}=n;if(!o||i.isMobile&&!$().default.checkGate({gateName:"packaging_page_linking_mobile"})||!$().default.checkGate({gateName:"packaging_page_linking"}))return!1;const a=o.collectionStore(),s=null==a?void 0:a.getModel(),l=o.viewsModuleContextStore;if(!(a&&s&&l&&l.getViewModuleType()))return!1;const d=(0,D().Ay)(o,!1);return!!d&&c().Iw({filter:d,userFilterContext:{userId:n.currentUser.id,userTimeZone:(0,h().P)(),userStartOfWeek:E().XX.state},getRecordModel:a.getRecordModel,experimentService:$().default,intl:r,collectionModel:s,currentPageInRelatedCollection:null===(t=l.currentPageStore())||void 0===t?void 0:t.id,relativeVariableResult:o.relativeVariableStore.state})}function be(e){const{query:t,schema:o}=e,{timeline_by:n,timeline_by_end:r}=t;if(n){const e=o[n];if(e&&"date"!==e.type)return!1}if(r){const e=o[r];if(e&&"date"!==e.type)return!1}return!0}function ye(e){const t=e.getParentBlockStore();return Boolean(t&&t.isLocked())}function Se(e){return Q().default.isSidePeekOpen()&&!(0,V().cq)(e)&&!e.isImmediateColumnChild()&&(e.isRootOrDirectChild()||"page"===e.getType())}function we(e){const{environment:t,isFullScreen:o,store:n,sizeObserver:r,viewType:i,collectionContextStore:a}=e,{device:s,WindowSizeStore:l}=t,c=n.isRootOrDirectChild(),d=!o&&!c,u=H().A.isBlockInTemplate(n),p=(0,M().n)(n);if("feed"===i&&s.isMobile)return{paddingLeft:22,paddingRight:22};if(d&&"gallery"===i)return{paddingLeft:1,paddingRight:1};if(!c||p){return{paddingLeft:0+(i&&a&&B().B2({blockStore:n,isFullScreen:Boolean(o),environment:t,collectionContextStore:a})?P().Fh:0),paddingRight:0}}if((0,V().cq)(n))return{paddingLeft:Q().PeekModePadding.horizontal[Q().default.state.mode],paddingRight:Q().PeekModePadding.horizontal[Q().default.state.mode]};if(s.isPhone)return{paddingLeft:l.getSafePaddingLeftPx((0,E().F8)(t)),paddingRight:l.getSafePaddingRightPx((0,E().F8)(t))};if(o)return{paddingLeft:96,paddingRight:96};if(!u&&!H().A.isBlockInPageSnapshot(n)||H().A.isBlockInWiki(n)){if(null!=a&&a.isFullScreenStore.state||(0,O().Ck)(n,void 0,t)||function(e,t){const{WindowSizeStore:o}=e;return o.state.width-((0,W().kf)(e)+(0,W().zo)(e,t)-(0,W().Ql)(e))<O().x6}(t,(0,V().cq)(n))||Se(n)&&!Q().default.isSidePeekClosingStore.state){const e=(0,E().F8)(t);return{paddingLeft:e,paddingRight:e}}{const e=r.rect.state.width;if(0===e)return;const o=(e-(O().x6-2*(0,E().F8)(t)))/2;return{paddingLeft:o,paddingRight:o}}}{const e=r.rect.state.width;if(0===e)return;const o=u&&(0,O().Ck)(n,Y().Rr.InAppTemplatePreview,t)?20+J().DF:20,i=Math.max((e-O().x6)/2,o);return{paddingLeft:i,paddingRight:i}}}function ke(e){switch(e){case"large":return j().A.card.desktop.large.width;case"small":return j().A.card.desktop.small.width;default:return j().A.card.desktop.medium.width}}function Ie(e){let{collectionViewName:t,collectionViewType:o}=e;return t||U().A.formatMessage(Ge[o??"new"])}function Ae(e){var t;return((null===(t=e.getParentBlockStore())||void 0===t?void 0:t.getCollectionViewsStore().getValue())||[]).map((t=>Z().pS.createChildStore(e,{table:w().Gy,id:t}))).find((e=>"table"===e.getType()))}function xe(e){const{collectionStore:t,collectionViewBlockStore:o,checkNavigableAncestorLocked:n}=e;if(!o||!o.isReady()||null==t||!t.isReady())return!1;if(n&&o.isNavigableAncestorNonEditableState())return!1;const r=null==t?void 0:t.canEditCollection(),i=null==t?void 0:t.getParentBlockStore(),a=null==i?void 0:i.isNonEditableState();return Boolean(r&&!a)}function Ce(e,t){const o=e.getType();if(!o)return!1;if(""===t)return!0;return-1!==Ie({collectionViewName:e.getName(),collectionViewType:o}).toUpperCase().indexOf(t.toUpperCase())}function Te(e){const{newOptions:t,collectionId:o,property:n,schema:r}=e,i=r[n];if(!i)return;if(!d().lx(i)&&"status"!==i.type)return;const a=i.options||[],s=[],l=x().Bq(t),c=a.map((e=>e.value)),{beforeOps:u}=(0,m().i)(c,l);for(const[d,p]of Object.entries(u)){const e=a.find((e=>e.value===d));if(e)if(p){const t=a.find((e=>e.value===p));if(t){const r={pointer:{table:S().Vl,id:o},command:"keyedObjectListBefore",path:["schema",n,"options"],args:{value:e,before:{id:t.id}}};s.push(r)}}else{const t={pointer:{table:S().Vl,id:o},command:"keyedObjectListAfter",path:["schema",n,"options"],args:{value:e}};s.push(t)}}if("status"===i.type){const e=i.groups??[];for(const[r]of e.entries()){const e=t[r];if(!Array.isArray(e))return;const i=a.filter((t=>e.includes(t.value))).map((e=>e.id)),l={pointer:{table:S().Vl,id:o},command:"set",path:["schema",n,"groups",r,"optionIds"],args:i};s.push(l)}}return s.length>0?s:void 0}function Me(e){const{collectionId:t,property:o,propertySchema:n,schema:r,isAscending:i}=e;return Te({newOptions:[...n.options||[]].map((e=>e.value)).sort(((e,t)=>e.localeCompare(t,void 0,{sensitivity:"base"})*(i?1:-1))),collectionId:t,property:o,schema:r})}function Pe(e){const{collectionId:t,property:o,propertySchema:n,newOption:r,isAscending:i}=e,a=n.options||[],s=x().SL(a,(e=>e.value.localeCompare(r.value,void 0,{sensitivity:"base"})*(i?1:-1)>=0));return-1!==s?{pointer:{table:S().Vl,id:t},command:"keyedObjectListBefore",path:["schema",o,"options"],args:{value:r,before:a[s]}}:{pointer:{table:S().Vl,id:t},command:"keyedObjectListAfter",path:["schema",o,"options"],args:{value:r}}}function Be(e){const{viewType:t,format:o}=e;return"board"===t?v().zl(o.board_cover):"gallery"===t?v().zl(o.gallery_cover):"timeline"===t&&v().w3(Boolean(o.timeline_show_table),o.timeline_table_properties||[])}function Re(e){const{viewType:t,property:o}=e;return"table"===t||("board"===t||"gallery"===t?"title"!==o:"calendar"===t&&"title"===o)}function Ee(e){var t;const o=null==e?void 0:e.collectionViewStore(),n=null==o?void 0:o.getType();return null!=o&&null!==(t=o.getUnlistedStatus())&&void 0!==t&&t.isUnlisted&&null!=e&&e.isInlineViewStore.state?"center_peek":(null==e?void 0:e.normalizedFormatStore.state.collection_peek_mode)??(n?N().C9[n]:"side_peek")}function De(e){const{stores:t,phase:o}=X().default.state;return!(o===X().SelectionPhase.Selected&&t.indexOf(e)>=0)&&(Q().default.state.open&&Q().default.isSidePeekOpen()&&Q().default.state.targetStore.id===e.id)}function Ne(e,t){return t?{background:A().Ay.blueWithAlpha(.025),boxShadow:e.collectionTableOutlineUltraThinBlueInputBoxShadow,borderRadius:6}:{borderRadius:6}}function Le(e){const t=e.collectionStore();if(!t)return;const o=t.getParentBlockStore();return o?(0,L().Ay)({store:o,fullyQualified:!1,pageVisitSource:i().y8.Breadcrumb}):void 0}function Fe(e){const{environment:t,store:o,mainEditorCurrentBlockStore:n,collectionContextStore:r,fullyQualified:a,overridePeekMode:l,showMoveTo:c}=e;return!l&&(0,ee().r)(r)?(0,L().Ay)({store:o,fullyQualified:a,pageVisitSource:(null==r?void 0:r.getPageVisitSourceOverride())??i().y8.Expand,showMoveTo:c}):n?(0,L().Ay)({store:n,collectionViewId:null!=r&&r.isFullScreenStore.state?null==r||null===(d=r.collectionViewStore())||void 0===d?void 0:d.id:void 0,fullyQualified:a,peekViewBlockId:o.id,peekMode:Ue({collectionContextStore:r,overridePeekMode:l}),pageVisitSource:(null==r?void 0:r.getPageVisitSourceOverride())??i().y8.PeekOpen,showMoveTo:c}):"chat"===t.RouterStore.state.route.name?(0,s().EY)({pageId:o.id,pageVisitSource:(null==r?void 0:r.getPageVisitSourceOverride())??i().y8.PeekOpen,isMobile:t.device.isMobile,peekModeParam:Ue({collectionContextStore:r,overridePeekMode:l})}):void 0;var d}function Ue(e){const{collectionContextStore:t,overridePeekMode:o}=e,n=null==t?void 0:t.getViewType();let r;r=null!=t&&t.isUnlistedViewStore.state&&null!=t&&t.isInlineViewStore.state?"center_peek":(null==t?void 0:t.normalizedFormatStore.state.collection_peek_mode)??(n?N().C9[n]:void 0);const i=o??(0,Q().getPeekModeFromCollectionPeekModeFormat)(r);return(0,Q().getUrlParamFromPeekMode)(i)}function Oe(e){var t;const o=null===(t=e.getCollectionViewStores().find((e=>"page"===e.getType())))||void 0===t?void 0:t.getFormat().page_pointer;if(o)return Z().Bv.createChildStore(e,{table:y().ev,id:null==o?void 0:o.id,spaceId:e.getSpaceId()})}function Ve(e){const t=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null==e?void 0:e.findRecordStoreUIAncestor((o=>o instanceof Z().Bv&&o.isCollectionView()&&(t||o.id!==e.id))).ancestor}(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]);if(t)return q().K.findCollectionViewBlockFromId(t.id)}function je(e){const t=Ve(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]);if(t&&"collectionContextStore"in t)return t.collectionContextStore}async function ze(e){let{environment:t,collectionStore:o}=e;const n=o.getParentBlockStore();if(await(null==n?void 0:n.load()),null==n||!n.isCollectionView())throw new Error("collectionViewBlockStore not found");const r=n.getCollectionViewStores();if(0===r.length)throw new Error("collectionViewStores not found");const i=r[0];await i.load();const a=new(G().A)(t);return a.setContext({type:"collectionView",collectionViewBlockStore:n,collectionStore:o,collectionViewStore:r[0],pageVisitSourceOverride:void 0}),a}function qe(e){var t,o;let{environment:n,collectionContextStore:r,overrideViewType:i}=e;if(n.device.isMobile)return!1;if("table"!==(null===(t=r.collectionViewStore())||void 0===t?void 0:t.getType()))return!1;if(r.isInHomeWidgetStore.state||r.isUnlistedViewStore.state)return!1;if("feed"===i)return!1;const{currentUserStore:a}=K().default.state,s=Boolean(r.permissionScopesStore.state.canEditContent||"collectionTypedView"===r.contextType&&(null===(o=r.collectionViewBlockStore())||void 0===o?void 0:o.canEdit()));return!!a&&s}function He(e,t){let o=t;return e.every((e=>{if(e.getType()===l().xd.page||e.getType()===l().xd.collectionViewPage){var t;const n=null===(t=Ve(e,!1))||void 0===t||null===(t=t.getBlockStore())||void 0===t?void 0:t.id;return!!n&&(void 0===o&&(o=n),n===o)}return!1}))}function We(e){return void 0!==e&&e>=0}function Ke(e){return void 0!==e?e+1:0}const Ge=(0,I().YK)({new:{id:"database.viewSettings.createViewTab.title",defaultMessage:"New view"},board:{id:"database.collectionView.untitledName.board",defaultMessage:"Board"},gallery:{id:"database.collectionView.untitledName.gallery",defaultMessage:"Gallery"},timeline:{id:"database.collectionView.untitledName.timeline",defaultMessage:"Timeline"},calendar:{id:"database.collectionView.untitledName.calendar",defaultMessage:"Calendar"},list:{id:"database.collectionView.untitledName.list",defaultMessage:"List"},table:{id:"database.collectionView.untitledName.table",defaultMessage:"Table"},page:{id:"database.collectionView.untitledName.page",defaultMessage:"Page"},chart:{id:"database.collectionView.untitledName.chart",defaultMessage:"Chart"},form_editor:{id:"database.collectionView.untitledName.form_editor",defaultMessage:"Form"},feed:{id:"database.collectionView.untitledName.feed",defaultMessage:"Feed"},map:{id:"database.collectionView.untitledName.map",defaultMessage:"Map"},chat:{id:"database.collectionView.untitledName.chat",defaultMessage:"Chat"},custom:{id:"database.collectionView.untitledName.custom",defaultMessage:"Custom"}});function $e(e){let{store:t,collectionContextStore:o}=e;return"collectionSystemView"===o.contextType?o.collectionStore():t.getAssociatedCollectionStore()}function Ye(e){return"page"===e?"page_view":"chat"===e?"chat_view":"custom"===e?"custom_view":e}function Qe(e){const{collectionStore:t,sourceCollectionViewBlockStore:o,currentCollectionViewBlockStore:n,currentCollectionViewStore:r,constraints:i}=e;let a=x().hS([...n.getCollectionViewStores(),...o.getCollectionViewStores()],(e=>e.id)).filter((e=>{var o;return(null===(o=e.getCollectionStore())||void 0===o?void 0:o.id)===t.id&&e.id!==r.id&&"page"!==e.getType()&&"form_editor"!==e.getType()}));if(null!=i&&i.viewType&&(a=[...a.filter((e=>e.getType()===i.viewType)),...a.filter((e=>e.getType()!==i.viewType))]),null!=i&&i.viewPointer){const{id:e}=i.viewPointer,t=a.find((t=>t.pointer.id===e))||Z().pS.createChildStore(o,i.viewPointer);a=[t,...a.filter((t=>t.pointer.id!==e))]}return a}function Ze(e,t){var o,n,r;if(t.isMobile)return!0;const i="source"===e.getCollectionViewBlockSourceState(),a=Boolean(null===(o=e.collectionStore())||void 0===o?void 0:o.isSyncedCollection()),s=Boolean(null===(n=e.collectionStore())||void 0===n?void 0:n.isPageTreeCollection()),l=Boolean(null===(r=e.collectionViewBlockStore())||void 0===r?void 0:r.canEditMembership());return!i||a||s||!l}function Xe(e){let{isMobile:t}=e;return t?52:41}function Je(e){const t=(0,r().DP)();return(0,n().K8)((()=>{const o=e.collectionViewBlockStore();if(!o)return;const n=o.findRecordStoreUIAncestor((e=>Boolean(e instanceof Z().Bv&&e.getRecordStoreUIParent()&&e.getFormat().block_color&&!e.isCollectionView()))).ancestor;if(n&&n instanceof Z().Bv){const e=n.getType(),o=n.getFormat().block_color;return e===l().xd.callout?(0,A().ed)(o,t):(0,A().k5)(o,t)}}),[e,t],{useDeepEqual:!0,debugName:"inheritedBlockColorStore"})}},520257:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},521099:(e,t,o)=>{o.d(t,{j:()=>n});const n=44},521358:(e,t,o)=>{o.d(t,{QQ:()=>K,rW:()=>W,bC:()=>z,nD:()=>G,Fr:()=>q});o(16280),o(944114),o(898992),o(354520),o(672577),o(803949),o(581454);var n=o(296540),r=()=>o(66689),i=()=>o(151744),a=()=>o(148307),s=()=>o(743176),l=()=>o(452951),c=()=>o(212439),d=()=>o(735384),u=()=>o(206267),p=()=>o(179034),m=()=>o(96689),g=()=>o(854150),f=()=>o(959013),v=()=>o(100622),h=()=>o(496603),_=()=>o(534177),b=()=>o(284371),y=()=>o(128427),S=()=>o(449506),w=()=>o(235191),k=()=>o(901389),I=()=>o(896628),A=()=>o(56366),x=()=>o(401497),C=()=>o(745266),T=()=>o(317182),M=o(474848);function P(e){const{relatedDependencies:t}=e,o=(0,x().DP)(),r=(0,A().K8)((()=>{const e=null==t?void 0:t.viewDeps;return e?e.map((e=>({name:e.getName(),icon:e.getFormat().collection_view_icon,type:e.getType()}))):[]}),[t.viewDeps]),i=n.useCallback((e=>(0,M.jsxs)("span",{style:{marginRight:10,display:"inline-block"},children:[(0,M.jsx)(C().h,{color:"light",viewIcon:e.icon,viewType:e.type,style:{display:"inline-block",verticalAlign:"middle",marginRight:2,marginBottom:2},size:13}),e.name]},e.name)),[]),a=[{key:"entity_type",header:void 0},{key:"entities",header:void 0}];return(0,M.jsx)(T().A,{columns:a,rows:(()=>{const e=[],n=null==t?void 0:t.propertyDeps;if(n.length>0){const t=n.map((e=>(0,M.jsxs)("span",{style:{marginRight:10,display:"inline-block"},children:[(0,M.jsx)(s().Ay,{icon:e.icon,type:e.type,size:13,style:{display:"inline-block",verticalAlign:"middle",marginRight:2,marginBottom:2},theme:o}),e.name]},e.name))),r=(0,M.jsx)(f().sA,{id:"appTemplates.featureBundleDelete.properties",defaultMessage:"{count, plural, one {1 property} other {{count} properties}}",values:{count:t.length}});e.push({key:"bundledProperties",columns:[[r],t]})}if(r.length>0){const t=r.map((e=>i(e))),o=(0,M.jsx)(f().sA,{id:"appTemplates.featureBundleDelete.views",defaultMessage:"{count, plural, one {1 view} other {{count} views}}",values:{count:t.length}});e.push({key:"bundledViews",columns:[[o],t]})}return e})(),hideHeader:!0,cellStyle:{width:"40%"}})}var B=()=>o(16006),R=()=>o(601734),E=()=>o(862292),D=()=>o(342),N=()=>o(609429),L=()=>o(972435),F=()=>o(695625),U=()=>o(878423),O=()=>o(630116),V=()=>o(313892);const j=(0,f().YK)({multiDBNameConnector:{id:"appTemplateHelpers.multiDBNameConnector",defaultMessage:"and"}});function z(e){const{environment:t,collectionViewBlockStore:o,collectionStore:n,databaseType:a,propertyMapping:s,typedPropertySchemas:l,transaction:c}=e;if(n.isTypedCollection())throw new Error("Collection is already typed");const d=r().Fh[a].blockUri,p=a,m={};Object.entries(s).forEach((e=>{let[o,r]=e;if(!r||r===i().Ul)return;const a=l[o],s=n.getSchema()[r];if(!s)throw new Error("Mapped property does not exist");a&&a.type!==s.type&&(w().Hj({environment:t,collectionStore:n,property:r,type:a.type,transaction:c}),m[r]=s.type)}));const g=Object.entries(s).filter((e=>{let[t,o]=e;return o===i().Ul})).map((e=>{let[t,o]=e;return t})),f={};g.forEach((e=>{const t=l[e];t&&(f[e]=t)})),Object.entries(f).forEach((e=>{let[o,r]=e;const i=w().IL({environment:t,collectionStore:n,collectionViewArgs:void 0,propertyName:r.name,propertyType:r.type,transaction:c});s[o]=i})),I().zA({stores:[o],update:{app_id:u().JW(),app_config_uri:d,app_uri_map:{[d]:o.id,[p]:n.id}},transaction:c}),I().zA({stores:[n],update:{app_config_uri:p,app_uri_map:s,mapped_property_types:m},transaction:c})}function q(e){var t;const{environment:o,collectionContextStore:n,transaction:r}=e,i=n.collectionStore(),a=n.collectionViewBlockStore();if(!i||!a)return;const s=(null===(t=i.getFormat())||void 0===t?void 0:t.mapped_property_types)??{};Object.entries(s).forEach((e=>{let[t,n]=e;w().Hj({environment:o,collectionStore:i,property:t,type:n,transaction:r})})),I().zA({stores:[a],update:{app_id:void 0,app_config_uri:void 0,app_uri_map:void 0},transaction:r}),I().zA({stores:[i],update:{app_config_uri:void 0,app_uri_map:void 0,mapped_property_types:void 0},transaction:r}),(0,y().Y)({environment:o,database_type:void 0,collectionContextStore:n})}async function H(e){const{environment:t,blockStore:o}=e,n=o.getFormat().app_id;if(!n)return[o];const r=await S().callApi({eventName:"getCollectionViewBlocksByAppId",environment:t,data:{spaceId:o.getSpaceId(),appId:n}}),i=o.getParentStore();return"success"!==r.type||void 0===i?[o]:r.data.result.map((e=>O().Bv.createChildStore(i,{table:p().ev,id:e.blockId,spaceId:o.getSpaceId()})))}async function W(e){const{environment:t,block:o,action:n}=e,i=o.getFormat().app_config_uri||"";if(i===r().d0&&(N().e.locallyMutatedTasksDatabase=!0),V()._q.includes(i)){const e=await async function(e){const{environment:t,blockStore:o}=e,n=o.getParentStore();if(!n)return[o];const r=await H({environment:t,blockStore:o}),i=n.id;return r.filter((e=>{var t;return(null===(t=e.getParentStore())||void 0===t?void 0:t.id)===i}))}({environment:t,blockStore:o});if(e.length<=1)return[o];const r=function(e,t,o){if("delete"===e)return{message:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDeleteAlert.message",defaultMessage:"Are you sure you want to delete {dbName}?",values:{dbName:t.getTitleValue()}}),description:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDeleteAlert.description",defaultMessage:"{appName} work closely together. You can delete them together, or you might encounter issues after deletion.",values:{appName:o}}),allLabel:(0,M.jsx)("div",{style:{maxWidth:"300",textOverflow:"ellipsis",overflowX:"hidden"},children:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDeleteAlert.allLabel",defaultMessage:"Delete {appName}",values:{appName:o}})}),cancelLabel:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDeleteAlert.cancelLabel",defaultMessage:"Cancel"}),oneLabel:(0,M.jsx)("div",{style:{maxWidth:"300",textOverflow:"ellipsis",overflowX:"hidden"},children:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDeleteAlert.oneLabel",defaultMessage:"Delete {dbName} only",values:{dbName:t.getTitleValue()}})}),actionIcon:d().I};if("move"===e)return{message:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBMoveAlert.message",defaultMessage:"Are you sure you want to move {dbName}?",values:{dbName:t.getTitleValue()}}),description:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBMoveAlert.description",defaultMessage:"{appName} work closely together. You can move them together, or you might encounter issues after separating.",values:{appName:o}}),allLabel:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBMoveAlert.allLabel",defaultMessage:"Move together"}),cancelLabel:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBMoveAlert.cancelLabel",defaultMessage:"Cancel"}),oneLabel:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBMoveAlert.oneLabel",defaultMessage:"Only move {dbName}",values:{dbName:t.getTitleValue()}}),actionIcon:l().Z};if("duplicate"===e)return{message:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDuplicateAlert.message",defaultMessage:"Are you sure you want to duplicate {dbName}?",values:{dbName:t.getTitleValue()}}),description:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDuplicateAlert.description",defaultMessage:"{appName} work closely together. You can duplicate them together, or you might encounter issues after separating.",values:{appName:o}}),allLabel:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDuplicateAlert.allLabel",defaultMessage:"Duplicate together"}),cancelLabel:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDuplicateAlert.cancelLabel",defaultMessage:"Cancel"}),oneLabel:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDuplicateAlert.oneLabel",defaultMessage:"Only duplicate {dbName}",values:{dbName:t.getTitleValue()}}),actionIcon:c().V};throw(0,_().HB)(e)}(n,o,function(e){if(1===e.length)return e[0].getTitleValue().toString();let t="";for(let o=0;o<e.length-1;o++)t+=e[o].getTitleValue(),e.length>2?t+=", ":t+=" ";return t+=`${L().A.formatMessage(j.multiDBNameConnector)} ${e[e.length-1].getTitleValue()}`,t}(e)),i=await function(e,t){const{message:o,description:n,allLabel:r,cancelLabel:i,oneLabel:s,actionIcon:l}=e;return new Promise((e=>{k().ui({showCancel:!1,keepFocus:!1,message:(0,M.jsxs)("div",{style:{textAlign:"center"},children:[(0,M.jsxs)("span",{style:{display:"inline-block",verticalAlign:"-0.15em",position:"relative"},children:[(0,M.jsx)("img",{src:a().A.images.appPackages.projectsIconSvg,style:{width:"1.4em",height:"1.4em"}}),l({width:"0.9em",height:"0.9em",position:"absolute",fill:v().Tj.red,right:"-0.3em",bottom:"0.05em"})]}),(0,M.jsx)("div",{style:{fontWeight:b().Wy.semibold,margin:"0.7em"},children:o}),(0,M.jsx)("div",{style:{fontSize:14},children:n})]}),items:"delete"===t?[{label:s,color:"red",onAccept:()=>{e("one")}},{label:r,onAccept:()=>{e("all")}},{label:i,onAccept:()=>{e("cancel")}}]:[{label:r,color:"blue",onAccept:()=>{e("all")}},{label:s,onAccept:()=>{e("one")}},{label:i,onAccept:()=>{e("cancel")}}],handleCancel:()=>{e("cancel")}})}))}(r,n);if("cancel"===i)return"user_canceled";const s=[o];if("all"===i)for(const t of e)if(t.id!==o.id){const e=F().T.findSelectablesFromIds([t.id]);e.length>0?s.push(e[0].props.store):s.push(t)}return s}return[o]}async function K(e){var t;const{environment:o,collectionViewBlockStore:n,appParentStore:r}=e,i=n.getFormat().app_id,a=i?await S().callApi({eventName:"getCollectionViewBlocksByAppId",environment:o,data:{spaceId:n.getSpaceId(),appId:i}}):void 0,s=null===(t=U().A.state.caches[D().oB])||void 0===t?void 0:t.inMemoryRecordCache;return(0,_().O9)(null==a?void 0:a.type)&&"failed"!==(null==a?void 0:a.type)&&"success"===(null==a?void 0:a.type)?a.data.result.map((e=>{const t=O().Bv.createChildStore(r,{table:p().ev,id:e.blockId,spaceId:n.getSpaceId()});return s?t.clone(s):t})).filter((e=>e.isType("collection_view")||e.isType("collection_view_page"))):[n]}async function G(e){var t;let{environment:o,property:n,collectionContextStore:r,theme:i,from:a}=e;const{appTemplatesSetupActions:l,appConfigs:c}=await R().Aw.load(),d=r.collectionStore(),u=r.collectionViewBlockStore(),v=null==u?void 0:u.getCollectionViewStores();if(!(d&&u&&v&&u.getFormat().app_config_uri))return!1;const _=d.getSchema()[n],y=d.getFormat().app_config_uri;if(!_||!y)return!1;const S=(0,V().lS)(c(),y);if(!S)return!1;const w=h().oE([...Object.keys(d.getPropertyMapping()||{}),...Object.keys((null===(t=u.getFormat())||void 0===t?void 0:t.app_uri_map)||{})]),I=(0,V().Ts)(w,S),A=h().oE([I.find((e=>e.uri===n))]),x=await E().T.formulas.load(),C=(0,V().LS)({validDependencies:A,dependencies:I,collectionStore:d,collectionViewBlockStore:u,viewStores:v,formulasModule:x}),{validDependencies:T}=C;if(0===T.length)return!1;const D=null==u?void 0:u.getParentStore();if(!d||!u||!D||D.table!==m().NX&&D.table!==p().ev&&D.table!==g().yK)return!1;const N=await K({environment:o,collectionViewBlockStore:u,appParentStore:D}),L=[{label:(0,M.jsx)(f().sA,{id:"appTemplatesHelpers.bundledPropertyDelete.deleteMessage",defaultMessage:"{count, plural, one {Delete} other {Delete all}}",values:{count:T.length}}),color:"red",onAccept:()=>l.removeTypedDependencies({environment:o,dependencies:T,appCollectionViewBlockStores:N,from:a})}],F=T.length>1&&(0,M.jsx)(P,{relatedDependencies:C,collectionContextStore:r});return k().ui({message:(0,M.jsxs)("div",{style:{textAlign:"center"},children:[(0,M.jsx)("span",{style:{fontWeight:b().Wy.medium},children:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.bundledPropertyDelete.message",defaultMessage:"Delete {property} property for everyone on {databaseName}?",values:{databaseName:(0,M.jsx)(B().A,{style:{display:"inline",fontWeight:b().Wy.medium},shouldWrap:!0,store:d}),property:(0,M.jsxs)("span",{children:[(0,M.jsx)(s().Ay,{icon:_.icon,type:_.type,size:18,style:{verticalAlign:"middle",display:"inline-block",marginRight:3,marginBottom:2},theme:i}),_.name]})}})}),T.length>1&&(0,M.jsx)("div",{style:{margin:"0.17em"},children:(0,M.jsx)("span",{style:{fontSize:13,fontWeight:b().Wy.light},children:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.bundledPropertyDelete.description",defaultMessage:"These related entities will also be deleted since they work together."})})})]}),description:F,showCancel:!0,keepFocus:!0,innerStyle:{width:480},items:L}),!0}},522200:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(178624).R)({key:"spreadsheet_prototype_store",namespace:o(419494).Bq,important:!1,trackingType:"necessary"})},522827:(e,t,o)=>{o.d(t,{KN:()=>u,QZ:()=>m,ax:()=>p,t6:()=>g,yW:()=>f});o(898992),o(354520),o(737550);var n=()=>o(289915),r=()=>o(410486),i=()=>o(970013),a=()=>o(799829),s=()=>o(179034),l=()=>o(519831),c=()=>o(630116),d=()=>o(685889);function u(e,t){return(0,a().GN)(e,t)}function p(e,t,o,n){const r=e.relativeVariableStore.state;if(r){const e=r[o.id],i=null==e?void 0:e[t];if(i){return c().Bv.createChildStore(n,{table:s().ev,id:i,spaceId:o.spaceId})}}}function m(e){var t;const{blockStore:o,collectionId:i,appConfigUri:s,variable:l,schema:c}=e;if((null===(t=o.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==i)return!1;const d=a().n$[s][l].reducer,u=d.getProperty(),p=c[u],m=o.getPropertyValue(u),g=d.getPropertyFilter(c,l);return!!(0,n().cM)({filter:g,filterType:"status",relativeVariableValues:void 0})((0,r().po)({propertySchema:p,propertyValue:m}))}function g(e,t,o){if((0,n().Pq)(t.filter)){if(((0,n().gc)(t.filter)?(0,n().Rh)(t.filter):[]).some((e=>"relative"===e.type)))return function(e,t,o){const n=o.getSchema()[t];return!(!n||!(0,i().nC)(n))&&(0,a().GN)((0,d().D3)(n,e),(0,d().LQ)(n,o))}(e,t.property,o)}return!0}function f(e,t,o){return!!e&&Object.values(e).some((e=>{if("groups"===e.type&&"relation"===e.groupBy.type){const n=e.groupBy.property,r=t[n];if(r.collection_pointer){const e=c().md.createChildStore(o,{table:l().Vl,id:r.collection_pointer.id}),t=e.getFormat().app_config_uri;return t&&a().n$[t]&&e.isDefined()&&(0,a().GN)(e.getSchema(),t)}}return!1}))}},522945:(e,t,o)=>{o.d(t,{$C:()=>s,Ay:()=>l});var n=o(296540),r=()=>o(484714),i=()=>o(60382),a=()=>o(592678);let s={x:0,y:0,moved:!1,device:"mouse"};function l(){const e=(0,r().v3)();(0,n.useEffect)((()=>(e.device.isMobile?(window.addEventListener("touchstart",c),window.addEventListener("touchmove",d),window.addEventListener("mousedown",u),window.addEventListener("mousemove",p)):(window.addEventListener("mousedown",u),window.addEventListener("mousemove",p)),()=>{e.device.isMobile?(window.removeEventListener("touchstart",c),window.removeEventListener("touchmove",d),window.removeEventListener("mousedown",u),window.removeEventListener("mousemove",p)):(window.removeEventListener("mousedown",u),window.removeEventListener("mousemove",p))})),[e.device.isMobile])}function c(e){const t=e.touches[0];s={moved:!1,x:t.clientX,y:t.clientY,device:(0,a().Qn)(t)}}function d(e){const{x:t,y:o}=s,n=e.touches[0];(0,i().A)(t,o,n.clientX,n.clientY)>a().tC[(0,a().Qn)(n)]&&(s={...s,moved:!0})}function u(e){s={moved:!1,x:e.clientX,y:e.clientY,device:"mouse"}}function p(e){const{x:t,y:o}=s;(0,i().A)(t,o,e.clientX,e.clientY)>a().tC.mouse&&(s={...s,moved:!0})}},522986:(e,t,o)=>{o.d(t,{VN:()=>f,XQ:()=>h,gu:()=>_,ho:()=>g,iF:()=>b,qS:()=>v,tY:()=>y,vF:()=>S});var n=o(440961),r=()=>o(908006),i=()=>o(970013),a=()=>o(713998),s=()=>o(919709),l=()=>o(57618),c=()=>o(620689),d=()=>o(778417),u=()=>o(606952),p=()=>o(725614),m=()=>o(317909);function g(e){const{environment:t,blockPropertyValueOverlayStore:o,store:a,additionalStores:g=[],property:f,format:v,preventClearSelection:h,insertChar:_,uploadFiles:b,disableHorizontalEdgeScroll:y,isNewBlock:S,collectionContextStore:w,collectionSchema:k,mode:I,collectionsBulkActionsToolbarStore:A,readOnly:x,sizing:C,formQuestionStore:T,onClose:M}=e;let P=(null==w?void 0:w.normalizedSchemaStore.state)??a.getSchema();k&&(P=k);const B=P[f],R=l().A.findBlockPropertyValue(a,f,v);let E=e.rect;const D=null==R?void 0:R.getNode();if(D&&(c().hT({element:D,environment:t,vertical:{reveal:"closest"},horizontal:y?void 0:{reveal:"closest"},scrollerContext:null==R?void 0:R.getScrollerContext()}),!E)){const e=n.findDOMNode(D);e instanceof Element&&(E=e.getBoundingClientRect())}if(!E)return;const N=a.clone();if(o.setState({isOpen:!0,store:a,clonedStore:N,additionalStores:g,property:f,format:v,rect:E,preventClearSelection:h,insertChar:_,uploadFiles:b,isNewBlock:S,collectionContextStore:w,collectionSchema:k,mode:I,collectionsBulkActionsToolbarStore:A,readOnly:x,sizing:C,formQuestionStore:T,onClose:M}),!A||"title"!==(null==B?void 0:B.type)&&"text"!==(null==B?void 0:B.type)||null==A||A.setState({textStoresBeingEdited:[...g,a]}),B&&i().YW(B.type)){h||d().IU({environment:t});const e=N.getPropertyStore(f);_&&m().createAndCommit({userAction:"blockPropertyValueOverlayActions.open",environment:t,canUndo:!0,perform:o=>{u().KY({environment:t,store:e,value:s().x9d(_),transaction:o})}}),r().default.afterNextFlush((()=>{r().default.afterNextFlush((()=>{r().default.afterNextFlush((()=>{p().setSelectionAtEnd({store:e})}))}))}))}else h||d().IU({environment:t}),p().clear({preventDismissMobileKeyboard:h,environment:t})}function f(e){const{environment:t,blockPropertyValueOverlayStore:o}=e,n=o.state;var r;n.isOpen&&(n.preventClearSelection||d().IU({environment:t}),n.onClose&&n.onClose(),o.reset(),null===(r=n.collectionsBulkActionsToolbarStore)||void 0===r||r.setState({textStoresBeingEdited:[]}))}function v(e){const{stores:t,property:o,transaction:n}=e,r=t[0].getPropertyStore(o),i=(0,a().wu)(r.getValue());for(const s of t)u().KY({environment:s.environment,store:s.getPropertyStore(o),value:(0,a().rN)(!i),transaction:n})}function h(e){const{blockPropertyValueOverlayStore:t}=e,o=t.state;if(o.isOpen){const{store:t,property:i}=o,a=l().A.findBlockPropertyValue(t,i);var n,r;if(null!=a&&a.props.onTab)null==a||null===(n=(r=a.props).onTab)||void 0===n||n.call(r);else f(e)}}function _(e){const{blockPropertyValueOverlayStore:t}=e,o=t.state;if(o.isOpen){const{store:t,property:i}=o,a=l().A.findBlockPropertyValue(t,i);var n,r;if(null!=a&&a.props.onUntab)null==a||null===(n=(r=a.props).onUntab)||void 0===n||n.call(r);else f(e)}}function b(e){const{blockPropertyValueOverlayStore:t}=e,o=t.state;if(o.isOpen){const{store:t,property:i}=o,a=l().A.findBlockPropertyValue(t,i);var n,r;if(null!=a&&a.props.onEnter)null==a||null===(n=(r=a.props).onEnter)||void 0===n||n.call(r);else f(e)}}function y(e){const{blockPropertyValueOverlayStore:t}=e,o=t.state;if(o.isOpen){const{store:t,property:i}=o,a=l().A.findBlockPropertyValue(t,i);var n,r;if(null!=a&&a.props.onEsc)null==a||null===(n=(r=a.props).onEsc)||void 0===n||n.call(r);else f(e)}}function S(e){const{blockPropertyValueOverlayStore:t}=e,o=t.state;if(o.isOpen){const{store:t,property:i}=o,a=l().A.findBlockPropertyValue(t,i);var n,r;if(null!=a&&a.props.onBgClick)null==a||null===(n=(r=a.props).onBgClick)||void 0===n||n.call(r);else f(e)}}},523584:(e,t,o)=>{o.d(t,{B1:()=>p,Bj:()=>d,Fr:()=>u,k2:()=>i});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454);var n=()=>o(496603),r=()=>o(711771);const i=3,a=5,s=new Set(["a","an","and","are","as","at","be","but","by","for","if","in","is","it","of","on","or","that","the","to","was","will","with"]);function l(e,t,o){return e.length>=i}function c(e,t,o){return e.length>=a&&.2}function d(e){return e.split(/[^\w]+/g).filter((e=>!s.has(e)))}async function u(){const{default:e}=await r().f.load(),t=new e({fields:["text","id","inits"],storeFields:["block"],searchOptions:{prefix:l,fuzzy:c},tokenize:(e,t)=>e.split(/\s/g),processTerm:(e,t)=>{const o=e.toLowerCase();if(!s.has(e))switch(t){case"text":{const e=d(o).filter((e=>e.length>i));return(0,n().sb)([o,...e])}case"inits":return[...Array(e.length).keys()].slice(0,e.length-i+1).map(((e,t)=>o.slice(t)));default:return o}}});return{index:t,getAllBlocks:()=>t.search(e.wildcard)}}function p(e,t,o){const n=e.normalize().toLowerCase(),r=t.normalize().toLowerCase();if(n===r)return o.exactMatch;const i=r.indexOf(n);return 0===i?o.prefixMatch:" "===r[i-1]?o.wordPrefixMatch:i>-1?o.substringMatch:1}},524165:(e,t,o)=>{o.d(t,{MH:()=>a,oQ:()=>l,uZ:()=>s});var n=()=>o(534177),r=()=>o(154807),i=()=>o(812412);const a=28,s=24;function l(e){const t=(0,i().dV)(e);let o;switch(t){case"xSmall":case"small":case"medium":o=300;break;case"large":o=380;break;case"xLarge":o=r().YG+2*s;break;default:(0,n().HB)(t)}return{totalWidth:o,widthMinusPadding:o-2*s}}},524450:(e,t,o)=>{o.d(t,{A:()=>r});o(581454);class n extends(()=>o(757695))().default{constructor(){super(...arguments),this.pause=()=>{this.setState({active:!1,onActive:[]})},this.resume=()=>{this.state.onActive.map((e=>e())),this.setState({active:!0,onActive:[]})}}getInitialState(){return{active:!0,onActive:[]}}whenActive(e){this.state.active?e():this.setState({...this.state,onActive:o(496603).sb([...this.state.onActive,e])})}}const r=new n},524539:(e,t,o)=>{o.d(t,{Ce:()=>h,Ym:()=>b,_P:()=>y,kl:()=>_});o(898992),o(354520),o(672577),o(803949),o(581454),o(737550),o(296540);var n=()=>o(763884),r=()=>o(179034),i=()=>o(496603),a=()=>o(720665),s=()=>o(116008),l=()=>o(776894),c=()=>o(554060),d=()=>o(351360),u=()=>o(630116),p=()=>o(95313),m=()=>o(579627),g=()=>o(436572),f=o(474848);const v=10;function h(e){const{environment:t,movedItems:o,previousParentPointers:n,moveToLocation:r,disableSuccessToast:i,numSubitems:a}=e,d=o.some((e=>{var t;const o=null==n||null===(t=n[e.id])||void 0===t?void 0:t.id,r=e.getParentId();return!(!o||o===r)})),u=o.some((e=>{var t;return"space"===(null==n||null===(t=n[e.id])||void 0===t?void 0:t.table)}));if(!i&&d){var p;g().D6({label:(0,l().lD)({environment:t,movedItems:o,moveToLocation:r,numSubitems:a}),right:(0,f.jsx)(c().F,{moveToLocation:r,movedItems:o,hideUndoButton:u})});const e=s().A.state.open?null===(p=s().A.state)||void 0===p?void 0:p.blockId:void 0;s().A.state.open&&e&&o.find((t=>t.id===e))&&s().A.setState({open:!1,rect:new DOMRect})}}function _(e){const{environment:t,transaction:o,moveToStore:n,targetBlocks:r,from:i}=e,{currentUserStore:a}=d().default.state;null!=a&&a.isDefined()&&n.canEdit()&&!n.canAdmin()&&r.forEach((e=>{if(e.canAdmin())return p().to(t,{from:i}),m().zP({transaction:o,store:e,environment:t,permissionItems:[{type:"user_permission",user_id:a.id,role:"editor"}]})}))}async function b(e,t,o){const r=await y(e,t),a=i().sb([o,...r]).slice(0,v);n().A.set({userId:e.environment.currentUser.id,key:S(t),value:JSON.stringify(a)})}async function y(e,t){const o=n().A.get({userId:e.environment.currentUser.id,key:S(t)});if(o){const t=(0,a().$l)(o);if(t){const o=await Promise.all(t.map((async t=>{const o=u().Bv.createChildStore(e,{table:r().ev,id:t});return await o.load(),o.canEdit()})));return t.filter(((e,t)=>o[t]))}}return[]}function S(e){return`recentMoveToTargets2:${e}`}},525112:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},525569:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});o(16280);class n extends(()=>o(757695))().default{constructor(){super(...arguments),this.lastUpdater=0}getInitialState(){return{type:"closed"}}setState(e){if("completionPopup"===this.state.type&&"results"===this.state.stage&&("completionPopup"!==e.type||"results"!==e.stage)){const{inMemoryRecordCache:e,context:t}=this.state;if(e.cacheUsingThisInstanceAsAnOverride){const n=`CompletionsStore transitioning away from completionPopup results while inMemoryRecord cache is still overriding ${e.cacheUsingThisInstanceAsAnOverride===t.currentPage.inMemoryRecordCache?"page's in-memory cache":"an unknown cache"}!`;o(449412).O8(new Error(n),{from:"CompletionsStore",type:"dangerousStateTransition"})}}super.setState(e)}createUpdater(){const e=++this.lastUpdater;return t=>{if(e===this.lastUpdater)return t()}}invalidateLastUpdater(){this.lastUpdater+=1}resetStore(e){const{environment:t}=e;this.invalidateLastUpdater();const o=this.state;"completionPopup"!==o.type&&"assistantCompletionPopup"!==o.type||("completionPopup"===o.type&&"initialPromptForAIBlock"!==o.stage&&"initialPrompt"!==o.stage&&t.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(o.inMemoryRecordCache),this.setState({type:"closed"}))}getExistingAISessionId(){return"closed"!==this.state.type?"assistantCompletionPopup"===this.state.type?this.state.sessionId:this.state.aiSessionId:void 0}isEditingEmptyBlock(){var e;const t=this.state;return Boolean(("completionPopup"===t.type||"assistantCompletionPopup"===t.type)&&"initialPrompt"===t.stage&&"cursor"===t.context.type&&(null===(e=t.context.currentBlock)||void 0===e?void 0:e.isEmptyEditableBlock()))}}const r=new n;(0,o(604341).exposeDebugValue)("CompletionsStore",r);const i=r},526088:(e,t,o)=>{o.d(t,{K:()=>n});const n=(0,o(583835).Dv)("unsyncTransclusionBlock")},527328:(e,t,o)=>{o.d(t,{WD:()=>i,eV:()=>n,fh:()=>r});const n={name:"Salesforce Record",regex:"^(https?:\\/\\/)?(?<instanceUrl>[a-z0-9-]+\\.[\\w.]+\\.force\\.com)\\/lightning\\/r\\/(?<objectName>[a-zA-Z0-9_]+)\\/(?<recordId>[a-zA-Z0-9]+)\\/(?<action>[a-zA-Z0-9_]+)",attributes:[{id:"Id",name:"Id",type:"inline",format:{type:"title",section:"title"},values:["$<recordId>"]},{id:"instanceUrl",name:"Instance URL",type:"inline",format:{type:"title",section:"title"},values:["$<instanceUrl>"]},{id:"objectName",name:"Object Name",type:"inline",format:{type:"title",section:"secondary"},values:["$<objectName>"]}],additional_types:{connectedRelation:!0},connected_relation_properties:{title:{name:"Name",type:"title"},Id:{name:"Id",type:"text"},CreatedById:{name:"Created By",uri:"notion://user-defined-collection/salesforce:User",type:"relation"},mapped_CreatedById:{name:"Mapped Created By",uri:"notion://user-defined-collection/salesforce:User",type:"person",source_property_id:"Email"},LastModifiedById:{name:"Last Modified By",uri:"notion://user-defined-collection/salesforce:User",type:"relation"},mapped_LastModifiedById:{name:"Mapped Last Modified By",uri:"notion://user-defined-collection/salesforce:User",type:"person",source_property_id:"Email"},CreatedDate:{name:"Created Date",type:"date"},LastModifiedDate:{name:"Last Modified Date",type:"date"}},connected_relation_sub_schemas:{"notion://user-defined-collection/salesforce:User":{title:{name:"Name",type:"title"},SmallPhotoUrl:{name:"Avatar URL",type:"url"},Email:{name:"Email",type:"email"}},"notion://user-defined-collection/salesforce:Account":{title:{name:"Name",type:"title"},Type:{name:"Type",type:"text"},AccountNumber:{name:"Account Number",type:"text"},AnnualRevenue:{name:"Annual Revenue",type:"number"}},"notion://user-defined-collection/salesforce:Opportunity":{title:{name:"Name",type:"title"},Amount:{name:"Amount",type:"number"},CloseDate:{name:"Close Date",type:"date"},StageName:{name:"Stage",type:"text"}}}};function r(e){return`^(https?:\\/\\/)?(?<instanceUrl>[a-z0-9-]+\\.[\\w.]+\\.force\\.com)\\/lightning\\/r\\/${e}\\/(?<recordId>[a-zA-Z0-9]+)\\/(?<action>[a-zA-Z0-9_]+)`}function i(e){return{name:e,regex:r(e),attributes:n.attributes,additional_types:{connectedRelation:!0},connected_relation_properties:n.connected_relation_properties,connected_relation_sub_schemas:n.connected_relation_sub_schemas}}},528787:(e,t,o)=>{o.r(t),o.d(t,{createReaction:()=>b,toggleReaction:()=>_});o(898992),o(354520),o(672577),o(581454),o(737550);var n=()=>o(785082),r=()=>o(197959),i=()=>o(204384),a=()=>o(161479),s=()=>o(798880),l=()=>o(534177),c=()=>o(878523),d=()=>o(722101),u=()=>o(246826),p=()=>o(317909),m=()=>o(594794),g=()=>o(630116),f=()=>o(606846),v=()=>o(741817),h=()=>o(807060);function _(e){const{discussionLocation:t,environment:o,transaction:d,store:u,icon:m}=e,h=function(e){let{store:t,icon:o}=e;const n=(0,g().G_)(t,t.pointer,"reactions").getValue();if(void 0===n)return;return n.map((e=>{const o=g().sk.createChildStore(t,{table:i().ez,id:e,spaceId:(0,a().e)(t.pointer.spaceId)});if(o.isDefined())return o})).filter(l().O9).find((e=>e.getIcon()===o))}({store:u,icon:m});if(void 0===o.currentUser.id)return;const _={table:s().oo,id:o.currentUser.id};return null!=h&&h.isDefined()?function(e){var t;let{store:o,actorPointer:i,transaction:a,environment:s,discussionLocation:l}=e;const d={store:o,actorPointer:i,transaction:a,environment:s,discussionLocation:l},u=(null===(t=o.getActors())||void 0===t?void 0:t.some((e=>e.id===i.id)))??!1;return u?(function(e){var t,o;const{store:i,actorPointer:a,discussionLocation:s,transaction:l,environment:d}=e;if(!i.isDefined())return;const u=i.getParentStore(),m=(null==u?void 0:u.table)===r().$Y?u:null==u?void 0:u.getParentStore(),h=n().eR.includes(s),_=null==m||null===(t=m.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore(),b=1===g().Lk.getUserVisibleReactions(u).length&&1===i.getActors().length&&i.getActors()[0].id===d.currentUser.id;c().fq({environment:d,reaction_value:i.getIcon(),comment_id:i.getParentId(),discussion_id:null==m?void 0:m.id,discussion_type:null==m?void 0:m.getType(),parent_block_id:null==m?void 0:m.getParentId(),parent_collection_id:null==m||null===(o=m.getParentStore())||void 0===o?void 0:o.getParentCollectionIdUpToTwoLevels(),reaction_count:i.getActors().length??0,from:s,...h&&{inbox_session_id:f().Ay.state.sessionId,notification_page_id:null==_?void 0:_.id}});const y=i.getModel();p().applyOperation({transaction:l,store:i,operation:y.ops.removeActor(a)}),b&&u&&u.table===r().$Y&&(0,v().v)({environment:d,discussionStore:u,transaction:l})}(d),"Removed"):(function(e){var t,o;const{store:i,actorPointer:a,discussionLocation:s,transaction:l,environment:d}=e;if(!i.isDefined())return;const u=i.getParentStore(),m=(null==u?void 0:u.table)===r().$Y?u:null==u?void 0:u.getParentStore(),g=n().eR.includes(s),v=null==m||null===(t=m.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore();c().MP({environment:d,reaction_value:i.getIcon(),comment_id:i.getParentId(),discussion_id:null==m?void 0:m.id,discussion_type:null==m?void 0:m.getType(),parent_block_id:null==m?void 0:m.getParentId(),parent_collection_id:null==m||null===(o=m.getParentStore())||void 0===o?void 0:o.getParentCollectionIdUpToTwoLevels(),reaction_count:i.getActors().length??0,from:s,...g&&{inbox_session_id:f().Ay.state.sessionId,notification_page_id:null==v?void 0:v.id}});const h=i.getModel();p().applyOperation({transaction:l,store:i,operation:h.ops.appendActor(a)})}(d),"Added")}({environment:o,store:h,actorPointer:_,transaction:d,discussionLocation:t}):(b({environment:o,transaction:d,store:u,icon:m,currentActorPointer:_,discussionLocation:t}),"Added")}function b(e){var t,o;let{environment:s,transaction:l,store:p,icon:v,currentActorPointer:_,discussionLocation:b}=e;const y=(0,m().JH)({environment:s,table:i().ez,spaceId:(0,a().e)(p.pointer.spaceId)}),S=p.table===r().$Y?p:p.getParentStore(),w=n().eR.includes(b),k=null==S||null===(t=S.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore(),I=null==S?void 0:S.getPropertyId(),A=null==S?void 0:S.getParentStore(),{property_type:x,collection_id:C,collection_view_id:T,view_type:M,collection_view_block_id:P}=(0,h().q)(I,A);c().MP({environment:s,reaction_value:v,comment_id:p.id,discussion_id:null==S?void 0:S.id,discussion_type:null==S?void 0:S.getType(),parent_block_id:null==S?void 0:S.getParentId(),parent_collection_id:null==S||null===(o=S.getParentStore())||void 0===o?void 0:o.getParentCollectionIdUpToTwoLevels(),reaction_count:0,from:b,...w&&{inbox_session_id:f().Ay.state.sessionId,notification_page_id:null==k?void 0:k.id},property_type:x,collection_id:C,collection_view_id:T,view_type:M,collection_view_block_id:P});const B=u().vt({environment:s,table:y.table,args:{id:y.id,spaceId:y.spaceId,commentId:p.id,icon:v,actorPointer:_},inMemoryRecordCache:p.inMemoryRecordCache,transaction:l}),R=(0,g().G_)(p,p.pointer,"reactions");d().BC({parentStore:R,appendStore:B,transaction:l})}},529099:(e,t,o)=>{o.d(t,{v:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12.758 9.976a1.178 1.178 0 1 0 .377-2.326 1.178 1.178 0 0 0-.377 2.326M6.547 8.97a1.178 1.178 0 1 0 .377-2.327 1.178 1.178 0 0 0-.377 2.326"}),(0,n.jsx)("path",{d:"M10.573 5.554a3.917 3.917 0 0 1 6.743.035.625.625 0 1 1-1.08.63 2.667 2.667 0 0 0-4.591-.023l-5.398 9.015 4.192.68a.625.625 0 0 1-.2 1.233l-5.102-.827a.625.625 0 0 1-.436-.938zM4.36 3.517a3.92 3.92 0 0 1 5.572.356.625.625 0 1 1-.945.818 2.67 2.67 0 0 0-3.795-.243.625.625 0 1 1-.833-.931"})]})},i=(0,o(340498).wt)("aiFace",r)},529183:(e,t,o)=>{o.d(t,{Ay:()=>a,ju:()=>n,rP:()=>r});o(898992),o(823215);function n(e){return"existingUser"===e.type}function r(e){return"newUser"===e.type&&"email"!==e.source}class i extends(()=>o(757695))().default{getInitialState(){return{tokenQuery:"",inviteTargets:[]}}}const a=i},530267:(e,t,o)=>{o.d(t,{Ve:()=>i,Vo:()=>r,bv:()=>s});var n=()=>o(534177);function r(e){if(!e)return{type:"range",min:0,max:Number.MAX_SAFE_INTEGER};if("range"===e.type)return e;let t=0,o=Number.MAX_SAFE_INTEGER;switch(e.type){case"fill":t=Number.MAX_SAFE_INTEGER;break;case"fixed":t=e.length,o=e.length;break;case"unlimited":break;case"min":t=e.length;break;case"max":o=e.length;break;default:(0,n().HB)(e)}return{type:"range",min:t,max:o,scroll:e.scroll}}function i(e){return{width:r(null==e?void 0:e.width),height:r(null==e?void 0:e.height)}}function a(e){switch(null==e?void 0:e.type){case"fill":case"fixed":return!1;case"range":return e.min!==e.max;case"max":case"min":case"unlimited":case void 0:return!0;default:(0,n().HB)(e)}}function s(e){return{width:a(null==e?void 0:e.width),height:a(null==e?void 0:e.height)}}},530681:(e,t,o)=>{o.d(t,{Bx:()=>p,SU:()=>c,bt:()=>a,eO:()=>d,gi:()=>l,su:()=>m,zC:()=>u});o(814603),o(147566),o(198721);var n=()=>o(449506),r=()=>o(435009),i=()=>o(816360);const a=9,s=1e3;function l(){i().A.setState({...i().A.state,isModalOpen:!0,openedTimestamp:Date.now()})}function c(e){const{environment:t}=e;i().A.setState({...i().A.state,isModalOpen:!1});const o=new URL(window.location.href);o.searchParams.delete("bp"),r().oo({environment:t,url:o.toString()})}const d={listings:[],count:0};async function u(e){const{environment:t,includeProduct:o,offset:r,spaceId:i,productTable:a,includeCount:l,includeRefunds:c}=e,u=await n().callApi({eventName:"getMarketplaceAcquiredListings",environment:t,data:{spaceId:i,limit:s,offset:r,productTable:a,includeProduct:o,includeCount:l,includeRefunds:c}});return"success"===u.type&&u.data.success?{listings:u.data.listings,count:u.data.count}:d}function p(e){const{environment:t}=e,o=new URL(window.location.href);o.searchParams.has("bp")?l():(o.searchParams.append("bp","true"),r().oo({environment:t,url:o.toString()}))}async function m(e){const{environment:t,acquisitionId:o}=e,r=await n().callApi({eventName:"getAcquisitionInvoicePdfUrl",environment:t,data:{acquisitionId:o}});return"success"===r.type&&r.data.success?r.data.pdfUrl:""}},534402:(e,t,o)=>{o.d(t,{LT:()=>f,X0:()=>h,Xt:()=>v});var n=()=>o(700500),r=()=>o(91913),i=()=>o(426234),a=()=>o(933449),s=()=>o(634201),l=()=>o(416845),c=()=>o(919709),d=()=>o(606952),u=()=>o(317909),p=()=>o(299545),m=()=>o(969197),g=()=>o(518736);function f(e){const{transaction:t,targetStore:o,sourceBlockStore:n}=e,i=(0,a().o9)(n.getBlockTitleTextSliceTree(),r().cf),s=(0,m().T)(o);if(!s||!g().Le({store:o,blockStore:s}))throw new(l().yI)("Previous block should exist and use CRDT");const c=i.getOperationsForSplitForMerge();(0,a().MX)(0===c.textSliceTreesToMove.length,"Root nodes should have no siblings to move"),_({sourceBlockStore:n,targetBlockStore:s,splitInfo:c,isMerge:!0,transaction:t})}function v(e){const{environment:t,transaction:o,multiSelection:r,removedBlocks:i,movedBlocks:s}=e,l=r.start.store;function c(e){if((0,a().MX)(!s.has(e),"Block being reparented should not be deleted"),!(0,n().Db)(e.getType(),e.getFormat()))return;const r=e.getBlockTitleStore();(0,a().MX)(g().SL(r),"Expected CRDT block title"),d().jQ({environment:t,transaction:o,selection:{startIndex:0,endIndex:1/0},store:r}),f({transaction:o,sourceBlockStore:e,targetStore:l})}(0,a().MX)(g().SL(l),"Expected CRDT block title");const u=(0,m().T)(r.end.store);for(const n of i){if(n===u)return;c(n);for(const e of(0,p().zo)({blockStore:n,transclusionReferences:"omit",childPages:"omit"})){if(e===u)return;c(e)}}}function h(e){const{sourceBlockStore:t,targetBlockStore:o,splitAtGraphemeIndex:n,transaction:l,moveIntoNewBlock:d}=e;(0,a().MX)(t.useCrdt(),"Expected CRDT source block"),(0,a().MX)(o.useCrdt(),"Expected CRDT target block");const p=t.getBlockTitleStore().getValue(),m=new(s().Z4)(c().qAZ(p)).getStringStartIndex(n),g=(0,a().o9)(t.getBlockTitleTextSliceTree(),r().cf).getOperationsForSplitAtIndex(m);!function(e){const{blockStore:t,splitInfo:o,transaction:n}=e,r=t.getBlockTitleStore().getValue()??[],i=o.textSliceTreesToMove,a="splitWithinNode"===o.type?o.textSliceTreeToSplit:o.newTextSliceTree;for(const s of i){const e=s.getTextSlice().getSearchLabel(),o=s.getTextSlice().getStartItem().id,i=t.id,l=a.getTextSlice().textInstanceId,c=a.getTextSlice().getSearchLabel(),d=a.getTextSlice().getEndItem().id;u().applyCrdtTextOperation({transaction:n,store:t,operation:{command:"moveTextSlice",pointer:t.pointer,path:[],args:{textInstanceId:s.getTextSlice().textInstanceId,sourceSearchLabel:e,textSliceStartItemId:o,targetBlockId:i,targetTextInstanceId:l,targetSearchLabel:c,targetTextSliceEndItemId:d,forDowngrade:{fullSourceTextValue:r,fullTargetTextValue:r}}},invertedOperation:void 0})}}({blockStore:t,splitInfo:g,transaction:l}),d?function(e){const{sourceBlockStore:t,targetBlockStore:o,splitInfo:n,transaction:s}=e;let l,d,p,m,g;if("splitNodeEnd"===n.type){const e=n.newTextSliceTree;l=e.getTextSlice().textInstanceId,d=e.getTextSlice().getSearchLabel(),p=e.getTextSlice().getStartItem().id;const t=n.previousTextSliceTree.getTextSlice();m=t.textInstanceId,g=t.getEndItem().id}else u().applyCrdtTextOperation({transaction:s,store:t,operation:{command:"splitText",pointer:t.pointer,path:[],args:n.splitOp},invertedOperation:void 0}),l=n.splitOp.textInstanceId,d=n.splitOp.searchLabel,p=n.splitOp.id,m=n.splitOp.textInstanceId,g=n.splitOp.id;const f=(0,a().o9)(t.getBlockTitleTextSliceTree(),r().cf),v=(0,a().o9)(f.getGraphemeIndicesOfSlice({boundary:"start",textInstanceId:l,start:p}),r().Dp).startIndex,h=f.getTextValue(),_=c().Ffo(h,0,v),b=c().Ffo(h,v,c().AhH(h));u().applyCrdtTextOperation({transaction:s,store:t,operation:{command:"moveTextSliceIntoBlock",path:[],pointer:t.pointer,args:{textInstanceId:l,sourceSearchLabel:d,textSliceStartItemId:p,targetBlockId:o.id,targetSearchLabel:i().DI,forDowngrade:{fullSourceTextValue:_,fullTargetTextValue:b}}},invertedOperation:{command:"invertedMoveTextSlice",path:[],pointer:t.pointer,args:{textInstanceId:l,textSliceStartItemId:p,targetTextInstanceId:m,targetTextSliceEndItemId:g,sourceBlockId:o.id,previousSourceTextValue:o.getBlockTitleStore().getValue()??[],targetBlockId:t.id,previousTargetTextValue:t.getBlockTitleStore().getValue()??[]}}})}({sourceBlockStore:t,targetBlockStore:o,splitInfo:g,transaction:l}):_({sourceBlockStore:t,targetBlockStore:o,splitInfo:g,isMerge:!1,transaction:l})}function _(e){const{sourceBlockStore:t,targetBlockStore:o,splitInfo:n,isMerge:i,transaction:s}=e;let l,d,p,m,g;if("splitNodeEnd"===n.type){const e=n.newTextSliceTree;l=e.getTextSlice().textInstanceId,p=e.getTextSlice().getSearchLabel(),d=e.getTextSlice().getStartItem().id;const t=n.previousTextSliceTree.getTextSlice();m=t.textInstanceId,g=t.getEndItem().id}else u().applyCrdtTextOperation({transaction:s,store:t,operation:{command:"splitText",pointer:t.pointer,path:[],args:n.splitOp},invertedOperation:void 0}),l=n.splitOp.textInstanceId,p=n.splitOp.searchLabel,d=n.splitOp.id,m=n.splitOp.textInstanceId,g=n.splitOp.id;const f=(0,a().o9)(t.getBlockTitleTextSliceTree(),r().cf),v=(0,a().o9)(f.getGraphemeIndicesOfSlice({boundary:"start",textInstanceId:l,start:d}),r().Dp).startIndex,h=f.getTextValue(),_=c().Ffo(h,0,v),b=c().Ffo(h,v,c().AhH(h)),y=o.getBlockTitleStore().getValue()??[],S=c().__s(c().xym(y,b,c().AhH(y))),w=(0,a().o9)(o.getBlockTitleTextSliceTree(),r().cf).getLastTextSliceTreeInPreOrderTraversal(),k=w.getTextSlice().getSearchLabel();u().applyCrdtTextOperation({transaction:s,store:t,operation:{command:"moveTextSlice",path:[],pointer:t.pointer,args:{textInstanceId:l,textSliceStartItemId:d,sourceSearchLabel:p,targetBlockId:o.id,targetTextInstanceId:w.getTextSlice().textInstanceId,targetSearchLabel:k,targetTextSliceEndItemId:w.getTextSlice().getEndItem().id,isMerge:i,forDowngrade:{fullSourceTextValue:_,fullTargetTextValue:S}}},invertedOperation:{command:"invertedMoveTextSlice",path:[],pointer:t.pointer,args:{textInstanceId:l,textSliceStartItemId:d,targetTextInstanceId:m,targetTextSliceEndItemId:g,sourceBlockId:o.id,previousSourceTextValue:y,targetBlockId:t.id,previousTargetTextValue:t.getBlockTitleStore().getValue()??[]}}})}},536131:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},537012:(e,t,o)=>{o.d(t,{Ls:()=>d,Mn:()=>p,rM:()=>c,yx:()=>u});o(944114),o(898992),o(354520),o(430670);var n=()=>o(534177),r=()=>o(179034),i=()=>o(824862),a=()=>o(519831),s=()=>o(869558),l=()=>o(96689);function c(e){const{targetTriggerType:t,targetParentPointer:o,targetSpaceId:r}=e;return"event"===t?[{pointer:o,minimumRequiredRole:"editor"},{pointer:{id:r,table:l().NX},minimumRequiredRole:"read_and_write"}]:"recurrence"===t||"button"===t||"chat"===t?[{pointer:o,minimumRequiredRole:"read_and_write"}]:void(0,n().HB)(t)}function d(e){const{automationValue:t,actionValues:o}=e,r=o.flatMap((e=>p(e))).filter(n().O9);return"event"===t.trigger.type?(r.push({pointer:{id:t.parent_id,table:t.parent_table,spaceId:t.space_id},minimumRequiredRole:"editor"},{pointer:{id:t.space_id,table:l().NX},minimumRequiredRole:"read_and_write"}),(0,n().O9)(t.trigger.event.source)&&(t.trigger.event.source.type===s().Gy||t.trigger.event.source.type===a().Vl?r.push({pointer:t.trigger.event.source.pointer,minimumRequiredRole:"reader"}):"filter"===t.trigger.event.source.type||(0,n().HB)(t.trigger.event.source))):"recurrence"===t.trigger.type||"button"===t.trigger.type?r.push({pointer:{id:t.parent_id,table:t.parent_table,spaceId:t.space_id},minimumRequiredRole:"read_and_write"}):(0,n().HB)(t.trigger),r}function u(e){return"event"===e.trigger.type?[{pointer:{id:e.parent_id,table:e.parent_table,spaceId:e.space_id},minimumRequiredRole:"editor"},{pointer:{id:e.space_id,table:l().NX},minimumRequiredRole:"read_and_write"}]:"recurrence"===e.trigger.type||"button"===e.trigger.type?[{pointer:{id:e.parent_id,table:e.parent_table,spaceId:e.space_id},minimumRequiredRole:"read_and_write"}]:void(0,n().HB)(e.trigger)}function p(e){if("create_page"===e.type){var t,o;const n=[];var a,s;if(null!==(t=e.config)&&void 0!==t&&t.collection)n.push({pointer:null===(a=e.config)||void 0===a?void 0:a.collection,minimumRequiredRole:"content_only_editor"});if(null!==(o=e.config)&&void 0!==o&&o.template_page_id)n.push({pointer:{id:null===(s=e.config)||void 0===s?void 0:s.template_page_id,table:r().ev,spaceId:e.space_id},minimumRequiredRole:"reader"});return n}var l,c;if("query_collection"===e.type){if(null!==(l=e.config)&&void 0!==l&&l.collection)return[{pointer:null===(c=e.config)||void 0===c?void 0:c.collection,minimumRequiredRole:"content_only_editor"}]}else if("update_pages"===e.type){var d;const t=null===(d=e.config)||void 0===d?void 0:d.target;if(!t)return[];if("collection"===t.type)return[{pointer:t.collection,minimumRequiredRole:"content_only_editor"}];if("page"===t.type)return[{pointer:t.page,minimumRequiredRole:"content_only_editor"}];if("variable"===t.type)return[];(0,n().HB)(t)}else if("open_page"===e.type){var u;const t=null===(u=e.config)||void 0===u?void 0:u.target;if(!t)return[];if("page"===t.type)return[{pointer:t.page,minimumRequiredRole:"reader"}];if("variable"===t.type||"url"===t.type)return[];(0,n().HB)(t)}else if("slack_notification"===e.type){var p;if(null!==(p=e.config)&&void 0!==p&&p.external_bot_id)return[{pointer:{id:e.config.external_bot_id,table:i().GP},minimumRequiredRole:"reader"}]}else{if("duplicate_blocks"===e.type)return[];if("modal_confirmation"===e.type)return[];if("complete_sprint"===e.type){var m,g;const t=[];return null!==(m=e.config)&&void 0!==m&&m.sprint_collection&&t.push({pointer:e.config.sprint_collection,minimumRequiredRole:"editor"}),null!==(g=e.config)&&void 0!==g&&g.task_collection&&t.push({pointer:e.config.task_collection,minimumRequiredRole:"editor"}),t}if("send_in_app_notification"===e.type)return[];if("define_variables"===e.type)return[];if("http_request"===e.type)return[];if("send_gmail_notification"===e.type){var f;const t=[];return null!==(f=e.config)&&void 0!==f&&f.external_bot_id&&t.push({pointer:{id:e.config.external_bot_id,table:i().GP},minimumRequiredRole:"editor"}),t}if("publish_site"===e.type){var v;const t=[],o=null===(v=e.config)||void 0===v?void 0:v.target;return o?("page"===o.type&&t.push({pointer:o.page,minimumRequiredRole:"editor"}),t):[]}(0,n().HB)(e)}}},537941:(e,t,o)=>{o.d(t,{navigateToHomeTab:()=>_,s:()=>h});o(944114),o(898992),o(354520),o(803949),o(581454);var n=()=>o(110750),r=()=>o(857639),i=()=>o(861017),a=()=>o(496603),s=()=>o(183558),l=()=>o(780054),c=()=>o(836251),d=()=>o(351360),u=()=>o(210737),p=()=>o(848259),m=()=>o(741496),g=()=>o(317909),f=()=>o(345913),v=()=>o(435009);function h(e){var t,o,u,h,_;const{environment:b,tab:y,navigationAction:S,navigationSource:w}=e,{TabbedRouterStore:k,currentUser:I}=b;if(!c().Al(b))return;"updates"!==y&&p().L_(b);const A=k.state.activeTab,x=(0,n().Xz)(k.state),C=a().mg(k.state);C.activeTab=y,C.navigationAction=S,C.navigationSource=w;let T=!1;if(void 0!==e.nativeRootPageOverrideEnabled&&(T=C.tabs[C.activeTab].nativeRootPageOverrideEnabled!==e.nativeRootPageOverrideEnabled,C.tabs[C.activeTab].nativeRootPageOverrideEnabled=e.nativeRootPageOverrideEnabled),a().n4(e.modal,C.modal)||(T=!0,C.modal=e.modal??[]),void 0!==e.pages&&0===((null===(t=e.modal)||void 0===t?void 0:t.length)??0)){const t=e.pages.map((e=>{const t=(0,n().Ee)(e,!0),o=i().parseRoute({url:t,baseUrl:l().A.domainBaseUrl,publicDomainName:l().A.publicDomainName,isMobile:b.device.isMobile,protocol:l().A.protocol,currentUrl:window.location.href});return{...e,route:o}})),o=C.tabs[C.activeTab].pages;T||=!a().n4(o,t),C.tabs[C.activeTab].pages=t}k.setState(C);const M="addPage"===y;if(k.state.activeTab===A&&!T&&!M)return;const P=d().default.state.mainEditorCurrentBlockStore,B="web"===x.type&&(null===(o=x.redirectedTo)||void 0===o?void 0:o.route)&&"page"===(null===(u=x.redirectedTo)||void 0===u?void 0:u.route.name)&&(null===(h=x.redirectedTo)||void 0===h?void 0:h.route.showMoveTo),R=P&&(null==P?void 0:P.canEdit())&&P.isEmptyTitle()&&P.isEmptyPage();"addPage"===A&&B&&R&&I.isLoggedIn()&&g().createAndCommit({userAction:"routerActions.navigateToTab",environment:b,canUndo:!0,perform:e=>{f().oD({environment:b,blocks:[P],transaction:e}),e.postSubmitCallbacks.push((e=>{e||(0,m().N)(b,{analyticsName:"delete",from:"mobile_navigation",block_id:P.id,block_type:"page"})}))}});const E=(null===(_=C.modal)||void 0===_?void 0:_.filter((e=>"web"===e.type)))??[],D=k.state.tabs[y],{rootPage:N,pages:L}=D;let F=!1;switch(N.type){case"native":break;case"web":if(L.length+E.length===0)v().oo({environment:b,redirect:!0,url:(0,n().Ee)(N,!0,{...e.queryParams,...N.queryParams,type:"space-private-pages",from:"mobile_bottom_bar"}),updateMobileTabbedRouterArgs:{tabbedRouterStateAlreadyUpdated:!0}});else{F=!0;const e=(0,s().Ay)();window.history.replaceState({id:e,currentUserId:b.currentUser.id},void 0,(0,n().Ee)(N))}}const U=!0===C.tabs[C.activeTab].nativeRootPageOverrideEnabled,O=E[E.length-1];E.length>1&&r().log({level:"error",from:"tabNavigationActions",type:"navigateToTab",data:{message:`TabbedRouterStore only support 1 modal page for now. ${E.length} is detected`}}),L.forEach(((e,t)=>{if(!U&&t===L.length-1&&!O){let t=(0,n().Ee)(e);return"/blank"===t&&(t="/nativetab/empty"),void v().oo({environment:b,redirect:!F,url:t,updateMobileTabbedRouterArgs:{tabbedRouterStateAlreadyUpdated:!0}})}if(U&&0===t)return;const o=(0,s().Ay)(),r=(0,n().Ee)(e);F?window.history.pushState({id:o,currentUserId:b.currentUser.id},void 0,r):(F=!0,window.history.replaceState({id:o,currentUserId:b.currentUser.id},void 0,r))})),O&&"web"===O.type&&v().oo({environment:b,redirect:!F,url:(0,n().Ee)(O),updateMobileTabbedRouterArgs:{tabbedRouterStateAlreadyUpdated:!0}})}function _(e,t){var o,n;if(c().Al(e))return e.device.isMobileNative&&e.device.isAndroid&&u().A.closeAll(),h({environment:e,tab:"home",nativeRootPageOverrideEnabled:!0}),void(t&&t());Boolean(null===(o=e.mobileNative)||void 0===o?void 0:o.supportsNativeHomeOnPhone())&&(null===(n=e.mobileNative)||void 0===n||n.showNativeHomeTab(t))}},538233:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},538527:(e,t,o)=>{o.d(t,{Mw:()=>m,Ug:()=>g,tc:()=>p});o(898992),o(803949);var n=()=>o(634201),r=()=>o(919709),i=()=>o(220719),a=()=>o(518736),s=()=>o(962845),l=()=>o(969197),c=()=>o(792002),d=()=>o(808207),u=()=>o(66788);function p(e){const{environment:t,multiSelection:o,annotation:n,transaction:r}=e;(0,s().$W)(o).forEach((e=>{let{store:o,selection:i}=e;m({environment:t,store:o,annotation:n,selection:i,transaction:r})}))}function m(e){const{environment:t,store:o,annotation:s,selection:p,transaction:m}=e,g=o.getValue();if(!g)return;const f=r().Mwp({textValue:g,selection:p,annotation:s});if(a().SL(o)){!function(e){const{blockStore:t,selection:o,annotation:a,transaction:s,fullTextValue:l}=e;(0,i().MX)(t.useCrdt(),"Expected CRDT block");const u=t.getBlockTitleStore().getValue(),p=r().xbM(u,o);if((0,c().gE)(p))return;const m=(0,i().o9)(t.getBlockTitleTextSliceTree()),g=new(n().Z4)(r().qAZ(u)),{startIndex:f,endIndex:v}=g.getInclusiveStringRangeForSelection(p),{operations:h,invertedOperations:_}=m.getOperationsForAddAnnotation(f,v,a);d().d({transaction:s,store:t,crdtOperations:h,invertedOperations:_,fullTextValue:l})}({blockStore:(0,i().o9)((0,l().T)(o)),selection:p,annotation:s,transaction:m,fullTextValue:f})}else{u().Tm({environment:t,store:o,value:f,transaction:m});const e=o.getRecordStoreAtRootPath();u().Xt({environment:t,store:o,oldTextValue:g,newTextValue:f,transaction:m,rootStore:e,removeInlineRecords:!1})}}function g(e){const{environment:t,blocks:o,annotation:n,transaction:r}=e;for(const i of o){const e=i.getTitleStore();if(!e)continue;e.getValue()&&m({environment:t,store:e,annotation:n,selection:{startIndex:0,endIndex:1/0},transaction:r})}}},540022:(e,t,o)=>{function n(e){return`collectionViewFilterBarOpenState:${e}`}o.d(t,{N:()=>n})},540758:(e,t,o)=>{o.d(t,{B:()=>r,f:()=>i});var n=()=>o(670631);function r(e){var t;return Boolean(null===(t=n().A.state.offlinePages)||void 0===t?void 0:t[e])}function i(e){var t;return Boolean(null===(t=n().A.state.offlinePages)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.isExplicitlyOfflinedOrigin)}},541258:(e,t,o)=>{o.d(t,{AG:()=>ye,LU:()=>me,bC:()=>fe,cL:()=>pe,gB:()=>ve,w:()=>ge});o(898992),o(354520),o(672577);var n=()=>o(249386),r=()=>o(584262),i=()=>o(244309),a=()=>o(857639),s=()=>o(243020),l=()=>o(179034),c=()=>o(869558),d=()=>o(959044),u=()=>o(798880),p=()=>o(294712),m=()=>o(495989),g=()=>o(677338),f=()=>o(994310),v=()=>o(319625),h=()=>o(498212),_=()=>o(939768),b=()=>o(720665),y=()=>o(466721),S=()=>o(989423),w=()=>o(68465),k=()=>o(492414),I=()=>o(108944),A=()=>o(836251),x=()=>o(719431),C=()=>o(431481),T=()=>o(792415),M=()=>o(351360),P=()=>o(546574),B=()=>o(187959),R=()=>o(973618),E=()=>o(865688),D=()=>o(990261),N=()=>o(650031),L=()=>o(630116),F=()=>o(793765),U=()=>o(543491),O=()=>o(250484),V=()=>o(224701),j=()=>o(263928),z=()=>o(541801),q=()=>o(373444),H=()=>o(452939),W=()=>o(515402),K=()=>o(673998),G=()=>o(901389),$=()=>o(824772),Y=()=>o(664133),Q=()=>o(433052),Z=()=>o(324234),X=()=>o(572080),J=()=>o(730570),ee=()=>o(507785),te=()=>o(5705),oe=()=>o(435009),ne=()=>o(260488),re=()=>o(426116),ie=()=>o(317909),ae=()=>o(633457),se=()=>o(840153),le=()=>o(457395),ce=()=>o(755199),de=()=>o(664713);let ue=null;function pe(e){M().default.setState(M().default.getInitialState());const{id:t}=e.currentUser;(!M().default.state.currentUserStore||t&&t!==M().default.state.currentUserStore.id)&&(t?(le().n(e,t),Q().uv(e,t),ve(e,t)):(M().default.setState({...M().default.state,initialized:!0}),K().$V(e)))}function me(){const{currentSpaceStore:e}=M().default.getState();return e?e.id:void 0}async function ge(e){const{nextRoute:t,currentRoute:o,environment:u,query:p}=e,m=M().default.state.mainEditorCurrentBlockStore,f=M().default.state.currentCollectionViewStore,b=u.currentUser.id,I=e=>{M().default.state.lastUpdater===I&&(u.device.isMobileNative&&e.currentSpaceStore&&a().log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:"AppStore setting space with update in updateCurrentRoute: ",spaceId:e.currentSpaceStore.id}}),M().default.setState({...M().default.state,...e}))};M().default.setState({...M().default.state,lastUpdater:I});let A;if("page"===t.name&&t.queryId&&t.blockId&&U().A.setState({queryId:t.queryId,pageId:t.blockId,timeEntered:new Date}),"marketplace"===t.name){const{currentSpaceStore:e}=M().default.state;if(!(null==e?void 0:e.id)){const{spaceId:e}=await Q().wA(u);A=e}}if("page"===t.name||"space"===t.name||"nativeTab"===t.name||"quickSearch"===t.name||"chat"===t.name||"aiInferenceTranscript"===t.name||"marketplace"===t.name||"team"===t.name||"posts"===t.name){let e,c;const f=async()=>(e||(e=await ee().cG({environment:u,request:{type:"block-space",...t},ignoreLocalResult:"nativeRedirect"===(null==o?void 0:o.name)})),await M().default.waitUntil((()=>M().default.state.initialized)),c=e.spaceId,(e=>{M().default.state.lastUpdater===I&&T().A.setState({publicPageData:e})})(e),e),B=(0,g().oJ)();if((0,w().N9)(u),"page"===t.name&&(!m||m.id!==t.blockId||o&&"page"===o.name&&o.blockId!==t.blockId||m.userId!==b)){var H;let e,c=t.blockId;if(void 0!==t.slug&&!t.blockId){const o=await async function(e,t){const o=C().A.getBlockIdForSlug(e);if(o)return{blockId:o,publicPageData:void 0};const n=await t(),r=n.pageId;r&&C().A.setBlockIdForSlug(e,r);return{blockId:r,publicPageData:n}}(t.slug,f);c=o.blockId,e=o.publicPageData}if(!c)return void a().log({level:"error",from:"appActions",type:"missingBlockIdForPageRoute",data:{miscDataToConvertToString:{route:t}}});const g=new(L().Bv)(u,{table:l().ev,id:c}),v=g.getFormat().placeholder_workflow_template_id;if(g.isCollectionView()&&v){const{getCollectionTemplateFromId:e}=await z().tA.load(),t=e(v);if(t){const{onNavigateToPlaceholderWorkflowTemplateBlock:e}=await q().O.load(),{didOpenOnboardingModal:o}=e({environment:u,collectionTemplate:t,collectionViewBlockStore:g});if(o)return void oe().aX(u)}}t.blockId=c,te().KO(u),te().b$(u),Se(),te().aD(u);const w=new(E().A);I({mainEditorCurrentBlockStore:g,currentLoadingContainerStore:w}),m||await fe({environment:u,store:g}),e||(e=await f());const{currentUserSettingsStore:A}=M().default.state;if(be({environment:u,publicPageData:e}))return void function(e){const{store:t,environment:o}=e,n=(0,k().Ay)({store:t,preferPublicLink:!1,pageVisitSource:void 0});oe().oo({environment:o,url:n})}({store:g,environment:u});const{presenceStore:T,currentUserRootStore:R}=M().default.state;J().J(T,u,D().uk,m),y().FZ(u,{blockStore:g,fromPageRefresh:B,pageVisitStore:M().default.state.pageVisitStore,timestamp:Date.now()}),P().A.resetIfNotCurrentPage(g.id);const F=new(N().A);I({presenceStore:F});const U=D().uk.getCurrentPageVisitId();if(D().uk.initializeNewPageVisitId(),J().I({userId:b,authorizationToken:e.presenceAuthorizationToken,rootStore:g,presenceStore:F,environment:u,pageVisitIdStore:D().uk}),R){const t=R.getSpaceViewStores().filter((t=>t.getSpaceId()===e.spaceId)).length>0;if("root"===(null==o?void 0:o.name)&&(void 0===e.spaceId||!t&&!e.isDLSViewer))if(A)u.device.isMobileNative&&a().log({level:"warning",from:"loginActions",type:"setLoggedInUserId",data:{message:"SpaceDebug: navigateToFirstSpace because updateCurrentRoute is root and page is not in current spaceView"}}),await re().t9({environment:u,userRootStore:R,userSettingsStore:A,pageVisitSource:e.isPublicShareLink||e.isInNewReceiverExperimentVariant?r().y8.PublicShareLink:r().y8.BackForward});else if(b)return void(await x().logoutSingleAccount({environment:u,userId:b,logoutOrigin:s().d.NoAvailableSpaces}));const n=!e.isDLSViewer&&e.canJoinSpace,i=e.isPublicShareLink&&!e.userHasExplicitAccess;if(e.spaceId&&(n||e.userHasExplicitAccess)&&!i){const t=await re().DT({environment:u,userRootStore:R,spaceId:e.spaceId,navigate:!1,analyticsFrom:"redirect",userSettingsStore:A,redirectSource:"update_current_route_with_space_id"});u.device.isMobileNative&&a().log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:"updateCurrentRoute updating space because the route is a page with spaceId",spaceId:e.spaceId}}),I({currentSpaceViewStore:t.spaceViewStore,currentSpaceStore:t.spaceViewStore.getSpaceStore()})}else if(!e.spaceId&&M().default.state.currentSpaceStore){const e=await re().DT({environment:u,userRootStore:R,spaceId:M().default.state.currentSpaceStore.id,navigate:!1,analyticsFrom:"redirect",userSettingsStore:A,redirectSource:"update_current_route_no_space_id"});var K;if(u.device.isMobileNative)a().log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:"updateCurrentRoute updating space because of joinSpaceResult of current space",spaceId:null===(K=e.spaceViewStore)||void 0===K?void 0:K.getSpaceId()}});I({currentSpaceViewStore:e.spaceViewStore,currentSpaceStore:e.spaceViewStore.getSpaceStore()})}}e.spaceId&&b&&(de().v({environment:u,spaceId:e.spaceId,userId:b}),j().J({environment:u,spaceId:e.spaceId,userId:b}));const O=null==R?void 0:R.getSpaceViewStores(),G=null==O||null===(H=O.filter((e=>e.getSpaceId()===g.getSpaceId())))||void 0===H?void 0:H[0],$=Boolean(void 0!==G),{currentSpaceStore:Q}=M().default.state;Q?(V().$D({environment:u,spaceId:Q.id}).then((async()=>{await g.load(),_e(u,g,p,D().uk,U,t.slug,e.userHasExplicitAccess,e.isDLSViewer,e.trustedDomains,$,t.embedded)})),S().uX(u)):e&&e.spaceId&&(await g.load(),_e(u,g,p,D().uk,U,t.slug,e.userHasExplicitAccess,e.isDLSViewer,e.domainLinkSharingEnabledDomains,$,t.embedded)),async function(e,t,o){const a=(0,_().qg)(t).query,s=a[n().BM];if(parseInt(a[r().k3])===r().y8.Email&&(s.includes("email_digest")||s.includes("email_push"))&&a[r().rh]&&o){const t=(0,h().np)(a[r().rh]),n=L().Tu.createChildStore(o,{table:d()._p,id:t,spaceId:o.id});await n.load();const s=n.getModel();if(!s)return;if((0,i().v)((0,S().ik)(e),{alreadyRead:s.getRead(),notificationId:t,activityId:s.getActivityId(),from:"email"}),!s.getRead()){const t={id:s.id,space_id:s.getSpaceId(),read:s.getRead(),type:s.getType()};ie().createAndCommit({userAction:"appActions.setNotificationAsReadFromEmail",environment:e,canUndo:!0,perform:e=>X().ZB({notification:t,rootStore:o,transaction:e,read:!0})})}}}(u,p,Q);const Z=(null==Q?void 0:Q.id)||e.spaceId;Z&&(ae().bG({environment:u,spaceId:Z,force:!1}),W().d({environment:u,spaceId:Z,force:!1}),Y().zo({environment:u,spaceId:Z}))}else if("space"===t.name){const e=await f();if(e.publicHomePage){const t=new(L().Bv)(u,{table:l().ev,id:e.publicHomePage}),o=new(E().A);I({mainEditorCurrentBlockStore:t,currentLoadingContainerStore:o})}else if(I({mainEditorCurrentBlockStore:void 0,currentLoadingContainerStore:void 0}),be({environment:u,publicPageData:e}))return void ye({spaceDomain:e.spaceDomain,environment:u})}else if("nativeTab"===t.name||"quickSearch"===t.name||"chat"===t.name||"aiInferenceTranscript"===t.name||"marketplace"===t.name||"team"===t.name||"posts"===t.name){te().KO(u),te().b$(u),Se(),te().aD(u),await M().default.waitUntil((()=>M().default.state.initialized));const e="spaceId"in t?t.spaceId:void 0;if((!M().default.state.currentSpaceViewStore||!M().default.state.currentSpaceStore||e&&M().default.state.currentSpaceStore.id!==e)&&M().default.state.currentUserRootStore){var Z;const o=M().default.state.currentUserRootStore.getSpaceViewStores();let n=o[0];if(e){const t=o.find((t=>{var o;return(null===(o=t.getSpaceId())||void 0===o?void 0:o.replaceAll("-",""))===(null==e?void 0:e.replaceAll("-",""))}));n=t||n}else if(A){const e=o.find((e=>{var t,o;return(null===(t=e.getSpaceId())||void 0===t?void 0:t.replaceAll("-",""))===(null===(o=A)||void 0===o?void 0:o.replaceAll("-",""))}));n=e||n}const r=null===(Z=n)||void 0===Z?void 0:Z.getSpaceStore();if(n&&r){var se,le;if(u.device.isMobileNative)a().log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:`updateCurrentRoute updating space because it's native tab and current space store id (${null===(se=M().default.state.currentSpaceStore)||void 0===se?void 0:se.id}, spaceView: ${null===(le=M().default.state.currentSpaceViewStore)||void 0===le?void 0:le.id}) doesn't match nextRoute space id`,spaceId:e}});I({currentSpaceStore:r,currentSpaceViewStore:n});const o="chat"===t.name,i="marketplace"===t.name,s="aiInferenceTranscript"===t.name,l="team"===t.name,c="posts"===t.name;if(b&&(o||i||l||c||s)){const e=r.id;de().v({environment:u,spaceId:e,userId:b}),ae().bG({environment:u,spaceId:e,force:!1}),W().d({environment:u,spaceId:e,force:!1}),Y().zo({environment:u,spaceId:e}),V().$D({environment:u,spaceId:e})}}}("chat"===t.name||"aiInferenceTranscript"===t.name||"nativeTab"===t.name&&"assistant"===t.tab||"marketplace"===t.name||"team"===t.name||"posts"===t.name)&&I({mainEditorCurrentBlockStore:void 0,currentCollectionViewStore:void 0})}if("team"===t.name||"page"===t.name){const{currentSpaceStore:e}=M().default.state,o=(null==e?void 0:e.id)||c;Q().fm({route:t,userId:b,spaceId:o})}if("searchQuery"in t||"searchRequest"in t)if(t.searchQuery)ne()._N({environment:u,analyticsFrom:"query-args"}),O().Ay.setState({...O().Ay.state,query:{...O().Ay.state.query,text:t.searchQuery}});else if(t.searchRequest)try{const e=JSON.parse(t.searchRequest),{text:o,sort:n,filters:r}=e;p&&O().Ay.setState({...O().Ay.state,query:{text:o,sort:n,filters:r}}),F().Ay.setState({...F().Ay.state,showDebugInfo:!0,debug:"everything"})}catch(pe){G().c1("Invalid json in searchRequest param"),a().log({level:"error",from:"appActions",type:"JSONParseError",error:{miscDataString:(0,v().A)(pe).message}})}$().fD(u),(0,g().ED)(!1)}const ce=f?f.id:void 0;if("page"===t.name&&ce!==t.collectionViewId){const e=t.collectionViewId;I({currentCollectionViewStore:e?new(L().pS)(u,{table:c().Gy,id:e}):void 0})}const ue=(0,_().qg)(p).query[r().Io];Boolean(ue)&&(R().E.setState(!0),B().A.setState({open:!0}))}async function fe(e){const{environment:t,store:o}=e,n=await async function(e){const{environment:t,blockId:o}=e,{currentUser:n}=t,r=(0,b().sb)([...n.id?[n.id]:[],...n.loggedInUserIds]);for(const i of r){const e=new(L().Bv)(t,{table:l().ev,id:o},{userId:i});if(await e.load(),e.isDefined())return n.id===i?void 0:i}}({environment:t,blockId:o.id});n&&await se().V({newCurrentUserId:n,environment:t,store:o})}async function ve(e,t){const o=new(L().LU)(e,{table:u().oo,id:t},{userId:t}),n=new(L().GG)(e,{table:m().xM,id:t},{userId:t});n.addListener(he);const r=new(L().dZ)(e,{table:p().GD,id:t},{userId:t});Z().registerPushNotifications(e),M().default.setState({...M().default.state,currentUserStore:o,currentUserSettingsStore:n,currentUserRootStore:r,initialized:!1}),await le().y(),M().default.setState({...M().default.state,initialized:!0}),ce().sM(e),K().kE(e)}function he(e){const t=e.getSettingsStore().getKeyStore("preferred_locale").getValue();t||f().A.set("preferredLocale",t)}function _e(e,t,o,n,r,i,a,s,l,c,d){var u,p;const m=t.getAssociatedCollectionStore(),g=null==m?void 0:m.getLayoutStore(),f=!(null==g||!g.firstModuleOfType("viewsMain"));H().yP(e,{query:o,page_id:t.id,is_peek:!1,peek_mode:void 0,type:H().ND(t),collection_id:(null==m?void 0:m.id)??(null===(u=t.getCollectionStore())||void 0===u?void 0:u.id),layout_id:null==g?void 0:g.id,layout_has_tabbed_structure:f,form_id:t.isFormBlock()?t.id:void 0,team_id:null===(p=(0,I().Uo)(t))||void 0===p?void 0:p.id,page_visit_id:n.getCurrentPageVisitId(),previous_page_visit_id:r,slug:i,user_has_explicit_access:a,is_dls_viewer:s,trusted_domains:l,has_space_view_for_page:c,embedded:d})}function be(e){const{environment:t,publicPageData:o}=e;return!(!(0,A().w6)(t)||"none"!==o.publicAccessRole||!o.spaceName)}function ye(e){const{spaceDomain:t,environment:o}=e,n=(0,A().j5)(t);oe().oo({environment:o,url:n,redirect:!0})}function Se(){ue&&ue.close()}},541372:(e,t,o)=>{o.d(t,{Ce:()=>U,GV:()=>F,T_:()=>P,Tw:()=>M,VN:()=>B,Xw:()=>L,ei:()=>E,gi:()=>C,h8:()=>D});o(16280),o(18107),o(967357),o(898992),o(823215),o(581454),o(737550);var n=()=>o(584262),r=()=>o(700500),i=()=>o(921940),a=()=>o(696706),s=()=>o(179034),l=()=>o(919709),c=()=>o(496603),d=()=>o(534177),u=()=>o(780054),p=()=>o(989423),m=()=>o(186445),g=()=>o(969197),f=()=>o(695625),v=()=>o(430483),h=()=>o(84349),_=()=>o(77246),b=()=>o(630116),y=()=>o(292167),S=()=>o(44729),w=()=>o(246826),k=()=>o(797265),I=()=>o(778417),A=()=>o(606952),x=()=>o(317909);function C(e){const{environment:t,blocks:o,copiedStores:n,pageSource:r}=e,i=c().HV(o);if(!i)return;const a=f().T.getRectFromStore(i);a&&(h().A.setState({open:!0,type:"blocks",blocks:o,rect:a,copiedStores:n,pageSource:r}),(0,p().u4)({environment:t,event:{eventName:"block_paste_menu_opened",eventProperties:{type:"blocks"}}}))}const T=250;function M(e){if(!v().zD.areAiActionsOnPasteEnabled())return!1;const{blocks:t,environment:o}=e;if(!t.some((e=>e.isAiFollowupEligibleBlock())))return!1;if((0,g().Rg)(t,!0).length<T)return!1;const n=t.at(0);if(!n)return!1;const r=f().T.getRectFromStore(n);return!!r&&(h().A.setState({open:!0,type:"ai_actions",blocks:t,rect:r}),(0,p().u4)({environment:o,event:{eventName:"block_paste_menu_opened",eventProperties:{type:"ai_actions"}}}),!0)}function P(e){const{environment:t,blocks:o,copiedLinks:n,rootStore:r}=e;if(o.length!==n.length)return!1;if(!o.every(R))return!1;if(n.some((e=>e.blockId===r.id)))return!1;const i=c().HV(o);if(!i)return!1;const a=f().T.getRectFromStore(i);return!!a&&(h().A.setState({open:!0,type:"links",blocks:o,rect:a,copiedLinks:n}),(0,p().u4)({environment:t,event:{eventName:"block_paste_menu_opened",eventProperties:{type:"links"}}}),!0)}function B(e){h().A.state.open&&(0,p().u4)({environment:e,event:{eventName:"block_paste_menu_closed",eventProperties:{type:h().A.state.type}}}),h().A.setState({open:!1})}function R(e){return!(e.isType(r().xd.copyIndicator)||e.isTransclusionType()||e.isInsideCollection())}function E(e){const{blocks:t,pageSource:o,wasContiguousSelection:n,action:i,rootStore:s,copiedStores:l}=e,c=_().Uv.getMode(t[0]);return"copy"===i&&n&&!(0,a().Z2)(o,s.pointer)&&(D(e)||F({currentSpaceId:s.getSpaceId(),...e}))&&t.every(R)&&!l.every((e=>e.getType()===r().xd.externalObjectInstance))&&"suggest"!==c}function D(e){const{blocks:t}=e;return 1===t.length}function N(e){const{transaction:t,blockUrl:o,spaceId:n,environment:i}=e,a=w().Wv({environment:i,type:r().xd.text,inMemoryRecordCache:i.defaultRecordCache.inMemoryRecordCache,transaction:t,spaceId:n}),s=[(0,l().Ey_)(o,[(0,l().Sez)(o)])];return A().KY({environment:i,store:a.getBlockTitleStore(),value:s,transaction:t}),a}async function L(e){const{environment:t,blocks:o,source:r}=e,a=c().$1(o);if(!a)return;const l=a.getParentBlockStore();if(!l)return;const p=a.getContentStore();let m;await x().createAndCommitAsync({environment:t,userAction:"blockPasteMenuActions.acceptLinkToPage",waitForServerCommit:!0,perform:async e=>{if("blocks"===r.type){const{copiedStores:o,pageSource:c}=r,d=a,g=o[0];if(!d||!g)return;const f=b().Bv.createChildStore(p,{table:s().ev,id:g.id});if(f.isNavigableBlock())await f.load(),m=[y().s({environment:t,parentBlockStore:l,targetStore:f,transaction:e})];else{const o=(0,i().A)({pageId:c.id,scrollToBlockId:f.id,baseUrl:u().A.domainBaseUrl,pageVisitSource:n().y8.LinkInPage});m=[N({blockUrl:o,spaceId:a.getSpaceId(),environment:t,transaction:e})]}}else if("links"===r.type){const{copiedLinks:d}=r;if(d.length!==o.length)return;m=(0,c().oE)(await Promise.all(d.map((async o=>{const r=o.scrollToBlockId||o.peekViewBlockId||o.blockId;if(r){const c=b().Bv.createChildStore(p,{table:s().ev,id:r});if(await c.load(),c.isNavigableBlock())return y().s({environment:t,parentBlockStore:l,targetStore:c,transaction:e});{const r=o.peekViewBlockId||o.blockId;if(r){const o=b().Bv.createChildStore(p,{table:s().ev,id:r});await o.load();return N({blockUrl:(0,i().A)({pageId:r,pageModel:o.getModel(),scrollToBlockId:c.id,baseUrl:u().A.domainBaseUrl,pageVisitSource:n().y8.LinkInPage}),spaceId:a.getSpaceId(),environment:t,transaction:e})}}}}))))}else(0,d().HB)(r);const g=k().LE({environment:t,blocksToInsert:m,target:o,replaceEmptyTextBlock:!0,transaction:e});k().ZL({environment:t,blocks:o,transaction:e}),I().td({environment:t,stores:g}),B(t)}})}function F(e){const{currentSpaceId:t,blocks:o,copiedStores:n}=e;return o.length>0&&!n.some((e=>e.isInsideCollection()))&&n.every((e=>e.canEdit()))&&n.every((e=>e.getSpaceId()===t))}async function U(e){const{environment:t,blocks:o,copiedBlockIds:n}=e,i=await Promise.all(n.map((async e=>{const t=b().Bv.createChildStore(o[0],{table:s().ev,id:e});await t.load();const n=t.getParentBlockStore();if(!n)throw new Error("Block has no parent.");await n.load();const r=n.getContentStore();return{store:b().Bv.createChildStore(r,{table:s().ev,id:e}),parentStore:n,parentContentStore:r}}))),a=i[0];if(!a)return;const l=(0,m().ZO)();if(!l)return;const{serverCommitResult:c}=x().createAndCommit({userAction:"blockPasteMenuActions.acceptCreateTransclusion",environment:t,canUndo:!0,perform:e=>{let n;if(a.store.getType()===r().xd.transclusionContainer)n=a.store;else if(a.store.getType()===r().xd.transclusionReference){const e=a.store.getTransclusionReferenceTargetStore();if(!e)throw new Error("Could not find target");n=e}else if(a.parentStore.getType()===r().xd.transclusionContainer)n=a.parentStore;else{n=w().Wv({environment:t,type:r().xd.transclusionContainer,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e,spaceId:a.store.pointer.spaceId});const o=n.getContentStore();S().Br({parentStore:a.parentContentStore,oldChildStore:a.store,newChildStore:n,transaction:e});for(const{store:t}of i)S().NI({parentStore:o,childStore:t,transaction:e})}const s=w().Wv({environment:t,type:r().xd.transclusionReference,format:{transclusion_reference_pointer:n.pointer},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e,spaceId:0!==o.length?o[o.length-1].pointer.spaceId:l.pointer.spaceId}),c=k().LE({environment:t,blocksToInsert:[s],target:o,transaction:e,replaceEmptyTextBlock:!0});k().ZL({environment:t,blocks:o,transaction:e}),I().td({environment:t,stores:c}),B(t)}});await c}},541801:(e,t,o)=>{o.d(t,{JA:()=>c,P6:()=>s,W3:()=>l,tA:()=>d,vK:()=>i,wT:()=>a,xl:()=>u});var n=()=>o(645873);const r={WorkflowSettingsViews:new(n().O2)("WorkflowSettingsViews",(()=>Promise.all([o.e(23806),o.e(75134),o.e(96346),o.e(36192),o.e(90409),o.e(63077),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(34576),o.e(92579)]).then(o.bind(o,216304)))),WorkflowTemplatesTooltip:new(n().O2)("WorkflowTemplatesTooltip",(()=>Promise.all([o.e(23806),o.e(63077),o.e(46414),o.e(67064),o.e(24598)]).then(o.bind(o,428137)))),WorkflowSettingsLinkedCollections:new(n().O2)("WorkflowSettingsLinkedCollections",(()=>Promise.all([o.e(23806),o.e(75134),o.e(96346),o.e(36192),o.e(90409),o.e(63077),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(34576),o.e(15399)]).then(o.bind(o,765556)))),WorkflowSettingsConfirmAddTemplate:new(n().O2)("WorkflowSettingsConfirmAddTemplate",(()=>Promise.all([o.e(23806),o.e(75134),o.e(96346),o.e(36192),o.e(90409),o.e(63077),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(24708)]).then(o.bind(o,960127)))),WorkflowTemplatesOnboardingModal:new(n().O2)("WorkflowTemplatesOnboardingModal",(()=>Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(32257),o.e(90409),o.e(63077),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(67064),o.e(15529)]).then(o.bind(o,830739))))},i=(0,n()._h)(r.WorkflowSettingsViews,(e=>e.WorkflowSettingsViews)),a=(0,n()._h)(r.WorkflowTemplatesTooltip,(e=>e.WorkflowTemplatesTooltip)),s=(0,n()._h)(r.WorkflowSettingsLinkedCollections,(e=>e.WorkflowSettingsLinkedCollections)),l=(0,n()._h)(r.WorkflowSettingsConfirmAddTemplate,(e=>e.WorkflowSettingsConfirmAddTemplate)),c=(0,n()._h)(r.WorkflowTemplatesOnboardingModal,(e=>e.WorkflowTemplatesOnboardingModalWithErrorBoundary)),d=new(n().O2)("workflowTemplatesHelpers",(()=>Promise.all([o.e(63077),o.e(46414),o.e(71204)]).then(o.bind(o,913454)))),u=new(n().O2)("loadWorkflowTemplateInstances",(async()=>o.e(17586).then(o.bind(o,191458))))},542811:(e,t,o)=>{o.d(t,{m:()=>r});var n=()=>o(292588);const r={table:o(197959).$Y,recordColumnTypes:{id:n().A.UUID,type:n().A.String,version:n().A.Number,last_version:n().A.Number,parent_id:n().A.UUID,parent_table:n().A.String,context:n().A.JSON,resolved:n().A.Boolean,comments:n().A.StringArray,space_id:n().A.UUID,reactions:n().A.UUIDArray,property_id:n().A.String},metaColumnTypes:{meta_user_id:n().A.UUID,meta_role:n().A.String}}},543225:(e,t,o)=>{o.d(t,{B:()=>i});var n=()=>o(317909),r=()=>o(299545);function i(e){const{transaction:t,blockStore:o,discussionId:i}=e,a=r().bN(o);return n().applyOperation({store:a,operation:{pointer:a.pointer,path:a.path,command:"listAfter",args:{id:i}},transaction:t}),a}},543491:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){}}const r=new n},544073:(e,t,o)=>{o.d(t,{C9:()=>l,LA:()=>u,_t:()=>p,qg:()=>m});var n=()=>o(415566),r=()=>o(419942),i=()=>o(177256),a=()=>o(959013),s=()=>o(972435);const l={table:"side_peek",board:"side_peek",calendar:"center_peek",list:"side_peek",gallery:"center_peek",timeline:"side_peek",page:"side_peek",chart:"side_peek",form_editor:"side_peek",feed:"side_peek",map:"center_peek",chat:"side_peek",custom:"side_peek"},c=(0,a().YK)({side_peek:{defaultMessage:"Side peek",id:"database.viewPropertiesMenu.peekMode.sidePeek"},center_peek:{defaultMessage:"Center peek",id:"database.viewPropertiesMenu.peekMode.centerPeek"},full_page:{defaultMessage:"Full page",id:"database.viewPropertiesMenu.peekMode.fullPage"}}),d=(0,a().YK)({side_peek:{defaultMessage:"Open pages on the side. Keeps the view behind interactive.",id:"database.viewPropertiesMenu.peekMode.description.sidePeek"},center_peek:{defaultMessage:"Open pages in a focused, centered modal.",id:"database.viewPropertiesMenu.peekMode.description.centerPeek"},full_page:{defaultMessage:"Open pages in full page.",id:"database.viewPropertiesMenu.peekMode.description.fullPage"}});function u(e){switch(e){case"side_peek":return s().A.formatMessage(c.side_peek);case"center_peek":return s().A.formatMessage(c.center_peek);case"full_page":return s().A.formatMessage(c.full_page)}}function p(e){switch(e){case"side_peek":return s().A.formatMessage(d.side_peek);case"center_peek":return s().A.formatMessage(d.center_peek);case"full_page":return s().A.formatMessage(d.full_page)}}function m(e){switch(e){case"side_peek":return i().A;case"center_peek":return n().q;case"full_page":return r().o}}},544303:(e,t,o)=>{o.d(t,{GB:()=>l,KK:()=>_,WN:()=>b,ao:()=>u,cJ:()=>p,sK:()=>c});o(944114);var n=()=>o(700500),r=()=>o(634201),i=()=>o(179034),a=()=>o(534177),s=()=>o(630116);function l(e){if(0===e)return"a";let t=0,o=0,n="";for(;e>0;)t=(e-1)/26,o=(e-1)%26,e=Math.floor(t),n=String.fromCharCode(97+o)+n;return n}function c(e){let t=0,o=0;const n=e.split("").reverse();for(const r of n){t+=(r.charCodeAt(0)-96)*26**o,o+=1}return t}const d={"m̄":1e6,"d̄":5e5,"c̄":1e5,"l̄":5e4,"x̄":1e4,"v̄":5e3,m:1e3,cm:900,d:500,cd:400,c:100,xc:90,l:50,xl:40,x:10,ix:9,v:5,iv:4,i:1};function u(e){let t="";if(0===e)return"0";for(const o of(0,a().uv)(d)){const n=Math.floor(e/d[o]);if(n>=0)for(let e=0;e<n;e++)t+=o;e%=d[o]}return t}function p(e){const t=r().PE(e);let o,n,i,a,s=0;for(let r=0;r<t.length;r++){if(o=t[r],n=o?d[o]:void 0,i=t[r+1],a=i?d[i]:void 0,!n)return-1;a&&n<a?s-=n:s+=n}return s}const m=4.44,g={i:3.64,v:8.36,x:8.08,l:3.73,c:8.64,d:9.52,m:13.61,"m̄":13.61,"d̄":9.52,"c̄":8.64,"l̄":3.73,"x̄":8.08,"v̄":8.36};function f(e){const t=r().PE(e);let o=0;for(const n of t)o+=g[n];return o+m}const v=[24],h=14;function _(e){const t=p(e);if(t<=v.length)return v[t-1];let o=v[v.length-1];for(let n=v.length+1;n<=t;n++){const e=f(u(n));e>o&&(o=e+h),v.push(o)}return o}function b(e){const{blockIds:t,parentStore:o}=e,r=[];let a=0;for(;a<t.length;){let e=t[a],l=s().Bv.createChildStore(o,{table:i().ev,id:e});if(l.getType()===n().xd.numberedList){const c=[{blockId:e,idx:1}],d=[{id:e,format:void 0,depth:c.length-1,index:c[0].idx}];for(a+=1;a<t.length&&(e=t[a],l=s().Bv.createChildStore(o,{table:i().ev,id:e}),l.getType()===n().xd.numberedList);){{const t=l.getParentId();if(l.getParentId()===c[c.length-1].blockId)c.push({blockId:e,idx:1});else{let o=c[c.length-1].idx;for(;c.length>0&&c[c.length-1].blockId!==t;)o=c[c.length-1].idx,c.pop();c.push({blockId:e,idx:o+1})}d.push({id:e,format:void 0,depth:c.length-1,index:c[c.length-1].idx})}a+=1}r.push(d)}else a+=1}return r}},545206:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{}}}const r=new n},545285:(e,t,o)=>{o.d(t,{u:()=>n});function n(e){return r[e.table]}const r={block:!0,notion_user:!0,space:!0,space_bot:!0,space_permission_group:!0,space_permission_group_member:!0,space_user:!0,organization:!0,organization_space:!0,space_view:!0,user_root:!0,collection:!0,collection_view:!0,follow:!0,discussion:!0,comment:!0,user_settings:!0,slack_integration:!0,bot:!0,integration:!0,space_invite_link:!0,page_visit:!0,page_exit:!0,[o(402904).As]:!0,team:!0,[o(204384).ez]:!0,[o(310442).yj]:!0,[o(123382).MC]:!0,[o(144081).zx]:!0,[o(837420).e]:!0,[o(63128).Ay]:!0,[o(921515).rM]:!0,[o(144986).WQ]:!0,activity:!1,notification:!1,access_request:!1,customer:!1,temporary_password:!1,password:!1,slack_notification:!1,snapshot:!1,credit:!1,used_credit:!1,space_recover_pages:!1,user_metadata:!1,saml_config:!1,experiment:!1,education_domain:!1,education_email:!1,public_email_domain:!1,user_data_consent_permissions:!1,token:!1,apple_token:!1,google_token:!1,firebase_token:!1,trello_token:!1,asana_token:!1,confluence_token:!1,monday_token:!1,external_entity:!1,external_integration_app:!1,external_token:!1,evernote_token:!1,drive_token:!1,block_token:!1,bot_token:!1,integration_token:!1,subscription:!1,space_domain:!1,admin_api_log:!1,admin_api_op_log:!1,oauth_authorization_code:!1,mfa_settings:!1,device:!1,user_device:!1,[o(343747).rG]:!1,[o(908651).p]:!1,[o(379922).o]:!1,[o(317727).$]:!1,[o(599677).h]:!1,[o(791036).W]:!1,[o(258911).h]:!1,[o(840911).Ps]:!1,[o(926397).Hx]:!1,[o(326399).XH]:!1,[o(545893).$]:!1,[o(426302).Yx]:!1,[o(912720).yB]:!1,[o(415292).sN]:!1,[o(526147).Fu]:!1,[o(199378).SC]:!1,[o(7615).Jm]:!1,[o(231460).sB]:!1,[o(324694).y]:!1,[o(412742)._0]:!1,[o(641284).a]:!1,[o(29568).gD]:!1,[o(197577).hR]:!1,[o(959577).XX]:!1,[o(192249).Hi]:!1,[o(87845).b]:!1,[o(527925).v]:!1,[o(529745).Ht]:!1,[o(664540).K]:!1,[o(666450).UL]:!1,[o(827570)._F]:!1,[o(610409).P]:!1,[o(299816).y]:!1,[o(510618).W]:!1,[o(606219).TF]:!1,[o(363497).TF]:!1,[o(771927).Nm]:!1,[o(421076).yt]:!1,[o(204742).CE]:!1,[o(449418)._6]:!1,[o(853040).kf]:!1,[o(602468).Yx]:!1,[o(959017).h]:!1,[o(101628).Eu]:!1,[o(665344)._i]:!1,[o(266442).UN]:!1,[o(365970).en]:!1,[o(374982).QO]:!1,[o(549094).Eg]:!1,[o(736062).Kc]:!1,[o(197651).zi]:!1,[o(471987).XX]:!1,[o(581325).pE]:!1,[o(37165).lo]:!1,[o(783230).i]:!1,[o(837241).Z]:!1,[o(847866).iP]:!1,[o(193657).bh]:!1,[o(277816).A]:!0,[o(548632).YV]:!1,[o(296749).j]:!1,[o(506327).bw]:!1,[o(765008).eV]:!1,[o(633240).e]:!1,[o(232802).GU]:!1,[o(429485).Xh]:!1,[o(885316).s]:!1,[o(158158).o]:!1,[o(384148).eq]:!1,[o(591822).G]:!1,[o(474989).ns]:!1,[o(41693).H]:!1,[o(838968).m]:!1,[o(628588).G]:!1,[o(652106).k]:!1,[o(141150).Q]:!1,[o(113285).ZS]:!1,[o(829126).W]:!1,[o(978841).b]:!1,[o(62182).C]:!1,[o(743246).C0]:!1,[o(969752).Ec]:!1,[o(145820).QR]:!1,[o(39603).P]:!1,[o(541837).ly]:!1,[o(78881).N]:!1,[o(758256).U6]:!1,[o(552826).yD]:!1,[o(234459).To]:!1,[o(155792).mS]:!1,[o(742738).Xi]:!1,[o(976617).H]:!1,[o(776217).bn]:!1,[o(192125).h]:!1,[o(379951).PX]:!1,[o(761152).I]:!1,[o(338180).o]:!1,[o(485819).n]:!1,[o(895180).S]:!1,[o(838838).KN]:!1,[o(40117).l]:!1,[o(623403).r]:!1,[o(767194).q]:!1}},546369:(e,t,o)=>{o.r(t),o.d(t,{getDataForStatsigUser:()=>m,waitForStatsigInitialization:()=>p});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(244641),r=()=>o(427704),i=()=>o(762433),a=()=>o(763824),s=()=>o(437622),l=()=>o(905654),c=()=>o(165162),d=()=>o(351360),u=()=>o(975971);async function p(e){const{environment:t,initializeStatsigResult:o}=e;if(o.initializedOnServer)try{const{timeout:e}=await(0,a().nQ)(function(e){const{environment:t}=e;if(t.device.isMobile)return function(){const e=(0,l().EU)();return new Set([r().JZ.signup,r().JZ.login,r().JZ.signupCalendar,r().JZ.loginCalendar,r().JZ.signupMail,r().JZ.loginMail]).has(e)}()?1e3:0;switch(t.device.platform){case"browser":switch(t.device.os){case"chrome":return 604;case"linux":return 613;case"mac":return 550;case"windows":return 633}break;case"electron":switch(t.device.os){case"chrome":return 1555;case"mac":return 1680;case"windows":return 1931}}return 700}({environment:t}),o.finishInitializePromise);return{didStatsigBootupTimeout:e}}catch(n){return{didStatsigBootupTimeout:!1}}return{didStatsigBootupTimeout:!1}}function m(e){var t,o,r,a;const{environment:l,deviceId:p,browserId:m}=e,{device:g,currentUser:f}=l,{currentUserStore:v,currentUserSettingsStore:h,currentSpaceStore:_}=d().default.getState(),b=f.id,y=null==v?void 0:v.getEmail(),S=null==_?void 0:_.id,{function:w,role:k,companySize:I,useCases:A}=s().p3(),x=S?null===(t=u().A.getData(l,{spaceId:S}))||void 0===t?void 0:t.billingData:void 0;return{stableId:(0,c().getOrCreateStableID)(),userId:b,device:g,spaceId:S,userEmail:y,deviceId:p,browserId:m,locale:null==h||null===(o=h.getSettings())||void 0===o?void 0:o.preferred_locale,spaceCreatedTime:null==_?void 0:_.getCreatedTime(),spaceCreatedDate:null!=_&&_.getCreatedTime()?n().c9.fromMillis(null==_?void 0:_.getCreatedTime()).toFormat("yyyy-MM-dd"):void 0,subscriptionTier:(0,i().AI)(x),isSalesAssistedPlan:(0,i().N8)(null==x?void 0:x.subscription),planType:null==_?void 0:_.getPlanType(),signupTime:null==h||null===(r=h.getSettings())||void 0===r?void 0:r.signup_time,domainType:null==h||null===(a=h.getSettings())||void 0===a?void 0:a.domain_type,persona:w,teamRole:k,useCases:A,companySize:I}}},546574:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(803949);class n extends(()=>o(757695))().default{getInitialState(){return{pageId:void 0,lastInteractionTimes:{}}}resetIfNotCurrentPage(e){e!==this.state.pageId&&this.reset()}markDiscussionsInteractedWith(e){const t={};e.forEach((e=>{t[e]=Date.now()})),this.setState({...this.state,lastInteractionTimes:t})}}const r=new n},547162:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isOpen:!1,content:null}}}const r=new n},547392:(e,t,o)=>{o.d(t,{Il:()=>E,MB:()=>C,MS:()=>A,Mg:()=>P,Rp:()=>T,Zd:()=>M,vZ:()=>x});o(16280),o(898992),o(823215),o(581454);var n=()=>o(908006),r=()=>o(700500),i=()=>o(592269),a=()=>o(708830),s=()=>o(496603),l=()=>o(186445),c=()=>o(299545),d=()=>o(20313),u=()=>o(969197),p=()=>o(861841),m=()=>o(630116),g=()=>o(611371),f=()=>o(317001),v=()=>o(656432),h=()=>o(415651),_=()=>o(675074),b=()=>o(826810),y=()=>o(722101),S=()=>o(246826),w=()=>o(797265),k=()=>o(778417),I=()=>o(725614);function A(e){const{environment:t,droppedDirection:o,droppedStores:n,targetStore:a,targetParentStore:l,transaction:c,duplicate:d}=e,u=n.every((e=>e.isExternalObjectInstancePageBlockStore()))||d;if(a&&o===p().bH.Onto){k().IU({environment:t});const e=!(a.isInsideTemplate()||a.isInsideFactoryOrDuplicateBlocksAction());let o=a;if(a.isType(r().xd.alias)){const e=a.getAliasTargetStore();if(!e)throw new Error("Alias has no target.");e instanceof m().Bv&&(o=e)}const s=h().MS({environment:t,droppedStores:n,duplicate:u,transaction:c,resolveTemplateVariables:e}),l=o.getCollectionStore();if(o.isCollectionView()&&!o.isCollectionViewPageWithContent()){if(!l)throw new Error("CollectionStore is not defined.");const e=(0,v().K)({environment:t,stores:s,transaction:c,spaceId:l.getSpaceId()});for(const o of e)(0,f().j)({environment:t,store:o,collectionStore:l,shouldCoerce:!0,groupsPointer:[],transaction:c});return e}{const e=o.getAssociatedCollectionStore();if(null!=e&&e.isPageTreeCollection())for(const o of s){if("page"!==o.getType())continue;if(!o.isDefined())continue;const t=i().Yt({blockProperties:o.getProperties(),oldSchema:o.getSchema(),newSchema:e.getSchema(),typesMatch:!1,oldPropertyMapping:void 0,newPropertyMapping:void 0});t.propertyUpdate&&Object.keys(t.propertyUpdate).length>0&&S().zv({store:o.getPropertiesStore(),data:t.propertyUpdate,transaction:c})}const t=o.getContentStore();for(const o of s)y().BC({parentStore:t,appendStore:o,transaction:c});return s}}{const e=!!a&&!(a.isInsideTemplate()||a.isInsideFactoryOrDuplicateBlocksAction(!1));let r=h().MS({environment:t,droppedStores:n,duplicate:u,transaction:c,resolveTemplateVariables:e});return o===p().bH.Above?(r=s().o8(r),a?r=r.map((e=>y().nc({parentStore:l,insertStore:e,beforeStore:a,transaction:c}).childStore)):(r.reverse(),r=r.map((e=>y().Hs({parentStore:l,prependStore:e,transaction:c}).childStore)))):o===p().bH.Below?(r=s().o8(r),a?(r.reverse(),r=r.map((e=>y().WH({parentStore:l,insertStore:e,afterStore:a,transaction:c}).childStore))):r=r.map((e=>y().BC({parentStore:l,appendStore:e,transaction:c}).childStore))):a&&o===p().bH.Left?r=b().dC({environment:t,parentStore:l,insertStores:r,leftStore:a,transaction:c}):a&&o===p().bH.Right&&(r=b()._p({environment:t,parentStore:l,insertStores:r,rightStore:a,transaction:c})),w().x5({environment:t,insertedStores:r}),k().td({environment:t,stores:r}),r}}function x(e){const{environment:t,files:o,droppedDirection:n,targetStore:r,targetParentStore:i,transaction:a}=e,s=i.inMemoryRecordCache,c=l().y0(t);A({environment:t,targetParentStore:i,targetStore:r,droppedDirection:n,droppedStores:_().$C({environment:t,files:o,inMemoryRecordCache:s,pageWidth:c,transaction:a,spaceId:null==r?void 0:r.pointer.spaceId}),duplicate:!1,transaction:a})}function C(e){const{environment:t,targetStore:o,isAtStartOfLine:n}=e;(function(e){const{environment:t,isClick:o,targetStore:n}=e;if(!o)return!1;const i=n.findRecordStoreUIAncestor((e=>e instanceof m().Bv&&e.isTransclusionType())).ancestor;if(i&&i instanceof m().Bv){const e=n.findRecordStoreUIAncestor((e=>e instanceof m().Bv&&e.getType()===r().xd.transclusionReference)).ancestor,o=(e&&e instanceof m().Bv?e:void 0)||i,a=o.getRecordStoreUIParent();if(!a||!(0,c().iU)(a))return;return k().td({environment:t,stores:[o]}),!0}return!1})(e)||E({environment:t,store:o,isAtStartOfLine:n})||function(e){const{environment:t,targetStore:o,isAtStartOfLine:n}=e,r=k().Xc(),i=r.indexOf(o);if(-1===i)return!1;if(n)for(let a=i;a>=0&&a>i-20;a--){if(E({environment:t,store:r[a],isAtStartOfLine:!1}))return!0}else for(let a=i;a<r.length&&a<i+20;a++){if(E({environment:t,store:r[a],isAtStartOfLine:!0}))return!0}}(e)}function T(e){const{environment:t,targetStore:o,isAtStartOfLine:n}=e;E({environment:t,store:o,isAtStartOfLine:n})||R({...e,placement:"after"})}function M(e){return B({...e,destination:"page"})}function P(e){return B({...e,destination:"sibling"})}function B(e){const{environment:t,container:o,store:n,transaction:i,destination:l}=e,u=function(e){var t;const{container:o,store:n}=e;let i=(0,d().Ag)({includeNonSelectableListContainer:!0,container:o});i&&n&&(i=s().HV((0,a().Qe)([i],(e=>e.value.store===n))));if(!i)return;let l=i;for(;l.children.length>0;){const e=s().HV(l.children);if(0===e.children.length)break;const t=e.value.store.getType();if(t&&r().V4[t])break;l=e}return{parentStore:l.value.store,siblingStore:null===(t=s().HV(l.children))||void 0===t?void 0:t.value.store}}({container:o,store:n});if(!u)return!1;const{parentStore:p,siblingStore:g}=u;if(g&&(0,c().P4)(g))return!1;const f={sibling:p,page:p.getRecordStoreUIRoot()}[l];return f instanceof m().Bv&&(!f.isNonEditableState()&&R({environment:t,targetParentStore:f.getContentStore(),placement:"after",transaction:i}))}function R(e){const{environment:t,targetStore:o,targetParentStore:i,placement:a,transaction:s}=e;if(i.getValue()&&(0,g().EF)(t)&&(0,g().EF)(t)){const e=S().Wv({environment:t,type:r().xd.text,inMemoryRecordCache:i.inMemoryRecordCache,transaction:s,spaceId:i.pointer.spaceId}),l="after"===a?y().WH({parentStore:i,afterStore:o,insertStore:e,transaction:s}):y().nc({parentStore:i,beforeStore:o,insertStore:e,transaction:s});return n().default.afterNextFlush((()=>{E({environment:t,store:l.childStore,isAtStartOfLine:!1})})),!0}return!1}function E(e){const{environment:t,store:o,isAtStartOfLine:n}=e,r=(0,u().aI)(o);return!!r&&(k().hc({environment:t,store:o}),n?I().setSelectionAtStart({store:r}):I().setSelectionAtEnd({store:r}),!0)}},548527:(e,t,o)=>{o.d(t,{P:()=>r});var n=o(296540);function r(e){const t=(0,n.useRef)(null),[o,r]=(0,n.useState)(!1),i=(0,n.useMemo)((()=>new IntersectionObserver((e=>{let[t]=e;return r(t.isIntersecting)}),{...void 0!==e?{threshold:e}:{}})),[e]),a=(0,n.useCallback)((()=>{const e=t.current;e&&i.observe(e)}),[i]),s=(0,n.useCallback)((e=>{e?(t.current=e,a()):t.current=null}),[a]);return(0,n.useEffect)((()=>()=>i.disconnect()),[i]),[s,o]}},548821:(e,t,o)=>{o.d(t,{Ay:()=>a,Rr:()=>n,m8:()=>r});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);let n=function(e){return e[e.Frame=0]="Frame",e[e.PeekView=1]="PeekView",e[e.InAppTemplatePreview=2]="InAppTemplatePreview",e[e.InPageSnapShot=3]="InPageSnapShot",e[e.CollectionViewBlockFullScreen=4]="CollectionViewBlockFullScreen",e[e.CollectionPageViewFullScreen=5]="CollectionPageViewFullScreen",e[e.CollectionPageView=6]="CollectionPageView",e[e.SitePreview=7]="SitePreview",e[e.Form=8]="Form",e[e.DraftPostInInlineComposer=9]="DraftPostInInlineComposer",e[e.PostInFullPageOrPeek=10]="PostInFullPageOrPeek",e[e.DraftPostInFullPageComposer=11]="DraftPostInFullPageComposer",e[e.PostInFeed=12]="PostInFeed",e[e.Presentation=13]="Presentation",e}({});const r=new Set([n.DraftPostInInlineComposer,n.PostInFeed]);class i extends(()=>o(757695))().default{getInitialState(){return{forceDiscussionOpen:!1}}}const a=i},548901:(e,t,o)=>{o.d(t,{A:()=>y});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(979004),l=()=>o(959013),c=()=>o(100622),d=()=>o(148024),u=()=>o(836251),p=()=>o(403409),m=()=>o(187485),g=()=>o(14235),f=()=>o(145192),v=o(474848);const h={mobilePreview:{padding:"4px 8px",height:80,display:"flex",alignItems:"center",justifyContent:"center"},mobilePreviewValue:{overflow:"auto"},submitButton:{alignSelf:"flex-start"},enterIcon:{height:14,width:14,fill:"currentColor",marginLeft:6,marginTop:2},errorContainer:{color:c().Ay.redWithAlpha(.8),fontSize:12,padding:"8px 10px"}},_=n.forwardRef((function(e,t){const s=(0,n.useRef)(null),l=(0,r().v3)(),{isOpen:c,onDismiss:d,origin:u,originRect:p,originGap:m,popupStyle:f}=e,h=(0,i().K8)((()=>w(l)),[l]),_=(0,a().IS)((e=>({inputWrapper:{display:"flex",alignItems:"center",padding:"8px 10px",width:"100%",background:e.inputBackground},popup:{width:400,display:"flex",flexDirection:"column"}})),[]);(0,n.useEffect)((()=>{l.KatexStore.loadIfNeeded((()=>[(0,o(919709).G0H)("")]))}),[l.KatexStore]),(0,n.useImperativeHandle)(t,(()=>({getSelection:()=>{if(!s)return;if(!s.current)return;const e=s.current.getSelection();return"contain"===(null==e?void 0:e.type)?e.selection:void 0}})),[]);const y=(0,v.jsxs)("div",{style:_.inputWrapper,children:[(0,v.jsx)(b,{ref:s,...e}),(0,v.jsx)(I,{error:e.error,disabled:e.disabled,isOpen:e.isOpen,onSubmit:e.onSubmit,onDismiss:e.onDismiss})]}),S=(0,i().K8)((()=>w(l)===g().nl.SlideUp),[l]);return(0,v.jsx)(g().Ay,{popupType:h,open:c,origin:u,originRect:p,originGap:m,keepFocus:h===g().nl.SlideUp,onDismiss:d,style:{..._.popup,...f},render:()=>(0,v.jsx)(o(297872).A,{capture:c,allowEsc:!0,render:()=>S?(0,v.jsxs)(n.Fragment,{children:[(0,v.jsx)(x,{equationValue:e.equationValue,error:e.error,displayMode:e.displayMode,isOpen:e.isOpen}),y]}):(0,v.jsxs)(n.Fragment,{children:[y,(0,v.jsx)(A,{isOpen:e.isOpen,error:e.error})]})})})})),b=n.forwardRef((function(e,t){const{disabled:n,isOpen:l,equationValue:c,onLeft:d,onRight:u,onDismiss:m,displayMode:f}=e,h=(0,r().v3)(),_=(0,i().K8)((()=>w(h)===g().nl.SlideUp),[h]),b=!n&&!_,y=_?{type:p().e.Textarea}:{type:p().e.InlineWrap,onSubmit:t=>k(t,e.isOpen,e.disabled,e.error,e.onSubmit,e.onDismiss)},I=(0,a().IS)((e=>({base:{fontFamily:o(284371).vc(o(662303).locale).mono,fontSize:14,marginRight:8,flex:1,wordBreak:"break-word",maxHeight:"50vh",overflow:"auto",..."block"===f&&{minHeight:60},..._&&{height:100}},placeHolder:{color:e.lightTextColor}})),[f,_]);return(0,v.jsx)(p().A,{ref:t,...y,disabled:n,focus:l,selectAll:b,value:c||"",placeholder:S(e.displayMode),getHtml:t=>function(e,t){return t.highlight(o(496603).x4(e),t.languages[s().PrismLanguages.latex],s().PrismLanguages.latex)}(t,e.Prism),onChange:t=>function(e,t,n,r,i){if(!t)return;n(e,o(197194).vG({environment:i,equation:e,displayMode:r}))}(t,e.isOpen,e.onChange,e.displayMode,h),onCancel:m,onLeft:d,onRight:u,placeholderStyle:{...I.base,...I.placeHolder},style:I.base,autoCorrect:"off",autoCapitalize:"off"})})),y=_;function S(e){return"block"===e?"|x| = \\begin{cases}             \n  x, &\\quad x \\geq 0 \\\\           \n -x, &\\quad x < 0             \n\\end{cases}":"E = mc^2"}function w(e){const{device:t}=e,o=t.isPhone&&t.isIOS&&t.isMobileBrowser;return t.isPhone&&!o?g().nl.SlideUp:g().nl.Popup}function k(e,t,o,n,r,i){e.preventDefault&&e.preventDefault(),o||t&&(n||(r(),i()))}function I(e){let{error:t,disabled:n,isOpen:r,onSubmit:i,onDismiss:a}=e;return n?null:(0,v.jsxs)(o(204063).A,{onClick:e=>k(e,r,n,t,i,a),disabled:n||Boolean(t),style:h.submitButton,children:[(0,v.jsx)(l().sA,{defaultMessage:"Done",id:"equationInput.submitButton.label"}),(0,o(356596).K)(h.enterIcon)]})}function A(e){let{isOpen:t,error:o}=e;const n=(0,r().v3)(),s=(0,i().K8)((()=>w(n)===g().nl.Popup),[n]),p=(0,a().IS)((e=>({container:{color:c().Ay.redWithAlpha(.8),fontSize:12,padding:"8px 10px",...s&&{boxShadow:`0 -1px ${e.lightDividerColor}`}},label:{fontWeight:600},learnMoreLink:{display:"inline",textDecoration:"underline"}})),[s]);if(!t)return null;if(!o)return null;const f=o.message.replace("KaTeX parse error: ","");return(0,v.jsxs)("div",{role:"alert",style:p.container,children:[(0,v.jsx)("span",{style:p.label,children:(0,v.jsx)(l().sA,{defaultMessage:"Invalid equation:",id:"equationInput.inputError.label"})})," ",f,". ",(0,v.jsx)(m().A,{href:(0,u().xS)("guides.equations"),external:!0,onClick:()=>{d().FH(n,{from:"equation_input"})},style:p.learnMoreLink,children:(0,v.jsx)(l().sA,{defaultMessage:"Learn more",id:"equationInput.inputError.learnMore"})})]})}function x(e){let{equationValue:t,error:o,displayMode:n,isOpen:r}=e;const i=(0,a().DP)();return t?(0,v.jsx)("div",{style:h.mobilePreview,children:o?(0,v.jsx)(A,{isOpen:r,error:o}):"block"===n?(0,v.jsx)(f().A,{display:n,equation:t,style:h.mobilePreviewValue,theme:i}):(0,v.jsx)(f().A,{display:n,equation:t,style:h.mobilePreviewValue,theme:i,index:0,isTemporary:!1})}):null}},549500:(e,t,o)=>{o.d(t,{$O:()=>r,EO:()=>l,IM:()=>s,a0:()=>i,hq:()=>c,i6:()=>a});var n=()=>o(645873);const r=new(n().O2)("dictation",(()=>Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(2681),o.e(90372),o.e(54518)]).then(o.bind(o,197271)))),i=(0,n()._h)(r,(e=>e.StopDictationButton)),a=(0,n()._h)(r,(e=>e.StopDictationListener)),s=(0,n()._h)(r,(e=>e.StopDictationButtonMobile)),l=(0,n()._h)(r,(e=>e.DictationBubble)),c=(0,n()._h)(r,(e=>e.DictationAvatar))},551625:(e,t,o)=>{o.d(t,{T:()=>g});o(581454);var n=()=>o(837788),r=()=>o(845710),i=()=>o(857639),a=()=>o(498212),s=()=>o(186445),l=()=>o(627506),c=()=>o(875856),d=()=>o(313462),u=()=>o(233996),p=()=>o(449918),m=()=>o(599824);async function g(e){const{environment:t,userId:o,traits:g}=e,f=c().default.shouldRefresh(o)?await(0,m().E)(t):c().default.state,v=function(e){const t=(0,p().e)();if(!t.user_id)return;const{user_id:o,email:n,name:r,...i}=e;return{...i,user_id:t.user_id,email:t.email,name:t.name}}(g);if(!v)return void i().rateLimitedLog({level:"warning",from:"analyticsHelpers",type:"noCleanAnalyticsUser"});const h=(0,a().ot)(v.user_id);if(null!=f&&f.isLoggingEnabled){const e=(0,s().UZ)().map(a().ot),o=await(0,l()._)(t),i=await(0,u().w)(t),{accept_language_raw:c,accept_language_preference:d}=i,p=(0,n().A)({accept_language_raw:c,accept_language_preference:d},"ignore-class-instances"),m={...i,space_has_paid_nonzero:!(!o||!("space_has_paid_nonzero"in o))&&o.space_has_paid_nonzero,integrations:{All:!0}},g={...v,user_email:v.email,...p,...m};r().gm({userId:h,traits:g,spaceIds:e})}(0,d().I)()&&console.log("identify:",JSON.stringify(g))}},551694:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1,stage:"landing"}}open(){this.setState({open:!0,stage:"landing"})}close(){this.setState({open:!1,stage:"landing"})}}const r=new n},551864:(e,t,o)=>{o.d(t,{e:()=>T});var n=()=>o(91913),r=()=>o(426234),i=()=>o(933449),a=()=>o(179034),s=()=>o(919709),l=()=>o(534177),c=()=>o(606952),d=()=>o(317909),u=()=>o(969197),p=()=>o(630116),m=()=>o(808207),g=(o(18107),o(967357),()=>o(496603)),f=(o(944114),o(898992),o(672577),()=>o(220719)),v=()=>o(653609);function h(e,t,o,n){const r=n.getClosestPageAndTransclusionReferenceAncestorIds(t),i=n.getClosestPageAndTransclusionReferenceAncestorIds(o);if(0===r.length||0===i.length)return[];const a=[];for(const s of g().E$(r,i)){const r=(0,f().o9)(n.getPathToBlock(s)),i=(0,f().o9)(b(e,r));a.push(..._(i,t,o))}return a.sort(((e,t)=>e.length-t.length)),a}function _(e,t,o){const n=[];let r=[];for(const i of function*(e,t){let o=!1;for(const n of function*(e){function t(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function*(){if(yield e,(!e.isNavigableBlock()||o)&&("transclusion_reference"!==e.getType()||n))for(const o of(0,v().W)(e))yield*t(o,!1,!1)}()}yield*t(e,!0,!0)}(e))n.id===t&&(o=!0),o&&(yield n)}(e,t))if(i.id!==t){if(r.length>0){if("transclusion_reference"===i.getType()){r=[];continue}r.push(i),i.id===o&&(n.push(r),r=[])}}else r=[i],t===o&&(n.push(r),r=[]);return n.sort(((e,t)=>e.length-t.length)),n}function b(e,t){(0,f().MX)(t.length>0,"Path must not be empty"),(0,f().MX)(e.id===t.shift(),"Path must start with root store id");let o=e;for(;t.length>0;){const e=(0,f().o9)(t.shift()),n=(0,v().W)(o).find((t=>t.id===e));if(!n)return;o=n}return o}var y=()=>o(495074),S=()=>o(301421);function w(e){const{store:t}=e;let o;const n=y().A.getPageStoreForBlockStore(t);if(o=n?k({...e,pageStore:n,allowNonRenderedSingleStoreSelection:!1}):I(e),o&&(o.start.store!==o.end.store||o.start.index<o.end.index))return o}function k(e){var t,o;const{store:r,startTextInstanceId:a,startId:s,endTextInstanceId:c,endId:d,pageStore:u,allowNonRenderedSingleStoreSelection:p}=e,m=(0,i().o9)(y().A.getPageTextInstanceTrackerForPage(u.pointer),n().kC),f=m.getBlockIdForTextInstanceItemId(a,s),v=m.getBlockIdForTextInstanceItemId(c,d);if(void 0===f||void 0===v)return;const _=h(u,f,v,(0,i().o9)(y().A.getPageBlockTrackerForPage(u.pointer),n().as));let b,w;const k=g().Ul(_,(e=>(0,i().o9)(e.at(0),n().NQ)===r?-1:1));for(const l of k){const e=(0,i().o9)(l.at(0),n().NQ),t=(0,i().o9)(l.at(-1),n().NQ);if(S().n.findEditableWithStore(e.getBlockTitleStore())&&S().n.findEditableWithStore(t.getBlockTitleStore())){b=e,w=t;break}}if((!b||!w)&&p&&k.length>0&&k[0].at(0)===k[0].at(-1)&&(b=(0,i().o9)(k[0].at(0),n().NQ),w=(0,i().o9)(k[0].at(-1),n().NQ)),!b||!w)return;const I=(0,i().o9)(null===(t=b.getBlockTitleTextSliceTree())||void 0===t?void 0:t.getGraphemeIndexOfTextItem(a,s),n().Dp),A=(0,i().o9)(null===(o=w.getBlockTitleTextSliceTree())||void 0===o?void 0:o.getGraphemeIndexOfTextItem(c,d),n().Dp),x="visible"===I.type?I.index:"deleted"===I.type?I.nextVisibleIndex:(0,l().HB)(I),C="visible"===A.type?A.index+1:"deleted"===A.type?A.nextVisibleIndex:(0,l().HB)(A);return{start:{store:b.getBlockTitleStore(),index:x},end:{store:w.getBlockTitleStore(),index:C}}}function I(e){var t;const{store:o,startTextInstanceId:n,startId:r,endTextInstanceId:a,endId:s}=e;(0,i().MX)(o.useCrdt(),"Expected CRDT block");const c=null===(t=o.getBlockTitleTextSliceTree())||void 0===t?void 0:t.getTextInstanceIds();if(!c||!c.has(n)||!c.has(a))return;const d=o.getBlockTitleTextSliceTree(),u=null==d?void 0:d.getGraphemeIndexOfTextItem(e.startTextInstanceId,e.startId);if(!u)return;const p=a===n&&s===r?u:null==d?void 0:d.getGraphemeIndexOfTextItem(e.endTextInstanceId,e.endId);if(!p)return;const m="visible"===u.type?u.index:"deleted"===u.type?u.nextVisibleIndex:(0,l().HB)(u),g="visible"===p.type?p.index+1:"deleted"===p.type?p.nextVisibleIndex:(0,l().HB)(p);return{start:{store:o.getBlockTitleStore(),index:m},end:{store:o.getBlockTitleStore(),index:g}}}function A(e){const{store:t,textInstanceId:o,itemId:r,options:a}=e,s=y().A.getPageStoreForBlockStore(t);if(!s)return;const l=(0,i().o9)(y().A.getPageTextInstanceTrackerForPage(s.pointer),n().kC).getBlockIdForTextInstanceItemId(o,r,a);if(!l)return;const c=h(s,l,l,(0,i().o9)(y().A.getPageBlockTrackerForPage(s.pointer),n().as));if(c.length>0){const e=c[0];return(0,i().MX)(1===e.length,"Range must contain exactly one block store"),e[0]}}function x(e){const{environment:t,store:o,transaction:r,operation:a}=e,c=function(e){const{store:t,textInstanceId:o,id:n}=e,r=y().A.getPageStoreForBlockStore(t),i=r?k({store:t,startTextInstanceId:o,startId:n,endTextInstanceId:o,endId:n,pageStore:r,allowNonRenderedSingleStoreSelection:!0}):I({store:t,startTextInstanceId:o,startId:n,endTextInstanceId:o,endId:n});return null==i?void 0:i.end}({store:o,textInstanceId:a.args.textInstanceId,id:a.args.originId});if(!c)return o.useCrdt()?"err_no_store_position":(M({environment:t,store:o,invertedOperation:a,transaction:r}),"success_non_crdt");const d=(0,i().o9)((0,u().T)(c.store),"Inverted delete parent block store is required"),p=(0,i().o9)(d.getBlockTitleTextSliceTree(),n().cf),{operations:g,invertedOperations:f}=p.getOperationsForInsertTextValueAfterOriginId(a.args.textInstanceId,a.args.searchLabel,a.args.originId,a.args.deletedTextValue),v=(0,i().o9)(p.getGraphemeIndexOfTextItem(a.args.textInstanceId,a.args.originId),n().Dp),h="visible"===v.type?v.index+1:"deleted"===v.type?v.nextVisibleIndex:(0,l().HB)(v),_=s().__s(s().xym(p.getTextValue(),a.args.deletedTextValue,h));return m().d({transaction:r,store:d,crdtOperations:g,invertedOperations:f,fullTextValue:_}),"success"}function C(e){const{environment:t,store:o,transaction:l,operation:u}=e,{textInstanceId:m,textSliceStartItemId:g,targetTextInstanceId:f,targetTextSliceEndItemId:v}=u.args,h=A({store:o,textInstanceId:m,itemId:g,options:{type:"start"}}),_=A({store:o,textInstanceId:f,itemId:v,options:{type:"end"}});if(!h||!_){const e=o,n=new(p().Bv)(t,{table:a().ev,id:u.args.sourceBlockId,spaceId:o.pointer.spaceId});return e.isDefined()&&!e.useCrdt()||n.isDefined()&&!n.useCrdt()?(function(e){const{environment:t,sourceBlockStore:o,targetBlockStore:n,invertedOperation:r,transaction:a}=e;(0,i().MX)(o.isDefined(),"Source block store is expected to be defined"),(0,i().MX)(n.isDefined(),"Target block store is expected to be defined"),(0,i().MX)(!o.useCrdt()||!n.useCrdt(),"One or both of source and target blocks is expected to be a non-CRDT block");const s=o.getBlockTitleStore(),l=n.getBlockTitleStore();c().KY({environment:t,store:s,value:r.args.previousSourceTextValue,transaction:a}),c().KY({environment:t,store:l,value:r.args.previousTargetTextValue,transaction:a})}({environment:t,sourceBlockStore:n,targetBlockStore:e,invertedOperation:u,transaction:l}),"success_non_crdt"):h?"err_no_target_block_store":"err_no_source_block_store"}const{fullSourceTextValue:b,fullTargetTextValue:y}=function(e){const{source:t,target:o}=e,r=(0,i().o9)(t.blockStore.getBlockTitleTextSliceTree(),n().cf),a=r.getTextValue(),l=(0,i().o9)(r.findTextSliceTreeContainingItemWithId(t.textInstanceId,t.textSliceStartItemId),n().Dp),c=(0,i().o9)(r.getGraphemeIndicesOfSlice({boundary:"start",textInstanceId:t.textInstanceId,start:t.textSliceStartItemId}),n().Dp).startIndex,d=l.getLastTextSliceTreeInPreOrderTraversal(),u=(0,i().o9)(r.getGraphemeIndicesOfSlice({boundary:"end",textInstanceId:d.getTextSlice().textInstanceId,end:d.getTextSlice().getEndItem().id}),n().Dp).exclusiveEndIndex,{tokensBeforeRange:p=[],tokensInsideRange:m=[],tokensAfterRange:g=[]}=s().AI5(a,c,u),f=s().__s([...p,...g]);if(t.blockStore.pointer.id===o.blockStore.pointer.id){const e=(0,i().o9)(r.getGraphemeIndicesOfSlice({boundary:"end",textInstanceId:o.textInstanceId,end:o.textSliceEndItemId}),n().Dp).exclusiveEndIndex;if(e<=c){const t=s().__s(s().xym(f,m,e));return{fullSourceTextValue:t,fullTargetTextValue:t}}if(u<=e){const t=e-(u-c),o=s().__s(s().xym(f,m,t));return{fullSourceTextValue:o,fullTargetTextValue:o}}return{fullSourceTextValue:a,fullTargetTextValue:a}}const v=(0,i().o9)(o.blockStore.getBlockTitleTextSliceTree(),n().cf),h=v.getTextValue(),_=(0,i().o9)(v.getGraphemeIndicesOfSlice({boundary:"end",textInstanceId:o.textInstanceId,end:o.textSliceEndItemId}),n().Dp).exclusiveEndIndex,b=s().__s(s().xym(h,m,_));return{fullSourceTextValue:f,fullTargetTextValue:b}}({source:{blockStore:h,textInstanceId:m,textSliceStartItemId:g},target:{blockStore:_,textInstanceId:f,textSliceEndItemId:v}}),S=(0,i().o9)(h.getBlockTitleTextSliceTree(),n().cf),w=(0,i().o9)(S.findTextSliceTreeBeforeTextSliceStartingWithItemId(u.args.textInstanceId,u.args.textSliceStartItemId),n().Dp).getTextSlice(),k=r().DI,I=r().DI;return d().applyCrdtTextOperation({transaction:l,store:h,operation:{command:"moveTextSlice",path:[],pointer:h.pointer,args:{textInstanceId:m,sourceSearchLabel:k,textSliceStartItemId:g,targetBlockId:_.id,targetTextInstanceId:f,targetSearchLabel:I,targetTextSliceEndItemId:v,forDowngrade:{fullSourceTextValue:b,fullTargetTextValue:y}}},invertedOperation:{command:"invertedMoveTextSlice",path:[],pointer:h.pointer,args:{textInstanceId:m,textSliceStartItemId:g,targetTextInstanceId:w.textInstanceId,targetTextSliceEndItemId:w.getEndItem().id,sourceBlockId:_.id,previousSourceTextValue:_.getBlockTitleStore().getValue()??[],targetBlockId:h.id,previousTargetTextValue:h.getBlockTitleStore().getValue()??[]}}}),"success"}function T(e){const{environment:t,store:o,transaction:n,operation:r}=e;switch(r.command){case"invertedInsertText":return function(e){const{environment:t,store:o,transaction:n,operation:r}=e,i=w({store:o,startTextInstanceId:r.args.textInstanceId,startId:r.args.startId,endTextInstanceId:r.args.textInstanceId,endId:r.args.endId});return i?(c().f0({environment:t,multiSelection:i,transaction:n}),"success"):o.useCrdt()?"err_no_multiselection":(M({environment:t,store:o,invertedOperation:r,transaction:n}),"success_non_crdt")}({environment:t,store:o,transaction:n,operation:r});case"invertedDeleteText":return x({environment:t,store:o,transaction:n,operation:r});case"invertedMoveTextSlice":return C({environment:t,store:o,transaction:n,operation:r});case"invertedAddAnnotation":return function(e){const{environment:t,store:o,transaction:n,operation:r}=e,i=w({store:o,startTextInstanceId:r.args.startTextInstanceId,startId:r.args.startId,endTextInstanceId:r.args.endTextInstanceId,endId:r.args.endId});return i?(c().VO({environment:t,multiSelection:i,annotationKey:r.args.annotationKey,transaction:n}),"success"):o.useCrdt()?"err_no_multiselection":(M({environment:t,store:o,invertedOperation:r,transaction:n}),"success_non_crdt")}({environment:t,store:o,transaction:n,operation:r});case"invertedRemoveAnnotation":return function(e){const{environment:t,store:o,transaction:n,operation:r}=e,i=w({store:o,startTextInstanceId:r.args.startTextInstanceId,startId:r.args.startId,endTextInstanceId:r.args.endTextInstanceId,endId:r.args.endId});return i?(c().tc({environment:t,multiSelection:i,annotation:r.args.annotation,transaction:n}),"success"):o.useCrdt()?"err_no_multiselection":(M({environment:t,store:o,invertedOperation:r,transaction:n}),"success_non_crdt")}({environment:t,store:o,transaction:n,operation:r});default:(0,l().HB)(r)}}function M(e){const{environment:t,store:o,invertedOperation:n,transaction:r}=e;(0,i().MX)(!o.useCrdt(),"Expected non-CRDT block");const a=o.getBlockTitleStore();c().KY({environment:t,store:a,value:n.args.previousTextValue,transaction:r})}},553819:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{images:{}}}getMetadataByBlockId(e){if(!this.hasKey(e))return;return this.state.images[e].editMetadata}setStatusPending(e,t){const o={editMetadata:t,editStatus:"pending"};this.setState({images:{...this.state.images,[e]:o}})}getStatus(e){if(!this.hasKey(e))return"completed";return this.state.images[e].editStatus}setStatusDrawing(e){if(!this.hasKey(e))return;const t={...this.state.images[e],editStatus:"drawing"};this.setState({images:{...this.state.images,[e]:t}})}setStatusUploading(e,t){if(!this.hasKey(e))return;const o={...this.state.images[e],editStatus:"uploading",dataURL:t};this.setState({images:{...this.state.images,[e]:o}})}setStatusCompleted(e,t){if(!this.hasKey(e))return;const o=this.state.images[e];if("uploading"!==o.editStatus)return;const n={...o,editStatus:"completed",secureFileURL:t};this.setState({images:{...this.state.images,[e]:n}})}setStatusError(e){if(!this.hasKey(e))return!1;const t={...this.state.images[e],editStatus:"error"};this.setState({images:{...this.state.images,[e]:t}})}getDataURL(e){if(!this.hasKey(e))return;const t=this.state.images[e];return"uploading"===t.editStatus||"completed"===t.editStatus?t.dataURL:void 0}getSecureFileURL(e){if(!this.hasKey(e))return;const t=this.state.images[e];return"completed"===t.editStatus?t.secureFileURL:void 0}hasKey(e){return this.state.images.hasOwnProperty(e)}}const r=new n},553965:(e,t,o)=>{o.d(t,{A:()=>i});o(898992),o(803949);var n=()=>o(558842),r=()=>o(496603);function i(e,t){if(!t)return e;const o={...e};return Object.keys(t).forEach((i=>{const a=t[i],s=e[i];s&&i.startsWith("on")&&r().Tn(a)?o[i]=function(){s(...arguments),a(...arguments)}:s&&("ref"===i||i.endsWith("Ref"))&&a?o[i]=(0,n().Px)(s,a):s||(o[i]=a||s)})),o}},554060:(e,t,o)=>{o.d(t,{F:()=>m});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(584262),s=()=>o(959013),l=()=>o(857783),c=()=>o(104012),d=()=>o(728611),u=()=>o(211716),p=o(474848);function m(e){const{hideUndoButton:t}=e,o=(0,r().v3)(),n=(0,i().K8)((()=>o.device.isPhone),[o]);return(0,p.jsxs)(p.Fragment,{children:[!n&&(0,p.jsx)(g,{...e}),!t&&(0,p.jsx)(c().q6,{})]})}function g(e){let{moveToLocation:t,movedItems:o}=e;const i=(0,r().v3)(),m=(0,n.useCallback)((e=>{var n;if(t&&"moveToBlock"===t.type)l().uK({environment:i,openInNew:d().Vr(e),store:t.blockStore,scrollToBlockId:null===(n=o[0])||void 0===n?void 0:n.id,visitType:u().ig.Link,pageVisitSource:a().y8.Move})}),[i,t,o]);return t&&"moveToBlock"===t.type?(0,p.jsx)(c().Ag,{onClick:m,children:(0,p.jsx)(s().sA,{defaultMessage:"Visit",id:"moveToHelpers.afterMoveToast.viewButton"})}):null}},554279:(e,t,o)=>{o.d(t,{Mj:()=>h,aq:()=>w,fq:()=>S,hR:()=>g,mS:()=>y,u4:()=>f,uK:()=>b,zD:()=>_});o(944114),o(898992),o(803949),o(581454);var n=()=>o(229833),r=()=>o(534177),i=()=>o(939768),a=()=>o(283699),s=()=>o(857639),l=()=>o(994310),c=()=>o(901801);let d,u,p=[],m="/";async function g(e){const{device:t,config:o,cookieService:n}=e;u=!["staging","production"].includes(o.env),await a().Eo({trackingType:"targeting",cookieService:n})&&(t.isNative||t.doNotTrackEnabled||(m=function(e){if(e.isLocalhost)return"http://localhost:3000";return"https://aif.notion.so"}(o),function(e){if(!m)return;const t=document.createElement("iframe");t.setAttribute("sandbox","allow-scripts allow-same-origin"),t.setAttribute("style","position: absolute; opacity: 0; width: 1px; height: 1px; top: 0; left: 0; border: none; display: block; z-index: -1;"),t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex","-1"),t.setAttribute("referrerpolicy","no-referrer"),t.setAttribute("src",e.aif.url),document.body.appendChild(t),t.addEventListener("load",(()=>{d=t;for(const e of p)v(t,e);p=[]}))}(o)))}async function f(e){const{device:t,event:o,cookieService:r,source:i}=e;if((!r||await a().Eo({trackingType:"targeting",cookieService:r}))&&!(u&&o.google||t&&(t.isNative||t.doNotTrackEnabled)))try{!function(e){const{event:t}=e,o=e.source??"client";if("front"===o){if(t.google&&"custom"===t.google.eventName){(window.dataLayer=window.dataLayer||[]).push({event:t.google.data.event,data:t.google.data.data})}}else d?d.contentWindow&&d.contentWindow.postMessage(t,m):p.push(t)}({event:o,source:i})}catch(l){s().log({level:"error",from:"adAnalyticsHelpers",type:"analyticsTrack",error:(0,n().n6)(l)})}}function v(e,t){(function(e){var t,o;return"CompleteRegistration"===(null===(t=e.facebook)||void 0===t?void 0:t.eventName)||"registration"===(null===(o=e.google)||void 0===o?void 0:o.eventName)})(t)&&s().log({level:"info",from:"adAnalyticsHelpers",type:"analyticsTrackSignupIFramePostCall"}),e.contentWindow&&e.contentWindow.postMessage(t,m)}function h(e){if("facebook"===e.type){const t=`fb.1.${Date.now()}.${e.id}`;c().A.set("adClick",{type:"facebook",id:t})}else"google"===e.type?c().A.set("adClick",{type:"google",id:e.id}):(0,r().HB)(e)}function _(){return c().A.get("adClick")}function b(){c().A.remove("adClick")}function y(){return c().A.get("fbp")}function S(){l().A.remove("fbp")}async function w(e){var t;const{device:o,email:n,cookieService:r}=e,a=(0,i().al)(null===(t=document.location)||void 0===t?void 0:t.href),s=null==a?void 0:a.get("cid"),l=null==a?void 0:a.get("metadata_cid");var c;if(l)return f({device:o,event:{metadataio:{eventName:"sign_up",data:{email:n,cid:s,mcid:l,url:null===(c=document.location)||void 0===c?void 0:c.href}}},cookieService:r})}},554283:(e,t,o)=>{o.d(t,{B:()=>r});var n=o(296540);function r(){const e=(0,n.useRef)(null),[t,o]=(0,n.useState)(!1),r=(0,n.useCallback)((()=>{const t=e.current;t&&o(t.matches(":hover"))}),[]);return[(0,n.useCallback)((t=>{t?(t.addEventListener("mouseenter",r),t.addEventListener("mouseleave",r),e.current=t,r()):e.current&&(e.current.removeEventListener("mouseenter",r),e.current.removeEventListener("mouseleave",r),e.current=null)}),[r]),t,e]}},554894:(e,t,o)=>{o.d(t,{C:()=>R,o:()=>D});o(16280),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(604341),s=()=>o(591779),l=()=>o(582676),c=()=>o(449412),d=()=>o(745875),u=()=>o(763824),p=()=>o(534177),m=()=>o(705540),g=()=>o(406792),f=()=>o(227440),v=()=>o(508496),h=()=>o(961581),_=()=>o(487532),b=()=>o(589506),y=()=>o(92400),S=()=>o(570241),w=()=>o(670631),k=()=>o(722038);const I=12e5,A=I/2,x=I/2*3,C=6e4,T=20,M=5;async function P(e){const{defaultRecordCache:{persistedRecordCache:t},currentUser:{id:o}}=e;if(!t||!o)return[];return(await t.getOfflineOriginPages({userId:o})).slice(0,T)}async function B(e){const{environment:t,fetchTriggerType:o,abortSignal:n}=e,{defaultRecordCache:{persistedRecordCache:r},currentUser:{id:i}}=t,a=performance.now();if(!r||!i)return;const s="fast_interval"===o?await async function(e){const{defaultRecordCache:{persistedRecordCache:t},currentUser:{id:o}}=e;return t&&o?(await P(e)).filter((e=>{let[,t]=e;return!t.lastDownloadedAt})):[]}(t):await P(t),l=await r.getOfflineOriginPages({userId:i}),f=l.length;if(n.aborted)return;if(L((()=>`Out of ${f} offline origin pages, fetching ${s.length} in batches of ${M}.`)),L((()=>`Fetching ids: ${s.map((e=>{let[t]=e;return t})).join(", ")}`)),L((()=>"--------------------------------")),0===s.length)return;const v={imageCount:0,loadCachedPageChunkV2ForOfflineCount:0,queryCollectionCount:0},h=new Set;if(await u().lX(s,M,(async e=>{var o;let[a,s]=e;const l=null===(o=w().A.state.offlinePages)||void 0===o||null===(o=o[a])||void 0===o?void 0:o.lastDownloadedVersion;L((()=>`Fetching page ${a}. Last downloaded version: ${l}.`));try{const e=(await r.getOfflineActions({impactedPageId:a,userId:i})).map((e=>e.autosyncType)).filter(p().O9);if((0,p().EI)(e)){const o=await(0,b().makePageAvailableOffline)({from:"useRefetchOfflinePages",pageId:a,environment:t,originPageId:a,visitedBlockIds:{forThisOriginPage:new Set,forThisInterval:h},stats:v,autosyncTypes:e,downloadAbortSignal:n});if(n.throwIfAborted(),null!=o&&o.success){const e=(null==o?void 0:o.visitedBlockIds.forThisOriginPage)??new Set,t=(await r.getImpactedPageIdsByOriginPageId({originPageId:a,userId:i})).filter((t=>!e.has(t)));t.length>0&&(await r.deleteOfflineActionsAndCleanUp({userId:i,originPageId:a,impactedPageIds:t}),L((()=>`Garbage collected ${t.length} offline pages as they are not in the subtree of ${a} anymore.`)))}else L((()=>`Skipped garbage collection for ${a} because makePageAvailableOffline did not succeed.`));L((()=>`Fetched and saved page ${a}. Last downloaded version: ${l}. Version from server: ${null==o?void 0:o.downloadedVersion}.`))}else L((()=>`ERROR: No autosync types found for page ${a}.`)),c().O8(new Error(`No autosync types found for page ${a}`),{from:"useRefetchOfflinePages",type:"noAutosyncTypesFound",data:{pageId:a}})}catch(d){d instanceof y().f||(L((()=>`Fetch page ${a} failed.${d instanceof Error?` Error: ${d.message}`:""}`)),c().O8(d,{from:"useRefetchOfflinePages",type:"loadRemotePageAndImagesError",data:{pageId:a}}))}})),"force_debug"!==o){const e=await r.getOfflinePages({userId:i}),o=l.filter((e=>{let[,t]=e;return t.isExplicitlyOfflinedOrigin})).length,n=l.filter((e=>{let[,t]=e;return t.isAutosyncedOrigin})).length,c=(0,d().JZ)(e.map((e=>{let[,t]=e;return t.lastDownloadedAt})).filter((e=>void 0!==e))),u=await m().getSqliteDiskUsage();g().default.measure({metricName:"background_refetch_offline_pages",startTime:a,endTime:performance.now()},{environment:t,data:{fetch_interval_ms:I,number_of_offline_pages_fetched:s.length,total_number_of_offline_pages:Object.keys(w().A.state.offlinePages??{}).length,median_last_updated_at:c,number_of_images_fetched:v.imageCount,total_number_of_explicitly_marked_offline_pages:o,total_number_of_offline_origin_pages:f,total_number_of_favorites:0,total_number_of_recents:n,number_of_images_fetched_per_page:v.imageCount/s.length,number_of_load_page_chunk_v2_for_offline_per_page:v.loadCachedPageChunkV2ForOfflineCount/s.length,number_of_query_collection_per_page:v.queryCollectionCount/s.length,disk_usage:t.device.isElectron?u:void 0}})}}function R(){return v().default.checkGate({gateName:"refetch_offline_pages"})&&v().default.checkGate({gateName:"download_for_offline"})}async function E(e){const{fetchTriggerType:t,environment:o,abortSignal:n}=e;if("fast_interval"===t)await navigator.locks.request(`toggle_offline_page_${o.currentUser.id}`,{ifAvailable:!0},(async e=>{e?await navigator.locks.request(`refetch_offline_pages_fast_${o.currentUser.id}`,{ifAvailable:!0},(async e=>{e?(L((()=>`Acquired lock for ${t}.`)),await B({environment:o,fetchTriggerType:t,abortSignal:n})):L((()=>"Skipping fast interval refetch because another fast interval refetch is already in progress"))})):L((()=>"Skipping fast interval refetch because a toggle download is already in progress"))}));else{if(await navigator.locks.request(`refetch_offline_pages_fast_${o.currentUser.id}`,(()=>{})),await navigator.locks.request(`toggle_offline_page_${o.currentUser.id}`,(()=>{})),n.aborted)return;await navigator.locks.request(`refetch_offline_pages_default_${o.currentUser.id}`,{ifAvailable:!0},(async e=>{e?(L((()=>`Acquired lock for ${t}.`)),await B({environment:o,fetchTriggerType:t,abortSignal:n})):L((()=>"Skipping default interval refetch because another default interval refetch is already in progress"))}))}}function D(){const e=(0,r().v3)(),t=(0,k().y)(),o=(0,i().K8)((()=>{if(!h().A.state.initialRenderCompleted)return!1;if(!t)return!1;if(!R())return!1;if(!f().A.state.online)return!1;if(e.device.isMobileNative){if("wifi"!==f().A.state.mobileConnectivityType)return!1}else{const e=navigator.connection;if(e&&(e.saveData||["slow-2g","2g"].includes(e.effectiveType??"")))return!1}return!0}),[e.device,t]),a=(0,i().K8)((()=>S().Z.state.globalAbortController),[]),c=(0,i().K8)((()=>v().default.getConfigKey("offline_mode_settings","fast_refetch_interval_ms")),[]),d=(0,n.useRef)(!1),u=(0,s().ZC)(e.currentUser.id);Boolean(e.currentUser.id)&&e.currentUser.id!==u&&(d.current=!0),(0,n.useEffect)((()=>{if(d.current&&o){L((()=>"Attempt fetch due to app boot or user change"));const t=(0,l().HO)([0,C]),o=window.setTimeout((()=>{E({fetchTriggerType:"app_boot_or_user_change",environment:e,abortSignal:a.signal}),d.current=!1}),t);return()=>{window.clearTimeout(o)}}}),[a.signal,o,e]),(0,n.useEffect)((()=>{Boolean(e.currentUser.id)&&Boolean(u)&&e.currentUser.id!==u&&(0,_().Rq)()}),[e.currentUser.id,u]),(0,n.useEffect)((()=>{let t;const n=(0,l().HO)([A,x]),r=window.setTimeout((()=>{o&&(E({fetchTriggerType:"default_interval",environment:e,abortSignal:a.signal}),t=window.setInterval((()=>{o&&E({fetchTriggerType:"default_interval",environment:e,abortSignal:a.signal})}),I))}),n);let i;return c>0&&(i=window.setInterval((()=>{o&&E({fetchTriggerType:"fast_interval",environment:e,abortSignal:a.signal})}),c)),()=>{window.clearTimeout(r),t&&window.clearInterval(t),i&&window.clearInterval(i)}}),[a.signal,o,e,c])}let N=!1;function L(e){N&&console.log(`[useRefetchOfflinePages] ${e()}`)}(0,a().exposeDebugValue)("debugAttemptFetch",(function(e){if(!e)throw new Error("Pass in `__console.environment` as the first param.");E({fetchTriggerType:"force_debug",environment:e,abortSignal:(new AbortController).signal})})),(0,a().exposeDebugValue)("toggleOfflineRefetchDebugLogs",(function(){N=!N,console.log(N?"Offline refetch debug logs enabled.":"Offline refetch debug logs disabled.")}))},555776:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isHovered:!1,isActivelyComposing:!1}}setHoverWithSource(e){this.setState({...this.state,isHovered:!0,hoverEntryPoint:e})}setActiveWithSource(e){this.setState({...this.state,isActivelyComposing:!0,clickEntryPoint:e})}resetHoverSource(e){var t;e===(null===(t=this.state)||void 0===t?void 0:t.hoverEntryPoint)&&this.setState({...this.state,isHovered:!1,hoverEntryPoint:void 0})}resetActiveSource(e){var t;e===(null===(t=this.state)||void 0===t?void 0:t.clickEntryPoint)&&this.setState({...this.state,isActivelyComposing:!1,clickEntryPoint:void 0})}resetAllHoverSources(){this.setState({...this.state,isHovered:!1,hoverEntryPoint:void 0})}resetAllActiveSources(){this.setState({...this.state,isActivelyComposing:!1,clickEntryPoint:void 0})}resetEditorActiveSources(){"comments_pane"!==this.state.clickEntryPoint&&this.resetAllActiveSources()}resetEditorHoverSources(){"comments_pane"!==this.state.hoverEntryPoint&&this.resetAllHoverSources()}}const r=new n},555822:(e,t,o)=>{o.d(t,{a:()=>r});var n=()=>o(534177);function r(e){const{partial:t,defaultLength:o=0}=e;switch(null==t?void 0:t.type){case"sides":return{type:"sides",left:t.left??o,right:t.right??o,top:t.top??o,bottom:t.bottom??o};case"axes":return{type:"sides",left:t.horizontal??o,right:t.horizontal??o,top:t.vertical??o,bottom:t.vertical??o};case"all":return{type:"sides",left:t.length??o,right:t.length??o,top:t.length??o,bottom:t.length??o};case void 0:return{type:"sides",left:o,right:o,top:o,bottom:o};default:(0,n().HB)(t)}}},556544:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(672577);class n extends(()=>o(965828))().O{isInlineAutocompleteOpen(){const e=this.find((e=>e.isOpen));return Boolean(e)}}const r=new n},557281:(e,t,o)=>{o.d(t,{Ur:()=>O,bI:()=>R,lU:()=>F,m0:()=>D,n5:()=>L,oZ:()=>E});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(700500),r=()=>o(110192),i=()=>o(416504),a=()=>o(161479),s=()=>o(919709),l=()=>o(973647),c=()=>o(435345),d=()=>o(248662),u=()=>o(586481),p=()=>o(71584),m=()=>o(36375),g=()=>o(972435),f=()=>o(406792),v=()=>o(508496),h=()=>o(66496),_=()=>o(630116),b=()=>o(160568),y=()=>o(765370),S=()=>o(901389),w=()=>o(357625),k=()=>o(896628),I=()=>o(722101),A=()=>o(246826),x=()=>o(606952),C=()=>o(482287),T=()=>o(324089),M=()=>o(317909);const P=(0,o(959013).YK)({duplicateTemplateError:{id:"databaseTemplatePickerActions.duplicateTemplateFailedError.message",defaultMessage:"Duplicate template failed."}});function B(e){const{environment:t,pageStore:o,copiedFromPointer:n,addCopyName:s,transaction:d,resolveTemplateVariables:u,userAction:f}=e,b=performance.now();d.getUserActionForAnalyticsPurposesOnly()||d.annotateWithUserAction(f);const y=new(_().Bv)(t,n);if(N({environment:t,store:o,properties:y.getProperties(),transaction:d}),u&&C().hz({environment:t,store:o,context:{currentUserId:t.currentUser.id,currentTimeZone:(0,i().P)()},transaction:d}),s){const e=o.getBlockTitleStore();x().KY({environment:t,store:e,value:(0,r().g)(e.getValue()),transaction:d})}const k={copied_from:n.id};A().zv({store:o,data:k,transaction:d});const{automation_id:I,app_config_uri:T,...M}=y.getFormat(),B={...M,copied_from_pointer:n};if(A().zv({store:o.getFormatStore(),data:B,transaction:d}),y.hasContent()){h().A.setStatus(o.id,!0);let e=!0,r=0;const f=performance.now(),_=v().default.checkGate({gateName:"enable_server_backed_local_duplicate_for_collection_template_picker"});d.postSubmitCallbacks.push((async v=>{if(v)return S().f1(g().A.formatMessage(P.duplicateTemplateError)),void h().A.setStatus(o.id,!1);if(_){const e=y.getSpaceId(),n=o.getSpaceId(),r={id:y.id,spaceId:y.getSpaceId()},{success:i}=await p().attemptServerBackedLocalDuplicate({environment:t,sourceBlockPointer:r,targetInMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,targetBlockStore:o,userAction:d.getUserActionForAnalyticsPurposesOnly()||"",deepCopyTransclusionContainers:!1,convertExternalObjectInstancesToPlaceholders:e!==n,addCopyName:s,resolveTemplateVariables:u,isTemplateInstantiation:!0,recordLimit:250,actionStartTimestamp:b,appendContentOnly:!0});if(i)return void h().A.setStatus(o.id,!1)}await async function(){try{const e=(0,w().UT)(t,c().w,{sourceBlocks:[{id:n.id,spaceId:(0,a().e)(n.spaceId)}],targetBlocks:[{id:o.id,spaceId:(0,a().e)(o.pointer.spaceId)}],addCopyName:s,appendContentOnly:!0,isTemplateInstantiation:!0,resolveTemplateVariables:!!u&&{currentUserId:t.currentUser.id,currentTimeZone:(0,i().P)()},deepCopyTransclusionContainers:!1,userAction:d.getUserActionForAnalyticsPurposesOnly()});for await(const t of e)if(l().Q.isSuccess(t)){t.value.totalBlocks>r&&(r=t.value.totalBlocks)}}catch(p){e=!1}finally{h().A.setStatus(o.id,!1),(0,m().E)({environment:t,success:e,time:performance.now()-f,user_action:d.getUserActionForAnalyticsPurposesOnly(),is_duplication_local:!1,duplication_size:r})}}()}))}return o}function R(e){const{environment:t,collectionStore:o,transaction:r,title:i}=e,a=A().Wv({environment:t,type:n().xd.page,inMemoryRecordCache:o.inMemoryRecordCache,transaction:r,spaceId:o.getTemplatePagesStore().pointer.spaceId,properties:{title:(0,s().x9d)(i||"")}});return A().zv({store:a,data:{is_template:!0},transaction:r}),I().BC({parentStore:o.getTemplatePagesStore(),appendStore:a,transaction:r}),a}function E(e){const{environment:t,collectionStore:o,templateStore:r,transaction:i}=e,a=A().Wv({environment:t,type:n().xd.page,inMemoryRecordCache:r.inMemoryRecordCache,transaction:i,spaceId:o.getTemplatePagesStore().pointer.spaceId});A().zv({store:a,data:{is_template:!0},transaction:i}),I().WH({parentStore:o.getTemplatePagesStore(),afterStore:r,insertStore:a,transaction:i});try{B({environment:t,copiedFromPointer:r.pointer,pageStore:a,addCopyName:!0,transaction:i,resolveTemplateVariables:!1,userAction:"collectionTemplatePickerActions.createCopyOfCollectionTemplate.automation"})}catch(s){S().f1(g().A.formatMessage(P.duplicateTemplateError))}return a}function D(e){const{collectionStore:t,templateStore:o,transaction:n}=e;I().TF({parentStore:t.getTemplatePagesStore(),childToRemoveStore:o,transaction:n})}function N(e){const{environment:t,store:o,properties:n,transaction:r}=e;u().L({environment:t,store:o,properties:n,transaction:r})}function L(e){const{environment:t,store:o,templateStore:n,title:r,isKeyboard:i,isCreateIn:a,transaction:s,from:l}=e,c=o.getProperties(),d=o.getFormatStore().getKeyStore("page_icon").getValue(),u=o.getFormatStore().getKeyStore("page_cover").getValue(),p=o.getFormatStore().getKeyStore("page_cover_position").getValue(),m=o.getFileIds(),g=f().default.DO_NOT_USE_markLegacy("rum.initialize_collection_template"),v=B({environment:t,pageStore:o,copiedFromPointer:n.pointer,transaction:s,resolveTemplateVariables:!0,userAction:"collectionTemplatePickerActions.createCopyOfCollectionTemplate.manual"});if("template"!==r){const e="empty"===r?void 0:r.text;x().KY({environment:t,store:o.getBlockTitleStore(),value:e,transaction:s})}let h=!1;d&&!v.hasIcon()&&(A().zv({store:v.getFormatStore(),data:{page_icon:d},transaction:s}),h=!0);let _=!1;u&&!v.hasCover()&&(A().zv({store:v.getFormatStore(),data:{page_cover:u,page_cover_position:p},transaction:s}),_=!0),(h||_)&&A().zv({store:v,data:{file_ids:m},transaction:s}),N({environment:t,store:o,properties:c,transaction:s}),A().zv({store:o,data:{is_template:null},transaction:s}),k()._l({environment:t,store:o,isLocked:!1,transaction:s}),0===n.getContentLength()&&T()._N({environment:t,store:o,transaction:s}),f().default.DO_NOT_USE_measureLegacy(g,{environment:t}),b().RZ(t,{template_id:n.id,collection_id:n.getParentId(),is_keyboard:i,is_create_in:a,from:l})}function F(e){const{collectionStore:t,newTemplateIds:o,transaction:n}=e;A().zv({store:t,data:{template_pages:U(t.getTemplatePages(),o)},transaction:n})}function U(e,t){const o=[...t],n=new Set(o),r=new Set,i=[];for(const a of e)if(n.has(a))for(;o.length>0;){const e=o.shift();if(!e)break;if(i.push(e),n.delete(e),r.add(e),e===a)break}else r.has(a)||i.push(a);return i}function O(e){let{environment:t,collectionContextStore:o,collectionViewBlockStore:n,templateStore:r,useCrdt:i,isKeyboard:a,from:s,shouldCoerce:l,showMoveTo:c,peekModeOverride:u,userAction:p}=e;M().createAndCommit({userAction:"collectionTemplatePickerActions.updatePreferredDatabase",environment:t,canUndo:!0,perform:e=>{(0,y().w)({collectionContextStore:o,transaction:e})}}),M().createAndCommit({userAction:p??"collectionTemplatePickerActions.createPageFromCollectionTemplate",environment:t,canUndo:!0,perform:e=>{(0,d().T)({transaction:e,store:n,collectionContextStore:o,environment:t,shouldCoerce:l,templateStore:r,from:s,isKeyboard:a,showMoveTo:c,peekModeOverride:u})}})}},558407:(e,t,o)=>{o.d(t,{A:()=>s});o(898992),o(354520),o(581454);const n=new class{constructor(){this.recentlyMentionedPagesStore=void 0,this.spaceId=void 0,this.userId=void 0}get(e){const{currentSpaceStore:t}=o(351360).default.state,n=t&&t.id;return void 0===n||void 0===e?(this.userId=void 0,this.spaceId=void 0,void(this.recentlyMentionedPagesStore=void 0)):(this.spaceId===n&&this.userId===e||(this.spaceId=n,this.userId=e,this.recentlyMentionedPagesStore=new r({maxPages:50,prefix:`RecentlyMentioned:${e}:${n}`,store:localStorage,version:i}),this.recentlyMentionedPagesStore.initialize()),this.recentlyMentionedPagesStore)}};class r{constructor(e){this.mentions=void 0;const{maxPages:t,prefix:n,store:r,version:i}=e;this.mentions=new(o(643534).A)({maxSize:t,prefix:n,store:r,version:i})}initialize(){this.mentions.updateVersionAndGC()}recordMention(e,t){this.mentions.set(e,t)}getMentionedIds(){const e=this.mentions.entries();if(e.error)return[];const t=Date.now()-864e5;return Array.from(e.value).filter((e=>{let[o,n]=e;return n>=t})).map((e=>{let[t,o]=e;return t}))}}const i=1,a={lazyRecentlyMentionedPagesStore:n,recordMention:function(e){const{id:t,timestamp:o,currentUserId:r}=e,i=n.get(r);if(i)return i.recordMention(t,o)},getMentionedIds:function(e){const t=n.get(e);return t?t.getMentionedIds():[]}};(0,o(604341).exposeDebugValue)("RecentlyMentionedPagesStore",a);const s=a},559102:(e,t,o)=>{o.d(t,{d:()=>W});o(944114),o(898992),o(354520),o(672577);var n=()=>o(244641),r=()=>o(908006),i=()=>o(584262),a=()=>o(90023),s=()=>o(252799),l=()=>o(289915),c=()=>o(737658),d=()=>o(604995),u=()=>o(857639),p=()=>o(206267),m=()=>o(763884),g=()=>o(799829),f=()=>o(496603),v=()=>o(745875),h=()=>o(534177),_=()=>o(720665),b=()=>o(191597),y=()=>o(686526),S=()=>o(5705),w=()=>o(253021),k=()=>o(269643),I=()=>o(186445),A=()=>o(10594),x=()=>o(522827),C=()=>o(609429),T=()=>o(493260),M=()=>o(406792),P=()=>o(311890),B=()=>o(351360),R=()=>o(508496),E=()=>o(589994);o(803949);function D(e){const t=e.collectionViewStore();if(!t)return 0;let o=0;const n=t.getFormatStore().getKeyStore("collection_groups").getValue(),r=t.getFormatStore().getKeyStore("board_columns").getValue();return null==n||n.forEach((e=>{!0===e.hidden&&o++})),null==r||r.forEach((e=>{!0===e.hidden&&o++})),o}var N=()=>o(436371),L=()=>o(928530),F=()=>o(540022),U=()=>o(764670),O=()=>o(75542),V=()=>o(518362),j=()=>o(834211);const z=10;function q(e,t){if(void 0===t)return;if(void 0===e)return"initial_load";if(!f().n4(e.collectionView,t.collectionView))return"change_view";if(!f().n4(e.loader.searchQuery,t.loader.searchQuery))return"change_search";if(!f().n4(e.loader.sort,t.loader.sort))return"change_sort";const o=H(e.loader.filter,t.loader.filter);if(o)return o;const n=e.loader.reducers??{},r=t.loader.reducers??{};if(Object.keys(r).find((e=>{const t=n[e],o=r[e];return o&&(!t||!f().n4(t,o))})))return"change_group";const i={reducers:void 0,filter:void 0,sort:void 0,reducerDependencies:void 0},a={...null==e?void 0:e.loader,...i},s={...null==t?void 0:t.loader,...i};return f().n4(a,s)?void 0:"change_loader"}function H(e,t){if(e||t){if(!e)return"add_filter";if(!t)return"remove_filter";if(!f().n4(e,t)){if((0,l().yX)(e)&&(0,l().yX)(t))return e.property!==t.property?"change_filter":e.filter.operator!==t.filter.operator?"change_filter_operator":f().n4(e.filter,t.filter)?void 0:"change_filter_value";if((0,l().LB)(e)&&(0,l().LB)(t))return e.timestamp!==t.timestamp?"change_filter":e.filter.operator!==t.filter.operator?"change_filter_operator":f().n4(e.filter,t.filter)?void 0:"change_filter_value";if(!(0,l().dU)(e)||!(0,l().dU)(t))return"change_filter";{if(e.operator!==t.operator)return"change_filter_operator";function o(e){return(0,l().yX)(e)?`property/${e.property}`:(0,l().LB)(e)?`property/${e.timestamp}`:(0,l().dU)(e)?`combinator/${e.operator}`:void(0,h().HB)(e)}const n=f().Ul(e.filters??[],o),r=f().Ul(t.filters??[],o),i=n.length,a=r.length;if(i<a)return"add_filter";if(a<i)return"remove_filter";for(let s=0;s<a;s++){const c=H(n[s],r[s]);if(c)return c}}}}}function W(e){const{environment:t,collectionViewBlockStore:o,collectionViewStore:H,collectionStore:W,collectionContextStore:K,isFullScreen:G,isRootChild:$,isInPeekRenderer:Y,viewsModuleContext:Q}=e;(0,N().u)({collectionContextStore:K});const Z=t.currentUser.id;G&&(S().KO(t),S().aD(t));const{remoteRequestStore:X,localResultStore:J}=K;if(H){var ee,te,oe;const e=Boolean(!K.isViewSpecificClientModeEnabledStore.state&&K.isClientModeEnabledStore.state&&W&&W.id===(null===(ee=K.collectionStore())||void 0===ee?void 0:ee.id)),S=n().c9.fromMillis((0,w().dI)({collectionViewId:H.id,currentUserId:t.currentUser.id}));let N,ne,re=0,ie=0,ae=0;const se=()=>{r().default.afterNextFlush((()=>{const e=X.state;K.isViewSpecificClientModeEnabledStore.state&&ne&&e&&!f().n4(ne.loader.filter,e.loader.filter)&&(K.isClientModeEnabledStore.setState(!1),K.isViewSpecificClientModeEnabledStore.setState(!1));const n=q(ne,e);void 0===n||K.isClientModeEnabledStore.state&&!function(e,t,o,n){if(!o)return!1;if(null!=t&&t.loader.filter&&(0,l().CU)(null==t?void 0:t.loader.filter,(e=>(0,l().yX)(e)&&(0,g().EG)(e,o.getSchema()))))return!0;return(0,x().yW)(null==t?void 0:t.loader.reducers,o.getSchema(),n)}(0,e,W,o)||(Date.now()-ie<=1e3?ae++:(ie=Date.now(),ae=1),ae>=25&&R().default.checkGate({gateName:"collection_client_log_looping_remote_request"})&&u().log({level:"warning",from:"queryCollectionRemoteRequest",type:"queryCollectionRemoteRequest",data:{miscDataToConvertToString:{data:{viewId:H.id,collectionId:null==W?void 0:W.id,clientModeEnabled:K.isClientModeEnabledStore.state,changedReason:n,lastRemoteRequest:ne,nextRemoteRequest:e}}}}),function(e){const{environment:t,collectionContextStore:o,lastRemoteRequestReason:n,lastRemoteRequestHiddenGroupsCount:r,lastRemoteRequest:i,nextRemoteRequest:a}=e,s=(null==i?void 0:i.loader.reducers)??{},l=(null==a?void 0:a.loader.reducers)??{},c=[],d=[];for(const u of Object.keys(l)){const e=s[u],t=l[u];t&&(e||c.push({type:t.type,lastReducer:e,nextReducer:t}),e&&!f().n4(e,t)&&d.push({type:t.type,lastReducer:e,nextReducer:t}))}if(c.length>0){const e=c.some((e=>{let{type:t}=e;return"results"===t||"aggregation"===t}));"initial_load"===n&&e&&(0,b().a)({environment:t,collectionContextStore:o,request_reason:"hydrate_client"})}d.length>0&&D(o)>r&&(0,b().a)({environment:t,collectionContextStore:o,request_reason:"hide_group"})}({environment:t,collectionContextStore:K,lastRemoteRequestReason:N,lastRemoteRequestHiddenGroupsCount:re,lastRemoteRequest:ne,nextRemoteRequest:e}),N=n,re=D(K),(0,L().M)(t,K,{src:n})),ne=e}))};X.addListener(se);const le=()=>{if((0,v().rQ)(1)){const e=M().default.DO_NOT_USE_markLegacy("database_update_lag");M().default.DO_NOT_USE_measureAfterNextFlushLegacy(e,{environment:t})}};J.addListener(le);const ce=function(e){const t=(0,F().N)(e.collectionViewId);return m().A.get({userId:e.userId,key:t})}({userId:Z,collectionViewId:H.id}),de=t.device.isPhone||ce;K.remoteResultStore.setState(void 0),K.remoteCollectionIdsStore.setState([]),K.isLoadedStore.setState(!1),K.searchQueryStore.setState(""),K.searchOpenStore.setState(!1),K.isFullScreenStore.setState(G),K.isRootChildStore.setState($),K.reducersStore.setState({}),K.groupsStore.reset(),K.groupsLimitStore.setState(A()._9),K.boardColumnsLimitStore.setState(A()._9),K.filtersBarOpenStore.setState(de),K.isInPeekRendererStore.setState(Y),K.subitemExpandedStore.setState(new Map),K.chartErrorStore.setState(new Map),K.isClientModeEnabledStore.setState(e),K.wasServerResponseFromCache=void 0,K.requestBackend=void 0,K.isViewSpecificClientModeEnabledStore.setState(!1),K.throttleMsStore.setState(s().e),K.asyncAggregationStatusStore.reset(),K.viewsModuleContextStore.setState(Q),K.dateRangeStartStore.setState((0,d().mK)(S.startOf("month").valueOf(),I().XX.state).valueOf()),K.dateRangeEndStore.setState(G&&!t.device.isMobile?(0,d().to)(S.endOf("month").plus({month:1}).valueOf(),I().XX.state).valueOf():(0,d().to)(S.endOf("month").valueOf(),I().XX.state).valueOf());const ue=null==H?void 0:H.getFormat(),pe=null==ue?void 0:ue.collection_view_source;if("typed"===(null==pe?void 0:pe.type))K.setContext({type:"collectionTypedView",collectionViewBlockStore:o,databaseType:pe.databaseType,collectionViewStore:H,pageVisitSourceOverride:(0,P().O1)({blockOrCollectionId:o.id})});else if((0,c().TR)(pe)||(0,c().hJ)(pe))W&&K.setContext({type:"collectionSystemView",collectionViewBlockStore:o,collectionViewStore:H,collectionStore:W,pageVisitSourceOverride:(0,P().O1)({blockOrCollectionId:H.id})});else if(pe&&"collection"!==pe.type)(0,h().HB)(pe);else{const e=o.getSpaceId(),n=W?(0,k().D)(t.idCreator,e,null==W?void 0:W.id):void 0;W&&H.id===n?K.setContext({type:"collectionSettings",collectionViewBlockStore:o,collectionStore:W,collectionViewStore:H}):K.setContext({type:"collectionView",collectionViewBlockStore:o,collectionStore:W,collectionViewStore:H,pageVisitSourceOverride:(0,P().O1)({blockOrCollectionId:o.id})})}K.remoteRequestStoreCallback=se,K.localResultStoreCallback=le;const me=(0,O().X)(H),ge=C().e.get(me);if(ge){const e=0===ge.resultSet.blockIds.size,t=K.getPageVisitSourceOverride();(t===i().y8.PersonalHomeTileTasks||t===i().y8.PersonalHomePageTasks)&&(e||C().e.locallyMutatedTasksDatabase)?C().e.locallyMutatedTasksDatabase=!1:(K.resetLoadingState(),K.resultSetStore.setState(f().mg(ge.resultSet)),K.remoteCollectionIdsStore.setState(f().mg(ge.collectionIds)),K.remoteResultStore.setState(f().mg(ge.remoteResult)),K.isLoadedStore.setState(!0))}const fe=E().transactionQueue.isPendingTransactionForRecord(H.pointer);K.wasCreatedThisSessionStore.setState(fe);const ve=function(e){let{currentUserId:t,collectionViewId:o,viewsModuleCurrentPageId:n}=e;const r=m().A.get({userId:t,key:(0,U().l)({collectionViewId:o,viewsModuleCurrentPageId:n})});if(r)return(0,_().$l)(r)}({currentUserId:t.currentUser.id,collectionViewId:H.id,viewsModuleCurrentPageId:K.viewsModuleContextStore.isInLayoutBuilder()||null===(te=K.viewsModuleContextStore.currentPageStore())||void 0===te?void 0:te.id});K.temporaryStateStore.setState(ve||{});const{currentSpaceStore:he}=B().default.state,_e=H.getType(),be=!W||fe&&(null===(oe=(0,T().v)(H.id))||void 0===oe?void 0:oe.isPlaceholderCollection);if(G&&K.hasSingleCollection()&&!K.settingsStore.state.open&&be&&"chat"!==_e&&"custom"!==_e&&(y().Ow({collectionContextStore:K,collectionSettingsStore:K.settingsStore}),y().R8({collectionSettingsStore:K.settingsStore,item:{type:"createViewSource",existingCollectionStore:W,createdCollectionRecordPointerMap:void 0}})),W&&he&&W.getSpaceId()===he.id&&W.isDefaultRecordCache()&&!(0,a().kR)(o.getSystemBlockTypeStore().getValue())&&!K.settingsStore.state.open){!function(e){let{currentUserId:t,spaceId:o,collectionId:n}=e;const r=(0,V().F)({currentUserId:t,spaceId:o}),i=f().sb([n,...r]).slice(0,z);m().A.set({userId:t,key:(0,j().Y)(o),value:JSON.stringify(i)})}({currentUserId:t.currentUser.id,spaceId:he.id,collectionId:W.id})}K.frozoneStore.setState({isScrolled:!1,scrollerWidth:void 0,scrollerLeftOffset:void 0,scrollerLeftPadding:void 0,frozenIndex:void 0,tryShowHiddenFrozenColumn:!1}),K.visitSessionId=p().JW(),K.virtualizedModule.reset(),K.didFireLoadEventsStore.setState(!1),K.timingTracker.reset()}}},559378:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isActive:!1}}isActiveDemo(){return this.state.isActive}decrementStep(){if(void 0===this.state.step||0===this.state.step)return;const e=this.state.step-1;this.setState({...this.state,step:e})}incrementStep(){const{step:e,tooltipTourOutline:t}=this.state;if(void 0===e||!t)return;const o=e+1;o>=t.length?this.endTour():this.setState({...this.state,step:o})}endTour(){this.setState({...this.state,isActive:!1})}getCurrentStepBlockId(){if(this.state.tooltipTourOutline&&void 0!==this.state.step)return this.state.tooltipTourOutline[this.state.step].blockId}getCurrentStepSubStep(){if(!this.state.tooltipTourOutline||void 0===this.state.step)return;const e=this.state.tooltipTourOutline[this.state.step];return"demo_collection"===e.step_type||"demo_share"===e.step_type?e.sub_step:void 0}}const r=new n},559926:(e,t,o)=>{o.d(t,{$u:()=>N,BW:()=>U,Er:()=>V,FO:()=>se,Gp:()=>M,KD:()=>D,Ki:()=>oe,LS:()=>v,Mi:()=>R,PR:()=>le,Pd:()=>k,QV:()=>C,Sy:()=>B,V:()=>b,VW:()=>S,Vk:()=>H,X2:()=>F,_$:()=>p,aS:()=>O,aq:()=>y,c6:()=>g,dm:()=>Z,eH:()=>d,eX:()=>f,fJ:()=>u,gc:()=>ae,gp:()=>$,hO:()=>L,hs:()=>K,hy:()=>te,iT:()=>A,j5:()=>q,kO:()=>I,kV:()=>X,kY:()=>h,ks:()=>Q,lR:()=>ne,mM:()=>m,mu:()=>_,oF:()=>P,pU:()=>ie,pu:()=>x,q5:()=>w,ry:()=>Y,sn:()=>T,st:()=>E,u2:()=>j,uj:()=>G,xI:()=>ee,yQ:()=>z,z$:()=>W,zW:()=>J,zu:()=>re});var n=()=>o(997769),r=()=>o(939768),i=()=>o(989423),a=()=>o(495249),s=()=>o(644914),l=()=>o(508496),c=()=>o(10984);function d(e,t){l().default.logEvent("import_complete",t.import_source,{from:t.from}),i().u4({environment:e,event:{eventName:"import_complete",eventProperties:{from:t.from,import_source:t.import_source}}})}function u(e,t){l().default.logEvent("import_button_click",t.import_source,{from:t.from,import_type:t.import_type}),i().vd(e,"import_button_click",t)}function p(e,t){i().vd(e,"import_source_auth",t)}function m(e,t){i().vd(e,"import_source_input",t)}function g(e,t){i().vd(e,"import_file_upload",t)}function f(e,t){i().vd(e,"uploaded_file_size",t)}function v(e,t){i().vd(e,"file_upload_latency",t)}function h(e,t){l().default.logEvent("open_import_modal",null==t?void 0:t.from),i().vd(e,"open_import_modal",{...t,...(0,s().hX)({environment:e})})}function _(e,t){i().vd(e,"auth_integration",t)}function b(e,t){i().vd(e,"integration_select_all",t)}function y(e,t){i().vd(e,"integration_deselect_all",t)}function S(e,t){i().vd(e,"integration_select_item",t)}function w(e,t){i().vd(e,"integration_deselect_item",t)}function k(e,t){i().vd(e,"import_integration",t)}function I(e,t){i().vd(e,"remove_integration",t)}function A(e,t){i().vd(e,"integration_prompt_auth",t)}function x(e){i().vd(e,"open_google_drive_file_picker")}function C(e,t){i().vd(e,"google_drive_pick_file",t)}function T(e,t){i().vd(e,"google_drive_embed_file",t)}function M(e,t){i().vd(e,"unfurl_menu_option",t)}function P(e,t){const{pastedText:o}=t;let a;if(n().t(o,"url")){const e=r().qg(o);e.host&&(a=e.host)}if(a){const{pastedText:o,...n}={...t,url_domain:a};i().vd(e,"paste_url",n)}}function B(e,t){const o=t.file.lastIndexOf("."),n=o>0?t.file.substring(o+1):"",r=c().AI();n&&i().vd(e,"file_uploads",{source:t.source,extension:n,subscriptionTier:r})}function R(e,t){const o=t.url?(0,r().bk)(t.url):void 0;i().vd(e,"edit_link",{type:t.type,url_domain:null==o?void 0:o.hostname})}function E(e){i().vd(e,"edit_link_title")}function D(e){i().vd(e,"developer_integrations_list_visit")}function N(e){i().vd(e,"developer_integrations_new_click")}function L(e,t){i().vd(e,"developer_integrations_filter_click",t)}function F(e,t){const o=a().Nq[t.table];i().vd(e,"developer_integrations_view_visit",{type:o})}function U(e,t){const o=a().Nq[t.table];i().vd(e,"developer_integrations_create",{type:o})}function O(e,t){const o=a().Nq[t.table];i().vd(e,"developer_integrations_view_secret",{type:o})}function V(e,t){const o=a().Nq[t.table];i().vd(e,"developer_integrations_copy_secret",{type:o})}function j(e,t){const o=a().Nq[t.table],{table:n,...r}=t;i().vd(e,"developer_integrations_update",{type:o,...r})}function z(e,t){i().vd(e,"developer_integrations_my_integrations_click",t)}function q(e,t){i().vd(e,"developer_integrations_all_integrations_click",t)}function H(e,t){i().vd(e,"developer_integrations_visit_developer_website_click",t)}function W(e,t){i().vd(e,"developer_integrations_contact_developer_click",t)}function K(e,t){i().vd(e,"developer_integrations_disconnect_click",t)}function G(e,t){i().vd(e,"developer_integrations_delete_click",t)}function $(e,t){i().vd(e,"developer_integrations_confirm_delete_click",t)}function Y(e,t){i().vd(e,"install_public_integration_oauth",t)}function Q(e,t){i().vd(e,"security_and_compliance_integration_oauth_attempt",t)}function Z(e,t){i().vd(e,"security_and_compliance_integration_install",t)}function X(e,t){i().vd(e,"security_and_compliance_integration_uninstall",t)}function J(e,t){i().vd(e,"security_and_compliance_integration_update",t)}function ee(e,t){i().vd(e,"connect_external_integration",t),l().default.logEvent("connect_external_integration",void 0,t)}function te(e,t){i().vd(e,"disconnect_external_integration",t)}function oe(e,t){i().vd(e,"activate_link_preview_menu",t)}function ne(e,t){i().vd(e,"save_link_preview",t)}function re(e,t){i().vd(e,"update_link_preview",t)}function ie(e,t){i().vd(e,"open_link_preview_help_guide",t)}function ae(e,t){i().vd(e,"remove_link_preview_with_error",t)}function se(e,t){i().vd(e,"link_preview_url_miss",t)}function le(e,t){i().vd(e,"show_all_discoverable_connected_apps",t)}},562031:(e,t,o)=>{o.d(t,{g:()=>i,n:()=>a});var n=()=>o(578872),r=()=>o(351360);function i(){const e=r().default.state.mainEditorCurrentBlockStore;var t;return e?null===(t=(0,n().GN)(e))||void 0===t||null===(t=t.getSiteStore())||void 0===t?void 0:t.id:""}function a(){var e;const t=r().default.state.mainEditorCurrentBlockStore;if(t&&null!==(e=(0,n().GN)(t))&&void 0!==e&&null!==(e=e.getSiteStore())&&void 0!==e&&null!==(e=e.getSettings())&&void 0!==e&&e.enableQna)return t.getSpaceStore()}},562800:(e,t,o)=>{o.d(t,{$o:()=>v,E2:()=>f,Ix:()=>p,MN:()=>d,NG:()=>S,Nq:()=>b,QN:()=>m,SN:()=>g,Ue:()=>h,kn:()=>_,l3:()=>u,u8:()=>y});o(898992),o(672577),o(581454);var n=()=>o(921940),r=()=>o(449418),i=()=>o(496603),a=()=>o(780054),s=()=>o(836251),l=()=>o(578872),c=()=>o(351360);function d(e){let{domainName:t,domainType:o="default"}=e;return"default"===o?`${t}${u()}`:t}function u(){return`.${a().A.publicDomainName}`}function p(e){const{spaceStore:t,domainId:o}=e;if(!t)return"";const n=h(t,o);return d(n?{domainName:n.getDomainName()||"",domainType:n.getDomainType()}:{domainName:(null==t?void 0:t.getPublicContentDomain())||"",domainType:"default"})}function m(e,t){const o=e.getSpaceStore(),r=l().LC(e);if(r)return(0,n().L)({config:a().A,domainName:r.domain_name,isCustomHostname:"custom"===r.domain_type});{const e=null==o?void 0:o.getPublicContentDomain();if(e)return(0,n().L)({config:a().A,domainName:e,isCustomHostname:!1})}}function g(e){return t=>{if((0,s().w6)(e)){const e=c().default.state.mainEditorCurrentBlockStore,o=null==e?void 0:e.getRecordStore(e,t);return o?m(o):void 0}}}function f(e,t){if((0,s().w6)(e))return m(t)}function v(e){if(!e)return[];return(0,i().oE)(e.getPublicDomainIds().map((t=>e.getRecordModel({id:t,table:r()._6,spaceId:e.id})))).sort(((e,t)=>{const o=null==e?void 0:e.getCreatedTime(),n=null==t?void 0:t.getCreatedTime();return o&&n?o-n:o?1:n?-1:0}))}function h(e,t){var o;if(e)return null===(o=y(e))||void 0===o?void 0:o.find((e=>e.id===t))}function _(e,t){var o;if(e)return null===(o=y(e))||void 0===o?void 0:o.find((e=>e.getDomainName()===t))}function b(e){var t;if(e)return null===(t=y(e))||void 0===t?void 0:t.find((e=>e.isDefault()))}function y(e){return e?(0,i().oE)(e.getPublicDomainIds().map((t=>e.getRecordModel({id:t,table:r()._6,spaceId:e.id})))):[]}function S(e,t){var o;return null===(o=y(e))||void 0===o?void 0:o.find((e=>e.getPublicHomePage()===t))}},563615:(e,t,o)=>{o.d(t,{$b:()=>u,Nz:()=>c,Q1:()=>s,RX:()=>i,ZO:()=>d,bl:()=>l,eN:()=>a,oQ:()=>r});var n=()=>o(645873);const r={WorkflowLinkBlock:new(n().O2)("WorkflowLinkBlock",(async()=>await Promise.all([o.e(96346),o.e(99353),o.e(48315),o.e(12827)]).then(o.bind(o,809434)))),WorkflowPageBlock:new(n().O2)("WorkflowPageBlock",(async()=>await Promise.all([o.e(96346),o.e(36192),o.e(74562),o.e(8184),o.e(99353),o.e(52681),o.e(48315),o.e(847),o.e(87700)]).then(o.bind(o,885789)))),WorkflowEditorTopbar:new(n().O2)("WorkflowEditorTopbar",(async()=>await Promise.all([o.e(23806),o.e(96346),o.e(36192),o.e(74562),o.e(8184),o.e(99353),o.e(52681),o.e(48315),o.e(847),o.e(92143)]).then(o.bind(o,627238)))),WorkflowInPlaceEditor:new(n().O2)("WorkflowInPlaceEditor",(async()=>await Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(62475),o.e(3151),o.e(98629),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(28721),o.e(26483),o.e(29333),o.e(89109),o.e(30016),o.e(67832),o.e(37955),o.e(50437)]).then(o.bind(o,427774)))),ChatCollectionView:new(n().O2)("ChatCollectionView",(async()=>await Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(26906),o.e(45666)]).then(o.bind(o,227519)))),CustomCollectionView:new(n().O2)("CustomCollectionView",(async()=>await Promise.all([o.e(96346),o.e(36192),o.e(74562),o.e(8184),o.e(99353),o.e(52681),o.e(48315),o.e(847),o.e(64165)]).then(o.bind(o,120250)))),WorkflowEditorCollectionViewPage:new(n().O2)("WorkflowEditorCollectionViewPage",(async()=>await Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(74562),o.e(8184),o.e(99353),o.e(52681),o.e(48315),o.e(847),o.e(78846),o.e(13324),o.e(15724),o.e(81141),o.e(72915),o.e(16697)]).then(o.bind(o,887811)))),workflowActions:new(n().O2)("workflowActions",(async()=>await Promise.all([o.e(96346),o.e(36192),o.e(74562),o.e(8184),o.e(99353),o.e(52681),o.e(48315),o.e(847),o.e(11097)]).then(o.bind(o,847)))),workflowNavigationActions:new(n().O2)("workflowNavigationActions",(async()=>await o.e(93139).then(o.bind(o,691093)))),workflowNavigationHelpers:new(n().O2)("workflowNavigationHelpers",(async()=>await Promise.resolve().then(o.bind(o,564037))))},i=(0,n().jQ)(r.WorkflowLinkBlock,(e=>e.default)),a=(0,n()._h)(r.WorkflowPageBlock,(e=>e.default)),s=(0,n()._h)(r.ChatCollectionView,(e=>e.ChatCollectionView)),l=(0,n()._h)(r.CustomCollectionView,(e=>e.CustomCollectionView)),c=(0,n()._h)(r.WorkflowEditorTopbar,(e=>e.WorkflowEditorTopbar)),d=(0,n()._h)(r.WorkflowInPlaceEditor,(e=>e.WorkflowInPlaceEditor)),u=(0,n()._h)(r.WorkflowEditorCollectionViewPage,(e=>e.WorkflowEditorCollectionViewPage))},564037:(e,t,o)=>{o.r(t),o.d(t,{defaultWorkflowNavigationState:()=>l,getIsWorkflowEditorOpen:()=>p,getWorkflowNavigationRouteArgs:()=>c,getWorkflowNavigationState:()=>d,useIsWorkflowEditorOpen:()=>m,useWorkflowNavigationState:()=>u});var n=()=>o(484714),r=()=>o(56366),i=()=>o(498212),a=()=>o(351360),s=()=>o(46986);const l={type:"configure"};function c(e){const{RouterStore:t}=e;if("page"!==t.state.route.name)return;const o=a().default.state.mainEditorCurrentBlockStore;return o&&o.isCollectionView()&&o.canEdit()&&!o.isLocked()&&(0,s().s)()?{workflowViewType:t.state.route.workflowViewType,workflowViewKey:t.state.route.workflowViewKey}:void 0}function d(e){const{workflowViewType:t,workflowViewKey:o}=c(e)??{};return function(e){const{workflowViewType:t,workflowViewKey:o}=e;switch(t){case"configure":case"debug":case"preview":case"runtime_actor":return{type:t};case"function":case"module":case"trigger":case"view_settings":case"view":return o?{type:t,key:o}:l;case"runs":return{type:"runs",runId:(0,i().ZA)(o)};case"test":if(!o)return l;const[e,n]=o.split(",");return e&&n?{type:"test",name:n,functionKey:e}:l;default:return}}({workflowViewType:t,workflowViewKey:o})}function u(){const e=(0,n().v3)();return(0,r().K8)((()=>d(e)),[e])}function p(e){return void 0!==d(e)}function m(){const e=(0,n().v3)();return(0,r().K8)((()=>p(e)),[e])}},564262:(e,t,o)=>{o.d(t,{W:()=>i});o(16280);var n=()=>o(534177),r=()=>o(190674);function i(e){if((0,r().k)(e)){if(!e.views_main_tab_modules)throw new Error("No views_main_tab_modules found in modulesByArea");return{area:"views_main_tab_modules",viewsMainTabId:(0,n().uv)(null==e?void 0:e.views_main_tab_modules)[0]}}return{area:"page_main",viewsMainTabId:void 0}}},565049:(e,t,o)=>{o.d(t,{A:()=>f});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(493823),l=()=>o(406699),c=()=>o(331542),d=()=>o(964447),u=()=>o(196539),p=()=>o(675811),m=()=>o(20039),g=o(474848);function f(e){const t=(0,r().v3)(),{device:o}=t,{store:f,showDivider:v,popupRenderer:h,iconSize:_,iconStyle:b,highlighter:y}=e,S=(0,a().IS)((()=>({button:{fontSize:"inherit",padding:2},loadingPopupBackground:{width:280,paddingTop:8,paddingBottom:8,display:"flex",justifyContent:"center"}})),[]),w=(0,i().K8)((()=>f.isDefined()),[f]),k=(0,n.useRef)(null);if(!w)return null;return(0,g.jsxs)(n.Fragment,{children:[(0,g.jsx)(l().Ay,{originGap:4,popupType:o.isMobile?l().z7.BottomSheet:l().z7.Popup,render:h??(e=>(0,g.jsx)(u().dX,{renderLoading:e=>(0,g.jsx)("div",{style:S.loadingPopupBackground,children:e&&(0,g.jsx)(c().A,{})}),teamStore:f,parent:e})),renderOrigin:t=>(0,g.jsx)(s().p,{style:S.button,ref:k,size:"sm",shouldShrink:!0,mobileFeedback:o.isMobile,...t,children:(0,g.jsx)(m().A,{store:f,maxWidth:e.maxWidth,iconSize:_,titleStyle:e.titleStyle,iconStyle:b,highlighter:y})})}),(0,g.jsx)(d().tI,{origin:k}),v&&(0,g.jsx)(p().f,{})]},f.id)}},565304:(e,t,o)=>{o.d(t,{A:()=>d,h:()=>l});var n=o(296540),r=()=>o(56366),i=()=>o(959013),a=o(474848);const s=(0,i().YK)({embedButtonText:{defaultMessage:"Embed PDF",id:"pdfBlock.embeds.button.label"}});function l(e){const{type:t,environment:o}=e;return"pdf"===t&&o.device.isMobile}function c(e,t){const c=(0,o(484714).v3)(),d=(0,i().tz)(),u=(0,n.useRef)(null),p=(0,r().uB)(e.blockResizerStore,o(891279).A),m=(0,r().K8)((()=>{const t=e.store.getType();return t&&l({environment:c,type:t})}),[c,e.store])?(0,a.jsx)(o(489436).A,{store:e.store,disabled:e.disabled}):(0,a.jsx)(o(24611).Ay,{...e,blockResizerStore:p,ref:u,store:e.store,iconSvg:o(679596).G,mediaMenuCurrentTab:"file",mediaMenuTabs:[{type:"file",fileUpload:!0},{type:"embed"}],mediaMenuEmbedCaption:(0,a.jsx)(i().sA,{defaultMessage:"Embed a PDF file",id:"pdfBlock.embeds.caption"}),embedButtonText:d.formatMessage(s.embedButtonText),urlInputPlaceholder:"https://...",children:(0,a.jsx)(i().sA,{defaultMessage:"Embed a PDF",id:"pdfBlock.placeholder"})});return(0,o(891078).NW)(e.store,t,(0,n.useMemo)((()=>({renderedType:"pdf",getNode:()=>{const e=u.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),m)}const d=n.memo(n.forwardRef(c),o(821062).A)},566009:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},566953:(e,t,o)=>{o.d(t,{g9:()=>r});o(898992),o(737550);var n=()=>o(68263);function r(e){const t=e.getTeamPermissionsForId(e.getParentId()).some((e=>"explicit_team_permission"===e.type&&(0,n().Tt)(e.role)));return e.isRestricted()&&!t}},568118:(e,t,o)=>{o.d(t,{y:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("mobileTopbarChevronLeft",{viewBox:"0 0 26 26",svg:(0,n.jsxs)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M8.45117 13.0001L16.2512 5.20012",strokeWidth:"1.5",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M8.45117 13.0001L16.2512 20.8001",strokeWidth:"1.5",strokeLinecap:"round"})]})})},568625:(e,t,o)=>{o.d(t,{L:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("ellipsis",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.887 9.014c.273 0 .52-.064.738-.192.219-.132.394-.307.526-.526.133-.219.199-.46.199-.725 0-.405-.142-.747-.424-1.025a1.41 1.41 0 00-1.04-.417c-.264 0-.505.066-.724.198a1.412 1.412 0 00-.718 1.244c0 .265.064.506.192.725.132.219.307.394.526.526.219.128.46.192.725.192zm5.113 0a1.412 1.412 0 001.244-.718c.132-.219.198-.46.198-.725 0-.405-.14-.747-.423-1.025A1.386 1.386 0 008 6.129c-.264 0-.506.066-.725.198a1.412 1.412 0 00-.718 1.244c0 .265.064.506.192.725.132.219.308.394.526.526.22.128.46.192.725.192zm5.106 0c.265 0 .506-.064.725-.192.219-.132.394-.307.526-.526.133-.219.199-.46.199-.725 0-.405-.142-.747-.424-1.025a1.394 1.394 0 00-1.026-.417 1.474 1.474 0 00-1.265.718c-.127.218-.19.46-.19.724 0 .265.063.506.19.725.133.219.308.394.527.526.223.128.47.192.738.192z"})})},569577:(e,t,o)=>{o.d(t,{H:()=>l,V:()=>c});var n=()=>o(695625),r=()=>o(351360),i=()=>o(630116),a=()=>o(315957),s=()=>o(778417);function l(e){const{mainEditorCurrentBlockStore:t}=r().default.state;if(t){const o=i().Bv.createChildStore(t,e.blockStore.pointer);a().A.setState({...a().A.state,originRect:e.originRect||n().T.getRectFromStore(e.blockStore),blockStore:o})}}function c(e){a().A.reset(),s().IU({environment:e})}},569777:(e,t,o)=>{o.d(t,{A:()=>a,q:()=>n});let n=function(e){return e.Forward="Forward",e.Backward="Backward",e}({});class r extends(()=>o(757695))().default{getInitialState(){return{open:!1}}isOpen(){if(this.state.open){this.state;return!0}return!1}}const i=new r;o(604341).exposeDebugValue("EquationAnnotationStore",i);const a=i},569912:(e,t,o)=>{o.d(t,{A:()=>a,Z:()=>i});var n=()=>o(869562),r=()=>o(753199);function i(e){(0,r().SQ)({event:e,context:r().y$.SidebarMouseMove,callback:()=>{n().close()}})}const a=function(e){return e({onMouseMove:i})}},570241:(e,t,o)=>{o.d(t,{Z:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{abortControllersByPage:{},globalAbortController:new AbortController}}}const r=new n},570323:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},571062:(e,t,o)=>{o.d(t,{A2:()=>a,FW:()=>r,Vq:()=>s,uW:()=>i});var n=()=>o(989423);function r(e){const{environment:t,...o}=e;(0,n().u4)({environment:t,event:{eventName:"suggesting_mode_session_start",eventProperties:o}})}function i(e){const{environment:t,...o}=e;(0,n().u4)({environment:t,event:{eventName:"suggesting_mode_session_end",eventProperties:o}})}function a(e){const{environment:t,...o}=e;(0,n().u4)({environment:t,event:{eventName:"suggest_edit",eventProperties:o}})}function s(e){const{environment:t,...o}=e;(0,n().u4)({environment:t,event:{eventName:"edit_existing_suggestion",eventProperties:o}})}},571731:(e,t,o)=>{o.d(t,{J:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("tableBlock",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.25 16.5a2.75 2.75 0 01-2.75-2.75v-7.5A2.75 2.75 0 014.25 3.5h11.5a2.75 2.75 0 012.75 2.75v7.5a2.75 2.75 0 01-2.75 2.75H4.25zM3 6.25C3 5.56 3.56 5 4.25 5h5v2.5H3V6.25zM3 9h6.25v2H3V9zm0 3.5v1.25c0 .69.56 1.25 1.25 1.25h5v-2.5H3zm7.75 0V15h5c.69 0 1.25-.56 1.25-1.25V12.5h-6.25zM17 11V9h-6.25v2H17zm-6.25-3.5H17V6.25C17 5.56 16.44 5 15.75 5h-5v2.5z",clipRule:"evenodd"})})},572080:(e,t,o)=>{o.d(t,{JV:()=>A,Sy:()=>w,ZB:()=>x,_V:()=>M,hY:()=>b,j0:()=>C,nZ:()=>S,s4:()=>I,zc:()=>T});o(944114),o(581454);var n=()=>o(857639),r=()=>o(959044),i=()=>o(229833),a=()=>o(780054),s=()=>o(972435),l=()=>o(179534),c=()=>o(351360),d=()=>o(508496),u=()=>o(630116),p=()=>o(606846),m=()=>o(328523),g=()=>o(848259),f=()=>o(449506),v=()=>o(901389),h=()=>o(317909);const _=(0,o(959013).YK)({archiveError:{id:"notificationActions.archiveNotification.errorMessage",defaultMessage:"Failed to archive. Please try again."},setReadError:{id:"notificationActions.setRead.errorMessage",defaultMessage:"Failed to mark notification as read. Please try again."},setAllAsReadError:{id:"notificationActions.setAllAsRead.errorMessage",defaultMessage:"Failed to mark all notifications as read. Please try again."},setUnreadError:{id:"notificationActions.setUnread.errorMessage",defaultMessage:"Failed to mark notification as unread. Please try again."}});async function b(e){const t=p().Ay.state.currentTab,{currentSpaceStore:o}=c().default.state;if(o&&!a().A.isAdminMode&&(0,p().zp)(t)){try{await f().callApi({eventName:"setNotificationsAsRead",environment:e,data:{spaceId:o.id,timestamp:Date.now(),type:t}})}catch(r){return v().f1(s().A.formatMessage(_.setAllAsReadError)),void n().log({level:"error",from:"notificationActions",type:"setCurrentUpdatesTabAsRead",error:(0,i().n6)(r)})}S(t,o.id,y.decrementToZero)}}const y={incrementByOne:e=>e+1,decrementByOne:e=>Math.max(e-1,0),decrementToZero:e=>0};function S(e,t,o){const{results:n}=l().A.state,r=n.map((n=>{if(n.spaceId===t){const t=n.unread[e];return void 0===t?n:{...n,unread:{...n.unread,[e]:o(t)}}}return n}));l().A.setState({results:r})}async function w(e,t,o){const{currentSpaceStore:r}=c().default.state;if(r&&!a().A.isAdminMode){try{for(;;){if(!(await k({environment:e,currentSpaceStore:r,inbox:t,readFilter:o})).more)break}}catch(l){return v().f1(s().A.formatMessage(_.archiveError)),void n().log({level:"error",from:"notificationActions",type:"archiveAll",error:(0,i().n6)(l)})}"read"!==o&&S(t,r.id,y.decrementToZero)}}async function k(e){const{environment:t,currentSpaceStore:o,inbox:r,readFilter:a}=e,l=await f().callApi({eventName:"getUnvisitedNotificationIds",environment:t,data:{spaceId:o.id,timestamp:Date.now(),type:r,size:500,readFilter:a}});if("failed"===l.type)return v().f1(s().A.formatMessage(_.archiveError)),n().log({level:"error",from:"notificationActions",type:"archiveApiError",error:(0,i().n6)(l.error)}),{more:!1};const{notificationIds:c}=l.data;return await async function(e){const{environment:t,notificationIds:o,rootStore:n}=e,{serverCommitResult:r}=h().createAndCommit({userAction:"notificationActions.archiveNotificationIds",environment:t,canUndo:!0,undoCheckpoint:!0,perform:e=>{for(const t of o)A({transaction:e,rootStore:n,visited:!0,notificationId:t})}});await r}({environment:t,notificationIds:c,rootStore:o}),c.length>=500?{more:!0}:{more:!1}}function I(e){const{notification:t,rootStore:o,transaction:a}=e;if(!t.visited){try{A({notificationId:t.id,rootStore:o,transaction:a,visited:!0})}catch(l){return v().f1(s().A.formatMessage(_.archiveError)),void n().log({level:"error",from:"notificationActions",type:"archiveNotification",error:(0,i().n6)(l)})}if(!t.read){S(r().ZS[t.type],t.space_id,y.decrementByOne)}}}function A(e){const{transaction:t,notificationId:o,rootStore:n,visited:i}=e,a=(0,u().Oo)(n,{table:r()._p,id:o});h().applyOperation({transaction:t,store:a,operation:{command:"update",pointer:{table:r()._p,id:o,spaceId:n.pointer.spaceId},path:[],args:i?{visited:!0,read:!0,archived_at:Date.now()}:{visited:!1,archived_at:null}}})}function x(e){const{transaction:t,notification:o,rootStore:a,read:l}=e;if(o.read===l)return;const c=(0,u().Oo)(a,{table:r()._p,id:o.id});try{h().applyOperation({transaction:t,store:c,operation:{command:"update",pointer:{table:r()._p,id:o.id,spaceId:o.space_id},path:[],args:{read:l,...l?{}:{visited:!1}}}})}catch(d){return e.suppressErrorMessage||v().f1(s().A.formatMessage(l?_.setReadError:_.setUnreadError)),void n().log({level:"error",from:"notificationActions",type:"setRead",error:(0,i().n6)(d)})}S("mentions",o.space_id,l?y.decrementByOne:y.incrementByOne),"commented"===o.type?S("comments",o.space_id,l?y.decrementByOne:y.incrementByOne):S("activity",o.space_id,l?y.decrementByOne:y.incrementByOne)}function C(){return l().A.getUnreadCountForCurrentSpace().mentions}async function T(e){const{environment:t}=e,{currentSpaceStore:o}=c().default.state;if(!o)return[];const n=await f().callApi({eventName:"getUnvisitedNotificationIds",environment:t,data:{spaceId:o.id,timestamp:Date.now(),type:"mentions",size:100,readFilter:"unread"}});return"failed"===n.type?[]:n.data.notificationIds}function M(e){let{environment:t,newTab:o,shouldTrack:n}=e;const r=p().Ay.state.currentTab;if(r!==o&&("mentions"===o?p().Ay.update((e=>({...e,currentTab:o,containsBothReadAndUnreadNotifications:!1,containsUnreadNotifications:!1,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]}))):p().Ay.update((e=>({...e,currentTab:o})))),n){const e=t.device.isMobile;g().pQ({environment:t,forceRestartSession:!1,from:"updates-tab-click"}),e&&m().Mq(t,{itemName:"updates"})}"mentions"===r&&async function(e){const t=d().default.checkGate({gateName:"multi_cell_get_user_notifications"}),o="on"===d().default.getGroup("inbox_activity_split");let n=[];if(t){const t=f().callMultiCellApi({eventName:"getUserNotifications",environment:e,data:{size:1e3,isInboxV2:!0,splitInboxActivity:o},headers:{}});for await(const e of t)"success"===e.type&&n.push(...e.data.results)}else{const t=await f().callApi({eventName:"getUserNotifications",environment:e,data:{size:1e3,isInboxV2:!0,splitInboxActivity:o}});if("failed"===t.type)return;n=t.data.results}l().A.setState({results:n})}(t)}},572088:(e,t,o)=>{o.d(t,{LU:()=>p,fY:()=>m,jw:()=>s,o8:()=>g,yJ:()=>c});o(898992),o(354520);var n=()=>o(513416),r=()=>o(959013),i=()=>o(508496),a=()=>o(53137);function s(e){const t=a().A.state;return t.loaded?t.bots.filter((t=>t.integration_id===e)):[]}const l=(0,r().YK)({invalidRequest:{id:"unfurlingHelpers.authenticatedErrorDescription.invalidRequest",defaultMessage:"The authentication request is invalid. Please contact support if issue persists."},unauthorizedClient:{id:"unfurlingHelpers.unauthorizedClient.",defaultMessage:"The client is not authorized to request an authorization code using this method. Please contact support if issue persists."},accessDenied:{id:"unfurlingHelpers.authenticatedErrorDescription.accessDenied",defaultMessage:"The resource owner or authorization server denied the request. Check with your organization or resource owner to ensure OAuth installation is enabled."},unsupportedResponseType:{id:"unfurlingHelpers.authenticatedErrorDescription.unsupportedResponseType",defaultMessage:"The authorization server does not support obtaining an authorization code using this method. Please contact support if issue persists."},invalidScope:{id:"unfurlingHelpers.authenticatedErrorDescription.invalidScope",defaultMessage:"The requested scope is invalid. Please contact support if issue persists."},serverError:{id:"unfurlingHelpers.authenticatedErrorDescription.serverError",defaultMessage:"The authorization server encountered an unexpected condition that prevented it from fulfilling the request. Please contact support if issue persists."},temporarilyUnavailable:{id:"unfurlingHelpers.authenticatedErrorDescription.temporarilyUnavailable",defaultMessage:"The authorization server is currently unable to handle the request due to a temporary overloading or maintenance of the server. Please contact support if issue persists."},githubAppRequestAccessUnsupported:{id:"unfurlingHelpers.authenticatedErrorDescription.githubAppRequestAccessUnsupported",defaultMessage:"Request Access is not supported. You must be both a GitHub Admin and Notion Workspace Admin to connect the two apps."},unknownError:{id:"unfurlingHelpers.authenticatedErrorDescription.unknownError",defaultMessage:"The authorization server responded with an unknown error (`{value}`). Please contact support if issue persists."}});function c(e){return"invalid_request"===e?l.invalidRequest:"unauthorized_client"===e?l.unauthorizedClient:"access_denied"===e?l.accessDenied:"unsupported_response_type"===e?l.unsupportedResponseType:"invalid_scope"===e?l.invalidScope:"server_error"===e?l.serverError:"temporarily_unavailable"===e?l.temporarilyUnavailable:"github_app_request_access_unsupported"===e?l.githubAppRequestAccessUnsupported:l.unknownError}const d=(0,r().YK)({unknownError:{id:"unfurlingHelpers.unfurlResponseError.unknownError",defaultMessage:"Can't load preview"},accessDenied:{id:"unfurlingHelpers.unfurlResponseError.accessDenied",defaultMessage:"Access denied"},reAuthenticate:{id:"unfurlingHelpers.unfurlResponseError.reAuthenticate",defaultMessage:"Re-authentication necessary"},notFound:{id:"unfurlingHelpers.unfurlResponseError.notFound",defaultMessage:"Content not found"},unprocessableEntity:{id:"unfurlingHelpers.unfurlResponseError.unprocessableEntity",defaultMessage:"Unrecognized URL"},rateLimited:{id:"unfurlingHelpers.unfurlResponseError.rateLimited",defaultMessage:"Too many requests"},serverError:{id:"unfurlingHelpers.unfurlResponseError.serverError",defaultMessage:"Can't load preview"},invalidRequest:{id:"unfurlingHelpers.unfurlResponseError.invalidRequest",defaultMessage:"Can't load preview"},authRefresh:{id:"unfurlingHelpers.unfurlResponseError.authRefresh",defaultMessage:"Fetching Preview"},githubNotAcceptable:{id:"unfurlingHelpers.unfurlResponseError.githubNotAcceptable",defaultMessage:"Need owner role"},jiraNotAcceptable:{id:"unfurlingHelpers.unfurlResponseError.jiraNotAcceptable",defaultMessage:"Synced in another workspace"},notAcceptable:{id:"unfurlingHelpers.unfurlResponseError.notAcceptable",defaultMessage:"Not Acceptable"},databaseSyncLimit:{id:"unfurlingHelpers.unfurlResponseError.databaseSyncLimit",defaultMessage:"Synced Database limit reached"},selectFileToContinue:{id:"unfurlingHelpers.unfurlResponseError.selectFileToContinue",defaultMessage:"Select file to continue"}}),u=(0,r().YK)({unknownError:{id:"unfurlingHelpers.unfurlResponseErrorDescription.unknownError",defaultMessage:'There was an error trying to get information for this resource. Received error code "{statusCode}".'},accessDenied:{id:"unfurlingHelpers.unfurlResponseErrorDescription.accessDenied",defaultMessage:"You do not have appropriate permission to access this resource."},reAuthenticate:{id:"unfurlingHelpers.unfurlResponseErrorDescription.reAuthenticate",defaultMessage:"You need to re-authenticate your account to access this resource."},notFound:{id:"unfurlingHelpers.unfurlResponseErrorDescription.notFound",defaultMessage:"The resource information for this link could not be found. It may no longer exist or you may not have appropriate permission to access it."},unprocessableEntity:{id:"unfurlingHelpers.unfurlResponseErrorDescription.unprocessableEntity",defaultMessage:"This url is not currently embedable by this integration."},rateLimited:{id:"unfurlingHelpers.unfurlResponseErrorDescription.rateLimited",defaultMessage:'"{integrationName}" received too many requests for you or your organization. Please wait a few minutes and try again.'},serverError:{id:"unfurlingHelpers.unfurlResponseErrorDescription.serverError",defaultMessage:'Oh no! Seems like there was a "{integrationName}" server error. Received error code "{statusCode}".'},invalidRequest:{id:"unfurlingHelpers.unfurlResponseErrorDescription.invalidRequest",defaultMessage:'There was an error trying to get information for this resource. Received error code "{statusCode}".'},authRefresh:{id:"unfurlingHelpers.unfurlResponseErrorDescription.authRefresh",defaultMessage:"Fetching Preview via Login Update, please wait."},githubNotAcceptable:{id:"unfurlingHelpers.unfurlResponseErrorDescription.githubNotAcceptable",defaultMessage:"You do not have appropriate permission to sync this resource. You need to have an owner role."},jiraNotAcceptable:{id:"unfurlingHelpers.unfurlResponseErrorDescription.jiraNotAcceptable",defaultMessage:"You have synced this resource in another workspace."},notAcceptable:{id:"unfurlingHelpers.unfurlResponseErrorDescription.notAcceptable",defaultMessage:"You do not have appropriate permission to sync this resource. You need to have an owner role."},databaseSyncLimit:{id:"unfurlingHelpers.unfurlResponseErrorDescription.databaseSyncLimit",defaultMessage:"Your workspace has hit the Synced Database limit."},selectFileToContinue:{id:"unfurlingHelpers.unfurlResponseErrorDescription.selectFileToContinue",defaultMessage:"Google now requires using Google Picker to select files"}});function p(e,t){return void 0===e?{message:d.unknownError,description:u.unknownError}:401===e?{message:d.reAuthenticate,description:u.reAuthenticate}:439===e?{message:d.authRefresh,description:u.authRefresh}:403===e?{message:d.accessDenied,description:u.accessDenied}:404===e?{message:d.notFound,description:u.notFound}:422===e?{message:d.unprocessableEntity,description:u.unprocessableEntity}:428===e?{message:d.selectFileToContinue,description:u.selectFileToContinue}:429===e?{message:d.rateLimited,description:u.rateLimited}:406===e?"jira"===t?{message:d.jiraNotAcceptable,description:u.jiraNotAcceptable}:"github"===t?{message:d.githubNotAcceptable,description:u.githubNotAcceptable}:{message:d.notAcceptable,description:u.notAcceptable}:417===e?{message:d.databaseSyncLimit,description:u.databaseSyncLimit}:(0,n().f1)(e)?{message:d.serverError,description:u.serverError}:{message:d.invalidRequest,description:u.invalidRequest}}function m(e){return!e.device.isMobileBrowser}function g(){return i().default.checkGate({gateName:"beta-developers-external"})}},574012:(e,t,o)=>{o.d(t,{A:()=>s,i:()=>i});var n=()=>o(496603),r=()=>o(155959);let i=function(e){return e[e.willHide=0]="willHide",e[e.hidden=1]="hidden",e[e.willShow=2]="willShow",e[e.shown=3]="shown",e}({});class a extends(()=>o(757695))().default{constructor(){super(...arguments),this.updateKeyboardPhaseDebounced300=n().sg(((e,t)=>{this.setState({...this.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),300),this.updateKeyboardPhaseDebounced150=n().sg(((e,t)=>{this.setState({...this.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),150),this.updateKeyboardPhase=(e,t,n)=>{const{device:i,RouterStore:a}=e;if(!(0,r().T)("supportsAlwaysMultiTextSelectionBehavior")){const e="page"===a.state.route.name,r=i.isAndroid&&i.isMobileNative,s="editing"===o(24157).default.state.mode;if(e&&r&&!s)return void this.updateKeyboardPhaseDebounced300(t,n)}if((0,r().T)("supportsDebouncingKeyboardDuringOnboarding")){const e="onboarding"===a.state.route.name,o=i.isIOS&&i.isMobileNative;if(e&&o)return void this.updateKeyboardPhaseDebounced150(t,n)}this.setState({...this.state,phase:t,estimatedKeyboardWebViewOverlap:n})},this.updateKeyboardConfig=(e,t)=>{this.update((o=>({...o,packageName:e,activeLocale:t})))},this.keyboardHeight=()=>this.state.estimatedKeyboardWebViewOverlap,this.mobileNativeBottomPadding=e=>{const t=this.state.estimatedKeyboardWebViewOverlap;if(t>0)return t;const{WindowSizeStore:n,TabbedRouterStore:i}=e;let a=0;if((0,r().T)("supportsNativeBottomBarOverlappingWebView")){const t=(0,o(357307).Y)(e),n=i.state.modal.length>0;t&&!n&&(a=this.state.nativeBottomBarHeight??48)}return n.state.paddingBottom+a}}getInitialState(){return{phase:i.hidden,estimatedKeyboardWebViewOverlap:0,nativeBottomBarHeight:void 0,packageName:void 0,activeLocale:void 0}}async onShow(e){await this.waitUntil((()=>this.state.phase===i.shown)),e()}async onHide(e){await this.waitUntil((()=>this.state.phase===i.hidden)),e()}}const s=new a},574922:(e,t,o)=>{o.d(t,{x:()=>r});var n=()=>o(292588);const r={table:o(837420).e,recordColumnTypes:{id:n().A.UUID,version:n().A.Number,last_version:n().A.Number,space_id:n().A.UUID,name:n().A.String,url:n().A.String,file_ids:n().A.StringArray,created_time:n().A.Number,created_by_id:n().A.UUID,created_by_table:n().A.String,alive:n().A.Boolean},metaColumnTypes:{meta_user_id:n().A.UUID,meta_role:n().A.String}}},575157:(e,t,o)=>{o.d(t,{D:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.25 5.2a.55.55 0 0 0 0 1.1h5.5a.55.55 0 0 0 0-1.1zM6.7 8.25a.55.55 0 0 1 .55-.55h5.5a.55.55 0 0 1 0 1.1h-5.5a.55.55 0 0 1-.55-.55m.55 1.95a.55.55 0 0 0 0 1.1H10a.55.55 0 1 0 0-1.1z"}),(0,n.jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125v-11a2.125 2.125 0 0 0-2.125-2.125zM5.375 4.5c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v11a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875z"})]})},i=(0,o(340498).wt)("docPlainText",r)},575301:(e,t,o)=>{o.d(t,{T4:()=>h,o_:()=>f,qh:()=>v});var n=o(296540),r=()=>o(395361),i=()=>o(484714),a=()=>o(56366),s=()=>o(401497),l=()=>o(284371),c=()=>o(725614),d=()=>o(116008),u=()=>o(231722),p=()=>o(176106),m=()=>o(574012),g=()=>o(24157);function f(){const e=(0,i().v3)();return(0,a().K8)((()=>m().A.mobileNativeBottomPadding(e)),[e])}function v(){const e=(0,i().v3)(),{isMobileNative:t,isAndroid:o}=(0,i().Y0)(),{RouterStore:s,NativeMobileActionBarStore:l}=e,f=(0,a().K8)((()=>{var e;if(!t||!o)return!1;if("page"!==s.state.route.name)return!1;if(m().A.state.phase!==m().i.hidden)return!1;if(p().A.state.open)return!1;if(d().A.state.open)return!1;if(Boolean(null==l||null===(e=l.state)||void 0===e?void 0:e.menu))return!1;const n=g().default.state,r="editing"===n.mode?n.multiSelection:void 0;return!(r&&!(0,u().kM)(r))}),[s,o,t,l]),v=(0,r().Y)(((e,t)=>{t&&c().clear({environment:e})}),150);(0,n.useEffect)((()=>{v(e,f)}),[e,f,v])}function h(){const e=(0,i().Y0)();return(0,s().IS)((t=>({popup:{...e.isMobile&&{borderTopLeftRadius:12,borderTopRightRadius:12,overflow:"hidden"}},menuScroller:e.isMobile?{background:t.surface.wash}:{},header:e.isMobile?{display:"flex",justifyContent:"center",alignItems:"center",fontSize:16,fontWeight:l().Wy.semibold,background:t.surface.wash,height:45}:{paddingLeft:16,paddingRight:16,paddingTop:10,fontWeight:l().Wy.semibold},subheader:e.isMobile?{display:"flex",justifyContent:"start",alignItems:"center",fontSize:15,fontWeight:l().Wy.medium,background:t.surface.wash,height:45,color:t.text.secondary,paddingLeft:16,paddingRight:16}:{paddingLeft:16,paddingRight:16,paddingTop:10,fontWeight:l().Wy.semibold},sectionMenuItem:e.isMobile?{overflow:"hidden",background:t.buttonBackground,borderRadius:12,marginLeft:16,marginRight:16,marginBottom:16,borderWidth:1,borderStyle:"solid",borderColor:t.stroke.secondary,padding:void 0}:{},buttonMenuItem:e.isMobile?{backgroundColor:t.surface.elevated,paddingTop:12,paddingBottom:12,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:t.stroke.secondary}:{},buttonMenuItemPressed:{background:t.buttonPressedBackground},transparentButtonMenuItemBorder:{borderBottomColor:"transparent"},title:e.isMobile?{fontSize:16}:{},icon:{...e.isMobile?{height:24,width:24}:{height:20,width:20}},checkIcon:{...e.isMobile?{height:20,width:20}:{height:16,width:16}}})),[e])}},575650:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(e){let{targetRecordId:t,style:r}=e;const i=(0,o(56366).K8)((()=>o(545206).A.state[t]),[t]),a=(0,o(401497).IS)((()=>({warning:{maxWidth:200,margin:8}})),[]);if(!i)return null;const{taskStatus:s,completeBlocks:l,totalBlocks:c}=i,d=(c??0)>3e4,u=(0,n.jsx)(o(125565).A,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,style:a.warning,children:(0,n.jsx)(o(959013).sA,{defaultMessage:"Looks like you're trying to move a lot of content ({blocks, plural, one {# block} other {# blocks}})! Please do not refresh your page or close the window until the process completes.",id:"moveOrDuplicateProgress.warning",values:{blocks:c}})}),p=(()=>{switch(s){case"not_started":case"failure":return;case"success":return 100;case"in_progress":if("number"!=typeof l||"number"!=typeof c)return;if(0===c)return;const e=l/c;return 1===e?99:Math.round(100*e)}})();return"number"!=typeof p?d?u:null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o(78901).z,{percentage:p,style:r}),d?u:void 0]})}},576250:(e,t,o)=>{o.d(t,{y:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("alias",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M13.1475 10.5869V3.72363C13.1475 3.25195 12.833 2.93066 12.3477 2.93066H5.48438C5.02637 2.93066 4.70508 3.27246 4.70508 3.67578C4.70508 4.07227 5.05371 4.40039 5.46387 4.40039H7.89746L10.8438 4.30469L9.59961 5.39844L3.08496 11.9199C2.92773 12.0771 2.8457 12.2686 2.8457 12.46C2.8457 12.8564 3.20801 13.2256 3.61816 13.2256C3.80957 13.2256 3.99414 13.1504 4.15137 12.9932L10.6729 6.47168L11.7803 5.22754L11.6641 8.05762V10.6074C11.6641 11.0176 11.9922 11.373 12.4023 11.373C12.8057 11.373 13.1475 11.0312 13.1475 10.5869Z"})})},576590:(e,t,o)=>{o.r(t),o.d(t,{executeAiConnectorsUpsellAction:()=>Z,getGithubStatus:()=>q,getJiraAIConnectionStatusAction:()=>W,getJiraSyncControlAction:()=>K,getMicrosoftTeamsAIConnectorStatusAction:()=>X,getMicrosoftTeamsSyncControlsAction:()=>J,navigateToAIConnectorOnboarding:()=>L,navigateToGithubAIConnectorOnboarding:()=>U,navigateToGoogleDriveUniversalScreen:()=>E,navigateToJiraUniversalScreen:()=>D,navigateToMicrosoftTeamsUniversalScreen:()=>N,navigateToSharepointAIConnectorOnboarding:()=>F,navigateToSlackUniversalQnAOnboarding:()=>R,openConnectorInProgressModal:()=>Q,resetAiConnectorStatus:()=>V,resetAllAiConnectors:()=>j,setAssistantOnboardingPhase:()=>M,setLastExposedToQnaAtToCurrentTimestamp:()=>P,setLastUsedAIWriterAtToCurrentTimestamp:()=>B,setMicrosoftTeamsSyncControlsAction:()=>ee,setQnaOnboardingPhase:()=>T,startJiraBulkIngestionAction:()=>G,startJiraEditFlow:()=>$,startMicrosoftTeamsBulkIngestionAction:()=>te,updateGithubAIConnectorStatus:()=>H,updateGoogleDriveQnAConnectionState:()=>Y,updateSlackQnAConnectionState:()=>z});o(898992),o(803949);var n=()=>o(206267),r=()=>o(386164),i=()=>o(441738),a=()=>o(534177),s=()=>o(449506),l=()=>o(209660),c=()=>o(436572),d=()=>o(317909),u=()=>o(755199),p=()=>o(140022),m=()=>o(36760),g=()=>o(235195),f=()=>o(174636),v=()=>o(972435),h=()=>o(291075),_=()=>o(973229),b=()=>o(963702),y=()=>o(351360),S=()=>o(246231),w=()=>o(756315),k=()=>o(99254),I=()=>o(991249),A=()=>o(749240),x=()=>o(656633),C=()=>o(634877);function T(e,t){const{phase:o,transactionUserAction:n,userSettingsStore:r}=t;d().createAndCommit({environment:e,userAction:n,canUndo:!0,perform:e=>{u().mJ({userSettingsStore:r,transaction:e,data:{ai_qna_intro_onboarding_phase:o}})}})}function M(e,t){const{phase:o,transactionUserAction:n,userSettingsStore:r}=t;d().createAndCommit({environment:e,userAction:n,canUndo:!0,perform:e=>{u().mJ({userSettingsStore:r,transaction:e,data:{ai_assistant_onboarding_phase:o,ai_assistant_onboarding_phase_last_set_at:Date.now()}})}})}function P(e,t){const{userSettingsStore:o}=t;d().createAndCommit({environment:e,userAction:"aiQnaActions.setLastExposedToQnaAtToCurrentTimestamp",canUndo:!0,perform:e=>{u().mJ({userSettingsStore:o,transaction:e,data:{last_exposed_to_ai_qna_at:Date.now()}})}})}function B(e,t){const{userSettingsStore:o}=t;d().createAndCommit({environment:e,userAction:"aiQnaActions.setLastUsedAIWriterAtToCurrentTimestamp",canUndo:!0,perform:e=>{u().mJ({userSettingsStore:o,transaction:e,data:{last_used_ai_writer_at:Date.now()}})}})}function R(e){const{analyticsFrom:t}=e,o=e.sessionId??n().JW();f().R.setState({...f().R.state,currentScreen:"introduction",analyticsFrom:t,sessionId:o})}function E(e){const{screenToShow:t,analyticsFrom:o}=e,r=e.sessionId??n().JW();w().d.setState({...w().d.state,analyticsFrom:o,sessionId:r,screenToShow:t})}function D(e){const{analyticsFrom:t,screenToShow:o}=e,r=e.sessionId??n().JW();k().y.setState({...k().y.state,analyticsFrom:t,screenToShow:o,sessionId:r})}function N(e){const{currentScreen:t,analyticsFrom:o,sessionId:n}=e;b().F.setState({...b().F.state,currentScreen:t,analyticsFrom:o??b().F.state.analyticsFrom,sessionId:n??b().F.state.sessionId})}function L(e){const{connector:t,...o}=e;if("slack"===t)R(o);else if("jira"===t){const e=k().y.state;if("not_started"===e.jiraSyncState)D({...o,screenToShow:"info_screen"});else{if("pending_selection"!==e.jiraSyncState)return;D({...o,screenToShow:"connection_complete_screen"})}}else if("google_drive"===t){"not_started"===w().d.state.initialSyncState&&E({...o,screenToShow:"info_screen"})}else"github"===t?U(o):"sharepoint"===t?F(o):(0,a().HB)(t)}function F(e){_().O.setState({..._().O.state,isDisconnecting:!1})}function U(e){const{analyticsFrom:t}=e,o=e.sessionId??n().JW();h().o.setState({...h().o.state,currentScreen:"introduction",analyticsFrom:t,sessionId:o})}const O={slack:()=>f().R.reset(),google_drive:()=>w().d.reset(),jira:()=>k().y.reset(),github:()=>h().o.reset(),sharepoint:()=>null};function V(e){(0,O[e])()}function j(){Object.values(O).forEach((e=>e()))}async function z(e){const{environment:t,spaceId:o}=e,n=await s().callApi({eventName:"getSlackBulkIngestionStatus",environment:t,data:{spaceId:o},headers:(0,r().WS)({spaceId:o})});"success"===n.type&&f().R.setState({...f().R.state,...n.data,ingestionProgress:n.data.isPublicSync?n.data.ingestionProgress||1:void 0});const i=await s().callApi({eventName:"canUserQuerySlack",environment:t,data:{spaceId:o}});"success"===i.type&&f().R.setState({...f().R.state,canQuery:i.data.canQuery});const a=await s().callApi({eventName:"getConnectedAppsForUniversalQna",environment:t,data:{spaceId:o},headers:(0,r().WS)({spaceId:o})});"success"===a.type&&(f().R.setState({...f().R.state,connectedApps:a.data.connectedApps,isLoaded:!0}),g().A.updateAppsConnectionData(a.data.appsData??[]))}function q(e){var t;return null!==(t=e.githubOrg)&&void 0!==t&&t.isSyncComplete?"completed":e.isConnected?"in_progress":"not_started"}async function H(e){const{environment:t,spaceId:o}=e,n=await s().callApi({eventName:"getGithubAIConnectorStatus",environment:t,data:{spaceId:o}});"success"===n.type&&h().o.setState({...h().o.state,status:q(n.data),isConnected:n.data.isConnected,githubOrg:n.data.githubOrg,isPersonalAuthComplete:n.data.isPersonalAuthComplete,isDisconnecting:n.data.isDisconnecting,isLoaded:!0})}async function W(e){const{environment:t,spaceId:o}=e,n=await s().callApi({eventName:"getJiraAIConnectionStatus",environment:t,data:{spaceId:o},headers:(0,r().WS)({spaceId:o})});if("success"===n.type)return k().y.setState({...k().y.state,jiraSiteId:n.data.jiraSiteId??"",jiraSyncState:n.data.connectionState.status,jiraSyncProgress:n.data.connectionState.percentageComplete,jiraSiteUrl:n.data.jiraSiteUrl??"",isDisconnecting:"disconnecting"===n.data.connectionState.status,isLoaded:!0}),n.data}async function K(e){const{environment:t,spaceId:o,jiraSiteId:n}=e,r=await s().callApi({eventName:"getSyncControlsForJiraConnector",environment:t,data:{spaceId:o,jiraSiteId:n}});if("success"===r.type)return k().y.setState({...k().y.state,syncControl:r.data.syncControl}),r}async function G(e){const{environment:t,spaceId:o,jiraSiteId:n,sessionId:r,exclusionList:i,inclusionList:a}=e,l=await s().callApi({eventName:"startJiraBulkIngestion",environment:t,data:{spaceId:o,jiraSiteId:n,sessionId:r,exclusionList:i,inclusionList:a}});if("success"===l.type)return c().D6({label:v().A.getIntl().formatMessage({defaultMessage:"Jira sync started. This can take up to 36 hours.",id:"jira.sync.started"}),position:"bottom"}),k().y.setState({...k().y.state,jiraSyncState:"in_progress",jiraSyncProgress:1}),l;c().D6({label:v().A.getIntl().formatMessage({defaultMessage:"Something went wrong. Please try again.",id:"jira.sync.failed"}),position:"bottom"})}async function $(e){const{environment:t,spaceId:o,jiraSiteId:n,exclusionList:r,inclusionList:i}=e,a=await s().callApi({eventName:"startJiraEditBulkIngestion",environment:t,data:{spaceId:o,jiraSiteId:n,inclusionList:i,exclusionList:r}});if("success"===a.type)return a.data.patchSuccess?(k().y.setState({...k().y.state,jiraSyncState:"editing",jiraSyncProgress:100}),c().D6({label:v().A.getIntl().formatMessage({defaultMessage:"Project sync list updated, sync started in background.",id:"jira.edit.success"}),position:"bottom"})):c().D6({label:v().A.getIntl().formatMessage({defaultMessage:"No changes were detected.",id:"jira.edit.noChanges"}),position:"bottom"}),a;c().D6({label:v().A.getIntl().formatMessage({defaultMessage:"Something went wrong. Please try again.",id:"jira.edit.failed"}),position:"bottom"})}async function Y(e){const{environment:t,spaceId:o,showSnackbarOnError:n}=e,i=await s().callApi({eventName:"getGoogleDriveSyncProgress",environment:t,data:{spaceId:o},headers:(0,r().WS)({spaceId:o})});if("success"!==i.type){if(n)return;return i.status>=400&&i.status<500?void(0,C().Rl)():void(0,C().NK)()}w().d.setState({...w().d.state,initialSyncState:(0,m().HB)(i.data.status),isDisconnecting:"disconnecting"===i.data.status,isEditing:"editing"===i.data.status,syncProgress:i.data.status,syncCurrent:i.data.current,syncTotal:i.data.total,ingestionProgress:i.data.ingestionProgress,isLoaded:!0})}function Q(e){const{environment:t,connector:o,from:n}=e;S().l.setState({...S().l.state,open:!0,modal:"progress",connector:o}),(0,p().trackConnectorInProgressModalOpened)({environment:t,connector:o,from:n})}function Z(e){var t;const{environment:o,connector:r,analyticsFrom:s}=e,c=y().default.state.currentSpaceStore;if(!c)return;const d=(null===(t=A().subscriptionDataStoreInstance.state)||void 0===t?void 0:t.addOns)??[],u=(0,i().GI)(d),p=(0,x().vp)(o,c.id),m=c.canAdmin();if(u)if("generic"===r)l().Ow({openedFrom:s,currentTab:"integrations",subtab:"workspace_connections"});else if("jira"===r||"slack"===r||"github"===r||"google_drive"===r||"sharepoint"===r){L({connector:r,analyticsFrom:s,sessionId:n().JW()})}else(0,a().HB)(r);else{if("generic"===r)return void I().K(o,{from:s,upsell:{type:"product",product:"ai",limit:{type:"none"}}});if("slack"===r||"jira"===r||"github"===r||"sharepoint"===r||"google_drive"===r)if(m)p?l().Ow({openedFrom:s,currentTab:"plans"}):(I().K(o,{from:s,upsell:{type:"product",product:"ai",limit:{type:"none"}}}),g().A.setState({...g().A.state,connectorTriggeringUpsell:r,upsellTriggeredAt:Date.now()}));else{L({connector:r,analyticsFrom:s,sessionId:n().JW()})}else(0,a().HB)(r)}}async function X(e){const{environment:t,spaceId:o}=e,n=await s().callApi({eventName:"getMicrosoftTeamsAIConnectorStatus",environment:t,data:{spaceId:o},headers:(0,r().WS)({spaceId:o})});if("success"!==n.type)return;const i=n.data,{microsoftTenantId:a,syncProgressPercentage:l,connectionStatus:c}=i;return b().F.setState({...b().F.state,microsoftTenantId:a,connectionStatus:c,syncProgressPercentage:l,isLoaded:!0}),b().F.getState()}async function J(e){const{environment:t,spaceId:o,withSyncControlOptions:n}=e,i=await s().callApi({eventName:"getMicrosoftTeamsSyncControls",environment:t,data:{spaceId:o,withSyncControlOptions:n},headers:(0,r().WS)({spaceId:o})});if("success"===i.type)return i.data}async function ee(e){const{environment:t,spaceId:o,syncControls:n}=e;(await s().callApi({eventName:"setMicrosoftTeamsSyncControls",environment:t,data:{spaceId:o,syncControls:n},headers:(0,r().WS)({spaceId:o})})).type}async function te(e){const{environment:t,spaceId:o}=e,n=await s().callApi({eventName:"startMicrosoftTeamsBulkIngestion",environment:t,data:{spaceId:o}});if("success"===n.type)return c().D6({label:v().A.getIntl().formatMessage({defaultMessage:"Microsoft Teams sync started. This can take up to 36 hours.",id:"microsoftTeams.sync.started"}),position:"bottom"}),await X({environment:t,spaceId:o}),n;c().D6({label:v().A.getIntl().formatMessage({defaultMessage:"Something went wrong. Please try again.",id:"microsoftTeams.sync.failed"}),position:"bottom"})}},578136:(e,t,o)=>{o.d(t,{D:()=>i,X:()=>a});var n=()=>o(155959),r=()=>o(508496);function i(e){const{isMobileNative:t}=e,o=e.disableExposureLogging??!1;return t?(0,n().T)("supportsPosts"):"on"===r().default.getEligibleGroup({experimentId:"posts_prototype",defaultGroup:"control",disableExposureLogging:o})}function a(e){const t=e.disableExposureLogging??!1;return"on"===r().default.getEligibleGroup({experimentId:"feed_collection_view",defaultGroup:"control",disableExposureLogging:t})}},578872:(e,t,o)=>{o.d(t,{GN:()=>d,LC:()=>p,Nt:()=>m,UP:()=>u,Vg:()=>h,ZV:()=>f,hn:()=>v,kx:()=>b,mg:()=>_,ue:()=>g});o(944114),o(898992),o(672577);var n=()=>o(433847),r=()=>o(68263),i=()=>o(179034),a=()=>o(108944),s=()=>o(562800),l=()=>o(792415),c=()=>o(630116);function d(e){const t=e.getSpaceStore();if(!t)return;const o=t.id,s=a().E(e);let l;const d=n().ch(s);for(const n of d){const{from:e,permissions:a}=n;if(e.table===i().ev){if(a.find((e=>(0,r().W8)(e)))){const n=e.blockId,r=c().sk.createChildStore(t,{id:n,table:i().ev,spaceId:o});l=r;if(r.getSiteStore())return r}}}return l}function u(e){var t;const o=null===(t=d(e))||void 0===t?void 0:t.getSiteStore();if(o&&o.isDefined()){const t=null==o?void 0:o.getDomainId(),n=s().Ue(e.getSpaceStore(),t);return n?n.id:void 0}}function p(e){var t;const o=null===(t=d(e))||void 0===t?void 0:t.getSiteStore();if(o&&o.isDefined()){const t=null==o?void 0:o.getDomainId();return s().Ue(e.getSpaceStore(),t)}}function m(e){var t;const{publicPageData:o}=l().A.state;if(!o)return!1;if(o.spaceId!==e.getSpaceId())return!0;const n=null===(t=p(e))||void 0===t?void 0:t.domain_name;return!(!n||!o.publicDomainName||o.publicDomainName===n)}function g(e,t,o,n,i){const a=i?[...i]:[];return o||a.push("search"),t&&a.push("duplicate"),r().ok(e.role)&&a.push("comment"),r().p2(e.role)&&a.push("edit"),a.push("more"),n||a.push("signUpOrLogIn"),a}function f(e,t){const o=null==e?void 0:e.getSiteStore();if(!o)return t.allow_search_engine_indexing;return void 0!==o.isSearchEngineIndexingEnabled()?o.isSearchEngineIndexingEnabled():t.allow_search_engine_indexing}function v(e){var t;const o=d(e),n=null==o?void 0:o.getSiteStore();return!!n&&(!n.isDefined()||(null===(t=n.getHeader())||void 0===t?void 0:t.hideWatermark))}function h(e){var t;const o=d(e),n=null==o?void 0:o.getSiteStore();return!!n&&(!n.isDefined()||(null===(t=n.getHeader())||void 0===t?void 0:t.hideSearch))}function _(e,t){var o;const n=null===(o=e.getSpaceStore())||void 0===o?void 0:o.canAdmin(),r=b(e,t);return Boolean(!r||n)}function b(e,t){var o;const n=s().Ue(e.getSpaceStore(),null===(o=t.getSiteStore())||void 0===o?void 0:o.getDomainId());return n&&n.getPublicHomePage()===e.id}},579627:(e,t,o)=>{o.d(t,{YD:()=>fe,wy:()=>ke,eP:()=>be,sQ:()=>Se,P8:()=>ge,zE:()=>ve,wW:()=>me,J4:()=>we,zP:()=>se,Wi:()=>le,wd:()=>de,dy:()=>ae,bo:()=>ce});o(944114),o(898992),o(354520),o(672577),o(803949),o(581454),o(737550);var n=()=>o(908006),r=()=>o(857639),i=()=>o(416845),a=()=>o(206267),s=()=>o(402390),l=()=>o(433847),c=()=>o(68263),d=()=>o(728272),u=()=>o(824862),p=()=>o(426302),m=()=>o(161479),g=()=>o(96689),f=()=>o(296900),v=()=>o(848538),h=()=>o(854150),_=()=>o(798880),b=()=>o(456328),y=()=>o(319625),S=()=>o(496603),w=()=>o(534177),k=()=>o(37433),I=()=>o(680074),A=()=>o(898486),x=()=>o(594794),C=()=>o(972435),T=()=>o(108944),M=()=>o(731320),P=()=>o(743260),B=()=>o(299545),R=()=>o(437622),E=()=>o(646736),D=()=>o(406792),N=()=>o(590604),L=()=>o(437487),F=()=>o(351360),U=()=>o(57605),O=()=>o(508496),V=()=>o(151059),j=()=>o(630116),z=()=>o(486130),q=()=>o(224701),H=()=>o(134217),W=()=>o(10984),K=()=>o(749240),G=()=>o(952710),$=()=>o(848237),Y=()=>o(134696),Q=()=>o(701763),Z=()=>o(966505),X=()=>o(946141),J=()=>o(989423);function ee(e,t){J().vd(e,"restore_permissions",t)}var te=()=>o(449506),oe=()=>o(901389),ne=()=>o(246826),re=()=>o(317909);const ie=(0,o(959013).YK)({preventFullPageAccessDeletion:{id:"permissionsActions.preventRemovingAllFullAccess.message",defaultMessage:"Please give someone else Full Access before removing this permission."},preventUserOrGroupDeletion:{id:"permissionsActions.preventUserOrGroupDeletion.message",defaultMessage:"At least one person or group must have access."},confirmUpgradeMessage:{defaultMessage:"To add members to your workspace, you need to switch it to the Team plan. You will be charged a prorated amount based on your current billing interval and account balance.",id:"permissions.confirmDialog.upgradeToTeamWorkspace.message"},confirmUpgradeButtonLabel:{defaultMessage:"Upgrade to Team workspace",id:"permissions.confirmDialog.upgradeToTeamWorkspace.confirmButton.label"}});function ae(e){const{environment:t,spaceStore:o,permissionItems:n,transaction:r,from:i,skipAnalytics:a,pagePermissionChangeLocation:s}=e;if(!o.isDefined())return!1;const l=n.filter(c().B2).map((e=>(0,v().BM)(e,o.id))),d=n.filter((e=>(0,c().P3)(e))).map((e=>(0,f().H5)(e,o.id)));a||(l.forEach((e=>{Q().sY({environment:t,spaceUser:e,from:i})})),d.forEach((e=>{Q().W7({environment:t,spaceBot:e,from:i})})));for(const c of l)re().applyOperation({store:(0,E().dp)(o,c.user_id),operation:{pointer:{table:v().aJ,id:c.id,spaceId:c.space_id},command:"update",path:[],args:c},transaction:r});for(const c of d)re().applyOperation({store:(0,E().Ts)(o,c.bot_id),operation:{pointer:{table:f().m3,id:c.id,spaceId:c.space_id},command:"update",path:[],args:c},transaction:r});return r.postSubmitCallbacks.push((async o=>{Q().Ah(t,{status:Boolean(o)?"fail":"success",location:s,permission_items:n}),o||await q().Ow(t),e.metric&&D().default.DO_NOT_USE_measureLegacy(e.metric,{environment:t})})),!0}function se(e){return de(e)}function le(e){return de(e)}function ce(e){return de(e)}function de(e){const{environment:t,store:o,permissionItems:i,transaction:a,skipAnalytics:s,pagePermissionChangeLocation:u,fromPermissionWrapper:p,skipGuestLimitValidation:f,flowId:h}=e;if(!f){if((0,M().YN)(e))return!1}if(!o.isDefined())return!1;const b=o.getPermissionItems();let y=[...b];const{id:I}=t.currentUser,A=o instanceof j().Bv&&o.getParentTable()===g().NX,x=o instanceof j().Bv&&(A||o.isRestricted()),P=y.some((e=>(c().B2(e)||c().Ds(e))&&"editor"===e.role));s||(o instanceof j().Bv?Q().e1({environment:t,store:o,newItems:i,location:u,inSudoMode:a.useSudoMode,fromPermissionWrapper:p,flowId:h}):o instanceof j().h4?i.forEach((e=>{Q().Zf(t,{item:e,teamStore:o})})):o instanceof j().md||(0,w().HB)(o)),y=y.filter((e=>!i.some((t=>l().nK(e,t)))));for(const n of i)y.push(n);y=y.filter((e=>"none"!==c().Lw(e)));const B=Boolean(i.find((e=>"user_permission"===e.type&&e.user_id===I&&!c().Km(e.role))));if(o instanceof j().Bv&&x&&I){const e=T().pp(o),t=T().Uo(o),n=null==t?void 0:t.isOwner(I),r=null==t?void 0:t.isNonGuestMember(I,z()._.getSpacePermissionGroupIds({userId:I,spaceId:o.getSpaceId()})),s=e?(0,v().i1)({userId:I,spaceId:e.id}):void 0,l=s?o.getRecordModel(s):void 0,u=Boolean(null==l?void 0:l.isMember()),p=i.find((e=>"space_permission"===e.type&&c().Tt(e.role))),m=i.find((e=>"space_permission"===e.type&&!c().Tt(e.role))),g=I?{table:_().oo,id:I}:void 0,{actorMemberships:f}=(0,N().uI)({actorPointers:new(d().d)(void 0===g?[]:[g]),recordPointers:new(d().d)([o.pointer]),getRecordModel:o.getRecordModel});if(e&&e.canEdit()&&0===(0,k().zI)()){const t=e.getPagesStore();p?re().applyOperation({transaction:a,store:t,operation:{pointer:t.pointer,path:t.path,command:"listAfter",args:{id:o.id}}}):m&&re().applyOperation({transaction:a,store:t,operation:{pointer:t.pointer,path:t.path,command:"listRemove",args:{id:o.id}}})}if(!B){y.some((o=>{var i;return!("space_permission"!==o.type||!c().Km(o.role)||!u)||(!("user_permission"!==o.type||!c().Km(o.role)||o.user_id!==I)||(!("group_permission"!==o.type||!c().Km(o.role)||!Boolean(g&&e&&(null===(i=f.getActorMembership(g))||void 0===i?void 0:i.getGroupRole({groupId:o.group_id,spaceId:e.id}))))||(!!((0,c().gl)(o)&&c().Km(o.role)&&(null==t?void 0:t.id)===o.team_id&&r)||!!((0,c().nl)(o)&&c().Km(o.role)&&(null==t?void 0:t.id)===o.team_id&&n))))}))||a.useSudoMode||(y=y.filter((e=>!("user_permission"===e.type&&e.user_id===I))),y.push({type:"user_permission",user_id:I,role:"editor"}))}}if(!y.some((e=>{const t=c().Lw(e);return c().Km(t)}))&&x)return n().default.afterNextFlush((()=>{oe().f1(C().A.formatMessage(ie.preventFullPageAccessDeletion))})),!1;const R=y.some((e=>(c().B2(e)||c().Ds(e))&&"editor"===e.role));if(A&&P&&!R)return n().default.afterNextFlush((()=>{oe().f1(C().A.formatMessage(ie.preventUserOrGroupDeletion))})),!1;const E=(0,j().G_)(o,o.pointer,"permissions"),L=[];for(const n of b){!y.find((e=>l().nK(n,e)))&&c().hI(n)&&(L.push({...n,role:"none"}),"trusted_domain_permission"===n.type&&r().log({level:"warning",from:"permissionsActions.setPermissionItems",type:"oldPermissionItem",data:{miscDataToConvertToString:{spaceId:(0,m().e)(o.pointer.spaceId),permission_item:n}}}))}for(const n of y){const e=b.find((e=>l().nK(n,e)));if(c().hI(n)&&(!e||!S().n4(e,n))&&(L.push(n),"trusted_domain_permission"===n.type)){const e=(0,m().e)(o.pointer.spaceId),t=O().default.getConfigKey("trusted_domains_space_ids","space_ids");e&&!t.includes(e)&&(n.source="non_alpha_set_permission_items",r().log({level:"warning",from:"permissionsActions.setPermissionItems",type:"newPermissionItem",data:{miscDataToConvertToString:{spaceId:e,permission_item:n}}}))}}let F=[];const U=T().KA(o);if(o instanceof j().Bv&&!o.isRestricted()&&U&&U instanceof j().Bv){const e=(0,M().i0)(U);F=L.map((t=>e.find((e=>S().n4(e.permissionItem,t)))?{...t,role:"none"}:t))}else F=L;for(const n of F)re().applyOperation({store:E,operation:{pointer:E.pointer,command:"setPermissionItem",path:E.path,args:n},transaction:a});return a.postSubmitCallbacks.push((async o=>{Q().Ah(t,{status:Boolean(o)?"fail":"success",location:u,permission_items:F}),o||await q().Ow(t),e.metric&&D().default.DO_NOT_USE_measureLegacy(e.metric,{environment:t})})),!0}function ue(e){var t;const{environment:o,store:n,permissionItems:r,transaction:i,inviteFlowId:a,inviteMessage:s,inviteOrigin:l,disable_invite_email:c}=e,d=null===(t=F().default.state.currentSpaceStore)||void 0===t?void 0:t.id,{id:u}=o.currentUser;for(const p of r)if(d&&"user_permission"===p.type&&p.invite_id){const{inviteeId:e,inviteeTable:t}=pe({item:p,spaceId:d}),o={id:p.invite_id,version:1,flow_id:a,space_id:d,target_id:n.id,target_table:n.table,inviter_id:u,inviter_table:_().oo,invitee_id:e,invitee_table_or_group:t,message:s,created_time:Date.now(),attributes:{permission:p,origin_type:l,disable_invite_email:c}};ne().zv({store:(0,j().Oo)(n,{table:"invite",id:o.id,spaceId:d}),data:o,transaction:i})}return i.postSubmitCallbacks.push((e=>{Y().R2(o,{status:Boolean(e)?"fail":"success",origin:l})})),!0}function pe(e){const{item:t,spaceId:o}=e;return c().B2(t)?{inviteeId:t.user_id,inviteeTable:_().oo}:c().P3(t)?{inviteeId:t.bot_id,inviteeTable:u().GP}:c().Ds(t)?{inviteeId:t.group_id,inviteeTable:p().gp}:c().Lg(t)?{inviteeId:o,inviteeTable:g().NX}:c().gl(t)?{inviteeId:t.team_id,inviteeTable:h().yK}:{}}function me(e){const{environment:t,store:o,permissionItem:n,transaction:i,shouldInherit:a,fromPermissionWrapper:s,trustedDomainsLoggingData:d}=e;if(!o.isDefined())return;const u=[];if(a){const e=(0,M().i0)(o).map((e=>e.permissionItem)).filter((e=>!n||!l().nK(e,n)));for(const t of e){let e=!1;if("trusted_domain_permission"===t.type){e=!0;const n=(0,m().e)(o.pointer.spaceId),i=O().default.getConfigKey("trusted_domains_space_ids","space_ids");n&&!i.includes(n)&&(t.source="non_alpha_inherited_permission_items",r().log({level:"warning",from:"permissionsActions.restrictPermission",type:"TrustedDomainPermissionChange",spaceId:n,data:{miscDataToConvertToString:{blockId:o.id,permissionItem:t,trustedDomainsLoggingData:d}}}))}c().hI(t)&&(o instanceof j().Bv&&!o.isCollectionView()&&!c().P3(t)&&"content_only_editor"===t.role?u.push({...t,role:"read_and_write"}):e||u.push(t))}}n&&(u.push(n),o instanceof j().Bv?Q().e1({environment:t,store:o,newItems:[n],fromPermissionWrapper:s}):o instanceof j().md||(0,w().HB)(o));const p=t.currentUser.id,g=S().hS([...u,...o.getPermissionItems()||[],{type:"restricted_permission"}],l().I$);!p||i.useSudoMode||(0,N().JF)({store:o,userId:p,updatedPermissionItems:g})||u.push({type:"user_permission",user_id:p,role:"editor"});const f=o.getPermissionItemsStore();for(const r of u)re().applyOperation({store:f,operation:{pointer:f.pointer,command:"setPermissionItem",path:f.path,args:r},transaction:i});re().applyOperation({store:f,operation:{pointer:f.pointer,command:"setSingletonPermissionItem",path:f.path,args:{singletonPermissionItem:{type:"restricted_permission"},set:!0}},transaction:i}),function(e,t){J().vd(e,"restrict_permissions",t)}(t,{type:"none"===(null==n?void 0:n.role)?"remove":"narrow"}),i.postSubmitCallbacks.push((e=>{e||q().Ow(t)}))}function ge(e){const{environment:t,store:o,transaction:n,from:r,shareMenuSessionId:i}=e;if(!o.isDefined())return;const a=o.getPermissionItems(),s=T().KA(o),c=s?l().wD(T().E(s)):[],d=l().FV(o.getModel(),a,c),u=o.getPermissionItemsStore();for(const l of d)re().applyOperation({store:u,operation:l,transaction:n});ee(t,{using_admin_api:!1,from:r,share_menu_session_id:i}),n.postSubmitCallbacks.push((e=>{e||q().Ow(t)}))}async function fe(e){const{environment:t,store:o,from:n,shareMenuSessionId:r}=e,{currentSpaceStore:i}=F().default.state;if(i){const e=i.id,a=o.id,s=await te().callApi({eventName:"spaceAdminRestoreAccess",environment:t,data:{spaceId:e,blockId:a}});ee(t,{using_admin_api:!0,from:n,share_menu_session_id:r}),"failed"===s.type&&oe().Qg(s)}}function ve(e){const{environment:t,store:o,transaction:n}=e,r=o.getPermissionItems();if(!o.isTopLevelTeamPage()||0===r.length)return;const i=r.filter((e=>c().P3(e)));ne().zv({store:o,transaction:n,data:{permissions:i}}),X().h2(t,{store:T().Uo(o)})}function he(e){const t=e.inviteTargets[0];return!(!t||"bot"!==t.type)}function _e(e){return c().B2(e.permissionItem)&&(0,P().yi)(e.inviteTarget)}async function be(e){const{environment:t,isOnboarding:o,invite:n}=e,r=e.store.getSpaceId();if(0===e.inviteTargets.length||!r)return{success:!0,invitedUsers:{},requestedUsers:{}};const i=K().subscriptionDataStoreInstance.state,a=i?await(0,H().$)(t,r,i):1;let s;if(he(e))if((0,B().Yu)(e.store)){const t=e.inviteRole;s=e.inviteTargets.map((e=>({inviteTarget:e,permissionItem:{type:"bot_permission",role:t,bot_id:e.value.id}})))}else(0,B()._p)(e.store)?s=e.inviteTargets.map((e=>({inviteTarget:e,permissionItem:{type:"bot_permission",role:l().MD(e.value.capabilities),bot_id:e.value.id,parent_table:e.value.parent_table,parent_id:e.value.parent_id}}))):(0,w().HB)(e.store);else s=await async function(e){const{environment:t,inviteTargets:o,inviteRole:n}=e;return Promise.all(o.map((async o=>{if("newUser"===o.type){const e=await ye(t,o),r={type:"user_permission",role:n,user_id:e};return{inviteTarget:{...o,value:{...o.value,id:e}},permissionItem:r}}if("existingUser"===o.type){return{inviteTarget:o,permissionItem:{type:"user_permission",role:e.inviteRole,user_id:o.value.id}}}if("group"===o.type){return{inviteTarget:o,permissionItem:{type:"group_permission",role:e.inviteRole,group_id:o.value.group_id}}}(0,w().HB)(o)})))}({environment:t,inviteTargets:e.inviteTargets,inviteRole:e.inviteRole,data:i});const{toInvite:d,toRequest:u}=function(e,t){if(!((0,R().hN)(F().default.state.currentSpaceStore)&&e instanceof j().Bv))return{toInvite:t,toRequest:[]};const o=[],n=[];for(const r of t)_e(r)?o.push(r):n.push(r);return{toInvite:n,toRequest:o}}(e.store,s),m={};if(e.store instanceof j().Bv&&u.length>0){const o=await async function(e){const{environment:t,permissionItems:o,inviteMessage:n,store:r}=e,i=await Promise.allSettled(o.map((async e=>te().callApi({eventName:"requestAccess",environment:t,data:{type:"guest-invite-request",block:{id:r.id,spaceId:r.getSpaceId()},forActorId:e.user_id,message:void 0,attributes:{role:e.role,inviteMessage:n}}}))));return!i.find((e=>"rejected"===e.status||"fulfilled"===e.status&&"failed"===e.value.type))}({environment:t,store:e.store,permissionItems:u.map((e=>e.permissionItem)),inviteMessage:n.inviteMessage});if(!o)return{success:!1};for(const e of u)m[e.inviteTarget.value.email]=e.permissionItem.user_id}if(0===d.length)return{success:!0,invitedUsers:{},requestedUsers:m};const g=d.map((e=>e.inviteTarget)),f=d.map((e=>e.permissionItem));let v,h;if(e.store instanceof j().Bv&&void 0!==(0,W().aV)(i))v=await async function(e){const{environment:t,store:o,permissionItems:n,invite:r}=e,i=o.getSpaceId();if(!i)return!1;const a=V().A.getData(t,{spaceId:i});if(!a)return!1;const s=(0,x().Gx)({environment:t,spaceId:i}),l=t.idCreator.getSpaceShortIdCreator(i,s),d=n.filter(c().B2).map((e=>({...e,invite_id:l.idInSavedSpace(p().Yx)}))),u=await te().callApi({eventName:"inviteGuestsToSpace",environment:t,data:{block:{id:o.id,spaceId:i},permissionItems:d}});if("failed"===u.type)return!1;const{serverCommitResult:m}=re().createAndCommit({userAction:"permissionsActions.saveInvites",environment:t,canUndo:!0,cellTarget:"main",perform:e=>{const{inviteFlowId:n,inviteMessage:i,inviteOrigin:a,disable_invite_email:s}=r;ue({environment:t,store:o,permissionItems:d,transaction:e,inviteFlowId:n,inviteMessage:(0,b().Hb)(i),inviteOrigin:a,disable_invite_email:s})}});await m;const g=n.filter(c().P3);g.length>0&&await we({environment:t,store:o,permissionItems:g,invite:r});return!0}({environment:t,store:e.store,permissionItems:f,invite:n});else try{await we({environment:t,store:e.store,sudoModeStore:e.sudoModeStore,permissionItems:f,invite:n}),v=!0}catch(P){v=!1,h=(0,y().A)(P)}if(!he(e)){var _;const o=e.store instanceof j().Bv?null===(_=e.store.getCollectionStore())||void 0===_?void 0:_.id:void 0,r=e.store instanceof j().Bv?e.store.getParentCollectionIdUpToTwoLevels():void 0;var S,k;if(v)Y().Jg(t,{role:e.inviteRole,is_space:e.store instanceof j().SL,invite_targets:g,is_onboarding:e.isOnboarding,invite_origin:n.inviteOrigin,permission_items:f,invite_message_length:(null===(S=n.inviteMessage)||void 0===S?void 0:S.length)??0,invite_flow_id:n.inviteFlowId,isProfessionalTeamUser:(0,I().YD)(),domainType:(0,I().FX)(),share_menu_session_id:L().Ay.state.sessionId,collection_id:o,parent_collection_id:r});else Y().J8(t,{error:h,role:e.inviteRole,is_space:e.store instanceof j().SL,invite_targets:g,is_onboarding:e.isOnboarding,invite_origin:n.inviteOrigin,permission_items:f,invite_message_length:(null===(k=n.inviteMessage)||void 0===k?void 0:k.length)??0,invite_flow_id:n.inviteFlowId,isProfessionalTeamUser:(0,I().YD)(),domainType:(0,I().FX)(),share_menu_session_id:L().Ay.state.sessionId,collection_id:o,parent_collection_id:r})}o||await q().Ow(t);const A={};g.forEach(((e,t)=>{var o;const n=f[t];"newUser"!==e.type&&"existingUser"!==e.type||null===(o=e.value)||void 0===o||!o.email||"user_permission"!==n.type||(A[e.value.email]=n.user_id)}));const C=i?await(0,H().$)(t,r,i):1,T=1===a&&C>1,M=r?U().A.getData(t,{spaceId:r}):void 0;if(T&&(null==M||!M.subscription)&&r){const e=await G().dB.trialActions.load();await e.applyMultiplayerReverseTrialIfEligible({spaceId:r,environment:t})}return{success:v,error:h,invitedUsers:A,requestedUsers:m}}async function ye(e,t){const o=(0,s().H)(C().A.getIntl()),n=t.value.email,r=await te().callApi({eventName:"createEmailUser",environment:e,data:{email:n,preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:o}});if("failed"===r.type){if((0,i().op)(r.error)){const e=(0,A().DX)(C().A.getIntl(),r.error);e?oe().f1(e):oe().c1(r.error.message)}else oe().c1(r.error.message);throw r.error}return r.data.userId}async function Se(e){let{environment:t,store:o,inviteTargets:n,inviteRole:r,createNewTeamFlowId:i}=e;const a=o.getSpaceId(),s=t.currentUser.id;if(0===n.length)return!0;if(!a||!s)return!1;const l=K().subscriptionDataStoreInstance.state,{teamMemberInfos:c,invitedMemberIds:d}=await async function(e){const{environment:t,inviteTargets:o,inviteRole:n}=e,r=[],i=[];for(const a of o){let e;if("newUser"===a.type){const o=await ye(t,a);e={entity_type:"user",type:n,user_id:o},r.push(o)}else"existingUser"===a.type?(e={entity_type:"user",type:n,user_id:a.value.id},"none"!==a.spaceRole&&"not_in_space"!==a.spaceRole||r.push(a.value.id)):"group"===a.type?e={entity_type:"group",type:"owner"===n?"owner":"member",group_id:a.value.group_id}:(0,w().HB)(a);i.push(e)}return{teamMemberInfos:i,invitedMemberIds:r}}({environment:t,inviteTargets:n,inviteRole:r,data:l}),u=await $().Zd({environment:t,teamMemberInfos:c,teamStore:o,isSettingDefaultTeam:!1,createNewTeamFlowId:i});return u&&(Z().KX(t,{invite_origin:"team_invite_overlay",domainType:(0,I().FX)(),new_workspace_member_count:d.length,new_workspace_member_ids:d}),await q().Ow(t)),u}async function we(e){var t;const{environment:o,store:n,sudoModeStore:r,permissionItems:i,invite:s,skipGuestLimitValidation:l}=e,c=n.getSpaceId()??(null===(t=F().default.state.currentSpaceStore)||void 0===t?void 0:t.id),d=(0,x().Gx)({environment:o,spaceId:c}),u=c?o.idCreator.getSpaceShortIdCreator(c,d):void 0,{serverCommitResult:m}=re().createAndCommit({userAction:"permissionsActions.savePermissionItems",environment:o,canUndo:!0,useSudoMode:"block"===n.table&&(null==r?void 0:r.shouldSaveTransactionWithSudoMode(n)),cellTarget:"main",perform:e=>{const t=i.map((e=>"user_permission"!==e.type?e:{...e,invite_id:(null==u?void 0:u.idInSavedSpace(p().Yx))||a().JW()})),{inviteFlowId:r,inviteMessage:c,inviteOrigin:d,disable_invite_email:m}=s;ue({environment:o,store:n,permissionItems:t,transaction:e,inviteFlowId:r,inviteMessage:(0,b().Hb)(c),inviteOrigin:d,disable_invite_email:m}),n instanceof j().SL?ae({environment:o,spaceStore:n,permissionItems:t,transaction:e,from:d}):n instanceof j().h4?ce({environment:o,store:n,permissionItems:t,transaction:e,from:d,skipGuestLimitValidation:l}):n instanceof j().Bv?se({environment:o,store:n,permissionItems:t,transaction:e,from:d,skipGuestLimitValidation:l}):(0,w().ub)(n)}});await m}function ke(e){const{store:t,transaction:o}=e;ne().zv({store:t,data:{permissions:null},transaction:o})}},581495:(e,t,o)=>{o.d(t,{Bg:()=>n().B,Rz:()=>r().R,eh:()=>i().e});var n=()=>o(106261),r=()=>o(120303),i=()=>o(652617)},582033:(e,t,o)=>{o.d(t,{p:()=>g});o(898992),o(581454),o(737550);var n,r=()=>o(857639),i=()=>o(449412),a=()=>o(496603),s=()=>o(229833),l=()=>o(763824),c=()=>o(720665),d=()=>o(141032),u=()=>o(118757),p=()=>o(227440),m=()=>o(620149);class g{constructor(e){this.debug=!1,this.shouldStopLooping=!1,this.attemptedToClaimSessions=!1,this.isProcessingTask=!1,this.lastTaskTimestamp=0,this.events=new(o(752196).A),this.waiter=void 0,this.transactionBackoffController=new(o(706742).x)(o(419101).Vp),this.retryReasonCounters={_total:0},this.errorCounts={},this.startTime=Date.now(),this.disableStorageManagerEstimate=!1,this.dependencies=void 0,this.transactionStore=void 0,this.sessionId=void 0,this.debugLogger=void 0,this.enableHeartbeatTimeout=void 0;const{dependencies:t,transactionStore:n,sessionId:i,debugLogger:a,enableHeartbeatTimeout:s}=e;this.dependencies=t,this.transactionStore=n,this.sessionId=i,this.debugLogger=a,this.enableHeartbeatTimeout=s,r().clientLogglyEnvironmentData.idbSessionId=this.sessionId,this.disableStorageManagerEstimate=o(508496).default.checkGate({gateName:"disable_storage_manager_estimate",disableExposureLogging:!0}),this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"createdIndexedDBTransactionQueue",data:{sessionId:this.sessionId}})}startLoop(){setTimeout((()=>{this.heartbeatLoop()}),1),setTimeout((()=>{this.txLoop()}),1),setTimeout((()=>{this.healthcheckLoop()}),1)}stopLoop(){this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"stopLoop",data:{message:"Stopping loop."}}),this.shouldStopLooping=!0}hasAttemptedToClaimSessions(){return this.attemptedToClaimSessions}logEmptyTaskForDebugging(e){this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"logEmptyTaskForDebugging",data:{message:`Task created by ${e} was empty.`}})}async enqueueTask(e){const t=await this.transactionStore.saveTask(this.sessionId,e,this.getIndexedDBTimeoutMs());if(this.lastTaskTimestamp=Math.max(e.timestamp,this.lastTaskTimestamp),t.error)throw this.incrementErrors(t.error,"enqueueTask"),this.debugLogger.flush(),r().log({level:"error",from:"IndexedDBTransactionQueue",type:"enqueueTask",error:(0,s().n6)(t.error)}),t.error;this.clearErrors("enqueueTask"),this.getWaitable(!1).trigger()}unpause(){this.transactionBackoffController.reset(),this.getWaitable(!1).trigger()}pause(){}getLastTaskTimestamp(){return this.lastTaskTimestamp}hasTasks(){return!!this.transactionStore&&this.transactionStore.hasTasks()}async hasTasksForUser(e){const t=await this.transactionStore.hasTasksForUser(e,this.getIndexedDBTimeoutMs());return t.error?(this.debugLogger.flush(),r().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.hasTasksForUser",error:(0,s().n6)(t.error)}),!1):t.value}async anySessionHasTasks(){const e=await this.transactionStore.anySessionHasTasks(this.getIndexedDBTimeoutMs());return e.error?(this.debugLogger.flush(),r().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.anySessionHasTasks",error:(0,s().n6)(e.error)}),!1):e.value}async drain(){return this.hasTasks()||this.isProcessingTask?new Promise((e=>{this.events.addOnceListener("drain",e)})):void 0}async awaitRecordTransaction(e){this.isPendingTransactionForRecord(e)&&await this.drain()}isPendingTransactionForRecord(e){return this.hasTask((t=>t.operations.some((t=>(0,o(696706).Z2)(t.pointer,e)))))}async reset(){await this.transactionStore.reset()}async clearForUser(e){await this.transactionStore.clearTasksForUser(e)}async checkObjectStores(){return await this.transactionStore.checkObjectStores()}async getTotalNumberOfTasks(){const e=await this.transactionStore.getTotalNumberOfTasks(this.getIndexedDBTimeoutMs());return e.error?(r().log({level:"error",from:"IndexedDBTransactionQueue",type:"getTotalNumberOfTasks",error:(0,s().n6)(e.error)}),0):e.value}startSyncing(){p().A.setState({...p().A.state,syncing:!0})}updateDependencies(e){this.dependencies=e}DEV_ONLY_deadlockDb(e){return this.transactionStore.DEV_ONLY_deadlockDb(e)}debugLog(){if(this.debug){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.log("IndexedDBTransactionQueue:",...t)}}async wait(e,t){await this.getWaitable(!1).wait(e,t),this.getWaitable(!0)}async txLoop(){for(;!this.shouldStopLooping;)try{await this.txLoopIteration(),this.clearErrors("txLoop")}catch(e){this.incrementErrors(e,"txLoop"),(0,u().Bc)(this.retryReasonCounters,"txLoopException"),this.debugLogger.flush(),r().log({level:"error",from:"IndexedDBTransactionQueue",type:"txLoopIteration",error:(0,s().n6)(e)}),i().Fg(e),await l().wR(15e3)}}async txLoopIteration(){const e=await this.getTasks();if(!e)return this.events.emit("drain"),void(await this.wait(...this.getMinMaxLoopDelay(!1)));const{tasks:t,sessionId:o}=e;if(0===t.length){const e=await this.transactionStore.deleteSession({currentSessionId:this.sessionId,sessionId:o});return void(e.error&&(this.debugLogger.flush(),r().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.deleteSession",data:{sessionId:o},error:(0,s().n6)(e.error)})))}this.startSyncing(),this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"handleSubmitTransactionAttempt",data:{message:`for session ${o}: attempt submitTransaction with ${t.length} tasks`,sessionId:o,taskIds:f(t)}}),await this.useSaveTransactionsApi(t,o);const n=this.hasTasks();n||(this.doneSyncing(),this.events.emit("drain")),await this.wait(...this.getMinMaxLoopDelay(n))}getMinMaxLoopDelay(e){return Boolean(e)?[u().qG,u().qG]:[u().qG,u().ke]}async useSaveTransactionsApi(e,t){const o=await this.dependencies.handleSaveTransactions(e);if(o.error){const{savedTasks:e,failedTasks:n,message:i,retryDelay:a,retryReason:l}=o.error;l?(0,u().Bc)(this.retryReasonCounters,l):this.retryReasonCounters={_total:0},e.length>0&&(this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"handlePartialSaveTransactionsSuccess",data:{message:`for session ${t}: will delete ${e.length} saved tasks`,taskIds:f(e),sessionId:t}}),await this.cleanupTasks(e,void 0)),n.length>0?(this.debugLogger.flush(),r().log({level:"warning",from:"IndexedDBTransactionQueue",type:"handleSaveTransactionsError",data:{message:`for session ${t}: ${i}`,taskIds:f(n),sessionId:t},error:(0,s().n6)(o.error)}),await this.cleanupTasks(n,o.error)):this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"handleSaveTransactionsRetryableError",data:{message:`for session ${t}: ${i}`,sessionId:t}}),a>0?await this.transactionBackoffController.backOffOnFailure(a-u().qG,o.error.retryReason):this.transactionBackoffController.reset()}else{const e=o.value;this.retryReasonCounters={_total:0},this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"handleSaveTransactionsSuccess",data:{message:`for session ${t}: will delete ${e.length} saved tasks`,taskIds:f(e),sessionId:t}}),await this.cleanupTasks(e,void 0),this.transactionBackoffController.reset()}}incrementErrors(e,t){this.debugLog("incrementErrors",e,t),void 0===this.errorCounts[t]?this.errorCounts[t]=1:this.errorCounts[t]+=1;const o=a().T9(Object.values(this.errorCounts))||0;this.errorCounts[t]===g.maxErrors+1&&(this.debugLogger.flush(),r().log({level:"error",from:"IndexedDBTransactionQueue",type:`maxErrors.${t}`,error:(0,s().n6)(e)})),o>g.maxErrors&&m().A.setState({...m().A.state,transactionQueueError:e}),e.type===d().yE&&this.events.emit("timeout")}clearErrors(e){this.errorCounts[e]&&delete this.errorCounts[e];(a().T9(Object.values(this.errorCounts))||0)<=g.maxErrors&&void 0!==m().A.state.transactionQueueError&&m().A.setState({...m().A.state,transactionQueueError:void 0})}async heartbeatLoop(){for(;!this.shouldStopLooping;)try{await this.heartbeat(),await l().wR(g.heartbeatInterval)}catch(e){this.debugLogger.flush(),r().log({level:"error",from:"IndexedDBTransactionQueue",type:"heartbeatLoopIteration",error:(0,s().n6)(e)}),await l().wR(g.heartbeatInterval)}}async heartbeat(){const e=this.enableHeartbeatTimeout?this.getIndexedDBTimeoutMs():void 0;{this.debugLog("heartbeat");const t=await this.transactionStore.heartbeat({currentSessionId:this.sessionId,isActive:!0,timeoutMs:e});if(t.error)return this.debugLogger.flush(),r().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.heartbeat",error:(0,s().n6)(t.error)}),void this.incrementErrors(t.error,"heartbeat");this.clearErrors("heartbeat")}{const t=Date.now()-g.claimSessionDelay,o=await this.transactionStore.claimSessions({currentSessionId:this.sessionId,staleSessionTimeoutMs:t,transactionTimeoutMs:e});if(o.error)return this.debugLogger.flush(),r().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.claimSessions",error:(0,s().n6)(o.error)}),void(o.error.type===d().yE&&this.incrementErrors(o.error,"claimSessions"));this.clearErrors("claimSessions"),this.attemptedToClaimSessions=!0}this.checkStorageQuota()}async checkStorageQuota(){if(this.disableStorageManagerEstimate)return;const e=await(0,o(161132).xs)();e&&(r().clientLogglyEnvironmentData.storageQuotaEstimate=e.quota,r().clientLogglyEnvironmentData.storageUsageEstimate=e.usage,(0,o(821062).A)(m().A.state.storageUsageEstimate,e)||m().A.setState({...m().A.state,storageUsageEstimate:e}))}doneSyncing(){p().A.setState({...p().A.state,syncing:!1})}hasTask(e){return this.transactionStore.hasTask(e)}async getTasks(){const e=await this.transactionStore.getTasks(this.sessionId,!0);if(e.error)throw e.error;return e.value}async cleanupTasks(e,t){for(const i of e)if(i.callback)try{i.callback(t)}catch(n){this.debugLogger.flush(),r().log({level:"error",from:"IndexedDBTransactionQueue",type:"cleanupTask",data:{taskId:i.id},error:(0,s().n6)(n)})}const o=await this.transactionStore.deleteTasks(e);o.error&&(this.debugLogger.flush(),r().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.deleteTasks",error:(0,s().n6)(o.error)}))}getWaitable(e){return this.waiter&&!e||(this.waiter=new(l().e2)),this.waiter}async healthcheckLoop(){for(;!this.shouldStopLooping;){try{var e;const t=await this.transactionStore.getTotalNumberOfTasks(g.defaultIndexedDBTimeoutMs),o={queue_type:"IndexedDBTransactionQueue",uptime:Date.now()-this.startTime,queue_size:t.error?void 0:t.value,error_type:null===(e=t.error)||void 0===e?void 0:e.type,is_considered_online:p().A.state.online,retry_reasons:this.retryReasonCounters};(o.queue_size&&o.queue_size>g.transactionSizeHealthcheckThreshold||o.error_type)&&(this.debugLogger.flush(),r().log({level:"info",from:"IndexedDBTransactionQueue",type:"transactionSizeHealthcheck",data:{miscDataToConvertToString:o}}),this.dependencies.handleHealthcheck(o))}catch(t){this.debugLogger.flush(),r().log({level:"error",from:"IndexedDBTransactionQueue",type:"healthcheckLoopIteration",error:(0,s().n6)(t)}),i().Fg(t)}await l().wR(g.healthcheckInterval)}}getIndexedDBTimeoutMs(){return g.defaultIndexedDBTimeoutMs}}function f(e){return e.map((e=>{var t;return null!==(t=e.debug)&&void 0!==t&&t.userAction?`${e.id} (${e.debug.userAction})`:e.id}))}n=g,g.heartbeatInterval=2.5*c().TD,g.claimSessionDelay=5*n.heartbeatInterval,g.healthcheckInterval=15*c().Xb,g.transactionSizeHealthcheckThreshold=1e3,g.defaultIndexedDBTimeoutMs=180*c().TD,g.maxErrors=5},582676:(e,t,o)=>{function n(e){let[t,o]=e;return Math.floor(function(e){let[t,o]=e;return Math.random()*(o-t)+t}([t,o]))}function r(e){if(!e)return Math.random;let t=function(e){let t=0;for(let o=0;o<e.length;o++){t=(t<<5)-t+e.charCodeAt(o),t|=0}return t}(e);return()=>{t|=0,t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}o.d(t,{HO:()=>n,Nx:()=>r})},583238:(e,t,o)=>{o.d(t,{AP:()=>g,JF:()=>u,QY:()=>f,Qs:()=>v,mX:()=>p,pH:()=>d});o(898992),o(354520),o(672577);var n=()=>o(617871),r=()=>o(498212),i=()=>o(529543),a=()=>o(836251),s=()=>o(437622),l=()=>o(508496),c=()=>o(53137);function d(){return c().A.bots.state.filter((e=>e.integration_id===n().io))}function u(e){const{environment:t,collectionContextType:o,spaceStore:n}=e;return!!n&&(!(0,s().dT)({env:"production",spaceStore:n})&&(!t.device.isMobile&&(!(0,a().w6)(t)&&("collectionTypedView"!==o&&"collectionSystemView"!==o))))}function p(){const{bots:e,externalAuthentications:t}=c().A,o=e.state.find((e=>e.integration_id===n().io));if(!o)return!1;const r=t.state.find((e=>e.parent_id===o.id));return Boolean(r)}const m="notion_calendar_csrf";async function g(e){const{environment:t,csrf:o}=e;await(0,i().setCookie)(t,{name:m,value:o})}async function f(e){const{environment:t,csrf:o}=e,n=await(0,i().getCookie)(t,m),a=!!n&&(0,r().iv)(n)&&n===o;return(0,i().removeCookie)(m),a}function v(){return l().default.checkGate({gateName:"calendar_auth_mmvp"})}},583824:(e,t,o)=>{o.d(t,{i:()=>k});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(700500),r=()=>o(254947),i=()=>o(977345),a=()=>o(416504),s=()=>o(197959),l=()=>o(919709),c=()=>o(973647),d=()=>o(720665),u=()=>o(878523),p=()=>o(538527),m=()=>o(892632),g=()=>o(909470),f=()=>o(594794),v=()=>o(972435),h=()=>o(508496),_=()=>o(116008),b=()=>o(543225),y=()=>o(59320),S=()=>o(681634),w=()=>o(807060);function k(e){const{environment:t,type:o,blockStore:k,commentTextValue:I,transaction:A,files:x,property_id:C,formulasModule:T,fromOverride:M}=e,P=e.discussionId??(0,f().Z1)({environment:t,table:s().$Y,spaceId:k.pointer.spaceId}),{id:B}=t.currentUser;if(!B)return;const R=_().A.state;let E;const{property_type:D,collection_id:N,collection_view_id:L,view_type:F,collection_view_block_id:U}=(0,w().q)(C,k);if(C&&R.open&&"block"===R.type){const e=R.blockStore.getPropertyStore(C);if(E=e.getValue()||[],"status"===D&&0===E.length&&(E=[[v().A.formatMessage(r().M_.statusOptionNotStarted)]]),"formula"===D&&(E=function(e,t,o,n){var r;const s=t.getAssociatedCollectionStore(),l=null==s?void 0:s.getModel(),u=null==l?void 0:l.getNormalizedSchema()[o],p=null==u||null===(r=u.formula2)||void 0===r?void 0:r.code,m=t.getModel(),f=1*d().Xb,_=h().default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs")??f;if(m&&p&&n){const t=n.evaluateCollectionFormula2WithoutCache({block:m,property:o,formulaCode:p,getRecordModel:e.getRecordModel,intl:v().A.getIntl(),userTimeZone:(0,a().P)(),depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:Date.now()+_,resultCache:new Map,regExpCache:new Map,experimentService:h().default,collectionFeatureGates:(0,g().i)()});if(t&&c().Q.isSuccess(t))return(0,i().Ht)(t.value)}return[]}(e,k,C,T)),"text"===D){const o={startIndex:0,endIndex:(0,l().qAZ)(E).length};p().Mw({environment:t,store:e,selection:o,annotation:[l().Ifu.Discussion,P],transaction:A})}}let O;const V=k.getType(),j=k.getFormat();if((0,n().Db)(V,j)&&!(0,n().$I)(V)){const e=k.getTitleValue();O=l().DJ2(l().Uee(e,{removeSuggestionAnnotationsAndText:!0,removeSuggestionAnnotations:!0,removeDiscussions:!0}))}C&&E&&(O=E);const{discussionStore:z,commentStore:q}=(0,y().G)({createDiscussionArgs:"default"===o?{type:"default",context:O,property_id:C}:{type:"suggestion",modifiedBlockIds:[k.pointer.id]},blockStore:k,environment:t,transaction:A,commentTextValue:I,files:m().JC(x),discussionId:P});let H;return(0,b().B)({transaction:A,blockStore:k,discussionId:z.id}),_().A.state.open?"comment"===_().A.state.content&&(H=_().A.state.from):H=_().A.state.from,M&&(H=M),u().v3(t,{discussion_id:z.id,discussion_type:z.getType(),comment_id:q.id,parent_block_id:z.getParentId(),from:H,property_id:C,property_type:D,collection_view_id:L,view_type:F,collection_id:N,collection_view_block_id:U}),(0,S().c)(t),z}},583835:(e,t,o)=>{o.d(t,{Dv:()=>n});Symbol("eventName");function n(e){return e}},584931:(e,t,o)=>{o.d(t,{w:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{asyncModals:[]}}}const r=new n},585515:(e,t,o)=>{o.d(t,{T:()=>A});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(430670),o(803949),o(581454),o(908872);var n=()=>o(496603),r=()=>o(763824),i=()=>o(534177),a=()=>o(700500),s=()=>o(452540),l=()=>o(777447),c=()=>o(792071),d=()=>o(577449),u=()=>o(212547),p=()=>o(388821),m=()=>o(696706),g=()=>o(912720),f=()=>o(199378),v=()=>o(179034),h=()=>o(519831),_=()=>o(869558),b=()=>o(343666),y=()=>o(197959),S=()=>o(37165),w=()=>o(144081),k=()=>o(798880),I=()=>o(919709);async function A(e,t,o){var A;const{isServerMultiCellRequest:M,shouldTraverseToggleBlocks:P,loadButtonBlockChildren:B,omitAncestorDependencies:R}=e;let E;const D={};E=e.cursor?n().mg(e.cursor.stack):[];const N=e.page.id,L=e.limit,F=e.batchLoadChildren??!1,U=e.contentBatchSize??25,O=p().RecordMap.create();0===E.length&&E.push([{table:v().ev,id:N,index:0,spaceId:e.page.spaceId}]);let V=0,j=0;const z=d().h.throughRecordMap(O,t),q=async(e,t)=>{if(!e.length)return p().RecordMap.create();const{sameCellPointers:o,crossCellPointers:r}=await W(e);for(const[n,i]of Object.entries(r))D[n]??=new Map,i.forEach((e=>{D[n].set(e.id,e)}));j+=o.length;const a=await z(o),l=n().hS([...a].map((e=>{let{model:t}=e;return t})).filter(i().O9).flatMap((e=>$(e))),s().jV);if(t){const e=n().hS([...a].map((e=>{let{model:t}=e;return t})).filter(i().O9).flatMap((e=>Y(e))),s().jV);R?await Promise.all([q(l,!1),q(e,!0)]):await q(e.concat(l),!0)}else await q(l,!1);return a},H=d().h.fromLoadRecords((e=>q(e,!0))),W=async e=>{if(M&&!M.isMainCell){const{spaceCellObjects:t,mainDbObjects:o}=await M.groupValueContainingRecordPointerByCell(e,(e=>e),((e,t)=>{t.spaceId=e})),n=t[M.currentCellId]??[];return delete t[M.currentCellId],n.push(...o),{sameCellPointers:n,crossCellPointers:t}}return{sameCellPointers:e,crossCellPointers:{}}},K=new Set,G=(e,t)=>t.filter((e=>{let[t,o]=e;const n=(0,s().jV)(t);return!K.has(n)&&(K.add(n),!0)})).map((t=>{let[n,r,i]=t;return o&&o({table:e.table,id:e.id},n,r,i),n})),$=function(e){const t=[];if((0,u().A0)(e)){const o=e.getParentPointer();t.push([o,"Block parent_id"])}return G(e,t)},Y=function(t){const o=[];function r(t,r){const i=I().RQ(t),a=n().KC(...i.map(I().uPN));for(const n of a){if(I().jIt(n)&&o.push([{table:v().ev,id:I().v55(n)},"page annotation",{suppressErrorOnClient:!0}]),I().rie(n)&&o.push([{table:k().oo,id:I().NcG(n)},"user annotation",{suppressErrorOnClient:!0}]),I().sh$(n)){const t=I().cQR(n),r=(0,l().lX)({url:t,baseUrl:e.baseUrl,publicDomainName:e.publicDomainName});r&&o.push([{table:v().ev,id:r},"link annotation",{suppressErrorOnClient:!0}])}if(I().N53(n)){const e=I().T$c(n);e&&o.push([{table:v().ev,id:e,spaceId:r},"eoi annotation"])}}}if(t.table===v().ev){const e=t.getCollectionViewPointers();for(const t of e)o.push([t,"CollectionViewBlock view_id"]);if(t.type===a().xd.form){const e=t.getLayoutPointer();e&&o.push([e,"Form layout"])}const n=t.getCollectionPointer();n&&o.push([n,"CollectionViewBlock collection_id"]);const i=t.getDiscussionPointers();for(const t of i)o.push([t,"Discussion"]);const s=t.getProperties().title;if((0,a().Db)(t.getType(),t.getFormat())&&s&&r(s,t.spaceId),t.getType()===a().xd.alias){const e=t.getAliasTargetPointer();e&&o.push([e,"alias"])}else if(t.isExternalObjectInstanceType()){const e=t.getExternalObjectSubInstancePointers();for(const t of e)o.push([t,"eoi"])}else if(t.getType()===a().xd.button){const e=t.getAutomationPointer();e&&o.push([e,"button_automation"])}}else if(t.table===y().$Y){if(!t.getResolved()){for(const e of t.getCommentPointers())o.push([e,"discussion table comment"]);for(const e of t.getReactionPointers())o.push([e,"discussion table reaction"])}}else if(t.table===b().SN){const e=t.getCreatedByPointer();e&&o.push([e,"comment table author"]);const n=t.getText();n&&r(n,t.spaceId);for(const r of t.getContentPointers())o.push([r,"comment table attachment"]);for(const r of t.getReactionPointers())o.push([r,"comment table reaction"])}else if(t.table===_().Gy){const e=t.getFormatStore().getKeyStore("collection_pointer").getValue();e&&o.push([e,"CollectionView collection_id"])}else if(t.table===w().zx){if("form"===t.getLayoutType()){const e=t.getRawModules().form_layout_schema||[];for(const n of e)"formQuestion"===n.type&&o.push([{table:S().lo,id:n.formQuestionId,spaceId:t.spaceId},"Form question"])}else{const e=t.getBlockChildren();for(const t of e)o.push([{table:v().ev,id:t},"Layout dependent block"])}}else if(t.table===g().yB){const e=t.getActionPointers();for(const t of e)o.push([t,"Automation action_ids"])}else if(t.table===f().SC)for(const e of t.getBlocks())o.push([{table:v().ev,id:e},"Automation action blocks"]);else if(t.table===h().Vl){for(const r of t.getAutomationPointers())o.push([r,"Collection automation_ids"]);const e=t.getLayoutPointer();e&&o.push([e,"Collection layout"]);const n=t.getSharingEnabledRelationTargetPointer();n&&o.push([n,"Sharing-enabled relation target collection"])}return G(t,o)},Q=new Map,Z=[],X=async function(){const t=[],n=E[E.length-1];if(V>=L&&j>10*L||j>20*L||!n)return!1;const r=n.map((e=>{const{table:t,id:o,spaceId:n}=e;return m().L3.fromPointerLike({table:t,id:o,spaceId:n})})),i=await H(r),s=[];for(let o=0;o<n.length;o++){const r=n[o],u=i.getModel(m().L3.fromPointerLike(r));if(!u||u.table!==v().ev)continue;const p=u.isType(a().xd.button)&&B?T(u,c().b4_.fromRecordMap(O)):null==u?void 0:u.getContentIds(),g=null==u?void 0:u.getFormat();if(!e.verticalColumns&&u&&p&&"column_list"===u.type&&0===r.index){for(let e=0;e<p.length;e++){const o=p[e],n=u.spaceId;s.push([{table:v().ev,id:o,spaceId:n},r,"column"]),t.push({table:v().ev,id:o,index:0,spaceId:n})}r.index=p.length}else if(u&&"transclusion_reference"===u.type&&g&&g.transclusion_reference_pointer&&0===r.index)s.push([g.transclusion_reference_pointer,r,"transclusion reference"]),t.push({...g.transclusion_reference_pointer,index:0}),r.index=1;else if(p&&((0,a().IU)(u.type,g)||u.isType(a().xd.button)&&B)&&(u.id===N&&1===E.length||!(0,a().NC)(u.type)&&(!(0,a().BN)(u.type,g)||P))&&p[r.index]){if(F){var l;const e=x(U,r.index);if(null===(l=Q.get(u.id))||void 0===l||!l.has(e)){var d;for(const t of C(p.map((e=>({table:v().ev,id:e}))),U,e))s.push([t,r,"block content child"]);Q.has(u.id)||Q.set(u.id,new Set),null===(d=Q.get(u.id))||void 0===d||d.add(e)}}else{const e=p[r.index];s.push([{table:v().ev,id:e,spaceId:u.spaceId},r,"block content child"])}t.push({table:v().ev,id:p[r.index],index:0,spaceId:u.space_id}),r.index++}}const u=s.map((e=>{let[t,n,r]=e;return o&&o(n,t,r),t}));await H(u),s.forEach((e=>{if("block content child"===e[2]){const t=e[0],o=O.getModel(t);if(o&&o instanceof c().zgg&&!o.alive){const e=O.getModel({id:o.parent_id,table:o.parent_table,spaceId:o.spaceId});e&&e instanceof c().zgg&&e.alive&&e.getContentIds().includes(o.id)&&Z.push(o.pointer)}}}));const p=t.filter((e=>{for(let t=0;t<E.length;t++){const o=E[t];for(let t=0;t<o.length;t++){const n=o[t];if(n.table===e.table&&n.id===e.id)return!1}}return!0}));return p.length>0?(E.push(p),V++):E.pop(),!0};for(;await X(););if(null===(A=e.performFixForQuasiAliveBlock)||void 0===A||A.call(e,Z),M){const t={},o=await r().lX(E,20,(async e=>await M.groupValueContainingRecordPointerByCell(e,(e=>m().L3.fromPointerLike({id:e.id,table:e.table,spaceId:e.spaceId})),((e,t)=>{t.spaceId=e}))));for(const{spaceCellObjects:e,mainDbObjects:r}of o){if(r.length>0){const e=M.currentCellId;t[e]??={stack:[]},t[e].stack.push(r)}for(const[o,n]of Object.entries(e))t[o]??={stack:[]},t[o].stack.push(n)}const n=e.cursor.stack.reduce(((e,t)=>(t.forEach((t=>{e[t.id]=t})),e)),{});for(const[e,r]of Object.entries(D)){t[e]??={stack:[]};Array.from(r.values()).map((e=>{const t=n[e.id];return{...e,index:t?t.index:0}})).forEach((o=>{t[e].stack.push([o])}))}const i=Object.keys(t).map((e=>({...t[e],cellId:e})));return{recordMap:O,cursorValue:{stack:[]},cursorValueCellularized:i}}return{recordMap:O,cursorValue:{stack:E},cursorValueCellularized:[]}}function x(e,t){return Math.trunc(t/e)}function*C(e,t,o){const n=Math.min(o*t,e.length-1),r=Math.min((o+1)*t,e.length);for(let i=n;i<r;i++)yield e[i]}function T(e,t){const o=e.getAutomationPointer();if(!o)return[];const n=t(o);if(!n)return[];return n.getActionPointers().map((e=>t(e))).filter(i().O9).flatMap((e=>e.getBlocks()))}},585533:(e,t,o)=>{o.d(t,{A:()=>i});o(898992),o(354520),o(672577);class n extends(()=>o(959180))().A{constructor(){super(...arguments),this.isDropTargetForKey=(e,t)=>e.props.dropTargetKey===t}findDropTargetFromKey(e){return this.find((t=>this.isDropTargetForKey(t,e)))}findDropTargetsFromKey(e){return this.filter((t=>this.isDropTargetForKey(t,e)))}}const r=new n;(0,o(604341).exposeDebugValue)("GlobalDropTargetRegistry",r);const i=r},586481:(e,t,o)=>{o.d(t,{L:()=>i});var n=()=>o(246826),r=()=>o(606952);function i(e){const{environment:t,store:o,properties:i,transaction:a}=e;"title"in i&&r().KY({environment:t,store:o.getBlockTitleStore(),value:i.title??void 0,transaction:a});const{title:s,...l}=i;Object.keys(l).length>0&&n().zv({store:o.getPropertiesStore(),data:l,transaction:a})}},588836:(e,t,o)=>{o.d(t,{u:()=>u});o(898992),o(354520);var n=()=>o(197959),r=()=>o(397277),i=()=>o(919709),a=()=>o(220719),s=()=>o(606952),l=()=>o(317909),c=()=>o(299545),d=()=>o(630116);function u(e){const{discussionIds:t,blockStore:o,transaction:i}=e,s=t.filter((e=>{const t=d().sk.createChildStore(o,{table:n().$Y,id:e,spaceId:o.getSpaceId()}),i=(0,a().o9)(o.getModel());return"suggestion"!==t.getType()||!(0,r().xi)({blockModel:i,discussionId:e})}));!function(e){const{blockStore:t,discussionIds:o,transaction:n}=e,r=c().bN(t);for(const i of o)l().applyOperation({store:r,operation:{pointer:r.pointer,path:r.path,command:"listRemove",args:{id:i}},transaction:n})}({blockStore:o,discussionIds:s,transaction:i});for(const n of s)p({store:o,discussionId:n,transaction:i})}function p(e){const{store:t,transaction:o,discussionId:n}=e,r=["m",n],a=i().JIi(r);s().gw({environment:t.environment,store:t.getBlockTitleStore(),selection:{startIndex:0,endIndex:1/0},annotationKey:a,transaction:o,updateSelection:!1});for(const i of Object.keys(t.getProperties())){if("title"===i)continue;const e=t.getPropertyStore(i);s().gw({environment:t.environment,store:e,selection:{startIndex:0,endIndex:1/0},annotationKey:a,transaction:o,updateSelection:!1})}}},589506:(e,t,o)=>{o.r(t),o.d(t,{makePageAvailableOffline:()=>L,makePageUnavailableOffline:()=>F,onBlockCreated:()=>z,readAndCacheOfflinePages:()=>U,readAndCacheOfflinePagesMemo:()=>j,toggleExplicitlyOfflined:()=>N});o(16280),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(179034),r=()=>o(449412),i=()=>o(496603),a=()=>o(763824),s=()=>o(534177),l=()=>o(989423),c=()=>o(870618),d=()=>o(406792),u=()=>o(227440),p=()=>o(508496),m=()=>o(630116);var g=()=>o(416504),f=()=>o(449506),v=()=>o(796621);var h=()=>o(92400);class _ extends Error{constructor(e){super(e)}}class b extends Error{constructor(){super("loadPageChunkV2ForOfflineSync failed."),this.name="OfflineSyncLoadPageChunkFailedError"}}var y=()=>o(540758),S=(o(944114),o(898992),o(354520),o(803949),o(581454),o(964979),()=>o(700500)),w=()=>o(825237),k=()=>o(386164),I=()=>o(142748),A=()=>o(388821),x=()=>o(780054),C=()=>o(603815),T=()=>o(494043),M=()=>o(179266);async function P(e){const{pageId:t,spaceId:o,environment:i,lastDownloadedVersion:s,visitedPages:l,isToggleBlock:c,abortSignal:d}=e;if(l.has(t))return r().O8(new Error("loadRemotePageAndImages tried to fetch a page that was already fetched."),{from:"loadRemotePageAndImages",type:"infiniteFetchPrevented",data:{pageId:t,visitedPages:l}}),{imageCount:0,downloadedVersion:void 0,collectionViewBlockIds:[],pageDownloadTime:0,imagesDownloadTime:0,loadPageChunkV2ForOfflineCount:0,visitedPages:l};l.add(t);const u=performance.now();let m=0;const g=await async function(e){const{pageId:t,spaceId:o,environment:r,incrementChunkSize:i,initialChunkSize:s,lastDownloadedVersion:l,isToggleBlock:c,abortSignal:d}=e;let u=0;const p=[],m=(0,k().WS)({recordId:t,spaceId:o}),g=await R({limit:s,cursor:void 0,headers:m,pageId:t,spaceId:o,environment:r,lastDownloadedVersion:l,isToggleBlock:c,abortSignal:d});let f=g.serverPageVersion;if(d.throwIfAborted(),u++,"clientAlreadyFresh"in g)return{serverPageVersion:f,collectionViewBlockIds:[],loadPageChunkV2ForOfflineCount:u,recordMap:A().RecordMapWithRole.create()};p.push(g.recordMap);let v=g.cursors.filter((e=>e.stack.length>0));for(;v.length>0;){const e=await a().lX(v,10,(async e=>{const n=(0,k().WS)({cellId:e.cellId}),a=await R({limit:i,cursor:e,headers:n,environment:r,pageId:t,spaceId:o,lastDownloadedVersion:l,isToggleBlock:c,abortSignal:d});return d.throwIfAborted(),u++,"recordMap"in a&&p.push(a.recordMap),void 0===f&&"number"==typeof a.serverPageVersion&&(f=a.serverPageVersion),a}));v=e.filter(B).map((e=>e.cursors)).flat().filter((e=>e.stack.length>0))}const h=A().RecordMapWithRole.merge(p),_=function(e,t,o){const r=(e,o)=>{if(e.getType()!==S().xd.collectionView)return!1;const n=(0,I().MR)(e.pointer,o);for(const r of n.slice(1))if(r.id===t)return!0;return!1},i=o.getModelsByTable(n().ev).filter((e=>r(e,o))).map((e=>e.id));return i}(0,t,h);return{serverPageVersion:f,collectionViewBlockIds:_,loadPageChunkV2ForOfflineCount:u,recordMap:h}}({pageId:t,spaceId:o,environment:i,incrementChunkSize:30,initialChunkSize:30,lastDownloadedVersion:s,isToggleBlock:c,abortSignal:d});d.throwIfAborted();const f=performance.now(),v=g.recordMap.getModel({table:n().ev,id:t});if(v){const e=await async function(e,t){const o=[],n=[...e.getRenderableContentPointers()];for(;n.length;){const e=n.shift();if(!e)continue;const r=t.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:e,userId:t.currentUser.id});if(r){if(r.getType()===S().xd.image){const e=r.getFormatValue("display_source"),n=await(0,M().L)({url:e??"",isAuthenticated:!0,permissionRecord:r.pointer},t),i=w().MU(n,x().A.domainBaseUrl);i&&o.push(i)}if(!r.isNavigableBlock())if(r.getType()===S().xd.transclusionReference){const e=r.getTransclusionReferenceTargetPointer();if(!e)continue;const o=t.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:e,userId:t.currentUser.id});if(!o)continue;n.push(...o.getRenderableContentPointers())}else n.push(...r.getRenderableContentPointers())}}return o}(v,i);m=e.length;for(const t of e)try{await fetch(t,{signal:d})}catch(D){throw D instanceof DOMException&&"AbortError"===D.name?new(h().f):D}}d.throwIfAborted();const _=performance.now(),b=new Set(g.collectionViewBlockIds);let{loadPageChunkV2ForOfflineCount:y}=g,C=f-u,E=_-f;if(p().default.checkGate({gateName:"offline_sync_traverse_toggle_blocks"})){const e=g.recordMap.getModelsByTable(n().ev).filter((e=>e.id!==t&&!l.has(e.id)&&T().Yt(e.getType(),e.getFormat())));await a().lX(e,5,(async e=>{const t=await P({pageId:e.id,spaceId:e.getSpaceId(),environment:i,lastDownloadedVersion:void 0,visitedPages:l,isToggleBlock:!0,abortSignal:d});m+=t.imageCount,t.collectionViewBlockIds.forEach((e=>b.add(e))),y+=t.loadPageChunkV2ForOfflineCount,C+=t.pageDownloadTime,E+=t.imagesDownloadTime}))}return{imageCount:m,downloadedVersion:g.serverPageVersion,collectionViewBlockIds:[...b],loadPageChunkV2ForOfflineCount:y,pageDownloadTime:C,imagesDownloadTime:E,visitedPages:l}}function B(e){return"cursors"in e&&"recordMap"in e}async function R(e){const{pageId:t,spaceId:o,environment:n,limit:r,cursor:i,headers:a,lastDownloadedVersion:s,isToggleBlock:l,abortSignal:c}=e,d={page:{id:t,spaceId:o},limit:r,cursor:i||{stack:[]},verticalColumns:n.device.isMobile,version:s,isToggleBlock:l??void 0},u=await C().e3({environment:n,request:d,headers:a,abortSignal:c});if(c.throwIfAborted(),"success"===u.type)return"clientAlreadyFresh"in u.data?u.data:{recordMap:A().RecordMapWithRole.create(u.data.recordMap),cursors:u.data.cursors,serverPageVersion:u.data.serverPageVersion};var p;if("OfflineSyncPageNotFoundDuringVersionCheckError"===(null===(p=u.body)||void 0===p?void 0:p.name)){const{currentUser:{id:e},defaultRecordCache:{persistedRecordCache:o}}=n;return e&&!l&&(null==o||o.deleteOfflineActionsAndCleanUp({userId:e,originPageId:void 0,impactedPageIds:[t]})),{recordMap:A().RecordMapWithRole.create(),cursors:[]}}throw new b}var E=()=>o(670631),D=()=>o(487532);async function N(e){const{store:t,environment:o,analyticsFrom:n}=e,{currentUser:i,defaultRecordCache:{persistedRecordCache:l}}=o;if(!l||!i.id)return;const c=t.id,d=y().f(c)?"removePage":"addPage";"removePage"===d&&(0,D().N$)(c),E().A.setState({...E().A.state,isSlowWrite:!1});const u="addPage"===d?L({environment:o,pageId:t.id,from:"toggleAvailableOffline",originPageId:c,visitedBlockIds:{forThisOriginPage:new Set},stats:{imageCount:0,loadCachedPageChunkV2ForOfflineCount:0,queryCollectionCount:0},autosyncTypes:["not_autosynced"],downloadAbortSignal:(0,D().Lu)(c)}).finally((()=>{(0,D().DZ)(c)})):"removePage"===d?F({environment:o,pageId:t.id,from:"toggleUnavailableOffline",analyticsFrom:n}):(0,s().HB)(d);try{(await(0,a().nQ)(200,u)).timeout&&E().A.setState({...E().A.state,isSlowWrite:!0}),await u}catch(p){r().O8(p,{from:"toggleAvailableOffline",type:"error",data:{pageId:c}})}finally{E().A.setState({...E().A.state,isSlowWrite:!1})}}async function L(e){var t,o;const{pageId:i,from:u,environment:y,originPageId:S,visitedBlockIds:w,autosyncTypes:k}=e,{currentUser:{id:I},defaultRecordCache:{persistedRecordCache:A}}=y;if(!A||!I)return;let x;const C=performance.now();if(w.forThisOriginPage.has(i))return void(i===S&&r().O8(new Error("Potential infinite loop prevented in makePageAvailableOffline()"),{from:"makePageAvailableOffline",type:"infiniteLoopPrevented",data:{pageId:S}}));w.forThisOriginPage.add(i);const T=p().default.getConfigKey("offline_mode_settings","max_blocks_per_origin_page");if(w.forThisOriginPage.size>T)throw new _(`Max blocks limit of ${T} exceeded.`);const M=null===(t=w.forThisInterval)||void 0===t?void 0:t.has(i);null===(o=w.forThisInterval)||void 0===o||o.add(i);const B="toggleAvailableOffline"===u||"onBlockCreated"===u;if(B){var R;const e=null===(R=E().A.state.offlinePages)||void 0===R?void 0:R[i];E().A.setState({...E().A.state,offlinePages:{...E().A.state.offlinePages,[i]:e?{...e,isExplicitlyOfflinedOrigin:!0}:{lastDownloadedAt:void 0,lastDownloadedVersion:void 0,isExplicitlyOfflinedOrigin:!0,isAutosyncedOrigin:!1}}})}const D=await async function(e){const{operation:t,pageId:o,userId:n,persistedRecordCache:i,environment:a,trackAnalytics:c}=e;let d=!1;try{"addPage"===t?await async function(e){const{persistedRecordCache:t,userId:o,originPageId:n,impactedPageId:r,autosyncTypes:i}=e,a=await t.isPageAvailableOffline({pageId:r,userId:o});a?await t.addOfflineAction({userId:o,originPageId:n,impactedPageId:r,autosyncTypes:i}):await t.addOfflinePageAndOfflineAction({userId:o,impactedPageId:r,originPageId:n,autosyncTypes:i,downloadStatus:"downloading"})}({persistedRecordCache:i,userId:n,originPageId:e.originPageId,impactedPageId:o,autosyncTypes:e.autosyncTypes}):"removePage"===t?await i.deleteOfflineActionsAndCleanUp({userId:n,originPageId:o,impactedPageIds:[o]}):(0,s().HB)(t),d=!0}catch(u){c&&(r().O8(u,{from:t,type:"performOfflinePageOperationInDbError",data:{pageId:o}}),(0,l().u4)({environment:a,event:{eventName:"offline_toggle_failure",eventProperties:{action:"addPage"===t?"add_page":"remove_page"}}}))}return{saveDidSucceed:d}}({operation:"addPage",userId:I,pageId:i,originPageId:S,persistedRecordCache:A,environment:y,trackAnalytics:"toggleAvailableOffline"===u,autosyncTypes:k});"toggleAvailableOffline"===u&&D&&d().default.measure({metricName:"offline_toggle_on",startTime:C,endTime:performance.now()},{environment:y});const N="isRefetch"in e?e.isRefetch:"useRefetchOfflinePages"===e.from;if(!D){if(!N)try{await A.setPageDownloadStatus({pageId:i,userId:I,downloadStatus:"failed"})}catch(O){}if(B)try{await U({userId:I,persistedRecordCache:A,tellOtherTabsToUpdate:!1})}catch(O){}return}if("onBlockCreated"===u||"addAutosyncedPage"===u)return void V();"toggleAvailableOffline"===u&&await navigator.locks.request(`toggle_offline_page_${I}`,(()=>{}));let F=!1;try{const t=await async function(){if(!A||void 0===I)return{success:!1};if("onBlockCreated"===e.from||"addAutosyncedPage"===e.from)return{success:!0};"toggleAvailableOffline"!==e.from&&"useRefetchOfflinePages"!==e.from&&"makePageAvailableOffline"!==e.from&&"makeCollectionViewBlockAvailableOffline"!==e.from&&(0,s().HB)(e.from);const{stats:t,downloadAbortSignal:o}=e,_=M,C=performance.now(),T=async function(){const e=new(m().Bv)(y,{id:i,table:n().ev});return await e.load(),e}(),[B,R]=await Promise.all([async function(){try{var e;const n=null===(e=await T)||void 0===e?void 0:e.getSpaceId();if(o.throwIfAborted(),!n)return{didSucceed:!1,shouldUpdateMetadata:!1};let r=!0;const a=await A.getOfflineLastDownloadedVersion({pageId:i,userId:I}),s=_?{imageCount:0,downloadedVersion:void 0,collectionViewBlockIds:[],pageDownloadTime:0,imagesDownloadTime:0,loadPageChunkV2ForOfflineCount:0}:await P({pageId:i,spaceId:n,environment:y,lastDownloadedVersion:a,visitedPages:new Set([]),isToggleBlock:!1,abortSignal:o});if(o.throwIfAborted(),t.imageCount+=s.imageCount,t.loadCachedPageChunkV2ForOfflineCount+=s.loadPageChunkV2ForOfflineCount,S===i){let e;s.downloadedVersion!==a?e=s.collectionViewBlockIds:(e=await A.getInlineCollectionsInOfflinePage({pageId:i,userId:I}),o.throwIfAborted());for(const n of e){const e=await L({from:"makePageAvailableOffline",isRefetch:N,pageId:n,environment:y,originPageId:S,visitedBlockIds:w,stats:t,autosyncTypes:k,downloadAbortSignal:o});void 0!==e&&e.success||(r=!1),o.throwIfAborted()}}return{didSucceed:r,shouldUpdateMetadata:!0,lastDownloadedVersion:s.downloadedVersion,pageDownloadTime:s.pageDownloadTime,imagesDownloadTime:s.imagesDownloadTime,imageCount:s.imageCount}}catch(O){return O instanceof h().f||O instanceof b||r().O8(O,{from:"toggleAvailableOffline",type:"makePageAvailableOfflineError",data:{pageId:i}}),{didSucceed:!1,shouldUpdateMetadata:!1}}}(),async function(){const e=await T;if(o.throwIfAborted(),!e.isCollectionView())return{didSucceed:!0,collectionChildrenCount:0,collectionChildrenDownloadTime:0};try{const n=performance.now(),r=await async function(e){const{store:t,environment:o,originPageId:n,visitedBlockIds:r,isRefetch:i,stats:s,autosyncTypes:l,downloadAbortSignal:c}=e;if(!t.isCollectionView())return{success:!1,collectionChildrenCount:0};const d=o.defaultRecordCache.persistedRecordCache,u=o.currentUser.id;if(!d||!u)return{success:!1,collectionChildrenCount:0};const m=t.getCollectionViewStores();if(0===m.length)return{success:!1,collectionChildrenCount:0};const h=m[0],_=h.getCollectionStore();if(!_)return{success:!1,collectionChildrenCount:0};const b=p().default.getConfigKey("offline_query_collection_settings","limit");if(0===b)return{success:!1,collectionChildrenCount:0};const y=await async function(e){let{environment:t,collectionViewStore:o,spaceId:n,isRefetch:r,limit:i,abortSignal:a}=e;const s=t.currentUser.id;if(!s)return;const l=o.getCollectionStore(),c=null==l?void 0:l.getModel(),d=o.getModel();if(!l||!c||!d)return;const u=function(e){var t;const{collection:o,collectionView:n,userId:r,userTimeZone:i,searchQuery:a,reducersOverride:s}=e,l=o.getSchema();return{filter:n.getCombinedFilter(l),sort:null===(t=n.getQueryStore().getValue())||void 0===t?void 0:t.sort,userId:r,userTimeZone:i,searchQuery:a,reducers:s??{}}}({collection:c,collectionView:d,userId:s,userTimeZone:(0,g().P)(),searchQuery:void 0,reducersOverride:{offline_pages:{type:"results",limit:i}}});return f().callApi({eventName:"queryCollection",environment:t,data:{source:{type:"collection",id:l.id,spaceId:n},collectionView:{id:o.id,spaceId:n},loader:u},tracking:{src:r?"download_for_offline_refetch":"download_for_offline"},inMemoryRecordCache:v().o,abortSignal:a})}({environment:o,collectionViewStore:h,spaceId:_.getSpaceId(),isRefetch:i,limit:b,abortSignal:c});if(c.throwIfAborted(),s.queryCollectionCount++,!y||"success"!==y.type)return{success:!1,collectionChildrenCount:0};const S=y.data.result.reducerResults.offline_pages;if("results"!==S.type)return{success:!1,collectionChildrenCount:0};return await(0,a().lX)(S.blockIds,10,(async e=>{await L({from:"makeCollectionViewBlockAvailableOffline",isRefetch:i,pageId:e,environment:o,originPageId:n,visitedBlockIds:r,stats:s,autosyncTypes:l,downloadAbortSignal:c}),c.throwIfAborted()})),{success:!0,collectionChildrenCount:S.blockIds.length}}({store:e,environment:y,originPageId:S,visitedBlockIds:w,isRefetch:N,stats:t,autosyncTypes:k,downloadAbortSignal:o});return o.throwIfAborted(),{didSucceed:r.success,collectionChildrenCount:r.collectionChildrenCount,collectionChildrenDownloadTime:performance.now()-n}}catch(O){return O instanceof h().f||r().O8(O,{from:"toggleAvailableOffline",type:"makeCollectionViewBlockAvailableOfflineError",data:{pageId:i}}),{didSucceed:!1,collectionChildrenCount:0,collectionChildrenDownloadTime:0}}}()]),E=B.didSucceed&&R.didSucceed,D=E?"success":"failed";if(await A.setPageDownloadStatus({pageId:i,userId:I,downloadStatus:D}),B.shouldUpdateMetadata){const e=B.lastDownloadedVersion,t=await A.getOfflineLastDownloadedVersion({pageId:i,userId:I});await A.updateOfflinePageLastDownloadedMetadata({pageId:i,userId:I,lastDownloadedAt:Date.now(),lastDownloadedVersion:"number"==typeof e&&"number"==typeof t?Math.max(e,t):e||t})}if("toggleAvailableOffline"===u)if(B.didSucceed&&R.didSucceed){var F;const t=null===(F=await c().h7({useInMemoryCacheOnly:!0,environment:y,pointer:{id:i,table:n().ev}}))||void 0===F||null===(F=F.model)||void 0===F?void 0:F.getType();d().default.measure({metricName:"offline_toggle_on_non_blocking",startTime:C,endTime:performance.now()},{environment:e.environment,data:{sub_metrics:{page_download:B.pageDownloadTime??0,images_download:B.imagesDownloadTime??0,collection_children_download:R.collectionChildrenDownloadTime??0},number_of_collection_children:R.collectionChildrenCount??0,number_of_images_fetched:B.imageCount??0,page_type:t||"unknown"}})}else(0,l().u4)({environment:e.environment,event:{eventName:"offline_toggle_on_non_blocking_failure",eventProperties:{load_remote_page_and_images_failed:!B.didSucceed,make_collection_children_available_offline_failed:!R.didSucceed}}});"useRefetchOfflinePages"===u&&(x=B.lastDownloadedVersion);return{success:E}}();F=t.success}catch(O){}return"toggleAvailableOffline"!==u&&"useRefetchOfflinePages"!==u||U({userId:I,persistedRecordCache:A,tellOtherTabsToUpdate:!0}).catch((()=>{})),{success:F,visitedBlockIds:w,downloadedVersion:x}}async function F(e){const{pageId:t,environment:{currentUser:{id:o},defaultRecordCache:{persistedRecordCache:n}},from:a,analyticsFrom:s}=e;if(n&&o)if("removeAutosyncedPage"!==a){"toggleUnavailableOffline"===a&&(0,l().u4)({environment:e.environment,event:{eventName:"offline_toggle_off",eventProperties:{page_id:t,from:s}}}),E().A.setState({...E().A.state,offlinePages:i().cJ(E().A.state.offlinePages,t)});try{await n.deleteOfflineActionsWithOriginPageIdAndCleanUp({originPageId:t,userId:o,autosyncType:"not_autosynced"})}catch(c){r().O8(c,{from:"toggleUnavailableOffline",type:"deleteRowsFromDbError",data:{pageId:t}}),(0,l().u4)({environment:e.environment,event:{eventName:"offline_toggle_failure",eventProperties:{action:"remove_page"}}})}U({userId:o,persistedRecordCache:n,tellOtherTabsToUpdate:!0}).catch((()=>{}))}else try{await n.deleteOfflineActionsWithOriginPageIdAndCleanUp({originPageId:t,userId:o,autosyncType:"frecent"})}catch(c){r().O8(c,{from:"removeAutosyncedPage",type:"deleteRowsFromDbError",data:{pageId:t}})}}const U=i().nF((async function(e){const{userId:t,persistedRecordCache:o,tellOtherTabsToUpdate:n}=e;n&&O();const r={},i=await o.getOfflinePages({userId:t});for(const[a,s]of i)r[a]=s;E().A.setState({...E().A.state,offlinePages:r})}),1e3,{leading:!0});function O(){E().A.setState({...E().A.state,shouldPublishUpdate:!0})}const V=i().nF(O,1e3,{leading:!0}),j=i().Bj(U,(e=>[e.userId,String(e.tellOtherTabsToUpdate)].join("-")));async function z(e){const{environment:t,store:o}=e;try{var n;const e=o.getType();"page"!==e&&"collection_view_page"!==e||u().A.state.online||null!==(n=E().A.state.offlinePages)&&void 0!==n&&null!==(n=n[o.id])&&void 0!==n&&n.isExplicitlyOfflinedOrigin||!p().default.checkGate({gateName:"download_for_offline"})||await L({from:"onBlockCreated",pageId:o.id,environment:t,originPageId:o.id,visitedBlockIds:{forThisOriginPage:new Set},autosyncTypes:["not_autosynced"]})}catch(i){r().O8(i,{from:"onBlockCreated",type:"error"})}}},589994:(e,t,o)=>{o.r(t),o.d(t,{TEST_ONLY__setTransactionQueue:()=>Y,isIndexedDbGracefulFallbackToInMemoryEnabled:()=>W,setupTransactionQueue:()=>$,transactionQueue:()=>G});o(16280),o(944114),o(898992),o(581454),o(737550);var n=()=>o(857639),r=()=>o(206267),i=()=>o(319625),a=()=>o(496603),s=()=>o(229833),l=()=>o(763824),c=()=>o(720665),d=(o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(803949),()=>o(534177)),u=()=>o(620149),p=()=>o(141032);const m="Transaction",g="bySessionId",f="byTimestamp",v="byId",h="byUserId",_="Session",b="bySessionId",y="byUpdatedAt",S="byOwnerSessionId";const w=45*c().TD;class k{constructor(e,t){this.db=void 0,this.debugLogger=void 0,this.runOptimizedScans=!0,this.activeTasks=new Map,this.ownedSessionIds=new Set,this.db=new(p().$E)(t,"TransactionStore",2,{upgrade(e,t,o,n){if(t<1&&function(e){const t=e.createObjectStore(_,{keyPath:d().$r("index"),autoIncrement:!0});t.createIndex(y,d().$r("updatedAt"),{unique:!1}),t.createIndex(S,d().$r("ownerSessionId"),{unique:!1}),t.createIndex(b,d().$r("sessionId"),{unique:!0});const o=e.createObjectStore(m,{keyPath:d().$r("index"),autoIncrement:!0});o.createIndex(f,d().$r("timestamp"),{unique:!1}),o.createIndex(g,[d().$r("sessionId"),d().$r("timestamp")],{unique:!1}),o.createIndex(v,d().$r("id"),{unique:!0})}(e),t<2){n.objectStore(m).createIndex(h,d().$r("userId"))}}}),this.debugLogger=e,this.runOptimizedScans=!t.device.isEdgeHTML}async DEV_ONLY_deadlockDb(e){throw new Error("This function is only available in development builds.")}async heartbeat(e){const{currentSessionId:t,isActive:o,timeoutMs:r}=e,i=o?[_,m]:[_],a=await this.db.startTransaction({storeNames:i,mode:"readwrite",name:"IndexedDBTransactionStore.heartbeat",timeoutMs:r},(async(e,r)=>{const i=new Set,a=e.objectStore(_);let l=await a.index(S).openCursor(t);r("Obtained session cursor.");let c=0;for(;l;){c+=1;const e=l.value;e.sessionId!==t&&i.add(e.sessionId);const o={...e,updatedAt:Date.now()};l.update(o),l=await l.continue()}if(r(`Finished processing ${c} sessions.`),o){const t=e.objectStore(m).index(v),o=Date.now()-w;r(`Processing ${this.activeTasks.size} active tasks.`),this.activeTasks.forEach((async e=>{if(e.timestamp>=o)return;if(!(await t.get(e.id))){if(e.callback)try{e.callback(void 0)}catch(r){this.debugLogger.flush(),n().log({level:"error",from:"IndexedDBTransactionStore",type:"activeTaskGarbageCollectCleanupError",error:(0,s().n6)(r)})}this.debugLogger.flush(),n().log({level:"warning",from:"IndexedDBTransactionStore",type:"activeTaskGarbageCollect",data:{miscDataToConvertToString:{task:e,expireTime:o}}}),this.activeTasks.delete(e.id)}}))}return{value:i}}));return a.error?a:(this.ownedSessionIds=a.value,{value:void 0})}async claimSessions(e){const{currentSessionId:t,staleSessionTimeoutMs:o,transactionTimeoutMs:n}=e,r=await this.db.startTransaction({storeNames:[_],mode:"readwrite",name:"IndexedDBTransactionStore.claimSessions",timeoutMs:n},(async(e,n)=>{const r=[],i=e.objectStore(_);let a=await i.index(y).openCursor(IDBKeyRange.upperBound(o));for(n("Obtained session cursor.");a;){const e=a.value,o={...e,ownerSessionId:t,updatedAt:Date.now()};r.push(e.sessionId),n(`Taking ownership of session ${e.sessionId}.`);const i=Date.now()-e.updatedAt;this.debugLogger.log({from:"IndexedDBTransactionStore",level:"debug",type:"claimSession",data:{message:`claimed ${e.sessionId} updated ${i}ms ago`,sessionId:e.sessionId,sinceLastUpdate:i}}),a.update(o),a=await a.continue()}return{value:r}}));if(r.error)return r;for(const i of r.value)this.ownedSessionIds.add(i);return{value:void 0}}getTasks(e,t){return this.db.startTransaction({storeNames:[_,m],mode:"readonly",name:"IndexedDBTransactionStore.getTasks",timeoutMs:void 0},(async(n,r)=>{let i;const a=[],s=n.objectStore(_);let l=await s.index(S).openCursor(e);for(r("Obtained session cursor.");l;){const e=l.value;a.push(e),l=await l.continue()}if(r(`Found ${a.length} owned sessions.`),0===a.length)return{value:void 0};a.sort(((e,t)=>e.index-t.index));const c=a[0].sessionId,d=[];let u=await this.createTransactionCursor(n,c);for(;u;){const e=u.value;(0,o(134025).qG)(e.operations);const t=this.activeTasks.get(e.id);e.sessionId===c&&d.push({...e,callback:t&&t.callback}),u=await u.continue()}return r(`Found ${d.length} tasks.`),i={sessionId:c,tasks:d},t?i.tasks.sort(((e,t)=>e.index&&t.index?e.index-t.index:e.timestamp-t.timestamp)):i.tasks.sort(((e,t)=>e.timestamp-t.timestamp)),{value:i}}))}saveTask(e,t,o){const n={id:t.id,userId:t.userId,spaceId:t.spaceId,sessionId:e,timestamp:t.timestamp,debug:t.debug,operations:t.operations,useSudoMode:t.useSudoMode,isUndoTransaction:t.isUndoTransaction,isTemplateInstantiationTransaction:t.isTemplateInstantiationTransaction};return u().A.setOrIncTotal(this.activeTasks.size+1),this.activeTasks.set(n.id,t),this.db.startTransaction({storeNames:[_,m],mode:"readwrite",name:"IndexedDBTransactionStore.saveTask",timeoutMs:o},(async(t,o)=>{const r=t.objectStore(_),a=await r.index(b).get(e);if(o("Obtained session cursor."),!a){const t={sessionId:e,updatedAt:Date.now(),ownerSessionId:e};o(`Adding session ${t.sessionId}.`);try{await r.add(t)}catch(s){throw(0,p().Ss)((0,i().A)(s),`session ${t.sessionId}`)}}try{await t.objectStore(m).add(n)}catch(s){throw(0,p().Ss)((0,i().A)(s),`task ${n.id}`)}return this.debugLogger.log({from:"IndexedDBTransactionStore",type:"saveTask",level:"debug",data:{message:`create task ${n.id} in ${a?"existing":"NEW"} session ${e}`,sessionId:e,taskId:n.id,isNewSession:!Boolean(a)}}),{value:void 0}}))}async deleteSession(e){const{currentSessionId:t,sessionId:o}=e,n=await this.db.startTransaction({storeNames:[_,m],mode:"readwrite",name:"IndexedDBTransactionStore.deleteSession",timeoutMs:void 0},(async(e,n)=>{let r=await this.createTransactionCursor(e,o);for(n("Obtained transaction cursor.");r;){if(r.value.sessionId===o)return{value:`Attempt to delete non-empty session: has task ${r.value.id}`,abort:!0};r=await r.continue()}const i=e.objectStore(_),a=await i.index(b).get(o);if(!a)return{value:"Session is missing",abort:!0};const s=a;return s.ownerSessionId!==t?{value:`Attempt to delete another tab's session: owned by ${s.ownerSessionId}`,abort:!0}:(i.delete(s.index),{value:void 0})}));return n.error?n:n.value?{error:{type:"LogicalError",message:n.value,userDetails:"Could not perform an operation due to a logical error."}}:{value:void 0}}hasTasks(){return this.activeTasks.size>0||this.ownedSessionIds.size>0}getTotalNumberOfTasks(e){return this.db.startTransaction({storeNames:[m],mode:"readonly",name:"IndexedDBTransactionStore.getTotalNumberOfTasks",timeoutMs:e},(async e=>{const t=e.objectStore(m);return{value:await t.count()}}))}getTotalNumberOfTasksForUser(e,t){return this.db.startTransaction({storeNames:[m],mode:"readonly",name:"IndexedDBTransactionStore.getTotalNumberOfTasksForUser",timeoutMs:t},(async t=>{const o=t.objectStore(m).index(h);return{value:await o.count(e)}}))}async anySessionHasTasks(e){const t=await this.getTotalNumberOfTasks(e);return t.error?t:{value:t.value>0}}async hasTasksForUser(e,t){const o=await this.getTotalNumberOfTasksForUser(e,t);return o.error?o:{value:o.value>0}}hasTask(e){for(const[,t]of this.activeTasks)if(e(t))return!0;return!1}async deleteTasks(e){const t=await this.db.startTransaction({storeNames:[m,_],mode:"readwrite",name:"IndexedDBTransactionStore.deleteTasks",timeoutMs:void 0},(async(t,o)=>{const r=[],i=[],a=new Set,s=t.objectStore(m),l=s.index(v),c=t.objectStore(_);await(0,p().yL)(e.map((0,p().Lc)((async e=>{r.push(e.id);const t=await l.openCursor(e.id);if(o(`Obtained transaction cursor for task ${e.id}.`),t){a.add(t.value.sessionId),await t.delete(),o(`Deleted task ${e.id}.`);const n=String(e.id);this.debugLogger.log({from:"IndexedDBTransactionStore",type:"deleteTasksDeleteTask",level:"debug",data:{message:`delete task ${e.id}`,taskId:n}})}else this.debugLogger.flush(),n().log({from:"IndexedDBTransactionStore",type:"deleteTasksTaskNotExist",level:"warning",data:{message:`could not delete task not stored in indexeddb ${e.id}`,taskId:e.id}})}))));const d=s.index(g);return a.forEach((async e=>{let o=0;if(this.runOptimizedScans)o=await d.count(this.getTransactionRange(e));else{let n=await this.createTransactionCursor(t,e);for(;n;){if(n.value.sessionId===e){o++;break}n=await n.continue()}}if(0===o){const t=await c.index(b).openCursor(e);t&&(i.push(t.value.sessionId),t.delete(),this.debugLogger.log({from:"IndexedDBTransactionStore",type:"deleteTasksDeleteSession",level:"debug",data:{message:`delete empty session ${e}`,sessionId:e}}))}})),{value:{deletedTaskIds:r,deletedSessionIds:i}}}));if(t.error)return t;const{deletedTaskIds:o,deletedSessionIds:r}=t.value;for(const n of o)this.activeTasks.delete(n);for(const n of r)this.ownedSessionIds.delete(n);return u().A.updateRemaining(this.activeTasks.size),{value:void 0}}async checkObjectStores(){const e="IndexedDBTransactionStore.checkObjectStores",t=this.db.startTransaction({storeNames:["Session"],mode:"readonly",name:`${e}: read from Session object store`,timeoutMs:void 0},(async()=>Promise.resolve({value:"created IndexedDB transaction"}))),o=this.db.startTransaction({storeNames:["Transaction"],mode:"readonly",name:`${e}: read from Transaction object store`,timeoutMs:void 0},(async()=>Promise.resolve({value:"created IndexedDB transaction"}))),[n,r]=await Promise.all([t,o]);return{session:n,transaction:r}}async reset(){await this.db.reset(),this.activeTasks.clear(),this.ownedSessionIds.clear(),u().A.updateRemaining(0)}async clearTasksForUser(e){const t=await this.db.startTransaction({storeNames:[m],mode:"readwrite",name:"IndexedDBTransactionStore.clearTasksForUser",timeoutMs:void 0},(async(t,o)=>{const n=[],r=t.objectStore(m);let i=await r.index(h).openCursor(IDBKeyRange.only(e));for(o("Obtained transaction cursor.");i;)n.push(i.value.id),await i.delete(),i=await i.continue();return{value:{deletedTaskIds:n}}}));if(t.error)return t;const{deletedTaskIds:o}=t.value;for(const n of o)this.activeTasks.delete(n);u().A.updateRemaining(this.activeTasks.size)}getTransactionRange(e){return IDBKeyRange.bound([e,0],[e,Number.MAX_VALUE],!0,!0)}createTransactionCursor(e,t){const o=e.objectStore("Transaction");return this.runOptimizedScans?o.index(g).openCursor(this.getTransactionRange(t),"next"):o.openCursor()}}var I=()=>o(161132),A=(o(354520),()=>o(752196)),x=()=>o(696706),C=()=>o(449412),T=()=>o(118757),M=()=>o(227440),P=()=>o(419101),B=()=>o(500472);const R="NativeBackedTransactionQueue";class E{constructor(e,t,o){this.lastTaskTimestamp=0,this.tasks=new Map,this.sessionId="00000000-0000-0000-0000-000000000000",this.events=new(A().A),this.retryReasonCounters={_total:0},this.startTime=Date.now(),this.debugLogger=new(n().BatchedLogger)({from:R,type:"BulkDebug",level:"info",maxLength:250}),this.connection=e,this.dependencies=t,n().log({from:R,level:"debug",type:"NativeBackedTransactionQueueCreated"}),o.subscribeToUpdateTransactionState((e=>this.updateTransactionState(e)))}async enqueueTask(e){this.lastTaskTimestamp=Math.max(e.timestamp,this.lastTaskTimestamp);const t=0===this.tasks.size;var o;(this.tasks.set(e.id,{...e,sessionId:this.sessionId}),this.hasTooManyOperations(e))&&n().log({from:R,type:"enqueueTask",level:"warning",data:{message:`enqueing task with operation count > ${E.operationCountWarningThreshold}`,sessionId:this.sessionId,taskId:e.id,isNewSession:t,userAction:null===(o=e.debug)||void 0===o?void 0:o.userAction,miscDataToConvertToString:{operationsCount:e.operations.length}}});const r=JSON.stringify(e.operations).length;var i;this.stringifiedOperationSizeIsTooLarge(r)&&n().log({from:R,type:"enqueueTask",level:"warning",data:{message:`enqueing task with stringified operation count > ${E.stringifiedOperationSizeByteThreshold} bytes`,sessionId:this.sessionId,taskId:e.id,isNewSession:t,userAction:null===(i=e.debug)||void 0===i?void 0:i.userAction,miscDataToConvertToString:{operationsCount:e.operations.length,stringifiedOperationsSize:r}}});await(0,B().KA)(this.connection,e),this.debugLogger.log({from:R,type:"enqueueTask",level:"debug",data:{message:`save task ${e.id} in memory (${this.tasks.size} total now)`,sessionId:this.sessionId,taskId:e.id,isNewSession:t}})}startLoop(){this.dependencies.timeSource.setTimeout((()=>this.healthcheckLoop()),1)}unpause(){}pause(){}getLastTaskTimestamp(){return this.lastTaskTimestamp}hasTasks(){return this.tasks.size>0}async hasTasksForUser(e){return await(0,B().n_)(this.connection,e)>0}async getTotalNumberOfTasks(){return await(0,B().Zw)(this.connection)}async anySessionHasTasks(){return await this.getTotalNumberOfTasks()>0}async reset(){await(0,B().m)(this.connection),this.tasks.clear()}async clearForUser(e){const t=await(0,B().Dp)(this.connection,e);for(const o of t)this.tasks.delete(o)}updateDependencies(e){this.dependencies=e}async awaitRecordTransaction(e){this.isPendingTransactionForRecord(e)&&await this.drain()}isPendingTransactionForRecord(e){return Array.from(this.tasks.values()).some((t=>t.operations.some((t=>(0,x().Z2)(t.pointer,e)))))}hasTooManyOperations(e){return e.operations.length>=E.operationCountWarningThreshold}stringifiedOperationSizeIsTooLarge(e){return e>=E.stringifiedOperationSizeByteThreshold}async drain(){return this.tasks.size>0?new Promise((e=>{this.events.addOnceListener("drain",e)})):void 0}async healthcheckLoop(){for(;;){try{const e=await this.getTotalNumberOfTasks();e>E.transactionSizeHealthcheckThreshold&&(this.debugLogger.flush(),n().log({level:"info",from:"NativeBackedSqliteTransactionQueue",type:"transactionSizeHealthcheck",data:{miscDataToConvertToString:{queueSize:e}}}),this.dependencies.handleHealthcheck({queue_type:"NativeBackedSqliteTransactionQueue",uptime:Date.now()-this.startTime,queue_size:e,error_type:void 0,is_considered_online:M().A.state.online,retry_reasons:this.retryReasonCounters}))}catch(e){this.debugLogger.flush(),n().log({level:"error",from:"NativeBackedSqliteTransactionQueue",type:"healthcheckLoopIteration",error:(0,s().n6)(e)}),C().Fg(e)}await l().wR(E.healthcheckInterval,this.dependencies.timeSource)}}updateTransactionState(e){(e.syncing||this.hasTasks())&&M().A.setState({...M().A.state,syncing:!0});let t=[],o=[];if(e.saveTransactionResult)if(e.saveTransactionResult.error){const{retryReason:n}=e.saveTransactionResult.error;n?(0,T().Bc)(this.retryReasonCounters,n):this.retryReasonCounters={_total:0},t=e.saveTransactionResult.error.savedTasks.map((e=>this.tasks.get(e.id))).filter(d().O9),o=e.saveTransactionResult.error.failedTasks.map((e=>this.tasks.get(e.id))).filter(d().O9),(0,P().On)({backoffEstimate:void 0,retryReason:n})}else this.retryReasonCounters={_total:0},t=e.saveTransactionResult.value.map((e=>this.tasks.get(e.id))).filter(d().O9),o=[],(0,P().YL)();t.forEach((e=>{if(e.callback)try{e.callback(void 0)}catch(t){this.debugLogger.flush(),n().log({level:"error",from:"NativeBackedTransactionQueue",type:"updateTransactionStateSavedTask",data:{taskId:e.id},error:(0,s().n6)(t)})}this.tasks.delete(e.id)})),o.forEach((e=>{if(e.callback)try{e.callback(new Error(`Failed to save transaction with id: ${e.id}`))}catch(t){this.debugLogger.flush(),n().log({level:"error",from:"NativeBackedTransactionQueue",type:"updateTransactionStateFailedTask",data:{taskId:e.id},error:(0,s().n6)(t)})}this.tasks.delete(e.id),this.dependencies.rollbackTask(e)})),e.syncing||this.hasTasks()||(M().A.setState({...M().A.state,syncing:!1}),this.events.emit("drain"))}}E.healthcheckInterval=5*c().Xb,E.transactionSizeHealthcheckThreshold=1e3,E.operationCountWarningThreshold=500,E.stringifiedOperationSizeByteThreshold=1e5;var D=()=>o(459887),N=()=>o(582033);class L{constructor(e,t){this.activeQueue=void 0,this.inMemoryTransactionQueue=void 0,this.indexedDBDrainListener=void 0,this.debugLogger=void 0,this.activeQueue=e,this.inMemoryTransactionQueue=t,this.indexedDBDrainListener=()=>this.handleIndexedDBQueueDrain(),this.debugLogger=new(n().BatchedLogger)({from:"IndexedDBToInMemoryTransactionQueue",type:"BulkDebug",level:"info",maxLength:250}),setTimeout((()=>{this.activeQueue instanceof N().p&&(this.debugLogger.log({level:"error",from:"IndexedDBToInMemoryTransactionQueue",type:"constructor",data:{message:"IndexedDBTransactionQueue has not drained after 5 minutes."}}),this.debugLogger.flush())}),5*c().Xb)}startLoop(){if(this.activeQueue instanceof N().p){this.activeQueue.events.addListener("drain",this.indexedDBDrainListener)}this.activeQueue.startLoop()}handleIndexedDBQueueDrain(){const e=(0,o(220719).oC)(this.activeQueue,N().p,'Expected "IndexedDBTransactionQueue"');e.hasAttemptedToClaimSessions()&&(e.stopLoop(),e.events.removeListener("drain",this.indexedDBDrainListener),this.inMemoryTransactionQueue.startLoop(),this.activeQueue=this.inMemoryTransactionQueue,this.debugLogger.log({level:"info",from:"IndexedDBToInMemoryTransactionQueue",type:"constructor",data:{message:"Switching over from IndexedDBTransactionQueue to InMemoryTransactionQueue."}}))}logEmptyTaskForDebugging(e){var t,o;null===(t=(o=this.activeQueue).logEmptyTaskForDebugging)||void 0===t||t.call(o,e)}enqueueTask(e){return this.activeQueue.enqueueTask(e)}unpause(){this.activeQueue.unpause()}pause(){this.activeQueue.pause()}getLastTaskTimestamp(){return this.activeQueue.getLastTaskTimestamp()}hasTasks(){return this.activeQueue.hasTasks()}anySessionHasTasks(){return this.activeQueue.anySessionHasTasks()}getTotalNumberOfTasks(){return this.activeQueue.getTotalNumberOfTasks()}hasTasksForUser(e){return this.activeQueue.hasTasksForUser(e)}drain(){return this.activeQueue.drain()}awaitRecordTransaction(e){return this.activeQueue.awaitRecordTransaction(e)}isPendingTransactionForRecord(e){return this.activeQueue.isPendingTransactionForRecord(e)}reset(){return this.activeQueue.reset()}clearForUser(e){return this.activeQueue.clearForUser(e)}updateDependencies(e){this.activeQueue.updateDependencies(e),this.inMemoryTransactionQueue!==this.activeQueue&&this.inMemoryTransactionQueue.updateDependencies(e)}}var F=()=>o(999319);const U="InMemoryTransactionQueue";class O{constructor(e){this.isProcessingTask=!1,this.lastTaskTimestamp=0,this.tasks=new Map,this.events=new(A().A),this.waiter=void 0,this.transactionBackoffController=new(o(706742).x)(P().Vp),this.sessionId="00000000-0000-0000-0000-000000000000",this.retryReasonCounters={_total:0},this.startTime=Date.now(),this.debugLogger=new(n().BatchedLogger)({from:U,type:"BulkDebug",level:"info",maxLength:250}),this.dependencies=e}startLoop(){this.dependencies.timeSource.setTimeout((()=>this.txLoop()),1),this.dependencies.timeSource.setTimeout((()=>this.healthcheckLoop()),1)}enqueueTask(e){this.lastTaskTimestamp=Math.max(e.timestamp,this.lastTaskTimestamp);const t=0===this.tasks.size;return this.tasks.set(e.id,{...e,sessionId:this.sessionId}),u().A.setOrIncTotal(this.tasks.size),this.debugLogger.log({from:U,type:"saveTask",level:"debug",data:{message:`save task ${e.id} in memory (${this.tasks.size} total now)`,sessionId:this.sessionId,taskId:e.id,isNewSession:t}}),this.getWaitable(!1).trigger(),Promise.resolve(void 0)}unpause(){this.transactionBackoffController.reset(),this.getWaitable(!1).trigger()}pause(){}getLastTaskTimestamp(){return this.lastTaskTimestamp}hasTasks(){return this.tasks.size>0}async hasTasksForUser(e){return Promise.resolve(Array.from(this.tasks.values()).some((t=>t.userId===e)))}updateDependencies(e){this.dependencies=e}async getTotalNumberOfTasks(){return Promise.resolve(this.tasks.size)}async anySessionHasTasks(){return Promise.resolve(this.hasTasks())}async drain(){return this.hasTasks()||this.isProcessingTask?new Promise((e=>{this.events.addOnceListener("drain",e)})):void 0}async awaitRecordTransaction(e){this.isPendingTransactionForRecord(e)&&await this.drain()}isPendingTransactionForRecord(e){return Array.from(this.tasks.values()).some((t=>t.operations.some((t=>(0,x().Z2)(t.pointer,e)))))}async reset(){return this.tasks=new Map,u().A.updateRemaining(0),Promise.resolve(void 0)}async clearForUser(e){const t=Array.from(this.tasks.values()).filter((t=>t.userId===e));for(const o of t)this.tasks.delete(o.id);return u().A.updateRemaining(this.tasks.size),Promise.resolve(void 0)}async txLoop(){for(;;)try{await this.txLoopIteration()}catch(e){(0,T().Bc)(this.retryReasonCounters,"txLoopException"),this.debugLogger.flush(),n().log({level:"error",from:U,type:"txLoopIteration",error:(0,s().n6)(e)}),C().Fg(e),await l().wR(15e3,this.dependencies.timeSource)}}async txLoopIteration(){this.hasTasks()||(this.doneSyncing(),this.events.emit("drain")),await this.wait(T().qG,T().ke);const e=Array.from(this.tasks.values()),t=Array.from(e).sort(((e,t)=>e.timestamp-t.timestamp));if(0===t.length)return;const o=[];for(let n=0;n<t.length;n++)t[n]!==e[n]&&o.push(n);o.length>0&&n().log({from:U,level:"warning",type:"TasksNotOrdered",data:{miscDataToConvertToString:{unsortedTaskIds:e.map((e=>e.id)),mismatch:o},taskIds:t.map((e=>e.id))}}),this.startSyncing(),await this.useSaveTransactionsApi(t)}async useSaveTransactionsApi(e){const t=await this.dependencies.handleSaveTransactions(e);if(t.error){const{savedTasks:e,failedTasks:r,message:i,retryDelay:a,retryReason:l}=t.error;var o;if(l?(0,T().Bc)(this.retryReasonCounters,l):this.retryReasonCounters={_total:0},e.length>0&&(this.debugLogger.log({level:"debug",from:U,type:"handlePartialSaveTransactionsSuccess",data:{message:`will delete ${e.length} saved tasks`,taskIds:e.map((e=>e.id))}}),await this.cleanupTasks(e,void 0)),r.length>0?(this.debugLogger.flush(),n().log({level:"warning",from:U,type:"handleSaveTransactionsError",data:{message:i,taskIds:r.map((e=>e.id))},error:(0,s().n6)(t.error)}),await this.cleanupTasks(r,t.error)):this.debugLogger.log({level:"debug",from:U,type:"handleSaveTransactionsRetryableError",data:{message:i}}),a>0)await this.transactionBackoffController.backOffOnFailure(a-T().qG,null===(o=t.error)||void 0===o?void 0:o.retryReason);else this.transactionBackoffController.reset()}else{const e=t.value;this.retryReasonCounters={_total:0},this.debugLogger.log({level:"debug",from:U,type:"handleSaveTransactionsSuccess",data:{message:`will clean up ${e.length} submitted tasks`,taskIds:e.map((e=>e.id))}}),this.transactionBackoffController.reset(),await this.cleanupTasks(e,void 0)}}async cleanupTasks(e,t){for(const r of e)if(r.callback)try{r.callback(t)}catch(o){this.debugLogger.flush(),n().log({level:"error",from:"InMemoryTransactionQueue",type:"cleanupTask",data:{taskId:r.id},error:(0,s().n6)(o)})}for(const n of e)this.debugLogger.log({from:U,type:"deleteTasksDeleteTask",level:"debug",data:{message:`delete task ${n.id}`,taskId:n.id}}),this.tasks.delete(n.id);return u().A.updateRemaining(this.tasks.size),Promise.resolve()}getWaitable(e){return this.waiter&&!e||(this.waiter=new(l().e2)(this.dependencies.timeSource)),this.waiter}async wait(e,t){await this.getWaitable(!1).wait(e,t),this.getWaitable(!0)}startSyncing(){M().A.setState({...M().A.state,syncing:!0})}doneSyncing(){M().A.setState({...M().A.state,syncing:!1})}async healthcheckLoop(){for(;;){try{const e=await this.getTotalNumberOfTasks();if(e>O.transactionSizeHealthcheckThreshold){const t={queue_type:"InMemoryTransactionQueue",uptime:Date.now()-this.startTime,queue_size:e,error_type:void 0,is_considered_online:M().A.state.online,retry_reasons:this.retryReasonCounters};this.debugLogger.flush(),n().log({level:"info",from:"InMemoryTransactionQueue",type:"transactionSizeHealthcheck",data:{miscDataToConvertToString:{queueSize:e}}}),this.dependencies.handleHealthcheck(t)}}catch(e){this.debugLogger.flush(),n().log({level:"error",from:"InMemoryTransactionQueue",type:"healthcheckLoopIteration",error:(0,s().n6)(e)}),C().Fg(e)}await l().wR(O.healthcheckInterval,this.dependencies.timeSource)}}}O.healthcheckInterval=15*c().Xb,O.transactionSizeHealthcheckThreshold=1e3;const V=O;var j=()=>o(866184);const z="FeatureFlagTransactionQueue",q="00000000-0000-0000-0000-000000000000";async function H(e){if(!window.indexedDB)return{available:!1,message:"The IndexedDB API is missing or disabled on this platform."};if(e.device.isFirefox){const e="FirefoxFeatureCheck";if(!(await new Promise((t=>{const o=window.indexedDB.open(e);o.onerror=()=>t(!1),o.onsuccess=()=>{t(!0),window.indexedDB.deleteDatabase(e)}}))))return{available:!1,message:"IndexedDB is disabled in Firefox Private Browsing."}}if(e.device.isChrome&&parseInt(e.device.browserVersion,10)>=99){const e="Chrome99FeatureCheck";let o=!1;try{if(o=await new Promise((t=>{const o=window.indexedDB.open(e);o.onerror=()=>t(!1),o.onsuccess=()=>{t(!0),window.indexedDB.deleteDatabase(e)}})),!o)return{available:!1,message:"IndexedDB is unstable in Chrome 99."}}catch(t){return{available:!1,message:(0,i().A)(t).message}}}return W()&&D().r.hasOccurredRecently()?{available:!1,message:"A NotionTransactionTimeout has happened recently, avoiding use of IndexedDB.",previousTimeouts:D().r.getTotal()}:{available:!0}}const W=a().Bj((()=>"on"===(0,o(165162).gg)("indexeddb_graceful_fallback_to_in_memory_queue")));async function K(e){const t=new(j().TransactionQueueDependenciesImpl)(e);async function o(){const o=await H(e);if(!o.available)return n().log({from:z,level:"warning",type:"preferIndexedDBUnavailable",data:{previousTimeouts:o.previousTimeouts,miscDataToConvertToString:{message:o.message,userAgent:navigator.userAgent}}}),i();n().log({from:z,type:"preferIndexedDB",level:"info"});const l=function(e,t){const o="react-native"===e.device.platform?q:r().JW(),i=new(n().BatchedLogger)({from:"IndexedDBTransactionQueue",type:"BulkDebug",level:"info",maxLength:250}),a=new k(i,e);return new(N().p)({dependencies:t,transactionStore:a,sessionId:o,debugLogger:i,enableHeartbeatTimeout:W()})}(e,t),c=await(0,I().xs)();if(c&&!(0,I().W0)(c)){let e=!1;try{e=await l.anySessionHasTasks(),n().log({from:z,type:"indexedDBStorageVeryFull",level:"warning",data:{storage:{hasTasks:e,...c}}})}catch(d){n().log({from:z,level:"error",type:"indexedDBStorageReadError",data:{storage:c},error:(0,s().n6)(d)})}if(!e)return new V(t)}if(e.device.isFirefox)try{const e=await l.checkObjectStores(),o=a().oE([e.transaction,e.session].map((e=>e.error)));if(o.length>0){const r=[];return e.transaction.error&&r.push("Transaction"),e.session.error&&r.push("Session"),n().log({from:z,level:"error",type:"FirefoxHealthCheckFailed",error:{miscErrorString:(0,s().WS)(o)},data:{message:`Can't read ${r}. Using InMemoryTransactionQueue instead.`}}),new V(t)}}catch(d){return n().log({from:z,level:"error",type:"indexedDBHealthCheckError",error:(0,s().n6)(d)}),new V(t)}return W()?(l.events.addListener("timeout",(()=>{D().r.trackPersistently()})),new(F().A)(l,new V(t))):l}function i(){return n().log({from:z,type:"preferInMemory",level:"info"}),new V(t)}const{device:d,mobileNative:u}=e;if(d.isBrowser&&d.isDesktop){if(d.isChrome||d.isFirefox)return o();if(d.isSafari){if(parseInt(d.browserVersion,10)<17)return o();const e=await o();if(e instanceof N().p){if((await l().nQ(15*c().TD,e.anySessionHasTasks())).result)return n().log({from:z,type:"Safari17.usingIndexedDBToInMemoryTransactionQueue",level:"info"}),new L(e,i())}return n().log({from:z,type:"Safari17.usingInMemoryTransactionQueue",level:"info"}),i()}return i()}return d.isBrowser&&d.isMobile?i():d.isElectron?o():d.isMobileNative&&u&&u.sqliteConnection?new E(u.sqliteConnection,t,u):i()}(0,o(466103).exposeDebugEnvironmentValue)("getIndexedDBAvailability",(e=>()=>H(e)));let G=new class{constructor(e,t){this.getActiveQueueName=void 0,this.queues=void 0,this.createQueues=void 0,this.getActiveQueueName=e,this.createQueues=t}getQueues(){const e=this.queues?this.queues:this.createQueues();return this.queues=e,e}applyToAllQueues(e){return Object.values(this.getQueues()).map(e)}applyToActiveQueue(e){return e(this.getQueues()[this.getActiveQueueName()])}startLoop(){this.applyToAllQueues((e=>e.startLoop()))}enqueueTask(e){return this.applyToActiveQueue((t=>t.enqueueTask(e)))}unpause(){this.applyToAllQueues((e=>e.unpause()))}pause(){this.applyToAllQueues((e=>e.pause()))}getLastTaskTimestamp(){return this.applyToActiveQueue((e=>e.getLastTaskTimestamp()))}hasTasks(){return this.applyToAllQueues((e=>e.hasTasks())).some(Boolean)}async hasTasksForUser(e){return(await Promise.all(this.applyToAllQueues((t=>t.hasTasksForUser(e))))).some((e=>e))}updateDependencies(e){this.applyToAllQueues((t=>t.updateDependencies(e)))}async anySessionHasTasks(){for(const e of this.applyToAllQueues((e=>e.anySessionHasTasks())))if(await e)return!0;return!1}async getTotalNumberOfTasks(){return a().cz(await Promise.all(this.applyToAllQueues((e=>e.getTotalNumberOfTasks()))))}async drain(){await Promise.all(this.applyToAllQueues((e=>e.drain())))}awaitRecordTransaction(e){return this.applyToActiveQueue((t=>t.awaitRecordTransaction(e)))}isPendingTransactionForRecord(e){return this.applyToAllQueues((t=>t.isPendingTransactionForRecord(e))).some(Boolean)}async reset(){await Promise.all(this.applyToAllQueues((e=>e.reset())))}async clearForUser(e){await Promise.all(this.applyToAllQueues((t=>t.clearForUser(e))))}}((()=>"error"),(()=>{throw new Error("Need to await setupTransactionQueue")}));async function $(e){return G=await K(e),G}function Y(e){G=e}},590027:(e,t,o)=>{o.d(t,{MU:()=>a,Z5:()=>r,vr:()=>n});const n=400,r=1200;class i extends(()=>o(757695))().default{getInitialState(){return{width:450,isResizerHovered:!1,isResizing:!1,reopenMainSidebarOnClose:!1}}}const a=new i},590604:(e,t,o)=>{o.d(t,{Dk:()=>_,JF:()=>f,eV:()=>h,uI:()=>v});o(410838),o(898992),o(803949),o(737550);var n=()=>o(857639),r=()=>o(792071),i=()=>o(142748),a=()=>o(252651),s=()=>o(433847),l=()=>o(68263),c=()=>o(388821),d=()=>o(728272),u=()=>o(854150),p=()=>o(798880),m=()=>o(731320),g=()=>o(351360);function f(e){const{store:t,userId:o,updatedPermissionItems:n}=e,a=t.getModel();if(!a)return!1;const s=o?{table:p().oo,id:o}:void 0,u=c().RecordMap.create();u.setValue(t.pointer,{...a.__IM_SORRY__getValue(),permissions:n});const m=r().b4_.tryUntilFound(r().b4_.fromRecordMap(u),t.getRecordModel);return _({actorPointer:s,ancestors:(0,i().Yn)(t.pointer,m),permissionsContext:v({actorPointers:new(d().d)(void 0===s?[]:[s]),recordPointers:new(d().d)([t.pointer]),getRecordModel:m})}).some((e=>{const t=e.permissionItem.role;return t&&(0,l().Km)(t)}))}function v(e){const{actorPointers:t,getRecordModel:o,recordPointers:r}=e,s=c().RecordMap.create();for(const n of r)if(!s.has(n)){(0,i().Yn)(n,o).forEach((e=>{s.setModel(e.pointer,e)}))}const l=c().RecordMap.create(),p=(0,a().x6)({recordMapFromWhichToFindRelevantEntities:s});for(const n in p.relevantTeamIds){const e={table:u().yK,id:n};s.has(e)||l.setModel(e,o(e))}const g=(0,a().js)({recordMap:s,getRecordModelFnWithMaybeMissingRecords:o,actorPointers:t,logErrorFn:e=>{const{from:t,type:o,error:r,data:i}=e;n().log({level:"error",from:t,type:o,error:{name:r.name,message:r.message,stack:r.stack},data:{miscDataToConvertToString:i}})}});return{actorPointersSet:new(d().d)(t),actorMemberships:g,ancestorsRecordMap:s,explicitTeamsRecordMap:l,spacesForSpaceMemberComputation:(0,m().bA)({ancestorsRecordMap:s,getRecordModel:o}),domainLinkSharingEnabledDomainsMap:void 0}}function h(e){const{actor:t,recordPointer:o,permissionsContext:n}=e,r=(0,i().Wy)(o,n.ancestorsRecordMap),a=g().default.state.currentSpaceStore,c=a&&a.isDefined()&&!r.findLast(s().vl)?[...r,a.getModel()]:r,d=_({actorPointer:null==t?void 0:t.pointer,ancestors:c,permissionsContext:n});if(1===d.length){const e=d[0];if((0,l().FP)(e.permissionItem)&&(0,l().Tt)(e.permissionItem.role))return e}}function _(e){const{actorPointer:t,ancestors:o,ignorePublicPermissions:n,permissionsContext:r}=e;return(0,s().WH)({actorPointer:t,userActorEmail:void 0,ancestors:o,ignorePublicPermissions:n,permissionsContext:r})}},592269:(e,t,o)=>{o.d(t,{H3:()=>P,Ic:()=>K,Iw:()=>M,K8:()=>E,Yt:()=>W,Yy:()=>B,_:()=>Y,jV:()=>U,wj:()=>F,xw:()=>G});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454),o(737550);var n=()=>o(496603),r=()=>o(534177),i=()=>o(670913),a=()=>o(289915),s=()=>o(410486),l=()=>o(921598),c=()=>o(970013),d=()=>o(713998),u=()=>o(455348),p=()=>o(597777),m=()=>o(604995),g=()=>o(715256),f=()=>o(641007),v=()=>o(206267),h=()=>o(681873),_=()=>o(792071),b=()=>o(364692),y=()=>o(813690),S=()=>o(696706),w=()=>o(179034),k=()=>o(798880),I=()=>o(797809),A=()=>o(919709);function x(e){const t=[],o=[];for(const[n,r]of Object.entries(e))r&&((0,I().TV)(n)||("person"===r.type?t.push(n):"date"===r.type&&o.push(n)));return{date:o,person:t}}const C=A().Ey_(", ");function T(e,t){const o={command:"update",args:t,pointer:{table:w().ev,id:e.id},path:["properties"]};return _().Bj6.fromValue(e.table,(0,b().KW)(o,e.__IM_SORRY__getValue()))}function M(e){const{filter:t,userFilterContext:o,getRecordModel:n,experimentService:r,intl:i,collectionModel:a,currentPageInRelatedCollection:s,relativeVariableResult:l}=e,c=a.getNormalizedSchema(),d=a.spaceId;if(!d)return!1;const{model:u}=_().zgg.create({id:"fake-id",type:"page",properties:{},space_id:d,parent:a.pointer,createdBy:f().rb},{useCrdt:!1}),{coercionSucceeded:p}=P({block:u,schema:c,propertyMapping:a.getPropertyMapping(),groupBy:void 0,userFilterContext:o,intl:i,filter:t,getRecordModel:n,groupsPointer:[],relativeVariableResult:l,currentPageInRelatedCollection:s,resultCache:new Map,regExpCache:new Map,experimentService:r});return p}function P(e){const{block:t,schema:o,propertyMapping:r,filter:s,userFilterContext:l,groupBy:c,groupsPointer:d,relativeVariableResult:u,currentPageInRelatedCollection:p,getRecordModel:m,intl:g,resultCache:f,regExpCache:v,experimentService:h}=e,{userId:b,userTimeZone:S,userStartOfWeek:I}=l;let A=t;const x=_().b4_.tryUntilFound(_().b4_.fromMonomorphicFunctionUnsafe((e=>{let{table:t,id:o}=e;if(t===w().ev&&o===A.id)return A}),y().xb.fromMonomorphicFunctionUnsafe((e=>{let{table:t,id:o}=e;if(t===w().ev&&o===A.id)return A.__IM_SORRY__getValue()}))),m),C={};for(const n of d)Object.assign(C,O({block:A,getRecordModel:x,schema:o,propertyMapping:r,group:n,groupBy:c,intl:g,userFilterContext:l,relativeVariableResult:u,currentPageInRelatedCollection:p,resultCache:f,regExpCache:v,experimentService:h})),A=T(t,C);if(s){const e=z({block:A,schema:o,filter:s,propertyMapping:r,userFilterContext:l,relativeVariableResult:u,currentPageInRelatedCollection:p,getRecordModel:m,intl:g,resultCache:f,regExpCache:v,experimentService:h}),n="failsFilter"===e.type||"coercedByFilter"===e.type?e.update??{}:{};Object.assign(C,n),A=T(t,C)}for(const n of d)Object.assign(C,O({block:A,getRecordModel:x,schema:o,propertyMapping:r,groupBy:c,group:n,intl:g,userFilterContext:l,relativeVariableResult:u,currentPageInRelatedCollection:p,resultCache:f,regExpCache:v,experimentService:h})),A=T(t,C);const M=T(A,C),P=n().Si(d.map((e=>{const n=B({group:e,groupBy:void 0,propertyMapping:r,schema:o,timeZone:S,experimentService:h}),s=n?(0,a().oR)({context:{schema:o,userId:b,userTimeZone:S,userStartOfWeek:I,relativeVariableResult:u,currentPageInRelatedCollection:p,intl:g,collectionFeatureGates:(0,i().v)({experimentService:h,actor:b?{table:k().oo,id:b}:void 0,spaceId:t.spaceId})},propertyMapping:r,filter:n}):void 0;return Boolean(s&&s({block:M,getRecordModel:m,propertyMapping:r,resultCache:f,regExpCache:v,experimentService:h,formulasModule:void 0}))}))),R=s?(0,a().oR)({filter:s,propertyMapping:r,context:{schema:o,userId:b,userTimeZone:S,userStartOfWeek:I,relativeVariableResult:u,currentPageInRelatedCollection:p,intl:g,collectionFeatureGates:(0,i().v)({experimentService:h,actor:b?{table:k().oo,id:b}:void 0,spaceId:t.spaceId})}}):void 0,E=!R||R({block:M,getRecordModel:m,propertyMapping:r,resultCache:f,regExpCache:v,experimentService:h,formulasModule:void 0});return{coercionSucceeded:P&&E,update:C}}function B(e){const t=E(e);return t?(0,a().dU)(t)?t:{operator:"and",filters:[t]}:void 0}function R(e,t){var o;return t?(null===(o=u().u9.fromViewPropertyIds([e.property],t))||void 0===o?void 0:o[0])??e.property:e.property}function E(e){const{schema:t,group:o,groupBy:n,propertyMapping:i,timeZone:a,experimentService:s}=e,c=R(o,i),d=t[c];if(!d)return;const u=o.value;if((0,l().Eg)(d)&&u.type===d.type){if(void 0===u.value)return{property:c,filter:{operator:"is_empty"}};if("select"===d.type)return"string"==typeof u.value?{property:c,filter:{operator:"enum_is",value:{type:"exact",value:u.value}}}:void 0;if("status"===d.type)return void 0!==u.value&&"status"===u.type?{property:c,filter:{operator:"status_is",value:"by_group"===u.value.type?{type:"is_group",value:u.value.group}:{type:"is_option",value:u.value.option}}}:void 0;if((0,l().r4)(d.type))return"object"==typeof u.value&&u.type===d.type?{property:c,filter:{operator:"person_contains",value:{type:"exact",value:u.value}}}:void 0;if("relation"===d.type)return"object"==typeof u.value&&"relation"===u.type?function(e,t){if((0,l().WO)(t.value))return{property:e,filter:{operator:"relation_contains",value:{type:"exact",value:t.value.id}}};if((0,l().zx)(t.value))return{property:e,filter:{operator:"relation_contains",value:{type:"relative",value:{type:"builtin",variable:t.value.value.variable}}}}}(c,u):void 0;if("location"===d.type)return"object"==typeof u.value&&"location"===u.type?{property:c,filter:{operator:"location_is",value:{type:"exact",value:u.value.id}}}:void 0;if("multi_select"===d.type)return"string"==typeof u.value?{property:c,filter:{operator:"enum_contains",value:{type:"exact",value:u.value}}}:void 0;if((0,l()._o)(d.type)){if(u.type!==d.type)return;const e=s.checkGate({gateName:"collection_groups_round_date_group_reducers",actor:g().S3});return D(n&&"date"===n.type&&e?n.groupBy:void 0,u.value,c,a)}if((0,l().Vs)(d.type)){if(u.type!==d.type)return;return N(u.value,c)}if("number"===d.type){if("number"!==u.type)return;return L(u.value,c)}if("checkbox"===d.type){if("checkbox"!==u.type)return;return{property:c,filter:{operator:"checkbox_is",value:{type:"exact",value:u.value}}}}if("formula"===d.type){if("formula"!==u.type)return;const e=u.value;if(void 0===e.value)return;if((0,l().kO)(e))return N(e.value,c);if("number"===e.type)return L(e.value,c);if("checkbox"===e.type)return{property:c,filter:{operator:"checkbox_is",value:{type:"exact",value:e.value}}};if((0,l().DH)(e))return D(n&&"date"===n.type?n.groupBy:void 0,e.value,c,a);if((0,l().GG)(e))return function(e,t){return{property:e,filter:{operator:"person_contains",value:{type:"exact",value:t.value}}}}(c,e);if((0,l().D1)(e))return(0,l().WO)(e.value)?{property:c,filter:{operator:"relation_contains",value:{type:"exact",value:e.value.id}}}:void 0;(0,r().HB)(e)}(0,r().HB)(d.type)}}function D(e,t,o,n){const r=(0,l().Kc)(t,n),i="relative"===e&&"month"===t.type?function(e){const{groupValueStart:t,groupValueEnd:o,timeZone:n}=e,r=(0,m().ah)(n),i=r.minus({days:30}),a=r.plus({days:30}),s=t.valueOf()>r.valueOf();return{start:s&&a.valueOf()>t.valueOf()?a.plus({days:1}):t,end:!s&&o.valueOf()>i.valueOf()?i.minus({days:1}):o}}({groupValueStart:r.start,groupValueEnd:r.end,timeZone:n}):r;return{property:o,filter:{operator:"date_is_within",value:{type:"exact",value:m().C6.toPersistedDateRange(i,n)}}}}function N(e,t){if("alphabet_prefix"===e.type){const o=e.value;return isNaN(parseInt(o))?{operator:"or",filters:[{property:t,filter:{operator:"string_starts_with",value:{type:"exact",value:e.value.toUpperCase()}}},{property:t,filter:{operator:"string_starts_with",value:{type:"exact",value:e.value.toLowerCase()}}}]}:{property:t,filter:{operator:"string_starts_with",value:{type:"exact",value:e.value}}}}return"other"===e.type?{property:t,filter:{operator:"string_has_no_alphabet_prefix"}}:"exact"===e.type?{property:t,filter:{operator:"string_is",value:{type:"exact",value:e.value}}}:void(0,r().HB)(e)}function L(e,t){if("range"===e.type){const{start:o,end:n}=e;return{operator:"and",filters:[{property:t,filter:{operator:"number_greater_than_or_equal_to",value:{type:"exact",value:o}}},{property:t,filter:{operator:"number_less_than",value:{type:"exact",value:n}}}]}}if("out_of_range"===e.type){const{start:o,end:n}=e;return{operator:"or",filters:[{property:t,filter:{operator:"number_less_than",value:{type:"exact",value:o}}},{property:t,filter:{operator:"number_greater_than_or_equal_to",value:{type:"exact",value:n}}}]}}if("unique"===e.type)return{property:t,filter:{operator:"number_equals",value:{type:"exact",value:e.value}}};(0,r().HB)(e)}function F(e,t){const o=e.property,n=null==t?void 0:t[o];if(null!=n&&n.derived_property_record_metadata)return!1;if(n&&d().sP(n))return!1;const i=e.value;return!i.value||("select"===i.type||"multi_select"===i.type||"status"===i.type||"person"===i.type||"checkbox"===i.type||"relation"===i.type||"date"===i.type||"number"===i.type||((0,l().kO)(i)?"exact"===i.value.type:"formula"!==i.type&&"created_by"!==i.type&&"last_edited_by"!==i.type&&"created_time"!==i.type&&"last_edited_time"!==i.type&&"location"!==i.type&&"last_visited_time"!==i.type&&void(0,r().HB)(i.type)))}function U(e){const{schema:t,propertyMapping:o,group:n,block:i,resultCache:a,regExpCache:s,experimentService:c}=e;if(!F(n,t))return{};const d=function(e){const{schema:t,group:o,propertyMapping:n}=e,i=R(o,n),a=t[i];if(!a)return;const s=o.value;return(0,l().Eg)(a)&&s.type===a.type&&void 0!==s.value?"person"===a.type?"object"==typeof s.value&&"person"===s.type?{property:i,filter:{operator:"person_does_not_contain",value:{type:"exact",value:s.value}}}:void 0:"relation"===a.type?"relation"===s.type&&(0,l().WO)(s.value)?{property:i,filter:{operator:"relation_does_not_contain",value:{type:"exact",value:s.value.id}}}:"relation"===s.type&&(0,l().zx)(s.value)?{property:i,filter:{operator:"relation_does_not_contain",value:{type:"relative",value:{type:"builtin",variable:s.value.value.variable}}}}:void 0:"location"===a.type?"object"==typeof s.value&&"location"===s.type?{property:i,filter:{operator:"location_is_not",value:{type:"exact",value:s.value.id}}}:void 0:"multi_select"===a.type?"string"==typeof s.value?{property:i,filter:{operator:"enum_does_not_contain",value:{type:"exact",value:s.value}}}:void 0:void("select"!==a.type&&"status"!==a.type&&"checkbox"!==a.type&&"date"!==a.type&&"text"!==a.type&&"title"!==a.type&&"url"!==a.type&&"email"!==a.type&&"phone_number"!==a.type&&"number"!==a.type&&"formula"!==a.type&&"created_by"!==a.type&&"last_edited_by"!==a.type&&"created_time"!==a.type&&"last_edited_time"!==a.type&&"last_visited_time"!==a.type&&(0,r().HB)(a)):void 0}({schema:t,group:n,propertyMapping:o});if(!d)return{};const u=q({...e,property:d.property,filter:d.filter,schema:t,block:i,resultCache:a,regExpCache:s,experimentService:c});return("failsFilter"===u.type||"coercedByFilter"===u.type)&&u.update||{}}function O(e){const{schema:t,propertyMapping:o,group:n,groupBy:r,block:i,userFilterContext:s,experimentService:l}=e,{userTimeZone:c}=s;if(!F(n,t))return{};const d=E({schema:t,group:n,groupBy:r,propertyMapping:o,timeZone:c,experimentService:l});if(!d||!(0,a().yX)(d))return{};const u=q({...e,property:d.property,filter:d.filter,schema:t,block:i});return("failsFilter"===u.type||"coercedByFilter"===u.type)&&u.update||{}}function V(e){const{dateValue:t,timestamp:o,userTimeZone:n}=e;if("date"===t.type)return{...m().p6(o,n),reminder:t.reminder};if("datetime"===t.type)return{...m().KQ(o,n),reminder:t.reminder};if("daterange"===t.type){const e=m().HF(p().tq(t),n).valueOf(),r=m().HF(p().Wq(t),n).valueOf()-e;return{...m().Mk(o,o+r,n),reminder:t.reminder}}if("datetimerange"===t.type){const e=m().mF(p().S6(t)).valueOf(),r=m().mF(p().S6(t)).valueOf()-e;return{...m().NC(o,o+r,n),reminder:t.reminder}}(0,r().HB)(t)}const j={text:function(e){const{filter:t,value:o}=e;if("is_empty"===t.operator)return{type:"text",value:void 0};if("is_not_empty"===t.operator)return;if("string_has_no_alphabet_prefix"===t.operator)return;const n=(t.value.value||"").trim();return"string_is_not"===t.operator||"string_does_not_contain"===t.operator?{type:"text",value:void 0}:"string_is"===t.operator?{type:"text",value:n}:"string_contains"===t.operator||"string_ends_with"===t.operator?{type:"text",value:(o.value||"")+n}:"string_starts_with"===t.operator?{type:"text",value:n+(o.value||"")}:void(0,r().HB)(t.operator)},checkbox:function(e){const{filter:t}=e,o=t.value;return"checkbox_is"===t.operator?{type:"checkbox",value:Boolean(o.value)}:"checkbox_is_not"===t.operator?{type:"checkbox",value:!Boolean(o.value)}:void(0,r().HB)(t.operator)},select:function(e){var t;const{filter:o,propertySchema:n}=e;if("is_empty"===o.operator)return{type:"select",value:void 0};if("is_not_empty"===o.operator)return{type:"select",value:n.options&&n.options.length>0?n.options[0].value:void 0};const i=null===(t=(0,a().Zl)(o)[0])||void 0===t?void 0:t.value;return void 0!==i?"enum_is"===o.operator?{type:"select",value:i}:"enum_is_not"===o.operator?{type:"select",value:void 0}:void(0,r().HB)(o.operator):void 0},multi_select:function(e){var t;const{filter:o,propertySchema:n,value:i}=e;if("is_empty"===o.operator)return{type:"multi_select",value:void 0};if("is_not_empty"===o.operator)return{type:"multi_select",value:n.options&&n.options.length>0?[n.options[0].value]:void 0};const s=null===(t=(0,a().SM)(o)[0])||void 0===t?void 0:t.value;if(void 0===s)return;const l=i.value||[];if("enum_contains"===o.operator)return{type:"multi_select",value:[...l,s]};if("enum_does_not_contain"===o.operator)return{type:"multi_select",value:l.filter((e=>e!==s))};if("enum_contains_all"===o.operator)throw new Error("enum_contains_all not supported for block coercion");(0,r().HB)(o.operator)},status:function(e){const{filter:t,propertySchema:o}=e,n=o.groups??[],i=o.options??[];if("is_empty"===t.operator)return{type:"status",option:void 0,group:void 0};if("is_not_empty"===t.operator)return{type:"status",option:o.options&&o.options.length>0?o.options[0].value:void 0,group:o.groups&&o.groups.length>0?o.groups[0].name:void 0};const s=(0,a().V6)(t);if(0===s.length)return;const l=n.map((e=>{const t=i.filter((t=>{var o;return null===(o=e.optionIds)||void 0===o?void 0:o.includes(t.id)}));return{group:e,groupOptions:t}}));if("status_is"===t.operator){const{type:e,value:t}=s[0];if("is_group"===e){var c;const e=n.findIndex((e=>e.name.toLowerCase()===(null==t?void 0:t.toLowerCase()))),o=e>=0?l[e]:void 0;return{type:"status",group:null==o?void 0:o.group.name,option:null==o||null===(c=o.groupOptions[0])||void 0===c?void 0:c.value}}if("is_option"===e){const e=i.find((e=>e.value===t)),o=e&&n.find((t=>{var o;return null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id)}));return{type:"status",group:null==o?void 0:o.name,option:null==e?void 0:e.value}}(0,r().HB)(e)}if("status_is_not"===t.operator)return{type:"status",group:void 0,option:void 0};(0,r().HB)(t.operator)},relation:function(e){var t;const{filter:o,value:n,propertySchema:i,relativeVariableResult:s,currentPageInRelatedCollection:l}=e;if("is_empty"===o.operator)return{type:"relation",value:void 0};if("is_not_empty"===o.operator)return;const c=(0,a().Rh)(o),d=null===(t=c[0])||void 0===t?void 0:t.type;let u;var p;if("exact"===d)u=null===(p=c[0])||void 0===p?void 0:p.value;else if("relative"===d){var m,g,f;const e=null===(m=i.collection_pointer)||void 0===m?void 0:m.id;if(!e||!s)return;var v,h;if("builtin"===(null===(g=c[0])||void 0===g?void 0:g.value.type))u=null==s||null===(v=s[e])||void 0===v?void 0:v[null===(h=c[0])||void 0===h?void 0:h.value.variable];else"current_page_in_related_collection"===(null===(f=c[0])||void 0===f?void 0:f.value.type)&&(u=l)}if(void 0===u)return;const _=n.value||[];return"relation_contains"===o.operator?{type:"relation",value:[..._,{id:u,table:w().ev,spaceId:0!==_.length?_[0].spaceId:void 0}]}:"relation_does_not_contain"===o.operator?{type:"relation",value:_.filter((e=>e.id!==u))}:void(0,r().HB)(o.operator)},person:function(e){const{filter:t,userFilterContext:o,value:i}=e,{userId:s}=o;if("is_empty"===t.operator)return{type:"person",value:void 0};if("is_not_empty"===t.operator)return s?{type:"person",value:[{table:k().oo,id:s}]}:void 0;const l=(0,a().Wf)(t)[0];if(!l)return;const c=(0,a().Xz)({operatorValue:l,userId:s});if(void 0===c)return;const d=i.value||[];return"person_contains"===t.operator?{type:"person",value:[...d,c]}:"person_does_not_contain"===t.operator?{type:"person",value:d.filter((e=>!n().n4(e,c)))}:void(0,r().HB)(t.operator)},number:function(e){const{filter:t}=e;if("is_empty"===t.operator)return{type:"number",value:void 0};if("is_not_empty"===t.operator)return{type:"number",value:0};const o=t.value.value;return void 0===o||n().yr(o)?void 0:"number_equals"===t.operator||"number_greater_than_or_equal_to"===t.operator||"number_less_than_or_equal_to"===t.operator?{type:"number",value:o}:"number_less_than"===t.operator?{type:"number",value:o-1}:"number_greater_than"===t.operator?{type:"number",value:o+1}:"number_does_not_equal"===t.operator?{type:"number",value:void 0}:void(0,r().HB)(t.operator)},date:function(e){const{filter:t,userFilterContext:o,value:n}=e,{userTimeZone:i,userStartOfWeek:s}=o;if("is_empty"===t.operator)return{type:"date",value:void 0};if("is_not_empty"===t.operator)return{type:"date",value:m().Ec(i)};const l=n.value;if((0,a().Cw)(t)){const e=(0,a().At)({operatorValue:t.value,userTimeZone:i,userStartOfWeek:s});if(void 0===l){const t=m().Ec(i),o=m().AA(t,i).start.valueOf();return void 0!==e.start&&void 0!==e.end&&o>=e.start&&o<=e.end?{type:"date",value:t}:void 0!==e.start?{type:"date",value:m().p6(e.start,i)}:void 0!==e.end?{type:"date",value:m().p6(e.end,i)}:void 0}const o=m().AA(l,i).start.valueOf();return void 0!==e.end&&o>e.end?{type:"date",value:V({dateValue:l,timestamp:e.end,userTimeZone:i})}:void 0!==e.start&&o<e.start?{type:"date",value:V({dateValue:l,timestamp:e.start,userTimeZone:i})}:void 0}const c=t.value,d=(0,a().$Q)({operatorValue:c,userTimeZone:i});if(void 0!==d){if("date_is"===t.operator||"date_is_on_or_before"===t.operator||"date_is_on_or_after"===t.operator)return l?{type:"date",value:V({dateValue:l,timestamp:d,userTimeZone:i})}:{type:"date",value:m().p6(d,i)};if("date_is_before"===t.operator){const e=m().K1({date:d,daysToAdd:-1});return l?{type:"date",value:V({dateValue:l,timestamp:e,userTimeZone:i})}:{type:"date",value:m().p6(e,i)}}if("date_is_after"===t.operator){const e=m().K1({date:d,daysToAdd:1});return l?{type:"date",value:V({dateValue:l,timestamp:e,userTimeZone:i})}:{type:"date",value:m().p6(e,i)}}(0,r().HB)(t.operator)}},file:function(e){const{filter:t}=e;if("is_empty"===t.operator)return{type:"file",value:void 0};"is_not_empty"!==t.operator&&(0,r().HB)(t)},location:()=>{},verification:function(e){const{filter:t}=e;if("verification_is"===t.operator)return{type:"verification",value:void 0};"verification_is_not"!==t.operator&&(0,r().HB)(t.operator)},geo_point:()=>{}};function z(e){const{filter:t,block:o,schema:n,propertyMapping:s,userFilterContext:l,relativeVariableResult:c,currentPageInRelatedCollection:d,getRecordModel:u,intl:p,resultCache:m,regExpCache:g,experimentService:f}=e,{userId:v,userTimeZone:h,userStartOfWeek:b}=l,S=t.filters||[];if(0===S.length)return{type:"passesFilter"};if((0,a().oR)({context:{schema:n,userId:v,userTimeZone:h,userStartOfWeek:b,relativeVariableResult:c,currentPageInRelatedCollection:d,intl:p,collectionFeatureGates:(0,i().v)({experimentService:f,actor:v?{table:k().oo,id:v}:void 0,spaceId:o.spaceId})},propertyMapping:s,filter:t})({block:o,getRecordModel:u,propertyMapping:s,resultCache:m,regExpCache:g,experimentService:f,formulasModule:void 0}))return{type:"passesFilter"};if("or"===t.operator){const e=S.map((e=>(0,a().yX)(e)?q({intl:p,block:o,schema:n,propertyMapping:s,property:e.property,filter:e.filter,userFilterContext:l,getRecordModel:u,relativeVariableResult:c,currentPageInRelatedCollection:d,resultCache:m,regExpCache:g,experimentService:f}):(0,a().LB)(e)?{type:"failsFilter"}:(0,a().dU)(e)?z({filter:e,intl:p,block:o,schema:n,propertyMapping:s,userFilterContext:l,relativeVariableResult:c,currentPageInRelatedCollection:d,getRecordModel:u,resultCache:m,regExpCache:g,experimentService:f}):void(0,r().HB)(e)));if(e.some((e=>"passesFilter"===e.type)))return{type:"passesFilter"};const t=e.find((e=>"coercedByFilter"===e.type));return t||(e.find((e=>"failsFilter"===e.type))||{type:"failsFilter"})}const I=[...S];I.reverse();let A="passesFilter";const x={};let C=o;const M=_().b4_.tryUntilFound(_().b4_.fromMonomorphicFunctionUnsafe((e=>{let{table:t,id:o}=e;if(t===w().ev&&o===C.id)return C}),y().xb.fromMonomorphicFunctionUnsafe((e=>{let{table:t,id:o}=e;if(t===w().ev&&o===C.id)return C.__IM_SORRY__getValue()}))),u);for(const r of I){if((0,a().LB)(r))continue;const e=(0,a().yX)(r)?q({intl:p,block:C,schema:n,propertyMapping:s,property:r.property,filter:r.filter,userFilterContext:l,getRecordModel:M,relativeVariableResult:c,currentPageInRelatedCollection:d,resultCache:m,regExpCache:g,experimentService:f}):z({filter:r,intl:p,block:C,schema:n,propertyMapping:s,userFilterContext:l,relativeVariableResult:c,currentPageInRelatedCollection:d,getRecordModel:M,resultCache:m,regExpCache:g,experimentService:f});"coercedByFilter"===e.type&&"passesFilter"===A&&(A="coercedByFilter"),"failsFilter"===e.type&&(A="failsFilter"),("coercedByFilter"===e.type||"failsFilter"===e.type&&e.update)&&(Object.assign(x,e.update),C=T(o,x))}return"passesFilter"===A?{type:A}:{type:A,update:x}}function q(e){const{filter:t,block:o,property:n,schema:r,propertyMapping:l,userFilterContext:c,getRecordModel:u,relativeVariableResult:p,currentPageInRelatedCollection:m,intl:g,resultCache:f,regExpCache:v,experimentService:h}=e,{userId:_,userTimeZone:b,userStartOfWeek:y}=c;if((0,a().ts)({context:{schema:r,userId:_,userTimeZone:b,userStartOfWeek:y,relativeVariableResult:p,currentPageInRelatedCollection:m,intl:g,collectionFeatureGates:(0,i().v)({experimentService:h,actor:_?{table:k().oo,id:_}:void 0,spaceId:o.spaceId})},filter:t,property:n,propertyMapping:l,depth:0})({block:o,getRecordModel:u,propertyMapping:l,resultCache:f,regExpCache:v,experimentService:h,formulasModule:void 0}))return{type:"passesFilter"};if((0,a().s1)(t))return{type:"failsFilter"};const S=(null==l?void 0:l[n])??n,w=r[S];if(!w)return{type:"failsFilter"};if(!(0,s().tI)(w))return{type:"failsFilter"};const I=(0,s().IS)(w.type),A=(0,s().hz)({filterValueType:I,block:o,propertyValue:d().yQ(o,S,u),propertySchema:w,getRecordModel:u,collectionRequestContext:{userId:_,userTimeZone:b,intl:g,depth:0,visitedProperties:new Set,resultCache:f,regExpCache:v,experimentService:h,collectionFeatureGates:(0,i().v)({experimentService:h,actor:_?{table:k().oo,id:_}:void 0,spaceId:o.spaceId})},skipDefault:!0}),x=(0,j[I])({filter:t,value:A,propertySchema:w,userFilterContext:c,relativeVariableResult:p,currentPageInRelatedCollection:m});if(void 0===x)return{type:"failsFilter"};return{type:"coercedByFilter",update:{[S]:(0,s().bv)({propertyType:w.type,filterValue:x})}}}function H(e,t){const o=e.name.trim().toLowerCase(),r=t.name.trim().toLowerCase(),i=n().Nt(o),a=new RegExp(`^${i}( [0-9]*)?$`,"g"),s=n().Nt(r),l=r?new RegExp(`^${s}( [0-9]*)?$`,"g"):void 0;return Boolean(r.match(a)||l&&o.match(l))}function W(e){const{blockProperties:t,oldSchema:o,newSchema:n,typesMatch:r,oldPropertyMapping:i,newPropertyMapping:a}=e,s=Object.keys(o),l=Object.keys(n),c=function(e){const{blockProperties:t,oldSchema:o,newSchema:n}=e,r={},i=null==t?void 0:t.title,a=A().Fbh(i),[s]=A().Cok(i),{person:[l],date:[c]}=x(n),{person:[d],date:[u]}=x(o);if(l&&(null==t||!t[l])&&!d&&a.length>0){const e=Array.from(new Set(a));r[l]=(0,h().A)(e.map((e=>A().wmz(A().P4h(e)))),(()=>C))}return!c||null!=t&&t[c]||u||!s||(r[c]=[A().wmz(A().Ww9(s))]),r}({blockProperties:t,oldSchema:o,newSchema:n}),d={propertyUpdate:c,newSchema:n},p=["relation","auto_increment_id","verification"];for(const m of s){const e=o[m],s=null==t?void 0:t[m];if(e&&!p.includes(e.type)){if(r){const e=u().u9.derivePropertyUri(m,i),o=e?null==a?void 0:a[e]:void 0;if(o&&o!==m){d.propertyUpdate[o]=(null==t?void 0:t[m])||null,d.propertyUpdate[m]=null;continue}}if(s){const r=l.find((e=>m===e))||l.find((t=>{const o=n[t];if(void 0!==o&&e.type===o.type)return H(e,o)}));if(r&&d.propertyUpdate)r!==m&&(d.propertyUpdate[r]=t[m]||null,d.propertyUpdate[m]=null);else{const e=v().JW(),n=o[m];d.newSchema={...d.newSchema,[e]:n},d.propertyUpdate&&(d.propertyUpdate[e]=t[m]||null,d.propertyUpdate[m]=null)}}}}return d}function K(e){const{block:t,schema:o,property:i,oldValue:a,newValue:s}=e;if(void 0===a.value)return{};if(void 0===s.value)return{};const c=t.getProperties();if(!c)return{};const u=c[i];if(!u)return{};const p=o[i];if(!p)return{};if(!(0,l().Eg)(p))return{};if("status"===p.type||"select"===p.type||"multi_select"===p.type||"checkbox"===p.type)return function(e){const{propertySchema:t,property:o,oldValue:n,newValue:i,propertyValue:a}=e;if(void 0===n.value)return{};if(void 0===i.value)return{};if(!(0,l().Eg)(t))return{};if("select"===t.type){if("select"!==n.type||"select"!==i.type)return{};if(void 0===i.value)return{};const e=d().yH(a);return 0===e.length&&void 0===n.value||e.some((e=>(e||"").trim().toLowerCase()===(n.value||"").trim().toLowerCase()))?{[o]:d().U8(i.value)}:{}}if("multi_select"===t.type){if("multi_select"!==n.type||"multi_select"!==i.type)return{};if(void 0===i.value)return{};const e=d().yH(a);if(!e.some((e=>e.trim().toLowerCase()===(n.value||"").trim().toLowerCase())))return{};const t=i.value,r=e.map((e=>e.trim().toLowerCase()===(n.value||"").trim().toLowerCase()?t:e));return{[o]:d().rK(r)}}if("status"===t.type){const e=t.groups??[],r=t.options??[];if("checkbox"===n.type&&"status"===i.type){if(d().wu(a)!==n.value)return{};let t;if("by_group"===i.value.type){const o=i.value.group,n=e.find((e=>e.name===o)),a=r.find((e=>{var t;return e.id===(null==n||null===(t=n.optionIds)||void 0===t?void 0:t[0])}));t=null==a?void 0:a.value}else t=i.value.option;if(t)return{[o]:d().wb(t)}}var s;return"status"===n.type&&"status"===i.type?"by_option"!==n.value.type||"by_option"!==i.value.type||(null===(s=d().yH(a))||void 0===s?void 0:s[0])!==n.value.option?{}:{[o]:d().wb(i.value.option)}:{}}if("checkbox"===t.type)return"status"!==n.type||"checkbox"!==i.type||"by_option"!==n.value.type?{}:d().yH(a).includes(n.value.option)?{[o]:d().rN(i.value)}:{};(0,r().HB)(t)}({propertySchema:p,property:i,propertyValue:u,oldValue:a,newValue:s});if("person"===p.type){if("person"!==a.type||"person"!==s.type)return{};if(void 0===a.value)return{};if(void 0===s.value)return{};const e=s.value,o=a.value,r=_().Bj6.fromBlock(t),l=d().e5({textValue:u,propertySchema:p,blockCreatorPointer:r.getCreatedByPointer()});if(!l.some((e=>n().n4(e,o))))return{};const c=l.map((t=>n().n4(t,o)?e:t));return{[i]:d().AH(c)}}if("relation"===p.type){if("relation"!==a.type||"relation"!==s.type||void 0===a.value||void 0===s.value)return{};if((0,l().zx)(a.value)||(0,l().zx)(s.value))return{};const e=s.value,t=a.value,o=d().n(u);if(!o.some((e=>(0,S().Z2)(e,t))))return{};const n=o.map((o=>(0,S().Z2)(o,t)?e:o));return{[i]:d().Ap(n)}}if((0,l().Vs)(p.type)){if(a.type!==p.type||s.type!==p.type||void 0===a.value||void 0===s.value||"exact"!==a.value.type||"exact"!==s.value.type)return{};return A().q4_(u)!==a.value.value?{}:{[i]:(0,A().x9d)(s.value.value)}}if("date"===p.type||"number"===p.type||"formula"===p.type||"created_by"===p.type||"last_edited_by"===p.type||"created_time"===p.type||"last_edited_time"===p.type||"location"===p.type||"last_visited_time"===p.type)return{};(0,r().HB)(p.type)}function G(e){const{block:t,schema:o,property:n,groupBy:r,value:i,timeZone:s,intl:c,getRecordModel:d,resultCache:u,regExpCache:p,experimentService:g,collectionFeatureGates:f}=e,v=o[n];if(!v||!(0,l().Eg)(v)||t.is_template)return!1;const h=E({schema:o,propertyMapping:void 0,group:{property:n,value:i},groupBy:r,timeZone:s,experimentService:g});if(!h)return!1;return(0,a().oR)({filter:{operator:"and",filters:[h]},propertyMapping:void 0,context:{schema:o,intl:c,userId:void 0,userTimeZone:"UTC",userStartOfWeek:(0,m().Lm)(),relativeVariableResult:void 0,currentPageInRelatedCollection:void 0,collectionFeatureGates:f}})({block:t,getRecordModel:d,propertyMapping:void 0,resultCache:u,regExpCache:p,experimentService:g,formulasModule:void 0})}const $={Todo:"To-do","To-do":"To-do","To do":"To-do","Not started":"To-do",Backlog:"To-do",Incomplete:"To-do",Waiting:"To-do","On hold":"To-do",Later:"To-do",Blocked:"To-do","In progress":"In progress",Building:"In progress",Designing:"In progress",Research:"In progress",Scoping:"In progress",Planning:"In progress","Needs review":"In progress",Reviewed:"In progress",Review:"In progress",Pending:"In progress",Recurring:"In progress","Review needed":"In progress","Edits needed":"In progress",Editing:"In progress",Complete:"Complete",Completed:"Complete",Done:"Complete",Finished:"Complete",Archive:"Complete",Archived:"Complete",Deleted:"Complete",Published:"Complete",Reverted:"Complete"};function Y(e,t,o){var r;const i=(0,c().D)(e,o),a=i.groups??[],s=i.options??[],l=n().d4($,((e,t)=>t.toLowerCase())),d=new Set,u=new Set;for(const n of t){const e=s.findIndex((e=>e.value.toLowerCase()===n.value.toLowerCase()));if(e>-1){const t=s[e];if(!d.has(t.id)){u.add(n.id),d.add(t.id),s[e]={...n,id:t.id};continue}}const t=l[n.value.toLowerCase()],o=a.find((e=>e.name===t));var p;if(o)null===(p=o.optionIds)||void 0===p||p.push(n.id),u.add(n.id)}for(const[n,c]of a.entries()){var m;const e=null===(m=c.optionIds)||void 0===m?void 0:m.some((e=>u.has(e)));c.optionIds=(c.optionIds??[]).filter((t=>!(!u.has(t)&&!d.has(t))||!e))}null==a||null===(r=a[0].optionIds)||void 0===r||r.push(...t.filter((e=>!u.has(e.id))).map((e=>e.id)));const g=[...s,...t],f=[];for(const n of a)for(const e of n.optionIds??[]){const t=g.find((t=>t.id===e));t&&f.push(t)}return{type:"status",name:e,groups:a,options:f}}},592678:(e,t,o)=>{o.d(t,{Mb:()=>s,Qn:()=>l,Vt:()=>d,Zm:()=>c,tC:()=>r});var n=()=>o(522945);const r={mouse:6,finger:0,stylus:6},i=3,a=4;function s(e){return e.button===i||e.button===a}function l(e){return e&&"stylus"===e.touchType?"stylus":"finger"}function c(){return n().$C.moved}function d(e){return!!e.isTrusted&&c()}},594013:(e,t,o)=>{o.d(t,{EZ:()=>s,Iw:()=>h,ZS:()=>l,o_:()=>d,tH:()=>g});o(898992),o(354520);var n=()=>o(708685),r=()=>o(921598),i=()=>o(713998),a=()=>o(499755);function s(e){let{collectionSchema:t,axisChartType:o}=e;const n=c({collectionSchema:t});if(!n)return;const r=d({property:n,collectionSchema:t,hideEmptyGroups:!1});if(!r)return;const i="formula"===r.type?r.groupBy.sort:r.sort;let s="column";switch(o){case"bar":s="bar";break;case"line":s="line";break;case"column":case void 0:s="column"}return{chartFormat:{axisHideEmptyGroups:r.hideEmptyGroups,mainSort:(0,a().gN)(i)},type:o??"column",dataConfig:{type:"groups_reducer",groupBy:r,aggregationConfig:{aggregation:{aggregator:"count"},seriesFormat:{displayType:s},stackOptions:void 0}}}}function l(e){let{collectionSchema:t}=e;const o=c({collectionSchema:t});if(!o)return;const n=d({property:o,collectionSchema:t,hideEmptyGroups:!0});if(!n)return;const r=(0,i()._g)({schema:t,property:o});if(!r)return;const s="formula"===n.type?n.groupBy.sort:n.sort;return{chartFormat:{axisHideEmptyGroups:n.hideEmptyGroups,mainSort:r&&(0,a().e0)(r)?a().S0.yDescending:(0,a().gN)(s)},type:"donut",dataConfig:{type:"groups_reducer",groupBy:n,aggregationConfig:{aggregation:{aggregator:"count"}}}}}function c(e){let{collectionSchema:t}=e;return Object.keys(t).filter((e=>{const o=(0,i()._g)({schema:t,property:e});return!!o&&(0,r().Eg)(o)})).sort(((e,o)=>function(e,t,o){const n=(0,i()._g)({schema:o,property:e}),a=(0,i()._g)({schema:o,property:t});if(!(n&&(0,r().rj)(n.type)&&a&&(0,r().rj)(a.type)))return 0;const s=u[n.type],l=u[a.type];return void 0===s||void 0===l?0:s-l}(e,o,t)))[0]}function d(e){let{property:t,collectionSchema:o,hideEmptyGroups:a}=e;const s=(0,i()._g)({schema:o,property:t});if(s&&(0,r().Eg)(s)){if((0,r()._o)(s.type))return{type:s.type,property:t,groupBy:"day",sort:{type:"ascending"}};if("number"===s.type)return{type:s.type,property:t,groupBy:{type:"unique"},start:-1,end:-1,size:-1,sort:{type:"ascending"}};if("formula"===s.type){const e=(0,n().getFormulaPropertySchemaResultType)(s);if("number"===e)return{type:"formula",property:t,groupBy:{type:"number",groupBy:{type:"unique"},start:-1,end:-1,size:-1,sort:{type:"ascending"}}};if("date"===e)return{type:s.type,property:t,groupBy:{type:"date",groupBy:"day",sort:{type:"ascending"}}}}return(0,r().V0)({property:t,propertySchema:s,hideEmptyGroups:a})}}const u={select:0,multi_select:0,status:0,date:1,number:1,person:1,relation:2,checkbox:3,created_time:3,created_by:3,last_edited_by:3,last_edited_time:3,last_visited_time:3,text:3,title:3,url:4,email:4,phone_number:4,formula:5},p=["title","text"];function m(e){return p.includes(e)}function g(e){if("formula"===e.type){const t=(0,n().getFormulaPropertySchemaResultType)(e);return"array"!==t&&"block"!==t&&"unknown"!==t&&m(t)}return m(e.type)}const f=["number"];function v(e){return f.includes(e)}function h(e){if("formula"===e.type){const t=(0,n().getFormulaPropertySchemaResultType)(e);return"array"!==t&&"block"!==t&&"unknown"!==t&&v(t)}return v(e.type)}},594635:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(757695).default.createValue(!1)},594794:(e,t,o)=>{o.d(t,{Gx:()=>g,JH:()=>m,Z1:()=>u,zP:()=>p});var n=()=>o(17022),r=()=>o(206267),i=()=>o(696706),a=()=>o(628536),s=()=>o(999202),l=()=>o(671887),c=()=>o(520348);function d(e,t){(0,s().W)(e,"idschema_client","idschema_client",3600,t)}function u(e){const{environment:t,table:o,spaceId:i}=e;return n().A.withListenerIgnored((()=>{if(!(0,a().ep)(o))return t.idCreator.idInMain(o);if(!i)return d(t,{has_short_id:!1,has_spaceid:!1}),r().JW();const e=l().D.getState();if(e&&i in e){const n=e[i];return d(t,{has_short_id:!0,has_spaceid:!0,debug_msg:"localStorage"}),t.idCreator.idWithSpaceShortId(Number(n),o)}const n=(0,c().Jn)({defaultRecordCache:t.defaultRecordCache,userId:t.currentUser.id,spaceId:i});return n&&n.short_id_str?(d(t,{has_short_id:!0,has_spaceid:!0}),t.idCreator.idWithSpaceShortId(Number(n.short_id_str),o)):(d(t,{has_short_id:!1,has_spaceid:!0}),r().JW())}))}function p(e){const{environment:t,table:o,spaceId:n}=e;return i().L3.fromPointerLike({table:o,id:u({table:o,spaceId:n,environment:t}),spaceId:n})}function m(e){const{environment:t,table:o,spaceId:n}=e;return{table:o,id:u({table:o,spaceId:n,environment:t}),spaceId:n}}function g(e){const{environment:t,spaceId:o}=e;if(void 0===o)return;const n=(0,c().Jn)({defaultRecordCache:t.defaultRecordCache,userId:t.currentUser.id,spaceId:o});return n&&n.short_id_str?Number(n.short_id_str):void 0}},595985:(e,t,o)=>{o.d(t,{A:()=>i});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(803949);var n=()=>o(756279);class r extends(()=>o(757695))().default{getInitialState(){return{capturingAreas:new Set}}getPreventScrollType(){let e=!1,t=!1,o=!1;return this.state.capturingAreas.forEach((r=>{r.preventType===n().A.All?e=!0:r.preventType===n().A.X?t=!0:r.preventType===n().A.Y&&(o=!0)})),e||t&&o?n().A.All:t?n().A.X:o?n().A.Y:n().A.None}}const i=new r},596513:(e,t,o)=>{o.d(t,{J:()=>i,t:()=>r});o(16280),o(581454);var n=()=>o(244641);const r=new(o(848776).U)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{let{spaceId:n}=t;if(n.includes("|"))throw new Error("Invalid spaceId, you're likely passing a spaceUserId instead");const r=await Promise.resolve().then(o.bind(o,449506)),a=await r.callApi({eventName:"getBillingData",environment:e,data:{spaceId:n},headers:(0,o(386164).WS)({cellId:void 0,spaceId:n})});if("success"===a.type&&a.data.billingData)return i(a.data.billingData)}));function i(e){return"admin"===e.type?{type:e.type,externalId:e.externalId,email:e.email,address:e.address,provider:e.provider,clock:{now:n().c9.fromISO(e.clock.now),externalId:e.clock.externalId},paymentMethod:e.paymentMethod,invoices:e.invoices.map((e=>({externalId:e.externalId,status:e.status,paymentIntent:e.paymentIntent,overrides:e.overrides,externalSubscriptionId:e.externalSubscriptionId,dueDate:e.dueDate?n().c9.fromISO(e.dueDate):void 0,createdAt:n().c9.fromISO(e.createdAt)}))),trial:e.trial?{externalId:e.trial.externalId,items:e.trial.items,startDate:n().c9.fromISO(e.trial.startDate),endDate:n().c9.fromISO(e.trial.endDate)}:void 0,subscription:e.subscription?{externalId:e.subscription.externalId,status:e.subscription.status,items:e.subscription.items,unrepresentableReason:e.subscription.unrepresentableReason,startDate:n().c9.fromISO(e.subscription.startDate),trialEnd:e.subscription.trialEnd?n().c9.fromISO(e.subscription.trialEnd):void 0,currentPeriodEnd:n().c9.fromISO(e.subscription.currentPeriodEnd),pending:e.subscription.pending?{items:e.subscription.pending.items,startDate:n().c9.fromISO(e.subscription.pending.startDate)}:void 0}:void 0,lockedCurrencyCode:e.lockedCurrencyCode,taxIds:e.taxIds,accountBalances:e.accountBalances}:{type:e.type,provider:e.provider,subscription:e.subscription}}o(604341).exposeDebugValue("TypedBillingDataStore",r)},596514:(e,t,o)=>{o.d(t,{A:()=>b});var n=o(296540),r=()=>o(56366),i=()=>o(799954),a=()=>o(700500),s=()=>o(959013),l=()=>o(100622),c=()=>o(246826),d=()=>o(317909),u=()=>o(753199),p=()=>o(891078),m=()=>o(24157),g=()=>o(219839),f=()=>o(614505),v=o(474848);const h=(0,s().YK)({inputPlaceholder:{defaultMessage:"Type something…",id:"calloutBlock.inputPlaceholder"},changeIconLabel:{defaultMessage:"Change callout icon",id:"calloutBlock.changeIconLabel"},disabledIconLabel:{defaultMessage:"Callout icon",id:"calloutBlock.disabledIconLabel"}});function _(e,t){const _=(0,o(484714).v3)(),b=(0,s().tz)(),y=(0,n.useRef)(null),S=(0,p().bx)(e.store,e.disabled),w=(0,r().K8)((()=>e.store.getBlockTitleStore()),[e.store]),k=(0,r().K8)((()=>e.store.getContentStore()),[e.store]),I=(0,r().K8)((()=>e.store.getFormat().block_color||"default"),[e.store]),A=(0,r().K8)((()=>e.store.getIcon()),[e.store]),x=(0,r().K8)((()=>e.store.isCalloutV2()),[e.store]),C=(0,n.useCallback)((async t=>{const n=e.store.getIconStore();if(!n)return;const{serverCommitResult:r}=d().createAndCommit({userAction:"CalloutBlock.handleEmojiChange",environment:_,canUndo:!0,perform:e=>{var r;c().KY({store:n,value:t,transaction:e}),"url"!==(null===(r=(0,o(651124).WO)(t))||void 0===r?void 0:r.type)&&o(763884).A.set({userId:_.currentUser.id,key:o(492696).c,value:t??""})}});await r}),[_,e.store]),T=(0,n.useCallback)((()=>{if(!o(508496).default.checkGate({gateName:"migrate_callout_to_v2_on_click"}))return;if(x)return;if(!S)return;let t,n,r,i;"editing"===m().default.state.mode&&(t=m().default.state.multiSelection.start.store,n=m().default.state.multiSelection.end.store,r=m().default.state.multiSelection.start.index,i=m().default.state.multiSelection.end.index);const s=t===e.store.getBlockTitleStore(),l=n===e.store.getBlockTitleStore();d().createAndCommit({userAction:"CalloutBlock.upgradeFromV1ToV2",environment:_,canUndo:!0,perform:t=>{const n=c().Wv({environment:_,type:a().xd.text,inMemoryRecordCache:_.defaultRecordCache.inMemoryRecordCache,transaction:t,spaceId:e.store.pointer.spaceId,properties:{title:e.store.getBlockTitleStore().getValue()}});o(44729).Ti({parentStore:e.store,childStore:n,transaction:t}),o(896628).zA({stores:[e.store],transaction:t,update:{callout_version:2}}),o(606952).KY({environment:_,store:e.store.getBlockTitleStore(),value:[],transaction:t})}}),(s||l)&&void 0!==t&&void 0!==r&&void 0!==n&&void 0!==i&&o(908006).default.afterNextFlush((()=>{var a;const c=null===(a=e.store.getContentStores())||void 0===a?void 0:a[0].getBlockTitleStore();o(725614).setMultiSelection({multiSelection:{start:{store:s?c:t,index:r},end:{store:l?c:n,index:i}}})}))}),[S,_,x,e.store]),M=(0,o(401497).IS)((e=>({root:{display:"flex",width:"100%",borderRadius:4,border:(0,l().Cg)(I)&&"default_background"!==I?"1px solid transparent":`1px solid ${e.darkDividerColor}`,backgroundColor:"transparent",paddingLeft:A?12:20,paddingTop:x?12:16,paddingBottom:x?12:16,paddingRight:20,...(0,l().ed)(I,e)}})),[I,x,A]),{blockInsetRight:P}=(0,n.useContext)(g().n),B=(0,r().K8)((()=>{var t;return null===(t=(0,o(108944).fA)(e.store))||void 0===t?void 0:t.getFormat().page_small_text}),[e.store]),R=(0,r().K8)((()=>{var t;return null===(t=e.store.getContentStores())||void 0===t?void 0:t[0]}),[e.store]),E=(0,r().K8)((()=>null==R?void 0:R.getType()),[R]),D=(0,n.useMemo)((()=>{if(x)return E===a().xd.header?B?8:10:E===a().xd.subHeader?B?4:6:E===a().xd.subSubHeader?B?2:3:B?3:4}),[x,E,B]),N=(0,v.jsx)(o(852302).l,{children:(0,v.jsxs)("div",{role:"note",style:{display:"flex"},ref:y,onClick:t=>{T(),!e.store.hasContent()&&x&&(0,u().SQ)({event:t,context:u().y$.EditorClick,callback:()=>{S&&!(0,o(592678).Vt)(t)&&d().createAndCommit({userAction:"CalloutBlock.handleEmptyClick",environment:_,canUndo:!0,perform:t=>{o(324089)._N({environment:_,store:e.store,transaction:t})}})}})},children:[(0,v.jsxs)("div",{style:{...e.style,...M.root},children:[void 0!==A&&(0,v.jsx)("div",{style:{marginTop:D},children:(0,v.jsx)(o(155004).s,{allowSelectionWithin:!1,children:S?(0,v.jsx)(f().A,{bucket:"secure",store:e.store,isEmptyPage:!1,onChange:C,isCallout:!0,icon:A,size:24,disabled:!1,label:b.formatMessage(h.changeIconLabel)}):(0,v.jsx)(f().A,{icon:A,isEmptyPage:!1,size:24,disabled:!0,label:b.formatMessage(h.disabledIconLabel)})})}),(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,marginLeft:A?8:void 0,width:"100%",minHeight:x?32:void 0},children:[!x&&(0,v.jsx)(o(246722).A,{style:{paddingLeft:i().nE.paddingLeft,paddingRight:i().nE.paddingRight},disabled:e.disabled,store:w,placeholder:b.formatMessage(h.inputPlaceholder),pasteBehavior:"block",inPageFind:o(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),!e.hideContent&&(0,v.jsx)(g().n.Provider,{value:{blockInsetRight:P+M.root.paddingRight},children:(0,v.jsx)(o(99945).A,{disabled:e.disabled,store:k,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableFirstItemHoverMenu:x,disableDrag:e.disableDrag})})]})]}),(0,v.jsx)(o(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,hideIfSidebarOrMarginCommentsVisible:!0})]})});return(0,p().NW)(e.store,t,(0,n.useMemo)((()=>({renderedType:"callout",getNode:()=>y.current,getBlockStore:()=>e.store})),[e.store]),N)}const b=n.memo(n.forwardRef(_),o(821062).A)},597368:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1,items:[],showCancel:!0,keepFocus:!1}}}const r=new n},597755:(e,t,o)=>{o.d(t,{A:()=>a,P:()=>i});var n=()=>o(569238),r=()=>o(939768);function i(e){const t=(0,r().qg)(e);return t.query[n().Bb]="true",(0,r().Gm)({url:(0,r().GP)(t),query:t.query,hash:t.hash||void 0})}function a(e){const t=(0,r().qg)((0,r().ZO)(e));return t.query[n().AY]="true",(0,r().Gm)({url:(0,r().GP)(t),query:t.query,hash:t.hash||void 0})}},597898:(e,t,o)=>{o.d(t,{Bw:()=>u,C$:()=>p,Mc:()=>v,N9:()=>l().N9,P9:()=>g,Se:()=>m,_X:()=>d,zD:()=>f});var n=()=>o(484714),r=()=>o(56366),i=()=>o(857639),a=()=>o(989423),s=()=>o(645873),l=()=>o(411387);const c={PremiumFeatures:new(s().O2)("PremiumFeatures",(()=>o.e(66489).then(o.bind(o,836459))))};function d(e){const t=y("sharedGetPremiumFeatureAvailability"),o=h(y("featureDataLoaders"),e),a=(0,n().v3)();return(0,r().K8)((()=>{if(o&&t)return t({logFunction:i().log.bind(i()),trackFunction:S(a)},o)}),[o,t,a])}async function u(e,t){const o=await b("featureDataLoaders"),n=await b("sharedGetPremiumFeatureAvailability"),r=await b("awaitFeatureData"),a=await r(e,o,t);return n({logFunction:i().log.bind(i()),trackFunction:S(e)},a)}function p(e,t){const o=_("computeFeatureData"),n=_("featureDataLoaders"),r=_("sharedGetPremiumFeatureAvailability");if(!(o&&n&&r))return;const a=o(e,n,t);if(!a)return;if("loading"===a)return;const s=S(e);return r({logFunction:i().log.bind(i()),trackFunction:s},a)}async function m(e,t){const o=await u(e,t);return(await b("isAvailable"))(o)}function g(e){const t=y("featureDataLoaders"),o=y("sharedHasPremiumFeature"),a=h(t,e),s=S((0,n().v3)());return(0,r().K8)((()=>{if(a&&o)return o({logFunction:i().log.bind(i()),trackFunction:s},a)}),[a,o,s])}function f(e,t){const o=p(e,t),n=_("isAvailable");return!(!o||!n)&&n(o)}function v(e){const t=y("sharedGetPremiumFeatureAvailabilityForDesiredState"),o=h(y("featureDataLoaders"),e),a=S((0,n().v3)());return(0,r().K8)((()=>{if(!o||!t)return;const n=e.state;return t({logFunction:i().log.bind(i()),trackFunction:a},{...o,state:n})}),[o,t,e.state,a])}function h(e,t){const o=(0,n().v3)(),i=y("computeFeatureData");return(0,r().K8)((()=>{if(!e)return;const n=null==i?void 0:i(o,e,t);return"loading"===n?void 0:n}),[o,t,e,i],{debugName:`useFeatureData(${t.name})`,useDeepEqual:!0})}function _(e){c.PremiumFeatures.load();const t=c.PremiumFeatures.getLoadingState();if("resolved"===t.status)return t.value[e]}async function b(e){return await c.PremiumFeatures.load().then((t=>t[e]))}function y(e){var t;const o=(0,s().fJ)(c.PremiumFeatures);return null==o||null===(t=o.value)||void 0===t?void 0:t[e]}function S(e){return function(t){(0,a().u4)({environment:e,event:{eventName:"premium_feature_availability",eventProperties:t},opts:{sampling:{behavior:"custom",sampleRate:.01}}})}}},599364:(e,t,o)=>{o.d(t,{LN:()=>c,ko:()=>l,oc:()=>s});var n=()=>o(857639),r=()=>o(742852),i=()=>o(878377),a=()=>o(416726);const s=(0,a().Ls)({key:"copy link to page",displayName:a().AY.copyLinkNavigableTypeName,analyticsName:a().AY.copyLinkNavigableTypeName.defaultMessage,svg:r().w,validators:[i().M3g,i().vXb,i()._fc,i().AU6(i().i6S),i().AU6(i().oy3)],closeParentMenu:!0,track:{actionName:"copy_block_link"},action:(e,t,o)=>{let{lazyDependencies:r,...i}=t;const{clipboardActions:a}=r;a?a.copyLinkToBlock({...i,event:o,callback:e}):n().log({data:{miscDataToConvertToString:{actionKey:"copy link to page"}},from:"copyActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),l=(0,a().Fw)({key:"copy link to block",displayName:a().AY.copyLinkName,analyticsName:a().AY.copyLinkName.defaultMessage,svg:r().w,shortcuts:["copyLinkToBlock"],validators:[i().M3g,i().vXb,i().AU6(i()._fc),i().AU6(i().i6S),i().AU6(i().bdp),i().AU6(i().IuJ)],closeParentMenu:!0,track:{actionName:"copy_block_link"},action:(e,t,o)=>{let{lazyDependencies:r,...i}=t;const{clipboardActions:a}=r;a?a.copyLinkToBlock({...i,event:o,callback:e}):n().log({data:{miscDataToConvertToString:{actionKey:"copy link to block"}},from:"copyActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),c=(0,a().Ls)({key:"convert to link mention",displayName:a().AY.convertToLinkMentionName,analyticsName:a().AY.convertToLinkMentionName.defaultMessage,svg:o(3284).Q,validators:[i().M3g,i().vXb,i().bLC("bookmark")],closeParentMenu:!0,action:(e,t)=>{o(443120).uS({...e,event:t})}})},599824:(e,t,o)=>{o.d(t,{E:()=>l});var n=()=>o(857639),r=()=>o(875856),i=()=>o(351360);const a=new Map;async function s(e,t){t.loggedIn&&await i().default.waitUntilRendered();const{callApi:a}=await Promise.resolve().then(o.bind(o,449506)),s=await a({eventName:"getUserAnalyticsSettings",environment:e,data:{}});if("success"!==s.type)return void n().log({level:"warning",from:"analyticsHelpers",type:"fetchAnalyticsSettings",data:{miscDataToConvertToString:{response:s}}});const l=s.data;return r().default.setState(l),l}async function l(e){const t=e.currentUser.id;if(t){if(!a.has(t)){const o=s(e,{loggedIn:!0});a.set(t,o),o.then((()=>{a.delete(t)})).catch((e=>{throw a.delete(t),e}))}return a.get(t)}return s(e,{loggedIn:!1})}},599945:(e,t,o)=>{o.d(t,{c:()=>c});o(296540);var n=()=>o(484714),r=()=>o(792485),i=()=>o(56366),a=()=>o(559378),s=()=>o(99042),l=o(474848);function c(e){let{children:t,store:o,step:c}=e;const d=(0,r().S)(),u=(0,n().v3)();return(0,i().K8)((()=>{const e=a().A.getCurrentStepBlockId(),t=d&&d.publicEditModeStore.state.hasPublicPermission;return!!(a().A.isActiveDemo()&&t&&null!=o&&o.id)&&(!u.device.isMobile&&e===o.id)}),[d,null==o?void 0:o.id,u.device.isMobile])?(0,l.jsx)(s().F,{step:c,children:t}):t}},600871:(e,t,o)=>{o.d(t,{Xi:()=>a,mM:()=>s,nh:()=>i});var n=()=>o(711059),r=()=>o(155959);let i=function(e){return e[e.Bottom=0]="Bottom",e[e.Floating=1]="Floating",e}({});function a(e){const{environment:t}=e;return!t.device.isIOS&&!t.device.isAndroid}function s(e){var t;const{environment:o}=e;if(null===(t=o.mobileNative)||void 0===t||!t.api.openUpgradeModal)return!1;if((0,r().T)("supportsPlusIAP"))return!0;if(!o.device.isIOS)return!1;{if(!o.device.mobileAppVersion)return!1;const e=n().parseVersion(o.device.mobileAppVersion),t=n().parseVersion("0.4.165");if(!e||!t)return!1;return!n().isLessThanVersion(e,t)}}},601734:(e,t,o)=>{o.d(t,{Aw:()=>r,EU:()=>i,Nv:()=>s,t:()=>a});var n=()=>o(645873);const r=new(n().O2)("AppTemplates",(async()=>{const[{AppInitializationOverlay:e},t,n,r,i,{appConfigs:a},{default:s},{HorizontalTemplatePicker:l}]=await Promise.all([Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(90409),o.e(74562),o.e(95794),o.e(28271),o.e(17254),o.e(67435),o.e(78846),o.e(13324),o.e(15724),o.e(81141),o.e(72915),o.e(69689),o.e(43647),o.e(7522),o.e(49963),o.e(31517)]).then(o.bind(o,965072)),Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(90409),o.e(74562),o.e(95794),o.e(28271),o.e(17254),o.e(67435),o.e(78846),o.e(13324),o.e(15724),o.e(81141),o.e(72915),o.e(69689),o.e(43647),o.e(7522),o.e(49963),o.e(31517)]).then(o.bind(o,83027)),Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(90409),o.e(74562),o.e(95794),o.e(28271),o.e(17254),o.e(67435),o.e(78846),o.e(13324),o.e(15724),o.e(81141),o.e(72915),o.e(69689),o.e(43647),o.e(7522),o.e(49963),o.e(31517)]).then(o.bind(o,767435)),Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(90409),o.e(74562),o.e(95794),o.e(28271),o.e(17254),o.e(67435),o.e(78846),o.e(13324),o.e(15724),o.e(81141),o.e(72915),o.e(69689),o.e(43647),o.e(7522),o.e(49963),o.e(31517)]).then(o.bind(o,937943)),Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(90409),o.e(74562),o.e(95794),o.e(28271),o.e(17254),o.e(67435),o.e(78846),o.e(13324),o.e(15724),o.e(81141),o.e(72915),o.e(69689),o.e(43647),o.e(7522),o.e(49963),o.e(31517)]).then(o.bind(o,925496)),Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(90409),o.e(74562),o.e(95794),o.e(28271),o.e(17254),o.e(67435),o.e(78846),o.e(13324),o.e(15724),o.e(81141),o.e(72915),o.e(69689),o.e(43647),o.e(7522),o.e(49963),o.e(31517)]).then(o.bind(o,617254)),Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(90409),o.e(74562),o.e(95794),o.e(28271),o.e(17254),o.e(67435),o.e(78846),o.e(13324),o.e(15724),o.e(81141),o.e(72915),o.e(69689),o.e(43647),o.e(7522),o.e(49963),o.e(31517)]).then(o.bind(o,316091)),Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(62475),o.e(3151),o.e(98629),o.e(58550),o.e(22900),o.e(85128),o.e(95555),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(72915),o.e(28721),o.e(69689),o.e(23463),o.e(25426),o.e(6463),o.e(91056),o.e(26483),o.e(29333),o.e(5396),o.e(1440),o.e(34576),o.e(95810),o.e(89109),o.e(3560),o.e(77169),o.e(24071),o.e(68610),o.e(67064),o.e(49978),o.e(3720),o.e(47762),o.e(85475),o.e(11740),o.e(97996),o.e(5066),o.e(35299),o.e(68117),o.e(14267),o.e(33731),o.e(30016),o.e(14410),o.e(49471),o.e(31185),o.e(75681)]).then(o.bind(o,614344))]);return{AppInitializationOverlay:e,templatePickerItems:t,appTemplatesSetupActions:n,untypedFeaturesSetupActions:r,appTemplatesSprintBoardActions:i,appConfigs:a,TemplatePickerTemplateList:s,HorizontalTemplatePicker:l}})),i=(0,n()._h)(r,(e=>e.AppInitializationOverlay)),a=(0,n()._h)(r,(e=>e.TemplatePickerTemplateList)),s=(0,n()._h)(r,(e=>e.HorizontalTemplatePicker))},601813:(e,t,o)=>{o.d(t,{Qe:()=>u,l8:()=>d});o(944114),o(898992),o(354520),o(672577),o(430670),o(803949),o(581454),o(908872),o(737550);var n=()=>o(496603),r=()=>o(534177),i=()=>o(397277),a=()=>o(919709),s=()=>o(220719);const l=(0,o(959013).YK)({addLabel:{id:"suggestionContext.label.add",defaultMessage:"Add"},removeLabel:{id:"suggestionContext.label.remove",defaultMessage:"Delete"},labelForReplaceOldText:{id:"suggestionContext.label.replaceOld",defaultMessage:"Replace"},labelForReplaceNewText:{id:"suggestionContext.label.replaceNew",defaultMessage:"with"},boldLabel:{id:"suggestionContext.label.bold",defaultMessage:"Bold"},unboldLabel:{id:"suggestionContext.label.unbold",defaultMessage:"Unbold"},italicLabel:{id:"suggestionContext.label.italic",defaultMessage:"Italicize"},unitalicLabel:{id:"suggestionContext.label.unitalic",defaultMessage:"Unitalicize"},strikeLabel:{id:"suggestionContext.label.strike",defaultMessage:"Strike through"},unstrikeLabel:{id:"suggestionContext.label.unstrike",defaultMessage:"Remove strike through"},underlineLabel:{id:"suggestionContext.label.underline",defaultMessage:"Underline"},removeUnderlineLabel:{id:"suggestionContext.label.remove underline",defaultMessage:"Remove underline"},codeStyleLabel:{id:"suggestionContext.label.codeStyle",defaultMessage:"Mark as code"},removeCodeStyleLabel:{id:"suggestionContext.label.remove codeStyle",defaultMessage:"Remove code style"},addLinkLabel:{id:"suggestionContext.label.addLink",defaultMessage:"Add link"},removeLinkLabel:{id:"suggestionContext.label.removeLink",defaultMessage:"Remove link"},highlightLabel:{id:"suggestionContext.label.highlight",defaultMessage:"Highlight"},removeHighlightLabel:{id:"suggestionContext.label.removeHighlight",defaultMessage:"Remove highlight"},undefinedOpLabel:{id:"suggestionContext.label.undefinedOp",defaultMessage:"Undefined operation"},lineBreak:{id:"suggestionContext.text.linebreak",defaultMessage:"line break"},lineBreaks:{id:"suggestionContext.text.linebreaks",defaultMessage:"line breaks"},block:{id:"suggestionContext.text.block",defaultMessage:"block"},page:{id:"suggestionContext.text.page",defaultMessage:"page"},blocks:{id:"suggestionContext.text.blocks",defaultMessage:"blocks"}}),c={[a().Ifu.Bold]:[l.boldLabel,l.unboldLabel],[a().Ifu.Italic]:[l.italicLabel,l.unitalicLabel],[a().Ifu.Strike]:[l.strikeLabel,l.unstrikeLabel],[a().Ifu.Underline]:[l.underlineLabel,l.removeUnderlineLabel],[a().Ifu.Code]:[l.codeStyleLabel,l.removeCodeStyleLabel],[a().Ifu.Link]:[l.addLinkLabel,l.removeLinkLabel],[a().Ifu.Highlight]:[l.highlightLabel,l.removeHighlightLabel]};function d(e){const{discussionContextData:t,discussionId:o,discussionType:n,excludeLabel:l,intl:c}=e;if("default"===n){let e;const o=t[0];return"textValue"===o.type&&(e=o.value),(0,s().o9)(e)}if("suggestion"===n){return function(e){const{suggestionContextRenderLineItem:t,excludeLabel:o}=e;return t.flatMap(((e,n)=>{if(o)return e.value;const r=[];return e.shouldUseDeleteColor?r.push(a().Ey_(`${e.label}: `,[i().Tw])):r.push(a().Ey_(`${e.label}: `,[i().eD])),e.removeQuotationMarks||r.push(a().Ey_("“",[e.shouldUseDeleteColor?i().uZ:i().hp])),"insert_block"===e.type||"add_line_break"===e.type?e.value.forEach((e=>{r.push(a().Ey_(a().N8A(e),[i().hp]))})):"remove_line_break"===e.type||"delete_block"===e.type?e.value.forEach((e=>{r.push(a().Ey_(a().N8A(e),[i().uZ]))})):r.push(...e.value),e.removeQuotationMarks||r.push(a().Ey_("”",[e.shouldUseDeleteColor?i().uZ:i().hp])),n!==t.length-1&&r.push(a().Ey_("\n")),r}))}({suggestionContextRenderLineItem:p({discussionContextData:t,discussionId:o,intl:c}),intl:c,excludeLabel:l})}(0,r().HB)(n)}function u(e){const{discussionType:t,discussionId:o,discussionContextData:n,intl:r}=e;if("suggestion"===t)return p({discussionContextData:n,discussionId:o,intl:r})}function p(e){const{discussionContextData:t,intl:o,discussionId:i}=e,s=t.flatMap((e=>"textValue"===e.type?function(e){const{textValue:t,intl:o,discussionId:r}=e,i=n().hS(t.flatMap((e=>(0,a().uPN)(e))).filter((e=>a().I1e(e)&&a().vu(e)===r)),(e=>`[${e.join(",")}]`));if(0===i.length)return[];const s=2===i.length&&1===i.filter((e=>a().O3D(e))).length&&1===i.filter((e=>a().ZRT(e))).length,l=[];for(const n of i){const e=m({annotation:n,isReplace:s,intl:o}),r=a().ZRT(n);let i=t;if(a().MXn(n)||a().zIw(n)){const e=a().Dew(n);if(a().sh$(e)){i=[[a().cQR(e)]]}}s&&(a().O3D(n)?i=t.filter((e=>(0,a().uPN)(e).some((e=>a().O3D(e))))):a().ZRT(n)&&(i=t.filter((e=>(0,a().uPN)(e).some((e=>a().ZRT(e))))))),l.push({label:e,value:i,shouldUseDeleteColor:r})}return l}({textValue:e.value,discussionId:i,intl:o}):"blockSuggestion"===e.type?function(e){const{blockSuggestion:t,intl:o,blockType:n}=e;if("add_line_break"===t.type)return{label:o.formatMessage(l.addLabel),value:[a().Ey_(o.formatMessage(l.lineBreak))],shouldUseDeleteColor:!1,removeQuotationMarks:!0,type:"add_line_break"};if("remove_line_break"===t.type)return{label:o.formatMessage(l.removeLabel),value:[a().Ey_(o.formatMessage(l.lineBreak))],shouldUseDeleteColor:!0,removeQuotationMarks:!0,type:"remove_line_break"};if("insert"===t.type){const e="page"===n;return{label:o.formatMessage(l.addLabel),value:[a().Ey_(o.formatMessage(e?l.page:l.block))],shouldUseDeleteColor:!1,removeQuotationMarks:!0,type:"insert_block"}}if("remove"===t.type)return{label:o.formatMessage(l.removeLabel),value:[a().Ey_(o.formatMessage(l.block))],shouldUseDeleteColor:!0,removeQuotationMarks:!0,type:"delete_block"};(0,r().HB)(t.type)}({blockSuggestion:e.value,blockType:e.blockType,intl:o}):void(0,r().HB)(e))),c=[s].map((e=>function(e,t){const o=e.filter((e=>"insert_block"===e.type));if(1===o.length&&1===e.length)return e;if(o.length>1&&o.length===e.length)return[{label:t.formatMessage(l.addLabel),value:[a().Ey_(t.formatMessage(l.blocks))],shouldUseDeleteColor:!1,removeQuotationMarks:!0}];return e.filter((e=>"insert_block"!==e.type))}(e,o))).map((e=>function(e,t){const o=e.filter((e=>"delete_block"===e.type));if(1===o.length&&1===e.length)return e;if(o.length>1&&o.length===e.length)return[{label:t.formatMessage(l.removeLabel),value:[a().Ey_(t.formatMessage(l.blocks))],shouldUseDeleteColor:!1,removeQuotationMarks:!0}];return e}(e,o))).map((e=>g(e,o,"add_line_break"))).map((e=>g(e,o,"remove_line_break")));return c[0]}function m(e){const{annotation:t,isReplace:o,intl:n}=e,i=l.undefinedOpLabel;if(a().O3D(t)){const e=o?l.labelForReplaceNewText:l.addLabel;return n.formatMessage(e)}if(a().ZRT(t)){const e=o?l.labelForReplaceOldText:l.removeLabel;return n.formatMessage(e)}if(a().MXn(t)||a().zIw(t)){const e=a().Dew(t);if(a().MXn(t)){const t=c[a()._XS(e)][0]??i;return n.formatMessage(t)}{const t=c[a()._XS(e)][1]??i;return n.formatMessage(t)}}(0,r().HB)(t)}function g(e,t,o){let n,r;const i="add_line_break"===o?t.formatMessage(l.addLabel):t.formatMessage(l.removeLabel),s=e=>{r&&(e.push({label:i,value:[a().Ey_(t.formatMessage(l.lineBreaks))],shouldUseDeleteColor:"remove_line_break"===o,removeQuotationMarks:!0}),r=!1,n=!1),n&&(e.push({label:i,value:[a().Ey_(t.formatMessage(l.lineBreak))],shouldUseDeleteColor:"remove_line_break"===o,removeQuotationMarks:!0}),n=!1)},c=e.reduce(((e,t)=>(t.type===o?n?r=!0:n=!0:(s(e),e.push(t)),e)),[]);return s(c),c}},602098:(e,t,o)=>{o.d(t,{u:()=>r});var n=()=>o(630116);function r(e){return Boolean(e.findRecordStoreUIAncestor((e=>e instanceof n().bx&&e.isType("duplicate_blocks"))).ancestor)}},603815:(e,t,o)=>{o.d(t,{A$:()=>C,JQ:()=>T,Vn:()=>A,e3:()=>I,s4:()=>x});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(581454);var n=()=>o(857639),r=()=>o(585515),i=()=>o(577449),a=()=>o(388821),s=()=>o(179034),l=()=>o(545285),c=()=>o(534177),d=()=>o(449506),u=()=>o(780054),p=()=>o(989423),m=()=>o(870618),g=()=>o(303626),f=()=>o(14307),v=()=>o(245865),h=()=>o(796621),_=()=>o(540758),b=()=>o(670631),y=()=>o(508496),S=()=>o(807054),w=()=>o(603815),k=()=>o(108944);async function I(e){const{environment:t,request:o,headers:n,abortSignal:r}=e;return d().callApi({eventName:"loadPageChunkV2ForOfflineSync",environment:t,data:o,headers:n,inMemoryRecordCache:h().o,abortSignal:r})}async function A(e){const{environment:t,request:o,abortSignal:n,prefetchCacheKey:r,headers:i}=e;return(0,S().updateLoadCachedPageChunkCalledAt)(),f().isConnected()||f().isConnecting()?d().callApi({eventName:"loadCachedPageChunkV2",environment:t,data:o,abortSignal:n,prefetchCacheKey:r,headers:i}):d().callApi({eventName:"loadPageChunkV2",environment:t,data:o,abortSignal:n,prefetchCacheKey:r,headers:i})}async function x(e){const{mode:t,environment:o,request:c,isFirstChunk:d,abortSignal:f}=e,v={...c,cursor:c.cursor||{stack:[]},baseUrl:u().A.domainBaseUrl,publicDomainName:u().A.publicDomainName};if("diskCacheOnlyInWebWorker"===t){var h;if(null!==(h=o.defaultRecordCache.persistedRecordCache)&&void 0!==h&&h.deviceSupportsLoadPageChunk())return await o.defaultRecordCache.persistedRecordCache.loadPageChunk({userId:o.currentUser.id,loadPageChunkArgs:v,enableLogging:g().N.enableLogging});throw new Error("Device does not support `diskCacheOnlyInWebWorker`")}if("inMemoryAndDiskCacheWithInexactPreload"===t&&(await w().A$(o,{id:c.page.id,table:s().ev}),null!=f&&f.aborted))throw new Error("Abort signal received");const y=a().RecordMapWithRole.create(),S=[];let k=!1;const I=new Set,A=await r().T(v,i().h.fromMonomorphicFunctionUnsafe((async e=>{const n=await m().h7({environment:o,pointer:e,abortSignal:f,useInMemoryCacheOnly:"inMemoryOnly"===t});if(null!=f&&f.aborted)throw new Error("Abort signal received");if(n)return y.setModelAndRole(e,n.model,n.role),n.model;if("inMemoryOnly"===t)throw new Error(`Record not found: ${e.table},${e.id}`);if((0,l().u)(e)&&!I.has(e.id)&&d){if(void 0===b().A.state.offlinePages)return S.push(e),void(k=!0);if(void 0===b().A.state.offlinePages||!_().B(c.page.id))throw new Error(`Record not found: ${e.table},${e.id}`);S.push(e)}})),((e,t,o,n)=>{g().N.enableLogging&&console.log(`Spidering from ${e.table}:${e.id} to ${t.table}:${t.id} (${o})`),null!=n&&n.suppressErrorOnClient&&I.add(t.id)}));if(k&&(await b().A.waitUntil((()=>void 0!==b().A.state.offlinePages)),!_().B(c.page.id))){const[e]=S;throw new Error(`Record not found: ${e.table},${e.id}`)}if(S.length>0&&(0,p().LM)({eventName:"offline_page_was_missing_records_in_cache",sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}}).then((e=>{(0,p().u4)({environment:o,event:{eventName:"offline_page_was_missing_records_in_cache",eventProperties:{}},opts:{sampling:{behavior:"decided",sampleDecision:e}}}),e&&n().log({level:"error",from:"loadingHelpers",type:"offlinePageWasMissingRecordsInCache",data:{pageId:c.page.id,missingRecords:S}})})),null!=f&&f.aborted)throw new Error("Abort signal received");return{recordMap:y.toJson(),cursor:A.cursorValue}}async function C(e,t){const o=e.currentUser.id;if(!o||!e.defaultRecordCache.persistedRecordCache)return Promise.resolve(void 0);(await e.defaultRecordCache.persistedRecordCache.getPageBlocksByParent({page:t,userId:o})).forEach((t=>{e.defaultRecordCache.inMemoryRecordCache.setRecord({pointer:t.pointer,userId:t.userId},t.value),e.defaultRecordCache.inMemoryRecordCache.emitRecord(t.pointer,[]),v().unsubscribeAfterDelay({environment:e,pointer:t.pointer,userId:t.userId})}))}function T(e){if(!y().default.checkGate({gateName:"load_page_chunk_omit_existing_record_versions"}))return;const t=a().RecordMapLegacy.create();let o=0;const n=()=>o>=50,r=e=>{"space"!==(null==e?void 0:e.table)&&(n()||e&&void 0===t.get(e.pointer)&&(t.set(e.pointer,e.getVersion()),o++))};if(e.isReady())for(const a of(0,k().E)(e))r(a);if(e.userId){const t=e.environment.defaultRecordCache.inMemoryRecordCache.data.getUserRecordMap(e.userId);r(t.getModel({table:"notion_user",id:e.userId}));let o=0;for(const e of t.getPointersByTable("notion_user")){if(n()||o>=10)break;o++,r(t.getModel(e))}}const i=Array.from(t).map((e=>{let{pointer:t,value:o}=e;if(void 0!==o)return{pointer:t,version:o}})).filter(c().O9);return i.length?i:void 0}},604643:(e,t,o)=>{o.r(t),o.d(t,{getInitialPage:()=>d,initialize:()=>c});var n=()=>o(948450),r=()=>o(183558),i=()=>o(836251),a=()=>o(155959),s=()=>o(5705),l=()=>o(877688);async function c(e){const t=window.history.state&&window.history.state.id||(0,r().Ay)();if(!window.history.state){const o=e.currentUser.id;window.history.replaceState({id:t,currentUserId:o},void 0,window.location.href),s().ke({historyId:t,historyIndex:0,currentUserId:o})}i().Al(e)&&e.TabbedRouterStore.setUp({nativeInboxEnabled:(0,a().T)("supportsNativeInbox")}),await l().Yw({environment:e,id:t,action:"pop",href:window.location.href,updateMobileTabbedRouterArgs:{forceUpdate:!0,silenceErrors:!0,clearNativeRootPageOverride:"/"!==window.location.pathname},enableDesktopAppRedirect:!0});const o=e.currentUser.id,c=d(o);if(!c||"undefined"===c){const e=window.location.pathname;e&&function(e){let{currentUserId:t,value:o}=e;n().A.set({userId:t,key:"sourceInitialPage",value:o})}({currentUserId:o,value:e})}}function d(e){return n().A.get({userId:e,key:"sourceInitialPage"})}},604917:(e,t,o)=>{o.d(t,{A:()=>p});var n=o(296540),r=o(440961),i=()=>o(56366),a=()=>o(584262),s=()=>o(606952),l=()=>o(211716),c=()=>o(891078),d=o(474848);function u(e,t){const u=(0,o(484714).v3)(),p=(0,n.useContext)(o(484792).n),m=(0,n.useRef)(null),g=(0,n.useRef)(null),f=(0,c().bx)(e.store,e.disabled),v=(0,c().pW)(e.store),h=(0,n.useCallback)((()=>{o(41161).A.recordVisit({id:e.store.id,systemBlockType:e.store.getSystemBlockTypeStore().getValue(),type:l().ig.Link,currentUserId:u.currentUser.id}),o(296206).l8(u,{page_visit_id:o(990261).uk.getCurrentPageVisitId(),mentioned_page_id:e.store.id,source_type:"collection_view_page_block",hover_preview_enabled:!0,is_navigable_block:e.store.isNavigableBlock()})}),[u,e.store]),_=(0,n.useCallback)((()=>{if(!g||!g.current)return;const t=r.findDOMNode(g.current);return(0,o(921855).ng)(e.store,t)}),[e.store]),b=(0,n.useCallback)((t=>{const o=_(),n=e.store.getTitleStore();n&&o&&s().xE({environment:u,event:t,interactiveToken:o,store:n,canEdit:f})}),[f,u,_,e.store]),y=(0,n.useCallback)((t=>{const o=_(),n=e.store.getTitleStore();n&&o&&s().HH({environment:u,event:t,interactiveToken:o,store:n,canEdit:f})}),[f,u,_,e.store]),S=(0,n.useCallback)((()=>{if(p){const t=(0,o(492414).Ay)({store:e.store,pageVisitSource:a().y8.Create});p(t)}else o(857783).uK({environment:u,store:e.store,visitType:l().ig.Link,pageVisitSource:a().y8.Create})}),[u,p,e.store]);(0,n.useEffect)((()=>()=>{o(347469).OZ(e.store.getTitleStore())}),[e.store]);const w=(0,i().K8)((()=>{const t=e.store.getCollectionViewSourceCollectionStore();return null==t?void 0:t.isSyncedCollection()}),[e.store]),k=(0,i().K8)((()=>e.store.isCollectionViewAlias()||e.store.recordStoreParentDiffersFromPersistedParent()),[e.store]);return(0,c().NW)(e.store,t,(0,n.useMemo)((()=>({renderedType:"collection_view_page",getNode:()=>m.current,getBlockStore:()=>e.store,activate:S,handleCreated(){S(),o(732770).A.setKeyboardMode(!1)}})),[S,e.store]),(0,d.jsx)(o(155004).s,{allowSelectionWithin:!1,onMouseOver:b,onMouseOut:y,children:(0,d.jsx)(o(54432).A,{ref:g,store:e.store,style:{...v,...e.style},isAlias:k,disabled:Boolean(e.disabled||w),onClick:h})}))}const p=n.memo(n.forwardRef(u),o(821062).A)},605402:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{permissionGroupsAndMemberCounts:[],lastEmitData:{value:-1,spaceId:void 0}}}shouldRefetch(e){let{currentSpaceId:t,emitValue:o}=e;const{spaceId:n,value:r}=this.state.lastEmitData;return t!==n||o!==r}}const r=new n},606846:(e,t,o)=>{o.d(t,{Ay:()=>s,gJ:()=>l,zp:()=>i});var n=()=>o(757695),r=()=>o(534177);function i(e){return"mentions"===e||"allPages"!==e&&"archive"!==e&&void(0,r().HB)(e)}class a extends n().default{getInitialState(){return{currentTab:"mentions",isCurrentTabEmpty:!0,containsBothReadAndUnreadNotifications:!1,containsUnreadNotifications:!1,loadingId:void 0,sessionId:void 0,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]}}startSession(){let{forceRestart:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(void 0===this.state.sessionId||e)&&this.setState({...this.state,sessionId:o(206267).JW()})}endSession(){this.setState({...this.state,sessionId:void 0})}startLoading(){const e=Math.random().toString();return this.setState({...this.state,loadingId:e}),e}endLoading(e){e===this.state.loadingId&&this.setState({...this.state,loadingId:void 0})}isFilteredToUnreadOnly(){if("mentions"===this.state.currentTab)return this.state.showOnlyUnreadNotifications}}const s=new a,l=n().default.createValue(!0,{name:"UpdatesScrolledToTopStore"})},606932:(e,t,o)=>{o.d(t,{A:()=>a});var n=()=>o(938090);function r(){var e;const t=null===(e=o(351360).default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.getType();if(t)return"collection_view_page"===t||"collection_view"===t?"collection":"page"}function i(e){const t=null===(o=n().H6.CollectionViewBlock.getLoadingMetrics())||void 0===o?void 0:o.resolvedAt;var o;return!!t&&(e?e<t:void 0)}const a=new class{constructor(){this._timings=void 0,this._navigatingFrom=void 0,this._switchingView=void 0}popTimings(){const e=this._timings;return this._timings=void 0,e}markNavigationStartTime(e,t){this._timings={navigationStart:performance.now()},this._navigatingFrom=void 0,this._switchingView=void 0,"page"===e.name&&"page"===t.name&&e.blockId&&e.blockId&&(this._navigatingFrom=r(),this._switchingView=e.blockId===t.blockId&&e.collectionViewId!==t.collectionViewId)}markRequestFirstChunkStart(){this._timings&&(this._timings={...this._timings,requestFirstChunkStart:performance.now()})}markRequestFirstChunkEnd(e){const{chunkSource:t,chunkDiskMode:o}=e;this._timings&&(this._timings={...this._timings,requestFirstChunkEnd:performance.now(),requestFirstChunkSource:t,requestFirstChunkDiskMode:o})}markPageViewBlockRender(e){this._timings&&(this._timings={...this._timings,pageViewBlockRender:e})}getDatabaseNavigationMetrics(e){return{cvb_bundle_loaded:i(e),navigating_from:this._navigatingFrom,navigating_to:r(),switching_view:this._switchingView}}}},606952:(e,t,o)=>{o.d(t,{$D:()=>Je,$P:()=>at,DN:()=>Xe,Gf:()=>dt,HH:()=>St,Ip:()=>bt,KY:()=>ot,Mf:()=>it,Mw:()=>Ke().Mw,RJ:()=>pt,Tv:()=>vt,US:()=>ct,VO:()=>Ge().V,Vv:()=>ft,Wt:()=>ut,Ye:()=>mt,bS:()=>_t,di:()=>nt,dw:()=>lt,eF:()=>wt,ek:()=>gt,f0:()=>Ye,gw:()=>Ge().g,jN:()=>rt,jQ:()=>Qe,kE:()=>st,rq:()=>$e().rq,sr:()=>$e().sr,tc:()=>Ke().tc,uD:()=>It,wu:()=>kt,xE:()=>yt,yr:()=>et});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(803949),o(581454),o(737550),o(941795);var n=()=>o(908006),r=()=>o(584262),i=()=>o(319954),a=()=>o(172385),s=()=>o(921940),l=()=>o(634201),c=()=>o(857639),d=()=>o(416504),u=()=>o(756005),p=()=>o(792071),m=()=>o(450648),g=()=>o(861017),f=()=>o(179034),v=()=>o(343666),h=()=>o(197959),_=()=>o(161479),b=()=>o(397277),y=()=>o(919709),S=()=>o(983650),w=()=>o(695631),k=()=>o(220719),I=()=>o(496603),A=()=>o(534177),x=()=>o(939768),C=()=>o(112873),T=()=>o(743336),M=()=>o(376413),P=()=>o(650829),B=()=>o(140022),R=()=>o(681445),E=()=>o(588836),D=()=>o(405981),N=()=>o(413962),L=()=>o(555776),F=()=>o(116008),U=()=>o(780054),O=()=>o(534402),V=()=>o(518736),j=()=>o(964345),z=()=>o(594635),q=()=>o(423804),H=()=>o(921855),W=()=>o(909470),K=()=>o(87878),G=()=>o(845489),$=()=>o(728611),Y=()=>o(492414),Q=()=>o(972435),Z=()=>o(231722),X=()=>o(962845),J=()=>o(108944),ee=()=>o(731320),te=()=>o(299545),oe=()=>o(836251),ne=()=>o(347199),re=()=>o(953418),ie=()=>o(20313),ae=()=>o(969197),se=()=>o(357473),le=()=>o(906537),ce=()=>o(792002),de=()=>o(494043),ue=()=>o(424746),pe=()=>o(695625),me=()=>o(393255),ge=()=>o(659026),fe=()=>o(397248),ve=()=>o(351360),he=()=>o(295169),_e=()=>o(372154),be=()=>o(797162),ye=()=>o(77246),Se=()=>o(569777),we=()=>o(53137),ke=()=>o(205682),Ie=()=>o(990261),Ae=()=>o(77238),xe=()=>o(712505),Ce=()=>o(630116),Te=()=>o(24157),Me=()=>o(468484),Pe=()=>o(808207),Be=()=>o(296206),Re=()=>o(901265),Ee=()=>o(98244),De=()=>o(448619),Ne=()=>o(910302),Le=()=>o(132867),Fe=()=>o(829300),Ue=()=>o(755636),Oe=()=>o(435009),Ve=()=>o(620689),je=()=>o(778417),ze=()=>o(66788),qe=()=>o(863188),He=()=>o(725614),We=()=>o(347469),Ke=()=>o(538527),Ge=()=>o(789200),$e=()=>o(699744);function Ye(e){const{multiSelection:t,environment:o,transaction:n}=e,r=(0,X().$W)(t);if(0===r.length)return;if(1===r.length){const{store:e,selection:t}=r[0];return Qe({environment:o,transaction:n,store:e,selection:t})}const i=t.start.store,a=V().SL(i),s=r.some((e=>{let{store:t}=e;return V().SL(t)!==a})),l=(0,X().Tp)({multiSelection:t,includeNonSelectable:!1});if(!l)return;const{treeRange:d}=l;if(a&&!s){const e=new Set,r=[];for(const t of d.iterateDeletion())if("delete"===t.operation)for(const{childToRemove:e}of(0,ie().qq)({treeOperation:t,deleteFrom:"record-store-parent"}))r.push(e);else if("move"===t.operation)for(const o of t.movingChildren)o.value.store&&e.add(o.value.store);let i=0;for(const t of r)i+=1+(0,te().zo)({blockStore:t,transclusionReferences:"omit",childPages:"omit"}).length;i<=V().Fh?O().Xt({environment:o,transaction:n,multiSelection:t,removedBlocks:r,movedBlocks:e}):c().log({level:"info",from:"deleteMultiSelection",type:"crdt:deleteMultiSelectionOverBlockLimit",data:{miscDataToConvertToString:{blockLimit:V().Fh,numBlocksInSelection:i}}})}const{start:u,end:p}=t;Qe({environment:o,transaction:n,selection:{startIndex:u.index,endIndex:1/0},store:u.store});const m=(0,ce().s6)(u.store),g=p.store,f=V().SL(g);if(a&&f){const e=(0,k().o9)((0,ae().T)(g),"End of selection must be in a block");Qe({environment:o,transaction:n,selection:{startIndex:0,endIndex:p.index},store:p.store}),O().LT({transaction:n,sourceBlockStore:e,targetStore:i})}else m?rt({environment:o,transaction:n,sourceStore:p.store,sourceIndex:p.index,targetStore:u.store,targetIndex:m.endIndex}):Qe({environment:o,transaction:n,store:p.store,selection:{startIndex:p.index,endIndex:1/0}});for(const c of d.iterateDeletion())(0,ie().eM)({transaction:n,treeOperation:c,deleteFrom:"record-store-parent"});He().setSelection({store:u.store,selection:m}),je().hc({environment:o,store:d.start.value.store})}function Qe(e){Ze({...e,updateSelection:!0,removeInlineRecords:!0})}function Ze(e){const{environment:t,store:o,selection:n,transaction:r,updateSelection:i,removeInlineRecords:a}=e,s=o.getValue(),c=y().xbM(s,n);if(c.startIndex===c.endIndex)return void(i&&He().setSelection({store:o,selection:c}));const d=y().lzV(s,n.startIndex,n.endIndex),u=o.isTable(f().ev)&&(0,ae().T)(o)||o.getRecordStoreAtRootPath();if(u instanceof Ce().Bv&&V().Le({store:o,blockStore:u})){const n=(0,k().o9)(u.getBlockTitleTextSliceTree()),i=new(l().Z4)(y().qAZ(s)),{startIndex:p,endIndex:m}=i.getInclusiveStringRangeForSelection(c),{operations:g,invertedOperations:f}=n.getOperationsForDeleteText(p,m);Pe().d({transaction:r,store:u,crdtOperations:g,invertedOperations:f,fullTextValue:d}),ze().e0(e),a&&ze().Nz({environment:t,store:o,oldTextValue:s,newTextValue:d,transaction:r,rootStore:u})}else{var p;ze().Tm({environment:t,store:o,value:d,transaction:r,expectedVersion:null===(p=o.getAncestorBlockStoreAtRootPath())||void 0===p?void 0:p.getVersion(),onlyLogVersionMismatch:!0}),ze().Xt({environment:t,store:o,oldTextValue:s,newTextValue:d,transaction:r,rootStore:u,removeInlineRecords:a})}i&&He().setSelection({store:o,selection:{startIndex:c.startIndex,endIndex:c.startIndex}})}function Xe(e){const t=Te().default.state;if("editing"!==t.mode)return;if((0,Z().kM)(t.multiSelection))return;const{start:o,end:n}=t.multiSelection,r="start"===e.direction?o:n;Te().default.setState({...t,multiSelection:{start:r,end:r}})}function Je(e){const{environment:t,editorMode:o,disableMentions:n,disableSlashCommands:r,disableEmojiCommands:a,disableFilters:s,string:c,transaction:d,selectAll:p,usePopupForMentionOnMobile:m,mentionSectionOrdering:g}=e,f=(0,u().Yz)(e.disabledMentionTypes);let v;const h=[];if("editing"!==Te().default.state.mode)return;let _="multiSelection"in e?e.multiSelection:(0,Z().$U)(e);const b=(0,Z().H7)(_);let S=!1;const w=b?{canRestore:!0,oldSelection:b,toTextValue:b.store.getValue()}:{canRestore:!1};"default"===o||"translate_unlocked"===o||"ai_co_editing"===o?Ye({environment:t,multiSelection:_,transaction:d}):"suggest"===o?(0,Z().kM)(_)||(S=!0,v=N().RR(t,d,_),N().rY({environment:t,multiSelection:_,transaction:d,discussionStore:v}),_={start:{store:_.end.store,index:_.end.index},end:{store:_.end.store,index:_.end.index}}):"translate_locked"===o?Ne()._4():(0,A().HB)(o);const k=y().xV3(c),I=l().PE(k).length;if(0===I)return;const x=(0,ce().I6)(o);if(v&&S&&x.remove([y().Ifu.SuggestionRemoveText,v.id]),"suggest"===o){if(v||0!==_.start.index)v||(v=N().RR(t,d,_,{annotations:x,annotationTypes:[y().Ifu.SuggestionRemoveText,y().Ifu.SuggestionInsertText],currentUser:t.currentUser}));else{const e=(0,G().J)(_.start.store),o=e?(0,ae().T)(e):void 0;v=N().RR(t,d,_,{annotations:i().r.fromArray(y().mIW(null==e?void 0:e.getValue())),annotationTypes:[y().Ifu.SuggestionInsertText],currentUser:t.currentUser},o?{blockStore:o,suggestionTypes:["add_line_break"],currentUser:t.currentUser}:void 0)}x.add([y().Ifu.SuggestionInsertText,v.id]),x.remove([y().Ifu.SuggestionRemoveText,v.id]),h.push(_.start.store.id)}const C=y().Ey_(k,x.toArray());tt({environment:t,store:_.start.store,tokens:[C],index:_.start.index,transaction:d,updateSelection:!1});const T={startIndex:p?_.start.index:_.start.index+I,endIndex:_.start.index+I};if(He().setSelection({store:_.start.store,selection:T}),s||qe()._D({environment:t,editorMode:o,store:_.start.store,transaction:d}),w.canRestore){n||Fe().dw({environment:t,textStore:w.oldSelection.store,oldSelection:w.oldSelection.selection,oldTextValue:w.toTextValue,disabledMentionTypes:f,usePopupOnMobile:m,mentionSectionOrdering:g}),r||me().dw({environment:t,textStore:w.oldSelection.store,oldSelection:w.oldSelection.selection,oldTextValue:w.toTextValue}),a||Ee().dw({environment:t,textStore:w.oldSelection.store,oldSelection:w.oldSelection.selection,oldTextValue:w.toTextValue}),"suggest"===o&&v&&N().c3({environment:t,transaction:d,discussionStore:v,addModifiedBlockIdsAfter:h});const e=j().Ay.state.rootBlock;t.device.isMobile&&j().Ay.state.enabled&&(0,A().O9)(e)&&!e.isTranscriptionBlock()&&z().A.setState(!0)}}function et(e){tt({...e,updateSelection:!0})}function tt(e){const{environment:t,store:o,index:n,transaction:r,selectAll:i,updateSelection:a,editorMode:s}=e;let c,d=e.tokens.map(y().x9_);if(d.length){if("suggest"===s){const e=o.getAncestorBlockStoreAtRootPath();e&&(c=N().RR(t,r,e),d=y().Mwp({textValue:d,selection:{startIndex:0,endIndex:1/0},annotation:[y().Ifu.SuggestionInsertText,c.id]}))}const i=o.getValue()||[],a=y().xym(i,d,n);if(V().SL(o)){const t=(0,k().o9)((0,ae().T)(o)),i=(0,k().o9)(t.getBlockTitleTextSliceTree()),s=new(l().Z4)(y().qAZ(o.getValue())).getStringStartIndex(n),{operations:c,invertedOperations:u}=i.getOperationsForInsertTextValue(s,d);Pe().d({transaction:r,store:t,crdtOperations:c,invertedOperations:u,fullTextValue:a}),ze().e0(e)}else{var u;ze().Tm({environment:t,store:o,value:a,transaction:r,expectedVersion:null===(u=o.getAncestorBlockStoreAtRootPath())||void 0===u?void 0:u.getVersion(),onlyLogVersionMismatch:!0});const e=o.getRecordStoreAtRootPath();ze().Xt({environment:t,store:o,rootStore:e,transaction:r,oldTextValue:i,newTextValue:a,removeInlineRecords:!1})}if("suggest"===s){const e=o.getAncestorBlockStoreAtRootPath();e&&N().c3({environment:t,transaction:r,discussionStore:(0,k().o9)(c),addModifiedBlockIdsAfter:[e.id]})}}if(a){const e=y().qAZ(d).length;He().setSelection({store:o,selection:{startIndex:i?n:n+e,endIndex:n+e}})}}function ot(e){const{environment:t,store:o,value:n,transaction:r}=e,i=o.getValue()??[];V().SL(o)?(Ze({environment:t,store:o,selection:{startIndex:0,endIndex:1/0},transaction:r,updateSelection:!1,removeInlineRecords:!0}),n&&y().AhH(n)&&tt({environment:t,store:o,tokens:n,index:0,transaction:r,updateSelection:!1}),ze().e0(e)):ze().Tm(e);const a=o.getRecordStoreAtRootPath();if(a instanceof Ce().Bv&&i&&"suggest"===ye().Uv.getMode(a)){const e=(0,b().Nk)(i),n=(0,b().Nk)(o.getValue()??[]),s=I().FF(e,...n);(0,E().u)({discussionIds:s,blockStore:a,transaction:r}),e.forEach((e=>{const o=Ce().sk.createChildStore(a,{table:h().$Y,id:e,spaceId:(0,_().e)(a.pointer.spaceId)});N().c3({environment:t,transaction:r,discussionStore:o})}))}}function nt(e){const{environment:t,store:o,selection:n,transaction:r}=e,i=Q().A.getIntl(),a=p().b4_.fromGetRecordValueFn(o.inMemoryRecordCache.makeGetRecordValueFn(t.currentUser.id)),s=o.getValue()??[];let l=0,c=0;for(const u of s){const e=y().WWE(u);if(c<n.startIndex){c+=e;continue}if(c+e>n.endIndex)break;const s=y().uPN(u),p=s.find(y().iGj);let g;if(p){const n=(0,m().r4)({textValue:[u],intl:i,getRecordModel:a,userTimeZone:(0,d().P)(),externalIntegrations:we().A.integrations.state});g=y().Ey_(n,s.filter((e=>!I().n4(e,p)))),Qe({environment:t,store:o,selection:{startIndex:c,endIndex:c+e},transaction:r}),et({environment:t,store:o,tokens:[g],index:c,transaction:r}),l+=y().WWE(g)-y().WWE(u)}c+=g?y().WWE(g):e}return{startIndex:n.startIndex,endIndex:n.endIndex+l}}function rt(e){const{environment:t,sourceStore:o,sourceIndex:n,targetStore:r,targetIndex:i,transaction:a}=e,s=y().RQ(o.getValue()),l=y().q4_(s).length,{tokensInsideRange:c}=y().AI5(s,n,l);c.length>0&&(Ze({environment:t,store:o,selection:{startIndex:n,endIndex:l},transaction:a,updateSelection:!0,removeInlineRecords:!1}),et({environment:t,store:r,tokens:c,index:i,transaction:a}))}function it(e){const{environment:t,shiftKey:o,transaction:r}=e;return function(e){const{transaction:t}=e,o=Te().default.state;if("editing"!==o.mode)return;const{multiSelection:r}=o,i=(0,X().Tp)({multiSelection:r,includeNonSelectable:!0});if(!i)return;const{tree:a,treeRange:s}=i,l=a.value.store,c=w().l.getIndentOperationsFromTreeRange(s,e.direction);for(const n of c){const{target:e,operation:o}=n,r=(0,ie().PY)({rootStore:l,root:a,target:e});if(void 0===r)throw new Error("Cannot find node to indent");let i=!1;switch(o){case"indentSelf":case"indentSelfAndSubtree":if(r.length>=2){const e=r[r.length-2],n=r[r.length-1];if(n){let r="indentSelf"===o?"self":"subtree";(0,de().BN)(n)&&!Me().A.isOpen(n.id)&&(r="subtree");void 0!==Le().b({blockStore:n,parentStore:e,transaction:t,type:r})&&(i=!0)}}break;case"unindentSelfAndUpdateSiblings":if(r.length>=3){const e=r[r.length-3],o=r[r.length-2],n=r[r.length-1];if(o&&n){void 0!==Le().MQ({blockStore:n,parentStore:o,grandparentStore:e,transaction:t})&&(i=!0)}}}i&&w().h.applyMutable(a,n)}n().default.afterNextFlush((()=>{const e=(0,ie().PY)({rootStore:l,root:a,target:s.start}),t=(0,ie().PY)({rootStore:l,root:a,target:s.end}),o=e&&(0,ae().aI)(e[e.length-1]),n=t&&(0,ae().aI)(t[t.length-1]);if(o&&n){const e={start:{store:o,index:r.start.index},end:{store:n,index:r.end.index}};He().setMultiSelection({multiSelection:e})}}))}({environment:t,transaction:r,direction:o?"unindent":"indent"})}function at(e){const{transaction:t,direction:o}=e,r=Te().default.state;if("editing"!==r.mode)return!1;const{multiSelection:i}=r,a=(0,X().ZS)({multiSelection:i,filterCommonAncestors:!0,focus:void 0});if(!a)return!1;const s=a.stores;return!("up"===o?Le().BO({transaction:t,blocks:s}):Le().oJ({transaction:t,blocks:s}))||(n().default.afterNextFlush((()=>{const[t,o]=pe().T.findSelectablesFromIds([i.start.store.id,i.end.store.id]),n=(null==t?void 0:t.props.store)&&(0,ae().aI)(null==t?void 0:t.props.store),r=(null==o?void 0:o.props.store)&&(0,ae().aI)(null==o?void 0:o.props.store);n&&r&&(He().setMultiSelection({multiSelection:{start:{store:n,index:i.start.index},end:{store:r,index:i.end.index}},forceEmit:!0}),Ve().BM({environment:e.environment}))})),!0)}function st(e){const{transaction:t,environment:o,editorMode:n,multiSelection:r,store:i,newValue:a}=e;let s,c=i,d=a;if("suggest"===n&&r){if(!(0,Z().kM)(r)){const e=y().q4_(y().Ffo(r.start.store.getValue(),0,r.start.index)),t=e.length,o=y().q4_(y().Ffo(r.start.store.getValue(),r.start.index,y().q4_(r.start.store.getValue()).length)),n=l().PE(a),i=y().FAw(y().Ffo(r.end.store.getValue(),r.end.index,y().q4_(r.end.store.getValue()).length)),u=n.slice(t,n.length-i).join(""),p=u.length;d=`${e}${u}${o}`,c=r.start.store,s={start:{store:r.start.store,index:r.start.index+p},end:{store:r.end.store,index:r.end.store===r.start.store?r.end.index+p:r.end.index}}}}else"default"===n&&r&&!(0,Z().KP)(r)&&Ye({environment:o,transaction:t,multiSelection:r});if(lt({...e,store:c,usingMultiSelection:!0,newValue:d}),s){const e=N().RR(o,t,s);N().rY({environment:o,transaction:t,multiSelection:s,discussionStore:e})}}function lt(e){const{environment:t,editorMode:o,store:n,newValue:r,disableSlashCommands:i,disableEmojiCommands:a,disableFilters:s,transaction:c,usingMultiSelection:d,disableMentions:u,disabledMentionTypes:p,usePopupForMentionOnMobile:m,mentionSectionOrdering:g}=e,f=n.getValue(),v=y().q4_(f),h=se().rE(v,r),_=Te().default.state;if("editing"!==_.mode)return;const b=_.multiSelection.start.index;let S=0;for(let y=0;y<h.length;y++){const e=h[y];if(S+l().PE(e[1]).length>b){if(e[0]===se().lw){const t=h[y-1],o=h[y+1];let n=h[y-2],r=h[y+2];if(o&&o[0]===se().Ug)for(r||(r=[se().lw,""],h.push(r));S+l().PE(e[1]).length>b&&e[1].endsWith(o[1]);)e[1]=e[1].slice(0,e[1].length-o[1].length),r[1]=o[1]+r[1];else if(t&&t[0]===se().Ug)for(n||(n=[se().lw,""],h.unshift(n));S+l().PE(e[1]).length>b&&e[1].startsWith(t[1]);)e[1]=e[1].slice(t[1].length),n[1]=n[1]+t[1],S-=l().PE(t[1]).length}break}S+=l().PE(e[1]).length}let w=!1,k=!1,I=0;for(let C=0;C<h.length;C++){const[e,r]=h[C],d=l().PE(r).length;if(e===se().Ug)w=!0,Je({environment:t,editorMode:o,store:n,selection:{startIndex:I,endIndex:I},string:r,disableSlashCommands:i,disableEmojiCommands:a,disableFilters:s,transaction:c,disableMentions:u,disabledMentionTypes:p,usePopupForMentionOnMobile:m,mentionSectionOrdering:g}),I+=d;else if(e===se().Cm)if("suggest"===o){const e={start:{store:n,index:I},end:{store:n,index:I+d}},o=y().Ffo(n.getValue(),e.start.index,e.end.index),i=y().RQ(o);for(const a of i){const o=y().q4_([a]),i=l().PE(o).length,s=y().uPN(a).filter((e=>{const o=y().vu(e),r=q().o9({store:n,discussionId:o});if(r)return q().Ih(r,t.currentUser)})),d=s.find((e=>y().ZRT(e))),u=s.find((e=>y().O3D(e)));if(d){I+=i;continue}if(u){w=!0,k=r===y().Sj,Qe({environment:t,store:n,selection:{startIndex:I,endIndex:I+i},transaction:c});continue}const p=N().RR(t,c,e);N().rY({environment:t,multiSelection:e,transaction:c,discussionStore:p});const m=e.start.index+i;He().setSelection({store:e.start.store,selection:{startIndex:m,endIndex:m}}),I+=i}}else"default"===o||"translate_unlocked"===o||"ai_co_editing"===o?(w=!0,k=r===y().Sj,Qe({environment:t,store:n,selection:{startIndex:I,endIndex:I+d},transaction:c})):"translate_locked"===o?Ne()._4():(0,A().HB)(o);else e===se().lw&&(I+=d)}const x=!t.TextSelectionCompositionStore.state.isComposing;w&&x&&!k&&"suggest"!==o&&ct({environment:t,store:n,usingMultiSelection:d})}function ct(e){const{environment:t,usingMultiSelection:o,store:n}=e;if(o){const e=le().get(),t=(0,X().GI)({range:e,contentEditableLeafRegistry:void 0,allowInvisibleEndSelection:!0});t&&He().setMultiSelection(t)}else{const e=H()._S(t);e&&(He().setSelection({store:n,selection:e.selection}),e.forceEmitSelectionStore&&Te().default.emit())}}function dt(e){const{environment:t,editorMode:o,store:n,selection:r,annotation:i,analyticsFrom:a,transaction:s,shareMenuSelection:l}=e;if("suggest"===o)return;Qe({environment:t,store:n,selection:r,transaction:s});const c=(0,ce().DX)(r,n,o).toArray().filter((e=>e[0]!==y().Ifu.Link)),d=[y().wmz(i,c),y().Ey_(" ",c)];if(et({environment:t,store:n,tokens:d,index:r.startIndex,transaction:s}),He().setSelection({store:n,selection:{startIndex:r.startIndex+d.length,endIndex:r.startIndex+d.length}}),y().rie(i)&&(n.isTable("block")||n.isTable("comment"))){const e=t.currentUser.id,o=y().NcG(i),r=n.getRecordStoreAtRootPath();e&&Be().Hp(t,{is_current_user:o===e,user_id:o,user_access_level:(0,ee().om)(o),from:a,block_type:r instanceof Ce().Bv?r.getType():void 0,share_menu_selection:l})}else if(y().RaC(i)&&(n.isTable("block")||n.isTable("comment"))){var u;const e=null===(u=y().FHi(i))||void 0===u?void 0:u.groupId,o=n.getRecordStoreAtRootPath();e&&Be().dC(t,{group_id:e,from:a,block_type:o instanceof Ce().Bv?o.getType():void 0})}else if(y().qsB(i)&&(n.isTable("block")||n.isTable("comment"))){const e=y().K7D(i),o=n.getRecordStoreAtRootPath();Be().qX(t,{date:e,from:a,block_type:o instanceof Ce().Bv?o.getType():void 0})}else if(y().jIt(i)&&(n.isTable("block")||n.isTable("comment"))){const e=y().v55(i),o=n.getRecordStoreAtRootPath();Be().BI(t,{page_id:e,from:a,block_type:o instanceof Ce().Bv?o.getType():void 0})}}function ut(e){const{environment:t,editorMode:o,store:n,selection:r,emoji:i,transaction:a}=e;if("suggest"===o)return;Qe({environment:t,store:n,selection:r,transaction:a});const s=[l().qg.isCustomEmojiString(i)?y().wmz(y().XTT(l().qg.fromCustomEmojiString(i).pointer)):y().Ey_(i)];et({environment:t,store:n,tokens:s,index:r.startIndex,transaction:a}),He().setSelection({store:n,selection:{startIndex:r.startIndex+s.length,endIndex:r.startIndex+s.length}})}function pt(e){const{environment:t,editorMode:o,shouldStripTokens:n,disableFilters:r,store:i,selection:a,transaction:s}=e,c=(0,ce().iu)(i,a,n),d=n?y().k4p(i.getValue()):y().q4_(i.getValue());let u=l().PE(d),p=0;for(const l of c)if(p++,0===l)u.unshift("\t");else{const e=l+p;u=[...I().di(u,0,e),"\t",...I().di(u,e)]}lt({environment:t,store:i,editorMode:o,newValue:y().xV3(u.join("")),disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,disableFilters:r,transaction:s}),He().setSelection({store:i,selection:{startIndex:a.startIndex+1,endIndex:a.endIndex+p}})}function mt(e){const{environment:t,editorMode:o,shouldStripTokens:n,disableFilters:r,store:i,selection:a,transaction:s}=e,c=(0,ce().iu)(i,a,n),d=n?y().k4p(i.getValue()):y().q4_(i.getValue());let u=l().PE(d),p=0,m=0;for(const l of c){const e=l-p;0===e?"\t"===u[0]?(u=I().di(u,1),p+=1):" "===u[0]&&" "===u[1]?(u=I().di(u,2),p+=2):" "===u[0]&&(u=I().di(u,1),p+=1):"\t"===u[e+1]?(u=[...I().di(u,0,e+1),...I().di(u,e+2)],p+=1):" "===u[e+1]&&" "===u[e+2]?(u=[...I().di(u,0,e+1),...I().di(u,e+3)],p+=2):" "===u[e+1]&&(u=[...I().di(u,0,e+1),...I().di(u,e+2)],p+=1),l<=a.startIndex&&(m=p)}lt({environment:t,store:i,editorMode:o,newValue:y().xV3(u.join("")),disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,disableFilters:r,transaction:s}),He().setSelection({store:i,selection:{startIndex:a.startIndex-m,endIndex:a.endIndex-p}})}function gt(e){const{token:t,store:o,readOnly:n}=e;let r=0,i=0;if(t.textValue){let e=0;for(;e<t.tokenIndex;)r+=y().WWE(t.textValue[e]),e++;i=r+y().WWE(t.textValue[e])}He().setSelection({store:o,selection:{startIndex:r,endIndex:i},readOnly:n})}function ft(e,t){if(!t)return;const o=he().default.getSessionContext(t);if(!o)return;const n=o.getCombinedSteps().find((t=>{var o;return"queryDatabase"===t.type&&(null===(o=t.ephemeralViewData)||void 0===o?void 0:o.assistantQueryDatabaseResultId)===e}));if(null==n||!n.ephemeralViewData)return;const{collectionViewBlockId:r,collectionViewId:i}=n.ephemeralViewData;return R().S.open({collectionViewId:i,collectionViewBlockId:r})}function vt(e){var t;const{environment:n,event:i,interactiveToken:l,store:c,parentStore:d,canEdit:u}=e,p=y().uPN(l.textToken),m=y().VtW(p),b=y().Srj(p),w=y().Sev(p),k=y().g2K(p),I=y().EF0(p).map((e=>y().Orm(e))),x=y().QVD(p).map((e=>y().vu(e))),R=y().Pqo(p),E=n.RouterStore.state.route,N=Boolean("chat"===E.name);if(y().GiG(l.textToken)&&!i.shiftKey&&!i.altKey){if(i.preventDefault(),!Se().A.state.open){const e=l.textToken,t=document.createRange(),o=l.node.parentNode,r=l.tokenIndex+1;if(t.setStart(o,l.tokenIndex),t.setEnd(o,r),le().set(t,n.device),ct({environment:n,store:c,usingMultiSelection:!0}),"editing"!==Te().default.state.mode)return;const i=(0,Z().H7)(Te().default.state.multiSelection);if(!i)return;return void De().Wx({environment:n,selectedToken:{token:e,position:i.selection},selectionRect:l.node.getBoundingClientRect(),analyticsFrom:"click_token"})}De().IV()}const O=[...I,...x].map((e=>{const t=d||c;return Ce().sk.createChildStore(t,{table:h().$Y,id:e,spaceId:(0,_().e)(t.pointer.spaceId)})}));if(R&&null!==(t=he().default.getActiveSession())&&void 0!==t&&t.hasPendingOperations())return void P().assistantDependency.load().then((e=>{let{assistantMenuActions:t}=e;t.openAssistantFromEdit({environment:n})}));const{unresolved:V}=te().uy(O);let j,z,q=!1;if(V.length>0){const e=Boolean(m||w),t=_e().A.state.open||n.device.isMobile,o=(0,ae().T)(c);if(e&&t)C().xl();else if(o){const r=i.target&&i.target.getBoundingClientRect();if(L().A.reset(),C().B4({environment:n,blockStore:o,analyticsFrom:"existing_comment",discussionIds:V.map((e=>e.id)),rect:r,shouldFocusDiscussion:!1,recursivelyLoadAllDiscussions:!1,property_id:ke().A.state.isOpen?ke().A.state.property:Ae().A.state.isOpen?Ae().A.state.property:void 0}),q=!0,e&&!t)return void i.preventDefault()}}else{te().rY(c)||ue().A.find((e=>e.isEditing()))||C().xl()}if(y().zKJ(p)){var H;L().A.setActiveWithSource("text_annotation"),q&&L().A.setState({...L().A.state,overlapsExistingDiscussionMenu:!0});const e=null===(H=ne().A.UpdateSidebarCommentScroller)||void 0===H?void 0:H.getNode();e&&re().VG({element:e,environment:n,options:{top:0,behavior:"smooth"}})}else L().A.reset();m&&(j=_t(y().cQR(m)));let W,K=!1;if(w){z=y().v55(w);const e=Ce().Bv.createChildStore(d||c,{table:f().ev,id:z});K=e.isNavigableBlock();const t=(i.altKey||xe().default.isSidePeekOpen())&&!i.metaKey;j=(0,Y().Ay)({store:e,openInSidePeek:t,preferPublicLink:(0,oe().w6)(n),pageVisitSource:r().y8.LinkInPage})}if(k){const e=y().NpB(k);if("query_database_result"===e.type)return void ft(e.queryDatabaseResultId,c.inMemoryRecordCache.relatedAssistantSessionId);if("slack"===e.type)j=(0,S().mQ)({baseUrl:e.baseUrl,domain:e.domain,channelId:e.channelId,messageId:e.messageId,threadTs:e.threadTs}),W="slack";else if("google-drive"===e.type)j=e.url,W="google-drive";else if("helpdoc"===e.type)j=e.url,W="helpdoc";else if("helpdoc-section"===e.type)j=e.url,W="helpdoc-section";else if("github"===e.type)j=e.url,W="github";else if("webpage"===e.type)j=e.url,W="webpage";else if("url"===e.type)j=e.href;else if("jira"===e.type)j=e.url,W="jira";else if("sharepoint"===e.type)j=e.url,W="sharepoint";else if((0,A().O9)(e.type)&&"block"!==e.type)(0,A().HB)(e.type);else{const t=e.blockId;if(t){const e=Ce().Bv.createChildStore(d||c,{table:f().ev,id:t});K=e.isNavigableBlock();const o=e.getNavigableBlockStore();if(!o)return;j=N&&!i.metaKey?(0,a().EY)({pageVisitSource:r().y8.AIQna,pageId:o.id,scrollToBlockId:o.id!==e.id?e.id:void 0,isMobile:n.device.isMobile}):(0,Y().Ay)({store:e,openInSidePeek:!1,preferPublicLink:(0,oe().w6)(n),pageVisitSource:r().y8.AIQna})}}}if(j){if(F().A.isComposingNewDiscussion()){i.preventDefault();const e=F().A.state,t=e.open&&"comment"===e.content&&e.discussionInputStore||void 0;return void(t&&(async()=>{const{commentsDependency:e}=await Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(3560),o.e(37125)]).then(o.bind(o,774733)),{discussionHelpers:r}=await e.load();(0,D().HR)({discussionInputStore:t,environment:n,discussionHelpers:r,reason:"navigating_away"})})())}i.preventDefault(),He().clear({environment:n}),We().co();const{device:e}=n;if(e.isIOS&&He().blurActiveElement(),i.shiftKey&&!i.altKey)return;const t=(0,g().parseRoute)({url:j,baseUrl:U().A.domainBaseUrl,publicDomainName:U().A.publicDomainName,isMobile:n.device.isMobile,protocol:U().A.protocol,currentUrl:window.location.href});if((0,g().Jx)(t)||"chat"===t.name||"aiInferenceTranscript"===t.name){const e=$().Vr(i)||("aiInferenceTranscript"===E.name?"tab":void 0);if(Oe().oo({environment:n,url:j,openInNew:e}),w&&z&&Be().l8(n,{page_visit_id:Ie().uk.getCurrentPageVisitId(),mentioned_page_id:z,source_type:"inline_page_mention_token",hover_preview_enabled:!0,is_navigable_block:K}),c.inMemoryRecordCache.isSyntheticAssistantData){const e=he().default.getActiveAssistantConfigurationState(),o="page"===t.name?t.blockId:"chat"===t.name?t.peekViewBlockId:void 0;e&&o&&B().trackQnaResultClicked(n,{configurationState:e,clickedPageId:o,resultType:"page",source:"chat"})}}else{if("aiGtmFavoriteImport"===t.name&&n.currentUser.isLoggedIn())return void(0,M().importGtmFavorite)({environment:n,importArgs:t});if("external"===t.name&&c.inMemoryRecordCache.isSyntheticAssistantData){const e=he().default.getActiveAssistantConfigurationState();e&&W&&B().trackQnaResultClicked(n,{configurationState:e,resultType:W,source:"chat"})}Ue().f({environment:n,url:j})}}else{if(u){const{textToken:e,node:t,tokenIndex:o}=l,r=y().uPN(e);if(y().$CJ(r)){const e=c.getAncestorBlockStoreAtRootPath();if(e){if("suggest"===ye().Uv.getMode(e))return}return We().co(),T().h(n,{originRect:t.getBoundingClientRect(),textStore:c,tokenIndex:o,allowReminders:"comment"!==c.table}),void i.preventDefault()}}if(b){const e=Ce().jg.createChildStore(c,{table:v().SN,id:b[1],spaceId:b[2]}),t=e.getModel();if(!t)return;const o=J().Nq(e);if(!o)return;const a=Ce().cc.createChildStore(o,t.getParentPointer()).getModel();if(!a)return;const l=Ce().Bv.createChildStore(o,a.getParentPointer()).getModel(),d=l&&"table_row"===l.getType()?l.getParentId():a.getParentId(),u=(0,s().A)({pageId:o.id,scrollToBlockId:d,pageModel:o.getModel(),baseUrl:void 0,discussionId:a.id,pageVisitSource:r().y8.MentionInPage});i.preventDefault(),Oe().oo({environment:n,url:u})}u&&y().G6d(p)&&(i.preventDefault(),ht(e)),u&&(y().SEY(p)||y().snh(p))&&(i.preventDefault(),ht(e))}}function ht(e){var t;const{event:o,interactiveToken:n,environment:r,store:i}=e,{tokenIndex:a}=n,s=(0,ce().Bv)(i.getValue(),a)??{startIndex:0,endIndex:0},l=Array.from(n.node.getClientRects()),c=fe().KK(l),d=(null===(t=c.rects.find((e=>fe().ux(e.original,o.clientX,o.clientY))))||void 0===t?void 0:t.translate)??(0,ge().zg)(),u=c.total.x+c.total.width/2,p=(0,ge().bZ)({x:o.clientX,y:o.clientY},d).x>u?s.endIndex:s.startIndex;He().selectAndEditMultiSelection({environment:r,multiSelection:(0,Z().$U)({store:i,selection:{startIndex:p,endIndex:p}}),focus:void 0,forceEmit:!1})}function _t(e){const t=x().Jf({str:e,allowNoProtocol:!0}),o=x().qg(t);return t&&!t.startsWith("/")&&o&&!o.protocol?`http://${e}`:t}function bt(e){const{environment:t,event:o,interactiveToken:n,store:r,parentStore:i,canEdit:a}=e;if(!i)return;const s=y().uPN(n.textToken),l=y().Sev(s);if(l){const e=y().i$F(l);if(!e)return;const n=Ce().Bv.createChildStore(i||r,e);o.preventDefault(),Re().it({environment:t,stores:[n],left:o.clientX,top:o.clientY,showInput:!1,actionSectionGroupKey:"page_mention",analyticsFrom:"page_mention_block_menu",pageAnnotationToken:{parentStore:i,pageAnnotation:l}})}const c=y().G6d(s);if(a&&c&&(0,K().wA)({spaceStore:ve().default.state.currentSpaceStore})){var d;const e=y().qS0(c),t=null===(d=ve().default.state.currentSpaceStore)||void 0===d?void 0:d.id;if(!e||!t||e.spaceId===t)return;const r=(0,K().nA)({parentStore:i,pointer:e});if(!r)return;o.preventDefault(),be().A.setState({open:!0,isEditing:!1,entrypoint:"cross_workspace",originRect:n.node.getBoundingClientRect(),store:r})}}function yt(e){We().LO({token:e.interactiveToken,store:e.store})}function St(e){We().co({relatedNode:e.interactiveToken.node})}function wt(e){const{block:t,transaction:o,tokenIndex:n}=e,r=t.getBlockTitleStore();if(!t.getTitleStore()||!r.isDefined()||!r.getValue()||r.getValue().length<n)return!1;const i=r.getValue(),a=(0,ce().Bv)(i,n);return!!a&&(Ze({environment:t.environment,store:r,selection:a,transaction:o,updateSelection:!1,removeInlineRecords:!0}),!0)}function kt(e){var t;const{clipboardActions:o,formulasModule:n,store:r,transaction:i}=e,a=o.getFormulaEditorInformation();if(!a)return;if(!("editing"===Te().default.state.mode&&(null===(t=(0,Z().H7)(Te().default.state.multiSelection))||void 0===t?void 0:t.selection)))return;const s=r.getValue();if(!s)return;const l=n.textValueToFormulaTokens({formulasModule:n,getRecordModel:r.getRecordModel,sourceCollection:a.parentCollection,textValue:s,featureGates:(0,W().i)()});ot({environment:r.environment,store:r,value:l,transaction:i})}function It(e){const{store:t,transaction:o}=e;ot({environment:t.environment,store:t,value:void 0,transaction:o})}},606965:(e,t,o)=>{o.d(t,{W:()=>n});class n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.value=e,this.textInstanceId=t;const o=n.overrides.get(t);o&&e>o&&this.updateOverride()}get(){return n.overrides.get(this.textInstanceId)??this.value}set(e){const t=this.get();(0,o(933449).MX)(e>=t,"Clock value must be non-decreasing"),this.value=e,this.updateOverride()}updateOverride(){n.overrides.set(this.textInstanceId,this.value)}static TEST_ONLY__clearOverrides(){this.overrides.clear()}}n.overrides=new Map},607624:(e,t,o)=>{o.d(t,{i:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("audio",{viewBox:"0 0 23.5 24",svg:(0,n.jsx)("path",{d:"M5.258 14.008a.661.661 0 01-.485-.203.702.702 0 01-.195-.492v-2.899c0-.187.065-.351.195-.492a.65.65 0 01.485-.211.67.67 0 01.5.21.694.694 0 01.203.493v2.899a.687.687 0 01-.203.492.68.68 0 01-.5.203zm2.695 3.148a.684.684 0 01-.688-.695V7.266c0-.193.066-.357.196-.493a.66.66 0 01.492-.21c.198 0 .362.07.492.21a.67.67 0 01.203.493v9.195a.67.67 0 01-.203.492.654.654 0 01-.492.203zm2.688 3.032a.645.645 0 01-.485-.204.667.667 0 01-.195-.492V4.234c0-.198.065-.364.195-.5a.645.645 0 01.485-.203.68.68 0 01.5.203.68.68 0 01.203.5v15.258a.654.654 0 01-.203.492.68.68 0 01-.5.203zm2.695-4.047a.684.684 0 01-.492-.196.684.684 0 01-.196-.492v-7.18a.684.684 0 01.688-.695.67.67 0 01.492.203.67.67 0 01.203.492v7.18a.684.684 0 01-.695.688zm2.695 2.328a.68.68 0 01-.695-.696V5.953c0-.193.065-.357.195-.492a.667.667 0 01.5-.211c.193 0 .354.07.485.21a.67.67 0 01.203.493v11.82a.67.67 0 01-.203.493.645.645 0 01-.485.203zm2.688-3.852a.654.654 0 01-.492-.203.675.675 0 01-.196-.484V9.797c0-.188.065-.35.196-.485.13-.14.294-.21.492-.21a.66.66 0 01.492.21.661.661 0 01.203.485v4.133a.661.661 0 01-.203.484.67.67 0 01-.492.203z"})})},607859:(e,t,o)=>{o.r(t),o.d(t,{default:()=>s,onboardingPreferenceKey:()=>i,onboardingStagesWithBack:()=>r});var n=()=>o(763884);const r=["workspace_plan_choose","workspace_collaborative_intent_choose","persona_survey","workspace_create","timed_trial_upsell","mobile_editor","mobile_sidebar","mobile_desktop","mobile_web_clipper","mobile_app_download"],i="lastOnboardingStateKeyV1";class a extends(()=>o(757695))().default{setState(e){super.setState(e),function(e){if(e.isOnboarding)if("profile"===e.stage){const{onboardingData:t,isLoading:o,password:r,passwordErrorData:a,currentUserId:s,...l}=e;n().A.set({userId:s,key:i,value:l})}else{const{onboardingData:t,isLoading:o,currentUserId:r,...a}=e;delete a.password,n().A.set({userId:r,key:i,value:a})}else{const{currentUserId:t,...o}=e;n().A.set({userId:t,key:i,value:o})}}(e)}constructor(){super();const e={isOnboarding:!1,isLoading:!1,currentUserId:void 0};super.setState(e)}}const s=new a},609044:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},609429:(e,t,o)=>{o.d(t,{e:()=>r});function n(e){return e.teamId?`${e.collectionViewId}-${e.teamId}`:e.collectionViewId}const r=new class{constructor(){this.cache=new Map,this._locallyMutatedTasksDatabase=!1}get locallyMutatedTasksDatabase(){return this._locallyMutatedTasksDatabase}set locallyMutatedTasksDatabase(e){this._locallyMutatedTasksDatabase=e}get(e){const t=n(e);return this.cache.get(t)}set(e,t){const o=n(e);for(this.cache.delete(o),this.cache.set(o,t);this.cache.size>25;){const e=this.cache.keys().next().value;e&&this.cache.delete(e)}}}},610640:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isHovered:!1}}}const r=new n},611191:(e,t,o)=>{o.d(t,{$J:()=>d,iE:()=>a,xf:()=>c});var n=()=>o(17022),r=()=>o(780054),i=()=>o(508496);function a(){return void 0===s&&n().A.withListenerIgnored((()=>{s=r().A.isAdminMode||"on"===i().default.getEligibleGroup({experimentId:"highlight_legacy_transclusions",defaultGroup:"control"})})),s}let s,l;function c(){return void 0===l&&n().A.withListenerIgnored((()=>{l=r().A.isAdminMode||i().default.checkGate({gateName:"highlight_quasi_alive_blocks_enabled"})})),l}function d(){return i().default.checkGate({gateName:"fix_legacy_transclusions_on_duplicate"})}},611371:(e,t,o)=>{o.d(t,{He:()=>C,QY:()=>A,EF:()=>x});o(296540);var n=()=>o(256754),r=()=>o(427704),i=()=>o(959013),a=()=>o(252105),s=()=>o(934839),l=()=>o(901389),c=()=>o(812182),d=()=>o(135552),u=()=>o(972435),p=()=>o(836251),m=()=>o(351360),g=()=>o(150193),f=()=>o(807778),v=()=>o(134217),h=()=>o(671812),_=()=>o(847554),b=()=>o(749240),y=()=>o(84390),S=()=>o(209660),w=o(474848);var k=()=>o(991249);const I=(0,i().YK)({overFreeBlockLimitMobileNativeDialog:{id:"subscriptionActions.overFreeBlockLimit.mobileNativeDialog",defaultMessage:"Your free blocks have been used up. Unfortunately, unlimited blocks cannot be purchased on mobile."}});function A(e){if((0,h().A)(e))return c().HK(function(){const e=(0,v().qc)(b().subscriptionDataStoreInstance.state);return{id:"unpaid_invoice_toast",presentationType:"transient",iconGroup:y().Y,iconGroupVariant:"default",iconGroupColorName:"tertiary",title:(0,w.jsx)(i().sA,{id:"subscriptionActions.unpaidInvoice.toast.title",defaultMessage:"Payment not processed"}),message:e?(0,w.jsx)(i().sA,{id:"subscriptionActions.unpaidInvoice.toast.admin.message",defaultMessage:"Go to the Billing tab in Settings to verify your payment method."}):(0,w.jsx)(i().sA,{id:"subscriptionActions.unpaidInvoice.member.toast.message",defaultMessage:"Contact a workspace owner to verify your payment method so you can continue using Notion."}),actions:e?{primary:{title:(0,w.jsx)(i().sA,{id:"subscriptionActions.unpaidInvoice.toast.upgradeCta",defaultMessage:"Manage payment"}),onAction:()=>{S().Ow({currentTab:"billing"}),c().UW("unpaid_invoice_toast")}}}:void 0}}());c().HK(function(e){return{id:"out_of_blocks_toast",presentationType:"transient",iconGroup:n().I,iconGroupVariant:"default",iconGroupColorName:"uiBluePrimary",title:(0,w.jsx)(i().sA,{id:"subscriptionActions.overBlockLimit.toast.title",defaultMessage:"Upgrade to continue creating and collaborating on Notion"}),actions:{primary:{title:(0,w.jsx)(i().sA,{id:"subscriptionActions.overBlockLimit.toast.upgradeCta",defaultMessage:"Learn more"}),onAction:()=>{(0,k().K)(e,{from:"out_of_blocks_toast",upsell:{type:"product",product:"plus",limit:{type:"none"}}}),c().UW("out_of_blocks_toast")}}}}}(e))}function x(e){var t;const o=b().subscriptionDataStoreInstance.state,n=f().qp(),r=null===(t=m().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(o&&r){const t=(0,_().H)(e,r,o),i=f().Km(t);if(f().Mh(t))return C(e),!0;if(i&&null!==n&&n>3)return C(e),!1;if(v().V$(e,r,o,t))return a().xF(e),C(e),!1;v().jK(o,e,r,t)&&a()._M(e)}return!h().A(e)&&(s().zA({bannerStore:g().A,id:"SubscriptionEditingBlocker"}),!0)}function C(e){if(p().Al(e)&&"new"===e.RouterStore.state.route.name){async function t(){const{navigateToHomeTab:t}=await Promise.resolve().then(o.bind(o,537941)),{navigateOnBaseUrl:n}=await Promise.resolve().then(o.bind(o,435009));t(e),n({environment:e,url:r().JZ.root})}l().rG({message:u().A.formatMessage(I.overFreeBlockLimitMobileNativeDialog),onAccept:()=>{t()}})}else s().HQ({id:"SubscriptionEditingBlocker",bannerStore:g().A,styleKey:d().q.Red,contentKey:"over_free_block_limit"})}},612008:(e,t,o)=>{o.d(t,{H:()=>k,Q:()=>w});o(898992),o(672577);var n=()=>o(700500),r=()=>o(630053),i=()=>o(179034),a=()=>o(798880),s=()=>o(919709),l=()=>o(186445),c=()=>o(476492),d=()=>o(646736),u=()=>o(406792),p=()=>o(351360),m=()=>o(227440),g=()=>o(508496),f=()=>o(630116),v=()=>o(557281),h=()=>o(246826),_=()=>o(317001),b=()=>o(765370),y=()=>o(755673);function S(e,t,o){const n=l()._m(e),i=null==n?void 0:n.id;if(!i||!o)return;const s=(0,r().Sf)({experimentService:g().default,actor:{table:a().oo,id:i},spaceId:o})&&void 0!==t.getSharingEnabledRelationId();if(!s&&!g().default.checkGate({gateName:"full_access_for_created_collection_pages"}))return;if(s){const e=t.getSharingEnabledTargetCollectionStore();if(null!=e&&e.canAdmin())return}else if(t.canAdmin())return;const c=p().default.state.currentSpaceStore;return c&&(0,d().dp)(c,i).isMember()?[{role:"editor",type:"user_permission",user_id:i}]:void 0}function w(e){const{collectionContextStore:t,transaction:o}=e;return(0,b().w)({collectionContextStore:t,transaction:o}),k(e)}function k(e){var t,o,r;const{environment:a,collectionContextStore:l,groupsPointer:d,insertAtIndex:g,shouldCoerce:b,templateStore:w,transaction:k,from:I,tracker:A,inMemoryRecordCache:x,isKeyboard:C,title:T}=e,M=u().default.DO_NOT_USE_markLegacy("collections.add_item_lag");u().default.DO_NOT_USE_measureAfterNextFlushLegacy(M,{environment:a,getData:()=>({...c().kz(l),from:I.createBlock})});const P="collectionTypedView"===l.contextType,B=l.databaseType,R=l.collectionStoresStore.state,E=R.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||R[0],D=null===(t=p().default.state.currentSpaceStore)||void 0===t?void 0:t.id,N=p().default.state.currentUserSettingsStore,L=P&&B&&D&&N&&[...N.getAllPreferredCollections(D),...N.getPreferredCollectionsOfType(D,B)]||[];let F;const U=d[0];if("group_header"===I.createBlock&&"location"===U.value.type){const e=U.value.value;if(e){F=R.find((t=>t.id===e.id&&(t.canEdit()||t.canEditCollection()||t.canEditContentOnly())))}}else F=function(e,t){for(const o of e){const e=t.find((e=>e.id===o&&(e.canEdit()||e.canEditCollection()||e.canEditContentOnly())));if(e)return e}}(L,R);const O=F??E,V=null==O?void 0:O.getSpaceId(),j=l.collectionViewStore(),z=l.getViewType(),q=h().Wv({environment:a,type:n().xd.page,inMemoryRecordCache:x,transaction:k,spaceId:V,tracker:A,permissions:S(a,O,V),properties:{title:(0,s().x9d)(T)}});if(!O||!j||!z)return{coercionSucceeded:!0,newStore:q};const H=null===(o=l.groupsStore.getGroupState(d))||void 0===o?void 0:o.groupUiParentStore;if(!H)return{coercionSucceeded:!0,newStore:q};const W=f().Bv.createChildStore(H,{table:i().ev,id:q.id});w&&m().A.state.online&&v().n5({title:"template",environment:a,store:q,templateStore:w,isKeyboard:C??!1,isCreateIn:!1,transaction:k,from:I.initCollection??"collection_group_actions"});const K=(0,_().j)({environment:a,store:q,collectionStore:O,collectionContextStore:l,groupsPointer:d,shouldCoerce:b,transaction:k}),G=(null===(r=l.groupsStore.getGroupState(d))||void 0===r||null===(r=r.reducerResultStore.state)||void 0===r?void 0:r.blockIds)||[],$=void 0!==g?g:G.length;if(l.permissionScopesStore.state.canEditContent||P){const e=[...G.slice(0,$),W.id,...G.slice($)];(0,y().z)({resultIds:e,collectionViewStore:j,collectionContextStore:l,transaction:k})}return{coercionSucceeded:K,newStore:W}}},612587:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(370614).A)},613147:(e,t,o)=>{o.d(t,{A:()=>_});var n=o(296540),r=()=>o(852507),i=()=>o(943846),a=()=>o(753199),s=()=>o(227440),l=()=>o(378765),c=()=>o(150180),d=()=>o(799954),u=o(474848);const p=function(e){const{signedUrl:t,dataSize:n,dataName:r,contentWrapStyle:i,disabled:s,viewOriginal:l}=e,c={paddingTop:d().nE.paddingTop,paddingBottom:d().nE.paddingBottom,paddingLeft:d().nE.paddingLeft};return(0,u.jsx)("div",{style:i,onClick:void 0,onMouseDown:a().tr,children:(0,u.jsx)("div",{style:{position:"relative"},children:t&&(0,u.jsx)(o(489436).n,{title:r,url:t,size:n,onClick:s?void 0:l,style:c})})})};var m=()=>o(839010),g=()=>o(657202);const f={position:"absolute",left:0,top:0,width:"100%",height:"100%",borderRadius:1};function v(e){const{render:t,style:o,errorStyle:a,...d}=e,[p,m]=(0,n.useState)(void 0);(0,r().w)((()=>{s().A.state.online||m({type:"offline"})}));const v=(0,i().mI)(e.url);return(0,u.jsx)(g().A,{...d,render:(n,r,s)=>{let d=p??v;return n&&!d&&(d=(0,i().Vh)(n)??{type:"unknown",source:e.url}),(0,u.jsx)("div",{style:o,children:(0,u.jsx)(l().A,{innerStyle:{height:"100%",width:"100%"},loaded:s,style:f,spinnerSize:"relative",showSpinnerTimeout:500,children:d?(0,u.jsx)("div",{style:a,children:(0,u.jsx)(c().Ay,{family:"embed",error:d})}):t(r)})})}})}function h(e){const{height:t,source:o,contentStyle:r,dataName:i,dataSize:a,width:s}=e,[l,c]=(0,n.useState)(!1);return(0,u.jsx)(v,{url:o,permissionRecord:e.store.pointer,useS3Url:e.useS3Url,style:{width:"100%",height:"100%"},errorStyle:{height:t,width:s},render:o=>l&&i&&a?(0,u.jsx)(p,{...e,dataName:i,dataSize:a,signedUrl:o}):o&&(0,u.jsx)(m().A,{source:o,isFullWidth:!0,isFullHeight:!0,height:t,style:r,background:!0,onContentLoadTimeout:()=>c(!0)})})}const _={render:function(e){const{disabled:t,contentStyle:r,contentWrapStyle:s,handleFullScreen:l,handleEmbedComp:c,height:d,preserveScale:g,isFullWidth:f,source:h,dataName:_,dataSize:b}=e,[y,S]=(0,n.useState)(!1),w=(0,i().rS)({height:d,isFullWidth:f,preserveScale:g});return(0,u.jsx)(v,{url:h,permissionRecord:e.store.pointer,useS3Url:e.useS3Url,style:w,errorStyle:{position:"relative",height:d},render:n=>y&&_&&b?(0,u.jsx)(p,{...e,dataName:_,dataSize:b,signedUrl:n}):(0,u.jsx)("div",{style:s,onClick:t?l:void 0,onMouseDown:a().tr,children:(0,u.jsx)("div",{style:{position:"relative"},children:n&&(0,u.jsx)(m().A,{ref:e=>c(e),source:n,height:d,style:r,preserveScale:g,isFullWidth:f,background:!0,renderPreview:()=>(0,u.jsx)(o(835779).h,{source:(0,i().Yl)(e)}),onContentLoadTimeout:()=>S(!0)})})})})},embedGhost:!0,renderFullScreen:e=>(0,u.jsx)(h,{...e}),resizable:!0}},613240:(e,t,o)=>{o.d(t,{A:()=>r});const n=new(o(848776).U)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{var n;let{spaceId:r}=t;if(null===(n=o(351360).default.state.currentSpaceStore)||void 0===n||!n.canAdmin())return;const i=await Promise.resolve().then(o.bind(o,449506)),a=await i.callApi({eventName:"getCustomerOffersReceived",environment:e,data:{spaceId:r},headers:(0,o(386164).WS)({cellId:void 0,spaceId:r})});return"success"===a.type&&(0,o(534177).EI)(a.data)?a.data:void 0}));o(604341).exposeDebugValue("OffersReceivedStore",n);const r=n},616610:(e,t,o)=>{o.d(t,{a:()=>i,b:()=>r});var n=()=>o(221844);const r="AssistantCaches";class i{constructor(){this.updatesCache=void 0,this.diffCache=void 0,this.updatesCache=new(n().A)({name:`${r}.updatesCache`,isTemporaryData:!0}),this.diffCache=new(n().A)({name:`${r}.diffCache`,isTemporaryData:!0})}getDiffCacheOnlyForTests(){return this.diffCache}ensureDefaultCacheOverride(e){const t=e.defaultRecordCache.inMemoryRecordCache;this.updatesCache.addCacheFallback(t),t.cacheUsingThisInstanceAsAnOverride||t.addCacheOverride(this.diffCache)}removeDefaultCacheOverride(e){this.clear();const t=e.defaultRecordCache.inMemoryRecordCache;t.removeCacheOverride(this.diffCache),this.updatesCache.removeCacheFallback(t)}clear(){this.updatesCache.clearCache(),this.diffCache.clearCache()}commitTransaction(e){const{transactionActions:t,environment:o,perform:n,...r}=e,i=this;t.createAndCommit({environment:o,perform(e){n(e,i.updatesCache,!0),n(e,i.diffCache,!1)},canUndo:!0,...r})}commitDiffPreviewTransaction(e){const{transactionActions:t,environment:o,perform:n,...r}=e,{diffCache:i}=this;t.createAndCommit({environment:o,perform(e){n(e,i,!1)},canUndo:!0,...r})}makeGetRecordValueFnFromUpdatesCache(e){return this.updatesCache.makeGetRecordValueFn(e)}makeGetRecordValueFnFromDiffCache(e){return this.diffCache.makeGetRecordValueFn(e)}}},619400:(e,t,o)=>{o.d(t,{V:()=>u,openGoogleDriveFilePicker:()=>c});var n=()=>o(299917),r=()=>o(861017),i=()=>o(559926),a=()=>o(705540),s=()=>o(780054),l=()=>o(508496);async function c(e){const{environment:t,accessToken:o}=e;i().QV(t,{from:e.from});let c;if(l().default.checkGate({gateName:"gdrive_scope_migration_gate"})&&(c=l().default.getConfigKey("gdrive_app_id","app_id")),t.device.isElectron){const t=(0,r().S_)(s().A.domainBaseUrl,{token:o,viewType:e.viewType,appId:c,initialFileId:e.initialFileId}),n=await a().openGoogleDrivePickerPopup({url:t});if(!n)return;"integration"in e?e.callback(!1,n.url):e.callback(n.id)}else await(0,n().Ay)("https://apis.google.com/js/api.js"),"integration"in e?window.gapi.load("picker",(()=>d({environment:t,accessToken:o,callback:e.callback,integration:e.integration,viewType:e.viewType,initialFileId:e.initialFileId,appId:c}))):window.gapi.load("picker",(()=>d({environment:t,accessToken:o,callback:e.callback,viewType:e.viewType,initialFileId:e.initialFileId,appId:c})))}function d(e){const{environment:t,accessToken:o,initialFileId:n,appId:r}=e,a=`${window.location.protocol}//${window.location.host}`,s=new window.google.picker.DocsView(e.viewType);n&&(s.setIncludeFolders(!0),s.setSelectFolderEnabled(!0),s.setFileIds(n));(new window.google.picker.PickerBuilder).enableFeature(window.google.picker.Feature.SUPPORT_DRIVES).setOAuthToken(o).hideTitleBar().addView(s).setOrigin(a).setAppId(r||"").setCallback((o=>{if(o.action===window.google.picker.Action.PICKED&&o.docs&&o.docs.length>0){const n=o.docs[0];"integration"in e?e.callback(!1,n.url):e.callback(n.id),i().QV(t,{from:"link_preview_placeholder"})}})).build().setVisible(!0)}function u(){return l().default.checkGate({gateName:"google_doc_importer"})}},620149:(e,t,o)=>{o.d(t,{A:()=>a,l:()=>i});class n extends(()=>o(757695))().default{constructor(){super(...arguments),this.updateRemaining=e=>{this.state.remainingPending!==e&&(0===e?this.setState({...this.state,totalPending:0,remainingPending:0}):this.setState({...this.state,remainingPending:e}))}}getInitialState(){return{totalPending:0,remainingPending:0,transactionQueueError:void 0,storageUsageEstimate:void 0,connectionError:void 0}}percentComplete(e){if(this.state.totalPending>0){const t=1-this.state.remainingPending/this.state.totalPending;return e.formatNumber(t,{style:"percent",maximumFractionDigits:0})}return e.formatNumber(1,{style:"percent"})}setOrIncTotal(e){this.state.totalPending>e?this.setState({...this.state,totalPending:this.state.totalPending+1}):this.setState({...this.state,totalPending:e})}}const r=new n,i=new(o(496506).default)((()=>Boolean(r.state.transactionQueueError)),{debugName:"transactionQueueUnhealthyStore"}),a=r},620333:(e,t,o)=>{o.d(t,{U7:()=>c,YT:()=>s,fo:()=>l,lv:()=>a,mk:()=>i});var n=()=>o(534177),r=()=>o(763884);function i(e){let{searchSessionId:t,searchSessionFlowNumber:o}=e;if((0,n().O9)(t)&&(0,n().O9)(o))return`1:${t}:${o}`}const a="SearchShowFilterBar";function s(e){return function(e){const{key:t,userId:o,defaultValue:n}=e,i=r().A.get({userId:o,key:t});if(void 0===i)return n;if("boolean"!=typeof i)return!1;return i}({key:a,userId:e,defaultValue:!1})}const l=/(?:\s|^)-("[^"]+"|[\w]+)(?=\s|$)/g,c=/(?:\s|^)"([^"]*)"(?=\s|$)/g},620553:(e,t,o)=>{o.d(t,{t:()=>n});const n=(0,o(340498).xh)("trash",{default:{loader:()=>o.e(95440).then(o.bind(o,895440))},small:{loader:()=>o.e(77414).then(o.bind(o,977414))},mini:{loader:()=>o.e(92174).then(o.bind(o,892174))},large:{loader:()=>o.e(90462).then(o.bind(o,990462))}})},620689:(e,t,o)=>{o.d(t,{u5:()=>Z,pS:()=>$,C6:()=>K,z_:()=>G,hT:()=>V,pb:()=>j,BL:()=>q,BM:()=>z,lJ:()=>N});o(898992),o(672577),o(581454);var n=()=>o(959180),r=()=>o(496603),i=()=>o(231722),a=()=>o(953418),s=()=>o(333665),l=()=>o(906537),c=()=>o(494237),d=()=>o(447438),u=()=>o(556544),p=()=>o(695625),m=()=>o(110955),g=()=>o(521099),f=()=>o(155959),v=()=>o(756279),h=()=>o(353643),_=()=>o(176106),b=()=>o(375447),y=()=>o(574012),S=()=>o(205682),w=()=>o(77238),k=()=>o(712505),I=()=>o(630116),A=()=>o(93658),x=()=>o(502438),C=()=>o(24157);function T(e,t){o(989423).vd(e,"drag_near_edge_scroll",t)}function M(e,t,o,n){const r=(o-t)/o,i=n/10/60,a=i+(3*n/60-i)*Math.min(r*r,1);return e.device.isIOS?Math.ceil(a):a}const P=1e3,B=r().nF((e=>{T(e,{direction:"top"})}),P),R=r().nF((e=>{T(e,{direction:"bottom"})}),P),E=r().nF((e=>{T(e,{direction:"left"})}),P),D=r().nF((e=>{T(e,{direction:"right"})}),P);function N(e){const{environment:t,scroller:o,currentMouseX:n,currentMouseY:r}=e,i=o.getStore();i.measureSize();const a=A().default.state,s=h().A.state.disableVerticalEdgeScroll||!!a.isActive&&!a.allowVerticalEdgeScroll,l=h().A.state.disableHorizontalEdgeScroll||!!a.isActive&&!a.allowHorizontalEdgeScroll,c=function(e,t){const{device:o}=e,{clientRect:n}=t.state;let r=n&&n.height?n.height:0;o.isMobile?r*=.2:r*=.1;return r=Math.max(r,20),r}(t,i),d=function(e,t){const{device:o}=e,{clientRect:n}=t.state;let r=n&&n.width?n.width:0;o.isMobile?r*=.2:r*=.08;return r=Math.max(r,20),r}(t,i),{clientRect:u,elementRef:p}=i.state;if(!u||!p.current)return;const m=p.current,g=m.scrollHeight,_=m.scrollWidth,b=m.scrollLeft,S=m.scrollTop;if(o.getOverflowType()!==v().A.X&&!s){const e=r-u.top;let o,n;y().A.state.phase!==y().i.shown?(o=c,n=(0,f().T)("supportsNativeBottomBarOverlappingWebView")?u.bottom-y().A.mobileNativeBottomPadding(t)-r:u.bottom-r):(o=.25*y().A.keyboardHeight(),n=u.bottom-y().A.mobileNativeBottomPadding(t)+o-r);const i=0===S,a=S+u.height===g;if(e<c&&!i){const o=M(t,e,c,u.height);m.scrollTo({top:S-o}),o>0&&B(t)}if(n<o&&!a){const e=M(t,n,o,u.height);m.scrollTo({top:S+e}),e>0&&R(t)}}if(o.getOverflowType()!==v().A.Y&&!l){const e=n-u.left,o=u.right-n,r=0===b,i=b+u.width===_;if(e<d&&!r){const o=M(t,e,d,u.width);m.scrollTo({left:b-o}),o>0&&E(t)}if(o<d&&!i){const e=M(t,o,d,u.width);m.scrollTo({left:b+e}),e>0&&D(t)}}}const L=64,F=64,U=64,O=64;function V(e){const{element:t,environment:o,scrollerContext:n,vertical:r,horizontal:i,animate:s,centerVertically:l}=e,c=t.getBoundingClientRect();if(r&&null!=n&&n.verticalScroller){const{reveal:e}=r,t=r.paddingToTopEdge||L,i=r.paddingToBottomEdge||F,d=n.verticalScroller,u=d&&d.getClientRect();if(d&&u){const n=u.bottom-i,r=l?u.height/2:0,p=u.top+t+r,m=c.top>p&&c.top<n,g=c.bottom>p&&c.bottom<n,f=c.top<p&&c.bottom>n,v=c.bottom-n,h=c.top-p;"top"===e?m||a().HN({element:d.getNode(),environment:o,options:{top:h,left:0,behavior:s?"smooth":"auto"}}):"bottom"===e?g||a().HN({element:d.getNode(),environment:o,options:{top:v,left:0,behavior:s?"smooth":"auto"}}):m||g||f||(Math.abs(v)<Math.abs(h)?a().HN({element:d.getNode(),environment:o,options:{top:v,left:0,behavior:s?"smooth":"auto"}}):a().HN({element:d.getNode(),environment:o,options:{top:h,left:0,behavior:s?"smooth":"auto"}}))}}if(i&&null!=n&&n.horizontalScroller){const{reveal:e}=i,t=i.paddingToLeftEdge||O,r=i.paddingToRightEdge||U,l=n.horizontalScroller,d=l&&l.getClientRect();if(l&&d){const n=d.left+t,i=d.right-r,u=c.left>n&&c.left<i,p=c.right>n&&c.right<i,m=c.left<n&&c.right>i,g=c.right-i,f=c.left-n;"left"===e?u||a().HN({element:l.getNode(),environment:o,options:{left:f,top:0,behavior:s?"smooth":"auto"}}):"right"===e?p||a().HN({element:l.getNode(),environment:o,options:{left:g,top:0,behavior:s?"smooth":"auto"}}):u||p||m||(Math.abs(g)<Math.abs(f)?a().HN({element:l.getNode(),environment:o,options:{left:g,top:0,behavior:s?"smooth":"auto"}}):a().HN({element:l.getNode(),environment:o,options:{left:f,top:0,behavior:s?"smooth":"auto"}}))}}}function j(e){const{handle:t,horizontal:o,vertical:r,animate:i,environment:a}=e;if(!t)return;const s=(0,n().g)(t);return s?V({vertical:r,animate:i,horizontal:o,element:s,environment:a,scrollerContext:t.getScrollerContext()}):void 0}function z(e){if(x().default.state.pivot)q([x().default.state.pivot.id],(null==e?void 0:e.animate)??!1,null==e?void 0:e.environment);else{q(x().default.state.stores.map((e=>e.id)),(null==e?void 0:e.animate)??!1,null==e?void 0:e.environment)}}function q(e,t,o){const n=p().T.findScrollToSelectablesFromIds(e)[0];if(n){const{disableScrollToRevealHorizontal:e}=n.props;j({environment:o,handle:n,vertical:{reveal:"closest"},horizontal:e?void 0:{reveal:"closest"},animate:t})}}let H=function(e){return e[e.top=0]="top",e[e.middle=1]="middle",e[e.bottom=2]="bottom",e[e.natural=3]="natural",e}({});function W(e){let{position:t}=e;const{paddingTop:o,environment:n}=e;if("editing"!==C().default.state.mode)return;let r=e.paddingBottom;c().A.find((e=>e.isShown()))&&(r+=g().j);const i=l().get();if(i){const e=a().gi(i.commonAncestorContainer);if(!e)return;const s=a().sl(e).find((e=>e.scrollHeight>e.clientHeight));if(!s)return;const c=l().getRect(i);if(!c||!s)return;const d=s.getBoundingClientRect();if(!(i.startContainer instanceof Text)){const e=c;e.top+=4,e.bottom-=5,e.height-=9}const u=c.top<d.top+o,p=c.bottom>d.bottom-r;if(i.startContainer instanceof Text&&i.startOffset!==i.endOffset)return;if(t===H.natural)if(p)t=H.bottom;else{if(!u)return;t=H.top}if(t===H.top){const e=s.scrollTop+c.top,t=d.top+o;a().VG({element:s,environment:n,options:{top:e-t,behavior:"smooth"}})}else if(t===H.bottom){const e=s.scrollTop+c.bottom,t=d.bottom-r;a().VG({element:s,environment:n,options:{top:e-t,behavior:"smooth"}})}else if(t===H.middle){const e=s.scrollTop+c.top,t=d.top+d.height/2-10;a().VG({element:s,environment:n,options:{top:e-t,behavior:"smooth"}})}}}function K(e){return y().A.mobileNativeBottomPadding(e)+20}function G(e){if(u().A.isInlineAutocompleteOpen())return!0;if(_().A.state.open||_().A.state.willOpen)return!0;if(m().A.state.open)return!0;if(e.device.isMobileNative&&e.device.isPhone){if(b().A.state.open){const e=b().A.state;if("+"!==e.insertionType)return!0;const t=(0,s().aX)(e.textStore,e.oldTextValue,e.isEmptyPageTitle?"":e.insertionType),o=(0,s().mX)(e.textStore,t);if(t&&""!==(null==o?void 0:o.trim()))return!0}if(function(){var e;const t="editing"===C().default.state.mode&&(null===(e=(0,i().H7)(C().default.state.multiSelection))||void 0===e?void 0:e.store);if(t){const e=t.getRecordStoreAtRootPath();if(e instanceof I().Bv){const t=e.getValue(),o=t&&t.type;return"link_to_page"===o||"link_to_collection"===o}}return!1}())return!0}return!1}function $(e){const t=d().A.shouldPreventMobileAutoScroll(e),o=K(e);G(e)?W({environment:e,position:H.top,paddingTop:20+Y(),paddingBottom:o+40}):t||S().A.state.isOpen&&!k().default.state.open||w().A.state.isOpen||W({environment:e,position:H.natural,paddingTop:20,paddingBottom:o+40})}function Y(){return _().A.state.willOpen||_().A.state.open?64:0}const Q=r().Oo((e=>{const{device:t}=e;return new(o(496506).default)((()=>t.isMobile&&h().A.state.isDragging||t.isMobile&&o(429825).A.state.swiping?v().A.All:o(595985).A.getPreventScrollType()),{debugName:"preventScrollTypeStore"})}));function Z(e){return Q(e).state}},621327:(e,t,o)=>{o.d(t,{DI:()=>y,qp:()=>w,Fs:()=>S});o(296540);var n=()=>o(340498),r=o(474848);const i={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M10 2.175A2.875 2.875 0 0 0 7.125 5.05v3.6a2.875 2.875 0 1 0 5.75 0v-3.6A2.875 2.875 0 0 0 10 2.175M8.375 5.05a1.625 1.625 0 0 1 3.25 0v3.6a1.625 1.625 0 1 1-3.25 0z"}),(0,r.jsx)("path",{d:"M5.604 10.891a.625.625 0 1 0-1.028.71 6.58 6.58 0 0 0 4.799 2.82v1.929H5.95a.625.625 0 1 0 0 1.25h8.1a.625.625 0 0 0 0-1.25h-3.425v-1.93a6.58 6.58 0 0 0 4.799-2.818.625.625 0 1 0-1.029-.71 5.33 5.33 0 0 1-4.393 2.308h-.004a5.33 5.33 0 0 1-4.394-2.309"})]})},a=(0,n().wt)("microphone",i),s={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M7.125 5.05a2.875 2.875 0 1 1 5.75 0v3.6a2.875 2.875 0 1 1-5.75 0z"}),(0,r.jsx)("path",{d:"M5.604 10.891a.625.625 0 1 0-1.028.71 6.58 6.58 0 0 0 4.799 2.82v1.929H5.95a.625.625 0 1 0 0 1.25h8.1a.625.625 0 0 0 0-1.25h-3.425v-1.93a6.58 6.58 0 0 0 4.799-2.818.625.625 0 1 0-1.029-.71A5.33 5.33 0 0 1 10 13.2a5.33 5.33 0 0 1-4.396-2.309"})]})},l=(0,n().wt)("microphoneFill",s);var c=()=>o(959013),d=()=>o(301948),u=()=>o(549500),p=()=>o(964345),m=()=>o(878377),g=()=>o(972435),f=()=>o(227440);const v=[function(){return(0,o(862835).h)()},m().p2L],h=[...v,m().opL,m().gxn,m().AU6(m().vEP)];var _=()=>o(416726);const b=(0,c().YK)({dictateName:{id:"action.dictate.name",defaultMessage:"Dictate"}}),y=(0,_().Fw)({key:"dictate",displayName:b.dictateName,analyticsName:b.dictateName.defaultMessage,validators:[...h,m().AU6(m().wHP)],shortcuts:["dictate"],closeParentMenu:!0,render:(e,t)=>{const n=p().gZ.state&&p().Di.state===t.blocks[0].id,i=(0,o(100622).O4)({theme:t.environment.ThemeModeStore.state}),a=!f().A.state.online;return(0,r.jsx)(o(575143).A,{...e,title:(0,r.jsx)(c().sA,{...b.dictateName}),badge:(0,r.jsx)(d().A,{}),svg:l,right:(0,_().cz)(i,n),tooltipText:a?g().A.formatMessage(_().AY.unavailableOfflineTooltip):void 0,disabled:a,disabledFeedback:a})},action:async(e,t)=>{const{environment:o}=e,n=t instanceof KeyboardEvent&&"Enter"!==t.key,{dictationActions:r}=await u().$O.load();r.smartToggleDictation({environment:o,from:n?"shortcut":"topbar_menu",includeSystemAudio:!1})}}),S=(0,_().Fw)({key:"newPageAndDictate",analyticsName:"New page and dictate",displayName:void 0,validators:[m().IT$,m().M3g,...v,m().AU6(m().wHP)],shortcuts:["newPageAndDictate"],closeParentMenu:!0,action:async(e,t)=>{const{environment:n}=e,r=t instanceof KeyboardEvent&&"Enter"!==t.key?"new_page_and_dictate_shortcut":"new_page_and_dictate_action",i=await(0,o(869562).quickAddPage)({environment:n,from:r});if(i){const{dictationActions:e}=await u().$O.load();e.startDictation({environment:n,from:r,blockStore:i,includeSystemAudio:!1})}}}),w=(0,_().Fw)({key:"dictate",displayName:b.dictateName,analyticsName:b.dictateName.defaultMessage,svg:a,validators:[...h,m().nvZ,m().AU6(m().wHP)],shortcuts:["dictate"],closeParentMenu:!0,badge:(0,r.jsx)(d().A,{}),action:async(e,t)=>{const{environment:o}=e,{dictationActions:n}=await u().$O.load();n.startDictation({environment:o,from:"block_action",includeSystemAudio:!1})},disabled:()=>!f().A.state.online,renderTooltip:()=>g().A.formatMessage(_().AY.unavailableOfflineTooltip),disableTooltip:()=>f().A.state.online})},621793:(e,t,o)=>{o.d(t,{Jl:()=>r,XI:()=>i,kR:()=>s,m7:()=>l});var n=()=>o(878377);const r=[function(e){return(0,o(68465).ZE)(e.publicEditMode)},n().p2L,n().AU6(n().J$q)],i=[...r,n().AU6(n().vEP),n().AU6(n().yAQ)];function a(e){return!o(430483).zD.isAssistantInWriterEnabled()}const s=[...i,a],l=[...i,e=>!a()]},621979:(e,t,o)=>{o.d(t,{A:()=>i});o(898992),o(737550);var n=o.n(o(36545)),r=()=>o(496603);const i=function e(t,o,i){if(Array.isArray(i))return i.some((n=>e(t,o,n)));{const e=i.toLowerCase().split("+");if(t.device.isWindows||t.device.isLinux){if((r().mK(e,"command")||r().mK(e,"ctrl"))!==o.ctrlKey)return!1}else{if(r().mK(e,"command")!==o.metaKey)return!1;if(r().mK(e,"ctrl")!==o.ctrlKey)return!1}return r().mK(e,"shift")===o.shiftKey&&(r().mK(e,"alt")===o.altKey&&r().Si(e,(e=>{if("command"===e||"shift"===e||"ctrl"===e||"alt"===e)return!0;const t="code:";if(e.startsWith(t)&&o.code){const t=e.substr(5);return o.code.toLowerCase()===t}return n()(o.keyCode)===e})))}}},622232:(e,t,o)=>{o.d(t,{$:()=>b});var n=()=>o(584262),r=()=>o(197959),i=()=>o(161479),a=()=>o(496603),s=()=>o(300857),l=()=>o(347199),c=()=>o(712287),d=()=>o(517223),u=()=>o(455994),p=()=>o(644914),m=()=>o(351360),g=()=>o(783848),f=()=>o(630116),v=()=>o(427155),h=()=>o(112873),_=()=>o(797265);function b(e,t){var o;const{RouterStore:b}=e,y=b.state.route;if("page"!==y.name&&"chat"!==y.name)return;if(!m().default.state.currentLoadingContainerStore&&"page"===y.name)return;if((null===(o=m().default.state.currentLoadingContainerStore)||void 0===o||!o.state.ready)&&"page"===y.name)return;g().A.reset(),v().A.reset();const S="pageVisitSource"in y&&y.pageVisitSource?parseInt(y.pageVisitSource):void 0;if(y.scrollToBlockId)return void _().Ls(e,{blockId:y.scrollToBlockId,animate:t.animateScrollToBlocks,onSelect:t=>{"page"===y.name&&y.discussionId&&h().B4({environment:e,blockStore:t,discussionIds:[y.discussionId],analyticsFrom:S===n().y8.Notification?"notification":"page_load",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1})}});if("page"===y.name&&y.discussionId&&m().default.state.mainEditorCurrentBlockStore){var w;const t=null===(w=f().sk.createChildStore(m().default.state.mainEditorCurrentBlockStore,{table:r().$Y,id:y.discussionId,spaceId:(0,i().e)(m().default.state.mainEditorCurrentBlockStore.pointer.spaceId)}))||void 0===w?void 0:w.getPropertyId();if(t){if(!(0,s().b)({discussionId:y.discussionId,blockId:m().default.state.mainEditorCurrentBlockStore.id,environment:e})){var k;const o=null===(k=m().default.state.mainEditorCurrentBlockStore.getAssociatedCollectionStore())||void 0===k?void 0:k.getLayoutStore(),n=Boolean(o&&(0,d().Hc)({layoutStore:o,propertyId:t}).isPropertyInPageDetails);if(!(0,p().uX)(e)&&n)return(0,c().j)({environment:e,layoutStore:o,from:"discussion_url",panelLocation:"mainPage"}),void u().A.update((e=>({...e,propertyIdDiscussionToOpenOnPanelOpen:t})))}}return void h().B4({environment:e,blockStore:m().default.state.mainEditorCurrentBlockStore,discussionIds:[y.discussionId],analyticsFrom:S===n().y8.Notification?"notification":"page_load",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1,property_id:t})}const{PageScroller:I}=l().A;if("pop"===b.state.action&&b.state.historyState){var A;if(I&&a().Et(b.state.historyState.scrollTop))null===(A=I.getNode())||void 0===A||A.scrollTo({top:b.state.historyState.scrollTop});b.state.historyState.blockIds&&_().dL(e,b.state.historyState.blockIds)}}},622237:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{editorWidth:void 0,peekViewEditorWidth:void 0}}setWidth(e,t){t?this.setPeekViewEditorWidth(e):this.setEditorWidth(e)}setEditorWidth(e){this.setState({...this.state,editorWidth:e})}setPeekViewEditorWidth(e){this.setState({...this.state,peekViewEditorWidth:e})}getWidth(e){return e?this.getPeekViewEditorWidth():this.getEditorWidth()}getEditorWidth(){return this.state.editorWidth}getPeekViewEditorWidth(){return this.state.peekViewEditorWidth}}const r=new n},622963:(e,t,o)=>{o.d(t,{As:()=>i,Nw:()=>l,_y:()=>s,gG:()=>r,vK:()=>a});o(581454);var n=()=>o(534177);const r=["free","plus","business","enterprise"],i=["team_monthly_10","team_yearly_96","plus_monthly_eur","plus_yearly_eur","plus_monthly_gbp","plus_yearly_gbp"];function a(e){switch(e){case"free":case"student":case"personal":case"plus":case"business":case"enterprise":case"ai":return"seats";case"sites_custom_hostnames":return"public_domain_custom_hostnames";default:(0,n().HB)(e)}}function s(e){switch(e){case"free":case"personal_free":case"team_free":return"free";case"student":case"personal":case"plus":case"business":case"enterprise":return e;default:(0,n().HB)(e)}}function l(e){const{prices:t,quantity:o,domainsQuantity:n}=e;return t.map((e=>"public_domain_custom_hostnames"===a(e.product)?{price:e,quantity:n??0}:{price:e,quantity:o}))}},624090:(e,t,o)=>{o.d(t,{BT:()=>p,I4:()=>c,NA:()=>g,XX:()=>m,mZ:()=>s,mu:()=>l,qI:()=>d,uZ:()=>u,vw:()=>f});var n=()=>o(720665),r=()=>o(142748),i=()=>o(179034),a=()=>o(979340);const s=1714158352e3,l=17240832e5,c=30*n().i5,d=30*n().i5;function u(e,t){const o=(0,r().nz)(e,t);if((null==o?void 0:o.table)===i().ev)return o.getDeletedFromTrashTime()}function p(e,t){const o=(0,r().O)({recordPointer:e,getRecordModel:t});if((null==o?void 0:o.table)===i().ev)return o.getMovedToTrashTime()}function m(e){if(!e||!(0,a().OX)(e.getSubscriptionTier()))return 1e3*c;return 1e3*(e.getSetting("delete_from_trash_delay_seconds")??c)}function g(e){if(!e||!(0,a().OX)(e.getSubscriptionTier()))return 1e3*d;return 1e3*(e.getSetting("purge_delay_seconds")??d)}function f(e){let{movedToTrashTime:t,deleteFromTrashDelayMs:o,cdrrDeletionEnabledTimestamp:n}=e;const r=t??s;return(r<n?n:r)+o}},624307:(e,t,o)=>{o.d(t,{A:()=>r,C:()=>n});let n=function(e){return e.Updates="updates",e.Home="home",e}({});const r=new(o(463830).A)},624550:(e,t,o)=>{o.d(t,{Ew:()=>Y,hh:()=>ee,Jx:()=>J,i1:()=>X,w7:()=>Z,MC:()=>oe,Ul:()=>Q,Yi:()=>te,Xm:()=>ne});o(898992),o(672577),o(803949);var n=()=>o(584262),r=()=>o(857639),i=()=>o(763884),a=()=>o(861017),s=()=>o(427704),l=()=>o(179034),c=()=>o(96689),d=()=>o(496603),u=()=>o(763824),p=()=>o(498212),m=()=>o(973647),g=()=>o(534177),f=()=>o(211716),v=()=>o(466614),h=()=>o(857783),_=()=>o(521358),b=()=>o(780054),y=()=>o(855801),S=()=>o(989423),w=()=>o(186445),k=()=>o(48848),I=()=>o(492414),A=()=>o(972435),x=()=>o(836251),C=()=>o(84520),T=()=>o(294712),M=()=>o(630116);var P=()=>o(274511),B=()=>o(562800),R=()=>o(792415),E=()=>o(351360),D=()=>o(508496),N=()=>o(520257),L=()=>o(160568),F=()=>o(187015);var U=()=>o(449506),O=()=>o(901389),V=()=>o(896628),j=()=>o(496414),z=()=>o(44729),q=()=>o(729283),H=()=>o(435009),W=()=>o(185544),K=()=>o(317909);const G=750,$="forkPageTemplate";function Y(){N().A.setState({open:!1})}async function Q(e){const{environment:t,store:o,originRect:r}=e;!function(e,t){var o;S().vd(e,"fork_page",{blockId:t},{dontWait:!0}),D().default.logEvent("fork_page",(0,F().z)(null===(o=document.location)||void 0===o?void 0:o.hostname))}(t,o.id);const{RouterStore:i}=t,c=i.state.route;if(x().w6(t)){var d;let e=o;if("space"===c.name){const t=o.getSpaceStore();if(!t)return;const n=c.spaceDomain?B().kn(t,c.spaceDomain):void 0,r=null==n?void 0:n.getPublicHomePage();if(!r)return;const i=M().Bv.createChildStore(t,{id:r,table:l().ev,spaceId:t.id});if(!i)return;e=i}const{publicPageData:r}=R().A.state,i=null==r||null===(d=r.template)||void 0===d?void 0:d.listingId;if(i){const e=await U().callApi({eventName:"getMarketplacePurchaseRoute",environment:t,data:{marketplaceListingId:i}});if("success"===e.type&&e.data.success){var u;const o=D().default.getConfigKey("marketplace_public_purchase_url_optout","usernames").includes((null==r||null===(u=r.template)||void 0===u?void 0:u.creator.username)??""),n=e.data.url,i=e.data.type;if(n&&!(o&&"checkout"===i||"external"===i))return void H().navigateOnBaseUrl({environment:t,url:n,extraSearchParams:{from:"public_page",tid:await(0,S().TZ)(t)}})}}const s=(0,I().Ay)({store:e,fullyQualified:!1,duplicate:!0,pageVisitSource:n().y8.Duplicate,embedded:!1,disableSlug:!0});return void H().navigateOnBaseUrl({environment:t,url:s,extraSearchParams:{...await q().Mh(t),utm_source:"public_page",utm_content:"duplicate_button",tid:await(0,S().TZ)(t),from:"public_page",n:"duplicate_public_page"},openInNewTab:(0,a().bh)(c)})}const{currentUserRootStore:p}=E().default.state;if(p){const e=w().jU(p);if(1===e.length){const n=e[0],r=n.getSpaceStore();if(!r)return;Z({environment:t,store:o,spaceStore:r,spaceViewStore:n,isPrivate:!0,context:"public_page_duplicate_single_workspace"})}else N().A.setState({open:!0,store:o,originRect:r})}else te({currentUserId:t.currentUser.id,blockId:o.id}),H().oo({environment:t,url:s().JZ.login})}async function Z(e){const{environment:t,store:o,spaceStore:r,context:i,templateId:a}=e,s=Date.now();let l;const c=X({...e}),[d]=await Promise.all([c.then((e=>(l=Date.now()-s,e))),(0,u().wR)(G)]);j().V();const p=Date.now()-s;if("public_page_duplicate_multiple_workspace"===i||"public_page_duplicate_single_workspace"===i){const{blockTitle:e}=function(e){const{store:t,spaceStore:o}=e,n=A().A.getIntl(),r=(0,k().Ow)(t,n),i=(0,k().sM)(o,n);return j().m({message:k().DZ.loadingStateDisplayText,interpolatedValues:{blockTitle:r,spaceTitle:i}}),{blockTitle:r,spaceTitle:i}}({store:o,spaceStore:r});L().hB(t,{from:"publicPage",success:!d.error,template_block_id:o.id,target_space_id:r.id,context:i,template_duplication_duration_ms:l,template_duplication_duration_with_minimum_ms:p,public_template_name:e,template_id:a})}void 0!==d.error?O().f1(d.error):h().uK({environment:t,store:d.value,visitType:f().ig.Link,pageVisitSource:n().y8.Duplicate})}async function X(e){const{environment:t,store:o,spaceStore:n,spaceViewStore:r,isPrivate:i,duplicateOnlyCollectionSchema:a}=e,{duplicateBlock:s}=await(0,y().D6)();return new Promise((e=>{K().createAndCommit({userAction:"forkPageActions.forkPage",environment:t,canUndo:!0,perform:l=>{const[c,d]=s({environment:t,stores:[o],transaction:l,addCopyName:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,targetSpaceId:n.id,baseUrl:b().A.domainBaseUrl,publicDomainName:b().A.publicDomainName,preferDuplicateLocation:"local",duplicateOnlyCollectionSchema:a}),u=c[0];d.then((o=>{"error"===o.status?v().Rk(o.error)?v().yj({product:o.error.clientData.metadata.product}):O().f1(o.errorMessage):(e({value:u}),u.isLocked()&&K().createAndCommit({userAction:"forkPageActions.forkPageWithLoadingAndNavigate",environment:t,canUndo:!0,perform:e=>{V()._l({environment:t,store:u,isLocked:!1,transaction:e})}}))})),W().yM({environment:t,spaceStore:n,spaceViewStore:r,pageStore:u,isPrivate:i,location:{type:"prepend"},transaction:l})}})}))}async function J(e){const{environment:t,store:o,newParentStore:n,duplicateOnlyCollectionSchema:i,shouldAttemptServerBackedLocalDuplication:a}=e;let s="forkPageActions.duplicateTo";e.templateInstallationMetadata&&(e.templateInstallationMetadata.isListedTemplate?s="forkPageActions.duplicateTo.marketplaceTemplateInstallation":"public_page"===e.templateInstallationMetadata.source?s="forkPageActions.duplicateTo.publicPageInstallation":"onboarding"===e.templateInstallationMetadata.source?s="forkPageActions.duplicateTo.onboardingInstallation":"team_home"===e.templateInstallationMetadata.source&&(s="forkPageActions.duplicateTo.teamHomeInstallation"));const l="space"===n.table?n.id:n.getSpaceId(),u=E().default.state.currentUserRootStore;if(!l||!u)return void r().log({level:"info",from:"duplicateToHelper",type:l?"no_current_user_root_store":"no_target_space_id",data:{miscDataToConvertToString:{targetSpaceId:l,userId:null==u?void 0:u.id,duplicateBlockUserAction:s}}});const p="space"===n.table?n:M().sk.createUniqueRootStore(t,{table:c().NX,id:l}),m=function(e){let{spaceStore:t,userId:o,environment:n}=e;const r=new(M().dZ)(n,{table:T().GD,id:o}).getSpaceViewPointers().find((e=>e.spaceId===t.id));return r?M().vH.createChildStore(t,{id:r.id,table:C().mu,spaceId:t.id}):void 0}({spaceStore:p,userId:u.id,environment:t});if(!m)return void r().log({level:"info",from:"duplicateToHelper",type:"no_target_space_view_store",data:{miscDataToConvertToString:{targetSpaceId:l,userId:null==u?void 0:u.id,duplicateBlockUserAction:s}}});const f=await _().rW({environment:t,block:o,action:"duplicate"});if("user_canceled"===f)return;const v=await(0,P().U)(),{duplicateBlock:h}=await(0,y().D6)();return await new Promise((n=>{K().createAndCommit({userAction:s,isTemplateInstantiationTransaction:!!e.templateInstallationMetadata,environment:t,canUndo:!0,perform:r=>{const[s,c]=h({environment:t,stores:f,transaction:r,addCopyName:e.addCopyName,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,targetSpaceId:l,baseUrl:b().A.domainBaseUrl,publicDomainName:b().A.publicDomainName,preferDuplicateLocation:"local",duplicateOnlyCollectionSchema:i,installationImprint:e.installationImprint,templateInstallationMetadata:e.templateInstallationMetadata,shouldAttemptServerBackedLocalDuplication:a});c.then((o=>{"error"===o.status?n({error:o}):(n({value:s}),e.unlockPage&&s.find((e=>e.isLocked()))&&K().createAndCommit({userAction:"forkPageActions.duplicateToHelper",environment:t,canUndo:!0,perform:e=>{s.forEach((o=>{o.isLocked()&&V()._l({environment:t,store:o,isLocked:!1,transaction:e})}))}}))}));const u={type:"append",after:e.appendWithoutAfter?void 0:o.id},_=d().o8(s).reverse();if("team"===e.newParentStore.table)v({transaction:r,currentSpaceViewStore:m,teamStore:e.newParentStore,targets:s,environment:t,location:u,action:"move",value:{type:"team",id:e.newParentStore.id,spaceId:l}});else if("block"===e.newParentStore.table)for(const t of _)z().NI({parentStore:e.newParentStore,childStore:t,transaction:r,after:u.after});else if("space"===e.newParentStore.table)for(const e of _)W().yM({environment:t,spaceStore:p,spaceViewStore:m,pageStore:e,isPrivate:!0,location:u,transaction:r});else(0,g().HB)(e.newParentStore);return s}})}))}async function ee(e){const t=await J({...e,addCopyName:!0});if(t)if(m().Q.isFail(t)){const e=t.error;v().Rk(e.error)?v().yj({product:e.error.clientData.metadata.product}):O().f1(e.errorMessage)}else if(m().Q.isSuccess(t)){const{environment:o,callback:r}=e;null==r||r(),h().uK({environment:o,store:t.value[0],visitType:f().ig.Link,pageVisitSource:n().y8.Duplicate})}else(0,g().HB)(t)}function te(e){let{currentUserId:t,blockId:o}=e;i().A.set({userId:t,key:$,value:o})}function oe(e){return i().A.get({userId:e,key:$})}async function ne(e){let{environment:t,blockId:o,spaceId:n,templateId:r,installationId:i,source:a,context:s,isEmailShared:l}=e;if(r&&(0,p().iv)(r))await U().callApi({eventName:"createMarketplaceInstallation",environment:t,data:{destinationTable:"space",destinationId:n,productTable:"template",productId:r,installationId:i,source:a,context:s,isEmailShared:l}});else{const e=await U().callApi({eventName:"inAppGetTemplateByBlockId",environment:t,data:{blockId:o}});if("success"===e.type&&e.data.success&&e.data.template){const o=e.data.template;await U().callApi({eventName:"createMarketplaceInstallation",environment:t,data:{destinationTable:"space",destinationId:n,productTable:"template",productId:o.id,installationId:i,source:a,context:s,isEmailShared:l}})}}}},627506:(e,t,o)=>{o.d(t,{_:()=>v});var n=()=>o(945610),r=()=>o(301608),i=()=>o(496603),a=()=>o(763824),s=()=>o(498212),l=()=>o(792415),c=()=>o(351360),d=()=>o(151059),u=()=>o(134217),p=()=>o(10984),m=()=>o(749240),g=()=>o(186445),f=()=>o(437622);o(581454);async function v(e){var t;await(0,a().nQ)(2e3,Promise.all([m().subscriptionDataStoreInstance.waitUntilLoaded(),l().A.waitUntilLoaded()]));const o=m().subscriptionDataStoreInstance.state,{currentUserStore:v,currentSpaceStore:h}=c().default.state,{publicPageData:_}=l().A.state,b=(0,g().s0)(),y=b?(0,s().ot)(b):void 0,{mainEditorCurrentBlockStore:S}=c().default.state,w=null!=h&&h.isDefined()?{id:null==h?void 0:h.id,settings:null==h?void 0:h.getSettings(),email_domains:null==h?void 0:h.getEmailDomains(),plan_type:null==h?void 0:h.getPlanType(),initial_use_cases:null==h?void 0:h.getInitialUseCases(),invite_link_enabled:null==h?void 0:h.getInviteLinkEnabled(),created_by_id:null==h?void 0:h.getCreatedById(),created_time:h.getCreatedTime()}:void 0,k=(null==h?void 0:h.id)||(null==_?void 0:_.spaceId)||(null==S?void 0:S.getSpaceId()),I=Boolean(null==w||null===(t=w.settings)||void 0===t?void 0:t.is_teams_enabled),A=(x=c().default.state.currentUserRootStore)&&x.isReady()?i().sb(x.getSpaceViewStores().map((e=>e.getSpaceId()))).length:void 0;var x;if(k&&v&&h&&o){const t=d().A.getData(e,{spaceId:k}),a=u().Fq(o),l=u().Be(o).length||0,c=await u().$(e,k,o),m=await u().Zt(e,k,o),g=o.hasPaidNonzero,v=t?t.domain:void 0,_=w&&w.email_domains?w.email_domains:void 0,b=u().Bl(o,e,k,c),S=(0,f().mQ)(t),x=(0,f().u_)(t),C=i().Et(b)&&!Number.isNaN(b)&&b!==1/0?b:0;return{space_analytics_data_type:n().$.SPACE_MEMBER_DATA,subscription_tier:(0,p().AI)(),page_id:y,space_id:(0,s().ot)(k),space_is_subscribed:a,space_visible_total:l,space_visible_members:c,space_visible_guests:m,space_visible_members_bucketized:(0,r()._v)(c),space_block_usage:u().hr(e,k,o,c),space_block_usage_over_limit:u().V$(e,k,o,c),space_role:h.getRole(),space_block_usage_percent:C,space_timeline_view_usage:0,space_created_time:S,available_credit:0,space_domain:v,space_email_domains:_,space_has_paid_nonzero:g,space_plan_type:x,space_initial_use_cases:w?w.initial_use_cases:void 0,space_invite_link_enabled:null==w?void 0:w.invite_link_enabled,space_created_by:null!=w&&w.created_by_id?(0,s().ot)(w.created_by_id):void 0,teams_is_enabled:I,current_space_view_count:A}}if(_){const t=_.spaceId?d().A.getData(e,{spaceId:_.spaceId}):void 0,o=(0,f().mQ)(t),r=(0,f().u_)(t);return{space_analytics_data_type:n().$.SPACE_NONMEMBER_DATA,space_id:k?(0,s().ot)(k):void 0,space_domain:_.spaceDomain,page_id:y,subscription_tier:(0,p().AI)(),space_created_time:o,space_plan_type:r,space_invite_link_enabled:null==w?void 0:w.invite_link_enabled,space_created_by:null!=w&&w.created_by_id?(0,s().ot)(w.created_by_id):void 0,teams_is_enabled:I,current_space_view_count:A}}return w?{space_analytics_data_type:n().$.BASE_SPACE_DATA,space_id:(0,s().ot)(w.id),space_created_time:w.created_time,space_plan_type:w.plan_type,space_invite_link_enabled:w.invite_link_enabled,space_created_by:w.created_by_id?(0,s().ot)(w.created_by_id):void 0,teams_is_enabled:I,current_space_view_count:A}:{space_analytics_data_type:n().$.SPACE_DATA_NOT_LOADED,space_id:null!=h&&h.id?(0,s().ot)(null==h?void 0:h.id):void 0,current_space_view_count:A}}},628149:(e,t,o)=>{o.d(t,{Z:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("codeOnly",{viewBox:"0 0 24 20",svg:(0,n.jsx)("path",{d:"M8.093 13.62c.458.123.875-.123 1.011-.58l3.364-11.533c.13-.43-.082-.855-.54-.978-.451-.123-.848.075-.998.581L7.58 12.595c-.137.465.041.895.513 1.025zM.115 7.064c0 .233.103.472.301.643l4.423 3.992c.362.328.848.322 1.148-.02.308-.342.267-.834-.082-1.149L2.077 7.064l3.828-3.472c.349-.315.39-.8.082-1.142-.3-.342-.786-.348-1.148-.02L.416 6.415a.879.879 0 00-.3.65zm19.763 0a.878.878 0 00-.3-.649L15.153 2.43c-.362-.328-.847-.322-1.148.02-.308.342-.267.827.082 1.142l3.828 3.472-3.828 3.466c-.349.315-.39.807-.082 1.149.3.341.786.348 1.148.02l4.423-3.992c.198-.17.3-.41.3-.643z"})})},630053:(e,t,o)=>{o.d(t,{Sf:()=>n});function n(e){const{experimentService:t,actor:o,spaceId:n}=e;return t.checkGate({actor:o,gateName:"db_permissions",customIDs:{spaceId:n}})}},630105:(e,t,o)=>{o.d(t,{M:()=>n,z:()=>r});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454);const n=[o(105652).J,o(344367).y,o(797050).L,o(93224).V,o(154489).S,o(866302).d,o(361051).a,o(114366).Z,o(84233).m,o(640520).h,o(294448).J,o(542811).m,o(506828).L,o(663999).c,o(158277).e,o(574922).x],r=new Set(n.map((e=>e.table)))},631611:(e,t,o)=>{o.d(t,{Ui:()=>c,hP:()=>C,jw:()=>T,wy:()=>A});o(16280);var n,r=o(296540),i=o(474848);const a={fullPage:!0,mobileNative:!0,mobileWeb:!0,commandSearch:!0,mobileSearch:!1,writer:!1,corner:!1,searchPane:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},s={mobileNative:!0,mobileWeb:!0,mobileSearch:!0,mobileWriter:!0,fullPage:!1,writer:!1,corner:!1,searchPane:!1,commandSearch:!1,workflowEditor:!1,conflictingContentComment:!1},l={writer:!0,mobileWriter:!0,mobileWeb:!1,mobileNative:!1,mobileSearch:!1,fullPage:!1,corner:!1,searchPane:!1,commandSearch:!1,workflowEditor:!1,conflictingContentComment:!1};function c(e){return l[e]}const d={corner:!0,searchPane:!0,fullPage:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,commandSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},u={corner:!0,searchPane:!0,fullPage:!0,mobileNative:!0,mobileWeb:!0,mobileSearch:!0,commandSearch:!0,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},p={corner:!0,searchPane:!1,fullPage:!0,mobileNative:!0,mobileWeb:!1,mobileSearch:!1,commandSearch:!0,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},m={corner:!0,searchPane:!0,fullPage:!0,commandSearch:!0,writer:!0,mobileWriter:!0,workflowEditor:!0,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,conflictingContentComment:!1},g={corner:!0,searchPane:!0,commandSearch:!0,mobileNative:!0,mobileSearch:!0,mobileWeb:!0,writer:!1,fullPage:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},f={corner:!0,writer:!0,mobileWriter:!0,fullPage:!1,searchPane:!1,commandSearch:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,workflowEditor:!1,conflictingContentComment:!1},v={corner:!0,fullPage:!0,searchPane:!0,mobileNative:!0,commandSearch:!0,mobileWeb:!0,mobileSearch:!0,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},h={corner:!0,fullPage:!0,searchPane:!1,mobileNative:!1,commandSearch:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},_={corner:!0,fullPage:!0,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},b={fullPage:!0,writer:!0,corner:!0,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},y={corner:!0,fullPage:!1,writer:!1,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},S={fullPage:!0,writer:!1,corner:!1,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},w={writer:!0,fullPage:!1,corner:!1,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},k={corner:!0,fullPage:!1,searchPane:!1,mobileNative:!1,commandSearch:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},I={corner:!0,fullPage:!0,searchPane:!1,mobileNative:!1,commandSearch:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1};class A{constructor(e){this.type=e}get renderAsFullPage(){return a[this.type]}get isQuickSearchMode(){return this.isType("commandSearch")}get isMobile(){return s[this.type]}get isWriter(){return l[this.type]}isType(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.includes(this.type)}get shouldShowExpandToFullPageChat(){return d[this.type]}get isValidSurfaceForAttachmentUploads(){return p[this.type]}get shouldShowChatHistory(){return u[this.type]}get canUseCurrentPageContext(){return m[this.type]}get showCloseButton(){return g[this.type]}get surfaceSupportsContextWithSelection(){return f[this.type]}get surfaceSupportsParameterization(){return v[this.type]}get surfaceSupportsTutorialAction(){return h[this.type]}get surfaceSupportsShareAnswerAction(){return _[this.type]}get canShowNewChonkifiedInput(){return b[this.type]}canShowSessionStarterInContext(e){return A[e.from].isWriter===this.isWriter}get canUseUpdatedSkillDisplayFormat(){return k[this.type]}get canUseGetAiConnectorScopeMenuFooter(){return I[this.type]}get canShowNewFullPageWelcomeState(){return S[this.type]}get canShowNewWriterDesign(){return w[this.type]}get canShowNewCornerChatWelcomeState(){return y[this.type]}}n=A,A.fullPage=new n("fullPage"),A.corner=new n("corner"),A.searchPane=new n("searchPane"),A.commandSearch=new n("commandSearch"),A.mobileNative=new n("mobileNative"),A.writer=new n("writer"),A.mobileWeb=new n("mobileWeb"),A.mobileSearch=new n("mobileSearch"),A.mobileWriter=new n("mobileWriter"),A.workflowEditor=new n("workflowEditor"),A.conflictingContentComment=new n("conflictingContentComment");const x=r.createContext(void 0);function C(e){return(0,i.jsx)(x.Provider,{value:e.surface,children:e.children})}function T(){const e=r.useContext(x);return e||A.corner}x.displayName="AssistantSurfaceContext"},632709:(e,t,o)=>{o.d(t,{A:()=>i,p:()=>n});let n=function(e){return e[e.General=0]="General",e[e.Members=1]="Members",e[e.Security=2]="Security",e}({});class r extends(()=>o(757695))().default{getInitialState(){return{open:!1,limitMembers:!0,memberFilterQuery:"",tab:void 0}}getTeamStore(){return this.state.open?this.state.viewingUnjoinedPrivateTeamAsEnterpriseAdmin?this.state.unjoinedPrivateTeamStore:this.state.teamStore:void 0}}const i=new r},633457:(e,t,o)=>{o.d(t,{p6:()=>Oe,A1:()=>ze,VN:()=>Ve,Nl:()=>$e,bG:()=>Ne,pk:()=>Je,lK:()=>Ge,oX:()=>Ue,Oi:()=>je,z1:()=>it,jW:()=>We,pP:()=>He,PO:()=>ot,FQ:()=>nt,lf:()=>rt});o(16280),o(944114),o(898992),o(354520),o(672577),o(430670),o(803949),o(581454);var n=()=>o(221844),r=()=>o(908006),i=()=>o(700500),a=()=>o(443239),s=()=>o(970013),l=()=>o(304740),c=()=>o(617871),d=()=>o(19916),u=()=>o(857639),p=()=>o(513416),m=()=>o(792071),g=()=>o(386164),f=()=>o(388821),v=()=>o(179034),h=()=>o(824862),_=()=>o(519831),b=()=>o(869558),y=()=>o(402904),S=()=>o(329251),w=()=>o(332393),k=()=>o(161479),I=()=>o(322769),A=()=>o(919709),x=()=>o(506391),C=()=>o(220719),T=()=>o(496603),M=()=>o(763824),P=()=>o(534177),B=()=>o(939768),R=()=>o(720665),E=()=>o(675074),D=()=>o(722101),N=()=>o(246826),L=()=>o(778417),F=()=>o(606952),U=()=>o(725614),O=()=>o(317909),V=()=>o(97270),j=()=>o(989423),z=()=>o(186445),q=()=>o(299917);var H=()=>o(47373),W=()=>o(572088),K=()=>o(493208),G=()=>o(619400),$=()=>o(594794),Y=()=>o(972435),Q=()=>o(108944),Z=()=>o(299545),X=()=>o(969197),J=()=>o(906537),ee=()=>o(646736),te=()=>o(508496);var oe=()=>o(406792),ne=()=>o(129522),re=()=>o(351360),ie=()=>o(53137),ae=()=>o(83573),se=()=>o(397740),le=()=>o(666803),ce=()=>o(375447),de=()=>o(630116),ue=()=>o(404141),pe=()=>o(444768),me=()=>o(398209),ge=()=>o(276282),fe=()=>o(611371),ve=()=>o(559926),he=()=>o(449506),_e=()=>o(541258),be=()=>o(884107),ye=()=>o(686526),Se=()=>o(901389),we=()=>o(510683),ke=()=>o(664133),Ie=()=>o(383594),Ae=()=>o(44729),xe=()=>o(666144),Ce=()=>o(977239),Te=()=>o(436572);const Me=!1;const Pe=[c().MN];function Be(e,t){var o;const n=Boolean(e&&Pe.includes(e.id));return{hasServerDeterminedOptionTypes:n,canUnfurlAsCollection:Boolean(!n&&(null==t||null===(o=t.additional_types)||void 0===o?void 0:o.collection)),canUnfurlAsImport:Boolean(e&&Re(e,t))}}function Re(e,t){switch(e.id){case c().MN:return!0;case c().Hd:return t&&"google_docs"===t.name;case c().mn:return t&&"Report"===t.name;default:return!1}}const Ee=(0,o(959013).YK)({browse:{id:"externalBlock.mediaPicker.browseTab.title",defaultMessage:"Browse {appName}"},somethingWentWrong:{defaultMessage:"Something went wrong.",id:"externalActions.dialogError.openFilePicker.errorMessage"},copyDebuggingInformation:{id:"externalActions.dialogItem.openFilePicker.copyDebugData",defaultMessage:"Copy debugging information"},copiedDebuggingInfo:{id:"externalActions.dialogError.copiedDebuggingInfo",defaultMessage:"Copied to clipboard."},userReAuth:{id:"externalActions.dialogError.userReAuth",defaultMessage:"Authentication Expired. Please Re-Authenticate to continue."}});let De=!1;async function Ne(e){const{environment:t,spaceId:o,force:n}=e;await re().default.waitUntilRendered();const r=ie().A.state,i=t.currentUser.id;if(!r.loaded&&!r.loading||r.loaded&&o!==r.spaceId||r.loaded&&i!==r.userId||n){const e=!De;e&&(De=!0,oe().default.DO_NOT_USE_measureFromPageOriginLegacy("external_integration_store.page_origin_to_loading",{environment:t})),ie().A.setState({...ie().A.state,loading:!0});const[n,r]=await Promise.all([Le({environment:t,spaceId:o}),Fe({environment:t,spaceId:o})]);if("success"!==n.type||"success"!==r.type)throw new Error("Request failed.");const i=f().RecordMapWithRole.create(n.data.recordMap),a=f().RecordMapWithRole.create(r.data.recordMap);ie().A.setState({loaded:!0,loading:!1,spaceId:o,userId:t.currentUser.id,integrations:T().Ul(T().oE(n.data.integrationIds.map((e=>i.getValue({table:w().Li,id:e})))),(e=>{let{created_at:t}=e;return t})),externalAuthentications:T().Ul(T().oE(r.data.externalAuthenticationIds.map((e=>a.getValue({table:y().As,id:e})))),(e=>{let{created_at:t}=e;return t})),bots:T().My(T().oE(r.data.botIds.map((e=>a.getValue({table:h().GP,id:e})))),(e=>{let{last_edited_at:t,created_at:o}=e;return t||o}),"desc"),completeSlackAuthentications:T().Ul(T().oE(r.data.completeSlackAuthenticationIds.map((e=>a.getValue({table:y().As,id:e})))),(e=>{let{created_at:t}=e;return t})),twoWaySyncExternalEntities:T().Ul(T().oE(r.data.externalEntityIds.map((e=>a.getModel({table:S().$,id:e})))),(e=>{let{created_at:t}=e;return t}))}),e&&(De=!0,oe().default.DO_NOT_USE_measureFromPageOriginLegacy("external_integration_store.page_origin_to_ready",{environment:t}))}}async function Le(e){const{environment:t,spaceId:o}=e,n=oe().default.DO_NOT_USE_markLegacy("external_integration_store.get_external_integrations"),r=await he().callApi({eventName:"getExternalIntegrations",environment:t,data:{spaceId:o},headers:(0,g().WS)({spaceId:o})});return"success"===r.type&&oe().default.DO_NOT_USE_measureLegacy(n,{environment:t}),r}async function Fe(e){const{environment:t,spaceId:o}=e;if(!t.currentUser.isLoggedIn())return{type:"success",status:200,headers:{},data:{botIds:[],externalAuthenticationIds:[],recordMap:{},completeSlackAuthenticationIds:[],externalEntityIds:[]}};const n=oe().default.DO_NOT_USE_markLegacy("external_integration_store.get_user_space_external_bots"),r=await he().callApi({eventName:"getUserSpaceExternalBots",environment:t,data:{spaceId:o},headers:(0,g().WS)({spaceId:o})});return"success"===r.type&&oe().default.DO_NOT_USE_measureLegacy(n,{environment:t}),r}async function Ue(e){const{environment:t}=e,{currentSpaceStore:o}=re().default.state;o&&await Ne({environment:t,spaceId:o.id,force:!0})}function Oe(e){var t;const{environment:o,blockStore:a,textStore:s,url:d,textValueBeforePaste:p,urlSelection:m}=e,g=J().get();if(!a||V().A.state.open||ce().A.state.open||me().A.state.open||!g)return!1;const{currentSpaceStore:f}=re().default.state,h=(0,l().US)(d),y=(0,B().qg)(h);if(!y.host)return!1;const S=o.currentUser.id;if(null==f||!f.isDefined()||!S)return!1;const w=ie().A.integrations.state.filter((e=>e.id!==c().ob)),C=(0,x().$B)({url:h,integrations:w,currentSpaceId:f.id});if("partial"===C.type)return function(e){const{environment:t,parsedUrl:o,urlDomain:n,integrationId:r}=e;ve().FO(t,{integrationId:r,urlDomain:n}),u().log({level:"debug",from:"activateFromLinkCreation",type:"linkPreviewUrlMiss",data:{miscDataToConvertToString:{integrationId:r,urlDomain:n,path:o.path}}})}({...C,integrationId:C.integration.id,environment:o}),!1;if("failure"===C.type)return!1;const{integration:M,pattern:P}=C;if(!(0,ee().dp)(f,S).isWorkspaceOwner()&&!(0,I().nH)({spaceBotSettings:f.getBotSettingsStore().getValue(),integrationId:M.id,env:"production"}))return!1;const R=(0,W().jw)(M.id),E=function(e){const{integration:t,pattern:o,blockStore:n,textValueBeforePaste:r}=e,a=n&&n.getType()===i().xd.text&&0===(0,A().q4_)(r).trim().length,{hasServerDeterminedOptionTypes:s,canUnfurlAsCollection:l,canUnfurlAsImport:c}=Be(t,o);if(t){if(a){const e=te().default.getConfigKey("link_paste_order",(null==t?void 0:t.id)||"defaultOrder");return e?(l&&(e.order.includes("collection")||e.order.splice(e.order.length-1,0,"collection")),c&&(e.order.includes("import")||e.order.push("import")),T().oE(e.order)):T().oE(["preview","mention","link",(s||l)&&"collection",c&&"import"])}return T().oE(["mention","preview","link",(s||l)&&"collection",c&&"import"])}return a?T().oE(["preview","mention","link",(s||l)&&"collection",c&&"import"]):T().oE(["mention","preview","link",(s||l)&&"collection",c&&"import"])}({blockStore:a,integration:M,pattern:P,textValueBeforePaste:p}),D=J().getRect(g);if(!D)return!1;const N=a.getRecordStoreUIParent();if(!N||!(0,Z().iU)(N))return!1;const L=new(n().A)({name:"unfurlingActions.activateFromLinkCreation",isTemporaryData:!0});o.defaultRecordCache.inMemoryRecordCache.addCacheOverride(L);const F=N.clone(L),U=a.clone(L),j=s.table===v().ev&&s===(null===(t=(0,X().T)(s))||void 0===t?void 0:t.getBlockTitleStore())?U.getBlockTitleStore():s.clone(L),z=(0,k().e)(a.pointer.spaceId),q=(0,$().JH)({environment:o,table:v().ev,spaceId:z}),H=new(de().Bv)(o,q),K=H.clone(L),G=T().y1(x().MV).map((()=>new(de().Bv)(o,{table:v().ev,id:(0,$().Z1)({environment:o,table:v().ev,spaceId:z}),spaceId:z}))),Q=G.map((e=>e.clone(L))),oe=new(de().md)(o,(0,$().JH)({environment:o,table:_().Vl,spaceId:z})),ne=oe.clone(L);let ae;ae=P.defaultViews?P.defaultViews.map((e=>new(de().pS)(o,(0,$().JH)({environment:o,table:b().Gy,spaceId:z})))):[new(de().pS)(o,(0,$().JH)({environment:o,table:b().Gy,spaceId:z}))];const se=ae.map((e=>e.clone(L))),le=T().y1(x().MV).map((()=>new(de().md)(o,(0,$().JH)({environment:o,table:_().Vl,spaceId:z})))),ue=le.map((e=>e.clone(L))),pe=T().y1(x().MV).map((()=>new(de().pS)(o,(0,$().JH)({environment:o,table:b().Gy,spaceId:z})))),ge=pe.map((e=>e.clone(L)));let fe;return me().A.setState({open:!0,url:h,textValueBeforePaste:p,textValueAfterPaste:s.getValue(),urlSelection:m,renderRect:D,integration:M,pattern:P,currentOption:{type:"link"},allOptionTypes:E,temporaryRecordCache:L,stores:{blockStore:a,blockParentStore:N,textStore:s,externalObjectInstanceBlockStore:H,subExternalObjectInstanceBlockStores:G,externalCollectionStore:oe,externalCollectionViewStores:ae,subExternalCollectionStores:le,subExternalCollectionViewStores:pe},temporaryStores:{blockParentStore:F,blockStore:U,textStore:j,externalObjectInstanceBlockStore:K,subExternalObjectInstanceBlockStores:Q,externalCollectionStore:ne,externalCollectionViewStores:se,subExternalCollectionStores:ue,subExternalCollectionViewStores:ge},unfurlResponse:void 0}),R.length>0&&qe({environment:o,url:d,botIds:R.map((e=>{let{id:t}=e;return t})),integrationId:M.id,externalObjectInstanceBlockStore:H}),ve().Ki(o,{integrationId:M.id,entity:P.name,domain:y.host,from:"link_paste"}),fe="import"===E[0]?"link":E[0],r().default.afterNextFlush((()=>{const e="drive"!==fe;O().createAndCommit({userAction:"unfurlingActions.activateFromLinkCreation",environment:o,canUndo:!e,perform:t=>{je({environment:o,type:fe,useTemporaryRecordCache:e,transaction:t,intl:Y().A.getIntl()})}})})),!0}function Ve(e){const{environment:t,setType:o,transaction:n}=e,{currentUserSettingsStore:r}=re().default.state,i=z().y0(t),a=me().A.state;if(!a.open)return;t.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(a.temporaryRecordCache);const s=(0,W().jw)(a.integration.id).length>0;if(je({environment:t,type:o||a.currentOption.type,useTemporaryRecordCache:!1,transaction:n,intl:Y().A.getIntl()}),"preview"===a.currentOption.type)L().td({environment:t,stores:[a.currentOption.externalObjectInstanceBlockStore]});else if("drive"===a.currentOption.type){var c,d,u,p,m;const e=B().qg(a.url,{slashesDenoteHost:!0});let o=e.href;if(null!==(c=e.hostname)&&void 0!==c&&c.includes("docs.google.com")&&(null!==(d=e.pathname)&&void 0!==d&&d.includes("presentation")||null!==(u=e.pathname)&&void 0!==u&&u.includes("document")||null!==(p=e.pathname)&&void 0!==p&&p.includes("spreadsheets"))&&null!==(m=e.pathname)&&void 0!==m&&m.includes("/edit")){const t=e.pathname.replace("/edit","/preview");o=B().Gm({url:`https://${e.hostname}${t}`,query:{...e.query},hash:e.hash||void 0})}else o=(0,l().US)(o);E().Fy(t,{source:o,isDataURL:!1,store:a.stores.blockStore,pageWidth:i,preferredType:"drive"})}if(a.integration&&!s){(null==r?void 0:r.hasDismissedIntegrationPopup({integrationId:a.integration.id}))||pe().A.setState({open:!0,integration:a.integration,externalObjectInstanceBlockId:a.stores.externalObjectInstanceBlockStore.id,unfurlUrl:a.url})}me().A.setState({open:!1})}function je(e){const{environment:t,type:o,transaction:n,useTemporaryRecordCache:a}=e,s=me().A.state;if(!s.open)return;const c=t.currentUser.id;if(!c)return;const u=a?s.temporaryStores:s.stores;if(a){s.temporaryRecordCache.clearCache();for(const e in s.temporaryStores){const o=s.temporaryStores[e],n=Array.isArray(o)?o:[o];for(const e of n){const o={userId:c,pointer:e.pointer},n=t.defaultRecordCache.inMemoryRecordCache.getRecord(o);n?xe().PC({environment:t,inMemoryRecordCache:s.temporaryRecordCache,pointer:e.pointer,model:m().Bj6.fromValue(e.pointer.table,n.value),role:n.role,updatePaths:[[]],userId:c,force:!0,debugSource:"setUnfurlingOptionType"}):xe().oX({environment:t,inMemoryRecordCache:s.temporaryRecordCache,persistedRecordCache:void 0,pointer:e.pointer,userId:c})}}}const p=(0,l().US)(s.url),{host:g}=(0,B().qg)(p);if(g){if("preview"===o||"mention"===o){const e={original_url:p,domain:g};let o;const{unfurlResponse:r}=s;if(r){const a=(0,R().MU)(T().oE(r.relations.map(((e,o)=>{if(e.external_schema)return;const r=u.subExternalObjectInstanceBlockStores[o];return r?((0,C().MX)(!r.isDefined(),"Sub external object instance store should not have a value before creation"),N().Wv({environment:t,id:r.id,type:i().xd.externalObjectInstance,spaceId:(0,k().e)(u.blockStore.pointer.spaceId),format:e,inMemoryRecordCache:r.inMemoryRecordCache,transaction:n}),N().zv({store:r,data:{parent_table:v().ev,parent_id:u.externalObjectInstanceBlockStore.id,alive:!0},transaction:n}),[e.uri,r.id]):void 0})))),{external_object_id:s,uri:l,bot_id:c}=r.root;if(s&&l&&c){let t,n;const i=(0,d().G)(r.root.attributes,(0,K().jj)());i&&(t=i.block_width,n=i.block_height),o={...e,...{...r.root,block_width:t,block_height:n,external_schema:void 0},related_external_object_uris_to_instance_ids:a,external_object_id:s,uri:l,bot_id:c}}else{var f;o={...e,attributes:r.root.attributes,error:r.root.error,auth_refresh_in_progress:439===(null===(f=r.root.error)||void 0===f?void 0:f.status_code)||null}}}else o=e;(0,H()._J)()||(0,C().MX)(!u.externalObjectInstanceBlockStore.isDefined(),"Preview/mention menu external object instance store should not have a value before creation"),N().Wv({environment:t,id:u.externalObjectInstanceBlockStore.id,type:i().xd.externalObjectInstance,format:o,inMemoryRecordCache:u.externalObjectInstanceBlockStore.inMemoryRecordCache,transaction:n})}else if("collection"===o){const{unfurlResponse:e}=s;let o=u.externalCollectionStore.pointer;const a=u.externalCollectionViewStores.map(((e,t)=>{var o,n,r;return{id:e.id,version:0,space_id:(0,k().e)(u.blockStore.pointer.spaceId),type:(null===(o=s.pattern.defaultViews)||void 0===o?void 0:o[t].type)||"table",format:null===(n=s.pattern.defaultViews)||void 0===n?void 0:n[t].format,query2:null===(r=s.pattern.defaultViews)||void 0===r?void 0:r[t].query2,parent_table:v().ev,parent_id:u.externalObjectInstanceBlockStore.id,alive:!0}}));let l;if(e){const{external_object_id:t,uri:r,bot_id:i}=e.root;if(t&&r&&i)if("collectionId"in e&&e.collectionId){l={id:e.collectionId,version:0,space_id:(0,k().e)(u.blockStore.pointer.spaceId),parent_table:v().ev,parent_id:u.externalObjectInstanceBlockStore.id,alive:!0,schema:{}},o={id:e.collectionId,table:_().Vl,spaceId:(0,k().e)(u.blockStore.pointer.spaceId)}}else{const t={};e.relations.forEach(((e,o)=>{const r=u.subExternalCollectionStores[o],i=e,a={id:r.id,version:0,space_id:(0,k().e)(u.blockStore.pointer.spaceId),parent_table:_().Vl,parent_id:u.externalCollectionStore.id,alive:!0,format:i,schema:{}};t[e.uri]=r.id,N().zv({store:r,data:a,transaction:n})}));l={id:u.externalCollectionStore.id,version:0,space_id:(0,k().e)(u.blockStore.pointer.spaceId),parent_table:v().ev,parent_id:u.externalObjectInstanceBlockStore.id,alive:!0,format:{original_url:p,domain:g,...e.root,related_external_object_uris_to_instance_ids:{...t}},schema:{}}}else{l={id:u.externalCollectionStore.id,version:0,space_id:(0,k().e)(u.blockStore.pointer.spaceId),parent_table:v().ev,parent_id:u.externalObjectInstanceBlockStore.id,alive:!0,format:{original_url:p,domain:g,error:e.root.error},schema:{}}}}else{l={id:u.externalCollectionStore.id,version:0,space_id:(0,k().e)(u.blockStore.pointer.spaceId),parent_table:v().ev,parent_id:u.externalObjectInstanceBlockStore.id,alive:!0,format:{original_url:p,domain:g},schema:{}}}(0,C().MX)(!u.externalObjectInstanceBlockStore.isDefined(),"Collection menu external object instance store should not have a value before creation");const c=N().Wv({environment:t,id:u.externalObjectInstanceBlockStore.id,type:i().xd.collectionView,format:{collection_pointer:o},spaceId:(0,k().e)(u.blockStore.pointer.spaceId),inMemoryRecordCache:u.externalObjectInstanceBlockStore.inMemoryRecordCache,transaction:n});N().zv({store:c,data:{collection_id:o.id,parent_table:v().ev,parent_id:u.blockParentStore.id,alive:!0,view_ids:u.externalCollectionViewStores.map((e=>e.id))},transaction:n});const d=Xe();u.externalCollectionViewStores.forEach(((t,o)=>{e&&"collectionId"in e&&e.collectionId&&a[o].format&&(a[o].format={collection_pointer:{id:e.collectionId,table:_().Vl}}),d&&e&&"table"===a[o].type&&(a[o].format={...a[o].format,table_properties:tt(e.root.external_schema)}),N().zv({store:t,data:a[o],transaction:n})})),N().zv({store:u.externalCollectionStore,data:l,transaction:n});const m=s.integration;r().default.afterNextFlush((()=>{const e=ne().K.findCollectionViewBlockFromId(u.externalObjectInstanceBlockStore.id);if(e&&"collectionContextStore"in e){const t=e.collectionContextStore.settingsStore;ye().R8({collectionSettingsStore:t,item:{type:"shareSyncedView",integrationName:m.name,integrationIcon:m.info.icon}})}}))}if("preview"===o){F().KY({environment:t,store:u.textStore,value:s.textValueBeforePaste,transaction:n});const e=de().Bv.createChildStore(u.blockParentStore,u.externalObjectInstanceBlockStore.pointer);if(D().WH({parentStore:u.blockParentStore,insertStore:e,afterStore:u.blockStore,transaction:n}),0===(0,A().q4_)(s.textValueBeforePaste).trim().length){const e=de().Bv.createChildStore(u.blockParentStore,s.stores.blockStore.pointer);D().TF({parentStore:u.blockParentStore,childToRemoveStore:e,transaction:n})}const r=de().Bv.createChildStore(s.stores.blockParentStore,s.stores.externalObjectInstanceBlockStore.pointer);L().IU({environment:t}),me().A.setState({...s,currentOption:{type:o,externalObjectInstanceBlockStore:r}})}else if("mention"===o){const e=(0,A().bMp)(u.externalObjectInstanceBlockStore.id),o=(0,A().wmz)(e),r=(0,A().xym)(s.textValueBeforePaste,[o],s.urlSelection.startIndex),i={startIndex:s.urlSelection.startIndex+1,endIndex:s.urlSelection.startIndex+1};F().KY({environment:t,store:u.textStore,value:r,transaction:n}),N().zv({store:u.externalObjectInstanceBlockStore,data:{parent_id:u.textStore.id,parent_table:v().ev,alive:!0},transaction:n}),L().hc({environment:t,store:s.stores.blockStore}),U().setSelection({store:s.stores.textStore,selection:i}),me().A.setState({...s,currentOption:{type:"mention",mentionTokenSelection:i}})}else if("link"===o)me().A.setState({...s,currentOption:{type:"link"}}),L().hc({environment:t,store:s.stores.blockStore}),U().setSelection({store:s.stores.textStore,selection:{startIndex:s.urlSelection.endIndex,endIndex:s.urlSelection.endIndex}});else if("drive"===o)me().A.setState({...s,currentOption:{type:"drive"}}),L().hc({environment:t,store:s.stores.blockStore}),U().setSelection({store:s.stores.textStore,selection:{startIndex:s.urlSelection.endIndex,endIndex:s.urlSelection.endIndex}});else if("collection"===o){F().KY({environment:t,store:u.textStore,value:s.textValueBeforePaste,transaction:n});const e=de().Bv.createChildStore(u.blockParentStore,u.externalObjectInstanceBlockStore.pointer);if(D().WH({parentStore:u.blockParentStore,insertStore:e,afterStore:u.blockStore,transaction:n}),0===(0,A().q4_)(s.textValueBeforePaste).trim().length){const e=de().Bv.createChildStore(u.blockParentStore,s.stores.blockStore.pointer);D().TF({parentStore:u.blockParentStore,childToRemoveStore:e,transaction:n})}L().IU({environment:t}),me().A.setState({...s,currentOption:{type:o}})}else(0,P().HB)(o);if(!a){const{unfurlResponse:e}=s;ve().lR(t,{integrationId:s.integration.id,type:o,entity:s.pattern.name,domain:g,from:"unfurl_menu",...e&&{status:null!=e&&e.root.error?"failure":"success"},collection_id:"collection"===o?u.externalCollectionStore.pointer.id:void 0,collection_view_block_id:"collection"===o&&u.blockStore.isCollectionView()?u.blockStore.id:void 0})}}}async function ze(e){const{environment:t,notionState:o}=e,{externalObjectInstanceBlockId:n,spaceId:r}=o;if(n){const e=new(de().Bv)(t,{table:v().ev,id:n,spaceId:r});let o;if(await Promise.all([e.load(),ie().A.waitUntil((()=>ie().A.state.loaded))]),e.isExternalObjectInstanceBlockStore()||e.isExternalObjectInstancePageBlockStore())o=e.getFormat();else if(e.isCollectionView()){var i;o=null===(i=e.getCollectionViewSourceCollectionStore())||void 0===i?void 0:i.getFormat()}if(!o)throw new Error("External object instance has no value.");const a=o.original_url||o.uri;if(!a)throw new Error("External object instance has no original_url.");const s=(0,x().$B)({url:a,integrations:ie().A.integrations.state,currentSpaceId:r});if("success"!==s.type)throw new Error("Could not find integration.");const{integration:l}=s,c=(0,W().jw)(l.id);if(0===c.length)throw new Error("Could not find bot.");if(e.isExternalObjectInstanceBlockStore()||e.isExternalObjectInstancePageBlockStore())await qe({environment:t,url:a,botIds:c.map((e=>{let{id:t}=e;return t})),integrationId:l.id,externalObjectInstanceBlockStore:e});else{if(!e.isCollectionView())throw new Error(`BlockStore is neither an ExternalObject nor a ExternalCollection. It has type: ${e.getType()}`);{const o=e.getCollectionViewSourceCollectionStore();if(!o)throw new Error("Could not find collection store.");await We({environment:t,url:a,botIds:c.map((e=>{let{id:t}=e;return t})),externalCollectionViewBlockStore:e,externalCollectionStore:o})}}}}async function qe(e){const{environment:t,url:o,botIds:n,integrationId:r,externalObjectInstanceBlockStore:a}=e;ge().A.add(o);const s=await he().callApi({eventName:"unfurlUrl",environment:t,data:{url:o,botIds:n,integrationId:r,spaceId:_e().LU()}});ge().A.delete(o);const c=me().A.state,u="success"===s.type?s.data:{root:{error:{status_code:s.status}},relations:[]};if(c.open&&c.stores.externalObjectInstanceBlockStore===a){me().A.setState({...c,unfurlResponse:u});const e=function(e,t,o){if(Pe.includes(e)&&"collection"===o)return t.root.hasOwnProperty("external_schema")?"collection":"preview";if("import"===o)return"link";return o}(r,u,c.currentOption.type);O().createAndCommit({userAction:"unfurlingActions.startUnfurlRequest",environment:t,canUndo:!1,perform:o=>{je({environment:t,type:e,useTemporaryRecordCache:!0,transaction:o,intl:Y().A.getIntl()})}})}else if(a.isExternalObjectInstanceBlockStore())!function(e){const{environment:t,unfurlResponse:o,url:n,externalObjectInstanceBlockStore:r}=e,a=r.pointer.spaceId,s=t.currentUser.id;if(!s)return;const c=(0,l().US)(n),{host:u}=(0,B().qg)(c);if(!u)return;if("collectionId"in o)return;const p=r.getFormat().related_external_object_uris_to_instance_ids,m=(0,R().MU)(Object.entries(p||{}).map((e=>{let[t,o]=e;return[t,de().Bv.createChildStore(r,{id:o,table:v().ev,spaceId:r.getSpaceId()})]})));O().createAndCommit({userAction:"unfurlingActions.createExternalObjectInstanceFromInitialUnfurl",environment:t,canUndo:!0,perform:e=>{const s=(0,R().MU)(T().oE(o.relations.map((o=>{if(o.external_schema)return;let n=m[o.uri];return n?(N().zv({store:n,data:{type:i().xd.externalObjectInstance,parent_table:v().ev,parent_id:r.id,alive:!0},transaction:e}),N().zv({store:n.getFormatStore(),data:o,transaction:e})):(n=N().Wv({environment:t,type:i().xd.externalObjectInstance,spaceId:a,format:o,inMemoryRecordCache:r.inMemoryRecordCache,transaction:e}),N().zv({store:n,data:{parent_table:v().ev,parent_id:r.id,alive:!0},transaction:e})),[o.uri,n.id]})))),l=r.getFormatStore().getValue();let c,u;if(l&&(c=l.block_width,u=l.block_height),!c&&!u){const e=(0,d().G)(o.root.attributes,(0,K().jj)());e&&(c=e.block_width,u=e.block_height)}N().zv({store:r.getFormatStore(),data:{...{...o.root,block_width:c,block_height:u,external_schema:void 0,integration_id:null,original_url:n,is_placeholder:null,error:o.root.error??null},related_external_object_uris_to_instance_ids:s},transaction:e})}})}({environment:t,unfurlResponse:u,url:o,externalObjectInstanceBlockStore:a}),function(e){const{environment:t,url:o,spaceId:n,status:r}=e,i=(0,K().g8)(o,n),a=(0,l().US)(o),s=(0,B().qg)(a);i&&s.host&&ve().lR(t,{integrationId:i.integration.id,type:"preview",entity:i.pattern.name,domain:s.host,from:"link_preview_placeholder",...r&&{status:r}})}({environment:t,url:o,spaceId:a.getSpaceId(),...u&&{status:u.root.error?"failure":"success"}});else{if(!a.isCollectionView()){if(a.isExternalObjectInstancePageBlockStore())return;throw new Error(`BlockStore is neither an ExternalObject nor a ExternalCollection. It has type: ${a.getType()}`)}{const e=a.getCollectionViewSourceCollectionStore();if(!e)throw new Error("Could not find collection store.");O().createAndCommit({userAction:"unfurlingActions.startUnfurlRequest",environment:t,canUndo:!0,perform:n=>{Ke({environment:t,unfurlResponse:u,url:o,externalCollectionStore:e,externalCollectionViewBlockStore:a,transaction:n})}})}}}async function He(e){const{environment:t,url:o,botIds:n,userDefinedExternalCollectionStore:r,relatedPageId:a}=e,s=r.getFormat();if(!s.uri||void 0!==s.external_object_id)return;ge().A.add(o);const c=await he().callApi({eventName:"unfurlUrl",environment:t,data:{url:o,botIds:n,spaceId:r.getSpaceId(),targetCollectionId:r.id,relatedPageId:a}});if("failed"===c.type)return void Se().Qg(c);ge().A.delete(o);const d=c.data;return"pageId"in d&&d.pageId?new(de().Bv)(t,{table:v().ev,id:d.pageId,spaceId:r.getSpaceId()}):function(e){const{environment:t,unfurlResponse:o,url:n,rootUserDefinedExternalCollectionStore:r}=e,a=r.pointer.spaceId,s=t.currentUser.id;if(!s)return;const c=(0,l().US)(n),{host:d}=(0,B().qg)(c);if(!d)return;if(!o.root.external_object_id)return;const u=o.root;return O().createAndCommit({userAction:"unfurlingActions.createExternalObjectInstancePageFromInitialUnfurl",environment:t,canUndo:!0,perform:e=>{const o=N().Wv({environment:t,type:i().xd.externalObjectInstancePage,spaceId:a,format:u,inMemoryRecordCache:r.inMemoryRecordCache,transaction:e});return Ae().X$({parentStore:r,childStore:o,transaction:e}),new(de().Bv)(t,o.pointer)}}).performResult}({environment:t,unfurlResponse:d,url:o,rootUserDefinedExternalCollectionStore:r})}async function We(e){const{environment:t,url:o,botIds:n,externalCollectionStore:r,externalCollectionViewBlockStore:i}=e;ge().A.add(o);const a=await he().callApi({eventName:"unfurlUrl",environment:t,data:{url:o,botIds:n,spaceId:_e().LU()}});ge().A.delete(o);const s="success"===a.type?a.data:{root:{error:{status_code:a.status}},relations:[]};O().createAndCommit({userAction:"unfurlingActions.startUnfurlRequestForCollection",environment:t,canUndo:!0,perform:e=>{Ke({environment:t,unfurlResponse:s,url:o,externalCollectionStore:r,externalCollectionViewBlockStore:i,transaction:e})}})}function Ke(e){const{environment:t,unfurlResponse:o,url:n,externalCollectionStore:r,externalCollectionViewBlockStore:i,transaction:c}=e,d=(0,l().US)(n),{host:u}=(0,B().qg)(d);if(!u)return;const{external_object_id:p,uri:m,bot_id:g}=o.root;if(!p||!m||!g)return;const f=T().y1(x().MV).map((()=>new(de().md)(t,(0,$().JH)({environment:t,table:_().Vl,spaceId:(0,k().e)(i.pointer.spaceId)})))),h={};o.relations.forEach(((e,t)=>{const o=f[t],n=e,a={id:o.id,version:0,space_id:(0,k().e)(i.pointer.spaceId),parent_table:_().Vl,parent_id:r.id,alive:!0,format:n,schema:{}};h[e.uri]=o.id,N().zv({store:o,data:a,transaction:c})}));const y={id:r.id,version:0,space_id:(0,k().e)(i.pointer.spaceId),parent_table:v().ev,parent_id:i.id,alive:!0,format:{original_url:d,domain:u,...o.root,property_visibility:(S=o.root.external_schema,S&&Object.keys(S).flatMap((e=>(0,s().cC)(e)?[]:{property:`${a().U}${e}`,visibility:"hide_if_empty"}))),related_external_object_uris_to_instance_ids:{...h},is_placeholder:void 0,integration_id:void 0},schema:{}};var S;N().zv({store:r,data:y,transaction:c});if(Xe()&&o){const e=i.getCollectionViewIds();null==e||e.forEach((e=>{const t=de().pS.createChildStore(i,{table:b().Gy,id:e,spaceId:i.getSpaceId()});if("table"===t.getType()){const e={...t.getFormat(),table_properties:tt(o.root.external_schema)};N().zv({store:t,data:{format:e},transaction:c})}}))}}async function Ge(e){const{environment:t}=e,{externalObjectInstanceBlockPointersMap:o,externalCollectionInstancePointersMap:n,externalSyncInstancePointersMap:r}=ae().A.state,i=[...Object.values(o),...Object.values(n)],a=T().$z(i,(e=>e.spaceId));await(0,M().lX)(Object.entries(a),5,(e=>{let[o,n]=e;return he().callApi({eventName:"refetchExternalObjectInstanceBlocks",environment:t,data:{recordPointers:n},headers:void 0!==o?(0,g().WS)({spaceId:o}):void 0})}));const s=Object.values(r);s.length>0&&te().default.checkGate({gateName:"salesforce_page_view_resync"})&&await he().callApi({eventName:"resyncExternalSyncedCollection",environment:t,data:{recordPointers:s}}),ae().A.reset()}async function $e(e){const{environment:t,externalAuthenticationValue:o}=e;let n=await he().callApi({eventName:"getExternalIntegrationAccessToken",environment:t,data:{botId:o.id,integrationId:o.integration_id,spaceId:o.space_id}});if("failed"===n.type){const e=ie().A.integrations.state.find((e=>e.id===o.integration_id));if(!e)return;Te().D6({label:Y().A.formatMessage(Ee.userReAuth)}),await we().Jq({environment:t,integration:e,spaceId:o.space_id,from:"integration_file_picker"});const r=ie().A.bots.state.filter((e=>e.integration_id===o.integration_id))[0];if(!r)return;n=await he().callApi({eventName:"getExternalIntegrationAccessToken",environment:t,data:{botId:r.id,integrationId:r.integration_id,spaceId:r.space_id}})}return n}function Ye(e){const{integrationType:t,integration:o}=e;return"box"===t?{type:t,title:Y().A.formatMessage(Ee.browse,{appName:o.name}),accounts:ie().A.externalAuthentications.state.filter((e=>{let{integration_id:t}=e;return t===o.id})),onSelect:Qe(e)}:"drive"===t?{type:t,title:Y().A.formatMessage(Ee.browse,{appName:o.name}),accounts:ie().A.externalAuthentications.state.filter((e=>{let{integration_id:t}=e;return t===o.id})),onSelect:Qe(e)}:void 0}function Qe(e){const{integration:t,environment:o,externalObjectTokenStore:n,externalObjectInstanceBlockStore:r}=e;return async e=>{let i=e?e.id:void 0;if(!e){const{currentSpaceStore:e}=re().default.state,n=ie().A.integrations.state.find((e=>{let{id:o}=e;return o===t.id}));if(n&&e){const r=ie().A.bots.state;await we().Jq({environment:o,integration:n,spaceId:e.id,from:"integration_file_picker"});const a=function(e,t){const o=ie().A.bots.state;var n;if(e.length!==o.length)return null===(n=o.filter((e=>e.integration_id===t))[0])||void 0===n?void 0:n.id}(r,t.id);a&&(i=a)}}const a=ie().A.externalAuthentications.state.find((e=>e.id===i));if(a){const e=await async function(e,t,o,n,r){if(!ie().A.state.loaded)return;r.setState({error:!1,loading:!0});const i=await $e({environment:e,externalAuthenticationValue:n});if(r.setState({error:!i||"success"!==i.type,loading:!1}),i&&"failed"!==i.type)return i.data;Se().ui({message:Y().A.formatMessage(Ee.somethingWentWrong),showCancel:!0,keepFocus:!0,items:[{label:Y().A.formatMessage(Ee.copyDebuggingInformation),color:void 0,onAccept:async()=>{const t={statusCode:null==i?void 0:i.status,integrationId:o.id,botId:n.id};(await be().R.clipboardActions.load()).copyString({environment:e,stringValue:JSON.stringify(t,null,2),copiedMessage:Ee.copiedDebuggingInfo})}}]})}(o,0,t,a,n);e&&(Ie().I(),await function(e){const{integration:t,tokenDetails:o,environment:n,externalObjectInstanceBlockStore:r,botId:i}=e;if(t.id===c().d0)return async function(e,t){const{access_token:o}=e;try{await(0,q().Ay)("https://cdn01.boxcdn.net/polyfills/core-js/2.5.3/core.min.js",{resourceType:q().vt.Javascript});const e=[{url:"https://cdn01.boxcdn.net/platform/elements/15.0.0/en-US/picker.js",resourcetype:q().vt.Javascript},{url:"https://cdn01.boxcdn.net/platform/elements/15.0.0/en-US/picker.css",resourcetype:q().vt.Stylesheet}];await Promise.all(e.map((e=>{let{url:t,resourcetype:o}=e;return(0,q().Ay)(t,{resourceType:o})})))}catch(a){return void t(!0,"")}const n=document.createElement("div");n.setAttribute("id","box-app-container"),document.body.appendChild(n);const r=new Box.FilePicker;r.show("0",o,{size:"small",container:"#box-app-container",maxSelectable:1,logoUrl:"box"});const i=()=>{r.hide(),n.remove()};r.addListener("choose",(function(e){var o;const n=null==e||null===(o=e[0])||void 0===o?void 0:o.id;n&&t(!1,`https://app.box.com/file/${n}`),i()})),r.addListener("cancel",i)}(o,Ze({environment:n,externalObjectInstanceBlockStore:r,botId:i}));if(t.id===c().Hd)return(0,G().openGoogleDriveFilePicker)({environment:n,accessToken:o.access_token,callback:Ze({environment:n,externalObjectInstanceBlockStore:r,botId:i}),integration:t,from:"link_preview_placeholder"});return void function(){if(Me){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.warn("multiTextSelectionHelpers:",...t)}}(`no matching integration found for external file picker with integration ID ${t.id}}`)}({integration:t,environment:o,externalObjectInstanceBlockStore:r,externalObjectTokenStore:n,botId:a.id,tokenDetails:e}))}}}function Ze(e){const{environment:t,externalObjectInstanceBlockStore:o,botId:n}=e;return(e,r)=>{if(e)return Se().ui({message:Y().A.formatMessage(Ee.somethingWentWrong),showCancel:!0,keepFocus:!0,items:[{label:Y().A.formatMessage(Ee.copyDebuggingInformation),color:void 0,onAccept:async()=>{const o={err:e,botId:n};(await be().R.clipboardActions.load()).copyString({environment:t,stringValue:JSON.stringify(o,null,2),copiedMessage:Ee.copiedDebuggingInfo})}}]});et({environment:t,externalObjectInstanceBlockStore:o,url:r,botId:n})}}function Xe(){return te().default.checkGate({gateName:"is_visibility_enabled_for_db_sync"})}function Je(e){const{environment:t,originRect:o,externalObjectInstanceBlockStore:n,integration:r}=e,i=[{type:"embed",onChange:o=>{et({environment:t,url:o,externalObjectInstanceBlockStore:n,placeholderIntegrationId:e.placeholderIntegrationId}),Ie().I()}}];if(te().default.checkGate({gateName:"ai_source_picker"})&&((null==r?void 0:r.id)===c().bh||(null==r?void 0:r.id)===c().me)){const o=(null==r?void 0:r.id)===c().bh?"/images/external_integrations/github-icon.png":"/images/external_integrations/jira-icon.png";i.push({type:"aiSourcePicker",integration:null==r?void 0:r.id,defaultAvatar:o,onChange:o=>{et({environment:t,url:o,externalObjectInstanceBlockStore:n,placeholderIntegrationId:e.placeholderIntegrationId}),Ie().I()},getResults:async(e,o)=>await async function(e){const{environment:t,query:o,integrationId:n,botId:r}=e,i=r?[r]:ie().A.bots.state.filter((e=>e.integration_id===n)).map((e=>{let{id:t}=e;return t}));if(0===i.length)return{root:{error:{status_code:500,messages:["No bot found for this integration"]}},relations:[]};return await async function(e){const{environment:t,query:o,botIds:n}=e,r=await he().callApi({eventName:"aiSourcePicker",environment:t,data:{query:o,botIds:n,spaceId:_e().LU()}}),i="success"===r.type?r.data:{root:{error:{status_code:r.status}},relations:[]};return"failed"===r.type&&Se().Qg(r),i}({environment:t,query:o,botIds:i})}({environment:t,query:e,integrationId:o})})}if(r&&!t.device.isMobile){const o=function(e){const{integration:t}=e;return t.id===c().d0?Ye({integrationType:"box",...e}):t.id===c().Hd?Ye({integrationType:"drive",...e}):void 0}({integration:r,environment:t,externalObjectInstanceBlockStore:n,externalObjectTokenStore:e.externalObjectTokenStore});o&&i.push(o)}Ie().W(t,{originGap:0,originRect:o,title:"Embed Link Preview",currentTab:"embed",tabs:i})}function et(e){const{environment:t,url:o,externalObjectInstanceBlockStore:n,placeholderIntegrationId:r,botId:a}=e,s=(0,x().$B)({url:o,integrations:ie().A.integrations.state,currentSpaceId:n.getSpaceId()});if("success"===s.type){const{integration:e,pattern:r}=s,c=a?[a]:ie().A.bots.state.filter((t=>t.integration_id===e.id)).map((e=>{let{id:t}=e;return t}));if(c.length>0){const a=n.getParentId(),s=(0,l().US)(o),{host:d}=(0,B().qg)(s);d&&a&&(O().createAndCommit({userAction:"unfurlingActions.startUnfurlFromPlaceholder",environment:t,canUndo:!0,perform:e=>{N().zv({store:n,data:{type:i().xd.externalObjectInstance},transaction:e}),N().zv({store:n.getFormatStore(),data:{original_url:o,domain:d},transaction:e})}}),ve().Ki(t,{integrationId:e.id,entity:r.name,domain:d,from:"placeholder"})),qe({environment:t,url:o,botIds:c,integrationId:e.id,externalObjectInstanceBlockStore:n})}else O().createAndCommit({userAction:"unfurlingActions.startUnfurlFromPlaceholder",environment:t,canUndo:!0,perform:e=>{N().zv({store:n.getFormatStore(),data:{integration_id:null,original_url:o,is_placeholder:null},transaction:e})}})}else if("partial"===s.type){const{integration:e}=s;O().createAndCommit({userAction:"unfurlingActions.startUnfurlFromPlaceholder",environment:t,canUndo:!0,perform:t=>{N().zv({store:n.getFormatStore(),data:{is_placeholder:null,integration_id:e.id,original_url:o,error:{status_code:p().xB.UNPROCESSABLE_ENTITY}},transaction:t})}})}else"failure"===s.type?O().createAndCommit({userAction:"unfurlingActions.startUnfurlFromPlaceholder",environment:t,canUndo:!0,perform:e=>{N().zv({store:n.getFormatStore(),data:{is_placeholder:null,original_url:o,integration_id:r,error:{status_code:p().xB.UNPROCESSABLE_ENTITY}},transaction:e})}}):(0,P().HB)(s)}function tt(e){return e&&Object.entries(e).flatMap((e=>{let[t,o]=e;return(0,s().cC)(t)?[]:"hidden"===(null==o?void 0:o.visibility)?{property:`${a().U}${t}`,visible:!1}:{property:`${a().U}${t}`,visible:!0}}))}function ot(e){const{environment:t,block:o,transaction:n}=e;if(!o.isDefined()||!(0,fe().EF)(t)||!o.isType(i().xd.externalObjectInstance))return;const r=(0,$().Z1)({environment:t,table:v().ev,spaceId:o.getSpaceId()}),a=N().Wv({environment:t,id:r,type:i().xd.externalObjectInstance,spaceId:o.getSpaceId(),format:o.getFormat(),inMemoryRecordCache:o.inMemoryRecordCache,transaction:n});N().zv({store:a,data:{parent_id:o.id,parent_table:o.table,alive:!0},transaction:n});const s=o.getFormatStore().getKeyStore("related_external_object_uris_to_instance_ids").getValue();if(s)for(const i of Object.values(s)){const e={table:v().ev,id:i,spaceId:o.getSpaceId()};O().applyOperation({store:(0,de().Oo)(o,e),operation:{pointer:e,path:[],command:"update",args:{parent_table:v().ev,parent_id:r}},transaction:n})}const l=[(0,A().wmz)((0,A().bMp)(r))];N().zv({store:o,data:{type:i().xd.text},transaction:n}),F().KY({environment:t,store:o.getBlockTitleStore(),value:l,transaction:n});const c=o.getFormat();N().zv({store:o.getFormatStore(),data:(0,R().LG)(c,(()=>null)),transaction:n})}function nt(e){var t;const{block:o,transaction:n,token:r,parentStore:i}=e,{tokenIndex:a}=r;if(!o.isDefined())return;const s=null===(t=i.getParentBlockStore())||void 0===t?void 0:t.getContentStore();if(!s)return;F().eF({block:i,editorMode:"default",transaction:n,tokenIndex:a})&&D().WH({parentStore:s,insertStore:o,afterStore:i,transaction:n})}function rt(e){const{environment:t,spaceId:o,from:n,store:r,bypassCache:i}=e;let a=e.botIds;const s=te().default.checkGate({gateName:"gdrive_scope_migration_gate"}),l=(0,K().gV)(r),d=(null==l?void 0:l.original_url)||(null==l?void 0:l.uri);if(!d)return;const u=(0,K().g8)(d,o),p=(0,K().au)(d,o);if(!u||0===p.length)return;const m=r.getCollectionStore(),{integration:f,pattern:v}=u;if(f.id===c().Hd&&s&&!a&&null!=l&&l.bot_id&&(a=[l.bot_id]),r.isCollectionView()&&m)he().callApi({eventName:"refetchExternalObjectInstanceBlocks",environment:t,data:{recordPointers:[{...m.pointer,spaceId:o}],bypassCache:i},headers:(0,g().WS)({spaceId:o})});else if(r.isExternalObjectInstancePageBlockStore()){c().tU.includes(f.id)?qe({environment:t,url:d,botIds:a||p.map((e=>{let{id:t}=e;return t})),integrationId:f.id,externalObjectInstanceBlockStore:r}):he().callApi({eventName:"refetchExternalObjectInstanceBlocks",environment:t,data:{recordPointers:[{...r.pointer,spaceId:o}],bypassCache:i},headers:(0,g().WS)({spaceId:o})})}else r.isExternalObjectInstanceBlockStore()&&qe({environment:t,url:d,botIds:a||p.map((e=>{let{id:t}=e;return t})),integrationId:f.id,externalObjectInstanceBlockStore:r});ve().zu(t,{integrationId:f.id,entity:v.name,from:n})}function it(e){var t,o;let{environment:n,integration:r,url:i,blockStore:a}=e;switch(r.id){case c().MN:ue().A.setState({...ue().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"asana",openedFrom:"link_paste"});break;case c().Hd:const e=(0,x().WS)({url:i,integration:r});if(e){const t=e.find((e=>"title"===e.id)),o=null==t?void 0:t.values[0];se().A.setState({...se().A.state,selectedFileId:o})}ue().A.setState({...ue().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"gdocs",openedFrom:"link_paste"});break;case c().me:const s=a&&(null===(t=(0,Q().Uo)(a))||void 0===t?void 0:t.id),l=/\/projects\/(\w+)\//,d=null===(o=i.match(l))||void 0===o?void 0:o[1];le().Ay.setState({...le().Ay.state,teamSpaceId:s,projectKeys:d?[d]:[]}),ke().jh({environment:n,from:"external_object_instance_block",action:"show_teamspaces"});const u=le().Ay.createNewFlowId();(0,j().u4)({environment:n,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"link_paste_menu",flowId:u}}});break;case c().mn:Ce().M2({url:i,environment:n,from:"external_object_instance_block",integration:r,blockStore:a})}}},633892:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isHidden:!1}}}const r=n},634157:(e,t,o)=>{o.d(t,{A:()=>i});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454);class n extends(()=>o(757695))().default{getInitialState(){return{joinedTeamsStates:{},hasFetched:new Set}}getJoinedTeamStores(e){var t;let{userId:n,spaceStore:r}=e;return((null===(t=this.getUserJoinedTeamsState({userId:n,spaceId:r.id}))||void 0===t?void 0:t.joinedTeamsIds)??[]).map((e=>o(630116).h4.createChildStore(r,{id:e,table:o(854150).yK,spaceId:r.id})))}getUserJoinedTeamsState(e){let{userId:t,spaceId:o}=e;const n=r({userId:t,spaceId:o});return this.state.joinedTeamsStates[n]}setUserJoinedTeamsState(e){let{userId:t,spaceId:o,state:n}=e;const i=r({userId:t,spaceId:o});this.state.joinedTeamsStates[i]=n,this.emit()}getHasFetched(e){let{userId:t,spaceId:o}=e;const n=r({userId:t,spaceId:o});return this.state.hasFetched.has(n)}setHasFetched(e){let{userId:t,spaceId:o}=e;const n=r({userId:t,spaceId:o});this.state.hasFetched.add(n)}}function r(e){let{userId:t,spaceId:o}=e;return`${t}:${o}`}const i=new n},634877:(e,t,o)=>{o.d(t,{Ju:()=>v,NK:()=>b,Rl:()=>_,ts:()=>h});o(898992),o(354520),o(581454),o(737550);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(187174),s=()=>o(959013),l=()=>o(763824),c=()=>o(534177),d=()=>o(436572),u=()=>o(36760),p=()=>o(704152),m=()=>o(351360),g=()=>o(576590),f=o(474848);const v={slack:g().updateSlackQnAConnectionState,google_drive:g().updateGoogleDriveQnAConnectionState,jira:g().getJiraAIConnectionStatusAction,github:g().updateGithubAIConnectorStatus,sharepoint:()=>Promise.resolve()};function h(e){const t=(0,r().v3)(),o=(0,i().K8)((()=>{var e;return null===(e=m().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),s=(0,i().K8)(u().ON,[]),[d,p]=(0,n.useState)(!1),g=(0,i().K8)((()=>s.filter((e=>!(0,u().A7)(e))).filter((t=>!(0,c().O9)(e)||e.includes(t)))),[s,e]);(0,a().Yb)((async()=>{if(!o||d||0===g.length)return;const e=g.map((e=>v[e]));p(!0),await(0,l().lX)(e,10,(e=>e({environment:t,spaceId:o}))),p(!1)}),[t,o,g,d,p]);return{isLoading:(0,i().K8)((()=>g.some((e=>!(0,u().A7)(e)))),[g])}}function _(){d().D6({label:(0,f.jsx)(s().sA,{id:"universalSearch.googleDriveIngestion.googleDriveButton.accessDeniedSnackbar",defaultMessage:"You do not have access to Google Drive Universal QnA."}),position:"bottom",style:{width:"600px",display:"flex",justifyContent:"space-between"},right:(0,f.jsx)(p().A,{onClick:d().N2,children:(0,f.jsx)(s().sA,{id:"universalSearch.googleDriveIngestion.googleDriveButton.closeErrorSnackbar",defaultMessage:"Close"})})})}function b(){d().D6({label:(0,f.jsx)(s().sA,{id:"universalSearch.googleDriveIngestion.googleDriveButton.showTryAgainSnackbar",defaultMessage:"There was problem processing your request. Please try again."}),position:"bottom",style:{width:"600px",display:"flex",justifyContent:"space-between"},right:(0,f.jsx)(p().A,{onClick:d().N2,children:(0,f.jsx)(s().sA,{id:"universalSearch.googleDriveIngestion.googleDriveButton.closeErrorSnackbar",defaultMessage:"Close"})})})}},638146:(e,t,o)=>{o.d(t,{H6:()=>i,Ie:()=>r,cf:()=>a});var n=()=>o(763884);const r="CollectionView:";function i(e){return`${r}${e}`}function a(e){let{userId:t,viewBlockId:o}=e;if(t)return n().A.get({userId:t,key:i(o)})}},638458:(e,t,o)=>{o.d(t,{Q:()=>r});var n=()=>o(281994);function r(e){const{formulasModule:t,formulaValueTypes:o,...r}=e,i=e.automationModel.getSpaceId();return{...r,getFormulaContextValueDependencies:e=>(0,n().ZU)({...e,formulasModule:t,formulaValueTypes:o}),getFormulaContentsDependencies:e=>(0,n().dL)({formulasModule:t,typecheckContextValues:o,permission:{minimumRole:e.minimumRole,value:e.value},spaceId:i})}}},638616:(e,t,o)=>{o.d(t,{W:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M3.375 12A2.625 2.625 0 0 0 6 14.625h1.42a.625.625 0 1 1 0 1.25H6a3.875 3.875 0 0 1 0-7.75h9.741l-3.333-3.333a.625.625 0 0 1 .884-.884l4.4 4.4a.625.625 0 0 1 0 .884l-4.4 4.4a.625.625 0 0 1-.884-.884l3.333-3.333H6A2.625 2.625 0 0 0 3.375 12"})},r=(0,o(340498).wt)("arrowUTurnUpRight",n)},640520:(e,t,o)=>{o.d(t,{h:()=>r});var n=()=>o(292588);const r={table:o(959044)._p,recordColumnTypes:{id:n().A.UUID,version:n().A.Number,last_version:n().A.Number,user_id:n().A.UUID,activity_id:n().A.UUID,received:n().A.Boolean,read:n().A.Boolean,visited:n().A.Boolean,emailed:n().A.Boolean,invalid:n().A.Boolean,space_id:n().A.UUID,navigable_block_id:n().A.UUID,collection_id:n().A.UUID,discussion_id:n().A.UUID,type:n().A.String,end_time:n().A.String,channel:n().A.String,archived_at:n().A.Number},metaColumnTypes:{meta_user_id:n().A.UUID,meta_role:n().A.String}}},640812:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{readyPromise:(0,o(763824).yX)(),localSpaceInaccessiblePages:void 0,remoteSpaceInaccessiblePages:void 0}}getSpaceInaccessiblePages(e,t){const o=this.state;return o.remoteSpaceInaccessiblePages&&o.remoteSpaceInaccessiblePages[t]?o.remoteSpaceInaccessiblePages[t][e]:o.localSpaceInaccessiblePages&&o.localSpaceInaccessiblePages[t]?o.localSpaceInaccessiblePages[t][e]:void 0}}const r=new n},640867:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{isOpen:!1,fullscreenNodeAnimationComplete:!0,startScrollTop:0,skipAnimations:!1,isSaving:!1,zoomScale:1,panStartPosition:{x:0,y:0},panOffset:{x:0,y:0}}}}const r=new n;(0,o(604341).exposeDebugValue)("GlobalFullScreenStore",r);const i=r},641007:(e,t,o)=>{o.d(t,{TI:()=>l,px:()=>a,rb:()=>i,xY:()=>s});var n=()=>o(764880),r=()=>o(798880);const i=(0,n().A7)(r().BF),a=((0,n().A7)(r().mc),(0,n().A7)(r().zz)),s=((0,n().A7)(r().ai),(0,n().A7)(r().hR)),l=(0,n().qt)(o(824862).eR)},643534:(e,t,o)=>{o.d(t,{A:()=>r});o(16280),o(944114);var n=()=>o(319625);const r=class{constructor(e){let{maxSize:t,prefix:o,store:n,version:r}=e;this.prefix=void 0,this.maxSize=void 0,this.store=void 0,this.version=void 0,this.serializedKeys=void 0,this.namespace=void 0,this.lastVersion=void 0,this.createInternalKey=e=>`${this.namespace}${e}`,this.maxSize=t,this.prefix=o,this.store=n,this.version=r.toString(),this.namespace=`${o}:${r}::`,this.serializedKeys=`${o}:${r}:keys`,this.lastVersion=`${o}:version`}set(e,t){try{this.setInternal(e,t),this.promote(e)}catch(o){return{error:(0,n().A)(o)}}return{value:void 0}}get(e){try{const t=this.getInternal(e);if(null!==t)return{value:t}}catch(t){return{error:(0,n().A)(t)}}return{value:void 0}}remove(e){try{this.getKeys().indexOf(e)>-1&&(this.removeInternal(e),this.evict(e))}catch(t){return{error:(0,n().A)(t)}}return{value:void 0}}clear(){try{const e=this.getKeys();for(const t of e)this.removeInternal(t);this.setKeys([])}catch(e){return{error:(0,n().A)(e)}}return{value:void 0}}scan(e){try{const t=this.getKeys();for(const o of t){const t=this.getInternal(o);if(null===t)throw new Error(`Item not found: ${o}`);e(o,t)}}catch(t){return{error:(0,n().A)(t)}}return{value:void 0}}entries(){const e=[],t=this.scan(((t,o)=>{e.push([t,o])}));return t.error?{error:t.error}:{value:e}}keys(){try{return{value:this.getKeys()}}catch(e){return{error:(0,n().A)(e)}}}slowGC(){const e=[],t=e=>e!==this.serializedKeys&&(!!e.endsWith("keys")&&this.isOldKey(e));for(let o=0;o<this.store.length;o+=1){const n=this.store.key(o);null!==n&&((this.isOldKey(n)||t(n))&&e.push(n))}for(const o of e)this.store.removeItem(o)}updateVersionAndGC(){const e=this.store.getItem(this.lastVersion);if(null!==e){const t=parseInt(e,10),o=parseInt(this.version,10),n=!Number.isNaN(t),r=!Number.isNaN(o);n&&r&&t<o&&this.slowGC()}this.store.setItem(this.lastVersion,this.version)}isOldKey(e){if(!e.startsWith(`${this.prefix}:`))return!1;const t=e.substring(`${this.prefix}:`.length),o=parseInt(t,10);if(Number.isNaN(o))return!1;return o<parseInt(this.version,10)}getKeys(){const e=this.store.getItem(this.serializedKeys);if(null===e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}setKeys(e){const t=JSON.stringify(e);this.store.setItem(this.serializedKeys,t)}promote(e){const t=this.getKeys(),o=t.indexOf(e);if(o>-1)t.splice(o,1),t.unshift(e);else if(t.unshift(e),t.length>this.maxSize){const e=t.splice(this.maxSize);for(const t of e)this.removeInternal(t)}this.setKeys(t)}evict(e){const t=this.getKeys(),o=t.indexOf(e);o>-1&&t.splice(o,1),this.setKeys(t)}setInternal(e,t){this.store.setItem(this.createInternalKey(e),JSON.stringify(t))}getInternal(e){const t=this.store.getItem(this.createInternalKey(e));return null===t?null:JSON.parse(t)}removeInternal(e){this.store.removeItem(this.createInternalKey(e))}}},643819:(e,t,o)=>{o.d(t,{W:()=>n});o(16280),o(898992),o(354520),o(908872),o(737550);class n{static fromValue(e){const{amount:t,currencyCode:r}=e,i=o(215087).r[r];if(!i)throw new Error(`Unsupported currency code: ${r}`);return new n(i,t)}static sum(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];const r=t.filter((e=>void 0!==e));if(0===r.length)return;const{currencyCode:i}=r[0];if(r.some((e=>e.currencyCode!==i)))throw new Error("Cannot add money with different currencies");const a=r.reduce(((e,t)=>e+t.amount),0);return n.fromValue({amount:a,currencyCode:i})}static zero(e){return n.fromValue({amount:0,currencyCode:e})}constructor(e,t){this.currencyValue=void 0,this.amount=void 0,this.currencyValue=e,this.amount=t}get currencyCode(){return this.currencyValue.currencyCode}toMoneyValue(){return{amount:this.amount,currencyCode:this.currencyValue.currencyCode}}withAmount(e){return new n(this.currencyValue,e)}withAddedAmount(e){return new n(this.currencyValue,this.amount+e)}plus(e){if(this.currencyCode!==e.currencyCode)throw new Error(`Cannot add money with currency code ${this.currencyCode} to money with currency code ${e.currencyCode}`);return new n(this.currencyValue,this.amount+e.amount)}minus(e){return this.plus(e.withMultipliedAmount(-1))}withMultipliedAmount(e){return new n(this.currencyValue,this.amount*e)}withDividedAmount(e){return new n(this.currencyValue,this.amount/e)}zeroIfNegative(){return new n(this.currencyValue,Math.max(0,this.amount))}zeroIfPositive(){return new n(this.currencyValue,Math.min(0,this.amount))}isPositive(){return this.amount>0}isNegative(){return this.amount<0}}},643893:(e,t,o)=>{o.d(t,{A:()=>r});o(16280);var n=()=>o(221844);const r=new class{constructor(){this.subscribedRecords=void 0,this.pendingUnsubscribeRecords=void 0,this.environmentProvider=void 0,this.environmentProvider=()=>{throw new Error("Environment not ready")},this.subscribedRecords=new Map,this.pendingUnsubscribeRecords=new Map}getPendingUnsubscribeCount(){return this.pendingUnsubscribeRecords.size}updateEnvironment(e){this.environmentProvider=()=>e}getSubscriptionForRecord(e){return this.subscribedRecords.get((0,n().Z)(e))}isSubscribedToRecord(e){const t=this.subscribedRecords.get((0,n().Z)(e));return Boolean(t)}addToSubscribedRecords(e){const t=(0,n().Z)(e),o={...e};this.subscribedRecords.set(t,o)}removeFromSubscribedRecords(e){const t=(0,n().Z)(e);this.subscribedRecords.delete(t)}addToPendingUnsubscribeRecords(e,t){const o=(0,n().Z)(e),r={...e,timestamp:t};this.pendingUnsubscribeRecords.set(o,r)}removeFromPendingUnsubscribeRecords(e){this.pendingUnsubscribeRecords.delete((0,n().Z)(e))}forEachPendingUnsubscribeRecord(e){for(const{pointer:t,userId:o,timestamp:n}of this.pendingUnsubscribeRecords.values())e({userId:o,pointer:t,timestamp:n,environment:this.environmentProvider()})}reset(){this.subscribedRecords=new Map,this.pendingUnsubscribeRecords=new Map}safelyGetEnvironment(){try{return this.environmentProvider()}catch(e){return}}getSubscribedBlockDebuggingData(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.safelyGetEnvironment();if(!t)return;const n={loadedBlockTypes:{},loaded:0,notLoaded:0};for(const[r,i]of this.subscribedRecords.entries())if((e||!this.pendingUnsubscribeRecords.has(r))&&i.pointer.table===o(179034).ev){const e=t.defaultRecordCache.inMemoryRecordCache.getRecord(i);if(e&&e.value){const t=e.value.type;t in n.loadedBlockTypes||(n.loadedBlockTypes[t]=0),n.loadedBlockTypes[t]+=1,n.loaded+=1}else n.notLoaded+=1}return n}}},644837:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}open(e){this.setState({open:!0,...e})}}const r=new n},644914:(e,t,o)=>{o.d(t,{EN:()=>Y,KB:()=>N,KM:()=>F,LW:()=>oe,Nk:()=>V,Ql:()=>K,R8:()=>$,Sj:()=>te,UF:()=>J,UN:()=>Z,Uh:()=>j,VG:()=>Q,Vl:()=>X,Zr:()=>P,aL:()=>C,ab:()=>E,bG:()=>B,hX:()=>re,kf:()=>H,km:()=>q,me:()=>L,o1:()=>G,qe:()=>ee,r6:()=>z,rw:()=>O,ry:()=>M,sx:()=>R,tv:()=>D,u8:()=>ae,uX:()=>U,v8:()=>ie,vK:()=>se,zo:()=>W});o(581454);var n=()=>o(484714),r=()=>o(56366),i=()=>o(401497),a=()=>o(763884),s=()=>o(175947),l=()=>o(284371),c=()=>o(890754),d=()=>o(590027),u=()=>o(186445),p=()=>o(159588),m=()=>o(836251),g=()=>o(154807),f=()=>o(900652),v=()=>o(441199),h=()=>o(326589),_=()=>o(351360),b=()=>o(508496),y=()=>o(545206),S=()=>o(589994),w=()=>o(712505),k=()=>o(749687),I=()=>o(737230),A=()=>o(265201);const x=320,C=800,T=20,M=22,P=30,B=8,R=4;function E(){const e=(0,n().Y0)().isMobile;return(0,i().IS)((t=>({topButtonIcon:{fill:e?t.mediumIconColor:t.sidebarSecondaryColor,width:T,height:T},bottomButtonIcon:{fill:e?t.mediumIconColor:t.sidebarSecondaryColor,width:T,height:T},baseSidebarItem:{...(0,p().sQ)({isMobile:e}),fontWeight:l().Wy.medium},currentSelectedSidebarItem:{background:t.sidebarItemSelectedBackground,color:t.text.primary,...e&&{boxShadow:`\n                            0 1px 0 ${t.buttonHoveredBackground}\n                        `}},currentSelectedSidebarIcon:{fill:t.sidebarSecondaryColor}})),[e])}function D(e){return!!e.device.isDesktop||!!e.device.isTablet}function N(e){return((0,m().w6)(e)||(0,h().g)()||e.currentUser.isLoggedIn())&&k().sidebarExpandedStore.state}function L(e){return V(e)&&I().Ay.state.currentTab===I().tF.Comments}function F(e){return V(e)&&I().Ay.state.currentTab===I().tF.Updates}function U(e){return V(e)&&I().Ay.state.currentTab===I().tF.Info}function O(e){const{tab:t}=e,o=(0,n().v3)();return(0,r().K8)((()=>V(o)&&I().Ay.state.currentTab===t),[o,t])}function V(e){var t;if((null===(t=_().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id)!==I().Ay.state.openedOnBlockId)return!1;const o=e.currentUser.isLoggedIn()||I().Ay.state.currentTab===I().tF.Info||(0,h().g)();return!e.device.isMobile&&o&&I().Ay.state.expanded||A().A.state.open}function j(e){return e.WindowSizeStore.state.width-H(e)-W(e,!1)}function z(e){const{isDesktop:t,isMobile:o,isTablet:n}=e.device,{WindowSizeStore:r}=e,i=r.isLandscape(),a=b().default.checkGate({gateName:"tablet_refresh_gate"}),s=o&&!n&&i;return t||n&&a?k().sidebarWidthStore.state:s||n&&!a?Math.min(x,.87*e.WindowSizeStore.state.width):.87*e.WindowSizeStore.state.width}function q(e){const{shouldShowSidebar:t}=(0,u().X4)(e),o=N(e);return t&&o&&D(e)?z(e):0}function H(e){const{shouldShowSidebar:t}=(0,u().X4)(e),o=N(e);return t&&o&&D(e)?z(e)+f().Z8():t&&!o&&v().default.isOpen()?f().Z8():0}function W(e,t){return t&&w().default.state.open?0:function(e){if(e.device.isMobile)return 0;if(K(e)>0){return(0,g().eO)({environment:e,isInPeek:!0})}return V(e)?I().Ay.state.width:0}(e)+K(e)+function(e){if((0,c().getIsChatSidebarOpen)(e))return d().MU.state.width;return 0}(e)}function K(e){if(!w().default.state.open||w().default.state.isClosing)return 0;const t=(0,g().eO)({environment:e,isInPeek:!0});return w().default.isSidePeekOpen()?w().default.getSidePeekWidth(e.WindowSizeStore.state.width)-t:0}function G(e){return e.device.isAndroid&&!e.device.isTablet||e.device.isTablet&&e.WindowSizeStore.isPortrait()}function $(e){const t=H(e)+f().Z8()+K(e);return e.WindowSizeStore.state.width-t}const Y=(0,o(959013).YK)({createOrJoinWorkspace:{defaultMessage:"Create or join workspace",id:"sidebarSwitcher.createOrJoinWorkspaceButton.prompt"},personalPlan:{defaultMessage:"Personal Plan",id:"sidebarSwitcher.personalPlan.label"},proPlan:{defaultMessage:"Personal Pro Plan",id:"sidebarSwitcher.proPlan.label"},educationPlan:{defaultMessage:"Personal Pro Plan (Education)",id:"educationPlan.title"},educationPlusPlan:{defaultMessage:"Education Plus Plan",id:"sidebarSwitcher.educationPlusPlan.label"},freePlan:{defaultMessage:"Free Plan",id:"sidebarSwitcher.freePlan.label"},teamTrialPlan:{defaultMessage:"Team Plan (Trial)",id:"teamTrialPlan.title"},teamPlan:{defaultMessage:"Team Plan",id:"teamPlan.title"},plusPlan:{defaultMessage:"Plus Plan",id:"plusPlan.title"},businessPlan:{id:"businessPlan.title",defaultMessage:"Business Plan"},enterprisePlan:{defaultMessage:"Enterprise Plan",id:"sidebarSwitcher.enterprisePlan.label"},legacyPlan:{defaultMessage:"Legacy Plan",id:"sidebarSwitcher.legacyPlan.label"},workspaceSubtitleWithMembers:{id:"sidebarSwitcher.workspaceSubtitleWithMembers.label",defaultMessage:"{planType} · {numberOfWorkspaceMembers, plural, one {{numberOfWorkspaceMembers} member} other {{numberOfWorkspaceMembers} members}}"},workspaceSubtitleWithoutMembers:{id:"sidebarSwitcher.workspaceSubtitleWithoutMembers.label",defaultMessage:"{planType}"}});function Q(e){switch(e){case"team_free":case"personal_free":case"free":return Y.freePlan;case"personal":case"plus":return Y.plusPlan;case"student":return Y.educationPlusPlan;case"business":return Y.businessPlan;case"enterprise":return Y.enterprisePlan;default:return Y.legacyPlan}}function Z(e){return e.canRead()&&"copy_indicator"!==e.getType()}function X(e){let{isExpanded:t,isFullScreenDesktop:o,isShowingTabBar:n,isElectron:r}=e;return!n&&function(e){let{isExpanded:t,isFullScreenDesktop:o,isElectron:n}=e;return n&&t&&!o}({isExpanded:t,isFullScreenDesktop:o,isElectron:r})}function J(e){let{isExpanded:t,isFullScreenDesktop:o,isShowingTabBar:n,isElectron:r}=e;return t&&!n&&!X({isExpanded:t,isFullScreenDesktop:o,isShowingTabBar:n,isElectron:r})}const ee=15;function te(e){return s().ek(e.device.isElectronMac)+ee}function oe(e,t){return`${e.id}:${t}`}function ne(e){let{environment:t,section:o,isSectionShown:n,spaceViewId:r}=e;if(!n)return null;return!0!==a().A.get({userId:t.currentUser.id,key:oe({id:r},o)})}function re(e){var t;let{environment:o}=e;const n=null===(t=_().default.state.currentSpaceViewStore)||void 0===t?void 0:t.id,r=(0,u().rp)(o).state,i=k().sidebarExpandedStore.state;if(!n||!r)return{is_sidebar_open:i};const{showBookmarksSection:a,showSharedSection:s,showTeamSection:l,showPrivateSection:c}=r;return{is_sidebar_open:i,sidebar_state:{is_bookmark_expanded:ne({environment:o,isSectionShown:a,section:"bookmarks",spaceViewId:n}),is_team_expanded:ne({environment:o,isSectionShown:l,section:"teamSidebar",spaceViewId:n}),is_shared_expanded:ne({environment:o,isSectionShown:s,section:"shared",spaceViewId:n}),is_private_expanded:ne({environment:o,isSectionShown:c,section:"private",spaceViewId:n})}}}function ie(e){return(0,r().K8)((()=>ae(e)),[e])}function ae(e){const t="copy_indicator"===e.getType();return{isCopyIndicator:t,shouldShowAsLoadingSpinner:t&&Boolean(S().transactionQueue.isPendingTransactionForRecord(e.pointer)||y().A.state[e.pointer.id])}}function se(e){let{newVisibleOrder:t,previousFullOrder:o}=e,n=0;return o.map((e=>{if(t.includes(e)){const e=t[n];return n++,e}return e}))}},645200:(e,t,o)=>{o.d(t,{rW:()=>C,MR:()=>E,AJ:()=>R,lq:()=>x,Op:()=>A,u$:()=>I,i$:()=>k,J7:()=>P,rI:()=>D,cs:()=>B});o(898992),o(354520),o(814603),o(147566),o(198721);var n=()=>o(206267),r=()=>o(427704),i=()=>o(496603),a=()=>o(498212),s=()=>o(939768),l=()=>o(40970),c=()=>o(449506),d=()=>o(705540),u=()=>o(755636),p=()=>o(317909),m=()=>o(755199),g=()=>o(780054),f=()=>o(989423),v=()=>o(465425),h=()=>o(696746),_=()=>o(508496),b=()=>o(583238),y=()=>o(694498);class S{constructor(e){this.environment=void 0,this.from=void 0,this.baseUrl=void 0,this.userId=void 0,this.spaceId=void 0,this.collectionViewId=void 0,this.notionAnalyticsSessionId=void 0,this.notionDesktopRedirectPageId=void 0;const{environment:t,from:o,baseUrl:n,userId:r,spaceId:i,collectionViewId:a,notionAnalyticsSessionId:s,notionDesktopRedirectPageId:l}=e;this.environment=t,this.from=o,this.baseUrl=n,this.userId=r,this.spaceId=i,this.collectionViewId=a,this.notionAnalyticsSessionId=s,this.notionDesktopRedirectPageId=l}get centralizedAuthUrl(){return`${g().A.domainBaseUrl}${r().JZ.calendarAuth}`}async buildQueryParams(e){const t=await(0,f().TZ)(this.environment);return i().z7({env:"production",from:this.from,notionDeviceId:t,notionAnalyticsSessionId:this.notionAnalyticsSessionId,...e},i().b0)}async buildCsrfToken(){const e=n().JW();return await(0,b().AP)({environment:this.environment,csrf:e}),e}async buildCentralizedAuthStateParams(){const e=new URLSearchParams,t=await(0,f().TZ)(this.environment);return e.set("provider","notion-centralized-auth"),e.set("from",this.from),t&&e.set("notionDeviceId",t),this.spaceId&&e.set("workspaceId",this.spaceId),this.collectionViewId&&e.set("collectionViewId",this.collectionViewId),e.toString()}async build(){if(this.baseUrl){const e=await this.buildQueryParams();return{url:s().Gm({url:this.baseUrl,query:e})}}const e=!this.environment.device.isElectron,t=(0,b().mX)();if(e){const[e,t]=await Promise.all([this.buildCsrfToken(),this.buildCentralizedAuthStateParams()]),o=await this.buildQueryParams({csrf:e,state:t});return{url:s().Gm({url:this.centralizedAuthUrl,query:o})}}if(!this.environment.device.isElectron){const e=t?this.collectionViewId?g().A.calendar.openNotionDatabaseUrl:g().A.calendar.domainBaseUrl:g().A.calendar.notionAuthUrl,o=t?void 0:await this.buildCsrfToken();o&&y().A.setState({isConnectingCalendar:!0});const n=await this.buildQueryParams({csrf:o,user_id:this.userId,workspace_id:this.spaceId,collection_view_id:this.collectionViewId});return{url:s().Gm({url:e,query:n})}}if(!t&&"homeSignupClick"===this.from){const e=await this.buildCentralizedAuthStateParams(),t=await this.buildQueryParams({state:e,csrf:"",autolink:"false",notionDesktopRedirectPageId:this.notionDesktopRedirectPageId});return{url:s().Gm({url:this.centralizedAuthUrl,query:t}),openExternally:!0}}if(!t)return{url:s().Gm({url:`${g().A.domainBaseUrl}${r().JZ.signup}`,query:{showNotionCalendarModal:"true"}}),openExternally:!0};const o=this.collectionViewId?g().A.calendar.openNotionDatabaseUrl:g().A.calendar.domainBaseUrl,n=await this.buildQueryParams({user_id:this.userId,workspace_id:this.spaceId,collection_view_id:this.collectionViewId});return{url:s().Gm({url:o,query:n})}}}async function w(e){const t=new S(e),{url:o,openExternally:n}=await t.build();n?u().f({environment:e.environment,url:o}):await P({environment:e.environment,url:o,from:e.from})}async function k(e){const{environment:t,from:o,notionAnalyticsSessionId:n}=e;(0,b().Qs)()?await w({environment:t,from:o,baseUrl:g().A.calendar.createEventUrl,notionAnalyticsSessionId:n}):await P({environment:t,url:await x({environment:t,baseUrl:g().A.calendar.createEventUrl,spaceStore:void 0,collectionViewStore:void 0,from:o,notionAnalyticsSessionId:n}),from:o})}async function I(e){const{environment:t,from:o}=e;(0,b().Qs)()?await w({environment:t,from:o,baseUrl:g().A.calendar.calendarSettingsUrl}):await P({environment:t,url:await x({environment:t,baseUrl:g().A.calendar.calendarSettingsUrl,spaceStore:void 0,collectionViewStore:void 0,from:o}),from:o})}async function A(e){const{environment:t,spaceStore:o,collectionViewStore:i,from:l}=e;if((0,b().Qs)()){const e=h().XH("main");return void(await w({environment:t,from:l,userId:null==o?void 0:o.userId,spaceId:null==o?void 0:o.id,collectionViewId:null==i?void 0:i.id,notionDesktopRedirectPageId:e?(0,a().Xw)(e.id):void 0}))}if(!!o&&!(0,b().mX)())return void async function(e){const{environment:t,spaceStore:o,collectionViewStore:i,from:l}=e,c=await M({environment:t,spaceStore:o,collectionViewStore:i,from:l});if("homeSignupClick"===l&&t.device.isElectron){const e=h().XH("main"),o=s().Gm({url:g().A.calendar.notionAuthUrl,query:{...c,csrf:"",autolink:"false",notionDesktopRedirectPageId:e?(0,a().Xw)(e.id):void 0}});return void u().f({environment:t,url:o})}if(t.device.isElectron){const e=s().Gm({url:`${g().A.domainBaseUrl}${r().JZ.signup}`,query:{showNotionCalendarModal:"true"}});return void u().f({environment:t,url:e})}const d=n().JW(),p=s().Gm({url:g().A.calendar.notionAuthUrl,query:{...c,csrf:d}});await(0,b().AP)({environment:t,csrf:d}),y().A.setState({isConnectingCalendar:!0}),u().f({environment:t,url:p})}(e);const c=i?g().A.calendar.openNotionDatabaseUrl:g().A.calendar.domainBaseUrl;P({environment:t,url:await x({environment:t,baseUrl:c,spaceStore:o,collectionViewStore:i,from:l}),from:l})}async function x(e){const{environment:t,baseUrl:o,spaceStore:n,collectionViewStore:r,from:i,notionAnalyticsSessionId:a}=e,l=await M({environment:t,collectionViewStore:r,spaceStore:n,from:i,notionAnalyticsSessionId:a});return s().Gm({url:o,query:l})}async function C(e){const{environment:t,csrf:o,calendarCsrf:n,spaceId:r,integration:a,redirectUri:s,state:d}=e;if(!(await(0,b().QY)({environment:t,csrf:o})))return void T({environment:t,redirectUri:s,query:i().z7({state:d},i().b0)});const u=await c().callApi({eventName:"createOauthAuthorizationCode",environment:t,data:{integrationId:a.id,spaceId:r,redirectUri:s,acceptedIntegrationCapabilities:a.capabilities}});if("failed"===u.type)return void T({environment:t,redirectUri:s,query:i().z7({state:d},i().b0)});await l().nQ(t);const p={code:u.data.code,calendarCsrf:n,state:d};T({environment:t,redirectUri:s,query:i().z7(p,i().b0)})}function T(e){const{environment:t,redirectUri:o,query:n}=e,r=s().Gm({url:o,query:n});u().f({environment:t,url:r,targetSelf:!0})}async function M(e){const{environment:t,spaceStore:o,collectionViewStore:n,from:r,notionAnalyticsSessionId:a}=e,s=await(0,f().TZ)(t);if(!o&&!n)return{notionDeviceId:s,from:r,notionAnalyticsSessionId:a};const l={env:"production",collection_view_id:null==n?void 0:n.id,user_id:null==o?void 0:o.userId,workspace_id:null==o?void 0:o.id,notionDeviceId:s,from:r,notionAnalyticsSessionId:a};return i().z7(l,i().b0)}async function P(e){const{environment:t,url:o,targetSelf:n}=e;if((0,f().vd)(e.environment,"open_notion_calendar",{from:e.from}),!t.device.isElectron)return u().f({environment:t,url:o,targetSelf:n});const{desktopProtocol:r}=g().A.calendar;if(!(await d().isProtocolRegistered(r)))return u().f({environment:t,url:o,targetSelf:n});const i=o.replace(/^https?:/,`${r}:`);d().openExternalUrl(i)}async function B(e){let t,{environment:o,url:n}=e;if(!o.device.isElectron||!_().default.checkGate({gateName:"calendar_home_tile_open_in_zoom_app"}))return!1;try{t=new URL(n)}catch{return!1}const r=t.pathname.split("/").filter(Boolean).pop();if(!r||!r.match(/\d{9,11}/))return!1;const{desktopProtocol:i}=g().A.zoom,a=new URLSearchParams(t.search);a.set("confno",r);const s=`${i}://${t.host}/join?${a.toString()}`;return await d().openExternalUrl(s)}function R(e){v().UW(e,"notion_calendar_launch_promo")}function E(e){const{environment:t,userSettingsStore:o}=e;p().createAndCommit({environment:t,userAction:"NotionCalendarLaunchModal.clickCancel",canUndo:!0,perform:e=>{m().mJ({userSettingsStore:o,transaction:e,data:{notion_calendar_launch_modal_dismissed_at:Date.now(),notion_calendar_launch_modal_phase:"dismissed_modal"}})}})}function D(e,t){const{phase:o,transactionUserAction:n,userSettingsStore:r}=t;p().createAndCommit({environment:e,userAction:n,canUndo:!0,perform:e=>{m().mJ({userSettingsStore:r,transaction:e,data:{notion_calendar_launch_modal_phase:o}})}})}},645302:(e,t,o)=>{o.d(t,{EK:()=>i,Zh:()=>s,bn:()=>l,cf:()=>a,jE:()=>c,pU:()=>d,uO:()=>r,z9:()=>u});var n=()=>o(989423);function r(e,t){n().vd(e,"open_peek_as_page",t)}function i(e,t){n().vd(e,"peek_arrow_navigation",t)}function a(e,t){n().vd(e,"close_side_peek",t)}function s(e,t){n().vd(e,"close_peek",t)}function l(e,t){n().vd(e,"expand_block",t)}function c(e,t){n().vd(e,"open_peek_mode_picker",t)}function d(e,t){n().vd(e,"open_peek_mode_picker",t)}function u(e,t){n().vd(e,"update_peek_mode_format",t)}},646736:(e,t,o)=>{o.d(t,{HI:()=>c,Ts:()=>p,dp:()=>d,sE:()=>u});var n=()=>o(484714),r=()=>o(56366),i=()=>o(296900),a=()=>o(848538),s=()=>o(351360),l=()=>o(630116);function c(e){const t=(0,n().v3)();return(0,r().K8)((()=>{var o;const n=null===(o=t.currentUser)||void 0===o?void 0:o.id;return n?u(e??s().default.state.currentSpaceStore,n):void 0}),[t,e])}function d(e,t){return l().VF.createChildStore(e,a().i1({userId:t,spaceId:e.id}))}function u(e,t){return e?d(e,t):void 0}function p(e,t){return l().bY.createChildStore(e,i().gZ({botId:t,spaceId:e.id}))}},647440:(e,t,o)=>{o.d(t,{G:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("assistFindActionItems",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.17383 7.13477C1.52637 7.13477 0.15918 5.76758 0.15918 4.12695C0.15918 2.47266 1.51953 1.10547 3.17383 1.10547C4.81445 1.10547 6.18164 2.47266 6.18164 4.12695C6.18164 5.76758 4.81445 7.13477 3.17383 7.13477ZM2.81152 5.74023C2.96875 5.74023 3.09863 5.66504 3.1875 5.53516L4.64355 3.27246C4.71191 3.16992 4.73242 3.08105 4.73242 2.98535C4.73242 2.79395 4.56152 2.63672 4.35645 2.63672C4.21973 2.63672 4.10352 2.70508 4.01465 2.8418L2.79785 4.79688L2.27148 4.14062C2.18262 4.01758 2.08691 3.96289 1.9502 3.96289C1.74512 3.96289 1.58105 4.12695 1.58105 4.33887C1.58105 4.45508 1.6084 4.53711 1.68359 4.62598L2.44922 5.54199C2.55176 5.66504 2.66113 5.74023 2.81152 5.74023ZM8.34863 4.72852C8.01367 4.72852 7.75391 4.46191 7.75391 4.12695C7.75391 3.79199 8.01367 3.52539 8.34863 3.52539H15.2256C15.5605 3.52539 15.834 3.79199 15.834 4.12695C15.834 4.46191 15.5605 4.72852 15.2256 4.72852H8.34863ZM3.17383 15.0371C1.52637 15.0371 0.15918 13.6699 0.15918 12.0225C0.15918 10.375 1.51953 9.00781 3.17383 9.00781C4.81445 9.00781 6.18164 10.3682 6.18164 12.0225C6.18164 13.6699 4.81445 15.0371 3.17383 15.0371ZM3.17383 13.875C4.17188 13.875 5.02637 13.0273 5.02637 12.0225C5.02637 11.0176 4.17188 10.1631 3.17383 10.1631C2.16895 10.1631 1.32129 11.0176 1.32129 12.0225C1.32129 13.0273 2.16211 13.875 3.17383 13.875ZM8.34863 12.6377C8.01367 12.6377 7.75391 12.3711 7.75391 12.0361C7.75391 11.7012 8.01367 11.4346 8.34863 11.4346H15.2256C15.5605 11.4346 15.834 11.7012 15.834 12.0361C15.834 12.3711 15.5605 12.6377 15.2256 12.6377H8.34863Z"})})},649642:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isDragging:!1}}}const r=new n},650225:(e,t,o)=>{o.d(t,{l:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("reaction",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.99414 14.0723C7.16602 14.0723 6.38672 13.9141 5.65625 13.5977C4.92578 13.2852 4.28125 12.8496 3.72266 12.291C3.16797 11.7324 2.73242 11.0879 2.41602 10.3574C2.09961 9.62695 1.94141 8.84766 1.94141 8.01953C1.94141 7.19141 2.09961 6.41211 2.41602 5.68164C2.73242 4.95117 3.16797 4.30859 3.72266 3.75391C4.28125 3.19531 4.92383 2.75781 5.65039 2.44141C6.38086 2.125 7.16016 1.9668 7.98828 1.9668C8.82031 1.9668 9.60156 2.125 10.332 2.44141C11.0625 2.75781 11.707 3.19531 12.2656 3.75391C12.8242 4.30859 13.2617 4.95117 13.5781 5.68164C13.8945 6.41211 14.0527 7.19141 14.0527 8.01953C14.0527 8.84766 13.8945 9.62695 13.5781 10.3574C13.2617 11.0879 12.8242 11.7324 12.2656 12.291C11.707 12.8496 11.0625 13.2852 10.332 13.5977C9.60156 13.9141 8.82227 14.0723 7.99414 14.0723ZM7.99414 12.877C8.66992 12.877 9.30078 12.752 9.88672 12.502C10.4727 12.252 10.9883 11.9043 11.4336 11.459C11.8789 11.0137 12.2266 10.498 12.4766 9.91211C12.7266 9.32617 12.8516 8.69531 12.8516 8.01953C12.8516 7.34766 12.7266 6.71875 12.4766 6.13281C12.2266 5.54297 11.8789 5.02539 11.4336 4.58008C10.9883 4.13477 10.4707 3.78711 9.88086 3.53711C9.29492 3.28711 8.66406 3.16211 7.98828 3.16211C7.31641 3.16211 6.68555 3.28711 6.0957 3.53711C5.50977 3.78711 4.99609 4.13477 4.55469 4.58008C4.11328 5.02539 3.76758 5.54297 3.51758 6.13281C3.26758 6.71875 3.14258 7.34766 3.14258 8.01953C3.14258 8.69531 3.26758 9.32617 3.51758 9.91211C3.76758 10.498 4.11328 11.0137 4.55469 11.459C5 11.9043 5.51562 12.252 6.10156 12.502C6.69141 12.752 7.32227 12.877 7.99414 12.877ZM7.98828 10.9023C7.58203 10.9023 7.22266 10.8301 6.91016 10.6855C6.60156 10.5371 6.36133 10.3672 6.18945 10.1758C6.02148 9.98438 5.9375 9.82422 5.9375 9.69531C5.9375 9.625 5.96484 9.57617 6.01953 9.54883C6.07812 9.51758 6.14062 9.51758 6.20703 9.54883C6.42188 9.66211 6.66602 9.77148 6.93945 9.87695C7.21289 9.98242 7.5625 10.0352 7.98828 10.0352C8.41406 10.0352 8.76367 9.98242 9.03711 9.87695C9.31445 9.77148 9.55859 9.66211 9.76953 9.54883C9.83594 9.51758 9.89844 9.51758 9.95703 9.54883C10.0156 9.57617 10.0449 9.625 10.0449 9.69531C10.0449 9.82422 9.95898 9.98438 9.78711 10.1758C9.61523 10.3672 9.375 10.5371 9.06641 10.6855C8.75781 10.8301 8.39844 10.9023 7.98828 10.9023ZM6.25977 7.49219C6.07617 7.49219 5.91602 7.41797 5.7793 7.26953C5.64648 7.12109 5.58008 6.92969 5.58008 6.69531C5.58008 6.46484 5.64648 6.27539 5.7793 6.12695C5.91602 5.97461 6.07617 5.89844 6.25977 5.89844C6.44336 5.89844 6.60547 5.97461 6.74609 6.12695C6.88672 6.27539 6.95703 6.46484 6.95703 6.69531C6.95703 6.92969 6.88672 7.12109 6.74609 7.26953C6.60547 7.41797 6.44336 7.49219 6.25977 7.49219ZM9.7168 7.49219C9.5332 7.49219 9.37305 7.41797 9.23633 7.26953C9.10352 7.12109 9.03711 6.92969 9.03711 6.69531C9.03711 6.46484 9.10352 6.27539 9.23633 6.12695C9.37305 5.97461 9.5332 5.89844 9.7168 5.89844C9.90039 5.89844 10.0625 5.97461 10.2031 6.12695C10.3438 6.27539 10.4141 6.46484 10.4141 6.69531C10.4141 6.92969 10.3438 7.12109 10.2031 7.26953C10.0625 7.41797 9.90039 7.49219 9.7168 7.49219Z"})})},650829:(e,t,o)=>{o.r(t),o.d(t,{LazyAssistantCollectionSearchInputButton:()=>f,LazyAssistantCollectionViewButton:()=>m,LazyAssistantFullPageChat:()=>i,LazyAssistantMenuPopup:()=>s,LazyAssistantOriginElement:()=>a,LazyAssistantScopedSearchMenuPopup:()=>d,LazyAssistantShareModal:()=>p,LazyAssistantUnfurlingMenuWithAiSection:()=>g,LazyJiraAIAnnouncementSidebarReminder:()=>v,LazyMobileAssistantPendingOperationsCollapsedElement:()=>c,LazyReportBadQnAForm:()=>u,LazySearchAssistantPane:()=>l,assistantDependency:()=>r});var n=()=>o(645873);const r=new(n().O2)("assistant",(()=>Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(5053)]).then(o.bind(o,577454)))),i=(0,n()._h)(r,(e=>e.AssistantFullPageChat)),a=(0,n()._h)(r,(e=>e.AssistantOriginElement)),s=(0,n()._h)(r,(e=>e.AssistantMenuPopup)),l=(0,n()._h)(r,(e=>e.SearchAssistantPane)),c=(0,n()._h)(r,(e=>e.MobileAssistantPendingOperationsCollapsedElement)),d=(0,n()._h)(r,(e=>e.AssistantScopedSearchMenuPopup)),u=(0,n()._h)(r,(e=>e.ReportBadQnAForm)),p=(0,n()._h)(r,(e=>e.AssistantShareModal)),m=(0,n()._h)(r,(e=>e.AssistantCollectionViewButton)),g=(0,n()._h)(r,(e=>e.AssistantUnfurlingMenuWithAiSection)),f=(0,n()._h)(r,(e=>e.AssistantCollectionSearchInputButton)),v=(0,n()._h)(r,(e=>e.JiraAIAnnouncementSidebarReminder))},652617:(e,t,o)=>{o.d(t,{e:()=>n});const n=(0,o(296540).createContext)(void 0);n.displayName="DismissContext"},653609:(e,t,o)=>{o.d(t,{W:()=>r});var n=()=>o(534177);function r(e){const t=e.getType();if(!t)return[];const o=e.getRenderableContentStores();if(o.length>0)return o;switch(t){case"transclusion_reference":const o=e.getTransclusionReferenceTargetStore();return o?[o]:[];case"text":case"encrypted_text":case"page":case"personal_home_page":case"bulleted_list":case"numbered_list":case"toggle":case"quote":case"factory":case"button":case"to_do":case"column_list":case"column":case"embed":case"framer":case"tweet":case"gist":case"drive":case"audio":case"maps":case"invision":case"mixpanel":case"image":case"video":case"file":case"bookmark":case"equation":case"code":case"header":case"sub_header":case"sub_sub_header":case"collection_view":case"collection_view_page":case"breadcrumb":case"copy_indicator":case"divider":case"link_to_page":case"link_to_collection":case"figma":case"loom":case"typeform":case"codepen":case"pdf":case"callout":case"table_of_contents":case"whimsical":case"miro":case"abstract":case"sketch":case"excalidraw":case"replit":case"alias":case"transclusion_container":case"external_object_instance":case"table":case"table_row":case"tab":case"external_object_instance_page":case"hex":case"deepnote":case"ai_block":case"drawing":case"slide":case"form":case"post":case"workflow":case"transcription":case"person_profile":return[];default:(0,n().HB)(t)}}},654056:(e,t,o)=>{o.d(t,{As:()=>g,J8:()=>y,TR:()=>h,kl:()=>_,lb:()=>S,nK:()=>f,yj:()=>v});o(296540);var n=()=>o(764781),r=()=>o(624550),i=()=>o(89924),a=()=>o(855801),s=()=>o(878377),l=()=>o(972435),c=()=>o(351360),d=()=>o(227440),u=()=>o(611371),p=()=>o(416726),m=o(474848);const g=(0,p().Fw)({key:"duplicate",displayName:p().AY.duplicateName,analyticsName:p().AY.duplicateName.defaultMessage,svg:n().V,validators:[s().ecY,s().AU6(s().xqI),s().AU6(s().p9k),s().AU6(s().PfK),s().or([s().Cuf,s().AU6(s().vEP)]),s().or([s().AU6(s().an_),s().Afv]),...p().uo],shortcuts:["duplicate"],closeParentMenu:!0,track:{actionName:"duplicate"},action:async(e,t,o)=>{let{blocks:n,environment:r}=t;const i=await a().VI.selectableBlockActions.load();await i.duplicateBlocksWithMaybeConfirmation({environment:r,blocks:n,event:o,callback:e})},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online}),f=(0,p().uk)({key:"duplicateCollection",displayName:p().AY.duplicateName,analyticsName:p().AY.duplicateName.defaultMessage,svg:n().V,width:275,validators:[s().ecY,s().AU6(s().xqI),s().AU6(s().p9k),s().or([s().Cuf,s().AU6(s().vEP)]),s().Uo6([s().an_,s().AU6(s().Afv)]),s().AU6(s().Qp$),...p().uo],subActions:()=>[{key:"collection duplication options",render:e=>(0,m.jsx)(i().A,{...e}),actions:v.actions}]}),v=(0,p().gy)({key:"duplicate collection actions",title:p().AY.duplicateName,render:e=>(0,m.jsx)(i().A,{...e}),actions:[(0,p().Fw)({key:"duplicate with data",displayName:p().AY.duplicateCollectionWithDataName,analyticsName:"duplicate_with_data",validators:[s().AU6(s().PfK),s().AU6(s().Pnk)],shortcuts:["duplicate"],closeParentMenu:!0,track:{actionName:"duplicate"},action:async(e,t,o)=>{let{blocks:n,environment:r}=t;const i=await a().VI.selectableBlockActions.load();await i.duplicateBlocksWithMaybeConfirmation({environment:r,blocks:n,duplicateOnlyCollectionSchema:!1,event:o,callback:e})},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online}),(0,p().Fw)({key:"duplicate schema only",displayName:p().AY.duplicateCollectionSchemaOnlyName,analyticsName:"duplicate_schema_only",validators:[s().AU6(s().Pnk)],shortcuts:["duplicateSchema"],closeParentMenu:!0,track:{actionName:"duplicate"},action:async(e,t,o)=>{let{blocks:n,environment:r}=t;const i=await a().VI.selectableBlockActions.load();await i.duplicateBlocksWithMaybeConfirmation({environment:r,blocks:n,duplicateOnlyCollectionSchema:!0,event:o,callback:e})},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online})]}),h=(0,p().Fw)({key:"duplicate",displayName:p().AY.duplicateName,analyticsName:p().AY.duplicateName.defaultMessage,svg:n().V,validators:[s().vXb,s().MIU,s().or([s().AU6(s().omD),s().UC4]),s().or([s().AU6(s().an_),s().Afv]),...p().uo,s().AU6(s().oy3)],shortcuts:["duplicate"],closeParentMenu:!0,track:{actionName:"duplicate"},action:(e,t,o)=>{let{blocks:n,environment:r}=t;k(n,r,{event:o,callback:e})},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online}),_=(0,p().uk)({key:"duplicateCollection",displayName:p().AY.duplicateName,analyticsName:p().AY.duplicateName.defaultMessage,svg:n().V,width:275,validators:[s().vXb,s().MIU,s().AU6(s().Qp$),s().Uo6([s().an_,s().AU6(s().Afv)]),...p().uo],subActions:()=>[{key:"collection duplication options",render:e=>(0,m.jsx)(i().A,{...e}),actions:b.actions}]}),b=(0,p().gy)({key:"duplicate collection actions",title:p().AY.duplicateName,render:e=>(0,m.jsx)(i().A,{...e}),actions:[(0,p().Fw)({key:"duplicate with data",displayName:p().AY.duplicateCollectionWithDataName,analyticsName:"duplicate_with_data",validators:[s().AU6(s().Pnk)],shortcuts:["duplicate"],closeParentMenu:!0,track:{actionName:"duplicate"},action:(e,t,o)=>{let{blocks:n,environment:r}=t;k(n,r,{duplicateOnlyCollectionSchema:!1,callback:e})},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online}),(0,p().Fw)({key:"duplicate schema only",displayName:p().AY.duplicateCollectionSchemaOnlyName,analyticsName:"duplicate_schema_only",validators:[s().AU6(s().Pnk)],shortcuts:["duplicateSchema"],closeParentMenu:!0,track:{actionName:"duplicate"},action:(e,t,o)=>{let{blocks:n,environment:r}=t;k(n,r,{duplicateOnlyCollectionSchema:!0,callback:e})},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online})]}),y=(0,p().Ls)({key:"duplicate into private",displayName:p().AY.duplicateToPrivateName,analyticsName:p().AY.duplicateToPrivateName.defaultMessage,svg:n().V,validators:[s().AU6(s().xqI),s()._fc,s().p2L,s().AU6(s().PaP),s().or([s().p9k,s().AU6(s().MIU),s().Wj2]),s().or([s().AU6(s().an_),s().Afv]),s().AU6(s().oy3)],closeParentMenu:!0,action:async(e,t)=>{let{blocks:o,environment:n}=e;await I(o,n,void 0,t)},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online}),S=(0,p().uk)({key:"duplicate collection to private",displayName:p().AY.duplicateToPrivateName,analyticsName:p().AY.duplicateToPrivateName.defaultMessage,svg:n().V,width:275,validators:[s().AU6(s().xqI),s()._fc,s().p2L,s().AU6(s().PaP),s().or([s().p9k,s().AU6(s().MIU),s().Wj2]),s().Uo6([s().an_,s().AU6(s().Afv)]),s().AU6(s().oy3)],subActions:()=>[{key:"collection duplication options",render:e=>(0,m.jsx)(i().A,{...e}),actions:w.actions}]}),w=(0,p().gy)({key:"duplicate collection to private actions",title:p().AY.duplicateName,render:e=>(0,m.jsx)(i().A,{...e}),actions:[(0,p().Ls)({key:"duplicate with data",displayName:p().AY.duplicateCollectionWithDataName,analyticsName:"duplicate_with_data",validators:[],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:o}=e;await I(t,o,!1)},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online}),(0,p().Ls)({key:"duplicate schema only",displayName:p().AY.duplicateCollectionSchemaOnlyName,analyticsName:"duplicate_schema_only",validators:[],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:o}=e;await I(t,o,!0)},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online})]});function k(e,t,o){if(!(0,u().EF)(t))return;const n=e[0].getParentStore();if("block"!==(null==n?void 0:n.table)&&"team"!==(null==n?void 0:n.table)&&"space"!==(null==n?void 0:n.table))return;const{callback:i,duplicateOnlyCollectionSchema:a,event:s}=o??{};r().hh({environment:t,store:e[0],newParentStore:n,duplicateOnlyCollectionSchema:a,event:s,callback:i})}async function I(e,t,n,i){if(!(0,u().EF)(t))return;const a=e[0],s=c().default.state.currentSpaceStore,l=c().default.state.currentSpaceViewStore;s&&l&&await r().w7({environment:t,store:a,spaceStore:s,spaceViewStore:l,isPrivate:!0,context:"duplicate_to_private_space",duplicateOnlyCollectionSchema:n,useCrdt:(0,o(518736).D8)(s)})}},654062:(e,t,o)=>{o.d(t,{F:()=>r});var n=()=>o(246826);function r(e){const{collectionViewStore:t,update:o,transaction:r}=e;n().zv({store:t,data:o,transaction:r})}},654534:(e,t,o)=>{o.d(t,{Sj:()=>r,n0:()=>i,vY:()=>s,xc:()=>a});var n=()=>o(508496);const r=5;function i(e){return"on"===n().default.getEligibleGroup({experimentId:"parallel_confluence_importer_via_api",defaultGroup:"control"})}function a(e){return n().default.getEligibleGroup({experimentId:"special_case_confluence_file_size",defaultGroup:r.toString()})}function s(e){return"on"===n().default.getEligibleGroup({experimentId:"migrate_confluence_into_teamspace",defaultGroup:"control"})}},654601:(e,t,o)=>{o.d(t,{X:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("sparkles",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.2757 4.82358C7.57934 4.71847 7.57934 4.53161 7.2757 4.41483L5.62905 3.78419C5.33709 3.67908 4.99842 3.3404 4.88164 3.03676L4.25101 1.39009C4.1459 1.08644 3.95905 1.08644 3.84226 1.39009L3.21163 3.03676C3.10653 3.32872 2.76786 3.6674 2.46422 3.78419L0.817572 4.41483C0.513934 4.51994 0.513934 4.70679 0.817572 4.82358L2.46422 5.45422C2.75618 5.55933 3.09485 5.898 3.21163 6.20165L3.84226 7.84832C3.94737 8.15196 4.13422 8.15196 4.25101 7.84832L4.88164 6.20165C4.98674 5.90968 5.32541 5.571 5.62905 5.45422L7.2757 4.82358ZM15.2991 10.5929C16.2334 10.3593 16.2334 9.9739 15.2991 9.74032L13.2321 9.22647C12.2978 8.9929 11.3402 8.03526 11.1066 7.10097L10.5928 5.03387C10.3592 4.09959 9.97382 4.09959 9.74025 5.03387L9.2264 7.10097C8.99283 8.03526 8.03521 8.9929 7.10094 9.22647L5.03387 9.74032C4.09961 9.9739 4.09961 10.3593 5.03387 10.5929L7.10094 11.1067C8.03521 11.3403 8.99283 12.2979 9.2264 13.2322L9.74025 15.2993C9.97382 16.2336 10.3592 16.2336 10.5928 15.2993L11.1066 13.2322C11.3402 12.2979 12.2978 11.3403 13.2321 11.1067L15.2991 10.5929Z"})})},656219:(e,t,o)=>{o.d(t,{A:()=>a,u:()=>r});const n=new(o(178624).R)({key:"property_groups_module_state",namespace:o(419494).Bq,important:!0,trackingType:"necessary"});function r(){return{propertyGroupOpenOverridesMap:{},...n.getState()}}class i extends(()=>o(757695))().default{setState(e){super.setState(e),n.setState(e)}setPropertyGroupExpandedOverride(e){var t;const{groupId:o,override:n}=e;this.setState({...this.state,propertyGroupOpenOverridesMap:{...null==this||null===(t=this.state)||void 0===t?void 0:t.propertyGroupOpenOverridesMap,[o]:n}})}getPropertyGroupExpandedOverride(e){var t;const{groupId:o}=e;return null==this||null===(t=this.state)||void 0===t||null===(t=t.propertyGroupOpenOverridesMap)||void 0===t?void 0:t[o]}isPropertyGroupExpanded(e){const{groupId:t}=e,o=this.getPropertyGroupExpandedOverride({groupId:t});return void 0===o||"open"===o}togglePropertyGroupExpanded(e){const{groupId:t}=e,o=this.isPropertyGroupExpanded({groupId:t})?"closed":"open";this.setPropertyGroupExpandedOverride({groupId:t,override:o})}}const a=new i},656432:(e,t,o)=>{o.d(t,{K:()=>a});o(581454);var n=()=>o(700500),r=()=>o(44729),i=()=>o(246826);function a(e){const{environment:t,stores:o,spaceId:a,transaction:s}=e;return o.map((e=>{const o=e.getType();if(o&&(n().Ib[o]||o===n().xd.file||o===n().xd.externalObjectInstance)){const o=i().Wv({environment:t,type:"page",inMemoryRecordCache:e.inMemoryRecordCache,transaction:s,spaceId:a});return r().NI({parentStore:o,childStore:e,transaction:s}),o}return e}))}},656633:(e,t,o)=>{o.d(t,{vp:()=>i});var n=()=>o(134217);const r={isSalesAssisted:void 0};function i(e,t){return r.isSalesAssisted??(0,n().e9)(e,t)}(0,o(466103).exposeDebugEnvironmentValue)("getAssistantOnboardingDebugInfo",(e=>()=>{const{currentUserSettingsStore:t,currentSpaceStore:n}=o(351360).default.state,r=null==t?void 0:t.getSettings();if(!r||!n)return;const{ai_qna_intro_onboarding_phase:a,ai_assistant_onboarding_phase:s,ai_assistant_onboarding_phase_last_set_at:l,ai_assistant_tooltips_onboarding_phase:c,ai_sales_assisted_extra_notification_seen_at:d,last_exposed_to_ai_qna_at:u,qna_reminders_shown_at:p}=r;return{isSalesAssisted:i(e,n.id),relevantUserSettings:{ai_qna_intro_onboarding_phase:a,ai_assistant_onboarding_phase:s,ai_assistant_tooltips_onboarding_phase:c,ai_assistant_onboarding_phase_last_set_at:l,ai_sales_assisted_extra_notification_seen_at:d,last_exposed_to_ai_qna_at:u,qna_reminders_shown_at:p}}}))},657202:(e,t,o)=>{o.d(t,{A:()=>u});var n=o(296540),r=()=>o(484714),i=()=>o(522419),a=()=>o(518646),s=()=>o(948914),l=()=>o(589994),c=()=>o(251126),d=o(474848);function u(e){const t=(0,r().v3)(),o=(0,n.useCallback)((async e=>i()._J(e.url)?(e.permissionRecord&&await l().transactionQueue.awaitRecordTransaction(e.permissionRecord),(0,a().k)(t,e,Boolean(s().A.state.isNotionProtocolBugFixed))):e.url),[t]);return(0,d.jsx)(c().A,{request:{url:e.url,permissionRecord:e.permissionRecord,useS3Url:e.useS3Url},performRequest:o,render:e.render})}},658883:(e,t,o)=>{function n(){return!1}function r(e){return"quickSearch"===e.RouterStore.state.route.name}o.d(t,{Y:()=>n,q:()=>r})},659026:(e,t,o)=>{o.d(t,{Nh:()=>n,bZ:()=>r,zg:()=>i});function n(e,t){return{x:e.x-t.x,y:e.y-t.y}}function r(e,t){return{x:e.x+t.x,y:e.y+t.y}}function i(){return{x:0,y:0}}(0,o(604341).exposeDebugValue)("Point",{pointMinus:n,pointPlus:r,pointZero:i})},659602:(e,t,o)=>{o.d(t,{g:()=>n});const n=new(o(645873).O2)("markdown-linkify-it",(async()=>{const[e,t]=await Promise.all([o.e(37353).then(o.t.bind(o,542922,23)),o.e(37353).then(o.t.bind(o,42833,23))]);return{MarkdownIt:e.default,LinkifyIt:t.default}}))},661077:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(757695).default.createValue(!0,{name:"IsAiEligibleStore"})},661179:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(757695).default.createValue(0)},661491:(e,t,o)=>{o.d(t,{kv:()=>c,l2:()=>l,qO:()=>s});var n=()=>o(644914),r=()=>o(712505),i=()=>o(478726),a=()=>o(747100);function s(e){let t=e;for(;t&&(!t||!t.isNavigableBlock());){if("column"===t.getType())return!0;t=t.getParentBlockStore()}return!1}function l(e,t){const{device:o}=t;if(o.isPhone)return!1;if((0,a().cq)(e)){if((0,i().mb)(e))return(0,n().Ql)(t)>r().SIDEPEEK_NO_COLUMN_WIDTH;if(r().default.isCenterPeekOpen())return(0,a().rc)(t)>r().SIDEPEEK_NO_COLUMN_WIDTH}return!0}function c(e,t){var o;return!t.device.isMobile&&(e.isType("column_list")&&e.isChildOfRecordStoreUIRoot()&&l(e,t)&&!(null!==(o=e.getParentBlockStore())&&void 0!==o&&o.isFullWidth())&&!(0,a().cq)(e))}},661920:(e,t,o)=>{o.d(t,{Cx:()=>B,DN:()=>M,Ey:()=>N,VN:()=>E,YH:()=>D,ho:()=>T,nJ:()=>P});o(944114);var n=()=>o(584262),r=()=>o(868840),i=()=>o(120739),a=()=>o(427704),s=()=>o(421107),l=()=>o(193513),c=()=>o(186445),d=()=>o(492414),u=()=>o(770906),p=()=>o(441199),m=()=>o(869562),g=()=>o(749687),f=()=>o(351360),v=()=>o(732770),h=()=>o(712505),_=()=>o(871399),b=()=>o(502438),y=()=>o(24157),S=()=>o(645302),w=()=>o(741496),k=()=>o(722101),I=()=>o(5705),A=()=>o(435009),x=()=>o(317909),C=()=>o(345913);function T(e,t){const{mode:o}=t,n=e.WindowSizeStore.state.width,i=h().default.state.preferredSidePeekWidth||n/2;h().default.update((e=>({...e,open:!0,preferredSidePeekWidth:Math.min(i,n*(2/3)),isOpening:!e.open,isClosing:!1,...t}))),o===r().A&&m().toggleLeftSidebarByWindowSize(e),p().default.isVisible()&&u().VI({environment:e,autoClose:!0})}function M(e){const{resultsStore:t,collectionContextStore:o,pageVisitSource:n}=e;null==o||o.searchOpenStore.setState(!1),h().default.setState({...h().default.state,resultsStore:t,collectionContextStore:o,pageVisitSource:n})}function P(e){(h().default.isSidePeekOpen()||h().default.isCenterPeekOpen())&&R(e)}function B(e){h().default.isSidePeekOpen()&&R(e)}function R(e){c().RR.state&&!v().A.state.isKeyboardMode||_().default.state.isOpen&&_().default.state.menuIsOpen||b().default.isSelected()||y().default.hasSelection()||E({environment:e,from:"empty_space_click"})}function E(e){let{environment:t,from:o,preventAnimation:r=!1,pageSource:l}=e;const c=h().default.state;if(!c.open||c.isClosing)return;h().default.isSidePeekOpen()&&!r&&h().default.setState({...c,isClosing:!0});const{mode:u,targetStore:p,showMoveTo:m,collectionContextStore:v,savedSelectionStoreState:_,savedTableSelectionStoreState:y,savedSidebarExpandedStoreState:T}=c;let M;p.canEdit()&&(M=function(e){const{environment:t,blockStore:o,showMoveTo:n}=e,r=o.getContentStores(),i=1===r.length?r[0]:void 0,a=i&&i.isEmptyEditableBlock()&&"ai_block"!==i.getType(),s=n&&o.isEmptyTitle()&&(o.isEmptyPage()||a);return!(!s&&!a)&&(x().createAndCommit({userAction:"PeekRenderer.close",environment:t,canUndo:!0,perform:e=>{s?(C().oD({environment:t,blocks:[o],transaction:e}),e.postSubmitCallbacks.push((e=>{e||(0,w().N)(t,{analyticsName:"delete",from:"peek_actions",block_id:o.id,block_type:"page"})}))):a&&k().TF({parentStore:o.getContentStore(),childToRemoveStore:i,transaction:e})}}),s||!1)}({environment:t,blockStore:p,showMoveTo:m})),o&&"side_peek"===u&&S().cf(t,{from:o}),S().Zh(t,{peek_mode:u,from:o,target_page_id:p.id,target_parent_id:p.getParentId(),page_source:l,should_delete:M}),I().If(t,u),I().b$(t),I().aD(t),b().default.setState({...b().default.state,..._}),y.isActive&&s().A.setState(y),T&&g().sidebarExpandedStore.setState(!0);const{mainEditorCurrentBlockStore:P}=f().default.state,B=t.RouterStore.state.route;if(null!=v&&v.searchQueryStore.state&&(null==v||v.searchOpenStore.setState(!0)),P&&"page"===B.name){const e=(0,d().Ay)({store:P,fullyQualified:!1,scrollToBlockId:B.scrollToBlockId,collectionViewId:B.collectionViewId,discussionId:B.discussionId,showMoveTo:B.showMoveTo,saveParent:B.saveParent,pageVisitSource:n().y8.PeekClose});A().oo({environment:t,url:e})}else"chat"===B.name?A().oo({environment:t,url:a().JZ.chat}):"team"===B.name?A().oo({environment:t,url:(0,i().a)({teamId:B.teamId})}):"marketplace"===B.name&&A().oo({environment:t,url:a().JZ.marketplace})}function D(){const e=h().default.state;e.open&&!e.isClosing&&h().default.setState({...e,open:!1,resultsStore:void 0,collectionContextStore:void 0,topHoverAreaEntered:!1})}function N(e){const{collectionContextStore:t,resultsStore:o}=e;(0,l().r)(t)||M({collectionContextStore:t,resultsStore:o,pageVisitSource:void 0})}},662453:(e,t,o)=>{o.d(t,{H7:()=>i,X9:()=>a,ZT:()=>s,aiDependency:()=>r});var n=()=>o(645873);const r=new(n().O2)("ai",(()=>Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(5053)]).then(o.bind(o,31994)))),i=(0,n()._h)(r,(e=>e.CompletionPopup)),a=(0,n()._h)(r,(e=>e.PopupPositionerLocater)),s=(0,n()._h)(r,(e=>e.AiEligibilityUpdater))},662971:(e,t,o)=>{o.d(t,{A:()=>g});var n=o(296540),r=()=>o(962730),i=()=>o(377586);const a=function(){const[e,t]=n.useState({x:0,y:0});return n.useEffect((()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]),e};var s=o(474848);function l(e){let{x:t,mouseX:o}=e;return o>t?void 0:-Math.max(t-o,10)+"px"}function c(e){let{x:t,width:o,mouseX:n}=e;return n>t?-Math.max(n-(t+o),10)+"px":void 0}function d(e){let{x:t,width:o,mouseX:n}=e;return n>t?`${Math.max(n-(t+o),10)}px`:`${Math.max(t-n,10)}px`}function u(e){let{x:t,y:o,height:n,mouseX:r,mouseY:i}=e;return r>t?`polygon(0% 0%, 0% 100%, 100% ${100*(i-o)/n}%)`:`polygon(100% 0%, 0% ${100*(i-o)/n}%, 100% 100%)`}function p(e){const{x:t=0,y:o=0,height:r=0,width:i=0}=e.el.getBoundingClientRect()||{},{x:p,y:m}=a(),g={x:t,y:o,height:r,width:i,mouseX:p,mouseY:m},f=(0,n.useRef)(null),v=n.useCallback((e=>{if(f.current){f.current.style.pointerEvents="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(f.current.style.pointerEvents="auto",t){const o=new MouseEvent(e.nativeEvent.type,e.nativeEvent);t.dispatchEvent(o)}}}),[]),h={right:c(g),left:l(g),height:r,width:d(g),clipPath:u(g)};return(0,s.jsx)("div",{ref:f,onClick:v,style:{cursor:"pointer",position:"absolute",pointerEvents:"auto",top:0,...h}})}function m(e,t){let{onClick:a,renderOrigin:l,renderExtension:c,allowOptionalExtensionMenu:d,...u}=e;const{disableDefaultClick:m,onFocus:g,focused:f,openOnFocus:v,placementToOrigin:h,alignmentToOrigin:_,disableCloseOnEnter:b}=u,{isMobile:y}=(0,o(484714).Y0)(),S=(0,o(722872).Tf)(),[w,k]=(0,n.useState)(!1),I=(0,n.useRef)(null),A=(0,n.useRef)(null),x=(0,n.useRef)(null),C=(0,n.useRef)(null),T=(0,n.useCallback)((()=>{x.current&&window.clearTimeout(x.current),C.current&&window.clearTimeout(C.current),x.current=null,C.current=null}),[]),M=(0,n.useCallback)((()=>{T(),w||k(!0)}),[w,T]),P=(0,n.useCallback)((()=>{T(),w&&k(!1)}),[w,T]),B=(0,n.useCallback)((e=>{T(),w||(e&&e.preventDefault&&e.preventDefault(),x.current=window.setTimeout(M,120))}),[w,T,M]),R=(0,n.useCallback)((()=>{T(),w&&(C.current=window.setTimeout(P,100))}),[w,P,T]),E=(0,n.useCallback)((e=>{g(),M(),d&&(null==a||a(e),P())}),[g,M,d,a,P]),D=(0,n.useCallback)((()=>{B()}),[B]),N=(0,n.useCallback)((()=>{g(),B()}),[g,B]),L=(0,n.useCallback)((e=>{if(y)return;const t=I.current;w&&t&&!t.contains(e.target)&&P()}),[w,P,y]),F=(0,n.useCallback)((e=>{13===e.keyCode&&w&&!b&&P()}),[w,P,b]);(0,n.useEffect)((()=>{if(!Boolean(m))return window.addEventListener("click",L),()=>{window.removeEventListener("click",L)}}),[m,L]),(0,n.useEffect)((()=>(window.addEventListener("keydown",F),()=>{window.removeEventListener("keydown",F)})),[F]);const U=(0,n.useRef)(f);(0,n.useEffect)((()=>{v&&!U.current&&f?B():!f&&U.current&&R(),U.current=f}),[f,v,B,R]);const O=(0,o(401497).IS)((e=>({mobilePopupStyle:{borderRadius:12,backgroundColor:e.surface.wash}})),[]),V={...(0,o(553965).A)({onMouseEnter:D,onClick:E},u),showExtensionArrow:!0};return(0,s.jsx)(o(545805).A,{debugName:"ExtensionMenuItem",capture:f,onEnter:w?void 0:B,onRight:B,onLeft:w?R:void 0,onEsc:w?R:void 0,children:(0,s.jsx)(o(14235).Ay,{popupType:y?S?i().n.BottomSheet:i().n.SlideUp:i().n.Popup,open:w,origin:l(V,t),placementToOrigin:h??r().W.Right,alignmentToOrigin:_??r().C.Center,originGap:0,disableMouseCapture:!0,preventBlockRenderQueueOnEnter:!0,preventScaleTransition:!y,preventCaptureEsc:!0,ref:I,render:()=>(0,s.jsxs)(s.Fragment,{children:[!y&&A.current?(0,s.jsx)(p,{el:A.current}):null,(0,s.jsx)("div",{ref:A,style:{height:"100%"},children:c({onMouseEnter:N},{close:R})})]}),style:{overflow:"visible",...y&&O.mobilePopupStyle},trapFocus:!0,onDismiss:P})})}const g=n.forwardRef(m)},663038:(e,t,o)=>{function n(e){const{unicode:t,fallback:o}=e;try{return t()}catch(n){return o}}o.d(t,{D$:()=>a,F:()=>n,Yv:()=>s});const r=n({unicode:()=>/\p{L}/u,fallback:/[a-zA-Z]/}),i=n({unicode:()=>/\p{Z}/u,fallback:/\s/});function a(e){return r.test(e)}function s(e){return i.test(e)}},663173:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isLoading:!1,progressPercent:0}}}const r=n},663325:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(757695).default.createValue(void 0,{name:"TeamHighlightStore"})},663590:(e,t,o)=>{o.d(t,{FI:()=>i,hK:()=>a,sh:()=>r});var n=()=>o(508496);function r(e){const t=(null==e?void 0:e.disableLogging)??!1;return"on"===n().default.getEligibleGroup({experimentId:"share_menu_searchable_toggle",defaultGroup:"control",disableExposureLogging:t})}function i(e){const t=(null==e?void 0:e.disableLogging)??!1;return"on"===n().default.getEligibleGroup({experimentId:"share_menu_cleanup_experiment_v2",defaultGroup:"control",disableExposureLogging:t})}function a(){return n().default.checkGate({gateName:"share_menu_cleanup_ga"})}},663999:(e,t,o)=>{o.d(t,{c:()=>r});var n=()=>o(292588);const r={table:o(437607).n,recordColumnTypes:{id:n().A.String,version:n().A.Number,last_version:n().A.Number,name:n().A.String,icon:n().A.String,space_id:n().A.UUID,group_id:n().A.UUID,created_by_id:n().A.UUID,created_by_table:n().A.String,created_at:n().A.Number,last_edited_by_table:n().A.String,last_edited_by_id:n().A.UUID,last_edited_at:n().A.Number,deleted_at:n().A.Number},metaColumnTypes:{meta_user_id:n().A.UUID,meta_role:n().A.String}}},664133:(e,t,o)=>{o.d(t,{i5:()=>P,jh:()=>R,ol:()=>M,zo:()=>B});o(898992),o(672577),o(803949);var n=()=>o(66689),r=()=>o(148307),i=()=>o(651124),a=()=>o(857639),s=()=>o(919709),l=()=>o(959013),c=()=>o(496603),d=()=>o(901389),u=()=>o(313892),p=()=>o(601734),m=()=>o(989423),g=()=>o(974233),f=()=>o(866042),v=()=>o(972435),h=()=>o(437622),_=()=>o(351360),b=()=>o(666803),y=()=>o(630116),S=()=>o(404141),w=()=>o(988499),k=()=>o(449506),I=()=>o(496414),A=()=>o(246826),x=()=>o(317909),C=()=>o(633457);const T=(0,l().YK)({JiraAuthorizationError:{id:"jiraImport.unauthorizedAccess",defaultMessage:"Unauthorized Error: API key does not belong to Jira Admin."},JiraAuthenticationSuccess:{id:"jiraImport.successfulAuth",defaultMessage:"Successfully established Jira connection"},JiraAuthenticationInvalidDetails:{id:"jiraImport.invalidDetails",defaultMessage:"Invalid Details"},TasksCollectionName:{defaultMessage:"Issues",id:"appTemplates.tasks.issuesDatabaseName"},JiraFetchAccountError:{id:"jiraSync.setup.fetchAccountError.message",defaultMessage:"Failed to fetch accounts"}});async function M(e){const{environment:t,userEmail:o,spaceId:n,flowId:r,instance:i,authInfo:s}=e;(0,m().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_initiated",flowId:r}}});try{var u;const a=e.site.replace(/\/+$/,"");if(!t.currentUser.id)return d().rG({message:v().A.formatMessage(T.JiraAuthenticationInvalidDetails)}),void I().V();let f;if("Basic"===s.authType&&"instance"in s&&"DataCenter"===s.instance)f=await k().callApi({eventName:"authenticateJiraUser",environment:t,data:{userEmail:o,site:a,userId:t.currentUser.id,spaceId:n,instance:i,username:s.username,password:s.password,authType:s.authType}});else{if(!("apiKey"in s))return;f=await k().callApi({eventName:"authenticateJiraUser",environment:t,data:{userEmail:o,site:a,apiKey:s.apiKey,userId:t.currentUser.id,spaceId:n,instance:i}})}if(await C().oX({environment:t}),(0,m().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_status",flowId:r,status:"success"===f.type&&null!==(u=f)&&void 0!==u&&null!==(u=u.data)&&void 0!==u&&u.isAdmin?"success":"failed"}}}),"failed"===f.type){const e=(0,g().V)(f);console.error(f.error);const t=b().Ay.getInitialState();b().Ay.setState(t);const o=(0,l().YK)({dismissButtonLabel:{defaultMessage:"OK",id:"dialog.dismissButton.label"}});d().ui({message:e,showCancel:!1,keepFocus:!1,items:[{label:v().A.formatMessage(o.dismissButtonLabel),onAccept:c().D_}]})}else{var p;if(null!==(p=f)&&void 0!==p&&null!==(p=p.data)&&void 0!==p&&p.isAdmin){b().Ay.setState({...b().Ay.state,type:"teamspace-selection",open:!0,flowId:r,site:a,botId:f.data.botId}),(0,m().u4)({environment:t,event:{eventName:"external_sync_teamspace_selection",eventProperties:{integration:"jira",actionType:"teamspace_modal_render",flowId:r}}});const e=S().A.getInitialState();S().A.setState(e)}else b().Ay.setState({...b().Ay.state,type:"auth",open:!0,adminTokenError:!0,flowId:r,site:void 0}),(0,m().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_render",flowId:r}}})}I().V()}catch(f){(0,m().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_status",flowId:r,status:"failed"}}}),a().log({level:"error",from:"jiraActions",type:"authenticateWithJira",data:{message:"Failed to authenticate with Jira",miscDataToConvertToString:{err:f}}})}}async function P(e){let{environment:t,selectedTeamspaceId:o,siteUrl:l,botId:c,instanceType:d}=e;try{const{appTemplatesSetupActions:e,appConfigs:a}=await p().Aw.load(),{teams:m}=w().A.getState(),{currentSpaceStore:g,currentSpaceViewStore:f}=_().default.getState(),h=o?m.find((e=>e.id===o)):g;if(!f||!h)return;const{serverCommitResult:b,performResult:S}=x().createAndCommit({environment:t,perform:o=>{var r;const i={type:"preset",uri:n().tP}.uri,s=null===(r=(0,u().BL)(a(),i))||void 0===r?void 0:r.uri;if(!s)return;const l=a().find((e=>e.uri===s));if(null==l?void 0:l.presets.find((e=>e.uri===i))){return e.initializeApp({environment:t,spaceViewStore:f,appParentStore:h,appUri:s,presetUri:i,transaction:o,from:"jira_import"})}return[]},canUndo:!0,userAction:"importActions.importJira"}),k=t.defaultRecordCache.inMemoryRecordCache;return await b,null==S||S.forEach((e=>{const o=e.getFormat(),a=null==o?void 0:o.collection_pointer;if(a){const e=k.getRecord({pointer:a,userId:t.currentUser.id});e&&e.value&&x().createAndCommit({userAction:"jiraActions.updateFormatForCollections",environment:t,canUndo:!0,perform:o=>{const u=e.value,p=null==u?void 0:u.format;if(p){p.external_collection_type=i().uO.Jira,p.synced_collection_external_url=l,p.synced_collection_instance_type=d,p.bot_id=c,u.icon=p.app_config_uri===n().dC?r().A.images.appPackages.jiraTaskIconSvg:r().A.images.appPackages.jiraProjectIconSvg;const e=new(y().md)(t,a);p.app_config_uri===n().dC&&(u.name=(0,s().x9d)(v().A.formatMessage(T.TasksCollectionName))),A().zv({store:e,data:u,transaction:o})}}})}})),null==S?void 0:S.find((e=>{var t;return(null===(t=e.getFormat())||void 0===t?void 0:t.app_config_uri)===n().bq}))}catch(m){return void a().log({level:"error",from:"jiraActions",type:"projectPageNotCreated",data:{message:"Error while creating project page for Jira sync",miscDataToConvertToString:{error:m}}})}}function B(e){const t=b().Ay.state.spaceId;if(e.spaceId!==t){const t=b().Ay.getInitialState();t.spaceId=e.spaceId,b().Ay.setState(t)}}async function R(e){var t;const{environment:o,from:n,action:r}=e,{currentSpaceStore:i,currentUserSettingsStore:s}=_().default.state;if(!i)return;const l=b().Ay.getFlowId(),c=(0,h().p4)(i);if(!(void 0!==(null==s||null===(t=s.getSettings())||void 0===t?void 0:t.jira_sync_guide_dismissed_at))&&c)return void("collection_header"===n||"improve_jira_sync_popup"===n?(b().Ay.setState({...b().Ay.state,rootAction:r,type:"improve-jira-sync",open:!0}),(0,m().u4)({environment:o,event:{eventName:"external_sync_setup_action",eventProperties:{integration:"jira",actionType:"improve_jira_sync_modal_render",flowId:l}}})):(b().Ay.setState({...b().Ay.state,rootAction:r,type:"sync-guide",open:!0}),(0,m().u4)({environment:o,event:{eventName:"external_sync_setup_action",eventProperties:{integration:"jira",actionType:"sync_guide_render",flowId:l}}})));let d=(await(0,f().D1)(o,i.id)).account;d||(d=[],a().log({level:"debug",from:"jiraActions",type:"setupJiraSync",data:{miscDataToConvertToString:{spaceId:i.id}}}));const u=b().Ay.state.rootAction;!d.length||"add_account"===r||"sync_guide"===n&&"add_account"===u?c?(b().Ay.setState({...b().Ay.state,type:"auth",open:!0}),(0,m().u4)({environment:o,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_render",flowId:l}}})):(b().Ay.setState({...b().Ay.state,type:"request-feature",open:!0}),(0,m().u4)({environment:o,event:{eventName:"external_sync_setup_action",eventProperties:{integration:"jira",actionType:"request_feature_render",flowId:l}}})):(b().Ay.setState({...b().Ay.state,type:"teamspace-selection",open:!0}),(0,m().u4)({environment:o,event:{eventName:"external_sync_teamspace_selection",eventProperties:{integration:"jira",actionType:"teamspace_modal_render",flowId:l}}}))}},664565:(e,t,o)=>{o.d(t,{j:()=>r});var n=o(296540);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const[o,r]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{r(!1)}),[...t]),(0,n.useEffect)((()=>{const t=setTimeout((()=>{r(!0)}),e);return()=>{clearTimeout(t)}})),o}},664713:(e,t,o)=>{o.d(t,{C:()=>h,v:()=>v});o(16280),o(581454);var n=()=>o(763884),r=()=>o(921997),i=()=>o(386164),a=()=>o(388821),s=()=>o(179034),l=()=>o(496603),c=()=>o(763824),d=()=>o(870618),u=()=>o(303626),p=()=>o(941541),m=()=>o(90873),g=()=>o(449506),f=()=>o(666144);async function v(e){const{environment:t,userId:o,spaceId:n}=e,i=(0,r().Rs)({userId:o,spaceId:n});if(!y||y!==i){let o;!function(e){b&&p().Ay.removeListener(b,e)}(t);const n=(t,n)=>{void 0!==o&&o!==n&&h(e),o=n},r=l().nF(n,5e3);b=p().Ay.addListener(i,void 0,r,void 0,t),y=i;if(!m().A.getSharedPagesState(e))return h(e)}}async function h(e){const{environment:t,userId:o,spaceId:r}=e,l=m().A.getSharedPagesState(e);if(l&&l.loadingDone)return l.loadingDone;const p=(0,c().yX)();m().A.setSharedPagesState({spaceId:r,userId:o,state:{currentPageIds:null==l?void 0:l.currentPageIds,loadingDone:p.promise}});try{const l=async function*(e,t,o){try{const o=await u().N.measure("loadUserSharedPages","(current user)",(()=>async function(e,t){const{id:o}=e.currentUser;if(!o)throw new Error("Must be logged in.");if(!e.defaultRecordCache.persistedRecordCache)throw new Error("No local database found.");const r=n().A.get({userId:o,key:_({userId:o,spaceId:t.spaceId})})||void 0;if(!r)throw new Error("No local shared pages found.");const i=await d().ww({environment:e,recordPointers:r.map((e=>({table:s().ev,id:e}))),recurFn:()=>[],recordIsRequired:()=>!1});return{pages:r,recordMap:i.toJson()}}(e,{spaceId:t})));f()._O({environment:e,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,recordMap:a().RecordMapWithRole.create(o.recordMap),debugSource:"loadUserSharedPagesInSpace"}),yield o}catch(l){}const r=await g().callApi({eventName:"getUserSharedPagesInSpace",environment:e,data:{spaceId:t},userId:o,headers:(0,i().WS)({cellId:void 0,recordId:void 0,spaceId:t})});"success"===r.type&&(e.defaultRecordCache.persistedRecordCache&&n().A.set({userId:e.currentUser.id,key:_({userId:o,spaceId:t}),value:r.data.pages}),yield r.data)}(t,r,o);for await(const e of l)m().A.setSharedPagesState({spaceId:r,userId:o,state:{currentPageIds:e.pages,loadingDone:p.promise}});const c=m().A.getSharedPagesState(e);c&&c.currentPageIds?m().A.setSharedPagesState({spaceId:r,userId:o,state:{currentPageIds:c.currentPageIds,loadingDone:void 0}}):m().A.setSharedPagesState({spaceId:r,userId:o,state:void 0})}catch(v){m().A.setSharedPagesState({spaceId:r,userId:o,state:void 0})}}function _(e){return`UserSharedPagesInSpace:${e.userId}:${e.spaceId}`}let b,y},665589:(e,t,o)=>{o.d(t,{l:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M5.393 6.022a.625.625 0 0 1 0 .884L2.925 9.375h5.66a.625.625 0 0 1 0 1.25h-5.66l2.468 2.469a.625.625 0 0 1-.884.883L.974 10.442a.625.625 0 0 1 0-.884l3.535-3.536a.625.625 0 0 1 .884 0m6.026 3.353a.625.625 0 1 0 0 1.25h5.648l-2.469 2.469a.625.625 0 1 0 .884.883l3.535-3.535a.625.625 0 0 0 0-.884l-3.535-3.536a.625.625 0 0 0-.884.884l2.469 2.469z"})},r=(0,o(340498).wt)("arrowExpandHorizontal",n)},666144:(e,t,o)=>{o.d(t,{BB:()=>C,IL:()=>M,PC:()=>I,_O:()=>A,b4:()=>B,oX:()=>T,sy:()=>x});o(581454);var n=()=>o(792071),r=()=>o(68263),i=()=>o(179034),a=()=>o(96689),s=()=>o(84520),l=()=>o(798880),c=()=>o(294712),d=()=>o(495989),u=()=>o(870723),p=()=>o(919709),m=()=>o(545285),g=()=>o(745875),f=()=>o(763824),v=()=>o(534177),h=()=>o(989423),_=()=>o(907828),b=()=>o(245865),y=()=>o(227440),S=()=>o(508496),w=()=>o(589994),k=()=>o(276470);function I(e){const{environment:t,pointer:o,userId:n,inMemoryRecordCache:u,model:f,role:v,force:y,maybeStaleRecordMap:w,updatePaths:k,debugSource:I}=e;"block"===o.table&&(0,_().setBlockIdDebugSource)(o.id,I);const A=n||t.currentUser.id,x=null==f?void 0:f.getVersion(),C=u.getRole({pointer:o,userId:A}),T=u.getVersion({pointer:o,userId:A}),M="number"==typeof x&&x>T;if(!(y||M||void 0!==v&&C!==v))return;let B=f;if(!y&&!M&&function(e){const{oldRole:t,newRole:o}=e;if(!o||!r().Tt(o))return!1;if(t&&!r().p2(t))return!1;return!0}({oldRole:C,newRole:v})){const e=u.getRecordModel({pointer:o,userId:A});e&&(B=e)}u.setModelAndRole({pointer:o,userId:A},B,v);for(const r of k)u.emitRecord(o,r);S().default.checkGate({gateName:"in_memory_cache_logging"})&&(0,g().rQ)(1)&&(0,h().u4)({environment:t,event:{eventName:"in_memory_cache_update",eventProperties:{size:u.size}}});const R=t.defaultRecordCache.persistedRecordCache;if(!u.isTemporaryData&&R&&(0,m().u)(o)){const e=B?B.__IM_SORRY__getValue():void 0;if(o.table===i().ev&&e){const t=e;t.properties&&t.properties.title&&(t.properties.title=t.properties.title.map((e=>p().x9_(e))))}const n=function(e){const{environment:t,pointer:o,model:n,role:i}=e,{id:u}=t.currentUser,p=o.table===l().oo||o.table===c().GD||o.table===d().xM;if(p&&u===o.id)return P.LoggedInUser;if((null==n?void 0:n.table)===s().mu&&n.parent_id===u)return P.JoinedSpace;if(o.table===a().NX&&(0,r().DH)(i))return P.JoinedSpace;return}({environment:t,pointer:o,model:B,role:v}),u={value:e,role:v};R.set({pointer:o,value:u,importance:n,userId:A,maybeStaleRecordMap:w})}u===t.defaultRecordCache.inMemoryRecordCache&&b().unsubscribeAfterDelay({pointer:o,userId:A,environment:t})}async function A(e){const{environment:t,userId:o,recordMap:r,inMemoryRecordCache:i,force:a,maybeStaleRecordMap:s,debugSource:l}=e,c=t.defaultRecordCache.persistedRecordCache;await(0,f().lX)(r,100,(async e=>{let{pointer:r,model:d,role:u}=e,p=d,g=u;if(w().transactionQueue.isPendingTransactionForRecord(r)&&c&&(0,m().u)(r)){const e=await c.get({pointer:r,userId:o||t.currentUser.id});e&&(p=n().Bj6.fromValue(r.table,e.value),g=u)}I({environment:t,inMemoryRecordCache:i,pointer:r,userId:o,model:p,role:g,updatePaths:[[]],force:a,maybeStaleRecordMap:s,debugSource:l})}))}async function x(e){const{inMemoryRecordCache:t,pointer:o,userId:r,environment:i,minimumVersion:a}=e,s=S().default.checkGate({gateName:"record_cache_backfill_space_id"}),l=w().transactionQueue.isPendingTransactionForRecord(o),c=i.defaultRecordCache.persistedRecordCache;if(l&&c&&(0,m().u)(o))return await c.get({pointer:o,userId:r});let d;const p=c&&(0,m().u)(o)?c.get({pointer:o,userId:r}):void 0;if(p){const e=await(0,f().nQ)(function(e){switch(e.device.platform){case"browser":switch(e.device.os){case"mac":return 172;case"windows":return 250;case"android":return 0;case"ios":return 360;case"chrome":return 238;case"linux":return 220}return 200;case"electron":return 1/0;case"react-native":switch(e.device.os){case"android":return 270;case"ios":return 64}return 102}}(i),p);e.timeout||(d=e.result),e.timeout&&!y().A.state.online&&(d=await p),d&&I({environment:i,inMemoryRecordCache:t,pointer:o,userId:r,model:n().Bj6.fromValue(o.table,d.value),role:d.role,updatePaths:[[]],debugSource:"refreshAndReturnRecord (localResult)"})}if(!y().A.state.online)return d&&S().default.checkGate({gateName:"record_map_logging"})&&(0,h().u4)({environment:i,event:{eventName:"refresh_and_return_record.use_local",eventProperties:{}}}),d;let g;try{const e=t.getEntryWithBackfilledSpaceId({pointer:o,userId:r}),l=e?e.value:void 0,c=e?e.pointer:void 0;if(a&&null!=l&&l.value&&(null==l?void 0:l.value.version)>=a)return S().default.checkGate({gateName:"record_map_logging"})&&(0,h().u4)({environment:i,event:{eventName:"refresh_and_return_record.use_local",eventProperties:{}}}),l;const m=(0,v().O9)(c)?{...c}:{...o},f=null==l?void 0:l.value;s&&void 0===m.spaceId&&c&&((0,u().RP)(c)||(0,u().kW)(c.table))&&f&&"space_id"in f&&"string"==typeof f.space_id&&(m.spaceId=f.space_id);let b=!1;try{g=await(0,k().e)(i,{userId:r,version:l&&l.value&&l.value.version?l.value.version:-1,pointer:m,shouldThrowError:!0})}catch(_){b=!0}g&&I({environment:i,inMemoryRecordCache:t,pointer:o,userId:r,model:n().Bj6.fromValue(o.table,g.value),role:g.role,updatePaths:[[]],debugSource:"refreshAndReturnRecord (remoteResult)"}),b&&(d||(d=await p,d&&I({environment:i,inMemoryRecordCache:t,pointer:o,userId:r,model:n().Bj6.fromValue(o.table,d.value),role:d.role,updatePaths:[[]],debugSource:"refreshAndReturnRecord (localResult)"})))}catch(b){console.error(b)}return S().default.checkGate({gateName:"record_map_logging"})&&(g?(0,h().u4)({environment:i,event:{eventName:"refresh_and_return_record.use_remote",eventProperties:{}}}):d&&(0,h().u4)({environment:i,event:{eventName:"refresh_and_return_record.use_local",eventProperties:{}}})),g||d}async function C(e){const{inMemoryRecordCache:t,pointer:o,userId:r,environment:i}=e,{defaultRecordCache:a}=i,s=await(0,k().e)(i,{pointer:o,userId:r,version:-1});s&&(T({environment:i,inMemoryRecordCache:t,persistedRecordCache:a.persistedRecordCache,pointer:o,userId:r}),I({environment:i,inMemoryRecordCache:t,pointer:o,userId:r,model:n().Bj6.fromValue(o.table,s.value),role:s.role,updatePaths:[[]],debugSource:"forceFetchRemoteRecord"}))}function T(e){const{inMemoryRecordCache:t,persistedRecordCache:o,pointer:n,userId:r}=e;t.deleteRecord({pointer:n,userId:r}),t.emitRecord(n,[]),o&&(0,m().u)(n)&&o.deleteRecord(n,r)}function M(e){const t=e.defaultRecordCache.inMemoryRecordCache;for(const{pointer:o}of t.data)b().unsubscribeForAllUsers({pointer:o,environment:e});t.clearCache()}const P={LoggedInUser:100,JoinedSpace:50};function B(e,t){let o=0,n=0,r=0;for(const{pointer:i,model:a}of t){if(!a)continue;const t=e.defaultRecordCache.inMemoryRecordCache.hasRecordWithVersion({pointer:i,userId:e.currentUser.id},a.getVersion());!t&&e.defaultRecordCache.inMemoryRecordCache.hasRecord({pointer:i,userId:e.currentUser.id})?n++:t&&o++,r++}return{num_records:r,num_cached_records:o,num_stale_records:n}}},666429:(e,t,o)=>{o.d(t,{Ay:()=>a,LX:()=>r,ey:()=>n});const n=5e3,r=1e4;class i extends(()=>o(757695))().default{getInitialState(){return{currentItem:void 0,shouldReset:!0}}}const a=new i},666710:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{selectableRectMap:new Map,selectableContainerRectMap:new Map,selectableElementRectMap:new Map,lastUpdate:0}}hasBeenUpdatedSince(e){return this.state.lastUpdate>e}}const r=new n;(0,o(604341).exposeDebugValue)("SelectableRectStore",r);const i=r},666803:(e,t,o)=>{o.d(t,{Ay:()=>s,XT:()=>r,cK:()=>n});let n=function(e){return e.Cloud="Cloud",e.DataCenter="DataCenter",e}({}),r=function(e){return e.Basic="Basic",e.Bearer="Bearer",e}({});class i extends(()=>o(757695))().default{getInitialState(){return{open:!1,loading:!1,adminTokenError:!1,site:void 0,flowId:void 0,botId:void 0,defaultExternalCollectionSetting:void 0,spaceId:void 0,teamSpaceId:void 0,projectKeys:[],instanceValue:n.Cloud,isMemberAuthSuccessForDataCenter:!1,authenticationType:r.Bearer,notionState:void 0}}createNewFlowId(){const e=(0,o(206267).JW)();return this.setState({...this.state,flowId:e}),e}getFlowId(){return this.state.flowId?this.state.flowId:this.createNewFlowId()}}const a=new i,s=a;(0,o(604341).exposeDebugValue)("jiraImportStore",a)},667019:(e,t,o)=>{o.d(t,{W:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{hoveredEditId:void 0}}getHoveredEditId(){var e;return null===(e=this.state)||void 0===e?void 0:e.hoveredEditId}}const r=new n},667925:(e,t,o)=>{o.d(t,{hs:()=>Ye,ry:()=>$e,h_:()=>Ge,Vg:()=>He});o(898992),o(672577),o(737550);var n=()=>o(908006),r=()=>o(148307),i=()=>o(700500),a=(o(296540),()=>o(340498)),s=o(474848);const l=(0,a().wt)("audioBlock",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{fillRule:"evenodd",d:"M8.897 3.238c.798-.746 2.103-.18 2.103.913v11.697c0 1.094-1.305 1.66-2.103.914L5.673 13.75H2.75A.75.75 0 012 13V7a.75.75 0 01.75-.75h2.923l3.224-3.012zm.603 1.49l-3.02 2.82a.75.75 0 01-.511.202H3.5v4.5h2.469a.75.75 0 01.512.202l3.019 2.82V4.728z",clipRule:"evenodd"}),(0,s.jsx)("path",{d:"M12.77 6.424a.75.75 0 011.056.096 5.436 5.436 0 010 6.96.75.75 0 11-1.152-.96 3.936 3.936 0 000-5.04.75.75 0 01.096-1.056z"}),(0,s.jsx)("path",{d:"M16.364 4.57a.75.75 0 10-1.228.86 7.969 7.969 0 010 9.14.75.75 0 001.228.86 9.469 9.469 0 000-10.86z"})]})}),c=(0,a().wt)("bookmarkBlock",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M13.75 1.5a2.75 2.75 0 012.75 2.75v11.305c0 1.501-1.766 2.306-2.898 1.32L10 13.745l-3.602 3.132c-1.132.985-2.898.18-2.898-1.32V4.25A2.75 2.75 0 016.25 1.5h7.5zM15 4.25C15 3.56 14.44 3 13.75 3h-7.5C5.56 3 5 3.56 5 4.25v11.305c0 .215.252.33.414.189l4.094-3.56a.75.75 0 01.984 0l4.094 3.56a.25.25 0 00.414-.189V4.25z",clipRule:"evenodd"})}),d=(0,a().wt)("bulletedList",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M6.5 6A1.75 1.75 0 113 6a1.75 1.75 0 013.5 0zm3-.75a.75.75 0 000 1.5H17a.75.75 0 000-1.5H9.5zm0 8a.75.75 0 000 1.5H17a.75.75 0 000-1.5H9.5zm-4.75 2.5a1.75 1.75 0 100-3.5 1.75 1.75 0 000 3.5z"})}),u=(0,a().wt)("callout",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M7 6.3h6a.7.7 0 01.7.7v1a.7.7 0 11-1.4 0v-.3h-1.6v4.6h.2a.7.7 0 110 1.4H9.1a.7.7 0 110-1.4h.2V7.7H7.7V8a.7.7 0 11-1.4 0V7a.7.7 0 01.7-.7z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.074 2.25A2.824 2.824 0 002.25 5.074v9.852a2.824 2.824 0 002.824 2.824h9.852a2.824 2.824 0 002.824-2.824V5.074a2.824 2.824 0 00-2.824-2.824H5.074zM3.75 5.074c0-.731.593-1.324 1.324-1.324h9.852c.731 0 1.324.593 1.324 1.324v9.852c0 .731-.593 1.324-1.324 1.324H5.074a1.324 1.324 0 01-1.324-1.324V5.074z",clipRule:"evenodd"})]})}),p=(0,a().wt)("codeBlock",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M11.741 3.614a.75.75 0 00-1.482-.228l-2 13a.75.75 0 001.482.228l2-13zM18.247 10l-3.933 4.494a.75.75 0 11-1.128-.988L16.253 10l-3.067-3.506a.75.75 0 111.128-.988L18.247 10zm-16.994.077l3.933-4.494a.75.75 0 111.128.988l-3.067 3.506 3.067 3.506a.75.75 0 11-1.128.988l-3.933-4.494z"})}),m=(0,a().wt)("csv",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{fillRule:"evenodd",d:"M5 4.25C5 3.56 5.56 3 6.25 3H9.5v2.75a2.75 2.75 0 0 0 2.75 2.75H15V9a.75.75 0 0 0 1.5 0V7.664c0-.464-.184-.909-.513-1.237l-4.414-4.414a1.75 1.75 0 0 0-1.237-.513H6.25A2.75 2.75 0 0 0 3.5 4.25v11.5a2.75 2.75 0 0 0 2.75 2.75h9.25a.75.75 0 0 0 0-1.5H6.25C5.56 17 5 16.44 5 15.75zm6-.69v2.19c0 .69.56 1.25 1.25 1.25h2.19z",clipRule:"evenodd"}),(0,s.jsx)("path",{d:"M14.011 12.932c-.333-.282-.789-.446-1.31-.546-.431-.082-.642-.19-.737-.272-.064-.054-.089-.102-.089-.205 0-.025.004-.073.103-.14.111-.074.315-.144.605-.144.559 0 .77.234.819.305a.625.625 0 0 0 1.03-.708c-.285-.414-.883-.847-1.849-.847-.472 0-.934.111-1.3.355-.376.252-.658.659-.658 1.18 0 .442.166.848.53 1.158.334.282.79.446 1.311.546.431.082.642.19.737.272.064.054.089.102.089.205 0 .025-.004.073-.104.14-.11.074-.315.144-.605.144-.558 0-.77-.234-.818-.305a.625.625 0 1 0-1.03.708c.285.414.883.847 1.848.847.472 0 .935-.111 1.3-.355.377-.252.659-.659.659-1.18 0-.442-.166-.848-.53-1.158ZM9.807 10.71c-.669-.377-1.62-.457-2.42-.13-.86.351-1.512 1.159-1.512 2.42s.652 2.069 1.512 2.42c.8.327 1.751.247 2.42-.13a.625.625 0 0 0-.614-1.09c-.336.19-.885.246-1.333.063-.389-.159-.735-.508-.735-1.263s.346-1.104.735-1.263c.448-.183.997-.127 1.333.062a.625.625 0 1 0 .614-1.088Zm6.28.243a.625.625 0 0 0-1.174.427l1.333 3.667a.625.625 0 0 0 1.175 0l1.333-3.667a.625.625 0 1 0-1.175-.427l-.746 2.052z"})]})}),g=(0,a().wt)("cursorHover",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M4.25 5C3.56 5 3 5.56 3 6.25v7.5c0 .69.56 1.25 1.25 1.25h1a.75.75 0 0 1 0 1.5h-1a2.75 2.75 0 0 1-2.75-2.75v-7.5A2.75 2.75 0 0 1 4.25 3.5h11.5a2.75 2.75 0 0 1 2.75 2.75v7.5a2.75 2.75 0 0 1-2.75 2.75h-.5a.75.75 0 0 1 0-1.5h.5c.69 0 1.25-.56 1.25-1.25v-7.5C17 5.56 16.44 5 15.75 5z"}),(0,s.jsx)("path",{d:"M6.364 10.11a.25.25 0 0 0-.348.308l2.612 7.186a.25.25 0 0 0 .469.005l.757-1.987 2.793 3.055a.748.748 0 1 0 1.108-1.009l-2.852-3.12 1.934-.696a.25.25 0 0 0 .027-.457z"})]})}),f=(0,a().wt)("divider",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M2.25 10A.75.75 0 013 9.25h14.5a.75.75 0 010 1.5H3a.75.75 0 01-.75-.75z",clipRule:"evenodd"})});const v=(0,a().wt)("duplicateSquares",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M15.25 4.75v-.472a2.53 2.53 0 0 0-2.528-2.528H4.278A2.53 2.53 0 0 0 1.75 4.278v8.444a2.53 2.53 0 0 0 2.528 2.528h.472v.472a2.53 2.53 0 0 0 2.528 2.528h8.444a2.53 2.53 0 0 0 2.528-2.528V7.278a2.53 2.53 0 0 0-2.528-2.528zM4.278 3.25c-.568 0-1.028.46-1.028 1.028v8.444c0 .568.46 1.028 1.028 1.028h.472V7.278A2.53 2.53 0 0 1 7.278 4.75h6.472v-.472c0-.568-.46-1.028-1.028-1.028zM6.25 7.278c0-.568.46-1.028 1.028-1.028h8.444c.568 0 1.028.46 1.028 1.028v8.444c0 .568-.46 1.028-1.028 1.028H7.278c-.568 0-1.028-.46-1.028-1.028z",clipRule:"evenodd"})}),h=(0,a().wt)("embedBlock",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M16.75 6a.75.75 0 0 0 1.5 0V4.5a2.75 2.75 0 0 0-2.75-2.75H12a.75.75 0 0 0 0 1.5h3.5c.69 0 1.25.56 1.25 1.25zm-13.5 6a.75.75 0 0 0-1.5 0v3.5a2.75 2.75 0 0 0 2.75 2.75H6a.75.75 0 0 0 0-1.5H4.5c-.69 0-1.25-.56-1.25-1.25zM2.5 8.75A.75.75 0 0 0 3.25 8V4.5c0-.69.56-1.25 1.25-1.25H8a.75.75 0 0 0 0-1.5H4.5A2.75 2.75 0 0 0 1.75 4.5V8c0 .414.336.75.75.75m11.42.484a1.66 1.66 0 0 1 2.346 2.347l-1.278 1.277a.75.75 0 0 0 1.06 1.061l1.279-1.278a3.16 3.16 0 1 0-4.468-4.468L11.58 9.451a.75.75 0 0 0 1.06 1.06l1.278-1.277Zm-4.686 7.032a1.66 1.66 0 0 0 2.347 0l1.278-1.278a.75.75 0 0 1 1.06 1.06l-1.277 1.279a3.16 3.16 0 0 1-4.469-4.469l1.278-1.277a.75.75 0 1 1 1.06 1.06L9.235 13.92a1.66 1.66 0 0 0 0 2.347Z"}),(0,s.jsx)("path",{d:"M14.771 11.79a.75.75 0 0 0-1.06-1.061l-2.982 2.981a.75.75 0 0 0 1.06 1.061z"})]})}),_=(0,a().wt)("equationBlock",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M12.5 6.75H8.375l2.28 2.171c.5.477.519 1.269.042 1.769l-2.444 2.56H12.5a.75.75 0 010 1.5H7.668c-1.1 0-1.663-1.318-.904-2.113L9.44 9.835l-2.551-2.43c-.817-.778-.266-2.155.862-2.155h4.75a.75.75 0 010 1.5z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.074 2.25A2.824 2.824 0 002.25 5.074v9.852a2.824 2.824 0 002.824 2.824h9.852a2.824 2.824 0 002.824-2.824V5.074a2.824 2.824 0 00-2.824-2.824H5.074zM3.75 5.074c0-.731.593-1.324 1.324-1.324h9.852c.731 0 1.324.593 1.324 1.324v9.852c0 .731-.593 1.324-1.324 1.324H5.074a1.324 1.324 0 01-1.324-1.324V5.074z",clipRule:"evenodd"})]})});const b=(0,a().wt)("fileBlock",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10.146 3.179a3.75 3.75 0 115.304 5.303L9.793 14.14a2.25 2.25 0 11-3.182-3.182L9.439 8.13A.75.75 0 0110.5 9.19l-2.828 2.829a.75.75 0 101.06 1.06l5.657-5.656a2.25 2.25 0 10-3.182-3.182L5.55 9.896a3.75 3.75 0 105.304 5.304l4.95-4.95a.75.75 0 011.06 1.06l-4.95 4.95A5.25 5.25 0 014.49 8.836l5.656-5.657z",clipRule:"evenodd"})}),y=(0,a().wt)("fileHash",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{fillRule:"evenodd",d:"M7.75 10.625a.625.625 0 100 1.25h.752l-.269 1.75H7.25a.625.625 0 100 1.25h.79l-.158 1.03a.625.625 0 001.236.19l.187-1.22h1.736l-.159 1.03a.625.625 0 101.236.19l.188-1.22H13a.625.625 0 100-1.25h-.502l.269-1.75h.733a.625.625 0 100-1.25h-.54l.158-1.03a.625.625 0 00-1.236-.19l-.187 1.22H9.959l.159-1.03a.625.625 0 00-1.236-.19l-.187 1.22H7.75zm2.017 1.25l-.27 1.75h1.736l.27-1.75H9.766z",clipRule:"evenodd"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.5 15.75V7.664c0-.464-.184-.909-.513-1.237l-4.414-4.414a1.75 1.75 0 00-1.237-.513H6.25A2.75 2.75 0 003.5 4.25v11.5a2.75 2.75 0 002.75 2.75h7.5a2.75 2.75 0 002.75-2.75zM6.25 3C5.56 3 5 3.56 5 4.25v11.5c0 .69.56 1.25 1.25 1.25h7.5c.69 0 1.25-.56 1.25-1.25V8.5h-2.75A2.75 2.75 0 019.5 5.75V3H6.25zm6 4h2.19L11 3.56v2.19c0 .69.56 1.25 1.25 1.25z",clipRule:"evenodd"})]})}),S=(0,a().wt)("fiveColumns",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M1.5 6a2.75 2.75 0 012.75-2.75h11.5A2.75 2.75 0 0118.5 6v7.5a2.75 2.75 0 01-2.75 2.75H4.25A2.75 2.75 0 011.5 13.5V6zm2.75-1.25C3.56 4.75 3 5.31 3 6v7.5c0 .69.56 1.25 1.25 1.25h.186v-10H4.25zm3.39 10H5.936v-10H7.64v10zm4.703 0h1.704v-10h-1.704v10zm-1.5 0v-10H9.14v10h1.703zm4.907 0h-.203v-10h.203c.69 0 1.25.56 1.25 1.25v7.5c0 .69-.56 1.25-1.25 1.25z",clipRule:"evenodd"})}),w=(0,a().wt)("folderWithTabs",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4.25.25A2.75 2.75 0 001.5 3v10.75a2.75 2.75 0 002.75 2.75h11.5a2.75 2.75 0 002.75-2.75v-7.5c0-.055-.002-.11-.005-.164A.756.756 0 0018.5 6V3A2.75 2.75 0 0015.75.25H4.25zM3 3c0-.69.56-1.25 1.25-1.25h2c.69 0 1.25.56 1.25 1.25v1.25c0 .414.336.75.75.75h7.5c.69 0 1.25.56 1.25 1.25v7.5c0 .69-.56 1.25-1.25 1.25H4.25C3.56 15 3 14.44 3 13.75V3zm5.7-1.25c.192.375.3.8.3 1.25v.5h3.5V3c0-.69-.56-1.25-1.25-1.25H8.7zM14 3.5h1.75a2.739 2.739 0 011.25.3V3c0-.69-.56-1.25-1.25-1.25H13.7c.192.375.3.8.3 1.25v.5z",clipRule:"evenodd"})}),k=(0,a().wt)("fourColumns",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4.25 3.25A2.75 2.75 0 001.5 6v7.5a2.75 2.75 0 002.75 2.75h11.5a2.75 2.75 0 002.75-2.75V6a2.75 2.75 0 00-2.75-2.75H4.25zM3 6c0-.69.56-1.25 1.25-1.25h1v10h-1c-.69 0-1.25-.56-1.25-1.25V6zm3.75 8.75h2.5v-10h-2.5v10zm6.5 0h-2.5v-10h2.5v10zm1.5 0h1c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25h-1v10z",clipRule:"evenodd"})});const I=(0,a().wt)("heading1",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M3.75 4.87a.75.75 0 10-1.5 0v10.5a.75.75 0 001.5 0v-4.25h5.5v4.25a.75.75 0 001.5 0V4.87a.75.75 0 00-1.5 0v4.75h-5.5V4.87zM15.2 6.147a.75.75 0 01.55.723v7.75h1a.75.75 0 010 1.5H13a.75.75 0 110-1.5h1.25V8.663a2.52 2.52 0 01-1 .207.75.75 0 010-1.5c.357 0 .688-.187.871-.493l.236-.393a.75.75 0 01.843-.337z"})}),A=(0,a().wt)("heading2",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M3.75 4.87a.75.75 0 10-1.5 0v10.5a.75.75 0 001.5 0v-4.25h5.5v4.25a.75.75 0 001.5 0V4.87a.75.75 0 00-1.5 0v4.75h-5.5V4.87zm13.5 11.25H12.5a.75.75 0 01-.557-1.252l3.904-4.338a1.57 1.57 0 00.403-1.05 1.36 1.36 0 00-1.36-1.36h-.136c-.687 0-1.285.467-1.452 1.133l-.074.299a.75.75 0 01-1.456-.364l.075-.298a2.996 2.996 0 012.907-2.27h.136a2.86 2.86 0 012.86 2.86c0 .758-.28 1.49-.788 2.054l-2.778 3.086h3.066a.75.75 0 010 1.5z"})}),x=(0,a().wt)("heading3",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M3.75 4.87a.75.75 0 10-1.5 0v10.5a.75.75 0 001.5 0v-4.25h5.5v4.25a.75.75 0 001.5 0V4.87a.75.75 0 00-1.5 0v4.75h-5.5V4.87zm8.5 2.5a.75.75 0 01.75-.75h3.5a.75.75 0 01.576 1.23l-1.62 1.945a3.37 3.37 0 012.294 3.194v.135a2.996 2.996 0 01-5.903.727l-.075-.299a.75.75 0 111.456-.364l.074.299a1.496 1.496 0 002.948-.363v-.135a1.87 1.87 0 00-1.87-1.869H14a.75.75 0 01-.576-1.23l1.475-1.77H13a.75.75 0 01-.75-.75z"})}),C=(0,a().wt)("htmlBrackets",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M14.314 14.494 18.247 10l-3.933-4.494a.75.75 0 1 0-1.128.988L16.253 10l-3.067 3.506a.75.75 0 1 0 1.128.988m-9.128-8.91-3.933 4.493 3.933 4.494a.75.75 0 1 0 1.128-.988l-3.067-3.506L6.314 6.57a.75.75 0 1 0-1.128-.988Z",clipRule:"evenodd"})}),T=(0,a().wt)("imageBlock",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M9.75 7.5a1.75 1.75 0 11-3.5 0 1.75 1.75 0 013.5 0z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M18.25 13.5a2.75 2.75 0 01-2.75 2.75H4a2.75 2.75 0 01-2.75-2.75V6A2.75 2.75 0 014 3.25h11.5A2.75 2.75 0 0118.25 6v7.5zM4 4.75c-.69 0-1.25.56-1.25 1.25v5.69l2.22-2.22a.75.75 0 011.06 0l2.22 2.22 4.47-4.47a.75.75 0 011.06 0l2.97 2.97V6c0-.69-.56-1.25-1.25-1.25H4zm12.75 7.56l-3.5-3.5-4.47 4.47a.75.75 0 01-1.06 0L5.5 11.06l-2.719 2.72A1.25 1.25 0 004 14.75h11.5c.69 0 1.25-.56 1.25-1.25v-1.19z",clipRule:"evenodd"})]})});const M=(0,a().wt)("mermaidTail",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M1.963 3.477a.75.75 0 01.671-.215l3.106.565A6.75 6.75 0 0110 6.51a6.75 6.75 0 014.26-2.683l3.106-.565a.75.75 0 01.868.891l-.624 2.998a5.764 5.764 0 01-4.118 4.383c-.512.14-.867.606-.867 1.137V16a.75.75 0 01-.75.75h-3.75a.75.75 0 01-.75-.75v-3.33c0-.53-.355-.995-.867-1.136A5.764 5.764 0 012.39 7.151l-.624-2.998a.75.75 0 01.197-.676zm1.498 1.46l.398 1.909a4.264 4.264 0 003.046 3.242 2.678 2.678 0 011.97 2.583v2.579h2.25v-2.58c0-1.206.806-2.263 1.97-2.582a4.264 4.264 0 003.046-3.242l.398-1.909-2.01.366a5.25 5.25 0 00-3.333 2.113l-.586.82a.75.75 0 01-1.22 0l-.586-.82a5.25 5.25 0 00-3.333-2.113l-2.01-.366z",clipRule:"evenodd"})});const P=(0,a().wt)("numberedList",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M5.126 2.961c.19.113.308.318.308.539v4a.625.625 0 11-1.25 0V4.562l-.13.073a.625.625 0 11-.608-1.093l1.06-.588a.625.625 0 01.62.007zM8.5 5.25a.75.75 0 000 1.5H16a.75.75 0 000-1.5H8.5zm0 8a.75.75 0 000 1.5H16a.75.75 0 000-1.5H8.5zM6 16.625H3.5a.625.625 0 01-.474-1.032l1.923-2.24a.614.614 0 00.148-.4.26.26 0 00-.206-.255l-.164-.035a.48.48 0 00-.213.003l-.029.008a.499.499 0 00-.37.38.625.625 0 11-1.228-.234 1.748 1.748 0 011.303-1.36l.03-.008a1.73 1.73 0 01.765-.01l.164.034a1.51 1.51 0 011.197 1.478c0 .445-.16.876-.45 1.214L4.86 15.375H6a.625.625 0 110 1.25z"})});const B=(0,a().wt)("quoteBlock",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M7.038 5.25a4.788 4.788 0 00-4.788 4.789v.576a4.211 4.211 0 004.212 4.212 3.058 3.058 0 10-2.712-4.472v-.316A3.288 3.288 0 017.038 6.75h.577a.75.75 0 100-1.5h-.577zm3.442 4.789a4.788 4.788 0 014.79-4.789h.576a.75.75 0 010 1.5h-.577a3.288 3.288 0 00-3.288 3.289v.316a3.057 3.057 0 112.711 4.472 4.211 4.211 0 01-4.211-4.212v-.576z"})}),R=(0,a().wt)("syncedBlock",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M1.75 4.5a.75.75 0 01.75-.75H15a.75.75 0 010 1.5H2.5a.75.75 0 01-.75-.75zm0 4a.75.75 0 01.75-.75H7a.75.75 0 010 1.5H2.5a.75.75 0 01-.75-.75zM13.9 9.748a3.375 3.375 0 00-4.06 2.056h.3a.623.623 0 01.441 1.066l-1.143 1.143a.625.625 0 01-.883 0L7.412 12.87a.623.623 0 01-.004-.88l.008-.007a.623.623 0 01.438-.18h.675a4.626 4.626 0 018.316-1.369.625.625 0 01-1.04.694 3.375 3.375 0 00-1.905-1.38zm4.684 4.265a.624.624 0 01-.442.183h-.675a4.62 4.62 0 01-2.494 2.987 4.624 4.624 0 01-5.822-1.617.625.625 0 111.04-.694 3.375 3.375 0 005.964-.676h-.299a.623.623 0 01-.625-.625.622.622 0 01.188-.446l1.138-1.138a.625.625 0 01.884 0l1.143 1.143a.621.621 0 010 .883z"})});const E=(0,a().wt)("tableOfContents",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M9.75 15a.75.75 0 01.75-.75H18a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM8.5 9.25a.75.75 0 000 1.5H16a.75.75 0 000-1.5H8.5zm-2-5a.75.75 0 000 1.5H14a.75.75 0 000-1.5H6.5zm-3 5a.75.75 0 000 1.5h2a.75.75 0 000-1.5h-2zM.75 5a.75.75 0 01.75-.75h2a.75.75 0 010 1.5h-2A.75.75 0 01.75 5zm4.75 9.25a.75.75 0 000 1.5h2a.75.75 0 000-1.5h-2z"})}),D=(0,a().wt)("text",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M4.25 4A.75.75 0 015 3.25h10a.75.75 0 01.75.75v2a.75.75 0 01-1.5 0V4.75h-3.5v10.5h.75a.75.75 0 010 1.5h-3a.75.75 0 010-1.5h.75V4.75h-3.5V6a.75.75 0 01-1.5 0V4z"})}),N=(0,a().wt)("textLines",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M2.25 6A.75.75 0 0 1 3 5.25h14a.75.75 0 0 1 0 1.5H3A.75.75 0 0 1 2.25 6m0 4A.75.75 0 0 1 3 9.25h14a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75m0 4a.75.75 0 0 1 .75-.75h8.615a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75",clipRule:"evenodd"})});const L=(0,a().wt)("todoList",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M8.064 4.494a.75.75 0 00-1.128-.988L4.024 6.833l-.94-1.17a.75.75 0 00-1.169.94l1.5 1.867a.75.75 0 001.15.024l3.5-4zm0 8a.75.75 0 00-1.128-.988l-2.912 3.327-.94-1.17a.75.75 0 00-1.169.94l1.5 1.867a.75.75 0 001.15.024l3.5-4zM8.75 6a.75.75 0 01.75-.75H17a.75.75 0 010 1.5H9.5A.75.75 0 018.75 6zm.75 7.25a.75.75 0 000 1.5H17a.75.75 0 000-1.5H9.5z"})}),F=(0,a().wt)("toggleHeading1",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M7.75 5a.75.75 0 00-1.5 0v10.5a.75.75 0 001.5 0v-4.272h4.5V15.5a.75.75 0 001.5 0V5a.75.75 0 00-1.5 0v4.728h-4.5V5zm-5.349 7.634a.76.76 0 01-1.151-.652V9.018a.76.76 0 011.151-.652l2.47 1.482a.76.76 0 010 1.304l-2.47 1.482zM18.216 8.95a.7.7 0 00-1.04-.612l-1.766.981a.7.7 0 00.68 1.224l.726-.403v5.48a.7.7 0 101.4 0V8.95z"})}),U=(0,a().wt)("toggleHeading2",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M7 4.25a.75.75 0 01.75.75v4.728h4.5V5a.75.75 0 011.5 0v10.5a.75.75 0 01-1.5 0v-4.272h-4.5V15.5a.75.75 0 01-1.5 0V5A.75.75 0 017 4.25zm-5.75 7.732a.76.76 0 001.151.652l2.47-1.482a.76.76 0 000-1.304l-2.47-1.482a.76.76 0 00-1.151.652v2.964zm17.25 4.243h-3a.625.625 0 01-.505-.993l2.305-3.17c.157-.216.242-.476.242-.742v-.064a.644.644 0 00-.487-.623l-.037-.01a.67.67 0 00-.346.007.746.746 0 00-.531.594l-.024.145a.625.625 0 01-1.234-.205l.025-.145c.126-.76.68-1.38 1.42-1.591a1.92 1.92 0 01.993-.017l.037.01c.843.21 1.434.967 1.434 1.835v.064c0 .53-.169 1.048-.481 1.477l-1.584 2.178H18.5a.625.625 0 110 1.25z"})}),O=(0,a().wt)("toggleHeading3",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M7 4.25a.75.75 0 01.75.75v4.728h4.5V5a.75.75 0 011.5 0v10.5a.75.75 0 01-1.5 0v-4.272h-4.5V15.5a.75.75 0 01-1.5 0V5A.75.75 0 017 4.25zm-5.75 7.732a.76.76 0 001.151.652l2.47-1.482a.76.76 0 000-1.304l-2.47-1.482a.76.76 0 00-1.151.652v2.964zm14.333-2.607a.625.625 0 100 1.25h1.109l-.948 1.308a.625.625 0 00.506.992h.254c.62 0 1.121.502 1.121 1.121v.09a.872.872 0 01-1.719.211l-.05-.199a.625.625 0 00-1.212.304l.05.199a2.123 2.123 0 004.181-.515v-.09a2.372 2.372 0 00-1.515-2.212l1.063-1.467a.625.625 0 00-.506-.992h-2.334z"})}),V=(0,a().wt)("toggleList",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M2.5 7.688a.56.56 0 00.841.485l2.882-1.688a.563.563 0 000-.97L3.34 3.827a.56.56 0 00-.841.485v3.376zm6-2.438a.75.75 0 000 1.5H16a.75.75 0 000-1.5H8.5zm0 8a.75.75 0 000 1.5H16a.75.75 0 000-1.5H8.5zm-5.159 2.923a.56.56 0 01-.841-.485v-3.376a.56.56 0 01.841-.485l2.882 1.688c.37.217.37.753 0 .97L3.34 16.173z"})}),j=(0,a().wt)("twoColumns",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4.25 3.25A2.75 2.75 0 001.5 6v7.5a2.75 2.75 0 002.75 2.75h11.5a2.75 2.75 0 002.75-2.75V6a2.75 2.75 0 00-2.75-2.75H4.25zM3 6c0-.69.56-1.25 1.25-1.25h5v10h-5c-.69 0-1.25-.56-1.25-1.25V6zm7.75 8.75h5c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25h-5v10z",clipRule:"evenodd"})}),z=(0,a().wt)("videoBlock",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M7.25 12.804c0 .344.376.558.675.385l4.852-2.805a.443.443 0 000-.768L7.925 6.81a.449.449 0 00-.675.385v5.608z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M15.75 16.5a2.75 2.75 0 002.75-2.75v-7.5a2.75 2.75 0 00-2.75-2.75H4.25A2.75 2.75 0 001.5 6.25v7.5a2.75 2.75 0 002.75 2.75h11.5zM17 13.75c0 .69-.56 1.25-1.25 1.25H4.25C3.56 15 3 14.44 3 13.75v-7.5C3 5.56 3.56 5 4.25 5h11.5c.69 0 1.25.56 1.25 1.25v7.5z",clipRule:"evenodd"})]})});var q=()=>o(388821),H=()=>o(179034),W=()=>o(431404),K=()=>o(972435),G=()=>o(700251);const $=(0,G().kq)("abstractColorDarkIcon",(()=>o.e(41091).then(o.bind(o,481143)).then((e=>e.abstractColorDarkIcon)))),Y=(0,G().kq)("abstractColorLightIcon",(()=>o.e(41091).then(o.bind(o,196013)).then((e=>e.abstractColorLightIcon)))),Q=(0,G().kq)("asanaColorIcon",(()=>o.e(41091).then(o.bind(o,501203)).then((e=>e.asanaColorIcon)))),Z=(0,G().kq)("codepenColorDarkIcon",(()=>o.e(41091).then(o.bind(o,229553)).then((e=>e.codepenColorDarkIcon)))),X=(0,G().kq)("codepenColorLightIcon",(()=>o.e(41091).then(o.bind(o,394623)).then((e=>e.codepenColorLightIcon)))),J=(0,G().kq)("confluenceColorDarkIcon",(()=>o.e(41091).then(o.bind(o,950751)).then((e=>e.confluenceColorDarkIcon)))),ee=(0,G().kq)("confluenceColorLightIcon",(()=>o.e(41091).then(o.bind(o,949829)).then((e=>e.confluenceColorLightIcon)))),te=(0,a().wt)("deepnoteColor",{viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{fill:"#3793EF",fillRule:"evenodd",d:"M7.353 1c-.327.002-.471 0-.471 0L1 9.538h5.412c.46 0 .966.017 1.487.068l-1.606 2.24L1 19h7.538-.008S19 18.68 19 9.49C19 1.44 9.66.991 7.352 1Z",clipRule:"evenodd"}),(0,s.jsx)("path",{fill:"#1560AB",fillRule:"evenodd",d:"M8.53 19s4.373-.822 4.373-4.896c0-3.337-2.65-4.27-5.005-4.498l-1.604 2.24L1 19zm2.285-2.101.013-.02z",clipRule:"evenodd"}),(0,s.jsx)("path",{fill:"#012447",fillRule:"evenodd",d:"M6.294 11.847c3.322 0 5.496 1.557 5.056 3.74C10.909 17.768 8.53 19 8.53 19s4.373-.822 4.373-4.896c0-3.337-2.65-4.27-5.004-4.498l-1.605 2.24Z",clipRule:"evenodd"})]})}),oe=(0,G().kq)("dropboxPaperColorIcon",(()=>o.e(41091).then(o.bind(o,850221)).then((e=>e.dropboxPaperColorIcon)))),ne=(0,G().kq)("evernoteColorIcon",(()=>o.e(41091).then(o.bind(o,208109)).then((e=>e.evernoteColorIcon)))),re=(0,G().kq)("excalidrawColorDarkIcon",(()=>o.e(41091).then(o.bind(o,416245)).then((e=>e.excalidrawColorDarkIcon)))),ie=(0,G().kq)("excalidrawColorLightIcon",(()=>o.e(41091).then(o.bind(o,154427)).then((e=>e.excalidrawColorLightIcon)))),ae=(0,G().kq)("figmaColorIcon",(()=>o.e(41091).then(o.bind(o,772661)).then((e=>e.figmaColorIcon)))),se=(0,G().kq)("framerColorDarkIcon",(()=>o.e(41091).then(o.bind(o,794424)).then((e=>e.framerColorDarkIcon)))),le=(0,G().kq)("framerColorLightIcon",(()=>o.e(41091).then(o.bind(o,655640)).then((e=>e.framerColorLightIcon)))),ce=(0,G().kq)("githubColorDarkIcon",(()=>o.e(41091).then(o.bind(o,837730)).then((e=>e.githubColorDarkIcon)))),de=(0,G().kq)("githubColorLightIcon",(()=>o.e(41091).then(o.bind(o,262522)).then((e=>e.githubColorLightIcon)))),ue=(0,G().kq)("googleDocsColorDarkIcon",(()=>o.e(41091).then(o.bind(o,535513)).then((e=>e.googleDocsColorDarkIcon)))),pe=(0,G().kq)("googleDocsColorLightIcon",(()=>o.e(41091).then(o.bind(o,524503)).then((e=>e.googleDocsColorLightIcon)))),me=(0,G().kq)("hexColorDarkIcon",(()=>o.e(41091).then(o.bind(o,69088)).then((e=>e.hexColorDarkIcon)))),ge=(0,G().kq)("hexColorLightIcon",(()=>o.e(41091).then(o.bind(o,435152)).then((e=>e.hexColorLightIcon)))),fe=(0,G().kq)("invisionColorIcon",(()=>o.e(41091).then(o.bind(o,52554)).then((e=>e.invisionColorIcon)))),ve=(0,G().kq)("loomColorIcon",(()=>o.e(41091).then(o.bind(o,131924)).then((e=>e.loomColorIcon)))),he=(0,G().kq)("mapsColorIcon",(()=>o.e(41091).then(o.bind(o,756134)).then((e=>e.mapsColorIcon)))),_e=(0,G().kq)("miroColorIcon",(()=>o.e(41091).then(o.bind(o,965940)).then((e=>e.miroColorIcon)))),be=(0,G().kq)("mixpanelColorDarkIcon",(()=>o.e(41091).then(o.bind(o,196093)).then((e=>e.mixpanelColorDarkIcon)))),ye=(0,G().kq)("mixpanelColorLightIcon",(()=>o.e(41091).then(o.bind(o,205011)).then((e=>e.mixpanelColorLightIcon)))),Se=(0,G().kq)("mondayColorIcon",(()=>o.e(41091).then(o.bind(o,442385)).then((e=>e.mondayColorIcon)))),we=(0,G().kq)("quipColorDarkIcon",(()=>o.e(41091).then(o.bind(o,493198)).then((e=>e.quipColorDarkIcon)))),ke=(0,G().kq)("quipColorLightIcon",(()=>o.e(41091).then(o.bind(o,870750)).then((e=>e.quipColorLightIcon)))),Ie=(0,G().kq)("replitColorDarkIcon",(()=>o.e(41091).then(o.bind(o,237385)).then((e=>e.replitColorDarkIcon)))),Ae=(0,G().kq)("replitColorLightIcon",(()=>o.e(41091).then(o.bind(o,775591)).then((e=>e.replitColorLightIcon)))),xe=(0,G().kq)("sketchColorDarkIcon",(()=>o.e(41091).then(o.bind(o,168069)).then((e=>e.sketchColorDarkIcon)))),Ce=(0,G().kq)("sketchColorLightIcon",(()=>o.e(41091).then(o.bind(o,974379)).then((e=>e.sketchColorLightIcon)))),Te=(0,G().kq)("trelloColorDarkIcon",(()=>o.e(41091).then(o.bind(o,507087)).then((e=>e.trelloColorDarkIcon)))),Me=(0,G().kq)("trelloColorLightIcon",(()=>o.e(41091).then(o.bind(o,834325)).then((e=>e.trelloColorLightIcon)))),Pe=(0,G().kq)("twitterColorDarkIcon",(()=>o.e(41091).then(o.bind(o,612802)).then((e=>e.twitterColorDarkIcon)))),Be=(0,G().kq)("twitterColorLightIcon",(()=>o.e(41091).then(o.bind(o,334810)).then((e=>e.twitterColorLightIcon)))),Re=(0,G().kq)("typeformColorDarkIcon",(()=>o.e(41091).then(o.bind(o,629271)).then((e=>e.typeformColorDarkIcon)))),Ee=(0,G().kq)("typeformColorLightIcon",(()=>o.e(41091).then(o.bind(o,807501)).then((e=>e.typeformColorLightIcon)))),De=(0,G().kq)("whimsicalColorDarkIcon",(()=>o.e(41091).then(o.bind(o,112094)).then((e=>e.whimsicalColorDarkIcon)))),Ne=(0,G().kq)("whimsicalColorLightIcon",(()=>o.e(41091).then(o.bind(o,705550)).then((e=>e.whimsicalColorLightIcon)))),Le=(0,G().kq)("wordColorIcon",(()=>o.e(41091).then(o.bind(o,862761)).then((e=>e.wordColorIcon)))),Fe=(0,G().kq)("workflowyColorDarkIcon",(()=>o.e(41091).then(o.bind(o,555197)).then((e=>e.workflowyColorDarkIcon)))),Ue=(0,G().kq)("workflowyColorLightIcon",(()=>o.e(41091).then(o.bind(o,459795)).then((e=>e.workflowyColorLightIcon))));var Oe=()=>o(404141),Ve=()=>o(878377),je=()=>o(389658),ze=()=>o(661491);const qe=(0,o(959013).YK)({textDescription:{id:"newBlock.text.description",defaultMessage:"Just start writing with plain text."},textKeywords:{id:"newBlock.text.fuzzySearchKeywords",defaultMessage:"Text"},encryptedTextDescription:{id:"newBlock.encryptedText.description",defaultMessage:"Just start writing...and your text will be stored encrypted!"},pageDescription:{id:"newBlock.page.description",defaultMessage:"Embed a sub-page inside this page."},pageKeywords:{id:"newBlock.page.fuzzySearchKeywords",defaultMessage:"Page"},linkToPageDescription:{id:"newBlock.linkToPage.description",defaultMessage:"Link to an existing page."},linkToPageKeywords:{id:"newBlock.linkToPage.fuzzySearchKeywords",defaultMessage:"Link to page ltp"},linkedDatabaseDescription:{id:"newBlock.linkToCollection.description",defaultMessage:"Add an existing database to this page."},transclusionContainerDescription:{id:"newBlock.transclusionContainer.description",defaultMessage:"Sync content across pages."},transclusionContainerKeywords:{id:"newBlock.transclusionContainer.fuzzySearchKeywords",defaultMessage:"synced block reference portal block embed group"},toDoDescription:{id:"newBlock.toDo.description",defaultMessage:"Track tasks with a to-do list."},toDoKeywords:{id:"newBlock.toDo.fuzzySearchKeywords",defaultMessage:"Todo To-Do Checkbox List Do"},headerDescription:{id:"newBlock.header.description",defaultMessage:"Big section heading."},headerKeywords:{id:"newBlock.header.fuzzySearchKeywords",defaultMessage:"Heading 1 h1"},subHeaderDescription:{id:"newBlock.subHeader.description",defaultMessage:"Medium section heading."},subHeaderKeywords:{id:"newBlock.subHeader.fuzzySearchKeywords",defaultMessage:"sub heading 2 h2 two"},subSubHeaderDescription:{id:"newBlock.subSubHeader.description",defaultMessage:"Small section heading."},subSubHeaderKeywords:{id:"newBlock.subSubHeader.fuzzySearchKeywords",defaultMessage:"subsub heading 3 h3 three"},imageDescription:{id:"newBlock.image.description",defaultMessage:"Upload or embed with a link."},imageKeywords:{id:"newBlock.image.fuzzySearchKeywords",defaultMessage:"Image Picture Gif Giphy Photo img"},bookmarkDescription:{id:"newBlock.bookmark.description",defaultMessage:"Save a link as a visual bookmark."},bookmarkKeywords:{id:"newBlock.bookmark.fuzzySearchKeywords",defaultMessage:"Web Link Bookmark"},dividerDescription:{id:"newBlock.divider.description",defaultMessage:"Visually divide blocks."},dividerKeywords:{id:"newBlock.divider.fuzzySearchKeywords",defaultMessage:"Horizontal Rule Divider line section separator —-"},codeDescription:{id:"newBlock.code.description",defaultMessage:"Capture a code snippet."},codeKeywords:{id:"newBlock.code.fuzzySearchKeywords",defaultMessage:"Code"},quoteDescription:{id:"newBlock.quote.description",defaultMessage:"Capture a quote."},quoteKeywords:{id:"newBlock.quote.fuzzySearchKeywords",defaultMessage:"Quote ”"},bulletedListDescription:{id:"newBlock.bulletedList.description",defaultMessage:"Create a simple bulleted list."},bulletedListKeywords:{id:"newBlock.bulletedList.fuzzySearchKeywords",defaultMessage:"Bulleted List"},numberedListDescription:{id:"newBlock.numberedList.description",defaultMessage:"Create a list with numbering."},numberedListKeywords:{id:"newBlock.numberedList.fuzzySearchKeywords",defaultMessage:"Numbered List"},toggleDescription:{id:"newBlock.toggle.description",defaultMessage:"Toggles can hide and show content inside."},toggleKeywords:{id:"newBlock.toggle.fuzzySearchKeywords",defaultMessage:"Toggle list expand collapse details"},fileDescription:{id:"newBlock.file.description",defaultMessage:"Upload or embed with a link."},fileKeywords:{id:"newBlock.file.fuzzySearchKeywords",defaultMessage:"File upload attach"},videoDescription:{id:"newBlock.video.description",defaultMessage:"Embed from YouTube, Vimeo..."},videoKeywords:{id:"newBlock.video.fuzzySearchKeywords",defaultMessage:"Video"},audioDescription:{id:"newBlock.audio.description",defaultMessage:"Embed from SoundCloud, Spotify..."},audioKeywords:{id:"newBlock.audio.fuzzySearchKeywords",defaultMessage:"Audio Sound Music"},embedDescription:{id:"newBlock.embed.description",defaultMessage:"For PDFs, Google Maps, and more."},embedKeywords:{id:"newBlock.embed.fuzzySearchKeywords",defaultMessage:"Embed iFrame"},driveDescription:{id:"newBlock.drive.description",defaultMessage:"Embed a Google Doc, Google Sheet..."},driveKeywords:{id:"newBlock.drive.fuzzySearchKeywords",defaultMessage:"Google Drive"},figmaDescription:{id:"newBlock.figma.description",defaultMessage:"Embed a Figma file."},figmaKeywords:{id:"newBlock.figma.fuzzySearchKeywords",defaultMessage:"Figma"},loomDescription:{id:"newBlock.loom.description",defaultMessage:"Embed a Loom recording."},loomKeywords:{id:"newBlock.loom.fuzzySearchKeywords",defaultMessage:"Loom"},typeformDescription:{id:"newBlock.typeform.description",defaultMessage:"Embed a Typeform."},typeformKeywords:{id:"newBlock.typeform.fuzzySearchKeywords",defaultMessage:"Typeform"},codepenDescription:{id:"newBlock.codepen.description",defaultMessage:"Embed a CodePen."},codepenKeywords:{id:"newBlock.codepen.fuzzySearchKeywords",defaultMessage:"CodePen"},tweetDescription:{id:"newBlock.tweet.description",defaultMessage:"Embed a Tweet."},tweetKeywords:{id:"newBlock.tweet.fuzzySearchKeywords",defaultMessage:"Tweet"},gistDescription:{id:"newBlock.gist.description",defaultMessage:"Embed a Gist from GitHub."},gistKeywords:{id:"newBlock.gist.fuzzySearchKeywords",defaultMessage:"GitHub Gist"},mapsDescription:{id:"newBlock.maps.description",defaultMessage:"Embed a Google Map."},mapsKeywords:{id:"newBlock.maps.fuzzySearchKeywords",defaultMessage:"Google Maps"},framerDescription:{id:"newBlock.framer.description",defaultMessage:"Embed a Framer prototype."},framerKeywords:{id:"newBlock.framer.fuzzySearchKeywords",defaultMessage:"Framer"},invisionDescription:{id:"newBlock.invision.description",defaultMessage:"Embed an Invision project."},invisionKeywords:{id:"newBlock.invision.fuzzySearchKeywords",defaultMessage:"Invision"},mixpanelDescription:{id:"newBlock.mixpanel.description",defaultMessage:"Embed a Mixpanel project."},mixpanelKeywords:{id:"newBlock.mixpanel.fuzzySearchKeywords",defaultMessage:"Mixpanel"},equationDescription:{id:"newBlock.equation.description",defaultMessage:"Display a standalone math equation."},equationKeywords:{id:"newBlock.equation.fuzzySearchKeywords",defaultMessage:"LaTeX Math Block Equation $$ Formula"},pdfDescription:{id:"newBlock.pdf.description",defaultMessage:"Embed a PDF."},pdfKeywords:{id:"newBlock.pdf.fuzzySearchKeywords",defaultMessage:"PDF"},factoryDescription:{id:"newBlock.factory.description",defaultMessage:"Duplicate blocks with a click."},factoryKeywords:{id:"newBlock.factory.fuzzySearchKeywords",defaultMessage:"Template Duplicate Button"},buttonDescription:{id:"newBlock.button.description",defaultMessage:"Run custom automations with a click."},buttonKeywords:{id:"newBlock.button.fuzzySearchKeywords",defaultMessage:"Button automation template duplicate"},breadcrumbDescription:{id:"newBlock.breadcrumb.description",defaultMessage:"Show the current page location."},breadcrumbKeywords:{id:"newBlock.breadcrumb.fuzzySearchKeywords",defaultMessage:"Breadcrumb"},calloutDescription:{id:"newBlock.callout.description",defaultMessage:"Make writing stand out."},calloutKeywords:{id:"newBlock.callout.fuzzySearchKeywords",defaultMessage:"Callout"},table_of_contentsDescription:{id:"newBlock.tableOfContents.description",defaultMessage:"Show an outline of your page."},table_of_contentsKeywords:{id:"newBlock.tableOfContents.fuzzySearchKeywords",defaultMessage:"TOC Table of Contents"},whimsicalDescription:{id:"newBlock.whimsical.description",defaultMessage:"Embed a Whimsical board."},whimsicalKeywords:{id:"newBlock.whimsical.fuzzySearchKeywords",defaultMessage:"Whimsical"},hexDescription:{id:"newBlock.hex.description",defaultMessage:"Embed a Hex cell."},hexKeywords:{id:"newBlock.hex.fuzzySearchKeywords",defaultMessage:"Hex"},deepnoteDescription:{id:"newBlock.deepnote.description",defaultMessage:"Embed a Deepnote block."},deepnoteKeywords:{id:"newBlock.deepnote.fuzzySearchKeywords",defaultMessage:"Deepnote"},miroDescription:{id:"newBlock.miro.description",defaultMessage:"Embed a Miro board."},miroKeywords:{id:"newBlock.miro.fuzzySearchKeywords",defaultMessage:"Miro"},abstractDescription:{id:"newBlock.abstract.description",defaultMessage:"Embed an Abstract project."},abstractKeywords:{id:"newBlock.abstract.fuzzySearchKeywords",defaultMessage:"Abstract"},sketchDescription:{id:"newBlock.sketch.description",defaultMessage:"Embed a Sketch document."},sketchKeywords:{id:"newBlock.sketch.fuzzySearchKeywords",defaultMessage:"Sketch"},excalidrawDescription:{id:"newBlock.excalidraw.description",defaultMessage:"Embed an Excalidraw whiteboard."},excalidrawKeywords:{id:"newBlock.excalidraw.fuzzySearchKeywords",defaultMessage:"Excalidraw"},replitDescription:{id:"newBlock.replit.description",defaultMessage:"Embed a repl."},replitKeywords:{id:"newBlock.replit.fuzzySearchKeywords",defaultMessage:"Replit"},databaseDescription:{id:"newBlock.database.description",defaultMessage:"Create a new database."},inlineTimelineDatabaseTitle:{id:"newBlock.inlineTimelineDatabase.title",defaultMessage:"Timeline database - Inline"},inlineTimelineDatabaseDescription:{id:"newBlock.inlineTimelineDatabase.description",defaultMessage:"Add a Timeline database to this page."},inlineTimelineDatabaseKeywords:{id:"newBlock.inlineTimelineDatabase.fuzzySearchKeywords",defaultMessage:"Timeline database Inline"},fullPageTableDatabaseTitle:{id:"newBlock.fullPageTableDatabase.title",defaultMessage:"Table database - Full page"},fullPageTableDatabaseDescription:{id:"newBlock.fullPageTableDatabase.description",defaultMessage:"Add a Table database as a sub-page."},fullPageTableDatabaseKeywords:{id:"newBlock.fullPageTableDatabase.fuzzySearchKeywords",defaultMessage:"Table database Full page"},fullPageBoardDatabaseTitle:{id:"newBlock.fullPageBoardDatabase.title",defaultMessage:"Board database - Full page"},fullPageBoardDatabaseDescription:{id:"newBlock.fullPageBoardDatabase.description",defaultMessage:"Add a Board database as a sub-page."},fullPageBoardDatabaseKeywords:{id:"newBlock.fullPageBoardDatabase.fuzzySearchKeywords",defaultMessage:"Board database Full page"},fullPageGalleryDatabaseTitle:{id:"newBlock.fullPageGalleryDatabase.title",defaultMessage:"Gallery database - Full page"},fullPageGalleryDatabaseDescription:{id:"newBlock.fullPageGalleryDatabase.description",defaultMessage:"Add a Gallery database as a sub-page."},fullPageGalleryDatabaseKeywords:{id:"newBlock.fullPageGalleryDatabase.fuzzySearchKeywords",defaultMessage:"Gallery database - Full page"},fullPageListDatabaseTitle:{id:"newBlock.fullPageListDatabase.title",defaultMessage:"List database - Full page"},fullPageListDatabaseDescription:{id:"newBlock.fullPageListDatabase.description",defaultMessage:"Add a List database as a sub-page."},fullPageListDatabaseKeywords:{id:"newBlock.fullPageListDatabase.fuzzySearchKeywords",defaultMessage:"List database Full page"},fullPageCalendarDatabaseTitle:{id:"newBlock.fullPageCalendarDatabase.title",defaultMessage:"Calendar database - Full page"},fullPageCalendarDatabaseDescription:{id:"newBlock.fullPageCalendarDatabase.description",defaultMessage:"Add a Calendar database as a sub-page."},fullPageCalendarDatabaseKeywords:{id:"newBlock.fullPageCalendarDatabase.fuzzySearchKeywords",defaultMessage:"Calendar database Full page"},fullPageTimelineDatabaseTitle:{id:"newBlock.fullPageTimelineDatabase.title",defaultMessage:"Timeline database - Full page"},fullPageTimelineDatabaseDescription:{id:"newBlock.fullPageTimelineDatabase.description",defaultMessage:"Add a Timeline database as a sub-page."},fullPageTimelineDatabaseKeywords:{id:"newBlock.fullPageTimelineDatabase.fuzzySearchKeywords",defaultMessage:"Timeline database Full page"},simpleTableDescription:{id:"newBlock.simple_table.description",defaultMessage:"Add simple tabular content to your page."},simpleTableKeywords:{id:"newBlock.simple_table.fuzzySearchKeywords",defaultMessage:"Table"},tabDescription:{id:"newBlock.tab.description",defaultMessage:"Organize content in tabs."},tabKeywords:{id:"newBlock.tab.keywords",defaultMessage:"tab tabs tabbed switch toggle"},toggleFormatHeaderTitle:{id:"newBlock.toggleFormatHeader.title",defaultMessage:"Toggle heading 1"},toggleFormatHeaderDescription:{id:"newBlock.toggleFormatHeader.description",defaultMessage:"Hide content inside a large heading."},toggleFormatHeaderKeywords:{id:"newBlock.toggleFormatHeader.fuzzySearchKeywords",defaultMessage:"toggle heading expand 1 h1 th1"},toggleFormatSubHeaderTitle:{id:"newBlock.toggleFormatSubHeader.title",defaultMessage:"Toggle heading 2"},toggleFormatSubHeaderDescription:{id:"newBlock.toggleFormatSubHeader.description",defaultMessage:"Hide content inside a medium heading."},toggleFormatSubHeaderKeywords:{id:"newBlock.toggleFormatSubHeader.fuzzySearchKeywords",defaultMessage:"toggle sub heading expand 2 h2 two th2"},toggleFormatSubSubHeaderTitle:{id:"newBlock.toggleFormatSubSubHeader.title",defaultMessage:"Toggle heading 3"},toggleFormatSubSubHeaderDescription:{id:"newBlock.toggleFormatSubSubHeader.description",defaultMessage:"Hide content inside a small heading."},toggleFormatSubSubHeaderKeywords:{id:"newBlock.toggleFormatSubSubHeader.fuzzySearchKeywords",defaultMessage:"toggle subsub heading expand 3 h3 three th3"},columnListDescription:{id:"newBlock.columnList.description",defaultMessage:"Create columns of blocks."},columnListKeywords:{id:"newBlock.columnList.fuzzySearchKeywords",defaultMessage:"col column columns block vertical"},column2Title:{id:"newBlock.column2.title",defaultMessage:"2 columns"},column2Description:{id:"newBlock.column2.description",defaultMessage:"Create 2 columns of blocks."},column2Keywords:{id:"newBlock.column2.fuzzySearchKeywords",defaultMessage:"col c2 col2 columns block vertical 2col two"},column3Title:{id:"newBlock.column3.title",defaultMessage:"3 columns"},column3Description:{id:"newBlock.column3.description",defaultMessage:"Create 3 columns of blocks."},column3Keywords:{id:"newBlock.column3.fuzzySearchKeywords",defaultMessage:"col c3 col3 column3 columns 3col three"},column4Title:{id:"newBlock.column4.title",defaultMessage:"4 columns"},column4Description:{id:"newBlock.column4.description",defaultMessage:"Create 4 columns of blocks."},column4Keywords:{id:"newBlock.column4.fuzzySearchKeywords",defaultMessage:"col c4 col4 column4 columns 4col four"},column5Title:{id:"newBlock.column5.title",defaultMessage:"5 columns"},column5Description:{id:"newBlock.column5.description",defaultMessage:"Create 5 columns of blocks."},column5Keywords:{id:"newBlock.column5.fuzzySearchKeywords",defaultMessage:"col c5 col5 column5 columns 5col five"},mermaidCodeTitle:{id:"newBlock.mermaidCode.title",defaultMessage:"Code - Mermaid"},mermaidCodeDescription:{id:"newBlock.mermaidCode.description",defaultMessage:"Create a diagram by writing code."},mermaidCodeKeywords:{id:"newBlock.mermaidCode.fuzzySearchKeywords",defaultMessage:"mermaid diagram graphviz flowchart code"},aiFreePromptBlockTitle:{id:"newBlock.aiFreePromptBlock.title2",defaultMessage:"AI Block"},aiFreePromptDescription:{id:"newBlock.aiFreePromptBlock.description",defaultMessage:"Generate content from any instruction."},aiFreePromptKeywords:{id:"newBlock.aiFreePromptBlock.fuzzySearchKeywords",defaultMessage:"ask help question prompt ai custom block content"},drawingDescription:{id:"newBlock.drawing.description",defaultMessage:"Draw and diagram on an infinite canvas."},drawingKeywords:{id:"newBlock.drawing.fuzzySearchKeywords",defaultMessage:"drawing diagram canvas illustration draw sketch tldraw doodle mindmap architecture paint pen"},slideDescription:{id:"newBlock.slide.description",defaultMessage:"Create a presentable slide."},slideKeywords:{id:"newBlock.slide.fuzzySearchKeywords",defaultMessage:"slide present presentation"},transcriptionDescription:{id:"newBlock.transcription.description",defaultMessage:"Record and transcribe audio"},transcriptionKeywords:{id:"newBlock.transcription.fuzzySearchKeywords",defaultMessage:"transcription meeting notes dictation audio speech"},aiSectionBlockTitle:{id:"newBlock.aiSection.title",defaultMessage:"AI Section"},aiSectionKeywords:{id:"newBlock.aiSection.fuzzySearchKeywords",defaultMessage:"ai section heading meeting note summary action items"},asanaImportTitle:{id:"newBlock.asanaImport.import",defaultMessage:"Asana"},asanaImportDescription:{id:"newBlock.asanaImport.description",defaultMessage:"Bring projects and tasks form Asana into Notion."},asanaImportKeywords:{id:"newBlock.asanaImport.fuzzySearchKeywords",defaultMessage:"Asana Projects Tasks Import"},confluenceApiImportTitle:{id:"newBlock.confluenceApiImport.import",defaultMessage:"Confluence"},confluenceApiImportDescription:{id:"newBlock.confluenceApiImport.description",defaultMessage:"Bring documents from Confluence via API into Notion."},confluenceApiImportKeywords:{id:"newBlock.confluenceApiImport.fuzzySearchKeywords",defaultMessage:"Confluence"},googleDocsImportTitle:{id:"newBlock.googleDocsImport.import",defaultMessage:"Google Docs"},googleDocsImportDescription:{id:"newBlock.googleDocsImport.description",defaultMessage:"Bring documents from Google Docs into Notion."},googleDocsImportKeywords:{id:"newBlock.googleDocsImport.fuzzySearchKeywords",defaultMessage:"Google Docs Import"},dropboxPaperImportTitle:{id:"newBlock.dropboxPaperImport.import",defaultMessage:"Dropbox Paper"},dropboxPaperImportDescription:{id:"newBlock.dropboxPaperImport.description",defaultMessage:"Bring documents from Dropbox Paper into Notion."},dropboxPaperImportKeywords:{id:"newBlock.dropboxPaperImport.fuzzySearchKeywords",defaultMessage:"Dropbox Paper Import"},evernoteImportTitle:{id:"newBlock.evernoteImport.import",defaultMessage:"Evernote"},evernoteImportDescription:{id:"newBlock.evernoteImport.description",defaultMessage:"Bring notes from Evernote into Notion."},evernoteImportKeywords:{id:"newBlock.evernoteImport.fuzzySearchKeywords",defaultMessage:"Evernote Import"},wordImportTitle:{id:"newBlock.wordImport.import",defaultMessage:"Word"},wordImportDescription:{id:"newBlock.wordImport.description",defaultMessage:"Bring documents from Microsoft Word into Notion."},wordImportKeywords:{id:"newBlock.wordImport.fuzzySearchKeywords",defaultMessage:"Word Import"},workflowyImportTitle:{id:"newBlock.workflowyImport.import",defaultMessage:"Workflowy"},workflowyImportDescription:{id:"newBlock.workflowyImport.description",defaultMessage:"Bring documents from Workflowy into Notion."},workflowyImportKeywords:{id:"newBlock.workflowyImport.fuzzySearchKeywords",defaultMessage:"Workflowy Import"},mondayImportTitle:{id:"newBlock.mondayImport.import",defaultMessage:"Monday"},mondayImportDescription:{id:"newBlock.mondayImport.description",defaultMessage:"Bring projects & tasks from Monday into Notion."},mondayImportKeywords:{id:"newBlock.mondayImport.fuzzySearchKeywords",defaultMessage:"Monday Import"},trelloImportTitle:{id:"newBlock.trelloImport.import",defaultMessage:"Trello"},trelloImportDescription:{id:"newBlock.trelloImport.description",defaultMessage:"Bring projects & tasks from Trello into Notion."},trelloImportKeywords:{id:"newBlock.trelloImport.fuzzySearchKeywords",defaultMessage:"Trello Import"},quipImportTitle:{id:"newBlock.quipImport.import",defaultMessage:"Quip"},quipImportDescription:{id:"newBlock.quipImport.description",defaultMessage:"Bring documents from Quip into Notion."},quipImportKeywords:{id:"newBlock.quipImport.fuzzySearchKeywords",defaultMessage:"Quip Import"},csvImportTitle:{id:"newBlock.csvImport.import",defaultMessage:"CSV"},csvImportDescription:{id:"newBlock.csvImport.description",defaultMessage:"Bring data from CSV into Notion."},csvImportKeywords:{id:"newBlock.csvImport.fuzzySearchKeywords",defaultMessage:"CSV Import"},genericImportTitle:{id:"newBlock.genericImport.import",defaultMessage:"ZIP"},genericImportDescription:{id:"newBlock.genericImport.description",defaultMessage:"Bring data from other tools into Notion."},genericImportKeywords:{id:"newBlock.genericImport.fuzzySearchKeywords",defaultMessage:"Generic Universal Zip Import"},htmlImportTitle:{id:"newBlock.htmlImport.import",defaultMessage:"HTML"},htmlImportDescription:{id:"newBlock.htmlImport.description",defaultMessage:"Bring data from HTML into Notion."},htmlImportKeywords:{id:"newBlock.htmlImport.fuzzySearchKeywords",defaultMessage:"HTML Import"},markdownImportTitle:{id:"newBlock.markdownImport.import",defaultMessage:"Text and Markdown"},markdownImportDescription:{id:"newBlock.markdownImport.description",defaultMessage:"Bring data from text and markdown into Notion."},markdownImportKeywords:{id:"newBlock.markdownImport.fuzzySearchKeywords",defaultMessage:"Text Markdown Import"},pdfImportTitle:{id:"newBlock.pdfImport.import",defaultMessage:"PDF"},pdfImportDescription:{id:"newBlock.pdfImport.description",defaultMessage:"Bring data from PDF into Notion."},pdfImportKeywords:{id:"newBlock.pdfImport.fuzzySearchKeywords",defaultMessage:"PDF Import"}});function He(e){const{key:t,displayName:o,fuzzySearchKeywords:n,blockType:r,thumbnail:i,mobileNativeThumbnail:a,thumbnailPadding:s,tooltipPhoto:l,description:c,shouldShow:d,isDisabled:u,disabledTooltipMessage:p,badge:m,postCreateCallback:g,collectionViewType:f,isToggleable:v,icon:h}=e,_=K().A.formatMessage(n),b=_!==n.defaultMessage?`${_} ${n.defaultMessage}`:_,y=e.createTemplate??(()=>q().RecordMapLegacy.create({[H().ev]:{root:{id:"root",type:r}}}));return{key:t,displayName:K().A.formatMessage(o),analyticsName:o.defaultMessage,searchName:b,thumbnail:i,mobileNativeThumbnail:a,thumbnailPadding:s,tooltipPhoto:l,description:c?K().A.formatMessage(c):void 0,templateRootBlockId:"root",blockType:r,formatBlockType:We(t),createTemplate:y,shouldShow:d,isDisabled:u,disabledTooltipMessage:p,badge:m,postCreateCallback:g,collectionViewType:f,isToggleable:v,hasTransformShortcut:H().Ky[r],icon:h}}function We(e){if((0,i().pL)(e))return e}function Ke(e){const{key:t,displayName:o,fuzzySearchKeywords:n,thumbnail:r,icon:i,tooltipPhoto:a,description:s,shouldShow:l,badge:c,postCreateCallback:d,collectionViewType:u,isToggleable:p,action:m}=e,g=K().A.formatMessage(n),f=g!==n.defaultMessage?`${g} ${n.defaultMessage}`:g;return{key:t,displayName:K().A.formatMessage(o),analyticsName:o.defaultMessage,searchName:f,thumbnail:r,icon:i,tooltipPhoto:a,description:s?K().A.formatMessage(s):void 0,templateRootBlockId:"root",shouldShow:l,badge:c,postCreateCallback:d,collectionViewType:u,isToggleable:p,action:m}}const Ge={[i().bF.asanaImport]:Ke({key:i().bF.asanaImport,displayName:qe.asanaImportTitle,fuzzySearchKeywords:qe.asanaImportKeywords,thumbnail:r().A.images.import.asanaPng,icon:()=>Q,description:qe.asanaImportDescription,action:()=>{Oe().A.setState({...Oe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"asana",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[i().bF.confluenceApiImport]:Ke({key:i().bF.confluenceApiImport,displayName:qe.confluenceApiImportTitle,fuzzySearchKeywords:qe.confluenceApiImportKeywords,thumbnail:r().A.images.import.confluencePng,icon:e=>e?J:ee,description:qe.confluenceApiImportDescription,action:()=>{Oe().A.setState({...Oe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"confluenceApi",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[i().bF.googleDocsImport]:Ke({key:i().bF.googleDocsImport,displayName:qe.googleDocsImportTitle,fuzzySearchKeywords:qe.googleDocsImportKeywords,thumbnail:r().A.images.import.googleDocsPng,icon:e=>e?ue:pe,description:qe.googleDocsImportDescription,badge:"new",action:()=>{Oe().A.setState({...Oe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"gdocs",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[i().bF.dropboxPaperImport]:Ke({key:i().bF.dropboxPaperImport,displayName:qe.dropboxPaperImportTitle,fuzzySearchKeywords:qe.dropboxPaperImportKeywords,thumbnail:r().A.images.import.dropboxPaperPng,icon:()=>oe,description:qe.dropboxPaperImportDescription,action:()=>{Oe().A.setState({...Oe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"dropbox",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[i().bF.evernoteImport]:Ke({key:i().bF.evernoteImport,displayName:qe.evernoteImportTitle,fuzzySearchKeywords:qe.evernoteImportKeywords,thumbnail:r().A.images.import.evernotePng,icon:()=>ne,description:qe.evernoteImportDescription,action:()=>{Oe().A.setState({...Oe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"evernote",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[i().bF.mondayImport]:Ke({key:i().bF.mondayImport,displayName:qe.mondayImportTitle,fuzzySearchKeywords:qe.mondayImportKeywords,thumbnail:r().A.images.import.mondayPng,icon:()=>Se,description:qe.mondayImportDescription,action:()=>{Oe().A.setState({...Oe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"monday",openedFrom:"slash_command"})},shouldShow:e=>Qe()&&(0,o(397292).c)()}),[i().bF.quipImport]:Ke({key:i().bF.quipImport,displayName:qe.quipImportTitle,fuzzySearchKeywords:qe.quipImportKeywords,thumbnail:r().A.images.import.quipPng,icon:e=>e?we:ke,description:qe.quipImportDescription,action:()=>{Oe().A.setState({...Oe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"quip",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[i().bF.trelloImport]:Ke({key:i().bF.trelloImport,displayName:qe.trelloImportTitle,fuzzySearchKeywords:qe.trelloImportKeywords,thumbnail:r().A.images.import.trelloPng,icon:e=>e?Te:Me,description:qe.trelloImportDescription,action:()=>{Oe().A.setState({...Oe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"trello",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[i().bF.workflowyImport]:Ke({key:i().bF.workflowyImport,displayName:qe.workflowyImportTitle,fuzzySearchKeywords:qe.workflowyImportKeywords,thumbnail:r().A.images.import.workflowyPng,icon:e=>e?Fe:Ue,description:qe.workflowyImportDescription,action:()=>{Oe().A.setState({...Oe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"workflowy",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[i().bF.wordImport]:Ke({key:i().bF.wordImport,displayName:qe.wordImportTitle,fuzzySearchKeywords:qe.wordImportKeywords,thumbnail:r().A.images.import.wordPng,icon:()=>Le,description:qe.wordImportDescription,action:()=>{Oe().A.setState({...Oe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"docx",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[i().bF.csvImport]:Ke({key:i().bF.csvImport,displayName:qe.csvImportTitle,fuzzySearchKeywords:qe.csvImportKeywords,thumbnail:r().A.images.import.csvPng,icon:()=>m,description:qe.csvImportDescription,action:()=>{Oe().A.setState({...Oe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"csv",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[i().bF.htmlImport]:Ke({key:i().bF.htmlImport,displayName:qe.htmlImportTitle,fuzzySearchKeywords:qe.htmlImportKeywords,thumbnail:r().A.images.import.htmlPng,icon:()=>C,description:qe.htmlImportDescription,action:()=>{Oe().A.setState({...Oe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"html",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[i().bF.markdownImport]:Ke({key:i().bF.markdownImport,displayName:qe.markdownImportTitle,fuzzySearchKeywords:qe.markdownImportKeywords,thumbnail:r().A.images.import.textPng,icon:()=>N,description:qe.markdownImportDescription,action:()=>{Oe().A.setState({...Oe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"markdown",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[i().bF.genericImport]:Ke({key:i().bF.genericImport,displayName:qe.genericImportTitle,fuzzySearchKeywords:qe.genericImportKeywords,thumbnail:r().A.images.import.importPng,description:qe.genericImportDescription,action:()=>{Oe().A.setState({...Oe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"genericImporter",openedFrom:"slash_command"})},shouldShow:e=>Qe()&&(0,o(310795).LB)()}),[i().bF.pdfImport]:Ke({key:i().bF.pdfImport,displayName:qe.pdfImportTitle,fuzzySearchKeywords:qe.pdfImportKeywords,thumbnail:r().A.images.import.pdfSvg,description:qe.pdfImportDescription,badge:"beta",action:()=>{Oe().A.setState({...Oe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"pdf",openedFrom:"slash_command"})},shouldShow:e=>Qe()&&(0,o(874096).s)()})},$e={[i().xd.text]:He({key:i().xd.text,blockType:i().xd.text,displayName:W().Q.textTitle,fuzzySearchKeywords:qe.textKeywords,thumbnail:r().A.images.blocks.textPng,icon:()=>D,mobileNativeThumbnail:()=>r().A.images.mab.blocks.textSvg,description:qe.textDescription,tooltipPhoto:r().A.images.tooltips.blocks.textPng}),[i().xd.encryptedText]:He({key:i().xd.encryptedText,blockType:i().xd.encryptedText,displayName:W().Q.encryptedTextTitle,fuzzySearchKeywords:qe.textKeywords,thumbnail:r().A.images.blocks.textPng,icon:()=>o(721265).p,mobileNativeThumbnail:()=>r().A.images.mab.blocks.encryptedTextSvg,description:qe.encryptedTextDescription,tooltipPhoto:r().A.images.tooltips.blocks.textPng}),[i().xd.page]:He({key:i().xd.page,blockType:i().xd.page,displayName:W().Q.pageTitle,fuzzySearchKeywords:qe.pageKeywords,thumbnail:r().A.images.blocks.pagePng,icon:()=>o(155098).U,mobileNativeThumbnail:()=>r().A.images.mab.blocks.pageSvg,description:qe.pageDescription,tooltipPhoto:r().A.images.tooltips.blocks.pagePng}),[i().xd.linkToPage]:He({key:i().xd.linkToPage,blockType:i().xd.linkToPage,displayName:W().Q.linkToPageTitle,fuzzySearchKeywords:qe.linkToPageKeywords,thumbnail:r().A.images.blocks.linkPng,icon:()=>o(956152).C,mobileNativeThumbnail:()=>r().A.images.mab.blocks.linkToPageSvg,description:qe.linkToPageDescription,tooltipPhoto:r().A.images.tooltips.blocks.linkToPagePng}),[i().xd.transclusionContainer]:He({key:i().xd.transclusionContainer,blockType:i().xd.transclusionContainer,displayName:W().Q.transclusionContainerTitle,fuzzySearchKeywords:qe.transclusionContainerKeywords,thumbnail:r().A.images.blocks.transclusionPng,icon:()=>R,mobileNativeThumbnail:()=>r().A.images.mab.advanced.syncedBlockSvg,description:qe.transclusionContainerDescription,tooltipPhoto:r().A.images.tooltips.blocks.transclusionPng,shouldShow:e=>!(0,Ve().uAU)(e),createTemplate:e=>je().jY()}),[i().xd.toDo]:He({key:i().xd.toDo,blockType:i().xd.toDo,displayName:W().Q.toDoTitle,fuzzySearchKeywords:qe.toDoKeywords,thumbnail:r().A.images.blocks.toDoPng,icon:()=>L,mobileNativeThumbnail:()=>r().A.images.mab.blocks.toDoSvg,description:qe.toDoDescription,tooltipPhoto:r().A.images.tooltips.blocks.toDoListPng}),[i().xd.header]:He({key:i().xd.header,blockType:i().xd.header,displayName:W().Q.headerTitle,fuzzySearchKeywords:qe.headerKeywords,thumbnail:r().A.images.blocks.headerPng,icon:()=>I,mobileNativeThumbnail:()=>r().A.images.mab.blocks.headerH1Svg,description:qe.headerDescription,tooltipPhoto:r().A.images.tooltips.blocks.headerPng}),[i().xd.subHeader]:He({key:i().xd.subHeader,blockType:i().xd.subHeader,displayName:W().Q.subHeaderTitle,fuzzySearchKeywords:qe.subHeaderKeywords,thumbnail:r().A.images.blocks.subheaderPng,mobileNativeThumbnail:()=>r().A.images.mab.blocks.headerH2Svg,icon:()=>A,description:qe.subHeaderDescription,tooltipPhoto:r().A.images.tooltips.blocks.subHeaderPng}),[i().xd.subSubHeader]:He({key:i().xd.subSubHeader,blockType:i().xd.subSubHeader,displayName:W().Q.subSubHeaderTitle,fuzzySearchKeywords:qe.subSubHeaderKeywords,thumbnail:r().A.images.blocks.subsubheaderPng,icon:()=>x,mobileNativeThumbnail:()=>r().A.images.mab.blocks.headerH3Svg,description:qe.subSubHeaderDescription,tooltipPhoto:r().A.images.tooltips.blocks.subsubheaderPng}),[i().xd.image]:He({key:i().xd.image,blockType:i().xd.image,displayName:W().Q.imageTitle,fuzzySearchKeywords:qe.imageKeywords,description:qe.imageDescription,tooltipPhoto:r().A.images.tooltips.blocks.imagePng,thumbnail:r().A.images.blocks.imagePng,icon:()=>T,mobileNativeThumbnail:()=>r().A.images.mab.media.imageBlockSvg}),[i().xd.bookmark]:He({key:i().xd.bookmark,blockType:i().xd.bookmark,displayName:W().Q.bookmarkTitle,fuzzySearchKeywords:qe.bookmarkKeywords,thumbnail:r().A.images.blocks.webBookmarkPng,icon:()=>c,mobileNativeThumbnail:()=>r().A.images.mab.media.bookmarkSvg,description:qe.bookmarkDescription,tooltipPhoto:r().A.images.tooltips.blocks.webBookmarkPng}),[i().xd.divider]:He({key:i().xd.divider,blockType:i().xd.divider,displayName:W().Q.dividerTitle,fuzzySearchKeywords:qe.dividerKeywords,thumbnail:r().A.images.blocks.dividerPng,icon:()=>f,mobileNativeThumbnail:()=>r().A.images.mab.blocks.dividerSvg,description:qe.dividerDescription,tooltipPhoto:r().A.images.tooltips.blocks.dividerPng}),[i().xd.code]:He({key:i().xd.code,blockType:i().xd.code,displayName:W().Q.codeTitle,fuzzySearchKeywords:qe.codeKeywords,thumbnail:r().A.images.blocks.codePng,icon:()=>p,mobileNativeThumbnail:()=>r().A.images.mab.media.codeSvg,description:qe.codeDescription,tooltipPhoto:r().A.images.tooltips.blocks.codePng}),[i().xd.quote]:He({key:i().xd.quote,blockType:i().xd.quote,displayName:W().Q.quoteTitle,fuzzySearchKeywords:qe.quoteKeywords,thumbnail:r().A.images.blocks.quotePng,icon:()=>B,mobileNativeThumbnail:()=>r().A.images.mab.blocks.quoteSvg,description:qe.quoteDescription,tooltipPhoto:r().A.images.tooltips.blocks.quotePng}),[i().xd.bulletedList]:He({key:i().xd.bulletedList,blockType:i().xd.bulletedList,displayName:W().Q.bulletedListTitle,fuzzySearchKeywords:qe.bulletedListKeywords,thumbnail:r().A.images.blocks.bulletedListPng,icon:()=>d,mobileNativeThumbnail:()=>r().A.images.mab.blocks.bulletedListSvg,description:qe.bulletedListDescription,tooltipPhoto:r().A.images.tooltips.blocks.bulletedListPng}),[i().xd.numberedList]:He({key:i().xd.numberedList,blockType:i().xd.numberedList,displayName:W().Q.numberedListTitle,fuzzySearchKeywords:qe.numberedListKeywords,thumbnail:r().A.images.blocks.numberedListPng,icon:()=>P,mobileNativeThumbnail:()=>r().A.images.mab.blocks.numberedListSvg,description:qe.numberedListDescription,tooltipPhoto:r().A.images.tooltips.blocks.numberedListPng}),[i().xd.toggle]:He({key:i().xd.toggle,blockType:i().xd.toggle,displayName:W().Q.toggleTitle,fuzzySearchKeywords:qe.toggleKeywords,thumbnail:r().A.images.blocks.togglePng,icon:()=>V,mobileNativeThumbnail:()=>r().A.images.mab.blocks.toggleListSvg,description:qe.toggleDescription,tooltipPhoto:r().A.images.tooltips.blocks.toggleListPng,isToggleable:!0}),[i().xd.file]:He({key:i().xd.file,blockType:i().xd.file,displayName:W().Q.fileTitle,fuzzySearchKeywords:qe.fileKeywords,thumbnail:r().A.images.blocks.filePng,icon:()=>b,mobileNativeThumbnail:()=>r().A.images.mab.media.fileSvg,tooltipPhoto:r().A.images.tooltips.blocks.filePng,description:qe.fileDescription}),[i().xd.video]:He({key:i().xd.video,blockType:i().xd.video,displayName:W().Q.videoTitle,fuzzySearchKeywords:qe.videoKeywords,thumbnail:r().A.images.blocks.videoPng,icon:()=>z,mobileNativeThumbnail:()=>r().A.images.mab.media.videoSvg,tooltipPhoto:r().A.images.tooltips.blocks.videoPng,description:qe.videoDescription}),[i().xd.audio]:He({key:i().xd.audio,blockType:i().xd.audio,displayName:W().Q.audioTitle,fuzzySearchKeywords:qe.audioKeywords,thumbnail:r().A.images.blocks.audioPng,icon:()=>l,mobileNativeThumbnail:()=>r().A.images.mab.media.audioSvg,description:qe.audioDescription}),[i().xd.embed]:He({key:i().xd.embed,blockType:i().xd.embed,displayName:W().Q.embedTitle,fuzzySearchKeywords:qe.embedKeywords,thumbnail:r().A.images.blocks.embedPng,icon:()=>h,mobileNativeThumbnail:()=>r().A.images.mab.embeds.embedsSvg,description:qe.embedDescription}),[i().xd.drive]:He({key:i().xd.drive,blockType:i().xd.drive,displayName:W().Q.driveTitle,fuzzySearchKeywords:qe.driveKeywords,thumbnail:r().A.images.blocks.drivePng,icon:()=>o(284030).u,description:qe.driveDescription,shouldShow:e=>(0,Ve().g$R)()}),[i().xd.figma]:He({key:i().xd.figma,blockType:i().xd.figma,displayName:W().Q.figmaTitle,fuzzySearchKeywords:qe.figmaKeywords,thumbnail:r().A.images.blocks.figmaPng,icon:()=>ae,description:qe.figmaDescription}),[i().xd.loom]:He({key:i().xd.loom,blockType:i().xd.loom,displayName:W().Q.loomTitle,fuzzySearchKeywords:qe.loomKeywords,thumbnail:r().A.images.blocks.loomPng,thumbnailPadding:2,icon:()=>ve,description:qe.loomDescription}),[i().xd.typeform]:He({key:i().xd.typeform,blockType:i().xd.typeform,displayName:W().Q.typeformTitle,fuzzySearchKeywords:qe.typeformKeywords,thumbnail:r().A.images.blocks.typeformPng,icon:e=>e?Re:Ee,description:qe.typeformDescription}),[i().xd.codepen]:He({key:i().xd.codepen,blockType:i().xd.codepen,displayName:W().Q.codepenTitle,fuzzySearchKeywords:qe.codepenKeywords,thumbnail:r().A.images.blocks.codepenPng,icon:e=>e?Z:X,description:qe.codepenDescription}),[i().xd.tweet]:He({key:i().xd.tweet,blockType:i().xd.tweet,displayName:W().Q.tweetTitle,thumbnailPadding:8,fuzzySearchKeywords:qe.tweetKeywords,thumbnail:r().A.images.blocks.twitterPng,icon:e=>e?Pe:Be,description:qe.tweetDescription}),[i().xd.gist]:He({key:i().xd.gist,blockType:i().xd.gist,displayName:W().Q.gistTitle,fuzzySearchKeywords:qe.gistKeywords,thumbnail:r().A.images.blocks.githubPng,thumbnailPadding:2,icon:e=>e?ce:de,description:qe.gistDescription}),[i().xd.maps]:He({key:i().xd.maps,blockType:i().xd.maps,displayName:W().Q.mapsTitle,fuzzySearchKeywords:qe.mapsKeywords,thumbnail:r().A.images.blocks.mapsPng,icon:()=>he,description:qe.mapsDescription}),[i().xd.framer]:He({key:i().xd.framer,blockType:i().xd.framer,displayName:W().Q.framerTitle,fuzzySearchKeywords:qe.framerKeywords,thumbnail:r().A.images.blocks.framerPng,icon:e=>e?se:le,description:qe.framerDescription}),[i().xd.invision]:He({key:i().xd.invision,blockType:i().xd.invision,displayName:W().Q.invisionTitle,fuzzySearchKeywords:qe.invisionKeywords,thumbnail:r().A.images.blocks.invisionPng,icon:()=>fe,description:qe.invisionDescription}),[i().xd.equation]:He({key:i().xd.equation,blockType:i().xd.equation,displayName:W().Q.equationTitle,fuzzySearchKeywords:qe.equationKeywords,thumbnail:r().A.images.blocks.texPng,icon:()=>_,mobileNativeThumbnail:()=>r().A.images.mab.advanced.blockEquationSvg,tooltipPhoto:r().A.images.tooltips.blocks.mathPng,description:qe.equationDescription}),[i().xd.pdf]:He({key:i().xd.pdf,blockType:i().xd.pdf,displayName:W().Q.pdfTitle,fuzzySearchKeywords:qe.pdfKeywords,thumbnail:r().A.images.blocks.pdfPng,thumbnailPadding:6,description:qe.pdfDescription}),[i().xd.factory]:He({displayName:W().Q.factoryTitle,fuzzySearchKeywords:qe.factoryKeywords,thumbnail:r().A.images.blocks.templateButtonPng,icon:()=>v,key:i().xd.factory,blockType:i().xd.factory,description:qe.factoryDescription,tooltipPhoto:r().A.images.tooltips.blocks.templateButtonPng,createTemplate:je().Bw,shouldShow:()=>!1}),[i().xd.button]:He({displayName:W().Q.buttonTitle,fuzzySearchKeywords:qe.buttonKeywords,thumbnail:r().A.images.blocks.templateButtonPng,icon:()=>o(46220).S,mobileNativeThumbnail:()=>r().A.images.mab.advanced.buttonSvg,key:i().xd.button,blockType:i().xd.button,description:qe.buttonDescription,tooltipPhoto:r().A.images.tooltips.blocks.templateButtonPng,createTemplate:je().Tf}),[i().xd.breadcrumb]:He({displayName:W().Q.breadcrumbTitle,thumbnail:r().A.images.blocks.breadcrumbPng,icon:()=>y,mobileNativeThumbnail:()=>r().A.images.mab.advanced.breadcrumbSvg,tooltipPhoto:r().A.images.tooltips.blocks.breadcrumbPng,description:qe.breadcrumbDescription,fuzzySearchKeywords:qe.breadcrumbKeywords,key:i().xd.breadcrumb,blockType:i().xd.breadcrumb}),[i().xd.callout]:He({key:i().xd.callout,blockType:i().xd.callout,displayName:W().Q.calloutTitle,thumbnail:r().A.images.blocks.calloutPng,icon:()=>u,mobileNativeThumbnail:()=>r().A.images.mab.blocks.calloutSvg,description:qe.calloutDescription,fuzzySearchKeywords:qe.calloutKeywords,tooltipPhoto:r().A.images.tooltips.blocks.calloutPng,createTemplate:je().n2}),[i().xd.tableOfContents]:He({displayName:W().Q.tableOfContentsTitle,fuzzySearchKeywords:qe.table_of_contentsKeywords,thumbnail:r().A.images.blocks.tableOfContentsPng,icon:()=>E,mobileNativeThumbnail:()=>r().A.images.mab.advanced.tableOfContentsSvg,tooltipPhoto:r().A.images.tooltips.blocks.tableOfContentsPng,description:qe.table_of_contentsDescription,key:i().xd.tableOfContents,blockType:i().xd.tableOfContents}),[i().xd.slide]:He({key:i().xd.slide,blockType:i().xd.slide,displayName:W().Q.slideTitle,thumbnail:r().A.images.blocks.slideblockPng,icon:()=>g,description:qe.slideDescription,fuzzySearchKeywords:qe.slideKeywords,tooltipPhoto:r().A.images.blocks.slideblockPng,shouldShow:e=>(0,Ve().QTI)(e)}),[i().xd.transcription]:He({key:i().xd.transcription,blockType:i().xd.transcription,displayName:W().Q.transcriptionTitle,thumbnail:r().A.images.blocks.templateButtonPng,icon:()=>o(284611).b,description:qe.transcriptionDescription,fuzzySearchKeywords:qe.transcriptionKeywords,badge:"alpha",shouldShow:()=>(0,Ve().xIn)(),createTemplate:()=>je().Hg()}),[i().xd.whimsical]:He({key:i().xd.whimsical,blockType:i().xd.whimsical,displayName:W().Q.whimsicalTitle,fuzzySearchKeywords:qe.whimsicalKeywords,thumbnail:r().A.images.blocks.whimsicalPng,icon:e=>e?De:Ne,description:qe.whimsicalDescription}),[i().xd.mixpanel]:He({key:i().xd.mixpanel,blockType:i().xd.mixpanel,displayName:W().Q.mixpanelTitle,fuzzySearchKeywords:qe.mixpanelKeywords,thumbnail:r().A.images.blocks.mixpanelPng,thumbnailPadding:10,icon:e=>e?be:ye,description:qe.mixpanelDescription}),[i().xd.miro]:He({key:i().xd.miro,blockType:i().xd.miro,displayName:W().Q.miroTitle,fuzzySearchKeywords:qe.miroKeywords,thumbnail:r().A.images.blocks.miroPng,icon:()=>_e,description:qe.miroDescription}),[i().xd.abstract]:He({key:i().xd.abstract,blockType:i().xd.abstract,displayName:W().Q.abstractTitle,thumbnail:r().A.images.blocks.abstractPng,icon:e=>e?$:Y,description:qe.abstractDescription,fuzzySearchKeywords:qe.abstractKeywords}),[i().xd.sketch]:He({key:i().xd.sketch,blockType:i().xd.sketch,displayName:W().Q.sketchTitle,thumbnail:r().A.images.blocks.sketchPng,icon:e=>e?xe:Ce,description:qe.sketchDescription,fuzzySearchKeywords:qe.sketchKeywords}),[i().xd.excalidraw]:He({key:i().xd.excalidraw,blockType:i().xd.excalidraw,displayName:W().Q.excalidrawTitle,thumbnail:r().A.images.blocks.excalidrawPng,thumbnailPadding:6,icon:e=>e?re:ie,description:qe.excalidrawDescription,fuzzySearchKeywords:qe.excalidrawKeywords}),[i().xd.replit]:He({key:i().xd.replit,blockType:i().xd.replit,displayName:W().Q.replitTitle,thumbnail:r().A.images.blocks.replitPng,thumbnailPadding:2,icon:e=>e?Ie:Ae,description:qe.replitDescription,fuzzySearchKeywords:qe.replitKeywords}),[i().xd.table]:He({key:i().xd.table,blockType:i().xd.table,displayName:W().Q.simpleTableTitle,thumbnail:r().A.images.blocks.simpleTablePng,icon:()=>o(571731).J,mobileNativeThumbnail:()=>r().A.images.mab.blocks.simpleTableSvg,description:qe.simpleTableDescription,fuzzySearchKeywords:qe.simpleTableKeywords,tooltipPhoto:r().A.images.tooltips.blocks.simpleTablePng,createTemplate:()=>je().L5()}),[i().xd.tab]:He({key:i().xd.tab,blockType:i().xd.tab,displayName:W().Q.tabTitle,thumbnail:r().A.images.blocks.tabsPng,icon:()=>w,mobileNativeThumbnail:()=>r().A.images.mab.advanced.tabsSvg,tooltipPhoto:r().A.images.tooltips.blocks.tabsPng,description:qe.tabDescription,fuzzySearchKeywords:qe.tabKeywords,createTemplate:()=>je().aI(),shouldShow:e=>(0,Ve().gU$)(e)}),[i().xd.hex]:He({key:i().xd.hex,blockType:i().xd.hex,displayName:W().Q.hexTitle,thumbnail:r().A.images.blocks.hexPng,icon:e=>e?me:ge,description:qe.hexDescription,fuzzySearchKeywords:qe.hexKeywords}),[i().xd.deepnote]:He({key:i().xd.deepnote,blockType:i().xd.deepnote,displayName:W().Q.deepnoteTitle,thumbnail:r().A.images.blocks.deepnotePng,icon:()=>te,description:qe.deepnoteDescription,fuzzySearchKeywords:qe.deepnoteKeywords}),[i().sh.toggleFormatHeaderBlock]:He({key:i().sh.toggleFormatHeaderBlock,blockType:i().xd.header,displayName:qe.toggleFormatHeaderTitle,fuzzySearchKeywords:qe.toggleFormatHeaderKeywords,thumbnail:r().A.images.blocks.toggleHeading1Png,icon:()=>F,mobileNativeThumbnail:()=>r().A.images.mab.advanced.toggleHeading1Svg,description:qe.toggleFormatHeaderDescription,tooltipPhoto:r().A.images.tooltips.blocks.toggleH1Png,createTemplate:()=>je().kE(i().xd.header),isToggleable:!0}),[i().sh.toggleFormatSubHeaderBlock]:He({key:i().sh.toggleFormatSubHeaderBlock,blockType:i().xd.subHeader,displayName:qe.toggleFormatSubHeaderTitle,fuzzySearchKeywords:qe.toggleFormatSubHeaderKeywords,thumbnail:r().A.images.blocks.toggleHeading2Png,icon:()=>U,mobileNativeThumbnail:()=>r().A.images.mab.advanced.toggleHeading2Svg,description:qe.toggleFormatSubHeaderDescription,tooltipPhoto:r().A.images.tooltips.blocks.toggleH2Png,createTemplate:()=>je().kE(i().xd.subHeader),isToggleable:!0}),[i().sh.toggleFormatSubSubHeaderBlock]:He({key:i().sh.toggleFormatSubSubHeaderBlock,blockType:i().xd.subSubHeader,displayName:qe.toggleFormatSubSubHeaderTitle,fuzzySearchKeywords:qe.toggleFormatSubSubHeaderKeywords,thumbnail:r().A.images.blocks.toggleHeading3Png,icon:()=>O,mobileNativeThumbnail:()=>r().A.images.mab.advanced.toggleHeading3Svg,description:qe.toggleFormatSubSubHeaderDescription,tooltipPhoto:r().A.images.tooltips.blocks.toggleH3Png,createTemplate:()=>je().kE(i().xd.subSubHeader),isToggleable:!0}),[i().xd.columnList]:He({key:i().xd.columnList,blockType:i().xd.columnList,displayName:W().Q.columnListTitle,fuzzySearchKeywords:qe.columnListKeywords,thumbnail:r().A.images.blocks.columnListPng,description:qe.columnListDescription,tooltipPhoto:r().A.images.tooltips.blocks.columnListPng,createTemplate:()=>je().vq(2),shouldShow:e=>!e.environment.device.isPhone}),[i().sh.column2Block]:He({key:i().sh.column2Block,blockType:i().xd.columnList,displayName:qe.column2Title,fuzzySearchKeywords:qe.column2Keywords,thumbnail:r().A.images.blocks.columnListPng,icon:()=>j,mobileNativeThumbnail:()=>r().A.images.mab.advanced.twoColumnSvg,description:qe.column2Description,tooltipPhoto:r().A.images.tooltips.blocks.columnListPng,createTemplate:()=>je().vq(2),shouldShow:e=>!e.environment.device.isPhone&&!e.blocks.some(ze().qO)}),[i().sh.column3Block]:He({key:i().sh.column3Block,blockType:i().xd.columnList,displayName:qe.column3Title,fuzzySearchKeywords:qe.column3Keywords,thumbnail:r().A.images.blocks.columnListPng,icon:()=>o(17945).l,mobileNativeThumbnail:()=>r().A.images.mab.advanced.threeColumnSvg,description:qe.column3Description,tooltipPhoto:r().A.images.tooltips.blocks.columnListPng,createTemplate:()=>je().vq(3),shouldShow:e=>!e.environment.device.isPhone&&!e.blocks.some(ze().qO)}),[i().sh.column4Block]:He({key:i().sh.column4Block,blockType:i().xd.columnList,displayName:qe.column4Title,fuzzySearchKeywords:qe.column4Keywords,thumbnail:r().A.images.blocks.columnListPng,icon:()=>k,mobileNativeThumbnail:()=>r().A.images.mab.advanced.fourColumnSvg,description:qe.column4Description,tooltipPhoto:r().A.images.tooltips.blocks.columnListPng,createTemplate:()=>je().vq(4),shouldShow:e=>!e.environment.device.isPhone&&!e.blocks.some(ze().qO)}),[i().sh.column5Block]:He({key:i().sh.column5Block,blockType:i().xd.columnList,displayName:qe.column5Title,fuzzySearchKeywords:qe.column5Keywords,thumbnail:r().A.images.blocks.columnListPng,icon:()=>S,mobileNativeThumbnail:()=>r().A.images.mab.advanced.fiveColumnSvg,description:qe.column5Description,tooltipPhoto:r().A.images.tooltips.blocks.columnListPng,createTemplate:()=>je().vq(5),shouldShow:e=>!e.environment.device.isPhone&&!e.blocks.some(ze().qO)}),[i().sh.mermaidCodeBlock]:He({key:i().sh.mermaidCodeBlock,blockType:i().xd.code,displayName:qe.mermaidCodeTitle,fuzzySearchKeywords:qe.mermaidCodeKeywords,thumbnail:r().A.images.blocks.codePng,icon:()=>M,mobileNativeThumbnail:()=>r().A.images.mab.advanced.codeMermaidSvg,description:qe.mermaidCodeDescription,tooltipPhoto:r().A.images.tooltips.blocks.codePng,createTemplate:()=>je().h0("Mermaid","graph TD\n  Mermaid --\x3e Diagram"),postCreateCallback:e=>{n().default.afterNextFlush((()=>{n().default.afterNextFlush((async()=>{const t=await Promise.resolve().then(o.bind(o,725614)),n=o(695625).T.find((t=>t.props.store.id===e.id)),r=null==n?void 0:n.props.store,i=r&&(0,o(969197).aI)(r);if(i){var a;const e=(0,o(231722).$U)({store:i,selection:{startIndex:0,endIndex:(null===(a=(0,o(792002).s6)(i))||void 0===a?void 0:a.endIndex)??0}});t.setMultiSelection({multiSelection:e})}}))}))}}),[i().sh.aiFreePromptBlock]:He({key:i().sh.aiFreePromptBlock,blockType:i().xd.aiBlock,displayName:qe.aiFreePromptBlockTitle,fuzzySearchKeywords:qe.aiFreePromptKeywords,thumbnail:r().A.images.blocks.calloutPng,icon:()=>o(366295).L,description:qe.aiFreePromptDescription,badge:"ai",createTemplate:()=>je().GK("helpMeWrite"),shouldShow:e=>!e.environment.device.isPhone&&function(e){let{publicEditMode:t}=e;return(0,o(68465).ZE)(t)}(e)}),[i().xd.drawing]:He({key:i().xd.drawing,blockType:i().xd.drawing,displayName:W().Q.drawingTitle,fuzzySearchKeywords:qe.drawingKeywords,thumbnailPadding:8,thumbnail:r().A.images.externalIntegrations.acmeIconPng,icon:()=>o(54241).l,mobileNativeThumbnail:()=>r().A.images.mab.media.drawingSvg,description:qe.drawingDescription,shouldShow:e=>(0,o(47373).gU)(),createTemplate:()=>je()._N()})},Ye=($e[i().xd.callout],$e[i().xd.toggle],[i().sh.aiFreePromptBlock]);function Qe(){return"on"===o(508496).default.getEligibleGroup({experimentId:"slash_command_import",defaultGroup:"control"})}},668435:(e,t,o)=>{o.d(t,{h:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("unavailableOffline",{viewBox:"0 0 26 24",svg:(0,n.jsx)("g",{children:(0,n.jsx)("path",{d:"M6.574 19.645a6.3 6.3 0 0 1-2.314-.42 6.1 6.1 0 0 1-1.865-1.143 5.3 5.3 0 0 1-1.23-1.69 4.8 4.8 0 0 1-.44-2.03q0-1.192.43-2.198a4.44 4.44 0 0 1 1.24-1.67 3.94 3.94 0 0 1 1.914-.84q0-.36.068-.693a3.2 3.2 0 0 1 .215-.625L5.89 9.635q-.079.225-.118.478-.039.255-.039.547 0 .195-.185.195-1.036 0-1.768.47-.723.468-1.103 1.269a4 4 0 0 0-.381 1.767q0 .997.557 1.846.555.84 1.523 1.357.966.508 2.197.508h7.764l1.582 1.573zm14.61-.166-1.407-1.407h.244q1.035 0 1.866-.44a3.5 3.5 0 0 0 1.328-1.18 2.94 2.94 0 0 0 .488-1.651q0-1.329-.8-2.246-.791-.918-2.12-1.211-.176-.039-.156-.225.03-.341.039-.713a7 7 0 0 0 0-.722 5.9 5.9 0 0 0-.8-2.686 5.6 5.6 0 0 0-1.954-1.992q-1.23-.762-2.832-.762-1.26 0-2.197.42a4.9 4.9 0 0 0-1.592 1.113 8 8 0 0 0-1.143 1.543q-.078.146-.244.098a3 3 0 0 0-.459-.098 2.2 2.2 0 0 0-.459-.029L7.492 5.797q.469-.117.947-.117a3.3 3.3 0 0 1 .938.117 8 8 0 0 1 1.406-1.563 6.6 6.6 0 0 1 1.895-1.132q1.074-.43 2.402-.43 1.505 0 2.793.557a6.7 6.7 0 0 1 2.266 1.562 7.1 7.1 0 0 1 1.513 2.383q.537 1.366.537 2.998a5 5 0 0 1 2.715 2.705q.372.898.371 1.924 0 1.142-.517 2.119a4.8 4.8 0 0 1-1.445 1.65 5.4 5.4 0 0 1-2.13.909Zm-1.143 2.646L3.732 5.835a.75.75 0 0 1-.214-.526q0-.322.214-.538a.72.72 0 0 1 .528-.214.71.71 0 0 1 .547.214l16.298 16.29a.67.67 0 0 1 .215.527.75.75 0 0 1-.215.537.75.75 0 0 1-.537.215.74.74 0 0 1-.527-.215"})})})},668491:(e,t,o)=>{o.d(t,{ET:()=>E,NQ:()=>R,kf:()=>h,Sr:()=>A,YO:()=>B,Wq:()=>P,EC:()=>w});var n=()=>o(584262);o(296540);const r={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zm1.25 7.5c0 .483.392.875.875.875h11a.875.875 0 0 0 .875-.875V7.5H3.625zm1.008-7.316a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25m2.625-.625a.625.625 0 1 0-1.25 0 .625.625 0 0 0 1.25 0m1.375.625a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25"})},i=(0,o(340498).wt)("browser",r);var a=()=>o(179034),s=()=>o(343666),l=()=>o(222299),c=()=>o(281948),d=()=>o(435009),u=()=>o(878377),p=()=>o(492414),m=()=>o(351360),g=()=>o(712505),f=()=>o(416726);const v=(0,o(959013).YK)({openInFullPage:{id:"action.navigation.openInFullPage",defaultMessage:"Open in full page"},openInSidePeek:{id:"action.navigation.openInSidePeek",defaultMessage:"Open in side peek"},openInNewTab:{id:"action.openInNewTab.name",defaultMessage:"Open in new tab"},openInNewWindow:{id:"action.openInNewWindow.name",defaultMessage:"Open in new window"},openInFullPageShort:{id:"action.navigation.openInFullPageShort",defaultMessage:"Full page"},openInSidePeekShort:{id:"action.navigation.openInSidePeekShort",defaultMessage:"Side peek"},openInNewTabShort:{id:"action.openInNewTab.nameShort",defaultMessage:"New tab"},openInNewWindowShort:{id:"action.openInNewWindow.nameShort",defaultMessage:"New window"}});function h(e){var t;const o=e.blocks[0];if(!o)return!1;if(null!==(t=o.getModel())&&void 0!==t&&t.isNavigableBlock())return!0;if(o.isType("alias")){var n;const e=null===(n=o.getAliasTargetStore())||void 0===n?void 0:n.getModel();if((null==e?void 0:e.table)===a().ev&&null!=e&&e.isNavigableBlock())return!0}return!1}function _(e){return g().default.isSidePeekOpen()}const b=S(!1),y=S(!0);function S(e){return(0,f().Ls)({key:"open in full page",displayName:e?v.openInFullPageShort:v.openInFullPage,analyticsName:e?v.openInFullPageShort.defaultMessage:v.openInFullPage.defaultMessage,svg:o(419942).o,validators:[u().vXb,h,_],closeParentMenu:!0,action:e=>{const t=e.blocks[0],o=t.getAliasTargetStore()??t;if(o.table===s().SN)return;const r=(0,p().Ay)({store:o,pageVisitSource:n().y8.LinkInPage,openInCenterPeek:!t.isPost()&&void 0});d().oo({environment:e.environment,url:r})}})}const w=I(!1),k=I(!0);function I(e){return(0,f().Fw)({key:"open side peek",displayName:e?v.openInSidePeekShort:v.openInSidePeek,analyticsName:e?v.openInSidePeekShort.defaultMessage:v.openInSidePeek.defaultMessage,svg:o(177256).A,shortcuts:["openInSidePeek"],validators:[u().vXb,h,u().AU6(u().FrL),u().lTV,u().AU6(u().dUO)],closeParentMenu:!0,action:e=>{var t;const{route:r}=e.environment.RouterStore.state,i="chat"===r.name;let a;"team"===r.name&&(a=r.teamId);if(!(null===(t=m().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id)&&!i&&void 0===a)return;const l=e.blocks[0],c=l.getAliasTargetStore()??l;if(c.table===s().SN)return;const u=i?(0,o(172385).EY)({pageId:l.id,pageVisitSource:n().y8.AIChat,scrollToBlockId:void 0,isMobile:e.environment.device.isMobile}):void 0!==a?(0,o(120739).a)({teamId:a,peekInfo:{peekViewBlockId:l.id,peekMode:"s"}}):(0,p().Ay)({store:c,openInSidePeek:!0,peekViewBlockId:c.id,peekMode:"s",pageVisitSource:n().y8.PeekOpen});d().oo({environment:e.environment,url:u})}})}const A=C(!1),x=C(!0);function C(e){return(0,f().Fw)({key:"navigate to page in new tab",analyticsName:"Navigate to page in new tab",displayName:e?v.openInNewTabShort:v.openInNewTab,svg:o(955363).N,validators:[u().vXb,h,u().AU6(u().FrL),u().AU6(u().IW)],shortcuts:["commandShiftEnter"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;if(t[0].isType("alias")){var r;const e=t[0];if(!(null===(r=m().default.state.mainEditorCurrentBlockStore)||void 0===r?void 0:r.id))return;const i=e.getAliasTargetStore()??e;if(i.table===s().SN)return;l().Yf({environment:o,blocks:[i],openInNew:"tab",pageVisitSource:n().y8.LinkInPage})}else l().Yf({environment:o,blocks:t,openInNew:"tab",pageVisitSource:n().y8.LinkInPage})}})}const T=M(!1);function M(e){return(0,f().Ls)({key:"navigate to page in new window",analyticsName:"Navigate to page in new window",displayName:e?v.openInNewWindowShort:v.openInNewWindow,svg:i,validators:[u().vXb,u()._fc,u().ibx,u().AU6(u().lOb),u().AU6(u().FrL),u().AU6(u().IW)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;l().Yf({environment:o,blocks:t,openInNew:"window",pageVisitSource:n().y8.LinkInPage})}})}const P=[x,M(!0),y,k],B=[A,T,b,w],R=(0,f().Fw)({key:"go up one page",analyticsName:"Go up one page",displayName:void 0,validators:[u().GbK],shortcuts:["peekUp"],closeParentMenu:!0,action:()=>c().NQ()}),E=(0,f().Fw)({key:"go down one page",analyticsName:"Go down one page",displayName:void 0,validators:[u().GbK],shortcuts:["peekDown"],closeParentMenu:!0,action:()=>c().ET()})},668721:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){}didRequest(){const e=this.state;return!(!e||e.isEligible)&&Boolean(e.requestedAccess)}}const r=new n},668725:(e,t,o)=>{o.d(t,{b:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("chevronDown",{viewBox:"0 0 30 30",svg:(0,n.jsx)("polygon",{points:"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 "})})},669548:(e,t,o)=>{o.d(t,{j:()=>P,w:()=>M});o(16280),o(18107),o(944114),o(967357),o(898992),o(908872);var n=()=>o(175482),r=()=>o(925551),i=()=>o(583835),a=()=>o(857639),s=()=>o(416504),l=()=>o(416845),c=()=>o(134025),d=()=>o(388821),u=()=>o(912720),p=()=>o(199378),m=()=>o(179034),g=()=>o(798880),f=()=>o(439180),v=()=>o(534177),h=()=>o(780054),_=()=>o(518736),b=()=>o(594794),y=()=>o(589506),S=()=>o(351360),w=()=>o(508496),k=()=>o(630116),I=()=>o(970330),A=()=>o(357625),x=()=>o(863168),C=()=>o(246826),T=()=>o(317909);function M(e){var t,o,n;const{environment:r,createBlockItem:i,from:a,inMemoryRecordCache:s,transaction:l,selection:c}=e;if(!i.templateRootBlockId||!i.createTemplate)throw new Error("Invalid createBlock item.");const u=(c.length>0?c[0].getSpaceId():void 0)??(null===(t=S().default.state.currentSpaceStore)||void 0===t?void 0:t.id)??(null===(o=S().default.state.mainEditorCurrentBlockStore)||void 0===o?void 0:o.getSpaceId()),p=u?r.idCreator.getSpaceIdCreatorSync(u):void 0,{targetBlockStore:g}=P({environment:r,sourceBlockId:i.templateRootBlockId,targetBlockPointer:(0,b().zP)({environment:r,table:m().ev,spaceId:u}),sourceBlockSubtree:(0,d().partialRecordMapToRecordMap)(i.createTemplate(r)),targetRecordCache:s,transaction:l,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!1,spaceIdCreator:p});if(null===(n=i.postCreateCallback)||void 0===n||n.call(i,g,r,l),x().eY({environment:r,store:g,transaction:l}),a&&i.blockType){var f,v;const e=i.collectionViewType,t="full_page"===e,o=0!==c.length?null===(f=c[0])||void 0===f?void 0:f.getParentCollectionIdUpToTwoLevels():void 0;let n,s,l,d;if("chart"===e){var h,_;const e=null===(h=g.getCollectionViewStores())||void 0===h?void 0:h.at(0);n=null==e||null===(_=e.getChartConfig())||void 0===_?void 0:_.type,s=null==e?void 0:e.getChartPlaceholderType()}if("form_editor"===e){var y;const e=null===(y=g.getCollectionViewStores())||void 0===y?void 0:y.at(0),t=null==e?void 0:e.getFormBlockStore();l=null==t?void 0:t.id,d=null==e?void 0:e.id}I().v(r,{from:a,type:i.blockType,collection_id:g.getAssociatedCollectionId()??(null===(v=g.getCollectionStore())||void 0===v?void 0:v.id),view_type:"inline"===e||"full_page"===e?"table":e,is_toggleable:i.isToggleable,automation_id:g.getAutomationId(),new_page_id:"page"===i.blockType?g.id:void 0,creating_block_id:g.id,parent_collection_id:o,is_full_screen:t,chart_type:"placeholder"===n?s:n,is_chart_placeholder:"placeholder"===n,form_id:l,view_id:d})}return g}function P(e){const{environment:t,sourceBlockId:o,sourceBlockSubtree:d,targetBlockPointer:b,targetRecordCache:S,transaction:I,deepCopyTransclusionContainers:x,duplicateDiscussions:M,shallowCopyNavigableBlock:P,resolveTemplateVariables:B,recordPointerMap:R,preventLegacyTransclusions:E,createLegacyTransclusionCopyIndicator:D,spaceIdCreator:N,installationImprint:L,templateInstallationMetadata:F,isTemplateInstantiation:U,appendContentOnly:O}=e,V=t.currentUser.id,j=!!w().default.checkGate({gateName:"adoption_opt_templates_out_of_block_limit"})&&("onboarding"===(null==F?void 0:F.source)||"team_home"===(null==F?void 0:F.source)||(null==F?void 0:F.isFirstPartyPaidTemplate)),{duplicateRecordMap:z,originalToDuplicate:q,aiBlocksToAutoGenerate:H}=r().xK({sourceBlockId:o,targetBlockPointer:b,recordMap:d,recordPointerMap:R,options:{deepCopyTransclusionContainers:x,duplicateDiscussions:M,shallowCopyNavigableBlock:P,resolveTemplateVariables:!!B&&{currentUserId:V,currentTimeZone:(0,s().P)()}},baseUrl:h().A.domainBaseUrl,publicDomainName:h().A.publicDomainName,actor:V?{table:g().oo,id:V}:void 0,getRecordRole:S.makeGetRecordRoleFn(V),preventLegacyTransclusions:E,createLegacyTransclusionCopyIndicator:D,installationImprint:L,logWarning:e=>{"unmappedContentId"===e.type||("multiReferencedContentIds"===e.type?a().log({level:"warning",from:"createBlockActions",type:"multiReferencedContentIds",data:{ids:e.contentIds}}):(0,v().HB)(e))},spaceIdCreator:N,experimentService:w().default,isTemplateInstantiation:Boolean(U)}),W=new(k().Bv)(t,b,{inMemoryRecordCache:S}),K=W.getSpaceStore(),G=(0,_().D8)(K);I.postPerformAssertions.push((function(){if(I.isLocal)return;if(!W.getParentStore())throw new(l().yI)(`Initialized template was not given a parent before being committed in transaction ${I.getUserActionForAnalyticsPurposesOnly()}`)}));for(const{model:i}of z)if(i)if(i.table===m().ev){var $,Y;const e=i.__IM_SORRY__getValue(),t=k().Bv.createChildStore(W,i.pointer);i.id===b.id&&U&&e.is_template&&(e.is_template=!1,e.format&&delete e.format.automation_id),j&&r().D9(e)&&(e.ignore_block_count=!0);const o=i.getFormat(),a=(null===($=S.getRecord({pointer:i.pointer,userId:V}))||void 0===$||null===($=$.value)||void 0===$?void 0:$.format)??{},s=c().op.update({pointer:i.pointer,path:["format"],args:(0,v().uv)(a).reduce(((e,t)=>t in o&&void 0!==o[t]?e:{...e,[t]:null}),{})}),l=i.pointer.table===b.table&&i.pointer.id===b.id?null===(Y=S.getRecord({pointer:i.pointer,userId:V}))||void 0===Y?void 0:Y.value:void 0;if(l&&(delete e.created_by_id,delete e.created_by_table,delete e.created_time),l&&O&&i.id===W.id){const e=W.getContentIds()??[],o=i.getContentIds()??[];T().applyOperation({store:t,operation:c().op.update({args:{content:[...e,...o]},pointer:i.pointer,path:[]}),transaction:I});continue}const d=l?n().mP({existingBlock:l,updatedBlock:e}).concat([s]):n().VC({block:e,useCrdt:G});for(const n of d)(0,f().ph)(n)?T().applyCrdtTextOperation({store:t,operation:n,invertedOperation:void 0,transaction:I}):T().applyOperation({store:t,operation:n,transaction:I})}else{if(U){if(i.table===u().yB&&i.parent_id===b.id)continue;if(i.table===p().SC&&i.isType("create_page")){const e=i.getConfig();if((null==e?void 0:e.template_page_id)===b.id)continue}}const e=i.__IM_SORRY__getValue(),t=(0,k().Oo)(W,i.pointer);C().KY({store:t,value:e,transaction:I})}H.length>0&&I.postSubmitCallbacks.push((async()=>{await async function(e){const{environment:t,aiBlockPointers:o,parentPageId:n}=e,r=(0,i().Dv)("generateAiBlockTask");for(const i of o)for await(const e of(0,A().UT)(t,r,{blockId:i.id,spaceId:i.spaceId,parentPageId:n}));}({environment:t,aiBlockPointers:H,parentPageId:W.id})}));const Q=W;return y().onBlockCreated({environment:t,store:Q}),{targetBlockStore:Q,originalToDuplicate:q,subtreeSize:z.getSize()}}},670631:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{offlinePages:void 0,isSlowWrite:!1,shouldPublishUpdate:!1}}}const r=new n;(0,o(604341).exposeDebugValue)("OfflinePagesStore",r);const i=r},670913:(e,t,o)=>{o.d(t,{v:()=>i});o(898992),o(908872);var n=()=>o(715256),r=()=>o(680141);function i(e){const{experimentService:t,actor:o,spaceId:i}=e;return r().Y.reduce(((e,r)=>(e[r]=t.checkGate({actor:o??n().S3,gateName:r,customIDs:{spaceId:i}}),e)),{})}},671263:(e,t,o)=>{o.d(t,{Sh:()=>i,Xm:()=>r,jK:()=>a});var n=()=>o(645873);const r=new(n().O2)("payments",(async()=>{const[{CheckoutUpgradeModal:e},{ClaimAndUpgradeModal:t},{PlansModalContent:n},{BillingModalContent:r},i,a]=await Promise.all([Promise.all([o.e(23806),o.e(96346),o.e(36192),o.e(58550),o.e(22900),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(67435),o.e(70769),o.e(38911),o.e(25426),o.e(95810),o.e(98497),o.e(87982),o.e(25552),o.e(1066),o.e(59970)]).then(o.bind(o,986578)),Promise.all([o.e(23806),o.e(58550),o.e(25426),o.e(87982),o.e(20108)]).then(o.bind(o,477217)),Promise.all([o.e(23806),o.e(96346),o.e(36192),o.e(58550),o.e(22900),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(67435),o.e(70769),o.e(38911),o.e(25426),o.e(95810),o.e(98497),o.e(87982),o.e(25552),o.e(1066),o.e(59970)]).then(o.bind(o,245094)),Promise.all([o.e(23806),o.e(96346),o.e(36192),o.e(58550),o.e(22900),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(67435),o.e(70769),o.e(38911),o.e(25426),o.e(95810),o.e(98497),o.e(87982),o.e(25552),o.e(1066),o.e(59970)]).then(o.bind(o,487892)),Promise.all([o.e(23806),o.e(96346),o.e(36192),o.e(58550),o.e(22900),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(67435),o.e(70769),o.e(38911),o.e(25426),o.e(95810),o.e(98497),o.e(87982),o.e(25552),o.e(1066),o.e(59970)]).then(o.bind(o,245094)),Promise.all([o.e(23806),o.e(96346),o.e(36192),o.e(58550),o.e(22900),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(67435),o.e(70769),o.e(38911),o.e(25426),o.e(95810),o.e(98497),o.e(87982),o.e(25552),o.e(1066),o.e(59970)]).then(o.bind(o,487892)),Promise.all([o.e(23806),o.e(96346),o.e(36192),o.e(58550),o.e(22900),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(67435),o.e(70769),o.e(38911),o.e(25426),o.e(95810),o.e(98497),o.e(87982),o.e(25552),o.e(1066),o.e(59970)]).then(o.t.bind(o,624119,23)),Promise.all([o.e(23806),o.e(96346),o.e(36192),o.e(58550),o.e(22900),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(67435),o.e(70769),o.e(38911),o.e(25426),o.e(95810),o.e(98497),o.e(87982),o.e(25552),o.e(1066),o.e(59970)]).then(o.bind(o,112527))]);return{CheckoutUpgradeModal:e,ClaimAndUpgradeModal:t,PlansModalContent:n,BillingModalContent:r,plans:i,billing:a}})),i=(0,n()._h)(r,(e=>e.CheckoutUpgradeModal)),a=(0,n()._h)(r,(e=>e.ClaimAndUpgradeModal))},671363:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isActive:!1}}cloneState(){return o(496603).o8(this.state)}}const r=new n},671812:(e,t,o)=>{o.d(t,{A:()=>s,a:()=>l});var n=()=>o(351360),r=()=>o(179580),i=()=>o(780262),a=()=>o(630116);function s(e){var t;if(i().A.state.editsBlocked)return!0;const o=n().default.state.currentSpaceStore;if(!o)return!1;const s=null===(t=r().A.getData(e,{spaceId:o.id}))||void 0===t||null===(t=t.bannerIds)||void 0===t?void 0:t[0];if(!s)return!1;const l=a().by.createChildStore(o,{id:s,table:"subscription_banner",spaceId:o.id});return"dunning"===l.getBannerKey()&&"alert"===l.getBannerType()}function l(e){if(void 0!==e)return()=>{e&&window.open(e,"_blank")}}},672378:(e,t,o)=>{o.r(t),o.d(t,{PingSalesModal:()=>y,openPingSalesModal:()=>k});o(814603),o(147566),o(198721);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(758318),s=()=>o(959013),l=()=>o(939768),c=()=>o(252105),d=()=>o(436572),u=()=>o(84817),p=()=>o(7674),m=()=>o(106196),g=()=>o(107683),f=()=>o(19575),v=()=>o(854418),h=()=>o(221424),_=o(474848);const b=318;function y(e){let{}=e;const t=(0,r().v3)(),o=(0,i().K8)((()=>h().L.state.open),[]),a=(0,v().t)(),u=(0,n.useCallback)((()=>{c().Gk(t),h().L.setState({open:!1})}),[t]),m=(0,n.useCallback)((async()=>{if(!a)return;const e=(0,l().iW)(new URL(window.location.href).toString());await(0,f().SG)({environment:t,data:{externalOrgSummary:a},urlAnalytics:e})||d().D6({label:(0,_.jsx)(s().sA,{id:"enterprisePingModal.error.snack",defaultMessage:"Something went wrong during notification. Please contact your sales representative for assistance."})})}),[t,a]);return(0,n.useEffect)((()=>{a&&m()}),[a,m]),(0,_.jsx)(g().s,{isOpen:o,onClosed:u,areaConstraint:{width:{type:"min",length:b}},render:()=>(0,_.jsx)("div",{style:{overflow:"auto"},children:(0,_.jsx)(p().tf,{header:(0,_.jsx)(S,{}),footer:(0,_.jsx)(w,{onClose:u})})})})}function S(){return(0,_.jsx)("div",{style:{padding:"0 24px"},children:(0,_.jsx)(p().YA,{iconAndTitle:(0,_.jsx)(p().ZQ,{iconGroup:a().a,title:(0,_.jsx)(s().sA,{id:"enterprisePingModal.initial.header",defaultMessage:"Your sales representative will be in touch shortly"})})})})}function w(e){let{onClose:t}=e;return(0,_.jsx)(u().Y1,{children:(0,_.jsx)(m().N,{buttonInfo:{buttonType:"outline",label:(0,_.jsx)(s().sA,{id:"enterprisePingModal.initial.footer",defaultMessage:"Got it"}),onClick:t}})})}function k(){h().L.setState({open:!0})}},673657:(e,t,o)=>{o.r(t),o.d(t,{useIsDictatingToPage:()=>i});var n=()=>o(56366),r=()=>o(964345);function i(e){return(0,n().K8)((()=>r().gZ.state&&(null==e?void 0:e.id)===r().Di.state),[e])}},673724:(e,t,o)=>{o.d(t,{I:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("loop",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M5.80371 3.12305C5.81006 3.50391 6.05762 3.74512 6.47656 3.74512H11.3643C11.9546 3.74512 12.2783 4.0498 12.2783 4.66553V11.2925L11.377 10.3149L10.8628 9.80078C10.5962 9.54688 10.2344 9.52783 9.96777 9.78809C9.71387 10.0483 9.72021 10.4229 9.98047 10.6831L12.145 12.8413C12.6211 13.311 13.167 13.311 13.6431 12.8413L15.8076 10.6831C16.0679 10.4229 16.0742 10.0483 15.8203 9.78809C15.5537 9.52783 15.1919 9.54688 14.9253 9.80078L14.4111 10.3149L13.5161 11.2861V4.56396C13.5161 3.20557 12.8052 2.50098 11.4341 2.50098H6.47656C6.05762 2.50098 5.79736 2.74219 5.80371 3.12305ZM0.186035 7.05859C0.446289 7.3252 0.808105 7.30615 1.07471 7.0459L1.59521 6.53809L2.48389 5.56689V12.2891C2.48389 13.6475 3.19482 14.3521 4.56592 14.3521H9.52344C9.94238 14.3521 10.2026 14.1108 10.1963 13.73C10.1899 13.3428 9.94238 13.1079 9.52344 13.1079H4.64209C4.05176 13.1079 3.72803 12.7969 3.72803 12.1812V5.5542L4.62305 6.53809L5.14355 7.0459C5.40381 7.30615 5.77197 7.3252 6.03223 7.05859C6.29248 6.79834 6.28613 6.43018 6.01953 6.16992L3.85498 4.01172C3.37891 3.53564 2.83936 3.53564 2.36328 4.01172L0.19873 6.16992C-0.0678711 6.43018 -0.0742188 6.79834 0.186035 7.05859Z"})})},673730:(e,t,o)=>{o.d(t,{Mo:()=>i,Q$:()=>n,fy:()=>r});const n={maxWidth:280,width:"max-content",overflowWrap:"break-word",textWrap:"wrap",whiteSpace:"pre-line"},r=280,i=(0,o(959013).YK)({addPropertyDescriptionTooltip:{id:"database.viewSettings.propertyTab.description.addDescriptionTooltip",defaultMessage:"Add property description"},editPropertyDescriptionTooltip:{id:"database.viewSettings.propertyTab.description.editDescriptionTooltip",defaultMessage:"Edit property description"}})},673998:(e,t,o)=>{o.d(t,{GB:()=>C,N6:()=>M,gz:()=>N,wB:()=>L,kE:()=>F,$V:()=>U,Ef:()=>P,Vg:()=>R});o(296540);var n=()=>o(584262),r=()=>o(75756),i=()=>o(283699),a=()=>o(845710),s=()=>o(857639),l=()=>o(959013),c=()=>o(229833),d=()=>o(183558),u=()=>o(720665),p=()=>o(449506),m=()=>o(493823),g=o(474848);const f=function(){const e=(0,o(484714).v3)(),t=(0,o(401497).IS)((e=>({buttonContainer:{display:"flex"},buttonText:{color:e.text.contrastPrimary},plainButton:{paddingLeft:8,paddingRight:8},dots:{width:14,marginLeft:14,fill:e.text.contrastPrimary}})),[]);return(0,g.jsxs)("div",{style:t.buttonContainer,children:[(0,g.jsx)(m().p,{onClick:()=>N(e,{necessary:!0,performance:!0,preference:!0,targeting:!0}),children:(0,g.jsx)("b",{style:t.buttonText,children:(0,g.jsx)(l().sA,{...r().LS.acceptAllButtonLabel})})}),(0,g.jsx)(m().p,{onClick:()=>N(e,{necessary:!0,performance:!1,preference:!1,targeting:!1}),children:(0,g.jsx)("b",{style:t.buttonText,children:(0,g.jsx)(l().sA,{...r().LS.rejectAllButtonLabel})})}),(0,g.jsx)(o(455215).A,{hasDismissButton:!0,renderOrigin:e=>(0,g.jsx)(m().p,{style:t.plainButton,...e,children:(0,o(30626)._)(t.dots)})})]})};var v=()=>o(719147),h=()=>o(989423),_=()=>o(529543),b=()=>o(972435),y=()=>o(991385),S=()=>o(351360),w=()=>o(438754),k=()=>o(799089),I=()=>o(666429),A=()=>o(901389);const x=(0,l().YK)({cookieConsentSaveError:{id:"cookieConsent.saveError",defaultMessage:"Cannot record cookie consent, please try again later."}});async function C(e){const{environment:t,onboardingState:o}=e,{inAppCalloutStore:n}=S().default.state;if(await T(t)&&n.getCalloutVisibility("cookie_preference_popup").canShow)return(0,y().B)(t.currentUser.id)>=2?(D(),k().A.setState({open:!0}),V({environment:t,type:"modal",onboardingState:o}),n.updateCalloutStatus({calloutId:"cookie_preference_popup",visible:!0,validateCanShow:!0}),void h().vd(t,"cookie_modal_shown")):void(I().Ay.state.currentItem||(n.updateCalloutStatus({calloutId:"cookie_preference_popup",visible:!0,validateCanShow:!0}),I().Ay.setState({...I().Ay.state,currentItem:{key:(0,d().Ay)(),label:(0,g.jsx)("div",{children:(0,r().Qq)(M,"snackbar")}),right:(0,g.jsx)(f,{})}}),V({environment:t,type:"snackbar",onboardingState:o})))}async function T(e){if(!(0,_().canSetCookie)(e))return!1;if(!(0,_().canShowCookieUi)(e))return!1;const t=await(0,_().getHasPermissionArgs)(e);return"true"===(null==t?void 0:t.notion_check_cookie_consent)&&(null==t||!t.notion_cookie_consent)}function M(e,t){return(0,g.jsx)(v().A,{href:e,children:t})}function P(e,t){if("necessary"===t)return;const o={...w().A.getState().permission};o[t]=!o[t],w().A.setPermission(o),B(e,o)}const B=o(496603).sg(((e,t)=>{R(e,t)}),2e3);async function R(e,t){const o=await p().callApi({eventName:"recordCookieConsent",environment:e,data:{id:w().A.getId(),permission:t,document_version:r().ti,userId:e.currentUser.id}}).catch((e=>{E({type:"recordCookieConsentError",error:(0,c().n6)(e)})}));if(!o)return void E({type:"recordCookieConsentEmptyResult"});if("success"!==o.type)return void E({type:"recordCookieConsentReturnsNonSuccess",data:{miscDataToConvertToString:{result:o}}});const s=o.data;await w().A.setCookieConsent(e,s),n().GD();const l=await h().TZ(e),d=n().b_(l);await a().U5(d);const{permission:u}=s;h().vd(e,"record_cookie_consent",{permission:u,consent_type:(0,i().TS)(u)})}function E(e){let{type:t,data:o,error:n}=e;A().f1(b().A.formatMessage(x.cookieConsentSaveError)),s().log({level:"error",from:"cookieActions",type:t,data:o,error:n})}function D(){const{inAppCalloutStore:e}=S().default.state;e.updateCalloutStatus({calloutId:"cookie_preference_popup",visible:!1}),I().Ay.setState({...I().Ay.state,currentItem:void 0})}function N(e,t){R(e,t),D(),L()}function L(){A().rG({message:b().A.formatMessage(r().LS.reloadAfterSaveMessage),onAccept:()=>{window.location.reload()}})}async function F(e){const{currentUserSettingsStore:t}=S().default.state;if(!t)return;await t.load();const o=t.getSettings();if(!o)return;const n=o.cookie_consent;n?(await w().A.setCookieConsent(e,n),D()):(w().A.clearCookieConsent(),await T(e)&&w().A.setPermission(r().Gq))}async function U(e){const t=await(0,_().getCookieConsentCookie)(e);if(!t)return;const o=(0,u().$l)(t);o&&w().A.setState(o)}const O={tracked:!1};function V(e){let{environment:t,type:o,onboardingState:n}=e;if(O.tracked)return;const r={type:o,onboardingStage:null==n?void 0:n.stage};h().vd(t,"cookie_banner_shown",r),O.tracked=!0}},675074:(e,t,o)=>{o.d(t,{ZO:()=>M,$C:()=>B,qI:()=>F,Fy:()=>E,Ox:()=>P,oD:()=>N,wA:()=>U,QM:()=>R});o(16280),o(944114),o(898992),o(354520),o(581454),o(814603),o(147566),o(198721);var n=()=>o(700500),r=()=>o(713998),i=()=>o(304740),a=()=>o(522419),s=()=>o(919709),l=()=>o(959013),c=()=>o(449506),d=()=>o(443120),u=()=>o(780054),p=()=>o(972435),m=()=>o(406792),g=()=>o(129522);const f=new(o(178624).R)({key:"urlTurnedBookmarkToastStatusSetting",namespace:o(419494).Bq,important:!0,trackingType:"preference"});var v=()=>o(518888),h=()=>o(437219),_=()=>o(799750),b=()=>o(235116),y=()=>o(220738),S=()=>o(896628),w=()=>o(383594),k=()=>o(246826),I=()=>o(436572),A=()=>o(606952),x=()=>o(317909),C=()=>o(892632);const T=(0,l().YK)({urlTurnedBookmark:{id:"action.urlTurnedBookmark.snackBarMessage",defaultMessage:"Pasted url is not embeddable, turned to bookmark instead!"}});let M=function(e){return e[e.Page=0]="Page",e[e.PageComment=1]="PageComment",e[e.SidebarComment=2]="SidebarComment",e}({});function P(e){return e===M.PageComment||e===M.SidebarComment}function B(e){const{environment:t,files:o,inMemoryRecordCache:n,transaction:r,pageWidth:i,ignoreOversizedFiles:a,spaceId:s}=e;return o.filter((e=>{if(a){if(!C().a1({environment:t,file:e,bypassFreeFileUploadLimitCheck:!1}))return C().j7(t),!1}return!0})).map((e=>{if(e.type&&(e.type.includes("image")||e.type.includes("video")||e.type.includes("audio"))&&!e.type.includes("photoshop")){const o=k().Wv({environment:t,type:"embed",inMemoryRecordCache:n,transaction:r,spaceId:s});return r.postSubmitCallbacks.push((n=>{n||R({environment:t,store:o,file:e,pageWidth:i,preferredType:void 0})})),o}{const o=k().Wv({environment:t,type:"file",inMemoryRecordCache:n,transaction:r,spaceId:s});return r.postSubmitCallbacks.push((n=>{n||y().Q({environment:t,store:o,file:e})})),o}}))}function R(e){const{environment:t,store:o,file:n,pageWidth:r,preferredType:a}=e,s=v().default.getBlockKey(o.id);let l;w().I(),C().QM({environment:t,file:n,bucket:"secure",record:o.pointer,reportRichUploadMetrics:!0,onStart:e=>{if(l=m().default.DO_NOT_USE_markLegacy("image_upload"),v().default.setKeyState(s,{progressPercent:0,file:n,name:e.name,size:e.size}),n instanceof File&&n.type.indexOf("image")>=0&&!(0,i().Ql)(e.name,"tiff")&&!(0,i().Ql)(e.name,"tif")){const e=URL.createObjectURL(n),i=new Image;i.onload=function(){D(t,{store:o,width:i.naturalWidth,height:i.naturalHeight,scale:!0,type:"image",pageWidth:r}),URL.revokeObjectURL(e)},i.src=e}else{const e=(0,i().WT)({url:n.name||"",baseUrl:u().A.domainBaseUrl,publicDomainName:u().A.publicDomainName,preferredType:a});D(t,{store:o,width:r,type:e,pageWidth:r})}},onProgress:e=>{const t=v().default.getKeyState(s);t&&v().default.setKeyState(s,{...t,progressPercent:e.progressPercent})},onComplete:async e=>{const i=v().default.getKeyState(s);if(i){const c=Boolean(i.dataURL),d=i.name,u=i.size;await E(t,{source:e,store:o,isDataURL:c,pageWidth:r,preferredType:a,name:d,size:u}),n.type.indexOf("image")>=0&&(_().N(t,{blockId:o.id,fileIds:o.getFileIds(),fileSize:n.size,fileType:n.type}),m().default.DO_NOT_USE_measureLegacy(l,{environment:t,data:{success:!0,type:n.type}})),v().default.setKeyState(s,void 0)}},onError:e=>{m().default.DO_NOT_USE_measureLegacy(l,{environment:t,data:{success:!1,type:n.type}}),v().default.setKeyState(s,void 0)},retryWhenOffline:!0,retryImmediatelyAfterFailure:!0})}async function E(e,t){const{store:o,source:r,isDataURL:a,pageWidth:l,preferredType:g,name:v,size:_}=t;let b=a?"image":(0,i().WT)({url:r,baseUrl:u().A.domainBaseUrl,publicDomainName:u().A.publicDomainName,preferredType:g});const y=function(e,t){const o=/^https?:\/\//i,n=/^https:\/\/[^\/]+\.streamlit\.app/;return"maps"===e?o.test(t)?t.replace(/'/g,""):`https://maps.google.com/maps/search/${encodeURIComponent(t)}`:"embed"===e&&n.test(t)?`${t}?embed=true`:(0,i().US)(t)}(b,r),{properties:w,type:C,format:M}=await(0,i().pw)({source:y,type:b,isDataURL:a,pageWidth:l,isMobileDevice:e.device.isMobile,getEmbedData:async t=>{const o=await c().callApi({eventName:"getGenericEmbedBlockData",environment:e,data:t});return"failed"===o.type?void console.error(o.error):o.data},trackEmbedType:t=>h().vz(e,{embedType:t})});if(b=C,b===n().xd.bookmark){const n=o;return await d().Ht({environment:e,store:n,url:y,transformTimeout:0}),h().Hg(e),function(){if("do_not_prompt"===f.state)return;f.state?"displayed_once"===f.state?f.setState("displayed_twice"):"displayed_twice"===f.state&&f.setState("do_not_prompt"):f.setState("displayed_once");I().D6({label:p().A.formatMessage(T.urlTurnedBookmark)})}(),void(t.metric&&m().default.measure(t.metric,{environment:e,data:{embedType:b}}))}let P,B;h().$r(e,{embedType:C}),v&&_&&(P={size:s().x9d(_)},B=s().x9d(v));const{serverCommitResult:R}=x().createAndCommit({userAction:"embedBlockActions.initializeEmbedBlock",environment:e,canUndo:!0,perform:t=>{k().zv({store:o.getPropertiesStore(),data:{...w||{},...P},transaction:t}),B&&A().KY({environment:e,store:o.getBlockTitleStore(),value:B,transaction:t}),S().zA({stores:[o],update:M,transaction:t}),k().zv({store:o,data:{type:b},transaction:t})}});await R,t.metric&&m().default.measure(t.metric,{environment:e,data:{embedType:b}})}function D(e,t){let{store:o,...n}=t;x().createAndCommit({userAction:"embedBlockActions.initializeFormat",environment:e,canUndo:!0,perform:e=>{S().zA({stores:[o],update:(0,i().CN)(n),transaction:e})}})}async function N(e,t){const{store:o,from:i,callback:l}=t,c=o.getProperties(),d=o.getType(),u=d===n().xd.bookmark?c.link:c.source,p=r().MO(u),{display_source:m,original_url:g}=o.getFormat(),f=o.isExternalObjectInstanceBlockStore()?g:p||m;if(!f)return;const v=s().q4_(c.title),h=a().SB({title:v,source:f});let _="file";"image"!==d&&"video"!==d||(_=d),await b().OG(e,{url:f,downloadName:h,type:_,from:i,callback:l,permissionRecord:o.pointer,download:h.endsWith(".html")||h.endsWith(".htm")})}const L=(0,l().YK)({downloadingImage:{id:"embedBlockActions.downloading.label",defaultMessage:"Downloading…"}});async function F(e){const{store:t,environment:o,callback:n}=e,r=await async function(e){let{store:t,environment:o,calledFrom:n}=e;const r=t.getNavigableBlockStore();if(!r)return;const i=await c().callApi({eventName:"getBlockFileDownloadUrl",environment:o,data:{blockId:t.id,pageBlockId:r.id,meta:{name:n}}});if("success"!==i.type)return;const{url:a,fileName:s}=i.data;return{url:a,fileName:s}}({store:t,environment:o,calledFrom:"downloadSource"});if(null==r||!r.url)throw new Error("Failed to get block download URL");const{url:i,fileName:l}=r;h().uR(o,{url:i,from:"embedBlockActions"});const d=a()._J(i)?b().KE(o,{url:i,download:!0,downloadName:l,permissionRecord:t.pointer}):function(e){const{store:t,environment:o}=e;if(!o.currentUser.id)return Promise.resolve();const n=t.getProperties(),r=s().q4_(null==n?void 0:n.source),i=s().q4_(null==n?void 0:n.caption);return a().pJ(r,t.pointer,u().A.domainBaseUrl,o.currentUser.id,i)}(e);return I().D6({label:p().A.formatMessage(L.downloadingImage),durationMs:"keep"}),d.then(n).finally((()=>{I().N2()}))}function U(e){const{store:t}=e,o=g().K.findBlockFromStoreWithMethod(t,"replace");o&&o.replace()}},675811:(e,t,o)=>{o.d(t,{f:()=>i});o(296540);var n=()=>o(401497),r=o(474848);function i(){const e=(0,n().IS)((e=>({span:{marginLeft:2,marginRight:2,color:e.lightTextColor}})),[]);return(0,r.jsx)("span",{style:e.span,children:"/"})}},675925:(e,t,o)=>{o.d(t,{o:()=>l});var n=()=>o(534177),r=()=>o(989423),i=()=>o(508496);function a(e){return"init"===e?"action_init":"success"===e?"action_success":void(0,n().HB)(e)}function s(e,t){let{type:o,...n}=t;i().default.checkGate({gateName:"track_block_actions"})&&(0,r().u4)({environment:e,event:{eventName:a(o),eventProperties:n}})}function l(e,t,o){return s(e,{...t,type:"init"}),o((()=>{s(e,{...t,type:"success"})}))}},679156:(e,t,o)=>{o.d(t,{$9:()=>u,Ip:()=>h,JV:()=>d,JW:()=>l,KY:()=>_,NX:()=>c,Ug:()=>f,Y:()=>p,Yr:()=>r,hQ:()=>s,hi:()=>i,mm:()=>a,nq:()=>v,pn:()=>m,ty:()=>g});var n=()=>o(989423);function r(e,t){n().vd(e,"legacy_transclusion_autofix",t)}function i(e,t){n().vd(e,"legacy_transclusion_duplication_fix",t)}function a(e,t){n().vd(e,"transaction_timestamp_collision",t)}function s(e,t){n().vd(e,"transaction_timestamp_regression",t)}function l(e,t){n().vd(e,"transaction_race_hazard",t)}function c(e,t){n().vd(e,"transaction_async_data_loss",t)}function d(e,t){n().vd(e,"transaction_deadlock_warning",t)}function u(e,t){n().vd(e,"transaction_too_large",t)}function p(e,t){n().vd(e,"transaction_queue_error_show",t)}function m(e){n().vd(e,"connection_error_show",{})}function g(e,t){n().vd(e,"connection_error_indicator_details_show",t)}function f(e,t){n().vd(e,"low_storage_error_show",t)}function v(e,t){n().vd(e,"transaction_queue_healthcheck",t)}function h(e,t){n().vd(e,"save_edits_error_modal_show",t)}function _(e,t){n().vd(e,"unsaved_transaction_error",t)}},679596:(e,t,o)=>{o.d(t,{G:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("pdf",{viewBox:"0 0 23.5 23.5",svg:(0,n.jsx)("path",{d:"M8.61 10.922a.44.44 0 01-.313-.11.422.422 0 01-.117-.312.9.9 0 01.054-.273l1.07-2.985c.12-.354.342-.531.665-.531.338 0 .568.177.687.531l1.07 2.985c.032.114.047.205.047.273a.44.44 0 01-.109.313c-.073.072-.18.109-.32.109-.219 0-.365-.133-.438-.399l-.242-.68H9.281l-.226.68c-.068.266-.216.399-.446.399zm.85-1.75h1.032L10 7.609h-.047l-.492 1.563zm3.657-1.11a.514.514 0 01-.367-.14.503.503 0 01-.14-.36c0-.14.046-.257.14-.351a.514.514 0 01.367-.14h2.195a.477.477 0 01.5.492c0 .14-.046.26-.14.359a.487.487 0 01-.36.14h-2.195zm0 2.618a.514.514 0 01-.367-.14.503.503 0 01-.14-.36c0-.14.046-.258.14-.352a.514.514 0 01.367-.14h2.195a.477.477 0 01.5.492c0 .14-.046.26-.14.36a.487.487 0 01-.36.14h-2.195zm-4.953 6.234V13.25c0-.333.089-.583.266-.75.182-.172.435-.258.758-.258h5.632c.677 0 1.016.336 1.016 1.008v3.586h-.547l-1.492-1.719a.58.58 0 00-.242-.172.84.84 0 00-.282-.047c-.177 0-.348.073-.515.22l-1.547 1.366-.617-.562a.68.68 0 00-.461-.188.617.617 0 00-.438.188l-.984.992h-.547zm2.492-1.797a.78.78 0 00.57-.242.78.78 0 00.243-.57c0-.23-.081-.42-.242-.57a.823.823 0 00-.57-.243.737.737 0 00-.579.227.812.812 0 00-.234.586c0 .218.078.409.234.57a.79.79 0 00.578.242zm-5.36 2.64V5.97c0-.839.214-1.474.641-1.907.428-.437 1.06-.656 1.899-.656h8.32c.839 0 1.472.219 1.899.656.427.433.64 1.068.64 1.907v11.789c0 .844-.213 1.482-.64 1.914-.427.432-1.06.648-1.899.648h-8.32c-.839 0-1.471-.216-1.899-.648-.427-.432-.64-1.07-.64-1.914zm1.54-.093c0 .36.094.635.281.828.188.193.472.29.852.29h8.062c.38 0 .664-.097.852-.29.187-.193.281-.469.281-.828V6.07c0-.364-.094-.643-.281-.836-.188-.198-.471-.296-.852-.296H7.97c-.38 0-.664.098-.852.296-.187.193-.281.472-.281.836v11.594z"})})},679924:(e,t,o)=>{o.d(t,{v:()=>te});o(898992),o(803949);var n=()=>o(837788);function r(e){return o=["user_id","device_id"],(t=e)?(o.forEach((e=>{e in t&&(t[e]=t[e]?t[e].replace(/-/g,""):void 0)})),(0,n().A)(t,"ignore-class-instances")):t;var t,o}var i=()=>o(845710),a=()=>o(857639),s=()=>o(206267),l=()=>o(496603),c=()=>o(227440),d=()=>o(508496),u=()=>o(313462),p=()=>o(506671),m=(o(944114),o(354520),o(672577),o(581454),o(737550),()=>o(885443)),g=()=>o(945610),f=()=>o(68263),v=()=>o(677338),h=()=>o(498212),_=()=>o(534177),b=()=>o(196286),y=()=>o(22102),S=()=>o(186445),w=()=>o(529543),k=()=>o(250182),I=()=>o(475133),A=()=>o(79059),x=()=>o(108944),C=()=>o(747100),T=()=>o(731320),M=()=>o(627506),P=()=>o(875856),B=()=>o(792415),R=()=>o(351360),E=()=>o(712505),D=()=>o(630116),N=()=>o(543491),L=()=>o(749240),F=()=>o(271584),U=()=>o(329418),O=()=>o(233996),V=()=>o(455968),j=()=>o(449918),z=()=>o(42772),q=()=>o(599824);async function H(e,t,o){const n=await(0,O().w)(e),{preboot:r,dontWait:i}=o||{},a="currentUser"in e;i||r||!a||await async function(e){e.currentUser.isLoggedIn()&&R().default.state.mainEditorCurrentBlockStore&&(await R().default.waitUntil((()=>Boolean(R().default.state.mainEditorCurrentBlockStore&&R().default.state.mainEditorCurrentBlockStore.isReady))),R().default.state.currentSpaceStore&&await L().subscriptionDataStoreInstance.waitUntilLoaded());P().default.shouldRefresh(e.currentUser.id)&&await(0,q().E)(e)}(e);const s=!i&&a?await(0,M()._)(e):void 0,c=(0,j().e)(),{currentUserStore:d,currentSpaceStore:u}=R().default.state,p=(0,I().getMobileNativeDeviceInfo)(),v=(0,A().getMobileNativeSessionInfo)(),b=await(0,k().getDesktopDeviceInfo)(),N=await async function(e,t){const o=await(0,w().hasPermissionForThirdPartyService)("amplitude",e),n=(0,m().B6)(t);return{is_user_consent_to_track:o,tid:n}}(e,t),U=await async function(){const e=E().default.state,t=C().m3(),o=S().ao();if(o){const n=T().i0(o).map((e=>{let{permissionItem:t}=e;return t})),r=n.find((e=>"public_permission"===e.type)),i=n.find((e=>"space_permission"===e.type)),a=n.filter((e=>J(e)&&(0,f().h9)(e.role))),s=n.filter((e=>J(e)&&(0,f().p2)(e.role))),c=await async function(e){const t=await y().k.load(),o=x().fU(e),n=[],r=l().Bq(o.map((e=>{if(e instanceof D().h4)return;const o=e.getCopiedFromPointer();return o&&t.isTemplate(o)&&n.push(o.id),n})).filter(_().O9));return r}(o),d=Boolean(c)&&c.length>0,u=e.open?void 0:R().default.state.currentCollectionViewStore,{publicPageData:p}=B().A.state,m=null==p?void 0:p.isPublicShareLink,v=await y().k.load(),b=o.getCopiedFromPointer();let S;return S=n.some(f().Ny)?"deleted_from_trash":o.pathIsDead()?"in_trash":"live",{page_id:o.id,page_public_role:r?r.role:g().v,page_space_role:i?i.role:g().v,page_all_collaborator_count:s.length+a.length,page_editor_collaborator_count:s.length,page_read_only_collaborator_count:a.length,page_content_count:o.getContentLength(),page_current_user_role:o.getRole(),page_is_peek:t,page_copied_from:b?(0,h().ot)(b.id):void 0,page_is_notion_template:!!b&&v.isTemplate(b),page_is_public_share_link:m,page_is_template:o.isTemplate(),page_is_prepopulated:d,page_prepopulated_template_ids:c,page_is_database:o.isCollectionView(),page_view_type:u?u.getType():void 0,page_user_has_explicit_access:p?p.userHasExplicitAccess:g().v,page_deletion_status:S}}}(),H=(null==s?void 0:s.space_id)||void 0;return{data:{...G(),...n,...s,...U,...(0,V().U)(),...$(),...K(),client_initialization_id:F().d,...W({userId:null==d?void 0:d.id,spaceId:null==u?void 0:u.id}),...b,...p,...v,...c,...N,...Z(),...(Y={spaceId:H,userId:(0,z().m)(),deviceId:n.device_id,eventName:t},{unique_event_marker:Q(Y)}),...X(),hardware_concurrency:navigator.hardwareConcurrency,hardware_memory:navigator.deviceMemory},spaceId:null==s?void 0:s.space_id};var Y}function W(e){const{userId:t,spaceId:o}=e;if(!t||!o)return;const n=(0,U().g)({userId:t,spaceId:o});return n?{notion_session_id:n.id,notion_session_start_ts:n.sessionStartTime,tab_id:(0,v().x0)(),tab_count:(0,b().D)()}:void 0}function K(){const e=N().A.state;if(e)return{queryId:e.queryId}}function G(){const{currentSpaceViewStore:e}=R().default.state;return e&&e.isDefined()?{notify_desktop:e.getNotifyDesktop(),notify_email:e.getNotifyEmail(),notify_mobile:e.getNotifyMobile(),notify_email_digest:e.getNotifyEmailDigest()}:{}}function $(){const{mainEditorCurrentBlockStore:e}=R().default.state;if(e){const t=x().Uo(e);if(t)return{team_id:(0,h().Xw)(t.id)}}return{}}const Y={};function Q(e){const{spaceId:t,userId:o,deviceId:n,eventName:r}=e,i=(0,h().gB)(`${t}:${o}:${n}:${r}`),a=Y[i],s=Date.now();if(!a)return Y[i]=s,!0;const l=new Date(a),c=new Date(s);return l.getUTCDate()!==c.getUTCDate()?(Y[i]=s,!0):void 0}function Z(){let e;return d().default.state.isLoaded&&(e=d().default.getStatsigExperimentsMap()),{experiments:e,experimentStoreLoaded:d().default.state.isLoaded}}function X(){if(navigator.connection)return{net_downlink:navigator.connection.downlink,net_effective_type:navigator.connection.effectiveType,net_rtt:navigator.connection.rtt,net_save_data:navigator.connection.saveData}}function J(e){return"user_permission"===e.type}o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);const ee=new Set(["page_visit"]);async function te(e,t,o,m){try{if(!c().A.state.online&&!ee.has(t)&&d().default.checkGate({gateName:"offline_log_allowlist"}))return;const a=(null==m?void 0:m.sampling)||{behavior:"statsig",fallbackBehavior:"custom",fallbackSampleRate:1},f=await(0,p().d)({eventName:t,eventProperties:o,sampling:a});if(!f)return;0;const{data:v,spaceId:h}=await H(e,t,m),_={eventName:t,eventData:{...r((0,n().A)(l().mg({...o,...v,...null==m?void 0:m.forceOverrideAutomaticEventData,sample_decision:f}),"ignore-class-instances")),__context:{locale:v.preferred_locale,page:{referrer:window.document.referrer,search:window.location.search}},sharedUUID:s().JW()},spaceId:h};i().u4(_);var g;if((0,u().I)()&&console.log(`trackAnalytics:%c ${t}`,"font-weight: bold;",o),e.device.isMobileNative&&d().default.checkGate({gateName:"debug_analytics"}))null===(g=e.mobileNative)||void 0===g||g.debugLog(`🦁 analytic event: ${t} | ${JSON.stringify(o)}`)}catch(f){a().log({level:"error",from:"analyticsHelpers",type:"trackAnalytics",data:{eventName:t,miscDataToConvertToString:{e:f}}})}}},680026:(e,t,o)=>{o.d(t,{EV:()=>i,PZ:()=>l,dp:()=>a,xm:()=>s});o(944114);var n=()=>o(496603),r=()=>o(720665);function i(e){if(null!=e&&e.blockId)return e.blockId}function a(e,t){const o=e.currentUser.id;return t.userId===o||t.present}function s(e){var t;return(null===(t=e.state.rootStore)||void 0===t?void 0:t.canEdit())??!1}function l(e){const{pageVisitStore:t,presenceStore:o}=e,{remotePresenceData:i}=o.state;let a=[];i&&n().uk(i,(e=>{null!=e&&e.userId&&a.push(e)}));const{pageId:s,lastViewTime:l,lastExitTime:c,totalCount:d,hasMore:u,...p}=t.state;return n().uk(p,(e=>{e.isDefined()&&a.push({userId:e.getUserId(),activityTimestampNearestMinuteMs:(0,r().WY)(e.getVisitedAt()),present:!1})})),a=n().hS(a,(e=>e.userId)),n().Ul(a,(e=>{let{activityTimestampNearestMinuteMs:t}=e;return t?-t:0}))}},680074:(e,t,o)=>{o.d(t,{FX:()=>a,R$:()=>l,YD:()=>i,iZ:()=>s});var n=()=>o(130382),r=()=>o(351360);function i(){const{currentUserSettingsStore:e,currentSpaceStore:t}=r().default.state,o=(null==e?void 0:e.getSettings())||{},n=null==t?void 0:t.getPlanType();return"professional"===o.domain_type&&"team"===n}function a(){const{currentUserSettingsStore:e}=r().default.state;return((null==e?void 0:e.getSettings())||{}).domain_type}function s(e){const t=e.getSettings(),o=null==t?void 0:t.signup_time;return o?(0,n().Mn)(o):null}function l(e){const{currentUserSettingsStore:t}=r().default.state;if(t&&t.id===e.currentUser.id)return t}},680141:(e,t,o)=>{o.d(t,{Y:()=>n});const n=["relations_show_deleted","relations_show_invalid_collection","relations_show_no_access","collections_xws","formulas_batch_generator_changes","collections_dedupe_dependency_loading"]},681445:(e,t,o)=>{o.d(t,{S:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isOpen:!1}}open(e){const{collectionViewBlockId:t,collectionViewId:o}=e;this.setState({isOpen:!0,type:"ai_ephemeral_view",collectionViewBlockId:t,collectionViewId:o})}openAndCreateChartDrilldownView(e){const{collectionViewBlockStore:t,collectionViewValue:o,title:n}=e;this.setState({isOpen:!0,type:"chart_drilldown",collectionViewBlockStore:t,collectionViewValue:o,title:n})}close(){this.setState({isOpen:!1})}}const r=new n},681634:(e,t,o)=>{o.d(t,{c:()=>i});var n=()=>o(555776),r=()=>o(116008);function i(e){const t=r().A.state;t.open?(r().A.setState({open:!1,rect:t.rect}),n().A.reset()):r().A.setState({...t,from:void 0})}},682146:(e,t,o)=>{o.d(t,{ag:()=>T,E5:()=>$,g2:()=>G,dD:()=>U,Jx:()=>L,wm:()=>F,gP:()=>O,to:()=>D,Vw:()=>N,zY:()=>Y,lO:()=>H,xm:()=>W,hn:()=>Q,Wp:()=>j,Kc:()=>J,yT:()=>V,qI:()=>z,i5:()=>Z,L6:()=>K,q7:()=>ee,hU:()=>R,fE:()=>X,dC:()=>P});o(16280),o(898992),o(823215),o(354520),o(672577),o(737550);var n=()=>o(700500),r=()=>o(443239),i=()=>o(970013),a=()=>o(713998),s=()=>o(601813),l=()=>o(202017),c=()=>o(575157),d=(o(296540),o(474848));const u={viewBox:"0 0 20 20",svg:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M5.5 6.975a.55.55 0 1 0 0 1.1h5.85a.55.55 0 0 0 0-1.1zM6.525 10a.55.55 0 0 1 .55-.55h5.85a.55.55 0 1 1 0 1.1h-5.85a.55.55 0 0 1-.55-.55m1.9 1.925a.55.55 0 1 0 0 1.1h5.85a.55.55 0 0 0 0-1.1z"}),(0,d.jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v7.5c0 1.174.951 2.125 2.125 2.125h11a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 15.5 4.125zM3.625 6.25c0-.483.392-.875.875-.875h11c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-11a.875.875 0 0 1-.875-.875z"})]})},p=(0,o(340498).wt)("viewTimeline",u);var m=()=>o(798880),g=()=>o(441738),f=()=>o(919709),v=()=>o(931075),h=()=>o(959013),_=()=>o(972435),b=()=>o(449476),y=()=>o(351360),S=()=>o(508496),w=()=>o(411671),k=()=>o(749240),I=()=>o(68465),A=()=>o(71304),x=()=>o(37433),C=()=>o(470928);const T=32,M=(0,h().YK)({title:{defaultMessage:"Title",id:"database.propertyTypeName.title"},text:{defaultMessage:"Text",id:"database.propertyTypeName.text"},number:{defaultMessage:"Number",id:"database.propertyTypeName.number"},url:{defaultMessage:"URL",id:"database.propertyTypeName.url"},select:{defaultMessage:"Select",id:"database.propertyTypeName.select"},multi_select:{defaultMessage:"Multi-select",id:"database.propertyTypeName.multi_select"},status:{defaultMessage:"Status",id:"database.propertyTypeName.status"},person:{defaultMessage:"Person",id:"database.propertyTypeName.person"},email:{defaultMessage:"Email",id:"database.propertyTypeName.email"},phone_number:{defaultMessage:"Phone",id:"database.propertyTypeName.phone_number"},date:{defaultMessage:"Date",id:"database.propertyTypeName.date"},file:{defaultMessage:"Files & media",id:"database.propertyTypeName.file"},checkbox:{defaultMessage:"Checkbox",id:"database.propertyTypeName.checkbox"},formula:{defaultMessage:"Formula",id:"database.propertyTypeName.formula"},relation:{defaultMessage:"Relation",id:"database.propertyTypeName.relation"},rollup:{defaultMessage:"Rollup",id:"database.propertyTypeName.rollup"},created_time:{defaultMessage:"Created time",id:"database.propertyTypeName.created_time"},created_by:{defaultMessage:"Created by",id:"database.propertyTypeName.created_by"},last_edited_time:{defaultMessage:"Last edited time",id:"database.propertyTypeName.last_edited_time"},last_edited_by:{defaultMessage:"Last edited by",id:"database.propertyTypeName.last_edited_by"},last_visited_time:{defaultMessage:"Last visited time",id:"database.propertyTypeName.last_visited_time"},button:{defaultMessage:"Button",id:"database.propertyTypeName.button"},auto_increment_id:{defaultMessage:"ID",id:"database.propertyTypeName.auto_increment_id"},location:{defaultMessage:"Location",id:"database.propertyTypeName.location"},verification:{defaultMessage:"Verification",id:"database.propertyTypeName.verification"},ai_summary:{defaultMessage:"AI summary",id:"database.propertyTypeName.text.summarizeWithAi"},ai_custom_prompt:{defaultMessage:"AI custom autofill",id:"database.propertyTypeName.text.customPromptWithAI"},ai_extract:{defaultMessage:"AI key info",id:"database.propertyTypeName.text.extractInfoWithAI"},ai_translate:{defaultMessage:"AI translation",id:"database.propertyTypeName.text.translateWithAI"},ai_keywords:{defaultMessage:"AI keywords",id:"database.propertyTypeName.text.keywordsWithAI"},geo_point:{defaultMessage:"Geopoint",id:"database.propertyTypeName.geo_point"}}),P={title:_().A.formatMessage(M.title),text:_().A.formatMessage(M.text),number:_().A.formatMessage(M.number),url:_().A.formatMessage(M.url),select:_().A.formatMessage(M.select),multi_select:_().A.formatMessage(M.multi_select),status:_().A.formatMessage(M.status),person:_().A.formatMessage(M.person),email:_().A.formatMessage(M.email),phone_number:_().A.formatMessage(M.phone_number),date:_().A.formatMessage(M.date),file:_().A.formatMessage(M.file),checkbox:_().A.formatMessage(M.checkbox),formula:_().A.formatMessage(M.formula),relation:_().A.formatMessage(M.relation),rollup:_().A.formatMessage(M.rollup),created_time:_().A.formatMessage(M.created_time),created_by:_().A.formatMessage(M.created_by),last_edited_time:_().A.formatMessage(M.last_edited_time),last_edited_by:_().A.formatMessage(M.last_edited_by),last_visited_time:_().A.formatMessage(M.last_visited_time),button:_().A.formatMessage(M.button),auto_increment_id:_().A.formatMessage(M.auto_increment_id),location:_().A.formatMessage(M.location),verification:_().A.formatMessage(M.verification),ai_summary:_().A.formatMessage(M.ai_summary),ai_custom_prompt:_().A.formatMessage(M.ai_custom_prompt),ai_extract:_().A.formatMessage(M.ai_extract),ai_translate:_().A.formatMessage(M.ai_translate),ai_keywords:_().A.formatMessage(M.ai_keywords),geo_point:_().A.formatMessage(M.geo_point)};(0,h().YK)({text:{defaultMessage:"A single line of text.",id:"database.propertyTypeDescription.text"},number:{defaultMessage:"A number, with options to format as currency, percent, and more.",id:"database.propertyTypeDescription.number"},url:{defaultMessage:"A link to a page on the web.",id:"database.propertyTypeDescription.url"},select:{defaultMessage:"Select from a list of options.",id:"database.propertyTypeDescription.select"},multi_select:{defaultMessage:"Tag with values from a list of options.",id:"database.propertyTypeDescription.multi_select"},status:{defaultMessage:"Tag with a list of custom options with groups",id:"database.propertyTypeDescription.status"},person:{defaultMessage:"Reference a person on your team.",id:"database.propertyTypeDescription.person"},email:{defaultMessage:"Reference an email address.",id:"database.propertyTypeDescription.email"},phone_number:{defaultMessage:"Reference a phone number.",id:"database.propertyTypeDescription.phone_number"},date:{defaultMessage:"A date, with options to format and include time.",id:"database.propertyTypeDescription.date"},file:{defaultMessage:"Upload files and images.",id:"database.propertyTypeDescription.file"},checkbox:{defaultMessage:"Track status with a single checkbox.",id:"database.propertyTypeDescription.checkbox"},formula:{defaultMessage:"Compute a formula using other properties of a page.",id:"database.propertyTypeDescription.formula"},relation:{defaultMessage:"Allow pages in this database to reference pages in another.",id:"database.propertyTypeDescription.relation"},rollup:{defaultMessage:"Display and summarize data from a relation.",id:"database.propertyTypeDescription.rollup"},created_time:{defaultMessage:"Reference the date and time a page was created.",id:"database.propertyTypeDescription.created_time"},created_by:{defaultMessage:"Reference the person that created a page.",id:"database.propertyTypeDescription.created_by"},last_edited_time:{defaultMessage:"Reference the date and time a page was last edited.",id:"database.propertyTypeDescription.last_edited_time"},last_edited_by:{defaultMessage:"Reference the person that last edited a page.",id:"database.propertyTypeDescription.last_edited_by"},last_visited_time:{defaultMessage:"Reference the date and time a page was last visited by you.",id:"database.propertyTypeDescription.last_visited_time"},button:{defaultMessage:"A clickable button that can be configured to perform any action.",id:"database.propertyTypeDescription.button"},auto_increment_id:{defaultMessage:"An auto-increment ID.",id:"database.propertyTypeDescription.auto_increment_id"},location:{defaultMessage:"A location.",id:"database.propertyTypeDescription.location"},verification:{defaultMessage:"Verified status.",id:"database.propertyTypeDescription.verification"},geo_point:{defaultMessage:"A location on the map.",id:"database.propertyTypeDescription.geo_point"}});const B=["select","multi_select","status","person","date","created_time","created_by","last_edited_time","last_edited_by"];function R(e){return B.includes(e.type)}const E=(0,h().YK)({tableDisplayName:{defaultMessage:"Table",id:"collectionHelpers.table.displayName"},boardDisplayName:{defaultMessage:"Board",id:"collectionHelpers.board.displayName"},calendarDisplayName:{defaultMessage:"Calendar",id:"collectionHelpers.calendar.displayName"},listDisplayName:{defaultMessage:"List",id:"collectionHelpers.list.displayName"},galleryDisplayName:{defaultMessage:"Gallery",id:"collectionHelpers.gallery.displayName"},timelineDisplayName:{defaultMessage:"Timeline",id:"collectionHelpers.timline.displayName"},pageDisplayName:{defaultMessage:"Page",id:"collectionHelpers.page.displayName"},chartDisplayName:{defaultMessage:"Chart",id:"collectionHelpers.chart.displayName"},formEditorDisplayName:{defaultMessage:"Form",id:"collectionHelpers.formEditor.displayName"},chatDisplayName:{defaultMessage:"Chat",id:"collectionHelpers.chat.displayName"},customDisplayName:{defaultMessage:"Custom",id:"collectionHelpers.custom.displayName"},mapDisplayName:{defaultMessage:"Map",id:"collectionHelpers.map.displayName"}}),D={table:_().A.formatMessage(E.tableDisplayName),board:_().A.formatMessage(E.boardDisplayName),calendar:_().A.formatMessage(E.calendarDisplayName),list:_().A.formatMessage(E.listDisplayName),gallery:_().A.formatMessage(E.galleryDisplayName),timeline:_().A.formatMessage(E.timelineDisplayName),page:_().A.formatMessage(E.pageDisplayName),chart:_().A.formatMessage(E.chartDisplayName),form_editor:_().A.formatMessage(E.formEditorDisplayName),feed:"Feed",map:_().A.formatMessage(E.mapDisplayName),chat:_().A.formatMessage(E.chatDisplayName),custom:_().A.formatMessage(E.customDisplayName)},N={table:o(421559).T,board:o(969523).q,calendar:o(42583).D,list:l().n,gallery:o(858141).p,timeline:p,page:l().n,chart:o(979251).j,form_editor:c().D,feed:c().D,map:c().D,chat:o(859002).chatIcon,custom:c().D},L={table:void 0,board:"board_cover",calendar:void 0,list:void 0,gallery:"gallery_cover",timeline:void 0,page:void 0,chart:void 0,form_editor:void 0,feed:void 0,map:void 0,chat:void 0,custom:void 0},F={table:void 0,board:"board_cover_size",calendar:void 0,list:void 0,gallery:"gallery_cover_size",timeline:void 0,page:void 0,chart:void 0,form_editor:void 0,feed:void 0,map:void 0,chat:void 0,custom:void 0},U={table:void 0,board:"board_cover_aspect",calendar:void 0,list:void 0,gallery:"gallery_cover_aspect",timeline:void 0,page:void 0,chart:void 0,form_editor:void 0,feed:void 0,map:void 0,chat:void 0,custom:void 0},O={table:!0,board:!1,calendar:!1,list:!0,gallery:!0,timeline:!0,page:!1,chart:!0,form_editor:!1,feed:!1,map:!1,chat:!1,custom:!1};function V(e){const t=e.getType(),o=e.getTitleStore();return t&&(0,n().Ef)(t)&&o?o:e.getBlockTitleStore()}function j(e){let t=[];switch(e.viewType){case"table":t=e.format.table_properties??[];break;case"gallery":t=e.format.gallery_properties??[];break;case"board":t=e.format.board_properties??[];break;case"calendar":t=e.format.calendar_properties??[];break;case"list":t=e.format.list_properties??[];break;case"timeline":t=e.format.timeline_properties??[];break;case"page":t=e.format.collection_page_properties??[]}return t.filter((t=>t.visible===e.visible))}function z(e,t){let o=[];switch(t){case"gallery":e.gallery_properties&&(o=e.gallery_properties??[]);break;case"board":e.board_properties&&(o=e.board_properties??[])}const n=o.find((e=>{let{property:t}=e;return"title"===t}));return!!n&&Boolean(n.visible)}const q=["text","number","select","multi_select","status","date","person","file","checkbox","url","email","phone_number","formula","relation","rollup","created_time","created_by","last_edited_time","last_edited_by","button","auto_increment_id","location","verification","geo_point"];function H(e){let{collectionContextStore:t,environment:o}=e;const n=t.collectionStore();if(!n)return[];const r=w().A.getMode(o,n);return(0,I().jq)(o,r,n)?["ai_summary","ai_custom_prompt","ai_translate","ai_keywords"]:[]}function W(e){let{collectionContextStore:t,environment:o}=e;return q.filter((e=>{if("location"===e&&(!(0,x().nk)()||"collectionTypedView"!==t.contextType))return!1;if("geo_point"===e)return S().default.checkGate({gateName:"geo_point_property"});if("verification"===e){var o,n;const e=Boolean(null===(o=t.collectionViewBlockStore())||void 0===o?void 0:o.isCollectionViewPageWithContent());if((0,C().Io)()&&!e)return!1;if(!e)return!1;const r=null===(n=t.collectionStore())||void 0===n?void 0:n.getSchema();if(!r||K(r,"verification"))return!1}return"auto_increment_id"!==e||!b().A.state.isOpen}))}function K(e,t){for(const n in e){var o;if((null===(o=e[n])||void 0===o?void 0:o.type)===t)return!0}return!1}function G(e){let{propertySchema:t,property:o,blockStores:n,collectionSchema:s,collectionStore:l,spaceStore:c}=e;if(0===n.length||!(0,a().Hz)(t))return!1;if((0,i().M1)(t)){if(l&&c){const e=l.isPageTreeCollection(),t=c.getModel(),o=t&&(0,v().Xi)(t);if(!e&&!o)return!1}return n.every((e=>$(t,e,s)))}return!(0,i().F_)(t.type)&&!(0,r().u)(o)}function $(e,t,o){const n=e.verifier_property;if(!n)return!1;const r=t.getPropertyValue(n),i=(0,a().e5)({textValue:r,propertySchema:o[n],blockCreatorPointer:t.getCreatedByPointer()}),s=y().default.state.currentUserRootStore;return!!s&&i.some((e=>e.id===s.id&&e.table===m().oo))}function Y(e){const{collectionStore:t,environment:o,intl:n,queryForFilter:r}=e;if(""===r)return!0;return(0,A().tS)({environment:o,intl:n,store:t}).toUpperCase().includes(r.toUpperCase())}function Q(){var e;const t=(null===(e=k().subscriptionDataStoreInstance.state)||void 0===e?void 0:e.addOns)??[];return(0,g().GI)(t)}function Z(e){return"status"===e.type&&void 0!==e.defaultOption||"person"===e.type&&void 0!==e.default}function X(e){const{collectionContextStore:t,newValue:o,property:n}=e,r=J(t),i=Object.keys(r).find((e=>{var t;return e!==n&&(null===(t=r[e])||void 0===t?void 0:t.name)===o}));return Boolean(i)}function J(e){const t=e.collectionStore();return t?t.getSchema():e.normalizedSchemaStore.state||{}}function ee(e,t,o,n){var r;const i=o.getAssociatedCollectionStore();if(!i||"collection"!==i.table||!i.getSchema())return!1;if("text"!==(null===(r=(0,a()._g)({schema:i.getSchema(),property:n}))||void 0===r?void 0:r.type))return!0;return(0,f().qAZ)((0,s().l8)({discussionContextData:e.getContext()??[],discussionType:e.getType()??"default",discussionId:e.id,intl:t})).length===(0,f().qAZ)(o.getPropertyStore(n).getValue()).length}},683259:(e,t,o)=>{o.d(t,{D8:()=>D,Dh:()=>C,Pf:()=>R,Xt:()=>U,_z:()=>F,dX:()=>T,g8:()=>S,if:()=>A,in:()=>N,ki:()=>M,nZ:()=>E,q4:()=>I,sL:()=>k,tw:()=>B,vy:()=>x,wL:()=>w});o(944114),o(898992),o(354520),o(803949),o(581454);var n=()=>o(496603),r=()=>o(534177),i=()=>o(700500),a=()=>o(713998),s=()=>o(244149),l=()=>o(407730),c=()=>o(651124),d=()=>o(236162),u=()=>o(390066),p=()=>o(792071),m=()=>o(142748),g=()=>o(450648),f=()=>o(179034),v=()=>o(869558),h=()=>o(437607),_=()=>o(854150),b=()=>o(914462),y=()=>o(919709);function S(e){const{exportArgs:t,renderers:o}=e,{blockId:n,getRecordValue:r}=t,i=r({table:f().ev,id:n});if(!i)return;const a=i.type,s=e.renderers.blockRenderers[a];return s?s({block:i,exportArgs:t,renderers:o}):void 0}function w(e){const{exportArgs:t,renderers:o,ticker:n}=e,{blockId:r,getRecordValue:i,exportEmptyProperties:a}=t,s=i({table:f().ev,id:r});if(!s)return Promise.resolve(void 0);if(a){const e=(0,d().zN)({getRecordValue:i,block:s});if(e&&null!=e&&e.schema){s.properties=s.properties||{};for(const[t,o]of Object.entries(e.schema))t in s.properties||(s.properties[t]=[[" "]])}}const l=s.type,c=e.renderers.asyncBlockRenderers[l];return c?c({block:s,exportArgs:t,renderers:o,ticker:n}):Promise.resolve(void 0)}function k(e){const{schema:t,property:o,block:n,renderers:r,exportArgs:i}=e,s=t[o];if(!s)return;const l=(0,a().yQ)(n,o),c=e.renderers.propertyRenderers[s.type];return c?c({textValue:l,propertySchema:s,property:o,schema:t,block:n,renderers:r,exportArgs:i}):void 0}function I(e){const{annotation:t,children:o,exportArgs:n,renderers:r}=e,i=y()._XS(t),a=r.annotationRenderers[i];if(a)return a({annotation:t,children:o,exportArgs:n,renderers:r})}function A(e){return e.children}function x(e){const{textValue:t,exportArgs:o,renderers:r,fromString:i}=e,a=t?y().RQ(t):[];if(0===a.length)return[];const s=a.map((e=>{let t=i(y().N8A(e));const n=y().uPN(e),a=n.filter(y().iGj),s=n.filter((e=>!y().iGj(e)));for(const i of a)if(t=I({exportArgs:o,renderers:r,annotation:i,children:t}),t)break;for(const i of s)t=I({exportArgs:o,renderers:r,annotation:i,children:t});return t}));return n().oE(s)}function C(e){var t;const{blockModel:o,exportArgs:n}=e,{preferredViewMap:r,getRecordValue:i}=n,a=p().b4_.fromGetRecordValueFn(i),s=(null==r?void 0:r[o.id])??(null===(t=o.getCollectionViewIds())||void 0===t?void 0:t[0]);if(!s)return;const l=a({table:v().Gy,id:s,spaceId:o.getSpaceId()});if(!l)return;const c=l.getCollectionPointer(o);if(!c)return;const d=a(c);return d?{collectionViewModel:l,collectionModel:d}:void 0}function T(e){var t;const{blockModel:o,exportArgs:r,includeEmptyCollection:i}=e,{root:a,userTimeZone:d,intl:m,exportFilteredCollectionView:v,getRecordValue:h,getRecordsWithParent:_,experimentService:b,formulasModule:S}=r,w=p().b4_.fromGetRecordValueFn(h),k=C(e);if(!k)return;const{collectionViewModel:I,collectionModel:A}=k;let x=[];if(v){var T;const e=null===(T=r.collectionViewExportDataMap)||void 0===T||null===(T=T.get(o.id))||void 0===T?void 0:T.filteredIds;if(null==e||!e.length)return;for(const t of e){const e=h({table:f().ev,id:t,spaceId:o.getSpaceId()});e&&(e.alive||a.table===f().ev&&a.id===e.id)&&!e.is_template&&x.push(e)}}else x=_(f().ev,A.id).filter((e=>(e.alive||a.table===f().ev&&a.id===e.id)&&!e.is_template));if(!A||!i&&0===x.length)return;const M=A.getNormalizedSchema(),P=(0,u().L)(I.getFormat()||{},M,I.getRawQuery(),c().jf.Table),B=(P.table_properties||[]).filter((e=>!v||e.visible)).map((e=>e.property));B.includes("title")||B.unshift("title");const R={},E=null===(t=I.getRawQuery())||void 0===t?void 0:t.sort;if(E){const t=s().kX({userTimeZone:d,userId:void 0,intl:m,userSorts:E,apiSorts:[],schema:M,formulasModule:S}),o=x.map((e=>e.id)),n=new(s().z8)([...t,...s().e$([])]),r=new Map,i=new Map;x.forEach((t=>{n.updateBlock({block:p().Bj6.fromBlock(t),schema:M,propertyMapping:void 0,getRecordModel:p().b4_.fromGetRecordValueFn(h),resultCache:r,regExpCache:i,experimentService:b,collectionFeatureGates:e.exportArgs.collectionFeatureGates})}));s().bC(o,n).forEach(((e,t)=>{R[e]=t}))}else{(I.getPageSort()||[]).forEach(((e,t)=>{R[e]=t}))}const D=n().Ul(x,(e=>R.hasOwnProperty(e.id)?R[e.id]:e.created_time?e.created_time:1/0)),N={},F=B.map((e=>{const t=M[e],o=(null==t?void 0:t.name)||m.formatMessage(L.defaultNewProperty),n=Object.values(N);let r;return r=n.includes(o)?(0,l().A)(o,(e=>!n.includes(e))):o,N[e]=r,r}));return{schema:M,sortedBlocks:D,columnIdToName:N,columnIds:B,columnNames:F,collectionTitle:(0,g().r4)({intl:m,textValue:A.getName(),getRecordModel:w,userTimeZone:d,deterministic:!0}),collectionDescription:y().q4_(A.getDescription()),collectionViewName:I.getName(),sortingInfo:E,filteringInfo:P.property_filters,collectionId:A.id,collectionSpaceId:A.getSpaceId(),collectionViewId:I.id,collectionViewSpaceId:I.getSpaceId()}}function M(e){const{blockModel:t,exportArgs:o}=e,{getRecordValue:n}=o,i=p().b4_.fromGetRecordValueFn(n),a=t.getCollectionViewIds()||[];if(!a.length)return;return a.map((n=>{const r=i({table:v().Gy,id:n,spaceId:t.getSpaceId()});if(!r)return;const a=r.getCollectionPointer(t);if(!a)return;if(!i(a))return;return T({...e,exportArgs:{...o,preferredViewMap:{[t.id]:n}}})})).filter(r().O9)}function P(e){switch(e){case"letters":return"a";case"roman":return"i";default:return"1"}}function B(e){var t;const{block:o,exportArgs:n}=e,{getRecordValue:a}=n;let s,l=!0;const c=function(e,t){const o=null==t?void 0:t.content;if(o&&o.length>0){const n=o.findIndex((t=>t===e.id));if(-1!==n){if(0!==n)return{id:o[n-1],isParent:!1,index:-1};if((null==t?void 0:t.type)===i().xd.numberedList)return{id:e.parent_id,isParent:!0,index:0}}}return{id:void 0,isParent:!1,index:-1}}(o,a({table:f().ev,id:o.parent_id}));let d=c.index;var u;if(null!==(t=o.format)&&void 0!==t&&t.list_format&&(s=o.format.list_format,l=!1),!s)if(c.id&&null!==(u=n.numberedListCache[c.id])&&void 0!==u&&u.format){const e=n.numberedListCache[c.id];s=c.isParent&&e.inDefaultFormat?function(e){switch(e){case"numbers":return"letters";case"letters":return"roman";default:return"numbers"}}(e.format):e.format,e.inDefaultFormat||(l=!1)}else s="numbers";return-1===d&&(d=c.id&&n.numberedListCache[c.id]&&!c.isParent?n.numberedListCache[c.id].index+1:0),o.format&&(0,r().O9)(o.format.list_start_index)&&(d=o.format.list_start_index-1),n.numberedListCache[o.id]={index:d,format:s,inDefaultFormat:l},{index:d,format:P(s)}}function R(e){const{annotation:t,exportArgs:o}=e,n=y().FHi(t);if(!n)return;const{groupId:r,spaceId:i}=n,a=p().b4_.fromGetRecordValueFn(o.getRecordValue)({table:h().n,id:(0,h().T1)({spacePermissionGroupId:r,spaceId:i}),spaceId:i});return`@${(0,b().n)({intl:o.intl,permissionGroupModel:a})}`}function E(e){const{annotation:t,exportArgs:o}=e,n=y().FLg(t);if(!n)return;const{teamId:r,spaceId:i}=n,a=p().b4_.fromGetRecordValueFn(o.getRecordValue)({table:_().yK,id:r,spaceId:i});return`@${null==a?void 0:a.name}`}function D(e){const{block:t,exportArgs:o}=e,{getRecordValue:n,bulletedListCache:r}=o,i=t.format?t.format.bullet_list_format:void 0;if(t.parent_id in r)return{depth:r[t.parent_id].depth+1,list_format:i||r[t.parent_id].list_format};const a=n({table:f().ev,id:t.parent_id});if("bulleted_list"!==(null==a?void 0:a.type))return r[t.id]={depth:0,list_format:i},r[t.id];{const e=D({block:a,exportArgs:o});return{depth:e.depth+1,list_format:i||e.list_format}}}function N(e){return e.blockId===e.navigableBlockId&&!e.renderParentBlockId}const L=(0,o(959013).YK)({untitledTitle:{id:"exportRenderer.titleOfBlock.untitled",defaultMessage:"Untitled"},defaultNewProperty:{defaultMessage:"Property",id:"exportRenderer.titleOfNewProperty.property"}});function F(e){const{blockId:t,getRecordValue:o,userTimeZone:n,intl:r}=e,i=p().b4_.fromGetRecordValueFn(o),a=i({table:f().ev,id:t});return(null==a?void 0:a.getRenderTitle({getRecordModel:i,userTimeZone:n,intl:r}))||r.formatMessage(L.untitledTitle)}function U(e){const{blockId:t,root:o,getRecordValue:n,skipSelf:r}=e;for(const i of(0,m()._N)({table:f().ev,id:t},n)){if(i.table===f().ev&&p().Bj6.fromBlock(i.value).isNavigableBlock()&&(!r||i.value.id!==t))return i.value;if(i.table===o.table&&i.value.id===o.id)break}}},685781:(e,t,o)=>{o.d(t,{a:()=>d,j:()=>c});var n=()=>o(484714),r=()=>o(56366),i=()=>o(945382),a=()=>o(646736),s=()=>o(351360),l=()=>o(848237);function c(e){var t;let{entrypoint:o,userId:n,spaceStore:r}=e;const s=null==r?void 0:r.getModel();if(!n||!s)return!1;const c=null===(t=(0,a().sE)(r,n))||void 0===t?void 0:t.getModel();if(!c)return!1;return(0,i().fK)({space:s,spaceUser:c})&&l().Fj(o)}function d(e){const t=(0,n().v3)().currentUser.id;return(0,r().K8)((()=>{const{currentSpaceStore:o}=s().default.state;return c({entrypoint:e,spaceStore:o,userId:t})}),[t,e])}},685889:(e,t,o)=>{o.d(t,{$H:()=>T,AX:()=>S,B7:()=>P,D3:()=>N,D5:()=>y,Jq:()=>b,LQ:()=>D,OV:()=>x,TA:()=>M,WK:()=>F,d0:()=>_,m3:()=>L,me:()=>w,pg:()=>I,qw:()=>E,s2:()=>k,uf:()=>A,uu:()=>R,zF:()=>C});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454);var n=()=>o(970013),r=()=>o(407730),i=()=>o(617871),a=()=>o(651124),s=()=>o(416504),l=()=>o(390066),c=()=>o(945778),d=()=>o(792071),u=()=>o(527328),p=()=>o(534177),m=()=>o(895876),g=()=>o(519839),f=()=>o(878423),v=()=>o(630116),h=()=>o(342);const _=32;function b(e,t){return e.normalizedSchemaStore.state[t]}function y(e,t,o){const r=b(e,t);if(!r||"relation"!==r.type||!r.property)return!1;const i=e.collectionStore(),a=r.property===t&&(0,n().zO)(r)===(null==i?void 0:i.id);if(!o.isDefined())return!a;const s=o.getSchema();return n().rd({propertySchema:r,sourceCollectionId:null==i?void 0:i.id,property:t,targetCollectionSchema:s})}function S(e){const t=(0,p().WP)(e).find((e=>{let[t,o]=e;if(o&&(0,n().UU)(o))return o.connectedRelation.integration_id===i().ob}));if(t&&t[1]&&(0,n().UU)(t[1]))return t[1]}function w(e){return Boolean(S(e))}function k(e,t){if(!e)return!1;const o=e[t];return Boolean(o&&(0,n().UU)(o)&&o.connectedRelation.integration_id===i().ob)}function I(e,t){var o;if("relation"!==(null==t?void 0:t.type))return;const n=null===(o=f().A.state.caches[h().oB])||void 0===o?void 0:o.inMemoryRecordCache,r=null==t?void 0:t.collection_pointer,i=e.collectionViewBlockStore(),a=r&&i?v().md.createChildStore(i,r):void 0;return n?null==a?void 0:a.clone(n):a}function A(e){return g().vo({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1})}function x(e){const{inverseName:t,collectionStore:o,propertySchema:n,intl:r,targetCollectionStore:i,from:a}=e;return t||(o.isDefined()&&n?C(r,{sourceCollection:o.getModel(),isSelfRelation:o.id===i.id,targetCollectionStore:i,createUnique:!0,from:a}):"")}function C(e,t){var o;const{sourceCollection:n,isSelfRelation:i,targetCollectionStore:a,createUnique:l,from:u}=t,p=d().Bj6.fromCollection(n),g=e.formatMessage({id:"relationHelpers.autoInverseRelation.untitledDatabase",defaultMessage:"Untitled Database"}),f=null===(o=p.getRenderIcon({getRecordModel:d().b4_.constant(void 0)}))||void 0===o?void 0:o.icon,v=p.getRenderTitle({getRecordModel:a.getRecordModel,userTimeZone:(0,s().P)(),intl:e})||g,h=p.getDatabaseType();let _;if(i)if("subitem"===u){const t=(0,m().$O)(h,!0);_=e.formatMessage({defaultMessage:"Parent {item}",id:"relationHelpers.autoSelfRelationInverseToggle.typedName"},{item:t})}else _="timeline_arrows_by"===u?e.formatMessage({defaultMessage:"Blocked by",id:"relationHelpers.autoSelfRelationInverseArrow.name"},{sourceCollectionName:v}):e.formatMessage({defaultMessage:"Related back to {sourceCollectionName}",id:"relationHelpers.autoSelfRelationInverse.name"},{sourceCollectionName:v});else _=f&&(0,c().A)(f)?e.formatMessage({defaultMessage:"{sourceCollectionIcon} {sourceCollectionName}",id:"relationHelpers.autoInverseRelationWithIcon.name"},{sourceCollectionIcon:f,sourceCollectionName:v}):e.formatMessage({defaultMessage:"{sourceCollectionName}",id:"relationHelpers.autoInverseRelationSimple.name"},{sourceCollectionName:v});const b=a.getSchema();return b&&l?(0,r().A)(_,(e=>!Object.values(b).find((t=>Boolean(t&&t.name===e))))):_}function T(e,t){var o,n;const{targetCollectionStore:i,isSelfRelation:a,sourceSchema:l,createUnique:u,from:p}=t,g=null===(o=i.getModel())||void 0===o||null===(o=o.getRenderIcon({getRecordModel:d().b4_.constant(void 0)}))||void 0===o?void 0:o.icon,f=e.formatMessage({id:"relationHelpers.autoInverseRelation.untitledDatabase",defaultMessage:"Untitled Database"}),v=(null===(n=i.getModel())||void 0===n?void 0:n.getRenderTitle({getRecordModel:i.getRecordModel,userTimeZone:(0,s().P)(),intl:e}))||f,h=i.getDatabaseType();let _;if(a)if("subitem"===p){const t=(0,m().$O)(h,!0);_=e.formatMessage({defaultMessage:"Sub-{item}",id:"relationHelpers.autoSelfRelationNest.typedName"},{item:t})}else _="timeline_arrows_by"===p?e.formatMessage({defaultMessage:"Blocking",id:"relationHelpers.autoSelfRelationTimelineArrow.name"},{targetCollectionName:v}):e.formatMessage({defaultMessage:"Related {targetCollectionName}",id:"relationHelpers.autoSelfRelation.name"},{targetCollectionName:v});else _=g&&(0,c().A)(g)?e.formatMessage({defaultMessage:"{targetCollectionIcon} {targetCollectionName}",id:"relationHelpers.autoRelationWithIcon.name"},{targetCollectionIcon:g,targetCollectionName:v}):e.formatMessage({defaultMessage:"{targetCollectionName}",id:"relationHelpers.autoRelation.name"},{targetCollectionName:v});const b=Object.values(l);return u?(0,r().A)(_,(e=>!b.find((t=>Boolean(t&&t.name===e))))):_}function M(e){const t=(0,l().L)(e.getFormat(),e.getSchema(),void 0,a().jf.Relation);return t?t.collection_relation_options??{}:{}}function P(e){var t;const{collectionStore:o,property:n}=e;return(null===(t=M(o)[n])||void 0===t?void 0:t.related_properties)??[]}function B(e,t){return Object.entries(t).map((o=>{let[r,i]=o;if(!i||!(0,n().nC)(i))return;const a=(0,n().Nv)(i),s=e.collectionStore();if(!a||a.id!==(null==s?void 0:s.pointer.id)||!s||!y(e,r,s))return;const l=i.property;if(!l)return;const c=t[l];if(!c||"relation"!==c.type)return;const d=(0,n().Nv)(c);return d&&d.id===(null==s?void 0:s.pointer.id)?{propertyID:r,inversePropertyID:l}:void 0})).filter(p().O9)}function R(e,t){return B(e,t).map((e=>e.propertyID))}function E(e,t){const o=B(e,t),n=new Set,r=[];for(const{propertyID:i,inversePropertyID:a}of o)n.has(i)||n.has(a)||(r.push([i,a]),n.add(i),n.add(a));return r}function D(e,t){const o=(0,n().Nv)(e);if(!o)return;const r=v().md.createChildStore(t,o);return r?null==r?void 0:r.getFormat().app_config_uri:void 0}function N(e,t){const o=(0,n().Nv)(e);if(!o)return;const r=new(v().md)(t,o);return r?null==r?void 0:r.getSchema():void 0}function L(e,t){const o=(0,n().Nv)(e);if(!o)return;const r=new(v().md)(t,o);return r||void 0}function F(e){var t;if(e.patternName){if(e.integration.id===i().mn){const t=(0,u().fh)(e.patternName);if(new RegExp(t).test(e.url))return(0,u().WD)(e.patternName)}return null===(t=e.integration.info)||void 0===t||null===(t=t.original_url_patterns)||void 0===t?void 0:t.filter((t=>{var o;return t.name===e.patternName&&(null===(o=t.additional_types)||void 0===o?void 0:o.connectedRelation)})).find((t=>{let{regex:o}=t;return new RegExp(o).test(e.url)}))}}},686526:(e,t,o)=>{o.d(t,{os:()=>V,ut:()=>Q,GH:()=>Y,nl:()=>G,vr:()=>$,cJ:()=>Z,a2:()=>z,R8:()=>H,js:()=>j,eM:()=>O,Ho:()=>U,Ow:()=>F,yl:()=>W,dP:()=>q,n1:()=>K});o(16280),o(296540);var n=()=>o(908006),r=()=>o(584262),i=()=>o(416845),a=()=>o(763884),s=()=>o(959013),l=()=>o(763824),c=()=>o(284371),d=()=>o(720665),u=()=>o(837570),p=()=>o(423938),m=()=>o(414360),g=()=>o(467676),f=()=>o(180762),v=()=>o(780054),h=()=>o(476492),_=()=>o(10594),b=()=>o(492414),y=()=>o(972435),S=()=>o(907514),w=()=>o(666803),k=()=>o(208459),I=()=>o(436696),A=()=>o(989423);var x=()=>o(449506),C=()=>o(885110),T=()=>o(884107),M=()=>o(901389),P=()=>o(896628),B=()=>o(797265),R=()=>o(436572),E=()=>o(317909),D=()=>o(345913),N=o(474848);const L=(0,s().YK)({copySuccessMessage:{defaultMessage:"Link to view copied to clipboard",id:"database.viewSettings.copyLinkSnackBarItem.title"},chartDataTableName:{defaultMessage:"Data",id:"database.viewSettings.createView.charts.dataTable"}});function F(e){const{collectionContextStore:t,selectViewNameInitial:o,collectionSettingsStore:n,hideSettingsPopup:r,hideSettingsHeader:i,hideDuplicatePropertyOption:a,fromBlockStore:s,ref:l,initialStack:c,closeOnEscape:d=!0}=e;let u;t.viewsModuleContextStore.selectViewsModule(),u="collectionSettings"===t.contextType?{type:"databaseSettings"}:{type:"main",selectViewNameInitial:o},n.setState({open:!0,hideSettingsPopup:r,hideSettingsHeader:i,stack:c??[u],fromBlockStore:s,ref:l,hideDuplicatePropertyOption:a,closeOnEscape:d})}function U(e){const{collectionSettingsStore:t}=e;H({collectionSettingsStore:t,item:{type:"createSyncedViewSource"}})}function O(e){const{collectionSettingsStore:t,source:o}=e;H({collectionSettingsStore:t,item:{type:"externalProjectsSyncSettings",source:o}})}function V(e){const{collectionSettingsStore:t}=e;t.setState({...t.state,open:!1,hideSettingsPopup:void 0,hideSettingsHeader:void 0,stack:[],ref:void 0,hideDuplicatePropertyOption:void 0,closeOnEscape:void 0}),w().Ay.setState({...w().Ay.state,flowId:void 0})}function j(e){const{environment:t,collectionSettingsStore:o,collectionContextStore:n}=e,r=k().H(o);u().h({environment:t,mode:"create_automation",collectionSettingsStore:o,collectionContextStore:n,from:r})}function z(e){const{collectionSettingsStore:t,item:o,hideSettingsPopup:n}=e,r=t.state;t.setState({...r,open:!0,stack:[...r.stack,o],...void 0!==n?{hideSettingsPopup:n}:{}})}function q(e){const{collectionSettingsStore:t,item:o,ref:n}=e,r=t.state;t.setState({open:!0,stack:[...r.stack.slice(0,r.stack.length-1),o],closeOnEscape:r.closeOnEscape,...void 0!==n?{ref:n}:{}})}function H(e){const{collectionSettingsStore:t,item:o}=e;t.setState({open:!0,stack:[o]})}function W(e){const{collectionSettingsStore:t,keepPreviousRef:o}=e,n=t.state,r=n.stack.slice(0,n.stack.length-1);0===r.length?V({collectionSettingsStore:t}):t.setState({open:!0,stack:r,...void 0!==n.ref&&o?{ref:n.ref}:{}})}function K(e){const{collectionSettingsStore:t,property:o,formatKey:n,selectNameInitial:r}=e,i=t.state,a=i.stack.findIndex((e=>"property"===e.type));t.setState({open:!0,stack:[...a>=0?i.stack.slice(0,a):i.stack,{type:"property",property:o,formatKey:n,selectNameInitial:r}]})}function G(e){const{environment:t,collectionContextStore:o,collectionViewStore:n,collectionSettingsStore:r,additionalBlocksToDelete:i,from:a}=e,d=n.getType(),u="form_editor"===d,g=(0,l().yX)(),v=()=>{const e=o.collectionViewStore(),s=o.collectionViewBlockStore(),l=o.isFullScreenStore.state;e&&s&&d&&(E().createAndCommit({userAction:"collectionSettingsActions.handleDeleteCollectionView",environment:t,canUndo:!0,perform:c=>{if((0,m().T)({collectionViewBlockStore:s,collectionViewStore:n,transaction:c}),V({collectionSettingsStore:r}),e.id===n.id){const e=s.getCollectionViewStores()[0];if(e)(0,f().t)({environment:t,collectionContextStore:o,collectionViewId:e.id,isFullScreen:o.isFullScreenStore.state,isRootChild:o.isRootChildStore.state,isInPeekRenderer:o.isInPeekRendererStore.state});else{if(!o.isEditableHomeCollectionStore.state)throw new Error("Cannot delete last view. Delete database instead.");(0,p().Z)({environment:t,collectionContextStore:o,newViewType:"table",transaction:c,skipOpenSettings:o.isInHomeWidgetStore.state}),l||B().ZL({environment:t,blocks:[s],transaction:c})}}i&&D().oD({environment:t,blocks:i,transaction:c});const u=(0,h().sl)(o)||{};!function(e,t){A().vd(e,"delete_view",t)}(t,{from:a,...u,view_type:d})}}),g.resolve(!0))};return u?M().ui({showCancel:!0,keepFocus:!1,message:(0,N.jsx)("div",{style:{fontWeight:c().Wy.semibold,fontSize:18},children:(0,N.jsx)(s().sA,{id:"database.formEditSettings.deleteFormModal. essage",defaultMessage:"Permanently delete {viewName}?",values:{viewName:n.getName()}})}),description:(0,N.jsx)(s().sA,{defaultMessage:"Users will no longer be able to submit data through this form. Any data already submitted will remain unaffected",id:"database.formEditSettings.deleteFormModal.text"}),items:[{label:(0,N.jsx)(s().sA,{defaultMessage:"Delete form",id:"database.viewSettings.formDeleteButton.text"}),color:"red",onAccept:()=>{v()}}],innerStyle:{textAlign:"center"},handleCancel:()=>g.resolve(!1)}):void 0===o.collectionStore()?v():M().ui({showCancel:!0,keepFocus:!1,message:(0,N.jsx)(s().sA,{defaultMessage:"Are you sure you want to delete this view?",id:"database.viewSettings.mainTab.deleteViewConfirm.text"}),items:[{label:(0,N.jsx)(s().sA,{defaultMessage:"Delete view",id:"database.viewSettings.deleteButton.text"}),color:"red",onAccept:()=>{v()}}],handleCancel:()=>g.resolve(!1)}),g.promise}function $(e){const{environment:t,collectionContextStore:o,collectionViewStore:r,collectionSettingsStore:i,intl:a,from:s}=e,l=o.isFullScreenStore.state,c=o.isRootChildStore.state,d=o.isInPeekRendererStore.state,u=o.collectionViewBlockStore(),{performResult:p}=E().createAndCommit({userAction:"collectionSettingsActions.newView",environment:t,canUndo:!0,perform:e=>(0,g().t)({environment:t,collectionViewBlockStore:u,collectionViewStore:r,intl:a,transaction:e})});p&&("chart"===p.getType()&&C().Z({environment:t,collectionContextStore:o,collectionViewId:p.id,from:s}),(0,f().t)({environment:t,collectionContextStore:o,collectionViewId:p.id,isFullScreen:l,isRootChild:c,isInPeekRenderer:d}),n().default.afterNextFlush((()=>{F({collectionContextStore:o,collectionSettingsStore:i,selectViewNameInitial:!0})})))}async function Y(e){const{environment:t,collectionContextStore:o,collectionViewStore:n}=e,i=o.collectionViewBlockStore();if(!n||!i)return;const a=(0,b().Ay)({store:i,collectionViewId:n.id,fullyQualified:!0,pageVisitSource:r().y8.CopyLink,embedded:!1}),s=await T().R.clipboardActions.load();await s.copyString({environment:t,stringValue:a,copiedMessage:s.clipboardMessages.copiedLinkToClipboard}),R().D6({label:y().A.formatMessage(L.copySuccessMessage)})}function Q(e){const{environment:t,collectionContextStore:o}=e,n=o.normalizedFormatStore.state,r=n.board_columns_by,i=o.collectionViewStore();if(!r||!i)return;const a=!(0,_().FS)(n);E().createAndCommit({userAction:"collectionSettingsActions.handleBoardGroupColorColumnsClick",environment:t,canUndo:!0,perform:e=>{P().zA({stores:[i],update:{board_columns_by:{...r,disableBoardColorColumns:a}},transaction:e})}}),(0,I().X)({environment:t,collectionContextStore:o,action:"toggle_group_color_columns"})}async function Z(e){const{environment:t,uri:o,botId:n,collectionId:r,isStale:l,nextSync:c,setNextSync:u}=e;if(!c||Date.now()>c){var p;let e=Date.now()+d().pT;const c=await x().callApi({eventName:"resubscribeExternalCollection",environment:t,data:{botId:n,uri:o,isStale:l,collectionId:r}});if("failed"===c.type&&(0,i().G4)(c.body)&&"rate_limited"===(null===(p=c.body.clientData)||void 0===p?void 0:p.type)){const t=c.body.clientData.retryAfter;t&&(e=Date.now()+t*d().TD),R().D6({label:(0,N.jsx)(s().sA,{id:"database.viewSettings.syncedSourceTab.update.rateLimitError",defaultMessage:"This database was synced recently. You may try again in {time}.",values:{time:(0,S().OH)(Date.now(),e)}})})}if(v().A.isAdminMode)return;a().A.set({userId:t.currentUser.id,key:`${n}:${o}`,value:e}),u(e)}}},686594:(e,t,o)=>{o.d(t,{A:()=>a,K:()=>r});o(16280);var n=()=>o(165162);const r="group";class i extends(()=>o(757695))().default{constructor(){super(...arguments),this.environment=void 0}getInitialState(){return{currentUserId:void 0,currentSpaceId:void 0,ready:!0}}isInitialized(){return n().StatsigInitializer.isComplete}getStatsigClient(){if(!this.isInitialized())return;const e=n().statsigClientLoader.getClientSync();return e||void 0}isReadyWithUserAndSpaceId(){return!0}getGroup(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;const i=Date.now(),a=this.getStatsigClient();if(!a)return;let s;try{return s=t?a.getExperiment(e,{disableExposureLog:!0}):a.getExperiment(e),this.trackMetric("statsig_client_get_group_success",{experiment_id:e}),(0,o(715256).Gn)(s,n)}catch(l){this.trackMetric("statsig_client_get_group_error",{experiment_id:e}),this.logError("getGroup",l,{experimentId:e,expConfig:JSON.stringify(s)})}finally{this.trackMetric("statsig_client_get_group_duration",{time:Date.now()-i})}}manuallyLogExperimentExposure(e){const t=this.getStatsigClient();t&&t.getExperiment(e)}checkGate(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=Date.now(),n=this.getStatsigClient();if(!n)return!1;let r;try{return r=t?n.checkGate(e,{disableExposureLog:!0}):n.checkGate(e),this.trackMetric("statsig_client_check_gate_success",{gate_name:e}),r}catch(i){const t=i instanceof Error?i.message:void 0;return this.logError("checkGate",i,{gateName:e,...t&&{errorMessage:t}}),this.trackMetric("statsig_client_check_gate_error",{gate_name:e}),!1}finally{this.trackMetric("statsig_client_check_gate_duration",{time:Date.now()-o})}}getConfig(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=Date.now(),n=this.getStatsigClient();if(!n)return;let r;try{return r=t?n.getDynamicConfig(e):n.getDynamicConfig(e,{disableExposureLog:!0}),this.trackMetric("statsig_client_get_config_success",{config_name:e}),r}catch(i){const t=i instanceof Error?i.message:void 0;return this.logError("getConfig",i,{dynamicConfigName:e,...t&&{errorMessage:t}}),void this.trackMetric("statsig_client_get_config_error",{config_name:e})}finally{this.trackMetric("statsig_client_get_config_duration",{time:Date.now()-o})}}logEvent(e,t,o){const n=Date.now(),r=this.getStatsigClient();if(!r)return!1;try{return r.logEvent(e,t,o),this.trackMetric("statsig_client_log_event_success",{event_name:e}),!0}catch(i){const n=i instanceof Error?i.message:void 0;return this.logError("logEvent",i,{eventName:e,value:String(t),...o,...n&&{errorMessage:n}}),this.trackMetric("statsig_client_log_event_error",{event_name:e}),!1}finally{this.trackMetric("statsig_client_log_event_duration",{time:Date.now()-n})}}getLocalOverride(e){var t;const o=null===(t=this.getOverrideAdapter())||void 0===t||null===(t=t.getAllOverrides())||void 0===t?void 0:t.experiment[e];return null==o?void 0:o[r]}getAllLocalOverrides(){var e;return null===(e=this.getOverrideAdapter())||void 0===e?void 0:e.getAllOverrides()}updateLocalOverrideConfig(e,t){var o;null===(o=this.getOverrideAdapter())||void 0===o||o.overrideExperiment(e,{[r]:t})}updateLocalOverrideGate(e,t){var o;null===(o=this.getOverrideAdapter())||void 0===o||o.overrideGate(e,"true"===t)}getIsExperimentActive(e){var t;const o=this.getStatsigClient();return!!o&&!(null===(t=o.getExperiment(e).__evaluation)||void 0===t||!t.is_experiment_active)}removeAllLocalOverrides(){var e;null===(e=this.getOverrideAdapter())||void 0===e||e.removeAllOverrides()}getOverrideAdapter(){var e;const t=null===(e=this.getStatsigClient())||void 0===e?void 0:e.overrideAdapter;return t&&t.setPreSaveFunction((()=>{this.emit()})),t}logError(e,t,n){o(857639).log({level:"error",from:"statsig",type:e,error:(0,o(229833).n6)(t),data:{miscDataToConvertToString:{...n,...this.state}}})}trackMetric(e,t){this.environment&&e.endsWith("_error")&&o(989423).vd(this.environment,e,{...t,statsig_init_method:"classic"})}}const a=new i},687519:(e,t,o)=>{o.d(t,{A:()=>g});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(799954),s=()=>o(908521),l=()=>o(959013),c=()=>o(494043),d=()=>o(891078),u=o(474848);const p=(0,l().YK)({placeholder:{defaultMessage:"Heading 3",id:"subsubheaderBlock.placeholder"}});function m(e,t){const m=(0,l().tz)(),g=(0,r().v3)(),f=(0,r().Y0)(),v=(0,n.useRef)(null),h=(0,d().pW)(e.store,!0),_=(0,d().qu)(e.store),b=(0,i().K8)((()=>e.store.getBlockTitleStore()),[e.store]),y=(0,i().K8)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),S=(0,o(401497).IS)((t=>{const o=(f.isMobile||e.smallerHeaders?1.17:s().xq)*s().Df,n=f.isMobile||e.smallerHeaders?1.17:s().xq;return{root:{display:"flex",width:"100%",...h},toggle:{height:`${o}em`,marginTop:f.isMobile?1:a().nE.paddingTop,marginBottom:a().nE.paddingBottom},headerText:{...a().nE,...(0,s().aZ)({fontSizeValue:n,fontFamily:_})},headerTextPlaceholder:{...y?{color:t.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{WebkitTextFillColor:t.headerBlockPlaceholderTextColor}}}}),[f.isMobile,e.smallerHeaders,h,_,y]),w=(0,i().K8)((()=>c().PQ(e.store)),[e.store]),k=(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o(246722).A,{tagName:"h4",disabled:e.disabled,store:b,placeholder:m.formatMessage(p.placeholder),placeholderStyle:S.headerTextPlaceholder,style:S.headerText,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:o(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,u.jsx)(o(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]});return(0,d().NW)(e.store,t,(0,n.useMemo)((()=>({renderedType:"sub_sub_header",getNode:()=>v.current,getBlockStore:()=>e.store,activate(){c().qj(g,e.store,e.hideContent)}})),[g,e.hideContent,e.store]),(0,u.jsx)("div",{ref:v,style:{...S.root,...e.style},children:w?(0,u.jsx)(o(60676).A,{store:e.store,toggleStyle:S.toggle,childrenStyleWhenToggleable:{display:"flex"},hideContent:e.hideContent,disabled:e.disabled,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag,children:k}):k}))}const g=n.memo(n.forwardRef(m),o(821062).A)},687532:(e,t,o)=>{o.d(t,{P:()=>a});var n=()=>o(857639),r=()=>o(939768),i=()=>o(219187);async function a(e){var t;const o=null===(t=i().electronApi??i().electronCalendarApi??i().electronMailApi)||void 0===t?void 0:t.openExternalUrl;if(!o)return!1;const a=r().q7(e);return void 0===a?(n().log({level:"warning",from:"electronSharedActions",type:"badUrlInOpenExternalUrlDetected",data:{miscDataToConvertToString:{url:e}}}),!1):await o(a)}},688149:(e,t,o)=>{o.d(t,{A:()=>u});o(296540);var n=()=>o(56366),r=()=>o(857639),i=()=>o(229833),a=()=>o(763824),s=()=>o(227440);class l extends(()=>o(757695))().default{getInitialState(){return{loaded:!1}}}const c=l;var d=o(474848);const u=function(e){let{fetch:t,willRender:l,render:u,loading:p}=e;const m=(0,n().uB)(void 0,c),g=(0,n().O$)(m);(0,o(852507).l)((()=>{!async function(e,t){let o=1e3;for(;;)try{const o=await e();t.setState({loaded:!0,result:o});break}catch(n){r().log({level:"warning",from:"LazyLoader",type:"fetchError",error:(0,i().n6)(n),data:{miscDataToConvertToString:{waitMs:o}}}),await a().wR(o),await s().A.waitUntil((()=>s().A.state.online)),o=Math.min(2*o,3e4)}}(t,m)}));const f=(0,o(62856).A)(!g.loaded,300,0);return g.loaded?(l&&l(),u(g.result)):p?p(f):f?(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,d.jsx)(o(331542).A,{})}):null}},689025:(e,t,o)=>{o.d(t,{A:()=>r});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);class n extends(()=>o(757695))().default{getInitialState(){return{spacePermissionGroupIds:new Set,lastEmitData:{value:-1,spaceId:void 0,userId:void 0}}}shouldRefetch(e){let{currentUserId:t,currentSpaceId:o,emitValue:n}=e;const{spaceId:r,userId:i,value:a}=this.state.lastEmitData;return o!==r||(t!==i||n!==a)}}const r=new n},689094:(e,t,o)=>{o.d(t,{W:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("plus",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.977 14.963c.407 0 .747-.324.747-.723V8.72h5.362c.399 0 .74-.34.74-.747a.746.746 0 00-.74-.738H8.724V1.706c0-.398-.34-.722-.747-.722a.732.732 0 00-.739.722v5.529h-5.37a.746.746 0 00-.74.738c0 .407.341.747.74.747h5.37v5.52c0 .399.332.723.739.723z"})})},690197:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),r=()=>o(133033),i=()=>o(284371),a=o(474848);function s(e){let{title:t,href:s,analyticsFrom:l,shouldShrink:c,style:d,buttonStyle:u,iconStyle:p,isBlue:m,onClick:g,onFocus:f,onBlur:v,onMouseDown:h,onMouseEnter:_,onMouseLeave:b,textSize:y,isMobile:S}=e;const w=(0,o(484714).v3)(),k={onFocus:f,onBlur:v,onMouseDown:h,onMouseEnter:_,onMouseLeave:b},I=(0,n.useCallback)((()=>{void 0!==g&&g(),o(148024).FH(w,{from:l})}),[l,w,g]),A=S?"small"!==y?i().J.UIRegular.mobile:i().J.UISmall.mobile:"small"!==y?i().J.UIRegular.desktop:i().J.UISmall.desktop;let x="1.2";void 0!==y&&(x=S?"small"!==y?i().K_.UIRegular.mobile:i().K_.UISmall.mobile:"small"!==y?i().K_.UIRegular.desktop:i().K_.UISmall.desktop);const C=(0,o(401497).IS)((()=>({link:{display:"flex",marginLeft:-6,...d}})),[d]);return(0,a.jsx)(o(187485).A,{style:C.link,className:"notion-print-ignore",href:s,external:!0,onClick:I,...k,children:t?(0,a.jsx)(o(493823).p,{icon:r().$,iconStyle:p,size:"sm",isBlue:m,isLightGray:!m,shouldShrink:c,style:{...u,fontSize:A,lineHeight:x},children:t}):(0,a.jsx)(o(285790).A,{icon:r().$,iconStyle:p,isBlue:m,style:u,...k})})}const l=n.memo(s)},690471:(e,t,o)=>{o.d(t,{BD:()=>ke,C1:()=>L,DG:()=>Z,DY:()=>K,E6:()=>C,EZ:()=>w,GM:()=>U,GW:()=>be,HV:()=>he,Ho:()=>ee,IW:()=>te,Kx:()=>ne,LH:()=>F,MB:()=>x,MR:()=>me,NB:()=>G,Od:()=>J,UA:()=>j,VC:()=>E,Vz:()=>$,XK:()=>T,Zk:()=>_e,_D:()=>re,_r:()=>W,cC:()=>I,eM:()=>P,g_:()=>A,iH:()=>pe,iw:()=>X,jI:()=>ve,ji:()=>ie,lH:()=>fe,nS:()=>le,o$:()=>z,o8:()=>D,oJ:()=>Y,s0:()=>ye,tH:()=>R,tX:()=>ae,tp:()=>ge,u7:()=>oe,u9:()=>O,uW:()=>q,w0:()=>N,w7:()=>k,yG:()=>de,yl:()=>V,zZ:()=>ce,zb:()=>H,zj:()=>se});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(908872);var n=()=>o(244641),r=()=>o(662303),i=()=>o(757695),a=()=>o(787626),s=()=>o(410486),l=()=>o(970013),c=()=>o(713998),d=()=>o(597777),u=()=>o(869190),p=()=>o(604995),m=()=>o(651124),g=()=>o(416504),f=()=>o(763884),v=()=>o(534177),h=()=>o(909470),_=()=>o(405417),b=()=>o(661179),y=()=>o(508496),S=()=>o(472090);const w=5,k=3,I=2,A=21;let x=function(e){return e[e.LeftResizer=0]="LeftResizer",e[e.RightResizer=1]="RightResizer",e[e.ItemDrag=2]="ItemDrag",e}({});const C=4e3,T=C/4,M=864e5,P={hours:{snapUnit:"fifteen_minutes",primaryDisplayUnit:"fifteen_minutes",secondaryDisplayUnit:"day",activeRangeType:void 0,msPerPixel:M/7e3,primaryDisplayUnitAlignment:"range_start",verticalDividerUnit:"fifteen_minutes",showWeekendIndicators:!1,hidePrimaryIndicatorIntersectionOffset:9,getDateRangePlaceholderDuration:e=>e.plus({hour:1})},day:{snapUnit:"fifteen_minutes",primaryDisplayUnit:"hour",secondaryDisplayUnit:"day",activeRangeType:void 0,msPerPixel:69120,primaryDisplayUnitAlignment:"range_start",verticalDividerUnit:"hour",showWeekendIndicators:!1,hidePrimaryIndicatorIntersectionOffset:2,getDateRangePlaceholderDuration:e=>e.plus({hour:3})},week:{snapUnit:"day",primaryDisplayUnit:"day",secondaryDisplayUnit:"month",activeRangeType:"highlight_days",msPerPixel:48e4,primaryDisplayUnitAlignment:"range_middle",verticalDividerUnit:"day",showWeekendIndicators:!0,hidePrimaryIndicatorIntersectionOffset:void 0,getDateRangePlaceholderDuration:e=>e.plus({day:1})},bi_week:{snapUnit:"day",primaryDisplayUnit:"day",secondaryDisplayUnit:"month",activeRangeType:"highlight_days",msPerPixel:108e4,primaryDisplayUnitAlignment:"range_middle",verticalDividerUnit:void 0,showWeekendIndicators:!0,hidePrimaryIndicatorIntersectionOffset:void 0,getDateRangePlaceholderDuration:e=>e.plus({day:3})},month:{snapUnit:"day",primaryDisplayUnit:"day",secondaryDisplayUnit:"month",activeRangeType:"highlight_days",msPerPixel:216e4,primaryDisplayUnitAlignment:"range_middle",verticalDividerUnit:void 0,showWeekendIndicators:!0,hidePrimaryIndicatorIntersectionOffset:void 0,getDateRangePlaceholderDuration:e=>e.plus({day:5})},quarter:{snapUnit:"day",primaryDisplayUnit:"week",secondaryDisplayUnit:"month",activeRangeType:"display_range",msPerPixel:72e5,primaryDisplayUnitAlignment:"range_start",verticalDividerUnit:"month",showWeekendIndicators:!1,hidePrimaryIndicatorIntersectionOffset:35,getDateRangePlaceholderDuration:e=>e.plus({week:2})},year:{snapUnit:"day",primaryDisplayUnit:"week",secondaryDisplayUnit:"month",activeRangeType:"display_range",msPerPixel:1728e4,primaryDisplayUnitAlignment:"range_start",verticalDividerUnit:"month",showWeekendIndicators:!1,hidePrimaryIndicatorIntersectionOffset:6,getDateRangePlaceholderDuration:e=>e.plus({week:4})},"5_years":{snapUnit:"day",primaryDisplayUnit:"month",secondaryDisplayUnit:"year",activeRangeType:"display_range",msPerPixel:864e5,primaryDisplayUnitAlignment:"range_start",verticalDividerUnit:"month",showWeekendIndicators:!1,hidePrimaryIndicatorIntersectionOffset:6,getDateRangePlaceholderDuration:e=>e.plus({week:20})}},B="month";function R(e){var t;return null===(t=E(e))||void 0===t?void 0:t.property}function E(e){const t=e.normalizedFormatStore.state.timeline_arrows_by;if(null==t||!t.property)return;const o=e.normalizedSchemaStore.state[t.property],n=e.collectionStore();return o&&"relation"===o.type&&o.property&&n&&(0,l().zO)(o)===n.id?{property:t.property,inverse:o.property}:void 0}function D(e){return{zoomLevelStore:i().default.createValue(B,{name:"zoomLevel"}),currentRangeStore:i().default.createValue({startTimestamp:0,endTimestamp:0},{name:"currentRange"}),dragStateStore:i().default.createValue(void 0,{name:"dragState"}),drawStateStore:i().default.createValue(void 0,{name:"drawState"}),hoveredItemStore:i().default.createValue(void 0,{name:"hoveredItem"}),dateRangePlaceholderStore:i().default.createValue({active:!1},{name:"dateRangePlaceholder"}),scrollLeftStore:i().default.createValue(void 0,{name:"scrollLeft"}),outerSizeObserver:new(S().E),timelineSizeObserver:new(S().E),horizontalScroller:void 0,savePreference:void 0,isFullScreen:e.isFullScreen,isRootChild:e.isRootChild,destroyed:!1}}function N(e,t){return t/P[e].msPerPixel}function L(e,t){return t*P[e].msPerPixel}function F(e){return"fifteen_minutes"===e||"hour"===e}function U(e){const{store:t,query:o,schema:n,userId:r,intl:i,formulasModule:a}=e,c=t.getModel();if(!c)return;const d=t.getAssociatedCollectionStore(),{timeline_by:u,timeline_by_end:m}=o;if(!u)return;const f=n[u];if(!f||!(0,l().$L)(f))return;const v=new Map,_=new Map,b=(0,s().d2)({property:u,schema:n,block:c,getRecordModel:t.getRecordModel,propertyMapping:null==d?void 0:d.getPropertyMapping(),collectionRequestContext:{userId:r,userTimeZone:(0,g().P)(),depth:0,intl:i,visitedProperties:new Set,resultCache:v,regExpCache:_,experimentService:y().default,collectionFeatureGates:(0,h().i)()},formulasModule:a}).next().value;if("date"!==(null==b?void 0:b.type))return;const S=b.value;if(!m||u===m)return S;{const e=n[m];if(!e||!(0,l().$L)(e))return;const o=(0,s().d2)({property:m,schema:n,block:c,getRecordModel:t.getRecordModel,propertyMapping:null==d?void 0:d.getPropertyMapping(),collectionRequestContext:{userId:r,userTimeZone:(0,g().P)(),depth:0,intl:i,visitedProperties:new Set,resultCache:v,regExpCache:_,experimentService:y().default,collectionFeatureGates:(0,h().i)()},formulasModule:a}).next().value;if(o&&"date"===o.type){const e=o.value,t=p().jY(S,e);if(t)return p().rL(t)}}}function O(e){const{store:t,dateValue:o,query:n}=e,{timeline_by:r,timeline_by_end:i}=n;if(!r)return;const s=t.getAssociatedCollectionStore(),u=(null==s?void 0:s.getSchema())??e.schema,p=(null==s?void 0:s.getMappedProperty(r))??r,m=i?(null==s?void 0:s.getMappedProperty(i))??i:void 0,g=u[p];if(g&&(0,l().$L)(g)){if(!m||p===m)return{[p]:(0,c().m5)(o)};{const e=u[p];if(!e||!(0,l().$L)(e))return;const n=(0,a().b)(t.getPropertyValue(p)),r=(0,a().b)(t.getPropertyValue(m));if("date"===o.type)return{[p]:(0,c().m5)({type:"date",start_date:o.start_date,reminder:d().vv(n)}),[m]:(0,c().m5)({type:"date",start_date:o.start_date,reminder:d().vv(r)})};if("daterange"===o.type)return{[p]:(0,c().m5)({type:"date",start_date:o.start_date,reminder:d().vv(n)}),[m]:(0,c().m5)({type:"date",start_date:o.end_date,reminder:d().vv(r)})};if("datetime"===o.type)return{[p]:(0,c().m5)({type:"datetime",start_date:o.start_date,start_time:o.start_time,time_zone:o.time_zone,reminder:d().ED(n)}),[m]:(0,c().m5)({type:"datetime",start_date:o.start_date,start_time:o.start_time,time_zone:o.time_zone,reminder:d().ED(r)})};if("datetimerange"===o.type)return{[p]:(0,c().m5)({type:"datetime",start_date:o.start_date,start_time:o.start_time,time_zone:o.time_zone,reminder:d().ED(n)}),[m]:(0,c().m5)({type:"datetime",start_date:o.end_date,start_time:o.end_time,time_zone:o.time_zone,reminder:d().ED(r)})};(0,v().HB)(o)}}}function V(e,t){const o=F(t),n=p().AA(o?e:d().qL(e),(0,g().P)()),r=K(n.start,t),i=o&&"date"===e.type?n.start.plus({days:1}).startOf("day"):n.end||r;return{start:r,end:o?K(i,t):$(i,t)}}function j(e){return`timeline:${e}`}function z(e){const{horizontalScroller:t,outerSizeObserver:o}=e,n=e.zoomLevelStore.state,{startTimestamp:r}=e.currentRangeStore.state;return r+L(n,(t?t.scrollLeft:0)+o.rect.state.width/2)}function q(e){const{environment:t,timestamp:o,timelineState:n,paddingLeft:r,format:i}=e;return o-L(n.zoomLevelStore.state,ee({environment:t,paddingLeft:r,format:i,isFullScreen:n.isFullScreen,isRootChild:n.isRootChild})/2)}function H(e){const{environment:t,timestamp:o,timelineState:n,paddingLeft:r,format:i}=e;return o-L(n.zoomLevelStore.state,ee({environment:t,paddingLeft:r,format:i,isFullScreen:n.isFullScreen,isRootChild:n.isRootChild})-n.outerSizeObserver.rect.state.width/2)}function W(e){const{timestamp:t,timelineState:o}=e;return t+L(o.zoomLevelStore.state,-o.outerSizeObserver.rect.state.width/2)}function K(e,t){if("fifteen_minutes"===t){const t=15*Math.floor(e.minute/15);return e.set({minute:t}).startOf("minute")}return e.startOf(t)}function G(e,t){if("fifteen_minutes"===t){const t=15*Math.floor(e.minute/15)-15;return e.set({minute:t}).startOf("minute")}return e.startOf(t).minus({[t]:1}).startOf(t)}function $(e,t){if("fifteen_minutes"===t){const t=15*Math.floor(e.minute/15)+15;return e.set({minute:t}).startOf("minute")}return e.plus({[t]:1}).startOf(t)}function Y(e){const{startValue:t,snapUnit:o,desiredStart:n,desiredEnd:r}=e;let i=t;const a=d().O(t)||(0,g().P)();if(n){const e=Q(n,o,"start",a);if("datetime"===e.type)if("date"===i.type){const e={type:"daterange",start_date:i.start_date,end_date:i.start_date};i=p().d9(e,(0,g().P)())}else"daterange"===i.type&&(i=p().d9(i,(0,g().P)()));"date"===i.type?i={...i,type:"daterange",start_date:e.start_date,end_date:i.start_date}:"daterange"===i.type?i={...i,type:"daterange",start_date:e.start_date,end_date:i.end_date}:"datetime"===i.type?i={...i,type:"datetimerange",start_date:e.start_date,start_time:"datetime"===e.type?e.start_time:i.start_time,end_date:i.start_date,end_time:i.start_time}:"datetimerange"===i.type&&(i={...i,type:"datetimerange",start_date:e.start_date,start_time:"datetime"===e.type?e.start_time:i.start_time})}if(r){const e=Q(r,o,"end",a);if("datetime"===e.type)if("date"===i.type){const e={type:"daterange",start_date:i.start_date,end_date:i.start_date};i=p().d9(e,(0,g().P)())}else"daterange"===i.type&&(i=p().d9(i,(0,g().P)()));"date"===i.type||"daterange"===i.type?i={...i,type:"daterange",end_date:e.start_date}:"datetime"!==i.type&&"datetimerange"!==i.type||(i={...i,type:"datetimerange",end_date:e.start_date,end_time:"datetime"===e.type?e.start_time:"datetimerange"===i.type?i.end_time:i.start_time})}return d().b7(i)}function Q(e,t,o,n){const r=G(e,t),i=K(e,t),a=$(e,t),s=F(t);let l;return l="start"===o?e.valueOf()>=i.valueOf()+(i.valueOf()-r.valueOf())/2?a:i:e.valueOf()>=i.valueOf()+(i.valueOf()-r.valueOf())/2?s?a:i:s?i:r,function(e,t,o){return F(t)?p().KQ(e.valueOf(),o):p().p6(e.valueOf(),o)}(l,t,n)}function Z(e){const{environment:t,isFullScreen:o,isRootChild:n}=e;return(t.device.isDesktop||t.device.isTablet)&&(o||n)}function X(e){const{environment:t,format:o,isFullScreen:n,isRootChild:r}=e;return Z({environment:t,isFullScreen:n,isRootChild:r})&&Boolean(o.timeline_show_table)}function J(e){const{isFullScreen:t,isRootChild:o}=e;return!t&&o&&X(e)}function ee(e){const{environment:t,paddingLeft:o,format:n,isFullScreen:r,isRootChild:i}=e;if(!X({environment:t,format:n,isFullScreen:r,isRootChild:i}))return 0;return o+(n.timeline_table_properties||[]).reduce(((e,t)=>(t.width&&t.visible?t.width:0)+e),0)}function te(){const e=n().c9.now().setLocale(r().locale);return e.toLocaleString(n().c9.TIME_SIMPLE)===e.toLocaleString(n().c9.TIME_24_SIMPLE)}function oe(e,t,o){return"day"===o?(0,u().W_)(t,"month_day_long",e):"month"===o?(0,u().W_)(t,"month_long",e):"year"===o?(0,u().W_)(t,"year",e):void(0,v().HB)(o)}function ne(e,t){return"day"===t?(0,u().W_)(e,"long",r().locale):"month"===t?(0,u().W_)(e,"month_year_long",r().locale):"year"===t?(0,u().W_)(e,"year",r().locale):void(0,v().HB)(t)}function re(e,t){const o=p().AA(e,d().O(e)||(0,g().P)(),r().locale),{primaryDisplayUnit:n}=P[t],i="fifteen_minutes"===n||"hour"===n?"month_day_time":"month_day";return(0,u().W_)(o.start.valueOf(),i,r().locale)}function ie(e,t){const o=p().AA(e,d().O(e)||(0,g().P)(),r().locale),{primaryDisplayUnit:n}=P[t],i=(o.end||o.start).valueOf(),a="fifteen_minutes"===n||"hour"===n?"month_day_time":"month_day";return(0,u().W_)(i,a,r().locale)}function ae(e,t){const o=p().AA(e,d().O(e)||(0,g().P)(),r().locale),{primaryDisplayUnit:n}=P[t],i="fifteen_minutes"===n||"hour"===n?"medium_with_time":"medium",a=(0,u().W_)(o.start.valueOf(),i,r().locale);return o.end?`${a} → ${(0,u().W_)(o.end.valueOf(),i,r().locale)}`:a}function se(e,t){return K(e,t)<e?$(e,t):e}function le(e){return b().A.state>0||e.device.isFirefox||e.device.isPhone}function ce(e){return!(e.device.isFirefox||e.device.isMobile)}function de(e,t){const o=t.currentUser.id,n=e.getFormat().timeline_preference,r=j(e.id),i=f().A.get({userId:o,key:r}),a={zoomLevel:B,centerTimestamp:Date.now()};return{zoomLevel:(ue(i)||ue(n)||a).zoomLevel,centerTimestamp:(ue(i)||a).centerTimestamp}}function ue(e){if(e&&"number"==typeof e.centerTimestamp&&m().Ui.includes(e.zoomLevel))return e}function pe(e,t){let o=e.timeline_table_properties||[];if(t){o.find((e=>{let{visible:t}=e;return Boolean(t)}))||(o=(0,m().Cn)(o,"title",!0))}return{timeline_show_table:t,timeline_table_properties:o}}const me=32,ge=32,fe=4,ve=me+ge+fe,he=96;function _e(e){return e?me:ve}function be(e,t,o){if(!t)return[];const n=R(e);if(!n)return[];const r=t.getPropertyValue(n),i=o[n];return r&&i&&"relation"===i.type?(0,c().bG)({relationValue:(0,c().n)(r),propertySchema:i,getRecordModel:t.getRecordModel,includeDeleted:y().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:y().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:y().default.checkGate({gateName:"relations_show_no_access"})}):[]}function ye(e,t,o){var n;if(!t)return[];const r=null===(n=(0,_().r6)(e))||void 0===n?void 0:n.property;if(!r)return[];const i=t.getPropertyValue(r),a=o[r];return i&&a&&"relation"===a.type?(0,c().bG)({relationValue:(0,c().n)(i),propertySchema:a,getRecordModel:t.getRecordModel,includeDeleted:y().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:y().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:y().default.checkGate({gateName:"relations_show_no_access"})}):[]}const Se=2,we=40;function ke(e){const{timelineState:t,placeholderDate:o,subitemPlaceholderDate:n}=e,r=n??e.dateValue;if(!r)return;const i=t.zoomLevelStore.state,{snapUnit:a}=P[i],{startTimestamp:s,endTimestamp:l}=t.currentRangeStore.state,{start:c,end:d}=V(r,a),u=d.valueOf()>s&&c.valueOf()<l,p=N(i,c.valueOf()-s)+Se,m=n?Math.max(p+we,0):Math.max(p,0),g=N(i,d.valueOf()-s)-Se,f=N(i,l-s),v=Math.min(g,f),h=v/N(i,l-s);return{visible:u,isPlaceholder:Boolean(o),isExistingSubitemPlaceholder:Boolean(n),left:m,right:v,maskPercent:h}}},690495:(e,t,o)=>{o.d(t,{lU:()=>i,mG:()=>r});function n(e,t,n){return o(244641).c9.utc(e,t,n).toMillis()}const r=n(1970,1,1),i=(n(2038,1,17),{...{omnimodal:{placement:"Modal",platforms:["desktop"],dismissal_type:"custom"},mwn_feature_modal:{placement:"Modal",platforms:["desktop"],start:n(2024,10,14),end:n(2024,12,9),show_on_startup:!0,dismissal_type:"custom"},ai_jira_universal_qna_announcement:{placement:"Modal",platforms:["desktop"],start:n(2025,1,28),end:n(2025,5,28),show_on_startup:!0,dismissal_type:"once_per_space"},ai_google_drive_universal_qna_announcement:{placement:"Modal",platforms:["desktop"],start:n(2024,8,14),end:n(2024,11,14),dismissal_type:"once_per_space",show_on_startup:!0},ai_github_ai_connector_announcement:{placement:"Modal",platforms:["desktop"],start:n(2024,11,11),end:n(2025,2,11),show_on_startup:!0,dismissal_type:"once_per_space"},ai_assistant_announcement:{placement:"Modal",platforms:["desktop"],start:n(2024,9,5),end:n(2025,11,5),show_on_startup:!0,dismissal_type:"once_per_user"},dummy_modal:{placement:"Modal",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},dummy_modal_2:{placement:"Modal",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},notion_calendar_launch_promo:{placement:"Modal",platforms:["desktop"],start:n(2024,2,1),end:n(2025,6,15),show_on_startup:!0,dismissal_type:"once_per_user"},organization_onboarding_modal:{placement:"Modal",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_space"}},...{integration_webhooks:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},desktop_download_sidebar:{placement:"SidebarFooter",platforms:["desktop"],end:n(2024,10,23),show_on_startup:!0,dismissal_type:"once_per_user"},import_data_prompt:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},configure_retention_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},student_org_prompt:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},onboarding_reverse_trial_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},block_limit_nudge:{placement:"SidebarFooter",platforms:["desktop"],dismissal_type:"custom",show_on_startup:!0},post_reverse_trial_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},lic_offer_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},new_year_2025_offer_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},resurrection_offer_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_limit_nudge:{placement:"SidebarFooter",platforms:["desktop"],dismissal_type:"custom",show_on_startup:!0},sidebar_upgrade_nudge:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},startup_sidebar_footer:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},calendar_launch_prompt:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},contact_sales_promo_sidebar_v2:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},faces_xsell_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},student_offer_jan_2025_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},jira_ai_sidebar_reminder:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_space"}},open_in_calendar_tooltip:{placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},ai_google_drive_qna_notification_tooltip:{placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_slack_qna_notification_tooltip:{placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_sales_assisted_notification_tooltip:{placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_assistant_origin_element_tooltip:{placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_assistant_reminder_tooltip:{placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_slack_qna_embed_tooltip:{placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},language_switch_prompt:{placement:"Tooltip",platforms:["desktop"],dismissal_type:"custom",show_on_startup:!0},asana_post_import_tour:{placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},forms_share_form_tooltip:{placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},forms_add_conditional_logic_tooltip:{placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},customize_slug_tooltip:{placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},collection_add_item_button_tooltip:{placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},workflow_template_installation:{placement:"Tooltip",platforms:["desktop"],dismissal_type:"custom"}})},691648:(e,t,o)=>{o.d(t,{h:()=>r,p:()=>i});var n=()=>o(645873);const r=new(n().O2)("imageEdit",(()=>o.e(81074).then(o.bind(o,667008)))),i=(0,n()._h)(r,(e=>e.ImageEditModal))},691678:(e,t,o)=>{o.d(t,{KO:()=>c,_V:()=>d,Pe:()=>u});o(898992),o(354520),o(581454);var n=()=>o(534177),r=()=>o(144081);const i={cover:!0,titleWithIcon:!0,inlinePageSections:!0,expandedBacklinks:!0,discussions:!0,bottomControls:!0,editor:!0,transcript:!0,properties:!0,formTitle:!0,formSubmit:!0,formQuestion:!0,placeholder:!0,property:!0,views:!0,viewsMain:!0,relationsGroup:!0,collectionView:!1,collectionViewV2:!1};function a(e){return i[e.type]}var s=()=>o(120997),l=()=>o(862387);function c(e,t){const o={page_main:[],page_details:[],form_layout_schema:[]};return(0,l().eE)(e,((e,n)=>{if("views_main_tab_modules"===n.area)o.views_main_tab_modules||(o.views_main_tab_modules={}),o.views_main_tab_modules[n.viewId]=e.filter(t);else if("form_conditional_modules"===n.area){const n=e.filter(t).filter((e=>"formQuestion"===e.type||"placeholder"===e.type));for(const e of n)o.form_conditional_modules||(o.form_conditional_modules={}),o.form_conditional_modules[e.id]=e}else o[n.area]=e.filter(t)})),o}function d(e){const t={page_main:[],page_details:[],form_layout_schema:[]};for(const o of r().E4)if("views_main_tab_modules"===o){if(!e.views_main_tab_modules)continue;for(const o of Object.keys(e.views_main_tab_modules)){if(!(0,n().zR)(o,"view_tab_"))continue;const r=e.views_main_tab_modules[o];r&&(t.views_main_tab_modules||(t.views_main_tab_modules={}),t.views_main_tab_modules[o]=r.filter((e=>void 0!==e)))}}else if("form_conditional_modules"===o){if(!e.form_conditional_modules)continue;const o=Object.values(e.form_conditional_modules).filter((e=>void 0!==e&&(0,s().p)(e,"form_conditional_modules")));t.form_conditional_modules=Object.assign({},...o.map((e=>({[e.id]:e}))))}else{const n=e[o];t[o]=n.filter((e=>null!=e))}return t}function u(e){return function(e,t){const o={page_layout_schema:void 0,page_info_layout_schema:void 0,form_layout_schema:void 0};return(0,l().Ub)(e,((e,n)=>{if("views_main_tab_modules"===n.area)o.views_main_tab_modules||(o.views_main_tab_modules={}),o.views_main_tab_modules[n.viewId]=e.filter(t);else if("form_conditional_modules"===n.area){const n=e.filter(t).filter((e=>(0,s().V)(e,"form_conditional_modules")));for(const e of n)o.form_conditional_modules||(o.form_conditional_modules={}),o.form_conditional_modules[e.id]=e}else o[n.area]=e.filter(t)})),o}(e,a)}},694498:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{}}}const r=new n},695625:(e,t,o)=>{o.d(t,{T:()=>a});o(898992),o(354520),o(672577),o(581454);var n=()=>o(496603),r=()=>o(502438);class i extends(()=>o(959180))().A{getMembersByDOMOrder(e){let{filter:t}=e;return super.getMembersByDOMOrder({filter:e=>!e.props.isHoverMenu&&t(e)})}findSelectableFromStore(e){return this.find((t=>t.props.store===e))}findScrollToSelectableFromStore(e){return this.find((t=>t.props.store===e&&t.props.canSelect&&!t.props.disableScrollToReveal&&t.getContextSelectableContainer()===r().default.getCurrentDefaultContainer()))}findScrollToSelectablesFromIds(e){return this.filter((t=>e.includes(t.props.store.id)&&t.props.canSelect&&!t.props.disableScrollToReveal&&t.getContextSelectableContainer()===r().default.getCurrentDefaultContainer()))}findSelectablesFromStore(e){return this.filter((t=>t.props.store===e))}findNodeFromStore(e){const t=this.findSelectableFromStore(e);if(t)return t.getNode()}getRectFromStore(e){const t=this.findNodeFromStore(e);if(t&&t instanceof Element)return t.getBoundingClientRect()}findEditableStoreWithin(e){const t=this.findSelectableFromStore(e);if(t){const e=o(301421).n.findEditableWithinSelectable(t);if(e)return e.props.store}}findSelectablesFromIds(e){const t=r().default.getCurrentDefaultContainer(),o=this.getMembersByDOMOrder({filter:()=>!0});return n().oE(e.map((e=>o.find((o=>{const n=o.props.store,r=o.getContextSelectableContainer();return Boolean(n&&n.id===e&&r===t)})))))}findAllSelectablesFromIds(e){const t=r().default.getCurrentDefaultContainer(),o=this.getMembersByDOMOrder({filter:()=>!0});return n().Bq(e.map((e=>o.filter((o=>{const n=o.props.store,r=o.getContextSelectableContainer();return Boolean(n&&n.id===e&&r===t)})))))}findNodeFromBlockId(e){var t;const o=this.findSelectablesFromIds([e]);return null==o||null===(t=o[0])||void 0===t?void 0:t.getNode()}findSelectableFromChildNode(e){const t=this.getMembersByDOMOrder({filter:t=>{var o;return null===(o=t.getNode())||void 0===o?void 0:o.contains(e)}});return t[t.length-1]}findClosestVisibleParent(e){let t=e.getParentBlockStore();for(;t;){const e=t.getParentBlockStore();if(!e)return{};const o=this.findNodeFromBlockId(t.id);if(o)return{node:o,blockStore:t};t=e}return{}}}const a=new i;(0,o(604341).exposeDebugValue)("GlobalSelectableRegistry",a)},695631:(e,t,o)=>{o.d(t,{h:()=>i,l:()=>a});o(16280),o(944114);var n=()=>o(534177),r=()=>o(358547);const i={applyMutable:function(e,t){const r=(0,o(708830).Qe)(e.children,(e=>e===t.target));if(void 0===r)return!1;if(0===r.length)throw new Error("findPathInTree: empty path");const i=1===r.length?e.children:r[r.length-2].children,a=i.indexOf(t.target);if(-1===a)throw new Error("findPathInTree: cannot find node");switch(t.operation){case"indentSelf":return function(e,t){if(0===t)return!1;const o=e[t],n=e[t-1];return e.splice(t,1),n.children.push(o,...o.children),o.children=[],!0}(i,a);case"indentSelfAndSubtree":return function(e,t){if(0===t)return!1;const o=e[t],n=e[t-1];return e.splice(t,1),n.children.push(o),!0}(i,a);case"unindentSelf":{if(1===r.length)return!1;const t=2===r.length?e.children:r[r.length-3].children,o=r[r.length-2],n=t.indexOf(o);if(-1===n)throw new Error("findPathInTree: cannot find node");return function(e,t,o){const n=e[t],r=n.children[o];return n.children.splice(o,1),e.splice(t+1,0,r),!0}(t,n,a)}case"unindentSelfAndUpdateSiblings":{if(1===r.length)return!1;const t=2===r.length?e.children:r[r.length-3].children,o=r[r.length-2],n=t.indexOf(o);if(-1===n)throw new Error("findPathInTree: cannot find node");return function(e,t,o){const n=e[t],r=n.children[o],i=n.children.splice(o+1,n.children.length-o-1);return r.children.push(...i),n.children.splice(o,1),e.splice(t+1,0,r),!0}(t,n,a)}default:(0,n().HB)(t.operation)}}};const a={getIndentOperationsFromTreeRange:(e,t)=>"indent"===t?function(e){const t=[];for(const o of(0,r().Lu)(e))t.push({operation:"indentSelf",target:o});return t}(e):"indentSelfAndSubtree"===t?function(e){const t=[];for(const o of(0,r().Lu)(e))t.push({operation:"indentSelfAndSubtree",target:o});return t}(e):"unindent"===t?function(e){const t=[];for(const o of(0,r().Lu)(e))t.push({operation:"unindentSelfAndUpdateSiblings",target:o});return t.reverse()}(e):"unindentSelf"===t?function(e){const t=[];for(const o of(0,r().Lu)(e))t.push({operation:"unindentSelf",target:o});return t.reverse()}(e):void(0,n().HB)(t)}},695905:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isConnected:!1,numConnectionAttempts:1}}}const r=new n},696152:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(959180))().A{}const r=new n},696575:(e,t,o)=>{o.d(t,{X:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zm14 2.625H8.292v2.25h8.083zm0 3.5H8.292v2.25H15.5a.875.875 0 0 0 .875-.875zm0-4.75V6.25a.875.875 0 0 0-.875-.875H8.292v2.25z"})},r=(0,o(340498).wt)("tableHeaderColumn",n)},696746:(e,t,o)=>{o.d(t,{IA:()=>m,NY:()=>h,Nh:()=>g,XH:()=>_,hI:()=>y,lU:()=>f,m6:()=>b,x$:()=>v});o(898992),o(672577);var n=()=>o(868840),r=()=>o(179034),i=()=>o(519831),a=()=>o(869558),s=()=>o(496603),l=()=>o(534177),c=()=>o(351360),d=()=>o(630116);const u=(0,s().Bj)(((e,t)=>o(90634).hj({userId:e,spaceId:t})),(function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return JSON.stringify(t)})),p=(0,s().Bj)(((e,t,o)=>{if(!e||!t||!o)return;const[n]=(0,l().WP)(u(t,o)).find((t=>{let[o,n]=t;return n===e}))??[];return n}),(function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return JSON.stringify(t)}));function m(e){var t,o;let{blockOrCollectionId:n}=e;const r=null===(t=c().default.state.currentUserStore)||void 0===t?void 0:t.id,i=null===(o=c().default.state.currentSpaceStore)||void 0===o?void 0:o.id;if(r&&i&&n)return p(n,r,i)}function g(e){return(0,l().O9)(m({blockOrCollectionId:e}))}function f(e){return!!e&&"main"===m({blockOrCollectionId:e.id})}function v(e){const t=null==e?void 0:e.getParentId(),o=null==e?void 0:e.getSpaceId();if(!t||!o||!e)return;const n=u(t,o).main,i=e.getSpaceStore();return n&&i?d().Bv.createChildStore(i,{table:r().ev,id:n,spaceId:i.id}):void 0}function h(e){var t,o;const n=null===(t=c().default.state.currentUserStore)||void 0===t?void 0:t.id,r=null===(o=c().default.state.currentSpaceStore)||void 0===o?void 0:o.id;if(n&&r)return u(n,r)[e]}function _(e){const t=c().default.state.currentSpaceStore;if(!t)return;const o=t.id;switch(e){case"main":case"myTasks":case"customDb":case"trending":case"similarUsers":case"mostVisited":case"lastEdited":case"favorites":case"posts":const n=h(e);return n?d().Bv.createChildStore(t,{table:r().ev,id:n,spaceId:o}):void 0;case"myTasksAssignedToMeCollectionView":case"customDbCollectionView":case"similarUsersCollectionView":case"trendingCollectionView":case"mostVisitedCollectionView":case"lastEditedCollectionView":case"favoritesCollectionView":case"postsCollectionView":case"postsFollowingCollectionView":case"postsDiscoverCollectionView":const s=h(e);return s?d().pS.createChildStore(t,{table:a().Gy,id:s,spaceId:o}):void 0;case"trendingCollection":case"similarUsersCollection":case"mostVisitedCollection":case"lastEditedCollection":case"favoritesCollection":const c=h(e);return c?d().md.createChildStore(t,{table:i().Vl,id:c,spaceId:o}):void 0;default:(0,l().HB)(e)}}function b(){return{hide_linked_collection_name:!0,collection_peek_mode:n().O,inline_collection_first_load_limit:{type:"load_limit",limit:20}}}const y=(0,o(836251).xS)("guides.taskDatabases")},697868:(e,t,o)=>{o.d(t,{Ay:()=>v,Cu:()=>h,MG:()=>_});var n=o(296540),r=()=>o(56366),i=()=>o(799954),a=()=>o(959013),s=()=>o(989423);var l=()=>o(324089),c=()=>o(891078),d=()=>o(502438),u=()=>o(99945),p=()=>o(42425),m=o(474848);const g=(0,a().YK)({placeholder:{defaultMessage:"Toggle",id:"toggleBlock.placeholder"}});function f(e,t){const f=(0,o(484714).v3)(),v=(0,a().tz)(),h=(0,n.useRef)(!0);(0,n.useLayoutEffect)((()=>{h.current&&(h.current=!1,l().MB({blockId:e.store.id,currentUserId:f.currentUser.id}),l()._z(f,e.store))}));const _=(0,n.useRef)(null),b=(0,r().K8)((()=>e.store.getBlockTitleStore()),[e.store]),y=(0,r().K8)((()=>e.store.getContentStore()),[e.store]),S=(0,r().K8)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),w=(0,r().K8)((()=>o(468484).A.isOpen(e.store.id)&&!e.hideContent),[e.hideContent,e.store.id]),k=(0,r().K8)((()=>!e.store.hasContent()),[e.store]),I=(0,n.useId)(),A=(0,n.useId)(),x=(0,r().K8)((()=>o(744705).X(e.store)||!e.store.isDefaultRecordCache()),[e.store]),C=(0,r().K8)((()=>e.store.getType()),[e.store]);(0,o(176663)._)({loaded:x,blockType:C,isOpen:w});const T=(0,n.useCallback)((()=>{let t;t=o(496603).mK(d().default.state.stores,e.store)?d().default.state.stores:[e.store];const n=!w;for(const e of t)l().xT({blockId:e.id,state:n,currentUserId:f.currentUser.id});!function(e,t){s().vd(e,"toggle_block_toggle")}(f)}),[f,w,e.store]),M=(0,n.useCallback)((()=>{o(317909).createAndCommit({userAction:"ToggleBlock.handlePlaceholderClick",environment:f,canUndo:!0,perform:t=>{l()._N({environment:f,store:e.store,transaction:t})}})}),[f,e.store]),P=(0,n.useCallback)((e=>{if(e.shiftKey){const e=o(186445).ao();e&&l().In({environment:f,blockStore:e})}else T()}),[f,T]),B=(0,c().pW)(e.store,!0),R=(0,o(401497).IS)((t=>({root:{paddingLeft:i().nE.paddingLeft,...B,...e.style},placeholderButton:{fontSize:"inherit",width:"100%",borderRadius:4,caretColor:t.lightTextColor,...i().nE,marginTop:2},placeholderText:{color:t.lightTextColor},title:{...p().FC},titlePlaceHolder:{...S?{color:t.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{}},leftStyle:{paddingRight:2}})),[B,S,e.style]),E=(0,m.jsx)(o(704152).A,{style:R.placeholderButton,onClick:M,disabled:e.disabled,children:(0,m.jsx)("span",{style:R.placeholderText,children:(0,m.jsx)(a().sA,{defaultMessage:"Empty toggle. Click or drop blocks inside.",id:"toggleBlock.emptyBlock.placeholderText"})})}),D=(0,m.jsxs)(p().Ay,{style:R.root,left:(0,m.jsx)(o(702796).A,{"aria-describedby":I,"aria-controls":A,isSidebar:!1,open:w,fill:!k,onClick:P,tapArea:f.device.isMobile?{size:30}:void 0}),leftStyle:R.leftStyle,ref:_,children:[(0,m.jsxs)("div",{style:{display:"flex"},children:[(0,m.jsx)(o(246722).A,{id:I,style:R.title,disabled:e.disabled,store:b,placeholder:v.formatMessage(g.placeholder),placeholderStyle:R.titlePlaceHolder,pasteBehavior:"block",inPageFind:o(792540).Os.block_match,legacyTransclusionParentStore:e.legacyTransclusionParentStore,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,m.jsx)(o(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,recursivelyLoadAllDiscussions:!w})]}),w?(0,m.jsx)(o(378765).A,{id:A,loaded:x,spinnerSize:"relative",showSpinnerTimeout:500,innerStyle:{display:"flex",flexDirection:"column",width:"100%"},style:{display:"flex"},children:(0,m.jsx)(u().A,{store:y,emptyPlaceholder:E,disabled:e.disabled,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag})}):(0,m.jsx)(u().A,{store:y,disabled:e.disabled,disableContent:!0})]});return(0,c().NW)(e.store,t,(0,n.useMemo)((()=>({renderedType:"toggle",getNode:()=>_.current,getBlockStore:()=>e.store,activate(){T()}})),[e.store,T]),D)}const v=n.memo(n.forwardRef(f),o(821062).A);function h(){return{display:"flex"}}function _(){return{display:"flex",flexDirection:"column",width:"100%"}}},698449:(e,t,o)=>{o.d(t,{Pf:()=>d,cp:()=>m,gA:()=>p,xQ:()=>u});o(898992),o(354520),o(672577),o(581454);var n=()=>o(68263),r=()=>o(798880),i=()=>o(496603),a=()=>o(646736),s=()=>o(605402),l=()=>o(870092);const c=(0,o(959013).YK)({untitledGroupName:{defaultMessage:"Untitled",id:"spaceBasicSettings.spacePermissionsSettings.groupsTab.defaultNewGroupName"}});function d(e){const{intl:t,groupName:o}=e;return o||t.formatMessage(c.untitledGroupName)}function u(e){var t;return(null===(t=s().A.state.permissionGroupsAndMemberCounts.find((t=>t.group.group_id===e.groupId)))||void 0===t?void 0:t.memberCount)??0}function p(e){const{userIds:t,limit:o,spaceStore:n}=e;if(!n)return{countRemainingUsers:0,limitedUserStores:[]};const a=o?t.slice(0,o):t;return{limitedUserStores:i().oE(a.map((e=>l().L.createChildStore(n,{table:r().oo,id:e})))),countRemainingUsers:t.length-a.length}}function m(e){let{userStores:t,spaceStore:o,intl:r}=e;return i().Ul(t,(e=>e.getSearchName(r))).sort(((e,t)=>{if(!o)return 0;const r=(0,a().dp)(o,e.id).getMembershipTypeAsRoleOrNone(),i=(0,a().dp)(o,t.id).getMembershipTypeAsRoleOrNone();return r&&i?n().hV.indexOf(i)-n().hV.indexOf(r):0}))}},699744:(e,t,o)=>{o.d(t,{XJ:()=>v,rq:()=>h,sr:()=>f});o(944114),o(898992),o(823215),o(672577),o(803949),o(581454),o(737550);var n=()=>o(919709),r=()=>o(681373),i=()=>o(496603),a=()=>o(534177),s=()=>o(413962),l=()=>o(423804),c=()=>o(962845),d=()=>o(792002),u=()=>o(77246),p=()=>o(910302),m=()=>o(538527),g=()=>o(789200);function f(e){const{environment:t,multiSelection:o,annotation:f,transaction:v}=e,h=(0,r().Au)(f),_=(0,c().$W)(o),b=s().Rq(o),y=b?u().Uv.getMode(b):"default",S=(0,d().x7)([h],o,{}),w=n().YuY(f)&&i().n4(f,S[h]),k=!n().iQL(f)&&!n().I1e(f)&&!n().YuY(f)&&Boolean(S[h])||w;if("default"!==y&&n().czo(f)&&"translate_unlocked"!==y&&"ai_co_editing"!==y)if("suggest"===y){const e=s().RR(t,v,o),r=e.id,i=k?[n().Ifu.SuggestionUnannotate,r,f]:[n().Ifu.SuggestionAnnotate,r,f],a=[];_.forEach((e=>{let{store:o,selection:r}=e;const s=o.getValue(),c=n().xbM(s,r),d=n().gsT({textValue:s,startIndex:c.startIndex,endIndex:c.endIndex}).find((e=>{let{annotation:r}=e;if(n().MXn(r)||n().zIw(r)){const e=n().Dew(r);if(1===e.length&&e[0]===h){const e=n().vu(r),i=l().o9({store:o,discussionId:e});if(i)return l().Ih(i,t.currentUser)}}}));d&&d.startIndex<=c.startIndex&&d.endIndex>=c.endIndex||(m().Mw({environment:t,store:o,annotation:i,selection:c,transaction:v}),a.push(o.id))})),a.length>0&&s().c3({environment:t,transaction:v,discussionStore:e,addModifiedBlockIdsAfter:a})}else"translate_locked"===y?p()._4():(0,a().HB)(y);else _.forEach((e=>{let{store:o,selection:r}=e;k?g().g({environment:t,store:o,annotationKey:n().JIi(f),selection:r,transaction:v,updateSelection:!1}):m().Mw({environment:t,store:o,annotation:f,selection:r,transaction:v})}))}function v(e){const{environment:t,blocks:o,annotation:r,transaction:a}=e,s=n()._XS(r),l=i().oE(o.map((e=>{const t=e.getTitleStore();if(!t)return;const o=t.getValue();return o?{block:e,titleStore:t,titleValue:o}:void 0}))),c=l.every((e=>{let{titleValue:t}=e;return t.every((e=>n().uPN(e).some((e=>n()._XS(e)===s))))}));for(const{titleStore:n}of l)h({environment:t,annotation:r,textStore:n,action:c?"removeAnnotationType":"annotate",transaction:a})}function h(e){const{environment:t,annotation:o,transaction:r,textStore:i,action:a}=e;"annotate"===a?m().Mw({environment:t,store:i,annotation:o,selection:{startIndex:0,endIndex:1/0},transaction:r}):g().g({environment:t,store:i,annotationKey:n().JIi(o),selection:{startIndex:0,endIndex:1/0},transaction:r,updateSelection:!1})}},700180:(e,t,o)=>{o.d(t,{A:()=>r});var n=()=>o(388487);function r(e){let{children:t,...o}=e;return(0,n().A)(o),t}},700250:(e,t,o)=>{o.d(t,{Ay:()=>m,MY:()=>d,UV:()=>c,W0:()=>u});var n=()=>o(962730);const{Top:r,Bottom:i,Left:a,Right:s,Center:l}=n().W,c=n().W,d=n().C;function u(e){switch(e){case r:return i;case i:return r;case a:return s;case s:return a;case l:return l}}class p extends(()=>o(757695))().default{getInitialState(){return{open:!1,offsetX:0,offsetY:0,originRect:o(397248).v_}}}const m=p},700251:(e,t,o)=>{o.d(t,{kq:()=>c,xI:()=>s,y$:()=>l});o(296540);var n=()=>o(484714),r=()=>o(340498),i=()=>o(645873),a=o(474848);function s(){let{size:e="default",type:t="system",isMobile:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n="custom"===t?2:0;return(o?r().lD[e]:r().Ev[e])-n}function l(){let{size:e="default",type:t="system"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{isMobile:o}=(0,n().Y0)();return s({size:e,type:t,isMobile:o})}function c(e,t){const o=new(i().O2)(e,t);return Object.assign(((e,t)=>(0,a.jsx)(i().u2,{dependency:o,children:o=>o(e,t)})),{__dependency:o})}},701685:(e,t,o)=>{o.d(t,{X:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("twitter",{viewBox:"0 0 2400 2452",svg:(0,n.jsx)("path",{d:"M5.3 7.7c4.6 6.6 920.6 1339.9 928.8 1351.9l2.9 4.2-463.2 538.3C219.1 2198.2 8.2 2443.3 5.2 2446.7l-5.4 6.3h211.8l409.5-476c225.2-261.8 409.6-476 409.9-476 .3 0 147.7 214.2 327.5 476l327 476h714.6l-2.9-4.3c-1.6-2.3-220-320.1-485.2-706.2-265.3-386.1-482.4-702.7-482.4-703.6-.1-.8 200.4-234.6 445.4-519.4C2120 234.7 2320.7 1.3 2320.8.8c.2-.4-47.1-.8-105.1-.8h-105.5l-387.4 450.2c-213 247.6-387.7 450.3-388.3 450.4-.5.2-140.2-202.4-310.4-450.1L714.7 0H-.1l5.4 7.7zm669 239c283.8 405.9 1434.5 2052.1 1435.1 2053 .6 1-32 1.3-161.7 1.3h-162.5l-341-487.7C1256.7 1545 920 1063.4 696.1 743.1 472.2 422.8 289 160.4 289 159.9s68.3-.9 162-.9h161.9l61.4 87.7z"})})},701763:(e,t,o)=>{o.d(t,{$N:()=>U,Ah:()=>A,CW:()=>w,FR:()=>J,FX:()=>Q,Fn:()=>j,Fs:()=>Y,G8:()=>F,Is:()=>b,K4:()=>E,KI:()=>R,MR:()=>W,Nn:()=>N,Sd:()=>$,Sp:()=>Z,T_:()=>K,UY:()=>O,Uo:()=>T,VJ:()=>C,W2:()=>v,W7:()=>M,Y1:()=>y,Z9:()=>_,Zf:()=>B,cK:()=>X,e1:()=>V,jR:()=>S,lD:()=>x,pf:()=>h,qI:()=>G,s$:()=>L,sY:()=>P,yg:()=>D});o(898992),o(354520),o(672577),o(803949),o(581454),o(737550);var n=()=>o(433847),r=()=>o(68263),i=()=>o(464192),a=()=>o(962277),s=()=>o(116225),l=()=>o(496603),c=()=>o(498212),d=()=>o(534177),u=()=>o(989423),p=()=>o(731320),m=()=>o(437487),g=()=>o(508496),f=()=>o(946141);function v(e,t){u().vd(e,"permissions_settings_security_banner_show",t)}function h(e,t){u().vd(e,"permissions_settings_security_banner_click",t)}function _(e,t){u().vd(e,"permissions_settings_search_click",t),g().default.logEvent("permissions_settings_search_click",t.current_tab)}function b(e,t){u().vd(e,"permissions_settings_export_guests_button_click",t),g().default.logEvent("permissions_settings_export_guests_button_click",1,t)}function y(e,t){u().vd(e,"permissions_settings_table_multiselect_click",t)}function S(e,t){u().vd(e,"permissions_settings_table_button_click",t),g().default.logEvent("permissions_settings_table_button_click",t.button_name,t)}function w(e,t){u().vd(e,"permissions_settings_invite_button_click",t),g().default.logEvent("permissions_settings_invite_button_click",t.type)}function k(e){const{user_id:t,page_id:o,...n}=e;return n}function I(e,t){u().vd(e,"update_page_permission","user_id"in t||"page_id"in t?k(t):t)}function A(e,t){u().vd(e,"set_permission_item",t)}function x(e,t){if("team"===t.type){const{team_id:o,...n}=t;u().vd(e,"expand_permission",{...n},{forceOverrideAutomaticEventData:{team_id:o}})}else u().vd(e,"expand_permission",t)}function C(e,t){u().vd(e,"page_share_user_access_role",t)}function T(e){const{newRole:t,availableRoles:o}=e;if("none"===t||"content_only_editor"===t)return;o.some((e=>"content_only_editor"===e.role))&&s().u4({name:"save_non_content_editor_role"})}function M(e){const{environment:t,spaceBot:o,from:n}=e;u().u4({environment:t,event:{eventName:"update_space_permission",eventProperties:{updated_bot_id:(0,c().Xw)(o.bot_id),from:n,membership_type:o.membership_type,parent_table:o.bot_parent_table,parent_id:o.bot_parent_id}}}),g().default.logEvent("update_space_permission",n,{membership_type:o.membership_type})}function P(e){const{environment:t,spaceUser:o,from:n}=e;u().u4({environment:t,event:{eventName:"update_space_permission",eventProperties:{updated_user_id:(0,c().Xw)(o.user_id),membership_type:o.membership_type,invite_id:o.invite_id,from:n}}}),g().default.logEvent("update_space_permission",n,{membership_type:o.membership_type})}function B(e,t){var o;let{item:n,teamStore:r}=t;const i=null===(o=r.getPermissionItems())||void 0===o?void 0:o.find((e=>e.type===n.type));(null==i?void 0:i.role)!==n.role&&f().rP(e,"update_team_permission",{store:r,..."user_id"in n||"page_id"in n?k(n):n,..."user_id"in n&&{permission_user_id:(0,c().Xw)(n.user_id)},old_role:null==i?void 0:i.role,is_team_role_change:!1,is_permission_change:!0})}function R(e,t){let{memberInfo:o,store:n,team_role:r}=t;f().rP(e,"update_team_permission",{store:n,team_role:r,is_team_role_change:!0,is_permission_change:!1,..."user"===o.entity_type?{permission_user_id:o.user_id}:{permission_group_id:o.group_id}})}function E(e,t){u().vd(e,"permissions_settings_tab_click",t),g().default.logEvent("permissions_settings_tab_click",t.tab,t)}function D(e){u().vd(e,"permission_group_rename")}function N(e,t){u().vd(e,"permission_group_set_icon",t)}function L(e,t){u().vd(e,"permission_group_add_members",t)}function F(e){u().vd(e,"permission_group_remove_member")}function U(e){u().vd(e,"permission_group_delete")}function O(e){u().vd(e,"permission_group_create")}function V(e){var t;let{environment:o,location:n,inSudoMode:r,store:i,newItems:a,fromPermissionWrapper:s,flowId:l}=e;const c=null===(t=i.getCollectionStore())||void 0===t?void 0:t.id,d=i.getParentCollectionIdUpToTwoLevels();z({store:i,newItems:a}).forEach((e=>{let{role_old_inherited_or_most_permissive:t,role_old_on_page:i,privacy_level:a,old_privacy_level:u,newItem:p}=e;I(o,a||u?{...p,location:n,in_sudo_mode:r||void 0,role_old_inherited_or_most_permissive:t,role_old_on_page:i,privacy_level:a,old_privacy_level:u,share_menu_session_id:m().Ay.state.sessionId,from_permission_wrapper:s,collection_id:c,parent_collection_id:d,invite_flow_id:l}:{...p,location:n,in_sudo_mode:r||void 0,role_old_inherited_or_most_permissive:t,role_old_on_page:i,share_menu_session_id:m().Ay.state.sessionId,from_permission_wrapper:s,collection_id:c,parent_collection_id:d,invite_flow_id:l})}))}function j(e){const{environment:t,calculatedPermissions:o}=e;u().vd(t,"page_share_permissions_summary",{share_menu_session_id:m().Ay.state.sessionId,page_permission_summary:H(o)})}function z(e){let{store:t,newItems:o}=e;const i=e=>`${e.type}:${n().zr(e)}`,a=t.getPermissionItems(),s=l().pY(a,i),c=p().i0(t).map((e=>e.permissionItem)),d=l().pY(c,i);return o.map((e=>{var t;const o=i(e),n=d[o],a=null===(t=s[o])||void 0===t?void 0:t.role,l=null==n?void 0:n.role;return(0,r().Lg)(e)?{newItem:e,role_old_inherited_or_most_permissive:l,role_old_on_page:a,privacy_level:q(e),old_privacy_level:n&&(0,r().Lg)(n)?q(n):"private"}:{newItem:e,role_old_inherited_or_most_permissive:l,role_old_on_page:a}}))}function q(e){return"none"===e.role?"private":e.unlisted_timestamp?"unlisted":"open"}function H(e){const{mostPermissiveSpaceItem:t,mostPermissiveAncestorTeamOwnerItem:o,mostPermissiveAncestorTeamMemberItem:n,pagePermissionUIModel:s,mostPermissivePublicItem:l}=e,{mostPermissiveGroupPermissions:c,mostPermissiveUserPermissions:d}=s;return{public:{role:l.permissionItem.role,is_public_share_link:(0,i().v)(l.permissionItem),is_site:(0,a().W)(l.permissionItem)},space:t.permissionItem.role,team_owner:null==o?void 0:o.permissionItem.role,team_member:null==n?void 0:n.permissionItem.role,groups:{full_access:c.filter((e=>{let{permissionItem:{role:t}}=e;return r().Km(t)})).length,can_edit:c.filter((e=>{let{permissionItem:{role:t}}=e;return r().BP(t)})).length,can_edit_content:c.filter((e=>{let{permissionItem:{role:t}}=e;return r().uQ(t)})).length,can_comment:c.filter((e=>{let{permissionItem:{role:t}}=e;return r().MZ(t)})).length,can_view:c.filter((e=>{let{permissionItem:{role:t}}=e;return r().h9(t)})).length},users:{full_access:d.filter((e=>{let{permissionItem:{role:t}}=e;return r().Km(t)})).length,can_edit:d.filter((e=>{let{permissionItem:{role:t}}=e;return r().BP(t)})).length,can_edit_content:d.filter((e=>{let{permissionItem:{role:t}}=e;return r().uQ(t)})).length,can_comment:d.filter((e=>{let{permissionItem:{role:t}}=e;return r().MZ(t)})).length,can_view:d.filter((e=>{let{permissionItem:{role:t}}=e;return r().h9(t)})).length},privacy_level:q(t.permissionItem)}}function W(e){u().vd(e,"widen_permissions")}function K(e,t){let o;u().vd(e,"request_access",t),"page"===t.request_access_type||"collection"===t.request_access_type?o=t.requested_access_level:"team"===t.request_access_type?o="team_access_request":"space"===t.request_access_type?o="space_access_request":(0,d().HB)(t),g().default.logEvent("request_access",o,t)}function G(e,t){u().vd(e,"grant_access",t),g().default.logEvent("grant_access",t.newAccessLevel,t)}function $(e,t){u().vd(e,"grant_access_update_access_level",t)}function Y(e,t){u().vd(e,"ignore_access_request",t)}function Q(e,t){u().vd(e,"toggle_request_access_security_setting",t)}function Z(e,t){u().vd(e,"view_all_requests_from_membership_request_notification",t),g().default.logEvent("view_all_requests_from_membership_request_notification","notification",t)}function X(e){u().vd(e,"open_guest_membership_request_modal"),g().default.logEvent("open_guest_membership_request_modal")}function J(e){u().vd(e,"render_guest_membership_request_entry_point"),g().default.logEvent("render_guest_membership_request_entry_point")}},702796:(e,t,o)=>{o.d(t,{A:()=>c});var n=o(296540),r=o(474848);const i={viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M2.835 3.25a.8.8 0 0 0-.69 1.203l5.164 8.854a.8.8 0 0 0 1.382 0l5.165-8.854a.8.8 0 0 0-.691-1.203z"})},a=(0,o(340498).wt)("arrowCaretDownFillSmall",i);var s=()=>o(959013);const l=(0,s().YK)({open:{defaultMessage:"Open",id:"toggleButton.open"},close:{defaultMessage:"Close",id:"toggleButton.close"}}),c=n.memo((function(e){const t=(0,o(484714).Y0)(),i=(0,s().tz)(),c=(0,n.useMemo)((()=>function(e){let{isSidebar:t,isMobile:o}=e;return t&&!o?20:24}({isSidebar:e.isSidebar,isMobile:t.isMobile})),[t.isMobile,e.isSidebar]),d=(0,o(401497).IS)((()=>{const o=e.color||"inherit",n=`rotateZ(${e.open?0:-90}deg)`,r="chevron"===e.icon&&!t.isMobile;return{button:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:c,height:c,borderRadius:4,...e.style},arrow:{width:r?12:"0.8em",height:r?12:"0.8em",transition:"transform 200ms ease-out",transform:n,fill:o,opacity:e.fill?1:.5}}}),[t.isMobile,e.color,e.fill,e.icon,e.open,e.style,c]),u=(0,n.useMemo)((()=>"chevron"===e.icon?(0,o(346615).p)(d.arrow):a(d.arrow)),[e.icon,d.arrow]);return(0,r.jsxs)(o(704152).A,{ariaLabel:e.open?i.formatMessage(l.close):i.formatMessage(l.open),"aria-describedby":e["aria-describedby"],"aria-expanded":e.open,"aria-controls":e.open?e["aria-controls"]:void 0,style:d.button,onClick:e.onClick,onMouseDown:e.onMouseDown,disabled:e.disabled,allowShiftClick:!0,children:[e.tapArea&&(0,r.jsx)("div",{style:{position:"absolute",opacity:0,width:e.tapArea.size,height:e.tapArea.size,top:-(e.tapArea.size-c)/2,left:-(e.tapArea.size-c)/2}}),u]})}))},705540:(e,t,o)=>{o.r(t),o.d(t,{addSetEmulationListener:()=>rt,appUpdateAvailable:()=>K,appUpdateChecking:()=>W,appUpdateError:()=>H,appUpdateFinished:()=>Y,appUpdateInstall:()=>Q,appUpdateNotAvailable:()=>G,appUpdateProgress:()=>$,appUpdateReady:()=>q,checkForUpdates:()=>U,clearBrowserHistory:()=>T,clearCookies:()=>ye,clearGoogleAuthCookies:()=>Se,closeGlobalSearchModal:()=>Ue,closeQuickSearch:()=>je,closeTab:()=>I,downloadUrl:()=>we,electronApi:()=>g,electronAppFeatures:()=>Me,electronCurrentTab:()=>S,electronTabs:()=>y,electronUpdateAvailable:()=>V,electronUpdateChecking:()=>O,electronUpdateError:()=>F,electronUpdateNotAvailable:()=>j,electronUpdateProgress:()=>z,electronUpdateReady:()=>L,fullscreen:()=>J,getCurrentZoom:()=>ne,getDesktopVersion:()=>f,getMediaAccessStatus:()=>at,getSqliteDiskUsage:()=>it,getSubstitutions:()=>pe,handleBackMetaClick:()=>M,handleBackPinnedClick:()=>B,handleForwardMetaClick:()=>P,handleForwardPinnedClick:()=>R,handleTabClicked:()=>b,handleTabHistoryMenu:()=>E,initializeElectron:()=>Ce,installElectronUpdate:()=>Z,isActiveTab:()=>De,isMainTabOrWindow:()=>me,isProtocolRegistered:()=>Ae,isRunningUnderArm64Translation:()=>X,isWindowVisible:()=>Ne,navigationReady:()=>xe,newTab:()=>_,onNewWindow:()=>ve,openAppMenu:()=>le,openDevTools:()=>ce,openExternalUrl:()=>x,openGoogleDrivePickerPopup:()=>_e,openInNewTab:()=>v,openInNewTabAfterFlush:()=>h,openInNewWindow:()=>k,openNotificationUrl:()=>C,openNotionAiFromQuickSearch:()=>Ze,openNotionUrl:()=>A,openOauthPopup:()=>he,openPageFromGlobalSearch:()=>Oe,openQuickSearchResult:()=>ze,openQuickSearchShortcutSetting:()=>$e,openSearchModalForNewTab:()=>Xe,openSearchModalFromQuickSearch:()=>Qe,openTabFromQuickSearch:()=>Ve,performShortcut:()=>tt,quickSearchNotReady:()=>He,quickSearchReady:()=>qe,quickSearchRefresh:()=>Ge,quickSearchRenderCompleted:()=>We,quickSearchSetSearchAssistantMode:()=>Ke,quickSearchVisibilityState:()=>Ye,refreshAll:()=>Te,setAppStoreState:()=>Ee,setBadge:()=>D,setCloseConfirmationDialogReason:()=>ot,setGlobalShortcutsEnabled:()=>et,setIsRecording:()=>Je,setLogglyData:()=>be,setNetworkEmulation:()=>nt,setOverlay:()=>N,setTabBreadcrumbs:()=>ue,setTabColors:()=>fe,setTheme:()=>ge,setUnauthorizedIframeUrls:()=>w,setWindowTitle:()=>de,sidebarState:()=>Pe,subscribeToProtocolUrl:()=>ke,subscribeToSettingsMenuItem:()=>Ie,tabSpacesState:()=>Be,toggleMaximized:()=>se,track:()=>Le,trackBatched:()=>Fe,windowSidebarState:()=>Re,zoomIn:()=>re,zoomOut:()=>ie,zoomReset:()=>ae});o(811558),o(898992),o(354520),o(581454);var n=()=>o(418135),r=()=>o(857639),i=()=>o(651170),a=()=>o(496603),s=()=>o(229833),l=()=>o(939768),c=()=>o(435009);function d(){const e=function(e){const t=e.match(/Mac OS X (\d+_\d+)/);if(t)return t[1].split("_").map((e=>parseInt(e,10)));return}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.userAgent);return!!e&&(10===e[0]&&e[1]<15)}var u=()=>o(165162),p=()=>o(219187);let m="lastProtocolUrlDeduplicationId";const g=p().electronApi,f=p().getDesktopVersion;function v(e){const t=l().ZO(e.url);g&&(g.openInNewTab?g.openInNewTab(t,Boolean(e.makeTabActive),e.position||"after-children",e.isNewPage,e.initialTitle,e.initialFavicon):g.openInNewWindow(t))}function h(e,t){t.isNewPage&&e.defaultRecordCache.persistedRecordCache?e.defaultRecordCache.persistedRecordCache.flushPendingWrites().then((()=>{v(t)})).catch((()=>{v(t)})):v(t)}function _(e){g&&null!=g&&g.newTab?g.newTab():v({url:"",makeTabActive:!0,position:e?"end":"start"})}function b(e){var t;null==g||null===(t=g.handleTabClicked)||void 0===t||t.call(g,e)}const y={addListener(e){var t,o;return null==g||null===(t=g.electronTabs)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},S={addListener(e){var t,o;return null==g||null===(t=g.electronCurrentTab)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},w={addListener(e){var t,o;return null==g||null===(t=g.setUnauthorizedIframeUrls)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}};function k(e){const t=l().ZO(e);null==g||g.openInNewWindow(t)}function I(){var e;null==g||null===(e=g.closeTab)||void 0===e||e.call(g)}function A(e){let{openInNew:t,url:o,makeTabActive:n,position:r,isNewPage:i,environment:a}=e;"tab"!==t?"window"!==t||k(o):h(a,{url:o,position:r,makeTabActive:n,isNewPage:i})}async function x(e){if(!g)return!1;return void 0===l().q7(e)?(r().log({level:"warning",from:"electronActions",type:"badUrlInOpenExternalUrlDetected",data:{miscDataToConvertToString:{url:e}}}),!1):await g.openExternalUrl(e)}function C(e,t){null!=g&&g.openNotificationUrl?g.openNotificationUrl(e):c().oo({environment:t,url:e})}function T(){null==g||g.clearBrowserHistory()}function M(){var e,t;null==g||null===(e=g.navigationHistory)||void 0===e||null===(t=e.handleBackMetaClick)||void 0===t||t.call(e)}function P(){var e,t;null==g||null===(e=g.navigationHistory)||void 0===e||null===(t=e.handleForwardMetaClick)||void 0===t||t.call(e)}function B(){var e,t;null==g||null===(e=g.navigationHistory)||void 0===e||null===(t=e.handleBackPinnedClick)||void 0===t||t.call(e)}function R(){var e,t;null==g||null===(e=g.navigationHistory)||void 0===e||null===(t=e.handleForwardPinnedClick)||void 0===t||t.call(e)}function E(e,t,o){var n,r;null==g||null===(n=g.navigationHistory)||void 0===n||null===(r=n.handleTabHistoryMenu)||void 0===r||r.call(n,e,t,o)}function D(e){return null==g?void 0:g.setBadge(e)}function N(e){var t;return null==g||null===(t=g.setOverlay)||void 0===t?void 0:t.call(g,e)}const L={addListener:e=>null==g?void 0:g.updateReady.addListener(e)},F={addListener(e){var t,o;return null==g||null===(t=g.updateError)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}};function U(){var e;null==g||null===(e=g.checkForUpdates)||void 0===e||e.call(g)}const O={addListener(e){var t,o;return null==g||null===(t=g.updateChecking)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},V={addListener(e){var t,o;return null==g||null===(t=g.updateAvailable)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},j={addListener(e){var t,o;return null==g||null===(t=g.updateNotAvailable)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},z={addListener(e){var t,o;return null==g||null===(t=g.updateProgress)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},q={addListener(e){var t,o;return null==g||null===(t=g.appUpdateReady)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},H={addListener(e){var t,o;return null==g||null===(t=g.appUpdateError)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},W={addListener(e){var t,o;return null==g||null===(t=g.appUpdateChecking)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},K={addListener(e){var t,o;return null==g||null===(t=g.appUpdateAvailable)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},G={addListener(e){var t,o;return null==g||null===(t=g.appUpdateNotAvailable)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},$={addListener(e){var t,o;return null==g||null===(t=g.appUpdateProgress)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},Y={addListener(e){var t,o;return null==g||null===(t=g.appUpdateFinished)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},Q={addListener(e){var t,o;return null==g||null===(t=g.appUpdateInstall)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}};function Z(){null==g||g.installUpdate()}function X(){var e;return null==g||null===(e=g.isRunningUnderArm64Translation)||void 0===e?void 0:e.call(g)}const J={get:()=>null==g?void 0:g.fullscreen.get(),addListener:e=>null==g?void 0:g.fullscreen.addListener(e)};function ee(e,t,o){return Math.min(Math.max(e,o),t)}let te,oe=1;function ne(){return oe}function re(){var e;null!=g&&null!==(e=g.zoom)&&void 0!==e&&e.set&&(oe+=n().vN,g.zoom.set(ee(n().yU,n().y$,oe)))}function ie(){var e;null!=g&&null!==(e=g.zoom)&&void 0!==e&&e.set&&(oe-=n().vN,g.zoom.set(ee(n().yU,n().y$,oe)))}function ae(){var e;null!=g&&null!==(e=g.zoom)&&void 0!==e&&e.set&&(oe=n().rx,g.zoom.set(oe))}function se(){var e;null==g||null===(e=g.toggleMaximized)||void 0===e||e.call(g)}function le(){var e;null==g||null===(e=g.openAppMenu)||void 0===e||e.call(g)}function ce(){var e;null==g||null===(e=g.openDevTools)||void 0===e||e.call(g)}function de(e){var t;null==g||null===(t=g.setWindowTitle)||void 0===t||t.call(g,e)}function ue(e){var t;null==g||null===(t=g.setTabBreadcrumbs)||void 0===t||t.call(g,e)}function pe(){return te||[]}async function me(){return g&&g.isMainTab?g.isMainTab():!g||!g.isMainWindow||g.isMainWindow()}function ge(e){var t;null==g||null===(t=g.setTheme)||void 0===t||t.call(g,e)}function fe(e){var t;null==g||null===(t=g.setTabColors)||void 0===t||t.call(g,e)}function ve(e){var t,o;null==g||null===(t=g.newWindow)||void 0===t||null===(o=t.addListener)||void 0===o||o.call(t,e)}async function he(e){var t;return null==g||null===(t=g.openOauthPopup)||void 0===t?void 0:t.call(g,e)}async function _e(e){var t;return null==g||null===(t=g.openGoogleDrivePickerPopup)||void 0===t?void 0:t.call(g,e)}function be(e){g&&(g.setLoggerData?g.setLoggerData(e):g.setLogglyData&&g.setLogglyData(e))}function ye(){var e;null==g||null===(e=g.clearCookies)||void 0===e||e.call(g)}function Se(){var e;null==g||null===(e=g.clearAllCookies)||void 0===e||e.call(g)}function we(e){var t;null==g||null===(t=g.downloadUrl)||void 0===t||t.call(g,e)}function ke(e){var t,o;null==g||null===(t=g.onNavigate)||void 0===t||null===(o=t.addListener)||void 0===o||o.call(t,((t,o)=>{if("string"!=typeof o&&o.deduplicationID){const e=o.deduplicationID;if(m===e)return void r().log({level:"warning",from:"electronActions",type:"duplicateOnNavigateObjectDetected"});m=e}e(o)}))}function Ie(e){var t,o;null==g||null===(t=g.onOpenSettings)||void 0===t||null===(o=t.addListener)||void 0===o||o.call(t,((t,o)=>e(o)))}async function Ae(e){return!(!g||!g.isProtocolRegistered)&&g.isProtocolRegistered(e)}function xe(e){g&&g.navigationReady&&g.navigationReady(e)}async function Ce(e){var t;const{device:o,electronSqlite:n}=e;if(g){if(await p().getAndCacheDesktopVersionAsync(),/WantsServiceWorker/i.test(navigator.userAgent)&&"serviceWorker"in navigator){var l;const e=(0,u().Sx)("single_electron_service_worker_registration"),t=await me();(e||t)&&navigator.serviceWorker.register(`${window.location.origin}/sw.js`,{type:"classic",scope:"/"}).catch((e=>{window.location.hostname.includes("localhost")||r().log({level:"error",from:"electronActions",type:"serviceWorkerRegistrationError",error:(0,s().n6)(e)})})),navigator.serviceWorker.addEventListener("controllerchange",(()=>{window.location.reload()})),null!=g&&null!==(l=g.relayMessageToServiceWorker)&&void 0!==l&&l.addListener&&g.relayMessageToServiceWorker.addListener(((e,t)=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{var o;null===(o=e.active)||void 0===o||o.postMessage(t)}))})),g.relayMessageFromServiceWorker&&navigator.serviceWorker.addEventListener("message",(e=>{g&&g.relayMessageFromServiceWorker&&g.relayMessageFromServiceWorker(e.data)}))}if(null!==(t=g.zoom)&&void 0!==t&&t.get&&(oe=await g.zoom.get()),n&&n.sqliteConnection){try{await n.sqliteConnection.ensureMigrated()}catch(c){r().log({level:"error",from:"electronActions",type:"sqliteConnectionEnsureMigratedError",error:(0,s().n6)(c),data:(0,i().CS)(c,{isBrowser:!1})})}n.sqliteConnection.optimize().catch((e=>{r().log({level:"error",from:"electronActions",type:"sqliteConnectionOptimizeError",error:(0,s().n6)(e),data:(0,i().CS)(e,{isBrowser:!1})})}))}if(g.getSubstitutions&&o.isElectronMac){const e=await g.getSubstitutions();te=e.filter((e=>e.replace!==e.with)).map((e=>({length:e.replace.length,replace:new RegExp(`\\b${a().Nt(e.replace)} $`),with:`${e.with} `})))}o.isElectronMac&&d()&&Me.setPreference("isAutoUpdaterDisabled",!0)}}function Te(e){g&&g.refreshAll&&g.refreshAll(e.includeFocusedWindow)}const Me={get(){var e,t;return null==g||null===(e=g.electronAppFeatures)||void 0===e||null===(t=e.get)||void 0===t?void 0:t.call(e)},setPreference(e,t){var o,n;null==g||null===(o=g.electronAppFeatures)||void 0===o||null===(n=o.setPreference)||void 0===n||n.call(o,e,t)},addListener(e){var t,o;return null==g||null===(t=g.electronAppFeatures)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},Pe={set(e){var t,o;null==g||null===(t=g.sidebarState)||void 0===t||null===(o=t.set)||void 0===o||o.call(t,e)},addSetSidebarOpenListener(e){var t,o;return null==g||null===(t=g.sidebarState)||void 0===t||null===(o=t.addSetSidebarOpenListener)||void 0===o?void 0:o.call(t,e)},addToggleListener(e){var t,o;return null==g||null===(t=g.sidebarState)||void 0===t||null===(o=t.addToggleListener)||void 0===o?void 0:o.call(t,e)}},Be={addListener(e){var t,o;return null==g||null===(t=g.tabSpaces)||void 0===t||null===(t=t.tabSpacesState)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)},addToggleMenuListener(e){var t,o;return null==g||null===(t=g.tabSpaces)||void 0===t||null===(o=t.addToggleMenuOpenListener)||void 0===o?void 0:o.call(t,e)},toggleTabSpacesMenuOpen(){var e,t;null==g||null===(e=g.tabSpaces)||void 0===e||null===(t=e.toggleTabSpacesMenuOpen)||void 0===t||t.call(e)},unsetActiveTabSpace(){var e,t;null==g||null===(e=g.tabSpaces)||void 0===e||null===(t=e.unsetActiveTabSpace)||void 0===t||t.call(e)},setActiveTabSpace(e){var t,o;null==g||null===(t=g.tabSpaces)||void 0===t||null===(o=t.setActiveTabSpace)||void 0===o||o.call(t,e)},createTabSpace(e){var t,o;null==g||null===(t=g.tabSpaces)||void 0===t||null===(o=t.createTabSpace)||void 0===o||o.call(t,e)},updateTabSpaceMetadata(e,t){var o,n;null==g||null===(o=g.tabSpaces)||void 0===o||null===(n=o.updateTabSpaceMetadata)||void 0===n||n.call(o,e,t)},reorderTabSpaces(e){var t,o;null==g||null===(t=g.tabSpaces)||void 0===t||null===(o=t.reorderTabSpaces)||void 0===o||o.call(t,e)},deleteTabSpace(e){var t,o;null==g||null===(t=g.tabSpaces)||void 0===t||null===(o=t.deleteTabSpace)||void 0===o||o.call(t,e)}},Re={get:()=>g&&g.windowSidebarState&&g.windowSidebarState.get?g.windowSidebarState.get():Promise.resolve(void 0),set(e){var t,o;null==g||null===(t=g.windowSidebarState)||void 0===t||null===(o=t.set)||void 0===o||o.call(t,e)},addListener(e){var t,o;return null==g||null===(t=g.windowSidebarState)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}};function Ee(e){var t;null==g||null===(t=g.setAppStoreState)||void 0===t||t.call(g,e)}const De={get(){var e;return null!=g&&null!==(e=g.isActiveTab)&&void 0!==e&&e.get?g.isActiveTab.get():Promise.resolve(!1)},addListener(e){var t,o;return null==g||null===(t=g.isActiveTab)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}};async function Ne(){return g&&g.windowIsVisible?g.windowIsVisible():"visible"===document.visibilityState}const Le={addListener(e){var t,o;return null==g||null===(t=g.track)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},Fe={addListener(e){var t,o;return null==g||null===(t=g.trackBatched)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}};function Ue(){var e;null==g||null===(e=g.closeGlobalSearchModal)||void 0===e||e.call(g)}function Oe(e){var t;null==g||null===(t=g.openPageFromGlobalSearch)||void 0===t||t.call(g,e)}function Ve(){var e;null==g||null===(e=g.openTabFromQuickSearch)||void 0===e||e.call(g)}function je(){var e;null==g||null===(e=g.closeQuickSearch)||void 0===e||e.call(g)}function ze(e){var t;null==g||null===(t=g.openQuickSearchResult)||void 0===t||t.call(g,e)}function qe(){var e;null==g||null===(e=g.quickSearchReady)||void 0===e||e.call(g)}function He(){var e;null==g||null===(e=g.quickSearchNotReady)||void 0===e||e.call(g)}function We(){var e;null==g||null===(e=g.quickSearchRenderCompleted)||void 0===e||e.call(g)}function Ke(e){var t;null==g||null===(t=g.quickSearchSetSearchAssistantMode)||void 0===t||t.call(g,e)}function Ge(){var e;null==g||null===(e=g.quickSearchRefresh)||void 0===e||e.call(g)}function $e(){var e;null==g||null===(e=g.openQuickSearchShortcutSetting)||void 0===e||e.call(g)}const Ye={isVisible(){var e;return null!=g&&null!==(e=g.quickSearchVisibilityState)&&void 0!==e&&e.isVisible?g.quickSearchVisibilityState.isVisible():Promise.resolve(!1)},addListener(e){var t,o;return null==g||null===(t=g.quickSearchVisibilityState)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},Qe={addListener(e){var t,o;return null==g||null===(t=g.openSearchModalFromQuickSearch)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},Ze={addListener(e){var t,o;return null==g||null===(t=g.openNotionAiFromQuickSearch)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}},Xe={addListener(e){var t,o;return null==g||null===(t=g.openSearchModalForNewTab)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}};function Je(e){var t;null!=g&&g.setIsRecording?g.setIsRecording(e):null==g||null===(t=g.setIsMediaActive)||void 0===t||t.call(g,e)}function et(e){var t;null==g||null===(t=g.setGlobalShortcutsEnabled)||void 0===t||t.call(g,e)}const tt={addListener(e){var t,o;return null==g||null===(t=g.performShortcut)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}};function ot(e){var t;null==g||null===(t=g.setCloseConfirmationDialogReason)||void 0===t||t.call(g,e)}async function nt(e){var t,o;await(null==g||null===(t=g.networkEmulation)||void 0===t||null===(o=t.setEmulation)||void 0===o?void 0:o.call(t,e))}function rt(e){var t,o;return null==g||null===(t=g.networkEmulation)||void 0===t||null===(t=t.onSetEmulation)||void 0===t||null===(o=t.addListener)||void 0===o?void 0:o.call(t,e)}async function it(){var e;return null==g||null===(e=g.getSqliteDiskUsage)||void 0===e?void 0:e.call(g)}async function at(e){var t;return null==g||null===(t=g.getMediaAccessStatus)||void 0===t?void 0:t.call(g,e)}},706024:(e,t,o)=>{o.d(t,{V:()=>m,X:()=>g});o(944114);var n=()=>o(496603),r=()=>o(534177),i=()=>o(972435),a=()=>o(966505),s=()=>o(449506),l=()=>o(901389),c=()=>o(246826),d=()=>o(426116),u=()=>o(317909);const p=(0,o(959013).YK)({saveFieldError:{id:"securitySAMLSettings.saveSettingsError.message",defaultMessage:"Something went wrong."}});function m(e,t){const{securitySettingsState:o,spaceStore:n}=t,{disablePublicAccess:r,disableGuests:i,disableMoveToSpace:a,disableExport:s,disableSpacePageEdits:l,disablePublicAccessRequests:c,disableTeamCreation:p,disableMembershipRequests:m,disableExternalMembershipRequests:g,disableGuestMembershipRequests:f,disableMemberUpgradeRequests:v,enableAiFeature:h,disableTeamGuests:_,enableGuestInviteRequests:b,enableAiTraining:y,zeroRetentionEnabled:S}=o;return u().createAndCommit({userAction:"securitySettingsActions.saveSecuritySettings",environment:e,canUndo:!0,perform:t=>{d().l3({environment:e,transaction:t,spaceStore:n,disablePublicAccess:r,disableGuests:i,disableMoveToSpace:a,disableExport:s,disableSpacePageEdits:l,disablePublicAccessRequests:c,disableTeamCreation:p,disableMembershipRequests:m,disableMemberUpgradeRequests:v,disableExternalMembershipRequests:g,disableGuestMembershipRequests:f,enableAiFeature:Boolean(h),disableTeamGuests:_,enableGuestInviteRequests:b,enableAiTraining:Boolean(y),zeroRetentionEnabled:Boolean(S)})}})}function g(e,t){const{securitySettingsStore:o,spaceStore:d,fields:m}=t,g={...o.state},f={...o.state,...m};o.setState(f),void 0!==m.disableGuests&&(s().callApi({eventName:"updateDisableGuestsOnSpace",environment:e,data:{spaceId:d.id,newDisableGuestsValue:m.disableGuests,keepExistingGuests:Boolean(m.keepExistingGuests)}}).then((e=>{if("failed"===e.type)return l().f1(i().A.formatMessage(p.saveFieldError)),void o.setState(g)})),a().DO(e,{new_value:m.disableGuests,keep_existing_guests_if_disabled:Boolean(m.keepExistingGuests)})),u().createAndCommit({userAction:"SecuritySettings.saveToggle",environment:e,canUndo:!0,perform:e=>{e.postSubmitCallbacks.push((e=>{if(e)return l().f1(i().A.formatMessage(p.saveFieldError)),void o.setState(g)}));const t=n().z7({disable_public_access:m.disablePublicAccess,disable_move_to_space:m.disableMoveToSpace,disable_export:m.disableExport,disable_space_page_edits:m.disableSpacePageEdits,disable_public_access_requests:m.disablePublicAccessRequests},(e=>n().gD(e)));c().zv({store:d,data:t,transaction:e});const a=n().z7({enable_guest_invite_requests:m.enableGuestInviteRequests,disable_membership_requests:m.disableMembershipRequests,disable_member_upgrade_requests:m.disableMemberUpgradeRequests,disable_external_membership_requests:m.disableExternalMembershipRequests,disable_guest_membership_requests:m.disableGuestMembershipRequests},(e=>!(0,r().O9)(e)));Object.keys(a).length>0&&u().applyOperation({store:d,operation:{pointer:d.pointer,path:["settings"],command:"update",args:a},transaction:e})}}),(0,r().O9)(m.enableGuestInviteRequests)&&a().uz(e,{new_value:m.enableGuestInviteRequests})}},706742:(e,t,o)=>{o.d(t,{x:()=>r});var n=()=>o(763824);class r{constructor(e){this.SCALE=1.5,this.MAX=15,this.waitable=new(n().e2),this.failures=0,this.observer=e}getDelay(e){return Math.min(this.MAX,Math.pow(this.SCALE,e))}reset(){var e;this.waitable.trigger(),this.waitable=new(n().e2),this.failures=0,null===(e=this.observer)||void 0===e||e.onReset()}async backOffOnFailure(e,t){var o;const r=this.failures;this.failures++;const i=e*this.getDelay(r)-e;null===(o=this.observer)||void 0===o||o.onBackoff(i,t),await this.waitable.wait(e,i),this.waitable=new(n().e2)}getFailures(){return this.failures}}},708830:(e,t,o)=>{o.d(t,{C2:()=>r,Cu:()=>l,Eq:()=>u,MY:()=>d,NU:()=>f,PH:()=>i,Qe:()=>c,_r:()=>h,dC:()=>v,hi:()=>g,uU:()=>a,v:()=>s,wI:()=>m,zJ:()=>p});o(944114),o(898992),o(354520),o(430670),o(581454),o(737550);var n=()=>o(534177);class r{constructor(e){this.children=e}map(e){const t=this.children.map((t=>t.map(e)));return new r(t)}toString(){return`DetachedTreeRoots([${this.children}])`}}class i{constructor(e,t){this.value=e,this.children=t}map(e){return s(this,(t=>({value:e(t.value),children:t.children})))}toString(){return`Tree(${this.value}, [${this.children}])`}}function a(e,t){return t(e.value)||e.children.some((e=>a(e,t)))}function s(e,t){const o=t(e);if(!o)return;const{value:r,children:a}=o,l=a?a.map((e=>s(e,t))).filter(n().O9):[];return new i(r,l)}function l(e){const{values:t,isAncestor:o,compareOrder:n}=e;if(0===t.length)return;const a=(e,t)=>{for(const n of e)if(o(n.value,t))return void a(n.children,t);e.push(new i(t,[]))},s=t.slice().sort(n),l=[];for(const r of s)a(l,r);return new r(l)}function c(e,t){for(const o of e){if(t(o))return[o];{const e=c(o.children,t);if(e)return[o,...e]}}}function d(e,t){if(t&&t.length>0){const o=t[t.length-1],n=t[t.length-2]||e,r=n.children.findIndex((e=>e===o));if(r>0)return{prev:n.children[r-1]};if(n!==e)return{parent:n}}return{}}function u(e,t){if(t&&t.length>0){const o=t[t.length-1],n=t[t.length-2]||e,r=n.children.findIndex((e=>e===o));return r<n.children.length-1?{next:n.children[r+1]}:u(e,t.slice(0,t.length-1))}return{}}function p(e,t){if(t&&t.length>0){const o=t[t.length-1],n=t[t.length-2]||e,r=n.children.findIndex((e=>e===o));if(r>0){return{prev:m(n.children[r-1])}}if(n!==e)return{parent:n}}return{}}function m(e){for(;e.children.length>0;)e=e.children[e.children.length-1];return e}function g(e,t){if(t&&t.length>0){const o=t[t.length-1];if(o.children.length>0){return{next:o.children[0]}}const{next:n}=u(e,t);return{next:n}}return{}}function f(e){if(e&&e.length>0){const t=e[e.length-1];if(t.children.length>0)return t.children[0]}}function v(e){if(e&&e.length>1)return e[e.length-2]}function h(e,t){if(0===e.length||0===t.length)return-1;for(let o=Math.min(e.length,t.length)-1;o>-1;o--){if(e[o]===t[o])return o}return-1}},709219:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isActive:!1}}cloneState(){return o(496603).o8(this.state)}}const r=new n},711319:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1,type:"text"}}}const r=new n},711771:(e,t,o)=>{o.d(t,{f:()=>n});const n=new(o(645873).O2)("minisearch",(async()=>await o.e(68070).then(o.bind(o,910513))))},712030:(e,t,o)=>{o.d(t,{FN:()=>s,Ol:()=>l,bb:()=>c,t4:()=>d});var n=()=>o(484714),r=()=>o(56366),i=()=>o(634201),a=()=>o(351360);function s(e){const{device:t}=e;return t.isAndroid&&t.browserVersion.startsWith("73.")&&t.browserName.startsWith("Chrome")||t.isAndroid?"google":t.isWindows||t.isLinux?"twitter":"raw"}function l(){const e=(0,n().v3)();return(0,r().K8)((()=>s(e)),[e])}function c(){var e;return null===(e=a().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.emoji_picker_skin_tone}function d(e){return void 0===c()?e:(0,i().Fk)(e)}},712287:(e,t,o)=>{o.d(t,{F:()=>p,j:()=>u});var n=()=>o(519831),r=()=>o(534177),i=()=>o(869562),a=()=>o(737230),s=()=>o(566009),l=()=>o(154807),c=()=>o(455994),d=()=>o(204521);function u(e){m({...e,state:"open"})}function p(e){m({...e,state:"closed"})}function m(e){const{environment:t,layoutStore:o,from:u,state:p,panelLocation:m,preventPeekWidthResize:g}=e,f=null==o?void 0:o.getParentStore();let v;if((null==f?void 0:f.table)===n().Vl&&(v=f.id),"open"===p?(0,d().t0)({environment:t,collectionId:v,layoutId:null==o?void 0:o.id}):"closed"===p?(0,d().G)({environment:t,collectionId:v,layoutId:null==o?void 0:o.id}):(0,r().HB)(p),"sidebar"!==c().A.getPanelState(m).displayStyle)if("popup"!==c().A.getPanelState(m).displayStyle)if("static_sidebar"!==c().A.getPanelState(m).displayStyle);else if("open"===p){const{clampedWidth:e,hadEffect:o}=(0,l().mQ)("openDetailsSidebar",g);c().A.setSidebarIncreasedSizeOfPeekView(o),o?(i().setPeekWidth({width:e,environment:t,preventPersistWidth:!0}),window.requestAnimationFrame((()=>{c().A.setOpen(m)}))):c().A.setOpen(m)}else{if(c().A.setClosed(m),c().A.state.detailsSidebarIncreasedSizeOfPeekView){const{clampedWidth:e}=(0,l().mQ)("closeDetailsSidebar");i().setPeekWidth({width:e,environment:t})}c().A.setSidebarIncreasedSizeOfPeekView(!1)}else"open"===p?(s().A.setState({open:!0}),c().A.setOpen(m)):(s().A.setState({open:!1}),c().A.setClosed(m));else"open"===p?(i().setUpdateSidebarTab(a().tF.Info),c().A.setOpen(m),i().setUpdateExpand({environment:t,isExpanded:!0,from:u,saveDetailsSidebarPreference:!1})):(c().A.setClosed(m),i().setUpdateExpand({environment:t,isExpanded:!1,from:u,saveDetailsSidebarPreference:!1}))}},712505:(e,t,o)=>{o.r(t),o.d(t,{CenterPeekModeOuterWidth:()=>s,PeekModeOuterPadding:()=>a,PeekModePadding:()=>i,SIDEPEEK_INITIAL_MAX_WIDTH:()=>u,SIDEPEEK_MIN_WIDTH:()=>m,SIDEPEEK_NO_COLUMN_WIDTH:()=>p,default:()=>f,getPeekModeFromCollectionPeekModeFormat:()=>c,getPeekModeFromUrlParam:()=>l,getUrlParamFromPeekMode:()=>d});var n=()=>o(496506),r=()=>o(868840);const i={horizontal:{center_peek:126,side_peek:76}},a=72,s=708+2*i.horizontal[r().O];function l(e){switch(e){case"s":return r().A;case"c":return r().O}}function c(e){switch(e){case"side_peek":return r().A;case"center_peek":return r().O}}function d(e){switch(e){case r().A:return"s";case r().O:return"c"}}const u=980,p=640,m=564;class g extends(()=>o(757695))().default{constructor(){super(...arguments),this.isSidePeekOpeningStore=new(n().default)((()=>this.state.open&&this.isSidePeekOpen()&&this.state.isOpening),{debugName:"isSidePeekOpening"}),this.isSidePeekClosingStore=new(n().default)((()=>this.state.open&&this.state.isClosing),{debugName:"isSidePeekClosing"}),this.peekTargetStore=new(n().default)((()=>this.state.open?this.state.targetStore:void 0),{debugName:"peekTarget"})}getInitialState(){return{open:!1,mode:r().O,preferredSidePeekWidth:0,savedSidebarExpandedStoreState:!1,topHoverAreaEntered:!1}}getCollectionModeFormat(){switch(this.state.mode){case r().A:return"side_peek";case r().O:return"center_peek"}}getPeekMode(){return this.state.open?this.state.mode:r().A}getPeekModeWidth(e){return this.isCenterPeekOpen()?s:this.getSidePeekWidth(e)}getSidePeekWidth(e){const t=Math.min(e/2,u),o=this.state.preferredSidePeekWidth||t,n=Math.max(o,m);return Math.min(n,e)}setSidePeekWidth(e,t){const o=Math.min(Math.max(e,m),t);this.setState({...this.state,preferredSidePeekWidth:o})}isCenterPeekOpen(){return this.state.open&&this.state.mode===r().O}isSidePeekOpen(){return this.state.open&&this.state.mode===r().A&&!this.state.isClosing}setSidebarExpandedStoreState(e){this.setState({...this.state,savedSidebarExpandedStoreState:e})}setTopHoverAreaEntered(e){this.setState({...this.state,topHoverAreaEntered:e})}}const f=new g},713205:(e,t,o)=>{o.d(t,{A:()=>c,b:()=>s});var n=()=>o(757695),r=()=>o(351360);class i extends n().default{getInitialState(){return{stores:{}}}getStore(e){let{spaceId:t,userId:n,version:r}=e;const i=function(e){let{spaceId:t,userId:o,version:n}=e;return`searchFrecency:${t}:${o}:${n??0}`}({spaceId:t,userId:n,version:r});return this.instanceState.stores[t]||(s()?this.instanceState.stores[t]=new(o(178624).R)({key:i,namespace:o(419494).Bq,important:!0,trackingType:"necessary"}):this.instanceState.stores[t]=new a),this.instanceState.stores[t]}eraseStore_TEST_ONLY(e){let{spaceId:t,userId:o,version:n}=e;this.getStore({spaceId:t,userId:o,version:n}).setState(void 0),delete this.instanceState.stores[t]}}class a extends n().default{getInitialState(){}}function s(){var e;const t=l.state.shouldPersist;return void 0!==t?t:!(null===(e=r().default.getState().currentSpaceStore)||void 0===e||!e.environment.defaultRecordCache.persistedRecordCache)}const l=new i;(0,o(604341).exposeDebugValue)("globalSearchFrecencyStore",l);const c=l},713972:(e,t,o)=>{o.d(t,{EV:()=>l,KH:()=>a,Ll:()=>i,Xs:()=>p,a2:()=>u,gR:()=>g,nx:()=>d,vq:()=>s,vr:()=>m,zn:()=>c});o(944114);var n=()=>o(634201),r=()=>o(496603);function i(e){try{return Boolean(e&&void 0!==e.nodeType)}catch(t){return!1}}function a(e){return i(e)&&e.nodeType===Node.TEXT_NODE}function s(e){return i(e)&&e.nodeType===Node.ELEMENT_NODE}function l(e,t){for(;i(e)&&!t(e);)e=e.parentNode;return e}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(i(e)){for(const o of n().PE(e.childNodes))a(o)?t.push(o):o.childNodes&&c(o,t);return t}return[]}function d(e,t){return i(e)&&i(t)?r().SL(e.childNodes,(e=>e===t)):-1}const u=function(){if("undefined"==typeof window)return!0;if(window.InputEvent&&"function"==typeof window.InputEvent.prototype.getTargetRanges)return!0;const e=window.document.createElement("div");return e.contentEditable="true","onbeforeinput"in e}();function p(e){!u&&e.preventDefault&&e.preventDefault()}function m(e){return"inputType"in e}function g(e,t){return e!==t&&e.contains(t)}},714818:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},715256:(e,t,o)=>{o.d(t,{A2:()=>f,CJ:()=>F,GI:()=>B,Gn:()=>O,Hb:()=>E,Nh:()=>v,P7:()=>g,S3:()=>U,TQ:()=>s,T_:()=>A,XK:()=>k,XZ:()=>L,bl:()=>I,hH:()=>l,jy:()=>a,ky:()=>b,lm:()=>R,nw:()=>y,o7:()=>N,pF:()=>u,sE:()=>x,zD:()=>p});o(16280),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577);var n=()=>o(534177),r=()=>o(720665);const i={indexeddb_graceful_fallback_to_in_memory_queue:["on"],collections_page_chunk_cvb_prefetch:["on"]},a=[...(0,n().uv)(i)],s=["ios_enable_prefetching","multi_cell_aware_apis","mobile_app_launch_blank_page","download_for_offline","refetch_offline_pages","simulate_offline","offline_autosync","single_electron_service_worker_registration","wasm_sqlite_alternate_library","opfs_recordmap_cache"],l={"search-vectors":["log-norm","min-max-norm","cohere-snippets"],"search-no-local-blending":["on"],"search-debug-only-no-recent-boosting":["on"],"search-shorten-inactive-timer":["0","10","30","60","90"],"search-debug-only-force-random-sample":["on"],"search-debug-force-log-signals":["on"],"search-more-recent-pages-in-local":["lazy-100","lazy-200","lazy-500","lazy-1000"],"search-new-local-recall-v2":["v1","v2","v3","v4"],"search-query-expansion":["prefix-completion","word-splitting","spell-correction","all"],"search-debug-force-no-rerank":["on","always-rerank"],"vector-naive-ranker":["on"],"search-mention-model-feature-logging":["on"],"search-mentions-models":["v1","v2","dev"],"search-no-neg-boost-relation-search":["on"],"search-negative-boost-only-quickfind":["on"],"search-negative-boost-tuning":["0.01","0.1","0.25","0.5"],"search-no-bot-downrank":["on"],"search-use-local-reranker-layered":["on"],"search-include-all-local-sources":["on"],"search-local-edited-pages-max":["3","8","15"],"search-local-sim-users-edited-pages-max":["3","8","15"],search_supplement_possible_ancestors:["on"],search_local_ranking_new_frecency_and_score:["search_frecency_store","search_frecency_store_new_recency_score"],search_downrank_sync_bots:["jira-10","jira-100"],search_refresh_user_signals:["on"],search_quickfind_prefetch:["on"],search_title_only_retrieval_mini_find:["locale","locale_and_slop_2_add_operator_and","locale_and_slop_2_add_operator_and_mm","locale_and_slop_2_only_operator_and"],search_mm_retrieval_mini_find:["on"],search_pathtext_retrieval_mini_find:["on"],search_mini_find_use_second_pass_ranker:["on"]},c={simplified_email_subject_line:["on"],mobile_push_notification_reply_action:["on"],inbox_2_0:["internal_prototype_time_grouping"],access_request_email_reminder:["on"],posts_prototype:["on"],feed_collection_view:["on"],inbox_activity_split:["on"]},d={adoption_hide_features_v1:["slash_menu","teamspace","inbox","inbox_and_teamspace"],adoption_import_push:["on"],adoption_import_entry_point:["db_create_empty_state","nudge_on_large_paste","nudge_on_block_create"],adoption_use_case__space_remove_slash:["on"],ai_builder_onboarding_flow:["on"]},u=["unified_home","separate_home_and_ai","separate_home_and_ai_with_home_module"],p=["dropdown"],m={database_ai_summary_suggestion:["on"],qna_chunk_size:["small","180","240","360","480"],"025m_ai_launch_entrypoints":["corner","writer"],ai_collection_view_entrypoint:["none","button","search_input"],ai_signup_redirect_to_writer:["writer"],deep_find_append_keywords:["on"],ai_sidebar_v2:u,ai_chat_mode_selector:p},g=["assistant_0.25_with_marketing","assistant_0.3","development","exploratory"];function f(e){const{mode:t,currentMode:o}=e,n=["control",...g];return n.indexOf(t)<=n.indexOf(o)}const v="assistant_0.25_with_marketing",h={assistant_variant:g,ai_search_query_expansion:["single_stack","double_stack"],ai_actions_on_paste_experiment:["on"]},_={ai_qna_alternative_embeddings:["cohere"],qna_abandoned_search_reminders:["on"],qna_show_assistant_origin_input:["on"],qna_show_large_reminders:["on"],qna_show_page_suggested_questions:["on"],qna_vectorless_enabled:["last_edited_200_pages","es_query_n_last_edited_200_pages","es_query_n_last_edited_k_pages"],assistant_show_summarize_this_page_reminder:["on"]},b=["deep_dive","quick_find","end_to_end"];function y(e){const{mode:t,currentMode:o}=e,n=["control",...b];return n.indexOf(t)<=n.indexOf(o)}const S={unified_find_variant:b,deepfind_querygen_noquestion:["on"]},w={...i,...l,grant_access_via_mentions:["on"],share_menu_searchable_toggle:["on"],share_menu_cleanup_experiment_v2:["on"],extended_user_profiles:["hover_only","hover_and_full"],...c,import_google_contacts:["on"],workflow_template_customization_onboarding:["replace_app_templates_with_workflow_templates","onboarding_customize_workflow_templates","onboarding_land_and_customize_workflow_templates"],contextualized_onboarding_education_flow:["on"],mobile_friendly_onboarding_templates_personal_non_en:["on"],cro_remove_google_onetap_from_signup_page:["on"],onboarding_create_workflow_templates:["generic_workflow_templates","persona_specific_workflow_templates"],improve_onboarding_profile_step:["on"],improve_desktop_workspace_create_step:["auto_name_workspace","workspace_preview","prefilled_workspace_preview"],onboarding_split_team_survey:["on"],remove_onboarding_invite_step:["on"],signup_visit_aa_test:["on"],personal_student_usecase_preview:["on"],sites_disable_banner:["on"],mab_refresh_personalization:["v1","v2"],mab_personalized_section:["v1","v2"],mobile_lightweight_editor_prompt:["on"],mobile_getting_started:["v1","v2","v3"],mobile_onboarding_educational_refresh:["v1","v2","v3"],in_app_contact_sales_cta_billing:["on"],beam:["on"],block_management:["on"],contact_sales_promo_v2:["on"],formula_assistant:["on"],guest_limit_policy:["on"],krw_prices:["on"],jpy_prices:["on"],lairt:["on"],largesse:["on"],lic:["lic_25","lic_50"],mobile_web_subscriptions:["on"],mp_lairt:["on"],new_year_2025:["on"],prices_test_country:["US","DE","GB","JP","KR","CH"],quick_workspace_creation:["on"],settings_refresh_2025:["on"],subscription_elements:["payment_and_address","payment"],onboarding_trial_offer_step:["plan_cards","feature_list"],marketplace_3p_link_treatment:["on"],marketplace_checkout_move_tc_checkbox:["on"],marketplace_refund_improvements:["on"],inapp_marketplace_home_page_remove_editorials:["remove_spotlight_editorials","remove_evergreen_editorials","remove_both_editorials"],inapp_marketplace_home_module_comparison_wave_1:["featured_categories_vs_spotlight_editorials","featured_categories_vs_featured_templates","featured_categories_vs_featured_collections","featured_categories_vs_evergreen_editorials","featured_categories_vs_surfaced_collection","featured_categories_vs_featured_creators","spotlight_editorials_vs_featured_templates"],inapp_marketplace_home_module_comparison_wave_2:["spotlight_editorials_vs_featured_collections","spotlight_editorials_vs_evergreen_editorials","spotlight_editorials_vs_surfaced_collection","spotlight_editorials_vs_featured_creators","featured_templates_vs_featured_collections","featured_templates_vs_evergreen_editorials","featured_templates_vs_surfaced_collection"],inapp_marketplace_home_module_comparison_wave_3:["featured_templates_vs_featured_creators","featured_collections_vs_evergreen_editorials","featured_collections_vs_surfaced_collection","featured_collections_vs_featured_creators","evergreen_editorials_vs_surfaced_collection","evergreen_editorials_vs_featured_creators","surfaced_collection_vs_featured_creators"],...d,asana_to_single_team_space:["on"],asana_import_by_batch:["on"],csv_adaptiveschema:["on"],feature_settings_experiment:["on"],packaging_db_empty_states:["on"],packaging_m2_entry_point:["generic","personalized"],packaging_m3_holdout:["treatment"],packaging_ai_setup_generator_in_new_user_onboarding:["modal_after_onboarding"],packaging_open_modal_private_section_plus_button:["on"],...m,public_api_cache_collection_experiments:["on"],...S,ai_co_editing_mode:["crdt"],sharing_logged_out_view_awtl:["banner","sidebar"],sharing_collaboration_sidebar_guest_aggregation:["shared_document_picker","guest_workspace_submenu","external_pages_sidebar"],adoption_sharing_aa_test:["on"],awtl_sidebar_logged_in_view_no_workspace:["control","workspace","template","page","private"],zendesk:["on"],highlight_legacy_transclusions:["on"],iframely_switch:["on"],request_membership:["on"],parallel_confluence_importer:["on"],parallel_confluence_importer_via_api:["on"],special_case_confluence_file_size:["on"],special_case_pdf_file_size:["on"],confluence_dynamic_batch_size_temp:["on"],confluence_server_allow_requests:["on"],confluence_logs:["on"],confluence_api_v2:["on"],confluence_search_api:["on"],link_preview_resizing_api:["on"],enable_google_drive_external_integration:["on"],show_instruction_on_auth_popup_blocked:["on"],teamspace_guests:["on"],monday_importer:["on"],pdf_importer:["on"],migrate_confluence_into_teamspace:["on"],generic_importer:["on"],slash_command_import:["on"],special_case_generic_file_size:["on"],android_3rd_party_login_with_external_browser:["on"],ios_3rd_party_login_with_external_browser:["on"],block_limit_delay:["on"],prioritize_slash_menu_block_placeholder:["on"],slash_menu_tooltip:["on"],wiki_education_convert_modal:["bottom_right"],remove_updates_topbar_button_v2:["on"],avoid_empty_eoip_creation_unfurl_collection:["on"],jira_import_and_sync:["on"],jira_sync_data_center_integration:["on"],...h,..._,indexeddb_graceful_fallback_to_in_memory_queue:["on"],allow_auth_with_app_browser_for_mobile:["on"],property_creation_tooltips_exp:["on"],marketing_mwn_api_kill_switch:["on"],dynamic_social_preview_image:["on"],dictation_experiment_v2:["on"],export_attachments_with_page:["on"],search_surfaces_relation_search:["on"],search_surfaces_collection_search:["on"],marketing_cookie_sync_experiment_signup_login:["treatment","check_query_param"],sites_server_side_page_chunk_reverse:["on"],members_tab_remove_users_in_role_dropdown:["on"]};function k(e){return Boolean(w[e])}const I=new Set([]),A=[...(0,n().uv)(w)],x=[...A].sort(),C=["allow_mobile_home_redirect","sidebar_hover_expansion_v3","sidebar_pages_hide_toggles","sidebar_home_dev_gate","home_welcome_animation","home_cover_photo","home_recents_caching","update_user_space_access_kill_switch","page_verification","page_verification_server","page_verification_transaction_validation","page_verification_upsell","page_verification_new_badge","geo_point_property","debug_user_info_quick_copy","sidebar_add_new_pages_to_bottom","horizon_1_sidebar_panel_rollout","persisted_secondary_sidebar_state","share_menu_cleanup","share_menu_cleanup_ga"],T=["ai_template_filling_use_new_ai_blocks","ai_full_page_welcome_state","attachment_show_ask_ai_in_images","assistant-labeler-mode","qna-reranker-skipped","experimental-cohere-only-for-personal-workspace","assistant-teacher-mode","rerank_slack_only_by_cohere","slack_qna_notification_tooltip_enabled","assistant_chat_with_pdf_use_images","claude-sonnet-rollout","claude-sonnet-3.7-rollout","anthropic_explicit_prompt_caching","load-web-page-rollout","find_related_content","compute_related_content","assistant_0point25_ux_rollout","zero_retention_routing_enabled","enable_slackbot_qna","enable_slackbot_qna_by_space","ai_assistant_helpdocs_scoped_search","assistant_enable_attachment_upload","collection_view_ai_button","should_always_trace_run_assistant","assistant_basic_writer_mode","qna_enable_team_archive_filter","marketing_025_rollout","use_sonnet_for_run_assistant_routing","workflows","workflows_ui","run_assistant_allow_dev_only_args","use-repos-filter-for-github-search","skip-pr-comment-hydration","inference_transcript","full_page_ai","merge-lexical-and-semantic-results","full_page_translate","skip_verified_feature_from_qna_reranker","ai_feedback_logging_deny_list","assistant_should_use_fake_page_to_render_blocks","ai_unstable_message","ai_connectors_turbopuffer_dark_reads","ai_workflows_monaco_code_editor","jira_vector_search_fallback_query","ai_disable_writer_auto_follow","ai_slack_connector_option_on_paste","workflows_debug_tools","workflows_simple_mode","workflows_custom_view_type","sidebar_inference_transcripts","workflows_mail_module_available","workflows_zendesk_module_available","workflows_active_development_modules_available","warm_vector_db_cache_user_member_count","ai_display_leap_settings_for_sales_assisted_workspace","ai_research_mode_unified_find","ai_research_mode_minisearch","ai_research_mode_web_search","ai_research_mode_multiturn","ai_research_mode_welcome_page_ai","should_approximate_token_counts","rerank_use_cohere_v3_5","rerank_use_bge","use_gte_for_shorten_page_text","jira_ai_connector_announcement_modal","ai_logging_use_all_regions","shorten_page_text_use_approximate","disable_slack_message_features_from_s3","slack_channel_features_cache","ai_corner_chat_welcome_state","ai_yassified_writer","app_builder_notifications_module"],M=["show_limited_qna_label","enable_limited_qna","limited_qna_dark_read"],P=["embeddings-enabled-for-spaceid","ai_connector_warm_up_vector_db_cache"],B=["adoption_opt_templates_out_of_block_limit","template_creator_blocklist","marketplace_customer_blocklist","public_api_deep_copy_transclusion_containers",...s,"should_scan_files_for_csam","replace_local_overrides_with_statsig","forms_max_selection_custom_options","retry_permanently_delete_tree_kill_switch","tablet_refresh_gate","tablet_refresh_template_pills_gate","disable_backfill_transclusions_and_aliases","state_management_in_new_monday_importer","email_confirm_tid_redirect","desktop_native_redirect_tid","populate_monday_comments_as_notion_comments","allow_cut_copy_comment","forms_submission_permissions","redirect_dot_so_to_dot_com","add_tid_on_dot_com_redirect","new_checkbox_design_enabled","dot_com_cookie_sync","notionscript","db_ux_inline_db","spreadsheet_prototype","validate_quasi_alive_block_enabled","should_create_teamspace_in_zip_importer","polyglot","allow_dead_space_views_when_joining_space","throw_on_changing_unmanaged_scim_user","log_all_headers_for_unknown_scim_idp","client_deprecate_chunk_number_enabled","log_saml_response_on_error","highlight_quasi_alive_blocks_enabled","organization_console_enabled","organization_console_ga_enabled","organization_console_new_data_compliance_view_enabled","legal_holds_enabled","organization_console_group_single_view_modal","organization_onboarding_enabled_for_space","organization_is_source_of_truth","ban_copy_snapshot_data_enabled","debug_analytics","never_select_title_on_select_all","connected_relation","log_traces_to_splunk","log_space_traces_to_splunk","block_menu_shortcut_fix","scim_log_postgres_in_place_updates","remove_user_invited_group_notifications","public_api_dev_mode","enabled_bev_default_audience_filter","sprig","ai_multi_level_undo","uploads_retry_all_immediately","prevent_saml_guest_login","fix_legacy_transclusions_on_duplicate","client-performance-profiler","react_18_concurrent_rendering",...C,"slack_notif_post_as_user","enable_notifications_processor","track_collaborative_page_view","updates_ai","posts_feed_on_home","posts_feed_include_unjoined_teams","posts_unread_badge","self_queuing_reminder_tasks","comment_sidebar_for_you","inbox_page_grouping","enable_total_visitor_count","delete_follows_on_permanent_user_deletion","reaction_notification","deterministic_first_page_comment_id","posts_discover_tab","animated_emoji_badge","team_home_about_proto","allow_public_page_access_request","external_access_request_rate_limiting","onboarding_templates_from_dynamic_configs","contextualized_onboarding_debug_label","onboarding_split_intent_question","enable_add_notion_face_in_setting","sites_use_homepage_url_without_slugs","onboarding_show_progress_bar","onboarding_profile_enable_notion_faces","contextualized_onboarding_full_cutover","callouts_omnimodal","mwn_feature_modal","return_zero_in_app_messages","callout_show_dynamic_messages","faces_xsell_sidebar","student_offer_jan_2025_sidebar","enable_reorder_login_options","enable_write_survey_data_optimization","transcend_inapp_privcenter","skip_mobile_team_onboarding_workspace_create","workflow_templates_prototype","workflow_templates_settings_dev","workflow_templates_builder","packaging_include_next_templates","collection_view_module","packaging_page_linking","packaging_page_linking_mobile","packaging_property_visibility_label","side_peek_transition_improvements","relation_two_way_limit_of_1_add_relation_confirmation_dialog","workflow_container","packaging_m3.1","packaging_m3.3","workflow_templates_modal_in_new_page_pills","packaging_prompt_pills","remove_relations_using_backlinks","packaging_use_embeddings_for_icon_selection","subitems_drag_drop_improvements","intelligent_collections_sort_modal","collection_groups_round_date_group_reducers","collection_client_log_looping_remote_request","collection_service_high_priority_space","disable_rectangular_selection_for_database_horizontal_scroll","collections_enterprise_workspaces","typed_db_migration","charts_next","charts_drilldown","collections_property_type_change_rename_group","collections_cached_relation_search","collection_view_update_counter","collections_column_virtualization","collections_xws_linked_view_fix","collections_xws","relations_show_deleted","relations_show_invalid_collection","relations_show_no_access","collections_system_db","experimental_computed_store_defer_debounce","collection_group_reducer_visible","drain_collection_queue","forms_conditional_logic","db_ux_empty_states","expand_sub_items_hotkey","collections_accessible_quick_action_buttons","improved_progress_bar","full_access_for_created_collection_pages","collections_formula_load_record_model_permission_changes","drag_respects_relation_limits","improved_drag_and_fill","duplicate_existing_view_store","collection_store_deep_equal_schema","collection_mobile_load_limits","db_ux_simplification","db_ux_simplification_next","db_ux_mobile","collections_virtualize_grouped_tables","collections_dedupe_dependency_loading","webhooks_beta","public_api_developer_survey","e_discovery","add_comments_on_blocks","install_dlp_integrations","webhooks_enable_nightfall","inactive_webhook_subscription_ui","public_api_bot_token_to_space","advanced_security_in_enterprise","apply_offer_migration","apply_reverse_trial_key","deny_multiplayer_personal_plan_upgrade","guest_limit_debug_ui","native_invoice_payment","nip_demo_code","sepa_debit","test_clocks","pshwm_use_effective_time_to_get_spaces_with_smus","packaging_changes_05_13_2025","timed_trial_task_runner_enabled","people_tab_date_added_column","kr_card_payment_method","russian_sanctions_banner_enabled","russian_sanctions_sales_assisted_banner_enabled","resurrection_offer","uncollectible_experience_enabled","post_upgrade_modal","in_app_request_upgrades","billing_data_backfill_migration_is_active","handle_stripe_subscription_updates_enabled","onboarding_trial_checkout_redesign","business_trials_2025","add_today_button_to_db_calendar","enable_localized_templates","enable_template_access_restriction","self_serve_localization_backend","self_serve_localization_frontend","self_serve_localization_flowdash","marketplace_echo_webhook_log","marketplace_payouts","track_dropped_installation_imprints","enable_queue_based_invoice_cleanup","marketplace_review_creator_response","marketplace_review_creator_response_creator_profile","template_listing_translation_use_phrase","template_listing_translate","template_algolia_sync_job","template_contentful_sync_job","template_approved_from_customerio","template_custom_email_snippet","marketplace_analytics_filters","marketplace_refund_webhook","marketplace_analytics_templates_chart","duplicate_block_await_post_submit_transaction","disable_template_screenshot_generation","duplicate_block_skip_free_chart_post_submit_transaction","enable_server_backed_local_duplicate_for_collection_template_picker","enable_local_duplication_for_non_marketplace_templates","enable_aggressive_screenshot_tool_awaiting","marketplace_buyer_profile_download_invoice","read_marketplace_listing_id_from_block_format","marketplace_balance_log_writes","marketplace_balance_log_assertions","csv_schema_typed_merge","csv_validation_errors_fix","csv_relation_support","csv_twoway_relation_support","card_details_unified","zip_importer_enabled","csvimport_force_datadog_trace_enabled","asana-new-post-import","monday_v2_enabled","monday_v2_page_mapping_enabled","monday_v2_error_table_enabled","show_crdt_warnings","display_crdt_block_client","desktop_close_confirmation_dialog","automation_button_send_gmail_notification","automation_updated_error_states","automation_load_collection_view_with_environment","automation_new_last_edited_by_transaction_validations","automation_slack_fast_processor","formulas_batch_generator_changes","automation_relative_date_trigger","sites_custom_hostnames_skip_validation","sites_split_publish_actions","sites_custom_hostnames_no_require_subdomain","sites_apex_domain_aware_validation_info","enable_public_qna","enable_public_qna_sites","enable_embeddable_sites","enable_new_public_domain_delete_flow","enable_embeddable_sites_for_space","sites_deprecate_edit_and_comment","sites_deprecate_edit_and_comment_top_bar","cron_connected_relation","notion_calendar_launch_modal","calendar_home_tile_open_in_zoom_app","calendar_home_tile_caching","calendar_auth_mmvp","prevent_edits_trash_server","prevent_edits_trash_public_api","deleted_permission_validation","enable_logging_for_prevent_trash_edits_validation","cdrr_deleted_from_trash_view","cdrr_ignore_additional_parent_check_for_restore_block",...T,"typed_move_to_improved_search","search_index_collection_ranking_features","search_quickfind_only_show_title_matches","quick_find_highlights_enabled","record_mention_indexing_enabled","record_mention_backfill",...P,...M,"ios_clear_selection_auto_dismiss_keyboard","mobile_clear_selection_on_date_mention_menu_change_kill_switch","delete_database_from_view_settings","mobile_assistant_prevent_clear_selection","mobile_lightbox_v2","mobile_open_links_in_external_browser","mobile_show_page_shimmer","mobile_skip_onboarding_timeout","mobile_keep_template_gallery_open","mab_debugging","mobile_move_to_restore_selection_v2","mobile_native_file_upload","new_page_navigation_fix","android_ei_gboard_delete_over_selection_fix","trash_dont_need_current_page","mobile_user_activation_template_gallery_refresh_gate","transaction-space-id-override","no_new_page_placeholder_text_gate","mobile_topbar_redesign","can_see_callout_modal_test","ui_guest_disable_changes","space_encoded_bot_token","allow_space_member_to_export_analytics","space_audit_log_s3_region_map","allow_customize_integration_headers","force_capture_public_api_datadog_trace","use_bot_token_checksum","enable_notion_mail_settings_toggle","bypass_webhook_url_validation","use_space_user_recovery_for_recently_left","compare_recoverable_space_user_content_implementations","share_menu_role_select_callout","share_menu_redesign_callout","allow_transfer_content_for_extended_user_left_time","audit_log_space_permission_groups_enable","kill_retry_scheduled_deletion_tasks","change_cdrr_handling","settings_console_edge_cache","admin_content_search_no_hydrate_x_space","delete_pages_for_deleted_spaces","workspace_analytics_no_x_space","multi_cell_sync_record_values","multi_cell_backlinks","multi_cell_aware_apis","multi_cell_cron_api","multi_cell_check_file_permission","multi_cell_recursivelyindexrecords","multi_cell_get_signed_urls","fetch_backlinks_after_page_load","sync_record_values_fanout","search_filter_by_space_id","enable_public_content_scanning","ai_public_sites_scanning","cove_send_manual_content_reports","cove_send_automated_content_reports","cove_allow_admin_actions","public_api_fulltext_search_enabled","integration_webhooks","self_serve_integration_webhooks","disable_integration_webhook_aggregation","disable_integration_webhook_slack_messages","show_integration_webhooks_callout","file_upload_public_api","selectable_word_count","ai_co_editing","imagerenderer_disable_loading_lazy","enable_selectable_fc","simple_table_buffer","crdt_safe_home_page","track_block_actions","enable_error_boundary_debugger","sharing_anyone_with_the_link","sharing_dark_write_is_site","migrate_current_user_space_group_membership_store_multi_user_space","deprecate_user_teams_in_current_space_store","block_attribution","desktop_app_login_with_email_redirect","desktop_app_signup_hide_passcode","ios_app_signup_hide_passcode","user_data_consent_admin_bypass","enable_deleted_page_indicator","forethought","download_for_offline","simulate_offline","offline_sync_traverse_toggle_blocks","offline_clear_cache","offline_sync_fallback_to_db_on_page_cache_miss","defer_remote_version_update_for_pending_tx","survey_data_writes","adding_extra_logs_in_eoi_retry_fg","allow_duplicate_scim_groups","update_formatted_name_on_scim_patch_user","saml_throw_on_temporary_password_use_case_mismatch","saml_enforced_disallow_send_temporary_password","audit_log_aes_event_read","audit_log_permanently_deleted_filter_enable","audit_log_event_name_column","deprecate_chunk_number_enabled","drawing_block","slide_block","log_identify_cross_domain_device_ids","disable_ai_big_red_button","ai_data_sharing","convert_cut_paste_to_move","page_title_in_reranker","enable_giphy_feature_gate","admin_content_search_only_search_titles","legacy_slack_notifications","mobile_fix_ai_message_click","slack_connected_relation","zendesk_ai_enabled","use_iframely_cards","enable_link_mentions","enable_link_mention_hover","new_bookmark","new_hover_designs_lp","transcript_feedback_button","use_new_import_notification","scim_patch_race_condition_resistant_operations","scim_use_postgres_in_place_queries","message_store_client_send_request_metric_enabled","audio_processor_client_send_request_metric_enabled","enable_organization_domain_claim","support_synced_database_automations","mobile_bridge_performance_logging","ai_source_picker","client_http_gzip","is_visibility_enabled_for_db_sync","disable_poll_jobs_for_collection_entities","export_new_structure","embed_block_fallback","marketing_mwn_api_kill_switch","marketing_mwn_api_paid_kill_switch","marketo_form_kill_switch","submit_marketo_form_upgrade","enable_guest_export","collections_view_specific_client_mode_enabled","enable_vector_search_in_autotag","dark_fetch_autotag","enable_ai_suggested_properties","typed_move_to_improved_default_results","hide_orphan_blocks","wiki_perf_improvement_local_enabled","show_keep_existing_guests_modal","export_puppeteer_upgrade_v24","meeting_notes_transcript_consumer_setup","meeting_notes_transcript_new_consumer","meeting_notes_formatting_fix",...T,...M,"search_use_local_search_cache","deep_find_enable_query_gen","deep_find_enable_3p_sources","deep_find_enable_universal_blending","deep_find_enable_request_tracing","deep_find_render_and_hydrate_notion_pages","deep_find_use_query_gen_for_notion_search","deep_find_append_keywords_to_notion_search","deep_find_should_show_streaming_ux","unified_find_debug_tools","unified_find_cache_query_gen","unified_find_use_inferencetranscript_deep_find",...P,"people_profile_popup","send_student_form_error_messages","disable_storage_manager_estimate","toc_nested_headings","mention_menu_page_headings","derived_property_sync_processor","enable_transcript_tab","mobile_native_external_link_fix","localized_parse_number","fix_quasi_alive_block_on_read_enabled","sync_session_cookie_verification","settings_console_analytics","settings_console_content_search","use_hierarchy_in_zip_importer","selectable_or_drop_target_listener_functional_component","audit_log_guest_membership_request","is_evernote_authpopup_closing_fix_enabled","webclipper_multicell","enable_oauth_from_desktop_ux_v2","should_extract_media_from_html","csv_export_in_user_timezone","slack_token_specification","enable_server_integrations_proxy","enable_custom_siem_integration","social_media_preview_image_render_page_metadata","enable_list_users_by_email_addresses","low_guest_limit","notion_ai_assistant_continuous_eval_sample_rate","partitioned_universal_importer","input_padding","block_reactions","article_extractor_enable","google_doc_importer","quip_importer","deterministic_ids_in_quip_importer","enforce_database_tables_quip_importer","page_permissions_api","ai_indexing_allowlist","image_cropping","image_cropping_aspect_ratios","preload_cutaway","comic_sans","is_third_party_qna_enabled","qna-default-lookback-all-time","slack_grid_ai_connector","code_block_preserve_indent","google_drive_qna_ingestion","google_drive_qna_initial_sync_disabled","ai_connector_discoverability","jira_qna_ingestion","github_qna","sharepoint_qna","universal_qna_gdrive_skip_hydration","qna_extra_long_recall","include_academy_content_and_guides_in_ai_help_center_search","slack_multi_team_ingestion_enabled","ingestion_mapped_parent_spaces","ingestion_mapped_child_spaces","docs_clipboard_imagedata","prefer_high_level_operations","mobile_quick_capture_icons_redesign","search_notion_calendar_ltr_reranking_model","enable_github_aisummary_linkback","github_activity_comments","github_magic_words","show_github_connected_property_settings","enable_notion_activity_notifications_in_slack","slack_db_notification_default_props_untyped_dbs","slack_db_notification_default_properties","slack_bot_enable_slack_oauth_v2","markdown_support_for_slack","enable_extra_slack_bot_logs","salesforce_connected_relation","salesforce_page_view_resync","salesforce_connected_relation_database_actions_enabled","filter_orphaned_external_instance_pointers","bypass_space_user_check_for_external_object_update","is_force_update_external_object_for_sync","connected_relations_database_actions_enabled","enforce_eap_route_blocking","use_eap_secureexternalpreview","enable_jira_timeline_sync","pause_jira_resync","pause_jira_webhooks","skip_outdated_eo_updates_for_jira_sync","add_more_logs_to_debug_update_eoi_block_task_on_jira_webhook","show_collection_pill_at_page_level_for_jira","gmail_action_formula_recipients","is_use_unpaginated_get_jira_fields","disable_jira_sync_source_for_members","jira_onboarding_tour","jira_dc_streaming_projects","jira_2_way_sync","jira_dc_members_flow_enabled","jira_dc_basic_auth_enabled","enable_jira_multi_cell_changes","jira_sync_aggregate_jira_issue_events","validation_backlink_for_jira_connected_relation","explicitly_link_page_to_eoip","custom_jira_sync_flow_for_jira_members","jira_sync_avoid_cross_space_file_check","monitor_jira_traffic","jira_dc_site","skip_identity_mapping_for_related_external_objects_for_jira_sync","salesforce_caching","in_app_startups_application","ai_assistant_universal_qna_web_search","ai_assistant_markdown","ai_assistant_router_v2_search_in_database","ai_assistant_router_v2_search","ai_assistant_router_v2_search_leap","ai_assistant_router_v2_action","ai_assistant_router_v2_action_leap","ai_assistant_router_v2_search_use_fireworks_ft_router_102","ai_assistant_router_v2_search_use_fireworks_llama3_1_70b","ai_assistant_router_v2_action_use_fireworks_llama3_1_70b","ai_assistant_router_v2_querygen_use_cerebras_llama3p3_70b","ai_assistant_router_v2_querygen_use_llama3p3_70b_dedicated","ai_research_mode_querygen_use_llama3p3_70b_dedicated","ai_research_mode_postprocess_plan_step_use_4o_mini","ai_research_mode_postprocess_plan_step_use_llama3p3_70b","ai_research_mode_filtering_use_llama3p3_70b_dedicated","ai_assistant_router_v2_querygen_add_dark_traffic","ai_assistant_should_approximate_token_count","ai_inference_cell_routing","ai_team","show_session_expiration_error_message","mab_consider_navigation_top_page","space_skip_messagestore_publish","space_bypass_log_sampling","use_new_file_token_format","enterprise_trusted_domain_enabled","dls_use_admin_settings","enterprise_beta_trusted_domain_enabled","public_space_data_store_local_cache_disabled","id_schema","id_schema_v1","force_update_celeaf_oncompositionend","formal_postgres_proxy","dictation_new_page_nux","organization_is_source_of_truth_for_saml","search-custom-action-results","sticky_inbox_date_buckets","synctest","capi_v1","capi_v2","performance_debugging_toolbar","serve_experimental_client_build_dev","serve_experimental_client_build_split_chunks","load_page_chunk_omit_existing_record_versions","load_page_chunk_omit_ancestor_dependencies","send_request_ack_metric_enabled","enable_marketplace_seller","token_v2_clientside_refresh","workspace_member_access_notif_polish","state_management_in_monday_importer","preserve_text_around_links_confluence","add_headers_to_collection","preserve_line_breaks_table_cells","preprocess_markdown_for_list_indentation","cf_importer_attachment_timeout","report_unconverted_links_to_page_mentions_confluence","preserve_spans_in_columns_confluence","dev_search_team_feature_gate","csvimport_faster_navigate_to_page_enabled","slack_ingestion_use_new_handler","should_use_confluence_attachment_map","rules_engine_query_dynamo","docs_list_actions_remove_no_clone","update_roles_via_scim","create_v2_callouts","save_transactions_upgrade_callouts_to_v2","migrate_callout_to_v2_on_click","github_student_pack","log_messagestore_attempts","respect_error_retryable_enabled","enable_page_previews","enable_slack_embed_tooltips_actual","content_export_email_render","load_page_flush","animated_list_item_block","animated_popup","emoji_frecency","beacon_pre_ipr_assets","lazier_dependencies","offline_log_allowlist","assistant_replace_selection","new_bot_token_hash_writes","enable_token_store_caching","new_token_helpers","use_server_token_helpers","github_ai_connector_consumer_setup","serve_desktop_service_worker_gate","mobile_mab_mrr","mab_refresh_personalization_gate","new_bot_token_encrypt_secret_writes","dot_com_help_embeds","omit_space_from_page_cache","loadcachedpagechunk_cursor_space_id","use_lrwa_in_getspaces","getspaces_filter_by_space_ids","getspaces_pagepointers_in_space","lucy-in-the-sky-with-tab-blocks","beta-developers-external","db_permissions","db_permissions_user_gate","share_menu_inheritance_banner","rules_engine_query_qwak_by_default","unfurl_disable_store_verify","record_cache_backfill_space_id","use_new_admin_api_request","editor_basic_rtl","multi_cell_savetransactions","image_sizing_v2","editor_prevent_quasi_alive_block","duplicate_snapshot_navigable_blocks_by_reference","mobile_embed_menu_cursor_fix","enable_workspaceId_updates_to_external_entity","z_indexes_relative","multi_cell_get_user_notifications","updated_color_picker","forms_ga","enhanced_slash_menu_logic","enqueue_update_user_badge","github_ai_connector_paused","record_map_logging","dont_load_users","in_memory_cache_logging","ios_native_drag_handler_delay","gmail_action_redirect_improvements","route_import_issues_to_resync","disable_tasks_resync_on_view_event","scheduled_event","google_drive_qna_enable_disconnect_for_sync_failures","google_drive_ingestion_use_instantiated_google_sdk","mail_aes_message_processor","universal_qna_delete_downgraded_space_ai_connector_data","automations_dev_tools","ks_dev_settings","record_title_rich_text","encrypted_text_block","export_skip_merge_final_zip","automations_disable_cross_space_fetch","load_cached_page_chunk_button_children","selectable_top_margin","use_new_request_component","use_new_import_options","replace_zerobounce_with_mailgun","easy_ai_dismiss","resizable_code_block","similar_user_page_presence_store","split_google_creds","export_empty_properties","export_skip_external_collections","log_show_error_page","microsoft_teams_qna","plus_button_between_blocks","login_delay_app_reset","publish_site_automation_action","slack_link_cleanup_ampersand","domain_wide_saml_enabled","trusted_domain_redesign","trusted_domain_admin_redesign","trusted_domain_permission_redesign","use_email_delay_jitter","send_gmail_retry","delay_banned_user_auto_space_deletion","enable_allowed_workspaces_header","block_google_login_for_gid_mismatch","ban_dormant_custom_domain_account","sync_verification_state","microsoft_teams_ai_connector_consumer_setup","activity_digest_v2","users_edge_cache","edge_cache_settings","ai_connectors_double_writes","new_verification_property_id","backfill_verification_when_move_into_wiki","meeting_notes","meeting_notes_system_audio","translate_template_top_bar","chrono_node_date_mentions","figma_oauth_migration_gate","translate_template_backend","aes_non_enterprise_page_visit","dont_check_fileid_imports","microsoft_teams_ai_connector_enable_meta_poller","translate_template_async_tasks","dont_check_fileid_api_imports","csv_import_v2_screens","load_page_chunk_in_web_worker","gdrive_scope_migration_gate","slack_ai_connector_enable_bot_messages_processing","use_spaceid_in_get_upload_file_url","ai_connectors_google_drive_pause_live_ingestion","confluence_base_url_override","use_temp_bucket_for_export_state_file","automations_disable_for_duplication_children","paste_links_as_mentions","sharepoint_ai_connector","search_batch_load_users","opfs_recordmap_cache","opfs_save_page_strategy_revision_tracking","opfs_save_page_strategy_sync_tracking","opfs_save_page_strategy_background","opfs_save_page_strategy_navigation","route_export_task_high_memory_queue","notion_installer_download","hide_microsoft_button_to_test_mobile_statsig","reaction_notifications","calendar_agenda_preview","presence_messagestore_permissions_enforce","presence_messagestore_permissions_use","app_switcher_icon_refresh","automations_skip_noop_update_pages","ai_attachment_search","missing_name_banner","unified_find_input_at_mentions","route_export_task_high_memory_queue_override"],R=[...B].sort();const E={marketplace_webhook:{enabled:!1,creator_to_webhook_url:{}},marketplace_creator_intervention:{creators:[],delay_days:5},marketplace_refund_email_target:{sendToEmail:"team@makenotion.com"},marketplace_acquisition_refund_processing_disallow_list:{acquisition_ids:{}},event_trail_events:{},page_tree_query_strategy:{strategy:"js_recursion_property_filter_sql"},event_trail_routing:{},collection_request_settings:{clientFormulaTimeoutMs:30*r().TD},sentry:{errorsSampleRate:0,"tracesSampleRate-v0":0,"replaysSessionSampleRate-v0":0,"replaysOnErrorSampleRate-v0":0,profilesSessionSampleRate:0,profilesSampleRate:0},gtm_ai_favorites:{space_id:void 0,collection_id:void 0},migration_task_supervisor_configs:{is_not_default:!1,universal_kill_switch:!1,cron_job_revive_supervisor_queue_task_enabled:!0,project_supervisor_config:{default:{project_kill_switch:!1,is_dry_run:!0,max_worker_per_db_shard:1,supervisor_check_worker_interval_ms:5*r().Xb,process_chunks_interval_ms:10,csv_migration_process_chunk_size:1e3,csv_migration_s3_bucket_name:void 0,csv_migration_s3_index_file_prefix:void 0}}},permanently_delete_tree_queue_task_override:{queue_task_kill_switch_on:!1,task_delay_override_seconds:void 0,elastic_search_request_batch_size:200,s3_request_batch_size:200,redis_read_batch_size:1e4,tree_iteration_batch_size:1e4,tree_iteration_max_buffer_size:5e4,postgres_query_batch_size:1e5},message_store_client_config:{min_reconnect_delay_secs:4,max_reconnect_delay_secs:8},unsync_transclusion_block_configs:{duplication_task_check_status_interval_seconds:.5,duplication_task_check_status_max_interval_seconds:60,duplication_task_check_status_exponential_after_seconds:30,duplication_task_check_status_timeout_minutes:30,duplication_task_check_status_wait_for_no_task_data_times:10},load_test_simulator_configs:{commenter_interval_ms:1e3,page_viewer_interval_ms:100,editor_interval_ms:1e3,editor_typing_interval_ms:100,presence_interval_ms:1e3},confluence_server_groups:{default:{read:[],create:[]}},notion_people_block_id:{data:{}},mwn_refund_policy_link:{link:""},marketplace_redirect_url_after_purchase_config:{},marketplace_transactional_email_config:{listingIds:[]},load_test_bypass_rate_limit_page_ids:{pages:[]},load_test_ids:{spaceIds:[]},csv_limits:{maxRelationPages:1e3,maxRows:1e5,maxColumns:500},xlsx_limits:{maxRows:1e5,maxColumns:1e3},jira_resync_frequencies:{importResyncFrequencyMS:24*r().pT,timelineSyncFrequencyMS:6*r().pT},jira_import_batch_config:{processIssueBatchSize:10,attachmentBatchSize:1},jira_importer_records_fetch_limit:{records_limit:10},jira_resync_records_fetch_limit:{records_limit:25,process_records_limit:1},jira_sync_fields_api_concurrency:{maxConcurrency:100},jira_attachments_config:{attachmentSize:1e6,numberOfAttachments:5},jira_properties_options_limit:{optionsLimit:400},jira_notion_version_to_force_update_external_object:{notionVersion:1},jira_recent_issues_limit:{updatedInLastNDays:0},jira_fields_that_require_dynamic_options_config:{fieldIds:[]},deep_find_config:{notionSourceNumResults:100,maxPagesToDecorate:20,maxResultsPerSourceToBlendedRanking:20,maxFinalResults:40},model_overrides:{},slack_contacts_limit:{maxLimit:100,defaultLimit:100},automation_update_pages:{},active_token_counter_config:{},workflow_templates_builder_config:{},dev_ai_context:{suggestOnPageNavigationProbability:0},qna_ai_reminders:{abandonedSearchReminderProbability:0},mobile_inbox_2_0_feedback:{},article_extractor_enable_urls:{urls:[]},ai_qna_silent_retry_mode:{},ingestion:{slack:{similarityThreshold:.8,gridAppId:"",clientId:"",prefix:"",channelIds:[],ingestionTopic:"",adminScopes:[],userScopes:[],userMappingScopes:[],gridScopes:[],ingestionCompleteDelay:3600,cleanUpDelay:3600,ingestionNextTaskDelay:300,maxChannelsPerPartition:0,enablePermissionsFilter:!1,sendToKafka:!1,showRemoveWorkspaceIntegration:!1,ingestionKafkaMaxSize:1992294,learnMoreUrl:"https://notion.so",runPoller:!0,pollerBatchSize:10,maxProcessingTime:30,allowPollerToDelete:!1,deprecateLegacy:!1,stopProcessingOnLegacy:!1,logSkippedEvents:!1,sampleRate:0},googleDrive:{mainPollTime:600,ingestionTopic:"",sendToKafka:!1,batchSizeForFileSync:10,mainPollEnabled:!0,learnMoreUrl:"https://notion.so",ingestionKafkaMaxSize:2097152,pageSize:2e3,initialSyncUserBatch:30,initialSyncFileBatch:100,googlePageSize:100,googleTokenAPIConcurrentRequestLimit:10,timeDeltaForActivityInMS:6e5,googleApiRetryConfig:{retryAttemptsMS:[500,1e3,2e3],retryAttemptRandomOffsetMS:500},initialSyncDelayInCompletion:3600,googleAuthUrl:"https://workspace.google.com/marketplace/app/notion_ai/988713442660",troubleShootingUrl:"https://notion.so",initialSyncStartDelayInSec:3600,deleteQueueTaskSecondRunDelay:3600,liveSyncSegmentTimeSec:300,googleApiTimeoutMS:6e4,googleApiTimeoutForRecallMS:1e4,marketplaceAppConfigureUrl:"https://admin.google.com/ac/apps/gmail/marketplace/appdetails/988713442660",concurrentRequestLimitForFetchingViewedOrModifiedFiles:10,maxAcceptableSyncFailureCountForDisconnect:1/0,timeThresholdForFailingLiveSyncAlertMS:864e5,useSynchronousAPICallsInInit:!1,maxFileToSyncPerUser:1e4},bucket:"",kafka:{topic:"",partitionCount:0},batchSizeForS3FileDeletes:10,downgradeSpaceAIConnectorsAfterTimeMS:2592e6},create_snapshot_configs:{load_subtree_batchSize:500,load_subtree_query_limit:10},universal_qna:{defaultExternalSources:[],blendedRecall:{strategy:"cohere"},minCosScoreGoogleDrive:-1,s3Parallelism:100,cohereRerankParallelCalls:1,hydrationParallism:20,maxSpreadsheetsToHydrate:5,asyncLabelingRatio:{notion:0,slack:0,googleDrive:0,github:0,jira:0,microsoftTeams:0,sharepoint:0},notion:{loadAncestorsEagerlyLimit:50},github:{shortenPageTextParallelism:3,maxAdditionalSpans:3},jira:{shortenPageTextParallelism:3,maxAdditionalSpans:3},microsoftTeams:{maxAdditionalSpans:3},helpdocsCachingExpireMs:36e5,shortenPageTextModel:"cohere",bgeModelId:"bge-v2-gemma"},qna_embedding:{embeddingMethod:void 0},collection_virtualized_load_limits:{table:{initial_limit:50,increment_limit:50}},slack_pause_ingestion:{liveIngestion:{allWorkspaces:{events:[{type:"user_change"}]},specificWorkspaces:[]},bulkIngestion:[]},link_paste_order:{defaultOrder:{name:"Default",order:["preview","mention","link"]}},collection_service_concurrency_cost_limit:{},query_collection_rate_limit:{},query_collection_slow_mode:{windowSeconds:10,requestThresholdPerWindow:1e3,clientThrottleMs:1e3},query_collection_size_based_slow_mode:{config:[]},query_collection_chart_refetch_settings:{clientThrottleMs:3e3},offline_query_collection_settings:{limit:100},offline_mode_settings:{max_blocks_per_origin_page:2e4,fast_refetch_interval_ms:0,autosynced_pages_limit:0},collection_reducer_request_settings:{chart:{debounce_wait_ms:1e3},general_debounce_wait_ms:void 0},charts_query_collection_limits:{},mc_config:{},id_schema_dynamic_config_v2:{percent:0},id_schema_dynamic_config_v3:{percent:0,real_id:!1},sites_settings:{custom_hostname_validation:{retry_delay:1e3,max_retries:5,inject_failure_percent:0}},mobile_dictation_visualizer:{lowshelf_filter_frequency:1500,lowshelf_filter_gain:-30,fft_size:256,min_hz:void 0,max_hz:void 0},load_test_trace_config:{queue_page_viewer_simulator_sample_rate:0,load_test_inner_sample_rate:0},activity_type_aes_config:{default:"iae"},jira_sync_events_aggregation_time_window_length_ms:{time_window_length_ms:5*r().TD},gdrive_app_id:{app_id:""},capi_v2_event_names:{StartTrial:!1,InitiateCheckout:!1,CompleteRegistration:!1,Purchase:!1,PurchaseWorkType:!1,PurchaseWorkTypeProfessionalDomain:!1,Subscribe:!1,SubscribeAI:!1},imports_queue_config:{asana:{saveTransactionsBatchSize:100,fetchTaskBatchSize:100,globalUseCrdt:!0}},always_force_refetch_for_specific_tables:{tables:[]},callout_config:{callout_blocklist:[]},integration_standards_url:{url:""},integration_tech_partners:{tech_partner_ids:[]},template_feed_ranking_config:{formula_parameters:[]},multicell_api_config:{default_max_depth:10,api_overrides:{}},onboarding_templates:{joiner:{}},monday_v2_config:{unsupportedProperties:[],boardItemsLimit:100,batchSize:100,itemSaveIntervalInQueueState:1e3,itemSaveBatchDelay:100,fetchBoardsInParallel:3},github_ai_connector_configuration:{appName:"",clientId:"",timeFrame:365,shouldIndexData:!0,codeUploadBatchSize:50,knownUsersToIgnore:["doug-engelbot"],ingestPrReviews:!1,maxIssuesToIngestPerPartition:500,itemsPerPage:100,learnMoreUrl:"",maxDiffContentLength:3e3,enablePeriodicMetaSync:!1,processingTimeThreshold:12e4,maxKafkaMessageSize:2097152,disableRecallAfterInHrs:3,githubDocsUrl:"https://docs.github.com",githubDocsPath:"account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-your-personal-account/converting-a-user-into-an-organization"},jira_ai_ingestion_config:{learnMoreUrl:"https://notion.so",jiraMarketPlaceAppUrl:"https://notion.so",permissionPollerEnabled:!1,permissionPollerPollTimeInSeconds:1800,enqueueNextTaskDelayInSeconds:60,enqueueFinishTaskDelayInSeconds:3600,enqueueNextDeleteTaskDelayInSeconds:3600,promiseBatchSize:10,bulkIngestionDelaySeconds:3600,chunkLength:1e3,maxNumberOfCustomFields:100,pollerNotRunningThresholdInHours:5,disableRecallAfterInHrs:24,promiseBatchForPoller:5,enableInternalComments:!0},trello_import_batch_config:{cardBatchSize:20},multi_cell_savetransactions_metrics:{batch_sample_percent:0},automation_settings:{action_execution_max_event_loop_block_time_ms:void 0,action_execution_timeout_ms:5*r().Xb,client_formula_timeout_ms:30*r().TD,server_formula_timeout_ms:30*r().TD,web_request_timeout_ms:15*r().TD},site_sitemap_known_spam_workspaces:{space_ids:[]},activity_digest_config:{enabled:!1,v2LegacyTaskMode:"enabled",v2UnifiedDigestTaskMode:"disabled",earliestScheduleHour:6,latestScheduleHour:9,timeBufferMinutes:5,maxActivityGroups:10,maxActivityGroupSize:5,variant:"default",onlyTargetEnglishUsers:!1,newEmailEnablementDate:"2024-11-22T00:00:00.000Z",shouldTruncateEdits:!1,numEditsPerActivity:3},unified_digest_scheduling_config:{enabled:!1,earliestScheduleHour:6,latestScheduleHour:9},home_digest_email_config:{enabled:!1,legacyTaskMode:"disabled",unifiedDigestTaskMode:"disabled",variant:"default",runOnDayOfWeek:5,unifiedDigestSendOnDayOfWeek:1,bucketSampleRate:1,bucketDelaySeconds:1,emailDelaySeconds:0,minDaysBetweenEmails:5,utcStartHour:16,numUserBuckets:3e4,numDataReadyTests:10,numPreviousDaysToCheck:3,maxTasksPerEnqueue:1e3,scheduleUnifiedDigestMessageBatchSize:10,disabledEmailDomains:[],disabledSpaceIds:[],queryCollectionTimeoutMs:10*r().TD},demo_tooltip_tour_config:{tour:{}},trusted_domains_space_ids:{space_ids:[]},marketplace_fee_overrides:{data:{}},throttle_notification_sent_analytics:{},mc_auth:{group:"dual_version_on_new_token"},marketplace_payout_delay_days:{},gmail_action_email_delay:{email_delivery_delay:120},jira_ai_connector:{prefix:"jira"},custom_emojis_config:{limit:5e3},creator_profile_allowlist:{usernames:[],names:[]},integration_webhooks_config:{},marketplace_public_purchase_url_optout:{usernames:["thomas"],contentful_ids:["17bVrJyVTyegxdnESZOVPs"]},conflicting_content_model:{model:"openai-gpt-4o-mini"},marketplace_localized_minimum_payouts:{},automation_http_request_action_denylist:{list:[]},enabled_installation_sources_for_duplicate_template_block:{in_app:!0,public_page:!0,web_gallery:!0,mobile_app:!0,onboarding:!0,team_home:!0},help_center_search_config:{maxTotalSearchResults:50,maxTemplateSearchResults:10,maxHelpCenterSearchResults:40},microsoft_teams_ai_connector:{kafkaMessageMaxSize:2097152,notificationUrl:"https://integrations-api.notion.com/microsoft/events",maxChannelsPerPartition:10,maxChannelSyncLookbackTimeMS:2592e6,syncArchivedTeams:!1,syncArchivedChannels:!1,enablePoller:!0,pageFetchThresholdForCheckpointing:10,skipIngestionForConversationsWithGuestMembers:!1,s3ReadWritesParallelism:50,bulkIngestionDelaySeconds:3600},template_limits:{maxNumBlocks:1e5},sharepoint_ingestion:{sendToKafka:!1,ingestionCompleteDelay:3600,ingestionNextTaskDelay:300,prefix:"sharepoint-v1",ingestionKafkaMaxSize:4718592,liveIngestionPollerEnabled:!1,liveIngestionPollerInterval:3600,userActivityLookbackDays:180,maxDriveItemSizeInBytes:10485760},adoption_entry_point_time_delta:{import_nudge_on_large_paste:{view_delta:432e6},import_nudge_on_block_create__collection_view:{view_delta:432e6},import_nudge_on_block_create__collection_view_page:{view_delta:432e6},import_nudge_on_block_create__page:{view_delta:432e6},import_nudge_on_block_create__table:{view_delta:432e6}},jira_get_api_request_limit:{expireSeconds:3600,apiLimit:5e3},adoption_stack_ranking_experiment_start:{adoption_hide_features_v1:0},automations_update_pages_jitter_config:{mode:"off",amount_ms:0}};const D=new Set(A);function N(e){return D.has(e)}new Set(B);function L(e){return w[e]}const F="_unassigned_";const U="NoExperimentActor";function O(e,t){const o=Object.keys(e.value).find((e=>e.toLowerCase()===t.toLowerCase())),n="__no_such_experiment__",r=o?e.get(o,n):e.get(t,n);return r===n?null:r}},715862:(e,t,o)=>{o.d(t,{e:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("expand",{viewBox:"-1 -1 9 11",svg:(0,n.jsx)("path",{id:"path0_stroke",d:"M 3.5 0L 3.98809 -0.569442L 3.5 -0.987808L 3.01191 -0.569442L 3.5 0ZM 3.5 9L 3.01191 9.56944L 3.5 9.98781L 3.98809 9.56944L 3.5 9ZM 0.488094 3.56944L 3.98809 0.569442L 3.01191 -0.569442L -0.488094 2.43056L 0.488094 3.56944ZM 3.01191 0.569442L 6.51191 3.56944L 7.48809 2.43056L 3.98809 -0.569442L 3.01191 0.569442ZM -0.488094 6.56944L 3.01191 9.56944L 3.98809 8.43056L 0.488094 5.43056L -0.488094 6.56944ZM 3.98809 9.56944L 7.48809 6.56944L 6.51191 5.43056L 3.01191 8.43056L 3.98809 9.56944Z"})})},716108:(e,t,o)=>{o.d(t,{Jn:()=>M,rS:()=>T});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(581454);var n=()=>o(604341),r=()=>o(857639),i=()=>o(416845),a=()=>o(206267),s=()=>o(386164),l=()=>o(496603),c=()=>o(229833),d=()=>o(763824),u=()=>o(534177),p=()=>o(679156),m=()=>o(449506),g=()=>o(901389),f=()=>o(508496),v=()=>o(951177),h=()=>o(898486),_=()=>o(974233),b=()=>o(972435),y=()=>o(907828),S=()=>o(818619),w=()=>o(886564),k=()=>o(847463);let I=0;const A=(0,o(959013).YK)({requestTooLarge:{id:"transactionHelpers.requestTooLargeError.message",defaultMessage:"Sorry, that request was too large."},requestTooLargeTryImportInstead:{id:"transactionHelpers.requestTooLargeError.message.tryImportInstead",defaultMessage:"Sorry, that request was too large. Try import instead?"}});let x=!1;(0,n().exposeDebugValue)("toggleTransactionQueue",(()=>{x=!x,console.info(x?"Transactions paused":"Transactions resumed")}));let C=0;(0,n().exposeDebugValue)("setTransactionQueueApiLatencyMs",(e=>{C=e,0===e?console.info("Disabling saveTransactions API latency simulation."):console.info(`Simulating saveTransactions API latency of ${e} ms.`)}));class T extends Error{constructor(e){super(e.message),this.retryDelay=void 0,this.retryReason=void 0,this.savedTasks=void 0,this.failedTasks=void 0,this.clientData=void 0,this.name="HandleSaveTransactionsError",this.retryDelay=e.retryDelay,this.retryReason=e.retryReason,this.savedTasks=e.savedTasks,this.failedTasks=e.failedTasks,this.clientData=e.clientData}}async function M(e){var t;if(x)return{value:[]};const{environment:o,tasks:n}=e,S=function(e,t){const o=new Set(t.map((e=>e.timestamp))),n=t.length-o.size;return n>0&&p().mm(e,{collision_count:n}),n}(o,n),{userId:M,tasks:D}=k().lz(n),N=D.map((e=>({id:e.id,spaceId:e.spaceId,debug:e.debug,operations:e.operations,inSudoMode:e.useSudoMode,isUndoTransaction:e.isUndoTransaction,isTemplateInstantiationTransaction:e.isTemplateInstantiationTransaction}))),L=a().JW(),F=f().default.checkGate({gateName:"client_http_gzip"})?"gzip":void 0,U=null===(t=w().A.provider)||void 0===t?void 0:t.onSaveTransactions(n,N);let O;if("currentSpace"===e.cellType?O=await m().callApi({eventName:"saveTransactionsFanout",environment:o,data:{requestId:L,transactions:N},userId:M,encoding:F,headers:{}}):"space"===e.cellType?O=await m().callApi({eventName:"saveTransactionsFanout",environment:o,data:{requestId:L,transactions:N},userId:M,encoding:F,headers:(0,s().WS)({spaceId:e.spaceId})}):"main"===e.cellType?O=await m().callApi({eventName:"saveTransactionsMain",environment:o,data:{requestId:L,transactions:N},userId:M,encoding:F,headers:{}}):"legacy"===e.cellType?O=await m().callApi({eventName:"saveTransactions",environment:o,data:{requestId:L,transactions:N},userId:M,encoding:F}):(0,u().HB)(e.cellType),C>0&&(console.info(`saveTransactions returned; simulating ${C}ms extra latency.`),await(0,d().wR)(C)),null==U||U(O),"success"===O.type)return I=0,{value:D};const V="Notion is unavailable, please try again later."===O.error.message;if(!V&&!O.error.data.offline||Math.random()<.01){const e=[...new Set(N.map((e=>e.spaceId??"NO_SPACE_ID")))];r().log({level:"error",from:"transactionActions",type:"ClientTransactionError",error:{miscErrorString:(0,c().WS)(O)},data:{requestId:L,miscDataToConvertToString:{transactions:N},userId:o.currentUser.id,spaceIds:e}})}if(413===O.status){let e,t;const n=D.length;D.forEach((o=>{var n,r;null!==(n=o.debug)&&void 0!==n&&n.userAction&&(e=o.debug.userAction),null!==(r=o.debug)&&void 0!==r&&r.userFlow&&(t=o.debug.userFlow)})),r().log({level:"error",from:"transactionActions",type:"ClientTransaction413Error",data:{totalTaskCount:n,userId:o.currentUser.id,requestId:L,userAction:e,userFlow:t}});const i=JSON.stringify(N);p().$9(o,{totalTaskCount:n,payloadLength:i.length,userAction:e});const a=Math.ceil(i.length/k().vs);for(let s=0;s<a;s++)r().log({level:"error",from:"transactionActions",type:"ClientTransaction413ErrorRecovery",data:{userId:o.currentUser.id,totalTaskCount:n,requestId:L,miscDataToConvertToString:{chunkTotal:a,chunkIndex:s,operationChunk:i.slice(s*k().vs,(s+1)*k().vs)}}});g().f1(b().A.formatMessage(e===v().Vz?A.requestTooLargeTryImportInstead:A.requestTooLarge))}const j=e=>{const t=I;if(e.failedTasks.length>0&&(I+=1),!V&&!O.error.data.offline){var n,i,a;const s=e.failedTasks.length>0?e.failedTasks[0]:void 0;s&&"space_not_found_in_record_path"===(null===(n=e.clientData)||void 0===n?void 0:n.type)&&r().log({level:"error",from:"transactionActions",type:"ClientTransactionSpaceNotFoundError",error:(0,c().n6)(e),data:{userId:o.currentUser.id,requestId:L,miscDataToConvertToString:(0,y().getDebugSourcesForIdsInOperations)(o,s.operations)}}),p().KY(o,{status:O.status,message:(0,_().V)(O),previous_consecutive_rollbacks:t,saved_tasks:e.savedTasks.length,failed_tasks:e.failedTasks.length,first_failed_task_user_action:null==s||null===(i=s.debug)||void 0===i?void 0:i.userAction,first_failed_task_debug_tags:null==s||null===(a=s.debug)||void 0===a?void 0:a.tags,will_retry:e.retryDelay>0,retry_reason:e.retryReason,timestamp_collision_count:S})}return{error:e}};if((0,i().Ow)(O.body)){if((0,i().md)(O.body.clientData)){const{errors:e}=O.body.clientData,t=e[0],n=D.findIndex((e=>e.id===t.id));if(n<0)return B(o,L,t),j(new T({message:t.name,clientData:t.clientData,retryDelay:0,retryReason:void 0,savedTasks:[],failedTasks:[]}));const r=D.slice(0,n),i=[],a=[],s=[];let l=n,c=0,d=0;for(const u of e){const e=D[l];u.id===e.id?(u.retryable?(a.push({error:u,task:e}),d+=1):(c+=1,await P(o,e,L),i.push(e),s.push({error:u,task:e})),l++):B(o,L,u)}const p=[`${r.length} successful`,c>0?`${c} failed unretryable (data loss)`:void 0,d>0?`${d} retryable`:void 0].filter(u().O9).join(", "),m=[`API error for ${D.length} transactions: ${p}.`,R(s,"unretryable"),R(a,"retryable"),O.body.debugMessage?`Debug message: "${O.body.debugMessage}"`:void 0].filter(u().O9).join(" ");let g,f=0;return a.length>0&&(f=2e3,g=a[0].error.name),j(new T({savedTasks:r,failedTasks:i,message:m,retryDelay:f,retryReason:g,clientData:t.clientData}))}if(l().mK(E,O.status))return await Promise.all(D.map((e=>P(o,e,L)))),j(new T({savedTasks:[],failedTasks:D,message:(0,h().Hu)(b().A.getIntl(),O),retryDelay:0,retryReason:void 0}))}let z=`http${O.status}`;return O.error.data.offline?z="offline":V&&(z="notionUnavailable"),j(new T({savedTasks:[],failedTasks:[],message:(0,h().Hu)(b().A.getIntl(),O),retryDelay:5e3,retryReason:z}))}async function P(e,t,o){try{await(0,S().X)(e,t)}catch(n){r().log({level:"error",from:"transactionActions",type:"ClientTransactionCleanupError",error:(0,c().n6)(n),data:{userId:e.currentUser.id,requestId:o}})}}function B(e,t,o){r().log({level:"error",from:"transactionActions",type:"ClientTransactionNotFoundError",error:(0,c().n6)(o),data:{userId:e.currentUser.id,requestId:t}})}function R(e,t){if(e.length>0){var o;const{error:n,task:r}=e[0];return`First ${t} error: ${n.name} for transaction ${r.id} created by ${null===(o=r.debug)||void 0===o?void 0:o.userAction}.`}}const E=[400,413]},718725:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),r=()=>o(56366),i=()=>o(891078),a=o(474848);function s(e,t){let{disabled:s,disableCommentMenu:l,disableHoverMenu:d,disableDrag:u,hideContent:p,isFirstItem:m,legacyTransclusionParentStore:g,store:f,style:v}=e;const h=(0,r().K8)((()=>f.getBlockTitleStore()),[f]),_=(0,r().K8)((()=>f.getContentStore()),[f]),b=(0,n.useRef)(null),y=(0,r().K8)((()=>_.getValue()||[]),[_]),S=(0,i().pW)(f),w=(0,r().K8)((()=>{if(o(508496).default.checkGate({gateName:"display_crdt_block_client"})&&f.useCrdt())return{border:"1px dashed green"}}),[f]),k=(0,r().K8)((()=>{if("encrypted_text"===f.getType())return{border:"1px dashed purple"}}),[f]),I=(0,o(401497).IS)((()=>({root:{...S,...w,...k,...v},title:{...o(799954).nE}})),[S,w,k,v]),A=!p&&y.length>0?(0,a.jsx)("div",{style:c,children:(0,a.jsx)(o(99945).A,{disabled:s,store:_,disableCommentMenu:l,disableHoverMenu:d,disableDrag:u})}):null,x=(0,a.jsxs)("div",{style:I.root,ref:b,children:[(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)(o(246722).A,{style:I.title,disabled:s,store:h,pasteBehavior:"block",legacyTransclusionParentStore:g,trackEditsToUserFlow:"user_flow_edit_block",inPageFind:o(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,a.jsx)(o(739283).A,{disableCommentMenu:l,hideContent:p,store:f})]}),!p&&A]}),C=(0,r().K8)((()=>"encrypted_text"===f.getType()?"encrypted_text":"text"),[f]);return(0,i().NW)(f,t,(0,n.useMemo)((()=>({renderedType:C,getBlockStore:()=>f,getNode:()=>b.current})),[f,C]),x)}const l=n.memo(n.forwardRef(s),o(821062).A),c={paddingLeft:"1.5em",display:"flex",flexDirection:"column"}},718807:(e,t,o)=>{o.d(t,{Ay:()=>a,Jv:()=>n,yg:()=>i});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);const n=["all_pages","in_current_page","last_edited_by_me"];class r extends(()=>o(757695))().default{constructor(){super(...arguments),this.loadMoreOffset=200,this.startLimit=20,this.limitIncrement=20}getInitialState(){return{filter:"",teamspaceIds:[],lastEditedByIds:[],inPageIds:[],currentTab:"all_pages",loading:!0,limit:this.startLimit,excludePages:new Set,isInitialLastEditedByState:!0}}}function i(e,t){return"last_edited_by_me"===e.currentTab?t?[t]:[]:e.isInitialLastEditedByState&&t?[t]:e.lastEditedByIds}const a=new r},719061:(e,t,o)=>{o.d(t,{Q2:()=>c,dk:()=>l,oj:()=>s});var n=()=>o(645873);const r=new(n().O2)("InlineRenderError",(()=>o.e(90518).then(o.bind(o,964226)))),i=new(n().O2)("LargeSurfaceRenderError",(()=>o.e(70593).then(o.bind(o,650843)))),a=new(n().O2)("RedactedBlockError",(()=>o.e(67944).then(o.bind(o,13240)))),s=(0,n()._h)(r,(e=>e.InlineRenderError)),l=(0,n()._h)(i,(e=>e.LargeSurfaceRenderError)),c=(0,n()._h)(a,(e=>e.RedactedBlockError))},719147:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);const r={red:"notion-link",purple:"notion-link-ai-version",blue:"notion-link-blue"};const i=function(e){let{href:t,external:i,disableHover:a,onClick:s,onMouseDown:l,onMouseEnter:c,onMouseLeave:d,disableUnderline:u,style:p,hoverColor:m="red",children:g,color:f}=e;const v={display:"inline",textDecoration:"underline",color:f??o(100622).Ay.inherit},h=m?r[m]:r.red;return(0,n.jsx)(o(187485).A,{href:t,external:i,style:{...v,...p,...u&&{textDecoration:"none"}},onClick:s,className:a?void 0:h,onMouseDown:l,onMouseEnter:c,onMouseLeave:d,children:g})}},719431:(e,t,o)=>{o.r(t),o.d(t,{actuallyLogoutAndDeleteMostLocalData:()=>Ve,clearCurrentUser:()=>Oe,clearMostUserStorageAndState:()=>Ie,handleLoginFailureIfMicrosoftVerificationRequired:()=>Ze,handleLoginFailureIfSamlRequired:()=>Qe,handleLoginSuccess:()=>je,handleLoginWithMfa:()=>qe,handleLoginWithTemporaryPasscodeSuccess:()=>Te,initialize:()=>Ke,loginPasswordReset:()=>De,loginSamlUser:()=>Ne,loginSamlUserWithToken:()=>Ee,loginUserWithPasskeyVerifyChallenge:()=>Le,loginWithAppleAuth:()=>Me,loginWithGoogleAuth:()=>Pe,loginWithMicrosoftAuth:()=>Be,loginWithTemporaryPasscode:()=>Ce,logout:()=>Ue,logoutSingleAccount:()=>Fe,openBrowserInMobileNative:()=>xe,redirectToSaml:()=>Re,requestLoginWithGoogleOneTap:()=>Ae,setLocalStorageUserId:()=>We,shouldCreatePassword:()=>$e,showSamlRedirectMessage:()=>Xe});o(16280),o(944114),o(898992),o(354520),o(581454),o(814603),o(147566),o(198721);var n=()=>o(590966),r=()=>o(554279),i=()=>o(584262),a=()=>o(837788),s=()=>o(857639),l=()=>o(416845),c=()=>o(861017),d=()=>o(427704),u=()=>o(798880),p=()=>o(677338),m=()=>o(994310),g=()=>o(762433),f=()=>o(445120),v=()=>o(330013),h=()=>o(496603),_=()=>o(229833),b=()=>o(763824),y=()=>o(498212),S=()=>o(534177),w=()=>o(939768),k=()=>o(449506),I=()=>o(541258),A=()=>o(901389),x=()=>o(705540),C=()=>o(687532),T=()=>o(824772),M=()=>o(624550),P=()=>o(433052),B=()=>o(496414),R=()=>o(324234),E=()=>o(666144),D=()=>o(464510),N=()=>o(435009),L=()=>o(604643),F=()=>o(426116),U=()=>o(840153),O=()=>o(845710),V=()=>o(313462);var j=()=>o(551625);var z=()=>o(780054),q=()=>o(326406),H=()=>o(235921),W=()=>o(989423),K=()=>o(725951),G=()=>o(529543),$=()=>o(898486),Y=()=>o(479954),Q=()=>o(972435),Z=()=>o(475133),X=()=>o(965378),J=()=>o(836251),ee=()=>o(161132),te=()=>o(133234),oe=()=>o(14307),ne=()=>o(645200),re=()=>o(838824),ie=()=>o(607859),ae=()=>o(12145),se=()=>o(406792),le=()=>o(179534),ce=()=>o(214006),de=()=>o(875856),ue=()=>o(351360),pe=()=>o(57605),me=()=>o(508496),ge=()=>o(589994),fe=()=>o(630116),ve=()=>o(502438),he=()=>o(24157),_e=()=>o(151168),be=()=>o(338907),ye=()=>o(905654),Se=()=>o(215152),we=()=>o(893702);const ke=(0,o(959013).YK)({unsavedChanges:{id:"loginActions.dialogError.logoutUnsavedChanges.message",defaultMessage:"You have unsaved changes. If you log out now, you could lose them."},logoutWithoutSaving:{defaultMessage:"Discard edits and log out",id:"loginActions.dialogError.logoutUnsavedChanges.confirmButton.label"},signupPendingMessage:{defaultMessage:"Creating Notion account…",id:"loginActions.signup.pending.message"},loginPendingMessage:{defaultMessage:"Logging in to Notion…",id:"loginActions.login.pending.message"},redirectSamlMessage:{defaultMessage:"SAML SSO required. Redirecting to the configured login page.",id:"loginActions.login.redirect.saml.message"}});async function Ie(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=[];if(t){const e=(0,p().pG)();sessionStorage.clear(),(0,p().NI)(e)}else sessionStorage.clear();ee().sw({isMobileNative:e.device.isMobileNative}),o&&n.push(Oe(e)),n.push(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,V().I)();await O().Pd(),e&&console.log("deidentify user")}()),e.mobileNative&&(n.push(e.mobileNative.logoutOfGoogle()),n.push(e.mobileNative.cancelUserBackgroundTasks())),e.device.isElectron&&(x().clearBrowserHistory(),t||x().clearCookies()),ue().default.reset(),ve().default.reset(),he().default.reset(),E().IL(e),oe().resetRecordSubscriptions(),le().A.reset(),de().default.reset(),ie().default.reset(),H().A.reset(),Se().B.reset(),n.push(ge().transactionQueue.reset()),me().default.reset(),await Promise.all(n)}async function Ae(e){const{environment:t,idToken:o,store:n,frontPathName:r}=e,i=await(0,Y().loadCurrentUserId)(t);we().Ps(t);const a=await k().callApi({eventName:"loginWithGoogleJwt",environment:t,data:{idToken:o}});if("success"===a.type){const{isNewSignup:e,userId:o}=a.data;return await je({environment:t,isNewSignup:e,userId:o,previousPersistedUserId:i,loginMethod:"login-with-google-onetap",frontPathName:r}),{status:"success"}}{await Qe(t,a);const e=(0,$().Hu)(Q().A.getIntl(),a);return n.setState({...n.state,alert:e}),{status:"fail"}}}function xe(e,t){e.mobileNative&&((0,K().jd)(e)?e.mobileNative.openAuthSessionBrowser(t):e.mobileNative.openInAppBrowser(t))}async function Ce(e){const{environment:t,state:o,password:n,redirectURL:r,webBrowserDeviceId:i,passcodeEnterMethod:a,showInvitationVersion:s,isMicrosoft:l}=e,c=await(0,Y().loadCurrentUserId)(t),u=await k().callApi({eventName:"loginWithEmail",environment:t,data:{state:o,password:n}});if("success"===u.type){const{isNewSignup:e,userId:o}=u.data;if(function(e){let{environment:t,isNewSignup:o,webBrowserDeviceId:n}=e;const r=t.device.isElectronAny,i=r&&o&&!n;if(!i)return!1;return me().default.checkGate({gateName:"desktop_app_login_with_email_redirect"})}({environment:t,isNewSignup:e,webBrowserDeviceId:i})){let e=!1;const o=w().he(w().Gm({url:`${z().A.domainBaseUrl}${d().JZ.loginSuccess}`}));return t.device.isElectronAny&&(e=!0,C().P(o)),{status:"success",redirectedToWebToRelogin:e,redirectURL:o}}return await Te({environment:t,isNewSignup:e,userId:o,redirectURL:r,previousPersistedUserId:c,loginMethod:l?"login-with-microsoft":"temporary-passcode",webBrowserDeviceId:i,passcodeEnterMethod:a,showInvitationVersion:s}),{status:"success",redirectedToWebToRelogin:!1}}await Qe(t,u);return{status:"fail",errorMessage:(0,$().Hu)(Q().A.getIntl(),u)}}async function Te(e){const{environment:t}=e;await je(e);const[o,n,r]=await Promise.all([$e(t),Ye(t),Ge()]);(o&&n||o&&r)&&X().r({environment:t})}async function Me(e){const{environment:t,code:o,encryptedToken:n,encryptedNonce:r,encryptedUserObject:i,webBrowserDeviceId:a}=e,s=await(0,Y().loadCurrentUserId)(t),l=await k().callApi({eventName:"loginWithAppleAuth",environment:t,data:{code:o,encryptedToken:n,encryptedNonce:r,encryptedUserObject:i}});if("success"!==l.type)return await Qe(t,l),(0,$().Hu)(Q().A.getIntl(),l);{const{isNewSignup:e,userId:o}=l.data;await je({environment:t,isNewSignup:e,userId:o,previousPersistedUserId:s,loginMethod:"login-with-apple",webBrowserDeviceId:a})}}async function Pe(e){const{environment:t,encryptedToken:o,code:n,callbackType:r,webBrowserDeviceId:i,source:a}=e,s=await(0,Y().loadCurrentUserId)(t),l=await k().callApi({eventName:"loginWithGoogleAuth",environment:t,data:{code:n,encryptedToken:o,callbackType:r,source:a}});if("success"!==l.type)return await Qe(t,l),(0,$().Hu)(Q().A.getIntl(),l);{const{isNewSignup:e,userId:o}=l.data;await je({environment:t,isNewSignup:e,userId:o,previousPersistedUserId:s,loginMethod:"login-with-google",webBrowserDeviceId:i})}}async function Be(e){const{environment:t,encryptedToken:o,encryptedNonce:n,code:r,callbackType:i,state:a,webBrowserDeviceId:s,source:l}=e,c=await(0,Y().loadCurrentUserId)(t),d=await k().callApi({eventName:"loginWithMicrosoftAuth",environment:t,data:{code:r,encryptedToken:o,encryptedNonce:n,callbackType:i,state:a,source:l}});if("success"===d.type){const{isNewSignup:e,userId:o}=d.data;await je({environment:t,isNewSignup:e,userId:o,previousPersistedUserId:c,loginMethod:"login-with-microsoft",webBrowserDeviceId:s})}else{await Qe(t,d);if(!Ze(t,d)){return(0,$().Hu)(Q().A.getIntl(),d)}}}function Re(e,t){we().Wq(e),e.mobileNative?xe(e,t):e.device.isElectronAny?(s().log({level:"info",from:"loginActions",type:"redirectToSamlOnDesktop",data:{miscDataToConvertToString:{redirectUrl:t}}}),C().P(t)):window.location.href=t}async function Ee(e){const{environment:t,csrfState:o,token:n,isNewSignup:r}=e,i=await(0,Y().loadCurrentUserId)(t),a=await G().getBrowserId(t);o||n||s().log({level:"error",type:"loginSamlUserWithToken",from:"loginActions",error:{stack:(new Error).stack},data:{miscDataToConvertToString:{deviceId:a,isNewSignup:r}}});const l=await k().callApi({eventName:"loginWithEmail",environment:t,data:{state:o,password:n}});if("success"!==l.type)return await Qe(t,l),(0,$().Hu)(Q().A.getIntl(),l);{const{userId:e}=l.data;await je({environment:t,isNewSignup:r,userId:e,previousPersistedUserId:i,loginMethod:"saml"})}}async function De(e){const{environment:t,csrfState:o,password:n,loginStore:r}=e,i=await(0,Y().loadCurrentUserId)(t);if(!o){const e=await G().getCookie(t,"notion_browser_id");s().log({level:"error",type:"loginPasswordReset",from:"loginActions",error:{stack:(new Error).stack},data:{miscDataToConvertToString:{deviceId:e,previousPersistedUserId:i}}})}const a=await k().callApi({eventName:"loginWithEmail",environment:t,data:{state:o,password:n,passwordReset:!0}});if("success"!==a.type)return await Qe(t,a),(0,$().Hu)(Q().A.getIntl(),a);{const{userId:e,enabledMfaSettings:o}=a.data;o&&o.length>0?(qe({environment:t,isNewSignup:!1,userId:e,previousPersistedUserId:i,loginMethod:"password-reset",loginStore:r,mfaSettings:o}),N().navigateOnBaseUrl({environment:t,url:d().JZ.login}),X().r({environment:t})):(await je({environment:t,isNewSignup:!1,userId:e,previousPersistedUserId:i,loginMethod:"password-reset"}),X().r({environment:t}))}}async function Ne(e){const{environment:t,userId:o,previousUserId:n,isNewSignup:r}=e;await je({environment:t,isNewSignup:r,userId:o,previousPersistedUserId:n,loginMethod:"saml"})}async function Le(e){var t;const{environment:o,attestation:n,attemptId:r,showInvitationVersion:i}=e,a=await(0,Y().loadCurrentUserId)(o),s=await k().callApi({eventName:"loginWithPasskeyVerifyChallenge",environment:o,data:{attemptId:r,attestation:n}});if("failed"===s.type&&"CantAccessWorkspaceFromNetworkError"===(null===(t=s.body)||void 0===t?void 0:t.name))throw new(l().Cd)({type:"cant_access_workspace_from_network"});return"success"===s.type&&(!(!s.data.verified||!s.data.userId)&&void(await je({environment:o,isNewSignup:!1,userId:s.data.userId,loginMethod:"passkey",previousPersistedUserId:a,showInvitationVersion:i})))}async function Fe(e){const{environment:t,userId:o,logoutOrigin:n,fcmToken:r}=e,{nextUserId:a,nextSpaceViewStore:s}=function(e){const{environment:t,userId:o}=e,n=t.currentUser.id;if(o===n){const e=ce().A.getAllSpaceViewStores(t).filter((e=>{const t=e.getUserRootParentId();return t&&t!==o}))[0];return{nextUserId:e&&e.getUserRootParentId(),nextSpaceViewStore:e}}{const{currentSpaceViewStore:e}=ue().default.state;return{nextUserId:n,nextSpaceViewStore:e}}}(e);if(a&&s){if(await ge().transactionQueue.hasTasksForUser(o)){const{accept:e}=await A().Gh({message:Q().A.formatMessage(ke.unsavedChanges),acceptLabel:Q().A.formatMessage(ke.logoutWithoutSaving)});if(!e)return}r&&R().invalidateToken({environment:t,userId:o,token:r}),await k().callApi({eventName:"logout",environment:t,data:{userId:o,logoutOrigin:n}}),await ge().transactionQueue.clearForUser(o),ee().sw({isMobileNative:t.device.isMobileNative,userId:o});const e=await U().T({environment:t,newCurrentUserId:a,loggedOutUserId:o}),{currentUserRootStore:l,currentUserSettingsStore:c}=ue().default.state;if(l&&c){t.currentUser.id===o&&F().tR({environment:e,spaceViewStore:s,userSettingsStore:c,userRootStore:l,pageVisitSource:i().y8.Login,navigationType:"switchingToOrLoadingSpace"})}x().refreshAll({includeFocusedWindow:!1})}else await Ue(t),x().refreshAll({includeFocusedWindow:!1})}async function Ue(e){if(await ge().transactionQueue.anySessionHasTasks()){const{accept:e}=await A().Gh({message:Q().A.formatMessage(ke.unsavedChanges),acceptLabel:Q().A.formatMessage(ke.logoutWithoutSaving)});if(!e)return}if((0,J().w6)(e))return void(window.location.href=`${z().A.domainBaseUrl}/logout`);if(!me().default.checkGate({gateName:"dot_com_cookie_sync"})||e.device.isElectron||e.device.isNative)N().oo({environment:e,url:d().JZ.logout});else{const o=`${z().A.front.domainBaseUrl}/front-api/status`;let n;try{n=await fetch(o)}catch(t){return void N().oo({environment:e,url:d().JZ.logout})}if(!n||200!==n.status)return void N().oo({environment:e,url:d().JZ.logout});const r=`${z().A.front.domainBaseUrl}/front-api/cookie-sync?logout=true&original_url=/logout`;N().oo({environment:e,url:r})}}async function Oe(e){if(e.mobileNative&&await e.mobileNative.unregisterPushNotifications(),e.updateCurrentUserId){const t={environment:e,currentUserId:void 0,userIds:[]};e.updateCurrentUserId(t)}return{...e,currentUser:new(n().CurrentUser)}}async function Ve(e){const{environment:t,nextLocation:o,userId:n,doNotRedirect:r,logoutOrigin:i}=e;n?await k().callApi({eventName:"logout",environment:t,data:{userId:n,logoutOrigin:i}}):await k().callApi({eventName:"logout",environment:t,data:{logoutOrigin:i}}),await Ie(t),x().clearGoogleAuthCookies(),x().refreshAll({includeFocusedWindow:!1}),r||(window.location.href=o||d().JZ.root)}async function je(e){const{environment:t,isNewSignup:o,userId:n,redirectURL:i,previousPersistedUserId:l,frontPathName:u,webBrowserDeviceId:m,passcodeEnterMethod:g,showInvitationVersion:f}=e;o||((0,_e().Os)()&&ae().A.setState({open:!0,isExistingUser:!0}),B().m({message:ke.loginPendingMessage}));try{var v,h,_;const A=ye().T_(t);E().IL(t),t.device.isElectron&&(x().clearBrowserHistory(),x().refreshAll({includeFocusedWindow:!1}));const C=me().default.checkGate({gateName:"enable_oauth_from_desktop_ux_v2"}),B=(0,p().KB)({config:C?z().A:void 0,fileHostProtocol:z().A.secureFileConfig.protocol,fileHostName:z().A.secureFileConfig.hostname});if(l&&l!==n){const e=await ge().transactionQueue.getTotalNumberOfTasks();e>5&&s().log({level:"warning",from:"loginActions",type:"setLoggedInUserId",data:{userId:n,currentUserId:l,clearedTransactionCount:e}}),await Ie(t,A,!t.currentUser.loggedInUserIds.includes(l))}if(!l){const e=M().MC(void 0);M().Yi({currentUserId:n,blockId:e}),M().Yi({currentUserId:void 0,blockId:void 0})}const R=await He(t,n);if(o){!function(e,t){(0,j().T)({environment:e,userId:(0,y().ot)(t.user_id),traits:{...t,...t.tags?{original_tags:t.tags}:void 0,user_id:(0,y().ot)(t.user_id)}})}(R,{user_id:n,tags:(0,p().sY)(),origin_initial_page:L().getInitialPage(n)});const t=await(0,W().PZ)(R),r=(0,q().A)();await(0,b().nQ)(200,k().callApi({eventName:"initializeUserAnalyticsEmptySync",environment:R,data:{isNewSignup:o,analyticsProperties:(0,a().A)({...(0,W().LU)(),...(0,W().V4)(),...(0,Z().getMobileNativeDeviceInfo)(),...t,experiments:me().default.getExperimentsMap(),login_method:e.loginMethod,signup_from:t.route_name,front_pathname:u,web_browser_device_id:m,passcode_enter_method:g,is_form_signup:r},"ignore-class-instances")}}))}else p().SQ();let F=i;F||"other"!==(null==B?void 0:B.type)||(F=B.result,(0,p().HP)());const U=p().$m();let O;if(U&&!o&&(D().V(U.formResponseId,U.formSecretKey,U.formSpaceId),p().ip()),F&&(O=c().parseRoute({url:F,isMobile:R.device.isMobile,baseUrl:z().A.domainBaseUrl,publicDomainName:z().A.publicDomainName,protocol:z().A.protocol,currentUrl:window.location.href})),O)if("space"===O.name||"page"===O.name&&!O.shouldDuplicate)P().fm({route:O,userId:n,spaceId:O.spaceId});else if(O&&"oauthAuthorization"===O.name){const{responseType:e,redirectUri:t,integrationId:o,state:n,owner:r,userId:i,spaceId:a}=O;(0,p().NI)({responseType:e,redirectUri:t,integrationId:o,state:n,owner:r,userId:i,spaceId:a})}var I;if(T().cL(),await T().fD(R),await(0,b().nQ)(2e3,T().DM(R)),o)me().default.logEvent("sign_up",void 0,{login_method:e.loginMethod,device_type:t.device.deviceType,redirect_route_name:null===(I=O)||void 0===I?void 0:I.name}),me().default.logEvent("sign_up_by_login_method",e.loginMethod),me().default.logEvent("sign_up_by_device_type",t.device.deviceType);if(we().c3(R,{is_new_signup:o,login_method:e.loginMethod,logged_in_user_ids:R.currentUser.loggedInUserIds.map((e=>(0,y().ot)(e))),most_recent_user_id:(0,y().ot)(n),web_browser_device_id:m,passcode_enter_method:g,userId:n}),function(e,t){switch(se().default.measure("login_time",{environment:t,data:{loginMethod:e}}),e){case"login-with-google-onetap":case"login-with-google":se().default.measure("login_time.google",{environment:t});break;case"login-with-microsoft":se().default.measure("login_time.microsoft.verified",{environment:t});break;case"login-with-apple":se().default.measure("login_time.apple",{environment:t});break;case"password-mfa":case"password":se().default.measure("login_time.password",{environment:t,data:{loginMethod:e}});break;case"temporary-passcode":se().default.measure("login_time.passcode",{environment:t});break;case"passkey":se().default.measure("login_time.passkey",{environment:t})}}(e.loginMethod,R),r().u4({device:R.device,event:{facebook:{eventName:"ViewContent"},google:{eventName:"loggedIn"}},cookieService:t.cookieService}),z().A.isAdminMode){if(!(await G().getGhostAdminUserId(t)))return void N().oo({environment:t,url:"/__admin"})}const V=!(null===(v=F)||void 0===v||!v.startsWith(`${z().A.mail.domainBaseUrl}/`)),H=t.device.isElectronMail,K=!(null===(h=F)||void 0===h||!h.startsWith(`${z().A.calendar.domainBaseUrl}/`))||!(null===(_=F)||void 0===_||!_.startsWith(`${z().A.domainBaseUrl}/calendarAuth/`));if("oauth"===(null==B?void 0:B.type)||"file"===(null==B?void 0:B.type)||"global_oauth"===(null==B?void 0:B.type))(0,p().HP)(),null!=B&&B.result&&(await ge().transactionQueue.drain(),ze({environment:R,reload:!0,url:null==B?void 0:B.result}));else if(!A&&l&&l!==n)ze({environment:R,reload:!0,url:d().JZ.root});else if(o)ze(f?{environment:R,url:d().JZ.onboarding}:F?{environment:R,url:F}:{environment:R,url:d().JZ.root});else if(!F||!O||V||K||H||!(0,S().O)(d().GJ,O.name)&&"page"!==O.name&&"samlAuthCallback"!==t.RouterStore.state.initialRoute.name&&"passkeyAuthCallback"!==t.RouterStore.state.initialRoute.name)if(F&&V)ze({environment:R,url:`${F}#activeUserID=${n}`});else if(F&&K||"calendar"===p().dY()&&!o)await ge().transactionQueue.drain(),await(0,ne().J7)({environment:R,url:`${z().A.domainBaseUrl}/calendarAuth/`,from:"handleLoginSuccessRedirect",targetSelf:!0}),p().$A();else if(F&&H&&("googleAuthCallback"===t.RouterStore.state.route.name||"appleAuthCallback"===t.RouterStore.state.route.name||"samlAuthCallback"===t.RouterStore.state.route.name||"passkeyAuthCallback"===t.RouterStore.state.route.name))ze({environment:R,url:`${F}#activeUserID=${n}`});else if("mail"!==p().dY()||o){const e=new URLSearchParams(window.location.search).get("prompt"),o=e&&(0,be().u_)(t)?w().O$(d().JZ.workflowTemplates,{t:"aiBuilder",prompt:e}):d().JZ.root;ze({environment:R,url:(0,p().f3)()??o}),(0,p().zt)()}else await ge().transactionQueue.drain(),await(0,re().Z)({environment:R,from:"handleLoginSuccessRedirect",targetSelf:!0});else ze({environment:R,url:F})}finally{B().V()}}function ze(e){const{environment:t,url:o,reload:n}=e;n?window.location.href=o:(I().cL(t),N().oo({environment:t,url:o}))}function qe(e){const{loginStore:t,userId:o}=e,n=new(fe().LU)(e.environment,{table:u().oo,id:o},{userId:o});t.setState({...t.state,settings:e.mfaSettings,loginType:"mfa",redirectURL:e.redirectURL,previousPersistedUserId:e.previousPersistedUserId,userStore:n})}async function He(e,t){await async function(e,t){await We(e,t)}(e,t);let o=[t];const r=await(0,Y().G)(e);r&&(r.push(t),o=h().sb(r));const i=await G().getGhostAdminUserId(e),a={...e,currentUser:new(n().CurrentUser)({id:t,loggedInUserIds:o,adminUserId:i})};if(e.updateCurrentUserId){const n={environment:e,currentUserId:t,userIds:o};await e.updateCurrentUserId(n)}return a.device.isFirefox||ee().Ce(),a}async function We(e,t){const o=await(0,Y().G)(e);o&&!o.includes(t)||m().A.set(Y().l,t)}async function Ke(e){const t=await(0,Y().loadCurrentUserId)(e),{mobileNative:o}=e;if(o&&o.sqliteConnection)try{await v().Jm(o.sqliteConnection,t||f().m)}catch(n){s().log({level:"error",from:"loginAction.ts",type:"backfillRecordsWithUserId",error:(0,_().n6)(n),data:{}})}return t?await He(e,t):e}async function Ge(){var e;const{currentUserStore:t}=ue().default.state;if(!t)return!1;if(!t.getEmail())return!1;const{currentUserSettingsStore:o}=ue().default.state;return!!o&&(await o.load(),Boolean(null===(e=o.getSettings())||void 0===e?void 0:e.should_set_password_on_login))}async function $e(e){const{currentUserStore:t}=ue().default.state;if(!t)return!1;const o=t.getEmail();if(!o)return!1;const n=await X().V({environment:e,userEmail:o});if(n.error)throw n.error;return!n.value.isSamlEnforced&&!n.value.hasPassword&&!n.value.didLogInWithSaml}async function Ye(e){var t;const o=null===(t=ue().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(!o)return!1;const n=await pe().A.awaitData(e,{spaceId:o});return"student"===(0,g().AI)(n)}async function Qe(e,t){var o,n;if("saml_sso_required"===(null===(o=t.body.clientData)||void 0===o?void 0:o.type)&&null!==(n=t.body.clientData)&&void 0!==n&&n.redirectUrl){await Xe(2e3);Re(e,t.body.clientData.redirectUrl)}}function Ze(e,t){if((0,l().op)(t.body)&&"email_verification_required"===t.body.clientData.type){const{email:o,thirdPartyToken:n}=t.body.clientData;return te().A.setState({...te().A.state,loginType:"microsoft_login",email:o,thirdPartyToken:n,needsSendTemporaryPasswordReason:"microsoft_login_verification"}),N().navigateOnBaseUrl({environment:e,url:d().JZ.login}),!0}return!1}async function Xe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;B().m({message:ke.redirectSamlMessage}),await(0,b().wR)(e),B().V()}},721265:(e,t,o)=>{o.d(t,{p:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("lockedKeyhole",{viewBox:"0 0 64 64",svg:(0,n.jsx)("path",{d:"m44,26v-6c0-7.4-4.6-12-12-12s-12,4.6-12,12v6h-8v30h40v-30h-8Zm-18-6c0-4.09,1.91-6,6-6s6,1.91,6,6v6h-12v-6Zm11,28v2h-10v-2l2.51-6.69c-1.49-.86-2.51-2.46-2.51-4.31,0-2.76,2.24-5,5-5s5,2.24,5,5c0,1.85-1.02,3.45-2.51,4.31l2.51,6.69Z"})})},722038:(e,t,o)=>{o.d(t,{y:()=>i});var n=()=>o(484714),r=()=>o(963589);function i(){const{device:e}=(0,n().v3)(),t=e.isElectron||e.isMobileNative;return(0,r().X)("download_for_offline")&&t}},722101:(e,t,o)=>{o.d(t,{B8:()=>p,BC:()=>m,Br:()=>l,Hs:()=>g,TF:()=>u,WH:()=>c,Yb:()=>f,nc:()=>d});o(944114);var n=()=>o(508496),r=()=>o(826810),i=()=>o(44729),a=()=>o(257216),s=()=>o(317909);function l(e){const{parentStore:t,oldChildStore:o,newChildStore:n,transaction:r}=e,i=o.id,l=n.id,c=(t.getValue()||[]).indexOf(i);a().Zd({parentStore:t,childStore:n,transaction:r}),a().Bu({parentStore:t,childStore:o,transaction:r}),c>=0&&(s().applyOperation({transaction:r,store:t,operation:{pointer:t.pointer,path:t.path,command:"listAfter",args:{id:l,after:i}}}),s().applyOperation({transaction:r,store:t,operation:{pointer:t.pointer,path:t.path,command:"listRemove",args:{id:i}}}));return{parentStore:t,childStore:n.cloneWithNewUIParent(t)}}function c(e){const{parentStore:t,insertStore:o,afterStore:r,transaction:l,preferHighLevelOperations:c}=e;let d;r&&(d=r.id),c&&n().default.checkGate({gateName:"prefer_high_level_operations"})?(l.annotateWithDebugTag("tx_tag.prefer_high_level_operations"),i().NI({childStore:o,parentStore:t,transaction:l,after:d})):(a().Zd({parentStore:t,childStore:o,transaction:l}),s().applyOperation({transaction:l,store:t,operation:{pointer:t.pointer,path:t.path,command:"listAfter",args:{after:d,id:o.id}}}));return{parentStore:t,childStore:o.cloneWithNewUIParent(t)}}function d(e){const{parentStore:t,insertStore:o,beforeStore:n,transaction:r}=e;let i;n&&(i=n.id),a().Zd({parentStore:t,childStore:o,transaction:r}),s().applyOperation({transaction:r,store:t,operation:{pointer:t.pointer,path:t.path,command:"listBefore",args:{before:i,id:o.id}}});return{parentStore:t,childStore:o.cloneWithNewUIParent(t)}}function u(e){void 0===e.shouldGarbageCollect&&(e.shouldGarbageCollect=!0);const{parentStore:t,childToRemoveStore:o,shouldGarbageCollect:i,transaction:l}=e;if(a().Bu({parentStore:t,childStore:o,transaction:l}),s().applyOperation({transaction:l,store:t,operation:{pointer:t.pointer,path:t.path,command:"listRemove",args:{id:o.id}}}),i&&l.preEnqueueActions.push((()=>{r().Si({parentStore:t,transaction:l})})),n().default.checkGate({gateName:"docs_list_actions_remove_no_clone"}))return{parentStore:t,childStore:o};const c=o.cloneWithNewUIParent(t);return{parentStore:t,childStore:c}}function p(e){const{parentStore:t,appendStore:o,transaction:n}=e;a().Zd({parentStore:t,childStore:o,transaction:n}),s().applyOperation({transaction:n,store:t,operation:{pointer:t.pointer,path:t.path,command:"keyedObjectListAfter",args:{value:o.pointer,after:void 0}}});return{parentStore:t,childStore:o.cloneWithNewUIParent(t)}}function m(e){const{parentStore:t,appendStore:o,transaction:n,after:r}=e;a().Zd({parentStore:t,childStore:o,transaction:n}),s().applyOperation({transaction:n,store:t,operation:{pointer:t.pointer,path:t.path,command:"listAfter",args:{id:o.id,after:r}}});return{parentStore:t,childStore:o.cloneWithNewUIParent(t)}}function g(e){const{parentStore:t,prependStore:o,transaction:n,before:r}=e;a().Zd({parentStore:t,childStore:o,transaction:n}),s().applyOperation({transaction:n,store:t,operation:{pointer:t.pointer,path:t.path,command:"listBefore",args:{id:o.id,before:r}}});return{parentStore:t,childStore:o.cloneWithNewUIParent(t)}}function f(e){const{parentStore:t,currentStore:o,afterStore:n,transaction:r}=e;n?c({parentStore:t,insertStore:o,afterStore:n,transaction:r}):g({parentStore:t,prependStore:o,transaction:r});return{parentStore:t,childStore:o.cloneWithNewUIParent(t)}}},722559:(e,t,o)=>{o.d(t,{$s:()=>c,K0:()=>m,zL:()=>d,Q3:()=>u,tr:()=>p});o(16280);var n=()=>o(690495),r=()=>o(917629);const i=["Modal","SidebarFooter","Tooltip","None"],a={modal:"Modal",sidebar:"SidebarFooter",static:void 0,empty:"None"},s={modal:["desktop"],sidebar:["desktop"],static:[],empty:["desktop"]};function l(e){const t=(0,r().h2)(e);if(!t)throw new Error(`Invalid static message key: ${e}`);return t}function c(e){if(!e)return;const t=e;return i.includes(t)?t:void 0}function d(e){if(e.isDesktop)return"desktop";if(e.isMobileBrowser)return"mobile-web";if(e.isMobileNative){if(e.isApple)return"mobile-ios";if(e.isAndroid)return"mobile-android"}throw new Error(`Unsupported device: ${e}`)}function u(e){if("static"===e.type){const t=l(e.key);return(0,r().t9)(t)}const t=a[e.type];if(!t)throw new Error(`No placement for type: ${e.type}`);return t}function p(e){if("static"===e.type){const t=l(e.key);return n().lU[t].platforms}return s[e.type]}function m(e){if("static"===e.type){const t=l(e.key);return n().lU[t].dismissal_type}return"once_per_user"}},722872:(e,t,o)=>{o.d(t,{Tf:()=>a,gu:()=>r,xu:()=>i});var n=o(296540);let r=function(e){return e[e.Modal=0]="Modal",e[e.ActionSheet=1]="ActionSheet",e[e.Popup=2]="Popup",e}({});const i=(0,n.createContext)({menuType:void 0,enableMobileRefresh:void 0});function a(){return(0,n.useContext)(i).enableMobileRefresh??!1}i.displayName="MenuContext"},724456:(e,t,o)=>{o.d(t,{H:()=>_});o(898992),o(354520),o(672577),o(581454);var n=()=>o(592269),r=()=>o(970013),i=()=>o(206267),a=()=>o(912720),s=()=>o(161479),l=()=>o(496603),c=()=>o(183558),d=()=>o(449506),u=()=>o(751086),p=()=>o(246826),m=()=>o(317909),g=()=>o(594794),f=()=>o(972435),v=()=>o(508496);function h(e){const{environment:t,collectionStore:o,property:n,transaction:s}=e,l=o.getSchema()[n];if(!l||!r().nu(l))return;const c=(0,g().Z1)({environment:t,table:a().yB,spaceId:o.getSpaceId()});p().eC({environment:t,table:a().yB,inMemoryRecordCache:o.inMemoryRecordCache,value:{id:c,parent_id:o.id,parent_table:o.table,alive:!0,space_id:o.getSpaceId(),status:"active",trigger:{id:i().JW(),type:"button"}},transaction:s}),p().zv({store:o.getSchemaStore(),data:{[n]:{...l,automation_id:c}},transaction:s})}function _(e){const{environment:t,collectionStore:o,oldSchema:i,newSchema:a,transaction:g}=e,_=r().q(i),b=r().q(a),y=Object.keys(b),S=v().default.checkGate({gateName:"collections_property_type_change_rename_group"});for(const s of y){const e=_[s],i=b[s];if(i){if("status"===i.type&&"status"!==(null==e?void 0:e.type)){let a;a="select"===(null==e?void 0:e.type)||"multi_select"===(null==e?void 0:e.type)?(0,n()._)(i.name,e.options??[],f().A.getIntl()):i.groups&&i.options&&i.defaultOption?i:r().D(i.name,f().A.getIntl());const l={...b,[s]:a};if(p().zv({store:o,data:{schema:l},transaction:g}),"checkbox"===(null==e?void 0:e.type)&&"status"===i.type){const e=a.groups??[],n=e[e.length-1];n&&(0,u().a)({environment:t,collectionStore:o,property:s,oldValue:{type:"checkbox",value:!0},newValue:{type:"status",value:{type:"by_group",group:n.name}},transaction:g,preventPublishAppEventsForBlockUpdates:S})}}if("status"===(null==e?void 0:e.type)&&"checkbox"===i.type){const n=e.groups??[],r=e.options??[],i=n[n.length-1],a=r.filter((e=>{var t;return null==i||null===(t=i.optionIds)||void 0===t?void 0:t.includes(e.id)}));for(const e of a)(0,u().a)({environment:t,collectionStore:o,property:s,newValue:{type:"checkbox",value:!0},oldValue:{type:"status",value:{type:"by_option",option:e.value}},transaction:g,preventPublishAppEventsForBlockUpdates:S})}}}for(const n of y){const e=_[n],i=b[n];!i||e&&r().lx(e)||!r().lx(i)||d().callApi({eventName:"getSelectPropertyValues",environment:t,data:{collection:{id:o.id,spaceId:(0,s().e)(o.pointer.spaceId)},property:n}}).then((e=>{if("failed"===e.type)throw e.error;const{results:a}=e.data,s=i.options||[],d=r().q(o.getSchema()),u=l().hS([...s,...a.map((e=>({id:(0,c().Ay)(),value:e})))],(e=>e.value));for(const t of u)t.color||(t.color=r().Zd(u));const g={...i,options:u},f={...d,[n]:g};m().createAndCommit({userAction:"collectionViewActions.handleCollectionSchemaUpdated",environment:t,canUndo:!0,perform:e=>{p().zv({store:o,data:{schema:f},transaction:e})}})})).catch((()=>{}))}const w=l().sb([...Object.keys(_),...Object.keys(b)]);for(const n of w){const e=_[n],i=b[n],a=e&&r().lx(e)||"status"===(null==e?void 0:e.type),s=i&&r().lx(i)||"status"===(null==i?void 0:i.type);if(a&&s&&e.type===i.type){const r=i,a=e.options||[],s=r.options||[],c=l().sb([...a.map((e=>e.id)),...s.map((e=>e.id))]);for(const l of c){const r=a.find((e=>e.id===l)),c=s.find((e=>e.id===l));if(r&&c&&r.value!==c.value){const a="status"===e.type?{type:"status",value:{type:"by_option",option:r.value}}:{type:e.type,value:r.value},s="status"===i.type?{type:"status",value:{type:"by_option",option:c.value}}:{type:i.type,value:c.value};(0,u().a)({environment:t,collectionStore:o,property:n,oldValue:a,newValue:s,transaction:g,preventPublishAppEventsForBlockUpdates:!1})}}}}for(const n of w){const e=b[n];"button"!==(null==e?void 0:e.type)||e.automation_id||h({environment:t,collectionStore:o,property:n,transaction:g})}}},725614:(e,t,o)=>{o.r(t),o.d(t,{arrowDownMultiText:()=>$,arrowLeftMultiText:()=>Y,arrowRightMultiText:()=>Q,arrowUpMultiText:()=>G,blurActiveElement:()=>q,clear:()=>H,clearForceExtendAnnotations:()=>E,clearSavedSelectionXPosition:()=>O,editNearestBlock:()=>Z,editNearestBlockOrInsertIfAtBottomOfPage:()=>X,insertIfAtBottomOfColumn:()=>J,maybeHandleExpectedBrowserSelectionUpdate:()=>j,saveSelectionXPosition:()=>U,selectAllText:()=>F,selectAllTextMulti:()=>L,selectAndEditMultiSelection:()=>ee,setExtendAnnotation:()=>R,setMultiSelection:()=>T,setSelection:()=>P,setSelectionAtEnd:()=>N,setSelectionAtStart:()=>D,setSelectionComposing:()=>M,syncTextSelection:()=>oe,toggleExtendAnnotation:()=>B,updateFromBrowserSelectionAfterTick:()=>z});o(944114),o(898992),o(672577),o(737550);var n=()=>o(908006),r=()=>o(919709),i=()=>o(496603),a=()=>o(625325),s=()=>o(295740),l=()=>o(281322),c=()=>o(231722),d=()=>o(962845),u=()=>o(969197),p=()=>o(906537),m=()=>o(792002),g=()=>o(301421),f=()=>o(695625),v=()=>o(919878),h=()=>o(980914),_=()=>o(508496),b=()=>o(502438),y=()=>o(24157),S=()=>o(448619),w=()=>o(501666),k=()=>o(547392),I=()=>o(778417),A=()=>o(606952),x=()=>o(317909);const C=!1;function T(e){const{multiSelection:t,readOnly:o,forceEmit:n}=e,r=y().default.state,i="empty"!==r.mode&&r.savedSelectionXPosition||void 0,a="editing"===r.mode&&(0,c().cL)(r.multiSelection,t)?r.forceExtendAnnotations:{},s=o?{mode:"readOnly",multiSelection:t,savedSelectionXPosition:i}:{mode:"editing",multiSelection:t,savedSelectionXPosition:i,forceExtendAnnotations:a};if(s.mode!==r.mode||!(0,c().OH)(r.multiSelection,t))return y().default.setState(s),void v().RC();n&&y().default.emit()}function M(e,t){if(!("always"===(0,d().fF)(e)))return;const{TextSelectionCompositionStore:o}=e;o.setState({isComposing:t})}function P(e){const{store:t,selection:o,readOnly:n}=e;if(o){return void T({multiSelection:(0,c().$U)({store:t,selection:o}),readOnly:n})}const r={store:t,index:0},i={start:r,end:r};n?y().default.setState({mode:"readOnly",multiSelection:i,savedSelectionXPosition:0}):y().default.setState({mode:"editing",multiSelection:i,forceExtendAnnotations:{},savedSelectionXPosition:0})}function B(e){const{annotation:t}=e;if(r().EKZ[r()._XS(t)])return;const o=r().Aux(t),n=(0,m().I6)("default").findFirstOfGroupingKey(o);R(n?{annotation:n,extend:!1}:{annotation:t,extend:!0})}function R(e){const{annotation:t,extend:o}=e,n=y().default.state,i=r()._XS(t);"editing"===n.mode&&y().default.setState({...n,forceExtendAnnotations:{...n.forceExtendAnnotations,[i]:{annotation:t,extend:o}}})}function E(){const e=y().default.state;"editing"===e.mode&&y().default.setState({...e,forceExtendAnnotations:{}})}function D(e){const{store:t}=e;P({store:t,selection:{startIndex:0,endIndex:0}})}function N(e){const{store:t}=e;P({store:t,selection:(0,m().s6)(t)})}function L(e){var t;E();const{environment:o,store:n,canSelectAllBlocks:r,contentEditableContextId:i}=e,a=y().default.state,s="empty"===a.mode?{start:{store:n,index:0},end:{store:n,index:0}}:a.multiSelection,l={start:{store:s.start.store,index:0},end:{store:s.end.store,index:(null===(t=(0,m().s6)(s.end.store))||void 0===t?void 0:t.endIndex)||0}};if(!(0,c().OH)(l,s))return void T({multiSelection:l});const d=_().default.checkGate({gateName:"never_select_title_on_select_all"})&&(0,u().xK)(o.device);if(i&&!d){const e=(0,m().lr)(),t=e=>{var t;return(null===(t=e.contentEditableContext)||void 0===t?void 0:t.id)===i},o=e.find(t),n=e.reverse().find(t);if(o&&n){const e=o.props.store,t=n.props.store;if(e&&t){var p;return void T({multiSelection:{start:{store:e,index:0},end:{store:t,index:(null===(p=(0,m().s6)(t))||void 0===p?void 0:p.endIndex)||0}}})}}}r&&(0,u().xK)(o.device)&&I().Ub(o)}function F(e){var t;E();const{environment:o,store:n,canSelectAllBlocks:r}=e,i=(0,m().s6)(n),a={startIndex:0,endIndex:i?i.endIndex:0};r&&"empty"!==y().default.state.mode&&(0,m().GZ)(null===(t=(0,d().cR)("textSelectionActions",y().default.state.multiSelection))||void 0===t?void 0:t.selection,a)?I().Ub(o):P({store:n,selection:a})}function U(e){const t=y().default.state;"empty"===t.mode||t.savedSelectionXPosition||y().default.setState({...t,savedSelectionXPosition:e.savedSelectionXPosition})}function O(){"empty"!==y().default.state.mode&&y().default.setState({...y().default.state,savedSelectionXPosition:void 0})}let V=[];function j(e){if(0===V.length)return!1;C&&console.log("maybeHandleExpectedBrowserSelectionUpdate",e);const t=V;V=[];for(const o of t)o();return!0}function z(e){const{store:t,contentEditableLeafRegistry:o,avoidEdgesOfContentEditableRoot:r,selection:i}=e;V.push((()=>{const e=p().get(),n=(0,d().GI)({contentEditableLeafRegistry:o,range:e,allowInvisibleEndSelection:(0,l().r)().shift,avoidEdgesOfContentEditableRoot:r});n?T(n):P({store:t,selection:i})})),n().default.afterNextFlush((()=>j("renderQueueFlush")))}function q(){const e=document.activeElement;e instanceof HTMLElement&&e.blur()}function H(e){let{environment:t,preventDismissMobileKeyboard:o}=e;p().clear(t),"empty"!==y().default.state.mode&&y().default.setState({mode:"empty"}),!o&&t.device.isIOS&&_().default.checkGate({gateName:"ios_clear_selection_auto_dismiss_keyboard"})&&q()}function W(e){const{currentEditableTopBottomPadding:t,targetEdge:o,targetEditable:n,selectionXPosition:r}=e,s=n.getNode();if(!(s&&s instanceof Element))return;const l=s.getBoundingClientRect(),c=Math.min(Math.max(r,l.left),l.right),d=Math.min(t,n.props.topBottomPadding),u="top"===o?l.top:l.bottom;return function(e,t,o){const n=new Map,r={visibility:"hidden"},s=Object.keys(r);let l;try{for(;l=p().rangeFromPoint(e,t);){if(o.contains(l.commonAncestorContainer))return l;const e=(0,a().B)(l.commonAncestorContainer);if(!e)return;if(n.has(e))return;const t=i().Up(e.style,s);n.set(e,t),Object.assign(e.style,r)}}finally{for(const[e,t]of n)Object.assign(e.style,t)}}(c,"top"===o?u+d:u-d,s)}function K(e){const{focusContainerOffset:t,focusStore:o,edge:n,topBottomPadding:r}=e,i=g().n.findNodeFromStore(o);if(!(i&&i instanceof Element))return;const a=p().getRect(p().rangeFromContainerOffsets({start:t,end:t})),s=i.getBoundingClientRect();if(!a||!s)return;const[l,c]="top"===n?[a.top,s.top]:[a.bottom,s.bottom];return{focusIsAtEdge:Math.abs(l-c)<=r,focusSelectionRect:a,renderedNode:i,renderedNodeRect:s}}function G(e){const{environment:t,event:o,topBottomPadding:n,contentEditableLeafRegistry:r}=e,i=p().get();if(!i)return;E();const a=y().default.state;if("empty"===a.mode)return;const{multiSelection:l}=a,{focus:u,anchor:f}=(0,d().w_)(l),_=K({focusContainerOffset:p().rangeToContainerOffsets(i).focus,focusStore:u.store,topBottomPadding:n,edge:"top"});if(!_)return;const{focusIsAtEdge:b,focusSelectionRect:S}=_,w=h().wg(),k=w?h().eE(w):(0,m().H4)(u.store),A=k&&g().n.findEditableWithStore(k);if(b&&A){var x;const e=Math.max(a.savedSelectionXPosition||0,S.left),r=W({targetEditable:A,targetEdge:"bottom",currentEditableTopBottomPadding:n,selectionXPosition:e}),l=(null===(x=(0,d().GI)({range:r,contentEditableLeafRegistry:void 0,allowInvisibleEndSelection:!0}))||void 0===x?void 0:x.multiSelection)||(0,c().$U)({store:A.props.store,selection:(0,m().s6)(A.props.store)});if(o.shiftKey&&!o.altKey&&l&&(0,s().Id)(A.getNode(),i.commonAncestorContainer))return o.preventDefault(),U({savedSelectionXPosition:e}),void ee({environment:t,multiSelection:(0,d().hn)(l.start,f),focus:l.start,forceEmit:!1});if(!o.shiftKey&&!o.altKey&&l)return o.preventDefault(),U({savedSelectionXPosition:e}),void ee({environment:t,forceEmit:!1,multiSelection:l,focus:"start"})}if(o.shiftKey&&!o.altKey&&(0,m().LG)(u,l.start.store)){if(te(t))return void v().b9({environment:t,direction:"up",bypassExistingTextSelection:!1,expandSelection:!0});const e=(0,d().ZS)({multiSelection:l,focus:u,filterCommonAncestors:!0});if(e)return o.preventDefault(),void I().td({environment:t,...e})}z({store:u.store,contentEditableLeafRegistry:r,avoidEdgesOfContentEditableRoot:!0})}function $(e){const{environment:t,event:o,topBottomPadding:n,contentEditableLeafRegistry:r}=e,i=p().get();if(!i)return;E();const a=y().default.state;if("empty"===a.mode)return;const{multiSelection:l}=a,{focus:f,anchor:_}=(0,d().w_)(l),b=K({focusContainerOffset:p().rangeToContainerOffsets(i).focus,focusStore:f.store,topBottomPadding:n,edge:"bottom"});if(!b)return;const{focusIsAtEdge:S,focusSelectionRect:w}=b,k=h().wg(),A=k?h().qg(k):(0,m().J3)(f.store),x=A&&g().n.findEditableWithStore(A);if(S&&x){var C;const e=Math.max(a.savedSelectionXPosition||0,w.left),r=W({targetEditable:x,targetEdge:"top",currentEditableTopBottomPadding:n,selectionXPosition:e}),l=(null===(C=(0,d().GI)({range:r,contentEditableLeafRegistry:void 0,allowInvisibleEndSelection:!0}))||void 0===C?void 0:C.multiSelection)||(0,c().$U)({store:x.props.store,selection:{startIndex:0,endIndex:0}});if(o.shiftKey&&!o.altKey&&l&&(0,s().Id)(x.getNode(),i.commonAncestorContainer))return o.preventDefault(),U({savedSelectionXPosition:e}),void ee({environment:t,multiSelection:(0,d().hn)(l.start,_),focus:l.start,forceEmit:!1});if(!o.shiftKey&&!o.altKey&&l)return o.preventDefault(),U({savedSelectionXPosition:e}),void ee({environment:t,forceEmit:!1,multiSelection:l,focus:"end"})}const T=(0,u().T)(l.start.store);if(o.shiftKey&&!o.altKey&&(0,m().aO)(f,l.end.store)&&T){if(te(t))return void v().b9({environment:t,direction:"down",bypassExistingTextSelection:!1,expandSelection:!0});const e=(0,d().ZS)({multiSelection:l,focus:f,filterCommonAncestors:!0});if(e)return o.preventDefault(),void I().td({environment:t,...e})}z({store:f.store,contentEditableLeafRegistry:r,avoidEdgesOfContentEditableRoot:!0,selection:(0,m().s6)(f.store)})}function Y(e){n().default.afterNextFlush((()=>{O()})),E();const{environment:t,event:o,contentEditableLeafRegistry:i}=e,a=p().get(),l=y().default.state;if("empty"===l.mode)return;const{multiSelection:u}=l,{focus:f,anchor:h}=(0,d().w_)(u),_=f.store&&g().n.findEditableWithStore(f.store),b=(0,m().H4)(f.store),k=b&&g().n.findEditableWithStore(b);if((0,m().LG)(f,f.store)&&k&&_&&k.props.isDiscussionInput===_.props.isDiscussionInput){const e=(0,c().$U)({store:k.props.store,selection:(0,m().s6)(k.props.store)});if(o.shiftKey&&!o.altKey&&e&&(0,s().Id)(k.getNode(),null==a?void 0:a.commonAncestorContainer))return o.preventDefault(),void ee({environment:t,multiSelection:(0,d().hn)(e.start,h),focus:e.start,forceEmit:!1});if(!o.shiftKey&&!o.altKey&&e&&(0,c().kM)(u))return o.preventDefault(),void ee({environment:t,forceEmit:!1,multiSelection:e,focus:"start"})}if(o.shiftKey&&!o.altKey&&(0,m().LG)(f,u.start.store)){if(te(t))return void v().$G({environment:t,direction:"left",bypassExistingTextSelection:!1,expandSelection:!0});const e=(0,d().ZS)({multiSelection:u,focus:f,filterCommonAncestors:!0});if(e)return o.preventDefault(),void I().td({environment:t,...e})}if(o.altKey||o.shiftKey||o.ctrlKey||o.metaKey||!a||!a.collapsed)z({store:f.store,contentEditableLeafRegistry:i});else{const e=f.index-1,i=r().ANx(u.start.store.getValue(),e);if(i&&r().Qt6(i)){o.preventDefault(),T({multiSelection:{start:{...f,index:e},end:f}});const a={startIndex:e,endIndex:f.index};r().GiG(i)&&n().default.afterNextFlush((()=>{S().Wx({environment:t,selectedToken:{token:i,position:a},analyticsFrom:"arrow_keys"})}))}const a=r().aLI(f.store.getValue(),e,((e,t)=>{const o=r().So_(e);return t?Boolean(o&&r().So_(t)===o):Boolean(o)}));a&&w().fi({type:"selectionFocus",store:f.store,focus:!1,selection:a})}}function Q(e){n().default.afterNextFlush((()=>{O()})),E();const{environment:t,event:o,contentEditableLeafRegistry:i,editorMode:a}=e,l=p().get(),u=y().default.state;if("empty"===u.mode)return;const{multiSelection:f}=u,{focus:h,anchor:_}=(0,d().w_)(f),b=h.store&&g().n.findEditableWithStore(h.store),k=(0,m().J3)(h.store),C=k&&g().n.findEditableWithStore(k);if((0,m().oT)(u.multiSelection.start.store.getValue(),u.multiSelection.start.index-1,r().Ifu.Code)&&(0,m().aO)(h,h.store)&&(0,c().kM)(f))return o.preventDefault(),void x().createAndCommit({userAction:"textSelectionActions.arrowRightInCodeBlockAtEOL",environment:t,canUndo:!0,perform:e=>{A().$D({environment:t,editorMode:a,store:h.store,multiSelection:f,string:" ",transaction:e,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,disableFilters:!0})}});if((0,m().aO)(h,h.store)&&C&&b&&C.props.isDiscussionInput===b.props.isDiscussionInput){const e=(0,c().$U)({store:C.props.store,selection:{startIndex:0,endIndex:0}});if(o.shiftKey&&!o.altKey&&e&&(0,s().Id)(C.getNode(),null==l?void 0:l.commonAncestorContainer))return o.preventDefault(),void ee({environment:t,multiSelection:(0,d().hn)(e.start,_),focus:e.start,forceEmit:!1});if(!o.shiftKey&&!o.altKey&&e&&(0,c().kM)(f))return o.preventDefault(),void ee({environment:t,forceEmit:!1,multiSelection:e,focus:"end"})}if(o.shiftKey&&!o.altKey&&(0,m().aO)(h,f.end.store)){if(te(t))return void v().$G({environment:t,direction:"right",bypassExistingTextSelection:!1,expandSelection:!0});const e=(0,d().ZS)({multiSelection:f,focus:h,filterCommonAncestors:!0});if(e)return o.preventDefault(),void I().td({environment:t,...e})}if(o.altKey||o.shiftKey||o.ctrlKey||o.metaKey||!l||!l.collapsed)z({store:h.store,contentEditableLeafRegistry:i});else{const e=h.index,i=h.index+1,a=r().ANx(f.start.store.getValue(),e);if(a&&r().Qt6(a)){o.preventDefault(),T({multiSelection:{start:h,end:{...h,index:i}}});const s={startIndex:e,endIndex:i};r().GiG(a)&&n().default.afterNextFlush((()=>{S().Wx({environment:t,selectedToken:{token:a,position:s},analyticsFrom:"arrow_keys"})}))}const s=r().aLI(h.store.getValue(),e,((e,t)=>{const o=r().So_(e);return t?Boolean(o&&r().So_(t)===o):Boolean(o)}));s&&w().fi({type:"selectionFocus",store:h.store,focus:!1,selection:s})}}function Z(e,t){const{x:o,y:n,target:r}=t,i=(0,m().EH)(o,n,r);i&&i.selectable.props.onEditText&&x().createAndCommit({userAction:"textSelectionActions.editNearestBlock",environment:e,canUndo:!0,perform:e=>{i.selectable.props.onEditText&&i.selectable.props.onEditText({isAtStartOfLine:o<=i.rect.left,isClick:!0,transaction:e})}})}function X(e,t,o){const{x:n,y:r,target:i}=t,a=i?b().default.getDefaultContainerFromTarget(i):void 0;if(a&&(0,m().iY)(r,a)&&k().Zd({environment:e,container:a,transaction:o}))return;const s=(0,m().EH)(n,r,i);if(s&&s.selectable.props.onEditText){const e=r<=s.rect.top;s.selectable.props.onEditText({isAtStartOfLine:n<=s.rect.left,isAtStartOfContainer:e,isClick:!0,transaction:o})}}function J(e,t,o,n){const{y:r,target:i}=t,a=i?b().default.getDefaultContainerFromTarget(i):void 0,s=f().T.findSelectableFromStore(o);a&&s&&(0,m().lS)(r,s)&&k().Mg({environment:e,container:a,store:o,transaction:n})}function ee(e){const{environment:t,multiSelection:o,forceEmit:n,readOnly:r,focus:i}=e;T({multiSelection:o,forceEmit:n,readOnly:"infer"===r?(0,d().$W)(o).some((e=>{let{editable:t}=e;return!t.props.store.canComment()&&!t.props.store.canEdit()})):r});const a=(0,d().ZS)({multiSelection:o,filterCommonAncestors:!1,focus:i});a&&I().td({environment:t,phase:b().SelectionPhase.Editing,...a})}function te(e){const t=h().wg();if(t){const{rowIndex:o,columnIndex:n,simpleTableStore:r}=t.getProps();return v().VC({environment:e,rowIndex:o,columnIndex:n,simpleTableStore:r}),H({environment:e}),!0}return!1}function oe(){var e;const t=p().get(),o=null===(e=(0,d().GI)({range:t,contentEditableLeafRegistry:void 0,allowInvisibleEndSelection:!0}))||void 0===e?void 0:e.multiSelection;if(o){T({readOnly:(0,d().$W)(o).some((e=>{let{editable:t}=e;return t.props.disabled})),multiSelection:o})}}},725649:(e,t,o)=>{function n(e){return!!e&&!("askUserToPick"in e)}function r(e){if(!e||!("askUserToPick"in e))return e}function i(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}o.d(t,{DK:()=>r,K$:()=>n,j6:()=>i})},725951:(e,t,o)=>{o.d(t,{LX:()=>d,Le:()=>c,YN:()=>u,jd:()=>l,sZ:()=>p});var n=()=>o(219058),r=()=>o(502492),i=()=>o(780054),a=()=>o(508496),s=()=>o(836251);function l(e){return!!e.device.isMobileNative&&(e.device.isIOS&&"on"===a().default.getEligibleGroup({experimentId:"ios_3rd_party_login_with_external_browser",defaultGroup:"control"})||e.device.isAndroid&&"on"===a().default.getEligibleGroup({experimentId:"android_3rd_party_login_with_external_browser",defaultGroup:"control"}))}function c(e){const{device:t}=e,o=l(e);if(t.isMobileNativeCalendar){return{redirectToAuth:!1,callbackType:"nativecalendarredirect"}}if(t.isMobileNative){return{redirectToAuth:!1,callbackType:o?"nativeredirect":"native"}}if(t.isElectronAny){return{redirectToAuth:!1,callbackType:t.isElectronMail?"nativemailredirect":t.isElectronCalendar?"nativecalendarredirect":"nativeredirect"}}return{redirectToAuth:!0,callbackType:"redirect"}}function d(e){const{device:t}=e,o=l(e);if(t.isMobileNativeCalendar){return{redirectToAuth:!1,callbackType:"nativecalendarredirect"}}if(t.isMobileNative){return{redirectToAuth:!1,callbackType:o?"nativeredirect":"native"}}if(t.isElectronAny){return{redirectToAuth:!1,callbackType:t.isElectronMail?"nativemailredirect":t.isElectronCalendar?"nativecalendarredirect":"nativeredirect"}}if(t.isMobileBrowser||(0,s().w6)(e)){return{redirectToAuth:!0,callbackType:"redirect"}}return{redirectToAuth:!0,callbackType:"popup"}}async function u(e,t,o){if(e.device.isHttpApp){const e=await fetch(t);return(await e.json()).url}{const e=await fetch(r().$J({httpUrl:t,protocol:i().A.protocol,includePort:o}));return(await e.json()).url}}function p(e){return r().PW({url:n().fR[e],isLocalHost:"local"===e})}},726275:(e,t,o)=>{o.d(t,{OY:()=>m,_v:()=>f});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(244641),r=()=>o(973647),i=()=>o(534177),a=()=>o(787626),s=()=>o(713998),l=()=>o(597777),c=()=>o(604995),d=()=>o(992437),u=()=>o(134025),p=()=>o(68263);const m=["consume_gap","preserve_gap"];class g{constructor(){this.operations=[],this.numDependenciesUpdated=0,this.numCouldNotUpdateDueToPermissions=0}push(e){this.operations.push(...e.operations),this.numDependenciesUpdated+=e.numDependenciesUpdated,this.numCouldNotUpdateDueToPermissions+=e.numCouldNotUpdateDueToPermissions}pushUpdatedBlockDates(e,t){for(const[n,r]of e)this.operations.push(...t.toOperations(r,{id:n,table:o(179034).ev}));this.numDependenciesUpdated+=e.size}}function f(e){const{block:t,options:o,blockingPropertyId:s,blockedByPropertyId:l,timeZone:c,locale:d,collectionSchema:u,getRecordRole:p,getRecordValue:m,dateProperty:f,endDateProperty:b,includeDeletedRelations:y,includeInvalidCollection:S,includeNoAccess:I}=e,A=function(e){return t=>{let{oldDateValue:o,newDateValue:r,dependencyDateValue:a}=t;const s=Boolean(e.avoid_weekends),l=e.mode;if(!l)return;const c=a.getStart(),d=r.getStart(),u=r.getEnd();let p;if("consume_gap"===l){if(u.valueOf()>=c.valueOf()){if(s)return k({dateShiftMode:l,newDateData:n().IX.fromDateTimes(d,u),dependencyDateValue:a});p=u.plus(a.nudgeForDate("start"))}}else if("preserve_gap"===l)if(o){const e=o.getStart(),t=o.getEnd();if(s)return k({dateShiftMode:l,oldDateData:n().IX.fromDateTimes(e,t),newDateData:n().IX.fromDateTimes(d,u),dependencyDateValue:a});const r=u.diff(t);p=c.plus(r)}else u.valueOf()>=c.valueOf()&&(p=u.plus(a.nudgeForDate("start")));else(0,i().HB)(l);return p&&a.changeBoundary({type:"start",newValue:p})}}(o),T=function(e){return t=>{let{oldDateValue:o,newDateValue:r,dependencyDateValue:a}=t;const s=Boolean(e.avoid_weekends),l=e.mode;if(!l)return;const c=a.getEnd(),d=r.getStart(),u=r.getEnd();let p;if("consume_gap"===l){if(d.valueOf()<=c.valueOf()&&(p=d.minus(a.nudgeForDate("end")),s))return w({dateShiftMode:l,newDateData:n().IX.fromDateTimes(d,u),dependencyDateValue:a})}else if("preserve_gap"===l)if(o){const e=o.getStart(),t=o.getEnd();if(s)return w({dateShiftMode:l,oldDateData:n().IX.fromDateTimes(e,t),newDateData:n().IX.fromDateTimes(d,u),dependencyDateValue:a});const r=e.diff(d);p=c.minus(r)}else d.valueOf()<=c.valueOf()&&(p=d.minus(a.nudgeForDate("end")));else(0,i().HB)(l);return p&&a.changeBoundary({type:"end",newValue:p})}}(o),B={timeZone:c,locale:d};let R,E;if((0,i().O9)(b)){const e=new C({convertArgs:B,startPropertyId:f.id,endPropertyId:b.id});R=e;const o=e.getFromBlock(t),n=(0,a().b)(f.newValue)??(null==o?void 0:o.startValue),r=(0,a().b)(b.newValue)??(null==o?void 0:o.endValue);if(!(0,i().O9)(n))return new g;E=new P({convertArgs:B,startValue:n,endValue:r})}else{R=new x({convertArgs:B,propertyId:f.id});const e=(0,a().b)(f.newValue);if(!(0,i().O9)(e))return new g;E=new M({convertArgs:B,value:e})}const D={startingBlock:t,startingNewDateValue:E,context:{collectionSchema:u,getRecordRole:p,getRecordValue:m,accessor:R},includeDeletedRelations:y,includeInvalidCollection:S,includeNoAccess:I};if("consume_gap"===o.mode){const e=new g,t=_({...D,dependencyPropertyId:s,dateAdjuster:A,dateRangeIsFurtherThan:(e,t)=>e.getStart().valueOf()>t.getStart().valueOf()});if(r().Q.isFail(t))return new g;e.push(t.value);const o=_({...D,dependencyPropertyId:l,dateAdjuster:T,dateRangeIsFurtherThan:(e,t)=>e.getEnd().valueOf()<t.getEnd().valueOf()});return r().Q.isFail(o)?new g:(e.push(o.value),e)}if("preserve_gap"===o.mode)return function(e){const{startingBlock:t,startingNewDateValue:o,forwardConfig:n,backwardConfig:r,context:i,includeDeletedRelations:a,includeInvalidCollection:s,includeNoAccess:l}=e,{accessor:c}=i,d=new Set,u=[{block:t,newDateValue:o}],p=new Map,m=new g;for(;;){const e=u.shift();if(!e)break;const{block:o,newDateValue:g}=e;if(d.has(o.id))continue;d.add(o.id);const f=c.getFromBlock(o);for(const{dependencyPropertyId:c,dateAdjuster:d}of[n,r]){const e=h(i,o,c,a,s,l);for(const o of e)o.id!==t.id&&v({context:i,adjust:e=>d({oldDateValue:f,newDateValue:g,dependencyDateValue:e}),result:m,dependencyPointer:o,onDateUpdated:(e,t)=>{p.has(o.id)||p.set(o.id,t),u.push({block:e,newDateValue:t})}})}}return m.pushUpdatedBlockDates(p,c),m}({...D,forwardConfig:{dependencyPropertyId:s,dateAdjuster:A},backwardConfig:{dependencyPropertyId:l,dateAdjuster:T}});(0,i().HB)(o.mode)}function v(e){const{result:t,dependencyPointer:o,context:n,adjust:r,onDateUpdated:i}=e,{accessor:a,getRecordValue:s,getRecordRole:l}=n,c=l(o);if(c&&!(0,p().p2)(c))return void t.numCouldNotUpdateDueToPermissions++;const d=s(o);if(!d)return;const u=a.getFromBlock(d);if(!u)return;const m=r(u);m&&!m.equals(u)&&i(d,m)}function h(e,t,o,n,r,i){var a;const l=e.collectionSchema[o];return l&&"relation"===l.type?(0,s().bG)({propertySchema:l,getRecordModel:d().b.fromGetRecordValueFn(e.getRecordValue),relationValue:(0,s().n)(null===(a=t.properties)||void 0===a?void 0:a[o]),includeDeleted:n,includeInvalidCollection:r,includeNoAccess:i}):[]}function _(e){const{startingBlock:t,startingNewDateValue:o,context:n,dateAdjuster:r,dateRangeIsFurtherThan:i,dependencyPropertyId:a,includeDeletedRelations:s,includeInvalidCollection:l,includeNoAccess:c}=e,{accessor:d}=n,u=new Set,p=[{block:t,newDateValue:o,path:[]}],m=new Map,f=new g;for(;;){const e=p.shift();if(!e)break;const{block:t,newDateValue:o,path:g}=e;if(g.includes(t.id))return{error:"cycle_detected"};if(u.has(t.id))continue;u.add(t.id);const _=d.getFromBlock(t),b=[...g,t.id],y=h(n,t,a,s,l,c);for(const a of y)v({context:n,adjust:e=>r({oldDateValue:_,newDateValue:o,dependencyDateValue:e}),result:f,dependencyPointer:a,onDateUpdated:(e,t)=>{const o=m.get(a.id);o&&!i(t,o)||m.set(a.id,t),p.push({block:e,newDateValue:t,path:b})}})}return f.pushUpdatedBlockDates(m,d),{value:f}}function b(e){const{inputDate:t,dateShiftDirection:o}=e;return 6===t.weekday?t.plus({days:"right"===o?2:-1}):7===t.weekday?t.plus({days:"right"===o?1:-2}):t}function y(e,t){let o,n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=0;if(e.valueOf()>t.valueOf())o=t,n=e;else{if(!(e.valueOf()<t.valueOf()))return 0;o=e,n=t}for(r&&(o=o.plus({days:1}),n=n.minus({days:1}));o.valueOf()<=n.valueOf();)S(o)||i++,o=o.plus({days:1});return i}function S(e){return 6===e.weekday||7===e.weekday}function w(e){const{newDateData:t,dependencyDateValue:o,dateShiftMode:n}=e,r=o.getStart(),i=o.getEnd(),a=y(r,i);let s=b({inputDate:t.start.minus({days:1}),dateShiftDirection:"left"});if("preserve_gap"===n){const o=y(e.oldDateData.start,i,!0);for(let e=y(t.start,s,!0);e<o;e++)s=s.minus({days:1}),S(s)&&(s=b({inputDate:s,dateShiftDirection:"left"}))}let l=s,c=1;for(;c<a;)l=l.minus({days:1}),S(l)||c++;return o.changeBoundaries({newStart:l,newEnd:s})}function k(e){const{dependencyDateValue:t,newDateData:o,dateShiftMode:n}=e,r=t.getStart(),i=y(r,t.getEnd());let a=b({inputDate:o.end.plus({days:1}),dateShiftDirection:"right"});if("preserve_gap"===n){const t=y(e.oldDateData.end,r,!0);for(let e=y(o.end,a,!0);e<t;e++)a=a.plus({days:1}),S(a)&&(a=b({inputDate:a,dateShiftDirection:"right"}))}let s=a,l=1;for(;l<i;)s=s.plus({days:1}),S(s)||l++;return t.changeBoundaries({newStart:a,newEnd:s})}function I(e,t){if(!(e instanceof t))throw new Error(`Expected ShiftableDate to be of type ${t}`)}class A{constructor(e){this.convertArgs=e}}class x extends A{constructor(e){super(e.convertArgs),this.propertyId=void 0,this.propertyId=e.propertyId}getFromBlock(e){var t;const o=(0,a().b)(null===(t=e.properties)||void 0===t?void 0:t[this.propertyId]);return o?new M({value:o,convertArgs:this.convertArgs}):void 0}toOperations(e,t){return I(e,M),[u().op.update({pointer:t,path:["properties"],args:{[this.propertyId]:(0,s().m5)(e.value)}})]}}class C extends A{constructor(e){super(e.convertArgs),this.startPropertyId=void 0,this.endPropertyId=void 0,this.startPropertyId=e.startPropertyId,this.endPropertyId=e.endPropertyId}getFromBlock(e){var t;const o=(0,a().b)(null===(t=e.properties)||void 0===t?void 0:t[this.startPropertyId]);if((0,i().O9)(o)){var n;const t=(0,a().b)(null===(n=e.properties)||void 0===n?void 0:n[this.endPropertyId]);return new P({startValue:o,endValue:t,convertArgs:this.convertArgs})}}toOperations(e,t){return I(e,P),[u().op.update({pointer:t,path:["properties"],args:{[this.startPropertyId]:(0,s().m5)(e.startValue),...e.endValue?{[this.endPropertyId]:(0,s().m5)(e.endValue)}:{}}})]}}class T{constructor(e){this.convertArgs=e}toLuxon(e){return c().C6.notionDateOrDateTimeToLuxon(e,this.convertArgs)}}class M extends T{constructor(e){super(e.convertArgs),this.value=void 0,this.value=e.value}getStart(){return this.toLuxon(l().j1(this.value))}getEnd(){return this.toLuxon(l().mO(this.value))}nudgeForDate(e){return"date"===this.value.type||"daterange"===this.value.type?{days:1}:"datetime"===this.value.type?{minutes:1}:"datetimerange"===this.value.type?{}:void(0,i().HB)(this.value)}equals(e){return I(e,M),l().Zo(this.value,e.value)}changeBoundary(e){let t;if("daterange"===this.value.type||"datetimerange"===this.value.type){const o=c().AA(this.value,this.convertArgs.timeZone,this.convertArgs.locale),n=o.end.diff(o.start);t=("daterange"===this.value.type?c().C6.toPersistedDateRange:c().C6.toPersistedDateTimeRange)("start"===e.type?{start:e.newValue,end:e.newValue.plus(n)}:{start:e.newValue.minus(n),end:e.newValue},this.convertArgs.timeZone)}else if("date"===this.value.type||"datetime"===this.value.type){t=("date"===this.value.type?c().C6.toPersistedDate:c().C6.toPersistedDateTime)(e.newValue.valueOf(),this.convertArgs.timeZone)}else(0,i().HB)(this.value);return new M({value:t,convertArgs:this.convertArgs})}changeBoundaries(e){const{newStart:t,newEnd:o}=e;return new M({value:c().C6.toPersistedDateWithType({start:t,end:o},this.value.type,this.convertArgs.timeZone),convertArgs:this.convertArgs})}}class P extends T{getMergedValue(){if(this._mergedValue===P.MergedValueNotCalculated){const e=c().jY(this.startValue,this.endValue);this._mergedValue=e?c().rL(e):void 0}return this._mergedValue}constructor(e){super(e.convertArgs),this.startValue=void 0,this.endValue=void 0,this._mergedValue=void 0,this.startValue=e.startValue,this.endValue=e.endValue}getStart(){return this.toLuxon(l().j1(this.getMergedValue()??this.startValue))}getEnd(){return this.toLuxon(l().mO(this.getMergedValue()??this.endValue??this.startValue))}equals(e){return I(e,P),l().Zo(this.startValue,e.startValue)&&((0,i().O9)(this.endValue)?(0,i().O9)(e.endValue)&&l().Zo(this.endValue,e.endValue):!(0,i().O9)(e.endValue))}nudgeForDate(e){const t="start"===e?this.startValue:this.endValue??this.startValue;return"date"===t.type?{days:1}:"datetime"===t.type||"datetimerange"===t.type||"daterange"===t.type?{}:void(0,i().HB)(t)}toPersistedDateDiscardingRange(e,t){return void 0===t||"date"===t||"daterange"===t?c().C6.toPersistedDate(e.valueOf(),this.convertArgs.timeZone):"datetime"===t||"datetimerange"===t?c().C6.toPersistedDateTime(e.valueOf(),this.convertArgs.timeZone):void(0,i().HB)(t)}changeBoundary(e){var t,o;const n=this.getEnd().diff(this.getStart());return new P({convertArgs:this.convertArgs,..."start"===e.type?{startValue:this.toPersistedDateDiscardingRange(e.newValue,this.startValue.type),endValue:this.toPersistedDateDiscardingRange(e.newValue.plus(n),null===(t=this.endValue)||void 0===t?void 0:t.type)}:{startValue:this.toPersistedDateDiscardingRange(e.newValue.minus(n),this.startValue.type),endValue:this.toPersistedDateDiscardingRange(e.newValue,null===(o=this.endValue)||void 0===o?void 0:o.type)}})}changeBoundaries(e){var t;const{newStart:o,newEnd:n}=e;return new P({startValue:this.toPersistedDateDiscardingRange(o,this.startValue.type),endValue:this.toPersistedDateDiscardingRange(n,null===(t=this.endValue)||void 0===t?void 0:t.type),convertArgs:this.convertArgs})}}P.MergedValueNotCalculated=Symbol("Merged value not calculated yet")},728611:(e,t,o)=>{o.d(t,{Ol:()=>i,P4:()=>r,Vr:()=>a});let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",(()=>{}),e)}catch(s){}function r(e,t,o,r){n?e.addEventListener(t,o,{passive:!0,capture:Boolean(r)}):e.addEventListener(t,o,Boolean(r))}function i(e,t,o,n){e.removeEventListener(t,o,Boolean(n))}function a(e){if(void 0!==e)return"shiftKey"in e&&"altKey"in e&&e.shiftKey&&e.altKey?"window":"button"in e&&1===e.button||"metaKey"in e&&e.metaKey||"ctrlKey"in e&&e.ctrlKey?"tab":void 0}},729283:(e,t,o)=>{o.d(t,{Mh:()=>c,VE:()=>l,_q:()=>u});o(964979);var n=()=>o(498212),r=()=>o(989423),i=()=>o(529543),a=()=>o(351360),s=()=>o(435009);async function l(e,t){const{utmContent:o,nextRoute:n,openInNewTab:r}=t,[i,a]=await Promise.all([c(e),d(e,{utmContent:o,utmSource:"public_page"})]);s().navigateOnBaseUrl({environment:e,url:n,extraSearchParams:{...i,...a},openInNewTab:r})}async function c(e){const t=await i().getPartnerStackCookie(e);if(t){return{gspk:window.btoa(t)}}const o=await i().getS2STrackingCookie(e);if(o&&o.partnerKey){return{ps_partner_key:window.btoa(o.partnerKey),ps_xid:o.clickId}}return{}}async function d(e,t){const{utmContent:o,utmSource:i}=t,s={utm_source:i,utm_content:o,tid:await(0,r().TZ)(e)},{mainEditorCurrentBlockStore:l}=a().default.state;return null!=l&&l.id&&(s.utm_campaign=(0,n().ot)(null==l?void 0:l.id)),s}async function u(e,t){const{utmContent:o,nextRoute:n,formId:r,spaceId:i,openInNewTab:a}=t,[l,u]=await Promise.all([c(e),d(e,{utmContent:o,utmSource:"form"})]);var p;s().navigateOnBaseUrl({environment:e,url:n,extraSearchParams:{...l,...u,...(p={formId:r,spaceId:i},{from:"forms",form_id:p.formId,space_id:p.spaceId})},openInNewTab:a})}},730307:(e,t,o)=>{o.d(t,{l:()=>m});var n=()=>o(161479),r=()=>o(878523),i=()=>o(347199),a=()=>o(953418),s=()=>o(129522),l=()=>o(404783),c=()=>o(555776),d=()=>o(116008),u=()=>o(36088),p=()=>o(405981);async function m(e){var t;const{environment:o,blockStore:m,rect:g,property_id:f,from:v}=e;if(d().A.hasContent())return void(0,p()._y)({environment:o,reason:"starting_new"});const h=s().K.getRect(m);if(!h)return;const _=new(l().A)(o,(0,n().e)(m.pointer.spaceId)),b=h.width,y=h.height,S=h.right-b;d().A.setState({open:!0,rect:g||new DOMRect(S,h.top,b,y),type:"block",content:"comment",blockStore:m,blockId:m.id,discussionInputStore:_,property_id:f,lastKnownBlockStore:m,from:v}),a().VG({element:null===(t=i().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:o,options:{top:0,behavior:"smooth"}}),c().A.setActiveWithSource("text_annotation"),await(0,u().M)({discussionInputStore:_,environment:o}),r().j4(o,{from:v})}},730570:(e,t,o)=>{o.d(t,{I:()=>x,J:()=>A});o(581454);var n=()=>o(17022),r=()=>o(857639),i=()=>o(317965),a=()=>o(921997),s=()=>o(365233),l=()=>o(496603),c=()=>o(229833),d=()=>o(720665),u=()=>o(671593),p=()=>o(421107),m=()=>o(780054),g=()=>o(941541),f=()=>o(865241),v=()=>o(630116),h=()=>o(899677),_=()=>o(502438),b=()=>o(24157),y=()=>o(452939),S=()=>o(449506);const w=1e3,k=1*d().pT,I="presenceActions";function A(e,t,o,n){!function(e,t){const{persistAutoListener:o,rootStore:n,isActive:i,listenerReference:s,userId:l}=e.state;if(i){if(o&&o.destroy(),s&&g().Ay.removeListener(s,t),l&&n&&M({rootStore:n})){const e=(0,a().Dn)(n.id);g().Ay.updateField(e,l,{present:!1},k,t,{presenceOnDisconnectFlag:"clear",subscriptionId:I,pageVisitId:void 0,spaceId:n.getSpaceId(),pageId:n.id}),g().Ay.clearOnDisconnect(e,I,t).catch((e=>{r().log({level:"error",from:"destroyPresence",type:"SystemError",error:(0,c().n6)(e)})}))}e.reset()}}(e,t),n&&function(e,t,o){y().vO(t,{page_id:e.id,searchSessionId:h().default.state.sessionId,spaceId:e.getSpaceId(),pageVisitId:o.getCurrentPageVisitId(),pageVisitDuration:o.getCurrentPageVisitDuration()}),S().callApi({eventName:"recordPageExit",environment:t,data:{block:{id:e.id,spaceId:e.getSpaceId()},timestamp:Date.now()},headers:{recordId:e.id,spaceId:e.getSpaceId()}})}(n,t,o)}async function x(e){const{userId:t,rootStore:o,presenceStore:r,environment:s,pageVisitIdStore:c,authorizationToken:d}=e;if(await o.load(),t&&T({rootStore:o})){r.setState({...r.state,isActive:!0,rootStore:o,userId:t});const e=l().nF((()=>{r.state.isActive&&r.state.rootStore===o&&C(r,s,c)}),w),p=(e,t)=>{r.state.isActive&&r.state.rootStore===o&&function(e,t){const{remotePresenceData:o}=t.state,n=e||{};l().n4(o,n)||t.setState({...t.state,remotePresenceData:n})}(function(e){const t={};if(l().Gv(e)){const o=Object.keys(e);for(const n of o){const o=e[n];o&&!(0,u().tf)(i().ol,o)&&(t[n]=o)}}return t}(t),r)},m=(0,a().Dn)(o.id);let v;o.canEdit()&&(v=g().Ay.addListener(m,d,p,void 0,s)),r.setState({...r.state,listenerReference:v,persistAutoListener:new(n().A)({onChange:e})}),f().A.addListener(e),t&&M({rootStore:o})&&await g().Ay.onDisconnect(m,[{operation:"updateField",key:m,field:t,updates:{present:!1},ttl:k},{operation:"logPageExit",userId:t,blockId:o.id,spaceId:o.getSpaceId(),pageVisitId:c.getCurrentPageVisitId()}],I,s),C(r,s,c)}}function C(e,t,o){var n,r;const{persistAutoListener:i,rootStore:s,userId:l}=e.state;if(null==i||i.startListener({incrementCycle:!0}),!s||!l||!M({rootStore:s}))return;const c=(0,a().Dn)(s.id),u=d().WY(Date.now());if(!s.canEdit())return void g().Ay.updateField(c,l,{userId:l,present:f().A.state.isVisible,activityTimestampNearestMinuteMs:u,blockId:s.id,blockPath:null},k,t,{presenceOnDisconnectFlag:"register",subscriptionId:I,pageVisitId:o.getCurrentPageVisitId(),spaceId:s.getSpaceId(),pageId:s.id});let m;const h=p().A.state;h.isActive&&h.currentRowStore&&(m=h.currentRowStore);const y=_().default.state;y.stores.length&&(m=y.stores[0]);const S=b().default.state,w="editing"===S.mode&&S.multiSelection;w&&s.uiContains(w.start.store)&&"block"===w.start.store.table&&(m=w.start.store);const A=null===(n=m)||void 0===n?void 0:n.findRecordStoreUIAncestors((e=>e instanceof v().Bv)).map((e=>e.id));null==i||i.stopListener({isEndOfCycle:!0}),g().Ay.updateField(c,l,{userId:l,present:f().A.state.isVisible,activityTimestampNearestMinuteMs:u,blockId:(null===(r=m)||void 0===r?void 0:r.id)||null,blockPath:A||null},k,t,{presenceOnDisconnectFlag:"register",subscriptionId:I,pageVisitId:o.getCurrentPageVisitId(),spaceId:s.getSpaceId(),pageId:s.id})}function T(e){const{rootStore:t}=e;return Boolean(t)&&(0,s().A)(t.id)&&t.canRead()}function M(e){const{rootStore:t}=e;return T({rootStore:t})&&!m().A.isAdminMode}},730688:(e,t,o)=>{o.d(t,{SG:()=>i,WK:()=>a,e7:()=>r,i2:()=>s});o(898992),o(581454),o(908872);var n=()=>o(496603);function r(e,t){let o=0;for(let n=0;n<t.length;n+=1){const r=t[n];if(e>o+r.items.length-1){o+=r.items.length;continue}const i=e-o,a=r.items[i];if(!a)return;return{item:a,index:{section:n,indexLocal:i}}}}function i(e,t){const o=t[e.section];if(!o)return;const n=o.items[e.indexLocal];return n||void 0}function a(e,t){return n().cz(t.slice(0,e.section).map((e=>e.items.length)))+e.indexLocal}function s(e){return e.reduce(((e,t)=>e+t.items.length),0)}},731320:(e,t,o)=>{o.d(t,{A$:()=>ne,FC:()=>W,Jh:()=>z,K1:()=>V,LS:()=>K,MI:()=>Q,QT:()=>Y,Qo:()=>ce,Qu:()=>Z,Ws:()=>ae,X6:()=>le,X9:()=>H,YN:()=>G,bA:()=>oe,ex:()=>re,hb:()=>X,i0:()=>L,om:()=>J,qZ:()=>$,qb:()=>F,qe:()=>se,qw:()=>j,zQ:()=>q,zt:()=>ee});o(410838),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(803949),o(581454),o(737550);var n=o.n(o(169749)),r=()=>o(496506),i=()=>o(857639),a=()=>o(792071),s=()=>o(142748),l=()=>o(252651),c=()=>o(433847),d=()=>o(68263),u=()=>o(388821),p=()=>o(728272),m=()=>o(179034),g=()=>o(96689),f=()=>o(296900),v=()=>o(848538),h=()=>o(854150),_=()=>o(798880),b=()=>o(496603),y=()=>o(498212),S=()=>o(534177),w=()=>o(646736),k=()=>o(590604),I=()=>o(351360),A=()=>o(605402),x=()=>o(529183),C=()=>o(411671),T=()=>o(630116),M=()=>o(134217),P=()=>o(10984),B=()=>o(749240),R=()=>o(186445),E=()=>o(108944),D=()=>o(299545),N=()=>o(437622);function L(e){const t=E().E(e),o=c().ch(t);return c().i0(o)}function F(e,t){if(e.defaultRecordCache.inMemoryRecordCache!==t.inMemoryRecordCache)return O(e,t);const o=`${e.currentUser.id}:${t.table}:${t.id}`,n=U.get(o);if(n)return n.state;const i=new(r().default)((()=>O(e,t)),{debugName:`userHasPermissionViaPublicAccess:${t.id}`});return U.set(o,i),i.state}const U=new(n())({max:30,maxAge:o(720665).Xb,updateAgeOnGet:!0});function O(e,t){const{id:o}=e.currentUser;if((0,N().jy)()&&(0,N().s7)(e))return;let n;o&&(n={table:_().oo,id:o});const r=(0,E().IL)(t)||t,i=(0,k().uI)({recordPointers:new(p().d)([t.pointer]),actorPointers:new(p().d)(void 0===n?[]:[n]),getRecordModel:r.getRecordModel}),{currentUserStore:a}=I().default.state;return(0,k().eV)({actor:null==a?void 0:a.getModel(),recordPointer:t.pointer,permissionsContext:i})}function V(e){return L(e).map((e=>{let{permissionItem:t}=e;return t})).some((e=>d().W8(e)&&d().Tt(e.role)&&(void 0===e.allow_duplicate||!0===e.allow_duplicate)))}function j(e){return L(e).map((e=>{let{permissionItem:t}=e;return t})).some((e=>d().W8(e)))}function z(e){return L(e).map((e=>{let{permissionItem:t}=e;return t})).some((e=>d().Lg(e)))}async function q(e){const{currentUserRootStore:t}=I().default.state;if(!t)return!1;if(!(0,y().uj)(e))return!1;const o=T().Bv.createChildStore(t,{table:m().ev,id:e});return await o.load(),j(o)}function H(e,t){const o=L(t);if(1===o.length){const t=o[0].permissionItem;return"user_permission"===t.type&&d().Km(t.role)&&t.user_id===e.currentUser.id}return!1}function W(e){const{subscriptionData:t,newGuestIds:o}=e;if(!t)return!1;const n=(0,P().aV)(t);if(void 0===n)return!1;const r=M().oe(t).map((e=>e.userId)),i=M().Ye(t).map((e=>e.userId)),a=new Set([...r,...o]);for(const l of i)a.delete(l);const s=Math.max(n,r.length);return a.size>s}function K(e,t){if(!e)return!1;const o=(0,P().aV)(e);return void 0===o||t<o}function G(e){const{store:t,permissionItems:o}=e;if(t instanceof T().SL)return!1;const n=B().subscriptionDataStoreInstance.state;if(!n)return!1;return W({subscriptionData:n,newGuestIds:o.filter(d().B2).filter((e=>"none"!==e.role)).map((e=>e.user_id))})}function $(e){return{editor:"Full access",read_and_write:"Can edit",comment_only:"Can comment",reader:"Can read",none:"No access"}[e]}function Y(e){return!!e&&(e.hasPublicPermission&&"edit"!==e.permission)}function Q(e){let{environment:t,blockStore:o}=e;const n=o.getParentStore();if(!n)return!1;return!Y(E().Wo(n)&&C().A.getMode(t,n))&&n.canEdit()}function Z(){const{currentSpaceStore:e}=I().default.state;return"enterprise"===(null==e?void 0:e.getSubscriptionTier())}async function X(e,t){const o=new Set;var n;if((0,D().$R)(e))null===(n=e.getPermissionItems())||void 0===n||n.forEach((e=>{d().B2(e)&&o.add(e.user_id)}));else if(e instanceof T().Bv)e.getPermissionItems().forEach((e=>{d().B2(e)&&o.add(e.user_id)}));else if(e instanceof T().SL){const n=t.filter(x().ju).map((t=>(0,w().dp)(e,t.value.id)));for(const e of n)await e.load(),e.isDefined()&&e.isMember()&&o.add(e.getUserId())}else(0,S().HB)(e);return t.filter((e=>"existingUser"!==e.type||!o.has(e.value.id)))}function J(e){const t=(0,R().ao)();if(!t||!e)return;const o=ee({userId:e,store:t}).role;return o&&!c().II(o)?o:void 0}function ee(e){let{userId:t,store:o}=e;return ne({userId:t,store:o})[0]}function te(e){const{explicitTeamsRecordMap:t,actorPointers:o,getRecordModelFnFallback:n,logErrorFn:r}=e,s=e.ancestorsRecordMap?e.ancestorsRecordMap:u().RecordMap.create(),c=a().b4_.fromRecordMap(s),d=a().b4_.fromRecordMap(t),m=a().b4_.tryUntilFound(c,d,n),g=new(p().d)(o),f=(0,l().js)({recordMap:s,getRecordModelFnWithMaybeMissingRecords:m,actorPointers:g,logErrorFn:r??(e=>{const{from:t,type:o,error:n,data:r}=e;i().log({level:"error",from:t,type:o,error:{name:n.name,message:n.message,stack:n.stack},data:{miscDataToConvertToString:r}})})});return{ancestorsRecordMap:s,explicitTeamsRecordMap:t,actorPointersSet:g,actorMemberships:f,spacesForSpaceMemberComputation:oe({ancestorsRecordMap:s,getRecordModel:m}),domainLinkSharingEnabledDomainsMap:void 0}}function oe(e){const{ancestorsRecordMap:t,getRecordModel:o}=e,n=new Set;for(const{pointer:a}of t)if(a.table===v().aJ){const{spaceId:e}=(0,v().SM)(a.id);n.add(e)}else if(a.table===f().m3){const{spaceId:e}=(0,f().bx)(a.id);n.add(e)}for(const a of n){const e={table:g().NX,id:a};t.has(e)&&n.delete(a)}if(n.size<=0)return;const r=Array.from(n),i=u().RecordMap.create();return r.forEach((e=>{const t={table:g().NX,id:e},n=o(t);n&&i.addModel(n)})),i}function ne(e){let{userId:t,store:o}=e;const n=s().Yn(o.pointer,o.getRecordModel),r=E().pp(o)||I().default.state.currentSpaceStore,i=r&&r.isDefined()&&!n.findLast(c().vl)?[...n,r.getModel()]:n,a=u().RecordMap.create();i.forEach((e=>{a.setModel(e.pointer,e)}));const l=L(o),p=E().Uo(o),m=l.filter((e=>{let{permissionItem:t}=e;return(d().gl(t)||d().nl(t))&&t.team_id!==(null==p?void 0:p.id)})).map((e=>e.permissionItem)),g=E().IS({store:o,teamPermissionItems:m}),f={table:_().oo,id:t},v=te({actorPointers:[f],explicitTeamsRecordMap:g,ancestorsRecordMap:a,getRecordModelFnFallback:o.getRecordModel}),h=(0,k().Dk)({actorPointer:f,ancestors:i,permissionsContext:v}).map((e=>e.permissionItem));if(0===h.length)return[{type:"user_permission",role:"none",user_id:t}];const y=b().oE(h.map((e=>e.role))),S=c().$q(...y);return h.filter((e=>e.role===S)).sort(ie)}function re(e){let{userId:t,store:o,userPermissionGroupIds:n}=e;const r=s().Yn(o.pointer,o.getRecordModel),i=E().pp(o)||I().default.state.currentSpaceStore,a=i&&i.isDefined()&&!r.findLast(c().vl)?[...r,i.getModel()]:r,l=u().RecordMap.create();a.forEach((e=>{l.setModel(e.pointer,e)}));const p=L(o),g=E().Uo(o),f=p.filter((e=>{let{permissionItem:t}=e;return(d().gl(t)||d().nl(t))&&t.team_id!==(null==g?void 0:g.id)})).map((e=>e.permissionItem)),v=E().IS({store:o,teamPermissionItems:f}),b={table:_().oo,id:t},y=te({actorPointers:[b],explicitTeamsRecordMap:v,ancestorsRecordMap:l,getRecordModelFnFallback:o.getRecordModel}),S=(0,k().Dk)({actorPointer:b,ancestors:a,permissionsContext:y}),w=[...S];S.find((e=>"user_permission"===e.permissionItem.type))||w.push({permissionItem:{type:"user_permission",role:"none",user_id:t},from:d().M3(o.pointer)});const A=B().subscriptionDataStoreInstance.state,x=new Set(A?M().oe(A).map((e=>e.userId)):[]);if(null!=x&&x.has(t))return w.sort(((e,t)=>ie(e.permissionItem,t.permissionItem))).reverse().sort(((e,t)=>d().TE[t.permissionItem.role??"none"]-d().TE[e.permissionItem.role??"none"]));!S.find((e=>"explicit_team_permission"===e.permissionItem.type&&e.permissionItem.team_id===(null==g?void 0:g.id)))&&g&&g.isNonGuestMember(t,n)&&w.push({permissionItem:{type:"explicit_team_permission",role:"none",team_id:g.id},from:{table:h().yK,teamId:g.id}});!S.find((e=>"explicit_team_owner_permission"===e.permissionItem.type&&e.permissionItem.team_id===(null==g?void 0:g.id)))&&g&&g.isOwner(t)&&w.push({permissionItem:{type:"explicit_team_owner_permission",role:"none",team_id:g.id},from:{table:h().yK,teamId:g.id}});return S.find((e=>"space_permission"===e.permissionItem.type))||w.push({permissionItem:{type:"space_permission",role:"none"},from:{table:m().ev,blockId:o.id}}),w.sort(((e,t)=>ie(e.permissionItem,t.permissionItem))).reverse().sort(((e,t)=>d().TE[t.permissionItem.role??"none"]-d().TE[e.permissionItem.role??"none"]))}function ie(e,t){const o=d().B2(e),n=d().B2(t);if(o||n)return o&&n?0:o?-1:1;const r=d().Ds(e),i=d().Ds(t);if(r||i)return r&&i?0:r?-1:1;const a=d().nL(e),s=d().nL(t);return a||s?a&&s?0:a?-1:1:0}function ae(e){const{botStore:t,addPermission:o}=e,n=o?c().MD(t.getCapabilities()):"none",r=t.getParentId(),i=t.getParentTable();let a={type:"bot_permission",bot_id:t.id,role:n};return r&&i&&(a={type:"bot_permission",bot_id:t.id,role:n,parent_id:r,parent_table:i}),a}function se(e){const t=e.getParentBlockStore();return!t||t.pathIsDead()}function le(e){const t=e.getParentBlockStore();return(null==t?void 0:t.isLocked())??!0}function ce(){return A().A.state.permissionGroupsAndMemberCounts.length}},731741:(e,t,o)=>{o.d(t,{A:()=>r});var n=()=>o(757695);const r=new class{constructor(){this.configStores=void 0,this.configStores=new Map}getConfig(e){var t;if(!this.configStores.has(e)){const t=new(n().default);this.configStores.set(e,t)}return null===(t=this.configStores.get(e))||void 0===t?void 0:t.getState()}setConfig(e,t){var o;if(!this.configStores.has(e)){const t=new(n().default);this.configStores.set(e,t)}null===(o=this.configStores.get(e))||void 0===o||o.setState(t)}}},732770:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isEnabled:!0,isKeyboardMode:!1}}setEnabled(e){this.setState({...this.state,isEnabled:e})}setKeyboardMode(e){this.state.isEnabled&&this.setState({isEnabled:!0,isKeyboardMode:e})}}const r=new n},732797:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(463830).A.createValue({open:!1},{})},733539:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l,groupIntervalMs:()=>a});var n=()=>o(933449),r=()=>o(534177);class i{constructor(){this.idMap=new(o(795727).A)({getKey:e=>{let{textInstanceId:t,opId:o}=e;return`${t},${o[0]},${o[1]}`}})}remapIdsForReinsertedText(e,t){(0,n().MX)(t.args.textInstanceId===e.args.textInstanceId,"Inverted operation text instance ID does not match"),(0,n().MX)(o(496603).n4(t.args.originId,e.args.originId),"Inverted operation origin ID does not match"),(0,n().MX)(t.args.content.length===e.args.deletedIds.length,"Inverted operation deleted IDs must be equal to inserted text length");const r=t.args.id,i=t.args.content;for(let o=0;o<i.length;o++)this.addMapping({textInstanceId:e.args.textInstanceId,opId:e.args.deletedIds[o]},{textInstanceId:t.args.textInstanceId,opId:[r[0],r[1]+o]})}addMapping(e,t){(0,n().MX)(!this.idMap.has(e),"Old text instance ID already exists in inverted text operation mapper"),(0,n().MX)(!this.idMap.has(t),"New text instance ID already exists in inverted text operation mapper"),(0,n().MX)(e.textInstanceId===t.textInstanceId,"IDs can only be remapped within the same text instance"),this.idMap.set(e,t)}getMappedId(e){let t,o=e;for(;o=this.idMap.get(o);)t=o;return t}getInvertedTextOperationWithMaybeRemappedIds(e){switch(e.command){case"invertedInsertText":{var t,o;const n=null===(t=this.getMappedId({textInstanceId:e.args.textInstanceId,opId:e.args.startId}))||void 0===t?void 0:t.opId,r=null===(o=this.getMappedId({textInstanceId:e.args.textInstanceId,opId:e.args.endId}))||void 0===o?void 0:o.opId;return n||r?{...e,args:{...e.args,startId:n??e.args.startId,endId:r??e.args.endId}}:e}case"invertedAddAnnotation":case"invertedRemoveAnnotation":{var n,i;const t=null===(n=this.getMappedId({textInstanceId:e.args.startTextInstanceId,opId:e.args.startId}))||void 0===n?void 0:n.opId,o=null===(i=this.getMappedId({textInstanceId:e.args.endTextInstanceId,opId:e.args.endId}))||void 0===i?void 0:i.opId;if("invertedAddAnnotation"===e.command)return t||o?{...e,args:{...e.args,startId:t??e.args.startId,endId:o??e.args.endId}}:e;if("invertedRemoveAnnotation"===e.command)return t||o?{...e,args:{...e.args,startId:t??e.args.startId,endId:o??e.args.endId}}:e;(0,r().HB)(e);break}case"invertedDeleteText":{var a;const t=null===(a=this.getMappedId({textInstanceId:e.args.textInstanceId,opId:e.args.originId}))||void 0===a?void 0:a.opId;return t?{...e,args:{...e.args,originId:t??e.args.originId}}:e}case"invertedMoveTextSlice":return e;default:(0,r().HB)(e)}}}const a=700;class s extends(()=>o(757695))().default{getInitialState(){return{undoStack:[],redoStack:[],invertedTextOperationIdMapper:new i}}}const l=new s},733848:(e,t,o)=>{o.d(t,{Cb:()=>s,oM:()=>l});o(16280),o(898992),o(672577);var n=()=>o(534177),r=()=>o(562031),i=()=>o(351360),a=()=>o(836251);function s(e){return"assistantChat"===e.type?1===e.operations.length&&"createBlock"===e.operations[0].command&&"text"===e.operations[0].blockNode.tagName&&0===e.operations[0].blockNode.text.length:"assistantChatText"===e.type?0===e.text.length:void(0,n().HB)(e)}function l(e){return(0,a().w6)(e)?(0,r().n)():i().default.state.currentSpaceStore}},734410:(e,t,o)=>{o.d(t,{q:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("infoFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.99634 15.5659C6.96118 15.5659 5.98706 15.3682 5.07397 14.9727C4.16089 14.582 3.35522 14.0376 2.65698 13.3394C1.96362 12.6411 1.41919 11.8354 1.02368 10.9224C0.628174 10.0093 0.43042 9.03516 0.43042 8C0.43042 6.96484 0.628174 5.99072 1.02368 5.07764C1.41919 4.16455 1.96362 3.36133 2.65698 2.66797C3.35522 1.96973 4.15845 1.42285 5.06665 1.02734C5.97974 0.631836 6.95386 0.434082 7.98901 0.434082C9.02905 0.434082 10.0056 0.631836 10.9187 1.02734C11.8318 1.42285 12.6375 1.96973 13.3357 2.66797C14.0339 3.36133 14.5808 4.16455 14.9763 5.07764C15.3718 5.99072 15.5696 6.96484 15.5696 8C15.5696 9.03516 15.3718 10.0093 14.9763 10.9224C14.5808 11.8354 14.0339 12.6411 13.3357 13.3394C12.6375 14.0376 11.8318 14.582 10.9187 14.9727C10.0056 15.3682 9.03149 15.5659 7.99634 15.5659ZM6.65601 12.2114H9.7395C9.91528 12.2114 10.0618 12.1577 10.179 12.0503C10.2961 11.938 10.3547 11.7939 10.3547 11.6182C10.3547 11.4521 10.2961 11.313 10.179 11.2007C10.0618 11.0835 9.91528 11.0249 9.7395 11.0249H8.89722V7.43604C8.89722 7.20654 8.84106 7.021 8.72876 6.87939C8.61646 6.73779 8.45288 6.66699 8.23804 6.66699H6.78784C6.61694 6.66699 6.4729 6.72559 6.35571 6.84277C6.23853 6.95996 6.17993 7.09912 6.17993 7.26025C6.17993 7.43604 6.23853 7.58008 6.35571 7.69238C6.4729 7.7998 6.61694 7.85352 6.78784 7.85352H7.55688V11.0249H6.65601C6.48511 11.0249 6.33862 11.0835 6.21655 11.2007C6.09937 11.313 6.04077 11.4521 6.04077 11.6182C6.04077 11.7939 6.09937 11.938 6.21655 12.0503C6.33862 12.1577 6.48511 12.2114 6.65601 12.2114ZM7.95239 5.48779C8.24536 5.48779 8.49194 5.38525 8.69214 5.18018C8.89233 4.9751 8.99243 4.73096 8.99243 4.44775C8.99243 4.1499 8.89233 3.90088 8.69214 3.70068C8.49194 3.49561 8.24536 3.39307 7.95239 3.39307C7.66431 3.39307 7.41772 3.49561 7.21265 3.70068C7.00757 3.90088 6.90503 4.1499 6.90503 4.44775C6.90503 4.73096 7.00757 4.9751 7.21265 5.18018C7.41772 5.38525 7.66431 5.48779 7.95239 5.48779Z"})})},735372:(e,t,o)=>{o.d(t,{Ay:()=>a,qu:()=>s,wb:()=>c});var n=()=>o(757695);class r extends n().default{getInitialState(){return{open:!1,findQuery:"",focused:!1,showReplaceInput:!1,textSelectionOnOpen:void 0}}isOpen(){return this.state.open}hasFindQuery(){return this.state.findQuery.length>0}isFocused(){return this.state.focused}}const i=new r,a=i,s=new(o(496506).default)((()=>{const e=i.state;return e.open&&e.findQuery.length>0?e.findQuery:void 0}),{debugName:"FindAndReplaceOpenQueryStore"});class l extends n().default{getInitialState(){}}const c=new l},735577:(e,t,o)=>{o.d(t,{A:()=>n});const n=function(e){return e&&o(997769).t(e,"url")}},735824:(e,t,o)=>{o.d(t,{r:()=>a});var n=o(296540);const r=!1;let i=0;function a(e){const{getElement:t,onRequestAnimationFrameForDebugging:o}=e,[a,s]=(0,n.useState)(),l=Boolean(t);(0,n.useEffect)((()=>{l||s(void 0)}),[l]);const c=(0,n.useCallback)((()=>{if(!t)return;null==o||o();const e=t();if(e){const t=e.getBoundingClientRect();let o=!0;if(a){a.x===t.x&&a.y===t.y&&a.width===t.width&&a.height===t.height&&(o=!1)}o&&s(t)}else s(void 0)}),[t,o,a]);var d;return d=t?c:void 0,(0,n.useEffect)((()=>{if(!d)return;const e=++i;let t,o=!1;const n=()=>{d(),o?r&&console.log(`#${e} (raf=${t}): raf loop cancelled, returning early`):t=window.requestAnimationFrame(n)};return t=window.requestAnimationFrame(n),r&&console.log(`#${e} (raf=${t}): starting raf loop`),()=>{r&&console.log(`#${e} (raf=${t}): ending raf loop`),o=!0,window.cancelAnimationFrame(t)}}),[d]),a}},737230:(e,t,o)=>{o.d(t,{Ay:()=>g,Iz:()=>u,J:()=>a,UL:()=>d,VE:()=>l,aP:()=>s,tF:()=>i,zX:()=>r});var n=()=>o(534177);const r={comments:"default",suggestions:"suggestion"};let i=function(e){return e[e.Comments=0]="Comments",e[e.Updates=1]="Updates",e[e.Info=2]="Info",e}({});function a(e){switch(e){case i.Comments:return"comments";case i.Updates:return"updates";case i.Info:return"info";default:return(0,n().ub)(e),"comments"}}function s(e){switch(e){case l.Updates:return"updates";case l.Analytics:return"analytics";default:return(0,n().ub)(e),"updates"}}let l=function(e){return e[e.Updates=0]="Updates",e[e.Analytics=1]="Analytics",e}({}),c=function(e){return e[e.ForYou=0]="ForYou",e[e.Comments=1]="Comments",e}({}),d=function(e){return e[e.ForYou=0]="ForYou",e[e.Comments=1]="Comments",e[e.Updates=2]="Updates",e[e.Analytics=3]="Analytics",e[e.Info=4]="Info",e}({});const u=385;class p extends(()=>o(757695))().default{getInitialState(){return{width:u,expanded:!1,isResizerHovered:!1,isResizing:!1,mouseEntered:!1,currentTab:i.Comments,updatesSubTab:l.Updates,commentsSubTab:c.ForYou,commentsMode:"unresolved",commentsTypeMode:"commentsAndSuggestions",isAnimating:!1,canRender:!0}}getTabForNewCommentsSidebar(){switch(this.state.currentTab){case i.Comments:switch(this.state.commentsSubTab){case c.ForYou:return d.ForYou;case c.Comments:return d.Comments;default:return(0,n().ub)(this.state.commentsSubTab),d.Comments}case i.Updates:switch(this.state.updatesSubTab){case l.Updates:return d.Updates;case l.Analytics:return d.Analytics;default:return(0,n().ub)(this.state.updatesSubTab),d.Updates}case i.Info:return d.Info;default:return(0,n().ub)(this.state.currentTab),d.Comments}}createUpdateForNewCommentsSidebar(e){switch(e){case d.ForYou:return{currentTab:i.Comments,commentsSubTab:c.ForYou};case d.Comments:return{currentTab:i.Comments,commentsSubTab:c.Comments};case d.Updates:return{currentTab:i.Updates,updatesSubTab:l.Updates};case d.Analytics:return{currentTab:i.Updates,updatesSubTab:l.Analytics};case d.Info:return{currentTab:i.Info};default:return(0,n().ub)(e),{currentTab:i.Updates,commentsSubTab:c.Comments,updatesSubTab:l.Updates}}}}const m=new p;(0,o(604341).exposeDebugValue)("UpdateSidebarStore",m);const g=m},738418:(e,t,o)=>{o.d(t,{G:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("info",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.97266 14.9453C11.7871 14.9453 14.9453 11.7803 14.9453 7.97266C14.9453 4.1582 11.7803 1 7.96582 1C4.1582 1 1 4.1582 1 7.97266C1 11.7803 4.16504 14.9453 7.97266 14.9453ZM7.97266 13.7832C4.74609 13.7832 2.16895 11.1992 2.16895 7.97266C2.16895 4.74609 4.73926 2.16211 7.96582 2.16211C11.1924 2.16211 13.7764 4.74609 13.7832 7.97266C13.79 11.1992 11.1992 13.7832 7.97266 13.7832ZM7.91113 5.53906C8.41016 5.53906 8.7998 5.14258 8.7998 4.64355C8.7998 4.14453 8.41016 3.74805 7.91113 3.74805C7.41895 3.74805 7.02246 4.14453 7.02246 4.64355C7.02246 5.14258 7.41895 5.53906 7.91113 5.53906ZM6.77637 11.7324H9.55859C9.83887 11.7324 10.0576 11.5273 10.0576 11.2471C10.0576 10.9805 9.83887 10.7686 9.55859 10.7686H8.71094V7.28906C8.71094 6.91992 8.52637 6.67383 8.17773 6.67383H6.89258C6.6123 6.67383 6.39355 6.88574 6.39355 7.15234C6.39355 7.43262 6.6123 7.6377 6.89258 7.6377H7.62402V10.7686H6.77637C6.49609 10.7686 6.27734 10.9805 6.27734 11.2471C6.27734 11.5273 6.49609 11.7324 6.77637 11.7324Z"})})},739283:(e,t,o)=>{o.d(t,{A:()=>b});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(700500),l=()=>o(774733),c=()=>o(886901),d=()=>o(835066),u=()=>o(116008),p=()=>o(661491),m=()=>o(108944),g=()=>o(644914),f=()=>o(630116),v=()=>o(219839),h=()=>o(11048),_=o(474848);function b(e){let{disableCommentMenu:t,hideContent:o,hideIfSidebarOrMarginCommentsVisible:b,recursivelyLoadAllDiscussions:y,store:S,property_id:w}=e;const k=(0,r().v3)(),I=(0,r().Y0)(),A=(0,i().K8)((()=>{const e=S.getModel();return Boolean(null==e?void 0:e.isType(s().uP))}),[S]),x=(0,i().K8)((()=>{const e=(0,m().g7)(S);let t,o,n,r;for(const i of e){if(i instanceof f().Bv&&t){const e=i.getType();if(e&&(0,s().$I)(e)&&i.id!==S.id)break;if("column_list"===e){const e=i.getContentStore().getValue()||[];o=e.indexOf(t.id),n=e.length,r=(0,p().kv)(i,k)}}t=i}return{columnListIndex:o,columnListColumnCount:n,columnListResizable:r}}),[k,S]),C=(0,n.useCallback)((()=>{if(!I.isMobile){if(void 0===x.columnListIndex)return c().vn.FloatRight;if(!x.columnListResizable&&x.columnListColumnCount&&x.columnListIndex===x.columnListColumnCount-1)return c().vn.FloatRight}return c().vn.PushContent}),[x.columnListColumnCount,x.columnListIndex,x.columnListResizable,I.isMobile]),T=(0,i().K8)((()=>(0,g().me)(k)),[k]),M=(0,i().K8)((()=>(0,d().dC)(k,S)),[k,S]),{blockInsetRight:P}=(0,n.useContext)(v().n),B=(0,a().IS)((e=>({wrapper:C()===c().vn.FloatRight?{position:"relative",left:P}:{}})),[C,P]),R=(0,i().K8)((()=>u().A.getPropertyId()===w),[w]),E=t||o||(A||b)&&(T||M)||R&&T;return(0,_.jsx)(h().A,{name:"BlockDiscussionIndicator",children:!E&&(0,_.jsx)("div",{style:B.wrapper,children:(0,_.jsx)(l().Gu,{store:S,getFormat:C,recursivelyLoadAllDiscussions:Boolean(y),onlyCountBlockLevelDiscussions:T,property_id:w},"DiscussionIndicator")})})}},740912:(e,t,o)=>{o.d(t,{d:()=>s,w:()=>a});o(898992),o(354520),o(803949),o(581454);var n=()=>o(534177),r=()=>o(289915),i=()=>o(179034);function a(e,t){if(r().dU(e)){(e.filters||[]).forEach((e=>a(e,t)))}if(r().yX(e)){if(r().Pq(e.filter)){const o=e.filter;if("relation_contains"===o.operator||"relation_does_not_contain"===o.operator)if(Array.isArray(o.value)){const e=o.value.map((e=>{const o=e.type;if("exact"===o){const o=e.value;return{type:"exact",value:o&&t({table:i().ev,id:o})||o}}if("relative"===o)return e;(0,n().HB)(o)}));o.value=e}else{const e=o.value.type;if("exact"===e){const e=o.value.value;o.value.value=e&&t({table:i().ev,id:e})||e}else{if("relative"===e)return;(0,n().HB)(e)}}}if(r().s1(e.filter)){const o=e.filter.subfilter;if(r().Pq(o)){const e=o;if("relation_contains"===e.operator||"relation_does_not_contain"===e.operator)if(Array.isArray(e.value)){const o=e.value.map((e=>{const o=e.type;if("exact"===o){const o=e.value;return{type:"exact",value:o&&t({table:i().ev,id:o})||o}}if("relative"===o)return e;(0,n().HB)(o)}));e.value=o}else{const o=e.value.type;if("exact"===o){const o=e.value.value;e.value.value=o&&t({table:i().ev,id:o})||o}else{if("relative"===o)return;(0,n().HB)(o)}}}}}}function s(e,t){if(r().dU(e)){(e.filters||[]).forEach((e=>s(e,t)))}if(r().yX(e)){const o=t(e.property);o&&(e.property=o)}}},741237:(e,t,o)=>{o.d(t,{E:()=>r,O:()=>i});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520);var n=()=>o(534177);function r(e){return[{operation:"delete",deleteFromParent:e.moveFromParent,deletingChildren:e.movingChildren,debug:e.debug},{operation:"insert",insertIntoParent:e.moveToParent,insertChildren:e.movingChildren,adjacentSibling:e.moveToAdjacentSibling,direction:e.moveToDirection,debug:e.debug}]}const i={applyMutable:function(e){switch(e.operation){case"delete":return a(e);case"insert":return s(e);case"move":const[t,o]=r(e),i=a(t),l=s(o);return i||l;default:(0,n().HB)(e)}}};function a(e){const{deleteFromParent:t,deletingChildren:o}=e;if(0===o.length)return!1;const n=new Set(o),r=t.children.filter((e=>!n.has(e)));return r.length!==t.children.length&&(t.children=r,!0)}function s(e){const{direction:t,insertChildren:o,insertIntoParent:r,adjacentSibling:i}=e;if(0===o.length)return!1;const a=i?r.children.indexOf(i):-1,s=(()=>{switch(t){case"listBefore":return Math.max(0,a);case"listAfter":return-1===a?r.children.length:a+1;default:(0,n().HB)(t)}})();return r.children.splice(s,0,...o),!0}},741496:(e,t,o)=>{o.d(t,{N:()=>a});var n=()=>o(908006),r=()=>o(502438),i=()=>o(946141);function a(e,t){n().default.afterNextFlush((()=>{let o;const n=r().default.state.stores[0];n&&(o=n.getType());const{parentTeamStore:a,...s}=t;i().tw(e,"block_action",`block_action-${t.analyticsName}-${t.from}-${t.block_id}`,60,{store:a,...s,final_block_type:o})}))}},741817:(e,t,o)=>{o.d(t,{v:()=>a});var n=()=>o(186445),r=()=>o(299545),i=()=>o(588836);function a(e){const{discussionStore:t,transaction:o}=e,a=r().No(t);a&&(0,i().u)({discussionIds:[t.id],transaction:o,blockStore:a});const s=n().ZO();if(s){const e=r().zo({blockStore:s,transclusionReferences:"recurseInto",childPages:"omit"});for(const n of e){if(a&&n.table===a.table&&n.id===a.id)continue;const e=r().bN(n).getValue();null!=e&&e.includes(t.id)&&(0,i().u)({discussionIds:[t.id],transaction:o,blockStore:n})}}}},742117:(e,t,o)=>{o.d(t,{V:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("chevronRight",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z"})})},742852:(e,t,o)=>{o.d(t,{w:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10.61 3.61a3.776 3.776 0 0 1 5.34 0l.367.368a3.776 3.776 0 0 1 0 5.34l-1.852 1.853a.625.625 0 1 1-.884-.884l1.853-1.853a2.526 2.526 0 0 0 0-3.572l-.368-.367a2.526 2.526 0 0 0-3.572 0L9.641 6.347a.625.625 0 1 1-.883-.883z"}),(0,n.jsx)("path",{d:"M12.98 6.949a.625.625 0 0 1 0 .884L7.53 13.28a.625.625 0 0 1-.884-.884l5.448-5.448a.625.625 0 0 1 .884 0"}),(0,n.jsx)("path",{d:"M6.348 8.757a.625.625 0 0 1 0 .884l-1.853 1.853a2.526 2.526 0 0 0 0 3.572l.367.367a2.525 2.525 0 0 0 3.572 0l1.853-1.852a.625.625 0 1 1 .884.883l-1.853 1.853a3.776 3.776 0 0 1-5.34 0l-.367-.367a3.776 3.776 0 0 1 0-5.34l1.853-1.853a.625.625 0 0 1 .884 0"})]})},i=(0,o(340498).wt)("link",r)},743260:(e,t,o)=>{o.d(t,{$D:()=>q,Es:()=>P,GZ:()=>B,LC:()=>N,LH:()=>D,S6:()=>V,Sk:()=>R,VF:()=>M,_c:()=>O,c3:()=>z,iQ:()=>C,mQ:()=>T,oX:()=>L,qv:()=>j,wF:()=>E,yi:()=>F});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(803949),o(581454),o(737550),o(296540);var n=()=>o(799288),r=()=>o(206267),i=()=>o(68263),a=()=>o(179034),s=()=>o(96689),l=()=>o(695608),c=()=>o(959013),d=()=>o(100622),u=()=>o(534177),p=()=>o(284371),m=()=>o(134696),g=()=>o(901389),f=()=>o(646736),v=()=>o(351360),h=()=>o(406999),_=()=>o(630116),b=()=>o(134217),y=()=>o(10984),S=()=>o(749240),w=()=>o(186445),k=()=>o(972435),I=()=>o(299545),A=()=>o(698449),x=o(474848);async function C(e){let{environment:t,permissionsInviteStoreState:o,from:n}=e;const r=(0,x.jsx)(c().sA,{id:"permissionsInvite.closeInviteDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Discard changes?"}),i=(0,x.jsx)(c().sA,{id:"permissionsInvite.closeInviteDialog.confirmationButton.label",defaultMessage:"Yes"}),a=(0,x.jsx)(c().sA,{id:"permissionsInvite.closeInviteDialog.cancelButton.label",defaultMessage:"Cancel"});if(o.inviteTargets.length>0){const{accept:e}=await g().Gh({message:r,acceptLabel:i,cancelLabel:a});return m().iv(t,{...L(t,o),from:n,discard_changes:e}),!e}return!1}function T(e){const{target:t,permissionsInviteStore:o}=e;return o.state.inviteTargets.find((e=>"newUser"===t.type?"newUser"===e.type&&t.value.email===e.value.email:"group"===t.type?e.type===t.type&&e.value.group_id===t.value.group_id:e.type===t.type&&e.value.id===t.value.id))}function M(e){const{targetStore:t,permissionsInviteStore:o,userTarget:n}=e;return!!T({permissionsInviteStore:o,target:n})||"existingUser"===n.type&&E({target:n,store:t})}function P(e){const{targetStore:t,permissionsInviteStore:o,currentInviteActors:r}=e;if(!r)return{inviteUsers:[],inviteGroups:[],inviteBots:[]};if((0,I().nw)(t))return r;const i=r.inviteUsers.filter((e=>!M({targetStore:t,permissionsInviteStore:o,userTarget:e})));return{inviteBots:r.inviteBots.filter((e=>!(!e.value.alive||T({permissionsInviteStore:o,target:e})||!(0,n().VH)(e.value)&&!(0,n().WG)(e.value))&&!E({target:e,store:t}))),inviteGroups:r.inviteGroups.filter((e=>!T({permissionsInviteStore:o,target:e})&&!E({target:e,store:t}))),inviteUsers:i,importedContacts:r.importedContacts}}function B(e,t){if(!e||!t||0===e.length||0===t.length)return t;const o=new Set(e.map((e=>e.value.email.toLowerCase())));return t.filter((e=>!o.has(e.value.email.toLowerCase())))}function R(e){const{intl:t,target:o}=e;switch(o.type){case"newUser":return o.value.email;case"existingUser":return(0,l().c6)(t,o.value);case"bot":return(0,n().Hg)(o.value);case"group":return(0,A().Pf)({intl:t,groupName:o.value.name});default:(0,u().HB)(o)}}function E(e){const{target:t,store:o}=e;if(!o.isDefined())return!1;if((0,I().$R)(o)){const e=t.type;if("existingUser"===e){const e=o.getRawMembership().find((e=>"user"===e.entity_type&&e.user_id===t.value.id));return Boolean(e&&"none"!==e.type)}return"group"===e?o.getRawMembership().some((e=>"group"===e.entity_type&&e.group_id===t.value.group_id)):("bot"===e||"newUser"===e||(0,u().ub)(e),!1)}return o instanceof _().Bv||o instanceof _().md?o.getPermissionItems().some((e=>{switch(t.type){case"existingUser":return(0,i().B2)(e)&&e.user_id===t.value.id;case"bot":return(0,i().P3)(e)&&e.bot_id===t.value.id;case"group":return(0,i().Ds)(e)&&e.group_id===t.value.group_id;case"newUser":return!1;default:return(0,u().HB)(t)}})):o instanceof _().SL?"existingUser"===t.type?Boolean((0,f().dp)(o,t.value.id).isMember()):"bot"===t.type&&Boolean((0,f().Ts)(o,t.value.id).isMember()):!(0,I().nw)(o)&&void(0,u().HB)(o)}function D(e){const{environment:t,permissionsInviteStore:o,store:n,renderInShareModal:i}=e;o.setState({modalOpen:!i,tokenQuery:"",inviteTargets:[],inviteRole:N(e),isInviteTargetsEmpty:!0,table:(0,I().Yu)(n)?s().NX:a().ev,flowId:r().JW(),inputFocus:"invitee",emailMessage:""}),(0,I().Yu)(n)?m().VV(t):m().F1(t,{...L(t,e.permissionsInviteStore.state)})}function N(e){const{store:t,isSubscribed:o}=e;return(0,I().Yu)(t)?o?"read_and_write":"editor":(0,y().El)()?"editor":"read_and_write"}function L(e,t){var o;const{isInviteTargetsEmpty:n,inviteRole:r,flowId:i}=t,a=(0,w().ao)(),s=null==a?void 0:a.getRole(),l=null===(o=v().default.state.currentSpaceStore)||void 0===o?void 0:o.getRole(),{inviteTargets:c,emailMessage:d}=t,u=(0,y().AI)(),p={invite_flow_id:i,user_count:0,is_bot:!1,invite_message_length:(null==d?void 0:d.length)??0,...s&&{page_current_user_role:s},...l&&{space_role:l},...u&&{subscription_tier:u}};if(n)return p;if(0===c.length)return p;if(function(e){return e.length>0&&"bot"===e[0].type}(c))return{...p,is_bot:!0};const m=c.filter(h().Gz).length,g=c.filter(h().ju).length+m;return{...p,role:r,user_count:g,new_user_count:m}}function F(e){return"newUser"===e.type||"existingUser"===e.type&&("none"===e.spaceRole||"not_in_space"===e.spaceRole)}const U=(0,c().YK)({workspaceOwnerTooltip:{id:"inviteUserModal.userRole.workspaceOwnerBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a workspace owner in this workspace"},workspaceOwnerBadge:{id:"inviteUserModal.userRole.workspaceOwnerBadge.label",defaultMessage:"Workspace Owner"},adminTooltip:{id:"inviteUserModal.userRole.adminBadge.tooltip",defaultMessage:"{ userNameAndEmail} is an admin in this workspace"},adminBadge:{id:"inviteUserModal.userRole.adminBadge.label",defaultMessage:"Admin"},membershipAdminTooltip:{id:"inviteUserModal.userRole.membershipAdminBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a membership admin in this workspace"},membershipAdminBadge:{id:"inviteUserModal.userRole.membershipAdminBadge.label",defaultMessage:"Membership admin"},memberTooltip:{id:"inviteUserModal.userRole.memberBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a member in this workspace"},memberBadge:{id:"inviteUserModal.userRole.memberBadge.label",defaultMessage:"Member"},guestTooltip:{id:"inviteUserModal.userRole.guest.tooltip",defaultMessage:"{ userNameAndEmail} is a guest in this workspace"},guestBadge:{id:"inviteUserModal.userRole.guestBadge.label",defaultMessage:"Guest"}});function O(e){const{environment:t,customStyle:o}=e,{device:n}=t;return{display:"inline-flex",height:18,textTransform:"uppercase",fontSize:10,marginBottom:2,fontWeight:p().Wy.medium,letterSpacing:1,color:d().Ay.uiLightGray,border:`1px solid ${d().Ay.uiLightGray}`,minWidth:70,alignItems:"center",justifyContent:"center",paddingTop:n.isAndroid?2:1,paddingBottom:1,paddingLeft:3,paddingRight:3,borderRadius:4,...o}}function V(e){const{role:t,intl:o,nameOrEmail:n}=e,r=n||o.formatMessage({id:"userTypeTooltip.generalPerson",defaultMessage:"This person"});switch(t){case"editor":return{tooltip:o.formatMessage(U.workspaceOwnerTooltip,{userNameAndEmail:r}),userRoleBadge:o.formatMessage(U.workspaceOwnerBadge)};case"membership_admin":return{tooltip:o.formatMessage(U.membershipAdminTooltip,{userNameAndEmail:r}),userRoleBadge:o.formatMessage(U.membershipAdminBadge)};case"read_and_write":return{tooltip:o.formatMessage(U.memberTooltip,{userNameAndEmail:r}),userRoleBadge:o.formatMessage(U.memberBadge)};case"none":return{tooltip:o.formatMessage(U.guestTooltip,{userNameAndEmail:r}),userRoleBadge:o.formatMessage(U.guestBadge)};default:(0,u().HB)(t)}}function j(e){return F(e)?"rgba(246, 192, 80, 0.26)":void 0}function z(e){var t;const{inviteTargets:o,recordStore:n,canEditSpaceMembership:r}=e;if(0===o.length)return null;if(!n)return null;const{inviteTargetGuests:i,inviteTargetMembers:a}=function(e){const t=[],o=[];return e.forEach((e=>{F(e)?t.push(e):o.push(e)})),{inviteTargetGuests:t,inviteTargetMembers:o}}(o),s=r?[...a,...i]:a,l=r?[]:i,d=k().A.getIntl(),u=(0,I()._p)(n)?null===(t=n.getBlockTitleStore())||void 0===t?void 0:t.getValue():n.getName();return r||0===l.length?(0,x.jsx)(c().sA,{id:"permissionsInvite.inviteConfirmationToast.usersAddedMessage",defaultMessage:"{numberOfTargets, plural, one {Added {targetName} to {recordName}} other {Added {numberOfTargets} people to {recordName}}}",values:{numberOfTargets:s.length,targetName:R({intl:d,target:s[0]}),recordName:u}}):0===s.length?(0,x.jsx)(c().sA,{id:"permissionsInvite.inviteConfirmationToast.inviteRequestedMessage",defaultMessage:"{numberOfTargets, plural, one {Requested {targetName} for approval} other {Requested {numberOfTargets} invites for approval}}",values:{numberOfTargets:l.length,targetName:R({intl:d,target:l[0]})}}):(0,x.jsx)(c().sA,{id:"permissionsInvite.inviteConfirmationToast.userAddedAndRequestedText",defaultMessage:"{numberOfAddedTargets, plural, one {Added {addedTargetName}} other {Added {numberOfAddedTargets} people}} & {numberOfRequestedTargets, plural, one {requested {requestedTargetName} for approval} other {requested {numberOfRequestedTargets} people for approval}}",values:{numberOfAddedTargets:s.length,addedTargetName:R({intl:d,target:s[0]}),numberOfRequestedTargets:l.length,requestedTargetName:R({intl:d,target:l[0]})}})}function q(e){if("existingUser"!==e.type)return;const t=S().subscriptionDataStoreInstance.state,o=(t?b().Be(t):[]).find((t=>t.userId===e.value.id));return o?o.role:"not_in_space"}},743336:(e,t,o)=>{o.d(t,{V:()=>s,h:()=>a});var n=()=>o(536131),r=()=>o(778417),i=()=>o(725614);function a(e,t){r().IU({environment:e}),i().clear({environment:e}),n().A.setState({open:!0,...t})}function s(){n().A.setState({open:!1,originRect:n().A.state.originRect})}},744705:(e,t,o)=>{o.d(t,{X:()=>n,o:()=>r});o(581454);function n(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.isReady())return!1;if(o[e.id])return!0;if(o[e.id]=!0,i(e,t))return!0;const r=e.getContentStores();let a=!0;for(const i of r)n(i,!1,o)||(a=!1);return a}async function r(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(await e.load(),o[e.id])return;if(o[e.id]=!0,i(e,t))return;const n=e.getContentStores();await Promise.all(n.map((e=>r(e,!1,o))))}function i(e,t){return!(!e.isPageBlock()||t)||!!e.isCollectionView()}},745266:(e,t,o)=>{o.d(t,{h:()=>d});o(296540);var n=()=>o(484714),r=()=>o(401497),i=()=>o(632625),a=()=>o(278238),s=()=>o(340498),l=()=>o(682146),c=o(474848);function d(e){const{device:t}=(0,n().v3)(),o=(0,r().DP)(),{color:d,viewIcon:u,viewType:p,size:m,style:g}=e,f=function(e){return{regular:e.regularTextColor,light:e.mediumTextColor,gray:a().l8[e.mode].gray,lightGray:a().l8[e.mode].lightgray,blue:e.blueColor}}(o)[d];if(!p)return null;if(u)return(0,c.jsx)(i().A,{style:{fill:f,backfaceVisibility:void 0,...g},size:m??(t.isMobile?18:16),theme:o,icon:u});return l().Vw[p]({width:m??s().Ev.default,height:m??s().Ev.default,backfaceVisibility:void 0,fill:f,...g})}},745766:(e,t,o)=>{function n(e){return"drag"in e&&e.drag?{WebkitAppRegion:"drag"}:"noDrag"in e&&e.noDrag?{WebkitAppRegion:"no-drag"}:{}}o.d(t,{g:()=>n})},747100:(e,t,o)=>{o.d(t,{Gb:()=>s,QX:()=>d,cq:()=>c,ln:()=>a,m3:()=>l,rc:()=>u});var n=()=>o(661179),r=()=>o(712505),i=()=>o(502438);const a=120;function s(){return r().default.isCenterPeekOpen()||i().default.isInPeekRenderer()}function l(){const e=r().default.state;return e.open&&(s()||e.isOpening)}function c(e){return Boolean(e.findRecordStoreUIAncestor((e=>e===r().default.peekTargetStore.state)).ancestor)}function d(){const e=window.innerWidth;return e>2*r().SIDEPEEK_MIN_WIDTH?e*(2/3):e}function u(e){const t=n().A.state;return Math.min(e.WindowSizeStore.state.width-2*r().PeekModeOuterPadding,r().CenterPeekModeOuterWidth+t)}},748197:(e,t,o)=>{o.d(t,{c:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{tabState:{},settingsOpenForBlockId:void 0,summarizationState:{}}}createSummarizationAbortController(e){const t=new AbortController;return this.setState({...this.state,summarizationState:{...this.state.summarizationState,[e]:{abortController:t}}}),t}getSummarizationAbortController(e){var t;return null===(t=this.state.summarizationState[e])||void 0===t?void 0:t.abortController}clearSummarizationAbortController(e){this.setState({...this.state,summarizationState:{...this.state.summarizationState,[e]:{abortController:void 0}}})}setTabState(e,t){this.setState({...this.state,tabState:{...this.state.tabState,[e]:t}})}getTabState(e){return this.state.tabState[e]}setSettingsOpenForBlockId(e){this.setState({...this.state,settingsOpenForBlockId:e})}isSettingsOpenForBlockId(e){return this.state.settingsOpenForBlockId===e}}const r=new n},749240:(e,t,o)=>{o.r(t),o.d(t,{SubscriptionDataStore:()=>n,subscriptionDataStoreInstance:()=>r});class n extends(()=>o(757695))().default{constructor(){super(...arguments),this.spaceId=void 0}getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}}const r=new n;(0,o(604341).exposeDebugValue)("subscriptionDataStoreInstance",r)},749687:(e,t,o)=>{o.r(t),o.d(t,{SIDEBAR_MIN_WIDTH:()=>r,sidebarElectronMousePeekStore:()=>g,sidebarExpandedStore:()=>c,sidebarMouseEnterYStore:()=>l,sidebarMouseEnteredStore:()=>d,sidebarMousePeekXStore:()=>s,sidebarOpenStore:()=>a,sidebarResizingStore:()=>u,sidebarShouldLogInitialRenderStore:()=>m,sidebarSizeObserver:()=>p,sidebarWidthStore:()=>i});var n=()=>o(757695);const r=248,i=n().default.createValue(240,{name:"sidebarWidthStore"}),a=n().default.createValue(!1,{name:"sidebarOpenStore"}),s=n().default.createValue(0,{name:"sidebarMousePeekXStore"}),l=n().default.createValue(0,{name:"sidebarMouseEnterYStore"}),c=n().default.createValue(!0,{name:"sidebarExpandedStore"}),d=n().default.createValue(!1,{name:"sidebarMouseEnteredStore"}),u=n().default.createValue({isResizing:!1,isResizerHovered:!1},{name:"sidebarResizingStore"}),p=new(o(472090).E),m=n().default.createValue(!0,{name:"sidebarShouldLogInitialRenderStore"}),g=n().default.createValue(!1,{name:"sidebarElectronMousePeekStore"})},750559:(e,t,o)=>{o.d(t,{f:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("genericError",{viewBox:"0 0 32 32",svg:(0,n.jsx)("path",{d:"M16.0242 29.0485c7.1251 0 13.0243-5.8992 13.0243-13.0243C29.0485 8.91198 23.1365 3 16.0115 3 8.89922 3 3 8.91198 3 16.0242c0 7.1251 5.91198 13.0243 13.0242 13.0243zm-.0127-11.1089c-.6768 0-1.0471-.3959-1.0726-1.0726l-.1788-6.3078c-.0255-.70232.5108-1.20031 1.2386-1.20031.7151 0 1.2769.51076 1.2514 1.21301l-.1916 6.2951c-.0255.6895-.3958 1.0726-1.047 1.0726zm0 4.6989c-.7406 0-1.4301-.5874-1.4301-1.379 0-.7917.6767-1.3791 1.4301-1.3791.7533 0 1.4301.5746 1.4301 1.3791 0 .8044-.6895 1.379-1.4301 1.379z"})})},750660:(e,t,o)=>{o.d(t,{BS:()=>oe,HY:()=>ie,Ju:()=>ne,LC:()=>ae,LP:()=>ee,VN:()=>re,YX:()=>se,ho:()=>X,qL:()=>J,zs:()=>te});o(16280),o(18107),o(967357),o(898992),o(672577),o(581454),o(737550);var n=()=>o(584262),r=()=>o(66689),i=()=>o(700500),a=()=>o(970013),s=()=>o(857639),l=()=>o(206267),c=()=>o(179034),d=()=>o(519831),u=()=>o(96689),p=()=>o(496603),m=()=>o(534177),g=()=>o(466614),f=()=>o(519839),v=()=>o(989423),h=()=>o(405417),_=()=>o(972435),b=()=>o(776894),y=()=>o(108944),S=()=>o(437622),w=()=>o(274511),k=()=>o(155959),I=()=>o(351360),A=()=>o(441307),x=()=>o(188669),C=()=>o(609044),T=()=>o(630116),M=()=>o(795179),P=()=>o(292167),B=()=>o(95313),R=()=>o(901265),E=()=>o(317001),D=()=>o(656432),N=()=>o(60867),L=()=>o(901389),F=()=>o(824772),U=()=>o(496414),O=()=>o(524539),V=()=>o(222299),j=()=>o(44729),z=()=>o(246826),q=()=>o(537941),H=()=>o(778417),W=()=>o(436572),K=()=>o(426116),G=()=>o(955930),$=()=>o(317909),Y=()=>o(755199),Q=()=>o(664713);const Z=(0,o(959013).YK)({duplicatingContent:{id:"moveToMenuActions.duplicatingContent.loadingMessage",defaultMessage:"Duplicating content…"},duplicatedToSpace:{id:"moveToMenuActions.duplicatedToSpace.toast",defaultMessage:"Duplicated {name} to {spaceName}"}});function X(e){const{environment:t,blocks:o,originRect:n,moveToContext:r,onAccept:i,onCanceled:a,isAddTo:s,isDefaultPrivateLocation:c,disableSuccessToast:d,dontCommitActions:u,forceUntyped:p,forceShowPrivatePageOption:m}=e,g=Date.now(),f=(0,x().jU)(o),v=function(e){const{hasDatabaseType:t,forceUntyped:o}=e;if(o)return"untyped";if(t)return"typed";return"untyped"}({forceUntyped:p,hasDatabaseType:Boolean(f)}),h=l().JW();o.length&&(M().A.reset(),C().A.reset(),R().VN(),x().Ay.setState({variant:v,isOpen:!0,rect:n,targets:o,autocompleteQuery:"",moveToContext:r,onAccept:i,onCanceled:a,isAddTo:s,isDefaultPrivateLocation:c,lastPageId:x().Ay.state.lastPageId,disableSuccessToast:d,dontCommitActions:u,openedTimeMs:g,flowId:h,forceShowPrivatePageOption:m,queryLimit:b().p1,canLoadMore:!0}),B().dP(t,{from:r,render_type:"web",target_block_ids:o.map((e=>e.id)),targets_database_type:f,flowId:h}))}function J(e){const{environment:t,originRect:o,moveToContext:n,overrideDatabaseType:r,onAccept:i,onCanceled:a,isAddTo:s,isDefaultPrivateLocation:c,forceShowPrivatePageOption:d}=e;if(x().Ay.state.isOpen)return;const u=o.left+o.width/2-165;o.x=u;const p=Date.now(),m=l().JW();M().A.reset(),C().A.reset(),R().VN(),x().Ay.setState({variant:"typed",overrideDatabaseType:r,isOpen:!0,rect:o,targets:[],autocompleteQuery:"",moveToContext:n,onAccept:e=>{const{value:o}=e;"collection"===o.type&&($().createAndCommit({userAction:"moveToMenuActions.openForTaskDatabaseSelection.setPreferredDatabase",environment:t,canUndo:!0,perform:e=>{Y().ee({transaction:e,databaseType:"notion://tasks_collection",collectionId:o.id})}}),i(e))},onCanceled:a,isAddTo:s,isDefaultPrivateLocation:c,lastPageId:x().Ay.state.lastPageId,disableSuccessToast:!0,dontCommitActions:!0,openedTimeMs:p,flowId:m,forceShowPrivatePageOption:d,queryLimit:b().p1,canLoadMore:!0}),B().dP(t,{from:n,render_type:"web",target_block_ids:[],targets_database_type:void 0,flowId:m})}async function ee(e){const t=await async function(e){var t;const{environment:o,blocks:n,originRect:i,moveToContext:a,disableSuccessToast:s,onAccept:c,onCanceled:d,isAddTo:u}=e,{currentSpaceStore:p}=I().default.state,m=Date.now(),g=x().Ay.state.isOpen?x().Ay.state.flowId:l().JW(),f=(0,x().jU)(n);if(!u&&f&&f!==r().pW)return!1;if(!(0,k().T)("supportsNativeMoveTo")||null===(t=o.mobileNative)||void 0===t||!t.api.moveTo||0===n.length||!p)return!1;const v=n.map((e=>e.id)),h=await o.mobileNative.moveTo({targets:v,spaceId:p.id,isAddTo:u||!1,moveToContext:a,flowId:g});if(!h)return!1;if(!h.supported||!h.destination)return h.supported&&d&&d(),h.supported;M().A.reset(),C().A.reset(),R().VN(),x().Ay.setState({variant:"untyped",isOpen:!0,rect:i,targets:n,autocompleteQuery:"",moveToContext:a,dontCommitActions:e.dontCommitActions,disableSuccessToast:s,onAccept:c,isAddTo:u,lastPageId:x().Ay.state.lastPageId,renderType:"mobileNative",openedTimeMs:m,flowId:g,queryLimit:b().p1,canLoadMore:!0});const _=x().Ay.state.isOpen&&x().Ay.state.useSudoMode;return await oe({environment:o,value:h.destination,useSudoMode:_,renderType:"native",isSearchResult:h.isSearchResult}),re({environment:o,clearSelection:!1}),!0}(e);t||X(e)}function te(e,t,o){if("page"!==o.type)return!1;const n=new(T().Bv)(e,{table:c().ev,id:o.id}),r=(0,y().g7)(n);for(const i of r)if(t.includes(i.id))return!0;return!1}async function oe(e){const{environment:t,value:o,useSudoMode:n,renderType:r,shouldClearPagePermissions:i,isSearchResult:a}=e,s=x().Ay.state;if(!s.isOpen)return;const{targets:l,disableSuccessToast:c,moveToContext:d,isDefaultPrivateLocation:u,flowId:p,autocompleteQuery:m}=s,g={targets:l,value:o,environment:t,shouldClearPagePermissions:i,disableSuccessToast:c,moveToContext:d,isDefaultPrivateLocation:u,renderType:r,timeToSelectMs:Date.now()-s.openedTimeMs,flowId:p,isSearchResult:Boolean(m)||a};if(s.dontCommitActions)return re({environment:t,clearSelection:!0}),void(s.onAccept&&s.onAccept(g));await $().createAndCommitAsync({environment:t,userAction:"MoveToMenuRenderer.completeMoveTransaction",waitForServerCommit:!1,useSudoMode:n,perform:async e=>{await ne({...g,transaction:e}),s.onAccept&&s.onAccept(g)}})}async function ne(e){let{targets:t}=e;const{value:o,transaction:n,environment:r,shouldClearPagePermissions:s,disableSuccessToast:l,moveToContext:u,isDefaultPrivateLocation:g,renderType:_,timeToSelectMs:S,flowId:w,isSearchResult:k}=e,{currentSpaceStore:A}=I().default.state;if(!A)return;const C=await async function(e,t,o,n){let r=[];const i=p().$1(e);if(!i)return[];const s=(0,f().UH)(i)??(0,h().Ib)(i,o);if(!s)return[];if(!s.collectionStore())return[];const l=s.currentSubitemFormatStoreForCollectionStore.state,c=s.normalizedSchemaStore.state,d=(null==l?void 0:l.inverse)&&c[l.inverse];if(!d||!(0,a().nC)(d))return[];if(!e.some((e=>(0,h().rt)({store:e,subitemFormat:l,propertySchema:d}).length>0)))return[];const u=(0,b().sZ)(t);if(u instanceof T().md||u instanceof T().Bv){if(await ce(u)instanceof T().md){const t=await N().zM({environment:o,blocks:e,options:{canEdit:!0},collectionContextStore:s});return r=t.result,"failed"===t.status?[]:r}}return[]}(t,o,r);t=[...t,...C],re({environment:r,clearSelection:!0});const M=A.id,P=function(e){const{type:t}=e;switch(t){case"page":case"collection":case"space-private-pages":case"team":return e.spaceId;case"space":return e.id;default:(0,m().HB)(t)}}(o);if(P&&M!==P){if(!(await(0,b().P7)()))return}const R=t.find((e=>{const t=e.getType();return Boolean(t&&(0,i().$I)(t))})),E=R&&(0,y().Uo)(R),D=(0,x().jU)(t),L=Object.fromEntries(t.map((e=>[e.id,e.getParentPointer()]))),F=await ae({environment:r,value:o,targets:t,transaction:n,shouldClearPagePermissions:s});if(!F)return;const U=(0,b().nn)(o,r);O().Ce({environment:r,previousParentPointers:L,movedItems:t,moveToLocation:U,disableSuccessToast:l,numSubitems:C.length});const V=R&&(0,y().Uo)(R);B().Oy(r,{table:F.table,from:u,type:null==U?void 0:U.type,team_before:E&&(0,v()._d)(E),team_after:V&&(0,v()._d)(V),targets_database_type:D,destination_database_type:F.table===d().Vl?F.getDatabaseType():void 0,isDefaultPrivateLocation:g,render_type:_,time_to_select_ms:S,flowId:w,isSearchResult:k,subitemTreeSize:C.length>0?C.length:void 0}),F.table===c().ev&&await O().Ym(A,A.id,F.id)}function re(e){const{environment:t,clearSelection:o}=e,n=x().Ay.state;x().Ay.setState({isOpen:!1,lastPageId:n.lastPageId}),o&&H().IU({environment:t}),n.isOpen&&"home_tab"===n.moveToContext&&q().navigateToHomeTab(t)}async function ie(e){return le({...e,action:"add"})}async function ae(e){return le({...e,action:"move"})}async function se(e){return le({...e,action:"retain-alias"})}async function le(e){const{value:t,transaction:r,targets:i,shouldClearPagePermissions:a}=e,l=(0,b().sZ)(t),d=await G().$K({moveStores:i,moveTargetStore:l});if("user_cancelled_move"===d)return;let p;const f=i.at(0);f&&(p=(0,h().oC)(f)||(0,h().aR)(f,e.environment));const v=await async function(e){const{transaction:t,targets:r,value:i,environment:a,action:l}=e,{mainEditorCurrentBlockStore:d,currentSpaceStore:u,currentSpaceViewStore:p}=I().default.state,{id:f}=a.currentUser;if(!f||!p)return;const v=(0,b().sZ)(i);if(!v)return;let h;const{table:y}=v;switch(y){case"collection":case"block":h=await async function(e){const{environment:t,blockOrCollectionStore:o,targets:n,transaction:r,retainAliasInCurrentParent:i}=e,a=await ce(o);if(!a)throw new Error("Move to store invalid.");for(const s of n){const e=s.getParentStore();if(e instanceof T().Bv&&i){const o=P().s({environment:t,parentBlockStore:e,targetStore:s,transaction:r});j().NI({parentStore:e.getContentStore(),after:s.id,childStore:o,transaction:r})}if(a instanceof T().Bv)j().NI({parentStore:a,childStore:s,transaction:r});else if(a instanceof T().md){const e=(0,D().K)({environment:t,stores:[s],spaceId:a.getSpaceId(),transaction:r})[0];(0,E().j)({environment:t,store:e,collectionStore:a,shouldCoerce:!0,groupsPointer:[],transaction:r}),j().X$({parentStore:a,childStore:e,transaction:r})}}return a}({environment:a,blockOrCollectionStore:v,targets:r,transaction:t,retainAliasInCurrentParent:"retain-alias"===l});break;case"space":if("space-private-pages"===i.type&&v.id===(null==u?void 0:u.id))h=de({environment:a,spaceStore:v,spaceViewStore:p,targets:r,transaction:t,currentUserId:f,retainAliasToBlock:"retain-alias"===l});else{if(!d)return;h=await async function(e){const{environment:t,transaction:r,currentSpaceViewStore:i,currentBlockStore:a,currentUserId:l,spaceStore:d,targets:u,action:p,value:m}=e;if("space"!==m.type&&m.spaceId&&m.spaceId!==d.id)throw new Error("Wrong value to move to another space");(await o.e(5834).then(o.bind(o,375078))).maybeTurnCollectionViewIntoCollectionViewPage({environment:t,blocks:u,transaction:r});const f=a.getSpaceId()||d.id;let v;if("move"===p&&("space"!==m.type&&m.spaceId&&m.spaceId!==f||"space"===m.type&&m.id!==f||"space-private-pages"!==m.type)){U().m({message:Z.duplicatingContent,targetRecordId:d.id});const e=await K().rr({environment:t,blockStores:u,spaceId:d.id,targetParent:ue(m)});if(U().V(),void 0!==e.error)return void(e.error.data&&g().Rk(e.error.data)?g().yj({product:e.error.data.clientData.metadata.product}):L().f1(e.error.message));v=e.value}else"space-private-pages"===m.type&&de({environment:t,spaceStore:d,spaceViewStore:i,targets:u,transaction:r,currentUserId:l,retainAliasToBlock:"retain-alias"===p});await async function(e){const{environment:t,currentBlockStore:o,currentUserId:r,spaceStore:i,targets:a,crossSpaceTargetBlockId:l}=e,d=Boolean(a.find((e=>e.id===o.id))),u=(0,S().km)(i.id);if(!d||!u)return;const p=l?T().Bv.createChildStore(o,{table:c().ev,id:l}):o;await Q().C({environment:t,spaceId:i.id,userId:r}),await async function(e){const{environment:t,spaceStore:o,spaceViewStore:n,blockStore:r}=e;o&&n&&(t.device.isMobileNative&&s().log({level:"info",from:"moveToMenuActions",type:"SpaceSwitchingDebug",data:{message:"moveToMenuActions.switchToSpace"}}),I().default.setState({...I().default.state,currentSpaceStore:o,currentSpaceViewStore:n,mainEditorCurrentBlockStore:r}),await F().fD(t))}({environment:t,spaceStore:i,spaceViewStore:u,blockStore:p}),V().Yf({environment:t,blocks:[p],pageVisitSource:n().y8.Move})}({environment:t,currentBlockStore:a,currentUserId:l,targets:u,spaceStore:d,crossSpaceTargetBlockId:v}),v&&W().D6({label:_().A.formatMessage(Z.duplicatedToSpace,{name:(0,b().T)({movedItems:u}),spaceName:d.getName()})});return d}({environment:a,transaction:t,currentSpaceViewStore:p,currentBlockStore:d,currentUserId:f,spaceStore:v,targets:r,value:i,action:l})}break;case"team":h=(await(0,w().U)())({environment:a,transaction:t,currentSpaceViewStore:p,teamStore:v,targets:r,value:i,action:l,location:{type:"append"}});break;default:(0,m().HB)(y)}"move"===l&&O().kl({environment:a,transaction:t,moveToStore:v,targetBlocks:r,from:"move_to"});return h}({...e});if(!v)return;if("space-private-pages"!==t.type)for(const{blockStore:o,permissions:n}of d)z().zv({store:o,data:{permissions:n},transaction:r});if(!a||l.table===u().NX&&"space-private-pages"===t.type||K().iz({blocks:i,transaction:r}),p&&v instanceof T().md&&f){let t=(0,h().vd)(v);if(!t){const o=new(A().A)(e.environment);if(o.setContext({type:"collectionPage",collectionViewBlockStore:void 0,collectionStore:v}),o){N().VI({transaction:r,collectionContextStore:o,environment:e.environment})&&(t=(0,h().vd)(v))}}p&&t&&N().fA({blocks:i,transaction:r,from:p.subitemFormat,to:{property:t.property,inverse:t.inverse},environment:e.environment})}return v}async function ce(e){let t;return await e.load(),t=e instanceof T().md?e:e.isLinkedCollectionView()?e.getCollectionViewSourceOrLinkCollectionStores()[0]:e.isCollectionView()?e.getCollectionStore():e,t}function de(e){let{environment:t,spaceStore:o,spaceViewStore:n,targets:r,currentUserId:i,transaction:a,retainAliasToBlock:s}=e;for(const l of r){const e=l.getParentStore();if($().applyOperation({store:l,operation:{command:"moveToPrivate",path:[],pointer:l.getSpaceShardedPointer(),args:{spaceViewPointer:n.getSpaceShardedPointer(),userId:i,removeFromParent:null==e?void 0:e.pointer}},transaction:a}),e instanceof T().Bv&&s){const o=P().s({environment:t,parentBlockStore:e,targetStore:l,transaction:a});j().NI({parentStore:e.getContentStore(),after:l.id,childStore:o,transaction:a})}}return o}function ue(e){const{type:t}=e;switch(t){case"space":case"space-private-pages":return;case"page":return e.spaceId?{id:e.id,table:"block",spaceId:e.spaceId}:void 0;case"collection":case"team":return e.spaceId?{id:e.id,table:t,spaceId:e.spaceId}:void 0;default:(0,m().HB)(t)}}},751086:(e,t,o)=>{o.d(t,{a:()=>p});o(944114),o(898992),o(354520);var n=()=>o(592269),r=()=>o(31503),i=()=>o(179034),a=()=>o(161479);const s=(0,o(583835).Dv)("renameGroup");var l=()=>o(317909),c=()=>o(630116),d=()=>o(357625),u=()=>o(394653);function p(e){const{environment:t,collectionStore:o,property:p,oldValue:m,newValue:g,preventPublishAppEventsForBlockUpdates:f,transaction:v}=e,h=o.getSchema(),_=t.currentUser.id;f||o.inMemoryRecordCache.forEachRecord(_,(e=>{var r;let{model:a}=e;if(a.table!==i().ev)return;const s=c().Bv.createChildStore(o,{table:i().ev,id:a.id});if(s.canEdit()&&(null===(r=s.getAssociatedCollectionStore())||void 0===r?void 0:r.id)===o.id){const e=n().Ic({block:a,schema:h,property:p,oldValue:m,newValue:g});(0,u().l)({environment:t,blockStore:s,properties:e,transaction:v})}})),function(e){const{collectionStore:t,property:o,oldValue:n,newValue:i,transaction:a}=e;if("select"!==i.type&&"multi_select"!==i.type||"select"!==n.type&&"multi_select"!==n.type)return;const s=t.getParentBlockStore();if(!s)return;const d=s.getCollectionViewStores();for(const m of d){var u,p;const e=[];if("form_editor"!==m.getType())continue;const t=m.getFormBlockStore();if(!t)continue;const s=t.getLayoutPointer();if(!s)continue;const d=c().K_.createChildStore(t,s),g=((null===(u=d.getRawModules())||void 0===u?void 0:u.form_layout_schema)||[]).filter((e=>"formQuestion"===e.type)),f=Object.values((null===(p=d.getRawModules())||void 0===p?void 0:p.form_conditional_modules)||{}).filter((e=>"formQuestion"===e.type));(0,r().Dk)({modules:g,area:"form_layout_schema",property:o,oldValue:n,newValue:i,formLayoutPointer:s,submitOperations:e}),(0,r().Dk)({modules:f,area:"form_conditional_modules",property:o,oldValue:n,newValue:i,formLayoutPointer:s,submitOperations:e});for(const o of e)l().applyOperation({store:d,operation:o,transaction:a})}}({collectionStore:o,property:p,oldValue:m,newValue:g,transaction:v}),o.isDefaultRecordCache()&&v.postSubmitCallbacks.push((async e=>{const n=o.pointer,{value:r}=await d().UT(t,s,{collection:{id:n.id,spaceId:(0,a().e)(n.spaceId)},property:p,oldValue:m,newValue:g}).next();if(r.error)throw r.error}))}},751380:(e,t,o)=>{o.d(t,{Ay:()=>h,PO:()=>v,dJ:()=>u,nB:()=>m,oQ:()=>g,tK:()=>p});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454),o(908872),o(737550);var n=o(296540),r=()=>o(401497),i=()=>o(245241),a=()=>o(496603),s=()=>o(284371),l=()=>o(720665);function c(e){const t=[];let o=!1,n=e;for(;""!==n;){const e=o?i()._x:i().$8,r=n.indexOf(e);if(-1===r)return t.push(d(n,!1)),t;const a=n.substring(0,r),s=n.slice(r+e.length);""!==a&&t.push(d(a,o)),n=s,o=!o}return t}function d(e,t){return t?[e,"highlight"]:[e]}function u(e){return 2===e.length&&"highlight"===e[1]}function p(e){return e[0]}function m(e){return e.reduce(((e,t)=>{if(0===e.length)return[t];const o=e[e.length-1];return u(o)===u(t)?[...e.slice(0,e.length-1),d(p(o)+p(t),u(t))]:[...e,t]}),[])}function g(e){if(!e)return[];let t=c(e);t.some((e=>u(e)&&1===p(e).length))&&(t=m(t));const o=t.filter(u).map(p);return a().sb(o)}function f(e){const{text:t,patterns:o,uniqueTokenHighlighterContext:n}=e,r=a().sb(o.filter((e=>e.length>0)));if(0===r.length)return[d(t,!1)];const i=a().Ul(r,(e=>-e.length)).map(a().Nt);return function(e,t,o){const n=(0,l().w$)(t,e);if(0===n.length)return[d(e,!1)];let r=0;const i=[];for(let a=0;a<n.length;a++){const t=n[a];if(!t)continue;let s;void 0===o||!o.has(t[0].toLowerCase())?(void 0!==o&&o.add(t[0].toLowerCase()),r!==t.index&&i.push(d(e.slice(r,t.index),!1)),i.push(d(t[0],!0)),s=t.index+t[0].length):s=r;n[a+1]||s===e.length||i.push(d(e.slice(s),!1)),r=s}return i}(t,new RegExp(i.join("|"),"ig"),n)}function v(e){let{words:t,removeDuplicate:o,styleOverride:i}=e;const a=(0,r().IS)((e=>({highlight:{fontWeight:s().Wy.medium,color:e.text.primary,...i}})),[i]);return(0,n.useMemo)((()=>{if(0===t.length)return;const e=o?new Set:void 0;return{tokenize:o=>f({text:o,patterns:t,uniqueTokenHighlighterContext:e}),style:a.highlight}}),[t,o,a.highlight])}const h=c},752196:(e,t,o)=>{o.d(t,{A:()=>n});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(803949);const n=class{constructor(){this.listeners={}}addListener(e,t){let o=this.listeners[e];o||(o=new Set,this.listeners[e]=o),o.add(t)}addOnceListener(e,t){var o=this;const n=function(){o.removeListener(e,n),t(...arguments)};this.addListener(e,n)}removeListener(e,t){const o=this.listeners[e];o&&(o.delete(t),0===o.size&&delete this.listeners[e])}emit(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];const r=this.listeners[e];r&&r.forEach((e=>e(...o)))}listenerCount(e){const t=this.listeners[e];return t?t.size:0}}},752885:(e,t,o)=>{o.d(t,{p:()=>n});class n{constructor(e){this.memo=new WeakMap,this.debugName=void 0,this.hits=0,this.misses=0,this.getStateFor=e=>this.computeMemo(e),this.computeMemo=e=>{let t=this.memo.get(e);return t?this.hits++:(this.misses++,t=new(o(496506).default)((()=>this.options.compute(e,this.options.memoizeRecursion?this.computeMemo:this.computeNonMemo)),{debugName:this.debugName}),this.memo.set(e,t)),t.getState()},this.computeNonMemo=e=>this.options.compute(e,this.computeNonMemo),this.options=e,this.debugName=`RecursiveComputedStore.${e.debugName}`,(0,o(604341).exposeDebugInstance)(this.debugName,this)}}},753035:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},753199:(e,t,o)=>{o.d(t,{SQ:()=>i,kV:()=>l,s7:()=>a,tr:()=>s,y$:()=>n});let n=function(e){return e[e.ButtonMouseDown=0]="ButtonMouseDown",e[e.EditorMouseDown=1]="EditorMouseDown",e[e.EditorMouseUp=2]="EditorMouseUp",e[e.EditorClick=3]="EditorClick",e[e.MenuListClick=4]="MenuListClick",e[e.EditorContextMenu=5]="EditorContextMenu",e[e.EditorMouseOver=6]="EditorMouseOver",e[e.EditorHoverMouseMove=7]="EditorHoverMouseMove",e[e.EditorDropMouseMove=8]="EditorDropMouseMove",e[e.EditorDoubleClick=9]="EditorDoubleClick",e[e.SidebarMouseMove=10]="SidebarMouseMove",e[e.ManageTeamsRowClick=11]="ManageTeamsRowClick",e[e.MobileTap=12]="MobileTap",e[e.CollectionSettingsClick=13]="CollectionSettingsClick",e[e.BaseTableRowClick=14]="BaseTableRowClick",e[e.NotificationClick=15]="NotificationClick",e[e.CollectionAutomationSettingsClick=16]="CollectionAutomationSettingsClick",e[e.PageTitleClick=17]="PageTitleClick",e[e.AssistantGroupedEditClick=18]="AssistantGroupedEditClick",e[e.PermissionItemClick=19]="PermissionItemClick",e[e.ToggleTrustedDomainPermission=20]="ToggleTrustedDomainPermission",e[e.PerformanceToolbarMouseMove=21]="PerformanceToolbarMouseMove",e[e.CopyToClipboard=22]="CopyToClipboard",e[e.EditorEsc=23]="EditorEsc",e}({});const r={};function i(e){const t=r[e.context],o=e.event.nativeEvent||e.event;if((null==t?void 0:t.deref())!==o){var n;r[e.context]=new WeakRef(o);"unhandled"===(null===(n=e.callback)||void 0===n?void 0:n.call(e))&&(r[e.context]=t)}}async function a(e){const t=r[e.context],o=e.event.nativeEvent||e.event;if((null==t?void 0:t.deref())!==o){var n;r[e.context]=new WeakRef(o);"unhandled"===await(null===(n=e.callback)||void 0===n?void 0:n.call(e))&&(r[e.context]=t)}}function s(e){i({event:e,context:n.EditorMouseDown,callback:()=>{}})}function l(e){i({event:e,context:n.EditorClick,callback:()=>{}})}},753476:(e,t,o)=>{o.d(t,{e:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("thinCheckboxCircleDark",{viewBox:"0 0 22 23",svg:(0,n.jsx)("circle",{cx:"11",cy:"11.5",r:"10",stroke:"#5A5A5A",strokeWidth:"1"})})},753514:(e,t,o)=>{o.d(t,{HZ:()=>Ne,Hw:()=>De,aH:()=>Ee,lc:()=>F});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(672577),o(430670),o(803949),o(581454),o(737550),o(814603),o(147566),o(198721);var n=()=>o(188835),r=o.n(o(43371)),i=()=>o(244641),a=()=>o(319625),s=()=>o(496603),l=()=>o(498212),c=()=>o(700500),d=()=>o(970013),u=()=>o(713998),p=()=>o(258035),m=()=>o(604995),g=()=>o(304740),f=()=>o(634201),v=()=>o(617871),h=()=>o(522419),_=()=>o(857639),b=()=>o(513416),y=()=>o(792071),S=()=>o(134025),w=()=>o(335098),k=()=>o(179034),I=()=>o(519831),A=()=>o(343666),x=()=>o(197959),C=()=>o(798880),T=()=>o(919709);const M={CommentAuthor:"cma",CommentDiscussionId:"cmm"},P={a:!0,strong:!0,em:!0,code:!0,del:!0,s:!0,span:!0,time:!0},B={meta:!0,style:!0,script:!0,head:!0,title:!0},R="sourceCode",E=700,D=400,N=1e5;function L(e){if(!e)return;const t=parseInt(e);return isNaN(t)?void 0:t}const F={[T().Ifu.Page]:"data-notion-page-id",spaceId:"data-notion-space-id",[T().Ifu.Highlight]:"data-notion-highlight",[T().Ifu.User]:"data-notion-user-id",[T().Ifu.Discussion]:"data-notion-block-discussion-id",[T().Ifu.Equation]:"data-notion-inline-equation",[T().Ifu.Comment]:"data-notion-block-comment-id",[M.CommentAuthor]:"data-notion-block-comment-author-id",[M.CommentDiscussionId]:"data-notion-block-comment-discussion-id",[c().xd.code]:"data-notion-code-syntax",[c().xd.callout]:"data-notion-callout",calloutIcon:"data-notion-callout-icon",calloutBackground:"data-notion-callout-background",[c().xd.tableOfContents]:"data-notion-toc",[c().xd.file]:"data-notion-file",fileAlias:"data-notion-file-alias",[c().xd.columnList]:"data-notion-column-list",[c().xd.column]:"data-notion-column-ratio",[c().xd.video]:"data-notion-video",[c().xd.audio]:"data-notion-audio",[c().xd.pdf]:"data-notion-pdf",[c().xd.equation]:"data-notion-equation",dateFormat:"data-notion-date-format",[c().xd.externalObjectInstance]:"data-notion-link-preview",[c().xd.embed]:"data-notion-embed"},U="Lucidchart",O="Jira",V="JiraDC";v().me,v().Fv,v().me,v().Fv,v().me,v().Fv;function j(e,t){return t&&t.nodeType===e.Node.ELEMENT_NODE}function z(e,t){return e.nodeType===t.Node.TEXT_NODE||e instanceof t.Element&&P[e.tagName.toLowerCase()]}function q(e,t,o){var n;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(t&&1===e.nodeType&&e.hasAttribute(F[T().Ifu.Comment]))return r;if(o&&"pre"===(null===(n=e.tagName)||void 0===n?void 0:n.toLowerCase()))return r;r.push(e);for(const i of f().PE(e.childNodes))q(i,t,o,r);return r}function H(e){const t=[];if(!e.parentNode)return t;let o=e.parentNode;for(;o;)t.push(o),o=o.parentNode||void 0;return t}function W(e,t){const o=H(e).filter((e=>e instanceof t.Element&&("ul"===e.tagName.toLowerCase()||"ol"===e.tagName.toLowerCase()))).length;return o}const K=["•","◦","▪"],G=["h1","h2","h3","h4","h5","h6"].map((e=>`${e}:not(:first-child)`)).join(", ");function $(e){const{node:t,window:o,stripText:n,stripSurroundingWhitespace:r,timeZone:a,ignoreComments:s,deps:d,ignoreCodeBlock:u,preserveLineBreaksInTableCellsEnabled:p}=e;if(!n){for(const e of Array.from(t.querySelectorAll("p:not(:first-child)")))e.prepend("\n");for(const e of Array.from(t.querySelectorAll(G)))e.prepend("\n");for(const e of Array.from(t.querySelectorAll("ul > li"))){const t=W(e,o)-1,n=t%K.length,r=K[n],i="    ".repeat(t);e.prepend(`\n${i}${r} `)}for(const e of Array.from(t.querySelectorAll("ol"))){const t=W(e,o),n="    ".repeat(t);for(let o=0;o<e.children.length;o+=1){e.children[o].prepend(`\n${n}${o+1}. `)}}for(const e of Array.from(t.querySelectorAll("pre")))e.parentNode&&e.parentNode.insertBefore(o.document.createTextNode("\n\n"),e)}const g=[],f=[],v=q(t,s,u);let h=!1;const _=v.filter((e=>e.nodeType!==o.Node.TEXT_NODE?!!(p&&e instanceof o.Element&&"br"===e.tagName.toLowerCase())&&(e.data="\n",h=!0,!0):!n||!/^( |\t)*(\n)+( |\t)*$/.test(e.data)));let b=!0;_.forEach(((e,s)=>{let u=e.data;n&&(u=u.replace(/\[ \] /g,""),u=u.replace(/\[x\] /g,""),u=u.replace(/^[\-\*\•]\s?/g,""),u=u.replace(/(\s)+/g,"$1")),!t.hasAttribute("confluenceTabSpaces")&&0===s&&r&&(u=u.trimStart()),u=T().xV3(u),s===_.length-1&&b&&r&&(u=u.trimEnd());const p=[],v=H(e);let h;!n&&v.some((e=>e instanceof o.Element&&("h1"===e.tagName.toLowerCase()||"h2"===e.tagName.toLowerCase()||"h3"===e.tagName.toLowerCase()||"h4"===e.tagName.toLowerCase()||"h5"===e.tagName.toLowerCase()||"h6"===e.tagName.toLowerCase())))&&p.push([T().Ifu.Bold]),v.some((e=>e instanceof o.Element&&"strong"===e.tagName.toLowerCase()))&&p.push([T().Ifu.Bold]),v.some((e=>e instanceof o.Element&&"em"===e.tagName.toLowerCase()))&&p.push([T().Ifu.Italic]),v.some((e=>e instanceof o.Element&&"u"===e.tagName.toLowerCase()))&&p.push([T().Ifu.Underline]),v.some((e=>e instanceof o.Element&&("code"===e.tagName.toLowerCase()||"pre"===e.tagName.toLowerCase())))&&p.push([T().Ifu.Code]),v.some((e=>e instanceof o.Element&&("del"===e.tagName.toLowerCase()||"strike"===e.tagName.toLowerCase()||"s"===e.tagName.toLowerCase())))&&p.push([T().Ifu.Strike]);const y=v.find((e=>{var t;return e instanceof o.Element&&(e.hasAttribute(F[T().Ifu.Highlight])||(null===(t=e.parentElement)||void 0===t?void 0:t.hasAttribute(F[T().Ifu.Highlight])))}));if(y&&y instanceof o.Element){var S;const e=y.getAttribute(F[T().Ifu.Highlight]),t=null===(S=y.parentElement)||void 0===S?void 0:S.getAttribute(F[T().Ifu.Highlight]),o=Ue(e&&"undefined"!==e?e||"":t||"");o&&p.push([T().Ifu.Highlight,o])}const w=v.find((e=>e instanceof o.Element&&"a"===e.tagName.toLowerCase()));if(w){const e=w.getAttribute(F[T().Ifu.Page]),t=w.getAttribute("notionUserId")||w.getAttribute(F[T().Ifu.User]),o=w.getAttribute(F.spaceId),n=w.getAttribute(F[T().Ifu.Comment]);"string"==typeof e&&(0,l().uj)(e)&&"string"==typeof o&&(0,l().uj)(o)?h=T().ld4(e,o):w.href?p.push(T().Sez(w.href)):"string"==typeof t&&(0,l().uj)(t)?(h=T().P4h(t),w.getAttribute("notionUserId")&&s===_.length-2&&(b=!1)):n&&o&&(0,l().uj)(n)&&(0,l().uj)(o)&&(h=T().hiQ(n,o))}const I=v.find((e=>!!(e instanceof o.Element&&e.getAttribute(F[T().Ifu.Discussion])))),A=t.classList.contains("page-comment");if(I&&!A){const e=I.getAttribute(F[T().Ifu.Discussion]);if(e){e.split(",").forEach((e=>p.push(T().aQj(e))))}}const x=v.find((e=>e instanceof o.Element&&"sub"===e.tagName.toLowerCase()));let C;"true"===(null==x?void 0:x.getAttribute("confluenceProcessableEquation"))&&(C=`_{${x.textContent}}`);const M=v.find((e=>e instanceof o.Element&&"sup"===e.tagName.toLowerCase()));let P;"true"===(null==M?void 0:M.getAttribute("confluenceProcessableEquation"))&&(P=`^{${M.textContent}}`);const B=v.find((e=>e instanceof o.Element&&e.hasAttribute(F[T().Ifu.Equation])));let R;null!=B&&B.textContent&&(R=B.textContent);const E=v.find((e=>e instanceof o.Element&&"time"===e.tagName.toLowerCase()));if(E){const e=E.getAttribute("datetime");if(e){const t=function(e,t){const o=i().c9.fromISO(e),n=o.toMillis();return n===o.startOf("day").toMillis()?m().C6.toPersistedDate(n,t):m().C6.toPersistedDateTime(n,t)}(e,a),o={...t};"relative"===E.getAttribute(F.dateFormat)&&(o.date_format="relative"),h=T().Ww9(o)}}const D=v.find((e=>!!(e instanceof o.Element&&e instanceof o.HTMLSpanElement&&e.getAttribute(F[c().xd.externalObjectInstance]))));if(h)g.push(T().wmz(h,p));else if(C)g.push(T().G0H(C,p));else if(P)g.push(T().G0H(P,p));else if(R)g.push(T().G0H(R,p));else if(D&&null!=d&&d.randomID){var N;const e=(null==d||null===(N=d.spaceIdCreator)||void 0===N?void 0:N.idInSavedSpace(k().ev))??d.randomID();g.push(T().wmz(T().bMp(e),p)),f.push(e)}else g.push(T().Ey_(u,p))}));const y=T().JG8(g,N),S=T().__s(y);if(h){const e=T().Ey_("",[[T().Ifu.Link,""]]);S.push(e)}return{titleTokens:S,linkMentionBlockIds:f}}function Y(e,t){const o=["img[src]","a[download]",`a[${F[c().xd.file]}]`,`audio[${F[c().xd.audio]}]`,`video[${F[c().xd.video]}]`,"li"];t&&o.push("pre");const n=e.querySelectorAll(o.join(","));return f().PE(n)}function Q(e){const{actor:t,parent:o,node:n,allOperations:r,deps:{importFileMap:i,window:a,intl:s,randomID:l,spaceIdCreator:c,randomShortID:d,isPhoneNumber:u},options:{useCrdt:p,ignoreBlockCount:m,considerCodeBlockAsNonTextItem:g}}=e;return Se({actor:t,parent:o,nodes:Y(n,g),allOperations:r,deps:{importFileMap:i,window:a,intl:s,randomID:l,spaceIdCreator:c,randomShortID:d,isPhoneNumber:u},options:{useCrdt:p,ignoreBlockCount:m}})}function Z(e){const{actor:t,parent:o,node:n,type:r,allOperations:i,options:{useCrdt:a,ignoreBlockCount:s,stripText:l,stripSurroundingWhitespace:d,ignoreCodeBlock:u},deps:{window:p,randomID:m,spaceIdCreator:g}}=e,f=(null==g?void 0:g.idInSavedSpace(k().ev))??m(),{titleTokens:v,linkMentionBlockIds:h}=$({node:n,window:p,stripText:l,stripSurroundingWhitespace:d,ignoreComments:!0,ignoreCodeBlock:u,deps:{randomID:m,spaceIdCreator:g}}),{operations:_}=y().zgg.create({id:f,type:r,properties:{title:v},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!s||void 0},{useCrdt:a});if(i.push(..._),h.length){const e=n.querySelectorAll(`span[${F[c().xd.externalObjectInstance]}]`);for(const[n,r]of Array.from(e).entries())h[n]&&ie({actor:t,parent:o,node:r,allOperations:i,deps:{randomID:m,spaceIdCreator:g},options:{useCrdt:a,ignoreBlockCount:s},blockId:h[n]})}return be({node:n,spaceId:o.spaceId,window:p,blockId:f,actor:t,allOperations:i}),f}function X(e){const{actor:t,parent:o,allOperations:n,deps:{randomID:r,spaceIdCreator:i},options:{useCrdt:a,ignoreBlockCount:s}}=e,l=(null==i?void 0:i.idInSavedSpace(k().ev))??r(),{operations:d}=y().zgg.create({id:l,type:c().xd.divider,parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!s||void 0},{useCrdt:a});return n.push(...d),l}function J(e){const{actor:t,parent:o,source:n,allOperations:r,deps:{randomID:i,spaceIdCreator:a},options:{useCrdt:s,ignoreBlockCount:l,fallbackWidth:d}}=e;let u;"image"===n.type&&n.width?u=Math.min(n.width,E):d&&(u=Math.min(d,E));const p=(null==a?void 0:a.idInSavedSpace(k().ev))??i(),{model:m,operations:g}=y().zgg.create({id:p,type:c().xd.image,properties:{source:T().x9d(n.secureS3UrlOrAlias)},format:{block_width:u},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!l||void 0},{useCrdt:s});return r.push(...g,m.getSecureFilesUpdate("","")),p}function ee(e){const{actor:t,parent:o,node:n,sourceUrl:r,allOperations:i,deps:{randomID:a,spaceIdCreator:s},options:{useCrdt:l,ignoreBlockCount:c}}=e,d=L(n.getAttribute("height")),u=L(n.getAttribute("width")),p=(null==s?void 0:s.idInSavedSpace(k().ev))??a();let m;try{m=new URL(r)}catch(h){m=r}const f=g().WT({url:r,baseUrl:m instanceof URL?m.origin:m,publicDomainName:""}),{operations:v}=y().zgg.create({id:p,type:f,properties:{source:T().x9d(r)},format:{block_width:u,block_height:d,block_full_width:!1,block_page_width:!(u||d),block_preserve_scale:!0},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!c||void 0},{useCrdt:l});return i.push(...v),p}function te(e){const{actor:t,parent:o,source:n,allOperations:r,deps:{randomID:i,spaceIdCreator:a},options:{useCrdt:s,ignoreBlockCount:l}}=e,c=(null==a?void 0:a.idInSavedSpace(k().ev))??i(),d=g().WT({url:n.secureS3UrlOrAlias,baseUrl:n.secureS3UrlOrAlias,publicDomainName:""}),u="embed"===d?"file":d,{model:p,operations:m}=y().zgg.create({id:c,type:u,properties:{title:T().x9d((0,h().Jt)(n.secureS3UrlOrAlias)),source:[T().Ey_(n.secureS3UrlOrAlias,[T().Sez(n.secureS3UrlOrAlias)])]},format:{block_width:"image"===n.type&&n.width?Math.min(n.width,E):void 0,block_height:n.height?Math.min(n.height,D):void 0},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!l||void 0},{useCrdt:s});return r.push(...m,p.getSecureFilesUpdate("","")),c}function oe(e){return"#text"===e.nodeName?e.textContent?e.textContent:"":Array.from(e.childNodes).map((e=>{const t=e.nodeName.toLowerCase();return"br"===t?"\n":"div"===t?`${oe(e)}\n`:oe(e)})).map((e=>e.split("\n").map((e=>e.trimRight())).join("\n"))).join("")}function ne(e){const{actor:t,parent:o,node:n,allOperations:i,deps:{importFileMap:a,window:s,intl:l,randomID:d,spaceIdCreator:u,randomShortID:p,isPhoneNumber:m},options:{useCrdt:g,ignoreBlockCount:v}}=e,h=(null==u?void 0:u.idInSavedSpace(k().ev))??d(),_=n.getAttribute(F.calloutBackground),b=_?Ue(_):void 0,S=n.getAttribute(F.calloutIcon),w=S&&S.match(r()())?S:void 0,{title:I,children:A}=function(e){const{node:t,window:o}=e,n=f().PE(t.childNodes),[r,...i]=n;if(!r)return{title:[]};if(function(e){return t=>!!(j(e,t)&&t instanceof e.HTMLParagraphElement)}(o)(r)){const{titleTokens:e}=$({node:r,window:o,stripText:!1,stripSurroundingWhitespace:!0,ignoreComments:!0});return{title:e,children:i}}if(z(r,o)){const{titleTokens:e}=$({node:t,window:o,stripText:!1,stripSurroundingWhitespace:!0,ignoreComments:!0});return{title:e,children:void 0}}return{title:[],children:n}}({node:n,window:s}),x=Array.isArray(A)?Se({actor:t,parent:{table:k().ev,id:h,spaceId:o.spaceId},nodes:A,allOperations:i,deps:{importFileMap:a,window:s,intl:l,randomID:d,spaceIdCreator:u,randomShortID:p,isPhoneNumber:m},options:{useCrdt:g,ignoreBlockCount:v}}):[],{operations:C}=y().zgg.create({id:h,type:c().xd.callout,content:x,properties:{title:I},format:{block_color:b,page_icon:w},parent:{id:o.id,table:o.table,spaceId:o.spaceId},space_id:o.spaceId,createdBy:t,ignore_block_count:!!v||void 0},{useCrdt:g});return i.push(...C),be({node:n,spaceId:o.spaceId,window:s,blockId:h,actor:t,allOperations:i}),h}function re(e){const{actor:t,parent:o,node:n,allOperations:r,deps:{importFileMap:i,randomID:a,spaceIdCreator:s},options:{useCrdt:l,ignoreBlockCount:d}}=e,u=n.getAttribute(F[c().xd.file])||"",p=i[u]?i[u].secureS3UrlOrAlias:u;let m=n.getAttribute(F.fileAlias)||"";!m&&p.lastIndexOf("/")>=0&&(m=p.substring(p.lastIndexOf("/")+1));const g=(null==s?void 0:s.idInSavedSpace(k().ev))??a(),{model:f,operations:v}=y().zgg.create({createdBy:t,id:g,parent:{id:o.id,table:o.table,spaceId:o.spaceId},space_id:o.spaceId,properties:{source:T().x9d(p),title:T().x9d(m)},type:c().xd.file,ignore_block_count:!!d||void 0},{useCrdt:l});return r.push(...v,f.getSecureFilesUpdate("","")),g}function ie(e){const{actor:t,parent:o,node:r,allOperations:i,deps:{randomID:a,spaceIdCreator:s},options:{useCrdt:l,ignoreBlockCount:d}}=e,u=e.blockId?e.blockId:(null==s?void 0:s.idInSavedSpace(k().ev))??a();let p;const m="true"===r.getAttribute("bot-connected"),g=r.getAttribute("href"),f=r.getAttribute(F[c().xd.externalObjectInstance]);if(_().log({level:"info",from:"htmlHelpers",type:"linkPreviewStatus",data:{miscDataToConvertToString:{linkPreviewUrl:g,linkPreviewIntegration:f,isBotConnected:m,unfurlMetadataStr:r.getAttribute("metadata"),domainName:g?n().parse(g).hostname:void 0}}}),!g||!f)return;const v=n().parse(g).hostname;if(!v)return;if(m){const e=r.getAttribute("metadata");if(e){let t;try{t=JSON.parse(e)}catch(S){}p=t&&t.uri&&t.external_object_id&&t.bot_id&&t.attributes?{original_url:t.uri,domain:v,external_object_id:t.external_object_id,bot_id:t.bot_id,uri:t.uri,attributes:t.attributes}:{original_url:g,domain:v,error:{status_code:b().xB.BAD_REQUEST}}}else p={original_url:g,domain:v,error:{status_code:b().xB.BAD_REQUEST}}}else p={original_url:g,domain:v};if(!p)return;const{operations:h}=y().zgg.create({createdBy:t,id:u,parent:{id:o.id,table:"block",spaceId:o.spaceId},type:c().xd.externalObjectInstance,space_id:o.spaceId,format:p,ignore_block_count:!!d||void 0},{useCrdt:l});return i.push(...h),u}const ae=/language-(\w+)/;function se(e){let t=null;return null==e||e.forEach(((e,o,n)=>{if(t)return;if(w().q.hasOwnProperty(e))return void(t=e);const r=e.match(ae);r&&r.length>1&&w().q.hasOwnProperty(r[1])&&(t=r[1])})),t}function le(e){const{actor:t,parent:o,node:n,allOperations:r,deps:{randomID:i,spaceIdCreator:a,window:s},options:{useCrdt:l,ignoreBlockCount:d}}=e,u=(null==a?void 0:a.idInSavedSpace(k().ev))??i();let p=n.getAttribute(F[c().xd.code]);if(!p){var m;p=se(null===(m=n.querySelector("code"))||void 0===m||null===(m=m.parentElement)||void 0===m?void 0:m.classList)}if(!p){var g;p=se(null===(g=n.querySelector("code"))||void 0===g?void 0:g.classList)}const f=p&&w().q[p]?w().q[p]:"Plain Text",{operations:v}=y().zgg.create({id:u,type:c().xd.code,properties:{title:T().x9d(oe(n)),language:T().x9d(f)},format:{code_wrap:!0},parent:{id:o.id,table:o.table,spaceId:o.spaceId},space_id:o.spaceId,createdBy:t,ignore_block_count:!!d||void 0},{useCrdt:l});return r.push(...v),be({node:n,spaceId:o.spaceId,window:s,blockId:u,actor:t,allOperations:r}),u}function ce(e){const{actor:t,parent:o,node:n,allOperations:r,deps:{randomID:i,spaceIdCreator:a},options:{useCrdt:s,ignoreBlockCount:l}}=e,d=(null==a?void 0:a.idInSavedSpace(k().ev))??i(),{operations:u}=y().zgg.create({id:d,type:c().xd.equation,properties:{title:T().x9d(oe(n))},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!l||void 0},{useCrdt:s});return r.push(...u),d}function de(e){const{actor:t,parent:o,allOperations:n,deps:{randomID:r,spaceIdCreator:i},options:{useCrdt:a,ignoreBlockCount:s}}=e,l=(null==i?void 0:i.idInSavedSpace(k().ev))??r(),{operations:d}=y().zgg.create({id:l,type:c().xd.tableOfContents,format:{block_color:"gray"},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!s||void 0},{useCrdt:a});return n.push(...d),l}function ue(e){const{actor:t,parent:o,node:n,allOperations:r,deps:{importFileMap:i,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}=e,v=(null==d?void 0:d.idInSavedSpace(k().ev))??l(),[h,..._]=f().PE(n.childNodes),b=Se({actor:t,parent:{id:v,table:k().ev,spaceId:o.spaceId},nodes:_,allOperations:r,deps:{importFileMap:i,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}),{operations:S}=y().zgg.create({id:v,type:c().xd.quote,properties:{title:T().x9d(null!=h&&h.textContent?h.textContent.trim():"")},content:b,parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!g||void 0},{useCrdt:m});return r.push(...S),be({node:n,spaceId:o.spaceId,blockId:v,actor:t,allOperations:r,window:a}),v}function pe(e){const{actor:t,parent:o,node:n,allOperations:r,deps:{importFileMap:i,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}=e,v=(null==d?void 0:d.idInSavedSpace(k().ev))??l(),h=n.querySelector("summary"),_=f().PE(n.childNodes).filter((e=>e!==h)),b=h&&h.textContent&&(()=>{const{titleTokens:e}=$({node:h,window:a,stripText:!1,stripSurroundingWhitespace:!0,ignoreComments:!0,deps:{randomID:l,spaceIdCreator:d}});return e})(),S=Se({actor:t,parent:{id:v,table:k().ev,spaceId:o.spaceId},nodes:_,allOperations:r,deps:{importFileMap:i,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}),{operations:w}=y().zgg.create({id:v,type:c().xd.toggle,content:S,properties:{title:b||T().x9d("")},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!g||void 0},{useCrdt:m});return r.push(...w),v}function me(e){const{actor:t,parent:o,node:n,allOperations:r,deps:{importFileMap:i,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}=e,v=(null==d?void 0:d.idInSavedSpace(k().ev))??l(),h=f().PE(n.children).filter((e=>e.hasAttribute(F[c().xd.column]))).slice(0,8).map((e=>function(e){const{actor:t,parent:o,node:n,allOperations:r,deps:{importFileMap:i,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}=e,v=(null==d?void 0:d.idInSavedSpace(k().ev))??l(),h=n.getAttribute(F[c().xd.column]);let _;if(null!==h){const e=parseFloat(h);!Number.isNaN(e)&&e>0&&e<=1&&(_=e)}const b=Se({actor:t,parent:{id:v,table:k().ev,spaceId:o.spaceId},nodes:f().PE(n.children),allOperations:r,deps:{importFileMap:i,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}),{operations:S}=y().zgg.create({id:v,type:c().xd.column,format:{column_ratio:_},content:b,parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!g||void 0},{useCrdt:m});return r.push(...S),v}({actor:t,parent:{id:v,table:k().ev,spaceId:o.spaceId},node:e,allOperations:r,deps:{importFileMap:i,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}))),{operations:_}=y().zgg.create({id:v,type:c().xd.columnList,content:h,parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!g||void 0},{useCrdt:m});return r.push(..._),v}const ge=/^\[x\].*/,fe=/^\[ \].*/,ve=/^[-\*\•].*/;function he(e){const{actor:t,parent:o,node:n,allOperations:r,deps:{importFileMap:i,window:a,intl:s,randomID:l,spaceIdCreator:u,randomShortID:p,isPhoneNumber:m},options:{useCrdt:g,ignoreBlockCount:v}}=e,h=(null==u?void 0:u.idInSavedSpace(k().ev))??l(),_=a.document.createElement("span"),b=[];f().PE(n.childNodes).forEach(((e,t)=>{(function(e,t){return e instanceof t.Element&&"a"===e.tagName.toLowerCase()&&e.hasAttribute("data-confluence-web-image")})(e,a)||0===t&&function(e,t){return e instanceof t.Element&&"a"===e.tagName.toLowerCase()&&e.hasAttribute(F[c().xd.file])}(e,a)?b.push(e):0===t&&!(function(e,t){return e instanceof t.Element&&"img"===e.tagName.toLowerCase()}(e,a)||function(e,t){return e instanceof t.Element&&"video"===e.tagName.toLowerCase()}(e,a)||function(e,t){return e instanceof t.Element&&"audio"===e.tagName.toLowerCase()}(e,a))||z(e,a)?(_.appendChild(e),e instanceof a.Element&&Y(e).forEach((e=>b.push(e)))):b.push(e)}));const S=Se({actor:t,parent:{id:h,table:k().ev,spaceId:o.spaceId},nodes:b,allOperations:r,deps:{importFileMap:i,window:a,intl:s,randomID:l,spaceIdCreator:u,randomShortID:p,isPhoneNumber:m},options:{useCrdt:g,ignoreBlockCount:v}}),w=ge.test(_.textContent||""),I=fe.test(_.textContent||"");let A;A=w||I?c().xd.toDo:n.parentNode instanceof a.Element&&"ol"===n.parentNode.tagName.toLowerCase()?c().xd.numberedList:c().xd.bulletedList;let x=!1;A===c().xd.toDo&&w&&(x=!0);const{titleTokens:C}=$({node:_,window:a,stripText:!0,stripSurroundingWhitespace:!0,ignoreComments:!0,deps:{randomID:l,spaceIdCreator:u}}),{operations:M}=y().zgg.create({id:h,type:A,content:S,properties:{title:C,checked:x?T().x9d(d().I1):void 0},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!v||void 0},{useCrdt:g});return r.push(...M),be({node:_,spaceId:o.spaceId,blockId:h,actor:t,allOperations:r,window:a}),h}function _e(e){const{node:t,spaceId:o,window:n,actor:r,discussionId:i,allOperations:a,deps:s,options:l}=e,c=Array.from(t.querySelectorAll(`span[${F[M.CommentDiscussionId]}="${i}"]`)),d=Date.now(),u=[];for(const p of c){if(null===p.textContent||0===p.textContent.trim().length)continue;const e=p.getAttribute(F[T().Ifu.Comment]);if(!e)continue;const{titleTokens:c}=$({node:p,window:n,stripText:!0,stripSurroundingWhitespace:!0,ignoreComments:!1}),m=p.getAttribute(F[M.CommentAuthor]);u.push(e);const g=s&&l&&Q({actor:r,parent:{table:A().SN,id:e,spaceId:o},node:t,allOperations:a,deps:s,options:l}),f={id:e,parent_id:i,parent_table:x().$Y,space_id:o,version:1,created_time:d,last_edited_time:d,text:c,created_by_table:C().oo,created_by_id:m||r.id,alive:!0,...g&&{content:g}};a.push(S().op.set({pointer:{table:A().SN,id:e,spaceId:o},path:[],args:f}))}return u}function be(e){const{node:t,spaceId:o,blockId:n,actor:r,allOperations:i,window:a}=e,s=Array.from(t.querySelectorAll(`span[${F[T().Ifu.Discussion]}]`)),l=new Map;for(const c of s){const e=c.getAttribute(F[T().Ifu.Discussion]);if(!e)continue;e.split(",").forEach((e=>{if(l.has(e)){var t;null===(t=l.get(e))||void 0===t||null===(t=t.context)||void 0===t||t.push([c.textContent??"",[[T().Ifu.Discussion,e]]])}else{const t={id:e,type:"default",parent_id:n,parent_table:k().ev,resolved:!1,context:[[c.textContent??"",[[T().Ifu.Discussion,e]]]],space_id:o,version:0};l.set(e,t)}}))}ye({node:t,spaceId:o,window:a,blockId:n,actor:r,discussionToTextMap:l,allOperations:i})}function ye(e){const{node:t,spaceId:o,window:n,blockId:r,actor:i,discussionToTextMap:a,allOperations:s,deps:l,options:c}=e;for(const[d,u]of a.entries()){const e=_e({node:t,spaceId:o,window:n,discussionId:d,actor:i,allOperations:s,deps:l,options:c});u.comments=e,s.push(S().op.set({pointer:{table:x().$Y,id:d,spaceId:o},path:[],args:u}),{pointer:{table:k().ev,id:r,spaceId:o},command:"listAfter",path:["discussions"],args:{id:d}})}}function Se(e){const{actor:t,parent:o,nodes:n,allOperations:r,deps:i,htmlParserErrors:a,options:l}=e;return s().KC(...n.map((e=>we({actor:t,parent:o,node:e,allOperations:r,deps:i,htmlParserErrors:a,options:l}))))}function we(e){const{actor:t,parent:o,node:n,allOperations:r,deps:i,htmlParserErrors:l,options:d}=e,{importFileMap:m,window:v,intl:h,randomID:_,spaceIdCreator:b,blockContentMaxSize:y}=i,{useCrdt:S,ignoreBlockCount:w,treatNestedCodeAsCodeBlocks:C,skipTableToCollectionConversion:M,preserveLineBreaksInTableCellsEnabled:P,addHeadersToCollectionEnabled:B}=d;if(n&&n instanceof v.Element){const e=n.tagName.toLowerCase();if("div"===e&&"page-comments"===n.getAttribute("class")){const e=function(e){var t;const{node:o,parent:n,actor:r,window:i,allOperations:a,deps:s,options:l}=e,c=o.getAttribute(F[T().Ifu.Discussion])||((null===(t=s.spaceIdCreator)||void 0===t?void 0:t.idInSavedSpace(x().$Y))??s.randomID()),d=new Map;return d.set(c,{type:"default",id:c,parent_id:n.id,parent_table:k().ev,resolved:!1,space_id:n.spaceId,version:1}),ye({node:o,spaceId:n.spaceId,window:i,blockId:n.id,discussionToTextMap:d,allOperations:a,actor:r,deps:s,options:l}),c}({node:n,window:v,actor:t,allOperations:r,parent:o,deps:i,options:d});return[e]}if("h1"===e)return[Z({actor:t,parent:o,node:n,type:c().xd.header,allOperations:r,deps:{window:v,randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w,stripText:!0,stripSurroundingWhitespace:!0}}),...Q({actor:t,parent:o,node:n,allOperations:r,deps:i,options:{useCrdt:S,ignoreBlockCount:w}})];if("h2"===e)return[Z({actor:t,parent:o,node:n,type:c().xd.subHeader,allOperations:r,deps:{window:v,randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w,stripText:!0,stripSurroundingWhitespace:!0}}),...Q({actor:t,parent:o,node:n,allOperations:r,deps:i,options:{useCrdt:S,ignoreBlockCount:w}})];if("hr"===e)return[X({actor:t,parent:o,allOperations:r,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})];if("h"===e[0])return[Z({actor:t,parent:o,node:n,type:c().xd.subSubHeader,allOperations:r,deps:{window:v,randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w,stripText:!0,stripSurroundingWhitespace:!0}}),...Q({actor:t,parent:o,node:n,allOperations:r,deps:i,options:{useCrdt:S,ignoreBlockCount:w}})];if("pre"===e||"code"===e||"div"===e&&n.className===R)return n.innerHTML.length&&y&&y>0&&n.innerHTML.length>y?[]:[le({actor:t,parent:o,node:n,allOperations:r,deps:{randomID:_,spaceIdCreator:b,window:v},options:{useCrdt:S,ignoreBlockCount:w}}),...Q({actor:t,parent:o,node:n,allOperations:r,deps:i,options:{useCrdt:S,ignoreBlockCount:w}})];if(n.hasAttribute(F[c().xd.callout]))return[ne({actor:t,parent:o,node:n,allOperations:r,deps:i,options:{useCrdt:S,ignoreBlockCount:w}})];if("blockquote"===e)return[ue({actor:t,parent:o,node:n,allOperations:r,deps:i,options:{useCrdt:S,ignoreBlockCount:w}})];if("details"===e)return[pe({actor:t,parent:o,node:n,allOperations:r,deps:i,options:{useCrdt:S,ignoreBlockCount:w}})];if("table"===e){const{tableData:d,tableFiles:g}=function(e){const{node:t,window:o,importFileMap:n,intl:r,preserveLineBreaksInTableCellsEnabled:i}=e,a=[],l=[],d=Array.from(t.querySelectorAll("tr")).filter((e=>e.closest("table")===t));for(const p of d){const e=[],t=[],d=Array.from(p.querySelectorAll("td, th")).filter((e=>e.closest("tr")===p));for(const r of d){const a=(r.textContent||"").trim(),l=ke(r.getAttribute("rowspan"),1),{titleTokens:d}=$({node:r,window:o,stripText:!1,stripSurroundingWhitespace:!0,ignoreComments:!0,preserveLineBreaksInTableCellsEnabled:i});e.push({text:a,textValue:d,rowSpan:l});const u=ke(r.getAttribute("colspan"),1);for(let t=1;t<u;t++)e.push({text:"",rowSpan:l});const p=Y(r);if(p.length){const e=s().oE(p.flatMap((e=>{var t;const o=e.getAttribute("src")||e.getAttribute(F[c().xd.file])||e.getAttribute(F[c().xd.audio])||e.getAttribute(F[c().xd.video]),r=e.getAttribute(F.fileAlias);return o?{name:r||o,url:(null===(t=n[o])||void 0===t?void 0:t.secureS3UrlOrAlias)||o}:void 0})));t.push(...e)}}e.length&&l.push(e);const m=u().eQ(t);a.push({text:r.formatMessage({id:"htmlHelpers.table.fileColumnName",defaultMessage:"Files"}),textValue:m})}for(let s=0;s<l.length;s++){const e=l[s];for(let t=0;t<e.length;t++){const o=e[t].rowSpan;if(o>1)for(let e=1;e<o&&!(s+e>=l.length);e++){l[s+e].splice(t,0,{text:"",rowSpan:1})}}}return{tableData:l,tableFiles:a}}({node:n,window:v,importFileMap:m,intl:h,preserveLineBreaksInTableCellsEnabled:P});if(!M&&g.some((e=>{var t;return null===(t=e.textValue)||void 0===t?void 0:t.length})))for(let e=0;e<d.length;e++)d[e].push({text:g[e].text,textValue:g[e].textValue,columnType:{schema:{type:"file"},validate:s().vF,coerce:s().D_}});let f="table";if((n.hasAttribute("data-import-as-database")||!M&&g.some((e=>{var t;return null===(t=e.textValue)||void 0===t?void 0:t.length})))&&(f="collection"),0===s().rG(d).length)return[];if(o.table===I().Vl||o.table===A().SN)return[];const _={...o,table:o.table};try{const e=function(e){const{actor:t,parent:o,node:n,tableData:r,allOperations:i,deps:{intl:a,randomID:s,spaceIdCreator:l,randomShortID:c,window:d,isPhoneNumber:u,addFileIdsToBlock:m},options:{useCrdt:g,ignoreBlockCount:f,tableType:v,addHeadersToCollectionEnabled:h}}=e,_=(null==l?void 0:l.idInSavedSpace(k().ev))??s();if("table"===v){const{operations:e}=(0,p().L5)({actor:t,tableId:_,parent:o,table:r,deps:{randomID:s,spaceIdCreator:l,randomShortID:c},options:{useCrdt:g,ignoreBlockCount:f}});i.push(...e),be({node:n,spaceId:o.spaceId,window:d,blockId:_,actor:t,allOperations:i})}else if("collection"===v){const e=n.getAttribute("data-database-title")??"",{operations:d}=(0,p().ph)({actor:t,blockType:"collection_view",root:{existing:!1,id:_},parent:o,name:e,format:{table_wrap:!0},table:r,deps:{intl:a,randomID:s,spaceIdCreator:l,randomShortID:c,isPhoneNumber:u,addFileIdsToBlock:m??!1},options:{useCrdt:g,ignoreBlockCount:f,useCsvAdaptiveSchema:!0,addHeadersToCollectionEnabled:h}});i.push(...d)}return _}({actor:t,parent:_,node:n,tableData:d,allOperations:r,deps:i,options:{useCrdt:S,ignoreBlockCount:w,tableType:f,addHeadersToCollectionEnabled:B}});return[e]}catch(E){const t=(0,a().A)(E);if(!l||"CsvImportError"!==t.message)throw E;const o=l.get(e)||0;return l.set(e,o+1),[]}}if("div"===e&&n.hasAttribute(F[c().xd.columnList]))return[me({actor:t,parent:o,node:n,allOperations:r,deps:i,options:{useCrdt:S,ignoreBlockCount:w}})];if("nav"===e&&n.hasAttribute(F[c().xd.tableOfContents]))return[de({actor:t,parent:o,allOperations:r,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}}),...Q({actor:t,parent:o,node:n,allOperations:r,deps:i,options:{useCrdt:S,ignoreBlockCount:w}})];if("ul"===e||"ol"===e)return s().KC(...Array.from(n.children).map((e=>we({actor:t,parent:o,node:e,allOperations:r,deps:i,options:{useCrdt:S,ignoreBlockCount:w}}))));if("li"===e||ge.test(n.textContent||"")||fe.test(n.textContent||"")||ve.test(n.textContent||""))return[he({actor:t,parent:o,node:n,allOperations:r,deps:i,options:{useCrdt:S,ignoreBlockCount:w}})];if("img"===e){const e=n.getAttribute("src");if(e)return[J({actor:t,parent:o,source:m[e]||{type:"unknown",secureS3UrlOrAlias:e},allOperations:r,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w,fallbackWidth:n instanceof v.HTMLImageElement?n.width:void 0}})]}if("a"===e&&n.getAttribute(F[c().xd.externalObjectInstance])){const e=ie({actor:t,parent:o,node:n,allOperations:r,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}});return e?[e]:[]}if("a"===e&&n.getAttribute(F[c().xd.embed])){const e=n.getAttribute("href");if(e)return[te({actor:t,parent:o,source:{type:"unknown",secureS3UrlOrAlias:e,height:400},allOperations:r,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})]}if("a"===e&&n.getAttribute(F[c().xd.file]))return[re({actor:t,parent:o,node:n,allOperations:r,deps:{importFileMap:m,randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})];if("a"===e&&0===f().PE(n.childNodes).length){const e=n.getAttribute("href");if(n.hasAttribute("download")&&e)return[te({actor:t,parent:o,source:m[e]||{type:"unknown",secureS3UrlOrAlias:e},allOperations:r,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})]}if("video"===e){const e=n.querySelector("source");if(e){const n=e.getAttribute("src");if(n&&g().L_({url:n}))return[te({actor:t,parent:o,source:{type:"unknown",secureS3UrlOrAlias:n},allOperations:r,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})]}}if("audio"===e){const e=n.querySelector("source");if(e){const n=e.getAttribute("src");if(n&&g().ck({url:n}))return[te({actor:t,parent:o,source:{type:"unknown",secureS3UrlOrAlias:n},allOperations:r,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})]}}if("iframe"===e){const e=n.getAttribute("src");if(e)return[ee({actor:t,parent:o,node:n,sourceUrl:e,allOperations:r,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})]}return"p"===e&&n.getAttribute("confluenceNewLine")?[Z({actor:t,parent:o,node:n,type:c().xd.text,allOperations:r,deps:{window:v,randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w,stripText:!0,stripSurroundingWhitespace:!0}})]:n.hasAttribute(F[c().xd.equation])?[ce({actor:t,parent:o,node:n,allOperations:r,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})]:[.../^\s*$/g.test(n.textContent||"")?[]:[Z({actor:t,parent:o,node:n,type:c().xd.text,allOperations:r,deps:{window:v,randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w,stripText:!1,stripSurroundingWhitespace:!0,ignoreCodeBlock:C}})],...Q({actor:t,parent:o,node:n,allOperations:r,deps:i,options:{useCrdt:S,ignoreBlockCount:w,considerCodeBlockAsNonTextItem:C}})]}return[]}function ke(e,t){const o=null!==e?parseInt(e,10):t;return isFinite(o)?o:t}function Ie(e){if(e&&-1!==e.indexOf("em"))return parseInt(e)}function Ae(e,t,o){const n=o.document.createElement(t);for(;e.firstChild;)n.appendChild(e.firstChild);for(let r=e.attributes.length-1;r>=0;--r){const t=e.attributes[r];n.setAttribute(t.name,t.value)}return e.parentNode&&e.parentNode.replaceChild(n,e),n}function xe(e,t,o){const n=o.document.createElement(t);for(;e.firstChild;)n.appendChild(e.firstChild);e.appendChild(n)}function Ce(e){const t=[];let o=e;for(;e.firstChild;){const n=e.firstChild;t.push(n),e.parentNode&&e.parentNode.insertBefore(n,o.nextSibling),o=n}const n=e.parentNode;return n&&(n.removeChild(e),n.normalize()),t}const Te=1e4;function Me(e,t){!function(e,t){const o=Array.from(e.querySelectorAll("p"));for(const n of o){let e=n.firstChild,o=0;for(;e&&o<Te;){let r=!1;if(e instanceof t.Element&&null!==e.textContent&&!e.textContent.trim()){const t=Array.from(e.querySelectorAll("br"));if(t.length>0){for(const o of t)n.insertBefore(o,e);r=!0}}const i=e.nextSibling;r&&n.removeChild(e),e=i,o+=1}}}(e,t);const o=Array.from(e.querySelectorAll("p"));for(let n=0;n<Te;n++){const e=o.shift();if(!e||!e.parentNode)return;const n=e.querySelector("br");if(!n)continue;if(n.parentElement!==e)continue;const r=t.document.createElement("p");e.parentNode.insertBefore(r,e.nextSibling);let i=n.nextSibling;for(;i;){const e=i.nextSibling;r.appendChild(i),i=e}e.removeChild(n),o.unshift(r)}}function Pe(e){const t=e.match(/^([0-9]+)px$/i);if(t)return parseInt(t[1])}function Be(e){const{rootNode:t,window:o,isInlineContent:n,emojiData:r}=e;!function(e){const{rootNode:t,window:o,emojiData:{emojiByName:n}}=e,r=Array.from(t.querySelectorAll("img[data-stringify-emoji]"));for(const i of r){const e=i.getAttribute("data-stringify-emoji")||"",t=e.match(/^:(.+):$/);if(!t||!i.parentNode)continue;const r=n[t[1]]||e;i.parentNode.replaceChild(o.document.createTextNode(r),i)}}({rootNode:t,window:o,emojiData:r}),t.normalize(),Me(t,o);const i=f().PE(t.childNodes);for(;i.length>0;){let e=i.shift();if(e instanceof o.Element&&e.parentNode&&"google-sheets-html-origin"===e.tagName.toLowerCase()){const t=f().PE(e.childNodes);for(const o of t)e.parentNode.insertBefore(o,e);i.unshift(...t),e.remove()}else if(e&&e.parentNode&&3===e.nodeType&&/^( |\t)*(\n)+( |\t)*$/.test(e.data))e.parentNode.removeChild(e);else if(e&&e instanceof o.Element&&e.parentNode&&B[e.tagName.toLowerCase()])e.parentNode.removeChild(e);else{if(e instanceof o.HTMLElement){const t=(l=e.style.fontSize||void 0)&&-1!==l.indexOf("px")||l&&-1!==l.indexOf("pt")?parseInt(l):void 0,n=Ie(e.style.fontSize||void 0);(t&&t>=24||n&&n>2)&&(e=Ae(e,"h1",o))}if(e instanceof o.HTMLElement&&("line-through"===e.style.textDecoration&&xe(e,"del",o),"italic"===e.style.fontStyle&&xe(e,"em",o),("bold"===e.style.fontWeight||e.style.fontWeight&&parseInt(e.style.fontWeight)>=500)&&xe(e,"strong",o)),e instanceof o.HTMLImageElement){const t=Pe(e.style.width);!e.width&&t&&(e.width=t)}if(e instanceof o.HTMLElement&&("b"===e.tagName.toLowerCase()?e=Ae(e,"strong",o):"i"===e.tagName.toLowerCase()&&(e=Ae(e,"em",o))),e instanceof o.HTMLElement&&"strong"===e.tagName.toLowerCase()&&"normal"===e.style.fontWeight&&(e=Ae(e,"span",o)),e instanceof o.HTMLElement&&("section"===e.tagName.toLowerCase()||"article"===e.tagName.toLowerCase())&&(e=Ae(e,"div",o)),e instanceof o.HTMLElement&&"div"===e.tagName.toLowerCase()&&"inline"===e.style.display&&(e=Ae(e,"span",o)),e instanceof o.HTMLElement&&"input"===e.tagName.toLowerCase()&&"checkbox"===e.type){const t=e.checked,n=e.parentNode,r=o.document.createElement("span");r.textContent=`[${t?"x":" "}] `,n&&(n.insertBefore(r,e),n.removeChild(e)),i.push(r)}else{if(e instanceof o.HTMLElement&&"table"===e.tagName.toLowerCase()){const t=Array.from(e.querySelectorAll("tr")).map((e=>e.querySelectorAll("td, th")));if(t.every((e=>1===e.length))){const n=o.document.createDocumentFragment();for(const e of t){const t=e[0],r=t.childNodes.length;for(let e=0;e<r;e+=1){const o=t.childNodes[e];o&&(n.appendChild(o.cloneNode(!0)),i.push(o))}n.appendChild(o.document.createElement("hr"))}e.parentNode&&e.parentNode.replaceChild(n,e)}}if(e instanceof o.HTMLElement&&("ul"===e.tagName.toLowerCase()||"ol"===e.tagName.toLowerCase())&&e.parentNode instanceof o.HTMLElement&&("ul"===e.parentNode.tagName.toLowerCase()||"ol"===e.parentNode.tagName.toLowerCase())&&e.previousSibling instanceof o.HTMLElement&&"li"===e.previousSibling.tagName.toLowerCase()&&e.previousSibling.appendChild(e),e instanceof o.Element&&(e.removeAttribute("style"),e.removeAttribute("dir")),e instanceof o.Element&&"span"===e.tagName.toLowerCase()){var a;if("page-comment"===e.getAttribute("class")||null!==(a=e.getAttribute("class"))&&void 0!==a&&a.split(" ").includes("retain-span"))continue;(e.hasAttribute(F[T().Ifu.Highlight])||e.hasAttribute(F[T().Ifu.Discussion])||e.hasAttribute(F[T().Ifu.Comment])||e.hasAttribute(F[T().Ifu.Equation])?Array.from(e.children):Ce(e)).forEach((e=>i.push(e)))}else if(e){f().PE(e.childNodes).forEach((e=>i.push(e)))}}}}var l;for(f().PE(t.childNodes).forEach((e=>i.push(e)));i.length>0;){const e=i.shift();if(e)if(Re(e,o)&&s().Si(e.childNodes,(e=>e instanceof o.Element&&"h1"===e.tagName.toLowerCase()))){const t=o.document.createElement("h1");s().__(e.childNodes,(e=>{s().__(e.childNodes,(e=>{const o=e.cloneNode(!0);o&&t.appendChild(o)}))}));const n=e.parentNode;if(n){if("td"===e.tagName.toLowerCase()||"th"===e.tagName.toLowerCase()){const r=o.document.createElement(e.tagName.toLowerCase());r.appendChild(t),n.insertBefore(r,e)}else n.insertBefore(t,e);n.removeChild(e)}i.push(t)}else if(Re(e,o)&&s().Si(e.childNodes,(e=>e instanceof o.Element&&"h2"===e.tagName.toLowerCase()))){const t=o.document.createElement("h2");s().__(e.childNodes,(e=>{s().__(e.childNodes,(e=>{const o=e.cloneNode(!0);o&&t.appendChild(o)}))}));const n=e.parentNode;if(n){if("td"===e.tagName.toLowerCase()||"th"===e.tagName.toLowerCase()){const r=o.document.createElement(e.tagName.toLowerCase());r.appendChild(t),n.insertBefore(r,e)}else n.insertBefore(t,e);n.removeChild(e)}i.push(t)}else if(e instanceof o.HTMLElement&&("div"===e.tagName.toLowerCase()||"span"===e.tagName.toLowerCase())&&e.parentNode&&0===e.childNodes.length)e.parentNode.removeChild(e);else if(!Re(e,o)||"p"!==e.tagName.toLowerCase()&&"div"!==e.tagName.toLowerCase()&&"figure"!==e.tagName.toLowerCase()||!f().PE(e.childNodes).some((e=>e instanceof o.Element&&("p"===e.tagName.toLowerCase()||"div"===e.tagName.toLowerCase()||"img"===e.tagName.toLowerCase()||"ul"===e.tagName.toLowerCase()||"table"===e.tagName.toLowerCase()||"hr"===e.tagName.toLowerCase()||"video"===e.tagName.toLowerCase()||"iframe"===e.tagName.toLowerCase())))){if(e&&e.childNodes){f().PE(e.childNodes).forEach((e=>i.push(e)))}}else{Ce(e).forEach((e=>i.push(e)))}}t.normalize(),n||f().PE(t.childNodes).forEach((e=>{if(3===e.nodeType){const n=o.document.createElement("p");t.insertBefore(n,e),n.appendChild(e)}}))}function Re(e,t){return e instanceof t.Element&&(0!==e.childNodes.length&&!(e.hasAttribute(F[c().xd.columnList])||e.hasAttribute(F[c().xd.column])||e.hasAttribute(F[c().xd.callout])))}function Ee(e){const{actor:t,parent:o,rootNode:n,deps:r,htmlParserErrors:i,options:a}=e;Be({rootNode:n,window:r.window,isInlineContent:!1,emojiData:r.emojiData});const s=[];return{allOperations:s,rootContentIds:Se({actor:t,parent:o,nodes:f().PE(n.children),allOperations:s,deps:r,htmlParserErrors:i,options:a})}}function De(e){const{node:t,window:o,stripText:n,stripSurroundingWhitespace:r,emojiData:i}=e;Be({rootNode:t,window:o,isInlineContent:!0,emojiData:i});const{titleTokens:a}=$({node:t,window:o,stripText:n,stripSurroundingWhitespace:r,ignoreComments:!0});return a}function Ne(e){const{node:t,window:o,emojiData:n}=e;return Be({rootNode:t,window:o,isInlineContent:!1,emojiData:n}),Fe(t,o)}const Le=new Set(["span","div","p"]);function Fe(e,t){const o=e.tagName.toLowerCase();if(!Le.has(o))return!0;if("div"===o&&(e.className===R||e.hasAttribute(F[c().xd.columnList])))return!0;for(const n of Array.from(e.childNodes))if(j(t,n)&&Fe(n,t))return!0;return!1}function Ue(e){if("default"===e||"gray"===e||"brown"===e||"orange"===e||"yellow"===e||"teal"===e||"blue"===e||"purple"===e||"pink"===e||"red"===e||"gray_background"===e||"brown_background"===e||"orange_background"===e||"yellow_background"===e||"teal_background"===e||"blue_background"===e||"purple_background"===e||"pink_background"===e||"red_background"===e)return e}},753735:(e,t,o)=>{o.d(t,{Ao:()=>d,nS:()=>c,uq:()=>l});var n=()=>o(244641),r=()=>o(662303),i=()=>o(869190),a=()=>o(762433),s=()=>o(780054);function l(e){const t=(0,a().i5)(e);return!!t&&n().c9.now()<t}function c(e,t){return e?(0,i().W_)(e.toMillis(),t??"long",r().locale):void 0}function d(e){return e?s().A.trials[e.id].duration:s().A.trials.default.duration}},754735:(e,t,o)=>{o.d(t,{lW:()=>l,xJ:()=>s});var n=o(296540),r=()=>o(484714),i=()=>o(56366);const a=(0,n.createContext)(void 0);function s(e){const t=(0,i().K8)((()=>e.state.height),[e]),o=(0,n.useContext)(a)||window;return o!==window?o.innerHeight:t}function l(){const{WindowSizeStore:e}=(0,r().v3)();return(0,i().K8)((()=>{const{width:t,height:o}=e.state;return{width:t,height:o}}),[e])}a.displayName="ModalWindowContext"},755022:(e,t,o)=>{o.d(t,{D:()=>r});var n=()=>o(989423);function r(e,t){n().vd(e,"configure_view",t)}},755199:(e,t,o)=>{o.d(t,{Cw:()=>_,DH:()=>M,Hg:()=>v,Hw:()=>k,IP:()=>x,OQ:()=>f,Sz:()=>b,Tu:()=>C,W2:()=>B,Wq:()=>g,_I:()=>P,dD:()=>I,eO:()=>y,ee:()=>h,gV:()=>S,h9:()=>R,mJ:()=>m,p$:()=>A,pr:()=>T,sM:()=>p,wG:()=>w});o(944114),o(898992),o(354520);var n=()=>o(244641),r=()=>o(554279),i=()=>o(416504),a=()=>o(780054),s=()=>o(680074),l=()=>o(351360),c=()=>o(630116),d=()=>o(246826),u=()=>o(317909);async function p(e){if(a().A.isAdminMode)return;const{currentUserSettingsStore:t}=l().default.state;if(!t)return;await t.load();const o=t.getSettings();if(!o)return;const{device:n}=e,r={};!o.disable_auto_set_timezone&&(0,i().P)()!==o.time_zone&&(r.time_zone=(0,i().P)()),n.isDesktopBrowser&&!o.used_desktop_web_app&&(r.used_desktop_web_app=!0),n.isMobileBrowser&&!o.used_mobile_web_app&&(r.used_mobile_web_app=!0),n.isElectron&&n.isMac&&!o.used_mac_app&&(r.used_mac_app=!0),n.isElectron&&n.isWindows&&!o.used_windows_app&&(r.used_windows_app=!0),n.isMobileNative&&n.isIOS&&!o.used_ios_app&&(r.used_ios_app=!0),n.isMobileNative&&n.isAndroid&&!o.used_android_app&&(r.used_android_app=!0),Object.keys(r).length>0&&u().createAndCommit({userAction:"userSettingsActions.updateUserSettingsOnReset",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:t,data:r,transaction:e})}})}function m(e){const{userSettingsStore:t,data:o,transaction:n}=e;d().zv({store:t.getSettingsStore(),data:o,transaction:n})}function g(e){u().createAndCommit({userAction:"userSettingsActions.setStartWeekToMonday",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{const{currentUserSettingsStore:t}=l().default.state;t&&m({userSettingsStore:t,data:{start_day_of_week:1},transaction:e})}})}function f(e){u().createAndCommit({userAction:"userSettingsActions.setStartWeekToSunday",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{const{currentUserSettingsStore:t}=l().default.state;t&&m({userSettingsStore:t,data:{start_day_of_week:0},transaction:e})}})}function v(e){const{transaction:t,userSettingsStore:o,spaceId:n,type:r}=e;d().KY({store:(0,c()._y)(o,o.pointer,["settings","sidebar_outliner_settings",n,r,"has_pinned"]),value:!0,transaction:t})}function h(e){var t;const{collectionId:o,databaseType:n,transaction:r}=e,i=null===(t=l().default.state.currentSpaceStore)||void 0===t?void 0:t.id,a=l().default.state.currentUserSettingsStore;if(i&&a){var s,c;const e=(null===(s=a.getSettings())||void 0===s?void 0:s.lastUsedTypedCollections)||{},t=(null===(c=a.getSettings())||void 0===c?void 0:c.lastUsedDatabases)||{},l=e[i]||{},d=t[i]||[],u=n?l[n]??[]:[],p=[o,...u.filter((e=>e!==o))].slice(0,2),g=[o,...d.filter((e=>e!==o))].slice(0,5);m({userSettingsStore:a,transaction:r,data:{lastUsedDatabases:{...t,[i]:g},...n?{lastUsedTypedCollections:{...e,[i]:{...l,[n]:p}}}:{}}})}}function _(e){const{transaction:t,userSettingsStore:o,integrationId:n}=e;d().KY({store:(0,c()._y)(o,o.pointer,["settings","dismissed_link_preview_integration_popup",n]),value:!0,transaction:t})}function b(e,t){const o=(0,r().zD)(),n=(0,r().mS)();if(!o||!n)return;const i={};n&&(i.fbp=n),o&&(i.click_ids=o),u().createAndCommit({userAction:"userSettingsActions.persistAdClick",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{e.postSubmitCallbacks.push((e=>{e||((0,r().uK)(),(0,r().fq)())})),m({userSettingsStore:t,data:i,transaction:e})}})}function y(e){const{currentUserSettingsStore:t}=l().default.state;if(!t)return;const{environment:o,dismissed:n}=e;u().createAndCommit({environment:o,userAction:"userSettingsActions.setDismissedSuggestModeTooltip",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:t,transaction:e,data:{dismissed_suggest_mode_tooltip:n}})}})}function S(e){const t=(0,s().R$)(e);t&&u().createAndCommit({environment:e,userAction:"userSettingsActions.setDismissStudentOrgPrompt",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:t,transaction:e,data:{dismissed_sidebar_student_org_prompt:!0}})}})}function w(e){const{environment:t,userSettingsStore:o,dismissed:n}=e;u().createAndCommit({environment:t,userAction:"userSettingsActions.setDismissDictationNewPageNux",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:o,transaction:e,data:{dismissed_dictation_new_page_nux:n}})}})}function k(e){const{environment:t}=e,{currentUserSettingsStore:o}=l().default.state;if(o){void 0===o.getSettingsStore().getKeyStore("seen_asana_post_import_tour").getValue()&&u().createAndCommit({environment:t,userAction:"userSettingsActions.setSeenAsanaPostImportTutorial",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:o,transaction:e,data:{seen_asana_post_import_tour:!0}})}})}}function I(e){const{environment:t}=e,{currentUserSettingsStore:o}=l().default.state;if(o){void 0===o.getSettingsStore().getKeyStore("seen_forms_share_form_tooltip").getValue()&&u().createAndCommit({environment:t,userAction:"userSettingsActions.setSeenFormsShareFormTooltip",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:o,transaction:e,data:{seen_forms_share_form_tooltip:!0}})}})}}function A(e){const{environment:t}=e,{currentUserSettingsStore:o}=l().default.state;if(o){void 0===o.getSettingsStore().getKeyStore("seen_forms_add_conditional_logic_tooltip").getValue()&&u().createAndCommit({environment:t,userAction:"userSettingsActions.setSeenFormsAddConditionalLogicTooltip",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:o,transaction:e,data:{seen_forms_add_conditional_logic_tooltip:!0}})}})}}function x(e){var t;const o=(0,s().R$)(e);o&&(null!==(t=o.getSettings())&&void 0!==t&&t.inapp_gallery_first_visited_at||u().createAndCommit({environment:e,userAction:"userSettingsActions.setFirstMarketplaceVisitTime",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:o,transaction:e,data:{inapp_gallery_first_visited_at:n().c9.now().toMillis()}})}}))}function C(e,t){var o;const{listingId:n}=t,r=(0,s().R$)(e);if(!r)return;let i=null==r||null===(o=r.getSettings())||void 0===o?void 0:o.marketplace_review_nudge;i||(i={});let a=i[n];a||(a=[]),a.push(Date.now()),i[n]=a,u().createAndCommit({environment:e,userAction:"userSettingsActions.markMarketplaceReviewNudgeAsShown",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:r,transaction:e,data:{marketplace_review_nudge:i}})}})}function T(e,t){var o;const{entryPoint:n}=t,r=(0,s().R$)(e);if(!r)return;const i=(null==r||null===(o=r.getSettings())||void 0===o?void 0:o.adoption_entry_points)||{};i[n]=[...i[n]||[],Date.now()],u().createAndCommit({environment:e,userAction:"userSettingsActions.markAdoptionEntryPointShown",canUndo:!1,cellTarget:"main",perform:e=>{m({userSettingsStore:r,transaction:e,data:{adoption_entry_points:i}})}})}function M(e){const t=(0,s().R$)(e);t&&u().createAndCommit({environment:e,userAction:"userSettingsActions.markAdoptionInboxShown",canUndo:!1,cellTarget:"main",perform:e=>{m({userSettingsStore:t,transaction:e,data:{adoption_sidebar_inbox:!0}})}})}function P(e){const{environment:t,skillType:o}=e,n=(0,s().R$)(t);if(!n)return;const r=n.getSettingsStore().getKeyStore("ai_suggested_skill_exposure_tracker").getKeyStore(o),i=r.getKeyStore("interacted_with_timestamps").getValue()??[];u().createAndCommit({environment:t,userAction:"userSettingsActions.markSkillAsUsed",canUndo:!0,cellTarget:"main",perform:e=>{d().zv({transaction:e,store:r,data:{interacted_with_timestamps:[...i,Date.now()]}})}})}function B(e){const{environment:t,skillType:o}=e,n=(0,s().R$)(t);if(!n)return;const r=n.getSettingsStore().getKeyStore("ai_suggested_skill_exposure_tracker").getKeyStore(o),i=r.getKeyStore("suggested_timestamps").getValue()??[];u().createAndCommit({environment:t,userAction:"userSettingsActions.markSkillAsSuggested",canUndo:!0,cellTarget:"main",perform:e=>{d().zv({transaction:e,store:r,data:{suggested_timestamps:[...i,Date.now()]}})}})}function R(e){const t=(0,s().R$)(e);t&&u().createAndCommit({environment:e,userAction:"userSettingsActions.dismissAiPageTranslationPassiveSuggestions",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:t,transaction:e,data:{ai_page_translation_dismissed_at:Date.now()}})}})}},755636:(e,t,o)=>{o.d(t,{f:()=>s});var n=()=>o(939768),r=()=>o(780054),i=()=>o(508496),a=()=>o(705540);function s(e){const{environment:t,targetSelf:o}=e;let s=e.url;"/"===s[0]&&(s=r().A.domainBaseUrl+s);const l=n().q7(s);if(l)if(t.device.isElectron)a().openExternalUrl(l);else if(t.mobileNative)l.startsWith("http:")||l.startsWith("https:")?i().default.checkGate({gateName:"mobile_open_links_in_external_browser"})?t.mobileNative.openLink(l):t.mobileNative.openInAppBrowser(l):window.location.href=l;else{const t=document.createElement("a");t.href=e.url,t.classList.add("notion-link"),o||t.setAttribute("target","_blank"),t.setAttribute("rel","noopener noreferrer"),document.body.appendChild(t),t.click(),t.remove()}}},755673:(e,t,o)=>{o.d(t,{z:()=>d});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(430670),o(581454);var n=()=>o(970013),r=()=>o(448801),i=()=>o(179034),a=()=>o(630116),s=()=>o(722101),l=(o(354520),()=>o(496603));function c(e){const{collectionContextStore:t,collectionViewStore:o,transaction:r}=e,c=o.getPageSortStore(),d=c.getValue(),u=t.groupsStore.getAllGroupStates(),p=function(e){const{pageSort:t,currentResults:o}=e;if(!t||t.length<=n().WF)return[];const r=t.filter((e=>!o.has(e)));return l().sb([...r.reverse(),...l().o8(t).reverse()]).slice(0,t.length-n().WF)}({pageSort:d,currentResults:new Set(u.flatMap((e=>e.resultsStore.state.map((e=>e.id)))))});for(const n of p)s().TF({parentStore:c,childToRemoveStore:(0,a().Oo)(c,{table:i().ev,id:n}),transaction:r})}function d(e){const{resultIds:t,collectionViewStore:o,collectionContextStore:l,transaction:d}=e,u=o.getPageSortStore(),p=u.getValue()||[],{beforeOps:m}=(0,r().i)(p,t.slice(0,n().WF));for(const[n,r]of Object.entries(m))if(r){const e=(0,a().Oo)(o,{table:i().ev,id:r});s().nc({parentStore:u,insertStore:(0,a().Oo)(o,{table:i().ev,id:n}),beforeStore:e,transaction:d})}else{const e=t.findIndex((e=>e===n)),r=t[e-1],l=r?(0,a().Oo)(o,{table:i().ev,id:r}):void 0;s().WH({parentStore:u,insertStore:(0,a().Oo)(o,{table:i().ev,id:n}),afterStore:l,transaction:d})}c({collectionContextStore:l,collectionViewStore:o,transaction:d})}},756279:(e,t,o)=>{o.d(t,{A:()=>r});var n=function(e){return e[e.All=0]="All",e[e.X=1]="X",e[e.Y=2]="Y",e[e.None=3]="None",e}(n||{});const r=n},756315:(e,t,o)=>{o.d(t,{d:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{screenToShow:"none",availableSyncControlOptions:[],syncControlSelection:void 0,initialSyncState:"none",isDisconnecting:!1,isEditing:!1,sessionId:o(206267).JW(),analyticsFrom:"unknown",syncProgress:"not_started",syncCurrent:0,syncTotal:0,ingestionProgress:void 0,connectedSpaceId:"",isLoaded:!1}}}const r=new n;(0,o(604341).exposeDebugValue)("googleDriveConnectionStore",r)},758318:(e,t,o)=>{o.d(t,{a:()=>n});const n=(0,o(340498).xh)("checkmark",{default:{loader:()=>o.e(99977).then(o.bind(o,699977))},small:{loader:()=>o.e(11939).then(o.bind(o,911939))},mini:{loader:()=>o.e(12437).then(o.bind(o,812437))},large:{loader:()=>o.e(46827).then(o.bind(o,246827))}})},760578:(e,t,o)=>{o.d(t,{nV:()=>I,mo:()=>g,Zt:()=>f,qC:()=>k,I_:()=>b,mv:()=>_,WI:()=>A,Ew:()=>y,uX:()=>S,qS:()=>w,Jh:()=>x,Pf:()=>h,vP:()=>v,Ic:()=>m});var n=()=>o(481235),r=(o(296540),()=>o(340498)),i=o(474848);const a=(0,r().wt)("hand",{viewBox:"0 0 28 28",svg:(0,i.jsx)("path",{d:"M13.6572 23.1553C16.918 23.1553 19.1943 21.415 20.416 17.9873L21.9893 13.584C22.1035 13.2588 22.1562 12.9512 22.1562 12.6611C22.1562 11.6592 21.4092 10.9209 20.416 10.9209C19.7832 10.9209 19.2119 11.2812 18.9131 11.9668L18.4385 13.1182C18.4209 13.1533 18.4033 13.1709 18.3682 13.1709C18.3242 13.1709 18.3066 13.1445 18.3066 13.1006V6.35059C18.3066 5.23438 17.5771 4.51367 16.4961 4.51367C16.1621 4.51367 15.8545 4.61914 15.6172 4.82129C15.4414 3.93359 14.8174 3.38867 13.9121 3.38867C13.0332 3.38867 12.3916 3.94238 12.207 4.80371C11.9873 4.61035 11.7061 4.51367 11.4072 4.51367C10.3965 4.51367 9.70215 5.2168 9.70215 6.2627V7.08008C9.48242 6.86914 9.16602 6.75488 8.83203 6.75488C7.82129 6.75488 7.10938 7.51074 7.10938 8.58301V16.2822C7.10938 20.5361 9.72852 23.1553 13.6572 23.1553ZM13.6133 21.6523C10.4668 21.6523 8.54199 19.6484 8.54199 16.124V8.75C8.54199 8.41602 8.75293 8.1875 9.06934 8.1875C9.39453 8.1875 9.62305 8.41602 9.62305 8.75V13.2764C9.62305 13.6543 9.93066 13.918 10.2822 13.918C10.6426 13.918 10.9502 13.6543 10.9502 13.2764V6.48242C10.9502 6.14844 11.1611 5.91992 11.4863 5.91992C11.8027 5.91992 12.04 6.14844 12.04 6.48242V12.8105C12.04 13.1885 12.3389 13.4609 12.6904 13.4609C13.0508 13.4609 13.3584 13.1885 13.3584 12.8105V5.36621C13.3584 5.04102 13.5869 4.79492 13.9033 4.79492C14.2197 4.79492 14.4482 5.04102 14.4482 5.36621V12.7051C14.4482 13.0654 14.7383 13.3467 15.0986 13.3467C15.4678 13.3467 15.7666 13.0654 15.7666 12.7051V6.48242C15.7666 6.14844 15.9863 5.91992 16.3115 5.91992C16.6279 5.91992 16.8564 6.14844 16.8564 6.48242V15.2451C16.8564 15.7549 17.1816 16.0449 17.6035 16.0361C17.9551 16.0361 18.2715 15.8779 18.4824 15.4121L19.748 12.5732C19.8975 12.2305 20.1963 12.125 20.4688 12.2217C20.7676 12.3359 20.8643 12.626 20.7236 13.0039L19.0889 17.5127C17.999 20.501 16.1621 21.6523 13.6133 21.6523Z"})}),s=(0,r().wt)("overlap",{viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M4.917 14.496h1.729v-1.1H4.93c-.342 0-.604-.091-.786-.274-.182-.182-.273-.45-.273-.806V5.52c0-.356.09-.625.273-.807.182-.182.444-.273.786-.273h6.83c.336 0 .596.09.779.273.186.182.28.451.28.807v1.497h1.1V5.459c0-.702-.18-1.23-.54-1.586-.355-.355-.888-.533-1.6-.533H4.918c-.716 0-1.254.178-1.614.533-.355.351-.533.88-.533 1.586v6.918c0 .707.178 1.237.533 1.593.36.35.898.526 1.614.526zm3.315 3.165h6.863c.711 0 1.244-.177 1.6-.533.36-.355.54-.884.54-1.586V8.624c0-.702-.18-1.23-.54-1.586-.356-.355-.889-.533-1.6-.533H8.232c-.716 0-1.253.178-1.613.533-.356.351-.534.88-.534 1.586v6.918c0 .707.178 1.235.534 1.586.36.356.897.533 1.613.533zm.014-1.1c-.342 0-.604-.091-.787-.274-.182-.182-.273-.45-.273-.806V8.686c0-.356.091-.625.273-.807.183-.182.445-.273.787-.273h6.829c.337 0 .597.09.779.273.187.182.28.451.28.807v6.795c0 .355-.093.624-.28.806-.182.183-.442.274-.78.274H8.247z"}),(0,i.jsx)("path",{d:"M13.976 12.448l-1.832 1.36c-.192.147-.379.183-.561.11-.182-.073-.273-.225-.273-.458v-.848H9.7a.533.533 0 01-.383-.15.521.521 0 01-.157-.383c0-.145.053-.27.157-.376s.233-.157.383-.157h1.61v-.827c0-.246.093-.401.28-.465.187-.068.371-.034.554.103l1.832 1.374a.43.43 0 01.184.362.423.423 0 01-.184.356z"})]})});var l=()=>o(959013),c=()=>o(534177),d=()=>o(895876);const u=(0,l().YK)({dependenciesPropertySelectDefaultOptionCaption:{id:"database.viewSettings.relationFeatures.dependencies.propertySelectPopup.default.caption",defaultMessage:"This property will be used for dependencies in new views, and will set date shifting behavior across all views."},deleteDependenciesAcceptModalTitle:{id:"collectionSettings.relationFeatures.deleteDependenciesAcceptModal.title",defaultMessage:"Turn off dependencies?"},dependenciesMenuTitle:{id:"database.viewSettings.dependenciesTab.title",defaultMessage:"Dependencies"},dateShiftingSectionCaption:{id:"collectionSettings.dependenciesView.dateShiftingSection.caption",defaultMessage:"Automatic date shifting"},datePropertyPickerTitle:{id:"database.viewSettings.relationFeatures.datePropertyPicker.title",defaultMessage:"Shift using"},startDate:{id:"database.viewSettings.relationFeatures.datePropertyPicker.startDate",defaultMessage:"Start date"},endDate:{id:"database.viewSettings.relationFeatures.datePropertyPicker.endDate",defaultMessage:"End date"},advancedSettings:{id:"database.viewSettings.dependenciesAdvancedSettingsTab.title",defaultMessage:"Advanced settings"},newDateProperty:{id:"collectionSettings.dependenciesFeature.newDateProperty.name",defaultMessage:"Date"},doNotShiftButton:{id:"collectionSettings.dependenciesView.dateShiftingButton.doNotShift.label",defaultMessage:"Do not automatically shift"},consumeGapButton:{id:"collectionSettings.dependenciesView.dateShiftingButton.consumeGap.label",defaultMessage:"Shift only when dates overlap"},avoidWeekendsSwitcherTitle:{id:"collectionSettings.dependenciesView.dateShiftingSection.avoidWeekends.switcher.title",defaultMessage:"Avoid weekends"},hideDependenciesInView:{id:"CollectionSettingsViewRelationFeatures.hideDependenciesInView",defaultMessage:"Hide dependencies in view"},showDependenciesInView:{id:"CollectionSettingsViewRelationFeatures.showDependenciesInView",defaultMessage:"Show dependencies in view"},turnOnDependenciesButton:{id:"collectionSettings.dependenciesView.turnOnDependenciesButton.label",defaultMessage:"Turn on dependencies"},turnOffDependenciesButton:{id:"database.viewSettings.relationsPropertyTab.removeDependenciesButton.title",defaultMessage:"Turn off dependencies"},dateShiftSuccess:{id:"collectionDateActions.dateShiftSuccess",defaultMessage:"Shifted the dates of {numDependenciesUpdated, plural, one {1 dependent {item}} other {{numDependenciesUpdated} dependent {items}}}"},dateShiftSomeNotUpdatedDueToPermissions:{id:"collectionDateActions.dateShiftSomeNotUpdatedDueToPermissions",defaultMessage:"Shifted the dates of {numDependenciesUpdated, plural, one {1 dependent {item}} other {{numDependenciesUpdated} dependent {items}}}. Others could not be shifted because you do not have permission"},dateShiftAllNotUpdatedDueToPermissions:{id:"collectionDateActions.dateShiftAllNotUpdatedDueToPermissions",defaultMessage:"The dates of dependent {items} could not be shifted because you do not have permission"},shiftingNotApplicableNoShiftingMessage:{id:"CollectionSettingsViewRelationFeatures.shiftingNotApplicableNoShiftingMessage",defaultMessage:"The dates of dependent {items} in this view will not automatically shift. To change the date shifting behavior, update the default relation property in Advanced settings."},shiftingNotApplicableConsumeGapMessage:{id:"CollectionSettingsViewRelationFeatures.shiftingNotApplicableConsumeGapMessage",defaultMessage:"The dates of dependent {items} in this view will shift when {item} dates overlap. To change the date shifting behavior, update the default relation property in Advanced settings."},shiftingNotApplicablePreserveGapMessage:{id:"CollectionSettingsViewRelationFeatures.shiftingNotApplicablePreserveGapMessage",defaultMessage:"The dates of dependent {items} in this view will shift maintaining the time between {items}. To change the date shifting behavior, update the default relation property in Advanced settings."},preserveGapButton:{id:"collectionSettings.dependenciesView.dateShiftingButton.preserveGap.label",defaultMessage:"Shift & maintain time between {items}"},avoidWeekendsSwitcherCaption:{id:"collectionSettings.dependenciesView.dateShiftingSection.avoidWeekends.switcher.description",defaultMessage:"Prevent shifted {items} from starting or ending on weekends"},dependenciesMenuDescription:{id:"database.viewSettings.relationsPropertyTab.dependencies.description",defaultMessage:"Use dependencies to show {items} that are blocking — or blocked by — other {items}."},dependenciesPropertyPickerCaption:{id:"database.viewSettings.relationsPropertyTab.dependencies.relationPropertyPicker.caption",defaultMessage:"Choose the relation property that represents the {items} that are blocked. We use “Blocking” as our default."}}),p=(0,l().YK)({hideSubitemsInView:{id:"CollectionSettingsViewRelationFeatures.hideSubitemsInView",defaultMessage:"Hide sub-{items} in view"},showSubitemsInView:{id:"CollectionSettingsViewRelationFeatures.showSubitemsInView",defaultMessage:"Show sub-{items} in view"},turnOnSubItemsButton:{id:"collectionSettings.subitemsView.turnOnSubitemsButton.label",defaultMessage:"Turn on sub-{items}"},turnOffSubItemsButton:{id:"database.viewSettings.relationsPropertyTab.removeSubItemsButton.title",defaultMessage:"Turn off sub-{items}"},subItemsMenuTitle:{id:"database.viewSettings.subItemsTab.title",defaultMessage:"Sub-{items}"},subItemsMenuDescription:{id:"database.viewSettings.relationsPropertyTab.subitems.description",defaultMessage:"Break down {items} in toggles"},deleteSubItemsAcceptModalTitle:{id:"collectionSettings.relationFeatures.deleteSubItemsAcceptModal.title",defaultMessage:"Remove related properties when turning off sub-{items}?"},subItemsPropertyPickerCaption:{id:"database.viewSettings.relationsPropertyTab.subitems.relationPropertyPicker.caption",defaultMessage:"Choose the relation property that represents the sub-{items}. We use “Sub-{item}” as our default."},subItemsPropertySelectDefaultOptionCaption:{id:"database.viewSettings.relationFeatures.subitems.propertySelectPopup.default.caption",defaultMessage:"This property will be used for sub-{items} in new views."},toggleNestingOnTitleMenuItemTooltip:{id:"database.viewSettings.relationFeatures.subitems.toggleNestingOnTitleMenuItemTooltip.default.caption",defaultMessage:"Whether nesting and the toggle button should always be on the title column or the left-most column. Only relevant for table views"}}),m=(0,l().YK)({relationFeatureShownMessage:{id:"database.viewSettings.mainTab.feature.shown",defaultMessage:"Shown"},relationFeatureOnMessage:{id:"database.viewSettings.mainTab.feature.on",defaultMessage:"On"},relationFeatureOffMessage:{id:"database.viewSettings.mainTab.feature.off",defaultMessage:"Off"},relationFeatureHiddenMessage:{id:"database.viewSettings.mainTab.relationFeatureHidden",defaultMessage:"Hidden"},removePropertiesTitle:{id:"collectionSettings.relationFeatures.removePropertiesTitle",defaultMessage:"Remove properties"},keepPropertiesTitle:{id:"collectionSettings.relationFeatures.keepPropertiesTitle",defaultMessage:"Keep properties"},removePropertiesDescription:{id:"collectionSettings.relationFeatures.removePropertiesDescription",defaultMessage:"Delete {property} and {inverseProperty}."},turnOff:{id:"collectionSettings.relationFeatures.turnOffFeatureAllViewsButton.label",defaultMessage:"Turn off"},...u,...p});function g(e){return"consume_gap"===e?s:"preserve_gap"===e?n().H:a}function f(e){let t;return t="consume_gap"===e.dateShiftingMode?m.consumeGapButton:"preserve_gap"===e.dateShiftingMode?m.preserveGapButton:m.doNotShiftButton,{...t,values:{items:(0,d().oj)(e.databaseType,!0)}}}function v(e){let t;return"timeline_arrows_by"===e.feature?t=m.turnOnDependenciesButton:"subitem"===e.feature?t=m.turnOnSubItemsButton:(0,c().HB)(e.feature),{...t,values:{items:(0,d().oj)(e.databaseType,!0)}}}function h(e){let t;return"timeline_arrows_by"===e.feature?t=m.turnOffDependenciesButton:"subitem"===e.feature?t=m.turnOffSubItemsButton:(0,c().HB)(e.feature),{...t,values:{items:(0,d().oj)(e.databaseType,!0)}}}function _(e){let t;return"timeline_arrows_by"===e.feature?t=m.dependenciesMenuTitle:"subitem"===e.feature?t=m.subItemsMenuTitle:(0,c().HB)(e.feature),{...t,values:{items:(0,d().oj)(e.databaseType,!0)}}}function b(e){let t;return"timeline_arrows_by"===e.feature?t=m.dependenciesMenuDescription:"subitem"===e.feature?t=m.subItemsMenuDescription:(0,c().HB)(e.feature),{...t,values:{items:(0,d().oj)(e.databaseType,!0)}}}function y(e){let t;return"timeline_arrows_by"===e.feature?t=m.deleteDependenciesAcceptModalTitle:"subitem"===e.feature?t=m.deleteSubItemsAcceptModalTitle:(0,c().HB)(e.feature),{...t,values:{items:(0,d().oj)(e.databaseType,!0)}}}function S(e){let t;return"timeline_arrows_by"===e.feature?t=m.dependenciesPropertyPickerCaption:"subitem"===e.feature?t=m.subItemsPropertyPickerCaption:(0,c().HB)(e.feature),{...t,values:{item:(0,d().$O)(e.databaseType,!0),items:(0,d().oj)(e.databaseType,!0)}}}function w(e){let t;return"timeline_arrows_by"===e.feature?t=m.dependenciesPropertySelectDefaultOptionCaption:"subitem"===e.feature?t=m.subItemsPropertySelectDefaultOptionCaption:(0,c().HB)(e.feature),{...t,values:{item:(0,d().$O)(e.databaseType,!0),items:(0,d().oj)(e.databaseType,!0)}}}function k(e){let t;return(0,c().O9)(e.currentDateShiftConfig)?"preserve_gap"===e.currentDateShiftConfig.mode?t=m.shiftingNotApplicablePreserveGapMessage:"consume_gap"===e.currentDateShiftConfig.mode?t=m.shiftingNotApplicableConsumeGapMessage:(0,c().HB)(e.currentDateShiftConfig.mode):t=m.shiftingNotApplicableNoShiftingMessage,{...t,values:{items:(0,d().oj)(e.databaseType,!0)}}}function I(e){return{...m.avoidWeekendsSwitcherCaption,values:{items:(0,d().oj)(e,!0)}}}function A(e){const{feature:t,isOn:o,databaseType:n}=e;let r;return"timeline_arrows_by"===t?r=o?m.hideDependenciesInView:m.showDependenciesInView:"subitem"===t?r=o?m.showSubitemsInView:m.hideSubitemsInView:(0,c().HB)(t),{...r,values:{items:(0,d().oj)(n,!0)}}}function x(e){const t={numDependenciesUpdated:e.result.numDependenciesUpdated,item:(0,d().$O)(e.databaseType,!0),items:(0,d().oj)(e.databaseType,!0)};return e.result.numCouldNotUpdateDueToPermissions>0?e.result.numDependenciesUpdated>0?{message:{...m.dateShiftSomeNotUpdatedDueToPermissions,values:t},canUndo:!0}:{message:{...m.dateShiftAllNotUpdatedDueToPermissions,values:{}},canUndo:!1}:e.result.numDependenciesUpdated>0?{message:{...m.dateShiftSuccess,values:t},canUndo:!0}:void 0}},762433:(e,t,o)=>{o.d(t,{ek:()=>T,Xu:()=>F,ji:()=>K,DS:()=>re,qd:()=>J,V9:()=>q,KH:()=>O,d$:()=>H,Rz:()=>ee,q8:()=>L,Ry:()=>R,yB:()=>D,AI:()=>j,t_:()=>ie,i5:()=>P,YF:()=>te,et:()=>oe,Gm:()=>V,eh:()=>z,Fv:()=>X,bO:()=>ae,N8:()=>M,Fq:()=>E,TB:()=>B,Qx:()=>U,IE:()=>$,xp:()=>G,HO:()=>Z,OK:()=>W,Mr:()=>Y,q5:()=>Q,PP:()=>C,lQ:()=>x});o(16280),o(898992),o(823215),o(354520),o(672577),o(581454),o(737550);var n=()=>o(244641),r=()=>o(496603),i=()=>o(534177),a=()=>o(720665),s=()=>o(326215),l=()=>o(441738);const c={revenueCatProductIds:["notion.id.personal_pro_monthly","notion.local.id.personal_pro_monthly","notion.dev.id.personal_pro_monthly","notion.stg.id.personal_pro_monthly"],store:"app_store",original_purchase_date_before:n().c9.utc(2024,10,14),original_purchase_date_after:void 0,prices:[{externalId:"notion.id.personal_pro_monthly",billingInterval:"month",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:499}}]},d={revenueCatProductIds:["notion.id.personal_pro_yearly","notion.local.id.personal_pro_yearly","notion.dev.id.personal_pro_yearly","notion.stg.id.personal_pro_yearly"],store:"app_store",original_purchase_date_before:n().c9.utc(2024,10,14),original_purchase_date_after:void 0,prices:[{externalId:"notion.id.personal_pro_yearly",billingInterval:"year",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:4799}}]},u={revenueCatProductIds:["notion.id.personal_pro_monthly","notion.local.id.personal_pro_monthly","notion.dev.id.personal_pro_monthly","notion.stg.id.personal_pro_monthly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:n().c9.utc(2024,10,14),prices:[{externalId:"notion.id.personal_pro_monthly",billingInterval:"month",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:1199}}]},p={revenueCatProductIds:["notion.id.ai_monthly","notion.local.id.ai_monthly","notion.dev.id.ai_monthly","notion.stg.id.ai_monthly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.ai_monthly",billingInterval:"month",product:"ai",state:"current",unitAmount:{currencyCode:"USD",amount:999}}]},m={revenueCatProductIds:["notion.id.personal_pro_yearly","notion.local.id.personal_pro_yearly","notion.dev.id.personal_pro_yearly","notion.stg.id.personal_pro_yearly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:n().c9.utc(2024,10,14),prices:[{externalId:"notion.id.personal_pro_yearly",billingInterval:"year",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:11999}}]},g={revenueCatProductIds:["notion.id.ai_yearly","notion.local.id.ai_yearly","notion.dev.id.ai_yearly","notion.stg.id.ai_yearly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.ai_yearly",billingInterval:"year",product:"ai",state:"current",unitAmount:{currencyCode:"USD",amount:9599}}]},f={revenueCatProductIds:["notion.id.personal_plus:monthly","notion.local.id.personal_plus:monthly","notion.dev.id.personal_plus:monthly","notion.stg.id.personal_plus:monthly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.personal_plus:monthly",billingInterval:"month",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:1199}}]},v={revenueCatProductIds:["notion.id.ai:monthly","notion.local.id.ai:monthly","notion.dev.id.ai:monthly","notion.stg.id.ai:monthly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.ai:monthly",billingInterval:"month",product:"ai",state:"current",unitAmount:{currencyCode:"USD",amount:999}}]},h={revenueCatProductIds:["notion.id.personal_plus:yearly","notion.id.personal_plus:yearly-2","notion.local.id.personal_plus:yearly","notion.dev.id.personal_plus:yearly","notion.stg.id.personal_plus:yearly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.personal_plus:yearly",billingInterval:"year",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:11999}}]},_={revenueCatProductIds:["notion.id.ai:yearly","notion.local.id.ai:yearly","notion.dev.id.ai:yearly","notion.stg.id.ai:yearly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.ai:yearly",billingInterval:"year",product:"ai",state:"current",unitAmount:{currencyCode:"USD",amount:9499}}]},b={revenueCatProductIds:["notion.id.plus_ai_monthly","notion.local.id.plus_ai_monthly","notion.dev.id.plus_ai_monthly","notion.stg.id.plus_ai_monthly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:u.prices.concat(p.prices)},y={revenueCatProductIds:["notion.id.plus_ai_yearly","notion.local.id.plus_ai_yearly","notion.dev.id.plus_ai_yearly","notion.stg.id.plus_ai_yearly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:m.prices.concat(g.prices)},S={revenueCatProductIds:["notion.id.plus_ai:monthly","notion.local.id.plus_ai:monthly","notion.dev.id.plus_ai:monthly","notion.stg.id.plus_ai:monthly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:f.prices.concat(v.prices)},w={revenueCatProductIds:["notion.id.plus_ai:yearly","notion.local.id.plus_ai:yearly","notion.dev.id.plus_ai:yearly","notion.stg.id.plus_ai:yearly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:h.prices.concat(_.prices)},k=[p,g,v,_,c,d,u,m,f,h,b,y,S,w];var I=()=>o(984380),A=()=>o(622963);function x(e){return e.subscription?e.subscription.pending?{...e.subscription.pending,trialEnd:void 0}:e.subscription:{items:[],trialEnd:void 0}}function C(e){return e.subscription??{trialEnd:void 0,items:[]}}function T(e){let t;return t="free"===e||"personal_free"===e||"team_free"===e?void 0:{quantity:0,price:{externalId:"DANGEROUS__toFakeSubscriptionStateFromSubscriptionTier externalId",product:e,billingInterval:"month",unitAmount:{amount:0,currencyCode:"USD"},state:"current"}},{trialEnd:void 0,items:(0,r().oE)([t])}}function M(e){return((null==e?void 0:e.items)??[]).some((e=>s().xB.includes(e.price.externalId)))}function P(e){var t;return null==e||null===(t=e.subscription)||void 0===t?void 0:t.trialEnd}function B(e){const t=P(e);return Boolean(t&&t.diffNow().milliseconds>0)}function R(e){const t=null==e?void 0:e.subscription;if(!t)return;const[o,n]=(0,r().jB)(t.items,(e=>ne(e.price.externalId))),i=(0,a().Z$)(o.map((e=>e.price.unitAmount.currencyCode)),"All subscription items should have the same currency code.");return(0,a().Z$)(n.map((e=>e.price.unitAmount.currencyCode)),"All subscription items should have the same currency code.")??i}function E(e){return!(null==e||!e.subscription)&&e.subscription.items.length>0}function D(e){const{logFunction:t,spaceId:o,billingData:n}=e,i=N(n),a=(0,r().sb)(Object.values(i));if(a.length>1)throw t({level:"error",from:"billingSeatHelpers",type:"InaccurateSeatQuantity",data:{miscDataToConvertToString:{spaceId:o,subscriptionState:JSON.stringify(null==n?void 0:n.subscription,null,2)}}}),new Error("With the exception of the sites_custom_hostnames add-on, all subscription items should have the same quantity.");return a[0]}function N(e){return null!=e&&e.subscription?Object.fromEntries(e.subscription.items.filter((e=>"seats"===(0,A().vK)(e.price.product))).map((e=>[e.price.externalId,e.quantity]))):{}}function L(e){const t=null==e?void 0:e.subscription;if(!t)return;const[o,n]=(0,r().jB)(t.items,(e=>ne(e.price.externalId))),i=(0,a().Z$)(o.map((e=>e.price.billingInterval)),"All subscription items should have the same billing interval.");return(0,a().Z$)(n.map((e=>e.price.billingInterval)),"All subscription items should have the same billing interval.")??i}function F(e,t){if(!e.subscription)return t;const o=L(e);if(!o)return t;let r=e.subscription.currentPeriodEnd;const i="month"===o?n().dw.fromObject({month:1}):n().dw.fromObject({year:1}),a=n().dw.fromObject({hour:2});for(;t>r.plus(a);)r=r.plus(i);return r}function U(e){return!!e&&e.items.every((e=>0===e.price.unitAmount.amount))}function O(e,t){var o;return((null==e||null===(o=e.subscription)||void 0===o?void 0:o.items)??[]).find((e=>$(e)===t))}function V(e){return"free"!==j(e)}function j(e){const t=O(e,"plan");return(null==t?void 0:t.price.product)??"free"}function z(e,t){return H(e).includes(t)}function q(e){var t;return null===(t=O(e,"plan"))||void 0===t?void 0:t.price.externalId}function H(e){var t;return((null==e||null===(t=e.subscription)||void 0===t?void 0:t.items)??[]).map((e=>e.price.product))}function W(e){return H(e).some((e=>"seats"===(0,A().vK)(e)))}function K(e){const t=function(e){var t;const o=(null==e||null===(t=e.subscription)||void 0===t?void 0:t.items)??[];return(0,r().oE)(o.map((e=>(0,i().Xk)(l().Of,e.price.product)?{price:{product:e.price.product}}:void 0)))}(e);return t.map((e=>e.price.product))}function G(e){if(e)return l().hq(e.price.product)?void 0:e.price.product}function $(e){return Y(e.price.product)}function Y(e){return l().hq(e)?e:"plan"}function Q(e){return new(I().gm)({external_id:e.externalId,product:e.product,billing_interval:e.billingInterval,currency:e.unitAmount.currencyCode,unit_amount:e.unitAmount.amount,state:"current"})}function Z(e,t){return(0,a().Z4)(e,(e=>$(e)),t,(e=>$(e)))}function X(e){return"stripe"===(null==e?void 0:e.provider)||"mixed"===(null==e?void 0:e.provider)}function J(e){let{billingData:t,canUpdateBilling:o}=e;return o&&"stripe"===(null==t?void 0:t.provider)}function ee(e){if(e)return"stripe"===e.provider||"mixed"===e.provider?e.externalId:void 0}function te(e){return"app_store"===(null==e?void 0:e.provider)||"play_store"===(null==e?void 0:e.provider)||"mixed"===(null==e?void 0:e.provider)}function oe(e){return Boolean("app_store"===(null==e?void 0:e.provider)||"play_store"===(null==e?void 0:e.provider))}function ne(e){return k.some((t=>t.prices.some((t=>t.externalId===e))))}function re(e){return null!=e&&e.clock.externalId?e.clock.now:n().c9.now()}function ie(e,t){var o;return null===(o=e.taxIds.find((e=>e.type===t)))||void 0===o?void 0:o.value}function ae(e){var t;return"verifying"===(null==e||null===(t=e.paymentMethod)||void 0===t?void 0:t.trustLevel)}},764061:(e,t,o)=>{o.d(t,{l:()=>n});const n={legacyTransclusionActions:new(o(645873).O2)("legacyTran",(async()=>await o.e(99314).then(o.bind(o,456116))))}},764218:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isOpen:!1}}}const r=n},764670:(e,t,o)=>{function n(e){const{collectionViewId:t,viewsModuleCurrentPageId:o}=e;return o?`collectionViewTemporaryState:${t}:${o}`:`collectionViewTemporaryState2:${t}`}o.d(t,{l:()=>n})},764781:(e,t,o)=>{o.d(t,{V:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M4.5 2.375A2.125 2.125 0 0 0 2.375 4.5V12c0 1.174.951 2.125 2.125 2.125h1.625v1.625c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125v-7.5a2.125 2.125 0 0 0-2.125-2.125h-1.625V4.5A2.125 2.125 0 0 0 12 2.375zm8.375 3.75H8.25A2.125 2.125 0 0 0 6.125 8.25v4.625H4.5A.875.875 0 0 1 3.625 12V4.5c0-.483.392-.875.875-.875H12c.483 0 .875.392.875.875zm-5.5 2.125c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875z"})},r=(0,o(340498).wt)("duplicate",n)},765370:(e,t,o)=>{o.d(t,{w:()=>r});o(898992),o(672577);var n=()=>o(755199);function r(e){let{collectionContextStore:t,transaction:o}=e;const r="collectionTypedView"===t.contextType,i=t.databaseType,a=t.collectionStoresStore.state,s=a.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||a[0];!r&&s&&n().ee({transaction:o,databaseType:i,collectionId:s.id})}},766637:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{numServerRequests:0,numLocalRequests:0}}}const r=new n},767525:(e,t,o)=>{o.d(t,{m0:()=>d,mn:()=>c,s1:()=>l});var n=()=>o(244641),r=()=>o(56366),i=()=>o(416504);function a(){const e=(0,i().o)(),t=n().oh.create(e);return Object.freeze({timeZone:e,zone:t})}const s=o(757695).default.createValue(a(),{name:"currentTimeZoneStore"});function l(){return s.state}function c(){return(0,r().K8)((()=>l()),[])}function d(){const e=a();s.state.timeZone!==e.timeZone&&s.setState(e)}},770906:(e,t,o)=>{o.d(t,{VI:()=>b,J$:()=>_,oe:()=>S,ZT:()=>y,gO:()=>w});var n=()=>o(206267),r=()=>o(534177),i=()=>o(848259),a=()=>o(661920),s=()=>o(47373),l=()=>o(869562),c=()=>o(644914),d=()=>o(749687),u=()=>o(712505),p=()=>o(941463),m=()=>o(441199),g=()=>o(899963),f=()=>o(946141);function v(e){const{environment:t,contentType:o,autoLoaded:n}=e,s=d().sidebarExpandedStore.state;d().sidebarOpenStore.state&&!s&&l().close(),c().Nk(t)&&l().setUpdateExpand({environment:t,isExpanded:!1,from:"close_for_space",saveDetailsSidebarPreference:!1}),u().default.isSidePeekOpen()&&a().VN({environment:t,from:"secondary_sidebar_expand"}),function(e){const{environment:t,contentType:o,autoLoaded:n}=e;switch(o){case"inbox":i().WP({environment:t,auto_loaded:n});break;case"activity":case"none":break;case"private_pages":g().r9(t,{outliner_type:"private",auto_loaded:n});break;case"shared_pages":g().r9(t,{outliner_type:"shared",auto_loaded:n});break;case"assistant":g().wG(t,{auto_loaded:n});break;case"teams":f().Zl(t,{from:"sidebar_browse_team_item",auto_loaded:n});break;default:(0,r().HB)(o)}}({environment:t,contentType:o,autoLoaded:n})}function h(e){const{environment:t,contentType:o}=e;switch(o){case"inbox":i()._P({environment:t});break;case"activity":case"private_pages":case"shared_pages":case"assistant":case"teams":case"none":break;default:(0,r().HB)(o)}}function _(e){const{environment:t,contentType:o,skipAnimation:r,autoLoaded:i}=e;m().default.isVisible()&&h({environment:t,contentType:m().default.state.contentType}),v({environment:t,contentType:o,autoLoaded:Boolean(i)});const{modeByContentType:a}=p().Ay.state,l=a[o],c="assistant"===o&&"panel"===l,d=(0,s().hg)(t)||c?l:"peek";m().default.setState({...m().default.state,contentType:o,openState:r?"open":"opening",mode:d,flowId:n().JW()}),p().Ay.setState({...p().Ay.state,openState:"open",contentType:o,mode:d})}function b(e){const{environment:t,skipAnimation:o,autoClose:n}=e;m().default.isVisible()&&(m().default.setState({...m().default.state,openState:o?"closed":"closing",autoClosed:Boolean(n)}),p().Ay.setState({...p().Ay.state,openState:"closed"}),h({environment:t,contentType:m().default.state.contentType}))}function y(e){const{environment:t,contentType:o}=e,n=m().default.isOpen(),r=m().default.state.contentType;n&&r===o?b({environment:t}):_({environment:t,contentType:o})}function S(){const{mode:e,contentType:t}=m().default.state;let o;switch(e){case"peek":o="panel";break;case"panel":o="peek";break;default:(0,r().HB)(e)}const{modeByContentType:n}=p().Ay.state;return m().default.setState({...m().default.state,mode:o,modeByContentType:{...n,[t]:o}}),p().Ay.setState({...p().Ay.state,mode:o,modeByContentType:{...n,[t]:o}}),o}function w(e){const{environment:t}=e;m().default.isOpen()&&"peek"===m().default.state.mode&&b({environment:t})}},771467:(e,t,o)=>{o.d(t,{V:()=>r});var n=()=>o(299917);const r=new(o(645873).O2)("katex",(async()=>{const[e]=await Promise.all([Promise.all([o.e(22130),o.e(29366)]).then(o.bind(o,522130)),(0,n().Ay)(o(148307).A.katex.katexMinCss,{resourceType:n().vt.Stylesheet})]);return await Promise.all([o.e(22130),o.e(29366)]).then(o.bind(o,153477)),e.default}))},771989:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{initiator:"none",dragging:!1,waiting:!1}}hasDragged(){return this.state.dragging&&!o(496603).n4(this.state.startingPoint,this.state.currentPoint)}}const r=n},772464:(e,t,o)=>{o.d(t,{Q:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("sub",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M5 3V20H23.187L19.594 16.406L21 15L27 21L21 27L19.594 25.594L23.187 22H3V3H5Z"})})},773458:(e,t,o)=>{o.d(t,{N:()=>l,S:()=>c});o(18107),o(967357);var n=()=>o(742852),r=()=>o(878377),i=()=>o(781286),a=()=>o(416726);const s=(0,o(959013).YK)({addImageHyperlink:{id:"action.addImageHyperlink",defaultMessage:"Add link"},editImageHyperlink:{id:"action.editImageHyperlink",defaultMessage:"Edit link"}}),l=(0,a().Fw)({key:"link image",displayName:s.addImageHyperlink,analyticsName:s.addImageHyperlink.defaultMessage,svg:n().w,validators:[r().p2L,r().vXb,r().wu0,r().AU6(r().vEP),r().AU6(r().GPx)],shortcuts:["openLinkMenuOrOpenSearch"],closeParentMenu:!0,track:{actionName:"init_edit_link"},action:(e,t,o)=>{let{blocks:n}=t;const r=n.at(0);r&&(i().hv({store:r}),e())}}),c=(0,a().Fw)({key:"link image",displayName:s.editImageHyperlink,analyticsName:s.editImageHyperlink.defaultMessage,svg:n().w,validators:[r().p2L,r().vXb,r().wu0,r().AU6(r().vEP),r().GPx],shortcuts:["openLinkMenuOrOpenSearch"],closeParentMenu:!0,track:{actionName:"init_edit_link"},action:(e,t,o)=>{let{blocks:n}=t;const r=n.at(0);r&&(i().hv({store:r}),e())}})},774733:(e,t,o)=>{o.d(t,{Gc:()=>d,Gu:()=>s,L_:()=>f,MC:()=>u,PW:()=>a,UY:()=>c,bd:()=>l,c4:()=>g,commentsDependency:()=>r,eo:()=>i,fj:()=>p,vY:()=>m});var n=()=>o(645873);const r=new(n().O2)("comments",(()=>Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(3560),o.e(37125)]).then(o.bind(o,478985)))),i=(0,n()._h)(r,(e=>e.Comment)),a=(0,n()._h)(r,(e=>e.Discussion)),s=(0,n()._h)(r,(e=>e.DiscussionIndicator)),l=(0,n()._h)(r,(e=>e.DiscussionInput)),c=(0,n()._h)(r,(e=>e.MarginCommentsSection)),d=(0,n()._h)(r,(e=>e.NewDiscussionMenu)),u=(0,n()._h)(r,(e=>e.ReplyDiscussionMenu)),p=(0,n()._h)(r,(e=>e.ReactionBar)),m=((0,n()._h)(r,(e=>e.DiscussionReactionBar)),(0,n()._h)(r,(e=>e.CommentFileBlock))),g=(0,n()._h)(r,(e=>e.SuggestionContext)),f=(0,n()._h)(r,(e=>e.PropertyDiscussionIndicator))},775191:(e,t,o)=>{o.d(t,{C3:()=>u,Go:()=>p,Yw:()=>d,d6:()=>m});var n=()=>o(427704),r=()=>o(939768),i=()=>o(780054),a=()=>o(725951),s=()=>o(449506),l=()=>o(705540),c=()=>o(435009);async function d(e){const t=(0,a().LX)(e),o=await s().callApi({eventName:"generatePasskeyRegistrationOptions",environment:e,data:{}});if("success"!==o.type)return;const{attemptId:c,options:d}=o.data,u={callbackType:t.callbackType,attemptId:c,options:JSON.stringify(d)},p=(0,r().Gm)({url:`${i().A.domainBaseUrl}${n().JZ.passkeyRegistrationRedirect}`,query:u}),m=await(0,a().YN)(e,p,!1);await l().openExternalUrl(m)}async function u(e,t,o,i,a){const s=await p({options:a});if(!s)return;const l=(0,r().O$)(n().JZ.passkeyRegistrationCallback,{csrfToken:o,attemptId:i,response:JSON.stringify(s)}),d="nativemailredirect"===t?"/nativemail":"nativecalendarredirect"===t?"/nativecalendar":"/native";c().oo({environment:e,url:`${d}${l}`})}async function p(e){const{options:t}=e;try{const{startRegistration:e}=await o.e(70216).then(o.bind(o,412681));return await e(t)}catch(n){return}}async function m(e){const{environment:t,attemptId:o,attestation:n,shouldValidateCsrfToken:r,csrfToken:i}=e;try{const e=await s().callApi({eventName:"verifyPasskeyRegistration",environment:t,data:{attemptId:o,attestation:n,shouldValidateCsrfToken:r??!1,csrfToken:i}});return"success"===e.type&&!0===e.data.isVerified?{created:!0}:{created:!1}}catch(a){return{created:!1}}}},775916:(e,t,o)=>{o.d(t,{p:()=>s});var n=()=>o(56366),r=()=>o(166386),i=()=>o(351360),a=()=>o(985315);function s(){const e=(0,n().K8)((()=>{var e;return null===(e=i().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),t=(0,a().g)({spaceId:e});if(t)return(0,r().e8)(t,"trial")}},776894:(e,t,o)=>{o.d(t,{p1:()=>M,w8:()=>U,sw:()=>F,P7:()=>V,nn:()=>D,sZ:()=>O,T:()=>B,lD:()=>R,g7:()=>L,qy:()=>j,OY:()=>z});o(16280),o(898992),o(823215),o(354520),o(672577),o(737550),o(296540);var n=()=>o(700500),r=()=>o(604995),i=()=>o(946065),a=()=>o(179034),s=()=>o(519831),l=()=>o(96689),c=()=>o(854150),d=()=>o(959013),u=()=>o(534177),p=()=>o(901389),m=()=>o(690197),g=()=>o(351360),f=()=>o(861841),v=()=>o(630116),h=()=>o(620149),_=()=>o(989423),b=()=>o(972435),y=()=>o(396301),S=()=>o(108944),w=()=>o(731320),k=()=>o(836251),I=()=>o(437622),A=()=>o(483461),x=()=>o(284371),C=o(474848);async function T(){return p().Gh({message:(0,C.jsx)("span",{children:(0,C.jsx)(d().sA,{defaultMessage:"Make this page private?",id:"confirmDialog.movePageToPrivate.message",values:{boldtext:e=>(0,C.jsx)("span",{style:{fontWeight:x().Wy.semibold},children:e})}})}),description:(0,C.jsx)(d().sA,{defaultMessage:"Only you will be able to access this page.",id:"confirmDialog.movePageToPrivate.description"}),acceptLabel:(0,C.jsx)(d().sA,{defaultMessage:"Move to private",id:"confirmDialog.movePageToPrivate.confirmButton.label"})})}const M=20,P=(0,d().YK)({privateDestinationName:{id:"moveToHelpers.destinationName.private",defaultMessage:"Private"},numPagesDescriptorString:{id:"moveToHelpers.movePageDescriptorString",defaultMessage:"{numPagesMoved, plural, one {# page} other {# pages}}"},numPagesWithSubitemsDescriptorString:{id:"moveToHelpers.movePagesWithSubitemsDescriptorString",defaultMessage:"{numPagesMoved, plural, one {# page} other {# pages}} and {numSubitemsMoved, plural, one {# sub-item} other {# sub-items}}"},numBlocksDescriptorString:{id:"moveToHelpers.moveBlocksDescriptorString",defaultMessage:"{numBlocksMoved, plural, one {# block} other {# blocks}}"},bookmarksDestinationName:{id:"moveToHelpers.destinationName.favorites",defaultMessage:"Favorites"},movedMessagesWithDestinationToast:{id:"moveToHelpers.afterBulkMoveCompleteToastMessageWithDestination",defaultMessage:"Moved {pageDescriptor} to {destinationName}"},movedToDestinationShortToast:{id:"moveToHelpers.afterMoveCompleteOnMobileToastMessageWithDestination",defaultMessage:"Moved to {destinationName}"},movedMessagesToast:{id:"moveToHelpers.afterBulkMoveCompleteToastMessage",defaultMessage:"Moved {pageDescriptor}"}});function B(e){const{movedItems:t,numSubitems:o}=e;if(!(t.filter((e=>e.isNavigableBlock())).length===t.length))return b().A.formatMessage(P.numBlocksDescriptorString,{numBlocksMoved:t.length});if(1===t.length){const e=E(t[0]);if(e)return e}return o?b().A.formatMessage(P.numPagesWithSubitemsDescriptorString,{numPagesMoved:t.length-o,numSubitemsMoved:o}):b().A.formatMessage(P.numPagesDescriptorString,{numPagesMoved:t.length})}function R(e){const{environment:t,movedItems:o,moveToLocation:n,numSubitems:r}=e,i=B({movedItems:o,numSubitems:r}),a=function(e){const{environment:t,moveToLocation:o}=e,{currentSpaceStore:n}=g().default.getState();if(void 0===o||void 0===n)return;switch(o.type){case"moveToBlock":return E(o.blockStore);case"moveToCollection":return E(o.collectionStore);case"moveToCurrentWorkspace":return(0,I().GK)(t,n);case"moveToPrivatePages":return b().A.formatMessage(P.privateDestinationName);case"moveToTeam":return E(o.teamStore);case"moveToOtherWorkspace":return(0,I().GK)(t,o.spaceStore);case"moveToBookmarks":case"moveToShared":return;default:(0,u().HB)(o)}}({environment:t,moveToLocation:n});return a?t.device.isPhone?b().A.formatMessage(P.movedToDestinationShortToast,{destinationName:a}):b().A.formatMessage(P.movedMessagesWithDestinationToast,{pageDescriptor:i,destinationName:a}):b().A.formatMessage(P.movedMessagesToast,{pageDescriptor:i})}function E(e){var t;const o=b().A.getIntl();if(e)return null===(t=e.getModel())||void 0===t?void 0:t.getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:r().Zq,intl:o})}function D(e,t){const{currentSpaceStore:o}=g().default.getState(),n=("space"===e.type?e.id:e.spaceId)??(null==o?void 0:o.id);if(void 0===o||void 0===n)return;const r=function(e){var t;const{currentUserRootStore:o,currentSpaceStore:n}=g().default.state;return(null==n?void 0:n.id)===e?n:null==o||null===(t=o.getSpaceViewStores())||void 0===t||null===(t=t.find((t=>{var o;return(null===(o=t.getSpaceStore())||void 0===o?void 0:o.id)===e})))||void 0===t?void 0:t.getSpaceStore()}(n);if(r){if(r.id!==o.id)return{type:"moveToOtherWorkspace",spaceStore:r,targetParentId:"space-private-pages"!==e.type?e.id:r.id};switch(e.type){case"page":{const t=g().default.state.mainEditorCurrentBlockStore;if(!t)return;return{type:"moveToBlock",blockStore:v().Bv.createChildStore(t,{table:a().ev,id:e.id})}}case"collection":return{type:"moveToCollection",collectionStore:v().md.createChildStore(r,{table:s().Vl,id:e.id})};case"space":return{type:"moveToCurrentWorkspace"};case"space-private-pages":return{type:"moveToPrivatePages"};case"team":return{type:"moveToTeam",teamStore:v().h4.createChildStore(r,{table:c().yK,id:e.id})};default:(0,u().HB)(e)}}}function N(e){switch(e){case"workspace":return{type:"moveToCurrentWorkspace"};case"bookmarks":return{type:"moveToBookmarks"};case"private":return{type:"moveToPrivatePages"};case"shared":return{type:"moveToShared"};case"team":case i().st:case i().zt:case i().AX:case i().GU:case i().yy:return;default:(0,u().HB)(e)}}function L(e){const{droppedDirection:t,targetStore:o,outlinerSectionType:n}=e,{currentSpaceStore:r}=g().default.getState();if(!r||!n)return;let i=o;if("block"===(null==o?void 0:o.table)&&t!==f().bH.Onto){if("bookmarks"===n)return{type:"moveToBookmarks"};if("shared"===n)return{type:"moveToShared"};i=null==o?void 0:o.getParentStore()}if(void 0===i)return;if(r.id===i.id)return N(n);switch(i.table){case"block":return{type:"moveToBlock",blockStore:i};case"team":return{type:"moveToTeam",teamStore:i};case"space":return N(n)}}function F(e){let{environment:t,blocks:o}=e;if(h().l.state)return{canMoveBlocks:!1,reason:{key:"unknown"}};for(const n of o){if(n.getParentTable()===c().yK){const e=(0,S().Uo)(n);if(!e||!(0,y().dp)({teamStore:e,environment:t}))return{canMoveBlocks:!1,reason:{key:"lockedTopLevelTeamPage"}}}if(!n.canAdmin())return{canMoveBlocks:!1,reason:{key:"needsFullAccess"}};if(!w().MI({environment:t,blockStore:n})){const e=n.getParentStore();return{canMoveBlocks:!1,reason:{key:"needsEditAccessOnParent",parentStore:e instanceof v().Bv?e:void 0}}}}return{canMoveBlocks:!0}}function U(e){let{environment:t,blocks:o}=e;return F({environment:t,blocks:o}).canMoveBlocks}function O(e){const{type:t}=e,{mainEditorCurrentBlockStore:o,currentSpaceStore:n}=g().default.state;if(!n)throw new Error("currentSpaceStore not found");const r=o||n;if("space"!==t&&e.spaceId&&e.spaceId!==n.id)return v().SL.createChildStore(r,{table:l().NX,id:e.spaceId});switch(t){case"space-private-pages":return v().SL.createChildStore(r,{table:l().NX,id:n.id});case"space":return v().SL.createChildStore(r,{table:l().NX,id:e.id});case"page":return v().Bv.createChildStore(r,{table:a().ev,id:e.id});case"collection":return v().md.createChildStore(r,{table:s().Vl,id:e.id});case"team":return v().h4.createChildStore(n,{table:c().yK,id:e.id,spaceId:n.id});default:(0,u().HB)(t)}}async function V(){const{accept:e}=await p().Gh({mode:"wide",message:(0,C.jsx)("b",{children:(0,C.jsx)(d().sA,{id:"moveToHelpers.duplicateToSpaceConfirmTitle",defaultMessage:"Some content and settings may be broken on the duplicated page"})}),description:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{style:{marginBottom:8},children:(0,C.jsx)(d().sA,{id:"moveToHelpers.duplicateToSpaceConfirmDescription1",defaultMessage:"This may include: links, relations, permissions, page history, and more."})}),(0,C.jsx)(d().sA,{id:"moveToHelpers.duplicateToSpaceConfirmDescription2",defaultMessage:"This page will remain unchanged in the current workspace, and a duplicate version will be created in the workspace you have chosen."}),(0,C.jsx)(m().A,{title:(0,C.jsx)("div",{children:(0,C.jsx)(d().sA,{id:"moveToHelpers.duplicateToSpaceConfirmHelpLink",defaultMessage:"Learn more"})}),href:(0,k().xS)("guides.duplicateToSpace"),analyticsFrom:"move_to_confirm_duplicate_to_space",style:{marginTop:12}})]}),acceptLabel:(0,C.jsx)(d().sA,{id:"moveToHelpers.duplicateToSpaceConfirmAcceptLabel",defaultMessage:"I understand, duplicate"})});return e}function j(e){let{targets:t,destination:o,direction:r,draggingOutlinerType:i}=e;if(r===f().bH.Onto&&t.some((e=>e.id===o.id)))return!0;const a=void 0!==(0,S().me)(o);return!(!t.some((e=>(0,A().E)(e)))||!a)||(!("bookmarks"===i||!function(e){let{targets:t,destination:o,direction:r}=e;const i=t.some((e=>e.isCollectionView()||!e.isType(n().Si)));if(!i)return!1;if(o.isCollectionView()&&!(0,A().E)(o)){if(r===f().bH.Onto)return!0;if(!o.getRecordStoreUIParent())return!0}const a=o.getAssociatedCollectionStore();if(r!==f().bH.Onto&&a&&!a.isPageTreeCollection())return!0;return!1}({targets:t,destination:o,direction:r}))||!(!o.isLocked()||!o.isPageBlock()))}async function z(e){const t=function(e){const{from:t,environment:o}=e;if("moveTo"===t){const{moveToValue:t}=e.moveToArgs;return D(t)}if("dragAndDrop"===t){const{destination:t,direction:n,destinationOutlinerType:r}=e.dropArgs;return L({targetStore:t,droppedDirection:n,outlinerSectionType:r,environment:o})}}(e),o=await async function(e){const{blocks:t,environment:o,moveToLocation:n,from:r}=e;if(!n||"moveToOtherWorkspace"===n.type||"moveToBookmarks"===n.type)return{confirmed:!0,shouldClearPagePermissions:!1};const i="moveToPrivatePages"===n.type,a="moveTo"===r?e.moveToArgs.destination:e.dropArgs.destination,s=a&&q({stores:[a],environment:o});if(!i&&!s)return{confirmed:!0,shouldClearPagePermissions:!1};if(!q({stores:t,environment:o})){const{accept:e}=await T();return e?{confirmed:!0,shouldClearPagePermissions:!0}:{confirmed:!1}}if(t.every((e=>e.isTopLevel())))return{confirmed:!0,shouldClearPagePermissions:!1};if(!i)return{confirmed:!0,shouldClearPagePermissions:!1};const l=o.currentUser.id;if(t.some((e=>{const t=e.getPermissionItems();return 0!==t.length&&(1!==t.length||"user_permission"!==t[0].type||t[0].user_id!==l)}))){const{accept:e}=await T();return e?{confirmed:!0,shouldClearPagePermissions:!0}:{confirmed:!1}}return{confirmed:!0,shouldClearPagePermissions:!1}}({...e,moveToLocation:t});if(!o.confirmed)return{confirmed:!1};const n=await async function(e){const{environment:t,moveToLocation:o,from:n,blocks:r}=e;if(!o)return{confirmed:!0,shouldUpdateToManualSort:!1};if("moveTo"===n)return{confirmed:!0,shouldUpdateToManualSort:!1};const i="moveToPrivatePages"===o.type||"moveToShared"===o.type;if(!i)return{confirmed:!0,shouldUpdateToManualSort:!1};if(e.dropArgs.isDroppingOnFullSection)return{confirmed:!0,shouldUpdateToManualSort:!1};const a="moveToPrivatePages"===o.type?"private":"shared";if("private"===a){if(!q({stores:r,environment:t}))return{confirmed:!0,shouldUpdateToManualSort:!1}}const{currentSpaceViewStore:s}=g().default.state;if(!s||"lastEdited"!==(0,y().RQ)({spaceViewStore:s,type:a}).sortOption)return{confirmed:!0,shouldUpdateToManualSort:!1};(0,_().u4)({environment:t,event:{eventName:"sidebar_manual_sort_modal_open",eventProperties:{outliner_type:a}}});const{accept:l}=await async function(e){return p().Gh({message:(0,C.jsx)(d().sA,{defaultMessage:"Would you like to switch to manual sort?",id:"confirmDialog.manualSortForSidebarSection.message"}),description:"private"===e?(0,C.jsx)(d().sA,{defaultMessage:"This will discard your previous manual sort in Private.",id:"confirmDialog.manualSortForPrivate.description"}):(0,C.jsx)(d().sA,{defaultMessage:"This will discard your previous manual sort in Shared.",id:"confirmDialog.manualSortForShared.description"}),acceptLabel:(0,C.jsx)(d().sA,{defaultMessage:"Switch to manual",id:"confirmDialog.manualSortForSidebarSection.confirmButton.label"})})}(a);if(!l)return(0,_().u4)({environment:t,event:{eventName:"sidebar_manual_sort_modal_cancel",eventProperties:{outliner_type:a}}}),{confirmed:!1};return(0,_().u4)({environment:t,event:{eventName:"sidebar_manual_sort_modal_confirm",eventProperties:{outliner_type:a}}}),{confirmed:!0,shouldUpdateToManualSort:!0}}({...e,moveToLocation:t});if(!n.confirmed)return{confirmed:!1};const{shouldClearPagePermissions:r}=o,{shouldUpdateToManualSort:i}=n;return{confirmed:!0,shouldClearPagePermissions:r,shouldUpdateToManualSort:i}}function q(e){const{stores:t,environment:o}=e,{currentSpaceStore:n}=g().default.state;if(!n)return!1;for(const r of t){const e=(0,S().Lf)(r);if(!((null==e?void 0:e.table)===a().ev&&e.isTopLevelPrivatePage({spaceStore:n,environment:o})))return!1}return!0}},777447:(e,t,o)=>{o.d(t,{GS:()=>m,lX:()=>d,wv:()=>c});o(944114),o(898992),o(354520),o(581454);var n=()=>o(496603),r=()=>o(584262),i=()=>o(921940),a=()=>o(861017),s=()=>o(179034),l=()=>o(919709);function c(e){const{pageId:t,scrollToBlockId:o,peekViewBlockId:n,peekMode:a,collectionViewId:s,discussionId:l}=e;return(0,i().A)({pageId:t,scrollToBlockId:o,peekViewBlockId:n,peekMode:a,collectionViewId:s,discussionId:l,pageVisitSource:r().y8.LinkInPage})}function d(e){const{url:t,baseUrl:o,publicDomainName:n}=e;let r;try{r=(0,a().parseRoute)({url:t,isMobile:!1,baseUrl:o,publicDomainName:n,protocol:void 0,currentUrl:void 0})}catch(i){return}if("page"===r.name)return r.peekViewBlockId||r.blockId}function u(e){return(t,o,n)=>{const r=e({table:s().ev,id:t});return!!r&&(r.parent_table===o&&r.parent_id===n)}}function p(e,t){if(!e)return[];const o=l().N5L(e),n=l().CY8(e);for(const r of n){const e=d({...t,url:r.url});e&&o.push(e)}return o}function m(e){const{parentBlock:t,oldTextValue:o,newTextValue:r,getRecordValue:i,baseUrl:a,publicDomainName:l}=e,c=p(o,{baseUrl:a,publicDomainName:l}),d=p(r,{baseUrl:a,publicDomainName:l});return function(e){const{parentBlock:t,mentionedPageIds:o,blockHasParent:r}=e,i=t.content||[];return n().FF(o,...i).filter((e=>r(e,s().ev,t.id)))}({parentBlock:t,mentionedPageIds:n().FF(c,...d),blockHasParent:u(i)})}},777932:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isDuplicating:!1}}}const r=new n},778417:(e,t,o)=>{o.d(t,{A:()=>U,AP:()=>ie,DN:()=>O,IU:()=>$,JK:()=>oe,Ko:()=>F,Lt:()=>H,PF:()=>ne,SB:()=>q,Ub:()=>te,Uz:()=>ee,Xc:()=>R,Zm:()=>K,bG:()=>G,bi:()=>Y,gj:()=>N,hc:()=>W,jG:()=>Z,mL:()=>X,rN:()=>V,sf:()=>re,tY:()=>D,td:()=>z});o(944114),o(898992),o(354520),o(803949),o(581454),o(737550);var n=()=>o(507707),r=()=>o(908006),i=()=>o(921598),a=()=>o(708830),s=()=>o(496603),l=()=>o(404779),c=()=>o(989423),d=()=>o(405417),u=()=>o(281322),p=()=>o(20313),m=()=>o(494043),g=()=>o(585533),f=()=>o(696152),v=()=>o(695625),h=()=>o(919878),_=()=>o(980914),b=()=>o(393255),y=()=>o(110955),S=()=>o(854502),w=()=>o(666710),k=()=>o(502438),I=()=>o(468484),A=()=>o(60867),x=()=>o(131581),C=()=>o(829300),T=()=>o(620689),M=()=>o(725614),P=()=>o(324089),B=()=>o(317909);function R(){const e=k().default.getCurrentDefaultContainer();if(e){return v().T.getMembersByDOMOrder({filter:t=>t.getContextSelectableContainer()===e&&t.props.canSelect}).map((e=>e.props.store))}return[]}function E(e){const t=k().default.state.stores,o=k().default.state.pivot,n=s().oE(s().FF(t,o));let r;r=o===s().HV(t)?t[t.length-2]:t[1],z({environment:e,stores:n,pivot:r})}function D(e){return function(e){const t=u().r();return e.device.isMac?t.shift&&t.command:t.shift&&t.option}(e)?q.TOGGLE:N()?q.MULTI_SELECT_FROM_FIRST_SELECTED_STORE:q.SELECT}function N(){return u().r().shift}function L(e){e.sort(((e,t)=>(0,n().A)(v().T.findNodeFromStore(e),v().T.findNodeFromStore(t))))}function F(e){const t=new Array(e.length);return v().T.forEach((o=>{if(o.props.canSelect){const n=e.indexOf(o.props.store);if(n>=0){const e=o.getNode();e&&(t[n]=e)}}})),e.filter(((o,n)=>{const r=t[n];return o&&!e.some(((e,o)=>{const n=t[o];return Boolean(n&&n!==r&&r&&n.contains(r))}))}))}function U(e){k().default.setState({...k().default.state,phase:e.phase}),e.phase===k().SelectionPhase.Editing||e.preventClearEditingText||M().clear({preventDismissMobileKeyboard:e.preventDismissMobileKeyboard,environment:e.environment})}function O(e){const{stores:t}=e,o=k().default.state.stores,n=s().KC(t,o);n.length===t.length&&n.length===o.length||k().default.setState({...k().default.state,stores:e.stores}),t.length>0&&((0,l().y)(),_().bS(t)||h().wr())}function V(e){k().default.setState({...k().default.state,pivot:e.pivot})}function j(e){k().default.setState({...k().default.state,multiSelectBoundaryStore:e.multiSelectBoundaryStore})}function z(e){const{environment:t}=e,o=F(e.stores);O({stores:o}),U({environment:e.environment,phase:e.phase||k().SelectionPhase.Selected}),1===o.length&&function(e){var t;const o=e.anchor,n=null===(t=v().T.findSelectableFromStore(o))||void 0===t?void 0:t.getNode();let r;n&&(r=k().default.getDefaultContainerFromTarget(n)),k().default.setState({...k().default.state,anchor:o,anchorContainer:r})}({anchor:o[0]});const n=e.pivot||o[0];V({pivot:n});if(j({multiSelectBoundaryStore:e.multiSelectBoundaryStore}),r().default.afterNextFlush((()=>{L(o)})),e.phase===k().SelectionPhase.Editing&&n)if(t.device.isMobile)T().pS(t);else if(!t.device.isMobileBrowser){const e=v().T.findScrollToSelectableFromStore(n);e&&T().pb({environment:t,handle:e,vertical:{reveal:"closest"},horizontal:e.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}}let q=function(e){return e[e.SELECT=0]="SELECT",e[e.TOGGLE=1]="TOGGLE",e[e.MULTI_SELECT_FROM_FIRST_SELECTED_STORE=2]="MULTI_SELECT_FROM_FIRST_SELECTED_STORE",e[e.MULTI_SELECT_FROM_BOUNDARY=3]="MULTI_SELECT_FROM_BOUNDARY",e}({});function H(e){void 0===e.selectMode&&(e.selectMode=q.SELECT);const{multiSelectBoundaryStore:t,stores:o}=k().default.state,n=function(e,t){const{multiSelectBoundaryStore:o}=k().default.state;if(o&&e===q.MULTI_SELECT_FROM_BOUNDARY){var n,r;const e=null===(n=v().T.findSelectableFromStore(o))||void 0===n?void 0:n.props.groupsPointer,a=null===(r=v().T.findSelectableFromStore(t))||void 0===r?void 0:r.props.groupsPointer;if((e||a)&&(!e||!a||(0,i().Hm)(e)!==(0,i().Hm)(a)))return q.TOGGLE}return e!==q.MULTI_SELECT_FROM_BOUNDARY||o?e:q.TOGGLE}(e.selectMode,e.store);switch(n){case q.TOGGLE:s().mK(o,e.store)?z({environment:e.environment,stores:s().FF(o,e.store)}):z({environment:e.environment,stores:s().KC(o,[e.store]),multiSelectBoundaryStore:e.store});break;case q.MULTI_SELECT_FROM_BOUNDARY:{let n=s().o8(o);const r=R(),i=r.indexOf(e.store);s().mK(n,e.store)||n.push(e.store);const a=r.indexOf(t),l=Math.min(i,a),c=Math.max(i,a),d=s().di(r,l,c);n=s().KC(n,d),z({environment:e.environment,stores:n,multiSelectBoundaryStore:e.store});break}case q.MULTI_SELECT_FROM_FIRST_SELECTED_STORE:{let t=s().o8(o);const n=R(),r=n.indexOf(e.store);s().mK(t,e.store)||t.push(e.store);const i=o[0];if(i){const e=n.indexOf(i);if(e>=0){const o=s().di(n,r,e);t=s().KC(t,o)}}const a=s().HV(o);if(a){const e=n.indexOf(a);if(e>=0){const o=s().di(n,e,r);t=s().KC(t,o)}}z({environment:e.environment,stores:t,multiSelectBoundaryStore:e.store});break}case q.SELECT:default:s().mK(o,e.store)||z({environment:e.environment,stores:[e.store],multiSelectBoundaryStore:e.store})}U({environment:e.environment,phase:k().SelectionPhase.Selected})}function W(e){const{environment:t,store:o}=e;if(o)if(O({stores:[o]}),V({pivot:void 0}),U({environment:t,phase:k().SelectionPhase.Editing}),j({multiSelectBoundaryStore:void 0}),t.device.isMobile)T().pS(t);else if(!t.device.isMobileBrowser){const e=v().T.findScrollToSelectableFromStore(o);e&&T().pb({environment:t,handle:e,vertical:{reveal:"closest"},horizontal:e.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}}function K(e){const{stores:t}=k().default.state,o=t[0];if(!o)return;const n=v().T.findSelectableFromStore(o);if(n&&n.props.onEditText){const t=n.props.onEditText;B().createAndCommit({userAction:"selectionActions.editSelection",environment:e,canUndo:!0,perform:e=>{t({isAtStartOfLine:!1,isClick:!1,transaction:e})}})}}function G(e){const{environment:t,stores:o}=e,n=s().HV(o);if(!n)return;const r=v().T.findSelectableFromStore(n);if(r&&r.props.onEditText){const e=r.props.onEditText;B().createAndCommit({userAction:"selectionActions.editStoresAtEnd",environment:t,canUndo:!0,perform:t=>{e({isAtStartOfLine:!1,isClick:!1,transaction:t})}})}}function $(e){let{environment:t,preventDismissMobileKeyboard:o}=e;O({stores:[]}),U({environment:t,phase:k().SelectionPhase.Selected,preventDismissMobileKeyboard:o}),j({multiSelectBoundaryStore:void 0}),C().VN(),y().A.state.open&&((0,c().u4)({environment:t,event:{eventName:"close_slash_menu",eventProperties:{id:y().A.state.id,source:"click_outside"}}}),b().VN({environment:t,dismissed:!0})),x().VN()}function Y(e){const{environment:t}=e,o=k().default.state.stores;L(o);const n=k().default.state.pivot,r=o[0];if(r)if(e.shiftKey)if(n===r){const n=(0,p().OL)({includeNonSelectableListContainer:!1}),i=(0,p().Xs)(r,n.children),{prev:l,parent:c}=e.altKey?(0,a().MY)(n,i):(0,a().zJ)(n,i);if(l){const e=l.value.store;z({environment:t,stores:s().KC(o,[e]),pivot:e,multiSelectBoundaryStore:e})}else if(c){const e=c.value.store;z({environment:t,stores:s().KC(o.filter((e=>!(0,a().uU)(c,(t=>t.store===e)))),[e]),pivot:e,multiSelectBoundaryStore:e})}}else E(e.environment);else{const o=(0,p().OL)({includeNonSelectableListContainer:!1}),n=(0,p().Xs)(r,o.children),{prev:i,parent:s}=e.altKey?(0,a().MY)(o,n):(0,a().zJ)(o,n);if(i){const e=i.value.store;z({environment:t,stores:[e],pivot:e,multiSelectBoundaryStore:e})}else if(s){const e=s.value.store;z({environment:t,stores:[e],pivot:e,multiSelectBoundaryStore:e})}else z({environment:t,stores:[r],pivot:r,multiSelectBoundaryStore:r})}else if(n)z({environment:t,stores:[n],multiSelectBoundaryStore:n});else{const e=R(),o=s().HV(e);o&&z({environment:t,stores:[o],pivot:o,multiSelectBoundaryStore:o})}Q(t)}function Q(e){const t=k().default.state.pivot||k().default.state.stores[0],o=v().T.findScrollToSelectableFromStore(t);o&&T().pb({environment:e,handle:o,vertical:{reveal:"top"},horizontal:o.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}function Z(e){const t=k().default.state.stores;L(t);const o=k().default.state.pivot;if(0!==t.length&&o)if((0,m().BN)(o)&&I().A.isOpen(o.id))z({environment:e,stores:[o],pivot:o,multiSelectBoundaryStore:o}),P().xT({blockId:o.id,state:!1,currentUserId:e.currentUser.id});else if((0,d().qr)(o))A().jG(o);else{const t=(0,p().OL)({includeNonSelectableListContainer:!1}),n=(0,p().Xs)(o,t.children),r=(0,a().dC)(n);if(r){const t=r.value.store;z({environment:e,stores:[t],pivot:t,multiSelectBoundaryStore:t})}else z({environment:e,stores:[o],pivot:o,multiSelectBoundaryStore:o})}else if(o)z({environment:e,stores:[o],multiSelectBoundaryStore:o});else{const t=R(),o=s().HV(t);o&&z({environment:e,stores:[o],pivot:o,multiSelectBoundaryStore:o})}Q(e)}function X(e){const{environment:t}=e,o=k().default.state.stores;L(o);const n=k().default.state.pivot,r=s().HV(o);if(r)if(e.shiftKey)if(n===r){const e=(0,p().OL)({includeNonSelectableListContainer:!1}),n=(0,p().Xs)(r,e.children),{next:i}=(0,a().Eq)(e,n);if(i){const e=i.value.store;z({environment:t,stores:s().KC(o,[e]),pivot:e,multiSelectBoundaryStore:e})}}else E(t);else{const o=(0,p().OL)({includeNonSelectableListContainer:!1}),n=(0,p().Xs)(r,o.children),{next:i}=e.altKey?(0,a().Eq)(o,n):(0,a().hi)(o,n);if(i){const e=i.value.store;z({environment:t,stores:[e],pivot:e,multiSelectBoundaryStore:e})}else z({environment:t,stores:[r],pivot:r,multiSelectBoundaryStore:r})}else if(n)z({environment:t,stores:[n],multiSelectBoundaryStore:n});else{const e=R()[0];e&&z({environment:t,stores:[e],pivot:e,multiSelectBoundaryStore:e})}J(t)}function J(e){const t=k().default.state.pivot||s().HV(k().default.state.stores);if(t){const o=v().T.findScrollToSelectableFromStore(t);o&&T().pb({environment:e,handle:o,vertical:{reveal:"bottom"},horizontal:o.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}}function ee(e){const t=k().default.state.stores;L(t);const o=k().default.state.pivot;if(0!==t.length&&o)if((0,m().BN)(o)&&!I().A.isOpen(o.id))z({environment:e,stores:[o],pivot:o,multiSelectBoundaryStore:o}),P().xT({blockId:o.id,state:!0,currentUserId:e.currentUser.id});else if((0,d().qr)(o))A().Uz(o);else{const t=(0,p().OL)({includeNonSelectableListContainer:!1}),n=(0,p().Xs)(o,t.children),r=(0,a().NU)(n);if(r){const t=r.value.store;z({environment:e,stores:[t],pivot:t,multiSelectBoundaryStore:t})}else z({environment:e,stores:[o],pivot:o,multiSelectBoundaryStore:o})}else if(o)z({environment:e,stores:[o],multiSelectBoundaryStore:o});else{const t=R()[0];t&&z({environment:e,stores:[t],pivot:t,multiSelectBoundaryStore:t})}J(e)}function te(e){const t=R();z({environment:e,stores:t,pivot:t[0]})}function oe(e){const t=R()[0];if(t){z({environment:e,stores:[t],pivot:t,multiSelectBoundaryStore:t});const o=v().T.findScrollToSelectableFromStore(t);o&&T().pb({environment:e,handle:o,vertical:{reveal:"top"},horizontal:o.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}}function ne(e){const t=R(),o=t[t.length-1];if(o){z({environment:e,stores:[o],pivot:o,multiSelectBoundaryStore:o});const t=v().T.findScrollToSelectableFromStore(o);t&&T().pb({environment:e,handle:t,vertical:{reveal:"bottom"},horizontal:t.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}}function re(){const e=performance.now(),t=new Map,o=new Map;v().T.forEach((e=>{const n=e.getNode();if(n&&n instanceof Element){const r=n.getBoundingClientRect();t.set(e,r),o.set(n,r)}}));const n=new Map;f().A.forEach((e=>{const t=e.getNode();t&&t instanceof Element&&n.set(e,t.getBoundingClientRect())}));const r=new Map;g().A.forEach((e=>{const t=e.getNode();t&&t instanceof Element&&r.set(e,t.getBoundingClientRect())})),w().default.setState({...w().default.state,selectableRectMap:t,selectableContainerRectMap:n,selectableElementRectMap:o,lastUpdate:e}),S().A.setState({...S().A.state,dropTargetRectMap:r})}const ie=s().nF(re,200)},778555:(e,t,o)=>{o.d(t,{R:()=>u,u:()=>p});o(898992),o(354520),o(581454);var n=()=>o(534177),r=()=>o(777447),i=()=>o(179034),a=()=>o(519831),s=()=>o(197959),l=()=>o(161479),c=()=>o(919709),d=()=>o(173979);function u(e){const{text:t,mapper:o,requester:n,resolveTemplateVariables:r,baseUrl:i,publicDomainName:a}=e;if(void 0!==t)return t.value.map((e=>p({token:{token:e,spaceId:t.spaceId},mapper:o,requester:n,resolveTemplateVariables:r,baseUrl:i,publicDomainName:a})))}function p(e){const{token:t,mapper:o,requester:u,resolveTemplateVariables:p,baseUrl:m,publicDomainName:g}=e;let f;const v=c().uPN(t.token).map((e=>{if(c().jIt(e)){const t=c().i$F(e);if(t){const e=o({requested:t,requester:u});if(e)return c().ld4(e.id,e.spaceId)}}if(c().sh$(e)){const t=c().cQR(e),n=(0,r().lX)({url:t,baseUrl:m,publicDomainName:g});if(n){const e=o({requested:{table:i().ev,id:n,spaceId:(0,l().e)(void 0)},requester:u});if(e)return c().Sez((0,r().wv)({pageId:e.id}))}}if(c().N53(e)){const t=c().T$c(e);if(t){const e=o({requested:{table:i().ev,id:t,spaceId:(0,l().e)(void 0)},requester:u});if(e)return c().bMp(e.id)}}if(c().iQL(e)){const n=c().Orm(e),r=o({requested:{table:s().$Y,id:n,spaceId:t.spaceId},requester:u});if(r)return c().aQj(r.id)}if(c().go0(e)&&p){const t=d().KC(e,p);if(t&&c().rie(t)&&p){const e=c().NcG(t);if(e===p.currentUserId){if(f)return;f=e}}return t}if(c().rie(e)&&p){const t=c().NcG(e);if(t===p.currentUserId){if(f)return;f=t}}if(c().iz3(e)){const t=c().GCe(e);if((0,c()._Nw)(t)||!t.collection)return e;const n=o({requester:u,requested:t.collection});if((null==n?void 0:n.table)!==a().Vl)return e;const r=t.property;return c().ESw({collection:n,property:r})}return e})).filter(n().O9);return c().Ey_(c().N8A(t.token),v)}},779795:(e,t,o)=>{o.d(t,{$W:()=>s,cP:()=>l,p_:()=>c});o(16280),o(581454);var n=()=>o(984380),r=()=>o(449412),i=()=>o(449506),a=()=>o(981046);async function s(e){const{environment:t,spaceId:o}=e;if("init"!==a().A.state.status)return;a().A.didStartLoading();const s=await i().callApi({eventName:"listPrices",environment:t,data:{spaceId:o,countryCode:undefined}});if("success"!==s.type)return void a().A.resetExceptSelectedCurrencyCode();const l=s.data.prices;l&&0!==l.length||r().Fg(new Error("Received empty price list")),a().A.setPrices(l.map((e=>new(n().gm)(e))),s.data.preferredDefaultCurrency)}function l(e){a().A.availableCurrencyCodes.includes(e)&&a().A.update((t=>({...t,selectedCurrencyCode:e})))}async function c(e){let{environment:t,spaceId:o}=e;return await s({environment:t,spaceId:o}),a().A.state.prices}},780262:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{}const r=new n},780865:(e,t,o)=>{o.d(t,{Er:()=>H,Fj:()=>U,HA:()=>z,J3:()=>x,RH:()=>j,SC:()=>C,Uc:()=>D,Yq:()=>T,Zd:()=>L,a9:()=>R,eV:()=>E,fz:()=>K,kZ:()=>q,lO:()=>V,mj:()=>F,pV:()=>G,rp:()=>W,tX:()=>B,ug:()=>A,yu:()=>O,z7:()=>I});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454),o(737550);var n=()=>o(597777),r=()=>o(869190),i=()=>o(604995),a=()=>o(416504),s=()=>o(179034),l=()=>o(245241),c=()=>o(496603),d=()=>o(449506),u=()=>o(351360),p=()=>o(508496),m=()=>o(41161),g=()=>o(38337),f=()=>o(211716),v=()=>o(108944),h=()=>o(731320),_=()=>o(825972),b=()=>o(836251),y=()=>o(355012);function S(e){return Boolean(e&&e.length>0)}function w(e){return Boolean(e.starting||e.ending)}function k(e){return Boolean(e)}const I={requireEditPermissions:k,isDeletedOnly:k,excludeTemplates:k,navigableBlockContentOnly:k,ancestors:S,parentId:function(e){return void 0!==e},createdBy:S,editedBy:S,verificationOwners:S,lastEditedTime:w,createdTime:w,isAdminModeDeletedPageSearch:k,blockTypes:function(e){return Boolean(e&&e.length>0)},inTeams:function(e){return S(l().fg(e))},includePublicPagesWithoutExplicitAccess:k,audience:function(e){return Boolean(e)},dev_excludedPages:S,dev_excludedTeams:S,databaseType:S,adminContentSearchDeletionStatus:S,isOfflineOnly:k};function A(e){return e?{requireEditPermissions:I.requireEditPermissions(e.requireEditPermissions),isDeletedOnly:I.isDeletedOnly(e.isDeletedOnly),excludeTemplates:I.excludeTemplates(e.excludeTemplates),navigableBlockContentOnly:I.navigableBlockContentOnly(e.navigableBlockContentOnly),ancestors:I.ancestors(e.ancestors),parentId:I.parentId(e.parentId),createdBy:I.createdBy(e.createdBy),editedBy:I.editedBy(e.editedBy),createdTime:I.createdTime(e.createdTime),lastEditedTime:I.lastEditedTime(e.lastEditedTime),blockTypes:I.blockTypes(e.blockTypes),inTeams:I.inTeams(e.inTeams),dev_excludedPages:I.dev_excludedPages(e.dev_excludedPages),dev_excludedTeams:I.dev_excludedTeams(e.dev_excludedTeams),verificationOwners:I.verificationOwners(e.verificationOwners),isOfflineOnly:I.isOfflineOnly(e.isOfflineOnly)}:{requireEditPermissions:!1,isDeletedOnly:!1,excludeTemplates:!1,navigableBlockContentOnly:!1,ancestors:!1,parentId:!1,createdBy:!1,editedBy:!1,createdTime:!1,lastEditedTime:!1,blockTypes:!1,inTeams:!1,dev_excludedPages:!1,dev_excludedTeams:!1,verificationOwners:!1,isOfflineOnly:!1}}function x(e){const t=A(e);return Object.values(t).some((e=>Boolean(e)))}function C(e){const t=A(e),{navigableBlockContentOnly:o,...n}=t;return Object.values(n).some((e=>Boolean(e)))}function T(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n().vz;const a=i().C6.notionDateToLuxon(e,{locale:t.locale});return(0,r().vP)(a,o)}function M(e,t){const o=i().C6.notionDateTimeToLuxon(e,t.locale);return(0,r().eV)({value:o,preset:"medium_with_time"})}const P=(0,o(959013).YK)({startAndEnd:{defaultMessage:"{startDate} - {endDate}",id:"searchHelpers.betweenStartAndEndDates"},afterStart:{defaultMessage:"After {startDate}",id:"searchHelpers.afterStartDate"},beforeEnd:{defaultMessage:"Before {endDate}",id:"searchHelpers.beforeEndDate"}});function B(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n().vz,r="",i="";return e.starting&&(r="date"===e.starting.type?T(e.starting,t,o):M(e.starting,t)),e.ending&&(i="date"===e.ending.type?T(e.ending,t,o):M(e.ending,t)),r&&i?t.formatMessage(P.startAndEnd,{startDate:r,endDate:i}):r?t.formatMessage(P.afterStart,{startDate:r}):t.formatMessage(P.beforeEnd,{endDate:i})}function R(e){return Boolean(e.target&&e.target instanceof HTMLElement&&e.target.classList.contains("rdp-day"))}function E(e){const{environment:t,input:o,spaceId:n,publicAccessPermissionAncestorBlockId:r,searchSessionId:i,searchSessionFlowNumber:a,source:s,forcedClusterPattern:c,searchExperimentOverrides:d,recentPagesForBoosting:u,forcedBlockIds:p,excludedBlockIds:m}=e,{query:g,limit:f,debug:v}=o;return(0,b().w6)(t)||!n?r?{type:l().Vz.BlocksInAncestor,query:g.text.trim(),ancestorId:r,filters:g.filters,sort:g.sort,limit:f,source:s||"quick_find_public",debug:v,searchExperimentOverrides:d,searchSessionId:i,searchSessionFlowNumber:a,forcedClusterPattern:c,forcedBlockIds:p,excludedBlockIds:m}:void 0:{type:l().Vz.BlocksInSpace,query:g.text.trim(),spaceId:n,limit:f,filters:g.filters,sort:g.sort,source:s||"quick_find",debug:v,searchExperimentOverrides:d,searchSessionId:i,searchSessionFlowNumber:a,forcedClusterPattern:c,recentPagesForBoosting:(0,_().cs)(u),forcedBlockIds:p,excludedBlockIds:m}}function D(e){const{environment:t}=e,o=E(e);return!!o&&d().callApi({eventName:"search",environment:t,data:o})}class N{constructor(e){this.startingTimestamp=void 0,this.endingTimestamp=void 0,this.startingTimestamp=e.starting&&i().ln(e.starting,(0,a().P)()),this.endingTimestamp=e.ending&&i().ln(e.ending,(0,a().P)())}matches(e){return void 0!==e&&(!(void 0!==this.startingTimestamp&&e<this.startingTimestamp)&&!(void 0!==this.endingTimestamp&&e>this.endingTimestamp))}}class L{constructor(e){this.filters=void 0,this.activeFilters=void 0,this.ancestorFilterIds=void 0,this.parentFilterId=void 0,this.createdTimeMatcher=void 0,this.lastEditedTimeMatcher=void 0,this.teamFilterIds=void 0,this.dev_notInTeamFilterIds=void 0,this.dev_notInPagesFilterIds=void 0,this.filters=e,this.activeFilters=A(e),this.ancestorFilterIds=new Set(e.ancestors),this.parentFilterId=e.parentId,this.createdTimeMatcher=new N(e.createdTime),this.lastEditedTimeMatcher=new N(e.lastEditedTime),this.teamFilterIds=new Set(l().fg(e.inTeams)??[]),this.dev_notInTeamFilterIds=new Set(e.dev_excludedTeams),this.dev_notInPagesFilterIds=new Set(e.dev_excludedPages)}matches(e){let{blockModel:t,blockStore:n,path:r,source:i}=e;if(!Boolean(this.activeFilters.isDeletedOnly)!==t.alive)return!1;if(this.activeFilters.excludeTemplates&&t.is_template)return!1;if(this.activeFilters.isOfflineOnly){if(!(0,o(540758).B)(t.id))return!1}else if(1===i.size&&i.has("offlinePage"))return!1;if(this.activeFilters.editedBy){const e=t.last_edited_by_id||t.last_edited_by;if(!e||!this.filters.editedBy.includes(e))return!1}if(this.activeFilters.createdBy){const e=t.created_by_id||t.created_by;if(!e||!this.filters.createdBy.includes(e))return!1}if(this.activeFilters.ancestors&&!r.some((e=>{let{value:t}=e;return this.ancestorFilterIds.has(t.id)})))return!1;if(this.activeFilters.parentId){if(r.length<2)return!1;const[e,{value:{id:t}}]=r;return this.parentFilterId===t}if(this.activeFilters.lastEditedTime&&!this.lastEditedTimeMatcher.matches(t.last_edited_time))return!1;if(this.activeFilters.createdTime&&!this.createdTimeMatcher.matches(t.created_time))return!1;if(this.activeFilters.inTeams){var a;const e=v().um(r),t=null==e||null===(a=e.value)||void 0===a?void 0:a.id;if(!t||!this.teamFilterIds.has(t))return!1}if(this.activeFilters.blockTypes){const e=this.filters.blockTypes;if(!e)return!0;if(!e.includes(t.type))return!1}if(this.activeFilters.verificationOwners){if(!n)return!1;const{verificationOwners:e}=(0,o(470928).h4)({blockStore:n});if(!e.some((e=>(this.filters.verificationOwners||[]).includes(e.id))))return!1}return!0}}function F(e){if(e&&!e.error)return e.value}function U(e){let{sort:t,unsorted:o,batchSize:n,currentUserId:r}=e;const i=Date.now();if("relevance"!==t.field)return o;const{currentSpaceStore:a}=u().default.state,s=a&&a.id;if(r&&s&&"search_frecency_store"===p().default.getGroup("search_local_ranking_new_frecency_and_score")){const e=e=>{const t="number"==typeof e.score?e.score:1,o=(0,y().Wt)({spaceId:s,userId:r,pageId:e.id,now:i,weightForVisit:f().fp})??1;e.frecencyScore=o;const n=e.personalizationBoost??1;return-1*t*Math.max(o,n)};return c().Ul(o,e)}const l=c().iv(o,n).map((e=>m().A.sortFrecencyHighToLow({items:e,now:i,currentUserId:r,recordFrecency:!0})));return c().Bq(l)}function O(e){const{localResults:t,serverResults:o}=e;if(t||o){if(t&&o){const e=new Set(t.map((e=>e.id)));return t.map((e=>{const t=(n=e.id,null==o?void 0:o.find((e=>e.id===n)));var n;const r=(null==(i=t)?void 0:i.originalPosition)??e.originalPosition;var i;const a=[...new Set([...e.badges??[],...(null==t?void 0:t.badges)??[]])];return{...e,originalPosition:r,serverEventProperties:(null==t?void 0:t.serverEventProperties)??e.serverEventProperties,sources:[...e.sources,...(s=t,(null==s?void 0:s.sources)??[])],badges:a};var s})).concat(o.filter((t=>!e.has(t.id))))}return t??o}}function V(e){var t,o;const{searchResultStore:n}=e,r=O({localResults:null===(t=n.state.localResults)||void 0===t?void 0:t.results,serverResults:null===(o=n.state.serverResults)||void 0===o?void 0:o.results}),i=n.state.focusedIndex,a=null==i?void 0:i.global,s=null==i?void 0:i.local;if(void 0===a||void 0===s)return;const l=[...n.state.fixedActionResults??[],...n.state.queryBasedActionResults??[]],c=a<l.length?l[a]:void 0;if(c)return c;const d=a-l.length;if(!r||r.length<=0||d<0)return;const u=r[d];return u?{type:"page_result",value:{index:{global:a,local:s},selectedResult:u}}:void 0}function j(e){const{existingResults:t,newPageResults:o}=e;if(void 0!==t||void 0!==o){if(t&&o){const e=[...t.results],n=new Set(t.results.map((e=>e.id)));return e.push(...o.results.filter((e=>!(e.sources.includes(l().Ni.ElasticsearchRandom)&&e.originalPosition<t.results.length)&&!n.has(e.id)))),{...o,results:e,total:o.total}}return t??o}}function z(e){const{intentBasedGrouping:t,localResults:o,serverResults:n}=e,r=O({localResults:o,serverResults:n})??[],i=r.filter((e=>e.sources.includes(l().Ni.ElasticsearchUniqueID))),a=r.filter((e=>!e.sources.includes(l().Ni.ElasticsearchUniqueID)));return t?{type:"intent-based-grouping",sections:{uniqueIdSearchResults:i,jumpBackInSearchResults:a.filter((e=>e.sources.includes(l().Ni.Local))),serverOnlySearchResults:a.filter((e=>!e.sources.includes(l().Ni.Local)))},allSearchResults:r}:i.length>0?{type:"unique-id",sections:{uniqueIdSearchResults:i,nonUniqueIdSearchResults:a},allSearchResults:r}:{type:"all",sections:{allSearchResults:r},allSearchResults:r}}function q(e,t){const o=e.device.isMobile?2:5;return t.slice(0,o)}function H(e){const{mainEditorCurrentBlockStore:t}=u().default.state,o=t&&h().qb(e,t);return{hasPublicAccessPermission:Boolean(o),publicAccessPermissionAncestorBlockId:(null==o?void 0:o.from.table)===s().ev?null==o?void 0:o.from.blockId:void 0}}function W(e){let{environment:t,searchResultsSection:o,modalBodyMenu:n,searchFilterMenu:r,actionItemCount:i}=e;if(!o)return 0;let a=0;if(t.device.isMobile){if(n instanceof Element&&null!==r){const e=n.getElementsByClassName(g().Smt)[0];e instanceof Element&&(a=e.clientHeight-r.getClientHeight()+e.scrollTop)}}else a=o.getBoundingClientRect().height+o.scrollTop;let s=0,l=0;const c=o.getElementsByClassName(g().J5z);for(let u=0;u<c.length;u++){l+=c[u].clientHeight}const d=o.getElementsByClassName(g().LF7);for(let u=0;u<d.length;u++){const e=d[u];if(!(a-l>e.clientHeight/2))break;s+=1,l+=e.clientHeight}return s-i}function K(e){if(void 0===e)return[];return e.map((e=>({id:e.id,score:e.score,localSource:e.localSource,sources:e.sources,spaceId:e.spaceId})))}function G(e){var t;if(void 0!==(null==e?void 0:e.highlightBlockId)&&void 0===(null===(t=e.highlight)||void 0===t?void 0:t.title))return e.highlightBlockId}},780942:(e,t,o)=>{o.d(t,{T:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{suggestions:{}}}}const r=new n},781286:(e,t,o)=>{o.d(t,{J6:()=>c,PA:()=>u,Uc:()=>d,hv:()=>l});var n=()=>o(896628),r=()=>o(606952),i=()=>o(317909),a=()=>o(129522),s=()=>o(958163);function l(e){const{store:t}=e,o=t.getImageHyperlink()||"",n="placeholder"!==o?o:void 0,r=a().K.getRect(t);s().A.setState({open:!0,url:"",type:"image",selectionRect:r,store:t,imageHyperlink:n,focusLinkInput:!0,trapFocus:!0})}function c(){s().A.setState({open:!1,type:"image"})}function d(e){const{url:t,transaction:o}=e,i=s().A.state;if(!i.open)return;const a=r().bS(t);n().zA({stores:[i.store],update:{image_hyperlink:a},transaction:o}),s().A.setState({...i,imageHyperlink:a,url:""})}function u(e){const t=s().A.state;t.open&&(i().createAndCommit({userAction:"imageHyperlink.unlinkImage",environment:e,canUndo:!0,perform:e=>{n().zA({stores:[t.store],update:{image_hyperlink:null},transaction:e})}}),s().A.reset())}},783793:(e,t,o)=>{o.d(t,{U:()=>u,o:()=>d});o(296540);var n=()=>o(401497),r=()=>o(366295),i=()=>o(959013),a=()=>o(100622),s=()=>o(278589),l=()=>o(200424),c=o(474848);function d(e){const{variant:t,imgSource:o,style:r,shadowVariant:i="strong",wrapStyle:a}=e,d=e.wrapWithPadding??!0,u=(0,n().IS)((e=>{const o=(0,s().N)(t);return{faceImgWrap:{width:o,height:o,borderRadius:"100%",background:e.assistantCornerButtonBackground,..."strong"===i&&{boxShadow:e.shadowMD},..."light"===i&&{borderRadius:"50%",boxShadow:e.shadowSM},overflow:"hidden",...a},faceImg:{height:o,width:o,...d&&{pointerEvents:"none"},...r}}}),[t,i,a,d,r]),p=(0,c.jsx)("img",{style:u.faceImg,src:o??l(),alt:"Notion AI face"});return d?(0,c.jsx)("div",{style:{cursor:"pointer"},children:(0,c.jsx)("div",{style:u.faceImgWrap,children:p})}):p}function u(){const e=(0,n().IS)((e=>({faceIcon:{height:16,width:16,fill:a().Ay.white},spacer:{marginLeft:4},wrapper:{display:"flex",alignItems:"center",cursor:"pointer"}})),[]);return(0,c.jsxs)("div",{style:e.wrapper,children:[(0,r().L)(e.faceIcon),(0,c.jsx)("div",{style:e.spacer,children:(0,c.jsx)(i().sA,{defaultMessage:"Ask AI",id:"EmbedBlockActions.AskAI"})})]})}},783848:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},785082:(e,t,o)=>{o.d(t,{PX:()=>r,eR:()=>i,i4:()=>n});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);const n="etClient",r="render_duration",i=(new Set(["destinations","emergencyThrottlePercentage","amplitudeOptions","datadogOptions","snowflakeOptions","statsigOptions","customerIoOptions"]),o(638681).literals("connected_apps_settings","compliance_connected_apps_settings","external_object_instance_block","external_object_instance_inline_popup","external_object_instance_block_error_dropdown","placeholder_root_external_collection_view_block","connected_relation_property_menu","source_picker_connect_another_account","integration_gallery","collection_settings_property_type","integration_file_picker","send_to_notion","unfurl","messages_tab","install_redirect","all_updates","notifications_and_settings","collection_view_settings","share_menu","space_settings","workspace_connections_redirect","import_settings"),["reply_menu_mentions_comments","reply_menu_archive","reply_menu_all_updates","updates_menu_mentions_comments","updates_menu_archive","updates_menu_all_updates"]),a=["platform","deviceType","device_os","is_mobile_beta","desktopArch"],s=["app_version","mobile_app_version","desktop_app_version","desktopOsVersion","desktopElectronVersion","mobileNativeSystemVersion","mobileNativeAppVersion","is_experimental_build"]},786074:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{edits:[],hoveredEditId:void 0}}getHoveredEdit(){if(this.state.hoveredEditId)return o(947983).A.getEditById(this.state.hoveredEditId)}}const r=new n,i=r;(0,o(604341).exposeDebugValue)("AssistantHoverStore",r)},786508:(e,t,o)=>{o.d(t,{Pq:()=>r,RS:()=>i});o(898992),o(354520),o(581454);var n=()=>o(534177);function r(e){switch(e){case"ai_fifty_percent":return"ai_fifty_percent_upgrade";case"resurrection_offer":case"team_three_months":case"team_annual":case"business_annual":case"business_three_months":case"enterprise_three_months":case"enterprise_annual":case"lic_50":case"lic_25":case"new_year_2025":return e;default:(0,n().HB)(e)}}function i(e){const t=null==e?void 0:e.campaign;switch(t){case"team_three_months":case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"enterprise_annual":case"resurrection_offer":case"lic_25":case"lic_50":case"new_year_2025":return t;case"ai_fifty_percent_upgrade":case"ai_fifty_percent_downgrade":return"ai_fifty_percent";case"default":return}}},786601:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{surface:"default",position:"sidebar",query:void 0,isOpen:!1,isNewElectronTab:!1,openedTimeMs:void 0,sessionId:void 0,previousTextSelection:void 0}}closeAndResetMetricsState(){this.update((e=>({...e,isOpen:!1,openedTimeMs:void 0,sessionId:void 0})))}}const r=new n},787172:(e,t,o)=>{o.d(t,{s:()=>s});var n=()=>o(388821),r=()=>o(989423),i=()=>o(508496),a=()=>o(666144);function s(e){const{environment:t,eventName:o,response:s,userId:l,inMemoryRecordCache:c}=e;if(s&&s.recordMap){const e=n().RecordMapWithRole.create(s.recordMap);if(i().default.checkGate({gateName:"record_map_logging"})){const{num_records:n,num_cached_records:i,num_stale_records:s}=a().b4(t,e);r().u4({environment:t,event:{eventName:"client_record_map_stats",eventProperties:{api_name:o,num_records:n,num_cached_records:i,num_stale_records:s}}})}"syncRecordValues"!==o&&"syncRecordValuesSpace"!==o&&"syncRecordValuesMain"!==o&&"syncRecordValuesSpaceInitial"!==o&&"syncRecordValuesSpaceFanout"!==o&&a()._O({environment:t,userId:l,inMemoryRecordCache:c||t.defaultRecordCache.inMemoryRecordCache,recordMap:e,maybeStaleRecordMap:"loadCachedPageChunk"===o||"loadCachedPageChunks"===o||"loadCachedPageChunkV2"===o||"loadPageChunkV2ForOfflineSync"===o,debugSource:"handleRecordMapForResponse"})}}},787812:(e,t,o)=>{o.d(t,{i:()=>r});var n=()=>o(921598);function r(e,t){return`group-${e}-${(0,n().Ix)(t)}`}},789200:(e,t,o)=>{o.d(t,{V:()=>f,g:()=>v});o(898992),o(803949);var n=()=>o(634201),r=()=>o(179034),i=()=>o(919709),a=()=>o(220719),s=()=>o(518736),l=()=>o(962845),c=()=>o(969197),d=()=>o(792002),u=()=>o(630116),p=()=>o(808207),m=()=>o(725614),g=()=>o(66788);function f(e){const{environment:t,multiSelection:o,annotationKey:n,transaction:r}=e;(0,l().$W)(o).forEach((e=>{let{store:o,selection:i}=e;v({environment:t,store:o,annotationKey:n,selection:i,transaction:r,updateSelection:!1})}))}function v(e){const{environment:t,store:o,selection:l,annotationKey:f,transaction:v,updateSelection:h}=e,_=o.getValue();if(!_)return;const b=i().gwU({textValue:_,selection:l,annotationKey:f}),y=o.isTable(r().ev)&&(0,c().T)(o)||o.getRecordStoreAtRootPath();y instanceof u().Bv&&s().Le({store:o,blockStore:y})?function(e){const{blockStore:t,selection:o,annotationKey:r,transaction:s,fullTextValue:l}=e;(0,a().MX)(t.useCrdt(),"Expected CRDT block");const c=t.getBlockTitleStore().getValue(),u=i().xbM(c,o);if((0,d().gE)(u))return;const m=(0,a().o9)(t.getBlockTitleTextSliceTree()),g=new(n().Z4)(i().qAZ(c)),{startIndex:f,endIndex:v}=g.getInclusiveStringRangeForSelection(u),{operations:h,invertedOperations:_}=m.getOperationsForRemoveAnnotation(f,v,r);p().d({transaction:s,store:t,crdtOperations:h,invertedOperations:_,fullTextValue:l})}({blockStore:y,selection:l,annotationKey:f,transaction:v,fullTextValue:b}):(g().Tm({environment:t,store:o,value:b,transaction:v}),g().Xt({environment:t,store:o,oldTextValue:_,newTextValue:b,transaction:v,rootStore:y,removeInlineRecords:!0})),h&&m().setSelection({store:o,selection:l})}},789550:(e,t,o)=>{o.d(t,{R:()=>i,t:()=>r});const n=(0,o(446943).C)({displayName:"ScrollerContext",legacyContextKey:"scrollerContext",modernContextDefaultValue:void 0}),r=n.Provider,i=n.context},792002:(e,t,o)=>{o.d(t,{B1:()=>M,Bv:()=>ae,D9:()=>oe,DX:()=>R,Do:()=>ne,EH:()=>Y,GZ:()=>V,H4:()=>K,I6:()=>E,IX:()=>N,J3:()=>G,Jd:()=>ee,LG:()=>O,NG:()=>j,O7:()=>J,SL:()=>A,X4:()=>ie,Yl:()=>I,aO:()=>z,aR:()=>L,gE:()=>x,hH:()=>T,iY:()=>Q,iu:()=>X,j_:()=>te,lS:()=>Z,lr:()=>q,mk:()=>F,oT:()=>D,s6:()=>U,ts:()=>re,x7:()=>P,y1:()=>H,y_:()=>B});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454),o(737550);var n=()=>o(507707),r=()=>o(319954),i=()=>o(700500),a=()=>o(634201),s=()=>o(179034),l=()=>o(919709),c=()=>o(708830),d=()=>o(220719),u=()=>o(496603),p=()=>o(534177),m=()=>o(301421),g=()=>o(695625),f=()=>o(397248),v=()=>o(77246),h=()=>o(666710),_=()=>o(502438),b=()=>o(24157),y=()=>o(231722),S=()=>o(962845),w=()=>o(20313);const k="data-text-edit-side";function I(e){return{[k]:e}}function A(e){if(e instanceof HTMLElement){const t=e.closest(`[${k}]`),o=null==t?void 0:t.getAttribute(k);if("start"===o||"end"===o)return o}}function x(e){return e.startIndex===e.endIndex}function C(e){const{startIndex:t}=e;let o;return o=x(e)?[t-1]:function(e){return u().y1(e.startIndex,e.endIndex)}(e),o}function T(e,t){const o=l().RQ(t);if(1===e.length&&-1===e[0]){const e=o[0];return e?[l().uPN(e).filter(l().gqr)]:[]}const n=o.map((e=>a().PE(l().N8A(e))));return e.map((e=>{let t=0;const r=n.findIndex((o=>(t+=o.length,t>e))),i=o[r];return i?l().uPN(i):[]}))}function M(e){if("editing"===b().default.state.mode)return function(e,t,o){const n=l().kJl(e),r=P(n,t,o);for(const i of n){const e=r[i];if(e)return e}}(e,b().default.state.multiSelection,b().default.state.forceExtendAnnotations)}function P(e,t,o){const n={};if(0===e.length)return n;if((0,y().kM)(t)){for(const t of e){const e=o[(0,l().RNO)(t)];if(null!=e&&e.extend){const o=e.annotation;n[t]=o}}return n}const r=new Set(e);let i=!0;const a=(0,S().$W)(t);for(const{store:s,selection:c}of a){const e=s.getValue(),t=l().xbM(e,c),{tokensInsideRange:o}=l().AI5(e,t.startIndex,t.endIndex);for(const a of o){const e=l().uPN(a);for(const t of r){const o=e.find((e=>l().Aux(e)===t));if(i&&o)(0,d().MX)(void 0===n[t],"Duplicate annotation type"),n[t]=o;else if(o);else if(delete n[t],r.delete(t),0===r.size)return n}i=!1}}return n}function B(e){const t=b().default.state;if("editing"!==t.mode)return!1;const{multiSelection:o}=t;if((0,y().kM)(o))return!1;const n=(0,S().$W)(o);for(const{store:r,selection:i}of n){const t=r.getValue();if(!t)continue;const o=l().RQ(t);let n=0;for(const r of o){const t=a().PE(l().N8A(r));if(n>=i.startIndex&&n<i.endIndex||n<i.startIndex&&n+t.length>i.startIndex){if(l().uPN(r).some((t=>l()._XS(t)===e)))return!0}n+=t.length}}return!1}function R(e,t,o){const n=C(e),i=t.getValue()||[];return function(e,t,o,n){const i=new(r().r),a=e[0]||[];for(const r of a)if(!l().iGj(r))if("suggest"===n)if(l().SZO(r)){const e=D(t,o.endIndex,l()._XS(r));l().ZRT(r)&&!e?i.add([l().Ifu.SuggestionInsertText,l().vu(r)]):i.add(r)}else l().UZu(r)||l().i8$(r)?D(t,o.startIndex,l()._XS(r))&&i.add(r):(0,p().HB)(r);else if(!n||"default"===n||(0,v().Or)(n)||"ai_co_editing"===n)if(l().gqr(r))i.add(r);else if(l().VS2(r)||l().rPg(r)){const e=l()._XS(r);!l().oxd(e)&&D(t,o.startIndex,e)&&i.add(r)}else(0,p().HB)(r);else(0,p().HB)(n);return i}(T(n,i),i,e,o)}function E(e){const t=b().default.state;if("editing"!==t.mode)return new(r().r);const{multiSelection:o,forceExtendAnnotations:n}=t,i=(0,S().$W)(o);if(0===i.length)return new(r().r);const{store:a,selection:s}=i[0],c=a.getValue(),d=c?l().AhH(c):0,p=R(s.endIndex===1/0?{startIndex:s.startIndex,endIndex:d}:s,a,e);return u().uk(n,((e,t)=>{e&&(e.extend?p.add(e.annotation):p.remove(e.annotation))})),p}function D(e,t,o){return Boolean(N(e,t,o))}function N(e,t,o){return L(e,t).find((e=>l()._XS(e)===o))}function L(e,t){const o=l().ANx(e,t);return l().uPN(o)??[]}function F(e){const t=U(e);if(t)return{startIndex:0,endIndex:t.endIndex}}function U(e){const t=m().n.findEditableWithStore(e);var o,n;if(t)return null===(o=(n=t.props).getEndSelection)||void 0===o?void 0:o.call(n);const r=l().qAZ(e.getValue());return{startIndex:r.length,endIndex:r.length}}function O(e,t){return e.store===t&&0===e.index}function V(e,t){return!e&&!t||e&&t&&(e.startIndex===t.startIndex||!e.startIndex&&!t.startIndex)&&(e.endIndex===t.endIndex||!e.endIndex&&!t.endIndex)}function j(e,t){return V(t,U(e))}function z(e,t){var o;return e.store===t&&e.index===(null===(o=U(t))||void 0===o?void 0:o.endIndex)}function q(){const e=_().default.getCurrentDefaultContainer();return m().n.getMembersByDOMOrder({filter:t=>{const o=t.getContextClosestSelectable();if(!o)return!1;const n=o.getContextSelectableContainer();return n&&n===e}})}function H(e){const t=e.getNode(),o=t?_().default.getDefaultContainerFromTarget(t):_().default.getCurrentDefaultContainer();return m().n.getMembersByDOMOrder({filter:e=>{const t=e.getContextClosestSelectable();if(!t)return!1;const n=t.getContextSelectableContainer();return n&&n===o}})}function W(e){return q().filter((e=>!e.props.disabled)).map((e=>e.props.store))}function K(e){const t=W(),o=t.indexOf(e);return-1===o?null:t[o-1]}function G(e){const t=W(),o=t.indexOf(e);return-1===o?null:t[o+1]}function $(e){const t=[];for(const o of e){const e=u().SL(t,(e=>{const t=e[0];return f().Wi(o.rect,t.rect)}));e>=0?t[e].push(o):t.push([o])}return t}function Y(e,t,o){const{selectableRectMap:r}=h().default.state,i=o?_().default.getDefaultContainerFromTarget(o):void 0,a=_().default.getCurrentDefaultContainer(),s=i||a,l=g().T.getMembersByDOMOrder({filter:e=>e.props.canSelect&&e.props.canEditText&&e.getContextSelectableContainer()===s}),c=[];for(const n of l){const e=r.get(n);e&&c.push({selectable:n,rect:e})}const d=c.filter((e=>{let{rect:o}=e;return o.top<=t}));d.reverse();const p=$(d).map((e=>e.sort(((e,t)=>-1*(0,n().A)(e.selectable.getNode(),t.selectable.getNode())))[0])),m=u().wq(p,(t=>{let{rect:o}=t;return Math.min(Math.abs(o.left-e),Math.abs(o.right-e))}));if(m)return m;const f=$(c.filter((e=>e.rect.bottom>=t&&d.indexOf(e)<0))).map((e=>e.sort(((e,t)=>(0,n().A)(e.selectable.getNode(),t.selectable.getNode())))[0])),v=u().wq(f,(t=>{let{rect:o}=t;return Math.min(Math.abs(o.left-e),Math.abs(o.right-e))}));return v||void 0}function Q(e,t){const{selectableRectMap:o}=h().default.state,n=g().T.getMembersByDOMOrder({filter:e=>e.getContextSelectableContainer()===t});for(let r=n.length-1;r>=0;r--){const t=o.get(n[r]);if(t&&t.bottom>e)return!1}return!0}function Z(e,t){const o=(0,w().Ag)({includeNonSelectableListContainer:!0,container:t.getContextSelectableContainer()});if(!o)return!1;const n=u().HV((0,c().Qe)([o],(e=>e.value.component===t)));if(!n)return!1;const{selectableRectMap:r}=h().default.state;return!(0,c().uU)(n,(o=>{const n=o.component&&r.get(o.component);return!!(n&&e<=n.bottom&&o.component!==t)}))}function X(e,t,o){const n=e.getValue(),r=[],i=o?l().k4p(n):l().q4_(n),{startIndex:s,endIndex:c}=t,d=a().PE(i),p=u().di(d,0,s),m=u().Kl(p,(e=>"\n"===e));m>=0?r.push(m):r.push(0);for(let a=s;a<c;a++){"\n"===d[a]&&r.push(a)}return r}function J(e){const{multiSelection:t}=e;return(0,S().$W)(t).map((e=>{let{store:t,selection:o}=e;const n=l().RQ(t.getValue()),r=l().xbM(n,o),{tokensInsideRange:i}=l().AI5(n,r.startIndex,r.endIndex);return l().q4_(i)})).join("\n\n")}function ee(e){const t=b().default.state;return"empty"!==t.mode&&Boolean((0,S().xk)(t.multiSelection,e))}function te(e){const t=b().default.state;return"editing"===t.mode&&(t.multiSelection.start.store===e&&(t.multiSelection.end.store===e?"contains-selection":"contains-selection-start"))}function oe(e){const t=b().default.state;if("editing"!==t.mode)return!1;const{start:o,end:n}=t.multiSelection;return o.store===e||n.store===e}function ne(e){const t=b().default.state;if("empty"===t.mode)return;const o=(0,y().H7)(t.multiSelection);if(o)return o.store===e?{type:"contain",selection:l().xbM(e.getValue(),o.selection)}:void 0;const{start:n,end:r}=t.multiSelection;if(n.store===e){const t=l().qAZ(e.getValue()).length;return{type:"start",index:Math.min(n.index,t)}}if(r.store===e){const t=l().qAZ(e.getValue()).length;return{type:"end",index:Math.min(r.index,t)}}}function re(e){if(!(0,y().kM)(e))return!1;const{store:t,index:o}=e.start;return 0===o||"\n"===l().qAZ(t.getValue())[o-1]}function ie(){if("editing"!==b().default.state.mode)return!1;const e=(0,y().H7)(b().default.state.multiSelection);if(!e)return!1;if(!e.store.isTable(s().ev))return!1;if(0===_().default.state.stores.length)return!1;return e.store.getRecordStoreAtRootPath().getType()===i().xd.code&&(b().default.isEditingCaption()?"caption":"body")}function ae(e,t){const o=l().RQ(e);if(t<0||t>=o.length)return;let n=0;for(let r=0;r<o.length;r++){if(r===t)return{startIndex:n,endIndex:n+l().WWE(o[r])};n+=l().WWE(o[r])}}},792415:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{}}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state.publicPageData)))}}const r=new n},792540:(e,t,o)=>{o.d(t,{Jw:()=>S,M5:()=>I,OM:()=>x,Os:()=>y,wc:()=>A});o(944114),o(898992),o(354520),o(672577),o(430670),o(803949),o(581454);var n=()=>o(700500),r=()=>o(329199),i=()=>o(634201),a=()=>o(390066),s=()=>o(919709),l=()=>o(983650),c=()=>o(496603),d=()=>o(534177),u=()=>o(519839),p=()=>o(517223),m=()=>o(980914),g=()=>o(351360),f=()=>o(411671),v=()=>o(148832),h=()=>o(258836),_=()=>o(870092),b=()=>o(299545);const y={none:{type:"none"},block_match:{type:"block_match"}};function S(e){const{find:t,textValue:o,intl:n}=e,r=function(e){const{textValue:t,substring:o}=e;let n=0,r=0;const a=[];if(!t)return a;const l=(0,i().PE)(o.toLowerCase()),d=(0,s().DJ2)(t);return(0,s().RQ)(d).forEach((e=>{r=n+(0,s().WWE)(e);if(!((0,s().bHQ)(e)||(0,s().BEe)(e)))return void(n=r);const t=(0,s().N8A)(e).toString(),o=function(e){const{subsetArray:t,fullArray:o,offset:n=0}=e,r=[];for(let i=0;i<o.length&&!(t.length+i>o.length);i++){c().n4(c().di(o,i,i+t.length),t)&&r.push({startIndex:i+n,endIndex:i+t.length+n})}return r}({fullArray:(0,i().PE)(t.toLowerCase()),subsetArray:l,offset:n});a.push(...o),n=r})),a}({textValue:o,substring:t}).map((e=>({selection:e,allowReplace:!0}))),a=function(e){const{textValue:t,find:o,intl:n}=e,r=(0,s().$6U)(t),i=g().default.state.currentUserStore;if(0===r.length||!i)return[];const a=r.map((e=>{let t,{pointer:r,selection:a}=e;if("notion_user"===r.table)t=_().L.createChildStore(i,r);else{if("bot"!==r.table)return void r.table;t=h().v.createChildStore(i,r)}if(t.getDisplayName(n).toLowerCase().includes(o.toLowerCase()))return a}));return c().oE(a)}({textValue:o,intl:n,find:t}).map((e=>({selection:e,allowReplace:!1}))),u=(0,s().MbB)({textValue:o,find:t,intl:n}).map((e=>({selection:e,allowReplace:!1}))),p=function(e){const{find:t,textValue:o}=e,n=(0,s().JzQ)(o),r=g().default.state.currentSpaceStore;if(!r)return[];const i=n.map((e=>{let{pointer:o,selection:n}=e;const i=v().B.createChildStore(r,o);if((0,s().q4_)(i.getTitleValue()).substring(0,l().hS).toLowerCase().includes(t.toLowerCase()))return n}));return c().oE(i)}({textValue:o,find:t}).map((e=>({selection:e,allowReplace:!1}))),m=function(e){const{find:t,textValue:o}=e,n=(0,s().b$b)(o);if(!g().default.state.currentSpaceStore||0===n.length||0===t.length)return[];const r=n.map((e=>{let{metadata:o,selection:n}=e;const r=Object.values(o).filter(d().O9);if(Boolean(r.find((e=>e.toLowerCase().includes(t.toLowerCase())))))return n}));return c().oE(r)}({textValue:o,find:t}).map((e=>({selection:e,allowReplace:!1})));return[...r,...a,...p,...u,...m].sort(((e,t)=>e.selection.startIndex-t.selection.startIndex))}function w(e){const{block:t,find:o,intl:n}=e;if("table_row"!==t.getType())return[];const r=t.getParentBlockStore(),i=[],a=t.getProperties(),s=r?(0,m().$O)(r):Object.keys(a);return null==s||s.forEach((e=>{const r=a[e];if(!r)return;const s=S({find:o,intl:n,textValue:r}).map((o=>({allowReplace:o.allowReplace,selection:o.selection,blockStore:t,type:"simple_table_cell",propertyId:e})));s.length>0&&i.push(...s)})),i}function k(e){const{find:t,childBlocks:o,intl:i}=e;if(!o||0===t.length)return[];const a=[];for(const l of o){const e=l.getType(),o=l.getFormat();if(!e)continue;const p=(0,n().Db)(e,o)||(0,n().z9)(e);if(!(p||"table_row"===e||"collection_view"===e))continue;const m=l.getProperties(),{title:g,caption:f,description:v}=m;if("table_row"===e){const e=c().oE(w({block:l,find:t,intl:i}));e&&a.push(...e)}else if(p){const e={title:g,caption:f,description:v};(0,d().WP)(e).forEach((e=>{let[o,n]=e;if(!n)return;const r={type:"block",blockId:l.id,propertyType:o,blockStore:l},s=S({textValue:n,find:t,intl:i}).map((e=>({...e,...r,allowReplace:!l.isNavigableBlock()&&e.allowReplace})));a.push(...s)}))}else if("collection_view"===e){var s;const e=(0,u().UH)(l);if(!e)continue;const o=e.collectionViewStore();if(!o)continue;const n=o.getType();if(!n)continue;const d=o.getFormat(),p=e.normalizedSchemaStore.state,g=Object.keys(p).filter((e=>{var t,o;return"text"===(null===(t=p[e])||void 0===t?void 0:t.type)||"title"===(null===(o=p[e])||void 0===o?void 0:o.type)})),f=c().sb((0,r().Fg)(d,n,p));if(!f)continue;const v=f.filter((e=>g.includes(e))),h={};((null===(s=o.getCollectionStore())||void 0===s?void 0:s.getFormat().property_visibility)??[]).forEach((e=>{const t=e.property;if(!v.includes(t))return;const o="show"===e.visibility||"hide_if_empty"===e.visibility&&Boolean(null==m?void 0:m[t]);h[t]=o}));e.groupsStore.state.forEach((e=>{const n=e.resultsStore.state.flatMap((e=>{const n=e.getPropertiesStore().getValue();if(!n)return[];return v.flatMap((r=>{const a=n[r];if(!a)return[];return S({textValue:a,intl:i,find:t}).map((t=>({propertyId:r,selection:t.selection,allowReplace:!1,type:"page_property_value",inlineCollectionId:l.id,inlineCollectionViewId:o.id,blockStore:e,visible:Boolean(h[r]),isMatchInLayoutPageDetails:!1,isPropertyInGroup:!1})))}))}));a.push(...c().sb(n))}))}}return a}function I(e){const{match:t,pageStore:o,environment:n}=e;if(!t.allowReplace||!o)return!1;const{blockStore:r}=t,i=r.canEdit(),a=o.isLocked(),s=f().A.getMode(n,o),l=!s.hasPublicPermission||s.hasPublicPermission&&"edit"===s.permission;return!(!i||a||!l)}function A(e){return!!e&&("block"===e.type||"comment"===e.type||"simple_table_cell"===e.type||"page_property_value"===e.type)}function x(e){var t;const{find:o,pageDetails:n,intl:r}=e,i=n.store,s=i.getAssociatedCollectionStore(),l=null==s?void 0:s.getLayoutStore(),c=null==l?void 0:l.getViewsModuleCollectionViewBlockStore(),d=(0,u().UH)(c),m=Boolean(c),g=m&&Boolean("page"===(null==d||null===(t=d.collectionViewStore())||void 0===t?void 0:t.getType())),f=k({find:o,childBlocks:[i],intl:r}),v=function(e){var t;const{find:o,pageStore:n,intl:r,skipModuleContent:i}=e,s=n.getAssociatedCollectionStore();if(0===o.length||!s)return[];const l=n.getProperties(),c=(null===(t=n.getAssociatedCollectionStore())||void 0===t?void 0:t.getFormat().property_visibility)??[],d=n.getSchema(),u=(0,a().I)({schema:d,propertyFormats:c,titleProperty:"disallow"}),m={};c.forEach((e=>{const t=e.property,o="show"===e.visibility||"hide_if_empty"===e.visibility&&Boolean(null==l?void 0:l[t]);m[t]=o}));const g=[],f=null==s?void 0:s.getLayoutStore();return u.forEach(((e,t)=>{var a,s;let{property:c}=e;const u=null===(a=d[c])||void 0===a?void 0:a.name.toLowerCase(),v=null==u?void 0:u.includes(o.toLowerCase()),{isPropertyInPageDetails:h,isPropertyInGroup:_,isPropertyInMainPage:b}=f?(0,p().Hc)({layoutStore:f,propertyId:c}):{isPropertyInPageDetails:!1,isPropertyInGroup:!1,isPropertyInMainPage:!1};if(i&&!b&&!h)return;v&&g.push({type:"page_property_name",allowReplace:!1,propertyId:c,visible:m[c]??!0,isMatchInLayoutPageDetails:h,isPropertyInGroup:_});const y="text"===(null===(s=d[c])||void 0===s?void 0:s.type)?null==l?void 0:l[c]:void 0;if(!y)return;const w=S({textValue:y,find:o,intl:r}),k=n.getAssociatedCollectionId();k&&w.forEach((e=>{g.push({type:"page_property_value",inlineCollectionId:k,selection:e.selection,visible:m[c]??!0,propertyId:c,blockStore:n,allowReplace:!1,isMatchInLayoutPageDetails:h,isPropertyInGroup:_})}))})),g}({find:o,pageStore:i,intl:r,skipModuleContent:m&&!g}),h=!m||g?k({find:o,childBlocks:(0,b().zo)({blockStore:i,transclusionReferences:"recurseInto",childPages:"includeWithoutRecursion"}),intl:r}):[],_=function(e){const{pageStore:t,find:o,intl:n,includeContentComments:r,includePageComments:i}=e,a=[],s=[];if(0===o.length)return[];const l=(0,b().Bw)(t,{recursivelyLoadAllDiscussions:r,excludeSelf:!i});return(0,b().uy)(l).unresolved.forEach((e=>{a.push(...e.getCommentStores())})),a.forEach((e=>{const t=e.getText(),r=e.getParentBlockStore(),i=e.getParentId();t&&r&&i&&S({find:o,textValue:t,intl:n}).forEach((t=>s.push({type:"comment",selection:t.selection,commentId:e.id,allowReplace:!1,blockStore:r,discussionId:i})))})),s}({pageStore:i,find:o,intl:r,includePageComments:!m||g,includeContentComments:!m||g});return[...f,...v,..._,...h,...c?k({find:o,childBlocks:[c],intl:r}):[]].map((e=>({...e,view:n.view})))}},792609:(e,t,o)=>{o.d(t,{Y:()=>n});o(18107),o(967357),o(898992),o(823215);function n(e){let{blocks:t}=e;const o=t.at(0),n=null==o?void 0:o.getRecordStoreUIRoot();return!!n&&t.every((e=>n.uiContains(e)&&n.id!==e.id))}},793531:(e,t,o)=>{o.d(t,{IZ:()=>a,Tm:()=>i});var n=()=>o(645873);const r=new(n().O2)("slashMenu",(()=>Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(13035),o.e(92903)]).then(o.bind(o,311517)))),i=(0,n()._h)(r,(e=>e.SlashMenu)),a="suggested"},793765:(e,t,o)=>{o.d(t,{Ay:()=>g,E:()=>u,I5:()=>m,nS:()=>p});var n=()=>o(763884),r=()=>o(211134),i=()=>o(496603),a=()=>o(780054);const s="SearchDebugStorePersistenceKey";class l extends(()=>o(757695))().default{setState(e){super.setState(e),function(e){let{newState:t,key:o}=e;n().A.set({userId:"global",key:o,value:t})}({newState:e,key:this.getPersistenceKey()})}setStateWithoutPersisting(e){super.setState(e)}reloadFromDisk(){const e=n().A.get({userId:"global",key:this.getPersistenceKey()});super.setState({...this.getInitialState(),...e})}}class c extends l{constructor(e){super(),this.column=void 0,this.getPersistenceKey=()=>`${s}:${this.column}`,this.updateForcedClusterPattern=e=>{this.setState({...this.state,forcedClusterPattern:e})},this.updateForcedBlockIds=e=>{this.setState({...this.state,forcedBlockIds:e})},this.column=e}getInitialState(){return{forcedClusterPattern:void 0,forcedBlockIds:void 0,searchExperimentOverrides:{},visible:!0}}hasDebugOverrides(){return!i().Im(this.state.forcedClusterPattern)||!i().Im(this.state.searchExperimentOverrides)||!i().Im(this.state.forcedBlockIds)}}const d=new class extends l{constructor(){super(...arguments),this.getPersistenceKey=()=>s}getInitialState(){return{showDebugInfo:!1,debug:void 0}}getDebugLevel(){return this.state.debug??(this.state.showDebugInfo?"explain":void 0)}},u=new c("left"),p=new c("right");function m(e){let{device:t}=e;return(0,r().PF)(a().A)&&!t.isMobile&&(u.hasDebugOverrides()||p.hasDebugOverrides()||u.state.forcedClusterPattern||p.state.forcedClusterPattern)&&p.state.visible}const g=d},794959:(e,t,o)=>{o.d(t,{F:()=>M});o(898992),o(908872),o(296540);var n=()=>o(484714),r=()=>o(56366),i=()=>o(401497),a=()=>o(148307),s=()=>o(919709),l=()=>o(534177),c=()=>o(604917),d=()=>o(849839),u=()=>o(441265),p=()=>o(870571),m=()=>o(596514),g=()=>o(854672),f=()=>o(816559),v=()=>o(710149),h=()=>o(895007),_=()=>o(405789),b=()=>o(269429),y=()=>o(196310),S=()=>o(993553),w=()=>o(687519),k=()=>o(718725),I=()=>o(178298),A=()=>o(697868),x=()=>o(289068),C=o(474848);let T;function M(e){const{store:t,restrictedBlockIds:o,tableRenderMode:n}=e,r=t.getType();if(r){if(!T||o){const e={text:k().A,encrypted_text:k().A,page:b().A,collection_view_page:c().A,bulleted_list:p().A,numbered_list:_().A,toggle:A().Ay,quote:y().A,to_do:I().A,header:h().A,sub_header:S().A,sub_sub_header:w().A,callout:m().A,transclusion_container:x().SM,transclusion_reference:x().CF,alias:u().oA},t=(0,l().uv)({abstract:!0,audio:!0,code:!0,codepen:!0,deepnote:!0,drive:!0,equation:!0,excalidraw:!0,figma:!0,file:!0,framer:!0,gist:!0,hex:!0,invision:!0,loom:!0,maps:!0,miro:!0,mixpanel:!0,pdf:!0,replit:!0,sketch:!0,tweet:!0,typeform:!0,video:!0,whimsical:!0}),r=Object.keys(t).reduce(((e,t)=>(e[t]=P,e)),{}),i={collection_view:R,table:"image"===n?R:B(o)};T={...e,...r,...i,copy_indicator:void 0,personal_home_page:void 0,button:void 0,image:void 0,link_to_page:void 0,link_to_collection:void 0,table_row:void 0,external_object_instance_page:void 0,external_object_instance:void 0,bookmark:void 0,table_of_contents:void 0,tab:void 0,column_list:void 0,column:void 0,embed:void 0,drawing:void 0,slide:void 0,divider:void 0,breadcrumb:void 0,factory:void 0,ai_block:void 0,form:void 0,post:void 0,workflow:void 0,transcription:void 0,person_profile:void 0}}return T[r]}}function P(e){let{store:t}=e;const[o,n]=(0,r().K8)((()=>{var e;const o=t.getType(),n=null===(e=t.getTitleStore())||void 0===e?void 0:e.getValue();return[o,s().q4_(n)]}),[t]),l=(0,i().IS)((e=>({card:{display:"flex",padding:10,borderRadius:6,boxShadow:e.inputBoxShadow,marginBottom:6,gap:10},shimmer:{backgroundColor:e.largeShimmerColor,width:150,borderRadius:6}})),[]),c=function(e){const t=e&&E[e];if("string"==typeof t)return t;return a().A.images.icons.unknownTypePng}(o);return(0,C.jsxs)("div",{style:l.card,children:[(0,C.jsx)(g().A,{type:"image_url",imageURL:c,size:25,imageStyle:{marginLeft:4,marginRight:4}}),n.length>0?(0,C.jsx)("span",{children:n}):(0,C.jsx)(v().A,{emphasized:!0,style:l.shimmer})]})}function B(e){return t=>{let{store:o,...n}=t;const{tableStore:i,isPartialTable:a}=(0,r().K8)((()=>{if(o.isType("table"))return{tableStore:o,isPartialTable:!1};const e=o.getParentBlockStore();return e&&e.isType("table")?{tableStore:e,isPartialTable:!0}:{tableStore:void 0,isPartialTable:!1}}),[o]);return i?(0,C.jsx)(d().K,{...n,store:i,showRowIds:a?e:void 0}):null}}function R(e){let{store:t}=e;const o=(0,n().v3)(),s="collection_view"===(0,r().K8)((()=>t.getType()),[t]),l=(0,i().IS)((e=>({image:{width:"100%",borderRadius:4,border:`1px solid ${e.lightDividerColor}`},container:{marginBottom:6}})),[]),c=(0,r().K8)((()=>"dark"===o.ThemeStore.state.mode),[o.ThemeStore]),d=c?a().A.images.blockRendererCovers.collectionTableDarkPng:a().A.images.blockRendererCovers.collectionTableLightPng,u=c?a().A.images.blockRendererCovers.plainTableDarkPng:a().A.images.blockRendererCovers.plainTableLightPng;return(0,C.jsx)("div",{style:l.container,children:(0,C.jsx)(f().Ay,{src:s?d:u,style:l.image})})}const E={equation:a().A.images.blocks.texPng,audio:a().A.images.blocks.audioPng,file:a().A.images.blocks.filePng,pdf:a().A.images.blocks.pdfPng,code:a().A.images.blocks.codePng,video:a().A.images.blocks.videoPng,abstract:a().A.images.blocks.abstractPng,codepen:a().A.images.blocks.codepenPng,deepnote:a().A.images.blocks.deepnotePng,drive:a().A.images.blocks.drivePng,excalidraw:a().A.images.blocks.excalidrawPng,figma:a().A.images.externalIntegrations.figmaIconPng,framer:a().A.images.blocks.framerPng,gist:a().A.images.blocks.githubPng,hex:a().A.images.blocks.hexPng,invision:a().A.images.blocks.invisionPng,loom:a().A.images.blocks.loomPng,maps:a().A.images.blocks.mapsPng,miro:a().A.images.blocks.miroPng,mixpanel:a().A.images.blocks.mixpanelPng,replit:a().A.images.blocks.replitPng,sketch:a().A.images.blocks.sketchPng,typeform:a().A.images.blocks.typeformPng,tweet:a().A.images.blocks.twitterPng,whimsical:a().A.images.blocks.whimsicalPng}},795179:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},795640:(e,t,o)=>{function n(e){const{key:t,overlayContainerStore:o}=e;o.state.overlays.has(t)||(o.state.overlays.add(t),o.emit())}function r(e){const{key:t,overlayContainerStore:o}=e;o.state.overlays.has(t)&&(o.state.overlays.delete(t),o.emit())}o.d(t,{T:()=>r,W:()=>n})},796073:(e,t,o)=>{o.d(t,{$:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("sync",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M27.93 13.81h-1.54c-.606-5.717-5.536-10.265-11.387-10.265-3.425 0-6.514 1.55-8.625 3.987-.427.483-.37 1.078.079 1.392.438.315.965.214 1.336-.202a9.57 9.57 0 017.21-3.268 9.503 9.503 0 019.456 8.356h-1.673c-.798 0-1 .539-.573 1.156l2.516 3.583c.359.516.898.528 1.269 0l2.504-3.572c.45-.628.236-1.167-.573-1.167zM2.064 16.202h1.55c.607 5.716 5.526 10.253 11.388 10.253 3.425 0 6.525-1.561 8.636-3.987.416-.483.36-1.09-.078-1.404-.438-.314-.977-.202-1.337.214-1.74 2.01-4.324 3.268-7.221 3.268a9.496 9.496 0 01-9.467-8.344H7.22c.798 0 1-.55.573-1.157l-2.516-3.583c-.359-.516-.898-.527-1.269 0l-2.515 3.572c-.438.617-.236 1.168.572 1.168z"})})},796249:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isOpen:!1}}}const r=new n},796621:(e,t,o)=>{o.d(t,{o:()=>n});const n=new(o(221844).A)({name:"DisabledInMemoryRecordCache"});n.freeze()},796756:(e,t,o)=>{o.d(t,{CM:()=>g,F5:()=>b,Fv:()=>I,Gk:()=>m,H$:()=>u,H1:()=>S,IA:()=>F,IY:()=>v,JE:()=>E,Lf:()=>x,N3:()=>B,PU:()=>p,Pz:()=>y,RZ:()=>C,_A:()=>A,bL:()=>w,bn:()=>d,eN:()=>h,gA:()=>_,jS:()=>N,rG:()=>f,rn:()=>M,tu:()=>R,u$:()=>L,ut:()=>P,vc:()=>k,xe:()=>D,xs:()=>T});o(898992),o(803949);var n=()=>o(116225),r=()=>o(989423),i=()=>o(680074),a=()=>o(875856),s=()=>o(351360),l=()=>o(508496),c=()=>o(337240);function d(e,t){r().vd(e,"onboarding_dialog_error",t),w(e,"onboarding_dialog_error",t)}function u(e,t){r().vd(e,"onboarding_error",t),w(e,"onboarding_error",t)}function p(e){const{hashed_user_id:t}=a().default.state;r().u4({environment:e,event:{eventName:"debug_meta_event_complete_registration",eventProperties:{hashed_user_id:t}}}),c().PU(e,t)}function m(e,t){if(r().vd(e,"onboarding_show",t),l().default.logEvent("onboarding_show",1,{...t}),t.is_new_onboarding){var o;const{currentUserSettingsStore:e}=s().default.getState();l().default.logEvent("sign_up_by_domain_type",null==e||null===(o=e.getSettings())||void 0===o?void 0:o.domain_type,{})}}function g(e,t){r().vd(e,"onboarding_share_link",t),w(e,"onboarding_share_link",t)}function f(e,t){r().vd(e,"onboarding_close",t),w(e,"onboarding_close",t)}function v(e,t){r().vd(e,"onboarding_skip",t),w(e,"onboarding_skip",t)}function h(e,t){r().vd(e,"onboarding_back",t),w(e,"onboarding_back",t)}function _(e,t){r().vd(e,"onboarding_invite_send",t),w(e,"onboarding_invite_send",t)}function b(e,t){r().vd(e,"onboarding_space_icon_upload",t),w(e,"onboarding_space_icon_upload",t)}function y(e,t){r().vd(e,"onboarding_stage",t),l().default.logEvent("onboarding_stage",1,{stage:t.stage,workspace_type:t.initial_workspace_type,is_new_onboarding:t.is_new_onboarding,device_type:e.device.deviceType})}function S(e,t,o){r().vd(e,"onboarding_stage_exit",{...t,back:o}),l().default.logEvent("onboarding_stage_exit",1,{stage:t.stage,workspace_type:t.initial_workspace_type,is_new_onboarding:t.is_new_onboarding,device_type:e.device.deviceType,back:o})}function w(e,t,o){r().vd(e,"onboarding_serverside",{...o,phase:t},{dontWait:!0})}function k(e,t){r().vd(e,"onboarding_join_space_click",t),l().default.logEvent("onboarding_join_space_click",t.joined_space_index,{...t})}function I(e,t){r().vd(e,"onboarding_create_space_click",t),l().default.logEvent("onboarding_create_space_click")}function A(e,t){r().vd(e,"onboarding_invite_click",t);const{invited_emails:o,...n}=t;l().default.logEvent("onboarding_invite_click",o.length,{...n})}function x(e,t){r().vd(e,"onboarding_invite_attempt",t)}function C(e,t){r().vd(e,"onboarding_upload_profile_photo",t)}function T(e,t){r().vd(e,"onboarding_join_space",t)}function M(e,t){const o="space_name"in t?(e=>{let{space_name:t,...o}=e;return o})(t):t;r().u4({environment:e,event:{eventName:"onboarding_create_space",eventProperties:o}})}function P(e,t){r().vd(e,"onboarding_plan_type_select",t),l().default.logEvent("onboarding_plan_type_select",t.planType,{...t})}function B(e,t){r().vd(e,"onboarding_persona_select",t),l().default.logEvent("onboarding_persona_select","persona",{...t})}function R(e,t){r().vd(e,"onboarding_persona_select",t),l().default.logEvent("onboarding_persona_select","role",{...t})}function E(e,t){r().vd(e,"onboarding_persona_select",t),l().default.logEvent("onboarding_persona_select","categories",{...t})}function D(e,t){r().vd(e,"onboarding_persona_select",t),l().default.logEvent("onboarding_persona_select","companySize",{...t})}function N(e,t){r().vd(e,"onboarding_persona_survey_action",{...t,action:t.action}),l().default.logEvent("onboarding_persona_survey_action",t.action,{}),l().default.logEvent(`onboarding_persona_survey_action_${t.action}`,t.plan_selection,{})}function L(e,t){r().vd(e,"onboarding_mobile_app_download_click",t),l().default.logEvent("onboarding_mobile_app_download_click")}function F(e,t){var o,a;const{currentUserSettingsStore:d,currentUserRootStore:u}=s().default.state;r().mt(e,{onboarding_complete:!0}),r().u4({environment:e,event:{eventName:"onboarding_complete",eventProperties:t}}),c().IA(e),l().default.logEvent("onboarding_complete",1,{domain_type:null==d||null===(o=d.getSettings())||void 0===o?void 0:o.domain_type,device_type:e.device.deviceType,is_new_onboarding:t.is_new_onboarding,is_professional_team_user:i().YD(),user_persona:t.user_persona,plan_type:t.plan_type,create_or_join:t.initial_workspace_type}),n().u4({name:"onboarding_complete"}),l().default.logEvent("onboarding_complete_by_plan_type",t.plan_type,{}),l().default.logEvent("onboarding_complete_by_device_type",e.device.deviceType,{}),l().default.logEvent("onboarding_complete_by_user_persona",t.user_persona,{}),l().default.logEvent("onboarding_complete_by_user_team_role",t.user_team_role,{}),t.user_use_cases&&t.user_use_cases.forEach((e=>{l().default.logEvent("onboarding_complete_by_user_use_case",e,{})})),t.user_categories&&t.user_categories.forEach((e=>{l().default.logEvent("onboarding_complete_by_user_category",e,{})})),l().default.logEvent("onboarding_complete_by_domain_type",null==d||null===(a=d.getSettings())||void 0===a?void 0:a.domain_type,{}),l().default.logEvent("onboarding_complete_by_create_or_join_space",t.initial_workspace_type,{}),l().default.logEvent("onboarding_complete_by_is_new_user_onboarding",t.is_new_onboarding.toString(),{}),l().default.logEvent("onboarding_complete_by_workspaces_count",(null==u?void 0:u.getSpaceViewStores().length)||0,{}),i().YD()&&l().default.logEvent("pro_team_onboarding_complete",1,{})}},797050:(e,t,o)=>{o.d(t,{L:()=>r});var n=()=>o(292588);const r={table:o(84520).mu,recordColumnTypes:{id:n().A.UUID,version:n().A.Number,last_version:n().A.Number,space_id:n().A.UUID,bookmarked_pages:n().A.StringArray,shared_pages:n().A.StringArray,shared_pages_manual_sort:n().A.StringArray,visited_templates:n().A.StringArray,sidebar_hidden_templates:n().A.StringArray,notify_mobile:n().A.Boolean,notify_desktop:n().A.Boolean,notify_email:n().A.Boolean,notify_email_always:n().A.Boolean,created_getting_started:n().A.Boolean,parent_id:n().A.UUID,parent_table:n().A.String,alive:n().A.Boolean,created_onboarding_templates:n().A.Boolean,private_pages:n().A.UUIDArray,joined:n().A.Boolean,joined_teams:n().A.UUIDArray,settings:n().A.JSON,ai_suggestions:n().A.JSON,assistant_session_starters:n().A.UUIDArray,sidebar_order:n().A.StringArray,first_joined_space_time:n().A.Number},metaColumnTypes:{meta_user_id:n().A.UUID,meta_role:n().A.String}}},797162:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}dismiss(){this.setState({...this.state,open:!1})}}const r=new n},797265:(e,t,o)=>{o.d(t,{Yf:()=>be,pG:()=>Se,x5:()=>Ae,iy:()=>_e,x7:()=>he,q3:()=>pe,t1:()=>ve,LE:()=>fe,mP:()=>Ie,AP:()=>ye,TF:()=>ce,ZL:()=>ge,Af:()=>me,um:()=>de,Ls:()=>ke,dL:()=>we,rW:()=>ue});o(16280),o(18107),o(944114),o(967357),o(898992),o(354520),o(672577),o(430670),o(803949),o(581454),o(737550);var n=()=>o(908006),r=()=>o(584262),i=()=>o(700500),a=()=>o(179034),s=()=>o(161479),l=()=>o(220719),c=()=>o(959013),d=()=>o(496603),u=()=>o(720665),p=()=>o(857783),m=()=>o(521358),g=()=>o(519839),f=()=>o(413962),v=()=>o(862292),h=()=>o(878377),_=()=>o(186445),b=()=>o(423804),y=()=>o(405417),S=()=>o(211716),w=()=>o(972435),k=()=>o(299545),I=()=>o(129522),A=()=>o(695625),x=()=>o(351360),C=()=>o(337567),T=()=>o(77246),M=()=>o(508496),P=()=>o(712505),B=()=>o(630116),R=()=>o(611371),E=(o(296540),()=>o(484714)),D=()=>o(620553),N=()=>o(317909),L=()=>o(7674),F=()=>o(554509),U=()=>o(107683),O=()=>o(49210),V=()=>o(991249),j=o(474848);function z(e){const{sizeRange:t,asyncModal:o}=e,n=(0,E().v3)(),r=(0,j.jsx)(L().YA,{iconAndTitle:(0,j.jsx)(L().ZQ,{iconGroup:D().t,title:(0,j.jsx)(c().sA,{id:"deleteBlocksModal.title",defaultMessage:"Delete content?"})}),description:(0,j.jsx)(c().sA,{id:"deleteBlocksModal.description",defaultMessage:"You can delete existing blocks but you won’t be able to add new content until you upgrade"})}),i=(0,j.jsx)(L().aO,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:(0,j.jsx)(c().sA,{id:"deleteBlocksModal.delete",defaultMessage:"Delete"}),onClick:()=>o.resolve("delete")}],secondaryButtons:[{buttonType:"secondary",label:(0,j.jsx)(F().D,{colorName:"primary",children:(0,j.jsx)(c().sA,{id:"deleteBlocksModal.upgrade",defaultMessage:"Upgrade plan"})}),onClick:()=>{V().K(n,{from:"delete_blocks_modal",upsell:{type:"product",product:"plus",limit:{type:"none"}}}),o.resolve("upgrade")}}]});return(0,j.jsx)(L().tf,{header:r,footer:i,sizeRange:t})}var q=()=>o(807778),H=()=>o(134217),W=()=>o(749240),K=()=>o(160568),G=()=>o(449506),$=()=>o(317001),Y=()=>o(60867),Q=()=>o(35622),Z=()=>o(722101),X=()=>o(44729),J=()=>o(661920),ee=()=>o(435009),te=()=>o(620689),oe=()=>o(778417),ne=()=>o(436572),re=()=>o(90302),ie=()=>o(725614),ae=()=>o(345913),se=()=>o(838256);const le=(0,c().YK)({deletePages:{id:"action.deletePages.snackBarMessage",defaultMessage:"Moved to Trash"}});function ce(e){var t,o;const{store:n,transaction:r}=e,i=A().T.findSelectablesFromStore(n).find((e=>Boolean(e.props.onRemove)));null==i||null===(t=(o=i.props).onRemove)||void 0===t||t.call(o,{transaction:r})}function de(e){const{blocks:t,transaction:o}=e;if(1===t.length){const e=t[0];e&&k().wm(e)&&ce({store:e,transaction:o})}}function ue(e){const t=A().T.findAllSelectablesFromIds(e.map((e=>e.id)));for(const o of t)o.getSelectableStore().setState({...o.getSelectableStore().state,showActionIsInFlight:!0})}function pe(e){const t=A().T.findAllSelectablesFromIds(e.map((e=>e.id)));for(const o of t)o.getSelectableStore().setState({...o.getSelectableStore().state,showActionIsInFlight:!1})}async function me(e){var t;const{environment:o,blocks:n,shouldCheckSuggestEdit:r,overrideRemoveBlockFunc:s,callback:c}=e,u=x().default.state.currentSpaceViewStore,p=Boolean(null==u||null===(t=u.getSettings())||void 0===t?void 0:t.seen_delete_blocks_modal),h=(0,R().EF)(o),_=null==u?void 0:u.getSpaceId(),S=W().subscriptionDataStoreInstance.state,k=await(_&&S?(0,H().$)(o,_,S):1);if((0,q().Km)(k)&&!h&&!p){const e=await async function(e){const t=x().default.state.currentSpaceViewStore;return await O().T.showAsyncModal((o=>(0,j.jsx)(U().s,{isOpen:o.isOpen,onDismiss:()=>{o.resolve("dismiss")},onClosed:()=>{t&&N().createAndCommit({userAction:"DeleteBlocksModal.showDeleteBlocksModal",environment:e,canUndo:!0,perform:e=>{N().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings"],command:"update",args:{...t.getSettings(),seen_delete_blocks_modal:!0}},transaction:e})}})},areaConstraint:{width:{type:"fixed",length:300}},render:e=>{let{sizeRange:t}=e;return(0,j.jsx)(z,{sizeRange:t,asyncModal:o})}})))}(o);if("delete"!==e)return void(null==c||c())}let A=n;if(n.length>0&&r){if("suggest"===T().Uv.getMode(n[0])){const e=n.filter((e=>(0,b()._1)({blockStore:e,currentUser:o.currentUser}))),t=await v().T.formulas.load();N().createAndCommit({userAction:"selectableBlockActions.removeBlocksWithMaybeConfirmation.suggestRemoveBlocks",environment:o,canUndo:!0,perform:r=>{f().d9({environment:o,transaction:r,blockStores:n.filter((t=>!e.includes(t)&&!(0,C().dL)(t)&&!(0,i().$I)((0,l().o9)(t.getType())))),formulasModule:t})}}),A=e}}let B=!0;const E=[];for(const i of A){const e=I().K.findBlockFromStore(i);if(e&&d().Tn(e.handleRemoveBlockFromComment)){if(await e.handleRemoveBlockFromComment())continue}else if(e&&d().Tn(e.canRemoveBlock)){const t=await e.canRemoveBlock();if(!t.canRemove)return void(null==c||c());B=t.canUndo}const t=await m().rW({environment:o,block:i,action:"delete"});if("user_canceled"===t)return void(null==c||c());t.length>1?E.push(...t):E.push(i)}if(0===E.length)return void(null==c||c());const D=E[0],L=(0,g().UH)(D)??(0,y().Ib)(D,o);if(L&&(0,y().QV)({collectionContextStore:L,blockStore:D})){if(!(await Y().vX({environment:o,blocks:E,canUndo:B})))return}else{const{serverCommitResult:e}=N().createAndCommit({userAction:"selectableBlockActions.removeBlocksWithMaybeConfirmation",environment:o,canUndo:B,perform:e=>{ge({environment:o,blocks:E.filter((e=>!(0,C().dL)(e))),transaction:e,overrideRemoveBlockFunc:s})}});await e}null==c||c();const{currentSpaceStore:F}=x().default.state,V=E.some((e=>e.isPageBlock()));if(F&&V){ne().rL({item:{label:w().A.formatMessage(le.deletePages)},undoFunc:()=>{for(const e of E)G().callApi({eventName:"restoreBlock",environment:o,data:{pointer:{table:a().ev,id:e.id,spaceId:e.pointer.spaceId||F.id}}})}});const e=x().default.state.currentUserSettingsStore;e&&ae().aR({experimentStore:M().default,currentSpaceStore:F,currentUserSettingsStore:e,intl:w().A.getIntl(),environment:o})}E.some((e=>{var t;return e.id===(null===(t=P().default.peekTargetStore.state)||void 0===t?void 0:t.id)}))&&J().VN({environment:o,from:void 0})}function ge(e){const{environment:t,blocks:o,transaction:n,preventClearSelection:r,overrideRemoveBlockFunc:a}=e,l=o[0],c=function(e){const t=A().T.getMembersByDOMOrder({filter:()=>!0}),o=d().SL(t,(t=>t.props.store===e)),n=t[o];if(!n)return;const r=n.getContextSelectableContainer(),i=d().di(t,0,o),a=d().Uk(i,(e=>e.props.canSelect&&e.getContextSelectableContainer()===r));if(a)return a.props.store;const s=d().di(t,o+1).find((e=>Boolean(e.props.canSelect&&e.getContextSelectableContainer()===r)));if(s)return s.props.store}(l);!function(e){const{environment:t,blockStore:o,entryPointName:n}=e,r=new(se().IK)({environment:t,userFlow:"user_flow_delete_block",entryPointName:n,timeoutMs:90*u().TD});if(r.isDisabled())return;const i=()=>{o.pathIsDead()&&r.succeed()};r.postFinishCallbacks.push((()=>{o.removeListener(i)})),o.addListener(i)}({environment:t,blockStore:l,entryPointName:n.getUserActionForAnalyticsPurposesOnly()||"selectableBlockActions.removeBlocks"});for(const i of o)a?a(i,n):ce({store:i,transaction:n});if(r||(oe().IU({environment:t}),oe().rN({pivot:c})),h().TeF({environment:t,blocks:o,publicEditMode:void 0})||h()._Ti({environment:t,blocks:o,publicEditMode:void 0})||h().P$I({environment:t,blocks:o,publicEditMode:void 0})||o.some((e=>{var t;return e.getType()===i().xd.transclusionContainer||(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.isPageTreeCollection())}))){n.postSubmitCallbacks.push((e=>{e||G().callApi({eventName:"deleteBlocks",environment:t,data:{blocks:o.map((e=>({id:e.id,spaceId:(0,s().e)(e.pointer.spaceId)}))),permanentlyDelete:!1}})}));for(const e of o){const{app_id:o,app_config_uri:r}=e.getFormat();o&&r&&K().KC(t,{block_id:e.id,app_id:o,app_config_uri:r}),X().s8({blockStore:e,transaction:n})}ee().VP({environment:t,blocks:o})}r||ie().clear({environment:t})}function fe(e){const{environment:t,blocksToInsert:o,target:n,transaction:r,replaceEmptyTextBlock:i,preventSetSelection:a}=e;let s=_().ZO();if(!s){const{route:e}=t.RouterStore.state;"chat"===e.name&&(s=n.at(0))}const l=s;if(!l)throw new Error("No root store.");let c;if(n.length>0){const e=n.at(-1);let a=e;if(Boolean(o.find((e=>e.isType("column_list"))))){const t=null==e?void 0:e.findRecordStoreUIAncestor((e=>e&&e instanceof B().Bv&&e.isType("column_list"))).ancestor;t&&t instanceof B().Bv&&(a=t)}const s=A().T.find((e=>e.props.store===a&&e.props.canInsertBelow&&e.props.onInsertBelow));if(s&&s.props.onInsertBelow)c=d().oE(s.props.onInsertBelow({insertStores:o,transaction:r})),i&&e&&e.isEmptyTextBlock()&&ge({environment:t,blocks:[e],transaction:r});else{c=d().o8(o).reverse().map((e=>Z().Hs({parentStore:l.getContentStore(),prependStore:e,transaction:r}).childStore))}}else if(l.isCollectionView()){const e=I().K.findCollectionViewBlockFromStore(l);if(!e)throw new Error("No collection view found.");{const n=e.collectionContextStore,i=n.collectionStore();if(i)for(const e of o)(0,$().j)({environment:t,store:e,collectionStore:i,collectionContextStore:n,shouldCoerce:!0,groupsPointer:[],transaction:r});c=[]}}else{const e=l.getContentStore();c=o.map((t=>Z().BC({parentStore:e,appendStore:t,transaction:r}).childStore))}return Boolean(a)||(c=c.flatMap((e=>e.isType("column_list")?e.getContentStores().flatMap((e=>e.getContentStores())):[e])),oe().td({environment:t,stores:c})),c}function ve(e){const{environment:t,selection:o,transaction:n,preventSetSelection:r}=e,{blocks:i}=e,a=_().ZO();if(!a)throw new Error("No root store.");if(o.length>0){const e=o[0],a=A().T.find((t=>t.props.store===e&&t.props.canInsertAbove&&t.props.onInsertAbove));if(!a||!a.props.onInsertAbove)throw new Error("No Selectable found.");const s=a.props.onInsertAbove({insertStores:i,transaction:n});return Boolean(r)||oe().td({environment:t,stores:s}),s}{const e=a.getContentStore(),o=i.map((t=>Z().BC({parentStore:e,appendStore:t,transaction:n}).childStore));return Boolean(r)||oe().td({environment:t,stores:o}),o}}function he(e){const{blocks:t}=e,o=t[0];if(o){const t=A().T.findSelectableFromStore(o);t&&t.props.onEnter&&t.props.onEnter(e)}}function _e(e){const{blockStore:t,blockLocationOfTargetBlock:o,environment:n}=e,r=I().K.find((e=>"embed"===e.renderedType&&e.getBlockStore().id===t.id&&(!o||e.getBlockLocation()===o)));if(null!=r&&r.canRenderFullScreen()){const o=r.getFullScreenNodeRect();if(o){var i;const a=o.width/o.height;Q().o9({environment:n,renderFullScreenNode:r.renderFullScreenNode,fullScreenNodeRect:o,contentAspectRatio:a,blockStore:t}),null===(i=e.callback)||void 0===i||i.call(e)}}}function be(e){let t;e.blocks.find((e=>{const o=I().K.findBlockFromStoreWithMethod(e,"activate");return!!o&&(t=o,!0)})),t&&t.activate&&t.activate()}function ye(e){e.blocks.forEach((t=>{const o=t.getParentStore();o&&o.table===a().ev&&o.getType()===i().xd.tab&&re().cN({store:o,id:t.id,currentUserId:e.environment.currentUser.id})}))}function Se(e){const t=I().K.findBlockFromStoreWithMethod(e,"caption");if(!t)throw new Error(`Block ${e.id} with caption not found in registry`);t.caption()}function we(e,t){const o=d().oE(A().T.findSelectablesFromIds(t)).map((e=>e.props.store));oe().td({environment:e,stores:o})}function ke(e,t){const{blockId:o,animate:n,onSelect:r}=t;let i,s=!1;function l(t){if(s)return;s=!0,clearInterval(i),te().pb({environment:e,handle:t[0],vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:n});const o=t.map((e=>e.props.store));oe().td({environment:e,stores:o}),null==r||r(o[0])}let c=50;i=setInterval((()=>{if(c<=0)return void clearInterval(i);c--;const e=A().T.findScrollToSelectablesFromIds([o]);if(e[0])return void l(e);const t=x().default.state.currentSpaceStore;if(!t)return;const n=B().Bv.createChildStore(t,{id:o,table:a().ev}).getParentId();if(!n)return;const r=A().T.findSelectablesFromIds([n]);r[0]&&!r[0].props.store.isPageBlock()&&l(r)}),100)}function Ie(e){const{environment:t,blocks:o}=e,n=o[0].findRecordStoreUIAncestor((e=>e instanceof B().Bv&&e.isCollectionView())).ancestor;n&&p().uK({environment:t,store:n,visitType:S().ig.Link,pageVisitSource:r().y8.Expand})}function Ae(e){const{environment:t,insertedStores:o,isCreated:r}=e;r?n().default.afterNextFlush((()=>{const e=o[0];if(!e)return;const n=I().K.findBlockFromStoreWithMethod(e,"handleCreated");var r;n?null===(r=n.handleCreated)||void 0===r||r.call(n):(oe().Lt({environment:t,store:e}),oe().Zm(t))})):oe().td({environment:t,stores:o})}},797535:(e,t,o)=>{o.d(t,{I:()=>l});var n=()=>o(970013),r=()=>o(455348),i=()=>o(857639),a=()=>o(246826),s=()=>o(724456);function l(e){const{environment:t,collectionStore:o,update:l,transaction:c}=e,d=o.getSchema();l.schema&&(l.schema=n().q(l.schema)),l.deleted_schema&&(l.deleted_schema=n().q(l.deleted_schema));const u={...l};if(l.deleted_schema){const e=o.getDeletedSchema(),t=(0,r().dW)({schemas:[e,l.deleted_schema],prioritizeLooserLimitRule:!0});t.error?i().log({level:"error",from:"collectionViewActions",type:"updateCollection",error:t.error}):u.deleted_schema=t.value}a().zv({store:o,data:u,transaction:c}),l.schema&&(0,s().H)({environment:t,collectionStore:o,oldSchema:d,newSchema:l.schema,transaction:c})}},797573:(e,t,o)=>{o.d(t,{B:()=>i,o:()=>r});o(581454);var n=()=>o(402390);function r(e,t){return e.map((e=>i(e,t)))}function i(e,t){const{nameMessage:o,descriptionMessage:r,...i}=e,{rootId:a,previewRootId:s,spaceId:l}=function(e,t){const o=(0,n().H)(t);return e.sources[o]||e.sources[n().q]}(e,t);return{...i,id:o.id,rootId:a,previewRootId:s,name:t.formatMessage(o),spaceId:l,description:r?t.formatMessage(r):void 0}}},799089:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},799750:(e,t,o)=>{o.d(t,{N:()=>i,h:()=>a});var n=()=>o(989423),r=()=>o(406792);function i(e,t){n().vd(e,"image_uploaded",t)}function a(e,t){r().default.DO_NOT_USE_markLegacy("image_edit_load"),n().vd(e,"image_edit_open",t)}},799829:(e,t,o)=>{o.d(t,{EG:()=>d,GN:()=>m,cE:()=>v,e0:()=>u,n$:()=>c,qk:()=>f,wy:()=>g});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(803949),o(737550);var n=()=>o(128443),r=()=>o(636090),i=()=>o(289915),a=()=>o(970013);class s{constructor(e,t){this.variable=void 0,this.property=void 0,this.variable=e,this.property=t}getProperty(){return this.property}get(e){const t=this.getCombinatorFilter(e);if(t)return{type:"results",limit:1,filter:t}}getCombinatorFilter(e){const t=this.getPropertyFilter(e,this.variable);if(t)return{operator:"and",filters:[{property:this.property,filter:t}]}}getPropertyFilter(e,t){var o;const n=e[this.property];if(!n)return;return{operator:"status_is",value:{type:"is_option",value:null===(o=n.options)||void 0===o||null===(o=o.find((e=>e.id===t)))||void 0===o?void 0:o.value}}}}const l=(0,o(959013).YK)({current:{id:"database.filterValue.relationType.relativeSprintVariable.current",defaultMessage:"Current"},next:{id:"database.filterValue.relationType.relativeSprintVariable.next",defaultMessage:"Next"},last:{id:"database.filterValue.relationType.relativeSprintVariable.last",defaultMessage:"Last"}}),c={[r().av]:{current:{messageDescriptor:l.current,reducer:new s(n().Xk,n().Hx.StatusV2)},next:{messageDescriptor:l.next,reducer:new s(n().tO,n().Hx.StatusV2)},last:{messageDescriptor:l.last,reducer:new s(n().el,n().Hx.StatusV2)}}};function d(e,t){const{filter:o,property:n}=e;if(!(0,i().Pq)(o)||!(0,i().gc)(o))return!1;const r=t[n];if(!r||!(0,a().nC)(r))return!1;return(0,i().Rh)(o).some((e=>"relative"===e.type))}function u(e,t,o){if(!e)return!1;const n=t[o];return!!n&&p(e,o,n)}function p(e,t,o){return e===r().av&&t===n().Hx.StatusV2&&(0,a().DD)(o)}function m(e,t){return!!e&&u(t,e,n().Hx.StatusV2)}function g(e){const{appUri:t,collectionSchema:o}=e;return Boolean(t&&c[t]&&m(o,t))}function f(e,t){const o=e[n().Hx.StatusV2];if(!o||!p(t,n().Hx.StatusV2,o))return[];return Object.keys(c[t]).filter((e=>{var t;return null===(t=o.options)||void 0===t?void 0:t.find((t=>t.id===e))}))}function v(e,t){const o=Object.entries(t).find((t=>{let[o,n]=t;return e===n}));return o?o[0]:void 0}},799954:(e,t,o)=>{o.d(t,{nE:()=>a,xH:()=>i});var n=()=>o(100622),r=()=>o(284371);function i(e){return{color:n().Ay.defaultText,fill:"currentColor",lineHeight:1.5,fontFamily:r().vc(e).sans}}const a={paddingTop:3,paddingBottom:3,paddingLeft:2,paddingRight:2}},803074:(e,t,o)=>{o.d(t,{C4:()=>_,Nf:()=>y,qM:()=>b});o(16280),o(944114),o(898992),o(672577),o(581454);var n=()=>o(617871),r=()=>o(519831),i=()=>o(161479),a=()=>o(534177),s=()=>o(572088),l=()=>o(594794),c=()=>o(972435),d=()=>o(252833),u=()=>o(53137),p=()=>o(630116),m=()=>o(449506),g=()=>o(901389),f=()=>o(510683),v=()=>o(246826);const h=(0,o(959013).YK)({authError:{defaultMessage:"Auth failed. Please try again or contact Notion support.",id:"database.viewSettings.propertyTypeSection.connected.authFail"},mobileAdminError:{defaultMessage:"Ask your workspace admin to configure the GitHub (Workspace) app in settings to use this feature.",id:"database.viewSettings.propertyTypeSection.connected.mobileAdminError"},mobileError:{defaultMessage:"Please authorize this integration on the desktop app or a browser.",id:"database.viewSettings.propertyTypeSection.connected.mobileError"}});async function _(e,t,o,n){const r=e.device.isMobile,i=null==t?void 0:t.getSpaceStore();if(!i)return;const a=(0,s().jw)(o.id).length;if(r&&n&&!a){const e=c().A.formatMessage(h.mobileAdminError);throw g().f1(e),new Error(e)}if(r&&!n&&!a){const e=c().A.formatMessage(h.mobileError);throw g().f1(e),new Error(e)}if(!a&&n&&i.canAdmin()||!a&&!n)try{await f().Jq({environment:e,integration:o,spaceId:i.id,from:"collection_settings_property_type"})}catch(l){const e=c().A.formatMessage(h.authError);throw g().f1(e),new Error(e)}if(!(0,s().jw)(o.id).length){const e=c().A.formatMessage(h.authError);throw g().f1(e),new Error(e)}}function b(e){const{environment:t,pattern:o,integration:n,parentCollectionStore:s,transaction:c}=e;if(!o.connected_relation_properties)throw new Error("Cannot create a connected relation collection without properties");const u=new(p().md)(t,(0,l().zP)({environment:t,table:r().Vl,spaceId:s.pointer.spaceId})),m={};o.connected_relation_sub_schemas&&(0,a().WP)(o.connected_relation_sub_schemas).map((e=>{let[o,n]=e;const a=new(p().md)(t,(0,l().zP)({environment:t,table:r().Vl,spaceId:s.pointer.spaceId})),d={bot_id:void 0,external_object_id:void 0,uri:o,integration_id:void 0,is_placeholder:void 0,original_url:void 0,domain:void 0,external_schema:n,sync_state:void 0,pattern_name:void 0},g={id:a.id,version:0,space_id:(0,i().e)(s.pointer.spaceId),parent_table:r().Vl,parent_id:u.id,alive:!0,format:d,schema:{}};m[o]=a.id,v().zv({store:a,data:g,transaction:c})}));const g={id:u.id,version:0,space_id:(0,i().e)(s.pointer.spaceId),parent_table:r().Vl,parent_id:s.id,alive:!0,format:{attributes:[{id:"title",name:"title",type:"inline",format:{type:"title",section:"title"},values:[(0,d().Fe)({pattern:o,integration:n})]}],bot_id:void 0,external_object_id:void 0,uri:`notion://user-defined-collection/${n.id}/${o.name}`,integration_id:n.id,is_placeholder:void 0,original_url:void 0,domain:void 0,external_schema:o.connected_relation_properties,sync_state:void 0,pattern_name:o.name,related_external_object_uris_to_instance_ids:m},schema:{}};return v().zv({store:u,data:g,transaction:c}),u}async function y(e){const{environment:t,integrationId:o,connectedRelationPatternName:r,spaceId:i}=e,a=u().A.state;if(!a.loaded)return;const s=a.integrations.find((e=>e.id===o));if(!s)return;const l=s.name,c=r.replace(l??"","").trim().split(" ")[0];if(o!==n().mn){var d;if(!s.info.original_url_patterns)return;const e=s.info.original_url_patterns.find((e=>e.name===c));if(!e||null===(d=e.additional_types)||void 0===d||!d.connectedRelation)return;const t=[],o=null==e?void 0:e.connected_relation_properties;for(const n in o){const e=o[n];null!=e&&e.name&&null!=e&&e.type&&t.push({id:n,name:e.name,isSelected:!1,type:e.type,metadata:{name:e.name,label:e.name,type:e.type,custom:!1}})}return t}{var p;const e=u().A.bots.state.find((e=>e.integration_id===o));if(!e)return;const n=e.id,r=await m().callApi({eventName:"describeSalesforceObject",environment:t,data:{spaceId:i,objectName:c,botId:n}});if("success"!==(null==r?void 0:r.type))return;const a=null==r||null===(p=r.data)||void 0===p?void 0:p.properties;if(a){return a.map((e=>({id:"Name"===e.name?"title":e.name,name:e.label,isSelected:!1,type:e.type,metadata:e})))}}}},805025:(e,t,o)=>{o.d(t,{Iz:()=>s,Lh:()=>i,T3:()=>r});var n=()=>o(722872);const r=12,i=4;function a(e,t,o){return e?t?65:45:t?o?51:45:30}function s(e){const{environment:t,caption:o,inline:s,title:l,theme:c,style:d,loading:u,isDesktopLayout:p,menuContext:m,allowTextSelection:g,shouldRenderMobileRefresh:f}=e,{WindowSizeStore:v}=t,h=o&&!s,_=l&&h,b=!p&&(null==m?void 0:m.menuType)!==n().gu.Popup,y=(null==m?void 0:m.menuType)===n().gu.ActionSheet,S=b?r:i,w=u?{justifyContent:"center",paddingTop:"11px",paddingBottom:"11px"}:void 0;return{display:"flex",alignItems:"center",gap:p?8:0,lineHeight:"120%",width:"100%",userSelect:g?"auto":"none",minHeight:a(b,Boolean(_),Boolean(f)),fontSize:b?f?17:16:14,...h&&{paddingTop:f?0:S,paddingBottom:f?0:S},...b&&{background:c.popoverBackground,marginTop:1,borderBottom:`1px solid ${f?c.stroke.secondary:c.regularDividerColor}`,marginBottom:-1},...y&&{background:c.popoverBackground,boxShadow:`inset 0 -1px 0 ${c.regularDividerColor}`,marginBottom:0},paddingLeft:p?8:v.state.paddingLeftCSS,paddingRight:p?8:v.state.paddingRightCSS,...w,...d}}},807060:(e,t,o)=>{o.d(t,{q:()=>i});var n=()=>o(713998),r=()=>o(519839);function i(e,t){if(!t)return{property_type:void 0,collection_id:void 0,collection_view_id:void 0,view_type:void 0,collection_view_block_id:void 0};let o,i,a,s,l;const c=t.getAssociatedCollectionStore();if(c){var d,u;if(e){const t=(0,n()._g)({schema:c.getSchema(),property:e});o=null==t?void 0:t.type}i=c.id,l=null===(d=c.getParentBlockStore())||void 0===d?void 0:d.id;const p=null===(u=(0,r().UH)(t))||void 0===u?void 0:u.collectionViewStore();p?(a=null==p?void 0:p.id,s=null==p?void 0:p.getType()):s="page"}return{property_type:o,collection_id:i,collection_view_id:a,view_type:s,collection_view_block_id:l}}},807487:(e,t,o)=>{o.d(t,{VV:()=>s,_6:()=>i,_q:()=>a,ex:()=>r});o(16280),o(944114),o(898992),o(672577);var n=()=>o(326215);function r(e,t){return t?t.percent_off?{amount:e*t.percent_off/100,monthsRemaining:t.duration_in_months}:t.amount_off?{amount:t.amount_off}:{amount:0}:{amount:0}}function i(e){return"personal"!==e&&n().tX.find((t=>t===e))}const a=["kr_card","kakao_pay"];function s(e){const{currency:t,isKrCardFeatureGateEnabled:o}=e,n=["card","link"];return"USD"===t&&n.push("cashapp"),"EUR"===t&&n.push("sepa_debit"),"KRW"===t&&o&&n.push(...a),n}},807778:(e,t,o)=>{o.d(t,{AK:()=>E,Bh:()=>c,D$:()=>U,Ft:()=>v,GC:()=>S,Gy:()=>L,Ir:()=>x,JM:()=>h,Jq:()=>N,Km:()=>f,MH:()=>B,Mh:()=>m,OP:()=>F,PK:()=>g,Pe:()=>D,S$:()=>b,S7:()=>w,Sc:()=>P,Ug:()=>y,cB:()=>T,hG:()=>R,i4:()=>M,kh:()=>_,qp:()=>p,s:()=>C,tW:()=>k,vv:()=>I,xu:()=>A});var n=()=>o(130382),r=()=>o(979340),i=()=>o(351360),a=()=>o(508496),s=()=>o(749240),l=()=>o(10984);function c(){return Boolean("on"===a().default.getEligibleGroup({experimentId:"beam",defaultGroup:"control"}))}const d=3,u=-1;function p(){const{currentSpaceStore:e}=i().default.state,t=null==e?void 0:e.getSettings().reach_block_limit_time;return t?(0,n().Mn)(t):null}function m(e){const t=p();return null!==t&&(f(e)&&t<d)}function g(){const e=p();return null!==e&&d-e>0?d-e:u}function f(e){var t;const o=null===(t=i().default.state.currentSpaceStore)||void 0===t?void 0:t.id,n=s().subscriptionDataStoreInstance.state;return!(!o||!n)&&(1!==e&&(!!(0,l().dL)()&&"on"===a().default.getEligibleGroup({experimentId:"block_management",defaultGroup:"control"})))}function v(e,t){var o,n;if(e.device.isMobile)return!1;const c=s().subscriptionDataStoreInstance.state;if(!c)return!1;if(("subscribed_admin"===c.type||"unsubscribed_admin"===c.type)&&null!==(o=c.customerData)&&void 0!==o&&o.stripe&&Boolean(c.customerData.stripe.promo))return!1;if(!(null===(n=i().default.state.currentSpaceStore)||void 0===n?void 0:n.id))return!1;const d=t??(0,l().AI)();return!(!(0,r().jR)(d)||!Boolean("on"===a().default.getGroup("largesse")))}function h(){return Boolean(a().default.checkGate({gateName:"public_space_data_store_local_cache_disabled"}))}function _(){return Boolean(a().default.checkGate({gateName:"low_guest_limit"}))}function b(){return Boolean("on"===a().default.getGroup("mobile_web_subscriptions"))}function y(){return Boolean(a().default.checkGate({gateName:"native_invoice_payment"}))}function S(){return a().default.getEligibleGroup({experimentId:"lic",defaultGroup:"control"})}function w(){return Boolean(a().default.checkGate({gateName:"apply_offer_migration"}))}function k(){return Boolean("on"===a().default.getEligibleGroup({experimentId:"new_year_2025",defaultGroup:"control"}))}function I(){return Boolean(a().default.checkGate({gateName:"resurrection_offer"}))}function A(e){return!e.device.isMobile&&Boolean("on"===a().default.getEligibleGroup({experimentId:"settings_refresh_2025",defaultGroup:"control"}))}function x(){return Boolean(a().default.checkGate({gateName:"test_clocks"}))}function C(e){return!e.device.isMobile&&Boolean("on"===a().default.getEligibleGroup({experimentId:"mp_lairt",defaultGroup:"control"}))}function T(e,t){switch(e){case"perfmark":return function(e){return!e.mobileNative}(t);case"upwork":case"plus":case"business":return!0}}function M(e){return!e.device.isMobile&&Boolean("on"===a().default.getGroup("lairt"))}function P(){return"control"!==B()||Boolean(a().default.checkGate({gateName:"onboarding_trial_checkout_redesign"}))}function B(){return a().default.getGroup("onboarding_trial_offer_step")}function R(){return Boolean(a().default.checkGate({gateName:"advanced_security_in_enterprise"}))}function E(){return Boolean(a().default.checkGate({gateName:"people_tab_date_added_column"}))}function D(){return Boolean(a().default.checkGate({gateName:"post_upgrade_modal"}))}function N(e){return!e.device.isMobile&&Boolean(a().default.checkGate({gateName:"uncollectible_experience_enabled"}))}function L(e){return!e.device.isMobile&&Boolean(a().default.checkGate({gateName:"in_app_request_upgrades"}))}function F(){return Boolean(a().default.checkGate({gateName:"business_trials_2025"}))}function U(e){return!e.device.isMobile&&Boolean(a().default.checkGate({gateName:"add_today_button_to_db_calendar"}))}},808207:(e,t,o)=>{o.d(t,{d:()=>a});o(581454);var n=()=>o(439180),r=()=>o(317909),i=()=>o(496879);function a(e){const{transaction:t,store:o,crdtOperations:a,invertedOperations:s,fullTextValue:l}=e;r().applyCrdtTextOperations({transaction:t,store:o,operations:a.map((e=>(0,n().qA)({pointer:o.pointer,crdtOperation:e,fullTextValue:l}))),invertedOperations:s.map((e=>(0,i().c)({pointer:o.pointer,invertedCrdtOperation:e,previousTextValue:o.getBlockTitleStore().getValue()??[]})))})}},808237:(e,t,o)=>{o.d(t,{E:()=>i});var n=()=>o(700500),r=()=>o(630116);function i(e){return e.findRecordStoreUIAncestor((e=>e instanceof r().Bv&&e.getType()===n().xd.factory)).ancestor}},810519:(e,t,o)=>{o.d(t,{u:()=>i});var n=()=>o(989423),r=()=>o(186445);function i(e,t,o){if(!0===o)n().vd(e,"edit_block_property_60",t);else{const o=(0,r().s0)(),{property_type:i,collection_id:a,collection_view_id:s}=t;n().WU(e,"edit_block_property_60",`edit_block_property_60-${o||""}-${i||""}-${a||""}-${s||""}`,60,t)}}},810703:(e,t,o)=>{o.d(t,{lQ:()=>s,pw:()=>a,tj:()=>c});var n=()=>o(763884),r=()=>o(179034),i=()=>o(96689);async function a(e){let{currentUserId:t,spaceStore:o}=e;const r=n().A.get({userId:t,key:l(o.id)});return u(o,o.loadRecordModel,r)}function s(e){let{currentUserId:t,spaceId:o,value:r}=e;n().A.set({userId:t,key:l(o),value:r})}function l(e){return`quickAddParent3:${e}`}function c(e){let{currentUserId:t,spaceId:o,parent:r,databaseType:i}=e;n().A.set({userId:t,key:d(o,i),value:r})}function d(e,t){return`quickAddTypedParent:${e}:${t||"default"}`}async function u(e,t,o){let n;if(o)if("page"===o.type){await t({table:r().ev,id:o.id})&&(n=o)}else if("space"===o.type){await t({table:i().NX,id:o.id})&&(n=o)}return n||{type:"space-private-pages",spaceId:e.id}}},812072:(e,t,o)=>{o.d(t,{Hi:()=>I,J9:()=>b,ez:()=>h,ge:()=>k});o(944114);var n=o.n(o(845732)),r=()=>o(700500),i=()=>o(753514),a=()=>o(945778),s=()=>o(128713),l=()=>o(798880),c=()=>o(919709),d=()=>o(695608),u=()=>o(972435),p=()=>o(663038);const m=!1;function g(){if(m){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.log("completionMarkdownHelpers:",...t)}}function f(e,t){return(0,d().c6)(e,t).replace(/ /g,"")}function v(e,t){const{getRecordValue:o,intl:n}=t;let r;if(c().rie(e)){const t=c().NcG(e);r=`@${f(n,o({table:l().oo,id:t}))}`}else if(c().qsB(e)){r=c().K7D(e).start_date}return r&&g(`Transforming annotation for completion: ${r}`),r}function h(){let e=0,t=0;function o(o){e+=1,e>t&&(t=e);try{return s().N8(o)}finally{e-=1}}function n(){return":".repeat(t-e+2)}return{transformAnnotation:v,transformBlockMapping:{callout(e){var t;const{block:r,exportArgs:i}=e,l=s().Qw({block:r,exportArgs:i}),c=null===(t=r.format)||void 0===t?void 0:t.page_icon,d=(0,a().A)(c)?c:"",u=o(e),p=n();return{text:`${p} aside ${d}\n\n${l}`.trim(),breakLines:!0,children:u,suffix:p}},toggle(e){const{block:t,exportArgs:r}=e,i=s().Qw({block:t,exportArgs:r}),a=o(e),l=n();return{text:`${l} ▶ ${i}\n\n`.trim(),breakLines:!0,children:a,suffix:l}}}}}const _=(0,p().F)({unicode:()=>/@\p{Letter}+/gu,fallback:/@[A-Za-z]+/g});async function b(e,t,o){const n=e.matchAll(_),r=[];for(const i of n){const e=i[0].slice(1);if(void 0===o.get(e)){const n=async()=>{const n=await y(t,e);n?(g(`Found user result for mention "${e}": ${n.email}`),o.set(e,n)):(g(`Found no user result for mention "${e}".`),o.set(e,null))};r.push(n())}}await Promise.all(r)}async function y(e,t){const o=await e(t),n=u().A.getIntl();let r;for(const i of o){if(f(n,i)===t){if(r)return;r=i}}return r}function S(e){const{md:t,name:o,regex:n,createTokens:r}=e,{arrayReplaceAt:i}=t.utils;function a(e,t,i){let a=0;const s=[];if(e.replace(n,(function(n){const l=Array.from(arguments);let c=l.length-1;"string"!=typeof l[c]&&(c-=1);const d=l[c],u=l[c-1];if(u>0&&(0,p().D$)(d[u-1]))return"";if(u+n.length<d.length&&(0,p().D$)(d[u+n.length]))return"";const m=r(n,t);if(!m)return"";if(u>a){const t=new i("text","",0);t.content=e.slice(a,u),s.push(t)}for(const{type:e,attrs:t,tag:r,level:a,content:p}of m){const n=new i(e,"",0);if(t)for(const[e,o]of Object.entries(t))n.attrPush([e,o]);r&&(n.tag=r,n.markup=o),void 0!==a&&(n.level=a),p&&(n.content=p),s.push(n)}return a=u+n.length,""})),a<e.length){const t=new i("text","",0);t.content=e.slice(a),s.push(t)}return s}t.core.ruler.after("linkify",o,(e=>{let t=0;const o=e.tokens;for(let r=0;r<o.length;r++){const s=o[r].children;if("inline"===o[r].type&&s)for(let l=s.length-1;l>=0;l--){const c=s[l];"link_open"!==c.type&&"link_close"!==c.type||"auto"===c.info&&(t-=c.nesting),"text"===c.type&&0===t&&n.test(c.content)&&(o[r].children=i(s,l,a(c.content,c.level,e.Token)))}}return!0}))}function w(e){return t=>{!function(e){S({md:e,name:"date_mentions",regex:/20\d\d-\d\d-\d\d/g,createTokens:(e,t)=>[{type:"date_mention_open",tag:"time",attrs:{datetime:e,[i().lc.dateFormat]:"relative"},level:t+1},{type:"text",content:e},{type:"date_mention_close",tag:"/time",level:t}]})}(t),function(e,t){S({md:e,name:"user_mentions",regex:_,createTokens(e,o){const n=e.slice(1),r=t.get(n);if(r)return[{type:"user_mention_open",tag:"a",level:o+1,attrs:{[i().lc[c().Ifu.User]]:r.id}},{type:"text",content:e},{type:"user_mention_close",tag:"/a",level:o}]}})}(t,e),function(e){const t=/^aside\s+(.*)$/,o={validate:e=>Boolean(e.trim().match(t)),render(o,n){if(1===o[n].nesting){const s=o[n].info.trim().match(t);let l=(null==s?void 0:s[1])??"";(0,a().A)(l)||(l="");const c="gray_background",d=function(e,t){const o=[];for(const[n,r]of t)o.push(`${n}="${e.utils.escapeHtml(r)}"`);return o.join(" ")}(e,[[i().lc[r().xd.callout],""],[i().lc.calloutBackground,c],[i().lc.calloutIcon,l]]);return`<div ${d}>`}return"</div>"}};e.use(n(),"callout_block",o)}(t),function(e){const t=/^▶\s+(.*)$/,o={validate:e=>Boolean(e.trim().match(t)),render(o,n){if(1===o[n].nesting){const r=o[n].info.trim().match(t),i=(null==r?void 0:r[1])??"";return`<details><summary>${e.utils.escapeHtml(i)}</summary>`}return"</details>"}};e.use(n(),"toggle_block",o)}(t)}}function k(e){return{plugin:w(e)}}function I(e){return/\[.+\]\([^)]*$/.test(e)}},812182:(e,t,o)=>{o.d(t,{HK:()=>l,Iz:()=>s,UW:()=>c});var n=()=>o(244641),r=()=>o(206267),i=()=>o(496603),a=()=>o(399561);function s(e){const t=e.id??r().JW(),o=e.createdAt??n().c9.now().toMillis(),i={...e,id:t,createdAt:o,presentationType:e.presentationType??"transient"};return a().A.setState({...a().A.state,toasts:{...a().A.state.toasts,[t]:i}}),i}function l(e){const t=e.id;return t&&a().A.state.toasts[t]?function(e,t){const o=a().A.state.toasts[e];if(!o)return s(t);const r={...o,...t,updatedAt:n().c9.now().toMillis()};return a().A.setState({toasts:{...a().A.state.toasts,[e]:r}}),r}(t,e):s(e)}function c(e,t,o){const n=a().A.state.toasts[e];if(n){var r,s;if(!t)if(null===(r=n.onDismiss)||void 0===r||r.call(n),o)null===(s=n.onUserDismiss)||void 0===s||s.call(n);a().A.setState({...a().A.state,toasts:i().cJ({...a().A.state.toasts},[e])})}}},812318:(e,t,o)=>{o.d(t,{k:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("download",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8.215 15.126c3.862 0 7.061-3.192 7.061-7.062 0-3.862-3.199-7.061-7.068-7.061-3.862 0-7.055 3.2-7.055 7.061 0 3.87 3.2 7.062 7.062 7.062zm0-1.388a5.654 5.654 0 01-5.667-5.674 5.642 5.642 0 015.66-5.667 5.66 5.66 0 015.68 5.667 5.66 5.66 0 01-5.673 5.674zm0-9.174c-.342 0-.602.247-.602.588v3.234l.062 1.401-.622-.766-.766-.8a.557.557 0 00-.41-.177.54.54 0 00-.56.547c0 .164.054.3.163.41l2.256 2.283c.15.157.294.226.479.226.191 0 .335-.075.485-.226l2.256-2.283a.557.557 0 00.164-.41.539.539 0 00-.56-.547.523.523 0 00-.41.178l-.766.793-.622.779.054-1.408V5.152c0-.341-.253-.588-.601-.588z"})})},812412:(e,t,o)=>{o.d(t,{dV:()=>a,ok:()=>n});o(898992),o(672577);const n=900,r={xSmall:n,small:1040,medium:1200,large:1500,xLarge:1/0},i=(0,o(534177).WP)(r).sort(((e,t)=>e[1]-t[1]));function a(e){var t;const o=e.WindowSizeStore.state.width;return(null===(t=i.find((e=>{let[,t]=e;return o<=t})))||void 0===t?void 0:t[0])??"large"}},813297:(e,t,o)=>{o.d(t,{Od:()=>l,QV:()=>r,U3:()=>a,Vp:()=>s,oY:()=>i});var n=()=>o(645873);const r={automations:new(n().O2)("automations",(()=>Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(62475),o.e(3151),o.e(98629),o.e(90409),o.e(74562),o.e(38664),o.e(24587),o.e(4422),o.e(59794),o.e(21627),o.e(75659),o.e(15724),o.e(28721),o.e(6463),o.e(26483),o.e(29333),o.e(89109),o.e(97996),o.e(7522),o.e(67832),o.e(79665)]).then(o.bind(o,48278)))),automationActionRegistry:new(n().O2)("automationActionRegistry",(()=>Promise.all([o.e(62475),o.e(3151),o.e(98629),o.e(28721),o.e(29333),o.e(97101)]).then(o.bind(o,329333)))),automationTypecheck:new(n().O2)("automationTypecheck",(()=>Promise.all([o.e(62475),o.e(3151),o.e(98629),o.e(28721),o.e(29333),o.e(44158)]).then(o.bind(o,310109))))},i=(0,n()._h)(r.automations,(e=>e.PlacedButtonBlockEditor)),a=(0,n()._h)(r.automations,(e=>e.AutomationWorkflowEditor)),s=((0,n()._h)(r.automations,(e=>e.AutomationWorkflowEditorActionSection)),(0,n()._h)(r.automations,(e=>e.ButtonBlockUrlPreviewPopup))),l=(0,n()._h)(r.automations,(e=>e.automationErrorHelpers.TooltipWithSubtitle))},816074:(e,t,o)=>{o.d(t,{D:()=>h,t:()=>v});o(898992),o(354520);var n=()=>o(617871),r=()=>o(388693),i=()=>o(59326),a=()=>o(406018),s=()=>o(427704),l=()=>o(677338),c=()=>o(939768),d=()=>o(720665),u=()=>o(40970),p=()=>o(449506),m=()=>o(901389),g=()=>o(755636),f=()=>o(435009);function v(e){const{environment:t,responseType:o,integrationId:n,redirectUri:r,state:i,owner:a,userId:l,spaceId:u}=e,p=c().Gm({url:s().JZ.oauthAuthorization,query:(0,d().MU)(Object.entries({response_type:o,client_id:n,redirect_uri:r,state:i,owner:a,user_id:l,space_id:u}).filter((e=>{let[,t]=e;return t})))});f().oo({environment:t,url:p,redirect:!0})}async function h(e){const{environment:t,params:o,integration:d}=e;l().NI(void 0);const v=d&&i().H(d,o.redirectUri);if(!v)return void f().oo({environment:t,url:s().JZ.root,redirect:!0});let _;if("errorType"in e)_={error:e.errorType,state:o.state};else{const{integration:n,spaceId:i,blockIdsForBot:s,acceptedIntegrationCapabilities:l}=e;let c;if(c=(0,r().v_)(n)?await p().callApi({eventName:"createOauthAuthorizationCode",environment:t,data:{integrationId:n.id,spaceId:i,redirectUri:o.redirectUri,acceptedIntegrationCapabilities:l}}):await p().callApi({eventName:"createOauthAuthorizationCode",environment:t,data:{integrationId:n.id,spaceId:i,redirectUri:o.redirectUri,blockIdsForBot:s,templatePageId:e.templatePageId,acceptedIntegrationCapabilities:l}}),"failed"===c.type){m().Qg(c);return h({environment:t,params:o,integration:n,errorType:503===c.status?a().l.temporarily_unavailable:a().l.server_error})}_={code:c.data.code,state:o.state}}d.id===n().io&&await u().nQ(t);const b=c().Gm({url:v,query:{..._}});g().f({environment:t,url:b,targetSelf:!0})}},816360:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isModalOpen:!1,openedTimestamp:void 0}}setAcquisitionRefund(e,t){const o=this.state,n=o.acquisitionRefundMap?{...o.acquisitionRefundMap}:{};n[e]=t,this.setState({...o,acquisitionRefundMap:n})}}const r=new n},818619:(e,t,o)=>{o.d(t,{X:()=>a});o(898992),o(430670),o(581454);var n=()=>o(134025),r=()=>o(496603),i=()=>o(666144);async function a(e,t){const o=r().hS(t.operations.flatMap((e=>[e.pointer,...(0,n().mP)(e)?e.additionalUpdatedPointers??[]:[]])),(e=>e.id));await Promise.all(o.map((o=>i().BB({environment:e,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,pointer:o,userId:t.userId}))))}},824188:(e,t,o)=>{o.r(t),o.d(t,{loadAndUpdateCrossDeviceRecentlyVisitedPages:()=>_,loadMoreRecentPages:()=>b,reinitializeGlobalRecentPagesStoreState:()=>h});o(898992),o(354520),o(581454);var n=()=>o(921997),r=()=>o(386164),i=()=>o(496603),a=()=>o(720665),s=()=>o(449506),l=()=>o(825972),c=()=>o(355012),d=()=>o(941541),u=()=>o(968172),p=()=>o(713205),m=()=>o(250484),g=()=>o(187778);let f,v;async function h(e,t,o){t===f&&o===v||(f=t,v=o,u().A.cleanup(e),await _({environment:e,userId:t,spaceId:o,initializing:!0}),u().A.update((e=>({...e,initialized:!0,recentPageRefreshTimer:void 0,recentPageRefreshIntervalTimer:void 0,userPageVisitListenerReference:void 0}))))}async function _(e){let{environment:t,userId:o,spaceId:m,initializing:f}=e;const v=(0,p().b)(),h=v?20:1,b=Date.now(),y=(0,l().zW)()??100,S=!v||(0,c().fB)({spaceId:m,userId:o}),w=(0,c().oG)({spaceId:m,userId:o}),k=f&&S&&w;k&&(u().A.update((e=>{const t=e.recentPages.get(m)??[],n=(0,c().Kn)({spaceId:m,userId:o})??[];return e.recentPages.set(m,(0,l().yw)(t,n,m)),{...e}})),g().G(t,"recentPageInitialization"));const I=S&&w?w+1:b-y*a().nD;if(await async function e(n,a){const d={spaceId:m,userId:o,limit:50,beforeTimestamp:n,sinceTimestamp:I},p=await s().callApi({eventName:"getRecentPageVisits",environment:t,userId:o,data:d,headers:(0,r().WS)({cellId:void 0,recordId:void 0,spaceId:m})});if("success"===p.type){const r=p.data.pages.map((e=>({pageId:e.id,visitedAt:e.visitedAt}))),s=i().wq(r.filter((e=>e.visitedAt<n)),(e=>e.visitedAt));u().A.update((e=>{const t=e.recentPages.get(m)??[],n=r.concat((0,c().Kn)({spaceId:m,userId:o})??[]);return e.recentPages.set(m,(0,l().yw)(t,n,m)),e.initialized=!0,{...e}})),l().wI.recompute(),s&&r.length>5&&a<h&&await e(s.visitedAt,a+1),S&&r&&(0,c().K2)({spaceId:m,userId:o,visits:r,isFromRecentPageVisits:!0}),g().G(t,f&&!k?"recentPageInitialization":"recentPageReload")}l().wI.recompute()}(b,1),f){if(!S){const e=u().A.get(m);e&&(0,c().K2)({spaceId:m,userId:o,visits:e,isFromRecentPageVisits:!0,isBackfill:!0})}u().A.update((e=>(e.userPageVisitListenerReference&&d().Ay.removeListener(e.userPageVisitListenerReference,t),{...e,userPageVisitListenerReference:d().Ay.addListener((0,n().N0)(o),void 0,i().nF((()=>{_({environment:t,userId:o,spaceId:m,initializing:!1})}),5*a().Xb,{leading:!1,trailing:!0}),void 0,t)})))}}async function b(e,t){var o,n;let{environment:i,userId:a,spaceId:c}=t;if(u().A.getWithoutSubscribing(c).length>l()._v)return!1;const d=await s().callApi({eventName:"getRecentPageVisits",environment:i,userId:a,data:{userId:a,spaceId:c,beforeTimestamp:e,limit:m().ZK},headers:(0,r().WS)({cellId:void 0,recordId:void 0,spaceId:c})});if("success"!==d.type||d.data.pages.length<=0)return!1;const p=d.data.pages.map((e=>({pageId:e.id,visitedAt:e.visitedAt}))),g=null===(o=u().A.get(c))||void 0===o?void 0:o.length;u().A.set(c,(0,l().yw)(u().A.get(c)??[],p,c));const f=null===(n=u().A.get(c))||void 0===n?void 0:n.length;return l().wI.recompute(),g!==f}},824622:(e,t,o)=>{o.d(t,{$j:()=>d,As:()=>s,E7:()=>l,QA:()=>f,Ry:()=>m,iq:()=>c,pX:()=>g,q_:()=>u,rs:()=>p});var n=()=>o(645873);const r=new(n().O2)("mobileActionBar",(async()=>{const[{default:e},{MobileActionBar:t},{NativeMobileActionBar:n}]=await Promise.all([Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(58550),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(72915),o.e(69689),o.e(2681),o.e(3560),o.e(24071),o.e(68610),o.e(27991),o.e(49978),o.e(90372),o.e(32690),o.e(5066),o.e(13402),o.e(72597),o.e(72365),o.e(13035),o.e(24996),o.e(49222)]).then(o.bind(o,643747)),Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(58550),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(72915),o.e(69689),o.e(2681),o.e(3560),o.e(24071),o.e(68610),o.e(27991),o.e(49978),o.e(90372),o.e(32690),o.e(5066),o.e(13402),o.e(72597),o.e(72365),o.e(13035),o.e(24996),o.e(49222)]).then(o.bind(o,43492)),Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(58550),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(72915),o.e(69689),o.e(2681),o.e(3560),o.e(24071),o.e(68610),o.e(27991),o.e(49978),o.e(90372),o.e(32690),o.e(5066),o.e(13402),o.e(72597),o.e(72365),o.e(13035),o.e(24996),o.e(49222)]).then(o.bind(o,114816))]);return{MobileActionBarWrapper:e,MobileActionBar:t,NativeMobileActionBar:n}})),i=new(n().O2)("mobile",(async()=>{const[{TopLevelMobileComponents:e},{TopbarMobile:t}]=await Promise.all([Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(16471),o.e(90825),o.e(49889),o.e(97727),o.e(85128),o.e(90409),o.e(74562),o.e(95794),o.e(4422),o.e(59794),o.e(75355),o.e(47123),o.e(97965),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(50142),o.e(20838),o.e(88860),o.e(73285),o.e(78846),o.e(13324),o.e(15724),o.e(27274),o.e(99346),o.e(65638),o.e(23463),o.e(91056),o.e(3560),o.e(32690),o.e(13402),o.e(72365),o.e(24996),o.e(74085)]).then(o.bind(o,909088)),Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(16471),o.e(90825),o.e(49889),o.e(97727),o.e(85128),o.e(90409),o.e(74562),o.e(95794),o.e(4422),o.e(59794),o.e(75355),o.e(47123),o.e(97965),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(50142),o.e(20838),o.e(88860),o.e(73285),o.e(78846),o.e(13324),o.e(15724),o.e(27274),o.e(99346),o.e(65638),o.e(23463),o.e(91056),o.e(3560),o.e(32690),o.e(13402),o.e(72365),o.e(24996),o.e(74085)]).then(o.bind(o,524996))]);return{TopLevelMobileComponents:e,TopbarMobile:t}})),a=new(n().O2)("mobileModal",(async()=>await Promise.resolve().then(o.bind(o,45552)))),s=(0,n()._h)(new(n().O2)("topLevelMobileComponents",(async()=>await Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(16471),o.e(90825),o.e(49889),o.e(97727),o.e(85128),o.e(90409),o.e(74562),o.e(95794),o.e(4422),o.e(59794),o.e(75355),o.e(47123),o.e(97965),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(50142),o.e(20838),o.e(88860),o.e(73285),o.e(78846),o.e(13324),o.e(15724),o.e(27274),o.e(99346),o.e(65638),o.e(23463),o.e(91056),o.e(83728)]).then(o.bind(o,909088)))),(e=>e.TopLevelMobileComponents)),l=(0,n()._h)(new(n().O2)("mobileNativeFullPageComponents",(async()=>await Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(58550),o.e(85128),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(72915),o.e(69689),o.e(23463),o.e(91056),o.e(24071),o.e(68610),o.e(27991),o.e(49978),o.e(5066),o.e(72597),o.e(77877),o.e(66042)]).then(o.bind(o,50747)))),(e=>e.MobileNativeFullPageComponents)),c=(0,n()._h)(new(n().O2)("mobileCalendarDayMenu",(async()=>{const{MobileCalendarDayMenu:e}=await Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(78846),o.e(13324),o.e(15724),o.e(53638)]).then(o.bind(o,381451));return{MobileCalendarDayMenu:e}})),(e=>e.MobileCalendarDayMenu)),d=(0,n()._h)(i,(e=>e.TopbarMobile)),u=(0,n()._h)(r,(e=>e.MobileActionBar)),p=(0,n()._h)(r,(e=>e.MobileActionBarWrapper)),m=(0,n()._h)(r,(e=>e.NativeMobileActionBar)),g=(0,n()._h)(new(n().O2)("mobileBottomBar",(async()=>{const{default:e}=await o.e(12039).then(o.bind(o,364259));return{MobileBottomBar:e}})),(e=>e.MobileBottomBar)),f=(0,n().jQ)(a,(e=>e.MobileModal))},824772:(e,t,o)=>{o.d(t,{DM:()=>c,cL:()=>l,fD:()=>s});var n=()=>o(529543),r=()=>o(546369),i=()=>o(165162),a=()=>o(508496);async function s(e){const t=await(0,n().getExperimentDeviceId)(e),o=e.currentUser.id;a().default.updateState({experimentsBySpace:{},experimentsWithoutSpace:[],isLoaded:!0,userId:o,deviceId:t,test:!1},e)}function l(){a().default.reset()}async function c(e){const t=await(0,n().getExperimentDeviceId)(e),o=await(0,n().getBrowserId)(e),a=await i().statsigClientLoader.getClient();await(null==a?void 0:a.updateUserAsync((0,i().tX)(r().getDataForStatsigUser({environment:e,deviceId:t,browserId:o}))))}},825726:(e,t,o)=>{o.d(t,{l:()=>P,w:()=>M});var n=()=>o(416845),r=()=>o(449412),i=()=>o(319625),a=o(296540),s=()=>o(484714),l=()=>o(56366),c=()=>o(959013),d=()=>o(534177),u=()=>o(436572),p=()=>o(994877),m=()=>o(104012),g=()=>o(989423),f=()=>o(860921),v=()=>o(875856),h=()=>o(430483),_=()=>o(1346),b=()=>o(668721),y=o(474848);function S(){const e=(0,f().z)(),t=(0,l().K8)((()=>b().A.didRequest()),[]);return"unavailable"===e?(0,y.jsx)(c().sA,{id:"translation.snackbar.paymentRequired.message",defaultMessage:"Reach out to your account representative to purchase the Notion AI add-on."}):"upsell"===e?(0,y.jsx)(c().sA,{id:"translate.snackbar.upsell.message",defaultMessage:"You’ve run out of free AI actions."}):"requestAccess"===e||"requestAccessNoFreeCredits"===e?t?(0,y.jsx)(c().sA,{id:"translate.snackbar.requestAccess.didRequest",defaultMessage:"You’ve run out of free AI actions. We’ve sent your request to the workspace owner for the Notion AI add-on."}):(0,y.jsx)(c().sA,{id:"translate.snackbar.requestAccess.message",defaultMessage:"You’ve run out of free AI actions."}):void(0,d().HB)(e)}function w(){const e=(0,s().v3)(),t=(0,f().z)(),o=(0,l().K8)((()=>b().A.didRequest()),[]),n=(0,l().K8)((()=>h().zD.isXMLAssistantEnabled()),[]),r=(0,a.useCallback)((()=>{(0,_().zw)({upsellType:"requestAccess",environment:e,isAssistantEnabled:n,from:"ai_page_translation"})}),[e,n]),i=(0,a.useCallback)((()=>{(0,_().zw)({upsellType:"upsell",environment:e,isAssistantEnabled:n,from:"ai_page_translation"})}),[e,n]);return"unavailable"===t?null:"requestAccess"===t||"requestAccessNoFreeCredits"===t?o?null:(0,y.jsx)(m().Ag,{onClick:r,children:(0,y.jsx)(c().sA,{id:"translate.snackbar.requestAccess.button",defaultMessage:"Request access"})}):"upsell"===t?(0,y.jsx)(m().Ag,{onClick:i,children:(0,y.jsx)(c().sA,{id:"translate.snackbar.upsell.button",defaultMessage:"Get unlimited AI"})}):void(0,d().HB)(t)}function k(){u().D6({label:(0,y.jsx)(I,{})})}function I(){return(0,y.jsx)(c().sA,{id:"translation.snackbar.retryable.error",defaultMessage:"There was an issue translating the page, please try again."})}function A(){return(0,y.jsx)(c().sA,{id:"translation.snackbar.payloadTooLarge.error",defaultMessage:"Sorry, the page is too large to translate at this time."})}function x(){u().D6({label:(0,y.jsx)(C,{}),right:(0,y.jsx)(T,{})})}function C(){return(0,y.jsx)(c().sA,{defaultMessage:"Sorry, there was an unexpected issue. If the issue persists, contact support.",id:"translation.snackbar.error"})}function T(){const e=(0,s().v3)(),t=(0,l().K8)((()=>(0,g().kb)()&&v().default.state.isZendeskEnabled),[]),o=(0,a.useCallback)((()=>{p().SI({environment:e,from:"ai_page_translation_error_snackbar"})}),[e]);return t?(0,y.jsx)(m().Ag,{onClick:o,children:(0,y.jsx)(c().sA,{id:"translate.snackbar.getHelp",defaultMessage:"Get help"})}):null}function M(e){const t=(0,i().A)(e);(0,n().zS)(t)?u().D6({label:(0,y.jsx)(S,{}),right:(0,y.jsx)(w,{})}):(0,n().Ah)(t)&&"Quota exceeded"===t.message?k():(0,n().Ah)(t)&&"Payload too large"===t.message?u().D6({label:(0,y.jsx)(A,{})}):(0,n().TX)(t)?k():x(),r().O8(t,{from:"fullPageTranslationActions.generateAndApplyTranslationMapToPage",type:"error"})}function P(e){const t=(0,i().A)(e);x(),r().O8(t,{from:"fullPageTranslationActions.duplicateTranslatedPage",type:"error"})}},825972:(e,t,o)=>{o.d(t,{B8:()=>g,Dd:()=>_,NK:()=>p,Rj:()=>f,_v:()=>d,cs:()=>h,ht:()=>v,wI:()=>u,yw:()=>m,zW:()=>b});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(581454),o(737550);var n=()=>o(496506),r=()=>o(179034),i=()=>o(448433),a=()=>o(351360),s=()=>o(968172),l=()=>o(20199),c=()=>o(148832);const d=1e3,u=new(n().default)((()=>{if(!s().A.getIsInitialized())return;const{currentSpaceStore:e}=a().default.state;if(!e)return;return s().A.getWithoutSubscribing(e.id).slice(0,d).filter((e=>e.store&&!e.store.pathIsDead()))}),{debugName:"recentAlivePagesStore"}),p=new(n().default)((()=>u.state||[]),{debugName:"UNSAFE_recentAlivePagesStore"});function m(e,t,o){const n=a().default.state.currentSpaceStore,i=new Map(e.map((e=>[e.pageId,e])));return t.forEach((e=>{const{pageId:t,visitedAt:a}=e,s=i.get(t);s?(s.visitedAt<a&&(s.visitedAt=a),i.set(t,s)):n&&i.set(t,{pageId:t,visitedAt:a,store:c().B.createChildStore(n.getPagesStore(),{table:r().ev,id:t,spaceId:o})})})),Array.from(i.values()).sort(((e,t)=>t.visitedAt-e.visitedAt)).slice(0,d)}function g(e){let{spaceId:t,pageId:o,visitedAt:n}=e;const r=s().A.getWithoutSubscribing(t),c=r.some((e=>e.pageId===o)),d=function(e){let{newRecentPage:t,currentRecentPages:o}=e;const n=o.filter((e=>e.pageId!==t.pageId)),r=n;let i=0;for(;i<n.length;i++)if(t.visitedAt>=n[i].visitedAt){r.splice(i,0,t);break}i===n.length&&r.push(t);return r}({newRecentPage:{pageId:o,visitedAt:n},currentRecentPages:r});s().A.set(t,d),u.setShouldRecompute(),!c&&_()&&async function(e){var t;let{pageId:o}=e;const{currentSpaceStore:n}=a().default.state;if(!n)return;const r=await(0,i().ey)({currentSpaceStore:n,id:o,source:new Set(["recentVisit"])}),s=null===(t=l().A.getState().localSearchableBlocksCache)||void 0===t?void 0:t.blocks;if(!s||!r)return;s.has(r.id)||s.add(r)}({pageId:o})}const f=["today","yesterday","past_week","past_30_days","older"];function v(e){const t=Date.now(),o=864e5,n=t-e,r=new Date(e).getDay(),i=new Date(t).getDay(),a=new Date(t);a.setDate(a.getDate()-1);const s=a.getDay();return r===i&&n<=o?"today":r===s&&n<=1728e5?"yesterday":n<=6048e5?"past_week":n<=2592e6?"past_30_days":"older"}function h(e){return null==e?void 0:e.map((e=>({visitedAt:e.visitedAt,pageId:e.pageId}))).sort(((e,t)=>t.visitedAt-e.visitedAt)).slice(0,50)}function _(){return!0}function b(){return 100}},826810:(e,t,o)=>{o.d(t,{Si:()=>S,dC:()=>h,_p:()=>_});var n=()=>o(700500),r=()=>o(179034),i=()=>o(220719),a=()=>o(630116),s=()=>o(65269),l=()=>o(989423);function c(e,t){l().vd(e,"insert_column",t)}var d=()=>o(896628),u=()=>o(722101),p=()=>o(246826);function m(e){const t=e.getRecordStoreUIAncestor(2);if(t&&t instanceof a().Bv&&t.isType(n().xd.columnList))return t}function g(e){return e&&e instanceof a().Bv&&e.isType(n().xd.column)}function f(e){const{environment:t,targets:o,inMemoryRecordCache:r,transaction:a}=e;(0,i().MX)(o.length>0,"At least one target block is required.");const s=p().Wv({environment:t,type:n().xd.columnList,properties:{},inMemoryRecordCache:r,transaction:a,spaceId:o[0].pointer.spaceId}),c=s.getContentStore();for(const n of o)u().BC({parentStore:c,appendStore:n,transaction:a});return function(e){l().vd(e,"create_column_list")}(t),s}function v(e){const{environment:t,targets:o,inMemoryRecordCache:r,transaction:a}=e;(0,i().MX)(o.length>0,"At least one target block is required.");const s=p().Wv({environment:t,type:n().xd.column,format:{column_ratio:1},inMemoryRecordCache:r,transaction:a,spaceId:o[0].pointer.spaceId}),l=s.getContentStore();for(const n of o)u().BC({parentStore:l,appendStore:n,transaction:a});return s}function h(e){const{environment:t,parentStore:o,insertStores:n,leftStore:i,transaction:s}=e;if(0===n.length)return[];let l,d;if(c(t,{side:"left"}),g(i))l=i,d=m(i);else{l=v({environment:t,targets:[i],inMemoryRecordCache:o.inMemoryRecordCache,transaction:s});const n=f({environment:t,targets:[l],inMemoryRecordCache:o.inMemoryRecordCache,transaction:e.transaction});d=u().Br({parentStore:o,oldChildStore:i,newChildStore:n,transaction:s}).childStore}const p=v({environment:t,targets:n,inMemoryRecordCache:o.inMemoryRecordCache,transaction:s});if(d){const t=d.getContentStore();u().nc({parentStore:t,insertStore:p,beforeStore:l,transaction:e.transaction}),b({columnListStore:d,addedColumnStore:p,transaction:s});return a().Bv.createChildStore(t,{table:r().ev,id:p.id}).getContentStores()}return[]}function _(e){const{environment:t,parentStore:o,insertStores:n,rightStore:i,transaction:s}=e;if(0===n.length)return[];let l,d;if(c(t,{side:"right"}),g(i))l=i,d=m(i);else{l=v({environment:t,targets:[i],inMemoryRecordCache:o.inMemoryRecordCache,transaction:s});const n=f({environment:t,targets:[l],inMemoryRecordCache:o.inMemoryRecordCache,transaction:e.transaction});d=u().Br({parentStore:o,oldChildStore:i,newChildStore:n,transaction:s}).childStore}const p=v({environment:t,targets:n,inMemoryRecordCache:o.inMemoryRecordCache,transaction:s});if(d){const t=d.getContentStore();u().WH({parentStore:t,insertStore:p,afterStore:l,transaction:e.transaction}),b({columnListStore:d,addedColumnStore:p,transaction:s});return a().Bv.createChildStore(t,{table:r().ev,id:p.id}).getContentStores()}return[]}function b(e){const{columnListStore:t,addedColumnStore:o,transaction:n}=e,r=t.getContentStores(),i=1/r.length;d().zA({stores:[o],update:{column_ratio:i},transaction:n});for(const a of r)if(a.id!==o.id){const e=a.getColumnRatio();d().zA({stores:[a],update:{column_ratio:(1-i)*e},transaction:n})}}function y(e){const{columnListStore:t,removedColumnStore:o,transaction:n}=e,r=t.getContentStores(),i=o.getColumnRatio();for(const a of r){const e=a.getColumnRatio();d().zA({stores:[a],update:{column_ratio:e/(1-i)},transaction:n})}}function S(e){const{parentStore:t,transaction:o}=e,n=t.getRecordStoreUIParent();let r;if(g(n)&&(r=m(n)),r){const e=r.getContentStore(),t=r.getContentStores();for(const i of t){0===i.getContentStores().length&&(u().TF({parentStore:e,childToRemoveStore:i,shouldGarbageCollect:!1,transaction:o}),y({columnListStore:r,removedColumnStore:i,transaction:o}))}const n=r.getContentStores();if(0===n.length){const e=r.getRecordStoreUIParent();null!=e&&e.valueIs(s()._)&&u().TF({parentStore:e,childToRemoveStore:r,transaction:o,shouldGarbageCollect:!1})}else if(1===n.length){const e=r.getRecordStoreUIParent(),t=n[0],i=t.getContentStore(),a=t.getContentStores();if(a.reverse(),null!=e&&e.valueIs(s()._)){for(const t of a)u().TF({parentStore:i,childToRemoveStore:t,shouldGarbageCollect:!1,transaction:o}),u().WH({parentStore:e,insertStore:t,afterStore:r,transaction:o});u().TF({parentStore:e,childToRemoveStore:r,transaction:o,shouldGarbageCollect:!1})}}}}},828634:(e,t,o)=>{o.d(t,{EE:()=>i,wY:()=>r().wY,tK:()=>r().tK});o(16280);var n=o(296540),r=()=>o(188709);function i(e){const{children:t,onSizeChange:o}=e,i=(0,n.useRef)(null),a=(0,r().wY)(i);(0,n.useEffect)((()=>{o&&a&&o(a)}),[a,o]);const s=n.Children.only(t);return n.cloneElement(s,{ref:i})}},829300:(e,t,o)=>{o.d(t,{Gf:()=>N,Ju:()=>L,VN:()=>F,dw:()=>D,eh:()=>U});o(898992),o(803949);var n=()=>o(757695),r=()=>o(206267),i=()=>o(756005),a=()=>o(919709),s=()=>o(496603),l=()=>o(602098),c=()=>o(97270),d=()=>o(186445),u=()=>o(47373),p=()=>o(808237),m=()=>o(231722),g=()=>o(108944),f=()=>o(906537),v=()=>o(928074),h=()=>o(110955),_=()=>o(351360),b=()=>o(176106),y=()=>o(375447),S=()=>o(766637),w=()=>o(411671),k=()=>o(558407),I=()=>o(40851),A=()=>o(24157),x=()=>o(611371),C=()=>o(597898),T=()=>o(296206),M=()=>o(264879),P=()=>o(187778),B=()=>o(606952),R=()=>o(317909);function E(e){const{textStore:t,environment:o}=e,n=(0,g().Wo)(t)&&w().A.getMode(o,t).hasPublicPermission,r=t.isDefaultRecordCache(),a=!n,c=a&&function(e){const t=(0,d().ao)(),o=_().default.state.currentSpaceStore;if(!t||!o)return!1;const n=(0,C().C$)(e,{name:"configurable_mention_invites",spaceId:o.id,userId:o.userId}),r="available"===(null==n?void 0:n.type);return t.canEditMembership()&&o.canEditMembership()&&!r&&!e.device.isMobile}(o),m=a&&function(e){const t=(0,d().ao)();if(!t)return!1;return(0,v().Aj)({store:t})&&t.canEditMembership()&&(0,u().RL)()}(),f=a,h=!n,b=!n,y=function(e){const t=(0,d().ZO)();if(!t||"block"!==e.table)return!1;if(t.isInsideTemplate())return!0;const o=p().E(e);if(o||t.isInsideFactoryOrDuplicateBlocksAction()){const t=null==o?void 0:o.getTitleStore();return!(o&&t&&t.id===e.id&&s().n4(t.path,e.path))}if((0,l().u)(e))return!0;return!1}(t),S=function(e){if("block"!==e.table)return!1;return!0}(t);return(0,i().wu)({page:true,createPage:r,user:a,inviteUserToWorkspace:c,inviteUserToPage:m,bot:f,date:!0,reminder:!0,templateVariable:y,group:h,team:b,heading:!0,formulaContextVariable:S})}function D(e){const{environment:t,textStore:o,oldSelection:s,oldTextValue:l,disabledMentionTypes:d,usePopupOnMobile:u,mentionSectionOrdering:p}=e,m=function(e){const{textStore:t,oldSelection:o}=e;if(h().A.state.open||c().A.state.open||b().A.state.open)return;const n=a().qAZ(t.getValue()||[]),r=o.startIndex,i=(n[r]||"").normalize("NFKD"),s=(n[r-1]||"").normalize("NFKD"),l=y().A.state;if(l.open)return"[["===l.insertionType&&"]"===i&&"]"===s?"]]":void 0;if("@"===i){if(s&&!/[\s\(\)\[\]]/g.test(s))return;return"@"}if("+"===i){if(s&&!/[\s\(\)\[\]]/g.test(s))return;return"+"}if("[["===n.slice(r-1,r+1).join("")){const e=n[r-1];if(e&&!/[\s\(\)\[\]]/g.test(e))return;return"[["}}(e);if(!m)return;const g=y().A.state;if("]]"===m){if(g.open){const e=g.temporaryInputData.state;e&&g.temporaryInputData.setState({...e,suffix:"]]"}),y().A.setState({...g,showCreateIn:!0})}return}const v=f().get();if(!v)return;const _=f().getRect(v);if(!_)return;const S=E({textStore:o,environment:t}),w=S.page&&!d.page,k=S.heading&&!d.heading,A=S.createPage&&!d.createPage,x=S.user&&"@"===m&&!d.user,C=S.inviteUserToWorkspace&&"@"===m&&!d.inviteUserToWorkspace,M=S.inviteUserToPage&&"@"===m&&!d.inviteUserToPage,B=S.bot&&"@"===m&&!d.bot,R=S.date&&"@"===m&&!d.date,D=S.reminder&&"@"===m&&!d.reminder,N=S.templateVariable&&"@"===m&&!d.date&&!d.templateVariable,L=S.group&&"@"===m&&!d.group,F=S.team&&"@"===m&&!d.team,U=S.formulaContextVariable&&"@"===m&&!d.formulaContextVariable;if(!(x||L||F||w||A||R||D||N||U))return;if("+"===m&&!A)return;const O=r().JW(),V=r().JW();P().G(t,"mention"),y().A.setState({open:!0,flowId:O,sessionId:V,openTime:Date.now(),insertionType:m,textStore:o,oldTextValue:l,oldSelection:s,selectionRect:_,emptyQueryUserRequestStore:y().A.state.emptyQueryUserRequestStore,botRequestStore:new(I().A),temporaryInputData:n().default.createValue(void 0,{name:"temporaryInputData"}),mentionTypes:(0,i().wu)({page:w,createPage:A,user:x,inviteUserToWorkspace:C,inviteUserToPage:M,bot:B,date:R,reminder:D,templateVariable:N,formulaContextVariable:U,group:L,team:F,heading:k}),expandSection:void 0,showCreateIn:!1,showInvite:!1,showMentionAndShare:!1,showFormulaProperty:!1,createInQuery:"",isEmptyPageTitle:!1,usePopupOnMobile:u,sectionOrder:p}),T().bp(t,{analyticsFrom:y().A.getMentionMenuContext(),flowId:O,searchSessionId:V})}function N(e){const{environment:t,mentionTypes:o,usePopupOnMobile:n,mentionSectionOrdering:r}=e;B().DN({direction:"end"});const s=A().default.state;if("editing"!==s.mode)return;const l=(0,m().H7)(s.multiSelection);return l?function(e){const{selection:t,textValueStore:o,environment:n,mentionTypes:r,usePopupOnMobile:s,mentionSectionOrdering:l}=e;let c=!1;if(t.startIndex>0){const e=o.getValue()||[],n=a().qAZ(e)[t.startIndex-1];/[\s]/g.test(n)||(c=!0)}R().createAndCommit({userAction:"mentionMenuActions.insertMention",environment:n,canUndo:!0,perform:e=>{c?(B().$D({environment:n,store:o,editorMode:"default",string:" ",selection:t,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e,mentionSectionOrdering:l}),B().$D({environment:n,store:o,editorMode:"default",string:"@",selection:{startIndex:t.startIndex+1,endIndex:t.endIndex+1},disableMentions:!1,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e,mentionSectionOrdering:l})):B().$D({environment:n,store:o,editorMode:"default",string:"@",selection:t,disableMentions:!1,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e,mentionSectionOrdering:l})}});const d=y().A.state;if(!d.open)return;const u=E({environment:n,textStore:o});y().A.setState({...d,usePopupOnMobile:s,mentionTypes:(0,i().wu)({page:u.page&&r.page,createPage:u.createPage&&r.createPage,user:u.user&&r.user,inviteUserToWorkspace:u.inviteUserToWorkspace&&r.inviteUserToWorkspace,inviteUserToPage:u.inviteUserToPage&&r.inviteUserToPage,bot:u.bot&&r.bot,date:u.date&&r.date,reminder:u.reminder&&r.reminder,templateVariable:u.templateVariable&&r.templateVariable,group:u.group&&r.group,team:u.team&&r.team,heading:u.heading&&r.heading,formulaContextVariable:u.formulaContextVariable&&r.formulaContextVariable})})}({environment:t,mentionTypes:o,textValueStore:l.store,selection:l.selection,usePopupOnMobile:n,mentionSectionOrdering:r}):void 0}function L(e){const t=y().A.state,{environment:o,editorMode:n,annotations:r=[],transaction:i,menuListItemAction:s,query:l,serverEventProperties:c,mentionType:d,resultId:u,shareMenuSelection:p}=e;if(t.open){let e=t.oldTextValue,m=t.oldSelection;const g=t.insertionType.length-1;g>0&&(e=a().lzV(e,t.oldSelection.startIndex-g,t.oldSelection.startIndex),m={startIndex:m.startIndex-g,endIndex:m.endIndex-g}),B().KY({environment:o,store:t.textStore,value:e,transaction:i});const f=y().A.getMentionMenuContext();r.forEach((e=>{B().Gf({environment:o,editorMode:n,store:t.textStore,selection:m,annotation:e,analyticsFrom:f,transaction:i,shareMenuSelection:p})}));const v=Date.now();if("page"===d&&u&&k().A.recordMention({id:u,timestamp:v,currentUserId:o.currentUser.id}),d){const{numServerRequests:e}=S().A.state;T().o2(o,{clickIndexGlobal:null==s?void 0:s.index,clickIndexLocal:null==s?void 0:s.indexLocal.indexLocal,sectionIndex:null==s?void 0:s.indexLocal.section,analyticsFrom:f,timeToClickInMs:v-t.openTime,queryLength:l.length,serverEventProperties:c,mentionType:d,resultId:u,flowId:t.flowId,searchSessionId:t.sessionId,searchSessionFlowNumber:e})}F()}}function F(){y().A.update((e=>({...e,open:!1,sessionId:void 0}))),S().A.reset()}async function U(e){const{environment:t,titleText:o,createInValue:n,onPageCreated:r,menuListItemAction:i,clearSavedSelection:a}=e,s=y().A.state;if(!s.open)return;if(!(0,x().EF)(t))return;a();const{performResult:l}=await R().createAndCommitAsync({environment:t,userAction:"mentionMenuActions.acceptCreateIn",waitForServerCommit:!0,perform:async e=>{const a=M().oj({environment:t,transaction:e,titleText:o,createInValue:n,recordStoreParentStore:s.textStore}),l=a.createdPages[0];if(l)return r&&r(l),L({environment:t,editorMode:"default",annotations:[["p",l.id]],transaction:e,menuListItemAction:i,query:o,mentionType:"createPage"}),await a.moveToStorePromise,{createInState:a}}});if(l){const{createInState:e}=l;return await M().nT({analyticsFrom:"mention_menu",createInState:e}),e}}},830140:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},831310:(e,t,o)=>{o.d(t,{o:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("check",{viewBox:"0 0 14 14",svg:(0,n.jsx)("polygon",{points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})})},831872:(e,t,o)=>{o.d(t,{N6:()=>l,pQ:()=>s,sm:()=>a,uj:()=>i});o(944114),o(898992),o(354520),o(581454),o(737550);var n=()=>o(496603);function r(e,t){return e.KeyboardShortcutStackStore.state.stack.some((e=>t===e.listener))}function i(e,t,o){const{stack:n}=e.KeyboardShortcutStackStore.state;for(let r=n.length-1;r>=0;r--){const i=n[r],a=i.shortcuts[o];if(e.KeyboardShortcutStackStore.debugPropagation){const[t,n]=e.KeyboardShortcutStackStore.getDebugInfoForStackItem(r),s=i.enable&&a?`propagating ${o} to ${t}`:`not propagating ${o} to ${t}`;console.info(`keyboardShortcutStackActions: ${s}`,n)}if(i.enable&&a)return void a(t)}}function a(e){const{environment:t,stackItem:o}=e,i=t.KeyboardShortcutStackStore;if(r(t,o.listener)){const e=i.state.stack.map((e=>e.listener===o.listener?o:e));i.setState({...i.state,stack:e})}else i.state.stack.push(o),i.setState({stack:n().Ul(i.state.stack,(e=>e.priority))})}function s(e,t){if(r(e,t)){const o=e.KeyboardShortcutStackStore,n=o.state.stack.filter((e=>t!==e.listener));o.setState({...o.state,stack:n})}}function l(e,t){i(e,t,t.type)}},832410:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(672577),o(737550);class n extends(()=>o(965828))().O{findFromTextStore(e){return this.find((t=>{var o;return null===(o=t.textStores)||void 0===o?void 0:o.some((t=>t.includes(e)))}))}}const r=new n},834211:(e,t,o)=>{function n(e){return`getRecentlyNavigatedCollections:${e}`}o.d(t,{Y:()=>n})},834368:(e,t,o)=>{o.d(t,{K:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("checkboxSquare",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.5,1.5 L1.5,14.5 L14.5,14.5 L14.5,1.5 L1.5,1.5 Z M0,0 L16,0 L16,16 L0,16 L0,0 Z"})})},835066:(e,t,o)=>{o.d(t,{$N:()=>W,JC:()=>U,JR:()=>L,Ob:()=>H,Qb:()=>E,Zy:()=>j,cY:()=>$,dC:()=>K,gg:()=>q,kH:()=>x,t_:()=>P,xK:()=>z});o(944114),o(898992),o(354520),o(803949),o(581454);var n=()=>o(17022),r=()=>o(700500),i=()=>o(451306),a=()=>o(179034),s=()=>o(343666),l=()=>o(534177),c=()=>o(186445),d=()=>o(38337),u=()=>o(846662),p=()=>o(449195),m=()=>o(747100),g=()=>o(299545),f=()=>o(129522),v=()=>o(695625),h=()=>o(900652),_=()=>o(644914),b=()=>o(397248),y=()=>o(351360),S=()=>o(195613),w=()=>o(570323),k=()=>o(712505),I=()=>o(630116),A=()=>o(116008);const x=10,C=10,T="temp-margin-comment-discussion",M="temp-margin-comment-discussion-in-toggle",P=50,B=`.${d().ohG} .notion-collection_view-block`,R=`.${d().d0I}`,E=372,D=10,N=14,L=16,F=1150,U=E-4*L,O=1500,V=1600;function j(e,t,o){const n=z(e,t);return n>=O||o&&!k().default.isSidePeekClosingStore.state||t?0:(O-n)/2}function z(e,t){return t&&k().default.isSidePeekOpen()?(0,_().Ql)(e):e.WindowSizeStore.state.width-(0,_().kf)(e)-(0,_().zo)(e,!1)-h().Z8()}function q(e,t,o){return(z(e,t)-V)/2+2*L+j(e,t,o)}const H=new(o(496506).default)((()=>{var e;let t=y().default.state.mainEditorCurrentBlockStore;return null!==(e=t)&&void 0!==e&&e.isCollectionView()&&(t=(0,o(519839).MW)(t)||t),t?(0,g().O3)(t,{recursivelyLoadAllDiscussions:!0,includePropertyDiscussions:!0}).filter((e=>{var o;return e.getParentId()!==(null===(o=t)||void 0===o?void 0:o.id)||void 0!==e.getPropertyId()})):[]}),{debugName:"mainEditorBlockUnresolvedDiscussionStore"});function W(e,t){return(!t.getAssociatedCollectionStore()||!t.getRecordStoreUIParent()||t.id===(0,c().s0)())&&(!e.device.isMobile&&(!(z(e,(0,m().cq)(t))<F)&&(!(0,_().me)(e)&&(!k().default.isSidePeekOpen()&&(!w().A.state.open&&Boolean(t.getRecordStoreUIRoot()===y().default.state.mainEditorCurrentBlockStore&&"inline"===(0,p().LN)()))))))}function K(e,t){const o=H.state.length>0,n=A().A.state.open&&A().A.state.rect;return Boolean(W(e,t)&&(o||n))}function G(e,t){return e.offsetTop!==t.offsetTop?e.offsetTop<t.offsetTop?-1:1:e.createdTimeMs&&t.createdTimeMs&&e.createdTimeMs!==t.createdTimeMs?e.createdTimeMs<t.createdTimeMs?-1:1:e.id<t.id?-1:1}const $=(0,o(496603).sg)((function(e){let{discussionStores:t,pageContentStores:s,marginDiscussionItemRefs:p,selectedDiscussionId:m,newMarginDiscussionArgs:g,marginContainerElement:h,pageViewBlockElement:_,onComputeComplete:y,computedOnce:w,prevSelectedDiscussionId:k,isFullWidth:x,topbarHeight:M,windowHeight:P,previousDiscussionElements:E}=e;const L=new Map;let F=0,U=0;if(!h||!_)return;if(0===t.length&&!g)return;const O=n().A.withListenerIgnored((()=>{var e;return(null===(e=S().A.state.elementRef.current)||void 0===e?void 0:e.scrollTop)??0})),V=h.getBoundingClientRect(),j=Y({currentScrollTop:O,rect:V}),z=t.map((e=>function(e){let{discussionStore:t,currentScrollTop:o,topbarHeight:n,windowHeight:r,pageViewBlockElement:s,previousDiscussionElements:l,currentDiscussionElements:d,selectedDiscussionId:u}=e;const p=t.id,m=function(e){const{topbarHeight:t,windowHeight:o,pageViewBlockElement:n,discussionId:r,previousDiscussionElements:a,currentDiscussionElements:s,selectedDiscussionId:l}=e,c=n.getElementsByClassName((0,i().wV)({discussionId:r})),d=e=>(s.set(r,e),e);if(c.length>0){if(l===r){let e;for(let n=0;n<c.length;n++){const r=c[n];if(r instanceof HTMLElement){const n=r.getBoundingClientRect();if(n.bottom<t||n.top>o){if(e)return d(e)}else{if(n.top>t)return d(r);e=r}}}}const e=a.get(r);return e&&Array.from(c).includes(e)?d(e):d(c[0])}}({topbarHeight:n,windowHeight:r,pageViewBlockElement:s,discussionId:p,previousDiscussionElements:l,currentDiscussionElements:d,selectedDiscussionId:u}),g=t.recordStoreUIParentStore;if(!(g&&g.id&&g.table===a().ev&&g instanceof I().Bv))return;if(!g.isReady())return;const f={offsetTop:0,discussionStore:t,parentBlockStore:g,type:"existing",id:t.id,createdTimeMs:Z(t)};if(m instanceof HTMLElement)return f.offsetTop=Y({rect:m.getBoundingClientRect(),currentScrollTop:o}),f;const h=v().T.findNodeFromStore(g);if(h instanceof HTMLElement&&g.id!==(0,c().s0)())return f.offsetTop=Y({rect:h.getBoundingClientRect(),currentScrollTop:o}),f;const{node:_,blockStore:b}=v().T.findClosestVisibleParent(g);if(_ instanceof HTMLElement&&b)return f.offsetTop=Y({rect:_.getBoundingClientRect(),currentScrollTop:o})+D,f.parentBlockStore=b,f.shouldGroup=!0,f.closestVisibleParentId=b.id,f}({discussionStore:e,currentScrollTop:O,topbarHeight:M,windowHeight:P,pageViewBlockElement:_,previousDiscussionElements:E,currentDiscussionElements:L,selectedDiscussionId:m}))).filter(l().O9),q=g&&function(e){var t;let o,{blockStore:n,discussionInputStore:r,currentScrollTop:i,pageViewBlockElement:a}=e;const s=null===(t=a.getElementsByClassName(d().Mdy))||void 0===t?void 0:t[0];let l=!1,c=n;if(s instanceof HTMLElement)o=s.getBoundingClientRect();else{const e=A().A.getBlockStore();if(e)o=f().K.getRect(e);else{const e=A().A.getClosestBlockStore();if(e){const{node:t,parentBlockStore:n}=e;t instanceof HTMLElement&&n&&(o=t.getBoundingClientRect(),l=!0,c=n)}}}if(!o)return;return{offsetTop:Y({rect:o,currentScrollTop:i})+N,parentBlockStore:c,discussionInputStore:r,type:"new",id:T,createdTimeMs:Date.now(),shouldGroup:l}}({...g,currentScrollTop:O,pageViewBlockElement:_});let H=null!=q&&q.shouldGroup?Q(z,q):Q(z);null!=q&&q.shouldGroup||q&&H.push(q);const W=q&&o(555776).A.state.isActivelyComposing?q.id:m;let K;const $=W||k?void 0:function(e){let{pageContentStores:t,currentScrollTop:o,marginContainerRect:n,isFullWidth:i}=e;return t.map((e=>{const t=e.getType();if(!t)return;let o;var a;if((0,l().O)(r().Ib,t)||"column_list"===t||(0,u().gV)(e))o=null===(a=v().T.findSelectableFromStore(e))||void 0===a||null===(a=a.getNode())||void 0===a?void 0:a.getBoundingClientRect();else if(t===r().xd.table){var s,c;const t=null===(s=v().T.findSelectableFromStore(e))||void 0===s?void 0:s.getNode(),n=null==t?void 0:t.getBoundingClientRect(),r=null==t||null===(c=t.querySelector(R))||void 0===c?void 0:c.getBoundingClientRect();o=i?n:n&&r?n.width<r.width?n:r:n||r}else if(e.isInlineCollectionView()){var d,p;const t=null===(d=v().T.findSelectableFromStore(e))||void 0===d?void 0:d.getNode();o=i?null==t?void 0:t.getBoundingClientRect():null==t||null===(p=t.querySelector(B))||void 0===p?void 0:p.getBoundingClientRect()}return o&&o.right>n.left?o:void 0})).filter(l().O9).map((e=>{const t=Y({rect:e,currentScrollTop:o});return new DOMRect(e.left,t,e.width,e.height)}))}({pageContentStores:s,currentScrollTop:O,marginContainerRect:V,isFullWidth:x}).sort((e=>-e.top));H=H.sort(G).map(((e,t)=>{e.offsetTop-j>=18&&(e.offsetTop-=18);const o=e.id,n=p.get(e.id);if(!n)return"new"===e.type||w||(e.offsetTop=-9999,e.hide=!0),e;const r=n.getBoundingClientRect(),i=r.height;let a=e.offsetTop;return a<=F&&(a=F),$&&(a=function(e,t){const o={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,left:e.left,bottom:e.bottom,right:e.right};let n=t[t.length-1];for(;n;)if((0,b().IA)(o,n))o.top=n.bottom+C,o.bottom=o.top+o.height,t.pop(),n=t[t.length-1];else{if(o.bottom<n.top)return o.top;t.pop(),n=t[t.length-1]}return o.top}(new DOMRect(r.left,a,r.width,r.height),$)),o===W&&0===U&&(U+=a-e.offsetTop,e.selected=!0,K=t),e.offsetTop=a,e.height=i,F=e.offsetTop+i,e}));const X=H.map((e=>(e.offsetTop=e.offsetTop-j,e)));let J;if(U>0&&void 0!==K){for(let e=K;e>=0;e--){const t=X[e];if(t.height){if(t.id===W)t.offsetTop-=U;else{if(!(J&&J.offsetTop<=t.offsetTop+t.height))break;t.offsetTop-=U}J=t}}for(let e=K+1;e<X.length;e++){const t=X[e];t.offsetTop-=U,J=t}}y({data:X,hasNewDiscussion:Boolean(q),selectedDiscussion:m},L)}),100);function Y(e){let{rect:t,currentScrollTop:o}=e;return t.top+o}function Q(e,t){const o=new Map,n=[];e.forEach((e=>{if(e.shouldGroup){const t=o.get(e.parentBlockStore.id)||[];t.push(e),o.set(e.parentBlockStore.id,t)}else n.push(e)}));const r=null==t?void 0:t.parentBlockStore.id,i=r&&o.get(r)||[];return o.forEach((e=>{n.push({offsetTop:e[0].offsetTop,groupedDiscussionsData:e,parentBlockStore:e[0].parentBlockStore,type:"grouped",id:e[0].id,createdTimeMs:e[0].createdTimeMs,newDiscussionData:t})})),t&&0===i.length&&n.push({offsetTop:t.offsetTop,groupedDiscussionsData:[],parentBlockStore:t.parentBlockStore,type:"grouped",id:M,createdTimeMs:t.createdTimeMs,newDiscussionData:t}),n}function Z(e){const t=g().uB(e),o=t.getValue()||[];if(0===o.length)return;const n=o[0];return I().sk.createChildStore(t,{table:s().SN,id:n,spaceId:t.pointer.spaceId}).getCreatedTime()}},835779:(e,t,o)=>{o.d(t,{h:()=>g});o(296540);var n=()=>o(484714),r=()=>o(943846),i=()=>o(251126),a=()=>o(401497),s=()=>o(138856),l=()=>o(959013),c=()=>o(284371),d=o(474848);function u(e){let{url:t,metadata:o}=e;const n=(0,a().IS)((e=>({previewWrapper:{display:"flex",flexDirection:"column",border:`1px solid ${e.darkDividerColor}`,borderRadius:"3px",height:"100%"},previewImageArea:{flex:1,backgroundColor:e.embedPlaceholderBackground},previewInfoArea:{padding:"0.75em 1em",backgroundColor:e.text.contrastPrimary,display:"flex",flexDirection:"column",gap:"0.25em"},previewTitle:{fontWeight:c().Wy.medium,color:e.darkTextColor},previewUrl:{display:"flex",alignItems:"center",gap:"0.75em"},previewUrlText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:e.lightTextColor},previewUrlFavicon:{width:"1.25em",height:"1.25em"}})),[]),r=null!=o&&o.images&&o.images.length>0?o.images[0].url:void 0;return(0,d.jsxs)("div",{style:n.previewWrapper,children:[(0,d.jsx)("div",{style:n.previewImageArea,children:r?(0,d.jsx)(p,{imageUrl:r}):(0,d.jsx)(m,{})}),(0,d.jsxs)("div",{style:n.previewInfoArea,children:[(null==o?void 0:o.title)&&(0,d.jsx)("div",{style:n.previewTitle,children:o.title}),(0,d.jsxs)("div",{style:n.previewUrl,children:[(null==o?void 0:o.favicon_url)&&(0,d.jsx)("img",{style:n.previewUrlFavicon,src:o.favicon_url}),(0,d.jsx)("div",{style:n.previewUrlText,children:t})]})]})]})}function p(e){let{imageUrl:t}=e;const o=(0,a().IS)((e=>({wrapper:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"flex-start",height:"100%",backgroundSize:"cover",backgroundImage:`url(${t})`},pill:{backgroundColor:e.accentColors.gray[800],color:e.accentColors.gray[75],borderRadius:"99em",padding:"0.5em 1em",margin:"1em",display:"flex",alignItems:"center",gap:"0.75em",fontWeight:c().Wy.medium},playButton:{width:"1em",height:"1em",fill:e.accentColors.gray[75]}})),[t]);return(0,d.jsx)("div",{style:o.wrapper,children:(0,d.jsxs)("div",{style:o.pill,children:[(0,s().u)(o.playButton),(0,d.jsx)("span",{children:(0,d.jsx)(l().sA,{defaultMessage:"Load embed",id:"iFramePreview.pillLabel"})})]})})}function m(){const e=(0,a().IS)((e=>({wrapper:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:e.mediumTextColor,height:"100%"},message:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:"0.75em",fontWeight:c().Wy.medium},playButtonWrapper:{backgroundColor:e.mediumTextColor,borderRadius:"2em",width:"2.5em",height:"2.5em",display:"flex",justifyContent:"center",alignItems:"center"},playButton:{marginLeft:"0.1em",width:"1em",height:"1em",fill:e.embedPlaceholderBackground}})),[]);return(0,d.jsx)("div",{style:e.wrapper,children:(0,d.jsxs)("div",{style:e.message,children:[(0,d.jsx)("div",{style:e.playButtonWrapper,children:(0,s().u)(e.playButton)}),(0,d.jsx)("span",{children:(0,d.jsx)(l().sA,{defaultMessage:"Tap to load embed",id:"iFramePreview.imagelessAreaLabel"})})]})})}function g(e){let{source:t}=e;const o=(0,n().v3)(),a={request:t,performRequest:e=>async function(e,t){return(0,r().DB)(t,e)}(e,o),render:(e,o,n)=>(0,d.jsx)(f,{error:e,result:o,ready:n,source:t})};return(0,d.jsx)(i().A,{...a})}function f(e){let{error:t,result:o,ready:n,source:r}=e;return n?(0,d.jsx)(u,{url:r,metadata:o}):null}},836285:(e,t,o)=>{o.d(t,{I:()=>i,s:()=>a});var n=()=>o(763884);const r="queryParamsRedirect";function i(e){let{currentUserId:t,params:o}=e;n().A.set({userId:t,key:r,value:o})}function a(e){return n().A.get({userId:e,key:r})}},837570:(e,t,o)=>{o.d(t,{V:()=>s,h:()=>a});var n=()=>o(534177),r=()=>o(686526),i=()=>o(216424);function a(e){const{environment:t}=e;t.device.isMobile?function(e){const{collectionSettingsStore:t}=e;"create_automation"===e.mode?r().a2({collectionSettingsStore:t,item:{type:"mobileCreateAutomation",from:e.from,source:e.source}}):"edit_automation"===e.mode?r().a2({collectionSettingsStore:t,item:{type:"mobileEditAutomation",source:e.source,automationId:e.automationId}}):"edit_button_property"===e.mode?r().a2({collectionSettingsStore:t,item:{type:"mobileEditButtonAutomation",propertyId:e.propertyId,propertySchema:e.propertySchema}}):(0,n().HB)(e)}(e):function(e){const{collectionSettingsStore:t,collectionContextStore:o}=e;"create_automation"===e.mode?i().L.setState({type:"open_automation",props:{mode:"create",collectionContextStore:o,collectionSettingsStore:t,from:e.from,source:e.source}}):"edit_automation"===e.mode?i().L.setState({type:"open_automation",props:{mode:"update",collectionContextStore:o,collectionSettingsStore:t,automationId:e.automationId,source:e.source}}):"edit_button_property"===e.mode?i().L.setState({type:"open_button",props:{collectionContextStore:o,collectionSettingsStore:e.collectionSettingsStore,propertyId:e.propertyId,propertySchema:e.propertySchema}}):(0,n().HB)(e)}(e)}function s(e){const{environment:t,collectionSettingsStore:o}=e;t.device.isMobile?r().yl({collectionSettingsStore:o}):i().L.setState({type:"closed"})}},838256:(e,t,o)=>{o.d(t,{IK:()=>d,UF:()=>u,VS:()=>g,aD:()=>p});o(944114);var n=()=>o(745875),r=()=>o(508496),i=()=>o(24157);const a=!1,s=15*o(720665).TD,l={user_flow_edit_block:.005,user_flow_edit_page_title:.01,user_flow_create_block:.01,user_flow_delete_block:.01};function c(e){if(a)return!0;const t=l[e];if(void 0!==t)return(0,n().ox)(t);const o=r().default.getConfigKey("event_trail_events",e);if("object"==typeof o&&"number"==typeof o.sampleRate)return(0,n().ox)(o.sampleRate);const i=r().default.getConfigKey("event_trail_events","defaultSampleRateUserFlows");return"number"==typeof i&&(0,n().ox)(i)}class d{constructor(e){this.stage=void 0,this.timeout=void 0,this.error=void 0,this.logDataInCaseOfFailure=void 0,this.postFinishCallbacks=[],this.environment=void 0,this.userFlow=void 0,this.entryPointName=void 0,this.handleTimeout=()=>{this.fail("timeout")};const{environment:t,userFlow:o,entryPointName:n,timeoutMs:r}=e;this.environment=t,this.userFlow=o,this.entryPointName=n;e.isEnabled??c(o)?(this.stage="inProgress",this.timeout=window.setTimeout(this.handleTimeout,r??s),this.debugLog("constructed")):this.stage="disable"}isDisabled(){return"disable"===this.stage}updateLogDataInCaseOfFailure(e){this.logDataInCaseOfFailure={...this.logDataInCaseOfFailure,...e}}succeed(){"inProgress"===this.stage&&this.finish("success")}fail(e){"inProgress"===this.stage&&(this.error=e,this.finish("fail"))}finish(e){this.stage=e,this.debugLog("finish"),"number"==typeof this.timeout&&window.clearTimeout(this.timeout),this.timeout=void 0,o(937075).lz(this.environment,this.userFlow,{status:e,error:this.error,entryPointName:this.entryPointName}),"fail"===e&&o(857639).log({level:"error",from:"userFlowActions",type:"userFlowFailed",data:{userFlow:this.userFlow,userFlowEntrypointName:this.entryPointName,userFlowError:this.error,...this.logDataInCaseOfFailure}});for(const t of this.postFinishCallbacks)t()}debugLog(){if(a){const n=this.entryPointName?`${this.userFlow}.${this.entryPointName}`:this.userFlow;for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.groupCollapsed(`${this.constructor.name} ${n} stage=${this.stage}`,...t),console.trace(),console.groupEnd()}}}class u extends d{constructor(e){super(e),this.pointer=void 0,this.succeedOnEnqueue=void 0,this.trackCallbacks=[];const{succeedOnEnqueue:t}=e;this.succeedOnEnqueue=t}track(e,t){if("inProgress"===this.stage&&void 0===this.pointer){this.pointer=e,m({tracker:this,transaction:t,succeedOnEnqueue:this.succeedOnEnqueue});for(const e of this.trackCallbacks)e();this.debugLog("track",e.id)}}}class p extends u{constructor(e,t){super({environment:e,userFlow:"user_flow_create_page",entryPointName:t,succeedOnEnqueue:!1}),this.handleTextSelectionChange=e=>{"inProgress"===this.stage&&this.pointer&&"editing"===e.state.mode&&(0,o(231722).KP)(e.state.multiSelection)&&e.state.multiSelection.start.store.pointer.id===this.pointer.id&&this.succeed()},"inProgress"===this.stage&&this.trackCallbacks.push((()=>{i().default.addListener(this.handleTextSelectionChange),this.postFinishCallbacks.push((()=>{i().default.removeListener(this.handleTextSelectionChange)}))}))}}function m(e){const{tracker:t,transaction:o,succeedOnEnqueue:n}=e;"inProgress"===t.stage&&(t.updateLogDataInCaseOfFailure({transactionId:o.id,transactionUserAction:o.getUserActionForAnalyticsPurposesOnly()}),o.annotateWithUserFlow(t.userFlow),o.postCancelCallbacks.push((()=>{t.fail("cancelled_transaction")})),o.postEnqueueActions.push((()=>{o.isEmpty()?t.fail("empty_transaction"):n&&t.succeed()})))}function g(e,t,o,n){if(!c(t))return;m({tracker:new d({environment:e,userFlow:t,isEnabled:!0,entryPointName:n}),transaction:o,succeedOnEnqueue:!0})}},838824:(e,t,o)=>{o.d(t,{Z:()=>a});var n=()=>o(705540),r=()=>o(755636),i=()=>o(780054);async function a(e){const{environment:t,targetSelf:o}=e,a=`${i().A.mail.domainBaseUrl}/inbox#activeUserID=${t.currentUser.id}`;if(t.device.isElectron){const{protocol:e}=i().A.mail;if(await n().isProtocolRegistered(e)){const t=a.replace(/^https?:/,`${e}:`);if(await n().openExternalUrl(t))return}}!function(e){const{environment:t,url:o,targetSelf:n}=e;r().f({environment:t,url:o,targetSelf:n})}({environment:t,url:a,targetSelf:o})}},838924:(e,t,o)=>{o.d(t,{ri:()=>d,s5:()=>c,x1:()=>l});var n=()=>o(56366),r=()=>o(757695),i=()=>o(604995),a=()=>o(767525);const s=new Map;function l(e){if(!s.has(e)){const t=r().default.createValue((()=>(0,i().ah)(e)),{name:"store"});s.set(e,t)}return s.get(e).state}function c(){return(0,n().K8)((()=>{const{zone:e}=(0,a().s1)();return l(e)}),[])}function d(){for(const[e,t]of s){const o=(0,i().ah)(e);t.state.equals(o)||t.setState(o)}}},839010:(e,t,o)=>{o.d(t,{A:()=>u});o(964979);var n=o(296540),r=()=>o(943846),i=()=>o(753199),a=o(474848);const s={position:"absolute",left:0,top:0,width:"100%",height:"100%",borderRadius:1};function l(e,t){const i=(0,n.useRef)(null),[s,l]=(0,n.useState)(!1),d=(0,n.useCallback)((()=>{document.activeElement&&document.activeElement===i.current&&document.activeElement.blur()}),[]);(0,n.useEffect)((()=>{d()}));const u=(0,n.useCallback)((()=>{const e=o(861841).Ay.state.isDragging,t=o(353643).A.state.isDragging,n=o(93658).default.state.isActive;l(e||t||n)}),[]);return(0,a.jsx)("div",{ref:t,style:e.style,onMouseMove:u,onMouseEnter:u,onMouseLeave:d,children:(0,a.jsx)("div",{style:(0,r().rS)(e),children:(0,a.jsx)(c,{ref:i,...e,disabled:s})})})}const c=n.forwardRef((function(e,t){const{background:l,disabled:c,onContentLoadTimeout:u,renderPreview:p,allow:m,source:g}=e,[f,v]=(0,n.useState)(!1),[h,_]=(0,n.useState)(!1),b=(0,n.useCallback)((e=>{e.preventDefault(),(0,i().SQ)({event:e,context:i().y$.EditorClick,callback:()=>{_(!0)}})}),[]),y=(0,n.useCallback)((()=>{v(!0)}),[]),S=(0,o(401497).IS)((e=>({iframe:{...s,pointerEvents:c?"none":"auto",backgroundColor:l?e.contentBackground:"none"}})),[l,c]);if(function(e,t){if(!window.__webViewTerminatedWhileAppActive)return!1;return!e&&Boolean(t)}(h,p))return(0,a.jsx)("div",{style:{...S.iframe,backgroundColor:"none"},onMouseDown:b,children:null==p?void 0:p()});const w=(0,r().NA)(g);return(0,a.jsx)(o(378765).A,{innerStyle:{height:"100%",width:"100%"},loaded:f,style:s,spinnerSize:"relative",showSpinnerTimeout:500,children:w&&(0,a.jsx)(d,{ref:t,sourceUrl:w,wrapperStyle:{...S.iframe,backgroundColor:"none"},style:S.iframe,allow:m,onLoad:y,onContentLoadTimeout:u})})})),d=n.forwardRef((function(e,t){const{sourceUrl:r,style:i,allow:s,onLoad:l,onContentLoadTimeout:c,wrapperStyle:d}=e,u=(0,o(484714).v3)(),[p,m]=(0,o(106959).jn)(),g=(0,n.useRef)(void 0),f=(0,o(93583).A)(t,g),v=(0,n.useRef)(void 0),h=u.device.isElectron?"allow-scripts allow-popups allow-forms allow-same-origin":"allow-scripts allow-popups allow-top-navigation-by-user-activation allow-forms allow-same-origin allow-storage-access-by-user-activation allow-popups-to-escape-sandbox",_=(0,n.useCallback)((()=>{if(o(508496).default.checkGate({gateName:"embed_block_fallback"})){let t;try{t=Boolean(g.current&&g.current.contentWindow&&"about:blank"!==g.current.contentWindow.location.href)}catch(e){if(e instanceof DOMException)return;throw e}t||null==c||c()}}),[c]),b=(0,n.useCallback)((()=>{l(),_()}),[_,l]);return(0,n.useEffect)((()=>(v.current=setTimeout(_,7e3),()=>{clearTimeout(v.current)})),[_]),(0,a.jsx)("div",{ref:p,style:d,children:m&&(0,a.jsx)("iframe",{ref:f,style:i,src:r,frameBorder:"0",onLoad:()=>{clearTimeout(v.current),b()},sandbox:h,allowFullScreen:!0,allow:s})})})),u=n.forwardRef(l)},840094:(e,t,o)=>{o.d(t,{OW:()=>g,Qj:()=>f,cN:()=>v});var n=()=>o(484714),r=()=>o(56366),i=()=>o(352271),a=()=>o(973647),s=()=>o(534177),l=()=>o(813297),c=()=>o(862292),d=()=>o(157857),u=()=>o(972435),p=()=>o(645873),m=()=>o(630116);function g(e){const{store:t,automationStore:o}=e,i=(0,n().v3)(),{value:a}=(0,p().fJ)(c().T.formulas),{value:s}=(0,p().fJ)(l().QV.automationTypecheck),{value:g}=(0,p().fJ)(l().QV.automationActionRegistry),f=i.currentUser.id;return(0,r().K8)((()=>{const e=t.getRecordStoreUIRoot();if(a&&s&&g&&o&&e instanceof m().Bv)return(0,d().lp)({environment:i,automationActionRegistryModule:g,automationStore:o,automationTypecheckModule:s,blockStore:t,currentUserId:f,isLoggedIn:i.currentUser.isLoggedIn(),formulasModule:a,intl:u().A.getIntl(),pageStore:e,parentRecordStore:o,type:"button_block"})}),[i,t,a,s,g,o,f])}function f(e){const{automationStore:t,propertyId:o,propertySchema:i,collectionContextStore:a}=e,s=(0,n().v3)(),m=s.currentUser.id,{value:g}=(0,p().fJ)(c().T.formulas),{value:f}=(0,p().fJ)(l().QV.automationTypecheck),{value:v}=(0,p().fJ)(l().QV.automationActionRegistry);return(0,r().K8)((()=>{if(g&&t&&f&&v)return(0,d().lp)({environment:s,automationActionRegistryModule:v,automationStore:t,automationTypecheckModule:f,collectionContextStore:a,currentUserId:m,formulasModule:g,intl:u().A.getIntl(),isLoggedIn:s.currentUser.isLoggedIn(),parentRecordStore:t,propertyId:o,propertySchema:i,type:"button_property"})}),[s,g,t,a,m,o,i,v,f])}function v(e){const t=f(e);return(0,r().K8)((()=>{const e=null==t?void 0:t.state;return!!(0,s().O9)(null==e?void 0:e.typecheckResult)&&(!a().Q.isFail(e.typecheckResult)&&(0,i().x4)(e.typecheckResult.value))}),[t])}},840153:(e,t,o)=>{o.d(t,{T:()=>_,V:()=>b});o(898992),o(354520);var n=()=>o(590966),r=()=>o(584262),i=()=>o(677338),a=()=>o(994310),s=()=>o(857783),l=()=>o(235921),c=()=>o(529543),d=()=>o(479954),u=()=>o(719431),p=()=>o(14307),m=()=>o(1130),g=()=>o(607859),f=()=>o(351360),v=()=>o(630116),h=()=>o(541258);async function _(e){const{newCurrentUserId:t,loggedOutUserId:o,environment:r}=e;await u().setLocalStorageUserId(r,t),(0,i().hn)(t),await c().setCookie(r,{name:"notion_user_id",value:t});const s=r.currentUser.loggedInUserIds.filter((e=>e!==o)),f=await c().getGhostAdminUserId(r),v={...r,currentUser:new(n().CurrentUser)({id:t,loggedInUserIds:s,adminUserId:f})};if(r.updateCurrentUserId){const e={environment:r,currentUserId:t,userIds:s};r.updateCurrentUserId(e)}a().A.set(d().l,t),p().resetRecordSubscriptions(),g().default.reset(),l().A.reset();return await m().Wj(r)&&m().ZS(v),await h().gB(v,t),v}async function b(e){const{newCurrentUserId:t,environment:o,store:n}=e,{mainEditorCurrentBlockStore:i}=f().default.state,a=await _({environment:o,newCurrentUserId:t});if(i){const e=new(v().Bv)(a,n.pointer);f().default.setState({...f().default.state,mainEditorCurrentBlockStore:void 0}),s().uK({environment:a,store:e,pageVisitSource:r().y8.SwitchSpace})}}},840790:(e,t,o)=>{o.d(t,{A:()=>i});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);class n extends(()=>o(757695))().default{getInitialState(){return{unsyncingBlockIds:new Set}}addUnsyncingBlockId(e){this.getState().unsyncingBlockIds.add(e),this.emit()}removeUnsyncingBlockId(e){this.getState().unsyncingBlockIds.has(e)&&(this.getState().unsyncingBlockIds.delete(e),this.emit())}}const r=new n;(0,o(604341).exposeDebugValue)("TransclusionBlockStore",r);const i=r},841696:(e,t,o)=>{o.d(t,{T:()=>n,Z:()=>r});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);const n=[o(179034).ev];class r{constructor(e){this.id=o(206267).JW(),this.spaceId=void 0,this.userId=void 0,this.committed=!1,this.isLocal=!1,this.useSudoMode=void 0,this.isUndoTransaction=void 0,this.isTemplateInstantiationTransaction=void 0,this.deadlockWarningTimeout=void 0,this.operations=[],this.stores=[],this.initialRecordMap=o(388821).RecordMapWithRole.create(),this.debugLogging=void 0,this.debugLog=[],this.invertedOperations=[],this.postPerformAssertions=[],this.preEnqueueActions=[],this.postEnqueueActions=[],this.postSubmitCallbacks=[],this.postCancelCallbacks=[],this.newlyCreatedStoresForPermissionInference=new(o(795727).A)({getKey:e=>(0,o(452540).jV)(e)}),this.userAction=void 0,this.userFlow=void 0,this.operation=void 0,this.tags=void 0,this.suggestionDiscussionStore=void 0;const{spaceId:t,userId:n,deadlockTimeoutMs:r,onDeadlockWarning:i,debugLogging:a,isUndoTransaction:s,isTemplateInstantiationTransaction:l}=e;t&&n&&(this.spaceId=t,this.userId=n),i&&(this.deadlockWarningTimeout=window.setTimeout(i,r)),this.debugLogging=a,this.isUndoTransaction=s,this.isTemplateInstantiationTransaction=l}getDebugLog(){return this.debugLog}logDebugMessage(e){var t,o;if(null!==(t=this.debugLogging)&&void 0!==t&&t.collect&&this.debugLog.push({operationsIndex:this.operations.length,message:e}),null!==(o=this.debugLogging)&&void 0!==o&&o.logToConsole){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];console.log(e,...r)}}isEmpty(){return 0===this.operations.length}annotateWithUserAction(e){this.userAction=e}annotateWithUserFlow(e){this.userFlow=e}annotateWithOperation(e){this.operation=e}annotationWithSuggestionDiscussionStore(e){if(this.suggestionDiscussionStore)throw new(o(416845).yI)("Already annotated with DiscussionStore");this.suggestionDiscussionStore=e}getSuggestionDiscussionStore(){return this.suggestionDiscussionStore}getUserActionForAnalyticsPurposesOnly(){return this.userAction}getUserFlowForAnalyticsPurposesOnly(){return this.userFlow}getOperationForAnalyticsPurposesOnly(){return this.operation}annotateWithDebugTag(e){this.tags||(this.tags=new Set),this.tags.add(e)}copyDebugTagsFrom(e){if(e.tags)for(const t of e.tags)this.annotateWithDebugTag(t)}getDebugTagsForAnalyticsPurposesOnly(){if(this.tags)return Array.from(this.tags)}cancelDeadlockWarning(){void 0!==this.deadlockWarningTimeout&&(window.clearTimeout(this.deadlockWarningTimeout),this.deadlockWarningTimeout=void 0)}done(e){this.cancelDeadlockWarning();for(const t of this.postSubmitCallbacks)t(e)}}},842989:(e,t,o)=>{o.d(t,{W:()=>n});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577);class n{constructor(e,t,o){if(this.maxDepth=void 0,this.start=void 0,this.end=void 0,this.startPathSet=void 0,this.endPathSet=void 0,this.isInStartPath=e=>this.startPathSet.has(e),this.isInEndPath=e=>this.endPathSet.has(e),this.commonAncestor=e,this.startPath=t,this.endPath=o,0===this.startPath.length||0===this.endPath.length)throw new Error(`Cannot create TreeRange with empty path: ${this.startPath} ${this.endPath}`);this.start=this.startPath[this.startPath.length-1],this.end=this.endPath[this.endPath.length-1],this.startPathSet=new Set(t),this.endPathSet=new Set(o),this.maxDepth=Math.max(this.startPath.length,this.endPath.length)}static fromNearestCommonAncestor(e,t){const n=(0,o(708830)._r)(e,t);if(!(n<0))return new this(e[n],e.slice(n),t.slice(n))}getStartBoundary(e){if(e>=this.startPath.length||e<0)return;const t=this.startPath[e];if(0===e&&this.startPath.length<=1&&this.endPath.length<=1)return{parentType:"commonAncestor",parent:t,childrenBeforeRange:[],childrenInsideRange:[],childrenAfterRange:t.children.slice()};const o=t.children.findIndex(this.isInStartPath)+1,n=t.children.findIndex(this.isInEndPath),r=t.children.slice(0,o),i=t.children.slice(o,-1===n?void 0:n+1),a=-1===n?[]:t.children.slice(n+1);return 0===e?{parentType:"commonAncestor",parent:t,childrenBeforeRange:r,childrenInsideRange:i,childrenAfterRange:a}:{parentType:"startPath",parent:t,childrenBeforeRange:r,childrenInsideRange:i}}getEndBoundary(e){if(e>=this.endPath.length||e<0)return;if(0===e)return this.getStartBoundary(0);const t=this.endPath[e],o=t.children.findIndex(this.isInStartPath)+1,n=t.children.findIndex(this.isInEndPath)+1,r=t.children.slice(o,n),i=t.children.slice(n);return{parentType:"endPath",parent:t,childrenInsideRange:r,childrenAfterRange:i}}getAnalagousNodesAtOffset(e){const t=this.startPath.length-1-e,o=this.endPath.length-1-e;return{start:this.getStartBoundary(t),end:this.getEndBoundary(o)}}*iterateAnalogousNodes(){for(let e=0;e<this.maxDepth;e++)yield this.getAnalagousNodesAtOffset(e)}getDeletionAtOffset(e){const{start:t,end:o}=this.getAnalagousNodesAtOffset(e),n=[];t&&t.childrenInsideRange.length>0&&n.push({operation:"delete",deleteFromParent:t.parent,deletingChildren:t.childrenInsideRange});const r=(null==t?void 0:t.parent)||this.commonAncestor;if(r&&o&&o.parent!==this.commonAncestor&&o.parent!==r&&o.childrenAfterRange.length>0){const e=r.children.find(this.isInStartPath);n.push({operation:"move",moveFromParent:o.parent,movingChildren:o.childrenAfterRange,moveToParent:r,moveToAdjacentSibling:e,moveToDirection:e?"listAfter":"listBefore"})}return n}*iterateDeletion(){for(let e=0;e<this.maxDepth;e++)yield*this.getDeletionAtOffset(e)}getInsertionAtOffset(e,t,o){const n=Math.max(0,e.length-1-t),r=e[n],i=e[n+1],{start:a,end:s}=this.getAnalagousNodesAtOffset(t),l=[];if(a&&a.childrenInsideRange.length>0){const e=o.get(r)||i;l.push({operation:"move",moveFromParent:a.parent,movingChildren:a.childrenInsideRange,moveToParent:r,moveToAdjacentSibling:e,moveToDirection:e?"listAfter":"listBefore"});const t=a.childrenInsideRange[a.childrenInsideRange.length-1];o.set(r,t)}const c=this.startPath.length-1-t,d=Math.min(c,this.endPath.length-1),u=this.getEndBoundary(d);if(u&&u.parent!==this.commonAncestor&&r!==e[0]){const e=r.children.indexOf(i)+1,t=r.children.slice(e);if(t.length){const e=0===u.childrenInsideRange.length&&u.childrenAfterRange.length>0,o=e?u.childrenAfterRange[0]:u.childrenInsideRange[u.childrenInsideRange.length-1];l.push({operation:"move",moveFromParent:r,movingChildren:t,moveToParent:u.parent,moveToAdjacentSibling:o,moveToDirection:e?"listBefore":"listAfter"})}}return s&&s.parent!==this.commonAncestor&&s.childrenAfterRange.length>0&&l.push({operation:"delete",deleteFromParent:s.parent,deletingChildren:s.childrenAfterRange}),l}*iterateInsertionAt(e){const t=new Map,o=[];for(let n=0;n<this.maxDepth;n++)o.push(...this.getInsertionAtOffset(e,n,t));yield*o}}},843005:(e,t,o)=>{o.d(t,{PE:()=>T,kR:()=>k,sp:()=>C,DZ:()=>y,t3:()=>I});o(18107),o(967357),o(581454),o(296540);var n=()=>o(700500),r=()=>o(496603),i=()=>o(534177),a=()=>o(317909),s=()=>o(938346),l=()=>o(89924),c=()=>o(645873);const d=new(c().O2)("NewPageInMenu",(async()=>Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(58795),o.e(99223),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(49889),o.e(97727),o.e(92860),o.e(86894),o.e(58550),o.e(22900),o.e(85128),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(47123),o.e(70769),o.e(97965),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(50142),o.e(20838),o.e(88860),o.e(83210),o.e(26090),o.e(10596),o.e(73285),o.e(78846),o.e(14310),o.e(13324),o.e(15724),o.e(89687),o.e(27274),o.e(99346),o.e(92448),o.e(23463),o.e(25426),o.e(91056),o.e(33194),o.e(1440),o.e(95810),o.e(29875),o.e(85475),o.e(35299),o.e(68117),o.e(33731),o.e(49471),o.e(31061)]).then(o.bind(o,141486)))),u=(0,c().jQ)(d,(e=>e.default));var p=()=>o(855801),m=()=>o(878377),g=()=>o(667925),f=()=>o(792609),v=()=>o(202786),h=()=>o(416726),_=o(474848);const b={column_list:!0,transclusion_container:!0},y=(0,o(959013).YK)({turnIntoSection:{id:"action.section.turnInto",defaultMessage:"Turn into"},newPageInName:{id:"action.pageIn.name",defaultMessage:"Page in"},turnIntoMention:{id:"action.turnIntoMention",defaultMessage:"Turn into mention"}}),S=(0,h().Ls)({key:"new page in section",displayName:y.newPageInName,analyticsName:y.newPageInName.defaultMessage,closeParentMenu:!0,svg:o(47966).Y,hideFromSlashActionMenu:!0,validators:[m().p2L,m().AU6(m().vEP),m().AU6(m().Xjv("page")),m().AU6(m().wHP),f().Y,m().pLL],render:(e,t,o)=>{const{onFocus:n,onAccept:r,extendItemTitle:i,sectionTitle:a}=o;return(0,_.jsx)(u,{...e,title:y.newPageInName,sectionTitle:a??"",showSectionTitle:Boolean(i),blocksToTransform:t.blocks,onFocus:n,onAccept:r?()=>r(S,t,void 0):void 0})},action:e=>{}});function w(e){const{showNewMABIcons:t}=e,o=(0,i().uv)(n().Si),r=o.findIndex((e=>"page"===e)),a=o.map((e=>A(e,t))),s=Object.values(n().sh).map((e=>A(e,t)));return[...a.slice(0,r+1),S,...a.slice(r+1),...s]}function k(e){const{showNewMABIcons:t}=e??{};return(0,h().gy)({key:"turn into actions",title:y.turnIntoSection,render:e=>(0,_.jsx)(l().A,{...e}),actions:w({showNewMABIcons:t})})}const I=k();function A(e,t){const o=g().ry[e],i=b[e];return{key:`turn into ${e}`,displayName:o.displayName,analyticsName:o.analyticsName,analyticsActionType:"turn_block_into",searchName:o.searchName,validators:r().oE([m().p2L,i?void 0:m().pLL,f().Y,"transclusion_container"===e?m().Uo6([m().AU6(m().uAU),x]):void 0,"slide"===e?m().QTI:void 0,(0,n().ZK)(e)?e=>1===e.blocks.length:void 0,(0,n().nH)(e)?e=>!1:void 0,"column_list"===e?e=>{if(!e.blocks)return!1;const t=e.blocks.length;if(t<2||t>5)return!1;const o=e.blocks[0].getParentBlockStore();if(!o)return!1;const n=e.blocks.map((e=>{const t=e.getParentBlockStore();return(null==t?void 0:t.id)!==o.id?-1:o.getRenderableContentIds().indexOf(e.id)}));for(let r=0;r<n.length;r++)if(r>0&&n[r-1]+1!==n[r])return!1;return!0}:void 0,(0,n().D)(e)?()=>!0:void 0,"mermaid_code_block"===e?()=>!1:void 0,"encrypted_text"===e?m().Y4D:void 0]),shortcuts:"transclusion_container"===e?["group"]:void 0,closeParentMenu:!0,action:(0,h().G9)("turn_into",(async(t,o)=>{let{environment:n,blocks:r}=o;const i=await(0,p().zQ)(),{serverCommitResult:s}=a().createAndCommit({userAction:`actionRegistry.turnIntoAction.${e}`,environment:n,canUndo:!0,perform:t=>{i({environment:n,blocks:r,blockType:e,transaction:t})}});s.then(t)})),render:(e,t,n)=>{const{extendItemTitle:r,sectionTitle:i,styles:a}=n,l=C(t,o);return(0,_.jsx)(s().Ay,{...e,...o,title:o.displayName,format:s().og.TurnInto,selected:l,showSectionTitle:Boolean(r),sectionTitle:i??"",desktopTitleStyle:null==a?void 0:a.desktopTitleStyle})},nativeImageReference:()=>(0,h().eW)({thumbnail:!0===t&&o.mobileNativeThumbnail?o.mobileNativeThumbnail():o.thumbnail})}}function x(e){return!(0,v().T)()||m().c5w()&&m().FEq(e)}function C(e,t){const o=e.blocks[0];if(!o)return!1;const n=o.getType()===t.blockType;if(n&&("header"===t.blockType||"sub_header"===t.blockType||"sub_sub_header"===t.blockType)){const e=o.getFormat().toggleable;return!(e&&!t.key.includes("toggle"))&&!(!e&&t.key.includes("toggle"))}return n}const T={key:"convert link",render:e=>(0,_.jsx)(l().A,{...e}),actions:[(0,h().Ls)({key:"turn to mention",displayName:y.turnIntoMention,analyticsName:y.turnIntoMention.defaultMessage,validators:[m().p2L,m().bdp],closeParentMenu:!0,svg:o(673724).I,action:e=>{let{blocks:t,environment:r}=e;const i=t.at(0);null!=i&&i.isType(n().xd.alias)&&o(62287).Ff(r,i)}})]}},843757:(e,t,o)=>{o.d(t,{P:()=>n});const n=new(o(848776).U)((e=>{let{spaceId:t}=e;return t}),(async function(e,t){let{spaceId:n}=t;const r=await Promise.resolve().then(o.bind(o,449506)),i=await r.callApi({eventName:"countUsers",environment:e,data:{spaceId:n}});return"success"===i.type?i.data:void 0}));o(604341).exposeDebugValue("UserCountsStore",n)},845489:(e,t,o)=>{o.d(t,{J:()=>a,b:()=>i});o(898992),o(672577);var n=()=>o(496603),r=()=>o(301421);function i(e){const t=r().n.getMembersByDOMOrder({filter:e=>!e.props.store.inMemoryRecordCache.isMockTextStore}),o=n().SL(t,(t=>t.props.store===e)),i=t.find(((e,t)=>t>o&&e.props.canInsertText));return null==i?void 0:i.props.store}function a(e){const t=r().n.getMembersByDOMOrder({filter:e=>!e.props.store.inMemoryRecordCache.isMockTextStore}),o=n().SL(t,(t=>t.props.store===e)),i=n().Uk(t,((e,t)=>t<o&&e.props.canInsertText));return null==i?void 0:i.props.store}},845710:(e,t,o)=>{o.d(t,{Pd:()=>_,J1:()=>h,gm:()=>v,uX:()=>b,n_:()=>m,U5:()=>y,u4:()=>S});o(898992),o(354520),o(803949),o(814603),o(147566),o(198721);var n=()=>o(496603),r=()=>o(229833),i=()=>o(498212),a=()=>o(249386),s=()=>o(584262);var l=()=>o(857639);let c,d;const u=new(s().qK)((async e=>{const{config:t,endpoint:n,deviceId:r}=e,l=await o.e(89920).then(o.bind(o,939302));return await new Promise((e=>{const u=`${new URL(t.domainBaseUrl).origin}${t.api.http}/${n||o(785082).i4}`;let p;r&&(p=r.startsWith("w_")||r.startsWith("a_")?r.replaceAll("-",""):(0,i().S2)(r));const m=p;l.init("notion","",{serverUrl:u,deviceId:m,autocapture:!1,identityStorage:"localStorage",flushQueueSize:50}),t.env,d="2023092001",e(l),function(){const e=(0,o(939768).bk)(c||"");if(!e)return;const t={utm_campaign:e.searchParams.get("utm_campaign")||a().HM,utm_content:e.searchParams.get("utm_content")||a().HM,utm_medium:e.searchParams.get("utm_medium")||a().HM,utm_source:e.searchParams.get("utm_source")||a().HM,utm_term:e.searchParams.get("utm_term")||a().HM};h({traits:(0,s().B5)({...t})})}()}))}));function p(e){const{eventName:t,eventProperties:o,groupProperties:i,statusCode:a,message:s}=e,c={data:{eventName:t,eventProperties:n().cJ(o,"experiments"),groupProperties:i},statusCode:a,message:s};l().rateLimitedLog({level:"error",from:"eventTrailApiHelpers",type:"trackFailure",error:(0,r().n6)(c)})}async function m(e){c=window.location.href;const{config:t,isEnabled:o,endpoint:n,deviceId:i}=e;try{await u.load({config:t,isEnabled:o,endpoint:n,deviceId:i})}catch(a){l().log({level:"error",from:"eventTrailApiHelpers",type:"initialize",error:(0,r().n6)(a)})}}async function g(e){const{traits:t,traitsWithOperations:n}=e,r=new(await async function(){const{Identify:e}=await o.e(89920).then(o.bind(o,939302));return e}());if(t)for(const o of Object.keys(t)){const e=t[o];void 0!==e&&(Array.isArray(e)?r.append(o,e):r.set(o,e))}if(n)for(const o of n)"set"===o.operation?r.set(o.name,o.value):"setOnce"===o.operation&&r.setOnce(o.name,o.value);return r}async function f(e,t,o){const n=t.getUserProperties(),r=await o.track({event_type:e,event_properties:n,version_name:d}).promise;200!==r.code&&p({eventName:e,eventProperties:n,groupProperties:void 0,statusCode:r.code,message:r.message})}async function v(e){const{userId:t,traits:o,spaceIds:r}=e,a=await u.getInstance();if(!a)return;a.setUserId((0,i().S2)(t));const s=await g({traits:o});return r&&s.set("workspace",n().sb(r)),f("$identify_user",s,a)}async function h(e){const{traits:t}=e,o=await u.getInstance();if(!o)return;return f("$identify_device",await g({traitsWithOperations:t}),o)}async function _(){const e=await u.getInstance();null==e||e.setUserId(void 0)}async function b(e){const{spaceId:t,spaceData:o}=e;if(!t)return;const r=await u.getInstance();if(!r)return;const i=n().o8(o),a=Object.entries(i).filter((e=>{let[t,o]=e;return Array.isArray(o)}));a.forEach((e=>{let[t,o]=e;return delete i[t]}));let s=await g({traits:i});a.forEach((e=>{let[t,o]=e;return s=s.set(t,o)})),r.groupIdentify("workspace",t,s)}async function y(e){const t=await u.getInstance();t&&t.setDeviceId((0,i().S2)(e))}async function S(e){const{eventName:t,eventData:o,spaceId:n}=e,r=await u.getInstance();if(!r)return;const i=n?{workspace:n}:void 0,a=await r.track({event_type:t,event_properties:o,groups:i,version_name:d}).promise;200!==a.code&&p({eventName:t,eventProperties:o,groupProperties:i,statusCode:a.code,message:a.message})}},845715:(e,t,o)=>{o.d(t,{K:()=>i});var n=()=>o(56366),r=()=>o(322931);function i(e,t){return(0,n().K8)((()=>!(!e||!t)&&(0,r().z)(e,t)),[t,e])}},846662:(e,t,o)=>{o.d(t,{X$:()=>u,Z0:()=>d,gV:()=>c});var n=()=>o(700500),r=()=>o(15440),i=()=>o(713998),a=()=>o(797809),s=()=>o(178687),l=()=>o(508496);function c(e){if(!e.isType(n().xd.code))return!1;const t=d(e),o=(0,r().OG)(t),i=u(e);return o&&("preview"===i||"split_view"===i)&&l().default.checkGate({gateName:"resizable_code_block"})}function d(e){const t=e.getProperties()||{},o=i().L3(t.language,a().h5);return o&&(0,r().aN)(o)?o:s().j.defaultLanguage}function u(e){const t=d(e);return(0,r().OG)(t)?e.getFormat().code_preview_format??"split_view":s().j.defaultCodePreviewFormat}},846899:(e,t,o)=>{o.d(t,{B:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("settings",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.30957 15.4814H8.69043C9.25781 15.4814 9.70215 15.1328 9.83203 14.5928L10.1123 13.3828L10.29 13.3145L11.3428 13.9639C11.8213 14.2646 12.3818 14.1895 12.7783 13.7861L13.7354 12.8291C14.1455 12.4258 14.2139 11.8652 13.9131 11.3936L13.2637 10.3477L13.3252 10.1768L14.5352 9.89648C15.0684 9.75977 15.4238 9.31543 15.4238 8.75488V7.4082C15.4238 6.84766 15.0752 6.40332 14.5352 6.2666L13.3389 5.97949L13.2705 5.80176L13.9199 4.75586C14.2207 4.28418 14.1455 3.73047 13.7422 3.31348L12.7852 2.35645C12.3887 1.95996 11.8281 1.88477 11.3564 2.17871L10.3037 2.82129L10.1123 2.74609L9.83203 1.53613C9.70215 0.996094 9.25781 0.647461 8.69043 0.647461H7.30957C6.73535 0.647461 6.29785 0.996094 6.16797 1.53613L5.8877 2.74609L5.69629 2.82129L4.64355 2.17871C4.16504 1.88477 3.60449 1.95996 3.20801 2.35645L2.25098 3.31348C1.84766 3.73047 1.77246 4.28418 2.07324 4.75586L2.72949 5.80176L2.6543 5.97949L1.46484 6.2666C0.917969 6.40332 0.576172 6.84766 0.576172 7.4082V8.75488C0.576172 9.31543 0.924805 9.75977 1.46484 9.89648L2.66797 10.1768L2.73633 10.3477L2.08008 11.3936C1.7793 11.8652 1.85449 12.4258 2.25781 12.8291L3.21484 13.7861C3.61816 14.1895 4.17871 14.2646 4.65039 13.9639L5.70312 13.3145L5.8877 13.3828L6.16797 14.5928C6.29785 15.1328 6.73535 15.4814 7.30957 15.4814ZM7.47363 14.2441C7.35742 14.2441 7.30273 14.1895 7.28223 14.0869L6.87891 12.4053C6.44141 12.3027 6.03125 12.1318 5.69629 11.9199L4.21973 12.8291C4.1377 12.8838 4.05566 12.877 3.9668 12.7949L3.24219 12.0703C3.16699 11.9951 3.16016 11.9131 3.22168 11.8242L4.13086 10.3477C3.93945 10.0264 3.75488 9.61621 3.65234 9.18555L1.96387 8.78223C1.86133 8.76172 1.81348 8.70703 1.81348 8.59082V7.56543C1.81348 7.44238 1.86133 7.39453 1.96387 7.36719L3.65234 6.9707C3.75488 6.5127 3.95312 6.08887 4.11719 5.79492L3.21484 4.3252C3.15332 4.22949 3.15332 4.14746 3.23535 4.06543L3.95996 3.34766C4.04883 3.27246 4.11719 3.25879 4.21973 3.31348L5.68945 4.20898C5.99707 4.02441 6.44824 3.83301 6.87891 3.72363L7.28223 2.04199C7.30273 1.93945 7.35742 1.88477 7.47363 1.88477H8.52637C8.64258 1.88477 8.69727 1.93262 8.71094 2.04199L9.12109 3.7373C9.56543 3.83984 9.96875 4.02441 10.3037 4.21582L11.7734 3.32031C11.876 3.26562 11.9443 3.27246 12.0264 3.35449L12.7578 4.07227C12.8398 4.14746 12.8398 4.22949 12.7783 4.3252L11.876 5.79492C12.04 6.08887 12.2451 6.5127 12.3477 6.9707L14.0293 7.36719C14.1387 7.39453 14.1865 7.44238 14.1865 7.56543V8.59082C14.1865 8.70703 14.1318 8.76172 14.0293 8.78223L12.3408 9.18555C12.2383 9.61621 12.0537 10.0264 11.8691 10.3477L12.7715 11.8242C12.8262 11.9131 12.8262 11.9951 12.751 12.0635L12.0264 12.7949C11.9375 12.877 11.8555 12.8838 11.7734 12.8291L10.2969 11.9199C9.96191 12.1318 9.57227 12.3027 9.12109 12.4053L8.71094 14.0869C8.69727 14.1963 8.64258 14.2441 8.52637 14.2441H7.47363ZM8 10.6621C9.42188 10.6621 10.5908 9.49316 10.5908 8.06445C10.5908 6.64941 9.42188 5.48047 8 5.48047C6.57812 5.48047 5.40234 6.64941 5.40234 8.06445C5.40234 9.49316 6.57129 10.6621 8 10.6621ZM8 9.49316C7.2207 9.49316 6.57812 8.85059 6.57812 8.06445C6.57812 7.29199 7.2207 6.65625 8 6.65625C8.76562 6.65625 9.40137 7.29199 9.40137 8.06445C9.40137 8.84375 8.76562 9.49316 8 9.49316Z"})})},846955:(e,t,o)=>{o.r(t),o.d(t,{default:()=>y,orderedChatWithAiHomeChecklistTourSteps:()=>a,orderedCollaborateTourSteps:()=>s,orderedCreatePageHomeChecklistTourSteps:()=>i,orderedExploreCommunityTemplatesInAppTourSteps:()=>p,orderedExploreCommunityTemplatesTourSteps:()=>u,orderedExploreDocsTemplateTourSteps:()=>l,orderedExploreGettingStartedTemplateTourSteps:()=>m,orderedExplorePersonalTemplateTourSteps:()=>d,orderedExplorePrivateTemplateTourSteps:()=>c,orderedHomeChecklistWorkspaceTourSteps:()=>r,orderedHomeTopbarActionButtonTourSteps:()=>g,orderedTeamSidebarTourSteps:()=>n,orderedTeamWorkflowTemplatesTourSteps:()=>f,tourIsActive:()=>h,tourIsActiveInSidebarStep:()=>_});const n=["welcome","actions","teamspaces","prebuilt_templates","private","ai_assistant"],r=["actions","teamspaces","private"],i=["create_page_sidebar","create_page_start_with_title","create_page_type_slash","create_page_beyond_text"],a=["chat_with_ai"],s=["collaborate","collaborate_copy_link","collaborate_add_member"],l=["explore_team_template"],c=["explore_private_template"],d=["explore_personal_template"],u=["explore_templates","browse_templates"],p=["explore_templates"],m=["explore_getting_started_template"],g=["home_topbar_action_button"],f=["teamspaces"],v=["welcome","actions","teamspaces","prebuilt_templates","private","explore_templates","home","create_page_sidebar","chat_with_ai","explore_team_template"];function h(e){return"inactive"!==e.type}function _(e){return"inactive"!==e.type&&v.includes(e.step)}class b extends(()=>o(757695))().default{getInitialState(){return{type:"inactive"}}dismissTourTutorial(){this.setState({...this.state,type:"inactive"})}isTutorialStepActive(e){return"inactive"!==this.state.type&&this.state.step===e}}const y=new b},847307:(e,t,o)=>{o.d(t,{v:()=>S,C:()=>w});o(898992),o(354520),o(803949),o(581454);var n=()=>o(386164);const r=["2021-05-11","2021-05-13","2021-08-16","2022-02-22","2022-06-28"],i=r[r.length-1];o(377315).CA.literals(...r);var a=()=>o(824862),s=()=>o(798880),l=()=>o(606219),c=()=>o(496603),d=()=>o(559926),u=()=>o(594794),p=()=>o(972435),m=()=>o(351360),g=()=>o(508496),f=()=>o(630116),v=()=>o(449506),h=()=>o(901389),_=()=>o(246826),b=()=>o(317909);const y=(0,o(959013).YK)({webhookUrlError:{id:"webhookActions.webhookUrlError",defaultMessage:"Connection failed. Please wait and try again or try another URL."}});async function S(e){const{environment:t,integration:o,webhookUrl:n,webhookSecret:r,webhookHeaders:g,webhookSubscriptionId:S,onError:w,onSuccess:k=(()=>{})}=e,{currentUserRootStore:I,currentSpaceStore:A}=m().default.state;if(!I||!A)return{error:{success:!1}};const x={};g.map((e=>{const{key:t,value:o}=e;return{key:t.trim(),value:String(o).trim()}})).filter((e=>{let{key:t,value:o}=e;return t&&o})).forEach((e=>{let{key:t,value:o}=e;x[t]=o}));const C={headers:x};if("failed"===(await v().callApi({eventName:"testWebhookConnection",environment:t,data:{integrationId:o.id,webhookUrl:n,webhookSecret:r||void 0,webhookCustomization:C}})).type)return h().f1(p().A.formatMessage(y.webhookUrlError)),{error:{success:!1}};const{serverCommitResult:T}=b().createAndCommit({userAction:"webhookActions.createWebhookSubscription",environment:t,canUndo:!0,perform:p=>{p.postSubmitCallbacks=[w];const g=Date.now(),v=A.id;if(e.webhookSubscriptionId){const e=m().default.state.currentSpaceStore,i=S&&e?f().Pr.createChildStore(e,{id:S,table:l().TF,spaceId:e.id}):void 0;if(i){const e=i.getWebhookUrl()!==n,a=i.getWebhookSecret()!==r,s=!c().n4(i.getWebhookCustomization(),C);(e||a||s)&&(d().zW(t,{integration_id:o.id,has_updated_webhook_url:e||void 0,has_updated_webhook_secret:a||void 0}),_().zv({transaction:p,data:{webhook_url:n,webhook_secret:r,webhook_customization:C,health:{status:"active"}},store:i}))}}else{const e=(0,u().Z1)({environment:t,table:a().GP,spaceId:v});_().eC({environment:t,table:a().GP,value:{id:e,space_id:v,parent_id:A.id,parent_table:"space",type:"external",alive:!0,name:o.getName(),icon:o.getInfo().icon,integration_id:o.id,capabilities:o.getCapabilities(),created_at:g,last_edited_at:g,last_edited_by_id:I.id,created_by_id:I.id,created_by_table:s().oo,last_edited_by_table:s().oo},inMemoryRecordCache:A.inMemoryRecordCache,transaction:p}),_().eC({environment:t,table:l().TF,value:{id:(0,u().Z1)({environment:t,spaceId:v,table:l().TF}),bot_id:e,space_id:v,parent_id:A.id,api_version:i,webhook_url:n,webhook_secret:r,webhook_customization:C,parent_table:"space",last_edited_time:g,last_edited_by_id:I.id,created_by_id:I.id,created_time:g,created_by_table:s().oo,last_edited_by_table:s().oo,health:{status:"active"}},inMemoryRecordCache:A.inMemoryRecordCache,transaction:p}),d().dm(t,{integration_id:o.id,configuration_type:"manual",bot_id:e})}}});return await T,k(),{value:{success:!0}}}async function w(e){const t=g().default.checkGate({gateName:"webhooks_beta"}),{environment:o,spaceId:r}=e;if(!o.currentUser.isLoggedIn()||!t)return{webhookSubscriptionIds:[],recordMap:{__version__:3}};const i=await v().callApi({eventName:"getWebhookSubscriptions",environment:o,data:{spaceId:r},headers:(0,n().WS)({cellId:void 0,spaceId:r})});if("failed"===i.type)throw i.error;return i.data}},847463:(e,t,o)=>{o.d(t,{Sk:()=>i,lz:()=>r,vY:()=>a,vs:()=>s});o(944114);var n=()=>o(496603);function r(e){if(0===e.length)return{tasks:[]};const t={tasks:[],userId:e[0].userId};for(const o of e){if(t.userId!==o.userId)return t;const e=JSON.stringify(n().qI(t.tasks,(e=>e.operations))).length;if(e>=s)return 0===t.tasks.length&&t.tasks.push(o),t;t.tasks.push(o)}return t}function i(e){const{transaction:t,timestamp:o,callback:n}=e;return{id:t.id,userId:t.userId,spaceId:t.spaceId,debug:{userAction:t.getUserActionForAnalyticsPurposesOnly(),userFlow:t.getUserFlowForAnalyticsPurposesOnly(),tags:t.getDebugTagsForAnalyticsPurposesOnly()},timestamp:o,operations:t.operations,callback:n,useSudoMode:t.useSudoMode,isUndoTransaction:t.isUndoTransaction,isTemplateInstantiationTransaction:t.isTemplateInstantiationTransaction}}function a(e){const t=i({transaction:e,timestamp:Date.now(),callback:void 0});return JSON.stringify(t).length>s}const s=1e5},847554:(e,t,o)=>{o.d(t,{H:()=>d,b:()=>c});var n=()=>o(484714),r=()=>o(56366),i=()=>o(351360),a=()=>o(21735),s=()=>o(843757),l=()=>o(134217);function c(e){const t=(0,n().v3)();return(0,r().K8)((()=>{const o=i().default.state.currentSpaceStore;return o&&e?d(t,o.id,e):1}),[t,e])}function d(e,t,o){if(a().A.state.shouldUseEdgeCache){const o=s().P.getData(e,{spaceId:t}),n=((null==o?void 0:o.member)??0)+((null==o?void 0:o.membership_admin)??0)+((null==o?void 0:o.owner)??0);return 0===n?1:n}return(0,l().Ye)(o).length}},847743:(e,t,o)=>{o.d(t,{AI:()=>f,Pe:()=>v});o(814603),o(147566),o(198721);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(206267),s=()=>o(792071),l=()=>o(179034),c=()=>o(798880),d=()=>o(496603),u=()=>o(498212),p=()=>o(246125),m=()=>o(351360),g=()=>o(630116);function f(e){const{initialValue:t,onChange:o,source:f="title",properties:v}=e,h=(0,i().K8)((()=>{var e;return null===(e=m().default.getState().currentSpaceStore)||void 0===e?void 0:e.id}),[]),_=(0,r().v3)(),b=(0,p().l)("formulaPrototypeHelpers.useMockTextStore",{isMockTextStore:!0,overrideDefaultRecordCache:!0}),y=function(e){const{initialValue:t,inMemoryRecordCache:o,source:i,properties:d,spaceId:p}=e,m=(0,r().v3)(),f=(0,n.useMemo)((()=>t),[]);return(0,n.useMemo)((()=>{const e=m.currentUser.id??u().rN,t={id:a().JW(),table:l().ev},{model:n}=s().zgg.create({createdBy:{id:e,table:c().oo},id:t.id,parent:{id:u().rN,table:l().ev},properties:{[i]:f,...d},space_id:p??u().rN,type:"page"},{useCrdt:!1});o.setModelAndRole({pointer:n.pointer,userId:e},n,"editor");const r=new(g().pm)({environment:m,path:["properties",i],pointer:t,recordStoreOptions:{inMemoryRecordCache:o,userId:e}});return o.emitRecord(t,[]),r}),[d,m,o,f,i,p])}({initialValue:t,inMemoryRecordCache:b,source:f,spaceId:h,properties:v}),S=(0,n.useRef)(t),w=(0,n.useCallback)((e=>{const t=_.currentUser.id,o=y.getRecordStoreAtRootPath();if(o instanceof g().Bv){const n=o.getValue();n&&(b.setRecord({pointer:y.pointer,userId:t},{role:"editor",value:{...n,properties:{...null==n?void 0:n.properties,[f]:e}}}),b.emitRecord(y.pointer,[]))}}),[_.currentUser.id,y,b,f]);return(0,i().K8)((()=>{const e=y.getValue();d().n4(S.current,e)||(S.current=e,null==o||o(e))}),[y,o]),{store:y,setValue:w}}const v=(()=>{try{return"true"===new URLSearchParams(window.location.search).get("disableFormulas")}catch(e){return!1}})()},848237:(e,t,o)=>{o.d(t,{z9:()=>ge,mm:()=>Te,lJ:()=>De,qS:()=>ie,Fj:()=>ye,pW:()=>Be,O:()=>Ne,rU:()=>_e,Zd:()=>be,e2:()=>ve,JC:()=>ke,M8:()=>we,vn:()=>me,L0:()=>Ee,BQ:()=>Ae,fy:()=>Ie,P8:()=>de,Q8:()=>Me,Mh:()=>Re,qH:()=>ue,HU:()=>re,b4:()=>pe,xp:()=>ne,FE:()=>te,n7:()=>J,WC:()=>ee,_B:()=>Pe,D6:()=>se,Nd:()=>ae,F2:()=>Se});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(672577),o(430670),o(581454),o(737550);var n=()=>o(584262),r=()=>o(945382),i=()=>o(857639),a=()=>o(433847),s=()=>o(68263),l=()=>o(120739),c=()=>o(96689),d=()=>o(854150),u=()=>o(798880),p=()=>o(468006),m=()=>o(229833),g=()=>o(534177),f=()=>o(720665),v=()=>o(701763),h=()=>o(946141),_=()=>o(449506),b=()=>o(901389),y=()=>o(579627),S=()=>o(246826),w=()=>o(857783),k=()=>o(435009),I=()=>o(426116),A=()=>o(955930),x=()=>o(317909),C=()=>o(664713),T=()=>o(186445),M=()=>o(972435),P=()=>o(347199),B=()=>o(953418),R=()=>o(213525),E=()=>o(45359),D=()=>o(37433),N=()=>o(646736),L=()=>o(578136),F=()=>o(585533),U=()=>o(456663),O=()=>o(632709),V=()=>o(351360),j=()=>o(210737),z=()=>o(630116),q=()=>o(663325),H=()=>o(486130),W=()=>o(224701),K=()=>o(134217),G=()=>o(10984),$=()=>o(749240),Y=()=>o(846955),Q=()=>o(685781),Z=()=>o(134206);var X=()=>o(947688);function J(e){const{store:t,update:o,transaction:n}=e;S().zv({store:t,data:(0,f().g_)(o),transaction:n})}function ee(e){let{environment:t,store:o,update:n,transaction:r}=e;const i=function(e){let{store:t,update:o}=e;const n=t.getSettingsStore().getValue();if(!n)return{};const r={};for(const i in o)r[i]=n[i];return r}({store:o,update:n});S().zv({store:o.getSettingsStore(),data:(0,f().g_)(n),transaction:r}),h().By(t,{store:o,old_settings:i,updated_settings:n})}async function te(e){let{environment:t,spaceStore:o,addedStores:n,removedStores:r,createNewTeamFlowId:i,from:a}=e;const s=t.currentUser.id;if(!s||n.some((e=>!e.isDefined())))return!1;const l=(0,N().dp)(o,s);if(await l.load(),!l.isWorkspaceOwner())throw new Error("Only admins can update default teams");const{performResult:{results:c},serverCommitResult:d}=x().createAndCommit({environment:t,userAction:"teamActions.updateDefaultTeams",canUndo:!0,perform:e=>{const o=[];for(const r of n){const n=oe({environment:t,transaction:e,teamStore:r,isDefault:!0,from:a,createNewTeamFlowId:i});o.push(n)}for(const n of r){const r=oe({environment:t,transaction:e,teamStore:n,isDefault:!1,from:a,createNewTeamFlowId:i});o.push(r)}return{results:o}}});return await d,await W().Ow(t),c.every((e=>e))}function oe(e){let{environment:t,transaction:o,teamStore:n,isDefault:r,from:i,createNewTeamFlowId:a}=e;if(n.isArchived()&&r)throw new Error("Archived team cannot be set as default team.");return n.isDefault()===r||(S().zv({store:n,data:{is_default:r},transaction:o}),o.postSubmitCallbacks.push((e=>{e||h().ug(t,{store:n,is_default_team:r,create_new_team_flow_id:a,from:i})}))),!0}function ne(e){var t;const{environment:o,teamStore:n,newRole:r,transaction:i,permissionsToClear:a}=e,l=a.map((e=>({...e,role:"none"}))),c=(null===(t=n.getTeamPermission())||void 0===t?void 0:t.role)??"none",d={type:"explicit_team_permission",team_id:n.id,role:r};l.push(d),y().bo({environment:o,store:n,permissionItems:l,transaction:i}),n.isDefault()&&y().bo({environment:o,store:n,permissionItems:[{type:"space_permission",role:r}],transaction:i}),(0,s().p2)(c)||!(0,s().p2)(r)||n.getDisableTeamPageEdits()||ee({environment:o,store:n,update:{disable_team_page_edits:!0},transaction:i})}function re(e){const{environment:t,teamStore:o,newRole:n,transaction:r,permissionsToClear:i}=e,a=i.map((e=>({...e,role:"none"}))),s={type:"explicit_team_guest_permission",team_id:o.id,role:n};a.push(s),y().bo({environment:t,store:o,permissionItems:a,transaction:r})}function ie(e){let{memberInfo:t,teamStore:o,transaction:n,environment:r,permissionRole:i}=e;const s=o.getMembershipDefinedOnTeam();if("member"===t.type)return!1;if(!o.isDefined())return!1;const l=o.getPermissionItems(),c=o.id;if(i&&(0,a().or)({teamValue:{id:c,permissions:l},permissionRole:i}))throw new Error("Cannot set member's permission to be lower than default team permission.");const{userIds:d,groupIds:u}=(0,p().Vv)({membership:s});if("user"===t.entity_type){if(!d.includes(t.user_id))throw new Error("Specified user is not an owner of the team")}else if("group"===t.entity_type&&!u.includes(t.group_id))throw new Error("Specified group is not an owner of the team");let m=!1;if(s.length>0){const e=o.getMembershipDefinedOnTeam().filter((e=>!le(e,t)));m=s.length!==e.length;const i=[{...t,type:"member"},...e];x().applyOperation({store:o,operation:{pointer:o.pointer,path:["membership"],command:"set",args:i},transaction:n}),v().KI(r,{store:o,memberInfo:t,team_role:"member"})}let g=i||"none";const f=(0,p().ST)({id:c,permissions:l});return f&&i===f&&(g="none"),y().bo({environment:r,store:o,permissionItems:[ce({memberInfo:t,newRole:g})],transaction:n,skipAnalytics:m})}function ae(e){let{environment:t,userId:o,teamStore:n,spaceStore:r,transaction:i,newTeamRole:a}=e;if(!n.isDefined())return!1;const s=n.getRawMembership().find((e=>"user"===e.entity_type&&e.user_id===o));return void 0!==s&&(s.type!==a&&(x().applyOperation({store:n,operation:{pointer:n.pointer,path:["membership"],command:"setTeamMembershipItem",args:{entity_type:"user",type:a,user_id:o}},transaction:i}),y().dy({environment:t,spaceStore:r,permissionItems:[{type:"user_permission",role:"read_and_write",user_id:o}],transaction:i}),de({environment:t,memberInfo:s,teamStore:n,transaction:i}),!0))}function se(e){let{environment:t,memberInfo:o,teamStore:n,transaction:r}=e;if("owner"===o.type)return!1;if(!n.isDefined())return!1;const i=n.getMembershipDefinedOnTeam().filter((e=>!le(e,o))),a=[{...o,type:"owner"},...i];return x().applyOperation({store:n,operation:{pointer:n.pointer,path:["membership"],command:"set",args:a},transaction:r}),v().KI(t,{store:n,memberInfo:o,team_role:"owner"}),de({environment:t,memberInfo:o,teamStore:n,transaction:r}),!0}function le(e,t){return"user"===e.entity_type&&"user"===t.entity_type?e.user_id===t.user_id:"group"===e.entity_type&&"group"===t.entity_type&&e.group_id===t.group_id}function ce(e){let{memberInfo:t,newRole:o}=e;return"user"===t.entity_type?{type:"user_permission",user_id:t.user_id,role:o}:{type:"group_permission",group_id:t.group_id,role:o}}function de(e){let{environment:t,memberInfo:o,teamStore:n,transaction:r}=e;return!!n.getPermissionItems()&&(y().bo({environment:t,store:n,permissionItems:[ce({memberInfo:o,newRole:"none"})],transaction:r}),!0)}async function ue(e){let{store:t,environment:o,accessLevel:n,teamName:r,from:i,isDefault:a}=e;const{currentSpaceStore:s}=V().default.getState();if(!s)throw new Error("currentSpaceStore does not exist");const l=t.isDefault()??!1,c=t.getTeamAccessLevel(),d=(0,p().gm)({membership:t.getRawMembership()}).length;if(n===c&&a===l)return!1;if(!(await R().oP({teamName:r,accessLevel:n,currentIsDefault:l,isDefault:a,numberOfTeamGuests:d})))return!1;const u=t.getPermissionItems(),m=t.getSettingsStore().getValue();if(!m||!u)return!1;const g=(0,p().gP)({teamValue:{id:t.id,permissions:u,settings:m},accessLevel:n,isDefault:a}),{performResult:{result:f}}=x().createAndCommit({userAction:"teamActions.setTeamAccessLevel",environment:o,canUndo:!0,perform:e=>{oe({environment:o,transaction:e,teamStore:t,isDefault:"invite_only"!==g.settings.space_member_join_access&&a,from:i,createNewTeamFlowId:void 0});const n=y().bo({environment:o,store:t,permissionItems:g.permissions,transaction:e});return S().zv({store:t.getSettingsStore(),data:g.settings,transaction:e}),{result:n}}});return f&&h().xZ(o,{store:t,old_access_level:c,new_access_level:n,from:i}),f}function pe(e){let{memberInfo:t,teamStore:o,transaction:n,environment:r,permissionRole:i}=e;if("owner"===t.type)return ie({memberInfo:t,teamStore:o,transaction:n,environment:r,permissionRole:i});if(!o.isDefined())return!1;const s=o.id,l=o.getPermissionItems();if(i&&(0,a().or)({teamValue:{id:s,permissions:l},permissionRole:i}))throw new Error("Cannot set member's permission to be lower than default team permission.");const c="user"===t.entity_type&&o.isMemberOrGuest(t.user_id,new Set),d="group"===t.entity_type&&o.getRawMembership().some((e=>"group"===e.entity_type&&e.group_id===t.group_id));if(!c&&!d)throw new Error("Specified memberInfo not found on team");let u=i||"none";const m=(0,p().ST)({id:s,permissions:l});return m&&i===m&&(u="none"),y().bo({environment:r,store:o,permissionItems:[ce({memberInfo:t,newRole:u})],transaction:n})}function me(e,t){U().A.setState({...U().A.state,open:!0,from:e}),U().A.state.onClose=null==t?void 0:t.onClose}async function ge(e){let{environment:t,currentSpaceStore:o,teamStore:n,from:r,action:i}=e;const a=t.currentUser.id;if(!a||!o||!(0,Q().j)({userId:a,spaceStore:o,entrypoint:r}))return!1;if(!(await async function(e){return!X().A.state.open&&await new Promise((t=>{X().A.setState({open:!0,type:e,onAccept:()=>t(!0),onCancel:()=>t(!1)})}))}(i)))return!1;const s=await _().callApi({eventName:"setAdminPrivilegedTeamMembership",environment:t,data:{spaceId:o.id,teamId:n.id,teamRole:fe(i)}});if("failed"===s.type)return Ne(s),!1;switch(i){case"joinTeamAsOwner":case"joinClosedOrPrivateTeamAsMember":he({environment:t,teamStore:n,from:r,newRole:"joinTeamAsOwner"===i?"owner":"member",usingAdminPrivileges:!0,andNavigateToTeamHome:!1});break;case"upgradeToOwner":v().KI(t,{memberInfo:{entity_type:"user",user_id:a,type:"member"},team_role:"owner",store:n});const e=n.getName();e&&(0,E().vH)(e);break;default:(0,g().HB)(i)}return!0}function fe(e){switch(e){case"joinTeamAsOwner":case"upgradeToOwner":return"owner";case"joinClosedOrPrivateTeamAsMember":return"member";default:(0,g().HB)(e)}}async function ve(e){let{environment:t,currentSpaceStore:o,teamStore:n,from:r,andNavigateToTeamHome:i}=e;const a=t.currentUser.id;if(!a)return!1;const s=await _().callApi({eventName:"updateTeamMembers",environment:t,data:{spaceId:o.id,teamId:n.id,newMembersOrGuestsToAdd:[{type:"member",entity_type:"user",user_id:a}]}});return"failed"===s.type?(Ne(s),!1):(he({environment:t,teamStore:n,from:r,newRole:"member",usingAdminPrivileges:!1,andNavigateToTeamHome:i}),!0)}function he(e){let{environment:t,teamStore:o,from:n,newRole:r,usingAdminPrivileges:i,andNavigateToTeamHome:a}=e;const s=t.currentUser.id,l=V().default.state.currentSpaceStore,c=V().default.state.currentSpaceViewStore;if(!s||!l||!c)return!1;!function(e){var t;let{environment:o,currentSpaceViewStore:n,teamId:r}=e;const i=null===(t=(0,T().rp)(o).state)||void 0===t?void 0:t.userJoinedTeamsStores;if(!i||!n)return!1;const a=[...i.map((e=>{let{id:t}=e;return t})).filter((e=>e!==r)),r];A().br({environment:o,currentSpaceViewStore:n,orderedTeamIds:a,userAction:"TeamBrowserOutliner",isExplicitUserAction:!1})}({environment:t,currentSpaceViewStore:c,teamId:o.id}),h().vo(t,{store:o,joined_role:r,from:n}),C().C({environment:t,userId:s,spaceId:l.id});const d=o.getName();a?(Ee({environment:t,teamStore:o,shouldScroll:!1}),d&&new Promise((e=>setTimeout(e,500))).then((()=>{(0,E().VV)({teamName:d,usingAdminPrivileges:i})}))):d&&(0,E().VV)({teamName:d,usingAdminPrivileges:i})}async function _e(e){let{environment:t,teamId:o,spaceId:n,teamUserInfo:r,isSettingDefaultTeam:i,inviterId:a}=e;const s=t.currentUser.id;if(!n||!s)return!1;return"failed"!==(await _().callApi({eventName:"updateTeamMembers",environment:t,data:{spaceId:n,teamId:o,newMembersOrGuestsToAdd:[r],isSettingDefaultTeam:i,addNewMembersToSpace:!1},userId:a})).type}async function be(e){let{environment:t,teamStore:o,teamMemberInfos:n,isSettingDefaultTeam:r,createNewTeamFlowId:i}=e;const a=o.getSpaceId();if(!a)return!1;const s=t.currentUser.id;if(!a||!s)return!1;if("failed"===(await _().callApi({eventName:"updateTeamMembers",environment:t,data:{spaceId:a,teamId:o.id,newMembersOrGuestsToAdd:n,isSettingDefaultTeam:r,addNewMembersToSpace:(0,G().El)()},userId:s})).type)return!1;if(!r){const e=n.flatMap((e=>"user"!==e.entity_type?[]:e.user_id)),r=e.length,a=n.filter((e=>"group"===e.entity_type)).length;r>0&&h().PA(t,{store:o,num_members_invited:r,create_new_team_flow_id:i,members_invited:e}),a>0&&h().En(t,{store:o,num_groups_invited:a,create_new_team_flow_id:i})}return!0}function ye(e){switch(e){case"team_browser":case"duplicate_team":case"create_team_from_page":case"permission_item":case"teams_dropdown_for_team_guest":case"teams_dropdown_for_team_member":case"teams_dropdown_for_group":case"teamSidebar":case"teamBrowserSearch":case"teamBrowserUnjoinedTeams":case"teamBrowserJoinedTeams":case"team_breadcrumb_popup":case"team_menu_header":case"sidebar_team_modal":case"team_invite_link":case"teams_dropdown_space_settings_people":case"share_menu":case"team_home":return!1;case"manage_teams_table":case"team_settings_members":return!0;default:(0,g().HB)(e)}}function Se(e){let{environment:t,teamId:o,tab:n,from:r,buttonPopupStore:i}=e;const a=V().default.state.currentSpaceStore;if(!a)return;const s=z().h4.createChildStore(a,{table:d().yK,id:o});if(s.canRead())O().A.update((e=>({...e,open:!0,tab:n,teamStore:s,viewingUnjoinedPrivateTeamAsEnterpriseAdmin:!1})));else{const e=we({environment:t,spaceStore:a,teamId:o,from:r});if(!e)return;O().A.update((t=>({...t,open:!0,tab:n,unjoinedPrivateTeamStore:e,viewingUnjoinedPrivateTeamAsEnterpriseAdmin:!0})))}i&&(j().A.removeNamedPopup("team_more_actions"),i.setState({...i.state,open:!1}))}function we(e){var t;let{environment:o,spaceStore:n,teamId:i,from:a}=e;if(!ye(a))return;const s=n.getModel(),l=null===(t=V().default.state.currentUserStore)||void 0===t?void 0:t.id;if(!l)return;const c=(0,N().dp)(n,l).getModel();if(!(0,r().fK)({space:s,spaceUser:c}))return;const d=Z().A.createTeamStoreFromCache({environment:o,teamId:i,spaceId:n.id,userId:l}),u=null==d?void 0:d.getModel(),m=H()._.getSpacePermissionGroupIds({userId:l,spaceId:n.id});return null!=d&&d.canRead()&&u&&(0,p().tr)({spaceUserModel:c,teamModel:u,spaceModel:s,userPermissionGroups:m})?d:void 0}async function ke(e){let{environment:t,teamStore:o,from:n,userGroupsInTeam:r}=e;const i=t.currentUser.id;return!!i&&await Ie({environment:t,teamStore:o,userId:i,from:n,userGroupsInTeam:r})}async function Ie(e){let{environment:t,teamStore:o,userId:n,from:r,userGroupsInTeam:i}=e;const a=o.getSpaceId();if(!o.isDefined()||!t.currentUser.id||!a)return!1;const{ownerUserIds:s,ownerGroupIds:l}=o.getAllOwnerIds(),c=s.length+l.length===1,d=s[0]===n;if(d&&c)return R().$y(),!1;if(void 0===o.getRawMembership().find((e=>"user"===e.entity_type&&e.user_id===n)))return R().yu(i),!1;const p=z().sk.createChildStore(o,{table:u().oo,id:n}),m=n===t.currentUser.id,g=o.getName()??"",f=p.getDisplayName(M().A.getIntl());if(!(await R().Lc({isCurrentUser:m,teamName:g,memberName:f})))return!1;const v=[{entity_type:"user",type:d?"owner":"member",user_id:n}],b=await _().callApi({eventName:"updateTeamMembers",environment:t,data:{spaceId:a,teamId:o.id,existingMembersOrGuestsToRemove:v}});return"failed"===b.type?(Ne(b),!1):(h().o$(t,{store:o,is_leaving_team:m,num_members_removed:v.length,from:r}),i.length>0?m?(0,E().hX)(g,i):(0,E().WE)(f,g,i):m&&(0,E().fE)(g),C().C({environment:t,userId:n,spaceId:a}),!0)}function Ae(e){let{environment:t,teamStore:o,group:n}=e;const r=o.getSpaceId();if(!r)return;const i=o.getRawMembership().find((e=>"group"===e.entity_type&&e.group_id===n.group_id));if(!i)return;const{ownerUserIds:a,ownerGroupIds:s}=o.getAllOwnerIds(),l=a.length+s.length===1;if(1===s.length&&s[0]===n.group_id&&l)return(0,R().SM)(),!1;R().g8({group:n,onAccept:async()=>{const e=[i],n=await _().callApi({eventName:"updateTeamMembers",environment:t,data:{spaceId:r,teamId:o.id,existingMembersOrGuestsToRemove:e}});"failed"!==n.type?h().fx(t,{store:o,num_groups_removed:e.length}):Ne(n)}})}function xe(e){return{archived_by:e,archived_at:Date.now(),is_default:!1}}function Ce(e){const t=(0,p().ZF)({numDefaultActiveTeams:(0,D().Sl)(),teamAccessLevel:e.getTeamAccessLevel()});return(0,p().nT)({isDefault:t})}async function Te(e){const{currentSpaceStore:t,currentSpaceViewStore:o}=V().default.getState();if(!t)throw new Error("currentSpaceStore does not exist");if(!o)throw new Error("currentSpaceViewStore does not exist");const{environment:n,teamStore:r,from:i}=e,l=n.currentUser.id,d=r.getName()||"",u=t.getSettingsStore();if(!l)return;const p=t.id,m=$().subscriptionDataStoreInstance.state,f=m?await(0,K().$)(n,p,m):1;if(!f)return;const v=(0,a().z8)({userId:l,teamsThatUserIsANonGuestMemberOf:o.getNonGuestTeamsStores().map((e=>e.getModel())).filter(g().O9),spaceMembersCount:f});if(await R().kq(d,v)){if(v){const e=await R().f1(d);x().createAndCommit({userAction:"teamsHelpers.archiveLastTeam",environment:n,canUndo:!0,perform:o=>{if(J({store:r,update:xe(l),transaction:o}),S().zv({store:u,data:{is_teams_enabled:!1},transaction:o}),I().uK({planType:"personal",spaceStore:t,transaction:o}),e){const e=r.getTeamPagesStores()??[];for(const n of e){const e=n.getRole();if(!e)continue;const r={type:"user_permission",user_id:l,role:e},i=[...n.getPermissionItems().filter((e=>!s().eu(e)&&!s().T6(e)&&!s().Lg(e))),r];S().zv({store:n,data:{parent_id:t.id,parent_table:c().NX,permissions:i},transaction:o})}S().zv({store:r,data:{team_pages:[]},transaction:o})}}}),h().yB(n,{store:r,from:i})}else x().createAndCommit({userAction:"teamsHelpers.archiveTeam",environment:n,canUndo:!0,perform:e=>{J({store:r,update:xe(l),transaction:e})}});h().NB(n,{store:r,from:i}),(0,Y().tourIsActiveInSidebarStep)(Y().default.state)&&Y().default.setState({type:"inactive"}),O().A.setState({open:!1,limitMembers:!0,memberFilterQuery:"",tab:void 0}),(0,E().eh)(d)}}async function Me(e){let{environment:t,teamStore:o,teamName:n,from:r}=e;const{currentSpaceStore:i}=V().default.getState();if(!i)throw new Error("currentSpaceStore does not exist");if(!(0,D().mN)(o))throw new Error("Cannot restore archived, non-open team with no active default team");if(i.isTeamsEnabled())x().createAndCommit({userAction:"teamsHelpers.restoreArchivedTeam",environment:t,canUndo:!0,perform:e=>{J({store:o,update:Ce(o),transaction:e})}});else{const e=await async function(e){let{environment:t,existingTeamStore:o}=e;const{currentSpaceStore:n}=V().default.getState();if(!n)throw new Error("currentSpaceStore does not exist");const r=n.id,i=await _().callApi({eventName:"enableTeams",environment:t,data:{spaceId:r,existingTeamId:o.id}});return"failed"===i.type?(Ne(i),!1):(h().b0(t,{spaceId:r,store:o,flowId:""}),!0)}({environment:t,existingTeamStore:o});if(!e)return}h().Rt(t,{store:o,from:r}),(0,E().cO)(n)}async function Pe(e){let{settingName:t,newTeamSettingValue:o,spaceSettingValue:n,environment:r,store:i}=e;let a=!0;return"disable"===n&&"allow"===o?a=await R().CE(t):"disable"===o&&(a=await R().Kb(t)),!!a&&(x().createAndCommit({userAction:"teamsHelpers.changeTeamSetting",environment:r,canUndo:!0,perform:e=>{ee({environment:r,store:i,update:{[t]:"disable"===o},transaction:e})}}),!0)}function Be(e){return`TeamToggle_${e.id}`}function Re(e){let{teamStore:t,environment:o}=e;if(o.device.isMobile)return;const n=Be(t),r=F().A.findDropTargetFromKey(n);if(r){const e=r.getNode();if(!(e instanceof HTMLElement))return;if(P().A.SidebarScroller){var i;const n=(null===(i=P().A.SidebarScroller.getNode())||void 0===i?void 0:i.offsetTop)||0,r=P().A.SidebarScroller.getNode();B().VG({element:r,environment:o,options:{top:e.offsetTop-n,left:0,behavior:"smooth"}}),q().A.setState(t.id),setTimeout((()=>{q().A.state===t.id&&q().A.setState(void 0)}),1500)}}}function Ee(e){const{environment:t,teamStore:o,shouldScroll:r}=e;if(r&&Re({teamStore:o,environment:t}),(0,L().D)({isMobileNative:t.device.isMobileNative}))k().oo({environment:t,url:(0,l().a)({teamId:o.id,pageVisitSource:n().y8.JoinTeam})});else{const e=o.getTeamPagesStores();if(!e||e.length<1)return;w().uK({environment:t,store:e[0],pageVisitSource:n().y8.JoinTeam})}h()._L(t,{store:o})}function De(e){let{environment:t,from:o,teamStore:n}=e;const{state:r}=U().A;var i,a;(h().w_(t,{screen:r.screen,team_id:r.teamId,team_has_icon:Boolean(r.icon),team_has_name:Boolean(r.name),team_has_description:Boolean(r.description),team_access_level:r.accessLevel,flow_id:r.flowId,from:o,store:n}),r.teamId)&&(null===(i=(a=U().A.state).onClose)||void 0===i||i.call(a,r.teamId));U().A.reset()}function Ne(e){b().Qg(e),i().log({level:"error",from:"teamActions",type:"TeamApiError",error:(0,m().n6)(e.error),data:{miscDataToConvertToString:{body:e.body,status:e.status}}})}},848259:(e,t,o)=>{o.d(t,{A2:()=>E,DK:()=>U,DN:()=>q,EV:()=>G,Eh:()=>F,Gj:()=>P,Hd:()=>h,K4:()=>y,KN:()=>W,L_:()=>I,R0:()=>m,WP:()=>D,Xl:()=>T,ZP:()=>_,_P:()=>N,bl:()=>v,cZ:()=>R,e0:()=>L,fP:()=>V,gI:()=>x,iE:()=>H,jD:()=>M,mF:()=>b,nR:()=>z,nW:()=>j,o1:()=>O,oy:()=>f,pQ:()=>C,s$:()=>A,sL:()=>g,tm:()=>K,uK:()=>w,xd:()=>B,zP:()=>S});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949);var n=()=>o(110750),r=()=>o(244309),i=()=>o(534177),a=()=>o(212326),s=()=>o(441199),l=()=>o(644914),c=()=>o(508496),d=()=>o(606846),u=()=>o(572080),p=()=>o(989423);function m(e){k({...e,target:"archive"})}function g(e){k({...e,target:"unarchive"})}function f(e){k({...e,target:"mark_as_read"})}function v(e){k({...e,target:"mark_as_unread"})}function h(e){k({...e,target:"frame"})}function _(e){k({...e,target:"open_reply_menu"})}function b(e){k({...e,target:"open_automation_view_all_notifications_menu"})}function y(e){k({...e,target:"open_automation_view_error_raised_notification"})}function S(e){let{environment:t,pageId:o,isCurrentlyFollowing:n,from:r,notificationId:i}=e;p().vd(t,"click_page_updates_notifications_button",{pageId:o,isCurrentlyFollowing:n,from:r,notificationId:i})}function w(e){let{environment:t,backlinkPageId:o,notificationId:n,alreadyRead:r,activity:i,tab:a}=e;k({environment:t,target:"title",notificationId:n,alreadyRead:r,activity:i,tab:a,otherArgs:{backlinkPageId:o}})}function k(e){let{environment:t,target:o,notificationId:n,alreadyRead:i,activity:a,tab:s,otherArgs:l}=e;A({environment:t,target:o});const c=d().Ay.state.sessionId;z(t,{target:o,notification_id:n,activity_id:a.id,tab:s,sessionId:c,is_filtered:d().Ay.isFilteredToUnreadOnly(),...l}),n&&r().v(p().ik(t),{alreadyRead:i,notificationId:n,activityId:a.id,from:o,sessionId:c})}function I(e){const t=d().Ay.state.sessionId;t&&(p().vd(e,"close_sidebar_updates",{sessionId:t,tab:M()}),d().Ay.endSession())}function A(e){let{environment:t,target:o}=e,n=!1;switch(o){case"title":case"body":n=!0;break;case"archive":case"unarchive":case"mark_as_read":case"mark_as_unread":case"add_reaction":case"remove_reaction":case"open_reply_menu":case"open_automation_view_all_notifications_menu":case"open_automation_view_error_raised_notification":case"frame":case"main":case"approve_request_access":case"deny_request_access":n=!1;break;default:(0,i().HB)(o)}n&&I(t)}function x(e){let{environment:t,from:o}=e;const r=(0,n().Xz)(t.TabbedRouterStore.state);var i;"web"===(i=r).type&&"nativeTab"===i.route.name&&"updates"===i.route.tab&&C({environment:t,from:o})}function C(e){let{environment:t,forceRestartSession:o,from:n}=e;d().Ay.startSession({forceRestart:o??!1}),function(e,t){c().default.logEvent("open_sidebar_updates",t.tab,t),p().vd(e,"open_sidebar_updates",{...t,...(0,l().hX)({environment:e})})}(t,{tab:M(),unread_notifications_count:u().j0(),sessionId:d().Ay.state.sessionId,from:n})}function T(e){let{environment:t,activityUpdatesSource:o,filters:n,prevFilters:r}=e;p().vd(t,"update_notification_filters",{source:o,prev_date_range_filter_start:r.dateRange.start,prev_date_range_filter_end:r.dateRange.end,prev_activity_types:r.activityTypes,date_range_filter_start:n.dateRange.start,date_range_filter_end:n.dateRange.end,activity_types:n.activityTypes})}function M(){const e=d().Ay.state.currentTab;switch(e){case"mentions":return"mentions_comments";case"archive":return"archive";case"allPages":return"all_updates";default:(0,i().HB)(e)}}function P(e){let{environment:t,action:o,args:n}=e;p().vd(t,"push_notification_desktop",{...n,action:o})}function B(e,t){const o={...t,onlyRead:"read"===t.readFilter,sessionId:d().Ay.state.sessionId};c().default.logEvent("archive_all_notifications",t.readFilter,o),p().vd(e,"archive_all_notifications",o)}function R(e){c().default.logEvent("mark_all_notifications_as_read"),p().vd(e,"mark_all_notifications_as_read",{sessionId:d().Ay.state.sessionId})}function E(e,t){p().vd(e,"toggle_filter_for_unread_notifications",t)}function D(e){let{environment:t,auto_loaded:o}=e;d().Ay.startSession({forceRestart:!0});const n={tab:a().dl(),unread_notifications_count:u().j0(),sessionId:d().Ay.state.sessionId,from:"inbox",auto_loaded:o,...(0,l().hX)({environment:t})};c().default.logEvent("open_sidebar_updates",a().dl(),n),p().vd(t,"open_sidebar_updates",n)}function N(e){let{environment:t}=e;const o=d().Ay.state.sessionId;o&&(p().vd(t,"close_sidebar_updates",{tab:a().dl(),sessionId:o}),d().Ay.endSession())}function L(e){k({...e,target:"main"})}function F(e,t){const{notificationActivityPairs:o,affectedNotificationIds:n,target:r}=t,i=new Set(n),a=o.filter((e=>{let{notification:t}=e;return i.has(t.id)}));if(0===a.length)return;const s=new Set,l=new Set;a.forEach((e=>{let{notification:t,activity:o}=e;"commented"===t.type?s.add(o.discussion_id):l.add(t.id)})),p().vd(e,"click_update_group",{target:r,sessionId:d().Ay.state.sessionId,notification_ids:Array.from(l),discussion_ids:Array.from(s),notification_page_id:a[0].notification.navigable_block_id})}function U(e,t){p().vd(e,"toggle_inbox_tab",{...t,sessionId:d().Ay.state.sessionId})}function O(e,t){p().vd(e,"click_expand_replies",{...t,sessionId:d().Ay.state.sessionId})}function V(e){p().vd(e,"open_notification_settings_from_all_updates")}function j(e){p().vd(e,"open_page_updates")}function z(e,t){p().vd(e,"click_update",{...t,tab:"homeTile"===t.tab?"homeTile":a().dl(),view_type:s().default.state.mode})}function q(e,t){const{target:o,...n}=t;let r;"notify_mobile"===o?r="set_mobile_notification":"notify_desktop"===o?r="set_desktop_notification":"notify_email"===o?r="set_email_notification":"notify_email_always"===o?r="set_email_always_notification":"notify_email_digest"===o?r="set_email_digest_notification":"notify_home_digest_email"===o?r="set_home_digest_email_notification":"notify_slack_mention"===o?r="set_slack_mention_notification":"notify_slack_all_activity"===o?r="set_slack_all_activity_notification":(0,i().HB)(o),p().vd(e,r,n)}function H(e){p().vd(e,"set_marketing_emails_preferences")}function W(e,t){p().vd(e,"follow_page",t)}function K(e,t){p().vd(e,"unfollow_page",t)}function G(e,t){p().vd(e,"update_page_follow_settings",t)}},848776:(e,t,o)=>{o.d(t,{U:()=>i,y:()=>a});var n=()=>o(757695),r=()=>o(763884);class i{constructor(e,t){this.nextVersion=1,this.keyFn=void 0,this.promiseMap=void 0,this.versionMap=void 0,this.storeMap=void 0,this.fetchFn=void 0,this.fetch=async(e,t,o)=>{const n=this.keyFn(t),r=this.nextVersion++;this.versionMap[n]=r;const i=await this.fetchFn(e,t,o);return this.versionMap[n]!==r?this.promiseMap[n]:(this.storeMap[n].setState(i),i)},this.storeMap={},this.promiseMap={},this.versionMap={},this.fetchFn=t,this.keyFn=e}getData(e,t){var o;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.keyFn(t);return r&&(this.promiseMap[i]=void 0),this.storeMap[i]??=n().default.createValue(void 0),this.promiseMap[i]??=this.fetch(e,t,r),null===(o=this.storeMap[i])||void 0===o?void 0:o.state}awaitData(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=this.keyFn(t);return o&&(this.promiseMap[r]=void 0),this.storeMap[r]??=n().default.createValue(void 0),this.promiseMap[r]??=this.fetch(e,t,o),this.promiseMap[r]}resetData(e,t){const o=this.keyFn(t),n=this.storeMap[o];if(n&&n.listenerCount()>0){const n=this.fetch(e,t,!0);return this.promiseMap[o]=n,n.then((()=>{}))}return this.promiseMap[o]=void 0,Promise.resolve(void 0)}TEST_ONLY__setData(e,t){const o=this.keyFn(e);this.promiseMap[o]=Promise.resolve(t),this.storeMap[o]??=n().default.createValue(void 0),this.storeMap[o].setState(t)}TEST_ONLY__getData(e){var t;const o=this.keyFn(e);return null===(t=this.storeMap[o])||void 0===t?void 0:t.state}TEST_ONLY__hasData(e){const t=this.keyFn(e);return void 0!==this.storeMap[t]}TEST_ONLY__addListener(e,t){const o=this.keyFn(e);this.storeMap[o]??=n().default.createValue(void 0),this.storeMap[o].addListener(t)}}async function a(e){let{environment:t,namespace:o,key:n,getValue:i,forceRefetch:a}=e;const s=t.currentUser.id,l=`{${o}}:${n}`;a&&r().A.set({userId:t.currentUser.id,key:l,value:null});const c=r().A.get({userId:s,key:l});if(c)return c;const d=await i();return r().A.set({userId:t.currentUser.id,key:l,value:d}),d??void 0}},849839:(e,t,o)=>{o.d(t,{K:()=>We,W:()=>ye});o(898992),o(354520),o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(790748),a=()=>o(56366),s=()=>o(40845),l=()=>o(100622),c=()=>o(821062),d=()=>o(534177),u=()=>o(519839),p=()=>o(645873);const m=new(p().O2)("SpreadsheetPrototype",(()=>o.e(87543).then(o.bind(o,185608))));(0,p()._h)(m,(e=>e.SpreadsheetPrototypeNotInProd));var g=()=>o(199896),f=()=>o(38337),v=()=>o(753199),h=()=>o(891078),_=()=>o(472090),b=()=>o(980914);const y=18;class S extends(()=>o(757695))().default{getInitialState(){return{}}setTemporaryFormat(e){this.update((t=>({...t,temporaryFormat:e})))}updateColumnOrder(e){this.update((t=>({...t,temporaryFormat:{...t.temporaryFormat,table_block_column_order:e}})))}}const w=S;var k=()=>o(671363),I=()=>o(3020),A=()=>o(709219),x=()=>o(401497),C=()=>o(959013),T=()=>o(284371),M=()=>o(317909),P=()=>o(704152),B=()=>o(760217),R=()=>o(406699),E=()=>o(939740),D=()=>o(8980),N=()=>o(946548),L=()=>o(859428),F=()=>o(962730),U=()=>o(732770),O=()=>o(502438),V=()=>o(919878),j=()=>o(450519),z=o(474848);const q=n.forwardRef((function(e,t){var n;const{simpleTableStore:i,rootSizeObserver:s,offset:l,hoverSizeObserver:c}=e,d=(0,r().v3)(),u=(0,x().DP)(),p=(0,a().K8)((()=>o(695625).T.findScrollToSelectableFromStore(i)),[i]),m=null==p||null===(n=p.getNode())||void 0===n?void 0:n.getBoundingClientRect(),g=(0,a().K8)((()=>s.rect.state.width),[s]),f=(0,a().K8)((()=>c.rect.state.width),[c]),h=(0,a().K8)((()=>Math.min((null==m?void 0:m.width)||0,g,f)+l),[m,g,f,l]);return m?(0,z.jsx)("div",{style:{width:0,position:"absolute",insetInlineStart:h,zIndex:85,...e.style},onMouseDown:v().tr,ref:t,children:(0,z.jsx)("div",{style:W(u),children:(0,z.jsxs)("div",{style:{display:"flex"},dir:"ltr",children:[(0,z.jsx)(L().A,{placement:F().W.Top,render:e=>(0,z.jsx)(P().A,{...e,style:K(u),onClick:()=>{M().createAndCommit({userAction:"SimpleTableActionBar.ActionBarContent",environment:d,canUndo:!0,perform:e=>{V().uT({simpleTableStore:i,parentWidth:c.rect.state.width,transaction:e})}})},children:(0,z.jsx)(D().I,{icon:o(665589).l})}),renderTooltip:()=>(0,z.jsx)(C().sA,{defaultMessage:"Fit table to page width",id:"simpleTable.actionBar.fitToPage"})}),(0,z.jsx)(R().Ay,{popupType:R().z7.Popup,originGap:4,renderOrigin:e=>(0,z.jsxs)(P().A,{style:K(u),...e,children:[(0,z.jsx)(C().sA,{id:"simpleTable.actionBar.options",defaultMessage:"Options"}),(0,o(668725).b)({width:10,fill:u.mediumIconColor,marginLeft:4})]}),render:()=>(0,z.jsx)(H,{simpleTableStore:i})}),(0,z.jsx)(o(496889).A,{store:i,fadeIn:!1,style:{display:"flex",justifyContent:"center",alignSelf:"center",width:30,height:void 0,padding:"9px 8px"},iconStyle:{fill:u.regularTextColor}})]})})}):null}));function H(e){const{simpleTableStore:t}=e,n=(0,r().v3)(),i=[{key:"header row",action:()=>{M().createAndCommit({userAction:"SimpleTableActionBar.menuItems",environment:n,canUndo:!0,perform:e=>{V().uC({simpleTableStore:t,transaction:e})}})},render:e=>(0,z.jsx)(B().A,{...e,icon:(0,z.jsx)(D().I,{icon:o(464291).p}),title:(0,z.jsx)(C().sA,{id:"action.columnHeader.title",defaultMessage:"Header row"}),right:(0,z.jsx)(N().A,{on:b().uq(t).headerRow||!1,onClick:e.onClick})})},{key:"header column",action:()=>{M().createAndCommit({userAction:"SimpleTableActionBar.menuItems",environment:n,canUndo:!0,perform:e=>{V().Qg({simpleTableStore:t,transaction:e})}})},render:e=>(0,z.jsx)(B().A,{...e,icon:(0,z.jsx)(D().I,{icon:o(696575).X}),title:(0,z.jsx)(C().sA,{id:"SimpleTableActionBar.action.rowHeader.title",defaultMessage:"Header column"}),right:(0,z.jsx)(N().A,{on:b().uq(t).headerColumn||!1,onClick:e.onClick})})}];return(0,z.jsx)(o(928600).A,{menuType:o(722872).gu.Popup,width:240,maxHeight:n.device.isMobile?70:void 0,children:(0,z.jsx)(E().Ay,{type:E().Oh.Vertical,sections:[{key:"appearance section",render:e=>(0,z.jsx)(o(89924).A,{...e}),items:i}],initialFocus:void 0})})}function W(e){return{position:"absolute",top:-40,insetInlineEnd:0,borderRadius:4,height:32,fontSize:14,lineHeight:1.2,whiteSpace:"nowrap",fontFamily:T().vc(o(662303).locale).sans,background:e.popoverBackground,boxShadow:e.shadowMD,overflow:"hidden"}}function K(e){return{display:"flex",alignItems:"center",padding:"0 8px",borderRight:`1px solid ${l().Ay.whiteWithAlpha(.2)}`,boxShadow:`1px 0 0 ${e.regularDividerColor}`}}const G=function(e){const{disabled:t,canEdit:n,simpleTableStore:r}=e,i=(0,a().K8)((()=>{const e=A().A.state,t=k().A.state,o=j().A.state,n=U().A.state,i=O().default.state,a=e.isActive&&e.simpleTableStore===r,s=1===i.stores.length&&i.stores[0]===r,l=t.isActive&&t.simpleTableStore===r&&"cell"===t.hover.type&&t.hover.resizing,c=o.isActive&&o.simpleTableStore===r;return(a||s)&&!l&&!c&&!n.isKeyboardMode}),[r]);return t||!n?null:(0,z.jsx)(o(145214).A,{tag:q,visible:i,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},...e})};var $=()=>o(884107),Y=()=>o(4319),Q=()=>o(606952),Z=()=>o(725614);const X=new(p().O2)("exportJsxRenderer",(async()=>await o.e(46933).then(o.bind(o,759880))));var J=()=>o(659602),ee=()=>o(862292),te=()=>o(231722),oe=()=>o(24157),ne=()=>o(439270),re=(o(803949),()=>o(603820)),ie=()=>o(906537);function ae(e){const t=(0,n.useRef)(),i=(0,r().v3)(),s=(0,a().K8)((()=>Boolean(b().gc(e.simpleTableStore))),[e.simpleTableStore]),{columnIndex:c,simpleTableStore:d,columnID:u,getWidth:p,onTemporaryResize:m,onAccept:g,onCancel:v}=e,h=(0,a().K8)((()=>{const e=k().A.state;return!!e.isActive&&(e.simpleTableStore===d&&("cell"===e.hover.type&&(!s&&(e.hover.x===c&&(e.hover.showResizer||e.hover.resizing)))))}),[c,s,d]),_=(0,x().IS)((e=>({wrapper:{position:"absolute",right:0,width:0,top:0,flexGrow:0,height:"100%",zIndex:1},innerStyle:{position:"absolute",width:3,marginLeft:-1,marginTop:-1,height:"calc(100% + 2px)",transition:"background 150ms ease 50ms",cursor:s?void 0:"col-resize",background:h?e.simpleTableSelectionBorder:l().Ay.blueWithAlpha(0)}})),[s,h]),y=(0,n.useCallback)((e=>{e.preventDefault();const o=b().o0(d);t.current=o&&u in o?o[u]:{},t.current.width=p(),V().yY(!0)}),[u,p,d]),S=(0,n.useCallback)((e=>{var n;if(null!==(n=t.current)&&void 0!==n&&n.width){const n=Math.max(t.current.width+e.diffX,o(651124).bg);return{...t.current,width:n}}}),[]),w=(0,n.useCallback)((e=>{const t=S(e);t&&m(t)}),[S,m]),I=(0,n.useCallback)((e=>{const t=S(e);t&&g(t),V().yY(!1)}),[S,g]),A=(0,n.useCallback)((()=>{v(),t.current=void 0,V().yY(!1)}),[v]),C=(0,n.useCallback)((()=>{const t=ne().A.findCellsInColumnFromStore(e.simpleTableStore,e.columnId),n=o(496603).oE(t.map((e=>{var t;const o=null===(t=e.getNode())||void 0===t?void 0:t.querySelector(`.${f().NER}`);if(o)return function(e){const t=window.getComputedStyle(e),o=e.cloneNode(!0),n=o;n.id="notion-table-cell-shadow",Array.from(t).forEach((e=>n.style.setProperty(e,t.getPropertyValue(e),t.getPropertyPriority(e)))),n.style.opacity="0",n.style.width="100%",n.style.pointerEvents="none",document.body.appendChild(o);const r=n.querySelector(`.${f().UqD}`);if(!r)return void n.remove();r.style.width="",r.style.display="inline-block";const i=window.document.createRange();i.selectNode(r);const a=ie().getRect(i);return n.remove(),null!=a&&a.width?a.width+he:void 0}(o)})));M().createAndCommit({userAction:"SimpleTableColumnResizer.handleDoubleClick",environment:i,canUndo:!0,perform:t=>{V().Fd({tableBlockColumnFormat:{...le(e.format,e.formatStore).table_block_column_format,[e.columnId]:{width:Math.max(...n)}},simpleTableStore:e.simpleTableStore,transaction:t})}})}),[i,e.columnId,e.format,e.formatStore,e.simpleTableStore]),T=(0,n.useCallback)((()=>V().Vg(!0)),[]),P=(0,n.useCallback)((()=>V().Vg(!1)),[]),B=(0,n.useCallback)((e=>(0,z.jsx)("div",{style:_.innerStyle,onDoubleClick:C,...e})),[C,_.innerStyle]);return(0,z.jsx)("div",{style:_.wrapper,onMouseMove:T,onMouseLeave:P,children:(0,z.jsx)(re().A,{onDraggableDragStart:y,onDraggableDragMove:w,onDraggableDragEnd:I,onDraggableDragCancel:A,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:B})})}const se=n.memo(ae);function le(e,t){const{temporaryFormat:o}=t;return o||e}function ce(e){const{rowIndex:t,columnIndex:o,simpleTableStore:n}=e,r=(0,a().K8)((()=>{const e=I().A.state;if(e.isActive&&e.simpleTableStore===n&&e.moved&&e.source.index!==e.destIndex)return{destIndex:e.destIndex,sourceIndex:e.source.index,type:e.source.type}}),[n],{useDeepEqual:!0}),{destIndex:i,sourceIndex:s,type:l}=r||{destIndex:0,sourceIndex:0},c=(0,x().IS)((e=>({sharedStyle:{position:"absolute",flexGrow:0,zIndex:2,background:e.simpleTableSelectionBorder},rowStyle:{top:s>i?0:void 0,bottom:s<i?0:void 0,left:-1,width:"calc(100% + 2px)",height:3},columnStyle:{top:-1,left:s>i?0:void 0,right:s<i?0:void 0,width:3,height:"calc(100% + 2px)"}})),[s,i]);return r?"row"===l&&i===t?(0,z.jsx)("div",{style:{...c.sharedStyle,...c.rowStyle}}):"column"===l&&i===o?(0,z.jsx)("div",{style:{...c.sharedStyle,...c.columnStyle}}):null:null}const de=n.memo(ce);var ue=()=>o(901265);class pe extends(()=>o(959180))().A{findSelectorsOfTypeFromStore(e,t){return this.filter((o=>{const n=o.getProps();return n.simpleTableStore===t&&n.type===e}))}}const me=new pe;const ge=function(e){const t=(0,r().v3)(),s=(0,n.useRef)(),l=(0,n.useRef)(null),c=(0,x().DP)();(0,i().b)(me,(()=>({getProps:()=>e,getNode:()=>l.current??null})),[e]);const u=()=>{s.current=void 0,V().Mi()},p=o=>{ue().it({environment:t,stores:["column"===e.type?e.simpleTableStore:e.rowStore],left:o.startX,top:o.startY,showInput:!0,actionSectionGroupKey:"simple_table",analyticsFrom:"simple_table_menu"})},{simpleTableStore:m,type:g,index:f}=e,v=(0,a().K8)((()=>{const{isMobile:e}=t.device;if(e)return function(e,t,o){const n=A().A.state;if(!n.isActive)return!1;if(n.simpleTableStore!==e)return!1;const{selection:r}=n;if(b().kP(r)){if("column"===t)return r.start.col===o;if("row"===t)return r.start.row===o}return!1}(m,g,f);const{isKeyboardMode:o}=U().A.state;if(o)return!1;if(I().A.state.isActive)return!1;const n=k().A.state;if(!n.isActive)return!1;if(n.simpleTableStore!==m)return!1;if(b().gc(m))return!1;const r=O().default.state;if(r.stores[0]===m&&r.phase===O().SelectionPhase.Selected)return!1;const i=n.hover;return"cell"!==i.type?i.type===g&&i.index===f:"column"===g?i.x===f:"row"===g&&i.y===f}),[t.device,f,m,g],{useDeepEqual:!0}),h=e.isSelected||v;return(0,z.jsx)(re().A,{allowDragWhileTextEditing:!0,onDraggableDragStart:h?o=>{var n;const{type:r}=e;o.preventDefault();const i=null===(n=l.current)||void 0===n?void 0:n.parentNode;if(!(i&&i instanceof Element))return;const a=i.getBoundingClientRect();s.current="column"===r?a.x:a.y;const d="column"===r?o.startX-a.x:o.startY-a.y;V().go({...e,environment:t,theme:c,selectorStartPx:s.current,mouseOffsetPx:d})}:void 0,onDraggableDragMove:h?t=>{const{type:o}=e;if(!s.current)return;const n=I().A.state;if(!n.isActive)return;const r="column"===o?t.diffX:t.diffY;if(0!==r){const t=s.current+r,o=function(e,t,o){const{delta:n,selectorDragPx:r}=e,i=me.findSelectorsOfTypeFromStore(o,t);if(n>0){const e=i.map((e=>{var t;const n=null===(t=e.getNode())||void 0===t?void 0:t.parentNode;if(!(n&&n instanceof Element))return;const r=n.getBoundingClientRect();return"column"===o?null==r?void 0:r.x:null==r?void 0:r.y})).filter(d().O9);e.sort(((e,t)=>e-t));for(let t=e.length-1;t>=0;t--)if(r>e[t])return t;return 0}const a=i.map((e=>{var t;const n=null===(t=e.getNode())||void 0===t?void 0:t.parentNode;if(!(n&&n instanceof Element))return;const r=n.getBoundingClientRect();return"column"===o?r.x+r.width:r.y+r.height})).filter(d().O9);return a.sort(((e,t)=>e-t)),a.filter(d().O9).findIndex((e=>r<e))}({delta:r,selectorDragPx:t+n.source.mouseOffsetPx},e.simpleTableStore,e.type);V().Tu({destIndex:o,selectorDragPx:t})}}:void 0,onDraggableDragEnd:h?n=>{const{isMobile:r}=t.device,{simpleTableStore:i,type:a,format:s}=e;if(!I().A.state.isActive)return;const{source:l,destIndex:c}=I().A.state;l.index===c?r||p(n):(M().createAndCommit({userAction:"SimpleTableRowColumnSelector.handleDragEnd",environment:t,canUndo:!0,perform:e=>{V().FM({environment:t,simpleTableStore:i,transaction:e,format:s,type:a})}}),"row"===a&&(0,o(134060).t)(t,{from:"selection_menu",draggedTypes:["table_row"],asCopy:!1})),u()}:void 0,onDraggableDragCancel:h?()=>{u()}:void 0,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:t=>(0,z.jsx)(fe,{ref:l,enabled:h,isSelected:e.isSelected,draggableEvents:t,type:e.type,index:e.index,simpleTableStore:e.simpleTableStore,rowStore:e.rowStore})})},fe=(0,n.forwardRef)((function(e,t){const n=(0,C().tz)(),{type:i,enabled:s,isSelected:c,draggableEvents:d}=e,u=(0,r().v3)(),p=(0,a().K8)((()=>I().A.state.isActive),[],{useDeepEqual:!0}),m=()=>{const{simpleTableStore:t,type:o,index:n}=e;V().Lb({type:o,simpleTableStore:t,index:n})},g=()=>{V().IN()},v=(0,x().IS)((t=>({base:{opacity:s?1:0,pointerEvents:s?void 0:"none",transition:"opacity 150ms ease",fill:t.lightIconColor,position:"absolute",display:"flex",alignItems:"center",cursor:p?"grab":"pointer",justifyContent:"center",borderRadius:4,background:t.whiteButtonBackground,boxShadow:e.isSelected?void 0:t.shadowSM,zIndex:4},column:{...ve(e.isSelected,t),top:-8,left:"calc(50% - 13px)",height:16,width:26,padding:"2px 4px"},row:{...ve(e.isSelected,t),top:"calc(50% - 13px)",left:-8,width:16,height:26,padding:"4px 2px"},hovered:{background:t.whiteButtonHoveredBackground,...ve(e.isSelected,t)},pressed:{...ve(e.isSelected,t,!0)}})),[s,p,e.isSelected]);return(0,z.jsx)(P().A,{"aria-label":"column"===i?n.formatMessage({id:"simpleTable.rowColumnSelector.moveColumn",defaultMessage:"Move column"}):n.formatMessage({id:"simpleTable.rowColumnSelector.moveRow",defaultMessage:"Move row"}),ref:t,className:"column"===i?f().yHP:f().A8d,style:{...v.base,...v[i]},hoveredStyle:v.hovered,pressedStyle:v.pressed,onClick:t=>function(e,t,n,r,i,a){const{isMobile:s}=a.device;o(407054).A.state.isActive||ue().it({environment:a,stores:[i],left:e.clientX,top:e.clientY,showInput:!0,actionSectionGroupKey:"simple_table",analyticsFrom:"simple_table_menu"});if(s){const{pn:e,tb:o}=V();("column"===t?e:o)({environment:a,index:n,simpleTableStore:r})}}(t,e.type,e.index,e.simpleTableStore,"column"===e.type?e.simpleTableStore:e.rowStore,u),onTouchStart:m,onTouchEnd:g,onMouseEnter:m,onMouseLeave:g,...d,disallowTabbing:!0,children:(0,o(887146).i)({fill:c?l().Ay.white:void 0,width:14,height:14,transform:"column"===i?"rotate(90deg)":void 0})})}));function ve(e,t){return e||arguments.length>2&&void 0!==arguments[2]&&arguments[2]?{background:t.simpleTableSelectionBorder}:void 0}const he=1,_e=n.memo((function(e){const t=(0,n.useRef)(null),s=(0,n.useRef)(null),{value:c}=(0,p().fJ)(X),{value:d}=(0,p().fJ)(J().g),{columnID:u,columnIndex:m,columnFormatWidth:g,formatStore:h,simpleTableStore:_,rowIndex:y,store:S,format:w,disabled:k,canEdit:C,legacyTransclusionParentStore:P,isColumnSelected:B,isRowSelected:R,isHeaderColumnEnabled:E,isHeaderRowEnabled:D}=e,N=(0,r().Y0)(),L=(0,r().v3)(),F=!k&&C,U=(0,a().K8)((()=>null==S?void 0:S.getPropertyStore(u)),[u,S]);(0,i().b)(ne().A,(()=>({getProps:()=>e,getNode:()=>t.current,getTextStore:()=>U})),[e,U]);const O=(0,n.useCallback)((e=>{k||(0,v().SQ)({event:e,context:v().y$.EditorClick,callback:()=>{C&&e.shiftKey?V().hk({environment:L,rowIndex:y,columnIndex:m,simpleTableStore:_}):C?V().as({environment:L,rowIndex:y,columnIndex:m,simpleTableStore:_}):V().VC({environment:L,rowIndex:y,columnIndex:m,simpleTableStore:_})}})}),[C,m,k,L,y,_]),j=(0,n.useCallback)((e=>{k||(0,v().SQ)({event:e,context:v().y$.EditorContextMenu,callback:()=>{V().VC({environment:L,rowIndex:y,columnIndex:m,simpleTableStore:_})}})}),[m,k,L,y,_]),q=(0,n.useCallback)((e=>{k||C&&e.shiftKey&&V().hk({environment:L,rowIndex:y,columnIndex:m,simpleTableStore:_})}),[C,m,k,L,y,_]),H=(0,n.useCallback)((()=>{k||V().tM({x:m,y,simpleTableStore:_})}),[m,k,y,_]),W=(0,n.useCallback)((()=>{k||V().IN()}),[k]),K=(0,n.useCallback)((e=>{h.setTemporaryFormat({...h.state.temporaryFormat||w,table_block_column_format:{...(h.state.temporaryFormat||w).table_block_column_format,[u]:e}})}),[u,h,w]),G=(0,n.useCallback)((()=>{var e;return(null===(e=t.current)||void 0===e?void 0:e.getBoundingClientRect().width)||0}),[]),re=(0,n.useCallback)((()=>{var e;const t=null===(e=h.state.temporaryFormat)||void 0===e?void 0:e.table_block_column_format;M().createAndCommit({userAction:"SimpleTableCell.handleColumnResizeAccept",environment:L,canUndo:!0,perform:e=>{V().Fd({tableBlockColumnFormat:t||{},simpleTableStore:_,transaction:e})}}),h.setTemporaryFormat(void 0)}),[L,h,_]),ie=(0,n.useCallback)((()=>{h.setTemporaryFormat(void 0)}),[h]),ae=(0,n.useCallback)((e=>{var t;if(e.preventDefault(),null===(t=s.current)||void 0===t||!t.isComposing())if(N.isMobile){if(k||!C)return;const e=oe().default.state;if("editing"===e.mode){const t="default";M().createAndCommit({userAction:"SimpleTableCell.mobileEnter",environment:L,canUndo:!0,perform:o=>{Q().$D({environment:L,editorMode:t,string:"\n",multiSelection:e.multiSelection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:o})}})}}else{"editing"===oe().default.state.mode&&V().b9({environment:L,direction:"down",bypassExistingTextSelection:!0})}}),[C,N.isMobile,k,L]),le=(0,n.useCallback)((e=>{e.preventDefault(),V().$G({environment:L,direction:"right",bypassExistingTextSelection:!0})}),[L]),ce=(0,n.useCallback)((e=>{e.preventDefault(),V().$G({environment:L,direction:"left",bypassExistingTextSelection:!0})}),[L]),ue=(0,n.useCallback)((e=>{k||(e.preventDefault(),Z().clear({environment:L}))}),[L,k]),pe=(0,n.useCallback)((async e=>{const t=A().A.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,r=b().$O(n);if(!r)return;(await $().R.clipboardActions.load()).copy({environment:L,event:e,markdownLinkifyIt:d});const i="editing"===oe().default.state.mode&&oe().default.state.multiSelection;if(!i||(0,te().kM)(i)){const t=await ee().T.formulas.load();Y().A_({environment:L,simpleTableStore:n,selection:o,currentRows:n.getContentStores(),columnOrder:r,event:e,exportJsxRenderer:c,formulasModule:t})}}),[L,c,d]),me=(0,n.useCallback)((async e=>{if(k||!C)return;await pe(e);const t="editing"===oe().default.state.mode&&oe().default.state.multiSelection;t&&!(0,te().kM)(t)?M().createAndCommit({userAction:"SimpleTableCell.handleCut",environment:L,canUndo:!0,perform:e=>{Q().f0({environment:L,multiSelection:t,transaction:e})}}):M().createAndCommit({userAction:"SimpleTableCell.handleCut",environment:L,canUndo:!0,perform:e=>{V().xD({environment:L,transaction:e})}})}),[C,k,L,pe]),fe=(0,a().K8)((()=>{if(!S)return!1;const e=I().A.state;if(!e.isActive||e.simpleTableStore!==_||!e.moved)return!1;const{type:t,id:o}=e.source;return"column"===t?o===u:o===S.id}),[u,_,S]),{blockColor:ve,columnFormat:_e}=(0,a().K8)((()=>({blockColor:null==S?void 0:S.getFormat().block_color,columnFormat:b().o0(_)})),[S,_]),be=(0,n.useMemo)((()=>({type:"simple_table_cell_match",propertyId:u})),[u]),ye=(0,x().IS)((e=>{const t=function(e){const{columnFormat:t,rowIndex:o,columnIndex:n,columnID:r,theme:i,isHeaderColumnEnabled:a,isHeaderRowEnabled:s,blockColor:c}=e;let d=c||"default";if(t&&r in t){var u;const e=null===(u=t[r])||void 0===u?void 0:u.color;e&&(d=e)}if(0===o&&s||0===n&&a)return"default"!==d?{...(0,l().k5)(d,i),fontWeight:T().Wy.medium}:{background:i.tableHeaderRowColumnBackground,fontWeight:T().Wy.medium};return(0,l().k5)(d,i)}({columnFormat:_e,rowIndex:y,columnIndex:m,isHeaderColumnEnabled:E,isHeaderRowEnabled:D,columnID:u,blockColor:ve,theme:e});return{cell:{...t,border:`${he}px solid ${e.tableDividerColor}`,isolation:"auto",position:"relative",verticalAlign:"top",textAlign:"start",minWidth:g??120,maxWidth:g??240,minHeight:32},contents:{width:"100%",height:"100%",...t},text:{padding:"7px 9px",backgroundColor:"transparent",fontSize:14,lineHeight:"20px"}}}),[ve,_e,g,u,m,E,D,y]),Se=(0,z.jsxs)(z.Fragment,{children:[fe&&(0,z.jsx)("div",{style:ye.contents}),(0,z.jsxs)("div",{className:f().NER,style:{isolation:"auto",visibility:fe?"hidden":void 0},children:[S&&0===y&&F&&(0,z.jsx)(ge,{index:m,type:"column",simpleTableStore:_,isSelected:B,id:u,format:w,rowStore:S}),S&&0===m&&F&&(0,z.jsx)(ge,{index:y,type:"row",simpleTableStore:_,isSelected:R,id:S.id,format:w,rowStore:S}),U?(0,z.jsx)(o(246722).A,{ref:s,disabled:k,store:U,disableSlashCommands:!0,onClick:q,onEnter:ae,onTab:le,onUntab:ce,onEsc:ue,onCut:me,onCopy:pe,style:ye.text,pasteBehavior:"inline",className:f().UqD,disableDrag:!0,legacyTransclusionParentStore:P,inPageFind:be}):(0,z.jsx)("div",{style:ye.text,children:" "}),!N.isMobile&&F&&(0,z.jsx)(se,{format:e.format,formatStore:e.formatStore,columnId:e.columnID,columnIndex:m,columnID:u,simpleTableStore:_,getWidth:G,onTemporaryResize:K,onAccept:re,onCancel:ie}),!N.isMobile&&F&&(0,z.jsx)(de,{simpleTableStore:_,rowIndex:y,columnIndex:m})]})]}),we={style:ye.cell,onClick:O,onContextMenu:j,onMouseEnter:H,onMouseLeave:W};return D&&0===y?(0,z.jsx)("th",{ref:t,scope:"col",...we,children:Se}):E&&0===m?(0,z.jsx)("th",{ref:t,scope:"row",...we,children:Se}):(0,z.jsx)("td",{ref:t,...we,children:Se})}));function be(e,t){let{columnOrder:r,store:i,rowIndex:s,rowStore:l,selection:c,formatStore:d,disabled:u,rowCount:p,columnCount:m,isHeaderColumnEnabled:g,isHeaderRowEnabled:v,canEdit:_,format:y}=e;const S=(0,n.useRef)(null),w=(0,a().K8)((()=>Boolean(l)&&l.getParentId()!==i.id),[l,i.id]),k={isolation:"auto",border:(0,o(611191).iE)()&&w?"3px dashed deeppink":void 0},I=!!c&&(0,b().qD)({selection:c,rowIndex:s,columnCount:m}),A=(0,a().K8)((()=>{var e;return(null==d||null===(e=d.state)||void 0===e?void 0:e.temporaryFormat)||y}),[y,d]);return(0,h().NW)(i,t,(0,n.useMemo)((()=>({renderedType:"table",getNode:()=>S.current,getBlockStore:()=>i})),[i]),r?(0,z.jsx)("tr",{className:f().nGK,style:k,ref:S,children:r.map(((e,t)=>{var o;return(0,z.jsx)(_e,{disabled:u,canEdit:_,columnID:e,columnIndex:t,columnFormatWidth:(null===(o=A.table_block_column_format)||void 0===o||null===(o=o[e])||void 0===o?void 0:o.width)??null,rowIndex:s,store:l,simpleTableStore:i,isColumnSelected:!!c&&(0,b().Gl)({selection:c,columnIndex:t,rowCount:p}),isRowSelected:I,formatStore:d,format:y,legacyTransclusionParentStore:w?i:void 0,isHeaderColumnEnabled:g,isHeaderRowEnabled:v},e)}))}):null)}const ye=n.memo(n.forwardRef(be),c().A);o(672577);var Se=()=>o(269380),we=()=>o(778417),ke=()=>o(545805),Ie=()=>o(335722),Ae=()=>o(77272);function xe(e){const{store:t,children:o,selection:i,disabled:a,canEdit:s}=e,l=(0,r().v3)(),{value:c}=(0,p().fJ)(ee().T.formulas),d=(0,n.useCallback)((e=>{e.preventDefault&&e.preventDefault(),V().$G({environment:l,direction:"left",bypassExistingTextSelection:!1,expandSelection:e.shiftKey})}),[l]),u=(0,n.useCallback)((e=>{e.preventDefault&&e.preventDefault(),V().$G({environment:l,direction:"right",bypassExistingTextSelection:!1,expandSelection:e.shiftKey})}),[l]),m=(0,n.useCallback)((e=>{e.preventDefault&&e.preventDefault(),V().b9({environment:l,direction:"up",bypassExistingTextSelection:!1,expandSelection:e.shiftKey})}),[l]),g=(0,n.useCallback)((e=>{e.preventDefault&&e.preventDefault(),V().b9({environment:l,direction:"down",bypassExistingTextSelection:!1,expandSelection:e.shiftKey})}),[l]),f=(0,n.useCallback)((e=>{e.preventDefault&&e.preventDefault();const t=A().A.state;if(t.isActive){const{selection:e,simpleTableStore:o}=t;b().kP(e)&&V().as({environment:l,rowIndex:e.start.row,columnIndex:e.start.col,simpleTableStore:o})}}),[l]),v=(0,n.useCallback)((e=>{var t;null===(t=e.preventDefault)||void 0===t||t.call(e);const o=A().A.state;if(!o.isActive)return;const{selection:n,simpleTableStore:r}=o;b().kP(n)&&n.end.row===b().yv(r)-1&&M().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleShiftEnter",environment:l,canUndo:!0,perform:e=>{const t=n.end.row+1;V().Il({environment:l,transaction:e,index:t,simpleTableStore:r}),V().as({environment:l,rowIndex:t,columnIndex:n.start.col,simpleTableStore:r})}})}),[l]),h=(0,n.useCallback)((e=>{e.preventDefault&&e.preventDefault();const o=A().A.state;if(!o.isActive)return;const{selection:n,simpleTableStore:r}=o;b().wg()?Z().clear({environment:l}):b().kP(n)?V().tb({environment:l,index:n.start.row,simpleTableStore:r}):(V().wr(),we().td({environment:l,stores:[t]}))}),[l,t]),_=(0,n.useCallback)((e=>{M().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleDelete",environment:l,canUndo:!0,perform:e=>{V()._Y({environment:l,transaction:e})}})}),[l]),y=(0,n.useCallback)((e=>{!e.key||e.metaKey||e.ctrlKey||(U().A.setKeyboardMode(!0),M().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleKeypress",environment:l,canUndo:!0,perform:t=>{V().jJ({environment:l,editorMode:"default",transaction:t,key:e.key})}}))}),[l]),{value:S}=(0,p().fJ)(X),w=(0,n.useCallback)((e=>{const t=A().A.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,r=b().$O(n);r&&Y().A_({environment:l,simpleTableStore:n,selection:o,currentRows:n.getContentStores(),columnOrder:r,event:e,exportJsxRenderer:S,formulasModule:c})}),[l,S,c]),k=(0,n.useCallback)((e=>{!a&&s&&(w(e),M().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleCut",environment:l,canUndo:!0,perform:e=>{V()._D({environment:l,transaction:e})}}))}),[l,a,s,w]),{value:I}=(0,p().fJ)(J().g),{value:x}=(0,p().fJ)(Ie().S),{value:C}=(0,p().fJ)($().R.clipboardActions),T=(0,n.useCallback)((e=>{if(a||!s||!C)return;const t=A().A.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,r=b().$O(n);r&&M().createAndCommit({userAction:"SimpleTableSelectionOverlay.handlePaste",environment:l,canUndo:!0,perform:t=>{Y().GZ({environment:l,simpleTableStore:n,selection:o,currentRows:n.getContentStores(),columnOrder:r,event:e,transaction:t,markdownLinkifyIt:I,tinyMceMicrosoftWordPasteFilter:x,clipboardActions:C})}})}),[l,a,s,I,x,C]),P=(0,n.useCallback)((e=>{e.preventDefault(),M().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleDuplicate",environment:l,canUndo:!0,perform:e=>{V().kZ({environment:l,transaction:e})}})}),[l]),B=(0,n.useCallback)(((e,o)=>{!a&&s&&(o.preventDefault(),M().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleAnnotation",environment:l,canUndo:!0,perform:o=>{V().F8({environment:l,editorMode:"default",simpleTableStore:t,annotation:e,transaction:o})}}))}),[l,a,s,t]),R=(0,n.useCallback)((e=>B(["h",Ae().A.getMostRecentlyUsedColor()],e)),[B]),E=(0,n.useCallback)((e=>B(["b"],e)),[B]),D=(0,n.useCallback)((e=>B(["i"],e)),[B]),N=(0,n.useCallback)((e=>B(["s"],e)),[B]),L=(0,n.useCallback)((e=>B(["_"],e)),[B]),F=(0,n.useCallback)((e=>B(["c"],e)),[B]);return(0,z.jsx)(ke().A,{debugName:"SimpleTableKeyboardArea",capture:Boolean(i)&&!a&&s,onLeft:d,onRight:u,onUntab:d,onTab:u,onUp:m,onDown:g,onEnter:f,onShiftEnter:v,onEsc:h,onDelete:_,onBackspace:_,onKeypress:y,onCut:k,onCopy:w,onPaste:T,onDuplicate:P,onToggleHighlight:R,onToggleBold:E,onToggleItalics:D,onToggleStrike:N,onToggleUnderline:L,onToggleCode:F,children:o})}const Ce=(0,C().YK)({tooltipContent:{id:"simpleTable.resizer.dimensions",defaultMessage:"{num_columns} × {num_rows}"}});const Te=function(e){const t=(0,n.useRef)(null),i=(0,r().v3)(),{store:s,type:c,formatStore:d}=e,[u,p]=(0,n.useState)(!1),m=()=>{M().createAndCommit({userAction:"SimpleTableResizer.handleResizeClick",environment:i,canUndo:!0,perform:e=>{"row"!==c&&V().eI({count:1,simpleTableStore:s,transaction:e}),"column"!==c&&V().S0({environment:i,count:1,simpleTableStore:s,transaction:e,analyticsFrom:"resize_click"})}})},g=(0,a().K8)((()=>Boolean(b().gc(s,c))),[s,c]),f=(0,a().K8)((()=>{const e=b().gc(s,c);return null==e?void 0:e.tooltipOriginRect}),[s,c]),v=(0,a().K8)((()=>{const e=s.getFormat(),{temporaryFormat:t}=d.state;return(t||e).table_block_column_order}),[d,s]),h=(0,a().K8)((()=>{const t=b().gc(e.store);return t?t.rowsDelta:0}),[e.store]),_=(0,a().K8)((()=>{const t=k().A.state,o=b().gc(e.store,e.type);return!U().A.state.isKeyboardMode&&(function(e,t,o){if(!e.isActive||e.simpleTableStore!==o)return!1;const{hover:n}=e;if("cell"===n.type){const e=n.y===b().yv(o)-1,r=n.x===b().MW(o)-1;return"row"===t?e:("column"===t||e)&&r}return"resizer"===n.type&&n.resizer===t}(t,e.type,e.store)||Boolean(o))||u}),[u,e.store,e.type]),y=(0,x().IS)((e=>({button:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:g?e.simpleTableSelectionBorder:e.lightDividerColor},plusIcon:{width:12,height:12,fill:g?l().Ay.white:e.mediumIconColor,padding:"auto"},outer:{},inner:{display:"flex",flexDirection:"row"===c?"row":void 0,width:"100%",height:"100%",opacity:_?1:0,pointerEvents:_?void 0:"none",transition:"opacity 150ms ease 50ms"}})),[g,_,c]);return(0,z.jsx)("div",{style:Be(e.type),onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,o(819121).p)(t)&&p(!0)},onBlur:()=>{p(!1)},onMouseEnter:()=>{const{store:t,type:o}=e;V().xs({simpleTableStore:t,resizer:o})},onMouseLeave:()=>{V().IN()},ref:t,children:(0,z.jsx)(re().A,{onDraggableDragStart:e=>{var o;e.preventDefault();const n=null===(o=t.current)||void 0===o?void 0:o.getBoundingClientRect();j().A.setState({isActive:!0,simpleTableStore:s,resize:c,rowsDelta:0,columnsDelta:0,tooltipOriginRect:n}),d.setTemporaryFormat(s.getFormat())},onDraggableDragMove:n=>{var r;const i=b().gc(s,c);if(!i)return;const a=null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect();if("row"!==c){const t=n.diffX>0?Math.ceil((n.diffX-30)/120):Math.floor((n.diffX+30)/120);if(t<0&&b().oC({simpleTableStore:s,lastN:Math.abs(t)}))return;j().A.setState({...i,columnsDelta:t,tooltipOriginRect:a});const r=function(t){const{store:n}=e,r=v||[],i=b().$O(n)||[];if(t>0){const e=t-(r.length-i.length);if(e>0){const t=[...Array(e).keys()].map((e=>(0,o(183558).Ay)()));return[...r,...t]}return r.slice(0,r.length+e)}return i.slice(0,Math.max(1,i.length-Math.abs(t)))}(t);d.updateColumnOrder(r),V().VD(r.length-1)}if("column"!==c){const e=n.diffY>0?Math.ceil((n.diffY-8)/32):Math.max(-(b().yv(s)-1),Math.floor((n.diffY+8)/32));if(e<0&&b().S9({simpleTableStore:s,lastN:Math.abs(e)}))return;j().A.setState({...i,rowsDelta:e,tooltipOriginRect:a}),V().zb(b().yv(s)+e-1)}},onDraggableDragEnd:t=>{const o=b().MW(s);M().createAndCommit({userAction:"SimpleTableResizer.handleDragEnd",environment:i,canUndo:!0,perform:e=>{"row"!==c&&v&&(v.length>o?V().eI({count:v.length-o,simpleTableStore:s,transaction:e}):v.length<o&&V().gU({simpleTableStore:s,columnOrder:v,transaction:e})),"column"!==c&&(h>0?V().S0({environment:i,count:h,simpleTableStore:s,transaction:e,analyticsFrom:"resize_drag"}):h<0&&V().Sv({numRowsToDelete:Math.abs(h),simpleTableStore:s,transaction:e}))}}),Pe(e.formatStore)},onDraggableDragCancel:()=>{Pe(e.formatStore)},disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:t=>(0,z.jsx)("div",{style:y.inner,...t,children:(0,z.jsx)(L().A,{renderTooltip:()=>(0,z.jsx)(Me,{type:c,isResizing:g,columnOrder:v||[],rowCount:b().yv(s)+h}),placement:F().W.Bottom,delayThreshold:0,originRect:f,forceVisibleState:!0===g||void 0,render:t=>(0,z.jsx)(P().A,{onClick:m,style:Re(!0,e.type),hoveredStyle:Re(!0,e.type),...t,children:(0,z.jsx)("div",{style:y.button,children:(0,o(689094).W)(y.plusIcon)})})})})})})};function Me(e){const t=(0,C().tz)(),{type:o,isResizing:n,columnOrder:r,rowCount:i}=e,a=(0,x().IS)((e=>({wrapper:{display:"flex",flexDirection:"column",alignItems:"center",color:e.text.contrastSecondary},boldText:{color:e.text.contrastPrimary}})),[]);if(!n){const e=e=>(0,z.jsx)("b",{style:a.boldText,children:e});return(0,z.jsxs)("div",{style:a.wrapper,children:[(0,z.jsxs)("div",{children:["row"===o&&(0,z.jsx)(C().sA,{id:"simpleTable.resizer.tooltipRow",defaultMessage:"<b>Click</b> to add a new row",values:{b:e}}),"column"===o&&(0,z.jsx)(C().sA,{id:"simpleTable.resizer.tooltipColumn",defaultMessage:"<b>Click</b> to add a new column",values:{b:e}}),"corner"===o&&(0,z.jsx)(C().sA,{id:"simpleTable.resizer.tooltipCorner",defaultMessage:"<b>Click</b> to add a new row and column",values:{b:e}})]}),(0,z.jsxs)("div",{children:["row"===o&&(0,z.jsx)(C().sA,{id:"simpleTable.resizer.tooltipSubtitleRow",defaultMessage:"<b>Drag</b> to quickly add or remove rows",values:{b:e}}),"column"===o&&(0,z.jsx)(C().sA,{id:"simpleTable.resizer.tooltipSubtitleColumn",defaultMessage:"<b>Drag</b> to quickly add or remove columns",values:{b:e}}),"corner"===o&&(0,z.jsx)(C().sA,{id:"simpleTable.resizer.tooltipSubtitleCorner",defaultMessage:"<b>Drag</b> to quickly add or remove rows and columns",values:{b:e}})]})]})}const s=r||[],l=t.formatMessage(Ce.tooltipContent,{num_columns:s.length,num_rows:i});return(0,z.jsx)("div",{children:l})}function Pe(e){e.reset(),j().A.reset()}function Be(e){const t={position:"absolute",display:"flex"};return"row"===e?{...t,flexDirection:"row",bottom:-y,left:0,right:0}:"column"===e?{...t,insetInlineEnd:-y,top:0,bottom:0}:{...t,bottom:-y,insetInlineEnd:-y}}function Re(e,t){const o=e?16:20,n="100%";return"column"===t?{flex:1,width:o,height:n,cursor:"col-resize",borderRadius:4,overflow:"hidden"}:"row"===t?{flex:1,width:n,height:o,cursor:"row-resize",borderRadius:4,overflow:"hidden"}:{flex:1,width:o,height:o,cursor:"nwse-resize",borderRadius:"50%",overflow:"hidden"}}const Ee=9,De=26;function Ne(e){const{position:t,onDraggableDragStart:o,onDraggableDragMove:n,onDraggableDragEnd:i,onDraggableDragCancel:a}=e,s=(0,r().Y0)().isMobile?De:Ee,c=(0,x().IS)((e=>({tapArea:{position:"absolute",top:"top-left"===t?-s/2:void 0,left:"top-left"===t?-s/2:void 0,bottom:"bottom-right"===t?-s/2:void 0,right:"bottom-right"===t?-s/2:void 0,width:s,height:s,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",pointerEvents:"auto",cursor:"nwse-resize",zIndex:10},dragHandle:{width:Ee,height:Ee,border:`2px solid ${l().Ay.blueWithAlpha(.57)}`,background:e.contentBackground,borderRadius:"50%"}})),[t,s]);return(0,z.jsx)(re().A,{allowDragWhileTextEditing:!0,onDraggableDragStart:o,onDraggableDragMove:n,onDraggableDragEnd:i,onDraggableDragCancel:a,render:e=>(0,z.jsx)("div",{...e,style:c.tapArea,children:(0,z.jsx)("div",{style:c.dragHandle})})})}const Le=function(e){const t=(0,r().v3)(),i=(0,n.useRef)(null),l=(0,n.useRef)(void 0),{children:c,store:d,selection:u,formatStore:p,disabled:m,canEdit:g,columnOrder:f}=e,v=(0,a().K8)((()=>{const{device:e}=t;return!(m||!g||e.isMobile)&&!(o(861841).Ay.state.isDragging||function(e){const t=k().A.state;if(!t.isActive)return!1;if(t.simpleTableStore!==e)return!1;if("cell"!==t.hover.type)return!1;return t.hover.resizing}(d)||function(e){const t=I().A.state;return t.isActive&&t.simpleTableStore===e}(d))}),[g,m,t,d]),h=(0,a().r6)((()=>{if(u&&i.current&&f)return Fe({cell:u.start,tableElement:i.current,store:d,columnOrder:f})}),[f,u,d],{useDeepEqual:!0}),_=(0,a().r6)((()=>{if(u&&i.current&&f)return Fe({cell:u.end,tableElement:i.current,store:d,columnOrder:f})}),[f,u,d],{useDeepEqual:!0}),b=(0,a().O$)(h),y=(0,a().O$)(_);(0,n.useEffect)((()=>{const e=()=>{h.enqueueRecompute(),_.enqueueRecompute()};if(i.current){const t=new MutationObserver(e);return t.observe(i.current,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),()=>t.disconnect()}}),[_,h]);const S=(0,a().K8)((()=>{const t=I().A.state;if(!t.isActive)return;if(t.simpleTableStore!==e.store)return;if(!i.current)return;const{source:o,selectorDragPx:n,moved:r}=t;if(o.selectorStartPx===n&&!r)return;if(!o.draggedCells[0])return;const a=o.draggedCells[0].rect,l=i.current.getBoundingClientRect(),c="column"===o.type?0:(0,s().A)(n-l.top,-8,l.height-32);return{left:"column"===o.type?(0,s().A)(n-l.left,-a.width/3,l.width-2/3*a.width):0,top:c,draggedCells:o.draggedCells,type:o.type}}),[e.store]),w=(0,a().K8)((()=>!e.disabled&&(b&&y||S)),[S,e.disabled,y,b]);return(0,z.jsx)(xe,{store:d,selection:u,disabled:m,canEdit:g,children:(0,z.jsx)(re().A,{onDraggableDragStart:t=>{e.canEdit&&(t.shiftKey&&e.selection?l.current=e.selection.start:l.current=ze(t.startX,t.startY,e.store))},onDraggableDragMove:n=>{if(!e.canEdit||!l.current)return;const r=l.current,i=ze(n.currentX,n.currentY,e.store);(0,o(450510).fU)(r,i)?V().VC({environment:t,rowIndex:r.row,columnIndex:r.col,simpleTableStore:e.store}):V().ep({environment:t,start:r,end:i,simpleTableStore:e.store})},render:e=>(0,z.jsxs)("div",{ref:i,style:{position:u||v?"relative":void 0},...e,children:[c,w&&(0,z.jsxs)("div",{style:{position:"absolute",top:0,left:0,pointerEvents:"none"},children:[(0,z.jsx)(Ue,{store:d,dragState:S,tableElement:i.current}),b&&y&&(0,z.jsx)(Oe,{startRect:b,endRect:y,dragState:S,canEdit:g,selection:u,store:d})]}),v&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Te,{store:d,type:"column",formatStore:p},"column"),(0,z.jsx)(Te,{store:d,type:"row",formatStore:p},"row"),(0,z.jsx)(Te,{store:d,type:"corner",formatStore:p},"corner")]})]})})})};function Fe(e){const{cell:t,tableElement:o,store:n,columnOrder:r}=e,i=n.getContentStores()[t.row],a=ne().A.findCellsInRowFromStore(i,n,t.row),s=(l=a,c=r[t.col],null===(d=l.find((e=>e.getProps().columnID===c)))||void 0===d||null===(d=d.getNode())||void 0===d?void 0:d.getBoundingClientRect());var l,c,d;if(!s)return;const u=o.getBoundingClientRect(),p=s.top-u.top,m=s.left-u.left,g=s.width,f=function(e){return Math.max(...e.map((e=>{var t;return(null===(t=e.getNode())||void 0===t||null===(t=t.getBoundingClientRect())||void 0===t?void 0:t.height)||0})))}(a);return new DOMRect(m-2,p-2,g+4,f+4)}function Ue(e){const{tableElement:t,dragState:o}=e,r=(0,n.useMemo)((()=>{const e=null==t?void 0:t.getBoundingClientRect();if(!o||!e)return null;const{draggedCells:n,type:r}=o;return n.map((t=>"column"===r?{cloned:t.cloned,rect:new DOMRect(0,t.rect.top-e.top,t.rect.width,t.rect.height)}:{cloned:t.cloned,rect:new DOMRect(t.rect.left-e.left,0,t.rect.width,t.rect.height)}))}),[o,t]);return r&&o&&t?(0,z.jsx)("div",{"data-drag-overlay":!0,style:{position:"absolute",left:o.left,top:o.top,zIndex:5},children:r.map(((e,t)=>(0,z.jsx)(Se().A,{element:e,opacity:.9},t)))}):null}function Oe(e){const{startRect:t,endRect:o,dragState:i,selection:a,store:s}=e,l=(0,r().v3)(),c=(0,r().Y0)(),d=Math.min(t.left,o.left),u=Math.min(t.top,o.top),p=Math.max(t.right,o.right),m=Math.max(t.top+t.height,o.top+o.height),g=(0,n.useRef)(void 0);function v(e){if(!a)return;const{start:t,end:o}=a;g.current={col:"top-left"===e?Math.max(t.col,o.col):Math.min(t.col,o.col),row:"top-left"===e?Math.max(t.row,o.row):Math.min(t.row,o.row)}}const h=t=>{if(!g.current)return;const o=ze(t.currentX,t.currentY,s);V().ep({environment:l,start:g.current,end:o,simpleTableStore:e.store})},_=(0,x().IS)((e=>({base:{position:"absolute",left:i&&"column"===i.type?i.left:d+1.5,top:i&&"row"===i.type?i.top:u+1.5,width:p-d-3,height:m-u-3},wrapper:{zIndex:i?4:2,backgroundColor:i?e.contentBackground:void 0,opacity:i?.9:void 0,boxShadow:i?e.shadowMD:void 0,borderRadius:2},inner:{border:`solid ${e.simpleTableSelectionBorder}`,borderWidth:2,borderRadius:2,zIndex:i?5:3}})),[3,i,m,p,d,u]);return t&&o?(0,z.jsxs)("div",{className:f().fep,children:[(0,z.jsx)("div",{style:{..._.base,..._.wrapper}}),(0,z.jsx)("div",{style:{..._.base,..._.inner},children:e.canEdit&&(0,z.jsxs)(z.Fragment,{children:[!c.isMobile&&(0,z.jsx)(Ne,{position:"top-left",onDraggableDragStart:()=>v("top-left"),onDraggableDragMove:h}),(0,z.jsx)(Ne,{position:"bottom-right",onDraggableDragStart:()=>v("bottom-right"),onDraggableDragMove:h})]})})]}):null}function Ve(e,t){const o=ne().A.findCellsInRowFromStore(void 0,t,0).sort(((e,t)=>e.getProps().columnIndex-t.getProps().columnIndex));for(let n=0;n<o.length;n++){if(e<=o[n].getNode().getBoundingClientRect().right)return n}return o.length-1}function je(e,t){const o=ne().A.findCellsInColumnFromStore(t,0).sort(((e,t)=>e.getProps().rowIndex-t.getProps().rowIndex));for(let n=0;n<o.length;n++){if(e<=o[n].getNode().getBoundingClientRect().bottom)return n}return o.length-1}function ze(e,t,o){return{col:Ve(e,o),row:je(t,o)}}const qe=y,He={isolation:"auto"},We=(0,n.memo)((0,n.forwardRef)((function(e,t){const{store:c,disabled:p,disableHoverMenu:m,showRowIds:y,style:S,disableCommentMenu:x,hideContent:C,isLastItem:T}=e,M=(0,r().v3)(),{currentUser:P}=M,B=(0,r().Y0)(),R=(0,h().bx)(c,p),E=(0,o(792485).S)(),D=(0,n.useContext)(o(27654).c),N=(0,a().uB)(void 0,w),L=(0,h().VE)(c),F=(0,n.useRef)(null),U=(0,n.useRef)(null),O=(0,n.useMemo)((()=>new(_().E)),[]),V=(0,n.useMemo)((()=>new(_().E)),[]);(0,n.useEffect)((()=>()=>{O.destroy(),V.destroy()}),[O,V]);const j=(0,a().K8)((()=>b().Xe({simpleTableStore:c,environment:M,includeInline:!0})),[c,M],{useDeepEqual:!0}),q=(0,a().K8)((()=>{const e={width:"100%",position:"relative",alignSelf:"center"};return(B.isMobile||D||!c.isRootOrDirectChild())&&(e.maxWidth=j?"calc(100% - 40px)":"100%"),e}),[B,j,c,D]),H=(0,a().K8)((()=>c.getFormat()),[c]),W=H.block_color||"default",K=(0,a().K8)((()=>({...(0,l().k5)(W,(0,l().O4)({theme:"light"})),...S,position:"relative",display:"flex",...(0,u().RX)(c)&&{width:(0,o(644914).Uh)(M),position:"sticky",left:0}})),[c,M,S,W]),$=(0,a().K8)((()=>(N.state.temporaryFormat||H).table_block_column_order),[H,N]),Y=(0,a().K8)((()=>{const e=b().gc(c);return e?e.rowsDelta:0}),[c]),Q=(0,a().K8)((()=>b().yv(c)),[c]),Z=(0,a().K8)((()=>b().MW(c)),[c]),X=(0,a().K8)((()=>{const e=A().A.state;if(e.isActive&&e.simpleTableStore===c){const t=(null==$?void 0:$.length)||Z,o=Q+Y,{selection:{start:n,end:r,type:i}}=e;return{start:{col:(0,s().A)(n.col,0,t-1),row:(0,s().A)(n.row,0,o-1)},end:{col:(0,s().A)(r.col,0,t-1),row:(0,s().A)(r.row,0,o-1)},type:i}}}),[c,null==$?void 0:$.length,Z,Q,Y],{useDeepEqual:!0}),J=(0,a().K8)((()=>{const e=k().A.state;if(e.isActive&&e.simpleTableStore===c){const{hover:t}=e;if("cell"===t.type&&t.resizing)return"col-resize"}const t=b().gc(c);if(t){if("column"===t.resize)return"col-resize";if("row"===t.resize)return"row-resize";if("corner"===t.resize)return"nwse-resize"}const o=I().A.state;if(o.isActive&&o.simpleTableStore===c)return"grab"}),[c]),ee=(0,a().K8)((()=>(0,u().l0)({environment:M,store:c,isFullScreen:!1,sizeObserver:O,collectionContextStore:void 0})),[M,c,O]),te=(null==ee?void 0:ee.paddingLeft)||0,oe=(0,a().K8)((()=>(0,o(437622).s7)(M)),[M]),ne=(0,a().K8)((()=>!p&&("comment_only"===c.getRole()||"comment"===(null==E?void 0:E.publicEditModeStore.state.permission))&&P.isLoggedIn()),[c,p,E,P]),re=(0,a().K8)((()=>{const e=c.getContentStores(),t=Y<0?e.length+Y:e.length,o=(0,d().O9)(y)?e.filter((e=>null==y?void 0:y.includes(e.id))):e;return o.slice(0,t)}),[c,Y,y]),ie=(0,a().K8)((()=>o(620689).u5(M)),[M]),ae=(0,a().K8)((()=>null==$?void 0:$.map((e=>re.map((t=>t.getPropertyStore(e)))))),[re,$]),{headerColumn:se,headerRow:le}=(0,a().K8)((()=>(0,b().uq)(c)),[c]);(0,i().b)(o(832410).A,(()=>({selection:X,textStores:ae})),[]);const ce=(0,n.useCallback)((e=>{B.isMobile||(0,v().SQ)({event:e,context:v().y$.EditorMouseDown,callback:()=>{e.preventDefault(),o(257615).jD({environment:M,target:e.target,startX:e.clientX,startY:e.clientY,showSelectionRect:!0,preventSelectStores:[],allowVerticalEdgeScroll:!0,allowHorizontalEdgeScroll:!0})}})}),[M,B.isMobile]),de=(0,n.useCallback)((e=>{e&&O.observe(e)}),[O]),ue=(0,n.useCallback)((e=>{const t=null==e?void 0:e.getNode();t&&V.observe(t)}),[V]),pe=(0,a().uB)(void 0,o(17090).A);const me=(0,z.jsx)(o(739283).A,{disableCommentMenu:x,hideContent:C,store:c,recursivelyLoadAllDiscussions:!L,hideIfSidebarOrMarginCommentsVisible:!0}),ge=Boolean(me)&&j>0||D,fe=(0,o(963589).X)("simple_table_buffer")?20:0,ve=(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(o(2143).H,{type:o(756279).A.X,preventType:ie,style:{flexGrow:1,paddingLeft:fe,marginLeft:-fe},store:pe,children:function(e){if(!$)return;const t=!B.isPhone,o=(0,z.jsx)("div",{style:{display:"flex"},children:(0,z.jsx)("div",{style:{paddingTop:8,paddingBottom:qe,paddingInlineEnd:qe},children:(0,z.jsx)(g().A,{store:c,shouldShowHalo:!0,canSelect:!0,canDropLeft:t,canDropRight:t,canDropAbove:!1,canDropBelow:!1,aboveDropZoneMargin:4,belowDropZoneMargin:4,analyticsName:"page_content",shouldShowDropZone:!0,style:{position:"relative"},inheritDir:!0,className:f().d0I,shouldShowCommentMenu:ne,nodeRef:U,children:(0,z.jsx)(Le,{store:c,selection:X,columnOrder:$,formatStore:N,disabled:p,canEdit:R,children:(0,z.jsx)("table",{style:He,children:(0,z.jsxs)("tbody",{ref:U,style:He,children:[re.map(((e,t)=>(0,z.jsx)(ye,{rowIndex:t,rowStore:e,store:c,disabled:p,columnOrder:$,selection:"cell"!==(null==X?void 0:X.type)?X:void 0,formatStore:N,rowCount:Q,columnCount:Z,isHeaderColumnEnabled:se,isHeaderRowEnabled:le,canEdit:R,format:H},e.id))),Y>0&&void 0===y&&[...Array(Y).keys()].map(((e,t)=>(0,z.jsx)(ye,{rowIndex:Q+t,store:c,rowStore:void 0,disabled:p,columnOrder:$,selection:"cell"!==(null==X?void 0:X.type)?X:void 0,formatStore:N,rowCount:Q,columnCount:Z,isHeaderColumnEnabled:se,isHeaderRowEnabled:le,canEdit:R,format:H},t)))]})})})})})});return(0,z.jsx)("div",{className:f().EUI,style:{cursor:J,...e?{paddingRight:20}:ee},children:e?o:(0,z.jsx)(g().A,{store:c,inheritDir:!0,shouldShowCommentMenu:ne,shouldShowHoverMenu:!m&&(R||oe),style:q,analyticsName:"page_content",ref:ue,isLastItem:T,children:o})})}(ge)}),(0,z.jsx)(o(59822).A,{store:pe,leftOverlayStyle:{left:(ge?0:-te)-fe,top:8,bottom:qe},rightOverlayStyle:{top:8,bottom:qe}})]}),he=(0,z.jsx)("div",{ref:F,children:(0,z.jsxs)(o(155004).s,{allowSelectionWithin:!0,style:K,ref:de,onMouseDown:ce,children:[ge?(0,z.jsx)(g().A,{store:c,shouldShowHoverMenu:!m&&(R||oe),shouldShowCommentMenu:ne,style:q,analyticsName:"page_content",ref:ue,ignoreForTocSelectionIntersection:!0,children:ve}):ve,me,(0,z.jsx)(G,{disabled:p,canEdit:R,simpleTableStore:c,rootSizeObserver:O,offset:ge?0:te,hoverSizeObserver:V})]})});(0,a().K8)((()=>(o(522200).A.getState()??{})[c.id]),[c]);return(0,h().NW)(c,t,(0,n.useMemo)((()=>({renderedType:"table",getNode:()=>F.current,getBlockStore:()=>c})),[c]),he)})),c().A)},850213:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(178624).R)({key:"recentlyUsedHighlightColors",namespace:o(419494).Bq,important:!0,trackingType:"necessary"})},851650:(e,t,o)=>{o.d(t,{lv:()=>v,VD:()=>u,C5:()=>g,u7:()=>m,uh:()=>f});var n=()=>o(100622);const r="theme";var i=()=>o(534177),a=()=>o(20822),s=()=>o(661179),l=()=>o(705540);const c=15;function d(e,t){const{ThemeStore:o}=e,{mode:i,usingSystemTheme:a}=t;if(window.notionTheme)return;const s={mode:i};o.setState(s),e.mobileNative&&e.mobileNative.setTheme(i,a),l().setTheme(function(e,t){const o=(0,n().O4)({theme:e});return{mode:e,usingSystemTheme:t,colors:{white:n().Ay.white,blue:n().Ay.blue},borderRadius:4,textColor:o.regularTextColor,popoverBackgroundColor:o.popoverBackground,popoverBoxShadow:o.shadowMD,inputBoxShadow:o.inputBoxShadow,inputBackgroundColor:o.inputBackground,dividerColor:o.darkDividerColor,shadowOpacity:o.shadowOpacity}}(i,a)),localStorage.setItem(r,JSON.stringify(s)),m(i),"dark"===i?document.body.classList.add("dark"):document.body.classList.remove("dark")}function u(e){return e.device.prefersDarkInterface?"dark":"light"}const p={scrollbarTrack:{light:"rgba(0, 0, 0, 0)",dark:"rgba(0, 0, 0, 0)"},scrollbarThumb:{light:"#D3D1CB",dark:"rgba(255, 255, 255, 0.2)"},scrollbarThumbHover:{light:"#AEACA6",dark:"rgba(255, 255, 255, 0.3)"}};function m(e){if(0===s().A.state)return;const t=document.getElementById("scroll-properties");t&&(t.innerHTML=`\n\t\t* {\n\t\t\tscrollbar-width: ${c}px;\n\t\t\tscrollbar-color: ${p.scrollbarThumb[e]}  ${p.scrollbarTrack[e]};\n\t\t}\n\t`)}function g(e){a().A.setState(e)}function f(e){const t=v(e);switch(t){case"dark":case"light":d(e,{mode:t,usingSystemTheme:!1});break;case"system":!async function(e){const{mobileNative:t}=e;let o="light";o=t&&t.api.getTheme?await t.api.getTheme():u(e),d(e,{mode:o,usingSystemTheme:!0})}(e);break;default:(0,i().HB)(t)}}function v(e){const t=a().A.state||"system";return"dark"===(o=t)||"light"===o||"system"===o?o:"system";var o}},851802:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{}}}const r=new n},852477:(e,t,o)=>{o.d(t,{A:()=>s,c:()=>i});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=o(296540),r=()=>o(484714);const i=new Set;function a(){for(const e of i)e()}function s(){const e=(0,r().Y0)();(0,n.useEffect)((()=>{if(e.isMobile)return document.addEventListener("scroll",a,!0),()=>{document.removeEventListener("scroll",a,!0)}}),[e.isMobile])}},852678:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},854418:(e,t,o)=>{o.d(t,{t:()=>a});var n=o(296540),r=()=>o(484714),i=()=>o(449506);function a(){const e=(0,r().v3)(),[t,o]=(0,n.useState)();return(0,n.useEffect)((()=>{!async function(){const t=await i().callApi({eventName:"getExternalOrgData",environment:e,data:{}});if("failed"===t.type)return;const n=t.data;o(n)}()}),[e]),t}},854502:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{dropTargetRectMap:new Map}}}const r=new n;(0,o(604341).exposeDebugValue)("GlobalDropTargetRectStore",r);const i=r},855801:(e,t,o)=>{o.d(t,{D6:()=>s,VI:()=>r,nd:()=>l,z:()=>a,zQ:()=>i});var n=()=>o(645873);const r={duplicateActions:new(n().O2)("duplicateActions",(async()=>await Promise.resolve().then(o.bind(o,71584)))),selectableBlockActions:new(n().O2)("selectableBlockActions",(async()=>await Promise.resolve().then(o.bind(o,87017))))};async function i(){return(await o.e(5834).then(o.bind(o,375078))).transformBlocks}async function a(){return(await o.e(5834).then(o.bind(o,375078))).maybeTurnCollectionViewIntoCollectionViewPage}async function s(){const e=await r.duplicateActions.load();return{duplicateBlock:e.duplicateBlock,localDuplicate:e.localDuplicate,loadLocalSubtree:e.loadLocalSubtree,shouldUseDuplicateTemplateBlock:e.shouldUseDuplicateTemplateBlock}}async function l(){const e=await o.e(37045).then(o.bind(o,533705));return{createAndDuplicatePageInSpace:e.createAndDuplicatePageInSpace,messages:e.messages}}},855821:(e,t,o)=>{o.d(t,{t:()=>s});o(898992),o(803949);var n=()=>o(675074),r=()=>o(722101),i=()=>o(186445),a=()=>o(299545);function s(e){const{environment:t,files:o,commentStore:s,transaction:l}=e,c=i().y0(t),d=a().eP(s);n().$C({files:o,environment:t,inMemoryRecordCache:s.inMemoryRecordCache,transaction:l,pageWidth:c,ignoreOversizedFiles:!0,spaceId:d.pointer.spaceId}).forEach((e=>{r().BC({parentStore:d,appendStore:e,transaction:l})}))}},857437:(e,t,o)=>{o.d(t,{$:()=>r});var n=o(296540);function r(){const[e,t]=(0,n.useState)({inputElementAttributes:void 0,suppressFocusRing:!1}),[o,r]=(0,n.useState)(!1),[i,a]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(o){function e(){a(!1)}function t(){a(!0)}return window.addEventListener("pointerdown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",t)}}}),[o]);return[(0,n.useMemo)((()=>({inputElementAttributes:e.inputElementAttributes,suppressFocusRing:e.suppressFocusRing&&i,onFocus:()=>{r(!0)},onBlur:()=>{r(!1)}})),[e,i]),(0,n.useMemo)((()=>({setComboboxState:t,isBrowserFocusVisible:i,isComboboxFocused:o})),[i,o])]}},857783:(e,t,o)=>{o.d(t,{_U:()=>h,u3:()=>f,uK:()=>g});o(944114);var n=()=>o(584262),r=()=>o(179034),i=()=>o(939768),a=()=>o(211716),s=()=>o(492414),l=()=>o(41161),c=()=>o(630116),d=()=>o(741496),u=()=>o(317909),p=()=>o(345913),m=()=>o(435009);function g(e){const{environment:t,store:o,redirect:r,scrollToBlockId:c,collectionViewId:d,workflowViewType:u,workflowViewKey:p,chatThreadId:g,openInNew:f,discussionId:v,showMoveTo:h,saveParent:_,visitType:b,templateGalleryItem:y,projectManagementLaunch:S,pageVisitSource:w,openInSidePeek:k,openInCenterPeek:I,queryId:A,callback:x,peekViewBlockId:C,peekMode:T}=e,M=(0,s().J8)({store:o,fullyQualified:!1,scrollToBlockId:c,collectionViewId:d,workflowViewType:u,workflowViewKey:p,discussionId:v,chatThreadId:g,showMoveTo:h,saveParent:_,templateGalleryItem:y,projectManagementLaunch:S,openInSidePeek:k,openInCenterPeek:I,pageVisitSource:w,peekViewBlockId:C,peekMode:T});o.isNavigableBlock()&&l().A.recordVisit({id:o.id,systemBlockType:o.getSystemBlockTypeStore().getValue(),type:void 0!==b?b:a().ig.Default,currentUserId:t.currentUser.id}),m().oo({environment:t,url:w?i().O$(M,{[n().k3]:w,[n().CW]:f?A:void 0}):M,redirect:r,openInNew:f,queryId:A,callback:x})}function f(e){const{environment:t,targetId:o}=e;if(t.device.isMobile)return;const n=v.state;if(void 0===n)return;if(o!==n)return;const i=new(c().Bv)(t,{id:o,table:r().ev});if("page"!==i.getType())return;const a=i.getContentStores(),s=1===a.length?a[0]:void 0,l=s&&s.isEmptyEditableBlock();i.isEmptyTitle()&&(i.isEmptyPage()||l)&&u().createAndCommit({userAction:"blockNavigationActions.maybeGarbageCollectEmptyPage",environment:t,canUndo:!0,perform:e=>{p().oD({environment:t,blocks:[i],transaction:e}),e.postSubmitCallbacks.push((e=>{e||(0,d().N)(t,{analyticsName:"delete",from:"navigation_actions",block_id:i.id,block_type:"page"})}))}})}const v=o(757695).default.createValue(void 0,{name:"NewPageEmptyAutoDeleteStore"});function h(e){v.setState(e.id)}},858141:(e,t,o)=>{o.d(t,{p:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M4 3.375c-.897 0-1.625.728-1.625 1.625v2.5c0 .897.728 1.625 1.625 1.625h3.5c.897 0 1.625-.728 1.625-1.625V5c0-.897-.728-1.625-1.625-1.625zM3.625 5c0-.207.168-.375.375-.375h3.5c.207 0 .375.168.375.375v2.5a.375.375 0 0 1-.375.375H4a.375.375 0 0 1-.375-.375zM4 10.875c-.897 0-1.625.727-1.625 1.625V15c0 .898.728 1.625 1.625 1.625h3.5c.897 0 1.625-.727 1.625-1.625v-2.5c0-.898-.728-1.625-1.625-1.625zM3.625 12.5c0-.207.168-.375.375-.375h3.5c.207 0 .375.168.375.375V15a.375.375 0 0 1-.375.375H4A.375.375 0 0 1 3.625 15zm7.25-7.5c0-.897.727-1.625 1.625-1.625H16c.898 0 1.625.728 1.625 1.625v2.5c0 .897-.727 1.625-1.625 1.625h-3.5A1.625 1.625 0 0 1 10.875 7.5zm1.625-.375a.375.375 0 0 0-.375.375v2.5c0 .207.168.375.375.375H16a.375.375 0 0 0 .375-.375V5A.375.375 0 0 0 16 4.625zm0 6.25c-.898 0-1.625.727-1.625 1.625V15c0 .898.727 1.625 1.625 1.625H16c.898 0 1.625-.727 1.625-1.625v-2.5c0-.898-.727-1.625-1.625-1.625zm-.375 1.625c0-.207.168-.375.375-.375H16c.207 0 .375.168.375.375V15a.375.375 0 0 1-.375.375h-3.5a.375.375 0 0 1-.375-.375z"})},r=(0,o(340498).wt)("squareGrid2X2",n)},859002:(e,t,o)=>{o.r(t),o.d(t,{chatIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M15.625 7.492V5.188A2.125 2.125 0 0 0 13.5 3.063h-10a2.125 2.125 0 0 0-2.125 2.125v6.5c0 1.173.951 2.124 2.125 2.124h.188v2.045a.625.625 0 0 0 1.006.496l3.231-2.486v.325c0 .905.733 1.638 1.638 1.638h3.262l2.558 1.968a.625.625 0 0 0 1.006-.496V15.83h.599c.904 0 1.637-.733 1.637-1.638V9.13c0-.905-.733-1.638-1.637-1.638zm-1.25-2.304v2.304H9.563c-.905 0-1.638.733-1.638 1.638v3.432h-.142a.63.63 0 0 0-.38.13l-2.465 1.896v-1.4a.625.625 0 0 0-.625-.626H3.5a.875.875 0 0 1-.875-.874v-6.5c0-.484.392-.875.875-.875h10c.483 0 .875.391.875.875M9.563 8.742h7.425c.214 0 .387.174.387.388v5.062a.387.387 0 0 1-.387.388h-1.224a.625.625 0 0 0-.625.625v.828l-1.72-1.324a.63.63 0 0 0-.382-.13H9.563a.39.39 0 0 1-.388-.387V9.13c0-.214.174-.388.388-.388"})},r=(0,o(340498).wt)("chat",n)},859384:(e,t,o)=>{o.d(t,{M:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"m17.75 3.476-.647.648-1.22-1.22.655-.655a.863.863 0 0 1 1.213 0 .863.863 0 0 1 0 1.213zm-8.935 8.936 7.497-7.497-1.221-1.221-7.504 7.491a1.2 1.2 0 0 0-.26.433l-.317 1.025c-.058.217.144.42.346.347l1.026-.318a.97.97 0 0 0 .433-.26"}),(0,n.jsx)("path",{d:"M5.75 3.125h8.148l-1.25 1.25H5.75c-.76 0-1.375.616-1.375 1.375v8.5c0 .76.616 1.375 1.375 1.375h8.5c.76 0 1.375-.616 1.375-1.375V7.352l1.25-1.25v8.148a2.625 2.625 0 0 1-2.625 2.625h-8.5a2.625 2.625 0 0 1-2.625-2.625v-8.5A2.625 2.625 0 0 1 5.75 3.125"})]})},i=(0,o(340498).wt)("compose",r)},860921:(e,t,o)=>{o.d(t,{z:()=>i});var n=()=>o(365002),r=()=>o(176983);function i(){const e=(0,r().J)();return(0,n()._)()?e?"unavailable":"requestAccessNoFreeCredits":e?"upsell":"requestAccess"}},861841:(e,t,o)=>{o.d(t,{Ay:()=>a,OX:()=>r,bH:()=>n});let n=function(e){return e[e.Above=0]="Above",e[e.Below=1]="Below",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.Onto=4]="Onto",e}({}),r=function(e){return e[e.Selectable=0]="Selectable",e[e.DropTarget=1]="DropTarget",e}({});class i extends(()=>o(757695))().default{getInitialState(){return{isDragging:!1}}}const a=new i},862292:(e,t,o)=>{o.d(t,{T:()=>r});var n=()=>o(645873);const r={formulas:new(n().O2)("formulas",(async()=>await Promise.all([o.e(62475),o.e(3151),o.e(98629),o.e(28721),o.e(22542)]).then(o.bind(o,80979)))),formulaAnalytics:new(n().O2)("formulas",(async()=>await o.e(76793).then(o.bind(o,867187)))),simpleFormulas:new(n().O2)("simpleFormulas",(async()=>await Promise.all([o.e(62475),o.e(3151),o.e(98629),o.e(28721),o.e(54220)]).then(o.bind(o,791089)))),formulaConstants:new(n().O2)("formulaConstants",(async()=>await Promise.resolve().then(o.bind(o,247331)))),formulaEditor:new(n().O2)("formulaEditor",(async()=>await Promise.all([o.e(62475),o.e(3151),o.e(98629),o.e(28721),o.e(55776)]).then(o.bind(o,66529)))),formulaPermissions:new(n().O2)("formulaPermissions",(async()=>await Promise.all([o.e(62475),o.e(3151),o.e(35537)]).then(o.bind(o,871202)))),collectionFormulaHelpers:new(n().O2)("collectionFormulaHelpers",(async()=>await Promise.resolve().then(o.bind(o,708685))))}},862835:(e,t,o)=>{o.d(t,{h:()=>i});var n=()=>o(351360),r=()=>o(508496);function i(){const{currentSpaceStore:e}=n().default.state;return Boolean(window.isSecureContext&&(null==e?void 0:e.canRead())&&e.isAiEnabledOnSpace()&&"on"===r().default.getEligibleGroup({experimentId:"dictation_experiment_v2",defaultGroup:"control"}))}},863168:(e,t,o)=>{o.d(t,{EF:()=>M,eY:()=>C,s4:()=>T});var n=()=>o(700500),r=()=>o(713998),i=()=>o(651124),a=()=>o(763884),s=()=>o(335098),l=()=>o(919709),c=()=>o(492696),d=()=>o(178687),u=()=>o(615234),p=()=>o(559926),m=()=>o(209660),g=()=>o(812182),f=()=>o(755199),v=()=>o(680074),h=()=>o(972435),_=()=>o(508496),b=()=>o(160475);const y=["collection_view","collection_view_page","page","table"];function S(e){var t;const{environment:o,blockType:n}=e,r=Date.now(),i=(0,v().R$)(o),a=null==i||null===(t=i.getSettings())||void 0===t?void 0:t.adoption_entry_points,s=`import_nudge_on_block_create__${n}`;if(r-w({adoptionEntryPoints:a})<u().nD)return;const l=_().default.getConfigKey("adoption_entry_point_time_delta",`import_nudge_on_block_create__${n}`).view_delta;if(r-w({blockType:n,adoptionEntryPoints:a})<l)return;if(!("nudge_on_block_create"===_().default.getEligibleGroup({experimentId:"adoption_import_entry_point",defaultGroup:"control"})))return;const c="page"===n?k.triggerNudgeOnPasteTitlePage:"table"===n?k.triggerNudgeOnPasteTable:k.triggerNudgeOnPasteTitleCollection;(0,b().t)({environment:o,action:"view",from:`import_nudge_on_block_create__${n}`}),g().HK({message:h().A.formatMessage(k.triggerNudgeOnPasteDescription),presentationType:"persistent",id:"nudge-on-create",title:h().A.formatMessage(c),onUserDismiss:()=>{(0,b().t)({environment:o,action:"dismiss",from:s})},onDismiss:()=>{f().pr(o,{entryPoint:s})},actions:{primary:{title:h().A.formatMessage(k.triggerNudgeOnPastePrimaryAction),onAction:()=>{(0,b().t)({environment:o,action:"click",from:s}),p().kY(o,{from:s}),g().UW("nudge-on-create"),m().Ow({currentTab:"imports",openedFrom:s})}}}})}function w(e){const{blockType:t,adoptionEntryPoints:o}=e;if(!o)return 0;let n=0;if(t){const e=o[`import_nudge_on_block_create__${t}`];if(e){const t=e[e.length-1];t>n&&(n=t)}return n}for(const r of y){const e=o?o[`import_nudge_on_block_create__${r}`]:void 0;if(e){const t=e[e.length-1];t>n&&(n=t)}}return n}const k=(0,o(959013).YK)({triggerNudgeOnPasteTitlePage:{id:"adoption.nudgeOnCreate.title.page",defaultMessage:"Import your content directly"},triggerNudgeOnPasteTitleCollection:{id:"adoption.nudgeOnCreate.title.collection",defaultMessage:"Import your database’s content directly"},triggerNudgeOnPasteTable:{id:"adoption.nudgeOnCreate.title.table",defaultMessage:"Import your table’s content directly"},triggerNudgeOnPasteDescription:{id:"adoption.nudgeOnCreate.description",defaultMessage:"Get all your content into Notion with a click"},triggerNudgeOnPastePrimaryAction:{id:"adoption.nudgeOnCreate.primaryAction",defaultMessage:"Import now"}});var I=()=>o(896628),A=()=>o(246826),x=()=>o(606952);function C(e){const{environment:t,store:i,transaction:c}=e;i.isType(n().xd.code)?function(e){const{store:t,transaction:o}=e,n=t.getProperties(),i=t.getFormat(),c=t.environment.currentUser.id,u=a().A.get({userId:c,key:d().j.localLanguagePreferenceKey}),p=u&&s().y[u]?u:d().j.defaultLanguage,m=a().A.get({userId:c,key:d().j.localCodeWrapPreferenceKey}),g=t.getBlockTitleStore(),f=g.getValue(),v=l().Cc8(f);v&&x().KY({environment:t.environment,store:g,value:v,transaction:o});void 0===n.language&&A().zv({store:t.getPropertiesStore(),data:{language:r().U8(p)},transaction:o});void 0===i.code_wrap&&A().zv({store:t.getFormatStore(),data:{code_wrap:m},transaction:o})}({store:i,transaction:c}):i.isType(n().xd.tableOfContents)?function(e){const{store:t,transaction:o}=e,n=t.getFormat();void 0===n.block_color&&I().zA({stores:[t],update:{block_color:"gray"},transaction:o})}({store:i,transaction:c}):i.isType(n().xd.callout)?T({store:i,transaction:c}):i.isType(n().xd.quote)?function(e){const{store:t,transaction:o}=e,n=t.environment.currentUser.id,r=a().A.get({userId:n,key:d().w.localSizePreferenceKey});void 0!==r&&A().zv({store:t.getFormatStore(),data:{quote_size:r},transaction:o})}({store:i,transaction:c}):i.isType(n().xd.aiBlock)?function(e){const{store:t}=e;M.setState(t.pointer.id)}({store:i}):i.isType(n().xd.transcription)?async function(e){const{environment:t,store:n,transaction:r}=e,i=await Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(2681),o.e(90372),o.e(54518)]).then(o.bind(o,271380));n.isInsideTemplate()||n.isInsideFactoryOrDuplicateBlocksAction()?await i.pauseTranscription({environment:t,blockStore:n,shouldStopDictation:!0,transaction:r}):await i.startTranscription({environment:t,blockStore:n,transaction:r})}({environment:t,store:i,transaction:c}):i.isType(n().xd.collectionView)?function(e){const{environment:t}=e;S({environment:t,blockType:"collection_view"})}({environment:t,store:i,transaction:c}):i.isType(n().xd.collectionViewPage)?function(e){const{environment:t}=e;S({environment:t,blockType:"collection_view_page"})}({environment:t,store:i,transaction:c}):i.isType(n().xd.page)?function(e){const{environment:t}=e;S({environment:t,blockType:"page"})}({environment:t,store:i,transaction:c}):i.isType(n().xd.table)&&function(e){const{environment:t}=e;S({environment:t,blockType:"table"})}({environment:t,store:i,transaction:c})}function T(e){const{store:t,transaction:o}=e,n=t.environment.currentUser.id,r=t.getFormat();if(void 0===r.page_icon){let e=a().A.get({userId:n,key:c().c});""===e?e=void 0:void 0!==e&&"url"!==(0,i().WO)(e).type||(e="💡"),I().zA({stores:[t],update:{page_icon:e},transaction:o})}if(void 0===r.block_color){const e=a().A.get({userId:n,key:c().E})||"gray_background";I().zA({stores:[t],update:{block_color:e},transaction:o})}}const M=o(757695).default.createValue(void 0,{name:"FocusedAiBlockConfigurationMenuId"})},863188:(e,t,o)=>{o.d(t,{Pl:()=>ee,Ul:()=>Z,_D:()=>X});o(944114),o(898992),o(581454),o(908872),o(737550);var n=()=>o(700500),r=()=>o(634201),i=()=>o(72135),a=()=>o(179034),s=()=>o(919709),l=()=>o(220719),c=()=>o(711059),d=()=>o(496603),u=()=>o(534177),p=()=>o(87017),m=()=>o(667925),g=()=>o(197194);function f(e,t){return r().PE(e.substring(0,t)).length}var v=()=>o(231722),h=()=>o(544303),_=()=>o(969197),b=()=>o(494043),y=()=>o(110955),S=()=>o(630116),w=()=>o(502438),k=()=>o(24157),I=()=>o(989423);function A(e,t){I().vd(e,"annotation_filter",t)}var x=()=>o(896628),C=()=>o(778417),T=()=>o(538527),M=()=>o(606952),P=()=>o(261374),B=()=>o(725614),R=()=>o(317909),E=()=>o(62287);function D(e){var t;const{environment:o,store:i,toBlockType:a,matchRegex:c,insertTextAfter:d,transaction:u,postTransformAction:g}=e,f="editing"===k().default.state.mode&&(null===(t=(0,v().H7)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!f)return;const h=y().A.state.open?1:0,A=r().PE(s().q4_(i.getValue())).slice(h,f.endIndex).join(""),x=c.exec(A);if(!x)return;const T=i.getRecordStoreUIParent();if(!(T&&T instanceof S().Bv))return;const R=T.getType();if(!R)return;if(R!==n().xd.text&&!n().bl[R])return;const D=a(x);if(void 0===D||D===R)return;let N,L=D;T instanceof S().Bv&&("toggle"===D&&(0,n().CN)(T.getType())?(L=b().x_(R),N=L):"toggle"===R&&b().O3(D)&&(L=b().x_(D),N=L),E().pd({environment:o,block:T,blockType:L,transaction:u}));const F={startIndex:0,endIndex:x&&r().PE(x[0]).length||0};if(M().jQ({environment:o,store:i,selection:F,transaction:u}),d){const e=p().insertBlockBelow({environment:o,selection:w().default.state.stores,createBlockItem:m().ry[n().xd.text],analyticsFrom:"divider"===D?"divider_block_transform":"text_filter_actions",transaction:u});e&&(P().Ad({environment:o,blockStore:(0,l().o9)((0,_().T)(i)),store:i,targetBlockStore:e,splitAtIndex:0,transaction:u}),C().hc({environment:o,store:e}),B().setSelectionAtStart({store:e.getBlockTitleStore()}))}g&&g(x),function(e,t){I().vd(e,"transform_text_block_filter",t)}(o,{type:D,format_block_type:N,shortcut:A})}function N(e){var t,o;const{environment:n,editorMode:i,store:a,transaction:l,regex:c,length:d,analyticsType:u,replace:p}=e,m="editing"===k().default.state.mode&&(null===(t=(0,v().H7)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!m)return;const g=a.getValue()||[],h=s().q4_(g),_=r().PE(h).slice(0,m.endIndex).join(""),b=c.exec(_);if(!b)return;const y=f(h,b.index),S={startIndex:y,endIndex:y+d},w=a.getValue()||[];if(s().wuy(w,S.startIndex,S.endIndex,"c"))return;const A="function"==typeof p?p({match:b,matchIndex:y,textValue:g}):p;if(void 0===A)return;if(M().jQ({environment:n,store:a,selection:S,transaction:l}),"editing"!==k().default.state.mode)return;const x=null===(o=(0,v().H7)(k().default.state.multiSelection))||void 0===o?void 0:o.selection;x&&(M().$D({environment:n,editorMode:i,store:a,selection:x,string:A,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:l}),function(e,t){I().vd(e,"unicode_filter",t)}(n,{type:u}))}function L(e){var t;const{environment:o,store:n,delimiter:i,annotation:a,transaction:l}=e,c="editing"===k().default.state.mode&&(null===(t=(0,v().H7)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!c)return;const d=n.getValue(),u=F({delimiter:i,storeValue:d,selectionEndIndex:c.endIndex});if(!u)return;if(!U({delimiter:i,storeValue:d,...u}))return;if(s().Uft(d,u.startIndex,u.endIndex,s().Ifu.Code))return;const{textValue:p,startIndex:m,endIndex:g}=u,h=f(p,m),_=p.slice(m,g),b=r().PE(_).length,y={startIndex:h,endIndex:h+i.length};M().jQ({environment:o,store:n,selection:y,transaction:l});const S={startIndex:h+b-i.length-i.length,endIndex:h+b-i.length};M().jQ({environment:o,store:n,selection:S,transaction:l});const w={startIndex:y.startIndex,endIndex:S.startIndex};T().Mw({environment:o,store:n,selection:w,annotation:a,transaction:l});const I=w.endIndex;B().setSelection({store:n,selection:{startIndex:I,endIndex:I}}),B().setExtendAnnotation({annotation:a,extend:!1}),A(o,{type:s()._XS(a)})}function F(e){const{delimiter:t,storeValue:o,selectionEndIndex:n}=e,i=r().PE(s().q4_(o)).slice(0,n).join("");if(0===i.length||!i.endsWith(t))return;const a=i.split(t);if(a.length<=2)return;a.reverse();const[l,...c]=a.slice(1),u=d().cz(c.map((e=>e.length+t.length)))-t.length;return{textValue:i,matchString:l,startIndex:u,endIndex:u+l.length+2*t.length}}function U(e){const{delimiter:t,matchString:o,startIndex:n,endIndex:r,textValue:i}=e;return o.length>0&&!/\s/g.test(o[0])&&!/\s/g.test(o[o.length-1])&&!o.startsWith(t)&&!o.endsWith(t)&&(!i[n-1]||/[\s(]/g.test(i[n-1]))&&(!i[r]||/[\s)]/g.test(i[r]))}function O(e){var t;const{environment:o,delimiter:n,store:i,transaction:a}=e,l="editing"===k().default.state.mode&&(null===(t=(0,v().H7)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!l)return;const c=i.getValue(),d=F({delimiter:n,storeValue:c,selectionEndIndex:l.endIndex});if(!d)return;if(!function(e){const{storeValue:t,startIndex:o,endIndex:n,delimiter:r}=e;if(!U(e))return!1;const i={[s().Ifu.User]:s().Ifu.User,[s().Ifu.Page]:s().Ifu.Page,[s().Ifu.CustomEmoji]:s().Ifu.CustomEmoji,[s().Ifu.Comment]:s().Ifu.Comment,[s().Ifu.Bot]:s().Ifu.Bot,[s().Ifu.ExternalObjectInstance]:s().Ifu.ExternalObjectInstance,[s().Ifu.Date]:s().Ifu.Date,[s().Ifu.TemporaryPage]:s().Ifu.TemporaryPage,[s().Ifu.TemplateVariable]:s().Ifu.TemplateVariable,[s().Ifu.FormulaPageProperty]:s().Ifu.FormulaPageProperty,[s().Ifu.FormulaContextValue]:s().Ifu.FormulaContextValue,[s().Ifu.Group]:s().Ifu.Group,[s().Ifu.Team]:s().Ifu.Team,[s().Ifu.Citation]:s().Ifu.Citation,[s().Ifu.LinkMention]:s().Ifu.LinkMention,[s().Ifu.AssistantInstructionsCollection]:s().Ifu.AssistantInstructionsCollection,[s().Ifu.GeoPoint]:s().Ifu.GeoPoint};for(const a of Object.values(i))if(s().wuy(t,o,n,a))return!1;if(s().wuy(t,o,o+r.length,s().Ifu.Code)&&s().wuy(t,n-r.length,n,s().Ifu.Code))return!1;return!0}({delimiter:n,storeValue:c,...d}))return;const{textValue:u,matchString:p,startIndex:m,endIndex:h}=d,_=f(u,m),b=u.slice(m,h);M().jQ({environment:o,store:i,selection:{startIndex:_,endIndex:_+r().PE(b).length},transaction:a});const y=s().G0H(p);M().yr({environment:o,store:i,tokens:[y],index:_,transaction:a});const S=_+r().PE(s().N8A(y)).length;B().setSelection({store:i,selection:{startIndex:S,endIndex:S}}),A(o,{type:s().Ifu.Equation}),g().vK({environment:o,equation:p,from:{type:"create",source:"text_filter",selection:!0}})}function V(e){var t;const{environment:o,store:n,transaction:i}=e,a="editing"===k().default.state.mode&&(null===(t=(0,v().H7)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!a)return;const l=n.getValue(),c=r().PE(s().q4_(l)).slice(0,a.endIndex).join("");if(s().wuy(l,a.startIndex,a.endIndex,"c"))return;const d=/([^ ]+) $/.exec(c);if(!d)return;const u=d[1],p=s().ctx(u);if(!p)return;const{value:m,href:g}=p,h=f(c,c.indexOf(m)),_=h+r().PE(m).length,b={startIndex:h,endIndex:_};s().wuy(l,h,_,"a")||(T().Mw({environment:o,store:n,annotation:["a",g],selection:b,transaction:i}),B().setSelection({store:n,selection:a}),function(e,t){I().vd(e,"link_filter",t)}(o,{href:g}))}const j=["\\.",",",";","\\?","!","\\)","\\]"," "].join("|"),z=new RegExp(` (${j})$`);function q(e){const t=s().AI5(e.textValue,e.matchIndex-1,e.matchIndex),o=d().HV(t.tokensInsideRange);if(o&&s().qXl(o))return e.match[1]}const H=[{delimiter:"**",type:s().Ifu.Bold},{delimiter:"＊＊",type:s().Ifu.Bold},{delimiter:"*",type:s().Ifu.Italic},{delimiter:"＊",type:s().Ifu.Italic},{delimiter:"__",type:s().Ifu.Bold},{delimiter:"＿＿",type:s().Ifu.Bold},{delimiter:"_",type:s().Ifu.Italic},{delimiter:"＿",type:s().Ifu.Italic},{delimiter:"~",type:s().Ifu.Strike},{delimiter:"〜",type:s().Ifu.Strike},{delimiter:"～",type:s().Ifu.Strike}],W=[{toBlockType:()=>n().xd.toDo,matchRegex:/^(\[\] |\[ \] |\「\」　)$/,insertTextAfter:!1,expectedBlockType:n().xd.toDo,getExampleShortcut:()=>"[] "},{toBlockType:()=>n().xd.subSubHeader,matchRegex:/^(### |＃＃＃)$/,insertTextAfter:!1,expectedBlockType:n().xd.subSubHeader,getExampleShortcut:e=>{let{formatBlockType:t}=e;return t===n().sh.toggleFormatSubSubHeaderBlock?"### > ":"### "}},{toBlockType:()=>n().xd.subHeader,matchRegex:/^(## |＃＃)$/,insertTextAfter:!1,expectedBlockType:n().xd.subHeader,getExampleShortcut:e=>{let{formatBlockType:t}=e;return t===n().sh.toggleFormatSubHeaderBlock?"## > ":"## "}},{toBlockType:()=>n().xd.header,matchRegex:/^(# |＃)$/,insertTextAfter:!1,expectedBlockType:n().xd.header,getExampleShortcut:e=>{let{formatBlockType:t}=e;return t===n().sh.toggleFormatHeaderBlock?"# > ":"# "}},{toBlockType:()=>n().xd.toggle,matchRegex:/^(> |＞)$/,insertTextAfter:!1,expectedBlockType:n().xd.toggle,getExampleShortcut:()=>"> "},{toBlockType:()=>n().xd.quote,matchRegex:/^(\| |\" |\“ |\”)$/,insertTextAfter:!1,expectedBlockType:n().xd.quote,getExampleShortcut:()=>'" '},{toBlockType:()=>n().xd.bulletedList,matchRegex:/^(\* |\- |\+ |\＊|\ー|\＋|\・)$/,insertTextAfter:!1,expectedBlockType:n().xd.bulletedList,getExampleShortcut:e=>{let{locale:t}=e;return"ja-JP"===t?"・":"- "}},{toBlockType:()=>n().xd.divider,matchRegex:/^—-|---$/,insertTextAfter:!0,expectedBlockType:n().xd.divider,getExampleShortcut:()=>"---"}],K={numeric:/^(\d+|[\uff10-\uff19]+)(\. |\。|\．|\) )$/,roman_numeral:/^([a-z]+)(\. |\。|\．|\) )$/,alphabet:/^([a-z]+)(\. |\。|\．|\) )$/},G=[{annotationDelimiter:"`",blockMatchRegex:/^```$/},{annotationDelimiter:"´",blockMatchRegex:/^´´´$/},{annotationDelimiter:"｀",blockMatchRegex:/^｀｀｀$/}],$={...W.reduce(((e,t)=>{const{expectedBlockType:o,matchRegex:n,getExampleShortcut:r}=t;return e[o]={matchRegexes:[n],getExampleShortcut:r},e}),{}),[n().xd.numberedList]:{matchRegexes:Object.values(K),getExampleShortcut:()=>"1. "},[n().xd.code]:{matchRegexes:G.map((e=>{let{blockMatchRegex:t}=e;return t})),getExampleShortcut:e=>{let{formatBlockType:t}=e;return t?"":"```"}}},Y=[{regex:/^'$/,length:1,replace:"‘",analyticsType:"sentence_start_single_quote"},{regex:/ '$/,length:2,replace:" ‘",analyticsType:"start_single_quote"},{regex:/'$/,length:1,replace:"’",analyticsType:"middle_single_quote"}],Q=[{regex:/^"$/,length:1,replace:"“",analyticsType:"sentence_start_double_quote"},{regex:/ "$/,length:2,replace:" “",analyticsType:"start_double_quote"},{regex:/"$/,length:1,replace:"”",analyticsType:"end_double_quote"},{regex:/--$/,length:2,replace:"—",analyticsType:"em_dash"},{regex:/->$/,length:2,replace:"→",analyticsType:"right_arrow"},{regex:/<->$/,length:3,replace:"↔",analyticsType:"right_left_arrow"},{regex:/←>$/,length:2,replace:"↔",analyticsType:"right_left_arrow"},{regex:/=>$/,length:2,replace:"⇒",analyticsType:"right_arrow_double"},{regex:/<-$/,length:2,replace:"←",analyticsType:"left_arrow"},{regex:/>=$/,length:2,replace:"≥",analyticsType:"greater_than_or_equal_to"},{regex:/<=$/,length:2,replace:"≤",analyticsType:"less_than_or_equal_to"},{regex:/!=$/,length:2,replace:"≠",analyticsType:"not_equal"},{regex:/\.\.\.$/,length:3,replace:"…",analyticsType:"ellipsis"}];function Z(e){const{environment:t,editorMode:o,store:r,transaction:l}=e;if("suggest"===o)return;const p=r.getRecordStoreAtRootPath(),m=p instanceof S().Bv?p.getType():void 0;if("code"!==m||k().default.isEditingCaption()){if("callout"!==m){for(const e of W)D({environment:t,editorMode:o,store:r,toBlockType:e.toBlockType,matchRegex:e.matchRegex,insertTextAfter:e.insertTextAfter,transaction:l});D({environment:t,editorMode:o,store:r,matchRegex:K.numeric,insertTextAfter:!1,transaction:l,toBlockType:t=>{var o;const n=t[1],r=(0,i().an)(n);return null===(o=J(e,parseInt(r)))||void 0===o?void 0:o.type},postTransformAction:t=>{var o;const n=t[1],s=(0,i().an)(n),c=null===(o=J(e,parseInt(s)))||void 0===o?void 0:o.number;if(r.table!==a().ev)return;const d=r.getRecordStoreAtRootPath();if(!(d instanceof S().Bv))return;const p=(0,u().O9)(c)&&c>-1?c:void 0;x().zA({stores:[d],update:{list_start_index:p},transaction:l})}}),D({environment:t,editorMode:o,store:r,matchRegex:K.roman_numeral,insertTextAfter:!1,transaction:l,toBlockType:t=>{const o=(0,h().cJ)(t[1]),n=J(e,o);if(1===o||void 0===(null==n?void 0:n.number))return null==n?void 0:n.type},postTransformAction:()=>{p instanceof S().Bv&&x().zA({stores:[p],update:{list_format:"roman"},transaction:l})}}),D({environment:t,editorMode:o,store:r,matchRegex:K.alphabet,insertTextAfter:!1,transaction:l,toBlockType:t=>{const o=(0,h().sK)(t[1]),n=J(e,o);if(1===o||void 0===(null==n?void 0:n.number))return null==n?void 0:n.type},postTransformAction:()=>{p instanceof S().Bv&&x().zA({stores:[p],update:{list_format:"letters"},transaction:l})}});for(const{blockMatchRegex:e}of G)D({environment:t,editorMode:o,store:r,toBlockType:()=>n().xd.code,matchRegex:e,insertTextAfter:!1,transaction:l})}if(!function(e){var t;const o="editing"===k().default.state.mode&&(null===(t=(0,v().H7)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!o)return!1;const n=e.getValue()||[],r=s().AI5(n,0,o.endIndex),i=d().Kl(r.tokensInsideRange,(e=>s().uPN(e).some((e=>s().rlz(e))))),a=r.tokensInsideRange.slice(-1===i?0:i,r.tokensInsideRange.length),l=s().q4_(a);return Boolean(l.match(/(^| )`[^ ]/))}(r)){for(const n of Q)N({environment:t,editorMode:o,store:r,transaction:l,regex:n.regex,length:n.length,replace:n.replace,analyticsType:n.analyticsType});const e=t.device.browserVersion.split(".").map((e=>parseInt(e,10)));if(!t.device.isSafari||(0,c().isGreaterThanOrEqualToVersion)(e,[16,4]))for(const n of Y)N({environment:t,editorMode:o,store:r,transaction:l,regex:n.regex,length:n.length,replace:n.replace,analyticsType:n.analyticsType});!function(e){N({environment:e.environment,editorMode:e.editorMode,store:e.store,transaction:e.transaction,regex:z,length:2,replace:q,analyticsType:"mention_punctuation"})}({environment:t,editorMode:o,store:r,transaction:l})}for(const{annotationDelimiter:e}of G)L({environment:t,editorMode:o,delimiter:e,annotation:[s().Ifu.Code],store:r,transaction:l});for(const{delimiter:e,type:n}of H)L({environment:t,editorMode:o,delimiter:e,annotation:[n],store:r,transaction:l});O({environment:t,editorMode:o,delimiter:"$$",store:r,transaction:l}),O({environment:t,editorMode:o,delimiter:"＄＄",store:r,transaction:l}),V({environment:t,store:r,transaction:l})}}function X(e){const{store:t,editorMode:o,transaction:n,environment:r}=e;n.postEnqueueActions.push((()=>{R().createAndCommit({userAction:"textFilterActions.runAllFiltersAfterTransaction",environment:r,canUndo:!0,undoCheckpoint:!0,perform:e=>{Z({environment:r,editorMode:o,store:t,transaction:e})}})}))}function J(e,t){const{store:o}=e;if(o.table!==a().ev)return;const r=o.getRecordStoreAtRootPath();if(!(r instanceof S().Bv))return;const i=r.getType();if(i===n().xd.header||i===n().xd.subHeader||i===n().xd.subSubHeader)return;const s=r.getParentBlockStore();if(!s)return;const l=s.getContentStores(),c=l.findIndex((e=>e.id===r.id));if(-1===c)return;const d=l.slice(0,c);let p=-1,m=1;for(let a=0;a<d.length;a++){const e=d[a];if(e.getType()!==n().xd.numberedList)m=1,p=a;else{var g;const t=null===(g=e.getFormat())||void 0===g?void 0:g.list_start_index;(0,u().O9)(t)?m=t+1:m++}}return m===t?{type:n().xd.numberedList,number:void 0}:c===p+1?{type:n().xd.numberedList,number:t}:void 0}function ee(e){var t;const{hasTransformShortcut:o,blockType:n,formatBlockType:r,locale:i}=e;return o&&n?(null===(t=$[n])||void 0===t?void 0:t.getExampleShortcut({locale:i,formatBlockType:r}))??"":""}},863567:(e,t,o)=>{o.d(t,{D:()=>n});class n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.lastTickTimeMs=void 0,this.tickIntervalMs=void 0,this.lastTickTimeMs=Date.now(),this.tickIntervalMs=e}async maybeYield(){const e=Date.now();e-this.lastTickTimeMs>this.tickIntervalMs&&(await(0,o(763824).bT)(),this.lastTickTimeMs=e)}}},864145:(e,t,o)=>{o.d(t,{B:()=>l,l:()=>s});o(898992),o(823215);var n=()=>o(861841),r=()=>o(732770),i=()=>o(871399),a=()=>o(502438);let s=function(e){return e[e.Default=0]="Default",e[e.Hovered=1]="Hovered",e[e.Selected=2]="Selected",e[e.SelectedDescendant=3]="SelectedDescendant",e}({});function l(e,t){var o;const l=a().default.state.stores,c=i().default.state;if(1===l.length&&l.includes(e))return s.Selected;if(l.length>0&&l.every((t=>e.uiContains(t))))return s.SelectedDescendant;const d=n().Ay.state;return d&&d.isDragging&&d.currentParentStore&&e.uiContains(d.currentParentStore)||d&&d.isDragging&&d.currentDropZone&&d.currentDropZone.type===n().OX.Selectable&&null!==(o=d.currentDropZone)&&void 0!==o&&o.store&&e.uiContains(d.currentDropZone.store)||c.isOpen&&c.currentStore===e||t&&!r().A.state.isKeyboardMode?s.Hovered:s.Default}},865241:(e,t,o)=>{o.d(t,{A:()=>s,P:()=>a});var n=()=>o(757695);class r extends n().default{getInitialState(){return{isVisible:!0}}}class i extends n().default{getInitialState(){return!1}}const a=new i,s=new r},865688:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{ready:!1,initialRequestCompleted:!1,loading:!1,endOfResultsReached:!1,error:void 0}}}const r=n},866042:(e,t,o)=>{o.d(t,{$d:()=>m,D1:()=>g,L:()=>d,PV:()=>u,fG:()=>p,p1:()=>l,wc:()=>c});var n=()=>o(449506),r=()=>o(92513),i=()=>o(397740),a=()=>o(479199),s=()=>o(619400);async function l(e){const t=await n().callApi({eventName:"getTrelloAccount",environment:e,data:{}});return"success"===t.type?t.data:(console.error(t.error),{})}async function c(){return Promise.resolve({areAccountsFetched:i().A.state.areAccountsFetched,accountsResponse:i().A.state.accountsResponse,isGoogleDocImporterEnabled:(0,s().V)(),selectedFileId:i().A.state.selectedFileId})}async function d(e){r().A.setState({...r().A.state,isFetchingAsanaAccount:!0});const t=await n().callApi({eventName:"getAsanaAccount",environment:e,data:{}});if("success"===t.type){const{account:e}=t.data;return r().A.setState({...r().A.state,account:e,isFetchingAsanaAccount:!1}),e?t.data:{}}return console.error(t.error),r().A.setState({...r().A.state,isFetchingAsanaAccount:!1}),{}}async function u(e){try{const t=await n().callApi({eventName:"getEvernoteAccount",environment:e,data:{}});if("success"===t.type){const{userInfo:e}=t.data;return{userInfo:e}}return console.error(t.error),{userInfo:void 0}}catch(t){return console.error(t),{userInfo:void 0}}}async function p(e,t){const o=await n().callApi({eventName:"getConfluenceAccount",environment:e,data:{spaceId:t}});return"success"===o.type?o.data:(console.error(o.error),{})}async function m(e,t){a().A.setState({...a().A.state,isFetchingMondayAccount:!0});const o=await n().callApi({eventName:"getMondayUser",environment:e,data:{spaceId:t}});var r,i;return"success"===o.type?null!==(r=o.data.user)&&void 0!==r&&r.email?(a().A.setState({...a().A.state,isFetchingMondayAccount:!1,account:null===(i=o.data.user)||void 0===i?void 0:i.email}),o.data):{user:void 0}:(a().A.setState({...a().A.state,isFetchingMondayAccount:!1}),console.error(o.error),{user:void 0})}async function g(e,t){const o=await n().callApi({eventName:"getJiraAccount",environment:e,data:{spaceId:t}});return"success"===o.type?o.data:(console.error(o.error),{})}},866184:(e,t,o)=>{o.r(t),o.d(t,{TransactionQueueDependenciesImpl:()=>d,splitSaveTransactionsRequest:()=>g});o(944114),o(581454);var n=()=>o(857639),r=()=>o(426302),i=()=>o(96689),a=()=>o(870723),s=()=>o(716108);o(898992),o(354520);function l(e){const{environment:t,multiCellBatches:n}=e,r=n.length,i=n.filter((e=>"main"===e.type)).length,a=n.filter((e=>"currentSpace"===e.type)).length,s=(0,o(496603).sb)(n.filter((e=>"space"===e.type)).map((e=>e.spaceId))).length,l=0===s?"zero":s>1?"multi":"match",c=i>0?"main":"zero";o(989423).u4({environment:t,event:{eventName:"saveTransactions.multi_cell.num_batches",eventProperties:{num_batches:r,main_cardinality:c,space_cardinality:l,is_missing_space_id:a>0}}})}var c=()=>o(508496);class d{constructor(e){this.timeSource=o(882362).u,this.environment=e}getExperimentGroup(e){return c().default.getGroup(e)}async handleSaveTransactions(e){const t=c().default.checkGate({gateName:"multi_cell_savetransactions"}),n=(0,o(165162).Pr)("multi_cell_savetransactions_metrics"),r=(null==n?void 0:n.get("batch_sample_percent",0))??0,i=(0,o(745875).rQ)(r);if(t||i){const o=g(e);if(i&&l({environment:this.environment,multiCellBatches:o}),t){const e=[];for(const[t,n]of o.entries()){const r=n.transactions,i=await(0,s().Jn)({environment:this.environment,cellType:n.type,spaceId:"space"===n.type?n.spaceId:void 0,tasks:r});if(i.error){const n=o.slice(t+1);let r=i.error.retryReason,a=i.error.retryDelay;return n.length>0&&!r&&(r="UntriedTransactionError",a=2e3),{error:new(s().rS)({message:i.error.message,clientData:i.error.clientData,retryDelay:a,retryReason:r,savedTasks:[...e,...i.error.savedTasks],failedTasks:[...i.error.failedTasks]})}}e.push(...i.value)}return{value:e}}}return(0,s().Jn)({environment:this.environment,tasks:e,cellType:"legacy"})}handleHealthcheck(e){o(679156).nq(this.environment,e)}async rollbackTask(e){try{await(0,o(818619).X)(this.environment,e)}catch(t){n().log({level:"error",from:"TransactionQueueDependencies",type:"ClientTransactionCleanupError",error:(0,o(229833).n6)(t),data:{userId:this.environment.currentUser.id}})}}}const u="curSpaceId",p="mainCellId",m="multiCellRoutedToMainCellId";function g(e){const t=[];let o=u,r=[];for(const i of e){let e;i.spaceId&&(e=i.spaceId);for(const t of i.operations){if(!(0,a().$t)(t.pointer.table)||v(t)){e=p;break}if(t.pointer.spaceId){if(void 0!==e&&e!==t.pointer.spaceId){e=m;break}e=t.pointer.spaceId}}e!==p&&e!==i.spaceId&&n().log({level:"warning",from:"TransactionQueueDependencies",type:"MultiSpaceTransactionWarning",data:{message:`Top level space id does not match final space id. Transaction pointers: ${JSON.stringify(i.operations.map((e=>e.pointer)))}`,miscDataToConvertToString:{spaceIdForTransaction:e,transactionSpaceId:i.spaceId,debug:i.debug}}}),e||(e=u),o!==e?(r.length>0&&t.push(f({transactions:r,spaceIdForBatch:o})),r=[i],o=e):(o=e,r.push(i))}return r.length>0&&t.push(f({transactions:r,spaceIdForBatch:o})),0===t.length&&t.push({transactions:e,type:"currentSpace"}),t}function f(e){const{transactions:t,spaceIdForBatch:o}=e;return o===p||o===m?{transactions:t,type:"main"}:o===u?{transactions:t,type:"currentSpace"}:{transactions:t,spaceId:o,type:"space"}}function v(e){return e.pointer.table===r().Yx&&"update"===e.command&&e.args.target_table===i().NX&&1===e.args.version}},866302:(e,t,o)=>{o.d(t,{d:()=>r});var n=()=>o(292588);const r={table:o(869558).Gy,recordColumnTypes:{id:n().A.UUID,version:n().A.Number,last_version:n().A.Number,type:n().A.String,name:n().A.String,page_sort:n().A.UUIDArray,parent_id:n().A.UUID,parent_table:n().A.String,alive:n().A.Boolean,format:n().A.JSON,query2:n().A.JSON,space_id:n().A.UUID},metaColumnTypes:{meta_user_id:n().A.UUID,meta_role:n().A.String}}},867201:(e,t,o)=>{o.d(t,{Y:()=>u});var n=()=>o(763884),r=()=>o(496603),i=()=>o(720665),a=()=>o(211716),s=()=>o(108944),l=()=>o(351360),c=()=>o(857783);const d=10;function u(e){const{store:t,openInNew:o,environment:u,pageVisitSource:m,openInSidePeek:g,openInCenterPeek:f,peekMode:v}=e,{currentSpaceStore:h}=l().default.state;if(!t.isDefined())return;const _=t.isNavigableBlock(),{page:b,block:y}=_?{page:t,block:void 0}:{page:s().Nq(t),block:t};b&&(!y&&h&&function(e){let{currentUserId:t,spaceId:o,blockId:a}=e;const s=function(e){let{currentUserId:t,spaceId:o}=e;const r=n().A.get({userId:t,key:p(o)});if(r){const e=(0,i().$l)(r);return Array.isArray(e)?e:[]}return[]}({currentUserId:t,spaceId:o}),l=r().sb([a,...s]).slice(0,d);n().A.set({userId:t,key:p(o),value:JSON.stringify(l)})}({currentUserId:u.currentUser.id,spaceId:h.id,blockId:b.id}),c().uK({environment:u,store:b,scrollToBlockId:y&&y.id,openInNew:o,visitType:a().ig.Search,pageVisitSource:m,queryId:e.queryId,openInSidePeek:g,openInCenterPeek:f,peekMode:v}))}function p(e){return`recentQuickJumps:${e}`}},867899:(e,t,o)=>{o.d(t,{F:()=>r});var n=()=>o(645873);const r={contextualizedOnboardingHelpers:new(n().O2)("contextualizedOnboardingHelpers",(async()=>o.e(62342).then(o.bind(o,59424)))),contextualizedOnboardingFlowHelpers:new(n().O2)("contextualizedOnboardingFlowHelpers",(async()=>o.e(11126).then(o.bind(o,322920)))),contextualizedOnboardingStageHelpers:new(n().O2)("contextualizedOnboardingStageHelpers",(async()=>Promise.all([o.e(23806),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(58550),o.e(22900),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(67435),o.e(75355),o.e(70769),o.e(38911),o.e(25426),o.e(89244),o.e(62342),o.e(57869),o.e(98942)]).then(o.bind(o,812978)))),contextualizedOnboardingActions:new(n().O2)("contextualizedOnboardingActions",(async()=>Promise.all([o.e(96346),o.e(36192),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(67435),o.e(70769),o.e(62342),o.e(57869),o.e(34420)]).then(o.bind(o,26388)))),contextualizedOnboardingStateActions:new(n().O2)("contextualizedOnboardingStateActions",(async()=>Promise.all([o.e(23806),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(58550),o.e(22900),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(67435),o.e(75355),o.e(70769),o.e(38911),o.e(25426),o.e(89244),o.e(62342),o.e(57869),o.e(98942)]).then(o.bind(o,480599)))),contextualizedOnboardingFlowDefinitions:new(n().O2)("contextualizedOnboardingFlowDefinitions",(async()=>o.e(11126).then(o.bind(o,71666)))),contextualizedOnboardingStageDefinitions:new(n().O2)("contextualizedOnboardingStageDefinitions",(async()=>Promise.all([o.e(23806),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(58550),o.e(22900),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(67435),o.e(75355),o.e(70769),o.e(38911),o.e(25426),o.e(89244),o.e(62342),o.e(57869),o.e(98942)]).then(o.bind(o,308063))))}},868840:(e,t,o)=>{o.d(t,{A:()=>r,O:()=>n});const n="center_peek",r="side_peek"},869562:(e,t,o)=>{o.r(t),o.d(t,{AssistantChatHistoryWidthThreshold:()=>ce,OnlyOneSidebarVisibleWidthThreshold:()=>se,SidePeekCloseLeftSidebarFrameWidthThreshold:()=>le,bookmarkPage:()=>ye,cancelSidebarInitialRenderLog:()=>Fe,close:()=>ue,closeAssistantChatHistoryIfTooNarrow:()=>Oe,closeSidebarFromTopbarUnexpandButton:()=>je,handleSidebarButtonClick:()=>me,handleSidebarSectionDrop:()=>Ve,initialize:()=>Re,leaveBlocks:()=>be,newPageMessages:()=>xe,open:()=>de,openAssistantChatHistoryIfWideEnough:()=>Ue,pinSharedPage:()=>we,quickAddPage:()=>Ae,setExpand:()=>pe,setPeekWidth:()=>_e,setUpdateExpand:()=>ge,setUpdateSidebarCommentsMode:()=>De,setUpdateSidebarCommentsTypeMode:()=>Ne,setUpdateSidebarTab:()=>Ee,setUpdateWidth:()=>he,setWidth:()=>ve,toggleBothSidebars:()=>Le,toggleLeftSidebarByWindowSize:()=>fe,unbookmarkPage:()=>Se,unpinSharedPage:()=>ke});o(898992),o(354520),o(581454);var n=()=>o(908006),r=()=>o(584262),i=()=>o(179034),a=()=>o(161479),s=()=>o(994310),l=()=>o(970330),c=()=>o(899963),d=()=>o(449506),u=()=>o(112873),p=()=>o(557281),m=()=>o(722101),g=()=>o(750660),f=()=>o(872539),v=()=>o(661920),h=()=>o(246826),_=()=>o(857783),b=()=>o(435009),y=()=>o(185544),S=()=>o(317909),w=()=>o(838256),k=()=>o(755199),I=()=>o(47373),A=()=>o(776894),x=()=>o(810703),C=()=>o(836251),T=()=>o(953418),M=()=>o(437622),P=()=>o(455994),B=()=>o(656219),R=()=>o(406792),E=()=>o(585533),D=()=>o(770906),N=()=>o(900652),L=()=>o(941463),F=()=>o(441199),U=()=>o(155959),O=()=>o(351360),V=()=>o(407054),j=()=>o(569777),z=()=>o(508496),q=()=>o(210737),H=()=>o(732797),W=()=>o(188669),K=()=>o(852678),G=()=>o(331435),$=()=>o(712505),Y=()=>o(975533),Q=()=>o(630116),Z=()=>o(93658),X=()=>o(270710),J=()=>o(466872),ee=()=>o(611371),te=()=>o(846955),oe=()=>o(644914),ne=()=>o(749687),re=()=>o(320460),ie=()=>o(496067),ae=()=>o(737230);const se=1024,le=430,ce=600;function de(e){let{fromElectron:t}=e;ne().sidebarOpenStore.state||Z().default.state.isActive||j().A.isOpen()||F().default.isOpen()||(ne().sidebarOpenStore.setState(!0),t&&ne().sidebarElectronMousePeekStore.setState(!0))}function ue(){!ne().sidebarOpenStore.state||H().A.state.open||J().A.state.open||ie().A.state.open||re().A.state.open||V().A.state.isActive||X().A.state.clonedBlockStore||ne().sidebarResizingStore.state.isResizing||K().A.state.open||!(0,G().e)()||q().A.state.namedOpenPopups.has("team_more_actions")||q().A.state.namedOpenPopups.has("outliner_add_page")||(ne().sidebarMousePeekXStore.setState(0),ne().sidebarOpenStore.setState(!1),ne().sidebarElectronMousePeekStore.setState(!1))}function pe(e){if((0,U().T)("supportsNativeHome"))return;(0,te().tourIsActiveInSidebarStep)(te().default.state)&&!e.isExpanded&&te().default.setState({type:"inactive"});const t=R().default.DO_NOT_USE_markLegacy("sidebar.toggle_expanded_lag");ne().sidebarExpandedStore.setState(e.isExpanded),Pe(),$().default.setSidebarExpandedStoreState(e.isExpanded);const o=z().default.checkGate({gateName:"tablet_refresh_gate"});!e.isExpanded&&o&&e.environment.device.isMobile&&ne().sidebarOpenStore.setState(!1),e.isExpanded&&e.environment.WindowSizeStore.state.width<se&&(0,oe().Nk)(e.environment)&&ge({environment:e.environment,isExpanded:!1,from:"close_for_space",saveDetailsSidebarPreference:e.saveDetailsSidebarPreference}),e.isExpanded&&(0,oe().Uh)(e.environment)<le&&v().VN({environment:e.environment,from:"sidebar_expand"}),e.isExpanded?c().q(e.environment):c().fE(e.environment),R().default.DO_NOT_USE_measureAfterNextFlushLegacy(t,{environment:e.environment,getData:()=>({is_expanded:e.isExpanded,from:e.from})})}function me(e,t,o,n){const i=$().default.state.open,{currentTab:a}=ae().Ay.state,s=a!==o||a===o&&!(0,oe().Nk)(e),l=o===ae().tF.Comments&&(a!==o||!(0,oe().Nk)(e));Ee(o),l&&ae().Ay.update((e=>({...e,timeOpenedComments:Date.now()}))),i?(_().uK({environment:e,store:t,pageVisitSource:r().y8.Expand}),ge({environment:e,isExpanded:!0,from:n,saveDetailsSidebarPreference:!0})):ge({environment:e,isExpanded:s,from:n,saveDetailsSidebarPreference:!0})}function ge(e){var t;const{isExpanded:o,environment:n,from:r}=e;o||u().xl();let a=ae().Ay.state.currentTab;if(o){n.WindowSizeStore.state.width<se&&(0,oe().KB)(n)&&pe({environment:n,isExpanded:!1,from:`set_update_expand_${e.from}`,saveDetailsSidebarPreference:!1}),F().default.isOpen()&&D().VI({environment:n});const t={origin:$().default.state.open?"peek_view":"page",from:r};a===ae().tF.Comments?c()._R(n,t):a===ae().tF.Updates&&c().oU(n,t)}const s=$().default.state.open&&$().default.state.targetStore.id||(null===(t=O().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id),l=function(e){const t=O().default.state.mainEditorCurrentBlockStore;if(t&&e){const o=Q().Bv.createChildStore(t,{id:e,table:i().ev});if(!o)return;const n=o.getAssociatedCollectionStore();if(!n)return;return n.getLayoutStore()}}(s);l||a!==ae().tF.Info||(a=ae().tF.Comments),o?a===ae().tF.Info&&P().A.setOpen("mainPage"):P().A.setClosed("mainPage"),ae().Ay.setState({...ae().Ay.state,expanded:o,mouseEntered:!!o||ae().Ay.state.mouseEntered,openedOnBlockId:s,canRender:!0,currentTab:a}),Be()}function fe(e){$().default.state.savedSidebarExpandedStoreState&&!ne().sidebarExpandedStore.state&&function(e){if(ne().sidebarExpandedStore.state||!$().default.state.savedSidebarExpandedStoreState)return;$().default.isSidePeekOpen()&&(0,oe().Uh)(e)-(0,oe().r6)(e)>=le&&ne().sidebarExpandedStore.setState(!0)}(e),ne().sidebarExpandedStore.state&&function(e){const t=ne().sidebarExpandedStore.state&&0===(0,oe().kf)(e),o=t?e.WindowSizeStore.state.width-ne().sidebarWidthStore.state-(0,oe().zo)(e,!1):(0,oe().Uh)(e);$().default.isSidePeekOpen()&&$().default.state.savedSidebarExpandedStoreState&&ne().sidebarExpandedStore.state&&o<le&&(ne().sidebarExpandedStore.setState(!1),$().default.setSidebarExpandedStoreState(!0))}(e)}function ve(e){ne().sidebarWidthStore.setState(e.width),(0,oe().Uh)(e.environment)<le&&v().VN({environment:e.environment,from:"sidebar_expand"}),Pe()}function he(e){ae().Ay.setState({...ae().Ay.state,width:e.width}),Be()}function _e(e){if($().default.state.open&&$().default.isSidePeekOpen()){const t=e.environment.WindowSizeStore.state.width;$().default.setSidePeekWidth(e.width,t),e.preventPersistWidth||function(){const{preferredSidePeekWidth:e}=$().default.state,t={width:e};s().A.set(Me,t)}(),fe(e.environment)}}async function be(e){const{blocks:t,transaction:o,environment:n}=e,{currentSpaceViewStore:r}=O().default.state;if(r)for(const i of t)m().TF({parentStore:r.getSharedPagesStore(),childToRemoveStore:i,transaction:o});b().VP({environment:n,blocks:t}),await Promise.all(t.map((e=>d().callApi({eventName:"leaveBlock",environment:n,data:{block:{id:e.id,spaceId:(0,a().e)(e.pointer.spaceId)}}}))))}function ye(e){const{store:t,spaceViewStore:o,transaction:n}=e,r=o.getBookmarkedPagesStore(),i=Q().Bv.createChildStore(r,t.pointer);m().Hs({parentStore:r,prependStore:i,transaction:n})}function Se(e){const{store:t,spaceViewStore:o,transaction:n}=e,r=o.getBookmarkedPagesStore(),i=Q().Bv.createChildStore(r,t.pointer);m().TF({parentStore:r,childToRemoveStore:i,transaction:n})}function we(e){const{store:t,spaceViewStore:o,transaction:n}=e;Ie(e);const r=o.getSharedPagesStore(),i=Q().Bv.createChildStore(r,t.pointer);m().Hs({parentStore:r,prependStore:i,transaction:n})}function ke(e){const{store:t,spaceViewStore:o,transaction:n}=e;Ie(e);const r=o.getSharedPagesStore(),i=Q().Bv.createChildStore(r,t.pointer);m().TF({parentStore:r,childToRemoveStore:i,transaction:n})}function Ie(e){const{environment:t,spaceViewStore:o,userSettingsStore:n,transaction:r}=e,i=o.getSpaceId();if(!i||n.hasUserPinnedToOutliner({spaceId:i,type:"shared"}))return;const{visiblePagesStores:a}=(0,M().rc)({environment:t,spaceViewStore:o,userSettingsStore:n,type:"shared"}),s=a.map((e=>{let{id:t}=e;return t}));h().zv({store:o,data:{shared_pages:s},transaction:r}),k().Hg({userSettingsStore:n,spaceId:i,type:"shared",transaction:r})}async function Ae(e){const{from:t,environment:o,redirect:i,event:a,pageVisitSource:s,navigateOnCreate:c=!0}=e,{currentSpaceStore:d,currentSpaceViewStore:u}=O().default.state,m=new(w().aD)(o,"quickAddPage");if(!((0,ee().EF)(o)&&d&&d.canEdit()&&u))return(0,ee().EF)(o)||(0,ee().QY)(o),void m.fail("invalid_state");W().Ay.setState({...W().Ay.state,lastPageId:O().default.state.mainEditorCurrentBlockStore?O().default.state.mainEditorCurrentBlockStore.id:void 0});const v=await async function(e){const{newPageTracker:t,quickAddParentOverride:o,environment:n,prependPrivatePage:r}=e,{currentSpaceStore:i,currentSpaceViewStore:a}=O().default.state;if(!i)return void t.fail("invalid_state");const s=o||await(0,x().pw)({spaceStore:i,currentUserId:n.currentUser.id}),l=A().sZ(s);if("space-private-pages"===s.type||l.canAdmin()){const e=await S().createAndCommitAsync({environment:n,userAction:"sidebarActions.quickAddPage.directMoveToAdd",waitForServerCommit:!1,perform:async e=>{if("space-private-pages"===s.type&&r&&a){return{createdPage:y().IT({environment:n,spaceStore:i,spaceViewStore:a,isPrivate:!0,prepend:!0,transaction:e,tracker:t})}}const o=h().Wv({environment:n,type:"page",inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:e,spaceId:i.id,tracker:t}),l=await g().HY({environment:n,targets:[o],value:s,transaction:e});if(l&&"collection"===l.table){const t=l.getDefaultTemplatePageStore();t&&p().n5({title:"template",environment:n,store:o,templateStore:t,isKeyboard:!1,isCreateIn:!1,transaction:e,from:"sidebar_actions"})}return{createdPage:o}}});return e.performResult.createdPage}if(!l.canAdmin()&&l.canEdit()){const{performResult:{createdPage:e}}=await S().createAndCommitAsync({environment:n,userAction:"sidebarActions.quickAddPage.moveToAdd",waitForServerCommit:!1,perform:async e=>{const o=h().Wv({environment:n,type:"page",inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:e,spaceId:i.id});return t.track(o.pointer,e),await g().HY({environment:n,targets:[o],value:{type:"space-private-pages",spaceId:i.id},transaction:e}),{createdPage:o}}});return await S().createAndCommitAsync({environment:n,userAction:"sidebarActions.quickAddPage.moveToMove",waitForServerCommit:!1,perform:async t=>{const o=await g().LC({environment:n,targets:[e],value:s,transaction:t});if(o&&"collection"===o.table){const r=o.getDefaultTemplatePageStore();r&&p().n5({title:"template",environment:n,store:e,templateStore:r,isKeyboard:!1,isCreateIn:!1,transaction:t,from:"sidebar_actions"})}}}),e}t.fail("invalid_state")}({...e,newPageTracker:m,event:a});return v?(o.device.isMobile?(_().uK({environment:o,store:v,showMoveTo:!0,saveParent:!0,redirect:i,pageVisitSource:s||r().y8.SidebarQuickAdd}),ue()):c&&(_()._U(v),_().uK({environment:o,store:v,showMoveTo:!0,saveParent:!0,redirect:i,pageVisitSource:s||r().y8.SidebarQuickAdd}),ue()),f().Wx({environment:o,spaceViewStore:u,type:"private",newIsHidden:!1,outlinerToggleButtonStore:Y().A,shouldPersistToggleState:!0}),l().v(o,{from:t,type:"page",new_page_id:v.id,creating_block_id:v.id}),n().default.afterNextFlush((()=>{const e=E().A.findDropTargetFromKey("Outliner-private"),t=null==e?void 0:e.getNode();t&&t instanceof HTMLElement&&T().Rt({element:t,environment:o,options:{behavior:"smooth",block:"nearest"}})})),v):void 0}const xe=(0,o(959013).YK)({label:{id:"sidebar.newPage.button",defaultMessage:"New page"},tooltip:{id:"sidebar.newPage.tooltip",defaultMessage:"Create a new page"}}),Ce="sidebar",Te="updateSidebar",Me="sidePeek";function Pe(){const e={expanded:ne().sidebarExpandedStore.state,width:ne().sidebarWidthStore.state};s().A.set(Ce,e)}function Be(){const{expanded:e,width:t,openedOnBlockId:o,currentTab:n,updatesSubTab:r,commentsSubTab:i}=ae().Ay.state,a={expanded:e,width:t,openedOnBlockId:o,currentTab:n,updatesSubTab:r,commentsSubTab:i};s().A.set(Te,a)}function Re(e){const t=s().A.get(Ce),o=(0,B().u)(),n=function(){const e=s().A.get(Te);if(e&&"currentSubTab"in e){const t={...e,updatesSubTab:e.currentSubTab};return delete t.currentSubTab,t}return e}(),r=s().A.get(Me),i=L().Ay.state;if(o&&B().A.setState(o),(0,U().T)("supportsNativeHome")?(ne().sidebarExpandedStore.setState(!1),ne().sidebarWidthStore.setState(0)):t?(void 0!==t.expanded&&ne().sidebarExpandedStore.setState(t.expanded),void 0!==t.width&&t.width>=ne().SIDEBAR_MIN_WIDTH&&ne().sidebarWidthStore.setState(t.width)):(0,C().ok)()||ne().sidebarExpandedStore.setState(!1),n){const e=n.width&&n.width>=ae().Iz?n.width:ae().Iz;ae().Ay.setState({...ae().Ay.state,...n,width:e,...n.currentTab===ae().tF.Info?{expanded:!1}:void 0}),window.innerWidth<se&&ne().sidebarExpandedStore.setState(!1)}if(r&&$().default.setSidePeekWidth(r.width,window.innerWidth),(0,I().hg)(e)){const{openState:t,mode:o,contentType:n}=i;"open"===t&&"panel"===o&&(0,D().J$)({environment:e,contentType:n,skipAnimation:!0,autoLoaded:!0})}}function Ee(e){const{currentTab:t}=ae().Ay.state;ae().Ay.setState({...ae().Ay.state,currentTab:e}),e!==ae().tF.Info&&P().A.setClosed("mainPage"),t===ae().tF.Comments&&e!==t&&u().xl()}function De(e){ae().Ay.setState({...ae().Ay.state,commentsMode:e})}function Ne(e){ae().Ay.setState({...ae().Ay.state,commentsTypeMode:e})}function Le(e){(0,oe().Nk)(e)||ne().sidebarExpandedStore.state?(pe({environment:e,isExpanded:!1,from:"toggle_both_sidebars",saveDetailsSidebarPreference:!0}),ge({environment:e,isExpanded:!1,from:"keyboard_default",saveDetailsSidebarPreference:!0})):(ge({environment:e,isExpanded:!0,from:"keyboard_default",saveDetailsSidebarPreference:!0}),pe({environment:e,isExpanded:!0,from:"toggle_both_sidebars",saveDetailsSidebarPreference:!0}))}function Fe(){ne().sidebarShouldLogInitialRenderStore.setState(!1)}function Ue(e){const{environment:t,isResizing:o}=e;if((0,N().du)()||Boolean(o)&&!F().default.state.autoClosed)return;(0,oe().R8)(t)-(0,N().n5)()>=ce&&((0,D().J$)({environment:t,contentType:"assistant",skipAnimation:!0}),F().default.isPanelPinnedState()||(0,D().oe)())}function Oe(e){if(!(0,N().du)())return;(0,oe().R8)(e)<ce&&((0,oe().KB)(e)?ne().sidebarExpandedStore.setState(!1):D().VI({environment:e,autoClose:!0}))}function Ve(e){let{environment:t,newSidebarOrder:o,previousSidebarOrder:n,dropArgs:r,spaceViewStore:i,sidebarState:a}=e;const s=a.showWorkspaceSection?o:o.filter((e=>"workspace"!==e));S().createAndCommit({userAction:"SidebarOutliner.reorderSection",environment:t,canUndo:!0,perform:e=>{h().zv({store:i,data:{sidebar_order:s},transaction:e}),c().ub(t,{section:r.key,previous_order:n,new_order:s,from:"drag"})}})}function je(e){pe({environment:e,isExpanded:!1,from:"sidebar_unexpand_button",saveDetailsSidebarPreference:!0}),F().default.isVisible()&&ue()}},870571:(e,t,o)=>{o.d(t,{A:()=>d});var n=o(296540),r=()=>o(56366),i=()=>o(891078),a=()=>o(42425),s=o(474848);const l=(0,o(959013).YK)({listPlaceholder:{defaultMessage:"List",id:"bulletedListBlock.placeholder.label"}});function c(e,t){const c=(0,n.useRef)(null),d=(0,r().K8)((()=>{var t;const o=null===(t=e.bulletedListFormatStore)||void 0===t?void 0:t.getState();return function(e,t){switch(e){case"disc":return'"•"';case"circle":return'"◦"';case"square":return'"▪"';default:return t%3==0?'"•"':t%3==1?'"◦"':'"▪"'}}(null==o?void 0:o.blockIdFormats.get(e.store.id),(null==o?void 0:o.depth)||0)}),[e.bulletedListFormatStore,e.store.id]),u=(0,r().K8)((()=>e.store.getBlockTitleStore()),[e.store]),p=(0,r().K8)((()=>e.store.getContentStore()),[e.store]),m=(0,i().pW)(e.store,!0),g=(0,r().K8)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),f=(0,o(401497).IS)((t=>({root:{...{paddingLeft:o(799954).nE.paddingLeft},...m,...e.style},titlePlaceHolder:{...g?{color:t.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{}},title:{...a().FC}})),[m,g,e.style]),v=(0,s.jsxs)(a().Ay,{style:f.root,left:(0,s.jsx)("div",{...(0,o(451306).AH)({fontSize:"1.5em",lineHeight:1,marginBottom:0,pseudoBefore:{fontFamily:"Arial",content:d}})}),childrenStyle:{display:"flex",flexDirection:"column"},ref:c,children:[(0,s.jsxs)("div",{style:{display:"flex"},children:[(0,s.jsx)(o(246722).A,{style:f.title,disabled:e.disabled,store:u,placeholder:o(972435).A.formatMessage(l.listPlaceholder),placeholderStyle:f.titlePlaceHolder,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:o(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,s.jsx)(o(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}),!e.hideContent&&(0,s.jsx)(o(99945).A,{disabled:e.disabled,store:p,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag,bulletedListFormatStore:e.bulletedListFormatStore})]});return(0,i().NW)(e.store,t,(0,n.useMemo)((()=>({renderedType:"bulleted_list",getNode:()=>c.current,getBlockStore:()=>e.store})),[e.store]),v)}const d=n.memo(n.forwardRef(c),o(821062).A)},870618:(e,t,o)=>{o.d(t,{TH:()=>g,h7:()=>p,wB:()=>m,ww:()=>u});o(16280),o(944114),o(581454);var n=()=>o(792071),r=()=>o(388821),i=()=>o(56125),a=()=>o(179034),s=()=>o(545285),l=()=>o(496603),c=()=>o(406792),d=()=>o(508496);async function u(e){const{environment:t,recordPointers:o,recurFn:a,recordIsRequired:l}=e,c=r().RecordMapWithRole.create();return await i().d3({recordPointers:o,recordMap:c,recurFn:(e,t)=>a(e,t),loadRecordModel:async e=>{const o=t.defaultRecordCache.inMemoryRecordCache.getModelAndRole({pointer:e,userId:t.currentUser.id});if(o)return o;const r=t.defaultRecordCache.persistedRecordCache;if(r&&(0,s().u)(e)){const o=await r.get({pointer:e,userId:t.currentUser.id});if(o)return{model:n().Bj6.fromValue(e.table,o.value),role:o.role}}if(l(e))throw new Error(`Failed to load a required record: ${e.table}, ${e.id}, ${e.spaceId}.`)}}),c}async function p(e){const{environment:t,abortSignal:o,skipAccessWrites:r}=e,i=e.environment.currentUser.id;if(e.inMemoryRecordCache)return e.inMemoryRecordCache.getModelAndRole({pointer:e.pointer,userId:i});const a=t.defaultRecordCache.inMemoryRecordCache.getModelAndRole({pointer:e.pointer,userId:i});if(void 0!==a)return a;if(e.useInMemoryCacheOnly)return;const{persistedRecordCache:l}=e.environment.defaultRecordCache;if(l&&(0,s().u)(e.pointer)){const t=await l.get({pointer:e.pointer,userId:i,skipAccessWrites:r});if(null!=o&&o.aborted)throw new Error("Abort signal received");if(t)return{model:n().Bj6.fromValue(e.pointer.table,t.value),role:t.role}}}async function m(e){const{parent:t,inMemoryRecordCache:o,environment:r}=e,i=[],s=e.environment.currentUser.id,l=e.environment.defaultRecordCache.persistedRecordCache;if(l&&o===r.defaultRecordCache.inMemoryRecordCache){return(await l.getBlocksWithParent({parent:t,userId:s})).map((e=>({model:n().Bj6.fromValue(a().ev,e.value),role:e.role})))}return o.forEachRecord(s,(e=>{let{model:o,role:n}=e;o.table===a().ev&&o.parent_table===t.table&&o.parent_id===t.id&&i.push({model:o,role:n})})),i}async function g(e){const{environment:t,inMemoryRecordCache:o}=e,r=n().Bj6.fromCollection(e.collection);if(!r)return[];const i=r.pointer;if(!r.isPageTreeCollection()){const e=c().default.DO_NOT_USE_markLegacy("collections.get_local_pages_in_collection"),n=m({environment:t,parent:i,inMemoryRecordCache:o});return c().default.DO_NOT_USE_measureLegacy(e,{environment:t}),n}const s=r.getRootPagePointer(),p=d().default.checkGate({gateName:"wiki_perf_improvement_local_enabled"}),g=c().default.DO_NOT_USE_markLegacy("collections.get_local_pages_in_collection_wiki"),f=p?await async function(e){const{rootPagePointer:t,environment:o}=e,n=[],r=(e,o)=>e.table!==a().ev?[]:(e.pointer.id===t.id||"page"!==e.type&&"collection_view_page"!==e.type||n.push({model:e,role:o}),e.getContentIds().map((t=>({table:a().ev,id:t,spaceId:e.spaceId}))));return await u({environment:o,recordPointers:[t],recurFn:r,recordIsRequired:()=>!1}),n}({environment:t,rootPagePointer:s}):await async function(e){const{rootPagePointer:t,environment:o,inMemoryRecordCache:n}=e;let r=[t];const i=[];for(;r.length>0;){const e=r.map((e=>m({environment:o,parent:e,inMemoryRecordCache:n}))),t=(await Promise.all(e)).flat();for(const o of t){var a;const e=null==o||null===(a=o.model)||void 0===a?void 0:a.type;"page"!==e&&"collection_view_page"!==e||i.push(o)}r=l().oE(t.map((e=>{var t;return null===(t=e.model)||void 0===t?void 0:t.pointer})))}return i}({environment:t,rootPagePointer:s,inMemoryRecordCache:o});return c().default.DO_NOT_USE_measureLegacy(g,{environment:t,data:{status:p?"v2":"v1"}}),f}},871399:(e,t,o)=>{o.r(t),o.d(t,{HOVER_REGIONS:()=>i,default:()=>h,getExactSelectableRect:()=>f,getExpandedSelectableRect:()=>g,getHoverRegionOfRect:()=>m});o(898992),o(908872);var n=()=>o(534177),r=()=>o(397248);const i=["top-left-corner","bottom-left-corner","above-content","below-content"],a=.7,s=150,l=150,c=12,d=4,u=16,p=8;function m(e,t,o,r,i){const l=e.left+(r??0);switch(t){case"top-left-corner":return new DOMRect(Math.max(0,l-s),e.top-Math.max(c,i??0),l-Math.max(0,l-s),Math.max(u,i??0));case"bottom-left-corner":return new DOMRect(Math.max(0,l-s),e.bottom-d,l-Math.max(0,l-s),u);case"above-content":return new DOMRect(l,e.top-Math.max(p,i??0),(o??e.width)*a,Math.max(p,i??0));case"below-content":return new DOMRect(l,e.bottom,(o??e.width)*a,p);default:(0,n().HB)(t)}}function g(e,t,o,n,a){return[...i.map((t=>m(e,t,o,n,a))),f(e,t)].reduce(((e,t)=>r().l6(e,t)),e)}function f(e,t){return r().$E(e,{top:0,bottom:0,left:s,right:t?l:0})}class v extends(()=>o(757695))().default{getInitialState(){return{isOpen:!1}}isRightMarginCommentHovered(){const e=this.state,t=e.isOpen&&e.selectableBoundingRect;if(t){var o;if(null!==(o=e.currentStore)&&void 0!==o&&o.isImmediateColumnChild())return!1;const n=t.width*a+t.x;return e.mouseX>n}return!1}}const h=new v},872539:(e,t,o)=>{o.d(t,{A5:()=>Q,Hu:()=>Z,Nr:()=>oe,RM:()=>J,SE:()=>Y,Wx:()=>te,o8:()=>ee,y6:()=>ne});o(16280),o(944114),o(898992),o(823215),o(354520),o(581454),o(737550),o(296540);var n=()=>o(584262),r=()=>o(700500),i=()=>o(763884),a=()=>o(68263),s=()=>o(854150),l=()=>o(116225),c=()=>o(959013),d=()=>o(496603),u=()=>o(211716),p=()=>o(857783),m=()=>o(521358),g=()=>o(855801),f=()=>o(47373),v=()=>o(776894),h=()=>o(396301),_=()=>o(437622),b=()=>o(182106),y=()=>o(362749),S=()=>o(869562),w=()=>o(644914),k=()=>o(351360),I=()=>o(861841),A=()=>o(188669),x=()=>o(630116),C=()=>o(611371),T=()=>o(134217),M=()=>o(749240),P=()=>o(929450),B=()=>o(846955),R=()=>o(970330),E=()=>o(899963),D=()=>o(557281),N=()=>o(901389),L=()=>o(722101),F=()=>o(547392),U=()=>o(524539),O=()=>o(44729),V=()=>o(246826),j=()=>o(281948),z=()=>o(426116),q=()=>o(185544),H=()=>o(955930),W=()=>o(317909),K=()=>o(838256),G=o(474848);const $={secondary_sidebar:{outliner_location:"pane",from:"sidebar_private_pane"},main_sidebar:{outliner_location:"sidebar",from:"sidebar_private_section"},workflow_templates_onboarding_modal:{outliner_location:"workflow_templates_onboarding_modal",from:"private_workflow_templates_onboarding_modal"}};async function Y(e){const{environment:t,spaceStore:o,spaceViewStore:r,type:i,prepend:a,outlinerToggleButtonStore:s,outlinerItemFrom:l,shouldPersistToggleState:d,title:m}=e,g=new(K().aD)(t,"createPageInSection");if((0,C().EF)(t)){if("workspace"===i&&o.pointer.spaceId){const e=M().subscriptionDataStoreInstance.state,n=e?await(0,T().$)(t,o.pointer.spaceId,e):1;if(n>=10){const{accept:e}=await N().Gh({message:(0,G.jsx)("span",{children:(0,G.jsx)(c().sA,{defaultMessage:"Create a new top-level page?",id:"sidebarActions.confirmDialog.newWorkspacePage.message",values:{strongtext:e=>(0,G.jsx)("strong",{children:e}),memberCount:n}})}),description:(0,G.jsx)(c().sA,{defaultMessage:"This page will be visible in the sidebar to all {memberCount} members of your workspace.",id:"sidebarActions.confirmDialog.newWorkspacePage.description",values:{memberCount:n}}),acceptLabel:(0,G.jsx)(c().sA,{defaultMessage:"Create top-level page",id:"sidebarActions.confirmDialog.newWorkspacePage.confirmButton.label"})});if(!e)return null}}const{serverCommitResult:e,performResult:{createdPage:f}}=W().createAndCommit({userAction:"outlinerActions.createPageInSection",environment:t,canUndo:!0,perform:e=>{const n=q().IT({environment:t,spaceStore:o,spaceViewStore:r,isPrivate:"private"===i,prepend:a,transaction:e,title:m,tracker:g});return s&&te({environment:t,spaceViewStore:r,type:i,outlinerToggleButtonStore:s,newIsHidden:!1,shouldPersistToggleState:Boolean(d)}),t.device.isMobile&&S().close(),{createdPage:n}}});if("private"===i){const{outliner_location:e,from:o}=$[l||"main_sidebar"];R().v(t,{from:o,outliner_location:e,type:"page",new_page_id:f.id,creating_block_id:f.id})}else"workspace"===i&&R().v(t,{from:"sidebar_workspace_section",type:"page",new_page_id:f.id,creating_block_id:f.id});const v=o.getDisableSpacePageEdits();return"workspace"===i&&v&&await e,p().uK({environment:t,store:f,visitType:u().ig.Link,pageVisitSource:n().y8.Create}),f}}async function Q(e){const{environment:t,spaceStore:o,spaceViewStore:r,teamStore:i,andNavigate:a,from:s,outlinerToggleButtonStore:l,shouldPersistToggleState:c,title:d,loading:m,appendOrPrepend:g,event:f}=e;if(!(0,C().EF)(t))return;const v=await(0,y().Pl)(),{serverCommitResult:h,performResult:{createdPage:_}}=W().createAndCommit({userAction:"outlinerActions.createPageInTeam",environment:t,canUndo:!0,perform:e=>({createdPage:v({environment:t,spaceStore:o,spaceViewStore:r,teamStore:i,from:s,title:d,event:f,loading:m,appendOrPrepend:g,transaction:e})})});return await h,a&&p().uK({environment:t,store:_,visitType:u().ig.Link,pageVisitSource:n().y8.Create}),l&&P().Of({environment:t,spaceViewStore:r,teamStore:i,outlinerToggleButtonStore:l,newIsHidden:!1,shouldPersistToggleState:Boolean(c),isExplicitUserAction:!1}),_}async function Z(e){var t,o;const{environment:n,droppedStores:i,droppedDirection:s,type:l,targetStore:d,targetParentStore:u,isDroppingOnFullSection:p}=e,h=await(0,v().OY)({environment:e.environment,blocks:i,from:"dragAndDrop",dropArgs:{direction:s,destination:d??X({targetStore:d,targetParentStore:u}),destinationOutlinerType:l,isDroppingOnFullSection:p}});if(!h.confirmed)return;const{shouldClearPagePermissions:y,shouldUpdateToManualSort:S}=h;if(1===i.length&&(null===(t=u.getValue())||void 0===t||null===(o=t.includes)||void 0===o||!o.call(t,i[0].id))){let e=[];for(const o of i)if(e=await m().rW({environment:n,block:o,action:"move"}),"user_canceled"===e)return;const t=i[0].id;for(const o of e)o.id!==t&&i.push(o)}const w=Object.fromEntries(i.map((e=>[e.id,e.getParentPointer()]))),{performResult:{moved:A}}=await W().createAndCommitAsync({environment:n,userAction:"outlinerActions.confirmAndHandleDrop",waitForServerCommit:!0,perform:async t=>{const o=await async function(e){const{environment:t,type:o,droppedDirection:n,targetStore:i,targetParentStore:s,droppedStores:l,transaction:d,isTopLevelItem:u,shouldClearPagePermissions:p,shouldUpdateToManualSort:m}=e,v=function(e){for(const t of e){const e=b().A.findOutlinerItemFromStore(t);if(e)return e.type}}(l),{currentSpaceStore:h,currentUserStore:y}=k().default.state,S=null==h?void 0:h.id,w=M().subscriptionDataStoreInstance.state,A="bookmarks"===v&&"bookmarks"===o,x=re(e),C=S&&l.some((e=>e.isTopLevelWorkspacePage(S))),P=i&&S&&i.isTopLevelWorkspacePage(S),B=null==h?void 0:h.getDisableSpacePageEdits();if(S&&B&&(C||P)&&!A&&n!==I().bH.Onto&&null!=y&&y.isDefined()&&w){const e=(0,T().Ye)(w).filter((e=>e.userId===y.id))[0];if(e&&!a().Km(e.role))return N().f1((0,G.jsx)(c().sA,{defaultMessage:"This workspace has locked top-level workspace page operations.",id:"sidebarActions.confirmDialog.lockedWorkspaceTopLevel.message"})),!1}const R=X({targetStore:i,targetParentStore:s});if(!A&&!x){if("user_cancelled_move"===await H().nD({transaction:d,moveStores:l,moveTargetStore:R}))return!1}U().kl({environment:t,transaction:d,moveToStore:R,targetBlocks:l,from:"drag_and_drop"}),!m||"private"!==o&&"shared"!==o||function(e){let{environment:t,transaction:o,type:n}=e;const{currentSpaceViewStore:r,currentUserSettingsStore:i}=k().default.state;if(!r||!i)return{moved:!1};const{allPagesStores:a}=(0,_().rc)({environment:t,spaceViewStore:r,userSettingsStore:i,type:n}),s="private"===n?r.getPrivatePagesStore():r.getSharedPagesStore();V().KY({transaction:o,store:s,value:a.map((e=>e.id))});const l=r.getSettingsStore().getKeyStore("sidebar_section_menu").getKeyStore("sortOption").getKeyStore(n);l&&V().KY({transaction:o,store:l,value:"manual"})}({environment:t,transaction:d,type:o});const E=function(e){const{environment:t,type:o,targetStore:n,targetParentStore:i,droppedDirection:a,droppedStores:s,duplicate:l,transaction:c}=e,{currentSpaceViewStore:d,currentSpaceStore:u,currentUserSettingsStore:p}=k().default.state;let m;const g=null==n?void 0:n.getModel();if(a===I().bH.Onto&&n&&i&&null!=g&&g.isType(r().wK))m=F().MS({environment:t,targetParentStore:i,targetStore:n,droppedDirection:I().bH.Below,droppedStores:s,duplicate:l,transaction:c});else if(re(e)&&n){if(!d||!p)throw new Error("currentSpaceViewStore or currentUserSettingsStore not found");const e=(0,f().rY)(t),{visiblePagesStores:o,allPagesStores:r}=(0,_().au)({environment:t,spaceViewStore:d,userSettingsStore:p,type:"shared"}).state,i=e?r.map((e=>e.id)):o.map((e=>e.id)),l=s.map((e=>e.id)),u=i.filter((e=>l.indexOf(e)<0)),g=u.findIndex((e=>e===n.id));let v=[];v=a===I().bH.Above?[...u.slice(0,g),...l,...u.slice(g)]:[...u.slice(0,g+1),...l,...u.slice(g+1)],e?V().zv({store:d,data:{shared_pages_manual_sort:v},transaction:c}):V().zv({store:d,data:{shared_pages:v},transaction:c}),m=s}else"private"===o&&u&&d&&q().X$({environment:t,spaceStore:u,spaceViewStore:d,transaction:c}),m=F().MS({environment:t,targetParentStore:i,targetStore:n,droppedDirection:a,droppedStores:s,duplicate:l,transaction:c});return m}(e),D=E.filter((e=>e.isTopLevel()));p&&z().iz({blocks:E,transaction:d});if("workspace"===o)z().Od({environment:t,blocks:D,transaction:d});else if("private"===o){const e=null==i?void 0:i.getSpaceStore();e&&l.every((o=>o.isTopLevelPrivatePage({environment:t,spaceStore:e})))&&"private"===v||z().Mr({environment:t,blocks:D,transaction:d})}const L=u&&n!==I().bH.Onto;if(L){(await(0,g().z)())({environment:t,blocks:l,transaction:d})}return!0}({...e,transaction:t,shouldClearPagePermissions:y,shouldUpdateToManualSort:S});return{moved:o}}});A&&U().Ce({environment:n,movedItems:i,previousParentPointers:w,moveToLocation:(0,v().g7)({targetStore:d,droppedDirection:s,outlinerSectionType:l,environment:n})})}function X(e){let{targetStore:t,targetParentStore:o}=e;if(t)return t;const{id:n,table:r}=o;let i;switch(r){case"space":case"space_view":i={type:"space",id:n};break;case"block":i={type:"page",id:n};break;case"team":i={type:"team",id:n};break;default:throw new Error("Unexpected table type")}return(0,v().sZ)(i)}async function J(e){const{droppedStores:t,duplicate:o}=e.dropArgs,{environment:n,type:r,parentStore:i,isDroppingOnFullSection:a}=e,s=I().bH.Below;return!!i&&(await Z({environment:n,type:r,targetParentStore:i,isTopLevelItem:!0,droppedDirection:s,droppedStores:t,duplicate:o,isDroppingOnFullSection:a}),!0)}function ee(e){const{environment:t,store:o,parentStore:n,insertStores:r,transaction:i,before:a,type:s}=e,{currentSpaceViewStore:l,currentSpaceStore:c}=k().default.state,u=d().o8(r).reverse();"private"===s&&c&&l&&q().X$({environment:t,spaceStore:c,spaceViewStore:l,transaction:i});const p=a?r.map((e=>L().nc({parentStore:n,insertStore:e,beforeStore:o,transaction:i}).childStore)):u.map((e=>L().WH({parentStore:n,insertStore:e,afterStore:o,transaction:i}).childStore)),m=p.filter((e=>e.isTopLevel()));return"workspace"===s?z().Od({environment:t,blocks:m,transaction:i}):"private"===s&&z().Mr({environment:t,blocks:m,transaction:i}),p}function te(e){const{environment:t,spaceViewStore:o,type:n,outlinerToggleButtonStore:r,newIsHidden:a,shouldPersistToggleState:s}=e;r.setState({...r.state,isHidden:a}),E().V3(t,{is_toggled:!a,outliner_type:n}),s&&i().A.set({userId:o.environment.currentUser.id,key:(0,w().LW)(o,n),value:a}),(0,B().tourIsActiveInSidebarStep)(B().default.state)&&a&&B().default.setState({type:"inactive"})}function oe(e){const{type:t,targetStore:o,targetParentStore:n,transaction:r,isTopLevelItem:i}=e,a="team"===t&&n.table===s().yK&&i;if(L().TF({childToRemoveStore:o,parentStore:n,transaction:r}),a&&o.getParentId()===n.id){const t=x().h4.createChildStore(e.targetParentStore,{...e.targetParentStore.pointer,table:s().yK});H().Ex({teamStore:t,store:o,transaction:r})}}function ne(e){let{environment:t,blockStore:o,event:i,shouldNavigateToSource:a,analytics:s,toggleOptions:c}=e;(0,C().EF)(t)?(t.device.isMobile&&S().close(),W().createAndCommit({userAction:"OutlinerItem.createdPage",environment:t,canUndo:!0,perform:e=>function(e){var t;const{environment:o,store:i,transaction:a,navigateToParent:s,from:l}=e,c=V().Wv({environment:o,type:r().xd.page,inMemoryRecordCache:i.inMemoryRecordCache,transaction:a,spaceId:i.isCollectionView()?null===(t=i.getCollectionStore())||void 0===t?void 0:t.pointer.spaceId:i.pointer.spaceId}),d=i.getAssociatedCollectionStore();if(i.isCollectionView()){const e=i.getCollectionStore()||d;if(!e)throw new Error("getCollectionViewCollectionStore() returned undefined");if(!O().X$({parentStore:e,childStore:c,transaction:a}))throw new Error("parentChildActions.moveToCollection() returned false");const t=e.getDefaultTemplatePageStore();t&&D().n5({title:"template",environment:o,store:c,templateStore:t,isKeyboard:!1,isCreateIn:!1,transaction:a,from:"outliner_actions"})}i.isCollectionView()||O().NI({parentStore:i.getContentStore(),childStore:c,transaction:a}),A().Ay.setState({...A().Ay.state,lastPageId:k().default.state.mainEditorCurrentBlockStore?k().default.state.mainEditorCurrentBlockStore.id:void 0}),o.device.isMobile?p().uK({environment:o,store:c,showMoveTo:!1,saveParent:!1,visitType:u().ig.Link,pageVisitSource:n().y8.Create}):j().VU({environment:o,store:c,showMoveTo:!0,saveParent:!1,currentBlockStore:s?i:void 0,peekMode:void 0,resultsStore:void 0,collectionContextStore:void 0,pageVisitSource:n().y8.Create}),R().v(o,{from:"sidebar_outliner_item",outliner_location:"secondary_sidebar"===l?"pane":"sidebar",type:"page",new_page_id:c.id,creating_block_id:c.id,parent_collection_id:c.getParentCollectionIdUpToTwoLevels()})}({environment:t,event:i,store:o,transaction:e,navigateToParent:a,from:s.from})}),l().u4({name:"page_created",args:{type:s.type,from:s.from}}),c&&!o.isCollectionView()&&(c.onToggle(!0),(0,h().s4)({store:o,toOpen:!0,environment:t,isTopLevelItem:c.isTopLevelItem}))):(0,C().QY)(t)}function re(e){let{type:t,droppedDirection:o,isTopLevelItem:n}=e;return"shared"===t&&o!==I().bH.Onto&&n}},873050:(e,t,o)=>{o.d(t,{$4:()=>P,AU:()=>E,Ay:()=>N,I6:()=>x,IW:()=>w,LQ:()=>y,MI:()=>T,Ml:()=>I,N1:()=>k,Oe:()=>b,Pi:()=>M,SO:()=>S,YF:()=>D,Ze:()=>R,fe:()=>B,gv:()=>C,vu:()=>L,y_:()=>A});o(944114),o(898992),o(823215),o(354520),o(672577),o(581454),o(737550);var n=()=>o(289915),r=()=>o(970013),i=()=>o(713998),a=()=>o(329199),s=()=>o(455348),l=()=>o(837788),c=()=>o(448801),d=()=>o(416504),u=()=>o(496603),p=()=>o(534177),m=()=>o(313892),g=()=>o(186445),f=()=>o(205098),v=()=>o(909470),h=()=>o(405417),_=()=>o(972435);const b="notion://database/hide_subitems_filter";function y(e){const{schema:t,filters:o,getRecordModel:r}=e,i=[];for(const n of Object.keys(t)){const e=S({property:n,schema:t,getRecordModel:r});e&&i.push(e)}const a=i.filter((e=>!o.find((t=>(0,n().yX)(t.filter)&&t.filter.property===e.property))));return u().Ul(a,(e=>{const o=t[e.property];return(null==o?void 0:o.name)||""}))}function S(e){const{property:t,schema:o,getRecordModel:n}=e,r=o[t];if(r&&!(0,i().ah)(r))return;return{property:t,filter:(0,f().SN)({property:t,schema:o,getRecordModel:n})}}function w(){return(e,t)=>{const o=!(0,n().t_)(e.filter),r=!(0,n().t_)(t.filter);return o&&r?0:o?-1:1}}function k(e){var t;const{collectionContextStore:o,applySubitemFilter:i,filterOutHideSubitemsQuickFilter:a}=e;let s=o.currentPropertyFiltersStore.state;const l=o.currentCombinatorFilterStore.state,c=i&&o.currentSubitemFormatStoreForUiDisplayStore.state,d=o.normalizedSchemaStore.state,p=c&&d[c.property],m=p&&"relation"===p.type&&(0,r().zO)(p)===(null===(t=o.collectionStore())||void 0===t?void 0:t.id)&&p.property,g=m?{property:m,filter:{operator:"is_empty"}}:void 0;a&&(s=s.filter((e=>e.id!==b)));const f=(0,n().rg)({propertyFilters:s,combinatorFilter:l,schema:d});return u().oE([g,...f])}function I(e,t){var o,r,i;const s=e.collectionViewStore();if(!s)return{combinatorFilter:void 0,filters:{moveOps:[],removed:[],updated:[],moved:[],added:[]},sorts:void 0};const d="persisted"===t?s.getQueryStore().getKeyStore("sort").getValue()||[]:(null===(o=e.normalizedQueryStore.state)||void 0===o?void 0:o.sort)||[],p=e.currentSortsStore.state,m="persisted"===t?s.getQueryStore().getKeyStore("filter").getValue():null===(r=e.normalizedQueryStore.state)||void 0===r?void 0:r.filter,g=e.currentCombinatorFilterStore.state,f="persisted"===t?(null===(i=s.getPropertyFiltersStore().getValue())||void 0===i?void 0:i.sort(w()))||[]:function(e){const t=e.normalizedSchemaStore.state,o=e.normalizedFormatStore.state.property_filters||[];return u().oE(o.filter((o=>{const r=(0,a().hs)(o.filter,t),i=e.collectionViewBlockStore();if(t[o.filter.property]&&r&&(0,n().tn)(t,o.filter.property,r.filter,null==i?void 0:i.getRecordModel))return r&&{id:o.id,filter:r}})).sort(w()))}(e),v=e.currentPropertyFiltersStore.state,h=f.map((e=>e.id)),_=v.map((e=>e.id)),{beforeOps:b,removeOps:y}=(0,c().i)(h,_),S=Array.from(y).filter((e=>!_.includes(e))),k=Object.keys(b).map((e=>({id:e,beforeId:b[e]}))),I=k.filter((e=>{let{id:t}=e;return h.includes(t)})).map((e=>{let{id:t}=e;return t})),A=k.filter((e=>{let{id:t}=e;return!h.includes(t)})).map((e=>{let{id:t}=e;return t})),x=v.filter((e=>f.find((t=>{if(e.id!==t.id)return!1;const o=u().mg(t),n=u().mg(e);return!u().n4((0,l().A)(n,"ignore-class-instances"),(0,l().A)(o,"ignore-class-instances"))})))).map((e=>e.id));return{combinatorFilter:u().n4(m,g)?void 0:{value:g},filters:{moveOps:k,removed:S,updated:x,moved:I,added:A},sorts:u().n4(d,p)?void 0:{value:p}}}function A(e){const t=e.localStateDiffStore.state;return Boolean(t.filters.moved.length>0||t.filters.added.length>0||t.filters.removed.length>0||t.filters.updated.length>0||void 0!==t.combinatorFilter||void 0!==t.sorts)}function x(e){const t=e.localStateDiffStore.state;return Boolean(t.filters.moved.length>0||t.filters.added.length>0||t.filters.removed.length>0||t.filters.updated.length>0||void 0!==t.combinatorFilter)}function C(e){const t=e.localStateDiffStore.state;return Boolean(void 0!==t.sorts)}function T(e){return{property:(0,r().ol)(e),filter:{operator:"string_contains",value:{type:"exact",value:void 0}}}}function M(e){const t=e.currentCombinatorFilterStore.state,o=e.currentPropertyFiltersStore.state.filter((e=>!L(e.id))).map((e=>e.filter)),n=[...(null==t?void 0:t.filters)||[],...o];return{...t,filters:n,operator:"and"}}function P(e,t){const o=e.currentCombinatorFilterStore.state,n=e.currentPropertyFiltersStore.state.filter((e=>e.id!==t.id)),r=[...(null==o?void 0:o.filters)||[],t.filter];return{combinatorFilter:{operator:"and",...o,filters:r},propertyFilters:n}}function B(e,t,o,n){let r=o.filter((e=>"is_group"===e.type)).map((t=>e.find((e=>e.name===t.value)))).filter(p().O9),i=o.filter((e=>"is_option"===e.type)).map((e=>t.find((t=>t.value===e.value)))).filter(p().O9);for(const a of e){const e=a.optionIds??[];if(r.some((e=>e.id===a.id)))i=i.filter((t=>!e.includes(t.id)));else if(e.length>0){const t=i.filter((t=>!e.includes(t.id)));t.length+e.length===i.length&&(i=t,r=[...r,a])}}if("is_option"===n.type){const o=t.find((e=>e.value===n.value));if(!o)return;const a=i.filter((e=>e.id!==o.id));if(a.length<i.length)i=a;else{const n=e.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(o.id)})),a=r.find((e=>e.id===(null==n?void 0:n.id)));if(a){const e=t.filter((e=>{var t;return(null===(t=a.optionIds)||void 0===t?void 0:t.includes(e.id))&&e.id!==o.id}));r=r.filter((e=>e.id!==a.id)),i=[...i,...e]}else{i=[...i,o];const e=(null==n?void 0:n.optionIds)??[];if(n&&e.length>0){const t=i.filter((t=>!e.includes(t.id)));t.length+e.length===i.length&&(i=t,r=[...r,n])}}}}else if("is_group"===n.type){const t=e.find((e=>e.name===n.value));if(!t)return;const o=r.filter((e=>e.id!==t.id));if(o.length<r.length)r=o;else{const e=t.optionIds??[];r=[...r,t],i=i.filter((t=>!e.includes(t.id)))}}else(0,p().HB)(n.type);return[...r.map((e=>({type:"is_group",value:e.name}))),...i.map((e=>({type:"is_option",value:e.value})))]}function R(e){const{group:t,options:o,filterValues:n}=e,r=n.some((e=>"is_group"===e.type&&e.value===t.name)),i=o.filter((e=>{var o;return null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id)})),a=new Map;for(const d of i){const e=n.some((e=>"is_option"===e.type&&e.value===d.value))||r;a.set(d.id,e)}const s=Array.from(a.values()),l=s.some((e=>e)),c=s.every((e=>e))&&s.length>0;return{groupCheckState:!(!r&&!c)||!!l&&"partial",optionCheckedInfo:a}}function E(e){var t,o;const{collectionStore:r,collectionContextStore:i,environment:a}=e,l=i.relativeVariableStore.state,c=i.currentPropertyFiltersStore.state,u=i.currentCombinatorFilterStore.state,p=c.filter((e=>!(0,n().t_)(e.filter))).map((e=>e.filter));if(0===p.length&&!u)return;const m=null==r?void 0:r.getModel(),f=null===(t=i.collectionViewStore())||void 0===t?void 0:t.getCollectionSource(),h=i.normalizedSchemaStore.state,b=null===(o=i.viewsModuleContextStore.currentPageStore())||void 0===o?void 0:o.id,y={schema:m&&f?(0,s().zC)(f.type,h,m):h,userId:a.currentUser.id,userTimeZone:(0,d().P)(),userStartOfWeek:g().XX.state,intl:_().A.getIntl(),relativeVariableResult:l,currentPageInRelatedCollection:b,collectionFeatureGates:(0,v().i)()};return{filter:{filters:u?[...p,u]:p,operator:"and"},propertyMapping:void 0,context:y}}function D(e,t,o){const{property:n}=t,i=e[n];if(!(i&&"rollup"===i.type&&i.relation_property&&i.target_property))return i;{const t=e[i.relation_property];if(t&&(0,r().nC)(t)){const e=(0,r().Nv)(t);if(e){const t=o.getRecordModel(e);if(!t)return;const n=t.getNormalizedSchema();if(n){const e=n[i.target_property];if(e&&"rollup"!==e.type)return e}}}}}function N(e,t){const o=e.collectionViewStore(),r=e.currentSubitemFormatStoreForUiDisplayStore.state,i=null==o?void 0:o.getType(),a=k({collectionContextStore:e,applySubitemFilter:t&&Boolean(r)&&!(i&&(0,h().qS)(i)),filterOutHideSubitemsQuickFilter:!t});return(0,n().GV)(a)}function L(e){return(0,m().BI)(e)||e===b}},874096:(e,t,o)=>{o.d(t,{s:()=>r});var n=()=>o(508496);function r(){return"on"===n().default.getEligibleGroup({experimentId:"pdf_importer",defaultGroup:"control"})}},874753:(e,t,o)=>{o.d(t,{P:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1,currentView:"chat",from:void 0,isAssistantInputEmpty:!0}}}const r=new n;(0,o(604341).exposeDebugValue)("AssistantMenuStore",r)},875464:(e,t,o)=>{o.d(t,{DI:()=>m,Jg:()=>g,sX:()=>u});o(898992),o(354520),o(581454),o(737550);var n=o(296540),r=()=>o(56366),i=()=>o(534177),a=()=>o(351360),s=()=>o(846955);const l={prebuilt_templates:e=>!!e.initialTeamStoreId&&e.teamStoreIds.some((t=>t===e.initialTeamStoreId))};function c(e,t){const o=l[e];return!o||o(t)}function d(e,t){return e.filter((e=>c(e,t)))}function u(e,t,o){const n=e.indexOf(t);if(n<=-1||n>=e.length-1)return null;const r=e[n+1];return c(r,o)?r:u(e,r,o)}function p(e,t,o){const n=e.indexOf(t);if(n<=0)return null;const r=e[n-1];return c(r,o)?r:p(e,r,o)}function m(e){let t;switch(e){case"team_creator":t=s().orderedTeamSidebarTourSteps;break;case"home_checklist_workspace_tour":t=s().orderedHomeChecklistWorkspaceTourSteps;break;case"home_available":t=["home"];break;case"create_page":t=s().orderedCreatePageHomeChecklistTourSteps;break;case"chat_with_ai":t=s().orderedChatWithAiHomeChecklistTourSteps;break;case"collaborate":t=s().orderedCollaborateTourSteps;break;case"explore_community_templates":t=s().orderedExploreCommunityTemplatesTourSteps;break;case"explore_template_marketplace":t=s().orderedExploreCommunityTemplatesInAppTourSteps;break;case"explore_team_template":t=s().orderedExploreDocsTemplateTourSteps;break;case"explore_private_template":t=s().orderedExplorePrivateTemplateTourSteps;break;case"explore_personal_template":t=s().orderedExplorePersonalTemplateTourSteps;break;case"explore_getting_started_template":t=s().orderedExploreGettingStartedTemplateTourSteps;break;case"home_topbar_action_button":t=s().orderedHomeTopbarActionButtonTourSteps;break;case"team_workflow_templates":t=s().orderedTeamWorkflowTemplatesTourSteps;break;default:(0,i().HB)(e)}return t}function g(e,t){const o=(0,r().K8)((()=>{var e;return((null===(e=a().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getTeamsStores())||[]).map((e=>e.id))}),[]),i=(0,r().K8)((()=>s().default.state.initialTeamStoreId),[]);return n.useMemo((()=>{const n=m(e),r={teamStoreIds:o,initialTeamStoreId:i};return[d(n,r),p(n,t,r),u(n,t,r)]}),[o,i,t,e])}},875856:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});var n=()=>o(498212);class r extends(()=>o(757695))().default{getInitialState(){return{isLoaded:!1,isLoggingEnabled:!1,isAmplitudeEnabled:!1,isSegmentEnabled:!1,isZendeskEnabled:!1,isIntercomEnabled:!1,intercomAppId:void 0,intercomUserHash:void 0,noIntercomUserId:!1,isSprigEnabled:!1,zendeskToken:void 0,endpoint:""}}shouldRefresh(e){return!this.state.isLoaded||Boolean(e)!==Boolean(this.state.user_id)||Boolean(e&&this.state.user_id&&(0,n().Xw)(this.state.user_id)!==(0,n().Xw)(e))}}const i=new r},877688:(e,t,o)=>{o.d(t,{Yw:()=>we});var n=()=>o(747186),r=()=>o(249386),i=()=>o(885443),a=()=>o(917629),s=()=>o(763884),l=()=>o(967786),c=()=>o(861017),d=()=>o(427704),u=()=>o(646178),p=()=>o(677338),m=()=>o(449412),g=()=>o(763824),f=()=>o(534177),v=()=>o(939768),h=()=>o(576590),_=()=>o(780054),b=()=>o(671263),y=()=>o(549500),S=()=>o(47373),w=()=>o(437622),k=()=>o(551694);function I(e){let{environment:t,spaceStore:o}=e;(function(e){let{environment:t,spaceStore:o}=e;if(!o||!(0,w().IL)(o)||!(0,S().nJ)())return!1;const n=null==o?void 0:o.getDisableGuestMembershipRequests();if((0,f().O9)(n)&&!1===n)return!0;if(!(0,f().O9)(n)){const e=null==o?void 0:o.getPublicSpaceData();if((0,f().O9)(e)&&!1===e.disableGuestMembershipRequests)return!0}return!1})({environment:t,spaceStore:o})&&k().A.open()}var A=()=>o(989423),x=()=>o(68465),C=()=>o(807054),T=()=>o(965378),M=()=>o(836251),P=()=>o(465425),B=()=>o(215152),R=()=>o(12145),E=()=>o(30175),D=()=>o(500472),N=()=>o(351360),L=()=>o(430483),F=()=>o(57605),U=()=>o(508496),O=()=>o(961581),V=()=>o(606932),j=()=>o(927080),z=()=>o(19575),q=()=>o(807778),H=()=>o(151168),W=()=>o(973891),K=()=>o(338907),G=()=>o(452939),$=()=>o(252105),Y=()=>o(541258),Q=()=>o(209660),Z=()=>o(260488),X=()=>o(994877),J=()=>o(201938),ee=()=>o(857783),te=(o(898992),o(672577),()=>o(584262)),oe=()=>o(416845),ne=()=>o(498212),re=()=>o(898486),ie=()=>o(972435),ae=()=>o(449506),se=()=>o(901389),le=()=>o(426116),ce=()=>o(435009);const de=(0,o(959013).YK)({goBack:{id:"router.githubStudentCallback.goBack",defaultMessage:"Go back"},studentPackUpgradeSuccess:{id:"router.githubStudentCallback.success.message",defaultMessage:"Your workspace has been upgraded to the Education Plus plan."},studentPackUpgradeError:{id:"router.githubStudentCallback.error.message",defaultMessage:"Failed to upgrade to the Education Plus plan. Please try again or reach out to team@makenotion.com."},studentPackUpgradeNoCode:{id:"router.githubStudentCallback.noCode.message",defaultMessage:"Failed to authenticate your GitHub account. Please try again later."},studentPackUpgradeNotStudent:{id:"router.githubStudentCallback.notStudent.message",defaultMessage:"We couldn't verify your student status. Please try again."},studentPackUpgradeNoSpace:{id:"router.githubStudentCallback.noSpace.message",defaultMessage:"We could not locate your workspace. Please try again."}});const ue={workflowDeeplinkActions:new(o(645873).O2)("workflowDeeplinkActions",(()=>Promise.all([o.e(96346),o.e(36192),o.e(90409),o.e(63077),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(10399)]).then(o.bind(o,211619))))};var pe=()=>o(464510),me=(o(16280),()=>o(857639)),ge=()=>o(179034),fe=()=>o(96689),ve=()=>o(753035),he=()=>o(630116),_e=()=>o(624550),be=(o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),()=>o(34542));const ye=new Set(["1d2d0ce4-3be0-49e4-92ca-3bb0c3de1a6e","6f574aa0-ea3e-4039-bd12-eef2b9c797e1","c92bcc92-bae6-4018-ba72-626108d28bb1","46ec1b0e-c5d5-4476-99c1-0dc578190279","b1b35f81-c752-4251-94de-5813c850d159"]);async function Se(e,t){if(!e.currentUser.isLoggedIn())return _e().Yi({currentUserId:void 0,blockId:t.blockId}),void pe().Zv({environment:e,page:t});await async function(e,t){ve().A.reset(),await Promise.all([N().default.waitUntil((()=>void 0!==N().default.state.currentUserRootStore))]);const{currentUserRootStore:o}=N().default.state;if(void 0===o)throw new Error("User root is not defined.");const{blockId:n,workspaceId:r}=t;if(!n)throw new Error("Block ID is not defined.");const i=he().Bv.createChildStore(o,{table:ge().ev,id:n}),a=r&&(0,ne().c_)(r)?he().SL.createChildStore(o,{table:fe().NX,id:(0,ne().G2)(r)}):void 0;await Promise.all([i.load(),null==a?void 0:a.load(),U().default.waitUntilStatsigReady()]),ce().oo({environment:e,url:d().JZ.root,callback:()=>{!async function(e){const{environment:t,currentUserRootStore:o,blockStore:n,spaceStore:r,isFromTemplateGallery:i}=e;if(r&&function(e){let{blockStore:t,spaceStore:o}=e;if(!t.isReady()||!o.isReady()||!o.canEdit())return!1;const n=t.getParentId();return!!n&&ye.has(n)}({blockStore:n,spaceStore:r}))return ve().A.setState({open:!1,isFromTemplateGallery:i,isFromDuplicateParam:!0}),void(await async function(e){const{environment:t,currentUserRootStore:o,blockStore:n,spaceStore:r}=e;if(!n.isReady()||!r.isReady()||!r.canEdit())return;const i=o.getSpaceViewPointers().find((e=>e.spaceId===r.id));if(!i)return;const a=he().vH.createChildStore(o,i);await a.load(),await(0,be().Fq)({environment:t,blockStore:n,spaceStore:r,spaceViewStore:a})}({environment:t,currentUserRootStore:o,blockStore:n,spaceStore:r}));ve().A.setState({open:!0,variant:"modal",blockStore:n,spaceStore:void 0,spaceViewStore:void 0,teamStore:void 0,isFromTemplateGallery:i,isFromDuplicateParam:!0})}({environment:e,currentUserRootStore:o,blockStore:i,spaceStore:a,isFromTemplateGallery:"notion_template_gallery"===t.from})}})}(e,t).catch((o=>{me().log({level:"error",from:"templateRouteActions.handleTemplateDuplicationRoute",type:"handleTemplateDuplicationRouteForLoggedInUsersError",data:{miscDataToConvertToString:{nextRoute:t}},error:o}),ce().oo({environment:e,url:d().JZ.root})}))}async function we(e){const{id:t,action:S,href:w,environment:k,updateMobileTabbedRouterArgs:me}=e,{RouterStore:ge,currentUser:fe,TabbedRouterStore:ve}=k,he=c().parseRoute({url:w,isMobile:k.device.isMobile,baseUrl:_().A.domainBaseUrl,publicDomainName:_().A.publicDomainName,protocol:_().A.protocol,currentUrl:window.location.href});if((0,i().O8)(window.location.href),"root"===he.name&&k.device.isElectronMail)return;m().Cr(he.name);const _e=ge.state.route,be=s().A.get({userId:fe.id,key:t});ge.setState({id:t,historyState:be,action:S,route:he,initialRoute:ge.state.initialRoute||he}),_e&&he&&((0,C().isPrewarmedTabInitialRender)(k)?O().A.update((e=>({...e,prewarmedTabAppStartTimeOverride:performance.now()}))):V().A.markNavigationStartTime(_e,he));if("page"===(null==_e?void 0:_e.name)&&"page"===he.name&&he.blockId!==_e.blockId&&_e.blockId&&ee().u3({environment:k,targetId:_e.blockId}),null!=me&&me.forceUpdate||M().Al(k)&&(null==me||!me.tabbedRouterStateAlreadyUpdated)){const De={type:"web",url:v().ZO(w),route:he};ve.updateWithWebPage({page:De,action:null!=me&&me.forceUpdate?"replace":S,updateMobileTabbedRouterArgs:me})}const ye=v().qg(w),we=ye.query[u().P];we&&(0,l().R9)({currentUserId:fe.id,promoCode:we});const Ae=ye.query[r().BM];Ae&&((0,p().Ug)(Ae),ke(r().BM)),"page"===he.name||c().ak[he.name]||G().TG(k,w);const{target:xe,subtarget:Ce}=function(e){if(!e)return{target:void 0};const t=null==e?void 0:e.indexOf(".");if(-1===t)return{target:e};return{target:e.substring(0,t),subtarget:e.substring(t+1)}}(ye.query.target),Te=v().ZO(w),Me=n().parse(Te.split("?")[1]||""),Pe="aq",Be="deepFind",Re=Me[Pe]&&String(Me[Pe]);xe&&function(e){let{environment:t,target:n,subtarget:r,assistantQueryPrefill:i,assistantQueryPrefillKey:s}=e;if("intercom"===n)X().SI({environment:t,from:"query_param"}),ke("target");else if(t.device.isMobileBrowser&&"plans"===n){async function l(){if(await U().default.waitUntilStatsigReady(),!(0,q().S$)())return;const e=await b().Xm.load(),o=N().default.state.currentSpaceStore;e.plans.canShowPlans(o)&&await e.plans.showPlans({environment:t,from:"deeplink"}),ke("target")}Ie({timeoutMs:3e3,effect:l})}else if(t.device.isMobileBrowser&&"billing"===n){async function c(){if(await U().default.waitUntilStatsigReady(),!(0,q().S$)())return;const e=N().default.state.currentSpaceStore,o=await b().Xm.load();if(e){const n=await F().A.awaitData(t,{spaceId:e.getSpaceId()});o.billing.canShowBilling({spaceStore:e,billingData:n})&&o.billing.showBilling({environment:t,from:"deeplink"})}ke("target")}Ie({timeoutMs:3e3,effect:c})}else if("billing"===n||"plans"===n||"members"===n||"audit_log"===n||"connected_apps"===n||"identity_provisioning"===n||"analytics"===n||"admin_content_search"===n||"profile"===n||"notifications_and_settings"===n||"user_settings"===n||"notifications"===n||"language_and_region"===n||"settings"===n||"integrations"===n||"sites"===n||"imports"===n||"security"===n)Q().Ow({currentTab:n,subtab:r,isMobile:t.device.isMobile,openedFrom:"email"}),ke("target");else if("contact_us"===n)(0,z().lK)({openedFrom:"contact_us_deeplink"}),ke("target");else if("quickfind"===n)Promise.race([async()=>{await N().default.waitUntil((()=>void 0!==N().default.state.currentUserSettingsStore&&void 0!==N().default.state.currentSpaceStore&&void 0!==N().default.state.currentSpaceViewStore&&void 0!==N().default.state.currentUserRootStore)),await N().default.waitUntilRendered(),Z()._N({environment:t,analyticsFrom:"deeplink"})},g().wR(1500).then((()=>{Z()._N({environment:t,analyticsFrom:"deeplink"})}))]),ke("target");else if("qna"===n){const d=async()=>{if(await U().default.waitUntilStatsigReady(),(0,x().N9)(t),!L().zD.isQnaRightSideDeeplinkEnabled()||L().zD.isQnATooltipsVisible(t.device,N().default.state.currentUserSettingsStore))return;const{assistantDependency:e}=await Promise.resolve().then(o.bind(o,650829)),n=await e.load();n.assistantMenuActions.openAssistantRightHandSideMenu({environment:t,from:"deeplink"}),i&&(ke(s),n.assistantMenuActions.setPrimeTextInput(i))};Ie({timeoutMs:1500,effect:()=>(ke("target"),d())})}else if("tryAI"===n){Ie({timeoutMs:4e3,effect:async()=>{await U().default.waitUntilStatsigReady(),(0,x().N9)(t);let e=L().zD.shouldRouteToWriterOrPlansAfterSignup();switch(L().zD.isAssistantInWriterEnabled()||(e="plans"),e){case"writer":return ke("target"),i&&ke(s),J().f({environment:t,prefill:i});case"plans":if(ke("target"),t.device.isMobileBrowser){const e=await b().Xm.load(),o=N().default.state.currentSpaceStore;if(e.plans.canShowPlans(o))return e.plans.showPlans({environment:t,from:"deeplink"})}return Q().Ow({currentTab:"plans",subtab:r,isMobile:t.device.isMobile,openedFrom:"email"});default:(0,f().HB)(e)}}})}else if("ai_writer"===n)Ie({timeoutMs:3e3,effect:()=>(ke("target"),i&&ke(s),(0,x().N9)(t),J().f({environment:t,prefill:i}))});else if("slack_qna"===n){const u="deeplink";(0,h().navigateToSlackUniversalQnAOnboarding)({analyticsFrom:u})}else if("google_drive_qna"===n){const p="deeplink";(0,h().navigateToGoogleDriveUniversalScreen)({analyticsFrom:p,screenToShow:"info_screen"})}else if("github_ai_connector"===n){const m="deeplink";(0,h().navigateToGithubAIConnectorOnboarding)({analyticsFrom:m})}else if("jira_qna"===n){const v="deeplink";(0,h().navigateToJiraUniversalScreen)({analyticsFrom:v,screenToShow:"info_screen"})}else if("guest_to_member"===n){(async()=>{const e=async()=>{var e;await N().default.waitUntil((()=>void 0!==N().default.state.currentSpaceStore)),await Promise.all([null===(e=N().default.state.currentSpaceStore)||void 0===e?void 0:e.waitUntil((()=>{var e;return!(null===(e=N().default.state.currentSpaceStore)||void 0===e||!e.isReady())})),U().default.waitUntilStatsigReady()])};await Promise.race([e(),g().wR(3e3)]),I({environment:t,spaceStore:N().default.state.currentSpaceStore})})(),ke("target")}else if("add_pro_account"===n)Ie({timeoutMs:3e3,effect:()=>new Promise((()=>{B().B.setState({open:!0,isForAddingProAccount:!0}),ke("target")}))});else if("add_another_account"===n)Ie({timeoutMs:3e3,effect:()=>new Promise((()=>{B().B.setState({open:!0}),ke("target")}))});else if("create_form"===n){async function _(){await U().default.waitUntilStatsigReady();const{formsEditorDependency:e}=await Promise.resolve().then(o.bind(o,339034)),{formEditorActions:n}=await e.load();n.createFormInPrivate({environment:t,navigateToFormBuilder:!0}),ke("target")}Ie({timeoutMs:3e3,effect:_})}else if("inappmessage"===n){const S=(0,a().h2)(r);S&&Ie({timeoutMs:3e3,effect:async()=>{await P().HH(t,S)}})}else"auto_transcribe"===n?Ie({timeoutMs:3e3,effect:async()=>{ke("target");const e=await y().$O.load();return await e.transcriptionBlockActions.startTranscribingBlockOnPage({environment:t})}}):"upgrade_requests"===n&&((0,q().Gy)(t)&&Q().Ow({currentTab:"requests",openedFrom:"email"}),ke("target"))}({environment:k,target:xe,subtarget:Ce,assistantQueryPrefill:Re,assistantQueryPrefillKey:Pe}),Boolean(ye.query.mwn2024)&&pe().Dg(k);const Ee=W().Gy();if(!W().zN()||Ee&&"page"===he.name&&Ee===he.blockId||W().T_(),"googleOneTapRedirect"!==he.name)if("samlAuthCallback"!==he.name)if("appleAuthCallback"!==he.name)if("googleAuthCallback"!==he.name)if("microsoftAuthCallback"!==he.name)if("passkeyAuthCallback"!==he.name)if("passkeyRegistrationCallback"!==he.name)if("externalAuthNativeCallback"!==he.name)if(await U().default.waitUntil((()=>U().default.state.isLoaded)),e.enableDesktopAppRedirect&&function(e){const{route:t}=e.RouterStore.state;return c().b1[t.name]&&"always"===j().A.state&&e.device.isDesktop&&e.device.isBrowser&&(e.device.isMac||e.device.isWindows||!1)&&(!("configureOpenInDesktopApp"in t)||!t.configureOpenInDesktopApp)}(k))pe().w7(k);else{if("root"===he.name){const Ne=Array.isArray(Me.target)?Me.target[0]:Me.target,Le="sites_publish"===Ne||k.device.isMobile&&"sites_tooltips_tour"===Ne,Fe={templateGalleryItem:he.templateGalleryItem,mwnFeatureModalRedirect:Boolean(Me.mwn2024),projectManagementLaunch:"true"===(Array.isArray(Me.pjm)?Me.pjm[0]:Me.pjm),assistantQueryPrefill:Array.isArray(Me.aq)?Me.aq[0]:Me.aq,assistantTargetRedirect:"qna"===Ne||"ai_writer"===Ne?Ne:void 0,forceLandLastVisitedPage:Le};pe().t$(he,k,Fe)}else if("onboarding"===he.name)pe().IC(k);else if("modal"===he.name)if(k.currentUser.isLoggedIn()){let Ue="/";he.projectManagementLaunch?Ue+="?tg=gallery":he.templateGalleryItem&&(Ue+=`?tg=${he.templateGalleryItem}`),ce().oo({environment:k,url:Ue,redirect:!0})}else ce().oo({environment:k,url:d().JZ.login,redirect:!0});else if("googleDriveAuthCallback"===he.name)pe().it(he,k);else if("slackAuthCallback"===he.name)pe().KY({route:he,environment:k});else if(he.name===c().I2.datadogAuthCallback)pe().M8({route:he,environment:k});else if("externalAuthCallback"===he.name)pe().d0({route:he,environment:k});else if(he.name===c().I2.authCallback)pe().M8({route:he,environment:k});else if("loginWithEmailCallback"===he.name)pe().mA(he,k);else if("loginSuccessCallback"===he.name)pe().L_(he,k);else if("passwordResetCallback"===he.name)pe().V4(he,k);else if("passwordChangeRedirect"===he.name)ce().navigateOnBaseUrl({environment:k,url:d().JZ.login}),T().r({environment:k});else if("logout"===he.name)pe().vx(k);else if("login"===he.name||"signup"===he.name){(0,p().$A)(),pe().v_(k,w),Boolean(Me.showNotionCalendarModal)&&await pe().Sf(k);const Oe={doNotRedirectWhenLoggedIn:Boolean(Me.newSignup)},Ve=Me.redirectURL&&String(Me.redirectURL),je=Ve&&(0,M().J0)(Ve)?Ve:void 0,ze=Me.prompt&&String(Me.prompt),qe=ze&&(0,K().u_)(k)?v().O$(d().JZ.workflowTemplates,{t:"aiBuilder",prompt:ze}):void 0;pe().Sk({environment:k,routeName:he.name,option:Oe,redirectUrl:je??qe})}else if("login/mail"===he.name||"signup/mail"===he.name){const He=Boolean(Me.error);await pe().s$(k,He)}else if("login/calendar"===he.name||"signup/calendar"===he.name){const We=Boolean(Me.error);await pe().bz(k,We)}else if("oauthAuthorization"===he.name)pe().DM(he,k);else if("page"===he.name||"space"===he.name){if(pe().v_(k,w),pe().u1(k,he.state),"page"===he.name&&he.shouldDuplicate)return void(await Se(k,he));Y().w({nextRoute:he,currentRoute:_e,environment:k,query:Te}),await pe().xW(k,he)}else if("templatesRedirect"===he.name)ce().oo({environment:k,url:(0,M().xS)("templateGallery"),redirect:!0});else if("communityRedirect"===he.name)ce().oo({environment:k,url:(0,M().xS)("community"),redirect:!1});else if("guideRedirect"===he.name)ce().oo({environment:k,url:(0,M().xS)("guides.guides"),redirect:!0});else if("invoiceRedirect"===he.name)ce().oo({environment:k,url:d().JZ.root,redirect:!0});else if("termsRedirect"===he.name)ce().oo({environment:k,url:(0,M().xS)("terms"),redirect:!0});else if("contentPolicyRedirect"===he.name)ce().oo({environment:k,url:(0,M().xS)("contentPolicy"),redirect:!0});else if("uiDoc"===he.name)ce().oo({environment:k,url:d().JZ.root,redirect:!0});else if("exportPreview"===he.name)ce().oo({environment:k,url:d().JZ.root,redirect:!0});else if("admin"===he.name)_().A.isAdminMode||ce().oo({environment:k,url:d().JZ.root,redirect:!0});else if("team"===he.name)pe().h8(k,he,_e);else if("teamInvite"===he.name)pe().bO(k,he.inviteCode);else if("teamsInvite"===he.name)k.currentUser.isLoggedIn()||ce().oo({environment:k,url:d().JZ.signup,redirect:!0});else if("aiGtmFavoriteImport"===he.name)pe().Kc({environment:k,route:he});else if("new"===he.name)pe().CQ(k,he);else if("myIntegrations"===he.name)pe().Ko(k);else if("creatorProfile"===he.name)pe().$i({environment:k,redirectRoute:{url:d().JZ.creatorProfile}});else if("creatorProfileTemplates"===he.name)he.initialValues&&(E().A.setState({url:he.initialValues.url??"",name:he.initialValues.name??"",status:"draft"}),ke("url"),ke("name")),pe().$i({environment:k,redirectRoute:{url:d().JZ.creatorProfileTemplates}});else if("creatorProfileIntegrations"===he.name)pe().$i({environment:k,redirectRoute:{url:d().JZ.creatorProfileIntegrations}});else if("creatorProfileAnalytics"===he.name)pe().$i({environment:k,redirectRoute:{url:d().JZ.creatorProfileAnalytics}});else if("creatorProfileCoupons"===he.name)pe().$i({environment:k,redirectRoute:{url:d().JZ.creatorProfileCoupons}});else if("workflowTemplates"===he.name){if(!(0,K().u_)(k))return void ce().oo({environment:k,url:d().JZ.root,redirect:!0});k.currentUser.isLoggedIn()?await async function(e){return await ue.workflowDeeplinkActions.load().then((t=>t.handleWorkflowTemplatesDeeplink(e)))}({environment:k,nextRoute:he}):pe().$i({environment:k,redirectRoute:{url:d().JZ.workflowTemplates,query:Me}})}else if("unknown"===he.name)ce().oo({environment:k,url:d().JZ.root,redirect:!0});else if("nativeTab"===he.name)pe().DO(k,he,_e,S);else if("quickSearch"===he.name)await pe().SP(k,he,_e);else if("chat"===he.name){async function Ke(){if(Re){ke(Pe);const{assistantDependency:e}=await Promise.resolve().then(o.bind(o,650829)),{assistantMenuActions:t,assistantActions:n}=await e.load(),r=Re.length>Z().XM&&k.device.isElectron;t.setPrimeTextInput(r?void 0:Re);const i=Boolean(Me[Be]);if(i&&ke(Be),r||i){const e=await n.resetAndInitializeAssistantSession({environment:k,deepFindRequested:i}),t=(0,D().Ow)(Re);n.commitHumanStep({environment:k,text:t,sessionId:e.sessionId,assistantSurfaceType:"searchPane"})}}ke("persona")}await pe().PT(k,he,_e),Ie({timeoutMs:3e3,effect:Ke})}else if("aiInferenceTranscript"===he.name)pe().Ug(k,he,_e);else if("marketplace"===he.name||"gallery"===he.name)await pe().Eg(k,he,_e);else if("uniqueId"===he.name)await pe().D$(k,he);else if("signupWithTrial"===he.name){const Ge=he.trialUpsell;(0,A().u4)({environment:k,event:{eventName:"upsell_link_visit",eventProperties:{source:Ge}}}),(0,H().ie)(Ge,k),(0,H().KF)(Ge)&&$().kU(k,{source:Ge}),"perfmark"===Ge&&k.currentUser.isLoggedIn()&&(R().A.setState({open:!0,isExistingUser:!0}),pe().$i({environment:k,redirectRoute:{url:d().JZ.root}})),ce().oo({environment:k,url:d().JZ.signup,redirect:!0})}else"posts"===he.name?pe().Mq(k,he,_e):"home"===he.name?pe().Uh(k,he):"githubStudentPackAuthCallback"===he.name?async function(e,t){const o=t.code;if(!o)return void se().rG({message:ie().A.formatMessage(de.studentPackUpgradeNoCode),acceptLabel:ie().A.formatMessage(de.goBack),onAccept:()=>{ce().oo({environment:e,url:d().JZ.githubStudentPackHome,redirect:!0})}});if(!t.state)return se().f1(ie().A.formatMessage(de.studentPackUpgradeNoSpace)),void ce().oo({environment:e,url:d().JZ.githubStudentPackHome});const n=(0,ne().G2)(t.state),r=await ae().callApi({eventName:"applyStudentGitHubGrant",environment:e,data:{spaceId:n,code:o}});if("success"===r.type)se().rG({message:ie().A.formatMessage(de.studentPackUpgradeSuccess),acceptLabel:ie().A.formatMessage(de.goBack),onAccept:async()=>{const{currentUserRootStore:t,currentUserSettingsStore:o}=N().default.state,r=null==t?void 0:t.getSpaceViewStores(),i=null==r?void 0:r.find((e=>e.getSpaceId()===n));i?await le().tR({environment:e,spaceViewStore:i,userRootStore:t,userSettingsStore:o,pageVisitSource:te().y8.SwitchSpace,navigationType:"switchingToOrLoadingSpace"}):ce().oo({environment:e,url:d().JZ.githubStudentPackHome})}});else{if((0,oe().V4)(r.error)){const e=(0,re().Hu)(ie().A.getIntl(),r);se().f1(e)}else se().f1(ie().A.formatMessage(de.studentPackUpgradeError));ce().oo({environment:e,url:d().JZ.githubStudentPackHome})}}(k,he):"formResponse"===he.name&&pe().Mg(k,he);c().v1(he)&&(pe().ic(k,he,Te),pe().Wj(k,he),"page"===he.name&&he.demoWorkspaceMode&&(await U().default.waitUntilStatsigReady(),pe().SS(he.demoTemplateSlug)),await pe().ne({environment:k,nextRoute:he,currentRoute:_e}))}else pe().uh(he,k);else pe().LI(he,k);else pe().c1(he,k);else pe().nA(he,k);else pe().Ii(he,k);else pe().je(he,k);else pe().Oh(he,k);else pe().X$(k,{code:he.code,frontPathName:he.frontPathName,upsell:he.trialName})}function ke(e){const t=v().ZO(v().qm(window.location.href,e));window.history.replaceState(window.history.state,void 0,t)}function Ie(e){const{timeoutMs:t,effect:o}=e;(async()=>{await function(e){const{timeoutMs:t}=e;return Promise.race([N().default.waitUntil((()=>void 0!==N().default.state.currentUserSettingsStore&&void 0!==N().default.state.currentSpaceStore&&void 0!==N().default.state.currentSpaceViewStore&&void 0!==N().default.state.currentUserRootStore)),g().wR(t)])}({timeoutMs:t}),await o()})()}},878060:(e,t,o)=>{o.d(t,{O:()=>I,n:()=>A});o(296540);var n=()=>o(726275),r=()=>o(416504),i=(o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(430670),o(581454),()=>o(496603)),a=()=>o(713998),s=()=>o(388821);const l=500;function*c(e){const{startingBlock:t,relationPropertyIdGroups:o,receiver:n}=e;let r,s=o.map((e=>function*(e){const{startingBlock:t,relationPropertyIds:o,receiver:n}=e,r=new Set,s=[{block:t}];let c=0;for(;;){const e=s.shift();if(!e)break;const{block:t}=e;if(r.has(t.id))continue;r.add(t.id);const d=o.flatMap((e=>{var o;return(0,a().n)(null===(o=t.properties)||void 0===o?void 0:o[e])}));if(!n.receive(d))return;if(d.length>0){const{recordMap:e}=yield{recordPointers:d};s.push(...i().oE(d.map((t=>{const o=e.getValue(t);if(o&&o.alive)return{block:o}}))))}if(c++,c>l)throw new Error("Reached maximum number of iterations")}}({relationPropertyIds:e,startingBlock:t,receiver:n})));for(;s.length>0;){const e=[];s=s.filter((t=>{const o=r?t.next(r):t.next();return!o.done&&(e.push(o.value),!0)})),e.length>0&&(r=yield{recordPointers:e.flatMap((e=>e.recordPointers))})}}class d{constructor(e){this.blockPointerSet=new(o(400017).A),this.limit=e}getBlockPointers(){return this.blockPointerSet.valuesArray()}receive(e){return this.blockPointerSet.add(...e),this.blockPointerSet.size<this.limit}}function u(e){return function(e){const{startingBlock:t,relationPropertyIdGroups:o,getRecordValue:n,limit:r}=e,i=new d(r),a=c({startingBlock:t,relationPropertyIdGroups:o,receiver:i});let l=a.next();for(;!l.done;){const e=s().RecordMap.create();for(const t of l.value.recordPointers)e.setValue(t,n(t));l=a.next({recordMap:e})}return i.getBlockPointers()}(e).every((t=>Boolean(e.getRecordValue(t))))}var p=()=>o(959013),m=()=>o(534177),g=()=>o(104012),f=()=>o(760578),v=()=>o(351360),h=()=>o(508496),_=()=>o(630116),b=()=>o(449506),y=()=>o(436572),S=()=>o(317909),w=o(474848);const k=100;function I(e){const{environment:t,store:o}=e;C({environment:t,store:o,change:{type:"date",...e}})}function A(e){const{environment:t,store:o}=e;C({environment:t,store:o,change:{type:"relation",...e}})}const x=new(o(999752).O)(1);function C(e){const{environment:t,store:o,change:a}=e,s=o.getAssociatedCollectionStore();if(!s)return;const l=s.getDatabaseType(),c=s.getSchema(),d=s.getNormalizedDependencyDateShiftingConfig();if(!d)return;const I=s.getFormatStore().getKeyStore("collection_default_arrows_by").getValue();if(!I)return;const A=c[I];if("relation"!==(null==A?void 0:A.type))return;const C=A.property;C&&x.enqueue((()=>async function(e){var t,o;const{environment:a,store:s,dateShiftConfig:l,databaseType:c,blockedByPropertyId:d,blockingPropertyId:I,change:A,collectionSchema:x}=e,C={id:s.id,properties:s.getProperties()},T=null===(t=v().default.state.currentUserSettingsStore)||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.locale,M=(0,r().P)();let P,B,R;if("date"===A.type){var E;if(0===i().E$(i().oE([l.date_property,l.end_date_property]),i().oE([A.dateProperty.id,null===(E=A.otherDateProperty)||void 0===E?void 0:E.id])).length)return;const e=new Map;e.set(A.dateProperty.id,A.dateProperty),A.otherDateProperty&&e.set(A.otherDateProperty.id,A.otherDateProperty);const t=t=>{const o=e.get(t);if((0,m().O9)(o))return o;{var n;const e=null===(n=C.properties)||void 0===n?void 0:n[t];return{id:t,oldValue:e,newValue:e}}};P=t(l.date_property),(0,m().O9)(l.end_date_property)&&(B=t(l.end_date_property))}else if("relation"===A.type){if(A.relationPropertyId!==I&&A.relationPropertyId!==d)return;if("preserve_gap"===l.mode)return;P={id:l.date_property,oldValue:void 0,newValue:C.properties[l.date_property]},l.end_date_property&&(B={id:l.end_date_property,oldValue:void 0,newValue:C.properties[l.end_date_property]})}else(0,m().HB)(A);"preserve_gap"===l.mode?R=[[d,I]]:"consume_gap"===l.mode?R=[[d],[I]]:(0,m().HB)(l.mode);u({startingBlock:C,relationPropertyIdGroups:R,limit:k,getRecordValue:s.getRecordValue})?await Promise.resolve():await b().callApi({eventName:"getTransitivePageRelations",environment:a,data:{blockId:C.id,limit:k,relationPropertyIdGroups:R}}).then((()=>{}));const D=(0,n()._v)({block:{id:C.id,properties:{...C.properties,...P.oldValue?{[P.id]:P.oldValue}:{},...null!==(o=B)&&void 0!==o&&o.oldValue?{[B.id]:B.oldValue}:{}}},blockingPropertyId:I,blockedByPropertyId:d,dateProperty:P,endDateProperty:B,getRecordValue:s.getRecordValue,timeZone:M,locale:T,options:l,collectionSchema:x,getRecordRole:s.getRecordRole,includeDeletedRelations:h().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:h().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:h().default.checkGate({gateName:"relations_show_no_access"})}),{operations:N}=D;S().createAndCommit({userAction:"collectionDateActions.handleDependencyDateShifting",environment:a,canUndo:!0,perform:e=>{for(const t of N){const o=(0,_().Oo)(s,t.pointer);S().applyOperation({store:o,operation:t,transaction:e})}}});const L=(0,f().Jh)({result:D,databaseType:c});L&&y().D6({label:(0,w.jsx)(p().sA,{...L.message}),right:L.canUndo?(0,w.jsx)(g().q6,{}):void 0})}({environment:t,store:o,dateShiftConfig:d,databaseType:l,blockedByPropertyId:C,blockingPropertyId:I,change:a,collectionSchema:c}))).catch((e=>{console.error(e)}))}},878079:(e,t,o)=>{o.d(t,{Qi:()=>m,Z5:()=>f,fb:()=>g,x2:()=>d,yP:()=>p});o(944114);var n=()=>o(617871),r=()=>o(865377),i=()=>o(322769),a=()=>o(351360),s=()=>o(508496),l=()=>o(630116),c=()=>o(108944);function d(e){const t=c().g7(e),o=[];for(const n of t)"block"===n.table&&o.push({blockStore:n,slackIntegrationStore:(0,l().Oo)(e,{table:r().VY,id:n.id})});for(const{blockStore:n,slackIntegrationStore:r}of o)if(r.isReady()){if(r.getKeyStore("enabled").getValue())return{blockStore:n,slackIntegrationStore:r}}return{blockStore:e,slackIntegrationStore:(0,l().Oo)(e,{table:r().VY,id:e.id})}}function u(){var e;const t=null===(e=a().default.state.currentSpaceStore)||void 0===e?void 0:e.getBotSettingsStore().getValue();return(0,i().nH)({spaceBotSettings:t,integrationId:n().zG,env:"production"})}function p(){return s().default.checkGate({gateName:"legacy_slack_notifications"})}function m(){return u()||!1}function g(){return u()||!1}function f(){return!!u()&&s().default.checkGate({gateName:"enable_notion_activity_notifications_in_slack"})}},878377:(e,t,o)=>{o.d(t,{K1R:()=>Do,Uo6:()=>Be,$Mx:()=>Ko,Bb5:()=>Yo,ctY:()=>Et,RdQ:()=>$o,pLL:()=>kt,bLC:()=>At,lTV:()=>Ho,xqI:()=>ko,Cuf:()=>wo,p9k:()=>Io,mUX:()=>tt,Km9:()=>et,_37:()=>_o,JZE:()=>Kn,VNy:()=>He,SvZ:()=>$e,x7S:()=>on,p2L:()=>qe,Xmj:()=>We,wTm:()=>Wn,MIU:()=>Ue,ecY:()=>Fe,UL_:()=>uo,MNy:()=>po,Wci:()=>en,fHN:()=>Ge,Wir:()=>Dt,O1v:()=>ut,My5:()=>Rt,$9:()=>je,AVO:()=>ze,P_F:()=>co,BBM:()=>Ke,ed0:()=>lo,pw4:()=>Fn,gxn:()=>Yn,omD:()=>it,opL:()=>rt,y9r:()=>Xo,aAU:()=>Jo,JPf:()=>mo,wx:()=>go,ZCq:()=>Vn,y2w:()=>ar,Jt9:()=>kn,ZLr:()=>xn,z5D:()=>An,nRE:()=>Tn,GPx:()=>$n,i5y:()=>yt,Rde:()=>vt,Pqm:()=>In,Hcy:()=>Cn,xCr:()=>Sn,iv4:()=>Go,Env:()=>Eo,hfc:()=>Gt,VjU:()=>mt,wFE:()=>gt,m01:()=>Vt,WoS:()=>dn,bmm:()=>Xe,dKT:()=>Ao,Pnk:()=>ct,WWi:()=>Bo,z9l:()=>bt,ITL:()=>Pn,CeV:()=>eo,Kq2:()=>ro,Afv:()=>to,Efw:()=>so,tpG:()=>Ln,vP$:()=>Wo,P$I:()=>Ro,jfA:()=>pt,oy3:()=>jo,d0C:()=>Tt,bIL:()=>_t,g$R:()=>Dn,fAV:()=>wt,Lzj:()=>St,c5w:()=>ho,IT$:()=>Zo,b8R:()=>Nt,DNw:()=>Lt,ld1:()=>Un,ZVI:()=>Hn,Y4D:()=>un,SQN:()=>Mt,IW:()=>Ye,hLE:()=>Qe,Qp$:()=>Je,ka$:()=>ft,h1w:()=>jn,ctQ:()=>Bt,kD4:()=>_n,$68:()=>bn,mEr:()=>or,bdp:()=>tr,yI5:()=>nr,BAy:()=>ao,PaP:()=>So,Ozi:()=>Ct,un6:()=>Ot,wu0:()=>Gn,Y8P:()=>wn,HOV:()=>Pt,P5O:()=>no,nOz:()=>Yt,I2X:()=>Qt,afo:()=>Uo,lOb:()=>io,yAQ:()=>On,BUc:()=>dt,vEP:()=>lt,UC4:()=>oo,uAU:()=>an,Wfp:()=>xt,VxA:()=>Le,SoP:()=>Nn,ln6:()=>at,Wj2:()=>Co,M3g:()=>Zt,cX8:()=>Ut,ISA:()=>ht,TMT:()=>Qo,FrL:()=>zt,rr0:()=>Wt,wHP:()=>jt,lj$:()=>st,FEq:()=>Ne,i6S:()=>qo,ibx:()=>Ht,pe1:()=>xo,_fc:()=>Vo,W_Y:()=>bo,mDl:()=>De,zrb:()=>To,IRu:()=>Kt,Kwf:()=>hn,bct:()=>Jt,L8k:()=>No,gII:()=>Mn,sc7:()=>Xt,_Ti:()=>Fo,pxM:()=>ir,PfK:()=>Ze,dUO:()=>$t,tpB:()=>qt,IuJ:()=>sr,ULX:()=>Lo,b8z:()=>zn,stn:()=>qn,Ezz:()=>ot,zVC:()=>yn,vXb:()=>Ee,nvZ:()=>Qn,QTI:()=>ln,an_:()=>Bn,_mr:()=>nt,t7S:()=>Zn,J$q:()=>Oe,gU$:()=>sn,TeF:()=>yo,xIn:()=>cn,Po5:()=>Ve,wpj:()=>rr,Xjv:()=>It,uFH:()=>Ft,lG8:()=>gn,D4X:()=>mn,geu:()=>fn,qFS:()=>vn,LO$:()=>pn,M7S:()=>fo,AU6:()=>Re,or:()=>Pe,GbK:()=>Oo,V5t:()=>tn,qKm:()=>nn,nGR:()=>rn,Kg6:()=>Jn,IrU:()=>Xn,JYi:()=>zo,w2Y:()=>En,d2I:()=>Rn,jc4:()=>vo,zq3:()=>Po});o(18107),o(967357),o(898992),o(823215),o(354520),o(672577),o(581454),o(737550);var n=()=>o(700500),r=()=>o(90023),i=()=>o(713998),a=()=>o(107041),s=()=>o(522419),l=()=>o(388693),c=()=>o(433847),d=()=>o(68263);const u=["TypeScript","JavaScript","GraphQL","HTML","CSS","Scss","JSON","XML","Rust"];var p=()=>o(861017),m=()=>o(179034),g=()=>o(519831),f=()=>o(343666),v=()=>o(96689),h=()=>o(854150),_=()=>o(322769),b=()=>o(762433),y=()=>o(468006),S=()=>o(919709),w=()=>o(496603),k=()=>o(720665),I=()=>o(661077),A=()=>o(602098),x=()=>o(519839),C=()=>o(780054),T=()=>o(97270),M=()=>o(186445),P=()=>o(611191),B=()=>o(776894),R=()=>o(747100),E=()=>o(731320),D=()=>o(836251),N=()=>o(37433),L=()=>o(646736),F=()=>o(444796),U=()=>o(400851),O=()=>o(449476),V=()=>o(696746),j=()=>o(129522),z=()=>o(182106),q=()=>o(247450),H=()=>o(980914),W=()=>o(709219),K=()=>o(578872),G=()=>o(110955),$=()=>o(792415),Y=()=>o(351360),Q=()=>o(430483),Z=()=>o(337567),X=()=>o(525569),J=()=>o(227440),ee=()=>o(77246),te=()=>o(948914),oe=()=>o(176106),ne=()=>o(508496),re=()=>o(975971),ie=()=>o(735372),ae=()=>o(406859),se=()=>o(375447),le=()=>o(712505),ce=()=>o(411671),de=()=>o(151059),ue=()=>o(630116),pe=()=>o(733539),me=()=>o(899677),ge=()=>o(502438),fe=()=>o(620149),ve=()=>o(24157),he=()=>o(47373),_e=()=>o(405417),be=()=>o(449195),ye=()=>o(289117),Se=()=>o(245128),we=()=>o(504836),ke=()=>o(396301),Ie=()=>o(478726),Ae=()=>o(108944),xe=()=>o(878079),Ce=()=>o(437622),Te=()=>o(792002),Me=()=>o(483461);function Pe(e){return t=>e.some((e=>e(t)))}function Be(e){return t=>e.every((e=>e(t)))}function Re(e){return t=>!e(t)}function Ee(e){return e.blocks&&1===e.blocks.length}function De(e){if(!Ee(e))return!1;const{publicPageData:t}=$().A.state;return Boolean(null==t?void 0:t.isDLSViewer)}function Ne(e){return e.blocks&&e.blocks.length>1}function Le(e){return!!(0,P().iE)()&&e.blocks.every((e=>{const t=e.getParentId(),o=e.recordStoreUIParentStore,n=null==o?void 0:o.id;return t&&n&&t!==n}))}function Fe(e){return e.blocks.every((t=>{const o=t.recordStoreUIParentStore;if(!o)return!1;const n=e.publicEditMode?e.publicEditMode:(0,Ae().Wo)(o)&&ce().A.getMode(e.environment,o);return!E().QT(n)&&o.canEdit()}))}function Ue(e){const{environment:t}=e;return e.blocks.every((e=>E().MI({environment:t,blockStore:e})))}function Oe(e){return void 0!==e.blocks.find((e=>"suggest"===ee().Uv.getMode(e)))}function Ve(e){return void 0!==e.blocks.find((e=>(0,ee().Or)(ee().Uv.getMode(e))))}function je(e){if(fe().l.state)return!1;if(er())return!1;if(e.publicEditMode){const t=e.publicEditMode.permission;return"edit"===t||"comment"===t}return!Ve(e)&&e.blocks.every((e=>!e.pathIsDead()&&(!(0,Z().dL)(e)&&e.canComment())))}function ze(e){if(fe().l.state)return!1;if(er())return!1;if(e.publicEditMode){const t=e.publicEditMode.permission;return"edit"===t||"comment"===t}return e.blocks.every((e=>"suggest"===ee().Uv.getMode(e)&&(!e.pathIsDead()&&(!(0,Z().dL)(e)&&e.canComment()))))}function qe(e){return!fe().l.state&&(!er()&&(!Ve(e)&&e.blocks.every((t=>"suggest"!==ee().Uv.getMode(t)&&(!E().QT(e.publicEditMode)&&(!t.pathIsDead()&&(!(0,Z().dL)(t)&&(!(0,Ie().yU)(t)&&t.canEdit()))))))))}function He(e){return!fe().l.state&&e.blocks.every((t=>{if(E().QT(e.publicEditMode))return!1;const o=be().SE();return o?o.canEditCollection():t.canEdit()}))}function We(e){return!fe().l.state&&(!er()&&e.blocks.every((t=>!E().QT(e.publicEditMode)&&(!t.pathIsDead()&&(!t.isPlaceholderWorkflowTemplateBlock()&&(t.isCollectionView()?t.canEditCollection():t.canEdit()))))))}function Ke(){return!!pe().default.state.undoStack.at(-1)}function Ge(){return!!pe().default.state.redoStack.at(-1)}function $e(e){let{environment:t,publicEditMode:o,blocks:n}=e;if(fe().l.state)return!1;const{id:r}=t.currentUser;return!!r&&(!E().QT(o)&&n.every((e=>{const o=(0,E().A$)({userId:r,store:e}).filter((t=>{let{type:o,role:n}=t;if(!n)return!1;const r=e.isCollectionView()||e.isTemplate()?d().lg(n):d().p2(n);return"public_permission"!==o&&r}));return o.length>0&&E().MI({environment:t,blockStore:e})})))}function Ye(e){if(e.blocks&&1===e.blocks.length){const[o]=e.blocks;if(o.isCollectionView()){var t;const e=null===(t=o.getCollectionStore())||void 0===t?void 0:t.getValue();if(e)return(0,a().ek)(e)||(0,a().SJ)(e)||(0,a().Qu)(e)}}return!1}function Qe(e){if(e.blocks&&1===e.blocks.length){const[o]=e.blocks;if(o.isCollectionView()){var t;const e=null===(t=o.getCollectionStore())||void 0===t?void 0:t.getValue();if(e)return(0,a().SJ)(e)}}return!1}function Ze(e){return e.blocks.every((e=>(0,Ie().fc)(e)))}function Xe(e){return e.blocks.every((e=>(0,Ie().yU)(e)))}function Je(e){return!!(0,we().pB)()&&e.blocks.every((e=>{if(!e.isCollectionView())return!1;const t=e.getCollectionStore();return!!t&&t.isExternallyImportedAndSyncedCollection()}))}function et(e){return!fe().l.state&&e.blocks.every((e=>e.canAdmin()))}function tt(e){return e.blocks.some((e=>Boolean(j().K.findBlockFromStoreWithMethod(e,"activate"))))}function ot(e){return e.blocks.every((e=>e.isRestricted()))}function nt(e){var t;const{currentSpaceStore:o}=Y().default.state,{currentUser:n}=e.environment;return void 0!==n.id&&Boolean(null===(t=(0,L().sE)(o,n.id))||void 0===t?void 0:t.isWorkspaceOwner())}function rt(){const e=M().ao();return!e||!e.isLocked()}function it(){const e=M().ao();return Boolean(null==e?void 0:e.getAssociatedCollectionStore())}function at(e){return e.blocks.length>0&&e.blocks.some((e=>e.isLocked()))}function st(e){return e.blocks.length>0}function lt(e){return e.blocks.some((e=>{const t=M().ao();return!(!t||!(0,Ie().fc)(t))||!!(t&&t.isNonEditableState()&&t.uiContains(e)&&t!==e)}))}function ct(e){return!!er()||e.blocks.some((e=>e.pathIsDead()))}function dt(e){return e.blocks.some((e=>{const{mainEditorCurrentBlockStore:t}=Y().default.state,o=j().K.findCollectionViewBlockFromStore(e),n=o&&"collectionContextStore"in o?o.collectionContextStore:void 0,r=null==n?void 0:n.collectionStore();return!(!n||!r||n.permissionScopesStore.state.canEditContent)||Boolean(t&&t.isCollectionView()&&t.isNonEditableState()&&t.uiContains(e)&&t!==e)}))}function ut(e){return e.blocks.every((e=>{const t=e.getType(),o=e.getFormat();return Boolean((0,n().Db)(t,o)&&!(0,n().$I)(t))}))}function pt(e){var t;const o=null===(t=Y().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id,r=e.blocks.at(0);if(r){const e=r.getType(),t=r.getFormat(),i=r.id;return Boolean(i===o&&(0,n().Db)(e,t))}return!1}function mt(e){return e.blocks.every((e=>{const t=e.getRecordStoreUIParent();return Boolean(t&&e.isDefined()&&e.getParentId()!==t.id)}))}function gt(e){return e.blocks.every((e=>{const t=e.getRecordStoreUIParent();return Boolean(t&&t.canEdit()&&e.isDefined()&&e.getParentId()!==t.id)}))}function ft(e){if(e.blocks){const t=e.blocks.at(0);return Boolean(t&&t.isDefined()&&t.getType()===n().xd.file&&t.getProperties().source)}return!1}function vt(e){if(!e.blocks)return!1;const t=e.blocks.at(0),o=t&&t.getProperties().source;if(!o)return!1;const n=i().MO(o);return!!n&&s()._J(n)}function ht(e){if(e.blocks){const t=e.blocks.at(0);return Boolean((null==t?void 0:t.isType(n().Ib))&&t.getProperties())}return!1}function _t(e){if(e.blocks){const t=e.blocks.at(0),o=null==t?void 0:t.getType();return Boolean(o&&(0,n().bI)(o))}return!1}function bt(e){if(e.blocks){var t;const o=e.blocks.at(0);return Boolean(null==o||null===(t=o.getModel())||void 0===t?void 0:t.isType(n().IA))}return!1}function yt(e){return t=>{if(t.blocks){const o=t.blocks.at(0);return Boolean(null==o?void 0:o.getProperties()[e])}return!1}}yt("source");function St(e){if(e.blocks){const t=e.blocks.at(0);if(!t)return!1;if(t.pathIsDead())return!1;if((0,Z().dL)(t))return!1;if(t.getType()===n().xd.transclusionReference){const e=t.getTransclusionReferenceTargetStore();return Boolean(e&&e.canEdit())}return!1}return!1}function wt(e){if(e.blocks){const t=e.blocks.at(0);return!!t&&(!t.pathIsDead()&&(!(0,Z().dL)(t)&&t.getType()===n().xd.transclusionContainer))}return!1}function kt(e){return e.blocks.every((e=>{const t=e.getModel(),o=e.getRecordStoreUIParent();return Boolean(t&&t.isType(n().Si)&&t.getType()!==n().xd.transclusionContainer&&e.getParentTable()!==g().Vl&&o&&o.id===e.getParentId())}))}function It(e){return t=>{if(!t.blocks)return!1;const o=t.blocks.at(0);return Boolean(o&&w().Tn(o.getType)&&o.getType()===e)}}function At(e){return t=>w().Si(t.blocks,(t=>t&&w().Tn(t.getType)&&t.getType()===e))}function xt(e){const t=e.blocks.at(0);if(!t)return!1;const{language:o}=t.getProperties(),n=(0,S().q4_)(o);return u.includes(n)}function Ct(e){const t=e.blocks.at(0);if(!t)return!1;const{language:o}=t.getProperties();return"HTML"===(0,S().q4_)(o)}function Tt(e){return!1}function Mt(e){return()=>ne().default.checkGate({gateName:e})}function Pt(){return()=>"db_create_empty_state"===ne().default.getEligibleGroup({experimentId:"adoption_import_entry_point",defaultGroup:"control"})}function Bt(e){return t=>{if(1!==t.blocks.length)return!1;const o=t.blocks.at(0);if(!o)return!1;const n=o.getParentBlockStore(),r=null==n?void 0:n.getContentStores(),i=null==r?void 0:r.map((t=>t.getType()===e));if(!i||0===(null==i?void 0:i.length))return!1;const a=null==r?void 0:r.map((e=>e.id)).indexOf(o.id);return void 0!==a&&(0===a||!i[a-1])}}function Rt(e){return e.blocks.every((e=>{const t=null==e?void 0:e.getModel();return Boolean((null==t?void 0:t.isType(n().hc))&&e.getParentTable()!==g().Vl)}))}function Et(e){const t=M().ZO();return!!t&&e.blocks.every((e=>t.uiContains(e)&&t.id!==e.id))}function Dt(e){return e.blocks.every((e=>{const t=j().K.findBlockFromStoreWithMethod(e,"canRenderFullScreen");return Boolean(t&&t.canRenderFullScreen())}))}function Nt(e){let{environment:{device:t}}=e;return t.isElectron}function Lt(){return Boolean(te().A.state.isElectronHandlingZoom)}function Ft(e){let{environment:{device:t}}=e;return t.isWindows}function Ut(e){let{environment:{device:t}}=e;return t.isMac}function Ot(e){let{environment:{device:t}}=e;return t.isIOS}function Vt(e){let{environment:{device:t}}=e;return t.isAndroid}function jt(e){let{environment:{device:t}}=e;return t.isMobileNative}function zt(e){let{environment:{device:t}}=e;return t.isMobile}function qt(e){let{environment:{device:t}}=e;return t.isPhone}function Ht(e){let{environment:{device:t}}=e;return t.isNative}function Wt(e){let{environment:{device:t}}=e;return t.isMobileBrowser}function Kt(e){let{environment:{device:t}}=e;return!t.isMobile}function Gt(){return C().A.isAdminMode}function $t(){const e=M().ao();return(0,V().lU)(e)}function Yt(){return O().A.state.isOpen}function Qt(){return Boolean(ie().Ay.state.open)}function Zt(e){let{environment:t}=e;return Boolean(t.currentUser.isLoggedIn()||t.publicDomainUserId)}function Xt(){return J().A.state.online}function Jt(e){return!e.blocks.every((t=>{const o=t.inMemoryRecordCache===e.environment.defaultRecordCache.inMemoryRecordCache,n=t.inMemoryRecordCache.cacheFallbacks.has(e.environment.defaultRecordCache.inMemoryRecordCache);return o||n}))}function eo(e){return e.blocks.some((e=>e.isTemplate()))}function to(e){return e.blocks.some((e=>e.isCollectionViewPageWithContent()))}function oo(e){return e.blocks.some((e=>e.isAssociatedCollectionAPageTree()))}function no(e){return e.blocks.every((()=>!function(){const e=M().ao();return null==e?void 0:e.isCollectionViewPageWithContent()}()||Yo("page",!1)(e)))}function ro(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.isCollectionView()}return!1}function io(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.isType(n().xd.collectionView)}return!1}function ao(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.isType(n().xd.collectionViewPage)}return!1}function so(e){return t=>{if(t.blocks&&1===t.blocks.length){const[o]=t.blocks,n=j().K.findCollectionViewBlockFromStore(o);if(n&&"collectionContextStore"in n)return n.collectionContextStore.getViewType()===e}return!1}}function lo(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return 1===t.getCollectionViewStores().length}return!1}function co(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks,o=t.getCollectionStore();if(!o)return!1;const n=o.getSchema();return Object.values(n).map((e=>null==e?void 0:e.type)).every((e=>e&&H().gx[e]))}return!0}function uo(e){return D().UL(e.environment)}function po(e){return D().MN(e.environment)}function mo(){return oe().A.state.open}function go(){return T().A.state.open}function fo(){return se().A.state.open}function vo(){return G().A.state.open}function ho(){return"editing"===ve().default.state.mode}function _o(){return!((0,Te().y_)(S().Ifu.User)||(0,Te().y_)(S().Ifu.Bot)||(0,Te().y_)(S().Ifu.Date)||(0,Te().y_)(S().Ifu.Page))}function bo(){return ge().default.state.stores.length>0}function yo(e){return e.blocks.every((e=>e.isTopLevel()))}function So(e){const t=Y().default.state.currentSpaceStore;return(0,Ce().IL)(t)}function wo(e){return e.blocks.every((e=>Boolean(z().A.findOutlinerItemFromStore(e))))}function ko(e){return e.blocks.every((e=>{const t=z().A.findOutlinerItemFromStore(e);return Boolean(t&&t.isTopLevelItem&&"bookmarks"===t.type)}))}function Io(e){return e.blocks.every((e=>{const t=z().A.findOutlinerItemFromStore(e);return Boolean(t&&t.isTopLevelItem&&"shared"===t.type)}))}function Ao(e){const t=e.blocks.at(0);if(!t)return!1;const o=t.getParentBlockStore();return!!o&&o.isNonEditableState()}function xo(e){return e.blocks.some((e=>e.isNavigableBlockLocked()))}function Co(e){return!To(e)}function To(e){if(!ar())return!0;const t=e.blocks.at(0);if(t){if(t.getParentTable()===h().yK){const o=(0,Ae().Uo)(t);if(!o||!(0,ke().dp)({teamStore:o,environment:e.environment}))return!1}}return!0}function Mo(e){if(!e)return;const t=e.getParentPointer(),o=e.getRecordStoreUIParent();return(null==t?void 0:t.table)===h().yK&&o?ue().h4.createChildStore(o,t):Mo(e.getParentBlockStore())}function Po(e){const{id:t}=e.environment.currentUser;return!!t&&e.blocks.every((e=>{const o=e.getPermissionItems();return(0,c().lI)(o,t)}))}function Bo(e){const{currentSpaceViewStore:t}=Y().default.state,o=e.blocks.at(0);return Boolean(t&&o&&(0,Se().A)({spaceViewStore:t,pageId:o.id}))}function Ro(e){const t=M().ao(),o=e.blocks.at(0);return Boolean((null==o?void 0:o.id)===(null==t?void 0:t.id))}function Eo(e){return e.blocks.every((t=>Boolean(E().qb(e.environment,t))))}function Do(e){return e.blocks.every((e=>E().K1(e)))}function No(e){return Boolean(Y().default.state.mainEditorCurrentBlockStore)}function Lo(){var e,t;const o=M().ao(),n=null==o||null===(e=o.getSiteStore())||void 0===e?void 0:e.getModel();return!!n&&Boolean(null===(t=n.getHeader())||void 0===t?void 0:t.hideSearch)}function Fo(e){var t;const o=e.blocks.at(0);return Boolean((null==o?void 0:o.id)===(null===(t=le().default.peekTargetStore.state)||void 0===t?void 0:t.id))}function Uo(e){var t;const o=e.blocks.at(0);return Boolean(R().Gb()&&(null==o?void 0:o.id)===(null===(t=le().default.peekTargetStore.state)||void 0===t?void 0:t.id))}function Oo(e){return R().Gb()}function Vo(e){return e.blocks.every((e=>e.isNavigableBlock()))}function jo(e){return e.blocks.some((e=>e.pathIsDead()))}function zo(e){const t=e.blocks.at(0);return!!t&&(!!C().A.isAdminMode||!!t.canEdit()&&!e.environment.device.isMobile)}function qo(e){if(1!==e.blocks.length)return!1;const t=e.blocks.at(0);return!!t&&(0,M().sj)(t.id)}function Ho(e){return!e.blocks.some((e=>{const t=null==e?void 0:e.getSystemBlockTypeStore().getValue();return(0,r().mi)(t)}))}function Wo(e){return e.blocks.some((e=>{e.useCrdt()}))}function Ko(e){return e.blocks.every((e=>Boolean(e.findRecordStoreUIAncestor((e=>e instanceof ue().pS||e instanceof ue().Bv&&e.isCollectionView())).ancestor)))}function Go(e){let{blocks:t}=e;const o=null==t?void 0:t.at(0);return Boolean(o&&(0,_e().qr)(o))}function $o(e){let{blocks:t}=e;return x().Rd(t)}function Yo(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o=>o.blocks.every((o=>{const n=x().UH(o,t),r=null==n?void 0:n.collectionViewStore();return(null==r?void 0:r.getType())===e}))}function Qo(){const{currentSpaceStore:e}=Y().default.state;return Boolean(e&&e.canRead())}function Zo(){const{currentSpaceStore:e}=Y().default.state;return Boolean(e&&e.canEdit())}function Xo(e){if(C().A.isAdminMode)return!0;if(e.blocks.some((e=>{const t=(0,q().h)({blockId:e.id,setting:"disableExport"});return Boolean(null==t?void 0:t.disabled)})))return!1;if(So()&&!et(e))return!1;const t=function(e){let{environment:t}=e;const{currentSpaceStore:o}=Y().default.state;if(!o)return!1;const n=de().A.getData(t,{spaceId:o.id});return o.isDefined()?!o.getDisableExport():n?!n.disableExport:Gt()}(e),{environment:o,blocks:n}=e;return n.every((e=>{const n=(0,Ae().Uo)(e),r=null==n?void 0:n.getModel();return n&&r?(!o.currentUser.id||!(0,y().CG)({team:r,userId:o.currentUser.id}))&&!n.getDisableExport():t}))}function Jo(){const{currentSpaceStore:e}=Y().default.state;return!!e&&!e.getDisableMoveToSpace()}function en(e){return!fe().l.state&&(!!e.blocks.every((e=>e.canEdit()))&&!!Eo(e))}function tn(e){return e.blocks.every((t=>{var o;return"edit"===(null===(o=ce().A.getMode(e.environment,t))||void 0===o?void 0:o.permission)}))}function on(e){if(!Fe(e))return!1;const t=e.blocks.filter((e=>{const t=e.recordStoreUIParentStore,o=e.getParentStore();return t&&o&&t.id===o.id}));return 0===t.length||qe({...e,blocks:t})}function nn(e){let{environment:t}=e;const o=(0,M().rp)(t).state;return Boolean(o&&o.showSharedOverflowButton)}function rn(){return(0,he().Ck)()}function an(e){let{blocks:t}=e;return t.some((e=>Boolean(e.findRecordStoreUIAncestor((e=>e instanceof ue().Bv&&e.isTransclusionType())).ancestor)))}function sn(e){let{environment:t}=e;return ne().default.checkGate({gateName:"lucy-in-the-sky-with-tab-blocks"})}function ln(e){let{environment:t}=e;return ne().default.checkGate({gateName:"slide_block"})}function cn(){return ne().default.checkGate({gateName:"meeting_notes"})}function dn(e){let{blocks:t}=e;const o=t.at(0);if(!o)return!1;const r=o.getType(),i=o.getFormat();return Boolean(i.block_width)&&!Boolean(i.block_page_width)&&!Boolean(i.block_full_width)&&Boolean(r&&(0,n().E8)(r))}function un(e){let{environment:t}=e;return(0,ye().Y)()}function pn(e){var t;let{blocks:o}=e;const n=o.at(0);return!!n&&Boolean(null===(t=(0,xe().x2)(n))||void 0===t||null===(t=t.slackIntegrationStore)||void 0===t?void 0:t.isReady())}function mn(){var e;const{currentSpaceStore:t}=Y().default.state,o=null==t||null===(e=t.getBotSettingsStore())||void 0===e?void 0:e.getValue();return!(0,_().az)(o)||Boolean((null==o?void 0:o.integration_approval_statuses)&&o.integration_approval_statuses[l().Jc])}function gn(e){var t;let{blocks:o}=e;const n=o.at(0);if(!n)return!1;const{slackIntegrationStore:r}=(0,xe().x2)(n);return Boolean(r.isReady()&&!(null!=r&&null!==(t=r.getKeyStore("enabled"))&&void 0!==t&&t.getValue()))}function fn(e){var t;let{blocks:o}=e;const n=o.at(0);if(!n)return!1;const{blockStore:r,slackIntegrationStore:i}=(0,xe().x2)(n);return Boolean(i.isReady()&&(null==i||null===(t=i.getKeyStore("enabled"))||void 0===t?void 0:t.getValue())&&r.id!==n.id)}function vn(e){var t;let{blocks:o}=e;const n=o.at(0);if(!n)return!1;const{blockStore:r,slackIntegrationStore:i}=(0,xe().x2)(n);return Boolean(i.isReady()&&(null==i||null===(t=i.getKeyStore("enabled"))||void 0===t?void 0:t.getValue())&&r.id===n.id)}function hn(e){var t;let{blocks:o}=e;return(null===(t=o.at(0))||void 0===t?void 0:t.getSpaceId())!==v().Zz}function _n(e){var t;return 1===e.blocks.length&&(null===(t=e.blocks.at(0))||void 0===t?void 0:t.getType())===n().xd.form}function bn(e){var t;const{environment:o}=e,n=e.blocks.at(0);return!(!n||!n.isFormBlock())&&(o.currentUser.id===n.getCreatedById()&&Boolean(null===(t=n.getFormBlockParentBlockStore())||void 0===t?void 0:t.canEditCollection()))}function yn(e){var t;return 1===e.blocks.length&&(null===(t=e.blocks.at(0))||void 0===t?void 0:t.getType())===n().xd.table}function Sn(e){const t=W().A.state;return t.isActive&&1===e.blocks.length&&e.blocks.at(0)===t.simpleTableStore}function wn(e){let{blocks:t}=e;return t.some((e=>Boolean(e.isImmediateColumnChild())))}function kn(e){const t=W().A.state;if(!t.isActive)return!1;const{simpleTableStore:o}=t;return H().MW(o)>1}function In(e){const t=W().A.state;if(!t.isActive)return!1;const{simpleTableStore:o,selection:n}=t,r=0===n.start.row&&n.end.row===H().yv(o)-1,i=0<=n.start.col&&n.start.col<=n.end.col&&n.start.col<=H().MW(o)-1;return"column"===n.type&&i&&r}function An(e){const t=W().A.state;if(!t.isActive)return!1;const{simpleTableStore:o,selection:n}=t,r=0===n.start.row&&n.end.row===H().yv(o)-1,i=0===n.start.col&&0===n.end.col;return"column"===n.type&&i&&r}function xn(e){const t=W().A.state;if(!t.isActive)return!1;const{simpleTableStore:o}=t;return H().yv(o)>1}function Cn(e){const t=W().A.state;if(!t.isActive)return!1;const{simpleTableStore:o,selection:n}=t,r=0===n.start.col&&n.end.col===H().MW(o)-1,i=0<=n.start.row&&n.start.row<=n.end.row&&n.start.row<=H().yv(o)-1;return"row"===n.type&&i&&r}function Tn(e){const t=W().A.state;if(!t.isActive)return!1;const{simpleTableStore:o,selection:n}=t,r=0===n.start.col&&n.end.col===H().MW(o)-1,i=0===n.start.row&&0===n.end.row;return"row"===n.type&&i&&r}function Mn(e){var t;let{environment:o}=e;const{currentSpaceStore:n}=Y().default.state;if(null==n||!n.id)return!1;const r=null===(t=re().A.getData(o,{spaceId:null==n?void 0:n.id}))||void 0===t?void 0:t.billingData;return"free"===(0,b().AI)(r)}function Pn(e){if(1!==e.blocks.length)return!1;const t=e.blocks.at(0);if(!t)return!1;const o=t.getParentStore();return!(!o||o.table!==m().ev)&&o.isType(n().xd.tab)}function Bn(e){const t=e.blocks.at(0);return Boolean(t&&t.isCollectionView()&&t.getCollectionViewSourceCollectionStore())}function Rn(e){if(!Ee(e))return!1;const t=e.blocks.at(0);return!!t&&(0,Me().S)(t)}function En(e){return function(e){let{environment:t,blocks:o}=e;if(!ar())return!1;if(!B().w8({environment:t,blocks:o}))return!1;const n=t.currentUser.id,{currentSpaceStore:r}=Y().default.state;if(!n||null==r||!r.isDefined())return!1;if(!(0,N().sx)({environment:t,spaceStore:r}))return!1;for(const a of o){var i;if(!a.isPageBlock())return!1;if("team"!==(null===(i=z().A.findOutlinerItemFromStore(a))||void 0===i?void 0:i.type))return!1;const e=Mo(a);if(null==e||!e.isOwner(n))return!1}return!0}(e)&&Kt(e)}function Dn(){const{currentSpaceStore:e}=Y().default.state,t=null==e?void 0:e.getBotSettingsStore().getValue();return!(0,_().az)(t)||Boolean((null==t?void 0:t.integration_approval_statuses)&&t.integration_approval_statuses[l().IQ])}function Nn(e){var t;return Boolean(null===(t=e.blocks.at(0))||void 0===t?void 0:t.getFormat().is_placeholder)}function Ln(e){var t;return Boolean((null===(t=e.blocks.at(0))||void 0===t||null===(t=t.getFormat().alias_pointer)||void 0===t?void 0:t.table)===f().SN)}function Fn(){const e=M().ao();if(!e||!e.hasContent())return!1;if(1===e.getContentLength()){const t=e.getContentStores()[0].getTitleStore();if(G().A.state.open&&G().A.state.textStore===t)return!1;if(X().default.isEditingEmptyBlock())return!1}return!0}function Un(){return Boolean(te().A.state.isElectronUsingCommandNumber)}function On(e){return e.blocks.some(A().u)}function Vn(e){return e.blocks.every((e=>{const t=null==e?void 0:e.getModel();return Boolean(null==t?void 0:t.isType(n().XC))}))}function jn(e){return e.blocks[0].isFirstBlockInCalloutV2Block()}function zn(){return me().default.state.open}function qn(e){const{environment:t}=e,{device:o}=t,n="quickSearch"===t.RouterStore.state.route.name;return o.isElectron&&n}function Hn(e){const{environment:t}=e,o=t.RouterStore.state.route;return(0,p().bh)(o)}function Wn(e){const{environment:t}=e;return e.blocks.some((e=>(0,U().Y)({environment:t,blockStore:e})))}function Kn(e){const t=e.blocks.at(0);return Boolean((null==t?void 0:t.isType("image"))&&(0,F().AS)(t.getOriginalImageSource()))}function Gn(e){const t=e.blocks.at(0);return Boolean(null==t?void 0:t.isType("image"))}function $n(e){const t=e.blocks.at(0);return Boolean(null==t?void 0:t.getFormat().image_hyperlink)}function Yn(){const e=M().ao();return"page"===(null==e?void 0:e.getType())}function Qn(e){var t;return Boolean(1===e.blocks.length&&(null===(t=e.blocks.at(0))||void 0===t?void 0:t.isDictatableBlock()))}function Zn(e){const t=e.blocks.at(0);return Boolean((null==t?void 0:t.isType("copy_indicator"))&&Date.now()-t.getCreatedTime()>k().nD)}function Xn(e){const t=e.blocks.at(0);return!!t&&!K().hn(t)}function Jn(e){const t=e.blocks.at(0);return!!t&&!K().Vg(t)}function er(){const e=M().ao();return Boolean(null==e?void 0:e.pathIsDead())}function tr(e){return or(e.blocks.at(0))}function or(e){if(!e)return!1;if(!e.isType(n().xd.alias))return!1;const t=e.getAliasTargetStore();return Boolean((null==t?void 0:t.isTable(m().ev))&&t instanceof ue().Bv&&t.isType(n().xd.form))}function nr(){return Boolean(Q().zD.isFullPageTranslateEnabled())}function rr(e){const t=e.blocks.at(0);return Mt("translate_template_top_bar")(e)&&function(e){if(!e)return!1;const t=I().A.state;return ae().M.isTemplateListing(e.id)&&t}(t)}function ir(e){const t=e.blocks.at(0);return!!t&&t.isPageBlock()}function ar(){return(0,N().zI)()>0}function sr(e){const t=e.blocks.at(0);return!!t&&t.isPlaceholderWorkflowTemplateBlock()}},878423:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(737550);class n extends(()=>o(757695))().default{getInitialState(){return{caches:{}}}initializeCache(e,t){this.setState({caches:{...this.state.caches,[e]:{hasUnsavedChanges:!1,inMemoryRecordCache:t}}})}updateUnsavedCacheState(e,t){var o;(null===(o=this.state.caches[e])||void 0===o?void 0:o.hasUnsavedChanges)!==t&&this.setState({caches:{...this.state.caches,[e]:{...this.state.caches[e],hasUnsavedChanges:t}}})}clearCache(e){var t;const o={...this.state.caches};null===(t=o[e])||void 0===t||t.inMemoryRecordCache.clearCache(),o[e].hasUnsavedChanges=!1,this.setState({caches:o})}expire(e){var t;const o={...this.state.caches};null===(t=o[e])||void 0===t||t.inMemoryRecordCache.expire(),delete o[e],this.setState({caches:o})}doesAnyCacheHaveUnsavedChanges(){return(0,o(534177).WP)(this.state.caches).some((e=>{let[t,o]=e;return o.hasUnsavedChanges}))}}const r=new n},878523:(e,t,o)=>{o.d(t,{Bi:()=>a,E9:()=>w,Ie:()=>g,Jg:()=>S,MP:()=>k,MR:()=>y,QP:()=>m,Sd:()=>A,Xy:()=>c,ZM:()=>b,bJ:()=>v,fq:()=>I,gN:()=>_,j4:()=>d,mw:()=>h,nq:()=>l,o2:()=>s,v3:()=>f,yO:()=>p,z0:()=>u});var n=()=>o(116225),r=()=>o(989423),i=()=>o(508496);function a(e,t){r().u4({environment:e,event:{eventName:"click_updates_sidebar_empty_comments_cta",eventProperties:t}})}function s(e,t){r().vd(e,"open_block_discussion_menu",t)}function l(e){let{environment:t,from:o,notificationId:n,activityId:i}=e;r().vd(t,"open_reply_discussion_menu",{from:o,notificationId:n,activityId:i})}function c(e){let{environment:t,from:o,notificationId:n,activityId:i}=e;r().vd(t,"close_reply_discussion_menu",{from:o,notificationId:n,activityId:i})}function d(e,t){r().vd(e,"open_new_block_discussion",t)}function u(e,t){r().vd(e,"open_new_inline_discussion",t)}function p(e){r().vd(e,"discard_new_discussion_dialog_show")}function m(e){r().vd(e,"discard_new_discussion_dialog_confirm")}function g(e){r().vd(e,"discard_new_discussion_dialog_cancel")}function f(e,t){r().vd(e,"create_block_discussion",t),i().default.logEvent("create_block_discussion"),n().u4({name:"create_block_discussion"})}function v(e,t){r().vd(e,"create_inline_discussion",t),i().default.logEvent("create_inline_discussion"),n().u4({name:"create_inline_discussion"})}function h(e,t){r().u4({environment:e,event:{eventName:"add_comment",eventProperties:t}}),i().default.logEvent("add_comment",t.from),n().u4({name:"add_comment"})}function _(e,t){r().vd(e,"delete_comment",t)}function b(e,t){r().u4({environment:e,event:{eventName:"edit_comment",eventProperties:t}})}function y(e,t){r().vd(e,"resolve_discussion",t),i().default.logEvent("resolve_discussion",t.from)}function S(e,t){r().vd(e,"reopen_discussion",t)}function w(e,t){r().vd(e,"click_discussion",t)}function k(e){const{environment:t,...o}=e;r().u4({environment:t,event:{eventName:"add_reaction",eventProperties:o}}),i().default.logEvent("add_reaction",o.reaction_value),n().u4({name:"add_reaction"})}function I(e){const{environment:t,...o}=e;r().vd(t,"remove_reaction",o)}function A(e,t){r().vd(e,"comment_upload_attachments",t)}},878855:(e,t,o)=>{o.d(t,{A:()=>n});const n=new class{constructor(){this.lruKeyStore=new(o(178624).R)({key:"frequentlyUsedSlashMenuActions",namespace:"SlashMenu",important:!1,trackingType:"necessary"})}load(){const e=this.lruKeyStore.state;let t={};try{t=e&&JSON.parse(e)||{}}catch(o){}return t}get(){return this.load()}track(e){const t=this.load(),o=t[e.key];void 0!==(null==o?void 0:o.frequency)&&void 0!==(null==o?void 0:o.lastAccessed)?(o.frequency+=1,o.lastAccessed=Date.now()):t[e.key]={frequency:1,lastAccessed:Date.now()},this.lruKeyStore.setState(JSON.stringify(t))}}},880922:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("suggestion",{viewBox:"0 0 16 16",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M8.651 8.465l-1.397.54c-.088.035-.17.018-.244-.053-.07-.07-.086-.15-.046-.237l.567-1.378 5.945-5.939 1.127 1.12-5.952 5.947zm6.447-6.427L13.97.91l.567-.567a.702.702 0 01.474-.217.615.615 0 01.468.165l.198.184c.136.14.2.306.191.495a.718.718 0 01-.217.494l-.554.574z"}),(0,n.jsx)("path",{d:"M14.084 5.065V9.65c0 .611-.152 1.072-.455 1.384-.299.308-.76.462-1.384.462h-4.1a1.37 1.37 0 00-.488.072 1.147 1.147 0 00-.389.277l-2.09 2.07v-1.879c0-.197-.043-.336-.131-.415-.084-.083-.218-.125-.402-.125H3.74c-.62 0-1.08-.154-1.384-.462-.299-.312-.448-.773-.448-1.384V4.62c0-.606.15-1.063.448-1.37.303-.313.765-.469 1.384-.469h6.36l1.3-1.298H3.71c-.664 0-1.227.123-1.688.369-.457.246-.806.6-1.048 1.061C.73 3.37.61 3.926.61 4.581v5.115c0 .655.121 1.213.363 1.675.246.457.595.808 1.048 1.054.457.246 1.004.37 1.641.37h.356v1.621c0 .294.073.527.218.699.15.171.356.257.62.257.184 0 .358-.049.52-.145a3.65 3.65 0 00.58-.435l2.255-1.998h4.073c.66 0 1.22-.123 1.681-.369a2.492 2.492 0 001.055-1.054c.242-.462.363-1.02.363-1.675V4.581c0-.267-.02-.518-.06-.752l-.208.215-1.031 1.021z"})]})})},881690:(e,t,o)=>{o.d(t,{A:()=>d});var n=o(296540),r=()=>o(401497),i=()=>o(784892),a=()=>o(959013),s=()=>o(284371),l=()=>o(962730),c=o(474848);const d=function(e){let{backgroundColor:t,color:a,description:s,disabled:d,disabledFeedback:u,showColoredDot:p,format:m,isRound:f,isSingle:v,isStrikedThrough:h,onClickRemove:_,shouldShrink:b,shouldWrap:y,showRemoveButton:S,showTooltip:w="never",style:k,tooltip:I,tooltipPlacement:A,tooltipOriginGap:x,value:C}=e;const T=(0,r().IS)((e=>{const{height:n,fontSize:r,paddingLeft:s,margin:l}=(0,i().hA)(m),c=f?s+1:s;return{token:{display:v?"inline-flex":"flex",alignItems:"center",flexShrink:v||b?1:0,minWidth:0,maxWidth:"100%",height:n,margin:v?0:l,borderRadius:f?n/2:3,paddingLeft:c,paddingRight:S?0:f?c+2:c,lineHeight:"120%",opacity:d&&u?.4:void 0,fontSize:r,color:a||("light"===e.mode?e.regularTextColor:o(100622).Ay.whiteWithAlpha(.7)),background:t||e.legacyDefaultSelectColor,...y&&{height:void 0,paddingTop:4,paddingBottom:4},...k},tooltipDescription:{color:e.text.contrastSecondary}}}),[t,a,d,u,m,f,v,b,y,S,k]),M=(0,n.useRef)(null),P={disabled:d,format:m,isStrikedThrough:h,onClickRemove:_,shouldWrap:y,showColoredDot:p,showRemoveButton:S,value:C};return"always"===w||"overflow"===w&&function(e){return Boolean(e.current&&e.current.offsetWidth<e.current.scrollWidth)}(M)||void 0!==I?(0,c.jsx)(o(859428).A,{placement:A??l().W.Right,renderTooltip:e=>(0,c.jsx)("div",{...e,style:o(673730).Q$,children:I||(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{children:C}),s&&(0,c.jsx)("div",{style:T.tooltipDescription,children:s})]})}),originGap:void 0!==x?x:A===l().W.Top?0:20,textWrap:!0,render:e=>(0,c.jsx)("div",{style:T.token,...e,onMouseEnter:t=>{var o;null===(o=e.onMouseEnter)||void 0===o||o.call(e,t)},children:(0,c.jsx)(g,{ref:M,...P})})}):(0,c.jsx)("div",{style:T.token,children:(0,c.jsx)(g,{...P})})},u=(0,a().YK)({removeToken:{id:"token.removeToken",defaultMessage:"Remove token"}});function p(e){let{format:t,showRemoveButton:n,onClickRemove:s,disabled:l}=e;const{height:d}=(0,i().hA)(t),p=(0,a().tz)(),m=(0,r().IS)((e=>({removeButton:{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,marginLeft:2,marginRight:2,width:d,height:d}})),[d]);return n?(0,c.jsx)(o(285790).A,{className:"notion-token-remove-button",mobileFeedback:!0,style:m.removeButton,icon:e=>(0,c.jsx)(o(460292).Q,{iconGroup:o(949306).Q,variantName:"default",colorName:"grayPrimary",style:e}),onClick:s,ariaLabel:p.formatMessage(u.removeToken),disabled:l,disabledFeedback:!1}):null}function m(e){let{color:t,format:o}=e;const n=(0,r().IS)((e=>{const n=(0,i().Ls)(o),r="default"===t?"gray":t;return{dot:{marginRight:o===i().NY.ExtremeSmall?2:5,borderRadius:99,height:n,width:n,backgroundColor:"light"===e.mode?e.accentColors[r][400]:e.accentColors[r][700],display:"inline-flex",flexShrink:0}}}),[o,t]);return(0,c.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,c.jsx)("div",{style:n.dot})})}const g=n.forwardRef((function(e,t){let{format:o,shouldWrap:n,isStrikedThrough:r,showColoredDot:a,value:l,showRemoveButton:d,onClickRemove:u,disabled:g}=e;const{height:f}=(0,i().hA)(o);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{style:{...n?{overflowWrap:"anywhere"}:s().RC,textDecoration:r?"line-through":void 0,display:"inline-flex",alignItems:"center",height:f,lineHeight:`${f}px`},children:[a?(0,c.jsx)(m,{color:a,format:o}):null,(0,c.jsx)("span",{style:{...s().RC},ref:t,children:l})]}),(0,c.jsx)(p,{format:o,showRemoveButton:d,onClickRemove:u,disabled:g})]})}))},884107:(e,t,o)=>{o.d(t,{R:()=>n});const n={clipboardActions:new(o(645873).O2)("clipboardActions",(async()=>await Promise.all([o.e(62475),o.e(3151),o.e(98629),o.e(42838),o.e(28721),o.e(69184)]).then(o.bind(o,552484))))}},885110:(e,t,o)=>{o.d(t,{Z:()=>s});var n=()=>o(989423),r=()=>o(186445),i=()=>o(351360),a=()=>o(449506);async function s(e){let{environment:t,collectionContextStore:o,collectionViewId:s,from:l}=e;const c=i().default.state.currentSpaceStore;if(!c||!s)return;const d=new Map(o.updateFreeChartsResultStore.state);d.set(s,{isPending:!0,value:void 0}),o.updateFreeChartsResultStore.setState(d);const u=(0,r().s0)(),p=await(0,n().TZ)(t),m={spaceId:c.id,collectionViewId:s,from:l,pageId:u,deviceId:p},g=await a().callApi({eventName:"updateFreeCharts",environment:t,data:m});if("success"===g.type){const e=new Map(o.updateFreeChartsResultStore.state);e.set(s,{isPending:!1,value:g.data.can_view_chart}),o.updateFreeChartsResultStore.setState(e)}else{const e=new Map(o.updateFreeChartsResultStore.state);e.set(s,{isPending:!1,value:void 0}),o.updateFreeChartsResultStore.setState(e)}return g}},886564:(e,t,o)=>{o.d(t,{A:()=>n});const n={provider:void 0,logInvertedTextOperationError(e){const{invertedOperation:t,maybeRemappedInvertedOperation:n,transaction:r,errorCode:i}=e;if(this.provider)return this.provider.logInvertedTextOperationError(e);const a=r.getUserActionForAnalyticsPurposesOnly(),{command:s}=t,l=`Applying inverted text operation "${s}" from transaction "${a}" failed with error "${i}".`;o(857639).log({level:"error",from:"transactionDebugHelpers",type:"crdt:logInvertedTextOperationError",error:{message:l},data:{userAction:a,operation:s,errorName:i}})},isDebuggingEnabled(){return Boolean(this.provider&&!0)}}},886901:(e,t,o)=>{o.d(t,{Ay:()=>v,vn:()=>g});o(296540);var n=()=>o(401497),r=()=>o(650225),i=()=>o(959013),a=()=>o(284371),s=()=>o(11048),l=()=>o(155004),c=()=>o(285790),d=()=>o(257120),u=()=>o(359848),p=o(474848);const m=3;let g=function(e){return e[e.PushContent=0]="PushContent",e[e.FloatRight=1]="FloatRight",e}({});const f=(0,i().YK)({commentsAriaLabel:{defaultMessage:"{count, plural, one {1 comment} other {{count} comments}}",id:"comments.components.discussionindicator.commentAriaLabel"},suggestionsAriaLabel:{defaultMessage:"{count, plural, one {1 suggestion} other {{count} suggestions}}",id:"comments.components.discussionindicator.suggestionAriaLabel"},reactionsAriaLabel:{defaultMessage:"{count, plural, one {1 reaction} other {{count} reactions}}",id:"comments.components.discussionindicator.reactionsAriaLabel"}});function v(e){const t=(0,i().tz)(),{store:o,recursivelyLoadAllDiscussions:l,onlyCountBlockLevelDiscussions:g,property_id:v}=e,{showIndicator:_,formattedReactionCount:b,onlySuggestions:y,icon:S,showReactionsIcon:w,onlyHasDraftIndicator:k,formattedCommentCount:I,handleClick:A,discussionIsSelected:x,commentsCount:C,shouldShowDraftIndicator:T}=(0,d().A)({store:o,recursivelyLoadAllDiscussions:l,onlyCountBlockLevelDiscussions:g,propertyId:v}),M=(0,n().IS)((e=>({iconButton:{position:"relative",alignSelf:"flex-start",marginLeft:4,marginTop:m,background:x?e.selectLightGray[100]:void 0},draftIconButton:{position:"relative",alignSelf:"flex-start",marginTop:3,background:x?e.selectLightGray[100]:void 0,width:24,marginLeft:5},icon:{height:14,width:14,color:e.lightTextColor},commentCount:{marginLeft:2,color:e.lightTextColor,fontWeight:a().Wy.semibold},draftCommentCount:{marginLeft:2,color:e.icon.tertiary,fontWeight:a().Wy.semibold},reactIcon:{width:16,height:16,marginLeft:"-2px"},relativeDiv:{position:"relative"}})),[x]);return(0,p.jsx)(s().A,{name:"DiscussionIndicatorInner",children:_&&(0,p.jsxs)(h,{format:e.getFormat(),children:[(C>0||k)&&(0,p.jsxs)("div",{style:M.relativeDiv,children:[(0,p.jsx)(c().A,{ariaLabel:y?t.formatMessage(f.suggestionsAriaLabel,{count:I}):t.formatMessage(f.commentsAriaLabel,{count:I}),icon:S,style:M.iconButton,iconStyle:M.icon,onClick:A,caption:(0,p.jsx)("span",{style:T?M.draftCommentCount:M.commentCount,children:I})}),T&&(0,p.jsx)(u().h,{onlyShowDraftDot:!0})]}),w&&(0,p.jsx)(c().A,{ariaLabel:t.formatMessage(f.reactionsAriaLabel,{count:b}),icon:r().l,style:M.iconButton,iconStyle:M.reactIcon,onClick:A,caption:(0,p.jsx)("span",{style:M.commentCount,children:b})})]})})}function h(e){return e.format===g.FloatRight?(0,p.jsx)(l().s,{allowSelectionWithin:!1,style:{width:0,height:0},children:e.children}):(0,p.jsx)(p.Fragment,{children:e.children})}},887146:(e,t,o)=>{o.d(t,{i:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("dragHandle",{viewBox:"0 0 10 10",svg:(0,n.jsx)("path",{d:"M3,2 C2.44771525,2 2,1.55228475 2,1 C2,0.44771525 2.44771525,0 3,0 C3.55228475,0 4,0.44771525 4,1 C4,1.55228475 3.55228475,2 3,2 Z M3,6 C2.44771525,6 2,5.55228475 2,5 C2,4.44771525 2.44771525,4 3,4 C3.55228475,4 4,4.44771525 4,5 C4,5.55228475 3.55228475,6 3,6 Z M3,10 C2.44771525,10 2,9.55228475 2,9 C2,8.44771525 2.44771525,8 3,8 C3.55228475,8 4,8.44771525 4,9 C4,9.55228475 3.55228475,10 3,10 Z M7,2 C6.44771525,2 6,1.55228475 6,1 C6,0.44771525 6.44771525,0 7,0 C7.55228475,0 8,0.44771525 8,1 C8,1.55228475 7.55228475,2 7,2 Z M7,6 C6.44771525,6 6,5.55228475 6,5 C6,4.44771525 6.44771525,4 7,4 C7.55228475,4 8,4.44771525 8,5 C8,5.55228475 7.55228475,6 7,6 Z M7,10 C6.44771525,10 6,9.55228475 6,9 C6,8.44771525 6.44771525,8 7,8 C7.55228475,8 8,8.44771525 8,9 C8,9.55228475 7.55228475,10 7,10 Z"})})},890754:(e,t,o)=>{o.r(t),o.d(t,{NEW_CHAT_THREAD_ID:()=>c,getChatSidebarState:()=>d,getIsChatSidebarOpen:()=>m,useChatSidebarState:()=>u,useIsChatSidebarOpen:()=>p});var n=()=>o(484714),r=()=>o(56366),i=()=>o(498212),a=()=>o(351360),s=()=>o(508496),l=()=>o(564037);const c="new";function d(e){const{RouterStore:t}=e,{route:o}=t.state,n=function(e){if("page"!==e.name)return;if(e.chatThreadId===c)return c;return(0,i().ZA)(e.chatThreadId)}(o);if(!n)return;const r=function(e){if("page"!==e.name)return;return(0,i().ZA)(e.workflowStepId)}(o),s=a().default.state.mainEditorCurrentBlockStore;if(null!=s&&s.isCollectionView()&&"page"===o.name&&void 0!==o.workflowViewType){if(!(0,l().getIsWorkflowEditorOpen)(e))return;return{chatThreadId:n,workflowStepId:r,type:"app_builder",collectionViewBlockStore:s}}}function u(){const e=(0,n().v3)();return(0,r().K8)((()=>d(e)),[e])}function p(){const e=(0,n().v3)();return(0,r().K8)((()=>m(e)),[e])}function m(e){return!!s().default.checkGate({gateName:"workflows"})&&void 0!==d(e)}},891078:(e,t,o)=>{o.d(t,{HX:()=>A,ME:()=>M,NW:()=>w,VE:()=>I,bx:()=>k,i0:()=>T,pW:()=>x,qu:()=>C,ty:()=>P});var n=o(296540),r=()=>o(662303),i=()=>o(484714),a=()=>o(792485),s=()=>o(790748),l=()=>o(56366),c=()=>o(401497),d=()=>o(983650),u=()=>o(100622),p=()=>o(284371),m=()=>o(835066),g=()=>o(11048),f=()=>o(731320),v=()=>o(299545),h=()=>o(129522),_=()=>o(337567),b=()=>o(630116),y=()=>o(620149),S=o(474848);function w(e,t,o,r){(0,n.useImperativeHandle)(t,(()=>o),[o]),(0,s().b)(h().K,(()=>o),[o]);const i=e&&!(0,v().Md)(e);return(0,S.jsx)(g().A,{name:o.renderedType,children:i?r:null})}function k(e,t){const o=(0,a().S)();return(0,l().K8)((()=>{if(t)return!1;if(y().l.state)return!1;const n=o&&o.publicEditModeStore.state;return!(0,f().QT)(n)&&e.canEdit()}),[t,o,e])}function I(e){const t=(0,i().v3)();return(0,l().K8)((()=>(0,m().dC)(t,e)),[t,e])}function A(e,t){const o=(0,a().S)();return(0,l().K8)((()=>{if(t)return!1;if(y().l.state)return!1;const n=o&&o.publicEditModeStore.state;return!(0,f().QT)(n)&&e.canEditCollection()}),[t,o,e])}function x(e,t){const o=(0,c().DP)();return(0,l().K8)((()=>{if(t&&e.getInsertSuggestion())return{color:(0,d().B0)(o).color};const n=e.getFormat().block_color||"default";return(0,u().k5)(n,o)}),[t,e,o])}function C(e){return(0,l().K8)((()=>{const t=e.getRecordStoreUIRoot();if(!(t instanceof b().Bv))return;const o=t.getFormatStore().getKeyStore("page_font").getValue();return p().xf({pageFont:o,locale:r().locale})}),[e])}function T(e){return(0,l().K8)((()=>Boolean(e&&e.pathIsDead())),[e])}function M(e){return(0,l().K8)((()=>e&&e.getClosestNonAliveAncestor()),[e])}function P(e){return(0,l().K8)((()=>Boolean(e&&(0,_().dL)(e))),[e])}},891279:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{dragging:!1}}}const r=n},892632:(e,t,o)=>{o.d(t,{a1:()=>O,r0:()=>V,j7:()=>Z,x9:()=>L,xh:()=>N,JC:()=>re,u1:()=>J,dA:()=>Q,Bz:()=>$,po:()=>X,qL:()=>q,QM:()=>z,Zn:()=>U,cA:()=>Y});o(16280),o(944114),o(898992),o(354520),o(803949),o(581454),o(814603),o(147566),o(198721);var n=()=>o(634201),r=()=>o(522419),i=()=>o(308145),a=()=>o(857639),s=()=>o(206267),l=()=>o(386164),c=()=>o(161479),d=()=>o(979340),u=()=>o(919709),p=()=>o(220719),m=()=>o(319625),g=()=>o(496603),f=()=>o(763824),v=()=>o(973647),h=()=>o(532313),_=()=>o(720665),b=()=>o(989423),y=()=>o(135552),S=()=>o(898486),w=()=>o(972435),k=()=>o(706742),I=()=>o(508496),A=()=>o(150193),x=()=>o(589994),C=()=>o(612587),T=()=>o(712505),M=()=>o(749240);class P{constructor(e){this.environment=void 0,this.startTime=void 0,this.partialTime=void 0,this.bytesSuccessfullySent=void 0,this.curatedFileType=void 0,this.shouldReportMetrics=void 0,this.gateName=void 0,this.environment=e.environment,this.startTime=e.startTime,this.partialTime=e.startTime,this.bytesSuccessfullySent=0,this.curatedFileType=this.getCuratedFileType(e.fileType),this.gateName=e.silentRetryEnabled?"silent_retry_on":"silent_retry_control";this.shouldReportMetrics="image"===this.curatedFileType&&(0,o(745875).rQ)(1);const t=P.getCuratedFileSize(e.fileSize);(0,b().u4)({environment:this.environment,event:{eventName:"client.file_upload.file_stats",eventProperties:{size:t,type:this.curatedFileType}}}),this.shouldReportMetrics&&(0,b().u4)({environment:this.environment,event:{eventName:"client.file_upload.upload_session_start",eventProperties:{gate_name:this.gateName}}})}getCuratedFileType(e){return e?e.includes("image")?"image":"other":"unknown"}reportPermissionCheckCompleted(e){if(!this.shouldReportMetrics)return;const t=e.timeNow-this.partialTime;(0,b().u4)({environment:this.environment,event:{eventName:"client.file_upload.latency_permission_check",eventProperties:{latency:t}}}),this.partialTime=e.timeNow}reportGetSignedUrlCompleted(e){if(!this.shouldReportMetrics)return;const t=e.timeNow-this.partialTime;(0,b().u4)({environment:this.environment,event:{eventName:"client.file_upload.latency_get_signed_url",eventProperties:{latency:t,success:e.success}}}),this.partialTime=e.timeNow}updateProgress(e){this.bytesSuccessfullySent=e.bytesSuccessfullySent}startNewAttempt(e){this.partialTime=e.timeNow,this.bytesSuccessfullySent=0}reportAttemptFinished(e){this.shouldReportMetrics&&(e.success||(0,b().u4)({environment:this.environment,event:{eventName:"client.file_upload.failed_attempt_progress",eventProperties:{progress:this.bytesSuccessfullySent}}}),this.partialTime=e.timeNow)}reportUploadSessionEnd(e){let{timeNow:t,status:o,errorCode:n=-1}=e;if(!this.shouldReportMetrics)return;(0,b().u4)({environment:this.environment,event:{eventName:"client.file_upload.upload_session_end",eventProperties:{status_code:n,status:o,gate_name:this.gateName}}});const r=t-this.startTime;(0,b().u4)({environment:this.environment,event:{eventName:"client.file_upload.latency_e2e",eventProperties:{latency:r,status:o,gate_name:this.gateName}}})}static getCuratedFileSize(e){return e<0?-1:Math.pow(2,Math.ceil(Math.log2(e)))}}var B=()=>o(559926),R=()=>o(449506),E=()=>o(934839);const D=(0,o(959013).YK)({uploadFileFailed:{defaultMessage:"Upload failed.",id:"uploadActions.uploadFailedError.message"}});function N(e){return e.filter((e=>e.getAlive())).map((e=>{const{source:t,title:o,size:n}=e.getProperties()||{};return{type:"remote",id:e.id,source:u().q4_(t),name:u().q4_(o),size:u().q4_(n),store:e}}))}function L(e){return{...F(e),id:s().JW(),dataURL:URL.createObjectURL(e),type:"local"}}function F(e){return{file:e,name:e.name,size:`${(e.size/1024).toFixed(1)}KB`}}function U(e){var t;const o=e.files.map(F);null===(t=e.onBatchStart)||void 0===t||t.call(e,o);const n=new Map;let r=0;f().vA(e.files,te,(t=>Promise.all(t.map((t=>{const o=s().JW();return new Promise(((i,a)=>{const s={environment:e.environment,..."secure"===e.bucket?{bucket:e.bucket,record:e.record}:{bucket:e.bucket},file:t,onStart:(t,n)=>{var r;null===(r=e.onSingleFileStart)||void 0===r||r.call(e,t,o,n)},onProgress:t=>{var n,i;let{progressPercent:a,uploadedFiles:s}=t;null===(n=e.onBatchProgress)||void 0===n||n.call(e,{progressPercent:a,uploadedFiles:r}),null===(i=e.onSingleFileProgress)||void 0===i||i.call(e,{progressPercent:a,uploadedFiles:s},o)},onComplete:(a,s,l)=>{var c;r++,n.set(t.name,{fileUrl:a,signedToken:l??""}),null===(c=e.onSingleFileComplete)||void 0===c||c.call(e,a,o),i()},onError:t=>{var n;const r=new Error(t.message);null===(n=e.onSingleFileError)||void 0===n||n.call(e,r,o),a(r)},bypassFreeFileUploadLimitCheck:e.bypassFreeFileUploadLimitCheck,importFileUploadType:e.uploadType,formMetadata:e.formMetadata,spaceId:e.spaceId};"confluence"===e.uploadType||"genericImporter"===e.uploadType?async function(e){const{environment:t,file:o,bypassFreeFileUploadLimitCheck:n,spaceId:r}=e;if(!(o instanceof File))return;const i=o.type||"text/plain; charset=utf-8";if(O({bypassFreeFileUploadLimitCheck:n,environment:t,file:o})){var a;if(!r)return void(null===(a=e.onError)||void 0===a||a.call(e,{message:"Space information is missing.",offline:void 0}));{var s;null===(s=e.onStart)||void 0===s||s.call(e,F(o));const n=Math.floor(o.size/j)+1,a={bucket:e.bucket,name:o.name,contentType:i,supportExtraHeaders:!0,contentLength:o.size,numberOfFileChunks:n,spaceId:r},f=await R().callApi({eventName:"initiateMultipartUpload",environment:t,data:a,headers:(0,l().WS)({cellId:void 0,spaceId:r})});var c;if("failed"===f.type)return void(null===(c=e.onError)||void 0===c||c.call(e,{message:f.error.message,offline:f.offline}));const _=await async function(e){const{file:t,signedUrlsForChunks:o}=e,n=[];let r,i,a,s=[];const l=[];for(let p=0;p<o.length;p++){r=p*j,i=(p+1)*j,a=p+1<o.length?t.slice(r,i):t.slice(r);const e=o[p],s=fetch(e,{method:"PUT",body:new Blob([a],{type:t.type})});n.push(s)}const c=g().iv(n,3);for(const[p,g]of c.entries()){var d;try{const e=await(0,h().v8)((()=>Promise.all(g)),[100,1e3,3e3]);s=[...s,...e]}catch(u){return{error:(0,m().A)(u)}}null===(d=e.onProgress)||void 0===d||d.call(e,{progressPercent:Math.floor(p/c.length*100),uploadedFiles:0})}return s.forEach(((e,t)=>{const o=e.headers.get("etag");o&&l.push({ETag:o,PartNumber:t+1})})),{value:l}}({file:o,signedUrlsForChunks:f.data.signedUrlsForChunks,onProgress:e.onProgress});var d;if(v().Q.isFail(_))return void(null===(d=e.onError)||void 0===d||d.call(e,{message:_.error.message,offline:void 0}));const b={...a,multipartUploadEtags:_.value,fileKey:f.data.key,uploadId:f.data.uploadId},y=await R().callApi({eventName:"completeMultipartUpload",environment:t,data:b,headers:(0,l().WS)({cellId:void 0,spaceId:r})});var u,p;if("success"===y.type)null===(u=e.onComplete)||void 0===u||u.call(e,f.data.url,void 0,f.data.signedToken);else null===(p=e.onError)||void 0===p||p.call(e,{message:y.error.message,offline:y.offline})}}else Z(e.environment)}(s):e.formMetadata&&"temporary"===s.bucket?async function(e){var t;const{environment:o,file:n,formMetadata:r}=e;if(!r)return;const i=n.type||"text/plain; charset=utf-8",a=await R().callApi({eventName:"getFormUploadFileUrl",environment:o,data:{name:n.name,contentType:i,contentLength:n.size,spaceId:r.spaceId,formId:r.formId}});if("success"!==a.type){var s;return void(null===(s=e.onError)||void 0===s||s.call(e,{message:(0,S().Hu)(w().A.getIntl(),a),offline:a.offline}))}null===(t=e.onStart)||void 0===t||t.call(e,F(n),{fileName:n.name,token:a.data.token});try{const t=await G({environment:o,getUploadFileUrlResponse:{...a,data:{...a.data,signedUploadPostUrl:a.data.signedPostUrl,signedGetUrl:"",type:"POST"}},file:n,fileType:i,onProgress:e.onProgress,retryCount:0});var l,c;if(t.error)null===(l=e.onError)||void 0===l||l.call(e,t.error);else null===(c=e.onComplete)||void 0===c||c.call(e,a.data.url)}catch(u){var d;null===(d=e.onError)||void 0===d||d.call(e,{message:"File transmission failed",offline:!1})}}(s):H({...s,retryImmediatelyAfterFailure:!1})}))}))))).then((()=>{var t,o;const r=e.files.map((e=>n.get(e.name))).filter((e=>void 0!==e));null===(t=e.onBatchComplete)||void 0===t||t.call(e,r.map((e=>e.fileUrl))),null===(o=e.onBatchCompleteWithToken)||void 0===o||o.call(e,r)})).catch((t=>{var o;"confluence"===e.uploadType&&B()._$(e.environment,{import_source:"confluence",data:{import_type:"file",status:"failure",error:t,fileSize:e.files[0].size},flowId:e.flowId}),null===(o=e.onBatchError)||void 0===o||o.call(e,t)}))}function O(e){const{bypassFreeFileUploadLimitCheck:t,file:o}=e,n=M().subscriptionDataStoreInstance.state;return t||!n||!(0,d().dL)(n.subscriptionTier)||o.size<=ee}function V(e,t){const o=(0,r().QC)(e.name);return o&&(0,i().al)(o)?e.size<=0?{canUpload:!1,reason:"fileSizeIsZero"}:e.size>t*_().Bu?{canUpload:!1,reason:"fileSizeTooLarge"}:{canUpload:!0}:{canUpload:!1,reason:"fileExtensionNotAllowed"}}const j=20971520;function z(e){const{retryWhenOffline:t,backoffController:o=new(k().x)(void 0)}=e,n=o.getFailures()>0;H({...e,isOfflineBackoffRetry:n,onComplete:t=>{var r;n&&I().default.logEvent("upload_offline_success_after_retries",o.getFailures()),null===(r=e.onComplete)||void 0===r||r.call(e,t)},onError:n=>{var r;t&&n.offline?o.backOffOnFailure(10*_().TD).then((()=>{z({...e,backoffController:o})})):null===(r=e.onError)||void 0===r||r.call(e,n)}})}function q(e){const{retryWhenOffline:t,environment:o,backoffController:n=new(k().x)(void 0)}=e;!async function(e){const{environment:t,file:o,bypassFreeFileUploadLimitCheck:n}=e,r=performance.now();e.importFileUploadType&&B().eX(t,{type:e.importFileUploadType,uploadFileSizeBytes:o.size,fromAssistantUpload:!0});const i=o.type||"text/plain; charset=utf-8";if(O({bypassFreeFileUploadLimitCheck:n,environment:t,file:o})){e.onStart&&e.onStart(F(o));const n=await R().callApi({eventName:"getUploadFileUrlForAssistantChatTranscriptUpload",environment:t,data:{name:o.name,contentType:i,assistantChatTranscriptSessionPointer:e.assistantChatTranscriptSessionPointer,contentLength:o.size}});if("failed"===n.type){if(e.onError){const t=(0,S().Hu)(w().A.getIntl(),n);e.onError({message:t,offline:n.offline})}return}return W({...e,getUploadFileUrlResponse:{...n,data:{...n.data,type:"POST"}},fileType:i,performanceStartTime:r,isFromAssistant:!0,retryImmediatelyAfterFailure:!1,bucket:"temporary"})}Z(e.environment)}({...e,onComplete:(t,o)=>{var n;null===(n=e.onComplete)||void 0===n||n.call(e,t,o)},onStart:(t,n)=>{var r;null===(r=e.onStart)||void 0===r||r.call(e,t,n),(0,b().u4)({environment:o,event:{eventName:"assistant_attachment_upload_started",eventProperties:{}}})},onError:r=>{var i;if(t&&r.offline)return(0,b().u4)({environment:o,event:{eventName:"assistant_attachment_upload_retry",eventProperties:{}}}),void n.backOffOnFailure(10*_().TD).then((()=>{q({...e,backoffController:n})}));null===(i=e.onError)||void 0===i||i.call(e,r),(0,b().u4)({environment:o,event:{eventName:"assistant_attachment_upload_failed",eventProperties:{message:r.message,offline:r.offline??!1}}})}})}async function H(e){const{environment:t,file:o,bypassFreeFileUploadLimitCheck:n}=e,r=performance.now(),i=!e.isOfflineBackoffRetry&&e.reportRichUploadMetrics?new P({environment:t,fileType:o.type,fileSize:o.size,startTime:r,silentRetryEnabled:K(e)}):void 0;e.importFileUploadType&&B().eX(t,{type:e.importFileUploadType,uploadFileSizeBytes:o.size});const a=o.type||"text/plain; charset=utf-8",s=O({bypassFreeFileUploadLimitCheck:n,environment:t,file:o}),l=performance.now();if(null==i||i.reportPermissionCheckCompleted({timeNow:l}),!s)return null==i||i.reportUploadSessionEnd({timeNow:l,status:"no_permission"}),void Z(e.environment);e.onStart&&e.onStart(F(o));const d="secure"===e.bucket?{bucket:e.bucket,name:o.name,contentType:a,record:{table:e.record.table,id:e.record.id,spaceId:(0,c().e)(e.record.spaceId)},supportExtraHeaders:!0,contentLength:o.size}:{bucket:e.bucket,name:o.name,contentType:a,supportExtraHeaders:!0,contentLength:o.size,...e.spaceId&&{spaceId:e.spaceId}};"secure"===e.bucket&&await x().transactionQueue.awaitRecordTransaction(e.record);const u=await R().callApi({eventName:"getUploadFileUrl",environment:t,data:d});null==i||i.reportGetSignedUrlCompleted({timeNow:performance.now(),success:"success"!==u.type});return W({...e,getUploadFileUrlResponse:u,fileType:a,performanceStartTime:r,fileUploadsAnalyticReporter:i})}async function W(e){const{getUploadFileUrlResponse:t,isFromAssistant:o,file:n,performanceStartTime:r,environment:i,fileUploadsAnalyticReporter:s}=e,l="secure"===e.bucket?e.record:void 0;var c;if("success"!==t.type)return void(null===(c=e.onError)||void 0===c||c.call(e,{message:(0,S().Hu)(w().A.getIntl(),t),offline:t.offline}));const{url:d,signedGetUrl:u,signedToken:p}=t.data,m=K(e);try{m?await(0,h().L5)({fn:(o,n)=>G({environment:i,getUploadFileUrlResponse:t,file:e.file,fileType:e.fileType,onProgress:e.onProgress,retryCount:n,fileUploadsAnalyticReporter:s,recordPointer:l}),handleError:()=>({status:"retry"}),retryAttemptsMS:[1e3,2e3,4e3],retryAttemptRandomOffsetMS:200,initialInput:void 0}):await G({environment:i,getUploadFileUrlResponse:t,file:e.file,fileType:e.fileType,onProgress:e.onProgress,retryCount:0,fileUploadsAnalyticReporter:s,recordPointer:l})}catch(f){if((0,_().Et)(f)){var g;null==s||s.reportUploadSessionEnd({timeNow:performance.now(),errorCode:f,status:"error"});const t={message:w().A.formatMessage(D.uploadFileFailed),offline:0===f};null===(g=e.onError)||void 0===g||g.call(e,t)}else null==s||s.reportUploadSessionEnd({timeNow:performance.now(),status:"error"}),console.log("failed to upload file ",f);return}if(null==s||s.reportUploadSessionEnd({timeNow:performance.now(),status:"success"}),e.onComplete&&(e.onComplete(d,u,p),a().log({level:"info",from:"uploadActions",type:"ClientUploadSuccess",data:{miscDataToConvertToString:{url:d}}}),e.importFileUploadType)){const t=performance.now()-r;B().c6(i,{type:e.importFileUploadType,totalTimeMs:t});const a=t/1e3,s=n.size/a,l=n.size/1048576,c=l<=10?"lt10MB":l>10&&l<=100?"lt100MB":"gt100MB";B().LS(i,{type:e.importFileUploadType,size:c,file_upload_latency:s,from_assistant_upload:Boolean(o)})}}function K(e){if(e.isOfflineBackoffRetry)return!1;return!!I().default.checkGate({gateName:"uploads_retry_all_immediately"})||e.retryImmediatelyAfterFailure}async function G(e){const{environment:t,getUploadFileUrlResponse:o,file:n,fileType:r,onProgress:i,retryCount:s,fileUploadsAnalyticReporter:l,recordPointer:c}=e;null==l||l.startNewAttempt({timeNow:performance.now()});const{type:d,url:u}=o.data;(0,p().MX)("success"===o.type,"File upload failed");const m=f().yX();var g;if(!(n instanceof File))return await(null===(g=t.mobileNative)||void 0===g?void 0:g.uploadFile({file:n,recordPointer:c,getUploadFileUrlPutResponse:"PUT"===o.data.type?o.data:void 0,getUploadFileUrlPostResponse:"POST"===o.data.type?o.data:void 0}))??{error:{message:"Mobile native upload not supported.",offline:!1}};const v=new XMLHttpRequest;if(v.upload.addEventListener("progress",(e=>{if(!e.lengthComputable)return;null==l||l.updateProgress({bytesSuccessfullySent:e.loaded});const t=Math.round(100*e.loaded/e.total);null==i||i({progressPercent:t,uploadedFiles:0,isNetworkUnreliable:!!s&&s>0})})),v.onabort=function(){a().log({level:"error",from:"uploadActions",type:"ClientUploadError",data:{miscDataToConvertToString:{type:d,status:v.status,statusText:v.statusText,responseText:v.responseText,source:"onabort"}}})},v.onerror=function(){a().log({level:"error",from:"uploadActions",type:"ClientUploadError",data:{miscDataToConvertToString:{type:d,status:v.status,statusText:v.statusText,responseText:v.responseText,source:"onerror"}}})},v.onreadystatechange=function(){if(v.readyState!==XMLHttpRequest.DONE)return;const e=200===v.status||204===v.status;null==l||l.reportAttemptFinished({timeNow:performance.now(),retryCount:s,success:e}),e?m.resolve({value:u}):(a().log({level:"error",from:"uploadActions",type:"ClientUploadError",data:{miscDataToConvertToString:{type:d,status:v.status,statusText:v.statusText,responseText:v.responseText,source:"onreadystatechange"}}}),m.reject(v.status))},"POST"===d){const e=o.data.postHeaders,t=o.data.signedUploadPostUrl;v.open(d,t);for(const o of e)v.setRequestHeader(o.name,o.value);const r=new FormData;for(const n in o.data.fields)r.append(n,o.data.fields[n]);r.append("file",n),v.send(r)}else{const e=o.data.putHeaders,t=o.data.signedPutUrl;v.open(d,t);for(const o of e)v.setRequestHeader(o.name,o.value);v.setRequestHeader("Content-Type",r),v.send(n)}return m.promise}function $(e){ne({...e,onChange:t=>{if(!t.files||0===t.files.length)return;const o=Array.from(t.files);U({environment:e.environment,files:o,..."secure"===e.bucket?{bucket:e.bucket,record:e.record}:{bucket:e.bucket},onBatchStart:e.onStart,onBatchProgress:e.onProgress,onBatchComplete:e.onComplete,onBatchCompleteWithToken:e.onCompleteWithToken,onBatchError:e.onError,bypassFreeFileUploadLimitCheck:e.bypassFreeFileUploadLimitCheck})}})}function Y(e,t,o,n){U({environment:t,files:[e],bucket:o,onBatchComplete:n})}async function Q(e){const t=f().yX();return ne({...e,onChange:e=>{const o=n().PE(e.files);t.resolve(o)}}),t.promise}function Z(e){E().HQ({bannerStore:T().default.state.open?C().A:A().A,id:"SubscriptionEditingBlocker",styleKey:y().q.Red,contentKey:"upload_limit_exceeded"})}function X(){E().zA({bannerStore:A().A,id:"SubscriptionEditingBlocker"}),E().zA({bannerStore:C().A,id:"SubscriptionEditingBlocker"})}const J=5,ee=1e6*J,te=5;let oe;function ne(e){oe&&oe.remove(),oe=document.createElement("input"),oe.type="file",oe.style.opacity="0",oe.style.pointerEvents="none",oe.style.position="fixed",oe.style.left="-1000px",oe.style.top="-1000px",oe.ariaHidden="true",document.body.appendChild(oe),e.multiple?oe.setAttribute("multiple",""):oe.removeAttribute("multiple"),e.accept&&oe.setAttribute("accept",e.accept),oe.addEventListener("change",(()=>{e.onChange&&e.onChange(oe)})),oe.addEventListener("blur",(()=>{e.onBlur&&e.onBlur(oe)})),oe.addEventListener("click",(e=>{e.stopPropagation()})),oe.click(),oe.focus({preventScroll:!0})}function re(e){return e.filter(ie).map((e=>e.file))}function ie(e){return"local"===e.type}},893702:(e,t,o)=>{o.d(t,{NW:()=>h,P6:()=>d,Ps:()=>u,QR:()=>p,S_:()=>_,Wq:()=>m,c3:()=>f,lt:()=>l,s:()=>c,zi:()=>v});var n=()=>o(337240),r=()=>o(796756),i=()=>o(989423),a=()=>o(508496);function s(e,t){i().vd(e,t)}function l(e){s(e,"request_login_with_apple"),g(e,"login-with-apple")}function c(e){s(e,"request_login_with_google"),g(e,"login-with-google")}function d(e){s(e,"request_login_with_microsoft"),g(e,"login-with-microsoft")}function u(e){s(e,"request_login_with_google_onetap"),g(e,"login-with-google-onetap")}function p(e){s(e,"send_temporary_password"),g(e,"temporary-passcode")}function m(e){s(e,"redirect_to_saml_login"),g(e,"saml")}function g(e,t){i().u4({environment:e,event:{eventName:"login_attempt",eventProperties:{login_method:t}}}),a().default.logEvent("login_attempt",t,{})}function f(e,t){i().vd(e,"login_success",t,{dontWait:!0}),n().c3(e),a().default.logEvent("login_success",t.login_method,{...t,device_type:e.device.deviceType})}function v(e,t){const{isBannedGoogleSSOUserAgent:o,isSignup:i}=t;r().bL(e,"onboarding_landing_page",{is_banned_google_sso_user_agent:o,is_signup:i,isPerfmarkTrialSignup:t.isPerfmarkTrialSignup}),i&&n().i_(e)}function h(e,t){const{actionType:o,isSignup:n}=t;i().vd(e,"google_one_tap_login_button_click",{is_signup:Boolean(n),action_type:o},{dontWait:!0})}function _(e,t){i().WU(e,"login_email_input_updates","login_email_input_updates",1)}},895007:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(908521),s=()=>o(959013),l=()=>o(494043),c=()=>o(891078),d=o(474848);const u=(0,s().YK)({placeholder:{defaultMessage:"Heading 1",id:"header1Block.placeholder"}});function p(e,t){const p=(0,s().tz)(),m=(0,r().v3)(),g=(0,r().Y0)(),f=(0,n.useRef)(null),v=(0,c().pW)(e.store,!0),h=(0,c().qu)(e.store),_=(0,i().K8)((()=>e.store.getBlockTitleStore()),[e.store]),b=(0,i().K8)((()=>o(468484).A.isOpen(e.store.id)&&!e.hideContent),[e.hideContent,e.store.id]),y=(0,i().K8)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),S=(0,o(401497).IS)((t=>{const n=(g.isMobile||e.smallerHeaders?1.5:a().Zg)*a().Df,r=g.isMobile||e.smallerHeaders?1.5:a().Zg;return{root:{display:"flex",width:"100%",...v},toggle:{height:`${n}em`,marginTop:3},headerText:{...o(799954).nE,...(0,a().k)({fontSizeValue:r,fontFamily:h})},headerTextPlaceholder:{...y?{color:t.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{WebkitTextFillColor:t.headerBlockPlaceholderTextColor}}}}),[g.isMobile,e.smallerHeaders,v,h,y]),w=(0,i().K8)((()=>l().PQ(e.store)),[e.store]),k=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o(246722).A,{tagName:"h2",disabled:e.disabled,store:_,placeholder:p.formatMessage(u.placeholder),placeholderStyle:S.headerTextPlaceholder,style:S.headerText,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:o(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,d.jsx)(o(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,recursivelyLoadAllDiscussions:!b})]});return(0,c().NW)(e.store,t,(0,n.useMemo)((()=>({renderedType:"header",getNode:()=>f.current,getBlockStore:()=>e.store,activate(){l().qj(m,e.store,e.hideContent)}})),[m,e.hideContent,e.store]),(0,d.jsx)("div",{ref:f,style:{...S.root,...e.style},children:w?(0,d.jsx)(o(60676).A,{store:e.store,toggleStyle:S.toggle,childrenStyleWhenToggleable:{display:"flex"},hideContent:e.hideContent,disabled:e.disabled,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag,children:k}):k}))}const m=n.memo(n.forwardRef(p),o(821062).A)},895876:(e,t,o)=>{o.d(t,{$O:()=>g,X0:()=>h,_V:()=>m,eF:()=>_,oj:()=>f,uK:()=>v});o(296540);var n=()=>o(151744),r=()=>o(959013),i=()=>o(534177),a=()=>o(972435),s=()=>o(108944),l=()=>o(731320),c=()=>o(351360),d=()=>o(630116),u=o(474848);o(47966).Y,o(704654).E,o(112710).a;const p=(0,r().YK)({page:{defaultMessage:"Page",id:"dbTypesHelpers.singlePage.displayName"},tasks:{defaultMessage:"Task",id:"dbTypesHelpers.singleTask.displayName"},projects:{defaultMessage:"Project",id:"dbTypesHelpers.singleProject.displayName"}});p.page,p.tasks,p.projects;function m(e){return a().A.formatMessage((0,n().k6)(e))}function g(e,t){return a().A.formatMessage((0,n().PX)(e,t))}function f(e,t){return a().A.formatMessage((0,n().Kg)(e,t))}function v(e){var t;let{typedCollections:o,spaceStore:n,environment:r}=e;const a={},u={},p={},m={},g={},f=null===(t=c().default.state.currentUserStore)||void 0===t?void 0:t.id;for(const c of o){if(f){if("none"===(0,l().zt)({userId:f,store:c}).role){u[c.id]=c;continue}}const e=(0,s().Lf)(c);if(!e)continue;const t=h({environment:r,spaceStore:n,collectionStore:c});switch(t){case"team":m[e.id]=[...m[e.id]||[],c],e instanceof d().h4&&(g[e.id]=e);break;case"private":a[c.id]=c;break;case"shared":p[c.id]=c;break;default:(0,i().HB)(t)}}return{privateDatabases:a,restrictedDatabases:u,sharedDatabases:p,teamDatabases:m,teamStores:g}}function h(e){let{environment:t,spaceStore:o,collectionStore:n}=e;const r=(0,s().Lf)(n);return r&&r.canRead()?r instanceof d().h4?"team":r.isTopLevelPrivatePage({spaceStore:o,environment:t})?"private":"shared":"shared"}function _(e,t){return(0,u.jsx)(r().sA,{...t,defaultMessage:"This property is required for {databaseType}.",id:"database.requiredPropertyExplanation",description:"Educate the users on why this property cannot be deleted.",values:{databaseType:m(e)}})}},896461:(e,t,o)=>{o.d(t,{W:()=>_});o(944114),o(898992),o(672577);var n=()=>o(594013),r=()=>o(921598),i=()=>o(970013),a=()=>o(651124),s=()=>o(183558),l=()=>o(534177),c=()=>o(896628),d=()=>o(246826),u=()=>o(682146),p=()=>o(405417),m=()=>o(972435),g=()=>o(519839),f=()=>o(312296);function v(e){var t;const{environment:o,collectionContextStore:n,collectionViewStore:r,collectionStore:a,newViewType:l,schema:c,transaction:d}=e,u=n.permissionScopesStore.state;switch(l){case"board":let e=(null===(t=r.getFormat().collection_group_by)||void 0===t?void 0:t.property)??g().In(c);if(a&&!e){e=(0,s().Ay)();const t=(0,i().D)("Status",m().A.getIntl());u.canConfigureCollection&&(0,f().F)({environment:o,collectionStore:a,update:{[e]:t},transaction:d})}return e;case"calendar":let n=g().zv(c);if(a&&!n){n=(0,s().Ay)();const e={name:m().A.formatMessage(h.dateName),type:"date"};u.canConfigureCollection&&(0,f().F)({environment:o,collectionStore:a,update:{[n]:e},transaction:d})}return n;case"timeline":let l=g().HG(c);if(a&&!l){l=(0,s().Ay)();const e={name:m().A.formatMessage(h.dateName),type:"date"};u.canConfigureCollection&&(0,f().F)({environment:o,collectionStore:a,update:{[l]:e},transaction:d})}return l;case"map":let p=g().oy(c);if(a&&!p){p=(0,s().Ay)();const e={name:"Location",type:"geo_point"};u.canConfigureCollection&&(0,f().F)({environment:o,collectionStore:a,update:{[p]:e},transaction:d})}return p}}const h=(0,o(959013).YK)({renameButtonTitle:{defaultMessage:"Rename",id:"database.collectionEditViewButtonPopup.renameButtonTitle"},statusName:{defaultMessage:"Status",id:"database.collectionEditViewButtonPopup.statusNameProperty"},dateName:{defaultMessage:"Date",id:"database.collectionEditViewButtonPopup.dateNameProperty"}});function _(e){const{environment:t,collectionContextStore:o,collectionViewStore:s,collectionStore:m,oldViewType:g,newViewType:f="table",transaction:h}=e,_=o.normalizedSchemaStore.state,b=o.normalizedFormatStore.state,y=null==m?void 0:m.isSyncedCollection();switch(f){case"table":case"feed":d().zv({store:s.getQueryStore(),data:{aggregations:[]},transaction:h});break;case"board":const e=s.getFormat().board_columns_by,a=v({environment:t,collectionContextStore:o,collectionViewStore:s,collectionStore:m,newViewType:f,schema:_,transaction:h}),p=o.normalizedSchemaStore.state,g=a&&p[a];if(!a||!g||!(0,r().Eg)(g))break;c().zA({stores:[s],update:{board_columns_by:{...(0,r().V0)({property:a,propertySchema:g,isCollectionTypedView:"collectionTypedView"===o.contextType,hideEmptyGroups:!1}),disableBoardColorColumns:null==e?void 0:e.disableBoardColorColumns},collection_group_by:void 0},transaction:h});const S={aggregations:[{aggregator:"count",enforceMaxAggregationLimit:!0}]};d().KY({store:s.getQueryStore(),value:S,transaction:h});break;case"calendar":const w=v({environment:t,collectionContextStore:o,collectionViewStore:s,collectionStore:m,newViewType:f,schema:_,transaction:h});d().zv({store:s.getQueryStore(),data:{aggregations:[],calendar_by:w},transaction:h});break;case"gallery":c().zA({stores:[s],update:{gallery_cover:{type:"page_content"}},transaction:h}),d().zv({store:s.getQueryStore(),data:{aggregations:[]},transaction:h});break;case"timeline":const k=v({environment:t,collectionContextStore:o,collectionViewStore:s,collectionStore:m,newViewType:f,schema:_,transaction:h});d().zv({store:s.getQueryStore(),data:{aggregations:[],timeline_by:k},transaction:h});break;case"chart":if(!s.getFormat().chart_config){const e=(0,n().EZ)({collectionSchema:o.normalizedSchemaStore.state});c().zA({stores:[s],update:{chart_config:e,subitem_display_mode:"flattened"},transaction:h})}break;case"list":if(void 0===b.list_properties){const e=[{property:y?i().Ho:i().rn,visible:!0}],t=Object.keys(_).find((e=>{const t=_[e];return Boolean(t&&(0,u().hU)(t))}));void 0!==t&&e.push({property:t,visible:!0}),c().zA({stores:[s],update:{list_properties:e},transaction:h})}if(b.list_properties&&y){const e=b.list_properties.findIndex((e=>e.property===i().rn));if(-1!==e){const t=b.list_properties[e];b.list_properties[e]={...t,property:i().Ho},c().zA({stores:[s],update:{list_properties:b.list_properties},transaction:h})}}d().zv({store:s.getQueryStore(),data:{aggregations:[]},transaction:h});break;case"map":const I=v({environment:t,collectionContextStore:o,collectionViewStore:s,collectionStore:m,newViewType:f,schema:_,transaction:h});d().zv({store:s.getQueryStore(),data:{aggregations:[],map_by:I},transaction:h});break;case"chat":case"custom":break;default:(0,l().HB)(f)}const S=null==m?void 0:m.getFormat().subitem_property;if(S&&!(0,p().qS)(f)){const e=g&&!(0,p().qS)(f)?(0,a().u9)(g):void 0,t=(e?s.getFormat()[e]??[]:[]).find((e=>e.property===S))??{property:S,visible:!0},o=(0,a().u9)(f);if(o){const e=s.getFormat()[o]??[];c().zA({stores:[s],update:{[o]:[...e,t]},transaction:h})}}}},896628:(e,t,o)=>{o.d(t,{G8:()=>k,Jo:()=>I,PT:()=>S,TP:()=>v,_l:()=>f,aB:()=>b,fg:()=>h,lm:()=>_,vc:()=>y,yY:()=>w,zA:()=>g});var n=()=>o(700500),r=()=>o(522419),i=()=>o(763884),a=()=>o(496603),s=()=>o(720665),l=()=>o(492696),c=()=>o(780054),d=()=>o(267419),u=()=>o(351360),p=()=>o(630116),m=()=>o(246826);function g(e){const{stores:t,update:o,transaction:r}=e;for(const a of t){switch(a.table){case"block":case"collection":case"collection_view":case"layout":m().zv({store:a.getFormatStore(),data:(0,s().g_)(o),transaction:r})}a instanceof p().Bv&&a.getType()===n().xd.callout&&o.block_color&&i().A.set({userId:a.environment.currentUser.id,key:l().E,value:o.block_color})}}function f(e){const{environment:t,store:o,isLocked:n,transaction:r}=e,{id:i}=t.currentUser;if(!i)return;const a={block_locked:n,block_locked_by:i};m().zv({store:o.getFormatStore(),data:a,transaction:r})}function v(e){const{environment:t,store:o,alignment:n,transaction:r}=e,{id:i}=t.currentUser;if(!i)return;const a={block_alignment:n};m().zv({store:o.getFormatStore(),data:a,transaction:r})}function h(e){const{store:t,url:o,position:n,transaction:i}=e,a=(0,r().pc)({source:o,secureFileConfigRootpath:c().A.secureFileConfig.rootPath,secureFileConfigHostname:c().A.secureFileConfig.hostname}),s=a?a.link:o;g({stores:[t],update:{page_cover_position:n},transaction:i});const l=t.getCoverStore();l&&m().KY({store:l,value:s,transaction:i})}function _(e){const{store:t,url:o,transaction:n}=e;g({stores:[t],update:{social_media_image_preview_url:o},transaction:n})}function b(){const e=a().XM(["Activities","Objects","Travel & Places"]),t=d().A.state.emojiByCategory[e];return a().XM(t)}function y(e){const{store:t,transaction:o}=e,n=t.getIconStore();if(n){const e=b();m().KY({store:n,value:e,transaction:o})}}function S(e){const{store:t,transaction:o}=e,n=t.getCoverStore();n&&m().KY({store:n,value:null,transaction:o})}function w(e){const{store:t,coverPosition:o,transaction:n}=e;if(t.isCollectionView()){const e=t.getCollectionStore();if(e)return void m().zv({store:e.getFormatStore(),data:{collection_cover_position:o},transaction:n})}g({stores:[t],update:{page_cover_position:o},transaction:n})}function k(e){const{store:t,coverPosition:o,transaction:n}=e;g({stores:[t],update:{card_cover_position:o},transaction:n})}function I(e,t){var o;const n=(null===(o=u().default.state.currentUserSettingsStore)||void 0===o?void 0:o.getSettingsStore().getKeyStore("start_day_of_week").getValue())??0,r=null==e?void 0:e.getFormatStore().getKeyStore("start_week_on").getValue();let i=r;void 0===r&&(i=n),g({stores:[e],update:{start_week_on:i},transaction:t})}},898286:(e,t,o)=>{o.d(t,{U:()=>l,V:()=>c});var n=()=>o(695625),r=()=>o(351360),i=()=>o(630116),a=()=>o(270710),s=()=>o(778417);function l(e){const{currentSpaceViewStore:t}=r().default.state;if(t){const o=i().Bv.createChildStore(t,e.blockStore.pointer);a().A.setState({...a().A.state,originRect:e.originRect||n().T.getRectFromStore(e.blockStore),clonedBlockStore:o,originalBlockStore:e.blockStore,renderDelete:e.renderDelete})}}function c(e){a().A.reset(),s().IU({environment:e})}},898486:(e,t,o)=>{o.d(t,{$c:()=>J,A:()=>re,DX:()=>ee,Ep:()=>u,Hu:()=>te,K$:()=>g,Ou:()=>T,YT:()=>v,Yu:()=>oe,_j:()=>c,k1:()=>w,mW:()=>d,qh:()=>a,t4:()=>ne,yC:()=>m});var n=()=>o(416845),r=()=>o(959013),i=()=>o(534177);const a=(0,r().YK)({public_access_not_allowed:{id:"transactionErrors.publicAccessNotAllowed.message",defaultMessage:"This workspace does not allow pages with public access."},public_access_not_allowed_in_team:{id:"transactionErrors.publicAccessNotAllowedInTeam.message",defaultMessage:"This teamspace does not allow pages with public access."},public_permission_item_invalid_role:{id:"transactionErrors.publicPermissionItemInvalidRole.message",defaultMessage:"Invalid role for public permission item."},block_permissions_max_size:{id:"transactionErrors.blockPermissionsMaxSize.message",defaultMessage:"You have exceeded the maximum permissions per page."},guests_over_limit:{id:"transactionErrors.guestsoverLimit.message",defaultMessage:"This workspace has reached the maximum number of guests (5)."},guests_not_allowed:{id:"transactionErrors.guestsNotAllowed.message",defaultMessage:"This workspace doesn't allow guests."},team_level_guests_not_allowed:{id:"transactionErrors.teamLevelGuestsNotAllowed.message",defaultMessage:"This teamspace does not allow guests."},guest_invite_request_required:{id:"transactionError.guestInviteRequestRequired.message",defaultMessage:"Guests can only be invited by request"},workspace_top_level_operation_not_allowed:{id:"transactionErrors.workspaceTopLevelOperationNotAllowed.message",defaultMessage:"This workspace has locked modifying the workspace section of the sidebar."},team_page_edit_operation_not_allowed:{id:"transactionErrors.teamPageEditOperationNotAllowed.message",defaultMessage:"Sorry, you cannot add or remove pages to this teamspace."},team_top_level_page_mismatch:{id:"transactionErrors.teamTopLevelPageMismatch.message",defaultMessage:"This page has fallen out of sync with its teamspace."},blocks_inside_themselves_not_allowed:{id:"transactionErrors.blocksInsideThemselvesNotAllowed.message",defaultMessage:"Oops! Blocks cannot be moved inside of themselves."},moving_pages_to_other_workspaces_not_allowed:{id:"transactionErrors.movingPagesToOtherWorkspacesNotAllowed.message",defaultMessage:"This workspace has disabled moving pages to other workspaces."},space_domain_not_available:{id:"transactionErrors.spaceDomainNotAvailable.message",defaultMessage:"Sorry, this domain is not available."},space_education_email_domain_not_allowed:{id:"transactionErrors.spaceEducationalEmailDomainNotAllowed.message",defaultMessage:"Sorry, education domains are not allowed: {domain}"},space_email_domain_not_allowed:{id:"transactionErrors.spaceEmailDomainNotAllowed.message",defaultMessage:"Sorry, this domain is not allowed: {domain}"},space_allowed_email_domain_matches_no_members:{id:"transactionErrors.spaceAllowedEmailDomainMatchesNoMembers.message",defaultMessage:"Allowed email domain must match at least one member."},comment_only_access_cant_move_page:{id:"transactionErrors.commentOnlyAccessCantMovePage.message",defaultMessage:"Sorry, you cannot move this page because you only have Comment-Only access."},search_engine_indexing_not_allowed:{id:"transactionErrors.searchEngineIndexingNotAllowed.message",defaultMessage:"This workspace does not allow public pages to be search indexed."},block_content_max_size:{id:"transactionErrors.blockContentMaxSize.message",defaultMessage:"You have exceeded the maximum contents per page."},block_properties_max_size:{id:"transactionErrors.blockPropertiesMaxSize.message",defaultMessage:"You have exceeded the maximum properties size per page."},activity_edits_max_size:{id:"transactionErrors.activityEditsMaxSize.message",defaultMessage:"You have exceeded the maximum edits per page."},cannot_archive_only_default_team:{id:"transactionErrors.cannotArchiveOnlyDefaultTeam.message",defaultMessage:"Can’t archive this teamspace because it is the only default teamspace in this workspace."},cannot_join_closed_team:{id:"transactionErrors.cannotJoinClosedTeam.message",defaultMessage:"Can’t join a closed teamspace. Contact the teamspace’s owner to be invited."},cannot_join_private_team:{id:"transactionErrors.cannotJoinPrivateTeam.message",defaultMessage:"Can’t join a private teamspace. Contact the teamspace’s owner to be invited."},cannot_join_as_team_guest_if_space_member:{id:"transactionErrors.cannotJoinAsTeamGuestIfSpaceMember.message",defaultMessage:"Can’t join a team as a teamspace guest if you are a member of the space."},team_name_empty:{id:"transactionErrors.teamNameEmpty.message",defaultMessage:"Teamspace name can’t be empty."},team_name_too_long:{id:"transactionErrors.teamNameTooLong.message",defaultMessage:"Teamspace name must be under {maxTeamNameLength} characters."},team_description_too_long:{id:"transactionErrors.teamDescriptionTooLong.message",defaultMessage:"Teamspace description must be under {maxTeamDescriptionLength} characters."},at_least_one_default_team:{id:"transactionErrors.atLeastOneDefaultTeam.message",defaultMessage:"There needs to be at least one default teamspace in your workspace."},at_least_one_admin_in_workspace:{id:"transactionErrors.atLeastOneAdminInWorkspace.message",defaultMessage:"There needs to be at least one admin in your workspace."},cant_add_new_members_from_this_jurisdiction:{id:"transactionErrors.cantAddNewMembersFromThisJurisdiction",defaultMessage:"We are currently not allowing customers to add new members from this jurisdiction."},cannot_invite_space_guests_as_team_owners_or_members:{id:"transactionErrors.cannotInviteGuestsToTeam",defaultMessage:"Can’t invite people who are not members of this workspace to this teamspace."},cannot_invite_guests_by_non_admin_and_non_team_owner:{id:"transactionErrors.cannotInviteGuestsByNonAdminAndNonTeamOwner",defaultMessage:"Only teamspace owners who are also workspace (membership) admin can invite people as teamspace guests."},non_owners_cannot_set_is_default:{id:"transactionErrors.nonOwnersCannotSetIsDefault",defaultMessage:"Only teamspace owners can set the default status on a teamspace."},database_syncs_over_limit:{id:"transactionErrors.databaseSyncsOverLimit",defaultMessage:"You have hit your Synced Database limit."},no_permission_to_move:{id:"transactionErrors.noPermissionToMove",defaultMessage:"You don‘t have access to move this page to the desired location."},duplicate_guest_membership_request:{id:"transactionErrors.duplicateGuestMembershipRequest",defaultMessage:"You have already submitted a membership request."},guest_membership_request_setting_off:{id:"transactionErrors.guestMembershipRequestOff",defaultMessage:"Guest membership requests have been turned off for this workspace."},external_membership_request_setting_off:{id:"transactionErrors.externalMembershipRequestOff",defaultMessage:"External membership requests have been turned off for this workspace."},corrupt_collection_property:{id:"transactionErrors.corruptCollectionProperty",defaultMessage:"Your property change can not be saved because it causes corruption to the metadata."},duplicate_auto_increment_id_property:{id:"transactionErrors.duplicateAutoIncrementIdProperty",defaultMessage:"A database can only have one ID property"},convert_to_auto_increment_id_property:{id:"transactionErrors.convertToAutoIncrementIdProperty",defaultMessage:"Other properties can not be converted to an ID property"},convert_from_auto_increment_id_property:{id:"transactionErrors.convertFromAutoIncrementIdProperty",defaultMessage:"The ID property can not be converted to any other property"},wiki_forbidden_auto_increment_id_property:{id:"transactionErrors.wikiForbiddenAutoIncrementIdProperty",defaultMessage:"A wiki cannot have an ID property"},synced_database_forbidden_auto_increment_id_property:{id:"transactionErrors.syncedDatabaseForbiddenAutoIncrementIdProperty",defaultMessage:"A synced database cannot have an ID property"},cannot_invite_space_members_as_team_guests:{id:"transactionErrors.cannotInviteSpaceMembersAsTeamGuests",defaultMessage:"Can't invite workspace members as teamspace guests."},cannot_invite_team_guests_if_space_disable_team_guests:{id:"transactionErrors.cannotInviteTeamGuestsIfSpaceDisableTeamGuests",defaultMessage:"Can’t invite teamspace guests if the space setting is disabled."},cannot_invite_team_guests_with_matching_email_domains:{id:"transactionErrors.cannotInviteTeamGuestsWithMatchingEmailDomains",defaultMessage:"Can't invite teamspace guests whose emails match space allowed domain."},cannot_delete_wiki_owner_property:{id:"transactionErrors.cannotDeleteWikiOwnerProperty",defaultMessage:"Owner property can not be deleted from wiki."},missing_wiki_owner_property:{id:"transactionErrors.missingWikiOwnerProperty",defaultMessage:"Wiki is missing owner property."},cannot_delete_sprints_status_property_schema:{id:"transactionErrors.cannotDeleteSprintsStatusPropertySchema",defaultMessage:"Status property cannot be deleted from Sprints schema."},cannot_mutate_sprints_status_property_schema:{id:"transactionErrors.cannotMutateSprintsStatusPropertySchema",defaultMessage:"Sprint status property schema cannot be modified."},formula_property_invalid:{id:"transactionErrors.formulaPropertyInvalid",defaultMessage:"Formula property is invalid."},cannot_delete_tasks_current_sprint_property_filter:{id:"transactionErrors.cannotDeleteTasksCurrentSprintPropertyFilter",defaultMessage:"Tasks current sprint view has a current sprint status property filter that cannot be deleted."},cannot_delete_typed_collection_required_property:{id:"transactionErrors.cannotDeleteTypedCollectionRequiredProperty",defaultMessage:"This property can not be deleted from a typed collection."},cannot_edit_typed_property_type:{id:"transactionErrors.cannotEditTypedPropertyType",defaultMessage:"This property cannot change its type."},cannot_edit_typed_property_relation:{id:"transactionErrors.cannotEditTypedPropertyRelation",defaultMessage:"This property cannot change its relation."},cannot_edit_typed_property_rollup:{id:"transactionErrors.cannotEditTypedPropertyRollup",defaultMessage:"This property cannot change its rollup."},cannot_mutate_tasks_current_sprint_property_filter:{id:"transactionErrors.cannotMutateTasksCurrentSprintPropertyFilter",defaultMessage:"Tasks current sprint view has a current sprint status property filter that cannot be modified."},ai_inference_prompt_exceeds_max_length:{id:"transactionErrors.aiInferencePromptExceedsMaxLength",defaultMessage:"AI property prompt is too long."},ai_inference_schema_invalid:{id:"transactionErrors.aiInference.invalid",defaultMessage:"AI property is invalid."},cannot_delete_tasks_backlog_empty_sprint_property_filter:{id:"transactionErrors.cannotDeleteTasksBacklogEmptySprintPropertyFilter",defaultMessage:"Tasks backlog sprint view has an empty sprint status property filter that cannot be deleted."},cannot_mutate_tasks_backlog_empty_sprint_property_filter:{id:"transactionErrors.cannotMutateTasksBacklogEmptySprintPropertyFilter",defaultMessage:"Tasks backlog sprint view has an empty sprint status property filter that cannot be mutated."},cannot_edit_pages_in_trash:{id:"transactionErrors.cannotEditPagesInTrash",defaultMessage:"Pages in trash cannot be edited."},cannot_create_empty_page_layout:{id:"transactionErrors.cannot_create_empty_page_layout",defaultMessage:"Cannot create an empty layout for a page."},cannot_remove_undeletable_module:{id:"transactionErrors.cannot_remove_undeletable_module",defaultMessage:"Cannot remove an undeletable module."},discontinued_module:{id:"transactionErrors.discontinued_module",defaultMessage:"Cannot use discontinued modules"},duplicate_module:{id:"transactionErrors.duplicate_module",defaultMessage:"Cannot create additional title modules."},cannot_move_unmoveable_module:{id:"transactionErrors.cannot_move_unmoveable_module",defaultMessage:"Cannot move an unmoveable object."},unallowed_module_in_area:{id:"transactionErrors.unallowed_module_in_area",defaultMessage:"Module not allowed in area."},cannot_delete_page_layout:{id:"transactionErrors.cannot_delete_page_layout",defaultMessage:"Cannot delete page layout."},cannot_have_multiple_views_main_modules:{id:"transactionErrors.cannot_have_multiple_views_main_modules",defaultMessage:"Cannot have multiple tab module structures"},invalid_nested_forms_module:{id:"transactionErrors.invalid_nested_forms_module",defaultMessage:"Invalid conditional group or module"},views_main_module_not_last:{id:"transactionErrors.views_main_module_not_last",defaultMessage:"Tabs must be at the bottom of the page layout"},missing_views_main_content_tab:{id:"transactionErrors.missing_views_main_content_tab",defaultMessage:"Tabbed layout must include a content tab"},multiple_views_main_content_tabs:{id:"transactionErrors.multiple_views_main_content_tabs",defaultMessage:"Tabbed layout may not have multiple content tabs"},editor_and_views_main_module_in_same_area:{id:"transactionErrors.editor_and_views_main_module_in_same_area",defaultMessage:"Editor and tabs structure module cannot be in the same area"},tabs_structure_must_contain_editor:{id:"transactionErrors.tabs_structure_must_contain_editor",defaultMessage:"Tabs structure must contain an editor"},space_allowed_email_domain_cannot_be_trusted_domain:{id:"transactionErrors.space_allowed_email_domain_cannot_be_trusted_domain",defaultMessage:"Allowed email domain cannot be a shared email domain."},collection_sharing_enabled_relation_exceeds_count:{id:"transactionErrors.collection_sharing_enabled_relation_exceeds_count",defaultMessage:"Databases can have, at most, one sharing enabled relation."},collection_sharing_enabled_relation_invalid_wiki_collection:{id:"transactionErrors.collection_sharing_enabled_relation_wiki_collection",defaultMessage:"Cannot create a sharing enabled relation in a wiki database."},collection_sharing_enabled_relation_invalid_target_collection:{id:"transactionErrors.collection_sharing_enabled_relation_invalid_target_collection",defaultMessage:"Sharing enabled relation points to an invalid database."},collection_sharing_enabled_relation_invalid_space:{id:"transactionErrors.collection_sharing_enabled_relation_invalid_space",defaultMessage:"Cannot create a sharing enabled relation that points to a database in a different space"},collection_sharing_enabled_relation_two_way_unsupported:{id:"transactionErrors.collection_sharing_enabled_relation_two_way_unsupported",defaultMessage:"A sharing enabled relation's target database cannot have a relation back to this database."},collection_sharing_enabled_relation_invalid_limit:{id:"transactionErrors.collection_sharing_enabled_relation_invalid_limit",defaultMessage:"A sharing enabled relation must have a limit of 1."},collection_sharing_enabled_relation_invalid_target_collection_subitems:{id:"transactionErrors.collection_sharing_enabled_relation_invalid_target_collection_subitems",defaultMessage:"A sharing enabled relation's target database cannot have subitems"},collection_sharing_enabled_relation_cycle:{id:"transactionErrors.collection_sharing_enabled_relation_cycle",defaultMessage:"A sharing enabled relation cannot form a cycle"},collection_schema_too_large:{id:"transactionErrors.collection_schema_too_large",defaultMessage:"You have exceeded the maximum schema size. Please delete some properties and try again."},collection_sharing_enabled_relation_target_invalid_wiki_collection:{id:"transactionErrors.collection_sharing_enabled_relation_target_invalid_wiki_collection",defaultMessage:"A database cannot be a wiki if it is the target of a sharing enabled relation"},collection_invalid_property_deletion:{id:"transactionErrors.collection_invalid_property_deletion",defaultMessage:"A property cannot be deleted without being moved to the deleted schema."},collection_invalid_title_property_deletion:{id:"transactionErrors.collection_invalid_title_property_deletion",defaultMessage:"Title property cannot be deleted from a database."}}),s=(0,r().YK)({email_domain_already_configured:{id:"samlErrors.emailDomainAlreadyConfigured.message",defaultMessage:"Email domain is already configured for SAML on existing workspace."},email_domain_workspace_creation_is_education_domain:{id:"samlErrors.emailDomainWorkspaceCreationIsEducationDomain.message",defaultMessage:"Cannot prevent creation of workspaces based on an education email domain."},could_not_parse_idp_metadata_xml:{id:"samlErrors.couldNotParseIdentityProviderMetadataXML.message",defaultMessage:"Could not parse IDP metadata XML."},invalid_idp_url:{id:"samlErrors.invalidIDPURL.message",defaultMessage:"The IDP metadata URL is an invalid URL."},saml_sso_required:{id:"samlErrors.samlRequired.message",defaultMessage:"You must use SAML SSO to log in to Notion"},could_not_parse_idp_metadata:{id:"samlErrors.couldNotParseIdpMetadata.message",defaultMessage:"Could not parse SAML IDP metadata. Please check that your IDP metadata is correct."},could_not_download_idp_metadata:{id:"samlErrors.couldNotDownloadIdpMetadata.message",defaultMessage:"SAML IDP metadata could not be downloaded. Please check that your IDP Metadata URL is correct."},saml_url_incorrect:{id:"samlErrors.incorrectURL.message",defaultMessage:"Audience in SAML assertion needs to be {correctUrl}"},incorrectly_configured_saml:{id:"samlErrors.incorrectlyConfiguredSaml.message",defaultMessage:"Incorrectly configured SAML SSO. Please contact your administrator."},saml_name_id_email_required:{id:"samlErrors.samlNameIdEmailRequired.message",defaultMessage:"The SAML Name ID attribute must be an email address. Please contact your administrator."},email_not_configured_for_saml_sso:{id:"samlErrors.emailNotConfiguredForSamlSso.message",defaultMessage:"This email is not configured for SAML SSO to this workspace. Please contact your administrator."},invalid_saml_configuration:{id:"samlErrors.invalidSamlConfiguration.message",defaultMessage:"Invalid SAML Configuration. Please contact your administrator."},domain_verification_dns_failed:{id:"samlErrors.domainVerificationDnsFailed.message",defaultMessage:"DNS record does not contain the correct notion-verification-code TXT record. DNS may take up to 72 hours to propagate, please try again later."},domain_verification_invalid_domain:{id:"samlErrors.domainVerificationInvalidDomain.message",defaultMessage:"Invalid value for domain. Please correctly format and ensure the domain is not reserved: {domain}"},domain_verification_config_has_domain:{id:"samlErrors.domainVerificationConfigHasDomain.message",defaultMessage:"SAML configuration already has the attempted domain."},domain_verification_has_pending_verifications:{id:"samlErrors.domainVerificationhasPending.message",defaultMessage:"There is already a pending domain verification for this domain."},disable_toggling_page_access_requests_for_non_members:{id:"samlErrors.disableTogglingPageAccessRequestsForNonMembers",defaultMessage:"Page access requests for non-members of a workspace is currently disabled."},signed_request:{id:"samlErrors.signedRequest.message",defaultMessage:"IDP metadata cannot accept signed requests."},user_not_added_to_space:{id:"samlErrors.userNotAddedToSpace.message",defaultMessage:"Cannot use SAML to log in. Please try again later."},cannot_use_saml_to_log_in:{id:"samlErrors.cannotUseSamlToLogIn.message",defaultMessage:"Cannot use SAML to log in. Please try logging in without SAML."}}),l=(0,r().YK)({invalid_email_address:{id:"emailErrors.invalidEmailAddress.message",defaultMessage:"Invalid email address"},destination_email_address_not_verified:{id:"emailErrors.destinationEmailAddressNotVerified.message",defaultMessage:"You must change a user's email to another verified email domain."},invalid_email_entered:{id:"emailErrors.invalidEmailEntered.message",defaultMessage:"Please enter a valid email."},user_with_email_already_exists:{id:"emailErrors.userAlreadyExists.message",defaultMessage:"A user with this email already exists."},invalid_or_expired_password:{id:"emailErrors.invalidOrExpiredPassword.message",defaultMessage:"Your login code was incorrect. Please try again."},email_does_not_have_existing_account:{id:"emailErrors.noExistingAccountForEmailAddress.message",defaultMessage:"This email does not have an existing account."},email_unreachable:{id:"emailErrors.emailUnreachable.message",defaultMessage:"We could not reach the email address you provided. Please try again with a different email."},incorrect_password:{id:"emailErrors.incorrectPassword.message",defaultMessage:"Incorrect password."},invalid_email_domain:{id:"emailErrors.invalidEmailDomain.message",defaultMessage:"Invalid email domain"}}),c=(0,r().YK)({enex_import_not_supported:{id:"importErrors.enexFileNotSupported.message",defaultMessage:"Evernote .enex import not supported."},only_docx_extension_supported:{id:"importErrors.onlyDocxExtensionSupported.message",defaultMessage:"Import failed: file type not supported."},corrupt_file:{id:"importErrors.corruptFile.message",defaultMessage:"Import failed: unable to open file."},pdf_to_docx_timeout:{id:"importErrors.pdfToDocxTimeout.message",defaultMessage:"Import failed: pdf2docx conversion timed out."},incorrect_file_format:{id:"importErrors.incorrectFileFormat.message",defaultMessage:"Import failed: incorrect file format."}}),d=(0,r().YK)({csv_import_inconsistent_columns:{id:"csvImportErrors.inconsistentColumns.message",defaultMessage:"Inconsistent number of columns in CSV file, {numBadRows} rows had problems. Header row had {numTitleColumns} columns. Row {firstBadRowIndex} was first inconsistent row with {firstBadRowLength} columns. Parsed row {firstBadRowIndex}: {firstBadRow}"}}),u=(0,r().YK)({upload_file_size_exceeded:{id:"confluenceImportErrors.uploadFileSizeExceeded.message",defaultMessage:"Import file cannot exceed {maxSize}."},failed_to_extract_zip:{id:"confluenceImportErrors.failedToExtractZip.message",defaultMessage:"Failed to extract ZIP file."},no_index_html_file:{id:"confluenceImportErrors.noIndexHtmlFile.message",defaultMessage:"Could not find index file in ZIP."},index_html_missing_available_pages:{id:"confluenceImportErrors.indexHtmlMissingAvailablePages.message",defaultMessage:"Invalid index file: could not find available pages."},no_confluence_id_in_page_link:{id:"confluenceImportErrors.noConfluenceIdInPageLink.message",defaultMessage:"Could not extract page ID from file name."},failed_to_find_element:{id:"confluenceImportErrors.failedToFindElement.message",defaultMessage:"Failed to parse upload."},found_element_is_incorrect_type:{id:"confluenceImportErrors.foundElementIsIncorrectType.message",defaultMessage:"Failed to parse upload."},buffer_upload_failed:{id:"confluenceImportErrors.bufferUploadFailed.message",defaultMessage:"Failed to upload attachment from buffer."},attachment_not_found:{id:"confluenceImportErrors.attachmentNotFound.message",defaultMessage:"Failed to find attachment in ZIP file."},attachment_upload_failed:{id:"confluenceImportErrors.attachmentUploadFailed.message",defaultMessage:"Failed to upload attachment from file."},failed_to_build_page:{id:"confluenceImportErrors.failedToBuildPage.message",defaultMessage:"Failed to import page."},api_error:{id:"confluenceImportErrors.apiError.message",defaultMessage:"Failed to fetch data from api."},invalid_site_url_format:{id:"confluenceImportErrors.invalidSiteUrlFormat.message",defaultMessage:"Please enter a valid site URL. Example: https://example.com"}}),p=(0,r().YK)({file_upload_generic_error:{id:"fileUploadErrors.generic.message",defaultMessage:"File upload is not allowed."}}),m=(0,r().YK)({file_size_exceeded:{id:"importActions.fileImportFailedError.customSizeTooLarge.message",defaultMessage:"Import file cannot exceed {maxSize}."},row_limit_exceeded:{id:"row_limit_exceeded",defaultMessage:"Row limit cannot exceed {maxRows}"},column_limit_exceeded:{id:"column_limit_exceeded",defaultMessage:"Column limit cannot exceed {maxColumns}"}}),g=(0,r().YK)({password_too_short:{id:"passwordSettings.passwordTooShortError.message",defaultMessage:"Please make your password longer."},password_missing_letter:{id:"passwordSettings.passwordMissingLetter.message",defaultMessage:"Please include a letter, or use a longer password."},password_missing_number:{id:"passwordSettings.passwordMissingNumber.message",defaultMessage:"Please include a number, or use a longer password."},password_missing_letter_and_number:{id:"passwordSettings.passwordMissingLetterAndNumber.message",defaultMessage:"Please include a letter and a number, or use a longer password."},password_too_consistent:{id:"passwordSettings.passwordTooConsistent.message",defaultMessage:"Please include additional unique characters."},password_not_entered:{id:"passwordSettings.passwordNotEntered.message",defaultMessage:"Please enter your password."},password_not_set:{id:"passwordSettings.passwordNotSet.message",defaultMessage:"No password set."}}),f=(0,r().YK)({rate_limited:{id:"rateLimitError.message",defaultMessage:"Please try again later."},duplicate_rate_limited:{id:"duplicateRateLimitError.message",defaultMessage:"Rate limit reached, please try again later."},export_audit_log_rate_limited:{id:"export_audit_log_rate_limited.message",defaultMessage:"Rate limit reached for exporting audit logs, please try after your current exports are finished."},export_user_analytics_rate_limited:{id:"exportUserAnalytics.rateLimited.message",defaultMessage:"Rate limit reached for exporting member analytics, please try after your current exports are finished."},export_content_analytics_rate_limited:{id:"exportContentAnalytics.rateLimited.message",defaultMessage:"Rate limit reached for exporting content analytics, please try after your current exports are finished."},export_admin_content_search_rate_limited:{id:"exportAdminContentSearch.rateLimited.message",defaultMessage:"Rate limit reached for exporting content search, please try after your current exports are finished."}}),v=(0,r().YK)({login_generic_error:{id:"loginErrors.generic.message",defaultMessage:"There was a problem logging in."},login_try_again:{id:"loginErrors.tryAgain.message",defaultMessage:"Please log in again."},login_csrf_error:{id:"loginErrors.csrf.message",defaultMessage:"If you’re logging in via a link, please open the link in the same browser that you requested the link from."},login_admin_mode_unsupported:{id:"loginErrors.adminModeUnsupported.message",defaultMessage:"Unsupported in Admin Mode"},login_invalid_email:{id:"loginErrors.invalidEmail.message",defaultMessage:"Invalid email."},login_options_invalid:{id:"loginErrors.invalidOptions.message",defaultMessage:"Unable to login, please try again."},login_from_restricted_region:{id:"loginErrors.restrictedRegion.message",defaultMessage:"You are attempting to access our service from a restricted jurisdiction."},login_banned_user:{id:"loginErrors.bannedUser.message",defaultMessage:"This account has been banned from accessing Notion."},login_inactivity_user:{id:"loginErrors.inactivityUser.message",defaultMessage:"Your account has been locked for inactivity. Please contact inactiveaccount@makenotion.com to get access restored."},login_suspended_user:{id:"loginErrors.suspendedUser.message",defaultMessage:"Your account has been suspended by your Notion administrator."},login_custom_session_expired:{id:"loginErrors.customSessionExpired.message",defaultMessage:"You've been logged out due to a session duration set by your Workspace Owner."},login_generic_session_expired:{id:"loginErrors.genericSessionExpired.message",defaultMessage:"Your session has expired. Please login again."}}),h=(0,r().YK)({generic_mfa_error:{id:"authErrors.genericMfaError.message",defaultMessage:"Something went wrong, please try again"},reused_mfa_code:{id:"authErrors.reusedMfaCode.message",defaultMessage:"Provided code has already been used. Please try again."},invalid_mfa_code:{id:"authErrors.invalidMfaCode.message",defaultMessage:"The code didn’t work, try typing it again or resend code"},mfa_duplicate_friendly_name:{id:"authErrors.duplicateFriendlyName",defaultMessage:"Authenticator name is already in use"},mfa_empty_friendly_name:{id:"authErrors.emptyFriendlyName",defaultMessage:"Authenticator name cannot be empty"},mfa_bad_friendly_name:{id:"authErrors.badFriendlyName",defaultMessage:"Authenticator name cannot be used"},mfa_sms_unsupported_country_code_for_enrollment:{id:"authErrors.unsupportedCountryCode",defaultMessage:"SMS authentication is currently not supported for this country. You may consider using an authenticator app as an alternative authentication method."},email_code_login_required:{id:"authErrors.emailCodeLoginRequired",defaultMessage:"You must login with an email login code"},dev_invalid_domain:{id:"authErrors.devInvalidDomain",defaultMessage:"This is a development version of Notion. Please download the latest Notion desktop app at https://www.notion.com/desktop"},invalid_phone_number:{id:"authErrors.invalidPhoneNumber.message",defaultMessage:"The phone number is not valid"},invalid_country_code:{id:"authErrors.invalidCountryCode.message",defaultMessage:"The country code is not valid"},already_verified_phone_number:{id:"authErrors.alreadyVerifiedPhoneNumber.message",defaultMessage:"This phone number has already been verified"},max_num_of_mfa_methods_reached:{id:"authErrors.maxMethods.message",defaultMessage:"You've reached the maximum number of MFA methods for the given type."},admin_tool_insufficient_permissions:{id:"authErrors.adminToolInsufficientPermissions.message",defaultMessage:"You don't have the right role to access this Admin Mode tool."},phone_number_setup_limit_reached:{id:"authErrors.phoneNumberLimitReached.message",defaultMessage:"This phone number can no longer be used to setup new 2-step verification methods."},no_temporary_verification:{id:"authErrors.noTemporaryVerification.message",defaultMessage:"Notion must verify your password or MFA to continue, exit this modal and try again"},twilio_generic_error:{id:"authErrors.twilioGenericError.message",defaultMessage:"Something went wrong, please reach out to customer support"},twilio_cannot_verify_phone_number:{id:"authErrors.twilioCannotVerifyPhoneNumber.message",defaultMessage:"We cannot verify your phone number, please check the number and try again"},twilio_cannot_fetch_phone_number:{id:"authErrors.twilioCannotFetchPhoneNumber.message",defaultMessage:"There is no record of this phone number, please check the number and try again"}}),_=(0,r().YK)({apple_api_status_error:{id:"appleErrors.api.statusError",defaultMessage:"There was a problem with the Apple service."},apple_api_token_error:{id:"appleErrors.api.tokenError",defaultMessage:"There was a problem verifying your identity with Apple."},apple_api_missing_id_error:{id:"appleErrors.api.missingIdError",defaultMessage:"There was a problem getting user information from Apple."},apple_api_missing_access_token_error:{id:"appleErrors.api.missingAccessTokenError",defaultMessage:"Apple failed to authorize the login."},apple_api_missing_beta_app_review_submission:{id:"appleErrors.api.missingBetaAppReviewSubmission",defaultMessage:"Cannot find betaAppReviewSubmission entry."},apple_api_missing_pre_release_version:{id:"appleErrors.api.missingPreReleaseVersion",defaultMessage:"Cannot find preReleaseVersion entry."}}),b=((0,r().YK)({google_drive_token_error:{id:"googleErrors.googleDriveTokenError",defaultMessage:"Error from Google Drive: {errorMessage}"}}),(0,r().YK)({student_github_grant_error:{id:"grantErrors.studentGithubGrantError",defaultMessage:"Error applying the grant to your workspace. Please try again."},student_github_existing_workspace:{id:"grantErrors.studentGithubGrant.existingWorkspace",defaultMessage:"You have already redeemed the GitHub Student Developer Pack on a different workspace."},student_github_not_eligible:{id:"grantErrors.studentGithubGrant.notEligible",defaultMessage:"We cannot verify your GitHub student account."},student_github_already_received_grant:{id:"grantErrors.studentGithubGrant.alreadyReceivedGrant",defaultMessage:"Each GitHub account can only redeem the grant once."}}),(0,r().YK)({non_stripe_subscription:{id:"subscriptionErrors.nonStripeSubscriptionError",defaultMessage:"You have an existing mobile subscription. Please go to the app to manage your subscription."},missing_address:{id:"subscriptionErrors.missingAddressError",defaultMessage:"Address line 1 must exist."},subscription_personal_plan_more_than_one_member:{defaultMessage:"In order to use the Personal plan, your workspace can have only one member.",id:"subscriptionErrors.personalPlanMoreThanOneMember"},invalid_vat:{id:"subscriptionErrors.invalidVatError",defaultMessage:"VAT/GST number is invalid."},coupon_already_applied:{id:"subscriptionErrors.couponAlreadyApplied",defaultMessage:"This coupon has already been applied"},subscription_attempt_from_restricted_region:{id:"updatingSubscriptionDetails.restrictedRegion.genericErrorMessage",defaultMessage:"We are currently not allowing customers to upgrade their subscription from this jurisdiction."},new_subscription_attempt_from_restricted_region:{id:"updatingSubscriptionDetails.restrictedRegion.newSubscriptionErrorMessage",defaultMessage:"We are currently not accepting new customers from this jurisdiction."},billing_address_change_to_restricted_region:{id:"updatingSubscriptionDetails.restrictedRegion.billingAddressErrorMessage",defaultMessage:"We are currently not allowing customers to update their billing address to this jurisdiction."},payment_method_from_restricted_region:{id:"updatingSubscriptionDetails.restrictedRegion.paymentMethodErrorMessage",defaultMessage:"We are currently not accepting payment methods from this jurisdiction."},new_subscription_attempt_using_legacy_plus_price:{id:"subscriptionErrors.createWithLegacyPlusPrice",defaultMessage:"Something went wrong. Please reload Notion and try again. No charges have been made."},add_on_subscription_attempt_from_restricted_region:{id:"updatingSubscriptionDetails.restrictedRegion.addOnSubscriptionErrorMessage",defaultMessage:"We are currently not allowing customers to purchase add-ons from this jurisdiction."},non_admin_insufficient_permissions:{id:"subscriptionErrors.insufficientPermissions",defaultMessage:"You have a subscription that was added on your behalf by Notion. Please reach out to team@makenotion.com to make any changes to this subscription."},invalid_plan:{id:"subscriptionErrors.invalidPlan",defaultMessage:"The plan you have selected is not available."},collection_method_not_allowed:{id:"subscriptionErrors.collectionMethodNotAllowed",defaultMessage:"You cannot select this payment collection method in the app. Please reach out to support."},payment_failed:{id:"subscriptionErrors.paymentFailed",defaultMessage:"Your payment failed. Please try again, try a different payment method, or contact support."},payment_failed_with_invoice_url:{id:"subscriptionErrors.paymentFailedWithInvoiceUrl",defaultMessage:"There was a problem with your payment."},native_invoice_payment_failed:{id:"subscriptionErrors.nativeInvoicePaymentFailed",defaultMessage:"There was a problem with your payment. Please try again."},missing_plan_and_add_ons:{id:"subscriptionErrors.missingPlanAndAddOns",defaultMessage:"A new subscription requires either a plan or add-ons."},cancel_add_ons_without_subscription:{id:"subscriptionErrors.cancelAddOnsWithoutSubscription",defaultMessage:"Can't request add-on cancellation without an active subscription."},cancel_non_existent_add_on:{id:"subscriptionErrors.cancelNonExistentAddOn",defaultMessage:"You can't cancel a non-existent add-on {addOnId}."},inconsistent_billing_intervals:{id:"subscriptionErrors.inconsistentAddOnBillingIntervals",defaultMessage:"All subscription items must have the same billing interval."},subscription_unpaid:{id:"subscriptionErrors.subscriptionUnpaid",defaultMessage:"Your subscription has unpaid invoices. Please pay them before making any changes."},payment_processing:{id:"subscriptionErrors.paymentProcessing",defaultMessage:"Your payment is still processing. Please wait until your payment has completed before making any changes."},missing_mandate_data:{id:"subscriptionErrors.missingMandateData",defaultMessage:"Your payment method could not be updated. Please try again or contact support."},setup_intent_failed:{id:"subscriptionErrors.setupIntentFailed",defaultMessage:"Your payment method could not be updated. Please try again or contact support."},payment_method_declined:{id:"subscriptionErrors.paymentMethodDeclined",defaultMessage:"Your payment method was declined. Please check that the information you entered is correct, or contact your provider."},ai_add_on_not_allowed_for_hipaa:{id:"subscriptionErrors.aiAddOnNotAllowedForHipaa",defaultMessage:"Unable to add AI add-on for HIPAA compliant workspaces."},timed_trials_invalid_plan:{id:"subscriptionErrors.invalidPlan.enterprise.message",defaultMessage:"Please contact Sales for a trial of the Enterprise plan."},timed_trials_not_eligible:{id:"subscriptionErrors.notEligible.message",defaultMessage:"This space is not eligible for a free trial."},no_subscription:{id:"subscriptionErrors.noSubscription",defaultMessage:"This space does not have an active subscription."},invalid_payment_method:{id:"subscriptionErrors.setDefaultPaymentMethod.invalidPaymentMethod",defaultMessage:"The payment method you provided is invalid. Please try another payment method on your account."},set_default_payment_method_failed:{id:"subscriptionErrors.setDefaultPaymentMethod.apiError",defaultMessage:"Your payment method could not be updated. Please try again or contact support."},subscription_not_updatable:{id:"subscriptionErrors.subscriptionNotUpdatable",defaultMessage:"Your subscription requires additional attention. Please contact Notion to make changes."}})),y=(0,r().YK)({referral_user_already_signed_up:{defaultMessage:"User has already signed up.",id:"activateReferral.dialogError.userAlreadySignedUp.errorMessage"},referral_already_activated:{defaultMessage:"Referral has already been activated.",id:"activateReferral.dialogError.referralAlreadyActivated.errorMessage"},referral_no_valid_referral_found:{defaultMessage:"No valid referral found.",id:"activateReferral.dialogError.noValidReferral.errorMessage"},referral_referring_user_not_found:{defaultMessage:"Referring user not found.",id:"activateReferral.dialogError.referringUserNotFound.errorMessage"},referral_cannot_invite_yourself:{defaultMessage:"You cannot invite yourself",id:"activateReferral.dialogError.cannotInviteSelf.errorMessage"},referral_email_not_eligible:{defaultMessage:"This email is not eligible for the referral program. If you think this is a mistake please contact support.",id:"activateReferral.dialogError.emailNotEligible.errorMessage"},referral_already_applied_credit:{defaultMessage:"You have already applied an invitation credit.",id:"activateReferral.dialogError.invitationCreditAlreadyApplied.errorMessage"}}),S=(0,r().YK)({slack_block_not_found:{defaultMessage:"Block not found.",id:"slackAuthorizationErrors.blockNotFound.errorMessage"},slack_user_missing_edit_permission:{defaultMessage:"User cannot edit block.",id:"slackAuthorizationErrors.missingEditPermission.errorMessage"},slack_webhook_not_found:{defaultMessage:"Slack webhook not found.",id:"slackAuthorizationErrors.webhookNotFound.errorMessage"}}),w=(0,r().YK)({generic_error:{defaultMessage:"Something went wrong.",id:"genericErrors.genericErrorMessage"},generic_insufficient_permissions:{defaultMessage:"You do not have permissions to this feature in the requested space.",id:"genericErrors.insufficientPermissions.errorMessage"},generic_insufficient_plan_type:{defaultMessage:"The feature is not available on your current plan type.",id:"genericErrors.insufficientPlanType.errorMessage"}}),k=((0,r().YK)({apply_offer:{defaultMessage:"Error applying the offer to your account. Please try again.",id:"offerErrors.applyOfferError"},get_offer:{defaultMessage:"Error getting the offers you qualify for. Please try again.",id:"offerErrors.getOfferError"}}),(0,r().YK)({offline:{defaultMessage:"Offline.",id:"offlineErrors.offlineErrorMessage"}})),I=(0,r().YK)({invalid_name_error:{defaultMessage:"Invalid name.",id:"invalidNameErrors.errorMessage"}}),A=(0,r().YK)({domain_verification_integration_already_verified:{id:"integrationErrors.domainAlreadyVerified.errorMessage",defaultMessage:"The integration has already verified this domain."}}),x=(0,r().YK)({datadog_token_exists:{id:"externalAuthErrors.datadog.tokenAlreadyExists",defaultMessage:"Another workspace is already connected to your Datadog organization. Please revoke the API key from the Organization settings in Datadog and try again."},datadog_not_an_admin:{id:"externalAuthErrors.error.installDatadogNotAnAdmin",defaultMessage:"You are trying to install this integration to your Datadog organization, but you are not an admin. Please contact your Datadog organization admin to install this integration."},access_token_retrieval_failed:{id:"externalAuthErrors.accessTokenRetrievalFailed",defaultMessage:"Failed to connect to third party service."}}),C=(0,r().YK)({workspace_transfer_reattempt_wrong_user:{id:"workspaceTransferErrors.reattemptWrongUser.errorMessages",defaultMessage:"Not allowed to reattempted transfers to a different user account."},workspace_transfer_invalid_corporate_email:{id:"workspaceTransferErrors.invalidCorporateEmail.errorMessages",defaultMessage:"Cannot transfer workspace to a corporate user account."},workspace_transfer_transfering_state_failed:{id:"workspaceTransferErrors.failedTransfer.errorMessages",defaultMessage:"Transferring workspace failed. Please re-attempt the transfer."},workspace_transfer_no_user_found:{id:"workspaceTransferErrors.noUserFound.errorMessages",defaultMessage:"Cannot transfer workspace to an email without an associated Notion account. Please create a new account with this email, or try another email."},workspace_transfer_change_email_pending_transfer:{id:"workspaceTransferErrors.changeEmail.errorMessages",defaultMessage:"You need to complete the workspace transfer for {workspaceName} before being able change emails."}}),T=(0,r().YK)({workspace_analytics_insufficient_permissions:{id:"workspaceAnalytics",defaultMessage:"You do not have permissions to analytics for the requested space."},audit_log_disabled:{id:"auditLogDisabled",defaultMessage:"Audit log is currently disabled."},managed_user_account_deletion_disabled:{id:"enterpriseErrors.managedUserDeletionDisabled",defaultMessage:"You can't delete your account because it is being managed by your organization."},last_organization_owner_deletion_disabled:{id:"enterpriseErrors.lastOrganizationOwnerDeletionDisabled",defaultMessage:"You can't delete your account because you are the only owner of an organization."},enterprise_only_feature:{id:"enterpriseErrors.enterpriseOnlyFeature",defaultMessage:"This feature is available on Enterprise plans only"},guest_invite_request_requestor_insufficient_permissions:{id:"enterpriseErrors.guestInviteRequestRequestorInsufficientPermissions",defaultMessage:"Requesting user does not have valid permissions to invite a guest to this page."},guest_invite_request_guest_invalid:{id:"enterpriseErrors.guestInviteRequestGuestInvalid",defaultMessage:"User is not valid to be invited as a guest."},guest_invite_request_disabled:{id:"enterpriseErrors.guestInviteRequestDisabled",defaultMessage:"Guest invite requests are currently disabled."},user_cannot_delete_account:{id:"enterpriseErrors.userCannotDeleteAccount",defaultMessage:"This account cannot be deleted."},cant_access_workspace_from_network:{id:"enterpriseErrors.cantAccessWorkspaceFromNetwork",defaultMessage:"You do not have access to this workspace on your current network. Please change networks or contact your network administrator."}}),M=(0,r().YK)({active_space_content_duplication:{id:"spaceContentDuplication.activeRequest",defaultMessage:"Cannot edit content while this workspace's contents are being duplicated."},completed_space_content_duplication:{id:"spaceContentDuplication.completed",defaultMessage:"Cannot edit content for a workspace that has been migrated to another workspace."}}),P=(0,r().YK)({domain_settings_prevent_space_join:{id:"managedUsersDisallowedOperationErrorMessages.domainSettingsPreventSpaceJoin",defaultMessage:"Users from {disallowedEmailDomains} cannot join or be invited to external workspaces due to administrative restrictions. For more information, they should contact their organization's administrator."}}),B=(0,r().YK)({template_not_exists:{id:"templateSubmissionErrorMessages.templateNotExists",defaultMessage:"This does not seem to be a valid template. Try a different link?"},template_not_valid_block_id:{id:"templateSubmissionErrorMessages.templateNotValidBlockId",defaultMessage:"This does not seem to be a valid template. Try a different link?"},template_not_owned_by_user:{id:"templateSubmissionErrorMessages.templateNotOwnedByUser",defaultMessage:"You can only publish a template created by yourself."},template_not_page:{id:"templateSubmissionErrorMessages.templateNotPage",defaultMessage:"This template is not a page. Try a different link?"},template_creation_failed:{id:"templateSubmissionErrorMessages.templateCreateFailed",defaultMessage:"Could not submit the template. Please contact templates@makenotion.com or try it later."},template_over_rate_limit:{id:"templateSubmissionErrorMessages.templateOverRateLimit",defaultMessage:"Please try again after 1 minute."},template_not_published:{id:"templateSubmissionErrorMessages.templateNotPublished",defaultMessage:"The template has not been published to web."},template_not_allowed_for_duplicate:{id:"templateSubmissionErrorMessages.templateNotAllowedForDuplicate",defaultMessage:"The template has not been allowed for duplication."},user_is_not_template_creator:{id:"templateSubmissionErrorMessages.userIsNotTemplateCreator",defaultMessage:"We cannot locate your template creator profile. Please create a profile first."},template_not_on_public_domain:{id:"templateSubmissionErrorMessages.templateNotOnPublicDomain",defaultMessage:"The template link is not on a public domain. Please use your notion.site link in publish tab."},template_missing_name:{id:"templateSubmissionErrorMessages.templateMissingName",defaultMessage:"Please enter a name for your template."},template_name_too_long:{id:"templateSubmissionErrorMessages.templateNameTooLong",defaultMessage:"Your template name is too long. Please limit it to 50 characters."},template_name_invalid_words:{id:"templateSubmissionErrorMessages.templateNameInvalidWords",defaultMessage:'Please remove "{word}" from your template name.'},template_invalid_price:{id:"templateSubmissionErrorMessages.templateInvalidPrice",defaultMessage:"Please enter a valid price for your template."},template_below_minimum_price:{id:"templateSubmissionErrorMessages.templatePriceTooHigh",defaultMessage:"Paid templates must be at least $0.99."},template_above_maximum_price:{id:"templateSubmissionErrorMessages.templatePriceTooLow",defaultMessage:"Paid templates must be less than $5000.00."},template_missing_description:{id:"templateSubmissionErrorMessages.templateMissingDescription",defaultMessage:"Please add a description for your template."},template_description_too_long:{id:"templateSubmissionErrorMessages.templateDescriptionTooLong",defaultMessage:"Your description is too long. Please limit it to 280 characters."},template_missing_categories:{id:"templateSubmissionErrorMessages.templateMissingCategories",defaultMessage:"Please select at least one category for your template"},template_categories_too_long:{id:"templateSubmissionErrorMessages.templateCategoriesTooLong",defaultMessage:"Please select no more than 3 categories for your template."},template_insecure_url:{id:"templateSubmissionErrorMessages.templateInsecureUrl",defaultMessage:"Please enter a secure URL to purchase your template."},template_limit_too_large:{id:"templateSubmissionErrorMessages.templateLimitTooLarge",defaultMessage:"Limit is too large"},template_offset_too_large:{id:"templateSubmissionErrorMessages.templateOffsetTooLarge",defaultMessage:"Offset is too large"},template_invalid_purchase_url:{id:"templateSubmissionErrorMessages.templateInvalidPurchaseUrl",defaultMessage:"Please enter a valid URL. Example: https://www.example.com/"},template_notion_domain_as_purchase_url:{id:"templateSubmissionErrorMessages.templateNotionDomainAsPurchaseUrl",defaultMessage:"Please provide a link to a third-party payment platform."},template_invalid_payment_destination:{id:"templateSubmissionErrorMessages.templateInvalidPaymentProcessor",defaultMessage:"This payment platform is not supported. Please use another."},template_url_too_long:{id:"templateSubmissionErrorMessages.templatePurchaseUrlTooLong",defaultMessage:"This link is too long. Please use a shorter one."},template_missing_purchase_url:{id:"templateSubmissionErrorMessages.templateMissingPurchaseUrl",defaultMessage:"Please enter a purchase URL for your template."},template_missing_long_description:{id:"templateSubmissionErrorMessages.templateMissingLongDescription",defaultMessage:"Please add a detailed description for your template."},template_long_description_too_long:{id:"templateSubmissionErrorMessages.templateLongDescriptionTooLong",defaultMessage:"You description is too long. Please limit it to 5000 characters"},template_long_description_contains_html:{id:"templateSubmissionErrorMessages.templateLongDescriptionContainsHtml",defaultMessage:"Long description contains HTML"},check_template_exists_failed:{id:"templateSubmissionErrorMessages.checkTemplateExistsFailed",defaultMessage:"We could not verify if the template has been published. Please try again later."},template_already_exists:{id:"templateSubmissionErrorMessages.templateAlreadyExists",defaultMessage:"This template has already been published or in review. Please try another one."},template_draft_edit_not_allowed:{id:"templateDraftSubmissionErrorMessages.editNotAllowed",defaultMessage:"Users cannot edit template drafts in review."},template_draft_not_found:{id:"templateDraftSubmissionErrorMessages.templateDraftNotExists",defaultMessage:"The template draft to submit does not exist!"},template_slug_too_long:{id:"templateSubmissionErrorMessages.templateSlugTooLong",defaultMessage:"Your template slug is too long. Please limit it to 60 characters."},template_slug_invalid:{id:"templateSubmissionErrorMessages.templateSlugInvalid",defaultMessage:"Your template slug can only contain lowercase letters, numbers, and hyphens(-)."},template_slug_invalid_hyphens:{id:"templateSubmissionErrorMessages.templateSlugInvalidHyphens",defaultMessage:"Your template slug cannot start or end with a hyphen(-). Also, it cannot have two consecutive hyphens(-)."},template_slug_invalid_words:{id:"templateSubmissionErrorMessages.templateSlugInvalidWords",defaultMessage:"Please don't use 'templates' or 'notion' in your template slug."},template_slug_already_exists:{id:"templateSubmissionErrorMessages.templateSlugAlreadyExists",defaultMessage:"This template slug has already been used. Please try another one."},template_draft_status_invalid_for_user:{id:"templateDraftSubmissionErrorMessages.statusInvalid",defaultMessage:"Users can only modify template draft status to draft or in review."},template_screenshots_limit:{id:"templateDraftSubmissionErrorMessage.screenshotsLimit",defaultMessage:"Template can only have a max of 5 screenshots."},template_slug_empty:{id:"templateSubmissionErrorMessages.templateSlugEmpty",defaultMessage:"Template slug cannot be empty."},template_locale_change_not_allowed:{id:"templateSubmissionErrorMessage.localeChangeNotAllowed",defaultMessage:"Locale cannot be changed after the template has been published."},template_draft_id_invalid:{id:"templateDraftSubmissionErrorMessages.templateDraftIdInvalid",defaultMessage:"Template draft id is not a valid UUID."},template_draft_not_owned_by_user:{id:"templateDraftSubmissionErrorMessages.templateDraftNotOwnedByUser",defaultMessage:"You can only modify a template draft created by yourself."},template_invalid_image_url:{id:"templateSubmissionErrorMessages.templateInvalidImageUrl",defaultMessage:"Submitted images must be hosted by Notion."},template_invalid_custom_email_snippet:{id:"templateSubmissionErrorMessages.templateInvalidCustomEmailSnippet",defaultMessage:"Invalid custom email snippet."}}),R=(0,r().YK)({template_missing_url:{id:"templateImageUploaderErrorMessages.templateMissingUrl",defaultMessage:"Template URL cannot be empty."},template_not_child_of_parent:{id:"templateImageUploaderErrorMessages.templateNotChildOfParent",defaultMessage:"This link doesn’t seem to belong to the same template. Please try again."}}),E=(0,r().YK)({template_video_link_invalid:{id:"templateVideoUploaderErrorMessages.templateVideoLinkInvalid",defaultMessage:"This doesn’t look like a YouTube or Vimeo link. Please try again."}}),D=(0,r().YK)({template_to_delete_not_exists:{id:"templateDeletionErrorMessages.templateToDeleteNotExists",defaultMessage:"The template to delete does not exist. Please try another one."},template_draft_to_delete_not_exists:{id:"templateDeletionErrorMessages.templateDeletionFailed",defaultMessage:"Could not delete the template draft. Please contact templates@makenotion.com for help."},template_to_delete_not_owned_by_requesting_user:{id:"templateDeletionErrorMessages.templateNotOwnedByRequestingUser",defaultMessage:"You can only delete a template created by yourself. Please try another one."},template_draft_to_delete_in_review:{id:"templateDeletionErrorMessages.templateDraftInReview",defaultMessage:"The template draft is in review. Please try to delete after it is published or rejected."},template_draft_to_delete_not_owned_by_requesting_user:{id:"templateDeletionErrorMessages.templateDraftNotOwnedByRequestingUser",defaultMessage:"You can only delete a template draft created by yourself. Please try another one."},template_draft_to_delete_cannot_roll_back:{id:"templateDeletionErrorMessages.templateDraftCannotRollBack",defaultMessage:"The template draft cannot be rolled back."}}),N=(0,r().YK)({email_verification_required:{id:"microsoftErrorMessages.emailVerificationRequired",defaultMessage:"You must do a one-time verification of your Microsoft-associated email to login to Notion."}}),L=(0,r().YK)({marketplace_seller_test_webhook_rate_limit:{id:"templateCreatorProfileFormErrorMessages.templateCreatorTestWebhookRateLimit",defaultMessage:"Please wait before testing your webhook again."},template_creator_missing_name:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorMissingName",defaultMessage:"Please enter a display name for your profile."},template_creator_name_too_long:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorNameTooLong",defaultMessage:"Your display name is too long. Please limit it to 50 characters."},template_creator_missing_handle:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorMissingHandle",defaultMessage:"Please enter a handle for your profile. It will be used in your profile URL."},template_creator_invalid_handle:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorInvalidHandle",defaultMessage:"Your handle can only contain lowercase letters, numbers, underscores, and dashes."},template_creator_handle_too_long:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorHandleTooLong",defaultMessage:"Your handle is too long. Please limit it to 50 characters."},template_creator_missing_email:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorMissingEmail",defaultMessage:"Please enter a contact email address for your profile."},template_creator_invalid_email:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorInvalidEmail",defaultMessage:"Please enter a valid contact email address."},template_creator_missing_description:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorMissingDescription",defaultMessage:"Please add a description for your profile."},template_creator_webhook_url_invalid:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorWebhookUrlInvalid",defaultMessage:"Invalid URL"},template_creator_description_too_long:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorDescriptionTooLong",defaultMessage:"Your description is too long. Please limit it to 280 characters."},template_creator_invalid_link:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorInvalidLink",defaultMessage:"Please enter a valid link. Links must start with https://."},template_creator_link_too_long:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorLinkTooLong",defaultMessage:"This link is too long. Please use a shorter one."},template_creator_name_not_allowed:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorNameNotAllowed",defaultMessage:"This name is not allowed. Please try another one."},template_creator_name_reserved:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorNameReserved",defaultMessage:'Names containing reserved brand names or "notion" cannot be used. Please contact templates@makenotion.com.'},template_creator_creation_failed:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorCreationFailed",defaultMessage:"Could not create the creator. Please contact templates@makenotion.com or try it later."},template_creator_update_failed:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorUpdateFailed",defaultMessage:"Could not update the creator. Please contact templates@makenotion.com or try it later."},check_handle_exists_failed:{id:"templateCreatorSubmissionValidationErrorMessages.checkHandleExistsFailed",defaultMessage:"We could not verify if the submitted handle exists. Please try later."},handle_already_exists:{id:"templateCreatorSubmissionValidationErrorMessages.handleAlreadyExists",defaultMessage:'The creator handle "{handle}" already exists. Please try another one.'},template_creator_user_id_not_match:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorUserIdNotMatch",defaultMessage:"User id does not match the creator's user id."},template_creator_invalid_image_url:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorInvalidImageUrl",defaultMessage:"Please upload a valid image through the /profile page."}}),F=(0,r().YK)({duplicated_pinned_templates:{id:"templateUpdatePinnedTemplatesErrorMessages.duplicatedPinnedTemplates",defaultMessage:"There are duplicated pinned templates. Please remove duplication and try again."},too_many_pinned_templates:{id:"templateUpdatePinnedTemplatesErrorMessages.tooManyPinnedTemplates",defaultMessage:"You can only pin up to 4 templates. Please remove some and try again."},pinned_templates_not_exist:{id:"templateUpdatePinnedTemplatesErrorMessages.pinnedTemplatesNotExist",defaultMessage:"Some pinned templates do not exist. Please remove them and try again."},pinned_templates_not_owned_by_requesting_user:{id:"templateUpdatePinnedTemplatesErrorMessages.pinnedTemplatesNotOwnedByRequestingUser",defaultMessage:"You can only pin templates created by yourself."}}),U=(0,r().YK)({airtable_unexpected_response:{id:"airtableError.unexpectedResponse",defaultMessage:"Failed to submit application. Please try again later."}}),O=(0,r().YK)({startup_input_empty:{id:"startupApplicationError.inputMissing",defaultMessage:"This field is required."},startup_unselected:{id:"startupApplicationError.unselected",defaultMessage:"A selection is required."},startup_invalid_email:{id:"startupApplicationError.invalidEmail",defaultMessage:"The email address is invalid."},startup_personal_email:{id:"startupApplicationError.personalEmail",defaultMessage:"A work email is required."},startup_invalid_url:{id:"startupApplicationError.invalidUrl",defaultMessage:"The provided URL is invalid."},startup_invalid_country:{id:"startupApplicationError.invalidCountry",defaultMessage:"The provided country is not supported."},startup_missing_field_server_side:{id:"startupApplicationError.missingField",defaultMessage:"A required field is missing."},startup_invalid_partner:{id:"startupApplicationError.invalidPartner",defaultMessage:"The provided referral partner is not valid."},startup_not_admin_of_space:{id:"startupApplicationError.notAdmin",defaultMessage:"User is not an admin of the space."}}),V=(0,r().YK)({student_group_url_invalid:{id:"studentGroupSignupError.urlInvalid",defaultMessage:"This url is invalid."},student_group_response_missing:{id:"studentGroupSignupError.responseMissing",defaultMessage:"This field is required."},student_group_response_too_long:{id:"studentGroupSignupError.responseTooLong",defaultMessage:"Your response is too long. Please limit your answers to 2000 characters."},student_institution_domain_mismatch:{id:"studentGroupSignupError.institutionDomainMismatch",defaultMessage:"This institution does not match your email domain. Please make sure you're logged in to a Notion account registered with your student email."},student_institution_not_in_allowlist:{id:"studentGroupSignupError.institutionNotInAllowlist",defaultMessage:"Institution not found in list."},student_group_user_not_found:{id:"studentGroupSignupError.userNotFound",defaultMessage:"User not found."},student_group_space_not_found:{id:"studentGroupSignupError.spaceNotFound",defaultMessage:"Space not found."},student_email_not_admin_of_space:{id:"studentGroupSignupError.notAdminOfSpace",defaultMessage:"User is not an admin of the space."},education_group_application_over_rate_limit:{id:"studentGroupSignupError.overRateLimit",defaultMessage:"You have submitted too many times, please try again later."},student_group_link_to_organization_domain_mismatch:{id:"studentGroupSignupError.linkToOrganizationDomainMismatch",defaultMessage:"Please enter a link that is on your institution's official domain."}}),j=(0,r().YK)({marketplace_refund_custom_reason_body_required:{id:"marketplaceRefundError.customReasonBodyRequired",defaultMessage:"Please enter a description"},marketplace_refund_custom_reason_too_long:{id:"marketplaceRefundError.customReasonTooLong",defaultMessage:"Description should be less than 1000 characters"},marketplace_refund_custom_reason_too_short:{id:"marketplaceRefundError.customReasonTooShort",defaultMessage:"Description should be at least 10 characters"},marketplace_refund_requires_valid_acquisition:{id:"marketplaceRefundError.requiresValidAcquisition",defaultMessage:"Acquisition must be valid"},marketplace_refund_acquisition_too_old:{id:"marketplaceRefundError.acquisitionTooOld",defaultMessage:"Acquisition is too old, refunds must be requested within 14 days of purchase"},marketplace_refund_acquisition_free:{id:"marketplaceRefundError.acquisitionFree",defaultMessage:"Unable to refund free acquisitions"},marketplace_refund_acquisition_already_has_active_refund:{id:"marketplaceRefundError.acquisitionAlreadyHasActiveRefund",defaultMessage:"This purchase already has an active refund"},marketplace_refund_only_acquirer_can_request:{id:"marketplaceRefundError.onlyAcquirerCanRequest",defaultMessage:"Only the acquirer can request a refund"},marketplace_refund_acquisition_missing_succeeded_time:{id:"marketplaceRefundError.acquisitionMissingSucceededTime",defaultMessage:"Acquisition does not have a succeeded time"}}),z=(0,r().YK)({marketplace_coupon_not_found:{id:"marketplaceCouponError.notFound",defaultMessage:"This is an invalid coupon code."},marketplace_coupon_expired:{id:"marketplaceCouponError.expired",defaultMessage:"The coupon code has expired."},marketplace_coupon_max_uses_reached:{id:"marketplaceCouponError.maxUsesReached",defaultMessage:"The coupon code has reached its maximum usage."}}),q=(0,r().YK)({marketplace_coupon_submission_invalid_code:{id:"marketplaceCouponSubmissionError.invalidCode",defaultMessage:"Invalid coupon code."},marketplace_coupon_submission_invalid_discount:{id:"marketplaceCouponSubmissionError.invalidDiscount",defaultMessage:"Invalid discount."},marketplace_coupon_submission_invalid_date:{id:"marketplaceCouponSubmissionError.invalidDate",defaultMessage:"Date is invalid."},marketplace_coupon_submission_invalid_date_in_past:{id:"marketplaceCouponSubmissionError.invalidDateInPast",defaultMessage:"Date cannot be in the past."},marketplace_coupon_submission_start_date_end_date_out_of_order:{id:"marketplaceCouponSubmissionError.startDateEndDateOutOfOrder",defaultMessage:"Start date cannot be after end date."},marketplace_coupon_submission_invalid_usage_limit:{id:"marketplaceCouponSubmissionError.invalidUsageLimit",defaultMessage:"Invalid usage limit."},marketplace_coupon_submission_invalid_usage_limit_already_surpassed:{id:"marketplaceCouponSubmissionError.invalidUsageLimitAlreadySurpassed",defaultMessage:"Invalid usage limit, coupon has already been used more than this limit allows."},marketplace_coupon_submission_code_already_in_use:{id:"marketplaceCouponSubmissionError.codeAlreadyInUse",defaultMessage:"Coupon code already in use."},marketplace_coupon_submission_invalid_eligible_listing_ids:{id:"marketplaceCouponSubmissionError.invalidEligibleListingIds",defaultMessage:"You must select at least one template to proceed."}}),H=(0,r().YK)({marketplace_listing_review_invalid_rating:{id:"marketplaceReviewError.noRatingError",defaultMessage:"Please give this template a rating"},marketplace_listing_review_existing_review:{id:"marketplaceReviewError.existingReviewError",defaultMessage:"A review already exists"},marketplace_listing_review_title_too_short:{id:"marketplaceReviewError.titleTooShort",defaultMessage:"Your title is too short. Please enter at least 3 characters."},marketplace_listing_review_title_too_long:{id:"marketplaceErrors.marketplaceListingReviewTitleTooLong",defaultMessage:"Your review title is too long. Please limit it to 100 characters."},marketplace_listing_review_description_too_short:{id:"marketplaceErrors.marketplaceListingReviewDescriptionTooShort",defaultMessage:"Your review is too short. Please enter at least 50 characters."},marketplace_listing_review_description_too_long:{id:"marketplaceErrors.marketplaceListingReviewDescriptionTooLong",defaultMessage:"Your review is too long. Please limit it to 1,500 characters."},marketplace_listing_review_name_too_short:{id:"marketplaceErrors.marketplaceListingReviewNameTooShort",defaultMessage:"Please enter a name to display on your review."},marketplace_listing_review_name_too_long:{id:"marketplaceErrors.marketplaceListingReviewNameTooLong",defaultMessage:"Your name is too long. Please limit it to 40 characters."},marketplace_listing_review_creator_response_too_short:{id:"marketplaceReviewError.creatorResponseTooShort",defaultMessage:"Your response is too short. Please enter at least 5 characters."},marketplace_listing_review_creator_response_too_long:{id:"marketplaceReviewError.creatorResponseTooLong",defaultMessage:"Your response is too long. Please limit it to 1,500 characters."}}),W=(0,r().YK)({user_not_a_creator:{defaultMessage:"Onboarding is not available as you are not a template creator.",id:"marketplaceErrors.userNotACreator.message"},marketplace_metrics_no_access:{defaultMessage:"No access to this creator or listing",id:"marketplaceErrors.metricsNoAccess.message"},onboarding_disabled:{defaultMessage:"Onboarding is disabled for your account. Please contact support if you believe this is an error.",id:"marketplaceErrors.onboardingDisabled.message"},marketplace_default_error:{defaultMessage:"Something went wrong. Please try again later.",id:"marketplaceErrors.defaultError.message"},marketplace_product_not_available:{defaultMessage:"Product not available on Notion Marketplace.",id:"marketplaceErrors.productNotAvailable.message"},marketplace_invalid_tax_id:{defaultMessage:"Invalid tax ID.",id:"marketplaceErrors.invalidTaxId.message"},marketplace_already_refunded:{defaultMessage:"You have already refunded this product",id:"marketplaceErrors.alreadyRefunded.message"},marketplace_purchasing_disabled:{defaultMessage:"This content does not exist",id:"marketplaceErrors.purchasingDisabled.message"},marketplace_metrics_creator_or_listing_not_found:{defaultMessage:"Creator or listing not found",id:"marketplaceErrors.metricsCreatorOrListingNotFound.message"},marketplace_sanctioned_country:{defaultMessage:"You cannot make Marketplace purchases from this country.",id:"marketplaceErrors.billingAddressRestricted.message"},marketplace_guest_user_error:{defaultMessage:"Guest users are not allowed to purchase products.",id:"marketplaceErrors.guestUserError.message"}}),K=(0,r().YK)({space_does_not_exist:{defaultMessage:"Workspace must exist",id:"publicDomainError.invalidSpace.message"},public_domain_does_not_exist:{defaultMessage:"Domain must exist",id:"publicDomainError.invalidDomain.message"},public_domain_disallowed:{defaultMessage:"Domain not allowed",id:"publicDomainError.disallowedDomain.message"},public_domain_unavailable:{defaultMessage:"Domain not available",id:"publicDomainError.unavailableDomain.message"},public_domain_name_invalid:{defaultMessage:"Domain name is not valid",id:"publicDomainError.invalidDomainName.message"},incorrect_custom_public_domain_format:{defaultMessage:"Include a subdomain (e.g., www.example.org) ",id:"publicDomainError.missingSubdomainForCustomDomain.message"},public_domain_cannot_rename_custom:{defaultMessage:"Cannot rename a custom domain",id:"publicDomainError.cannotRenameDomain.message"},public_domain_non_custom_validation:{defaultMessage:"Cannot validate domain",id:"publicDomainError.cannotValidateDomain.message"},default_public_domain_exists:{defaultMessage:"Default domain exists",id:"publicDomainError.existingDefaultDomain.message"},maximum_public_domains_reached:{defaultMessage:"Maximum domains created",id:"publicDomainError.maxDomainsCreated.message"},payment_required:{defaultMessage:"Payment required",id:"publicDomainError.paymentRequired.message"},default_public_domain_deletion:{defaultMessage:"Default domain cannot be deleted",id:"publicDomainError.defaultDomainDeletion.message"}}),G=(0,r().YK)({setting_overridden_by_organization:{id:"organizationErrors.settingOverriddenByOrganization",defaultMessage:"You can't update this setting because it's being overridden by your organization."}}),$=(0,r().YK)({default:{id:"fallbackHttpErrorMessages.default",defaultMessage:"Oops, something went wrong. ({errorCode})"},defaultTryAgainLater:{id:"fallbackHttpErrorMessages.defaultTryAgainLater",defaultMessage:"Oops, something went wrong. Please try again in a few minutes. ({errorCode})"}}),Y=(0,r().YK)({sanctioned_entity:{defaultMessage:"You may not access Notion from a prohibited jurisdiction.",id:"sanctionErrors.sanctionedEntityProhibited.errorMessage"}}),Q=(0,r().YK)({block_purged:{defaultMessage:"This page has passed the retention period and has been permanently deleted.",id:"blockRestorationErrors.blockPurged.errorMessage"}}),Z=(0,r().YK)({marketplace_export_purchases_csv_over_rate_limit:{defaultMessage:"You can only export purchases CSV once every hour.",id:"marketplaceExportPurchasesCSVError.overRateLimit"}}),X=(0,r().YK)({slug_unavailable:{defaultMessage:"Sorry, slug is taken by {pageName}",id:"updateSlug.unavailableSlug"},slug_invalid:{defaultMessage:"Sorry, slug is not valid",id:"updateSlug.invalidSlug"}});function J(e){const{type:t}=e;return(0,i().O)(a,t)&&a[t]||(0,i().O)(s,t)&&s[t]||(0,i().O)(l,t)&&l[t]||(0,i().O)(c,t)&&c[t]||(0,i().O)(p,t)&&p[t]||(0,i().O)(g,t)&&g[t]||(0,i().O)(f,t)&&f[t]||(0,i().O)(b,t)&&b[t]||(0,i().O)(y,t)&&y[t]||(0,i().O)(S,t)&&S[t]||(0,i().O)(w,t)&&w[t]||(0,i().O)(v,t)&&v[t]||(0,i().O)(_,t)&&_[t]||(0,i().O)(k,t)&&k[t]||(0,i().O)(I,t)&&I[t]||(0,i().O)(A,t)&&A[t]||(0,i().O)(x,t)&&x[t]||(0,i().O)(C,t)&&C[t]||(0,i().O)(T,t)&&T[t]||(0,i().O)(M,t)&&M[t]||(0,i().O)(P,t)&&P[t]||(0,i().O)(h,t)&&h[t]||(0,i().O)(B,t)&&B[t]||(0,i().O)(L,t)&&L[t]||(0,i().O)(N,t)&&N[t]||(0,i().O)(D,t)&&D[t]||(0,i().O)(R,t)&&R[t]||(0,i().O)(E,t)&&E[t]||(0,i().O)(Y,t)&&Y[t]||(0,i().O)(V,t)&&V[t]||(0,i().O)(U,t)&&U[t]||(0,i().O)(O,t)&&O[t]||(0,i().O)(H,t)&&H[t]||(0,i().O)(W,t)&&W[t]||(0,i().O)(F,t)&&F[t]||(0,i().O)(K,t)&&K[t]||(0,i().O)(G,t)&&G[t]||(0,i().O)(F,t)&&F[t]||(0,i().O)(Q,t)&&Q[t]||(0,i().O)(Z,t)&&Z[t]||(0,i().O)(j,t)&&j[t]||(0,i().O)(X,t)&&X[t]||(0,i().O)(z,t)&&z[t]||(0,i().O)(q,t)&&q[t]||void 0}function ee(e,t){const o=ne(e,oe(t.clientData));if(o)return o}function te(e,t){const o=t.body;if((0,n().op)(o)){const t=ee(e,o);if(t)return t}if(t.offline)return e.formatMessage(k.offline);switch(t.status){case 429:case 502:case 503:case 504:return e.formatMessage($.defaultTryAgainLater,{errorCode:t.status});default:return e.formatMessage($.default,{errorCode:t.status})}}function oe(e){return(0,n().md)(e)&&e.errors[0].clientData?e.errors[0].clientData:e}function ne(e,t){const o=J(t);if(o)return"messageValues"in t?e.formatMessage(o,t.messageValues):e.formatMessage(o)}function re(e,t){if((0,n().pA)(t)){const o=J(t.clientData);if(o)return"messageValues"in t.clientData?e.formatMessage(o,t.clientData.messageValues):e.formatMessage(o)}return e.formatMessage(w.generic_error)}},898808:(e,t,o)=>{o.d(t,{x:()=>m});o(296540);var n=()=>o(484714),r=()=>o(56366),i=()=>o(401497),a=()=>o(278238),s=()=>o(945778),l=()=>o(614505),c=()=>o(437622),d=()=>o(351360),u=()=>o(630116),p=o(474848);function m(e){const{store:t,size:o=16,innerInitialSize:m,innerEmojiOrFlatIconSize:g,style:f,iconContainerStyles:v,iconBoxStyles:h,disabled:_=!1,onChange:b=(()=>{})}=e,y=(0,n().v3)(),{name:S,icon:w}=(0,r().K8)((()=>{const o=e.parentSpaceStore??d().default.state.currentSpaceStore;return t?t instanceof u().h4?{name:t.getName(),icon:e.icon??t.getIcon()}:{name:(0,c().GK)(y,t),icon:e.icon??(0,c().c2)(y,t)}:{name:o&&`team-icon-${o.id}`,icon:e.icon}}),[t,y,e.icon,e.parentSpaceStore],{useDeepEqual:!0}),k=!(null!=w&&w.icon)||(0,a().T8)(w.icon)||(0,s().A)(w.icon),I=!(null!=w&&w.icon),A=(0,i().IS)((e=>({backgroundContainer:{...k?{background:w&&(0,a().T8)(w.icon)?(0,a().ez)({icon:w.icon,mode:e.mode,useLightGrayColor:!1}):e.regularDividerColor,width:o,height:o,...v}:{},...f},iconBox:{background:"unset",...h}})),[w,h,v,k,o,f]),x=e.iconLoggingData||t&&{recordTable:t.table,source:"team_settings"},C=k&&(!I||m);return(0,p.jsx)(l().A,{title:S,icon:w,size:C?m??.9*o:o,emojiSize:k?g??.78*o:o,isEmptyPage:!1,style:A.backgroundContainer,iconBoxStyles:A.iconBox,isLarge:!0,largeIcon:!0,iconLoggingData:x,..._?{disabled:!0}:{disabled:!1,onChange:b,bucket:"public"},mediaPickerTabs:["icon","emoji","custom"]})}},899038:(e,t,o)=>{o.d(t,{P_:()=>u,aZ:()=>p,s9:()=>d,IA:()=>c});const n={TypeScript:async()=>({plugins:[(await o.e(46030).then(o.t.bind(o,546030,23))).default],parser:"babel"}),JavaScript:async()=>({plugins:[(await o.e(46030).then(o.t.bind(o,546030,23))).default],parser:"babel"}),GraphQL:async()=>({plugins:[(await o.e(53491).then(o.t.bind(o,853491,23))).default],parser:"graphql"}),HTML:async()=>({plugins:[(await o.e(25409).then(o.t.bind(o,325409,23))).default],parser:"html"}),CSS:async()=>({plugins:[(await o.e(64583).then(o.t.bind(o,564583,23))).default],parser:"css"}),Scss:async()=>({plugins:[(await o.e(64583).then(o.t.bind(o,564583,23))).default],parser:"scss"}),JSON:async()=>({plugins:[(await o.e(46030).then(o.t.bind(o,546030,23))).default],parser:"json"}),XML:async()=>({plugins:[await Promise.all([o.e(62475),o.e(32212),o.e(20148)]).then(o.t.bind(o,520148,23))],parser:"xml",prettierOptionsOverride:{xmlWhitespaceSensitivity:"ignore"}}),Rust:async()=>({plugins:[await Promise.all([o.e(32212),o.e(76537)]).then(o.bind(o,776537))],parser:"jinx-rust"})};var r=()=>o(919709),i=()=>o(896628),a=()=>o(246826),s=()=>o(606952),l=()=>o(317909);function c(e){const{blocks:t,language:o,transaction:n}=e,i=r().x9d(o);for(const r of t)a().zv({store:r.getPropertiesStore(),data:{language:i},transaction:n})}function d(e){const{environment:t,blocks:o,previewFormat:n}=e;l().createAndCommit({userAction:"codeBlockActions.setPersistedCodePreviewFormat",environment:t,canUndo:!0,perform:e=>{i().zA({stores:o,update:{code_preview_format:n},transaction:e})}})}async function u(e){const{codeSnippet:t,language:r}=e,i=n[r];if(!i)return;const{parser:a,plugins:s,prettierOptionsOverride:l}=await i();let c="";try{c=(await o.e(73891).then(o.t.bind(o,873891,23))).format(t,{parser:a,plugins:s,...l})}finally{if(!c||c===t)return}return c=function(e){const t=e.split("\n");t.length>0&&""===t[t.length-1].trim()&&t.pop();return t.join("\n")}(c),c}async function p(e){const{codeBlockStore:t,environment:o}=e,{title:n,language:i}=t.getProperties(),a=r().q4_(n);if(!a||0===a.length)return;const c=r().q4_(i),d=await u({codeSnippet:a,language:c});if(!d)return;const p=r().x9d(d);l().createAndCommit({userAction:"codeBlockActions.formatCode",environment:o,canUndo:!0,perform:e=>{s().KY({environment:t.environment,store:t.getBlockTitleStore(),value:p,transaction:e})}})}},899193:(e,t,o)=>{o.d(t,{DW:()=>a,L7:()=>s,n_:()=>i});var n=()=>o(973647),r=()=>o(545206);function i(e){r().A.update((t=>({...t,[e]:{taskStatus:"in_progress",completeBlocks:0,totalBlocks:0}})))}function a(e,t){const o={taskStatus:e.taskStatus,...n().Q.isSuccess(e)?{completeBlocks:e.value.completeBlocks,totalBlocks:e.value.totalBlocks}:{}};r().A.update((e=>({...e,[t]:o})))}function s(e){r().A.update((t=>({...t,[e]:void 0})))}},899453:(e,t,o)=>{o.d(t,{K6:()=>i,c3:()=>l,j$:()=>s,zB:()=>a});var n=()=>o(878060),r=()=>o(317909);function i(e){const{environment:t,store:o,propertyId:i,id:a,position:s,transaction:l}=e;let c;c="before"===s.type?{pointer:o.pointer,path:["properties",i],command:"addRelationBefore",args:{id:a,spaceId:o.getSpaceId(),before:s.before}}:{pointer:o.pointer,path:["properties",i],command:"addRelationAfter",args:{id:a,spaceId:o.getSpaceId(),after:s.after}},r().applyOperation({store:o,operation:c,transaction:l}),n().n({environment:t,store:o,relationPropertyId:i})}function a(e){const{environment:t,store:o,propertyId:i,id:a,transaction:s}=e;r().applyOperation({store:o,operation:{pointer:o.pointer,path:["properties",i],command:"removeRelation",args:{id:a,spaceId:o.getSpaceId()}},transaction:s}),n().n({environment:t,store:o,relationPropertyId:i})}function s(e){const{environment:t,sourceStore:o,destStore:n,propertyWithInverse:r,position:a,transaction:s}=e;i({environment:t,store:o,propertyId:r.property,id:n.id,position:a,transaction:s}),i({environment:t,store:n,propertyId:r.inverse,id:o.id,transaction:s,position:{type:"after"}})}function l(e){const{environment:t,sourceStore:o,destStore:n,propertyWithInverse:r,transaction:i}=e;a({environment:t,store:o,propertyId:r.property,id:n.id,transaction:i}),a({environment:t,store:n,propertyId:r.inverse,id:o.id,transaction:i})}},899677:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1,openAsPage:!1,openedTimeMs:void 0,sessionId:void 0,isPublicPageSearch:!1,searchMode:"default"}}closeAndResetMetricsState(){this.update((e=>({...e,open:!1,openAsPage:!1,openedTimeMs:void 0,sessionId:void 0})))}isOpen(){return this.state.open||this.state.openAsPage}}const r=new n},899963:(e,t,o)=>{o.d(t,{Bw:()=>S,Hr:()=>m,I:()=>R,KO:()=>_,Lt:()=>b,Nj:()=>I,PL:()=>y,Pz:()=>w,Qq:()=>g,Rf:()=>C,V3:()=>h,XI:()=>p,_R:()=>d,fE:()=>c,k0:()=>k,nT:()=>T,oU:()=>u,q:()=>l,r7:()=>v,r9:()=>M,tD:()=>f,ub:()=>s,wG:()=>P,x7:()=>B,ye:()=>x,zg:()=>A});var n=()=>o(946065),r=()=>o(989423),i=()=>o(644914),a=()=>o(946141);function s(e,t){r().vd(e,"reorder_outliner_section",t)}function l(e){r().vd(e,"sidebar_expand")}function c(e){r().vd(e,"sidebar_unexpand")}function d(e,t){r().vd(e,"open_comments_sidebar",t)}function u(e,t){r().vd(e,"open_updates_sidebar",t)}function p(e,t){r().vd(e,"updates_sidebar_tab_click",t)}function m(e,t){r().vd(e,"open_view_all_popover",t)}function g(e,t){r().vd(e,"select_page_from_view_all_popover",t)}function f(e,t){const{teamStore:o,...n}=t;a().rP(e,"outliner_item_toggle",{store:o,...n})}function v(e,t){a().rP(e,"outliner_team_toggle",t)}function h(e,t){r().vd(e,"outliner_section_toggle",t)}function _(e){r().vd(e,"click_nested_child_page")}function b(e,t){r().vd(e,"click_desktop_navigator",t)}function y(e){r().vd(e,"open_space_switcher")}function S(e){r().vd(e,"space_switcher_select_space")}function w(e){r().vd(e,"space_switcher_logout_click")}function k(e,t){r().vd(e,"pin_page",t)}function I(e,t){r().vd(e,"unpin_page",t)}function A(e,t){const{teamStore:o,...n}=t;a().rP(e,"click_outliner_item",{store:o,...(0,i().hX)({environment:e}),...n})}function x(e,t){const{outliner_type:o}=t;r().u4({environment:e,event:{eventName:"open_outliner_section_menu",eventProperties:{outliner_type:o,...(0,i().hX)({environment:e})}}})}function C(e,t){r().u4({environment:e,event:{eventName:"sort_outliner_section",eventProperties:{...t,...(0,i().hX)({environment:e})}}})}function T(e,t){const{outliner_type:o,option:a}=t;r().u4({environment:e,event:{eventName:"truncate_outliner_section",eventProperties:{outliner_type:o,option:a===n().vw?"None":a,...(0,i().hX)({environment:e})}}})}function M(e,t){const{outliner_type:o,auto_loaded:n}=t;r().u4({environment:e,event:{eventName:"open_outliner_section_overflow",eventProperties:{outliner_type:o,auto_loaded:n,...(0,i().hX)({environment:e})}}})}function P(e,t){const{auto_loaded:o}=t;r().u4({environment:e,event:{eventName:"open_assistant_pane",eventProperties:{auto_loaded:o,...(0,i().hX)({environment:e})}}})}function B(e,t){r().u4({environment:e,event:{eventName:"toggle_sidebar_section_panel",eventProperties:t}})}function R(e,t){const{sidebar_section_type:o,search_query:n,flow_id:i}=t;r().u4({environment:e,event:{eventName:"sidebar_pane_query_change",eventProperties:{sidebar_section:o,search_query:n,flow_id:i}}})}},900652:(e,t,o)=>{o.d(t,{Z8:()=>s,du:()=>c,n5:()=>a,zg:()=>l});var n=()=>o(401497),r=()=>o(941463),i=()=>o(441199);function a(){return r().Ay.getWidth()}function s(){const e=i().default.state.openState,t=i().default.state.mode;return"closed"===e||"closing"===e||"peek"===t?0:a()}function l(){return(0,n().IS)((e=>({button:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:28,width:28},icon:{fill:e.mediumIconColor,width:16,height:16}})),[])}function c(){return i().default.isOpen()&&"assistant"===i().default.state.contentType}},900967:(e,t,o)=>{o.d(t,{J:()=>_,c:()=>h});o(581454);var n=()=>o(764880),r=()=>o(323316),i=(o(898992),o(803949),()=>o(728272));function a(e){const t=new(i().d);return e&&e.forEach((e=>{e&&t.add(e.pointer)})),t}var s=()=>o(179034),l=()=>o(343666),c=()=>o(161479),d=()=>o(798880),u=()=>o(496603),p=()=>o(534177),m=()=>o(590604),g=()=>o(630116);function f(e,t){const o=u().oE(e.map((e=>function(e,t){if("comment_mention"===e.mentioned_from.type){const o=g().sk.createChildStore(t,{table:l().SN,id:e.mentioned_from.comment_id,spaceId:(0,c().e)(void 0)});if(!o.isDefined())return;const n=g().sk.createChildStore(t,o.getParentPointer());if(!n.isDefined())return;const r=g().Bv.createChildStore(t,{table:s().ev,id:n.getParentId()}),i=r.getNavigableBlockStore();if(!i)return;return r.id===i.id?{backlinkStore:i,timestamp:o.getLastEditedTime()}:{backlinkStore:i,scrollToBlockId:r.id,discussionId:n.id,timestamp:o.getLastEditedTime()}}if("reference"===e.mentioned_from.type){const o=g().Bv.createChildStore(t,{table:s().ev,id:e.mentioned_from.parent_block_id}).getNavigableBlockStore();if(!o)return;const n=o.getLastEditedTime();return{backlinkStore:o,scrollToBlockId:e.block_id,timestamp:n||0}}if("property_mention"===e.mentioned_from.type){const{block_id:o}=e.mentioned_from,n=g().Bv.createChildStore(t,{table:s().ev,id:o});if(!n.isDefined())return;const r=n.getNavigableBlockStore();if(!r)return;return r.id===n.id?{backlinkStore:r,timestamp:n.getLastEditedTime()}:{backlinkStore:r,scrollToBlockId:n.id,timestamp:n.getLastEditedTime()}}if("collection_reference"===e.mentioned_from.type){const{block_id:o}=e.mentioned_from,n=g().Bv.createChildStore(t,{table:s().ev,id:o});if(!n.isDefined())return;const r=n.getNavigableBlockStore();if(!r)return;return r.id===n.id?{backlinkStore:r,timestamp:n.getLastEditedTime()}:{backlinkStore:r,scrollToBlockId:n.id,timestamp:n.getLastEditedTime()}}if("alias"===e.mentioned_from.type||"transclusion_reference"===e.mentioned_from.type){const o=g().Bv.createChildStore(t,{table:s().ev,id:e.mentioned_from.pointer.id}),n=o.getNavigableBlockStore();if(!n)return;return{backlinkStore:n,scrollToBlockId:o.id,timestamp:n.getLastEditedTime()}}(0,p().HB)(e.mentioned_from)}(e,t)))),n=u().$z(o,(e=>{let{backlinkStore:t}=e;return t.id})),r=Object.values(n).map((e=>u().Ul(e,(e=>e.discussionId?2:e.scrollToBlockId?1:0))[0]));return r.sort(((e,t)=>t.timestamp-e.timestamp)),r}function v(e,t,o){const n=e.pointer,s=t.backlinks.map(r().xP).concat([n]),l=(0,m().uI)({actorPointers:a([o]),recordPointers:new(i().d)(s),getRecordModel:e.getRecordModel});return(0,r().Dm)({actor:o,backlinks:t.backlinks,getRecordModel:e.getRecordModel,actorHasPermissionViaPublicAccessOnlyFn:e=>{const{actor:t,recordPointer:o}=e;return(0,m().eV)({actor:t,recordPointer:o,permissionsContext:l})},sourceBlockRecordPointer:n})}function h(e,t){const{id:o}=t.currentUser;let r;if(o){const t=e.getRecordModel({table:d().oo,id:o});t&&(r=(0,n().A7)(t))}const i=t.LocalBacklinkStore.getBacklinkState({blockId:e.id,currentUserId:o});if(0===i.backlinks.length)return{backlinks:[],inaccessibleBacklinkCount:0};const a=v(e,i,r);return 0===a.length?{backlinks:[],inaccessibleBacklinkCount:i.inaccessibleBacklinkCount}:{backlinks:f(a,e),inaccessibleBacklinkCount:i.inaccessibleBacklinkCount}}function _(e,t){const{id:o}=t.currentUser;let r;if(o){const t=e.getRecordModel({table:d().oo,id:o});t&&(r=(0,n().A7)(t))}const i=t.LocalBacklinkStore.getBacklinkState({blockId:e.id,currentUserId:o});return 0===i.backlinks.length?{backlinksCount:0,inaccessibleBacklinkCount:0}:{backlinksCount:v(e,i,r).length,inaccessibleBacklinkCount:i.inaccessibleBacklinkCount}}},901182:(e,t,o)=>{o.d(t,{m:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("roundedCheckPartial",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M5.33496 7.91016C4.85645 7.91016 4.5 7.63672 4.5 7.14355C4.5 6.64551 4.85645 6.37695 5.33496 6.37695H8.66016C9.14355 6.37695 9.5 6.64551 9.5 7.14355C9.5 7.63672 9.14355 7.91016 8.66016 7.91016H5.33496Z"})})},901265:(e,t,o)=>{o.d(t,{VN:()=>m,WU:()=>p,it:()=>u});var n=()=>o(476492),r=()=>o(695625),i=()=>o(644914),a=()=>o(407054),s=()=>o(195613),l=()=>o(411671),c=()=>o(666710),d=()=>o(946141);function u(e){var t;const{environment:o,left:n,top:r,actionSectionGroupKey:i,showInput:c,stores:d,analyticsFrom:u,optionalAnalyticsProperties:p,pageAnnotationToken:m}=e,f=new DOMRect(n,r,1,1);a().A.setState({isActive:!0,inputValue:"",actionSectionGroupKey:i,stores:d,frameScrollTop:(null===(t=s().A.state.elementRef.current)||void 0===t?void 0:t.scrollTop)??0,originBlockRect:f,showInput:c,analyticsFrom:u,publicEditMode:d[0]?l().A.getMode(o,d[0]):void 0,collectionContextStore:null==p?void 0:p.collectionContextStore,clickedPageAnnotation:m}),g(o,{from:u,block_type:d[0]&&d[0].getType(),optionalAnalyticsProperties:p})}function p(e){const{environment:t,analyticsFrom:o,actionSectionGroupKey:n,stores:i,showInput:d}=e,u=r().T.findSelectableFromStore(i[0]);if(!u)return;const p=c().default.state.selectableRectMap.get(u);var m;p&&a().A.setState({isActive:!0,inputValue:"",actionSectionGroupKey:n,stores:i,frameScrollTop:(null===(m=s().A.state.elementRef.current)||void 0===m?void 0:m.scrollTop)??0,originBlockRect:p,showInput:void 0===d||d,analyticsFrom:o,publicEditMode:i[0]?l().A.getMode(t,i[0]):void 0});t&&g(t,{from:o,block_type:i[0]&&i[0].getType()})}function m(){a().A.setState({isActive:!1})}function g(e,t){const{optionalAnalyticsProperties:o,...r}=t,{teamStore:a,collectionContextStore:s,...l}=t.optionalAnalyticsProperties||{},c=(0,n().sl)(s)||{};d().rP(e,"open_block_menu",{store:a,...(0,i().hX)({environment:e}),...c,...r,...l})}},901389:(e,t,o)=>{o.d(t,{Gh:()=>_,Qg:()=>v,_0:()=>l,c1:()=>g,f1:()=>u,k5:()=>p,rG:()=>h,tW:()=>f,ui:()=>d,xh:()=>c,y$:()=>m,zw:()=>b});var n=()=>o(416845),r=()=>o(496603),i=()=>o(898486),a=()=>o(972435),s=()=>o(597368);const l=(0,o(959013).YK)({dismissButtonLabel:{defaultMessage:"OK",id:"dialog.dismissButton.label"},acceptButtonLabel:{defaultMessage:"Confirm",id:"dialog.acceptButton.label"},cancelButtonLabel:{defaultMessage:"Cancel",id:"dialog.cancelButton.label"},genericErrorMessage:{id:"dialog.genericErrorMessage",defaultMessage:"An unexpected error occurred"},logoutButtonLabel:{id:"dialog.logoutButtonLabel",defaultMessage:"Log out"},tryAgainButtonLabel:{id:"dialog.tryAgainButtonLabel",defaultMessage:"Try again"}}),c={title:{fontSize:16,fontWeight:o(284371).Wy.medium}};function d(e){s().A.reset(),s().A.setState({...e,open:!0})}function u(e){return g(e)}function p(e,t){return g(e)}function m(e,t){return g(e)}function g(e){e||(e=a().A.formatMessage(l.genericErrorMessage)),d({message:e,showCancel:!1,keepFocus:!1,items:[{label:a().A.formatMessage(l.dismissButtonLabel),onAccept:r().D_}],allowCopy:"string"==typeof e||void 0})}(0,o(604341).exposeDebugValue)("showErrorDialog",p);const f=r().nF(g,3e4);function v(e,t,o){if(e.offline)return;const s=(0,i().Hu)(a().A.getIntl(),e),c=e.body;d({message:s,debugInfo:(0,n().Ow)(c)&&c.debugMessage?{message:c.debugMessage,messagePrefix:t}:void 0,showCancel:!1,keepFocus:!1,items:o||[{label:a().A.formatMessage(l.dismissButtonLabel),onAccept:r().D_}]})}function h(e){const{message:t,onAccept:o,acceptLabel:n,innerStyle:i}=e;d({message:t,showCancel:!1,keepFocus:!1,items:[{label:n||a().A.formatMessage(l.dismissButtonLabel),onAccept:o||r().D_}],innerStyle:i})}function _(e){return new Promise((t=>{d({showCancel:!1,keepFocus:!1,message:e.message,description:e.description,selectionItems:e.selectionItems,onDismiss(){t({accept:!1})},items:[{label:e.acceptLabel||a().A.formatMessage(l.acceptButtonLabel),color:"acceptColor"in e?e.acceptColor:"red",className:"notion-dialog-renderer-accept-item",onAccept:e=>{t({accept:!0,selectionResult:e})},buttonType:"acceptButtonType"in e?e.acceptButtonType:"solid"},{label:e.cancelLabel||a().A.formatMessage(l.cancelButtonLabel),onAccept:e=>{t({accept:!1})},color:"cancelColor"in e?e.cancelColor:void 0,buttonType:"cancelButtonType"in e?e.cancelButtonType:"outline"}],innerStyle:{textAlign:e.textAlign||"center"},icon:e.icon,mode:e.mode})}))}function b(){var e,t;null===(e=(t=s().A.state).onDismiss)||void 0===e||e.call(t),s().A.setState({...s().A.state,open:s().A.state.fatal||!1,onDismiss:void 0})}},901497:(e,t,o)=>{o.d(t,{J:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("magnifyingGlass",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.321 6.28c0 .751.142 1.458.424 2.118a5.52 5.52 0 001.176 1.737 5.51 5.51 0 001.736 1.175 5.326 5.326 0 002.12.424c.592 0 1.157-.09 1.695-.273a5.639 5.639 0 001.476-.752l3.364 3.37a.8.8 0 00.266.171c.1.041.205.062.315.062a.766.766 0 00.683-.397.83.83 0 00.041-.718.715.715 0 00-.164-.253L11.11 9.581c.351-.456.625-.964.82-1.524.201-.56.301-1.153.301-1.778 0-.752-.14-1.456-.423-2.112a5.497 5.497 0 00-2.92-2.919A5.284 5.284 0 006.777.824c-.752 0-1.458.141-2.119.424a5.52 5.52 0 00-2.912 2.919 5.284 5.284 0 00-.424 2.112zm1.17 0A4.204 4.204 0 013.74 3.25a4.286 4.286 0 011.367-.923 4.179 4.179 0 011.668-.335 4.13 4.13 0 011.662.335 4.19 4.19 0 011.367.923c.392.392.7.848.922 1.367a4.13 4.13 0 01.335 1.661c0 .593-.111 1.149-.335 1.668a4.357 4.357 0 01-2.29 2.283 4.13 4.13 0 01-1.66.335 4.179 4.179 0 01-1.669-.335 4.357 4.357 0 01-2.29-2.283A4.254 4.254 0 012.49 6.28zM6.79 9.15c.114 0 .187-.066.219-.198.068-.369.137-.683.205-.943.068-.26.153-.474.253-.643.1-.173.23-.314.39-.424a2.01 2.01 0 01.628-.26 8.31 8.31 0 01.964-.184c.137-.018.205-.091.205-.219 0-.127-.068-.205-.205-.232a8.214 8.214 0 01-.97-.178 2.217 2.217 0 01-.643-.266 1.355 1.355 0 01-.403-.417 2.49 2.49 0 01-.246-.643 10.063 10.063 0 01-.178-.93c-.023-.136-.096-.205-.219-.205s-.2.066-.232.198c-.073.374-.144.69-.212.95A2.49 2.49 0 016.1 5.2c-.1.169-.233.308-.397.417a2.14 2.14 0 01-.622.26c-.255.064-.574.12-.957.17-.141.028-.212.106-.212.233 0 .123.07.196.212.22.479.05.864.12 1.155.211.292.087.518.216.677.39.164.173.287.41.37.71.086.297.163.675.232 1.135.009.06.034.11.075.15a.228.228 0 00.157.055z"})})},901801:(e,t,o)=>{o.d(t,{A:()=>i});var n=()=>o(419494);const r=["adClick","fbp"];const i=new class{constructor(e,t){this.localStorageStore=void 0,this.localStorageStore=new(n().Ay)({namespace:e,important:t,trackingType:"targeting"})}get(e){return this.localStorageStore.get(e)}set(e,t){return this.localStorageStore.set(e,t)}remove(e){return this.localStorageStore.remove(e)}removeAllIfNoPermission(){this.localStorageStore.hasPermissionForTrackingType||r.forEach((e=>this.remove(e)))}}(n().Bq,!1)},901952:(e,t,o)=>{o.d(t,{V:()=>a});var n=()=>o(476492),r=()=>o(193722),i=()=>o(504066);function a(e){const{environment:t,collectionContextStore:o,property:a,from:s,action:l,new_property_type:c,...d}=e,u=o.normalizedSchemaStore.state[a],p=(0,n().sl)(o)||{};(0,r().L)(t,{property_type:null==u?void 0:u.type,new_property_type:c,property:a,from:s,action:l,...d,...p}),(0,i().f)({action:l,from:"view_settings",property_type:null==u?void 0:u.type,new_property_type:c})}},901997:(e,t,o)=>{o.d(t,{Jg:()=>i,P$:()=>a,aU:()=>l,uZ:()=>s});var n=()=>o(989423),r=()=>o(508496);function i(e){n().vd(e,"open_emoji_menu")}function a(e,t){const{searchQuery:o,...r}=t;n().vd(e,"emoji_no_results",r)}function s(e,t,o){n().vd(e,t,o)}function l(e,t,o){n().vd(e,t,o),r().default.logEvent(t,o.icon)}},902731:(e,t,o)=>{o.d(t,{IX:()=>u,jS:()=>m,oU:()=>p});var n=()=>o(908006),r=()=>o(161479),i=()=>o(763824),a=()=>o(878523),s=()=>o(778417),l=()=>o(725614),c=()=>o(404783),d=()=>o(21510);async function u(e){const{environment:t,discussionStore:o,rect:u,blockStore:p,discussionLocation:m,activityId:g,notificationId:f}=e,v=new(c().A)(t,(0,r().e)(p.pointer.spaceId));d().A.setState({open:!0,rect:u,discussionStore:o,discussionInputStore:v,blockStore:p,discussionLocation:m,activityId:g,notificationId:f}),s().IU({preventDismissMobileKeyboard:!0,environment:t}),await n().default.afterNextFlush(),await(0,i().wR)(10),l().setSelectionAtEnd({store:v.state.textStore}),a().nq({environment:t,from:m,activityId:g,notificationId:f})}function p(e){const t=d().A.state;if(t.open){const{discussionLocation:o,activityId:n,notificationId:r}=t;d().A.setState({open:!1,rect:t.rect}),s().IU({environment:e}),a().Xy({environment:e,from:o,activityId:n,notificationId:r})}}function m(e){const t=d().A.state;if(t.open){0===t.discussionStore.getComments().length&&p(e)}}},903972:(e,t,o)=>{o.d(t,{w:()=>n});const n=new(o(645873).O2)("emojiData",(async()=>(await o.e(65015).then(o.bind(o,208294))).default))},905654:(e,t,o)=>{o.d(t,{EB:()=>u,EU:()=>m,Nz:()=>d,Sw:()=>c,T_:()=>l,kD:()=>p});var n=()=>o(662303),r=()=>o(427704),i=()=>o(677338),a=()=>o(529543),s=()=>o(508496);function l(e){const{mobileNative:t}=e;if(t){const o=Boolean(t.sqliteConnection),n=a().canSetCookie(e);return o&&n}return!0}function c(e){return"en-US"===n().locale&&(e.device.isElectron&&s().default.checkGate({gateName:"desktop_app_signup_hide_passcode"})||e.device.isMobileNative&&e.device.isIOS&&s().default.checkGate({gateName:"ios_app_signup_hide_passcode"}))}function d(){const e=m();return e===r().JZ.signupMail||e===r().JZ.loginMail}function u(){const e=m();return e===r().JZ.signupCalendar||e===r().JZ.loginCalendar}function p(){d()?i().Ht("mail"):u()&&i().Ht("calendar")}function m(){return window.location.pathname.endsWith("/")?window.location.pathname.slice(0,window.location.pathname.length-1):window.location.pathname}},906537:(e,t,o)=>{o.r(t),o.d(t,{areRangesEqual:()=>D,clear:()=>w,containerOffsetIsBetweenNodes:()=>R,get:()=>h,getIncompleteDOMEndpoint:()=>y,getRect:()=>k,getSelectionRect:()=>I,isExpanded:()=>C,isMouseRightClicking:()=>z,isMouseSelecting:()=>j,rangeFromContainerOffsets:()=>T,rangeFromPoint:()=>A,rangeToContainerOffsets:()=>B,resetMouseRightClicking:()=>q,selectionIsBackwards:()=>U,set:()=>_,setDOMEndpoint:()=>S,setOnNode:()=>x,snapContainerOffsetToNode:()=>E,startListeners:()=>F,toRange:()=>P,toStaticRange:()=>M});o(16280);var n=()=>o(507707),r=()=>o(624919),i=()=>o(908006),a=()=>o(604341),s=()=>o(857639),l=()=>o(319625),c=()=>o(496603),d=()=>o(397248);const u=!1;new WeakMap;let p;const m=c().Bj((()=>window.__isElectron?g:()=>window))();function g(){return!p||window.document.hasFocus()?(f("getWindow(): Returning main window because it has focus."),window):p?(f("getWindow(): Returning focused child window."),p):(f("getWindow(): Returning main window because nothing has focus"),window)}function f(){u&&console.log(...arguments)}var v=()=>o(728611);function h(){const e=m().getSelection();if(e&&e.rangeCount>0){return e.getRangeAt(0)}}function _(e,t){b.reset();const o=window.getSelection();if(o){if(t.isAndroid){const t=h();if(t&&D(t,e))return}if(!(t.isFirefox&&parseFloat(t.browserVersion)<92))try{return function(e,t){const{focus:o,anchor:n}=B(t);e.collapse(n.container,n.offset),e.extend(o.container,o.offset)}(o,e)}catch(n){s().log({from:"textSelection",type:"textSelectionSet",level:"error",error:(0,l().A)(n)})}return function(e,t){const o=document.createRange();o.setStart(t.startContainer,t.startOffset),o.setEnd(t.endContainer,t.endOffset),e.removeAllRanges(),e.addRange(o)}(o,e)}}const b=new class{constructor(e){this.state=void 0,this.debugName=e,(0,a().exposeDebugInstance)("endpointLatch",this)}complete(e){if(this.state&&this.state.endpoint!==e.endpoint&&this.state.onlyIfEqual===e.onlyIfEqual){const t="start"===this.state.endpoint?this.state:e,o="end"===this.state.endpoint?this.state:e;return this.state=void 0,{start:t,end:o}}if(this.state){let t=`${this.debugName}: cannot complete latch:`;const o=this.state.endpoint===e.endpoint,n=this.state.onlyIfEqual!==e.onlyIfEqual;o&&(t+=` same endpoint ${e.endpoint}`),n&&(t+=" different tokens"),s().log({level:"warning",from:"EndpointLatch",type:"cannotCompleteLatch",data:{name:this.debugName,message:t,miscDataToConvertToString:{sameEndpoint:o,differentTokens:n}}})}this.state=e}reset(){this.state&&(s().log({level:"warning",from:"EndpointLatch",type:"resetPartialLatch",data:{name:this.debugName,message:`reset latch with endpoint ${this.state.endpoint}`}}),this.state=void 0)}}("domSelection");function y(){return b.state}function S(e,t){const o=b.complete(e);if(!o)return;const{start:n,end:r}=o;_(T({start:n.position,end:r.position}),t)}function w(e){b.reset();const t=window.getSelection();t&&(e.device.isMobile&&e.device.isAndroid?t.collapse(null,void 0):t.removeAllRanges())}function k(e){if(e){if(e.collapsed&&e.getClientRects){const t=c().VP(e.getClientRects()[0]);if(!c().Im(t))return t}else if(e.getBoundingClientRect){const t=c().VP(e.getBoundingClientRect());if(!c().Im(t))return t}if(e.startContainer.nodeType===Node.ELEMENT_NODE){if(0===e.startOffset){const t=e.startContainer.getBoundingClientRect();return new(d().z8)(t.left,t.top,0,t.height)}const t=e.startContainer.childNodes[e.startOffset-1];if(t&&t.nodeType===Node.ELEMENT_NODE){const e=t.getBoundingClientRect();return new(d().z8)(e.left,e.top,0,e.height)}const o=e.startContainer.childNodes[e.startOffset];if(o&&o.nodeType===Node.ELEMENT_NODE){const e=o.getBoundingClientRect();return new(d().z8)(e.left,e.top,0,e.height)}}}}function I(){const e=h();if(e)return k(e)}function A(e,t){if(document.caretRangeFromPoint){return document.caretRangeFromPoint(e,t)??void 0}if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(e,t);if(null===o)return;const n=document.createRange();return n.setStart(o.offsetNode,o.offset),n.setEnd(o.offsetNode,o.offset),n}throw new Error("Browser does not support method caretRangeFromPoint or caretPositionFromPoint")}function x(e,t){const o=document.createRange();o.selectNode(e),_(o,t)}function C(e){return Boolean(e&&!e.collapsed)}function T(e){const{start:t,end:o}=e,n=document.createRange();if(t.container)try{n.setStart(t.container,t.offset)}catch(r){console.info(r)}if(o.container)try{n.setEnd(o.container,o.offset)}catch(r){console.info(r)}return n}function M(e){if(!e)return;const{startContainer:t,startOffset:o,endContainer:n,endOffset:r,collapsed:i}=e;return{startContainer:t,startOffset:o,endContainer:n,endOffset:r,collapsed:i}}function P(e){if(!e)return;const t=document.createRange();return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),t}function B(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U();const o={container:e.startContainer,offset:e.startOffset},n={container:e.endContainer,offset:e.endOffset},[r,i]=t?[o,n]:[n,o];return{start:o,end:n,focus:r,anchor:i}}function R(e,t,o){if(!t&&!o)return!1;if(!t&&o){const t=document.createRange();return t.selectNode(o),-1===t.comparePoint(e.container,e.offset)}if(t&&!o){const o=document.createRange();return o.selectNode(t),1===o.comparePoint(e.container,e.offset)}if(t&&o){const n=document.createRange();return n.setStartAfter(t),n.setEndBefore(o),0===n.comparePoint(e.container,e.offset)}return!1}function E(e){const{nodesInDomOrder:t,containerOffset:o,snapTowards:n}=e;for(let r=0;r<=t.length;r++){const e=t[r-1],i=t[r];if(R(o,null==e?void 0:e.node,null==i?void 0:i.node))return"start"===n?e:i}}function D(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset&&e.collapsed===t.collapsed}const N=new class{constructor(){this.currentHasNonEmptySelection=!1,this.currentIsBackwards=void 0,this.mouseDownSelection=void 0}selectionIsBackwards(){return Boolean(this.currentHasNonEmptySelection&&this.currentIsBackwards)}updateSelectionDirection(e,t){if(!e||!t||t.collapsed)return this.currentHasNonEmptySelection=!1,void(this.currentIsBackwards=void 0);if(this.currentHasNonEmptySelection=!0,void 0===this.currentIsBackwards){const o=1===t.startContainer.childNodes.length&&t.startContainer.childNodes[0].TEXT_NODE&&t.startContainer.childNodes[0]===e.startContainer;if(e.startContainer===t.startContainer||o)this.currentIsBackwards=t.startOffset<e.startOffset;else{const o=(0,n().A)(t.startContainer,e.startContainer);this.currentIsBackwards=-1===o}}}startListeners(){window.addEventListener("mousedown",(()=>{i().default.afterNextFlush((()=>{this.mouseDownSelection=h()}))})),window.addEventListener("mouseup",(()=>{i().default.afterNextFlush((()=>{const e=h();this.updateSelectionDirection(this.mouseDownSelection,e)}))})),window.addEventListener("keydown",(()=>{const e=h();i().default.afterNextFlush((()=>{const t=h();this.updateSelectionDirection(e,t)}))}))}},L=new class{constructor(){this.mouseDown=!1,this.keysDown=0,this.wasBackwards=!1,this.device=void 0,this.debugDrawRects=()=>{const e=h();if(C(e)){const{focus:t,anchor:o}=B(e,this.wasBackwards),n=k(T({start:t,end:t}));n&&(0,r().Iz)(n,"FOCUS","red");const i=k(T({start:o,end:o}));i&&(0,r().Iz)(i,"ANCHOR","blue")}},this.handleSelectionChange=()=>{var e;(this.mouseDown||this.keysDown||null!==(e=this.device)&&void 0!==e&&e.isAndroid)&&(this.wasBackwards=function(){const e=window.getSelection();if(!e)return!1;const{focusNode:t,focusOffset:o,anchorNode:r,anchorOffset:i}=e;if(t===r)return o<i;return-1===(0,n().A)(t,r)}())},this.handleKeyDown=()=>{this.keysDown++},this.handleKeyUp=()=>{this.keysDown--},this.handleMouseDown=()=>{this.mouseDown=!0},this.handleMouseUp=()=>{this.mouseDown=!1}}startListeners(e){return this.device=e,document.addEventListener("selectionchange",this.handleSelectionChange),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("mouseup",this.handleMouseUp),()=>{document.removeEventListener("selectionchange",this.handleSelectionChange),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("mouseup",this.handleMouseUp)}}};function F(e){N.startListeners(),L.startListeners(e)}function U(){return N.currentIsBackwards||L.wasBackwards}(0,a().exposeDebugGetter)("selectionIsBackwards",U);let O=!1,V=!1;function j(){return O}function z(){return V}function q(){return V=!1}(0,v().P4)(window,"mousedown",(e=>{0===e.button?O=!0:2===e.button&&(V=!0)}),!0),(0,v().P4)(window,"mouseup",(e=>{0===e.button?O=!1:2===e.button&&(V=!1)}),!0)},906590:(e,t,o)=>{o.d(t,{Q:()=>i});o(898992),o(354520);var n=()=>o(77272),r=()=>o(850213);function i(e,t){if(t)return r().A.setState([e]),void n().A.setState({recentlyUsedColors:[e]});const o=n().A.state.recentlyUsedColors.filter((t=>t!==e));o.unshift(e),o.length>5&&o.pop(),n().A.state.recentlyUsedColors=o,r().A.setState([...o])}},906719:(e,t,o)=>{o.d(t,{A:()=>h});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(584262),l=()=>o(547392),c=()=>o(317909),d=()=>o(493823),u=()=>o(406699),p=()=>o(199896),m=()=>o(492414),g=()=>o(675811),f=()=>o(20039),v=o(474848);function h(e){const t=(0,r().v3)(),{device:o}=t,{store:h,showDivider:_,maxWidth:b,popupRenderer:y,iconSize:S,emojiSize:w,titleStyle:k,iconStyle:I,highlighter:A,onClick:x}=e,C=(0,a().IS)((()=>({selectable:{display:"flex",alignItems:"center",minWidth:0},button:{display:"flex",minWidth:0,fontSize:"inherit",paddingTop:2,paddingBottom:2,paddingLeft:6,paddingRight:6}})),[]),{url:T,canEdit:M}=(0,i().K8)((()=>({url:(0,m().Ay)({store:h,fullyQualified:!1,pageVisitSource:s().y8.Breadcrumb}),canEdit:h.canEdit()})),[h]),P=(0,n.useCallback)((e=>{const{droppedDirection:o,droppedStores:n,duplicate:r}=e;c().createAndCommit({userAction:"SearchPathBreadcrumb.onDrop",environment:t,canUndo:!0,perform:e=>l().MS({environment:t,targetParentStore:h.getContentStore(),targetStore:h,droppedDirection:o,droppedStores:n,duplicate:r,transaction:e})})}),[t,h]),B=(0,v.jsx)(f().A,{store:h,maxWidth:b,iconSize:S,emojiSize:w,titleStyle:k,iconStyle:I,highlighter:A});return(0,v.jsxs)(n.Fragment,{children:[(0,v.jsx)(p().A,{store:h,canDropOnto:M,onSelectableDrop:P,style:C.selectable,analyticsName:"breadcrumb",shouldShowDropZone:!0,children:y?(0,v.jsx)(u().Ay,{originGap:4,popupType:o.isMobile?u().z7.BottomSheet:u().z7.Popup,render:y,renderOrigin:e=>(0,v.jsx)(d().p,{...e,style:C.button,size:"sm",shouldShrink:!0,mobileFeedback:o.isMobile,children:B})}):(0,v.jsx)(d().p,{href:T,external:!1,style:C.button,size:"sm",shouldShrink:!0,mobileFeedback:o.isMobile,onClick:x,children:B})}),_&&(0,v.jsx)(g().f,{})]},h.id)}},907514:(e,t,o)=>{o.d(t,{DG:()=>m,OH:()=>u,nl:()=>d,x$:()=>p});var n=()=>o(130382),r=()=>o(959013),i=()=>o(720665),a=()=>o(972435);const s=(0,r().YK)({year:{id:"timeUtils.durationDescriptor.year",defaultMessage:"{numYears, plural, one {{numYears} year ago} other {{numYears} years ago}}"},day:{id:"timeUtils.durationDescriptor.day",defaultMessage:"{numDays, plural, one {{numDays} day ago} other {{numDays} days ago}}"},week:{id:"timeUtils.durationDescriptor.week",defaultMessage:"{numWeeks, plural, one {{numWeeks} week ago} other {{numWeeks} weeks ago}}"},hour:{id:"timeUtils.durationDescriptor.hour",defaultMessage:"{numHours, plural, one {{numHours} hour ago} other {{numHours} hours ago}}"},minute:{id:"timeUtils.durationDescriptor.minute",defaultMessage:"{numMinutes, plural, one {{numMinutes} minute ago} other {{numMinutes} minutes ago}}"},second:{id:"timeUtils.durationDescriptor.second",defaultMessage:"Just now"}}),l=(0,r().YK)({year:{id:"timeUtils.durationDescriptor.ultraCompactYear",defaultMessage:"{numYears}y"},day:{id:"timeUtils.durationDescriptor.ultraCompactDay",defaultMessage:"{numDays}d"},week:{id:"timeUtils.durationDescriptor.ultraCompactWeek",defaultMessage:"{numWeeks}w"},hour:{id:"timeUtils.durationDescriptor.ultraCompactHour",defaultMessage:"{numHours}h"},minute:{id:"timeUtils.durationDescriptor.ultraCompactMinute",defaultMessage:"{numMinutes}m"},second:{id:"timeUtils.durationDescriptor.ultraCompactSeconds",defaultMessage:"Just now"}}),c=(0,r().YK)({year:{id:"timeUtils.durationDescriptor.compactYear",defaultMessage:"{numYears}y ago"},day:{id:"timeUtils.durationDescriptor.compactDay",defaultMessage:"{numDays}d ago"},week:{id:"timeUtils.durationDescriptor.compactWeek",defaultMessage:"{numWeeks}w ago"},hour:{id:"timeUtils.durationDescriptor.compactHour",defaultMessage:"{numHours}h ago"},minute:{id:"timeUtils.durationDescriptor.compactMinute",defaultMessage:"{numMinutes}m ago"},second:{id:"timeUtils.durationDescriptor.compactSecond",defaultMessage:"Just now"}});function d(e){let{useCompactFormat:t,useUltraCompactFormat:o,useLowercase:n,roundDownYears:r,useWeeks:d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=o?l:t?c:s,p=new Date(e),m=a().A.getIntl().locale,g=new Date,f=+g-e;if(f>=i().Gq&&r){const e=Math.floor(f/i().Gq);return a().A.formatMessage(u.year,{numYears:e})}if(p.getFullYear()!==g.getFullYear()){const e={year:"numeric",month:"short",day:"numeric"},t={year:"numeric",month:"2-digit",day:"2-digit"};return p.toLocaleDateString(m,o?t:e)}const v=Math.floor(f/i().nD);if(v<28&&v>7&&d){const e=Math.floor(v/7);return a().A.formatMessage(u.week,{numWeeks:e})}if(v>=3)return p.toLocaleDateString(m,{month:"short",day:"numeric"});if(v>=1)return a().A.formatMessage(u.day,{numDays:v});const h=Math.floor(f/i().pT);if(h>=1)return a().A.formatMessage(u.hour,{numHours:h});const _=Math.floor(f/i().Xb);return _>=1?a().A.formatMessage(u.minute,{numMinutes:_}):n?a().A.formatMessage(u.second).toLocaleLowerCase():a().A.formatMessage(u.second)}function u(e,t){const o=t-e,r=Math.floor(o/i().Gq),s=Math.floor(o/i().nD),l=Math.floor(o/i().pT),c=Math.floor(o/i().Xb),d=Math.floor(o/i().TD);return r>=1?a().A.formatMessage(n().jX.year,{numYears:r}):s>=1?a().A.formatMessage(n().jX.day,{numDays:s}):l>=1?a().A.formatMessage(n().jX.hour,{numHours:l}):c>=1?a().A.formatMessage(n().jX.minute,{numMinutes:c}):a().A.formatMessage(n().jX.second,{numSeconds:d})}function p(e,t){return new Date(e).toLocaleDateString(a().A.getIntl().locale,{month:"long",year:"numeric",day:"2-digit",hour:"numeric",minute:"2-digit",second:t?void 0:"2-digit"})}function m(e){return new Date(e).toLocaleDateString(a().A.getIntl().locale,{month:"short",year:"numeric",day:"numeric"})}},907828:(e,t,o)=>{o.r(t),o.d(t,{getDebugSourcesForIdsInOperations:()=>c,setBlockIdDebugSource:()=>s,setupRecordCacheDebugging:()=>a});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454);var n=o.n(o(169749));let r=!1;const i=new(n())({max:1e4});function a(e){e.isMobile||(r=!0)}function s(e,t){r&&(i.has(e)||i.set(e,t))}const l=/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}/g;function c(e,t){const o={blocks:{},isIdSourceCacheFull:i.itemCount===i.max},n=JSON.stringify(t),r=new Set(Array.from(n.matchAll(l)).map((e=>e[0])));for(const s of r){var a;let t=!1;const n={},r=i.get(s);r&&(t=!0,n.debugSource=r);const l=e.defaultRecordCache.inMemoryRecordCache.getRecord({pointer:{table:"block",id:s},userId:e.currentUser.id});null!=l&&null!==(a=l.value)&&void 0!==a&&a.type&&(t=!0,n.blockType=l.value.type),t&&(o.blocks[s]=n)}return o}},908447:(e,t,o)=>{o.d(t,{Z:()=>s});var n=()=>o(476492),r=()=>o(989423),i=()=>o(508496);var a=()=>o(504066);function s(e){const{environment:t,collectionContextStore:o,...s}=e;!function(e,t){r().vd(e,"create_property",t),i().default.logEvent("create_property",String(Boolean(t.is_suggested_property)),t)}(t,{...(0,n().sl)(o)||{},...s}),(0,a().f)({action:"create_property",from:e.from,property_type:e.property_type})}},908521:(e,t,o)=>{o.d(t,{BY:()=>s,Df:()=>r,On:()=>l,Zg:()=>i,aZ:()=>d,k:()=>a,xq:()=>c});var n=()=>o(284371);const r=1.3,i=1.875;function a(e){return u(e.fontSizeValue||i,e.fontFamily)}const s=1.5;function l(e){return u(e.fontSizeValue||s,e.fontFamily)}const c=1.25;function d(e){return u(e.fontSizeValue||c,e.fontFamily)}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return{fontFamily:arguments.length>1?arguments[1]:void 0,fontWeight:n().Wy.semibold,fontSize:`${e}em`,lineHeight:r,margin:0}}},909470:(e,t,o)=>{o.d(t,{i:()=>i});o(898992),o(908872);var n=()=>o(680141),r=()=>o(508496);function i(){return n().Y.reduce(((e,t)=>(e[t]=r().default.checkGate({gateName:t}),e)),{})}},910302:(e,t,o)=>{o.d(t,{r5:()=>T,XA:()=>M,bY:()=>A,Ww:()=>R,WO:()=>x,Z9:()=>E,Js:()=>L,as:()=>B,A0:()=>F,DL:()=>C,_4:()=>N});o(16280),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(803949);var n=()=>o(221844),r=()=>o(416845),i=()=>o(179034),a=()=>o(449412),s=()=>o(209199),l=()=>o(534177),c=()=>o(720665);const d=new Map;class u extends(()=>o(757695))().default{getInitialState(){const e=new AbortController;return e.abort(),{language:void 0,lengthOfTextForLanguageDetection:void 0,lastRequestedAt:void 0,pageStoreLastEditedTime:void 0,requestController:e}}}var p=()=>o(989423),m=()=>o(731320),g=()=>o(437622),f=()=>o(351360),v=()=>o(430483),h=()=>o(77246),_=()=>o(630116),b=()=>o(825726),y=()=>o(449506),S=()=>o(473227),w=()=>o(606952),k=()=>o(317909);const I=100;function A(e){const{pageStore:t,environment:o,enabled:n,forceUpdate:r=!1}=e;if(!n)return{detectedLanguage:void 0,canSuggestInConfidence:!1};if(!t.isPageBlock()||t.isEmptyPage())return{detectedLanguage:void 0,canSuggestInConfidence:!1};const i=t.getLastEditedTime(),a=function(e){const t=d.get(e);if(t)return t;const o=new u;return d.set(e,o),o}(t.id);(r||a.state.requestController.signal.aborted||void 0===a.state.lastRequestedAt||i!==a.state.pageStoreLastEditedTime&&Date.now()-a.state.lastRequestedAt>c().Xb)&&(async()=>{a.state.requestController.abort();const e=Date.now(),n=new AbortController;a.setState({...a.state,lastRequestedAt:e,pageStoreLastEditedTime:i,requestController:n});const r=n.signal,s=await y().callApi({eventName:"detectPageLanguage",environment:o,data:{pagePointer:t.getSpaceShardedPointer()},headers:{},abortSignal:r});if(!r.aborted)if("success"===s.type){const{detectedLanguage:t}=s.data;if(t){const o=void 0!==s.data.lengthOfTextForLanguageDetection?s.data.lengthOfTextForLanguageDetection:I;a.setState({language:t,lengthOfTextForLanguageDetection:o,lastRequestedAt:e,pageStoreLastEditedTime:i,requestController:n})}else a.setState({language:void 0,lengthOfTextForLanguageDetection:void 0,lastRequestedAt:e,pageStoreLastEditedTime:i,requestController:n})}else a.state.requestController.abort()})();const s=a.state.language;let l=!1;return void 0!==a.state.lengthOfTextForLanguageDetection&&(l=a.state.lengthOfTextForLanguageDetection>=I),{detectedLanguage:s,canSuggestInConfidence:l}}function x(e,t,o){var n;const{detectedLanguage:r}=A({pageStore:e,environment:t,enabled:o}),i=(null===(n=f().default.state.currentUserSettingsStore)||void 0===n||null===(n=n.getSettings())||void 0===n?void 0:n.preferred_locale)??s().q;return r??(0,s().o_)(i)}function C(e){const{pageStore:t,environment:o,triggeredFrom:n}=e;if(!v().zD.isFullPageTranslateEnabled())return;const r=h().Uv.getStateForBlock(t.id);if((0,h().qu)(r)){if("translate_locked"===r.mode){o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(r.inMemoryRecordCache)}"loading"===r.status&&r.cancel(),S().CR({navigableBlockStore:t}),(0,p().u4)({environment:o,event:{eventName:"stop_translating_page",eventProperties:{triggered_from:n,page_id:t.id}}})}}function T(e){const{pageStore:t,environment:o}=e,n=t.getParentStore();return("block"===(null==n?void 0:n.table)||"team"===(null==n?void 0:n.table)||"space"===(null==n?void 0:n.table)||"collection"===(null==n?void 0:n.table))&&(!("collection"===n.table&&!n.canEditCollection())&&(0,m().MI)({environment:o,blockStore:t}))}function M(){return!(0,g().IL)(f().default.state.currentSpaceStore)}function P(e){const{blockStore:t,environment:o,transaction:n,inMemoryRecordCache:r,currentUserStore:i}=e,a=e.seenBlockIds??new Set;if(!a.has(t.id)){if(t.isType("transclusion_reference")){const e=t.getTransclusionReferenceTargetStore();if(!e)throw new Error("Expected transclusion reference target on transclusion_reference block.");P({blockStore:e,transaction:n,inMemoryRecordCache:r,environment:o,currentUserStore:i,seenBlockIds:a})}r.setModelAndRole({pointer:t.getSpaceShardedPointer(),userId:i.id},t.getModel(),"reader"),a.add(t.id);for(const e of t.getContentPointers()){P({blockStore:_().Bv.createChildStore(t,e),transaction:n,inMemoryRecordCache:r,environment:o,currentUserStore:i,seenBlockIds:a})}}}function B(e){const{environment:t,pageStore:o,sourceLanguage:n,triggeredFrom:r}=e,i=h().Uv.getTranslateModeForBlock(o.id);if(!v().zD.isFullPageTranslateEnabled()||!i)return;const a={...i,sourceLanguage:n};return h().Uv.setStateForBlock(o.id,a),"select_language"!==a.status?(R({environment:t,pageStore:o,targetLanguage:a.targetLanguage,sourceLanguage:a.sourceLanguage,triggeredFrom:r}),!0):void 0}function R(e){const{environment:t,pageStore:o,targetLanguage:n,sourceLanguage:r,triggeredFrom:a}=e,s=h().Uv.getTranslateModeForBlock(o.id);if(!v().zD.isFullPageTranslateEnabled()||!s)return;if(!o.isType("page"))throw new Error("Not a page");let c;c="translate_unlocked"===s.mode?D({pageStore:o,environment:t}):s.inMemoryRecordCache;const d=new AbortController;(0,p().u4)({environment:t,event:{eventName:"translate_page",eventProperties:{source_language:r,target_language:n,triggered_from:a,page_id:o.id}}}),y().callApi({eventName:"translatePage",environment:t,data:{pagePointer:o.getSpaceShardedPointer(),targetLanguage:n,sourceLanguage:r},headers:{},abortSignal:d.signal}).then((e=>{try{if("failed"===e.type)throw{name:e.error.data.responseBody.name??e.error.name,statusCode:e.status,message:e.error.data.responseBody.debugMessage??e.error.data.responseBody.message};const{translatedBlockMap:n}=e.data;!function(e){const{pageStore:t,valueMap:o,environment:n}=e,{currentUserStore:r,currentSpaceStore:a}=f().default.state;if(!r||!a)return;if(!v().zD.isFullPageTranslateEnabled())return;const s=h().Uv.getTranslateModeForBlock(t.id);if(!s)return;if("loading"!==s.status)throw new Error("Expected translation state to be loading");const c=t.clone(s.inMemoryRecordCache);k().createAndCommit({environment:n,perform(e){for(const[t,r]of Object.entries(o)){const o=_().Bv.createChildStore(c,{table:i().ev,id:t,spaceId:a.id});let s;if("title"===r.mapping)s=o.getBlockTitleStore();else if("caption"===r.mapping)s=o.getPropertyStore("caption");else{if("properties"===r.mapping){Object.entries(r.properties??{}).forEach((t=>{let[r,i]=t;const a=o.getPropertyStore(r);w().KY({environment:n,store:a,value:i.value,transaction:e})}));continue}if("unmapped"===r.mapping)continue;(0,l().HB)(r.mapping)}w().KY({environment:n,store:s,value:r.value,transaction:e})}s.inMemoryRecordCache.emitAll()},canUndo:!0,userAction:"fullPageTranslationHelpers.applyTranslationMapToPage"}),S().v8({navigableBlockStore:t,editorModeConfig:{...s,status:"active",translationMap:o}})}({valueMap:n,pageStore:o,environment:t})}catch(n){(0,b().w)(n),C({pageStore:o,environment:t,triggeredFrom:"error"})}})),S().v8({navigableBlockStore:o,editorModeConfig:{mode:"translate_locked",status:"loading",sourceLanguage:r,targetLanguage:n,cancel:()=>d.abort(),inMemoryRecordCache:c}})}function E(e){const{pageStore:t,environment:o,status:n="select_language",sourceLanguage:r,targetLanguage:i}=e;if(!t.isType("page"))throw new Error("Not a page");if(h().Uv.isBlockModeInTranslation(t.id))return;const a=v().zD.isFullPageTranslateEnabled();if(a)if("suggest_translation"===n&&r&&i)S().v8({navigableBlockStore:t,editorModeConfig:{mode:"translate_unlocked",status:"suggest_translation",sourceLanguage:r,targetLanguage:i}});else{const e=D({pageStore:t,environment:o});if(e){const{detectedLanguage:n}=A({pageStore:t,environment:o,enabled:a});S().v8({navigableBlockStore:t,editorModeConfig:{mode:"translate_locked",status:"select_language",sourceLanguage:n,inMemoryRecordCache:e}})}}}function D(e){const{pageStore:t,environment:o}=e,{currentUserStore:r}=f().default.state;if(!r)throw new Error("No current user");const i=new(n().A)({name:`TranslationInMemoryRecordCache-${t.id}`,isTemporaryData:!0});o.defaultRecordCache.inMemoryRecordCache.addCacheOverride(i);const a=t.clone(i);return k().createAndCommit({environment:o,perform(e){P({blockStore:a,transaction:e,inMemoryRecordCache:i,environment:o,currentUserStore:r})},canUndo:!0,userAction:"fullPageTranslationActions.openTranslateBanner.lockPage"}),i.emitAll(),i}function N(e){const t=new(r().yI)("Editor handler called in translate mode.");throw a().O8(t,{from:"fullPageTranslationActions",type:"editorHandlerInTranslateModeWarning",data:{sessionId:e}}),t}function L(e){const{translationMap:t,recordIdMap:o}=e,n={};for(const[r,a]of Object.entries(t)){const e=o.get({table:i().ev,id:r});e&&(n[e]=a)}return n}function F(e){const{pageStore:t}=e,o=h().Uv.getTranslateModeForBlock(t.id);o&&"suggest_translation"===o.status&&S().v8({navigableBlockStore:t,editorModeConfig:{...o,status:"dismiss_forever"}})}},911964:(e,t,o)=>{o.d(t,{F:()=>P});var n=()=>o(441738),r=()=>o(762433),i=()=>o(437622),a=()=>o(19575),s=()=>o(128265),l=()=>o(224701),c=()=>o(72256),d=()=>o(672378),u=()=>o(753735),p=(o(296540),()=>o(107683)),m=()=>o(49210),g=()=>o(56366),f=()=>o(401497);const v=(0,o(340498).xh)("arrowUpCircleBadgeClock",{default:{loader:()=>o.e(42951).then(o.bind(o,942951))},small:{loader:()=>o.e(19801).then(o.bind(o,819801))},mini:{loader:()=>o.e(4295).then(o.bind(o,804295))},large:{loader:()=>o.e(18701).then(o.bind(o,818701))}});var h=()=>o(366295),_=()=>o(166386),b=()=>o(979340),y=()=>o(959013),S=()=>o(84817),w=()=>o(7674),k=()=>o(554509),I=()=>o(581495),A=()=>o(775916),x=()=>o(668721),C=o(474848);function T(e){let{onDismiss:t}=e;const o=(0,y().tz)(),n=(0,A().p)(),r=(0,f().IS)((e=>({icon:{width:32,height:32,color:e.icon.secondary}})),[]),i=(0,g().K8)((()=>{const e=x().A.state;return e?e.spaceLimit-e.spaceUsage:void 0}),[]);if(void 0===i||!n)return null;const a=(0,b().u2)((0,_().i)(n),o);return(0,C.jsxs)(S().Y1,{gap:24,padding:"24px 24px 20px 24px",children:[(0,C.jsx)(w().YA,{iconAndTitle:i>0?(0,C.jsxs)(S().Y1,{align:"top-center",gap:12,children:[(0,h().L)(r.icon),(0,C.jsx)(k().D,{styleName:"Heading-17px/Semibold",colorName:"primary",style:{textAlign:"center"},children:(0,C.jsx)(y().sA,{id:"ineligibleForAiPurchaseModal.title",defaultMessage:"You still have {responsesLeft, plural, one {{responsesLeft} free AI response} other {{responsesLeft} free AI responses}}",values:{responsesLeft:i}})})]}):(0,C.jsx)(w().ZQ,{iconGroup:v,iconColorName:"secondary",title:(0,C.jsx)(y().sA,{id:"ineligibleForAiPurchaseModal.title.outOfResponses",defaultMessage:"You’ll be able to purchase AI in {daysLeft, plural, one {{daysLeft} day} other {{daysLeft} days}}",values:{daysLeft:(0,_().ER)(n)}})}),description:(0,C.jsx)(k().D,{styleName:"UIMedium-13px/Regular",colorName:"primary",children:i>0?(0,C.jsx)(y().sA,{id:"ineligibleForAiPurchaseModal.description.responsesLeft",defaultMessage:"You’ll be able to purchase unlimited Notion AI after finishing your free {planName} plan trial",values:{planName:a}}):(0,C.jsx)(y().sA,{id:"ineligibleForAiPurchaseModal.description",defaultMessage:"Since you’re on a free {planName} plan trial, you can only purchase unlimited AI after the trial ends",values:{planName:a}})})}),(0,C.jsx)(w().aO,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,C.jsx)(y().sA,{id:"ineligibleForAiPurchaseModal.primaryAction",defaultMessage:"Got it"}),onClick:t}]}),(0,C.jsx)(I().Rz,{})]})}const M=354;async function P(e){const{environment:t,spaceStore:o,billingData:g,product:f,from:v,pageSection:h,isTrial:_,dismissMobilePlansModal:b,coupon:y}=e;if(o)if((0,r().N8)(null==g?void 0:g.subscription))(0,d().openPingSalesModal)();else if("ai"===f&&(0,u().uq)(g))!async function(e){await m().T.showAsyncModal((t=>(0,C.jsx)(p().s,{isOpen:t.isOpen,onDismiss:t.onDismiss,onClosed:t.onClosed,areaConstraint:{width:{type:"min",length:M},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,C.jsx)(T,{onDismiss:t.onDismiss,...e}),animateSizeTransition:!1})))}({environment:t});else{if("enterprise"===f){if(await(0,s().G)(t)&&!(0,i().hT)(o))return void(0,a().lK)({initialQuestion:"interest_in_enterprise",openedFrom:e.from})}if(null!=g&&g.subscription&&null!=g&&g.paymentMethod)(0,c().o)(t,{desiredProducts:[f],analyticsArgs:{from:v,pageSection:h}});else{const{subscriptionTier:e,addOnFeature:o}=n().hq(f)?{subscriptionTier:(0,r().AI)(g),addOnFeature:f}:{subscriptionTier:f,addOnFeature:void 0};await(0,l().qI)(t,{subscriptionTier:e,addOnFeature:o,from:v,coupon:y,isTrial:_,dismissMobilePlansModal:b})}}}},912979:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{loadingState:"uninitialized"}}}const r=new n},914649:(e,t,o)=>{o.d(t,{JC:()=>a,JS:()=>r,h5:()=>n,rP:()=>i});const n=o(206267).JW(),r="denied",i="no_devices",a="unknown_error"},915440:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isResizing:!1}}}const r=new n},917629:(e,t,o)=>{o.d(t,{h2:()=>s,qd:()=>r,sp:()=>a,t9:()=>i,wV:()=>l});var n=()=>o(690495);const r=(0,o(534177).uv)(n().lU);function i(e){return n().lU[e].placement}function a(e){const t=r.indexOf(e);return-1===t?Number.POSITIVE_INFINITY:t}function s(e){if(!e)return;const t=e;return r.includes(t)?t:void 0}function l(e){return n().lU[e].start??n().mG}},917992:(e,t,o)=>{o.d(t,{b:()=>r,oU:()=>n});const n={"1:1":{width:1,height:1},"5:4":{width:5,height:4},"4:3":{width:4,height:3},"7:5":{width:7,height:5},"3:2":{width:3,height:2},"5:3":{width:5,height:3},"16:9":{width:16,height:9}},r={crop:{unit:"%",x:0,y:0,width:100,height:100},mask:"None"}},919878:(e,t,o)=>{o.d(t,{$G:()=>Q,D:()=>fe,F8:()=>oe,FM:()=>Te,Fd:()=>we,GD:()=>Ve,IN:()=>ae,Il:()=>ge,LL:()=>Me,Lb:()=>re,Mi:()=>Ce,Qg:()=>ze,RC:()=>$,S0:()=>me,Sv:()=>Ee,T4:()=>se,Tu:()=>xe,V0:()=>ve,VC:()=>H,VD:()=>ke,Vg:()=>be,_D:()=>Fe,_Y:()=>J,as:()=>G,b9:()=>X,cP:()=>Oe,eI:()=>le,ep:()=>W,gU:()=>Pe,go:()=>Ae,hk:()=>K,jJ:()=>ee,kZ:()=>te,n2:()=>he,pW:()=>ue,pc:()=>pe,pf:()=>Re,pn:()=>q,sf:()=>ce,tM:()=>ne,tb:()=>z,uC:()=>je,uT:()=>He,wW:()=>qe,wr:()=>Y,xD:()=>Le,xs:()=>ie,yY:()=>ye,zb:()=>Ie});o(16280),o(944114),o(898992),o(823215),o(354520),o(672577),o(581454),o(908872),o(737550);var n=()=>o(908006),r=()=>o(700500),i=()=>o(716016),a=()=>o(970013),s=()=>o(713998),l=()=>o(179034),c=()=>o(519831),d=()=>o(869558),u=()=>o(161479),p=()=>o(919709),m=()=>o(496603),g=()=>o(183558),f=()=>o(720665),v=()=>o(970330),h=()=>o(896628),_=()=>o(722101),b=()=>o(44729),y=()=>o(246826),S=()=>o(778417),w=()=>o(606952),k=()=>o(725614),I=()=>o(317909),A=()=>o(780054),x=()=>o(586481),C=()=>o(71584),T=()=>o(921855),M=()=>o(594794),P=()=>o(972435),B=()=>o(299545),R=()=>o(732770),E=()=>o(630116),D=()=>o(502438),N=()=>o(24157),L=()=>o(980914),F=()=>o(439270),U=()=>o(671363),O=()=>o(3020),V=()=>o(709219);const j=(0,o(959013).YK)({turnIntoCollectionTitle:{defaultMessage:"Title",id:"simpleTableActions.collectionTitle"},turnIntoCollectionColumnTitle:{defaultMessage:"Column {columnIndex}",id:"simpleTableActions.collectionColumnTitle"}});function z(e){const{environment:t,index:o,simpleTableStore:n}=e,r=L().yv(n);if(0===r)return Y(),void k().clear({environment:t});const i=(0,f().qE)(o,0,r-1);V().A.setState({isActive:!0,simpleTableStore:n,selection:{start:{col:0,row:i},end:{col:L().MW(n)-1,row:i},type:"row"}}),S().td({environment:t,stores:[n],phase:D().SelectionPhase.Editing}),k().clear({environment:t})}function q(e){const{environment:t,index:o,simpleTableStore:n}=e,r=L().MW(n);if(0===r)return Y(),void k().clear({environment:t});const i=(0,f().qE)(o,0,r-1);V().A.setState({isActive:!0,simpleTableStore:n,selection:{start:{col:i,row:0},end:{col:i,row:L().yv(n)-1},type:"column"}}),S().td({environment:t,stores:[n],phase:D().SelectionPhase.Editing}),k().clear({environment:t})}function H(e){const{environment:t,rowIndex:o,columnIndex:n,simpleTableStore:r}=e;V().A.setState({isActive:!0,simpleTableStore:r,selection:{start:{col:n,row:o},end:{col:n,row:o},type:"cell"}}),S().td({environment:t,stores:[r],phase:D().SelectionPhase.Editing})}function W(e){const{environment:t,start:o,end:n,simpleTableStore:r}=e;V().A.setState({isActive:!0,simpleTableStore:r,selection:{start:o,end:n,type:"cell"}}),S().td({environment:t,stores:[r],phase:D().SelectionPhase.Editing}),k().clear({environment:t})}function K(e){const{environment:t,rowIndex:o,columnIndex:n,simpleTableStore:r}=e;W({environment:t,start:V().A.state.isActive?V().A.state.selection.start:{col:n,row:o},end:{col:n,row:o},simpleTableStore:r})}function G(e){H(e);const t=L().Jo(e);t&&k().setSelectionAtEnd({store:t})}function $(){if("editing"!==N().default.state.mode)return;const e=L().wg();if(!e)return void Y();const{columnIndex:t,rowIndex:o,simpleTableStore:n}=e.getProps(),r=V().A.state;if(r.isActive){const{start:e,end:i}=r.selection;!(e.col===i.col&&e.row===i.row)||e.col===t&&e.row===o&&r.simpleTableStore===n||H({environment:n.environment,rowIndex:o,columnIndex:t,simpleTableStore:n})}else H({environment:n.environment,rowIndex:o,columnIndex:t,simpleTableStore:n})}function Y(){V().A.setState({isActive:!1})}function Q(e){const{environment:t,direction:o,bypassExistingTextSelection:n,expandSelection:r}=e;if(!n&&L().wg())return;const i=V().A.state;if(i.isActive){const{selection:e,simpleTableStore:a}=i;if(r){const{rowIndex:n,columnIndex:r}=Z({selection:e,simpleTableStore:a,direction:o,wrapRow:!1});return void K({environment:t,rowIndex:n,columnIndex:r,simpleTableStore:a})}if(L().Gl({selection:e,columnIndex:e.start.col,rowCount:(0,L().yv)(a)})){const{columnIndex:n}=Z({selection:e,simpleTableStore:a,direction:o,wrapRow:!1});q({environment:t,index:n,simpleTableStore:a})}else{const r="editing"===N().default.state.mode;n&&k().clear({environment:t});const{rowIndex:i,columnIndex:s}=Z({selection:e,simpleTableStore:a,direction:o,wrapRow:!0});if(r)return void G({environment:t,rowIndex:i,columnIndex:s,simpleTableStore:a});H({environment:t,rowIndex:i,columnIndex:s,simpleTableStore:a})}}R().A.setKeyboardMode(!0)}function Z(e){const{selection:t,simpleTableStore:o,direction:n,wrapRow:r}=e,i=L().MW(o)-1,a=L().yv(o)-1,{col:s,row:l}=t.end;return"right"===n?s===i&&l===a?{columnIndex:i,rowIndex:a}:s===i?r?{columnIndex:0,rowIndex:l+1}:{columnIndex:s,rowIndex:l}:{columnIndex:s+1,rowIndex:l}:0===s&&0===l?{columnIndex:0,rowIndex:0}:0===s?r?{columnIndex:i,rowIndex:l-1}:{columnIndex:s,rowIndex:l}:{columnIndex:s-1,rowIndex:l}}function X(e){const{environment:t,direction:o,bypassExistingTextSelection:n,expandSelection:r}=e;if(!n&&L().wg())return;const i=V().A.state;if(i.isActive){const{selection:e,simpleTableStore:a}=i,{rowIndex:s,columnIndex:l}=function(e){const{selection:t,simpleTableStore:o,direction:n}=e,r=L().yv(o)-1,{col:i,row:a}=t.end,s="down"===n?Math.min(r,a+1):Math.max(0,a-1);return{columnIndex:i,rowIndex:s}}({selection:e,simpleTableStore:a,direction:o});if(r)return void K({environment:t,rowIndex:s,columnIndex:l,simpleTableStore:a});L().qD({selection:e,rowIndex:e.start.row,columnCount:(0,L().MW)(a)})?z({environment:t,index:s,simpleTableStore:a}):(n&&k().clear({environment:t}),H({environment:t,rowIndex:s,columnIndex:l,simpleTableStore:a}))}R().A.setKeyboardMode(!0)}function J(e){if(L().wg())return;const t=V().A.state;if(!t.isActive)return;const{environment:o,transaction:n}=e,{selection:r,simpleTableStore:i}=t;if(L().Gl({selection:r,columnIndex:r.start.col,rowCount:(0,L().yv)(i)}))Fe(e),Be({index:r.start.col,simpleTableStore:i,transaction:n}),q({environment:o,index:r.start.col,simpleTableStore:i});else if(L().qD({selection:r,rowIndex:r.start.row,columnCount:(0,L().MW)(i)})){De({rowID:i.getRenderableContentIds()[r.start.row],simpleTableStore:i,transaction:n}),z({environment:o,index:r.start.row,simpleTableStore:i})}else L().kP(r)?Le({environment:o,transaction:n}):Fe({environment:o,transaction:n})}function ee(e){if(L().wg())return;const t=V().A.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,r=n.getContentStores()[o.end.row],i=L().$O(n);if(!i)return;const{environment:a,transaction:s,key:l}=e,c=r.getPropertyStore(i[o.end.col]);if(l&&1===l.length){const e=c.getValue(),t=p().x9d(l);w().KY({environment:a,store:c,value:e?e.concat(t):t,transaction:s}),k().setSelectionAtEnd({store:c})}}function te(e){if(L().wg())return;const t=V().A.state;if(!t.isActive)return;const{environment:o,transaction:n}=e,{selection:r,simpleTableStore:i}=t;L().Gl({selection:r,columnIndex:r.start.col,rowCount:(0,L().yv)(i)})?ve({transaction:n}):L().qD({selection:r,rowIndex:r.start.row,columnCount:(0,L().MW)(i)})&&he({environment:o,transaction:n})}function oe(e){const{simpleTableStore:t,annotation:o}=e,n=V().A.state;if(!n.isActive||n.simpleTableStore!==t)return;const{selection:r}=n,i=[],a=Math.min(r.start.row,r.end.row),s=Math.max(r.start.row,r.end.row),l=Math.min(r.start.col,r.end.col),c=Math.max(r.start.col,r.end.col);for(let p=a;p<=s;p++)for(let e=l;e<=c;e++){const o=L().Jo({simpleTableStore:t,rowIndex:p,columnIndex:e}),n=null==o?void 0:o.getValue();o&&n&&i.push({textStore:o,textValue:n})}const d=p()._XS(o),u=i.every((e=>{let{textValue:t}=e;return t.every((e=>p().uPN(e).some((e=>p()._XS(e)===d))))}));for(const{textStore:p}of i)w().rq({...e,textStore:p,action:u?"removeAnnotationType":"annotate"})}function ne(e){if(Se())return;const{x:t,y:o,simpleTableStore:n}=e;U().A.setState({isActive:!0,simpleTableStore:n,hover:{x:t,y:o,showResizer:!1,resizing:!1,type:"cell"}})}function re(e){if(Se())return;const{type:t,simpleTableStore:o,index:n}=e;U().A.setState({isActive:!0,simpleTableStore:o,hover:{type:t,index:n}})}function ie(e){const{simpleTableStore:t,resizer:o}=e;U().A.setState({isActive:!0,simpleTableStore:t,hover:{type:"resizer",resizer:o}})}function ae(){Se()||U().A.setState({isActive:!1})}function se(e){const t=V().A.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,{environment:r,transaction:i}=e;de({index:o.start.col,simpleTableStore:n,transaction:i}),G({environment:r,rowIndex:0,columnIndex:o.start.col,simpleTableStore:n})}function le(e){const{count:t,simpleTableStore:o,transaction:n}=e;if(t<1)return;const r=L().MW(o);for(let i=0;i<t;i++)de({index:r+i,simpleTableStore:o,transaction:n})}function ce(e){const t=V().A.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,{environment:r,transaction:i}=e;de({index:o.end.col+1,simpleTableStore:n,transaction:i}),G({environment:r,rowIndex:0,columnIndex:o.end.col+1,simpleTableStore:n})}function de(e){const{index:t,simpleTableStore:o,transaction:n,columnID:r,format:i}=e,a=L().$O(o)||[],s=L().o0(o),l=r||(0,g().Ay)(),c=[...a.slice(0,t),l,...a.slice(t)],d=i?{...s,[l]:i}:s;h().zA({stores:[o],update:{table_block_column_order:c,table_block_column_format:d},transaction:n})}function ue(e){const t=V().A.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,{environment:r,transaction:i}=e;ge({environment:r,index:o.start.row,simpleTableStore:n,transaction:i}),G({environment:r,rowIndex:o.start.row,columnIndex:0,simpleTableStore:n})}function pe(e){const t=V().A.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,{environment:r,transaction:i}=e;ge({environment:r,index:o.end.row+1,simpleTableStore:n,transaction:i}),G({environment:r,rowIndex:o.end.row+1,columnIndex:0,simpleTableStore:n})}function me(e){const{environment:t,count:o,simpleTableStore:n,transaction:r,analyticsFrom:i}=e;if(o<1)return;const a=L().yv(n);for(let s=0;s<o;s++)ge({environment:t,index:a+s,simpleTableStore:n,transaction:r,analyticsFrom:i})}function ge(e){const{environment:t,index:o,simpleTableStore:n,transaction:r,analyticsFrom:i}=e,a=n.getContentStore();if(!(0,B().iU)(a))throw new Error("Block has an invalid parent.");const s=y().Wv({environment:t,type:"table_row",properties:{},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:r,spaceId:n.pointer.spaceId}),l=E().Bv.createChildStore(a,s.pointer);if(i&&v().v(t,{from:i,type:"table_row",creating_block_id:s.id}),o<=0)b().Ti({parentStore:a,childStore:l,transaction:r});else{const e=n.getContentStores();b().NI({parentStore:a,childStore:l,transaction:r,after:e[o-1].id})}return l}function fe(e){const{environment:t,simpleTableStore:o,transaction:n}=e,r=o.getContentStore();if(!(0,B().iU)(r))throw new Error("Block has an invalid parent.");const i=y().Wv({environment:t,type:"table_row",properties:{},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:n,spaceId:o.pointer.spaceId}),a=E().Bv.createChildStore(r,i.pointer);return b().NI({parentStore:r,childStore:a,transaction:n}),a}function ve(e){const t=V().A.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,r=L().$O(n),i=L().o0(n);if(!r)return;const a=r.slice(o.start.col,o.end.col+1);if(!a)return;const s=[],{transaction:l}=e;for(let c=o.start.col;c<=o.end.col;c++){const e=a[c-o.start.col],t=(0,g().Ay)();s.push(t),de({index:o.end.col+1,simpleTableStore:n,transaction:l,columnID:t,format:i?i[e]:void 0})}for(const c of n.getContentStores())_e({rowStore:c,columnIDs:a,newColumnIDs:s,transaction:l})}function he(e){const t=V().A.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,r=n.getRenderableContentIds(),{environment:i,transaction:a}=e;for(let s=o.start.row;s<=o.end.row;s++){const e=E().Bv.createChildStore(n,{table:l().ev,id:r[s]}),[t]=C().duplicateBlock({environment:i,stores:[e],addCopyName:!1,transaction:a,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!1,targetSpaceId:(0,u().e)(e.pointer.spaceId),baseUrl:A().A.domainBaseUrl,publicDomainName:A().A.publicDomainName,preferDuplicateLocation:"local"}),o=t[0];_().WH({parentStore:n.getContentStore(),insertStore:o,afterStore:e,transaction:a})}}function _e(e){const{rowStore:t,columnIDs:o,newColumnIDs:n,transaction:r}=e,i={...t.getPropertiesStore().getValue(),...(0,f().MU)(n.map(((e,n)=>[e,t.getPropertyValue(o[n])])))};x().L({environment:t.environment,store:t,properties:i,transaction:r})}function be(e){const t=U().A.state;if(!t.isActive)return;const{hover:o}=t;"cell"===o.type&&U().A.setState({...t,hover:{...o,showResizer:e}})}function ye(e){const t=U().A.state;if(!t.isActive)return;const{hover:o}=t;"cell"===o.type&&U().A.setState({...t,hover:{...o,resizing:e}})}function Se(){const e=U().A.state;return e.isActive&&"resizing"in e.hover&&e.hover.resizing}function we(e){const{tableBlockColumnFormat:t,simpleTableStore:o,transaction:n}=e;h().zA({stores:[o],update:{table_block_column_format:t},transaction:n})}function ke(e){const t=V().A.state;if(!t.isActive||"row"!==t.selection.type)return;const{selection:o}=t;V().A.setState({...t,selection:{...o,end:{col:e,row:o.end.row}}})}function Ie(e){const t=V().A.state;if(!t.isActive||"column"!==t.selection.type)return;const{selection:o}=t;V().A.setState({...t,selection:{...o,end:{col:o.end.col,row:e}}})}function Ae(e){const{environment:t,simpleTableStore:o,id:n,index:r,type:i,rowStore:a,theme:s,selectorStartPx:l,mouseOffsetPx:c}=e;let d=[];"column"===i?(q({environment:t,index:r,simpleTableStore:o}),d=F().A.findCellsInColumnFromStore(o,n)):(z({environment:t,index:r,simpleTableStore:o}),d=F().A.findCellsInRowFromStore(a));const u=L().QP({cells:d,type:i,theme:s});O().A.setState({isActive:!0,simpleTableStore:o,source:{id:n,type:i,index:r,draggedCells:u,selectorStartPx:l,mouseOffsetPx:c},destIndex:r,selectorDragPx:l,moved:!1})}function xe(e){const{destIndex:t,selectorDragPx:o}=e,n=O().A.state;n.isActive&&O().A.setState({...n,destIndex:t,selectorDragPx:o,moved:!0})}function Ce(){O().A.reset()}function Te(e){const{environment:t,format:o,simpleTableStore:r,transaction:i,type:a}=e,s=O().A.state;if(!s.isActive)return;const{source:l,destIndex:c}=s;if(s.source.type!==a||s.simpleTableStore!==r)return;const d={environment:t,simpleTableStore:r,source:l,destIndex:c,transaction:i};"column"===a?function(e){const{environment:t,columnOrder:o,source:r,destIndex:i,simpleTableStore:a,transaction:s}=e;if(!o)return;Y();const l=[...o.slice(0,r.index),...o.slice(r.index+1)],c=[...l.slice(0,i),r.id,...l.slice(i)];h().zA({stores:[a],update:{table_block_column_order:c},transaction:s}),n().default.afterNextFlush((()=>{q({environment:t,index:i,simpleTableStore:a})}))}({...d,columnOrder:o.table_block_column_order}):function(e){const{environment:t,source:o,destIndex:r,simpleTableStore:i,transaction:a}=e,s=i.getRenderableContentIds(),l=r>o.index?r:r-1;let c=r>0?s[l]:void 0;c===o.id&&(c=s[l+1]);Y();const d=i.getContentStores().find((e=>e.id===o.id)),u=i.getContentStores().find((e=>e.id===c));if(d){const e=i;u?b().NI({parentStore:e,after:u.id,childStore:d,transaction:a}):b().Ti({parentStore:e,childStore:d,transaction:a}),n().default.afterNextFlush((()=>{z({environment:t,index:r,simpleTableStore:i})}))}}(d)}function Me(e){const t=V().A.state;if(!t.isActive)return;Fe(e);const{selection:o,simpleTableStore:n}=t,{environment:r,transaction:i}=e;for(let a=o.start.col;a<=o.end.col;a++)Be({index:a,simpleTableStore:n,transaction:i});q({environment:r,index:o.start.col,simpleTableStore:n})}function Pe(e){const{simpleTableStore:t,columnOrder:o,transaction:n}=e;h().zA({stores:[t],update:{table_block_column_order:o},transaction:n})}function Be(e){const{index:t,simpleTableStore:o,transaction:n}=e,r=L().$O(o);if(!r||1===r.length)return;const i=[...r.slice(0,t),...r.slice(t+1)];h().zA({stores:[o],update:{table_block_column_order:i},transaction:n})}function Re(e){const t=V().A.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,r=n.getRenderableContentIds(),{environment:i,transaction:a}=e;for(let s=o.start.row;s<=o.end.row;s++)De({rowID:r[s],simpleTableStore:n,transaction:a});z({environment:i,index:o.start.row,simpleTableStore:n})}function Ee(e){const{simpleTableStore:t,numRowsToDelete:o,transaction:n}=e,r=t.getRenderableContentIds();for(let i=r.length-o;i<r.length;i++)De({rowID:r[i],simpleTableStore:t,transaction:n})}function De(e){const{rowID:t,simpleTableStore:o,transaction:n}=e,r=o.getContentStore();if(!(0,B().iU)(r))throw new Error("Block has an invalid parent.");if(L().yv(o)<=1)return;const i={table:l().ev,id:t};Ne({rowStore:E().Bv.createChildStore(r,i),simpleTableStore:o,transaction:n})}function Ne(e){const{rowStore:t,simpleTableStore:o,transaction:n}=e,r=o.getContentStore();b().zz({parentStore:r,childStore:t,transaction:n})}function Le(e){const t=V().A.state;if(!t.isActive)return;const{selection:o}=t;if(!L().kP(o))return;const{environment:n,transaction:r}=e;Fe({environment:n,transaction:r})}function Fe(e){const t=V().A.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,r=L().$O(n);if(!r)return;const i=n.getContentStores(),{environment:a,transaction:s}=e,l=Math.min(o.start.row,o.end.row),c=Math.max(o.start.row,o.end.row),d=Math.min(o.start.col,o.end.col),u=Math.max(o.start.col,o.end.col);for(let p=l;p<=c;p++)Ue({rowStore:i[p],startIndex:d,endIndex:u,columnOrder:r,transaction:s});k().clear({environment:a})}function Ue(e){const{rowStore:t,startIndex:o,endIndex:n,columnOrder:r,transaction:i}=e,a=r.slice(o,n+1);if(!a)return;const s=(0,f().MU)(a.map((e=>[e,null])));x().L({environment:t.environment,store:t,properties:s,transaction:i})}function Oe(e){const{environment:t,simpleTableStore:o,transaction:n}=e,i=L().$O(o)||[],s=L().o0(o)||{},{headerRow:u}=L().uq(o),p=o.getContentStores();if(!i.length)return;const m=i[0],g=o.getSpaceId(),v=(0,M().Z1)({environment:t,table:c().Vl,spaceId:g}),h=(0,M().Z1)({environment:t,table:d().Gy,spaceId:g}),_=u?p[0]:void 0,S=(0,f().MU)(i.map(((e,t)=>function(e){const{columnID:t,columnIndex:o,titleColumnID:n,headerRowStore:r}=e;let i=t,a="text",s=j.turnIntoCollectionColumnTitle;t===n&&(i="title",a="title",s=j.turnIntoCollectionTitle);const l=P().A.getIntl();return[i,{name:r?T().r4(r.getPropertyValue(t),r):l.formatMessage(s,{columnIndex:o}),type:a}]}({columnID:e,columnIndex:t,titleColumnID:m,headerRowStore:_})))),k={id:v,version:0,parent_table:l().ev,parent_id:o.id,space_id:g,name:void 0,schema:S,alive:!0},A=y().eC({environment:t,table:"collection",value:k,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:n});y().zv({store:o,data:{type:r().xd.collectionView,view_ids:[h],collection_id:v},transaction:n}),y().zv({store:o.getFormatStore(),data:{collection_pointer:{table:c().Vl,id:v,spaceId:g}},transaction:n}),p.map(((e,i)=>{if(u&&0===i)return void Ne({rowStore:e,simpleTableStore:o,transaction:n});const a=e.getProperties();y().zv({store:e,data:{type:r().xd.page},transaction:n}),w().KY({environment:t,store:e.getBlockTitleStore(),value:a[m],transaction:n}),y().zv({store:e.getPropertiesStore(),data:{[m]:void 0},transaction:n}),b().X$({childStore:e,parentStore:A,transaction:n})}));const x={id:h,version:0,type:"table",name:void 0,parent_id:o.id,parent_table:"block",space_id:g,format:{table_properties:i.map((e=>({visible:!0,property:e===m?"title":e,width:s&&e in s?s[e].width:void 0})))},page_sort:p.map((e=>e.id)).slice(0,a().WF),alive:!0},C={table:d().Gy,id:h,spaceId:g};I().applyOperation({store:(0,E().Oo)(o,C),operation:{pointer:C,command:"set",path:[],args:x},transaction:n})}function Ve(e){var t;const{environment:o,collectionViewBlockStore:n,pageStores:a,transaction:l}=e,c=n.getCollectionViewSourceCollectionStore();if(!c)return;if(a.length>L().b6||a.some((e=>e.hasContent())))return;const[d]=n.getCollectionViewStores(),u=c.getSchema(),p=(d.getFormat().table_properties||[]).filter((e=>e.visible&&e.property in u));if(!p)return;const m=n.getContentStore(),v=(0,g().Ay)();y().zv({store:n,data:{type:r().xd.table,collection_id:null},transaction:l}),y().zv({store:n.getFormatStore(),data:{table_block_column_order:p.map((e=>"title"===e.property?v:e.property)),table_block_column_format:(0,f().MU)(p.map((e=>["title"===e.property?v:e.property,{width:e.width}]))),table_block_column_header:!0,collection_pointer:null},transaction:l});const h=y().Wv({environment:o,type:"table_row",properties:(0,f().MU)(p.map((e=>{const t=e.property,o=t in u?u[t]:void 0;return["title"===t?v:t,o?[[o.name]]:[]]}))),inMemoryRecordCache:o.defaultRecordCache.inMemoryRecordCache,transaction:l,spaceId:n.pointer.spaceId}),_=E().Bv.createChildStore(m,h.pointer);b().Ti({parentStore:m,childStore:_,transaction:l});const S=(0,i().yP)(u),k=S.length>0?null===(t=c.getRecordKeyStore())||void 0===t?void 0:t.getRecordKey():void 0;a.map(((e,t)=>{const n=E().Bv.createChildStore(m,e.pointer),a=e.getProperties(),c=S.reduce((function(e,t){const o=(0,i().H4)(k,s().On(a[t]));return e[t]=[[o]],e}),{});y().zv({store:n,data:{type:r().xd.tableRow},transaction:l}),y().zv({store:n.getPropertiesStore(),data:{...c,[v]:n.getBlockTitleStore().getValue()},transaction:l}),w().KY({environment:o,store:n.getBlockTitleStore(),value:void 0,transaction:l}),b().NI({parentStore:m,childStore:n,transaction:l})})),y().zv({store:c,data:{alive:!1},transaction:l}),y().zv({store:d,data:{alive:!1},transaction:l})}function je(e){const{simpleTableStore:t,transaction:o}=e,n=t.getFormat(),r=!Boolean(n.table_block_column_header);h().zA({stores:[t],update:{table_block_column_header:r},transaction:o})}function ze(e){const{simpleTableStore:t,transaction:o}=e,n=t.getFormat(),r=!Boolean(n.table_block_row_header);h().zA({stores:[t],update:{table_block_row_header:r},transaction:o})}function qe(e,t,o){const n=V().A.state;if(!n.isActive)return;const r="default"===t?void 0:t,{selection:i,simpleTableStore:a}=n;if("row"===i.type){const e=a.getContentStores()[i.start.row];h().zA({stores:[e],update:{block_color:r},transaction:o})}if("column"===i.type){const e=L().$O(a),t=(0,m().mg)(L().o0(a)||{});if(!e)return;const n=e[i.start.col];n in t?t[n].color=r:t[n]={color:r},h().zA({stores:[a],update:{table_block_column_format:t},transaction:o})}D().default.state.phase!==D().SelectionPhase.Selected||e.device.isMobile||S().IU({environment:e})}function He(e){const{simpleTableStore:t,parentWidth:o,transaction:n}=e,r=L().$O(t);if(!r)return;const i=L().o0(t),a=(o-18)/r.length,s=(0,f().MU)(r.map((e=>[e,{width:a,color:i&&i[e]?i[e].color:void 0}])));h().zA({stores:[t],update:{table_block_column_format:s},transaction:n})}},920093:(e,t,o)=>{o.d(t,{V:()=>a,h:()=>i});var n=()=>o(763824),r=()=>o(350188);function i(e){const t=n().yX();return r().A.setState({...e,open:!0,onComplete:t.resolve}),t.promise}function a(e){const t=r().A.state;t.open&&(t.onComplete(e.didConfirm),r().A.reset())}},921385:(e,t,o)=>{o.d(t,{Fg:()=>Te,p6:()=>Me,dr:()=>Ce,D0:()=>st,kx:()=>oe,tN:()=>le});o(898992),o(823215),o(354520),o(581454);var n=o.n(o(36545)),r=()=>o(584262),i=()=>o(700500),a=()=>o(742852),s=()=>o(959013),l=()=>o(899963),c=()=>o(908006),d=()=>o(502438),u=()=>o(132867),p=()=>o(620689),m=()=>o(778417);var g=()=>o(884107),f=()=>o(60867),v=()=>o(705540),h=()=>o(495262),_=()=>o(857783),b=()=>o(435009),y=()=>o(797265),S=()=>o(426116),w=()=>o(317909),k=()=>o(878377),I=()=>o(186445),A=()=>o(836251),x=()=>o(202786),C=()=>o(712287),T=()=>o(656219),M=()=>o(416726);const P=(0,M().Fw)({key:"open home",displayName:void 0,analyticsName:"openHome",validators:[k().M3g],shortcuts:["openHome"],closeParentMenu:!0,action:async e=>{const t=e.environment,n=o(696746).XH("main");n&&(await n.load(),n.canRead()&&((0,o(162674).ZL)({environment:t,from:"keyboard_shortcut"}),_().uK({environment:t,store:n,pageVisitSource:r().y8.SidebarHome})))}});var B=()=>o(869562),R=()=>o(351360),E=()=>o(171018),D=()=>o(712505),N=()=>o(250484),L=()=>o(404141),F=()=>o(164575),U=()=>o(316221),O=()=>o(621327),V=()=>o(654056),j=()=>o(773458),z=()=>o(137743),q=()=>o(668491),H=()=>o(260488);const W=(0,s().YK)({quickFindName:{id:"action.quickFind.name",defaultMessage:"Quick find"}}),K=(0,M().Fw)({key:"quick find",displayName:W.quickFindName,analyticsName:W.quickFindName.defaultMessage,validators:[k().or([k().L8k,$]),k().AU6(k().ULX)],shortcuts:["quickFind"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return H().su({environment:t,analyticsFrom:"keyboard-shortcut"})}}),G=(0,M().Fw)({key:"quick find (alternative)",displayName:W.quickFindName,analyticsName:W.quickFindName.defaultMessage,validators:[k().or([k().L8k,$]),k().AU6(k().or([k().Uo6([k().c5w,x().T]),k().Uo6([k().p2L,k().vXb,k().wu0])])),k().AU6(k().ULX)],shortcuts:["openLinkMenuOrOpenSearch"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return H().su({environment:t,analyticsFrom:"keyboard-shortcut-command-k"})}});function $(e){const t=e.environment.RouterStore.state.route.name;switch(t){case"chat":case"gallery":case"marketplace":case"home":case"page":case"team":return!0;case"space":case"admin":case"adminListData":case"adminSingleRecord":case"aiGtmFavoriteImport":case"appleAuthCallback":case"asanaAuthCallback":case"communityRedirect":case"contentPolicyRedirect":case"creatorProfile":case"creatorProfileAnalytics":case"creatorProfileTemplates":case"creatorProfileCoupons":case"localizedTemplates":case"datadogAuthCallback":case"desktopEmailConfirm":case"exportPreview":case"external":case"externalAuthCallback":case"externalIntegrationAuthCallback":case"externalIntegrationPopupRedirect":case"front":case"googleAuthCallback":case"googleDriveAuthCallback":case"googleOneTapRedirect":case"guideRedirect":case"inAppTemplateCreatorSubmission":case"inAppTemplateSubmission":case"initiateExternalAuthentication":case"initiateExternalAuthenticationFromDesktop":case"invoiceById":case"invoiceRedirect":case"login":case"login/calendar":case"login/mail":case"loginSuccessCallback":case"loginWithEmailCallback":case"addAnotherAccount":case"logout":case"make":case"microsoftAuthCallback":case"modal":case"myIntegrations":case"nativeRedirect":case"nativeMailRedirect":case"nativeCalendarRedirect":case"nativeTab":case"posts":case"new":case"notFound":case"notionCalendarAuthorization":case"oauthAuthorization":case"onboarding":case"passwordChangeRedirect":case"passwordResetCallback":case"quickSearch":case"root":case"samlAuthCallback":case"passkeyAuthVerify":case"passkeyAuthCallback":case"passkeyRegistrationCallback":case"passkeyRegistrationVerification":case"settingsConsoleDefault":case"settingsConsoleOrganization":case"signup":case"signup/calendar":case"signup/mail":case"signupWithTrial":case"slackAuthCallback":case"studentGroupSignup":case"teamInvite":case"teamsInvite":case"templatesRedirect":case"termsRedirect":case"trelloAuthCallback":case"uiDoc":case"uniqueId":case"unknown":case"unsubscribe":case"upcomingInvoice":case"globalOauthPostLogin":case"startupsApplication":case"smbsApplication":case"lennyApplication":case"blank":case"creatorProfileIntegrations":case"githubStudentPackHome":case"githubStudentPackAuthCallback":case"formResponse":case"externalAuthNativeCallback":case"aiInferenceTranscript":case"workflowTemplates":return!1;default:return(0,o(534177).ub)(t),!1}}var Y=()=>o(22913),Q=()=>o(24157);const Z=(0,s().YK)({searchName:{id:"action.search.name",defaultMessage:"Search"}}),X=(0,M().Fw)({key:"search",displayName:Z.searchName,analyticsName:Z.searchName.defaultMessage,validators:[k().M3g,k().or([k().afo,k().L8k]),k().AU6(k().dUO),k().AU6(k().nOz),k().AU6(k().I2X)],shortcuts:["search"],closeParentMenu:!0,action:e=>{var t,n;const r=(0,I().ao)();if(!r)return;const i=r.isCollectionView(),a=(0,o(519839).UH)(r),s="page"===(null==a||null===(t=a.collectionViewStore())||void 0===t?void 0:t.getType());if(i&&!s){const e=o(129522).K.findCollectionViewBlockFromStore(r);return void(e&&"collectionContextStore"in e&&(null==e||e.collectionContextStore.searchOpenStore.setState(!0)))}const l=null===(n=window.getSelection())||void 0===n?void 0:n.toString(),c="editing"===Q().default.state.mode?Q().default.state:void 0;o(476380).ho({environment:e.environment,selectedString:l,textSelectionOnOpen:c})}});var J=()=>o(287133);function ee(e){return void 0!==e.shortcuts}const te=(0,s().YK)({enterName:{id:"action.enter.name",defaultMessage:"Enter"},syncPageName:{id:"action.syncPage.name",defaultMessage:"Save for offline"},resyncPageName:{id:"action.resyncPage.name",defaultMessage:"Refresh offline data"},unsyncPageName:{id:"action.unsyncPage.name",defaultMessage:"Remove from offline"},edit:{id:"action.edit.name",defaultMessage:"Edit"},copyLinktoViewName:{id:"action.copyLinktoView.name",defaultMessage:"Copy link to view"},zoomInName:{id:"action.zoomIn.name",defaultMessage:"Zoom in"},zoomOutName:{id:"action.zoomOut.name",defaultMessage:"Zoom out"},resetZoomName:{id:"action.resetZoom.name",defaultMessage:"Reset zoom"},blockSelectionCompletionName:{id:"action.blockSelectionCompletionName.name",defaultMessage:"Ask AI"},copyFormattedLinkNavigableTypeName:{id:"action.copyFormattedLinkNavigableType.name",defaultMessage:"Copy linked title"},copyLinkToCurrentPageSnackBarMessage:{id:"action.copyLinkToCurrentPage.snackBarMessage",defaultMessage:"Link to current page copied to clipboard"},pasteName:{id:"action.paste.name",defaultMessage:"Paste"},moveUpName:{id:"action.moveUp.name",defaultMessage:"Move up"},moveDownName:{id:"action.moveDown.name",defaultMessage:"Move down"},propertyVisibilityLabel:{id:"action.propertyVisibility.label",defaultMessage:"Toggle property visibility"},databaseLockLabel:{id:"action.databaseLock.label",defaultMessage:"Database lock"},wrapCellsName:{id:"action.wrapAllColumns.name",defaultMessage:"Wrap all columns"},createLinkName:{id:"action.createLink.name",defaultMessage:"Add link"},filterName:{id:"action.filter.name",defaultMessage:"Filter"},sortName:{id:"action.sort.name",defaultMessage:"Sort"},legacyGroupByName:{id:"action.legacyGroupBy.name",defaultMessage:"Group by"},groupByName:{id:"action.groupBy.name",defaultMessage:"Group"},subGroupByName:{id:"action.subGroupBy.name",defaultMessage:"Sub-group"},propertiesName:{id:"action.properties.name",defaultMessage:"Properties"},templatesName:{id:"action.templates.name",defaultMessage:"Templates"},calendarByName:{id:"action.calendarBy.name",defaultMessage:"Calendar by"},timelineByName:{id:"action.timelineBy.name",defaultMessage:"Timeline by"},noDateName:{id:"action.noDate.name",defaultMessage:"No date"},boldName:{id:"action.bold.name",defaultMessage:"Bold"},italicName:{id:"action.italic.name",defaultMessage:"Italic"},strikeThroughName:{id:"action.strikeThrough.name",defaultMessage:"Strike-through"},underlineName:{id:"action.underline.name",defaultMessage:"Underline"},darkModeName:{id:"action.darkMode.name",defaultMessage:"Dark mode"},openAsPageName:{id:"action.openAsPage.name",defaultMessage:"Open as page"},openAllTogglesName:{id:"action.openAllToggles.name",defaultMessage:"Open all toggles"},toggleRecordingInputLatencyName:{id:"action.toggleRecordingInputLatency.name",defaultMessage:"Toggle recording input latency"},more:{defaultMessage:"See more",id:"slashMenu.more.title"},toggleQnAMessage:{defaultMessage:"Toggle QnA",id:"action.toggleQnA.name"}});function oe(e){return"key"in e}function ne(e){return"clipboardData"in e}const re=[k().p2L,k().AU6(k().vEP),k().O1v];function ie(e){return(0,M().Fw)({...e,validators:re,closeParentMenu:!0,action:t=>{let{environment:n,blocks:r}=t;w().createAndCommit({userAction:"actionRegistry.createAnnotationAction",environment:n,canUndo:!0,perform:t=>{o(699744).XJ({environment:n,blocks:r,annotation:e.annotation,transaction:t})}})}})}const ae=(0,M().Fw)({key:"toggle all updates",displayName:void 0,analyticsName:"toggleAllUpdates",validators:[k().M3g],shortcuts:["toggleAllUpdates"],closeParentMenu:!0,action:e=>{o(770906).ZT({environment:e.environment,contentType:"inbox"})}}),se=(0,M().Fw)({key:"open share menu",displayName:void 0,analyticsName:"openShareMenu",validators:[k().M3g],shortcuts:["openShareMenu"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return o(321172).Tk(t)}}),le=(0,M().Fw)({key:"undo",displayName:M().AY.undoName,analyticsName:M().AY.undoName.defaultMessage,svg:o(454503).D,validators:[k().M3g,k().p2L,k().BBM,k().AU6(k().FrL),k().AU6(k().Xjv(i().xd.externalObjectInstancePage)),k().or([k().AU6(k().lj$),k().AU6(k().PfK)]),k().AU6(k().oy3)],shortcuts:["undo"],closeParentMenu:!0,track:{actionName:"undo"},action:(e,t,o)=>{let{environment:n}=t;return h().tN({environment:n,callback:e})}}),ce=(0,M().Fw)({key:"redo",displayName:M().AY.redoName,analyticsName:M().AY.redoName.defaultMessage,svg:o(638616).W,validators:[k().fHN],shortcuts:["redo"],closeParentMenu:!0,track:{actionName:"redo"},action:(e,t,o)=>{let{environment:n}=t;return h().ZS({environment:n,callback:e})}}),de=(0,M().Fw)({key:"up",analyticsName:"Up",displayName:void 0,validators:[],shortcuts:["up"],closeParentMenu:!0,action:(e,t)=>{let{environment:o}=e;if(t&&oe(t))return t.metaKey||t.ctrlKey?m().JK(o):void m().bi({environment:o,shiftKey:Boolean(t&&t.shiftKey),altKey:Boolean(t&&t.altKey)})}}),ue=(0,M().Fw)({key:"left",analyticsName:"Left",displayName:void 0,validators:[],shortcuts:["left"],closeParentMenu:!0,action:(e,t)=>{let{environment:o}=e;t&&oe(t)&&m().jG(o)}}),pe=(0,M().Fw)({key:"down",analyticsName:"Down",displayName:void 0,validators:[],shortcuts:["down"],closeParentMenu:!0,action:(e,t)=>{let{environment:o}=e;if(t&&oe(t))return t.metaKey||t.ctrlKey?m().PF(o):void m().mL({environment:o,shiftKey:Boolean(t&&t.shiftKey),altKey:Boolean(t&&t.altKey)})}}),me=(0,M().Fw)({key:"right",analyticsName:"Right",displayName:void 0,validators:[],shortcuts:["right"],closeParentMenu:!0,action:e=>{let{environment:t}=e;m().Uz(t)}}),ge=(0,M().Fw)({key:"context menu",analyticsName:"Context menu",displayName:void 0,validators:[k().W_Y,k().AU6(k().vEP)],shortcuts:["commandSlash"],closeParentMenu:!0,action:e=>{let{environment:t}=e;const{stores:n}=d().default.state;o(901265).WU({environment:t,stores:n,actionSectionGroupKey:"default",analyticsFrom:"command_slash_menu"})}}),fe=(0,M().Fw)({key:"indent",analyticsName:"Indent",displayName:void 0,validators:[k().p2L,k().AU6(k().vEP),k().ctY,k().AU6(k().$Mx)],shortcuts:["tab"],closeParentMenu:!0,action:e=>{let{environment:t}=e;w().createAndCommit({userAction:"actionRegistry.indent",environment:t,canUndo:!0,perform:e=>{!function(e){const t=d().default.state.stores;if(t.length>0){const o=u().pZ({environment:e.environment,blocks:t,transaction:e.transaction});o&&m().td({environment:e.environment,stores:o})}}({environment:t,transaction:e})}})}}),ve=(0,M().Fw)({key:"subitemIndent",analyticsName:"Toggle By Indent",displayName:void 0,validators:[k().p2L,k().AU6(k().vEP),k().ctY,k().$Mx,k().iv4,k().RdQ],shortcuts:["tab"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;w().createAndCommit({userAction:"actionRegistry.subitemIndent",environment:o,canUndo:!0,perform:e=>{f().RJ({environment:o,transaction:e,blocks:t,action:"indentSelfAndSubtree"})}})}}),he=(0,M().Fw)({key:"unindent",analyticsName:"Unindent",displayName:void 0,validators:[k().p2L,k().AU6(k().vEP),k().ctY,k().AU6(k().$Mx)],shortcuts:["untab"],closeParentMenu:!0,action:e=>{let{environment:t}=e;w().createAndCommit({userAction:"actionRegistry.unindent",environment:t,canUndo:!0,perform:e=>{!function(e){const t=d().default.state.stores;if(t.length>0){const o=u().Y1({environment:e.environment,blocks:t,transaction:e.transaction});o&&m().td({environment:e.environment,stores:o})}}({environment:t,transaction:e})}})}}),_e=(0,M().Fw)({key:"subitemUnindent",analyticsName:"Toggle By Unindent",displayName:void 0,validators:[k().p2L,k().AU6(k().vEP),k().ctY,k().$Mx,k().iv4,k().RdQ],shortcuts:["untab"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;w().createAndCommit({userAction:"actionRegistry.subitemUnindent",environment:o,canUndo:!0,perform:e=>{f().RJ({environment:o,transaction:e,blocks:t,action:"unindentSelf"})}})}}),be=(0,M().Fw)({key:"escape",analyticsName:"Escape",displayName:void 0,validators:[k().AU6(k().stn)],shortcuts:["esc"],closeParentMenu:!0,action:e=>{let{environment:t}=e;o(415651).Pt(t),m().IU({environment:t}),o(661920).nJ(t),o(846955).default.dismissTourTutorial()}}),ye=(0,M().Fw)({key:"escape",analyticsName:"Quick Search Escape",displayName:void 0,validators:[k().stn],shortcuts:["esc"],closeParentMenu:!0,action:()=>{N().Ay.state.query.text.length>0?N().Ay.updateQueryText(""):v().closeQuickSearch()}}),Se=(0,M().Fw)({key:"select all",analyticsName:"Select all",displayName:void 0,validators:[],shortcuts:["selectAll"],closeParentMenu:!0,action:e=>{let{environment:t}=e;m().Ub(t)}}),we=(0,M().Fw)({key:"cut",analyticsName:"Cut",displayName:void 0,validators:[k().p2L,k().AU6(k().vEP),k().opL],shortcuts:["cut"],closeParentMenu:!0,action:(e,t)=>{let{environment:o,lazyDependencies:n}=e;const{clipboardActions:r,markdownLinkifyIt:i}=n;r&&t&&ne(t)&&r&&r.cutWithMaybeConfirmation({environment:o,event:t,markdownLinkifyIt:i})}}),ke=(0,M().Fw)({key:"copy",analyticsName:"Copy",displayName:void 0,validators:[],shortcuts:["copy"],closeParentMenu:!0,action:(e,t)=>{let{environment:o,lazyDependencies:n}=e;const{clipboardActions:r,markdownLinkifyIt:i}=n;t&&ne(t)&&r&&r.copy({environment:o,event:t,markdownLinkifyIt:i})}}),Ie=(0,M().Fw)({key:"zoom in",displayName:te.zoomInName,analyticsName:te.zoomInName.defaultMessage,validators:[k().b8R,k().AU6(k().DNw)],shortcuts:["zoomIn"],closeParentMenu:!0,action:()=>{v().zoomIn()}}),Ae=(0,M().Fw)({key:"zoom out",displayName:te.zoomOutName,analyticsName:te.zoomOutName.defaultMessage,validators:[k().b8R,k().AU6(k().DNw)],shortcuts:["zoomOut"],closeParentMenu:!0,action:()=>{v().zoomOut()}}),xe=(0,M().Fw)({key:"zoom reset",displayName:te.resetZoomName,analyticsName:te.resetZoomName.defaultMessage,validators:[k().b8R,k().AU6(k().DNw)],shortcuts:["zoomReset"],closeParentMenu:!0,action:()=>{v().zoomReset()}});function Ce(){const{mainEditorCurrentBlockStore:e}=R().default.state;return D().default.state.open&&D().default.state.targetStore||e}async function Te(e,t,o,n){const r=await g().R.clipboardActions.load(),i=Ce();if(i)return void e(r)({environment:t,blocks:[i],callback:n,event:o});const a=(0,A().hK)(t);if(a){const{copyString:e,clipboardMessages:o}=r;e({environment:t,stringValue:a,copiedMessage:o.copiedLinkToClipboard}).then(n)}}const Me=(0,M().Fw)({key:"copy link to current page",displayName:M().AY.copyLinkNavigableTypeName,analyticsName:M().AY.copyLinkNavigableTypeName.defaultMessage,svg:a().w,validators:[k().b8R,k().AU6(k().oy3)],shortcuts:["copyLinkToCurrentPage"],closeParentMenu:!0,track:{actionName:"copy_block_link"},action:(e,t,o)=>{let{environment:n}=t;return Te((e=>e.copyLinkToBlock),n,o,e)}}),Pe=(0,M().Fw)({key:"copy linkified page title to current page",displayName:te.copyFormattedLinkNavigableTypeName,analyticsName:te.copyFormattedLinkNavigableTypeName.defaultMessage,svg:a().w,validators:[],shortcuts:["copyCurrentPageLinkifiedBlockTitle"],closeParentMenu:!0,track:{actionName:"copy_block_link"},action:(e,t,o)=>{let{environment:n}=t;return Te((e=>e.copyFormattedLinkToBlock),n,o,e)}}),Be=(0,M().Fw)({key:"paste",displayName:te.pasteName,analyticsName:te.pasteName.defaultMessage,validators:[k().p2L,k().AU6(k().vEP),k().opL,k().M3g],shortcuts:["paste"],closeParentMenu:!0,action:(e,t)=>{let{environment:o,lazyDependencies:{clipboardActions:n,formulasModule:r,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:a}}=e;t&&ne(t)&&n&&w().createAndCommit({userAction:"actionRegistry.paste",environment:o,canUndo:!0,perform:e=>{n.paste({environment:o,event:t,disableEmbedMenu:!0,transaction:e,onPasteFiles:n.pasteFilesForBlocks,formulasModule:r,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:a})}})}}),Re=(0,M().Fw)({key:"move up",displayName:te.moveUpName,analyticsName:te.moveUpName.defaultMessage,validators:[k().p2L,k().ctY,k().AU6(k().$Mx)],shortcuts:["moveUp"],closeParentMenu:!0,action:e=>{let{environment:t}=e;w().createAndCommit({userAction:"actionRegistry.moveUp",environment:t,canUndo:!0,perform:e=>{!async function(e){const t=u().BO({transaction:e.transaction,blocks:d().default.state.stores});t&&(m().td({environment:e.environment,stores:t}),await c().default.afterNextFlush(),p().BM({environment:e.environment}))}({environment:t,transaction:e})}})}}),Ee=(0,M().Fw)({key:"move down",displayName:te.moveDownName,analyticsName:te.moveDownName.defaultMessage,validators:[k().p2L,k().ctY,k().AU6(k().$Mx)],shortcuts:["moveDown"],closeParentMenu:!0,action:e=>{let{environment:t}=e;w().createAndCommit({userAction:"actionRegistry.moveDown",environment:t,canUndo:!0,perform:e=>{!async function(e){const t=u().oJ({transaction:e.transaction,blocks:d().default.state.stores});t&&(m().td({environment:e.environment,stores:t}),await c().default.afterNextFlush(),p().BM({environment:e.environment}))}({environment:t,transaction:e})}})}}),De=(0,M().Fw)({key:"property visibility",displayName:te.propertyVisibilityLabel,analyticsName:te.propertyVisibilityLabel.defaultMessage,shortcuts:["togglePropertyVisibility"],validators:[k().p2L,k().AU6(k().Kq2)],closeParentMenu:!0,action:e=>{const t=Object.values(D().default.state.open?E().A6.state.pagePropertiesStoreMap:E().Ep.state.pagePropertiesStoreMap),o=D().default.state.open?D().default.state.targetStore:R().default.state.mainEditorCurrentBlockStore;if(!o)return;const n=o.getAssociatedCollectionStore();if(!n)return;const r=t.every((e=>e.state.forceShowProperties)),i=(null==n?void 0:n.getNormalizedPropertyGroups())??[],a=i.every((e=>T().A.isPropertyGroupExpanded({groupId:e.id}))),s=!r||!a;for(const l of t)l.setState({...l.state,forceShowProperties:s});for(const l of i)T().A.setPropertyGroupExpandedOverride({groupId:l.id,override:s?"open":"closed"})}}),Ne=(0,M().Fw)({key:"enter",displayName:te.enterName,analyticsName:te.enterName.defaultMessage,validators:[k().p2L,k().AU6(k().vEP)],shortcuts:["enter"],closeParentMenu:!0,action:e=>{let{environment:t,blocks:o}=e;w().createAndCommit({userAction:"actionRegistry.enter",environment:t,canUndo:!0,perform:e=>{y().x7({blocks:o,transaction:e})}})}}),Le=(0,M().Fw)({key:"activate",analyticsName:"Activate",displayName:void 0,validators:[k().p2L,k().mUX],shortcuts:["commandEnter"],closeParentMenu:!0,action:e=>y().Yf(e)}),Fe=(0,M().Fw)({key:"open tab",analyticsName:"open tab",displayName:void 0,validators:[k().ITL],shortcuts:["commandEnter"],closeParentMenu:!0,action:e=>y().AP(e)}),Ue=(0,M().Fw)({key:"toggle sidebar",analyticsName:"Toggle sidebar",displayName:void 0,validators:[k().AU6(k().b8z)],shortcuts:["toggleSidebar"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return B().setExpand({environment:t,isExpanded:!o(749687).sidebarExpandedStore.state,from:"action_registry",saveDetailsSidebarPreference:!0})}}),Oe=(0,M().Fw)({key:"toggle update sidebar",analyticsName:"Toggle update sidebar",displayName:void 0,validators:[],shortcuts:["toggleUpdateSidebar"],closeParentMenu:!0,action:e=>{let{environment:t}=e;if(D().default.state.open){const e=o(455994).A.getPanelState("peek"),n=D().default.state.targetStore,r=null==n?void 0:n.getAssociatedCollectionStore();if(!r)return;const i=r.getLayoutStore();if(!i)return;e.isOpen?(0,C().F)({environment:t,layoutStore:i,from:"keyboard_default",panelLocation:"peek"}):(0,C().j)({environment:t,layoutStore:i,from:"keyboard_default",panelLocation:"peek"})}else B().setUpdateExpand({environment:t,isExpanded:!(0,o(644914).Nk)(t),from:"keyboard_default",saveDetailsSidebarPreference:!0})}}),Ve=(0,M().Fw)({key:"toggle both sidebars",analyticsName:"Toggle both sidebars",displayName:void 0,validators:[],shortcuts:["toggleBothSidebars"],closeParentMenu:!0,action:e=>{let{environment:t}=e;B().toggleBothSidebars(t)}}),je=(0,M().Fw)({key:"open link annotation menu",displayName:te.createLinkName,analyticsName:te.createLinkName.defaultMessage,validators:[k().c5w,x().T,k()._37,k().opL,k().AU6(k().Pnk)],shortcuts:["openLinkMenuOrOpenSearch"],closeParentMenu:!0,action:()=>o(501666).fi({type:"focusOnly",focus:!0})}),ze=(0,M().Fw)({key:"exit app",analyticsName:"Exit app",displayName:void 0,validators:[k().AU6(k().UL_),k().m01],shortcuts:["backbutton"],closeParentMenu:!0,action:e=>{let{environment:t}=e;if(t.mobileNative)if((0,A().Al)(t)){const{TabbedRouterStore:e}=t;"home"!==e.state.activeTab?o(537941).s({environment:t,tab:"home",navigationAction:"pop",navigationSource:"mobile-back-navigation"}):t.mobileNative.exitApp()}else t.mobileNative.exitApp()}}),qe=(0,M().Fw)({key:"command left",analyticsName:"Go back",displayName:void 0,validators:[k().UL_,k().AU6(k().c5w)],shortcuts:["commandLeft"],closeParentMenu:!0,action:(e,t)=>b().aX(e.environment)}),He=(0,M().Fw)({key:"command right",analyticsName:"Go forward",displayName:void 0,validators:[k().MNy,k().AU6(k().c5w)],shortcuts:["commandRight"],closeParentMenu:!0,action:()=>b().sY()}),We=(0,M().Fw)({key:"go back",analyticsName:"Go back",displayName:void 0,validators:[k().UL_],shortcuts:["goBack","backbutton"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return b().aX(t)}}),Ke=(0,M().Fw)({key:"go forward",analyticsName:"Go forward",displayName:void 0,validators:[k().MNy],shortcuts:["goForward"],closeParentMenu:!0,action:()=>b().sY()}),Ge=(0,M().Fw)({key:"go up",analyticsName:"Go up",displayName:void 0,validators:[()=>b()._r()],shortcuts:["goUp"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return b().up(t)}}),$e=(0,M().Fw)({key:"switch spaces pre tabs",analyticsName:"Switch spaces pre tabs",displayName:void 0,validators:[k().b8R,k().AU6(k().ld1)],shortcuts:["switchSpacesPreTabs"],closeParentMenu:!0,action:(e,t)=>{let{environment:o}=e;if(!t||!oe(t))return;t.preventDefault();const r=parseInt(n()(t.keyCode)),{currentUserRootStore:i,currentUserSettingsStore:a}=R().default.state;i&&a&&(S().IO({environment:o,index:r-1,userRootStore:i,userSettingsStore:a}),l().Bw(o))}}),Ye=(0,M().Fw)({key:"switch spaces post tabs",analyticsName:"Switch spaces post tabs",displayName:void 0,validators:[k().b8R,k().ld1],shortcuts:["switchSpacesPostTabs"],closeParentMenu:!0,action:(e,t)=>{let{environment:o}=e;if(!t||!oe(t))return;t.preventDefault();const r=parseInt(n()(t.keyCode)),{currentUserRootStore:i,currentUserSettingsStore:a}=R().default.state;i&&a&&(S().IO({environment:o,index:r-1,userRootStore:i,userSettingsStore:a}),l().Bw(o))}}),Qe=(0,M().Fw)({key:"open settings",analyticsName:"Open settings",displayName:void 0,validators:[k().b8R,k().uFH],shortcuts:["settings"],closeParentMenu:!0,action:e=>{o(209660).Ow()}}),Ze=(0,M().Fw)({key:"new page",analyticsName:"New page",displayName:void 0,validators:[k().IT$,k().M3g,k().or([k().b8R,k().wHP])],shortcuts:["newPage"],closeParentMenu:!0,action:e=>{let{environment:t}=e;B().quickAddPage({environment:t,from:"cmd_n"})}}),Xe=(0,M().Fw)({key:"turn into type",displayName:M().AY.turnIntoName,analyticsName:M().AY.turnIntoName.defaultMessage,validators:[k().p2L,k().AU6(k().vEP),o(792609).Y,k().pLL],shortcuts:["turnIntoType"],closeParentMenu:!0,track:{actionName:"turn_into"},action:async(e,t,r)=>{let{blocks:a,environment:s}=t;const l=await(0,o(855801).zQ)();if(!r||!oe(r))return;r.preventDefault();const c=parseInt(n()(r.keyCode)),d=i().zx[c],{serverCommitResult:u}=w().createAndCommit({userAction:"actionRegistry.turnIntoTypeViaKeyboard",environment:s,canUndo:!0,perform:e=>{l({environment:s,blocks:a,blockType:d,transaction:e})}});u.then(e)}}),Je=(0,M().Fw)({key:"open experiment settings",displayName:void 0,analyticsName:"openExperimentSettings",validators:[o(141966).l],shortcuts:["openExperimentSettings"],closeParentMenu:!0,action:()=>{L().A.setState({...L().A.state,open:!0,currentTab:"experiments",defaultSubtab:void 0})}}),et=[ie({key:"toggle bold",displayName:te.boldName,analyticsName:te.boldName.defaultMessage,shortcuts:["toggleBold"],annotation:["b"]}),ie({key:"toggle italics",displayName:te.italicName,analyticsName:te.italicName.defaultMessage,shortcuts:["toggleItalics"],annotation:["i"]}),ie({key:"toggle strike",displayName:te.strikeThroughName,analyticsName:te.strikeThroughName.defaultMessage,shortcuts:["toggleStrike"],annotation:["s"]}),ie({key:"toggle underline",displayName:te.underlineName,analyticsName:te.underlineName.defaultMessage,shortcuts:["toggleUnderline"],annotation:[o(919709).Ifu.Underline]})],tt=(0,M().Fw)({key:"toggle dark mode",displayName:te.darkModeName,analyticsName:te.darkModeName.defaultMessage,validators:[],shortcuts:["toggleDarkMode"],closeParentMenu:!0,action:e=>{let{environment:t}=e;const n="light"===t.ThemeStore.state.mode?"dark":"light";o(851650).C5(n)}}),ot=(0,M().Fw)({key:"open peek view as page",displayName:te.openAsPageName,analyticsName:te.openAsPageName.defaultMessage,validators:[k().GbK],shortcuts:["commandEnter"],closeParentMenu:!0,action:e=>{let{environment:t}=e;D().default.peekTargetStore.state&&_().uK({environment:t,store:D().default.peekTargetStore.state,pageVisitSource:r().y8.Expand})}}),nt=(0,M().Fw)({key:"toggle all toggles",displayName:te.openAllTogglesName,analyticsName:te.openAllTogglesName.defaultMessage,validators:[],shortcuts:["toggleAllToggles"],closeParentMenu:!0,action:e=>{let{environment:t}=e;const n=I().ao();n&&o(324089).In({environment:t,blockStore:n,includeSubitems:!0})}});function rt(e){return e.actions.filter(ee).map((t=>({...t,searchName:[e.title,t.displayName].filter(Boolean).join(" ")})))}const it=(0,M().Fw)({key:"toggle recording input latency",displayName:te.toggleRecordingInputLatencyName,analyticsName:te.toggleRecordingInputLatencyName.defaultMessage,validators:[],shortcuts:["toggleRecordingInputLatency"],closeParentMenu:!0,action:()=>{o(992202).toggleRecordingInputLatency()}}),at=(0,M().Fw)({key:"toggle qna in corner",displayName:te.toggleQnAMessage,analyticsName:"toggleQnAPane",validators:[k().L8k,k().AU6(k().c5w),k().AU6(k().W_Y),...o(621793).Jl],shortcuts:["commandJ"],closeParentMenu:!0,action:async e=>{let{environment:t}=e;const{assistantDependency:n}=await Promise.resolve().then(o.bind(o,650829)),{assistantMenuStore:r,assistantOriginElementStore:i,assistantAnalyticsActions:a,assistantMenuActions:s}=await n.load();if(o(430483).zD.shouldShowAssistantInCorner(t.device))if(r.state.open){await s.closeAssistantRightHandSideMenu({environment:t}),i.setAssistantLastViewedTime();const e=o(295169).default.getActiveSession();e&&a.trackAssistantClosed(t,{sessionContext:e,from:"button"})}else s.openAssistantRightHandSideMenu({environment:t,from:"shortcut"})}}),st=[nt,K,G,o(254452).z,...V().yj.actions,V().As,o(982257).i,Ne,Le,j().N,j().S,Fe,q().Sr,q().EC,J().Zm,J().Lc,Y().U,Y().H,F().Im,F().pG,(0,o(363019).F)("keyboard_shortcut"),le,ce,X,fe,ve,_e,he,Se,be,ye,Re,Ee,we,ke,Be,de,ue,pe,me,at,ge,U().gS,o(599364).ko,U().KV,je,ze,We,Ke,qe,He,Ie,Ae,xe,Ge,z().t,z().Y,$e,Ye,Me,Pe,Xe,q().NQ,q().ET,Ue,Ve,Oe,Qe,Ze,O().Fs,tt,ot,De,it,ae,se,P,O().DI,Je,...et,...rt(o(843005).t3),...rt(o(443616).kl)]},921855:(e,t,o)=>{o.d(t,{A6:()=>we,EA:()=>Ce,Fm:()=>be,HP:()=>ge,K8:()=>Ie,PB:()=>Se,PP:()=>fe,Rq:()=>me,S5:()=>J,V_:()=>ce,Vg:()=>te,Vr:()=>Te,W5:()=>he,Xu:()=>Me,Z6:()=>se,_S:()=>de,a8:()=>le,k5:()=>Ae,kw:()=>ke,ng:()=>Re,nu:()=>ye,oB:()=>Be,r4:()=>ee,rM:()=>ue,sQ:()=>Ee,sp:()=>ve,vA:()=>X,xh:()=>xe});o(944114),o(898992),o(354520),o(672577),o(803949),o(581454);var n=()=>o(450125),r=()=>o(634201),i=()=>o(857639),a=()=>o(416504),s=()=>o(450648),l=()=>o(179034),c=()=>o(919709),d=()=>o(983650),u=()=>o(931075),p=()=>o(100622),m=()=>o(496603),g=()=>o(720665),f=()=>o(606952),v=()=>o(347469),h=()=>o(410282),_=()=>o(116008),b=()=>o(780054),y=()=>o(914649),S=()=>o(267419),w=()=>o(972435),k=()=>o(231722),I=()=>o(562800),A=()=>o(110955),x=()=>o(351360),C=()=>o(508496),T=()=>o(53137),M=()=>o(630116),P=()=>o(24157),B=()=>o(295740),R=()=>o(838924),E=()=>o(713972),D=()=>o(197194),N=()=>o(792540),L=()=>o(962845),F=()=>o(299545),U=()=>o(333665),O=()=>o(906537),V=()=>o(470928);function j(e){return E().vq(e)&&e.classList.contains(d().te)}function z(e){return E().vq(e)&&e.classList.contains(d().gy)}function q(e){return E().vq(e)&&e.classList.contains(d().kz)}function H(e){return function(e){const t=E().EV(e,(e=>(0,D().am)(e)||(0,B().qb)(e)));if(t&&j(t))return t}(e)||K(e)||function(e){const t=E().EV(e,(e=>q(e)||(0,B().qb)(e)));if(t&&q(t))return t}(e)}function W(e){return E().vq(e)&&e.classList.contains(n().s)}function K(e){const t=E().EV(e,(e=>(0,D().am)(e)||(0,B().qb)(e)));if(t&&(0,D().am)(t))return t}function G(e){return E().vq(e)&&e.classList.contains(d().Mo)}function $(e){if(G(e))return!0;try{return G(e.parentNode)}catch(t){return!1}}function Y(e){try{const t=E().EV(e,(e=>Boolean(e.getAttribute&&e.getAttribute("contenteditable"))||(0,B().qb)(e)));return t&&t.isContentEditable}catch(t){return!1}}function Q(e,t){if(e===t.container){if(E().KH(e)){const o=e.textContent||"";return(0,r().PE)(o.substring(0,t.offset)).length}{const o=Array.from(e.childNodes).slice(0,t.offset).map((e=>re(oe(e)))).join("");return(0,r().PE)(o).length}}let o=0;for(const n of Array.from(e.childNodes)){if(n.contains(t.container))return o+Q(n,t);o+=(0,r().PE)(re(oe(n))).length}return o}function Z(e,t){const o=(0,B().sT)(e);if(!o)return 0;const n=function(e,t){const o=H(e);if(o){const e=o.parentNode,n=Array.from(e.childNodes).indexOf(o);return{container:e,offset:0===t?n:n+1}}if(G(e)||G(e.parentNode))return{container:e,offset:(e.textContent||" ").length-1};return{container:e,offset:t}}(e,t);return Q(o,n)}function X(e,t){if(0===t)return!(e.childNodes.length>0)||j(e.childNodes[0])||W(e.childNodes[0])||(0,D().am)(e.childNodes[0])||q(e.childNodes[0])||z(e.childNodes[0])?{container:e,offset:0}:{container:e.childNodes[0],offset:0};const o=m().SL(e.childNodes,z),n=o>=0?o-1:e.childNodes.length-1;let i=t;for(let a=0;a<=n;a++){const t=e.childNodes[a],o=re(oe(t)),s=(0,r().PE)(o).length;if(a===n?i-s<=0:i-s<0){if(j(t)||(0,D().am)(t)||W(t)||G(t)||q(t)){const e=E().nx(t.parentNode,t);return{container:t.parentNode,offset:e}}if(t.nodeType===Node.TEXT_NODE){return{container:t,offset:m().di((0,r().PE)(o),0,i).join("").length}}return X(t,i)}i-=s}return{container:e,offset:0}}function J(e){var t;const{environment:o,textValue:n,parentStore:r,disableHover:i,disableStyleAnnotations:s,disableInsertedDeletedAnnotations:l,disableDateStyleAnnotations:c,disableSuggestionAnnotations:m,disableCommentAnnotations:g,disabled:f,emojiType:v,highlightDiscussionId:_,renderedPageBlockId:k,parentBlockId:P,theme:B,katex:E,disableLinks:D,disableFormulaVariableStyles:N,formulaValueTypes:L,stopLinkPropagation:F,linkTargetBlank:U}=e,{device:O,currentUser:j}=o,z=C().default.checkGate({gateName:"enable_deleted_page_indicator"}),q=A().A.state.open&&A().A.state.isAddMenu,H=null===(t=x().default.state.currentSpaceStore)||void 0===t?void 0:t.getModel(),W=(0,V().Io)()&&H&&(0,u().Xi)(H),{blockColor:K,isBlockStore:G}=(()=>{if(r.isTable("block")){var e;const t=r.getRecordStoreUIParent(),o=t?M().Bv.createChildStore(t,r.pointer):void 0;return{blockColor:(null==o||null===(e=o.getFormat())||void 0===e?void 0:e.block_color)||"default",isBlockStore:t instanceof M().Bv}}return{blockColor:"default",isBlockStore:!1}})(),$=(0,p().Cg)(K)?"default":K,Y=(0,p().Cg)(K)?K:(0,h().j)(r.getRecordStoreUIAncestor(1));return d().S5({textValue:n,getRecordModel:r.getRecordModel,getRecordRole:r.getRecordRole,disableHover:i,disableStyleAnnotations:s,disableInsertedDeletedAnnotations:l,disableDateStyleAnnotations:c,disableSuggestionAnnotations:m,disableCommentAnnotations:g,disableLinks:D||!1,userTimeZone:(0,a().P)(),disabled:f,isAndroid:O.isAndroid,isSafariOrIOS:O.isSafari||O.isIOS,isWindows:O.isWindows,showEmojiInline:O.isWindows,emojiType:v,highlightDiscussionId:_,theme:B,intl:w().A.getIntl(),renderedPageBlockId:k,parentBlockId:P,katex:E,isClient:!0,baseUrl:b().A.domainBaseUrl,publicDomainName:b().A.publicDomainName,currentUserId:j.id,getPublicBaseUrlForPage:I().SN(o),externalIntegrations:T().A.integrations.state,disableFormulaVariableStyles:N,formulaValueTypes:L,enableDeletedPageIndicator:z,stopLinkPropagation:F,linkTargetBlank:U,emojiData:S().A.state,getToday:R().x1,isMobileNative:O.isMobileNative,isMobileNativeExternalLinkFixEnabled:C().default.checkGate({gateName:"mobile_native_external_link_fix"}),displayInUserTimezone:!0,dictationId:y().h5,isAddMenu:q,blockTextColor:$,blockBackgroundColor:Y,isBlockStore:G,disableAnimation:O.prefersReducedMotion,isPageVerificationEnabled:W})}function ee(e,t){return(0,s().r4)({textValue:e,getRecordModel:t.getRecordModel,userTimeZone:(0,a().P)(),intl:w().A.getIntl()})}function te(e,t,o,n,r){const{device:i,currentUser:l}=e,u=c().RQ(o),p=[];for(const[m,g]of u.entries()){const e=c().uPN(g),o=c().G6d(e);o?p.push(d().EK({customEmojiAnnotation:o,tokenAnnotations:e,index:m,getRecordModel:n.getRecordModel,getRecordRole:n.getRecordRole,disableHover:!0,isAndroid:i.isAndroid,isSafariOrIOS:i.isSafari||i.isIOS,theme:t,baseUrl:b().A.domainBaseUrl,currentUserId:l.id,disableAnimation:i.prefersReducedMotion})):p.push((0,s().r4)({textValue:[g],getRecordModel:n.getRecordModel,userTimeZone:(0,a().P)(),intl:w().A.getIntl(),disableInsertedAnnotations:r}))}return p}function oe(e){let t="";if(j(e))t+=c().Sj;else if((0,D().am)(e))t=c().Yl$;else if(W(e))t+=e.alt;else if(function(e){return E().vq(e)&&"br"===e.tagName.toLowerCase()}(e))t+="\n";else if(E().KH(e))t+=e.textContent;else if(q(e));else for(const o of Array.from(e.childNodes))t+=oe(o);return z(e)&&(t=t.replace(ae,"")),t}const ne=new RegExp(d().NO,"g");function re(e){return e.replace(ne,"")}const ie={[c().Sj]:{deleteEndToken:new RegExp(`${c().Sj}$`,"g"),deleteToken:new RegExp(`(${c().Sj})([^${d().NO}])`,"g"),existingToken:new RegExp(`${c().Sj}${d().NO}`,"g")},[c().Yl$]:{deleteEndToken:new RegExp(`${c().Yl$}$`,"g"),deleteToken:new RegExp(`(${c().Yl$})([^${d().NO}])`,"g"),existingToken:new RegExp(`${c().Yl$}${d().NO}`,"g")}},ae=new RegExp(`${c().nfR}$`,"g");function se(e,t){if(!t)return"";let o=oe(t);if(e.device.isAndroid)for(const[n,r]of Object.entries(ie))o=o.replace(r.deleteEndToken,"").replace(r.deleteToken,"$2").replace(r.existingToken,n);return"\n"===o[o.length-1]&&(o=o.substring(0,o.length-1)),o}function le(e,t,o){if(!e)return!1;let n=t;for(;n!==e&&!z(n);){const{parentNode:e}=n;if(!e)break;n=e}if(z(n))return o>0;const r=m().SL(e.childNodes,z);return!(r<0)&&(t===e&&o>r)}function ce(e,t){const o=(0,B().sT)(e);if(!o)return;const n=Z(e,t),r=H(e);return{index:n,forceEmit:Boolean(r),afterEndOfLine:le(o,e,t)}}function de(e,t){if(t||(t=O().get()),t){const e=Z(t.startContainer,t.startOffset),o=Z(t.endContainer,t.endOffset),n=H(t.startContainer)||H(t.endContainer);return{selection:{startIndex:e,endIndex:o},forceEmitSelectionStore:Boolean(n)}}}function ue(e,t,o){const n=X(e,t),r=X(e,o);return O().rangeFromContainerOffsets({start:n,end:r})}function pe(e,t,o,n){if(e===o&&t===n)return!0;if($(e)!==$(o))return!1;if(K(e)!==K(o))return!1;const r=(0,B().sT)(e),i=(0,B().sT)(o);if(r!==i)return!1;if(Z(e,t)!==Z(o,n))return!1;return le(r,e,t)===le(i,o,n)}function me(e,t){return!e&&!t||!(!e||!t)&&(e.startOffset===t.startOffset&&e.endOffset===t.endOffset&&e.startContainer===t.startContainer&&e.endContainer===t.endContainer||Y(e.startContainer)&&Y(t.startContainer)&&pe(e.startContainer,e.startOffset,t.startContainer,t.startOffset)&&pe(e.endContainer,e.endOffset,t.endContainer,t.endOffset))}function ge(e){const{environment:t,event:o,textValue:n,editorNode:r,store:i,canEdit:a,disableEquationInteraction:s}=e,l=_e({event:o,textValue:n,editorNode:r});(t.device.isFirefox||"editing"!==P().default.state.mode||P().default.isEmptySelection()||l&&(0,D().am)(l.node))&&l&&(s&&(0,D().am)(l.node)||f().Tv({environment:t,event:o,interactiveToken:l,store:i,canEdit:a}))}function fe(e){const{environment:t,event:o,textValue:n,editorNode:r,store:i,parentStore:a,canEdit:s}=e,l=_e({event:o,textValue:n,editorNode:r});l&&f().Ip({environment:t,event:o,interactiveToken:l,store:i,parentStore:a,canEdit:s})}function ve(e){const{environment:t,event:o,textValue:n,editorNode:r,store:i,canEdit:a}=e,s=_e({event:o,textValue:n,editorNode:r});s&&f().xE({environment:t,event:o,interactiveToken:s,store:i,canEdit:a})}function he(e){const{environment:t,event:o,textValue:n,editorNode:r,store:i,canEdit:a}=e;if(o.target===r)return void v().co({relatedNode:r});const s=_e({event:o,textValue:n,editorNode:r});s&&f().HH({environment:t,event:o,interactiveToken:s,store:i,canEdit:a})}function _e(e){const{event:t,textValue:o,editorNode:n}=e,r=E().EV(t.target,(e=>Boolean(e.getAttribute&&e.getAttribute("data-token-index"))));if(r&&null!=n&&n.contains(r)){const e=r.getAttribute("data-token-index");if(e){const t=Number.parseInt(e,10);if(o){const e=o[t];if(e)return{textValue:o,tokenIndex:t,textToken:e,node:r}}}}}function be(e){return Se({store:e.store,temporaryAnnotation:c().Ifu.TemporaryComment,multiSelection:_().A.getMultiSelection()})}function ye(e){const{blockId:t,textProps:o,find:n,currentFocusedResult:r}=e;let{textValue:i}=e;if(!i||"none"===o.type||0===n.length)return i;return(0,N().Jw)({textValue:i,find:n,intl:w().A.getIntl()}).forEach(((e,n)=>{let{selection:a}=e,s=!1;if("block_match"===o.type&&"block"===(null==r?void 0:r.type)){s=t===r.id&&m().n4(a,r.selection)}else if("comment_match"===o.type&&"comment"===(null==r?void 0:r.type)){s=o.commentId===r.id&&m().n4(a,r.selection)}else if("page_property_value_match"===o.type&&"page_property_value"===(null==r?void 0:r.type)){s=r.propertyId===o.propertyId&&m().n4(a,r.selection)&&r.id===t}else if("simple_table_cell_match"===o.type&&"simple_table_cell"===(null==r?void 0:r.type)){const e=o.propertyId===r.propertyId&&r.id===t;m().n4(a,r.selection),s=e}const l=s?c().Ifu.TemporarySelectedFindHighlight:c().Ifu.TemporaryFindHighlight;i=c().Mwp({textValue:i,selection:a,annotation:[l]})})),i}function Se(e){const{store:t,temporaryAnnotation:o,multiSelection:n}=e,r=t.getValue();if(n){const e=(0,L().$W)(n).find((e=>{let{store:o}=e;return o===t}));if(e){const{selection:t}=e;return c().Mwp({textValue:r,selection:t,annotation:[o]})}}return r}function we(e){const{store:t,multiSelection:o}=e,n=t.getValue();if(o){const e=(0,L().$W)(o).find((e=>{let{store:o}=e;return o===t}));if(e){const{selection:t}=e;return c().Mwp({textValue:n,selection:t,annotation:[c().Ifu.TemporaryCommentHighlight]})}}return n}function ke(e){const{store:t,equationStore:o}=e;if(!o.isOpen())return;const n=(0,k().H7)(o.state.savedTextSelectionState.multiSelection);if(!n)return;const{store:r,selection:i}=n;if(t!==r)return;const a=r.getValue(),s=i.startIndex===i.endIndex?a:c().lzV(a,i.startIndex,i.endIndex),l=D().G0({equationState:o.state,isTemporary:!0});return l?c().xym(s,[l],i.startIndex):void 0}function Ie(e){const{store:t,selection:o}=e,n=t.getValue();if(o.startIndex+1!==o.endIndex)return{textValue:n,modified:!1};const r=c().ANx(n,o.startIndex);if(!r||!c().rjO(r))return{textValue:n,modified:!1};const i=o.startIndex===o.endIndex?n:c().lzV(n,o.startIndex,o.endIndex),a=(0,g().h_)(r[1],c().EQ8),s=[r[0],[...a,c().CXp()]];return{textValue:c().xym(i,[s],o.startIndex),modified:!0}}function Ae(e){const{store:t,stateType:o}=e,{state:n,type:r}=o,i=t.getValue();if(n.textStore!==t)return i;const a="mentionMenu"===r?n.temporaryInputData.state:n.temporaryInputDataStore.state;if(!a)return i;if("slashMenu"===o.type&&o.state.isAddMenu&&""===a.prefix)return[c().Ey_(`${c().q4_(i)}`,[c().lkI(a)])];const s=(0,U().aX)(t,n.oldTextValue,a.prefix);if(s&&s.prefix){const{tokensBeforeRange:e,tokensInsideRange:t,tokensAfterRange:o}=c().AI5(i,s.prefix.startIndex,s.filter.endIndex),n=c().q4_(t);return[...e,c().Ey_(n,[c().lkI(a)]),...o]}return i}function xe(e){const{textValue:t,discussionId:o}=e;return c().Mwp({textValue:t,selection:{startIndex:0,endIndex:Number.POSITIVE_INFINITY},annotation:[c().Ifu.SuggestionRemoveText,o]})}function Ce(e){const{textValue:t,discussionId:o}=e;return c().Mwp({textValue:t,selection:{startIndex:0,endIndex:Number.POSITIVE_INFINITY},annotation:[c().Ifu.SuggestionInsertText,o]})}function Te(e){const{store:t,selection:o}=e,n=t.getValue(),{tokensBeforeRange:r,tokensInsideRange:i,tokensAfterRange:a}=c().AI5(n,o.startIndex,o.endIndex),s=c().q4_(i);return[...r,c().Ey_(s,[[c().Ifu.TemporarySelection]]),...a]}function Me(e){let{store:t,textValue:o}=e;if(!o)return o;if(t.table!==l().ev)return o;const n=M().Bv.createChildStore(t,{table:t.table,id:t.id});if(n.isInsideCollection()||n.isType("callout")||n.isType("code"))return o;let r=o;return(0,F().uy)((0,F().c7)(n)).unresolved.forEach((e=>{const t=["m",e.id];r=c().Mwp({textValue:r,annotation:t,selection:{startIndex:0,endIndex:Number.POSITIVE_INFINITY}})})),r}function Pe(e){if(e.nodeType===Node.TEXT_NODE)return e;if(E().vq(e)&&"false"===e.getAttribute("contentEditable"))return e;let t;const o=E().zn(e);return o.forEach((e=>{null!==e.textContent&&e.textContent.indexOf("\n")>=0&&(t=e)})),t||(o.length>0?o[o.length-1]:e)}function Be(e){const t=O().get();if(!t)return;const o=t.startContainer,n=(0,B().sT)(o),r=null==n?void 0:n.childNodes;if(!r||0===r.length)return;const a=(0,B().b2)(o,n),s=m().SL(r,(e=>e===a));var l;if(-1===s)return void i().log({level:"warning",from:"clientTextRenderHelpers",type:"setSelectionToParagraph",data:{message:"Selection ancestor not found from node's siblings",miscDataToConvertToString:{currentSelectionNodeName:o.nodeName,currentSelectionContentEditableLeafNodeName:a.nodeName,currentSelectionContentEditableIsSameNode:a.isSameNode(o),currentSelectionContentEditableLeafParentIsSameNode:null===(l=a.parentNode)||void 0===l?void 0:l.isSameNode(n)}}});let c,d,u=!0,p=o,g=t.startOffset;if(0===g)for(let i=s-1;u&&i>=0;i--){const e=Pe(r[i]);if(e.nodeType===Node.TEXT_NODE){var f;const t=null===(f=e.textContent)||void 0===f?void 0:f.lastIndexOf("\n");var v,h;if(void 0!==t&&t>=0)null!==(v=e.textContent)&&void 0!==v&&v.length&&t+1<(null===(h=e.textContent)||void 0===h?void 0:h.length)&&(p=e,g=t+1),u=!1;else p=e,g=0}else p=e,g=0}u=!0;for(let i=s;u&&i<r.length;i++){const e=Pe(r[i]);if(e.nodeType===Node.TEXT_NODE){let t;var _,b,y,S;if(p===e)t=null===(_=e.textContent)||void 0===_?void 0:_.indexOf("\n",g);else t=null===(b=e.textContent)||void 0===b?void 0:b.indexOf("\n");if(void 0!==t&&t>=0)c=e,d=t+1===(null===(y=e.textContent)||void 0===y?void 0:y.length)?t:t+1,u=!1;else c=e,d=(null===(S=e.textContent)||void 0===S?void 0:S.length)||0}else{var w;c=e,d=(null===(w=e.textContent)||void 0===w?void 0:w.length)||0}}if(p&&c){const t=O().rangeFromContainerOffsets({start:{container:p,offset:g},end:{container:c,offset:d||0}});O().set(t,e)}}function Re(e,t){const o=c().ld4(e.id,e.getSpaceId()),n=c().wmz(o);return{textValue:[n],tokenIndex:0,textToken:n,node:t}}function Ee(e){var t;return(null===(t=e.match(/\S+/g))||void 0===t?void 0:t.length)??0}},921997:(e,t,o)=>{o.d(t,{Bp:()=>_,Ch:()=>g,DZ:()=>b,Dh:()=>m,Dn:()=>x,G8:()=>h,GM:()=>I,L0:()=>k,Li:()=>C,N0:()=>f,N8:()=>a,O$:()=>d,On:()=>E,Rs:()=>w,U:()=>y,VF:()=>M,VW:()=>R,Ws:()=>S,Xq:()=>v,Zg:()=>s,_i:()=>N,aW:()=>c,dp:()=>p,eG:()=>l,vB:()=>B,yp:()=>D,zB:()=>u});var n=()=>o(498212),r=()=>o(696706);const i={[o(96689).NX]:!0,[o(179034).ev]:!0,[o(869558).Gy]:!0,[o(519831).Vl]:!0,[o(84520).mu]:!0,[o(854150).yK]:!0,[o(204384).ez]:!0};function a(e){return(0,r().w1)(e.table)&&!(e.table in i)?`versions/${e.id}:${e.table}:${e.spaceId}`:`versions/${e.id}:${e.table}`}function s(e){const t=e.indexOf("/");if(-1===t)return;const o=e.substring(t+1).split(":");return 2===o.length?r().L3.fromPointerLike({table:o[1],id:o[0]}):3===o.length?r().L3.fromPointerLike({table:o[1],id:o[0],spaceId:o[2]}):void 0}function l(e){return`collection/${e}`}function c(e){return`typedDatabasesListChanged/${e.spaceId}-${e.databaseType}`}function d(e){return`activity/${e}`}function u(e){return`activity/${e}`}function p(e){return`notification/${e}`}function m(e){return`teams_in_space/${e}`}function g(e){return`workflow_versions_in_block/${e}`}function f(e){return`user_page_visit/${e}`}function v(e){let{botId:t,accountId:o,calendarId:r}=e;return`cron/events_updated/${t}/${o}/${(0,n().gB)(r)}`}function h(e){let{botId:t}=e;return`cron/calendar_updated/${t}`}function _(e){let{botId:t,accountId:o,calendarId:r}=e;return`cron/calendar_selection_toggled/${t}/${o}/${(0,n().gB)(r)}`}function b(e){let{notionUserId:t,spaceId:o}=e;return`connections/updated/${t}/${o}`}function y(e){return`backlinks/${e}`}function S(e){return`page_visit/${e}`}function w(e){return`user_shared_pages_in_space/${e.spaceId}-${e.userId}`}function k(e){return`subscription_banner/${e.spaceId}`}function I(e){return`billing_subscription_banner/${e.spaceId}`}const A="presence";function x(e){return`${A}/${e}`}function C(e){return`user_joined_teams_in_space/${e.userId}:${e.spaceId}`}const T="diagnosticPing";function M(e){return`${T}/${e}`}const P="presence/drawing";function B(e){return`${P}/${e}`}function R(e){return`custom_emoji/${e}`}function E(e){return`current_space_permission_groups/${e}`}function D(e){return`current_space_group_membership/${e.spaceId}-${e.userId}`}function N(e){return`trusted_domains/${e.spaceId}`}},924329:(e,t,o)=>{function n(e){const t=e.propertyIds??[];return{id:e.id,type:"titleWithIcon",propertyIds:0===(null==t?void 0:t.length)?void 0:t,propertyLabels:e.propertyLabels}}function r(e){return{id:e.id,type:"normalizedTitleWithIcon",propertyIds:e.propertyIds??[],propertyLabels:e.propertyLabels}}o.d(t,{I:()=>n,X:()=>r})},925193:(e,t,o)=>{o.d(t,{$F:()=>s,Qr:()=>a,W7:()=>u,dx:()=>c,gC:()=>l,pg:()=>d});var n=()=>o(671593),r=()=>o(638681),i=()=>o(206267);function a(){return i().Dt()}const s=(0,n().rv)((e=>r().uuid().validator(e)),r().uuid().toString);function l(){return i().Dt()}const c=(0,n().rv)((e=>r().uuid().validator(e)),r().uuid().toString);function d(e){return e}function u(e){return i().Dt()}},925551:(e,t,o)=>{o.d(t,{IH:()=>me,iN:()=>pe,xK:()=>ae,D9:()=>_e});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(581454),o(908872),o(737550);var n=o.n(o(794148)),r=()=>o(496603),i=()=>o(498212),a=()=>o(183558),s=()=>o(973647),l=()=>o(534177),c=()=>o(720665),d=()=>o(189141);var u=()=>o(192845),p=()=>o(977345),m=()=>o(792071),g=()=>o(696706),f=()=>o(199378),v=()=>o(519831);function h(e){const{duplicatedAction:t,mapper:o,options:n,originOptions:i,sourceSpaceId:a}=e,s=m().Bj6.fromAutomationAction(t),c=s.pointer;const d=e=>{let{requested:t,requester:r}=e;return i=t.id,Boolean((null==n?void 0:n.isTemplateInstantiation)&&n.sourceBlockIds.has(i))?t:o({requested:t,requester:r});var i};function h(e){const t=(0,p().y5)(e);if("action"===t.source){var o;const e=g().L3.fromSpaceShardRecordId({id:t.action_id,spaceId:s.space_id},f().SC),n=(null===(o=d({requested:e,requester:c}))||void 0===o?void 0:o.id)??t.action_id;return(0,p().$y)({...t,action_id:n})}if("global"===t.source)return e;(0,l().HB)(t)}const _=s.pointer,{remappedRecordPointers:b,value:y}=(0,u().G)({automationActionModel:s,baseUrl:i.baseUrl,preventClearingConfig:!1,publicDomainName:i.publicDomainName,sourceSpaceId:a,visitors:{visitCollectionProperty:void 0,visitCollectionPropertyPointer:e=>{const o=d({requested:e,requester:_});if(o){const n=o.spaceId??t.space_id;return n!==t.space_id||o.table!==v().Vl?{type:"replace",value:void 0}:{type:"replace",value:{...o,propertyId:e.propertyId,spaceId:n}}}return(e.spaceId??t.space_id)!==t.space_id?{type:"replace",value:void 0}:{type:"keep"}},visitFormulaContextValue:e=>({type:"replace",value:h(e)}),visitFormulaPageProperty:e=>{if("collection"in e&&e.collection){const o=d({requested:e.collection,requester:c});if(o&&o.table===v().Vl){const n=o.spaceId??t.space_id;return n!==t.space_id?{type:"replace",value:void 0}:{type:"replace",value:{...e,collection:{...o,spaceId:n}}}}}else if("contextValueId"in e&&e.contextValueId)return{type:"replace",value:{...e,contextValueId:h(e.contextValueId)}};return{type:"keep"}},visitRecordPointer:e=>{const o=d({requested:e,requester:_});if(o){const e=o.spaceId??t.space_id;return e!==t.space_id?{type:"replace",value:void 0}:{type:"replace",value:{...o,spaceId:e}}}return(e.spaceId??t.space_id)!==t.space_id?{type:"replace",value:void 0}:{type:"keep"}}}}),S=y.getConfig();if(t.config=S,!(0,r().Im)(S))return b}var _=()=>o(612740),b=()=>o(700500),y=()=>o(31503),S=()=>o(921598),w=()=>o(970013),k=()=>o(537012);const I="415fc269-e68f-4da0-b3e3-b1273b741a7f";var A=()=>o(740912),x=()=>o(715256),C=()=>o(641007),T=()=>o(206267),M=()=>o(912720),P=()=>o(179034),B=()=>o(919709);function R(e){var t;const{blockValue:o,factoryButtonDeprecationContext:n,source:r}=e,i=function(e){return m().Bj6.fromValue(P().ev,e).getCreatedByPointer()??{id:C().rb.id,table:C().rb.table}}(o),a=o.space_id,s=T().JW(),l=T().JW(),c=n.isRootBlockFactoryBlock&&n.isCurrentBlockRootBlock?n.rootTextContainerId:T().JW(),d=function(e){const{automationActionId:t,textContainerBlockId:o,creatorPointer:n,originalBlockValue:r,spaceId:i,blockContent:a}=e;return{table:P().ev,value:{id:o,space_id:i,alive:!0,parent_table:f().SC,parent_id:t,type:"text",version:0,content:a,created_time:r.created_time,created_by_table:n.table,created_by_id:n.id}}}({automationActionId:l,textContainerBlockId:c,creatorPointer:i,originalBlockValue:o,blockContent:"duplication"===r?null===(t=o.content)||void 0===t?void 0:t.map((t=>e.pointerMapper({id:t,table:P().ev}).id)):o.content,spaceId:a}),u=function(e){const{automationId:t,automationActionId:o,spaceId:n,textContainerBlockId:r}=e;return{table:f().SC,value:{id:o,space_id:n,alive:!0,parent_table:M().yB,parent_id:t,type:"duplicate_blocks",blocks:[r],version:0,config:void 0}}}({automationActionId:l,automationId:s,creatorPointer:i,originalBlockValue:o,spaceId:a,textContainerBlockId:c}),p=function(e){var t;const{creatorPointer:o,automationActionId:n,originalBlockValue:r,spaceId:i,automationId:a}=e,s=T().JW(),l=Date.now();return{table:M().yB,value:{id:a,space_id:i,alive:!0,trigger:{id:s,type:"button"},parent_id:r.id,parent_table:P().ev,action_ids:[n],status:"active",properties:{name:(0,B().q4_)(null===(t=r.properties)||void 0===t?void 0:t.title)},created_by_id:o.id,created_by_table:o.table,created_time:r.created_time??l,last_edited_time:r.last_edited_time??l,version:0,last_edited_by_id:r.last_edited_by_id??o.id,last_edited_by_table:r.last_edited_by_table??o.table}}}({automationActionId:l,automationId:s,creatorPointer:i,originalBlockValue:o,spaceId:a});return{textContainerBlock:d,automation:p,automationAction:u}}var E=()=>o(651124),D=()=>o(443881),N=()=>o(857639);class L{constructor(e,t,n){this.childToParentMap=new Map,this.unmappedContentIds=new Set,this.extraTranscludedChildren=new(o(99895).G)((()=>new Set)),this.logWarning=t,this.createCopyIndicator=n;for(const{model:o}of e)if(o instanceof m().zgg)for(const t of o.getContentPointers()){e.getModel(t)?this.childToParentMap.has(t.id)?this.extraTranscludedChildren.get(t.id).add(o.id):this.childToParentMap.set(t.id,o.pointer.id):this.unmappedContentIds.add(t.id)}!this.createCopyIndicator&&this.logWarning&&this.logWarning({type:"multiReferencedContentIds",contentIds:Array.from(this.extraTranscludedChildren.keys())})}remapDuplicateBlockParent(e){const{originalBlockPointer:t,duplicateMapper:o}=e,n=this.childToParentMap.get(t.id);if(!n)return;const r=o({requested:{table:P().ev,id:n},requester:t});return r&&r.table===P().ev?r:void 0}createCopyIndicatorBlockValue(e){const{type:t,targetSpaceId:n,sourceBlockId:r,duplicateParentId:i,createdBy:a,createOptions:s,additionalRecordsToMutate:l}=e,{model:c}=m().zgg.create({id:(0,T().JW)(),type:b().xd.copyIndicator,space_id:n,parent:{id:i,table:P().ev,spaceId:n},createdBy:a},{useCrdt:o(807427).I()}),d=c.__IM_SORRY__getValue();return s.onCreate({type:t,duplicateBlockId:d.id,sourceBlockId:r,duplicateParentId:i}),l.push({table:P().ev,value:d}),d.id}remapDuplicateBlockContent(e){const{originalBlockPointer:t,duplicateMapper:o,originalBlockContent:n,originalCreatedBy:r,duplicateBlockId:i,targetSpaceId:a}=e,s=[];return{content:n.map((e=>{if(this.createCopyIndicator&&this.extraTranscludedChildren.has(e)&&this.extraTranscludedChildren.get(e).has(t.id))return this.createCopyIndicatorBlockValue({type:"multi-transcluded-content",targetSpaceId:a,sourceBlockId:e,duplicateParentId:i,createdBy:r,createOptions:this.createCopyIndicator,additionalRecordsToMutate:s});const n=o({requested:{table:P().ev,id:e},requester:t});return n?n.id:this.isUnmappedContentId(e)?this.createCopyIndicator?this.createCopyIndicatorBlockValue({type:"unmapped-content",targetSpaceId:a,sourceBlockId:e,duplicateParentId:i,createdBy:r,createOptions:this.createCopyIndicator,additionalRecordsToMutate:s}):void(null===(l=this.logWarning)||void 0===l||l.call(this,{type:"unmappedContentId",block:t,contentId:e})):e;var l})).filter(l().O9),additionalRecords:s}}isUnmappedContentId(e){return this.unmappedContentIds.has(e)}}var F=()=>o(691678),U=()=>o(976618),O=()=>o(142748),V=()=>o(433847),j=()=>o(68263),z=()=>o(813690),q=()=>o(388821),H=()=>o(824862),W=()=>o(869558),K=()=>o(343666),G=()=>o(197959),$=()=>o(37165),Y=()=>o(144081),Q=()=>o(665344),Z=()=>o(204384),X=()=>o(161479),J=()=>o(123382),ee=()=>o(743246);var te=()=>o(778555),oe=()=>o(725649);const ne={block:!0,collection:!0,collection_view:!0,discussion:!0,comment:!0,reaction:!0,automation:!0,automation_action:!0,skill:!0,layout:!0,form_question:!0,workflow:!0};function re(e){const t=e.clone(),o=m().b4_.fromRecordMap(t);function n(e){return(0,O().Yn)(e.pointer,o).some(((e,t)=>{const o=e.table!==P().ev;return 0===t?o:o||(0,b().$I)(e.type)}))}const r=[];for(const{pointer:i,model:a}of t)a&&!n(a)||r.push(i);return r.forEach((e=>t.delete(e))),t}function ie(e){return e.table in ne}function ae(e){const{sourceBlockId:t,targetBlockPointer:o,recordMap:n,options:i,baseUrl:a,publicDomainName:s,actor:l,getRecordRole:c,mapper:d,preventLegacyTransclusions:u,createLegacyTransclusionCopyIndicator:p,logWarning:m,spaceIdCreator:g,installationImprint:f,experimentService:v,isTemplateInstantiation:h}=e,_=[];let b=n;null!=i&&i.shallowCopyNavigableBlock&&(b=re(n));const y=e.recordPointerMap||q().RecordMapLegacy.create();for(const{pointer:r}of b){if(r.id===t){y.set(r,o);continue}let e=y.get(r);!e&&d&&(e=d({requested:r,requester:{table:P().ev,id:t}})),e||(e={spaceId:o.spaceId,table:r.table,id:(null==g?void 0:g.idInSavedSpace(r.table))??T().Dt()}),y.set(r,e)}let S;u&&(S=new L(n,m,p??!1));const w=q().RecordMap.create(),k=e=>{let{requested:t}=e;return y.get(t)},I={},A=[],x=n.getModel({id:t,table:P().ev}),C=x?function(e){const t="duplication",o=new Map;let n;return"factory"===e.type?(n={type:t,isRootBlockFactoryBlock:!0,isCurrentBlockRootBlock:!1,factoryBlockIdToNewTextContainerIdMap:o,rootTextContainerId:T().JW()},n.factoryBlockIdToNewTextContainerIdMap.set(e.id,{id:n.rootTextContainerId,table:P().ev})):n={type:t,isRootBlockFactoryBlock:!1,factoryBlockIdToNewTextContainerIdMap:o},n}(x):void 0;for(const{pointer:r,model:T}of b){if(void 0===T)continue;if(!ie(T))continue;if(!(null!=i&&i.duplicateDiscussions||r.table!==G().$Y&&r.table!==K().SN&&r.table!==Z().ez))continue;const e=Boolean((null==i?void 0:i.resolveTemplateVariables)&&ge({rootSourceBlockIds:[t],childSourcePointer:r,getSourceRecordValue:z().xb.fromRecordMap(n)}))?{...i,resolveTemplateVariables:!1}:i;null!=C&&C.isRootBlockFactoryBlock&&(C.isCurrentBlockRootBlock=T.id===t);const{duplicateRecord:d,additionalRecords:u}=le({table:T.table,record:T.__IM_SORRY__getValue(),mapper:k,options:e,rewiredUriMap:I,typedCollectionViewBlocks:A,originOptions:{baseUrl:a,publicDomainName:s},actor:l,getRecordRole:c,factoryButtonDeprecationContext:C,legacyTransclusionFixer:S,installationImprint:f,experimentService:v});if(void 0!==d){if(T.table===P().ev&&d.id===o.id){const e=d;delete e.parent_id,delete e.parent_table,delete e.alive}h&&T.table===P().ev&&T.autoGenerateOnTemplateDuplication()&&_.push({table:P().ev,id:d.id,spaceId:d.space_id}),se({duplicateRecordMap:w,duplicateRecordResult:{duplicateRecord:d,additionalRecords:u,duplicateRecordTable:T.table}})}}return function(e){const{rewiredUriMap:t,typedCollectionViewBlocks:o,duplicateRecordMap:n}=e;if(r().Im(t)||0===o.length)return;const i=r().oE(o.map((e=>n.getValue(e))));i.forEach((e=>{var o;const n=null==e||null===(o=e.format)||void 0===o?void 0:o.app_uri_map;n&&Object.entries(n).forEach((e=>{let[o,r]=e;n[o]=t[r]}))}));const a=i.reduce(((e,t)=>{var o;const n=null==t||null===(o=t.format)||void 0===o?void 0:o.app_id;return n&&(e[n]=e[n]?[...e[n],t]:[t]),e}),{});Object.entries(a).forEach((e=>{let[t,o]=e;const n=T().JW();o.forEach((e=>{var t;null!=e&&null!==(t=e.format)&&void 0!==t&&t.app_id&&(e.format.app_id=n)}))}))}({rewiredUriMap:I,typedCollectionViewBlocks:A,duplicateRecordMap:w}),{duplicateRecordMap:w,originalToDuplicate:y,aiBlocksToAutoGenerate:_}}function se(e){const{duplicateRecordResult:t,duplicateRecordMap:o}=e,{additionalRecords:n,duplicateRecord:r,duplicateRecordTable:i}=t;o.setValue(g().L3.fromPointerLike({table:i,id:r.id}),r);for(const a of n)o.setValue(g().L3.fromPointerLike({id:a.value.id,table:a.table}),a.value)}function le(e){const{table:t,record:o,mapper:n,options:a,originOptions:u,actor:p,helperRecordMap:h,getRecordRole:S,rewiredUriMap:w,typedCollectionViewBlocks:k,factoryButtonDeprecationContext:A,legacyTransclusionFixer:x,installationImprint:T,accessLockingValidator:D,experimentService:N,isTemplateInstantiation:L,shouldExcludeBlocksFromLimit:O,targetBlockIds:V}=e,z=r().mg(o),q=ve({mapper:n,requested:g().L3.fromPointerLike({table:t,id:o.id,spaceId:o.space_id}),requester:g().L3.fromPointerLike({table:t,id:o.id})});z.id=q.id,z.space_id=(0,X().e)(q.spaceId);const ne=[];if(t===P().ev){const e=z,{additionalRecords:t}=function(e){var t,o,n,a,u,p,f,h,S,w,k,A,x,T;const{originalBlock:D,duplicateBlock:N,mapper:L,options:F,originOptions:U,rewiredUriMap:O,typedCollectionViewBlocks:V,actor:z,helperRecordMap:q,factoryButtonDeprecationContext:K,legacyTransclusionFixer:$,installationImprint:Y,shouldExcludeBlocksFromLimit:Z=!1,accessLockingValidator:J}=e,oe={table:P().ev,id:D.id,spaceId:D.space_id};null!==(t=D.format)&&void 0!==t&&t.app_config_uri&&null!==(o=N.format)&&void 0!==o&&o.app_config_uri&&((0,E().Sn)(D.format.app_config_uri)?N.format.app_config_uri=void 0:((0,b().Ef)(N.type)&&V.push({table:P().ev,id:N.id,spaceId:N.space_id}),O[D.id]=N.id));const ne=[];N.crdt_data&&delete N.crdt_data;N.crdt_format_version&&delete N.crdt_format_version;null!==(n=N.format)&&void 0!==n&&n.site_id&&delete N.format.site_id;null!==(a=N.format)&&void 0!==a&&a.marketplace_listing_id&&delete N.format.marketplace_listing_id;null!==(u=N.format)&&void 0!==u&&u.slug&&delete N.format.slug;null!==(p=N.format)&&void 0!==p&&p.trigger_id_to_schedule_id&&delete N.format.trigger_id_to_schedule_id;if("factory"===N.type&&K){const{automation:e,automationAction:t,textContainerBlock:o}=R({blockValue:N,source:"duplication",pointerMapper:e=>L({requested:e,requester:oe})??e,factoryButtonDeprecationContext:K});ne.push(e,t,o),K.factoryBlockIdToNewTextContainerIdMap.set(D.id,{id:o.value.id,table:P().ev});const n=N;n.type="button",n.content=[],n.format={...n.format,automation_id:e.value.id}}(0,i().uj)(D.id)&&(N.format||(N.format={}),N.format.copied_from_pointer={table:P().ev,id:D.id,spaceId:D.space_id},N.copied_from=D.id);let re;D.parent_table===P().ev&&(re=null==K?void 0:K.factoryBlockIdToNewTextContainerIdMap.get(D.parent_id));re??=(null==$?void 0:$.remapDuplicateBlockParent({originalBlockPointer:oe,duplicateMapper:L}))??L({requested:{table:N.parent_table,id:N.parent_id,spaceId:N.space_id},requester:oe}),re&&(N.parent_id=re.id,N.parent_table!==re.table&&(0,_().LA)(re)&&(N.parent_table=re.table));null!==(f=N.format)&&void 0!==f&&f.ai_instructions_page_pointer&&(N.format.ai_instructions_page_pointer=L({requested:N.format.ai_instructions_page_pointer,requester:oe}));null!==(h=N.format)&&void 0!==h&&h.ai_skill_pointer&&(N.format.ai_skill_pointer=L({requested:N.format.ai_skill_pointer,requester:oe}));if(null!==(S=N.format)&&void 0!==S&&S.ai_block_configuration_menu){if(F.resolveTemplateVariables){const e=(0,d().p8)(N.format.ai_block_configuration_menu);if(s().Q.isSuccess(e)){const t=e.value;if("context"in t){const e=(t.context??[]).map((e=>{if("currentPage"===e.type){var t;return{type:"page",pageId:(null===(t=L({requested:{table:P().ev,id:e.pageId,spaceId:N.space_id},requester:oe}))||void 0===t?void 0:t.id)??e.pageId}}if("page"===e.type||"collection"===e.type||"slack"===e.type)return e;(0,l().HB)(e)}));N.format.ai_block_configuration_menu={...t,context:e}}}}}const ie=N;ie.view_ids&&(ie.view_ids=ie.view_ids.map((e=>{var t;return(null===(t=L({requested:{table:W().Gy,id:e,spaceId:ie.space_id},requester:oe}))||void 0===t?void 0:t.id)||e})));const ae=m().Bj6.fromBlock(ie).getCollectionPointers(),se=[];for(const r of ae){var le;const e=null==q?void 0:q.getValue(r);if(null==e||null===(le=e.format)||void 0===le?void 0:le.bot_id)se.push(r);else if(e&&e.parent_id!==D.id)se.push(r);else{const e=L({requested:r,requester:oe})||r;if(e.table!==v().Vl)throw new Error(`Collection pointer for duplicate collection is invalid: ${JSON.stringify(e)}`);se.push(e)}}se.length>0&&(ie.collection_id=se[0].id,ie.format={...ie.format,collection_pointer:se[0],collection_pointers:se});null!==(w=N.format)&&void 0!==w&&w.form_layout_pointer&&(N.format.form_layout_pointer=L({requested:N.format.form_layout_pointer,requester:oe}));N.discussions&&(F.duplicateDiscussions?N.discussions=N.discussions.map((e=>{var t;return(null===(t=L({requested:g().L3.fromPointerLike({table:G().$Y,id:e,spaceId:N.space_id}),requester:oe}))||void 0===t?void 0:t.id)||e})):delete N.discussions);if(N.permissions){var ce;if(F.duplicatePermissions)N.permissions=function(e){const{block:t,targetSpaceSettings:o,targetTeamSettings:n}=e;return(t.permissions||[]).filter((e=>!(0,j().P3)(e)&&(!(0,j().Ds)(e)&&((!(!n&&o.disablePublicAccess||n&&n.disable_public_access)||!(0,j().FP)(e))&&!((!n&&o.disableGuests||n&&n.disable_guests)&&(0,j().B2)(e)&&!o.memberUserIds.includes(e.user_id))))))}({block:N,targetSpaceSettings:F.duplicatePermissions.targetSpaceSettings,targetTeamSettings:null===(ce=F.duplicatePermissions)||void 0===ce?void 0:ce.targetTeamSettings});else delete N.permissions,"form"===N.type&&(N.permissions=(0,y().eb)())}N.content_classification&&delete N.content_classification;N.moved&&delete N.moved;N.properties||(N.properties={});for(const r in N.properties){const e=F.duplicateDiscussions?N.properties[r]:B().Uee(N.properties[r],{removeSuggestionAnnotationsAndText:!0,removeSuggestionAnnotations:!0,removeDiscussions:!0});N.properties[r]=e}!Z||N.type===b().xd.collectionViewPage||N.content&&0!==N.content.length?N.ignore_block_count&&delete N.ignore_block_count:N.ignore_block_count=!0;if(N.properties)for(const r of Object.keys(N.properties)){const e=N.properties[r];e&&(N.properties[r]=(0,te().R)({...U,text:{value:e,spaceId:(0,X().e)(N.space_id)},mapper:L,requester:oe,resolveTemplateVariables:F.resolveTemplateVariables||!1}))}if("transclusion_reference"===N.type&&F.deepCopyTransclusionContainers){const e=N;if(e.format&&e.format.transclusion_reference_pointer){const t=e.format.transclusion_reference_pointer,o=L({requested:t,requester:oe});o&&(e.format.transclusion_reference_pointer=o)}}if((0,b().$I)(N.type)&&F.shallowCopyNavigableBlock){const e=N;e.type="text";const t=B().ld4(D.id,D.space_id),o=[B().wmz(t)];e.properties={title:o},e.content=[]}if("transclusion_container"===N.type&&!F.deepCopyTransclusionContainers){const e=N;e.type="transclusion_reference",e.content=void 0;const t=e.format||{};t.transclusion_reference_pointer=oe,e.format=t}if("alias"===N.type&&N.format&&N.format.alias_pointer){const e=N.format.alias_pointer,t=L({requested:e,requester:oe});t&&(N.format.alias_pointer=t)}if(de=N,(0,b().p7)(de.type)&&N.format)if(Y)N.format.installation_imprint={pointer:Y};else if(N.format.installation_imprint&&J&&J.shouldOverwriteInstallationOnBlock(N.format.installation_imprint.pointer.id)){const e=J.getNewInstallationForInstallationId(N.format.installation_imprint.pointer.id);e&&void 0!==e&&(N.format.installation_imprint={pointer:{id:e.id,table:Q()._i}})}var de;N.type===b().xd.externalObjectInstancePage&&(N.type=b().xd.externalObjectInstance);if(N.type===b().xd.externalObjectInstance){var ue,pe,me;if(null!==(ue=N.format)&&void 0!==ue&&ue.related_external_object_uris_to_instance_ids&&(N.format.related_external_object_uris_to_instance_ids=(0,c().MU)((0,l().WP)(N.format.related_external_object_uris_to_instance_ids).map((e=>{var t;let[o,n]=e;return[o,(null===(t=L({requested:{table:P().ev,id:n,spaceId:ie.space_id},requester:oe}))||void 0===t?void 0:t.id)||n]})))),F.convertExternalObjectInstancesToPlaceholders&&(null===(pe=N.format)||void 0===pe||!pe.is_placeholder)&&null!==(me=N.format)&&void 0!==me&&me.bot_id){const e=null==q?void 0:q.getValue({table:H().GP,id:N.format.bot_id}),t=null==e?void 0:e.integration_id;if(t){const e={is_placeholder:!0,integration_id:t};N.format=e}}}N.file_ids&&function(e){var t;const o=JSON.stringify(e.properties);e.file_ids=null==e||null===(t=e.file_ids)||void 0===t?void 0:t.filter((t=>{var n,r,i,a,s,l;return!(null===(n=e.format)||void 0===n||!n.display_source||-1===(null===(r=e.format)||void 0===r||null===(r=r.display_source)||void 0===r?void 0:r.indexOf(t)))||(!(null===(i=e.format)||void 0===i||!i.page_cover||-1===(null===(a=e.format)||void 0===a||null===(a=a.page_cover)||void 0===a?void 0:a.indexOf(t)))||(!(null===(s=e.format)||void 0===s||!s.page_icon||-1===(null===(l=e.format)||void 0===l||null===(l=l.page_icon)||void 0===l?void 0:l.indexOf(t)))||-1!==o.indexOf(t)))}))}(N);const ge=D,fe=N;fe.format&&(null!==(k=ge.format)&&void 0!==k&&k.original_source||null!==(A=ge.format)&&void 0!==A&&A.image_edit_metadata)&&(fe.format.original_source=void 0,fe.format.image_edit_metadata=void 0);if(null!==(x=N.format)&&void 0!==x&&x.automation_id){const e=L({requested:{table:M().yB,id:N.format.automation_id,spaceId:N.space_id},requester:oe});e&&(N.format.automation_id=e.id)}var ve;null!==(T=N.format)&&void 0!==T&&T.workflow_id&&(N.format.workflow_id=null===(ve=L({requested:{table:ee().C0,id:N.format.workflow_id,spaceId:N.space_id},requester:oe}))||void 0===ve?void 0:ve.id);if(N.type===b().xd.transcription&&N.format){var he,_e,be;if(N.format.transcription_notes_id)N.format.transcription_notes_id=null===(he=L({requested:{table:P().ev,id:N.format.transcription_notes_id,spaceId:N.space_id},requester:oe}))||void 0===he?void 0:he.id;if(N.format.transcription_transcript_id)N.format.transcription_transcript_id=null===(_e=L({requested:{table:P().ev,id:N.format.transcription_transcript_id,spaceId:N.space_id},requester:oe}))||void 0===_e?void 0:_e.id;if(N.format.transcription_summary_id)N.format.transcription_summary_id=null===(be=L({requested:{table:P().ev,id:N.format.transcription_summary_id,spaceId:N.space_id},requester:oe}))||void 0===be?void 0:be.id;N.format.transcription_state={state:"paused"}}"collection"===D.parent_table&&D.type===b().xd.copyIndicator&&N.properties&&(0,l().uv)(N.properties).length>0&&(N.type=b().xd.page);if(!F.preserveSourceMetadataTimestamps){const e=Date.now();N.created_time=e,N.last_edited_time=e}z&&(N.last_edited_by_id=z.id,N.last_edited_by_table=z.table,N.created_by_id=z.id,N.created_by_table=z.table);N.non_content_children&&(N.non_content_children=N.non_content_children.map((e=>{var t;return(null===(t=L({requested:{table:P().ev,id:e,spaceId:N.space_id},requester:oe}))||void 0===t?void 0:t.id)||e})));const ye=N;if(ye.content){var Se;if($){const e=$.remapDuplicateBlockContent({originalBlockPointer:oe,duplicateMapper:L,originalBlockContent:ye.content,originalCreatedBy:z||C().TI.pointer,duplicateBlockId:ye.id,targetSpaceId:N.space_id});ye.content=e.content,ne.push(...e.additionalRecords)}else ye.content=ye.content.map((e=>{var t;return(null===(t=L({requested:{table:P().ev,id:e},requester:oe}))||void 0===t?void 0:t.id)||e}));if(N.space_id===I&&null!==(Se=N.properties)&&void 0!==Se&&Se.title){var we,ke,Ie;const e=(0,B().RQ)(null===(we=N.properties)||void 0===we?void 0:we.title);e&&e.length>0&&e[0].length>0&&null!==(ke=e[0][0])&&void 0!==ke&&null!==(ke=ke.trim())&&void 0!==ke&&ke.startsWith("🎲")&&null!==(Ie=e[0][0])&&void 0!==Ie&&null!==(Ie=Ie.trim())&&void 0!==Ie&&Ie.endsWith("🎲")&&(ye.content=r().k4(ye.content))}}return{duplicateRecord:N,additionalRecords:ne}}({originalBlock:o,duplicateBlock:e,mapper:n,options:a??{},rewiredUriMap:w,typedCollectionViewBlocks:k,originOptions:u,actor:p,helperRecordMap:h,factoryButtonDeprecationContext:A,legacyTransclusionFixer:x,installationImprint:T,shouldExcludeBlocksFromLimit:O,accessLockingValidator:D});ne.push(...t)}else if(t===v().Vl){ce(o,z,n,u,w,N)}else if(t===W().Gy){ue(o,z,n,w,h,L,V)}else t===G().$Y?function(e,t,o,n){const r={table:G().$Y,id:e.id,spaceId:e.space_id},i=o({requested:{table:t.parent_table,id:t.parent_id,spaceId:t.space_id},requester:r});i&&(t.parent_id=i.id);t.comments&&(t.comments=t.comments.map((e=>{var n;return(null===(n=o({requested:{table:K().SN,id:e,spaceId:t.space_id},requester:r}))||void 0===n?void 0:n.id)||e})));if("default"===t.type&&t.context)t.context=(0,te().R)({...n,text:{value:t.context,spaceId:t.space_id},mapper:o,requester:r,resolveTemplateVariables:!1});else if("suggestion"===t.type)throw new Error("Not implemented")}(o,z,n,u):t===K().SN?function(e,t,o,n){const r={table:K().SN,id:e.id,spaceId:e.space_id},i=o({requested:g().L3.fromPointerLike({table:t.parent_table,id:t.parent_id,spaceId:t.space_id}),requester:r});i&&(t.parent_id=i.id);t.text&&(t.text=(0,te().R)({...n,text:{value:t.text,spaceId:t.space_id},mapper:o,requester:r,resolveTemplateVariables:!1}));if(t.content)for(const[l,c]of t.content.entries()){var a;const e=null===(a=o({requested:g().L3.fromPointerLike({table:P().ev,id:c,spaceId:t.space_id}),requester:r}))||void 0===a?void 0:a.id;e&&(t.content[l]=e)}if(t.reactions)for(const[l,c]of t.reactions.entries()){var s;const e=null===(s=o({requested:{table:Z().ez,id:c,spaceId:t.space_id},requester:r}))||void 0===s?void 0:s.id;e&&(t.reactions[l]=e)}}(o,z,n,u):t===Z().ez?function(e,t,o,n){const r={table:Z().ez,id:e.id,spaceId:e.space_id},i=o({requested:g().L3.fromPointerLike({table:t.parent_table,id:t.parent_id,spaceId:t.space_id}),requester:r});i&&(t.parent_id=i.id)}(o,z,n):t===M().yB?pe({originalRecord:o,duplicateRecord:z,mapper:n,options:a??{},actor:p}):t===f().SC?me({originalRecord:o,duplicateRecord:z,mapper:n,getRecordRole:S,options:a??{},originOptions:u}):t===ee().C0?function(e){const{original:t,duplicate:o,mapper:n}=e,r={table:ee().C0,id:t.id,spaceId:t.space_id},i=n({requested:{table:P().ev,id:t.parent_id,spaceId:t.space_id},requester:r});i&&(o.parent_id=i.id);if(o.space_id=(null==i?void 0:i.spaceId)??t.space_id,!o.data)return;o.data.runtime_actor_pointer=void 0,o.data.versionPointer=void 0;for(const c of o.data.views??[]){var a;if(!c.pointer)continue;const e=null===(a=n({requested:c.pointer,requester:r}))||void 0===a?void 0:a.id;e&&(c.pointer={table:W().Gy,id:e,spaceId:o.space_id})}for(const c of o.data.modules??[])if("database"===c.type){var s;const e=(0,oe().DK)(c.state);if(!e||!e.pointer)continue;const t=(null===(s=n({requested:e.pointer,requester:r}))||void 0===s?void 0:s.id)||e.pointer.id;e.pointer={table:v().Vl,id:t,spaceId:o.space_id}}for(const c of o.data.triggers??[]){var l;c.enabled=!1,"recurrence"===(null===(l=c.state)||void 0===l?void 0:l.type)&&(c.state.scheduleId=void 0)}}({original:o,duplicate:z,mapper:n,originOptions:u}):t===J().MC?function(e){let{original:t,duplicate:o,mapper:n,originOptions:r}=e;const i={table:J().MC,id:t.id,spaceId:t.space_id},a=n({requested:g().L3.fromPointerLike({table:o.parent_table,id:o.parent_id,spaceId:o.space_id}),requester:i});a&&(o.parent_id=a.id)}({original:o,duplicate:z,mapper:n,originOptions:u}):t===Y().zx?function(e){let{original:t,duplicate:o,mapper:n}=e;const r={table:Y().zx,id:t.id,spaceId:t.space_id};o.parent_id=ve({mapper:n,requested:g().L3.fromPointerLike({table:o.parent_table,id:o.parent_id,spaceId:o.space_id}),requester:r}).id,o.format||(o.format={});o.format.copied_from_pointer={table:Y().zx,id:t.id,spaceId:t.space_id},o.modules=(0,F().Pe)(o.modules);const i=(0,U().E)(o.modules,(e=>{if("views"===e.type||"viewsMain"===e.type){return{type:e.type,id:e.id,collection_view_block_pointer:{...he({table:P().ev,mapper:n,requested:g().L3.fromPointerLike(e.collection_view_block_pointer),requester:r}),spaceId:o.space_id}}}if("formQuestion"===e.type){return{type:"formQuestion",id:e.id,formQuestionId:{...he({table:$().lo,mapper:n,requested:g().L3.fromPointerLike({table:$().lo,id:e.formQuestionId,spaceId:o.space_id}),requester:r}),spaceId:o.space_id}.id}}return e})),a=Object.fromEntries(Object.entries(i.form_conditional_modules??{}).filter((e=>{const[t,o]=e;return"formQuestion"===o.type})));o.modules={...i,form_conditional_modules:a},t.blocks&&(o.blocks=t.blocks.map((e=>ve({mapper:n,requested:{table:P().ev,id:e,spaceId:o.space_id},requester:r}).id)))}({original:o,duplicate:z,mapper:n}):t===$().lo?function(e){const{original:t,duplicate:o,mapper:n}=e,r={table:$().lo,id:t.id,spaceId:t.space_id},i=n({requested:g().L3.fromPointerLike({table:o.parent_table,id:o.parent_id,spaceId:o.space_id}),requester:r});i&&(o.parent_id=i.id)}({original:o,duplicate:z,mapper:n,originOptions:u}):(0,l().HB)(t);return{duplicateRecord:z,additionalRecords:ne}}function ce(e,t,o,n,r,s){var d,u,p,m;const f={table:v().Vl,id:e.id,spaceId:e.space_id};if(de(e,t,o),null!==(d=e.format)&&void 0!==d&&d.app_config_uri&&(r[e.id]=t.id),(0,i().uj)(e.id)){if(t.format||(t.format={}),t.format.copied_from_pointer={table:v().Vl,id:e.id,spaceId:e.space_id},void 0!==t.format.collection_default_template&&"empty"!==t.format.collection_default_template){const e=o({requested:{table:P().ev,id:t.format.collection_default_template.template_page_id},requester:f});e&&(t.format.collection_default_template={template_page_id:e.id})}if(t.format.layout_pointer){const e=he({mapper:o,table:Y().zx,requested:t.format.layout_pointer,requester:f});t.format.layout_pointer=e}t.copied_from=e.id}const h=o({requested:{table:t.parent_table,id:t.parent_id},requester:f});h&&(t.parent_id=h.id);const _=w().Dp(t);for(const i in _){const r=_[i];if(r&&"relation"===r.type&&w().Nv(r)){const e=o({requested:w().Nv(r),requester:f});if(e)r.collection_id=e.id,r.collection_pointer={id:e.id,table:v().Vl,spaceId:(0,X().e)(e.spaceId)};else if(r.property){const e=s.checkGate({gateName:"collections_xws",actor:x().S3,customIDs:{spaceId:t.space_id}});r.property=e?void 0:(0,a().Ay)()}}var b;if(r&&"title"===r.type&&t.name&&(t.name=(0,te().R)({...n,text:{value:t.name,spaceId:t.space_id},mapper:o,requester:f,resolveTemplateVariables:!1})),r&&"button"===r.type&&r.automation_id)r.automation_id=(null===(b=o({requested:{id:r.automation_id,spaceId:e.space_id,table:M().yB},requester:f}))||void 0===b?void 0:b.id)??r.automation_id}t.description&&(t.description=(0,te().R)({...n,text:{value:t.description,spaceId:t.space_id},mapper:o,requester:f,resolveTemplateVariables:!1}));for(const i in _){const e=_[i];if(!e||"formula"!==e.type||"v2"!==e.version||!e.formula2)continue;const{value:r}=(0,D().RI)({baseUrl:n.baseUrl,formula:e.formula2.code,publicDomainName:n.publicDomainName,spaceId:t.space_id,visitors:{visitFormulaContextValue:void 0,visitFormulaPageProperty:e=>{if("collection"in e&&e.collection){const t=o({requested:e.collection,requester:f});if(t&&t.table===v().Vl)return{type:"replace",value:{...e,collection:t}}}return{type:"keep"}},visitRecordPointer:void 0}});e.formula2.code=r}if(t.template_pages&&(t.template_pages=t.template_pages.map((e=>{var t;return(null===(t=o({requested:{table:P().ev,id:e},requester:f}))||void 0===t?void 0:t.id)||e}))),null!==(u=t.format)&&void 0!==u&&u.collection_mode&&"page_tree"===t.format.collection_mode.type){var y;const e=t.format.collection_mode.root_page_pointer,n=(null===(y=o({requested:g().L3.fromPointerLike({table:"block",id:e.id,spaceId:t.space_id}),requester:f}))||void 0===y?void 0:y.id)||e.id;t.format.collection_mode={type:"page_tree",root_page_pointer:{id:n,table:"block",spaceId:t.space_id}}}null!==(p=t.format)&&void 0!==p&&p.related_external_object_uris_to_instance_ids&&(t.format.related_external_object_uris_to_instance_ids=(0,c().MU)((0,l().WP)(t.format.related_external_object_uris_to_instance_ids).map((e=>{var n;let[r,i]=e;return[r,(null===(n=o({requested:{table:v().Vl,id:i,spaceId:t.space_id},requester:f}))||void 0===n?void 0:n.id)||i]})))),delete t.deleted_schema,null!==(m=t.format)&&void 0!==m&&m.automation_ids&&(t.format.automation_ids=t.format.automation_ids.map((e=>{var n;return null===(n=o({requested:{id:e,table:M().yB,spaceId:t.space_id},requester:f}))||void 0===n?void 0:n.id})).filter(l().O9))}function de(e,t,o){var n;if(null===(n=e.format)||void 0===n||!n.compound_workflow_template_instances)return;const r={table:v().Vl,id:e.id,spaceId:e.space_id};t.format||(t.format={}),t.format.compound_workflow_template_instances=e.format.compound_workflow_template_instances.map((e=>({...e,instance_pointers:e.instance_pointers.map((e=>{const n=t.space_id;if("property"===e.type)return e;const i=e.type,a=he({table:i,mapper:o,requested:{table:i,id:e.id,spaceId:n},requester:r});return{type:a.table,id:a.id}}))})))}function ue(e,t,o,n,r,i,a){var s,l,c,d,u,p,m;const f={table:W().Gy,id:e.id,spaceId:e.space_id};null!==(s=e.format)&&void 0!==s&&s.app_config_uri&&null!==(l=t.format)&&void 0!==l&&l.app_config_uri&&((0,E().Sn)(e.format.app_config_uri)?t.format.app_config_uri=void 0:n[e.id]=t.id);const v=null===(c=t.format)||void 0===c?void 0:c.collection_pointer;if(v){const e=null==r?void 0:r.getModel(v);if(!Boolean(null==e?void 0:e.isSyncedCollection())){const e=o({requested:v,requester:f})||v;t.format={...t.format,collection_pointer:e}}}if(t.format){var h;const e=null===(h=t.format.collection_groups)||void 0===h?void 0:h.map((e=>{if("relation"===e.value.type&&(0,S().WO)(e.value.value)&&e.value.value){return{...e,value:{type:"relation",value:o({requested:e.value.value,requester:f})}}}return e}));t.format.collection_groups=e;const n=t.format.collection_view_default_template;if(!(void 0===n||"empty"===n)){const e=o({requested:{table:P().ev,id:n.template_page_id},requester:f});e&&(i&&null!=a&&a.includes(e.id)||(t.format.collection_view_default_template={template_page_id:e.id}))}}const _=o({requested:{table:t.parent_table,id:t.parent_id,spaceId:t.space_id},requester:f});if(_&&(t.parent_id=_.id),t.page_sort&&(t.page_sort=t.page_sort.map((e=>{var n;return(null===(n=o({requested:{table:P().ev,id:e,spaceId:t.space_id},requester:f}))||void 0===n?void 0:n.id)||e}))),"page"===t.type&&null!==(d=t.format)&&void 0!==d&&d.page_pointer){var b;const e=t.format.page_pointer,n=(null===(b=o({requested:g().L3.fromPointerLike({table:"block",id:e.id,spaceId:t.space_id}),requester:f}))||void 0===b?void 0:b.id)||e.id;t.format.page_pointer={table:"block",id:n,spaceId:t.space_id}}if(null!==(u=t.format)&&void 0!==u&&u.property_filters){const e=t.format.property_filters;for(const t of e)t.filter&&(0,A().w)(t.filter,(e=>{var t;return null===(t=o({requested:e,requester:f}))||void 0===t?void 0:t.id}))}if(null!==(p=t.format)&&void 0!==p&&p.filters2){const e=t.format.filters2;for(const t of e)t.filter&&(0,A().w)(t.filter,(e=>{var t;return null===(t=o({requested:e,requester:f}))||void 0===t?void 0:t.id}))}const y=t.query2;var w;(y&&y.filter&&(0,A().w)(y.filter,(e=>{var t;return null===(t=o({requested:e,requester:f}))||void 0===t?void 0:t.id})),null!==(m=t.format)&&void 0!==m&&m.form_block_pointer)&&(t.format.form_block_pointer=o({requested:null===(w=t.format)||void 0===w?void 0:w.form_block_pointer,requester:f}))}function pe(e){var t,o;const{originalRecord:r,duplicateRecord:i,mapper:a,options:s,actor:c}=e,d=g().L3.fromSpaceShardRecordId({id:r.id,spaceId:r.space_id},M().yB);i.copied_from_pointer=d;const p=(null===(t=a({requested:g().L3.fromPointerLike({table:i.parent_table,id:i.parent_id,spaceId:i.space_id}),requester:d}))||void 0===t?void 0:t.id)??i.parent_id;i.parent_id=p;const v=(i.action_ids??[]).map((e=>{var t;return(null===(t=a({requested:g().L3.fromPointerLike({table:f().SC,id:e,spaceId:i.space_id}),requester:d}))||void 0===t?void 0:t.id)??e}));i.action_ids=v;const h=Date.now();i.created_time=h,i.last_edited_time=h,i.last_executed_time=void 0,i.last_failed_time=void 0,(0,l().O9)(null===(o=i.properties)||void 0===o?void 0:o.schedule_id)&&(i.properties.schedule_id=void 0),(0,l().O9)(c)&&(i.created_by_id=c.id,i.created_by_table=c.table,i.last_edited_by_id=c.id,i.last_edited_by_table=c.table),"recurrence"===i.trigger.type&&s.shouldDisableRecurrenceAutomation&&(i.status="disabled_duplication"),function(e){return"event"===e.trigger.type}(i)&&function(e){var t;const{duplicateRecord:o,mapper:r,originalRecord:i}=e,a=m().Bj6.fromAutomation(o);n()(a.isEventType());const s={id:i.id,spaceId:i.space_id,table:M().yB},{value:l}=(0,u().n)({automationModel:a,visitors:{visitCollectionProperty:void 0,visitRecordPointer:e=>{const t=r({requested:e,requester:s});if(t){const e=t.spaceId??o.space_id;return e!==o.space_id?{type:"replace",value:void 0}:{type:"replace",value:{...t,spaceId:e}}}return{type:"replace",value:void 0}}}});n()(l.isEventType());const c=l.getTrigger();o.trigger=c;const d={sourceAutomationParentId:i.parent_id,sourceAutomationId:i.id,sourceAutomationName:(null===(t=i.properties)||void 0===t?void 0:t.name)??""};o.trigger.event.source||(N().log({data:{miscDataToConvertToString:d},from:"duplicateHelpers.duplicateAutomationEventValueHelper",level:"info",type:"duplicateAutomationMissingTriggerSource"}),o.status="disabled")}({duplicateRecord:i,mapper:a,originalRecord:r})}function me(e){const{originalRecord:t,duplicateRecord:o,mapper:n,getRecordRole:r,options:i,originOptions:a,duplicateBlocks:s=!0}=e,c=t.space_id!==o.space_id,d={table:f().SC,id:t.id,spaceId:t.space_id},u=n({requested:g().L3.fromPointerLike({table:o.parent_table,id:o.parent_id,spaceId:o.space_id}),requester:d}),p=h({duplicatedAction:o,mapper:n,options:i.resolveAutomationConfig,originOptions:a,sourceSpaceId:t.space_id});let m=r;p&&(m=z().Oj.tryUntilFound(...Array.from(p).map((e=>z().Oj.constantForPointer(e,"editor"))),m));const v=(null==u?void 0:u.id)??o.parent_id;if(o.parent_id=v,c&&"http_request"===o.type&&o.config){o.config.url=void 0;for(const e of o.config.customHeaders??[])e.value=""}const _=(0,k().Mn)(o);if(_){_.some((e=>{const t=m(e.pointer);return!t||!(0,V().q_)(t,e.minimumRequiredRole)}))&&(o.config={})}const b=(o.blocks??[]).map((e=>{var t;return null===(t=n({requested:g().L3.fromPointerLike({table:P().ev,id:e,spaceId:o.space_id}),requester:d}))||void 0===t?void 0:t.id})).filter(l().O9);o.blocks=b.length>0?b:void 0,s||(o.blocks=void 0)}function ge(e){const{rootSourceBlockIds:t,childSourcePointer:o,getSourceRecordValue:n}=e;for(const r of(0,O()._N)(o,n))if(fe({rootSourceBlockIds:t,recordWithTable:r}))return!0;return!1}function fe(e){const{recordWithTable:t,rootSourceBlockIds:o}=e;if(t.table!==P().ev)return t.table===f().SC;if(o.includes(t.value.id))return!1;if(m().Bj6.fromBlock(t.value).isTemplateVariableContainerBlock())return!0}function ve(e){const{mapper:t,requested:o,requester:n}=e,r=t({requested:o,requester:n});if(!r)throw new Error(`Unable to find mapped duplicate for ${o.table} ${o.id} while duplicating ${n.table} ${n.id}`);return r}function he(e){const{mapper:t,requested:o,requester:n,table:r}=e,i=ve({mapper:t,requested:o,requester:n});if(!(0,g().Yt)(i,r))throw new Error(`Expected mapped duplicate for ${o.table} ${o.id} to be a ${r}, but it is a ${i.table} (while duplicating ${n.table} ${n.id})`);return i}function _e(e){return e.type!==b().xd.collectionViewPage&&(!e.content||0===e.content.length)}},925907:(e,t,o)=>{o.d(t,{n:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("copy",{viewBox:"0 0 14 16",svg:(0,n.jsx)("path",{d:"M2.404 15.322h5.701c1.26 0 1.887-.662 1.887-1.927V12.38h1.154c1.254 0 1.91-.662 1.91-1.928V5.555c0-.774-.158-1.266-.626-1.74L9.512.837C9.066.387 8.545.21 7.865.21H5.463c-1.254 0-1.91.662-1.91 1.928v1.084H2.404c-1.254 0-1.91.668-1.91 1.933v8.239c0 1.265.656 1.927 1.91 1.927zm7.588-6.62c0-.792-.1-1.161-.592-1.665L6.225 3.814c-.452-.462-.844-.58-1.5-.591V2.215c0-.533.28-.832.843-.832h2.38v2.883c0 .726.386 1.113 1.107 1.113h2.83v4.998c0 .539-.276.832-.844.832H9.992V8.701zm-.79-4.29c-.206 0-.288-.088-.288-.287V1.594l2.771 2.818H9.201zM2.503 14.15c-.563 0-.844-.293-.844-.832V5.232c0-.539.281-.837.85-.837h1.91v3.187c0 .85.416 1.26 1.26 1.26h3.14v4.476c0 .54-.28.832-.843.832H2.504zM5.79 7.816c-.24 0-.346-.105-.346-.345V4.547l3.223 3.27H5.791z"})})},927080:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(178624).R)({key:"openInDesktopApp",namespace:o(419494).Bq,important:!0,trackingType:"necessary"})},928074:(e,t,o)=>{o.d(t,{$d:()=>M,Aj:()=>I,Hb:()=>y,NV:()=>E,QJ:()=>S,WG:()=>T,Xh:()=>A,dR:()=>P,iG:()=>k,kT:()=>B,le:()=>w,pQ:()=>C,u:()=>R});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(803949),o(737550);var n=()=>o(433847),r=()=>o(68263),i=()=>o(179034),a=()=>o(96689),s=()=>o(854150),l=()=>o(468006),c=()=>o(496603),d=()=>o(534177),u=()=>o(108944),p=()=>o(731320),m=()=>o(326589),g=()=>o(792415),f=()=>o(351360),v=()=>o(605402),h=()=>o(508496),_=()=>o(630116),b=()=>o(663590);function y(e){const{store:t,showRestrictedPermissionBanner:o}=e,{canAccessParent:n}=k({store:t});return n&&(o||w({store:t}))}function S(e){const{store:t}=e;if(t.getParentTable()===a().NX)return;const o=(0,u().KA)(t);if(!o)return;const i=(0,n().wD)((0,u().E)(o));for(const n of i)if((0,r().Lg)(n))return n}function w(e){const{store:t}=e;if(t.getParentTable()===a().NX)return!1;const o=(0,u().KA)(t),i=o?(0,n().wD)((0,u().E)(o)):[],s=t.getPermissionItems(),l={};for(const r of i)l[(0,n().I$)(r)]=r;for(const a of s){const e=a.role,t=l[(0,n().I$)(a)];if(t){if((0,r().PW)(e)&&(0,r().PW)(t.role)&&(0,n().dI)(e,t.role))return!0;if(r().Ni(t)&&!r().Ni(a))return!0}else if((0,r().Lg)(a)||(0,r()._d)(a)||(0,r().T$)(a)||(0,r().sk)(a))return!0}return!1}function k(e){const{store:t}=e,o=(0,u().fU)(t)[1];return{parentStore:o,canAccessParent:o&&o.canRead()}}function I(e){const{store:t}=e,o=(0,u().fU)(t),n=o.find((e=>e instanceof _().Bv&&e.isRestricted())),r=o[o.length-1];return n||r&&r.getParentTable()===a().NX&&r.canRead()}function A(e){const{store:t}=e,o=(0,u().Uo)(t),n=f().default.state.currentSpaceStore;return Boolean((null==n?void 0:n.getDisableGuests())||(null==o?void 0:o.getDisableGuests()))}function x(e){const{mostPermissivePermissions:t,store:o,ancestorTeamId:n,type:a}=e;if(!n)return;const s=t.find((e=>{let{permissionItem:t}=e;return t.type===a&&t.team_id===n}));if(s)return s;const l=t.find((e=>{let{permissionItem:t}=e;return r().T6(t)}));return"explicit_team_guest_permission"!==a||l?{permissionItem:{type:a,role:"none",team_id:n},from:(null==l?void 0:l.from)??{table:i().ev,blockId:o.id}}:void 0}function C(e){let{trustedDomainsStore:t}=e;if(t){var o;const e=f().default.state.currentSpaceStore;return((null===(o=t.getForSpace(e))||void 0===o?void 0:o.enabledTrustedEmailDomains)??[]).length>0}return!1}function T(){return(0,b().FI)()&&h().default.checkGate({gateName:"trusted_domain_redesign"})}function M(e){const{permissionItem:t,store:o}=e,n=t.from,i=r().Yi(n);return!(n.table===o.table&&i===o.id)}function P(e){var t;const{store:o,environment:n,trustedDomainsStore:a}=e,l=(0,p().i0)(o),d=u().Uo(o),f=function(e){let{mostPermissivePermissions:t,store:o}=e;const n=t.find((e=>{let{permissionItem:t}=e;return r().FP(t)}));return n||{permissionItem:{type:"public_permission",role:"none"},from:{table:i().ev,blockId:o.id}}}({mostPermissivePermissions:l,store:o}),_=function(e){let{mostPermissivePermissions:t,store:o}=e;const n=t.find((e=>{let{permissionItem:t}=e;return r().sk(t)}));return n||{permissionItem:{type:"trusted_domain_permission",role:"none"},from:{table:i().ev,blockId:o.id}}}({mostPermissivePermissions:l,store:o}),y=function(e){let{mostPermissivePermissions:t,mostPermissiveTrustedDomainItem:o,store:n,teamStore:a,trustedDomainsStore:l}=e;const c=t.find((e=>{let{permissionItem:t}=e;return r().Lg(t)}));if("none"===(null==c?void 0:c.permissionItem.role)&&C({trustedDomainsStore:l})&&"none"!==o.permissionItem.role)return{permissionItem:{type:"space_permission",role:"reader",unlisted_timestamp:Date.now()},from:{...o.from}};if(c)return c;const d=t.find((e=>r().T6(e.permissionItem)));return{permissionItem:{type:"space_permission",role:"none"},from:null!=d&&d.from||!a||"none"!==a.getSpacePermissionRole()?(null==d?void 0:d.from)??{table:i().ev,blockId:n.id}:{table:s().yK,teamId:a.id}}}({mostPermissivePermissions:l,mostPermissiveTrustedDomainItem:_,store:o,teamStore:d,trustedDomainsStore:a}),S=x({mostPermissivePermissions:l,store:o,ancestorTeamId:null==d?void 0:d.id,type:"explicit_team_guest_permission"}),w=x({mostPermissivePermissions:l,store:o,ancestorTeamId:null==d?void 0:d.id,type:"explicit_team_permission"}),k=x({mostPermissivePermissions:l,store:o,ancestorTeamId:null==d?void 0:d.id,type:"explicit_team_owner_permission"});let A=l.filter((e=>{let{permissionItem:t}=e;return r().Ds(t)}));A=c().Ul(A,(e=>{const t=v().A.state.permissionGroupsAndMemberCounts.findIndex((t=>t.group.getGroupId()===e.permissionItem.group_id));return t>=0?t:e.permissionItem.group_id}));let T=l.filter((e=>{let{permissionItem:t}=e;return(r().gl(t)||r().nl(t))&&t.team_id!==(null==d?void 0:d.id)}));const M=new Map;T.forEach(((e,t)=>{let{permissionItem:o}=e;M.has(o.team_id)||M.set(o.team_id,t)})),T=c().Ul(T,[e=>{let{permissionItem:t}=e;return M.get(t.team_id)||0},e=>{let{permissionItem:t}=e;return"explicit_team_owner_permission"===t.type?0:1}]);const P=function(e){var t;let{store:o,currentUserId:n,mostPermissivePermissions:a}=e;const s=a.filter((e=>{let{permissionItem:t}=e;return r().B2(t)})),l=s.find((e=>{let{permissionItem:t}=e;return t.user_id===n}));if(!(0,b().FI)()||l||!n)return s;const d=(0,p().zt)({userId:n,store:o}),u=null===(t=a.find((e=>{let{permissionItem:t}=e;return c().n4(t,d)})))||void 0===t?void 0:t.from,m={from:u??{table:i().ev,blockId:o.id},permissionItem:{type:"user_permission",role:d.role,user_id:n}};return[...s,m]}({store:o,currentUserId:n.currentUser.id,mostPermissivePermissions:l}),B=Boolean(null==d?void 0:d.isDefined()),E="none"!==y.permissionItem.role,D=C({trustedDomainsStore:a})&&(E||"none"!==_.permissionItem.role),N=E||(0,b().FI)(),L=h().default.checkGate({gateName:"sharing_anyone_with_the_link"})||(0,m().g)(),F=R()&&"none"!==f.permissionItem.role&&Boolean(!L||(null===(t=g().A.state.publicPageData)||void 0===t?void 0:t.isInNewReceiverExperimentVariant)),U=(0,b().FI)()||N||B||F||P.length>1||P.length&&!r().Km(P[0].permissionItem.role)||A.length||r().Tt(y.permissionItem.role)||!I({store:o});return{showRestrictedPermissionBanner:l.some((e=>r().T6(e.permissionItem)&&e.from.table===i().ev&&e.from.blockId===o.id)),showTeamPermission:B,showSitePublicPermission:F,showPublicShareLinkPermission:L,showSpacePermission:N,showTrustedDomainPermission:D,mostPermissivePublicItem:f,mostPermissiveTrustedDomainItem:_,mostPermissiveAncestorTeamOwnerItem:k,mostPermissiveAncestorTeamMemberItem:w,mostPermissiveAncestorTeamGuestItem:S,mostPermissiveSpaceItem:y,pagePermissionUIModel:{showUserPermissions:U,mostPermissiveGroupPermissions:A,mostPermissiveTeamPermissions:T,mostPermissiveUserPermissions:P},permissionItemsCount:(U?P.length:0)+T.length+A.length+(N?1:0)+(B?1:0)}}function B(e){let{store:t,pagePermissionUIModel:o,currentUserId:n}=e;const{mostPermissiveGroupPermissions:r,mostPermissiveTeamPermissions:i,mostPermissiveUserPermissions:a}=o,[s,l]=c().jB(r,(e=>M({permissionItem:e,store:t}))),[d,u]=c().jB(a,(e=>M({permissionItem:e,store:t})&&e.permissionItem.user_id!==n));return{inheritedPermissions:{...o,mostPermissiveGroupPermissions:s,mostPermissiveTeamPermissions:[],mostPermissiveUserPermissions:d},pagePermissions:{...o,mostPermissiveGroupPermissions:l,mostPermissiveTeamPermissions:i,mostPermissiveUserPermissions:u}}}function R(){return!h().default.checkGate({gateName:"sites_deprecate_edit_and_comment"})}function E(e){const{inviteTarget:t,store:o,calculatedPermissions:n,isRedesignEnabled:i,userToGroupMap:a}=e,s=t.type,c=n.mostPermissiveSpaceItem,m=n.mostPermissiveAncestorTeamMemberItem,g=n.pagePermissionUIModel,f="group"===t.type?g.mostPermissiveGroupPermissions.find((e=>e.permissionItem.group_id===t.value.group_id)):void 0,v="existingUser"===t.type?new Set((null==a?void 0:a[t.value.id])??[]):void 0;if("newUser"===s)return{permissionItem:{role:"none",type:"user_permission",user_id:t.value.email},mostPermissivePermissions:[]};if("existingUser"===s){const e=(0,p().ex)({userId:t.value.id,store:o,userPermissionGroupIds:v??new Set});var h;if(!i)return{permissionItem:null===(h=e[0])||void 0===h?void 0:h.permissionItem,mostPermissivePermissions:e};const n=e.find((e=>"user_permission"===e.permissionItem.type));return n?{permissionItem:n.permissionItem,mostPermissivePermissions:e}:void 0}if("group"===s){const e={role:"none",type:"group_permission",group_id:t.value.group_id},n=(0,u().Uo)(o),a=null==n?void 0:n.getRawMembership().find((e=>(0,l().KF)({groupId:t.value.group_id,teamMember:e}))),s=[c,...n&&m&&a?[m]:[],f??{permissionItem:e,from:r().M3(o.pointer)}].sort(((e,t)=>r().TE[t.permissionItem.role]-r().TE[e.permissionItem.role]));var _;if(!i)return{permissionItem:null===(_=s[0])||void 0===_?void 0:_.permissionItem,mostPermissivePermissions:s};const d=s.find((e=>"group_permission"===e.permissionItem.type));return d?{permissionItem:d.permissionItem,mostPermissivePermissions:s}:void 0}(0,d().HB)(s)}},928530:(e,t,o)=>{o.d(t,{M:()=>q});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(908872),o(737550);var n=()=>o(329199),r=()=>o(386164),i=()=>o(388821),a=()=>o(994310),s=()=>o(496603),l=()=>o(763824),c=()=>o(449506),d=()=>o(666144),u=()=>o(633457),p=()=>o(476492),m=()=>o(609429),g=()=>o(347320),f=()=>o(406792),v=()=>o(227440),h=()=>o(508496),_=()=>o(83573),b=()=>o(589994);const y=["clientType","aggregationStatus","requestBackend","isLoadTest","backendOptions"],S=["sort","reducerDependencies","upwardTraversalRelation","searchQuery","filter","currentPageInRelatedCollection","reducers","userId","filterToComputeDependencies","maxPreloadedRecords"],w=["filter","searchQuery","loadContentCover"],k=["aggregation","subGroup","hideEmptyAggregationGroups","version"],I=["filter"],A=["property","enforceMaxAggregationLimit"];function x(e,t){for(const o of t)void 0===e[o]&&delete e[o]}var C=()=>o(75542),T=(o(16280),o(581454),()=>o(66689)),M=()=>o(502856),P=()=>o(792071),B=()=>o(813690),R=()=>o(179034),E=()=>o(519831),D=()=>o(869558),N=()=>o(534177),L=()=>o(862292),F=()=>o(186445),U=()=>o(909470),O=()=>o(972435),V=()=>o(870618);function j(e){const{environment:t,remoteRequest:o,collectionContextStore:r,response:i,updateCounterForRequest:a,keepAggregationResults:l}=e,c=r.collectionViewStore();if(!r.shouldUpdate(a))return;const d=r.remoteResultStore.state;if(!d||!s().n4(d,i.result)){var p;const e=i.result;if("reducer"===i.result.type){if(l){const t=Object.entries((null==d?void 0:d.reducerResults)||{}).filter((e=>{let[t,o]=e;return"aggregation"===o.type})).reduce(((e,t)=>{let[o,n]=t;return e[o]=n,e}),{});e.reducerResults={...t,...e.reducerResults}}r.remoteResultStore.setState(e)}if(void 0===r.wasServerResponseFromCache){var g,f;let e="NA";!0===(null===(g=i.tags)||void 0===g?void 0:g.isLoaded)?e="CACHED":!1===(null===(f=i.tags)||void 0===f?void 0:f.isLoaded)&&(e="UNCACHED"),r.wasServerResponseFromCache=e}var v,h;if(void 0===r.requestBackend)r.requestBackend=null===(v=i.tags)||void 0===v?void 0:v.backendUsed;if(void 0===r.relationQueryingGroup)r.relationQueryingGroup=null===(h=i.tags)||void 0===h?void 0:h.rqg;const t=null===(p=i.clientSettings)||void 0===p?void 0:p.throttleMs;if(t&&t>r.throttleMsStore.state&&r.throttleMsStore.setState(t),i.shouldUseClientMode)r.isClientModeEnabledStore.setState(!0),r.isViewSpecificClientModeEnabledStore.setState(Boolean(i.isViewSpecificClientMode)),r.resultSetStore.resetWithRemote(i.allBlockIds);else{r.isClientModeEnabledStore.setState(!1),r.isViewSpecificClientModeEnabledStore.setState(Boolean(i.isViewSpecificClientMode));const e=new Set(n().uX({result:i.result,onlyTypes:["results"]}));r.resultSetStore.resetWithRemote(e)}}r.setUpdateCounterWithResponseCounter(a);const b=r.remoteCollectionIdsStore.state,y=i.collectionIds||[];s().n4(b,y)||r.remoteCollectionIdsStore.setState(y),_().A.addFromRecordMapWithRoleJson(i.recordMap),_().A.isEmpty()||u().lK({environment:t}),r.privateRelativeVariableStore.setState({...r.privateRelativeVariableStore.state,...i.relativeVariableResult});if(r.remoteResultStore.state&&(r.resetLoadingState(),r.isLoadedStore.setState(!0),r.lastRemoteRequestStore.setState(o),c)){const e=(0,C().X)(c);m().e.set(e,{remoteResult:r.remoteResultStore.state,resultSet:r.resultSetStore.state,collectionIds:r.remoteCollectionIdsStore.state})}}function z(e){if(e.timedOutRequestCounter++,e.timedOutRequestCounter>=3){const t=h().default.getConfigKey("query_collection_slow_mode","clientThrottleMs");t>e.throttleMsStore.state&&e.throttleMsStore.setState(t)}}async function q(e,t,o){const u=t.collectionViewStore(),{remoteRequestStore:m}=t;if(!m||!u)return;const _=m.state;if(!_)return;if(h().default.checkGate({gateName:"drain_collection_queue"})){const e=t.collectionStore();e&&await b().transactionQueue.awaitRecordTransaction(e.pointer)}const C=t.createUpdateCounter().latestRequestUpdateCounter,q=t.remoteResultStore.state;v().A.state.online&&q&&await b().transactionQueue.drain();const H=u.inMemoryRecordCache;if(!t.shouldUpdate(C))return;t.isLoadingStore.setState(!0),t.remoteErrorStore.setState(void 0);const W=f().default.DO_NOT_USE_markLegacy("collections.remote_query_collection_latency");let K;if(!t.forceLocalQueryCollection&&v().A.state.online){const n=t.timingTracker.startRequestTracking(),i="initial_load"===o.src?function(e){const t=(0,s().mg)(e);x(t,y);const{loader:o}=t;if(x(o,S),o.reducers)for(const n of Object.values(o.reducers))switch(n.type){case"results":x(n,w);break;case"groups":x(n,k);break;case"aggregation":x(n,I),x(n.aggregation,A)}return t}(_):_,d=h().default.checkGate({gateName:"collections_xws"})?(0,r().WS)({spaceId:_.source.spaceId}):void 0,m="initial_load"===o.src&&"chart"!==u.getType()&&!Object.values(i.loader.reducers||{}).some((e=>"groups"===e.type)),v=null==u?void 0:u.id,b=(0,g().A)(v),T=[];if(m){let r=!1;const s={};Object.entries(i.loader.reducers||{}).forEach((e=>{let[t,o]=e;"aggregation"!==o.type?s[t]=o:r=!0}));const l={...i,loader:{...i.loader,reducers:s},aggregationStatus:r?"stripped":void 0};if(K=c().callApi({eventName:"queryCollection",environment:e,data:l,tracking:o,prefetchCacheKey:b,headers:d}).then((i=>{const s=p().kz(t,o.src);if(f().default.DO_NOT_USE_measureLegacy(W,{environment:e,data:s}),"success"===i.type)return"initial_load"===o.src&&a().A.set((0,g().A)(_.collectionView.id),l),t.timedOutRequestCounter=0,t.timingTracker.finishRequestTracking(n,"success"),j({environment:e,remoteRequest:_,collectionContextStore:t,response:i.data,updateCounterForRequest:C,keepAggregationResults:r});"failed"===i.type&&(t.remoteErrorStore.setState({requestSrc:o.src,errorBody:i.body}),t.timingTracker.finishRequestTracking(n,"failed"),i.status>=500&&i.status<600&&z(t))})),T.push(K),r){t.asyncAggregationStatusStore.setState({...t.asyncAggregationStatusStore.state,calculating:!0});const n=K.then((()=>{const n=t.timingTracker.startRequestTracking();return c().callApi({eventName:"queryCollection",environment:e,data:{..._,aggregationStatus:"full"},tracking:o,prefetchCacheKey:b,headers:d}).then((r=>{if("success"===r.type)return t.timedOutRequestCounter=0,t.timingTracker.finishRequestTracking(n,"success"),j({environment:e,remoteRequest:_,collectionContextStore:t,response:r.data,updateCounterForRequest:C});"failed"===r.type&&(t.remoteErrorStore.setState({requestSrc:o.src,errorBody:r.body}),t.timingTracker.finishRequestTracking(n,"failed"),r.status>=500&&r.status<600&&z(t))})).finally((()=>{t.asyncAggregationStatusStore.setState({calculating:!1})}))}));T.push(n)}}else K=c().callApi({eventName:"queryCollection",environment:e,data:i,tracking:o,prefetchCacheKey:b,headers:d}).then((r=>{const i=p().kz(t,o.src),s="success"===r.type||"failed"===r.type&&!r.offline?r.headers["X-Notion-Request-Id"]:void 0;if(f().default.DO_NOT_USE_measureLegacy(W,{environment:e,data:{...i,request_ids:s?[s]:void 0}}),"success"===r.type)return"initial_load"===o.src&&a().A.set((0,g().A)(_.collectionView.id),_),t.asyncAggregationStatusStore.setState({calculating:!1}),t.timedOutRequestCounter=0,t.timingTracker.finishRequestTracking(n,"success"),j({environment:e,remoteRequest:_,collectionContextStore:t,response:r.data,updateCounterForRequest:C});"failed"===r.type&&(t.remoteErrorStore.setState({requestSrc:o.src,errorBody:r.body}),t.timingTracker.finishRequestTracking(n,"failed"),r.status>=500&&r.status<600&&z(t))})),T.push(K);if(!(await(0,l().nQ)(1e4,T)).timeout)return}else try{const o=await async function(e,t,o){const{source:r,collectionView:a,loader:c}=t,d=e.currentUser.id;let u;if("collection"!==r.type)throw new Error("TODO: support typed source");u={table:E().Vl,id:r.id};const p=Date.now(),m=await V().h7({environment:e,pointer:u,inMemoryRecordCache:o});if(null==m||!m.model)throw new Error("Collection not found.");const g=m.model,f=await V().h7({environment:e,pointer:{table:D().Gy,id:a.id},inMemoryRecordCache:o});if(null==f||!f.model)throw new Error("Collection view not found.");const v=P().h0Y.fromMonomorphicFunctionUnsafe((async t=>{const o=await V().h7({environment:e,pointer:t});return null==o?void 0:o.model})),_=f.model,b=i().RecordMap.create(),y=i().RecordMapWithRole.create(),S=P().b4_.fromRecordMap(b),w=B().Oj.fromRecordMapWithRole(y),k=g.getNormalizedSchema(),{groupsReducerIds:I,reducerIdsWithNoGroupDependencies:A}=n().M(c.reducers,c.reducerDependencies),x=h().default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs"),C=await L().T.formulas.load(),j={schema:k,pageSort:(null==_?void 0:_.getPageSort())||[],collectionViewId:a.id,loader:c,userId:d,userStartOfWeek:F().XX.state,currentTime:p,getRecordModel:S,getRecordRole:w,intl:O().A.getIntl(),isSorted:!1,relativeVariableResult:void 0,currentPageInRelatedCollection:c.currentPageInRelatedCollection,isSprintPlanningView:(null==_?void 0:_.getAppConfigUri())===T().JS,collectionSourceType:r.type,groupsReducerIds:I,reducerIdsWithNoGroupDependencies:A,formulaTimeoutMs:x,resultCache:new Map,regExpCache:new Map,experimentService:h().default,collectionFeatureGates:(0,U().i)(),formulasModule:C},z=g.__IM_SORRY__getValue(),q={},H=(await V().TH({environment:e,collection:g,inMemoryRecordCache:o})).filter((e=>{let{model:t}=e;return null==t?void 0:t.alive})),W=s().oE(H.map((e=>{let{model:t}=e;return null==t?void 0:t.__IM_SORRY__getValue()})));W.forEach((e=>q[e.id]=g));const K=_.getFormat(),G=_.getType(),$=K&&G&&n().Fg(K,G,k),Y=new Map,Q=await(0,M().SN)({collectionValueOrModel:z,loader:c,loadAllProperties:!1,recordMap:b,loadRecordModel:v,dependencyCache:Y,searchProperties:$});await(0,M().D0)({blocks:W,dependencies:Q,blockIdToAssociatedCollectionModelCache:q,recordMap:b,loadRecordModel:v,loadRecordModelForFormulas:v,dependencyCache:Y,resultCache:j.resultCache,regExpCache:j.regExpCache,experimentService:h().default,collectionFeatureGates:(0,U().i)(),userId:c.userId});const Z=b.getByTable(R().ev).filter((e=>{let{value:t}=e;return!Boolean(t)})).map((e=>{let{pointer:t}=e;return t})).filter(N().O9);await l().lX(Z,50,(async t=>{const o=await V().h7({environment:e,pointer:t});o&&y.setModelAndRole({table:R().ev,id:t.id},o.model,o.role)}));const X=n().zl(j);(c.reducers?Object.values(c.reducers):[]).some((e=>Boolean("results"===e.type&&e.loadContentCover)))&&await n().pu({blocks:W,loadRecordModel:v,recordMap:b});for(const i of W)n().UC(i,z,j,X);const{result:J}=n().Mo(j,X),ee=n().uX({result:J});return await Promise.all(ee.map((async t=>{const n=await V().h7({environment:e,pointer:{table:R().ev,id:t},inMemoryRecordCache:o});n&&y.setModelAndRole({table:R().ev,id:t},n.model,n.role)}))),y.setModelAndRole(u,m.model,m.role),y.setModelAndRole({table:D().Gy,id:a.id},f.model,f.role),{result:J,recordMap:y.toJson(),relativeVariableResult:void 0,collectionIds:void 0,shouldUseClientMode:!1,isViewSpecificClientMode:!1,allBlockIds:void 0}}(e,_,H),r=i().RecordMapWithRole.create(o.recordMap);d()._O({environment:e,inMemoryRecordCache:H,recordMap:r,debugSource:"collectionViewActions.fetchRemoteResult (localResponse)"}),j({environment:e,collectionContextStore:t,remoteRequest:void 0,response:o,updateCounterForRequest:C})}catch(G){}finally{t.resetLoadingState()}K&&K.catch((e=>{}))}},929450:(e,t,o)=>{o.d(t,{Of:()=>s,YB:()=>l,s:()=>c});o(898992),o(908872);var n=()=>o(763884),r=()=>o(899963),i=()=>o(633892),a=()=>o(846955);function s(e){const{environment:t,spaceViewStore:o,teamStore:i,outlinerToggleButtonStore:s,newIsHidden:c,shouldPersistToggleState:d,isExplicitUserAction:u}=e;s.setState({...s.state,isHidden:c}),u&&r().r7(t,{store:i,is_toggled:!c,outliner_type:e.teamOutlinerType}),d&&n().A.set({userId:o.environment.currentUser.id,key:l(o,i.id),value:c}),c&&a().default.setState({type:"inactive"})}function l(e,t){return`Team_Outliner_Item_${e.id}:${t}`}function c(e){let{oldState:t,teamIds:o,spaceId:r,userId:a}=e;return o.reduce(((e,o)=>{if(o in e)return e;if(o in t)return e[o]=t[o],e;const s=l({id:r},o),c=n().A.get({userId:a,key:s});return e[o]=new(i().A),e[o].setState({isHidden:c??!1}),e}),{})}},930545:(e,t,o)=>{o.d(t,{_h:()=>m,bn:()=>g,tm:()=>p,zp:()=>u});o(898992),o(823215),o(737550);var n=()=>o(700500),r=()=>o(602098),i=()=>o(186445),a=()=>o(478726),s=()=>o(792609),l=()=>o(202786),c=()=>o(337567),d=()=>o(620149);function u(e){let{blocks:t}=e;return!!p({blocks:t})&&(!function(e){let{blocks:t}=e;return t.some((e=>{const t=i().ao();return!(!t||!(0,a().fc)(t))||!!(t&&((0,c().dL)(t)||null!=t&&t.pathIsDead())&&t.uiContains(e)&&t!==e)}))}({blocks:t})&&(!!(0,s().Y)({blocks:t})&&(!!m({blocks:t})&&(!!g({blocks:t})&&(!!function(e){let{blocks:t}=e;if(t.some((e=>e.getAssociatedCollectionStore())))return!0;return t.length>1||!function(e){if(!e)return!1;const t=e.getType(),o=e.getFormat();return Boolean((0,n().Db)(t,o)&&e.isEmptyTitle())}(t[0])}({blocks:t})&&(!(1!==t.length&&!(0,l().T)())&&!t.some(r().u)))))))}function p(e){let{blocks:t}=e;return!d().l.state&&t.every((e=>e.canComment()))}function m(e){let{blocks:t}=e;return!!t.some((e=>e.getAssociatedCollectionStore()))||t.every((e=>!e.isNavigableBlock()))}function g(e){let{blocks:t}=e;return t.every((e=>{const t=e.getType(),o=e.getFormat();return Boolean(!t||!(0,n().pD)(t,o))}))}},931121:(e,t,o)=>{o.d(t,{J:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("clearInput",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.993 15.528a7.273 7.273 0 01-2.923-.593A7.633 7.633 0 012.653 13.3a7.797 7.797 0 01-1.633-2.417 7.273 7.273 0 01-.593-2.922c0-1.035.198-2.01.593-2.922A7.758 7.758 0 015.063.99 7.273 7.273 0 017.985.395a7.29 7.29 0 012.93.593 7.733 7.733 0 012.417 1.64 7.647 7.647 0 011.64 2.41c.396.914.594 1.888.594 2.923 0 1.035-.198 2.01-.593 2.922a7.735 7.735 0 01-4.058 4.05 7.272 7.272 0 01-2.922.594zM5.59 11.06c.2 0 .371-.066.513-.198L8 8.951l1.904 1.911a.675.675 0 00.498.198.667.667 0 00.491-.198.67.67 0 00.205-.49.64.64 0 00-.205-.491L8.981 7.969l1.92-1.911a.686.686 0 00.204-.491.646.646 0 00-.205-.484.646.646 0 00-.483-.205.67.67 0 00-.49.205L8 6.995 6.081 5.083a.696.696 0 00-.49-.19.682.682 0 00-.491.198.651.651 0 00-.198.49c0 .181.068.342.205.484l1.912 1.904-1.912 1.92a.646.646 0 00-.205.483c0 .19.066.354.198.49.136.132.3.198.49.198z"})})},931432:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},933152:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M5.606 2.669a1.55 1.55 0 0 0-1.55 1.55v.379l-.069-.004h-.693a.55.55 0 0 0 0 1.1h.693l.069-.004v.379c0 .856.694 1.55 1.55 1.55h8.787a1.55 1.55 0 0 0 1.55-1.55v-.375h.3c.208 0 .376.168.376.375v2.023a.375.375 0 0 1-.375.375h-5.32c-.814 0-1.474.66-1.474 1.475v.592a1.55 1.55 0 0 0-1.463 1.547v3.7c0 .856.694 1.55 1.55 1.55h.925a1.55 1.55 0 0 0 1.55-1.55v-3.7a1.55 1.55 0 0 0-1.462-1.547v-.592c0-.207.168-.375.375-.375h5.319c.814 0 1.475-.66 1.475-1.475V6.069c0-.815-.66-1.475-1.475-1.475h-.3v-.375a1.55 1.55 0 0 0-1.55-1.55zm-.3 1.55a.3.3 0 0 1 .3-.3h8.787a.3.3 0 0 1 .3.3v1.85a.3.3 0 0 1-.3.3H5.606a.3.3 0 0 1-.3-.3zm3.931 7.862a.3.3 0 0 1 .3-.3h.925a.3.3 0 0 1 .3.3v3.7a.3.3 0 0 1-.3.3h-.925a.3.3 0 0 1-.3-.3z"})},r=(0,o(340498).wt)("blockColor",n)},934839:(e,t,o)=>{o.d(t,{HQ:()=>i,Re:()=>s,zA:()=>a});o(898992),o(354520),o(672577);var n=()=>o(534177),r=()=>o(732770);function i(e){const{id:t,styleKey:o,contentKey:i,removeTimeout:s,bannerStore:l,blockStore:c,context:d,disabled:u}=e,{banners:p}=l.state;if(!p.find((e=>e.id===t))){let m;switch(i){case"template_in_page":case"template_in_button":m={id:t,contentKey:i,styleKey:o,blockStore:c,context:d,disabled:u};break;case"space_content_duplication":case"deleted_or_moved_page":case"importing_evernote":case"asana_importer_banner":case"site":case"draft_post_in_expanded_feed_composer":case"translate":m={id:t,contentKey:i,styleKey:o,blockStore:c};break;case"over_free_block_limit":case"editing_page":case"subscription_trial_add_payment_method":case"upload_limit_exceeded":case"admin_mode":case"arbitrary_subscription_banner":case"billing_subscription_status":case"minor_app_update":case"mobile_platform_unsupported":case"page_in_archived_team":case"test_clock":case"dictation_connection":case"trusted_domain_page":case"russian_sanctions":case"space_freeze":case"logged_out_app_banner":case"public_share_link_edit_disclosure_banner":case"missing_name":m={id:t,contentKey:i,styleKey:o};break;default:(0,n().HB)(i)}const g=e.prepend?[m,...p]:[...p,m];l.setState({banners:g}),r().A.setKeyboardMode(!1),s&&setTimeout((()=>{a({bannerStore:l,id:t})}),s)}}function a(e){const{id:t,bannerStore:o}=e,{banners:n}=o.state,r=n.filter((e=>e.id!==t));r.length!==n.length&&o.setState({banners:r})}function s(e){e.bannerStore.state.banners.length>0&&e.bannerStore.setState({banners:[]})}},935370:(e,t,o)=>{o.d(t,{onboardingActionsDependency:()=>n});const n=new(o(645873).O2)("onboardingActions",(()=>Promise.all([o.e(96346),o.e(36192),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(67435),o.e(70769),o.e(62342),o.e(57869),o.e(81929)]).then(o.bind(o,585894))))},936916:(e,t,o)=>{o.d(t,{FF:()=>p,SJ:()=>u,gM:()=>m,yc:()=>g});o(296540);var n=()=>o(792485),r=()=>o(56366),i=()=>o(401497),a=()=>o(921855),s=()=>o(68465),l=()=>o(864145),c=()=>o(145214),d=o(474848);function u(e){const{store:t}=e,o=(0,r().K8)((()=>{const e=t.getBlockTitleStore().getValue();if(e)return(0,a().r4)(e,t)}),[t]);return(0,r().K8)((()=>{const e=(0,s().I_)(),n=e.summarize,r=t.getFormat().ai_prompt_key;if(!r)return{prompt:n,additionalContext:o};const i=e[r];return i?{prompt:i,additionalContext:o}:{prompt:n,additionalContext:o}}),[o,t])}function p(e){const{store:t,isGenerating:o}=e,{prompt:i,additionalContext:a}=u({store:t}),l=(0,n().S)();return(0,r().K8)((()=>{const e=l&&l.publicEditModeStore.state;return!(0,s().ZE)(e)||(!!o||(!(t.canEdit()&&!t.isNonEditableState())||"helpMeWrite"===i.key&&!a))}),[o,t,i.key,a,l])}function m(e){const{hoveredOrSelectionState:t,setHaloShouldBeVisible:o,colorVariant:n="purple",configurationPopupStore:a}=e,s=(0,i().IS)((e=>({haloContent:{position:"absolute",left:-6,right:-6,top:-3,bottom:-3,pointerEvents:"none",borderRadius:8,border:`2px solid ${"purple"===n?e.aiBlockBorderColor:e.stroke.uiBlueSecondary}`}})),[n]),u=(0,r().K8)((()=>(null==a?void 0:a.state.open)??!1),[a]),p=t!==l().l.Default||u;return(0,d.jsx)(c().A,{visible:p,initial:{opacity:0,scale:.995},animate:{opacity:t===l().l.Hovered?.45:1,scale:1},exit:{opacity:0,scale:.995},onAnimationStart:()=>{o(!0)},onAnimationEnd:()=>{p||o(!1)},style:s.haloContent})}const g=(0,o(959013).YK)({summarize:{id:"aiBlock.summarize",defaultMessage:"Summarize this page with AI"},findActionItems:{id:"aiBlock.findActionItems",defaultMessage:"Find action items on this page with AI"},helpMeWrite:{id:"aiBlock.helpMeWrite",defaultMessage:"Tell the AI what to write…"},summarizeMeetingTranscript:{id:"aiBlock.summarizeMeetingTranscript",defaultMessage:"Summarize this meeting with any action items and decisions taken"}})},937075:(e,t,o)=>{o.d(t,{Af:()=>S,DZ:()=>d,G1:()=>_,I5:()=>s,Ky:()=>w,Nj:()=>p,Uk:()=>h,Ut:()=>f,aN:()=>g,c7:()=>c,ed:()=>k,g0:()=>m,lz:()=>l,nE:()=>b,oe:()=>u,wJ:()=>v,xs:()=>y});var n=()=>o(140022),r=()=>o(989423),i=()=>o(430483),a=()=>o(508496);function s(e,t){const{user_comment:o,...n}=t;r().vd(e,"ai_action",n)}function l(e,t,o){const n={site:"client",...o};r().vd(e,t,n)}function c(e,t){r().vd(e,"ai_favorite_action",t)}function d(e,t){r().vd(e,"ai_block_action",t)}function u(e,t){r().vd(e,"ai_autofill_action",t),a().default.logEvent("ai_autofill_action",1,{action_type:t.type})}function p(e,t){r().vd(e,"ai_autofill_settings_action",t)}function m(e,t){if(i().zD.isXMLAssistantEnabled()){var o;const r=(null===(o=t.sessionContext)||void 0===o?void 0:o.evaluator.getTranscript())??[];(0,n().trackAssistantOpened)(e,{from:t.from,sessionId:t.session_id,isReminder:!1,reminderType:void 0,startTimestamp:Date.now(),transcript:r,hasQuery:!1,searchSessionId:void 0})}else r().vd(e,"ai_completion_popup_open",{session_id:t.session_id,prompt_key:t.prompt_key,from:t.from})}function g(e,t){r().vd(e,"ai_completion_popup_close",t),a().default.logEvent("ai_completion_popup_close",1,{exit_type:t.exit_type})}function f(e,t){r().vd(e,"ai_completion_popup_retry",t)}function v(e,t){r().vd(e,"ai_completion_popup_history_navigation",t)}function h(e,t){r().vd(e,"ai_completion_popup_preview_start",t),a().default.logEvent("ai_completion_popup_preview_start",1,{from:t.from,prompt_key:t.prompt_key})}function _(e,t){r().vd(e,"ai_completion_popup_update_prompt_text",t)}function b(e,t){r().vd(e,"ai_completion_popup_preview_end",t),a().default.logEvent("ai_completion_popup_preview_end",1,{preview_time:t.preview_time})}function y(e,t){r().vd(e,"ai_completion_popup_preview_stopped_by_user",t)}function S(e,t){r().vd(e,"ai_user_data_sharing_opt_in_submit",t)}function w(e,t){r().vd(e,"getCompletion.emptyResponse",t),a().default.logEvent("getCompletion.emptyResponse",1,{promptKey:t.promptKey})}function k(e,t){r().vd(e,"ai_assistant_error",t)}},937182:(e,t,o)=>{o.d(t,{B7:()=>l,Dn:()=>i,Rt:()=>a,cM:()=>r,hy:()=>s});var n=()=>o(534177);const r="fileTypeAnyFiles",i="fileTypeImages",a="fileTypeVideos",s="fileTypeNone";function l(e){let{fileMimeType:t,allowedType:o}=e;switch(o){case r:return!0;case i:return function(e){return e.startsWith("image")&&!e.includes("photoshop")}(t);case a:return function(e){return e.startsWith("video")}(t);case s:return!1;default:(0,n().HB)(o)}}},938045:(e,t,o)=>{o.d(t,{w:()=>f,x:()=>v});o(898992),o(354520);var n=()=>o(908006),r=()=>o(620689),i=()=>o(255460),a=()=>o(38337),s=()=>o(953418),l=()=>o(480289),c=()=>o(695625),d=()=>o(644914),u=()=>o(835066),p=()=>o(555776),m=()=>o(116008),g=()=>o(36088);function f(e){let{animate:t}=e;const o=l().A.filter((()=>!0));if(o&&o.length>0){const e=o[0].getNode();if(e&&e.parentElement){const o=Array.from(e.parentElement.children).indexOf(e);s().vq(e,{edgeDist:0===o?0:-1,animate:t??!1})}}}async function v(e){let{currentBlockStore:t,discussionInputStore:o,environment:s,dontAffectCursor:l,animateScroll:f}=e;if(!o||!t)return;function v(e){const t=function(e){var t;let o,{blockId:n}=e;const r=null===(t=document.getElementsByClassName(a().Mdy))||void 0===t?void 0:t[0];r&&(o=c().T.findSelectableFromChildNode(r)),o||(o=c().T.findScrollToSelectablesFromIds([n])[0]);return o}({blockId:e});if(!t)return;const o=document.getElementsByClassName(a().Mdy)[0];return o?r().hT({element:o,environment:s,scrollerContext:t.getScrollerContext(),vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:f??!1,centerVertically:!0}):r().pb({environment:s,handle:t,vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:f??!1}),t.displaySelectionHalo(750),t}const h=m().A.state.open?m().A.state.blockId:null;if(!h)return;v(h)||(await i().NH(t,[h]),await n().default.afterNextFlush(),v(h));const _=m().A.getBlockStore();_&&(0,u().$N)(s,_)?p().A.setActiveWithSource("margin_comments"):(0,d().me)(s)?p().A.setActiveWithSource("comments_pane"):p().A.setActiveWithSource("popover_comments"),l||(0,g().M)({discussionInputStore:o,environment:s})}},938346:(e,t,o)=>{o.d(t,{Ay:()=>f,og:()=>p});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(425946),l=()=>o(100622),c=()=>o(478184),d=()=>o(816559),u=o(474848);let p=function(e){return e[e.Insert=0]="Insert",e[e.TurnInto=1]="TurnInto",e}({});function m(e){const{thumbnail:t,iconSize:o}=e,n=(0,a().IS)((e=>({simplifiedThumbnail:{display:"block",width:o,height:o,flexGrow:0,flexShrink:0,background:l().Ay.white}})),[o]),r=(0,c().L)(t)||s().M;return(0,u.jsx)(d().Ay,{src:r,style:n.simplifiedThumbnail})}function g(e,t){const s=(0,r().Y0)(),l=(0,r().v3)(),d="dark"===(0,a().DP)().mode,{description:g,format:f,selected:v,title:h,sectionTitle:_,showSectionTitle:b,thumbnail:y,tooltipPhoto:S,thumbnailPadding:w,isDisabled:k,disabledTooltipMessage:I,shortcut:A,icon:x,desktopTitleStyle:C,blockType:T}=e,M=f===p.Insert,P=(0,i().K8)((()=>!!k&&k({environment:l,blocks:o(502438).default.state.stores,publicEditMode:void 0})),[l,k]),B=(0,a().IS)((e=>({selected:{height:14,width:14,color:e.regularTextColor},titleDiv:{display:"flex",alignItems:"center"},shortcut:{color:e.lightTextColor,fontSize:12,whiteSpace:"nowrap",paddingRight:2},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"},icon:{width:20,height:20,fill:e.mediumIconColor},title:{marginRight:6},sectionTitle:{color:e.lightTextColor,marginRight:6,...o(284371).RC}})),[20,6]),R=(0,n.useCallback)((()=>(0,u.jsx)(m,{isInsertFormat:M,iconSize:20,thumbnailPadding:w,thumbnail:y})),[y,w,M,20]),{badge:E,...D}=e,N=M&&!!A,L=!!x,F=v&&!M,U=(0,i().K8)((()=>"ai_block"===T?o(508496).default.checkGate({gateName:"ai_template_filling_use_new_ai_blocks"})?"new":"ai":E),[T,E]),O=(0,n.useCallback)((e=>(0,u.jsx)(o(760217).A,{...(0,o(553965).A)(e||{},D),desktopTitleStyle:C,ref:t,right:F?(0,u.jsx)("div",{style:B.selected,children:(0,o(413267).b)()}):N?(0,u.jsx)("span",{style:B.shortcut,children:A}):void 0,title:(0,u.jsxs)("div",{style:B.titleDiv,children:[b?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{style:B.title,children:h}),(0,u.jsx)("span",{style:B.sectionTitle,children:"·"}),(0,u.jsx)("span",{style:B.sectionTitle,children:_})]}):(0,u.jsx)("span",{style:B.title,children:h}),!F&&"new"===U&&(0,u.jsx)(o(515918).A,{style:{marginLeft:0}}),!F&&"beta"===U&&(0,u.jsx)(o(13898).A,{}),!F&&"alpha"===U&&(0,u.jsx)(o(301948).A,{})]}),icon:L?(0,u.jsx)("div",{style:B.iconContainer,children:x(d)(B.icon)}):R(),disabled:P,disabledFeedback:P})),[D,t,F,B.titleDiv,B.iconContainer,B.icon,h,B.title,U,R,P,L,x,B.selected,B.shortcut,A,N,b,_,B.sectionTitle,d,C]),V=(0,n.useCallback)((()=>{if(P)return(0,u.jsx)("div",{children:I});const e=S?(0,c().L)(S):void 0;return(0,u.jsx)(o(103448).A,{imageURL:e,imageWidth:140,imageHeight:100,caption:g})}),[P,S,g,I]);return s.isMobile?O():(0,u.jsx)(o(859428).A,{renderTooltip:V,placement:o(962730).W.Right,delayThreshold:0,render:e=>O(e)})}const f=n.forwardRef(g)},940371:(e,t,o)=>{o.d(t,{S:()=>n});o(18107),o(967357);function n(e){return e.state.stack.at(-1)}},941463:(e,t,o)=>{o.d(t,{Ay:()=>g,WR:()=>a,y8:()=>s});var n=()=>o(994310),r=()=>o(496603),i=()=>o(441199);const a=320,s=470,l="secondary_sidebar",c={openState:"closed",contentType:"none",mode:"peek",modeByContentType:{none:"peek",inbox:"peek",activity:"peek",private_pages:"peek",shared_pages:"peek",assistant:"peek",teams:"peek"},widths:{none:320,inbox:390,activity:320,private_pages:320,shared_pages:320,assistant:320,teams:320}};function d(e){n().A.set(l,e)}function u(){const e=n().A.get(l),t=void 0===r().Jt(e,["widths","inbox"]),i=r().h1(r().mg(c),e);if(t){const e=n().A.get(o(424039).CV),t=r().Jt(e,["width"]);if(void 0!==t){i.widths.inbox=t;try{d(i)}catch{}}}return i}class p extends(()=>o(757695))().default{getInitialState(){return u()}getWidth(){const e=i().default.state.contentType,t=this.state.widths[e];return t<=a?a:t>=s?s:t}setWidth(e){const t=i().default.state.contentType;this.setState({...this.state,widths:{...this.state.widths,[t]:e}})}}const m=new p;m.addListener((e=>{try{d(e.state)}catch{}}));const g=m},941541:(e,t,o)=>{o.d(t,{AY:()=>l,Ay:()=>s});o(898992),o(354520),o(803949);var n=()=>o(365233),r=()=>o(444943);class i{constructor(){this.uniqueIdCounter=0}addListener(e,t,o,i,a){if((0,n().A)(e))return i||(i=this.computeNewSubscriptionId()),r().B1(e,t,o,i,a),{key:e,subscriptionId:i}}removeListener(e,t){let{key:o,subscriptionId:i}=e;(0,n().A)(o)&&r().al(o,i,t)}async updateField(e,t,o,n,i,a){await r().cP({key:e,field:t,updates:o,ttl:n,environment:i,onDisconnectFields:a})}async setField(e,t,o,n,i){await r().x({key:e,field:t,value:o,ttl:n,environment:i})}async onDisconnect(e,t,o,n){const i=`${o}/${e}`;await r().zg(i,t,n)}async clearOnDisconnect(e,t,o){const n=`${t}/${e}`;await r().uQ(n,o)}computeNewSubscriptionId(){return this.uniqueIdCounter+=1,`subscription:${this.uniqueIdCounter}`}}class a{constructor(){this.isQueuingListeners=!0,this.queuedListeners=[],this.defaultMessageDispatcher=new i}addListener(e,t,o,n,r){return this.isQueuingListeners?(n||(n=this.defaultMessageDispatcher.computeNewSubscriptionId()),this.queuedListeners=[...this.queuedListeners.filter((t=>t.key!==e||t.subscriptionId!==n)),{key:e,authorizationToken:t,listener:o,subscriptionId:n}],{key:e,subscriptionId:n}):this.defaultMessageDispatcher.addListener(e,t,o,n,r)}removeListener(e,t){let{key:o,subscriptionId:n}=e;this.isQueuingListeners?this.queuedListeners=this.queuedListeners.filter((e=>e.key!==o&&e.subscriptionId!==n)):this.defaultMessageDispatcher.removeListener({key:o,subscriptionId:n},t)}updateField(e,t,o,n,r){return Promise.resolve()}setField(e,t,o,n,r){return Promise.resolve()}onDisconnect(e,t,o,n){return Promise.resolve()}clearOnDisconnect(e,t,o){return Promise.resolve()}stopQueueingSubscriptions(e){this.isQueuingListeners&&(this.queuedListeners.forEach((t=>{this.defaultMessageDispatcher.addListener(t.key,t.authorizationToken,t.listener,t.subscriptionId,e)})),this.queuedListeners=[],this.isQueuingListeners=!1)}}const s=window.location.pathname===o(427704).GJ.quickSearch?new a:new i;function l(e){let t=!1;return function(){if(t)return e(...arguments);t=!0}}},943846:(e,t,o)=>{o.d(t,{Ld:()=>k,Pq:()=>f,rS:()=>A,mI:()=>w,Vh:()=>S,DB:()=>g,Or:()=>h,Yl:()=>_,NA:()=>I,hg:()=>x,xy:()=>y});o(16280),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(737550),o(814603),o(147566),o(198721);var n=()=>o(700500),r=()=>o(713998),i=()=>o(857639),a=(o(944114),o(803949),()=>o(939768));var s=()=>o(763824),l=()=>o(780054),c=()=>o(508496),d=()=>o(974233);const u=3,p=1e4;async function m(e){const{environment:t,sourceURL:o}=e;let n;n=`https://embed.notion.co/api/iframely?key=${l().A.iframely_prod.key}&url=${o}`;const r={environment:t,method:"GET",url:n,format:"json"},{result:c}=await s().xz(u,p,(()=>(0,d().default)(r)));if(c&&"success"===c.type)return function(e,t){const o=e;return Object.keys(e).forEach((n=>{if("meta"===n&&(e[n].title&&(o.title=e[n].title),e[n].description&&(o.description=e[n].description),e[n].site&&(o.provider_name=e[n].site),e[n].author&&(o.author_name=e[n].author)),"html"===n){const r=/<iframe[^>]+src="([^"]+)/,i=e[n].match(r);if(i){const e=i[1];o.iframe=e}const a=/height:\s*([^px;]+)/,s=e[n].match(a),l=s?parseInt(s[1].trim()):null,c=/padding-bottom:\s*([^%;]+)/,d=e[n].match(c),u=d?parseInt(d[1].trim()):null,p=/padding-top:\s*([^px;]+)/,m=e[n].match(p),g=m?parseInt(m[1].trim()):null;l&&t&&(o.height=l),u&&t&&(o.padding=u),g&&t&&(o.padding_top=g)}if("url"===n&&(o.url=e[n]),"links"===n){if(e[n].thumbnail&&e[n].thumbnail.length>0){o.images=[];const t={width:Number,height:Number,url:String};t.width=e[n].thumbnail[0].media&&e[n].thumbnail[0].media.width?e[n].thumbnail[0].media.width:480,t.height=e[n].thumbnail[0].media&&e[n].thumbnail[0].media.height?e[n].thumbnail[0].media.height:1080,t.url=e[n].thumbnail[0]&&e[n].thumbnail[0].href?e[n].thumbnail[0].href:"",o.images.push(t)}e[n].icon&&e[n].icon.length>0&&(o.favicon_url=e[n].icon[0].href)}})),t||(o.title||(o.title=a().qg(o.url).hostname),delete o.author_name,delete o.provider_name,delete o.iframe),o}(c.data);i().log({level:"error",from:"embedHelpers",type:"getExtractedData",error:null==c?void 0:c.error,data:{miscDataToConvertToString:{provider:"iframely"}}})}async function g(e,t){const o=encodeURIComponent(t.trim());return"on"===c().default.getEligibleGroup({experimentId:"iframely_switch",defaultGroup:"control"})?await m({environment:e,sourceURL:o}):await async function(e,t){const o={environment:e,method:"GET",url:`https://api.embed.ly/1/extract?key=${l().A.embedly.key}&url=${t}`,format:"json"},{result:n}=await s().xz(u,p,(()=>(0,d().default)(o)));if(n&&"success"===n.type)return n.data;i().log({level:"error",from:"embedHelpers",type:"getExtractedData",error:null==n?void 0:n.error,data:{miscDataToConvertToString:{provider:"embedly"}}})}(e,o)}function f(e){let{source:t,unauthorizedIframeUrls:o}=e;return!!t&&o.some((e=>a().mJ(t,e)&&a().t7(t,e)))}const v=/(\/d\/|id=)([-\w]{25,})/;function h(e){const t=e.match(v);if(t&&!(t.length<3))return t[2]}function _(e){return r().MO(e.store.getProperties().source)||e.source}const b=new Set(["http:","https:","blob:","data:"]);function y(e){const t=new URL(e,l().A.domainBaseUrl).protocol;return b.has(t)}function S(e){if(e&&e instanceof k)return{type:"invalid_protocol",protocol:e.protocol}}function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.protocol;const o=I(e);if(!o)return{type:"invalid_url",source:e};const n=new URL(o).protocol;return"https:"===t&&"http:"===n?{type:"invalid_protocol",protocol:n}:void 0}class k extends Error{constructor(e){const t=new URL(e,l().A.domainBaseUrl).protocol;super(`Invalid URL protocol: "${t}"`),this.name=void 0,this.protocol=void 0,this.protocol=t,this.name="InvalidUrlProtocolError"}}function I(e){let t=a().q7(e);if(t||e.includes(":")||(t=a().q7(`https:${e}`)),t&&new URL(t).origin!==window.location.origin)return t}function A(e){const{aspectRatio:t,isFullWidth:o,isFullHeight:n,preserveScale:r,height:i,paddingTop:a}=e,s={position:"relative",display:"flex",justifyContent:"center",width:"100%",minHeight:100};return n?(s.height="100%",s.position=void 0):o||!r?s.height=i:(s.height=0,s.paddingBottom=100*(t||.75)+"%",s.paddingTop=a),s}function x(e){const t=e.getType();return!!t&&(0,n().ie)(t)}},945382:(e,t,o)=>{o.d(t,{fK:()=>i});var n=()=>o(416845),r=()=>o(979340);function i(e){const t=function(e){const{space:t,spaceUser:o}=e;if(void 0===t||null==o||!o.isWorkspaceOwner())return new(n().rT)("You do not have permissions to this feature in the requested space.",{type:"generic_insufficient_permissions"});return a(t)}(e);return void 0===t}function a(e){if(!(0,r().OX)(e.getSubscriptionTier()))return new(n().rT)("The feature is not available on your current plan type.",{type:"generic_insufficient_plan_type"})}},945529:(e,t,o)=>{o.d(t,{v:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("lockedDocument",{viewBox:"0 0 27 33",svg:(0,n.jsx)("path",{d:"M9.281 26.605c0 .878.406 1.318 1.216 1.318h6.02c.811 0 1.216-.44 1.216-1.318V21.99c0-.79-.327-1.216-.981-1.274v-1.348c0-1.084-.298-1.958-.894-2.622-.595-.664-1.377-.996-2.343-.996-.967 0-1.748.332-2.344.996-.596.664-.894 1.538-.894 2.622v1.348c-.664.058-.996.483-.996 1.274v4.615zm2.359-5.919v-1.45c0-.654.17-1.176.512-1.567.342-.4.796-.6 1.363-.6.566 0 1.015.2 1.347.6.342.39.513.913.513 1.567v1.45H11.64zM5.692 32.288h15.601c1.572 0 2.759-.41 3.56-1.23.8-.81 1.2-2.002 1.2-3.575V14.197c0-.683-.038-1.26-.117-1.728a3.829 3.829 0 00-.454-1.304c-.214-.4-.537-.815-.966-1.245L16.84 2.112c-.41-.42-.81-.737-1.201-.952a3.822 3.822 0 00-1.275-.454 8.661 8.661 0 00-1.611-.132h-7.06c-1.573 0-2.76.41-3.56 1.23C1.332 2.616.932 3.808.932 5.38v22.104c0 1.582.4 2.779 1.2 3.59.802.81 1.988 1.215 3.56 1.215zm.235-2.886c-.703 0-1.23-.18-1.582-.542-.352-.361-.528-.879-.528-1.552V5.569c0-.673.176-1.196.528-1.567.351-.371.884-.557 1.596-.557h6.24v8.028c0 1.045.255 1.826.762 2.343.518.518 1.3.777 2.344.777h7.896v12.715c0 .673-.176 1.191-.528 1.552-.351.362-.884.542-1.596.542H5.927zm9.638-17.343c-.302 0-.522-.069-.659-.205-.127-.137-.19-.357-.19-.66V3.841l8.071 8.218h-7.222z"})})},945610:(e,t,o)=>{o.d(t,{$:()=>r,v:()=>n});const n="not_defined";let r=function(e){return e.BASE_SPACE_DATA="base_space_data",e.SPACE_MEMBER_DATA="space_member_data",e.SPACE_NONMEMBER_DATA="space_nonmember_data",e.SPACE_DATA_NOT_LOADED="space_data_not_loaded",e}({})},945895:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isActive:!1}}cloneState(){return o(496603).o8(this.state)}}const r=new n},946065:(e,t,o)=>{o.d(t,{AQ:()=>c,AX:()=>i,GU:()=>r,Pt:()=>d,st:()=>n,vw:()=>l,yy:()=>s,zt:()=>a});const n="teamSidebar",r="teamBrowserSearch",i="teamBrowserUnjoinedTeams",a="teamBrowserJoinedTeams",s="publicPageTemplateIncludes",l=-1,c=[5,10,15,20,l];function d(e){const{block:t,query:o,getRecordModel:n,userTimeZone:r,intl:i}=e;if(!o)return!0;const a=null==t?void 0:t.getRenderTitle({getRecordModel:n,userTimeZone:r,intl:i});return!!a&&a.toLowerCase().indexOf(o.trim().toLowerCase())>=0}},946141:(e,t,o)=>{o.d(t,{By:()=>B,ED:()=>g,En:()=>S,GW:()=>W,H8:()=>v,JG:()=>f,KK:()=>p,NB:()=>I,PA:()=>y,Rt:()=>x,US:()=>M,Vg:()=>O,WO:()=>q,XQ:()=>H,Zl:()=>m,_L:()=>F,_P:()=>h,b0:()=>_,fx:()=>T,h2:()=>V,hj:()=>d,ks:()=>E,lR:()=>R,lY:()=>z,o$:()=>C,pi:()=>j,rP:()=>N,tw:()=>L,ug:()=>w,vo:()=>k,w_:()=>b,xZ:()=>P,xl:()=>u,yB:()=>A});var n=()=>o(496603),r=()=>o(534177),i=()=>o(989423),a=()=>o(644914),s=()=>o(456663),l=()=>o(632709),c=()=>o(508496);async function d(e,t){await i().vd(e,"manage_teams_filter_click",t)}function u(e,t){i().vd(e,"manage_teams_sort",t)}function p(e,t){N(e,"duplicate_team",t)}function m(e,t){i().vd(e,"open_team_browser",{...t,...(0,a().hX)({environment:e})})}function g(e,t){i().vd(e,"team_browser_search_cleared",t)}function f(e,t){const{teamStore:o,outliner_type:n}=t;N(e,"team_browser_member_list_hover",{store:o,outliner_type:n})}function v(e,t){i().vd(e,"create_team_start",{from:t.from,flow_id:t.flowId}),c().default.logEvent("create_team_start",1,{...t,...(0,a().hX)({environment:e})})}async function h(e,t){const{store:o}=t;await o.load(),N(e,"create_team_complete",t),D("create_team_complete",t)}async function _(e,t){const{store:o}=t;await o.load(),N(e,"enable_teams",t)}function b(e,t){const{screen:o,...n}=t;if(o===s().o.Team){const t={screen:"team",...n};return N(e,"close_create_team_modal",t),void D("close_create_team_modal",t)}const r={screen:"members",flow_id:t.flow_id,from:t.from,team_id:t.team_id,store:t.store};N(e,"close_create_team_modal",r),D("close_create_team_modal",r)}function y(e,t){N(e,"invite_team_members",t),D("invite_team_members",t)}function S(e,t){N(e,"invite_team_groups",t),D("invite_team_groups",t)}function w(e,t){N(e,"set_default_team",t)}function k(e,t){N(e,"join_team",t),D("join_team",t)}function I(e,t){N(e,"archive_team",t)}function A(e,t){N(e,"transition_to_zero_teams",t)}function x(e,t){N(e,"restore_team",t)}function C(e,t){N(e,"remove_team_members",t)}function T(e,t){N(e,"remove_team_groups",t)}function M(e,t){N(e,"change_teams_order",t)}function P(e,t){N(e,"change_team_access_level",t)}function B(e,t){N(e,"update_team_settings",t)}function R(e,t){N(e,"open_outliner_team_overflow",{...t,...(0,a().hX)({environment:e})})}function E(e,t){N(e,"click_outliner_team_overflow_option",t),D("click_outliner_team_overflow_option",t)}function D(e,t){const{store:o,...n}=t;o?c().default.logEvent(e,1,{...i()._d(o),...n}):c().default.logEvent(e,1,t)}async function N(e,t,o){const{store:r,...a}=o;if(!r)return void(await i().vd(e,t,{...a}));const s=i()._d(r),l=n().cJ(s,"team_id");await i().vd(e,t,{...l,...a},{forceOverrideAutomaticEventData:{team_id:s.team_id}})}function L(e,t,o,r,a){const{store:s,...l}=a;if(!s)return void i().WU(e,t,o,r,{...l});const c=i()._d(s),d=n().cJ(c,"team_id");i().WU(e,t,o,r,{...d,...l},{forceOverrideAutomaticEventData:{team_id:c.team_id}})}function F(e,t){N(e,"open_team_home",t)}function U(e){switch(e){case l().p.General:return"general";case l().p.Members:return"members";case l().p.Security:return"security";default:(0,r().HB)(e)}}function O(e,t){N(e,"click_team_settings_tab",{store:t.store,tab_old_value:U(t.tab_old_value),tab_new_value:U(t.tab_new_value)})}function V(e,t){N(e,"restore_team_permissions",t)}function j(e,t){N(e,"team_invite_link_confirmation_selection",t)}function z(e,t){N(e,"copy_team_invite_link",t),D("copy_team_invite_link",t)}function q(e,t){N(e,"click_team_invite_link",t)}function H(e,t){N(e,"request_access_to_team",t)}function W(e,t){N(e,"resolve_team_access_request",t)}},947688:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},947983:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(672577);class n extends(()=>o(959180))().A{containedByAssistantEditCard(e){return Boolean(this.find((t=>{const n=t.getNode();return n instanceof HTMLElement&&(0,o(713972).gR)(n,e)})))}getEditById(e){for(const t of this.members)for(const n of t.getGroups())if("updatedPage"===n.type){if(!n.didCreatePage)for(const t of n.groupedEdits)if(t.editId===e)return t}else"removedPage"===n.type||(0,o(534177).HB)(n)}}const r=new n},948450:(e,t,o)=>{o.d(t,{A:()=>i});o(898992),o(354520),o(803949);var n=()=>o(419494);const r=["sourceInitialPage"];const i=new class{constructor(e,t){this.localStorageStore=void 0,this.localStorageStore=new(n().Ay)({namespace:e,important:t,trackingType:"performance"})}get(e){let{userId:t,key:o}=e;return this.localStorageStore.get((0,n().HW)(t,o))}set(e){let{userId:t,key:o,value:r}=e;return this.localStorageStore.set((0,n().HW)(t,o),r)}remove(e){let{userId:t,key:o}=e;return this.localStorageStore.remove((0,n().HW)(t,o))}removeAllIfNoPermission(){const{namespace:e,hasPermissionForTrackingType:t}=this.localStorageStore;if(t)return;const o=`${n().lD}${e}:`;Object.keys(localStorage).filter((e=>e.startsWith(o))).filter((e=>{const[t,o,n,i]=e.split(":");return i&&r.includes(i)})).forEach((e=>localStorage.removeItem(e)))}}(n().cd,!1)},948914:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{}}}const r=new n},949052:(e,t,o)=>{o.d(t,{t:()=>l});o(944114);var n=()=>o(206267),r=()=>o(532659),i=()=>o(449506),a=()=>o(351360);function s(e){try{let{environment:t,type:o,inputs:s}=e;return async function*(e){const l=null===(e=a().default.state.currentSpaceStore)||void 0===e?void 0:e.id;if(!l)return;const c=await i().callStreamApi({eventName:"streamCascadeInference",environment:t,data:{type:o,inputs:s,spaceId:l,aiSessionId:n().JW()}});if("success"===c.type&&r().hS.is(c.data))for await(const t of c.data){if("error"===t.type)return;yield t.output}}()}catch(t){return Promise.reject(t)}}async function l(e){let{environment:t,type:o,inputs:n}=e;for await(const r of s({environment:t,type:o,inputs:n}))return r}},949306:(e,t,o)=>{o.d(t,{Q:()=>n});const n=(0,o(340498).xh)("xmark",{default:{loader:()=>o.e(86149).then(o.bind(o,686149))},small:{loader:()=>o.e(66375).then(o.bind(o,566375))},mini:{loader:()=>o.e(14329).then(o.bind(o,514329))},large:{loader:()=>o.e(30079).then(o.bind(o,730079))}})},951177:(e,t,o)=>{o.d(t,{Df:()=>A,Ij:()=>C,Lj:()=>w,M9:()=>x,Qr:()=>T,Vz:()=>f,ZI:()=>k,a0:()=>S,dk:()=>h,hB:()=>_,n8:()=>y,uE:()=>b,x4:()=>v});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454),o(908872);var n=()=>o(584262),r=()=>o(921940),i=()=>o(416504),a=()=>o(128713),s=()=>o(134025),l=()=>o(813690),c=()=>o(179034),d=()=>o(534177),u=()=>o(780054),p=()=>o(508496),m=()=>o(909470),g=()=>o(972435);const f="paste";function v(e){let t,o;const n=new Set,r=new Set;for(const i of e){const e=i.getParentBlockStore();if(e&&"column"===e.getType()){n.add(e.id),r.add(i.id);const a=e.getParentBlockStore();if(a&&"column_list"===a.getType()){o=a.getSpaceId();const e=a.id;if(void 0===t&&(t=e),t!==e)return}}}if(t&&n.size>1&&o)return{columnListId:t,columnIds:n,blockIds:r,spaceId:o}}function h(e,t){if(!e.clipboardData)return;const o=e.clipboardData.getData("text/html");e.clipboardData.setData("text/html",`${o}${b(t)}`)}function _(e){if(!e.clipboardData)return;return y(e.clipboardData.getData("text/html"))}function b(e){return`\x3c!-- notionvc: ${e} --\x3e`}function y(e){const t=e.match(/\<\!-- notionvc\: ([0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}) --\>$/i);return t?t[1]:void 0}function S(e){return`\x3c!-- notionblock: ${e.spaceId}/${e.id} --\x3e`}function w(e){const t=e.match(/\<\!-- notionblock\: ([0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12})\/([0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}) --\>\<\/body\>\<\/html\>$/i);return t?{spaceId:t[1],id:t[2]}:void 0}function k(e){const{blockValues:t,rootBlock:o,getRecordValue:n,isWindows:r,markdownSerializationOptions:i,markdownLinkifyIt:s,formulasModule:l}=e;let c=a().V$(t,{...x({rootBlock:o,getRecordValue:n,formulasModule:l}),transformAnnotation:null==i?void 0:i.transformAnnotation,transformBlockMapping:null==i?void 0:i.transformBlockMapping});const d={markdown:void 0,html:void 0};if(c){c=c.replaceAll(I,"$1"),d.markdown=A(r,c);const e=s&&a().uY({...s,markdown:c});e&&(d.html=A(r,e))}return d}const I=/\[(https?:\/\/[^\])]+)\]\(\1\)/g;function A(e,t){return e?t.split("\r\n").reduce(((e,t)=>[...e,...t.split("\n")]),[]).join("\r\n"):t}function x(e){const{rootBlock:t,getRecordValue:o,formulasModule:a}=e;return{root:t,navigableBlockId:t.id,renderParentBlockId:void 0,blockId:t.id,userTimeZone:(0,i().P)(),intl:g().A.getIntl(),getRecordValue:o,numberedListCache:{},bulletedListCache:{},getRecordsWithParent:()=>[],getExportedPathToFile:e=>{let{toFileURI:t}=e;return t},getExportedRenderAsset:e=>{let{toFileURI:t}=e;return t},getExportedPathToPage:e=>{let{toPageId:t}=e;return(0,r().A)({pageId:t,pageValue:o({table:c().ev,id:t}),baseUrl:u().A.domainBaseUrl,pageVisitSource:n().y8.Export})},baseUrl:u().A.domainBaseUrl,publicDomainName:u().A.publicDomainName,resultCache:new Map,regExpCache:new Map,experimentService:p().default,collectionFeatureGates:(0,m().i)(),formulasModule:a}}function C(e){const{rootBlock:t,clipboardData:o,isWindows:n,fallbackGetRecordValue:r,markdownSerializationOptions:i,markdownLinkifyIt:a,formulasModule:s}=e,{tree:c,blockSelection:u}=o,p=l().xb.tryUntilFound(...u.blocks.map((e=>e.blockSubtree&&l().xb.fromRecordMap(e.blockSubtree))).filter(d().O9),r),m=c.value,g=u.blocks.map((e=>p({...m,id:e.blockId}))).filter(d().O9);return k({rootBlock:t,getRecordValue:p,blockValues:g,isWindows:n,markdownSerializationOptions:i,markdownLinkifyIt:a,formulasModule:s})}function T(e){const t=e.pointerPath[e.pointerPath.length-1];return[s().op.set({pointer:t,path:e.attributePath,args:e.copiedText})]}},951710:(e,t,o)=>{o.d(t,{e:()=>s});o(898992),o(354520),o(581454);var n=()=>o(496603),r=()=>o(534177),i=()=>o(530267);function a(e){let t=0,o=Number.MAX_SAFE_INTEGER;for(const r of e){if(!r)continue;const e=(0,i().Vo)(r),a=(0,n().qE)(e.max,0,Number.MAX_SAFE_INTEGER),s=(0,n().qE)(e.min,0,a);t=Math.max(t,s),o=Math.min(o,a)}const a=function(e){let t;for(const o of e){const e=null==o?void 0:o.scroll;switch(e){case"disallow":return"disallow";case"allow":t="allow";break;case void 0:break;default:(0,r().HB)(e)}}return t}(e);return{type:"range",min:(0,n().qE)(t,0,o),max:o,scroll:a}}function s(e){const t=e.filter(Boolean);return{width:a(t.map((e=>null==e?void 0:e.width))),height:a(t.map((e=>null==e?void 0:e.height)))}}},952710:(e,t,o)=>{o.d(t,{dB:()=>r,sq:()=>i,t1:()=>a});var n=()=>o(645873);const r={trialActions:new(n().O2)("trialActions",(()=>o.e(77970).then(o.bind(o,655765)))),TrialInfoModal:new(n().O2)("TrialInfoModal",(()=>o.e(40432).then(o.bind(o,735751)))),TrialEndModal:new(n().O2)("TrialEndModal",(()=>o.e(87771).then(o.bind(o,142104))))},i=(0,n()._h)(r.TrialInfoModal,(e=>e.TrialInfoModal)),a=(0,n()._h)(r.TrialEndModal,(e=>e.TrialEndModal))},953418:(e,t,o)=>{o.d(t,{$v:()=>y,HN:()=>_,NM:()=>c,Np:()=>I,Rt:()=>b,T8:()=>d,VG:()=>h,WZ:()=>w,gT:()=>x,gi:()=>l,sl:()=>u,uf:()=>p,vB:()=>A,vq:()=>m,wU:()=>k,z4:()=>v});o(944114);var n=()=>o(534177),r=()=>o(574012),i=()=>o(38337);const a=8,s={auto:!0,scroll:!0};function l(e){return e&&e instanceof HTMLElement?e:e&&e.parentElement?e.parentElement:void 0}function c(e){const t=l(e);if(t)return f(t,i().RYy)}function d(e){const t=l(e);if(t)return f(t,i().Dkd)}function u(e){let t=e;const o=[];do{const e=window.getComputedStyle(t);e&&(e.overflow&&s[e.overflow]||e.overflowY&&s[e.overflowY]||e.overflowX&&s[e.overflowX])&&o.push(t),t=t.parentElement}while(t);return o}function p(e){const{environment:t,el:o,windowHeight:n,minEdgeDist:i=a}=e,s=c(o);if(!s||!s.getBoundingClientRect)return;const l=o.getBoundingClientRect(),d=s.getBoundingClientRect(),u=n-r().A.mobileNativeBottomPadding(t),p=Math.min(d.bottom,u);l.top<d.top?s.scrollTop=s.scrollTop-(d.top-l.top)-i:l.bottom>p&&(s.scrollTop=s.scrollTop+(l.bottom-p)+i)}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{edgeDist:0,animate:!1};const o=c(e),{animate:n,edgeDist:r}=t;if(!o||!o.getBoundingClientRect)return;const i=e.getBoundingClientRect(),a=o.getBoundingClientRect();if(n){const e=500,t=o.scrollTop-(a.top-i.top)-r,n=o.scrollTop,s=t-n,l=16;let c=0;const d=()=>{var t,r,i;c+=l,o.scrollTop=(t=c,r=n,i=s,(t/=e/2)<1?i/2*t*t+r:-i/2*(--t*(t-2)-1)+r),c<e&&requestAnimationFrame(d)};d()}else o.scrollTop=o.scrollTop-(a.top-i.top)-r}function g(e){return e&&e.overflowY&&s[e.overflowY]}function f(e,t){if(!e)return;let o=e;if(o)do{const e=window.getComputedStyle(o);if((o.classList&&o.classList.contains(i().XGs)&&o.classList.contains(t)||g(e))&&(!o.classList||!o.classList.contains(i().Vac)))return o;o=o.parentElement||void 0}while(o);return document.body}function v(e){return e.device.isDesktop&&!e.device.isSafari}function h(e){let{element:t,environment:o,options:n}=e;null==t||t.scrollTo({...n,behavior:!o||null!=o&&o.device.isMobile?"auto":n.behavior})}function _(e){let{element:t,environment:o,options:n}=e;null==t||t.scrollBy({...n,behavior:!o||null!=o&&o.device.isMobile?"auto":n.behavior})}function b(e){let{element:t,environment:o,options:n}=e;n&&"boolean"!=typeof n?null==t||t.scrollIntoView({...n,behavior:!o||null!=o&&o.device.isMobile?"auto":n.behavior}):null==t||t.scrollIntoView(n)}function y(e){const{element:t,environment:o,additionalPadding:n={},blockAlignment:r,inlineAlignment:i,behavior:a="smooth"}=e,{top:s=0,bottom:l=0,left:c=0,right:d=0}=n,p=u(t)[0],m=t.getBoundingClientRect(),g=m.top-s,f=m.bottom+l,v=m.left-c,_=m.right+d;if(!p)return;const b=p.getBoundingClientRect(),y=g>=b.top&&f<=b.bottom,w=v>=b.left&&_<=b.right;if(y&&w)return;const k=p.scrollTop,I=p.scrollTop+p.clientHeight,A=p.scrollLeft,x=p.scrollLeft+p.clientWidth;h({element:p,environment:o,options:{top:S({start:y?k:k+(g-b.top),end:y?I:I+(f-b.bottom),scrollStart:k,scrollEnd:I,containerSize:p.clientHeight,alignment:r??"nearest"}),left:S({start:w?A:A+(v-b.left),end:w?x:x+(_-b.right),scrollStart:A,scrollEnd:x,containerSize:p.clientHeight,alignment:i??"nearest"}),behavior:a}})}function S(e){let{start:t,end:o,scrollStart:r,scrollEnd:i,containerSize:a,alignment:s}=e;switch(s){case"start":return t;case"end":return o-a;case"center":return t+(o-t)/2-a/2;case"nearest":const e=o-t>a,l=Math.abs(t-r)<Math.abs(o-i);return e||l?t:o-a;default:(0,n().HB)(s)}}function w(e){return e.scrollHeight-(e.scrollTop+e.clientHeight)}function k(e){return Math.abs(w(e))<10}function I(e){return Math.abs(e.scrollTop)<10}function A(e){return e.scrollTop<=0}function x(e,t){let o=null;const n=e.scrollTop,r=e.scrollLeft;let i=n,a=r;const s=setTimeout((()=>{o&&(cancelAnimationFrame(o),o=null,t())}),500),l=()=>{o=null,e.scrollTop===i&&e.scrollTop!==n&&e.scrollLeft===a&&e.scrollLeft!==r?(clearTimeout(s),t()):o=requestAnimationFrame(l),i=e.scrollTop,a=e.scrollLeft};o=requestAnimationFrame(l)}},953624:(e,t,o)=>{o.d(t,{k:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("thinCheckboxCircle",{viewBox:"0 0 22 23",svg:(0,n.jsx)("circle",{cx:"11",cy:"11.5",r:"10",stroke:"#E2E1DE",strokeWidth:"1"})})},955363:(e,t,o)=>{o.d(t,{N:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M15.575 5.05a.625.625 0 0 0-.625-.625H7.313a.625.625 0 1 0 0 1.25h6.128L4.596 14.52a.617.617 0 0 0 .012.872c.244.244.635.25.872.012l8.845-8.845v6.128a.625.625 0 1 0 1.25 0z"})},r=(0,o(340498).wt)("arrowDiagonalUpRight",n)},955930:(e,t,o)=>{o.d(t,{$K:()=>h,Ex:()=>y,br:()=>f,nD:()=>v,sP:()=>b});o(944114),o(898992),o(354520),o(908872),o(737550),o(296540);var n=()=>o(68263),r=()=>o(854150),i=()=>o(468006),a=()=>o(959013),s=()=>o(108944),l=()=>o(630116),c=()=>o(946141),d=()=>o(901389),u=()=>o(722101),p=()=>o(246826),m=()=>o(317909),g=o(474848);function f(e){const{environment:t,currentSpaceViewStore:o,orderedTeamIds:n,userAction:i}=e;if(m().createAndCommit({userAction:i,environment:t,canUndo:!0,perform:e=>{p().zv({store:o,data:{joined_teams:n},transaction:e})}}),e.isExplicitUserAction){const{key:n,startPosition:i,endPosition:a}=e.dropArgs,s=l().h4.createChildStore(o,{table:r().yK,id:n});c().US(t,{store:s,start_position:i,end_position:a})}}async function v(e){let{transaction:t,...o}=e;const n=await h(o);if("user_cancelled_move"===n)return"user_cancelled_move";if(0===n.length)return"not_cleared";for(const{blockStore:r,permissions:i}of n)p().zv({store:r,data:{permissions:i},transaction:t});return"cleared"}async function h(e){const{moveToTeam:t,permissionsUpdateItems:o}=function(e){let{moveStores:t,moveTargetStore:o}=e;const n=t.reduce(((e,t)=>(e[t.id]=(0,s().Uo)(t),e)),{}),r=(0,s().Uo)(o),i=[];for(const a of t){const e=_({blockStore:a,moveFromTeam:n[a.id],moveToTeam:r});e&&i.push(e)}return{moveToTeam:r,permissionsUpdateItems:i}}(e);if(0===o.length)return[];const n=await async function(e){let{numPagesMoved:t,moveToTeam:o,permissionsUpdateItems:n}=e;if(0===n.length)return!0;if(!o)return!0;const r=o.getName(),i=n.some((e=>{let{isRemovingRestricted:t}=e;return!0===t})),s=i&&(0,g.jsx)(a().sA,{id:"teamActions.confirmMoveToTeam.removeRestrictedDescription",defaultMessage:" {numPagesMoved, plural, one {This page} other {These pages}} will no longer have restricted access.",values:{numPagesMoved:t}});return(await d().Gh({mode:"wide",message:(0,g.jsx)(a().sA,{defaultMessage:"Move {numPagesMoved, plural, one {this page} other {these pages}} to {moveToTeamName}?",id:"teamActions.confirmMoveToTeam.title",values:{moveToTeamName:r,numPagesMoved:t}}),description:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(a().sA,{id:"teamActions.confirmMoveFromTeam.description",defaultMessage:"This will transfer the permissions on {numPagesMoved, plural, one {this page} other {these pages}} to members of {moveToTeamName}. ",values:{moveToTeamName:r,numPagesMoved:t}}),s]})})).accept}({numPagesMoved:e.moveStores.length,moveToTeam:t,permissionsUpdateItems:o});return n?o:"user_cancelled_move"}function _(e){let{blockStore:t,moveFromTeam:o,moveToTeam:r}=e;if(void 0===o&&void 0===r)return;if((null==o?void 0:o.id)===(null==r?void 0:r.id))return;const a=t.getPermissionItems();let s=!1;const l=a.filter((e=>(0,n().T6)(e)?(s=!0,!1):!(0,n().Lg)(e)&&(!o||!(0,i().O1)(e,o.id)&&!(0,i().Jt)(e,o.id))));return a.length!==l.length?{blockStore:t,permissions:l,moveFromTeam:o,isRemovingRestricted:s}:void 0}function b(e){const{store:t,teamStore:o,transaction:n,location:r}=e,i=o.getTeamPagesStore(),a=l().Bv.createChildStore(i,t.pointer);"append"===r.type?u().BC({parentStore:i,appendStore:a,transaction:n,after:r.after}):"prepend"===r.type&&u().Hs({parentStore:i,prependStore:a,transaction:n,before:r.before})}function y(e){const{store:t,teamStore:o,transaction:n}=e,r=o.getTeamPagesStore(),i=l().Bv.createChildStore(r,t.pointer);u().TF({childToRemoveStore:i,parentStore:r,transaction:n})}},956152:(e,t,o)=>{o.d(t,{C:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("linkToPage",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{fillRule:"evenodd",d:"M6.25 3C5.56 3 5 3.56 5 4.25v11.5c0 .69.56 1.25 1.25 1.25H7a.75.75 0 010 1.5h-.75a2.75 2.75 0 01-2.75-2.75V4.25A2.75 2.75 0 016.25 1.5h4.086c.464 0 .909.184 1.237.513l4.414 4.414c.329.328.513.773.513 1.237V9A.75.75 0 0115 9v-.5h-2.75A2.75 2.75 0 019.5 5.75V3H6.25zM11 5.75V3.56L14.44 7h-2.19C11.56 7 11 6.44 11 5.75z",clipRule:"evenodd"}),(0,n.jsx)("path",{d:"M16.5 16.036a.75.75 0 01-1.5 0V13.56l-4.72 4.72a.75.75 0 11-1.06-1.061l4.72-4.72h-2.476a.75.75 0 010-1.5h4.286a.75.75 0 01.75.75v4.286z"})]})})},957416:(e,t,o)=>{o.d(t,{P:()=>p});var n=()=>o(427704),r=()=>o(763824),i=()=>o(939768),a=()=>o(780054),s=()=>o(972435),l=()=>o(508496),c=()=>o(901389),d=()=>o(705540);const u=(0,o(959013).YK)({allowPopup:{id:"authAction.authorize.popupBlocked",defaultMessage:"It looks like your browser is currently blocking popups. Please allow pop-ups to continue"},dismissButtonLabel:{defaultMessage:"OK",id:"dialog.dismissButton.label"}});async function p(e,t){const{width:o,height:p,url:g,titleMessage:f}=t,v=s().A.formatMessage(f);if(e.device.isElectron)return d().openOauthPopup({width:o,height:p,url:g,title:v});const h=e.device.isMobile,_=void 0!==window.screenX?window.screenX:window.screenLeft,b=void 0!==window.screenY?window.screenY:window.screenTop,y=void 0!==window.outerWidth?window.outerWidth:document.documentElement.clientWidth,S=void 0!==window.outerHeight?window.outerHeight:document.documentElement.clientHeight-22,w=h?0:o,k=h?0:p;let I="toolbar=0,menubar=0,location=0";0!==w&&(I+=`,width=${w}`),0!==k&&(I+=`,height=${k}`),I+=`,left=${(_<0?window.screen.width+_:_)+(y-w)/2}`,I+=`,top=${b+(S-k)/2.5}`,I+=",scrollbars=1";const A=m()?(0,i().Gm)({url:`${a().A.domainBaseUrl}${n().JZ.verifyNoPopupBlockerHtmlAndRedirect}`,query:{redirectUri:g}}):g,x=window.open(A,v,I);if(x)x.focus();else if(m())return void c().ui({showCancel:!1,keepFocus:!1,message:s().A.formatMessage(u.allowPopup),items:[{label:s().A.formatMessage(u.dismissButtonLabel),onAccept:()=>{}}]});const C=r().yX();if(A.includes("evernotepopupredirect")&&l().default.checkGate({gateName:"is_evernote_authpopup_closing_fix_enabled"})){const e=performance.now()+6e4,t=e=>{if(e&&e.data&&"popup-callback"===e.data.type){const t=e.data.url;C.resolve(t)}},o=setInterval((()=>{const t=performance.now(),o=localStorage.getItem("externalAuthCallback");o?C.resolve(o):x&&x.closed&&e<t&&C.resolve(void 0)}),300);window.addEventListener("message",t,!1);const n=await C.promise;return window.removeEventListener("message",t,!1),localStorage.removeItem("externalAuthCallback"),clearInterval(o),x&&x.close(),window.focus(),n}{const e=e=>{if(e&&e.data&&"popup-callback"===e.data.type){const t=e.data.url;C.resolve(t)}},t=setInterval((()=>{const e=localStorage.getItem("externalAuthCallback");e?C.resolve(e):x&&x.closed&&C.resolve(void 0)}),300);window.addEventListener("message",e,!1);const o=await C.promise;return window.removeEventListener("message",e,!1),localStorage.removeItem("externalAuthCallback"),clearInterval(t),x&&x.close(),window.focus(),o}}function m(){return"on"===l().default.getEligibleGroup({experimentId:"show_instruction_on_auth_popup_blocked",defaultGroup:"control"})}},958163:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1,type:"image"}}}const r=new n},960701:(e,t,o)=>{o.d(t,{d:()=>d});o(581454);var n=o(296540),r=()=>o(792485),i=()=>o(56366),a=()=>o(179034),s=()=>o(125958),l=()=>o(963589),c=()=>o(630116);function d(e){const{parentStore:t}=e,o=(0,r().S)(),d=e.pageStore??(null==o?void 0:o.pageStore),u=t.getRecordModel,p=(0,l().X)("toc_nested_headings"),m=(0,i().K8)((()=>d?s().T(d.id,u,p):[]),[d,u,p]),g=(0,n.useMemo)((()=>m.map((e=>c().Bv.createChildStore(t,{table:a().ev,id:e})))),[t,m]);return{navigableAncestorStore:d,headerStores:g}}},962036:(e,t,o)=>{o.d(t,{A:()=>u});o(296540);var n=()=>o(484714),r=()=>o(56366),i=()=>o(401497),a=()=>o(133033),s=()=>o(148024),l=()=>o(187485),c=()=>o(678553),d=o(474848);function u(e){const t=(0,n().v3)();return(0,d.jsx)(l().A,{href:e.href,external:!0,onClick:()=>s().FH(t,{from:e.analyticsFrom}),children:(0,d.jsx)(c().A,{icon:!e.left&&(0,d.jsx)(m,{left:e.left}),title:(0,d.jsx)(p,{title:e.title,left:e.left})})})}function p(e){const t=(0,n().v3)(),o=(0,r().K8)((()=>t.device.isPhone),[t]),a=(0,i().IS)((e=>({title:{fontSize:o?14:12,verticalAlign:1,color:e.lightTextColor}})),[o]);return e.left?(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,d.jsx)("span",{style:{...a.title,marginRight:"auto"},children:e.left}),(0,d.jsx)(m,{left:e.left}),(0,d.jsx)("span",{style:a.title,children:e.title})]}):(0,d.jsx)("span",{style:a.title,children:e.title})}function m(e){let{left:t}=e;const o=(0,i().DP)(),r=(0,n().WS)();return(0,a().$)({width:r?16:14,fill:o.lightIconColor,marginRight:t?6:0})}},962730:(e,t,o)=>{o.d(t,{C:()=>r,W:()=>n});let n=function(e){return e[e.Top=0]="Top",e[e.Bottom=1]="Bottom",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.Center=4]="Center",e}({}),r=function(e){return e[e.Start=0]="Start",e[e.Center=1]="Center",e[e.End=2]="End",e}({})},962845:(e,t,o)=>{o.d(t,{$W:()=>A,BO:()=>P,GI:()=>D,Tp:()=>R,ZS:()=>B,_V:()=>O,cR:()=>w,fF:()=>U,hn:()=>L,n3:()=>C,w_:()=>F,xk:()=>I});o(16280),o(898992),o(354520),o(672577),o(581454);var n=()=>o(507707),r=()=>o(624919),i=()=>o(700500),a=()=>o(857639),s=()=>o(358547),l=()=>o(842989),c=()=>o(301421),d=()=>o(695625),u=()=>o(155959),p=()=>o(148832),m=()=>o(921855),g=()=>o(295740),f=()=>o(231722),v=()=>o(20313),h=()=>o(969197),_=()=>o(906537),b=()=>o(792002);const y=!1;function S(){if(y){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.warn("multiTextSelectionHelpers:",...t)}}function w(e,t){const o=(0,f().H7)(t);return o||a().rateLimitedLog({from:"multiTextSelectionHelpers",type:"TODO",level:"warning",data:{name:e,message:e}}),o}const k={startIndex:0,endIndex:1/0};function I(e,t){const{start:o,end:r}=e;if((0,f().KP)(e))return o.store===t?"contained-within":void 0;if(o.store===t)return"starts-at";if(r.store===t)return"ends-at";const i=c().n.findNodeFromStore(o.store),a=c().n.findNodeFromStore(r.store),s=c().n.findNodeFromStore(t);return i&&a&&s&&1===(0,n().A)(s,i)&&-1===(0,n().A)(s,a)?"covers":void 0}function A(e){const{start:t,end:o}=e,n=(0,f().H7)(e);if(n){const e=c().n.findEditableWithStore(n.store);if(e){return[{editable:e,...n}]}return[]}const r=x(t),i=x(o);if(!r||!i){const e=r||i;if(!e)return[];return[{editable:e.editable,store:e.position.store,selection:{startIndex:e.position.index,endIndex:e.position.index}}]}const a=(0,b().y1)(r.editable).filter((e=>{var t,o,n;return(null===(t=e.contentEditableContext)||void 0===t?void 0:t.id)===(null===(o=r.editable.contentEditableContext)||void 0===o?void 0:o.id)&&(null===(n=e.getNode())||void 0===n?void 0:n.isConnected)})),s=a.findIndex((e=>e.props.store.id===r.editable.props.store.id)),l=a.findIndex((e=>e.props.store.id===i.editable.props.store.id));if(-1===s){throw Object.assign(new Error("Start editable not found in DOM order array"),r)}if(-1===l){throw Object.assign(new Error("End editable not found in DOM order array"),i)}if(!(s<=l))throw new Error(`Start (index ${s}) must be before end (index ${l}) in DOM`);const d=a.slice(s,l+1);return d.map(((e,t)=>{if(0===t){const{position:t}=r;return{editable:e,store:e.props.store,selection:{startIndex:t.index,endIndex:1/0}}}if(t===d.length-1){const{position:t}=i;return{editable:e,store:e.props.store,selection:{startIndex:0,endIndex:t.index}}}return{editable:e,store:e.props.store,selection:k}}))}function x(e){const t=c().n.findEditableWithStore(e.store);if(t)return{editable:t,position:e}}function C(e){var t;const{range:o,contentEditableLeafRegistry:n,allowInvisibleEndSelection:r,constraintToContentEditableRootNode:i,avoidEdgesOfContentEditableRoot:a}=e;if(!o)return;if(i&&i!==(0,g().sr)(o.commonAncestorContainer))return;if(a&&(0,g().Hz)(o.commonAncestorContainer))return void S("not snapping - range is at edge of content editable root");let s,l=!1,c=n.getParentContentEditableLeaf(o.startContainer);c||(s??=n.getByDOMOrder(),c=(0,_().snapContainerOffsetToNode)({nodesInDomOrder:s,containerOffset:{container:o.startContainer,offset:o.startOffset},snapTowards:"end"}),l=!0,S("snapped start",o.startContainer,o.startOffset,"to",c));let d=n.getParentContentEditableLeaf(o.endContainer);if(!d||!r&&d&&0===o.endOffset&&o.endContainer===d.node&&d.node!==(null===(t=c)||void 0===t?void 0:t.node)){s??=n.getByDOMOrder();const e=s.findIndex((e=>{var t;let{node:o}=e;return o===(null===(t=c)||void 0===t?void 0:t.node)})),t=-1!==e?s.slice(e):s,i=d&&!r?t.filter((e=>{var t;let{node:o}=e;return o!==(null===(t=d)||void 0===t?void 0:t.node)})):t;d=(0,_().snapContainerOffsetToNode)({nodesInDomOrder:i,containerOffset:{container:o.endContainer,offset:o.endOffset},snapTowards:"start"}),l=!0,S("snapped end",o.endContainer,o.endOffset,"inside",t,"to",d)}if(!c||!d){const e=c??d;if(!e)return;return{start:e,end:e,forceEmit:!0}}return{start:c,end:d,forceEmit:l}}function T(e){const t=e.getTitleStore();if(t){if(c().n.findNodeFromStore(t))return t}}function M(e){for(const t of e){const e=T(t);if(e&&t.getType()!==i().xd.code)return{blockStore:t,titleStore:e}}}function P(e){const t=M(e);if(!t)return;const o=function(e){return M([...e].reverse())}(e);if(!o)return;const n=(0,v().Ag)({includeNonSelectableListContainer:!1,rootStore:t.blockStore.getHighestContentBlockUIAncestor()});if(!n)return;const r=(0,v().mP)(o.blockStore,n);if(!r)return;let i;for(const a of(0,s().Y_)(r)){const e=a.value.store.getTitleStore();if(e){const t=(0,b().s6)(e);t&&(i={store:e,index:t.endIndex})}}if(!i)return;return{start:{store:t.titleStore,index:0},end:i}}function B(e){var t;const{multiSelection:o,filterCommonAncestors:n,focus:r}=e;if((0,f().KP)(o)){var a;let e=(0,h().T)(o.start.store);if((null===(a=e)||void 0===a?void 0:a.getType())===i().xd.tableRow){var l;const t=null===(l=e.getRecordStoreUIParent())||void 0===l?void 0:l.recordStoreUIParentStore;t&&t instanceof p().B&&(e=t)}if(!e)return;return{stores:[e]}}const c=R({multiSelection:o,includeNonSelectable:!1});if(!c)return;const d=n?(0,s().Xi)(c.treeRange):(0,s().Lu)(c.treeRange),u=Array.from(d),m=u[0],g=null==m||null===(t=m.value.component)||void 0===t||null===(t=t.getContentEditableContext())||void 0===t?void 0:t.id,v=u.filter((e=>{var t;return(null===(t=e.value.component)||void 0===t||null===(t=t.getContentEditableContext())||void 0===t?void 0:t.id)===g||e.value.store.getType()===i().xd.table})).map((e=>e.value.store));return{stores:v,pivot:"end"===r||r===o.end||void 0===r&&!(0,_().selectionIsBackwards)()?v[v.length-1]:v[0]}}function R(e){const{multiSelection:t,includeNonSelectable:o}=e,n=(0,h().T)(t.start.store),r=(0,h().T)(t.end.store);if(!n||!r)return;const i=n.getHighestContentBlockUIAncestor(),a=d().T.findSelectableFromStore(n),s=(0,v().Ag)({includeNonSelectableListContainer:o,rootStore:i,container:null==a?void 0:a.getContextSelectableContainer()});if(!s)return;const c=(0,v().Xs)(n,[s]),u=(0,v().Xs)(r,[s]);if(!c||!u)return;const p=l().W.fromNearestCommonAncestor(c,u);return p?{tree:s,treeRange:p}:void 0}function E(e){const{leafNode:t,rangeContainer:o,defaultEndIndex:r}=e;S("Range outside of leaf, attempting to recover",t,o);const i=(0,n().A)(t,o);let a=0;if(-1===i)a=r;else{if(1!==i)throw new Error("Invalid relativeStartPosition. index should not be inside leaf");a=0}return{index:a,forceEmit:!0,afterEndOfLine:!1}}function D(e){var t,o,n,r;const{range:i,contentEditableLeafRegistry:a,allowInvisibleEndSelection:s,avoidEdgesOfContentEditableRoot:l}=e;if(!i)return;let d,u,p=!1;if(a&&a.hasMembers()){const e=C({range:i,contentEditableLeafRegistry:a,allowInvisibleEndSelection:s,constraintToContentEditableRootNode:void 0,avoidEdgesOfContentEditableRoot:l});e&&(d=e.start.node,u=e.end.node,p||=e.forceEmit),S("getMultiTextSelectionFromRange: snapped to leafs",e,i)}else d=(0,g().sT)(i.startContainer),u=(0,g().sT)(i.endContainer),S("getMultiTextSelectionFromRange: found parent leafs",d,u,i);const f=d?c().n.find((e=>{var t;return(null===(t=e.getContentEditableLeaf())||void 0===t?void 0:t.getNode())===d})):void 0,v=u?c().n.find((e=>{var t;return(null===(t=e.getContentEditableLeaf())||void 0===t?void 0:t.getNode())===u})):void 0;if(!f||!v)return void S("getMultiTextSelectionFromRange: missing editable",{startMissing:!f,endMissing:!v});const h=!i.collapsed,_=f.props.store;let y=v.props.store;const{startContainer:w,endContainer:k}=i,I=(null===(t=(o=v.props).getEndSelection)||void 0===t?void 0:t.call(o).endIndex)??0,A=(null===(n=d)||void 0===n?void 0:n.contains(i.startContainer))&&(0,m().V_)(i.startContainer,i.startOffset)||E({leafNode:d,rangeContainer:w,defaultEndIndex:I});let x=(null===(r=u)||void 0===r?void 0:r.contains(i.endContainer))&&(0,m().V_)(i.endContainer,i.endOffset)||E({leafNode:u,rangeContainer:k,defaultEndIndex:I});if(h&&x.afterEndOfLine){const e=(0,b().J3)(y);e&&(S("end after EOL",i.endContainer,i.endOffset),y=e,x={index:0,forceEmit:!0,afterEndOfLine:!1})}return{multiSelection:{start:{store:_,index:A.index},end:{store:y,index:x.index}},forceEmit:p||A.forceEmit||x.forceEmit}}function N(e,t){if(!e&&!t)return 0;if(!t)return-1;if(!e)return 1;if(e.store===t.store)return e.index-t.index;const o=c().n.findNodeFromStore(e.store),r=c().n.findNodeFromStore(t.store);return(0,n().A)(o,r)}function L(e,t){const[o,n]=[e,t].sort(N);return{start:o,end:n}}function F(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,_().selectionIsBackwards)())?{focus:e.start,anchor:e.end}:{focus:e.end,anchor:e.start}}function U(e){return e.device.isAndroid?(0,u().T)("supportsAlwaysMultiTextSelectionBehavior")?"always":"gesture":"always"}function O(e){return e.isChrome&&96===parseInt(e.browserVersion,10)}(0,o(604341).exposeDebugValue)("multiTextSelectionToBlockSelection",B),(0,r().EX)({canFormat:e=>(0,f().Zq)(e),header(e){const{table:t,tr:o,td:n,object:i,CONTAINER_STYLE:a}=r().iY,s=c().n.findNodeFromStore(e.start.store),l=c().n.findNodeFromStore(e.end.store);return t(a,o({},n({},"start:"),n({},i(e.start.index)," in"),n({},i(e.start.store)),n({},i(s))),o({},n({},"end:"),n({},i(e.end.index)," in"),n({},i(e.end.store)),n({},i(l))))},hasBody:e=>!1,body:e=>null})},962855:(e,t,o)=>{o.d(t,{D:()=>r,a:()=>i});var n=()=>o(100584);function r(e){n().A.state.openModals.has(e)||(n().A.state.openModals.add(e),n().A.emit())}function i(e){n().A.state.openModals.has(e)&&(n().A.state.openModals.delete(e),n().A.emit())}},963575:(e,t,o)=>{o.d(t,{A:()=>n});const n={unit:8,borderRadius:4,card:{desktop:{small:{width:180,height:100},medium:{width:260,height:148},large:{width:320,height:180}},mobile:{width:"100%"}},vertical:{micro:2,tiny:4,small:8,medium:12,large:24},horizontal:{micro:2,tiny:4,small:8,medium:12,large:24}}},963589:(e,t,o)=>{o.d(t,{X:()=>i});var n=()=>o(56366),r=()=>o(508496);function i(e){const t=r().default.getGateCheckStore({gateName:e});return(0,n().O$)(t).gate}},963702:(e,t,o)=>{o.d(t,{F:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{currentScreen:"none",connectionStatus:"not_started",sessionId:o(206267).JW(),analyticsFrom:"unknown",microsoftTenantId:void 0,syncProgressPercentage:0,isLoaded:!1}}}const r=new n},964345:(e,t,o)=>{o.d(t,{Ay:()=>g,Di:()=>l,Gq:()=>m,I1:()=>p,Y$:()=>u,b:()=>c,ei:()=>s,gZ:()=>a,kj:()=>d});var n=()=>o(496506);class r extends(()=>o(757695))().default{getInitialState(){return{audioRecorder:void 0,audioSessionBlockWriters:new Map,rootBlock:void 0,block:void 0,enabled:!1,talking:!1,environment:void 0,transcribedTexts:[],blockRenderedInPage:!1,blockRenderedInPeekView:!1,loading:!1,showDictationBubble:!1,isDictationBubbleOnScreen:!1,dictationBubbleScrollPosition:void 0,dictationBubbleRelativeToScreen:void 0}}}const i=new r,a=(new(n().default)((()=>i.state.loading),{debugName:"DictationLoadingStore"}),new(n().default)((()=>i.state.audioRecorder),{debugName:"DictationAudioRecorderStore"}),new(n().default)((()=>i.state.enabled),{debugName:"DictationEnabledStore"})),s=new(n().default)((()=>i.state.rootBlock),{debugName:"DictationRootBlockStore"}),l=new(n().default)((()=>{var e;return null===(e=i.state.rootBlock)||void 0===e?void 0:e.id}),{debugName:"DictationRootBlockIdStore"}),c=new(n().default)((()=>{var e;return null===(e=i.state.block)||void 0===e?void 0:e.id}),{debugName:"DictationBlockIdStore"}),d=new(n().default)((()=>i.state.block),{debugName:"DictationBlockStore"}),u=new(n().default)((()=>i.state.blockRenderedInPage||i.state.blockRenderedInPeekView),{debugName:"DictationBlockVisibleStore"}),p=new(n().default)((()=>i.state.blockRenderedInPage),{debugName:"DictationBlockInPageStore"}),m=(new(n().default)((()=>i.state.talking),{debugName:"IsTalkingStore"}),new(n().default)((()=>i.state.blockRenderedInPeekView),{debugName:"DictationBlockInPeekViewStore"}),new(n().default)((()=>!i.state.blockRenderedInPeekView&&"inScreen"!==i.state.dictationBubbleRelativeToScreen),{debugName:"showScrollToFaceButtonStore"}),new(n().default)((()=>i.state.dictationBubbleRelativeToScreen),{debugName:"DictationBubbleRelativeToScreenStore"}),new(n().default)((()=>i.state.audioSessionBlockWriters.size>0),{debugName:"IsInferencingStore"})),g=((0,o(827380).A)(),i)},964447:(e,t,o)=>{o.d(t,{OI:()=>i,U$:()=>l,dT:()=>c,gO:()=>d,tI:()=>u,vE:()=>s});var n=()=>o(645873);const r={PostImportIntroPopup:new(n().O2)("PostImportInfoPopup",(async()=>await Promise.all([o.e(75134),o.e(37062)]).then(o.bind(o,745364))))},i=(0,n()._h)(r.PostImportIntroPopup,(e=>e.PostImportIntroPopup)),a={AllProjectsTooltip:new(n().O2)("AllProjectsTooltip",(async()=>await Promise.all([o.e(23806),o.e(75134),o.e(88895)]).then(o.bind(o,843653)))),ProjectCustomizationTooltip:new(n().O2)("ProjectCustomizationTooltip",(async()=>await Promise.all([o.e(23806),o.e(75134),o.e(88895)]).then(o.bind(o,843653)))),NavigateToProjectTasksTooltip:new(n().O2)("NavigateToProjectTasksTooltip",(async()=>await Promise.all([o.e(23806),o.e(75134),o.e(88895)]).then(o.bind(o,843653)))),TasksDatabaseViewsTooltip:new(n().O2)("TasksDatabaseViewsTooltip",(async()=>await Promise.all([o.e(23806),o.e(75134),o.e(88895)]).then(o.bind(o,843653)))),YourCurrentTeamspaceTooltip:new(n().O2)("YourCurrentTeamspaceTooltip",(async()=>await Promise.all([o.e(23806),o.e(75134),o.e(88895)]).then(o.bind(o,843653))))},s=(0,n()._h)(a.AllProjectsTooltip,(e=>e.AllProjectsTooltip)),l=(0,n()._h)(a.ProjectCustomizationTooltip,(e=>e.ProjectCustomizationTooltip)),c=(0,n()._h)(a.NavigateToProjectTasksTooltip,(e=>e.NavigateToProjectTasksTooltip)),d=(0,n()._h)(a.TasksDatabaseViewsTooltip,(e=>e.TasksDatabaseViewsTooltip)),u=(0,n()._h)(a.YourCurrentTeamspaceTooltip,(e=>e.YourCurrentTeamspaceTooltip))},965378:(e,t,o)=>{o.d(t,{V:()=>l,r:()=>s});var n=()=>o(449506),r=()=>o(624307),i=()=>o(398194),a=()=>o(404141);function s(e){const{environment:t,onSubmit:o,onCancel:n}=e;t.device.isMobile?r().A.setState({open:!0}):a().A.setState({open:!0,openedFrom:"login",currentTab:"profile",defaultSubtab:void 0,highlightedSetting:void 0}),i().A.setState({open:!0,setNewPassword:!0,password:"",repeatPassword:"",isSet:!1,onSubmit:o,onCancel:n})}async function l(e){const{environment:t,userEmail:o}=e,r=await n().callApi({eventName:"getLoginOptions",environment:t,data:{email:o}});if("failed"===r.type)return{error:r.error};const i=r.data;return{value:{isSamlEnforced:"required"===i.samlSignIn,didLogInWithSaml:"available"===i.samlSignIn&&"saml"===i.lastLoginMethod,hasPassword:"required"!==i.samlSignIn&&i.passwordSignIn}}}},965998:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("speechBubbleFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.32 15.424c.39 0 .677-.192 1.149-.609l2.344-2.064h4.116c2.057 0 3.213-1.19 3.213-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.22h.28v1.675c0 .608.322.998.875.998zm.342-1.531v-1.949c0-.403-.178-.56-.56-.56H3.26c-1.285 0-1.9-.65-1.9-1.894V4.26c0-1.243.615-1.893 1.9-1.893h8.627c1.278 0 1.893.65 1.893 1.894v5.23c0 1.243-.615 1.893-1.893 1.893h-4.15c-.417 0-.622.068-.909.369l-2.167 2.14zm-.567-8.668h6.884a.433.433 0 00.423-.438.425.425 0 00-.423-.417H4.095a.419.419 0 00-.417.417c0 .24.184.438.417.438zm0 2.167h6.884a.427.427 0 000-.855H4.095a.425.425 0 00-.417.424c0 .24.184.43.417.43zm0 2.173h4.484c.24 0 .424-.191.424-.423 0-.24-.185-.431-.424-.431H4.095a.422.422 0 00-.417.43.42.42 0 00.417.424z"})})},966505:(e,t,o)=>{o.d(t,{$W:()=>U,AE:()=>ce,Az:()=>q,CF:()=>z,DO:()=>pe,F$:()=>re,F2:()=>I,Gq:()=>le,HD:()=>R,HJ:()=>Y,IT:()=>ne,JN:()=>C,Jm:()=>W,KB:()=>T,KX:()=>G,MZ:()=>x,Mh:()=>O,N_:()=>te,P4:()=>w,PG:()=>B,R_:()=>k,Si:()=>F,TS:()=>$,V6:()=>D,Y1:()=>A,ZZ:()=>ae,cI:()=>oe,d6:()=>ee,db:()=>_,dp:()=>h,eR:()=>f,ej:()=>S,et:()=>ie,fv:()=>P,gc:()=>b,gy:()=>v,j$:()=>Z,ke:()=>J,m4:()=>L,m6:()=>N,oU:()=>X,qF:()=>g,qQ:()=>ue,st:()=>j,th:()=>E,u$:()=>Q,uL:()=>V,ud:()=>K,uz:()=>se,vn:()=>de,wE:()=>H,wF:()=>M,wX:()=>y,xO:()=>me});o(898992),o(354520),o(581454);var n=()=>o(554279),r=()=>o(449506),i=()=>o(989423),a=()=>o(680074),s=()=>o(351360),l=()=>o(508496),c=()=>o(406999),d=()=>o(134217),u=()=>o(10984),p=()=>o(749240),m=()=>o(337240);function g(e,t){i().u4({environment:e,event:{eventName:"create_space",eventProperties:t}});const o=(0,u().AI)();if("professional"===t.domain_type&&(i().vd(e,"professional_workspace_created",t),m().qq(e,{subscriptionTier:o,planType:t.planType})),"team"===t.planType&&(i().vd(e,"team_workspace_created",t),m().M8(e,{subscriptionTier:o,planType:t.planType})),m().qF(e,{subscriptionTier:o,domainType:t.domain_type}),"team"===t.planType){const t=n().mS(),o=n().zD();r().callApi({eventName:"trackConversionEvent",environment:e,data:{eventName:"create_team_space",fbp:t,clickIds:o}})}}function f(e,t){i().vd(e,"join_space",t)}function v(e,t){i().vd(e,"set_notifications_as_read",t)}function h(e){i().vd(e,"leave_space"),G(e,{invite_origin:"workspace_leave",domainType:(0,a().FX)(),new_workspace_member_count:-1,new_workspace_member_ids:[e.currentUser.id??""]})}function _(e){i().vd(e,"delete_space"),l().default.logEvent("delete_space")}function b(e,t){i().vd(e,"convert_guest_to_member",t),l().default.logEvent("convert_guest_to_member",t.convert_to,{origin:t.origin})}function y(e){i().vd(e,"remove_guest")}function S(e,t){l().default.logEvent("remove_member",t.member_user_id,t),G(e,{invite_origin:"workspace_remove_member",domainType:t.domainType,new_workspace_member_count:t.new_workspace_member_count,new_workspace_member_ids:[t.member_user_id]}),i().vd(e,"remove_member",{member_user_id:t.member_user_id,member_role:t.member_role,contraction_survey_id:t.contraction_survey_id})}function w(e){i().vd(e,"managed_user_reactivate_button_clicked")}function k(e,t){i().vd(e,"managed_user_support_access_toggled",t)}function I(e,t){i().vd(e,"managed_users_dashboard_search",t)}function A(e,t){i().vd(e,"managed_users_external_space_access_set",t)}function x(e,t){i().vd(e,"managed_users_prevent_support_access_toggled",t)}function C(e,t){i().vd(e,"managed_users_session_duration_modal_confirmed",t)}function T(e,t){i().vd(e,"managed_user_delete_button_clicked",t)}function M(e,t){i().vd(e,"managed_user_edit_modal_submitted",t)}function P(e){i().vd(e,"managed_user_log_out_button_clicked")}function B(e,t){i().vd(e,"managed_user_remove_from_external_workspace_button_clicked",t)}function R(e){i().vd(e,"managed_user_reset_password_button_clicked")}function E(e){i().vd(e,"managed_user_suspend_button_clicked")}function D(e,t){i().vd(e,"managed_users_log_out_all_button_clicked",t)}function N(e,t){i().vd(e,"managed_users_reset_passwords_all_button_clicked",t)}function L(e,t){i().vd(e,"managed_users_session_duration_selected",t)}function F(e,t){i().vd(e,"managed_user_edit_profile_modal_open",t)}function U(e,t){i().vd(e,"managed_user_delete_modal_confirmed",t)}function O(e,t){i().vd(e,"managed_user_edit_modal_confirmed",t)}function V(e){i().vd(e,"managed_user_log_out_modal_confirmed")}function j(e,t){i().vd(e,"managed_user_remove_from_external_workspace_modal_confirmed",t)}function z(e){i().vd(e,"managed_user_reset_password_modal_confirmed")}function q(e,t){i().vd(e,"managed_user_suspend_modal_confirmed",t)}function H(e,t){i().vd(e,"managed_users_log_out_all_modal_confirmed",t)}function W(e,t){i().vd(e,"managed_users_reset_passwords_all_modal_confirmed",t)}function K(e){i().vd(e,"managed_users_dashboard_button_clicked")}function G(e,t){const o=(0,u().AI)();i().vd(e,"workspace_member_number_update",{new_workspace_member_count:t.new_workspace_member_count,new_workspace_member_ids:t.new_workspace_member_ids,origin:t.invite_origin,subscription_tier:o,domain_type:t.domainType,allow_domain_auto_invite:t.allow_domain_auto_invite}),l().default.logEvent("workspace_member_number_update",t.new_workspace_member_count,{origin:t.allow_domain_auto_invite?`${t.invite_origin}_allow_domain`:t.invite_origin,subscription_tier:o,domain_type:t.domainType})}function $(e,t){const o=(0,u().AI)(),n=(0,a().FX)();i().vd(e,"person_property_invite_click_menu_item",{subscription_tier:o,domain_type:n,origin:t.origin,invite_flow_id:t.invite_flow_id})}function Y(e,t){const o=(0,u().AI)(),n=(0,a().FX)();i().vd(e,"person_property_invite_render_menu_item",{subscription_tier:o,domain_type:n,origin:t.origin,invite_flow_id:t.invite_flow_id})}function Q(e,t){const o=(0,u().AI)(),n=(0,a().FX)(),r="member"===t.invite_option?t.can_add_member?"member":"request_member":"guest";i().vd(e,"person_property_invite_click_invite_button",{subscription_tier:o,domain_type:n,invited_type:r,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id})}function Z(e,t){const o=(0,u().AI)(),n=(0,a().FX)();i().vd(e,"person_property_invite_click_upgrade_button",{subscription_tier:o,domain_type:n,origin:t.origin,invited_user_count:t.invited_user_count,invite_flow_id:t.invite_flow_id})}function X(e,t){const o=(0,u().AI)(),n=(0,a().FX)();i().vd(e,"person_property_invite_guest_invited",{subscription_tier:o,domain_type:n,invited_user_count:t.invited_user_count,origin:t.origin,invite_flow_id:t.invite_flow_id})}function J(e,t){const o=(0,u().AI)(),n=(0,a().FX)();i().vd(e,"person_property_invite_member_invited",{subscription_tier:o,domain_type:n,invited_user_count:t.invited_user_count,origin:t.origin,invite_flow_id:t.invite_flow_id})}function ee(e,t){const o=(0,u().AI)(),n=(0,a().FX)();i().vd(e,"person_property_invite_member_requested",{subscription_tier:o,domain_type:n,invited_user_count:t.invited_user_count,origin:t.origin,invite_flow_id:t.invite_flow_id})}function te(e,t){const o=(0,u().AI)(),n=(0,a().FX)();i().vd(e,"person_property_invite_error",{subscription_tier:o,domain_type:n,invite_stage:t.invite_stage,invite_flow_id:t.invite_flow_id,error:t.error})}function oe(e,t){const o=(0,u().AI)(),n=(0,a().FX)(),r="member"===t.invite_option?t.can_add_member?"member":"request_member":"guest";i().vd(e,"person_property_invite_completed",{subscription_tier:o,domain_type:n,invited_type:r,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id})}function ne(e,t){const o=(0,u().AI)(),n=(0,a().FX)();i().vd(e,"person_property_invite_message_typed",{subscription_tier:o,domain_type:n,origin:t.origin,invite_flow_id:t.invite_flow_id})}function re(e,t){const o=(0,u().AI)(),n=(0,a().FX)();i().vd(e,"person_property_invite_dismiss_popup",{subscription_tier:o,domain_type:n,origin:t.origin,invite_flow_id:t.invite_flow_id})}function ie(e,t){const o=(0,u().AI)(),n=(0,a().FX)();i().vd(e,"person_property_invite_change_permission",{subscription_tier:o,domain_type:n,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_role:t.invited_role})}function ae(e,t){const o=(0,u().AI)(),n=(0,a().FX)();i().vd(e,"person_property_invite_click_invite_option",{subscription_tier:o,domain_type:n,origin:t.origin,invite_flow_id:t.invite_flow_id,invite_option:t.invite_option})}function se(e,t){i().vd(e,"guest_invite_request_setting_toggled",t)}function le(e,t){i().vd(e,"settings_deeplink_clicked",t)}function ce(e,t){i().vd(e,"guest_invite_request_resolved",t)}function de(e,t){i().vd(e,"resolve_membership_request",t),l().default.logEvent("resolve_membership_request",t.status,t)}function ue(e,t){i().vd(e,"request_access_review_button_clicked",t),l().default.logEvent("request_access_review_button_clicked",t.status,{from:t.from,user_count:t.user_count,request_type:t.request_type})}function pe(e,t){if(i().vd(e,"disable_guest_toggle",t),!0===t.new_value&&!t.keep_existing_guests_if_disabled){const t=p().subscriptionDataStoreInstance.state,o=s().default.state.currentSpaceStore;if(!t||!o)return;const n=d().Th(e,o.id,t);n>0&&me(e,{origin:"space_setting_disable_guest",changedNumber:-n})}}function me(e,t){let{inviteTargets:o,origin:n,changedNumber:r}=t;const s=(0,a().FX)(),m=(0,u().AI)();if(r)return i().vd(e,"workspace_guest_number_update",{new_workspace_guest_count:r,origin:n,subscription_tier:m,domain_type:s}),void l().default.logEvent("workspace_guest_number_update",r,{origin:n,subscription_tier:m,domain_type:s});const g=p().subscriptionDataStoreInstance.state;if(!g||!o)return;const f=d().Be(g).map((e=>e.userId)),v=o.filter((e=>!!(0,c().Gz)(e)||"existingUser"===e.type&&!f.includes(e.value.id)));0!==v.length&&(i().vd(e,"workspace_guest_number_update",{new_workspace_guest_count:v.length,origin:n,subscription_tier:m,domain_type:s}),l().default.logEvent("workspace_guest_number_update",v.length,{origin:n,subscription_tier:m,domain_type:s}))}},967786:(e,t,o)=>{o.d(t,{R9:()=>i,rP:()=>a});var n=()=>o(763884);const r="promoCode";function i(e){let{currentUserId:t,promoCode:o}=e;o?n().A.set({userId:t,key:r,value:o}):n().A.remove({userId:t,key:r})}function a(e){n().A.remove({userId:e,key:r})}},968172:(e,t,o)=>{o.d(t,{A:()=>i});o(581454);class n extends(()=>o(757695))().default{getInitialState(){return{recentPages:new Map,initialized:!1,numDaysForLazyLoading:void 0,recentPageRefreshTimer:void 0,recentPageRefreshIntervalTimer:void 0,userPageVisitListenerReference:void 0}}getIsInitialized(){return this.state.initialized}cleanup(e){this.update((t=>(t.userPageVisitListenerReference&&(o(941541).Ay.removeListener(t.userPageVisitListenerReference,e),t.userPageVisitListenerReference=void 0),t.recentPageRefreshTimer&&(clearTimeout(this.state.recentPageRefreshTimer),t.recentPageRefreshTimer=void 0),t.recentPageRefreshIntervalTimer&&(clearInterval(this.state.recentPageRefreshIntervalTimer),t.recentPageRefreshIntervalTimer=void 0),t)))}getRecentPagesWithStores(e,t){const n=o(351360).default.state.currentSpaceStore;return n?t.map((t=>({...t,store:o(630116).Bv.createChildStore(n.getPagesStore(),{table:o(179034).ev,id:t.pageId,spaceId:e})}))):[]}set(e,t){const o=this.getRecentPagesWithStores(e,t);this.update((t=>(t.recentPages.set(e,o),t.initialized=!0,t))),this.emit()}get(e){return this.state.recentPages.get(e)}getWithoutSubscribing(e){return o(17022).A.withListenerIgnored((()=>this.get(e)))||[]}}const r=new n;(0,o(604341).exposeDebugValue)("globalRecentPagesStore",r);const i=r},968307:(e,t,o)=>{o.d(t,{Z:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("checkboxCircle",{viewBox:"0 0 22 23",svg:(0,n.jsx)("circle",{cx:"11",cy:"11.5",r:"10",stroke:"#E2E1DE",strokeWidth:"2"})})},969141:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isActive:!1}}}const r=new n},969197:(e,t,o)=>{o.d(t,{Le:()=>h,OW:()=>_,Rg:()=>y,T:()=>g,TL:()=>f,aI:()=>v,d1:()=>b,xK:()=>m});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(581454),o(737550);var n=()=>o(700500),r=()=>o(980914),i=()=>o(351360),a=()=>o(861841),s=()=>o(712505),l=()=>o(630116),c=()=>o(502438),d=()=>o(962845),u=()=>o(108944),p=()=>o(792002);function m(e){return!e.isPhone}function g(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&e instanceof l().Bv)return e;let t=e;for(;;){if(t=t.getRecordStoreUIParent(),!t)return;if(t&&t instanceof l().Bv&&t!==e)return t}}function f(e){const t=g(e);if(t)return u().Nq(t)}function v(e){const t=e.getType(),o=e.getFormat(),i=e.getModel(),a=e.getProperties();if(t&&i)return t&&(0,n().Db)(t,o)&&"factory"!==t&&!(0,n().$I)(t)?e.getBlockTitleStore():i.isInlineCollectionView()?e.getTitleStore():i.isType(n().IA)&&a&&a.caption?e.getCaptionStore():t===n().xd.table?r().Jo({simpleTableStore:e,rowIndex:0,columnIndex:0}):void 0}function h(e){const t=g(e);if(t)return t&&(t===i().default.state.mainEditorCurrentBlockStore||s().default.state.open&&t===s().default.state.targetStore||t.isPost())}function _(e){const{stores:t,phase:o}=c().default.state;return 1===t.length&&t[0]===e&&o===c().SelectionPhase.Editing}function b(e){const{stores:t,phase:o}=c().default.state,n=new Set(t.map((e=>e.id))),r=u().g7(e),i=n.has(e.id),s=r.some((e=>n.has(e.id))),l=i||s;return!(o!==c().SelectionPhase.Selected||!l||a().Ay.state.isDragging)}function y(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){const t=(0,d().BO)(e);if(t){const e={multiSelection:t,mode:"editing",forceExtendAnnotations:{}};return(0,p().O7)(e)}}return e.map((e=>e.getTitleValue())).join("\n")}},969523:(e,t,o)=>{o.d(t,{q:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zm10.584 8.375H15.5a.875.875 0 0 0 .875-.875v-7.5a.875.875 0 0 0-.875-.875h-2.541zm-1.25-9.25H8.292v9.25h3.417zm-7.209 0a.875.875 0 0 0-.875.875v7.5c0 .483.392.875.875.875h2.542v-9.25z"})},r=(0,o(340498).wt)("viewBoard",n)},970330:(e,t,o)=>{o.d(t,{X:()=>s,v:()=>a});var n=()=>o(644914),r=()=>o(946141);const i=o(496603).nF((e=>{o(989423).mt(e,{created_page:!0})}),864e5,{trailing:!1});function a(e,t){const{teamStore:o,new_page_id:a,...s}=t;let l=60;"chart"===t.view_type&&(l=1),r().tw(e,"create_block",`create_block-${t.type}-${t.from}`,l,{store:o,...s}),"page"===t.type&&(r().rP(e,"create_page",{store:o,...s,new_page_id:a,...(0,n().hX)({environment:e})}),i(e))}function s(e,t){"onboarding"===t.from?function(e,t){const{teamStore:o,...n}=t;r().rP(e,"create_onboarding_page",{store:o,...n})}(e,{from:t.from,teamStore:t.teamStore,forkedTemplateId:t.pageId}):a(e,{type:"page",from:t.from,teamStore:t.teamStore,new_page_id:t.pageId,creating_block_id:t.pageId})}},970585:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{focus:{section:void 0,indexLocal:void 0,indexGlobal:void 0,footerFocused:!1,isInitialized:!1}}}setState(e){super.setState({...e,focus:{...e.focus,isInitialized:!0}})}update(e){this.setState(e({...this.state}))}unsetFocus(){this.setState({...this.state,focus:{section:void 0,indexLocal:void 0,indexGlobal:void 0,footerFocused:!1}})}}const r=n},972435:(e,t,o)=>{o.d(t,{A:()=>i});var n=()=>o(662303),r=()=>o(959013);const i=new class{constructor(){this.intl=void 0;const e=(0,r().MT)();this.intl=(0,r().EY)({locale:n().locale,defaultLocale:"en-US",messages:n().D},e)}formatMessage(e,t){return this.intl.formatMessage(e,t)}formatNumber(e,t){return this.intl.formatNumber(e,t)}getIntl(){return this.intl}isEnglish(){return n().locale.toLowerCase().startsWith("en")}}},972911:(e,t,o)=>{o.d(t,{J:()=>h,Ut:()=>f,V7:()=>g,ZI:()=>v,nO:()=>m,oV:()=>_});o(16280);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(591779),s=()=>o(495989),l=()=>o(317909),c=()=>o(755199),d=()=>o(351360),u=()=>o(337567),p=()=>o(576590);const m=o(757695).default.createValue(void 0,{name:"AiOnboardingQueuedSelectedStore"});function g(){const{currentUserSettingsStore:e}=d().default.state;if(!e||!e.isReady())return;const t=e.getSettings();return t?t.ai_assistant_tooltips_onboarding_phase??"space_for_ai":void 0}function f(e){"space_for_ai"===g()&&v(e)}function v(e){const t=g();if(void 0===t)throw new Error("Assertion failure, AI onboarding state is undefined!");const o=s().aD.indexOf(t);if(-1===o)throw new Error(`Assertion failure, ${t} is not a valid AI onboarding state!`);if(o<s().aD.length-1){const{currentUserSettingsStore:t}=d().default.state;if(!t)return;const n=s().aD[o+1];l().createAndCommit({userAction:"AiOnboardingActions.advanceAIOnboardingStage",environment:e,canUndo:!0,perform:e=>{c().mJ({userSettingsStore:t,transaction:e,data:{ai_assistant_tooltips_onboarding_phase:n}})},userId:t.id}),"complete"===n&&(0,p().setAssistantOnboardingPhase)(e,{phase:"complete",transactionUserAction:"AiOnboardingActions.advanceAIAssistantOnboardingPhase.fromAiTooltips",userSettingsStore:t})}}function h(e){const t=(0,r().v3)(),o=(0,i().K8)((()=>{const e=(0,u().K1)();return!!e&&e.isStreaming()}),[]),s="completionPopup"===e.type&&"results"===e.stage&&!e.loading,l="assistantCompletionPopup"===e.type&&"results"===e.stage&&!o,c=s||l,d=(0,a().ZC)(c);(0,n.useEffect)((()=>{d&&!c&&"refine_ai_response"===g()&&v(t)}),[c,d,t])}function _(e){const t=(0,r().v3)(),o="results"===e.stage&&e.loading,i=(0,a().ZC)(o);(0,n.useEffect)((()=>{o&&!i&&"ask_ai_anything"===g()&&v(t)}),[o,i,t])}},973189:(e,t,o)=>{o.d(t,{A:()=>i,d:()=>n});let n=function(e){return e.Members="members",e.Groups="groups",e.Guests="guests",e.Reprovisioning="reprovisioning",e.Requests="requests",e}({});class r extends(()=>o(757695))().default{getInitialState(){return{currentTab:n.Members,limitMembers:!0,limitGuests:!0,limitTeamGuests:!0,membersFilter:"",guestsFilter:"",teamGuestsFilter:"",groupsFilter:"",groupNameInputValue:"",upsellModalOpen:!1,sorts:{members:{group:"members",by:"role",asc:!1},guests:void 0,team_guests:void 0}}}}const i=r},973229:(e,t,o)=>{o.d(t,{O:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{currentScreen:"none",selection:{},status:"",sessionId:"",analyticsFrom:"unknown",authUrl:void 0,isConnected:!1,isDisconnecting:!1,isLoaded:!1}}}const r=new n},973618:(e,t,o)=>{o.d(t,{E:()=>n});const n=o(757695).default.createValue(!1,{name:"OpenPageUpdatesTabFromEmailStore"})},973891:(e,t,o)=>{o.d(t,{Gy:()=>c,Qn:()=>u,T_:()=>l,yQ:()=>s,zN:()=>d});var n=()=>o(661920),r=()=>o(246826),i=()=>o(317909),a=()=>o(184701);function s(e){let{examplePageStores:t,collectionViewBlockStore:o,eventProperties:n}=e;a().b.setState({visible:!0,examplePageStores:t,eventProperties:n,collectionViewBlockStore:o})}function l(){a().b.setState({visible:!1})}function c(){if(a().b.state.visible)return a().b.state.collectionViewBlockStore.id}function d(){return a().b.state.visible}function u(e){const t=a().b.state.examplePageStores;t&&0!==t.length&&(n().VN({environment:e,from:"empty_space_click",preventAnimation:!0}),i().createAndCommit({environment:e,perform:e=>{for(const o of t)r().zv({store:o,data:{alive:!1},transaction:e})},userAction:"workflowTemplates.postInstallPills.deleteSamplePages",canUndo:!0}),a().b.setState({...a().b.state,examplePageStores:t}))}},975533:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(633892).A)},975971:(e,t,o)=>{o.d(t,{A:()=>r});o(16280);const n=new(o(848776).U)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{let{spaceId:n}=t;if(n.includes("|"))throw new Error("Invalid spaceId, you're likely passing a spaceUserId instead");const r=await Promise.resolve().then(o.bind(o,449506)),i=await r.callApi({eventName:"getFeatureBillingData",environment:e,data:{spaceId:n},headers:(0,o(386164).WS)({cellId:void 0,spaceId:n})});if("success"===i.type)return i.data}));o(604341).exposeDebugValue("FeatureBillingDataStore",n);const r=n},976618:(e,t,o)=>{o.d(t,{E:()=>r});o(581454);var n=()=>o(862387);function r(e,t){const o={page_layout_schema:void 0,page_info_layout_schema:void 0,form_layout_schema:void 0};return(0,n().Ub)(e,((e,n)=>{const r=n.area;if("views_main_tab_modules"===r)o.views_main_tab_modules||(o.views_main_tab_modules={}),o.views_main_tab_modules[n.viewId]||(o.views_main_tab_modules[n.viewId]=[]),o.views_main_tab_modules[n.viewId]=e.map(((e,o)=>t(e,{...n,index:o})));else if("form_conditional_modules"===r){o.form_conditional_modules||(o.form_conditional_modules={});for(let r=0;r<e.length;r++){const i=e[r];o.form_conditional_modules[i.id]=t(i,{...n,moduleId:i.id})}}else o[r]||(o[r]=[]),o[r]=e.map(((e,o)=>t(e,{...n,index:o})))})),o}},977239:(e,t,o)=>{o.d(t,{jI:()=>y,rT:()=>S,M2:()=>w});o(898992),o(672577),o(581454);var n=()=>o(617871),r=()=>o(857639),i=()=>o(206267),a=()=>o(506391),s=()=>o(973647);const l=(0,o(583835).Dv)("importSalesforceReport");var c=()=>o(989423),d=()=>o(572088),u=()=>o(972435),p=()=>o(351360),m=()=>o(53137),g=()=>o(994641),f=()=>o(901389),v=()=>o(357625),h=()=>o(510683),_=()=>o(496414);const b=(0,o(959013).YK)({SalesforceReportSyncFailed:{id:"salesforce.reportSyncFailed",defaultMessage:"Failed to sync Salesforce report: {reportId}. Error: {error}"},SalesforceInvalidReportUrl:{id:"salesforce.invalidReportUrl",defaultMessage:"Invalid Salesforce report URL"},SalesforceAuthorizationError:{id:"salesforce.unauthorizedAccess",defaultMessage:"Unauthorized Error: Invalid Salesforce credentials."},SalesforceAuthenticationSuccess:{id:"salesforce.successfulAuth",defaultMessage:"Successfully established Salesforce connection"},SalesforceAuthenticationInvalidDetails:{id:"salesforce.invalidDetails",defaultMessage:"Invalid Details"}});async function y(e){const{environment:t,from:o,spaceId:i,flowId:a}=e;(0,c().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"salesforce",actionType:"admin_auth_initiated",flowId:a}}});try{if(!t.currentUser.id)return f().rG({message:u().A.formatMessage(b.SalesforceAuthenticationInvalidDetails)}),void _().V();const e=m().A.integrations.state.find((e=>e.id===n().mn));if(!e)return;const r=await h().En({environment:t,integration:e,spaceId:i,from:o});(0,c().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"salesforce",actionType:"admin_auth_status",flowId:a,status:s().Q.isSuccess(r)?"success":"failed"}}}),s().Q.isFail(r)&&(g().A.reset(),f().rG({message:u().A.formatMessage(b.SalesforceAuthorizationError)})),_().V()}catch(l){(0,c().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"salesforce",actionType:"admin_auth_status",flowId:a,status:"failed"}}}),r().log({level:"error",from:"salesforceActions",type:"authenticateWithSalesforce",data:{message:"Failed to authenticate with Salesforce",miscDataToConvertToString:{err:l}}})}}function S(e){const{environment:t,from:o,action:n}=e,{currentSpaceStore:r}=p().default.state;if(!r)return;const a=(0,i().JW)();g().A.setState({action:n,from:o,flowId:a,open:!0,selectedAccess:"double_auth"}),(0,c().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"salesforce",actionType:"admin_auth_render",flowId:a}}})}async function w(e){const{url:t,environment:o,integration:i,blockStore:s}=e,c=(0,d().jw)(n().mn);if(0===c.length);else{var p,m;const e=(0,a().WS)({url:t,integration:i}),n=null===(p=e.find((e=>"Id"===e.id)))||void 0===p||null===(p=p.values[0])||void 0===p?void 0:p.toString(),d=null===(m=e.find((e=>"instanceUrl"===e.id)))||void 0===m||null===(m=m.values[0])||void 0===m?void 0:m.toString();if(!n||!d)return void f().f1(u().A.formatMessage(b.SalesforceInvalidReportUrl));r().log({level:"debug",from:"salesforceActions",type:"startReportImport",data:{miscDataToConvertToString:{spaceId:s.getSpaceId(),parentBlockId:s.id,reportId:n,instanceUrl:d}}});const h=(0,v().UT)(o,l,{spaceId:s.getSpaceId(),botIds:c.map((e=>e.id)),parentBlockId:s.id,report:{instanceUrl:d.toString(),reportId:n.toString(),reportUrl:t}});for await(const t of h){var g;if("in_progress"!==t.taskStatus)if("success"===t.taskStatus&&r().log({level:"info",from:"salesforceActions",type:"reportImportCompleted",data:{miscDataToConvertToString:{spaceId:s.getSpaceId(),parentBlockId:s.id,reportId:n,instanceUrl:d}}}),"failure"===t.taskStatus||"dead"===t.taskStatus||"timeout_before_execution"===t.taskStatus||"retryable_failure"===t.taskStatus)if(t.error)f().f1(u().A.formatMessage(b.SalesforceReportSyncFailed,{reportId:n,error:null===(g=t.error)||void 0===g?void 0:g.message}))}}}},977390:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isMeasuring:!1}}}const r=new n},979004:(e,t,o)=>{async function n(){const e=await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,128848,23));return await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,690318,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,777099,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,675624,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,450271,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,872415,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,415026,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,557022,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,487336,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,322248,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,670478,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,725723,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,944511,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,987123,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,805651,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,691113,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,525365,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,360869,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,45293,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,447839,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,570568,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,200763,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,84051,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,776110,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,37099,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,213028,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,932048,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,747782,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,812420,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,973980,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,86378,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,734619,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,375538,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,700554,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,355025,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,564312,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,837723,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,896976,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,172514,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,465903,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,560463,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,869913,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,525294,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,918713,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,10116,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,786545,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,103801,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,980064,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,30260,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,275545,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,865882,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,265961,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,604201,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,655877,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,35177,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.bind(o,23737)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,20596,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,539814,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,697376,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,132821,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,419700,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,143554,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,230905,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,916167,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,39535,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,229405,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,152342,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,27768,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,14183,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,247702,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,701396,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,841648,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,75342,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,599562,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,864252,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,194604,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,218619,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,43537,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,696966,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,654793,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,770132,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,359587,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,182769,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,247501,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,71260,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,217822,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,88835,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,328176,23)),await Promise.all([o.e(78205),o.e(85250),o.e(92214)]).then(o.t.bind(o,60083,23)),e}o.r(t),o.d(t,{PrismLanguages:()=>r,importPrism:()=>n});let r=function(e){return e.abap="abap",e.agda="agda",e.arduino="arduino",e.bash="bash",e.basic="basic",e.bnf="bnf",e.c="c",e.clike="clike",e.clojure="clojure",e.coffeescript="coffeescript",e.coq="coq",e.cpp="cpp",e.csharp="csharp",e.css="css",e.cssExtras="css-extras",e.dart="dart",e.dhall="dhall",e.diff="diff",e.docker="docker",e.ebnf="ebnf",e.elixir="elixir",e.elm="elm",e.erlang="erlang",e.flow="flow",e.fortran="fortran",e.fsharp="fsharp",e.gherkin="gherkin",e.glsl="glsl",e.go="go",e.graphql="graphql",e.groovy="groovy",e.haskell="haskell",e.hcl="hcl",e.html="html",e.idris="idris",e.java="java",e.javascript="javascript",e.json="json",e.jsx="jsx",e.julia="julia",e.kotlin="kotlin",e.latex="latex",e.less="less",e.lisp="lisp",e.livescript="livescript",e.llvm="llvm",e.lua="lua",e.makefile="makefile",e.markdown="markdown",e.markup="markup",e.mathematica="mathematica",e.matlab="matlab",e.mermaid="mermaid",e.nasm="nasm",e.nix="nix",e.notion="notion",e.objectivec="objectivec",e.ocaml="ocaml",e.pascal="pascal",e.perl="perl",e.php="php",e.powershell="powershell",e.prolog="prolog",e.protobuf="protobuf",e.purescript="purescript",e.python="python",e.r="r",e.racket="racket",e.reason="reason",e.ruby="ruby",e.rust="rust",e.sass="sass",e.scala="scala",e.scheme="scheme",e.scss="scss",e.smalltalk="smalltalk",e.solidity="solidity",e.sql="sql",e.swift="swift",e.toml="toml",e.tsx="tsx",e.typescript="typescript",e.vbnet="vbnet",e.verilog="verilog",e.vhdl="vhdl",e.visualBasic="visual-basic",e.wasm="wasm",e.xml="xml",e.yaml="yaml",e}({})},979251:(e,t,o)=>{o.d(t,{j:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0m1.25 0a6.375 6.375 0 0 0 11.208 4.157L9.65 10.632a.63.63 0 0 1-.274-.517v-6.46A6.376 6.376 0 0 0 3.625 10m12.75 0c0-.935-.201-1.823-.563-2.623l-4.65 2.772 4.39 2.986A6.35 6.35 0 0 0 16.375 10m-1.187-3.706a6.37 6.37 0 0 0-4.563-2.639v5.36z"})},r=(0,o(340498).wt)("viewChart",n)},980585:(e,t,o)=>{o.d(t,{n:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("roundedCheck",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M6.00879 11.4033C5.70605 11.4033 5.45378 11.2829 5.25195 11.042L2.73242 7.99023C2.64453 7.88932 2.58268 7.79167 2.54688 7.69727C2.51107 7.60286 2.49316 7.50521 2.49316 7.4043C2.49316 7.17318 2.56966 6.98275 2.72266 6.83301C2.87891 6.68001 3.07422 6.60352 3.30859 6.60352C3.56901 6.60352 3.78548 6.70931 3.95801 6.9209L5.98926 9.43555L9.97852 3.13184C10.0794 2.97884 10.1836 2.87142 10.291 2.80957C10.4017 2.74447 10.5368 2.71191 10.6963 2.71191C10.9307 2.71191 11.1243 2.78678 11.2773 2.93652C11.4303 3.08626 11.5068 3.27507 11.5068 3.50293C11.5068 3.58757 11.4922 3.67546 11.4629 3.7666C11.4336 3.85775 11.388 3.95215 11.3262 4.0498L6.78027 11.0078C6.60124 11.2715 6.34408 11.4033 6.00879 11.4033Z"})})},980914:(e,t,o)=>{o.d(t,{$O:()=>w,Bp:()=>z,Gl:()=>T,Jo:()=>E,KR:()=>R,MW:()=>k,QP:()=>D,S9:()=>U,Xe:()=>F,b6:()=>j,bS:()=>C,eE:()=>q,gc:()=>N,gx:()=>V,kP:()=>P,o0:()=>A,oC:()=>O,qD:()=>M,qO:()=>L,qg:()=>H,uq:()=>x,wg:()=>B,yv:()=>I});o(898992),o(354520),o(581454),o(737550);var n=()=>o(416504),r=()=>o(179034),i=()=>o(161479),a=()=>o(100622),s=()=>o(763824),l=()=>o(534177),c=()=>o(449506),d=()=>o(415651),u=()=>o(712030),p=()=>o(38337),m=()=>o(921855),g=()=>o(299545),f=()=>o(792002),v=()=>o(644914),h=()=>o(630116),_=()=>o(24157),b=()=>o(439270),y=()=>o(832410),S=()=>o(450519);function w(e){var t;return null===(t=e.getFormat())||void 0===t?void 0:t.table_block_column_order}function k(e){var t;return(null===(t=w(e))||void 0===t?void 0:t.length)||0}function I(e){return e.getContentLength()}function A(e){var t;return null===(t=e.getFormat())||void 0===t?void 0:t.table_block_column_format}function x(e){var t,o;return{headerColumn:null==e||null===(t=e.getFormat())||void 0===t?void 0:t.table_block_row_header,headerRow:null==e||null===(o=e.getFormat())||void 0===o?void 0:o.table_block_column_header}}function C(e){const t=["table","table_row"];return e.map((e=>e.getType())).some((e=>e&&t.includes(e)))}function T(e){const{selection:t,columnIndex:o,rowCount:n}=e,r=t.start.col<=o&&o<=t.end.col;return"column"===t.type&&r&&0===t.start.row&&t.end.row===n-1}function M(e){const{selection:t,rowIndex:o,columnCount:n}=e,r=t.start.row<=o&&o<=t.end.row;return"row"===t.type&&r&&0===t.start.col&&t.end.col===n-1}function P(e){return e.start.col===e.end.col&&e.start.row===e.end.row}function B(){const e="editing"===_().default.state.mode&&_().default.state.multiSelection;if(e)return b().A.findCellFromTextStore(e.start.store)}function R(){const e="editing"===_().default.state.mode&&_().default.state.multiSelection;if(e)return y().A.findFromTextStore(e.start.store)}function E(e){const{simpleTableStore:t,rowIndex:o,columnIndex:n}=e,r=t.getContentStores()[o];if(!r)return;const i=w(t);if(!i)return;const a=i[n];return a?r.getPropertyStore(a):void 0}function D(e){const{cells:t,type:o,theme:n}=e;return t.map((e=>function(e){const{cell:t,type:o,theme:n}=e,r=t.getNode();if(!r)return;const i=d().up(t.getNode()),s=i.cloned.querySelector(`.${p().yHP}`),l=i.cloned.querySelector(`.${p().A8d}`);"column"===o?(s&&(s.style.left="calc(50% - 15px)",s.style.fill=a().Ay.white,s.style.background=n.simpleTableSelectionBorder),l&&(l.style.visibility="hidden")):(l&&(l.style.top="calc(50% - 15px)",l.style.left="-7px",l.style.fill=a().Ay.white,l.style.background=n.simpleTableSelectionBorder),s&&(s.style.visibility="hidden"));return{cloned:i.cloned,rect:DOMRect.fromRect(i.rect)}}({cell:e,type:o,theme:n}))).filter(l().O9)}function N(e,t){const o=S().A.state;if(o.isActive&&o.simpleTableStore===e&&(!t||o.resize===t))return o}function L(e){const{environment:t,cellValue:o,spaceId:n,parentStore:r,theme:i,disableStyleAnnotations:a,disableSuggestionAnnotations:s}=e;return m().S5({environment:t,textValue:o?{value:o,spaceId:n}:void 0,parentStore:r,disableStyleAnnotations:a??!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!0,disableSuggestionAnnotations:s??!1,disableHover:!0,disabled:!0,theme:i,emojiType:(0,u().FN)(t),katex:t.KatexStore.getKatex(),formulaValueTypes:[]})}function F(e){const{simpleTableStore:t,environment:o,includeInline:n}=e;return g().oC(t,{recursivelyLoadAllDiscussions:n,onlyIncludeBlockLevelDiscussions:(0,v().Nk)(o)})}function U(e){const{simpleTableStore:t,lastN:o}=e,n=t.getContentStores(),r=w(t);if(!n||!r)return!1;for(let i=n.length-1;i>Math.max(n.length-1-o,0);i--){const e=n[i].getProperties();if(e&&r.some((t=>t in e&&e[t])))return!0}return!1}function O(e){const{simpleTableStore:t,lastN:o}=e,n=t.getContentStores(),r=w(t);if(!n||!r)return!1;const i=r.slice(-o);return n.some((e=>{const t=e.getProperties();return t&&i.some((e=>e in t&&t[e]))}))}const V={title:!0,text:!0,url:!0,email:!0,person:!0,number:!0,date:!0,phone_number:!0,select:!0,multi_select:!0,status:!0,auto_increment_id:!0,file:!1,checkbox:!1,relation:!1,rollup:!1,formula:!1,created_by:!1,created_time:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,button:!1,location:!1,verification:!1,geo_point:!1},j=200;async function z(e){const{environment:t,collectionViewBlockStore:o}=e,a=o.getCollectionViewSourceCollectionStore();if(!a)return[];const[l]=o.getCollectionViewStores(),d={source:{type:"collection",id:a.id,spaceId:(0,i().e)(a.pointer.spaceId)},collectionView:{id:l.id,spaceId:(0,i().e)(l.pointer.spaceId)},loader:{reducers:{results:{type:"results",limit:j+1,loadContentCover:!1}},searchQuery:void 0,userId:t.currentUser.id,userTimeZone:(0,n().P)()}},u=c().callApi({eventName:"queryCollection",environment:t,data:d,tracking:{src:"simple_tbl_transform"}}),p=await(0,s().nQ)(1e4,u);if(!p.timeout){const{result:e}=p;if("success"===e.type){const t=e.data.result.reducerResults.results;return(t&&"results"===t.type?t.blockIds:[]).map((e=>h().Bv.createChildStore(a,{id:e,table:r().ev})))}}return[]}function q(e){let t;if(0===e.getProps().rowIndex){const o=E({simpleTableStore:e.getProps().simpleTableStore,rowIndex:0,columnIndex:0});o&&(t=(0,f().H4)(o))}else t=E({simpleTableStore:e.getProps().simpleTableStore,rowIndex:e.getProps().rowIndex-1,columnIndex:e.getProps().columnIndex});return t}function H(e){let t;const o=I(e.getProps().simpleTableStore);if(e.getProps().rowIndex===o-1){const n=k(e.getProps().simpleTableStore),r=E({simpleTableStore:e.getProps().simpleTableStore,rowIndex:o-1,columnIndex:n-1});r&&(t=(0,f().J3)(r))}else t=E({simpleTableStore:e.getProps().simpleTableStore,rowIndex:e.getProps().rowIndex+1,columnIndex:e.getProps().columnIndex});return t}},981046:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(354520),o(672577),o(581454);class n extends(()=>o(757695))().default{constructor(){var e;let t,n;super(),e=this;const r=()=>{if("ready"!==this.state.status)return;const e=this.state.prices.map((e=>{const t=Math.floor(100*Math.random()),n=Math.floor(e.unitAmount.amount/100);return new(o(984380).gm)({external_id:e.externalId,product:e.product,billing_interval:e.billingInterval,currency:e.currencyCode,state:e.state,unit_amount:100*n+t})}));this.setPrices(e,this.state.selectedCurrencyCode)};(0,o(604341).exposeDebugValue)("randomizePrices",(function(){let o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("ready"!==e.state.status)return;o!==Boolean(n)&&(n&&(clearInterval(n),n=void 0),o?(t=e.state.prices,n=setInterval(r,1e3),r()):t&&e.setPrices(t,e.state.selectedCurrencyCode))}))}getInitialState(){return{status:"init",prices:[],availableCurrencyCodes:["USD"],selectedCurrencyCode:void 0}}resetExceptSelectedCurrencyCode(){this.update((e=>({...this.getInitialState(),selectedCurrencyCode:e.selectedCurrencyCode})))}waitUntilReady(){return this.waitUntil((()=>"ready"===this.state.status))}setPrices(e,t){this.update((n=>({...n,status:"ready",prices:e,availableCurrencyCodes:(0,o(720665).sb)(e.map((e=>e.currencyCode))),selectedCurrencyCode:this.state.selectedCurrencyCode||t})))}didStartLoading(){this.update((e=>({...e,status:"loading"})))}getPrice(e,t){const{status:n,selectedCurrencyCode:r}=this.state;if("init"===n){var i;const t=null===(i=o(351360).default.state.currentSpaceStore)||void 0===i?void 0:i.id;t&&o(779795).$W({environment:e,spaceId:t})}if("ready"!==n)return{isLoaded:!1,result:void 0};const a=this.state.prices.filter((e=>e.currencyCode===r));return{isLoaded:!0,result:a.find(t)}}get selectedCurrencyCode(){return this.state.selectedCurrencyCode??"USD"}get availableCurrencyCodes(){return this.state.availableCurrencyCodes}get prices(){return this.state.prices}}const r=new n},982254:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{tabs:[],currentTab:{isPinned:!1},unauthorizedIframeUrls:[]}}}const r=new n},982257:(e,t,o)=>{o.d(t,{i:()=>l});o(18107),o(967357),o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M8.875 5.75c.345 0 .625.28.625.625V8.25h1.875a.625.625 0 1 1 0 1.25H9.5v1.875a.625.625 0 1 1-1.25 0V9.5H6.375a.625.625 0 1 1 0-1.25H8.25V6.375c0-.345.28-.625.625-.625"}),(0,n.jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})]})},i=(0,o(340498).wt)("magnifyingGlassPlus",r);var a=()=>o(878377);const s=(0,o(959013).YK)({fullScreenName:{id:"action.fullScreen.name",defaultMessage:"Full screen"}}),l=(0,o(416726).Fw)({key:"full screen",displayName:s.fullScreenName,analyticsName:s.fullScreenName.defaultMessage,svg:i,validators:[a().vXb,a().ISA,a().Wir,a().AU6(a().c5w)],shortcuts:["space"],closeParentMenu:!0,track:{actionName:"full_screen"},action:(e,t,n)=>{let{environment:r,blocks:i}=t;const a=i.at(0);a&&o(797265).iy({environment:r,blockStore:a,callback:e})}})},984380:(e,t,o)=>{o.d(t,{Kq:()=>r,gm:()=>i});var n=()=>o(166386);const r=["student","personal","plus","business","enterprise"];class i{constructor(e){this.lastVersion=void 0,this.externalId=void 0,this.product=void 0,this.billingInterval=void 0,this.unitAmount=void 0,this.state=void 0,this.externalId=e.external_id,this.product=e.product,this.billingInterval=e.billing_interval,this.unitAmount=o(643819).W.fromValue({amount:e.unit_amount,currencyCode:e.currency}),this.state=e.state}get currencyCode(){return this.unitAmount.currencyCode}getMonthlyUnitCost(e){const t=this.getAdjustedUnitAmount(e);return"year"===this.billingInterval?t.withDividedAmount(12):t}getMonthlyCost(e){const{quantity:t,offer:o}=e;return this.getMonthlyUnitCost(o).withMultipliedAmount(t)}getCostPerBillingInterval(e){const{quantity:t,offer:o}=e;return this.getAdjustedUnitAmount(o).withMultipliedAmount(t)}getDiscountPerBillingInterval(e){var t;const{quantity:r,coupon:i,promo:a}=e,s=this.unitAmount.withMultipliedAmount(r),l=i?(0,n().Pz)((0,o(786508).Pq)(i)):void 0;if(i&&this.doesOfferApply(l))return s.withMultipliedAmount((0,n().iJ)(i));let c=0;return null!=a&&a.percent_off&&null!==(t=a.applies_to)&&void 0!==t&&t.includes(this.externalId)&&(c=a.percent_off/100),s.withMultipliedAmount(c)}getAdjustedUnitAmount(e){let t=1;return e&&this.doesOfferApply(e)&&(t=1-(0,n().vk)(e,"decimal_number")),this.unitAmount.withMultipliedAmount(t)}doesOfferApply(e){if(!e)return!1;const t=e.campaign;switch(this.product){case"ai":return"ai_fifty_percent_upgrade"===t||"new_year_2025"===t;case"free":case"student":case"personal":case"sites_custom_hostnames":return!1;case"plus":return"month"===this.billingInterval?["team_three_months","resurrection_offer","lic_25","lic_50"].includes(t):["lic_25","lic_50","team_annual"].includes(t);case"business":return"month"===this.billingInterval?["lic_25","lic_50","business_three_months"].includes(t):["lic_25","lic_50"].includes(t);case"enterprise":return["business_three_months","business_annual"].includes(t);default:(0,o(534177).HB)(this.product)}}}},985315:(e,t,o)=>{o.d(t,{g:()=>s});var n=()=>o(484714),r=()=>o(56366),i=()=>o(351360),a=()=>o(613240);function s(e){let{spaceId:t}=e;const o=(0,n().v3)(),s=(0,r().K8)((()=>{var e;return null===(e=i().default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit()}),[]);return(0,r().K8)((()=>{if(t&&s)return a().A.getData(o,{spaceId:t})}),[o,t,s])}},985608:(e,t,o)=>{o.d(t,{_:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("aiImproveWriting",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8.68359 1.22168V3.32031C8.68359 3.68945 8.36914 4.00391 7.99316 4.00391C7.62402 4.00391 7.30957 3.68945 7.30957 3.32031V1.22168C7.30957 0.845703 7.62402 0.53125 7.99316 0.53125C8.36914 0.53125 8.68359 0.845703 8.68359 1.22168ZM10.8506 4.22266L12.3203 2.75293C12.5801 2.48633 13.0244 2.48633 13.2842 2.74609C13.5508 3.0127 13.5508 3.45703 13.291 3.7168L11.8213 5.18652C11.5615 5.45312 11.1104 5.45312 10.8506 5.19336C10.5908 4.92676 10.584 4.48242 10.8506 4.22266ZM4.16504 5.18652L2.70898 3.70996C2.44922 3.4502 2.44922 3.00586 2.70898 2.74609C2.96875 2.48633 3.41309 2.49316 3.67969 2.75293L5.13574 4.22266C5.39551 4.48242 5.39551 4.92676 5.12891 5.19336C4.86914 5.45312 4.4248 5.44629 4.16504 5.18652ZM13.4414 14.7705L6.94727 8.24219C6.62598 7.91406 6.61914 7.37402 6.94727 7.02539C7.26855 6.69043 7.83594 6.69043 8.16406 7.02539L14.6582 13.5537C14.9863 13.8887 14.9863 14.4287 14.6582 14.7705C14.3438 15.1055 13.7764 15.1055 13.4414 14.7705ZM1.1709 7.35352H3.27637C3.65234 7.35352 3.9668 7.66797 3.9668 8.03711C3.9668 8.40625 3.65234 8.7207 3.27637 8.7207H1.1709C0.801758 8.7207 0.487305 8.40625 0.487305 8.03711C0.487305 7.66797 0.801758 7.35352 1.1709 7.35352ZM14.8154 8.7207H12.7168C12.3477 8.7207 12.0332 8.40625 12.0332 8.03711C12.0332 7.66797 12.3477 7.35352 12.7168 7.35352H14.8154C15.1914 7.35352 15.5059 7.66797 15.5059 8.03711C15.5059 8.40625 15.1914 8.7207 14.8154 8.7207ZM9.5791 10.04L9.96191 9.65723L7.91113 7.60645C7.76758 7.46289 7.59668 7.42871 7.47363 7.54492C7.33691 7.68164 7.38477 7.8457 7.52148 7.98242L9.5791 10.04ZM2.70215 12.3506L4.17188 10.8945C4.43164 10.6348 4.87598 10.6348 5.13574 10.8945C5.39551 11.1611 5.39551 11.5986 5.12891 11.8652L3.66602 13.3281C3.39941 13.5879 2.95508 13.5811 2.68848 13.3145C2.43555 13.0547 2.43555 12.6104 2.70215 12.3506ZM8.68359 12.7607V14.8594C8.68359 15.2354 8.36914 15.5498 7.99316 15.5498C7.62402 15.5498 7.30957 15.2354 7.30957 14.8594V12.7607C7.30957 12.3916 7.62402 12.0771 7.99316 12.0771C8.36914 12.0771 8.68359 12.3916 8.68359 12.7607Z"})})},986260:(e,t,o)=>{o.d(t,{nC:()=>me,xr:()=>ge,hW:()=>Se,aI:()=>Te,_Y:()=>be,EZ:()=>De,FM:()=>Me,zc:()=>Re,lS:()=>fe,TK:()=>Ce,FN:()=>ye,al:()=>Ee,cM:()=>_e,FP:()=>he,xT:()=>Ae,i3:()=>ke,Qu:()=>Ie,XR:()=>Be,og:()=>Pe,vD:()=>we,RA:()=>xe,u7:()=>ve,zN:()=>ce,rV:()=>le,jk:()=>pe,ou:()=>de,BT:()=>ue,Km:()=>Ne,tu:()=>se});o(16280),o(898992),o(737550);var n=()=>o(908006),r=()=>o(110750),i=()=>o(713998),a=()=>o(857639),s=()=>o(416504),l=()=>o(797573),c=()=>o(919709),d=()=>o(328523),u=()=>o(160568),p=()=>o(901265),m=()=>o(448619),g=()=>o(501666),f=()=>o(829300),v=()=>o(186445),h=()=>o(508496),_=()=>o(502438),b=()=>o(675074),y=()=>o(797265),S=()=>o(778417),w=()=>o(317909),k=()=>o(892632);const I={pageTemplateModalActions:new(o(645873).O2)("pageTemplateModalActions",(async()=>o.e(34208).then(o.bind(o,413677))))};var A=()=>o(44729),x=()=>o(495262),C=()=>o(606952),T=()=>o(482287),M=()=>o(725614),P=()=>o(178658),B=()=>o(286088),R=()=>o(441467),E=()=>o(730307),D=()=>o(964345),N=()=>o(962845),L=()=>o(644914),F=()=>o(749687),U=()=>o(919878),O=()=>o(980914),V=()=>o(393255),j=()=>o(155959),z=()=>o(351360),q=()=>o(295169),H=()=>o(525569),W=()=>o(210737),K=()=>o(375447),G=()=>o(75368),$=()=>o(205682),Y=()=>o(714818),Q=()=>o(899677),Z=()=>o(777932),X=()=>o(24157),J=()=>o(878377),ee=()=>o(972435),te=()=>o(231722),oe=()=>o(731320),ne=()=>o(836251),re=()=>o(969197),ie=()=>o(792002);let ae=!1;function se(e){ae=e}function le(e,t,o){var n,a;const{NativeMobileActionBarStore:s}=e,l=ae||Boolean(null==s?void 0:s.state.enableShouldShowDebugging);if(!function(e,t,o){var n;const{device:a,NativeMobileActionBarStore:s,TabbedRouterStore:l}=e,c=ae||Boolean(null==s?void 0:s.state.enableShouldShowDebugging);if(!a.isMobile)return Le(c,"canShowMobileActionBar = false (reason: !device.isMobile)"),!1;if((0,ne().Al)(e)&&h().default.checkGate({gateName:"mab_consider_navigation_top_page"})){const e=(0,r().Xz)(l.state);if("web"!==e.type||"page"!==(0,r().AE)(e).route.name)return Le(c,"canShowMobileActionBar = false (reason: top page is not a web page)"),!1}if(Q().default.state.open)return Le(c,"canShowMobileActionBar = false (reason: quickFindOpen)"),!1;if(!a.isMobileNative&&K().A.state.open)return Le(c,"canShowMobileActionBar = false (reason: !device.isMobileNative && MentionMenuStore.state.open)"),!1;if(a.isMobileNative&&D().Ay.state.enabled)return Le(c,"canShowMobileActionBar = false (reason: !device.isMobileNative && DictationStore.state.open)"),!1;if(X().default.isEditingComment())return Le(c,"canShowMobileActionBar = false (reason: TextSelectionStore.isEditingComment())"),!1;const d=(0,B().SB)(H().default.state),u=null===(n=q().default.getActiveSession())||void 0===n?void 0:n.hasPendingOperations();if(d||u)return Le(c,"canShowMobileActionBar = false (reason: isCompletionsPopupActive || hasPendingEdits)"),!1;if(!$().A.state.isOpen&&e.device.isMobileNative&&W().A.hasOpenPopups())return Le(c,"canShowMobileActionBar = false (reason: !PageTemplateModalStore.state.open && environment.device.isMobileNative && GlobalPopupStore.hasOpenPopups() > 0)"),!1;if($().A.state.isOpen){var p;const e=$().A.state,t=null===(p=e.collectionContextStore)||void 0===p?void 0:p.normalizedSchemaStore.state;if(!t)return Le(c,"canShowMobileActionBar = false (reason: !collectionSchema)"),!1;const o=(0,i()._g)({schema:t,property:e.property});if(!o||"text"!==o.type||o.ai_inference)return Le(c,"canShowMobileActionBar = false (reason: PageBlockPropertyValueOverlayStore.state.isOpen && propertySchema.type !== text)"),!1}return(!(0,v().Te)()||!h().default.checkGate({gateName:"db_ux_mobile"}))&&(!t.isFormBlock()&&(L().KB(e)&&F().sidebarOpenStore.state?(Le(c,"canShowMobileActionBar = false (reason: sidebarHelpers.sidebarIsExpanded(environment) && sidebarOpenStore.get()"),!1):(0,J().opL)()?!!(0,J().p2L)({environment:e,blocks:[t],publicEditMode:o})||(Le(c,"canShowMobileActionBar = false (reason: !_canEdit)"),!1):(Le(c,"canShowMobileActionBar = false (reason: !currentPageIsNotLocked())"),!1)))}(e,t,o))return Le(l,"shouldShowMobileActionBar = false (reason: !canShowMobileActionBar)"),{canShow:!1,canShowNativeBar:!1,shouldShow:!1};const c=e.device.isMobileNative;if(s&&null!==(n=s.state.menu)&&void 0!==n&&n.type&&!(0,v().fI)())return Le(l,"shouldShowMobileActionBar = true (reason: NativeMobileActionBarStore && NativeMobileActionBarStore.state.menu?.type"),{canShow:!0,canShowNativeBar:c,shouldShow:!0};const d=X().default.state;if("editing"!==d.mode)return Le(l,"shouldShowMobileActionBar = false (reason: TextSelectionStore.state.mode !== editing"),{canShow:!0,canShowNativeBar:c,shouldShow:!1};const u=d.multiSelection,p=(0,N().$W)(u),m=p.some((e=>e.editable.props.disableStyleAnnotations)),g=p.some((e=>e.editable.props.disableMobileActionBar)),f=p.some((e=>e.editable.props.disableComment));return p&&g?(Le(l,"shouldShowMobileActionBar = false (reason: !renderedBlocks || !disableMobileActionBar)"),{canShow:!0,canShowNativeBar:c,shouldShow:!1}):(Le(l,"shouldShowMobileActionBar = true"),{shouldShow:!0,canShowNativeBar:c,disableStyleAnnotations:m,disableComment:f,isEmpty:(0,te().kM)(u)&&0===u.end.index&&0===(null===(a=(0,ie().s6)(u.end.store))||void 0===a?void 0:a.endIndex)})}function ce(){var e;const t=$().A.state;if(!t.isOpen)return!1;const o=null===(e=t.collectionContextStore)||void 0===e?void 0:e.normalizedSchemaStore.state;if(!o)return!1;const n=(0,i()._g)({schema:o,property:t.property});return"text"===(null==n?void 0:n.type)}function de(e){const{environment:t,store:o}=e,{isPhone:n}=t.device,r=t.currentUser.isLoggedIn(),i=o.isCollectionView(),a=o.getAssociatedCollectionStore(),s=Y().A.state.open,l=z().default.state.currentLoadingContainerStore,c=t.RouterStore.state.route,d="page"===c.name&&c.showMoveTo,u=o.getContentStores()[0],p=u&&!u.isEmptyTextBlock();return Boolean(n&&o.isDefined()&&o.canEdit()&&r&&!a&&!i&&!s&&d&&!p&&l&&l.state.ready)}function ue(e,t,o,n){const r=o?o.getType():void 0,i=X().default.state;if("editing"===i.mode)return!t.state.isComposing&&!(0,te().kM)(i.multiSelection)||O().wg()||n&&("quote"===r||"table"===r);const a=e.state.savedTextSelectionStoreState;return!(!a||"editing"!==a.mode)&&!(0,te().kM)(a.multiSelection)}function pe(e){var t;const{NativeMobileActionBarStore:o,device:n}=e;return Boolean(o&&(null===(t=o.state.menu)||void 0===t?void 0:t.type)&&!n.isTablet&&!n.isAndroid&&!(0,j().T)("supportsMobileActionBarNativeActionMenuWithoutIgnoreSelectionArea"))}function me(e){if((0,oe().QT)(e))return!1;const{stores:t}=_().default.state;return t.length>0&&t[0].canEdit()&&!t[0].isNavigableBlock()&&!Boolean(O().wg())}function ge(e,t){return!(0,oe().QT)(e)&&t.canEdit()}function fe(e){"editing"===X().default.state.mode&&(w().createAndCommit({userAction:"mobileActionBarHelpers.handleIndent",environment:e,canUndo:!0,perform:t=>{C().Mf({environment:e,transaction:t,shiftKey:!1})}}),Ne(e,"indent"))}function ve(e){"editing"===X().default.state.mode&&(w().createAndCommit({userAction:"mobileActionBarHelpers.handleUnindent",environment:e,canUndo:!0,perform:t=>{C().Mf({environment:e,transaction:t,shiftKey:!0})}}),Ne(e,"unindent"))}function he(e){w().createAndCommit({userAction:"mobileActionBarHelpers.handleMoveUp",environment:e,canUndo:!0,perform:t=>{C().$P({environment:e,transaction:t,direction:"up"})}}),Ne(e,"move-up")}function _e(e){w().createAndCommit({userAction:"mobileActionBarHelpers.handleMoveDown",environment:e,canUndo:!0,perform:t=>{C().$P({environment:e,transaction:t,direction:"down"})}}),Ne(e,"move-down")}function be(e){const t=_().default.state.stores[0],o=X().default.state;if(t&&"editing"===o.mode){const{multiSelection:n}=o,r=(0,ie().J3)(n.end.store)||(0,ie().H4)(n.start.store),i=t.getParentBlockStore(),a=i&&i.isCalloutV2()&&1===i.getContentLength();w().createAndCommit({userAction:"mobileActionBarHelpers.handleDelete",environment:e,canUndo:!0,perform:e=>{if(a){const t=i.getParentBlockStore();t&&A().zz({childStore:i,parentStore:t,transaction:e})}else y().TF({store:t,transaction:e})}});if(O().wg())w().createAndCommit({userAction:"mobileActionBarHelpers.handleDelete",environment:e,canUndo:!0,perform:t=>{U().xD({environment:e,transaction:t})}});else if(r){const t=(0,re().T)(r);S().hc({environment:e,store:t}),S().Zm(e)}else S().IU({environment:e});Ne(e,"remove")}}function ye(e){f().Gf({environment:e,mentionTypes:{page:!0,heading:!0,createPage:!0,user:!0,inviteUserToWorkspace:!1,inviteUserToPage:!0,bot:!0,date:!0,reminder:!0,templateVariable:!0,group:!0,team:!0,formulaContextVariable:!0}}),Ne(e,"mention")}function Se(e){const t=X().default.state;if("empty"===t.mode){const t=(0,v().ZO)();if(!t)throw new Error("No root store.");S().Lt({environment:e,store:t})}else if((0,te().kM)(t.multiSelection)){const o=(0,re().T)(t.multiSelection.start.store);o&&!o.isEmptyEditableBlock()&&S().Lt({environment:e,store:o})}(0,P().toggleInitialPrompt)({from:"mobile_action_bar",environment:e}),Ne(e,"ai")}function we(e,t){T().po({environment:e,annotation:t}),Ne(e,t[0])}function ke(e,t,o){const{NativeMobileActionBarStore:n}=e;null==n||n.update((e=>({...e,menu:t,shouldRestoreSelectionForMenu:o})))}function Ie(e,t,o){const{NativeMobileActionBarStore:n}=e;null==n||n.update((e=>({...e,isSubMenuOverridden:o,subMenu:t}))),void 0===t?V().VN({environment:e,dismissed:!0}):Ne(e,t.type)}function Ae(e){x().ZS({environment:e}),Ne(e,"redo")}function xe(e){x().tN({environment:e}),Ne(e,"undo")}function Ce(e){g().fi({type:"focusOnly",focus:!0}),Ne(e,c().Ifu.Link)}function Te(e,t,o){const n=_().default.state.stores[0];if(!n)return;const r=X().default.state,i="empty"!==r.mode&&r.multiSelection;i&&!(0,te().kM)(i)?(R().hN({environment:e,blockStore:n,multiSelection:i,formulasModule:o}),Ne(e,"comment",t)):((0,E().l)({environment:e,blockStore:n}),Ne(e,"discuss",t))}function Me(e){m().Wx({environment:e,analyticsFrom:"rich_text_menu"}),Ne(e,"equation")}function Pe(e){S().IU({environment:e}),M().blurActiveElement(),G().A.setState({open:!0}),Ne(e,"templates")}async function Be(e,t){var o;const{currentSpaceViewStore:n,currentSpaceStore:r,mainEditorCurrentBlockStore:i}=z().default.state;if(!n||!r||!i)return;const a=ee().A.getIntl(),c=(0,s().P)(),d=(0,l().B)(t,a),p=((null===(o=i.getModel())||void 0===o||null===(o=o.getRenderTitle({getRecordModel:i.getRecordModel,userTimeZone:c,intl:a}))||void 0===o?void 0:o.length)??0)>0;let m=!1;const g=Date.now();try{Z().A.setState({isDuplicating:!0});const t=await I.pageTemplateModalActions.load();await t.loadAndDuplicatePageTemplate({environment:e,isPrivate:!1,item:d,spaceStore:r,spaceViewStore:n,useMinimalTemplates:!1,initializeStore:i}),m=!0}finally{Z().A.setState({isDuplicating:!1});const t=Date.now()-g;u().hB(e,{from:"mobileApp",success:m,context:"template_pill",template_block_id:d.rootId,target_space_id:r.id,template_duplication_duration_ms:t,public_template_name:d.name,has_existing_title:p})}}function Re(e){!async function(e){var t;const o=_().default.state.stores,n=e.mobileNative&&h().default.checkGate({gateName:"mobile_native_file_upload"})?null===(t=await e.mobileNative.openFilePicker({types:["image","video"]}))||void 0===t?void 0:t.files:await k().dA({multiple:!0,accept:e.device.isIOS?"image/*, video/*":"image/*"}),r=_().default.getCurrentRecordCache(),i=v().y0(e);n&&0!==n.length&&r&&w().createAndCommit({userAction:"mobileActions.takePicture",environment:e,canUndo:!0,perform:t=>{var a;const s=b().$C({environment:e,files:n,inMemoryRecordCache:r,pageWidth:i,transaction:t,spaceId:0!==o.length?o[0].pointer.spaceId:null===(a=(0,v().ZO)())||void 0===a?void 0:a.pointer.spaceId});y().LE({environment:e,blocksToInsert:s,target:o,transaction:t,replaceEmptyTextBlock:!0}),S().IU({environment:e})}})}(e),Ne(e,"take_picture")}function Ee(e){const{device:t}=e,o=t.isMobileNative&&t.isIOS&&t.isPhone;o||S().td({environment:e,stores:_().default.state.stores}),p().WU({environment:e,stores:_().default.state.stores,actionSectionGroupKey:"default",showInput:!1,analyticsFrom:"mobile_more_menu"}),Ne(e,"more"),n().default.afterNextFlush((()=>{o&&M().blurActiveElement()}))}function De(e,t){S().IU({environment:t}),e.store.setState({...e.store.state,isInsertOpen:!1}),Ne(t,"hide_keyboard"),M().blurActiveElement()}function Ne(e,t,o){d().np(e,{itemName:t,from:o})}function Le(e,t){e&&(console.log(t),a().log({level:"info",from:"mobileActionBarHelpers.ts",type:"logShouldShowReason",data:{message:t}}))}},987201:(e,t,o)=>{o.d(t,{A:()=>r,x:()=>i});var n=o(296540);function r(){(0,n.useEffect)((()=>{i()}),[])}const i=o(496603).Oo((async function(){const e=await o(903972).w.load();o(267419).A.setState((0,o(634201).Se)(e))}))},988499:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{teams:[],teamAggregateData:{},lastEmitData:{value:void 0,spaceId:void 0,userId:void 0}}}}const r=new n},989423:(e,t,o)=>{o.d(t,{vd:()=>n().v,ik:()=>y,PZ:()=>S().w,LU:()=>w().U,V4:()=>k().e,TZ:()=>C().T,LM:()=>b().d,_d:()=>x,J1:()=>p,uX:()=>f,ET:()=>c().E,kb:()=>M,u4:()=>r().u,pM:()=>l,cX:()=>i,WU:()=>a().W,mt:()=>_});var n=()=>o(679924),r=()=>o(2220);function i(e){const{environment:t,eventName:o,eventProperties:r,opts:i}=e;(0,n().v)(t,o,r,{...i,sampling:(null==i?void 0:i.sampling)||{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}})}var a=()=>o(999202);const s={};function l(e,t,o,r,i,a){const l=s[o];l&&(clearTimeout(l),delete s[o]),s[o]=setTimeout((()=>{delete s[o],(0,n().v)(e,t,i,a)}),1e3*r)}var c=()=>o(599824),d=()=>o(845710),u=()=>o(313462);async function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=(0,u().I)();if(await d().J1({traits:e}),t)for(const o of e)console.log("trackAnalytics:%c identify","font-weight: bold;",o)}var m=()=>o(627506),g=()=>o(875856);async function f(e){const t=await(0,m()._)(e);t&&g().default.state.isLoggingEnabled&&d().uX({spaceId:t.space_id,spaceData:t})}var v=()=>o(498212),h=()=>o(551625);function _(e,t){if(!e.currentUser.id)return Promise.resolve(void 0);const o=(0,v().ot)(e.currentUser.id);return(0,h().T)({environment:e,userId:o,traits:{...t,user_id:o}})}var b=()=>o(506671);function y(e){return{DO_NOT_USE_commonTrackEvent:t=>{(0,n().v)(e,t.eventName,t.properties)}}}var S=()=>o(233996),w=()=>o(455968),k=()=>o(449918),I=(o(898992),o(354520),()=>o(468006)),A=()=>o(134217);function x(e){var t;const o=e.id,n=e.getSettingsStore().getValue();if(!e.isDefined()||void 0===n)return{team_id:(0,v().Xw)(o),no_team_value:!0};const r=e.getMemberInfoUsingSpaceMembers((0,A().L)())??[];return{team_id:(0,v().Xw)(o),team_current_size:r.length,team_current_num_users:r.filter((e=>"user"===e.entity_type)).length,team_current_num_groups:r.filter((e=>"group"===e.entity_type)).length,team_access_level:(0,I().MA)(n),team_is_default:e.isDefault(),team_has_description:Boolean(e.getDescription()),team_has_icon:Boolean(e.getIcon()),team_top_pages:(null===(t=e.getTeamPagesStore().getValue())||void 0===t?void 0:t.length)??0}}var C=()=>o(268405),T=()=>o(508496);function M(){return"on"===T().default.getEligibleGroup({experimentId:"zendesk",defaultGroup:"unassigned"})}},990261:(e,t,o)=>{o.d(t,{o:()=>i,uk:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{visitId:void 0,startMilliseconds:void 0}}initializeNewPageVisitId(){this.setState({visitId:o(206267).JW(),startMilliseconds:Date.now()})}getCurrentPageVisitId(){return this.getState().visitId}getCurrentPageVisitDuration(){const e=this.getState().startMilliseconds;return void 0===e?void 0:Date.now()-e}}const r=new n,i=new n},991249:(e,t,o)=>{o.d(t,{K:()=>S});o(296540);var n=()=>o(441738),r=()=>o(762433),i=()=>o(959013),a=()=>o(534177),s=()=>o(252105),l=()=>o(901389),c=()=>o(209660),d=()=>o(671263),u=()=>o(600871),p=()=>o(155959),m=()=>o(351360),g=()=>o(57605),f=()=>o(134217),v=()=>o(911964),h=()=>o(749240),_=()=>o(19575),b=()=>o(224701),y=o(474848);async function S(e,t){if("contact_sales"===t.upsell.type)return void(0,_().lK)({openedFrom:t.from});if("contact_account_manager"===t.upsell.type){const e=(0,y.jsx)(i().sA,{id:"upsellActions.referToSalesRep",defaultMessage:"This workspace is part of a managed account. Please contact your account representative to discuss any changes to your subscription."});return void l().f1(e)}const o=t.upsell.product,S=m().default.state.currentSpaceStore;if(!S)return;const w=await g().A.awaitData(e,{spaceId:S.id}),{addOnFeature:k,for_subscription_tier:I}=function(e){let{billingData:t,product:o}=e;return(0,a().Xk)(n().Of,o)?{addOnFeature:o,for_subscription_tier:(0,r().AI)(t)}:{for_subscription_tier:o}}({billingData:w,product:o});s().QP(e,{from:t.from,for_subscription_tier:I,addOnFeature:k});if(!(0,r().Gm)(w)&&["block_limit_sidebar","block_limit_settings","block_limit_banner","database_chart_paywall","delete_blocks_modal","slash_menu","out_of_blocks_toast","forms_increase_file_limit","forms_notion_branding","forms_customize_settings","lic_offer_sidebar"].includes(t.from)&&!k){if(e.device.isMobileBrowser){const o=await d().Xm.load();return void(await o.plans.showPlans({environment:e,from:t.from}))}return void c().Ow({openedFrom:"upsell",upsellType:t.from,currentTab:"plans"})}const A=(0,u().mM)({environment:e})&&("personal"===o||"ai"===o);if(e.device.isMobileNative){if("ai"===o&&!(0,p().T)("supportsAiIAP")){const t=(0,u().Xi)({environment:e})?(0,y.jsx)(i().sA,{id:"upsellActions.noIAPForAIWithExternalPurchaseOption",defaultMessage:"Your workspace does not have unlimited AI. Visit on desktop to purchase Notion AI and go unlimited."}):(0,y.jsx)(i().sA,{id:"upsellActions.noIAPForAIWithoutExternalPurchaseOption",defaultMessage:"Your workspace does not have unlimited AI. Unfortunately, unlimited AI cannot be purchased on mobile."});return void l().f1(t)}if(!A)return}if(!S.canAdmin())return;await b().Ow(e);const x=h().subscriptionDataStoreInstance.state;if(x)if("unsubscribed_admin"===x.type||"subscribed_admin"===x.type)if((0,r().bO)(w))l().f1((0,y.jsx)(i().sA,{id:"subscriptions.paymentMethodUnverified",defaultMessage:"Your payment is being processed. Please try again when your payment has completed."}));else if(f()._7(w,x)){const e=(0,y.jsx)(i().sA,{id:"upsellActions.referToSalesRep",defaultMessage:"This workspace is part of a managed account. Please contact your account representative to discuss any changes to your subscription."});l().f1(e)}else if(A){if(!e.mobileNative)return;if(await f().$(e,S.id,x)>1){const e=(0,y.jsx)(i().sA,{id:"upsellActions.cannotPurchaseOnMobile",defaultMessage:"Unfortunately, your workspace has multiple members and cannot be upgraded on mobile"});return void l().f1(e)}if("stripe"===(null==w?void 0:w.provider)||"mixed"===(null==w?void 0:w.provider))return;e.mobileNative.openUpgradeModal(S.id,t.from)}else if("app_store"!==(null==w?void 0:w.provider)&&"play_store"!==(null==w?void 0:w.provider))await(0,v().F)({environment:e,spaceStore:S,billingData:w,product:o,from:t.from,pageSection:t.pageSection,coupon:t.coupon,isTrial:t.isTrial,dismissMobilePlansModal:t.dismissMobilePlansModal});else{const e=(0,y.jsx)(i().sA,{id:"upsellActions.switchPlanFromInAppPurchase",defaultMessage:"You're currently subscribed through an in-app purchase. To switch plans, cancel your subscription on your mobile device."});l().f1(e)}else t.dontOpenPlansOnCancel||c().Ow({openedFrom:"upsell",upsellType:t.from,currentTab:"plans"})}},991385:(e,t,o)=>{o.d(t,{B:()=>s,S:()=>a});var n=()=>o(869190),r=()=>o(763884);const i="userSessionCount";function a(e){const t=c(e);if(!t)return void l({userId:e,count:1});const{count:o,updatedAt:r}=t;(0,n().aD)(r,!0)!==(0,n().aD)(Date.now(),!0)&&l({userId:e,count:o+1})}function s(e){if(!e)return 0;const t=c(e);return(null==t?void 0:t.count)||0}function l(e){let{userId:t,count:o}=e;const n={count:o,updatedAt:Date.now()};r().A.set({userId:t,key:i,value:n})}function c(e){return r().A.get({userId:e,key:i})}},991699:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const r=new n},992237:(e,t,o)=>{o.d(t,{A:()=>a});var n=()=>o(496506);class r extends(()=>o(757695))().default{constructor(){super(...arguments),this.integrations=new(n().default)((()=>{const e=this.state;return e.loaded?e.integrations:[]}),{debugName:"ComplianceIntegrationStore.integrations"}),this.webhookSubscriptions=new(n().default)((()=>{const e=this.state;return e.loaded?e.webhookSubscriptions:[]}),{debugName:"ComplianceIntegrationStore.webhookSubscriptions"})}getInitialState(){return{loaded:!1,loading:!1}}}const i=new r;(0,o(604341).exposeDebugValue)("ComplianceIntegrationStore",i);const a=i},993553:(e,t,o)=>{o.d(t,{A:()=>g});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(799954),s=()=>o(908521),l=()=>o(959013),c=()=>o(494043),d=()=>o(891078),u=o(474848);const p=(0,l().YK)({placeholder:{defaultMessage:"Heading 2",id:"subheaderBlock.placeholder"}});function m(e,t){const m=(0,l().tz)(),g=(0,r().v3)(),f=(0,r().Y0)(),v=(0,n.useRef)(null),h=(0,d().pW)(e.store,!0),_=(0,d().qu)(e.store),b=(0,i().K8)((()=>e.store.getBlockTitleStore()),[e.store]),y=(0,i().K8)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),S=(0,o(401497).IS)((t=>{const o=(f.isMobile||e.smallerHeaders?1.25:s().BY)*s().Df,n=f.isMobile||e.smallerHeaders?1.25:s().BY;return{root:{display:"flex",width:"100%",...h},toggle:{height:`${o}em`,marginTop:f.isMobile?1:a().nE.paddingTop,marginBottom:a().nE.paddingBottom},headerText:{...a().nE,...(0,s().On)({fontSizeValue:n,fontFamily:_})},headerTextPlaceholder:{...y?{color:t.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{WebkitTextFillColor:t.headerBlockPlaceholderTextColor}}}}),[f.isMobile,e.smallerHeaders,h,_,y]),w=(0,i().K8)((()=>c().PQ(e.store)),[e.store]),k=(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o(246722).A,{tagName:"h3",disabled:e.disabled,store:b,placeholder:m.formatMessage(p.placeholder),placeholderStyle:S.headerTextPlaceholder,style:S.headerText,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:o(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,u.jsx)(o(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]});return(0,d().NW)(e.store,t,(0,n.useMemo)((()=>({renderedType:"sub_header",getNode:()=>v.current,getBlockStore:()=>e.store,activate(){c().qj(g,e.store,e.hideContent)}})),[g,e.hideContent,e.store]),(0,u.jsx)("div",{ref:v,style:{...S.root,...e.style},children:w?(0,u.jsx)(o(60676).A,{store:e.store,toggleStyle:S.toggle,childrenStyleWhenToggleable:{display:"flex"},hideContent:e.hideContent,disabled:e.disabled,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag,children:k}):k}))}const g=n.memo(n.forwardRef(m),o(821062).A)},994641:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{open:!1}}getFlowId(){return this.state.open&&this.state.flowId}}const r=new n,i=r;(0,o(604341).exposeDebugValue)("SalesforceStore",r)},994877:(e,t,o)=>{o.d(t,{SI:()=>S,be:()=>w});o(16280),o(898992),o(803949),o(908872);var n=()=>o(662303),r=()=>o(857639),i=()=>o(402390),a=()=>o(762433),s=()=>o(235280),l=()=>o(763824),c=()=>o(449506),d=()=>o(780054),u=()=>o(989423),p=()=>o(186445),m=()=>o(95286),g=()=>o(972435),f=()=>o(646736),v=()=>o(875856),h=()=>o(351360),_=()=>o(57605),b=()=>o(148024),y=()=>o(755636);async function S(e){const{environment:t,from:o}=e;b().$Z(t,{from:o});const i=v().default.state;if(t.device.isMobileNative){const e=(0,p()._m)(t),o=`${t.device.os} v${t.device.mobileAppVersion}(${t.device.version})`,n="team@makenotion.com",r=`Help with my account ${null==e?void 0:e.getEmail()} on ${o}`,i=()=>{const e=encodeURIComponent(r);y().f({environment:t,url:`mailto:${n}?subject=${e}`})},a=t.mobileNative;a&&a.api.submitUserFeedback?a.submitUserFeedback({sendToEmailAddress:n,subject:r},i):i()}else if(i.isZendeskEnabled&&(0,u().kb)()){const{userHighestPlanType:o,isSalesAssistedPlan:a}=(0,m().N1)(t),l=await w({environment:t,isSalesAssistedPlan:a});(0,s().q)({type:"decagon",locale:n().locale,analyticsSettings:i,decagonInitializeArgs:l,onError:e=>{r().log({level:"error",from:"decagonHelpers",type:"initializeDecagon",error:{message:e.message}})},userHighestPlanType:o,isSalesAssistedPlan:a,cookieService:t.cookieService,initialQuery:e.prepopulatedContent}),b().DQ(t)}}async function w(e){var t,o,n,s,u;const p=e.environment,m=g().A.getIntl(),v=null===(t=h().default.state.currentUserStore)||void 0===t?void 0:t.getModel(),b=(null===(o=h().default.state.currentSpaceViewStore)||void 0===o||null===(o=o.getModel())||void 0===o?void 0:o.getSpaceId().toString())??"",y=b?await _().A.awaitData(p,{spaceId:b}):void 0,S=(null===(n=h().default.state.currentSpaceStore)||void 0===n||null===(n=n.getModel())||void 0===n?void 0:n.getName())??"",w=(0,a().eh)(y,"ai"),I=p.currentUser.id??"",A=(null==v?void 0:v.getFullName(m))??"",x=(null==v?void 0:v.getEmail())??"",C=null===(s=h().default.state.currentSpaceStore)||void 0===s?void 0:s.getRole(),T=(0,f().sE)(h().default.state.currentSpaceStore,I),M=null==T?void 0:T.getMembershipType(),P=(0,a().AI)(y),B=(null===(u=h().default.state.currentUserSettingsStore)||void 0===u||null===(u=u.getSettings())||void 0===u?void 0:u.preferred_locale)||i().q,R=B.split("-")[0],E=await async function(e){const{environment:t,workspaceId:o}=e,n=[{keys:["countryCode"],getterFn:async()=>({countryCode:await k(t)??"US"})},{keys:["stripeCustomerId","activeSubscriptionPlatform","subscriptionPlanId"],getterFn:async()=>{var e;const n=await c().callApi({eventName:"getBillingData",environment:t,data:{spaceId:o}});if("success"!==n.type)return null;const r=n.data.billingData;return r?{stripeCustomerId:"admin"===r.type?r.externalId??"":"",activeSubscriptionPlatform:r.provider??null,subscriptionPlanId:(null===(e=r.subscription)||void 0===e?void 0:e.items[0].price.externalId)??""}:null}}],i=await(0,l().lX)(n,n.length,(async e=>{let{getterFn:t}=e;try{return await t()}catch(o){return void r().log({level:"error",from:"decagonHelpers",type:"fetchAsyncDecagonInitializeArgs",error:{message:o instanceof Error?o.message:"unknown error instance type"}})}}));return n.reduce(((e,t,o)=>{let{keys:n}=t;return void 0===i[o]?(r().log({level:"error",from:"decagonHelpers",type:"fetchAsyncDecagonInitializeArgs",error:{message:`Failed to fetch ${n.join(", ")}`}}),e):(n.forEach((t=>{e={...e,[t]:i[o]&&t in i[o]?i[o][t]:void 0}})),e)}),{})}({environment:p,workspaceId:b});return{countryCode:"US",...E,planType:P,membershipType:M,workspaceId:b,workspaceName:S,userId:I,userName:A,email:x,userAccessLevel:C,locale:B,language:R,appVersion:`Notion v${d().A.version}${p.device.desktopAppVersion?` desktop v${p.device.desktopAppVersion}`:""}${p.device.mobileAppVersion?` mobile v${p.device.mobileAppVersion}`:""}`,platform:p.device.deviceType,salesAssistedPlan:e.isSalesAssistedPlan,hasAiAddOn:w}}async function k(e){var t;const o=await c().callApi({eventName:"getGeoIpLocation",environment:e,data:{}});if("success"!==o.type)return;return null===(t=o.data)||void 0===t?void 0:t.countryCodeFromIp}},995444:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{focused:!1}}}const r=n},997583:(e,t,o)=>{o.d(t,{z:()=>a});var n=o(296540),r=()=>o(56366),i=()=>o(472090);function a(){const[e,t]=(0,n.useState)(0),[o]=(0,n.useState)((()=>new(i().E))),a=(0,n.createRef)();return(0,n.useEffect)((()=>{if(a.current)return o.observe(a.current),()=>{o.destroy()}}),[a,o]),(0,r().K8)((()=>{e!==o.rect.state.width&&t(o.rect.state.width)}),[e,o.rect]),[a,e]}},998109:(e,t,o)=>{o.d(t,{n:()=>m});var n=o(296540),r=()=>o(56366),i=()=>o(401497),a=()=>o(100622),s=()=>o(645873);const l=new(s().O2)("tourTutorial",(()=>o.e(287).then(o.bind(o,225603)))),c=(0,s()._h)(l,(e=>e.TourTutorialContent));var d=()=>o(594607),u=()=>o(846955),p=o(474848);function m(e){let{children:t,step:o,wrapperStyle:s={},highlightStyle:l={},isFullWidth:m=!0,showSidebarOverlays:f=!0,showContentOverlays:v=!0,onBackButtonClick:h,onNextButtonClick:_,tutorialMetadata:b}=e;const y=(0,r().K8)((()=>u().default.state),[]),S=n.useRef(null),w=(0,i().IS)((e=>({highlight:{background:"dark"===e.mode?a().Ay.whiteWithAlpha(.05):a().Ay.blackWithAlpha(.05),boxShadow:e.outlineBlueInputBoxShadow,borderRadius:4,position:"relative",zIndex:1e3,...l},opacityLayer:{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:999,background:e.surface.wash,opacity:.6}})),[l]);return"inactive"===y.type||y.step!==o?t:(0,p.jsxs)(p.Fragment,{children:[m?(0,p.jsx)(g,{ref:S,style:s,children:t}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:w.highlight,children:(0,p.jsx)(g,{ref:S,style:s,children:t})}),v&&(0,p.jsx)("div",{style:w.opacityLayer})]}),(0,p.jsx)(d().B,{calloutId:"sidebar_tour",shouldShow:!0,children:(0,p.jsx)(c,{step:y.step,contentRef:S,showSidebarOverlays:!!m&&f,onNextButtonClick:_,onBackButtonClick:h,tutorialMetadata:b})})]})}const g=n.forwardRef((function(e,t){let{children:o,style:n}=e;return(0,p.jsx)("div",{ref:t,style:n,children:o})}))},999202:(e,t,o)=>{o.d(t,{W:()=>i});var n=()=>o(679924);const r={};function i(e,t,o,i,a,s){const l=r[o],c=Date.now();return(!l||c-l>1e3*i)&&(r[o]=c,(0,n().v)(e,t,a,s),!0)}},999319:(e,t,o)=>{o.d(t,{A:()=>r});var n=()=>o(582033);class r{constructor(e,t){this.activeQueue=void 0,this.inMemoryTransactionQueue=void 0,this.handleIndexedDbTimeout=()=>{const e=(0,o(220719).oC)(this.activeQueue,n().p,'Expected "IndexedDBTransactionQueue"');e.hasTasks()||(e.stopLoop(),e.events.removeListener("timeout",this.handleIndexedDbTimeout),o(620149).A.reset(),this.inMemoryTransactionQueue.startLoop(),this.activeQueue=this.inMemoryTransactionQueue,o(857639).log({level:"warning",from:"IndexedDBWithInMemoryFallbackTransactionQueue",type:"handleIndexedDbTimeout",data:{message:"IndexedDB timeout occurred while the transaction queue is empty. Switching over to InMemoryTransactionQueue."}}))},this.activeQueue=e,this.inMemoryTransactionQueue=t,e.events.addListener("timeout",this.handleIndexedDbTimeout)}startLoop(){this.activeQueue.startLoop()}logEmptyTaskForDebugging(e){var t,o;null===(t=(o=this.activeQueue).logEmptyTaskForDebugging)||void 0===t||t.call(o,e)}enqueueTask(e){return this.activeQueue.enqueueTask(e)}unpause(){this.activeQueue.unpause()}pause(){this.activeQueue.pause()}getLastTaskTimestamp(){return this.activeQueue.getLastTaskTimestamp()}hasTasks(){return this.activeQueue.hasTasks()}anySessionHasTasks(){return this.activeQueue.anySessionHasTasks()}getTotalNumberOfTasks(){return this.activeQueue.getTotalNumberOfTasks()}hasTasksForUser(e){return this.activeQueue.hasTasksForUser(e)}drain(){return this.activeQueue.drain()}awaitRecordTransaction(e){return this.activeQueue.awaitRecordTransaction(e)}isPendingTransactionForRecord(e){return this.activeQueue.isPendingTransactionForRecord(e)}reset(){return this.activeQueue.reset()}clearForUser(e){return this.activeQueue.clearForUser(e)}updateDependencies(e){this.activeQueue.updateDependencies(e),this.inMemoryTransactionQueue!==this.activeQueue&&this.inMemoryTransactionQueue.updateDependencies(e)}getIndexedDBTransactionQueue(){if(this.activeQueue instanceof n().p)return this.activeQueue}}},999752:(e,t,o)=>{o.d(t,{O:()=>r,c:()=>i});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(803949),o(581454),o(737550);var n=()=>o(763824);class r{static map(e,t,o){return n().lX(t,e,o)}constructor(e){this.queue=[],this.waitingList=[],this.running=[],this.afterFlushes=[],this.afterClogs=[],this.waiting=!1,this.parallel=e}getStats(){return{running:this.running.length,queue:this.queue.length,waitingList:this.waitingList.length}}isEmpty(){return 0===this.running.length&&0===this.waitingList.length&&0===this.queue.length}isWaiting(){return this.waiting}setParallelism(e){this.parallel=e,this.flush()}getParallelism(){return this.parallel}enqueue(e){a("===== ENQUEUE ======");const t=n().yX(),o=()=>e().then(t.resolve).catch((e=>{t.reject(e)}));this.waiting?this.waitingList.push({deferred:t,action:o}):this.queue.push({deferred:t,action:o}),this.flush();return i({promise:t.promise,canCancel:()=>this.queue.some((e=>e.deferred===t))||this.waitingList.some((e=>e.deferred===t)),cancel:e=>{const o=this.queue.findIndex((e=>e.deferred===t));if(o>=0)return this.queue.splice(o,1),void t.reject(e);const n=this.waitingList.findIndex((e=>e.deferred===t));return n>=0?(this.waitingList.splice(n,1),void t.reject(e)):void 0}})}wait(){this.waiting=!0;for(let e=0;e<this.queue.length;e++)this.waitingList.push(this.queue[e]);this.queue.length=0}resume(){this.waiting=!1;for(let e=0;e<this.waitingList.length;e++)this.queue.push(this.waitingList[e]);this.waitingList.length=0,this.flush()}async*mapAsyncIterable(e,t){const o=new Set,n=new Set;e.map((e=>{const r=this.enqueue((()=>t(e)));o.add(r);const i=r.finally((()=>{o.delete(r),n.delete(i)}));return n.add(i),i}));try{for(;n.size>0;)yield await Promise.race(n)}catch(r){throw o.forEach((e=>e.cancel(r))),r}finally{o.forEach((e=>e.cancel(new Error("CanceledTask."))))}}wrap(e){var t=this;return function(){for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return t.enqueue((()=>e(...n)))}}enqueueImmediate(e){const t=e(),o=n().yX();return t.then(o.resolve).catch(o.reject),this.queue.push({action:()=>t,deferred:o}),this.flush(),t}flush(){if(a(`queue size ${this.queue.length}`),0===this.queue.length){if(0===this.running.length&&0===this.waitingList.length){for(const e of this.afterFlushes)e.resolve(null);this.afterFlushes=[]}if(this.running.length<this.parallel){for(const e of this.afterClogs)e.resolve(null);this.afterClogs=[]}return}if(this.running.length>=this.parallel)return;const e=this.queue.splice(0,this.parallel-this.running.length);a(`DEQUEUE ${e.length} tasks`);for(const t of e)this.running.push(t);for(const t of e)t.action().then((()=>{this.running.splice(this.running.indexOf(t),1),this.flush()}))}afterFlush(){const e=n().yX();return this.afterFlushes.push(e),this.flush(),e.promise}afterClog(){const e=n().yX();return this.afterClogs.push(e),this.flush(),e.promise}cancel(){const e=this.running,t=this.queue,o=this.waitingList;this.running=[],this.queue=[],this.waitingList=[];for(const n of e)n.deferred.reject(new Error("CanceledTask."));for(const n of t)n.deferred.reject(new Error("CanceledTask."));for(const n of o)n.deferred.reject(new Error("CanceledTask."))}}function i(e){const{promise:t,canCancel:o,cancel:n}=e,r=t;return r.canCancel=o,r.cancel=n,r}function a(e){false}}}]);