"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[26090],{87854:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(757695))().default{getInitialState(){return{stores:{}}}getStore(e){return this.state.stores[e]||(this.state.stores[e]=new(o(178624).R)({key:`recentEmojis:${e}`,namespace:o(419494).Bq,important:!0,trackingType:"necessary"})),this.state.stores[e]}}const n=new i},126090:(e,t,o)=>{o.d(t,{HR:()=>Mt,aD:()=>jt,Ay:()=>ut});o(898992),o(672577),o(581454);var i=o(296540),n=()=>o(484714),s=()=>o(56366),a=()=>o(401497),r=()=>o(522419),l=()=>o(278238),c=()=>o(340498),d=o(474848);const u=(0,c().wt)("giphyLogo",{viewBox:"0 0 12 12",svg:(0,d.jsx)("path",{d:"M 1.332031 0 L 1.332031 12 L 10.667969 12 L 10.667969 4.332031 L 9.332031 5.667969 L 9.332031 10.667969 L 2.667969 10.667969 L 2.667969 1.335938 L 5 1.335938 L 6.332031 0 Z M 6.667969 0 L 6.667969 4 L 10.667969 4 L 10.667969 2.667969 L 9.332031 2.667969 L 9.332031 1.335938 L 8 1.335938 L 8 0 "})});var p=()=>o(381138);const m=(0,c().wt)("shuffle",{viewBox:"0 0 16 16",svg:(0,d.jsx)("path",{d:"M0.162354 11.7542C0.162354 12.1365 0.458984 12.4067 0.867676 12.4067H2.41675C3.55054 12.4067 4.21631 12.0771 4.99414 11.1609L6.58936 9.26245L8.16479 11.1279C8.9624 12.0771 9.71387 12.4067 10.8477 12.4067H12.166V13.9954C12.166 14.3118 12.3572 14.4963 12.6736 14.4963C12.8186 14.4963 12.9504 14.4436 13.0625 14.3579L15.6465 12.2024C15.897 11.998 15.897 11.6816 15.6465 11.4641L13.0625 9.30859C12.9504 9.21631 12.8186 9.17017 12.6736 9.17017C12.3572 9.17017 12.166 9.34814 12.166 9.67114V11.095H10.8872C10.1094 11.095 9.60181 10.8379 9.0415 10.1655L7.43311 8.2605L9.0481 6.34888C9.62158 5.66992 10.083 5.42603 10.8477 5.42603H12.166V6.87622C12.166 7.19263 12.3572 7.3772 12.6736 7.3772C12.8186 7.3772 12.9504 7.32446 13.0625 7.23877L15.6465 5.08325C15.897 4.87891 15.897 4.5625 15.6465 4.34497L13.0625 2.18945C12.9504 2.09717 12.8186 2.05103 12.6736 2.05103C12.3572 2.05103 12.166 2.229 12.166 2.552V4.10767H10.8542C9.68091 4.10767 8.9624 4.43066 8.12524 5.43262L6.58936 7.25854L4.99414 5.36011C4.21631 4.44385 3.50439 4.11426 2.3772 4.11426H0.867676C0.458984 4.11426 0.162354 4.38452 0.162354 4.76685C0.162354 5.14917 0.458984 5.42603 0.867676 5.42603H2.32446C3.06274 5.42603 3.5769 5.68311 4.1438 6.35547L5.74561 8.2605L4.1438 10.1655C3.5769 10.8379 3.10229 11.095 2.37061 11.095H0.867676C0.458984 11.095 0.162354 11.3718 0.162354 11.7542Z"})});var g=()=>o(654601);const h=(0,c().wt)("unsplashLogo",{viewBox:"0 0 12 12",svg:(0,d.jsx)("path",{d:"M3.75 3.375V0H8.25V3.375H3.75ZM8.25 5.25H12V12H0V5.25H3.75V8.625H8.25V5.25Z"})});var f=()=>o(959013),x=()=>o(751735),j=()=>o(100622),v=()=>o(496603),y=()=>o(901997),C=()=>o(559926),b=()=>o(415559),S=()=>o(896628),k=()=>o(436572),A=()=>o(892632),M=(o(944114),()=>o(798880)),w=()=>o(847743),I=()=>o(351360),P=()=>o(630116),E=()=>o(38337),T=()=>o(792540),L=()=>o(24157),B=()=>o(246722);function R(e){const{placeholder:t,onSubmit:o}=e,n=(0,a().IS)((e=>({wrap:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow,borderRadius:6,padding:"6px 10px",marginLeft:8,marginRight:8,overflow:"hidden",fontSize:14,..."dark"===e.mode?{backgroundColor:e.inputBackground}:{}},text:{minHeight:60},placeholder:{minHeight:60}})),[]),s=(0,i.useCallback)((e=>{if(o&&!e.shiftKey)o();else{if("editing"!==L().default.state.mode)return}}),[o]);return(0,d.jsx)("div",{style:n.wrap,className:E().CCX,children:(0,d.jsx)(B().A,{placeholder:t,disabled:!1,store:e.store,style:n.text,placeholderStyle:n.placeholder,pasteBehavior:"inline",disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onEnter:s,disableMobileActionBar:!1,disabledMentionTypes:{reminder:!0},disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,inPageFind:T().Os.none})})}var D=()=>o(736767),F=()=>o(89924),U=()=>o(327165);function W(e){const{tab:t}=e,o=(0,n().v3)(),{store:s}=(0,w().AI)({initialValue:void 0,onChange:v().D_}),r=(0,a().IS)((e=>({desktopStyle:{marginTop:8,marginBottom:6},sparkleStyle:{width:16,height:16,marginRight:4},captionStyle:{textAlign:o.device.isMobile?"left":"center"}})),[o.device.isMobile]),l=(0,i.useCallback)((async()=>{const o=s.getValue();if(!o)return;const i=[];for(const e of o){var n;if("‣"===e[0]&&null!==(n=e[1])&&void 0!==n&&n.length){if("d"===e[1][0][0]){const t=e[1][0][1].start_date;i.push(t)}else if("u"===e[1][0][0]){const t=e[1][0][1],{currentSpaceStore:o}=I().default.state;if(!o)return{users:[],bots:[]};const n=P().LU.createChildStore(o,{table:M().oo,id:t});await n.load();const s=n.getEmail();i.push(s||"")}}else i.push(e[0])}const a=i.join(""),r=t.integration;if(a){e.store.setState({...e.store.state,loading:!0});const o=await t.getResults(a,r);e.store.setState({...e.store.state,loading:!1,result:o.results})}}),[s,e.store,t]);return(0,d.jsxs)("div",{children:[(0,d.jsx)(F().A,{desktopStyle:r.desktopStyle,children:(0,d.jsx)(R,{placeholder:e.placeholder,onSubmit:l,store:s})}),(0,d.jsx)(F().A,{children:(0,d.jsx)(U().A,{onClick:l,title:t.buttonText||(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f().sA,{defaultMessage:"Ask",id:"mediaPicker.aiSourcePickerTab.askButtonText"}),(0,d.jsx)("div",{children:(0,g().X)(r.sparkleStyle)})]}),fullWidth:e.isSmallWidth})}),t.caption&&(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:t.caption,style:r.captionStyle})]})}var H=()=>o(251126),z=()=>o(493823),_=()=>o(760217),V=()=>o(500507),O=()=>o(854672),Z=()=>o(419357),K=()=>o(135221),q=()=>o(864943),N=()=>o(204063),$=()=>o(859428),G=()=>o(320865),Y=()=>o(987017),J=()=>o(780054),Q=()=>o(210741);var X=()=>o(937182),ee=()=>o(722872),te=()=>o(607859),oe=()=>o(962730),ie=()=>o(757695);class ne extends ie().default{getInitialState(){return{inputValue:"",focus:!1,result:void 0,loading:!1,hover:""}}}const se=ne;class ae extends ie().default{getInitialState(){return{allIcons:{},recentIcons:[],loadIconCount:0}}}const re=new ae;var le=()=>o(969141),ce=()=>o(118849),de=()=>o(134217),ue=()=>o(749240),pe=()=>o(948033),me=()=>o(704152),ge=()=>o(816559),he=()=>o(360083),fe=()=>o(972435);function xe(e){let{pageCover:t,tab:o}=e;const{coverUrl:n,title:s,subtitle:r,position:l}=t,c=(0,a().IS)((e=>({container:{width:"25%",padding:3},tooltip:{maxWidth:180,whiteSpace:"normal"},title:{color:e.text.contrastPrimary},subtitle:{color:e.text.contrastSecondary},buttonHover:{opacity:.85},imageBox:{width:"100%",height:64,objectFit:"cover",objectPosition:`center ${100*(l||0)}%`,borderRadius:4}})),[l]),u=(0,i.useCallback)((()=>{o.onChange({url:n,position:l})}),[o,n,l]);return(0,d.jsx)("div",{style:c.container,children:(0,d.jsx)($().A,{originGap:0,placement:oe().W.Bottom,delayThreshold:600,renderTooltip:()=>(0,d.jsxs)("div",{style:c.tooltip,children:[(0,d.jsx)("span",{style:c.title,children:fe().A.formatMessage(s)})," ",(0,d.jsx)("span",{style:c.subtitle,children:r&&fe().A.formatMessage(r)})]}),render:e=>(0,d.jsx)(me().A,{hoveredStyle:c.buttonHover,...e,onClick:u,children:(0,d.jsx)(he().A,{url:n,width:200,isAuthenticated:!1,render:(e,t)=>t&&(0,d.jsx)(ge().Ay,{src:t,style:c.imageBox})})})})})}const je=function(e){let{tab:t}=e;const[n,s]=(0,i.useState)({}),[r,l]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(async()=>{l(!0),await o(748539).f.load().then((e=>{s(e.default),l(!1)}))})()}),[]);const c=(0,pe().b0)(),u=(0,a().IS)((e=>({container:{paddingBottom:8},groupTitle:{marginLeft:-5},loader:{height:300}})),[]);return r?(0,d.jsx)("div",{style:u.loader,children:(0,d.jsx)(o(555267).A,{})}):(0,d.jsx)("div",{style:u.container,children:Object.keys(n).map((e=>{const i=n[e];return(0,d.jsx)(F().A,{title:(0,d.jsx)(o(187485).A,{style:u.groupTitle,href:i.url,external:!0,children:(0,d.jsx)(z().p,{isGray:!0,size:"xs",children:fe().A.formatMessage(i.title)})}),noTextOverflow:!0,children:(0,d.jsx)("div",{style:c.galleryWrap,children:i.items.map(((e,o)=>(0,d.jsx)(xe,{pageCover:e,tab:t},o)))})},e)}))})};var ve=()=>o(449506),ye=()=>o(331542),Ce=()=>o(125565),be=()=>o(719147),Se=()=>o(361330);const ke=(0,f().YK)({giphyPlaceholder:{id:"mediaPicker.giphyPlaceholder.text",defaultMessage:"Search GIPHY"}});function Ae(e){const{tab:t,results:o,ready:n,isSmallWidth:s,giphyRandomId:r}=e,l=(0,a().IS)((e=>({loading:(0,pe().$n)(),captionMenuItem:{textAlign:s?"left":"center",color:e.mediumTextColor}})),[s]);return n?!o||o&&!o.length?(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:(0,d.jsx)(f().sA,{defaultMessage:"No results found.",id:"mediaPicker.giphy.noResultsText"}),style:l.captionMenuItem}):(0,d.jsxs)(i.Fragment,{children:[o.map(((e,o)=>(0,d.jsx)(Me,{tab:t,image:e,giphyRandomId:r},o))),(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:(0,d.jsx)(f().sA,{defaultMessage:"Search to find more results.",id:"mediaPicker.giphy.searchText"}),style:l.captionMenuItem})]}):(0,d.jsx)("div",{style:l.loading,children:(0,d.jsx)(ye().A,{})})}function Me(e){var t;let{tab:o,image:s,giphyRandomId:r}=e;const l=(0,n().v3)(),{device:c}=l,u=(0,a().IS)((e=>({container:{width:c.isMobile?"33%":"25%",padding:3},hoveredButton:{opacity:.85},imageBox:{width:"100%",height:64,objectFit:"cover",objectPosition:"center 0%",borderRadius:4},label:{marginTop:2,marginBottom:4}})),[c.isMobile]),p=(0,i.useCallback)((async()=>{var e;if(o.onChange({url:s.imageUrl}),null!==(e=s.analytics)&&void 0!==e&&e.onclick)try{var t;await ve().callApi({eventName:"postGiphyAnalytics",environment:l,data:{url:null===(t=s.analytics)||void 0===t?void 0:t.onclick.url,timestamp:Date.now(),random_id:r}})}catch(i){}}),[l,r,s.imageUrl,o,null===(t=s.analytics)||void 0===t?void 0:t.onclick]);return(0,d.jsxs)("div",{style:u.container,children:[(0,d.jsx)(me().A,{hoveredStyle:u.hoveredButton,onClick:p,children:(0,d.jsx)(ge().Ay,{src:s.thumbUrl,style:u.imageBox})}),(0,d.jsx)(Ce().A,{isSmall:!0,isSecondaryColor:!0,style:u.label,children:(0,d.jsx)(f().sA,{defaultMessage:"by <inlinetextlink>{authorName}</inlinetextlink>",id:"mediaPicker.giphy.byAuthor",values:{authorName:s.authorName||"GIPHY",inlinetextlink:e=>(0,d.jsx)(be().A,{external:!0,href:s.imageUrl,children:e})}})})]},s.id)}const we=function(e){let{tab:t,isSmallWidth:o}=e;const[s,a]=(0,i.useState)(""),[r,l]=(0,i.useState)(""),c=(0,n().v3)(),{device:u}=c,p=(0,pe().b0)(),m=(0,i.useCallback)((async()=>{if(!v().Im(s))return s;const e=await ve().callApi({eventName:"getGiphyRandomId",environment:c,data:{}});return"success"===e.type?(a(e.data.random_id),e.data.random_id):void 0}),[c,s]);return(0,d.jsxs)("div",{style:{paddingBottom:8},children:[(0,d.jsx)(F().A,{desktopStyle:{marginTop:8,marginBottom:6},children:(0,d.jsx)(Z().Ay,{value:r,placeholder:fe().A.formatMessage(ke.giphyPlaceholder),showClearButton:!0,focus:!u.isMobile||void 0,onChange:e=>l(e.target.value)})}),(0,d.jsx)("div",{style:p.galleryWrap,children:(0,d.jsx)(H().A,{request:r,debounce:Se().tu,performRequest:async e=>{await m();const t=await ve().callApi({eventName:"searchGiphyImages",environment:c,data:{query:e,page:0}});if("success"===t.type)return t.data.results;throw t.error},render:(e,i,n)=>(0,d.jsx)(Ae,{tab:t,results:i,ready:n,isSmallWidth:o,giphyRandomId:s})})})]})};o(354520);var Ie=()=>o(852507),Pe=()=>o(634201),Ee=()=>o(187174),Te=()=>o(994310),Le=()=>o(284371),Be=()=>o(939740),Re=()=>o(228927),De=()=>o(974233),Fe=()=>o(970585),Ue=()=>o(486666),We=()=>o(406699),He=()=>o(545805),ze=()=>o(553965),_e=()=>o(463830);const Ve=(0,i.forwardRef)((function(e,t){const{shouldOpenVariations:o,icon:i,focused:n,color:a,onClick:r,onMouseEnter:l,variations:c,hideTooltip:u,insertIcon:p,id:m,role:g}=e,h=(0,s().uB)(void 0,_e().A);return o?(0,d.jsx)(qe,{ref:t,id:m,icon:i,focused:n,color:a,onClick:r,onMouseEnter:l,variations:c,hideTooltip:u,insertIcon:p,buttonPopupStore:h,role:g}):(0,d.jsx)(Ze,{ref:t,id:m,icon:i,focused:n,color:a,onClick:r,onMouseEnter:l,variations:c,hideTooltip:u,role:g})})),Oe=Ve,Ze=(0,i.forwardRef)((function(e,t){const{events:o,icon:s,focused:r,color:l,onClick:c,onMouseEnter:u,variations:p,hideTooltip:m,id:g,role:h}=e,f=(0,a().DP)(),x=(0,n().v3)(),{isMenuListFocusVisible:j}=(0,i.useContext)(Be().VU),v=r&&j,y=(0,a().IS)((e=>({iconButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,...x.device.isMobile?{width:Ue().UA,height:Ue().UA,fontSize:Ue().ru}:{width:Ue().Sq,height:Ue().Sq,fontSize:Ue().Zl},...v&&{boxShadow:e.outlineBlueInputBoxShadow}},iconImage:{...x.device.isMobile?{width:Ue().ru,height:Ue().ru}:{width:Ue().Zl,height:Ue().Zl}}})),[x.device.isMobile,v]),C=(p.tooltip?p.tooltip:s).replaceAll("-"," ").replaceAll("_"," "),b=`${C} ${l}`,S="dark"===f.mode?p.dark:p.light;return(0,d.jsx)($().A,{forceVisibleState:!!v||void 0,placement:v?oe().W.Bottom:void 0,allowHover:Boolean(s&&!m),disableTooltip:m,renderTooltip:()=>C,closeDelay:0,render:e=>(0,d.jsx)(me().A,{ref:t,ariaLabel:b,id:g,role:h,focused:r,onClick:c,...(0,ze().A)(o||{},(0,ze().A)({onMouseEnter:u},e)),ignoreLocalHoverState:!0,style:y.iconButton,disallowTabbing:!0,children:(0,d.jsx)("img",{alt:b,src:`data:image/svg+xml;utf8,${encodeURIComponent(S[l])}`,style:y.iconImage,onContextMenu:e=>e.preventDefault()})},s)})}));function Ke(e){const{parent:t,icon:i,variations:n,insertIcon:s}=e,r=(0,a().DP)(),c=(0,a().IS)((()=>({variationMenu:{display:"flex",padding:2,gap:1}})),[]),u="dark"===r.mode?n.light:n.dark,p=Object.keys(u).sort(((e,t)=>l().v3.indexOf(e)-l().v3.indexOf(t))).map((o=>{const a=`${i}_${o}`;return{key:a,action:e=>{t.close(),s(`/icons/${a}.svg`)},render:t=>(0,d.jsx)(Ve,{...e,...t,icon:a,color:o,variations:n,shouldOpenVariations:!1,hideTooltip:!0})}}));return(0,d.jsx)(o(805751).A,{debugName:"IconPickerMenuItem",capture:!0,allowEsc:!0,children:(0,d.jsx)(Be().Ay,{type:Be().Oh.Grid,getItemsPerRowForSection:()=>5,initialFocus:0,sections:[{key:"variations",render:e=>(0,d.jsx)("div",{...e}),items:p}],renderRow:(e,t)=>(0,d.jsx)("div",{role:"row",style:c.variationMenu,children:e},t)})})}const qe=(0,i.forwardRef)((function(e,t){const{icon:o,focused:n,color:s,onClick:a,onMouseEnter:r,variations:l,hideTooltip:c,insertIcon:u,buttonPopupStore:p,id:m,role:g}=e,h=(0,i.useCallback)((()=>function(e){e.setState({...e.state,open:!1})}(p)),[p]),f=(0,i.useCallback)((e=>function(e,t){e.preventDefault(),t.setState({...t.state,open:!0})}(e,p)),[p]),{isMenuListFocusVisible:x}=(0,i.useContext)(Be().VU);return(0,d.jsx)(He().A,{debugName:"IconPickerMenuItem",capture:n&&x,onEnter:f,children:(0,d.jsx)(We().Ay,{buttonPopupStore:p,popupType:We().z7.Popup,renderOrigin:e=>(0,d.jsx)(Ze,{ref:t,id:m,icon:o,focused:n,color:s,onClick:a,onMouseEnter:r,variations:l,hideTooltip:c,events:e,role:g}),render:e=>(0,d.jsx)(He().A,{debugName:"IconPickerMenuItem.VariationMenuComponent",capture:n,onEsc:h,children:(0,d.jsx)(Ke,{parent:e,icon:o,variations:l,insertIcon:u})})})},o)})),Ne={display:"flex",flexDirection:"column"},$e="recentIcons",Ge=100,Ye=(0,f().YK)({noResults:{defaultMessage:"No results",id:"iconPicker.noResults.message"}});function Je(e){const{filter:t,enforceIconColor:o,onSubmit:r,menuRef:l,iconLoggingData:c,onNoResults:u,comboboxProps:p}=e,m=(0,n().v3)(),g=(0,a().DP)(),{isDesktop:h,isMobile:x}=(0,n().Y0)(),[j,C]=(0,i.useState)(!0),[b,S]=(0,i.useState)(void 0),{loadIconCount:k,recentIcons:A}=(0,s().O$)(re),M=(0,s().uB)(void 0,Fe().A),w=(0,s().K8)((()=>{var e;return null===(e=I().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.icon_picker_color}),[]),P=(0,s().K8)((()=>Math.floor((0,pe().so)(m,l))),[m,l]),E=(0,s().K8)((()=>(0,pe().uu)(m)),[m]);(0,Ie().l)((()=>{const e=Te().A.get($e);re.update((t=>({...t,recentIcons:e||[]})))}));const[T]=(0,Ee().Yb)((async()=>{try{const e=await async function(e,t,o){if(!v().Im(o.allIcons))return o.allIcons;const i=await(0,De().default)({environment:t,url:e,method:"GET",format:"json",mode:"cors"});if("success"===i.type)return re.setState({...o,allIcons:i.data}),i.data;throw i.error}("/icons/all",m,re.state);S(e),C(!1)}catch(e){throw e}}),[m]),L=(0,i.useMemo)((()=>Pe().f7(e.filter)??""),[e.filter]),B=(0,i.useCallback)((e=>{const t=function(e){return e.replace("_dark","")}(e);r(t);const o=t.split(/[/_.]/),i=o[2],n=o[3];!function(e,t){const o=Te().A.get($e),i=v().KC([e],o),n=v().s(i,t);Te().A.set($e,n),re.update((e=>({...e,recentIcons:n})))}(i,Ue().Te),c&&y().aU(m,"pick_colored_icon",{icon:i,color:n,...c})}),[m,r,c]),R=(0,i.useCallback)(((e,t)=>{const i=o??w,n=`/icons/${`${e}${i?`_${i}`:""}`}.svg`;return{key:n,action:()=>B(n),render:o=>(0,d.jsx)(Oe,{...o,icon:e,color:i??"gray",variations:t,insertIcon:B,shouldOpenVariations:!Boolean(i)})}}),[o,B,w]),U=(0,i.useCallback)((e=>{if(!e)return[];const o=function(e,t){const o=v().oE(Object.keys(e).map((o=>{const i=e[o],n=((null==i?void 0:i.tooltip)??o).replace("-"," "),s=[n,...i.tags],a=s.findIndex((e=>e===t));if(-1!==a)return[0===a?100:50,o];const r=s.findIndex((e=>e.startsWith(t))),l=n.includes(t);return 0!==r&&l?[40,o]:-1!==r?[0===r?80:30,o]:void 0})));return v().Ul(o,(e=>-e[0])).map((e=>e[1]))}(e,t.toLowerCase());return 0===o.length?[]:[{key:"search-results",items:o.map((t=>R(t,e[t]))),render:e=>(0,d.jsx)(F().A,{children:(0,d.jsx)("div",{style:(0,pe().ze)(m,g),children:e.children})},e.key)}]}),[t,R,m,g]),W=(0,i.useCallback)(((e,t)=>{if(!t)return;let o=[];return o="recent"===e.id?A||[]:Object.keys(t),0!==o.length?{key:e.id,items:o.map((e=>{if(void 0!==t[e])return R(e,t[e])})).filter(Boolean),render:t=>(0,d.jsx)(F().A,{title:e.title,children:(0,d.jsx)("div",{style:(0,pe().ze)(m,g),children:t.children})},t.key)}:void 0}),[A,R,m,g]),H=(0,i.useCallback)((e=>{const o=v().oE(function(e){return v().oE([!e&&{id:"recent",title:(0,d.jsx)(f().sA,{id:"iconPicker.section.recent",defaultMessage:"Recent"})},!e&&{id:"icons",title:(0,d.jsx)(f().sA,{id:"iconPicker.section.icons",defaultMessage:"Icons"})}])}(t).map((t=>W(t,e))));return t&&L?U(e):o}),[t,L,W,U]),z=(0,i.useCallback)((e=>{const t=H(e);let o=0;for(const i of t)o+=i.items.length;return o}),[H]),_=(0,i.useCallback)((e=>{let t=k;0===k&&(t+=P*E);const o=[],i=H(e);let n=0;for(const s of i){if(!(n+s.items.length<=t)){o.push({...s,items:s.items.slice(0,t-n)});break}o.push(s),n+=s.items.length}return o}),[H,k,P,E]),V=(0,i.useMemo)((()=>({type:Be().Oh.Grid,getItemsPerRowForSection:()=>P,renderRow:(e,t)=>(0,d.jsx)("div",{role:"row",style:{display:"flex"},children:e},t)})),[P]),O=(0,i.useCallback)((e=>{if(Math.abs(e)<Ge){const{loadIconCount:e,allIcons:t}=re.state,o=P*E,i=Math.max(o,z(t));re.setState({...re.state,loadIconCount:Math.min(i,e+o)})}}),[E,P,z]),Z=(0,i.useMemo)((()=>{const e=_(b),t=h&&e.length>0?0:void 0;return"resolved"===T.status&&0===e.length&&(u&&u(),e.push({key:"no results",items:[{key:"no results",action:v().lQ,render:e=>(0,d.jsx)(D().A,{...e,style:{fontWeight:Le().Wy.medium,marginBottom:2,marginLeft:2,height:20,boxSizing:"content-box"},caption:fe().A.formatMessage(Ye.noResults)})}],render:e=>(0,d.jsx)(F().A,{...e})})),(0,d.jsxs)("div",{style:Ne,children:[(0,d.jsx)("div",{style:{flexGrow:1},children:(0,d.jsx)(Be().Ay,{...V,store:M,initialFocus:t,sections:e,disableKeyboardArrowWrap:!0,unfocusOnScroll:x,comboboxProps:p})}),(0,d.jsx)(Re().A,{onChange:O})]})}),[_,b,h,V,M,x,O,T.status,u,p]);return(0,d.jsxs)("div",{children:[j&&(0,d.jsx)("div",{style:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",paddingBottom:"10px"},children:(0,d.jsx)(ye().A,{})}),Z]})}var Qe=()=>o(602031),Xe=()=>o(317909),et=()=>o(755199),tt=()=>o(769314),ot=()=>o(574036);const it=(0,f().YK)({selectSpecificIconColor:{defaultMessage:"Select icon color {iconColor}",id:"iconPickerColorPicker.selectSpecificColor"},selectIconColor:{defaultMessage:"Select icon color",id:"iconPickerColorPicker.selectColor"},selectIconColorWithCurrentColor:{defaultMessage:"Select icon color, {iconColor} selected",id:"iconPickerColorPicker.selectColorWithCurrentColor"},noIconColor:{defaultMessage:"no color",id:"iconPickerColorPicker.noColor"}});function nt(){const e=(0,s().K8)((()=>{var e;return null===(e=I().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.icon_picker_color}),[]),t=(0,f().tz)(),o=(0,n().v3)(),i=(0,a().DP)(),r=(0,n().Y0)(),c=(0,s().uB)(void 0,_e().A);return(0,d.jsx)($().A,{renderTooltip:()=>t.formatMessage(it.selectIconColor),placement:oe().W.Bottom,render:n=>(0,d.jsx)(We().Ay,{preventBlockRenderQueueOnEnter:!0,buttonPopupStore:c,popupType:We().z7.Popup,renderOrigin:o=>(0,d.jsx)(Z().KF,{ariaLabel:t.formatMessage(it.selectIconColorWithCurrentColor,{iconColor:t.formatMessage(e?l().jd[e]:it.noIconColor)}),icon:t=>(0,Qe().H)({...t,stroke:e?l().l8[i.mode][e]:l().l8[i.mode].lightgray,fill:e?l().l8[i.mode][e]:i.lightIconColor}),...(0,ze().A)(o,n)}),render:n=>function(e){const{parent:t,environment:o,currentIconPickerColor:i,theme:n,device:s}=e,a=[];return a.push({key:"askEveryTime",action:()=>{t.close(),st({environment:o,color:void 0})},render:e=>(0,d.jsx)(ot().A,{...e,title:(0,d.jsx)(f().sA,{id:"iconPickerColorPicker.askEveryTime",defaultMessage:"Ask every time"}),onClick:()=>{st(void 0!==i?{environment:o,color:void 0}:{environment:o,color:"gray"})},on:void 0===i,style:{boxShadow:void 0},textWrapperStyle:{marginLeft:s.isMobile?10:6},rightStyle:{marginRight:4}})}),(0,d.jsx)(tt().A,{parent:t,currentColor:i,onColorSelected:st,additionalItems:a,rowStyle:e=>({...e<2&&{opacity:void 0===i?.5:1},...2===e&&{flexDirection:"row-reverse",padding:"4px 0 0",margin:"4px 0 0",borderTop:`1px solid ${n.regularDividerColor}`}}),menuStyle:{padding:"4px 0"}})}({parent:n,environment:o,currentIconPickerColor:e,theme:i,device:r,intl:t})})})}function st(e){const{environment:t,color:o}=e,{currentUserSettingsStore:i}=I().default.state;i&&Xe().createAndCommit({userAction:"mediaPicker.setIconPickerColor",environment:t,canUndo:!0,perform:e=>{const t=void 0!==o?o:null;et().mJ({userSettingsStore:i,transaction:e,data:{icon_picker_color:t}})}})}const at=(0,f().YK)({unsplashPlaceholder:{id:"mediaPicker.unsplashPlaceholder.text",defaultMessage:"Search for an image…"}});function rt(e){const{tab:t,results:o,ready:n,isSmallWidth:s}=e,r=(0,a().IS)((e=>({loading:(0,pe().$n)(),captionMenuItem:{textAlign:s?"left":"center",color:e.mediumTextColor}})),[s]);return n?!o||o&&!o.length?(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:(0,d.jsx)(f().sA,{defaultMessage:"No results found.",id:"mediaPicker.unsplash.noResultsText"}),style:r.captionMenuItem}):(0,d.jsxs)(i.Fragment,{children:[o.map(((e,o)=>(0,d.jsx)(lt,{tab:t,image:e},o))),(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:(0,d.jsx)(f().sA,{defaultMessage:"Search to find more results.",id:"mediaPicker.unsplash.searchText"}),style:r.captionMenuItem})]}):(0,d.jsx)("div",{style:r.loading,children:(0,d.jsx)(ye().A,{})})}function lt(e){let{tab:t,image:o}=e;const s=(0,n().v3)(),{device:a}=s,r=(0,i.useCallback)((async()=>{const e=await(0,De().default)({environment:s,url:o.downloadUrl,method:"GET",format:"json"});"success"===e.type&&t.onChange({url:e.data.url})}),[s,o.downloadUrl,t]);return(0,d.jsxs)("div",{style:{width:a.isMobile?"33%":"25%",padding:3},children:[(0,d.jsx)(me().A,{hoveredStyle:{opacity:.85},onClick:r,children:(0,d.jsx)(ge().Ay,{src:o.thumbUrl,style:{width:"100%",height:64,objectFit:"cover",objectPosition:"center 0%",borderRadius:4}})}),(0,d.jsx)(Ce().A,{isSmall:!0,isSecondaryColor:!0,style:{marginTop:2,marginBottom:4},children:(0,d.jsx)(f().sA,{defaultMessage:"by <inlinetextlink>{authorName}</inlinetextlink>",id:"mediaPicker.unsplash.byAuthor",values:{authorName:o.authorName,inlinetextlink:e=>(0,d.jsx)(be().A,{external:!0,href:o.unsplashUrl,children:e})}})})]},o.id)}const ct=function(e){let{tab:t,isSmallWidth:o}=e;const[s,a]=(0,i.useState)(""),r=(0,n().v3)(),{device:l}=r,c=(0,pe().b0)();return(0,d.jsxs)("div",{style:{paddingBottom:8},children:[(0,d.jsx)(F().A,{desktopStyle:{marginTop:8,marginBottom:6},children:(0,d.jsx)(Z().Ay,{value:s,placeholder:fe().A.formatMessage(at.unsplashPlaceholder),showClearButton:!0,focus:!l.isMobile||void 0,onChange:e=>a(e.target.value)})}),(0,d.jsx)("div",{style:c.galleryWrap,children:(0,d.jsx)(H().A,{request:s,debounce:Se().tu,performRequest:async e=>{const t=await ve().callApi({eventName:"searchUnsplashImages",environment:r,data:{query:e,page:0}});if("success"===t.type)return t.data.results;throw t.error},render:(e,i,n)=>(0,d.jsx)(rt,{tab:t,results:i,ready:n,isSmallWidth:o})})})]})},dt=(0,f().YK)({embedPlaceholder:{id:"mediaPicker.embedPlaceholder.text",defaultMessage:"Paste in https://…"},filterPlaceholder:{id:"mediaPicker.emojiFilter.text",defaultMessage:"Filter…"},aiSourcePickerPlaceholder:{id:"mediaPicker.githubPlaceholder.text",defaultMessage:"Ask query here"},aiIsFetchingLoader:{id:"mediaPicker.aiIsFetchingLoader.text",defaultMessage:"Ai is fetching"}});const ut=function(e){var t,a;const r=(0,n().v3)(),c=(0,i.useRef)(null),[u,p]=(0,i.useState)(""),[m,g]=(0,i.useState)({inputValue:"",focus:!1}),[h,x]=(0,i.useState)({inputValue:"",focus:!1}),j=(0,s().uB)(void 0,se),[y,C]=(0,o(857437).$)();function b(){const t=e.tabs.find((t=>t.type===e.currentTab));if(!t)return(0,d.jsx)(f().sA,{defaultMessage:"Uh oh! Something went wrong.",id:"mediaPicker.errorMessage"});switch(t.type){case"embed":return(0,d.jsx)(Tt,{isSmallWidth:e.isSmallWidth,embedInputValue:u,setEmbedInputValue:p,tab:t});case"file":return(0,d.jsx)(xt,{isSmallWidth:e.isSmallWidth,onCancel:e.onCancel,tab:t});case"emoji":return(0,d.jsx)(o(693319).p,{onSubmit:t.onChange,filter:m.inputValue||"",isCallout:e.isCallout,iconLoggingData:e.recordIconLoggingData,menuRef:c,onUpload:t.uploadFileEventHandlers,isInline:!1,comboboxProps:C});case"icon":return(0,d.jsx)(Je,{filter:h.inputValue||"",onSubmit:t.onChange,iconLoggingData:e.recordIconLoggingData,enforceIconColor:t.enforceIconColor,menuRef:c,comboboxProps:C});case"gallery":return(0,d.jsx)(je,{tab:t});case"unsplash":return(0,d.jsx)(ct,{tab:t,isSmallWidth:e.isSmallWidth});case"giphy":return(0,d.jsx)(we,{tab:t,isSmallWidth:e.isSmallWidth});case"drive":return(0,d.jsx)(wt,{tab:t});case"box":return(0,d.jsx)(bt,{tab:t});case"aiSourcePicker":return(0,d.jsx)(It,{isSmallWidth:e.isSmallWidth,aiSourcePickerStore:j,tab:t});case"custom":return(0,d.jsx)(Et,{isSmallWidth:e.isSmallWidth,onCancel:e.onCancel,embedInputValue:u,setEmbedInputValue:p,tab:t});case"customEmoji":return(0,d.jsx)(o(347845).A,{showTitle:!1,largeEmoji:!0,allowUrlPaste:!0,confirmToAdd:!0,uploadFileEventHandlers:t.uploadFileEventHandlers,onUploadWithoutSaving:t.onUploadWithoutSaving,onCancel:e.onCancel,entrypoint:"upload_tab"});default:(0,o(534177).HB)(t)}}const k=null!=c&&null!==(t=c.current)&&void 0!==t&&t.offsetWidth?((null==c||null===(a=c.current)||void 0===a?void 0:a.offsetWidth)-24)/32:12,{device:A}=r,M=(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(At,{tabs:e.tabs,onDelete:e.onDelete,currentTab:e.currentTab}),(0,d.jsx)(pt,{tabs:e.tabs,currentTab:e.currentTab,onFilterChange:e=>{const t=k*(0,pe().uu)(r);g({...m,inputValue:e.currentTarget.value}),x({...h,inputValue:e.currentTarget.value}),re.setState({...re.state,loadIconCount:t})},iconInput:h.inputValue,emojiInput:m.inputValue,onRandomButtonClick:t=>{"emoji"===t.type?function(e,t,o){const{device:i}=o,n=e.find((e=>e.type===t));if(n&&"emoji"===n.type){const e=S().aB();n.onChange(e,{keepVisible:!i.isMobile})}}(e.tabs,e.currentTab,r):function(e,t,o){const{device:i}=e,n=t.find((e=>e.type===o));if(n&&"icon"===n.type){const e=n.enforceIconColor??(null===(s=I().default.state)||void 0===s||null===(s=s.currentUserSettingsStore)||void 0===s||null===(s=s.getSettings())||void 0===s?void 0:s.icon_picker_color),t=`/icons/${v().XM(Object.keys(re.getState().allIcons))}_${e??v().XM(l().v3)}.svg`;n.onChange(t,{keepVisible:!i.isMobile})}var s}(r,e.tabs,e.currentTab)},comboboxProps:y})]});let w;if(A.isMobile)w={menuType:ee().gu.Modal,title:e.title,header:M,right:(0,d.jsx)(f().sA,{defaultMessage:"Close",id:"mediaPicker.mobileCloseButton.label"}),onClickRight:e.onCancel,left:e.onDelete&&(0,d.jsx)(f().sA,{defaultMessage:"Remove",id:"mediaPicker.mobileRemoveButton.label"}),onClickLeft:e.onDelete};else{w={menuType:ee().gu.Popup,header:M};const t=e.tabs.find((t=>t.type===e.currentTab)),o=t&&"tabHeight"in t?t.tabHeight:void 0;w.width=e.popupWidth||300,w.height=o||e.popupHeight,w.maxHeight=e.maxHeight,w.maxWidth=e.maxWidth}return(0,d.jsx)(o(533655).A,{onSwipeLeft:()=>function(e,t){if(!le().A.state.isActive)return;const o=e.map((e=>e.type)).indexOf(le().A.state.currentTab),i=e[o+1];void 0!==i&&kt(i.type,t)}(e.tabs,r),onSwipeRight:()=>function(e,t){if(!le().A.state.isActive)return;const o=e.map((e=>e.type)).indexOf(le().A.state.currentTab),i=e[o-1];void 0!==i&&kt(i.type,t)}(e.tabs,r),render:e=>(0,d.jsx)(o(928600).A,{...w,...e,className:E().aIQ,innerRef:c,children:b()})})};function pt(e){const t=(0,f().tz)(),{isPhone:o,isMobile:i,isAndroid:s}=(0,n().Y0)(),a=e.tabs.find((t=>t.type===e.currentTab));if("emoji"===(null==a?void 0:a.type)||"icon"===(null==a?void 0:a.type)){const n="emoji"===a.type?e.emojiInput:e.iconInput,r=()=>e.onRandomButtonClick(a),l=(0,d.jsx)(ht,{tabs:e.tabs,currentTab:e.currentTab,hasRandomButtonOnLeft:!a.hideRandomButton});return(0,d.jsx)("div",{style:{display:"flex",...o?{}:{marginTop:16,marginBottom:10}},children:(0,d.jsx)(Z().Ay,{value:n,placeholder:t.formatMessage(dt.filterPlaceholder),autoFocus:!i||void 0,focusInitial:!i||void 0,showClearButton:!0,inputLeft:(0,d.jsx)(Z().Zf,{icon:p().q}),onChange:e.onFilterChange,right:(0,d.jsxs)("div",{style:{display:"flex"},children:[null!=a&&a.hideRandomButton?void 0:(0,d.jsx)($().A,{renderTooltip:()=>(0,d.jsx)(f().sA,{id:"mediaPicker.emojiTab.random",defaultMessage:"Random"}),placement:oe().W.Bottom,render:e=>(0,d.jsx)(Z().KF,{icon:m,onClick:r,...e})}),l]}),isRightLastElementOfInput:!0,style:{...s&&{borderBottom:"none"}},...e.comboboxProps})},`input-header-${a.type}`)}return null}function mt(e){return e.fileUpload?X().cM:e.imageUpload?X().Dn:e.videoUpload?X().Rt:void 0}async function gt(e){let{tab:t,accept:o,allowMultipleFileSelection:i=!1}=e;const n=await A().dA({multiple:i,accept:o});n.length&&t.onUpload(n)}function ht(e){let{hasRandomButtonOnLeft:t,tabs:o,currentTab:i}=e;const n=o.find((e=>e.type===i));if(!n)return null;let s;return"emoji"===(null==n?void 0:n.type)?s=(0,d.jsx)(Q().A,{}):"icon"===(null==n?void 0:n.type)&&void 0===n.enforceIconColor&&(s=(0,d.jsx)(nt,{})),t&&s?(0,d.jsx)("div",{style:{marginLeft:6},children:s}):s??null}function ft(e){let{tab:t,isSmallWidth:o}=e;return t.imageUpload||t.videoUpload?(0,d.jsxs)(F().A,{desktopStyle:{marginTop:4,display:"flex",justifyContent:"center",marginRight:12,marginLeft:12},children:[t.imageUpload&&(0,d.jsx)(q().A,{size:"lg",onClick:()=>gt({tab:t,accept:"image/*",allowMultipleFileSelection:!0}),style:{width:"100%"},children:(0,d.jsx)(f().sA,{defaultMessage:"Upload file",id:"mediaPicker.chooseImage.buttonText"})}),t.videoUpload&&(0,d.jsx)(U().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Choose a video",id:"mediaPicker.chooseVideo.buttonText"}),onClick:()=>gt({tab:t,accept:"video/*"}),fullWidth:o})]}):null}function xt(e){let{tab:t,isSmallWidth:o,onCancel:i}=e;const r=(0,n().v3)(),l=(0,s().O$)(ue().subscriptionDataStoreInstance),c=(0,a().IS)((e=>({dropzone:{background:(0,j().Qr)([j().Ay.blueWithAlpha(.14),(0,x().X4)(e.contentBackground,.5)])},caption:{textAlign:o?"left":"center",color:e.mediumTextColor},fileLimitWrapper:{display:"flex",alignItems:"center",justifyContent:o?"flex-start":"center"},fileLimitInner:{marginRight:6,color:e.mediumTextColor}})),[o]),u=(0,s().K8)((()=>te().default.state.isOnboarding),[]),p=(0,s().K8)((()=>de().Si(r)||"plus"),[r]);return(0,d.jsx)(V().V,{type:mt(t)??X().hy,dropTargetKey:"uploadTab",onDropFile:e=>{if("invalidFileDrop"===e.type)return k().D6({label:(0,d.jsx)(f().sA,{id:"mediaPicker.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})}),null;t.onUpload([e.file])},dropzoneStyle:c.dropzone,children:(0,d.jsxs)("div",{style:{marginTop:-24,paddingTop:24},children:[t.fileUpload&&(0,d.jsx)(F().A,{desktopStyle:{marginTop:o?8:24},children:(0,d.jsx)(U().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),onClick:()=>gt({tab:t}),fullWidth:o})}),(0,d.jsx)(ft,{isSmallWidth:o,tab:t}),t.caption&&(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:t.caption,style:c.caption}),t.preventUploadLimitFreeFileSize||l&&de().Fq(l)&&(0,d.jsx)("div",{style:{height:8}}),l&&!t.preventUploadLimitFreeFileSize&&!de().Fq(l)&&(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:(0,d.jsxs)("div",{style:c.fileLimitWrapper,children:[(0,d.jsx)("div",{style:c.fileLimitInner,children:(0,d.jsx)(f().sA,{defaultMessage:"The maximum size per file is {filesize} MB.",id:"mediaPicker.maximumFileSize.notice",values:{filesize:A().u1}})}),!u&&(0,d.jsx)(ce().A,{subscriptionTier:p,onClick:()=>{i&&i()},analyticsName:"media_picker",desktopStyle:{marginBottom:1}})]})})]})})}let jt=function(e){return e.Drive="drive",e.Docs="gDocs",e}({});function vt(e){let{tab:t,type:o}=e;return o===jt.Docs?(0,d.jsx)(Ct,{tab:t}):(0,d.jsx)(yt,{tab:t})}function yt(e){let{tab:t}=e;const o=(0,a().IS)((e=>({buttonItem:{color:e.blueColor}})),[]);return(0,d.jsxs)(F().A,{children:[(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Connect Google account",id:"mediaPicker.menuItem.connectFirstGoogleAccount.label"}),onClick:()=>t.onSelect(),focused:!1,style:o.buttonItem}),(0,d.jsx)(D().A,{shouldWrapCaption:!1,caption:(0,d.jsx)(f().sA,{defaultMessage:"Find and embed your Google Drive files.",id:"mediaPicker.menuItem.connectFirstGoogleAccount.caption"})})]})}function Ct(e){let{tab:t}=e;return(0,d.jsx)(F().A,{children:(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Connect Google account",id:"mediaPicker.menuItem.connectFirstGoogleAccount.label"}),onClick:()=>t.onSelect(),focused:!1})})}function bt(e){let{tab:t}=e;const o=(0,a().IS)((e=>({connectFirstAccountButton:{color:e.blueColor},connectSecondAccountButton:{color:e.mediumTextColor}})),[]),{accounts:i}=t;return 0===i.length?(0,d.jsxs)(F().A,{children:[(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Connect Box account",id:"mediaPicker.menuItem.connectFirstBoxAccount.label"}),onClick:()=>t.onSelect(),focused:!1,style:o.connectFirstAccountButton}),(0,d.jsx)(D().A,{shouldWrapCaption:!1,caption:(0,d.jsx)(f().sA,{defaultMessage:"Find and embed your Box files.",id:"mediaPicker.menuItem.connectFirstBoxAccount.caption"})})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(F().A,{children:i.map((e=>(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:e.account_name}}),onClick:()=>t.onSelect(e),focused:!1},e.account_key)))}),(0,d.jsx)(F().A,{topBorder:!0,children:(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreBoxAccounts.label"}),onClick:()=>t.onSelect(),style:o.connectSecondAccountButton,focused:!1})})]})}function St(e,t){return()=>{e&&t.onChange(e)}}function kt(e,t){le().A.state.isActive&&(le().A.setState({...le().A.state,currentTab:e}),"icon"===e&&le().A.state.recordIconLoggingData&&y().uZ(t,"select_icon_tab",le().A.state.recordIconLoggingData))}function At(e){let{tabs:t,onDelete:o,currentTab:s}=e;const r=(0,a().IS)((e=>({sparklesIcon:{width:16,height:16,marginRight:4,color:e.accentColors.purple[400]}})),[]),l=(0,n().v3)(),{device:c}=l;if(t.length<=1&&!o)return null;{const e={gallery:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.gallery",defaultMessage:"Gallery"}),embed:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.embedLink",defaultMessage:"Embed link"}),file:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.upload",defaultMessage:"Upload"}),emoji:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.emoji",defaultMessage:"Emoji"}),icon:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.icon",defaultMessage:"Icon"}),custom:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.custom",defaultMessage:"Custom"}),customEmoji:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.customEmoji",defaultMessage:"Upload"}),unsplash:(0,d.jsxs)(i.Fragment,{children:[h({width:12,marginRight:4,height:12}),(0,d.jsx)("span",{children:"Unsplash"})]}),giphy:(0,d.jsxs)(i.Fragment,{children:[u({width:12,marginRight:4,height:12}),(0,d.jsx)("span",{children:"GIPHY"})]}),drive:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.browse",defaultMessage:"Browse"}),box:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.browse",defaultMessage:"Browse"}),aiSourcePicker:(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.ask",defaultMessage:"Ask"}),(0,g().X)(r.sparklesIcon)]})},n=t.findIndex((e=>e.type===s)),a=t.map((t=>t.title||e[t.type])),p=t.find((e=>e.type===s)),m=p&&"emoji"!==p.type&&c.isAndroid;return(0,d.jsx)(Y().Ay,{tabs:a,selectedIndex:n,onChange:e=>{kt(t[e].type,l)},right:o&&!c.isMobile&&(0,d.jsx)(z().p,{isGray:!0,onClick:o,children:(0,d.jsx)(f().sA,{id:"mediaPicker.tabs.remove",defaultMessage:"Remove"})}),style:{...m&&{borderBottom:"none"}}})}}function Mt(e){let{tab:t,accounts:o,type:n=jt.Drive}=e;const s=(0,a().IS)((e=>({buttonItem:{color:e.mediumTextColor}})),[]);return"accounts"in t?t.accounts&&0===t.accounts.length?(0,d.jsx)(vt,{tab:t,type:n}):(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(F().A,{children:t.accounts.map(((e,o)=>(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:e.account_name}}),onClick:()=>t.onSelect(e),focused:!1},e.account_key)))}),(0,d.jsx)(F().A,{topBorder:!0,children:(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreGoogleAccounts.label"}),onClick:()=>t.onSelect(),style:s.buttonItem,focused:!1})})]}):o?0===o.length?(0,d.jsx)(vt,{tab:t,type:n}):(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(F().A,{children:o.map(((e,o)=>(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:e.accountName}}),onClick:()=>t.onSelect(e),focused:!1},e.accountId)))}),(0,d.jsx)(F().A,{topBorder:!0,children:(0,d.jsx)(_().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreGoogleAccounts.label"}),onClick:()=>t.onSelect(),style:s.buttonItem,focused:!1})})]}):null}function wt(e){let{tab:t}=e;const o=(0,n().v3)();return"accounts"in t?(0,d.jsx)(Mt,{tab:t}):(0,d.jsx)(H().A,{request:o,performRequest:b().QZ,render:(e,o,i)=>{if(!i)return(0,d.jsx)(F().A,{children:(0,d.jsx)(G().A,{})});const n=o&&o.accounts?o.accounts:[];return(0,d.jsx)(Mt,{tab:t,accounts:n})}})}function It(e){var t,o;let{tab:n,isSmallWidth:r,aiSourcePickerStore:l}=e;const c=(0,f().tz)(),u=(0,a().IS)((e=>({captionItem:{textAlign:r?"left":"center",color:e.mediumTextColor},aiResult:{cursor:"pointer",color:e.mediumTextColor,textAlign:"left",hyphens:"auto",padding:"10px 8px",display:"flex",flexDirection:"row"},aiTitleWrapper:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"rgb(55, 53, 47)",fontWeight:500,fontSize:"14px",paddingLeft:8},aiLoadingWrapper:{flex:1,color:e.accentColors.purple[400],fontWeight:500,flexDirection:"row",gap:6,display:"flex",alignItems:"center",padding:"12px 12px",marginLeft:10},loadingDots:{backgroundColor:e.accentColors.purple[400]}})),[r]),p=(0,s().uB)(l,se),m=(0,s().O$)(p);return(0,d.jsxs)(i.Fragment,{children:[m.result&&!1===m.loading&&(0===(null===(t=m.result)||void 0===t?void 0:t.length)?(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:(0,d.jsx)(f().sA,{defaultMessage:"No results found.",id:"mediaPicker.aiSourcePicker.noResultsText"}),style:u.captionItem}):null===(o=m.result)||void 0===o?void 0:o.map((e=>(0,d.jsxs)("div",{style:{...u.aiResult,backgroundColor:m.hover===e.url?"rgba(55,53,47,0.08)":""},onClick:St(e.url,n),onMouseEnter:()=>{p.setState({...m,hover:e.url})},children:[(0,d.jsx)(O().A,{imageURL:"NONE"===e.avatar?n.defaultAvatar:e.avatar,size:24,imageStyle:{borderRadius:34,boxShadow:"0 2px 4px rgba(15, 15, 15, 0.1)"},type:"image_url"}),(0,d.jsx)("div",{style:u.aiTitleWrapper,children:e.title})]},e.url)))),m.loading&&(0,d.jsxs)("div",{style:u.aiLoadingWrapper,children:[c.formatMessage(dt.aiIsFetchingLoader),(0,d.jsx)(K().A,{style:u.loadingDots})]}),!m.result&&!m.loading&&(0,d.jsx)(W,{tab:n,placeholder:n.inputPlaceholder||c.formatMessage(dt.aiSourcePickerPlaceholder),store:p,isSmallWidth:r})]})}function Pt(e,t,o){return()=>{const i=o;if(i){const o=(0,r().pc)({source:i,secureFileConfigRootpath:J().A.secureFileConfig.rootPath,secureFileConfigHostname:J().A.secureFileConfig.hostname}),n=o?o.link:i;e.onChange(n),C().oF(t,{pastedText:n,source:"media_picker"})}}}function Et(e){let{tab:t,isSmallWidth:o,onCancel:i,embedInputValue:r,setEmbedInputValue:l}=e;const c=(0,f().tz)(),u=(0,n().v3)(),p=(0,n().Y0)(),m=(0,s().O$)(ue().subscriptionDataStoreInstance),g=(0,s().K8)((()=>de().Si(u)),[u]),h=(0,s().K8)((()=>te().default.state.isOnboarding),[]),v=(0,a().IS)((e=>({dropZone:{background:(0,j().Qr)([j().Ay.blueWithAlpha(.14),(0,x().X4)(e.contentBackground,.5)])},caption:{textAlign:o?"left":"center",color:e.mediumTextColor},subscriptionLimitWrapper:{display:"flex",alignItems:"center",justifyContent:o?"flex-start":"center"},subscriptionLimitInner:{marginRight:6,color:e.mediumTextColor}})),[o]),y=(0,d.jsx)(N().A,{onClick:Pt(t,u,r),disabled:0===r.length,hovered:!1,children:t.buttonText||(0,d.jsx)(f().sA,{defaultMessage:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"})}),C=(0,d.jsx)(F().A,{desktopStyle:{marginTop:16,display:"flex",paddingTop:0,paddingBottom:12},children:(0,d.jsx)(Z().Ay,{type:"url",value:r,placeholder:t.inputPlaceholder||c.formatMessage(dt.embedPlaceholder),autoFocus:!p.isMobile||void 0,showClearButton:!0,focus:!p.isMobile||void 0,onSubmit:Pt(t,u,r),onChange:e=>l(e.target.value),inputRight:p.isPhone?y:void 0,right:p.isPhone?void 0:y,isRightLastElementOfInput:!0})}),b=(0,d.jsx)(V().V,{type:mt(t)??X().hy,dropTargetKey:"uploadTab",onDropFile:e=>{if("invalidFileDrop"===e.type)return k().D6({label:(0,d.jsx)(f().sA,{id:"mediaPicker.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})}),null;t.onUpload([e.file])},dropzoneStyle:v.dropZone,children:(0,d.jsxs)("div",{style:{marginTop:-24,paddingTop:24},children:[t.fileUpload&&(0,d.jsx)(F().A,{desktopStyle:{marginTop:o?8:24},children:(0,d.jsx)(U().A,{title:(0,d.jsx)(f().sA,{defaultMessage:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),onClick:()=>gt({tab:t}),fullWidth:o})}),(0,d.jsx)(ft,{isSmallWidth:o,tab:t}),t.caption&&(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:t.caption,style:v.caption}),t.preventUploadLimitFreeFileSize||m&&de().Fq(m)&&(0,d.jsx)("div",{style:{height:8}}),m&&!t.preventUploadLimitFreeFileSize&&!de().Fq(m)&&(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:(0,d.jsxs)("div",{style:v.subscriptionLimitWrapper,children:[(0,d.jsx)("div",{style:v.subscriptionLimitInner,children:(0,d.jsx)(f().sA,{defaultMessage:"The maximum size per file is {filesize} MB.",id:"mediaPicker.maximumFileSize.notice",values:{filesize:A().u1}})}),!h&&(0,d.jsx)(ce().A,{subscriptionTier:g||"plus",onClick:()=>{i&&i()},analyticsName:"media_picker",desktopStyle:{marginBottom:1}})]})})]})});return(0,d.jsxs)(d.Fragment,{children:[C,b]})}function Tt(e){let{tab:t,isSmallWidth:o,embedInputValue:s,setEmbedInputValue:a}=e;const r=(0,n().v3)(),l=(0,f().tz)(),{device:c}=r;return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(F().A,{desktopStyle:{marginTop:8},children:(0,d.jsx)(Z().Ay,{type:"url",value:s,placeholder:t.inputPlaceholder||l.formatMessage(dt.embedPlaceholder),autoFocus:!c.isMobile||void 0,showClearButton:!0,focus:!c.isMobile||void 0,onSubmit:Pt(t,r,s),onChange:e=>a(e.target.value)})}),(0,d.jsx)(F().A,{style:t.caption?{}:{marginBottom:6},children:(0,d.jsx)(U().A,{onClick:Pt(t,r,s),title:t.buttonText||(0,d.jsx)(f().sA,{defaultMessage:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"}),fullWidth:o})}),t.caption&&(0,d.jsx)(D().A,{shouldWrapCaption:!0,caption:t.caption,style:{textAlign:c.isMobile?"left":"center",marginBottom:4}})]})}},141301:(e,t,o)=>{o.d(t,{A:()=>n});o(898992),o(354520),o(581454);class i extends(()=>o(757695))().default{getInitialState(){return{recentEmojis:[]}}cleanupSkinTonedRecents(e){var t,i;const n=o(87854).A.getStore((null===(t=o(351360).default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId())||""),s=o(496603).sb(null===(i=n.state)||void 0===i?void 0:i.split(",").filter(Boolean).map((t=>void 0===e?t:o(634201).Fk(t))));return n.setState(s.join(",")),this.setState({...this.state,recentEmojis:s}),s}}const n=new i},210741:(e,t,o)=>{o.d(t,{A:()=>C,l:()=>b});o(581454),o(296540);var i=()=>o(484714),n=()=>o(56366),s=()=>o(637997),a=()=>o(959013),r=()=>o(317909),l=()=>o(755199),c=()=>o(406699),d=()=>o(805751),u=()=>o(419357),p=()=>o(939740),m=()=>o(859428),g=()=>o(553965),h=()=>o(962730),f=()=>o(351360),x=()=>o(463830),j=()=>o(141301),v=()=>o(519116),y=o(474848);function C(){const e=(0,n().K8)((()=>{var e;return null===(e=f().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.emoji_picker_skin_tone}),[]),t=(0,i().v3)(),o=(0,n().uB)(void 0,x().A);return(0,y.jsx)(m().A,{renderTooltip:()=>(0,y.jsx)(a().sA,{defaultMessage:"Select skin tone",id:"emojiPickerSkinTonePicker.selectSkinTone"}),placement:h().W.Bottom,render:i=>(0,y.jsx)(c().Ay,{buttonPopupStore:o,popupType:c().z7.Popup,renderOrigin:t=>(0,y.jsx)(u().KF,{icon:()=>(0,y.jsx)("div",{style:{paddingRight:6},children:void 0!==e?s().pi[e]:"✋"}),style:{fontSize:20,border:"none"},...(0,g().A)(t,i)}),render:o=>function(e){const{parent:t,environment:o,currentSkinTone:i}=e,n=s().pi.map(((e,i)=>({key:e,action:()=>{t.close(),b({environment:o,skinTone:i})},render:t=>(0,y.jsx)(v().A,{...t,insertEmoji:()=>{},emoji:e,variations:void 0,showTooltip:!1})})));return(0,y.jsx)(d().A,{debugName:"EmojiPickerSkinTonePicker",capture:!0,allowEsc:!0,children:(0,y.jsx)(p().Ay,{type:p().Oh.Horizontal,initialFocus:i,sections:[{key:"variations",render:e=>(0,y.jsx)("div",{style:{display:"flex",padding:4},...e}),items:n}]})})}({parent:o,environment:t,currentSkinTone:e}),...i})})}function b(e){const{environment:t,skinTone:o}=e,{currentUserSettingsStore:i}=f().default.state;i&&(void 0!==o&&j().A.cleanupSkinTonedRecents(o),r().createAndCommit({userAction:"mediaPicker.setEmojiSkinTone",environment:t,canUndo:!0,perform:e=>{l().mJ({userSettingsStore:i,transaction:e,data:{emoji_picker_skin_tone:o}})}}))}},333080:(e,t,o)=>{o.d(t,{c:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("emojiRecents",{viewBox:"0 0 28 28",svg:(0,i.jsx)("path",{d:"M14 22.4297C9.58594 22.4297 5.92969 18.7812 5.92969 14.3594C5.92969 9.94531 9.57812 6.28906 13.9922 6.28906C18.4141 6.28906 22.0703 9.94531 22.0703 14.3594C22.0703 18.7812 18.4141 22.4297 14 22.4297ZM14 20.8438C17.5938 20.8438 20.4844 17.9531 20.4844 14.3594C20.4844 10.7656 17.5859 7.88281 13.9922 7.88281C10.3984 7.88281 7.52344 10.7656 7.52344 14.3594C7.52344 17.9531 10.4062 20.8438 14 20.8438ZM10.0469 15.3281C9.69531 15.3281 9.42969 15.0547 9.42969 14.7109C9.42969 14.3594 9.69531 14.0938 10.0469 14.0938H13.375V9.58594C13.375 9.24219 13.6484 8.96875 13.9922 8.96875C14.3438 8.96875 14.6172 9.24219 14.6172 9.58594V14.7109C14.6172 15.0547 14.3438 15.3281 13.9922 15.3281H10.0469Z"})})},347845:(e,t,o)=>{o.d(t,{A:()=>K,h:()=>N});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var i=o(296540),n=()=>o(484714),s=()=>o(56366),a=()=>o(401497),r=()=>o(634201),l=()=>o(522419),c=o(474848);const d=(0,o(340498).wt)("photo",{viewBox:"0 0 19 16",svg:(0,c.jsx)("path",{d:"M17.938 12.18c.03.755-.146 1.33-.532 1.726-.385.396-.971.594-1.758.594H2.992c-.65 0-1.143-.185-1.476-.555-.334-.37-.51-.916-.532-1.64l2.946-2.64a1.66 1.66 0 01.484-.33 1.292 1.292 0 011.063.009c.182.073.354.182.515.328l1.446 1.305L10.96 7.82c.182-.156.37-.273.562-.351a1.607 1.607 0 011.22.008c.202.078.39.197.562.359l4.633 4.344zM6.296 8.008a1.85 1.85 0 01-.945-.25 1.93 1.93 0 01-.68-.68 1.846 1.846 0 01-.25-.945c0-.339.083-.651.25-.938a1.93 1.93 0 01.68-.68c.286-.171.601-.257.945-.257s.656.086.937.258c.282.166.506.393.672.68.172.286.258.598.258.937a1.8 1.8 0 01-.258.945c-.166.287-.39.513-.672.68-.28.166-.593.25-.937.25zm-3.492 7.148c-.844 0-1.482-.213-1.914-.64-.433-.428-.649-1.058-.649-1.891V3.109c0-.833.216-1.463.649-1.89C1.323.786 1.96.57 2.805.57H16.18c.849 0 1.49.216 1.922.649.432.427.648 1.057.648 1.89v9.516c0 .833-.216 1.463-.648 1.89-.433.428-1.073.641-1.922.641H2.805zm.093-1.531h13.196c.36 0 .635-.094.828-.281.193-.193.289-.477.289-.852v-9.25c0-.375-.096-.656-.29-.844-.192-.192-.468-.289-.827-.289H2.898c-.364 0-.643.097-.836.29-.187.187-.28.468-.28.843v9.25c0 .375.093.659.28.852.193.187.472.281.836.281z"})});var u=()=>o(606641),p=()=>o(837420),m=()=>o(798880),g=()=>o(959013),h=()=>o(496603),f=()=>o(534177),x=()=>o(284371),j=()=>o(246826),v=()=>o(436572),y=()=>o(317909),C=()=>o(892632),b=()=>o(493823),S=()=>o(625830),k=()=>o(500507),A=()=>o(623580),M=()=>o(545805),w=()=>o(928600),I=()=>o(204063),P=()=>o(859428),E=()=>o(780054),T=()=>o(989423),L=()=>o(87878),B=()=>o(594794),R=()=>o(937182),D=()=>o(251057),F=()=>o(722872),U=()=>o(962730),W=()=>o(423219),H=()=>o(797162),z=()=>o(508496),_=()=>o(589994),V=()=>o(267419);const O=(0,g().YK)({nameInputPlaceholder:{defaultMessage:"have-fun-with-it",id:"customEmojiUploadPopup.nameInput.placeholder"},urlPasteInputPlaceholder:{defaultMessage:"Paste a link to an image...",id:"customEmojiUploadPopup.urlPasteInput.placeholder"},nameInputDuplicateError:{defaultMessage:"Name already taken",id:"customEmojiUploadPopup.nameInput.duplicateError"},nameInputCharacterError:{defaultMessage:"Name can only contain lowercase letters, numbers, hyphens, or underscores",id:"customEmojiUploadPopup.nameInput.characterError"},nameInputLengthError:{defaultMessage:"Name must be less than 50 characters",id:"customEmojiUploadPopup.nameInput.lengthError"},fileUploadImageError:{defaultMessage:"Only images are supported",id:"customEmojiUploadPopup.fileUpload.imageError"},urlPasteHintImageError:{defaultMessage:"Pasted link does not contain an image.{br}Use {keyboardShortcut} to paste a different link",id:"customEmojiUploadPopup.urlPasteHint.imageError"},urlPasteInputImageError:{defaultMessage:"Pasted link does not contain an image",id:"customEmojiUploadPopup.urlPasteInput.imageError"},customEmojiLimitError:{defaultMessage:"Your workspace has reached the custom emoji limit of {customEmojiLimit}",id:"customEmojiUploadPopup.customEmojiLimit.error"},uploadReplaceButton:{defaultMessage:"Replace",id:"customEmojiUploadPopup.uploadButton.replace"}}),Z="\\p{Ll}\\p{Lo}\\d_-";function K(e){const t=(0,n().v3)(),o=(0,g().tz)(),[d,u]=(0,i.useState)(""),[k,R]=(0,i.useState)(null),[K,N]=(0,i.useState)(null),[Y,J]=(0,i.useState)(null),[Q,X]=(0,i.useState)(!1),[ee,te]=(0,i.useState)(""),oe=e.allowUrlPaste&&t.device.isDesktop,ie=e.allowUrlPaste&&t.device.isMobile,{existingEmojiStore:ne,isEditing:se}=(0,s().K8)((()=>({existingEmojiStore:H().A.state.store,isEditing:H().A.state.isEditing})),[]),ae=(0,s().K8)((()=>null==ne?void 0:ne.getName()),[ne]),re=(0,s().K8)((()=>(0,L().vZ)()),[]),le=(0,s().K8)((()=>{var e;return re?(null===(e=W().A.getData(t,{spaceId:re.id}))||void 0===e?void 0:e.names)??new Set:new Set}),[t,re]),ce=(0,s().K8)((()=>V().A.state.emojiByName),[]),de=(0,s().K8)((()=>(0,L().wA)({spaceStore:re})),[re]),ue=(0,s().K8)((()=>z().default.getConfigKey("custom_emojis_config","limit")),[]),pe=(0,i.useCallback)((e=>{if(u(e),0===e.length)return void R(null);new RegExp(`^[${Z}]*$`,"u").test(e)?e.length>50?R(o.formatMessage(O.nameInputLengthError)):e===ae&&se||!le.has(e)&&!ce.hasOwnProperty(e)?R(null):R(o.formatMessage(O.nameInputDuplicateError)):R(o.formatMessage(O.nameInputCharacterError))}),[ae,se,le,ce,o]);function me(e){const t=(0,l().pc)({source:e,secureFileConfigRootpath:E().A.secureFileConfig.rootPath,secureFileConfigHostname:E().A.secureFileConfig.hostname}),o=t?t.link:e,i=new Image;i.src=o,i.onload=()=>{N({type:"url",url:o,isExistingImage:!1}),J(null)},i.onerror=()=>{J(oe?O.urlPasteHintImageError:O.urlPasteInputImageError)}}(0,i.useEffect)((()=>{null!=ne&&ne.isDefined()&&(pe(ne.getName()),N({type:"url",url:ne.getUrl(),isExistingImage:!0}))}),[ne,se,pe]);const ge=void 0!==re&&(!e.confirmToAdd||Q),he=!se&&le.size>=ue,fe=ge?Boolean(!d)||Boolean(!K)||Boolean(k)||d===ae&&(null==K?void 0:K.isExistingImage)&&se||he:Boolean(!K);const xe=function(e){const{customEmojiLimitReached:t}=e,o=(0,n().v3)();return(0,a().IS)((e=>({wrapper:{padding:"0 16px",display:"flex",flexDirection:"column",fontSize:x().J.UIRegular.desktop},title:{marginTop:12,fontSize:x().J.UIRegular.desktop,color:e.text.primary,fontWeight:x().Wy.semibold},description:{marginTop:2,color:e.text.secondary,fontSize:x().J.UISmall.desktop},errorDescription:{marginTop:2,color:e.text.uiRedPrimary,fontSize:x().J.UISmall.desktop},textInputContainer:{marginTop:20},textInputLabel:{marginBottom:6,color:e.text.secondary,fontWeight:x().Wy.medium,fontSize:x().J.UISmall.desktop},nameErrorText:{marginTop:10,color:e.text.uiRedPrimary,fontSize:x().J.UISmall.desktop},imageErrorText:{marginTop:10,color:e.text.uiRedPrimary,fontSize:x().J.UISmall.desktop,textAlign:"center"},checkboxContainer:{marginTop:12,display:"flex",alignItems:"center",gap:8,fontSize:x().J.UIRegular.desktop,...t&&{color:e.text.quaternary}},buttonFooter:{marginTop:16,marginBottom:12,display:"flex",flexDirection:o.device.isMobile?"column-reverse":"row",gap:8,justifyContent:"space-between",alignItems:"center"},secondaryButton:{color:e.text.secondary},primaryButton:{...o.device.isMobile&&{width:"100%"}},pastePrompt:{marginTop:10,color:e.text.tertiary,textAlign:"center",fontSize:x().J.UISmall.desktop},disabledCheckbox:{stroke:e.stroke.secondary},tooltip:{maxWidth:240,textWrap:"wrap"},divider:{width:19,height:1,borderBottom:`1px solid ${e.darkDividerColor}`},dividerContainer:{display:"flex",gap:4,alignItems:"center",justifyContent:"center",marginTop:10,marginBottom:10,color:e.text.tertiary,textAlign:"center",fontSize:x().J.UISmall.desktop}})),[o.device.isMobile,t])}({customEmojiLimitReached:he}),je=e.showTitle?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{style:xe.title,children:se?(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.title.edit",defaultMessage:"Edit custom emoji"}):(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.title.add",defaultMessage:"Add custom emoji"})}),he?(0,c.jsx)("div",{style:xe.errorDescription,children:(0,c.jsx)(g().sA,{...O.customEmojiLimitError,values:{customEmojiLimit:ue.toLocaleString()}})}):(0,c.jsx)("div",{style:xe.description,children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.description",defaultMessage:"Custom emoji can be used by anyone in your workspace"})})]}):null,ve=(0,c.jsx)(q,{image:K,onFileChanged:e=>{if(null===e)return void N(null);(null==e?void 0:e.name)&&(""===d||"file"===(null==K?void 0:K.type)&&G(K.file.name)===d)&&pe(G(e.name)),N({file:e,type:"file"})},isSavingAsCustomEmoji:ge,largeEmoji:e.largeEmoji,hideReplaceButton:e.allowUrlPaste,setError:J,disabled:he&&ge}),ye=oe&&null===K&&!Boolean(Y)?(0,c.jsx)("div",{style:xe.pastePrompt,children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.pastePrompt.label",defaultMessage:"or {keyboardShortcut} to paste an image link",values:{keyboardShortcut:(0,D().dK)({name:"paste",environment:t})}})}):null,Ce=ie&&null===K?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{style:xe.dividerContainer,children:[(0,c.jsx)("div",{style:xe.divider}),(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.divider.label",defaultMessage:"or"}),(0,c.jsx)("div",{style:xe.divider})]}),(0,c.jsx)(A().A,{placeholder:o.formatMessage(O.urlPasteInputPlaceholder),value:ee,onChange:e=>te(e.target.value),type:"text",autoComplete:"off"})]}):null,be=Boolean(Y)?(0,c.jsx)("div",{style:xe.imageErrorText,children:(0,c.jsx)(g().sA,{...Y,values:{br:(0,c.jsx)("br",{}),keyboardShortcut:(0,D().dK)({name:"paste",environment:t})}})}):null,Se=t.device.isDesktop&&de&&e.confirmToAdd&&null!==K?(0,c.jsx)(P().A,{style:xe.tooltip,placement:U().W.Bottom,alignment:U().C.Start,disableTooltip:!he,renderTooltip:()=>(0,c.jsx)(g().sA,{...O.customEmojiLimitError,values:{customEmojiLimit:ue.toLocaleString()}}),render:e=>(0,c.jsxs)("label",{...e,style:xe.checkboxContainer,htmlFor:"confirmToAddCheckbox",children:[(0,c.jsx)(S().A,{id:"confirmToAddCheckbox",size:14,checked:Q,onClick:()=>X(!Q),disabled:he,stroke:he?xe.disabledCheckbox.stroke:void 0}),(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.confirmToAddCheckbox.label",defaultMessage:"Add to workspace emoji library"})]})}):null,ke=ge&&(!e.allowUrlPaste||e.allowUrlPaste&&null!==K)?(0,c.jsxs)("label",{style:xe.textInputContainer,htmlFor:"emojiName",children:[(0,c.jsx)("div",{style:xe.textInputLabel,children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.input.label",defaultMessage:"Emoji name"})}),(0,c.jsx)(A().A,{id:"emojiName",placeholder:o.formatMessage(O.nameInputPlaceholder),value:d,onChange:e=>pe(e.target.value),type:"text",autoFocus:!0,focus:!0,onSubmit:e=>{e.preventDefault()},autoComplete:"off",disabled:he}),Boolean(k)&&(0,c.jsx)("div",{style:xe.nameErrorText,children:k})]}):null,Ae=(0,c.jsxs)("div",{style:xe.buttonFooter,children:[e.allowUrlPaste&&null!==K?(0,c.jsx)(b().p,{style:xe.secondaryButton,onClick:()=>{N(null),J(null),u(""),R(null),X(!1),te("")},children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.backButton.label",defaultMessage:"Back"})}):t.device.isDesktop?(0,c.jsx)(b().p,{style:xe.secondaryButton,onClick:()=>{var t;H().A.dismiss(),null===(t=e.onCancel)||void 0===t||t.call(e)},children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.cancelButton.label",defaultMessage:"Cancel"})}):null,ie&&null===K?(0,c.jsx)(I().A,{onClick:()=>me(ee),disabled:0===ee.length,style:xe.primaryButton,children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.nextButton.label",defaultMessage:"Next"})}):(0,c.jsx)(I().A,{onClick:function(){var o;fe||(ge?se&&void 0!==ne?async function(e){const{environment:t,name:o,existingEmojiStore:i,image:n}=e,s=i.getModel();if(!s)return;if(n.isExistingImage)y().createAndCommit({userAction:"customEmojiActions.rename",environment:t,canUndo:!0,perform:e=>{y().applyOperation({store:i,operation:s.ops.rename(o),transaction:e})}}),await _().transactionQueue.awaitRecordTransaction(i.pointer),v().D6({label:(0,c.jsx)($,{name:o})});else{const e=async e=>{y().createAndCommit({userAction:"customEmojiActions.replaceImageAndRename",environment:t,canUndo:!0,perform:t=>{y().applyOperation({store:i,operation:s.ops.setUrl(e),transaction:t}),y().applyOperation({store:i,operation:s.ops.rename(o),transaction:t})}}),await _().transactionQueue.awaitRecordTransaction(i.pointer),v().D6({label:(0,c.jsx)($,{name:o})})};"file"===n.type?C().QM({environment:t,file:n.file,bucket:"public",onComplete:e}):"url"===n.type?e(n.url):(0,f().HB)(n)}H().A.dismiss()}({environment:t,name:d,existingEmojiStore:ne,image:K}):((0,T().u4)({environment:t,event:{eventName:"create_custom_emoji",eventProperties:{entrypoint:e.entrypoint,is_first_emoji:0===le.size}}}),function(e){const{environment:t,name:o,currentSpaceStore:i,uploadFileEventHandlers:n,image:s}=e,a=async e=>{const s=(0,B().JH)({environment:t,table:p().e,spaceId:i.getSpaceId()});if(y().createAndCommit({userAction:"customEmojiActions.createCustomEmoji",environment:t,canUndo:!0,perform:n=>{j().eC({environment:t,table:p().e,inMemoryRecordCache:i.inMemoryRecordCache,transaction:n,value:{id:s.id,url:e,name:o,file_ids:[],space_id:s.spaceId,created_by_id:t.currentUser.id,created_by_table:m().oo,created_time:Date.now(),alive:!0}})}}),await _().transactionQueue.awaitRecordTransaction(s),v().D6({label:(0,c.jsx)(g().sA,{id:"uploadCustomEmoji.success",defaultMessage:"{name} has been added to your workspace",values:{name:o}})}),null!=n&&n.onComplete){const e=r().qg.toString(r().qg.fromPointer(s));n.onComplete(e)}};"file"===s.type?C().QM({...n,environment:t,file:s.file,bucket:"public",onComplete:a}):"url"===s.type?a(s.url):(0,f().HB)(s);H().A.dismiss()}({environment:t,name:d,currentSpaceStore:re,uploadFileEventHandlers:e.uploadFileEventHandlers,image:K})):null===(o=e.onUploadWithoutSaving)||void 0===o||o.call(e,K))},disabled:fe,style:xe.primaryButton,children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.saveButton.label",defaultMessage:"Save"})})]});let Me;return Me=t.device.isMobile?{menuType:F().gu.ActionSheet}:{menuType:F().gu.Popup,minWidth:280},(0,c.jsx)(w().A,{...Me,children:(0,c.jsx)(M().A,{debugName:"CustomEmojiUploadPopup",capture:!0,onUp:h().D_,onDown:h().D_,onLeft:h().D_,onRight:h().D_,onBackspace:h().D_,onSelectAll:h().D_,onUndo:h().D_,onRedo:h().D_,onTab:h().D_,onUntab:h().D_,onPaste:oe&&null===K?function(e){e.preventDefault(),me(e.clipboardData.getData("text/plain"))}:h().D_,children:(0,c.jsxs)("div",{style:xe.wrapper,children:[je,ve,ye,Ce,be,Se,ke,Ae]})})})}function q(e){const t=(0,g().tz)(),[o,n]=(0,i.useState)(null),{onFileChanged:s,image:r,isSavingAsCustomEmoji:l,largeEmoji:p,hideReplaceButton:m,setError:h,disabled:j}=e;(0,i.useEffect)((()=>{if(null!==r)if("file"===r.type){const e=new FileReader;e.onload=e=>{e.target&&"string"==typeof e.target.result&&n(e.target.result)},e.readAsDataURL(r.file)}else"url"===r.type?n(r.url):(0,f().HB)(r);else n(null)}),[r]);const v=(0,a().IS)((e=>({uploadIcon:{width:19,height:19,marginRight:8,color:e.icon.secondary},wrapper:{marginTop:20,display:"flex",flexDirection:"column",alignItems:"stretch"},dropZone:{backgroundColor:e.inputBackground,borderRadius:4},dropZoneInnerEmpty:{height:"100%",display:"flex",flexDirection:"row",padding:14,color:e.text.secondary,justifyContent:"center"},dropZoneInnerWithEmoji:{display:"flex",flexDirection:"column",padding:p?16:12,...!m&&{paddingBottom:4},alignItems:"center",gap:4},buttonCaption:{fontSize:x().J.UISmall.desktop,color:e.text.secondary,fontWeight:x().Wy.medium},buttonIcon:{fill:e.icon.secondary,marginRight:4},previewLabel:{fontSize:x().J.UISmall.desktop,color:e.text.secondary,marginBottom:4},emojiContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:6},emojiImage:{width:p?80:48,height:p?80:48,padding:p?6:8,borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:e.darkDividerColor,objectFit:l?"contain":"cover"},darkBackground:{background:e.primaryBlack},lightBackground:{background:e.white}})),[l,p,m]),y=(0,i.useCallback)((e=>{h(null),s(e??null)}),[s,h]),S=(0,i.useCallback)((async()=>{const e=await C().dA({multiple:!1,accept:"image/jpeg, image/png, image/gif, image/webp, image/avif, image/svg+xml"});e.length&&((0,R().B7)({fileMimeType:e[0].type,allowedType:R().Dn})?y(e[0]):h(O.fileUploadImageError))}),[y,h]);return(0,c.jsx)("div",{style:v.wrapper,children:(0,c.jsx)(k().V,{type:R().Dn,style:v.dropZone,dropTargetKey:"customEmoji",onDropFile:e=>{"invalidFileDrop"!==e.type?(h(null),e.file&&y(e.file)):h(O.fileUploadImageError)},disabled:j,children:o?(0,c.jsxs)("div",{style:v.dropZoneInnerWithEmoji,children:[(0,c.jsx)("div",{style:v.previewLabel,children:(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.preview.label",defaultMessage:"Preview"})}),(0,c.jsxs)("div",{style:v.emojiContainer,children:[(0,c.jsx)("img",{style:{...v.emojiImage,...v.lightBackground},src:o,alt:"Light Mode Image"}),(0,c.jsx)("img",{style:{...v.emojiImage,...v.darkBackground},src:o,alt:"Dark Mode Image"})]}),!m&&(0,c.jsx)(b().p,{icon:e=>(0,u().h)({...e,...v.buttonIcon}),onClick:S,"aria-label":t.formatMessage(O.uploadReplaceButton),disabled:j,disabledFeedback:j,children:(0,c.jsx)("div",{style:v.buttonCaption,children:t.formatMessage(O.uploadReplaceButton)})})]}):(0,c.jsxs)(b().p,{style:v.dropZoneInnerEmpty,onClick:S,disabled:j,disabledFeedback:j,children:[d(v.uploadIcon),(0,c.jsx)(g().sA,{id:"customEmojiUploadPopup.uploadButton.label",defaultMessage:"Upload an image"})]})})})}const N=function(){const{open:e,originRect:t,entrypoint:i}=(0,s().K8)((()=>H().A.state.open?{open:!0,originRect:H().A.state.originRect,entrypoint:H().A.state.entrypoint}:{open:!1,originRect:void 0,entrypoint:void 0}),[]),n=(0,s().K8)((()=>{if(H().A.state.open)return H().A.state.uploadFileEventHandlers}),[]);return(0,c.jsx)(o(14235).Ay,{popupType:o(377586).n.Popup,open:e,originRect:t,placementToOrigin:U().W.Bottom,alignmentToOrigin:U().C.Start,onDismiss:()=>H().A.dismiss(),onClosed:()=>H().A.reset(),render:()=>(0,c.jsx)(K,{allowUrlPaste:!1,largeEmoji:!1,showTitle:!0,confirmToAdd:!1,entrypoint:i,uploadFileEventHandlers:n}),sameWidthAsOrigin:!1})};function $(e){let{name:t}=e;return(0,c.jsx)(g().sA,{id:"editCustomEmoji.success",defaultMessage:"{name} has been edited",values:{name:t}})}function G(e){let t=e;const o=e.lastIndexOf(".");-1!==o&&(t=e.slice(0,o));const i=new RegExp(`[^${Z}]`,"gu");return t.toLocaleLowerCase().replace(i,"-")}},423219:(e,t,o)=>{o.d(t,{A:()=>a});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454);const i={value:-1,refetch:!1};class n extends(()=>o(848776))().U{constructor(e,t){super(e,t),this.emitDataMapStore=void 0,this.emitDataMapStore=o(757695).default.createValue({})}getData(e,t){var o;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.keyFn(t);s in this.emitDataMapStore.state||(this.emitDataMapStore.state[s]={...i},this.emitDataMapStore.emit());const a=n||this.emitDataMapStore.state[s].refetch||void 0===(null===(o=this.storeMap[s])||void 0===o?void 0:o.state);return this.emitDataMapStore.state[s].refetch=!1,super.getData(e,t,a)}getDataWithoutRefetch(e,t){const o=this.keyFn(t);return o in this.emitDataMapStore.state||(this.emitDataMapStore.state[o]={...i},this.emitDataMapStore.emit()),super.getData(e,t,!1)}emit(e,t){const o=this.keyFn(e),n=this.emitDataMapStore.state[o].value;t!==n&&n!==i.value&&(this.emitDataMapStore.state[o].refetch=!0),this.emitDataMapStore.state[o].value=t;const s={...this.emitDataMapStore.state[o]};this.emitDataMapStore.setState({...this.emitDataMapStore.state,[o]:s})}getKeys(){return Object.keys(this.emitDataMapStore.state)}}const s=new n((e=>{let{spaceId:t}=e;return t}),(async function(e,t){const i=await o(449506).callApi({eventName:"getCustomEmojisForSpace",environment:e,data:t,headers:(0,o(386164).WS)({spaceId:t.spaceId})});if("failed"===i.type)return;const n={pointers:[],names:new Set,lastFetchedBy:e.currentUser.id},s=o(388821).RecordMapWithRole.create(i.data.recordMap),a=[];for(const{pointer:r}of s.getByTable(o(837420).e)){const e=s.getModel(r);if(!e)continue;const t=e.getName();n.names.add(t),a.push({pointer:r,name:t})}return n.pointers=a.sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>e.pointer)),n}));o(604341).exposeDebugValue("CustomEmojisStore",s);const a=s},519116:(e,t,o)=>{o.d(t,{A:()=>m});o(581454);var i=o(296540),n=()=>o(484714),s=()=>o(56366),a=()=>o(634201),r=()=>o(406699),l=()=>o(939740),c=()=>o(553965),d=()=>o(486666),u=o(474848);const p=(0,i.forwardRef)((function(e,t){const{variations:i,emoji:n,focused:a,onClick:r,onMouseEnter:l,insertEmoji:c,showTooltip:d,id:p,role:m}=e,h=(0,s().uB)(void 0,o(463830).A);return void 0===(0,s().K8)((()=>(0,o(712030).bb)()),[])&&i&&i.length>0?(0,u.jsx)(x,{role:m,id:p,buttonPopupStore:h,emoji:n,focused:a,insertEmoji:c,onClick:r,onMouseEnter:l,showTooltip:d,variations:i,ref:t}):(0,u.jsx)(g,{role:m,id:p,emoji:n,focused:a,onClick:r,onMouseEnter:l,ref:t,showTooltip:d})})),m=p,g=(0,i.forwardRef)((function(e,t){let{events:r,emoji:p,focused:m,onClick:g,onMouseEnter:h,showTooltip:f,id:x,role:j}=e;const v=(0,n().v3)(),y=a().qg.isCustomEmojiString(p),{isMenuListFocusVisible:C}=(0,i.useContext)(l().VU),b=m&&C,S=(0,o(401497).IS)((e=>({emojiButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,...v.device.isMobile?{width:d().UA,height:d().UA,fontSize:d().ru}:{width:d().Sq,height:d().Sq,fontSize:d().Zl},...b&&{boxShadow:e.outlineBlueInputBoxShadow}}})),[v.device.isMobile,b]),k=S.emojiButton.fontSize,A=(0,s().K8)((()=>{if(y){const e=a().qg.fromCustomEmojiString(p);return(0,o(87878).nA)({parentStore:void 0,pointer:e.pointer})}}),[p,y]),M=(0,s().K8)((()=>y?null==A?void 0:A.getName():a().Yf(p,o(267419).A.state)),[A,p,y]);return(0,u.jsx)(o(859428).A,{forceVisibleState:!!b||void 0,placement:b?o(962730).W.Bottom:void 0,allowHover:f,renderTooltip:()=>M,closeDelay:0,disableTooltip:!f,render:e=>(0,u.jsx)(o(704152).A,{role:j,ref:t,id:x,focused:m,onClick:g,...(0,c().A)(r||{},(0,c().A)({onMouseEnter:h},e)),ignoreLocalHoverState:!0,style:S.emojiButton,disallowTabbing:!0,children:y?A?(0,u.jsx)(o(448664).A,{size:k,emojiStore:A}):null:(0,u.jsx)(o(56086).A,{size:k,char:p})},p)})}));function h(e){let{props:t}=e;return(0,u.jsx)("div",{style:{display:"flex",padding:4},children:t.children})}function f(e){const{parent:t,emoji:i,variations:s,insertEmoji:a}=e,r=(0,n().v3)(),c=(s&&s.length>0?[i,...s]:[i]).map(((i,n)=>({key:i,action:e=>{t.close(),(null==s?void 0:s.length)===o(637997).aI&&(0,o(210741).l)({environment:r,skinTone:n}),a(i,n)},render:t=>(0,u.jsx)(p,{...e,...t,emoji:i,variations:void 0,showTooltip:!1})})));return(0,u.jsx)(o(805751).A,{debugName:"EmojiPickerMenuItem",capture:!0,allowEsc:!0,children:(0,u.jsx)(l().Ay,{type:l().Oh.Horizontal,initialFocus:0,sections:[{key:"variations",render:e=>(0,u.jsx)(h,{props:e}),items:c}]})})}const x=(0,i.forwardRef)((function(e,t){const{emoji:n,focused:s,onClick:a,onMouseEnter:l,showTooltip:c,variations:d,insertEmoji:p,buttonPopupStore:m,id:h,role:x}=e,j=(0,i.useCallback)((()=>function(e){e.setState({...e.state,open:!1})}(m)),[m]),v=(0,i.useCallback)((e=>function(e,t){var o;null===(o=e.preventDefault)||void 0===o||o.call(e),t.setState({...t.state,open:!0})}(e,m)),[m]);return(0,u.jsx)(o(545805).A,{debugName:"EmojiPickerMenuItem",capture:s,onEnter:v,onEsc:j,children:(0,u.jsx)(r().Ay,{buttonPopupStore:m,popupType:r().z7.Popup,renderOrigin:e=>(0,u.jsx)(g,{ref:t,emoji:n,focused:s,onClick:a,onMouseEnter:l,showTooltip:c,events:e,id:h,role:x}),render:e=>(0,u.jsx)(f,{parent:e,emoji:n,variations:d,insertEmoji:p})})},n)}))},602031:(e,t,o)=>{o.d(t,{H:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("colorPickerCircle",{viewBox:"0 0 32 32",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"16",cy:"16",r:"14",strokeWidth:"3",fill:"none"}),(0,i.jsx)("circle",{cx:"16",cy:"16",r:"14",opacity:"0.9"})]})})},606641:(e,t,o)=>{o.d(t,{h:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("refresh",{viewBox:"0 0 14 15",svg:(0,i.jsx)("path",{d:"m1.382 7.22 1.294-1.782q.156-.215.376-.215c.22 0 .272.071.376.215l1.289 1.787q.195.263.112.483-.078.215-.39.215H3.69a3.7 3.7 0 0 0 .445 1.24q.337.576.844 1.016.508.435 1.153.673.645.245 1.372.245.771 0 1.445-.288a3.8 3.8 0 0 0 1.182-.777q.277-.225.537-.195a.61.61 0 0 1 .552.674q-.015.258-.254.464-.66.639-1.553 1.02a4.8 4.8 0 0 1-1.91.386 5.13 5.13 0 0 1-3.428-1.304 5.4 5.4 0 0 1-1.132-1.42 5 5 0 0 1-.561-1.734h-.718q-.322 0-.4-.215-.074-.22.117-.488Zm2.666-3.745q.66-.64 1.553-1.02a4.75 4.75 0 0 1 1.904-.387q.99 0 1.865.347a5.2 5.2 0 0 1 1.563.962q.694.615 1.132 1.426.44.806.567 1.728h.703q.317 0 .395.22.083.215-.112.483l-1.294 1.783q-.156.214-.376.214-.215 0-.37-.214l-1.295-1.788q-.195-.263-.112-.478.083-.22.395-.22h.757a3.7 3.7 0 0 0-.454-1.24 3.85 3.85 0 0 0-1.987-1.69 3.8 3.8 0 0 0-1.377-.248q-.762 0-1.44.288a3.8 3.8 0 0 0-1.182.776q-.279.225-.537.195a.63.63 0 0 1-.42-.23.6.6 0 0 1-.137-.439q.02-.258.259-.468"})})},693319:(e,t,o)=>{o.d(t,{D:()=>le,p:()=>ue});o(944114),o(269479),o(898992),o(823215),o(354520),o(672577),o(430670),o(803949),o(581454),o(737550);var i=()=>o(690825),n=o(296540),s=()=>o(17022),a=()=>o(484714),r=()=>o(852507),l=()=>o(56366),c=()=>o(401497),d=()=>o(637997),u=()=>o(669729),p=()=>o(634201),m=()=>o(340498),g=o(474848);const h=(0,m().wt)("emojiActivities",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M14.2227 22.3281C9.87109 22.3281 6.25391 18.7109 6.25391 14.3594C6.25391 10 9.86328 6.39062 14.2148 6.39062C18.5742 6.39062 22.1914 10 22.1914 14.3594C22.1914 18.7109 18.582 22.3281 14.2227 22.3281ZM14.6602 11.5547L16.8477 13.25L18.8164 12.4531L19.5586 10.0078C18.7852 9.07031 17.7852 8.33594 16.6367 7.89844L14.6602 9.5V11.5547ZM9.62891 12.4531L11.5977 13.25L13.793 11.5547V9.51562L11.7852 7.89844C10.6523 8.33594 9.65234 9.07031 8.88672 10L9.62891 12.4531ZM7.31641 14.3828C7.32422 15.7344 7.72266 16.9922 8.41797 18.0625L11.0742 18.0234L12.168 16.625L11.3477 14.0859L9.31641 13.2656L7.31641 14.3828ZM17.3633 18.0547L20.0117 18.0938C20.7148 17.0156 21.1289 15.7266 21.1289 14.3828L19.1289 13.2656L17.0977 14.0859L16.2695 16.6484L17.3633 18.0547ZM14.2227 21.2656C14.8867 21.2656 15.5273 21.1719 16.1367 20.9922L16.6914 18.6016L15.6914 17.3203H12.7227L11.7461 18.5703L12.3086 20.9922C12.918 21.1719 13.5586 21.2656 14.2227 21.2656Z"})}),f=(0,m().wt)("emojiCustom",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M8.295 13.355c-.994 0-1.494-.5-1.494-1.533V8.325c0-1.032.5-1.525 1.494-1.525h3.566c.994 0 1.494.493 1.494 1.525v3.497c0 1.032-.5 1.533-1.494 1.533H8.296zm7.853 0c-1.001 0-1.502-.5-1.502-1.533V8.325c0-1.032.5-1.525 1.502-1.525h3.559c.993 0 1.494.493 1.494 1.525v3.497c0 1.032-.5 1.533-1.494 1.533h-3.56zM8.31 12.252h3.528c.274 0 .415-.141.415-.43V8.325c0-.281-.141-.422-.415-.422H8.31c-.273 0-.406.14-.406.422v3.497c0 .289.133.43.406.43zm7.853 0h3.528c.274 0 .407-.141.407-.43V8.325c0-.281-.133-.422-.407-.422h-3.527c-.282 0-.415.14-.415.422v3.497c0 .289.133.43.414.43zM8.295 21.2c-.994 0-1.494-.493-1.494-1.525V16.17c0-1.025.5-1.526 1.494-1.526h3.566c.994 0 1.494.5 1.494 1.526v3.504c0 1.032-.5 1.525-1.494 1.525H8.296zm7.853 0c-1.001 0-1.502-.493-1.502-1.525V16.17c0-1.025.5-1.526 1.502-1.526h3.559c.993 0 1.494.5 1.494 1.526v3.504c0 1.032-.5 1.525-1.494 1.525h-3.56zM8.31 20.097h3.528c.274 0 .415-.14.415-.422v-3.497c0-.289-.141-.43-.415-.43H8.31c-.273 0-.406.141-.406.43v3.497c0 .281.133.422.406.422zm7.853 0h3.528c.274 0 .407-.14.407-.422v-3.497c0-.289-.133-.43-.407-.43h-3.527c-.282 0-.415.141-.415.43v3.497c0 .281.133.422.414.422z"})}),x=(0,m().wt)("emojiFlags",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M8.49902 22.0312C8.17871 22.0312 7.90527 21.7656 7.90527 21.4453V8.46094C7.90527 7.75 8.25684 7.34375 8.7959 7.10156C9.38965 6.83594 9.85059 6.70312 11.0693 6.70312C13.9678 6.70312 15.7725 8.11719 18.5225 8.11719C19.8662 8.11719 20.585 7.78906 20.9678 7.78906C21.4209 7.78906 21.7803 8.03125 21.7803 8.45312V16.3828C21.7803 17.1016 21.4287 17.5078 20.8896 17.75C20.2959 18.0156 19.8428 18.1484 18.624 18.1484C15.874 18.1484 14.0615 16.7344 11.1709 16.7344C10.0225 16.7344 9.28809 17.0156 9.09277 17.1016V21.4453C9.09277 21.7734 8.82715 22.0312 8.49902 22.0312ZM18.624 16.9688C19.8428 16.9688 20.4912 16.6094 20.6006 16.3516V9.04688C20.0771 9.19531 19.374 9.29688 18.5225 9.29688C15.6553 9.29688 13.8193 7.88281 11.0693 7.88281C9.85059 7.88281 9.20215 8.24219 9.09277 8.5V15.8359C9.53027 15.6562 10.3115 15.5547 11.1709 15.5547C14.1787 15.5547 16.0225 16.9688 18.624 16.9688Z"})}),j=(0,m().wt)("emojiFood",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M7.89355 23.2188C7.13574 23.6953 6.52637 23.4375 6.12793 23.0312C5.66699 22.5703 5.4873 21.9453 5.9248 21.2422L12.4482 10.875C13.9639 8.46875 16.2373 7.82031 18.1279 9.17188C17.9248 7.57812 18.4404 5.30469 19.5654 5.5625C20.2139 5.72656 20.2842 6.58594 20.0498 7.53906C20.9873 6.39062 22.1826 5.61719 22.8779 6.3125C23.5732 7.01562 22.7998 8.21094 21.6514 9.14844C22.6123 8.91406 23.4795 8.98438 23.6357 9.64844C23.9014 10.7656 21.5811 11.2812 19.9873 11.0625C21.2998 12.9688 20.6592 15.2031 18.2842 16.6953L7.89355 23.2188ZM10.5732 18.8125C10.7764 18.6094 11.0889 18.6016 11.2998 18.8125L11.8389 19.3438L12.7061 18.7969L11.9717 18.0859C11.7607 17.875 11.7686 17.5625 11.9639 17.3594C12.1748 17.1562 12.4873 17.1484 12.6904 17.3516L13.5967 18.2422L17.6748 15.6797C19.8076 14.3359 20.0732 12.7266 18.5967 11.2266L17.9326 10.5469C16.6279 9.23438 15.2061 9.28906 13.9639 10.7812L15.4717 12.2656C15.6826 12.4766 15.6826 12.7812 15.4873 12.9844C15.2842 13.1953 14.9717 13.2031 14.7607 12.9922L13.3701 11.625L12.8232 12.4922L13.7061 13.3594C13.917 13.5703 13.917 13.8828 13.7139 14.0859C13.5029 14.2891 13.1982 14.2969 12.9873 14.0859L12.2686 13.3828L6.94043 21.8516C6.77637 22.1016 7.04199 22.3594 7.2998 22.1953L10.9482 19.9062L10.5811 19.5391C10.3701 19.3359 10.3701 19.0156 10.5732 18.8125Z"})}),v=(0,m().wt)("emojiNature",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M5.83008 10.4766C5.83008 10.0547 5.87695 8.71875 6.06445 7.96094C6.2832 7.0625 7.18164 7.10938 7.63477 7.64062C8.49414 8.61719 9.5332 8.98438 10.7363 8.98438C12.166 8.98438 13.4551 8.625 14.7285 8.625C18.4238 8.625 21.1035 11 21.1035 14.2891C21.1035 15.2109 20.9082 16.0625 20.5488 16.8125C21.3535 17.9531 22.3848 19.6016 22.3848 20.5859C22.3848 21.2344 21.9238 21.7734 21.3457 21.7734C21.0723 21.7734 20.8145 21.6406 20.6973 21.2656C20.3301 20.0859 20.1191 19.0469 19.6504 18.1484C18.5098 19.3906 16.7676 20.1328 14.6973 20.1328C9.32227 20.1328 5.83008 16.3047 5.83008 10.4766ZM10.4004 12.2969C10.2832 11.9453 10.666 11.7109 10.916 12.0469C11.8145 13.2188 13.127 13.6094 14.6113 13.8594C16.9551 14.2422 18.5879 14.8438 19.6816 15.8125C19.8379 15.3438 19.9238 14.8359 19.9238 14.2891C19.9238 11.6719 17.7754 9.80469 14.7285 9.80469C14.2051 9.80469 13.6582 9.875 13.0332 9.96094C12.3457 10.0547 11.5801 10.1641 10.7363 10.1641C9.47852 10.1641 8.10352 9.71094 7.22852 8.91406C7.1582 8.85156 7.10352 8.85938 7.08789 8.96094C7.01758 9.38281 7.00977 9.96094 7.00977 10.4766C7.00977 15.6562 9.98633 18.9531 14.6973 18.9531C16.541 18.9531 18.041 18.2734 18.9551 17.1484C17.9316 15.9688 16.7129 15.4766 14.2129 14.8828C12.3691 14.4297 10.8926 13.8203 10.4004 12.2969Z"})}),y=(0,m().wt)("emojiObjects",{viewBox:"0 0 29 28",svg:(0,g.jsx)("path",{d:"M13.6611 3.90625V2.40625C13.6611 2.03906 13.9658 1.72656 14.333 1.72656C14.7002 1.72656 15.0127 2.03906 15.0127 2.40625V3.90625C15.0127 4.26562 14.708 4.57812 14.333 4.57812C13.9658 4.57812 13.6611 4.26562 13.6611 3.90625ZM8.85645 6.45312L7.79395 5.38281C7.53613 5.125 7.53613 4.71094 7.79395 4.4375C8.05957 4.17969 8.49707 4.17969 8.74707 4.4375L9.80176 5.50781C10.0596 5.76562 10.0674 6.1875 9.80176 6.45312C9.54395 6.71875 9.11426 6.71094 8.85645 6.45312ZM18.8564 5.50781L19.9268 4.4375C20.1846 4.17969 20.5986 4.17969 20.8721 4.4375C21.1299 4.71094 21.1299 5.125 20.8721 5.38281L19.8018 6.45312C19.5439 6.71094 19.1299 6.71875 18.8564 6.45312C18.5908 6.1875 18.5986 5.76562 18.8564 5.50781ZM14.333 6.03125C17.0908 6.03125 19.2705 8.03906 19.2705 10.5938C19.2705 13.4219 17.5752 14.125 17.0986 19.0078C17.0752 19.2812 16.9268 19.4531 16.6377 19.4531H12.0283C11.7393 19.4531 11.5908 19.2812 11.5596 19.0078C11.0908 14.125 9.40332 13.4219 9.40332 10.5938C9.40332 8.03906 11.5674 6.03125 14.333 6.03125ZM14.333 7.17969C12.2783 7.17969 10.5518 8.60938 10.5518 10.5938C10.5518 12.6875 11.9346 13.1719 12.6064 18.3047H16.0596C16.7314 13.1719 18.1221 12.6875 18.1221 10.5938C18.1221 8.60938 16.3877 7.17969 14.333 7.17969ZM7.25488 11.6484H5.75488C5.39551 11.6484 5.09082 11.3359 5.09082 10.9766C5.09082 10.6094 5.39551 10.2969 5.75488 10.2969H7.25488C7.62207 10.2969 7.94238 10.6016 7.94238 10.9766C7.94238 11.3438 7.62207 11.6484 7.25488 11.6484ZM22.8955 11.6484H21.3955C21.0361 11.6484 20.7236 11.3438 20.7236 10.9766C20.7236 10.6016 21.0361 10.2969 21.3955 10.2969H22.8955C23.2627 10.2969 23.5752 10.6094 23.5752 10.9766C23.5752 11.3359 23.2627 11.6484 22.8955 11.6484ZM12.0049 21.0469C11.7549 21.0469 11.5596 20.8594 11.5596 20.6016C11.5596 20.3438 11.7549 20.1562 12.0049 20.1562H16.6611C16.9189 20.1562 17.1143 20.3438 17.1143 20.6016C17.1143 20.8594 16.9189 21.0469 16.6611 21.0469H12.0049ZM14.333 23.1875C13.1768 23.1875 12.2002 22.6094 12.1533 21.75H16.5127C16.458 22.6094 15.4814 23.1875 14.333 23.1875Z"})}),C=(0,m().wt)("emojiPeople",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M14.5557 22.3281C10.2041 22.3281 6.58691 18.7109 6.58691 14.3594C6.58691 10 10.1963 6.39062 14.5479 6.39062C18.9072 6.39062 22.5244 10 22.5244 14.3594C22.5244 18.7109 18.915 22.3281 14.5557 22.3281ZM14.5557 21C18.2432 21 21.1963 18.0469 21.1963 14.3594C21.1963 10.6719 18.2354 7.71875 14.5479 7.71875C10.8604 7.71875 7.92285 10.6719 7.92285 14.3594C7.92285 18.0469 10.8682 21 14.5557 21ZM12.2354 13.6641C11.7432 13.6641 11.3135 13.2188 11.3135 12.5938C11.3135 11.9609 11.7432 11.5156 12.2354 11.5156C12.7354 11.5156 13.165 11.9609 13.165 12.5938C13.165 13.2188 12.7275 13.6641 12.2354 13.6641ZM16.8682 13.6641C16.376 13.6641 15.9463 13.2188 15.9463 12.5938C15.9463 11.9609 16.376 11.5156 16.8682 11.5156C17.3682 11.5156 17.7979 11.9609 17.7979 12.5938C17.7979 13.2188 17.3604 13.6641 16.8682 13.6641ZM14.5479 18.2734C12.915 18.2734 11.8213 17.1875 11.8213 16.6719C11.8213 16.4844 12.001 16.3984 12.1729 16.4766C12.7354 16.7812 13.415 17.1406 14.5479 17.1406C15.6807 17.1406 16.3604 16.7891 16.9307 16.4766C17.0947 16.3984 17.2744 16.4844 17.2744 16.6719C17.2744 17.1875 16.1807 18.2734 14.5479 18.2734Z"})}),b=(0,m().wt)("emojiPlus",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M14 22c-4.369 0-8-3.631-8-8 0-4.376 3.624-8 7.992-8C18.37 6 22 9.624 22 14c0 4.369-3.623 8-8 8zm-3.828-7.992c0 .4.283.667.69.667h2.456v2.462c0 .4.274.69.674.69.408 0 .69-.282.69-.69v-2.463h2.463c.4 0 .69-.266.69-.666 0-.408-.29-.69-.69-.69h-2.463v-2.455c0-.408-.282-.698-.69-.698-.4 0-.674.29-.674.698v2.455h-2.455c-.408 0-.69.282-.69.69z"})});const S=(0,m().wt)("emojiSymbols",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M14.8887 22.3281C10.5371 22.3281 6.91992 18.7109 6.91992 14.3594C6.91992 10 10.5293 6.39062 14.8809 6.39062C19.2402 6.39062 22.8574 10 22.8574 14.3594C22.8574 18.7109 19.248 22.3281 14.8887 22.3281ZM14.8887 21C18.5762 21 21.5293 18.0469 21.5293 14.3594C21.5293 10.6719 18.5684 7.71875 14.8809 7.71875C11.1934 7.71875 8.25586 10.6719 8.25586 14.3594C8.25586 18.0469 11.2012 21 14.8887 21ZM14.0293 18.0703C13.7715 18.0703 13.5605 17.9609 13.3652 17.7031L11.459 15.3594C11.3496 15.2109 11.2793 15.0469 11.2793 14.875C11.2793 14.5312 11.5449 14.2578 11.8809 14.2578C12.0996 14.2578 12.2715 14.3203 12.459 14.5703L13.998 16.5625L17.2402 11.3594C17.3887 11.1328 17.584 11.0078 17.7793 11.0078C18.1074 11.0078 18.4199 11.2344 18.4199 11.5859C18.4199 11.7578 18.3184 11.9297 18.2324 12.0859L14.6621 17.7031C14.5059 17.9453 14.2871 18.0703 14.0293 18.0703Z"})}),k=(0,m().wt)("emojiTravel",{viewBox:"0 0 28 28",svg:(0,g.jsx)("path",{d:"M10.4102 6.59999L13.2496 12.8777L8.06153 13.4701L6.47152 10.5536C6.46512 10.5533 6.45784 10.5531 6.44961 10.5531H6.37773V17.3453H6.44961C6.45975 17.3453 6.46847 17.345 6.4759 17.3446L8.06153 14.4362L13.2496 15.0285L10.4102 21.3062H10.7855C10.8271 21.3062 10.8762 21.2947 10.944 21.2204L16.192 15.4882C16.343 15.3193 16.5192 15.1534 16.7671 15.0493C17.0082 14.9481 17.2567 14.9312 17.4965 14.9312H20.6449C21.3092 14.9312 21.8867 14.7803 22.2776 14.5596C22.6756 14.3348 22.7834 14.1043 22.787 13.953C22.7834 13.7972 22.6746 13.5671 22.2784 13.3442C21.888 13.1245 21.3105 12.975 20.6449 12.975H17.4965C17.2572 12.975 17.0066 12.9583 16.7636 12.8544C16.5154 12.7483 16.3396 12.5795 16.1896 12.4076L10.9354 6.67645C10.8794 6.6124 10.8381 6.59999 10.7855 6.59999H10.4102ZM9.13689 5.81573C9.30066 5.53389 9.59424 5.39999 9.8793 5.39999H10.7855C11.1991 5.39999 11.562 5.57301 11.8335 5.88032L17.0848 11.6083L17.0901 11.6144C17.1939 11.7339 17.2288 11.7483 17.2348 11.7508C17.2476 11.7563 17.2983 11.775 17.4965 11.775H20.6449C21.4716 11.775 22.2612 11.9576 22.8669 12.2984C23.4624 12.6335 23.9806 13.1898 23.9871 13.948L23.9872 13.9583C23.9807 14.7134 23.4613 15.2693 22.8677 15.6045C22.2625 15.9462 21.4728 16.1312 20.6449 16.1312H17.4965C17.2988 16.1312 17.2464 16.1496 17.2317 16.1558C17.2242 16.1589 17.1888 16.1735 17.0849 16.29L17.0797 16.2958L11.8302 22.0296C11.5699 22.3147 11.2127 22.5062 10.7855 22.5062H9.8793C9.58383 22.5062 9.29417 22.3619 9.13515 22.0846C8.97977 21.8136 8.99861 21.5052 9.11616 21.2555L11.4778 16.034L8.72831 15.7201L7.50843 17.9576C7.50827 17.9579 7.50811 17.9582 7.50795 17.9585C7.40427 18.1496 7.25122 18.3087 7.04689 18.4132C6.85046 18.5136 6.64222 18.5453 6.44961 18.5453H6.11367C5.88888 18.5453 5.64429 18.4742 5.45252 18.2888C5.25823 18.101 5.17773 17.8533 5.17773 17.6172V10.2891C5.17773 10.0541 5.25718 9.80874 5.44527 9.62065C5.63336 9.43256 5.87871 9.35312 6.11367 9.35312H6.44961C6.64191 9.35312 6.85261 9.38475 7.05157 9.48866C7.25706 9.59597 7.40839 9.75869 7.51001 9.95148L8.72831 12.1862L11.4778 11.8722L9.11482 6.64781C9.00203 6.40262 8.97622 6.09223 9.13689 5.81573Z"})});var A=()=>o(464699),M=()=>o(959013),w=()=>o(496603),I=()=>o(534177),P=()=>o(284371),E=()=>o(901997),T=()=>o(736767),L=()=>o(197190),B=()=>o(939740),R=()=>o(89924),D=()=>o(859428),F=()=>o(87878),U=()=>o(63467),W=()=>o(963589),H=()=>o(486666),z=()=>o(948033),_=()=>o(351360),V=()=>o(423219),O=()=>o(797162),Z=()=>o(970585),K=()=>o(712030);const q=1,N=6048e5;function $(e,t,o){if(void 0===e||void 0===t)return 0;const i=o-t,n=e*Math.pow(.5,i/N);return Math.round(n)}const G=100;class Y extends(()=>o(757695))().default{getInitialState(){return{stores:{}}}getStore(e){if(e)return this.state.stores[e]||(this.state.stores[e]=new(o(178624).R)({key:`emojiFrecency:${e}`,namespace:o(419494).Bq,important:!0,trackingType:"necessary"})),this.state.stores[e]}getEmojiFrecencyMap(){var e;const t=this.getStore(null===(e=_().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId());if(!t)return{};return t.state??{}}}const J=new Y;var Q=()=>o(267419),X=()=>o(141301),ee=()=>o(87854),te=()=>o(285790),oe=()=>o(962730);function ie(e){const t=(0,M().tz)(),o=(0,c().IS)((e=>({wrapper:{borderTop:`solid 1px ${e.stroke.secondary}`,display:"flex",justifyContent:"space-between",paddingTop:8,paddingBottom:10,paddingLeft:12,paddingRight:12},categoryIcon:{width:28,height:28,fill:e.icon.secondary,transform:"scale(1.1)"}})),[]);return(0,g.jsx)("div",{style:o.wrapper,children:le.map(((i,s)=>e.isHidden(i)?null:(0,g.jsx)(D().A,{alignment:oe().C.Start,placement:oe().W.Bottom,render:s=>(0,n.createElement)(te().A,{focused:e.isFocused(i),disabled:e.isDisabled(i),...s,key:i.id,ariaLabel:t.formatMessage({id:"emojiPicker.category.label",defaultMessage:"Jump to category: {category}"},{category:i.category??i.id}),icon:()=>{var e;return null===(e=i.icon)||void 0===e?void 0:e.call(i,o.categoryIcon)},style:{width:32,height:32},onClick:t=>{e.onCategoryClick(i,t)}}),renderTooltip:e=>(0,g.jsx)("div",{...e,children:i.title})},i.id)))})}var ne=()=>o(519116);const se=(0,M().YK)({noResults:{defaultMessage:"No results",id:"emojiPicker.noResults.message"}}),ae=(0,g.jsx)(M().sA,{id:"emojiPicker.addCustomEmoji",defaultMessage:"Add emoji"}),re="__ADD_CUSTOM_EMOJI__",le=[{id:"recent",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.recent",defaultMessage:"Recent"}),icon:o(333080).c},{id:"callout",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.callout",defaultMessage:"Callout"})},{id:"people",category:"People & Body",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.people",defaultMessage:"People"}),icon:C},{id:"nature",category:"Animals & Nature",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.animals",defaultMessage:"Animals and nature"}),icon:v},{id:"food",category:"Food & Drink",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.food",defaultMessage:"Food and drink"}),icon:j},{id:"activities",category:"Activities",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.activity",defaultMessage:"Activity"}),icon:h},{id:"travel",category:"Travel & Places",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.travel",defaultMessage:"Travel and places"}),icon:k},{id:"objects",category:"Objects",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.objects",defaultMessage:"Objects"}),icon:y},{id:"symbols",category:"Symbols",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.symbols",defaultMessage:"Symbols"}),icon:S},{id:"flags",category:"Flags",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.flags",defaultMessage:"Flags"}),icon:x},{id:"custom",title:(0,g.jsx)(M().sA,{id:"emojiPicker.section.custom",defaultMessage:"Custom"}),icon:f},{id:"add",title:ae,icon:b}],ce=Object.fromEntries(le.map((e=>[e.id,e]))),de=["💡","👉","☝","👌","🔑","🚧","⚠️","🔥","📌","✂️","❓","🚫","⛔","⏰","☎️","🚨","♻️","✅","🔒","📎","📖","🗣","➡️","📢","🛠","⚙"];function ue(e){const{onSubmit:t,isInline:o,onUpload:m,iconLoggingData:h,onNoResults:f,comboboxProps:x}=e,j=(0,a().v3)(),v=(0,c().DP)(),y=(0,M().tz)(),C=(0,a().Y0)(),b=(0,W().X)("emoji_frecency"),S=(0,l().K8)((()=>Math.floor((0,z().so)(j,e.menuRef))),[j,e.menuRef]),k=(0,l().K8)((()=>(0,z().uu)(j)),[j]),N=(0,l().K8)((()=>(0,F().wA)({spaceStore:(0,F().vZ)()})),[]),Y=C.isDesktop&&N,te=(0,n.useMemo)((()=>s().A.withListenerIgnored((()=>b?J.getEmojiFrecencyMap():{}))),[b]),oe=(0,n.useMemo)((()=>b?Object.keys(te).sort(((e,t)=>te[t].f!==te[e].f?te[t].f-te[e].f:te[t].u-te[e].u)).slice(0,H().Te*S):[]),[te,S,b]),le=(0,l().K8)((()=>{var e;const t=(0,F().vZ)();if(!t)return[];return((null===(e=V().A.getData(j,{spaceId:t.id}))||void 0===e?void 0:e.pointers)??[]).map((e=>p().qg.toString(p().qg.fromPointer(e))))}),[j]),ue=(0,n.useCallback)((e=>{t(e),b?function(e){var t;const o=J.getStore(null===(t=_().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId());if(!o)return;let i=o.state??{};const n=Date.now();for(const a in i)i[a].f=$(i[a].f,i[a].u,n);const s=(0,K().t4)(e);if(s in i?(i[s].f+=q,i[s].u=n):i[s]={f:q,u:n},Object.keys(i).length>G){const e=Object.entries(i);e.sort(((e,t)=>e[1].f!==t[1].f?t[1].f-e[1].f:t[1].u-e[1].u)),i=Object.fromEntries(e.slice(0,G))}o.setState(i)}(e):function(e,t){var o;const i=ee().A.getStore((null===(o=_().default.state.currentSpaceStore)||void 0===o?void 0:o.getSpaceId())||""),n=i.state,s=w().sb(w().KC([(0,K().t4)(e)],null==n?void 0:n.split(",").filter(Boolean))),a=w().s(s,t);i.setState(a.join(",")),X().A.setState({...X().A.state,recentEmojis:a})}(e,H().Te*S),h&&E().aU(j,"pick_emoji",{icon:e,...h})}),[t,b,h,S,j]),fe=(0,Q()._)(),xe=(0,l().K8)(K().bb,[]),je=(0,n.useCallback)((e=>{const t=void 0===xe?p().Fq(e,fe):[];return{key:e,action:()=>{0===t.length&&ue(e)},render:o=>(0,g.jsx)(ne().A,{...o,emoji:e,showTooltip:!0,variations:t,insertEmoji:ue})}}),[ue,fe,xe]),ve=(0,l().K8)((()=>{const t=function(e){const{environment:t,filter:o,isCallout:i,maxEmojisPerSection:n,showCategoriesThreshold:s,customEmojiStrings:a,shouldShowCustomAddButton:r,isEmojiFrecencyEnabled:l,frequentlyUsedEmojis:c,emojiFrecencyMap:d}=e,m=function(e){return w().oE([e.filterIsEmpty?ce.recent:void 0,e.isCallout?ce.callout:void 0,ce.people,ce.nature,ce.food,ce.activities,ce.travel,ce.objects,ce.symbols,ce.flags,ce.custom])}({filterIsEmpty:!(null!=o&&o.trim()),isCallout:i}),g=p().f7(o)??"",h=o.split(" ").filter(Boolean),f=m.map((e=>{const o=function(e,t,o,i){return"recent"===e.id?o?i:X().A.state.recentEmojis:"callout"===e.id?de:"custom"===e.id?t:Q().A.state.emojiByCategory[e.category]||[]}(e,a,l,c),i=function(e,t,o,i,n){const s=w().oE(t.map((t=>{if(""===o)return{rank:100,emoji:t};const s=(0,u().$)(t,Q().A.state);let a=[];if(s&&s.keywords)a=s.keywords||[];else if(p().qg.isCustomEmojiString(t)){var r;const o=p().qg.fromCustomEmojiString(t).pointer,i=e.currentUser.id;if(!i)return;const n=null===(r=e.defaultRecordCache.inMemoryRecordCache.getRecord({pointer:o,userId:i}))||void 0===r?void 0:r.value;if(!n||!n.alive)return;a=p().AP(n.name)}const l=o.length<3||o.includes(" ")?a:a.map((e=>e.replaceAll(" ",""))),c=o.indexOf(t);if(-1!==c)return{rank:100-c+me(t,n),emoji:t};const d=":",m=l.findIndex((e=>e===`${d}${o}`));if(-1!==m)return{rank:100-m+me(t,n),emoji:t};const g=l.findIndex((e=>e===o));if(-1!==g)return{rank:10*(10-g)+me(t,n),emoji:t};const h=l.findIndex((e=>e.startsWith(o)));if(-1!==h)return{rank:10-h+me(t,n),emoji:t};if(i.length>1){const e=s&&s.uniqueKeywords||[];if(i.every((t=>e.find((e=>e.startsWith(t))))))return{rank:i.length+me(t,n),emoji:t}}return l.some((e=>e.includes(o)))?{rank:1+me(t,n),emoji:t}:void 0})));return s.sort(((e,t)=>t.rank-e.rank))}(t,o,g,h,d);return{category:e,emojis:i.map((e=>({rank:e.rank,emoji:ge(e.emoji)})))}})),x=[];let j=0;for(const{category:u,emojis:p}of f){if(r&&"custom"===u.id){const e={rank:-1/0,emoji:re};p.unshift(e)}let e=0;for(;e<p.length;){const t=p.slice(e,e+n);x.push({id:u.id,title:0===e?u.title:void 0,emojis:t}),e+=t.length}j+=p.length}if(""===o||j>s){return x.map((e=>({...e,emojis:e.emojis.map((e=>{let{emoji:t}=e;return t}))})))}const v=w().Ul(x.flatMap((e=>e.emojis)),(e=>-e.rank)).map((e=>{let{emoji:t}=e;return t}));if(0===v.length)return[];return[{emojis:v}]}({environment:j,filter:e.filter,isCallout:e.isCallout??!1,maxEmojisPerSection:S,showCategoriesThreshold:Math.floor(S*k/2),customEmojiStrings:le,shouldShowCustomAddButton:Y,isEmojiFrecencyEnabled:b,frequentlyUsedEmojis:oe,emojiFrecencyMap:te});return t}),[j,e.filter,e.isCallout,S,k,Y,le,oe,b,te]),ye=(0,n.useRef)(null),Ce=(0,n.useMemo)((()=>{const e=[];for(const[t,o]of ve.entries()){let i;i=C.isMobile?H().UA:H().Sq;const n=void 0!==o.title,s=t===ve.length-1||void 0!==ve[t+1].title;n&&(C.isMobile?i+=47.5:i+=33.5),s&&C.isMobile&&(i+=10),e.push(i)}return e}),[ve,C]),be=(0,i().Te)({count:ve.length,getScrollElement:()=>ye.current,estimateSize:e=>Ce[e]}),Se=(0,n.useCallback)((e=>{const t=ve.findIndex((t=>t.id===e));-1!==t&&be.scrollToIndex(t,{behavior:"auto",align:"start"})}),[be,ve]),ke=(0,n.useRef)(null);(0,r().w)((()=>{b||X().A.cleanupSkinTonedRecents((0,K().bb)()),async function(){await(0,U().y)(),await async function(){if(!pe){await Q().A.waitUntilLoaded();for(const t in Q().A.state.positionalEmojiData){var e;const o=null===(e=(0,u().$)(t,Q().A.state))||void 0===e?void 0:e.keywords;o&&(d().fB[t]={...d().fB[t],uniqueKeywords:w().sb(o.flatMap((e=>e.split(" "))))})}pe=!0}}()}()}));const Ae=(0,l().uB)(void 0,Z().A);(0,r().l)((()=>{Ae.setState({...Ae.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}));const Me=Y?1===ve.length&&ve[0].emojis[0]===re:0===ve.length;(0,n.useEffect)((()=>{Me?Ae.unsetFocus():Ae.setState({...Ae.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}),[e.filter,Ae,Me]),(0,n.useEffect)((()=>{0===ve.length&&(null==f||f())}),[ve,f]);const we=(0,n.useMemo)((()=>Y?{key:"custom-emoji-add",action:()=>{ke.current&&O().A.setState({open:!0,isEditing:!1,entrypoint:"picker",originRect:ke.current.getBoundingClientRect(),uploadFileEventHandlers:m})},render:e=>(0,g.jsx)(D().A,{renderTooltip:()=>ae,render:t=>(0,g.jsx)(L().A,{...e,...t,ref:ke,ignoreLocalHoverState:!1,style:{width:28,height:28,margin:2,display:"flex",justifyContent:"center",alignItems:"center",border:`1px solid ${v.stroke.primary}`,cursor:"pointer",borderRadius:15},children:(0,A().b)({height:14,width:14,color:v.icon.secondary})})})}:null),[m,Y,v]),Ie=[];let Pe,Ee=!1;if(Me)Ie.push({key:"no results",items:[{key:"no results",action:()=>{ke.current&&Y&&O().A.setState({open:!0,isEditing:!1,entrypoint:"no_results",originRect:ke.current.getBoundingClientRect(),uploadFileEventHandlers:m})},render:(e,t)=>(0,g.jsxs)("div",{style:{...o&&{width:"100%"},display:"flex",flexDirection:o?"row":"column"},children:[(0,g.jsx)(T().A,{...!Y&&e,caption:y.formatMessage(se.noResults),style:{fontWeight:P().Wy.medium,marginBottom:2,marginLeft:2,height:20,boxSizing:"content-box"}}),Y?(0,g.jsxs)(L().A,{...e,ref:ke,style:{display:"flex",alignItems:"center",gap:6,padding:"4px 8px",margin:o?"2px 8px":"0 12px",height:28,borderRadius:6,border:`1px solid ${v.stroke.primary}`,fontWeight:P().Wy.medium,fontSize:P().J.UIRegular.desktop,whiteSpace:"nowrap"},children:[(0,A().b)({height:14,width:14,color:v.icon.primary}),ae]}):null]})}],render:e=>(0,g.jsx)(R().A,{...e})});else if(1===ve.length&&void 0===ve[0].id){const e=w().sb(ve[0].emojis).map((e=>e===re?we:je(e))).filter(I().Pe);Ie.push({key:"search-results",items:e,render:e=>(0,g.jsx)(R().A,{shouldShowBottomDivider:!0,children:(0,g.jsx)("div",{style:(0,z().ze)(j,v),children:e.children})},e.key)})}else Ee=!0,be.getVirtualItems().map((e=>{var t;const{key:o,index:i,start:n,end:s,size:a}=e,r=ve[i],l=void 0!==r.title,c=i===ve.length-1||void 0!==ve[i+1].title,[d,u]=[be.scrollOffset??0,(be.scrollOffset??0)+((null===(t=be.scrollRect)||void 0===t?void 0:t.height)??0)];u<n||d>=s||void 0===Pe&&(Pe=r.id);const p=r.emojis.map((e=>e===re?we:je(e))).filter(I().Pe);return{key:o.toString(),items:p,render:e=>(0,g.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:a,transform:`translateY(${n}px)`},children:(0,g.jsx)("div",{"data-index":i,children:(0,g.jsx)(R().A,{title:r.title,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,mobileTitleStyle:{...l?{paddingTop:16}:{}},desktopTitleStyle:{...l?{paddingTop:6,lineHeight:"100%"}:{}},style:{display:"flex",flexDirection:"column",alignItems:"stretch"},children:(0,g.jsx)("div",{style:{...(0,z().ze)(j,v),...l&&C.isMobile?{paddingTop:10}:{},...c&&C.isMobile?{paddingBottom:10}:{},...C.isPhone&&{boxShadow:he({theme:v,isFirstRowInSection:l,isLastRowInSection:c})}},children:e.children})})},o.toString())},i)}})).forEach((e=>e&&Ie.push(e)));const Te=C.isDesktop&&Ie.length>0?0:void 0,Le=(0,g.jsx)(B().Ay,{style:{alignItems:"stretch",width:"100%",position:"relative",height:"100%"},type:B().Oh.Grid,getItemsPerRowForSection:()=>S,renderRow:(e,t)=>(0,g.jsx)("div",{role:"row",style:{display:"flex"},children:e},t),store:Ae,initialFocus:Te,sections:Ie,disableKeyboardArrowWrap:!0,unfocusOnScroll:C.isMobile,performHandleEnterOnTab:o,comboboxProps:x,captureKeyboardOnlyWhenFocused:!o});if(!Ee)return(0,g.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:(0,g.jsx)("div",{style:{width:"100%",flexGrow:1},children:Le})});const Be=(0,g.jsx)(ie,{isHidden:e=>{switch(e.id){case"callout":return!0;case"custom":return!N&&0===le.length;case"add":return!Y;default:return!1}},isFocused:e=>Pe===e.id,isDisabled:e=>{if(["custom","add"].includes(e.id))return!1;const t=ve.find((t=>t.id===e.id));return void 0===t||0===t.emojis.length},onCategoryClick:(e,t)=>{"add"===e.id?O().A.setState({open:!0,isEditing:!1,entrypoint:"categories_bar",originRect:t.currentTarget.getBoundingClientRect(),uploadFileEventHandlers:m}):Se(e.id)}});return(0,g.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[(0,g.jsx)("div",{style:{width:"100%",flexGrow:1,maxHeight:C.isDesktop?H().w$:void 0,overflowX:"hidden",overflowY:"auto",paddingBottom:6},ref:ye,children:(0,g.jsx)("div",{style:{height:be.getTotalSize(),width:"100%",position:"relative"},children:Le})}),Be]})}let pe=!1;function me(e,t){const o=t[e];return o?100*o.f:0}function ge(e){var t;const o=(0,K().bb)();if(!(void 0!==o&&0!==o))return e;const i=null===(t=(0,u().$)(e,Q().A.state))||void 0===t?void 0:t.variations;return 5===(null==i?void 0:i.length)||"🤝"===e?(null==i?void 0:i[o-1])??e:e}function he(e){const{theme:t,isFirstRowInSection:o,isLastRowInSection:i}=e;return o&&i?`0 1px 0 ${t.regularDividerColor}, 0 -1px 0 ${t.regularDividerColor}`:o?`0 -1px 0 ${t.regularDividerColor}`:i?`0 1px 0 ${t.regularDividerColor}`:"none"}},948033:(e,t,o)=>{o.d(t,{$n:()=>c,b0:()=>l,so:()=>u,uu:()=>p,ze:()=>d});var i=()=>o(484714),n=()=>o(56366),s=()=>o(401497),a=()=>o(100622),r=()=>o(486666);function l(){const{device:e,WindowSizeStore:t}=(0,i().v3)(),o=(0,n().K8)((()=>e.isPhone),[e]),{phonePaddingLeft:a,phonePaddingRight:r}=(0,n().K8)((()=>({phonePaddingLeft:t.getSafePaddingLeftCSS(14),phonePaddingRight:t.getSafePaddingRightCSS(14)})),[t]);return(0,s().IS)((e=>({galleryWrap:{display:"flex",flexWrap:"wrap",alignContent:"flex-start",background:e.popoverBackground,paddingTop:o?12:0,paddingBottom:o?12:0,paddingLeft:o?a:12,paddingRight:o?r:12,boxShadow:o?`0 1px 0 ${e.regularDividerColor}`:""}})),[o,a,r])}function c(){return{display:"flex",alignItems:"center",justifyContent:"center",minHeight:320,flex:1}}function d(e,t){const{device:o,WindowSizeStore:i}=e;return{display:"flex",flexDirection:"column",flexWrap:"wrap",alignItems:"flex-start",...o.isPhone?{background:t.popoverBackground,paddingLeft:i.getSafePaddingLeftCSS(r().H),paddingRight:i.getSafePaddingRightCSS(r().MP)}:o.isTablet?{background:a().Tj.transparent,paddingLeft:r().FU,paddingRight:r().FU}:{background:a().Tj.transparent,paddingLeft:r().zG,paddingRight:r().zG}}}function u(e,t){var o,i;const{device:n,WindowSizeStore:s}=e;return n.isPhone?(window.innerWidth-s.getSafePaddingLeftPx(r().H)-s.getSafePaddingRightPx(r().MP))/r().UA:n.isTablet?r().Vq:null!=t&&null!==(o=t.current)&&void 0!==o&&o.offsetWidth?((null==t||null===(i=t.current)||void 0===i?void 0:i.offsetWidth)-2*r().zG)/r().Sq:r().bc}function p(e){return e.device.isMobile?r().zR:r().zf}}}]);