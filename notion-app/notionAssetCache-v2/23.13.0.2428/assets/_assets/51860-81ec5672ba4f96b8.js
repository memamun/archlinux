"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[51860],{487808:(e,t,i)=>{i.r(t),i.d(t,{ExternalObjectInstanceBlockMenu:()=>C});i(944114);var n=i(296540),o=()=>i(484714),r=()=>i(56366),s=()=>i(617871),l=()=>i(673724),a=()=>i(796073),d=()=>i(824862),c=()=>i(959013),u=()=>i(534177),p=()=>i(356985),g=()=>i(884107),m=()=>i(317909),h=()=>i(633457),y=()=>i(659602),x=()=>i(335722),f=()=>i(862292),v=()=>i(722872),S=()=>i(645873),j=()=>i(53137),k=()=>i(575143),b=()=>i(928600),I=()=>i(939740),w=()=>i(89924),A=i(474848);function C(e){const{titleForReloadMenuOption:t,store:i,parentBlockStore:C,onAccept:B,onDismiss:T,extraSecondaryItemKey:M,token:R}=e,_=(0,o().v3)(),{value:D}=(0,S().fJ)(y().g),{value:z}=(0,S().fJ)(x().S),{value:W}=(0,S().fJ)(f().T.formulas),{value:P}=(0,S().fJ)(g().R.clipboardActions),O=(0,n.useCallback)((e=>{const t={blocks:[i],environment:_,publicEditMode:void 0,analyticsFrom:"external_object_instance_block_menu",lazyDependencies:{clipboardActions:P,formulasModule:W,markdownLinkifyIt:D,tinyMceMicrosoftWordPasteFilter:z}};return{key:e.key,render:(i,n)=>e.render(i,t,{onAccept:B,onFocus:n.onFocus}),action:i=>{let{event:n}=i;return e.action(t,n)}}}),[i,_,W,D,z,B,P]),E=[];(0,r().K8)((()=>{const e=i.getFormat().bot_id,t=j().A.getBotsAsRecordMap();if(e&&!0===j().A.state.loaded){const i=t.getValue({table:d().GP,id:e});if(i&&i.integration_id&&i.integration_id===s().ob)return!1}return!0}),[i])&&E.push({key:0,render:e=>(0,A.jsx)(w().A,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"reload external instance object",render:e=>(0,A.jsx)(k().A,{...e,title:t,svg:a().$}),action:()=>{i&&(i.isExternalObjectInstanceBlockStore()||i.isExternalObjectInstancePageBlockStore())&&h().lf({environment:_,from:"page_more_menu",store:i,spaceId:i.getSpaceId()})}}]});const U=(0,r().K8)((()=>{switch(M){case"preview_to_mention":return[O(p().oq)];case"mention_to_preview":if(!i.isExternalObjectInstanceBlockStore())return[];const e={key:"turn preview into block",render:e=>(0,A.jsx)(k().A,{...e,title:(0,A.jsx)(c().sA,{id:"hoverPreviewOverlay.action.turnPreviewIntoPreview",defaultMessage:"Turn into preview"}),svg:l().I}),action:()=>{C&&R&&m().createAndCommit({userAction:"HoverPreviewOverlay.transformExternalObjectInstanceMentionIntoBlock",environment:_,canUndo:!0,perform:e=>{h().FQ({block:i,parentStore:C,transaction:e,token:R}),e.postSubmitCallbacks.push((e=>{e||null==T||T()}))}})}};return[e];default:(0,u().HB)(M)}}),[M,O,i,C,R,_,T]);return E.push({key:1,render:e=>(0,A.jsx)(w().A,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[...U,O(p().tA)]}),(0,A.jsx)(b().A,{menuType:v().gu.Popup,children:(0,A.jsx)(I().Ay,{type:I().Oh.Vertical,initialFocus:void 0,onAccept:B,sections:E,style:{paddingTop:3,paddingBottom:3}})})}},495408:(e,t,i)=>{i.d(t,{p:()=>j});var n=i(296540),o=()=>i(484714),r=()=>i(401497),s=()=>i(30626),l=()=>i(173019),a=()=>i(959013),d=()=>i(100622),c=()=>i(522945),u=()=>i(962730),p=()=>i(397248),g=()=>i(630116),m=()=>i(704152),h=()=>i(406699),y=()=>i(285790),x=()=>i(839010),f=()=>i(904694),v=()=>i(24611),S=i(474848);function j(e){const{height:t,padding:i,padding_top:j,iframe_url:k,hoverData:b,store:I,token:w,href:A,onDismiss:C}=e,B=(0,a().YK)({editLink:{defaultMessage:"Edit link",id:"hoverPreviewOverlay.editLink"}}),T=(0,o().v3)(),M=(0,a().tz)(),R=(0,n.useRef)(null),_=(0,r().IS)((e=>({content:{width:340,height:"100%",aspectRatio:"auto",position:"relative"},container:{width:340,maxHeight:420,flexDirection:"column",alignItems:"flex-start"},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor,background:(0,v().FF)(T)}})),[T]),D=I&&I.recordStoreUIParentStore&&I.recordStoreUIParentStore instanceof g().Bv?I.recordStoreUIParentStore:I instanceof g().Bv?I:void 0;return(0,S.jsxs)("div",{style:_.container,children:[e.showEditButton&&(0,S.jsx)(y().A,{onClick:e.handleEditClick,icon:l().r,isDarkIconColor:!0,ariaLabel:M.formatMessage(B.editLink),hasBackground:!0,style:{position:"absolute",top:8,right:8,zIndex:1}}),w&&D&&b&&(0,S.jsx)("div",{style:{position:"absolute",top:8,right:8,zIndex:2},children:(0,S.jsx)(h().Ay,{popupType:h().z7.Popup,placementToOrigin:u().W.Right,alignmentToOrigin:u().C.Start,originGap:4,onClose:()=>{let e=!1;const t=R.current;t&&(e=(0,p().ux)(t.getBoundingClientRect(),c().$C.x,c().$C.y)),e||null==C||C()},renderOrigin:e=>(0,S.jsx)(m().A,{style:_.buttonStyle,...e,children:(0,s()._)({width:14,fill:d().Ay.white})}),render:e=>(0,S.jsx)(f().A,{parentBlockStore:D,store:I,token:w,href:A,hoverData:b,onAccept:()=>e.close()})})}),(0,S.jsx)(x().A,{source:k,style:_.content,preserveScale:!!(t&&t<1||i),background:!1,height:t&&t>0?t:void 0,aspectRatio:i?i/100:.75,paddingTop:j||void 0})]})}},508398:(e,t,i)=>{i.d(t,{A:()=>r});i(296540);var n=()=>i(125565),o=i(474848);const r=function(e){const{type:t,emoji:r,customEmojiStore:s,text:l,deletedText:a,subText:d}=e,c=(0,i(56366).K8)((()=>"custom"===t&&s.isDefined()&&s.getAlive()),[s,t]),u=(0,i(401497).IS)((e=>({container:{alignItems:"center"},label:{color:e.text.contrastPrimary,fontWeight:i(284371).Wy.medium,textAlign:"center",overflowWrap:"anywhere"},emojiContainer:{background:"white",borderRadius:4,padding:4,display:"flex",lineHeight:1,marginTop:2}})),[]);return(0,o.jsxs)(i(21140).wt,{gap:4,style:u.container,children:["custom"===t&&c?(0,o.jsx)("div",{style:u.emojiContainer,children:(0,o.jsx)(i(448664).A,{emojiStore:s,size:40})}):"unicode"===t?(0,o.jsx)("div",{style:u.emojiContainer,children:(0,o.jsx)(i(56086).A,{size:40,char:r})}):null,(0,o.jsx)(n().A,{isSmall:!0,isMultiline:!0,style:u.label,children:"unicode"===t||c?l:a}),d&&(0,o.jsx)(n().A,{isSmall:!0,isMultiline:!0,style:u.label,children:d})]})}},545040:(e,t,i)=>{i.d(t,{z:()=>r});var n=()=>i(645873);const o=new(n().O2)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await Promise.all([i.e(23806),i.e(79883)]).then(i.bind(i,513439));return{CollectionItemCover:e}})),r=(0,n()._h)(o,(e=>e.CollectionItemCover))},693689:(e,t,i)=>{i.d(t,{Y:()=>l,k:()=>a});var n=()=>i(411671),o=()=>i(630116),r=()=>i(108944),s=()=>i(731320);function l(e,t){const i=t.getRecordStoreUIRoot(),l=i instanceof o().Bv&&i.isPageBlock()&&i.isNonEditableState(),a=(0,r().Wo)(i)&&n().A.getMode(e,i),d=Boolean((0,s().QT)(a));return!t.canEdit()||d||l}function a(e,t){return!l(e,t)}},755023:(e,t,i)=>{i.d(t,{x:()=>s});var n=()=>i(56366),o=()=>i(792071),r=()=>i(179034);function s(e){let{blockStore:t,closestNonAliveAncestorStore:i,intl:s}=e;return(0,n().K8)((()=>{var e;let n,l,a;const d=i&&i.table===r().ev&&i.getMovedToTrashTime();d?(n=!0,a=d,l=i.getMovedToTrashStore()):(a=t.getLastEditedTime(),l=t.getLastEditedByStore(),n=!1);return{trashAuthorStore:l,trashAuthorDisplayName:(null===(e=l)||void 0===e?void 0:e.getDisplayName(s))||s.formatMessage(o().Fvx.messages.anonymousPlaceholder),trashTimestamp:a,isMovedToTrashMetadata:n}}),[t,i,s])}},811879:(e,t,i)=>{i.d(t,{E:()=>g});i(296540);var n=()=>i(56366),o=()=>i(401497),r=()=>i(310442),s=()=>i(824862),l=()=>i(798880),a=()=>i(534177),d=()=>i(256863),c=()=>i(453697),u=()=>i(777092),p=i(474848);function g(e){let{authorStore:t,avatarSize:i,avatarStyle:g,hasTooltip:m=!0}=e;const h=(0,n().K8)((()=>(0,u().d5)(t)),[t]),y=(0,o().IS)((e=>({placeholder:{width:i,height:i,background:e.lightDividerColor,borderRadius:i/2,flexShrink:0,...g}})),[i,g]);return h.asActor?h.table===l().oo?(0,p.jsx)(c().A,{hasTooltip:m,userValue:h.asActor,style:g,size:i,avatarShouldShowShadow:!1}):h.table===s().GP?(0,p.jsx)(d().A,{botValue:h,size:i,style:g}):h.table===r().yj?(0,p.jsx)("div",{style:y.placeholder}):void(0,a().HB)(h):(0,p.jsx)("div",{style:y.placeholder})}},820635:(e,t,i)=>{i.d(t,{Q:()=>h});i(581454),i(296540);var n=()=>i(484714),o=()=>i(56366),r=()=>i(401497),s=()=>i(187174),l=()=>i(959013),a=()=>i(284371),d=()=>i(296206),c=()=>i(449506),u=()=>i(698449),p=()=>i(351360),g=()=>i(994006),m=i(474848);function h(e){const{group:t,limit:i,noMembersMessage:h,color:y,trackHover:x}=e,f=(0,r().IS)((e=>({container:{marginBottom:4,..."white_background"===y?{fontSize:a().J.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}:{}},userContainer:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},user:{flexGrow:1},moreMessage:{marginLeft:2,marginTop:4,..."white_background"===y?{fontSize:a().J.UISmall.desktop,color:e.mediumTextColor}:{color:e.text.contrastSecondary}}})),[y]),v=(0,o().K8)((()=>p().default.state.currentSpaceStore),[]),S=(0,n().v3)();(0,o().K8)((()=>{x&&d().ZX(S,{group_id:t.group_id})}),[x,t,S]);const[{value:j}]=(0,s().Yb)((async()=>{if(!v)return;const e=await c().callApi({eventName:"getSpacePermissionGroupMembers",environment:S,data:{groupIds:[t.group_id],spaceId:v.id}});if("success"===e.type){var n;const o=null===(n=e.data.groupUsersMap[t.group_id])||void 0===n?void 0:n.userIds;return(0,u().gA)({userIds:o,limit:i,spaceStore:v})}}),[v,S,t,i]);return 0===(null==j?void 0:j.limitedUserStores.length)?(0,m.jsx)(m.Fragment,{children:h}):(0,m.jsxs)("div",{style:f.container,children:[null==j?void 0:j.limitedUserStores.map((e=>(0,m.jsx)("div",{style:f.userContainer,children:(0,m.jsx)(g().A,{style:f.user,userStore:e,avatarSize:18})},e.id))),j&&j.countRemainingUsers>0&&(0,m.jsx)("div",{style:f.moreMessage,children:(0,m.jsx)(l().sA,{id:"blockPermissionsSettings.groupPermissionUsers.tooltip",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:j.countRemainingUsers}})})]})}},851860:(e,t,i)=>{i.d(t,{zP:()=>kt,yf:()=>Tt,nJ:()=>at,k4:()=>At,OP:()=>bt,d0:()=>Bt});i(898992),i(354520),i(672577),i(581454),i(737550);var n=i(296540),o=()=>i(484714),r=()=>i(56366),s=()=>i(401497),l=()=>i(869190),a=()=>i(561565),d=()=>i(617871),c=()=>i(591779),u=()=>i(563884),p=()=>i(30626),g=()=>i(206267),m=()=>i(681873),h=()=>i(179034),y=()=>i(343666),x=()=>i(919709),f=()=>i(173979),v=()=>i(506391),S=()=>i(959013),j=()=>i(496603),k=()=>i(534177),b=()=>i(284371),I=()=>i(296206),w=()=>i(347469),A=()=>i(522945),C=()=>i(488923),B=()=>i(545040),T=()=>i(508398),M=()=>i(886680),R=()=>i(47373),_=()=>i(87878),D=()=>i(728611),z=()=>i(493208),W=()=>i(106352),P=()=>i(693689),O=()=>i(115512),E=()=>i(891078),U=()=>i(510473),L=()=>i(129522),H=()=>i(962730),F=()=>i(377586),K=()=>i(397248),V=()=>i(351360),Y=()=>i(230062),N=()=>i(16990),$=()=>i(141465),G=()=>i(990261),J=()=>i(630116),Z=()=>i(178788),q=()=>i(704152),Q=()=>i(406699),X=()=>i(854672),ee=()=>i(816559),te=()=>i(14235),ie=()=>i(614505),ne=()=>i(128295),oe=()=>i(16006),re=()=>i(346436),se=()=>i(487808),le=()=>i(820635),ae=()=>i(21140),de=()=>i(943647),ce=()=>i(187174),ue=()=>i(449506),pe=()=>i(495408),ge=()=>i(881254),me=i(474848);function he(e){const{token:t,store:i}=e.state,{linkMentionAnnotationData:r}=e,s=e.onDismiss,l=(0,o().v3)(),[a,d]=(0,n.useState)(!0),{iframe_url:c,height:u,padding:p,href:g,padding_top:m}=r,h=r.hasOwnProperty("description"),y=j().Im(r),[{value:x}]=(0,ce().Yb)((async()=>{var e,t;if(c)return I().wZ(l,{type:"iframe"}),{result:"iframePresent"};if(h)return d(!1),y?I().wZ(l,{type:"default"}):I().wZ(l,{type:"custom"}),{result:"linkMentionContainsDescription"};d(!0);const i=await ue().callApi({eventName:"getDataForLinkMention",environment:l,data:{url:g,spaceId:(null===(e=V().default.state.currentSpaceStore)||void 0===e?void 0:e.id)??(null===(t=V().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId()),source:"link_mention_hover"}});return"success"===i.type?"error"in i.data?(d(!1),{result:"apiFailed"}):(I().wZ(l,{type:"custom"}),d(!1),{result:"gotApiResponse",resultData:i.data}):"failed"===i.type?(d(!1),{result:"apiFailed"}):(d(!1),(0,k().HB)(i))}),[c,h,l,g,y]);let f;switch(null==x?void 0:x.result){case"linkMentionContainsDescription":f=r;break;case"gotApiResponse":f=x.resultData;break;case"apiFailed":case"iframePresent":case void 0:f=void 0;break;default:(0,k().HB)(x)}return f&&!c||!f&&!c?(0,me.jsx)(ge().R,{hoverData:f,href:g,showEditButton:!1,store:i,token:t,onDismiss:s,loading:a}):c?(0,me.jsx)(pe().p,{hoverData:r,iframe_url:c,showEditButton:!1,height:u,padding:p,store:i,token:t,onDismiss:s,href:g,padding_top:m}):(0,me.jsx)(ge().R,{hoverData:f,href:g,showEditButton:!1,store:i,token:t,onDismiss:s,loading:a})}var ye=()=>i(908006),xe=()=>i(584262),fe=()=>i(921940),ve=()=>i(925907),Se=()=>i(328347),je=()=>i(777447),ke=()=>i(861017),be=()=>i(983650),Ie=()=>i(884107),we=()=>i(501666),Ae=()=>i(606952),Ce=()=>i(780054),Be=()=>i(712030),Te=()=>i(267419),Me=()=>i(781286),Re=()=>i(285790);function _e(e){const{onDismiss:t,state:i}=e,{store:l}=i,a=(0,o().v3)(),d=(0,s().DP)(),[c,u]=(0,n.useState)(!0),p="token"===i.type?x().cQR(i.annotation):i.hyperlink,g=(0,je().lX)({url:p,baseUrl:Ce().A.domainBaseUrl,publicDomainName:Ce().A.publicDomainName}),m=(0,n.useCallback)((async()=>{switch(t(),await ye().default.afterNextFlush(),i.type){case"token":Ae().ek({token:i.token,store:i.store,readOnly:!1}),we().fi({type:"focusOnly",focus:!0});break;case"block":Me().hv({store:i.store});break;default:(0,k().HB)(i)}}),[t,i]),y=(0,n.useCallback)((async()=>{t(),await ye().default.afterNextFlush();const e=await Ie().R.clipboardActions.load(),i=e.clipboardMessages.copiedLinkToClipboard;let n=p;const o=(0,ke().parseRoute)({url:p,baseUrl:Ce().A.domainBaseUrl,publicDomainName:Ce().A.publicDomainName,isMobile:a.device.isMobile,protocol:Ce().A.protocol,currentUrl:window.location.href});if("page"===o.name&&o.blockId){const e=J().Bv.createChildStore(l,{table:h().ev,id:o.blockId});n=(0,fe().A)({pageId:o.blockId,pageModel:e.getModel(),baseUrl:Ce().A.domainBaseUrl,discussionId:o.discussionId,scrollToBlockId:o.scrollToBlockId,peekViewBlockId:o.peekViewBlockId,peekMode:o.peekMode,pageVisitSource:xe().y8.CopyLink})}e.copyString({environment:a,stringValue:n,copiedMessage:i})}),[a,t,l,p]),f=(0,r().K8)((()=>(0,R().s8)()),[]),[{value:v}]=(0,ce().Yb)((async()=>{var e,t;if(g||!f)return;u(!0);const i=await ue().callApi({eventName:"getDataForLinkMention",environment:a,data:{url:p,spaceId:(null===(e=V().default.state.currentSpaceStore)||void 0===e?void 0:e.id)??(null===(t=V().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId()),source:"hyperlink_hover"}});if("success"===i.type)return"error"in i.data?void u(!1):(u(!1),i.data);if("failed"===i.type)throw void u(!1);return u(!1),(0,k().HB)(i)}),[a,p,g,f]),j=a.device.isSafari||a.device.isIOS,w=(0,s().IS)((e=>({wrapper:{fontSize:b().J.UISmall.desktop,color:e.mediumTextColor,fontWeight:b().Wy.regular,fill:e.mediumIconColor,flexDirection:"column"},destination:{padding:"4px 0 4px 6px",alignItems:"center"},button:{display:"flex",flexDirection:"column",alignItems:"center",padding:"2px 6px",whiteSpace:"nowrap",marginRight:2,borderRadius:4,color:e.regularTextColor},destinationText:{paddingRight:6,maxWidth:250,...b().RC},icon:{height:"1em",width:"1em",marginRight:j?"0.4em":"0.5em",fill:e.mediumIconColor},content:{width:340,height:"100%",aspectRatio:"auto"},title:{color:e.regularTextColor,fontWeight:b().Wy.semibold,whiteSpace:"normal",wordBreak:"break-word",fontSize:13,padding:"4px 0",maxWidth:300},author:{color:e.mediumTextColor,fontSize:b().J.UISmall.desktop},description:{wordBreak:"break-word",maxWidth:300,...b().RC,color:e.regularTextColor,fontSize:12,lineHeight:1.45,whiteSpace:"normal",flexDirection:"column"},text:{color:e.regularTextColor,fontSize:12,lineHeight:1.45},buttons:{fontWeight:b().Wy.medium}})),[j]),A=(0,S().tz)(),C=(0,S().YK)({copyLink:{defaultMessage:"Copy link",id:"hoverPreviewOverlay.copyLink"}}),B=(0,r().K8)((()=>{if(!g)return{pageIcon:(0,Se().h)(w.icon),title:(0,me.jsx)("div",{style:w.destinationText,children:p})};const e=J().Bv.createChildStore(l,{table:h().ev,id:g});return{pageIcon:(0,be().h6)({pageModel:e.getModel(),pageRole:e.getRole(),baseUrl:Ce().A.domainBaseUrl,getRecordModel:l.getRecordModel,emojiType:(0,Be().FN)(a),isSafariOrIOS:j,isClient:!0,showEmojiInline:a.device.isWindows,currentUserId:a.currentUser.id,theme:d,emojiData:Te().A.state}),title:(0,me.jsx)(oe().A,{placeholder:`${window.location.protocol}//${window.location.host}${p}`,style:w.destinationText,store:e})}}),[a,l,g,w,d,j,p]),T=(0,r().K8)((()=>{if(!a.device.isMobile)return v?(v.hasOwnProperty("iframe")?I().Av(a,{type:"iframe"}):I().Av(a,{type:"custom"}),v):void 0}),[a,v]);if(f&&!g){if(T&&!T.iframe||!T)return(0,me.jsx)(ge().R,{hoverData:T,href:p,handleEditClick:m,showEditButton:e.isHoveredTokenEditable,store:l,loading:c});if(T&&T.iframe)return(0,me.jsx)(pe().p,{hoverData:T,iframe_url:T.iframe,height:T.height,padding:T.padding,padding_top:T.padding_top,handleEditClick:m,store:l,href:p,onDismiss:t,showEditButton:e.isHoveredTokenEditable})}return(0,me.jsx)(ae().Ye,{style:w.wrapper,alignItems:"center",children:(0,me.jsxs)(ae().Ye,{style:w.destination,alignItems:"center",children:[B.pageIcon,B.title,(0,me.jsx)(Re().A,{onClick:y,icon:ve().n,isDarkIconColor:!0,ariaLabel:A.formatMessage(C.copyLink)}),e.isHoveredTokenEditable&&(0,me.jsx)(q().A,{style:w.button,onClick:m,children:(0,me.jsx)(S().sA,{defaultMessage:"Edit",id:"hoverPreviewOverlay.editButton.label"})})]})})}var De=()=>i(662303),ze=()=>i(811879),We=()=>i(755023),Pe=()=>i(859428);function Oe(e){const{store:t,closestNonAliveAncestorStore:i,originRect:n}=e,o=(0,S().tz)(),r=(0,s().IS)((e=>({tooltipStyle:{fontSize:14},mentionPageInTrashTime:{fontWeight:b().Wy.regular,color:e.text.secondary,fontSize:14},avatarStyle:{margin:"0 6px"},placeholderStyle:{marginRight:6}})),[]),{trashAuthorStore:a,trashAuthorDisplayName:d,trashTimestamp:c,isMovedToTrashMetadata:u}=(0,We().x)({blockStore:t,closestNonAliveAncestorStore:i,intl:o}),p=(0,l().jE)(c,De().locale,o),g=a&&(0,me.jsx)(ze().E,{authorStore:a,avatarSize:18,avatarStyle:r.avatarStyle,placeholderStyle:{}});return(0,me.jsx)(Pe().A,{forceVisibleState:!0,originRect:n,render:()=>{},renderTooltip:()=>(0,me.jsxs)("div",{children:[(0,me.jsxs)(ae().Ye,{alignItems:"center",children:[u?(0,me.jsx)(S().sA,{defaultMessage:"Moved to Trash by",id:"hoverPreviewOverlay.pageInTrash.message.movedToTrashBy"}):(0,me.jsx)(S().sA,{defaultMessage:"Last edited by",id:"hoverPreviewOverlay.pageInTrash.message.lastEditedBy"}),g||(0,me.jsx)("div",{style:r.placeholderStyle}),d]}),(0,me.jsx)("div",{style:r.mentionPageInTrashTime,children:p})]}),placement:H().W.Bottom,alignment:H().C.Start,style:r.tooltipStyle})}var Ee=()=>i(798880),Ue=()=>i(764781);const Le={viewBox:"0 0 20 20",svg:(0,me.jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zm1.25 7.49L7.366 10 3.625 6.259zm.884.885H15.49l-3.74-3.741-1.309 1.308a.625.625 0 0 1-.884 0L8.25 10.884zM12.634 10l3.741 3.741V6.26zM4.509 5.375 10 10.866l5.491-5.491z"})},He=(0,i(340498).wt)("envelope",Le);var Fe=()=>i(42583),Ke=()=>i(402390),Ve=()=>i(296798),Ye=()=>i(710149),Ne=()=>i(864943),$e=()=>i(125565),Ge=()=>i(453697),Je=()=>i(477293),Ze=()=>i(963589),qe=()=>i(437622);var Qe=()=>i(554283),Xe=()=>i(646736),et=()=>i(498212);function tt(e){let{userId:t,spaceId:i}=e;return(0,et().gB)(`${t}-${i}-person-profile`)}function it(e){const{icon:t,tooltipText:i,stringValue:r,getCopiedMessage:l}=e,a=(0,o().v3)(),[d,c]=(0,Qe().B)(),u=(0,n.useCallback)((async()=>{const e=await Ie().R.clipboardActions.load();e.copyString({environment:a,stringValue:r,copiedMessage:l(e)})}),[a,l,r]),p=(0,s().IS)((e=>({iconContainer:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",padding:4},icon:{width:16,height:16,fill:c?e.icon.primary:e.icon.tertiary,transition:"fill 0.15s ease"}})),[c]);return(0,me.jsx)(Pe().A,{renderTooltip:()=>i,render:e=>(0,me.jsx)("div",{...e,ref:d,style:p.iconContainer,onClick:u,role:"button","aria-label":i,tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),u())},children:t(p.icon)})})}function nt(e){let{userStore:t}=e;const i=(0,S().tz)(),n=(0,r().K8)((()=>V().default.state.currentSpaceStore),[]),l=(0,r().K8)((()=>{var e;if(n)return null===(e=(0,Xe().dp)(n,t.id))||void 0===e?void 0:e.getMembershipType()}),[n,t]),a=(0,Je().r)("extended_user_profiles"),d="control"!==a,c="hover_and_full"===a,u=(0,r().K8)((()=>t.id),[t]),{value:p,isLoading:g}=function(e){let{userId:t}=e;const i=(0,o().v3)(),n=(0,r().K8)((()=>V().default.state.currentSpaceStore),[]),[{status:s,error:l,value:a}]=(0,ce().Yb)((async()=>{if(!n)return;if((0,qe().IL)(n))return;const e=await ue().callApi({eventName:"getExtendedUserProfile",environment:i,data:{userId:t,spaceId:n.id}});if("failed"===e.type)throw e.error;if(e){const t=e.data.permissionGroups??[];return{timeZone:e.data.timeZone,permissionGroups:t}}}),[i,t,n]);return void 0===n?{isLoading:!0,error:void 0,value:void 0}:{isLoading:"pending"===s,error:l,value:a}}({userId:u}),{timeZone:y,permissionGroups:x}=(0,r().K8)((()=>p??{timeZone:void 0,permissionGroups:[]}),[p]),f=function(e){return e.sort(((e,t)=>e.memberCount-t.memberCount)).map((e=>e.name))}(x),{name:v,email:j}=(0,r().K8)((()=>({name:t.getFullName(i),email:t.getEmail()})),[t,i]),k=(0,Ze().X)("debug_user_info_quick_copy"),I=(0,r().K8)((()=>t.isDefined()),[t]),w=(0,r().K8)((()=>function(e,t){var i;if(!t)return;const n=J().Bv.createChildStore(t,{table:h().ev,id:tt({userId:e,spaceId:t.id}),spaceId:t.id});return n.isDefined()?null==n||null===(i=n.getModel())||void 0===i?void 0:i.getRenderUrl({getRecordModel:null==n?void 0:n.getRecordModel,pageVisitSource:xe().y8.MentionInPage}):void 0}(u,n)),[u,n]),A=(0,s().IS)((e=>({card:{minWidth:280,height:130,padding:12},bio:{display:"inline-flex",alignItems:"center",gap:12,flexGrow:1,width:0},bioRight:{overflow:"hidden",width:"100%"},actionButton:{width:"100%",height:28,fontWeight:b().Wy.medium},profileTitle:{fontWeight:b().Wy.semibold},profileSubtitle:{...b().RC},loadingShimmer:{height:16,borderRadius:6,animation:"500ms ease-in fadein"}})),[]);if(!j||!I||!d)return null;const C=g?(0,me.jsx)(Ye().A,{style:A.loadingShimmer}):f.length>0?(0,me.jsx)($e().A,{isSmall:!0,style:A.profileSubtitle,children:(0,m().A)(f.slice(0,3),(e=>(0,me.jsx)(ot,{index:e},e)))}):l?(0,me.jsx)($e().A,{isSmall:!0,style:A.profileSubtitle,children:(0,me.jsx)(rt,{membershipType:l})}):null,B=g?(0,me.jsx)(Ye().A,{style:A.loadingShimmer}):y?(0,me.jsx)($e().A,{isSmall:!0,isSecondaryColor:!0,style:A.profileSubtitle,children:(0,me.jsx)(S().sA,{id:"personHoverCard.userInfo.timeZone",defaultMessage:"{time} local time",values:{time:(new Date).toLocaleTimeString((0,Ke().H)(i),{timeZone:y,hour:"2-digit",minute:"2-digit",hour12:!0})}})}):null;return(0,me.jsx)("div",{style:A.card,children:(0,me.jsxs)(ae().wt,{gap:16,children:[(0,me.jsx)(ae().Ye,{children:(0,me.jsxs)("div",{style:A.bio,children:[(0,me.jsx)(Ge().A,{userStore:t,size:56}),(0,me.jsxs)(ae().wt,{gap:3,style:A.bioRight,children:[(0,me.jsxs)(ae().Ye,{gap:4,alignItems:"center",children:[w&&c?(0,me.jsx)(Ve().A,{href:w,children:(0,me.jsx)($e().A,{style:A.profileTitle,children:v})}):(0,me.jsx)($e().A,{style:A.profileTitle,children:v}),k?(0,me.jsxs)(ae().Ye,{alignItems:"center",children:[(0,me.jsx)(it,{icon:He,tooltipText:"Copy email address",stringValue:j,getCopiedMessage:e=>e.clipboardMessages.copiedEmailToClipboard}),(0,me.jsx)(it,{icon:Ue().V,tooltipText:"Copy user ID",stringValue:t.id,getCopiedMessage:e=>e.clipboardMessages.copiedUserIdToClipboard})]}):null]}),C,B]})]})}),(0,me.jsxs)(ae().Ye,{gap:12,children:[(0,me.jsx)(Ne().A,{size:"lg",style:A.actionButton,onClick:()=>{window.open(`mailto:${j}`,"_blank")},icon:He,iconStyle:{width:16,height:16},children:(0,me.jsx)($e().A,{children:(0,me.jsx)(S().sA,{id:"personHoverCard.actionButtons.email",defaultMessage:"Email"})})}),(0,me.jsx)(Ne().A,{size:"lg",style:A.actionButton,onClick:()=>{window.open(`https://calendar.notion.so/meet-with/${j}`,"_blank")},icon:Fe().D,iconStyle:{width:16,height:16},children:(0,me.jsx)(S().sA,{id:"personHoverCard.actionButtons.schedule",defaultMessage:"Schedule"})})]})]})})}function ot(e){let{index:t}=e;return(0,me.jsx)("span",{style:{whiteSpace:"pre"},children:(0,me.jsx)(S().sA,{defaultMessage:", ",id:"personHoverCard.userInfo.groupSeparatorValue"})},t)}function rt(e){switch(e.membershipType){case"none":return(0,me.jsx)(S().sA,{id:"personHoverCard.memberStatus.none",defaultMessage:"Deactivated"});case"page_guest":return(0,me.jsx)(S().sA,{id:"personHoverCard.memberStatus.guest",defaultMessage:"Guest"});case"member":return(0,me.jsx)(S().sA,{id:"personHoverCard.memberStatus.member",defaultMessage:"Member"});case"membership_admin":return(0,me.jsx)(S().sA,{id:"personHoverCard.memberStatus.admin",defaultMessage:"Admin"});case"owner":return(0,me.jsx)(S().sA,{id:"personHoverCard.memberStatus.owner",defaultMessage:"Workspace Owner"});default:(0,k().HB)(e.membershipType)}}function st(e){const t=(0,r().K8)((()=>V().default.state.currentSpaceStore),[]),i=(0,r().K8)((()=>{if(!t)return;if("user"===e.state.type)return e.state.store;const i=e.state.annotation;return J().LU.createChildStore(t,{id:i[1],table:Ee().oo})}),[e.state,t]),n=(0,r().K8)((()=>!!i&&i.isDefined()),[i]);return i&&n&&t?(0,me.jsx)(nt,{userStore:i}):null}const lt=20;function at(e){const t=(0,o().v3)(),i=(0,r().O$)(Y().A,{debugName:"HoverPreviewOverlay"}),{state:s,pinPopup:l,unpinPopup:a,hasBeenHovering:d,isPinned:u,dismissPopup:p}=function(){const[e,t]=(0,n.useState)(!1),[i]=(0,r().$y)($().A),o=(0,c().lW)(i,400,Object.is),[s,l]=(0,n.useState)(void 0),a=s||(e?void 0:o),d=(0,n.useCallback)((()=>l(a)),[a]),u=(0,n.useCallback)((()=>{l(void 0)}),[]),p=(0,n.useCallback)((()=>{u(),t(!0)}),[u]);return(0,n.useEffect)((()=>{t(!1)}),[o]),{state:a,pinPopup:d,unpinPopup:u,hasBeenHovering:i&&i===a,isPinned:Boolean(s),dismissPopup:p}}(),g=(0,r().K8)((()=>(0,R().J0)()),[]),m=function(e){const t=(0,o().v3)();return(0,r().K8)((()=>!!e&&(0,P().k)(t,e.store)),[e,t])}(s),h=(0,n.useMemo)((()=>Boolean(s&&function(e,t){switch(e.type){case"token":return e.annotations.some(x().sh$)||t&&e.annotations.some(x().N53)||e.annotations.some(x().rie)||e.annotations.some(x().ik2)||e.annotations.some(x().n5B);case"block":return!!e.hyperlink;case"user":return!0;default:(0,k().HB)(e)}}(s,m))),[s,m]),y=(0,n.useMemo)((()=>s&&function(e){switch(e.type){case"token":return e.token.node.getBoundingClientRect();case"block":return L().K.getRect(e.store);case"user":return e.domRect;default:(0,k().HB)(e)}}(s)),[s]),f=y&&0===y.width&&0===y.height&&0===y.left&&0===y.top,v=h?!f:Boolean(!i&&d&&!f),[,S]=(0,r().$y)(N().A);(0,n.useEffect)((()=>(S({isPinned:u}),()=>S({isPinned:!1}))),[u,S]);const b=(0,n.useMemo)((()=>"token"===(null==s?void 0:s.type)&&(null==s?void 0:s.annotations.some(x().n5B))),[s]),I=!("token"!==(null==s?void 0:s.type)||null!=s&&s.annotations.some(x().N53)||null!=s&&s.annotations.some(x().jIt)||b),A=(0,n.useMemo)((()=>"token"===(null==s?void 0:s.type)&&(null==s?void 0:s.annotations.some(x().nNl))),[s]),C=(0,n.useMemo)((()=>(g&&("token"===(null==s?void 0:s.type)?null==s?void 0:s.annotations.some(x().rie):"user"===(null==s?void 0:s.type)))??!1),[g,s]),B=(0,n.useCallback)((()=>C?H().C.End:A?H().C.Center:H().C.Start),[C,A]),T=(0,n.useCallback)((()=>C||b?H().W.Top:H().W.Bottom),[C,b]),M=(0,r().O$)(t.RouterStore);return(0,n.useEffect)((()=>{p()}),[M,p]),(0,n.useEffect)((()=>{const e=j().nF((()=>{w().co(),p()}),200,{leading:!0});return D().P4(window,"scroll",e,!0),()=>D().Ol(window,"scroll",e,!0)}),[p]),(0,me.jsx)(te().Ay,{disableMouseCapture:!0,preventCaptureEsc:!0,preventPointerEvents:v&&!h,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:F().n.Popup,open:v,originRect:y,originGap:6,alignmentToOrigin:B(),placementToOrigin:T(),useLightBoxShadow:I,render:()=>s&&(0,me.jsx)("div",{onMouseEnter:l,onMouseLeave:a,children:(0,me.jsx)(dt,{state:s,isHoveredTokenEditable:m,onDismiss:a,originRect:y})}),...A?{borderRadius:6}:{}})}function dt(e){const t=(0,r().K8)((()=>(0,R().J0)()),[]),i=(0,r().K8)((()=>V().default.state.currentSpaceStore),[]),n=(0,o().Y0)(),l=(0,s().IS)((e=>({noMembersInGroupStyle:{fontSize:b().J.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]),a="token"===e.state.type?e.state.annotations:void 0,d=null==a?void 0:a.find(x().ik2),c=(0,r().K8)((()=>{if((0,R().YE)()&&d)return x().q1R(d)}),[d]),u=null==a?void 0:a.find(x().sh$),p=null==a?void 0:a.find(x().qsB),g=null==a?void 0:a.find(x().RaC),m=null==a?void 0:a.find(x().go0),h=a?x().MzR(a):void 0,f=null==a?void 0:a.find(x().jIt),v=t?null==a?void 0:a.find(x().rie):void 0,j=null==a?void 0:a.find(x().nNl),k=null==a?void 0:a.find(x().n5B),I=(0,r().K8)((()=>{if(!g)return;const e=x().FHi(g);if(!e)return;return i?(0,U().E)({groupId:null==e?void 0:e.groupId,spaceStore:i}).getModel():void 0}),[i,g]);if("user"===e.state.type&&!n.isMobile)return(0,me.jsx)(st,{...e,state:e.state,onDismiss:e.onDismiss});if("token"!==e.state.type)return null;if(u&&e.state.store.table!==y().SN)return(0,me.jsx)(_e,{...e,state:{...e.state,annotation:u}});if(p)return(0,me.jsx)(ut,{...e,state:{...e.state,annotation:p}});if(g){if(x().FHi(g)&&I)return(0,me.jsx)(le().Q,{group:I,limit:10,color:"white_background",trackHover:!0,noMembersMessage:(0,me.jsx)(ae().Ye,{style:l.noMembersInGroupStyle,children:(0,me.jsx)("div",{style:b().RC,children:(0,me.jsx)(S().sA,{id:"groupPreview.noUsers",defaultMessage:"No users in this group"})})})})}else if(c&&!n.isMobile)return(0,me.jsx)(he,{state:e.state,isHoveredTokenEditable:e.isHoveredTokenEditable,linkMentionAnnotationData:c,onDismiss:e.onDismiss});return j?(0,me.jsx)(ct,{...e,state:{...e.state,annotation:j},currentSpaceStore:i}):m?(0,me.jsx)(pt,{...e,state:{...e.state,annotation:m}}):h&&!n.isMobile?(0,me.jsx)(kt,{...e,state:{...e.state,annotation:h},onDismiss:e.onDismiss}):f&&!n.isMobile?(0,me.jsx)(wt,{...e,state:{...e.state,annotation:f},onDismiss:e.onDismiss}):v&&!n.isMobile?(0,me.jsx)(st,{...e,state:{...e.state,annotation:v},onDismiss:e.onDismiss}):k?(0,me.jsx)(C().YY,{store:e.state.store,annotation:k,onDismiss:e.onDismiss}):null}function ct(e){var t,i;const{store:n,annotation:o}=e.state,l=x().qS0(o),a=l&&J().sk.createChildStore(n,l),d=(0,r().K8)((()=>{if(null!=a&&a.isDefined())return null==a?void 0:a.getModel().getRenderTitle()}),[a]),c=(0,r().K8)((()=>(0,_().wA)({spaceStore:e.currentSpaceStore})),[e.currentSpaceStore]),u=(0,s().IS)((e=>({container:{backgroundColor:e.tooltipBackground,padding:"4px 8px",maxWidth:250,width:"max-content"},text:{color:e.text.contrastSecondary}})),[]);return a?(0,me.jsx)("div",{style:u.container,children:(0,me.jsx)(T().A,{type:"custom",customEmojiStore:a,text:(0,me.jsx)("span",{className:"notranslate",children:d}),deletedText:(0,me.jsx)(S().sA,{defaultMessage:"{name} <medium>(deleted)</medium>",id:"HoverPreviewOverlay.customEmojiDeleted",values:{name:(0,me.jsx)("span",{className:"notranslate",children:d}),medium:e=>(0,me.jsx)("span",{style:u.text,children:e})}}),subText:null!==(t=e.currentSpaceStore)&&void 0!==t&&t.id&&l.spaceId!==(null===(i=e.currentSpaceStore)||void 0===i?void 0:i.id)&&c?(0,me.jsx)("span",{style:u.text,children:(0,me.jsx)(S().sA,{id:"HoverPreviewOverlay.customEmojiUpload",defaultMessage:"Right-click to add to your workspace"})}):void 0})}):null}function ut(e){const{annotation:t}=e.state,i=x().K7D(t),n=(0,s().IS)((e=>({container:{fontSize:b().J.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"},icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor}})),[]),o=(0,S().tz)(),r="relative"===i.date_format?"ll":"relative",a=(0,l().ZF)({value:i,date_format:r,time_format:"h:mm A",allowRelativeDates:!0,intl:o});return a===(0,l().ZF)({value:i,date_format:i.date_format,time_format:i.time_format,allowRelativeDates:!0,intl:o})?null:(0,me.jsxs)(ae().Ye,{style:n.container,alignItems:"center",children:[(0,u().k)(n.icon),(0,me.jsx)("div",{style:b().RC,children:a})]})}function pt(e){const{annotation:t}=e.state,i=x().y0Y(t),n=(0,S().tz)(),o=(0,f().EC)(i.type,n),r=(0,s().IS)((e=>({container:{fontSize:b().J.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]);return(0,me.jsx)(ae().Ye,{style:r.container,alignItems:"center",children:(0,me.jsx)("div",{style:b().RC,children:o})})}function gt(e){var t;const{renderConfig:i,store:n}=e,o=(0,s().IS)((e=>({title:{color:e.regularTextColor,fontWeight:b().Wy.semibold,whiteSpace:"initial",fontSize:13,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:b().J.UISmall.desktop},dictionaryKey:{color:e.lightTextColor,fontWeight:b().Wy.regular,fontSize:b().J.UISmall.desktop},dictionaryValue:{color:e.mediumTextColor,fontSize:b().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"}})),[]);return(0,me.jsxs)(me.Fragment,{children:[i.title&&(0,me.jsx)(ae().Ye,{children:(0,me.jsx)(W().Ic,{...i.title,store:n,style:o.title})}),i.headerAttributes&&i.headerAttributes.length>0&&(0,me.jsx)(ae().Ye,{alignItems:"center",style:{...o.header,marginBottom:8},children:(0,m().A)(i.headerAttributes.map(((e,t)=>(0,me.jsx)(W().Ic,{...e,store:n,style:{...o.header,...b().RC}},`attribute-${t}`)))||[],(e=>(0,me.jsxs)("span",{children:[" ","·"," "]},`dot-${e}`)))}),i.dictionaryAttributes&&i.dictionaryAttributes.length>0&&(0,me.jsx)(ae().wt,{children:i.dictionaryAttributes.map(((e,t)=>{var r;let{key:s,value:l}=e;return(0,me.jsxs)(ae().Ye,{style:{marginBottom:t!==((null===(r=i.dictionaryAttributes)||void 0===r?void 0:r.length)??0)-1?4:8},children:[(0,me.jsx)("div",{style:{marginRight:8,width:"30%",display:"flex",alignItems:"center"},children:(0,me.jsx)("span",{style:o.dictionaryKey,children:(0,me.jsx)(S().sA,{...s.formatter,values:{value:l.attribute.name}})})}),(0,me.jsxs)("div",{style:{width:"70%",display:"flex",alignItems:"center"},children:[l.icon&&(0,v().nN)(l.icon)&&(0,me.jsx)(X().A,{type:"image_url",imageURL:l.icon.values[0],size:16,style:{marginRight:6}}),(0,me.jsx)(W().Ic,{...l,store:n,style:o.dictionaryValue,avatarStyle:{marginRight:6}})]})]},t)}))}),i.bodyAttribute&&!(0,v().Q7)(i.bodyAttribute)&&(0,me.jsx)(ae().Ye,{style:((null===(t=i.dictionaryAttributes)||void 0===t?void 0:t.length)??0)>0?{marginTop:3}:{},children:(0,me.jsx)(W().xq,{attribute:i.bodyAttribute,store:n})}),i.previewImageAttribute&&(0,me.jsx)("div",{style:{marginTop:i.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center"},children:(0,me.jsx)("div",{children:(0,me.jsx)(ee().Ay,{src:i.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})})]})}function mt(e,t){if(!e)return null;const i=e.find((e=>e.key.formatter.id===t));return i?i.value:null}function ht(e,t){if(!e)return null;return e.filter((e=>e.attribute&&t.includes(e.attribute.id)))}function yt(e,t){if(!e)return null;const i=e.find((e=>e.value.attribute.id===t));return i?i.value:null}function xt(e){var t;const{renderConfig:i,store:n,integration:o,haveInstanceAction:r,containerDivRef:l,token:a,parentBlockStore:d,onDismiss:c}=e,u=(0,s().IS)((e=>({title:{color:e.regularTextColor,fontWeight:b().Wy.medium,whiteSpace:"initial",fontSize:14,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:b().J.UISmall.desktop,paddingLeft:8,flexGrow:1,fontWeight:b().Wy.regular},dictionaryKey:{color:e.lightTextColor,fontWeight:b().Wy.regular,fontSize:b().J.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:b().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},innerBox:{width:"fit-content",display:"flex",alignItems:"center",gap:4}})),[]),g=null===(t=mt(i.dictionaryAttributes,"unfurling.github.pullRequest"))||void 0===t?void 0:t.attribute.values[0],m=mt(i.dictionaryAttributes,"unfurling.generic.status"),h=mt(i.dictionaryAttributes,"unfurling.generic.author"),y=function(e,t){if(!e)return null;return e.find((e=>e.formatter&&t.includes(e.formatter.id)))||null}(i.headerAttributes,["unfurling.github.githubPullMerged","unfurling.github.githubPullClosed","unfurling.github.githubPullOpened"]);return(0,me.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:295},children:[(0,me.jsxs)(ae().Ye,{alignItems:"center",style:{fontSize:12},children:[(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(X().A,{type:"image_url",imageURL:o.icon,size:16,style:{marginRight:4}}),(0,me.jsx)("div",{style:{fontWeight:b().Wy.medium},children:"GitHub"})]}),g&&(0,me.jsx)("div",{style:u.header,children:(0,me.jsx)(S().sA,{id:"unfurling.github.pullRequestNo",defaultMessage:"PR {prNumber}",values:{prNumber:g}})}),!r&&(0,me.jsx)("div",{style:{position:"relative"},children:(0,me.jsx)(Q().Ay,{popupType:Q().z7.Popup,placementToOrigin:H().W.Right,alignmentToOrigin:H().C.Start,originGap:4,onClose:()=>{let e=!1;const t=l.current;t&&(e=(0,K().ux)(t.getBoundingClientRect(),A().$C.x,A().$C.y)),e||null==c||c()},renderOrigin:e=>(0,me.jsx)(q().A,{style:u.buttonOrigin,...e,children:(0,p()._)({width:14})}),render:e=>(0,me.jsx)(se().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,me.jsx)(S().sA,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:d,store:n,token:a,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]}),i.title&&(0,me.jsx)(ae().Ye,{children:(0,me.jsx)(W().Ic,{...i.title,store:n,style:u.title})}),(0,me.jsxs)(ae().Ye,{style:{gap:4,alignSelf:"stretch",alignItems:"center"},children:[m&&(0,me.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center"},children:[m.icon&&(0,v().nN)(m.icon)&&(0,me.jsx)(X().A,{type:"image_url",imageURL:m.icon.values[0],size:14}),(0,me.jsx)(W().Ic,{...m,store:n,style:u.dictionaryValue,avatarStyle:{marginRight:6}})]}),(0,me.jsxs)("div",{style:{lineHeight:"16px",display:"flex",gap:4},children:[y&&(0,me.jsx)("div",{style:u.innerBox,children:(0,me.jsx)(W().Ic,{attribute:y.attribute,store:n,style:u.dictionaryValue})}),h&&(0,me.jsxs)("div",{style:u.innerBox,children:[(0,me.jsx)("div",{style:u.dictionaryValue,children:(0,me.jsx)(S().sA,{id:"unfurling.generic.by",defaultMessage:"by"})}),h.icon&&(0,v().nN)(h.icon)&&(0,me.jsx)(X().A,{type:"image_url",imageURL:h.icon.values[0],size:16,style:{marginLeft:4}}),(0,me.jsx)(W().Ic,{...h,store:n,style:u.dictionaryValue})]})]})]})]})}function ft(e){const{renderConfig:t,store:i,integration:n,haveInstanceAction:o,containerDivRef:r,token:l,parentBlockStore:a,onDismiss:d}=e,c=(0,s().IS)((e=>({title:{color:e.regularTextColor,fontWeight:b().Wy.medium,whiteSpace:"initial",fontSize:14,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:b().J.UISmall.desktop,paddingLeft:8,flexGrow:1,fontWeight:b().Wy.regular},dictionaryKey:{color:e.lightTextColor,fontWeight:b().Wy.regular,fontSize:b().J.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:b().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},actionButton:{position:"absolute",top:10,right:10,zIndex:2}})),[]),u=mt(t.dictionaryAttributes,"unfurling.generic.lastModifiedBy"),g=mt(t.dictionaryAttributes,"unfurling.generic.lastModifiedAt");return(0,me.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:295},children:[(0,me.jsx)(ae().Ye,{alignItems:"center",style:{fontSize:12},children:(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(X().A,{type:"image_url",imageURL:n.icon,size:16,style:{marginRight:4}}),(0,me.jsx)("div",{style:{fontWeight:b().Wy.medium},children:"Figma"})]})}),(0,me.jsxs)(ae().Ye,{style:{gap:4,alignSelf:"stretch",alignItems:"center"},children:[g&&(0,me.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,me.jsx)("div",{style:c.dictionaryValue,children:(0,me.jsx)(S().sA,{id:"unfurling.generic.editor",defaultMessage:"Edited"})}),(0,me.jsx)(W().Ic,{...g,store:i,style:c.dictionaryValue})]}),u&&(0,me.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,me.jsx)("div",{style:c.dictionaryValue,children:(0,me.jsx)(S().sA,{id:"unfurling.generic.from",defaultMessage:"by"})}),u.icon&&(0,v().nN)(u.icon)&&(0,me.jsx)(X().A,{type:"image_url",imageURL:u.icon.values[0],size:16,style:{marginLeft:4}}),(0,me.jsx)(W().Ic,{...u,store:i,style:c.dictionaryValue})]})]}),t.previewImageAttribute&&(0,me.jsx)("div",{style:{marginTop:t.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center"},children:(0,me.jsx)("div",{children:(0,me.jsx)(ee().Ay,{src:t.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})}),!o&&(0,me.jsx)("div",{style:c.actionButton,children:(0,me.jsx)(Q().Ay,{popupType:Q().z7.Popup,placementToOrigin:H().W.Right,alignmentToOrigin:H().C.Start,originGap:4,onClose:()=>{let e=!1;const t=r.current;t&&(e=(0,K().ux)(t.getBoundingClientRect(),A().$C.x,A().$C.y)),e||null==d||d()},renderOrigin:e=>(0,me.jsx)(q().A,{style:c.buttonOrigin,...e,children:(0,p()._)({width:14})}),render:e=>(0,me.jsx)(se().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,me.jsx)(S().sA,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:a,store:i,token:l,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]})}function vt(e){var t;const{renderConfig:i,store:n,integration:o,haveInstanceAction:r,containerDivRef:l,token:a,parentBlockStore:d,onDismiss:c}=e,u=(0,s().IS)((e=>({title:{color:e.regularTextColor,fontWeight:b().Wy.medium,whiteSpace:"initial",fontSize:14,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:b().J.UISmall.desktop,paddingLeft:8,flexGrow:1,fontWeight:b().Wy.regular},dictionaryKey:{color:e.lightTextColor,fontWeight:b().Wy.regular,fontSize:b().J.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:b().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},channelValue:{color:e.mediumTextColor,fontSize:b().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},author:{paddingTop:8,alignSelf:"stretch",alignItems:"center"},replyIcons:{},actionButton:{position:"absolute",top:10,right:10,zIndex:2}})),[]),g=mt(i.dictionaryAttributes,"unfurling.generic.author"),m=function(e,t){if(!e)return null;return e.find((e=>e.key.formatter.id===t))||null}(i.dictionaryAttributes,"unfurling.slack.slackReplyCount"),h=ht(i.headerAttributes,["title","name"]),y=ht(i.headerAttributes,["sent_at"]),x=j().hS(i.icons||[],(e=>`${e.type}:${e.values[0].toString()}`)),f=x.length>5?5:x.length;return(0,me.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:295},children:[(0,me.jsxs)(ae().Ye,{alignItems:"center",style:{fontSize:12},children:[(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(X().A,{type:"image_url",imageURL:o.icon,size:16,style:{padding:2}}),(0,me.jsx)("div",{style:{fontWeight:b().Wy.medium,marginRight:8},children:"Slack"})]}),h&&h.length>0&&(0,me.jsx)(W().Ic,{attribute:h[0].attribute,store:n,style:u.channelValue,avatarStyle:{marginRight:6}})]}),(0,me.jsxs)(ae().Ye,{style:u.author,children:[g&&(0,me.jsx)("div",{style:{width:"fit-content",display:"flex",alignItems:"center"},children:(0,me.jsx)(W().Ic,{...g,store:n,style:u.dictionaryValue})}),y&&(0,me.jsx)("div",{style:{marginLeft:8},children:(0,me.jsx)(W().Ic,{...y[0],store:n,style:u.channelValue})})]}),(0,me.jsxs)(ae().wt,{style:{gap:8},children:[i.bodyAttribute&&!(0,v().Q7)(i.bodyAttribute)&&(0,me.jsx)(ae().Ye,{style:((null===(t=i.dictionaryAttributes)||void 0===t?void 0:t.length)??0)>0?{marginTop:3}:{},children:(0,me.jsx)(W().xq,{attribute:i.bodyAttribute,store:n})}),(0,me.jsxs)(ae().Ye,{style:{alignSelf:"stretch",alignItems:"center"},children:[i.icons&&m&&(0,me.jsx)(jt,{renderConfig:i}),m&&(0,me.jsx)(W().Ic,{formatter:m.key.formatter,attribute:m.value.attribute,store:n,style:{...u.channelValue,transform:`translateX(-${3*(f-1)}px)`},avatarStyle:{marginRight:6}})]})]}),!r&&(0,me.jsx)("div",{style:u.actionButton,children:(0,me.jsx)(Q().Ay,{popupType:Q().z7.Popup,placementToOrigin:H().W.Right,alignmentToOrigin:H().C.Start,originGap:4,onClose:()=>{let e=!1;const t=l.current;t&&(e=(0,K().ux)(t.getBoundingClientRect(),A().$C.x,A().$C.y)),e||null==c||c()},renderOrigin:e=>(0,me.jsx)(q().A,{style:u.buttonOrigin,...e,children:(0,p()._)({width:14})}),render:e=>(0,me.jsx)(se().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,me.jsx)(S().sA,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:d,store:n,token:a,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]})}function St(e){const{renderConfig:t,store:i,integration:n,haveInstanceAction:o,containerDivRef:r,token:l,parentBlockStore:a,onDismiss:d,fileType:c}=e,u=(0,s().IS)((e=>({title:{color:e.regularTextColor,fontWeight:b().Wy.medium,whiteSpace:"initial",fontSize:14,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:b().J.UISmall.desktop,paddingLeft:8,flexGrow:1,fontWeight:b().Wy.regular},dictionaryKey:{color:e.lightTextColor,fontWeight:b().Wy.regular,fontSize:b().J.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:b().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},actionButton:{position:"absolute",top:10,right:10,zIndex:2},imageBackground:{marginTop:t.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center",padding:"docs"===c?"14px 54px":"14px 34px",borderRadius:6,background:"doc"===c?"#4285F4":"sheet"===c?"#34A853":"#F8CB4A"}})),[c,t.dictionaryAttributes]),g=yt(t.dictionaryAttributes,"username"),m=yt(t.dictionaryAttributes,"updated_at"),h="doc"===c?"Google Docs":"sheet"===c?"Google Sheets":"Google Slides";return(0,me.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:288},children:[(0,me.jsx)(ae().Ye,{alignItems:"center",style:{fontSize:12},children:(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(X().A,{type:"image_url",imageURL:n.icon,size:16,style:{marginRight:4}}),(0,me.jsx)("div",{style:{fontWeight:b().Wy.medium},children:h})]})}),(0,me.jsxs)(ae().Ye,{style:{gap:4,alignSelf:"stretch",alignItems:"center"},children:[m&&(0,me.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,me.jsx)("div",{style:u.dictionaryValue,children:(0,me.jsx)(S().sA,{id:"unfurling.generic.editor",defaultMessage:"Edited"})}),(0,me.jsx)(W().Ic,{...m,store:i,style:u.dictionaryValue})]}),g&&(0,me.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,me.jsx)("div",{style:u.dictionaryValue,children:(0,me.jsx)(S().sA,{id:"unfurling.generic.from",defaultMessage:"by"})}),(0,me.jsx)(W().Ic,{...g,store:i,style:u.dictionaryValue})]})]}),t.previewImageAttribute&&(0,me.jsx)("div",{style:u.imageBackground,children:(0,me.jsx)("div",{children:(0,me.jsx)(ee().Ay,{src:t.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})}),!o&&(0,me.jsx)("div",{style:u.actionButton,children:(0,me.jsx)(Q().Ay,{popupType:Q().z7.Popup,placementToOrigin:H().W.Right,alignmentToOrigin:H().C.Start,originGap:4,onClose:()=>{let e=!1;const t=r.current;t&&(e=(0,K().ux)(t.getBoundingClientRect(),A().$C.x,A().$C.y)),e||null==d||d()},renderOrigin:e=>(0,me.jsx)(q().A,{style:u.buttonOrigin,...e,children:(0,p()._)({width:14})}),render:e=>(0,me.jsx)(se().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,me.jsx)(S().sA,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:a,store:i,token:l,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]})}function jt(e){let{renderConfig:t}=e;const i=j().hS(t.icons||[],(e=>`${e.type}:${e.values[0].toString()}`));return i.length>=2?(0,me.jsx)(ae().Ye,{style:{height:16,gap:-5.333,justifyContent:"flex-end"},children:i.slice(0,5).map(((e,t)=>(0,me.jsx)(W().Tr,{attribute:e,isSmall:!0,isUltraSmall:!0,style:{zIndex:10-t,transform:`translateX(${-5*t}px)`,position:"relative"}},t)))}):1===i.length?(0,me.jsx)("div",{style:{paddingRight:4},children:(0,me.jsx)(W().Tr,{attribute:i[0],isSmall:!0,isUltraSmall:!0})}):null}function kt(e){const{state:{annotation:t,store:i,token:l},onDismiss:c}=e,u=x().T$c(t),g=(0,o().v3)(),m=(0,s().DP)(),y=(0,n.useRef)(null),[f,v]=(0,n.useState)(!1),j=(0,r().K8)((()=>{const t=J().Bv.createChildStore(i,{table:h().ev,id:u,spaceId:i.pointer.spaceId}),n=t.canEdit(),o=(0,R().yO)(),r=(0,z().Su)({store:t,isInDarkMode:"dark"===m.mode,canEdit:n,currentUserId:g.currentUser.id,getRenderFn:e=>t=>{var i,n;return(null===(i=e.hover)||void 0===i?void 0:i.call(e,t))||(null===(n=a().u.hover)||void 0===n?void 0:n.call(a().u,t))},showAction:void 0});if(!r)return;const{renderConfig:s,integration:x}=r,f=Boolean(r.action),j=e.isHoveredTokenEditable,k=i.recordStoreUIParentStore&&i.recordStoreUIParentStore instanceof J().Bv?i.recordStoreUIParentStore:void 0,I=x.id===d().Hd&&"error"===(null==r?void 0:r.action)&&428===(null==r?void 0:r.status_code);if(v(I),o){if(x.id===d().bh||x.id===d().ZY)return(0,me.jsx)(xt,{store:t,integration:x,renderConfig:s,haveInstanceAction:f,containerDivRef:y,token:l,parentBlockStore:k,onDismiss:c});if(x.id===d().e1)return(0,me.jsx)(ft,{store:t,integration:x,renderConfig:s,haveInstanceAction:f,containerDivRef:y,token:l,parentBlockStore:k,onDismiss:c});if(x.id===d().zG)return(0,me.jsx)(vt,{store:t,integration:x,renderConfig:s,haveInstanceAction:f,containerDivRef:y,token:l,parentBlockStore:k,onDismiss:c});if(x.id===d().Hd){const e=t.getFormat().uri;let i="drive";if(e&&(i=e.includes("spreadsheets")?"sheet":e.includes("document")?"doc":e.includes("presentation")?"slide":"drive"),"drive"!==i)return(0,me.jsx)(St,{store:t,integration:x,renderConfig:s,haveInstanceAction:f,containerDivRef:y,token:l,parentBlockStore:k,onDismiss:c,fileType:i})}}return(0,me.jsxs)("div",{style:{display:"flex",flexDirection:"column"},ref:y,children:[!I&&(0,me.jsxs)(ae().Ye,{alignItems:"center",style:{fontSize:12},children:[(0,me.jsx)(X().A,{type:"image_url",imageURL:x.icon,size:16,style:{margin:4}}),(0,me.jsx)("div",{style:{flexGrow:1,fontWeight:b().Wy.medium},children:x.name}),l&&!f&&j&&(0,me.jsx)("div",{children:(0,me.jsx)(Q().Ay,{popupType:Q().z7.Popup,placementToOrigin:H().W.Right,alignmentToOrigin:H().C.Start,originGap:4,onClose:()=>{let e=!1;const t=y.current;t&&(e=(0,K().ux)(t.getBoundingClientRect(),A().$C.x,A().$C.y)),e||null==c||c()},renderOrigin:e=>(0,me.jsx)(q().A,{style:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:m.lightIconColor},...e,children:(0,p()._)({width:14})}),render:e=>(0,me.jsx)(se().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,me.jsx)(S().sA,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:k,store:t,token:l,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]}),f&&j?(0,me.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"6px 0"},children:(0,me.jsx)(re().A,{canEdit:n,store:t,isHoverPreview:!0,postActionCallback:c})}):(0,me.jsx)(gt,{renderConfig:s,store:t})]})}),[u,i,g,m,l,c,e.isHoveredTokenEditable,y]);return j?(0,me.jsx)("div",{style:{padding:f?"0px 15px":"12px 16px",minWidth:260,maxWidth:450},children:j}):null}function bt(){return(0,s().IS)((e=>({icon:{height:16,width:16,fill:e.icon.purplePrimary,marginRight:2},title:{fontSize:12,color:e.icon.purplePrimary},summary:{...(0,O().pA)(4),fontSize:12,lineHeight:1.35,color:e.text.secondary,marginBottom:12},contentCover:{color:e.text.primary,fontSize:11,lineHeight:1.5,marginBottom:0,width:"110%",transform:"translateX(-13px) translateY(-2px) scale(0.91)"},contentCoverEmpty:{height:16},imageCoverWrap:{marginBottom:16},contentCoverFade:{height:48,background:`linear-gradient(to bottom, transparent, ${e.surface.elevated} 100%)`},loadingShimmer:{marginBottom:0},rendererBlockStyle:{fontSize:9}})),[])}function It(e){const t=(0,o().v3)(),{store:i,startBlockId:s,size:l}=e,a=bt(),d=(0,r().K8)((()=>M().EI(i)),[i]),c=d&&x().FAw(d)>=lt,u=(0,n.useMemo)((()=>g().JW()),[]),p=(0,r().K8)((()=>{var e;if("tall"===l)return 200;const t=i.getModel();return!t||!t.isCollectionView()||t.hasWikiBlockUri()||null!==(e=i.getAssociatedCollectionStore())&&void 0!==e&&e.isPageTreeCollection()?84:125}),[l,i]);return(0,n.useEffect)((()=>{const e=G().uk.getCurrentPageVisitId();return I().Z3(t,{hover_session_id:u,mentioned_page_id:i.pointer.id,hover_content_type:c?"ai_summary":"content_preview",page_visit_id:e}),()=>{I().Q_(t,{hover_session_id:u,hover_content_type:c?"ai_summary":"content_preview",mentioned_page_id:i.pointer.id,page_visit_id:e})}}),[t,u,c,i.pointer.id]),s||!c?(0,me.jsx)(B().z,{variant:"default",store:i,coverFormat:{type:"page_content"},coverContentFadedOverlay:!0,coverContentFadedOverlayStyle:a.contentCoverFade,coverHeight:p,startBlockId:s,contentWrapStyle:a.contentCover,imageCoverWrapStyle:a.imageCoverWrap,emptyGalleryCoverStyle:a.contentCoverEmpty,loadingShimmerStyle:a.loadingShimmer,showLoadingShimmer:!0,showEmptyGalleryCover:!0,onLoadProxiedImage:()=>{},rendererBlockStyle:a.rendererBlockStyle,renderAdditionalBlocks:!0}):(0,me.jsx)("div",{children:(0,me.jsx)("div",{style:a.summary,children:(0,me.jsx)(Z().A,{textValue:d,parentStore:i})})})}function wt(e){const{store:t,contentBlockStart:i}=(0,r().K8)((()=>{const t=V().default.state.currentSpaceStore;if(!t)return{store:void 0,contentBlockStart:void 0};const i=J().Bv.createChildStore(t,{id:e.state.annotation[1],table:"block"});if(!i.isNavigableBlock()){return{store:i.getNavigableBlockStore(),contentBlockStart:i}}return i.isDefined()?{store:i}:{store:void 0,contentBlockStart:void 0}}),[e.state.annotation]),n=(0,E().ME)(t);return t&&n&&e.originRect?(0,me.jsx)(Oe,{store:t,closestNonAliveAncestorStore:n,originRect:e.originRect}):(0,me.jsx)(Tt,{store:t,contentBlocks:i&&[i]})}const At=260,Ct=24;function Bt(){return(0,s().IS)((e=>({wrapper:{width:At},coverContainer:{height:36,zIndex:1},content:{padding:"0 16px"},breadcrumb:{color:e.text.tertiary,fontSize:11,marginBottom:-2},pageTitle:{display:"inline",fontWeight:b().Wy.semibold,color:e.text.primary,fontSize:13,lineHeight:1.15},pageTitleIcon:{zIndex:2,position:"relative",marginLeft:16,marginTop:-15,marginBottom:8},pageTitleContainer:{...(0,O().pA)(2),verticalAlign:"top",lineHeight:1.15},description:{fontSize:b().J.UISmall.desktop,color:e.icon.primary,lineHeight:1.2},empty:{height:16},highlightedBlockWrapper:{display:"flex",marginBottom:8}})),[])}function Tt(e){const{store:t,contentBlocks:i,events:n,size:o="regular"}=e,s=Bt(),{icon:l,isEmptyPage:a,content:d}=(0,r().K8)((()=>{if(!t)return{icon:void 0,isEmptyPage:!1,content:null};const e=t.isEmptyPage(),n=e?(0,me.jsx)("div",{style:{height:Ct}}):i?i.map(((e,i)=>(0,me.jsx)("div",{style:s.highlightedBlockWrapper,children:(0,me.jsx)(It,{store:t,startBlockId:null==e?void 0:e.id,size:o})},`${e.id}_${i}`))):(0,me.jsx)(It,{store:t,size:o});return{icon:t.getIcon(),isEmptyPage:e,content:n}}),[t,i,s.highlightedBlockWrapper,o]);return t?(0,me.jsxs)("div",{style:s.wrapper,...n,children:[(0,me.jsx)("div",{style:s.coverContainer,children:(0,me.jsx)(de().A,{store:t,disabled:!0,paddingLeft:0,paddingRight:0,height:36,proxyWidth:260})}),(0,me.jsx)(ie().A,{disabled:!0,icon:l,isEmptyPage:a,isLarge:!0,disableShrinking:!0,size:26,emojiSize:26,largeIcon:!0,style:s.pageTitleIcon}),(0,me.jsxs)(ae().wt,{gap:4,style:s.content,children:[(0,me.jsxs)(ae().wt,{gap:2,children:[(0,me.jsx)(ne().Ay,{store:t,style:s.breadcrumb}),(0,me.jsx)("div",{style:s.pageTitleContainer,children:(0,me.jsx)(oe().A,{shouldWrap:!0,maxLines:2,store:t,style:s.pageTitle})})]}),d]})]}):null}},881254:(e,t,i)=>{i.d(t,{R:()=>M});var n=i(296540),o=()=>i(908006),r=()=>i(484714),s=()=>i(401497),l=()=>i(925907),a=()=>i(30626),d=()=>i(657222),c=()=>i(173019),u=()=>i(959013),p=()=>i(100622),g=()=>i(284371),m=()=>i(884107),h=()=>i(522945),y=()=>i(115512),x=()=>i(962730),f=()=>i(397248),v=()=>i(630116),S=()=>i(704152),j=()=>i(406699),k=()=>i(854672),b=()=>i(285790),I=()=>i(816559),w=()=>i(710149),A=()=>i(21140),C=()=>i(904694),B=()=>i(24611),T=i(474848);function M(e){const t=(0,r().v3)(),{hoverData:i,href:M,handleEditClick:R,showEditButton:_,loading:D,store:z,token:W,onDismiss:P}=e,O=(0,s().IS)((e=>({newWrapper:{width:280,flexDirection:"column",alignItems:"flex-start"},coverContainer:{width:280,height:120},pageTitle:{display:"inline",fontWeight:g().Wy.semibold,color:e.text.primary,fontSize:13,lineHeight:1.15},highlightedBlockWrapper:{display:"flex",marginBottom:8},contentNew:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"12px 16px",gap:12,width:280},titleAndDescription:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:0,gap:2,width:248},linkTitle:{...(0,y().pA)(2),fontStyle:"normal",fontWeight:g().Wy.semibold,fontSize:14,letterSpacing:-.154,lineHeight:"143%",fontFeatureSettings:"'case' on",textOverflow:"ellipsis",color:e.regularTextColor},newDescription:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:0,...(0,y().pA)(3),textOverflow:"ellipsis",width:248},newText:{fontSize:12,fontWeight:400,whiteSpace:"normal",wordBreak:"break-word",color:e.regularTextColor},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor,background:i?(0,B().FF)(t):"dark"===e.mode?e.accentColors.gray[100]:e.buttonBackground,border:i?void 0:"1px solid var(--Stroke-Deemphasized, rgba(227, 226, 224, 0.50))"},iconBoxImageStyle:{margin:1}})),[t,i]),E=(0,u().tz)(),U=(0,n.useRef)(null),L=(0,u().YK)({copyLink:{defaultMessage:"Copy link",id:"hoverPreviewOverlay.copyLink"},editLink:{defaultMessage:"Edit link",id:"hoverPreviewOverlay.editLink"}}),H=(0,n.useCallback)((async()=>{await o().default.afterNextFlush();const e=await m().R.clipboardActions.load(),i=e.clipboardMessages.copiedLinkToClipboard,n=M;e.copyString({environment:t,stringValue:n,copiedMessage:i})}),[t,M]),F=z&&z.recordStoreUIParentStore&&z.recordStoreUIParentStore instanceof v().Bv?z.recordStoreUIParentStore:z instanceof v().Bv?z:void 0,K=(null==i?void 0:i.thumbnail_url)??((null==i?void 0:i.images)&&i.images.length>0&&i.images[0].url);return(0,T.jsxs)(A().wt,{style:O.newWrapper,children:[_&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(b().A,{onClick:H,icon:l().n,isDarkIconColor:!0,ariaLabel:E.formatMessage(L.copyLink),hasBackground:!0,style:{position:"absolute",top:8,right:8}}),(0,T.jsx)(b().A,{onClick:R,icon:c().r,isDarkIconColor:!0,ariaLabel:E.formatMessage(L.editLink),hasBackground:!0,style:{position:"absolute",top:8,right:35}})]}),W&&F&&!_&&(0,T.jsx)("div",{style:{position:"absolute",top:8,right:8},children:(0,T.jsx)(j().Ay,{popupType:j().z7.Popup,placementToOrigin:x().W.Right,alignmentToOrigin:x().C.Start,originGap:4,onClose:()=>{let e=!1;const t=U.current;t&&(e=(0,f().ux)(t.getBoundingClientRect(),h().$C.x,h().$C.y)),e||null==P||P()},renderOrigin:e=>(0,T.jsx)(S().A,{style:O.buttonStyle,...e,children:(0,a()._)({width:14,fill:i?p().Ay.white:p().Ay.uiGray})}),render:e=>(0,T.jsx)(C().A,{parentBlockStore:F,store:z,token:W,href:M,hoverData:i,onAccept:()=>e.close()})})}),K&&(0,T.jsx)(A().Ye,{style:O.coverContainer,children:(0,T.jsx)(I().Ay,{src:K,style:{width:"100%",height:"100%",left:0,top:"calc(50% - 280px/2)"}})}),(0,T.jsxs)(A().wt,{style:O.contentNew,children:[((null==i?void 0:i.title)||(null==i?void 0:i.description))&&(0,T.jsxs)(A().wt,{style:O.titleAndDescription,children:[(null==i?void 0:i.title)&&(0,T.jsx)(A().Ye,{gap:2,children:(0,T.jsx)("div",{style:O.linkTitle,children:null==i?void 0:i.title})}),(null==i?void 0:i.description)&&(0,T.jsx)(A().Ye,{gap:2,children:(0,T.jsx)("div",{style:O.newDescription,children:(0,T.jsx)("div",{spellCheck:!1,style:O.newText,children:(0,T.jsx)("div",{children:null==i?void 0:i.description})})})})]}),D?(0,T.jsx)(w().A,{style:{width:200,height:16}}):(0,T.jsxs)(A().Ye,{alignItems:"left",style:{display:"flex",flexDirection:"row",alignItems:"center",padding:0,gap:4,width:205,height:16},children:[null!=i&&i.favicon_url?(0,T.jsx)(k().A,{type:"image_url",imageURL:null==i?void 0:i.favicon_url,size:16,style:O.iconBoxImageStyle}):null!=i&&i.icon_url?(0,T.jsx)(k().A,{type:"image_url",imageURL:null==i?void 0:i.icon_url,size:16,style:O.iconBoxImageStyle}):(0,T.jsx)(b().A,{icon:d().w,isDarkIconColor:!0,disabled:!0}),(0,T.jsx)("div",{style:{flexGrow:0,fontWeight:g().Wy.medium,color:"#787774",fontSize:12,...g().RC},children:(null==i?void 0:i.provider_name)||(null==i?void 0:i.link_provider)||M})]})]})]})}},904694:(e,t,i)=>{i.d(t,{A:()=>v});i(944114),i(296540);var n=()=>i(484714),o=()=>i(700500),r=()=>i(925907),s=()=>i(673724),l=()=>i(919709),a=()=>i(959013),d=()=>i(443120),c=()=>i(884107),u=()=>i(246826),p=()=>i(317909),g=()=>i(722872),m=()=>i(575143),h=()=>i(928600),y=()=>i(939740),x=()=>i(89924),f=i(474848);function v(e){const{store:t,parentBlockStore:i,onAccept:v,token:S,href:j,hoverData:k}=e,b=(0,n().v3)(),I=[];return I.push({key:0,render:e=>(0,f.jsx)(x().A,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"copy link",render:e=>(0,f.jsx)(m().A,{...e,title:(0,f.jsx)(a().sA,{id:"linkMention.copyLink",defaultMessage:"Copy Link"}),svg:r().n}),action:async()=>{if(!t)return;if(!S)return;const e=await c().R.clipboardActions.load(),i=e.clipboardMessages.copiedLinkToClipboard,n=j;e.copyString({environment:b,stringValue:n,copiedMessage:i})}}]}),I.push({key:1,render:e=>(0,f.jsx)(x().A,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"convert to bookmark",render:e=>(0,f.jsx)(m().A,{...e,title:(0,f.jsx)(a().sA,{id:"linkMention.convertToBookmark",defaultMessage:"Turn into preview"}),svg:s().I}),action:()=>{t&&S&&p().createAndCommit({userAction:"LinkMentionMenu.convertToBookmark",environment:b,canUndo:!0,perform:e=>{if(k){const n=u().Wv({environment:b,type:o().xd.bookmark,inMemoryRecordCache:t.inMemoryRecordCache,properties:{title:k&&k.title?l().x9d(k.title):l().x9d(j),link:l().x9d(j),description:k&&k.description?l().x9d(k.description):void 0},format:{bookmark_cover:k.thumbnail_url,bookmark_icon:k.favicon_url?k.favicon_url:k.icon_url},transaction:e,spaceId:t.pointer.spaceId});d().ed({environment:b,parentBlockStore:i,blockStore:n,token:S,transaction:e})}else{const n=u().Wv({environment:b,type:o().xd.bookmark,inMemoryRecordCache:t.inMemoryRecordCache,properties:{title:l().x9d(j),link:l().x9d(j)},transaction:e,spaceId:t.pointer.spaceId});d().ed({environment:b,parentBlockStore:i,blockStore:n,token:S,transaction:e})}}})}}]}),(0,f.jsx)(h().A,{menuType:g().gu.Popup,children:(0,f.jsx)(y().Ay,{type:y().Oh.Vertical,initialFocus:void 0,onAccept:v,sections:I,style:{paddingTop:3,paddingBottom:3}})})}}}]);