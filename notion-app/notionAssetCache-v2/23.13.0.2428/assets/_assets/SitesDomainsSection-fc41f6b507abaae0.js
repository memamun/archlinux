"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[27229],{3635:(e,t,i)=>{i.d(t,{Aw:()=>o,NS:()=>d,W2:()=>s,h6:()=>a,pO:()=>r});var n=()=>i(989423);function s(e){(0,n().u4)({environment:e,event:{eventName:"click_create_domain",eventProperties:{}}})}function a(e,t){(0,n().u4)({environment:e,event:{eventName:"select_domain_type_to_create",eventProperties:t}})}function o(e,t){(0,n().u4)({environment:e,event:{eventName:"verify_custom_domain",eventProperties:t}})}function d(e){(0,n().u4)({environment:e,event:{eventName:"verify_custom_domain_early_exit",eventProperties:{}}})}function r(e,t){(0,n().u4)({environment:e,event:{eventName:"click_validate_custom_domain",eventProperties:t}})}},91462:(e,t,i)=>{i.d(t,{A:()=>s});class n extends(()=>i(757695))().default{getInitialState(){return{isOpen:!1}}}const s=new n},108912:(e,t,i)=>{i.r(t),i.d(t,{DomainsSection:()=>Xt});i(581454);var n=i(296540),s=()=>i(56366),a=()=>i(401497),o=()=>i(310600),d=()=>i(179034),r=()=>i(959013),l=()=>i(859428),c=()=>i(125565),u=()=>i(21140),m=()=>i(8178),p=()=>i(317182),f=()=>i(962730),h=()=>i(630116),g=()=>i(112698),x=()=>i(597898),y=()=>i(562800),v=()=>i(589006),j=()=>i(319283),b=()=>i(734648),C=()=>i(91462),A=()=>i(534177),S=()=>i(107683),D=()=>i(714300),w=()=>i(577173),I=()=>i(280335),M=()=>i(7674),B=()=>i(581495),T=i(474848);function k(){return(0,T.jsx)(B().eh.Provider,{value:w().Wq,children:(0,T.jsx)(M().tf,{header:(0,T.jsx)(N,{}),footer:(0,T.jsx)(P,{})})})}function N(){return(0,T.jsx)(M().YA,{iconAndTitle:(0,T.jsx)(M().ZQ,{iconGroup:I().Z,iconColorName:"redPrimary",title:(0,T.jsx)(r().sA,{id:"sites.addPaymentMethod.title",defaultMessage:"Add a payment method"})}),description:(0,T.jsx)(r().sA,{id:"sites.addPaymentMethod.subtitle",defaultMessage:"Please go to the billing tab to add a payment method on your account"})})}function P(){return(0,T.jsx)(M().aO,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,T.jsx)(r().sA,{id:"sites.addPaymentMethod.continue",defaultMessage:"Got it"}),onClick:()=>w().x3()}]})}var _=()=>i(484714),O=()=>i(916833),R=()=>i(379725),H=()=>i(84817),L=()=>i(719147),V=()=>i(836251),U=()=>i(112527),K=()=>i(485771),W=()=>i(963176);function G(e){const{spaceStore:t,billingData:i}=e,a=(0,_().v3)(),[o,d]=(0,n.useState)(!1),r=(0,s().K8)((()=>v().A.getState()),[]),{isOpen:l,domain:c}=r,{price:u,checkoutState:m,isTrial:p,subtotal:f,recurringSubtotal:h}=(0,K().A)({spaceStore:t,billingData:i}),g=(0,A().O9)(i.paymentMethod);(0,n.useEffect)((()=>{g||w().LP("AddPaymentMethod")}),[g]);const x=(0,n.useCallback)((async()=>{if(!c)return;d(!0),w().LP("UpdatingPayment");const e=await w().k3({environment:a,spaceId:t.id,domainId:c.id});if(d(!1),e.subscriptionWasUpdated&&"requires_action"===e.paymentIntentStatus){const t=await(0,U().getStripe)();if(!t)return;await t.handleNextAction({clientSecret:e.paymentIntentClientSecret??""})}w().x3()}),[a,t,c]);return l&&u&&m&&g?(0,T.jsx)(B().eh.Provider,{value:w().x3,children:(0,T.jsx)(M().tf,{header:(0,T.jsx)(q,{isTrial:p}),footer:(0,T.jsx)(E,{isTrial:p,isDisabled:!u||!f||o,onClick:x}),children:(0,T.jsx)(W().A,{billingData:i,price:u,checkoutState:m,subtotal:f,recurringSubtotal:h})})}):null}function q(e){const{isTrial:t}=e;return t?(0,T.jsx)(M().YA,{iconAndTitle:(0,T.jsx)(M().ZQ,{iconGroup:O().z,title:(0,T.jsx)(r().sA,{id:"sites.sitesAddOnCheckout.trial.title",defaultMessage:"Upgrade to Plus and purchase add-on"})}),description:(0,T.jsx)(r().sA,{id:"sites.sitesAddOnCheckout.trial.subtitle",defaultMessage:"Youâ€™re currently on a trial of the Plus plan. Upgrade to the Plus plan immediately and add a custom domain to publish with."})}):(0,T.jsx)(M().YA,{iconAndTitle:(0,T.jsx)(M().ZQ,{iconGroup:R().n,title:(0,T.jsx)(r().sA,{id:"sites.sitesAddOnCheckout.title",defaultMessage:"Custom domain add-on"})}),description:(0,T.jsx)(r().sA,{id:"sites.sitesAddOnCheckout.subtitle",defaultMessage:"Notion charges a monthly fee to host your custom domain"})})}function E(e){const{isTrial:t,isDisabled:i,onClick:n}=e;return(0,T.jsx)(M().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:t?(0,T.jsx)(r().sA,{id:"sites.sitesAddOnCheckout.continue.trial",defaultMessage:"Upgrade to Plus and purchase add-on"}):(0,T.jsx)(r().sA,{id:"sites.sitesAddOnCheckout.continue",defaultMessage:"Purchase add-on"}),isDisabled:i,onClick:n}],caption:(0,T.jsx)(H().Y1,{width:"hug",children:(0,T.jsx)(r().sA,{defaultMessage:'By clicking "Purchase add-on" you agree to the{br}<terms>Notion Terms and Conditions</terms>',id:"sites.sitesAddOnCheckout.caption",values:{br:(0,T.jsx)("br",{}),terms:e=>(0,T.jsx)(L().A,{external:!0,href:(0,V().xS)("terms"),children:e})}})})})}var F=()=>i(331542),Y=()=>i(554509);function Z(){return(0,T.jsxs)(H().Y1,{padding:20,gap:16,width:300,height:"hug",align:"center",children:[(0,T.jsx)(F().A,{legacySize:36}),(0,T.jsx)(Y().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,T.jsx)(r().sA,{id:"sites.updatingPayment.message",defaultMessage:"Updating payment..."})})]})}function Q(e){const{spaceStore:t}=e,{isOpen:i,step:n}=(0,s().K8)((()=>v().A.getState()),[]),a=(0,D().l)({spaceId:t.id});return a&&i?(0,T.jsx)(S().s,{isOpen:!0,onDismiss:w().x3,areaConstraint:{width:{type:"fixed",length:"ConfirmPayment"===n?450:300}},render:()=>{switch(n){case"ConfirmPayment":return(0,T.jsx)(G,{spaceStore:t,billingData:a});case"UpdatingPayment":return(0,T.jsx)(Z,{});case"AddPaymentMethod":return(0,T.jsx)(k,{});default:(0,A().HB)(n)}},animateSizeTransition:"ConfirmPayment"===n}):null}var $=()=>i(620553);function z(e){const{iconGroup:t,title:i,description:n,descriptionValues:s,confirmationButtonType:a,confirmationButton:o,onConfirm:d,showCancel:r,showDismissButton:l}=e;return(0,T.jsx)(B().eh.Provider,{value:w().HH,children:(0,T.jsx)(X,{iconGroup:t,title:i,description:n,descriptionValues:s,confirmationButtonType:a,confirmationButton:o,onConfirm:d,showCancel:r,showDismissButton:l})})}function X(e){const{iconGroup:t,title:i,description:n,descriptionValues:s,confirmationButtonType:a,confirmationButton:o,onConfirm:d,showCancel:r,showDismissButton:l}=e;return(0,T.jsx)("div",{children:(0,T.jsx)(M().tf,{header:(0,T.jsx)(J,{iconGroup:t,title:i,description:n,descriptionValues:s}),footer:(0,T.jsx)(ee,{confirmationButtonType:a,confirmationButton:o,onConfirm:d,showCancel:r}),showDismissButton:l})})}function J(e){const{iconGroup:t,title:i,description:n,descriptionValues:s}=e,o=(0,a().IS)((()=>({description:{width:"100%",overflow:"hidden",textOverflow:"ellipsis"}})),[]);return(0,T.jsx)(M().YA,{iconAndTitle:(0,T.jsx)(M().ZQ,{iconGroup:t,iconColorName:"uiRedPrimary",title:(0,T.jsx)(r().sA,{...i})}),description:(0,T.jsx)(r().sA,{...n,values:s}),descriptionStyle:o.description})}function ee(e){const{confirmationButtonType:t,confirmationButton:i,onConfirm:n,showCancel:s}=e;return(0,T.jsx)(M().aO,{layout:"vertical",primaryButtons:[{buttonType:t,label:(0,T.jsx)(r().sA,{...i}),onClick:n}],secondaryButtons:s?[{buttonType:"dismiss"}]:[]})}function te(){return(0,T.jsxs)(H().Y1,{padding:20,gap:16,width:300,height:"hug",align:"center",children:[(0,T.jsx)(F().A,{legacySize:36}),(0,T.jsx)(Y().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,T.jsx)(r().sA,{id:"sites.deletingDomain.message",defaultMessage:"Deleting domain..."})})]})}i(944114);var ie=()=>i(167355),ne=()=>i(413267),se=()=>i(284371),ae=()=>i(493823),oe=()=>i(760217),de=()=>i(406699),re=()=>i(928600),le=()=>i(939740),ce=()=>i(460292),ue=()=>i(89924),me=()=>i(722872),pe=()=>i(182242),fe=()=>i(351360),he=()=>i(700250);const ge=(0,r().YK)({title:{id:"sites.updateDomainBeforeDelete.title",defaultMessage:"Select new domain"},description:{id:"sites.updateDomainBeforeDelete.description",defaultMessage:"All pages under {domainName} will now be published under another domain"},updateDomainButton:{id:"sites.updateDomainBeforeDelete.buttonTitle",defaultMessage:"Publish"},goBackButton:{id:"sites.updateDomainBeforeDelete.goBackTitle",defaultMessage:"Go back"}});function xe(){const e=(0,s().K8)((()=>j().A.getState()),[]);return e.isOpen?(0,T.jsx)(B().eh.Provider,{value:w().HH,children:(0,T.jsx)(ye,{state:e})}):null}function ye(e){const{state:t}=e,[i,s]=(0,n.useState)(t.domain);return(0,T.jsx)(M().tf,{header:(0,T.jsx)(be,{state:t}),footer:(0,T.jsx)(Ce,{state:t,newDomain:i}),showDismissButton:!0,children:(0,T.jsx)(ve,{currentDomain:t.domain,newDomain:i,onChange:e=>{s(e)}})})}function ve(e){const{currentDomain:t,newDomain:i,onChange:n}=e,o=(0,s().K8)((()=>t.getDomainStatus()),[t]),d=(0,a().IS)((e=>({valueButton:{paddingLeft:10,paddingRight:8,height:32,width:"100%",borderRadius:10,border:`1px solid ${e.stroke.primary}`,background:"payment_required"===o?e.tint.uiRed:"inherit",color:"payment_required"===o?e.text.uiRedPrimary:e.text.primary},valueButtonPressed:{background:"payment_required"===o?e.tint.uiRedPressed:"inherit"},icon:{marginRight:4}})),[o]);return(0,T.jsx)(de().Ay,{popupType:de().z7.Popup,renderOrigin:e=>(0,T.jsxs)(ae().p,{...e,style:d.valueButton,hoveredStyle:d.valueButton,pressedStyle:{...d.valueButton,...d.valueButtonPressed},children:["payment_required"===o&&(0,T.jsx)("div",{style:d.icon,children:(0,T.jsx)(ce().Q,{iconGroup:ie().F,colorName:"redPrimary",variantName:"small"})}),(0,T.jsx)(pe().G,{domain:i??t,style:{width:"100%"}})]}),alignmentToOrigin:he().MY.Start,placementToOrigin:he().UV.Bottom,render:e=>(0,T.jsx)(je,{currentDomain:t,onChange:n,onClose:()=>{e.close()}}),style:{width:"100%"}})}function je(e){const{currentDomain:t,onChange:i,onClose:n}=e,o=(0,s().K8)((()=>{const e=fe().default.state.currentSpaceStore;return y().$o(e)}),[]),d=(0,a().IS)((e=>({icon:{height:14,width:14,fill:e.icon.secondary},checkIcon:{height:12,width:12,fill:e.icon.secondary},aliasIcon:{marginRight:10},titleText:se().RC,disabledText:{color:e.text.tertiary,...se().RC},disabledMessageContainer:{paddingTop:4,display:"flex",flexDirection:"column",gap:4,whiteSpace:"normal"}})),[]),r=[],l=o.map((e=>({key:e.id,action:()=>{i(e),n()},render:i=>{const n="active"!==e.getDomainStatus()||e.id===t.id,s=n?d.disabledText:d.titleText,a=n?{...d.checkIcon,...d.disabledText}:d.checkIcon;return(0,T.jsx)(oe().A,{...i,disabled:n,title:y().MN({domainName:e.getDomainName(),domainType:e.getDomainType()}),titleStyle:s,right:e.id===t.id||!t.id&&e.isDefault()?(0,ne().b)(a):null})}})));return r.push({key:"domains",render:e=>(0,T.jsx)(ue().A,{...e,topBorder:!0}),items:l}),(0,T.jsx)(re().A,{menuType:me().gu.Popup,width:360,children:(0,T.jsx)(le().Ay,{type:le().Oh.Vertical,initialFocus:void 0,sections:r})})}function be(e){const{state:t}=e,{domain:i,publishedSitesCount:n}=t,a=(0,s().K8)((()=>{const e=fe().default.state.currentSpaceStore;return y().Ix({spaceStore:e,domainId:i.id})}),[i]);return(0,T.jsx)(M().YA,{iconAndTitle:(0,T.jsx)(M().ZQ,{iconGroup:R().n,title:(0,T.jsx)(r().sA,{...ge.title,values:{domainName:a,publishedSitesCount:n}})}),description:(0,T.jsx)(r().sA,{...ge.description,values:{domainName:a}})})}function Ce(e){const{state:t,newDomain:i}=e,{spaceId:n,domain:s,publishedSitesCount:a,publishedSitesBlockIds:o}=t,d=(0,_().v3)();return(0,T.jsx)(M().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,T.jsx)(r().sA,{...ge.updateDomainButton}),onClick:async()=>{w().dD("Deleting",n,s,a,o||[]);const e=await w().$G({environment:d,oldDomainId:s.id,oldDomainType:s.domain_type,newDomainId:i.id});null!=e&&e.error?w().dD("SelectDomainToUpdateSitesBeforeDelete",n,s,a,o||[]):w().HH()}}],secondaryButtons:[{buttonType:"secondary",label:(0,T.jsx)(r().sA,{...ge.goBackButton}),onClick:()=>{w().dD("UnpublishOrUpdateDomainBeforeDelete",n,s,a,o||[])}}]})}var Ae=()=>i(764333),Se=()=>i(652300);const De=(0,r().YK)({title:{id:"sites.unpublishOrUpdateDomainBeforeDelete.title",defaultMessage:"{domainName} is currently being used to publish content on the web"},publishedSitesTitle:{id:"sites.unpublishOrUpdateDomainBeforeDelete.publishedSitesTitle",defaultMessage:"Your published sites"},updateDomainButton:{id:"sites.updateDomainForAllSites.buttonTitle",defaultMessage:"Publish to another domain"},unpublishSitesButton:{id:"sites.unpublishAllSites.buttonTitle",defaultMessage:"Unpublish all sites"}});function we(){const e=(0,s().K8)((()=>j().A.getState()),[]);return e.isOpen?(0,T.jsx)(B().eh.Provider,{value:w().HH,children:(0,T.jsx)(Ie,{state:e})}):null}function Ie(e){const{state:t}=e;return(0,T.jsx)(M().tf,{header:(0,T.jsx)(Me,{state:t}),footer:(0,T.jsx)(Be,{state:t}),showDismissButton:!0,children:(0,T.jsx)(Te,{publishedSitesBlockIds:t.publishedSitesBlockIds,domain:t.domain})})}function Me(e){const{state:t}=e,{domain:i,publishedSitesCount:n}=t,a=(0,s().K8)((()=>{const e=fe().default.state.currentSpaceStore;return y().Ix({spaceStore:e,domainId:i.id})}),[i]);return(0,T.jsx)(M().YA,{iconAndTitle:(0,T.jsx)(M().ZQ,{iconGroup:I().Z,title:(0,T.jsx)(r().sA,{...De.title,values:{domainName:a,publishedSitesCount:n}})})})}function Be(e){const{state:t}=e,{spaceId:i,domain:n,publishedSitesCount:s,publishedSitesBlockIds:a}=t,o=(0,_().v3)();return(0,T.jsx)(M().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,T.jsx)(r().sA,{...De.updateDomainButton}),onClick:()=>{w().dD("SelectDomainToUpdateSitesBeforeDelete",i,n,s,a||[])}}],secondaryButtons:[{buttonType:"secondary",label:(0,T.jsx)(r().sA,{...De.unpublishSitesButton}),onClick:async()=>{w().dD("Deleting",i,n,s,a||[]);const e=await w().cG({environment:o,domainId:n.id,domainType:n.domain_type});null!=e&&e.error?w().dD("UnpublishOrUpdateDomainBeforeDelete",i,n,s,a||[]):w().HH()}}]})}function Te(e){const{publishedSitesBlockIds:t,domain:i}=e,n=(0,s().K8)((()=>{const e=fe().default.state.currentSpaceStore;return e?t.map((t=>h().Bv.createChildStore(e,{table:d().ev,id:t}))):[]}),[t]),o=(0,s().K8)((()=>i.getPublicHomePage()),[i]),l=(0,a().IS)((e=>({container:{width:"100%",padding:20,paddingTop:16,borderRadius:10,background:e.surface.wash,fontSize:se().J.UISmall.desktop,maxHeight:310,overflow:"auto"},homeIcon:{color:e.icon.secondary,width:14,height:16}})),[]);return(0,T.jsxs)(u().wt,{gap:10,style:l.container,children:[(0,T.jsx)(c().A,{isSecondaryColor:!0,isSmall:!0,children:(0,T.jsx)(r().sA,{...De.publishedSitesTitle})}),n.map((e=>(0,T.jsxs)(u().Ye,{alignItems:"center",children:[(0,T.jsx)(Se().A,{store:e}),o===e.id&&(0,Ae().P)(l.homeIcon)]},e.id)))]})}const ke=(0,r().YK)({deleteConfirmationTitle:{id:"sites.deleteDomain.confirmationTitle",defaultMessage:"Delete domain?"},deleteConfirmationDescription:{id:"sites.deleteDomain.confirmationCaption",defaultMessage:"You will no longer be able to use {domainName} for publishing"},deleteConfirmationButton:{id:"sites.deleteDomain.deleteButton",defaultMessage:"Delete domain"},removeCustomDomainAddOnTitle:{id:"sites.removeCustomDomainAddOn.confirmationTitle",defaultMessage:"Custom domain add-on purchase"},removeCustomDomainAddOnDescription:{id:"sites.removeCustomDomainAddOn.confirmationCaption",defaultMessage:"Custom domain add-on has been purchased for your entire billing cycle, you will not be refunded for removing the domain"},removeCustomDomainAddOnConfirmationButton:{id:"sites.removeCustomDomainAddOn.confirmationButton",defaultMessage:"Got it, continue deleting domain"}});function Ne(){const e=(0,_().v3)(),t=(0,s().K8)((()=>{const e=j().A.getState();if(e.isOpen)return e}),[]),i=(0,s().K8)((()=>null!=t&&t.domain?y().MN({domainName:t.domain.getDomainName(),domainType:t.domain.getDomainType()}):void 0),[t]);if(!t)return null;const{step:n,spaceId:a,domain:o,publishedSitesCount:d,publishedSitesBlockIds:r}=t,l="UnpublishOrUpdateDomainBeforeDelete"===n||"SelectDomainToUpdateSitesBeforeDelete"===n?400:300;return(0,T.jsx)(S().s,{isOpen:!0,onDismiss:w().HH,areaConstraint:{width:{type:"fixed",length:l}},render:()=>{switch(n){case"ConfirmDelete":return(0,T.jsx)(z,{iconGroup:$().t,title:ke.deleteConfirmationTitle,description:ke.deleteConfirmationDescription,descriptionValues:{domainName:i},confirmationButtonType:"destructive",confirmationButton:ke.deleteConfirmationButton,onConfirm:async()=>{"custom"===o.domain_type?w().dD("ConfirmCustomDomainAddOn",a,o,d,r):await Pe(e,a,o,d,r)},showCancel:!0,showDismissButton:!0});case"UnpublishOrUpdateDomainBeforeDelete":return(0,T.jsx)(we,{});case"SelectDomainToUpdateSitesBeforeDelete":return(0,T.jsx)(xe,{});case"Deleting":return(0,T.jsx)(te,{});case"ConfirmCustomDomainAddOn":return(0,T.jsx)(z,{iconGroup:I().Z,title:ke.removeCustomDomainAddOnTitle,description:ke.removeCustomDomainAddOnDescription,descriptionValues:{domainName:i},confirmationButtonType:"outline",confirmationButton:ke.removeCustomDomainAddOnConfirmationButton,onConfirm:async()=>{await Pe(e,a,o,d,r)},showCancel:!1,showDismissButton:!1});default:(0,A().HB)(n)}}})}async function Pe(e,t,i,n,s){w().dD("Deleting",t,i,n,s),await w().HM({environment:e,spaceId:t,domainId:i.id,domainType:i.domain_type,showErrorDialog:!0}),w().HH()}var _e=()=>i(568625),Oe=()=>i(285790),Re=()=>i(553965);const He=(0,i(340498).wt)("creditCard",{viewBox:"0 0 20 20",svg:(0,T.jsx)("path",{d:"M5.16699 12.9072C4.96647 12.9072 4.80469 12.8457 4.68164 12.7227C4.55859 12.5996 4.49707 12.4424 4.49707 12.251V10.9863C4.49707 10.7904 4.55859 10.6331 4.68164 10.5146C4.80469 10.3916 4.96647 10.3301 5.16699 10.3301H6.8418C7.04232 10.3301 7.2041 10.3916 7.32715 10.5146C7.4502 10.6331 7.51172 10.7904 7.51172 10.9863V12.251C7.51172 12.4424 7.4502 12.5996 7.32715 12.7227C7.2041 12.8457 7.04232 12.9072 6.8418 12.9072H5.16699ZM2.68555 8.09473V6.49512H17.3213V8.09473H2.68555ZM4.15527 15.4844C3.41699 15.4844 2.85872 15.2975 2.48047 14.9238C2.10221 14.5501 1.91309 13.9987 1.91309 13.2695V5.87988C1.91309 5.14616 2.10221 4.59245 2.48047 4.21875C2.85872 3.84505 3.41699 3.6582 4.15527 3.6582H15.8447C16.583 3.6582 17.1413 3.84733 17.5195 4.22559C17.8978 4.59928 18.0869 5.15072 18.0869 5.87988V13.2695C18.0869 13.9987 17.8978 14.5501 17.5195 14.9238C17.1413 15.2975 16.583 15.4844 15.8447 15.4844H4.15527ZM4.2373 14.1445H15.7627C16.0771 14.1445 16.3187 14.0625 16.4873 13.8984C16.6605 13.7344 16.7471 13.486 16.7471 13.1533V5.99609C16.7471 5.66341 16.6605 5.41504 16.4873 5.25098C16.3187 5.08236 16.0771 4.99805 15.7627 4.99805H4.2373C3.91829 4.99805 3.67448 5.08236 3.50586 5.25098C3.3418 5.41504 3.25977 5.66341 3.25977 5.99609V13.1533C3.25977 13.486 3.3418 13.7344 3.50586 13.8984C3.67448 14.0625 3.91829 14.1445 4.2373 14.1445Z"})});var Le=()=>i(173019),Ve=()=>i(735384),Ue=()=>i(209660),Ke=()=>i(3635);function We(e){const{spaceId:t,domain:i,parent:o}=e,d=(0,_().v3)(),r=(0,s().K8)((()=>{var e;return null===(e=fe().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),[l,c]=(0,n.useState)(void 0),{domainType:u,domainStatus:m,isDefault:p}=(0,s().K8)((()=>({domainType:i.getDomainType(),domainStatus:i.getDomainStatus(),isDefault:i.isDefault()})),[i]),f=(0,x().P9)({name:"sites_multiple_public_domains",spaceId:t,userId:r});(0,n.useEffect)((()=>{!async function(){if(i.isDefault())return;const e=await w().fN({environment:d,spaceId:t,domainId:i.id});c(e)}()}),[d,t,i,c]);const h=(0,a().IS)((()=>({actionIcon:{width:14,height:14}})),[]),g=[];return p||f&&"default"===u?g.push({key:"edit",render:e=>(0,T.jsx)(qe,{...e,iconStyle:h.actionIcon}),action:()=>{w().yH("EditDomainName",t,i),o.close()}}):f&&"custom"===u&&("invalid"===m||"certificate_pending"===m||"notion_dcv_pending"===m?g.push({key:"validate",render:e=>(0,T.jsx)(Fe,{...e,iconStyle:h.actionIcon}),action:()=>{w().Ej(t,i),(0,Ke().pO)(d,{domain_id:i.id}),o.close()}}):"payment_required"===m&&g.push({key:"pay",render:e=>(0,T.jsx)(Ye,{...e,iconStyle:h.actionIcon}),action:()=>{w().Xn(t,i),o.close()}})),g.push({key:"delete",render:e=>(0,T.jsx)(Ee,{...e,disabled:p,iconStyle:h.actionIcon}),action:()=>{w().dD(l&&l.sitesCount>0?"UnpublishOrUpdateDomainBeforeDelete":"ConfirmDelete",t,i,null==l?void 0:l.sitesCount,(null==l?void 0:l.sites)||[]),o.close()}}),(0,T.jsxs)(T.Fragment,{children:[!p&&!f&&(0,T.jsx)(Ge,{}),(0,T.jsx)(re().A,{menuType:me().gu.Popup,minWidth:160,children:(0,T.jsx)(le().Ay,{initialFocus:void 0,type:le().Oh.Vertical,sections:[{key:0,render:e=>(0,T.jsx)(ue().A,{...e}),items:g}]})})]})}function Ge(){const[e,t]=(0,n.useState)(!1),i=(0,a().IS)((t=>({container:{width:210,padding:"9px 10px 6px 12px",borderBottom:`1px solid ${t.stroke.secondary}`},text:{fontWeight:400,color:t.text.primary},link:{backgroundColor:e?t.tint.regular:void 0}})),[e]),s=(0,n.useCallback)((()=>Ue().Ow({currentTab:"plans"})),[]);return(0,T.jsx)("div",{style:i.container,children:(0,T.jsx)(Y().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",customStyles:i.text,children:(0,T.jsx)(r().sA,{id:"sites.domainActions.freeTierMessage",defaultMessage:"Multiple/custom domains are not available for free workspaces. <link>Upgrade plan</link>",values:{link:e=>(0,T.jsx)(L().A,{disableHover:!0,onClick:s,onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),style:i.link,children:e})}})})})}const qe=n.forwardRef(((e,t)=>{const{iconStyle:i}=e;return(0,T.jsx)(oe().A,{...e,ref:t,icon:(0,Le().r)(i),title:(0,T.jsx)(r().sA,{id:"sites.domainActions.edit",defaultMessage:"Update"})})}));qe.displayName="EditAction";const Ee=n.forwardRef(((e,t)=>{const{iconStyle:i,disabled:n}=e,s=(0,a().IS)((e=>({disabledContainer:{color:e.text.quaternary},disabledIcon:{color:e.icon.quaternary,...i}})),[i]);return n?(0,T.jsx)(l().A,{renderTooltip:()=>(0,T.jsx)(r().sA,{id:"sites.domainActions.deleteDefaultDomain",defaultMessage:"Default domain of the workspace cannot be deleted"}),placement:f().W.Bottom,render:i=>(0,T.jsx)(oe().A,{...(0,Re().A)(i,e),style:s.disabledContainer,ref:t,icon:(0,Ve().I)(s.disabledIcon),title:(0,T.jsx)(r().sA,{id:"sites.domainActions.delete",defaultMessage:"Delete"})})}):(0,T.jsx)(oe().A,{...e,ref:t,icon:(0,Ve().I)(i),title:(0,T.jsx)(r().sA,{id:"sites.domainActions.delete",defaultMessage:"Delete"})})}));Ee.displayName="DeleteAction";const Fe=n.forwardRef(((e,t)=>{const{iconStyle:n}=e;return(0,T.jsx)(oe().A,{...e,ref:t,icon:(0,i(168799).X)(n),title:(0,T.jsx)(r().sA,{id:"sites.domainActions.validate",defaultMessage:"Validate"})})}));Fe.displayName="ValidateAction";const Ye=n.forwardRef(((e,t)=>{const{iconStyle:i}=e;return(0,T.jsx)(oe().A,{...e,ref:t,icon:He(i),title:(0,T.jsx)(r().sA,{id:"sites.domainActions.pay",defaultMessage:"Update payment"})})}));function Ze(e){const{spaceId:t,domain:i,disabled:n}=e,s=(0,r().tz)(),o=(0,a().IS)((()=>({editButtonIcon:{width:18,height:18}})),[]);return(0,T.jsx)(de().Ay,{alignmentToOrigin:f().C.End,renderOrigin:e=>(0,T.jsx)(l().A,{disableTooltip:!n,renderTooltip:()=>(0,T.jsx)(r().sA,{id:"sites.editDomain.noEditAccess",defaultMessage:"Only workspace owners can update the domain"}),placement:f().W.Bottom,render:t=>(0,T.jsx)(Oe().A,{...(0,Re().A)(t,e),ariaLabel:s.formatMessage({id:"sites.editDomain.updateDomain",defaultMessage:"Update domain"}),icon:_e().L,iconStyle:o.editButtonIcon,disabled:n})}),popupType:de().z7.Popup,render:e=>(0,T.jsx)(We,{spaceId:t,domain:i,parent:e})})}Ye.displayName="PaymentAction";var Qe=()=>i(890874),$e=()=>i(76118);function ze(e,t,i){return"invalid"===e||"payment_required"===e?t.accentColors.red[i]:"active"===e?t.accentColors.green[i]:"certificate_pending"===e||"notion_dcv_pending"===e?t.accentColors.yellow[i]:void(0,A().HB)(e)}function Xe(e){const{domainStatus:t,featureAvailability:i}=e;return"invalid"===t?(0,T.jsx)(r().sA,{id:"sites.domains.domainStatusInvalid",defaultMessage:"Invalid"}):"payment_required"===t?i?(0,$e().N9)(i,{available:()=>(0,T.jsx)(r().sA,{id:"sites.domains.domainStatusPaymentRequired",defaultMessage:"Payment required"}),unavailable:()=>(0,T.jsx)(r().sA,{id:"sites.domains.domainStatusPaymentRequired.freeTier",defaultMessage:"Unavailable"})}):null:"active"===t?(0,T.jsx)(r().sA,{id:"sites.domains.domainStatusLive",defaultMessage:"Live"}):"certificate_pending"===t||"notion_dcv_pending"===t?(0,T.jsx)(r().sA,{id:"sites.domains.domainStatusPending",defaultMessage:"Pending"}):void(0,A().HB)(t)}function Je(e){const{domainStatus:t,featureAvailability:i}=e,n=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",gap:4,width:"fit-content",paddingLeft:8,paddingRight:8,borderRadius:10,backgroundColor:ze(t,e,100)},dot:{borderRadius:99,height:8,width:8,backgroundColor:ze(t,e,500)}})),[t]);return(0,T.jsxs)("div",{style:n.container,children:[(0,T.jsx)("div",{style:n.dot}),(0,T.jsx)(Xe,{domainStatus:t,featureAvailability:i})]})}var et=()=>i(130102),tt=()=>i(898486),it=()=>i(134420);function nt(){const e=(0,s().K8)((()=>{const e=b().A.getState();if(e.isOpen)return e}),[]);if(!e)return null;const{spaceId:t,domain:i}=e;return(0,T.jsx)(st,{spaceId:t,domain:i})}function st(e){const{spaceId:t,domain:i}=e,a=(0,_().v3)(),o=(0,r().tz)(),d=(0,s().K8)((()=>i.getDomainName()),[i]),[l,c]=(0,n.useState)(d),[u,m]=(0,n.useState)(void 0),p=l!==d,f=(0,n.useCallback)((async()=>{if(l&&p){const{error:e}=await w().zV({environment:a,spaceId:t,domainId:i.id,domainName:l});if(e)return void m((0,tt().Hu)(o,e));w().yH("EditDomainNameSuccess",t,i)}}),[a,o,t,i,l,p]);return(0,T.jsx)(B().eh.Provider,{value:w().Uv,children:(0,T.jsx)(M().tf,{header:(0,T.jsx)(at,{}),footer:(0,T.jsx)(ot,{isDisabled:!p,onClick:f}),children:(0,T.jsx)(it().A,{domainName:l,setDomainName:c,domainType:"default",errorMessage:u})})})}function at(){return(0,T.jsx)(M().YA,{iconAndTitle:(0,T.jsx)(M().ZQ,{iconGroup:et().u,title:(0,T.jsx)(r().sA,{id:"sites.editDomain.title",defaultMessage:"Update existing domain"})}),description:(0,T.jsx)("div",{style:{paddingLeft:20,paddingRight:20},children:(0,T.jsx)(r().sA,{id:"sites.editDomain.subtitle",defaultMessage:"This change will apply to all the sites live on this domain"})})})}function ot(e){const{isDisabled:t,onClick:i}=e;return(0,T.jsx)(M().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,T.jsx)(r().sA,{id:"sites.editDomain.save",defaultMessage:"Save changes"}),isDisabled:t,onClick:i}],secondaryButtons:[{buttonType:"dismiss"}]})}var dt=()=>i(126818);function rt(){return(0,T.jsx)(B().eh.Provider,{value:w().Uv,children:(0,T.jsx)(M().tf,{header:(0,T.jsx)(lt,{}),footer:(0,T.jsx)(ct,{}),showDismissButton:!1})})}function lt(){return(0,T.jsx)(M().YA,{iconAndTitle:(0,T.jsx)(M().ZQ,{iconGroup:dt().g,title:(0,T.jsx)(r().sA,{id:"sites.editDomainSuccess.title",defaultMessage:"Successfully updated domain"})}),description:(0,T.jsx)(r().sA,{id:"sites.editDomainSuccess.subtitle",defaultMessage:"All sites published to this domain now use the new domain"})})}function ct(){return(0,T.jsx)(M().aO,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,T.jsx)(r().sA,{id:"sites.newDefaultDomainSuccess.close",defaultMessage:"Done"}),isDisabled:!1,onClick:w().Uv}]})}function ut(){const e=(0,s().K8)((()=>{const e=b().A.getState();if(e.isOpen)return e}),[]);if(!e)return null;const{step:t}=e,i="EditDomainNameSuccess"===t;return(0,T.jsx)(S().s,{isOpen:!0,onDismiss:w().Uv,areaConstraint:{width:{type:"fixed",length:i?300:450}},render:()=>i?(0,T.jsx)(rt,{}):(0,T.jsx)(nt,{}),animateSizeTransition:!i})}var mt=()=>i(212050),pt=()=>i(496603),ft=(i(898992),i(803949),()=>i(187174)),ht=()=>i(381138),gt=()=>i(623580),xt=()=>i(14235),yt=()=>i(305390),vt=()=>i(186445),jt=()=>i(578872),bt=()=>i(377586),Ct=()=>i(716979);const At=3;function St(e){const{domain:t,initialFocus:i,disabled:s,onSiteSelection:o,onResetInput:d}=e,[r,l]=(0,n.useState)(""),[c,u]=(0,n.useState)(!1),m=(0,a().IS)((()=>({resultsPopup:{width:250}})),[]),p=(0,n.useCallback)((e=>{o(e),u(!1)}),[o,u]),h=(0,n.useCallback)((()=>{u(!1)}),[u]),g=(0,n.useCallback)((()=>{c||d()}),[c,d]);return(0,T.jsx)(xt().Ay,{alignmentToOrigin:f().C.Start,origin:(0,T.jsx)(Dt,{initialFocus:i,disabled:s,query:r,setQuery:l,setShowResults:u,onBlurInput:g}),originGap:3,open:c,popupType:bt().n.Popup,style:m.resultsPopup,render:()=>(0,T.jsx)(wt,{query:r,onSelection:p,domain:t}),onDismiss:h,trapFocus:!1})}function Dt(e){const{initialFocus:t,disabled:i,query:s,setQuery:o,setShowResults:d,onBlurInput:c}=e,u=(0,r().tz)(),m=(0,a().IS)((e=>({input:{display:"flex",flex:1,paddingLeft:4},icon:{fill:e.mediumIconColor,width:12,height:12}})),[]),p=(0,n.useCallback)((e=>{o(e.target.value),d(!0)}),[o,d]),h=(0,n.useCallback)((()=>{d(!0)}),[d]),g=(0,n.useCallback)((e=>{"Escape"===e.key&&d(!1)}),[d]);return(0,T.jsx)(l().A,{disableTooltip:!i,renderTooltip:()=>(0,T.jsx)(r().sA,{id:"sites.siteSearchInput.noEditAccess",defaultMessage:"Only workspace owners can set up a homepage for a domain"}),placement:f().W.Bottom,render:e=>(0,T.jsx)("div",{...e,children:(0,T.jsx)(gt().A,{type:"text",focusInitial:t,disabled:i,onChange:p,onFocus:h,onBlur:c,onKeyDown:g,format:gt().C.Transparent,style:m.input,value:s,left:(0,ht().q)(m.icon),placeholder:u.formatMessage({id:"sites.siteSearchInput.placeholder",defaultMessage:"Select a page"})})})})}function wt(e){const{query:t,onSelection:i,domain:n}=e,o=(0,_().v3)(),l=(0,a().IS)((()=>({loadingSpinner:{textAlign:"center",visibility:"visible",display:"inline",marginLeft:8}})),[]),[{value:u,status:m}]=(0,ft().Yb)((()=>Ct().l2(t,o)),[t,o]),p=(0,s().K8)((()=>{const e=(0,vt().ZO)();if(!e)return[];if("idle"===m||"pending"===m)return[{key:"results-loading-spinner",render:()=>(0,T.jsx)(F().A,{style:l.loadingSpinner}),action:()=>{}}];if(!e||(!u||0===u.length)&&t.length>0)return[{key:"empty-results",render:()=>(0,T.jsx)(c().A,{isSmall:!0,style:{paddingLeft:8,paddingTop:4,paddingBottom:4},children:(0,T.jsx)(r().sA,{id:"sites.publicHomePageSearch.noResults",defaultMessage:"No sites found"})}),action:()=>{}}];const s=[];return null==u||u.forEach((t=>{const a=h().Bv.createChildStore(e,{table:d().ev,id:t.id}),o=jt().UP(a);(o&&o===n.id||!o&&n.is_default)&&s.push({key:t.id,render:e=>(0,T.jsx)(yt().A,{store:a,...e}),action:()=>{i(t.id)}})})),0===s.length?[It(n)]:""===t?s.splice(0,At):s}),[u,i,n,l,m,t]);return(0,T.jsx)(le().Ay,{type:le().Oh.Vertical,sections:[{key:"sites-search-results",render:e=>(0,T.jsx)(ue().A,{...e}),items:p}],initialFocus:void 0})}function It(e){const t=y().MN({domainName:e.getDomainName()||"",domainType:e.getDomainType()});return{key:"empty-suggestions",render:()=>(0,T.jsx)(c().A,{isSmall:!0,isMultiline:!0,style:{paddingLeft:8,paddingTop:4,paddingBottom:4},children:(0,T.jsx)(r().sA,{id:"sites.publicHomePageSearch.noResultsForDomain",defaultMessage:"Publish a page with {domainName} to set a homepage",values:{domainName:t}})}),action:()=>{}}}function Mt(e){const{spaceId:t,domain:i,publicHomePageStore:o,disabled:d}=e,r=(0,_().v3)(),[l,c]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1),p=(0,s().K8)((()=>{var e;return null===fe().default||void 0===fe().default||null===(e=fe().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),f=(0,x()._X)({name:"sites_multiple_public_domains",spaceId:t,userId:p}),h=null==f?void 0:f.upsell,y=(0,a().IS)((()=>({record:{paddingRight:12},previewContainer:{display:"flex",paddingRight:12},upsellButton:{width:"fit-content"}})),[]),v=(0,n.useCallback)((async e=>{e.stopPropagation(),await w().$j({environment:r,spaceId:t,domainId:i.id,publicHomePageId:void 0,showErrorDialog:!0})}),[r,t,i]),j=(0,n.useCallback)((async e=>{e&&await w().$j({environment:r,spaceId:t,domainId:i.id,publicHomePageId:e,showErrorDialog:!0}),c(!1)}),[r,t,i,c]);return h&&"product"===h.type?(0,T.jsx)(g().B,{upsell:h,analyticsName:"public_domain_home_page",desktopStyle:y.upsellButton}):d?o?(0,T.jsx)(Se().A,{store:o,style:y.record}):(0,T.jsx)(St,{domain:i,initialFocus:!1,disabled:!0,onSiteSelection:pt().lQ,onResetInput:pt().lQ}):o&&!l?(0,T.jsxs)("div",{style:y.previewContainer,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[(0,T.jsx)(Se().A,{store:o}),u&&(0,T.jsx)(Bt,{onUpdateClick:()=>c(!0),onClearClick:v})]}):(0,T.jsx)(St,{initialFocus:l,onResetInput:()=>c(!1),disabled:!1,onSiteSelection:j,domain:i})}function Bt(e){const{onUpdateClick:t,onClearClick:i}=e,n=(0,a().IS)((()=>({actionIcon:{marginLeft:4}})),[]),s=(0,r().tz)(),o=s.formatMessage({id:"sites.publicHomePage.update",defaultMessage:"Update the homepage for the domain"}),d=s.formatMessage({id:"sites.publicHomePage.clear",defaultMessage:"Clear the homepage for the domain"});return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(l().A,{renderTooltip:()=>o,placement:f().W.Bottom,render:e=>(0,T.jsx)(Oe().A,{...e,icon:Le().r,ariaLabel:o,onClick:t,style:n.actionIcon})}),(0,T.jsx)(l().A,{renderTooltip:()=>d,placement:f().W.Bottom,render:e=>(0,T.jsx)(Oe().A,{...e,icon:mt().u,ariaLabel:d,onClick:i,style:n.actionIcon})})]})}i(354520);var Tt=()=>i(449418),kt=()=>i(204063),Nt=()=>i(645873);const Pt=new(Nt().O2)("NewDomainModal",(async()=>await i.e(40642).then(i.bind(i,868730)))),_t=(0,Nt()._h)(Pt,(e=>e.NewDomainModal));var Ot=()=>i(741972),Rt=()=>i(204270);function Ht(e){const{spaceStore:t}=e,i=(0,_().v3)(),n=(0,s().K8)((()=>t.userId),[t]),o=(0,s().K8)((()=>Rt().A.getState().isOpen),[]),d=(0,s().K8)((()=>t.canAdmin()),[t]),c=(0,x().P9)({name:"sites_multiple_public_domains",spaceId:t.id,userId:n}),{defaultDomainsCount:u,customDomainsCount:m}=(0,s().K8)((()=>{const e=y().u8(t);return{defaultDomainsCount:e.filter((e=>"default"===e.domain_type)).length,customDomainsCount:e.filter((e=>"custom"===e.domain_type)).length}}),[t]),p=(0,Ot().V)(t),h=u>=p&&m>=Tt().nK,g=!d||!c||h,v=(0,a().IS)((()=>({newDomainButton:{paddingTop:5,paddingBottom:5,paddingLeft:12,paddingRight:12}})),[]),j=d?c?(0,T.jsx)(r().sA,{id:"sites.createDomain.maxDomainsCreated",defaultMessage:"Only {maximumDomains} domains allowed for this workspace",values:{maximumDomains:p+Tt().nK}}):(0,T.jsx)(r().sA,{id:"sites.createDomain.freeTier",defaultMessage:"Upgrade your plan to create more domains for your workspace"}):(0,T.jsx)(r().sA,{id:"sites.createDomain.noCreateAccess",defaultMessage:"Only workspace owners can create a domain"});return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(l().A,{disableTooltip:!g,renderTooltip:()=>j,placement:f().W.Bottom,render:e=>(0,T.jsx)(kt().A,{...e,onClick:()=>{w().qb("SelectDomainType"),(0,Ke().W2)(i)},disabled:g,style:v.newDomainButton,children:(0,T.jsx)(r().sA,{id:"sites.createDomain.new",defaultMessage:"New domain"})})}),o&&(0,T.jsx)(_t,{spaceStore:t})]})}var Lt=()=>i(244641),Vt=()=>i(408044);function Ut(){const e=(0,s().K8)((()=>C().A.getState()),[]),{isOpen:t,spaceId:i,domain:n}=e;return t?(0,T.jsx)(Kt,{spaceId:i,domain:n}):null}function Kt(e){const{spaceId:t,domain:i}=e,a=(0,_().v3)(),{domainId:o,domainName:d}=(0,s().K8)((()=>({domainId:i.id,domainName:i.getDomainName()})),[i]),[r,l]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(o&&r){const e=Lt().c9.now();w().hS({environment:a,domainId:o,spaceId:t,poll:!0}).then((t=>{t.error?l(!0):"active"===t.domainStatus?(w().Ko("DomainValidatedSuccess"),(0,Ke().Aw)(a,{type:"sync",duration_in_milliseconds:-e.diffNow().toMillis()})):(w().Ko("DomainPendingSuccess"),(0,Ke().Aw)(a,{type:"async",duration_in_milliseconds:-e.diffNow().toMillis()}))}))}}),[a,t,o,r]);const c=(0,n.useCallback)((()=>{o&&l(!0)}),[o,l]),u=(0,n.useCallback)((()=>{r&&(0,Ke().NS)(a),w()._p()}),[a,r]);return(0,T.jsx)(B().eh.Provider,{value:u,children:(0,T.jsx)(M().tf,{header:(0,T.jsx)(Wt,{}),footer:(0,T.jsx)(Gt,{onClick:c,validationInProgress:r}),children:(0,T.jsx)(Vt().A,{spaceId:t,domainId:o,domainName:d})})})}function Wt(){return(0,T.jsx)(M().YA,{iconAndTitle:(0,T.jsx)(M().ZQ,{iconGroup:R().n,title:(0,T.jsx)(r().sA,{id:"sites.newCustomDomain.title",defaultMessage:"Connect new domain"})}),description:(0,T.jsx)(r().sA,{id:"sites.newCustomDomainDnsSettings.subtitle",defaultMessage:"You can also find these instructions in our <helpCenterLink>help center</helpCenterLink>",values:{helpCenterLink:e=>(0,T.jsx)(L().A,{external:!0,href:"https://www.notion.so/help/connect-a-custom-domain-with-notion-sites",children:e})}})})}function Gt(e){const{onClick:t,validationInProgress:i}=e;return(0,T.jsx)(M().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:i?(0,T.jsx)(r().sA,{id:"sites.validateCustomDomain.verifying",defaultMessage:"Verifying..."}):(0,T.jsx)(r().sA,{id:"sites.validateCustomDomain.verify",defaultMessage:"Verify"}),isDisabled:i,onClick:t}]})}function qt(){return(0,T.jsx)(B().eh.Provider,{value:w()._p,children:(0,T.jsx)(M().tf,{header:(0,T.jsx)(Et,{}),footer:(0,T.jsx)(Ft,{}),showDismissButton:!1})})}function Et(){const e=(0,a().IS)((()=>({description:{width:"100%"}})),[]);return(0,T.jsx)(M().YA,{iconAndTitle:(0,T.jsx)(M().ZQ,{iconGroup:dt().g,title:(0,T.jsx)(r().sA,{id:"sites.customHostnameValdation.title",defaultMessage:"It's taking a while to verify"})}),description:(0,T.jsx)(r().sA,{id:"sites.customHostnameValdation.subtitle",defaultMessage:"Please check in ~10 mins to see if the domain is ready for publishing"}),descriptionStyle:e.description})}function Ft(){return(0,T.jsx)(M().aO,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,T.jsx)(r().sA,{id:"sites.newCustomDomainSuccess.close",defaultMessage:"Done"}),isDisabled:!1,onClick:w()._p}]})}function Yt(){return(0,T.jsx)(B().eh.Provider,{value:w()._p,children:(0,T.jsx)(M().tf,{header:(0,T.jsx)(Zt,{}),footer:(0,T.jsx)(Qt,{}),showDismissButton:!1})})}function Zt(){const e=(0,s().K8)((()=>{const{domain:e}=C().A.state;return null==e?void 0:e.getDomainName()}),[]),t=(0,a().IS)((()=>({description:{width:"100%"}})),[]);return(0,T.jsx)(M().YA,{iconAndTitle:(0,T.jsx)(M().ZQ,{iconGroup:dt().g,title:(0,T.jsx)(r().sA,{id:"sites.newCustomDomainValidatedSuccess.title",defaultMessage:"Successfully verified"})}),description:e?(0,T.jsx)(r().sA,{id:"sites.success.subtitle",defaultMessage:"You can now use {domainName} to publish sites",values:{domainName:y().MN({domainName:e,domainType:"custom"})}}):(0,T.jsx)(r().sA,{id:"sites.success.subtitle.subtitleWithoutDomainName",defaultMessage:"You can now use the domain to publish sites"}),descriptionStyle:t.description})}function Qt(){return(0,T.jsx)(M().aO,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,T.jsx)(r().sA,{id:"sites.newCustomDomainSuccess.close",defaultMessage:"Done"}),isDisabled:!1,onClick:w()._p}]})}function $t(){const e=(0,s().K8)((()=>C().A.getState()),[]);if(!e.isOpen)return null;const{step:t}=e,i="DomainValidating"!==t;return(0,T.jsx)(S().s,{isOpen:!0,onDismiss:w()._p,areaConstraint:{width:{type:"fixed",length:i?300:450}},render:()=>"DomainValidating"===t?(0,T.jsx)(Ut,{}):"DomainPendingSuccess"===t?(0,T.jsx)(qt,{}):"DomainValidatedSuccess"===t?(0,T.jsx)(Yt,{}):void(0,A().HB)(t),animateSizeTransition:!i})}const zt=[{key:"name",header:(0,T.jsx)(r().sA,{id:"sites.domains.domainColumnHeader",defaultMessage:"Domain"}),style:{width:"41%"}},{key:"home-page",header:(0,T.jsx)(r().sA,{id:"sites.domains.homePageColumnHeader",defaultMessage:"Homepage"}),style:{width:"35%",padding:"3px 5px"}},{key:"status",header:(0,T.jsx)(r().sA,{id:"sites.domains.statusColumnHeader",defaultMessage:"Status"}),style:{width:"20%"}},{key:"edit",header:(0,T.jsx)(T.Fragment,{}),style:{width:"4%"}}];function Xt(e){const{spaceStore:t}=e,i=(0,s().K8)((()=>t.userId),[t]),n=(0,x()._X)({name:"sites_multiple_public_domains",spaceId:t.id,userId:i}),A=null==n?void 0:n.upsell,S=(0,a().IS)((()=>({header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,gap:8,overflow:"hidden"},title:{display:"flex",flexDirection:"column",flex:"1 1",overflow:"hidden"},tableBox:{tableLayout:"fixed"},cell:{paddingRight:12,height:44}})),[]),D=function(e){const t=(0,s().K8)((()=>y().$o(e)),[e]),i=(0,a().IS)((e=>({domainNameContainer:{display:"flex",alignItems:"center",gap:4},defaultDomainIcon:{height:12,width:12,color:e.lightIconColor}})),[]),n=(0,s().K8)((()=>e.userId),[e]),c=(0,x()._X)({name:"sites_multiple_public_domains",spaceId:e.id,userId:n}),u=(0,s().K8)((()=>{const n=e.canAdmin();return t.map((t=>{const s=t.id,a=t.getDomainName(),u=t.getDomainStatus(),m=t.isDefault(),p=t.getPublicHomePage(),g=p?h().Bv.createChildStore(e,{table:d().ev,id:p}):void 0;return{key:a,columns:[(0,T.jsxs)("div",{style:i.domainNameContainer,children:[(0,T.jsx)(Qe().A,{spaceStore:e,domainId:t.id}),m?(0,T.jsx)(l().A,{renderTooltip:()=>(0,T.jsx)(r().sA,{id:"sites.domains.defaultDomainTooltip",defaultMessage:"Default domain"}),render:e=>(0,T.jsx)("div",{...e,children:(0,o().M)(i.defaultDomainIcon)}),placement:f().W.Bottom}):null]},`${s}`),(0,T.jsx)(Mt,{spaceId:e.id,domain:t,publicHomePageStore:g,disabled:!n},`${s}-home-page`),(0,T.jsx)(Je,{featureAvailability:c,domainStatus:u},`${s}-status`),(0,T.jsx)(Ze,{spaceId:e.id,domain:t,disabled:!n},`${s}-actions`)]}}))}),[e,t,i,c]);return u}(t),w=(0,s().K8)((()=>b().A.getState().isOpen),[]),I=(0,s().K8)((()=>C().A.getState().isOpen),[]),M=(0,s().K8)((()=>j().A.getState().isOpen),[]),B=(0,s().K8)((()=>v().A.getState().isOpen),[]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(m().A,{style:S.header,children:[(0,T.jsxs)("div",{style:S.title,children:[(0,T.jsx)(r().sA,{id:"sites.domains.title",defaultMessage:"Domains"}),A&&"product"===A.type?(0,T.jsxs)(u().Ye,{gap:8,style:{marginRight:32},children:[(0,T.jsx)(c().A,{isSmall:!0,isMultiline:!0,children:(0,T.jsx)(r().sA,{id:"sites.domains.captionForFreeTier",defaultMessage:"Pages published to the web will be live under the domain below. Get multiple domains"})}),(0,T.jsx)(g().B,{upsell:A,analyticsName:"get_multiple_domains"})]}):(0,T.jsx)(c().A,{isSmall:!0,children:(0,T.jsx)(r().sA,{id:"sites.domains.captionForPaidTier",defaultMessage:"Pages published to the web will be live on one of these domains"})})]}),(0,T.jsx)(Ht,{spaceStore:t})]}),(0,T.jsx)(p().A,{columns:zt,rows:D,tableStyle:S.tableBox,cellStyle:S.cell}),w&&(0,T.jsx)(ut,{}),I&&(0,T.jsx)($t,{}),M&&(0,T.jsx)(Ne,{}),B&&(0,T.jsx)(Q,{spaceStore:t})]})}},134420:(e,t,i)=>{i.d(t,{A:()=>h});var n=i(296540),s=()=>i(401497),a=()=>i(959013),o=()=>i(100622),d=()=>i(284371),r=()=>i(623580),l=()=>i(331542),c=()=>i(719147),u=()=>i(972435),m=()=>i(562800),p=i(474848);const f=(0,a().YK)({customDomainPlaceholder:{id:"sites.domainInput.placeholder.custom",defaultMessage:"www.yourdomain.com"},notionHostedDomainPlaceholder:{id:"sites.domainInput.placeholder.notionHosted",defaultMessage:"yourdomain"}});function h(e){const{domainName:t,domainType:i,setDomainName:a,isSubmitting:o,errorMessage:c}=e,h=(0,n.useRef)(null),[x,y]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1);(0,n.useEffect)((()=>{c&&y(!0)}),[c,y]);const b=(0,n.useCallback)((e=>{y(!1),a(e.target.value.toLowerCase())}),[a,y]),C=h.current?h.current.offsetWidth-4:4,A=(0,s().IS)((e=>({container:{flex:1,display:"flex",flexDirection:"column",fontSize:14,lineHeight:16,padding:2},inputAndConfigContainer:{position:"relative",alignItems:"center",background:e.inputBackground,borderRadius:4,boxShadow:x?`${e.stroke.uiRedSecondary} 0px 0px 0px 1px inset`:v?"0px 0px 0px 1px #2383E2 inset, 0px 0px 0px 2px rgba(35, 131, 226, 0.35)":`${e.regularDividerColor} 0px 0px 0px 1px inset`,height:34},inputContainer:{height:"100%",paddingLeft:4,background:"none",boxShadow:"none"},input:{paddingLeft:4,paddingRight:C,...d().RC},configDomainNameContainer:{position:"absolute",float:"right",top:0,right:0,height:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingLeft:2,paddingRight:2},configDomainName:{display:"flex",alignItems:"center",height:"100%",paddingTop:4,paddingBottom:4,paddingLeft:8,paddingRight:8,flexGrow:1,borderLeft:x?`1px solid ${e.stroke.uiRedSecondary}`:`1px solid ${e.regularDividerColor}`,...d().RC},spinnerStyle:{position:"absolute",top:"50%",right:8+C,transform:"translateY(-50%)"}})),[x,C,v]);return(0,p.jsxs)("div",{style:A.container,children:[(0,p.jsxs)("div",{style:A.inputAndConfigContainer,children:[(0,p.jsx)(r().A,{type:"text",style:A.inputContainer,inputStyle:A.input,value:t,disabled:o,placeholder:u().A.formatMessage("custom"===i?f.customDomainPlaceholder:f.notionHostedDomainPlaceholder),onChange:b,format:r().C.Transparent,onFocus:()=>j(!0),onBlur:()=>j(!1),right:o&&(0,p.jsx)(l().A,{style:A.spinnerStyle})}),(0,p.jsx)("div",{ref:h,style:A.configDomainNameContainer,children:"default"===i&&(0,p.jsx)("div",{style:A.configDomainName,children:m().l3()})})]}),x&&c&&(0,p.jsx)(g,{showLearnMore:"custom"===i,errorMessage:c})]})}function g(e){const{errorMessage:t,showLearnMore:i}=e,n=(0,s().IS)((()=>({container:{fontSize:12,lineHeight:1.33,minHeight:20,width:"100%",color:o().Ay.red,padding:2,marginTop:6}})),[]);return(0,p.jsxs)("span",{style:n.container,children:[t," ",i?(0,p.jsx)(c().A,{external:!0,href:"https://www.notion.so/help/connect-a-custom-domain-with-notion-sites#connect-a-custom-domain",children:(0,p.jsx)(a().sA,{defaultMessage:"Learn more",id:"sitesLaunchModal.learnMore"})}):null]})}},168799:(e,t,i)=>{i.d(t,{X:()=>s});i(296540);var n=i(474848);const s=(0,i(340498).wt)("arrowSquarePath",{viewBox:"0 0 30 22",svg:(0,n.jsx)("path",{d:"M0.773438 8.39062C0.578125 8.19531 0.484375 7.96875 0.492188 7.71094C0.5 7.45312 0.605469 7.22656 0.808594 7.03125L4.75781 3.09375C5.14062 2.71875 5.53516 2.53125 5.94141 2.53125C6.35547 2.53125 6.75391 2.71875 7.13672 3.09375L11.0859 7.03125C11.2891 7.22656 11.3906 7.45312 11.3906 7.71094C11.3984 7.96875 11.3047 8.19531 11.1094 8.39062C10.9062 8.59375 10.6797 8.69141 10.4297 8.68359C10.1797 8.66797 9.95312 8.5625 9.75 8.36719L8.625 7.25391L6.87891 5.39062V18.1172C6.87891 18.7266 7.03516 19.1875 7.34766 19.5C7.66797 19.8047 8.12109 19.957 8.70703 19.957H18.2109C18.5469 19.957 18.8047 20.0391 18.9844 20.2031C19.1641 20.3672 19.2539 20.6016 19.2539 20.9062C19.2617 21.2031 19.1719 21.4336 18.9844 21.5977C18.8047 21.7617 18.5469 21.8438 18.2109 21.8438H8.67188C7.45312 21.8438 6.53516 21.5391 5.91797 20.9297C5.30078 20.3281 4.99219 19.4219 4.99219 18.2109V5.41406L3.25781 7.25391L2.13281 8.36719C1.9375 8.5625 1.71094 8.66797 1.45312 8.68359C1.20312 8.69141 0.976562 8.59375 0.773438 8.39062ZM10.7461 1.20703C10.7383 0.910156 10.8281 0.679688 11.0156 0.515625C11.2031 0.351562 11.4609 0.269531 11.7891 0.269531H21.3281C22.5547 0.269531 23.4727 0.574219 24.082 1.18359C24.6992 1.78516 25.0078 2.69141 25.0078 3.90234V16.6992L26.7422 14.8477L27.8672 13.7461C28.0703 13.5508 28.2969 13.4492 28.5469 13.4414C28.7969 13.4258 29.0234 13.5156 29.2266 13.7109C29.4219 13.9141 29.5156 14.1445 29.5078 14.4023C29.5 14.6523 29.3945 14.8789 29.1914 15.082L25.2539 19.0078C24.8711 19.3906 24.4727 19.582 24.0586 19.582C23.6445 19.582 23.2461 19.3906 22.8633 19.0078L18.9141 15.082C18.7109 14.8789 18.6055 14.6523 18.5977 14.4023C18.5977 14.1445 18.6953 13.9141 18.8906 13.7109C19.0938 13.5156 19.3203 13.4258 19.5703 13.4414C19.8203 13.4492 20.0469 13.5508 20.25 13.7461L21.375 14.8477L23.1211 16.7227V3.99609C23.1211 3.38672 22.9648 2.92969 22.6523 2.625C22.3398 2.3125 21.8906 2.15625 21.3047 2.15625H11.7891C11.4609 2.15625 11.207 2.07422 11.0273 1.91016C10.8477 1.74609 10.7539 1.51172 10.7461 1.20703Z"})})},182242:(e,t,i)=>{i.d(t,{G:()=>c});i(296540);var n=()=>i(484714),s=()=>i(56366),a=()=>i(401497),o=()=>i(883234),d=()=>i(125565),r=()=>i(562800),l=i(474848);function c(e){const{domain:t,style:i}=e,{device:c}=(0,n().v3)(),[u,m]=(0,s().K8)((()=>[t?r().MN({domainName:t.getDomainName(),domainType:t.getDomainType()}):"",null==t?void 0:t.getDomainStatus()]),[t]),p=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",gap:6,maxWidth:c.isMobile?185:320},label:{color:"payment_required"===m?e.text.uiRedPrimary:void 0,flex:1},chevronIcon:{height:10,width:10,fill:"payment_required"===m?e.text.uiRedSecondary:e.icon.tertiary}})),[c,m]);return(0,l.jsxs)("div",{style:{...p.container,...i},children:[(0,l.jsx)(d().A,{style:p.label,children:u}),(0,o()._)(p.chevronIcon)]})}},204270:(e,t,i)=>{i.d(t,{A:()=>s});class n extends(()=>i(757695))().default{getInitialState(){return{isOpen:!1}}}const s=new n},310600:(e,t,i)=>{i.d(t,{M:()=>s});i(296540);var n=i(474848);const s=(0,i(340498).wt)("flag",{viewBox:"0 0 13 14",svg:(0,n.jsx)("path",{d:"M0.825195 13.8457C1.16699 13.8457 1.4541 13.5654 1.4541 13.2168V9.47754C1.63867 9.40918 2.21973 9.19727 3.10156 9.19727C5.59668 9.19727 7.25781 10.4414 9.66406 10.4414C10.7168 10.4414 11.1885 10.3115 11.7217 10.0654C12.207 9.84668 12.4941 9.4502 12.4941 8.82129V1.99219C12.4941 1.55469 12.1523 1.27441 11.6943 1.27441C11.3047 1.27441 10.6895 1.54102 9.58887 1.54102C7.20996 1.54102 5.52148 0.296875 3.0332 0.296875C1.99414 0.296875 1.5293 0.419922 0.975586 0.672852C0.49707 0.891602 0.196289 1.24707 0.196289 1.86914V13.2168C0.196289 13.5586 0.483398 13.8457 0.825195 13.8457ZM9.63672 9.16309C7.41504 9.16309 5.71289 7.92578 3.12207 7.92578C2.45215 7.92578 1.84375 8.00098 1.48145 8.14453V2.0332C1.59766 1.83496 2.11035 1.56836 3.05371 1.56836C5.38477 1.56836 7.09375 2.80566 9.56836 2.80566C10.2383 2.80566 10.792 2.73047 11.2158 2.61426V8.69824C11.0996 8.89648 10.5801 9.16309 9.63672 9.16309Z"})})},319283:(e,t,i)=>{i.d(t,{A:()=>s});class n extends(()=>i(757695))().default{getInitialState(){return{isOpen:!1}}}const s=new n},379725:(e,t,i)=>{i.d(t,{n:()=>n});const n=(0,i(340498).xh)("plug",{default:{loader:()=>i.e(38932).then(i.bind(i,338932))},small:{loader:()=>i.e(30930).then(i.bind(i,230930))},mini:{loader:()=>i.e(15514).then(i.bind(i,115514))},large:{loader:()=>i.e(37178).then(i.bind(i,137178))}})},408044:(e,t,i)=>{i.d(t,{A:()=>v});i(581454);var n=i(296540),s=()=>i(484714),a=()=>i(401497);var o=()=>i(212439),d=()=>i(72135),r=()=>i(959013),l=()=>i(284371),c=()=>i(449506),u=()=>i(884107),m=()=>i(285790),p=()=>i(623580),f=()=>i(125565),h=()=>i(780054),g=()=>i(375555),x=()=>i(963589),y=i(474848);function v(e){const{spaceId:t,domainName:i,domainId:o}=e,l=(0,r().tz)(),u=function(e){const{spaceId:t,domainId:i,domainName:a}=e,o=(0,x().X)("sites_apex_domain_aware_validation_info"),d=(0,s().v3)(),[r,l]=(0,n.useState)(void 0);return(0,n.useEffect)((()=>{o&&c().callApi({eventName:"getCustomPublicDomainValidationInfo",environment:d,data:{spaceId:t,domainId:i}}).then((e=>{"failed"!==e.type&&l(e.data)}))}),[o,d,t,i]),o?r:{cnameRecordShortName:a.split(".")[0],cnameTarget:function(e){if("local"===e.env){const t=e.publicDomainName.indexOf(":");return`external.${-1===t?e.publicDomainName:e.publicDomainName.substring(0,t)}`}return`external.${e.publicDomainName}`}(h().A),txtRecordShortName:a?function(e){return`_notion-dcv.${e}`}(a.split(".")[0]):"",txtRecordValue:i,isApexDomain:!1,ipAddressList:[]}}({spaceId:t,domainName:i,domainId:o}),m=(0,a().IS)((e=>({placeholder:{minHeight:400},instructionList:{display:"flex",flexDirection:"column",gap:24},instructionRow:{display:"flex",flexDirection:"row"},instructionNumber:{background:e.sitesInstructionStep,borderRadius:"100%",height:16,width:16,minWidth:16,display:"flex",justifyContent:"center",alignItems:"center",fontSize:10,marginTop:2},instructionContainer:{display:"flex",flexDirection:"column",rowGap:12,marginLeft:10,marginRight:6,minWidth:0,width:"100%",maxWidth:"100%"}})),[]);return u?(0,y.jsxs)("div",{style:m.instructionList,children:[(0,y.jsxs)("div",{style:m.instructionRow,children:[(0,y.jsx)("div",{style:m.instructionNumber,children:(0,d().ZV)(1,void 0,l)}),(0,y.jsx)("div",{style:m.instructionContainer,children:null!=u&&u.isApexDomain?(0,y.jsx)(b,{validationInfo:u}):(0,y.jsx)(j,{validationInfo:u})})]}),(0,y.jsxs)("div",{style:m.instructionRow,children:[(0,y.jsx)(f().A,{style:m.instructionNumber,children:(0,d().ZV)(2,void 0,l)}),(0,y.jsx)("div",{style:m.instructionContainer,children:(0,y.jsx)(C,{validationInfo:u})})]}),(0,y.jsxs)("div",{style:m.instructionRow,children:[(0,y.jsx)(f().A,{style:m.instructionNumber,children:(0,d().ZV)(3,void 0,l)}),(0,y.jsx)("div",{style:m.instructionContainer,children:(0,y.jsx)(f().A,{isMultiline:!0,children:(0,y.jsx)(r().sA,{id:"sites.newCustomDomainDnsSettings.notifyVerifyLiveDelay",defaultMessage:"Click â€˜Verifyâ€™ below to start the verification process"})})})]})]}):(0,y.jsx)("div",{style:m.placeholder})}function j(e){const{validationInfo:t}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f().A,{isMultiline:!0,children:(0,y.jsx)(r().sA,{id:"sites.newCustomDomainDnsSettings.setCnameInstructions",defaultMessage:"Go to your DNS provider and add a CNAME record for the domain. Set the values as:"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)(S,{}),(0,y.jsx)(A,{value:t.cnameRecordShortName})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(D,{}),(0,y.jsx)(A,{value:null==t?void 0:t.cnameTarget})]})]})}function b(e){const{validationInfo:t}=e,i=(0,a().IS)((()=>({aRecordContainer:{display:"flex",flexDirection:"column",rowGap:12,width:"100%",maxWidth:"100%"},aRecordRow:{display:"flex",flexDirection:"row",columnGap:8},aRecordNameField:{flexBasis:"40%"},aRecordValueField:{flexBasis:"60%"}})),[]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f().A,{isMultiline:!0,children:(0,y.jsx)(r().sA,{id:"sites.newCustomDomainDnsSettings.setARecordInstructions",defaultMessage:"Go to your DNS provider and add A records for the domain. Set the names and values as:"})}),(0,y.jsx)("div",{style:i.aRecordContainer,children:t.ipAddressList.map(((e,t)=>(0,y.jsx)("div",{children:(0,y.jsxs)("div",{style:i.aRecordRow,children:[(0,y.jsx)(A,{style:i.aRecordNameField,value:"@"}),(0,y.jsx)(A,{style:i.aRecordValueField,value:e})]})},t)))})]})}function C(e){const{validationInfo:t}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f().A,{isMultiline:!0,children:(0,y.jsx)(r().sA,{id:"sites.newCustomDomainDnsSettings.setTxtValueInstructions",defaultMessage:"Also add a TXT record for the domain:"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)(S,{}),(0,y.jsx)(A,{value:null==t?void 0:t.txtRecordShortName})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(D,{}),(0,y.jsx)(A,{value:null==t?void 0:t.txtRecordValue})]})]})}function A(e){const{style:t,value:i}=e,o=(0,n.useRef)(null),d=(0,s().v3)(),r=(0,a().IS)((e=>({input:{flexGrow:1,fontFamily:"monospace",paddingLeft:8,color:e.mediumTextColor,...l().RC},inputField:{...t,display:"flex",flexDirection:"row",alignItems:"center",border:`1px solid ${e.regularDividerColor}`,borderRadius:6,height:32,background:e.inputBackground,cursor:"text"}})),[t]);return(0,y.jsxs)("div",{style:r.inputField,children:[(0,y.jsx)(p().A,{ref:o,style:r.input,value:i,format:p().C.Transparent,onClick:()=>{o.current&&(0,g().G)(d,o.current)},inputElementAttributes:{spellCheck:!1,readOnly:!0}}),(0,y.jsx)(w,{content:i})]})}function S(){const e=(0,a().IS)((()=>({inputLabel:{paddingBottom:8,fontWeight:l().Wy.semibold}})),[]);return(0,y.jsx)(f().A,{isSmall:!0,style:e.inputLabel,children:(0,y.jsx)(r().sA,{id:"sites.newCustomDomainDnsSettings.setNameLabel",defaultMessage:"Name"})})}function D(){const e=(0,a().IS)((()=>({inputLabel:{paddingBottom:8,fontWeight:l().Wy.semibold}})),[]);return(0,y.jsx)(f().A,{isSmall:!0,style:e.inputLabel,children:(0,y.jsx)(r().sA,{id:"sites.newCustomDomainDnsSettings.setValueLabel",defaultMessage:"Value"})})}function w(e){const t=(0,r().tz)(),{content:i}=e,n=(0,s().v3)(),d=(0,a().IS)((e=>({copyButtonContainer:{height:"100%",width:32,boxShadow:void 0,borderRadius:"0px 6px 6px 0px",borderLeft:`1px solid ${e.regularDividerColor}`},copyButton:{height:14,width:14}})),[]);return(0,y.jsx)(m().A,{onClick:async()=>{if(i){const e=await u().R.clipboardActions.load();e.copyString({environment:n,stringValue:i,copiedMessage:e.clipboardMessages.copiedToClipboard})}},style:d.copyButtonContainer,ariaLabel:t.formatMessage({id:"sites.newCustomDomainDnsSettings.copyButton",defaultMessage:"Copy"}),hasBackground:!0,icon:o().V,iconStyle:d.copyButton,showShadow:!0})}},485771:(e,t,i)=>{i.d(t,{A:()=>f});i(898992),i(354520),i(581454);var n=i(296540),s=()=>i(484714),a=()=>i(56366),o=()=>i(762433),d=()=>i(323063),r=()=>i(643819),l=()=>i(449506),c=()=>i(779795),u=()=>i(981046),m=()=>i(753735),p=()=>i(562800);function f(e){const{spaceStore:t,billingData:i}=e,f=(0,s().v3)(),[h,g]=(0,n.useState)(),x=(0,m().uq)(i);(0,n.useEffect)((()=>{c().$W({environment:f,spaceId:t.id})}),[f,t]);const y=(0,a().K8)((()=>(0,d().z2)({prices:u().A.state.prices,billingData:i,product:"sites_custom_hostnames"})),[i]),v=(0,a().K8)((()=>1+p().u8(t).filter((e=>"custom"===e.domain_type&&"payment_required"!==e.domain_status)).length),[t]),j=(0,a().K8)((()=>{if(!y)return;const e=o().lQ(i);return(0,d().vH)(e,{price:y,quantity:v})}),[i,y,v]),b=(0,n.useMemo)((()=>{const e=j?j.items.map((e=>r().W.fromValue(e.price.unitAmount).withMultipliedAmount(e.quantity))):[];return r().W.sum(...e)}),[j]);return(0,n.useEffect)((()=>{!async function(){if(!y)return;if(x)return void g(b);const e=await l().callApi({eventName:"getImmediateUpdateCost",environment:f,data:{spaceId:t.id,desiredState:{items:(null==j?void 0:j.items.map((e=>({id:e.id,quantity:e.quantity,priceData:{external_id:e.price.externalId,product:e.price.product,billing_interval:e.price.billingInterval,currency:e.price.unitAmount.currencyCode,unit_amount:e.price.unitAmount.amount,state:e.price.state}}))))||[]},quantities:{numCustomHostnames:v}}});"success"===e.type&&g(r().W.fromValue(e.data.total))}()}),[f,b,j,x,y,t,v]),{price:y,checkoutState:j,isTrial:x,subtotal:h,recurringSubtotal:b}}},577173:(e,t,i)=>{i.d(t,{x3:()=>W,HH:()=>R,Uv:()=>_,Wq:()=>N,_p:()=>V,qs:()=>C,HM:()=>A,fN:()=>B,Xn:()=>U,dD:()=>O,yH:()=>P,qb:()=>k,Ej:()=>H,LP:()=>K,Ko:()=>L,cG:()=>S,k3:()=>T,zV:()=>b,$j:()=>w,$G:()=>D,hS:()=>M});var n=()=>i(763824),s=()=>i(449506),a=()=>i(901389),o=()=>i(351360),d=()=>i(57605),r=()=>i(508496),l=()=>i(151059),c=()=>i(589006),u=()=>i(319283),m=()=>i(734648),p=()=>i(204270),f=()=>i(91462),h=()=>i(716979),g=()=>i(762433),x=()=>i(762299),y=()=>i(128265),v=()=>i(224701);async function j(e,t){const i=o().default.state.currentSpaceStore;if(!i)return;const n=await d().A.awaitData(e,{spaceId:i.id},!0);if(!n)return;const s=n&&g().lQ(n);await v().iw({environment:e,context:{spaceId:i.id,planType:null==i?void 0:i.getPlanType(),isMmOrEnt:await(0,y().G)(e),from:"custom_hostname_delete"},oldData:t,newData:n,desiredState:s}),v().Ow(e),x().A.resetData(e,{spaceId:i.id})}async function b(e){const{environment:t,spaceId:i,domainId:n,domainName:a}=e,o=await s().callApi({eventName:"updatePublicDomainName",environment:t,data:{spaceId:i,domainId:n,domainName:a,isAutogenerated:!1}});return"success"!==o.type?{error:o}:(l().A.getData(t,{spaceId:i},!0),{domainId:n})}async function C(e){const{environment:t,spaceId:i,domainName:n,domainType:a}=e,o="custom"===a?await d().A.awaitData(t,{spaceId:i}):void 0,r=await s().callApi({eventName:"createPublicDomain",environment:t,data:{spaceId:i,domainName:n,domainType:a,isAutogenerated:!1,isDefault:!1}});return l().A.getData(t,{spaceId:i},!0),"success"!==r.type?{error:r}:(o&&r.data.subscriptionWasUpdated&&j(t,o),{...r.data,error:void 0})}async function A(e){const{environment:t,spaceId:i,domainId:n,domainType:o,showErrorDialog:r}=e,c="custom"===o?await d().A.awaitData(t,{spaceId:i}):void 0,u=await s().callApi({eventName:"deletePublicDomain",environment:t,data:{spaceId:i,domainId:n}});return l().A.getData(t,{spaceId:i},!0),"success"!==u.type?(r&&a().Qg(u),{error:u}):(c&&u.data.subscriptionWasUpdated&&j(t,c),{domainId:n})}async function S(e){const{environment:t,domainId:i,domainType:n}=e,r=o().default.state.currentSpaceStore;if(!r)return;const c="custom"===n?await d().A.awaitData(t,{spaceId:r.id}):void 0,u=await s().callApi({eventName:"unpublishSitesAndDeletePublicDomain",environment:t,data:{spaceId:r.id,domainId:i}});if("success"!==u.type)return a().Qg(u),{error:u};await h().rw(t,{spaceStore:r,currentUserId:t.currentUser.id}),l().A.getData(t,{spaceId:r.id},!0),c&&u.data.subscriptionWasUpdated&&j(t,c)}async function D(e){const{environment:t,oldDomainId:i,oldDomainType:n,newDomainId:r}=e,c=o().default.state.currentSpaceStore;if(!c)return;const u="custom"===n?await d().A.awaitData(t,{spaceId:c.id}):void 0,m=await s().callApi({eventName:"updateSitesAndDeletePublicDomain",environment:t,data:{spaceId:c.id,domainIdToBeDeleted:i,domainIdToBeUpdated:r}});if("success"!==m.type)return a().Qg(m),{error:m};await h().rw(t,{spaceStore:c,currentUserId:t.currentUser.id}),l().A.getData(t,{spaceId:c.id},!0),u&&m.data.subscriptionWasUpdated&&j(t,u)}async function w(e){const{environment:t,spaceId:i,domainId:n,publicHomePageId:o,showErrorDialog:d}=e,r=await s().callApi({eventName:"updatePublicDomainHomePage",environment:t,data:{spaceId:i,domainId:n,publicHomePage:o}});return"success"!==r.type?(d&&a().Qg(r),{error:r}):{domainId:n}}async function I(e){const{environment:t,spaceId:i,domainId:n}=e,a=await s().callApi({eventName:"validateCustomPublicDomain",environment:t,data:{spaceId:i,domainId:n}});return"success"!==a.type?{error:a}:(a.data.domainId&&a.data.hasChanged&&l().A.getData(t,{spaceId:i},!0),{domainId:n,domainStatus:a.data.domainStatus})}async function M(e){const{environment:t,domainId:i,spaceId:s,poll:a}=e,{retry_delay:o=500,max_retries:d=10}=r().default.getConfigKey("sites_settings","custom_hostname_validation")||{};let l,c=0;for(;!l||c<=d;){if(l=await I({environment:t,spaceId:s,domainId:i}),!a||"active"===l.domainStatus||l.error)return l;await n().wR(o),c+=1}return l}async function B(e){const{environment:t,spaceId:i,domainId:n}=e,o=await s().callApi({eventName:"getSitesOnPublicDomain",environment:t,data:{spaceId:i,domainId:n}});if("success"===o.type)return{sitesCount:o.data.publishedSitesCount,sites:o.data.publishedSitesWithAccess};a().Qg(o)}async function T(e){const{environment:t,spaceId:i,domainId:n}=e,o=await s().callApi({eventName:"updateCustomPublicDomainPayment",environment:t,data:{spaceId:i,domainId:n}});return"success"!==o.type?(a().Qg(o),{error:o}):(l().A.getData(t,{spaceId:i},!0),{...o.data,error:void 0})}function k(e){p().A.setState({isOpen:!0,step:e})}function N(){p().A.setState({isOpen:!1})}function P(e,t,i){m().A.setState({isOpen:!0,step:e,spaceId:t,domain:i})}function _(){m().A.setState({isOpen:!1})}function O(e,t,i,n,s){u().A.setState({isOpen:!0,step:e,spaceId:t,domain:i,publishedSitesCount:n,publishedSitesBlockIds:s})}function R(){u().A.setState({isOpen:!1})}function H(e,t){f().A.setState({isOpen:!0,spaceId:e,domain:t,step:"DomainValidating"})}function L(e){const{isOpen:t,spaceId:i,domain:n}=f().A.state;t&&f().A.setState({isOpen:t,spaceId:i,domain:n,step:e})}function V(){f().A.setState({isOpen:!1})}function U(e,t){c().A.setState({isOpen:!0,spaceId:e,domain:t,step:"ConfirmPayment"})}function K(e){const{isOpen:t,spaceId:i,domain:n}=c().A.state;t&&c().A.setState({isOpen:t,spaceId:i,domain:n,step:e})}function W(){c().A.setState({isOpen:!1})}},589006:(e,t,i)=>{i.d(t,{A:()=>s});class n extends(()=>i(757695))().default{getInitialState(){return{isOpen:!1}}}const s=new n},734648:(e,t,i)=>{i.d(t,{A:()=>s});class n extends(()=>i(757695))().default{getInitialState(){return{isOpen:!1}}}const s=new n},741972:(e,t,i)=>{i.d(t,{V:()=>a});var n=()=>i(56366),s=()=>i(979340);function a(e){return(0,n().K8)((()=>{const t=e.getSubscriptionTier();return s().ZC(t)}),[e])}},764333:(e,t,i)=>{i.d(t,{P:()=>s});i(296540);var n=i(474848);const s=(0,i(340498).wt)("home",{viewBox:"0 0 18 16",svg:(0,n.jsx)("path",{d:"M4.3584 15.9004H13.6074C14.6943 15.9004 15.3301 15.2646 15.3301 14.2188V7.93652L16.0752 8.55859C16.2598 8.71582 16.4717 8.83203 16.7041 8.83203C17.1484 8.83203 17.4834 8.55176 17.4834 8.11426C17.4834 7.86133 17.3809 7.64941 17.1826 7.47852L15.3301 5.92676V2.95996C15.3301 2.65234 15.1318 2.4541 14.8174 2.4541H13.751C13.4434 2.4541 13.2314 2.65234 13.2314 2.95996V4.16309L10.0664 1.50391C9.42383 0.957031 8.59668 0.957031 7.94727 1.50391L0.824219 7.48535C0.619141 7.64941 0.516602 7.88184 0.516602 8.10059C0.516602 8.50391 0.817383 8.83203 1.30273 8.83203C1.52832 8.83203 1.74023 8.71582 1.9248 8.55859L2.63574 7.9707V14.2188C2.63574 15.2715 3.27148 15.9004 4.3584 15.9004ZM10.9619 9.95996C10.9619 9.63867 10.75 9.42676 10.4287 9.42676H7.57129C7.25 9.42676 7.03809 9.63867 7.03809 9.95996V14.376H4.80273C4.38574 14.376 4.15332 14.1367 4.15332 13.7197V6.69238L8.67871 2.89844C8.88379 2.7207 9.12305 2.7207 9.33496 2.89844L13.8125 6.6582V13.7197C13.8125 14.1367 13.5801 14.376 13.1631 14.376H10.9619V9.95996Z"})})},916833:(e,t,i)=>{i.d(t,{z:()=>n});const n=(0,i(340498).xh)("arrowUpCircled",{default:{loader:()=>i.e(32296).then(i.bind(i,632296))},small:{loader:()=>i.e(25406).then(i.bind(i,825406))},mini:{loader:()=>i.e(50086).then(i.bind(i,850086))},large:{loader:()=>i.e(73718).then(i.bind(i,73718))}})},963176:(e,t,i)=>{i.d(t,{A:()=>S});var n=i(296540),s=()=>i(484714),a=()=>i(56366),o=()=>i(401497),d=()=>i(215087),r=()=>i(643819),l=()=>i(959013),c=()=>i(284371),u=()=>i(84817),m=()=>i(802790),p=()=>i(554509),f=()=>i(125565),h=()=>i(21140),g=()=>i(601203),x=()=>i(695974),y=()=>i(932065),v=()=>i(746789),j=()=>i(161165),b=()=>i(134217),C=()=>i(749240),A=i(474848);function S(e){const{billingData:t,price:i,checkoutState:n,subtotal:s,recurringSubtotal:d}=e,r=(0,a().O$)(C().subscriptionDataStoreInstance),l=(0,o().IS)((e=>({container:{width:406,gap:24},orderSummaryRow:{paddingTop:12,borderTop:`1px solid ${e.stroke.primary}`}})),[]);return(0,A.jsxs)(h().wt,{style:l.container,children:[(0,A.jsx)(h().Ye,{children:r&&(0,A.jsx)(x().E,{billingData:t})}),(0,A.jsx)("div",{style:l.orderSummaryRow,children:(0,A.jsx)(D,{subscriptionData:r,billingData:t,price:i,checkoutState:n,subtotal:s,recurringSubtotal:d})})]})}function D(e){const{subscriptionData:t,billingData:i,price:a,subtotal:h,recurringSubtotal:x,checkoutState:C}=e,{currencyCode:S}=a,[D,w]=(0,n.useState)(!1),[I,M]=(0,n.useState)(0),B=(0,s().v3)(),T=(0,o().IS)((e=>({detailsContainer:{maxHeight:140,overflow:"scroll",background:e.surface.wash,padding:12,paddingBottom:0,borderRadius:6},detailsLabel:{flexShrink:0,fontSize:12,lineHeight:1.25,fontWeight:c().Wy.semibold,paddingBottom:3},orderTotalContainer:{height:52}})),[]);(0,n.useEffect)((()=>{!async function(){x&&M(await g().qu({environment:B,billingData:i,taxableAmount:x,address:i.address})??0)}()}),[B,i,x]);const k=new(r().W)(d().r[S],0),N=new(r().W)(d().r[S],t?b().o2(t):0),P=new(r().W)(d().r[S],0),_=h?j().Bq({subtotal:h,discount:k,balance:N},P):void 0;return(0,A.jsxs)(u().Y1,{gap:8,children:[(0,A.jsx)("div",{style:T.orderTotalContainer,children:_&&(0,A.jsx)(y().BB,{total:_,handleToggleExpanded:()=>w(!D),isExpanded:D,discount:k,accountBalance:N,chargeType:"immediate",subtitle:(0,A.jsx)(p().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,A.jsx)(l().sA,{id:"checkout.orderSummary.taxApplicable",defaultMessage:"+ tax if applicable"})})})}),D&&(0,A.jsxs)(u().Y1,{gap:8,style:T.detailsContainer,children:[(0,A.jsx)(f().A,{style:T.detailsLabel,children:(0,A.jsx)(l().sA,{id:"sites.sitesAddOnCheckout.details.totalForNextPeriod",defaultMessage:"Next billing period"})}),(0,A.jsx)(y().f5,{items:C.items,showMonthlyPricing:!1}),(0,A.jsx)(m().A,{size:12}),(0,A.jsx)(v().Q,{subtotal:x||new(r().W)(d().r[S],0),tax:new(r().W)(d().r[S],I),discount:new(r().W)(d().r[S],0),accountBalance:new(r().W)(d().r[S],0)})]})]})}}}]);