"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[81141],{122724:(e,t,o)=>{o.d(t,{$w:()=>a,M7:()=>r,Qd:()=>n,g1:()=>i,iw:()=>l});let r=function(e){return e[e.SelectedPage=0]="SelectedPage",e[e.SearchPage=1]="SearchPage",e[e.NewPage=2]="NewPage",e}({});const i=4,l=32,n=400,a=20},241181:(e,t,o)=>{o.d(t,{p:()=>l});var r=o(296540),i=()=>o(56366);function l(e){let{collectionStore:t,layoutModule:o}=e;const l=(0,i().K8)((()=>Boolean(null==t?void 0:t.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0}))),[t]);return(0,r.useMemo)((()=>!(!o||!t)&&("properties"===o.type&&"pinned"!==o.variant&&l)),[t,l,o])}},246219:(e,t,o)=>{o.d(t,{PF:()=>n,Qd:()=>r().Qd,g1:()=>r().g1,iw:()=>r().iw});var r=()=>o(122724),i=()=>o(645873);const l=new(i().O2)("RelationPropertyMenu",(async()=>{const{default:e}=await Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(67435),o.e(47123),o.e(5887),o.e(70769),o.e(97965),o.e(9034),o.e(83210),o.e(26090),o.e(10596),o.e(99346),o.e(30016),o.e(29945)]).then(o.bind(o,155090));return{RelationPropertyMenu:e}})),n=(0,i()._h)(l,(e=>e.RelationPropertyMenu))},255824:(e,t,o)=>{o.d(t,{g:()=>l});var r=()=>o(56366),i=()=>o(449476);function l(){return(0,r().K8)((()=>i().A.state.isOpen),[])}},410730:(e,t,o)=>{o.d(t,{U:()=>r});const r=4},530041:(e,t,o)=>{o.d(t,{Ay:()=>w,Xt:()=>C});o(944114),o(898992),o(354520);var r=o(296540),i=()=>o(484714),l=()=>o(56366),n=()=>o(401497),a=()=>o(546806),s=()=>o(689094),d=()=>o(959013),p=()=>o(235191),c=()=>o(686526),u=()=>o(59400),y=()=>o(175116),g=()=>o(525432),m=()=>o(553965),h=()=>o(463830),f=()=>o(171018),b=()=>o(704152),v=()=>o(493823),P=()=>o(406699),S=()=>o(14235),x=()=>o(623186),k=o(474848);function w(e){const{locked:t,disabled:o,collectionStore:r,mergedProperties:i,schema:n,isCompact:a,pagePropertiesStore:s,wrapperStyle:d}=e,p=(0,l().K8)((()=>s.state.forceShowProperties),[s]),c=B(i,n,a),u=(0,x().aN)(r),y=[];return(p||0===c)&&(!t&&!o&&u)&&y.push((0,k.jsx)(C,{...e},"add-property")),c>0&&(p?y.push((0,k.jsx)(I,{mergedProperties:i,schema:n,isCompact:a,pagePropertiesStore:s},"hide-properties")):y.push((0,k.jsx)(j,{mergedProperties:i,schema:n,isCompact:a,pagePropertiesStore:s},"show-more"))),y.length>0&&d?(0,k.jsx)("div",{style:d,children:y}):(0,k.jsx)(k.Fragment,{children:y})}function C(e){const{collectionStore:t,isInPeekRenderer:o,pagePropertiesStore:n,propertyGroupId:a,onPropertyAdded:b,disabled:x,iconStyle:w}=e,C=(0,y().Ks)(),j=(0,i().v3)(),I=(0,l().uB)(void 0,h().A),M=A(),B=(0,l().K8)((()=>null==C?void 0:C.settingsStore.state.open),[null==C?void 0:C.settingsStore]);(0,r.useEffect)((()=>{B||I.setState({...I.state,open:!1})}),[I,B]);const V=(0,l().uB)(n,f().YB),R=(0,r.useCallback)((()=>{C&&p().H_({environment:j,propertyGroupId:a,collectionContextStore:C,pagePropertiesStore:V,collectionStore:t,isInPeekRenderer:o,onCloseMenu:e=>{null==b||b(e),I.setState({open:!1})},propertyVisibility:"show"})}),[j,a,C,V,t,o,b,I]),L=(0,l().K8)((()=>null==C?void 0:C.permissionScopesStore.state),[C]);return null!=L&&L.isExternallyImportedAndSyncedCollection||!C?null:(0,k.jsx)("div",{style:{display:"flex"},children:(0,k.jsx)(P().Ay,{popupType:j.device.isMobile?S().nl.SlideUp:S().nl.Popup,buttonPopupStore:I,originGap:1,alignmentToOrigin:P().yP.Start,render:()=>(0,k.jsx)(u().m$,{context:g().Bd.TopbarFilterPopup,collectionContextStore:C,collectionSettingsStore:C.settingsStore,hideDesktopHeader:!0}),onClick:R,onClose:()=>{const e=C.settingsStore;c().os({collectionSettingsStore:e})},renderOrigin:t=>(0,k.jsx)(v().p,{style:M.AddOrTogglePropertyButtonStyle,iconStyle:{...M.ActionPropertyButtonIconStyle,...w},icon:s().W,disabled:x,disabledFeedback:!0,...(0,m().A)(e,t),children:(0,k.jsx)(d().sA,{defaultMessage:"Add a property",id:"database.pageProperties.addPropertyButtonTitle"})})})})}function j(e){const{mergedProperties:t,schema:o,isCompact:i,pagePropertiesStore:l}=e,n=A(),s=B(t,o,i),p=(0,r.useCallback)((e=>{e.stopPropagation(),l.setState({...l.state,forceShowProperties:!0})}),[l]);return(0,k.jsx)("div",{style:{display:"flex"},children:(0,k.jsx)("div",{style:n.AddOrToggleContainerStyle,children:(0,k.jsxs)(b().A,{style:{...n.AddOrTogglePropertyButtonStyle,...e.style},onClick:p,children:[(0,a().e)(n.ActionPropertyButtonIconStyle),(0,k.jsx)("div",{style:n.AddPropertyButtonTitleStyle,children:(0,k.jsx)(d().sA,{defaultMessage:"{num, plural, one {1 more property} other {{num} more properties}}",id:"database.pageProperties.showMorePropertyTitle",values:{num:s}})})]},"show-more")})})}function I(e){const{mergedProperties:t,schema:o,isCompact:i,pagePropertiesStore:l}=e,n=B(t,o,i),s=A(),p=(0,r.useCallback)((e=>{e.stopPropagation(),l.setState({...l.state,forceShowProperties:!1})}),[l]);return(0,k.jsx)("div",{style:{display:"flex"},children:(0,k.jsxs)(b().A,{style:{...s.AddOrTogglePropertyButtonStyle,...e.style},onClick:p,children:[(0,a().e)({...s.ActionPropertyButtonIconStyle,transform:"rotate(180deg)"}),(0,k.jsx)("div",{style:s.AddPropertyButtonTitleStyle,children:(0,k.jsx)(d().sA,{defaultMessage:"{num, plural, one {Hide 1 property} other {Hide {num} properties}}",id:"database.pageProperties.hidePropertyTitle",values:{num:n}})})]},"hide-properties")})}const M=16;function A(){const e=(0,i().v3)();return(0,n().IS)((t=>{const{device:o}=e;return{AddOrToggleContainerStyle:{display:"grid"},AddOrTogglePropertyButtonStyle:{display:"flex",alignItems:"center",color:t.text.tertiary,fontSize:14,borderRadius:4,paddingLeft:6,paddingRight:6,height:34,width:o.isMobile?"100%":"auto",gridColumn:1,gridRow:1},ActionPropertyButtonIconStyle:{width:M,height:M,marginRight:6,marginTop:1,fill:t.icon.tertiary},AddPropertyButtonTitleStyle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,lineHeight:`${M}px`}}}),[e])}function B(e,t,o){return(0,r.useMemo)((()=>e.filter((e=>"hide"===e.visibility||"hide_if_empty"===e.visibility&&!e.hasValue)).length),[e])}},546806:(e,t,o)=>{o.d(t,{e:()=>i});o(296540);var r=o(474848);const i=(0,o(340498).wt)("chevronDownThin",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M8 11.4795C7.77214 11.4795 7.56478 11.3883 7.37793 11.2061L2.17578 5.88086C2.09831 5.80794 2.03906 5.72591 1.99805 5.63477C1.96159 5.53906 1.94336 5.43652 1.94336 5.32715C1.94336 5.17676 1.97754 5.04004 2.0459 4.91699C2.11882 4.79395 2.21452 4.69824 2.33301 4.62988C2.4515 4.55697 2.58594 4.52051 2.73633 4.52051C2.95508 4.52051 3.14648 4.60254 3.31055 4.7666L8.33496 9.91406H7.67188L12.6895 4.7666C12.8535 4.60254 13.0449 4.52051 13.2637 4.52051C13.4141 4.52051 13.5485 4.55697 13.667 4.62988C13.7855 4.69824 13.8789 4.79395 13.9473 4.91699C14.0202 5.04004 14.0566 5.17676 14.0566 5.32715C14.0566 5.54134 13.9792 5.72591 13.8242 5.88086L8.62207 11.2061C8.53548 11.2972 8.43978 11.3656 8.33496 11.4111C8.23014 11.4567 8.11849 11.4795 8 11.4795Z"})})},589647:(e,t,o)=>{o.d(t,{L:()=>n,d:()=>l});var r=()=>o(645873);const i={PinnedInfoPanelToggleButton:new(r().O2)("PinnedInfoPanelToggleButton",(async()=>o.e(7989).then(o.bind(o,279829)))),PageHeaderInfoPanelToggleButton:new(r().O2)("PageHeaderInfoPanelToggleButton",(async()=>o.e(20589).then(o.bind(o,579029))))},l=(0,r()._h)(i.PinnedInfoPanelToggleButton,(e=>e.default)),n=(0,r()._h)(i.PageHeaderInfoPanelToggleButton,(e=>e.default))},623186:(e,t,o)=>{o.d(t,{Od:()=>f,U$:()=>b,aN:()=>m,z7:()=>h});o(16280),o(898992),o(354520),o(672577),o(581454);var r=o(296540),i=()=>o(484714),l=()=>o(56366),n=()=>o(959013),a=()=>o(496603),s=()=>o(896628),d=()=>o(317909),p=()=>o(519839),c=()=>o(862292),u=()=>o(645873),y=()=>o(395963),g=()=>o(517223);function m(e){return(0,l().K8)((()=>!!e&&p().vo({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1})),[e])}function h(e){let{store:t,format:o,schema:r,collectionStore:a,propertyIds:s,propertyGroupId:d}=e;const p=(0,i().v3)(),y=(0,n().tz)(),{value:m}=(0,u().fJ)(c().T.formulas);return(0,l().K8)((()=>(0,g().e7)({store:t,format:o,schema:r,collectionStore:a,propertyIds:s,propertyGroupId:d,intl:y,environment:p,formulasModule:m})),[t,o,r,a,s,d,y,p,m])}function f(e){let{collectionStore:t,format:o}=e;const l=(0,i().v3)();return(0,r.useCallback)((e=>{const r=o.collection_page_properties||[],i=[...(0,a().oE)(e.map((e=>r.find((t=>t.property===e))))),...r.filter((t=>!e.includes(t.property)))];d().createAndCommit({userAction:"PageProperties.handleReorder",environment:l,canUndo:!0,perform:e=>{s().zA({stores:[t],update:{collection_page_properties:i},transaction:e})}})}),[t,l,o.collection_page_properties])}function b(e){let{collectionStore:t,propertyGroupId:o}=e;const l=(0,i().v3)();return(0,r.useCallback)((e=>{if(!o)throw new Error("cannot reorder properties for property group -- no property group id provided");d().createAndCommit({userAction:"PagePropertiesGroup.handleReorder",environment:l,canUndo:!0,perform:r=>{(0,y()._h)({collectionStore:t,newPartialPropertyIds:e,groupId:o,transaction:r})}})}),[t,l,o])}},720501:(e,t,o)=>{o.d(t,{j:()=>a});o(296540);var r=()=>o(56366),i=()=>o(401497),l=()=>o(284371),n=o(474848);function a(e){const{children:t,style:o}=e,{store:a}=e.icon?e:{},s=(0,r().K8)((()=>{var e;return"hide"!==(null==a||null===(e=a.getAssociatedCollectionStore())||void 0===e||null===(e=e.getLayoutStore())||void 0===e||null===(e=e.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[a]),d=(0,i().IS)((e=>({title:{padding:"3px 0",fontSize:13,lineHeight:"18px",color:e.text.secondary,display:"flex",flexDirection:"row",alignItems:"center",fontWeight:l().Wy.medium,gap:2,...o},icon:{width:18,height:24,fill:e.icon.secondary}})),[o]);return(0,n.jsxs)("div",{style:d.title,children:[e.icon&&s&&e.icon(d.icon),(0,n.jsx)("div",{children:t})]})}},781141:(e,t,o)=>{o.d(t,{h:()=>Ke});var r=o(296540),i=()=>o(56366),l=()=>o(959013),n=()=>o(155004),a=()=>o(21140),s=(o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454),()=>o(484714)),d=()=>o(401497),p=()=>o(410730),c=()=>o(124672),u=()=>o(797809),y=()=>o(496603),g=()=>o(534177),m=()=>o(720665),h=()=>o(555555),f=()=>o(657222),b=()=>o(498212),v=()=>o(884107),P=()=>o(864943),S=()=>o(780054),x=()=>o(376413),k=()=>o(12),w=o(474848);const C=(0,l().YK)({linkCopied:{defaultMessage:"Link copied. Share it with others who may find this useful.",id:"ai.gtmFavoriteActions.linkCopied"},share:{defaultMessage:"Share as AI favorite",id:"ai.gtmFavoriteActions.share"},add:{defaultMessage:"Add to AI favorites",id:"ai.gtmFavoriteActions.add"}});function j(e){const{blockId:t}=e,o=(0,s().v3)(),i=(0,l().tz)(),n=(0,r.useCallback)((()=>{(0,x().importGtmFavorite)({environment:o,importArgs:{name:"aiGtmFavoriteImport",blockId:t}})}),[t,o]),a=(0,r.useCallback)((async()=>{const e=`${S().A.domainBaseUrl}/ai-gtm/${(0,b().Xw)(t)}`;(await v().R.clipboardActions.load()).copyString({environment:o,stringValue:e,copiedMessage:C.linkCopied})}),[t,o]);return(0,w.jsxs)("div",{style:{marginTop:12,marginBottom:12},children:[(0,w.jsx)(P().A,{size:"lg",onClick:a,icon:f().w,children:i.formatMessage(C.share)}),o.currentUser.isLoggedIn()&&(0,w.jsx)(P().A,{size:"lg",onClick:n,style:{marginLeft:12},icon:h().n,children:i.formatMessage(C.add)})]})}var I=()=>o(454305),M=()=>o(997583),A=()=>o(548821),B=()=>o(59364),V=()=>o(623186),R=(o(944114),o(803949),()=>o(519839)),L=()=>o(439264),T=(o(672577),()=>o(908006)),O=()=>o(522986),G=()=>o(774733),K=()=>o(175116),W=()=>o(402838),z=()=>o(795963),N=()=>o(41459),E=()=>o(68350),D=()=>o(689094),F=()=>o(187533),_=()=>o(199896);function H(e){const{property:t,store:n,disabled:a,canConfigureCollection:p,onTab:c,onUntab:u,schema:y,blockPropertyValueOverlayStore:g,collectionStore:m,pagePropertiesStore:h,customization:f}=e,b=(0,s().v3)(),{device:v,currentUser:P}=b,S=(0,d().DP)(),x=(0,K().Ks)(),k=y[t],{value:C}=(0,o(645873).fJ)(o(862292).T.formulas),j=(0,d().IS)((()=>({propertyOuter:{display:"flex",alignItems:"left",height:"100%",flex:"auto",flexDirection:"column",minWidth:0,...null!=f&&f.stackPropertyLabelAndValue?{marginLeft:0}:{marginLeft:4}},property:{display:"flex",alignItems:"center",height:"100%",flex:"auto",minWidth:0,...null!=f&&f.stackPropertyLabelAndValue?{marginLeft:0}:{marginLeft:4}},addPageButton:{fontSize:14,minHeight:o(246219).iw,color:S.lightTextColor,background:void 0,boxShadow:void 0,borderBottom:"none"}})),[null==f?void 0:f.stackPropertyLabelAndValue,S.lightTextColor]),I=(0,r.useCallback)((()=>{h.setState({...h.state,hoveredProperty:e.property})}),[e.property,h]),M=(0,r.useCallback)((()=>{h.setState({...h.state,hoveredProperty:void 0})}),[h]),A=(0,r.useCallback)((()=>{O().ho({environment:b,blockPropertyValueOverlayStore:g,store:n,property:t,format:N().j.Page,collectionContextStore:x})}),[b,g,n,t,x]),B=(0,i().K8)((()=>v.isMobile&&!a&&"relation"===(null==k?void 0:k.type)&&n.isDefined()&&!o(713998).r8({block:n.getModel(),property:t,schema:y,getRecordModel:n.getRecordModel,userId:P.id,userTimeZone:(0,o(416504).P)(),intl:o(972435).A.getIntl(),experimentService:o(508496).default,collectionFeatureGates:(0,o(909470).i)(),formulasModule:C})),[P.id,v.isMobile,a,t,k,y,n,C]);return(0,w.jsx)("div",{role:"cell",style:j.propertyOuter,children:(0,w.jsxs)(_().A,{store:n,analyticsName:"page_property",children:[(0,w.jsx)("div",{style:j.property,onMouseMove:I,onMouseLeave:M,children:(0,w.jsx)(F().m,{store:n,property:t,locked:!p,disabled:a,format:N().j.Page,onTab:c,onUntab:u,tableWrap:!1,blockPropertyValueOverlayStore:g,onOpenProperty:A,collectionStore:m})},t),B&&(0,w.jsx)(o(760217).A,{focused:!1,icon:(0,D().W)({width:14,fill:S.lightIconColor}),buttonStyle:{marginRight:0,width:"calc(100% - 4px)"},mobileIconStyle:{marginLeft:12},textWrapperStyle:{marginLeft:4},style:j.addPageButton,title:(0,w.jsx)(l().sA,{id:"pagePropertyRowValue.addRelationButtonMessage",defaultMessage:"Add page"}),onClick:A})]})})}const U=r.memo(H),$=r.memo((function(e){const{schema:t,format:l,store:n,collectionStore:p,disabled:c,locked:u,blockPropertyValueOverlayStore:m,isInPeekRenderer:h,property:f,mergedProperties:b,hideDragHandle:v,disablePropertyName:P,opacity:S,pagePropertiesStore:x,customization:k,isCollectionViewLocked:C,canConfigureCollection:j,layoutModule:I}=e,M=(0,r.useId)(),A=(0,s().v3)(),B=(0,K().Ks)(),V=(0,r.useCallback)((()=>{const e=m.state;if(!e.isOpen)return;const o=b,r=o.findIndex((t=>t.property===e.property)),i=o.find(((e,o)=>o>r&&Y(t,e.property)))||o.find(((e,o)=>Y(t,e.property)));i&&T().default.afterNextFlush((()=>{O().ho({environment:A,blockPropertyValueOverlayStore:m,store:n,property:i.property,format:N().j.Page,collectionContextStore:B})})),O().VN({environment:A,blockPropertyValueOverlayStore:m})}),[m,B,A,b,t,n]),R=(0,r.useCallback)((()=>{const e=m.state;if(!e.isOpen)return;const o=b,r=o.findIndex((t=>t.property===e.property)),i=y().Uk(o,((e,o)=>o<r&&Y(t,e.property)))||y().Uk(o,((e,o)=>Y(t,e.property)));i&&T().default.afterNextFlush((()=>{O().ho({environment:A,blockPropertyValueOverlayStore:m,store:n,property:i.property,format:N().j.Page,collectionContextStore:B})})),O().VN({environment:A,blockPropertyValueOverlayStore:m})}),[m,B,A,b,t,n]),L=(0,o(671891).l)(n),D=(0,i().K8)((()=>{var e;return"hide"===(null==L||null===(e=L.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[L]),F=Boolean(null==k?void 0:k.stackPropertyLabelAndValue),_=r.useRef(null),H=(0,W().s)(_,50),[$,X]=r.useState(0);(0,r.useEffect)((()=>{var e;X((null==H?void 0:H.width)||(null===(e=_.current)||void 0===e?void 0:e.offsetWidth)||0)}),[H]);const{isPropertyInPageDetails:Z}=(0,o(517223)._1)({store:n,propertyId:f}),{isMobile:Q}=A.device,J=(0,z().Ge)({isMobile:Q,stackPropertyLabelAndValue:F,isPropertyInPageDetails:Z}),q=(0,d().IS)((e=>({container:{display:"flex",width:"100%",position:"relative",opacity:S??1,...null!=k&&k.stackPropertyLabelAndValue?{flexDirection:"column",marginBottom:null!=k&&k.disableRowBottomMargin?void 0:16}:{marginBottom:null!=k&&k.disableRowBottomMargin?void 0:4}},discussionIndicatorContainer:{position:"absolute",alignSelf:"center",...$?{left:$+4}:{right:0},top:6},flexRow:{...Z?{width:"100%"}:void 0,...(0,g().O9)(J)?{width:J,flexShrink:0}:void 0}})),[$,null==k?void 0:k.disableRowBottomMargin,null==k?void 0:k.stackPropertyLabelAndValue,Z,S,J]),ee=(0,o(255824).g)(),te="normalizedTitleWithIcon"===I.type&&"hide"===I.propertyLabels,oe=(0,r.useMemo)((()=>({height:{variant:null==k?void 0:k.heightVariant},width:(0,z().aG)({stackPropertyLabelAndValue:F}),size:"medium",fontWeight:"regular"})),[null==k?void 0:k.heightVariant,F]),re=u||C;return(0,w.jsxs)("div",{role:"row","aria-labelledby":M,ref:_,style:q.container,children:[(0,w.jsx)(o(964447).U$,{origin:_}),(0,w.jsxs)(a().Ye,{alignItems:"center",alignSelf:"flex-start",style:q.flexRow,children:[!te&&(0,w.jsx)(E().I,{schema:t,format:l,property:f,collectionStore:p,pagePropertiesStore:x,disabled:Boolean(c||P),locked:re,canConfigureCollection:j,isInPeekRenderer:h,hideIcon:D,hideDragHandle:v,showDragHandleAsIcon:!re&&!c,propertyNameAriaId:M,styleVariants:oe,blockStore:n,layoutModule:I}),!Q&&!ee&&(0,w.jsx)(G().L_,{store:n,propertyId:f,style:Z?void 0:{position:"absolute",alignSelf:"center",...$?{left:$+4}:{right:0},top:6}})]}),(0,w.jsx)(U,{schema:t,property:f,store:n,collectionStore:p,pagePropertiesStore:x,disabled:c||u,canConfigureCollection:j,onTab:V,onUntab:R,blockPropertyValueOverlayStore:m,customization:k}),Q&&(0,w.jsx)(G().L_,{store:n,propertyId:f,style:{marginTop:6}})]},f)}));function Y(e,t){return(0,o(886680).B2)(e[t])}function X(e){const{disabled:t,locked:o,collectionStore:n,format:a,mergedProperties:s,propertyGroupId:d,showHiddenProperties:p,hideDragHandle:c,pagePropertiesStore:u,rowCustomization:y,disableLastRowBottomPadding:g,blockPropertyValueOverlayStore:m,isInPeekRenderer:h,schema:f,store:b,layoutModule:v}=e,P=(0,l().tz)(),S=s,x=(0,V().aN)(n),k=(0,V().Od)({collectionStore:n,format:a}),C=(0,V().U$)({collectionStore:n,propertyGroupId:d}),j=d?C:k,I=P.formatMessage({id:"pageProperties.tableLabel",defaultMessage:"Page properties"}),M=function(e){const{properties:t,showHiddenProperties:o}=e;return(0,r.useMemo)((()=>{const e=[];let r=0;return t.forEach((t=>{if("section"!==t.visibility)return o?(e.splice(r,0,t.property),void(r+=1)):void("hide"!==t.visibility&&("hide_if_empty"!==t.visibility||t.hasValue)?(e.splice(r,0,t.property),r+=1):e.push(t.property));e.push(t.property)})),{all:e,visible:e.slice(0,r)}}),[t,o])}({properties:S,showHiddenProperties:p}).visible,A=(0,i().K8)((()=>(0,R().ln)(n)),[n]),B=(0,r.useMemo)((()=>({...y,...g&&{disableRowBottomMargin:!0}})),[g,y]);return t||o||!x||c?(0,w.jsx)("div",{role:"table","aria-label":I,style:L().Bb,children:M.map(((e,r)=>{const i=r===M.length-1?B:y;return(0,w.jsx)("div",{children:(0,w.jsx)($,{schema:f,format:a,store:b,collectionStore:n,disabled:t,locked:o,blockPropertyValueOverlayStore:m,isInPeekRenderer:h,property:e,mergedProperties:s,pagePropertiesStore:u,customization:i,isCollectionViewLocked:A,canConfigureCollection:x,layoutModule:v})},e)}))}):(0,w.jsx)(L().Ay,{role:"table","aria-label":I,direction:"vertical",keys:M,renderKey:(e,r)=>{const i=r===M.length-1?B:y;return(0,w.jsx)($,{schema:f,format:a,store:b,collectionStore:n,disabled:t,locked:o,blockPropertyValueOverlayStore:m,isInPeekRenderer:h,mergedProperties:s,hideDragHandle:c,customization:i,property:e,pagePropertiesStore:u,isCollectionViewLocked:A,canConfigureCollection:x,layoutModule:v})},onDrop:j})}var Z=()=>o(553965),Q=()=>o(554283),J=()=>o(589647),q=()=>o(937199),ee=()=>o(455994),te=()=>o(449476),oe=()=>o(962730),re=()=>o(463830),ie=()=>o(77246),le=()=>o(145214),ne=()=>o(704152),ae=()=>o(406699),se=()=>o(14235),de=()=>o(859428);const pe=408;var ce=()=>o(530041);const ue=130;function ye(e){const{store:t,collectionStore:o,pagePropertiesStore:l,blockPropertyValueOverlayStore:n,compactProperties:p,disabled:c,locked:u,format:y,hiddenProperties:g,rowLength:m,variant:h,pageViewBlockContext:f,layoutModule:b}=e,v=(0,i().K8)((()=>o.getSchema()),[o]),[P,S]=(0,r.useState)(!1),x=(0,V().aN)(o),k=(0,i().K8)((()=>ie().Uv.getMode(t)),[t]),C=(0,s().Y0)(),{isFirefox:j}=C,I=(0,i().uB)(void 0,re().A),M=(0,K().ET)(),B=(0,i().K8)((()=>o.getLayoutStore()),[o]),[R,L]=(0,r.useState)(!1),[T,O,z]=(0,Q().B)(),D=(0,W().s)(z,100),H=((null==D?void 0:D.width)||0)>=pe&&!C.isMobile,U=(0,i().K8)((()=>ee().A.getPanelState("mainPage").isOpen),[]),$=Boolean((0,r.useContext)(q().sf)),Y=(0,r.useMemo)((()=>!(!b||!("propertyLabels"in b)||"hide"!==b.propertyLabels)),[b]),X=(0,i().K8)((()=>{if($)return!1;const e=null==B?void 0:B.getModules();return!(!e||"pinned"!==h||0===e.page_details.length)}),[$,B,h]),Z=(0,i().K8)((()=>H&&U&&!O?"hidden":"visible"),[O,H,U]),oe=H,ne=(0,d().IS)((()=>{const e={display:"grid",gridTemplateColumns:`repeat(${p.length>m?m:"auto-fit"}, minmax(80px, max-content))`,columnGap:4,rowGap:4};return{container:{...X&&oe?{display:"flex",flexDirection:"row",gap:8}:void 0,...X&&!oe?{display:"flex",flexDirection:"column",gap:6}:void 0},row:{...Y?{display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:15}:"pinned"===h?{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, max-content))",columnGap:4,rowGap:8,marginTop:10}:e,...X?{maxWidth:"100%",...j&&{flexGrow:1}}:void 0},propertyRowWrapper:{..."pinned"===h?{display:"flex",flexDirection:"column"}:void 0},LastPagePropertyWrapper:{position:"relative"},LastPagePropertyInnerHoverPlusButton:{position:"absolute",left:"calc(100% + 10px)",top:"50%",transform:"translateY(-50%)"},infoPanelToggleButtonContainer:{display:"flex",alignItems:"end",flexShrink:0,visibility:Z}}}),[p.length,m,X,oe,Y,h,j,Z]),ae=(0,r.useCallback)((()=>{S(!0)}),[]),se=(0,r.useCallback)((()=>{S(!1)}),[]),de=(0,i().K8)((()=>te().A.state.isOpen),[]),ce=(0,i().K8)((()=>{var e;return"hide"===(null==B||null===(e=B.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[B]),ue=(0,r.useMemo)((()=>(0,w.jsx)(me,{layoutModule:b,onClose:se,hiddenProperties:g,canConfigureCollection:x&&"suggest"!==k,store:t,collectionStore:o,collectionContextStore:M,blockPropertyValueOverlayStore:n,disabled:c,locked:u,isInPeekRenderer:f===A().Rr.PeekView,format:y,buttonPopupStore:I,pagePropertiesStore:l,hideDragHandle:"pinned"===h})),[n,I,x,M,o,c,k,y,se,g,u,l,f,t,h,b]);return r.useEffect((()=>{L(!0)}),[]),(0,w.jsxs)("div",{style:ne.container,ref:T,children:[(0,w.jsx)("div",{style:ne.row,onMouseEnter:ae,onMouseLeave:se,children:0===p.length?ue:p.map(((r,i)=>{const s=i===p.length-1;return(0,w.jsxs)("div",{style:{...ne.propertyRowWrapper,...s?ne.LastPagePropertyWrapper:void 0},children:[!Y&&(0,w.jsxs)(a().Ye,{children:[(0,w.jsx)(E().I,{schema:v,format:y,hideDragHandle:!0,property:r.property,blockStore:t,collectionStore:o,pagePropertiesStore:l,disabled:c,locked:u,canConfigureCollection:x&&"suggest"!==k,isInPeekRenderer:f===A().Rr.PeekView,styleVariants:ge,hideDuplicatePropertyOption:Boolean(B),layoutModule:e.layoutModule,hideIcon:ce}),!de&&(0,w.jsx)(G().L_,{store:t,propertyId:r.property})]}),(0,w.jsx)(_().A,{store:t,analyticsName:"page_property",children:(0,w.jsx)(F().m,{store:t,collectionStore:o,blockPropertyValueOverlayStore:n,property:r.property,format:Y?N().j.Mini:N().j.CompactPage,disabled:c,locked:u,tableWrap:!1})}),s&&"pinned"!==h&&(0,w.jsx)(le().A,{visible:P||C.isMobile,initial:{opacity:0},animate:{opacity:1,marginLeft:"auto"},exit:{opacity:0},style:ne.LastPagePropertyInnerHoverPlusButton,children:ue})]},r.property)}))}),X&&(0,w.jsx)("div",{style:ne.infoPanelToggleButtonContainer,children:(0,w.jsx)(J().d,{collectionStore:o,variant:oe?"compact":"full",pageViewBlockContext:f})})]})}const ge={size:"small",fontWeight:"medium",width:{variant:"hug-content"},height:{variant:"small"}},me=r.memo((function(e){const{hiddenProperties:t,canConfigureCollection:n,collectionStore:a,isInPeekRenderer:p,buttonPopupStore:c,collectionContextStore:u,hideDragHandle:y,overflowButtonWrapperStyle:g,overflowButtonStyle:m,pagePropertiesStore:h,layoutModule:f}=e,b=(0,s().Y0)(),v=(0,s().v3)(),P=(0,i().K8)((()=>a.getSchema()),[a]),S=(0,d().IS)((e=>({overflowIcon:{width:16,height:16,fill:e.mediumIconColor},pagePropertiesOverflow:{width:"100%",fontSize:14,padding:y?"10px":"10px 10px 10px 28px",maxHeight:500,overflowY:"scroll"},overflowButtonWrapper:{display:"flex",alignItems:"center",paddingBottom:8,...g},overflowButton:{display:"flex",width:32,height:32,borderRadius:4,justifyContent:"center",alignItems:"center",...m}})),[y,g,m]),x=(0,r.useCallback)((()=>{o(235191).H_({environment:v,collectionContextStore:u,collectionStore:a,isInPeekRenderer:p,onCloseMenu:()=>{c.setState({open:!1})},pagePropertiesStore:h})}),[v,u,h,a,p,c]);return t.length?(0,w.jsx)(ae().Ay,{onClose:e.onClose,popupWrapStyle:{width:500},buttonPopupStore:c,popupType:b.isMobile?se().nl.SlideUp:se().nl.Popup,render:()=>(0,w.jsx)(o(805751).A,{debugName:"PagePropertiesCompact",capture:!0,children:(0,w.jsxs)("div",{style:S.pagePropertiesOverflow,children:[(0,w.jsx)(X,{showHiddenProperties:!0,schema:P,mergedProperties:t,format:e.format,store:e.store,collectionStore:e.collectionStore,disabled:e.disabled,locked:e.locked,blockPropertyValueOverlayStore:e.blockPropertyValueOverlayStore,isInPeekRenderer:e.isInPeekRenderer,hideDragHandle:y,pagePropertiesStore:h,layoutModule:f}),n&&(0,w.jsx)(ce().Xt,{collectionStore:a,pagePropertiesStore:h,isInPeekRenderer:p})]})}),renderOrigin:e=>(0,w.jsx)("div",{style:S.overflowButtonWrapper,children:(0,w.jsx)(de().A,{renderTooltip:()=>(0,w.jsx)(l().sA,{defaultMessage:"{num, plural, one {1 more property} other {{num} more properties}}",id:"database.pageProperties.compact.showMoreTooltip",values:{num:t.length}}),placement:oe().W.Bottom,render:t=>(0,w.jsx)(ne().A,{style:S.overflowButton,mobileFeedback:b.isMobile,...(0,Z().A)(e,t),children:(0,o(30626)._)(S.overflowIcon)})})})}):n?(0,w.jsx)("div",{style:S.overflowButtonWrapper,children:(0,w.jsx)(de().A,{renderTooltip:()=>(0,w.jsx)(l().sA,{defaultMessage:"Add a property",id:"database.pageProperties.compact.addPropertyButtonTitle"}),placement:oe().W.Bottom,render:t=>(0,w.jsx)(ae().Ay,{popupType:v.device.isMobile?se().nl.SlideUp:se().nl.Popup,onClose:e.onClose,buttonPopupStore:c,originGap:1,alignmentToOrigin:ae().yP.Start,render:()=>(0,w.jsx)(o(59400).m$,{context:o(525432).Bd.TopbarFilterPopup,collectionContextStore:u,collectionSettingsStore:u.settingsStore,hideDesktopHeader:!0}),onClick:x,onDismiss:()=>{const e=u.settingsStore;o(686526).os({collectionSettingsStore:e})},renderOrigin:e=>(0,w.jsx)(ne().A,{style:S.overflowButton,mobileFeedback:b.isMobile,...(0,Z().A)(e,t),children:(0,D().W)(S.overflowIcon)})})})}):null})),he=5;function fe(e){const{collectionStore:t,schema:o,store:l,format:n,propertyIds:a,propertyGroupId:h,variant:f,customization:b,pagePropertiesStore:v,pageViewBlockContext:P,blockPropertyValueOverlayStore:S,layoutModule:x,disabled:C,locked:R}=e,[L,T]=(0,M().z)(),O=(0,i().uB)(void 0,I().A),G=(0,s().Y0)(),K=(0,d().IS)((e=>({pageProperties:{width:"100%",fontSize:14},dragHandle:{marginLeft:-(B().Z+10),marginRight:6},hidePropertiesButton:{margin:"0 0 10px"},showMoreButton:{margin:0},addPropertyButton:{margin:"4px 0 0"},moreProperties:{border:`1px solid ${"dark"===e.mode?e.accentColors.gray[300]:e.accentColors.gray[75]}`,borderRadius:4,padding:"8px 6px"},actionButtonsWithTopMargin:{marginTop:8}})),[]),W=(0,r.useCallback)((()=>{O.setState({...O.state,mouseEntered:!0})}),[O]),z=(0,r.useCallback)((()=>{O.setState({...O.state,mouseEntered:!1})}),[O]),N=(0,i().K8)((()=>"pinned"===f||Boolean(l.isAssociatedCollectionAPageTree())),[l,f]),E=(0,i().K8)((()=>{var e;return null===(e=t.getLayoutStore())||void 0===e?void 0:e.getModules()}),[t]);let D=(0,V().z7)({store:l,format:n,schema:o,collectionStore:t,propertyIds:a,propertyGroupId:h});b&&(D=function(e,t,o,r,i){const{hideEmptyProperties:l,neverShowEmptyPropertiesIfMoreThanNProperties:n,neverShowNotionSystemProperties:a,sortNonEmptyPropertiesFirst:s,neverShowPropertiesElsewhereInLayout:d}=t;l&&(e=e.map((e=>({...e,visibility:e.hasValue?e.visibility:"hide"}))));if(d&&o){const t=(0,c().q)({modulesByArea:o,collectionSchema:r,collectionFormat:i}),l=new Set(t);e=e.filter((e=>!l.has(e.property)))}a&&(e=e.filter((e=>!((0,u().TV)(e.property)||"show"!==e.visibility&&e.property.startsWith("notion://")))));void 0!==n&&e.length>n&&(e=e.filter((e=>e.hasValue)));s&&(e=y().Ul(e,(e=>!e.hasValue)));return e}(D,b,E,o,n));const F=(0,i().K8)((()=>v.state.forceShowProperties),[v]),[_,H]=(0,r.useMemo)((()=>{if((0,m().pN)(f))return y().jB(D,(e=>{var t;return!!(null===(t=o[e.property])||void 0===t?void 0:t.type)&&function(e){if("section"===e.visibility)return!1;if("hide"===e.visibility)return!1;if("hide_if_empty"===e.visibility&&!e.hasValue)return!1;return!0}(e)}));if("pinned"===f){const e=Object.fromEntries(D.map((e=>[e.property,e])));if(!a)return[[],[]];const t=a.map((t=>{var r;const i=o[t];if(i)return{property:t,visibility:"show",hasValue:(null===(r=e[t])||void 0===r?void 0:r.hasValue)??!1,name:i.name}})).filter(g().O9);return[t.slice(0,p().U),t.slice(p().U)]}(0,g().HB)(f)}),[D,a,o,f]),U=function(e){const t=(0,i().K8)((()=>{const t=(0,k().XV)();return!!t&&t.spaceId===e.getSpaceId()&&t.collectionId===e.id}),[e]);return t}(t),$=(0,r.useMemo)((()=>N?_.concat(H):D),[N,_,H,D]),{paddingLeft:Y,paddingRight:Z}=e,Q=x&&"normalizedTitleWithIcon"===x.type&&"hide"===x.propertyLabels,J=Math.min(he,_.length)*ue,q=!Q&&("pinned"===f?G.isMobile||T>0&&T<pe:T>0&&T<J);let ee;if(null!=b&&b.emptyState&&0===_.length&&0===H.length)return b.emptyState;if(null!=b&&b.dontRenderIfNoPropertiesDefaultShown&&0===_.length)return null;if(N&&!q)ee=(0,w.jsx)(ye,{store:l,collectionStore:t,pagePropertiesStore:v,blockPropertyValueOverlayStore:S,compactProperties:_,hiddenProperties:H,disabled:e.disabled,locked:e.locked,format:n,rowLength:he,variant:f,layoutModule:x,pageViewBlockContext:P});else{const r={stackPropertyLabelAndValue:null==b?void 0:b.stackPropertyLabelAndValue,heightVariant:null!=b&&b.stackPropertyLabelAndValue||N&&!q?"small":"medium"},i=P===A().Rr.PeekView;ee=(0,w.jsxs)("div",{style:{...null!=b&&b.disableContainerPadding?{}:{paddingBottom:8},...q?{paddingTop:8}:{}},children:[(0,w.jsx)(X,{schema:o,format:n,store:l,disabled:C,locked:R,collectionStore:t,propertyGroupId:h,pagePropertiesStore:v,hideDragHandle:"pinned"===f,showHiddenProperties:F,mergedProperties:$,rowCustomization:r,disableLastRowBottomPadding:null==b?void 0:b.disableLastRowBottomPadding,isInPeekRenderer:i,layoutModule:x,blockPropertyValueOverlayStore:S}),"pinned"!==f&&(0,w.jsx)(ce().Ay,{collectionStore:t,propertyGroupId:h,schema:o,customization:r,disabled:e.disabled,locked:e.locked,pagePropertiesStore:v,isInPeekRenderer:i,mergedProperties:$,wrapperStyle:null!=b&&b.stackPropertyLabelAndValue?K.actionButtonsWithTopMargin:void 0})]})}return(0,w.jsx)("div",{style:K.pageProperties,onMouseEnter:W,onMouseLeave:z,ref:L,children:(0,w.jsxs)("div",{style:{width:"100%",maxWidth:"100%",padding:N||null!=b&&b.disableContainerPadding?void 0:"16px 0 8px 0",margin:"0 auto",...Y?{paddingLeft:Y}:{},...Z?{paddingRight:Z}:{}},children:[ee,U&&(0,w.jsx)(j,{blockId:l.id})]})})}var be=()=>o(478726),ve=()=>o(891078),Pe=()=>o(351360),Se=()=>o(205682),xe=()=>o(171018),ke=()=>o(77238),we=()=>o(712505),Ce=()=>o(241181),je=()=>o(720501),Ie=()=>o(346615),Me=()=>o(284371),Ae=()=>o(656219),Be=()=>o(817942);function Ve(e){const{store:t,context:o,disabled:l,wrapper:a,forceGroupsOpenOrClosed:s,customization:p,moduleId:c,layoutModule:u}=e,y=(0,i().K8)((()=>t.getAssociatedCollectionStore()),[t]),g=(0,i().K8)((()=>(null==y?void 0:y.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0}))||[]),[y]),m=(0,i().K8)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();if(!e)return{type:"hidden"};const o=(0,be().gV)(t);return o?{type:"visible",store:t,format:o,collectionStore:e}:{type:"hidden"}}),[t]),h=(0,d().IS)((e=>({container:{cursor:"default"}})),[]);if("hidden"===m.type)return null;return(a||(e=>(0,w.jsx)(Be().vV,{className:"layout-content",children:e})))((0,w.jsx)(Be().vV,{children:(0,w.jsx)(n().s,{allowSelectionWithin:!0,children:(0,w.jsxs)("div",{style:h.container,children:[g.map(((e,t)=>(0,r.createElement)(Re,{...m,key:e.id,context:o,disabled:l,propertyGroup:e,forceGroupOpenOrClosed:s,customization:p,isLast:t===g.length-1,moduleId:c,layoutModule:u}))),0===g.length&&(0,w.jsx)(Re,{...m,context:o,disabled:l,propertyGroup:"virtualPropertiesGroup",forceGroupOpenOrClosed:s,customization:p,isLast:!0,moduleId:c,layoutModule:u})]})})}))}function Re(e){const{store:t,context:o,disabled:n,propertyGroup:a,format:s,collectionStore:p,forceGroupOpenOrClosed:c,customization:u,isLast:y,moduleId:g,layoutModule:m}=e,h=(0,i().K8)((()=>"virtualPropertiesGroup"===a?{idForRememberingCollapsedState:`${g}_defaultGroup`,groupIdForSavingPropertyToGroup:void 0,title:(0,w.jsx)(l().sA,{id:"collapsiblePropertyGroups.defaultGroupTitle",defaultMessage:"Properties"})}:{idForRememberingCollapsedState:a.id,groupIdForSavingPropertyToGroup:a.id,title:a.title}),[g,a]),f=(0,i().K8)((()=>void 0!==c?"open"===c:Ae().A.isPropertyGroupExpanded({groupId:h.idForRememberingCollapsedState})),[c,h.idForRememberingCollapsedState]),b=o===A().Rr.PeekView,v=(0,i().K8)((()=>t.isNonEditableState()),[t]),P=(0,i().K8)((()=>p.getSchema()),[p]),S=(0,i().K8)((()=>{var e,o;return t.id===(null===(e=Pe().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id)?xe().Ep.getNewEditorPagePropertiesStore(h.idForRememberingCollapsedState):t.id===(null===(o=we().default.peekTargetStore.state)||void 0===o?void 0:o.id)?xe().A6.getNewEditorPagePropertiesStore(h.idForRememberingCollapsedState):new(xe().YB)}),[h.idForRememberingCollapsedState,t.id]),x=(0,r.useCallback)((()=>{Ae().A.togglePropertyGroupExpanded({groupId:h.idForRememberingCollapsedState})}),[h.idForRememberingCollapsedState]),k=(0,d().IS)((e=>({groupContent:{paddingLeft:0,paddingBottom:y?void 0:null!=u&&u.stackPropertyLabelAndValue?28:20},bottomButtonContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start"},propertyVisibilityButton:{borderRadius:4,height:34,paddingLeft:6,paddingRight:6,width:"auto",display:"flex",alignItems:"center",justifyContent:"center"},propertyVisibilityButtonMessage:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,fontSize:"14px",color:e.lightTextColor}})),[null==u?void 0:u.stackPropertyLabelAndValue,y]);return(0,w.jsxs)("div",{children:[(0,w.jsx)(Le,{onClick:x,isExpanded:f,customization:u,children:h.title}),f&&(0,w.jsx)("div",{style:k.groupContent,children:(0,w.jsx)(fe,{propertyGroupId:h.groupIdForSavingPropertyToGroup,pagePropertiesStore:S,schema:P,format:s,store:t,collectionStore:p,disabled:n,locked:v,blockPropertyValueOverlayStore:b?ke().A:Se().A,pageViewBlockContext:o,customization:{...u,neverShowPropertiesElsewhereInLayout:!0},layoutModule:m})})]})}function Le(e){const{children:t,isExpanded:o,customization:r,onClick:i}=e,n=(0,l().tz)(),a=(0,s().Y0)(),p=Boolean(null==r?void 0:r.stackPropertyLabelAndValue);let c;c=o&&p?a.isTablet?0:a.isMobile?2:8:0;const u=(0,d().IS)((e=>({container:{height:34,display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:6,paddingRight:6,gap:6,marginBottom:c,borderRadius:6},label:{fontSize:13,color:e.text.secondary,fontWeight:Me().Wy.medium,...Me().RC,height:20},button:{borderRadius:"100%"},icon:{transition:"transform .2s ease",width:12,height:12,transform:o?"rotate(0deg)":"rotate(-90deg)",fill:e.icon.tertiary},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"}})),[c,o]),y=(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{style:u.label,children:t}),(0,w.jsx)("div",{style:u.iconContainer,children:(0,Ie().p)(u.icon)})]});return o?(0,w.jsx)(ne().A,{onClick:i,style:u.container,children:y}):(0,w.jsx)(ne().A,{style:u.container,onClick:i,ariaLabel:n.formatMessage(Te.showProperties),children:y})}const Te=(0,l().YK)({hideProperties:{id:"CollapsiblePropertyGroups.hideProperties",defaultMessage:"Hide properties in section"},showProperties:{id:"CollapsiblePropertyGroups.showProperties",defaultMessage:"Show properties in section"}});function Oe(e){const{store:t,format:o,collectionStore:r,disabled:l,blockPropertyValueOverlayStore:n,variant:a,propertyIds:s,customization:d,pagePropertiesStore:p,pageViewBlockContext:c,layoutModule:u}=e,y=(0,i().K8)((()=>r.getSchema()),[r]),g=(0,i().K8)((()=>t.isNonEditableState()),[t]);return(0,w.jsx)(fe,{store:t,collectionStore:r,schema:y,format:o,disabled:l,locked:g,blockPropertyValueOverlayStore:n,pageViewBlockContext:c,propertyIds:s,variant:a,customization:d,pagePropertiesStore:p,layoutModule:u})}const Ge={id:"properties",type:"properties"};function Ke(e){const{store:t,context:o,disabled:r,variant:s,layoutModule:d=Ge,propertyIds:p,customization:c,wrapper:u,showDefaultTitle:y}=e,g=(0,ve().bx)(t,r),m=(0,i().K8)((()=>ie().Uv.getMode(t)),[t]),{isMainEditor:h,isPeekEditor:f}=(0,i().K8)((()=>{var e,o;const r=Boolean(we().default.isSidePeekOpen()&&t.id===(null===(e=we().default.peekTargetStore.state)||void 0===e?void 0:e.id));return{isMainEditor:Boolean(!r&&t.id===(null===(o=Pe().default.state.mainEditorCurrentBlockStore)||void 0===o?void 0:o.id)),isPeekEditor:r}}),[t]),b=(0,i().K8)((()=>t.getAssociatedCollectionStore()),[t]),v=(0,i().K8)((()=>{if(!b)return{type:"hidden"};if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=(0,be().gV)(t);return e?{type:"visible",store:t,format:e,collectionStore:b}:{type:"hidden"}}),[b,t]),P=(0,Ce().p)({collectionStore:b,layoutModule:d}),S=(0,i().K8)((()=>P&&d&&!(null!=c&&c.doNotShowPropertyGroups)),[null==c?void 0:c.doNotShowPropertyGroups,P,d]),x=(0,i().K8)((()=>h?xe().Ep.getNewEditorPagePropertiesStore():f?xe().A6.getNewEditorPagePropertiesStore():new(xe().YB)),[h,f]);if("hidden"===v.type)return null;const k=o===A().Rr.PeekView,C=S&&d?(0,w.jsx)(Ve,{...e,layoutModule:d,wrapper:void 0,moduleId:d.id}):(0,w.jsxs)(a().wt,{gap:8,children:[y&&(0,w.jsx)(je().j,{style:{marginLeft:6},children:(0,w.jsx)(l().sA,{id:"pageLayout.propertiesModule.title",defaultMessage:"Properties"})}),(0,w.jsx)(n().s,{allowSelectionWithin:!0,children:(0,w.jsx)(Oe,{...v,disabled:!g||"suggest"===m,pageViewBlockContext:o,blockPropertyValueOverlayStore:k?ke().A:Se().A,propertyIds:p,variant:s,layoutModule:d,customization:c,pagePropertiesStore:x})})]});return u((0,w.jsx)(w.Fragment,{children:C}))}},817942:(e,t,o)=>{o.d(t,{A5:()=>f,MR:()=>j,Mx:()=>u,Pb:()=>P,WL:()=>C,Yi:()=>w,hg:()=>y,kZ:()=>S,pv:()=>g,vV:()=>v});o(581454);var r=o.n(o(32485)),i=o(296540),l=()=>o(819121),n=()=>o(401497),a=()=>o(534177),s=()=>o(11048),d=()=>o(364280),p=()=>o(455994),c=o(474848);const u=i.forwardRef((function(e,t){const{children:i,type:l,gap:n,withBottomPadding:a,style:s,onMouseDown:d,onClick:u,onDoubleClick:y,onContextMenu:g}=e,m=(0,o(551619).n$)(l),h=(0,o(56366).K8)((()=>p().A.getPanelState("peek").isOpen&&"static_sidebar"===p().A.getPanelState("peek").displayStyle),[]);return(0,c.jsx)("div",{className:r()("layout",{"layout-wide":"wide"===l,"layout-wide-right-margin-expanded":"wide-right-margin-expanded"===l,"layout-side-peek":"side-peek"===l,"layout-center-peek":"center-peek"===l&&!h,"layout-center-peek-with-layout-panel":"center-peek"===l&&h,"layout-home":"home"===l,"layout-home-phone":"home-phone"===l,"layout-home-redesign-desktop":"home-redesign-desktop"===l,"layout-form":"form"===l,"layout-form-viewer":"form-viewer"===l,"layout-form-viewer-embed":"form-viewer-embed"===l,"layout-phone":"phone"===l,"layout-tablet":"tablet"===l,"layout-template-preview":"template-preview"===l,"layout-chat":"chat"===l,"layout-layout-editor":"layout-editor"===l,"layout-layout-editor-wide":"layout-editor-wide"===l,"layout-layout-editor-narrow":"layout-editor-narrow"===l,"layout-marketplace":"marketplace"===l,"layout-marketplace-mobile":"marketplace-mobile"===l,"layout-team-home":"team-home"===l,"layout-team-home-mobile":"team-home-mobile"===l,"layout-create-post":"create-post"===l,"layout-fullscreen-ai":"fullscreen-ai"===l,"layout-narrowscreen-ai":"narrowscreen-ai"===l,"layout-presentation-mode":"presentation-mode"===l}),style:{paddingBottom:a?m:void 0,gap:n,...s},ref:t,onMouseDown:d,onClick:u,onDoubleClick:y,onContextMenu:g,children:i})})),y="layout-content",g="layout-full",m="layout-margin-right",h="layout-nested-grid",f="hide-scrollbar",b="layout-column",v=i.forwardRef((function(e,t){return(0,c.jsx)("div",{className:r()(y,e.className),style:e.style,ref:t,children:e.children})}));function P(e){return(0,c.jsx)("div",{className:g,style:e.style,children:e.children})}function S(e){return(0,c.jsx)("div",{className:m,style:{...e.style,pointerEvents:"none"},children:e.children})}const x=(0,i.forwardRef)((function(e,t){return(0,c.jsx)("div",{className:r()(h,e.className),onClick:e.onClick,style:e.style,role:e.role,id:e.id,"aria-labelledby":e["aria-labelledby"],ref:t,children:e.children})}));function k(e){return"left-aligned"===e?"flex-start":"centered"===e?"center":"right-tabs"===e?"flex-end":void(0,a().HB)(e)}function w(e){const{items:t,style:o,index:r,setIndex:a,title:p}=e,u=(0,i.useRef)([]),y="centered"===o||"right-tabs"===o,[g,m]=(0,l().A)(),h=(0,n().IS)((e=>({icon:{width:16,height:16,fill:"currentColor"},label:{fontSize:14,fontWeight:600},header:"right-tabs"===o?{display:"flex",justifyContent:"space-between",alignItems:"baseline"}:{},tablist:"right-tabs"===o?{display:"flex"}:{},tab:y?{cursor:"pointer",border:"none",padding:"6px 12px",borderRadius:20,color:e.text.secondary,background:"none"}:{cursor:"pointer",border:"none",borderBottom:"2px solid",borderColor:"transparent",padding:"6px 8px 12px",color:e.text.secondary,background:"none"},tabSelected:y?{color:e.text.primary,background:e.tint.regular}:{color:e.text.primary,borderColor:e.regularTextColor},tabFocusVisible:{boxShadow:e.outlineBlueInputBoxShadow}})),[y,o]),f=(0,i.useId)(),b=(0,i.useCallback)((e=>`${f}-tab-${e}`),[f]),P=(0,i.useCallback)((e=>`${f}-tabpanel-${e}`),[f]),S=(0,i.useCallback)((e=>{let o;var i;("ArrowLeft"===e.key?(e.preventDefault(),o=(r+t.length-1)%t.length):"ArrowRight"===e.key&&(e.preventDefault(),o=(r+1)%t.length),void 0!==o)&&(a(o),null===(i=u.current[o])||void 0===i||i.focus())}),[r,a,t.length]);return(0,c.jsx)(s().A,{name:"PageLayoutTabs",children:(0,c.jsxs)(x,{children:[(0,c.jsx)(v,{children:(0,c.jsxs)("div",{style:h.header,children:["right-tabs"===o&&p,(0,c.jsx)("div",{role:"tablist",style:h.tablist,children:(0,c.jsx)(d().fI,{justifyContent:k(o),children:t.map(((e,t)=>{var o;return(0,c.jsx)("button",{ref:e=>{e&&(u.current[t]=e),t===r&&g(e)},id:b(t),role:"tab","aria-controls":P(t),"aria-selected":t===r,tabIndex:t===r?void 0:-1,onKeyDown:S,style:{...h.tab,...t===r&&h.tabSelected,...t===r&&m&&h.tabFocusVisible},onClick:e=>{e.stopPropagation(),a(t)},children:(0,c.jsxs)(d().fI,{gap:4,alignItems:"center",children:[null===(o=e.icon)||void 0===o?void 0:o.call(e,h.icon),e.label&&(0,c.jsx)("div",{style:h.label,children:e.label})]})},e.key)}))})})]})}),(0,c.jsx)(x,{id:P(r),role:"tabpanel","aria-labelledby":b(r),children:t[r]?t[r].children:null})]})})}function C(e){return(0,c.jsx)("div",{className:r()(b,e.className),style:{"--min-column-width":e.minWidth?`${e.minWidth}px`:"100%",...e.style},children:e.children})}function j(e){return(0,c.jsxs)(C,{minWidth:e.minWidth,className:e.className,style:e.style,children:[e.left,e.right]})}}}]);