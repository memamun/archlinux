"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[52012],{10323:(e,t,o)=>{o.d(t,{A:()=>tt});var n=o(296540),r=()=>o(56366),i=()=>o(484714),l=()=>o(401497),s=()=>o(959013),a=()=>o(284371),c=()=>o(989423);function u(e,t){c().vd(e,"complete_sprint_action",t)}var d=()=>o(73223),p=()=>o(476492),m=()=>o(739135),S=()=>o(351360),g=()=>o(244091),x=(o(898992),o(354520),o(581454),()=>o(725252)),f=()=>o(757695),h=()=>o(584262),y=()=>o(66689),v=()=>o(784892),C=()=>o(597777),b=()=>o(869190),j=()=>o(831310),A=()=>o(668725),k=()=>o(212050),_=()=>o(689094),M=()=>o(643381),w=()=>o(696706),T=()=>o(179034),I=()=>o(864779),B=()=>o(919709),R=()=>o(100622),F=()=>o(496603),D=()=>o(534177),P=()=>o(720665),L=()=>o(857783),K=()=>o(42120),O=()=>o(813297),V=()=>o(862292),N=()=>o(722872),U=()=>o(71304),z=()=>o(685889),H=()=>o(645873),E=()=>o(764218),W=()=>o(630116),Y=()=>o(187533),J=()=>o(41459),$=()=>o(493823),q=()=>o(760217),X=()=>o(406699),G=()=>o(285790),Q=()=>o(710149),Z=()=>o(928600),ee=()=>o(939740),te=()=>o(45552),oe=()=>o(204063),ne=()=>o(614505),re=()=>o(16006),ie=()=>o(89924),le=()=>o(427711),se=()=>o(641514),ae=()=>o(719147),ce=()=>o(881690),ue=o(474848);const de=(0,s().YK)({completedPercentSummary:{id:"completeAutomationSprintModal.sprintSummary.completedPercentSummary",defaultMessage:"{completedTaskCount} / {totalTaskCount} total tasks"},selectNextSprintLabel:{id:"completeAutomationSprintModal.sprintSummary.selectNextSprintLabel",defaultMessage:"Next sprint"},selectDatesForNextSprintLabel:{id:"completeAutomationSprintModal.sprintSummary.selectDatesForNextSprintLabel",defaultMessage:"Start and end dates"},nextSprintDatesLabel:{id:"completeAutomationSprintModal.sprintSummary.nextSprintDatesLabel",defaultMessage:"Next sprint dates"},cancelButton:{id:"completeAutomationSprintModal.sprintSummary.cancel",defaultMessage:"Cancel"},fallbackSprintName:{id:"completeAutomationSprintModal.sprintName.placeholder",defaultMessage:"Sprint"}});function pe(e){let{onDismiss:t,...o}=e;const{isOpen:r}=o,l=(0,i().v3)(),s=(0,n.useId)(),a=e=>{t();let n=!1;(0,D().Gv)(e)&&(0,D().O9)(e.clickedCancel)&&(n=!0===e.clickedCancel),u(l,{...(0,p().sl)(o.taskCollectionContextStore),action:n?"cancel_modal":"dismiss_modal"})};return(0,ue.jsx)(se().A,{ariaLabelledBy:s,isOpen:r,onDismiss:()=>a(),render:()=>(0,ue.jsx)(me,{...o,onDismiss:a,titleAriaId:s})})}function me(e){var t;const{completeSprintAutomationContext:o,setIsLoading:l,taskCollectionContextStore:a,onDismiss:c,completeSprintAutomationState:u,onAutomationComplete:d,titleAriaId:p}=e,{currentSprintId:m,querySprintsResult:g,currentSprintTaskSummary:h}=u,y=(0,s().tz)(),v=(0,i().v3)(),{isMobile:b}=(0,i().Y0)(),{value:j}=(0,H().fJ)(V().T.formulas),{value:A}=(0,H().fJ)(O().QV.automationTypecheck),{value:k}=(0,H().fJ)(O().QV.automationActionRegistry),_=(0,r().K8)((()=>S().default.state.currentUserSettingsStore),[]),M=(0,r().K8)((()=>o.sprintCollectionStore),[o]),w=(0,r().K8)((()=>{var e;const t=null===(e=o.automationContext)||void 0===e?void 0:e.automationStore;return null==t?void 0:t.getRecurrence()}),[o]),B=(0,r().K8)((()=>{var e;return(null===(e=o.automationContext)||void 0===e||null===(e=e.automationActionStore.getConfig())||void 0===e?void 0:e.complete_sprint_action)??"complete_sprint_and_move_incomplete_tasks_to_next_sprint"}),[null===(t=o.automationContext)||void 0===t?void 0:t.automationActionStore]),R=(0,r().K8)((()=>M.getSpaceId()),[M]),F=(0,r().K8)((()=>{if(m)return W().Bv.createChildStore(M,{id:m,table:T().ev,spaceId:M.getSpaceId()})}),[m,M]),D=(0,r().K8)((()=>F?(0,U().tS)({intl:y,environment:v,store:F,untitledFallback:de.fallbackSprintName}):y.formatMessage(de.fallbackSprintName)),[F,y,v]),L=(0,r().K8)((()=>ye({sprintBlockStore:F,sprintCollectionStore:M})),[F,M]),K=(0,r().K8)((()=>ve({sprintDateRange:L,intl:y})),[L,y]),[N,z]=n.useState(),E=(0,r().K8)((()=>f().default.createValue(B)),[B]),Y=n.useMemo((()=>{if(!w||null==L||!L.end_date)return;const e=(0,I().Vv)(w);return e?(0,I().Z3)({currentSprintEndDate:L.end_date,sprintSchedule:e}):void 0}),[w,null==L?void 0:L.end_date]),J=(0,r().K8)((()=>{if("pointer"!==(null==N?void 0:N.type))return;return ye({sprintBlockStore:W().Bv.createChildStore(M,N.pointer),sprintCollectionStore:M})}),[N,M]),[q,X]=n.useState(void 0),G=n.useMemo((()=>{if(q&&(0,C().oM)(q))return q}),[q]),Q=n.useMemo((()=>{if(!g)return;const{nextSprintIds:e,futureSprintIds:t}=g;return e.length>0?e:t}),[g]),Z=(0,r().K8)((()=>{if(void 0===Q)return;const e=Q[0];return e?{type:"pointer",pointer:{id:e,table:T().ev,spaceId:R}}:{type:"actionId"}}),[Q,R]),ee=(0,r().K8)((()=>{var e;return!Boolean(null==_||null===(e=_.getSettings())||void 0===e?void 0:e.seen_sprint_settings_engagement_banner)}),[_]);n.useEffect((()=>{Z&&z(Z)}),[Z,z]),n.useEffect((()=>{X(J??Y)}),[J,Y,X]);const te=n.useCallback((async()=>{if(c(),!(j&&A&&k&&N&&G&&o.automationContext))return;l(!0);const e=0===(null==h?void 0:h.incompleteTaskCount)?"complete_sprint":E.state;if(!o.automationContext)return;const t={type:"recurrence",recurrence:{type:"completeSprint",completeSprintActionType:e,nextSprintDateRange:G},automationStore:o.automationContext.automationStore,intl:y,parentRecordStore:o.currentCollectionViewBlockStore,formulasModule:j,isLoggedIn:v.currentUser.isLoggedIn(),automationTypecheckModule:A,automationActionRegistryModule:k},n=()=>{d()},{automationExecutionActions:r}=await O().QV.automations.load();await r.executeClientAutomation({environment:v,clientContext:t,onUndo:()=>{l(!0),n(),l(!1)}}),n(),l(!1)}),[c,j,N,G,o.automationContext,o.currentCollectionViewBlockStore,A,k,l,null==h?void 0:h.incompleteTaskCount,E,y,v,d]),ne=xe({isMobile:b}),{status:re}=(0,x().L)({value:u,validateLoaded:e=>!1===e.isLoading,waitTimeInMs:1*P().Xb});if("pending"!==re&&u.isLoading)return(0,ue.jsx)(Se,{titleAriaId:p,onDismiss:c,sprintCollectionStore:M});if(u.isLoading)return(0,ue.jsx)(ge,{titleAriaId:p,onDismiss:c});const{incompleteTaskCount:ie}=u.currentSprintTaskSummary,le=Boolean(N)&&Boolean(G),se=void 0!==Q&&Q.length>0;return(0,ue.jsxs)("div",{style:ne.modalContainer,children:[(0,ue.jsx)("div",{style:ne.header,id:p,children:(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.title",defaultMessage:"{sprintName} summary",values:{sprintName:D}})}),(0,ue.jsx)(he,{currentSprintFormattedDateRange:K,currentSprintTaskSummary:h}),ee&&(0,ue.jsx)(fe,{collectionContextStore:a,userSettingsStore:_,onDismissModal:c}),se&&(0,ue.jsxs)("div",{style:ne.flexRow,children:[y.formatMessage(de.selectNextSprintLabel),(0,ue.jsx)(ke,{nextSprintInput:N,setNextSprintInput:z,completeSprintAutomationContext:o,sprintPageIds:Q})]}),(0,ue.jsxs)("div",{style:ne.flexRow,children:[se?y.formatMessage(de.selectDatesForNextSprintLabel):y.formatMessage(de.nextSprintDatesLabel),(0,ue.jsx)(Me,{sprintDateRange:q,setSprintDateRange:X})]}),ie>0&&(0,ue.jsxs)("div",{style:ne.flexRow,children:[(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.incompleteTasksLabel",defaultMessage:"{incompleteTaskCount, plural, one {{incompleteTaskCount} incomplete task} other {{incompleteTaskCount} incomplete tasks}}",values:{incompleteTaskCount:ie}}),(0,ue.jsx)(be,{actionTypeStore:E})]}),(0,ue.jsx)(oe().A,{disabled:!le,onClick:()=>{te()},style:ne.button,children:(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.completeSprintButton",defaultMessage:"Complete {sprintName}",values:{sprintName:D}})}),(0,ue.jsx)($().p,{onClick:()=>c({clickedCancel:!0}),style:ne.button,children:y.formatMessage(de.cancelButton)})]})}function Se(e){const{onDismiss:t,sprintCollectionStore:o,titleAriaId:n}=e,l=(0,i().v3)(),a=(0,s().tz)(),{isMobile:c}=(0,i().Y0)(),u=(0,r().K8)((()=>o.getParentBlockStore()),[o]),d=xe({isMobile:c});return(0,ue.jsxs)("div",{style:d.modalContainer,children:[(0,ue.jsx)("div",{style:d.header,id:n,children:(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.missingCurrentSprint.title",defaultMessage:"No current sprint found"})}),(0,ue.jsx)(oe().A,{onClick:()=>{u&&L().uK({environment:l,store:u,pageVisitSource:h().y8.LinkInPage})},style:{...d.button,marginTop:24},children:(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.missingCurrentSprint.navigateToSprintsDatabase",defaultMessage:"Fix in Sprints database"})}),(0,ue.jsx)($().p,{onClick:t,style:d.button,children:a.formatMessage(de.cancelButton)})]})}function ge(e){const{onDismiss:t,titleAriaId:o}=e,n=(0,s().tz)(),{isMobile:r}=(0,i().Y0)(),l=xe({isMobile:r});return(0,ue.jsxs)("div",{style:l.modalContainer,children:[(0,ue.jsx)("div",{style:l.header,id:o,children:(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.titlePlaceholder",defaultMessage:"Sprint summary"})}),(0,ue.jsx)("div",{style:l.subheader,children:(0,ue.jsx)(Q().A,{style:l.subheaderShimmer})}),(0,ue.jsxs)("div",{style:l.flexRow,children:[n.formatMessage(de.selectNextSprintLabel),(0,ue.jsx)(Q().A,{style:l.flexRowShimmerBox1})]}),(0,ue.jsxs)("div",{style:l.flexRow,children:[n.formatMessage(de.selectDatesForNextSprintLabel),(0,ue.jsx)(Q().A,{style:l.flexRowShimmerBox2})]}),(0,ue.jsxs)("div",{style:l.flexRow,children:[(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.incompleteTasksPlaceholder",defaultMessage:"Incomplete tasks"}),(0,ue.jsx)(Q().A,{style:l.flexRowShimmerBox3})]}),(0,ue.jsx)(oe().A,{disabled:!0,onClick:F().lQ,style:l.button,children:(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.completeSprintButtonPlaceholder",defaultMessage:"Complete sprint"})}),(0,ue.jsx)($().p,{onClick:t,style:l.button,children:n.formatMessage(de.cancelButton)})]})}function xe(e){let{isMobile:t}=e;return(0,l().IS)((e=>{const o={height:44,borderRadius:8,display:"flex",alignItems:"center",width:void 0},n={...o,marginTop:12,marginBottom:18};return{modalContainer:{width:400,display:"flex",fontSize:t?a().J.UIRegular.mobile:a().J.UIRegular.desktop,flexDirection:"column",justifyContent:"center",padding:20},header:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:t?18:16,fontWeight:a().Wy.semibold},subheader:{display:"flex",alignItems:"center",justifyContent:"center",color:e.lightTextColor,marginBottom:16,gap:8},separator:{height:2,width:2,borderRadius:2,backgroundColor:e.lightIconColor},flexRow:{display:"flex",...t?{flexDirection:"column",fontSize:14,color:e.mediumTextColor}:{justifyContent:"space-between",alignItems:"center",height:24,marginBottom:16}},completedTaskGroup:{display:"flex",gap:4},button:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:8,...t&&o},subheaderShimmer:{borderRadius:4,marginTop:6,width:200,height:16,...t&&{height:22}},flexRowShimmerBox1:{borderRadius:4,width:60,height:16,...t&&n},flexRowShimmerBox2:{borderRadius:4,width:80,height:16,...t&&n},flexRowShimmerBox3:{borderRadius:4,width:140,height:16,...t&&n},dropdownButton:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:4,...t&&{...n,border:`1px solid ${e.stroke.secondary}`,justifyContent:"space-between"}},dropdownChevronIcon:{color:e.lightIconColor,width:12,height:"auto"}}}),[t])}function fe(e){const t=(0,s().tz)(),{collectionContextStore:o,userSettingsStore:n,onDismissModal:r}=e,c=(0,i().v3)(),u=(0,l().IS)((e=>({banner:{width:"100%",display:"flex",alignItems:"start",backgroundColor:e.accentColors.blue["light"===e.mode?50:300],borderRadius:4,padding:12,marginBottom:12,fontSize:12,lineHeight:1.5,gap:8},bannerContent:{flex:"1 1 auto",color:e.regularTextColor},bannerTitle:{fontWeight:a().Wy.regular},icon:{width:12,color:e.blueColor},repeatIcon:{flex:"0 0 auto",marginBlockStart:3},closeButton:{marginTop:-3,borderRadius:"50%"},link:{color:e.text.uiBluePrimary}})),[]);return(0,ue.jsxs)("div",{style:u.banner,children:[(0,ue.jsx)("div",{style:u.repeatIcon,children:(0,M().l)(u.icon)}),(0,ue.jsx)("div",{style:u.bannerContent,children:(0,ue.jsx)("div",{style:u.bannerTitle,children:(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.turnOnAutomaticSprints.banner.title",defaultMessage:"Complete your sprints automatically. Turn on Automated sprints in <linkToSprintSettings>Settings</linkToSprintSettings>.",values:{linkToSprintSettings:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,ue.jsx)(ae().A,{onClick:()=>{n&&(r(),K().cJ({environment:c,userSettingsStore:n}),K().Dl(o))},disableUnderline:!0,style:u.link,children:t})}}})})}),(0,ue.jsx)(G().A,{icon:k().u,ariaLabel:t.formatMessage({id:"completeAutomationSprintModal.dismissBannerButton",defaultMessage:"Dismiss banner button"}),style:u.closeButton,onClick:()=>{n&&K().cJ({environment:c,userSettingsStore:n})}})]})}function he(e){const{currentSprintFormattedDateRange:t,currentSprintTaskSummary:o}=e,{isMobile:n}=(0,i().Y0)(),r=(0,s().tz)(),l=xe({isMobile:n}),a=o?r.formatMessage(de.completedPercentSummary,{completedTaskCount:o.completedTaskCount,totalTaskCount:o.totalTaskCount}):void 0,c=t&&o?(0,ue.jsxs)(ue.Fragment,{children:[t,(0,ue.jsx)("div",{style:l.separator}),a]}):t||a;return void 0===c?null:(0,ue.jsx)("div",{style:l.subheader,children:c})}function ye(e){const{sprintBlockStore:t,sprintCollectionStore:o}=e;if(!t)return;const n=o.getPropertyMapping(),r=null==n?void 0:n[y().Hx.Dates];if(!r)return;const i=t.getPropertyValue(r);if(!i)return;const l=(0,B().Cok)(i)[0];return l?(0,C().HB)(l):void 0}function ve(e){const{sprintDateRange:t,intl:o}=e;if(t&&(0,C().oM)(t))return(0,b().ZF)({value:t,allowRelativeDates:!1,shortenDateAndRange:!0,displayInUserTimezone:!0,intl:o})}const Ce={complete_sprint_and_move_incomplete_tasks_to_next_sprint:(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.moveToNextSprintOption",defaultMessage:"Move to next sprint"}),complete_sprint_and_move_incomplete_tasks_to_backlog:(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.moveToBacklogOption",defaultMessage:"Move to backlog"}),complete_sprint:(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.keepInThisSprintOption",defaultMessage:"Keep in current sprint"})};function be(e){const{actionTypeStore:t}=e,{isMobile:o}=(0,i().Y0)(),n=(0,r().O$)(t),l=xe({isMobile:o});return(0,ue.jsx)(X().Ay,{popupType:o?X().z7.SlideUp:X().z7.Popup,alignmentToOrigin:X().yP.Start,placementToOrigin:X().sx.Bottom,render:e=>(0,ue.jsx)(Ae,{actionTypeStore:t,buttonPopupParent:e}),renderOrigin:e=>(0,ue.jsxs)($().p,{...e,style:l.dropdownButton,children:[Ce[n],(0,A().b)(l.dropdownChevronIcon)]})})}const je=["complete_sprint_and_move_incomplete_tasks_to_next_sprint","complete_sprint_and_move_incomplete_tasks_to_backlog","complete_sprint"];function Ae(e){const{actionTypeStore:t,buttonPopupParent:o}=e,{isMobile:n}=(0,i().Y0)(),s=(0,l().IS)((e=>({checkIcon:{color:e.lightIconColor,width:12,height:"auto",marginLeft:4}})),[]),a=(0,r().K8)((()=>je.map((e=>{const n=e===t.state;return{key:e,action:()=>{t.setState(e),o.close()},render:t=>(0,ue.jsx)(q().A,{...t,title:Ce[e],right:n&&(0,j().o)(s.checkIcon)})}}))),[t,s.checkIcon,o]);let c;return c=n?{menuType:N().gu.ActionSheet}:{menuType:N().gu.Popup,maxHeight:"50vh",minWidth:230},(0,ue.jsx)(Z().A,{...c,children:(0,ue.jsx)(ee().Ay,{type:ee().Oh.Vertical,initialFocus:0,sections:[{key:"sprint_automations",items:a,render:e=>(0,ue.jsx)(ie().A,{...e})}]})})}function ke(e){const{nextSprintInput:t,completeSprintAutomationContext:o,setNextSprintInput:n,sprintPageIds:a}=e,{sprintCollectionStore:c}=o,{isMobile:u}=(0,i().Y0)(),d=(0,i().v3)(),p=(0,s().tz)(),m=(0,r().K8)((()=>{if(void 0===t)return(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSelect.empty",defaultMessage:"Select sprint"});if("actionId"===t.type)return(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSelect.newSprint",defaultMessage:"New sprint"});if("pointer"===t.type){const e=W().Bv.createChildStore(c,t.pointer);return(0,U().tS)({intl:p,environment:d,store:e,untitledFallback:de.fallbackSprintName})}(0,D().HB)(t)}),[t,p,c,d]),S=xe({isMobile:u}),g=(0,l().IS)((e=>({button:{...void 0===t&&{color:e.lightTextColor}}})),[t]),x={...S.dropdownButton,...g.button};return 0===a.length||1===a.length?(0,ue.jsx)($().p,{style:x,disabled:!0,children:m}):(0,ue.jsx)(X().Ay,{popupType:u?X().z7.SlideUp:X().z7.Popup,alignmentToOrigin:X().yP.Start,placementToOrigin:X().sx.Bottom,render:e=>(0,ue.jsx)(_e,{buttonPopupParent:e,completeSprintAutomationContext:o,sprintPageIds:a,nextSprintInput:t,setNextSprintInput:n}),renderOrigin:e=>(0,ue.jsxs)($().p,{...e,style:x,children:[m,(0,A().b)(S.dropdownChevronIcon)]})})}function _e(e){const{sprintPageIds:t,completeSprintAutomationContext:o,buttonPopupParent:a,nextSprintInput:c,setNextSprintInput:u}=e,{sprintCollectionStore:d}=o,{isMobile:p}=(0,i().Y0)(),m=(0,r().K8)((()=>d.getSpaceId()),[d]),S=(0,r().K8)((()=>(0,z().B7)({collectionStore:o.taskCollectionStore,property:y().yx.TaskToSprintRelation}).filter((e=>e.visible&&("title"===e.property||o.sprintCollectionSchema[e.property])))),[o]),g=(0,r().K8)((()=>new(E().A)),[]),x=(0,l().IS)((e=>({checkIcon:{color:e.lightIconColor,width:12,height:"auto",marginLeft:4},plusIcon:{color:e.lightIconColor,width:12,height:"auto"},createSprintRow:{display:"flex",gap:4},sprintRow:{display:"flex",maxHeight:22,alignItems:"center"},recordTitle:{...p&&{marginRight:12}}})),[p]),f="purple",h=(0,l().DP)(),C=(0,R().LD)(h,f),b=n.useMemo((()=>{const e="actionId"===(null==c?void 0:c.type);return{key:"new_sprint",action:()=>{u({type:"actionId"}),a.close()},render:t=>(0,ue.jsx)(q().A,{...t,icon:(0,_().W)(x.plusIcon),title:(0,ue.jsxs)("div",{style:x.createSprintRow,children:[(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.selectSprintDropdown.createNew",defaultMessage:"New sprint"}),(0,ue.jsx)(ce().A,{isRound:!0,showRemoveButton:!1,value:(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.selectSprintDropdown.createNewToken",defaultMessage:"Next"}),format:v().NY.Medium,isSingle:!0,color:C.textColor,backgroundColor:C.backgroundColor,showColoredDot:f})]}),right:e&&(0,j().o)(x.checkIcon)})}}),[c,a,u,x,C]),A=(0,r().K8)((()=>t.map((e=>{const t={id:e,table:T().ev,spaceId:m},o=W().Bv.createChildStore(d,t),n=o.getIcon(),r="pointer"===(null==c?void 0:c.type)&&w().L3.isEqual(c.pointer,t);return{key:e,action:()=>{u({type:"pointer",pointer:t}),a.close()},render:e=>(0,ue.jsx)(q().A,{...e,icon:n&&(0,ue.jsx)(ne().A,{disabled:!0,icon:n,isEmptyPage:!1,size:20}),title:(0,ue.jsx)("div",{style:x.sprintRow,children:S.map((e=>"title"===e.property?(0,ue.jsx)(re().A,{store:o,style:x.recordTitle},"title"):(0,ue.jsx)(Y().m,{store:o,property:e.property,disabled:!1,locked:!1,format:J().j.Relation,tableWrap:!1,blockPropertyValueOverlayStore:g,collectionStore:d},e.property))).filter(D().O9)}),right:r&&(0,j().o)(x.checkIcon)})}}))),[d,g,a,c,S,m,u,x,t]),k=[{key:"sprints",items:n.useMemo((()=>A.length>0?A:[b]),[A,b]),render:e=>(0,ue.jsx)(ie().A,{...e})}];let M;return M=p?{menuType:N().gu.ActionSheet}:{menuType:N().gu.Popup,maxHeight:"50vh",minWidth:230},(0,ue.jsx)(Z().A,{...M,children:(0,ue.jsx)(ee().Ay,{type:ee().Oh.Vertical,initialFocus:0,sections:k})})}function Me(e){const{sprintDateRange:t,setSprintDateRange:o}=e,a=(0,s().tz)(),{isMobile:c}=(0,i().Y0)(),u=n.useMemo((()=>ve({sprintDateRange:t,intl:a})),[t,a]),d=xe({isMobile:c}),p=(0,l().IS)((e=>({button:{...!u&&{color:e.lightTextColor}}})),[u]),m=(0,r().K8)((()=>u||(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.nextSprintDate.placeholder",defaultMessage:"Select dates"})),[u]);return(0,ue.jsx)(X().Ay,{popupType:c?X().z7.SlideUp:X().z7.Popup,alignmentToOrigin:X().yP.Start,placementToOrigin:X().sx.Bottom,render:e=>(0,ue.jsx)(we,{sprintDateRange:t,setSprintDateRange:o,onDismiss:()=>{e.close()}}),renderOrigin:e=>(0,ue.jsxs)($().p,{...e,style:{...d.dropdownButton,...p.button},children:[m,(0,A().b)(d.dropdownChevronIcon)]})})}function we(e){const{sprintDateRange:t,setSprintDateRange:o,onDismiss:r}=e,{isMobile:l}=(0,i().Y0)(),a=n.useMemo((()=>({starting:null!=t&&t.start_date?{type:"date",start_date:t.start_date}:void 0,ending:null!=t&&t.end_date?{type:"date",start_date:t.end_date}:void 0})),[t]);let c;return c=l?{menuType:N().gu.Modal,right:(0,ue.jsx)(te().DoneMenuText,{}),onClickRight:r}:{menuType:N().gu.Popup,maxHeight:"50vh",paddingTop:6},(0,ue.jsxs)(Z().A,{...c,children:[(0,ue.jsx)(ie().A,{children:(0,ue.jsx)(le().A,{title:void 0,disableMenuWrap:!0,allowRelativeRangeFilter:!0,value:a,onUpdate:e=>{var t,n;if(e.error)return;const r={...a,...e.value},i=null===(t=r.starting)||void 0===t?void 0:t.start_date,l=null===(n=r.ending)||void 0===n?void 0:n.start_date;o({type:"daterange",start_date:i,end_date:l})},onDismiss:r})}),(0,ue.jsx)(ie().A,{topBorder:!0,children:(0,ue.jsx)(q().A,{focused:!1,onClick:()=>{o(void 0)},title:(0,ue.jsx)(s().sA,{id:"completeAutomationSprintModal.sprintSummary.datePicker.clear",defaultMessage:"Clear"})})})]})}o(672577);var Te=()=>o(416504),Ie=()=>o(187174),Be=()=>o(799829),Re=()=>o(449506),Fe=()=>o(950914),De=()=>o(374562);function Pe(e){if(!e)return;if("aggregation"!==e.type)return;if("text"!==e.aggregationResult.type)return;const t=e.aggregationResult.value,o=null==t?void 0:t.split("/");if(!o||2!==o.length)return;const n=Number(o[0]),r=Number(o[1]);return{completedTaskCount:n,incompleteTaskCount:r-n,totalTaskCount:r,completedTaskPercent:0===r?0:n/r}}function Le(e){if(!e)return;const t=e.getPropertyMapping(),o=null==t?void 0:t[y().yx.TaskToSprintRelation];if(!o)return;return De().jj.filter.property=o,{...De().jj.filter,property:o}}function Ke(e,t){if(!t)return;const o=t.getPropertyMapping(),n=Le(t);if(!n)return;const r=null==o?void 0:o[y().yx.Status];if(!r)return;const i=t.getSchema()[r];if(!i||"status"!==i.type)return;const l=(0,Fe().Q6)(e,i);return l?{type:"aggregation",filter:{operator:"and",filters:[n]},aggregation:{aggregator:{operator:"count_per_group",groupName:l},property:r}}:void 0}class Oe extends f().default{getInitialState(){return{isLoading:!0,currentSprintId:void 0,querySprintsResult:void 0,currentSprintTaskSummary:void 0}}updateCurrentSprint(e){const{querySprintsResult:t,currentSprintTaskSummary:o}=this.state;void 0!==e&&void 0!==t&&void 0!==o?this.setState({isLoading:!1,currentSprintId:e,querySprintsResult:t,currentSprintTaskSummary:o}):e?this.setState({...this.state,currentSprintId:e}):this.setState({...this.state,isLoading:!0,currentSprintId:e})}updateNextAndFutureSprints(e){const{currentSprintId:t,currentSprintTaskSummary:o}=this.state;void 0!==t&&void 0!==e&&void 0!==o?this.setState({isLoading:!1,currentSprintId:t,querySprintsResult:e,currentSprintTaskSummary:o}):e?this.setState({...this.state,querySprintsResult:e}):this.setState({...this.state,isLoading:!0,querySprintsResult:e})}updateCurrentSprintTaskSummary(e){const{currentSprintId:t,querySprintsResult:o}=this.state;void 0!==t&&void 0!==o&&void 0!==e?this.setState({isLoading:!1,currentSprintId:t,querySprintsResult:o,currentSprintTaskSummary:e}):e?this.setState({...this.state,currentSprintTaskSummary:e}):this.setState({...this.state,isLoading:!0,currentSprintTaskSummary:e})}}const Ve=Oe;function Ne(e){const{taskCollectionContextStore:t,completeSprintAutomationContext:o,children:l,isModalOpen:a}=e,{sprintCollectionStore:c}=o,u=c.id,d=(0,i().v3)(),p=(0,r().K8)((()=>new Ve),[]),m=(0,r().K8)((()=>p.state),[p]),S=(0,r().K8)((()=>{var e;const o=t.relativeVariableStore.state;return null==o||null===(e=o[u])||void 0===e?void 0:e.current}),[u,t]);n.useEffect((()=>{p.updateCurrentSprint(S)}),[S,p]);const[{value:g}]=(0,Ie().Yb)((async()=>await async function(e){var t;const{environment:o,completeSprintAutomationContext:n}=e,{sprintCollectionStore:r}=n,i=function(e){var t,o;const{sprintCollectionStore:n,sprintCollectionSchema:r}=e,i=n.getPropertyMapping(),l=null==i?void 0:i[y().Hx.StatusV2];if(!l)return;const s=r[l];if(!s||"status"!==s.type)return;const a=null===(t=s.options)||void 0===t||null===(t=t.find((e=>e.id===y().tO)))||void 0===t?void 0:t.value,c=null===(o=s.options)||void 0===o||null===(o=o.find((e=>e.id===y().Jd)))||void 0===o?void 0:o.value;if(!a||!c)return;const u=Be().n$[y().av].next.reducer.getCombinatorFilter(r);if(!u)return;const d={type:"results",filter:u,limit:Ue},p={type:"results",filter:{operator:"and",filters:[{property:l,filter:{operator:"status_is",value:{type:"is_option",value:c}}}]},limit:Ue};return{[y().tO]:d,[y().Jd]:p}}(n),l=r.getPropertyMapping(),s=null==l?void 0:l[y().Hx.Dates],a=null==l?void 0:l[y().Hx.UniqueId];if(!i||!s||!a)return;const c={userId:o.currentUser.id,userTimeZone:(0,Te().P)(),searchQuery:void 0,sort:[{property:s,direction:"ascending"},{property:a,direction:"ascending"}],reducers:i},u=null===(t=r.getParentBlockStore())||void 0===t?void 0:t.getCollectionViewStores()[0],d=r.getSpaceId();if(!u)return;const p=await Re().callApi({eventName:"queryCollection",environment:o,data:{source:{type:"collection",id:r.id,spaceId:d},collectionView:{id:u.id,spaceId:d},loader:c},tracking:{src:"complete_sprint_modal_sprint_picker"}});if("success"!==p.type)return;const m=p.data.result.reducerResults[y().tO],S=p.data.result.reducerResults[y().Jd];if("results"!==m.type||"results"!==S.type)return;const g=m.blockIds,x=S.blockIds;return{nextSprintIds:g,futureSprintIds:x}}({environment:d,completeSprintAutomationContext:o})),[S,d,o]);n.useEffect((()=>{p.updateNextAndFutureSprints(g)}),[g,p]);const x=(0,s().tz)(),[{value:f}]=(0,Ie().Yb)((async()=>await async function(e){var t;const{environment:o,completeSprintAutomationContext:n,intl:r}=e,{taskCollectionStore:i}=n,l=Ke(r,i);if(!l)return;const s=Le(i);if(!s)return;const a={filter:{operator:"and",filters:[s]},userId:o.currentUser.id,userTimeZone:(0,Te().P)(),searchQuery:"",sort:[],reducers:{completed_tasks_in_current_sprint:l}},c=null===(t=i.getParentBlockStore())||void 0===t?void 0:t.getCollectionViewStores()[0],u=i.getSpaceId();if(!c)return;const d=await Re().callApi({eventName:"queryCollection",environment:o,data:{source:{type:"collection",id:i.id,spaceId:u},collectionView:{id:c.id,spaceId:u},loader:a},tracking:{src:"complete_sprint_modal_sprint_picker"}});if("success"!==d.type)return;return Pe(d.data.result.reducerResults.completed_tasks_in_current_sprint)}({intl:x,environment:d,completeSprintAutomationContext:o})),[S,d,o,a]);return n.useEffect((()=>{p.updateCurrentSprintTaskSummary(f)}),[f,p]),(0,ue.jsx)(ue.Fragment,{children:l({completeSprintAutomationState:m,onAutomationComplete:()=>{p.reset()}})})}const Ue=5;var ze=()=>o(864943),He=()=>o(101981),Ee=()=>o(873050),We=()=>o(67775);function Ye(e){const{percentage:t}=e;return(0,ue.jsx)(We().l,{numberValue:t,numberFormat:void 0,numberPrecision:void 0,numberShowAs:{type:"ring",maxValue:1,color:"blue",showValue:!1},shouldRenderTooltip:!1,progressSize:15})}const Je=function(e){const{isLoading:t,taskSummary:n,styles:r}=e;return(0,ue.jsx)("div",{style:{width:16,height:"auto",...r},children:t?(0,ue.jsx)(o(331542).A,{}):(0,ue.jsx)(Ye,{percentage:(null==n?void 0:n.completedTaskPercent)??0})})};function $e(e){const{taskCollectionContextStore:t,children:o}=e,n=(0,r().K8)((()=>(0,Ee().y_)(t)),[t]),i=(0,r().K8)((()=>t.collectionStore()),[t]),l=(0,s().tz)(),a=(0,r().K8)((()=>Ke(l,i)),[i,l]);return!a||n?null:(0,ue.jsx)(He().A,{id:"completed_tasks_in_current_sprint_view",collectionContextStore:t,reducer:a,render:e=>{const t=Pe(e.state);return t?(0,ue.jsxs)(ue.Fragment,{children:[(0,ue.jsx)(qe,{currentSprintTasksInView:t}),o(t)]}):null}})}function qe(e){const{currentSprintTasksInView:t}=e,o=(0,l().IS)((e=>({summary:{display:"flex",alignItems:"center",justifyContent:"center",columnGap:5,color:e.lightTextColor,fontSize:a().J.UIRegular.desktop,fontWeight:a().Wy.regular,whiteSpace:"nowrap"}})),[]),{isPhone:n}=(0,i().Y0)();return n?null:(0,ue.jsxs)("div",{style:o.summary,children:[(0,ue.jsx)(Je,{styles:{paddingTop:1},isLoading:!1,taskSummary:t}),(0,ue.jsx)(s().sA,{id:"completeAutomationSprintAutomation.inlineSummary.completedPercentSummary",defaultMessage:"{completedTaskCount} / {totalTaskCount} tasks",values:{completedTaskCount:t.completedTaskCount,totalTaskCount:t.totalTaskCount}})]})}function Xe(e){const{collectionContextStore:t,completeSprintAutomationContext:o}=e,l=(0,i().v3)(),[s,a]=n.useState(!1),[c,g]=n.useState(!1),x=n.useCallback((()=>{g(!1)}),[g]),f=(0,r().K8)((()=>o.permissionsContext.canEdit),[o.permissionsContext.canEdit]),h=(0,r().K8)((()=>S().default.state.currentUserSettingsStore),[]),y=()=>{g(!0);"complete-sprint-button-tooltip"===(0,m().gt)(h,"sprints-onboarding")&&d().tutorialGoToNextStep(l,"sprints-onboarding"),u(l,{...(0,p().sl)(t),action:"open_modal"})};return f?(0,ue.jsxs)(ue.Fragment,{children:[(0,ue.jsx)(Ne,{completeSprintAutomationContext:o,taskCollectionContextStore:t,isModalOpen:c,children:e=>{let{completeSprintAutomationState:n,onAutomationComplete:r}=e;return(0,ue.jsx)(pe,{completeSprintAutomationContext:o,isOpen:c,onDismiss:x,setIsLoading:a,taskCollectionContextStore:t,completeSprintAutomationState:n,onAutomationComplete:r})}}),(0,ue.jsx)($e,{taskCollectionContextStore:t,children:()=>(0,ue.jsx)(Ge,{taskCollectionContextStore:t,onClick:y,isLoading:s})})]}):null}function Ge(e){const{taskCollectionContextStore:t,onClick:o,isLoading:c}=e,{isPhone:u}=(0,i().Y0)(),d=n.useRef(null),p=function(e){const{isPhone:t}=e;return(0,l().IS)((e=>({button:{height:26,marginLeft:8,fontWeight:a().Wy.medium,...t&&{flexGrow:1,borderRadius:8,height:44}}})),[t])}({isPhone:u}),m=(0,r().K8)((()=>t.collectionViewBlockStore()),[t]),x=(0,r().K8)((()=>S().default.state.currentSpaceStore),[]),f=(0,r().K8)((()=>null==m?void 0:m.getSpaceId()),[m]);if(!m)return(0,ue.jsx)(ue.Fragment,{});const h=f===(null==x?void 0:x.id);return(0,ue.jsxs)(ue.Fragment,{children:[(0,ue.jsx)(ze().A,{size:"lg",ref:d,onClick:o,style:p.button,disabled:c,disabledFeedback:c,children:(0,ue.jsx)(s().sA,{defaultMessage:"Complete sprint",id:"completeSprintAutomationButton.label"})}),h&&(0,ue.jsx)(g().rY,{origin:d})]})}var Qe=()=>o(244641);function Ze(e){var t;const{collectionContextStore:o,sprintAutomationContext:n}=e,s=(0,l().IS)((e=>({summary:{display:"flex",alignItems:"center",justifyContent:"center",marginLeft:17,columnGap:5,color:e.lightTextColor,fontSize:a().J.UIRegular.desktop,fontWeight:a().Wy.regular,whiteSpace:"nowrap"},icon:{width:16,height:"auto",paddingTop:2}})),[]),{isPhone:c}=(0,i().Y0)(),u=(0,r().K8)((()=>{var e;const t=null===(e=n.automationContext)||void 0===e?void 0:e.automationStore.getRunAt();if(!t)return;const o=Qe().c9.fromMillis(t,{zone:"utc"}).toLocal().startOf("day"),r=Qe().c9.now().startOf("day"),i=o.diff(r,"days").days;return i<1?"soon":1===i?"today":2===i?"tomorrow":i-1}),[null===(t=n.automationContext)||void 0===t?void 0:t.automationStore]);return u?(0,ue.jsx)($e,{taskCollectionContextStore:o,children:()=>c?null:(0,ue.jsxs)("div",{style:s.summary,children:[(0,M().l)(s.icon),(0,ue.jsx)(et,{daysRemaining:u})]})}):null}function et(e){const{daysRemaining:t}=e;return"soon"===t?(0,ue.jsx)(s().sA,{id:"completeAutomationSprintAutomation.inlineSummary.endingSoon",defaultMessage:"Ending soon"}):"today"===t?(0,ue.jsx)(s().sA,{id:"completeAutomationSprintAutomation.inlineSummary.endsToday",defaultMessage:"Ends today"}):"tomorrow"===t?(0,ue.jsx)(s().sA,{id:"completeAutomationSprintAutomation.inlineSummary.endsTomorrow",defaultMessage:"Ends tomorrow"}):(0,ue.jsx)(s().sA,{id:"completeAutomationSprintAutomation.inlineSummary.daysRemaining",defaultMessage:"Ends in {daysRemaining} days",values:{daysRemaining:t}})}const tt=function(e){var t;const{collectionContextStore:o}=e,n=(0,r().K8)((()=>o.completeSprintButtonContextStore.state),[o]),i=(0,r().K8)((()=>{var e;return Boolean(null==n||null===(e=n.automationContext)||void 0===e?void 0:e.automationStore.isActive())}),[null==n||null===(t=n.automationContext)||void 0===t?void 0:t.automationStore]);return n?i?(0,ue.jsx)(Ze,{collectionContextStore:o,sprintAutomationContext:n}):(0,ue.jsx)(Xe,{collectionContextStore:o,completeSprintAutomationContext:n}):null}},56394:(e,t,o)=>{o.d(t,{A:()=>c});o(296540);var n=()=>o(484714),r=()=>o(401497),i=()=>o(668725),l=()=>o(704152),s=()=>o(963589),a=o(474848);function c(e){const{icon:t,title:o,on:c,disabled:u,hasDiff:d,wrapStyle:p,innerStyle:m,hideChevron:S}=e,g=(0,n().v3)(),x=(0,s().X)("db_ux_simplification_next"),f=(0,r().IS)((e=>{const t=g.device.isMobile;return{filterPill:{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderRadius:32,height:t?28:24,lineHeight:t?"28px":"24px",padding:"0 8px",...!x&&{border:`1px solid ${e.outlineButtonBorder}`},color:e.mediumTextColor,...c&&{color:e.text.uiBluePrimary,borderColor:e.filterPillBorder,background:e.tint.uiBlue},...u&&{color:e.text.uiBlueTertiary,borderColor:e.text.uiBlueTertiary,background:e.tint.uiBlue},...m},hovered:c?{background:e.tint.uiBlueHover}:{},pressed:c?{background:e.tint.uiBluePressed}:{},chevron:{width:10,marginLeft:4,marginTop:1,fill:u?e.text.uiBlueTertiary:c?e.blueColor:e.lightIconColor},diffDot:{position:"absolute",top:-2,right:-2,background:"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[300],border:`1px solid ${e.contentBackground}`,width:9,height:9,borderRadius:9}}}),[x,u,g.device.isMobile,m,c]);return(0,a.jsxs)("div",{style:{borderRadius:14,marginRight:6,display:"inline-flex",...d&&{position:"relative"},...p},children:[(0,a.jsxs)(l().A,{disabled:u,style:f.filterPill,hoveredStyle:f.hovered,pressedStyle:f.pressed,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick,children:[t,o,!S&&(0,i().b)(f.chevron)]}),d&&(0,a.jsx)("div",{style:f.diffDot})]})}},75544:(e,t,o)=>{o.d(t,{A:()=>p});o(898992),o(354520);var n=o(296540),r=()=>o(908006),i=()=>o(56366),l=()=>o(737658),s=()=>o(336811),a=()=>o(496603),c=()=>o(183558),u=(o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),()=>o(921598));function d(e){const{reducerId:t,instanceId:o,reducer:n,collectionContextStore:r,groupsPointer:i}=e,l=r.reducersStore.state,s=l[t];let c,d;if(i&&i.length>0&&(c=(0,u().Hm)(i)),n){if(d={instanceIds:a().sb([...(null==s?void 0:s.instanceIds)||[],o]),reducer:n},c){r.reducerDependencies.has(c)||r.reducerDependencies.set(c,new Set);const e=r.reducerDependencies.get(c);null==e||e.add(t)}}else{if(c){const e=r.reducerDependencies.get(c);e&&(e.delete(t),0===e.size&&r.reducerDependencies.delete(c))}const e=a().FF((null==s?void 0:s.instanceIds)||[],o);d=s&&e.length>0?{instanceIds:e,reducer:s.reducer}:void 0}a().n4(s,d)||r.reducersStore.setState({...l,[t]:d})}function p(e){const{id:t,reducer:o,collectionContextStore:u,groupsPointer:p,debounceWait:m}=e,S=(0,i().K8)((()=>p),[p],{useDeepEqual:!0}),g=(0,i().K8)((()=>o),[o],{useDeepEqual:!0}),x=(0,i().K8)((()=>u.collectionViewStore()),[u]),f=(0,i().K8)((()=>u.normalizedFormatStore.state.collection_pointer),[u.normalizedFormatStore]),h=(0,i().K8)((()=>{var e;return null==x||null===(e=x.getFormatStore())||void 0===e?void 0:e.getKeyStore("collection_view_source").getValue()}),[x]),y=(0,n.useRef)(!1),v=(0,s().O)(),[C,b]=(0,n.useReducer)(((e,t)=>a().n4(e,t)?e:t),void 0),j=(0,n.useCallback)((()=>{const e=u.localResultStore.state,o=u.remoteResultStore.state,n=e&&"reducer"===e.type?e.reducerResults[t]:void 0,r=o&&"reducer"===o.type?o.reducerResults[t]:void 0;return function(e){const{reducerId:t,localReducerResult:o,remoteReducerResult:n,collectionContextStore:r,reducer:i}=e,s=r.reducersStore.state,c=r.remoteResultStore.state,u=r.isClientModeEnabledStore.state;if(u)return o;if("aggregation"===i.type||"groups"===i.type){const e=r.isCreatingNewChartCollectionStore.state,n=null==c?void 0:c.reducerResults[t],l=r.wasCreatedThisSessionStore.state;if(e&&l){const e=Boolean(n&&"groups"===n.type&&("v2"===n.version?n.hasMore:0!==n.total)),t=Boolean(n&&"aggregation"===n.type&&"number"===n.aggregationResult.type&&0!==n.aggregationResult.value);return(e||t)&&r.isCreatingNewChartCollectionStore.setState(!1),o}if(n)return n;const u=Boolean(c&&"reducer"===c.type&&a().I6(c.reducerResults,((e,t)=>{const o=s[t];if(!o)return!1;const n="groups"===i.type?void 0:i.filter;return Boolean("results"===o.reducer.type&&!o.reducer.searchQuery&&"results"===e.type&&e.hasMore&&a().n4(n,o.reducer.filter))})));return u?o:n}if("results"===i.type){var d;const e=r.wasCreatedThisSessionStore.state,i=Boolean(c&&"reducer"===c.type&&c.reducerResults[t]),s=null===(d=r.collectionViewStore())||void 0===d?void 0:d.getCollectionSource(),a=(0,l().TR)(s)||(0,l().hJ)(s);if((i||e)&&!a&&o&&"results"===o.type){return{...o,hasMore:n&&"results"===n.type?n.hasMore:o.hasMore}}return n}}({reducerId:t,collectionContextStore:u,reducer:g,localReducerResult:n,remoteReducerResult:r})}),[u,g,t]),A=(0,n.useCallback)((()=>{y.current=!1,v.current||b(j())}),[j,v]),k=(0,n.useCallback)((()=>{y.current||(y.current=!0,r().default.afterNextFlush(A))}),[A]),[_]=(0,n.useState)((()=>(0,c().Ay)()));return(0,n.useEffect)((()=>{const e=m?(0,a().sg)(k,m,{leading:!0}):k;return u.remoteResultStore.addListener(k),u.localResultStore.addListener(e),()=>{u.remoteResultStore.removeListener(k),u.localResultStore.removeListener(e)}}),[u,k,m]),(0,n.useEffect)((()=>(d({reducerId:t,instanceId:_,reducer:g,collectionContextStore:u,groupsPointer:S}),()=>{d({reducerId:t,instanceId:_,reducer:void 0,collectionContextStore:u,groupsPointer:S})})),[u,x,f,h,S,g,t,_]),(0,n.useEffect)((()=>{k()}),[]),(0,n.useEffect)((()=>(u.timingTracker.mountCollectionReducerRequest(t,g.type),()=>{u.timingTracker.unmountCollectionReducerRequest(t)})),[u,t,g]),C}},101981:(e,t,o)=>{o.d(t,{A:()=>s});var n=o(296540),r=()=>o(56366),i=o(474848);function l(e){const{resultStore:t,render:l,...s}=e,a=(0,o(75544).A)(s),c=(0,r().uB)(t,o(757695).default.createClass(void 0));(0,n.useEffect)((()=>{c.setState(a)}),[a,c]);const u=(0,r().K8)((()=>l?l(c):null),[l,c]);return(0,i.jsx)(i.Fragment,{children:u})}const s=n.memo(l)},134421:(e,t,o)=>{o.d(t,{X:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowsUpDown",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.11 2.385a.61.61 0 01.48-.211c.191 0 .353.07.486.21L8.03 5.409a.66.66 0 01.2.475c0 .191-.061.347-.182.469a.627.627 0 01-.463.181.59.59 0 01-.451-.187L5.926 5.098l-.72-.844.04 1.219v7.242a.624.624 0 01-.187.469.624.624 0 01-.47.187.636.636 0 01-.468-.187.635.635 0 01-.182-.47V5.474l.041-1.22-.726.845-1.201 1.248a.61.61 0 01-.457.187.627.627 0 01-.463-.181.634.634 0 01-.182-.47.66.66 0 01.2-.474l2.958-3.023zm7.786 10.781a.636.636 0 01-.486.205.665.665 0 01-.486-.205l-2.947-3.035a.64.64 0 01-.206-.475c0-.191.061-.345.182-.463a.634.634 0 01.469-.181c.18 0 .33.06.451.181l1.201 1.248.727.85-.041-1.219V2.824c0-.187.06-.342.181-.463a.636.636 0 01.47-.187.627.627 0 01.65.65v7.248l-.041 1.219.726-.85 1.207-1.248a.6.6 0 01.451-.181c.188 0 .342.06.463.181a.615.615 0 01.182.463.648.648 0 01-.2.475l-2.953 3.035z"})})},158359:(e,t,o)=>{o.d(t,{P:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowDown",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},189048:(e,t,o)=>{o.d(t,{u:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowDownThick",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.99316 1.52246C7.40527 1.52246 7.00195 1.93262 7.00195 2.54785V10.1357L7.07031 11.6191L5.69629 10.0332L4.1582 8.50195C3.98047 8.31738 3.74805 8.19434 3.44727 8.19434C2.91406 8.19434 2.51074 8.59082 2.51074 9.15137C2.51074 9.41113 2.61328 9.65039 2.81836 9.8623L7.26172 14.3125C7.44629 14.5039 7.72656 14.6133 7.99316 14.6133C8.2666 14.6133 8.54004 14.5039 8.72461 14.3125L13.1748 9.8623C13.3799 9.65039 13.4824 9.41113 13.4824 9.15137C13.4824 8.59082 13.0791 8.19434 12.5459 8.19434C12.252 8.19434 12.0195 8.31738 11.835 8.50195L10.2969 10.0332L8.92285 11.6191L8.98438 10.1357V2.54785C8.98438 1.93262 8.58789 1.52246 7.99316 1.52246Z"})})},194440:(e,t,o)=>{o.d(t,{A:()=>H});o(898992),o(354520),o(672577),o(581454);var n=o(296540),r=()=>o(56366),i=()=>o(289915),l=()=>o(959013),s=()=>o(284371),a=()=>o(436696),c=()=>o(187899),u=()=>o(686526),d=()=>o(859794),p=()=>o(859428),m=()=>o(873050),S=()=>o(753199),g=()=>o(406792),x=()=>o(962730),f=()=>o(377586),h=()=>o(700250),y=()=>o(799288),v=()=>o(597777),C=()=>o(681873),b=()=>o(799829),j=()=>o(179034),A=()=>o(824862),k=()=>o(519831),_=()=>o(798880),M=()=>o(695608),w=()=>o(496603),T=()=>o(534177),I=()=>o(16006),B=()=>o(654734),R=()=>o(205098),F=()=>o(630116),D=o(474848);const P=function(e){let{schema:t,propertyFilter:n,parentStore:s,valueOnly:a,style:c}=e;const u=(0,r().K8)((()=>{const e=t[n.property];if(e&&(0,o(970013).nC)(e))return(0,o(685889).LQ)(e,s)}),[t,n,s]),{filter:d}=n,p=(0,i().s1)(d)?d.subfilter:d,m=(0,i().My)(p)&&!(0,i().fZ)(d),S={...c,maxWidth:void 0};return(0,D.jsx)("span",{style:(0,i().nM)(p)?S:c,children:(0,D.jsx)(l().sA,{defaultMessage:"{propertyName}{colonSeparator} {filterOperator} {propertyValue}",id:"database.filterBarFilterValue.title",values:{propertyName:a?void 0:(0,D.jsx)(K,{propertyFilter:n,schema:t}),colonSeparator:a||m?void 0:":",filterOperator:(0,D.jsx)(O,{propertyFilter:n}),propertyValue:(0,D.jsx)(N,{propertyFilter:n,schema:t,parentStore:s,relatedCollectionAppConfigUri:u})}})})};function L(){return(0,D.jsx)(l().sA,{defaultMessage:"Not",id:"database.filterBarFilterValue.notOperator"})}function K(e){let{propertyFilter:t,schema:o}=e;const n=o[t.property];return n?(0,D.jsx)("span",{style:{fontWeight:s().Wy.medium},children:n.name}):null}function O(e){let{propertyFilter:t}=e;const{filter:o}=t,n=(0,i().s1)(o)?o.subfilter:o;if((0,i().YH)(n))return"string_contains"===n.operator||"string_is"===n.operator?null:"string_does_not_contain"===n.operator||"string_is_not"===n.operator?(0,D.jsx)(L,{}):(0,D.jsx)(D.Fragment,{children:(0,R().J)(n.operator)});if((0,i().uf)(n))return"geo_point_is_within"===n.operator?null:"geo_point_is_not_within"===n.operator?(0,D.jsx)(L,{}):(0,D.jsx)(D.Fragment,{children:(0,R().J)(n.operator)});if((0,i().My)(n))return(0,D.jsx)(D.Fragment,{children:(0,R().J)(n.operator)});if((0,i().Ui)(n)){if("checkbox_is_not"===n.operator)return(0,D.jsx)(L,{})}else{if((0,i().v0)(n))return"enum_is"===n.operator?null:"enum_is_not"===n.operator?(0,D.jsx)(L,{}):(0,D.jsx)(D.Fragment,{children:(0,R().J)(n.operator)});if((0,i().as)(n))return"enum_contains"===n.operator?null:"enum_does_not_contain"===n.operator?(0,D.jsx)(L,{}):"enum_contains_all"===n.operator?null:(0,D.jsx)(D.Fragment,{children:(0,R().J)(n.operator)});if((0,i().H$)(n))return"status_is"===n.operator?null:"status_is_not"===n.operator?(0,D.jsx)(L,{}):(0,D.jsx)(D.Fragment,{children:(0,R().J)(n.operator)});if((0,i().Pq)(n))return"relation_contains"===n.operator?null:"relation_does_not_contain"===n.operator?(0,D.jsx)(L,{}):(0,D.jsx)(D.Fragment,{children:(0,R().J)(n.operator)});if((0,i().I_)(n))return"person_contains"===n.operator?null:"person_does_not_contain"===n.operator?(0,D.jsx)(L,{}):(0,D.jsx)(D.Fragment,{children:(0,R().J)(n.operator)});if((0,i().G)(n)){if("location_is"===n.operator)return null;if("location_is_not"===n.operator)return(0,D.jsx)(L,{})}else if((0,i().nM)(n)){if("date_is"===n.operator)return null;if("date_is_after"===n.operator)return(0,D.jsx)(l().sA,{defaultMessage:"After",id:"database.filterValue.dateType.dateIsAfter.title"});if("date_is_before"===n.operator)return(0,D.jsx)(l().sA,{defaultMessage:"Before",id:"database.filterValue.dateType.dateIsBefore.title"});if("date_is_on_or_after"===n.operator)return(0,D.jsx)(l().sA,{defaultMessage:"On or after",id:"database.filterValue.dateType.dateIsOnOrAfter.title"});if("date_is_on_or_before"===n.operator)return(0,D.jsx)(l().sA,{defaultMessage:"On or before",id:"database.filterValue.dateType.dateIsOnOrBefore.title"});if(!(0,i().Cw)(n))return(0,D.jsx)(D.Fragment,{children:(0,R().J)(n.operator)});{const e=n.value;if(!e.value||"exact"!==e.type||!(0,v().jS)(e.value))return(0,D.jsx)(D.Fragment,{children:(0,R().kz)(e)});if(e.value.start_date&&e.value.end_date)return null;if(e.value.start_date)return(0,D.jsx)(l().sA,{defaultMessage:"Starting",id:"database.filterValue.dateType.starting.title"});if(e.value.end_date)return(0,D.jsx)(l().sA,{defaultMessage:"Ending",id:"database.filterValue.dateType.ending.title"})}}else{if((0,i().uU)(n))return"verification_is"===n.operator?null:"verification_is_not"===n.operator?(0,D.jsx)(L,{}):(0,D.jsx)(D.Fragment,{children:(0,R().J)(n.operator)});(0,T().HB)(n)}}return null}function V(e){let{index:t}=e;return(0,D.jsx)("span",{style:{whiteSpace:"pre"},children:(0,D.jsx)(l().sA,{defaultMessage:", ",id:"database.filterValue.commaSeparator"})},t)}function N(e){let{propertyFilter:t,schema:o,parentStore:n,relatedCollectionAppConfigUri:r}=e;const{filter:s}=t,a=(0,i().s1)(s)?s.subfilter:s;if(!(0,i().gc)(a))return null;if((0,i().YH)(a)||(0,i().My)(a)){const e=a.value.value;if(void 0!==e)return(0,D.jsx)("span",{children:e})}else if((0,i().Ui)(a)){const e=a.value.value;if(!0===e)return(0,D.jsx)("span",{children:(0,D.jsx)(l().sA,{defaultMessage:"Checked",id:"database.filterValue.checkboxType.checked.title"})});if(!1===e)return(0,D.jsx)("span",{children:(0,D.jsx)(l().sA,{defaultMessage:"Unchecked",id:"database.filterValue.checkboxType.unchecked.title"})})}else{if((0,i().v0)(a)||(0,i().as)(a)){const e=(0,i().v0)(a)?(0,i().Zl)(a):(0,i().SM)(a),t=w().oE(e.map((e=>{let{value:t}=e;return t})));return 0===t.length?null:(0,D.jsx)("span",{children:(0,C().A)(t,(e=>(0,D.jsx)(V,{index:e})))})}if((0,i().H$)(a)){const e=(0,i().V6)(a),t=w().oE(e.map((e=>{let{value:t}=e;return t})));return 0===t.length?null:(0,D.jsx)("span",{children:(0,C().A)(t,(e=>(0,D.jsx)(V,{index:e})))})}if((0,i().Pq)(a)){const e=(0,i().Rh)(a),t=w().oE(e.map(((e,t)=>{if(!e.value)return null;const o=e.type;if("exact"===o){const t=F().Bv.createChildStore(n,{table:j().ev,id:e.value});return(0,D.jsx)(I().A,{style:{display:"inline"},store:t},e.value)}if("relative"===o){var i;if("builtin"===e.value.type)return r?(0,D.jsx)("span",{children:(0,D.jsx)(l().sA,{...null===(i=b().n$[r])||void 0===i||null===(i=i[e.value.variable])||void 0===i?void 0:i.messageDescriptor})},t):null;if("current_page_in_related_collection"===e.value.type)return(0,D.jsx)("span",{children:(0,D.jsx)(l().sA,{defaultMessage:"This page",id:"database.filterAndSort.currentPagePropertyValue.title"})},t)}else(0,T().HB)(o)})));return(0,D.jsx)(D.Fragment,{children:(0,C().A)(t,(e=>(0,D.jsx)(V,{index:e})))})}if((0,i().I_)(a))return(0,D.jsx)(U,{useFilter:a,parentStore:n});if((0,i().G)(a)){const e=(0,i().GK)(a),t=w().oE(e.map((e=>{if(e.value){const t=e.value,o=F().sk.createChildStore(n,{table:k().Vl,id:t});return(0,D.jsx)(I().A,{style:{display:"inline"},store:o},t)}})));return(0,D.jsx)(D.Fragment,{children:(0,C().A)(t,(e=>(0,D.jsx)(V,{index:e})))})}if((0,i().nM)(a)){const e=o[t.property],n=(e&&"date"===e.type?e.date_format:void 0)||v().vz;let r;if("exact"===a.value.type){const e=a.value;if(e.value)if((0,v().$P)(e.value))r=e.value;else if((0,v().jS)(e.value)){const t=(0,v().dq)(e.value);t&&(r=t.value)}}else if(!(0,i().Cw)(a))return(0,D.jsx)(D.Fragment,{children:(0,R().RR)(a.value)});if(r)return(0,D.jsx)(B().A,{style:{display:"inline"},value:r,dateFormat:n,shortenDateAndRange:!0})}else{if((0,i().uU)(a)){const e=(0,i().ms)(a).filter((e=>{let{value:t}=e;return Boolean(t)})).map(R().w0);return 0===e.length?null:(0,D.jsx)("span",{children:(0,C().A)(e,(e=>(0,D.jsx)(V,{index:e})))})}if((0,i().uf)(a))return null;(0,T().HB)(a)}}return null}function U(e){let{parentStore:t,useFilter:o}=e;const n=(0,l().tz)(),s=(0,i().Wf)(o),a=(0,r().K8)((()=>w().oE(s.map(((e,o)=>{if("relative"===e.type)return(0,D.jsx)("span",{children:(0,D.jsx)(l().sA,{defaultMessage:"Me",id:"database.filterValue.personType.firstPersonPropertyValue.title"})},o);if(e.value){const r=e.value;if(r.table===_().oo){const e=F().sk.createChildStore(t,{table:r.table,id:r.id});return(0,D.jsx)("span",{children:(0,M().c6)(n,e.getModel())},o)}if(r.table===A().GP){const e=F().sk.createChildStore(t,{table:r.table,id:r.id});return(0,D.jsx)("span",{children:(0,y().Hg)(e.getModel())},o)}}})))),[s,t,n]);return(0,D.jsx)(D.Fragment,{children:(0,C().A)(a,(e=>(0,D.jsx)(V,{index:e})))})}function z(e){let{id:t,context:s,collectionContextStore:y,collectionSettingsStore:v,onClick:C}=e;const b=(0,o(484714).v3)(),j=(0,o(401497).DP)(),{filter:A,isReadOnly:k}=(0,r().K8)((()=>{const e=function(e,t){const o=t.currentPropertyFiltersStore.state;return o.find((t=>t.id===e))}(t,y);return{filter:e,isReadOnly:Boolean(e&&(0,m().vu)(e.id))}}),[y,t]),_=(0,r().K8)((()=>{const e=y.localStateDiffStore.state;return e.filters.updated.includes(t)||e.filters.added.includes(t)}),[y,t]),M=(0,r().K8)((()=>y.collectionViewStore()),[y]),w=(0,r().O$)(y.normalizedSchemaStore),T=(0,r().K8)((()=>y.permissionScopesStore.state.canConfigureBlock),[y]),I=(0,r().K8)((()=>v.state.open),[v]),B=(0,r().K8)((()=>{var e;return A?null==y||null===(e=y.collectionStore())||void 0===e||null===(e=e.getSchema()[A.filter.property])||void 0===e?void 0:e.type:void 0}),[y,A]),R=(0,r().K8)((()=>A&&A.id===m().Oe),[A]),F=(0,n.useCallback)((e=>{e&&(0,o(253579).Rp)(e.target)||u().os({collectionSettingsStore:v})}),[v]),L=(0,n.useCallback)((()=>{var e;C&&C(null==A?void 0:A.id),A&&(v.state.open?u().os({collectionSettingsStore:v}):u().R8({collectionSettingsStore:v,item:{type:"filter"}}),(0,a().X)({environment:b,collectionContextStore:y,action:"click_property_filter",original_view_type:void 0,property_type:null==y||null===(e=y.collectionStore())||void 0===e||null===(e=e.getSchema()[A.filter.property])||void 0===e?void 0:e.type}))}),[y,v,b,A,C]),K=(0,n.useCallback)((()=>{u().os({collectionSettingsStore:v})}),[v]),O=(0,n.useCallback)((e=>{var t;if(!A)return;const n=null===(t=y.remoteResultStore.state)||void 0===t?void 0:t.sizeHint,r=g().default.DO_NOT_USE_markLegacy("collections.update_filter_lag");g().default.DO_NOT_USE_measureAfterNextFlushLegacy(r,{environment:b,getData:()=>o(476492).K6({from:"property_filter",property_type:B,collectionContextStore:y,sizeHintAtStart:n})});const i=A.filter,l=y.currentPropertyFiltersStore.state.map((t=>{if(t.id===A.id){return{...A,filter:{...i,filter:e}}}return t}));c().IU({environment:b,collectionContextStore:y,temporaryState:{...y.temporaryStateStore.state,propertyFilters:{value:l}}}),(0,a().X)({environment:b,collectionContextStore:y,action:"update_property_filter",original_view_type:void 0,property_type:B})}),[y,b,A,B]),V=(0,o(395361).Y)(O,250),N=(0,n.useCallback)((()=>{var e;if(!A)return;const t=y.currentPropertyFiltersStore.state.filter((e=>e.id!==A.id));c().IU({environment:b,collectionContextStore:y,temporaryState:{...y.temporaryStateStore.state,propertyFilters:{value:t}}}),(0,a().X)({environment:b,collectionContextStore:y,action:"delete_property_filter",original_view_type:void 0,property_type:null==y||null===(e=y.collectionStore())||void 0===e||null===(e=e.getSchema()[A.filter.property])||void 0===e?void 0:e.type})}),[y,b,A]),U=(0,n.useCallback)((()=>{var e;if(!A)return;const{combinatorFilter:t,propertyFilters:n}=(0,m().$4)(y,A);c().IU({environment:b,collectionContextStore:y,temporaryState:{...y.temporaryStateStore.state,propertyFilters:{value:n},combinatorFilter:{value:t}}});const r=s===o(300089).aV.FilterBar?y.filterBarCombinatorFilterSettingsStore:y.filterOptionsCombinatorFilterSettingsStore;u().R8({collectionSettingsStore:r,item:{type:"filter"}}),(0,a().X)({environment:b,collectionContextStore:y,action:"merge_filter_into_combinator",property_type:null==y||null===(e=y.collectionStore())||void 0===e||null===(e=e.getSchema()[A.filter.property])||void 0===e?void 0:e.type})}),[y,s,b,A]),z=(0,n.useCallback)(((e,t)=>{if(!M||!A)return null;const n=A.filter,r=!(0,i().t_)(n),l=w[n.property],s=(null==l?void 0:l.icon)&&(0,o(278238).T8)(l.icon),a=(0,o(700251).xI)({size:"sm",type:s?"custom":"system",isMobile:b.device.isMobile});return(0,D.jsx)(o(56394).A,{icon:l&&(0,D.jsx)(o(743176).Ay,{type:l.type,icon:l.icon,size:a,theme:j,style:{fill:"currentColor",marginRight:5}}),title:r?(0,D.jsx)(P,{propertyFilter:n,schema:w,style:E(),parentStore:M}):(0,D.jsx)("span",{style:E(),children:null==l?void 0:l.name}),on:r,hasDiff:_,disabled:t,hideChevron:t,onClick:e=>((0,S().SQ)({event:e,context:S().y$.CollectionSettingsClick,callback:L}),e.preventDefault(),!1),...e},A.id)}),[M,b,A,L,_,w,j]),H=(0,n.useCallback)((()=>R?(0,D.jsx)(p().A,{placement:x().W.Bottom,render:e=>z(e,!0),renderTooltip:()=>(0,D.jsx)(l().sA,{id:"database.filterBarPropertyFilter.cannotConfigureSubitemDisplayMode",defaultMessage:"To modify this filter, first change the subitem display mode."})}):(0,D.jsx)(p().A,{placement:x().W.Bottom,render:e=>z(e,!0),renderTooltip:()=>(0,D.jsx)(l().sA,{id:"database.filterBarPropertyFilter.cannotConfigure",defaultMessage:"This filter cannot be modified on this view."})})),[z,R]),W=(0,n.useCallback)((()=>{if(!A)return;const e=A.filter;return M?(0,D.jsx)(d().td,{collectionViewId:M.id,propertyFilter:e,schema:w,parentStore:M,onChange:O,onChangeDebounced:V,onClose:K,onDelete:N,onAddToCombinatorFilter:U,context:d().mL.PropertyFilter,userCanConfigureFilters:T,allowRelativeDateFilter:!0,allowRelativePersonFilter:!0,collectionContextStore:y}):void 0}),[T,y,M,A,U,N,K,V,O,w]);return k?H():(0,D.jsx)(o(14235).Ay,{popupType:b.device.isMobile?f().n.SlideUp:f().n.Popup,placementToOrigin:h().UV.Bottom,alignmentToOrigin:h().MY.Start,open:I,origin:k?H():z(void 0,!1),onDismiss:F,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,render:W,trapFocus:!0})}const H=n.memo(z,o(821062).A);function E(){return{maxWidth:180,...s().RC}}},199734:(e,t,o)=>{o.d(t,{U:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("collectionSearch",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M0 6.35938C0 9.86719 2.85156 12.7188 6.35938 12.7188C7.66406 12.7188 8.85938 12.3203 9.85938 11.6406L13.4531 15.2344C13.6719 15.4609 13.9766 15.5625 14.2812 15.5625C14.9453 15.5625 15.4219 15.0625 15.4219 14.4141C15.4219 14.1016 15.3125 13.8125 15.1016 13.5938L11.5312 10.0156C12.2734 8.99219 12.7188 7.72656 12.7188 6.35938C12.7188 2.85156 9.86719 0 6.35938 0C2.85156 0 0 2.85156 0 6.35938ZM1.65625 6.35938C1.65625 3.76562 3.75781 1.65625 6.35938 1.65625C8.95312 1.65625 11.0625 3.76562 11.0625 6.35938C11.0625 8.95312 8.95312 11.0625 6.35938 11.0625C3.75781 11.0625 1.65625 8.95312 1.65625 6.35938Z"})})},244091:(e,t,o)=>{o.d(t,{Ni:()=>s,U7:()=>l,rY:()=>a});o(296540);var n=()=>o(959013),r=()=>o(956363),i=o(474848);function l(e){let{origin:t}=e;return(0,i.jsx)(r().B,{origin:t,placementToOrigin:"bottom",style:{minWidth:240},tutorialId:"sprints-onboarding",tutorialStepId:"current-sprint-view-tooltip",header:(0,i.jsx)(n().sA,{id:"SprintsBoardOnboardingTooltip.SprintBoardView.header",defaultMessage:"Manage the current sprint"}),content:(0,i.jsx)(n().sA,{id:"SprintsBoardOnboardingTooltip.SprintBoardView.content",defaultMessage:"Add tasks and update task status as your team makes progress during the sprint."})})}function s(e){let{origin:t}=e;return(0,i.jsx)(r().B,{origin:t,placementToOrigin:"bottom",tutorialId:"sprints-onboarding",tutorialStepId:"sprint-task-tooltip",header:(0,i.jsx)(n().sA,{id:"SprintsBoardOnboardingTooltip.SprintBoardItem.header",defaultMessage:"Change tasks status"}),content:(0,i.jsx)(n().sA,{id:"SprintsBoardOnboardingTooltip.SprintBoardItem.content",defaultMessage:'Drag this task to "In progress".'})})}function a(e){let{origin:t}=e;return(0,i.jsx)(r().B,{origin:t,placementToOrigin:"bottom",style:{minWidth:240},tutorialId:"sprints-onboarding",tutorialStepId:"complete-sprint-button-tooltip",header:(0,i.jsx)(n().sA,{id:"SprintsBoardOnboardingTooltip.CompleteSprintButton.header",defaultMessage:"Complete this sprint"}),content:(0,i.jsx)(n().sA,{id:"SprintsBoardOnboardingTooltip.CompleteSprintButton.content",defaultMessage:"Click the button when you're done with this sprint."})})}},300089:(e,t,o)=>{o.d(t,{N9:()=>te,aV:()=>Z,he:()=>ie});o(898992),o(354520),o(672577),o(803949),o(581454);var n=o(296540),r=()=>o(395361),i=()=>o(484714),l=()=>o(56366),s=()=>o(401497),a=()=>o(199734),c=()=>o(863330),u=()=>o(725649),d=()=>o(959013),p=()=>o(496603),m=()=>o(436696),S=()=>o(187899),g=()=>o(686526),x=()=>o(778417),f=()=>o(725614),h=()=>o(59400),y=()=>o(128941),v=()=>o(145214),C=()=>o(493823),b=()=>o(594739),j=()=>o(439264),A=()=>o(805751),k=()=>o(623580),_=()=>o(14235),M=()=>o(2143),w=()=>o(59822),T=()=>o(10323),I=()=>o(109488),B=()=>o(873050),R=()=>o(525432),F=()=>o(253579),D=()=>o(963589),P=()=>o(756279),L=()=>o(463830),K=()=>o(700250),O=()=>o(17090),V=()=>o(424141),N=()=>o(404779),U=()=>o(519839),z=()=>o(958832),H=()=>o(194440),E=()=>o(189048),W=()=>o(134421),Y=o(474848);const J=(0,o(340498).wt)("arrowUpThick",{viewBox:"0 0 16 16",svg:(0,Y.jsx)("path",{d:"M7.99316 14.6133C8.58789 14.6133 8.98438 14.2031 8.98438 13.5879V6L8.92285 4.5166L10.2969 6.10254L11.835 7.63379C12.0195 7.81836 12.252 7.94141 12.5459 7.94141C13.0791 7.94141 13.4824 7.54492 13.4824 6.98438C13.4824 6.72461 13.3799 6.48535 13.1748 6.27344L8.72461 1.82324C8.54004 1.63184 8.2666 1.52246 7.99316 1.52246C7.72656 1.52246 7.44629 1.63184 7.26172 1.82324L2.81836 6.27344C2.61328 6.48535 2.51074 6.72461 2.51074 6.98438C2.51074 7.54492 2.91406 7.94141 3.44727 7.94141C3.74805 7.94141 3.98047 7.81836 4.1582 7.63379L5.69629 6.10254L7.07031 4.5166L7.00195 6V13.5879C7.00195 14.2031 7.40527 14.6133 7.99316 14.6133Z"})});var $=()=>o(284371),q=()=>o(377586),X=()=>o(56394);function G(e){let{collectionContextStore:t,collectionSettingsStore:o}=e;const{device:r}=(0,i().v3)(),s=(0,l().K8)((()=>o.state.open),[o]),a=(0,n.useCallback)((e=>{e&&(0,F().Rp)(e.target)||g().os({collectionSettingsStore:o})}),[o]),c=(0,n.useCallback)((()=>(0,Y.jsx)(h().m$,{context:R().Bd.FilterBar,collectionContextStore:t,collectionSettingsStore:o,hideDesktopHeader:!0})),[t,o]);return(0,n.useEffect)((()=>()=>g().os({collectionSettingsStore:o})),[]),(0,Y.jsx)(_().Ay,{popupType:r.isMobile?q().n.SlideUp:q().n.Popup,placementToOrigin:K().UV.Bottom,alignmentToOrigin:K().MY.Start,open:s,origin:(0,Y.jsx)(Q,{collectionContextStore:t,collectionSettingsStore:o}),onDismiss:a,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,render:c})}function Q(e){let{collectionContextStore:t,collectionSettingsStore:o}=e;const r=(0,i().v3)(),[a,c,u,p]=(0,l().K8)((()=>[t.currentSortsStore.state,t.localStateDiffStore.state,t.normalizedSchemaStore.state,t.permissionScopesStore.state]),[t]),S=a[0],x=S?u[S.property]:void 0,f=(0,n.useCallback)((()=>{(0,m().X)({environment:r,collectionContextStore:t,action:"click_sort"}),g().R8({collectionSettingsStore:o,item:{type:"sort"}})}),[t,o,r]),h=(0,s().IS)((e=>({arrowIcon:{width:12,marginRight:4,fill:e.blueColor},arrowsIcon:{width:16,marginRight:4,fill:e.blueColor},title:{marginTop:-1,maxWidth:220,...$().RC}})),[]);let y;return y=1===a.length?S&&"descending"===S.direction?(0,E().u)(h.arrowIcon):J(h.arrowIcon):(0,W().X)(h.arrowsIcon),(0,Y.jsx)(X().A,{on:!0,hasDiff:Boolean(p.canConfigureBlock&&c.sorts),icon:y,title:(0,Y.jsx)("span",{style:h.title,children:1===a.length&&x?x.name:(0,Y.jsx)(d().sA,{defaultMessage:"{sortCount} sorts",id:"database.filterBar.sorts.label",values:{sortCount:a.length}})}),onClick:f})}let Z=function(e){return e[e.FilterBar=0]="FilterBar",e[e.SettingsFilters=1]="SettingsFilters",e}({});const ee=o(757695).default.createClass({open:!1,stack:[]},{name:"CreateFilterSettingsStore"});function te(e){var t,o;let{collectionContextStore:r,showHoverActionsStore:a,createFilterSettingsStore:c,saveControlMoreActionsButtonPopupStore:p}=e;const m=(0,i().WS)(),S=(0,s().DP)(),g=(0,D().X)("db_ux_simplification_next"),x=(0,l().uB)(p,L().A),f=(0,l().uB)(c,ee),h=(0,l().K8)((()=>(0,B().y_)(r)),[r]),y=(0,l().K8)((()=>m&&r.searchOpenStore.state),[m,r]),v=(0,l().O$)(r.currentPropertyFiltersStore),C=(0,l().O$)(r.currentSortsStore),b=(0,l().K8)((()=>r.filterBarSortSettingsStore.state.open),[r]),j=C.length>0||b,A=(0,l().O$)(r.permissionScopesStore),k=(0,l().K8)((()=>r.isUnlistedViewStore.state),[r]),_=(0,l().K8)((()=>A.canConfigureBlock||k?r.currentCombinatorFilterStore.state:void 0),[A,r,k]),I=(0,l().uB)(void 0,O().A),R=null===(t=(0,U().Oz)(r))||void 0===t?void 0:t.background,F=(0,l().K8)((()=>"collectionSettings"===r.contextType),[r]),K=(0,l().K8)((()=>r.collectionViewBlockStore()),[r]),N=(0,l().K8)((()=>r.collectionStore()),[r]),z=(0,V().y)(K),H=(0,l().K8)((()=>{var e,t;if(!z||!N)return;const o=null===(e=z.getModel())||void 0===e?void 0:e.getData();return null==o||null===(t=o.modules)||void 0===t?void 0:t.filter((e=>"database"===e.type)).find((e=>{var t;return(null===(t=(0,u().DK)(e.state))||void 0===t||null===(t=t.pointer)||void 0===t?void 0:t.id)===N.id}))}),[z,N]),E=(0,n.useCallback)((e=>{r.filtersBarOpenStore.setState(!0)}),[r]),W=(0,s().IS)((e=>({container:{width:"100%",zIndex:86,...g&&{borderTop:`1px solid ${e.regularDividerColor}`,marginTop:4},...k&&{paddingLeft:16,paddingRight:16,borderTop:"none"}}})),[g,k]);return(0,Y.jsxs)("div",{style:W.container,onClick:E,tabIndex:0,role:"button",children:[F&&(null===(o=(0,u().DK)(null==H?void 0:H.state))||void 0===o?void 0:o.filter)&&!h&&(0,Y.jsx)("div",{style:{fontSize:14,color:S.lightTextColor,paddingTop:6},children:(0,Y.jsx)(d().sA,{id:"database.filterBar.collectionSettings.workflowAppFilter",defaultMessage:"This filter is used by the app’s Functions"})}),(0,Y.jsxs)("div",{style:{display:"flex",paddingTop:4},children:[y&&(0,Y.jsx)(ae,{collectionContextStore:r}),!y&&(0,Y.jsxs)("div",{style:{position:"relative",flexGrow:0,overflow:"hidden"},children:[(0,Y.jsx)(M().H,{store:I,type:P().A.X,style:{display:"flex",alignItems:"center",paddingTop:8,paddingBottom:8},children:m?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(ce,{collectionContextStore:r}),j&&(0,Y.jsx)(ne,{collectionContextStore:r}),j&&!m&&(0,Y.jsx)(ie,{}),_&&(0,Y.jsx)(oe,{collectionContextStore:r}),(0,Y.jsx)(se,{collectionContextStore:r,propertyFilters:v,createFilterSettingsStore:f}),(0,Y.jsx)(pe,{collectionContextStore:r,showHoverActionsStore:a,createFilterSettingsStore:f})]}):(0,Y.jsxs)(Y.Fragment,{children:[j&&(0,Y.jsx)(ne,{collectionContextStore:r}),j&&!m&&(0,Y.jsx)(ie,{}),_&&(0,Y.jsx)(oe,{collectionContextStore:r}),(0,Y.jsx)(se,{collectionContextStore:r,createFilterSettingsStore:f,propertyFilters:v}),(0,Y.jsx)(pe,{collectionContextStore:r,showHoverActionsStore:a,createFilterSettingsStore:f})]})}),!m&&(0,Y.jsx)(w().A,{store:I,backgroundColor:R})]}),(0,Y.jsxs)("div",{style:{display:"flex",alignItems:"start",paddingTop:6,marginLeft:"auto",flexShrink:0},children:[!m&&h&&(0,Y.jsx)(ue,{collectionContextStore:r,showHoverActionsStore:a,saveControlMoreActionsButtonPopupStore:x}),!m&&(0,Y.jsx)(T().A,{collectionContextStore:r})]})]}),m&&!y&&(0,Y.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[h&&(0,Y.jsx)(ue,{collectionContextStore:r,showHoverActionsStore:a,saveControlMoreActionsButtonPopupStore:x}),(0,Y.jsx)(T().A,{collectionContextStore:r})]})]})}function oe(e){let{collectionContextStore:t}=e;return(0,Y.jsx)(z().l,{context:Z.FilterBar,collectionSettingsStore:t.filterBarCombinatorFilterSettingsStore,collectionContextStore:t})}function ne(e){let{collectionContextStore:t}=e;return(0,Y.jsx)(G,{collectionContextStore:t,collectionSettingsStore:t.filterBarSortSettingsStore},"sort")}function re(e){let{filter:t,collectionContextStore:o,onClick:n}=e;const r=(0,l().K8)((()=>o.getFilterBarItemSettingsStore(t)),[o,t]);return(0,Y.jsx)(H().A,{id:t.id,context:Z.FilterBar,collectionContextStore:o,collectionSettingsStore:r,onClick:n},t.id)}function ie(){const e=(0,s().DP)();return(0,Y.jsx)("div",{style:{borderRight:`1px solid ${e.regularDividerColor}`,height:24,marginRight:12,marginLeft:8}})}function le(e){e.searchOpenStore.setState(!1),e.searchQueryStore.setState("")}function se(e){let{propertyFilters:t,collectionContextStore:o,createFilterSettingsStore:r}=e;const s=(0,i().v3)(),a=(0,l().O$)(o.permissionScopesStore),[c]=(0,l().K8)((()=>[o.currentPropertyFiltersStore.state]),[o]),u=(0,n.useCallback)((e=>{g().os({collectionSettingsStore:r}),g().os({collectionSettingsStore:o.filterBarSortSettingsStore}),g().os({collectionSettingsStore:o.filterBarCombinatorFilterSettingsStore}),c.filter((t=>!e||t.id!==e)).forEach((e=>{const t=o.getFilterBarItemSettingsStore(e);g().os({collectionSettingsStore:t})}))}),[o,r,c]);if(a.canConfigureBlock){const e=t.map((e=>e.id));return(0,Y.jsx)(j().Ay,{direction:"horizontal",keys:e,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,renderKey:e=>{const n=t.find((t=>t.id===e));if(n)return(0,Y.jsx)(re,{collectionContextStore:o,filter:n,onClick:u})},style:{display:"flex",flexShrink:0},onDrop:e=>function(e,t,o){if(!o.collectionViewBlockStore())return;const n=o.currentPropertyFiltersStore.state,r=p().oE(e.map((e=>n.find((t=>t.id===e)))));S().IU({environment:t,collectionContextStore:o,temporaryState:{...o.temporaryStateStore.state,propertyFilters:{value:r}}}),(0,m().X)({environment:t,collectionContextStore:o,action:"reorder_filters"})}(e,s,o)})}return(0,Y.jsx)(Y.Fragment,{children:t.map((e=>(0,Y.jsx)(re,{filter:e,collectionContextStore:o,onClick:u},e.id)))})}function ae(e){let{collectionContextStore:t}=e;const o=(0,d().tz)(),c=(0,s().DP)(),u=(0,i().v3)(),p=(0,l().O$)(t.searchQueryStore),m=(0,n.useCallback)((e=>{t.searchQueryStore.setState(e.target.value)}),[t]),S=(0,r().Y)(m,250),g=(0,D().X)("db_ux_simplification_next");return(0,Y.jsx)(A().A,{debugName:"CollectionViewFilterBar",capture:!0,children:(0,Y.jsx)(I().A,{capture:!0,render:e=>(0,Y.jsx)("div",{...e,style:{width:"100%",paddingTop:u.device.isMobile?8:12,paddingBottom:2},children:(0,Y.jsx)(X().A,{wrapStyle:{width:"100%"},innerStyle:{width:"100%",border:"none"},icon:(0,a().U)({width:g?16:14,fill:c.mediumIconColor,marginRight:8}),hideChevron:!0,title:(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(k().A,{format:k().C.Transparent,value:p,placeholder:o.formatMessage({defaultMessage:"Type to search…",id:"database.filterBar.mobileSearch.placeholder"}),onChange:S,autoComplete:"on",autoCorrect:"on",onBlur:()=>function(e){e.searchQueryStore.state||le(e)}(t),onClearButtonClick:()=>le(t),showClearButton:!0,focus:!u.device.isIOS||void 0,focusInitial:!0,inputStyle:{height:"100%"}}),(0,Y.jsx)(b().A,{show:!0})]})})})})})}function ce(e){let{collectionContextStore:t}=e;const o=(0,s().DP)(),n=(0,i().v3)(),r=(0,D().X)("db_ux_simplification_next");return"chart"===(0,l().K8)((()=>t.getViewType()),[t])?null:(0,Y.jsx)(X().A,{wrapStyle:{display:"flex",alignItems:"center"},innerStyle:{border:"none"},icon:(0,a().U)({width:r?16:14,fill:o.mediumIconColor}),hideChevron:!0,onClick:()=>function(e,t){f().clear({preventDismissMobileKeyboard:!0,environment:e}),x().IU({preventDismissMobileKeyboard:!0,environment:e}),(0,N().y)(),t.searchOpenStore.setState(!0),t.searchQueryStore.setState(""),(0,m().X)({environment:e,collectionContextStore:t,action:"click_mobile_search"})}(n,t)},"search")}function ue(e){let{collectionContextStore:t,showHoverActionsStore:o,saveControlMoreActionsButtonPopupStore:n}=e;return(0,Y.jsx)(y().Ay,{context:y().$J.FilterBar,collectionContextStore:t,showHoverActionsStore:o,moreActionsButtonPopupStore:n})}function de(e){let{collectionContextStore:t,createFilterSettingsStore:o}=e;return(0,Y.jsx)(h().m$,{context:R().Bd.FilterBar,collectionContextStore:t,collectionSettingsStore:o,hideDesktopHeader:!0})}function pe(e){let{collectionContextStore:t,showHoverActionsStore:o,createFilterSettingsStore:r}=e;const s=(0,i().v3)(),a=(0,n.useCallback)((e=>function(e,t){e&&(0,F().Rp)(e.target)||g().os({collectionSettingsStore:t})}(e,r)),[r]),u=(0,n.useCallback)((()=>(0,Y.jsx)(de,{collectionContextStore:t,createFilterSettingsStore:r})),[t,r]),p=(0,n.useCallback)((()=>function(e,t,o){(0,m().X)({environment:e,collectionContextStore:t,action:"click_new_filter"}),g().R8({collectionSettingsStore:o,item:{type:"createFilter"}})}(s,t,r)),[s,t,r]),S=(0,l().K8)((()=>r.state.open),[r]),x=(0,l().K8)((()=>o.state||S),[o,S]);return(0,Y.jsx)(_().Ay,{open:S,placementToOrigin:K().UV.Bottom,alignmentToOrigin:K().MY.Start,popupType:s.device.isMobile?_().nl.SlideUp:_().nl.Popup,origin:(0,Y.jsx)(v().A,{tag:C().p,visible:x,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},icon:c().plusSmallIcon,size:"sm",isLightGray:!0,hovered:S,onClick:p,style:{fontSize:14,borderRadius:12,paddingLeft:5,paddingRight:9,marginRight:12},children:(0,Y.jsx)(d().sA,{defaultMessage:"Filter",id:"database.filterBar.addButton.title"})}),render:u,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,onDismiss:a})}},457688:(e,t,o)=>{o.d(t,{A:()=>g,S:()=>m});var n=o(296540),r=()=>o(484714),i=()=>o(56366),l=()=>o(764880),s=()=>o(959013),a=()=>o(962730),c=()=>o(554509),u=()=>o(453697),d=o(474848);const p=n.forwardRef(((e,t)=>{const{actor:n,userTitle:c,defaultUserTitle:p="name_only",defaultUserCaption:g,useEmailAsTooltip:x,tooltip:f,tooltipPlacement:h,hoveredStyle:y,disabledFeedback:v,customUserTitleStyles:C}=e,b=(0,r().v3)(),j=(0,s().tz)(),A=(0,i().K8)((()=>n.asActor&&n.asActor.getDisplayName(j)),[n,j]),{email:k,showEmail:_}=(0,i().K8)((()=>{const e=n.asActor&&n.isUser()?n.email:void 0;return{email:e,showEmail:A!==e}}),[n,A]),M=x&&k?k:f;let w=20;b.device.isMobile&&(w=24),"email"===g&&(w=32);const T=("name_and_email"===p||"name_and_email_unless_right"===p&&!Boolean(e.right))&&void 0===g?(0,d.jsx)(S,{actor:null==n?void 0:n.asActor,customStyles:C}):(0,d.jsx)(m,{bold:"name_only_semibold"===p,customStyles:C,actor:null==n?void 0:n.asActor}),I=c??T,B="email"===g&&_?k:void 0;let R;return(0,l().H3)(n)?R=(0,d.jsx)(o(256863).A,{botValue:null==n?void 0:n.asActor,size:w}):(0,l().ps)(n)?R=(0,d.jsx)(u().A,{userValue:null==n?void 0:n.asActor,size:w}):(0,l().h2)(n)?R=(0,d.jsx)(u().A,{userValue:void 0,size:w}):(0,o(534177).HB)(n),(0,d.jsx)(o(859428).A,{placement:h??a().W.Bottom,alignment:a().C.Start,textWrap:!0,render:n=>(0,d.jsx)(o(760217).A,{...(0,o(553965).A)(n,e),icon:R,title:I,disabledFeedback:v,className:"notranslate",right:e.right,ref:t,hoveredStyle:y,caption:B}),disableTooltip:!M,renderTooltip:()=>M})}));function m(e){const{actor:t,bold:o,customStyles:n}=e,l=(0,r().v3)(),a=(0,s().tz)(),u=(0,i().K8)((()=>t&&t.id===l.currentUser.id),[l,t]),p=(0,i().K8)((()=>t&&t.getDisplayName(a)),[t,a]),m=o?"UIRegular-14px/Semibold":"UIRegular-14px/Regular";return u?(0,d.jsx)(s().sA,{id:"UserMenuItem.fullName.authorLabel",defaultMessage:"<author>{fullName}</author> <you>(You)</you>",values:{author:e=>(0,d.jsx)(c().D,{as:"span",styleName:m,customStyles:n,children:e}),fullName:p,you:e=>(0,d.jsx)(c().D,{as:"span",colorName:"secondary",styleName:"UIRegular-14px/Regular",customStyles:n,children:e})}}):p?(0,d.jsx)(c().D,{styleName:m,customStyles:n,children:p}):(0,d.jsx)(c().D,{styleName:m,customStyles:n,children:(0,d.jsx)(s().sA,{id:"UserMenuItem.fullName.unknownAuthorLabel",defaultMessage:"Unknown author"})})}function S(e){const{actor:t,customStyles:o}=e,n=(0,s().tz)(),r=(0,i().K8)((()=>t&&t.getDisplayName(n)),[t,n]),{email:l,showEmail:a}=(0,i().K8)((()=>{const e=t&&t.asActor&&t.isUser()?t.email:void 0;return{email:e,showEmail:r!==e}}),[t,r]);return r?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c().D,{styleName:"UIRegular-14px/Semibold",customStyles:o,children:r}),a&&(0,d.jsx)(c().D,{styleName:"UIRegular-14px/Regular",customStyles:o,children:l})]}):(0,d.jsx)(c().D,{styleName:"UIRegular-14px/Semibold",customStyles:o,children:(0,d.jsx)(s().sA,{id:"UserMenuItem.fullName.unknownAuthorLabel",defaultMessage:"Unknown author"})})}p.displayName="UserMenuItem";const g=p},464699:(e,t,o)=>{o.d(t,{b:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("plusThick",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},516672:(e,t,o)=>{o.d(t,{S:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("filter",{viewBox:"0 0 16 16",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4C2 3.58579 2.33579 3.25 2.75 3.25H13.25C13.6642 3.25 14 3.58579 14 4C14 4.41421 13.6642 4.75 13.25 4.75H2.75C2.33579 4.75 2 4.41421 2 4Z"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.75 8C3.75 7.58579 4.08579 7.25 4.5 7.25H11.5C11.9142 7.25 12.25 7.58579 12.25 8C12.25 8.41421 11.9142 8.75 11.5 8.75H4.5C4.08579 8.75 3.75 8.41421 3.75 8Z"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 12C5.5 11.5858 5.83579 11.25 6.25 11.25H9.75C10.1642 11.25 10.5 11.5858 10.5 12C10.5 12.4142 10.1642 12.75 9.75 12.75H6.25C5.83579 12.75 5.5 12.4142 5.5 12Z"})]})})},566910:(e,t,o)=>{o.d(t,{e:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"m4.897 3.086-.122-.143a.625.625 0 0 0-.95.814l1.347 1.57c-1.762.91-3.195 2.304-4.083 3.997a1.47 1.47 0 0 0 0 1.362c1.61 3.07 5.011 5.155 8.911 5.155 1.282 0 2.51-.225 3.637-.637l1.588 1.853a.625.625 0 0 0 1.042-.67L4.989 3.229a.6.6 0 0 1-.093-.143M2.194 9.905c.807-1.538 2.15-2.807 3.816-3.599L7.4 7.928a3.326 3.326 0 0 0 4.252 4.961l1.107 1.292a9.4 9.4 0 0 1-2.76.41c-3.459 0-6.42-1.848-7.805-4.486a.22.22 0 0 1 0-.2m6.696.097q0-.151.039-.29l1.194 1.393q-.06.007-.124.007a1.11 1.11 0 0 1-1.109-1.11m7.012 4.038a9.4 9.4 0 0 0 3.01-3.354 1.47 1.47 0 0 0 0-1.362C17.302 6.254 13.9 4.169 10 4.169c-.805 0-1.588.089-2.339.257l.94 1.096a9.5 9.5 0 0 1 1.4-.103c3.458 0 6.42 1.848 7.804 4.486a.22.22 0 0 1 0 .2 8.14 8.14 0 0 1-2.722 2.98z"}),(0,n.jsx)("path",{d:"M13.205 10.893a3.33 3.33 0 0 0-3.596-4.194z"})]})},i=(0,o(340498).wt)("eyeSlash",r)},617668:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,plusIcon:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M10.625 3.75a.625.625 0 1 0-1.25 0v5.625H3.75a.625.625 0 1 0 0 1.25h5.625v5.625a.625.625 0 1 0 1.25 0v-5.625h5.625a.625.625 0 1 0 0-1.25h-5.625z"})},r=(0,o(340498).wt)("plus",n)},641514:(e,t,o)=>{o.d(t,{A:()=>a});o(296540);var n=()=>o(484714),r=()=>o(377586),i=()=>o(957986),l=()=>o(14235),s=o(474848);function a(e){const{isMobile:t}=(0,n().Y0)();return t?(0,s.jsx)(l().Ay,{ariaLabel:e.ariaLabel,open:e.isOpen,popupType:r().n.SlideUp,origin:e.origin,onDismiss:e.onDismiss,render:e.render,style:e.style}):(0,s.jsx)(i().A,{ariaLabel:e.ariaLabel,open:e.isOpen,preventHideChildrenWhileOpening:!0,render:e.render,onDismiss:e.onDismiss,style:e.style,innerStyle:e.innerStyle,showCloseIcon:e.showCloseIcon})}},722496:(e,t,o)=>{o.d(t,{c:()=>i});var n=o(296540);const r=new Map;function i(e){const t=!r.get(e),o=(0,n.useRef)(t);return o.current&&r.set(e,!0),(0,n.useEffect)((()=>()=>{o.current&&r.set(e,!1)}),[e]),o.current}},736767:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),r=o(474848);function i(e,t){return(0,r.jsx)(o(678553).A,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const l=(0,n.forwardRef)(i)},863330:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,plusSmallIcon:()=>r});o(296540);const n={viewBox:"0 0 16 16",svg:(0,o(474848).jsx)("path",{d:"M8 2.3a.7.7 0 0 0-.7.7v4.3H3a.7.7 0 1 0 0 1.4h4.3V13a.7.7 0 1 0 1.4 0V8.7H13a.7.7 0 1 0 0-1.4H8.7V3a.7.7 0 0 0-.7-.7"})},r=(0,o(340498).wt)("plusSmall",n)},958832:(e,t,o)=>{o.d(t,{l:()=>b});o(898992),o(803949);var n=o(296540),r=()=>o(484714),i=()=>o(56366),l=()=>o(401497),s=()=>o(516672),a=()=>o(959013),c=()=>o(284371),u=()=>o(436696),d=()=>o(187899),p=()=>o(686526),m=()=>o(59400),S=()=>o(14235),g=()=>o(525432),x=()=>o(753199),f=()=>o(253579),h=()=>o(377586),y=()=>o(700250),v=()=>o(56394),C=o(474848);function b(e){let{collectionContextStore:t,collectionSettingsStore:o}=e;const l=(0,r().v3)(),[s,a]=(0,i().K8)((()=>[o.state.open,t.currentCombinatorFilterStore.state]),[t,o]),c=(0,n.useCallback)((()=>(0,C.jsx)(m().m$,{context:g().Bd.FilterBar,collectionContextStore:t,collectionSettingsStore:o,hideDesktopHeader:!0})),[t,o]),u=(0,n.useCallback)((e=>{var n;e&&(0,f().Rp)(e.target)||(p().os({collectionSettingsStore:o}),a&&0===(null===(n=a.filters)||void 0===n?void 0:n.length)&&d().IU({environment:l,collectionContextStore:t,temporaryState:{...t.temporaryStateStore.state,combinatorFilter:{value:void 0}}}))}),[t,o,l,a]);return(0,n.useEffect)((()=>()=>p().os({collectionSettingsStore:o})),[]),(0,C.jsx)(S().Ay,{popupType:l.device.isMobile?h().n.SlideUp:h().n.Popup,placementToOrigin:y().UV.Bottom,alignmentToOrigin:y().MY.Start,open:s,origin:(0,C.jsx)(j,{collectionContextStore:t,collectionSettingsStore:o}),onDismiss:u,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,render:c})}function j(e){var t;let{collectionContextStore:o,collectionSettingsStore:d}=e;const m=(0,r().v3)(),S=(0,l().IS)((e=>({icon:{width:void 0,height:m.device.isMobile?14:12,fill:e.blueColor,marginRight:6},title:{maxWidth:180,...c().RC}})),[m.device]),[g,f]=(0,i().K8)((()=>[Boolean(o.localStateDiffStore.state.combinatorFilter),o.currentCombinatorFilterStore.state]),[o]),h=(0,n.useCallback)((()=>{if(!f)return;o.currentPropertyFiltersStore.state.forEach((e=>{const t=o.getFilterOptionsItemSettingsStore(e);p().os({collectionSettingsStore:t})})),p().R8({collectionSettingsStore:d,item:{type:"filter"}}),(0,u().X)({environment:m,collectionContextStore:o,action:"click_combinator_filter"})}),[o,d,m,f]);return f?(0,C.jsx)(v().A,{icon:(0,s().S)(S.icon),title:(0,C.jsx)("span",{style:S.title,children:(0,C.jsx)(a().sA,{defaultMessage:"{ruleCount, plural, one {{ruleCount} rule} other {{ruleCount} rules}}",id:"database.filterBar.advancedFilterRulesCount.title",values:{ruleCount:(null===(t=f.filters)||void 0===t?void 0:t.length)||0}})}),on:!0,hasDiff:g,onClick:e=>(0,x().SQ)({event:e,context:x().y$.CollectionSettingsClick,callback:h})},"combinator"):null}}}]);