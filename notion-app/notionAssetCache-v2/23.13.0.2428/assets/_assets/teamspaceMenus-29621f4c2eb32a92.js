"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[10862,99718],{26440:(e,t,a)=>{a.d(t,{w:()=>o});a(296540);var n=a(474848);const i={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M3.442 13.102a.625.625 0 0 1-.884 0L.304 10.848a.625.625 0 0 1 .884-.884l1.187 1.187V10a7.625 7.625 0 1 1 2.303 5.46.625.625 0 1 1 .872-.895A6.375 6.375 0 1 0 3.625 10v1.151l1.187-1.187a.625.625 0 1 1 .884.884z"}),(0,n.jsx)("path",{d:"M9.375 5.725a.625.625 0 0 1 1.25 0v3.65H13.6a.625.625 0 0 1 0 1.25H10A.625.625 0 0 1 9.375 10z"})]})},o=(0,a(340498).wt)("clockArrowBack",i)},43450:(e,t,a)=>{a.d(t,{R:()=>o});var n=()=>a(484714),i=()=>a(56366);function o(e){const t=(0,n().v3)();return(0,i().K8)((()=>{const a=t.currentUser.id;return!!(e&&e.isDefined()&&a)&&Boolean(e.isOwner(a))}),[t.currentUser.id,e])}},58293:(e,t,a)=>{a.d(t,{r:()=>o});var n=()=>a(56366),i=()=>a(351360);function o(){return(0,n().K8)((()=>i().default.state.currentSpaceStore),[])}},83848:(e,t,a)=>{a.d(t,{b:()=>r});var n=()=>a(56366),i=()=>a(351360),o=()=>a(134217);function r(e){return(0,n().K8)((()=>o().GU({billingData:e,spaceStore:i().default.state.currentSpaceStore})),[e])}},86089:(e,t,a)=>{a.d(t,{o:()=>l});var n=a(296540),i=()=>a(484714),o=()=>a(56366),r=()=>a(351360),s=()=>a(779795);function l(){const e=(0,i().v3)(),[t,a]=(0,n.useState)([]),l=(0,o().K8)((()=>{var e;return null===(e=r().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]);return(0,n.useEffect)((()=>{(async()=>{if(l){const t=await(0,s().p_)({environment:e,spaceId:l});a(t)}})()}),[e,l]),t}},126617:(e,t,a)=>{a.d(t,{Y:()=>i});a(296540);const n={viewBox:"0 0 16 16",svg:(0,a(474848).jsx)("path",{d:"M3.2 6.725a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55"})},i=(0,a(340498).wt)("ellipsisSmall",n)},127896:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K});a(898992),a(354520),a(581454);var n=a(296540),i=()=>a(484714),o=()=>a(56366),r=()=>a(401497),s=()=>a(584262),l=()=>a(959013),c=()=>a(857783),d=()=>a(728611),u=()=>a(722872),m=()=>a(578136),p=()=>a(736767),v=()=>a(928600),f=()=>a(939740),g=()=>a(305390),S=()=>a(89924),h=()=>a(120739),b=()=>a(284371),T=()=>a(946141),w=()=>a(435009),y=()=>a(962730),A=()=>a(210737),x=()=>a(693386),j=()=>a(341974),I=()=>a(898808),M=()=>a(192940),O=()=>a(704152),B=()=>a(16006),_=()=>a(859428),C=a(474848);function D(e){const{teamStore:t}=e,a=(0,i().v3)(),s=(0,M().h)(t),c=(0,o().K8)((()=>(0,m().D)({isMobileNative:a.device.isMobileNative,disableExposureLogging:!0})),[a.device.isMobileNative]),d=function(e){let{teamHomeEnabled:t}=e;const a=(0,i().v3)();return(0,r().IS)((e=>({headerWrap:{display:"flex",...t?{padding:4,marginLeft:8,marginRight:8,borderRadius:6}:{marginLeft:12,marginRight:12},alignItems:"center",...a.device.isMobile&&{paddingTop:12,paddingBottom:8}},teamNameContainer:{marginRight:10,flexGrow:1,flexShrink:0,lineHeight:"1em"},teamName:{fontSize:12,fontWeight:b().Wy.semibold,maxWidth:180,marginRight:4,alignSelf:"center",...b().RC},teamNameAndSettings:{display:"flex"},icon:{marginRight:10,marginTop:2},memberCount:{fontSize:12,color:e.lightTextColor}})),[a,t])}({teamHomeEnabled:c}),u=()=>{A().A.addNamedPopup("team_more_actions"),T().lR(a,{store:t,from:"team_menu_header"})},p=()=>{A().A.removeNamedPopup("team_more_actions")},v=(0,n.useCallback)((e=>{c&&w().oo({environment:a,url:(0,h().a)({teamId:t.id}),openInNew:e.metaKey||e.ctrlKey?"tab":void 0})}),[a,t.id,c]);return(0,C.jsx)(_().A,{renderTooltip:()=>(0,C.jsx)(l().sA,{defaultMessage:"View teamspace home",id:"TeamMenuHeader.tooltip"}),disableTooltip:!c,alignment:y().C.Start,render:e=>(0,C.jsxs)(O().A,{...e,style:d.headerWrap,onClick:v,disabled:!c,children:[(0,C.jsx)(I().x,{disabled:!0,store:t,size:28,style:d.icon}),(0,C.jsxs)("div",{style:d.teamNameContainer,children:[(0,C.jsxs)("div",{style:d.teamNameAndSettings,children:[(0,C.jsx)(B().A,{store:t,style:d.teamName}),(0,C.jsx)(x().OutlinerTeamOverflow,{teamStore:t,onPopupClick:u,onPopupClose:p,from:"team_menu_header",hideJoin:!0})]}),(0,C.jsx)("div",{style:d.memberCount,children:(0,C.jsx)(l().sA,{defaultMessage:"{numberOfMembers, plural, one {{numberOfMembers} member} other {{numberOfMembers} members}}",values:{numberOfMembers:s},id:"teamMenuHeader.teamMemberCount"})})]}),(0,C.jsx)(j().z,{teamStore:t,from:"team_breadcrumb_popup",navigateToTeamHomeOnJoin:!1})]})})}const L=7;function K(e){const{teamStore:t,parent:a}=e,n=(0,i().v3)(),h=(0,o().K8)((()=>(0,m().D)({isMobileNative:n.device.isMobileNative,disableExposureLogging:!0})),[n.device.isMobileNative]),b=(0,o().K8)((()=>t.getTeamPagesStores().filter((e=>e.canRead()&&e.isNavigableBlock()))),[t]),T=function(){const e=(0,i().v3)();return(0,r().IS)((t=>({morePagesCaption:e.device.isMobile?{}:{marginTop:0,marginBottom:0}})),[e])}();return(0,C.jsx)(v().A,{menuType:n.device.isMobile?u().gu.ActionSheet:u().gu.Popup,minWidth:280,header:(0,C.jsx)(S().A,{extraTopPadding:!0,children:(0,C.jsx)(D,{teamStore:t})}),children:(0,C.jsx)(f().Ay,{type:f().Oh.Vertical,initialFocus:void 0,resetFocusOnMouseOut:h,sections:[{key:"pages",items:b.slice(0,L).map((e=>({key:e.id,render:t=>(0,C.jsx)(g().A,{store:e,hidePath:!0,...t}),action:t=>{const i=d().Vr(t.event);c().uK({environment:n,store:e,openInNew:i,pageVisitSource:s().y8.Breadcrumb}),i||a.close()}}))),render:e=>(0,C.jsxs)(S().A,{...e,children:[e.children,b.length>L&&(0,C.jsx)(p().A,{style:T.morePagesCaption,caption:(0,C.jsx)(l().sA,{defaultMessage:"{numberOfMorePages} moreâ€¦",values:{numberOfMorePages:b.length-L},id:"TeamBreadcrumbPopup.morePages"})})]})}]})})}},141273:(e,t,a)=>{a.d(t,{g:()=>l});var n=a(296540),i=()=>a(484714),o=()=>a(56366),r=()=>a(351360),s=()=>a(749356);function l(e){const t=(0,i().v3)(),[a,l]=(0,n.useState)(),c=(0,o().K8)((()=>{var e;return null===(e=r().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);return(0,n.useEffect)((()=>{!async function(){c&&l(await(0,s().L6)({environment:t,spaceId:c,offerCampaign:e}))}()}),[t,c,e]),a}},149257:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(296540),i=()=>a(959013),o=a(474848);const r=(0,i().YK)({message_placeholder:{id:"teamInviteLinkRequestPage.message.placeholder",defaultMessage:"Message (optional)"}});const s=function(e){const{teamStore:t,teamName:s,teamId:l,isModalOpen:c,onDismiss:d}=e,[u,m]=(0,n.useState)(""),p=(0,a(484714).v3)(),v=(0,i().tz)(),f=async()=>{await a(350648).Ip({environment:p,teamId:l,message:u}),d()},g=(0,a(401497).IS)((()=>({modal:{alignSelf:"center",overflow:"visible",padding:15,width:420},requestTitle:{display:"inline-flex",marginBottom:10},icon:{marginLeft:4,marginRight:4},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginLeft:20},input:{padding:8}})),[]);return(0,o.jsx)(a(957986).A,{open:c,onDismiss:d,innerStyle:g.modal,preventHideChildrenWhileOpening:!0,render:()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:g.requestTitle,children:(0,o.jsx)(i().sA,{id:"teamInviteLinkRequestModal.reasonForRequest.title",defaultMessage:"Request access to {icon} {teamName}",values:{teamName:s,icon:(0,o.jsx)(a(898808).x,{style:g.icon,store:t,disabled:!0,size:22})}})}),(0,o.jsx)(a(623580).A,{textarea:!0,style:g.input,value:u,onChange:e=>{m(e.target.value)},placeholder:v.formatMessage(r.message_placeholder)}),(0,o.jsxs)("div",{style:g.footer,children:[(0,o.jsx)(a(125565).A,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,o.jsx)(i().sA,{id:"teamInviteLinkRequestModal.caption",defaultMessage:"Your teamspace owners will approve or decline your request."})}),(0,o.jsx)(a(204063).A,{size:"lg",style:g.requestInvitesButton,onClick:f,children:(0,o.jsx)(i().sA,{id:"teamInviteLinkRequestModal.requestAccessButton.label",defaultMessage:"Request"})})]})]})})}},192940:(e,t,a)=>{a.d(t,{h:()=>o});var n=()=>a(56366),i=()=>a(37433);function o(e){return(0,n().K8)((()=>{var t;return void 0===e?0:(null===(t=(0,i().PF)(e))||void 0===t?void 0:t.memberCountWithGuests)??0}),[e])}},205618:(e,t,a)=>{a.d(t,{A:()=>i});class n extends(()=>a(757695))().default{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"member",isInviteTargetsEmpty:!0,table:a(854150).yK,isFocused:!0,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const i=n},211825:(e,t,a)=>{a.d(t,{G:()=>r});var n=()=>a(484714),i=()=>a(56366),o=()=>a(486130);function r(e){const t=(0,n().v3)().currentUser.id;return(0,i().K8)((()=>Boolean(void 0!==t&&e.isNonGuestMember(t,o()._.getSpacePermissionGroupIds({userId:t,spaceId:e.getSpaceId()})))),[t,e])}},212727:(e,t,a)=>{a.r(t),a.d(t,{gearIcon:()=>o,iconDefinition:()=>i});a(296540);var n=a(474848);const i={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.29 10c0 1.5 1.22 2.71 2.71 2.71 1.5 0 2.71-1.21 2.71-2.71S11.5 7.29 10 7.29 7.29 8.5 7.29 10m1.25 0c0-.81.66-1.46 1.46-1.46.81 0 1.46.65 1.46 1.46s-.65 1.46-1.46 1.46-1.46-.65-1.46-1.46"}),(0,n.jsx)("path",{d:"M8.49 17.64q.75.15 1.53.15v-.01c.47 0 .94-.04 1.41-.13.26-.05.46-.25.5-.51l.26-1.53.15-.06 1.28.91c.21.14.49.14.71 0 .41-.28.8-.61 1.18-.98.33-.33.63-.7.9-1.09.15-.21.15-.5 0-.71l-.9-1.27.06-.15 1.55-.27c.26-.05.46-.25.51-.5a7.8 7.8 0 0 0 .02-2.94.62.62 0 0 0-.51-.5l-1.53-.26-.06-.15.91-1.28c.14-.21.14-.49 0-.71a7.9 7.9 0 0 0-2.07-2.08.62.62 0 0 0-.71 0l-1.27.9-.15-.06-.27-1.55a.64.64 0 0 0-.5-.51c-.5-.1-1-.15-1.53-.15-.47 0-.95.04-1.41.13-.26.05-.46.25-.5.51l-.26 1.53-.15.06-1.28-.91a.65.65 0 0 0-.71 0 7.9 7.9 0 0 0-2.08 2.07c-.15.21-.15.5 0 .71l.9 1.27-.06.15-1.55.27c-.26.05-.46.25-.51.5-.1.5-.15 1-.15 1.53 0 .47.04.95.13 1.41.05.26.25.46.51.5l1.53.26.06.15-.91 1.28c-.14.21-.15.49 0 .71.29.42.61.81.98 1.18.34.34.7.65 1.09.91.21.15.5.15.71 0l1.27-.9.15.06.27 1.55c.05.26.25.46.5.51m2.29-1.15c-.53.07-1.09.07-1.63 0l-.25-1.47a.62.62 0 0 0-.42-.49 6 6 0 0 1-.68-.28.63.63 0 0 0-.65.04l-1.2.85a6.8 6.8 0 0 1-1.14-1.16l.86-1.21c.13-.19.15-.43.05-.64-.11-.22-.21-.45-.28-.68a.62.62 0 0 0-.49-.43l-1.45-.25a6.7 6.7 0 0 1 0-1.63l1.47-.25c.23-.04.42-.2.49-.42.07-.23.17-.46.28-.68.11-.21.09-.46-.04-.65l-.85-1.2A6.8 6.8 0 0 1 6.01 4.8l1.21.86c.19.13.43.15.64.05.22-.11.45-.21.68-.28s.39-.26.43-.49l.25-1.45c.53-.07 1.09-.07 1.63 0l.25 1.47c.04.23.2.42.42.49.23.07.46.17.68.28.21.11.46.09.65-.04l1.2-.85A6.8 6.8 0 0 1 15.19 6l-.86 1.21c-.13.19-.15.43-.05.64.11.22.21.45.28.68s.26.39.49.43l1.45.25a6.7 6.7 0 0 1 0 1.63l-1.47.25c-.23.04-.42.2-.49.42-.07.23-.17.46-.28.68-.11.21-.09.46.04.65l.85 1.2a6.8 6.8 0 0 1-1.16 1.14l-1.21-.86a.64.64 0 0 0-.64-.05c-.22.11-.45.21-.68.28s-.39.26-.43.49z"})]})},o=(0,a(340498).wt)("gear",i)},233510:(e,t,a)=>{a.d(t,{Z:()=>d,c:()=>c});var n=()=>a(56366),i=()=>a(979340),o=()=>a(809730),r=()=>a(351360),s=()=>a(807778),l=()=>a(972418);function c(e){const{currentSpaceStore:t}=(0,n().O$)(r().default),a=e??t;return(0,n().K8)((()=>{const e=(null==a?void 0:a.getSubscriptionTier())??"free";return(0,i().rV)(e,"business")}),[a])}function d(){const{currentSpaceStore:e}=(0,n().O$)(r().default),t=(0,l().lh)({spaceId:null==e?void 0:e.id});return(0,n().K8)((()=>{const a=(null==e?void 0:e.getSubscriptionTier())??"free";return!(0,s().hG)()&&(0,i().rV)(a,"business")||(0,o().e)({billingData:t})}),[e,t])}},240865:(e,t,a)=>{a.d(t,{V:()=>o});var n=()=>a(56366),i=()=>a(351360);function o(){return(0,n().K8)((()=>{const{currentSpaceStore:e}=i().default.state;return(null==e?void 0:e.getMemberCountFromPublicSpaceData())||null}),[])}},314907:(e,t,a)=>{a.d(t,{E:()=>o});var n=()=>a(56366),i=()=>a(134217);function o(e){return(0,n().K8)((()=>i().Fq(e.state)),[e])}},324561:(e,t,a)=>{a.d(t,{Gi:()=>p,Q7:()=>m,UU:()=>v,_3:()=>u,a9:()=>d,f_:()=>c});var n=()=>a(484714),i=()=>a(56366),o=()=>a(857639),r=()=>a(762433),s=()=>a(596513),l=()=>a(714300);function c(e){let{spaceId:t}=e;const a=(0,n().v3)();return(0,i().K8)((()=>{if(t)return s().t.getData(a,{spaceId:t})}),[a,t])}function d(e){if("admin"===(null==e?void 0:e.type))return e}function u(e){let{spaceId:t}=e;return d((0,l().l)({spaceId:t}))}function m(e,t,a){if(!t)return 0;const n=(0,r().yB)({spaceId:e,logFunction:o().log.bind(o()),billingData:t});return n?Math.max(n,a):0}function p(e){var t;const a=null===(t=(0,r().KH)(e,"plan"))||void 0===t?void 0:t.price;if(!a)return;const n=a.unitAmount,i="year"===a.billingInterval?12:1;return{amount:n.amount/i,currencyCode:n.currencyCode}}function v(e){return"app_store"===(null==e?void 0:e.provider)||"play_store"===(null==e?void 0:e.provider)||"mixed"===(null==e?void 0:e.provider)}},341974:(e,t,a)=>{a.d(t,{z:()=>h});var n=a(296540),i=()=>a(484714),o=()=>a(56366),r=()=>a(401497),s=()=>a(284371),l=()=>a(437622),c=()=>a(37433),d=()=>a(515512),u=()=>a(211825),m=()=>a(959013),p=()=>a(493823),v=a(474848);const f=function(e){const{teamStore:t,from:r,navigateToTeamHomeOnJoin:s,style:l,hoveredStyle:c,icon:d,isRed:u}=e,f=(0,i().v3)(),g=(0,o().K8)((()=>a(351360).default.state.currentSpaceStore),[]),S=(0,n.useCallback)((async()=>{g&&await a(848237).e2({environment:f,teamStore:t,currentSpaceStore:g,from:r,andNavigateToTeamHome:s??!1})}),[g,f,t,r,s]);return(0,v.jsx)(p().p,{style:l,hoveredStyle:c,onClick:S,icon:d,isRed:u,children:(0,v.jsx)(m().sA,{id:"outlinerTeamToggleButton.joinTeamButton",defaultMessage:"Join"})})};var g=()=>a(655784);const S=function(e){const{teamStore:t,style:i,hoveredStyle:r}=e,[s,l]=(0,n.useState)(!1),c=(0,o().K8)((()=>t.getName()),[t]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(p().p,{style:i,hoveredStyle:r,onClick:()=>l(!0),children:(0,v.jsx)(m().sA,{id:"teamRequestButton.requestButton.label",defaultMessage:"Request"})}),(0,v.jsx)(a(149257).A,{teamStore:t,teamName:c,teamId:t.id,isModalOpen:s,onDismiss:()=>l(!1)})]})};function h(e){const{teamStore:t,style:a,hoveredStyle:n}=e,m=(0,i().v3)(),p=(0,d().Q)(),h=(0,u().G)(t),b=(0,o().K8)((()=>t.getTeamAccessLevel()),[t]),T=(0,r().IS)((e=>({joinTeamButton:{maxHeight:26,marginLeft:10,paddingLeft:10,paddingRight:10,borderRadius:100,fontSize:13,fontWeight:s().Wy.semibold,background:e.buttonHoveredBackground,alignSelf:"center",...a},joinTeamButtonHoveredStyle:{background:e.buttonPressedBackground,...n}})),[a,n]),w=(0,o().K8)((()=>(0,c().A2)({membership:t.getRawMembership()})&&(0,l().s7)(m)),[m,t]),y=!h&&"open"===b||w,A=!h&&"closed"===b;return p?null:h?(0,v.jsx)(g().A,{...e,style:T.joinTeamButton,hoveredStyle:T.joinTeamButtonHoveredStyle}):y?(0,v.jsx)(f,{...e,style:T.joinTeamButton,hoveredStyle:T.joinTeamButtonHoveredStyle}):A?(0,v.jsx)(S,{teamStore:t,style:T.joinTeamButton,hoveredStyle:T.joinTeamButtonHoveredStyle}):null}},350648:(e,t,a)=>{a.d(t,{D2:()=>y,Ip:()=>b,Jk:()=>T,YT:()=>w,e2:()=>S,g:()=>h});a(898992),a(354520);var n=()=>a(584262),i=()=>a(798880),o=()=>a(946141),r=()=>a(449506),s=()=>a(246826),l=()=>a(436572),c=()=>a(426116),d=()=>a(317909),u=()=>a(972435),m=()=>a(437622),p=()=>a(351360),v=()=>a(848237),f=()=>a(263928);const g=(0,a(959013).YK)({joinTeamSuccessMessage:{id:"teamInviteLinkActions.joinTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},requestTeamSuccessMessage:{id:"teamInviteLinkActions.requestAccess.successMessage",defaultMessage:"Successfully requested membership"},requestTeamFailureMessage:{id:"teamInviteLinkActions.requestAccess.failureMessage",defaultMessage:"Failed to request membership"}});async function S(e){let{environment:t,userId:a,teamStore:n,user:i}=e;const r=n.getSpaceId();if(!r)return;await v().rU({environment:t,teamId:n.id,spaceId:r,teamUserInfo:i,isSettingDefaultTeam:!1,inviterId:a})&&(o().vo(t,{store:n,joined_role:"member",from:"team_invite_link"}),await h({environment:t,userId:a,teamStore:n}),l().D6({label:u().A.formatMessage(g.joinTeamSuccessMessage,{teamName:n.getName()})}))}async function h(e){let{environment:t,userId:a,teamStore:i}=e;const o=p().default.state.currentUserRootStore,r=i.getSpaceId();if(!r||!o)return;const s=o.getSpaceViewStores().filter((e=>e.getSpaceId()===r))[0];await c().tR({environment:t,spaceViewStore:s,userSettingsStore:void 0,userRootStore:o,pageVisitSource:n().y8.JoinTeam,navigationType:"switchingToOrLoadingSpace"}),await f().J({environment:t,spaceId:r,userId:a}),v().L0({environment:t,teamStore:i,shouldScroll:!0})}async function b(e){let{environment:t,teamId:a,message:n}=e;if(!t.currentUser.id)return;"success"===(await r().callApi({eventName:"requestAccess",environment:t,data:{type:"current-actor-to-team",teamId:a,message:n}})).type?(o().XQ(t,{teamId:a}),await w({environment:t}),new Promise((e=>setTimeout(e,500))).then((()=>{l().D6({label:u().A.formatMessage(g.requestTeamSuccessMessage)})}))):l().D6({label:u().A.formatMessage(g.requestTeamFailureMessage)})}async function T(e){let{environment:t,teamStore:a,accessRequestStore:n,status:r}=e;const l=n.getForActorId();if(!l)return;const c=n.getRecordModel({table:i().oo,id:l});if(c){if("approved"===r){const e=[{type:"member",entity_type:"user",user_id:c.id}];if(!(await v().Zd({environment:t,teamStore:a,teamMemberInfos:e,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})))return}d().createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:t,canUndo:!0,perform:e=>{s().zv({store:n,transaction:e,data:{resolved_time:Date.now(),resolved_by_table:i().oo,resolved_by_id:t.currentUser.id,status:r}})}}),o().GW(t,{store:a,resolution:r})}}async function w(e){let{environment:t}=e;const{lastVisitedSpaceView:a,userRootStore:i,userSettingsStore:o}=await(0,m().ex)({environment:t,disableRedirectUrl:!1});a?await c().tR({environment:t,spaceViewStore:a,userRootStore:i,userSettingsStore:o,pageVisitSource:n().y8.BackForward,navigationType:"switchingToOrLoadingSpace"}):await c().t9({environment:t,userRootStore:i,userSettingsStore:o,pageVisitSource:n().y8.BackForward})}async function y(e){let{environment:t,teamId:a}=e;const n=await r().callApi({eventName:"getTeamAccessRequestMetadata",environment:t,data:{teamId:a}});if("success"===n.type)return n.data}},406965:(e,t,a)=>{a.d(t,{P:()=>u,U:()=>d});a(581454);var n=()=>a(945382),i=()=>a(534177),o=()=>a(37433),r=()=>a(646736),s=()=>a(351360),l=()=>a(134206),c=()=>a(912979);function d(){l().A.reset(),c().A.reset()}async function u(e){let{environment:t,messageStoreEmitValue:a,spaceStore:l}=e;if(!function(e){const t=c().A.state;switch(t.loadingState){case"uninitialized":return!0;case"loading":return!1;case"loaded":return-1===e||e!==t.messageStoreEmitValue;default:(0,i().HB)(t)}}(a))return!1;const{currentSpaceStore:d,currentUserStore:u}=s().default.state,m=d||l;if(!m||!u)return!1;"uninitialized"===c().A.state.loadingState&&c().A.setState({loadingState:"loading"});const p=await async function(e){let{environment:t,currentSpaceStore:a,currentUserStore:i}=e;const s=a.getModel(),l=i.id,c=(0,r().dp)(a,l).getModel();if(void 0===s||void 0===c)return;if((0,n().fK)({space:s,spaceUser:c})){return await(0,o().S)({environment:t,spaceStore:a,includeArchived:!0,currentUserId:l,minRoleOnTeamStores:"reader"})}const{teams:d}=await(0,o().qd)({fromCache:!1,environment:t,spaceStore:a,includeArchived:!0,currentUserId:l});return d}({environment:t,currentSpaceStore:m,currentUserStore:u});if(!(0,i().O9)(p))return c().A.setState({loadingState:"uninitialized"}),!1;const{archivedTeams:v,unarchivedTeams:f}=(0,o().vd)(p);return c().A.setState({loadingState:"loaded",archivedTeamIds:v.map((e=>e.id)),unarchivedTeamIds:f.map((e=>e.id)),messageStoreEmitValue:a}),!0}},418426:(e,t,a)=>{a.d(t,{$:()=>l});a(898992),a(354520),a(581454);var n=()=>a(484714),i=()=>a(56366),o=()=>a(468006),r=()=>a(605402),s=()=>a(486130);function l(e){const t=(0,n().v3)().currentUser.id;return(0,i().K8)((()=>{if(!e.isDefined())return[];return(0,o().ri)({rawMembers:e.getRawMembership(),groupsInSpace:r().A.state.permissionGroupsAndMemberCounts.map((e=>e.group))}).filter((a=>s()._.getSpacePermissionGroupIds({userId:t,spaceId:e.getSpaceId()}).has(a.getGroupId())))}),[t,e])}},477401:(e,t,a)=>{a.d(t,{U:()=>g});var n=a(296540),i=()=>a(484714),o=()=>a(56366),r=()=>a(786508),s=()=>a(166386),l=()=>a(449506),c=()=>a(58293),d=()=>a(437622),u=()=>a(985395),m=()=>a(240865),p=()=>a(351360),v=()=>a(10984),f=()=>a(141273);function g(e){const t=(0,i().v3)(),[a,g]=(0,n.useState)(!1),S=function(e){const t=(0,f().g)("ai_fifty_percent_upgrade"),a=(0,u().n)(),n=(0,m().V)();return(0,o().K8)((()=>{const i=t&&!a&&(0,v().wb)()&&1===n,o=(0,d().aB)(p().default.state.currentSpaceStore);return Boolean(i&&(!o||"sidebar"!==e||o>=7))}),[t,a,n,e])}(e),h=(0,c().r)(),b=(0,o().K8)((()=>null==h?void 0:h.canAdmin()),[h]),T=(0,o().K8)((()=>null==h?void 0:h.getSpaceId()),[h]);return(0,n.useEffect)((()=>{!async function(){if(S&&T&&b)try{const a=await l().callApi({eventName:"getCustomerOffer",environment:t,data:{spaceId:T,offerCampaign:"ai_fifty_percent_upgrade"}});if("failed"===a.type)return;if("offer"in a.data){var e;const t=(0,r().RS)(null===(e=a.data)||void 0===e?void 0:e.offer);g((0,s().J5)(t))}}catch(a){return}}()}),[t,S,T,b]),a}},515512:(e,t,a)=>{a.d(t,{Q:()=>l});var n=()=>a(484714),i=()=>a(56366),o=()=>a(437622),r=()=>a(351360),s=()=>a(749240);function l(){const e=function(){const e=(0,n().v3)();return(0,i().K8)((()=>{const t=r().default.state.currentSpaceStore,a=s().subscriptionDataStoreInstance.state;return t?o().IL(t)?a?{loading:!1,isUserTeamGuestOfSpace:o().Qx(e,a)}:{loading:!0}:{loading:!1,isUserTeamGuestOfSpace:!1}:{loading:!0}}),[e])}();return(0,i().K8)((()=>e.loading||e.isUserTeamGuestOfSpace),[e])}},605685:(e,t,a)=>{a.d(t,{c:()=>d});a(898992),a(354520),a(581454);var n=()=>a(484714),i=()=>a(56366),o=()=>a(433847),r=()=>a(534177),s=()=>a(351360),l=()=>a(847554),c=()=>a(749240);function d(){const e=(0,n().v3)().currentUser.id,t=(0,i().K8)((()=>s().default.state.currentSpaceViewStore),[]),a=(0,i().O$)(c().subscriptionDataStoreInstance),d=(0,l().b)(a);return(0,i().K8)((()=>!(!e||null==t||!t.isDefined())&&(0,o().z8)({userId:e,teamsThatUserIsANonGuestMemberOf:t.getNonGuestTeamsStores().map((e=>e.getModel())).filter(r().O9),spaceMembersCount:d})),[e,t,d])}},617668:(e,t,a)=>{a.r(t),a.d(t,{iconDefinition:()=>n,plusIcon:()=>i});a(296540);const n={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M10.625 3.75a.625.625 0 1 0-1.25 0v5.625H3.75a.625.625 0 1 0 0 1.25h5.625v5.625a.625.625 0 1 0 1.25 0v-5.625h5.625a.625.625 0 1 0 0-1.25h-5.625z"})},i=(0,a(340498).wt)("plus",n)},655784:(e,t,a)=>{a.d(t,{A:()=>d});a(581454);var n=a(296540),i=()=>a(484714),o=()=>a(56366),r=()=>a(959013),s=()=>a(496603),l=()=>a(418426),c=a(474848);const d=function(e){const{teamStore:t,from:d,onLeavingTeam:u,style:m,hoveredStyle:p,icon:v,isRed:f,placement:g,alignment:S,buttonInternals:h}=e,b=(0,i().v3)(),T=(0,o().K8)((()=>a(351360).default.state.currentSpaceStore),[]),w=(0,l().$)(t),y=(0,n.useCallback)((async()=>{if(!T)return;await a(848237).JC({environment:b,teamStore:t,from:d,userGroupsInTeam:w})&&(null==u||u())}),[T,b,t,d,w,u]),A=(0,c.jsx)(r().sA,{id:"teamJoinLeaveButton.leaveTeam.enabledTooltip",defaultMessage:"Click to leave teamspace"}),x=function(e){let{teamStore:t}=e;const a=(0,i().v3)(),n=a.currentUser.id,{isDefaultTeam:d}=(0,o().K8)((()=>({isDefaultTeam:t.isDefault()})),[t]),u=(0,l().$)(t),m=(0,o().K8)((()=>{if(!t.isReady())return!1;const{ownerUserIds:e,ownerGroupIds:a}=t.getAllOwnerIds();return Boolean(n&&t.isOwner(n)&&e.length+a.length===1)}),[t,n]);return function(e){let{isDefaultTeam:t,isOnlyTeamOwner:a,userGroupsInTeam:n}=e;if(t)return(0,c.jsx)(r().sA,{id:"teamBrowser.teamCard.leaveTeam.defaultTeamTooltip",defaultMessage:"You canâ€™t leave this teamspace because everyone in the workspace must be a member"});if(a)return(0,c.jsx)(r().sA,{id:"teamJoinLeaveButton.leaveTeam.onlyOwnerTooltip",defaultMessage:"Invite another teamspace owner to leave this teamspace"});if(n.length>0)return(0,c.jsx)(r().sA,{id:"teamBrowser.teamCard.leaveTeam.groupTooltip",defaultMessage:"{groupNames, plural, one {You can't leave this teamspace because you're a member of multiple groups, {groupNames}.} other {You can't leave this teamspace because you're a member of the group, {groupNames}.}}",values:{groupNames:s().oE(n.map((e=>e.name))).join()}})}({isDefaultTeam:d,isOnlyTeamOwner:m,userGroupsInTeam:u})}({teamStore:t}),j=Boolean(x),I=j?x:A;return(0,c.jsx)(a(859428).A,{style:j?{width:240}:void 0,disableTooltip:!Boolean(I),renderTooltip:e=>(0,c.jsx)("div",{...e,children:I}),textWrap:j,placement:g,alignment:S,render:e=>(0,c.jsx)(a(493823).p,{...e,style:m,hoveredStyle:p,onClick:y,disabled:j,disabledFeedback:j,icon:v,isRed:f,children:h||(0,c.jsxs)(c.Fragment,{children:[(0,a(831310).o)({width:12.5,marginRight:4}),(0,c.jsx)(r().sA,{id:"teamBrowser.teamCard.button.joined",defaultMessage:"Joined"})]})})})}},693386:(e,t,a)=>{a.r(t),a.d(t,{OutlinerTeamOverflow:()=>re,TeamOverflowMenu:()=>se});a(898992),a(354520),a(581454);var n=a(296540),i=()=>a(484714),o=()=>a(56366),r=()=>a(401497),s=()=>a(934999),l=()=>a(26440),c=()=>a(764781),d=()=>a(126617),u=()=>a(212727),m=()=>a(340498),p=a(474848);const v={viewBox:"0 0 20 20",svg:(0,p.jsx)("path",{d:"M6.7 3.115a1.828 1.828 0 0 0-2.558 2.151 1.828 1.828 0 0 0-.882 2.93l.084.1q-.269.106-.502.301a1.827 1.827 0 0 0-.222 2.575l3.616 4.298a6.291 6.291 0 0 0 10.73-6.193l-1.762-4.868a1.863 1.863 0 0 0-3.612.54L9.737 2.747a1.828 1.828 0 0 0-3.038.369m-1.174 1.2a.58.58 0 0 1 .814.07l2.828 3.362a.625.625 0 1 0 .957-.805L7.897 4.295a.578.578 0 0 1 .884-.744l3.729 4.431a.625.625 0 0 0 1.072-.598l-.71-2.149a.612.612 0 0 1 1.156-.4l1.763 4.867a5.042 5.042 0 0 1-8.598 4.963l-3.617-4.297a.577.577 0 1 1 .885-.744l1.627 1.934a.625.625 0 0 0 .956-.805L4.216 7.392a.578.578 0 0 1 .884-.744l2.228 2.648a.625.625 0 0 0 .956-.805L5.456 5.13a.58.58 0 0 1 .07-.814"})},f=(0,m().wt)("handWave",v),g={viewBox:"0 0 20 20",svg:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242m0 9.255c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h5.845A4.6 4.6 0 0 1 11.4 16c0-1.508.726-2.846 1.846-3.685A7.9 7.9 0 0 0 10 11.629"}),(0,p.jsx)("path",{d:"M16 19.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7m2.594-3.469a.625.625 0 0 0-.625-.625h-1.375v-1.375a.625.625 0 0 0-1.25 0v1.375h-1.375a.625.625 0 0 0 0 1.25h1.375v1.375a.625.625 0 1 0 1.25 0v-1.375h1.375c.345 0 .625-.28.625-.625"})]})},S=(0,m().wt)("inviteMemberFill",g);var h=()=>a(835607);const b=(0,m().wt)("personAdmin",{viewBox:"0 0 15 16",svg:(0,p.jsx)("path",{d:"M6.082 7.215a2.71 2.71 0 001.504-.438c.451-.296.811-.69 1.08-1.182a3.352 3.352 0 00.403-1.634 3.21 3.21 0 00-.403-1.6 3.059 3.059 0 00-1.08-1.141A2.776 2.776 0 006.082.796c-.547 0-1.048.143-1.504.43a3.153 3.153 0 00-1.087 1.156 3.195 3.195 0 00-.403 1.593 3.39 3.39 0 00.41 1.627c.269.487.629.88 1.08 1.175a2.71 2.71 0 001.504.438zm0-1.19c-.314 0-.606-.088-.875-.266a1.974 1.974 0 01-.636-.738 2.247 2.247 0 01-.239-1.046c0-.379.08-.718.24-1.019.159-.3.37-.538.635-.71.264-.179.556-.267.875-.267.319 0 .61.086.875.26.264.172.476.41.636.71.16.296.239.634.239 1.012 0 .387-.08.738-.24 1.053-.159.31-.37.556-.635.738a1.508 1.508 0 01-.875.273zm-4.266 7.54h5.948a3.113 3.113 0 01-.082-.752v-.43H1.59c-.082 0-.141-.014-.178-.041-.032-.027-.048-.073-.048-.137 0-.26.105-.56.315-.902.21-.342.512-.673.909-.992.4-.323.893-.59 1.476-.8.588-.213 1.26-.32 2.017-.32a5.648 5.648 0 011.92.328c.17-.42.466-.732.89-.937a6.605 6.605 0 00-1.313-.417 6.856 6.856 0 00-1.497-.157c-.92 0-1.75.139-2.488.417-.739.273-1.372.631-1.9 1.073-.525.442-.928.918-1.21 1.429-.279.51-.418.998-.418 1.463 0 .784.584 1.175 1.75 1.175zm6.843-.731c0 .438.091.804.274 1.1.182.297.469.58.861.848.392.274.907.588 1.545.944a.6.6 0 00.294.082.62.62 0 00.335-.082c.638-.36 1.153-.675 1.545-.944.392-.269.679-.551.861-.847.182-.297.274-.664.274-1.101v-2.468a.979.979 0 00-.137-.54c-.087-.141-.24-.26-.458-.355a17.47 17.47 0 00-.417-.15c-.182-.069-.38-.14-.595-.213-.21-.077-.403-.145-.581-.205a13.002 13.002 0 01-.403-.15 1.263 1.263 0 00-.417-.055c-.146 0-.292.028-.438.082-.077.028-.205.07-.383.13l-.574.198c-.205.073-.399.144-.58.212-.183.064-.32.114-.411.15-.219.096-.374.215-.465.356a1.02 1.02 0 00-.13.54v2.468zm2.598 1.326a.601.601 0 01-.212-.04.416.416 0 01-.178-.124l-1.155-1.244a.671.671 0 01-.096-.178.492.492 0 01-.034-.178c0-.145.048-.264.144-.355a.492.492 0 01.341-.13.485.485 0 01.363.15l.793.869 1.613-2.229a.484.484 0 01.41-.219c.132 0 .246.048.342.144.1.091.15.205.15.342 0 .04-.009.086-.027.136a.463.463 0 01-.075.15l-1.983 2.722c-.086.123-.218.184-.396.184z"})});var T=()=>a(617668),w=()=>a(979340),y=()=>a(468006),A=()=>a(959013),x=()=>a(534177),j=()=>a(416726),I=()=>a(946141),M=()=>a(575143),O=()=>a(452558),B=()=>a(704152),_=()=>a(406699),C=()=>a(928600),D=()=>a(8980),L=()=>a(89924),K=()=>a(859428),k=()=>a(986863),N=()=>a(38337),R=()=>a(722872),P=()=>a(37433),F=()=>a(632709),U=()=>a(962730),q=()=>a(351360),z=()=>a(463830),H=()=>a(205618),G=()=>a(486130),W=()=>a(406965),V=()=>a(475355),E=()=>a(848237);a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698);function J(e){let{adminStatus:t,accessLevel:a,isArchivedTeam:n}=e;if("adminThatCanPerformPrivilegedActions"===t)return new Set(["join","joinAsOwner"]);if(n)switch(t){case"none":return new Set;case"admin":return new Set("open"===a?["join"]:[]);default:(0,x().HB)(t)}switch(a){case"open":return new Set(["join"]);case"closed":case"private":return new Set;default:(0,x().HB)(a)}}var Y=()=>a(931956),Q=()=>a(605685),$=()=>a(685781),X=()=>a(233510),Z=()=>a(976519),ee=()=>a(211825),te=()=>a(418426);const ae=["join","view","add","duplicate","leave","archive","restore"],ne=["add"],ie=["join","joinAsOwner","upgradeSelfToOwner","leave"],oe=(0,A().YK)({add:{defaultMessage:"Add members",id:"sidebar.outlinerTeamToggleButton.addLabel"},leave:{defaultMessage:"Leave teamspace",id:"sidebar.outlinerTeamToggleButton.leaveLabel"},joinAsOwner:{defaultMessage:"Join as owner",id:"sidebar.outlinerTeamToggleButton.joinAsOwnerLabel"},joinAsMember:{defaultMessage:"Join as member",id:"sidebar.outlinerTeamToggleButton.joinAsMemberLabel"},joinTeamspace:{defaultMessage:"Join teamspace",id:"sidebar.outlinerTeamToggleButton.joinLabel"},upgradeSelfToOwner:{defaultMessage:"Become owner",id:"sidebar.outlinerTeamToggleButton.upgradeSelfToOwnerLabel"},archive:{defaultMessage:"Archive teamspace",id:"sidebar.outlinerTeamToggleButton.archiveLabel"},restore:{defaultMessage:"Restore teamspace",id:"outlinerTeamOverflow.teamActions.restoreLabel"},duplicate:{defaultMessage:"Duplicate teamspace",id:"sidebar.outlinerTeamToggleButton.duplicateLabel"},teamspaceSettings:{defaultMessage:"Teamspace settings",id:"sidebar.outlinerTeamToggleButton.ownerViewLabel"},viewMembers:{defaultMessage:"View members",id:"sidebar.outlinerTeamToggleButton.unjoinedMemberViewLabel"}});function re(e){let{teamStore:t,style:a,from:n,hideJoin:s,onPopupClick:l,onPopupClose:c}=e;const u=(0,i().Y0)(),m=(0,A().tz)(),v=(0,o().uB)(void 0,H().A),f=(0,o().K8)((()=>q().default.state.currentSpaceStore),[]),g=(0,o().uB)(void 0,z().A),S=(0,r().IS)((e=>({buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20,...a}})),[a]),h=m.formatMessage({defaultMessage:"Teamspace settings and members...",id:"sidebar.outlinerTeamToggleButton.tooltip"});return f?u.isMobile?null:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(K().A,{textWrap:!1,renderTooltip:()=>h,placement:U().W.Bottom,render:e=>(0,p.jsx)(_().Ay,{popupType:_().z7.Popup,buttonPopupStore:g,alignmentToOrigin:_().yP.Start,originGap:2,renderOrigin:t=>(0,p.jsx)(B().A,{ariaLabel:h,className:N()._Oc,style:S.buttonStyle,mobileFeedback:!1,...e,...t,children:(0,p.jsx)(D().I,{icon:d().Y,size:"sm",color:"secondary"})}),render:e=>(0,p.jsx)(se,{teamStore:t,permissionsInviteStore:v,onDismiss:e.close,from:n,hideJoin:s,buttonPopupStore:g}),onClick:l,onClose:c})}),(0,p.jsx)(k().u,{permissionsInviteStore:v,store:t})]}):null}function se(e){const{teamStore:t,permissionsInviteStore:a,onDismiss:d,from:m,hideJoin:v,buttonPopupStore:g}=e,B=(0,r().DP)(),_=(0,i().v3)(),k=(0,r().IS)((()=>({menuItemButton:{minWidth:200},caption:{minWidth:230}})),[]),z=(0,o().K8)((()=>q().default.state.currentSpaceStore),[]),H=(0,ee().G)(t),re=(0,o().K8)((()=>(0,y().Sh)({archived_by:t.getArchivedBy()})),[t]),se=_.currentUser.id,le=(0,o().K8)((()=>G()._.getSpacePermissionGroupIds({userId:se,spaceId:null==z?void 0:z.id})),[se,z]),ce=(0,o().K8)((()=>se?t.getTeamRoleForUser(se,le)??"none":"none"),[se,t,le]),de=(0,o().K8)((()=>!(!t.isDefined()||!se)&&Boolean(t.isOwner(se))),[se,t]),ue=(0,Z().q)(t.id),me=(0,Y().X)(t),{id:pe,name:ve,isDefault:fe}=(0,o().K8)((()=>({id:t.id,name:t.getName(),isDefault:t.isDefault()})),[t]),ge=(0,Q().c)(),Se=(0,o().K8)((()=>(0,P().sx)({environment:_,spaceStore:z})),[z,_]),he=(0,$().a)(m),be=function(e){const{isDefault:t,accessLevel:a,settings:n}=(0,o().K8)((()=>({isDefault:e.isDefault(),accessLevel:e.getTeamAccessLevel(),settings:e.getSettings()})),[e]),i="private"===a,r=(0,X().c)(),s=i&&!r?"business":void 0,l=(null==n?void 0:n.disable_public_access)||(null==n?void 0:n.disable_export)||(null==n?void 0:n.disable_guests),c=(0,X().Z)(),d=l&&!c?"enterprise":void 0,u=(0,w().hW)([d,s]);if(t)return"isDefault";if(u)return u}(t),Te="isDefault"===(we=be)?(0,p.jsx)(A().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateDefaultTeamspace",defaultMessage:"Cannot duplicate a default teamspace"}):"business"===we?(0,p.jsx)(A().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithBusinessFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Business plans or above"}):"enterprise"===we?(0,p.jsx)(A().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithEnterpriseFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Enterprise plans or above"}):void 0===we?void 0:(0,x().HB)(we);var we;const ye=(0,o().K8)((()=>t.getTeamAccessLevel()),[t]),Ae=(0,te().$)(t),xe=(0,n.useCallback)((e=>{I().ks(_,{store:t,from:m,option:e})}),[_,t,m]),je=ue&&!ge,Ie=(0,o().K8)((()=>Boolean(null==z?void 0:z.canAdmin())),[z]),{joinLeaveOptionsToShow:Me,leaveOptionDisabledState:Oe}=function(e){let{teamRole:t,adminStatus:a,isDefaultTeam:n,accessLevel:i,isArchivedTeam:o}=e;switch(t){case"owner":case"member":const e=new Set,r=!o;return r&&e.add("leave"),"owner"!==t&&"adminThatCanPerformPrivilegedActions"===a&&e.add("upgradeSelfToOwner"),{joinLeaveOptionsToShow:e,leaveOptionDisabledState:r&&n?{disabled:!0,disabledReasonKey:"defaultTeam"}:void 0};case"team_level_guest":return{joinLeaveOptionsToShow:new Set,leaveOptionDisabledState:void 0};case"none":return{joinLeaveOptionsToShow:J({adminStatus:a,accessLevel:i,isArchivedTeam:o}),leaveOptionDisabledState:void 0};default:(0,x().HB)(t)}}({teamRole:ce,adminStatus:he?"adminThatCanPerformPrivilegedActions":Ie?"admin":"none",isArchivedTeam:re,isDefaultTeam:fe,accessLevel:ye}),Be=Me.has("joinAsOwner"),_e=he&&!(1===Me.size&&Me.has("leave")),Ce=(0,o().K8)((()=>(0,P().mN)(t)),[t]),De={add:{type:"action",show:!re&&me,handle:()=>{a.update((e=>({...e,modalOpen:!0})))},title:oe.add,icon:(0,p.jsx)(D().I,{icon:S})},leave:{type:"action",..._e&&{colorOverride:B.redBadgeBackground},show:Me.has("leave"),handle:()=>{E().JC({environment:_,teamStore:t,from:m,userGroupsInTeam:Ae})},title:oe.leave,disabled:Boolean(null==Oe?void 0:Oe.disabled),icon:(0,p.jsx)(D().I,{icon:f}),disabledTooltipText:"defaultTeam"===(null==Oe?void 0:Oe.disabledReasonKey)&&(0,p.jsx)(A().sA,{id:"sidebar.outlinerTeamToggleButton.cannotLeaveDefaulTeamTooltip",defaultMessage:"Cannot leave a default teamspace"})},join:{type:"action",show:!v&&Me.has("join"),handle:async()=>{if(z)switch(ye){case"open":await E().e2({environment:_,teamStore:t,currentSpaceStore:z,from:m,andNavigateToTeamHome:!1});break;case"closed":case"private":await E().z9({environment:_,teamStore:t,currentSpaceStore:z,from:m,action:"joinClosedOrPrivateTeamAsMember"});break;default:(0,x().HB)(ye)}},title:Be?oe.joinAsMember:oe.joinTeamspace,icon:(0,p.jsx)(D().I,{icon:T().plusIcon,color:"secondary"})},joinAsOwner:{type:"action",show:Be,handle:()=>E().z9({environment:_,teamStore:t,currentSpaceStore:z,from:m,action:"joinTeamAsOwner"}),title:oe.joinAsOwner,icon:(0,p.jsx)(D().I,{icon:b})},upgradeSelfToOwner:{type:"action",show:Me.has("upgradeSelfToOwner"),handle:()=>E().z9({environment:_,teamStore:t,currentSpaceStore:z,from:m,action:"upgradeToOwner"}),title:oe.upgradeSelfToOwner,icon:(0,p.jsx)(D().I,{icon:b})},archive:{type:"action",show:!re&&de,colorOverride:B.redBadgeBackground,handle:async()=>{je||(await E().mm({teamStore:t,environment:_,from:m}),W().P({environment:_,messageStoreEmitValue:-1}))},title:oe.archive,disabled:je,disabledTooltipText:(0,p.jsx)("div",{style:{whiteSpace:"normal"},children:(0,p.jsx)(A().sA,{id:"sidebar.outlinerTeamToggleButton.cannotArchiveTooltip.moreThanOneMember",defaultMessage:"There must only be one member in the workspace to archive this teamspace"})}),icon:(0,p.jsx)(D().I,{icon:s().B})},restore:{type:"action",show:re,handle:async()=>{de&&Ce&&(await E().Q8({environment:_,teamStore:t,teamName:ve,from:m}),W().P({environment:_,messageStoreEmitValue:-1}))},title:oe.restore,icon:(0,p.jsx)(D().I,{icon:l().w}),disabled:!Ce||!de,disabledTooltipText:Ce?(0,p.jsx)(A().sA,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText.notOwner",defaultMessage:"Only teamspace owners can restore archived teamspaces."}):(0,p.jsx)(A().sA,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText.noDefaultTeam",defaultMessage:"You must have an active default teamspace to restore this {accessLevel} teamspace.",values:{accessLevel:ye}})},duplicate:{type:"action",show:!re&&Se,handle:()=>{V().hX({environment:_,teamStore:t,from:m,buttonPopupStore:g})},title:oe.duplicate,disabled:void 0!==be,icon:(0,p.jsx)(D().I,{icon:c().V}),disabledTooltipText:Te,caption:(0,p.jsx)(A().sA,{id:"sidebar.outlinerTeamToggleButton.duplicateCaption",defaultMessage:"Duplicates permissions and other settings but not pages and members"})},view:{type:"action",show:!re,handle:()=>E().F2({environment:_,teamId:pe,tab:F().p.Members,from:m}),title:H&&!re?oe.teamspaceSettings:oe.viewMembers,icon:H?(0,p.jsx)(D().I,{icon:u().gearIcon}):(0,p.jsx)(D().I,{icon:h().F})}},Le=(_e?[{sectionName:"join/leave section",orderedOptions:ie},{sectionName:"other actions",orderedOptions:ae.filter((e=>!ie.includes(e)))}]:[{sectionName:"add section",orderedOptions:ne},{sectionName:"other actions section",orderedOptions:ae.filter((e=>!ne.includes(e)))}]).map((e=>{const t=e.orderedOptions.filter((e=>De[e].show));if(0!==t.length)return{sectionName:e.sectionName,filteredOptions:t}})).filter(x().O9).map((e=>{const t=e.filteredOptions.map((e=>{const t=De[e],{type:a}=t;return"action"===a?(0,j().Ls)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,validators:[],closeParentMenu:!0,action:()=>{d(),xe(e),t.handle()},render:e=>(0,p.jsx)(K().A,{placement:U().W.Left,textWrap:!1,disableTooltip:!(t.disabled&&t.disabledTooltipText),renderTooltip:()=>t.disabledTooltipText,render:a=>(0,p.jsx)(M().A,{...e,...a,svg:()=>t.icon,title:(0,p.jsx)(A().sA,{...t.title}),buttonStyle:{...k.menuItemButton,...!t.disabled&&t.colorOverride?{fill:t.colorOverride,color:t.colorOverride}:{fill:B.regularIconColor,color:B.regularTextColor}},disabled:t.disabled,disabledFeedback:t.disabled,caption:t.caption,captionStyle:k.caption,shouldWrapCaption:!0})})}):"extensionAction"===a?(0,j().uk)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,width:250,validators:[],subActions:()=>t.subActionSections.map((t=>({...t,actions:t.actions.map((t=>({...t,action:a=>{d(),xe(e),t.action(a)}})))})))}):void(0,x().HB)(a)}));return(0,j().gy)({key:e.sectionName,render:e=>(0,p.jsx)(L().A,{...e}),actions:t})}));return(0,p.jsx)(C().A,{className:N()._En,menuType:R().gu.Popup,minWidth:"100%",children:(0,p.jsx)(O().A,{context:{blocks:[],environment:_,publicEditMode:void 0},sections:Le,initialFocus:void 0})})}},714300:(e,t,a)=>{a.d(t,{l:()=>l});var n=()=>a(484714),i=()=>a(56366),o=()=>a(176983),r=()=>a(596513),s=()=>a(324561);function l(e){let{spaceId:t}=e;const a=(0,n().v3)(),l=(0,o().J)();return(0,i().K8)((()=>{if(!t||!l)return;const e=r().t.getData(a,{spaceId:t});return(0,s().a9)(e)}),[a,t,l],{useDeepEqual:!0})}},736767:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(296540),i=a(474848);function o(e,t){return(0,i.jsx)(a(678553).A,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const r=(0,n.forwardRef)(o)},749356:(e,t,a)=>{a.d(t,{VY:()=>m,Qm:()=>p,z6:()=>u,OC:()=>g,L6:()=>v,Zc:()=>S,x3:()=>f});var n=()=>a(857639),i=()=>a(386164);const o={plans_page:["lic_25","lic_50","resurrection_offer","ai_fifty_percent_upgrade"],sidebar_upsell:["lic_25","lic_50"]};var r=()=>a(229833),s=()=>a(449506),l=()=>a(901389),c=()=>a(989423),d=()=>a(351360);async function u(e,t){var a;const{spaceId:n,offerCampaign:i}=t;if(!n||!i||null===(a=d().default.state.currentSpaceStore)||void 0===a||!a.canAdmin())return;const o=await s().callApi({eventName:"getCustomerOffer",environment:e,data:{spaceId:n,offerCampaign:i}});return"failed"!==o.type&&"offer"in o.data&&o.data.offer?o.data.offer:void 0}async function m(e){const{environment:t,spaceId:a,offerCampaign:n,entrypoint:i}=e,o=await s().callApi({eventName:"applyCustomerOffer",environment:t,data:{spaceId:a,offerCampaign:n,entrypoint:i??"unknown"}});if("failed"!==o.type)return o;l().Qg(o)}async function p(e,t){const a=await s().callApi({eventName:"applyCustomerOffer",environment:e,data:{...t}});if("failed"!==a.type)return a;l().Qg(a)}async function v(e){const{environment:t,spaceId:a,offerCampaign:n}=e;return void 0!==await u(t,{spaceId:a,offerCampaign:n})}async function f(e){var t;const{environment:a,hasReceived:o,offerType:l,newPlan:c,coupon:u}=e,m=null===(t=d().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId();if(!m)return;const p=await s().callApi({eventName:"updateCustomerOffer",environment:a,data:{spaceId:m,hasReceived:o,offerType:l,newPlan:c,coupon:u},headers:(0,i().WS)({cellId:void 0,spaceId:m})});"failed"===p.type&&n().log({level:"error",from:"offerActions",type:"updateLegacyCustomerOfferFailed",error:(0,r().n6)(p.error)})}async function g(e,t,a){const n=function(e){if(o.hasOwnProperty(e))return o[e]}(a);if(n)for(const i of n){const a=await u(e,{spaceId:t,offerCampaign:i});if((null==a?void 0:a.campaign)===i)return a}}function S(e){let{environment:t,spaceName:a,offerCampaign:n}=e;if(a)switch(n){case"lic_25":case"lic_50":(0,c().WU)(t,"lic_offer_eligible","lic_offer_eligible",3600,{workspace_name:a,lic_25:"lic_25"===n,lic_50:"lic_50"===n});break;case"resurrection_offer":(0,c().WU)(t,"resurrection_offer_eligible","resurrection_offer_eligible",3600,{workspace_name:a});break;default:return}}},809730:(e,t,a)=>{a.d(t,{e:()=>s});var n=()=>a(534177),i=()=>a(597777);var o=()=>a(807778),r=()=>a(10984);function s(e){var t;let{billingData:a}=e;return function(e){let{subscriptionTier:t,subscriptionCreatedAtTime:a,useLegacyBehavior:o}=e;return"enterprise"===t||!("plus"!==t||!o)&&(0,n().O9)(a)&&a<i().fQ}({subscriptionTier:(0,r().AI)(),subscriptionCreatedAtTime:null==a||null===(t=a.subscription)||void 0===t||null===(t=t.startDate)||void 0===t?void 0:t.toMillis(),useLegacyBehavior:!(0,o().hG)()})}},835607:(e,t,a)=>{a.d(t,{F:()=>i});a(296540);const n={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M13 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242m-2.324 4.066c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M13 11.63c-2.334 0-4.354 1.36-5.202 3.323-.309.715-.125 1.419.309 1.912.418.476 1.064.76 1.743.76h6.3c.68 0 1.325-.284 1.744-.76.433-.493.617-1.197.308-1.912-.848-1.963-2.868-3.324-5.202-3.324m-4.054 3.818C9.59 13.955 11.153 12.88 13 12.88s3.409 1.075 4.054 2.57a.52.52 0 0 1-.1.59c-.166.19-.461.336-.804.336h-6.3c-.343 0-.638-.146-.805-.336a.52.52 0 0 1-.1-.59M5.6 4.742c-.871 0-1.582.361-2.062.96-.468.582-.686 1.35-.686 2.142s.218 1.56.686 2.143c.48.598 1.19.959 2.062.959.87 0 1.582-.361 2.062-.96.468-.582.686-1.35.686-2.142S8.13 6.284 7.662 5.7c-.48-.598-1.191-.96-2.062-.96M4.102 7.844c0-.576.159-1.047.41-1.36.24-.299.59-.492 1.088-.492.497 0 .847.193 1.087.492.251.313.41.784.41 1.36s-.159 1.047-.41 1.36c-.24.299-.59.492-1.087.492s-.848-.193-1.087-.492c-.252-.313-.411-.784-.411-1.36m1.498 3.56a4.33 4.33 0 0 1 2.72.949 6.6 6.6 0 0 0-.831.937 3.08 3.08 0 0 0-1.89-.636c-1.099 0-2.047.558-2.561 1.372a.38.38 0 0 0-.07.244.4.4 0 0 0 .104.223c.147.176.437.328.778.328h2.825c-.133.428-.16.851-.103 1.25H3.85c-.68 0-1.334-.293-1.738-.777-.427-.513-.566-1.246-.131-1.935.744-1.179 2.092-1.955 3.619-1.955"})},i=(0,a(340498).wt)("people",n)},931956:(e,t,a)=>{a.d(t,{X:()=>l});var n=()=>a(56366),i=()=>a(534177),o=()=>a(10984),r=()=>a(211825),s=()=>a(43450);function l(e){const t=(0,s().R)(e),a=(0,r().G)(e);return(0,n().K8)((()=>{if(!(0,o().El)())return!1;const n=e.getSetting("invite_access");switch(n){case void 0:return!1;case"team_members":return a;case"team_owners":return t;default:(0,i().HB)(n)}}),[e,t,a])}},934999:(e,t,a)=>{a.d(t,{B:()=>o});a(296540);var n=a(474848);const i={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M8 9.875a.625.625 0 1 0 0 1.25h4a.625.625 0 1 0 0-1.25z"}),(0,n.jsx)("path",{d:"M3.125 4.75c0-.897.728-1.625 1.625-1.625h10.5c.898 0 1.625.728 1.625 1.625v1.57c0 .676-.413 1.256-1 1.5v7.43c0 .898-.727 1.625-1.625 1.625h-8.5a1.625 1.625 0 0 1-1.625-1.625V7.82c-.587-.244-1-.824-1-1.5zm11.5 3.195h-9.25v7.305c0 .207.168.375.375.375h8.5a.375.375 0 0 0 .375-.375zm1-1.625V4.75a.375.375 0 0 0-.375-.375H4.75a.375.375 0 0 0-.375.375v1.57c0 .205.164.372.369.375h10.512a.375.375 0 0 0 .369-.375"})]})},o=(0,a(340498).wt)("archiveBox",i)},972418:(e,t,a)=>{a.d(t,{lh:()=>r().l,bw:()=>s().b,UL:()=>l().U,lI:()=>m,IU:()=>h,Wo:()=>p().W,EF:()=>b().E,o2:()=>T().o});var n=()=>a(484714),i=()=>a(187174),o=()=>a(449506);var r=()=>a(714300),s=()=>a(83848),l=()=>a(477401),c=()=>a(56366),d=()=>a(176983),u=()=>a(975971);function m(e){let{spaceId:t}=e;const a=(0,n().v3)(),i=(0,d().J)();return(0,c().K8)((()=>{if(!t||!i)return;const e=u().A.getData(a,{spaceId:t});return null==e?void 0:e.billingData}),[a,t,i])}var p=()=>a(987427),v=()=>a(762433),f=()=>a(351360),g=()=>a(134217),S=()=>a(847554);function h(e,t){const a=(0,c().O$)(e),n=(0,S().b)(a),s=(0,c().K8)((()=>{var e;return null===(e=f().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),l=(0,r().l)({spaceId:s}),d=(0,c().K8)((()=>g().GU({billingData:l,spaceStore:f().default.state.currentSpaceStore})),[l]),[{value:u}]=(0,i().Yb)((()=>o().callApi({eventName:"isEmailEducation",environment:t,data:{}})),[t]);return!!u&&("failed"!==u.type&&(!!u.data.isEligible&&(!!a&&(!!l&&(!Boolean((0,v().KH)(l,"plan"))&&(d&&1===n))))))}var b=()=>a(314907),T=()=>a(86089)},976519:(e,t,a)=>{a.d(t,{q:()=>o});a(898992),a(354520);var n=()=>a(56366),i=()=>a(988499);function o(e){return(0,n().K8)((()=>{if(!e)return!1;const t=i().A.state.teams.filter((e=>e.isDefault()&&!e.isArchived()));return 1===t.length&&t[0].id===e}),[e])}},985395:(e,t,a)=>{a.d(t,{n:()=>r});var n=()=>a(56366),i=()=>a(441738),o=()=>a(749240);function r(){return(0,n().K8)((()=>{var e;const t=(null===(e=o().subscriptionDataStoreInstance.state)||void 0===e?void 0:e.addOns)??[];return(0,i().GI)(t)}),[])}},986863:(e,t,a)=>{a.d(t,{u:()=>o});var n=()=>a(645873);const i=new(n().O2)("teamPermissionsInviteWithModal",(async()=>await Promise.all([a.e(23806),a.e(75134),a.e(43380),a.e(9304),a.e(96346),a.e(36192),a.e(44711),a.e(53321),a.e(16471),a.e(90825),a.e(37353),a.e(49889),a.e(97727),a.e(55373),a.e(29151),a.e(16908),a.e(62475),a.e(3151),a.e(98629),a.e(58550),a.e(22900),a.e(85128),a.e(95555),a.e(90409),a.e(63077),a.e(74562),a.e(95794),a.e(46414),a.e(8184),a.e(99353),a.e(52681),a.e(14518),a.e(17713),a.e(28271),a.e(17254),a.e(4422),a.e(59794),a.e(67435),a.e(75355),a.e(48315),a.e(47123),a.e(847),a.e(5887),a.e(70769),a.e(97965),a.e(17989),a.e(3965),a.e(38911),a.e(9034),a.e(52012),a.e(56985),a.e(50142),a.e(20838),a.e(21627),a.e(88860),a.e(83210),a.e(26090),a.e(82472),a.e(96345),a.e(10596),a.e(73285),a.e(75659),a.e(78846),a.e(47858),a.e(13324),a.e(51860),a.e(15724),a.e(81141),a.e(27274),a.e(99346),a.e(92448),a.e(65638),a.e(72915),a.e(28721),a.e(69689),a.e(23463),a.e(25426),a.e(6463),a.e(91056),a.e(26483),a.e(29333),a.e(5396),a.e(1440),a.e(34576),a.e(95810),a.e(89109),a.e(3560),a.e(77169),a.e(24071),a.e(68610),a.e(67064),a.e(49978),a.e(3720),a.e(47762),a.e(85475),a.e(11740),a.e(97996),a.e(5066),a.e(35299),a.e(68117),a.e(14267),a.e(33731),a.e(30016),a.e(14410),a.e(49471),a.e(31185),a.e(75681)]).then(a.bind(a,487443)))),o=(0,n()._h)(i,(e=>e.TeamPermissionsInviteWithModal))},987427:(e,t,a)=>{a.d(t,{W:()=>o});var n=a(296540),i=()=>a(854418);function o(){const e=(0,i().t)(),[t,a]=(0,n.useState)();return(0,n.useEffect)((()=>{a(!(!e||!("company_employee_count"in e))&&parseInt(e.company_employee_count)>99)}),[e]),t}}}]);