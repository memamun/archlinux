"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[86250],{15975:(e,t,n)=>{n.r(t),n.d(t,{AIAddOnDiscountPopup:()=>y});var o=n(296540),s=()=>n(484714),r=()=>n(56366),i=()=>n(401497),u=()=>n(604341),a=()=>n(654601),d=()=>n(441738),c=()=>n(762433),p=()=>n(786508),l=()=>n(166386),f=()=>n(959013),S=()=>n(252105),_=()=>n(317909),m=()=>n(755199),g=()=>n(191264),A=()=>n(351360),b=()=>n(57605),h=()=>n(1346),P=()=>n(749356),I=()=>n(807778),v=()=>n(30858),D=()=>n(134217),O=()=>n(10984),C=()=>n(749240),w=n(474848);function y(){const e=(0,s().v3)(),[t,n]=o.useState(void 0);(0,o.useEffect)((()=>{(0,u().exposeDebugValue)("resetAddOnDiscountPopup",(()=>{const{currentUserSettingsStore:t}=A().default.state;t&&_().createAndCommit({userAction:"AddOnDiscountPopup.resetAddOnPromoPopup",environment:e,canUndo:!0,perform:e=>{m().mJ({userSettingsStore:t,transaction:e,data:{seen_ai_discount_popup:!1}})}})}))}),[e]);const{currentUserSettingsStore:y,currentSpaceStore:k}=(0,r().K8)((()=>{const{currentUserSettingsStore:e,currentSpaceStore:t}=A().default.state;return{currentUserSettingsStore:e,currentSpaceStore:t}}),[]),x=(0,r().O$)(C().subscriptionDataStoreInstance);(0,o.useEffect)((()=>{!async function(){if(!k)return;if(!x)return;if(!(0,D().qc)(x))return;if("unsubscribed_admin"!==x.type&&"subscribed_admin"!==x.type)return;const t=b().A.getData(e,{spaceId:k.id}),o=(0,c().Gm)(t);if("stripe"!==(null==t?void 0:t.provider)||!o)return;const s=D().RJ(x);if((0,d().GI)(null==s?void 0:s.addOns))return;const r=await P().z6(e,{spaceId:k.getSpaceId(),offerCampaign:"ai_fifty_percent_upgrade"}),i=(0,p().RS)(r);i&&(0,l().J5)(i)&&n(i)}()}),[e,k,x]);const U=(0,o.useCallback)((()=>{y&&(_().createAndCommit({userAction:"AddOnDiscountPopup.markSeen",environment:e,canUndo:!0,perform:e=>{m().mJ({userSettingsStore:y,transaction:e,data:{seen_ai_discount_popup:!0}})}}),S().u4(e,{name:"add_on_discount_popup_dismissed"}))}),[y,e]),J=(0,o.useCallback)((()=>{t&&(h().f_("ai"),h().Hq(t))}),[t]),M=(0,r().K8)((()=>!(!(0,l().J5)(t)||!(0,I().Ft)(e,(0,O().AI)()))),[t,e]),j=(0,i().IS)((e=>({icon:{width:20,height:20,fill:e.accentColors.purple[400]}})),[]);return M?(0,w.jsx)(g().f,{calloutId:"add_on_discount_popup",initialPromo:{icon:a().X,iconStyle:j.icon,header:(0,w.jsx)(f().sA,{id:"AddOnDiscountPopup.header",defaultMessage:"Add unlimited AI for {percentage} off?",values:{percentage:(0,l().J5)(t)?(0,v().wu)(t):void 0}}),description:(0,w.jsx)(f().sA,{id:"AddOnDiscountPopup.description",defaultMessage:"Project management is better with Notion AI. Add it on top of your paid plan with half off."})},steps:[],seenFeatureUserSetting:"seen_ai_discount_popup",userSettingsStore:y,allowExternalMouseEvents:!0,onDismiss:U,onTryFeatureClick:J,isUserEligible:M,onPopupSeen:()=>S().u4(e,{name:"add_on_discount_popup_seen"}),onLearnMore:()=>{t&&J(),U()},ctaMessage:(0,w.jsx)(f().sA,{id:"AddOnDiscountPopup.purchase.button",defaultMessage:"Claim your deal"})}):null}},191264:(e,t,n)=>{n.d(t,{f:()=>r});var o=()=>n(645873);const s=new(o().O2)("FeatureIntroPopup",(async()=>n.e(53147).then(n.bind(n,685926)))),r=(0,o()._h)(s,(e=>e.FeatureIntroPopup))}}]);