"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[29875],{131849:(e,t,o)=>{o.d(t,{a:()=>n});var a=()=>o(484714),r=()=>o(56366),i=()=>o(486130);function n(e){const t=(0,a().v3)();return(0,r().K8)((()=>{if(t.currentUser.id)return e.isMemberOrGuest(t.currentUser.id,i()._.getSpacePermissionGroupIds({userId:t.currentUser.id,spaceId:e.getSpaceId()}))}),[t.currentUser.id,e])}},149257:(e,t,o)=>{o.d(t,{A:()=>s});var a=o(296540),r=()=>o(959013),i=o(474848);const n=(0,r().YK)({message_placeholder:{id:"teamInviteLinkRequestPage.message.placeholder",defaultMessage:"Message (optional)"}});const s=function(e){const{teamStore:t,teamName:s,teamId:l,isModalOpen:d,onDismiss:c}=e,[u,m]=(0,a.useState)(""),g=(0,o(484714).v3)(),p=(0,r().tz)(),S=async()=>{await o(350648).Ip({environment:g,teamId:l,message:u}),c()},v=(0,o(401497).IS)((()=>({modal:{alignSelf:"center",overflow:"visible",padding:15,width:420},requestTitle:{display:"inline-flex",marginBottom:10},icon:{marginLeft:4,marginRight:4},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginLeft:20},input:{padding:8}})),[]);return(0,i.jsx)(o(957986).A,{open:d,onDismiss:c,innerStyle:v.modal,preventHideChildrenWhileOpening:!0,render:()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:v.requestTitle,children:(0,i.jsx)(r().sA,{id:"teamInviteLinkRequestModal.reasonForRequest.title",defaultMessage:"Request access to {icon} {teamName}",values:{teamName:s,icon:(0,i.jsx)(o(898808).x,{style:v.icon,store:t,disabled:!0,size:22})}})}),(0,i.jsx)(o(623580).A,{textarea:!0,style:v.input,value:u,onChange:e=>{m(e.target.value)},placeholder:p.formatMessage(n.message_placeholder)}),(0,i.jsxs)("div",{style:v.footer,children:[(0,i.jsx)(o(125565).A,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,i.jsx)(r().sA,{id:"teamInviteLinkRequestModal.caption",defaultMessage:"Your teamspace owners will approve or decline your request."})}),(0,i.jsx)(o(204063).A,{size:"lg",style:v.requestInvitesButton,onClick:S,children:(0,i.jsx)(r().sA,{id:"teamInviteLinkRequestModal.requestAccessButton.label",defaultMessage:"Request"})})]})]})})}},192940:(e,t,o)=>{o.d(t,{h:()=>i});var a=()=>o(56366),r=()=>o(37433);function i(e){return(0,a().K8)((()=>{var t;return void 0===e?0:(null===(t=(0,r().PF)(e))||void 0===t?void 0:t.memberCountWithGuests)??0}),[e])}},211825:(e,t,o)=>{o.d(t,{G:()=>n});var a=()=>o(484714),r=()=>o(56366),i=()=>o(486130);function n(e){const t=(0,a().v3)().currentUser.id;return(0,r().K8)((()=>Boolean(void 0!==t&&e.isNonGuestMember(t,i()._.getSpacePermissionGroupIds({userId:t,spaceId:e.getSpaceId()})))),[t,e])}},341974:(e,t,o)=>{o.d(t,{z:()=>f});var a=o(296540),r=()=>o(484714),i=()=>o(56366),n=()=>o(401497),s=()=>o(284371),l=()=>o(437622),d=()=>o(37433),c=()=>o(515512),u=()=>o(211825),m=()=>o(959013),g=()=>o(493823),p=o(474848);const S=function(e){const{teamStore:t,from:n,navigateToTeamHomeOnJoin:s,style:l,hoveredStyle:d,icon:c,isRed:u}=e,S=(0,r().v3)(),v=(0,i().K8)((()=>o(351360).default.state.currentSpaceStore),[]),h=(0,a.useCallback)((async()=>{v&&await o(848237).e2({environment:S,teamStore:t,currentSpaceStore:v,from:n,andNavigateToTeamHome:s??!1})}),[v,S,t,n,s]);return(0,p.jsx)(g().p,{style:l,hoveredStyle:d,onClick:h,icon:c,isRed:u,children:(0,p.jsx)(m().sA,{id:"outlinerTeamToggleButton.joinTeamButton",defaultMessage:"Join"})})};var v=()=>o(655784);const h=function(e){const{teamStore:t,style:r,hoveredStyle:n}=e,[s,l]=(0,a.useState)(!1),d=(0,i().K8)((()=>t.getName()),[t]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(g().p,{style:r,hoveredStyle:n,onClick:()=>l(!0),children:(0,p.jsx)(m().sA,{id:"teamRequestButton.requestButton.label",defaultMessage:"Request"})}),(0,p.jsx)(o(149257).A,{teamStore:t,teamName:d,teamId:t.id,isModalOpen:s,onDismiss:()=>l(!1)})]})};function f(e){const{teamStore:t,style:o,hoveredStyle:a}=e,m=(0,r().v3)(),g=(0,c().Q)(),f=(0,u().G)(t),b=(0,i().K8)((()=>t.getTeamAccessLevel()),[t]),y=(0,n().IS)((e=>({joinTeamButton:{maxHeight:26,marginLeft:10,paddingLeft:10,paddingRight:10,borderRadius:100,fontSize:13,fontWeight:s().Wy.semibold,background:e.buttonHoveredBackground,alignSelf:"center",...o},joinTeamButtonHoveredStyle:{background:e.buttonPressedBackground,...a}})),[o,a]),T=(0,i().K8)((()=>(0,d().A2)({membership:t.getRawMembership()})&&(0,l().s7)(m)),[m,t]),x=!f&&"open"===b||T,j=!f&&"closed"===b;return g?null:f?(0,p.jsx)(v().A,{...e,style:y.joinTeamButton,hoveredStyle:y.joinTeamButtonHoveredStyle}):x?(0,p.jsx)(S,{...e,style:y.joinTeamButton,hoveredStyle:y.joinTeamButtonHoveredStyle}):j?(0,p.jsx)(h,{teamStore:t,style:y.joinTeamButton,hoveredStyle:y.joinTeamButtonHoveredStyle}):null}},350648:(e,t,o)=>{o.d(t,{D2:()=>x,Ip:()=>b,Jk:()=>y,YT:()=>T,e2:()=>h,g:()=>f});o(898992),o(354520);var a=()=>o(584262),r=()=>o(798880),i=()=>o(946141),n=()=>o(449506),s=()=>o(246826),l=()=>o(436572),d=()=>o(426116),c=()=>o(317909),u=()=>o(972435),m=()=>o(437622),g=()=>o(351360),p=()=>o(848237),S=()=>o(263928);const v=(0,o(959013).YK)({joinTeamSuccessMessage:{id:"teamInviteLinkActions.joinTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},requestTeamSuccessMessage:{id:"teamInviteLinkActions.requestAccess.successMessage",defaultMessage:"Successfully requested membership"},requestTeamFailureMessage:{id:"teamInviteLinkActions.requestAccess.failureMessage",defaultMessage:"Failed to request membership"}});async function h(e){let{environment:t,userId:o,teamStore:a,user:r}=e;const n=a.getSpaceId();if(!n)return;await p().rU({environment:t,teamId:a.id,spaceId:n,teamUserInfo:r,isSettingDefaultTeam:!1,inviterId:o})&&(i().vo(t,{store:a,joined_role:"member",from:"team_invite_link"}),await f({environment:t,userId:o,teamStore:a}),l().D6({label:u().A.formatMessage(v.joinTeamSuccessMessage,{teamName:a.getName()})}))}async function f(e){let{environment:t,userId:o,teamStore:r}=e;const i=g().default.state.currentUserRootStore,n=r.getSpaceId();if(!n||!i)return;const s=i.getSpaceViewStores().filter((e=>e.getSpaceId()===n))[0];await d().tR({environment:t,spaceViewStore:s,userSettingsStore:void 0,userRootStore:i,pageVisitSource:a().y8.JoinTeam,navigationType:"switchingToOrLoadingSpace"}),await S().J({environment:t,spaceId:n,userId:o}),p().L0({environment:t,teamStore:r,shouldScroll:!0})}async function b(e){let{environment:t,teamId:o,message:a}=e;if(!t.currentUser.id)return;"success"===(await n().callApi({eventName:"requestAccess",environment:t,data:{type:"current-actor-to-team",teamId:o,message:a}})).type?(i().XQ(t,{teamId:o}),await T({environment:t}),new Promise((e=>setTimeout(e,500))).then((()=>{l().D6({label:u().A.formatMessage(v.requestTeamSuccessMessage)})}))):l().D6({label:u().A.formatMessage(v.requestTeamFailureMessage)})}async function y(e){let{environment:t,teamStore:o,accessRequestStore:a,status:n}=e;const l=a.getForActorId();if(!l)return;const d=a.getRecordModel({table:r().oo,id:l});if(d){if("approved"===n){const e=[{type:"member",entity_type:"user",user_id:d.id}];if(!(await p().Zd({environment:t,teamStore:o,teamMemberInfos:e,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})))return}c().createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:t,canUndo:!0,perform:e=>{s().zv({store:a,transaction:e,data:{resolved_time:Date.now(),resolved_by_table:r().oo,resolved_by_id:t.currentUser.id,status:n}})}}),i().GW(t,{store:o,resolution:n})}}async function T(e){let{environment:t}=e;const{lastVisitedSpaceView:o,userRootStore:r,userSettingsStore:i}=await(0,m().ex)({environment:t,disableRedirectUrl:!1});o?await d().tR({environment:t,spaceViewStore:o,userRootStore:r,userSettingsStore:i,pageVisitSource:a().y8.BackForward,navigationType:"switchingToOrLoadingSpace"}):await d().t9({environment:t,userRootStore:r,userSettingsStore:i,pageVisitSource:a().y8.BackForward})}async function x(e){let{environment:t,teamId:o}=e;const a=await n().callApi({eventName:"getTeamAccessRequestMetadata",environment:t,data:{teamId:o}});if("success"===a.type)return a.data}},418426:(e,t,o)=>{o.d(t,{$:()=>l});o(898992),o(354520),o(581454);var a=()=>o(484714),r=()=>o(56366),i=()=>o(468006),n=()=>o(605402),s=()=>o(486130);function l(e){const t=(0,a().v3)().currentUser.id;return(0,r().K8)((()=>{if(!e.isDefined())return[];return(0,i().ri)({rawMembers:e.getRawMembership(),groupsInSpace:n().A.state.permissionGroupsAndMemberCounts.map((e=>e.group))}).filter((o=>s()._.getSpacePermissionGroupIds({userId:t,spaceId:e.getSpaceId()}).has(o.getGroupId())))}),[t,e])}},515512:(e,t,o)=>{o.d(t,{Q:()=>l});var a=()=>o(484714),r=()=>o(56366),i=()=>o(437622),n=()=>o(351360),s=()=>o(749240);function l(){const e=function(){const e=(0,a().v3)();return(0,r().K8)((()=>{const t=n().default.state.currentSpaceStore,o=s().subscriptionDataStoreInstance.state;return t?i().IL(t)?o?{loading:!1,isUserTeamGuestOfSpace:i().Qx(e,o)}:{loading:!0}:{loading:!1,isUserTeamGuestOfSpace:!1}:{loading:!0}}),[e])}();return(0,r().K8)((()=>e.loading||e.isUserTeamGuestOfSpace),[e])}},629875:(e,t,o)=>{o.d(t,{kv:()=>be,Ay:()=>Ce,uA:()=>Ae,bH:()=>Me});var a=o(296540),r=()=>o(484714),i=()=>o(819121),n=()=>o(56366),s=()=>o(401497),l=()=>o(946065),d=()=>o(120739),c=()=>o(959013),u=()=>o(534177),m=()=>o(284371),g=()=>o(872539),p=()=>o(435009),S=()=>o(38337),v=()=>o(159588),h=()=>o(836251);function f(e){switch(e){case l().AX:case l().GU:return!0;case l().zt:case l().st:return!1;default:(0,u().HB)(e)}}var b=()=>o(963589),y=()=>o(578136),T=()=>o(22394),x=()=>o(100622),j=()=>o(946141),w=()=>o(145214),I=()=>o(406699),B=()=>o(218557),A=()=>o(859428),M=()=>o(986863),C=()=>o(196539),k=()=>o(753199),R=()=>o(396301),_=()=>o(115512),L=()=>o(962730),P=()=>o(351360),H=()=>o(210737),O=()=>o(663325),U=()=>o(205618),W=()=>o(848237),K=o(474848);const D=function(e){const{outlinerToggleButtonStore:t,outlinerTeamOnToggle:a,style:i}=e,{isMobile:l}=(0,r().Y0)(),d=(0,s().IS)((e=>({caratContainer:{fontSize:16,flexShrink:0,minHeight:20,minWidth:20,...i||{}},toggleButton:{color:e.lightIconColor}})),[i]),c=(0,n().K8)((()=>t.state.isHidden),[t]);return(0,K.jsx)("div",{style:d.caratContainer,children:(0,K.jsx)(o(702796).A,{isSidebar:!0,fill:!0,icon:"chevron",open:!c,color:d.toggleButton.color,onClick:a,disabled:l})})};var G=()=>o(341974),N=(o(898992),o(823215),o(581454),()=>o(798880)),z=()=>o(994006),q=()=>o(37433),F=()=>o(630116);function V(e){const t=(0,r().v3)(),[o,i]=(0,a.useState)(!1),{teamStore:l,teamOutlinerType:d}=e,u=(0,n().K8)((()=>(0,q().PF)(l)),[l]),m=(null==u?void 0:u.memberCountWithGuests)??0,{isReady:g,limitedUserStores:p,countRemainingUsers:S}=(0,n().K8)((()=>{let e=(null==u?void 0:u.sampleMemberUserIds)??[];e.length>5&&(e=e.slice(0,5));const t=e.map((e=>F().LU.createChildStore(l,{table:N().oo,id:e})))??[],o=t&&t.every((e=>e.isReady()));return{countRemainingUsers:(null==u?void 0:u.memberCount)??0-t.length,limitedUserStores:t,isReady:o}}),[l,u]),v=(0,s().IS)((e=>({membershipSection:{display:"flex",flexDirection:"row",fontSize:14,alignItems:"center",whiteSpace:"nowrap"},members:{display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginRight:10,marginLeft:5},avatar:{width:23,height:23,borderRadius:23,marginRight:-5,position:"relative"},teamMemberTooltipSectionLabel:{color:e.text.contrastSecondary,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em"},teamMemberList:{paddingTop:3},moreMessage:{marginLeft:2,marginTop:4,color:e.text.contrastSecondary}})),[]);return g?(0,K.jsx)("div",{style:v.membershipSection,children:(0,K.jsx)(A().A,{placement:L().W.Bottom,disableTooltip:m<=0,render:t=>{return(0,K.jsxs)("span",{...t,style:e.renderStyle,children:[m," ",(o=m,o>1?(0,K.jsx)(c().sA,{defaultMessage:"members",id:"teamBrowser.teamCard.MembershipPlural"}):(0,K.jsx)(c().sA,{defaultMessage:"member",id:"teamBrowser.teamCard.Membership"}))]});var o},renderTooltip:e=>(o||(i(!0),j().JG(t,{teamStore:l,outliner_type:d})),(0,K.jsx)("div",{...e,children:(0,K.jsxs)("div",{style:{marginBottom:4},children:[p.map((e=>(0,K.jsx)(z().A,{style:v.teamMemberList,userStore:e,avatarSize:18},e.id))),S>0&&(0,K.jsx)("div",{style:v.moreMessage,children:(0,K.jsx)(c().sA,{id:"teamMembersList.tooltip.overflowMessage",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:S}})})]})}))})}):null}var Y=()=>o(898808),J=()=>o(211825),E=()=>o(131849),Q=()=>o(192940),X=()=>o(863330),$=()=>o(362749),Z=()=>o(704152),ee=()=>o(8980),te=()=>o(989423),oe=()=>o(972435),ae=()=>o(611371),re=()=>o(338907),ie=()=>o(869562),ne=()=>o(205160);function se(e){let{teamStore:t,from:o,outlinerToggleButtonStore:i,shouldPersistToggleState:s}=e;const l=(0,r().v3)(),d=(0,n().K8)((()=>(0,re().u_)(l)),[l]),c=(0,a.useCallback)((()=>(0,re().u_)(l)),[l]);return d?(0,K.jsx)($().LL,{origin:"team",parentStore:t,onClick:c}):(0,K.jsx)(le,{teamStore:t,from:o,outlinerToggleButtonStore:i,shouldPersistToggleState:s,onClick:c})}function le(e){let{teamStore:t,from:o,outlinerToggleButtonStore:i,shouldPersistToggleState:l,onClick:d}=e;const c=(0,r().Y0)(),u=(0,r().v3)(),m=(0,n().K8)((()=>(0,ae().EF)(u)),[u]),p=(0,a.useCallback)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:a}=P().default.state;null==d||d(),e&&a&&(g().A5({environment:u,from:o,spaceStore:e,spaceViewStore:a,teamStore:t,outlinerToggleButtonStore:i,shouldPersistToggleState:l,andNavigate:!0,appendOrPrepend:"append"}),c.isMobile&&(0,ie().close)(),(0,te().u4)({environment:u,event:{eventName:"sidebar_new_page_click",eventProperties:{origin:"team",target_team_id:t.id}}}))}),[c.isMobile,u,o,d,i,l,t]),S=(0,s().IS)((e=>{const t=c.isMobile?32:20;return{button:{height:t,width:t,border:"none",borderRadius:3,marginLeft:c.isMobile?0:4},mediumText:{color:e.text.contrastSecondary},plusIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",color:e.legacyRedSelectColor,height:t,width:t},tooltip:{width:"204px"}}}),[c.isMobile]);return(0,K.jsx)(A().A,{textWrap:!m,renderTooltip:()=>m?oe().A.formatMessage(ne().K.addPageTooltip):(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{children:oe().A.formatMessage(de.disabledTooltipUpper)}),(0,K.jsx)("div",{children:oe().A.formatMessage(de.disabledTooltipLower)})]}),placement:L().W.Bottom,render:e=>(0,K.jsx)(Z().A,{style:S.button,onClick:p,ariaLabel:m?oe().A.formatMessage(ne().K.addPageTooltip):oe().A.formatMessage(de.disabledTooltipUpper),...e,disabled:!m,children:(0,K.jsx)("div",{style:S.plusIconContainer,children:(0,K.jsx)(ee().I,{icon:X().plusSmallIcon,size:"sm",color:c.isMobile?"tertiary":"secondary"})})}),style:m?{}:S.tooltip})}const de=(0,c().YK)({disabledTooltipUpper:{defaultMessage:"You’ve used up your free blocks.",id:"sidebar.addButton.disabledTooltipUpper"},disabledTooltipLower:{defaultMessage:"Upgrade to add a new page.",id:"sidebar.addButton.disabledTooltipLower"}});function ce(e){const{teamStore:t,label:o,isHovered:i,outlinerToggleButtonStore:d,teamOutlinerType:p,shouldPersistToggleState:S,outlinerTeamOnToggle:h,labelAriaId:b}=e,y=(0,r().Y0)().isMobile,N=f(p),z=(0,r().v3)(),{name:q,showAddPageButton:F}=(0,n().K8)((()=>({name:t.getName(),showAddPageButton:t.canAddOrRemoveTopLevelPages()})),[t]),X=(0,J().G)(t),$=(0,E().a)(t),Z=(0,Q().h)(t),ee=(0,n().K8)((()=>P().default.state.currentSpaceStore),[]),te=(0,n().uB)(void 0,U().A),oe=(0,r().Y0)(),ae=y||i,re=(0,s().IS)((e=>({teamHighlightAnimationBackgroundContainer:{backgroundColor:x().Ay.frontTertiaryButtonBackgroundHovered,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:-1,borderRadius:4},container:{position:"relative",display:"flex",alignItems:"center",minHeight:y?48:N?30:28,padding:N?"6px 0px":0},overflow:{marginLeft:5,justifySelf:"flex-end",height:22,display:"flex",alignItems:"center",opacity:i||y?1:0,transition:`opacity ${v().bM}`,...ae?{}:_().Qg},labelContainer:{flexShrink:1,flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",height:"100%",...m().RC},labelText:{display:"flex",width:"100%",alignItems:"center",lineHeight:m().K_.UISmall.desktop,marginBottom:1,minHeight:20,...m().RC},membersCountText:{display:"flex",fontSize:12,fontWeight:m().Wy.regular,lineHeight:1.3,color:e.lightTextColor,width:"100%",...m().RC},joinedBadge:{color:e.darkTextColor,lineHeight:1.2,...m().RC},joinedBadgeIcon:{display:"inline",color:e.darkTextColor,marginBottom:-1,marginRight:2,marginLeft:3,width:10,height:10},joinLeaveButton:{background:"none",color:e.mediumTextColor,fontSize:13,borderRadius:4,padding:"0px 4px",height:22,...ae?{}:_().Qg},joinLeaveButtonHovered:{background:e.buttonHoveredBackground},unjoinedOverflowMenu:{display:"flex",height:22,marginLeft:8,marginRight:-6,opacity:i?1:0,transition:`opacity ${v().bM}`,...ae?{}:_().Qg},teamIconContainer:{minHeight:20,minWidth:20,marginRight:9},closedTeamLabelContainer:{display:"flex"},closedTeamLabel:{display:"flex",alignItems:"center"},closedTeamTooltip:{whiteSpace:"normal",width:220},carat:{minHeight:20,height:20},iconAndToggleContainer:{display:"grid"},toggle:{gridColumn:1,gridRow:1,opacity:i?1:0,order:i?1:0,transition:`opacity ${v().bM}`},icon:{gridColumn:1,gridRow:1,opacity:i?0:1,transition:`opacity ${v().bM}`,order:i?0:1}})),[y,N,ae,i]),ie=(0,n().K8)((()=>t.getTeamPagesStore()),[t]),ne=(0,n().K8)((()=>O().A.state===t.id),[t.id]),le=(0,n().K8)((()=>t.getTeamAccessLevel()),[t]),[de,ce]=(0,a.useState)(void 0),ge=(0,a.useCallback)((e=>{let{draggingStores:t}=e;return!!ee&&(0,R().ox)({environment:z,draggingStores:t,parentStore:ie,currentSpaceStore:ee})}),[ee,z,ie]),pe=(0,a.useCallback)((async e=>{await g().RM({dropArgs:e,environment:z,type:"team",isDroppingOnFullSection:!1,parentStore:ie})}),[z,ie]);if(!q)return null;const Se=!$,ve=function(e,t){if(!t)return!1;switch(e){case l().GU:return!0;case l().zt:case l().st:case l().AX:return!1;default:(0,u().HB)(e)}}(p,X),he=!oe.isMobile&&!X&&"closed"===le,fe=e=>{H().A.addNamedPopup("team_more_actions"),j().lR(z,{store:t,from:e})},be=()=>{H().A.removeNamedPopup("team_more_actions")};return(0,K.jsxs)(B().Tl,{dropTargetKey:W().pW(t),canDropOnto:!e.isExpanded,shouldShowDropZone:!0,canAcceptDrop:ge,onSelectableDrop:pe,children:[(0,K.jsx)(I().Ay,{popupType:I().z7.Popup,alignmentToOrigin:I().yP.Start,placementToOrigin:I().sx.Right,preventSlideUpTransition:!0,preventScaleTransition:!0,originRect:de,render:e=>(0,K.jsx)(C().B1,{teamStore:t,permissionsInviteStore:te,onDismiss:e.close,from:"teamSidebar"}),renderOrigin:e=>{let{onClick:a}=e;return(0,K.jsxs)("div",{style:re.container,onContextMenu:e=>{!oe.isMobile&&(0,k().SQ)({event:e,context:k().y$.EditorContextMenu,callback:()=>{e.preventDefault(),ce(new DOMRect(e.clientX,e.clientY)),a()}})},children:[oe.isMobile?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(D,{store:t,outlinerToggleButtonStore:d,outlinerTeamOnToggle:h}),(0,K.jsx)("div",{style:re.teamIconContainer,children:(0,K.jsx)(Y().x,{size:20,store:t,disabled:!0,style:{fontWeight:m().Wy.medium}})})]}):(0,K.jsxs)("div",{style:re.iconAndToggleContainer,children:[(0,K.jsx)("div",{style:re.icon,children:(0,K.jsx)("div",{style:re.teamIconContainer,children:(0,K.jsx)(Y().x,{size:20,store:t,disabled:!0,style:{fontWeight:m().Wy.medium}})})}),(0,K.jsx)("div",{style:re.toggle,children:(0,K.jsx)(D,{store:t,outlinerToggleButtonStore:d,outlinerTeamOnToggle:h,style:N||ae?re.carat:_().Qg})})]}),(0,K.jsxs)("div",{style:re.labelContainer,children:[(0,K.jsx)("div",{style:re.labelText,id:b,children:o}),N&&void 0!==Z&&(0,K.jsxs)("div",{style:re.membersCountText,children:[ee&&(0,K.jsx)(V,{teamStore:t,renderStyle:re.membersCountText,teamOutlinerType:p}),he&&(0,K.jsx)(A().A,{placement:L().W.Bottom,renderTooltip:e=>(0,K.jsx)("div",{style:re.closedTeamTooltip,...e,children:ue({accessLevel:le})}),render:e=>(0,K.jsxs)("div",{style:re.closedTeamLabel,...e,children:[" ","·"," ",(0,K.jsx)(c().sA,{id:"outlinerTeamToggleButton.closedTeamLabel",defaultMessage:"Closed"})]})}),ve&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("span",{children:" "})," ·",(0,K.jsx)("span",{children:(0,T().o)(re.joinedBadgeIcon)}),(0,K.jsx)("span",{style:re.joinedBadge,children:(0,K.jsx)(c().sA,{id:"outlinerTeamToggleButton.joinedBadge",defaultMessage:"Joined"})})]})]})]}),X&&(0,K.jsxs)("div",{style:re.overflow,children:[(0,K.jsx)(C().eE,{teamStore:t,from:p,onPopupClick:()=>fe(p),onPopupClose:be}),F&&!oe.isMobile&&(0,K.jsx)(se,{teamStore:t,outlinerToggleButtonStore:d,shouldPersistToggleState:S,from:me(p)})]}),!X&&(0,K.jsx)("div",{style:re.unjoinedOverflowMenu,children:(0,K.jsx)(C().eE,{teamStore:t,from:p,hideJoin:!0,onPopupClick:()=>fe(p),onPopupClose:be})}),!oe.isMobile&&Se&&(0,K.jsx)(G().z,{style:re.joinLeaveButton,hoveredStyle:re.joinLeaveButtonHovered,teamStore:t,placement:L().W.Right,from:"sidebar_team_modal",navigateToTeamHomeOnJoin:!0}),F&&oe.isMobile&&(0,K.jsx)("div",{style:{...re.overflow,...ae?{}:_().Qg},children:(0,K.jsx)(se,{teamStore:t,outlinerToggleButtonStore:d,shouldPersistToggleState:S,from:me(p)})}),(0,K.jsx)(w().A,{visible:ne,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:re.teamHighlightAnimationBackgroundContainer})]})},onClick:()=>fe("teamSidebar"),onClose:be}),(0,K.jsx)(M().u,{permissionsInviteStore:te,store:t})]})}function ue(e){let{accessLevel:t}=e;if("private"===t)return(0,K.jsx)(c().sA,{id:"teamJoinLeaveButton.joinTeam.privateTeamTooltip",defaultMessage:"You can only join a private teamspace with an invite from a member"})}function me(e){switch(e){case l().AX:case l().zt:return"sidebar_team_section_browser";case l().GU:return"sidebar_team_section_browser_search";case l().st:return"sidebar_team_section";default:(0,u().HB)(e)}}var ge=()=>o(508496);const pe=function(e){let{type:t,from:i,disableTooltip:n,labelTooltip:d,spaceStore:m,spaceViewStore:p,shouldPersistToggleState:S,outlinerToggleButtonStore:v,fromSecondarySidebar:h,onClick:f}=e;const y=(0,r().v3)(),T=y.device.isMobile,x=function(e){switch(e){case"bookmarks":case"private":case"shared":case"team":case"workspace":case l().yy:return!1;case l().zt:case l().AX:case l().GU:case l().st:return!0;default:(0,u().HB)(e)}}(t),j=(0,c().tz)(),w=(0,b().X)("sidebar_add_new_pages_to_bottom"),I=(0,a.useRef)(null),B=(0,a.useCallback)((async()=>{if(x)W().vn("sidebar_team_section");else{if(!p)return;if("team"===t||t===l().yy)return;if((0,re().u_)(y)&&"on"===ge().default.getEligibleGroup({experimentId:"packaging_open_modal_private_section_plus_button",defaultGroup:"control"})){const{openTemplateOnboardingModal:e,getTemplateOnboardingVersion:t}=await o(373444).O.load();return void e({origin:"sidebar_private_new_page",parentStore:m,template:void 0,version:t({template:void 0})})}o(116225).u4({name:"page_created",args:{type:t,from:i}}),g().SE({environment:y,spaceStore:m,spaceViewStore:p,type:t,outlinerToggleButtonStore:v,outlinerItemFrom:i,prepend:!w,shouldPersistToggleState:S}),f&&f()}}),[x,w,y,i,f,v,S,m,p,t]),M=o(900652).zg(),C=(0,s().IS)((e=>({plusButton:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:4,marginLeft:T||h?0:4,...h?M.button:{}},plusIcon:{fill:e.mediumIconColor,width:14,height:14,...h?M.icon:{}},tutorialTooltip:{width:230},tutorialText:{fontSize:16,lineHeight:.85},labelTooltip:{color:e.text.contrastSecondary}})),[T,h,M]),k=x?j.formatMessage({defaultMessage:"New teamspace",id:"sidebar.addButton.addTeamTooltip"}):j.formatMessage({defaultMessage:"Add a page",id:"sidebar.addButton.addPageTooltip"});return(0,K.jsx)(A().A,{textWrap:!1,disableTooltip:n,renderTooltip:()=>(0,K.jsxs)(K.Fragment,{children:[k,(0,K.jsx)("br",{}),(0,K.jsx)("span",{style:C.labelTooltip,children:!x&&d})]}),placement:L().W.Bottom,render:e=>(0,K.jsxs)(Z().A,{ariaLabel:k,style:C.plusButton,mobileFeedback:T,onClick:B,className:"private"===t?"shadow-cursor-new-page-sidebar":void 0,...e,children:[(0,K.jsx)("span",{ref:I}),(0,K.jsx)(ee().I,{icon:X().plusSmallIcon,size:"sm",color:T?"tertiary":"secondary"})]})})};var Se=()=>o(644914),ve=()=>o(227440),he=()=>o(929450),fe=()=>o(490044);const be=12,ye={bookmarks:S().ojI,workspace:S().kRA,shared:S().c6k,private:S().MaD,offline:S().mLD,team:S().zqk,[l().zt]:S().Pji,[l().AX]:S().oDg,[l().GU]:S().kyo,[l().st]:S().Of1,[l().yy]:S().wgf};function Te(e){const{type:t,renderSidebar:i,isLastTeam:d,marginBottomOverrideWhenExpanded:c,marginBottomOverrideWhenCollapsed:u,initialToggleState:m,shouldPersistToggleState:g}=e,p=(0,r().v3)(),{isTablet:S}=(0,r().Y0)(),v=(0,b().X)("tablet_refresh_gate"),h=(0,n().uB)(e.outlinerToggleButtonStore,o(633892).A);(0,o(852507).l)((()=>{if(m&&h.setState({...h.state,isHidden:"hidden"===m}),!g)return;const t=function(e){const{type:t,spaceViewStore:o}=e;if(t===l().yy)return;if("team"===t)return he().YB(o,e.teamStore.id);return(0,Se().LW)(o,t)}(e);if(!t)return;const a=o(763884).A.get({userId:p.currentUser.id,key:t});a&&h.setState({...h.state,isHidden:a})}));const f=(0,n().K8)((()=>h.state.isHidden),[h]),y=ye[t],T=(0,a.useRef)(null),x=(0,a.useId)(),j=(0,a.useId)(),w=(0,s().IS)((()=>({toggle:{marginBottom:f||d&&!p.device.isMobile?u:c??(S&&v)?14:be,width:"100%",display:"flex",flexDirection:"column",gap:1}})),[f,d,p,u,c,S,v]);return(0,K.jsxs)("div",{ref:T,style:w.toggle,className:`${y}-container`,children:[p.device.isMobile&&"team"===t?(0,K.jsx)(xe,{...e,outlinerToggleButtonStore:h,isHidden:f,labelAriaId:j,contentsAriaId:x}):(0,K.jsx)(je,{...e,outlinerToggleButtonStore:h,isHidden:f,labelAriaId:j,contentsAriaId:x}),!f&&i({headerRef:T,labelAriaId:j,contentsAriaId:x})]})}function xe(e){const{type:t}=e,o=ye[t],a=(0,s().IS)((e=>({sidebarItem:{padding:0},sidebarItemChildren:{overflow:"visible"}})),[]);return(0,K.jsx)(fe().A,{className:o,style:a.sidebarItem,childrenStyle:a.sidebarItemChildren,right:(0,K.jsx)(Ie,{right:e.right,from:e.from,showAddButton:e.showAddButton,type:e.type,spaceStore:e.spaceStore,spaceViewStore:e.spaceViewStore,shouldPersistToggleState:e.shouldPersistToggleState,outlinerToggleButtonStore:e.outlinerToggleButtonStore}),children:(0,K.jsx)(je,{...e})})}function je(e){const{type:t,isHidden:o,teamOutlinerType:c,teamStore:u,labelAriaId:S,contentsAriaId:f,forceHoveredButtonStyle:T,spaceViewStore:x,shouldPersistToggleState:j,outlinerToggleButtonStore:w}=e,I=(0,r().v3)(),{isMobile:B}=I.device,{isTablet:A}=(0,r().Y0)(),[M,C]=(0,a.useState)(!1),[k,R]=(0,a.useState)(!1),_=M||k||Boolean(T),L=(0,n().K8)((()=>"team"===t&&(0,h().Gn)({environment:I,teamStore:u})),[I,u,t]),P=(0,b().X)("tablet_refresh_gate"),H=ye[t],O=(0,Se().ab)(),U=(0,s().IS)((e=>({label:{...Me(e),..."team"===t&&{width:"100%"},..._&&!A&&{color:e.darkTextColor},...B&&"team"!==t&&{fontWeight:A&&P?m().Wy.regular:m().Wy.semibold,paddingLeft:A&&P?5:8,fontSize:A&&P?15:13}},button:{...!("team"===t&&B)&&Ae(c),...(0,v().ic)(),...!P&&B&&"team"!==t&&{boxShadow:`0 1px 0 ${e.regularDividerColor}`},..."team"===t&&{width:"100%",...(0,v().sQ)({isMobile:B})},...L&&O.currentSelectedSidebarItem},hoveredButton:{background:e.sidebarItemSelectedBackground},rightLabelWrapper:{marginLeft:"auto",marginRight:A&&P?8:void 0}})),[B,t,_,c,L,O.currentSelectedSidebarItem,A,P]),W=(0,a.useCallback)((()=>{!function(e,t,o,a,r,i,n){const{isHidden:s}=n.state,d=!s;"team"===t?he().Of({environment:e,spaceViewStore:o,teamStore:a,outlinerToggleButtonStore:n,newIsHidden:d,shouldPersistToggleState:r,teamOutlinerType:i,isExplicitUserAction:!0}):t===l().yy?g().Wx({environment:e,type:t,outlinerToggleButtonStore:n,newIsHidden:d,shouldPersistToggleState:!1}):g().Wx({environment:e,spaceViewStore:o,type:t,outlinerToggleButtonStore:n,newIsHidden:d,shouldPersistToggleState:r})}(I,t,x,u,j,c,w)}),[I,t,x,u,c,j,w]),D=(0,a.useCallback)((e=>{u&&p().navigateOnBaseUrl({environment:I,url:(0,d().a)({teamId:u.id}),openInNew:e.metaKey||e.ctrlKey?"tab":void 0})}),[I,u]),G=(0,a.useCallback)((()=>C(!0)),[C]),N=(0,a.useCallback)((()=>C(!1)),[C]),z=(0,a.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,i().p)(t)&&R(!0)}),[R]),q=(0,a.useCallback)((()=>R(!1)),[R]),F=(0,n().K8)((()=>u&&(0,y().D)({isMobileNative:I.device.isMobileNative,disableExposureLogging:!0})),[u,I]),V=(0,n().K8)((()=>!ve().A.state.online&&I.device.isElectron&&F&&ge().default.checkGate({gateName:"download_for_offline"})),[I,F]);return(0,K.jsxs)(Z().A,{className:H,..."team"===t?{"aria-labelledby":S}:{id:S},"aria-expanded":!o,"aria-controls":f,mobileFeedback:B,style:U.button,hoveredStyle:U.hoveredButton,hovered:!!T||void 0,onClick:A?W:F?D:W,onMouseMove:G,onMouseLeave:N,onFocus:z,onBlur:q,disabled:"publicPageTemplateIncludes"===t||V,disabledFeedback:V,children:[(0,K.jsx)("span",{style:U.label,children:"team"===t?(0,K.jsx)(ce,{isHovered:_,isExpanded:!o,teamStore:e.teamStore,label:e.teamHeaderLabel,outlinerToggleButtonStore:e.outlinerToggleButtonStore,outlinerTeamOnToggle:W,shouldPersistToggleState:e.shouldPersistToggleState,teamOutlinerType:e.teamOutlinerType,labelAriaId:e.labelAriaId}):Be(t)?e.sectionLabel:we(t)}),(0,K.jsx)("div",{style:U.rightLabelWrapper,children:(0,K.jsx)(Ie,{right:e.right,showAddButton:e.showAddButton,from:e.from,type:t,spaceStore:e.spaceStore,spaceViewStore:e.spaceViewStore,shouldPersistToggleState:e.shouldPersistToggleState,isHovered:_,outlinerToggleButtonStore:e.outlinerToggleButtonStore})})]})}function we(e){switch(e){case"bookmarks":return(0,K.jsx)(c().sA,{defaultMessage:"Favorites",id:"sidebar.favoritesSection.header"});case"workspace":return(0,K.jsx)(c().sA,{defaultMessage:"Workspace",id:"sidebar.workspaceSection.header"});case"private":return(0,K.jsx)(c().sA,{defaultMessage:"Private",id:"sidebar.privateSection.header"});case"shared":return(0,K.jsx)(c().sA,{defaultMessage:"Shared",id:"sidebar.sharedSection.header"});default:(0,u().HB)(e)}}function Ie(e){let{right:t,showAddButton:o,isHovered:a,...i}=e;const{isTablet:n}=(0,r().Y0)(),l=(0,b().X)("tablet_refresh_gate"),d=(0,s().IS)((()=>({wrapper:{display:"flex",alignItems:"center",gap:n&&l?12:void 0,opacity:n&&l||a?1:0,pointerEvents:a?"auto":"none",transition:`opacity ${v().bM}`}})),[a,n,l]);return(0,K.jsxs)("div",{style:d.wrapper,children:[t,o&&(0,K.jsx)(pe,{...i})]})}function Be(e){return"teamSidebar"===e||"teamBrowserJoinedTeams"===e||"teamBrowserUnjoinedTeams"===e||"teamBrowserSearch"===e||"publicPageTemplateIncludes"===e}function Ae(e){return{display:"flex",alignItems:"center",borderRadius:6,cursor:void 0,...!(e&&f(e))&&{height:Se().Zr}}}function Me(e){return{textTransform:"initial",fontSize:12,lineHeight:1,color:e.sidebarSecondaryColor,fontWeight:m().Wy.medium,transition:"color 100ms ease-out"}}const Ce=a.memo(Te)},655784:(e,t,o)=>{o.d(t,{A:()=>c});o(581454);var a=o(296540),r=()=>o(484714),i=()=>o(56366),n=()=>o(959013),s=()=>o(496603),l=()=>o(418426),d=o(474848);const c=function(e){const{teamStore:t,from:c,onLeavingTeam:u,style:m,hoveredStyle:g,icon:p,isRed:S,placement:v,alignment:h,buttonInternals:f}=e,b=(0,r().v3)(),y=(0,i().K8)((()=>o(351360).default.state.currentSpaceStore),[]),T=(0,l().$)(t),x=(0,a.useCallback)((async()=>{if(!y)return;await o(848237).JC({environment:b,teamStore:t,from:c,userGroupsInTeam:T})&&(null==u||u())}),[y,b,t,c,T,u]),j=(0,d.jsx)(n().sA,{id:"teamJoinLeaveButton.leaveTeam.enabledTooltip",defaultMessage:"Click to leave teamspace"}),w=function(e){let{teamStore:t}=e;const o=(0,r().v3)(),a=o.currentUser.id,{isDefaultTeam:c}=(0,i().K8)((()=>({isDefaultTeam:t.isDefault()})),[t]),u=(0,l().$)(t),m=(0,i().K8)((()=>{if(!t.isReady())return!1;const{ownerUserIds:e,ownerGroupIds:o}=t.getAllOwnerIds();return Boolean(a&&t.isOwner(a)&&e.length+o.length===1)}),[t,a]);return function(e){let{isDefaultTeam:t,isOnlyTeamOwner:o,userGroupsInTeam:a}=e;if(t)return(0,d.jsx)(n().sA,{id:"teamBrowser.teamCard.leaveTeam.defaultTeamTooltip",defaultMessage:"You can’t leave this teamspace because everyone in the workspace must be a member"});if(o)return(0,d.jsx)(n().sA,{id:"teamJoinLeaveButton.leaveTeam.onlyOwnerTooltip",defaultMessage:"Invite another teamspace owner to leave this teamspace"});if(a.length>0)return(0,d.jsx)(n().sA,{id:"teamBrowser.teamCard.leaveTeam.groupTooltip",defaultMessage:"{groupNames, plural, one {You can't leave this teamspace because you're a member of multiple groups, {groupNames}.} other {You can't leave this teamspace because you're a member of the group, {groupNames}.}}",values:{groupNames:s().oE(a.map((e=>e.name))).join()}})}({isDefaultTeam:c,isOnlyTeamOwner:m,userGroupsInTeam:u})}({teamStore:t}),I=Boolean(w),B=I?w:j;return(0,d.jsx)(o(859428).A,{style:I?{width:240}:void 0,disableTooltip:!Boolean(B),renderTooltip:e=>(0,d.jsx)("div",{...e,children:B}),textWrap:I,placement:v,alignment:h,render:e=>(0,d.jsx)(o(493823).p,{...e,style:m,hoveredStyle:g,onClick:x,disabled:I,disabledFeedback:I,icon:p,isRed:S,children:f||(0,d.jsxs)(d.Fragment,{children:[(0,o(831310).o)({width:12.5,marginRight:4}),(0,d.jsx)(n().sA,{id:"teamBrowser.teamCard.button.joined",defaultMessage:"Joined"})]})})})}},986863:(e,t,o)=>{o.d(t,{u:()=>i});var a=()=>o(645873);const r=new(a().O2)("teamPermissionsInviteWithModal",(async()=>await Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(62475),o.e(3151),o.e(98629),o.e(58550),o.e(22900),o.e(85128),o.e(95555),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(72915),o.e(28721),o.e(69689),o.e(23463),o.e(25426),o.e(6463),o.e(91056),o.e(26483),o.e(29333),o.e(5396),o.e(1440),o.e(34576),o.e(95810),o.e(89109),o.e(3560),o.e(77169),o.e(24071),o.e(68610),o.e(67064),o.e(49978),o.e(3720),o.e(47762),o.e(85475),o.e(11740),o.e(97996),o.e(5066),o.e(35299),o.e(68117),o.e(14267),o.e(33731),o.e(30016),o.e(14410),o.e(49471),o.e(31185),o.e(75681)]).then(o.bind(o,487443)))),i=(0,a()._h)(r,(e=>e.TeamPermissionsInviteWithModal))}}]);