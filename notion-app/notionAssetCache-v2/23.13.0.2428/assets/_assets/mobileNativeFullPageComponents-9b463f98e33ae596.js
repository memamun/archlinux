"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[43647,66042],{50747:(e,t,o)=>{o.r(t),o.d(t,{MobileNativeFullPageComponents:()=>R});var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(110750),a=()=>o(183558),l=()=>o(240562),d=()=>o(721273),c=()=>o(610716),u=()=>o(362749),p=()=>o(631611),g=()=>o(874753),m=()=>o(295169),b=()=>o(933371),h=o(474848);const v=function(){const e=(0,n().v3)(),[t,a]=(0,i.useState)(!1),l=(0,s().K8)((()=>b().X.state),[]),d=(0,s().K8)((()=>(0,r().Xz)(e.TabbedRouterStore.state)),[e]),c=(0,s().K8)((()=>{var e,t;return Boolean("web"===d.type&&("nativeTab"===d.route.name&&"assistant"===d.route.tab||"nativeTab"===(null===(e=d.redirectedTo)||void 0===e?void 0:e.route.name)&&"assistant"===(null===(t=d.redirectedTo)||void 0===t?void 0:t.route.tab)))}),[d]),u=(0,s().K8)((()=>e.WindowSizeStore.state.paddingTopCSS),[e.WindowSizeStore]),v=(0,o(575301).o_)(),f=(0,o(140862).A)(!0),C=(0,s().K8)((()=>({paddingLeft:e.WindowSizeStore.state.paddingLeftCSS,paddingRight:e.WindowSizeStore.state.paddingRightCSS})),[e]);return(0,o(187174).Yb)((async()=>{const{assistantActions:t}=await o(650829).assistantDependency.load(),i=m().default.getActiveSessionId();if(g().P.setState({...g().P.state,from:l.from??"mobile_app_start"}),!i||l.shouldReset){var n;b().X.update((e=>({...e,shouldReset:!1})));const i=Boolean(l.query&&l.query.length>o(260488).XM),s=i?void 0:l.query;(0,o(501305).setPrimeTextInput)(s);const r=m().default.getNextSessionId();if(i){const i=await t.resetAndInitializeAssistantSession({environment:e});await t.commitHumanStep({environment:e,text:(0,o(919709).x9d)(l.query),sessionId:i.sessionId,assistantSurfaceType:"mobileNative"})}const d=null===(n=m().default.getSessionContext(r))||void 0===n||null===(n=n.assistantConfigurationStore)||void 0===n?void 0:n.state,c=m().default.getSessionContext(r);o(140022).trackAssistantOpened(e,{hasQuery:i,from:l.from??"mobile_app_start",searchSessionId:l.searchSessionId,isReminder:!1,reminderType:void 0,sessionId:r,startTimestamp:(null==d?void 0:d.sessionStartTimestamp)||Date.now(),transcript:(null==c?void 0:c.evaluator.getTranscript())||[]}),a(!0)}else c&&a(!0)}),[l.shouldReset,l.query,l.from,l.searchSessionId,c,e]),(0,i.useEffect)((()=>{c&&o(577454).assistantMenuActions.navigateToView({view:"chat"})}),[c]),(0,i.useEffect)((()=>{var o;c&&t&&(null===(o=e.mobileNative)||void 0===o||o.markTransitionReady({type:"assistant"}))}),[e.mobileNative,c,t]),(0,h.jsx)("div",{style:{paddingTop:u,paddingBottom:v,...C,flex:1,minWidth:0},...f,children:(0,h.jsx)(p().hP,{surface:p().wy.mobileNative,children:(0,h.jsx)(o(523211).e,{onClose:()=>o(435009).aX(e)})})})};var f=()=>o(959013),C=()=>o(537941),x=()=>o(722872),y=()=>o(928600),S=()=>o(125565);function A(){return(0,h.jsx)(S().A,{style:{textAlign:"center"},children:(0,h.jsx)(f().sA,{defaultMessage:"Please go online to manage members.",id:"mobileMembers.goOnline.prompt"})})}function j(e){C().navigateToHomeTab(e)}const M=function(){const e=(0,n().v3)(),t=(0,s().K8)((()=>o(351360).default.state.currentSpaceStore),[]),r=(0,o(397103).h)(),a=(0,s().K8)((()=>o(227440).A.state.online),[]);return(0,i.useEffect)((()=>{t&&o(224701).$D({environment:e,spaceId:t.id})}),[e,t]),r&&t?(0,h.jsx)(y().A,{menuType:x().gu.Modal,title:(0,h.jsx)(f().sA,{defaultMessage:"Members",id:"mobileMembers.mobileMemberSettings.title"}),left:(0,h.jsx)(o(45552).MobileModalBackButton,{}),onClickLeft:()=>j(e),onCancel:()=>j(e),shouldRenderMobileRefresh:!0,children:a?(0,h.jsx)(o(287978).A,{store:t,isMobile:!0}):(0,h.jsx)(A,{})}):null};var T=()=>o(824555);const w=function(){const e=(0,n().v3)(),t=(0,i.useCallback)((()=>{C().navigateToHomeTab(e)}),[e]),{isTemplatesOpen:r}=(0,s().K8)((()=>({isTemplatesOpen:o(75368).A.state.open})),[]);return(0,h.jsx)(y().A,{menuType:x().gu.Modal,whiteBackground:!0,disableHeaderShadow:r,hideMobileTopbar:!0,title:(0,h.jsx)(f().sA,{defaultMessage:"Templates",id:"mobileActionBar.templates.modalTitle"}),right:(0,h.jsx)(o(381495).CloseTemplatesPopupComponent,{handleClick:t,style:{marginRight:20}}),disableScroller:!0,onClickRight:t,shouldRenderRightDirectly:!0,onCancel:t,forceFullScreenSlideUp:!0,children:(0,h.jsx)(o(212921).A,{onTemplateItemSelect:t=>{o(413677).openWithItem({environment:e,item:t,createNewPage:!0,isPrivate:!0,disablePointerEvents:!0})},onClose:t})})};var k=()=>o(401461);function R(e){const t=(0,n().v3)(),[o,p]=(0,i.useState)(""),g=(0,s().K8)((()=>{const e=(0,r().Xz)(t.TabbedRouterStore.state);if("web"===e.type){var o,i;if("nativeTab"===(null===(o=e.redirectedTo)||void 0===o?void 0:o.route.name))return null===(i=e.redirectedTo)||void 0===i?void 0:i.route.tab;if("nativeTab"===e.route.name)return e.route.tab}}),[t]);(0,i.useEffect)((()=>{var e;o!==g||"trash"!==g&&"members"!==g&&"help"!==g&&"templates"!==g||(null===(e=t.mobileNative)||void 0===e||e.markTransitionReady({type:g}))}),[t.mobileNative,g,o]);const{route:m}=e;return(0,i.useEffect)((()=>{p(m.tab)}),[m.tab]),"updates"===m.tab?(0,h.jsx)(k().A,{format:d().Cn.RenderAsPage,renderId:(0,a().Ay)()}):"assistant"===m.tab?(0,h.jsx)(v,{}):"trash"===m.tab?(0,h.jsx)("div",{style:{width:"100%"},children:(0,h.jsx)(u().V2,{})}):"settings"===m.tab?(0,h.jsx)("div",{style:{width:"100%"},children:(0,h.jsx)(T().q,{})}):"members"===m.tab?(0,h.jsx)("div",{style:{width:"100%"},children:(0,h.jsx)(M,{})}):"help"===m.tab?(0,h.jsx)("div",{style:{width:"100%"},children:(0,h.jsx)(l().p,{})}):"templates"===m.tab?(0,h.jsx)("div",{style:{width:"100%"},children:(0,h.jsx)(w,{})}):"offline"===m.tab?(0,h.jsx)("div",{style:{width:"100%"},children:(0,h.jsx)(c().h,{})}):null}},77279:(e,t,o)=>{o.r(t),o.d(t,{default:()=>n});class i extends(()=>o(757695))().default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const n=new i},125482:(e,t,o)=>{o.d(t,{K:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("sidebarInbox",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M4.61084 16.0537C3.90837 16.0537 3.37305 15.8717 3.00488 15.5078C2.64095 15.1481 2.45898 14.6191 2.45898 13.9209V10.1504C2.45898 9.89225 2.47168 9.67432 2.49707 9.49658C2.52669 9.31462 2.57536 9.15169 2.64307 9.00781C2.71077 8.86393 2.80387 8.71794 2.92236 8.56982L4.94092 6.09424C5.20752 5.76416 5.44238 5.50602 5.64551 5.31982C5.85286 5.12939 6.07715 4.99609 6.31836 4.91992C6.5638 4.83952 6.88118 4.79932 7.27051 4.79932H12.7358C13.1252 4.79932 13.4404 4.83952 13.6816 4.91992C13.9271 4.99609 14.1514 5.12939 14.3545 5.31982C14.5576 5.50602 14.7946 5.76416 15.0654 6.09424L17.0776 8.56982C17.2004 8.71794 17.2956 8.86393 17.3633 9.00781C17.431 9.15169 17.4775 9.31462 17.5029 9.49658C17.5283 9.67432 17.541 9.89225 17.541 10.1504V13.9209C17.541 14.6191 17.359 15.1481 16.9951 15.5078C16.6312 15.8717 16.098 16.0537 15.3955 16.0537H4.61084ZM4.69971 14.6445H15.3066C15.5817 14.6445 15.7912 14.5747 15.9351 14.4351C16.0832 14.2912 16.1572 14.0711 16.1572 13.7749V10.7852H12.4946C12.4142 11.1533 12.2576 11.4813 12.0249 11.769C11.7964 12.0568 11.5086 12.2853 11.1616 12.4546C10.8146 12.6196 10.4274 12.7021 10 12.7021C9.57682 12.7021 9.19173 12.6196 8.84473 12.4546C8.49772 12.2896 8.20785 12.0632 7.9751 11.7754C7.74235 11.4834 7.58789 11.1533 7.51172 10.7852H3.84277V13.7749C3.84277 14.0711 3.91471 14.2912 4.05859 14.4351C4.20671 14.5747 4.42041 14.6445 4.69971 14.6445ZM10 11.4072C10.2751 11.4072 10.512 11.3395 10.7109 11.2041C10.9098 11.0687 11.0643 10.8973 11.1743 10.6899C11.2843 10.4784 11.3394 10.2646 11.3394 10.0488V10.0298C11.3394 9.90706 11.3774 9.79915 11.4536 9.70605C11.5298 9.60872 11.6525 9.56006 11.8218 9.56006H15.8335C15.9351 9.56006 15.9964 9.52409 16.0176 9.45215C16.043 9.38021 16.0303 9.3125 15.9795 9.24902L13.7197 6.43701C13.5885 6.26774 13.4447 6.14502 13.2881 6.06885C13.1315 5.98844 12.9495 5.94824 12.7422 5.94824H7.25781C7.05469 5.94824 6.87484 5.98844 6.71826 6.06885C6.56169 6.14502 6.41569 6.26774 6.28027 6.43701L4.0332 9.24902C3.97819 9.3125 3.96126 9.38021 3.98242 9.45215C4.00781 9.52409 4.07129 9.56006 4.17285 9.56006H8.18457C8.35384 9.56006 8.47656 9.60872 8.55273 9.70605C8.62891 9.79915 8.66699 9.90706 8.66699 10.0298V10.0488C8.66699 10.2646 8.71989 10.4784 8.82568 10.6899C8.93571 10.8973 9.09017 11.0687 9.28906 11.2041C9.48796 11.3395 9.72493 11.4072 10 11.4072Z"})})},204552:(e,t,o)=>{o.d(t,{c:()=>n,x:()=>s});var i=()=>o(645873);const n=(0,i()._h)(new(i().O2)("UniversalQnaModals",(async()=>await Promise.all([o.e(23806),o.e(37353),o.e(55373),o.e(29151),o.e(16908),o.e(48315),o.e(847),o.e(5887),o.e(17989),o.e(56985),o.e(21627),o.e(82472),o.e(96345),o.e(75659),o.e(47858),o.e(51860),o.e(221),o.e(14358)]).then(o.bind(o,457974)))),(e=>e.UniversalQnaModals)),s=(0,i()._h)(new(i().O2)("SlackConnectionOptions",(async()=>await o.e(85873).then(o.bind(o,210230)))),(e=>e.SlackConnectionOptions))},388182:(e,t,o)=>{o.d(t,{A:()=>i});const i=o(757695).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},401461:(e,t,o)=>{o.d(t,{A:()=>P});var i=o(296540),n=()=>o(56366),s=()=>o(401497),r=o(474848);const a=(0,o(340498).wt)("mobileBottomBarUpdates",{viewBox:"0 0 26 26",svg:(0,r.jsx)("path",{d:"M4.48145 20.4092H15.2988C15.2129 21.8594 14.2891 22.7832 12.9893 22.7832C11.7002 22.7832 10.7656 21.8594 10.6904 20.4092H9.01465C9.10059 22.4717 10.7227 24.2871 12.9893 24.2871C15.2666 24.2871 16.8887 22.4824 16.9746 20.4092H21.5078C22.5176 20.4092 23.1299 19.8828 23.1299 19.1094C23.1299 18.0352 22.0342 17.0684 21.1104 16.1123C20.4014 15.3711 20.208 13.8457 20.1221 12.6104C20.0469 8.37793 18.9512 5.63867 16.0938 4.60742C15.7285 3.21094 14.5791 2.09375 12.9893 2.09375C11.4102 2.09375 10.25 3.21094 9.89551 4.60742C7.03809 5.63867 5.94238 8.37793 5.86719 12.6104C5.78125 13.8457 5.58789 15.3711 4.87891 16.1123C3.94434 17.0684 2.85938 18.0352 2.85938 19.1094C2.85938 19.8828 3.46094 20.4092 4.48145 20.4092ZM4.94336 18.7871V18.6582C5.13672 18.3359 5.78125 17.7129 6.33984 17.0791C7.11328 16.2197 7.47852 14.8447 7.5752 12.7393C7.66113 8.05566 9.05762 6.55176 10.8945 6.05762C11.1631 5.99316 11.3135 5.85352 11.3242 5.58496C11.3564 4.45703 12.001 3.67285 12.9893 3.67285C13.9883 3.67285 14.6221 4.45703 14.665 5.58496C14.6758 5.85352 14.8154 5.99316 15.084 6.05762C16.9316 6.55176 18.3281 8.05566 18.4141 12.7393C18.5107 14.8447 18.876 16.2197 19.6387 17.0791C20.208 17.7129 20.8418 18.3359 21.0352 18.6582V18.7871H4.94336Z"})});var l=()=>o(125482),d=()=>o(959013),c=()=>o(284371),u=()=>o(848259),p=()=>o(572080),g=()=>o(435009),m=()=>o(553965),b=()=>o(159588),h=()=>o(836251),v=()=>o(721273),f=()=>o(577009),C=()=>o(962730),x=()=>o(155959),y=()=>o(466872),S=()=>o(606846),A=()=>o(704152),j=()=>o(406699),M=()=>o(171347),T=()=>o(490044);const w={display:"flex",alignItems:"center",justifyContent:"center",width:62,flex:"none"},k={display:"flex",alignItems:"center",justifyContent:"center",flex:1},R={display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,height:"100%",minWidth:34,position:"relative"};const P=function(e){const t=(0,s().DP)(),a=(0,o(484714).v3)();(0,i.useEffect)((()=>()=>{I(a)}),[a]);const{device:l,mobileNative:c}=a,u=(0,n().K8)((()=>(null==c?void 0:c.supportsNativeHomeOnPhone())||!1),[c]);if(e.format===v().Cn.RenderAsPage)return(0,r.jsx)("div",{style:{background:t.popoverBackground},children:(0,r.jsx)(f().pT,{format:e.format,onClose:()=>H(a)})});const g=(0,r.jsx)(d().sA,{defaultMessage:"Updates for all pages in this workspace",id:"updatesButton.tooltip"});return(0,r.jsx)(o(859428).A,{renderTooltip:()=>(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:g}),(0,r.jsx)(o(35392).A,{style:{color:t.text.contrastSecondary},name:"toggleAllUpdates"})]}),originGap:6,placement:C().W.Right,render:t=>(0,r.jsx)(j().Ay,{popupType:l.isMobile?j().z7.SlideUp:j().z7.Popup,alignmentToOrigin:C().C.Start,placementToOrigin:C().W.Right,onClick:()=>function(e){S().Ay.endSession(),p()._V({environment:e,newTab:"mentions",shouldTrack:!0})}(a),originGap:0,style:{...!l.isMobile&&{width:500,overflow:"hidden"}},isWideTabletWidth:!0,render:()=>(0,r.jsx)(f().pT,{format:e.format,onClose:()=>H(a)}),onClose:()=>function(e){I(e)}(a),isFullWidthOnMobile:!0,preventScaleTransition:!0,preventSlideUpTransition:u,buttonPopupStore:y().A,renderOrigin:o=>(0,r.jsx)(B,{format:e.format,tooltipEvents:t,buttonPopupEvents:o})})})};function B(e){let{tooltipEvents:t,buttonPopupEvents:o,format:i}=e;const u=(0,s().DP)(),g=(0,n().K8)((()=>y().A.state.open),[]),h=(0,n().K8)((()=>p().j0()),[]),C=(0,n().K8)((()=>function(e){return e===v().Cn.Sidebar&&y().A.state.open}(i)),[i]),x=M().g.Red;if(i===v().Cn.MobileBottomBarPhone)return(0,r.jsx)(A().A,{style:k,mobileFeedback:!0,...o,children:(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,l().K)({height:26,width:26,fill:u.regularTextColor}),(0,r.jsx)(f().Wt,{type:"currentSpace",color:x,style:{position:"absolute",top:-3,right:h<99?-5:-8}})]})});if(i===v().Cn.MobileBottomBarTablet)return(0,r.jsx)(A().A,{style:w,mobileFeedback:!0,...o,children:(0,r.jsxs)("div",{style:{position:"relative"},children:[a({width:26,fill:u.regularTextColor}),(0,r.jsx)(f().Wt,{type:"currentSpace",color:x,style:{position:"absolute",top:-3,right:h<99?-5:-8}})]})});if(i===v().Cn.TopbarMobile)return(0,r.jsxs)(A().A,{style:{...R,marginLeft:2,marginRight:2},mobileFeedback:!0,...o,children:[(0,l().K)({height:26,width:26}),(0,r.jsx)(f().Wt,{type:"currentSpace",color:x,style:{position:"absolute",top:8,right:0}})]});if(i===v().Cn.SidebarMobile)return(0,r.jsxs)(A().A,{style:R,mobileFeedback:!0,...o,children:[(0,l().K)({height:26,width:26}),(0,r.jsx)(f().Wt,{type:"currentSpace",color:x,style:{position:"absolute",top:8,right:0}})]});if(i===v().Cn.Sidebar){const e=(0,r.jsx)(d().sA,{defaultMessage:"Updates",id:"updatesButton.allUpdates.sidebarButton"});return(0,r.jsx)(A().A,{style:{...C&&{fontWeight:c().Wy.medium,color:u.regularTextColor},...(0,b().sQ)({isMobile:!1})},hoveredStyle:{background:u.sidebarItemSelectedBackground},...(0,m().A)(t,o),children:(0,r.jsx)(T().A,{left:(0,r.jsx)("div",{style:{color:C?u.regularTextColor:"inherit"},children:(0,l().K)({fill:C?u.regularIconColor:u.mediumIconColor,width:20})}),right:(0,r.jsx)(f().Wt,{type:"currentSpace",color:x,style:{marginBottom:2,marginLeft:6}}),style:{background:g?u.buttonHoveredBackground:"none"},children:e})})}return null}function I(e){u().L_(e),p()._V({environment:e,newTab:"mentions",shouldTrack:!1})}function H(e){(0,x().T)("supportsNativeInbox")&&h().Al(e)&&h().UL(e)?g().aX(e):(I(e),y().A.setState({...y().A.state,open:!1}))}},608581:(e,t,o)=>{o.d(t,{A:()=>c});o(898992),o(354520),o(581454),o(941795);var i=o(296540),n=()=>o(401497),s=()=>o(451306),r=()=>o(284371),a=()=>o(963575),l=o(474848);function d(e){const{button:t,isLast:o}=e,a=(0,n().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:r().Wy.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return i.cloneElement(t,{...(0,s().AH)(t.props.style,a.button,o&&a.buttonLast),hoveredStyle:(0,s().AH)(a.buttonHovered,o&&a.buttonLast).style,pressedStyle:a.buttonPressed})}const c=function(e){let{children:t,isVisible:c,position:u,style:p}=e;const g=(0,o(484714).v3)(),m=(0,n().IS)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:a().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:g.device.isMobile?"auto":"none",opacity:g.device.isMobile?1:0,fontFamily:r().vc(o(662303).locale).sans,position:"absolute",right:a().A.horizontal.small,bottom:a().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:a().A.vertical.small,bottom:void 0}})),[g]),b=i.Children.toArray(t).filter(o(534177).O9),h=b.length;return(0,l.jsx)(o(145214).A,{animate:{opacity:c?1:0},...(0,s().AH)(m.container,p,c&&m.containerHover,"top"===u&&m.containerTop),children:b.map(((e,t)=>{const n=t===h-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===o(859428).A&&i.isValidElement(e))return i.cloneElement(e,{render:(t,o)=>{const i=e.props.render(t,o);return(0,l.jsx)(d,{isLast:n,button:i},e.key)}});if(e.type===o(704152).A&&i.isValidElement(e))return(0,l.jsx)(d,{isLast:n,button:e},e.key)}}))})}},721273:(e,t,o)=>{o.d(t,{Cn:()=>n,oV:()=>a,tK:()=>r});o(581454);var i=()=>o(534177);let n=function(e){return e[e.Sidebar=0]="Sidebar",e[e.SidebarMobile=1]="SidebarMobile",e[e.MobileBottomBarPhone=2]="MobileBottomBarPhone",e[e.MobileBottomBarTablet=3]="MobileBottomBarTablet",e[e.TopbarMobile=4]="TopbarMobile",e[e.RenderAsPage=5]="RenderAsPage",e}({});const s=new Map;function r(e,t){s.set(l(e),t)}function a(e){return s.get(l(e))??[]}function l(e){return(0,i().uv)(e).sort().map((t=>{const o=e[t];return JSON.stringify(o)})).join("-")}},801678:(e,t,o)=>{o.d(t,{A:()=>h});var i=o(296540),n=()=>o(662303),s=()=>o(484714),r=()=>o(56366),a=()=>o(451306),l=()=>o(959013),d=()=>o(100622),c=()=>o(496603),u=()=>o(284371),p=()=>o(720665),g=()=>o(145214),m=o(474848);const b={isRepositioning:!1};const h=function(e){const t=(0,i.useRef)(null),n=(0,s().v3)(),{isMobile:l}=(0,s().Y0)(),[d,u]=(0,i.useState)(b),g=(0,i.useCallback)((()=>{u(b)}),[]),{renderControl:h,onFlushTemporaryPosition:f,style:C,source:x,store:y}=e,{isRepositioning:S,image:A,startDragRenderedPosition:j,startDragImageScreenHeight:M}=d,T=(0,r().K8)((()=>0===o(502438).default.state.stores.length),[]),[w,k]=(0,i.useState)(!1),R=(0,r().uB)(e.mouseStore,o(454305).A),P=(0,r().K8)((()=>R.state.mouseEntered),[R]),B=(0,o(401497).IS)((()=>({dragContainer:{width:"100%",cursor:S?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[S]),I=(0,r().K8)((()=>function(e,t,o){return(0,c().Et)(o)?o:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,c().Et)(e))return e}const o=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,p().pN)(t)?o:t}}const i=t.getFormat(),n=i.page_cover_position;if((0,c().Et)(n))return n;return o}(e,t)}(x,y,d.temporaryPosition)),[d.temporaryPosition,x,y]);(0,i.useEffect)((()=>{const e=e=>{const o=t.current;o&&!o.contains(e.target)&&S&&f({imagePosition:I,reset:()=>{R.reset(),g()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[I,S,R,f,g]),S&&!T&&g();const H=(0,i.useMemo)((()=>(0,c().nF)((e=>{R.setState({...R.state,mouseEntered:!0})}),100)),[R]),E=(0,i.useMemo)((()=>(0,c().sg)((e=>{R.setState({...R.state,mouseEntered:!1})}),100)),[R]),K=(0,i.useCallback)(((e,t)=>{o(778417).IU({environment:n});const i=new Image;i.onload=()=>{u((e=>({...e,isRepositioning:!0,image:i})))},t&&(i.src=t)}),[n]),L=(0,i.useCallback)((e=>{f({imagePosition:I,reset:()=>{g()}})}),[I,f,g]),W=(0,i.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(819121).p)(t)&&k(!0)}),[]),N=(0,i.useCallback)((()=>{k(!0)}),[]),D=(0,i.useCallback)((e=>{if(A&&S){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/A.width*A.height;u((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:I})))}}}),[A,I,S]),F=(0,i.useCallback)((e=>{if(S){const t=e.diffY/(M||0)+(j||0);u((e=>({...e,temporaryPosition:(0,c().LI)((0,o(40845).A)(t,0,1),4)})))}}),[S,M,j]),V=(0,i.useCallback)((()=>{u((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),U=(0,r().K8)((()=>h({handleRepositionClick:K,handleSavePositionClick:L,handleCancelClick:g,isVisible:l||P||w||S,isRepositioning:S})),[K,L,w,l,S,P,h,g]);return(0,m.jsxs)("div",{ref:t,onFocus:W,onBlur:N,onMouseEnter:H,onMouseMove:H,onMouseLeave:E,...(0,a().AH)(B.container,C),children:[(0,m.jsx)(o(603820).A,{onDraggableDragStart:D,onDraggableDragMove:F,onDraggableDragEnd:V,onDraggableDragCancel:V,disabled:!S,render:t=>(0,m.jsx)("div",{...(0,a().AH)(B.dragContainer),...t,children:e.render({imagePosition:I,isRepositioning:S})})}),(0,m.jsx)(v,{small:e.small,isRepositioning:S}),U]})};function v(e){let{small:t,isRepositioning:o}=e;if(t)return null;const i={background:d().Ay.blackWithAlpha(.4),borderRadius:4,color:d().Ay.white,fontSize:12,fontFamily:u().vc(n().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,m.jsx)(g().A,{visible:o,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:i,children:(0,m.jsx)(l().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},824555:(e,t,o)=>{o.d(t,{N:()=>T,q:()=>w});var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(401497),a=()=>o(110750),l=()=>o(713823),d=()=>o(959013),c=()=>o(537941),u=()=>o(989423),p=()=>o(722872),g=()=>o(920949),m=()=>o(624307),b=()=>o(351360),h=()=>o(40851),v=()=>o(714300),f=()=>o(251126),C=()=>o(704152),x=()=>o(406699),y=()=>o(928600),S=()=>o(45552),A=()=>o(739793),j=()=>o(490044),M=o(474848);function T(){const e=(0,r().DP)(),t=(0,n().v3)(),{device:o,mobileNative:i}=t,a=(0,s().K8)((()=>m().A.state.open),[]),c=(0,s().K8)((()=>m().A.state.source!==m().C.Updates&&((null==i?void 0:i.supportsNativeHomeOnPhone())||!1)),[i]);return(0,M.jsx)(x().Ay,{popupType:o.isMobile?x().z7.SlideUp:x().z7.Popup,hidesMobileNativeBottomBar:c,preventSlideUpTransition:c,buttonPopupStore:m().A,open:a,renderOrigin:t=>(0,M.jsx)(C().A,{mobileFeedback:o.isMobile,...t,children:(0,M.jsx)(j().A,{left:(0,l().N)({fill:e.mediumIconColor,width:16}),style:{background:a?e.buttonHoveredBackground:"none"},disableMobileBorder:!0,children:(0,M.jsx)(d().sA,{defaultMessage:"Notifications & settings",id:"notificationSettingsButton.mobileSidebar.label"})})}),render:()=>(0,M.jsx)(w,{})})}function w(){const e=(0,n().Y0)(),t=(0,n().v3)(),o=(0,s().uB)(void 0,h().A),r=(0,s().K8)((()=>b().default.state.currentSpaceStore),[]),l=(0,v().l)({spaceId:null==r?void 0:r.id}),c=(0,s().K8)((()=>(0,a().Xz)(t.TabbedRouterStore.state)),[t]),m=(0,s().K8)((()=>{var e,t;return Boolean("web"===c.type&&("nativeTab"===c.route.name&&"settings"===c.route.tab||"nativeTab"===(null===(e=c.redirectedTo)||void 0===e?void 0:e.route.name)&&"settings"===(null===(t=c.redirectedTo)||void 0===t?void 0:t.route.tab)))}),[c]);let C;return(0,i.useLayoutEffect)((()=>{var e;m&&((0,u().u4)({environment:t,event:{eventName:"open_settings",eventProperties:{from:"mobile"}}}),null===(e=t.mobileNative)||void 0===e||e.markTransitionReady({type:"settings"}))}),[t,m]),C=e.isMobile?{menuType:p().gu.Modal,title:(0,M.jsx)(d().sA,{defaultMessage:"Settings",id:"notificationSettingsButton.mobileSidebar.title"}),left:(0,M.jsx)(S().MobileModalBackButton,{}),onClickLeft:()=>k(t),onCancel:()=>k(t),shouldRenderMobileRefresh:!0}:{menuType:p().gu.Popup},(0,M.jsxs)(y().A,{...C,children:[(0,M.jsx)(f().A,{request:{},render:()=>null,requestStore:o,performRequest:()=>(0,g().Su)(t)}),(0,M.jsx)(A().A,{isMobile:e.isMobile,isMobileNative:e.isMobileNative,passwordRequestStore:o,billingData:l})]})}function k(e){const{mobileNative:t}=e,o=()=>{m().A.setState({open:!1})};m().A.state.source!==m().C.Updates&&((null==t?void 0:t.supportsNativeHomeOnPhone())||!1)?c().navigateToHomeTab(e,o):o()}},943647:(e,t,o)=>{o.d(t,{A:()=>f});var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(959013),a=()=>o(896628),l=()=>o(454531),d=()=>o(317909),c=()=>o(478726),u=()=>o(867772),p=()=>o(681810),g=()=>o(608581),m=()=>o(145214),b=()=>o(704152),h=()=>o(24611),v=o(474848);const f=function(e){let{store:t,disabled:r,paddingRight:l,paddingLeft:c,height:g,proxyWidth:m}=e;const b=(0,n().v3)(),h=(0,s().uB)(void 0,o(454305).A),f=(0,s().K8)((()=>r||"suggest"===o(77246).Uv.getMode(t)),[r,t]),y=(0,s().K8)((()=>t.getCover()),[t]),S=(0,s().O$)(p().A),[A,j]=(0,i.useState)(void 0);if(!y)return null;const M=S.loadingMode!==u().pF&&S.loadingMode!==u().Wc;return(0,v.jsx)(o(801678).A,{mouseStore:h,onFlushTemporaryPosition:e=>function(e,t,o){const{imagePosition:i,reset:n}=e;d().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:o,canUndo:!0,perform:e=>{a().yY({store:t,coverPosition:i,transaction:e}),n()}})}(e,t,b),renderControl:e=>{let{handleRepositionClick:o,handleSavePositionClick:i,handleCancelClick:n,isVisible:s,isRepositioning:r}=e;return(0,v.jsx)(x,{handleRepositionClick:o,handleSavePositionClick:i,handleCancelClick:n,isVisible:s,isRepositioning:r,lastProxiedUrl:A,store:t,disabled:f,paddingRight:l,paddingLeft:c,mouseStore:h})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:g,maxHeight:280,cursor:"default"},render:e=>(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)(o(360083).A,{url:y.cover,isAuthenticated:!0,permissionRecord:y.pointer,width:m,onFinishedLoadingProxyUrl:j,render:(t,i)=>{const n={width:"100%",height:g,maxHeight:280,objectFit:"cover",opacity:M?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},s={width:"100%",height:g,maxHeight:280};return(0,v.jsx)(o(307440).E,{src:i,placeholderSrc:M?S.dataURL:void 0,placeholderBehavior:M?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:s,imageStyle:n,onLoadComplete:C,testId:"pageCover"})}}),M&&(0,v.jsxs)("div",{style:o(816559).fd,children:[(0,v.jsx)(o(331542).A,{size:"md",style:{marginRight:4}}),(0,v.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:(0,v.jsx)(o(773382).A,{percentage:S.uploadProgress})})]})]})})};function C(){p().A.reset()}function x(e){let{isVisible:t,isRepositioning:o,handleCancelClick:a,handleRepositionClick:d,handleSavePositionClick:f,lastProxiedUrl:C,store:x,disabled:y,paddingRight:S,paddingLeft:A,mouseStore:j}=e;const M=(0,n().v3)(),T=(0,r().tz)(),w=(0,i.useCallback)((e=>function(e,t,o,i,n){n.reset();const s=e.target.getBoundingClientRect();l().W({environment:t,intl:o,store:i,rect:s})}(e,M,T,x,j)),[M,T,x,j]),k=(0,s().K8)((()=>p().A.state.loadingMode),[]),R=(0,s().K8)((()=>function(e){let t;return t=e.isFullWidth()?"100%":c().x6,t}(x)),[x]);if(y||k!==u().pF)return null;const{device:P}=M,{isMobile:B}=P;return(0,v.jsx)(m().A,{animate:{width:R,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,v.jsxs)(g().A,{isVisible:t,position:"bottom",style:{marginRight:S,marginLeft:A},children:[!o&&(0,v.jsx)(b().A,{style:{borderRight:B?"none":void 0,...h().k},onClick:w,children:(0,v.jsx)(r().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!o&&!B&&(0,v.jsx)(b().A,{style:{...h().k,borderRight:"none"},onClick:e=>d(e,C),children:(0,v.jsx)(r().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),o&&!B&&(0,v.jsx)(b().A,{style:h().k,onClick:f,children:(0,v.jsx)(r().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),o&&!B&&(0,v.jsx)(b().A,{style:{...h().k,borderRight:"none"},onClick:a,children:(0,v.jsx)(r().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}}}]);