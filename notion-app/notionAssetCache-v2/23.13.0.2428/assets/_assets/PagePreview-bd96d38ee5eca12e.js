"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[97134],{932199:(e,t,i)=>{i.r(t),i.d(t,{PagePreview:()=>M});var o=i.n(i(32485)),r=(i(296540),()=>i(484714)),n=()=>i(792485),s=()=>i(56366),a=()=>i(401497),l=()=>i(584262),d=()=>i(34698),c=()=>i(919709),g=()=>i(983650),u=()=>i(959013),p=()=>i(284371),h=()=>i(246826),m=()=>i(317909),x=()=>i(492414),f=()=>i(108944),y=()=>i(731320),b=()=>i(115512),v=()=>i(891078),S=()=>i(963589),k=()=>i(962730),j=()=>i(351360),w=()=>i(735372),I=()=>i(712505),A=()=>i(630116),T=()=>i(296798),C=()=>i(614505),P=()=>i(128295),K=()=>i(16006),R=()=>i(859428),B=()=>i(21140),D=()=>i(943647),E=()=>i(886680),L=()=>i(178788),z=i(474848);const W=20;function _(e){const{store:t}=e,i=(0,a().IS)((e=>({summary:{fontSize:13,fontWeight:p().Wy.regular,lineHeight:"17px",letterSpacing:"-0.078px",...(0,b().pA)(3)}})),[]),o=(0,s().K8)((()=>E().EI(t)),[t]);return o&&c().FAw(o)>=W?(0,z.jsx)("div",{children:(0,z.jsx)("div",{style:i.summary,children:(0,z.jsx)(L().A,{textValue:o,parentStore:t})})}):null}function M(e){const{store:t,onClick:i}=e,n=(0,a().DP)(),h=(0,u().tz)(),{WindowSizeStore:m}=(0,r().v3)(),y=(0,S().X)("enable_deleted_page_indicator"),k=(0,s().K8)((()=>t.getCover()),[t]),C=(0,s().K8)((()=>t.inMemoryRecordCache.isTemporaryData),[t]),R=(0,s().K8)((()=>{const e=f().ze(t);return y&&e}),[y,t]),E=(0,s().K8)((()=>{const e=w().qu.state;if(!e)return!1;return(0,c().q4_)(t.getTitleValue()).toLowerCase().includes(e.toLowerCase())}),[t]),L=(0,s().K8)((()=>{const e=w().wb.state;return!!e&&("block"===e.type&&e.id===t.id)}),[t.id]),W=(0,v().i0)(t)&&!C,M=(0,r().Y0)(),O=(0,a().IS)((e=>({blockBackground:{background:"light"===e.mode?void 0:e.cardBackground},title:{fontWeight:p().Wy.medium,fontSize:M.isMobile?p().J.UIRegular.mobile:p().J.UIRegular.desktop,lineHeight:1.3,...R&&{color:e.mediumTextColor},...(0,b().pA)(2)},cover:{display:"flex",alignItems:"flex-start",flexDirection:"column",borderRadius:"var(--radius-medium, 8px)",border:`1px solid ${e.darkDividerColor}`},coverContainer:{height:62,alignSelf:"stretch",borderTopLeftRadius:7,borderTopRightRadius:7,overflow:"hidden"},breadcrumb:{color:e.text.secondary,fontSize:11,marginBottom:-2,...p().RC},content:{display:"flex",padding:"0px 16px 12px 16px",flexDirection:"column",alignItems:"flex-start"},pageTitleIcon:{position:"relative",marginRight:4,marginLeft:16,marginTop:-15,marginBottom:8}})),[R,M]),J=(0,s().K8)((()=>(0,x().J8)({store:t,fullyQualified:!1,pageVisitSource:l().y8.LinkInPage})),[t]),V=(0,s().K8)((()=>(0,x().J8)({store:e.store,openInSidePeek:!0,fullyQualified:!1,pageVisitSource:l().y8.PeekOpen})),[e.store]),N=(0,s().K8)((()=>I().default.isSidePeekOpen()),[]),Q=(0,s().K8)((()=>m.state.width),[m]),{currentBlockStore:U}=(0,s().K8)((()=>{const e=j().default.state.currentSpaceStore;if(!e)return{currentBlockStore:void 0};const i=A().Bv.createChildStore(e,{id:t.id,table:"block"});if(i.isNavigableBlock()){return{currentBlockStore:i.getNavigableBlockStore()}}return i.isDefined()?{currentStore:i}:{currentBlockStore:void 0}}),[t]),{content:q}=(0,s().K8)((()=>{if(!U)return{content:null};return{content:U.isEmptyPage()?void 0:(0,z.jsx)(_,{store:U})}}),[U]),Y=(0,s().K8)((()=>(0,P().a6)(t)),[t]);return(0,z.jsx)(T().A,{href:J,altHref:V,forceAltHref:N,external:!1,onClick:i,style:{borderRadius:8,...e.style,...O.blockBackground},children:(0,z.jsxs)("div",{style:O.cover,children:[k&&(0,z.jsx)("div",{style:O.coverContainer,children:(0,z.jsx)(D().A,{store:t,disabled:!0,paddingLeft:0,paddingRight:0,height:62,proxyWidth:Q})}),(0,z.jsxs)("div",{style:{display:"flex",flexDirection:k||Y?"column":"row",alignItems:k||Y?void 0:"center",width:"100%",paddingTop:k?0:10},children:[(0,z.jsxs)("div",{style:{flexDirection:"row",paddingTop:4},children:[(0,z.jsx)(H,{store:e.store,disabled:!0,isAlias:e.isAlias,showDeletedPageIndicator:R,cover:!!k}),(0,z.jsx)(d().A,{theme:n,intl:h,isPageInTrash:W})]}),(0,z.jsxs)(B().wt,{gap:q?4:0,style:O.content,children:[(0,z.jsxs)(B().wt,{gap:2,style:{width:"100%",...(0,b().pA)(2)},children:[(0,z.jsx)(P().Ay,{store:t,innerStyle:O.breadcrumb}),(0,z.jsx)("div",{style:{overflow:"auto",...E&&(0,g().G3)({theme:n,isSelectedMatch:L})},className:o()(L&&g().wT),children:(0,z.jsx)(K().A,{shouldWrap:!0,maxLines:2,store:t,style:O.title})})]}),q]})]})]})})}function O(e){let{store:t,disabled:i}=e;const o=(0,n().S)(),a=(0,r().v3)(),{icon:l,role:d,isEmptyPage:c,type:g}=(0,s().K8)((()=>({icon:t.getIcon(),role:t.getRole(),isEmptyPage:t.isEmptyPage(),type:t.getType()})),[t]),p=(0,s().K8)((()=>function(e,t,i){const o=i&&i.publicEditModeStore.state;return!(0,y().QT)(o)&&e.canEdit()&&!t}(t,i,o)),[i,o,t]);return(0,z.jsx)(R().A,{renderTooltip:()=>(0,z.jsx)(u().sA,{defaultMessage:"Change icon",id:"page.changeIcon.tooltip"}),placement:k().W.Top,disableTooltip:i||!p,render:e=>i||!p?(0,z.jsx)(C().A,{disabled:!0,icon:l,isEmptyPage:c,role:d,size:28,style:{width:"100%",height:"100%"},...e,largeIcon:!0}):(0,z.jsx)(C().A,{disabled:!1,bucket:"secure",store:t,icon:l,role:d,isEmptyPage:c,size:28,style:{width:"100%",height:"100%"},iconLoggingData:{recordTable:t.table,source:"subpage",block_type:g},onChange:e=>function(e,t,i){const o=t.getIconStore();o&&m().createAndCommit({userAction:"Page.handleRecordIconChange",environment:i,canUndo:!0,perform:t=>{h().KY({store:o,value:e,transaction:t})}})}(e,t,a),...e,largeIcon:!0})})}function H(e){let{showDeletedPageIndicator:t,store:i,disabled:o,isAlias:n,cover:s}=e;const l=(0,a().DP)(),d=(0,r().v3)();if(t){const e=d.device.isSafari||d.device.isIOS;return(0,g()._e)({isSafariOrIOS:e,theme:l})}return(0,z.jsx)("div",{style:{position:"relative",width:24,height:24,marginRight:4,marginLeft:16,marginTop:s?-15:4,marginBottom:8},children:(0,z.jsx)(O,{store:i,disabled:o})})}}}]);