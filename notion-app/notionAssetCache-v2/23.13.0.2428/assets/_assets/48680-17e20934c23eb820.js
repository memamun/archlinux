(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[10862,48680],{43972:(e,t,n)=>{"use strict";n.d(t,{w:()=>l});n(296540);var o=()=>n(764880),i=()=>n(534177),s=()=>n(256863),r=()=>n(453697),a=n(474848);function l(e){const{actor:t}=e,n={size:e.size??14,style:{marginRight:2,...e.style}};return(0,o().H3)(t)?(0,a.jsx)(s().A,{botValue:t.asActor,...n}):(0,o().ps)(t)?(0,a.jsx)(r().A,{userValue:t.asActor,...n}):(0,o().h2)(t)?(0,a.jsx)(r().A,{userValue:void 0,...n}):void(0,i().HB)(t)}},90907:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"}),(0,o.jsx)("path",{d:"M10 1.95a4 4 0 0 0-4 4v1.433a2.426 2.426 0 0 0-2.025 2.392v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.426 2.426 0 0 0 14 7.383V5.95a4 4 0 0 0-4-4m2.75 5.4h-5.5v-1.4a2.75 2.75 0 0 1 5.5 0zM5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},s=(0,n(340498).wt)("lock",i)},192421:(e,t,n)=>{"use strict";n.d(t,{F:()=>c});n(296540);var o=()=>n(484714),i=()=>n(433847),s=()=>n(959013),r=()=>n(583690),a=()=>n(678553),l=n(474848);function c(e){const{role:t}=e,n=(0,s().tz)(),{device:c}=(0,o().v3)(),d=(0,r().I2)(t);return(0,l.jsx)(a().A,{...e,title:n.formatMessage((0,i().sK)(t,void 0).label),shouldWrapCaption:!0,style:c.isMobile?{padding:"12px 4px"}:{padding:4,marginTop:2,marginBottom:2},captionStyle:{marginTop:4},caption:(0,l.jsx)("div",{children:d})})}},212727:(e,t,n)=>{"use strict";n.r(t),n.d(t,{gearIcon:()=>s,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.29 10c0 1.5 1.22 2.71 2.71 2.71 1.5 0 2.71-1.21 2.71-2.71S11.5 7.29 10 7.29 7.29 8.5 7.29 10m1.25 0c0-.81.66-1.46 1.46-1.46.81 0 1.46.65 1.46 1.46s-.65 1.46-1.46 1.46-1.46-.65-1.46-1.46"}),(0,o.jsx)("path",{d:"M8.49 17.64q.75.15 1.53.15v-.01c.47 0 .94-.04 1.41-.13.26-.05.46-.25.5-.51l.26-1.53.15-.06 1.28.91c.21.14.49.14.71 0 .41-.28.8-.61 1.18-.98.33-.33.63-.7.9-1.09.15-.21.15-.5 0-.71l-.9-1.27.06-.15 1.55-.27c.26-.05.46-.25.51-.5a7.8 7.8 0 0 0 .02-2.94.62.62 0 0 0-.51-.5l-1.53-.26-.06-.15.91-1.28c.14-.21.14-.49 0-.71a7.9 7.9 0 0 0-2.07-2.08.62.62 0 0 0-.71 0l-1.27.9-.15-.06-.27-1.55a.64.64 0 0 0-.5-.51c-.5-.1-1-.15-1.53-.15-.47 0-.95.04-1.41.13-.26.05-.46.25-.5.51l-.26 1.53-.15.06-1.28-.91a.65.65 0 0 0-.71 0 7.9 7.9 0 0 0-2.08 2.07c-.15.21-.15.5 0 .71l.9 1.27-.06.15-1.55.27c-.26.05-.46.25-.51.5-.1.5-.15 1-.15 1.53 0 .47.04.95.13 1.41.05.26.25.46.51.5l1.53.26.06.15-.91 1.28c-.14.21-.15.49 0 .71.29.42.61.81.98 1.18.34.34.7.65 1.09.91.21.15.5.15.71 0l1.27-.9.15.06.27 1.55c.05.26.25.46.5.51m2.29-1.15c-.53.07-1.09.07-1.63 0l-.25-1.47a.62.62 0 0 0-.42-.49 6 6 0 0 1-.68-.28.63.63 0 0 0-.65.04l-1.2.85a6.8 6.8 0 0 1-1.14-1.16l.86-1.21c.13-.19.15-.43.05-.64-.11-.22-.21-.45-.28-.68a.62.62 0 0 0-.49-.43l-1.45-.25a6.7 6.7 0 0 1 0-1.63l1.47-.25c.23-.04.42-.2.49-.42.07-.23.17-.46.28-.68.11-.21.09-.46-.04-.65l-.85-1.2A6.8 6.8 0 0 1 6.01 4.8l1.21.86c.19.13.43.15.64.05.22-.11.45-.21.68-.28s.39-.26.43-.49l.25-1.45c.53-.07 1.09-.07 1.63 0l.25 1.47c.04.23.2.42.42.49.23.07.46.17.68.28.21.11.46.09.65-.04l1.2-.85A6.8 6.8 0 0 1 15.19 6l-.86 1.21c-.13.19-.15.43-.05.64.11.22.21.45.28.68s.26.39.49.43l1.45.25a6.7 6.7 0 0 1 0 1.63l-1.47.25c-.23.04-.42.2-.49.42-.07.23-.17.46-.28.68-.11.21-.09.46.04.65l.85 1.2a6.8 6.8 0 0 1-1.16 1.14l-1.21-.86a.64.64 0 0 0-.64-.05c-.22.11-.45.21-.68.28s-.39.26-.43.49z"})]})},s=(0,n(340498).wt)("gear",i)},250202:(e,t,n)=>{"use strict";n.d(t,{G:()=>a,e:()=>r});var o=n(296540),i=()=>n(401497),s=n(474848);let r=function(e){return e[e.Name=0]="Name",e[e.Type=1]="Type",e}({});const a=o.forwardRef((function(e,t){const{propertySchema:o,format:a,locked:l}=e,{name:c,type:d,icon:u}=o,{isMobile:p}=(0,n(484714).Y0)(),m=(0,i().IS)((e=>({propertyIcon:{fill:e.regularIconColor,marginLeft:6,marginRight:2}})),[]),v=(0,i().DP)(),f=a===r.Name?c:n(682146).dC[d];return(0,s.jsx)(n(760217).A,{title:f,icon:(0,s.jsx)(n(743176).Ay,{icon:u,type:d,size:p?18:16,theme:v,style:m.propertyIcon}),disabled:l,...e})}))},266626:(e,t,n)=>{"use strict";n.d(t,{M5:()=>D,CX:()=>H});n(898992),n(672577),n(430670),n(581454);var o=n(296540),i=()=>n(484714),s=()=>n(56366),r=()=>n(401497),a=()=>n(700500),l=()=>n(555776),c=()=>n(145214),d=()=>n(882934),u=()=>n(186445),p=()=>n(728611),m=()=>n(278014),v=()=>n(108944),f=()=>n(569912),b=()=>n(953418),g=()=>n(437622),_=()=>n(695625),h=()=>n(397248),C=()=>n(337567),y=()=>n(871399),x=()=>n(666710),A=()=>n(444570),S=(n(18107),n(967357),()=>n(751735)),w=()=>n(100622),M=()=>n(410282),k=()=>n(508496);var j=n(474848);const I=new Map([[a().xd.toggle,28],[a().xd.header,28],[a().xd.subHeader,28],[a().xd.subSubHeader,28],[a().xd.toDo,28],[a().xd.bulletedList,28],[a().xd.numberedList,28],[a().xd.text,24]]),B=new Map([[a().xd.image,-2]]),T=(0,o.forwardRef)((function(e,t){const{store:a,selectable:l,insertionLocation:c,state:d,nodeRect:u,containerRect:p}=e,m=(0,i().v3)(),v=(0,i().WS)(),f=(0,n(792485).S)(),b=(0,s().K8)((()=>x().default.state.selectableRectMap.get(l)),[l]),g=(0,s().K8)((()=>A().TH({environment:m,store:a,selectableBoundingRect:b})),[m,a,b]),_=(0,s().K8)((()=>!(null!=f&&f.publicEditModeStore.state.hasPublicPermission)&&("editor"===a.getRole()||"read_and_write"===a.getRole())||"edit"===(null==f?void 0:f.publicEditModeStore.state.permission)),[null==f?void 0:f.publicEditModeStore,a]),h=(0,s().K8)((()=>{var e,t;return"comment_only"===(null===(e=a.getNavigableBlockStore({skipCurrent:!0}))||void 0===e?void 0:e.getRole())||"comment"===(null==f||null===(t=f.publicEditModeStore.state)||void 0===t?void 0:t.permission)}),[null==f?void 0:f.publicEditModeStore,a]),C=(0,s().K8)((()=>"suggest"===n(77246).Uv.getMode(a)),[a]),T=(0,s().K8)((()=>a.isFirstBlockInCalloutV2Block()),[a]),R=(0,s().K8)((()=>{var e;const t="external_object_instance_page"===a.getType(),o=f&&(0,n(696746).Nh)(f.pageStore.id);return!v&&(!a.isNavigableAncestorNonEditableState()||"collection"===(null===(e=a.getParentStore())||void 0===e?void 0:e.table))&&(_||h&&C)&&!t&&!a.isNavigableAncestorExternallyImportedPage()&&!o&&!T&&b}),[h,_,T,v,C,f,b,a]),[P,E]=(0,o.useState)(!1),H=(0,s().K8)((()=>{var e;return a.id===(null===(e=a.getNavigableBlockStore())||void 0===e?void 0:e.getContentIds().at(-1))}),[a]),V=(0,s().K8)((()=>{if(!b)return 0;if("above"===c){if(k().default.checkGate({gateName:"selectable_top_margin"})){return-12-A().mC(l)/2-2}return-14}{const e=b.height-12;return H?e+12:e}}),[c,H,l,b]),D=(0,s().K8)((()=>{if(!b)return 0;if("above"===c){if(k().default.checkGate({gateName:"selectable_top_margin"})){const e=A().mC(l);return-.5*Math.max(3,e)-3}return-3.5}{const e=b.height-1.5;return H?e+12:e}}),[c,H,l,b]),{indentHintSize:K,additionalHorizontalPadding:z,additionalVerticalPadding:L}=(0,s().K8)((()=>{var e,t,o;const i=null==a?void 0:a.getRecordStoreUIParent();if(i instanceof n(630116).Bv&&["collection_view","collection_view_page"].includes(i.getType())){const e=(0,n(638146).cf)({userId:m.currentUser.id,viewBlockId:i.id}),t=i.getCollectionViewStores().find((t=>t.id===e));if(t){if("table"===t.getType())return{indentHintSize:0,additionalHorizontalPadding:5,additionalVerticalPadding:1}}}const s=null===(e=a.getParentBlockStore())||void 0===e?void 0:e.getType(),r=a.getType(),l=r?B.get(r)??0:0;if(!s)return{indentHintSize:void 0,additionalHorizontalPadding:0,additionalVerticalPadding:l};const d=null===(t=a.getParentBlockStore())||void 0===t?void 0:t.getContentIds(),u=a.id===(null==d?void 0:d[0]),p=a.id===(null==d?void 0:d.at(-1)),v=(()=>{if(a.isTransclusionType()||a.isInsideTransclusion())return 5;const e=a.getNumberOfDuplicateBlocksAncestors();return e>0?n(571400).t*e:0})(),f=(null===(o=a.getParentBlockStore())||void 0===o?void 0:o.getParentTable())===n(199378).SC;return u&&!f||p&&"below"===c?{indentHintSize:I.get(s),additionalHorizontalPadding:v,additionalVerticalPadding:l}:{indentHintSize:void 0,additionalHorizontalPadding:v,additionalVerticalPadding:l}}),[c,a,m.currentUser.id]),{left:F,positioningAdjustment:N}=(0,s().K8)((()=>{const e=A().KG({store:a,selectableBoundingRect:b,containerWidth:g});return void 0!==K?{left:26+K+z-e,positioningAdjustment:e}:{left:26+z-e,positioningAdjustment:e}}),[K,z,a,b,g]),U=(0,s().K8)((()=>{const e=function(e){var t;const n=e.getParentBlockStore(),o=null==n?void 0:n.getType(),i=null===(t=e.getParentBlockStore())||void 0===t?void 0:t.getContentIds();if(e.id!==(null==i?void 0:i[0]))return!1;switch(o){case"bulleted_list":case"toggle":case"to_do":case"numbered_list":return!0;default:return!1}}(a),t=a.getParentBlockStore();return e&&t?(0,M().j)(t):(0,M().j)(a)}),[a]),W=((null==u?void 0:u.left)??0)-((null==p?void 0:p.left)??0),O=(0,r().IS)((e=>{const t={position:"absolute",top:D+L,height:3,transition:"0.15s",left:W-N},o=function(e){const{blockBackgroundColor:t,theme:n}=e,o=(0,w().k5)(t,n);return o&&o.background?(0,S().X4)(o.background,.66):(0,S().X4)(n.contentBackground,.66)}({blockBackgroundColor:U,theme:e});return{plusIconStyles:{width:16,...(0,n(327994).Cz)(e,P)},buttonStyles:{position:"absolute",top:V+L,left:W-F,width:24,height:24,display:"flex",justifyContent:"center",borderRadius:3,backdropFilter:"blur(4px)",background:o},buttonHoveredStyles:{backdropFilter:"blur(4px)",background:(0,w().Qr)([e.buttonHoveredBackground,o])},lineStyles:{...t,width:g?`${g}px`:void 0,background:P?(0,S().X4)(e.icon.secondary,.4):"transparent"},lighterLineStyles:void 0!==K?{...t,width:g?K-2+"px":void 0,background:P?(0,S().X4)(e.icon.secondary,.4):"transparent",left:-K+N}:{},mediumColorStyle:{color:e.text.contrastSecondary}}}),[P,V,F,D,K,L,g,N,U,W]);return R?(0,j.jsx)(n(859428).A,{placement:n(962730).W.Bottom,delayThreshold:n(348501).q,renderTooltip:function(){return(0,j.jsx)("div",{style:{textAlign:"center"},children:(0,j.jsx)(n(959013).sA,{defaultMessage:"Click <mediumcolor>to add block</mediumcolor>",id:"block.InterBlockAddButton.tooltip.addBlock",values:{mediumcolor:e=>(0,j.jsx)("span",{style:O.mediumColorStyle,children:e})}})})},render:e=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n(704152).A,{ref:t,style:O.buttonStyles,hoveredStyle:O.buttonHoveredStyles,onClick:()=>{(0,n(358063).yO)(m,a,c)},onMouseEnter:t=>{var n;E(!0),y().default.setState({...d,isHoveringPlusButton:!0}),null===(n=e.onMouseEnter)||void 0===n||n.call(e,t)},onMouseLeave:t=>{var n;E(!1),y().default.setState({...d,isHoveringPlusButton:!1}),null===(n=e.onMouseLeave)||void 0===n||n.call(e,t)},children:(0,n(689094).W)(O.plusIconStyles)}),(0,j.jsx)("div",{style:O.lighterLineStyles}),(0,j.jsx)("div",{style:O.lineStyles}),void 0!==K&&(0,j.jsx)("div",{style:O.lineStyles})]})}):(y().default.setState({...d,isPlusButtonVisible:!1}),null)}));var R=()=>n(742478),P=()=>n(737517);const E=[a().xd.page,a().xd.callout,a().xd.column,a().xd.transclusionContainer];function H(e){var t;const n=(0,i().v3)(),{container:a,state:x}=e,A=(0,s().K8)((()=>(0,g().s7)(n)),[n]),S=(0,o.useRef)(null),w=(0,o.useRef)(void 0),{targetSelectable:M,icon:k}=(0,s().K8)((()=>function(e,t,n){const{mouseX:o,mouseY:i}=n;if(e.current&&h().ux(e.current.getBoundingClientRect(),o,i)&&t.current)return t.current;for(const c of n.nearbySelectables){const e=c.selectable;if("top-left-corner"===c.hoveredRegion||"above-content"===c.hoveredRegion){const n={targetSelectable:e,icon:"plus_above"};return t.current=n,n}if("bottom-left-corner"===c.hoveredRegion||"below-content"===c.hoveredRegion){var s;const n=null===(s=e.props.store.getParentBlockStore())||void 0===s?void 0:s.getType();if(n&&E.includes(n)&&e.props.isLastItem){const n={targetSelectable:e,icon:"plus_below"};return t.current=n,n}}}const r=n.currentStore,a=r&&_().T.findSelectablesFromStore(r).find((e=>Boolean(e.props.shouldShowHoverMenu||e.props.shouldShowCommentMenu)));if(!a)return{targetSelectable:void 0,icon:void 0};const l={targetSelectable:a,icon:y().default.isRightMarginCommentHovered()?"comment":"6-dot"};return t.current=l,l}(S,w,x)),[x]),I=null==M?void 0:M.props.store,B=(0,s().K8)((()=>u().ZT(n)),[n]),H=(0,o.useMemo)((()=>{var e;const t=null==B||null===(e=B.getContentWrapEl())||void 0===e?void 0:e.getBoundingClientRect().left;return void 0!==t&&x.mouseX>t}),[x,B]),V=(0,s().K8)((()=>{if(!I)return!1;const e=v().Nq(I);return(null==I?void 0:I.pathIsDead())||e&&(0,C().pQ)(e.id)}),[I]),[z,L]=(0,o.useState)(null==M||null===(t=M.getNode())||void 0===t?void 0:t.getBoundingClientRect());(0,o.useEffect)((()=>{if(!M)return;const e=M.getNode();if(!e)return;const t=()=>{L(e.getBoundingClientRect())},n=(0,b().NM)(e);n&&(0,p().P4)(n,"scroll",t);const o=(0,b().T8)(e);return o&&o!==n&&(0,p().P4)(o,"scroll",t),t(),()=>{n&&(0,p().Ol)(n,"scroll",t),o&&(0,p().Ol)(o,"scroll",t)}}),[M]),(0,o.useEffect)((()=>{"comment"!==k&&l().A.state.isHovered&&l().A.resetHoverSource("right_margin_button")}),[k]);const F=null==a?void 0:a.getBoundingClientRect(),N=(0,s().K8)((()=>I?(0,m().ac)({marginItemType:"selectable_hover_menu_overlay_item",store:I,nodeRect:z,containerRect:F,environment:n}):0),[I,z,F,n]),U=(0,r().IS)((()=>({container:{position:"absolute",top:N},commentMenu:{marginLeft:3}})),[N]),W=(0,s().K8)((()=>D.state),[]);return(0,f().A)((e=>(0,j.jsxs)(j.Fragment,{children:[W?(0,j.jsx)(K,{container:a}):null,(0,j.jsx)(d().A,{render:()=>M&&I&&k&&!V?(y().default.setState({...x,isPlusButtonVisible:"plus_above"===k||"plus_below"===k}),[(0,j.jsxs)(c().A,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},config:{duration:150,delay:H?150:0,timingFunction:"ease-in-out"},style:U.container,...e,children:["comment"===k&&(0,j.jsx)("div",{style:U.commentMenu,children:(0,j.jsx)(R().A,{selectable:M,store:I,ref:S,containerRect:F})}),"6-dot"===k&&(0,j.jsx)(P().A,{selectable:M,store:I,isWorkspaceAdmin:A,ref:S,nodeRect:z,containerRect:F}),("plus_above"===k||"plus_below"===k)&&(0,j.jsx)(T,{store:I,selectable:M,insertionLocation:"plus_above"===k?"above":"below",ref:S,state:x,nodeRect:z,containerRect:F})]},I.id)]):(y().default.setState({...x,isPlusButtonVisible:!1}),[])})]})))}const V={"top-left-corner":"green","bottom-left-corner":"green","above-content":"blue","below-content":"blue"},D=n(757695).default.createValue(!1);function K(e){const{container:t}=e,n=(0,i().v3)(),r=(0,s().K8)((()=>y().default.state.isOpen?y().default.state.nearbySelectables.flatMap((e=>{let{selectable:t,hoveredRegion:o}=e;const i=x().default.state.selectableRectMap.get(t);if(!i)return[];const s=A().TH({environment:n,store:t.props.store,selectableBoundingRect:i}),r=A().KG({store:t.props.store,selectableBoundingRect:i,containerWidth:s}),a=A().mC(t);return{selectableRect:i,hoverRegionRect:(0,y().getHoverRegionOfRect)(i,o,s,r,a),hoveredRegion:o}})):[]),[n]),a=null==t?void 0:t.getBoundingClientRect(),l=((null==a?void 0:a.top)??0)+((null==t?void 0:t.scrollTop)??0),c=((null==a?void 0:a.left)??0)+((null==t?void 0:t.scrollLeft)??0);return(0,j.jsx)("div",{style:{pointerEvents:"none"},children:r.map(((e,t)=>{let{selectableRect:n,hoverRegionRect:i,hoveredRegion:s}=e;return(0,j.jsxs)(o.Fragment,{children:[(0,j.jsx)("div",{style:{position:"absolute",top:i.top-l,left:i.left-c,width:i.width,height:i.height,outline:`1px solid ${V[s]}`,fontSize:8,fontFamily:"monospace"},children:s}),(0,j.jsx)("div",{style:{position:"absolute",top:n.top-l,left:n.left-c,width:n.width,height:n.height,outline:"1px solid gray",fontSize:8,fontFamily:"monospace"}})]},t)}))})}(0,n(604341).exposeDebugValue)("SelectableHoverDebuggerEnabledStore",D)},278014:(e,t,n)=>{"use strict";n.d(t,{ac:()=>C,jU:()=>x,qg:()=>y});var o=()=>n(799954),i=()=>n(700500),s=()=>n(534177),r=()=>n(571400),a=()=>n(519839),l=()=>n(835066),c=()=>n(444570),d=()=>n(327994),u=()=>n(980914),p=()=>n(508496),m=()=>n(871399),v=()=>n(502438);const f=n(236030).Fh-2,b=2,g=4,_=15,h=24;function C(e){const{marginItemType:t,store:n,nodeRect:o,containerRect:r,environment:a}=e,l=function(e){const{store:t,marginItemType:n}=e,o=t.getType(),s=t.getNavigableAncestorFormat(),r=Boolean(s.page_small_text);return o===i().xd.divider?-6:o===i().xd.header?r?7:10:o===i().xd.subHeader?r?4:6:o===i().xd.collectionView?8:o===i().xd.table?"presence_avatars"===n?5.5:14:3}({store:n,marginItemType:t}),c=function(e,t,n){if(t.isTransclusionType())return e+5;if(w(t,n))return e+1;if("ai_block"===t.getType())return t.hasContent()?e+9:e+15;if(t.getType()===i().xd.button)return e+3;return e}(l,n,a),u=((null==o?void 0:o.top)??0)-((null==r?void 0:r.top)??0)+c,p=a.device.isMobile?20:22,m=(d().jK-p)/2;if("selectable_hover_menu_overlay_item"===t)return u;if("attribution_avatars"===t)return u-m;if("presence_avatars"===t){const{attributionsIncludeFoundBlock:t,avatarCount:n}=e;return u+m+(n+(t?1:0)-1)*_}(0,s().HB)(t)}function y(e){const{marginItemType:t,store:n,environment:o,nodeRect:i,containerRect:r,selectable:l}=e,d=o.device.isMobile?20:22,u=(0,c().zb)()+b,{maxLeft:p,isBoundedByParentContainer:m}=function(e){const{environment:t,selectable:n,nodeRect:o,store:i}=e,s=(null==o?void 0:o.left)??0;if(i.isCollectionView()||i.isInsideCollection()){const e=(0,a().UH)(i);if(e&&"table"!==e.getViewType())return{maxLeft:s,isBoundedByParentContainer:!1}}const r=null==n?void 0:n.getScrollerContext();let l=0;if(r&&r.horizontalScroller){const e=r.horizontalScroller.getClientRect();l=(null==e?void 0:e.left)??0}const c=Math.max(l,s),d=w(i,t)&&M(i)?f:0,u=c-d<=l,p=u?l:c;return{maxLeft:p,isBoundedByParentContainer:u}}({environment:o,selectable:l,nodeRect:i,store:n}),v=S(o,u+h,n,m),_=p-((null==r?void 0:r.left)??0);if("drag_handle"===t)return _-S(o,u,n,m);if("plus_button"===t)return _-v;if("attribution_avatars"===t){return _-A({marginItemType:t,store:n,originalMenuOffset:v,environment:o,isBoundedByParentContainer:m})-g-d}if("presence_avatars"===t){return _-A({marginItemType:t,originalMenuOffset:v,environment:o,store:n,isBoundedByParentContainer:m})-g-d}(0,s().HB)(t)}function x(e){const{marginItemType:t,nodeRect:n,containerRect:o}=e;if("add_comment"===t)return((null==o?void 0:o.right)??0)-((null==n?void 0:n.right)??0);(0,s().HB)(t)}function A(e){var t;const{marginItemType:n,originalMenuOffset:o,environment:i,store:r,isBoundedByParentContainer:a}=e,l=m().default.state,c=l.isOpen&&(null===(t=l.currentStore)||void 0===t?void 0:t.id)===r.id;switch(n){case"attribution_avatars":return c?o:S(i,0,r,a);case"presence_avatars":return c&&l.currentStore&&!m().default.isRightMarginCommentHovered()?o:S(i,0,r,a);case"drag_handle":case"plus_button":return o;default:(0,s().HB)(n)}}function S(e,t,n,s){if(!s&&M(n)&&w(n,e))return t+f;if(n.isQuoteBlockChild()){return t+3+14+o().nE.paddingLeft}if(p().default.checkGate({gateName:"db_ux_simplification_next"})&&n.getType()===i().xd.collectionView)return t+6;if(n.isTransclusionType()||"ai_block"===n.getType())return t+4;if(n.isDirectChildOfAiBlock())return t+13;if(n.isInsideTransclusion())return t+5;if(n.getType()===i().xd.table){const o=u().Xe({simpleTableStore:n,environment:e,includeInline:!(0,l().dC)(e,n)}),i=n.isImmediateColumnChild();return 0!==o||i?t+8:t}const a=n.getNumberOfDuplicateBlocksAncestors();return a>0?t+r().t*a:t}function w(e,t){if(e.getType()===i().xd.page){const o=(0,a().UH)(e);var n;if(o)return(e.isInsideCollection()||Boolean(null==o||null===(n=o.collectionStore())||void 0===n?void 0:n.isPageTreeCollection()))&&(0,a().f5)({environment:t,collectionContextStore:o})}return!1}function M(e){var t;const n=v().default.state.stores.includes(e);return m().default.state.isOpen&&(null===(t=m().default.state.currentStore)||void 0===t?void 0:t.id)===e.id||n}},314660:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});var o=()=>n(246826);function i(e){const{collectionViewStore:t,update:n,transaction:i}=e;o().zv({store:t.getQueryStore(),data:n,transaction:i})}},358063:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>x,yO:()=>w});n(898992),n(672577);var o=n(296540),i=()=>n(484714),s=()=>n(56366),r=()=>n(401497),a=()=>n(206267),l=()=>n(959013),c=()=>n(989423);var d=()=>n(317909),u=()=>n(413962),p=()=>n(87017),m=()=>n(478726),v=()=>n(299545),f=()=>n(695625),b=()=>n(393255),g=()=>n(77246),_=()=>n(871399),h=()=>n(611371),C=n(474848);const y=(0,l().YK)({ariaLabelApple:{id:"block.selectableAddMenu.ariaLabel.apple",defaultMessage:"Click to add below. Option-click to add a block above"},ariaLabelWindows:{id:"block.selectableAddMenu.ariaLabel.windows",defaultMessage:"Click to add below. Alt-click to add a block above"}}),x=(0,o.forwardRef)((function(e,t){let{store:o,nodeRect:a,containerRect:c,selectable:d}=e;const u=(0,l().tz)(),p=(0,r().DP)(),m=(0,i().v3)(),v=(0,i().WS)(),f=(0,n(792485).S)(),b=(0,s().K8)((()=>{var e;return"editor"===o.getRole()||"read_and_write"===o.getRole()||"edit"===(null==f||null===(e=f.publicEditModeStore.state)||void 0===e?void 0:e.permission)}),[null==f?void 0:f.publicEditModeStore,o]),_=(0,s().K8)((()=>{var e,t;return"comment_only"===(null===(e=o.getNavigableBlockStore({skipCurrent:!0}))||void 0===e?void 0:e.getRole())||"comment"===(null==f||null===(t=f.publicEditModeStore.state)||void 0===t?void 0:t.permission)}),[null==f?void 0:f.publicEditModeStore,o]),x=(0,s().K8)((()=>"suggest"===g().Uv.getMode(o)),[o]),M=(0,s().K8)((()=>o.isFirstBlockInCalloutV2Block()),[o]),k=(0,s().K8)((()=>{var e;const t="external_object_instance_page"===o.getType(),i=f&&(0,n(696746).Nh)(f.pageStore.id);return!v&&(!o.isNavigableAncestorNonEditableState()||"collection"===(null===(e=o.getParentStore())||void 0===e?void 0:e.table))&&(b||_&&x)&&!t&&!o.isNavigableAncestorExternallyImportedPage()&&!i&&!M}),[_,b,M,v,x,f,o]),j=(0,s().K8)((()=>{var e;return null===(e=o.getSpaceStore())||void 0===e?void 0:e.getFreezeSettings()}),[o]),I=(0,n(973454).p)(j);return!k||"active"===I?null:(0,C.jsx)(n(859428).A,{placement:n(962730).W.Bottom,delayThreshold:300,renderTooltip:()=>(0,C.jsx)(S,{}),render:e=>(0,C.jsx)(n(704152).A,{ref:t,disallowTabbing:!0,onClick:()=>{if(!(0,h().EF)(m))return(0,h().QY)(m);w(m,o,(0,n(281322).r)().option?"above":"below")},style:A(o,m,p,a,c,d),ariaLabel:u.formatMessage(m.device.isApple?y.ariaLabelApple:y.ariaLabelWindows),...e,children:(0,n(689094).W)({width:16})})})}));function A(e,t,o,i,s,r){const a=(0,n(278014).qg)({marginItemType:"plus_button",store:e,environment:t,nodeRect:i,containerRect:s,selectable:r});return{display:"flex",alignItems:"center",justifyContent:"center",fill:o.lightIconColor,position:"absolute",left:a,width:24,height:24,borderRadius:4,pointerEvents:"auto",cursor:"-webkit-grab"}}function S(){const e=(0,r().DP)(),t=(0,i().v3)(),n={color:e.text.contrastSecondary};return(0,C.jsxs)("div",{style:{textAlign:"center"},children:[(0,C.jsx)(l().sA,{defaultMessage:"Click <mediumcolor>to add below</mediumcolor>",id:"block.selectableAddMenu.tooltip.addBlockBelow",values:{mediumcolor:e=>(0,C.jsx)("span",{style:n,children:e})}}),(0,C.jsx)("div",{children:t.device.isApple?(0,C.jsx)(l().sA,{defaultMessage:"Option-click <mediumcolor>to add above</mediumcolor>",id:"block.selectableAddMenu.tooltip.addAbove",values:{mediumcolor:e=>(0,C.jsx)("span",{style:n,children:e})}}):(0,C.jsx)(l().sA,{defaultMessage:"Alt-click <mediumcolor>to add a block above</mediumcolor>",id:"block.selectableAddMenu.tooltip.addAbove.windows",values:{mediumcolor:e=>(0,C.jsx)("span",{style:n,children:e})}})})]})}function w(e,t,n){const o="above"===n,i=g().Uv.getMode(t),s=f().T.findSelectablesFromStore(t).find((e=>Boolean(e.props.onInsertRowBelow)));(0,m().fc)(t)||(o?s&&s.props.onInsertRowAbove?d().createAndCommit({userAction:"SelectableAddMenu.handleClick.onInsertRowBelow",environment:e,canUndo:!0,perform:e=>{s.props.onInsertRowAbove&&s.props.onInsertRowAbove({transaction:e})}}):d().createAndCommit({environment:e,userAction:"SelectableAddMenu.handleClick.addAbove",canUndo:!0,perform:n=>{const o=p().insertTextAbove({environment:e,blocks:[t],transaction:n,skipAnalytics:!0});if("suggest"===i&&o){const t=u().RR(e,n,o);u().tM(n,o,{id:a().JW(),type:"insert",discussionId:t.id}),u().c3({environment:e,transaction:n,discussionStore:t,addModifiedBlockIdsAfter:[o.id]})}}}):v().wm(t)?b().zz({environment:e,blockStore:t,insertedTextBlockLocation:"none"}):s&&s.props.onInsertRowBelow?d().createAndCommit({userAction:"SelectableAddMenu.handleClick.onInsertRowBelow",environment:e,canUndo:!0,perform:e=>{s.props.onInsertRowBelow&&s.props.onInsertRowBelow({transaction:e})}}):d().createAndCommit({environment:e,userAction:"SelectableAddMenu.handleClick.addBelow",canUndo:!0,perform:n=>{const o=p().insertTextBelow({environment:e,blocks:[t],transaction:n,skipAnalytics:!0});if("suggest"===i&&o){const t=u().RR(e,n,o);u().tM(n,o,{id:a().JW(),type:"insert",discussionId:t.id}),u().c3({environment:e,transaction:n,discussionStore:t,addModifiedBlockIdsAfter:[o.id]})}}}),function(e){c().vd(e,"click_add_menu")}(e),_().default.reset())}},409268:(e,t,n)=>{"use strict";n.d(t,{s:()=>s});n(898992),n(672577);var o=n.n(n(791611)),i=()=>n(489348);function s(e){const t=i().A.find((t=>t.store===e));if(t){const e=t.getContentWrapEl();if(e)return o()(e.innerText)}return 0}},424139:(e,t,n)=>{"use strict";n.r(t),n.d(t,{emojiFaceIcon:()=>s,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M8.045 11.706a.625.625 0 0 0-1.036.698A3.6 3.6 0 0 0 10.005 14c1.245 0 2.35-.637 2.996-1.596a.625.625 0 0 0-1.036-.698 2.37 2.37 0 0 1-1.96 1.044 2.36 2.36 0 0 1-1.96-1.044m-.68-2.041c.49 0 .88-.46.88-1.02s-.39-1.02-.88-1.02-.88.46-.88 1.02.39 1.02.88 1.02m6.15-1.02c0 .56-.39 1.02-.88 1.02s-.88-.46-.88-1.02.39-1.02.88-1.02.88.46.88 1.02"}),(0,o.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},s=(0,n(340498).wt)("emojiFace",i)},440882:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("commentAdd",{viewBox:"0 0 16 15",svg:(0,o.jsx)("path",{d:"M4.73926 14.6865C4.46582 14.6865 4.25163 14.5977 4.09668 14.4199C3.94629 14.2422 3.87109 14.0007 3.87109 13.6953V12.0137H3.50195C2.84115 12.0137 2.27376 11.8861 1.7998 11.6309C1.3304 11.3757 0.968099 11.0111 0.712891 10.5371C0.46224 10.0586 0.336914 9.47982 0.336914 8.80078V3.49609C0.336914 2.81706 0.46224 2.24056 0.712891 1.7666C0.963542 1.28809 1.32585 0.921224 1.7998 0.666016C2.27832 0.410807 2.86165 0.283203 3.5498 0.283203H12.4434C13.127 0.283203 13.708 0.410807 14.1865 0.666016C14.665 0.921224 15.0296 1.28809 15.2803 1.7666C15.5309 2.24056 15.6562 2.81706 15.6562 3.49609V8.80078C15.6562 9.47982 15.5309 10.0586 15.2803 10.5371C15.0296 11.0111 14.665 11.3757 14.1865 11.6309C13.708 11.8861 13.127 12.0137 12.4434 12.0137H8.21875L5.88086 14.085C5.64844 14.29 5.44792 14.4404 5.2793 14.5361C5.11068 14.6364 4.93066 14.6865 4.73926 14.6865ZM5.07422 13.1758L7.24121 11.0293C7.38704 10.8835 7.52148 10.7878 7.64453 10.7422C7.77214 10.6921 7.94076 10.667 8.15039 10.667H12.4023C13.0495 10.667 13.528 10.5075 13.8379 10.1885C14.1523 9.86491 14.3096 9.38639 14.3096 8.75293V3.53711C14.3096 2.9082 14.1523 2.43424 13.8379 2.11523C13.528 1.79167 13.0495 1.62988 12.4023 1.62988H3.58398C2.94141 1.62988 2.46289 1.79167 2.14844 2.11523C1.83854 2.43424 1.68359 2.9082 1.68359 3.53711V8.75293C1.68359 9.38639 1.83854 9.86491 2.14844 10.1885C2.46289 10.5075 2.94141 10.667 3.58398 10.667H4.52051C4.71191 10.667 4.85091 10.7103 4.9375 10.7969C5.02865 10.8789 5.07422 11.0225 5.07422 11.2275V13.1758ZM4.8418 6.14844C4.8418 5.95703 4.90104 5.80208 5.01953 5.68359C5.13802 5.56055 5.29525 5.49902 5.49121 5.49902H7.36426V3.62598C7.36426 3.43913 7.4235 3.28646 7.54199 3.16797C7.66048 3.04492 7.81087 2.9834 7.99316 2.9834C8.18457 2.9834 8.33952 3.04264 8.45801 3.16113C8.58105 3.27962 8.64258 3.43457 8.64258 3.62598V5.49902H10.5156C10.707 5.49902 10.862 5.56055 10.9805 5.68359C11.099 5.80208 11.1582 5.95703 11.1582 6.14844C11.1582 6.33073 11.099 6.48112 10.9805 6.59961C10.862 6.7181 10.707 6.77734 10.5156 6.77734H8.64258V8.65723C8.64258 8.84408 8.58105 8.99902 8.45801 9.12207C8.33952 9.24056 8.18457 9.2998 7.99316 9.2998C7.81087 9.2998 7.66048 9.24056 7.54199 9.12207C7.4235 8.99902 7.36426 8.84408 7.36426 8.65723V6.77734H5.49121C5.2998 6.77734 5.14258 6.7181 5.01953 6.59961C4.90104 6.48112 4.8418 6.33073 4.8418 6.14844Z"})})},519143:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"m3.625 11.151 1.187-1.187a.625.625 0 1 1 .884.884l-2.254 2.254a.625.625 0 0 1-.884 0L.304 10.848a.625.625 0 0 1 .884-.884l1.187 1.187V10a7.625 7.625 0 0 1 12.814-5.587.625.625 0 1 1-.851.915A6.375 6.375 0 0 0 3.625 10zm14-2.302 1.187 1.187a.625.625 0 1 0 .884-.884l-2.254-2.254a.625.625 0 0 0-.884 0l-2.254 2.254a.625.625 0 1 0 .884.884l1.187-1.187V10a6.375 6.375 0 0 1-10.713 4.672.625.625 0 0 0-.85.915A7.625 7.625 0 0 0 17.625 10z"})},i=(0,n(340498).wt)("arrowCircleLoop",o)},535725:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var o=n(296540);const i=function(e,t){if(e.ref&&t.ref){const n=t.ref;t.ref=t=>{e.ref(t),n(t)}}return o.cloneElement(e,t)}},536583:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M9.294 2.325h3.103c.484 0 .948.192 1.29.534l2.897 2.898c.343.342.535.806.535 1.29v5.903a1.825 1.825 0 0 1-1.825 1.825H12.53v1.075a1.825 1.825 0 0 1-1.825 1.825h-6A1.825 1.825 0 0 1 2.88 15.85v-8.8c0-1.008.817-1.825 1.825-1.825H7.47V4.15c0-1.008.817-1.825 1.825-1.825M9.1 5.76l2.897 2.897c.342.342.534.806.534 1.29v3.578h2.763a.575.575 0 0 0 .575-.575V7.3h-1.975a1.75 1.75 0 0 1-1.75-1.75V3.575h-2.85a.575.575 0 0 0-.575.575v1.318q.208.12.38.292m6.16.44-2.016-2.016V5.55c0 .359.29.65.65.65zm-10.554.275a.575.575 0 0 0-.575.575v8.8c0 .318.258.575.575.575h6a.575.575 0 0 0 .575-.575V10.2H9.306a1.75 1.75 0 0 1-1.75-1.75V6.475zm3.95.609V8.45c0 .359.291.65.65.65h1.366z"})},i=(0,n(340498).wt)("docOnDoc",o)},571400:(e,t,n)=>{"use strict";n.d(t,{t:()=>o});const o=35},583690:(e,t,n)=>{"use strict";n.d(t,{AC:()=>u,I2:()=>c,YC:()=>d});n(296540);var o=()=>n(401497),i=()=>n(212050),s=()=>n(413267),r=()=>n(959013),a=n(474848);function l(e){const{enabled:t,labelIfEnabled:n,labelIfDisabled:i}=e,s=(0,o().IS)((e=>({container:{color:t?e.mediumTextColor:e.lightTextColor}})),[t]);return(0,a.jsxs)("div",{style:s.container,children:[p(t)," ",t?n:i]})}function c(e){const t="none"!==e;return[(0,a.jsx)(l,{enabled:t&&e.read_content,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.mixedAccess.readContent.enabled",defaultMessage:"Can read content."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.mixedaccess.readContent.disabled",defaultMessage:"Cannot read content."})},"read_content"),(0,a.jsx)(l,{enabled:t&&e.insert_content,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.enabled",defaultMessage:"Can insert content."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.disabled",defaultMessage:"Cannot insert content."})},"insert_content"),(0,a.jsx)(l,{enabled:t&&e.update_content,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.enabled",defaultMessage:"Can update content."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.disabled",defaultMessage:"Cannot update content."})},"update_content"),(0,a.jsx)(l,{enabled:t&&e.insert_comment,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.insertComment.enabled",defaultMessage:"Can comment."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.insertComment.disabled",defaultMessage:"Cannot comment."})},"insert_comment"),(0,a.jsx)(l,{enabled:t&&e.read_comment,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.readComment.enabled",defaultMessage:"Can read comments."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.readComment.disabled",defaultMessage:"Cannot read comments."})},"read_comment")]}function d(e){return[(0,a.jsx)(l,{enabled:e.read_user_without_email,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.userAccess.readUsers.enabled",defaultMessage:"Can view users."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.userAccess.readUsers.disabled",defaultMessage:"Cannot view users."})},"read_user_without_email"),(0,a.jsx)(l,{enabled:e.read_user_with_email,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.enabled",defaultMessage:"Can view user email addresses."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.disabled",defaultMessage:"Cannot view user email addresses."})},"read_user_with_email")]}function u(e){return[(0,a.jsx)(l,{enabled:e.link_preview,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.linkPreview.enabled",defaultMessage:"Can preview links."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.linkPreview.disabled",defaultMessage:"Cannot preview links."})},"link_preview"),(0,a.jsx)(l,{enabled:e.synced_database,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.syncedDatabase.enabled",defaultMessage:"Can sync databases."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.syncedDatabase.disabled",defaultMessage:"Cannot sync databases."})},"synced_database")]}function p(e){const t={width:12,display:"inline",verticalAlign:"middle"};return e?(0,s().b)(t):(0,i().u)(t)}},609316:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});const o=(0,n(583835).Dv)("importFile")},704907:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var o=n(296540),i=()=>n(56366),s=()=>n(433847),r=()=>n(959013),a=()=>n(901389),l=()=>n(579627),c=()=>n(247123),d=()=>n(878377),u=()=>n(108944),p=()=>n(125565),m=n(474848);const v=function(e){let{store:t}=e;const v=(0,n(401497).DP)(),f=(0,n(484714).v3)(),b=(0,o.useMemo)((()=>({environment:f,blocks:[t],publicEditMode:void 0})),[f,t]),g=(0,i().K8)((()=>d().Uo6([d().Ezz,d().AU6(d().p2L)])(b)),[b]),_=(0,i().K8)((()=>d().Uo6([d()._mr,d().AU6(d().Km9)])(b)),[b]);if(g){const{device:e}=f;return(0,m.jsx)("div",{style:{backgroundColor:v.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${v.regularDividerColor}`,marginTop:e.isMobile?28:1},children:(0,m.jsxs)(n(704152).A,{disabled:!_,style:{padding:12},onClick:()=>async function(e,t){if(!e.isDefined())return;const n=e.getPermissionItems(),o=u().KA(e),i=o?s().wD(u().E(o)):[],d=s().Cd(e.getModel(),n,i),p={type:"restore",permissionChanges:d},{accept:v}=await a().Gh({message:(0,c().r6)(p),acceptLabel:(0,c().QU)(p),cancelLabel:(0,m.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,m.jsx)(c().f2,{openState:p})});v&&l().YD({environment:t,store:e})}(t,f),children:[(0,m.jsx)(p().A,{isMultiline:!0,isSmall:!0,children:(0,m.jsx)(r().sA,{id:"blockMenuRestrictedMessage.label",defaultMessage:"You don’t have permission to edit this block because it is restricted."})}),_&&(0,m.jsx)(p().A,{style:{marginTop:6,fontWeight:n(284371).Wy.semibold},children:(0,m.jsx)(r().sA,{id:"blockMenuRestrictedMessage.adminRestoreAction.label",defaultMessage:"Restore permissions"})})]})})}return null}},715011:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(296540),i=()=>n(959013),s=()=>n(409268),r=n(474848);function a(e){const t=(0,o.useMemo)((()=>(0,s().s)(e.store)),[e.store]);return(0,r.jsx)(i().sA,{id:"pageWordCount.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:t}})}},737517:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var o=n(296540),i=()=>n(484714),s=()=>n(56366);function r(e,t){n(989423).vd(e,"click_selection_menu",{block_type:t.blockType})}var a=()=>n(406699),l=()=>n(574012),c=()=>n(871399),d=()=>n(444570),u=()=>n(327994),p=(n(898992),n(354520),()=>n(959013)),m=()=>n(356985),v=()=>n(419357),f=()=>n(89924),b=()=>n(962036),g=()=>n(722872),_=()=>n(836251),h=()=>n(502438),C=n(474848);const y=(0,p().YK)({filterActions:{defaultMessage:"Search actions…",id:"selectableHoverMenu.filterActions.placeholder"}});function x(e){const{hasEditorPermissions:t,isWorkspaceAdmin:r,store:a,onDismiss:l,containerRef:c,query:d,setQuery:u}=e,p=(0,i().v3)(),v=(0,i().WS)(),f=(0,s().K8)((()=>h().default.state.stores),[]),b=(0,s().K8)((()=>{var e;return{environment:p,blocks:h().default.state.stores.length?h().default.state.stores:[a],originRect:null===(e=c.current)||void 0===e?void 0:e.getBoundingClientRect(),publicEditMode:void 0,analyticsFrom:"selection_menu"}}),[p,a,c]),_=(0,s().K8)((()=>a.isNavigableAncestorNonEditableState()),[a]),y=(0,s().K8)((()=>(0,n(478726).yU)(a)),[a]),[x,w]=(0,n(857437).$)(),M=(0,o.useCallback)((e=>{const t=f[0];if(t){const o=t.getType();if(o){const i=(0,n(519839).UH)(t),s=(0,n(476492).sl)(i)||{};(0,n(741496).N)(p,{analyticsName:e.analyticsName,action_type:e.analyticsActionType,from:"selection_menu",block_id:t.id,block_type:o,is_toggleable:(0,n(494043).Yt)(o,t.getFormat()),parent_collection_id:t.getParentCollectionIdUpToTwoLevels(),...s})}}e.closeParentMenu&&l()}),[p,l,f]),k=(0,s().K8)((()=>a.isCollectionView()),[a]),j=(0,n(891078).i0)(a),I=!v&&t&&!_&&!y&&!j,B=I&&(0,C.jsx)(A,{filter:d,setQuery:u,inputComboboxProps:x});let T;T=v?{menuType:g().gu.ActionSheet,header:B}:{menuType:g().gu.Popup,width:265,header:B};const R=(0,s().K8)((()=>void 0!==a.getAssociatedCollectionStore()),[a]);return(0,C.jsxs)(n(928600).A,{...T,children:[(0,C.jsx)(n(452558).A,{filter:d,initialFocus:d?0:void 0,sections:R?m().SH:m().JS,context:b,onAccept:M,comboboxProps:I?w:void 0}),!d&&(t||r)&&(0,C.jsx)(n(819493).$,{store:a,wordCountStores:f,isPageMoreButton:!1,hideTopBorder:!1}),!d&&(0,C.jsx)(n(704907).A,{store:a}),!d&&k&&(0,C.jsx)(S,{})]})}function A(e){const{filter:t,setQuery:n,inputComboboxProps:o}=e,s=(0,i().Y0)(),r=(0,p().tz)();return(0,C.jsx)(f().A,{isInput:!0,children:(0,C.jsx)(v().Ay,{value:t,onChange:e=>n(e.target.value),focus:!s.isMobile||void 0,focusAfterAnimation:!0,placeholder:r.formatMessage(y.filterActions),preventCaptureDeleteWhenEmpty:!0,preventCaptureClipboardShortcuts:!0,...o})})}function S(){return(0,C.jsx)(f().A,{topBorder:!0,children:(0,C.jsx)(b().A,{title:(0,C.jsx)(p().sA,{defaultMessage:"Learn about databases",id:"blocks.hoverBlockMenu.collectionHelpButton"}),href:(0,_().xS)("guides.database"),analyticsFrom:"selectable_hover_menu"})})}const w=(0,o.forwardRef)((function(e,t){const{selectable:p,store:m,disableDrag:v,isWorkspaceAdmin:f,nodeRect:b,containerRect:g}=e,_=(0,i().v3)(),h=(0,i().WS)(),y=(0,n(792485).S)(),[A,S]=(0,o.useState)(!1),w=(0,o.useRef)(null),M=(0,d().Jj)(),k=(0,s().K8)((()=>(0,d().zb)()),[]),j=u().jK,I=(0,s().K8)((()=>(0,n(278014).qg)({marginItemType:"drag_handle",store:m,environment:_,nodeRect:b,containerRect:g,selectable:p})),[m,_,b,g,p]),B=(0,s().K8)((()=>m.isNavigableAncestorNonEditableState()&&!m.isInsideCollection()),[m]),T=(0,s().K8)((()=>{var e;return"editor"===m.getRole()||"read_and_write"===m.getRole()||"edit"===(null==y||null===(e=y.publicEditModeStore.state)||void 0===e?void 0:e.permission)}),[null==y?void 0:y.publicEditModeStore,m]),R=(0,s().K8)((()=>"suggest"===n(77246).Uv.getMode(m)),[m]),P=!v&&T&&!B&&!R,E=(0,n(401497).IS)((e=>({div:{position:"absolute",left:I,width:k,height:j,pointerEvents:"auto",cursor:P?"-webkit-grab":void 0},popup:{width:265,overflow:"hidden"},iconStyle:M?(0,u().Cz)(e,A):{}})),[I,k,j,P,M,A]),[H,V]=(0,o.useState)(""),D=(0,s().K8)((()=>{const e=c().default.state;return e.isOpen&&e.menuIsOpen&&e.currentStore===m}),[m]);(0,o.useEffect)((()=>()=>{D&&c().default.reset()}),[]);const K=(0,o.useCallback)((()=>{const e=c().default.state,t=l().A.state;if(e.isOpen){V(""),h&&t.phase===l().i.shown?l().A.onHide((()=>c().default.setState({...e,menuIsOpen:!0}))):c().default.setState({...e,menuIsOpen:!0}),n(778417).Lt({environment:_,store:m});const o=m.getType();o&&r(_,{blockType:o})}}),[_,h,m]),z=(0,o.useCallback)((()=>c().default.reset()),[]);return(0,s().K8)((()=>{if(!p||!p.props.shouldShowHoverMenu||h)return!1;const e=m.getType();return!e||!["column_list"].includes(e)}),[m,p,h])?(0,C.jsx)("div",{style:E.div,ref:w,children:(0,C.jsx)(n(14235).Ay,{popupType:h?a().z7.SlideUp:a().z7.Popup,open:D,placementToOrigin:a().sx.Left,alignmentToOrigin:a().yP.Center,onDismiss:z,originGap:5,forceInitialInbound:!0,style:E.popup,render:()=>(0,C.jsx)(x,{hasEditorPermissions:T,isWorkspaceAdmin:f,store:m,onDismiss:z,containerRef:w,query:H,setQuery:V}),origin:(0,C.jsx)(n(199896).A,{className:n(38337).LpV,store:m,isHoverMenu:!0,canDrag:P,canSelect:!1,analyticsName:"selection_menu",disableForceTouch:!0,disableHorizontalDragEdgeScroll:!0,onMouseEnter:()=>{S(!0)},onMouseLeave:()=>{S(!1)},children:(0,C.jsx)(n(348501).A,{ref:t,width:k,height:j,disallowTabbing:!0,onClick:K,disableDrag:!P,iconStyle:E.iconStyle})}),trapFocus:D})}):null}))},742478:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});n(898992),n(354520),n(737550);var o=n(296540),i=()=>n(484714),s=()=>n(56366),r=()=>n(959013),a=()=>n(555776),l=()=>n(24157),c=n(474848);const d=(0,o.forwardRef)((function(e,t){const d=(0,i().v3)(),u=(0,i().Y0)(),p=(0,r().tz)(),{selectable:m,store:v,containerRect:f}=e,[b,g]=(0,o.useState)(!1),_=(0,n(444570).Jj)(),h=(0,s().K8)((()=>v.isFirstBlockInCalloutV2Block()),[v]),C=(0,s().K8)((()=>{var e;const t=Boolean(n(94953).A.getFirstSelectedDiscussionId()||n(372154).A.getFramePageFirstSelectedDiscussionId()||a().A.state.isActivelyComposing),o=v.getDiscussionStores().filter((e=>!e.getResolved())).length>0,i=n(116008).A.getBlockStore()===v,s=v.getType(),r="toggle"===s&&!n(468484).A.isOpen(v.id)&&(0,n(299545).O3)(v,{recursivelyLoadAllDiscussions:!0}).length>0;if(!m||u.isMobile||!m.props.shouldShowCommentMenu||v.isNavigableAncestorNonCommentableState()||t||s&&["video","image"].includes(s)||v.isEmptyTitle()||o||i||r||h)return!1;const c="empty"!==l().default.state.mode&&l().default.state.multiSelection;if(c&&(0,n(231722).kM)(c))return!0;return!(c?(null===(e=(0,n(962845).ZS)({multiSelection:c,filterCommonAncestors:!1,focus:"end"}))||void 0===e?void 0:e.stores)??[]:[]).some((e=>e.id===v.id))}),[v,m,u.isMobile,h]),y=(0,s().K8)((()=>{var e;const t=n(186445).ZT(d),o=null==t||null===(e=t.getContentWrapEl())||void 0===e?void 0:e.getBoundingClientRect();return(0,n(278014).jU)({marginItemType:"add_comment",nodeRect:o,containerRect:f})}),[d,f]),x=(0,n(401497).IS)((e=>({container:{position:"relative",right:y},tooltipMessage:{color:e.text.contrastSecondary},iconStyle:{marginLeft:.65,..._?(0,n(327994).Cz)(e,b):{}},iconButton:{paddingLeft:6,paddingRight:6,width:"unset"}})),[_,b,y]),A=(0,o.useCallback)((async()=>{if(v.isType(n(700500).uP)){const e=v.getBlockTitleStore(),t=n(871399).default.state,o=t.isOpen?t.selectableBoundingRect:void 0,i=n(792002).mk(e);if(i){const t=await n(862292).T.formulas.load();n(441467).hN({environment:d,blockStore:v,multiSelection:{start:{index:i.startIndex,store:e},end:{index:i.endIndex,store:e}},rect:o,from:"right_margin",formulasModule:t})}}else(0,n(730307).l)({environment:d,blockStore:v,from:"right_margin"})}),[d,v]),S=(0,o.useCallback)((e=>{g(e),e?a().A.setHoverWithSource("right_margin_button"):a().A.resetHoverSource("right_margin_button")}),[]),w=(0,o.useCallback)((()=>S(!0)),[S]),M=(0,o.useCallback)((()=>S(!1)),[S]);return C?(0,c.jsx)("div",{style:x.container,onMouseDown:n(753199).tr,children:(0,c.jsx)(n(859428).A,{placement:n(962730).W.Bottom,delayThreshold:300,renderTooltip:()=>(0,c.jsx)(r().sA,{defaultMessage:"Comment",id:"selectableCommentMenu.commentPrompt.tooltip"}),render:e=>(0,c.jsx)("div",{onMouseOver:w,onMouseLeave:M,children:(0,c.jsx)(n(285790).A,{ref:t,ariaLabel:p.formatMessage({id:"selectableCommentMenu.iconButton",defaultMessage:"Comment"}),disallowTabbing:!0,icon:n(440882).w,onClick:A,style:x.iconButton,iconStyle:x.iconStyle,...e})})})}):null}))},751109:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("slackLogo",{viewBox:"0 0 16 16",svg:(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{d:"M1.68078 11.7915C2.60586 11.7915 3.36156 11.0358 3.36156 10.1107V8.42993H1.68078C0.755701 8.42993 0 9.18563 0 10.1107C0 11.0358 0.755701 11.7915 1.68078 11.7915Z",fill:"#E01E5A"}),(0,o.jsx)("path",{d:"M5.88928 8.42993C4.9642 8.42993 4.2085 9.18563 4.2085 10.1107V14.3192C4.2085 15.2443 4.9642 16 5.88928 16C6.81436 16 7.57006 15.2443 7.57006 14.3192V10.1107C7.57006 9.18563 6.81436 8.42993 5.88928 8.42993Z",fill:"#E01E5A"}),(0,o.jsx)("path",{d:"M4.2085 1.68078C4.2085 2.60586 4.9642 3.36156 5.88928 3.36156H7.57006V1.68078C7.57006 0.755701 6.81436 0 5.88928 0C4.9642 0 4.2085 0.755701 4.2085 1.68078Z",fill:"#36C5F0"}),(0,o.jsx)("path",{d:"M7.57003 5.88928C7.57003 4.9642 6.81433 4.2085 5.88925 4.2085H1.68078C0.755701 4.2085 0 4.9642 0 5.88928C0 6.81436 0.755701 7.57006 1.68078 7.57006H5.88925C6.81433 7.57006 7.57003 6.81436 7.57003 5.88928Z",fill:"#36C5F0"}),(0,o.jsx)("path",{d:"M10.1107 7.57003C11.0358 7.57003 11.7915 6.81433 11.7915 5.88925V1.68078C11.7915 0.755701 11.0358 0 10.1107 0C9.18563 0 8.42993 0.755701 8.42993 1.68078V5.88925C8.42993 6.81433 9.18563 7.57003 10.1107 7.57003Z",fill:"#2EB67D"}),(0,o.jsx)("path",{d:"M14.3192 4.2085C13.3941 4.2085 12.6384 4.9642 12.6384 5.88928V7.57006H14.3192C15.2443 7.57006 16 6.81436 16 5.88928C16 4.9642 15.2443 4.2085 14.3192 4.2085Z",fill:"#2EB67D"}),(0,o.jsx)("path",{d:"M8.42993 10.1107C8.42993 11.0358 9.18563 11.7915 10.1107 11.7915H14.3192C15.2443 11.7915 16 11.0358 16 10.1107C16 9.18563 15.2443 8.42993 14.3192 8.42993H10.1107C9.18563 8.42993 8.42993 9.18563 8.42993 10.1107Z",fill:"#ECB22E"}),(0,o.jsx)("path",{d:"M11.7915 14.3192C11.7915 13.3941 11.0358 12.6384 10.1107 12.6384H8.42993V14.3192C8.42993 15.2443 9.18563 16 10.1107 16C11.0358 16 11.7915 15.2443 11.7915 14.3192Z",fill:"#ECB22E"})]})})},777092:(e,t,n)=>{"use strict";n.d(t,{JQ:()=>d,d5:()=>u,vt:()=>c});var o=()=>n(764880),i=()=>n(310442),s=()=>n(824862),r=()=>n(798880),a=()=>n(534177),l=()=>n(630116);function c(e){const{parentStore:t,pointer:n}=e,i=(0,l().Oo)(t,n).getValue();if(i)return(0,o().D3)({table:n.table,value:i})}function d(e){const{parentStore:t,pointer:n}=e;return n.table===s().GP?l().vK.createChildStore(t,n):n.table===r().oo?l().LU.createChildStore(t,n):n.table===i().yj?l().pH.createChildStore(t,n):void(0,a().HB)(n)}function u(e){return e.table===s().GP?(0,o().oC)(e.getValue()):e.table===r().oo?(0,o().MR)(e.getValue()):e.table===i().yj?(0,o().w2)(e.getValue()):void(0,a().HB)(e)}},791611:e=>{var t=/[a-zA-Z0-9_\u0392-\u03c9\u00c0-\u00ff\u0600-\u06ff]+|[\u4e00-\u9fff\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g;e.exports=function(e){var n=e.match(t),o=0;if(!n)return 0;for(var i=0;i<n.length;i++)n[i].charCodeAt(0)>=19968?o+=n[i].length:o+=1;return o}},819493:(e,t,n)=>{"use strict";n.d(t,{$:()=>x,b:()=>A});n(898992),n(908872),n(296540);var o=()=>n(662303),i=()=>n(484714),s=()=>n(56366),r=()=>n(401497),a=()=>n(764880),l=()=>n(869190),c=()=>n(959013),d=()=>n(777092),u=()=>n(921855),p=()=>n(972435),m=()=>n(963589),v=()=>n(962730),f=()=>n(706965),b=()=>n(678553),g=()=>n(89924),_=()=>n(859428),h=()=>n(125565),C=()=>n(715011),y=n(474848);function x(e){let{isPageMoreButton:t,hideTopBorder:n,store:o,wordCountStores:l,showWordCount:d}=e;const u=(0,s().K8)((()=>A(o)),[o]),{device:m}=(0,i().v3)(),x=(0,s().K8)((()=>m.isPhone),[m]),w=p().A.getIntl(),M=(0,r().IS)((()=>({menuItem:{paddingTop:x?8:n?0:6,paddingBottom:x?8:16}})),[n,x]);return u&&!u.canAccess?null:(0,y.jsx)(g().A,{topBorder:!t&&!n,style:{paddingTop:t?0:8,paddingBottom:t?0:8},children:(0,y.jsx)(b().A,{style:u?void 0:M.menuItem,shouldWrapTitle:!0,title:u?(0,y.jsx)(_().A,{placement:v().W.Right,render:e=>(0,y.jsxs)("div",{...e,children:[d&&(0,y.jsx)(h().A,{isSmall:!0,isSecondaryColor:!0,isMobile:m.isPhone,isMultiline:!0,style:{marginBottom:4,marginTop:8},children:(0,y.jsx)(c().sA,{id:"pageMoreButton.wordCount.caption",defaultMessage:"Word count: {count}",values:{count:(0,y.jsx)(C().A,{store:o})}})}),l&&(0,y.jsx)(S,{stores:l}),(0,y.jsx)(h().A,{isSmall:!0,isSecondaryColor:!0,isMobile:m.isPhone,isMultiline:!0,style:{marginBottom:4},children:(0,y.jsx)(c().sA,{id:"blockAuthorInfo.label",defaultMessage:"Last edited by {author}",values:{author:u.lastEditedBy.asActor?(0,a().lR)(w,u.lastEditedBy):void 0}})}),(0,y.jsx)(h().A,{isSmall:!0,isSecondaryColor:!0,isMobile:m.isPhone,style:{marginBottom:d?8:0},children:u.lastEditedTime})]}),renderTooltip:()=>(0,y.jsx)(f().A,{store:o,compactFormat:!0})}):void 0,loading:!u})})}function A(e){const t=e.getCreatedByPointer(),n=e.getCreatedTime(),i=e.getLastEditedByPointer(),s=e.getLastEditedTime(),r=p().A.getIntl();if(!e.canRead())return{canAccess:!1};if(t&&n&&s&&i){const a=(0,d().vt)({parentStore:e,pointer:t}),c=(0,l().jE)(n,o().locale,r),u=(0,d().vt)({parentStore:e,pointer:i}),p=(0,l().jE)(s,o().locale,r);if(!u)return;return{canAccess:!0,createdBy:a,createdTime:c,lastEditedBy:u,lastEditedTime:p}}}function S(e){const{stores:t}=e,n=(0,m().X)("selectable_word_count"),o=(0,s().K8)((()=>n?w(t):0),[n,t]);return n?(0,y.jsx)(h().A,{isSmall:!0,isSecondaryColor:!0,style:{marginBottom:4},children:(0,y.jsx)(c().sA,{id:"blockMetadataMenuItem.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:o}})}):null}function w(e){return e.reduce(((e,t)=>{const n=(0,u().r4)(t.getTitleValue(),t);return e+(0,u().sQ)(n)+w(t.getContentStores())}),0)}},820579:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M10 2.4c.345 0 .625.28.625.625v9.966l3.333-3.333a.625.625 0 1 1 .884.884l-4.4 4.4a.625.625 0 0 1-.884 0l-4.4-4.4a.625.625 0 0 1 .884-.884l3.333 3.333V3.025c0-.345.28-.625.625-.625M4.15 16.35a.625.625 0 1 0 0 1.25h11.7a.625.625 0 0 0 0-1.25z"})},i=(0,n(340498).wt)("arrowLineDown",o)},898563:(e,t,n)=>{"use strict";n.d(t,{C6:()=>b,Eu:()=>d,FY:()=>r,MP:()=>v,YT:()=>c,d2:()=>f,fK:()=>g,lL:()=>l,mH:()=>_,oI:()=>a,sD:()=>p,tr:()=>u,yS:()=>m});var o=()=>n(989423),i=()=>n(680074),s=()=>n(10984);function r(e){o().vd(e,"add_slack_integration")}function a(e){o().vd(e,"remove_slack_integration")}function l(e,t){o().vd(e,"slack_notification_create",t)}function c(e,t){o().vd(e,"slack_notification_delete",t)}function d(e,t){o().vd(e,"slack_notification_update",t)}function u(e,t){const n=s().AI(),r=i().FX();o().vd(e,"slack_imports_invite_render_button",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function p(e,t){const n=s().AI(),r=i().FX();o().vd(e,"slack_imports_invite_render_invite_popup",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function m(e,t){const n=s().AI(),r=i().FX();o().vd(e,"slack_imports_invite_click_invite_button",{subscription_tier:n,domain_type:r,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id})}function v(e,t){const n=s().AI(),r=i().FX();o().vd(e,"slack_imports_invite_completed",{subscription_tier:n,domain_type:r,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id,error:t.error,invite_stage:t.invite_stage})}function f(e,t){const n=s().AI(),r=i().FX();o().vd(e,"slack_imports_invite_dismiss_popup",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function b(e,t){const n=s().AI(),r=i().FX();o().vd(e,"slack_imports_invite_click_select_all",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_user_count:t.invited_user_count,is_unselect:t.is_unselect,invite_token_query:t.invite_token_query})}function g(e,t){const n=s().AI(),r=i().FX();o().vd(e,"slack_imports_invite_start_slack_integration",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}function _(e,t){const n=s().AI(),r=i().FX();o().vd(e,"slack_imports_invite_complete_slack_integration",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success})}},908928:(e,t,n)=>{"use strict";n.d(t,{GO:()=>T,Ju:()=>B,KA:()=>I,L0:()=>H,L2:()=>V,dA:()=>R,gI:()=>j,oG:()=>E,sK:()=>P});n(898992),n(354520),n(803949);var o=()=>n(386164),i=()=>n(433847),s=()=>n(68263),r=()=>n(388821),a=()=>n(179034),l=()=>n(824862),c=()=>n(161479),d=()=>n(96689),u=()=>n(798880),p=()=>n(534177),m=()=>n(901389),v=()=>n(855801),f=()=>n(594794),b=()=>n(972435),g=()=>n(731320),_=()=>n(630116),h=()=>n(449506),C=()=>n(496414),y=()=>n(579627),x=()=>n(246826),A=()=>n(436572),S=()=>n(317909),w=()=>n(633457);const M=(0,n(959013).YK)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function k(e,t){const{environment:n,spaceStore:o,spaceRole:i}=t,s=function(e){const{name:t,spaceStore:n,userId:o,icon:i,type:s,environment:r}=e,a=Date.now(),c={name:t,created_at:a,created_by_table:u().oo,created_by_id:o,alive:!0,icon:i,space_id:n.id,last_edited_at:a,last_edited_by_id:o,last_edited_by_table:u().oo};switch(s){case"guest":return{...c,type:"guest",capabilities:e.capabilities,parent_table:d().NX,parent_id:n.id,integration_id:void 0};case"scim":return{...c,id:(0,f().Z1)({environment:r,table:l().GP,spaceId:n.id}),type:"scim",parent_table:u().oo,parent_id:o};default:(0,p().HB)(s)}}(t),r=x().eC({environment:n,table:l().GP,value:s,inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:e});return y().dy({environment:n,spaceStore:o,permissionItems:[{type:"bot_permission",role:i,bot_id:r.id}],transaction:e}),{botStore:r}}function j(e){const{environment:t}=e,{serverCommitResult:n,performResult:{botStore:o}}=S().createAndCommit({userAction:"botActions.createSpaceBot",environment:t,canUndo:!0,perform:t=>k(t,e)});return{botStore:o,transactionPromise:n}}async function I(e){const{environment:t,botId:n,onSuccess:o}=e,i=await h().callApi({eventName:"deleteBot",environment:t,data:{botId:n}});"failed"===i.type?m().Qg(i):"success"===i.type&&o&&(await w().oX({environment:t}),o())}async function B(e){const{environment:t,table:n,id:i,type:s}=e,r=await h().callApi({eventName:"getBots",environment:t,data:{table:n,id:i,type:s},headers:(0,o().WS)({spaceId:n===d().NX?i:void 0})});if("failed"===r.type)throw m().Qg(r),r;return{botIds:r.data.botIds,recordMap:r.data.recordMap}}async function T(e){const{environment:t,currentSpaceStore:n,botIds:o}=e;if(!n)return;const i=await h().callApi({eventName:"getBotSharedPageIds",environment:t,data:{spaceId:n.id,botIds:o}});if("failed"!==i.type)return i.data;m().Qg(i)}async function R(e){const{environment:t,botId:n}=e,o=await h().callApi({eventName:"getBotToken",environment:t,data:{botId:n}});if("failed"!==o.type)return o.data.token;m().Qg(o)}function P(e){const{botValue:t,store:n,environment:o}=e,{id:s,parent_id:r,parent_table:a,capabilities:l}=t,c={type:"bot_permission",bot_id:s,parent_id:r,parent_table:a,role:(0,i().MD)(l)};S().createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:o,canUndo:!0,perform:e=>{y().zP({environment:o,store:n,permissionItems:[c],transaction:e})}})}function E(e){const{botId:t,store:n,environment:o}=e,i=n.getPermissionItems().filter((0,p().u0)((e=>(0,s().P3)(e)?{true:e}:{false:e})));for(const s of i)if(s.bot_id===t){const e={...s,role:"none"};S().createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:o,canUndo:!0,perform:t=>{y().zP({environment:o,store:n,permissionItems:[e],transaction:t})}})}}function H(e){const{currentSpaceStore:t,environment:n,pages:o,botStore:i,addPermission:s}=e;if(!t)return;const r=(0,g().Ws)({botStore:i,addPermission:s});o.forEach((e=>{const o=_().sk.createChildStore(t,{table:a().ev,id:e});S().createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:n,canUndo:!0,perform:e=>{y().zP({environment:n,store:o,permissionItems:[r],transaction:e})}})}))}async function V(e){const{environment:t,spaceStore:n,spaceViewStore:o,templatePageId:i,botValue:s,pages:a}=e;if(!n)return;const d=_().sk.createChildStore(n,{table:l().GP,id:s.id});if(i)return await async function(e){const{environment:t,spaceStore:n,spaceViewStore:o,templatePageId:i,botStore:s}=e;if(!n||!o)return;try{C().m({message:M.duplicatingTemplate});const e=await h().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:i,spaceId:(0,c().e)(void 0)},shallow:!1}});if("failed"===e.type)return;const a=r().RecordMapWithRole.create(e.data.subtreeRecordMap),{createAndDuplicatePageInSpace:l}=await(0,v().nd)(),{performResult:d}=S().createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,canUndo:!0,perform:e=>{const r=l({environment:t,recordMap:a,copyPageId:i,isPrivate:!0,spaceStore:n,spaceViewStore:o,transaction:e,allowCopyExternalObjectInstances:!1}),c=o.getPrivatePageIds();c.length>0&&x().zv({store:o,data:{private_pages:[r.id,...c]},transaction:e});const d=(0,g().Ws)({botStore:s,addPermission:!0});return y().zP({environment:t,store:r,permissionItems:[d],transaction:e}),r}});return d}catch(a){A().D6({label:b().A.formatMessage(M.duplicatingTemplateError)})}finally{C().V()}}({environment:t,templatePageId:i,botStore:d,spaceStore:n,spaceViewStore:o});H({environment:t,currentSpaceStore:n,botStore:d,pages:a,addPermission:!0})}},973238:(e,t,n)=>{"use strict";n.d(t,{G:()=>s});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M6.958 10.446a.625.625 0 0 1 .884 0l1.533 1.533V6.513a.625.625 0 1 1 1.25 0v5.466l1.533-1.533a.625.625 0 1 1 .884.883l-2.6 2.6a.625.625 0 0 1-.884 0l-2.6-2.6a.625.625 0 0 1 0-.883"}),(0,o.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},s=(0,n(340498).wt)("arrowInCircleDown",i)},973454:(e,t,n)=>{"use strict";n.d(t,{p:()=>l,A:()=>c});var o=n(296540),i=()=>n(615234);const s=24*i().pT;function r(e){return a(e).status}function a(e){if(null==e||!e.enabled)return{status:"disabled"};const t=e.start_ts?1e3*e.start_ts-Date.now():0;return t<=0?{status:"active"}:t<=s?{status:"warning",nextUpdateInMs:t}:{status:"scheduled",nextUpdateInMs:t-s}}function l(e){const[t,n]=(0,o.useState)((()=>r(e)));return(0,o.useEffect)((()=>{if(null==e||!e.enabled)return;let t;return function o(){t=void 0;const{status:i,nextUpdateInMs:s}=a(e);n(i),s&&(t=setTimeout(o,s))}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[e]),t}function c(e){const[t,n]=(0,o.useState)((()=>Date.now())),s=(null==e?void 0:e.enabled)&&e.start_ts;return(0,o.useEffect)((()=>{if("number"!=typeof s)return;const e=s;let t;return function o(){const s=Date.now();n(s);const r=e*i().TD-s;if(r>0){const e=r%i().Xb,n=0===e?i().Xb:e;t=setTimeout(o,n)}else t=void 0}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[s]),{freezeStatus:r(e),minUntilFreeze:s?Math.floor((s*i().TD-t)/i().Xb):void 0}}}}]);