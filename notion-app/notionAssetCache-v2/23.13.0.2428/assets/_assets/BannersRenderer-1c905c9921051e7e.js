"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[94153],{10289:(e,t,n)=>{n.d(t,{Y:()=>r});var a=()=>n(645873);const o=new(a().O2)("invoice",(async()=>await n.e(60896).then(n.bind(n,430600)))),r=(0,a()._h)(o,(e=>e.Invoice))},77126:(e,t,n)=>{n.d(t,{j:()=>o});class a extends(()=>n(959180))().A{}const o=new a},104636:(e,t,n)=>{n.d(t,{Is:()=>d,LS:()=>m,NH:()=>g,QA:()=>p,_b:()=>u});n(944114);var a=()=>n(244641),o=(n(296540),()=>n(390527)),r=()=>n(604995),i=()=>n(959013),s=()=>n(534177),l=()=>n(108944),c=n(474848);function d(e){const t=l().g7(e)??[],n=[];for(const a of t){if(!("block"===a.table&&!0===a.isTemplate()&&a.getFormat().automation_id&&a.id!==e.id))continue;const t=a.getAutomationStore();if(t){if(!t.isReady())return{automationStoresReady:!1};void 0!==t.getRecurrence()&&t.isDefined()&&n.push(t.getModel())}}return{automationStoresReady:!0,...(0,o().templateAncestorsViolateRecurrenceNesting)(n)}}function u(e){switch(e){case"day":return(0,c.jsx)(i().sA,{defaultMessage:"Repeat daily",id:"database.templatePickerItem.recurrenceFrequency.daily"});case"week":return(0,c.jsx)(i().sA,{defaultMessage:"Repeat weekly",id:"database.templatePickerItem.recurrenceFrequency.weekly"});case"month":return(0,c.jsx)(i().sA,{defaultMessage:"Repeat monthly",id:"database.templatePickerItem.recurrenceFrequency.monthly"});case"year":return(0,c.jsx)(i().sA,{defaultMessage:"Repeat yearly",id:"database.templatePickerItem.recurrenceFrequency.yearly"});default:(0,s().HB)(e)}}function p(){return{start_date:a().c9.local().plus({days:1}).set({hour:0,minute:0,second:0,millisecond:0}).toMillis(),timezone:(0,r().dB)(),hour:0,minute:0,frequency:"day",interval:1}}function m(e){const{recurrence:t,intl:n,leadingPhrase:a}=e;return(0,o().rruleFromRecurrence)({..."month"===t.frequency?{...t,monthly_restriction:void 0}:t,weekdays:void 0,hour:0,minute:0,end_condition:void 0}).toText((e=>{switch(e){case"every":if(void 0===a)return"";if("every"===a)return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.every",defaultMessage:"every"});if("repeat every"===a)return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.repeatEvery",defaultMessage:"repeat every"});(0,s().HB)(a);break;case"day":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.day",defaultMessage:"day"});case"days":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.days",defaultMessage:"days"});case"week":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.week",defaultMessage:"week"});case"weeks":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.weeks",defaultMessage:"weeks"});case"month":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.month",defaultMessage:"month"});case"months":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.months",defaultMessage:"months"});case"year":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.year",defaultMessage:"year"});case"years":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.years",defaultMessage:"years"});default:return e.toString()}})).trim()}function g(e){const t=e.getRecurrence();return Boolean(e.isTriggerType("recurrence")&&t&&"disabled_recurrence_ended"===e.getStatus())}},132456:(e,t,n)=>{n.d(t,{J4:()=>x,kw:()=>A,lf:()=>_});n(16280),n(816573),n(878100),n(177936),n(748140),n(821903),n(491134),n(128845),n(237467),n(444732),n(979577),n(581454);var a=n.n(n(883503)),o=()=>n(496603),r=()=>n(720665),i=()=>n(416845),s=()=>n(628536),l=()=>n(96689);const c={version:8,notion_version:0,variant:2},d={version:8,notion_version:1,variant:2},u=0,p=1,m=6,g=8,h=10,f=Date.UTC(2024,0,1);function v(e,t){if(e)return t[u]=255,t[u+1]=240|15&t[u+1],t;const n=Math.floor(((new Date).getTime()-f)/r().nD);if(n>=4096||n<0)throw new Error("Invalid offsetInDays.");return t[u]=n>>4,t[u+1]=n<<4&240|15&t[u+1],t}function b(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[p]=240&t[p]|e/2**32&15;for(let n=0;n<4;n++)t[p+1+n]=e/2**(24-8*n)&255;return t}function y(e,t){const n=e?1:0;return t[m]=c.version<<4&240|c.notion_version<<1&14|1&n,t[g]=c.variant<<6&192|63&t[g],t}function S(e,t){if("block"===e)return t[h]=(0,s().vi)(e)|63&t[h],t;const n=(0,s().vi)(e);return t[h]=n>>8&127,t[h+1]=255&n,t}function C(e,t){const n=(0,s().TG)(e);return t[h]=127&n|128&t[h],t}function A(e,t,n,a){const o=new Uint8Array(16),r=globalThis.crypto.getRandomValues(o);return n!==l().NX&&v(e,r),b(t,r),y(a,r),S(n,r),w(r)}function x(e,t,n,a){return A(e,t,n,a)}function _(e,t,n){return M(e,t,n)}function M(e,t,n){const r=a()(n),l=o().iv(r,2).map((e=>parseInt(e.join(""),16)));if((0,s().ep)(t)){if(void 0===e)throw new(i().Um)(`Deterministic ID for '${t}' must specify a space short id`)}else if(void 0!==e)throw new(i().Um)(`Deterministic ID for '${t}' should not provide a space short id`);const c=new Uint8Array(l);return e&&b(e,c),C(t,c),function(e){e[m]=240&d.version<<4|14&d.notion_version<<1|1&e[m],e[g]=192&d.variant<<6|63&e[g]}(c),w(c)}const k=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function w(e){let t=0;return k[e[t++]]+k[e[t++]]+k[e[t++]]+k[e[t++]]+"-"+k[e[t++]]+k[e[t++]]+"-"+k[e[t++]]+k[e[t++]]+"-"+k[e[t++]]+k[e[t++]]+"-"+k[e[t++]]+k[e[t++]]+k[e[t++]]+k[e[t++]]+k[e[t++]]+k[e[t++]]}},140612:(e,t,n)=>{n.d(t,{w:()=>o});var a=()=>n(989423);function o(e,t){const{spaceId:n,pageId:o,joinSpaceMethod:r}=t;(0,a().u4)({environment:e,event:{eventName:"trusted_domain_banner_cta_clicked",eventProperties:{spaceId:n,pageId:o,joinSpaceMethod:r}}})}},253093:(e,t,n)=>{n.d(t,{j:()=>o});n(296540);var a=n(474848);const o=(0,n(340498).wt)("newSidebarSettings",{viewBox:"0 0 20 20",svg:(0,a.jsx)("path",{d:"M10 13C8.35003 13 7.00003 11.65 7.00003 10C7.00003 8.35 8.35003 7 10 7C11.65 7 13 8.35 13 10C13 11.65 11.65 13 10 13ZM10 8.5C9.17003 8.5 8.50003 9.17 8.50003 10C8.50003 10.83 9.17003 11.5 10 11.5C10.83 11.5 11.5 10.83 11.5 10C11.5 9.17 10.83 8.5 10 8.5ZM10.02 18.45C9.45003 18.45 8.90003 18.4 8.36003 18.29C8.08003 18.23 7.85003 18.01 7.80003 17.72L7.51003 16.06C7.51003 16.06 7.42003 16.02 7.37003 16L6.01003 16.96C5.77003 17.13 5.45003 17.13 5.21003 16.96C4.78003 16.67 4.39003 16.34 4.03003 15.98C3.63003 15.57 3.27003 15.15 2.97003 14.69C2.81003 14.45 2.81003 14.13 2.97003 13.9L3.94003 12.52C3.94003 12.52 3.90003 12.43 3.88003 12.38L2.24003 12.1C1.95003 12.05 1.72003 11.83 1.67003 11.54C1.58003 11.04 1.53003 10.52 1.53003 10.01C1.53003 9.44 1.58003 8.89 1.69003 8.35C1.75003 8.07 1.97003 7.84 2.26003 7.79L3.92003 7.5C3.92003 7.5 3.96003 7.41 3.98003 7.36L3.02003 6C2.85003 5.76 2.85003 5.44 3.02003 5.2C3.31003 4.78 3.64003 4.38 4.00003 4.02C4.40003 3.62 4.83003 3.27 5.28003 2.96C5.52003 2.8 5.84003 2.8 6.07003 2.96L7.45003 3.93C7.45003 3.93 7.54003 3.89 7.59003 3.87L7.87003 2.23C7.92003 1.94 8.14003 1.71 8.43003 1.66C8.93003 1.57 9.45003 1.52 9.96003 1.52C10.53 1.52 11.08 1.57 11.62 1.68C11.91 1.74 12.13 1.96 12.17 2.25L12.46 3.91C12.46 3.91 12.55 3.95 12.6 3.97L13.96 3.01C14.2 2.84 14.52 2.84 14.76 3.01C15.18 3.3 15.58 3.63 15.94 3.99C16.35 4.4 16.7 4.82 17 5.27C17.16 5.51 17.16 5.83 17 6.06L16.03 7.44C16.03 7.44 16.07 7.53 16.09 7.58L17.73 7.86C18.02 7.91 18.24 8.13 18.3 8.42C18.39 8.92 18.44 9.44 18.44 9.95C18.44 10.52 18.39 11.07 18.28 11.61C18.22 11.89 18 12.12 17.71 12.16L16.05 12.45C16.05 12.45 16.01 12.54 15.99 12.59L16.95 13.95C17.12 14.19 17.12 14.51 16.95 14.75C16.66 15.17 16.33 15.57 15.97 15.93C15.57 16.34 15.14 16.69 14.69 16.99C14.45 17.15 14.13 17.15 13.9 16.99L12.52 16.02C12.52 16.02 12.43 16.06 12.38 16.08L12.1 17.72C12.05 18.01 11.83 18.23 11.54 18.29C11.04 18.38 10.52 18.43 10.01 18.43L10.02 18.45ZM9.10003 16.99C9.68003 17.06 10.26 17.06 10.82 16.99L11.09 15.44C11.13 15.18 11.32 14.97 11.57 14.89C11.82 14.81 12.07 14.71 12.3 14.59C12.53 14.47 12.8 14.5 13.02 14.64L14.32 15.56C14.56 15.38 14.78 15.18 14.99 14.97C15.19 14.77 15.37 14.57 15.54 14.36L14.64 13.08C14.49 12.87 14.47 12.58 14.59 12.35C14.7 12.13 14.8 11.89 14.89 11.62C14.97 11.37 15.18 11.19 15.43 11.15L17 10.88C17.04 10.58 17.06 10.28 17.06 9.99C17.06 9.71 17.04 9.44 17.01 9.17L15.46 8.9C15.2 8.86 14.99 8.67 14.91 8.42C14.83 8.17 14.73 7.92 14.61 7.69C14.49 7.46 14.52 7.18 14.66 6.97L15.58 5.67C15.4 5.44 15.2 5.21 14.99 5C14.79 4.8 14.59 4.62 14.37 4.45L13.09 5.35C12.88 5.5 12.6 5.52 12.37 5.4C12.15 5.29 11.91 5.19 11.64 5.1C11.4 5.02 11.22 4.81 11.17 4.56L10.9 2.99C10.33 2.92 9.74003 2.92 9.18003 2.99L8.91003 4.54C8.87003 4.8 8.68003 5.01 8.43003 5.09C8.18003 5.17 7.93003 5.27 7.70003 5.39C7.47003 5.51 7.19003 5.49 6.98003 5.34L5.68003 4.42C5.44003 4.6 5.22003 4.8 5.01003 5.01C4.81003 5.21 4.63003 5.41 4.46003 5.62L5.36003 6.9C5.51003 7.11 5.53003 7.39 5.41003 7.62C5.30003 7.84 5.20003 8.08 5.11003 8.35C5.03003 8.59 4.82003 8.77 4.57003 8.82L3.00003 9.09C2.96003 9.39 2.94003 9.69 2.94003 9.98C2.94003 10.26 2.96003 10.53 2.99003 10.8L4.54003 11.07C4.80003 11.11 5.01003 11.3 5.09003 11.55C5.17003 11.8 5.27003 12.05 5.39003 12.28C5.50003 12.51 5.48003 12.79 5.34003 13L4.42003 14.3C4.60003 14.54 4.80003 14.76 5.01003 14.97C5.21003 15.17 5.41003 15.35 5.62003 15.52L6.90003 14.62C7.11003 14.47 7.39003 14.45 7.63003 14.57C7.85003 14.68 8.09003 14.78 8.36003 14.87C8.61003 14.95 8.79003 15.16 8.83003 15.41L9.10003 16.98V16.99Z"})})},254017:(e,t,n)=>{n.d(t,{V:()=>a});const a=(0,n(340498).xh)("blockLimit",{default:{loader:()=>n.e(77704).then(n.bind(n,477704))},small:{loader:()=>n.e(46014).then(n.bind(n,546014))},mini:{loader:()=>n.e(69062).then(n.bind(n,469062))},large:{loader:()=>n.e(31414).then(n.bind(n,531414))}})},322114:(e,t,n)=>{n.d(t,{A:()=>L});var a=n(296540),o=()=>n(484714),r=()=>n(56366),i=()=>n(757695),s=()=>n(959013),l=()=>n(100622),c=()=>n(534177),d=()=>n(284371),u=()=>n(452939),p=()=>n(701763),m=()=>n(140612),g=()=>n(449506),h=()=>n(898486),f=()=>n(722872),v=()=>n(351360),b=()=>n(10984),y=()=>n(251126),S=()=>n(805751),C=()=>n(623580),A=()=>n(928600),x=()=>n(864943),_=()=>n(204063),M=n(474848);const k={marginBottom:10},w={...k,width:"100%",height:"100%",padding:10,alignItems:"top",borderRadius:0},I=(0,s().YK)({requestAccessMessagePlaceholder:{defaultMessage:"Message (optional)",id:"requestAccessForm.messageInput.placeholder"},rateLimitError:{defaultMessage:"You have recently requested access to this page.",id:"requestAccessForm.errorMessage.rateLimit"},currentUserNotFound:{defaultMessage:"Current user not found.",id:"requestAccessForm.errorMessage.currentUserNotFound"}});function j(){return(0,M.jsx)(s().sA,{defaultMessage:"Cancel",id:"requestAccessForm.cancelButton.label"})}const T=i().default.createClass(0,{name:"RequestAttemptStore"}),B=i().default.createClass(void 0,{name:"MessageStore"});const L=function(e){const t=(0,o().v3)(),i=(0,o().WS)(),l=(0,r().uB)(e.popupStore,n(463830).A),c=(0,r().uB)(void 0,B),p=(0,r().uB)(void 0,T),g=(0,a.useCallback)((()=>R(l)),[l]),h=(0,a.useCallback)((()=>(0,M.jsx)(N,{...e,requestAttemptStore:p,messageStore:c,buttonPopupStore:l})),[e,p,c,l]),f=(0,r().K8)((()=>p.state>0),[p]),v=(0,r().K8)((()=>l.state.open),[l]);if("current-actor-to-block"===e.type)return(0,M.jsx)(F,{type:"page",block:e.block,flowId:e.flowId,buttonType:e.buttonType});if("current-actor-to-collection"===e.type)return(0,M.jsx)(F,{type:"collection",collection:e.collection,flowId:e.flowId,buttonType:e.buttonType});const b="primary"===e.buttonType?_().A:x().A,y=i?(0,M.jsx)(n(14235).Ay,{popupType:n(377586).n.SlideUp,open:v,render:h}):(0,M.jsx)(n(957986).A,{open:v,onDismiss:g,render:h});return"current-actor-to-space-via-onboarding"===e.type?y:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(b,{size:"lg",disabled:f,onClick:()=>{var n,a;return function(e,t){const{environment:n,flowId:a,type:o,source:r,spaceId:i,pageId:s}=e;"trusted_domain_page"===r&&i&&m().w(n,{spaceId:i,pageId:s,joinSpaceMethod:"request_to_join"});"current-actor-to-block"===o?u().Xx(n,{button_name:"request-access",flow_id:a,request_access_type:"page"}):"current-actor-to-space-via-team"===o&&u().Xx(n,{button_name:"request-access",flow_id:a,request_access_type:"team"});t.setState({open:!0})}({environment:t,flowId:e.flowId,type:e.type,source:e.source,pageId:null===(n=e.block)||void 0===n?void 0:n.id,spaceId:null===(a=e.block)||void 0===a?void 0:a.spaceId},l)},style:"outline"===e.buttonType?{fontWeight:d().Wy.semibold}:{},children:f?(0,M.jsx)(s().sA,{id:"fullPageError.requestAccessButton.requested",defaultMessage:"Requested access"}):q(e.type)}),y]})};function D(e){let{result:t}=e;return t&&t.error?(0,M.jsx)("div",{style:{color:l().Ay.redWithAlpha(1),textAlign:"center",width:"100%",marginBottom:16},children:t.error}):null}function P(e){e.update((e=>e+1))}function R(e){return e.setState({open:!1})}function V(e){let{error:t,result:n,ready:i,requestAttemptStore:l,messageStore:c,type:u}=e;const p=(0,s().tz)(),m=(0,o().WS)(),g=(0,a.useCallback)((()=>P(l)),[l]),h=(0,a.useCallback)((e=>function(e,t){t.setState(e.target.value)}(e,c)),[c]),f=(0,r().K8)((()=>Boolean(0===l.state||i&&n&&n.error)),[l,i,n]),v=(0,r().K8)((()=>c.state||""),[c]);return(0,M.jsxs)(M.Fragment,{children:[!m&&(0,M.jsx)("div",{style:{fontSize:16,fontWeight:d().Wy.semibold,marginBottom:16},children:q(u)}),(0,M.jsx)(C().A,{format:m?C().C.Transparent:void 0,textarea:!0,value:v,onChange:h,disabled:!f,placeholder:p.formatMessage(I.requestAccessMessagePlaceholder),style:{...m?{...w,padding:"16px"}:{...k,marginBottom:16,padding:"8px 12px",alignItems:"flex-start"}}}),!m&&(0,M.jsx)(_().A,{size:"lg",disabled:!f,onClick:g,style:k,children:(0,M.jsx)(s().sA,{defaultMessage:"Send request",id:"requestAccessForm.sendRequestButton.label"})}),(0,M.jsx)(D,{result:n})]})}function N(e){const{requestAttemptStore:t,messageStore:n,buttonPopupStore:i}=e,l=(0,o().v3)(),d=(0,o().WS)(),u=(0,s().tz)(),m=(0,a.useCallback)(((a,o,r)=>(0,M.jsx)(V,{requestAttemptStore:t,messageStore:n,error:a,result:o,ready:r,type:e.type})),[t,n,e.type]),b=(0,r().K8)((()=>{var e;return null===(e=v().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),C=(0,a.useCallback)((t=>async function(e){const{messageStore:t,buttonPopupStore:n,type:a,teamId:o,requestAttempt:r,environment:i,currentUserId:s,intl:l,flowId:d}=e;if(0===r)return;const u=t.state,m=await async function(){if("current-actor-to-block"===a)return g().callApi({eventName:"requestAccess",environment:i,data:{type:"current-actor-to-block",block:e.block,message:u}});if("current-actor-to-collection"===a)return g().callApi({eventName:"requestAccess",environment:i,data:{type:"current-actor-to-collection",collection:e.collection,message:u}});if("current-actor-to-space-via-team"===a)return g().callApi({eventName:"requestAccess",environment:i,data:{type:"current-actor-to-space-via-team",teamId:o,message:u}});if("current-actor-to-space-via-block"===a){if(!s)return;return g().callApi({eventName:"requestAccess",environment:i,data:{type:"actor-to-space",spaceId:e.block.spaceId,message:u,forActorId:s,attributes:{add_permissions_on_approval:!1,origin_type:"trusted_domain_page"}}})}if("current-actor-to-space-via-onboarding"===a){if(!s)return;return g().callApi({eventName:"requestAccess",environment:i,data:{type:"actor-to-space",spaceId:e.spaceId,message:u,forActorId:s,attributes:{add_permissions_on_approval:!1,origin_type:"onboarding"}}})}}();return m?"success"!==m.type?"UserRateLimitResponse"===(null===(f=m.body)||void 0===f?void 0:f.name)?{error:l.formatMessage(I.rateLimitError)}:{error:(0,h().Hu)(l,m)}:("current-actor-to-block"===a?p().T_(i,{request_access_type:"page",flow_id:d,requestId:m.data.requestId}):"current-actor-to-space-via-team"===a?p().T_(i,{request_access_type:"team",flow_id:d}):"current-actor-to-space-via-block"===a?p().T_(i,{request_access_type:"space",flow_id:d,source:"trusted_domain_page"}):"current-actor-to-collection"===a?p().T_(i,{request_access_type:"collection",flow_id:d,requestId:m.data.requestId}):"current-actor-to-space-via-onboarding"===a?p().T_(i,{request_access_type:"space",flow_id:d,source:"onboarding"}):(0,c().HB)(a),n.reset(),{value:!0}):{error:l.formatMessage(I.currentUserNotFound)};var f}({...e,requestAttempt:t,environment:l,intl:u,currentUserId:b})),[l,u,e,b]),_=(0,a.useCallback)((()=>P(t)),[t]),k=(0,a.useCallback)((()=>R(i)),[i]),w=(0,r().O$)(t);return d?(0,M.jsx)(A().A,{menuType:f().gu.Modal,whiteBackground:!0,title:q(e.type),left:j(),onClickLeft:k,right:(0,M.jsx)(s().sA,{id:"requestAccessForm.mobileSend.label",defaultMessage:"Send"}),onClickRight:_,children:(0,M.jsx)(S().A,{debugName:"RequestAccessForm",capture:!0,children:(0,M.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"stretch",alignItems:"stretch",width:"100%",height:"100%"},children:(0,M.jsx)(y().A,{request:w,performRequest:C,render:m})})})}):(0,M.jsx)(S().A,{debugName:"RequestAccessForm",capture:!0,children:(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evently",alignItems:"stretch",padding:"20px 28px 24px",width:"340px"},children:[(0,M.jsx)(y().A,{request:w,performRequest:C,render:m}),(0,M.jsx)(x().A,{size:"lg",onClick:k,children:j()})]})})}function F(e){const{type:t,flowId:n,buttonType:i}=e,l=(0,o().v3)(),d="outline"===i?x().A:_().A,[u,m]=(0,a.useState)(!1),[h,f]=(0,a.useState)(!1),v={attributes:{add_permissions_on_approval:!1,role:(0,r().K8)((()=>(0,b().dL)()),[])?"reader":"read_and_write"},message:void 0};let y;"page"===t?y={...v,type:"current-actor-to-block",block:{id:e.block.id,spaceId:e.block.spaceId}}:"collection"===t?y={...v,type:"current-actor-to-collection",collection:{id:e.collection.id,spaceId:e.collection.spaceId}}:(0,c().HB)(t);const S=(0,a.useCallback)((async()=>{var e;const a=await g().callApi({eventName:"requestAccess",environment:l,data:y});"success"===a.type&&a.data.request?(m(!0),p().T_(l,{request_access_type:t,previous_access_level:"none",requested_access_level:"read_and_write",flow_id:n,requestId:a.data.requestId})):"failed"===a.type&&"UserRateLimitResponse"===(null===(e=a.body)||void 0===e?void 0:e.name)&&f(!0)}),[l,y,t,n]);return(0,M.jsx)(d,{size:"lg",disabled:u||h,disabledFeedback:u||h,onClick:S,children:u?(0,M.jsx)(s().sA,{id:"fullPageError.requestAccessButton.edit.Requested",defaultMessage:"Requested access"}):h?(0,M.jsx)(s().sA,{id:"fullPageError.requestAccessButton.edit.TryAgain",defaultMessage:"Try again later"}):q("page"===t?"current-actor-to-block":"current-actor-to-collection")})}function q(e){return"current-actor-to-space-via-block"===e||"current-actor-to-space-via-onboarding"===e?(0,M.jsx)(s().sA,{defaultMessage:"Request membership",id:"requestAccessForm.requestAccessToSpaceButton.title"}):(0,M.jsx)(s().sA,{defaultMessage:"Request access",id:"requestAccessForm.requestAccessButton.title"})}},333618:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});n(296540);var a=()=>n(56366),o=()=>n(807778),r=()=>n(847554),i=()=>n(749240),s=()=>n(484714),l=()=>n(852507),c=()=>n(254017),d=()=>n(959013),u=()=>n(252105),p=()=>n(246826),m=()=>n(317909),g=()=>n(179030),h=()=>n(176983),f=()=>n(351360),v=()=>n(991249),b=()=>n(134217),y=()=>n(714300),S=n(474848);const C=(0,d().YK)({overFreeBlockLimitLong:{id:"subscriptionActions.overFreeBlockLimit.longMessage",defaultMessage:"You are over the block limit for the Free plan"},overFreeBlockLimitMobileNative:{id:"subscriptionActions.overFreeBlockLimit.mobileNative",defaultMessage:"Your free blocks have been used up. Unfortunately, unlimited blocks cannot be purchased on mobile."},upgradeForUnlimited:{id:"subscriptionActions.upgradeForUnlimitedBlocks.longMessage",defaultMessage:"Upgrade for unlimited"},upgradePlan:{id:"subscriptionActions.upgradePlan",defaultMessage:"Upgrade plan"},gracePeriodMessage:{id:"subscriptionActions.gracePeriodMessage",defaultMessage:"You have {dayCount, plural, one {1 day} other {{dayCount} days}} left to upgrade"},overFreeBlockLimitShort:{id:"subscriptionActions.overFreeBlockLimitShort",defaultMessage:"You've used all of this workspace's free blocks"}});function A(){const{isMobileNative:e}=(0,s().Y0)(),t=(0,s().v3)(),n=(0,a().K8)((()=>f().default.state.currentSpaceStore),[]),o=(0,a().O$)(i().subscriptionDataStoreInstance),c=(0,h().J)(),d=(0,r().b)(o);return(0,l().l)((()=>{const e=null==n?void 0:n.pointer.spaceId;if(e&&c){var a;const r=null===(a=n.getSettings())||void 0===a?void 0:a.reach_block_limit_time;!r&&o&&b().V$(t,e,o,d)&&m().createAndCommit({userAction:"OverFreeBlockLimitBanner.initialMount",environment:t,canUndo:!0,perform:e=>{p().zv({store:n,data:{settings:{...n.getSettings(),reach_block_limit_time:Date.now()}},transaction:e})}}),u().ab(t,{reach_block_limit_time:r??Date.now(),eligible_for_trial:!1})}})),e?(0,S.jsx)(_,{}):(0,S.jsx)(x,{})}function x(){const e=(0,d().tz)(),t=(0,a().O$)(i().subscriptionDataStoreInstance),n=(0,r().b)(t),l=(0,s().v3)(),u=(0,a().K8)((()=>(0,o().Km)(n)),[n]),p=(0,a().K8)((()=>{var e;return null===(e=f().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),m=(0,y().l)({spaceId:p}),h=(0,a().K8)((()=>b().GU({billingData:m,spaceStore:f().default.state.currentSpaceStore})),[m]),A=(0,a().K8)((()=>function(e,t){if(!t)return e.formatMessage(C.overFreeBlockLimitLong);const n=(0,o().PK)();return n>0?e.formatMessage(C.gracePeriodMessage,{dayCount:n}):e.formatMessage(C.overFreeBlockLimitShort)}(e,u)),[u,e]),x=(0,a().K8)((()=>function(e){if(!e)return"red";return(0,o().PK)()>0?"yellow":"red"}(u)),[u]),_=[{label:u?e.formatMessage(C.upgradePlan):e.formatMessage(C.upgradeForUnlimited),onClick:()=>{v().K(l,{from:"block_limit_banner",upsell:{type:"product",product:"plus",limit:{type:"none"}}})}}];return(0,S.jsx)(g().l,{label:A,display:"full-width",tint:x,iconGroup:c().V,actions:h?_:[]})}function _(){const e=(0,d().tz)().formatMessage(C.overFreeBlockLimitMobileNative);return(0,S.jsx)(g().l,{label:e,display:"full-width",tint:"red"})}function M(){const e=(0,a().O$)(i().subscriptionDataStoreInstance),t=(0,r().b)(e);return(0,a().K8)((()=>(0,o().Km)(t)),[t])?(0,S.jsx)("div",{style:{position:"sticky",left:0,right:"100%",width:"100%"},children:(0,S.jsx)(A,{})}):(0,S.jsx)(A,{})}},390527:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>B,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>x,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>A,MAX_RECURRENCE_INTERVAL:()=>v,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>b,RRULE_WEEKDAYS_MAP:()=>f,adjustedStartDateIfPossible:()=>M,areRecurrenceSchedulesEqual:()=>V,convertFromUnpersistedRecurrenceConfig:()=>R,convertToUnpersistedRecurrenceConfig:()=>L,getFormattedEndCondition:()=>T,getFormattedNextRecurrenceTime:()=>j,getNewEndTimestamp:()=>D,getNextDateUtc:()=>I,getRecurrenceAfter:()=>k,isRunningBetweenMidnightAnd3AM:()=>w,isValidRecurrenceInterval:()=>y,isValidRecurrenceNumberOfRuns:()=>S,rruleFromRecurrence:()=>C,templateAncestorsViolateRecurrenceNesting:()=>_});n(898992),n(354520),n(581454);var a=()=>n(244641);n(944114);function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(0===n.length)return e.map((e=>[e]));const r=[];for(const i of e)r.push(...o(n[0],...n.slice(1)).map((e=>[i,...e])));return r}var r=()=>n(496603),i=()=>n(534177),s=()=>n(720665),l=()=>n(597777),c=()=>n(869190),d=()=>n(416504),u=()=>n(402390);class p extends(()=>n(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>n(912720);const g=(0,n(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),h={day:p.DAILY,week:p.WEEKLY,month:p.MONTHLY,year:p.YEARLY},f={MO:p.MO,TU:p.TU,WE:p.WE,TH:p.TH,FR:p.FR,SA:p.SA,SU:p.SU},v=99,b=999;function y(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function S(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=b}function C(e){const{start_date:t,frequency:n,interval:a,weekdays:r,timezone:s,hour:c,minute:d}=e,u="week"===n&&r?r.map((e=>f[e])):void 0,m={};return(0,i().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,i().HB)(e.end_condition)),"month"===e.frequency&&(0,i().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=o(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return f[t].nth(n)})):(0,i().HB)(e.monthly_restriction)),new p({freq:h[n],dtstart:(0,l().eU)(t),interval:a,byweekday:u,tzid:s,byhour:c??0,byminute:d??0,bysecond:0,...m})}const A=1,x=1;function _(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),a=e.length,o=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,r=a>A,i=n.length>=x;return{violatesConstraint:r||i,templateNestingExceedsMaxDepth:r,ancestorHasDailyTemplate:i,nestedDepthOfAutomationAncestors:a,immediateAncestorRecurrenceType:o}}function M(e){var t;const{recurrence:n,afterDate:o}=e;if("number"===(null===(t=n.end_condition)||void 0===t?void 0:t.type)||n.start_date>=o)return n;let r=a().c9.fromMillis(n.start_date,{zone:"utc"});const i=a().c9.fromMillis(o,{zone:"utc"});switch(n.frequency){case"year":{const e=Math.floor(i.diff(r,"years").years/n.interval);r=r.plus({years:e*n.interval});break}case"month":{const e=Math.floor(i.diff(r,"months").months/n.interval);r=r.plus({months:e*n.interval});break}case"week":{const e=Math.floor(i.diff(r,"weeks").weeks/n.interval);r=r.plus({weeks:e*n.interval});break}case"day":{const e=Math.floor(i.diff(r,"days").days/n.interval);r=r.plus({days:e*n.interval});break}}return{...n,start_date:(0,l().DH)(r.toMillis())}}function k(e){const{recurrence:t,afterDate:n}=e;if((0,m().wt)(t)){const e=(0,l().l1)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=C(M({recurrence:t,afterDate:n})).after((0,l().eU)(n));if(!e)return;return(0,l().h1)(e)}}function w(e){return 0===e.hour||1===e.hour||2===e.hour}function I(e){return C(e).after((0,l().eU)((0,l().Rz)()))||void 0}function j(e){const{recurrence:t,intl:n}=e,o=I(R(t));if(!o)return;const r=w(t),i=a().c9.fromJSDate(o).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(n)).setZone(t.timezone),s=(0,c().Yq)({date:i,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(r)return n.formatMessage(g.dateBetweenMidnightAnd3AM,{date:s});{let e=i.toLocaleString(a().c9.TIME_SIMPLE);return t.timezone!==(0,d().P)()&&(e+=` ${i.toFormat("ZZZZ")}`),n.formatMessage(g.dateAtTime,{date:s,time:e})}}function T(e,t){return(0,i().O9)(e)?"number"===e.type?t.formatMessage(g.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,c().Yq)({date:a().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,i().HB)(e):t.formatMessage(g.noEndCondition)}const B=100;function L(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,i().HB)(e.end_condition):void 0}}function D(e,t,n){return e.plus(n-t)}function P(e,t){const n=a().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(n.toJSDate())}}function R(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?P(e,e.end_condition):(0,i().HB)(e.end_condition):void 0}}function V(e,t){const n=r().fN(e,(e=>void 0!==e)),a=r().fN(t,(e=>void 0!==e));return r().n4(n,a)}},418830:(e,t,n)=>{n.d(t,{C:()=>o});var a=()=>n(989423);function o(e,t){(0,a().u4)({environment:e,event:{eventName:"click_sharing_signup",eventProperties:t}})}},485894:(e,t,n)=>{n.d(t,{k:()=>o,q:()=>r});var a=()=>n(645873);const o=new(a().O2)("recurrence",(async()=>{const[e,t,{TemplateRecurrenceConfigMenu:a}]=await Promise.all([Promise.all([n.e(23806),n.e(38664),n.e(24587),n.e(4422),n.e(21627),n.e(29021)]).then(n.bind(n,839916)),Promise.all([n.e(23806),n.e(38664),n.e(24587),n.e(4422),n.e(21627),n.e(29021)]).then(n.bind(n,390527)),Promise.all([n.e(23806),n.e(38664),n.e(24587),n.e(4422),n.e(21627),n.e(29021)]).then(n.bind(n,528411))]);return{recurrenceActions:e,recurrenceHelpers:t,TemplateRecurrenceConfigMenu:a}})),r=(0,a().jQ)(o,(e=>e.TemplateRecurrenceConfigMenu))},501497:(e,t,n)=>{n.d(t,{RC:()=>l,S6:()=>c,tD:()=>d});var a=()=>n(56366),o=()=>n(624090),r=()=>n(869190),i=()=>n(604995),s=()=>n(508496);function l(){return s().default.getConfigKey("permanently_delete_tree_queue_task_override","cdrr_enabled_timestamp_override")??o().mu}function c(){return(0,a().K8)((()=>l()),[])}function d(e,t,n){const a=(0,i().AA)(e,t);if((0,i().ak)(a)){const e=a.end.diff(a.start),t=e.as("year");if(t>=1)return(0,r().up)({years:Math.round(t)},n);const o=e.as("days");if(o>=1&&o<=45)return(0,r().up)({days:Math.round(o)},n);const i=e.as("months");if(i>=1)return(0,r().up)({months:Math.round(i)},n);if(o>=1)return(0,r().up)({days:Math.round(o)},n);const s=e.as("hours");if(s>=1)return(0,r().up)({hours:Math.round(s)},n);const l=e.as("minutes");return(0,r().up)({minutes:Math.round(l)},n)}return""}},529803:(e,t,n)=>{n.d(t,{A:()=>o});class a extends(()=>n(757695))().default{}const o=new a},541181:(e,t,n)=>{n.d(t,{n:()=>r});var a=()=>n(645873);const o=new(a().O2)("react-day-picker",(async()=>await Promise.all([n.e(95555),n.e(75831),n.e(68548)]).then(n.bind(n,762290)))),r=(0,a()._h)(o,(e=>e.default))},556048:(e,t,n)=>{n.d(t,{C8:()=>p,Dz:()=>l,GC:()=>g,GL:()=>h,YY:()=>m,dM:()=>d,h9:()=>c,jX:()=>s,oF:()=>u,uj:()=>i});var a=()=>n(645873);const o={JiraSyncInfoPopup:new(a().O2)("JiraSyncInfoPopup",(async()=>await Promise.all([n.e(75134),n.e(68744)]).then(n.bind(n,408453)))),ImproveJiraSyncPopup:new(a().O2)("ImproveJiraSyncPopup",(async()=>await Promise.all([n.e(75134),n.e(2686)]).then(n.bind(n,484967)))),JiraDCAuthModal:new(a().O2)("JiraDCAuthModal",(async()=>await n.e(28763).then(n.bind(n,992567)))),ExternalImportAndSyncIndicator:new(a().O2)("ExternalImportAndSyncIndicator",(async()=>await n.e(98288).then(n.bind(n,984289)))),JiraSyncedAllProjectsTooltip:new(a().O2)("JiraSyncedAllProjectsTooltip",(async()=>await Promise.all([n.e(23806),n.e(21446)]).then(n.bind(n,470020)))),JiraSyncedAllIssuesTooltip:new(a().O2)("JiraSyncedAllIssuesTooltip",(async()=>await Promise.all([n.e(23806),n.e(21446)]).then(n.bind(n,470020)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(a().O2)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await Promise.all([n.e(23806),n.e(21446)]).then(n.bind(n,470020)))),JiraSyncSourceTooltip:new(a().O2)("JiraSyncSourceTooltip",(async()=>await Promise.all([n.e(23806),n.e(21446)]).then(n.bind(n,470020)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(a().O2)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await Promise.all([n.e(23806),n.e(21446)]).then(n.bind(n,470020))))},r={JiraSyncTeamSpaceModal:new(a().O2)("JiraSyncTeamSpaceModal",(async()=>Promise.all([n.e(23806),n.e(56188)]).then(n.bind(n,604698))))},i=(0,a()._h)(r.JiraSyncTeamSpaceModal,(e=>e.default)),s=(0,a()._h)(o.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),l=(0,a()._h)(o.JiraDCAuthModal,(e=>e.default)),c=(0,a()._h)(o.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),d=(0,a()._h)(o.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),u=(0,a()._h)(o.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),p=(0,a()._h)(o.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),m=(0,a()._h)(o.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),g=(0,a()._h)(o.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),h=(0,a()._h)(o.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator));(0,n(340498).xh)("jira",{default:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:20},small:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:16},mini:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:14},large:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:24}})},573351:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(296540),o=n(474848);const r=function(e){let{firstDayOfWeek:t,value:r,selectValue:i=!0,onChange:s,onFocus:l,onBlur:c,disabledDays:d,className:u}=e;const p=(0,a.useMemo)((()=>new Date(r)),[r]),[m,g]=(0,a.useState)(p),h=(0,a.useRef)(r);(0,a.useLayoutEffect)((()=>{h.current!==r&&(g(new Date(r)),h.current=r)}),[r]);const f=(0,a.useCallback)(((e,t,n)=>{s(e.getTime())}),[s]);return(0,o.jsx)("div",{style:{paddingRight:8,paddingBottom:8,paddingLeft:8,paddingTop:4},children:(0,o.jsx)(n(541181).n,{locale:n(662303).locale,className:u??"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:i?{value:p}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:f,onMonthSelected:g,disabled:d,month:m,onDayBlur:c,onDayFocus:l})})}},654777:(e,t,n)=>{n.d(t,{X:()=>o});n(296540);var a=n(474848);const o=(0,n(340498).wt)("externalLink",{viewBox:"0 0 17 16",svg:(0,a.jsx)("path",{d:"M4.94922 13.498C4.31641 13.498 3.83789 13.3359 3.51367 13.0117C3.18945 12.6914 3.02734 12.2188 3.02734 11.5938V4.46289C3.02734 3.83398 3.18945 3.35938 3.51367 3.03906C3.83789 2.71875 4.31641 2.55859 4.94922 2.55859H12.0449C12.6777 2.55859 13.1562 2.71875 13.4805 3.03906C13.8047 3.35938 13.9668 3.83398 13.9668 4.46289V11.5938C13.9668 12.2188 13.8047 12.6914 13.4805 13.0117C13.1562 13.3359 12.6777 13.498 12.0449 13.498H4.94922ZM5.01953 12.3438H11.9746C12.2441 12.3438 12.4512 12.2734 12.5957 12.1328C12.7402 11.9922 12.8125 11.7793 12.8125 11.4941V4.55664C12.8125 4.27539 12.7402 4.06445 12.5957 3.92383C12.4512 3.7832 12.2441 3.71289 11.9746 3.71289H5.01953C4.74609 3.71289 4.53711 3.7832 4.39258 3.92383C4.25195 4.06445 4.18164 4.27539 4.18164 4.55664V11.4941C4.18164 11.7793 4.25195 11.9922 4.39258 12.1328C4.53711 12.2734 4.74609 12.3438 5.01953 12.3438ZM10.334 9.54297C10.1855 9.54297 10.0664 9.49609 9.97656 9.40234C9.89062 9.30859 9.84766 9.17969 9.84766 9.01562V8.08398L9.93555 7.24609L9.15039 8.10156L7.09961 10.1465C6.99023 10.2559 6.85742 10.3105 6.70117 10.3105C6.55273 10.3105 6.42969 10.2637 6.33203 10.1699C6.23828 10.0762 6.19141 9.95117 6.19141 9.79492C6.19141 9.6582 6.24609 9.53516 6.35547 9.42578L8.41211 7.36914L9.2793 6.57227L8.47656 6.66602H7.48633C7.32617 6.66602 7.19727 6.62305 7.09961 6.53711C7.00586 6.45117 6.95898 6.33203 6.95898 6.17969C6.95898 6.03516 7.00586 5.91992 7.09961 5.83398C7.19727 5.74414 7.32422 5.69922 7.48047 5.69922H10.2227C10.4062 5.69922 10.5508 5.74609 10.6562 5.83984C10.7617 5.93359 10.8145 6.08398 10.8145 6.29102V9.00977C10.8145 9.16602 10.7695 9.29492 10.6797 9.39648C10.5938 9.49414 10.4785 9.54297 10.334 9.54297Z"})})},657982:(e,t,n)=>{n.d(t,{Z6:()=>r,rN:()=>i});var a=()=>n(645873);const o={translation:new(a().O2)("translation",(()=>Promise.all([n.e(23806),n.e(3773),n.e(8340)]).then(n.bind(n,136768)))),TranslateBanner:new(a().O2)("TranslateBanner",(async()=>await Promise.all([n.e(23806),n.e(3773)]).then(n.bind(n,151985))))},r=(0,a()._h)(o.translation,(e=>e.TopbarAmbientSuggestTranslateButton)),i=(0,a()._h)(o.TranslateBanner,(e=>e.TranslateBanner))},755023:(e,t,n)=>{n.d(t,{x:()=>i});var a=()=>n(56366),o=()=>n(792071),r=()=>n(179034);function i(e){let{blockStore:t,closestNonAliveAncestorStore:n,intl:i}=e;return(0,a().K8)((()=>{var e;let a,s,l;const c=n&&n.table===r().ev&&n.getMovedToTrashTime();c?(a=!0,l=c,s=n.getMovedToTrashStore()):(l=t.getLastEditedTime(),s=t.getLastEditedByStore(),a=!1);return{trashAuthorStore:s,trashAuthorDisplayName:(null===(e=s)||void 0===e?void 0:e.getDisplayName(i))||i.formatMessage(o().Fvx.messages.anonymousPlaceholder),trashTimestamp:l,isMovedToTrashMetadata:a}}),[t,n,i])}},885791:(e,t,n)=>{n.d(t,{h:()=>o});n(296540);var a=n(474848);const o=(0,n(340498).wt)("trashSmall",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M5.31055 14.3398C4.85742 14.3398 4.49414 14.2129 4.2207 13.959C3.95117 13.7051 3.80664 13.3516 3.78711 12.8984L3.38867 4.45508H2.74414C2.59961 4.45508 2.47656 4.4043 2.375 4.30273C2.27344 4.20117 2.22266 4.07812 2.22266 3.93359C2.22266 3.79297 2.27344 3.67383 2.375 3.57617C2.47656 3.47461 2.59961 3.42383 2.74414 3.42383H13.2617C13.4062 3.42383 13.5273 3.47266 13.625 3.57031C13.7266 3.66797 13.7773 3.78906 13.7773 3.93359C13.7773 4.07812 13.7266 4.20117 13.625 4.30273C13.5273 4.4043 13.4062 4.45508 13.2617 4.45508H12.6172L12.2188 12.8926C12.1992 13.3457 12.0527 13.6992 11.7793 13.9531C11.5059 14.2109 11.1445 14.3398 10.6953 14.3398H5.31055ZM5.42773 13.3027H10.5723C10.7363 13.3027 10.8711 13.248 10.9766 13.1387C11.082 13.0332 11.1387 12.8926 11.1465 12.7168L11.5273 4.45508H4.45508L4.85352 12.7168C4.86133 12.8887 4.91797 13.0293 5.02344 13.1387C5.12891 13.248 5.26367 13.3027 5.42773 13.3027ZM6.27734 12.3535C6.15625 12.3535 6.05859 12.3203 5.98438 12.2539C5.91016 12.1836 5.87109 12.0898 5.86719 11.9727L5.69141 5.83203C5.6875 5.71875 5.72266 5.62695 5.79688 5.55664C5.87109 5.48242 5.96875 5.44531 6.08984 5.44531C6.21094 5.44531 6.30859 5.48047 6.38281 5.55078C6.45703 5.62109 6.49414 5.71289 6.49414 5.82617L6.67578 11.9668C6.67578 12.084 6.63867 12.1777 6.56445 12.248C6.49414 12.3184 6.39844 12.3535 6.27734 12.3535ZM8 12.3535C7.87891 12.3535 7.7793 12.3184 7.70117 12.248C7.62695 12.1777 7.58984 12.0859 7.58984 11.9727V5.83203C7.58984 5.71875 7.62695 5.62695 7.70117 5.55664C7.7793 5.48242 7.87891 5.44531 8 5.44531C8.125 5.44531 8.22461 5.48242 8.29883 5.55664C8.37695 5.62695 8.41602 5.71875 8.41602 5.83203V11.9727C8.41602 12.0859 8.37695 12.1777 8.29883 12.248C8.22461 12.3184 8.125 12.3535 8 12.3535ZM9.72852 12.3535C9.60352 12.3535 9.50391 12.3184 9.42969 12.248C9.35938 12.1777 9.32617 12.084 9.33008 11.9668L9.50586 5.83203C9.50977 5.71484 9.54883 5.62109 9.62305 5.55078C9.69727 5.48047 9.79297 5.44531 9.91016 5.44531C10.0352 5.44531 10.1328 5.48242 10.2031 5.55664C10.2773 5.62695 10.3125 5.71875 10.3086 5.83203L10.1328 11.9727C10.1289 12.0898 10.0898 12.1836 10.0156 12.2539C9.94141 12.3203 9.8457 12.3535 9.72852 12.3535ZM5.33984 3.81055V2.54492C5.33984 2.0957 5.47461 1.74609 5.74414 1.49609C6.01758 1.24219 6.39648 1.11523 6.88086 1.11523H9.10742C9.5918 1.11523 9.9707 1.24219 10.2441 1.49609C10.5176 1.74609 10.6543 2.0957 10.6543 2.54492V3.81055H9.57031V2.59766C9.57031 2.44922 9.52148 2.33008 9.42383 2.24023C9.32617 2.14648 9.19531 2.09961 9.03125 2.09961H6.95703C6.79688 2.09961 6.66797 2.14648 6.57031 2.24023C6.47266 2.33008 6.42383 2.44922 6.42383 2.59766V3.81055H5.33984Z"})})},893627:(e,t,n)=>{n.d(t,{K:()=>i});var a=n.n(n(440537)),o=()=>n(132456),r=()=>n(206267);class i{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=n(851941).Yf[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e){const{enableTestDateOffset:t,enableIdSchema:a}=this.getSettings();return a&&e!==n(867178).wI?(this.idCreatorLogger(void 0,e,t?"id_schema_test":"id_schema"),(0,o().J4)(t,this.mainShortId,e,this.isServerOriginated)):this.legacyId(e,"disabled")}pointerInMain(e){return{table:e,id:this.idInMain(e)}}async idWithSpaceId(e,t){const{enableTestDateOffset:n,enableIdSchema:r}=this.getSettings();if(!r||"space"===t)return this.legacyId(t,"disabled");const i=this.mapSpaceIdToShortId(e),s=a().types.isPromise(i)?await i:i;return s?(this.idCreatorLogger(e,t,n?"id_schema_test":"id_schema"),(0,o().kw)(n,s,t,this.isServerOriginated)):this.legacyId(t,"missing_short_id")}async pointerWithSpaceId(e,t){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t)}}idWithSpaceShortId(e,t){const{enableTestDateOffset:n,enableIdSchema:a}=this.getSettings();return a&&"space"!==t?(this.idCreatorLogger(void 0,t,n?"id_schema_test":"id_schema"),(0,o().kw)(n,e,t,this.isServerOriginated)):this.legacyId(t,"disabled")}legacyId(e,t){return this.idCreatorLogger(void 0,e,t),r().JW()}async deterministicIdWithSpaceId(e,t,n){const{enableTestDateOffset:i,enableIdSchema:s}=this.getSettings();if(!s)return this.idCreatorLogger(e,t,"disabled"),r().gB(n);const l=this.mapSpaceIdToShortId(e),c=a().types.isPromise(l)?await l:l;return c?(this.idCreatorLogger(e,t,i?"id_schema_test":"id_schema"),(0,o().lf)(c,t,n)):(this.idCreatorLogger(e,t,"missing_short_id"),r().gB(n))}deterministicIdWithSpaceShortId(e,t,n){const{enableTestDateOffset:a,enableIdSchema:i}=this.getSettings();return i?(this.idCreatorLogger(void 0,t,a?"id_schema_test":"id_schema"),(0,o().lf)(e,t,n)):(this.idCreatorLogger(void 0,t,"disabled"),r().gB(n))}async getSpaceIdCreator(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),o=a().types.isPromise(n)?await n:n;return this.getSpaceShortIdCreator(e,o)}getSpaceIdCreatorSync(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),o=a().types.isPromise(n)?void 0:n;return this.getSpaceShortIdCreator(e,o)}getSpaceShortIdCreator(e,t){const{enableIdSchema:n}=this.getSettings();return n&&t?new l(e,this,t):new s(e,this.idCreatorLogger)}async getSpaceIdCreatorFromModel(e){return e.getShortIdStr()?this.getSpaceShortIdCreator(e.id,Number(e.getShortIdStr())):await this.getSpaceIdCreator(e.id)}}class s{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e){return this.idCreatorLogger(void 0,e,"disabled"),r().JW()}idInMain(e){return this.idCreatorLogger(void 0,e,"disabled"),r().JW()}deterministicIdInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled"),r().gB(t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class l{constructor(e,t,n){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=n}idInSavedSpace(e){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e)}idInMain(e){return this.idCreator.idInMain(e)}deterministicIdInSavedSpace(e,t){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}},898125:(e,t,n)=>{n.d(t,{HJ:()=>I,WA:()=>k,be:()=>w,bx:()=>B,kU:()=>_,lT:()=>T,lg:()=>M,nO:()=>x,vH:()=>j});n(16280),n(944114);var a=()=>n(890409),o=()=>n(735384),r=()=>n(206267),i=()=>n(912720),s=()=>n(973647),l=()=>n(534177),c=()=>n(901389),d=()=>n(246826),u=()=>n(317909),p=()=>n(324587),m=()=>n(546461),g=()=>n(301782),h=()=>n(989423),f=()=>n(909470),v=()=>n(698331),b=()=>n(594794),y=()=>n(972435),S=()=>n(508496),C=()=>n(630116);const A=(0,n(959013).YK)({automationDeleteConfirmationMessage:{id:"slackAutomations.remove.confirmation.message",defaultMessage:"Delete {automationName}?"},automationDeleteAcceptLabel:{id:"slackAutomations.remove.confirmation.acceptLabel",defaultMessage:"Delete"},confirmDiscardChangesMessage:{id:"automations.confirmDiscardChanges.message",defaultMessage:"Discard unsaved changes to this automation?"},confirmDiscardChangesAccept:{defaultMessage:"Discard",id:"automations.confirmDiscardChanges.acceptLabel"},confirmDiscardOptionalFieldChangesMessage:{id:"automations.confirmDiscardToggleFieldChangesMessage.message",defaultMessage:"{hasName, select, true {Discard {fieldName} field?} other {Discard field?}}"}});function x(e){const{automationStore:t,collectionStore:n,environment:o,intl:c,from:v,builderType:b}=e;u().createAndCommit({environment:o,userAction:"collectionSettingsAutomationsActions.createDatabaseAutomation",canUndo:!0,perform:e=>{u().applyOperation({store:n,operation:{pointer:n.pointer,path:["format","automation_ids"],command:"listAfter",args:{id:t.id}},transaction:e});const a=C().dn.createChildStore(n,t.pointer),s=t.getActionStores();for(const t of s){const n=t.getType();n&&p().addAutomationAction({actionId:t.id,actionType:n,automationStore:a,config:t.getConfig(),environment:o,intl:c,transaction:e})}let m;const g=t.getTrigger();(0,l().O9)(g)&&"event"!==g.type?"recurrence"===g.type?m={id:r().JW(),type:"recurrence",recurrence:g.recurrence}:(0,l().HB)(g):m={id:r().JW(),type:"event",event:(null==g?void 0:g.event)??{pagesAdded:!1,pagePropertiesEdited:{type:"none"},source:{pointer:n.getSpaceShardedPointer(),type:"collection"}}},d().eC({environment:o,inMemoryRecordCache:n.inMemoryRecordCache,table:i().yB,transaction:e,value:{action_ids:t.getActionIds(),alive:!0,id:t.id,parent_id:n.id,parent_table:n.table,properties:{name:t.getName()},space_id:n.getSpaceId(),status:"active",trigger:m}})}});const y=t.getModel();if((0,l().O9)(y)){const e=(0,m().To)(t);let n=[];e&&s().Q.isSuccess(e)&&(n=e.value.valueTypes),(0,g().CM)(((e,r,i)=>{const s=(0,h().ik)(o),l=a().sp({automationModel:y,builderType:b,formulaAnalyticsModule:r,formulasModule:e,formulaTypecheckContextValues:n,getRecordModel:t.getRecordModel,featureGates:(0,f().i)(),simpleFormulasModule:i}),c=v?{feature:{id:l.automation_id,from:v,type:"automation"}}:{};a().Dk(s,{...l,...c}),S().default.logEvent("automation_create")}))}}function _(e){const{automationStore:t,collectionStore:n,environment:o,builderType:r,source:i}=e;u().createAndCommit({environment:o,userAction:"collectionSettingsAutomationsActions.saveDatabaseAutomation",canUndo:!0,perform:e=>{const a=C().dn.createChildStore(n,t.pointer),o=t.getName(),r=a.getKeyStore("properties");d().zv({store:r,data:{name:o},transaction:e}),t.getStatus()!==a.getStatus()&&d().zv({store:a,data:{status:t.getStatus()},transaction:e});const i=t.getActionStores();if((0,v().$X)(a)&&(0,v().$X)(t))if(t.isTriggerType("event"))a.isTriggerType("event")||d().zv({store:a.getTriggerStore(),data:{type:"event"},transaction:e}),a.verifyTriggerType("event"),d().zv({store:a.getTriggerStore().getKeyStore("event"),data:t.getTriggerStore().getKeyStore("event").getValue(),transaction:e});else{if(!t.isTriggerType("recurrence"))throw new Error("Unexpected trigger type for automationStore");a.isTriggerType("recurrence")||d().zv({store:a.getTriggerStore(),data:{type:"recurrence"},transaction:e}),a.verifyTriggerType("recurrence"),d().zv({store:a.getTriggerStore().getKeyStore("recurrence"),data:t.getTriggerStore().getKeyStore("recurrence").getValue(),transaction:e})}const s=[];for(const t of i){const n=t.getModel();if(!n)continue;const o=C().bx.createChildStore(a,t.pointer);d().KY({store:o,value:{alive:!0,config:n.getConfig(),id:n.id,parent_id:a.id,parent_table:a.table,space_id:a.getSpaceId(),type:n.type},transaction:e}),s.push(t.id)}d().zv({store:a,data:{action_ids:s},transaction:e})}});const c=t.getModel();(0,l().O9)(c)&&(0,g().CM)(((e,n,l)=>{const d=(0,m().To)(t);let u=[];d&&s().Q.isSuccess(d)&&(u=d.value.valueTypes);const p=(0,h().ik)(o),g=a().sp({automationModel:c,builderType:r,formulaAnalyticsModule:n,formulasModule:e,formulaTypecheckContextValues:u,getRecordModel:t.getRecordModel,featureGates:(0,f().i)(),simpleFormulasModule:l,source:i});a().SF(p,g),S().default.logEvent("automation_update")}))}async function M(e){const{intl:t,environment:n,collectionStore:a,existingAutomationStore:o,onDelete:r}=e,i=o.getNameWithDefault(t);(await c().Gh({message:t.formatMessage(A.automationDeleteConfirmationMessage,{automationName:i}),acceptLabel:t.formatMessage(A.automationDeleteAcceptLabel)})).accept&&(!function(e){const{environment:t,collectionStore:n,existingAutomationStore:a}=e;u().createAndCommit({environment:t,userAction:"collectionSettingsAutomationsActions.deleteAutomation",canUndo:!0,perform:e=>{const o=n.getFormatStore().getKeyStore("automation_ids"),r=C().dn.createChildStore(n,a.pointer);u().applyOperation({store:o,operation:{pointer:o.pointer,path:o.path,command:"listRemove",args:{id:r.id}},transaction:e}),p().deleteAutomation({automationStore:r,environment:t,transaction:e})}})}({environment:n,collectionStore:a,existingAutomationStore:o}),null==r||r())}function k(e){const{automationStore:t,environment:n}=e;u().createAndCommit({environment:n,userAction:"collectionSettingsAutomationsActions.disableAutomation",canUndo:!0,perform:e=>{p().disableAutomation({automationStore:t,environment:n,transaction:e})}})}function w(e){const{automationStore:t,collectionStore:n,environment:a}=e;u().createAndCommit({canUndo:!0,environment:a,userAction:"collectionSettingsAutomationsActions.restartAutomation",perform:e=>{const a=C().dn.createChildStore(n,t.pointer);p().restartAutomation({automationStore:a,transaction:e})}})}function I(e){const{automationStore:t,environment:n}=e;u().createAndCommit({environment:n,userAction:"collectionSettingsAutomationsActions.enableAutomation",canUndo:!0,perform:e=>{p().enableAutomation({automationStore:t,environment:n,transaction:e})}})}function j(e){const{automationStore:t,collectionStore:n,environment:a}=e,o=n.getFormatStore().getKeyStore("automation_ids"),r=(0,b().Z1)({environment:a,table:i().yB,spaceId:t.getSpaceId()});u().createAndCommit({environment:a,userAction:"",canUndo:!0,perform:e=>{p().duplicateAutomation({environment:a,sourceAutomationStore:t,targetAutomationId:r,transaction:e}),u().applyOperation({store:o,operation:{pointer:o.pointer,path:o.path,command:"listAfter",args:{id:r}},transaction:e})}})}async function T(e){const{hasPendingChanges:t}=e;if(!t)return!0;return(await c().Gh({acceptLabel:y().A.formatMessage(A.confirmDiscardChangesAccept),message:y().A.formatMessage(A.confirmDiscardChangesMessage),icon:(0,o().I)({height:24,width:24})})).accept}async function B(e){const{fieldName:t}=e;return(await c().Gh({acceptLabel:y().A.formatMessage(A.confirmDiscardChangesAccept),message:y().A.formatMessage(A.confirmDiscardOptionalFieldChangesMessage,{fieldName:t,hasName:Boolean(t)}),icon:(0,o().I)({height:24,width:24})})).accept}},915132:(e,t,n)=>{n.r(t),n.d(t,{BannersRenderer:()=>Yt});n(581454);var a=n(296540),o=()=>n(484714),r=()=>n(56366),i=()=>n(534177),s=()=>n(502626),l=()=>n(932737),c=()=>n(644914),d=()=>n(258398),u=()=>n(333618),p=()=>n(807778),m=()=>n(426433),g=()=>n(847554),h=()=>n(696751),f=()=>n(966689),v=()=>n(883894),b=()=>n(749240),y=()=>n(657982),S=()=>n(869190),C=()=>n(85562),A=()=>n(901389),x=()=>n(496414),_=()=>n(435009),M=()=>n(587124),k=()=>n(135552),w=()=>n(351360),I=()=>n(179030),j=n(474848);const T=function(e){var t;const{legacyColor:i}=e,s=(0,o().v3)(),l=(0,r().K8)((()=>w().default.state.currentUserStore),[]),c=(0,r().K8)((()=>null==l?void 0:l.getEmail()),[l]),d="makenotion.com"===(0,n(842599).zN)(c??""),[u,p]=a.useState("");a.useEffect((()=>{!async function(){try{const e=await(0,n(529543).getCookie)(s,"notion_ghost_preferred_role");p((t=>e??""))}catch(e){console.error(e)}}()}));const m="full"===u?"restricted":"full",g=a.useCallback((async()=>{if(!c)return null;const e=await C().P(s,{email:c,intercomLink:"switch role",preferredLoginRole:m});if("failed"===e.type)x().V(),A().Qg(e);else{const{userId:t}=e.data,a=`Success! click "Continue" to enter account for "${c}" in ${M().v[m].text} mode.`,o=e.data.expiryTime?`${a} The user has granted access until ${(0,S().W_)(e.data.expiryTime,"medium_with_time",n(402390).q)}.`:a;x().V(),A().ui({message:o,showCancel:!1,keepFocus:!0,items:[{label:"Continue",color:"blue",onAccept:()=>{n(115261).N({userId:t,environment:s})}}]})}}),[s,c,m]);if(!c)return null;const h=(0,j.jsxs)(j.Fragment,{children:[`You are currently logged in as ${c}`,(0,j.jsx)("i",{children:u&&d?` (${null===(t=M().v[u])||void 0===t?void 0:t.text} access)`:""}),"."]});let f=[{label:"Back to Admin Console",onClick:()=>{_().oo({environment:s,url:"/__admin"})}},{label:"Logout as user",onClick:()=>{C().A(s)}}];return u&&d&&(f=[{label:`Switch to ${M().v[m].text} mode`,onClick:()=>g()},...f]),(0,j.jsx)(I().l,{label:h,display:"full-width",actions:f,tint:(0,k().V)(i)})};n(944114);var B=()=>n(401497),L=()=>n(584262),D=()=>n(921940),P=()=>n(959013),R=()=>n(284371),V=()=>n(780054);const N=(0,P().YK)({viewTutorial:{id:"pageViewBlock.asanaImporterBanner.tutorialPage",defaultMessage:"View tutorial"},dismissAriaLabel:{id:"ageViewBlock.asanaImporterBanner.dismiss.ariaLabel",defaultMessage:"Dismiss"}});const F=function(e){let{blockStore:t,legacyColor:i}=e;const{tutorial_page:s,number_of_projects:l}=(0,r().K8)((()=>{var e,n;return{tutorial_page:null===(e=t.getFormat())||void 0===e?void 0:e.asana_importer_tutorial_page,number_of_projects:(null===(n=t.getFormat())||void 0===n?void 0:n.asana_importer_number_of_projects)??0}}),[t]),c=(0,o().v3)(),d=((0,B().IS)((e=>({helpCenterButtonStyles:{display:"flex",alignItems:"baseline",justifyContent:"center",alignContent:"center",fontSize:R().J.UIRegular.desktop,padding:"6px, 0px, 0px, 0px",borderRadius:4,color:e.mediumTextColor,marginTop:5,width:298,height:28,gap:"4px",lineHeight:"18px"},externalLinkIcon:{width:16,height:16,padding:"0.5px, 0px, 0px, 0px"},helpCenterButtonTextStyles:{width:238,height:18,font:"SF Pro",fontWeight:R().Wy.medium,fontSize:R().J.UIRegular.desktop,color:e.accentColors.uiBlue[600]}})),[]),(0,a.useCallback)((()=>{_().oo({url:(0,D().A)({pageId:s,pageModel:(0,n(183210).Rr)({table:n(179034).ev,id:s}),baseUrl:V().A.domainBaseUrl,pageVisitSource:L().y8.Import}),environment:c})}),[c,s])),u=(0,a.useCallback)((()=>{n(317909).createAndCommit({environment:c,userAction:"userSettingsActions.setDismissedAsanaImporterBanner",canUndo:!0,perform:e=>{n(246826).zv({store:t.getFormatStore(),transaction:e,data:{dismissed_asana_import_banner:!0}})}})}),[t,c]),p=[];s&&p.push({label:(0,j.jsx)(P().sA,{...N.viewTutorial}),onClick:()=>d()}),p.push({label:(0,j.jsx)(P().sA,{id:"pageViewBlock.asanaImporterBanner.dismiss",defaultMessage:"Dismiss"}),onClick:u});const m=(0,a.useMemo)((()=>(0,j.jsx)(P().sA,{id:"pageViewBlock.asanaImporterBanner.tutorial",defaultMessage:"Imported {number_of_projects} Asana {project_or_projects} to Notion",values:{number_of_projects:l,project_or_projects:1===l?"project":"projects"}})),[l]);return(0,j.jsx)(I().l,{label:m,display:"full-width",actions:p,tint:(0,k().V)(i)})};var q=()=>n(30626),E=()=>n(253093),U=()=>n(885791),O=()=>n(112452),K=()=>n(209660),z=()=>n(345913),W=()=>n(96689),H=()=>n(100622),J=()=>n(492414),Y=()=>n(630116),Z=()=>n(296798),$=()=>n(614505),G=()=>n(16006);function X(e){const{urlStore:t,titleStore:n}=e,a=(0,o().Y0)(),i=n||t,{icon:s,url:l}=(0,r().K8)((()=>({icon:i.getIcon(),url:(0,J().Ay)({store:t,fullyQualified:!1,pageVisitSource:L().y8.Move})})),[i,t]);return(0,j.jsxs)(Z().A,{href:l,style:{display:"inline-flex"},innerStyle:{display:"inline-flex",alignItems:"baseline"},children:[(0,j.jsx)($().A,{disabled:!0,icon:s,isEmptyPage:!1,size:a.isMobile?18:16,emojiSize:a.isMobile?24:20,style:{marginRight:"0.2em",fill:""},pageIconStyle:{fill:H().Ay.white}}),(0,j.jsx)(G().A,{store:i,style:{fontWeight:R().Wy.medium}})]})}function Q(e){let{movedSourceBlockStore:t,moveTarget:n}=e;return a.useMemo((()=>(0,j.jsx)(X,{urlStore:Y().Bv.createChildStore(t,n.moved_to),titleStore:Y().SL.createChildStore(t,{table:W().NX,id:n.moved_to.spaceId})})),[t,n])}function ee(e){let{movedSourceBlockStore:t,moveTarget:n}=e;const a=Q({movedSourceBlockStore:t,moveTarget:n});return(0,j.jsx)(P().sA,{defaultMessage:"Moved to {targetSpaceLink}.",id:"pageViewBlock.movedPageBanner.pageMovedMessage",values:{targetSpaceLink:a}})}function te(e){let{movedSourceBlockStore:t,moveTarget:n}=e;const a=Q({movedSourceBlockStore:t,moveTarget:n});return(0,j.jsx)(P().sA,{defaultMessage:"{movedAncestorLink} was moved to {targetSpaceLink}.",id:"pageViewBlock.movedPageBanner.ancestorMovedMessage",values:{targetSpaceLink:a,movedAncestorLink:(0,j.jsx)(X,{urlStore:t})}})}var ne=()=>n(722872),ae=()=>n(58293),oe=()=>n(962730),re=()=>n(463830),ie=()=>n(597898),se=()=>n(682539),le=()=>n(760217),ce=()=>n(406699),de=()=>n(285790),ue=()=>n(928600),pe=()=>n(939740),me=()=>n(14235),ge=()=>n(89924),he=()=>n(662303),fe=()=>n(624090),ve=()=>n(416504),be=()=>n(563884),ye=()=>n(287882),Se=()=>n(501497),Ce=()=>n(907514),Ae=()=>n(891078),xe=()=>n(755023),_e=()=>n(659799);function Me(e){const{blockStore:t,intl:n}=e,a=(0,ae().r)(),o=(0,Ae().ME)(t),{trashAuthorDisplayName:i,trashTimestamp:s,isMovedToTrashMetadata:l}=(0,xe().x)({blockStore:t,closestNonAliveAncestorStore:o,intl:n}),c=(0,r().K8)((()=>(0,fe().XX)(null==a?void 0:a.getModel())),[a]),d=(0,r().K8)((()=>{const e=(0,Se().RC)();return(0,fe().vw)({movedToTrashTime:l?s:void 0,deleteFromTrashDelayMs:c,cdrrDeletionEnabledTimestamp:e})}),[l,s,c]);if(d<=Date.now()){const e=(0,ye().rN)(c/1e3,n);return(0,j.jsx)(P().sA,{defaultMessage:"This page will be deleted soon since it was moved to the Trash over {retentionWindowCopy} ago",id:"pageViewBlock.trashBanner.message.pendingDeletion",values:{retentionWindowCopy:e}})}const u=(0,Ce().nl)(s,{roundDownYears:!0,useWeeks:!0,useLowercase:!0}),p=(0,S().W_)(s,"medium_with_time",he().locale),m=(0,Se().tD)({type:"daterange",start_date:(0,S().aD)(Date.now()),end_date:(0,S().aD)(d)},(0,ve().P)(),n);return l?(0,j.jsx)(P().sA,{defaultMessage:"{trashAuthorDisplayName} moved this page to Trash {movedToTrashDateComponent}. It will automatically be deleted in {numDaysLeftInTrashComponent}.",id:"pageViewBlock.trashBanner.message.trashMetadata",values:{trashAuthorDisplayName:i,movedToTrashDateComponent:(0,j.jsx)(_e().A,{text:u,tooltipText:p,icon:be().k}),numDaysLeftInTrashComponent:(0,j.jsx)(_e().A,{text:m,tooltipText:(0,S().aD)(d),icon:be().k})}}):(0,j.jsx)(P().sA,{defaultMessage:"{trashAuthorDisplayName} last edited this page {lastEditedDateComponent}. It will automatically be deleted in {numDaysLeftInTrashComponent}.",id:"pageViewBlock.trashBanner.message.lastEdited",values:{trashAuthorDisplayName:i,lastEditedDateComponent:(0,j.jsx)(_e().A,{text:u,tooltipText:p,icon:be().k}),numDaysLeftInTrashComponent:(0,j.jsx)(_e().A,{text:m,tooltipText:(0,S().aD)(d),icon:be().k})}})}function ke(e){var t;let{spaceStore:n,blockStore:a,sourceBlock:i}=e;const s=(0,o().v3)(),l=null===(t=s.currentUser)||void 0===t?void 0:t.id,c=(0,o().Y0)(),d=(0,r().K8)((()=>Te(s,a,n,l)),[s,a,n,l]),u=(0,B().IS)((()=>({banner:{display:"flex",alignItems:"center",justifyContent:"center",...c.isMobile&&{flexWrap:"wrap",paddingTop:8,paddingBottom:8}},button:{...c.isMobile&&{marginTop:8}}})),[c.isMobile]),{message:p,restoreVariant:m}=(0,r().K8)((()=>{const{store:e,moved:t}=i,n=e.id===a.id;return{message:n?(0,j.jsx)(ee,{movedSourceBlockStore:e,moveTarget:t}):(0,j.jsx)(te,{movedSourceBlockStore:e,moveTarget:t}),restoreVariant:n?"lastVersion":"currentPage"}}),[a.id,i]);return(0,j.jsxs)("div",{style:u.banner,children:[(0,j.jsx)("div",{children:p}),d&&(0,j.jsx)("div",{style:u.button,children:(0,j.jsx)(je,{variant:m,blockStore:a})})]})}function we(e){var t;const n=(0,P().tz)(),a=(0,o().v3)(),{spaceStore:i}=e,s=(0,r().uB)(void 0,re().A),l=(0,B().IS)((()=>({popupMenu:{},iconContainer:{marginLeft:12},dotsIcon:{fill:"currentColor"},itemIcon:{height:18,width:18,fill:"currentColor"}})),[]),c=(0,ie().P9)({name:"configurable_deletion_and_retention_settings",spaceId:null==i?void 0:i.id,userId:null===(t=a.currentUser)||void 0===t?void 0:t.id});if(!(0,r().K8)((()=>(null==i?void 0:i.canAdmin())&&c),[i,c]))return null;const d=[{key:"open-settings",render:e=>(0,j.jsx)(le().A,{...e,icon:(0,E().j)(l.itemIcon),title:(0,j.jsx)(P().sA,{id:"pageViewBlock.trashBanner.workspaceOwnerActions.openRetentionSettings.title",defaultMessage:"Deletion and retention settings"}),caption:(0,j.jsx)(P().sA,{id:"pageViewBlock.trashBanner.workspaceOwnerActions.openRetentionSettings.caption",defaultMessage:"Only workspace owners can change this"})}),action:()=>{K().Ow({currentTab:"security",subtab:"data_retention"})}}],u={key:"actions",render:e=>(0,j.jsx)(ge().A,{...e}),items:d};return(0,j.jsx)(ce().Ay,{popupType:me().nl.Popup,alignmentToOrigin:oe().C.Center,placementToOrigin:oe().W.Bottom,style:l.popupMenu,render:()=>(0,j.jsx)(ue().A,{menuType:ne().gu.Popup,children:(0,j.jsx)(pe().Ay,{type:pe().Oh.Vertical,initialFocus:void 0,sections:[u]})}),buttonPopupStore:s,renderOrigin:e=>(0,j.jsx)(de().A,{style:l.iconContainer,iconStyle:l.dotsIcon,ariaLabel:n.formatMessage({id:"restoreDeleteBannerMenu.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:q()._,...e})})}function Ie(e){let{blockStore:t}=e;const n=(0,o().v3)(),i=(0,a.useCallback)((()=>{z().Ne({environment:n,blocks:[t],from:"trash_banner"})}),[n,t]),s=(0,r().K8)((()=>!t.useCrdt()),[t]),l=Be();return(0,j.jsxs)(a.Fragment,{children:[(0,j.jsx)(je,{variant:"default",blockStore:t}),s&&(0,j.jsx)(se().A,{style:l.button,onClick:i,icon:(0,U().h)(l.icon),children:(0,j.jsx)(P().sA,{defaultMessage:"Delete from Trash",id:"pageViewBlock.trashBanner.deleteFromTrashButton.label"})})]})}function je(e){let{variant:t,blockStore:n}=e;const i=(0,o().v3)(),s=(0,r().K8)((()=>({default:(0,j.jsx)(P().sA,{defaultMessage:"Restore page",id:"pageViewBlock.trashBanner.restoreButton.label"}),lastVersion:(0,j.jsx)(P().sA,{defaultMessage:"Restore last version",id:"pageViewBlock.trashBanner.restoreLastVersionButton.label"}),currentPage:(0,j.jsx)(P().sA,{defaultMessage:"Restore current page",id:"pageViewBlock.trashBanner.restoreCurrentPageButton.label"})}[t])),[t]),l=(0,a.useCallback)((()=>{const{currentSpaceStore:e}=w().default.state;e&&z().iN({environment:i,block:n,spaceId:n.pointer.spaceId||e.id,from:"trash_banner"})}),[n,i]),c=Be();return(0,j.jsx)(se().A,{style:c.button,onClick:l,icon:(0,O()._)(c.icon),children:s})}function Te(e,t,n,a){const o=(0,ie().zD)(e,{name:"configurable_deletion_and_retention_settings",spaceId:null==n?void 0:n.id,userId:a});if(null!=n&&n.canAdmin()&&o)return!0;if(!t.canEdit())return!1;if(!t.isNavigableBlock())return!1;const r=t.getParentStore();return!r||r.canEdit()}function Be(){return(0,B().IS)((e=>({button:{marginLeft:12},icon:{width:14,height:14,marginRight:6}})),[])}const Le=function(e){var t;let{blockStore:n}=e;const i=(0,o().v3)(),s=null===(t=i.currentUser)||void 0===t?void 0:t.id,l=(0,o().Y0)(),c=(0,P().tz)(),d=(0,B().IS)((()=>({banner:{display:"flex",alignItems:"center",justifyContent:"center",overflow:"visible",whiteSpace:"normal",padding:"8px 4px",...l.isMobile&&{flexWrap:"wrap",width:"100%",paddingTop:8,paddingBottom:8}},helpButton:{marginLeft:4},helpIcon:{fill:"inherit"}})),[l.isMobile]),u=(0,ae().r)(),p=(0,r().K8)((()=>Te(i,n,u,s)),[i,n,u,s]),m=(0,r().K8)((()=>l.isPhone&&p),[l.isPhone,p]),g=(0,r().K8)((()=>n.getClosestMovedBlock()),[n]),h=(0,j.jsx)("span",{children:(0,j.jsx)(Me,{blockStore:n,intl:c})}),f=(0,j.jsx)(P().sA,{defaultMessage:"This page was PERMANENTLY deleted.",id:"pageViewBlock.permanentlyDeleted.message"}),v=(0,r().K8)((()=>V().A.isAdminMode&&n.pathHasDeletedPermission()),[n]);return g?(0,j.jsx)(ke,{spaceStore:u,blockStore:n,sourceBlock:g}):m?(0,j.jsx)("div",{style:d.banner,children:(0,j.jsx)(Ie,{blockStore:n})}):v?(0,j.jsxs)("div",{children:[f,(0,j.jsx)(je,{variant:"default",blockStore:n})]}):p?(0,j.jsxs)(a.Fragment,{children:[(0,j.jsx)("div",{style:d.banner,children:h}),(0,j.jsx)(Ie,{blockStore:n}),(0,j.jsx)(we,{spaceStore:u})]}):(0,j.jsx)("div",{style:d.banner,children:h})};var De=()=>n(340498);const Pe=(0,De().xh)("wifiExclamationMark",{default:{loader:()=>n.e(53463).then(n.bind(n,653463))},small:{loader:()=>n.e(36425).then(n.bind(n,936425))},mini:{loader:()=>n.e(58391).then(n.bind(n,258391))},large:{loader:()=>n.e(82237).then(n.bind(n,782237))}});const Re=function(e){const{legacyColor:t}=e;return(0,j.jsx)(I().l,{label:(0,j.jsx)(P().sA,{id:"dictationConnectionBanner.message",defaultMessage:"We can't reach our dictation server right now. Please check your connection"}),display:"full-width",actions:[],tint:(0,k().V)(t),iconGroup:Pe})};var Ve=()=>n(857783),Ne=()=>n(696746),Fe=()=>n(184966),qe=()=>n(732800),Ee=()=>n(478146),Ue=()=>n(659915),Oe=()=>n(661945),Ke=()=>n(952412);function ze(e){const{legacyColor:t,blockStore:n}=e,i=(0,o().v3)(),s=(0,r().K8)((()=>Ke().u.getState().setComposerStyle),[]),l=(0,a.useCallback)((()=>{const e=Ne().XH("main");e&&e.load().then((()=>{e.canRead()&&Ve().uK({environment:i,store:e,pageVisitSource:L().y8.PersonalHomeUnknown})}))}),[i]),c=(0,r().K8)((()=>Oe().A.state.isOpen),[]),d=(0,a.useCallback)((()=>{Fe().t({environment:i,draftPostStore:n,onSubmitPost:l,from:"expanded_banner"}),null==s||s("preview")}),[i,n,l,s]),u=(0,a.useCallback)((()=>{n&&(0,Ue().s)(n)?Oe().A.setState({isOpen:!0}):d()}),[n,d]),p=[{isCustom:!1,label:(0,j.jsx)(P().sA,{defaultMessage:"Post",id:"pageViewBlock.draftPostInExpandedFeedComposerBanner.postButton.label"}),onClick:u}];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(I().l,{label:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(P().sA,{defaultMessage:"This page is unpublished and will share to",id:"pageViewBlock.draftPostInExpandedFeedComposerBanner.message"})," ",(0,j.jsx)(Ee().eO,{postStore:n})]}),display:"full-width",actions:p,tint:(0,k().V)(t)}),(0,j.jsx)(qe().A,{postStore:n,isOpen:c,onDismiss:()=>Oe().A.setState({isOpen:!1}),onConfirm:()=>{Oe().A.setState({isOpen:!1}),d()}})]})}const We=function(e){const{legacyColor:t}=e,o=(0,a.useCallback)((()=>{n(411671).A.setState({editing:!1,commenting:!0})}),[]);return(0,j.jsx)(I().l,{label:(0,j.jsx)(P().sA,{id:"pageViewBlock.editingPageBanner.status",defaultMessage:"You can now edit this page."}),display:"full-width",actions:[{label:(0,j.jsx)(P().sA,{id:"pageViewBlock.editingPageBanner.stop",defaultMessage:"Done editing"}),onClick:()=>o()}],tint:(0,k().V)(t)})};const He=function(e){let{blockStore:t,legacyColor:a}=e;const o=(0,r().K8)((()=>n(864260).A.state.pageMap[t.id]),[t.id]);if(!o)return null;const i=(0,j.jsx)(P().sA,{defaultMessage:"Imported {importedNumberOfNotes} of {totalNumberOfNotes}",values:{importedNumberOfNotes:o.importedNotes,totalNumberOfNotes:o.totalNotes},id:"pageViewBlock.evernoteBanner.contents"});return(0,j.jsx)(I().l,{label:i,display:"full-width",actions:[],tint:(0,k().V)(a)})};var Je=()=>n(464762);const Ye=(0,De().xh)("exclamationMarkCircleFill",{default:{loader:()=>n.e(1117).then(n.bind(n,601117))},small:{loader:()=>n.e(7103).then(n.bind(n,607103))},mini:{loader:()=>n.e(68977).then(n.bind(n,368977))},micro:{loader:()=>n.e(43774).then(n.bind(n,743774))},large:{loader:()=>n.e(84535).then(n.bind(n,484535))},max:{loader:()=>n.e(84535).then(n.bind(n,484535))}});var Ze=()=>n(427704),$e=()=>n(677338),Ge=()=>n(418830),Xe=()=>n(934839),Qe=()=>n(150193);function et(e){const t=(0,o().v3)(),{isMobile:n}=e,i=(0,r().K8)((()=>{const{mainEditorCurrentBlockStore:e}=w().default.state;if(e)return(0,J().Ay)({store:e,pageVisitSource:L().y8.PublicShareLink})}),[]),s=(0,a.useCallback)((()=>{(0,Ge().C)(t,{from:"banner"}),i&&(0,$e().wA)(i),_().oo({environment:t,url:Ze().JZ.login})}),[t,i]);if(!n)return null;const l=[{label:(0,j.jsx)(P().sA,{defaultMessage:"Sign up",id:"mobileLoggedOutAppBanner.signUp"}),onClick:()=>s()}];return(0,j.jsx)(I().l,{label:(0,j.jsx)(P().sA,{defaultMessage:"You have view-only access. To edit, you need an account.",id:"mobileLoggedOutAppBanner.banner"}),iconGroup:Ye,display:"full-width",actions:l,tint:k().q.Yellow,onDismiss:()=>{Xe().zA({bannerStore:Qe().A,id:"LoggedOutAppBanner"})}})}var tt=()=>n(711059);const nt=function(e){const{legacyColor:t}=e,{mobileNative:a,device:i}=(0,o().v3)(),{osVersion:s}=i,l=(0,B().IS)((()=>({updated:{whiteSpace:"normal",textAlign:"center",flex:"1 auto"}})),[]),c=(0,r().K8)((()=>i.isAndroid&&(0,tt().isLessThanVersion)(s,[7,0])?"Android 7.0":i.isIOS&&(0,tt().isLessThanVersion)(s,[16,0])?"iOS 16.0":void 0),[i.isAndroid,i.isIOS,s]);if(!a||!a.api.openUpdateSettings||!c)return null;const d=(0,j.jsx)(P().sA,{defaultMessage:" This operating system is no longer supported.{br}Please <upgradelink>upgrade to {supportedPlatformVersion} or later.</upgradelink>.",id:"appUpdateListener.mobilePlatformNotSupported.message",values:{br:(0,j.jsx)("br",{}),upgradelink:e=>(0,j.jsx)(n(719147).A,{onClick:()=>{a.openUpdateSettings()},disableHover:!0,children:e}),supportedPlatformVersion:c}});return(0,j.jsx)(I().l,{label:(0,j.jsx)("div",{style:l.updated,children:d}),display:"full-width",actions:[],tint:(0,k().V)(t)})};const at=function(e){const{legacyColor:t}=e;return(0,j.jsx)(I().l,{label:(0,j.jsx)(P().sA,{defaultMessage:"This page is in an archived teamspace.",id:"pageViewBlock.archivedTeamBanner.message"}),display:"full-width",actions:[],tint:(0,k().V)(t)})};var ot=()=>n(128871);function rt(){const{markBannerAsDismissed:e}=(0,ot().b)();return(0,j.jsx)(I().l,{label:(0,j.jsx)(P().sA,{defaultMessage:"When you start editing, your name, email and photo may become visible to anyone who can view the page.",id:"publicShareLinkEditDisclosureBanner.banner"}),iconGroup:Ye,display:"full-width",tint:k().q.Blue,onDismiss:()=>{Xe().zA({bannerStore:Qe().A,id:"PublicShareLinkEditDisclosureBanner"}),e()}})}var it=()=>n(322769),st=()=>n(755636),lt=()=>n(836251);const ct=function(e){let{blockStore:t,legacyColor:s}=e;const l=(0,o().v3)(),c=(0,j.jsx)(P().sA,{defaultMessage:"This workspace is in a read-only state while the contents are being duplicated.",id:"pageViewBlock.contentDuplicationInProgress.message"}),d=(0,j.jsx)(P().sA,{defaultMessage:"This workspace's contents have been duplicated. Navigate to the new workspace for edits.",id:"pageViewBlock.contentDuplicationCompleted.message"}),{spaceRequestStatus:u,targetSpaceId:p}=(0,r().K8)((()=>{const e=n(108944).Gg(t);return e&&(0,it().vW)(e)?{spaceRequestStatus:e.status,targetSpaceId:e.target_space_id}:{spaceRequestStatus:void 0,targetSpaceId:void 0}}),[t]),m=(0,a.useCallback)((()=>{const e=(0,lt().xS)("guides.workspaceConsolidation");st().f({environment:l,url:e})}),[l]),g=(0,a.useCallback)((e=>{_().oo({environment:l,url:(0,it().UL)({spaceId:e,baseUrl:V().A.domainBaseUrl}),openInNew:"tab"})}),[l]);let h;const f=[{label:(0,j.jsx)(P().sA,{defaultMessage:"Learn more",id:"pageViewBlock.contentDuplication.learnMoreButton.label"}),onClick:()=>m()}];if("started"===u||"failed_with_closed_source"===u)h=c;else if("completed"===u||"pending_deletion"===u)h=d,f.push({label:(0,j.jsx)(P().sA,{defaultMessage:"Visit new workspace",id:"pageViewBlock.contentDuplication.linkToTargetWorkspace.label"}),onClick:()=>g(p)});else{if(!u)return null;(0,i().HB)(u)}return(0,j.jsx)(I().l,{label:h,display:"full-width",actions:f,tint:(0,k().V)(s)})};var dt=()=>n(973454);function ut(){const e=(0,P().tz)(),t=(0,o().v3)(),n=(0,r().K8)((()=>{var e;return null===(e=w().default.state.currentSpaceStore)||void 0===e?void 0:e.getFreezeSettings()}),[]),{freezeStatus:i,minUntilFreeze:s}=(0,dt().A)(n),l=(0,a.useCallback)((()=>{const e=(0,lt().xS)("guides.workspaceConsolidation");st().f({environment:t,url:e})}),[t]);if(!n||"disabled"===i||"scheduled"===i)return null;const c=(0,j.jsx)(P().sA,{defaultMessage:"This workspace will be frozen for migration in {timeRemaining}, during which some features may be temporarily unavailable.",id:"workspaceFreeze.banners.scheduled_migration",values:{timeRemaining:s&&s>60?e.formatRelativeTime(Math.floor(s/60),"hour"):e.formatRelativeTime(s??0,"minute")}}),d=(0,j.jsx)(P().sA,{defaultMessage:"This workspace is currently frozen to perform a migration. Changes cannot be saved at this time.",id:"workspaceFreeze.banners.active_migration"}),u=[{label:(0,j.jsx)(P().sA,{defaultMessage:"Learn more",id:"workspaceFreeze.banners.learn_more"}),onClick:()=>l()}];return(0,j.jsx)(I().l,{label:"warning"===i?c:d,display:"full-width",actions:u,tint:(0,k().V)("warning"===i?k().q.Yellow:k().q.Red)})}var pt=()=>n(148024);function mt(e){const{message:t,mobileMessage:n,learnMoreLink:a,tint:r}=e,i=(0,o().Y0)(),s=(0,o().v3)(),l=(0,B().IS)((e=>({messageContainer:{display:"flex",alignItems:"center",minWidth:0,whiteSpace:"nowrap"},updatedHelpContainer:{display:"flex",flex:1,gap:4,alignItems:"center"}})),[]);return(0,j.jsx)(I().l,{label:(0,j.jsx)("div",{style:l.messageContainer,children:i.isMobile?n:t}),display:"full-width",actions:e.actions,onLearnMoreClick:()=>{pt().FH(s,{from:"collection_template_topbar"}),a&&_().oo({environment:s,url:a,openInNew:"tab"})},tint:r})}const gt=(0,P().YK)({editInsideButton:{defaultMessage:"<mediumtext>You're editing a template in a button</mediumtext>",id:"pageViewBlock.templatePageBanner.editInsideButton"},editInsideButtonMobile:{defaultMessage:"<mediumtext>Template inside button</mediumtext>",id:"pageViewBlock.templatePageBanner.mobile.editInsideButton"}});const ht=function(e){let{context:t,legacyColor:n}=e;return(0,j.jsx)(mt,{context:t,message:(0,j.jsx)(P().sA,{...gt.editInsideButton,values:{mediumtext:e=>(0,j.jsx)("span",{children:e})}}),mobileMessage:(0,j.jsx)(P().sA,{...gt.editInsideButtonMobile,values:{mediumtext:e=>(0,j.jsx)("span",{children:e})}}),tint:(0,k().V)(n)})};var ft=()=>n(792485),vt=()=>n(668725),bt=()=>n(496603),yt=()=>n(621627),St=()=>n(104636),Ct=()=>n(898125),At=()=>n(485894),xt=()=>n(726483),_t=()=>n(731320),Mt=()=>n(620149),kt=()=>n(661764);const wt=(0,P().YK)({viewTemplate:{defaultMessage:"<mediumtext>You're viewing a template in</mediumtext> {pageTitleWithIcon}",id:"pageViewBlock.templatePageBanner.viewTemplateLabel"},editTemplate:{defaultMessage:"<mediumtext>You're editing a template in</mediumtext> {pageTitleWithIcon}",id:"pageViewBlock.templatePageBanner.editTemplateLabel"},editTemplateMobile:{defaultMessage:"<mediumtext>Template in</mediumtext> {pageTitleWithIcon}",id:"pageViewBlock.templatePageBanner.mobile.editTemplateLabel"},repeatEvery:{defaultMessage:"Repeat every…",id:"pageViewBlock.templatePageBanner.repeatEveryLabel"}});function It(e){let{blockStore:t,context:n,disabled:i,legacyColor:s}=e;const l=(0,r().K8)((()=>t.getAssociatedCollectionStore()),[t]),c=(0,r().K8)((()=>{const e=null==l?void 0:l.getParentBlockStore();if(e)return(0,D().A)({pageId:e.id,pageVisitSource:L().y8.LinkInPage})}),[l]),d=(0,ft().S)(),u=(0,r().K8)((()=>{if(i)return!1;if(Mt().l.state)return!1;const e=d&&d.publicEditModeStore.state;if((0,_t().QT)(e))return wt.viewTemplate;return t.canEdit()?wt.editTemplate:wt.viewTemplate}),[d,i,t]),p=function(e){let{legacyColor:t}=e;return(0,B().IS)((e=>({innerLinkBox:{display:"flex",alignItems:"center"},linkBox:{marginLeft:8,marginRight:8,minWidth:0},linkBoxMobile:{marginLeft:8,marginRight:"auto",minWidth:0},recordTitle:{marginLeft:4,maxWidth:380},recordTitleMobile:{marginLeft:4,marginRight:8},chevron:{width:10,marginLeft:4,fill:kt().pq[(0,k().V)(t)](e)}})),[t])}({legacyColor:s}),m=(0,lt().xS)("guides.databaseTemplates"),g=(0,r().K8)((()=>null==l?void 0:l.getIcon()),[l]),h=(0,o().v3)(),f=(0,P().tz)(),{isMobile:v}=(0,o().Y0)(),b=(0,r().K8)((()=>{const e=t.getAutomationStore();if(null!=e&&e.getActionStores())return null!=e&&e.isActive()?e.getRecurrence():void 0}),[t]),y=(0,a.useCallback)((async e=>{const{recurrenceActions:n}=await At().k.load();e?n.addRecurrence({environment:h,blockStore:t,recurrence:e}):n.deleteRecurrence({environment:h,blockStore:t})}),[h,t]),S=(0,yt().$)({recurrence:b,onChange:y,requireExplicitSaveAndAllowDelete:!0}),C=(0,r().K8)((()=>l&&xt().rc({collectionStore:l})),[l]);if(!l||!c||!u)return null;const A=[];return C&&!v&&A.push({isCustom:!0,render:()=>(0,a.createElement)(ce().Ay,{...S,key:"recurrence-editor",popupType:ce().z7.Popup,originGap:4,onClose:async()=>{S.hasUnpersistedChanges()&&!(await Ct().lT({hasPendingChanges:!0}))||(S.onClose(),S.buttonPopupStore.setState({open:!1}))},persistOnClose:!0,renderOrigin:e=>(0,j.jsx)(kt().fT,{tint:(0,k().V)(s),action:{label:(0,j.jsxs)(j.Fragment,{children:[b?(0,bt().ZH)((0,St().LS)({recurrence:b,intl:f,leadingPhrase:"repeat every"})):f.formatMessage(wt.repeatEvery),(0,vt().b)(p.chevron)]}),onClick:e.onClick,iconGroup:void 0}})})}),(0,j.jsx)(mt,{actions:A,learnMoreLink:m,context:n,message:(0,j.jsx)(P().sA,{...u,values:{mediumtext:e=>(0,j.jsx)("span",{children:e}),pageTitleWithIcon:(0,j.jsxs)(Z().A,{href:c,style:p.linkBox,innerStyle:p.innerLinkBox,children:[(0,j.jsx)($().A,{disabled:!0,icon:g,isEmptyPage:!1,size:20}),(0,j.jsx)(G().A,{style:p.recordTitle,store:l,underline:!0})]})}}),mobileMessage:(0,j.jsx)(P().sA,{...wt.editTemplateMobile,values:{mediumtext:e=>(0,j.jsx)("span",{children:e}),pageTitleWithIcon:(0,j.jsxs)(Z().A,{href:c,style:p.linkBoxMobile,innerStyle:p.innerLinkBox,children:[(0,j.jsx)($().A,{disabled:!0,icon:g,isEmptyPage:!1,size:20}),(0,j.jsx)(G().A,{style:p.recordTitleMobile,store:l,underline:!0})]})}}),tint:(0,k().V)(s)})}n(16280);const jt={viewBox:"0 0 16 16",svg:(0,j.jsx)("path",{d:"M12.462 4.288a.75.75 0 0 0-.75-.75h-6.11a.75.75 0 1 0 0 1.5h4.3l-6.177 6.177c-.275.274-.26.735.032 1.027.293.293.753.308 1.028.033l6.177-6.177v4.299a.75.75 0 0 0 1.5 0z"})},Tt=(0,De().wt)("arrowDiagonalUpRightFillSmall",jt);var Bt=()=>n(498212),Lt=()=>n(140612),Dt=()=>n(666144),Pt=()=>n(426116),Rt=()=>n(898486),Vt=()=>n(974233),Nt=()=>n(972435),Ft=()=>n(864943),qt=()=>n(125565),Et=()=>n(322114);function Ut(e){const t=(0,o().v3)(),{blockId:n,trustedDomainState:i}=e,s=n.spaceId,l=(0,r().K8)((()=>{var e;return"resolved"===i.status&&"click_to_join"===(null===(e=i.value)||void 0===e?void 0:e.joinSpaceMethod)}),[i]),c=(0,B().IS)((()=>({iconArrow:{height:18,width:18},title:{fontSize:17,fontWeight:500,lineHeight:"24px",paddingBottom:8}})),[]),d=(0,a.useCallback)((e=>{let t;if(e instanceof Vt().C){var n;const a=null==e||null===(n=e.data)||void 0===n||null===(n=n.responseBody)||void 0===n?void 0:n.clientData;a&&(t=(0,Rt().t4)(Nt().A.getIntl(),a))}else e instanceof Error&&(t=e.message);A().f1((0,j.jsxs)("div",{children:[(0,j.jsx)(qt().A,{style:c.title,children:(0,j.jsx)(P().sA,{defaultMessage:"Oops, something went wrong.",id:"pageViewBlock.trustedDomainPageBanner.joinSpaceErrorDialog.message"})}),(0,j.jsx)("div",{children:t})]}))}),[c.title]),u=(0,a.useCallback)((async()=>{const{currentUserRootStore:e,currentUserSettingsStore:a}=w().default.state;if(s&&e)try{await Pt().DT({environment:t,userRootStore:e,spaceId:s,navigate:!0,analyticsFrom:"trusted_domain_page",userSettingsStore:a,redirectSource:"click_to_join_workspace_from_dls",isJoinableTrustedDomainViewer:l}),Lt().w(t,{spaceId:s,pageId:n.id,joinSpaceMethod:"click_to_join"}),Dt().IL(t)}catch(o){d(o)}}),[t,s,n,l,d]);if("resolved"!==i.status||!i.value)return null;switch(i.value.joinSpaceMethod){case"request_to_join":const e=i.value.requestMembershipCustomizationRedirectUrl;return e?(0,j.jsxs)(Ft().A,{size:"lg",onClick:()=>{window.open(e,"_blank")},children:[(0,j.jsx)(P().sA,{id:"pageViewBlock.trustedDomainPageBanner.requestToJoin",defaultMessage:"Request membership"}),Tt(c.iconArrow)]}):(0,j.jsx)(Et().A,{type:"current-actor-to-space-via-block",block:n,flowId:(0,Bt().Ay)(),source:"trusted_domain_page",buttonType:"outline"});case"click_to_join":return(0,j.jsx)(Ft().A,{size:"lg",onClick:u,children:(0,j.jsx)(P().sA,{id:"pageViewBlock.trustedDomainPageBanner.clickToJoin",defaultMessage:"Join workspace"})});default:return null}}const Ot=function(e){var t;const{legacyColor:a}=e,i=(0,r().K8)((()=>{const e=n(792415).A.state.publicPageData;if(e&&e.spaceId&&e.pageId)return{spaceShardedBlockId:{spaceId:e.spaceId,id:e.pageId},spaceName:e.spaceName}}),[]),s=(0,o().v3)(),l=null==i||null===(t=i.spaceShardedBlockId)||void 0===t?void 0:t.spaceId,[c]=(0,n(187174).Yb)((async()=>{if(!l)return;const e=await n(449506).callApi({eventName:"getTrustedDomainForUser",environment:s,data:{spaceId:l}});return"success"===e.type?{joinSpaceMethod:e.data.joinSpaceMethod,requestMembershipCustomizationRedirectUrl:e.data.requestMembershipCustomizationRedirectUrl}:void 0}),[s,l]),d=(0,P().tz)(),u=(0,j.jsx)("div",{style:{gap:"auto",flexDirection:"row",alignItems:"center"},children:(0,j.jsxs)(n(84817).Y1,{direction:"horizontal",align:"center",width:"hug",gap:4,children:[(0,j.jsx)(n(554509).D,{styleName:"UIRegular-14px/Medium",children:(0,j.jsx)(P().sA,{id:"pageViewBlock.trustedDomainPageBanner.label",defaultMessage:"You're viewing a shared page in the {spaceName} workspace",values:{spaceName:null==i?void 0:i.spaceName}})}),(0,j.jsx)(n(187485).A,{href:(0,lt().xS)("guides.domainManagement"),children:(0,j.jsx)(de().A,{icon:n(133033).$,ariaLabel:d.formatMessage({id:"pageViewBlock.trustedDomainPageBanner.helpIcon.ariaLabel",defaultMessage:"Learn more"})})}),(null==i?void 0:i.spaceShardedBlockId)&&Ut({blockId:i.spaceShardedBlockId,trustedDomainState:c})]})});return(0,j.jsx)(I().l,{display:"full-width-no-content",tint:(0,k().V)(a),content:u})};var Kt=()=>n(134217);const zt=function(e){const{legacyColor:t}=e,a=(0,o().v3)(),i=(0,r().K8)((()=>a.device.isMobile&&!a.device.isTablet),[a.device]),s=(0,r().K8)((()=>{const e="personal"===Kt().Si(a),t=b().subscriptionDataStoreInstance.state,o=Kt().qc(t);return!((0,n(600871).mM)({environment:a})&&e&&!o)}),[a]),l=(0,j.jsx)(P().sA,{id:"uploadLimitExceededBanner.message",defaultMessage:"{shouldShowShortMessage, select, true {Your file is over the {maxFreeAccountFileSize} MB limit} other {Your file is over the {maxFreeAccountFileSize} MB limit of the Free plan}}",values:{shouldShowShortMessage:i,maxFreeAccountFileSize:n(892632).u1}}),c=(0,j.jsx)(P().sA,{id:"uploadLimitExceededBanner.upgradeButton.label",defaultMessage:"{shouldShowShortMessage, select, true {Upgrade} other {Upgrade for unlimited uploads}}",values:{shouldShowShortMessage:i}}),d=async()=>{await n(991249).K(a,{from:"upload_limit_banner",upsell:{type:"product",product:Kt().Si(a)||"plus",limit:{type:"none"}}})};return(0,j.jsx)(I().l,{label:l,display:"full-width",actions:s?[{label:c,onClick:()=>d()}]:[],tint:(0,k().V)(t)})};var Wt=()=>n(716583);const Ht=(0,De().wt)("mobileNewFeatures",{viewBox:"0 0 26 26",svg:(0,j.jsx)("path",{d:"M12.3984 5.47754C12.5273 5.47754 12.5918 5.40234 12.624 5.28418C12.9463 3.49023 12.9355 3.44727 14.8047 3.09277C14.9229 3.07129 15.0088 2.99609 15.0088 2.86719C15.0088 2.73828 14.9229 2.66309 14.8047 2.6416C12.9355 2.26562 13 2.22266 12.624 0.450195C12.5918 0.332031 12.5273 0.256836 12.3984 0.256836C12.2695 0.256836 12.1943 0.332031 12.1729 0.450195C11.7969 2.22266 11.8613 2.26562 9.99219 2.6416C9.86328 2.66309 9.78809 2.73828 9.78809 2.86719C9.78809 2.99609 9.86328 3.07129 9.99219 3.09277C11.8613 3.46875 11.8398 3.49023 12.1729 5.28418C12.1943 5.40234 12.2695 5.47754 12.3984 5.47754ZM7.19922 12.8682C7.40332 12.8682 7.54297 12.7393 7.56445 12.5459C7.95117 9.67773 8.04785 9.67773 11.0127 9.1084C11.1953 9.07617 11.335 8.94727 11.335 8.74316C11.335 8.5498 11.1953 8.41016 11.0127 8.37793C8.04785 7.96973 7.94043 7.87305 7.56445 4.95117C7.54297 4.75781 7.40332 4.61816 7.19922 4.61816C7.00586 4.61816 6.86621 4.75781 6.83398 4.96191C6.49023 7.84082 6.3291 7.83008 3.38574 8.37793C3.20312 8.4209 3.06348 8.5498 3.06348 8.74316C3.06348 8.95801 3.20312 9.07617 3.42871 9.1084C6.35059 9.58105 6.49023 9.65625 6.83398 12.5244C6.86621 12.7393 7.00586 12.8682 7.19922 12.8682ZM14.4824 24.7598C14.7617 24.7598 14.9658 24.5557 15.0088 24.2656C15.7715 18.3789 16.6094 17.4873 22.4316 16.8428C22.7324 16.8105 22.9365 16.585 22.9365 16.3057C22.9365 16.0264 22.7324 15.8115 22.4316 15.7686C16.6094 15.124 15.7715 14.2324 15.0088 8.3457C14.9658 8.05566 14.7617 7.8623 14.4824 7.8623C14.2031 7.8623 13.999 8.05566 13.9561 8.3457C13.1826 14.2324 12.3555 15.124 6.5332 15.7686C6.23242 15.8115 6.02832 16.0264 6.02832 16.3057C6.02832 16.585 6.23242 16.8105 6.5332 16.8428C12.3447 17.6055 13.1504 18.3896 13.9561 24.2656C13.999 24.5557 14.2031 24.7598 14.4824 24.7598Z"})});const Jt=function(e){const{onClick:t,legacyColor:n}=e,a=(0,o().v3)(),{isMobile:r}=a.device,i=(0,B().IS)((()=>({icon:{width:22,marginRight:8},mobileIcon:{width:26,marginRight:12},navigateReleaseAction:{minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},mobileButton:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start"},button:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}})),[]),l=s().qZ?(0,j.jsxs)(j.Fragment,{children:[Ht(r?i.mobileIcon:i.icon),(0,j.jsx)("div",{style:i.navigateReleaseAction,children:(0,j.jsx)(P().sA,{defaultMessage:"Update and see what's new",id:"updateBanner.updateAvailableBanner.message"})})]}):(0,j.jsx)("div",{children:r?(0,j.jsx)(P().sA,{id:"updateBanner.updateMessage.noRedirectMobile",defaultMessage:"Tap here to update to the latest version"}):(0,j.jsx)(P().sA,{id:"updateBanner.updateMessage.noRedirect",defaultMessage:"Click here to update to the latest version"})});return(0,j.jsx)(I().l,{label:void 0,display:"full-width",actions:[{label:l,onClick:e=>t(e)}],tint:(0,k().V)(n)})};function Yt(e){let{isInPeekRenderer:t,arbitraryRenderBefore:n,banners:a,isMobile:i}=e;const s=(0,o().v3)(),l=(0,r().K8)((()=>(0,c().zo)(s,t)),[s,t]);return(0,j.jsxs)("div",{style:{width:`calc(100% - ${l}px)`,userSelect:"none",WebkitUserSelect:"none"},children:[n,a.map(((e,t,n)=>(0,j.jsx)(Zt,{banner:e,index:t,array:n,isMobile:i},e.id)))]})}function Zt(e){let{banner:t,index:n,array:a,isMobile:c}=e;const S=(0,o().v3)(),C=(0,r().O$)(b().subscriptionDataStoreInstance),A=(0,g().b)(C),{styleKey:x,contentKey:_}=t,M=a.length>1&&n!==a.length-1,k=(0,r().K8)((()=>(0,p().Km)(A)),[A]);switch(_){case"russian_sanctions":return(0,j.jsx)(v().k,{});case"missing_name":return(0,j.jsx)(Je().M,{});case"over_free_block_limit":return k?(0,j.jsx)(j.Fragment,{}):(0,j.jsx)(u().default,{});case"editing_page":return(0,j.jsx)(We,{legacyColor:x});case"subscription_trial_add_payment_method":return(0,j.jsx)(l().b,{legacyColor:x});case"upload_limit_exceeded":return(0,j.jsx)(zt,{legacyColor:x});case"admin_mode":return(0,j.jsx)(T,{legacyColor:x});case"arbitrary_subscription_banner":return(0,j.jsx)(h().U,{legacyColor:x});case"billing_subscription_status":return(0,j.jsx)(m().g,{legacyColor:x});case"test_clock":return(0,j.jsx)(f().i,{legacyColor:x});case"space_content_duplication":return(0,j.jsx)(ct,{blockStore:t.blockStore,legacyColor:x});case"space_freeze":return(0,j.jsx)(ut,{});case"minor_app_update":return(0,j.jsx)(Jt,{onClick:()=>s().K0(S),legacyColor:x});case"mobile_platform_unsupported":return(0,j.jsx)(nt,{legacyColor:x});case"deleted_or_moved_page":return(0,j.jsx)(Wt().A,{styleKey:x,shouldUseDivider:M,isMobile:c,children:(0,j.jsx)(Le,{blockStore:t.blockStore})});case"page_in_archived_team":return(0,j.jsx)(at,{legacyColor:x});case"draft_post_in_expanded_feed_composer":return(0,j.jsx)(ze,{blockStore:t.blockStore,legacyColor:x});case"importing_evernote":return(0,j.jsx)(He,{blockStore:t.blockStore,legacyColor:x});case"template_in_page":return(0,j.jsx)(It,{blockStore:t.blockStore,context:t.context,disabled:t.disabled,legacyColor:x});case"template_in_button":return(0,j.jsx)(ht,{context:t.context,legacyColor:x});case"asana_importer_banner":return(0,j.jsx)(F,{blockStore:t.blockStore,legacyColor:x});case"site":return(0,j.jsx)(d().A,{blockStore:t.blockStore,legacyColor:x});case"dictation_connection":return(0,j.jsx)(Re,{legacyColor:x});case"trusted_domain_page":return(0,j.jsx)(Ot,{legacyColor:x});case"translate":return(0,j.jsx)(y().rN,{blockStore:t.blockStore});case"logged_out_app_banner":return(0,j.jsx)(et,{isMobile:c});case"public_share_link_edit_disclosure_banner":return(0,j.jsx)(rt,{});default:(0,i().HB)(_)}}}}]);