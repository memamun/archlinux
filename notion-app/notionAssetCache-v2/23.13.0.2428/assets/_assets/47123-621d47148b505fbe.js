"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[47123],{138389:(e,t,o)=>{o.d(t,{X:()=>i});o(296540);var r=o(474848);const i=(0,o(340498).wt)("random",{viewBox:"0 0 14 14",svg:(0,r.jsx)("path",{d:"M9.45002,6.2999567 C8.87013,6.2999567 8.40002,5.8298565 8.40002,5.24995625 C8.40002,4.670056 8.87013,4.1999558 9.45002,4.1999558 C10.0299,4.1999558 10.5,4.670056 10.5,5.24995625 C10.5,5.8298565 10.0299,6.2999567 9.45002,6.2999567 Z M4.55,6.2999567 C3.9701,6.2999567 3.5,5.8298565 3.5,5.24995625 C3.5,4.670056 3.9701,4.1999558 4.55,4.1999558 C5.1299,4.1999558 5.6,4.670056 5.6,5.24995625 C5.6,5.8298565 5.1299,6.2999567 4.55,6.2999567 Z M6.993,0 C10.864,0 14,3.13600534 14,7.000007 C14,10.8639987 10.864,14 6.993,14 C3.129,14 0,10.8639987 0,7.000007 C0,3.13600534 3.129,0 6.993,0 Z M7,12.5999994 C10.094,12.5999994 12.6,10.0939983 12.6,7.000007 C12.6,3.90600567 10.094,1.4000046 7,1.4000046 C3.906,1.4000046 1.4,3.90600567 1.4,7.000007 C1.4,10.0939983 3.906,12.5999994 7,12.5999994 Z M7,10.8499986 C5.369,10.8499986 3.976,9.83499821 3.416,8.4000076 L4.585,8.4000076 C5.075,9.23299796 5.964,9.7999982 7,9.7999982 C8.036,9.7999982 8.932,9.23299796 9.415,8.4000076 L10.584,8.4000076 C10.024,9.83499821 8.631,10.8499986 7,10.8499986 Z"})})},175499:(e,t,o)=>{o.d(t,{R1:()=>q,vY:()=>E,RD:()=>X,Nn:()=>O,lM:()=>G,Ay:()=>Y,Ab:()=>Z,ux:()=>N,De:()=>W});o(581454);var r=o(296540),i=()=>o(662303),n=()=>o(484714),l=()=>o(56366),a=()=>o(401497),s=()=>o(612740),d=()=>o(700500),c=()=>o(713998),u=()=>o(313028),p=()=>o(743176),x=()=>o(651124),m=()=>o(416504),h=()=>o(412532),f=()=>o(926401),g=()=>o(945778),b=()=>o(792071),v=()=>o(179034),y=()=>o(519831),j=()=>o(161479),S=()=>o(797809),k=()=>o(919709),_=()=>o(959013),A=()=>o(534177),w=()=>o(284371),C=()=>o(972435),V=()=>o(980914),M=()=>o(53137),P=()=>o(360083),R=()=>o(614505),I=()=>o(914398),B=()=>o(890022),T=(o(944114),o(898992),o(803949),()=>o(756005)),D=()=>o(983650),L=()=>o(704152),K=o(474848);const U=2;function H(e){const{colIndex:t,blockValue:o,simpleTableValue:r,hasColumnHeader:i,hasRowHeader:n,columnOrder:s,environment:d,rootStore:c,theme:u,getRecordModel:p}=e,x=(0,a().IS)((()=>({cellSecondaryTitleTable:{color:u.lightTextColor},cellTitleLineHeight:{lineHeight:1.25}})),[u]),m=[(0,K.jsx)("span",{children:(0,K.jsx)(_().sA,{defaultMessage:"Table",id:"edit.simpleTableRowComponentByCell.table"})},`simple-edit${t}-title-box-notif`)],h=null==r?void 0:r.getChildren(),f=(0,l().K8)((()=>{if(h&&0!==h.length)return p({table:o.parent_table,id:h[0],spaceId:o.space_id})}),[o.parent_table,o.space_id,p,h]),g=f?W(f,s[t]):void 0,b=(0,l().K8)((()=>V().qO({environment:d,cellValue:g,spaceId:o.space_id,parentStore:c,theme:u})),[d,g,o.space_id,c,u]),v=W(o,s?s[0]:""),y=(0,l().K8)((()=>V().qO({environment:d,cellValue:v,spaceId:o.space_id,parentStore:c,theme:u})),[d,v,o.space_id,c,u]),j=(null==f?void 0:f.id)===o.id;return i&&f&&!j&&(k().w9s(g)||m.push((0,K.jsxs)("span",{style:x.cellSecondaryTitleTable,children:[" / ",b]},`simple-table-col-header-${t}${o.parent_id}`))),n&&f&&0!==t&&(k().w9s(v)||m.push((0,K.jsxs)("span",{style:x.cellSecondaryTitleTable,children:[" / ",y]},`simple-table-row-header-${t}${o.parent_id}`))),(0,K.jsx)("div",{style:x.cellTitleLineHeight,children:m},`simple-table-${t}edit-box`)}function z(e){let{blockValue:t,rootStore:o}=e;const i=(0,r.useMemo)((()=>b().b4_.fromGetRecordValueFn(o.getRecordValue)),[o]),s=(0,a().DP)(),d=(0,a().IS)((()=>({andMore:{color:s.lightTextColor,marginTop:4,borderRadius:6,padding:"2px 4px",marginLeft:"-4px",fontSize:12,maxWidth:"fit-content"},cellTitleTable:{color:s.mediumTextColor,marginTop:4,overflow:"visible"}})),[s]),[c,p]=(0,r.useState)(!1),x=(0,n().v3)(),m=(0,l().K8)((()=>{var e,r,n;const l=null==o?void 0:o.userId,a=[],m=i({table:t.parent_table,id:t.parent_id,spaceId:t.space_id}),h=!(null==m||null===(e=m.getFormat())||void 0===e||!e.table_block_row_header),f=!(null==m||null===(r=m.getFormat())||void 0===r||!r.table_block_column_header),g=null==m||null===(n=m.getFormat())||void 0===n?void 0:n.table_block_column_order;let b=0;null==g||g.forEach(((e,r)=>{const n=W(t,e);if((0,T().PC)({textValue:n,currentUserId:l,getRecordModel:i})){b+=1;const e=(0,K.jsx)(u().A,{style:d.cellTitleTable,title:(0,K.jsx)(H,{colIndex:r,blockValue:t,simpleTableValue:m,hasColumnHeader:f,hasRowHeader:h,columnOrder:g,environment:x,rootStore:o,theme:s,getRecordModel:i}),theme:s,children:V().qO({environment:x,cellValue:(0,D().Eh)({textValue:n,highlightStyle:"text_only",currentUserId:l,getRecordModel:i}),spaceId:t.space_id,parentStore:o,theme:s,disableStyleAnnotations:!1,disableSuggestionAnnotations:!0})},`simple-edit${r}-box-notif-${n}${t.parent_id}${t.id}`);a.push(e)}}));const v=c?a:a.slice(0,U);return(0,K.jsxs)(K.Fragment,{children:[v,b>U?c?(0,K.jsx)(L().A,{style:d.andMore,onClick:()=>p(!1),children:(0,K.jsx)(_().sA,{defaultMessage:"Hide {numMore}",id:"edit.simpleTableRowComponentByCell.hideMoreCells",values:{numMore:b-U}})}):(0,K.jsx)(L().A,{style:d.andMore,onClick:()=>p(!0),children:(0,K.jsx)(_().sA,{defaultMessage:"...{numMore} more",id:"edit.simpleTableRowComponentByCell.showMoreCells",values:{numMore:b-U}})}):null]})}),[o,i,t,c,d,s,x]);return(0,K.jsx)(K.Fragment,{children:m})}const F=(0,_().YK)({[d().xd.quote]:{defaultMessage:"Quote",id:"edit.quoteBlock.label"},[d().xd.callout]:{defaultMessage:"Callout",id:"edit.calloutBlock.label"},[d().xd.button]:{defaultMessage:"Button",id:"edit.buttonBlock.label"},[d().xd.factory]:{defaultMessage:"Template Button",id:"edit.templateButtonBlock.label"},[d().xd.bookmark]:{defaultMessage:"Bookmark",id:"edit.bookmarkBlockProperty.label"},[d().xd.equation]:{defaultMessage:"Equation",id:"edit.equationBlock.label"}});function N(e){return F[e]&&C().A.formatMessage(F[e])}function W(e,t){return b().Bj6.fromBlock(e).getProperties()[t]||[]}function E(e){let{value:t,propertySchema:o,labeled:r,rootStore:i,disableStyleAnnotations:n,disableInsertedDeletedAnnotations:l,disableDateStyleAnnotations:a}=e;return(0,K.jsx)(X,{labeled:r,type:o.type,icon:o.icon,name:o.name,children:(0,K.jsx)(B().A,{propertySchema:o,value:t,rootStore:i,disableStyleAnnotations:n,disableInsertedDeletedAnnotations:l,disableDateStyleAnnotations:a})})}function O(e){let{blockValue:t,prop:o,labeled:i,schema:n,rootStore:l}=e;const a=(0,_().tz)(),s=n||(0,S().RX)(a),d=(0,r.useMemo)((()=>({value:W(t,o),spaceId:(0,j().e)(t.space_id)})),[t,o]),c=s[o];return c?(0,K.jsx)(E,{value:d,propertySchema:c,labeled:i,rootStore:l}):null}function G(e){let{children:t}=e;const o=(0,K.jsx)("div",{style:{width:"1em",height:"1em",display:"flex",alignSelf:"stretch",justifyContent:"center",flexShrink:0,marginLeft:6,marginRight:6,marginTop:6},children:(0,h().l)({width:"0.8em",height:"0.8em",transform:"rotateZ(90deg)"})});return(0,K.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[o,(0,K.jsx)("span",{children:t})]})}function q(e){let{src:t,permissionRecord:o}=e;const r=(0,a().DP)();return t?(0,K.jsx)(P().A,{url:t,isAuthenticated:!0,permissionRecord:o,width:170,render:(e,t)=>{if(t)return(0,K.jsx)("img",{src:t,style:{maxHeight:170,maxWidth:170}})}}):(0,K.jsx)("div",{style:{backgroundColor:r.lightTextColor,height:170,width:170}})}function $(e){let{icon:t,rootStore:o,blockValue:r}=e;if(t){if((0,g().A)(t))return(0,K.jsx)("div",{style:{fontSize:16.2,display:"inline-block"},children:t});{const e=b().Bj6.fromBlock(r).getRenderIcon({getRecordModel:o.getRecordModel});return(0,K.jsx)(R().A,{disabled:!0,icon:e,isEmptyPage:!1,size:18,style:{marginTop:6,marginBottom:6}})}}return(0,f().n)({height:18,width:18})}function X(e){let{children:t,type:o,icon:r,name:i,labeled:n,style:l}=e;const s=(0,a().DP)();return n?(0,K.jsxs)("div",{style:l,children:[(0,K.jsxs)("div",{style:{display:"flex",color:s.lightTextColor,paddingTop:7,fontSize:12,lineHeight:1,marginBottom:4},children:[(0,K.jsx)(p().Ay,{type:o,icon:r,size:14,theme:s}),(0,K.jsx)("div",{style:{marginLeft:6},children:i})]}),(0,K.jsx)("div",{style:{display:"flex",alignItems:"center",minHeight:24,overflow:"hidden"},children:t})]}):(0,K.jsx)("div",{style:l,children:t})}function Z(e){const t=e&&e.properties&&e.properties.language;if(!t)return(0,K.jsx)(_().sA,{defaultMessage:"Code",id:"edit.codeBlockChanged.label"});const o=c().L3(t,S().h5);return(0,K.jsx)(_().sA,{defaultMessage:"Code - {codeLanguage}",values:{codeLanguage:o},id:"edit.codeBlockWithLanguageChanged.label"})}const Y=function(e){let{rootStore:t,blockValue:o,blockPreviewLocation:i,created:n,deleted:a}=e;const s=(0,r.useMemo)((()=>b().b4_.fromGetRecordValueFn(t.getRecordValue)),[t]),c=(0,l().K8)((()=>{let e;return o.type===d().xd.button&&(e=b().Bj6.fromBlock(o).getAutomationPointer()),o.type===d().xd.collectionViewPage&&(e=b().Bj6.fromBlock(o).getCollectionPointer()),e?s(e):void 0}),[o,s]);switch(o.type){case d().xd.text:case d().xd.encryptedText:return(0,K.jsx)(re,{rootStore:t,blockValue:o});case d().xd.header:return(0,K.jsx)(ie,{rootStore:t,blockValue:o});case d().xd.subHeader:return(0,K.jsx)(ne,{rootStore:t,blockValue:o});case d().xd.subSubHeader:return(0,K.jsx)(le,{rootStore:t,blockValue:o});case d().xd.toggle:return(0,K.jsx)(ae,{rootStore:t,blockValue:o});case d().xd.bulletedList:return(0,K.jsx)(se,{rootStore:t,blockValue:o});case d().xd.numberedList:return(0,K.jsx)(de,{rootStore:t,blockValue:o});case d().xd.quote:return(0,K.jsx)(me,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o});case d().xd.factory:return(0,K.jsx)(he,{blockPreviewLocation:i,created:n,rootStore:t,blockValue:o});case d().xd.button:if((null==c?void 0:c.table)===b().R$j.table)return(0,K.jsx)(fe,{blockPreviewLocation:i,created:n,deleted:a,automation:c});break;case d().xd.equation:return(0,K.jsx)(ge,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o});case d().xd.toDo:return(0,K.jsx)(ce,{rootStore:t,blockValue:o});case d().xd.code:return(0,K.jsx)(be,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o});case d().xd.bookmark:return(0,K.jsx)(ye,{blockPreviewLocation:i,created:n,rootStore:t,blockValue:o});case d().xd.page:case d().xd.form:return(0,K.jsx)(_e,{rootStore:t,blockValue:o,blockModel:b().Bj6.fromBlock(o)});case d().xd.collectionView:case d().xd.collectionViewPage:if((null==c?void 0:c.table)===b().WBy.table)return(0,K.jsx)(Ae,{rootStore:t,blockValue:o,collectionModel:c});break;case d().xd.image:return(0,K.jsx)(ue,{rootStore:t,blockPreviewLocation:i,blockValue:o});case d().xd.embed:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"embed"});case d().xd.framer:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"framer"});case d().xd.tweet:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"tweet"});case d().xd.gist:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"gist"});case d().xd.drive:return(0,K.jsx)(ke,{deleted:a,blockPreviewLocation:i,created:n,rootStore:t,blockValue:o});case d().xd.maps:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"maps"});case d().xd.invision:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"invision"});case d().xd.video:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"video"});case d().xd.audio:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"audio"});case d().xd.file:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"file"});case d().xd.callout:return(0,K.jsx)(xe,{created:n,blockPreviewLocation:i,deleted:a,rootStore:t,blockValue:o,getRecordModel:s});case d().xd.whimsical:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"whimsical"});case d().xd.miro:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"miro"});case d().xd.abstract:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"abstract"});case d().xd.mixpanel:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"mixpanel"});case d().xd.sketch:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"sketch"});case d().xd.excalidraw:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"excalidraw"});case d().xd.replit:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"replit"});case d().xd.pdf:return(0,K.jsx)(ve,{blockPreviewLocation:i,created:n,deleted:a,rootStore:t,blockValue:o,type:"pdf"});case d().xd.table:return(0,K.jsx)(we,{rootStore:t,blockValue:o});case d().xd.tableRow:return"notifications"===i?(0,K.jsx)(z,{rootStore:t,blockValue:o}):(0,K.jsx)(Ce,{rootStore:t,blockValue:o});case d().xd.externalObjectInstance:return(0,K.jsx)(je,{created:n,blockPreviewLocation:i,deleted:a,blockValue:o});case d().xd.linkToPage:case d().xd.personalHomePage:case d().xd.linkToCollection:case d().xd.divider:case d().xd.columnList:case d().xd.column:case d().xd.copyIndicator:case d().xd.breadcrumb:case d().xd.figma:case d().xd.loom:case d().xd.typeform:case d().xd.codepen:case d().xd.tableOfContents:case d().xd.alias:case d().xd.transclusionContainer:case d().xd.transclusionReference:case d().xd.hex:case d().xd.tab:case d().xd.deepnote:case d().xd.externalObjectInstancePage:case d().xd.aiBlock:case d().xd.drawing:case d().xd.slide:case d().xd.post:case d().xd.workflow:case d().xd.transcription:case d().xd.personProfile:return null;default:(0,A().HB)(o)}return null};function Q(e,t){return Boolean(e&&e.properties&&e.properties[t])}function J(e){let{blockValue:t}=e;const o=function(e){var t;const o=null==e||null===(t=e.properties)||void 0===t?void 0:t.source;return k().k4p(o)}(t);return(0,K.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:(0,K.jsx)("span",{style:{wordBreak:"break-word"},children:o})})}function ee(e){let{blockValue:t,rootStore:o}=e;return(0,K.jsx)(O,{rootStore:o,blockValue:t,prop:"title",labeled:!1})}function te(e){let{blockValue:t,rootStore:o}=e;return(0,K.jsx)("div",{style:{marginRight:6,marginTop:3},children:(0,K.jsx)(O,{rootStore:o,blockValue:t,prop:"checked",labeled:!1})})}function oe(e){let{blockValue:t,rootStore:o}=e;return Q(t,"caption")?(0,K.jsx)(O,{rootStore:o,blockValue:t,prop:"caption",labeled:!1}):null}function re(e){let{blockValue:t,rootStore:o}=e;return(0,K.jsx)(ee,{rootStore:o,blockValue:t})}function ie(e){let{blockValue:t,rootStore:o}=e;const r=(0,I().A)();return(0,K.jsx)("div",{style:r.header,children:(0,K.jsx)(ee,{rootStore:o,blockValue:t})})}function ne(e){let{blockValue:t,rootStore:o}=e;const r=(0,I().A)();return(0,K.jsx)("div",{style:r.subHeader,children:(0,K.jsx)(ee,{rootStore:o,blockValue:t})})}function le(e){let{blockValue:t,rootStore:o}=e;const r=(0,I().A)();return(0,K.jsx)("div",{style:r.subSubHeader,children:(0,K.jsx)(ee,{rootStore:o,blockValue:t})})}function ae(e){let{blockValue:t,rootStore:o}=e;return(0,K.jsx)(G,{children:(0,K.jsx)(ee,{rootStore:o,blockValue:t})})}function se(e){let{blockValue:t,rootStore:o}=e;return(0,K.jsx)("ul",{style:{margin:0,paddingLeft:28},children:(0,K.jsx)("li",{children:(0,K.jsx)(ee,{rootStore:o,blockValue:t})})})}function de(e){let{blockValue:t,rootStore:o}=e;return(0,K.jsx)("ol",{style:{margin:0,paddingLeft:28},children:(0,K.jsx)("li",{children:(0,K.jsx)(ee,{rootStore:o,blockValue:t})})})}function ce(e){let{blockValue:t,rootStore:o}=e;return(0,K.jsxs)("div",{style:{display:"inline-flex"},children:[(0,K.jsx)(te,{rootStore:o,blockValue:t}),(0,K.jsx)(ee,{rootStore:o,blockValue:t})]})}function ue(e){let{blockValue:t,rootStore:o,blockPreviewLocation:i}=e;const n=function(e){var t;const o=null==e||null===(t=e.properties)||void 0===t?void 0:t.source;return c().MO(o)}(t);if(!n)return null;const l=(0,K.jsx)(oe,{rootStore:o,blockValue:t});return"comments_sidebar"===i?(0,K.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,K.jsx)(q,{src:n,permissionRecord:{table:v().ev,id:t.id}}),l&&(0,K.jsx)("div",{style:{marginBottom:4},children:l})]}):(0,K.jsxs)(r.Fragment,{children:[(0,K.jsx)("div",{style:{display:"flex"},children:(0,K.jsx)("div",{style:{marginTop:4,marginBottom:4},children:(0,K.jsx)(q,{src:n,permissionRecord:{table:v().ev,id:t.id}})})}),l&&(0,K.jsx)("div",{style:{marginBottom:4},children:l})]})}function pe(e){return function(e){return"comments_sidebar"===e}(e)?{marginTop:0,marginBottom:0}:void 0}function xe(e){var t;let{blockValue:o,created:r,blockPreviewLocation:i,deleted:n,rootStore:s,getRecordModel:c}=e;const p=(0,a().DP)(),x=null==o||null===(t=o.format)||void 0===t?void 0:t.page_icon,m=(0,l().K8)((()=>{const e=b().Bj6.fromBlock(o).getRenderTitleTextValue({getRecordModel:c});return void 0!==e&&0!==e.length}),[o,c]);return(0,K.jsxs)(u().A,{title:N(d().xd.callout),theme:p,created:r,style:pe(i),deleted:n,children:[void 0!==x&&(0,K.jsx)($,{icon:x,rootStore:s,blockValue:o}),m&&(0,K.jsx)(ee,{rootStore:s,blockValue:o})]})}function me(e){let{blockValue:t,blockPreviewLocation:o,created:r,deleted:i,rootStore:n}=e;const l=(0,a().DP)();return(0,K.jsx)(u().A,{title:N(d().xd.quote),theme:l,style:pe(o),created:r,deleted:i,children:(0,K.jsx)(ee,{rootStore:n,blockValue:t})})}function he(e){let{blockValue:t,blockPreviewLocation:o,created:r,rootStore:i}=e;const n=(0,a().DP)();return(0,K.jsx)(u().A,{title:N(d().xd.factory),theme:n,style:pe(o),created:r,deleted:!0,children:(0,K.jsx)(ee,{rootStore:i,blockValue:t})})}function fe(e){let{automation:t,blockPreviewLocation:o,created:r,deleted:i}=e;const n=(0,a().DP)(),[s,c]=(0,l().K8)((()=>[t.getActionIds(),t.getProperties()]),[t]),p=(0,a().IS)((()=>({editBoxChildren:{...w().RC,margin:0},workflow:{...w().RC,marginBlock:"8px 0"},wrap:{overflow:"hidden"}})),[]);return(0,K.jsxs)("div",{style:p.wrap,children:[(0,K.jsx)(u().A,{title:N(d().xd.button),theme:n,style:pe(o),created:r,deleted:i,children:(0,K.jsx)("p",{style:p.editBoxChildren,children:(null==c?void 0:c.name)??(0,K.jsx)(_().sA,{defaultMessage:"Untitled",id:"edit.buttonBlock.defaultTitle"})})}),(0,K.jsx)("p",{style:p.workflow,children:(0,K.jsx)(_().sA,{defaultMessage:"{numberOfActions, plural, one {{numberOfActions} workflow step} other {{numberOfActions} workflow steps}}",id:"edit.buttonBlock.actionCount",values:{numberOfActions:s.length}})})]})}function ge(e){let{blockValue:t,blockPreviewLocation:o,created:r,deleted:i,rootStore:n}=e;const l=(0,a().DP)();return(0,K.jsx)(u().A,{title:N(d().xd.equation),theme:l,style:pe(o),created:r,deleted:i,children:(0,K.jsx)(ee,{rootStore:n,blockValue:t})})}function be(e){let{blockValue:t,blockPreviewLocation:o,created:r,deleted:n,rootStore:l}=e;const s=(0,a().DP)();return(0,K.jsx)(u().A,{title:Z(t),theme:s,style:pe(o),created:r,deleted:n,children:(0,K.jsx)("span",{style:{fontFamily:w().vc(i().locale).mono,fontSize:12,tabSize:2},children:(0,K.jsx)(ee,{rootStore:l,blockValue:t})})})}function ve(e){let{blockValue:t,type:o,blockPreviewLocation:i,created:n,deleted:l,rootStore:d}=e;const c=(0,_().tz)(),p=(0,a().DP)();return(0,K.jsxs)(r.Fragment,{children:[(0,K.jsx)(u().A,{title:s().Do(c,o),theme:p,style:pe(i),created:n,deleted:l,children:(0,K.jsx)(J,{blockValue:t})}),(0,K.jsx)("div",{style:{marginBottom:4},children:(0,K.jsx)(oe,{rootStore:d,blockValue:t})})]})}function ye(e){let{blockValue:t,blockPreviewLocation:o,created:r,rootStore:i}=e;const n=(0,a().DP)(),l=Q(t,"title"),s=(0,a().IS)((()=>({bookmark:{display:"flex",flexDirection:"column"},captionBox:{marginBottom:l?4:0}})),[l]),c=l&&(0,K.jsx)(u().A,{title:N(d().xd.bookmark),theme:n,style:pe(o),created:r,children:(0,K.jsx)(ee,{rootStore:i,blockValue:t})});return(0,K.jsxs)("div",{style:s.bookmark,children:[c,Q(t,"caption")&&(0,K.jsx)("div",{style:s.captionBox,children:(0,K.jsx)(oe,{rootStore:i,blockValue:t})})]})}function je(e){let{blockValue:t,created:o,blockPreviewLocation:r,deleted:i}=e;const n=(0,a().DP)(),d=(0,l().K8)((()=>b().Bj6.fromBlock(t)),[t]),c=(0,l().K8)((()=>s().EH(C().A.getIntl(),d,b().b4_.fromRecordMap(M().A.getIntegrationsAsRecordMap()))),[d]);return(0,K.jsx)(u().A,{title:(0,K.jsx)(_().sA,{...s().MC.editLabel}),theme:n,created:o,style:pe(r),deleted:i,children:c})}function Se(e){let{blockValue:t,columnID:o,rootStore:r}=e;const i=(0,a().DP)(),s=(0,n().v3)(),d=(0,l().K8)((()=>W(t,o)),[t,o]),c=(0,l().K8)((()=>d&&d.length>0?V().qO({environment:s,cellValue:d,spaceId:t.space_id,parentStore:r,theme:i}):(0,K.jsx)("span",{children:"Â "})),[d,t,r,i,s]);return(0,K.jsx)("td",{style:{border:`1px solid ${i.tableDividerColor}`,height:"100%"},children:(0,K.jsx)("div",{style:{overflowWrap:"break-word",overflow:"hidden",textOverflow:"ellipsis",width:"max-content",maxWidth:120,verticalAlign:"top",lineHeight:w().K_.UIRegular.desktop,padding:4},children:c})})}function ke(e){let{blockValue:t,deleted:o,blockPreviewLocation:r,created:i,rootStore:n}=e;const l=(0,a().DP)(),s=(0,x().v)(b().Bj6.fromBlock(t));return s&&s.title?(0,K.jsx)("div",{children:(0,K.jsx)(u().A,{title:(0,K.jsx)(_().sA,{defaultMessage:"Google Drive file",id:"edit.googleDriveFile.label"}),created:!o,deleted:o,theme:l,style:pe(r),children:s.title})}):t.content?(0,K.jsx)(ve,{blockPreviewLocation:r,created:i,deleted:o,rootStore:n,blockValue:t,type:"drive"}):null}function _e(e){let{blockModel:t,rootStore:o,blockValue:i}=e;const n=(0,_().tz)(),a=(0,r.useMemo)((()=>b().b4_.fromGetRecordValueFn(o.getRecordValue)),[o]),s=(0,l().K8)((()=>a({table:v().ev,id:t.id})),[t,a])||t,d=(0,l().K8)((()=>s.getRenderTitleWithPlaceholder({getRecordModel:a,userTimeZone:(0,m().P)(),intl:n})),[s,n,a]),c=(0,l().K8)((()=>{var e;return null==s||null===(e=s.getFormat())||void 0===e?void 0:e.page_icon}),[s]);return(0,K.jsxs)("div",{style:{display:"flex",alignItems:"center",overflow:"hidden"},children:[(0,K.jsx)("div",{style:{paddingRight:6},children:(0,K.jsx)($,{icon:c,rootStore:o,blockValue:i})}),(0,K.jsx)("div",{className:"notranslate",style:{flex:1,textOverflow:"ellipsis",overflow:"hidden"},children:d})]})}function Ae(e){let{collectionModel:t,rootStore:o,blockValue:i}=e;const n=(0,_().tz)(),a=(0,r.useMemo)((()=>b().b4_.fromGetRecordValueFn(o.getRecordValue)),[o]),s=(0,l().K8)((()=>a({table:y().Vl,id:t.id})),[t,a])||t,d=(0,l().K8)((()=>s.getRenderTitleWithPlaceholder({intl:n,getRecordModel:a,userTimeZone:(0,m().P)()})),[s,n,a]),c=(0,l().K8)((()=>s.icon),[s]);return(0,K.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,K.jsx)("div",{style:{paddingRight:4},children:(0,K.jsx)($,{icon:c,rootStore:o,blockValue:i})}),(0,K.jsx)("div",{style:{flex:1},children:d})]})}function we(e){var t,o,i;let{blockValue:n,rootStore:a}=e;const s=(0,r.useMemo)((()=>b().b4_.fromGetRecordValueFn(a.getRecordValue)),[a]),d=(null===(t=n.content)||void 0===t?void 0:t.length)||0,c=(null===(o=n.format)||void 0===o||null===(o=o.table_block_column_order)||void 0===o?void 0:o.length)||0,u=(0,l().K8)((()=>n.content?n.content.map((e=>s({table:n.parent_table,id:e,spaceId:n.space_id}))):[]),[n,s]);if(!d||!c)return null;const p=null===(i=n.format)||void 0===i?void 0:i.table_block_column_order;return(0,K.jsx)("div",{style:{overflow:"scroll"},children:(0,K.jsx)("table",{children:(0,K.jsx)("tbody",{children:u.map((e=>e?(0,K.jsx)("tr",{children:null==p?void 0:p.map((t=>(0,K.jsx)(Se,{rootStore:a,blockValue:e,columnID:t},t)))},e.id):void 0))})})})}function Ce(e){let{blockValue:t,rootStore:o}=e;const i=(0,r.useMemo)((()=>b().b4_.fromGetRecordValueFn(o.getRecordValue)),[o]),n=(0,l().K8)((()=>i({table:t.parent_table,id:t.parent_id,spaceId:t.space_id})),[t,i]),a=(0,l().K8)((()=>{var e;return null==n||null===(e=n.getFormat())||void 0===e?void 0:e.table_block_column_order}),[n]);return t.properties&&0!==(0,A().uv)(t.properties).length&&n?(0,K.jsx)("div",{style:{display:"flex",alignItems:"stretch",margin:4},children:(0,K.jsx)("table",{children:(0,K.jsx)("tr",{children:null==a?void 0:a.map((e=>(0,K.jsx)(Se,{rootStore:o,blockValue:b().Bj6.fromBlock(t),columnID:e},e)))})})}):null}},175977:(e,t,o)=>{o.d(t,{A:()=>n});o(296540);var r=()=>o(284371),i=o(474848);function n(e){const{children:t,textColor:o,backgroundColor:n,rightMargin:l,strikethrough:a}=e;return(0,i.jsx)("div",{style:{backgroundColor:n,color:o,display:"inline-flex",alignItems:"center",fontSize:12,height:18,paddingLeft:8,paddingRight:8,borderRadius:4,marginRight:l?4:0,textDecoration:a?"line-through":void 0},children:(0,i.jsx)("span",{style:{...r().RC},children:t})})}},247123:(e,t,o)=>{o.d(t,{QU:()=>f,f2:()=>h,r6:()=>g});o(581454),o(296540);var r=()=>o(56366),i=()=>o(401497),n=()=>o(68263),l=()=>o(959013),a=()=>o(534177),s=()=>o(284371),d=()=>o(663590),c=()=>o(756279),u=()=>o(351360),p=()=>o(2143),x=()=>o(921194),m=o(474848);function h(e){const{openState:t}=e,{mainEditorCurrentBlockStore:o,currentSpaceStore:n}=(0,r().K8)((()=>{const{mainEditorCurrentBlockStore:e,currentSpaceStore:t}=u().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:t}}),[]),l=(0,r().K8)((()=>(0,d().FI)()),[]),a=(0,i().IS)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290,...l?{border:`1px solid ${e.lightDividerColor}`,borderRadius:6,paddingTop:8,paddingLeft:12,paddingRight:12,paddingBottom:12,marginTop:15,marginBottom:5,marginLeft:-12,marginRight:-12}:{}},editContainer:{marginTop:2,marginBottom:2,color:e.regularTextColor}})),[l]);if(!o||!n)return null;const s=Date.now();return(0,m.jsx)(p().H,{type:c().A.Y,style:a.scroller,children:t.permissionChanges.map(((e,t)=>{let[r,i]=e;const l={timestamp:s,space_id:n.id,type:"permission-changed",permission_data:{before:r,after:i}};return(0,m.jsx)("div",{style:a.editContainer,children:(0,m.jsx)(x().A,{rootStore:o,edit:l})},`${r.type}-${t}`)}))})}function f(e,t){return["remove","restrict"].includes(e.type)?t?(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccessV2",defaultMessage:"Change and unlink"}):(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccess",defaultMessage:"Restrict access"}):t?(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.actionButton.relink",defaultMessage:"Relink"}):"restoreTeamPermissions"===e.type?(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restoreTeamPermissions",defaultMessage:"Reset Permissions"}):(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restoreAccess",defaultMessage:"Restore access"})}function g(e,t){switch(e.type){case"remove":return t?(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.restrict.description",defaultMessage:"Are you sure you want to remove this {permissionGroup} and restrict access? This page will no longer inherit share settings from the parent page.",values:{permissionGroup:b(e)}});case"restrict":return t?(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.remove.description",defaultMessage:"Are you sure you want to change this role and restrict access? This page will no longer inherit share settings from the parent page."});case"restore":return t?(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):e.permissionChanges.length>0?(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.restore.description",defaultMessage:"Are you sure you want to restore access? This will inherit the following permissions from the parent page:"}):(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.restoreNoChanges.description",defaultMessage:"Are you sure you want to restore access?"});case"restoreTeamPermissions":return t?(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{style:{fontWeight:s().Wy.semibold,marginBottom:4},children:(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.mainDescription",defaultMessage:"Are you sure you want to reset permissions to match the teamspace defaults?"})}),(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.warningMessage",defaultMessage:"Everyone else who is not part of the teamspace will lose access, including guests."})]});default:throw a().HB(e)}}function b(e){return(0,n().B2)(e.permissionItem)?(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.user",defaultMessage:"user"}):(0,n().Ds)(e.permissionItem)?(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.group",defaultMessage:"group"}):(0,n().Lg)(e.permissionItem)?(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.space",defaultMessage:"workspace"}):(0,m.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.generic",defaultMessage:"permission"})}},271003:(e,t,o)=>{o.d(t,{A:()=>f});o(296540);var r=()=>o(56366),i=()=>o(401497),n=()=>o(970013),l=()=>o(713998),a=()=>o(438632),s=()=>o(442277),d=()=>o(179034),c=()=>o(919709),u=()=>o(534177),p=()=>o(508496),x=()=>o(630116),m=()=>o(890022),h=o(474848);function f(e){const t=n().QP(e.propertySchema);switch(t){case"text":return(0,h.jsx)(g,{...e});case"relation":return(0,h.jsx)(b,{propertySchema:e.propertySchema,beforeValue:e.beforeValue,afterValue:e.afterValue,rootStore:e.rootStore});case"arrow":return(0,h.jsx)(v,{...e});default:(0,u().HB)(t)}}function g(e){const t={value:a().yR({before:e.beforeValue.value,after:e.afterValue.value,insertionAnnotation:[c().Ifu.Inserted],deletionAnnotation:[c().Ifu.Deleted]}),spaceId:e.beforeValue.spaceId};return(0,h.jsx)(m().A,{value:t,propertySchema:e.propertySchema,rootStore:e.rootStore})}function b(e){const{beforeValue:t,afterValue:o,propertySchema:i,rootStore:n}=e,a=(0,r().K8)((()=>l().tH({beforeValue:t.value,afterValue:o.value,propertySchema:i,getRecordModel:n.getRecordModel,getBlockTitle:e=>x().Bv.createChildStore(n,{table:d().ev,id:e.id}).getPropertyValue("title"),includeDeletedRelations:p().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:p().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:p().default.checkGate({gateName:"relations_show_no_access"})})),[t,o,i,n]);return(0,h.jsx)(m().A,{value:{value:a,spaceId:t.spaceId},propertySchema:{type:"title",name:"Title"},rootStore:n})}function v(e){const t=(0,i().IS)((()=>({arrowDiffWrap:{display:"inline-flex",alignItems:"center",overflow:"hidden",flexWrap:"wrap",rowGap:6}})),[]);return(0,h.jsxs)("div",{style:t.arrowDiffWrap,children:[(0,h.jsx)(m().A,{value:e.beforeValue,propertySchema:e.propertySchema,rootStore:e.rootStore}),(0,h.jsx)(y,{}),(0,h.jsx)(m().A,{value:e.afterValue,propertySchema:e.propertySchema,rootStore:e.rootStore})]})}function y(){const e=(0,i().IS)((e=>({container:{padding:"0px 8px"},icon:{width:15,height:15,fill:e.mediumIconColor}})),[]);return(0,h.jsx)("div",{style:e.container,children:(0,s().B)(e.icon)})}},313028:(e,t,o)=>{o.d(t,{A:()=>n});o(296540);var r=()=>o(100622),i=o(474848);const n=function(e){const{children:t,created:o,deleted:n,style:l,theme:a,title:s}=e,d={boxShadow:`inset 0 0 0 1px ${a.regularDividerColor}`,borderRadius:4,padding:"6px 8px",fontSize:14,overflow:"hidden",flexGrow:1,marginTop:4,marginBottom:4,...o&&{color:r().Ay.diffTextColor,backgroundColor:r().Ay.diffBackground},...l},c={fontSize:12,lineHeight:1,marginTop:2,marginBottom:4,color:a.regularTextColor};return(0,i.jsxs)("div",{style:d,children:[(0,i.jsx)("div",{style:c,children:s}),(0,i.jsx)("div",{style:{...n&&{opacity:.4,marginBottom:6,textDecoration:"line-through"}},children:t})]})}},412532:(e,t,o)=>{o.d(t,{l:()=>i});o(296540);const r={viewBox:"0 0 16 16",svg:(0,o(474848).jsx)("path",{d:"M13.165 12.75a.8.8 0 0 0 .69-1.203L8.692 2.693a.8.8 0 0 0-1.382 0l-5.165 8.854a.8.8 0 0 0 .691 1.203z"})},i=(0,o(340498).wt)("arrowCaretUpFillSmall",r)},438632:(e,t,o)=>{o.d(t,{PD:()=>c,cb:()=>d,yR:()=>u});o(16280),o(944114),o(898992),o(354520),o(803949),o(581454);var r=o.n(o(625473)),i=o.n(o(716471)),n=()=>o(496603),l=()=>o(534177),a=()=>o(634201),s=()=>o(919709);let d=function(e){return e[e.removed=-1]="removed",e[e.added=1]="added",e[e.same=0]="same",e}({});function c(e,t){const o=new(i())({timeout:2,editCost:6}),r=o.main(t,e);return o.cleanupSemantic(r),r}function u(e){const{before:t,after:o,isIncompleteAfter:i,insertCursor:u}=e,p={count:0,encoding:{},decoding:{},annotationEncoding:{},annotationDecoding:{}},x=e=>{const t=p.encoding[e];if(t)return t;{const t=String.fromCharCode(p.count);return p.count++,p.encoding[e]=t,p.decoding[t]=e,t}},m=e=>{const t=r()(e),o=p.annotationEncoding[t];if(o)return o;{const o=String.fromCharCode(p.count);return p.count++,p.annotationEncoding[t]=o,p.annotationDecoding[o]=e,o}},h=t=>n().Bq(s().RQ(t).map((t=>{let o=[];o="word"===e.mode||"wordUnderlineFinal"===e.mode?t[0].split(" ").map(((e,t)=>`${0===t?"":" "}${e}`)):a().PE(t[0]);const r=o.map(x);if(s().qXl(t)){const e=s().uPN(t),o=s().jhx(e);o&&(r[0]=m({type:"mention",value:o}),e.forEach((e=>{s().iGj(e)||s().gir(e)||s().lfl(e)||(r.unshift(m({type:"start",value:e})),r.push(m({type:"end",value:e})))})))}else if(s().GiG(t)){const e=s().uPN(t),o=s().j1D(e);if(o){r[0]=m({type:"equation",value:o});for(const t of e)s().iGj(t)||s().gir(t)||s().lfl(t)||(r.unshift(m({type:"start",value:t})),r.push(m({type:"end",value:t})))}}else if(s().BEe(t)){s().uPN(t).forEach((e=>{r.unshift(m({type:"start",value:e})),r.push(m({type:"end",value:e}))}))}return r}))).join("");if(p.count>65535)throw new Error("This string has way too many different characters.");const f=c(h(o),h(t)),g=[];let b=[],v=0;const y=i?n().Kl(f,(e=>0===e[0]||1===e[0])):0;let j=!1;const S=e.insertionAnnotation,k=e.deletionAnnotation;return f.forEach((t=>{let[o,r]=t;r.split("").forEach((t=>{if(p.decoding[t]){const r=p.decoding[t];o===d.added?g.push([r,[...b,"wordUnderlineFinal"===e.mode?e.underlineAnnotation:S]]):o===d.removed&&(!i||v<=y)?"wordUnderlineFinal"!==e.mode&&g.push([r,[...b,k]]):(i&&u&&!j&&v===y+1&&(j=!0,g.push(["",[["tc"]]])),g.push([r,b]))}else{const r=p.annotationDecoding[t];if(o===d.added)if("mention"===r.type)g.push([s().Sj,[...b,"wordUnderlineFinal"===e.mode?e.underlineAnnotation:S,r.value]]);else if("start"===r.type)b=[...b,r.value];else if("end"===r.type)b=b.filter((e=>!n().n4(e,r.value)));else if("equation"===r.type){const e=s().U35(r.value),t=s().G0H(e,[...b,S]);g.push(t)}else(0,l().HB)(r);else if(o===d.removed){if("mention"===r.type)"wordUnderlineFinal"!==e.mode&&g.push([s().Sj,[...b,k,r.value]]);else if("equation"===r.type){const e=s().U35(r.value),t=s().G0H(e,[...b,k]);g.push(t)}}else if(o===d.same)if("mention"===r.type)g.push([s().Sj,[...b,r.value]]);else if("start"===r.type)b=[...b,r.value];else if("end"===r.type)b=b.filter((e=>!n().n4(e,r.value)));else if("equation"===r.type){const e=s().U35(r.value),t=s().G0H(e,b);g.push(t)}else(0,l().HB)(r)}})),i&&(v+=1)})),s().__s(g)}},442277:(e,t,o)=>{o.d(t,{B:()=>i});o(296540);var r=o(474848);const i=(0,o(340498).wt)("arrowRightSmaller",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M15.383 8.352a.877.877 0 01-.274.64l-5.156 5.14a.864.864 0 01-.617.266.831.831 0 01-.602-.234.795.795 0 01-.234-.586c0-.12.02-.232.063-.336a.912.912 0 01.187-.273l1.75-1.766 2.914-2.656.274.5-2.711.156H1.484c-.26 0-.471-.078-.632-.234a.851.851 0 01-.235-.617c0-.256.078-.461.235-.618a.856.856 0 01.632-.242h9.493l2.71.164-.273.508L10.5 5.5 8.75 3.727a.946.946 0 01-.188-.266.917.917 0 01-.062-.344c0-.234.078-.43.234-.586a.831.831 0 01.602-.234.79.79 0 01.328.07c.104.047.203.117.297.211l5.148 5.133a.877.877 0 01.274.64z"})})},646614:(e,t,o)=>{o.d(t,{V:()=>f});var r=o(296540),i=()=>o(56366),n=()=>o(310442),l=()=>o(824862),a=()=>o(798880),s=()=>o(53528),d=()=>o(931075),c=()=>o(959013),u=()=>o(534177),p=()=>o(630116),x=()=>o(427636),m=()=>o(994006),h=o(474848);function f(e){const{textValue:t,rootStore:o}=e,f=(0,c().tz)(),g=(0,r.useMemo)((()=>{const e=(0,d().U1)(t);return e?d().B2(e):{type:"none"}}),[t]),b=(0,i().K8)((()=>{if("none"!==g.type)return p().sk.createChildStore(o,g.actorPointer)}),[g,o]);if("none"===g.type)return(0,h.jsx)("span",{children:f.formatMessage(d().nl.none)});let v;return void 0===b?v=(0,h.jsx)(m().A,{userStore:void 0,inline:!0,style:{display:"inline-flex",alignItems:"baseline"},avatarSize:18,avatarMarginRight:3}):b.table===a().oo?v=(0,h.jsx)(m().A,{userStore:b,inline:!0,style:{display:"inline-flex",alignItems:"baseline"},avatarSize:18,avatarMarginRight:3}):b.table===l().GP?v=(0,h.jsx)(x().A,{botStore:b,style:{display:"inline-flex",alignItems:"baseline"}}):b.table===n().yj?v=(0,h.jsx)(m().A,{userStore:void 0,inline:!0,style:{display:"inline-flex",alignItems:"baseline"},avatarSize:18,avatarMarginRight:3}):(0,u().HB)(b),"verified"===g.type&&g.isIndefinite?(0,h.jsx)("div",{children:f.formatMessage(d().nl.verifiedIndefinitely,{actor:v})}):(0,h.jsx)("div",{children:f.formatMessage(d().nl.verifiedUntil,{actor:v,datetime:s().T2({dateTime:g.dateTimeRange.end,intl:f,displayInUserTimezone:!0})})})}},890022:(e,t,o)=>{o.d(t,{A:()=>T});o(944114),o(898992),o(672577),o(803949),o(581454);var r=o(296540),i=()=>o(484714),n=()=>o(56366),l=()=>o(401497),a=()=>o(787626),s=()=>o(713998),d=()=>o(597777),c=()=>o(831310),u=()=>o(834368),p=()=>o(992437),x=()=>o(813690),m=()=>o(179034),h=()=>o(824862),f=()=>o(161479),g=()=>o(798880),b=()=>o(919709),v=()=>o(959013),y=()=>o(100622),j=()=>o(496603),S=()=>o(534177),k=()=>o(284371),_=()=>o(712030),A=()=>o(921855),w=()=>o(963589),C=()=>o(630116),V=()=>o(427636),M=()=>o(994006),P=()=>o(654734),R=()=>o(175977),I=()=>o(646614),B=o(474848);function T(e){const{propertySchema:t,value:o,rootStore:l,disableStyleAnnotations:a,disableInsertedDeletedAnnotations:d,disableDateStyleAnnotations:c,disableSuggestionAnnotations:u}=e,h=(0,i().v3)(),f=(0,r.useCallback)((e=>C().Bv.createChildStore(l,{table:m().ev,id:e})),[l]),g=(0,r.useMemo)((()=>p().b.fromMonomorphicFunctionUnsafe((e=>f(e.id).getRecordModel(e)),x().xb.fromMonomorphicFunctionUnsafe((e=>f(e.id).getRecordValue(e))))),[f]),b=(0,r.useCallback)((e=>{const t=f(e.id).getValue();return t&&(0,s().yQ)(t,"title")||[]}),[f]),v=(0,w().X)("relations_show_deleted"),y=(0,w().X)("relations_show_invalid_collection"),k=(0,w().X)("relations_show_no_access"),_=(0,r.useCallback)((()=>{if("relation"===t.type)return s().bG({relationValue:s().n(o.value),getRecordModel:g,propertySchema:t,includeDeleted:v,includeInvalidCollection:y,includeNoAccess:k})}),[t,o.value,g,v,y,k]),A=(0,r.useCallback)((()=>{if("text"===t.type||"title"===t.type)return o.value;if("relation"===t.type){const e=_();if(!e)return;const t=e.map(b);return j().Bq(t)}}),[t,o.value,b,_]);(0,r.useEffect)((()=>{"text"!==t.type&&"title"!==t.type&&"relation"!==t.type||h.KatexStore.loadIfNeeded(A)}),[h,t,A]);const V=(0,n().K8)(_,[_]),M=t.type;return"checkbox"!==M&&0===o.value.length?(0,B.jsx)(X,{}):"text"===M?(0,B.jsx)(Z,{value:o,disableStyleAnnotations:!!a,disableInsertedDeletedAnnotations:!!d,disableDateStyleAnnotations:!!c,disableSuggestionAnnotations:!!u,rootStore:l}):"checkbox"===M?(0,B.jsx)(U,{value:o}):"multi_select"===M?(0,B.jsx)(Y,{propertySchema:t,value:o,rootStore:l}):"select"===M?(0,B.jsx)(J,{propertySchema:t,value:o,rootStore:l}):"status"===M?(0,B.jsx)(ee,{propertySchema:t,value:o,rootStore:l}):"person"===M?(0,B.jsx)($,{value:o,propertySchema:t,rootStore:l}):"number"===M?(0,B.jsx)(H,{value:o}):"date"===M?(0,B.jsx)(z,{propertySchema:t,value:o}):"url"===M?(0,B.jsx)(F,{value:o}):"file"===M?(0,B.jsx)(N,{value:o}):"email"===M?(0,B.jsx)(W,{value:o}):"phone_number"===M?(0,B.jsx)(E,{value:o}):"title"===M?(0,B.jsx)(Z,{value:o,disableStyleAnnotations:!!a,disableInsertedDeletedAnnotations:!!d,disableDateStyleAnnotations:!!c,disableSuggestionAnnotations:!!u,rootStore:l}):"created_time"===M?(0,B.jsx)(z,{propertySchema:t,value:o}):"created_by"===M?(0,B.jsx)($,{value:o,propertySchema:t,rootStore:l}):"relation"===M?(0,B.jsx)(L,{relationValue:V,getPageTitle:b,rootStore:l,disableStyleAnnotations:!!a,disableInsertedDeletedAnnotations:!!d,disableDateStyleAnnotations:!!c,disableSuggestionAnnotations:!!u}):"auto_increment_id"===M?(0,B.jsx)(H,{value:o}):"verification"===M?(0,B.jsx)(O,{value:o,rootStore:l}):"formula"===M||"rollup"===M||"last_edited_by"===M||"last_edited_time"===M||"last_visited_time"===M||"button"===M||"location"===M||"geo_point"===M?null:void(0,S().HB)(M)}const D=5;function L(e){const{rootStore:t,getPageTitle:o,disableStyleAnnotations:n,disableInsertedDeletedAnnotations:a,disableDateStyleAnnotations:s,disableSuggestionAnnotations:d,relationValue:c}=e,u=(0,i().v3)(),p=(0,l().DP)(),x=(0,r.useCallback)((e=>{const{value:o,pointer:r}=e;return A().S5({environment:u,textValue:{value:o,spaceId:(0,f().e)(r.spaceId)},parentStore:t,disableHover:!0,disableStyleAnnotations:n,disableInsertedDeletedAnnotations:a,disableDateStyleAnnotations:s,disableSuggestionAnnotations:d,disabled:!0,theme:p,emojiType:(0,_().FN)(u),katex:u.KatexStore.getKatex(),formulaValueTypes:[]})}),[u,t,p,n,a,s,d]);if(!c)return null;const m=c.length>D,h=m?c.slice(0,D):c;return(0,B.jsxs)("div",{children:[h.map(((e,t)=>(0,B.jsx)(K,{pointer:e,renderText:x,getPageTitle:o},t))),m&&(0,B.jsx)("div",{style:{maxWidth:180,color:y().Ay.mediumTextColor},children:(0,B.jsx)(v().sA,{defaultMessage:"{leftoverCountNumber} more",id:"editProperty.relationEditedProperties.moreCount.label",values:{leftoverCountNumber:c.length-D}})})]})}function K(e){const{pointer:t,renderText:o,getPageTitle:r}=e,i=(0,n().K8)((()=>o({value:r(t),pointer:t})),[t,o,r]);return(0,B.jsx)("div",{style:{maxWidth:180,...k().RC},children:i})}function U(e){let{value:t}=e;const o=s().wu(t.value);return(0,B.jsx)("div",{style:{width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,backgroundColor:o?y().Ay.blue:y().Ay.transparent},children:o?(0,c().o)({fill:y().Ay.white,width:12,height:12}):(0,u().K)()})}function H(e){let{value:t}=e;const o=s().Me(t.value);return(0,B.jsx)("div",{children:o})}function z(e){let{propertySchema:t,value:o}=e;const r=t,i=(0,a().b)(o.value);return(0,B.jsx)(P().A,{value:i,dateFormat:r.date_format||d().vz,timeFormat:r.time_format||d().CE,displayInUserTimezone:!0})}function F(e){let{value:t}=e;return(0,B.jsx)(B.Fragment,{children:b().k4p(t.value)})}function N(e){let{value:t}=e;const o=s().pJ(t.value);return(0,B.jsx)("div",{style:{display:"inline-flex"},children:o.map(((e,t,o)=>{const r=o.length-1===t;return(0,B.jsx)(R().A,{rightMargin:!r,children:e.url},t)}))})}function W(e){let{value:t}=e;const o=b().k4p(t.value);return(0,B.jsx)("div",{children:o})}function E(e){let{value:t}=e;const o=b().k4p(t.value);return(0,B.jsx)("div",{children:o})}function O(e){let{value:t,rootStore:o}=e;return(0,B.jsx)(I().V,{textValue:t.value,rootStore:o})}function G(e){let{userId:t,rootStore:o,isLast:r}=e;const i=(0,n().K8)((()=>function(e,t){return C().LU.createChildStore(t,{table:g().oo,id:e}).getValue()}(t,o)),[t,o]);return(0,B.jsx)("div",{style:{marginTop:4,marginRight:r?0:8},children:(0,B.jsx)(M().A,{userValue:i,inline:!0,avatarSize:18,style:{fontSize:12},avatarShouldShowShadow:!0})})}function q(e){let{isLast:t,botId:o,rootStore:i}=e;const n=(0,r.useMemo)((()=>function(e,t){return C().vK.createChildStore(t,{table:h().GP,id:e})}(o,i)),[o,i]);return(0,B.jsx)("div",{style:{marginTop:4,marginRight:t?0:8},children:(0,B.jsx)(V().A,{botStore:n})})}function $(e){let{value:t,propertySchema:o,rootStore:r}=e;const i=s().e5({textValue:t.value,propertySchema:o,blockCreatorPointer:void 0}),n=[];return i.forEach(((e,t)=>{const o=i.length-1===t;e.table===g().oo?n.push((0,B.jsx)(G,{userId:e.id,rootStore:r,isLast:o},t)):n.push((0,B.jsx)(q,{botId:e.id,rootStore:r,isLast:o},t))})),(0,B.jsx)("div",{style:{display:"inline-flex"},children:n})}function X(){const e=(0,l().DP)();return(0,B.jsx)("div",{style:{color:e.mediumTextColor,fontSize:12},children:(0,B.jsx)(v().sA,{defaultMessage:"Empty",id:"editProperty.emptyProperty.label"})})}function Z(e){let{value:t,disableStyleAnnotations:o,disableInsertedDeletedAnnotations:r,disableDateStyleAnnotations:a,disableSuggestionAnnotations:s,rootStore:d}=e;const c=(0,l().DP)(),u=(0,i().v3)(),p=(0,n().K8)((()=>A().S5({environment:u,textValue:t,parentStore:d,disableStyleAnnotations:o,disableInsertedDeletedAnnotations:r,disableDateStyleAnnotations:a,disableSuggestionAnnotations:s,disableHover:!0,disabled:!0,theme:c,emojiType:(0,_().FN)(u),katex:u.KatexStore.getKatex(),formulaValueTypes:[]})),[u,t,d,c,o,r,a,s]);return(0,B.jsx)("span",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:p})}function Y(e){let{propertySchema:t,value:o,rootStore:r}=e;const i=t.options||[],n=s().yH(o.value);return(0,B.jsx)("div",{style:{display:"inline-flex"},children:n.map(((e,t,n)=>(0,B.jsx)(Q,{token:e,options:i,index:t,arr:n,rootStore:r,value:o},t)))})}function Q(e){let{token:t,options:o,index:r,arr:i,rootStore:a,value:s}=e;const d=(0,l().DP)(),c=(o??[]).find((e=>e.value===t)),u=i.length-1===r,p=(0,y().LD)(d,null==c?void 0:c.color),x=(0,n().K8)((()=>t??A().r4(s.value,a)),[t,s,a]);return(0,B.jsx)(R().A,{...p,rightMargin:!u,children:x})}function J(e){let{propertySchema:t,value:o,rootStore:r}=e;const i=(0,l().DP)(),a=t.options||[],d=s().L3(o.value,a),c=(0,n().K8)((()=>d??A().r4(o.value,r)),[d,o,r]),u=a.find((e=>e.value===d)),p=(0,y().LD)(i,null==u?void 0:u.color);return(0,B.jsx)("div",{style:{display:"inline-flex"},children:(0,B.jsx)(R().A,{...p,children:c})})}function ee(e){let{propertySchema:t,value:o,rootStore:r}=e;const i=(0,l().DP)(),a=t,d=s().BX(o.value,a),c=(0,n().K8)((()=>d??A().r4(o.value,r)),[d,o,r]),u=(a.options??[]).find((e=>e.value===d)),p=(0,y().LD)(i,null==u?void 0:u.color);return(0,B.jsx)("div",{style:{display:"inline-flex"},children:(0,B.jsx)(R().A,{...p,children:c})})}},914398:(e,t,o)=>{o.d(t,{A:()=>l});var r=()=>o(401497),i=()=>o(100622),n=()=>o(284371);function l(){return(0,r().IS)((e=>({wrap:{display:"flex",flexDirection:"column",justifyContent:"center",flexGrow:1,overflow:"hidden",fontSize:14,minHeight:29},label:{fontSize:12,lineHeight:1,paddingTop:8,color:e.lightTextColor},header:{fontWeight:n().Wy.semibold},subHeader:{fontWeight:n().Wy.semibold},subSubHeader:{fontWeight:n().Wy.semibold},permission:{display:"flex",flexDirection:"column",minHeight:28,paddingTop:4,paddingBottom:4},group:{display:"flex",alignItems:"center",minHeight:28,fontSize:14,paddingTop:4,paddingBottom:4},userHeader:{fontSize:12,color:e.mediumTextColor},role:{fontSize:14,whiteSpace:"nowrap"},permissionTypeWrap:{display:"flex",alignItems:"center",fontSize:14,marginRight:6,whiteSpace:"nowrap"},diffWrap:{display:"flex",alignItems:"center"},added:{color:i().Ay.blue,backgroundColor:i().Ay.blueWithAlpha(.14)},deleted:{opacity:.4,marginBottom:6,textDecoration:"line-through"}})),[])}},921194:(e,t,o)=>{o.d(t,{A:()=>pt});var r=o(296540),i=()=>o(56366),n=()=>o(534177),l=(o(581454),()=>o(662303)),a=()=>o(401497),s=()=>o(813206),d=()=>o(612740),c=()=>o(700500),u=()=>o(855826),p=()=>o(713998),x=()=>o(313028),m=()=>o(792071),h=()=>o(179034),f=()=>o(161479),g=()=>o(797809),b=()=>o(919709),v=()=>o(959013),y=()=>o(496603),j=()=>o(284371),S=()=>o(53137),k=()=>o(175499),_=o(474848);const A=(0,o(340498).wt)("historyForward",{viewBox:"0 0 14 14",svg:(0,_.jsx)("polygon",{points:"11.14107 6.25324 5.94392 1.0561 7 0 13.471958 6.47196 14 7 13.471958 7.52804 7 14 5.94392 12.94392 11.14107 7.74676 0 7.74676 1.77635684e-15 6.25324"})});var w=()=>o(138389),C=()=>o(614505);const V=function(e){let{edit:t,formatProperty:o,hideLabel:r}=e;return(0,_.jsx)(P,{edit:t,formatProperty:o,hideLabel:r})||null};function M(e){let{beforeValue:t,afterValue:o,edit:r,hideLabel:i}=e;const n=(0,a().DP)();return t||o?(0,_.jsxs)(_.Fragment,{children:[!i&&(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center",color:n.lightTextColor,fontSize:12,lineHeight:1,marginBottom:8},children:[(0,w().X)({width:12,height:12,marginRight:6}),(0,_.jsx)(v().sA,{id:"editFormatDiff.pageIcon.label",defaultMessage:"Page icon"})]}),(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,_.jsx)(C().A,{disabled:!0,isEmptyPage:!1,size:20,icon:t?{pointer:{table:h().ev,id:r.block_data.before.block_value.id},icon:t}:void 0}),(0,_.jsx)("div",{style:{padding:"0px 8px"},children:A({width:14,height:14,fill:n.mediumIconColor})}),(0,_.jsx)(C().A,{disabled:!0,isEmptyPage:!1,size:20,icon:o?{pointer:{table:h().ev,id:r.block_data.after.block_value.id},icon:o}:void 0})]})]}):null}function P(e){let{edit:t,formatProperty:o,hideLabel:r}=e;if("page_icon"===o){const e=t.block_data.before.block_value.format&&t.block_data.before.block_value.format[o],i=t.block_data.after.block_value.format&&t.block_data.after.block_value.format[o];return(0,_.jsx)(M,{edit:t,beforeValue:e,afterValue:i,hideLabel:r})}if("is_placeholder"===o)return null;(0,n().HB)(o)}var R=()=>o(484714),I=()=>o(416504),B=()=>o(862292),T=()=>o(909470),D=()=>o(645873),L=()=>o(508496),K=()=>o(271003);function U(e){const t=(0,v().tz)();return(0,s().hd)(e,t)}function H(e){const{edit:t,property:o,labeled:r,rootStore:n}=e,l=(0,R().v3)(),a=(0,v().tz)(),{value:s}=(0,D().fJ)(B().T.formulas),d=U(t),c=(0,i().K8)((()=>n.getRecordModel),[n]),u=(0,i().K8)((()=>p().r8({property:o,schema:d,block:m().Bj6.fromBlock(t.block_data.before.block_value),getRecordModel:c,userId:l.currentUser.id,userTimeZone:(0,I().P)(),intl:a,experimentService:L().default,collectionFeatureGates:(0,T().i)(),formulasModule:s})),[t.block_data.before.block_value,l.currentUser.id,c,a,o,d,s]),x=d[o];if(!x)return null;const h=(0,k().De)(t.block_data.before.block_value,o),g=(0,k().De)(t.block_data.after.block_value,o),b=x.type;return u&&"text"!==b&&"title"!==b?(0,_.jsx)(k().vY,{rootStore:e.rootStore,value:{value:g,spaceId:(0,f().e)(t.block_data.after.block_value.space_id)},propertySchema:x,labeled:r},o):(0,_.jsx)(k().RD,{labeled:r,name:x.name,type:x.type,icon:x.icon,children:(0,_.jsx)(K().A,{propertySchema:x,beforeValue:{value:h,spaceId:(0,f().e)(t.block_data.before.block_value.space_id)},afterValue:{value:g,spaceId:(0,f().e)(t.block_data.after.block_value.space_id)},rootStore:e.rootStore})})}var z=()=>o(651124);function F(e){let{edit:t,rootStore:o}=e;const r=m().Bj6.fromBlock(t.block_data.before.block_value),i=(0,z().v)(r),n=t.block_data.after.block_value,l=m().Bj6.fromBlock(n);return i!==(0,z().v)(l)&&"drive"===n.type?(0,_.jsx)(k().Ay,{blockValue:n,rootStore:o}):null}var N=()=>o(914398),W=()=>o(980914);function E(e){let{edit:t,rootStore:o}=e;const r=t.block_data.before.block_value,i=t.block_data.after.block_value,n=s().mP({before:r,after:i}),l=(0,a().IS)((()=>({container:{display:"flex",alignItems:"stretch",flexDirection:"column"}})),[]);return(0,_.jsx)("div",{style:l.container,children:n.map(((e,t)=>(0,_.jsx)(O,{before:r,after:i,property:e,rootStore:o},t)))})}function O(e){let{before:t,after:o,property:r,rootStore:n}=e;const l=(0,R().v3)(),s=(0,a().DP)(),d=t.properties&&r in t.properties?t.properties[r]:void 0,c=o.properties&&r in o.properties?o.properties[r]:void 0,u=(0,N().A)(),p=(0,i().K8)((()=>W().qO({environment:l,cellValue:d,spaceId:t.space_id,parentStore:n,theme:s})),[l,d,t,n,s]),x=(0,i().K8)((()=>W().qO({environment:l,cellValue:c,spaceId:o.space_id,parentStore:n,theme:s})),[l,c,o,n,s]),m=(0,a().IS)((e=>({container:{display:"flex",border:`1px solid ${e.tableDividerColor}`,overflowWrap:"anywhere",width:"max-content",maxWidth:"100%",verticalAlign:"top",lineHeight:j().K_.UIRegular.desktop,padding:4,marginBottom:4},before:{...u.deleted,marginBottom:void 0},historyForwardIcon:{width:12,height:12,fill:e.mediumIconColor,alignSelf:"center",margin:4}})),[u.deleted]);return(0,_.jsxs)("div",{style:m.container,children:[(0,_.jsx)("span",{style:m.before,children:p}),d&&c&&A(m.historyForwardIcon),(0,_.jsx)("span",{style:u.added,children:x})]})}function G(e){let{blockValue:t,rootStore:o}=e;const r=(0,N().A)(),i=(0,_.jsx)(k().Ay,{rootStore:o,blockValue:t,deleted:!0});if(i)switch(t.type){case c().xd.quote:case c().xd.video:case c().xd.code:case c().xd.equation:case c().xd.file:case c().xd.bookmark:case c().xd.factory:return(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{style:r.label,children:(0,_.jsx)(v().sA,{defaultMessage:"Deleted",id:"edit.blockDeletedEditStyles.factoryLabel"})}),(0,_.jsx)("div",{style:r.wrap,children:i})]});case c().xd.table:return null;case c().xd.tableRow:return t.properties&&(0,n().uv)(t.properties).length>0?(0,_.jsx)("div",{style:{...r.wrap,...r.deleted},children:i}):null;default:return(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{style:r.label,children:(0,_.jsx)(v().sA,{defaultMessage:"Deleted",id:"edit.blockDeletedEditStyles.defaultLabel"})}),(0,_.jsx)("div",{style:{...r.wrap,...r.deleted},children:i})]})}return null}function q(e){const t=(0,N().A)();return(0,_.jsx)("div",{style:t.wrap,children:(0,_.jsx)(pe,{...e})})}function $(e){let{blockValue:t,rootStore:o}=e;const r=(0,N().A)(),i=(0,_.jsx)(k().Ay,{blockValue:t,rootStore:o,created:!0});if(i)switch(t.type){case c().xd.quote:case c().xd.video:case c().xd.code:case c().xd.equation:case c().xd.file:case c().xd.bookmark:case c().xd.factory:return(0,_.jsx)("div",{style:r.wrap,children:i});case c().xd.table:return null;case c().xd.tableRow:return t.properties&&(0,n().uv)(t.properties).length>0?(0,_.jsx)("div",{style:{...r.wrap,...r.added},children:i}):null;default:return(0,_.jsx)("div",{style:{...r.wrap,...r.added},children:i})}return null}function X(e){const t=(0,a().DP)(),o=(0,v().tz)(),{edit:i,type:n,rootStore:l}=e,s=ye(i,"source")&&(0,_.jsxs)(x().A,{title:d().Do(o,n),theme:t,children:[(0,_.jsx)(je,{blockValue:i.block_data.after.block_value}),(0,_.jsx)(H,{rootStore:l,edit:i,property:"source",labeled:!1})]});return(0,_.jsxs)(r.Fragment,{children:[s,(0,_.jsx)("div",{style:{marginBottom:s?4:0},children:(0,_.jsx)(Z,{edit:i,rootStore:l})})]})}function Z(e){const{edit:t,rootStore:o}=e;return ye(t,"caption")?(0,_.jsx)(H,{rootStore:o,edit:t,property:"caption",labeled:!1}):null}function Y(e){const{edit:t}=e,o=(0,a().DP)();return(0,_.jsx)(x().A,{title:(0,_.jsx)(v().sA,{defaultMessage:"Callout",id:"edit.calloutBlockChanged.label"}),theme:o,children:(0,_.jsx)(V,{edit:t,formatProperty:"page_icon",hideLabel:!0})})}function Q(e){const t=(0,N().A)(),{edit:o,rootStore:r}=e;return(0,_.jsx)("div",{style:t.header,children:(0,_.jsx)(ge,{edit:o,rootStore:r})})}function J(e){const t=(0,N().A)(),{edit:o,rootStore:r}=e;return(0,_.jsx)("div",{style:t.subHeader,children:(0,_.jsx)(ge,{edit:o,rootStore:r})})}function ee(e){const t=(0,N().A)(),{edit:o,rootStore:r}=e;return(0,_.jsx)("div",{style:t.subSubHeader,children:(0,_.jsx)(ge,{edit:o,rootStore:r})})}function te(e){const{edit:t,rootStore:o}=e;return(0,_.jsx)(k().lM,{children:(0,_.jsx)(ge,{edit:t,rootStore:o})})}function oe(e){const{edit:t,rootStore:o}=e;return(0,_.jsx)("ul",{style:{margin:0,paddingLeft:28},children:(0,_.jsx)("li",{children:(0,_.jsx)(ge,{edit:t,rootStore:o})})})}function re(e){const{edit:t,rootStore:o}=e;return(0,_.jsx)("ol",{style:{margin:0,paddingLeft:28},children:(0,_.jsx)("li",{children:(0,_.jsx)(ge,{edit:t,rootStore:o})})})}function ie(e){const{edit:t,rootStore:o}=e,r=(0,a().DP)();return(0,_.jsx)(x().A,{title:(0,_.jsx)(v().sA,{defaultMessage:"Quote",id:"edit.quoteBlockChanged.label"}),theme:r,children:(0,_.jsx)(ge,{edit:t,rootStore:o})})}function ne(e){const{edit:t,rootStore:o}=e,r=(0,a().DP)();return(0,_.jsx)(x().A,{title:(0,_.jsx)(v().sA,{defaultMessage:"Template Button",id:"edit.templateButtonBlockChanged.label"}),theme:r,children:(0,_.jsx)(ge,{edit:t,rootStore:o})})}function le(e){const{edit:t,rootStore:o}=e,r=(0,a().DP)();return(0,_.jsx)(x().A,{title:(0,_.jsx)(v().sA,{defaultMessage:"Equation",id:"edit.equationBlockChanged.label"}),theme:r,children:(0,_.jsx)(ge,{edit:t,rootStore:o})})}function ae(e){const{edit:t,rootStore:o}=e;return s().Gc({before:t.block_data.before.block_value,after:t.block_data.after.block_value,property:"checked"})?(0,_.jsxs)("div",{style:{display:"inline-flex"},children:[(0,_.jsx)("div",{style:{marginRight:6,marginTop:3,lineHeight:1},children:(0,_.jsx)(H,{rootStore:o,edit:t,property:"checked",labeled:!1})}),(0,_.jsx)(ge,{edit:t,rootStore:o})]}):(0,_.jsxs)("div",{style:{display:"inline-flex"},children:[(0,_.jsx)(ve,{rootStore:o,blockValue:t.block_data.after.block_value}),(0,_.jsx)(ge,{edit:t,rootStore:o})]})}function se(e){const{edit:t,rootStore:o}=e,r=(0,a().DP)();return s().Gc({before:t.block_data.before.block_value,after:t.block_data.after.block_value,property:"language"})?(0,_.jsxs)(x().A,{title:ke(t.block_data.after.block_value),theme:r,children:[(0,_.jsx)("span",{style:{fontFamily:j().vc(l().locale).mono,fontSize:12,tabSize:2},children:(0,_.jsx)(xe,{rootStore:o,edit:t})}),(0,_.jsx)(H,{rootStore:o,edit:t,property:"language",labeled:!0})]}):(0,_.jsx)(x().A,{title:ke(t.block_data.after.block_value),theme:r,children:(0,_.jsx)("span",{style:{fontFamily:j().vc(l().locale).mono,fontSize:12,tabSize:2},children:(0,_.jsx)(xe,{rootStore:e.rootStore,edit:t})})})}function de(e){const t=(0,N().A)(),{edit:o,rootStore:i}=e,n=Se(o.block_data.before.block_value),l=Se(o.block_data.after.block_value),a=n!==l&&(0,_.jsxs)("div",{style:{marginTop:4,marginBottom:4},children:[(0,_.jsx)("div",{style:{...t.label,marginBottom:4},children:(0,_.jsx)(v().sA,{defaultMessage:"Updated",id:"edit.imageBlockChanged.updatedTitle"})}),l&&(0,_.jsx)(k().R1,{src:l,permissionRecord:{table:h().ev,id:o.block_id}})]});return(0,_.jsxs)(r.Fragment,{children:[a,(0,_.jsx)("div",{style:{marginBottom:a?4:0},children:(0,_.jsx)(Z,{edit:o,rootStore:i})})]})}function ce(e){const{edit:t,rootStore:o}=e,i=(0,a().DP)(),n=(ye(t,"title")||ye(t,"source"))&&(0,_.jsxs)(x().A,{title:(0,_.jsx)(v().sA,{defaultMessage:"Bookmark",id:"edit.bookmarkBlockPropertyChanged.label"}),theme:i,children:[(0,_.jsx)(ge,{edit:t,rootStore:o}),(0,_.jsx)(H,{rootStore:o,edit:t,property:"source",labeled:!0})]});return(0,_.jsxs)(r.Fragment,{children:[n,ye(t,"caption")&&(0,_.jsx)("div",{style:{marginBottom:n?4:0},children:(0,_.jsx)(Z,{edit:t,rootStore:o})})]})}function ue(e){const{edit:t,rootStore:o}=e,r=u().PE({before:t.block_data.before.block_value,after:t.block_data.after.block_value,schema:t.block_schema}),i=s().TW({before:t.block_data.before.block_value,after:t.block_data.after.block_value});return(0,_.jsxs)("div",{children:[r.map(((e,r,i)=>(0,_.jsx)("div",{children:(0,_.jsx)(H,{rootStore:o,edit:t,property:e,labeled:!0})},e))),i.map(((e,o,i)=>{const n=0===r.length&&0===o,l=o===i.length-1;return(0,_.jsx)("div",{style:{marginTop:n?6:10,marginBottom:l?0:6},children:(0,_.jsx)(V,{formatProperty:e,edit:t})},e)}))]})}function pe(e){const{edit:t,rootStore:o}=e;switch(t.block_data.after.block_value.type){case c().xd.text:case c().xd.encryptedText:return(0,_.jsx)(fe,{edit:t,rootStore:o});case c().xd.header:return(0,_.jsx)(Q,{edit:t,rootStore:o});case c().xd.subHeader:return(0,_.jsx)(J,{edit:t,rootStore:o});case c().xd.subSubHeader:return(0,_.jsx)(ee,{edit:t,rootStore:o});case c().xd.toggle:return(0,_.jsx)(te,{edit:t,rootStore:o});case c().xd.bulletedList:return(0,_.jsx)(oe,{edit:t,rootStore:o});case c().xd.numberedList:return(0,_.jsx)(re,{edit:t,rootStore:o});case c().xd.quote:return(0,_.jsx)(ie,{edit:t,rootStore:o});case c().xd.factory:return(0,_.jsx)(ne,{edit:t,rootStore:o});case c().xd.equation:return(0,_.jsx)(le,{edit:t,rootStore:o});case c().xd.toDo:return(0,_.jsx)(ae,{edit:t,rootStore:o});case c().xd.code:return(0,_.jsx)(se,{edit:t,rootStore:o});case c().xd.bookmark:return(0,_.jsx)(ce,{edit:t,rootStore:o});case c().xd.page:return(0,_.jsx)(ue,{edit:t,rootStore:o});case c().xd.collectionView:case c().xd.collectionViewPage:return null;case c().xd.drive:return(0,_.jsx)(F,{rootStore:o,edit:t});case c().xd.tableRow:return(0,_.jsx)(E,{rootStore:o,edit:t});case c().xd.image:return(0,_.jsx)(de,{rootStore:o,edit:t});case c().xd.callout:return(0,_.jsx)(Y,{rootStore:o,edit:t});case c().xd.embed:case c().xd.framer:case c().xd.tweet:case c().xd.gist:case c().xd.maps:case c().xd.invision:case c().xd.video:case c().xd.audio:case c().xd.file:case c().xd.whimsical:case c().xd.miro:case c().xd.abstract:case c().xd.mixpanel:case c().xd.sketch:case c().xd.replit:case c().xd.excalidraw:case c().xd.hex:return(0,_.jsx)(X,{edit:t,type:t.block_data.after.block_value.type,rootStore:o});case c().xd.externalObjectInstance:return(0,_.jsx)(he,{edit:t});default:return null}}function xe(e){let{edit:t,rootStore:o}=e;return(0,_.jsx)(be,{rootStore:o,edit:t,prop:"title",labeled:!1})}function me(e){let{edit:t,diffKey:o}=e;const r=t.block_data[o].block_value,n=(0,i().K8)((()=>m().Bj6.fromBlock(r)),[r]),l=(0,v().tz)(),a=(0,i().K8)((()=>n.isType("external_object_instance")?d().EH(l,n,m().b4_.fromRecordMap(S().A.getIntegrationsAsRecordMap())):null),[n,l]);return(0,_.jsx)(_.Fragment,{children:a})}function he(e){let{edit:t}=e;const o=(0,a().DP)(),r=(0,N().A)();return(0,_.jsxs)(x().A,{title:(0,_.jsx)(v().sA,{...d().MC.editLabel}),theme:o,children:[(0,_.jsx)("div",{style:r.deleted,children:(0,_.jsx)(me,{edit:t,diffKey:"before"})}),(0,_.jsx)("div",{children:(0,_.jsx)(me,{edit:t,diffKey:"after"})})]})}function fe(e){const{edit:t,rootStore:o}=e;return(0,_.jsx)(ge,{edit:t,rootStore:o})}function ge(e){const{edit:t,rootStore:o}=e;return(0,_.jsx)(H,{edit:t,property:"title",labeled:!1,rootStore:o})}function be(e){let{edit:t,prop:o,labeled:r,rootStore:i}=e;const n=U(t)[o],l="block-changed"===t.type?t.block_data.after.block_value:t.block_data.block_value,a=(0,k().De)(l,o);return n?(0,_.jsx)(k().vY,{rootStore:i,value:{value:a,spaceId:(0,f().e)(l.space_id)},propertySchema:n,labeled:r},o):null}function ve(e){let{blockValue:t,rootStore:o}=e;return(0,_.jsx)("div",{style:{marginRight:6,marginTop:3},children:(0,_.jsx)(k().Nn,{rootStore:o,blockValue:t,prop:"checked",labeled:!1})})}function ye(e,t){return!y().n4(e.block_data.before.block_value&&e.block_data.before.block_value.properties&&e.block_data.before.block_value.properties[t],e.block_data.after.block_value&&e.block_data.after.block_value.properties&&e.block_data.after.block_value.properties[t])}function je(e){let{blockValue:t}=e;const o=Se(t);return(0,_.jsx)("span",{style:{wordBreak:"break-word"},children:o})}function Se(e){const t=e&&e.properties&&e.properties.source;return b().k4p(t)}function ke(e){const t=e&&e.properties&&e.properties.language;if(!t)return(0,_.jsx)(v().sA,{defaultMessage:"Code",id:"edit.codeBlockChanged.label"});const o=p().L3(t,g().h5);return(0,_.jsx)(v().sA,{defaultMessage:"Code - {codeLanguage}",values:{codeLanguage:o},id:"edit.codeBlockWithLanguageChanged.label"})}var _e=()=>o(970013),Ae=()=>o(236162),we=()=>o(983650);function Ce(e){const{blockId:t,property:o,blockPreviewLocation:r,highlightCurrentUser:n,rootStore:l,highlightCurrentUserStyle:a}=e,s=(0,R().v3)(),d=(0,N().A)(),u=(0,i().K8)((()=>e.rootStore.getRecordModel),[e.rootStore]),{blockModel:p,associatedCollectionValue:x,blockValue:m}=(0,i().K8)((()=>{const e=u({table:h().ev,id:t});return{blockModel:e,blockValue:null==e?void 0:e.__IM_SORRY__getValue(),associatedCollectionValue:e?(0,Ae().zN)({block:e,getRecordModel:u}):null}}),[t,u]),f=(0,i().K8)((()=>{var e;if(!m)return null;const t=null===(e=m.properties)||void 0===e?void 0:e.title;return{...m,properties:{...m.properties,title:n&&t?(0,we().Eh)({textValue:t,highlightStyle:a??"background_only",currentUserId:s.currentUser.id,getRecordModel:u}):t}}}),[m,s.currentUser.id,u,n,a]);if(!p||!m)return null;if(x){const e=_e().Dp(x);return(0,_.jsx)("div",{style:d.wrap,children:(0,_.jsx)(k().Nn,{rootStore:l,blockValue:m,prop:o,labeled:!0,schema:e})})}{if(!f)return null;const e=m.type===c().xd.tableRow&&"notifications"===r;return(0,_.jsx)("div",{style:{...d.wrap,...e&&{overflow:"visible"}},children:(0,_.jsx)(k().Ay,{blockValue:f,rootStore:l,blockPreviewLocation:r})})}}o(898992),o(354520);function Ve(e){let{edit:t,rootStore:o}=e;const r=(0,N().A)();return(0,_.jsx)("div",{children:Object.entries(t.property_updates).map((e=>{var i;let[n,l]=e;const a=null===(i=t.filtered_block_schema)||void 0===i?void 0:i[n];if(!a)return null;const s=l.before?l.before.value:[],d=l.after?l.after.value:[],c=(0,_.jsx)(Me,{rootStore:o,labeled:!0,propertySchema:a,beforeValue:s,afterValue:d,spaceId:t.space_id});return c?(0,_.jsx)("div",{style:r.wrap,children:c},n):void 0})).filter(n().O9)})}function Me(e){const{labeled:t,propertySchema:o,beforeValue:r,afterValue:i,rootStore:n,spaceId:l}=e,a=(0,f().e)(l);return(0,_.jsx)(k().RD,{labeled:t,name:o.name,type:o.type,icon:o.icon,children:(0,_.jsx)(K().A,{propertySchema:o,beforeValue:{value:r,spaceId:a},afterValue:{value:i,spaceId:a},rootStore:n})})}function Pe(e){let{spaceId:t,args:o,rootStore:r}=e;const i=(0,N().A)();if(!o||!o.before&&!o.after)return null;const n=o.before&&o.before.description||[],l=o.after&&o.after.description||[];return(0,_.jsx)("div",{style:i.wrap,children:(0,_.jsx)(k().RD,{labeled:!0,name:(0,_.jsx)(v().sA,{defaultMessage:"Description",id:"edit.descriptionPropertyChanged.label"}),icon:void 0,type:"text",children:(0,_.jsx)(K().A,{propertySchema:{type:"text",name:""},beforeValue:{value:n,spaceId:t},afterValue:{value:l,spaceId:t},rootStore:r})})})}function Re(e){let{description:t,rootStore:o}=e;const r=(0,N().A)();return t?(0,_.jsx)("div",{style:r.wrap,children:(0,_.jsx)(k().RD,{labeled:!0,name:(0,_.jsx)(v().sA,{defaultMessage:"Description",id:"edit.descriptionPropertyCreated.label"}),type:"text",icon:void 0,children:(0,_.jsx)(K().A,{propertySchema:{type:"text",name:""},beforeValue:{value:[],spaceId:t.spaceId},afterValue:t,rootStore:o})})}):null}o(823215);var Ie=()=>o(100622),Be=()=>o(175977);function Te(e){let{edit:t}=e;const{before:o,after:r}=t.collection_property_data||{},i=(0,N().A)();if(!o||!r)return null;const n=p().w3({before:o,after:r});if(!n)return null;const{newOptions:l,modifiedOptions:a,removedOptions:s}=n;return[l,a,s].every((e=>0===e.length))?null:(0,_.jsx)("div",{style:{...i.wrap,paddingTop:6,paddingBottom:4},children:(0,_.jsx)(De,{after:r,newOptions:l,modifiedOptions:a,removedOptions:s})})}function De(e){let{after:t,newOptions:o,modifiedOptions:r,removedOptions:i}=e;const n=(0,a().DP)(),l=e=>{let{option:t,strikethrough:o=!1}=e;const r=(0,Ie().LD)(n,null==t?void 0:t.color);return(0,_.jsx)(Be().A,{...r,strikethrough:o,children:t.value})};return(0,_.jsx)(k().RD,{labeled:!0,name:t.name,icon:t.icon,type:t.type,children:(0,_.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:4},children:[o.length>0&&(0,_.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",columnGap:4},children:[(0,_.jsx)(v().sA,{defaultMessage:"Added",id:"Edit.renderCollectionPropertyChangedDiff.addedProperty"}),o.map((e=>(0,_.jsx)("span",{children:l({option:e})},e.id)))]}),i.length>0&&(0,_.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",columnGap:4},children:[(0,_.jsx)(v().sA,{defaultMessage:"Removed",id:"Edit.renderCollectionPropertyChangedDiff.removedProperty"}),i.map((e=>(0,_.jsx)("span",{children:l({option:e,strikethrough:!0})},e.id)))]}),r.length>0&&(0,_.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"row"},children:[(0,_.jsx)("span",{children:(0,_.jsx)(v().sA,{defaultMessage:"Edited",id:"Edit.renderCollectionPropertyChangedDiff.editedProperty"})}),(0,_.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:r.map((e=>(0,_.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[(0,_.jsx)("span",{style:{marginLeft:4},children:l({option:e.before,strikethrough:!0})}),(0,_.jsx)("span",{style:{padding:"0px 8px"},children:A({width:10,height:10,fill:n.mediumIconColor})}),l({option:e.after})]},e.before.id)))})]})]})})}var Le=()=>o(764880),Ke=()=>o(413468),Ue=()=>o(601813),He=()=>o(343666),ze=()=>o(197959),Fe=()=>o(774733),Ne=()=>o(630116),We=()=>o(890022);function Ee(e){var t;const{edit:o,discussionLocation:r,hideAuthorName:n,lineClamp:l,type:a,rootStore:s,highlightCurrentUser:d,highlightCurrentUserStyle:c,onReactionToggle:u}=e,p=(0,N().A)(),x=(0,i().K8)((()=>e.rootStore.getRecordModel),[e.rootStore]),m=(0,i().K8)((()=>x({table:ze().$Y,id:o.discussion_id,spaceId:o.space_id})),[x,o.discussion_id,o.space_id]),h=null===(t=o.authors)||void 0===t?void 0:t[0],f=(0,i().K8)((()=>h?x(h):void 0),[h,x]);return m&&f?(0,_.jsx)("div",{style:p.wrap,children:(0,_.jsx)(Ze,{discussionModel:m,actorModel:f,discussionLocation:r,hideAuthorName:n,lineClamp:l,type:a,getRecordModel:x,rootStore:s,highlightCurrentUser:d,highlightCurrentUserStyle:c,onReactionToggle:u})}):null}function Oe(e){const{edit:t,discussionLocation:o,hideAuthorName:r,lineClamp:n,type:l,rootStore:a,highlightCurrentUser:s,highlightCurrentUserStyle:d,onReactionToggle:c}=e,u=(0,N().A)(),p=(0,i().K8)((()=>e.rootStore.getRecordModel),[e.rootStore]),{latestComment:x,commentWasChanged:h}=(0,i().K8)((()=>{const e=p({table:He().SN,id:t.comment_id,spaceId:t.space_id});return{latestComment:e,commentWasChanged:Boolean(t.comment_data&&e&&(0,Ke().k)(m().Bj6.fromValue(He().SN,t.comment_data),e))}}),[t.comment_data,t.comment_id,t.space_id,p]);return x?(0,_.jsx)("div",{style:u.wrap,children:(0,_.jsx)($e,{comment:x,discussionLocation:o,showEditedBadge:h,hideAuthorName:r,lineClamp:n,type:l,getRecordModel:p,rootStore:a,highlightCurrentUser:s,highlightCurrentUserStyle:d,onReactionToggle:c})}):null}function Ge(e){const t=(0,N().A)();return(0,_.jsx)("div",{style:t.wrap,children:(0,_.jsx)(Xe,{commentData:e.edit.comment_data,rootStore:e.rootStore})})}function qe(e){const{edit:t,discussionLocation:o,type:r,rootStore:n,highlightCurrentUser:l,highlightCurrentUserStyle:a,onReactionToggle:s}=e,d=(0,N().A)(),c=(0,i().K8)((()=>e.rootStore.getRecordModel),[e.rootStore]),u=(0,i().K8)((()=>c({table:He().SN,id:t.comment_id,spaceId:t.space_id})),[t.comment_id,t.space_id,c]),p=m().Bj6.fromValue(He().SN,t.comment_data)||u;return p?(0,_.jsx)("div",{style:{...d.wrap,...d.deleted},children:(0,_.jsx)($e,{comment:p,discussionLocation:o,showEditedBadge:!1,hideAuthorName:!1,type:r,getRecordModel:c,rootStore:n,highlightCurrentUser:l,highlightCurrentUserStyle:a,onReactionToggle:s})}):null}function $e(e){const{comment:t,discussionLocation:o,showEditedBadge:l,hideAuthorName:s,lineClamp:d,getRecordModel:c}=e,[u,p]=(0,r.useState)(!1),x=(0,R().v3)(),m=(0,N().A)(),h=(0,v().tz)(),g=(0,a().IS)((e=>({editedBadge:{color:e.mediumTextColor,paddingLeft:4}})),[]),b=(0,i().K8)((()=>{const o=t.getCreatedByTable(),r=t.getCreatedById();if(!o||!r)return null;const i=Ne().sk.createChildStore(e.rootStore,{table:He().SN,id:t.id,spaceId:(0,f().e)(e.rootStore.pointer.spaceId)}),l=Ne().Lk.getUserVisibleReactions(i).length>0,a=c({table:o,id:r,spaceId:t.space_id}),s=a&&(0,Le().D3)(a);return{commentStore:i,commentHasReactions:l,fullName:s?(0,Le().lR)(h,s):(0,_.jsx)(v().sA,{defaultMessage:"Unknown author",id:"edit.unknownAuthor.label"}),imagesEdits:t.getContent().map((o=>{const r=c({table:"block",id:o,spaceId:t.space_id}),i=null==r?void 0:r.__IM_SORRY__getValue();return i&&(0,_.jsx)(k().Ay,{blockValue:i,rootStore:e.rootStore})})).filter(n().O9),commentText:t.getText()}}),[t,c,h,e.rootStore]);if(!b)return null;const{commentStore:y,commentHasReactions:S,fullName:A,imagesEdits:w,commentText:C}=b;if("comment-edit"!==e.type)return null;const V=C&&(0,_.jsx)(We().A,{propertySchema:{type:"text",name:""},value:{spaceId:t.space_id,value:e.highlightCurrentUser?(0,we().Eh)({textValue:C,highlightStyle:e.highlightCurrentUserStyle??"background_only",currentUserId:x.currentUser.id,getRecordModel:c}):C},rootStore:e.rootStore}),M=!S;return(0,_.jsxs)("div",{style:{...M&&{position:"relative"}},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[!s&&(0,_.jsx)("div",{style:{...m.label,marginBottom:2},children:A}),(0,_.jsx)("span",{style:{...j().RC,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:d||6},children:V}),w,(0,_.jsx)("div",{style:{...M&&{position:"absolute",top:-3,right:3},...!M&&{marginTop:8}},children:(u||S)&&(0,_.jsx)(Fe().fj,{parentStore:y,discussionLocation:o,onReactionToggle:e.onReactionToggle})}),l&&(0,_.jsx)("span",{style:g.editedBadge,children:(0,_.jsx)(v().sA,{id:"edit.editedBadge",defaultMessage:"(edited)"})})]})}function Xe(e){const{before:t,after:o}=e.commentData,n=(0,v().tz)(),l=(0,N().A)(),a=(0,i().K8)((()=>{if(o.created_by_table&&o.created_by_id){const t=e.rootStore.getRecordModel({table:o.created_by_table,id:o.created_by_id,spaceId:o.space_id});return t&&(0,Le().D3)(t)}}),[o.created_by_id,o.created_by_table,o.space_id,e.rootStore]),s=(0,i().K8)((()=>{var i,n;const l=null===(i=o.content)||void 0===i?void 0:i.filter((e=>{var o;return!(null!==(o=t.content)&&void 0!==o&&o.includes(e))})),a=null===(n=t.content)||void 0===n?void 0:n.filter((e=>{var t;return!(null!==(t=o.content)&&void 0!==t&&t.includes(e))})),s=e.rootStore.getRecordValue;return(0,_.jsxs)(r.Fragment,{children:[null==a?void 0:a.map((t=>{const r=s({table:h().ev,id:t,spaceId:o.space_id});return r&&(0,_.jsx)(G,{rootStore:e.rootStore,blockValue:r})})),null==l?void 0:l.map((t=>{const r=s({table:h().ev,id:t,spaceId:o.space_id});return r&&(0,_.jsx)(k().Ay,{blockValue:r,rootStore:e.rootStore})}))]})}),[o.content,o.space_id,t.content,e.rootStore]);if(!o.created_by_table||!o.created_by_id)return null;const d=a?(0,Le().lR)(n,a):(0,_.jsx)(v().sA,{defaultMessage:"Unknown author",id:"edit.unknownAuthorCommentDiff.label"}),c=t.text&&o.text&&(0,_.jsx)(K().A,{propertySchema:{type:"text",name:""},beforeValue:{value:t.text||[],spaceId:t.space_id},afterValue:{value:o.text||[],spaceId:o.space_id},rootStore:e.rootStore});return(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{style:{...l.label,marginBottom:2},children:d}),c,s]})}function Ze(e){const{discussionModel:t,actorModel:o,discussionLocation:n,hideAuthorName:l,lineClamp:a}=e,[s,d]=(0,r.useState)(!1),c=(0,v().tz)(),u=(0,N().A)(),{commentHasReactions:p,commentStore:x}=(0,i().K8)((()=>{const o=t.getComments().length>0?Ne().sk.createChildStore(e.rootStore,{table:He().SN,id:t.getComments()[0],spaceId:(0,f().e)(e.rootStore.pointer.spaceId)}):void 0;return{commentStore:o,commentHasReactions:!!o&&Ne().Lk.getUserVisibleReactions(o).length>0}}),[t,e.rootStore]),m=(0,i().K8)((()=>t.getType()),[t]),h=(0,i().K8)((()=>t.getPersistedContext()??[]),[t]),g=(0,i().K8)((()=>(0,Le().lR)(c,o.asActor)),[o.asActor,c]);if("suggestion"!==m)return null;if("comment-edit"!==e.type)return null;const b=(0,_.jsx)(We().A,{propertySchema:{type:"text",name:""},value:{spaceId:t.space_id,value:(0,Ue().l8)({discussionContextData:h,discussionType:"suggestion",discussionId:t.id,intl:c})},rootStore:e.rootStore}),y=!p;return(0,_.jsxs)("div",{style:{...y&&{position:"relative"}},onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[!l&&(0,_.jsx)("div",{style:{...u.label,marginBottom:2},children:g}),(0,_.jsx)("span",{style:{...j().RC,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:a||6},children:b}),(0,_.jsx)("div",{style:{...y&&{position:"absolute",top:-3,right:3},...!y&&{marginTop:8}},children:x&&(s||p)&&(0,_.jsx)(Fe().fj,{parentStore:x,discussionLocation:n,onReactionToggle:e.onReactionToggle})})]})}o(672577);var Ye=()=>o(799288),Qe=()=>o(433847),Je=()=>o(68263),et=()=>o(824862),tt=()=>o(96689),ot=()=>o(854150),rt=()=>o(798880),it=()=>o(695608),nt=()=>o(605402);function lt(e){const{edit:t,getRecordModel:o}=e,r=(0,N().A)();return(0,_.jsxs)("div",{style:{...r.permission,...r.added,marginTop:3,marginBottom:3},children:[(0,_.jsx)("div",{children:(0,_.jsx)(ct,{getRecordModel:o,edit:t})}),(0,_.jsx)("div",{children:(0,_.jsx)(ut,{item:t.permission_data})})]})}function at(e){const{edit:t,getRecordModel:o}=e,r=(0,N().A)();return(0,_.jsxs)("div",{style:{...r.permission,...r.deleted},children:[(0,_.jsx)("div",{children:(0,_.jsx)(ct,{getRecordModel:o,edit:t})}),(0,_.jsx)("div",{children:(0,_.jsx)(ut,{item:t.permission_data})})]})}function st(e){const{edit:t,getRecordModel:o}=e,r=(0,N().A)();return(0,_.jsxs)("div",{style:r.permission,children:[(0,_.jsx)("div",{children:(0,_.jsx)(ct,{getRecordModel:o,edit:t})}),(0,_.jsx)("div",{children:(0,_.jsxs)("div",{style:r.diffWrap,children:[(0,_.jsx)(ut,{item:t.permission_data.before}),(0,_.jsx)("div",{style:{padding:"0px 8px"},children:A({width:14,height:14})}),(0,_.jsx)(ut,{item:t.permission_data.after})]})})]})}function dt(e){var t;const{edit:o,getRecordModel:i}=e,n=((null===(t=o.permission_data)||void 0===t?void 0:t.calculated_changes)||[]).map(((e,t)=>{let[n,l]=e;const a={timestamp:o.timestamp,space_id:o.space_id,type:"permission-changed",permission_data:{before:n,after:l}};return(0,_.jsx)(r.Fragment,{children:(0,_.jsx)(st,{getRecordModel:i,edit:a})},`inheritance-change-${t}`)}));return(0,_.jsx)(_.Fragment,{children:n})}function ct(e){const{edit:t,getRecordModel:o}=e,r=(0,N().A)(),n=(0,v().tz)(),l="permission-changed"===t.type?t.permission_data.after:t.permission_data;return(0,i().K8)((()=>{if((0,Je().B2)(l)){const e=o({table:rt().oo,id:l.user_id}),t=(0,it().c6)(n,e);return(0,_.jsx)("div",{style:r.permissionTypeWrap,children:(0,_.jsx)("div",{style:r.userHeader,children:t})})}if((0,Je().Lg)(l)){const e=o({table:tt().NX,id:t.space_id}),i=e?e.name:(0,_.jsx)(v().sA,{defaultMessage:"Unknown",id:"edit.unknownSpacePermissionTarget.label"}),n=(0,Je().Ni)(l)?(0,_.jsx)(v().sA,{id:"linkSharingPill.visibilityTitle.anyoneWithLink",defaultMessage:"Anyone with link at {spaceName}",values:{spaceName:i}}):(0,_.jsx)(v().sA,{id:"linkSharingPill.visibilityTitle.everyoneInWorkspace",defaultMessage:"Everyone at {spaceName}",values:{spaceName:i}});return(0,_.jsx)("div",{style:r.permissionTypeWrap,children:(0,_.jsx)("div",{style:r.userHeader,children:n})})}if((0,Je().FP)(l))return(0,_.jsx)("div",{style:r.permissionTypeWrap,children:(0,_.jsx)("div",{style:r.userHeader,children:(0,_.jsx)(v().sA,{defaultMessage:"Published link",id:"edit.publishToWebPermissionTarget.label"})})});if((0,Je().Ds)(l)){var e;const t=(null===(e=nt().A.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===l.group_id)))||void 0===e?void 0:e.group.name)||(0,_.jsx)(v().sA,{defaultMessage:"Deleted group",id:"edit.deletedPermissionGroup.label"});return(0,_.jsx)("div",{style:r.permissionTypeWrap,children:(0,_.jsx)("div",{style:r.userHeader,children:t})})}if((0,Je().P3)(l)){const e=o({table:et().GP,id:l.bot_id,spaceId:t.space_id}),i=(0,Ye().Hg)(e);return(0,_.jsx)("div",{style:r.permissionTypeWrap,children:(0,_.jsx)("div",{style:r.userHeader,children:i})})}if((0,Je().gl)(l)){const e=o({table:ot().yK,id:l.team_id,spaceId:t.space_id});let i=(0,_.jsx)(v().sA,{defaultMessage:"Members of an unknown teamspace",id:"edit.teamMemberPermissionChanged.unknownTeam"});return null!=e&&e.name&&(i=(0,_.jsx)(v().sA,{defaultMessage:"Members of {teamName}",id:"edit.teamMemberPermissionChanged.knownTeam",values:{teamName:e.name}})),(0,_.jsx)("div",{style:r.permissionTypeWrap,children:(0,_.jsx)("div",{style:r.userHeader,children:i})})}if((0,Je().nl)(l)){const e=o({table:ot().yK,id:l.team_id,spaceId:t.space_id});let i=(0,_.jsx)(v().sA,{defaultMessage:"Owners of an unknown teamspace",id:"edit.teamOwnerPermissionChanged.unknownTeam"});return null!=e&&e.name&&(i=(0,_.jsx)(v().sA,{defaultMessage:"Owners of {teamName}",id:"edit.teamOwnerPermissionChanged.knownTeam",values:{teamName:e.name}})),(0,_.jsx)("div",{style:r.permissionTypeWrap,children:(0,_.jsx)("div",{style:r.userHeader,children:i})})}return(0,Je().sk)(l)?(0,_.jsx)("div",{style:r.permissionTypeWrap,children:(0,_.jsx)("div",{style:r.userHeader,children:(0,_.jsx)(v().sA,{id:"edit.trustedDomainPermissionTarget.label",defaultMessage:"Users with email domain access"})})}):null}),[t.space_id,r.permissionTypeWrap,r.userHeader,o,n,l])}function ut(e){let{item:t}=e;const o=(0,v().tz)(),r=t.role??"none",i=(0,N().A)(),n=(0,Qe().an)(r,void 0);return n?(0,_.jsx)("div",{style:i.role,children:o.formatMessage(n)}):null}const pt=function(e){var t,o;const r=(0,i().K8)((()=>e.rootStore.getRecordModel),[e.rootStore]);if("comment-edit"===e.type){const{edit:t,discussionLocation:o,hideAuthorName:r,lineClamp:i,type:l,highlightCurrentUser:a,highlightCurrentUserStyle:s,onReactionToggle:d,rootStore:c}=e;switch(t.type){case"comment-created":return(0,_.jsx)(Oe,{edit:t,discussionLocation:o,hideAuthorName:r,lineClamp:i,type:l,rootStore:c,highlightCurrentUser:a,highlightCurrentUserStyle:s,onReactionToggle:d});case"comment-changed":return(0,_.jsx)(Ge,{edit:t,rootStore:c});case"comment-deleted":return(0,_.jsx)(qe,{edit:t,discussionLocation:o,type:l,rootStore:c,highlightCurrentUser:a,highlightCurrentUserStyle:s,onReactionToggle:d});case"suggestion-created":return(0,_.jsx)(Ee,{edit:t,discussionLocation:o,type:l,lineClamp:i,rootStore:c,highlightCurrentUser:a,highlightCurrentUserStyle:s,onReactionToggle:d,hideAuthorName:r});default:(0,n().HB)(t)}}const{edit:l}=e;switch(l.type){case"block-created":return(0,_.jsx)($,{rootStore:e.rootStore,blockValue:l.block_data.block_value});case"block-deleted":return(0,_.jsx)(G,{rootStore:e.rootStore,blockValue:l.block_data.block_value});case"block-changed":return(0,_.jsx)(q,{edit:l,rootStore:e.rootStore});case"block-property-changed":return(0,_.jsx)(Ve,{rootStore:e.rootStore,edit:l});case"collection-property-changed":return(0,_.jsx)(Te,{edit:l});case"collection-changed":return(0,_.jsx)(Pe,{rootStore:e.rootStore,spaceId:l.space_id,args:l.collection_data});case"collection-created":return(0,_.jsx)(Re,{rootStore:e.rootStore,description:(null===(t=l.collection_data)||void 0===t?void 0:t.description)&&{value:null===(o=l.collection_data)||void 0===o?void 0:o.description,spaceId:l.space_id}});case"mention-created":case"permission-group-mention-created":case"team-mention-created":return(0,_.jsx)(Ce,{blockId:l.mentioned_block_id,property:l.mentioned_property,blockPreviewLocation:"notifications",highlightCurrentUser:e.highlightCurrentUser,highlightCurrentUserStyle:e.highlightCurrentUserStyle,rootStore:e.rootStore});case"permission-created":return(0,_.jsx)(lt,{getRecordModel:r,edit:l});case"permission-changed":return(0,_.jsx)(st,{getRecordModel:r,edit:l});case"permission-deleted":return(0,_.jsx)(at,{getRecordModel:r,edit:l});case"permission-restriction-created":case"permission-restriction-deleted":return(0,_.jsx)(dt,{getRecordModel:r,edit:l});case"reminder-created":return(0,_.jsx)(Ce,{blockId:l.reminder_block_id,property:l.reminder_property,highlightCurrentUser:e.highlightCurrentUser,highlightCurrentUserStyle:e.highlightCurrentUserStyle,rootStore:e.rootStore});case"collection-page-layout-edited":case"team-mention-deleted":case"permission-group-mention-deleted":case"mention-deleted":return null;default:return(0,n().ub)(l),null}}}}]);