"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[7097],{15121:(e,t,o)=>{o.r(t),o.d(t,{Notification:()=>v});o(898992),o(354520),o(672577),o(581454);var i=()=>o(496603),a=()=>o(534177),s=()=>o(939768),r=()=>o(813206),n=()=>o(764880),c=()=>o(855826),l=()=>o(601813),d=()=>o(236162),u=()=>o(641007),p=()=>o(792071),m=()=>o(814388),f=()=>o(450648),g=()=>o(296344),b=()=>o(869558),N=()=>o(343666),y=()=>o(197959),h=()=>o(798880),M=()=>o(797809),k=()=>o(919709);function v(e){var t;const{activity:o,getRecordValue:v,baseURL:j,userTimeZone:_,pageVisitSource:U,intl:S,useSimplifiedEmailSubjectForGrouping:x,isMobilePush:A,recipientUser:I,experimentService:T,collectionFeatureGates:V}=e,E=p().b4_.fromGetRecordValueFn(v),w=(0,m().Ln)({...e}),P=(0,m().bD)(w,S),C=(0,m().dy)(w),L=(0,m().ds)({recipientUser:I,authors:w}),B=(0,m().$f)({...e,intl:S}),F=(0,m().Nn)({...e,intl:S}),G=(0,m().OM)({...e,intl:S}),Z=(0,m().GK)({...e,intl:S}),q=(0,m().xt)({...e,intl:S});switch(o.type){case"top-level-block-created":return{subject:S.formatMessage(m().Ui.topLevelBlockCreated,{userName:P,targetName:B,spaceName:Z})};case"top-level-block-deleted":return{subject:S.formatMessage(m().Ui.topLevelBlockDeleted,{userName:P,targetName:B,spaceName:Z})};case"collection-row-created":return{subject:S.formatMessage(m().Ui.collectionRowCreated,{userName:P,targetName:B,collectionName:G})};case"collection-row-deleted":return{subject:S.formatMessage(m().Ui.collectionRowDeleted,{userName:P,targetName:B,collectionName:G})};case"block-edited":{let t;const a=o.getEdits();if(a.length){const o=a[0];if("block-changed"===o.type){const a=o.block_data.after.block_value,s=(0,d().zN)({block:a,getRecordValue:v});if("page"===a.type&&s){const a=o.block_schema||(0,M().RX)(S),s=c().PE({before:o.block_data.before.block_value,after:o.block_data.after.block_value,schema:a}).filter((e=>{const t=a[e];return t&&"formula"!==t.type})).map((t=>{const i=a[t],s=i?i.name:void 0,r=(0,m().Bu)({intl:S,property:t,schema:a,block:o.block_data.after.block_value,getRecordValue:v,userTimeZone:e.userTimeZone,baseURL:e.baseURL,experimentService:T,collectionFeatureGates:V})||S.formatMessage(m().Ui.emptyBlockEditedProperty);return S.formatMessage(m().Ui.propertyNameAndValueEdited,{propertyName:s,propertyValue:r})})),n=r().TW({before:o.block_data.before.block_value,after:o.block_data.after.block_value}),l=i().oE(n.map((e=>{const t=(0,m().$L)({formatProperty:e,intl:S}),i=(0,m().uj)({formatProperty:e,intl:S,block:o.block_data.after.block_value,getRecordValue:v});if(t&&i)return S.formatMessage(m().Ui.propertyNameAndValueEdited,{propertyName:t,propertyValue:i})})));t=S.formatList(s.concat(l),{type:"conjunction",style:"narrow"})}else t=(0,m().g8)({intl:S,blockValue:a,getRecordValue:v,baseURL:j,userTimeZone:_})}else if("block-created"===o.type){const e=o.block_data.block_value;t=(0,m().g8)({intl:S,blockValue:e,getRecordValue:v,baseURL:j,userTimeZone:_})}else if("block-deleted"===o.type){const e=o.block_data.block_value,i=(0,m().g8)({intl:S,blockValue:e,getRecordValue:v,baseURL:j,userTimeZone:_});t=S.formatMessage(m().Ui.blockDeletedEditBody,{renderedBlock:i})}}return{subject:x?R(B,S):S.formatMessage(m().Ui.blockEditedNotification,{userName:P,blockName:B}),body:t}}case"block-property-edited":const p={subject:x?R(B,S):S.formatMessage(m().Ui.blockPropertyEditedNotification,{userName:P,blockName:B}),body:void 0},O=o.getEdits();if(O.length){const t=O[0],o=Object.entries(t.property_updates).filter((e=>{var o;let[i,a]=e;const s=null===(o=t.filtered_block_schema)||void 0===o?void 0:o[i];return s&&!["formula","created_by","created_time"].includes(s.type)})).map((o=>{var i,a;let[s,r]=o;const n=null===(i=t.filtered_block_schema)||void 0===i?void 0:i[s],c=n?n.name:void 0,l=(0,m().sL)({intl:S,propertySchema:n,textValue:(null===(a=r.after)||void 0===a?void 0:a.value)??[],getRecordValue:v,userTimeZone:e.userTimeZone,baseURL:e.baseURL,experimentService:T,collectionFeatureGates:V})||S.formatMessage(m().Ui.emptyBlockEditedProperty);return S.formatMessage(m().Ui.propertyNameAndValueEdited,{propertyName:c,propertyValue:l})}));p.body=S.formatList(o,{type:"conjunction",style:"narrow"})}return A?{subject:S.formatMessage(m().Ui.mobileBlockPropertyEditedNotification,{userName:P}),subtitle:B,body:p.body,senderUserId:C,senderProfilePhoto:L,conversationIdentifier:F}:p;case"permissions-edited":return{subject:S.formatMessage(m().Ui.userEditedPermissionsFor,{userName:P,targetName:B}),body:(0,m().fk)({intl:S,activity:o,getRecordValue:v,pageVisitSource:U,userTimeZone:e.userTimeZone,experimentService:T,collectionFeatureGates:V})};case"user-mentioned":{const t=(0,m().OQ)({intl:S,getRecordValue:v,baseURL:j,userTimeZone:e.userTimeZone,blockId:o.mentioned_block_id,property:o.mentioned_property,experimentService:T,collectionFeatureGates:V});return A?{subject:S.formatMessage(m().Ui.mobileUserMentionedIn,{userName:P}),subtitle:B,body:t,senderUserId:C,senderProfilePhoto:L,conversationIdentifier:F}:{subject:x?R(B,S):S.formatMessage(m().Ui.userMentionedIn,{userName:P,targetName:B}),body:t}}case"commented":{let t,i,a;const s=I?o.getEdits().filter((e=>{var t;return!Boolean(null===(t=e.authors)||void 0===t?void 0:t.find((e=>e.id===I.id)))})):o.getEdits(),r=s[0];let n;if(r)if(i=r.comment_id,a=r.discussion_id,"comment-created"===r.type){const o=v({table:N().SN,id:r.comment_id,spaceId:r.space_id}),i=r.comment_data||o;if(i){var D;t=(0,f().r4)({intl:S,textValue:i.text,getRecordModel:E,userTimeZone:e.userTimeZone});const o=i.created_by_table&&i.created_by_id?null===(D=E({table:i.created_by_table,id:i.created_by_id,spaceId:r.space_id}))||void 0===D?void 0:D.asActor:void 0;n=o?(0,m().bD)([o.asActor],S):P}}else if("comment-changed"===r.type)t=(0,f().r4)({intl:S,textValue:r.comment_data.after.text,getRecordModel:E,userTimeZone:e.userTimeZone});else if("suggestion-created"===r.type){const o=E({table:y().$Y,id:r.discussion_id,spaceId:r.space_id});var W;if(o&&"suggestion"===o.getType())t=(0,f().r4)({intl:S,textValue:(0,l().l8)({discussionContextData:(null===(W=o.getSuggestionRawContext())||void 0===W||null===(W=W.snapshot)||void 0===W?void 0:W.data)??[],discussionType:"suggestion",discussionId:o.id,intl:S}),getRecordModel:E,userTimeZone:e.userTimeZone})}else{const o=v({table:N().SN,id:r.comment_id,spaceId:r.space_id}),i=r.comment_data||o;if(i){const o=(0,f().r4)({intl:S,textValue:i.text,getRecordModel:E,userTimeZone:e.userTimeZone});t=S.formatMessage(m().Ui.userDeletedComment,{commentText:o})}}return A?{subject:"suggestion-created"===(null==r?void 0:r.type)?S.formatMessage(m().Ui.mobileUserSuggestedSubject,{userName:n??P}):S.formatMessage(m().Ui.mobileUserCommentedSubject,{userName:n??P}),subtitle:B,body:t,senderUserId:C,senderProfilePhoto:L,conversationIdentifier:F,categoryIdentifier:"comment_notification_category",commentId:i,discussionId:a}:{subject:x?R(B,S):"suggestion-created"===(null==r?void 0:r.type)?S.formatMessage(m().Ui.userSuggestedSubject,{userName:n??P,targetName:B}):S.formatMessage(m().Ui.userCommentedSubject,{userName:n??P,targetName:B}),body:t}}case"user-invited":const $=(0,s().ZL)(B),H=$.length>0?$:S.formatMessage(m().Ui.defaultPageName);if(o.permission_group_id)return{subject:S.formatMessage(m().Ui.userAddedToSpace,{userName:P,workspaceName:H})};const z=0===w.filter(n().L_).length;return A?z?{subject:S.formatMessage(m().Ui.mobileUserInvitedByBot),subtitle:B,conversationIdentifier:F}:{subject:S.formatMessage(m().Ui.mobileUserInvited,{userName:P}),subtitle:B,senderUserId:C,senderProfilePhoto:L,conversationIdentifier:F}:{subject:z?S.formatMessage(m().Ui.userInvitedToSpaceByBot,{workspaceName:H}):S.formatMessage(m().Ui.userInvitedToSpace,{userName:P,workspaceName:H})};case"collection-edited":{let e,t=S.formatMessage(m().Ui.userEditedCollectionSubject,{userName:P,collectionName:B});const i=o.getEdits();if(i.length){const o=i[0];if("collection-changed"===o.type&&o.collection_data){const i=o.collection_data.after?o.collection_data.after.description:void 0,a=o.collection_data.before?o.collection_data.before.description:void 0;a&&!i?t=S.formatMessage(m().Ui.collectionDescriptionDeleted,{userName:P,collectionName:B}):!a&&i?(t=S.formatMessage(m().Ui.collectionDescriptionCreated,{userName:P,collectionName:B}),e=k().k4p(i)):a&&i&&k().dze(a,i)&&(e=k().k4p(i))}else if("collection-created"===o.type&&o.collection_data){const i=o.collection_data.description;i&&(t=S.formatMessage(m().Ui.userCreatedCollectionSubject,{userName:P,collectionName:B}),e=k().k4p(i))}}return{subject:t,body:e}}case"collection-view-edited":const Y=e.getRecordValue({table:b().Gy,id:o.collection_view_id,spaceId:o.space_id}),K=Y&&Y.name||S.formatMessage(m().Ui.untitledCollectionView);return{subject:S.formatMessage(m().Ui.collectionViewEditedSubject,{userName:P,collectionViewName:K,collectionName:B})};case"collection-property-edited":const Q=o.getEdits(),X=Q.length&&Q[0],J=X&&("collection-property-changed"===X.type?X.collection_property_data.after.name:X.collection_property_data.name)||S.formatMessage(m().Ui.collectionPropertyEditedUnknown);return o.collection_property_id,{subject:S.formatMessage(m().Ui.collectionPropertyEditedSubject,{userName:P,propertyType:J,collectionName:B})};case"collection-page-layout-edited":let ee;return{subject:S.formatMessage(m().Ui.userEditedCollectionPageLayoutSubject,{userName:P,collectionName:B}),body:ee};case"reminder":return{subject:S.formatMessage(m().Ui.reminderSubject,{pageName:B}),body:(0,m().OQ)({getRecordValue:v,baseURL:j,userTimeZone:e.userTimeZone,blockId:o.reminder_block_id,property:o.reminder_property,intl:S,experimentService:T,collectionFeatureGates:V})};case"page-locked":case"page-unlocked":return{subject:"page-locked"===o.type?S.formatMessage(m().Ui.pageLockedActivity,{userName:P,pageName:B}):S.formatMessage(m().Ui.pageUnlockedActivity,{userName:P,pageName:B})};case"email-edited":return{subject:S.formatMessage(m().Ui.emailEditedActivity,{userName:P})};case"access-requested":{const e=E({id:o.getAccessRequestId(),table:g().O,spaceId:o.getSpaceId()});if(!e||e.isPageAccessRequest()||e.isTeamMembershipRequest())return null!=e&&e.isEditPageAccessRequest()?{subject:S.formatMessage(m().Ui.editAccessRequestedSubject,{userName:P,pageName:B})}:{subject:S.formatMessage(m().Ui.accessRequestedSubject,{userName:P,pageName:B})};if(e.isGuestInviteRequest())return{subject:S.formatMessage(m().Ui.guestInviteRequestedSubject,{userName:P,workspaceName:B})};if(e.isSpaceMembershipRequest())return{subject:S.formatMessage(m().Ui.membershipRequestedSubject,{userName:P,workspaceName:B})};(0,a().HB)(e);break}case"access-request-resolved":{const e=E({id:o.getAccessRequestId(),table:g().O,spaceId:o.getSpaceId()}),t=o.getEdits()[0].requested_for,i=t?E(t):void 0,a=null!=i&&i.isUser()?i.getEmail():S.formatMessage({defaultMessage:"a guest",id:"pushNotification.accessRequestResolved.invalidGuest"});return{subject:S.formatMessage("approved"===(null==e?void 0:e.status)?m().Ui.accessRequestResolvedApprovedSubject:m().Ui.accessRequestResolvedRejectedSubject,{guestEmail:a,pageName:B})}}case"page-deleted":return{subject:S.formatMessage(m().Ui.pageDeletedActivity,{userName:P})};case"page-restored":return{subject:S.formatMessage(m().Ui.pageRestoredActivity,{userName:P})};case"page-permanently-deleted":return{subject:S.formatMessage(m().Ui.pagePermanentlyDeletedActivity,{userName:P})};case"team-membership-edited":return{subject:S.formatMessage(m().Ui.userInvitedToTeam,{userName:P,teamName:B})};case"private-content-transferred":const te=o.getEdits(),oe=te.length>0?te[0].from_user_id:void 0,ie=(0,a().O9)(oe)?E({table:h().oo,id:oe}):void 0;return ie&&ie.getFullName(S)?{subject:S.formatMessage(m().Ui.privateContentTransferred,{author:P,pageName:B,fromUserName:ie.getFullName(S)})}:{subject:S.formatMessage({defaultMessage:"{author} transferred private content to you: {pageName}",id:"pushNotification.privateContentTransferred.noFromUserName"},{author:P,pageName:B})};case"permission-group-mentioned":const ae=(0,m().$I)({spaceId:o.space_id,permissionGroupId:o.mentioned_group_id,getRecordValue:e.getRecordValue}),se=(0,m().kr)(S,ae);return{subject:x?R(B,S):S.formatMessage(m().Ui.permissionGroupMentionedIn,{userName:P,targetName:B,groupName:se}),body:(0,m().OQ)({intl:S,getRecordValue:v,baseURL:j,userTimeZone:e.userTimeZone,blockId:o.navigable_block_id,property:o.mentioned_property,experimentService:T,collectionFeatureGates:V})};case"verification-expired":return{subject:S.formatMessage(m().Ui.verificationExpired,{pageName:B})};case"team-mentioned":const re=(0,m().Uo)({spaceId:o.space_id,teamId:null===(t=o.getEdits())||void 0===t||null===(t=t[0])||void 0===t?void 0:t.mentioned_team_id,getRecordValue:e.getRecordValue}),ne=null==re?void 0:re.getName();return{subject:x?R(B,S):S.formatMessage(m().Ui.teamMentionedIn,{userName:P,targetName:B,teamName:ne}),body:(0,m().OQ)({intl:S,getRecordValue:v,baseURL:j,userTimeZone:e.userTimeZone,blockId:o.navigable_block_id,property:o.mentioned_property,experimentService:T,collectionFeatureGates:V})};case"import-completed":const ce=o.getEdits()[0],le="failed"===ce.import_status?m().Ui.importFailed:m().Ui.importSuccessful;return{subject:S.formatMessage(le,{importSource:ce.import_source})};case"export-completed":return{subject:S.formatMessage(m().Ui.exportCompleted)};case"in-app-notification-automation-action-triggered":const de=o.getEdits()[0];return{subject:S.formatMessage(m().Ui.inAppNotificationAutomationActionTriggered,{automationName:q}),body:(0,f().r4)({intl:S,textValue:de.message.value,getRecordModel:E,userTimeZone:e.userTimeZone})};case"no-conflicts-found":return{subject:S.formatMessage(m().Ui.noConflictsFound),subtitle:B,senderUserId:u().px.id,senderProfilePhoto:u().px.profile_photo};case"automation-typecheck-error-raised":return{subject:S.formatMessage(m().Ui.automationTypecheckErrorRaisedSubject,{automationName:q}),body:S.formatMessage(m().Ui.automationTypecheckErrorRaisedBody)};case"reacted":return{subject:S.formatMessage(m().Ui.reactionCreated,{userName:P,targetName:B})};case"upgrade-request-created":return{subject:S.formatMessage(m().Ui.upgradeRequestCreated,{userName:P})};case"app-builder-notification":const ue=o.getEdits()[0];return{subject:S.formatMessage("workflow-error"===ue.app_builder_notification_type?m().Ui.appBuilderWorkflowError:m().Ui.appBuilderWorkflowAction)}}}function R(e,t){return t.formatMessage({defaultMessage:"New activity in {pageTitle}",id:"emailActivity.pageActivity.simplifiedSubjectLine"},{pageTitle:e})}},91063:(e,t,o)=>{o.r(t),o.d(t,{default:()=>k});o(944114);var i=o(296540),a=()=>o(56366),s=()=>o(919709),r=()=>o(959013),n=()=>o(502492),c=()=>o(939768),l=()=>o(705540),d=()=>o(725614),u=()=>o(780054),p=()=>o(231722),m=()=>o(906537),f=()=>o(807926),g=()=>o(24157),b=()=>o(575143),N=()=>o(760217),y=()=>o(939740),h=()=>o(89924),M=o(474848);const k=function(){(0,i.useEffect)((()=>{var e,t;return null===(e=l().electronApi)||void 0===e||null===(e=e.contextMenu)||void 0===e||null===(t=e.addListener)||void 0===t||t.call(e,j),()=>{var e,t;null===(e=l().electronApi)||void 0===e||null===(e=e.contextMenu)||void 0===e||null===(t=e.removeListener)||void 0===t||t.call(e,j)}}),[]);const e=(0,o(484714).v3)(),t=(0,i.useRef)(document.activeElement),s=(0,i.useRef)(m().get());let d=null,p=null;(t.current instanceof HTMLInputElement||t.current instanceof HTMLTextAreaElement)&&(d=t.current.selectionStart,p=t.current.selectionEnd);const{menuInfo:g,open:k}=(0,a().O$)(f().A),U=(0,a().K8)((()=>{if(!g)return[];const i=function(e,t){const o=[],i=function(e,t){const o="SpellCheckStore"in t&&t.SpellCheckStore,i=[];if(R(e)&&o&&o.isEnabled()){const t=o.getCorrections(e);for(const e of t)i.push({key:e,action:()=>{l().electronApi&&l().electronApi.replaceMisspelling&&l().electronApi.replaceMisspelling(e)},render:t=>(0,M.jsx)(N().A,{...t,title:e})})}return i}(e,t);if(i.length>0){const e=o.length>0;o.push({key:"spellingCorrectionItems",items:i,render:t=>(0,M.jsx)(h().A,{...t,topBorder:e})})}const a=function(e,t){const o="SpellCheckStore"in t&&t.SpellCheckStore,i=[];R(e)&&o&&o.isEnabled()&&i.push({key:"learn-spelling",action:()=>{o.addToDictionary(e.misspelledWord)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Add to dictionary",id:"desktop.spellcheckMenuItem.addToDictionary.title"})})});R(e)&&o&&o.isEnabled()&&i.push({key:"disable",action:()=>{o.setEnabled(!1)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Disable spell check",id:"desktop.spellcheckMenuItem.disableSpellcheck.title"})})});return i}(e,t);if(a.length>0){const e=o.length>0;o.push({key:"disableSpellCheckItems",items:a,render:t=>(0,M.jsx)(h().A,{...t,topBorder:e})})}const s=function(e){const t=[];e.selectionText&&e.selectionText.length>0&&t.push({key:"google",action:()=>{if(l().electronApi){const t=`https://www.google.com/search?q=${encodeURIComponent(e.selectionText.trim())}`;l().electronApi.openExternalUrl(t)}},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Search with Google",id:"desktop.searchMenuItem.searchWithGoogle.title"})})});return t}(e);if(s.length>0){const e=o.length>0;o.push({key:"searchItems",items:s,render:t=>(0,M.jsx)(h().A,{...t,topBorder:e})})}const d=function(e){const t=[];if(!e.linkURL||0===e.linkURL.length)return t;const o=n().it({url:e.linkURL,domainBaseUrl:u().A.domainBaseUrl,protocol:u().A.protocol});e.linkURL.startsWith("mailto:")?t.push({key:"copy-email",action:()=>{var t;null!==(t=l().electronApi)&&void 0!==t&&t.copyText&&l().electronApi.copyText(e.linkText)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Copy email address",id:"desktop.rightClickMenu.copyEmailAddress"})})}):t.push({key:"copy-link",action:()=>{var e;null!==(e=l().electronApi)&&void 0!==e&&e.copyText&&l().electronApi.copyText(o)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Copy link",id:"desktop.rightClickMenu.copyLink"})})});t.push({key:"open-link",action:()=>{l().openExternalUrl(o)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Open link in browser",id:"desktop.rightClickMenu.openLinkInBrowser"})})});const i=(a=o,(0,c().$_)(a)===u().A.domainBaseUrl);var a;i&&t.push({key:"open-link-new-tab",action:()=>{l().openInNewTab({url:o,position:"after-children"})},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Open link in new tab",id:"desktop.rightClickMenu.openLinkInNewTab"})})});i&&t.push({key:"open-link-new-window",action:()=>{l().openInNewWindow(o)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Open link in new window",id:"desktop.rightClickMenu.openLinkInNewWindow"})})});return t}(e);if(d.length>0){const e=o.length>0;o.push({key:"linkMenuItems",items:d,render:t=>(0,M.jsx)(h().A,{...t,topBorder:e})})}const p=function(e){const t=[];e.hasImageContents&&e.srcURL&&e.srcURL.length>0&&(t.push({key:"copy-image",action:()=>{l().electronApi&&l().electronApi.copyImage&&l().electronApi.copyImage(e.srcURL)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Copy image",id:"desktop.rightClickMenu.copyImage"})})}),t.push({key:"copy-image-address",action:()=>{l().electronApi&&l().electronApi.copyText&&l().electronApi.copyText(n().it({url:e.srcURL,domainBaseUrl:u().A.domainBaseUrl,protocol:u().A.protocol}))},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Copy image address",id:"desktop.rightClickMenu.copyImageAddress"})})}));return t}(e);if(p.length>0){const e=o.length>0;o.push({key:"imageMenuItems",items:p,render:t=>(0,M.jsx)(h().A,{...t,topBorder:e})})}const m=function(e){var t;const o=[],i=(null===(t=e.selectionText)||void 0===t?void 0:t.length)??0;if(!v(e)&&0===i)return o;e.editFlags.canCut&&o.push({key:"cut",action:()=>{l().electronApi&&l().electronApi.cut&&l().electronApi.cut()},render:e=>(0,M.jsx)(b().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Cut",id:"desktop.textEditingMenuItem.cutAction.title"}),shortcut:"cut"})});e.editFlags.canCopy&&o.push({key:"copy",action:()=>{l().electronApi&&l().electronApi.copy&&l().electronApi.copy()},render:e=>(0,M.jsx)(b().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Copy",id:"desktop.textEditingMenuItem.copyAction.title"}),shortcut:"copy"})});e.editFlags.canPaste&&o.push({key:"paste",action:()=>{l().electronApi&&l().electronApi.paste&&l().electronApi.paste()},render:e=>(0,M.jsx)(b().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Paste",id:"desktop.textEditingMenuItem.pasteAction.title"}),shortcut:"paste"})});return o}(e);if(m.length>0){const e=o.length>0;o.push({key:"textEditingItems",items:m,render:t=>(0,M.jsx)(h().A,{...t,topBorder:e})})}const f=function(e,t){const o="SpellCheckStore"in t&&t.SpellCheckStore,i=[];v(e)&&o&&!o.isEnabled()&&i.push({key:"enable",action:()=>{o.setEnabled(!0)},render:e=>(0,M.jsx)(N().A,{...e,title:(0,M.jsx)(r().sA,{defaultMessage:"Enable spell check",id:"desktop.spellcheckMenuItem.enableSpellcheck.title"})})});return i}(e,t);if(f.length>0){const e=o.length>0;o.push({key:"enableSpellCheckItems",items:f,render:t=>(0,M.jsx)(h().A,{...t,topBorder:e})})}return o}(g,e);for(const a of i)for(const i of a.items){const a=i.action;i.action=i=>{t.current instanceof HTMLElement&&t.current.focus(),t.current instanceof HTMLInputElement||t.current instanceof HTMLTextAreaElement?(t.current.selectionStart=d,t.current.selectionEnd=p):s.current&&s.current.startOffset!==s.current.endOffset&&m().set(s.current,e.device),o(908006).default.afterNextFlush((()=>{a(i)}))}}return i}),[t,e,g,p,d]),{x:S,y:x}=function(e){const t=l().getCurrentZoom();return{x:e?e.x/t:0,y:e?e.y/t:0}}(g),A=new DOMRect(S,x,0,0);return(0,i.useEffect)((()=>{k&&(t.current=document.activeElement)}),[k]),(0,M.jsx)(o(14235).Ay,{open:k&&U.length>0,popupType:o(377586).n.Popup,originRect:A,render:()=>(0,M.jsx)(o(805751).A,{debugName:"ElectronContextMenu",capture:!0,allowEsc:!0,children:(0,M.jsx)(o(928600).A,{menuType:o(722872).gu.Popup,children:(0,M.jsx)(y().Ay,{type:y().Oh.Vertical,sections:U,initialFocus:void 0,onAccept:_,suppressFocusRing_PLEASE_USE_SPARINGLY:!0})})}),onDismiss:_,trapFocus:!0})};function v(e){return e.isEditable||"none"!==(null==e?void 0:e.formControlType)}function R(e){return v(e)&&e.misspelledWord&&e.misspelledWord.length>0}function j(e,t){if(t.misspelledWord){const e=g().default.state,o="editing"===e.mode&&(0,p().H7)(e.multiSelection);if(o&&o.selection.startIndex===o.selection.endIndex){const e=s().JWU({textValue:o.store.getValue()||[],substring:t.misspelledWord,ignoreCase:!1}),i=o.selection.startIndex,a=s().zBr(e,i);a&&d().setSelection({store:o.store,selection:a})}}f().A.setState({open:!0,menuInfo:t})}function _(){f().A.setState({...f().A.state,open:!1})}},814388:(e,t,o)=>{o.d(t,{$I:()=>ae,$L:()=>oe,$f:()=>Z,Bu:()=>ee,GK:()=>W,IF:()=>ne,Ln:()=>C,Nn:()=>q,OM:()=>$,OQ:()=>J,Ui:()=>P,Uo:()=>re,bD:()=>L,ds:()=>B,dy:()=>F,fk:()=>Q,g8:()=>X,kr:()=>se,sL:()=>te,uj:()=>ie,xt:()=>z});o(944114),o(898992),o(354520),o(803949),o(581454);var i=()=>o(496603),a=()=>o(534177),s=()=>o(720665),r=()=>o(764880),n=()=>o(278132),c=()=>o(700500),l=()=>o(799288),d=()=>o(787626),u=()=>o(970013),p=()=>o(713998),m=()=>o(597777),f=()=>o(869190),g=()=>o(651124),b=()=>o(80979),N=()=>o(236162),y=()=>o(945778),h=()=>o(792071),M=()=>o(433847),k=()=>o(450648),v=()=>o(296344),R=()=>o(912720),j=()=>o(179034),_=()=>o(824862),U=()=>o(519831),S=()=>o(96689),x=()=>o(437607),A=()=>o(854150),I=()=>o(798880),T=()=>o(919709),V=()=>o(695608),E=()=>o(53528),w=()=>o(931075);const P=(0,o(959013).YK)({defaultPluralizedUserNames:{defaultMessage:"Someone",id:"pushNotification.pluralizedUserNames.defaultLabel"},defaultPermissionGroupName:{defaultMessage:"Deleted group",id:"pushNotification.permissionGroupName.defaultLabel"},defaultPageName:{defaultMessage:"a Notion page",id:"pushNotification.pageName.defaultLabel"},untitledPermissionGroupName:{defaultMessage:"Untitled group",id:"pushNotification.permissionGroupName.untitledLabel"},userEditedPermissionGroup:{defaultMessage:"{userName} edited {permissionGroupName}",id:"pushNotification.userEditedTarget.label"},userDeletedPermissionGroup:{defaultMessage:"{userName} deleted {permissionGroupName}",id:"pushNotification.userDeletedTarget.label"},userCreatedPermissionGroup:{defaultMessage:"{userName} created {permissionGroupName}",id:"pushNotification.userCreatedTarget.label"},unknownAuthor:{defaultMessage:"Unknown author",id:"pushNotification.authorPhrase.unknown"},untitledSpaceName:{defaultMessage:"Untitled",id:"pushNotification.untitledSpaceName.label"},untitledTeamName:{defaultMessage:"Untitled",id:"pushNotification.untitledTeamName.label"},untitledCollectionName:{defaultMessage:"Untitled",id:"pushNotification.untitledCollectionName.placeholder"},untitledBlockTitle:{defaultMessage:"Untitled",id:"pushNotification.untitledBlockTitle.placeholder"},twoUserNames:{defaultMessage:"{firstAuthor} and {secondAuthor}",id:"pushNotification.twoUserNames.label"},threePlusUserNames:{defaultMessage:"{othersCount, plural, one {{firstAuthor} and {othersCount} other} other {{firstAuthor} and {othersCount} others}}",id:"pushNotification.threePlusUserNames.label"},editorPermissionLabel:{defaultMessage:"Full access",id:"pushNotifications.editorPermissionLevel.label"},readerPermissionLabel:{defaultMessage:"Read only",id:"pushNotifications.readerPermissionLevel.label"},editOnlyPermissionLabel:{defaultMessage:"Edit only",id:"pushNotifications.editOnlyPermissionLevel.label"},editPermissionLabel:{defaultMessage:"Edit",id:"pushNotifications.editPermissionLevel.label"},commentOnlyPermissionLabel:{defaultMessage:"Comment only",id:"pushNotifications.commentOnlyPermissionLevel.label"},noAccessPermissionLabel:{defaultMessage:"No access",id:"pushNotifications.noAccessPermissionLevel.label"},publicPermissionRoleLabel:{defaultMessage:"Public ({permissionLevel})",id:"pushNotifications.publicPermissions.label"},userNameWithRole:{defaultMessage:"{userName} ({permissionLevel})",id:"pushNotifications.userPermissionsWithRole.label"},botNameWithRole:{defaultMessage:"{botName} ({permissionLevel})",id:"pushNotifications.botPermissionsWithRole.label"},spaceNameWithRole:{defaultMessage:"{spaceName} ({permissionLevel})",id:"pushNotifications.spacePermissionsWithRole.label"},imageInPushNotification:{defaultMessage:"{imageEmoji} Image",id:"pushNotification.imageInPushNotification.placeholder"},topLevelBlockCreated:{defaultMessage:"{userName} created {targetName} in {spaceName}",id:"pushNotification.userCreatedBlockInSpace.message"},topLevelBlockDeleted:{defaultMessage:"{userName} deleted {targetName} in {spaceName}",id:"pushNotification.userDeletedBlockInSpace.message"},collectionRowCreated:{defaultMessage:"{userName} created {targetName} in {collectionName}",id:"pushNotification.userCreatedRowInCollection.message"},collectionRowDeleted:{defaultMessage:"{userName} deleted {targetName} in {collectionName}",id:"pushNotification.userDeletedRowInCollection.message"},emptyBlockEditedProperty:{defaultMessage:"Empty",id:"pushNotification.emptyBlockPropertyValueEdited.placeholderLabel"},propertyNameAndValueEdited:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationSubject"},propertyNameAndValueNotificationBody:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationBody"},blockDeletedEditBody:{defaultMessage:"[Deleted] {renderedBlock}",id:"pushNotification.deletedBlock.notificationContents"},blockEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockEdited.notificationSubject"},blockPropertyEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockPropertyEdited.notificationSubject"},mobileBlockPropertyEditedNotification:{defaultMessage:"{userName} edited",id:"pushNotification.mobileBlockPropertyEdited.notificationSubject"},userEditedPermissionsFor:{defaultMessage:"{userName} edited permissions for {targetName}",id:"pushNotifications.permissionsEditedForPageOrSpace.notificationSubject"},userMentionedIn:{defaultMessage:"{userName} mentioned you in {targetName}",id:"pushNotifications.userMentionedInPage.notificationSubject"},mobileUserMentionedIn:{defaultMessage:"{userName} mentioned you",id:"pushNotifications.mobileUserMentionedInPage.notificationSubject"},permissionGroupMentionedIn:{defaultMessage:"{userName} mentioned {groupName} in {targetName}",id:"pushNotifications.groupMentionedInPage.notificationSubject"},teamMentionedIn:{defaultMessage:"{userName} mentioned {teamName} in {targetName}",id:"pushNotifications.teamMentionedInPage.notificationSubject"},userDeletedComment:{defaultMessage:"[Deleted]ðŸ’¬ {commentText}",id:"pushNotifications.userDeletedCommentText.notificationContents"},userCommentedSubject:{defaultMessage:"{userName} commented in {targetName}",id:"pushNotifications.userCommentedSubject.notificationSubject"},userSuggestedSubject:{defaultMessage:"{userName} suggested in {targetName}",id:"pushNotifications.userSuggestedSubject.notificationSubject"},mobileUserCommentedSubject:{defaultMessage:"{userName} commented",id:"pushNotifications.mobileUserCommentedSubject.notificationSubject"},mobileUserSuggestedSubject:{defaultMessage:"{userName} commented",id:"pushNotifications.mobileUserSuggestedSubject.notificationSubject"},userAddedToSpace:{defaultMessage:"{userName} added you to {workspaceName}",id:"pushNotifications.userAddedToSpace.notificationSubject"},mobileUserInvited:{defaultMessage:"{userName} invited you",id:"pushNotifications.mobileUserInvited.notificationSubject"},mobileUserInvitedByBot:{defaultMessage:"You have been invited",id:"pushNotifications.mobileUserInvitedByBot.notificationSubject"},userInvitedToSpace:{defaultMessage:"{userName} invited you to {workspaceName}",id:"pushNotifications.userInvitedToSpace.notificationSubject"},userInvitedToSpaceByBot:{defaultMessage:"You have been invited to {workspaceName}",id:"pushNotifications.userInvitedToSpaceByBot.notificationSubject"},userEditedCollectionSubject:{defaultMessage:"{userName} edited {collectionName}",id:"pushNotifications.collectionEdited.notificationSubject"},userEditedCollectionPageLayoutSubject:{defaultMessage:"{userName} edited the layout of {collectionName}",id:"pushNotifications.collectionPageLayoutEdited.notificationSubject"},userCreatedCollectionSubject:{defaultMessage:"{userName} created {collectionName}",id:"pushNotifications.collectionCreated.notificationSubject"},collectionDescriptionDeleted:{defaultMessage:"{userName} deleted the description for {collectionName}",id:"pushNotifications.collectionDescriptionDeleted.notificationSubject"},collectionDescriptionCreated:{defaultMessage:"{userName} added a description for {collectionName}",id:"pushNotifications.collectionDescriptionAdded.notificationSubject"},untitledCollectionView:{defaultMessage:"Untitled",id:"pushNotifications.untitledCollection.label"},collectionViewEditedSubject:{defaultMessage:"{userName} edited view {collectionViewName} in {collectionName}",id:"pushNotifications.collectionViewEdited.notificationSubject"},collectionPropertyEditedUnknown:{defaultMessage:"Unknown",id:"pushNotifications.unknownCollectionPropertyName.label"},collectionPropertyEditedSubject:{defaultMessage:"{userName} edited property {propertyType} in {collectionName}",id:"pushNotifications.collectionPropertyEdited.subject"},reminderSubject:{defaultMessage:"Reminder in {pageName}",id:"pushNotifications.reminderChanged.subject"},pageLockedActivity:{defaultMessage:"{userName} locked {pageName}",id:"pushNotifications.pageLocked.subject"},pageUnlockedActivity:{defaultMessage:"{userName} unlocked {pageName}",id:"pushNotifications.pageUnlocked.subject"},emailEditedActivity:{defaultMessage:"{userName} edited their account settings",id:"pushNotifications.emailAccountSettingsEdited.subject"},emptyPropertyBody:{defaultMessage:"Empty",id:"pushNotifications.emptyPropertyValueInCollection.label"},unknownRelationValueChange:{defaultMessage:"Unknown",id:"pushNotifications.unknownRelationPropertyChanged.label"},unknownAuthorInPropertySchemaChange:{defaultMessage:"Unknown author",id:"pushNotifications.unknownAuthorUpdatedProperty.label"},accessRequestedSubject:{defaultMessage:"{userName} requested access to {pageName}",id:"pushNotifications.accessRequested.subject"},editAccessRequestedSubject:{defaultMessage:"{userName} requested edit access to {pageName}",id:"pushNotifications.editAccessRequested.subject"},accessRequestResolvedApprovedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been approved",id:"pushNotifications.accessRequestResolved.approved.subject"},accessRequestResolvedRejectedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been rejected",id:"pushNotifications.accessRequestResolved.subject"},membershipRequestedSubject:{defaultMessage:"{userName} requested to add a new member to {workspaceName}",id:"pushNotifications.membershipRequested.subject"},guestInviteRequestedSubject:{defaultMessage:"{userName} requested to invite a guest to {workspaceName}",id:"pushNotifications.guestInviteRequested.subject"},blockFormatEditPageIconName:{defaultMessage:"Page Icon",id:"pushNotifications.formatChange.pageIcon.label"},pageIconImagePlaceholder:{defaultMessage:"Image",id:"pushNotifications.formatChange.pageIcon.imagePlaceholder"},pageDeletedActivity:{defaultMessage:"{userName} deleted {pageName}",id:"pushNotifications.pageDeleted.subject"},pageRestoredActivity:{defaultMessage:"{userName} restored {pageName}",id:"pushNotifications.pageRestored.subject"},pagePermanentlyDeletedActivity:{defaultMessage:"{userName} permanently deleted {pageName}",id:"pushNotifications.pagePermanentlyDeleted.subject"},userInvitedToTeam:{defaultMessage:"{userName} invited you to {teamName}",id:"pushNotifications.userInvitedToTeam.notificationSubject"},privateContentTransferred:{defaultMessage:"{author} transferred private content from {fromUserName} to you: {pageName}",id:"pushNotifications.privateContentTransferred.notificationSubject"},verificationExpired:{defaultMessage:"Verification expired for {pageName}",id:"pushNotifications.verificationExpired.notificationSubject"},importSuccessful:{defaultMessage:"Your {importSource} import was successful",id:"pushNotifications.importCompleted.notificationSubject"},importFailed:{defaultMessage:"Your {importSource} import has failed",id:"pushNotifications.importFailed.notificationSubject"},exportCompleted:{defaultMessage:"Your workspace export is ready",id:"pushNotifications.exportCompleted.notificationSubject"},inAppNotificationAutomationActionTriggered:{defaultMessage:"{automationName} sent you a message",id:"pushNotifications.inAppNotificationAutomationActionTriggered.notificationSubject"},noConflictsFound:{defaultMessage:"No conflicts found",id:"pushNotifications.noConflictsFound.notificationSubject"},automationTypecheckErrorRaisedSubject:{defaultMessage:"{automationName} is invalid",id:"pushNotifications.automationTypecheckErrorRaised.notificationSubject"},automationTypecheckErrorRaisedBody:{defaultMessage:"Resolve any errors or remove failing steps to enable this automation",id:"pushNotifications.automationTypecheckErrorRaised.notificationBody"},reactionCreated:{defaultMessage:"{userName} reacted to {targetName}",id:"pushNotifications.reactionCreated.notificationSubject"},upgradeRequestCreated:{defaultMessage:"{userName} requested an upgrade",id:"pushNotifications.upgradeRequestCreated.notificationSubject"},appBuilderWorkflowError:{defaultMessage:"A workflow run has failed",id:"pushNotifications.appBuilderWorkflowError.notificationSubject"},appBuilderWorkflowAction:{defaultMessage:"{workflowName} has sent you a message",id:"pushNotifications.appBuilderWorkflowAction.notificationSubject"},customAppBuilderWorkflowActionTitle:{defaultMessage:"From {workflowName}: {customTitle}",id:"pushNotifications.appBuilderWorkflowAction.customNotificationSubject"}});function C(e){const{activity:t,getRecordValue:o}=e,a=t.getEdits();return i().oE((0,s().qt)(i().Bq(a.map((e=>e.authors||[])))).map((e=>{const t=o(e);if(t)return(0,r().D3)({table:e.table,value:t})})))}function L(e,t){const o=e.map((e=>e?(0,r().lR)(t,e):t.formatMessage(P.unknownAuthor)));return function(e,t){if(1===t.length)return t[0];if(2===t.length)return e.formatMessage(P.twoUserNames,{firstAuthor:t[0],secondAuthor:t[1]});if(t.length>2){const o=t.length-1;return e.formatMessage(P.threePlusUserNames,{othersCount:o,firstAuthor:t[0]})}return e.formatMessage(P.defaultPluralizedUserNames)}(t,o)}function B(e){var t;const{recipientUser:o,authors:i}=e,a=i.filter((e=>e.id!==(null==o?void 0:o.id)));if(0===a.length)return;const s=a[0];var r;return s.table===I().oo&&null!==(t=s.asActor)&&void 0!==t&&t.profile_photo?null===(r=s.asActor)||void 0===r?void 0:r.profile_photo:void 0}function F(e){if(!i().Im(e))return e[0].id}function G(e){const{blockValue:t,getRecordValue:o,userTimeZone:i,intl:a}=e,s=h().Bj6.fromBlock(t),r=h().b4_.fromGetRecordValueFn(o);return s.getRenderTitleWithEmojiOrPlaceholder({getRecordModel:r,userTimeZone:i,intl:a})}function Z(e){return function(e){const{activity:t,getRecordValue:o,pageVisitSource:i,userTimeZone:a,intl:s}=e,r=h().b4_.fromGetRecordValueFn(o),n=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;if(n){const c=o({table:j().ev,id:n,spaceId:t.space_id});if(c){return{url:h().Bj6.fromBlock(c).getRenderUrl({getRecordModel:r,baseUrl:e.baseURL,pageVisitSource:i}),title:G({intl:s,blockValue:c,getRecordValue:o,userTimeZone:a})}}return{url:e.baseURL||"/",title:s.formatMessage(P.untitledBlockTitle)}}if(t.collection_id)return H(e);if("user-invited"===t.type){const i=function(e){const{activity:t}=e,o=h().b4_.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel);if(!t.permission_group_id)return;const i=ae({spaceId:t.space_id,permissionGroupId:t.permission_group_id,getRecordModel:o});if(i)return{icon:i.getIcon(),name:i.getName()};return}({activity:t,getRecordValue:o}),a=r({table:S().NX,id:t.space_id});if(a&&i)return{title:se(s,i),url:a.getRenderUrl({baseUrl:e.baseURL})}}else{if("team-membership-edited"===t.type)return D(e);if("access-requested"===t.type){const o=r({id:t.getAccessRequestId(),table:v().O,spaceId:t.space_id});if(o&&o.isTeamMembershipRequest())return D(e)}}return O(e)}(e).title.replaceAll(/[\r\n]+/g," ")}function q(e){const{activity:t}=e,o=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;return o||(t.collection_id?t.collection_id:void 0)}function D(e){const{activity:t,getRecordValue:o,intl:i}=e,a=h().b4_.fromGetRecordValueFn(o),s=e.baseURL||"/",r=i.formatMessage(P.untitledTeamName);if(!t.team_id)return{url:s,title:r};const n=a({table:A().yK,id:t.team_id}),c=a({table:S().NX,id:t.space_id});return{url:(null==c?void 0:c.getRenderUrl({baseUrl:e.baseURL}))??s,title:(null==n?void 0:n.getRenderTitleWithEmojiOrPlaceholder({intl:i}))??r}}function W(e){return O(e).title}function O(e){const{activity:t,getRecordValue:o,intl:i}=e,a=o({table:S().NX,id:t.space_id});if(a){const t=h().Bj6.fromSpace(a);return{title:t.getRenderTitleWithEmojiOrPlaceholder({intl:i}),url:t.getRenderUrl({baseUrl:e.baseURL})}}return{url:e.baseURL||"/",title:i.formatMessage(P.untitledSpaceName)}}function $(e){return H(e).title}function H(e){const{activity:t,getRecordValue:o,pageVisitSource:i,userTimeZone:a,intl:s}=e;if(t.collection_id){const r=o({table:U().Vl,id:t.collection_id,spaceId:t.space_id});if(r){const t=h().Bj6.fromCollection(r),o=h().b4_.fromGetRecordValueFn(e.getRecordValue),n=t.getRenderTitleWithEmojiOrPlaceholder({getRecordModel:o,userTimeZone:a,intl:s});return{url:t.getRenderUrl({getRecordModel:o,baseUrl:e.baseURL,pageVisitSource:i}),title:n}}return{url:e.baseURL||"/",title:s.formatMessage(P.untitledCollectionName)}}return{url:e.baseURL||"/",title:s.formatMessage(P.untitledCollectionName)}}function z(e){const{activity:t,getRecordValue:o,intl:i}=e;if("in-app-notification-automation-action-triggered"===t.type||"automation-typecheck-error-raised"===t.type){const e=h().b4_.fromGetRecordValueFn(o),a=e({table:R().yB,id:t.getEdits()[0].automation_id,spaceId:t.space_id});return(null==a?void 0:a.getNameWithDefault(e,i))??(0,n().PK)(i)}}function Y(e){if(e.blockValue.properties)return(0,k().r4)({intl:e.intl,textValue:e.blockValue.properties.title,getRecordModel:h().b4_.fromGetRecordValueFn(e.getRecordValue),userTimeZone:e.userTimeZone})}function K(e,t){const o=(0,M().an)(t,void 0);return e.formatMessage(o)}function Q(e){let{userTimeZone:t,activity:o,getRecordValue:a,pageVisitSource:s,intl:r,experimentService:n,collectionFeatureGates:c}=e;const d=o.getEdits();if(d.length){const e=[];d.forEach((t=>{"permission-created"===t.type?e.push(t.permission_data):"permission-deleted"===t.type?e.push({...t.permission_data,role:"none"}):"permission-restriction-created"===t.type||"permission-restriction-deleted"===t.type?(t.permission_data.calculated_changes||[]).forEach((t=>{let[o,i]=t;e.push(i)})):e.push(t.permission_data.after)}));const u=i().oE(e.sort(M().zK).map((e=>{if("user_permission"===e.type){const t=a({table:I().oo,id:e.user_id}),o=(0,V().c6)(r,t),i=K(r,e.role);return r.formatMessage(P.userNameWithRole,{userName:o,permissionLevel:i})}if("space_permission"===e.type){const i=W({intl:r,activity:o,getRecordValue:a,userTimeZone:t,pageVisitSource:s,experimentService:n,collectionFeatureGates:c}),l=K(r,e.role);return r.formatMessage(P.spaceNameWithRole,{spaceName:i,permissionLevel:l})}if("public_permission"===e.type){const t=K(r,e.role);return r.formatMessage(P.publicPermissionRoleLabel,{permissionLevel:t})}if("bot_permission"===e.type){const t=a({table:_().GP,id:e.bot_id}),o=(0,l().Hg)(t),i=K(r,e.role);return r.formatMessage(P.botNameWithRole,{botName:o,permissionLevel:i})}})));return r.formatList(u,{type:"conjunction",style:"narrow"})}}function X(e){const{intl:t}=e;switch(e.blockValue.type){case c().xd.text:case c().xd.encryptedText:case c().xd.header:case c().xd.subHeader:case c().xd.subSubHeader:case c().xd.factory:case c().xd.equation:case c().xd.code:return Y(e);case c().xd.toggle:return`â–¸ ${Y(e)}`;case c().xd.bulletedList:return`â€¢ ${Y(e)}`;case c().xd.numberedList:return`1. ${Y(e)}`;case c().xd.quote:return`â€œ${Y(e)}â€`;case c().xd.toDo:return(function(e){let{blockValue:t}=e;return p().wu(t.properties&&t.properties.checked)}(e)?"âœ“ ":"â–¢ ")+Y(e);case c().xd.file:case c().xd.bookmark:return`ðŸ”— ${Y(e)}`;case c().xd.embed:case c().xd.framer:case c().xd.whimsical:case c().xd.mixpanel:case c().xd.miro:case c().xd.abstract:case c().xd.sketch:case c().xd.excalidraw:case c().xd.replit:case c().xd.hex:case c().xd.deepnote:case c().xd.tweet:case c().xd.gist:case c().xd.maps:case c().xd.invision:case c().xd.video:case c().xd.audio:case c().xd.image:return t.formatMessage(P.imageInPushNotification,{imageEmoji:"ðŸ–¼"});case c().xd.drive:return function(e){const{blockValue:t}=e,o=(0,g().v)(h().Bj6.fromBlock(t));return o&&o.title?o.title:G(e)}(e);case c().xd.page:case c().xd.collectionView:case c().xd.collectionViewPage:return G(e);case c().xd.tableRow:return function(e){var t;const{blockValue:o,getRecordValue:i,userTimeZone:a,intl:s}=e,r=i({table:o.parent_table,id:o.parent_id,spaceId:o.space_id});if(!r||!o)return;const n=o.properties,c=(null===(t=r.format)||void 0===t?void 0:t.table_block_column_order)||[];return c&&n?c.map((e=>(0,k().r4)({textValue:n[e],getRecordModel:h().b4_.fromGetRecordValueFn(i),userTimeZone:a,intl:s}))).join(", "):void 0}(e)}}function J(e){const{getRecordValue:t,baseURL:o,userTimeZone:i,intl:a,collectionFeatureGates:s}=e,r=t({table:j().ev,id:e.blockId});if(r){if("page"===r.type){const n=(0,N().zN)({block:r,getRecordValue:t});if(n){const o=u().Dp(n),i=o[e.property],c=i?i.name:void 0,l=ee({property:e.property,schema:o,block:r,getRecordValue:t,userTimeZone:e.userTimeZone,baseURL:e.baseURL,intl:a,experimentService:e.experimentService,collectionFeatureGates:s})||a.formatMessage(P.emptyPropertyBody);return a.formatMessage(P.propertyNameAndValueNotificationBody,{propertyName:c,propertyValue:l})}return X({intl:a,blockValue:r,getRecordValue:t,baseURL:o,userTimeZone:i})}return X({intl:a,blockValue:r,getRecordValue:t,baseURL:o,userTimeZone:i})}}function ee(e){const{property:t,schema:o,getRecordValue:i,userTimeZone:a,baseURL:n,intl:c,experimentService:l,collectionFeatureGates:d}=e,g=o[t],N=h().Bj6.fromBlock(e.block);if(!N.getProperties()||!g)return;const y=N.getProperties()[t];if("formula"===g.type){const e=h().b4_.fromGetRecordValueFn(i),r=(0,b().primitiveFormulaValueFromPropertySchema)({schema:o,property:t,blockModel:N,getRecordModel:e,intl:c,userTimeZone:a,depth:0,resultCache:new Map,regExpCache:new Map,experimentService:l,collectionFeatureGates:d});return m().kC(r)?(0,f().ZF)({allowRelativeDates:!0,intl:c,value:r,userTimeZone:a}):"boolean"==typeof r?r?u().I1:u().oP:(0,s().Et)(r)?r.toString():r}if("person"===g.type)return c.formatList(p().e5({textValue:y,propertySchema:g,blockCreatorPointer:N.getCreatedByPointer()}).map((e=>{const t=i(e),o=(0,r().D3)({table:e.table,value:t});return(0,r().lR)(c,o)})),{type:"conjunction",style:"narrow"});if("created_by"===g.type){const e=N.getCreatedByPointer();if(!e)return c.formatMessage(P.unknownAuthorInPropertySchemaChange);const t=i(e),o=t&&(0,r().D3)({table:e.table,value:t});return o?(0,r().lR)(c,o):c.formatMessage(P.unknownAuthorInPropertySchemaChange)}return"created_time"===g.type?(0,f().W_)(N.getCreatedTime(),"short",c.locale,a):y?te({propertySchema:g,textValue:y,getRecordValue:i,userTimeZone:a,baseURL:n,intl:c,experimentService:l,collectionFeatureGates:d}):void 0}function te(e){const{propertySchema:t,textValue:o,getRecordValue:i,userTimeZone:s,baseURL:n,intl:c,collectionFeatureGates:l}=e;if("title"===t.type||"text"===t.type||"geo_point"===t.type)return(0,k().r4)({intl:c,textValue:o,getRecordModel:h().b4_.fromGetRecordValueFn(i),userTimeZone:s});if("select"===t.type){const e=t.options||[];return p().L3(o,e)}if("multi_select"===t.type){const e=t.options||[];return c.formatList(p().o2(o,e),{type:"conjunction",style:"narrow"})}if("checkbox"===t.type)return p().wu(o)?u().I1:u().oP;if("date"===t.type){const e=(0,d().b)(o);if(e)return(0,f().ZF)({allowRelativeDates:!0,intl:c,value:e,date_format:t.date_format,time_format:t.time_format,userTimeZone:s})}else{if("person"===t.type)return c.formatList(p().e5({textValue:o,propertySchema:t,blockCreatorPointer:void 0}).map((e=>{const t=i(e),o=(0,r().D3)({table:e.table,value:t});return(0,r().lR)(c,o)})),{type:"conjunction",style:"narrow"});if("relation"===t.type){const e=p().bG({relationValue:p().n(o),getRecordModel:h().b4_.fromGetRecordValueFn(i),propertySchema:t,includeDeleted:l.relations_show_deleted,includeInvalidCollection:l.relations_show_invalid_collection,includeNoAccess:l.relations_show_no_access});return c.formatList(e.map(i).map((e=>e?G({intl:c,blockValue:e,getRecordValue:i,baseURL:n,userTimeZone:s}):c.formatMessage(P.unknownRelationValueChange))),{type:"conjunction",style:"narrow"})}if("number"===t.type){const e=p().Me(o);if(void 0!==e)return e.toString()}else if("auto_increment_id"===t.type){const e=p().On(o);if(void 0!==e)return e.toString()}else{if("file"===t.type)return c.formatList(p().pJ(o).map((e=>e.name||e.url)),{type:"conjunction",style:"narrow"});if("url"===t.type||"phone_number"===t.type||"email"===t.type)return(0,T().k4p)(o);if("created_by"===t.type)return;if("created_time"===t.type)return;if("formula"===t.type)return;if("rollup"===t.type)return;if("last_edited_by"===t.type)return;if("last_edited_time"===t.type)return;if("last_visited_time"===t.type)return;if("button"===t.type)return;if("status"===t.type)return p().RZ(o,t);if("location"===t.type)return;if("verification"===t.type){const e=w().U1(o),t=e?w().B2(e):{type:"none"};if("none"===t.type)return c.formatMessage(w().nl.none);const a=i(t.actorPointer),n=(0,r().D3)({table:t.actorPointer.table,value:a}),l=(0,r().lR)(c,n);return"verified"===t.type&&t.isIndefinite?c.formatMessage(w().nl.verifiedIndefinitely,{actor:l}):c.formatMessage(w().nl.verifiedUntil,{actor:l,datetime:E().T2({dateTime:t.dateTimeRange.end,intl:c,userTimeZone:s,displayInUserTimezone:!1,alwaysIncludeTimezone:!0})})}(0,a().HB)(t)}}}function oe(e){if("page_icon"===e.formatProperty)return e.intl.formatMessage(P.blockFormatEditPageIconName)}function ie(e){const{formatProperty:t,block:o,getRecordValue:i,intl:a}=e;if("page_icon"===t){const e=h().Bj6.fromBlock(o).getRenderIcon({getRecordModel:h().b4_.fromGetRecordValueFn(i)});return e?(0,y().A)(e.icon)?e.icon:a.formatMessage(P.pageIconImagePlaceholder):a.formatMessage(P.emptyBlockEditedProperty)}}function ae(e){const t=h().b4_.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel),{spaceId:o,permissionGroupId:i}=e;return t({table:x().n,id:(0,x().T1)({spaceId:o,spacePermissionGroupId:i}),spaceId:o})}function se(e,t){if(t){return[(0,y().A)(t.icon)?t.icon:void 0,t.name.length>0?t.name:e.formatMessage(P.untitledPermissionGroupName)].filter(Boolean).join(" ")}return e.formatMessage(P.defaultPermissionGroupName)}function re(e){const t=h().b4_.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel),{spaceId:o,teamId:i}=e;return t({table:A().yK,id:i,spaceId:o})}function ne(e){switch(e){case"block-property-edited":case"reacted":case"commented":case"permission-group-mentioned":case"team-mentioned":case"reminder":case"user-invited":case"in-app-notification-automation-action-triggered":case"user-mentioned":case"app-builder-notification":return!0;case"access-requested":case"access-request-resolved":case"email-edited":case"private-content-transferred":case"team-membership-edited":case"verification-expired":case"export-completed":case"import-completed":case"no-conflicts-found":case"automation-typecheck-error-raised":case"block-edited":case"collection-edited":case"collection-page-layout-edited":case"collection-property-edited":case"collection-row-created":case"collection-row-deleted":case"collection-view-edited":case"page-deleted":case"page-locked":case"page-permanently-deleted":case"page-restored":case"page-unlocked":case"permissions-edited":case"top-level-block-created":case"upgrade-request-created":case"top-level-block-deleted":return!1;default:return(0,a().ub)(e),!1}}}}]);