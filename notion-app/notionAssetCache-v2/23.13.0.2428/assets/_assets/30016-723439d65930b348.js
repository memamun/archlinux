"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[30016],{1234:(e,s,i)=>{i.d(s,{q:()=>V});i(898992),i(354520),i(581454);var t=i(296540),n=()=>i(484714),o=()=>i(56366),r=()=>i(401497),a=()=>i(413267),l=()=>i(68263),m=()=>i(464192),d=()=>i(959013),c=()=>i(534177),u=()=>i(284371),p=()=>i(760217),g=()=>i(928600),h=()=>i(939740),b=()=>i(89924),f=()=>i(125565),v=()=>i(722872),x=()=>i(653953),y=()=>i(976721),I=()=>i(932267);var S=()=>i(351360),P=()=>i(265665),j=()=>i(726360),A=()=>i(31082),C=()=>i(861481),M=()=>i(920410),w=()=>i(663590),k=()=>i(928074),_=()=>i(437487),T=()=>i(328347),R=()=>i(859428),N=()=>i(805025),D=()=>i(629027),L=()=>i(962730),B=i(474848);function W(e){const{store:s,publicPermission:i,permissionItemArgs:o,menuListItemProps:c,onClose:u}=e,{permissionItem:g,from:h}=i,{sudoModeStore:b,location:f}=o,v=(0,n().v3)(),{isPhone:x,isMobile:S}=(0,n().Y0)(),P=(0,m().v)(i.permissionItem),j=(0,D().P)({store:s}),A=j.disabled,C=(0,t.useCallback)((async()=>{const e=(0,l().Yi)(h),i=(0,I().u)(g,"reader");await(0,y().Hc)({oldPermissionItem:g,newPermissionItem:i,wasInherited:e!==s.id,environment:v,store:s,sudoModeStore:b,location:f}),u()}),[v,s,g,h,b,f,u]),M=(0,r().IS)((e=>({menuItemIcon:{height:16,width:16,fill:e.icon.secondary,...A&&{fill:e.icon.tertiary}},menuItemDesktopIconStyle:{...S?{marginTop:5,marginBottom:4,marginLeft:13,marginRight:6}:{marginLeft:0},alignSelf:"center"},menuItemContainer:{minHeight:28,marginBottom:2,lineHeight:"unset",...x&&{paddingTop:N().T3,paddingBottom:N().T3},color:e.text.primary,...A&&{color:e.text.tertiary}}})),[S,x,A]);let w;return A&&"space"===j.disabledBy&&(w=(0,B.jsx)(d().sA,{defaultMessage:"Workspace admin has disabled this sharing permission",id:"publicShareLinkItem.menuItemTooltip.publicSharingDisabledWorkspace"})),A&&"team"===j.disabledBy&&(w=(0,B.jsx)(d().sA,{defaultMessage:"Teamspace admin has disabled this sharing permission",id:"publicShareLinkItem.menuItemTooltip.publicSharingDisabledTeamspace"})),(0,B.jsx)(R().A,{renderTooltip:e=>w,placement:L().W.Bottom,disableTooltip:!A,render:e=>(0,B.jsx)(p().A,{...c,...e,title:(0,B.jsx)(d().sA,{defaultMessage:"Anyone on the web with link",id:"publicShareLinkItem.menuItem.title"}),shouldWrapTitle:!0,shouldWrapCaption:!0,style:M.menuItemContainer,icon:(0,T().h)(M.menuItemIcon),desktopIconStyle:M.menuItemDesktopIconStyle,right:P?(0,a().b)({visibility:"visible",height:14,width:14}):void 0,disabled:A,onClick:C})})}var E=()=>i(931429),K=()=>i(329105);const O=[{key:"trustedDomain",title:()=>{},caption:()=>{},icon:()=>{}}],U={key:"publicShareLink",title:()=>{},caption:()=>{},icon:()=>{}};function V(e){const{store:s,spacePermission:i,sudoModeStore:T,location:R,isRestricted:N,trustedDomainPermission:D,publicPermission:L,showPublicShareLinkPermission:V,parentCloseCallback:z,handleSpacePermissionChange:G,permissionItemArgs:H,onlyShowPrivateSpaceVisibility:Y}=e,q=(0,n().v3)(),{isMobile:$,isTablet:Q}=(0,n().Y0)(),X=(0,o().K8)((()=>(0,w().FI)()),[]),Z=(0,o().K8)((()=>(0,w().sh)()),[]),J=(0,o().K8)((()=>S().default.state.currentSpaceStore),[]),ee=(0,M().W)(i.permissionItem,Z),se=(0,M().W)(i.permissionItem,!1),ie=i.from,te=(0,l().Yi)(ie),ne=!(ie.table===s.table&&te===s.id),oe=(0,o().K8)((()=>{const{currentSpaceStore:e}=S().default.state;return!!e&&s.isTopLevelWorkspacePage(e.id)}),[s]),re=(0,x().X)(),ae=(0,o().K8)((()=>{const e=k().QJ({store:s});return e?(0,M().W)(e):"private"}),[s]),le=(0,l().Tt)((null==D?void 0:D.permissionItem.role)??"none"),me=(0,j().H)(),de=(0,o().K8)((()=>(0,k().pQ)({trustedDomainsStore:me})),[me]),ce=(0,K().NR)(X,Z,Y);(0,t.useEffect)((()=>{null!=J&&J.id&&A().V0({environment:q,spaceId:J.id,pageId:s.id,pageVisibility:se,hasTrustedDomainPermission:le,hasPublicShareLinkPermission:!(null==L||!L.permissionItem)&&(0,m().v)(L.permissionItem),shareMenuSessionId:_().Ay.state.sessionId})}),[null==J?void 0:J.id,s.id,se,le,q,L]);const ue=(0,o().K8)((()=>(0,k().WG)()),[]),pe=de&&D&&!le&&!ue?[...ce,...O]:V?[...ce,U]:ce,ge=(0,t.useCallback)((async()=>{let e=se;"private"===se&&(e="open");const t=i.permissionItem,n=F(t,se,e);await(0,y().o5)({oldPermissionItem:t,newRole:n,wasInherited:ne,environment:q,store:s,sudoModeStore:T,location:R,restrictingVisibility:!1}),z()}),[q,ne,R,z,se,i.permissionItem,s,T]),he=(0,r().IS)((e=>{const s={width:14,fill:$?e.regularIconColor:X?e.regularTextColor:e.mediumTextColor};return{icon:{fill:$?e.regularIconColor:X?e.regularTextColor:e.mediumTextColor,width:K().eo},iconContainer:{...$?{marginLeft:13,marginTop:5,marginBottom:4}:{marginLeft:X?0:9},...X?{marginRight:0}:{alignSelf:"center"},...Z?{alignSelf:"center"}:{}},hiddencheckmark:{...s,visibility:"hidden"},selectedCheckmark:{...s,visibility:"visible"},checkmarkContainer:{...X?{marginLeft:2}:{marginLeft:12}},selectedTitle:X?{}:{fontWeight:u().Wy.semibold},titleStyle:X&&$?{marginLeft:4}:{},mobileScroller:{...X?{background:e.surface.wash}:{border:`1px solid ${e.regularDividerColor}`,borderRadius:8,marginBottom:24}},mobileButton:{paddingTop:8,paddingBottom:8},mobileButtonDivider:{borderBottom:`1px solid ${e.regularDividerColor}`},caption:{whiteSpace:"normal"},sectionMenuItem:{...X&&!$?{paddingTop:4,paddingBottom:4}:{},...X&&$?{overflow:"hidden",background:e.buttonBackground,borderRadius:12,marginLeft:16,marginRight:16,marginBottom:16,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,padding:void 0}:{}},menuList:{...X&&$?{width:"100%",margin:"0 auto"}:{}},header:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:e.surface.wash,paddingTop:12,paddingBottom:20},headerLabel:{fontSize:16,fontWeight:u().Wy.semibold}}}),[$,X,Z]);if(!J)return null;const be=!!L&&(0,m().v)(L.permissionItem);return(0,B.jsx)(g().A,{menuType:v().gu.Popup,disableScroller:!0,scrollerStyle:$?he.mobileScroller:{},height:$&&X?Q?"100%":"50vh":void 0,minWidth:$&&X?"100%":void 0,maxWidth:$&&X?"100%":void 0,maxHeight:$&&X?"100%":void 0,header:$&&X?(0,B.jsx)("div",{style:he.header,children:(0,B.jsx)(f().A,{style:he.headerLabel,children:(0,B.jsx)(d().sA,{defaultMessage:"General access",id:"PermissionRoleSelect.Header.GeneralAccess"})})}):void 0,children:(0,B.jsx)(h().Ay,{type:h().Oh.Vertical,initialFocus:void 0,style:$&&X?he.menuList:void 0,sections:[{key:"visibilityOptions",render:e=>(0,B.jsx)(b().A,{...e,disableDesktopPadding:$,style:he.sectionMenuItem}),items:pe.map(((e,t)=>{const n=e.key;if("trustedDomain"===n)return D?{key:"trusted_domain_item",action:async()=>{},render:e=>(0,B.jsx)(E().A,{store:s,trustedDomainPermission:D,permissionItemArgs:H,renderStyle:"permissionSelectOption",selectTrustedDomainHandler:ge,menuListItemProps:e})}:void 0;if("publicShareLink"===n)return L?{key:"public_share_link",action:()=>{},render:e=>(0,B.jsx)(W,{store:s,publicPermission:L,permissionItemArgs:H,menuListItemProps:e,onClose:z})}:void 0;const o=function(e,s){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=arguments.length>3?arguments[3]:void 0;if(t)return!1;if(e===s)return!0;if(i&&("unlisted"===e&&"open"===s||"open"===e&&"unlisted"===s))return!0;return!1}(ee,n,Z,be),r=o?he.selectedCheckmark:he.hiddencheckmark,l=t!==K().Gm.length-1,m={...X?{minHeight:28}:{},...$?he.mobileButton:{},...$&&l?he.mobileButtonDivider:{},...X&&l&&!$&&{marginBottom:2}},d=e.caption({isShareMenuRedesignEnabled:X});return{key:n,render:s=>(0,B.jsx)(p().A,{title:X?(0,B.jsx)(f().A,{isMultiline:!0,children:e.title({spaceName:re,isShareMenuRedesignEnabled:!0,type:"full",visibility:se,isSearchableToggleEnabled:Z})}):(0,B.jsx)(P().j,{tooltipStyle:{maxWidth:200},children:e.title({spaceName:re,isShareMenuRedesignEnabled:!1,type:"full"})}),caption:Z?void 0:(0,B.jsx)(f().A,{isSmall:!0,isMultiline:!0,style:he.caption,children:d}),icon:e.icon({style:he.icon,spaceStore:J,isShareMenuRedesignEnabled:X,teamspaceIconSize:20}),desktopIconStyle:he.iconContainer,titleStyle:{...he.titleStyle,...o&&!$?he.selectedTitle:{}},right:(0,a().b)(r),rightStyle:he.checkmarkContainer,buttonStyle:{borderRadius:6},style:m,shouldWrapTitle:X,...s}),action:async()=>{if(o)return;const e=i.permissionItem,t={type:"space_permission",role:F(e,se,n)};"unlisted"===n&&(t.unlisted_timestamp=Date.now());const r=function(e,s){if(e===s)return!1;switch(s){case"open":case"open_unlisted_hybrid":return!1;case"unlisted":return"open"===e;case"private":return!0;default:(0,c().HB)(s)}}(ae,n)&&!N&&!oe,a=await(0,y().Hc)({oldPermissionItem:e,newPermissionItem:t,wasInherited:ne,environment:q,store:s,sudoModeStore:T,location:R,restrictingVisibility:r,trustedDomainsLoggingData:{trustedDomainsPointers:null==me?void 0:me.state.trustedDomainPointers,hasTrustedDomainPermission:le,isTrustedDomainItemEnabled:de}});a&&G&&G({before:e,after:t}),a&&D&&"private"===n&&le&&(0,C().p)({trustedDomainPermission:D,store:s,environment:q,sudoModeStore:T,location:R}),a&&"private"===n&&L&&be&&function(e){const{environment:s,store:i,publicPermission:t,wasInherited:n,location:o,sudoModeStore:r}=e,a=t.permissionItem,l=(0,I().u)(a,"none");(0,y().Hc)({environment:s,store:i,oldPermissionItem:a,newPermissionItem:l,wasInherited:n,location:o,sudoModeStore:r})}({environment:q,store:s,publicPermission:L,wasInherited:ne,location:R,sudoModeStore:T}),z()}}})).filter(c().O9)}]})})}function F(e,s,i){return"private"===i?"none":"private"===s?"editor":e.role}},26934:(e,s,i)=>{i.d(s,{b:()=>p});i(296540);var t=i(474848);const n=(0,i(340498).wt)("arrowsConverging",{viewBox:"0 0 16 16",svg:(0,t.jsx)("path",{d:"M4.47949 13.2667C4.27441 13.2667 4.11263 13.2006 3.99414 13.0684C3.88021 12.9408 3.82324 12.7881 3.82324 12.6104C3.82324 12.3552 3.9349 12.1569 4.1582 12.0157L4.70508 11.667C4.94206 11.5075 5.20866 11.2956 5.50488 11.0313C5.80566 10.7624 6.09277 10.4594 6.36621 10.1221C6.64421 9.78488 6.87207 9.42485 7.0498 9.04204C7.22754 8.65923 7.31641 8.27414 7.31641 7.88677V4.46196H8.67676V7.88677C8.67676 8.27414 8.76562 8.65923 8.94336 9.04204C9.12109 9.42485 9.34668 9.78716 9.62012 10.129C9.89355 10.4662 10.1807 10.767 10.4814 11.0313C10.7822 11.2956 11.0511 11.5075 11.2881 11.667L11.835 12.0157C12.0583 12.1569 12.1699 12.3552 12.1699 12.6104C12.1699 12.7972 12.1107 12.9522 11.9922 13.0752C11.8737 13.2028 11.7119 13.2667 11.5068 13.2667C11.3109 13.2667 11.1195 13.2051 10.9326 13.0821L10.5771 12.8428C10.3447 12.6879 10.0941 12.4942 9.8252 12.2618C9.56087 12.0248 9.30339 11.7741 9.05273 11.5098C8.80208 11.2455 8.58333 10.9903 8.39648 10.7442C8.20964 10.4981 8.07975 10.2839 8.00684 10.1016H7.98633C7.91341 10.2839 7.78125 10.5004 7.58984 10.751C7.40299 10.9971 7.18424 11.2523 6.93359 11.5167C6.68294 11.7764 6.42318 12.0248 6.1543 12.2618C5.88997 12.4942 5.64388 12.6879 5.41602 12.8428L5.06055 13.0821C4.8737 13.2051 4.68001 13.2667 4.47949 13.2667ZM6.29102 5.36431C6.02669 5.36431 5.86263 5.28228 5.79883 5.11821C5.73503 4.95415 5.77832 4.76502 5.92871 4.55083L7.5625 2.26079C7.68555 2.08306 7.83138 1.99647 8 2.00103C8.16862 2.00103 8.31445 2.08761 8.4375 2.26079L10.0576 4.55767C10.2126 4.7673 10.2559 4.95415 10.1875 5.11821C10.1237 5.28228 9.96191 5.36431 9.70215 5.36431H6.29102Z"})});var o=()=>i(959013),r=()=>i(284371),a=()=>i(901389),l=()=>i(579627),m=()=>i(317909),d=()=>i(761652),c=()=>i(125565),u=()=>i(247123);async function p(e){const{environment:s,useSudoMode:i,store:p,permissionChanges:g,from:h,shareMenuSessionId:b,isRedesignEnabled:f,parentStore:v}=e,x={type:"restore",permissionChanges:g},y=x.permissionChanges.length>0;(f?!y||(await a().Gh({message:(0,u().r6)(x,f),description:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c().A,{isSmall:!0,isMultiline:!0,children:(0,t.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.relink.caption",defaultMessage:"The following settings will be restored to match {parentName}",values:{parentName:(0,t.jsx)(d().A,{store:v,style:{fontWeight:r().Wy.regular},useInvertedColors:!1})}})}),(0,t.jsx)(u().f2,{openState:x})]}),acceptColor:"blue",acceptLabel:(0,u().QU)(x,f),icon:n({height:24,width:24})})).accept:(await a().Gh({message:(0,u().r6)(x),acceptLabel:(0,u().QU)(x),cancelLabel:(0,t.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,t.jsx)(u().f2,{openState:x})})).accept)&&(p.getPermissionItemsStore().canAdmin()?m().createAndCommit({userAction:"PermissionsRestoreBanner.restoreRestrictedPermissions",environment:s,canUndo:!0,useSudoMode:i,perform:e=>{l().P8({environment:s,store:p,transaction:e,from:h,shareMenuSessionId:b})}}):l().YD({environment:s,store:p,from:h,shareMenuSessionId:b}))}},31082:(e,s,i)=>{i.d(s,{Bw:()=>l,V0:()=>g});i(898992),i(354520),i(581454);var t=()=>i(534177),n=()=>i(134696),o=()=>i(989423),r=()=>i(680074),a=()=>i(159026);function l(e){const{environment:s,internalDomains:i,inviteResults:o,destination:l,metadata:g}=e;0!==o.length&&(function(e){var s;const{addedPermissions:i,environment:t,internalDomains:o,metadata:a,destination:l}=e;if(0===i.length)return;const m=i.map((e=>e.invite.inviteTarget)),d=i.map((e=>e.blockPermissionItem)),u=i.filter(c).filter((e=>void 0!==e.invite.internalDomain)).map((e=>e.inviteeUserId));n().Jg(t,{domainType:(0,r().FX)(),internal_domains:o??[],invite_flow_id:a.inviteFlowId,invite_message_length:(null===(s=a.inviteMessage)||void 0===s?void 0:s.length)??0,invite_origin:a.inviteOrigin,invite_targets:m,invitee_ids_with_internal_domain:u,invitee_ids_with_internal_domain_enforced:[],is_onboarding:!1,is_space:!1,permission_items:d,role:l.blockRole,share_menu_session_id:a.shareMenuSessionId})}({addedPermissions:o.filter(u),environment:s,internalDomains:i,destination:l,metadata:g}),function(e){var s;const{createdMembers:i,environment:t,internalDomains:o,metadata:a,destination:l}=e;if(0===i.length)return;const m=i.map((e=>e.invite.inviteTarget)),d=i.map((e=>e.spacePermissionItem)),c=i.filter((e=>void 0!==e.invite.internalDomain)).map((e=>e.inviteeUserId)),u=i.filter((e=>e.wasInternalDomainEnforced)).map((e=>e.inviteeUserId));if(n().Jg(t,{domainType:(0,r().FX)(),internal_domains:o??[],invite_flow_id:a.inviteFlowId,invite_message_length:(null===(s=a.inviteMessage)||void 0===s?void 0:s.length)??0,invite_origin:a.inviteOrigin,invite_targets:m,invitee_ids_with_internal_domain:c,invitee_ids_with_internal_domain_enforced:u,is_onboarding:!1,is_space:!0,permission_items:d,role:l.spaceRole,share_menu_session_id:a.shareMenuSessionId}),u.length>0){const e=o?o.map((e=>e.url)):[];n().hp(t,{invite_flow_id:a.inviteFlowId,invite_origin:a.inviteOrigin,user_ids:u,internal_domains:e})}}({createdMembers:o.filter(p),environment:s,internalDomains:i,destination:l,metadata:g}),function(e){const{createdGuestRequests:s,environment:i,destination:o,metadata:r}=e;if(0===s.length)return;const a=s.filter((e=>void 0!==e.invite.internalDomain)).map((e=>{var s;return null===(s=e.invite.invitee)||void 0===s?void 0:s.email})).filter(t().O9);n().xF(i,{internal_guest_enforcement:!1,invite_flow_id:r.inviteFlowId,is_bot:!1,is_internal_domain:a.length>0,invitee_emails_with_internal_domain:a,invitee_emails_with_internal_domain_enforced:[],role:o.blockRole,space_role:o.spaceRole,user_count:s.length})}({createdGuestRequests:o.filter(m),environment:s,destination:l,metadata:g}),function(e){const{createdMemberRequests:s,environment:i,destination:o,metadata:r}=e;if(0===s.length)return;const l=s.filter((e=>void 0!==e.invite.internalDomain)).map((e=>{var s;return null===(s=e.invite.invitee)||void 0===s?void 0:s.email})).filter(t().O9),m=s.filter((e=>e.wasInternalDomainEnforced)).map((e=>{var s;return null===(s=e.invite.invitee)||void 0===s?void 0:s.email})).filter(t().O9);n().RH(i,{from:"share_menu",invite_flow_id:r.inviteFlowId,invite_space_role_selection:a().NJ.workspace_member,is_bot:!1,is_internal_domain:l.length>0,internal_guest_enforcement:m.length>0,invitee_emails_with_internal_domain:l,invitee_emails_with_internal_domain_enforced:m,role:o.blockRole,space_role:o.spaceRole,user_count:s.length})}({createdMemberRequests:o.filter(d),environment:s,destination:l,metadata:g}))}function m(e){return"createdGuestRequest"===e.type}function d(e){return"createdMemberRequest"===e.type}function c(e){return"addedUserPermission"===e.type}function u(e){return!(!c(e)&&!function(e){return"addedGroupPermission"===e.type}(e))}function p(e){return"createdMember"===e.type}function g(e){let{environment:s,spaceId:i,pageId:t,pageVisibility:n,hasTrustedDomainPermission:r,hasPublicShareLinkPermission:a,shareMenuSessionId:l}=e;(0,o().u4)({environment:s,event:{eventName:"general_access_menu_open",eventProperties:{spaceId:i,pageId:t,pageVisibility:n,hasTrustedDomainPermission:r,hasPublicShareLinkPermission:a,shareMenuSessionId:l}}})}},98866:(e,s,i)=>{i.d(s,{x:()=>r});i(898992),i(803949);var t=()=>i(56366),n=()=>i(134217),o=()=>i(749240);function r(){return(0,t().K8)((()=>{const e=o().subscriptionDataStoreInstance.state,s=e?n().Be(e):[],i=new Map;return s.forEach((e=>{i.set(e.userId,e)})),i}),[])}},99162:(e,s,i)=>{i.d(s,{A:()=>x});i(581454),i(296540);var t=()=>i(484714),n=()=>i(56366),o=()=>i(401497),r=()=>i(425736),a=()=>i(854150),l=()=>i(798880),m=()=>i(959013),d=()=>i(747788),c=()=>i(630116),u=()=>i(482705),p=()=>i(87043),g=i(474848);function h(e){const{store:s,teamOwners:i,teamStore:t,teamName:n}=e;if(n){const e=i.map((e=>c().LU.createChildStore(s,{table:l().oo,id:e})));return(0,g.jsx)(u().l,{teamStore:t,ownerStores:e})}return(0,r().s)()}function b(e){let{teamName:s,isCompact:i,isRedesignEnabled:t}=e;return i&&t?(0,g.jsx)(m().sA,{defaultMessage:"Owners",id:"blockPermissionsSettings.permissionItem.teamOwnerAccessV3"}):i&&s?(0,g.jsx)(m().sA,{defaultMessage:"Teamspace owners",id:"blockPermissionsSettings.permissionItem.teamOwnerAccessV2",values:{teamName:s}}):s?(0,g.jsx)(m().sA,{defaultMessage:"Owners of {teamName}",id:"blockPermissionsSettings.permissionItem.teamOwnerAccess",values:{teamName:s}}):(0,g.jsx)(m().sA,{id:"blockPermissionsSettings.permissionItem.teamName.hidden",defaultMessage:"Owners of a private teamspace"})}function f(e){let{teamOwnersCount:s,isCompact:i,isRedesignEnabled:n,permissionItem:o}=e;const{isMobile:r}=(0,t().Y0)();return i&&!n||0===s?null:r&&n&&o?(0,g.jsxs)("div",{children:[(0,g.jsx)(m().sA,{defaultMessage:"{teamOwnersCount, plural, one {{teamOwnersCount} person} other {{teamOwnersCount} people}}",id:"blockPermissionsSettings.teamOwnerPermission.subtitle",values:{teamOwnersCount:s}})," · ",(0,g.jsx)(m().sA,{...(0,d().R)({type:o.type,role:o.role,table:a().yK,isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:!0}).label})]}):(0,g.jsx)(m().sA,{defaultMessage:"{teamOwnersCount, plural, one {{teamOwnersCount} person} other {{teamOwnersCount} people}}",id:"blockPermissionsSettings.teamOwnerPermission.subtitle",values:{teamOwnersCount:s}})}function v(e){const{teamName:s}=e,i=(0,o().IS)((()=>({tooltip:{whiteSpace:"normal",maxWidth:240}})),[]);return s?(0,g.jsx)("div",{style:i.tooltip,children:(0,g.jsx)(m().sA,{defaultMessage:"Applies to all owners of {teamName}",values:{teamName:s},id:"blockPermissionsSettings.teamOwnerPermission.tooltip"})}):null}const x=function(e){let{store:s,blockTeamOwnerPermission:r,isExternalTeam:l,fromPermissionWrapper:m,teamOwnersCount:d,permissionItemArgs:u}=e;const{isMobile:x}=(0,t().Y0)(),y=(0,n().K8)((()=>(0,i(663590).FI)()),[]),{permissionItem:I}=r,S=(0,n().K8)((()=>i(351360).default.state.currentSpaceStore),[]),P=(0,n().K8)((()=>{var e;return i(68263).nl(I)?I.team_id:null===(e=i(108944).Uo(s))||void 0===e?void 0:e.id}),[I,s]),{teamStore:j,teamName:A,teamOwners:C}=(0,n().K8)((()=>{if(!S||!P)return{undefined:void 0};const e=c().h4.createChildStore(S,{table:a().yK,id:P,spaceId:S.id});return{teamStore:e,teamName:e.getName(),teamOwners:e.getOwnerUserIds()}}),[S,P]),M=!l,w=(0,n().K8)((()=>{return d||(void 0!==j?null===(e=(0,i(37433).PF)(j))||void 0===e?void 0:e.ownerCount:void 0);var e}),[j,d]),k=(0,o().IS)((()=>({container:{width:"100%"}})),[]);return j?(0,g.jsx)("div",{style:k.container,className:i(38337).D3T,children:(0,g.jsx)(p().Ay,{isCompact:M,store:s,permissionItem:r.permissionItem,from:r.from,icon:y?(0,g.jsx)(i(173783).A,{size:x&&y?p().Bj:p().Ev}):(0,g.jsx)(h,{store:s,teamName:A,teamStore:j,teamOwners:C}),title:(0,g.jsx)(b,{teamName:A,isCompact:M,isRedesignEnabled:y}),nonInheritedTooltip:(0,g.jsx)(v,{teamName:(0,g.jsx)(i(761652).A,{store:j,useInvertedColors:!0})}),subtitle:(0,g.jsx)(f,{teamOwnersCount:w??0,isCompact:M,isRedesignEnabled:y,permissionItem:r.permissionItem}),upgradeButtonName:"team_owner_permission_item",fromPermissionWrapper:m,...u})}):null}},143106:(e,s,i)=>{i.d(s,{A:()=>l});var t=i(296540),n=()=>i(56366),o=()=>i(87043),r=i(474848);function a(e){let{store:s}=e;const t=(0,i(484714).v3)(),a=t.device.isMobile,l=(0,n().K8)((()=>(0,i(663590).FI)()),[]),m=(0,n().K8)((()=>{var e,n;return s instanceof i(630116).SL?null===(e=(0,i(437622).c2)(t,s))||void 0===e?void 0:e.icon:null===(n=s.getIcon())||void 0===n?void 0:n.icon}),[t,s]),d=(0,i(401497).IS)((e=>({teamOrSpaceIcon:(0,i(623275).iM)({theme:e,size:a&&l?o().Bj:o().Ev,useLargeBorderRadius:l,useLightBackgroundColor:l,icon:m}),iconBoxStyles:l?{color:e.mediumIconColor}:{}})),[m,a,l]),{innerEmojiOrFlatIconSize:c,innerInitialSize:u}=function(e){let{isRedesignEnabled:s,baseSize:i}=e;return s?{innerEmojiOrFlatIconSize:.65*i,innerInitialSize:.75*i}:{innerEmojiOrFlatIconSize:.78*i,innerInitialSize:i}}({isRedesignEnabled:l,baseSize:a&&l?o().Bj:o().Ev});return(0,r.jsx)(i(898808).x,{disabled:!0,store:s,size:a&&l?o().Bj:o().Ev,iconContainerStyles:d.teamOrSpaceIcon,iconBoxStyles:d.iconBoxStyles,innerEmojiOrFlatIconSize:c,innerInitialSize:u})}const l=t.memo(a)},180925:(e,s,i)=>{i.d(s,{A:()=>r});var t=i(296540),n=i(474848);function o(e){let{onClick:s,hovered:o,expanded:r,children:a}=e;const l=(0,i(484714).Y0)().isMobile,[m,d]=t.useState(!1),c=(0,t.useCallback)((()=>d(!0)),[]),u=(0,t.useCallback)((()=>d(!1)),[]),p=(0,i(401497).IS)((e=>{const s=(0,i(623275).iM)({theme:e,size:26,useLargeBorderRadius:!0,useLightBackgroundColor:!0}),t={position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",top:"auto",left:"auto",opacity:o?1:0,transition:"opacity 150ms ease, background 150ms ease",...s,width:24,height:24,borderRadius:4};return{container:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},chevronIconContainer:{background:"unset"},chevronButton:{...t,background:"unset"},chevronContainerHovered:{...t,background:s.background},childrenContainer:{opacity:o?0:1,transition:"opacity 200ms"},chevronIconInnerContainer:{background:"unset",height:24,width:24,borderRadius:4},chevronIcon:{transform:`rotate(${r?90:0}deg)`,transition:"transform 150ms ease",width:16,height:16}}}),[r,o]);return l?(0,n.jsx)(n.Fragment,{children:a}):(0,n.jsxs)("div",{style:p.container,onMouseEnter:c,onMouseLeave:u,children:[(0,n.jsx)(i(704152).A,{disabled:!1,style:m?p.chevronContainerHovered:p.chevronButton,onClick:s,children:(0,n.jsx)(i(99756).A,{type:"square",iconType:"function",iconFn:i(742117).V,containerStyle:p.chevronIconInnerContainer,iconStyle:p.chevronIcon,isMobile:l})}),(0,n.jsx)("div",{style:p.childrenContainer,children:a})]})}const r=t.memo(o)},198463:(e,s,i)=>{i.d(s,{Ay:()=>T,n:()=>M});i(898992),i(354520);var t=i(296540),n=()=>i(56366),o=()=>i(401497),r=()=>i(433847),a=()=>i(68263),l=()=>i(179034),m=()=>i(798880),d=()=>i(959013),c=()=>i(534177),u=()=>i(802790),p=()=>i(125565),g=()=>i(972435),h=()=>i(351360),b=()=>i(630116),f=()=>i(913348),v=()=>i(984804),x=()=>i(678634),y=()=>i(810727),I=i(474848);function S(e){let{blockStore:s,permissionItem:i,inviteTarget:t,mostPermissivePermissions:n,spaceVisibleUserMap:o,permissionItemArgs:r,...a}=e;return"group"===t.type?(0,I.jsx)(j,{inviteTarget:t,blockStore:s,permissionItem:i,mostPermissivePermissions:n,permissionItemArgs:r,menuListItemProps:a}):"existingUser"===t.type?(0,I.jsx)(P,{inviteTarget:t,blockStore:s,permissionItem:i,mostPermissivePermissions:n,permissionItemArgs:r,spaceVisibleUserMap:o,menuListItemProps:a}):((0,c().ub)(t),null)}function P(e){let{inviteTarget:s,blockStore:i,permissionItem:t,mostPermissivePermissions:o,spaceVisibleUserMap:r,permissionItemArgs:a,menuListItemProps:c}=e;const u=(0,d().tz)(),p=(0,n().K8)((()=>b().LU.createChildStore(i,{table:m().oo,id:s.value.id}).getDisplayName(u)||void 0),[i,u,s]),g=(0,y().z)({permissionItem:t,targetType:"user",targetName:p,store:i}),h="user_permission"===(null==o?void 0:o[0].permissionItem.type)?o[0]:{from:{table:l().ev,blockId:i.id},permissionItem:{role:t.role,type:"user_permission",user_id:s.value.id}};return(0,I.jsx)(v().A,{store:i,userPermission:h,showInherited:!1,selectFooter:(0,I.jsx)(M,{targetName:p,targetType:"user",mostPermissivePermissions:o}),spaceVisibleUserMap:r,permissionItemArgs:a,tooltip:g,menuListItemProps:c})}function j(e){let{inviteTarget:s,blockStore:i,permissionItem:t,mostPermissivePermissions:o,permissionItemArgs:m,menuListItemProps:d}=e;const u=(0,n().K8)((()=>{var e;return null===(e=h().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),p=s.value.name,g=(0,y().z)({permissionItem:t,targetType:"group",targetName:p,store:i}),b=(0,n().K8)((()=>function(e){var s;let{targetType:i,targetName:t,mostPermissivePermissions:n}=e;const o=null==n||null===(s=n.filter("user"===i?w:k))||void 0===s?void 0:s[0];if(!o)return[];const l=(0,a().PW)(o.permissionItem.role)?o.permissionItem.role:"none";if("none"===l)return[];return A.map((e=>{if((0,r().sO)(e,l))return;return{role:e,disabledInfo:{isDisabled:!0,disabledMessage:(0,I.jsx)(_,{targetType:i,permissionItem:o.permissionItem,targetName:t})}}})).filter(c().O9)}({targetType:"group",targetName:p,mostPermissivePermissions:o})),[o,p]),v="group_permission"===(null==o?void 0:o[0].permissionItem.type)?o[0]:{from:{table:l().ev,blockId:i.id},permissionItem:{role:t.role,type:"group_permission",group_id:s.value.group_id}};return u?(0,I.jsx)(f().A,{store:i,groupPermission:v,spaceId:u,showInherited:!1,isRemovableOverride:!0,permissionItemArgs:m,tooltip:g,roleItemOverrides:b,menuListItemProps:d}):null}const A=["none","reader","comment_only","content_only_editor","read_and_write","membership_admin","editor"],C={none:g().A.formatMessage(r().Sf.noAccessDescription),reader:g().A.formatMessage(r().Sf.canReadDescription),comment_only:g().A.formatMessage(r().Sf.canCommentDescription),content_only_editor:g().A.formatMessage(r().Sf.canEditContentDescription),read_and_write:g().A.formatMessage(r().Sf.canEditDescription),membership_admin:g().A.formatMessage(r().Sf.membershipAdminDescription),editor:g().A.formatMessage(r().Sf.fullAccessDescription)};function M(e){var s;let{targetType:i,targetName:t,mostPermissivePermissions:n}=e;const l=(0,o().IS)((e=>({divider:{color:`${e.regularDividerColor}`},label:{marginLeft:12,marginRight:12,paddingTop:8,paddingBottom:8}})),[]),m=null==n||null===(s=n.filter("user"===i?w:k))||void 0===s?void 0:s[0];if(!m)return null;const c=(0,a().PW)(m.permissionItem.role)?m.permissionItem:void 0;if(!c||!c.role||"string"!=typeof c.role||"none"===c.role)return null;const h=C[c.role]||g().A.formatMessage(r().Sf.defaultAccessLabel);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(u().A,{dividerColor:l.divider.color,size:1}),(0,I.jsx)(p().A,{style:l.label,isSmall:!0,isMultiline:!0,children:(0,I.jsx)(d().sA,{id:"permissionsItem.generalAccess",defaultMessage:"{userName} will still have {accessLevel} from the {permissionItemName}",values:{permissionItemName:(0,I.jsx)(x()._,{permissionItem:c}),userName:t,accessLevel:h}})})]})}function w(e){switch(e.permissionItem.type){case"space_permission":case"team_permission":case"team_owner_permission":case"explicit_team_permission":case"explicit_team_owner_permission":case"explicit_team_guest_permission":case"group_permission":return!0;case"bot_permission":case"deleted_permission":case"exclusive_user_permission":case"public_permission":case"restricted_permission":case"trusted_domain_permission":case"user_permission":return!1;default:return(0,c().ub)(e.permissionItem),!1}}function k(e){switch(e.permissionItem.type){case"space_permission":case"team_permission":case"team_owner_permission":case"explicit_team_permission":case"explicit_team_owner_permission":case"explicit_team_guest_permission":return!0;case"group_permission":case"bot_permission":case"deleted_permission":case"exclusive_user_permission":case"public_permission":case"restricted_permission":case"trusted_domain_permission":case"user_permission":return!1;default:return(0,c().ub)(e.permissionItem),!1}}function _(e){let{permissionItem:s,targetType:i,targetName:t}=e;return t&&"user"===i?(0,I.jsx)(d().sA,{id:"searchTargetPermissionItem.disabledMessage",defaultMessage:"To restrict {targetUserName}’s access, modify the “{permissionItemName}” setting on this page",values:{targetUserName:t,permissionItemName:(0,I.jsx)(x()._,{permissionItem:s})}}):t&&"group"===i?(0,I.jsx)(d().sA,{id:"searchTargetPermissionItem.disabledMessageForGroup",defaultMessage:"To restrict the {targetGroupName} group’s access, modify the “{permissionItemName}” setting on this page",values:{targetGroupName:t,permissionItemName:(0,I.jsx)(x()._,{permissionItem:s})}}):(0,I.jsx)(d().sA,{id:"searchTargetPermissionItem.disabledMessageWithoutName",defaultMessage:"To restrict access, modify the “{permissionItemName}” setting on this page",values:{permissionItemName:(0,I.jsx)(x()._,{permissionItem:s})}})}const T=t.memo(S)},219249:(e,s,i)=>{i.d(s,{T5:()=>Pe,nU:()=>Se,Ay:()=>Me});i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(898992),i(823215),i(354520),i(672577),i(803949),i(581454);var t=i(296540),n=()=>i(484714),o=()=>i(56366),r=()=>i(401497),a=()=>i(187174),l=()=>i(386164),m=()=>i(68263),d=()=>i(798880),c=()=>i(695608),u=()=>i(959013),p=()=>i(496603),g=()=>i(701763),h=()=>i(449506),b=()=>i(89924),f=()=>i(731320),v=()=>i(698449),x=()=>i(141333),y=()=>i(646736),I=()=>i(756279),S=()=>i(351360),P=()=>i(605402),j=()=>i(508496),A=()=>i(630116),C=()=>i(928074),M=()=>i(623275),w=()=>i(98866),k=()=>i(437487),_=()=>i(913348),T=()=>i(984804),R=()=>i(704262),N=()=>i(464192),D=()=>i(328347),L=()=>i(747788),B=()=>i(38337),W=()=>i(932267),E=()=>i(439616),K=()=>i(463830),O=()=>i(976721),U=()=>i(529864),V=()=>i(87043),F=()=>i(99756),z=i(474848);const G={type:"public_permission",role:"none",is_public_share_link:!1};function H(e){const{store:s,spacePermission:i,publicPermission:a,trustedDomainPermission:l,showTrustedDomainPermission:d,permissionItemArgs:c,fromPermissionWrapper:u,isRestricted:p}=e,{permissionItem:g,from:h}=a,{location:b,sudoModeStore:f}=c,v=(0,n().v3)(),{isMobile:x}=(0,n().Y0)(),y=(0,o().uB)(void 0,K().A),I=(0,o().K8)((()=>!v.currentUser.isLoggedIn()),[v.currentUser]),S="none"!==i.permissionItem.role,P=(0,N().v)(g)?g:{...g,...G},j=(0,t.useCallback)((()=>{y.setState({open:!0})}),[y]),A=(0,t.useCallback)((async e=>{const i=(0,m().Yi)(h)!==s.id;if("string"!=typeof e||!(e in m().TE))return!1;const t=(0,W().u)(g,e);return await(0,O().Hc)({environment:v,store:s,oldPermissionItem:g,newPermissionItem:t,wasInherited:i,location:b,sudoModeStore:f})}),[v,s,g,h,b,f]),C=(0,t.useCallback)((async e=>{const i=(0,m().Yi)(h)!==s.id,t={...g,expiration_timestamp:e};return await(0,O().Hc)({environment:v,store:s,oldPermissionItem:g,newPermissionItem:t,wasInherited:i,location:b,sudoModeStore:f})}),[v,s,g,h,b,f]),M=(0,r().IS)((()=>({container:{width:"100%"},linkExpirationButton:{padding:0}})),[]),w=(0,t.useMemo)((()=>[{role:"none",prefixItem:{key:"link-expiration",render:e=>(0,z.jsx)("div",{...e,children:(0,z.jsx)(E().A,{permissionItem:g,hideIcon:!0,onChange:C,focused:!1,buttonStyle:M.linkExpirationButton})}),action:()=>{}}}]),[g,C,M.linkExpirationButton]);return(0,z.jsx)("div",{style:M.container,className:B().VRj,children:(0,z.jsx)(V().Ay,{store:s,permissionItem:P,from:h,shouldDisable:I,fromPermissionWrapper:u,onClick:j,onChange:A,roleItemOverrides:w,icon:(0,z.jsx)(Y,{}),title:(0,z.jsx)(U().o,{store:s,spacePermission:i,showTrustedDomainPermission:d,trustedDomainPermission:l,publicPermission:a,showPublicShareLinkPermission:!0,isRestricted:p,permissionItemArgs:c,fromPermissionWrapper:u,buttonPopupStore:y,hideHoverStyles:!1,isDisplayOnly:c.shouldDisable??!1,title:(0,z.jsx)(q,{}),onlyShowPrivateSpaceVisibility:S}),subtitle:x?(0,z.jsx)($,{role:g.role}):void 0,upgradeButtonName:"public_share_link_item",isRemovableOverride:!0,renderTitleWithoutUILabelWrapper:!0,...c})})}function Y(){const e=(0,n().v3)().device.isMobile,s=(0,r().IS)((()=>({globeIcon:{width:e?24:18,height:e?24:18}})),[e]);return(0,z.jsx)(F().A,{type:"square",iconType:"function",iconFn:D().h,iconStyle:s.globeIcon,isMobile:e})}function q(){const e=(0,r().IS)((()=>({title:{fontSize:14,whiteSpace:"normal"}})),[]);return(0,z.jsx)("div",{style:e.title,children:(0,z.jsx)(u().sA,{defaultMessage:"Anyone on the web with link",id:"publicShareLinkItem.permissionItem.title"})})}function $(e){const{role:s}=e;return(0,n().v3)().device.isMobile?(0,z.jsx)(u().sA,{...(0,L().R)({type:"public_permission",role:s,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:!0,isPublicShareLink:!0}).label}):null}var Q=()=>i(555857),X=()=>i(851727);function Z(e){const{store:s,spacePermission:i,showSpacePermission:t,trustedDomainPermission:n,showTrustedDomainPermission:o,publicPermission:r,showSitePublicPermission:a,showPublicShareLinkPermission:l,permissionItemArgs:m,isRestricted:d}=e,c=(0,N().v)(r.permissionItem);return(0,z.jsxs)(z.Fragment,{children:[t&&J(i,r,l)&&(0,z.jsx)(X().A,{store:s,spacePermission:i,publicPermission:r,showPublicShareLinkPermission:l&&!c,trustedDomainPermission:n,showTrustedDomainPermission:o,permissionItemArgs:m,fromPermissionWrapper:"permission_list",isRestricted:d}),l&&c&&(0,z.jsx)(H,{store:s,spacePermission:i,publicPermission:r,trustedDomainPermission:n,showTrustedDomainPermission:o,permissionItemArgs:m,fromPermissionWrapper:"permission_list",isRestricted:d}),a&&r&&(0,z.jsx)(Q().P,{store:s,publicPermissionItem:r,permissionItemArgs:m})]})}function J(e,s,i){return!i||("none"!==e.permissionItem.role||"none"===e.permissionItem.role&&!(0,N().v)(s.permissionItem))}var ee=()=>i(891368),se=()=>i(304243),ie=()=>i(560653),te=()=>i(99162),ne=()=>i(631523),oe=()=>i(179034),re=()=>i(614505),ae=()=>i(16006),le=()=>i(108944);function me(e){const{store:s,isExpanded:a,numberOfPeopleInvited:l,inheritedPermissionRole:m,permissionItemArgs:d,onToggle:c}=e,p=(0,n().v3)(),g=p.device.isMobile,h=(0,o().K8)((()=>(0,le().fU)(s)[1]),[s]),[b,f]=t.useState(!1),v=(0,o().K8)((()=>{const e=(0,le().fU)(s)[1];if(e instanceof A().h4)return{icon:(0,z.jsx)(i(898808).x,{disabled:!0,store:e,size:g?V().Bj:V().Ev}),title:e.getName()};if(e instanceof A().Bv){if("page"===e.getType()){const s=e.isEmptyPage();return{icon:(0,z.jsx)(re().A,{disabled:!0,icon:e.getIcon(),size:20,isEmptyPage:s}),title:(0,z.jsx)(ae().A,{shouldWrap:!0,store:e}),fromTable:oe().ev,fromId:e.id}}return"collection_view"===e.getType()||"collection_view_page"===e.getType()?{icon:(0,z.jsx)(re().A,{disabled:!0,icon:e.getIcon(),size:20,isEmptyPage:e.isDefined()}),title:(0,z.jsx)(ae().A,{shouldWrap:!0,store:e}),fromTable:oe().ev,fromId:e.id}:void 0}}),[s,g]),x=(0,t.useCallback)((()=>f(!0)),[]),y=(0,t.useCallback)((()=>f(!1)),[]),I=(0,r().IS)((e=>({chevronIcon:{width:10,marginLeft:4,fill:e.lightIconColor},mobileTitleContainer:{display:"flex",alignItems:"center"},mobileTextContainer:{dislay:"block",overflow:"hidden"},mobileChevronIcon:{marginLeft:4,fill:e.icon.secondary,transform:`rotate(${a?90:0}deg)`,transition:"transform 150ms ease"},roleButton:{color:e.mediumTextColor,fontSize:(0,M().kx)({environment:p,isRedesignEnabled:!0})},selectContainer:{opacity:a?0:1},loadingSubtitleContainer:{display:"flex",alignItems:"center"},placeholderSubtitle:{height:12,width:14,borderRadius:4,marginRight:2}})),[p,a]),S={type:"display_only_inherited_permission",role:m??"access"};return v?(0,z.jsx)(V().Ay,{icon:v.icon&&(0,z.jsx)(i(180925).A,{onClick:c,expanded:a,hovered:b,children:(0,z.jsx)(F().A,{type:"circle",iconType:"element",element:v.icon,isMobile:g})}),store:s,permissionItem:S,onMouseEnter:x,onMouseLeave:y,from:{table:oe().ev,blockId:v.fromId?v.fromId:s.id},title:g?(0,z.jsxs)("div",{style:I.mobileTitleContainer,children:[(0,z.jsx)("div",{style:I.mobileTextContainer,children:(0,z.jsx)(u().sA,{id:"permissionsListV2.inheritedPermissions",defaultMessage:"People invited to {title}",values:{title:v.title}})}),(0,z.jsx)("div",{style:I.mobileChevronIcon,children:(0,i(742117).V)({height:12,width:12})})]}):(0,z.jsx)(u().sA,{id:"permissionsListV2.inheritedPermissions",defaultMessage:"People invited to {title}",values:{title:v.title}}),subtitle:l?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(u().sA,{id:"inheritedPermissionItem.numberOfPeopleInvited",defaultMessage:"{numberOfPeopleInvited, plural, one {{numberOfPeopleInvited} person} other {{numberOfPeopleInvited} people}}",values:{numberOfPeopleInvited:l}}),g&&(0,z.jsxs)(z.Fragment,{children:[" · ",(0,z.jsx)(u().sA,{...(0,L().R)({type:S.type,role:S.role,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:!0}).label})]})]}):(0,z.jsxs)("div",{style:I.loadingSubtitleContainer,children:[(0,z.jsx)(i(710149).A,{style:I.placeholderSubtitle}),(0,z.jsx)(u().sA,{id:"inheritedPermissionItem.subtitle.people",defaultMessage:"people",values:{numberOfPeopleInvited:l}}),g&&(0,z.jsxs)(z.Fragment,{children:[" · ",(0,z.jsx)(u().sA,{...(0,L().R)({type:S.type,role:S.role,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:!0}).label})]})]}),inheritedTooltip:l&&l>0?(0,z.jsx)(u().sA,{id:"inheritedPermissionItem.numberOfPeopleInvited.tooltip",defaultMessage:"{numberOfPeopleInvited, plural, one {{numberOfPeopleInvited} person has } other {{numberOfPeopleInvited} people have}} access through the parent page {inlineIconAndName}",values:{numberOfPeopleInvited:l,inlineIconAndName:(0,z.jsx)(i(761652).A,{store:h,useInvertedColors:!0})}}):null,upgradeButtonName:"team_permission_item",onClick:c,permissionRoleSelect:(0,z.jsx)("div",{style:I.selectContainer,children:(0,z.jsx)(L().Y,{type:S.type,role:S.role,icon:i(438265).d,disabled:!0,buttonStyle:I.roleButton,table:oe().ev,isCurrentUser:!1,from:"shareMenu"})}),isCollapsible:!0,style:e.style,...d}):null}const de=t.memo(me);var ce=()=>i(852507),ue=()=>i(534177),pe=()=>i(284371),ge=()=>i(493823),he=()=>i(125565),be=()=>i(963589);const fe=(0,u().YK)({commenter:{id:"permissionsLevelBanner.commenter.labelV2",defaultMessage:"You can only comment on this page"},reader:{id:"permissionsLevelBanner.reader.labelV2",defaultMessage:"You can only view this page"}});function ve(e){let{store:s,role:i}=e;const o=(0,n().v3)(),{isMobile:a}=(0,n().Y0)(),[l,m]=(0,t.useState)("noRequest"),d=(0,be().X)("share_menu_inheritance_banner");(0,ce().l)((()=>{g().VJ(o,{share_menu_session_id:k().Ay.state.sessionId,role:i})}));const c=(0,r().IS)((e=>({container:{...(0,M().kJ)({theme:e,inheritanceBannerEnabled:d,isMobile:a}),display:"flex",alignItems:"center",justifyContent:"space-between"},bannerBodyContainer:{display:"flex",alignItems:"center"},bannerLabel:{display:"flex"},pendingAccessRequestLabel:{color:e.lightTextColor},accessRequestLabel:{color:e.text.uiBluePrimary},accessRequestButton:{display:"flex",alignItems:"center",justifyContent:"center",fontWeight:pe().Wy.medium,flexShrink:0,borderRadius:4,paddingLeft:6,paddingRight:6,margin:-4,height:24}})),[a,d]),p=(0,t.useCallback)((async()=>{var e;if("reader"!==i&&"comment_only"!==i)return;const t=await h().callApi({eventName:"requestAccess",environment:o,data:{type:"current-actor-to-block",block:{id:s.id,spaceId:s.getSpaceId()},attributes:{origin_type:"share_menu",add_permissions_on_approval:!1,role:"read_and_write",existing_permissions:i},message:void 0}});"success"===t.type&&t.data.request?(m("requested"),g().T_(o,{request_access_type:"page",previous_access_level:i,requested_access_level:"read_and_write",requestId:t.data.requestId})):"failed"===t.type&&"UserRateLimitResponse"===(null===(e=t.body)||void 0===e?void 0:e.name)&&m("rateLimited")}),[o,i,s]),b=function(e){switch(e){case"comment_only":return fe.commenter;case"reader":return fe.reader;case"editor":case"read_and_write":case"none":case"membership_admin":case"content_only_editor":return null;default:(0,ue().HB)(e)}}(i);return b?(0,z.jsxs)("div",{style:c.container,children:[(0,z.jsx)("div",{style:c.bannerBodyContainer,children:(0,z.jsx)(he().A,{style:c.bannerLabel,isMultiline:!0,isSmall:d,children:(0,z.jsx)(u().sA,{...b})})}),(0,z.jsx)(ge().p,{isBlue:!0,style:c.accessRequestButton,onClick:p,disabled:"noRequest"!==l,children:(0,z.jsx)(he().A,{isSmall:d,style:"noRequest"===l?c.accessRequestLabel:c.pendingAccessRequestLabel,children:"requested"===l?(0,z.jsx)(u().sA,{defaultMessage:"Requested edit access",id:"permissionsLevelBanner.requestPermission.accessRequestedV2"}):"rateLimited"===l?(0,z.jsx)(u().sA,{defaultMessage:"Try again later",id:"permissionsLevelBanner.requestPermission.rateLimited"}):(0,z.jsx)(u().sA,{defaultMessage:"Request edit access",id:"permissionsLevelBanner.requestPermission.requestEdit"})})})]}):null}var xe=()=>i(198463);function ye(e){let{dividerType:s,scrollerStore:i}=e;const n=(0,o().K8)((()=>(null==i?void 0:i.state.elementRef)??{current:null}),[i]),a=(0,x().CR)(n),l=(0,x().yE)(n),m=(0,x().o7)(n),d=(0,t.useMemo)((()=>{if("top"===s)return l>0;return Math.ceil(l+m+10)<Math.floor(a)}),[s,m,a,l]),c=(0,r().IS)((e=>({divider:{opacity:d?1:0,height:1,borderTop:`1px solid ${e.regularDividerColor}`,padding:"0px 16px",transition:"opacity 200ms",margin:"0px 16px"}})),[d]);return(0,z.jsx)("div",{style:c.divider})}function Ie(e){let{store:s,calculatedPermissions:i,permissionItemArgs:t}=e;const{showTeamPermission:n,mostPermissiveAncestorTeamGuestItem:o,mostPermissiveAncestorTeamMemberItem:r,mostPermissiveAncestorTeamOwnerItem:a,pagePermissionUIModel:l}=i;return(0,z.jsxs)(z.Fragment,{children:[n&&a&&r&&(0,z.jsx)(ne().A,{store:s,blockTeamOwnerPermission:a,blockTeamMemberPermission:r,blockTeamGuestPermission:o,permissionItemArgs:t}),Ae({store:s,mostPermissiveTeamPermissions:l.mostPermissiveTeamPermissions,permissionItemArgs:t})]})}function Se(e){const{store:s,permissionItemArgs:i,inheritedPagePermissions:o}=e,l=(0,n().v3)(),[m,d]=t.useState(!1),{mostPermissiveGroupPermissions:c,mostPermissiveUserPermissions:u}=o,p=function(e){var s,i;const{mostPermissiveGroupPermissions:t,mostPermissiveUserPermissions:n}=e;let o="access";const r=(null===(s=n[0])||void 0===s?void 0:s.permissionItem.role)||(null===(i=t[0])||void 0===i?void 0:i.permissionItem.role)||"access",a=!(n.length>0)||n.every((e=>e.permissionItem.role===r)),l=!(t.length>0)||t.every((e=>e.permissionItem.role===r));a&&l&&(o=r);return o}(o),[{value:b}]=(0,a().Yb)((async()=>{const e=S().default.state.currentSpaceStore;return e?await async function(e){let{environment:s,mostPermissiveUserPermissions:i,mostPermissiveGroupPermissions:t,spaceStore:n}=e;const o=new Set;for(const{permissionItem:a}of i)o.add(a.user_id);const r=new Set;for(const{permissionItem:a}of t)r.add(a.group_id);if(r.size>0){const e=await h().callApi({eventName:"getSpacePermissionGroupMembers",environment:s,data:{groupIds:Array.from(r),spaceId:n.id}});if("success"===e.type)for(const[,{userIds:s}]of Object.entries(e.data.groupUsersMap)){const e=s.filter((e=>{var s;return null===(s=(0,y().sE)(n,e))||void 0===s?void 0:s.isMember()}));for(const s of e)o.add(s)}}return o.size}({environment:l,mostPermissiveUserPermissions:u,mostPermissiveGroupPermissions:c,spaceStore:e}):0}),[l,c,u]),f=Ce(o),v=(0,r().IS)((()=>({inheritedPagePermissionsContainer:f?{paddingLeft:M().zr}:{}})),[f]);return(0,z.jsxs)(z.Fragment,{children:[f&&(0,z.jsx)(de,{store:s,isExpanded:m,onToggle:()=>{d((e=>!e)),g().lD(l,{share_menu_session_id:k().Ay.state.sessionId,type:"inherited_page"})},numberOfPeopleInvited:b??0,inheritedPermissionRole:p,permissionItemArgs:i,style:e.style}),m&&(0,z.jsx)("div",{style:v.inheritedPagePermissionsContainer,children:(0,z.jsx)(je,{store:s,pagePermissions:o,numberPermissionsAlreadyRendered:0,permissionItemArgs:i,forceExpanded:!0,isInherited:!0})})]})}function Pe(e){let{store:s,calculatedPermissions:i,permissionItemArgs:t}=e;const{showSpacePermission:n,mostPermissiveTrustedDomainItem:o,mostPermissiveSpaceItem:r,mostPermissivePublicItem:a,showSitePublicPermission:l,showPublicShareLinkPermission:m,showTrustedDomainPermission:d,showRestrictedPermissionBanner:c}=i;return(0,z.jsxs)(b().A,{disableMobilePadding:!0,disableMobileBorders:!0,style:{paddingTop:12,paddingLeft:8,paddingRight:8,paddingBottom:8},children:[(0,z.jsx)(ee().nc,{}),(0,z.jsx)(Z,{store:s,spacePermission:r,showSpacePermission:n,publicPermission:a,showSitePublicPermission:l,showPublicShareLinkPermission:m,trustedDomainPermission:o,showTrustedDomainPermission:d,permissionItemArgs:t,fromPermissionWrapper:"permission_list",isRestricted:c})]})}function je(e){const s=(0,u().tz)(),i=(0,o().K8)((()=>{const e=S().default.state.currentSpaceStore;return null!=e&&e.isDefined()?e.id:""}),[]),t=(0,n().v3)(),r=t.currentUser.id,{store:m,pagePermissions:g,numberPermissionsAlreadyRendered:b,permissionItemArgs:x,forceExpanded:y,isInherited:I}=e,{showUserPermissions:C,mostPermissiveGroupPermissions:M,mostPermissiveUserPermissions:k}=g,N=(0,w().x)(),[{value:D}]=(0,a().Yb)((async()=>{const e=await h().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:t,data:{spaceId:i,userIds:k.map((e=>e.permissionItem.user_id))},headers:(0,l().WS)({cellId:void 0,spaceId:i})});return"success"===e.type?e.data.userToGroupMap:{}}),[t,i,k],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3}),L=(0,o().K8)((()=>{const e=j().default.checkGate({gateName:"dont_load_users"}),i=C&&!e?function(e){const{mostPermissiveUserPermissions:s,spaceVisibleUserMap:i,userToPermissionGroupIds:t}=e,n={};return s.forEach((s=>{const o=(0,f().ex)({userId:s.permissionItem.user_id,store:e.store,userPermissionGroupIds:new Set((null==t?void 0:t[s.permissionItem.user_id])??[])}),r=A().LU.createChildStore(e.store,{table:d().oo,id:s.permissionItem.user_id}),a=r.getModel();let l;r.isReady()&&a&&(l=(0,c().c6)(e.intl,a)),n[s.permissionItem.user_id]=(0,z.jsx)(T().A,{store:e.store,userPermission:s,selectFooter:(0,z.jsx)(xe().n,{targetName:l,targetType:"user",mostPermissivePermissions:o}),showInherited:!1,permissionItemArgs:e.permissionItemArgs,spaceVisibleUserMap:i,fromPermissionWrapper:"permission_list"},s.permissionItem.user_id)})),n}({store:m,mostPermissiveUserPermissions:k,permissionItemArgs:x,spaceVisibleUserMap:N,userToPermissionGroupIds:D??{},intl:s}):{};return p().oE(Object.keys(i).map((e=>{const t=A().LU.createChildStore(m,{table:d().oo,id:e}),n=t.getModel();if(t.isReady()&&n)return{title:(0,c().c6)(s,n),isSelfPermission:Boolean(r)&&t.id===r,permissionItem:i[e]}})))}),[C,m,k,x,N,s,r,D]),B=(0,o().K8)((()=>{const e=i?function(e){const{spaceId:s,mostPermissiveGroupPermissions:i,isInherited:t}=e,n={},o=new Set(P().A.state.permissionGroupsAndMemberCounts.map((e=>e.group.group_id)));return i.forEach((i=>{const r=i.permissionItem.group_id;o.has(r)&&(n[r]=(0,z.jsx)(_().A,{store:e.store,groupPermission:i,spaceId:s,showInherited:!1,permissionItemArgs:e.permissionItemArgs,fromPermissionWrapper:"permission_list",disableExpansion:t}))})),n}({store:m,spaceId:i,mostPermissiveGroupPermissions:M,permissionItemArgs:x,isInherited:I}):{};return Object.keys(e).map((i=>{const t=P().A.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===i));return{title:t?(0,v().Pf)({intl:s,groupName:t.group.name}):"",isSelfPermission:!1,permissionItem:e[i]}}))}),[s,I,M,x,i,m]);L.sort(((e,s)=>e.isSelfPermission?-1:s.isSelfPermission?1:e.title.localeCompare(s.title))),B.sort(((e,s)=>e.title.localeCompare(s.title)));const W=[...L,...B].map((e=>{let{permissionItem:s}=e;return s})),E=W.length;if(0===E)return null;const K=Math.max(4,7-b);return!y&&E>K?(0,z.jsxs)(z.Fragment,{children:[W.slice(0,2),(0,z.jsx)(R().A,{permissions:W.slice(2)})]}):(0,z.jsx)(z.Fragment,{children:W})}function Ae(e){const{store:s,mostPermissiveTeamPermissions:i,permissionItemArgs:t}=e;return i.map((e=>m().nl(e.permissionItem)?(0,z.jsx)(te().A,{store:s,blockTeamOwnerPermission:e,isExternalTeam:!0,permissionItemArgs:t,fromPermissionWrapper:"permission_list"},`${e.permissionItem.team_id}.owner`):m().un(e.permissionItem)?(0,z.jsx)(se().A,{store:s,blockTeamGuestPermission:e,isExternalTeam:!0,permissionItemArgs:t,fromPermissionWrapper:"permission_list"},`${e.permissionItem.team_id}.teamGuest`):(0,z.jsx)(ie().A,{store:s,blockTeamPermission:e,isExternalTeam:!0,permissionItemArgs:t,fromPermissionWrapper:"permission_list"},`${e.permissionItem.team_id}.member`)))}function Ce(e){return e.mostPermissiveUserPermissions.length>0||e.mostPermissiveGroupPermissions.length>0}const Me=function(e){const s=(0,n().v3)(),{device:a}=s,l=a.isMobile,{store:d,permissionItemArgs:c,calculatedPermissions:u,showPermissionInheritanceBanner:p}=e,{sudoModeStore:h}=c,v=(0,o().uB)(void 0,i(17090).A),{pagePermissionUIModel:x,showRestrictedPermissionBanner:y,showSpacePermission:S,showSitePublicPermission:P,showTeamPermission:j}=u,{inheritedPermissions:A,pagePermissions:M}=(0,C().kT)({store:d,pagePermissionUIModel:x,currentUserId:s.currentUser.id}),w=Ce(M),k=Ce(A),_=(0,o().K8)((()=>!(0,C().Aj)({store:d})),[d]),T=a.isMobile?I().A.None:I().A.Y,R=(0,r().IS)((()=>({scroller:{paddingLeft:l?20:0,paddingRight:l?20:0}})),[l]);(0,t.useEffect)((()=>{g().Fn({environment:s,calculatedPermissions:u})}),[]);const N=Number(S)+Number(P),D=N+Number(j)+Number(k),L=(0,o().K8)((()=>e.showFooter??!a.isMobile??!0),[a.isMobile,e.showFooter]),B=(0,o().K8)((()=>{const e=(0,i(186445)._m)(s);if(!e)return;const t=(0,f().zt)({userId:e.id,store:d}).role;return t&&(0,m().PW)(t)?t:void 0}),[s,d]),W=(0,o().K8)((()=>d.getSpaceId()),[d]),E=(0,i(597898).P9)({name:"block_read_and_write_role",spaceId:W,userId:s.currentUser.id}),K=(0,o().K8)((()=>!(!B||"none"===B)&&(E&&!m().p2(B))),[B,E]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ye,{dividerType:"top",scrollerStore:v}),(0,z.jsxs)(i(2143).H,{type:T,style:R.scroller,store:v,children:[K&&B?(0,z.jsx)(ve,{store:d,role:B}):(0,z.jsx)(i(955307).A,{store:d,showRestrictedPermissionBanner:y,showPermissionInheritanceBanner:p,sudoModeStore:h}),(0,z.jsxs)(b().A,{disableMobilePadding:!0,disableMobileBorders:!0,style:{padding:"0px 8px"},children:[w&&(0,z.jsx)(je,{store:d,pagePermissions:M,numberPermissionsAlreadyRendered:D,permissionItemArgs:c,forceExpanded:!(k||u.showTeamPermission)}),k&&(0,z.jsx)(Se,{store:d,inheritedPagePermissions:A,permissionItemArgs:c}),(0,z.jsx)(Ie,{store:d,calculatedPermissions:u,permissionItemArgs:c}),_&&(0,z.jsx)(i(342826).A,{store:d})]})]}),(0,z.jsx)(ye,{dividerType:"bottom",scrollerStore:v}),N>0&&!a.isMobile&&(0,z.jsx)(Pe,{store:d,calculatedPermissions:u,permissionItemArgs:c}),L&&(0,z.jsx)(i(641212).A,{store:d,buttonPopupStore:e.buttonPopupStore,calculatedPermissions:u,permissionItemArgs:c})]})}},262400:(e,s,i)=>{i.d(s,{u:()=>m});i(296540);var t=()=>i(959013),n=()=>i(901389),o=()=>i(579627),r=()=>i(317909),a=()=>i(247123),l=i(474848);async function m(e){const{environment:s,useSudoMode:i,store:m}=e,d={type:"restoreTeamPermissions",permissionChanges:[]},{accept:c}=await n().Gh({message:(0,a().r6)(d),acceptLabel:(0,a().QU)(d),cancelLabel:(0,l.jsx)(t().sA,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"})});c&&r().createAndCommit({userAction:"PermissionsRestoreBanner.restoreTeamPermissions",environment:s,canUndo:!0,useSudoMode:i,perform:e=>{o().zE({environment:s,store:m,transaction:e})}})}},304243:(e,s,i)=>{i.d(s,{A:()=>u});i(296540);var t=()=>i(56366),n=()=>i(401497),o=()=>i(278238),r=()=>i(959013),a=()=>i(87043),l=i(474848);function m(e){const{teamName:s,isCompact:i}=e;return i?(0,l.jsx)(r().sA,{defaultMessage:"Teamspace guests",id:"blockPermissionsSettings.permissionItem.teamGuestAccess.compact"}):s?(0,l.jsx)(r().sA,{defaultMessage:"Teamspace guests of {teamName}",id:"blockPermissionsSettings.permissionItem.teamGuestAccess",values:{teamName:s}}):(0,l.jsx)(r().sA,{id:"blockPermissionsSettings.permissionItem.teamspaceGuestsTeamName.hidden",defaultMessage:"Teamspace guests of a private teamspace"})}function d(e){let{teamGuestsCount:s,isCompact:i,isRedesignEnabled:t}=e;return i&&!t||0===s?null:(0,l.jsx)(r().sA,{defaultMessage:"{membersCount, plural, one {{membersCount} person} other {{membersCount} people}}",id:"blockPermissionsSettings.teamGuestPermission.subtitle",values:{membersCount:s}})}function c(e){const{teamName:s}=e,i=(0,n().IS)((()=>({tooltip:{whiteSpace:"normal",maxWidth:240}})),[]);return s?(0,l.jsx)("div",{style:i.tooltip,children:(0,l.jsx)(r().sA,{defaultMessage:"Applies to all teamspace guests of {teamName}.",values:{teamName:s},id:"blockPermissionsSettings.teamGuestPermission.tooltip"})}):null}const u=function(e){let{store:s,blockTeamGuestPermission:r,isExternalTeam:u,fromPermissionWrapper:p,teamGuestsCount:g,permissionItemArgs:h}=e;const{isMobile:b}=(0,i(484714).Y0)(),f=(0,t().K8)((()=>(0,i(663590).FI)()),[]),{permissionItem:v}=r,x=(0,t().K8)((()=>i(351360).default.state.currentSpaceStore),[]),y=(0,t().K8)((()=>{var e;return i(68263).un(v)?v.team_id:null===(e=i(108944).Uo(s))||void 0===e?void 0:e.id}),[v,s]),{teamStore:I,teamIsDefined:S,teamName:P,teamIcon:j}=(0,t().K8)((()=>{if(!x||!y)return{};const e=i(630116).h4.createChildStore(x,{table:i(854150).yK,id:y,spaceId:x.id});return null!=e&&e.isDefined()?{teamStore:e,teamIsDefined:null==e?void 0:e.isDefined(),teamName:e.getName(),teamIcon:e.getIcon()}:{}}),[x,y]),A=(0,t().K8)((()=>{if(g)return g;if(void 0!==I){const e=(0,i(37433).PF)(I);if(void 0!==e)return e.memberCountWithGuests-e.memberCount}}),[I,g]),C=!u,M=(0,n().IS)((()=>({container:{width:"100%"}})),[]);if(!I)return null;const w=j&&o().T8(j.icon)?o().VA(j.icon):"gray",k=j?{...j,icon:`/icons/user-circle_${w}.svg`}:void 0;return(0,l.jsx)("div",{style:M.container,className:i(38337).rkF,children:(0,l.jsx)(a().Ay,{isCompact:C,store:s,permissionItem:v,icon:f?(0,l.jsx)(i(173783).A,{size:b&&f?a().Bj:a().Ev}):S?(0,l.jsx)(i(898808).x,{disabled:!0,store:I,size:b&&f?a().Bj:a().Ev,icon:k}):(0,i(425736).s)(),title:(0,l.jsx)(m,{teamName:P,isCompact:C}),nonInheritedTooltip:(0,l.jsx)(c,{teamName:P}),from:r.from,subtitle:S&&(0,l.jsx)(d,{teamGuestsCount:A??0,isCompact:C,isRedesignEnabled:f}),upgradeButtonName:"team_permission_item",fromPermissionWrapper:p,...h})})}},329105:(e,s,i)=>{i.d(s,{eo:()=>a,NR:()=>m,Gm:()=>l});i(898992),i(354520),i(296540);var t=i(474848);const n=(0,i(340498).wt)("openPage",{viewBox:"0 0 17 16",svg:(0,t.jsx)("path",{d:"M0.454102 14.1143V2.02832C0.454102 1.26953 0.891602 0.78418 1.58887 0.78418H9.7373C10.4346 0.78418 10.8721 1.26953 10.8721 2.02832V14.1143C10.8721 14.873 10.4346 15.3584 9.7373 15.3584H1.58887C0.891602 15.3584 0.454102 14.873 0.454102 14.1143ZM3.07227 4.45508C3.07227 4.63281 3.18164 4.74902 3.35254 4.74902H4.71973C4.89062 4.74902 5.01367 4.63281 5.01367 4.45508V3.12891C5.01367 2.95801 4.89062 2.83496 4.71973 2.83496H3.35254C3.18164 2.83496 3.07227 2.95801 3.07227 3.12891V4.45508ZM6.37402 4.45508C6.37402 4.63281 6.4834 4.74902 6.66113 4.74902H8.02148C8.19238 4.74902 8.31543 4.63281 8.31543 4.45508V3.12891C8.31543 2.95801 8.19238 2.83496 8.02148 2.83496H6.66113C6.4834 2.83496 6.37402 2.95801 6.37402 3.12891V4.45508ZM11.4736 15.3584C11.6992 14.9893 11.8086 14.5723 11.8086 14.1143V4.14746H15.418C16.1084 4.14746 16.5459 4.63281 16.5459 5.3916V14.1143C16.5459 14.873 16.1084 15.3584 15.418 15.3584H11.4736ZM3.07227 7.24414C3.07227 7.42188 3.18164 7.53809 3.35254 7.53809H4.71973C4.89062 7.53809 5.01367 7.42188 5.01367 7.24414V5.91797C5.01367 5.74707 4.89062 5.62402 4.71973 5.62402H3.35254C3.18164 5.62402 3.07227 5.74707 3.07227 5.91797V7.24414ZM6.37402 7.24414C6.37402 7.42188 6.4834 7.53809 6.66113 7.53809H8.02148C8.19238 7.53809 8.31543 7.42188 8.31543 7.24414V5.91797C8.31543 5.74707 8.19238 5.62402 8.02148 5.62402H6.66113C6.4834 5.62402 6.37402 5.74707 6.37402 5.91797V7.24414ZM13.3604 7.60645C13.3604 7.75 13.4492 7.85254 13.5996 7.85254H14.7344C14.8779 7.85254 14.9736 7.75 14.9736 7.60645V6.5127C14.9736 6.36914 14.8779 6.27344 14.7344 6.27344H13.5996C13.4492 6.27344 13.3604 6.36914 13.3604 6.5127V7.60645ZM3.07227 10.0332C3.07227 10.2041 3.18164 10.3271 3.35254 10.3271H4.71973C4.89062 10.3271 5.01367 10.2041 5.01367 10.0332V8.70703C5.01367 8.5293 4.89062 8.41309 4.71973 8.41309H3.35254C3.18164 8.41309 3.07227 8.5293 3.07227 8.70703V10.0332ZM6.37402 10.0332C6.37402 10.2041 6.4834 10.3271 6.66113 10.3271H8.02148C8.19238 10.3271 8.31543 10.2041 8.31543 10.0332V8.70703C8.31543 8.5293 8.19238 8.41309 8.02148 8.41309H6.66113C6.4834 8.41309 6.37402 8.5293 6.37402 8.70703V10.0332ZM13.3604 10.2998C13.3604 10.4434 13.4492 10.5391 13.5996 10.5391H14.7344C14.8779 10.5391 14.9736 10.4434 14.9736 10.2998V9.20605C14.9736 9.0625 14.8779 8.9668 14.7344 8.9668H13.5996C13.4492 8.9668 13.3604 9.0625 13.3604 9.20605V10.2998ZM3.29785 14.2578H8.08984V12.0361C8.08984 11.7217 7.88477 11.5166 7.57031 11.5166H3.81738C3.50293 11.5166 3.29785 11.7217 3.29785 12.0361V14.2578ZM13.3604 12.9932C13.3604 13.1367 13.4492 13.2324 13.5996 13.2324H14.7344C14.8779 13.2324 14.9736 13.1367 14.9736 12.9932V11.8994C14.9736 11.7559 14.8779 11.6533 14.7344 11.6533H13.5996C13.4492 11.6533 13.3604 11.7559 13.3604 11.8994V12.9932Z"})});var o=()=>i(959013),r=()=>i(898808);const a=16,l=[{key:"private",title:e=>{let{isShareMenuRedesignEnabled:s,type:i}=e;return s&&"full"===i?(0,t.jsx)(o().sA,{id:"linkSharingPill.visibilityTitle.inviteOnlyFullLength",defaultMessage:"Only people invited"}):(0,t.jsx)(o().sA,{id:"linkSharingPill.visibilityTitle.inviteOnly",defaultMessage:"Invite only"})},caption:()=>(0,t.jsx)(o().sA,{id:"linkSharingPill.visibilityCaption.inviteOnly",defaultMessage:"Only you and people invited can access"}),icon:e=>{let{style:s,isShareMenuRedesignEnabled:t}=e;return(0,i(449552).g)(t?{...s,marginTop:1}:s)}},{key:"unlisted",title:e=>{let{spaceName:s,isShareMenuRedesignEnabled:i}=e;return i?(0,t.jsx)(o().sA,{id:"linkSharingPill.visibilityTitle.anyoneWithLinkRedesign",defaultMessage:"Anyone at {spaceName} with the link",values:{spaceName:s}}):(0,t.jsx)(o().sA,{id:"linkSharingPill.visibilityTitle.anyoneWithLink",defaultMessage:"Anyone with link at {spaceName}",values:{spaceName:s}})},caption:e=>{let{isShareMenuRedesignEnabled:s}=e;return s?(0,t.jsx)(o().sA,{id:"linkSharingPill.visibilityCaption.anyoneWithLinkRedesign",defaultMessage:"Workspace members can access with the link"}):(0,t.jsx)(o().sA,{id:"linkSharingPill.visibilityCaption.anyoneWithLink",defaultMessage:"People invited and workspace members with link can access"})},icon:e=>{let{style:s,isShareMenuRedesignEnabled:t}=e;return(0,i(657222).w)(t?{...s,marginTop:1}:s)}},{key:"open",title:e=>{let{spaceName:s}=e;return(0,t.jsx)(o().sA,{id:"linkSharingPill.visibilityTitle.everyoneInWorkspace",defaultMessage:"Everyone at {spaceName}",values:{spaceName:s}})},caption:e=>{let{isShareMenuRedesignEnabled:s}=e;return s?(0,t.jsx)(o().sA,{id:"linkSharingPill.visibilityCaption.everyoneInWorkspaceV2",defaultMessage:"Workspace members can access and discover in search"}):(0,t.jsx)(o().sA,{id:"linkSharingPill.visibilityCaption.everyoneInWorkspace",defaultMessage:"All workspace members can search and access"})},icon:e=>{let{style:s,isShareMenuRedesignEnabled:i,spaceStore:o,teamspaceIconSize:l}=e;return i?(0,t.jsx)(r().x,{disabled:!0,store:o,size:l,style:{marginLeft:(a-l)/2,marginRight:(a-l)/2}}):n(s)}},{key:"open_unlisted_hybrid",title:e=>{let{spaceName:s,visibility:i}=e;return"unlisted"===i?(0,t.jsx)(o().sA,{id:"blockPermissionsSettings.permissionItem.workspaceAccessNew.unlisted",defaultMessage:"Everyone at {spaceName} with the link",values:{spaceName:s}}):(0,t.jsx)(o().sA,{id:"linkSharingPill.visibilityTitle.everyoneInWorkspace",defaultMessage:"Everyone at {spaceName}",values:{spaceName:s}})},caption:()=>{},icon:e=>{let{spaceStore:s,teamspaceIconSize:i}=e;return(0,t.jsx)(r().x,{disabled:!0,store:s,size:i,style:{marginLeft:(a-i)/2,marginRight:(a-i)/2}})}}];function m(e,s){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l.filter((t=>{let{key:n}=t;return i?"private"===n:e&&s?"private"===n||"open_unlisted_hybrid"===n:"private"===n||"open"===n||"unlisted"===n}))}},342826:(e,s,i)=>{i.d(s,{A:()=>o});i(296540);var t=()=>i(959013),n=i(474848);const o=function(e){const{store:s}=e,o=(0,i(401497).IS)((e=>({icon:{width:17,height:17,fill:e.mediumIconColor},iconContainer:{backgroundColor:e.lightDividerColor,borderRadius:32}})),[]),r={table:i(179034).ev,blockId:s.id};return(0,n.jsx)(i(87043).Ay,{icon:(0,i(400835).D)(o.icon),iconStyle:o.iconContainer,title:(0,n.jsx)(t().sA,{defaultMessage:"More people may have access",id:"blockPermissionsSettings.permissionItem.hiddenAccess"}),nonInheritedTooltip:(0,n.jsx)(t().sA,{defaultMessage:"This page may be shared with additional people through a parent page or teamspace that you don't have access to",id:"blockPermissionsSettings.hiddenAccess.tooltip"}),permissionRoleSelect:(0,n.jsx)(n.Fragment,{}),store:s,permissionItem:{type:"display_only_hidden_permission"},from:r,upgradeButtonName:"team_permission_item"})}},400835:(e,s,i)=>{i.d(s,{D:()=>n});i(296540);var t=i(474848);const n=(0,i(340498).wt)("personBadgeQuestionMark",{viewBox:"0 0 15 14",svg:(0,t.jsx)("path",{d:"M12.4551 5.41699C12.8037 5.41699 13.0088 5.19824 13.0088 4.93164V4.84961C13.0088 4.45996 13.2344 4.2207 13.7061 3.90625C14.3691 3.46875 14.8408 3.07227 14.8408 2.25195C14.8408 1.11719 13.8291 0.501953 12.667 0.501953C11.498 0.501953 10.7256 1.0625 10.5342 1.69141C10.5 1.80078 10.4795 1.91016 10.4795 2.02637C10.4795 2.33398 10.7188 2.49805 10.9443 2.49805C11.1836 2.49805 11.3271 2.38867 11.4502 2.22461L11.5732 2.06055C11.8125 1.66406 12.1748 1.43164 12.626 1.43164C13.248 1.43164 13.6514 1.78711 13.6514 2.30664C13.6514 2.77148 13.3643 2.99707 12.7695 3.41406C12.2773 3.75586 11.915 4.11816 11.915 4.78809V4.87695C11.915 5.23242 12.1064 5.41699 12.4551 5.41699ZM5.79004 6.99609C7.25293 6.99609 8.52441 5.68359 8.52441 3.97461C8.52441 2.28613 7.25293 1.03516 5.79004 1.03516C4.32715 1.03516 3.05566 2.31348 3.05566 3.98828C3.05566 5.68359 4.32031 6.99609 5.79004 6.99609ZM12.4414 7.4541C12.8379 7.4541 13.1797 7.13965 13.1797 6.74316C13.1797 6.34668 12.8447 6.03223 12.4414 6.03223C12.0381 6.03223 11.7031 6.35352 11.7031 6.74316C11.7031 7.13281 12.0449 7.4541 12.4414 7.4541ZM1.20312 13.3262H10.3701C11.1016 13.3262 11.5391 12.9844 11.5391 12.417C11.5391 10.6533 9.33105 8.21973 5.7832 8.21973C2.24219 8.21973 0.0341797 10.6533 0.0341797 12.417C0.0341797 12.9844 0.47168 13.3262 1.20312 13.3262Z"})})},439616:(e,s,i)=>{i.d(s,{A:()=>T});i(944114),i(581454);var t=i(296540),n=()=>i(662303),o=()=>i(484714),r=()=>i(56366),a=()=>i(401497),l=()=>i(869190),m=()=>i(68263),d=()=>i(959013),c=()=>i(720665),u=()=>i(760217),p=()=>i(406699),g=()=>i(928600),h=()=>i(939740),b=()=>i(89924),f=()=>i(125565),v=()=>i(573351),x=()=>i(662971),y=()=>i(186445),I=()=>i(722872),S=()=>i(700250),P=()=>i(991249),j=()=>i(118849),A=()=>i(134217),C=i(474848);function M(e,s){const{permissionItem:t,hideIcon:n,onChange:r,buttonStyle:l}=e,m=(0,o().Y0)(),c=(0,a().IS)((e=>({icon:{margin:0,height:16,width:16,fill:e.icon.secondary},chevronIcon:{height:12,width:12,fill:e.icon.tertiary,transform:"rotate(90deg)"}})),[]);return(0,C.jsx)(i(811979).A,{...e,popupType:m.isMobile?p().z7.SlideUp:p().z7.Popup,renderOrigin:o=>(0,C.jsx)(i(585293).a,{...(0,i(553965).A)(e,o),ref:s,title:(0,C.jsx)(d().sA,{defaultMessage:"Link expires",id:"publishSiteSettings.linkExpiration.settingTitle"}),icon:!n&&(0,i(589982).u)(c.icon),right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(w,{permissionItem:t}),(0,i(742117).V)(c.chevronIcon)]}),buttonStyle:l}),alignmentToOrigin:S().MY.Center,placementToOrigin:S().UV.Bottom,render:e=>(0,C.jsx)(k,{value:t.expiration_timestamp,onChange:r,onClose:()=>{e.close()}})})}function w(e){const{permissionItem:s}=e,i=(0,d().tz)(),t=(0,a().IS)((e=>({container:{color:e.text.secondary}})),[]);if(!s.expiration_timestamp||(0,m().OA)(s))return(0,C.jsx)(f().A,{style:t.container,children:(0,C.jsx)(d().sA,{defaultMessage:"Never",id:"publishSiteSettings.linkExpiration.never"})});const o=l().jE(s.expiration_timestamp,n().locale,i);return(0,C.jsx)(f().A,{style:t.container,children:o})}function k(e){const{value:s,onChange:i,onClose:l}=e,m=(0,o().v3)(),p=m.device,f=(0,r().K8)((()=>!A().qC()),[]),v=(0,r().K8)((()=>A().Si(m)),[m]),x=(0,t.useCallback)((e=>{void 0!==e&&e<=(new Date).getTime()||(i(e),l())}),[i,l]),y=(0,a().IS)((e=>({disabledContainer:{display:"flex",gap:6},disabledText:{color:e.text.tertiary}})),[]),S=function(){const e=Date.now(),s=e+c().pT,i=e+c().nD,t=e+7*c().nD;return[{key:"none",time:void 0,title:(0,C.jsx)(d().sA,{defaultMessage:"Never",id:"publishSiteSettings.linkExpiration.never"})},{key:"hour",time:s,title:(0,C.jsx)(d().sA,{defaultMessage:"In an hour",id:"publishSiteSettings.linkExpiration.oneHour"}),caption:new Intl.DateTimeFormat(n().locale,{hour:"numeric",minute:"numeric"}).format(s)},{key:"day",time:i,title:(0,C.jsx)(d().sA,{defaultMessage:"In a day",id:"publishSiteSettings.linkExpiration.oneDay"}),caption:new Intl.DateTimeFormat(n().locale,{day:"numeric",month:"long",hour:"numeric",minute:"numeric"}).format(i)},{key:"week",time:t,title:(0,C.jsx)(d().sA,{defaultMessage:"In a week",id:"publishSiteSettings.linkExpiration.oneWeek"}),caption:new Intl.DateTimeFormat(n().locale,{day:"numeric",month:"long",hour:"numeric",minute:"numeric"}).format(t)}]}().map((e=>({key:e.key,action:()=>{x(e.time)},render:s=>(0,C.jsx)(u().A,{...s,title:e.title,titleStyle:f?y.disabledText:{},caption:e.caption,captionStyle:f?y.disabledText:{},disabled:f})}))),M=[{key:"predefined-expiration",render:e=>(0,C.jsx)(b().A,{...e}),items:S},{key:"custom-expiration",render:e=>(0,C.jsx)(b().A,{...e,topBorder:!0}),items:[_(x,s,f,y.disabledText)]}];return v&&f&&M.push({key:"upgrade-for-expiration",render:e=>(0,C.jsx)(b().A,{...e,topBorder:!0}),items:[{key:"upsell",action:()=>{P().K(m,{from:"public_permission_item_expiration",upsell:{type:"product",product:v,limit:{type:"none"}}})},render:e=>(0,C.jsx)(u().A,{...e,focused:e.focused,title:(0,C.jsxs)("div",{style:y.disabledContainer,children:[(0,C.jsx)(d().sA,{defaultMessage:"Unlock link expiration",id:"publishSiteSettings.linkExpiration.upgrade"}),(0,C.jsx)(j().A,{subscriptionTier:v,analyticsName:"public_permission_item_expiration"})]})})}]}),(0,C.jsx)(g().A,{menuType:p.isMobile?I().gu.ActionSheet:I().gu.Popup,width:271,children:(0,C.jsx)(h().Ay,{type:h().Oh.Vertical,initialFocus:void 0,sections:M})})}function _(e,s,i){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{key:"custom",action:()=>{window.parent.close()},render:(n,o)=>(0,C.jsx)(x().A,{...n,renderOrigin:e=>(0,C.jsx)(u().A,{...e,disabled:i,title:(0,C.jsx)(d().sA,{id:"publicPermissionItem.expiration.chooseDate",defaultMessage:"Choose date"}),titleStyle:i?t:{}}),onFocus:o.onFocus,disableDefaultClick:!0,renderExtension:(t,n)=>(0,C.jsx)("div",{style:{padding:"18px 14px 14px"},children:(0,C.jsx)(v().A,{...t,firstDayOfWeek:y().XX.state,value:s||Date.now(),onChange:s=>{e(s),n.close()},disabledDays:i||{before:new Date}})})})}}const T=t.forwardRef(M)},482705:(e,s,i)=>{i.d(s,{l:()=>p});i(296540);var t=()=>i(56366),n=()=>i(401497),o=()=>i(695608),r=()=>i(959013),a=()=>i(614505),l=()=>i(453697),m=()=>i(87043),d=i(474848);const c=i(818787).QT,u=16;function p(e){let{ownerStores:s,teamStore:i,isSmall:o=!1}=e;const r=o?c:m().Ev,l=o?10:u,p=(0,n().IS)((e=>({container:{position:"relative",width:r,height:r},teamBadge:{position:"absolute",bottom:-5,right:-3,background:e.modalBackground,padding:.75,borderRadius:"0.25em"}})),[r]),{teamName:h,teamIcon:b}=(0,t().K8)((()=>({teamName:i.getName(),teamIcon:i.getIcon()})),[i]),f=e=>(0,d.jsx)(a().A,{disabled:!0,title:h,icon:b,isEmptyPage:!1,size:e});return 0===s.length?f(r):(0,d.jsxs)("div",{style:p.container,children:[(0,d.jsx)(g,{isSmall:o,store:s[0]}),(0,d.jsx)("div",{style:p.teamBadge,children:f(l)})]})}function g(e){let{store:s,isSmall:i=!1,style:u={}}=e;const p=(0,r().tz)(),g=i?c:m().Ev,h=(0,n().IS)((e=>({icon:{width:g,height:g,borderRadius:g,boxShadow:e.avatarBoxShadow,...u}})),[g,u]),b=(0,t().K8)((()=>null!=s&&s.isDefined()?(0,o().c6)(p,null==s?void 0:s.getModel()):void 0),[p,s]),f=b?(0,d.jsx)(l().A,{avatarShouldShowShadow:!0,userStore:s,size:g}):(0,d.jsx)(a().A,{bucket:"public",disabled:!0,isEmptyPage:!1,title:b,size:g,icon:void 0});return(0,d.jsx)("div",{style:h.icon,children:f})}},485952:(e,s,i)=>{i.d(s,{A:()=>w,i:()=>_});i(296540);var t=()=>i(484714),n=()=>i(56366),o=()=>i(401497),r=()=>i(584262),a=()=>i(433847),l=()=>i(854150),m=()=>i(959013),d=()=>i(534177),c=()=>i(284371),u=()=>i(946141),p=()=>i(493823),g=()=>i(296798),h=()=>i(16006),b=()=>i(859428),f=()=>i(125565),v=()=>i(492414),x=()=>i(108944),y=()=>i(26934),I=()=>i(262400),S=()=>i(632709),P=()=>i(962730),j=()=>i(630116),A=()=>i(848237),C=()=>i(437487),M=i(474848);function w(e){const{showRestoreButton:s,store:i,type:r,sudoModeStore:a}=e,l=(0,t().v3)(),{isMobile:m}=(0,t().Y0)(),d=(0,n().K8)((()=>x().fU(i)[1]),[i]),u=(0,n().K8)((()=>({paddingLeft:l.WindowSizeStore.getSafePaddingLeftCSS(14),paddingRight:l.WindowSizeStore.getSafePaddingLeftCSS(14)})),[l]),p=(0,o().IS)((e=>({container:{display:"flex",minHeight:20,flexDirection:"row",alignItems:"center",paddingTop:8,paddingBottom:6,paddingLeft:u.paddingLeft,paddingRight:u.paddingRight},banner:{display:"flex",flexDirection:"row",width:"100%",fontSize:12},icon:{width:16,fill:e.mediumIconColor},iconContainer:{width:20,height:20,display:"flex",justifyContent:"center",alignItems:"center",marginRight:5},messageContainer:{display:"flex",flexDirection:"column"},label:{display:"inline",marginLeft:m?14:0,color:m?"#CF8807":e.mediumTextColor,fontWeight:m?c().Wy.regular:c().Wy.medium,marginRight:6,lineHeight:"20px"},buttonContainer:{marginLeft:-5},divider:{opacity:"75%"},mobileContainer:{borderRadius:4,height:34,marginLeft:14,marginRight:14,marginTop:5,marginBottom:5,paddingRight:9,display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"rgba(246, 192, 80, 0.26)"}})),[m,u]);return m?(0,M.jsxs)("div",{style:p.mobileContainer,children:[(0,M.jsx)(f().A,{isMultiline:!0,isSmall:!0,style:p.label,children:(0,M.jsx)(T,{type:r,navigableParentStore:d,showRestoreButton:s})}),s&&(0,M.jsx)(k,{store:i,type:r})]}):(0,M.jsx)("div",{style:p.container,children:(0,M.jsxs)("div",{style:p.banner,children:[(0,M.jsx)("div",{style:p.iconContainer,children:R[r](p.icon)}),(0,M.jsxs)("div",{children:[(0,M.jsx)(f().A,{isMultiline:!0,isSmall:!0,isSecondaryColor:!0,style:p.label,children:(0,M.jsx)(T,{type:r,navigableParentStore:d,showRestoreButton:s})}),s&&(0,M.jsx)("span",{style:p.buttonContainer,children:(0,M.jsx)(k,{store:i,type:r,sudoModeStore:a})})]})]})})}function k(e){const{type:s,store:i,sudoModeStore:r}=e,{isMobile:l}=(0,t().Y0)(),u=(0,n().K8)((()=>!!r&&r.shouldSaveTransactionWithSudoMode(i)),[i,r]),g=(0,o().IS)((e=>({button:{color:l?"#CF8807":e.regularTextColor,fontWeight:c().Wy.medium},tooltip:{width:210,whiteSpace:"initial"}})),[l]),h=(0,t().v3)();if("restore-team"===s){const e=async()=>{await(0,I().u)({environment:h,useSudoMode:u,store:i})};return(0,M.jsx)(b().A,{style:g.tooltip,placement:P().W.Bottom,renderTooltip:()=>(0,M.jsx)(m().sA,{defaultMessage:"Reset page permissions to match default teamspace permissions",id:"permissionsRestoreBanner.tooltip.teamPermissions"}),render:s=>(0,M.jsx)("span",{...s,children:(0,M.jsx)(p().p,{isGray:!0,size:"xs",style:g.button,onClick:e,children:(0,M.jsx)(m().sA,{id:"permissionsRestoreBanner.button.teamPermissions",defaultMessage:"Reset"})})})})}if("unrestrict"===s){const e=async()=>{if(!i.isDefined())return;const e=i.getPermissionItems(),s=x().fU(i)[1];if(!s)return;const t=(0,a().wD)(x().E(s)),n=(0,a().Cd)(i.getModel(),e,t);await(0,y().b)({environment:h,useSudoMode:u,store:i,permissionChanges:n,from:void 0,shareMenuSessionId:C().Ay.state.sessionId,isRedesignEnabled:!1,parentStore:s})};return(0,M.jsx)(p().p,{isGray:!0,size:"xs",style:g.button,onClick:e,children:(0,M.jsx)(m().sA,{id:"permissionsRestoreBanner.button.restrictedPermissions",defaultMessage:"Restore"})})}(0,d().HB)(s)}function _(e){const{navigableParentStore:s,maxLength:i,showUnderline:a}=e,{isMobile:m}=(0,t().Y0)(),d=(0,t().v3)(),c=(0,o().IS)((e=>({linkBox:{color:e.mediumTextColor},title:{display:"inline"}})),[]),p=(0,n().K8)((()=>{if(s instanceof j().Bv)return(0,v().Ay)({store:s,fullyQualified:!1,pageVisitSource:r().y8.ShareMenu})}),[s]);if(!s)return null;const b=m&&s.table===l().yK;return(0,M.jsx)(g().A,{disabled:b,style:b?void 0:c.linkBox,underline:a&&!b,inline:!0,onClick:s.table===l().yK?()=>{s.table===l().yK&&A().F2({environment:d,teamId:s.id,tab:S().p.Members,from:"permission_item"}),u().ks(d,{store:s,option:"view",from:"share_menu"})}:void 0,href:p,children:(0,M.jsx)(h().A,{shouldWrap:!0,maxLength:i,store:s,style:c.title})})}function T(e){const{type:s,navigableParentStore:i,showRestoreButton:n}=e,{isMobile:o}=(0,t().Y0)(),r=(0,M.jsx)(_,{navigableParentStore:i,maxLength:o||!n?void 0:30,showUnderline:!0});switch(s){case"restore-team":return(0,M.jsx)(m().sA,{id:"pageShareMenu.restoreTeamPermissionsBanner.label",defaultMessage:"Page access is different from {linkBoxWithPageTitle}.",values:{linkBoxWithPageTitle:r}});case"unrestrict":return o?(0,M.jsx)(m().sA,{id:"pageShareMenu.restrictedAccessBanner.mobileLabel",defaultMessage:"Page access is restricted to people below.",values:{linkBoxWithPageTitle:r}}):(0,M.jsx)(m().sA,{id:"pageShareMenu.restrictedAccessBanner.label",defaultMessage:"Access restricted. May not be shared with everyone from {linkBoxWithPageTitle}.",values:{linkBoxWithPageTitle:r}});default:(0,d().HB)(s)}}const R={unrestrict:i(987555).T,"restore-team":i(738418).G}},529864:(e,s,i)=>{i.d(s,{o:()=>u});var t=i(296540),n=()=>i(56366),o=()=>i(14235),r=()=>i(972435),a=()=>i(962730),l=()=>i(663590),m=i(474848);const d=new(i(178624).R)({key:"spacePermissionRedesignCallout",namespace:i(419494).Bq,important:!0,trackingType:"necessary"}),c=(0,i(959013).YK)({calloutTitle:{defaultMessage:"Simpler sharing and access control",id:"spacePermissionVisibilityPicker.calloutTitle"},calloutBody:{defaultMessage:"“Anyone with link” and “Everyone at {spaceName}” are now combined. After updating general access, use the next dropdown to control who can find this page.",id:"spacePermissionVisibilityPicker.calloutBody"}}),u=t.memo((function(e){let{store:s,spacePermission:u,showTrustedDomainPermission:p,trustedDomainPermission:g,publicPermission:h,showPublicShareLinkPermission:b,isRestricted:f,permissionItemArgs:v,hideHoverStyles:x,buttonPopupStore:y,isDisplayOnly:I,handleSpacePermissionChange:S,title:P,onlyShowPrivateSpaceVisibility:j}=e;const A=(0,i(484714).v3)().device.isMobile,C=(0,i(891078).i0)(s),M=(0,i(653953).X)(),w=(0,n().K8)((()=>(0,l().FI)()),[]),k=(0,n().K8)((()=>(0,l().sh)()),[]),_=(0,i(963589).X)("share_menu_redesign_callout"),T=(0,n().K8)((()=>s.canAdmin()),[s]),R=!T||I||C,[N,D]=(0,t.useState)(!1);(0,t.useEffect)((()=>{w&&k&&_&&(d.getState()||(D(!0),d.setState(!0)))}),[w,k,_]);const L=(0,i(649145).L)((()=>y.setState({...y.state,open:!0})),[y],i(753199).y$.PermissionItemClick),B=(0,i(401497).IS)((e=>({origin:{display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:6,marginLeft:-6,height:void 0,paddingTop:4,paddingBottom:4,maxWidth:250},icon:{width:10,marginLeft:4,fill:e.mediumIconColor,display:"inline"},privacyMenu:{...!A&&{width:330,borderRadius:10},...A&&{maxWidth:"100%"}},title:{fontSize:14,whiteSpace:"normal"},mobileButton:{whiteSpace:"normal",marginBottom:4,height:void 0}})),[A]);return R?(0,m.jsx)("div",{style:B.title,children:P}):(0,m.jsx)(i(406699).Ay,{renderOrigin:e=>A?(0,m.jsx)("div",{style:B.title,...e,children:(0,m.jsxs)("div",{style:B.mobileButton,children:[P,(0,i(742117).V)(B.icon)]})}):(0,m.jsxs)(i(493823).p,{style:B.origin,hoveredStyle:x?{background:"unset"}:void 0,pressedStyle:x?{background:"unset"}:void 0,disabled:R,...e,children:[(0,m.jsx)(i(265665).j,{children:P}),T?(0,i(883234)._)(B.icon):null]}),disabled:R,onClick:L,buttonPopupStore:y,style:B.privacyMenu,alignmentToOrigin:a().C.Start,popupType:A?o().nl.BottomSheet:o().nl.Popup,render:e=>u?(0,m.jsx)(o().Ay,{popupType:o().nl.Popup,open:N,placementToOrigin:a().W.Left,enableOutsideClickDismiss:!0,onDismiss:()=>{D(!1)},originGap:4,render:()=>(0,m.jsx)(i(432229).P,{title:r().A.formatMessage(c.calloutTitle),body:r().A.formatMessage(c.calloutBody,{spaceName:M}),onDismiss:()=>{D(!1)}}),origin:(0,m.jsx)(i(1234).q,{store:s,spacePermission:u,parentCloseCallback:e.close,showTrustedDomainPermission:p,trustedDomainPermission:g,publicPermission:h,showPublicShareLinkPermission:b,isRestricted:f,sudoModeStore:v.sudoModeStore,location:v.location,permissionItemArgs:v,handleSpacePermissionChange:S,onlyShowPrivateSpaceVisibility:j})}):null})}))},545340:(e,s,i)=>{i.d(s,{A:()=>n});class t extends(()=>i(757695))().default{getInitialState(){return{trustedDomainPointers:[],enabledTrustedEmailDomains:[],lastEmitData:{value:-1,spaceId:void 0}}}getForSpace(e){if(!e)return;const{enabledTrustedEmailDomains:s,trustedDomainPointers:i,lastEmitData:t}=this.state;return t.spaceId===e.id?{enabledTrustedEmailDomains:s,trustedDomainPointers:i}:void 0}shouldRefetchTrustedDomains(e){let{currentSpaceId:s,emitValue:i}=e;const{spaceId:t,value:n}=this.state.lastEmitData;return s!==t||i!==n}}const n=t},555857:(e,s,i)=>{i.d(s,{P:()=>v});var t=i(296540),n=()=>i(484714),o=()=>i(56366),r=()=>i(401497),a=()=>i(328347),l=()=>i(959013),m=()=>i(701763),d=()=>i(493823),c=()=>i(115512),u=()=>i(326589),p=()=>i(437487),g=()=>i(87043),h=i(474848);function b(e){let{}=e;const s=(0,n().v3)(),{device:o}=s,a=(0,t.useCallback)((()=>{p().Ay.update((e=>({...e,tab:p().QC.Publish,display:p().pP.Publish})))}),[]),m=(0,r().IS)((e=>({container:{padding:12,backgroundColor:e.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${e.regularDividerColor}`,marginTop:o.isMobile?28:1},link:{textDecoration:"underline",display:"inline"}})),[o.isMobile]);return(0,h.jsx)(i(125565).A,{style:m.container,isMultiline:!0,isSmall:!0,children:(0,h.jsx)(l().sA,{id:"publicItemFooter.caption",defaultMessage:"Anyone on the web can access this published page · <link>Site settings</link>",values:{link:e=>(0,h.jsx)(i(187485).A,{style:m.link,onClick:a,children:e})}})})}const f=t.memo(b);function v(e){let{store:s,publicPermissionItem:i,permissionItemArgs:a}=e;const b=(0,n().v3)(),[v,y]=(0,t.useState)(!1),I=(0,o().K8)((()=>s.canAdmin()),[s]),S=(0,o().K8)((()=>!(0,u().g)()),[]),P=(0,t.useCallback)((()=>{p().Ay.update((e=>({...e,tab:p().QC.Publish,display:p().pP.Publish})))}),[]),j=(0,t.useCallback)((()=>{const e=!1===v;y(!v),e&&m().lD(b,{share_menu_session_id:p().Ay.state.sessionId,type:"public_link"})}),[b,v,y]),A=(0,r().IS)((e=>({link:{textDecoration:"underline",fontSize:(0,c().ny)(b,"UISmall"),color:e.text.secondary,paddingTop:0,paddingBottom:0,height:20,paddingLeft:4,paddingRight:4,marginTop:-4,marginLeft:-4,overflow:"hidden"},linkUILabelStyle:{overflow:"unset"}})),[b]);return(0,h.jsx)(g().Ay,{store:s,permissionItem:i.permissionItem,from:i.from,nonInheritedTooltip:(0,h.jsx)(l().sA,{id:"publicLinkPermissionItem.tooltip",defaultMessage:"Anyone on the web can access this published page"}),icon:(0,h.jsx)(x,{}),title:(0,h.jsx)(l().sA,{defaultMessage:"Anyone with published link",id:"publicLinkPermissionItem.title"}),subtitle:S&&(0,h.jsx)(d().p,{style:A.link,onClick:P,children:I?(0,h.jsx)(l().sA,{defaultMessage:"Edit site settings",id:"publicLinkPermissionItem.manageSettings"}):(0,h.jsx)(l().sA,{defaultMessage:"View site settings",id:"publicLinkPermissionItem.viewSettings"})}),selectFooter:(0,h.jsx)(f,{}),subtitleStyle:A.linkUILabelStyle,onClick:j,upgradeButtonName:"public_permission_item",...a})}function x(){const e=(0,r().IS)((e=>({backgroundContainer:{background:e.regularDividerColor,width:32,height:32,borderRadius:4,display:"flex",justifyContent:"center",alignItems:"center"},globeIcon:{width:22,fill:e.icon.secondary}})),[]);return(0,h.jsx)("div",{style:e.backgroundContainer,children:(0,a().h)(e.globeIcon)})}},560653:(e,s,i)=>{i.d(s,{A:()=>g});i(296540);var t=()=>i(484714),n=()=>i(56366),o=()=>i(401497),r=()=>i(854150),a=()=>i(959013),l=()=>i(747788),m=()=>i(87043),d=i(474848);function c(e){let{teamName:s,isCompact:i,isRedesignEnabled:t}=e;return i&&t?(0,d.jsx)(a().sA,{defaultMessage:"Members",id:"blockPermissionsSettings.permissionItem.teamAccessV3"}):i&&s?(0,d.jsx)(a().sA,{defaultMessage:"Teamspace members",id:"blockPermissionsSettings.permissionItem.teamAccessV2"}):s?(0,d.jsx)(a().sA,{defaultMessage:"Members of {teamName}",id:"blockPermissionsSettings.permissionItem.teamAccess",values:{teamName:s}}):(0,d.jsx)(a().sA,{id:"blockPermissionsSettings.permissionItem.membersTeamName.hidden",defaultMessage:"Members of a private teamspace"})}function u(e){let{isCompact:s,membersCount:i,isRedesignEnabled:n,permissionItem:o}=e;const{isMobile:m}=(0,t().Y0)();return s&&!n||0===i?null:m&&n&&o?(0,d.jsxs)("div",{children:[(0,d.jsx)(a().sA,{defaultMessage:"{membersCount, plural, one {{membersCount} person} other {{membersCount} people}}",id:"blockPermissionsSettings.teamMembersPermission.subtitle",values:{membersCount:i}})," · ",(0,d.jsx)(a().sA,{...(0,l().R)({type:o.type,role:o.role,table:r().yK,isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:!0}).label})]}):(0,d.jsx)(a().sA,{defaultMessage:"{membersCount, plural, one {{membersCount} person} other {{membersCount} people}}",id:"blockPermissionsSettings.teamMembersPermission.subtitle",values:{membersCount:i}})}function p(e){const{teamName:s}=e,i=(0,o().IS)((()=>({tooltip:{whiteSpace:"normal",maxWidth:240}})),[]);return s?(0,d.jsx)("div",{style:i.tooltip,children:(0,d.jsx)(a().sA,{defaultMessage:"Applies to all owners and members of {teamName}.",values:{teamName:s},id:"blockPermissionsSettings.teamPermission.tooltip"})}):null}const g=function(e){let{store:s,blockTeamPermission:a,isExternalTeam:l,fromPermissionWrapper:g,teamMembersCount:h,permissionItemArgs:b}=e;const{isMobile:f}=(0,t().Y0)(),v=(0,n().K8)((()=>(0,i(663590).FI)()),[]),{permissionItem:x}=a,y=(0,n().K8)((()=>i(351360).default.state.currentSpaceStore),[]),I=(0,n().K8)((()=>{var e;return i(68263).gl(x)?x.team_id:null===(e=i(108944).Uo(s))||void 0===e?void 0:e.id}),[x,s]),{teamStore:S,teamIsDefined:P,teamName:j}=(0,n().K8)((()=>{if(!y||!I)return{};const e=i(630116).h4.createChildStore(y,{table:r().yK,id:I,spaceId:y.id});return{teamStore:e,teamIsDefined:null==e?void 0:e.isDefined(),teamName:null==e?void 0:e.getName()}}),[y,I]),A=!l,C=(0,n().K8)((()=>{return h||(void 0!==S?null===(e=(0,i(37433).PF)(S))||void 0===e?void 0:e.memberCount:void 0);var e}),[S,h]),M=(0,o().IS)((()=>({container:{width:"100%"}})),[]);return S?(0,d.jsx)("div",{style:M.container,className:i(38337).rkF,children:(0,d.jsx)(m().Ay,{isCompact:A,store:s,permissionItem:a.permissionItem,from:a.from,icon:v?(0,d.jsx)(i(173783).A,{size:f&&v?m().Bj:m().Ev}):P?(0,d.jsx)(i(898808).x,{disabled:!0,store:S,size:f&&v?m().Bj:m().Ev}):(0,i(425736).s)(),title:(0,d.jsx)(c,{teamName:j,isCompact:A,isRedesignEnabled:v}),nonInheritedTooltip:(0,d.jsx)(p,{teamName:(0,d.jsx)(i(761652).A,{store:S,useInvertedColors:!0})}),subtitle:P&&(0,d.jsx)(u,{membersCount:C??0,isCompact:A,isRedesignEnabled:v,permissionItem:a.permissionItem}),upgradeButtonName:"team_permission_item",fromPermissionWrapper:g,...b})}):null}},585293:(e,s,i)=>{i.d(s,{a:()=>o});var t=i(296540),n=i(474848);const o=t.forwardRef(((e,s)=>{const t=(0,i(401497).IS)((s=>({buttonStyle:{paddingLeft:8,paddingRight:8,paddingTop:2,paddingBottom:2,width:"100%",marginLeft:0,background:"transparent",...e.buttonStyle},menuItemStyle:{gap:6,background:"transparent"},innerContainer:{marginLeft:0,paddingLeft:0,minWidth:"auto",color:e.disabled?s.text.secondary:void 0,background:"transparent"},desktopIconStyle:{margin:0},rightStyle:{display:"flex",alignItems:"center",gap:6,color:s.text.secondary,margin:0,...e.rightStyle}})),[e.disabled,e.rightStyle,e.buttonStyle]);return(0,n.jsx)(i(760217).A,{role:"button",...e,ref:s,style:t.menuItemStyle,buttonStyle:t.buttonStyle,textWrapperStyle:t.innerContainer,desktopIconStyle:t.desktopIconStyle,rightStyle:t.rightStyle})}));o.displayName="SiteSettingButtonMenuItem"},619338:(e,s,i)=>{i.d(s,{p:()=>o});var t=()=>i(468006),n=()=>i(108944);function o(e){const{spaceVisibleUserMap:s,store:i,userId:o}=e,r=s.get(o);if(!r||"none"!==r.role)return;if(!r.isTeamGuest)return"guest";const a=n().Uo(i),l=null==a?void 0:a.getModel();if(!l)return"guest";return(0,t().CG)({team:l,userId:o})?"team_level_guest":"guest"}},629027:(e,s,i)=>{i.d(s,{P:()=>l});var t=()=>i(56366),n=()=>i(534177),o=()=>i(108944),r=()=>i(247450),a=()=>i(351360);function l(e){let{store:s}=e;return(0,t().K8)((()=>{const e=(0,r().h)({blockId:s.id,setting:"publicAccess"});if((0,n().O9)(e))return e;const i=a().default.state.currentSpaceStore,t=(0,o().Uo)(s);return t?{disabled:Boolean(t.getDisablePublicAccess()),disabledBy:"team"}:!t&&null!=i&&i.getDisablePublicAccess()?{disabled:!0,disabledBy:"space"}:{disabled:!1}}),[s])}},631523:(e,s,i)=>{i.d(s,{A:()=>p});var t=i(296540),n=()=>i(484714),o=()=>i(56366),r=()=>i(401497),a=()=>i(959013),l=()=>i(710149),m=()=>i(747788),d=i(474848);function c(e){let{teamName:s,isRedesignEnabled:i}=e;return s?i?(0,d.jsx)(a().sA,{defaultMessage:"People in {teamName}",id:"blockPermissionsSettings.permissionItem.teamspaceAccessV2",values:{teamName:s}}):(0,d.jsx)(a().sA,{defaultMessage:"Everyone at {teamName}",id:"blockPermissionsSettings.permissionItem.teamspaceAccess",values:{teamName:s}}):i?(0,d.jsx)(a().sA,{defaultMessage:"People in a private teamspace",id:"blockPermissionsSettings.permissionItem.teamspace.hiddenV2"}):(0,d.jsx)(a().sA,{defaultMessage:"Everyone at a private teamspace",id:"blockPermissionsSettings.permissionItem.teamspace.hidden"})}function u(e){let{membersCount:s,isRedesignEnabled:i,teamPermissionItem:t}=e;const{isMobile:o}=(0,n().Y0)(),c=(0,r().IS)((e=>({container:{display:"flex",alignItems:"center",gap:2}})),[]),u=s?(0,d.jsx)("div",{children:(0,d.jsx)(a().sA,{defaultMessage:"{membersCount, plural, one {{membersCount} person} other {{membersCount} people}}",id:"blockPermissionsSettings.teamPermission.memberCount.subtitle",values:{membersCount:s}})}):(0,d.jsxs)("div",{style:c.container,children:[(0,d.jsx)(l().A,{style:{height:12,width:14,borderRadius:4,marginRight:2,marginLeft:2}}),(0,d.jsx)(a().sA,{defaultMessage:"people",id:"blockPermissionsSettings.teamPermission.subtitle.people",values:{membersCount:s}})]});return i?o?(0,d.jsxs)("div",{style:c.container,children:[u,t&&(0,d.jsxs)(d.Fragment,{children:[" · ",(0,d.jsx)(a().sA,{...(0,m().R)({type:t.type,role:t.role,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:!0}).label})]})]}):(0,d.jsxs)("div",{style:c.container,children:[(0,d.jsx)(a().sA,{defaultMessage:"Teamspace",id:"blockPermissionsSettings.teamPermission.subtitle.teamspace"})," · ",u]}):u}const p=function(e){let{store:s,blockTeamMemberPermission:l,blockTeamOwnerPermission:p,blockTeamGuestPermission:g,permissionItemArgs:h}=e;const b=(0,n().v3)(),f=b.device.isMobile,[v,x]=(0,t.useState)(!1),[y,I]=(0,t.useState)(!1),{permissionItem:S}=l,P=(0,o().K8)((()=>i(351360).default.state.currentSpaceStore),[]),j=(0,o().K8)((()=>(0,i(663590).FI)()),[]),A=(0,o().K8)((()=>{var e;return i(68263).gl(S)?S.team_id:null===(e=i(108944).Uo(s))||void 0===e?void 0:e.id}),[S,s]),C=p.permissionItem.role,M=S.role,w={type:"display_only_overview_permission",role:C===M?M:"none"===M||"none"===C?"limited":"access"},{teamStore:k,teamIsDefined:_,teamName:T}=(0,o().K8)((()=>{if(!P||!A)return{undefined:void 0};const e=i(630116).h4.createChildStore(P,{table:i(854150).yK,id:A,spaceId:P.id});return{teamStore:e,teamIsDefined:null==e?void 0:e.isDefined(),teamName:null==e?void 0:e.getName()}}),[P,A]),R=(0,o().K8)((()=>{if(void 0!==k)return(0,i(37433).PF)(k)}),[k]),{membersCount:N,totalMembersAndGuestsCount:D,ownersCount:L,teamGuestsCount:B}=void 0!==R?{membersCount:R.memberCount,totalMembersAndGuestsCount:R.memberCountWithGuests,ownersCount:R.ownerCount,teamGuestsCount:R.memberCountWithGuests-R.memberCount}:{membersCount:0,totalMembersAndGuestsCount:void 0,ownersCount:0,teamGuestsCount:0},W=(0,o().K8)((()=>{if(!P)return!1;return!P.getDisableTeamGuests()&&((null==k||!k.isDefault())&&(0,i(47373).Qd)())}),[P,k]),E=(0,t.useCallback)((()=>x(!0)),[]),K=(0,t.useCallback)((()=>x(!1)),[]),O=(0,t.useCallback)((()=>{const e=!1===y;if(I(!y),e){if(!k)return;i(701763).lD(b,{share_menu_session_id:i(437487).Ay.state.sessionId,type:"team",team_id:k.id})}}),[b,y,I,k]),U=(0,r().IS)((e=>({icon:{width:10,marginLeft:4,fill:e.lightIconColor},teamPermissionsContainer:{paddingLeft:16,display:y?"block":"none"},roleButton:{color:e.mediumTextColor,fontSize:(0,i(623275).kx)({environment:b,isRedesignEnabled:j})},mobileTitleContainer:{display:"flex",alignItems:"center"},mobileTextContainer:{dislay:"block",overflow:"hidden"},mobileChevronIcon:{marginLeft:4,fill:e.icon.secondary,transform:`rotate(${y?90:0}deg)`,transition:"transform 150ms ease"}})),[y,b,j]),V=j?null:(0,i(535845).B)(U.icon);if(!k)return null;const F=_?(0,d.jsx)(i(143106).A,{store:k}):(0,i(425736).s)(),z=j?(0,d.jsx)(i(180925).A,{expanded:y,hovered:v,onClick:O,children:F}):F;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i(87043).Ay,{store:s,permissionItem:w,from:l.from,onMouseEnter:E,onMouseLeave:K,icon:z,title:f&&j?(0,d.jsxs)("div",{style:U.mobileTitleContainer,children:[(0,d.jsx)("div",{style:U.mobileTextContainer,children:(0,d.jsx)(c,{teamName:T,isRedesignEnabled:j})}),(0,d.jsx)("div",{style:U.mobileChevronIcon,children:(0,i(742117).V)({height:12,width:12})})]}):(0,d.jsx)(c,{teamName:T,isRedesignEnabled:j}),subtitle:_&&(0,d.jsx)(u,{membersCount:D,isRedesignEnabled:j,teamPermissionItem:w}),nonInheritedTooltip:j?(0,d.jsx)(a().sA,{id:"TeamPermissionItem.access",defaultMessage:"People in the {inlineIconAndName} teamspace",values:{inlineIconAndName:(0,d.jsx)(i(761652).A,{store:k,useInvertedColors:!0})}}):null,upgradeButtonName:"team_permission_item",onClick:O,permissionRoleSelect:y?V:(0,d.jsx)(m().Y,{type:w.type,role:w.role,icon:i(438265).d,disabled:!0,buttonStyle:U.roleButton,table:i(179034).ev,isCurrentUser:!1,from:"shareMenu"}),isCollapsible:!0,...h}),(0,d.jsxs)("div",{style:U.teamPermissionsContainer,children:[p&&(0,d.jsx)(i(99162).A,{store:s,permissionItemArgs:h,blockTeamOwnerPermission:p,teamOwnersCount:L,fromPermissionWrapper:"expandable_permission"}),l&&(0,d.jsx)(i(560653).A,{store:s,permissionItemArgs:h,blockTeamPermission:l,teamMembersCount:N,fromPermissionWrapper:"expandable_permission"}),W&&g&&(0,d.jsx)(i(304243).A,{store:s,permissionItemArgs:h,blockTeamGuestPermission:g,teamGuestsCount:B,fromPermissionWrapper:"expandable_permission"})]})]})}},641212:(e,s,i)=>{i.d(s,{A:()=>q});var t=i(296540),n=()=>i(484714),o=()=>i(56366),r=()=>i(401497),a=()=>i(663590),l=(i(898992),i(672577),()=>i(668725)),m=()=>i(959013),d=()=>i(284371),c=()=>i(406699),u=()=>i(864943),p=()=>i(859428),g=()=>i(891078),h=()=>i(653953),b=()=>i(962730),f=()=>i(351360),v=()=>i(463830),x=()=>i(700250),y=()=>i(920410),I=()=>i(1234),S=()=>i(329105),P=i(474848);const j=16;function A(e){const{store:s,spacePermission:i}=e,n=(0,o().K8)((()=>s.canAdmin()),[s]),A=(0,g().i0)(s),C=(0,g().ty)(s),M=(0,h().X)(),w=(0,o().K8)((()=>(0,a().FI)()),[]),k=(0,o().K8)((()=>(0,a().sh)()),[]),_=(0,y().W)(i.permissionItem,k),T=(0,y().W)(i.permissionItem,!1),R=(0,o().K8)((()=>{const e=f().default.state.currentSpaceStore;return null!=e&&e.isDefined()?e:null}),[]),N=(0,o().uB)(void 0,v().A),D=(0,t.useRef)(null),L=(0,S().NR)(w,k),B=(0,r().IS)((e=>({chevron:{width:12,marginLeft:4,fill:e.mediumIconColor},popup:{overflow:"visible",width:"100%",minWidth:430},button:{justifyContent:"center",borderRadius:32,height:32,color:e.mediumTextColor,paddingLeft:12,maxWidth:380},title:{...d().RC},icon:{fill:e.mediumTextColor,width:j}})),[]);return R?(0,P.jsx)(c().Ay,{buttonPopupStore:N,popupType:c().z7.Popup,popupWrapStyle:B.popup,renderOrigin:e=>{const s=L.find((e=>e.key===_));return s?(0,P.jsx)(p().A,{placement:b().W.Bottom,alignment:b().C.Start,disableTooltip:n&&!A&&!C,renderTooltip:()=>n?A?(0,P.jsx)(m().sA,{defaultMessage:"Restore page from trash to change the privacy setting",id:"linkSharingPill.disabledTooltip.message.pageInTrash"}):C?(0,P.jsx)(m().sA,{defaultMessage:"Resolve pending edits to change the privacy setting",id:"linkSharingPill.disabledTooltip.message.hasAIEdits"}):void 0:(0,P.jsx)(m().sA,{defaultMessage:"You must have full access to change the privacy setting",id:"linkSharingPill.disabledTooltip.message"}),render:i=>(0,P.jsxs)(u().A,{...e,size:"lg",ref:D,style:B.button,icon:e=>s.icon({isShareMenuRedesignEnabled:w,spaceStore:R,style:e,teamspaceIconSize:j}),iconStyle:B.icon,disabled:!n||A||C,disabledFeedback:!0,...i,children:[(0,P.jsx)("div",{style:B.title,children:s.title({type:"shortened",spaceName:M,isShareMenuRedesignEnabled:w,visibility:T,isSearchableToggleEnabled:k})}),n&&(0,l().b)(B.chevron)]})}):null},placementToOrigin:x().UV.Bottom,alignmentToOrigin:x().MY.Start,sameWidthAsOrigin:!0,render:s=>(0,P.jsx)(I().q,{...e,parentCloseCallback:()=>s.close(),trustedDomainPermission:e.trustedDomainPermission})}):null}var C=()=>i(535845),M=()=>i(145214),w=()=>i(493823),k=()=>i(125565);function _(e){const{store:s,spacePermission:i}=e,n=(0,o().K8)((()=>(0,a().FI)()),[]),d=(0,o().K8)((()=>(0,a().sh)()),[]),c=(0,y().W)(i.permissionItem,d),u=(0,y().W)(i.permissionItem,!1),p=(0,S().NR)(n,d),b=(0,o().K8)((()=>s.canAdmin()),[s]),v=(0,g().i0)(s),x=(0,g().ty)(s),j=(0,h().X)(),A=(0,o().K8)((()=>{const e=f().default.state.currentSpaceStore;return null!=e&&e.isDefined()?e:null}),[]),[_,T]=(0,t.useState)(!1),R=(0,r().IS)((s=>({chevron:{width:12,fill:s.mediumIconColor,marginLeft:"auto"},button:{height:42,color:s.mediumTextColor,marginBottom:8,padding:"0 6px",marginLeft:-6,marginRight:-6,width:"100%"},icon:{fill:s.regularIconColor,width:32,height:32,backgroundColor:s.lightDividerColor,padding:6,borderRadius:4,marginRight:12},animation:{maxHeight:e.showTrustedDomainPermission?250:220},enterAnimation:{maxHeight:0},exitAnimation:{maxHeight:0},container:{overflow:"hidden"}})),[e.showTrustedDomainPermission]),N=p.find((e=>e.key===c));return N&&A?(0,P.jsxs)("div",{style:R.container,children:[(0,P.jsxs)(w().p,{style:R.button,icon:e=>N.icon({style:e,spaceStore:A,isShareMenuRedesignEnabled:n,teamspaceIconSize:32}),iconStyle:R.icon,disabled:!b||v||x,disabledFeedback:!0,onClick:()=>T(!_),children:[(0,P.jsxs)("div",{children:[(0,P.jsx)(k().A,{isSmall:!0,children:(0,P.jsx)(m().sA,{id:"linkSharingPill.visibilityMobileTitle",defaultMessage:"Page visibility"})}),(0,P.jsx)(k().A,{children:N.title({type:"shortened",spaceName:j,isShareMenuRedesignEnabled:n,visibility:u,isSearchableToggleEnabled:d})})]}),b&&(_?(0,l().b)(R.chevron):(0,C().B)(R.chevron))]}),(0,P.jsx)(M().A,{visible:_,animate:R.animation,initial:R.enterAnimation,exit:R.exitAnimation,children:(0,P.jsx)(I().q,{...e,parentCloseCallback:()=>T(!1)})})]}):null}var T=()=>i(584262),R=()=>i(657222),N=()=>i(68263),D=()=>i(502492),L=()=>i(884107),B=()=>i(204063),W=()=>i(780054),E=()=>i(989423),K=()=>i(492414);function O(e){const s=(0,n().v3)(),{device:t,WindowSizeStore:a}=s,l=(0,o().K8)((()=>({left:a.getSafePaddingLeftCSS(8),right:a.getSafePaddingRightCSS(12)})),[a]),d=(0,r().IS)((e=>({button:{display:"flex",alignItems:"center",width:t.isMobile?"100%":void 0,height:t.isMobile?44:32,paddingTop:t.isMobile?12:4,paddingBottom:t.isMobile?12:4,paddingLeft:l.left,paddingRight:l.right},helpIcon:{width:t.isMobile?16:14,height:t.isMobile?16:14,fill:t.isMobile?e.mediumIconColor:e.lightIconColor}})),[t.isMobile,l]);return(0,P.jsx)(i(187485).A,{href:(0,i(836251).xS)("guides.sharing"),onClick:()=>i(148024).FH(s,{from:"sharing"}),style:{width:t.isMobile?"100%":void 0},external:!0,children:(0,P.jsxs)(w().p,{mobileFeedback:t.isMobile,size:"sm",style:{...d.button,...e.style},disabled:Boolean(e.disableHover),children:[(0,P.jsx)("div",{style:{marginLeft:t.isMobile?2:0,marginRight:t.isMobile?8:6},children:(0,i(133033).$)(d.helpIcon)}),(0,P.jsx)(k().A,{isMobile:t.isMobile,isSecondaryColor:!t.isMobile,children:(0,P.jsx)(m().sA,{defaultMessage:"Learn about sharing",id:"blockPermissionsSettings.learnAboutSharing.prompt"})})]})})}O.displayName="LearnAboutSharingLink";const U=O;function V(e){const{store:s,buttonPopupStore:i,events:t}=e,l=(0,n().v3)(),{device:c,mobileNative:u}=l,p=c.isMobile,g=(0,o().K8)((()=>(0,a().FI)()),[]),h=(0,r().IS)((e=>({button:{flex:1,height:36,minHeight:36,...g?{borderRadius:12,marginTop:12}:{},...g&&p?{minHeight:48,fontSize:d().J.UIRegular.mobile}:{}}})),[g,p]);return(0,P.jsx)(B().A,{onClick:()=>{var e;c.isMobileNative?function(e){const{store:s,mobileNative:i}=e,t=(0,D().kb)({schemeUrl:(0,K().Ay)({store:s,pageVisitSource:T().y8.CopyLink}),baseUrl:W().A.domainBaseUrl});i&&i.share(t)}({store:s,mobileNative:u}):G({store:s,buttonPopupStore:i,environment:l});const t=null===(e=s.getCollectionStore())||void 0===e?void 0:e.id,n=s.getParentCollectionIdUpToTwoLevels();Y(l,{collection_id:t,parent_collection_id:n})},style:h.button,...t,children:c.isMobileNative?(0,P.jsx)(m().sA,{id:"pageShareMenu.shareLinkButton.label",defaultMessage:"Share link"}):(0,P.jsx)(m().sA,{id:"pageShareMenu.copyLinkButton.label",defaultMessage:"Copy link"})})}function F(e){const{store:s,buttonPopupStore:i,events:t,trustedDomainPermissionItem:l}=e,d=(0,n().v3)(),c=(0,o().K8)((()=>(0,a().FI)()),[]),p=(0,r().IS)((e=>({button:{height:24,paddingLeft:8,paddingRight:8,color:e.regularTextColor,marginLeft:"auto"},icon:{width:14,height:14,fill:c?e.mediumIconColor:e.regularIconColor,marginLeft:0,marginRight:6},label:{color:e.regularTextColor},redesignButton:{paddingLeft:10,paddingRight:12,paddingTop:6,paddingBottom:6,color:e.regularTextColor,justifyContent:"center",borderRadius:6}})),[c]);return c?(0,P.jsxs)(u().A,{size:"lg",onClick:()=>{var e;G({store:s,buttonPopupStore:i,environment:d,keepPopupOpen:!0});const t=null===(e=s.getCollectionStore())||void 0===e?void 0:e.id,n=s.getParentCollectionIdUpToTwoLevels();Y(d,{collection_id:t,parent_collection_id:n,trusted_domain_permission_role:l.role})},style:p.redesignButton,...t,children:[(0,R().w)(p.icon),(0,P.jsx)(k().A,{style:p.label,children:(0,P.jsx)(m().sA,{id:"blockPermissionsSettings.copyLinkButtonV2.label",defaultMessage:"Copy link"})})]}):(0,P.jsxs)(w().p,{size:"sm",onClick:()=>{var e;G({store:s,buttonPopupStore:i,environment:d});const t=null===(e=s.getCollectionStore())||void 0===e?void 0:e.id,n=s.getParentCollectionIdUpToTwoLevels();Y(d,{collection_id:t,parent_collection_id:n,trusted_domain_permission_role:l.role})},style:p.button,...t,children:[(0,R().w)(p.icon),(0,P.jsx)(k().A,{isSmall:!0,style:p.label,children:(0,P.jsx)(m().sA,{id:"blockPermissionsSettings.copyLinkButton.label",defaultMessage:"Copy link"})})]})}function z(e){const{calculatedPermissions:s,isRedesignEnabled:i,spaceName:t}=e,n=s.mostPermissivePublicItem.permissionItem;if((0,N().Tt)(n.role))return(0,P.jsx)(m().sA,{defaultMessage:"This page has public link access, so anyone with the link will be able to view the page.",id:"blockPermissionsSettings.publicLinkInfo.tooltip"});const o=s.mostPermissiveSpaceItem.permissionItem;return(0,N().Tt)(o.role)?i&&t?(0,P.jsx)(m().sA,{defaultMessage:"Anyone at {spaceName} can access with this link",id:"blockPermissionsSettings.workspacePermissions.tooltipV2",values:{spaceName:t}}):(0,P.jsx)(m().sA,{defaultMessage:"This page has workspace access, so anyone in the workspace will be able to view the link.",id:"blockPermissionsSettings.workspacePermissions.tooltip"}):s.permissionItemsCount>1?i?(0,P.jsx)(m().sA,{defaultMessage:"Only people invited to this page can access with this link",id:"blockPermissionsSettings.userPermissions.tooltipV2"}):(0,P.jsx)(m().sA,{defaultMessage:"Only you and other invited members and guests will be able to view the link.",id:"blockPermissionsSettings.userPermissions.tooltip"}):(0,P.jsx)(m().sA,{defaultMessage:"Only you can access this page, so the link will only work for you.",id:"blockPermissionsSettings.privatePermissions.tooltip"})}async function G(e){const{store:s,buttonPopupStore:i,environment:t,keepPopupOpen:n}=e,o=(0,K().Ay)({store:s,pageVisitSource:T().y8.CopyLink}),r=await L().R.clipboardActions.load();await r.copyString({environment:t,stringValue:o,copiedMessage:r.clipboardMessages.copiedLinkToClipboard}),i&&!n&&i.setState({open:!1})}const H=function(e){const{store:s,buttonPopupStore:i,calculatedPermissions:t}=e,{device:l}=(0,n().v3)(),m=(0,h().X)(),d=(0,o().K8)((()=>(0,a().FI)()),[]),c=(0,r().IS)((()=>({tooltip:{width:280}})),[]);return(0,P.jsxs)(P.Fragment,{children:[d&&!l.isMobile&&(0,P.jsx)(U,{}),(0,P.jsx)(p().A,{delayThreshold:d?500:0,placement:b().W.Bottom,renderTooltip:()=>(0,P.jsx)(z,{calculatedPermissions:t,isRedesignEnabled:d,spaceName:m}),textWrap:!0,style:c.tooltip,render:e=>l.isMobile?(0,P.jsx)(V,{store:s,buttonPopupStore:i,events:e}):(0,P.jsx)(F,{store:s,buttonPopupStore:i,events:e,trustedDomainPermissionItem:t.mostPermissiveTrustedDomainItem.permissionItem})})]})};function Y(e,s){E().vd(e,"copy_link_from_permissions_setting",s)}const q=function(e){const{isMobile:s}=(0,n().Y0)(),t=(0,o().K8)((()=>(0,a().FI)()),[]),l=(0,r().IS)((e=>({container:{display:"flex",alignItems:s?"normal":"center",flexDirection:s?"column":"row",justifyContent:"space-between",padding:t?s?"16px 20px 20px":"12px 12px":"8px 14px",...t?{borderTop:s?`0.5px solid ${e.stroke.primary}`:`1px solid ${e.stroke.secondary}`}:{boxShadow:`0 -1px 0 ${e.regularDividerColor}`}}})),[s,t]),{mostPermissiveSpaceItem:m,mostPermissiveTrustedDomainItem:d,showTrustedDomainPermission:c,mostPermissivePublicItem:u,showPublicShareLinkPermission:p,showRestrictedPermissionBanner:g}=e.calculatedPermissions;return(0,P.jsx)("div",{style:l.container,children:s?t?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(i(219249).T5,{store:e.store,calculatedPermissions:e.calculatedPermissions,permissionItemArgs:e.permissionItemArgs}),(0,P.jsx)(H,{store:e.store,buttonPopupStore:e.buttonPopupStore,calculatedPermissions:e.calculatedPermissions})]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(_,{store:e.store,sudoModeStore:e.permissionItemArgs.sudoModeStore,location:e.permissionItemArgs.location,spacePermission:m,isRestricted:g,showTrustedDomainPermission:c,trustedDomainPermission:d,publicPermission:u,showPublicShareLinkPermission:p,permissionItemArgs:e.permissionItemArgs}),(0,P.jsx)(H,{store:e.store,buttonPopupStore:e.buttonPopupStore,calculatedPermissions:e.calculatedPermissions})]}):t?(0,P.jsx)(H,{store:e.store,buttonPopupStore:e.buttonPopupStore,calculatedPermissions:e.calculatedPermissions}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(A,{store:e.store,sudoModeStore:e.permissionItemArgs.sudoModeStore,location:e.permissionItemArgs.location,spacePermission:m,isRestricted:g,showTrustedDomainPermission:c,trustedDomainPermission:d,publicPermission:u,showPublicShareLinkPermission:p,permissionItemArgs:e.permissionItemArgs}),(0,P.jsx)(H,{store:e.store,buttonPopupStore:e.buttonPopupStore,calculatedPermissions:e.calculatedPermissions})]})})}},653953:(e,s,i)=>{i.d(s,{X:()=>l});var t=()=>i(484714),n=()=>i(56366),o=()=>i(959013),r=()=>i(437622),a=()=>i(351360);function l(){const e=(0,t().v3)(),s=(0,o().tz)();return(0,n().K8)((()=>{const{currentSpaceStore:i}=a().default.state;return i?(0,r().GK)(e,i):s.formatMessage({defaultMessage:"Untitled workspace",id:"spaceHelpers.getSpaceName.untitledWorkspace.name"})}),[e,s])}},678634:(e,s,i)=>{i.d(s,{_:()=>g});i(898992),i(672577);var t=i(296540),n=()=>i(484714),o=()=>i(56366),r=()=>i(854150),a=()=>i(959013),l=()=>i(534177),m=()=>i(511303),d=()=>i(351360),c=()=>i(605402),u=()=>i(630116),p=i(474848);function g(e){let{permissionItem:s}=e;const i=(0,n().v3)(),{organizationOwnerRecordCache:g}=(0,t.useContext)(m().N),h=(0,o().K8)((()=>d().default.state.currentSpaceStore),[]),b=(0,o().K8)((()=>null==h?void 0:h.getName()),[h]),f=(0,o().K8)((()=>{var e;if("group_permission"!==s.type)return;const i=s.group_id;return null===(e=c().A.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===i)))||void 0===e?void 0:e.group.name}),[s]),v=(0,o().K8)((()=>{if("explicit_team_permission"!==s.type&&"explicit_team_owner_permission"!==s.type)return;const e=s.team_id;return new(u().h4)(i,{id:e,table:r().yK},{inMemoryRecordCache:g}).getName()}),[s,i,g]);switch(s.type){case"space_permission":return h?(0,p.jsx)(a().sA,{id:"searchTargetPermissionItem.spacePermission",defaultMessage:"{name} workspace",values:{name:b}}):null;case"explicit_team_permission":case"team_permission":return(0,p.jsx)(a().sA,{id:"searchTargetPermissionItem.teamPermission",defaultMessage:"{name} teamspace",values:{name:v}});case"team_owner_permission":case"explicit_team_owner_permission":return(0,p.jsx)(a().sA,{id:"searchTargetPermissionItem.teamOwnersPermission",defaultMessage:"{name} teamspace",values:{name:v}});case"explicit_team_guest_permission":return(0,p.jsx)(a().sA,{id:"searchTargetPermissionItem.teamGuestsPermission",defaultMessage:"Team guests"});case"group_permission":return f?(0,p.jsx)(a().sA,{id:"searchTargetPermissionItem.groupPermission",defaultMessage:"{groupName} group",values:{groupName:f}}):(0,p.jsx)(a().sA,{id:"searchTargetPermissionItem.groupPermissionWithoutName",defaultMessage:"Group"});case"user_permission":case"bot_permission":case"exclusive_user_permission":case"public_permission":case"deleted_permission":case"restricted_permission":case"trusted_domain_permission":return null;default:return(0,l().ub)(s),null}}},704262:(e,s,i)=>{i.d(s,{A:()=>g});var t=i(296540),n=()=>i(484714),o=()=>i(56366),r=()=>i(401497),a=()=>i(30626),l=()=>i(959013),m=()=>i(704152),d=()=>i(125565),c=()=>i(663590),u=()=>i(623275),p=i(474848);function g(e){let{permissions:s}=e;const i=(0,n().v3)().device.isMobile,[g,h]=(0,t.useState)(!1),b=(0,o().K8)((()=>(0,c().FI)()),[]),f=(0,r().IS)((e=>({button:{width:"100%",display:g?"none":"inline-flex",padding:8,...b&&{alignItems:"center",...(0,u().wo)({isMobile:i}),width:"calc(100% - 16px)",height:48}},icon:{width:14,transform:"rotate(90deg)",fill:e.lightIconColor},list:{display:g?"block":"none"},dotsIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",...b?{width:32,marginRight:(0,u().qj)({isMobile:i})}:{width:36+(0,u().qj)({isMobile:i})}}})),[i,b,g]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(m().A,{onClick:()=>h(!0),style:f.button,children:[(0,p.jsx)("div",{style:f.dotsIconContainer,children:(0,a()._)(f.icon)}),(0,p.jsx)(d().A,{isSmall:!b,isSecondaryColor:!0,children:b?(0,p.jsx)(l().sA,{id:"blockPermissionsSettings.permissionsList.expandButtonV2",defaultMessage:"See {count} more",values:{count:s.length}}):(0,p.jsx)(l().sA,{id:"blockPermissionsSettings.permissionsList.expandButton",defaultMessage:"{count} more people",values:{count:s.length}})})]}),(0,p.jsx)("div",{style:f.list,children:s})]})}},726360:(e,s,i)=>{i.d(s,{H:()=>o,U:()=>n});var t=i(296540);const n=(0,t.createContext)(new(i(545340).A));function o(){return(0,t.useContext)(n)}n.displayName="TrustedDomainsContext"},810727:(e,s,i)=>{i.d(s,{z:()=>b});i(898992),i(672577),i(296540);var t=()=>i(56366),n=()=>i(401497),o=()=>i(854150),r=()=>i(959013),a=()=>i(534177),l=()=>i(284371),m=()=>i(16006),d=()=>i(108944),c=()=>i(605402),u=()=>i(630116),p=()=>i(898808),g=()=>i(678634),h=i(474848);function b(e){let{permissionItem:s,targetType:i,targetName:b,store:f}=e;const v=(0,n().IS)((()=>({groupOrTeamName:{fontWeight:l().Wy.bold}})),[]),x=(0,t().K8)((()=>{var e;if("group_permission"!==s.type)return;const i=null===(e=c().A.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===s.group_id)))||void 0===e?void 0:e.group.name;return i?(0,h.jsx)("span",{style:v.groupOrTeamName,children:i}):void 0}),[s,v.groupOrTeamName]),y=(0,t().K8)((()=>{var e;if("team_permission"!==s.type&&"explicit_team_permission"!==s.type&&"team_owner_permission"!==s.type&&"explicit_team_owner_permission"!==s.type&&"explicit_team_guest_permission"!==s.type)return;const i="team_permission"===s.type||"team_owner_permission"===s.type?null===(e=(0,d().Uo)(f))||void 0===e?void 0:e.id:s.team_id;if(!i)return;const t=u().h4.createChildStore(f,{table:o().yK,id:i,spaceId:f.getSpaceId()});return(0,h.jsxs)("span",{style:{...v.groupOrTeamName,display:"inline-flex",gap:4},children:[(0,h.jsx)(p().x,{store:t,size:14,style:{margin:1}}),(0,h.jsx)(m().A,{store:t,shouldWrap:!0})]})}),[s,f,v.groupOrTeamName]);if("none"===s.role)return;const I=(0,h.jsx)(r().sA,{id:"searchTargetPermissionItem.accessReasonTooltip.withoutUserName",defaultMessage:"Access is from the “{permissionItemName}”",values:{permissionItemName:(0,h.jsx)(g()._,{permissionItem:s})}});if("group"===i&&"group_permission"===s.type)return b?(0,h.jsx)(r().sA,{id:"searchTargetPermissionItem.accessReasonTooltip.groupWithGroupName",defaultMessage:"The {targetGroupName} group has access to this page",values:{targetGroupName:b}}):(0,h.jsx)(r().sA,{id:"searchTargetPermissionItem.accessReasonTooltip.groupWithoutGroupName",defaultMessage:"This group has access to this page"});if("user"===i&&("user_permission"===s.type||"exclusive_user_permission"===s.type))return b?(0,h.jsx)(r().sA,{id:"searchTargetPermissionItem.accessReasonTooltip.userWithUserName",defaultMessage:"{targetUserName} has access to this page",values:{targetUserName:b}}):void 0;switch(s.type){case"space_permission":return b&&"user"===i?(0,h.jsx)(r().sA,{id:"searchTargetPermissionItem.accessReasonTooltip.spaceWithUserName",defaultMessage:"{targetUserName} has access from the “{permissionItemName}” setting on this page",values:{targetUserName:b,permissionItemName:(0,h.jsx)(g()._,{permissionItem:s})}}):b&&"group"===i?(0,h.jsx)(r().sA,{id:"searchTargetPermissionItem.accessReasonTooltip.spaceWithGroupName",defaultMessage:"The {targetGroupName} group has access from the “{permissionItemName}” setting on this page",values:{targetGroupName:b,permissionItemName:(0,h.jsx)(g()._,{permissionItem:s})}}):I;case"team_permission":case"explicit_team_permission":return"user"===i&&b&&y?(0,h.jsx)(r().sA,{id:"searchTargetPermissionItem.accessReasonTooltip.member.teamWithUserName",defaultMessage:"{targetUserName} has access as a member of the {teamspaceName} teamspace",values:{targetUserName:b,teamspaceName:y}}):"group"===i&&b&&y?(0,h.jsx)(r().sA,{id:"searchTargetPermissionItem.accessReasonTooltip.group.teamWithUserName",defaultMessage:"The {targetGroupName} group has access from the {teamspaceName} teamspace",values:{targetGroupName:b,teamspaceName:y}}):I;case"team_owner_permission":case"explicit_team_owner_permission":return"user"===i&&b&&y?(0,h.jsx)(r().sA,{id:"searchTargetPermissionItem.accessReasonTooltip.owner.teamWithUserName",defaultMessage:"{targetUserName} has access as an owner of the {teamspaceName} teamspace",values:{targetUserName:b,teamspaceName:y}}):"group"===i&&b&&y?(0,h.jsx)(r().sA,{id:"searchTargetPermissionItem.accessReasonTooltip.group.teamWithUserName",defaultMessage:"The {targetGroupName} group has access from the {teamspaceName} teamspace",values:{targetGroupName:b,teamspaceName:y}}):I;case"explicit_team_guest_permission":return b&&y?(0,h.jsx)(r().sA,{id:"searchTargetPermissionItem.accessReasonTooltip.guest.teamWithUserName",defaultMessage:"{targetUserName} has access as a guest of the {teamspaceName} teamspace",values:{targetUserName:b,teamspaceName:y}}):I;case"group_permission":return b&&x?(0,h.jsx)(r().sA,{id:"searchTargetPermissionItem.accessReasonTooltip.groupWithUserName",defaultMessage:"{targetUserName} has access as a member of the {groupName} group",values:{targetUserName:b,groupName:x}}):I;case"user_permission":case"exclusive_user_permission":return b?(0,h.jsx)(r().sA,{id:"searchTargetPermissionItem.accessReasonTooltip.userWithUserName",defaultMessage:"{targetUserName} has access to this page",values:{targetUserName:b}}):void 0;case"bot_permission":case"deleted_permission":case"public_permission":case"restricted_permission":case"trusted_domain_permission":return;default:return void(0,a().ub)(s)}}},818787:(e,s,i)=>{i.d(s,{BA:()=>u,QT:()=>c,jN:()=>m,mZ:()=>d});i(581454);var t=i(296540),n=()=>i(401497),o=()=>i(493823),r=()=>i(802790),a=()=>i(838156),l=i(474848);const m=15,d=8,c=20;function u(e){const s=(0,n().IS)((()=>({button:{height:"auto",paddingLeft:0,paddingRight:0,display:"flex"},title:{marginBottom:10}})),[]);return Boolean(e.onClick)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a().a,{title:e.title,style:s.title}),(0,l.jsx)(o().p,{onClick:e.onClick,style:s.button,children:(0,l.jsx)(p,{...e})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a().a,{title:e.title,style:s.title}),(0,l.jsx)(p,{...e})]})}function p(e){let{title:s,rows:i,hideDividers:o=!1,itemStyle:a,onClick:c}=e;const u=(0,n().IS)((e=>({container:{border:`1px solid ${e.regularDividerColor}`,borderRadius:4,width:"100%"},list:{listStyle:"none",padding:0,margin:0},listItem:{marginLeft:m,marginRight:m,paddingTop:d,paddingBottom:d,...a},divider:{marginLeft:m,marginRight:m,borderColor:`${e.regularDividerColor}`}})),[a]);return(0,l.jsx)("div",{style:{...u.container},children:(0,l.jsx)("ul",{style:u.list,children:i.map(((e,s)=>(0,l.jsxs)(t.Fragment,{children:[!o&&s>0&&(0,l.jsx)(r().A,{size:1,innerStyle:u.divider}),(0,l.jsx)("li",{style:u.listItem,children:e},s)]},s)))})})}},838156:(e,s,i)=>{i.d(s,{a:()=>r});i(296540);var t=()=>i(401497),n=()=>i(284371),o=i(474848);function r(e){let{title:s,subtitle:i,style:r}=e;const a=(0,t().IS)((e=>({base:{width:"100%"},title:{fontWeight:n().Wy.medium,color:e.regularTextColor,fontSize:14},subtitle:{fontWeight:n().Wy.regular,color:e.mediumTextColor,fontSize:12}})),[]);return(0,o.jsxs)("div",{style:{...a.base,...r},children:[(0,o.jsx)("div",{style:a.title,children:s}),i&&(0,o.jsx)("div",{style:a.subtitle,children:i})]})}},851727:(e,s,i)=>{i.d(s,{A:()=>D});var t=i(296540),n=()=>i(484714),o=()=>i(56366),r=()=>i(401497),a=()=>i(657222),l=()=>i(449552),m=()=>i(68263),d=()=>i(959013),c=()=>i(534177),u=()=>i(747788),p=()=>i(760217),g=()=>i(946548),h=i(474848);function b(e){const{permissionItem:s,onToggle:i,focused:t}=e,a=(0,d().tz)(),{isMobile:l}=(0,n().Y0)(),m=(0,o().K8)((()=>!!s&&!Boolean(s.unlisted_timestamp)),[s]),c=(0,r().IS)((e=>({visibilityToggle:{display:"flex",alignItems:"start",justifyContent:"space-between",marginLeft:12,paddingLeft:4},buttonMenuItemStyleMobile:{backgroundColor:e.surface.elevated,paddingTop:12,paddingBottom:12,marginRight:12,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.stroke.secondary,width:"100%"}})),[]),u=a.formatMessage({id:"spacePermissionItem.visibilityPicker.unlistedToggle",defaultMessage:"Hide in search"});return(0,h.jsx)("div",{children:(0,h.jsx)(p().A,{onClick:i,focused:t,style:l?c.buttonMenuItemStyleMobile:{},title:u,shouldWrapTitle:!0,right:(0,h.jsx)("div",{style:l?{}:c.visibilityToggle,children:(0,h.jsx)(g().A,{disabled:!1,on:!m,onClick:i})})})})}var f=()=>i(38337),v=()=>i(437622),x=()=>i(351360),y=()=>i(847554),I=()=>i(749240),S=()=>i(484578),P=()=>i(663590),j=()=>i(928074),A=()=>i(529864),C=()=>i(87043),M=()=>i(99756),w=()=>i(143106);function k(e){let{visibility:s,spaceStore:i}=e;const t=(0,n().v3)(),r=(0,o().K8)((()=>(0,v().GK)(t,i)),[t,i]),a=(0,o().K8)((()=>(0,P().FI)()),[]),l=(0,o().K8)((()=>(0,P().sh)()),[]);switch(s){case"private":return(0,h.jsx)(d().sA,{id:"spacePermissionVisibilityPicker.private",defaultMessage:"Only people invited"});case"unlisted":return l?(0,h.jsx)(d().sA,{id:"blockPermissionsSettings.permissionItem.workspaceAccessNew.unlisted",defaultMessage:"Everyone at {spaceName} with the link",values:{spaceName:r}}):a?(0,h.jsx)(d().sA,{id:"linkSharingPill.visibilityTitle.anyoneWithLinkV2",defaultMessage:"Anyone at {spaceName} with the link",values:{spaceName:r}}):(0,h.jsx)(d().sA,{id:"linkSharingPill.visibilityTitle.anyoneWithLink",defaultMessage:"Anyone with link at {spaceName}",values:{spaceName:r}});case"open":case"open_unlisted_hybrid":return(0,h.jsx)(d().sA,{defaultMessage:"Everyone at {workspaceName}",id:"blockPermissionsSettings.permissionItem.workspaceAccessNew",values:{workspaceName:r}});default:(0,c().HB)(s)}}const _=new(i(178624).R)({key:"shareMenuRoleSelectCalloutCount",namespace:i(419494).Bq,important:!0,trackingType:"necessary"});function T(e){let{visibility:s,spaceStore:i,isRedesignEnabled:t,isSearchableToggleEnabled:n,isMobile:o}=e;const m=(0,r().IS)((e=>({lockIcon:{width:o&&t?24:18,height:o&&t?24:18},linkIcon:{width:17,height:17,...t?void 0:{fill:e.mediumIconColor}},linkIconContainer:{backgroundColor:e.lightDividerColor,borderRadius:32}})),[o,t]);return"private"===s?t?(0,h.jsx)(M().A,{type:"square",iconType:"function",iconFn:l().g,iconStyle:m.lockIcon,isMobile:o}):(0,h.jsx)(w().A,{store:i}):"unlisted"===s?n?(0,h.jsx)(w().A,{store:i}):t?(0,h.jsx)(M().A,{type:"square",iconType:"function",iconFn:a().w,iconStyle:m.linkIcon,isMobile:o}):(0,a().w)(m.linkIcon):"open"===s||"open_unlisted_hybrid"===s?(0,h.jsx)(w().A,{store:i}):void(0,c().HB)(s)}function R(e){let{store:s,spacePermission:i,showTrustedDomainPermission:t,trustedDomainPermission:r,publicPermission:a,showPublicShareLinkPermission:l,isRestricted:m,permissionItemArgs:c,fromPermissionWrapper:u,buttonPopupStore:p,visibility:g,isRedesignEnabled:b,spaceStore:f,hideHoverStyles:x,isDisplayOnly:y,handleSpacePermissionChange:I}=e;const S=(0,n().v3)(),P=(0,o().K8)((()=>(0,v().GK)(S,f)),[S,f]);return b?(0,h.jsx)(A().o,{store:s,spacePermission:i,showTrustedDomainPermission:t,trustedDomainPermission:r,publicPermission:a,showPublicShareLinkPermission:l,isRestricted:m,permissionItemArgs:c,fromPermissionWrapper:u,buttonPopupStore:p,hideHoverStyles:x,isDisplayOnly:y,handleSpacePermissionChange:I,title:(0,h.jsx)(k,{visibility:g,spaceStore:f})}):"unlisted"===g?(0,h.jsx)(d().sA,{defaultMessage:"Members with the link",id:"blockPermissionsSettings.permissionItem.linkAccess"}):(0,h.jsx)(d().sA,{defaultMessage:"Everyone at {workspaceName}",id:"blockPermissionsSettings.permissionItem.workspaceAccessNew",values:{workspaceName:P}})}function N(){const e=(0,o().O$)(I().subscriptionDataStoreInstance),s=(0,y().b)(e);return(0,h.jsx)(d().sA,{defaultMessage:"{numberOfWorkspaceMembers, plural, one {{numberOfWorkspaceMembers} person} other {{numberOfWorkspaceMembers} people}}",id:"blockPermissionsSettings.spacePermission.none",values:{numberOfWorkspaceMembers:s}})}const D=function(e){let{showTrustedDomainPermission:s,trustedDomainPermission:a,isRestricted:l,publicPermission:c,showPublicShareLinkPermission:p,...g}=e;const{store:y,spacePermission:I,fromPermissionWrapper:A}=g,M=(0,n().v3)(),w=M.device.isMobile,k=(0,o().K8)((()=>(0,P().FI)()),[]),D=(0,o().K8)((()=>(0,P().sh)()),[]),L=(0,i(963589).X)("share_menu_role_select_callout"),B=(0,o().uB)(void 0,i(463830).A),W=m().Ni(I.permissionItem)&&"none"!==I.permissionItem.role,E=(0,S().QX)(I),K=(0,m().Tt)((null==a?void 0:a.permissionItem.role)??"none"),O=(0,m().Tt)((null==c?void 0:c.permissionItem.role)??"none"),U=(0,o().K8)((()=>x().default.state.currentSpaceStore),[]),V=(0,o().K8)((()=>{const e=x().default.state.currentSpaceStore;return null==e||!e.isDefined()}),[]),F=(0,o().K8)((()=>{const e=x().default.state.currentSpaceStore;return!!e&&(0,v().IL)(e)}),[]),z=(0,o().K8)((()=>(0,j().WG)()),[]),G=(0,o().K8)((()=>!!U&&y.isTopLevelWorkspacePage(U.id)),[y,U]),H=(0,o().K8)((()=>{const e=(0,j().QJ)({store:y});return e?(0,i(920410).W)(e):"private"}),[y]),Y=!z&&s&&K&&!O,q=(0,t.useCallback)((e=>{"none"===e&&K&&a&&(0,i(861481).p)({trustedDomainPermission:a,store:y,environment:M,sudoModeStore:g.permissionItemArgs.sudoModeStore,location:g.permissionItemArgs.location})}),[M,K,g.permissionItemArgs.location,g.permissionItemArgs.sudoModeStore,y,a]),$=(0,o().K8)((()=>_.getState()??0),[]),[Q,X]=(0,t.useState)(!1),Z=(0,t.useCallback)((e=>{let{before:s,after:i}=e;if(!k||!D||!L)return;let t=!1;const n=(0,S().QX)(s),o=(0,S().QX)(i);"private"===n&&"private"!==o&&$<3&&(t=!0,_.setState($+1)),X(t)}),[$,k,D,L]),J=(0,t.useCallback)((()=>{k&&B.setState({open:!0})}),[k,B]),ee=(0,t.useCallback)((async()=>{const e=I.permissionItem,s=(0,i(496603).mg)(e);let t;"unlisted"===("open"===E?"unlisted":"open")?(s.unlisted_timestamp=Date.now(),t="open"===H):(delete s.unlisted_timestamp,t=!1);const n=I.from,o=(0,m().Yi)(n),r=!(n.table===y.table&&o===y.id);t=t&&!G&&!l,await(0,i(976721).Hc)({oldPermissionItem:e,newPermissionItem:s,wasInherited:r,environment:M,store:y,restrictingVisibility:t,sudoModeStore:g.permissionItemArgs.sudoModeStore,location:g.permissionItemArgs.location})}),[M,I,G,g.permissionItemArgs,E,y,l,H]),se=(0,r().IS)((e=>({container:{width:"100%"},lockIcon:{width:18,height:18},linkIcon:{width:17,height:17,...k?void 0:{fill:e.mediumIconColor}},preRedesignLinkIconContainer:{backgroundColor:e.lightDividerColor,borderRadius:32}})),[k]),ie=(0,t.useMemo)((()=>D?[{role:"none",prefixItem:{key:"can-find-in-search-toggle",render:e=>(0,h.jsx)(i(859428).A,{placement:i(962730).W.Left,renderTooltip:()=>(0,h.jsx)("div",{style:{width:250,whiteSpace:"normal"},children:(0,h.jsx)(d().sA,{defaultMessage:"Hide this page in search results from users without the link or who haven’t visited it before",id:"spacePermissionItem.unlistedToggle.tooltip"})}),render:s=>(0,h.jsx)("div",{...e,...s,children:(0,h.jsx)(b,{permissionItem:I.permissionItem,onToggle:ee,focused:e.focused})})}),action:()=>{}}}]:[]),[I,ee,D]),te="private"===E&&k;return U?V?F&&k?(0,h.jsx)("div",{style:se.container,className:W?void 0:f().VRj,children:(0,h.jsx)(C().Ay,{store:y,permissionItem:I.permissionItem,from:I.from,icon:(0,h.jsx)(T,{visibility:E,spaceStore:U,isRedesignEnabled:k,isSearchableToggleEnabled:D,isMobile:M.device.isMobile}),iconStyle:k||"unlisted"!==E?void 0:se.preRedesignLinkIconContainer,title:(0,h.jsx)(R,{store:y,spaceStore:U,spacePermission:I,showTrustedDomainPermission:s,trustedDomainPermission:a,publicPermission:c,showPublicShareLinkPermission:p,isRestricted:!0,permissionItemArgs:g.permissionItemArgs,fromPermissionWrapper:A,buttonPopupStore:B,visibility:E,isRedesignEnabled:k,hideHoverStyles:te,isDisplayOnly:!0,handleSpacePermissionChange:Z}),subtitle:w&&!te?(0,h.jsx)(d().sA,{...(0,u().R)({type:"space_permission",role:I.permissionItem.role,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:k}).label}):void 0,upgradeButtonName:"space_permission_item",fromPermissionWrapper:A,isRemovableOverride:!0,hideRoleSelectButton:te,renderTitleWithoutUILabelWrapper:k,...g.permissionItemArgs,shouldDisable:!0})}):null:(0,h.jsxs)("div",{style:se.container,className:W?void 0:f().VRj,children:[(0,h.jsx)(C().Ay,{store:y,permissionItem:I.permissionItem,from:I.from,icon:(0,h.jsx)(T,{visibility:E,spaceStore:U,isRedesignEnabled:k,isSearchableToggleEnabled:D,isMobile:M.device.isMobile}),iconStyle:k||"unlisted"!==E?void 0:se.preRedesignLinkIconContainer,title:(0,h.jsx)(R,{store:y,spaceStore:U,spacePermission:I,showTrustedDomainPermission:s,trustedDomainPermission:a,publicPermission:c,showPublicShareLinkPermission:p,isRestricted:l,permissionItemArgs:g.permissionItemArgs,fromPermissionWrapper:A,buttonPopupStore:B,visibility:E,isRedesignEnabled:k,hideHoverStyles:te,isDisplayOnly:g.permissionItemArgs.shouldDisable??!1,handleSpacePermissionChange:Z}),selectHeader:k&&w?(0,h.jsx)(i(678553).A,{title:(0,h.jsx)(R,{store:y,spaceStore:U,spacePermission:I,showTrustedDomainPermission:s,trustedDomainPermission:a,publicPermission:c,showPublicShareLinkPermission:p,isRestricted:l,permissionItemArgs:g.permissionItemArgs,fromPermissionWrapper:A,buttonPopupStore:B,visibility:E,isRedesignEnabled:k,hideHoverStyles:te,isDisplayOnly:!0,handleSpacePermissionChange:Z}),icon:(0,h.jsx)(T,{visibility:E,spaceStore:U,isRedesignEnabled:k,isSearchableToggleEnabled:D,isMobile:M.device.isMobile}),desktopIconStyle:{marginLeft:16}}):void 0,onClick:k?J:void 0,nonInheritedTooltip:k||"open"!==E||w?void 0:(0,h.jsx)(d().sA,{defaultMessage:"Applies to all members in your workspace.",id:"blockPermissionsSettings.spacePermission.tooltip"}),subtitle:k||"unlisted"===E?k&&w&&!te?(0,h.jsx)(d().sA,{...(0,u().R)({type:"space_permission",role:I.permissionItem.role,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:k}).label}):void 0:(0,h.jsx)(N,{}),upgradeButtonName:"space_permission_item",fromPermissionWrapper:A,onChangeSuccess:q,isRemovableOverride:!0,hideRoleSelectButton:te,renderTitleWithoutUILabelWrapper:k,roleItemOverrides:ie,openRoleSelectMenuOnRender:Q,...g.permissionItemArgs}),Y&&(0,h.jsx)(i(931429).A,{store:y,trustedDomainPermission:a,permissionItemArgs:g.permissionItemArgs,fromPermissionWrapper:A,renderStyle:"permissionItem"})]}):null}},861481:(e,s,i)=>{i.d(s,{p:()=>r,T:()=>a});var t=()=>i(484578),n=()=>i(928074);var o=()=>i(976721);async function r(e){let{trustedDomainPermission:s,store:i,environment:t,sudoModeStore:r,location:a}=e;const l=i.isRestricted(),m=(0,n().$d)({permissionItem:s,store:i})&&!l,d=m&&"none"!==s.permissionItem.role&&!l;return await(0,o().o5)({oldPermissionItem:s.permissionItem,newRole:"none",wasInherited:m,environment:t,store:i,sudoModeStore:r,location:a,restrictingVisibility:d})}async function a(e){let{trustedDomainPermission:s,store:i,environment:n,sudoModeStore:r,location:a,fromPermissionWrapper:l}=e;const m="reader",d=(0,t().ek)({permissionItem:s,store:i}),c=s.permissionItem.role===m?"none":m;return await(0,o().o5)({oldPermissionItem:s.permissionItem,newRole:c,wasInherited:d,environment:n,store:i,sudoModeStore:r,location:a,fromPermissionWrapper:l})}},891368:(e,s,i)=>{i.d(s,{Ay:()=>g,G0:()=>c,jV:()=>p,nc:()=>u});i(296540);var t=()=>i(484714),n=()=>i(56366),o=()=>i(401497),r=()=>i(959013),a=()=>i(284371),l=()=>i(125565),m=()=>i(663590),d=i(474848);function c(){return(0,d.jsx)(p,{children:(0,d.jsx)(r().sA,{id:"blockPermissionsSettings.permissionsList.moreAttribution",defaultMessage:"More people with access"})})}function u(){return(0,d.jsx)(p,{children:(0,d.jsx)(r().sA,{id:"blockPermissionsSettings.permissionsList.generalAccessAttribution",defaultMessage:"General access"})})}function p(e){const{children:s}=e,{WindowSizeStore:i}=(0,t().v3)(),{isMobile:r}=(0,t().Y0)(),c=(0,n().K8)((()=>(0,m().FI)()),[]),{paddingLeft:u,paddingRight:p}=(0,n().K8)((()=>{const e=c?r?0:8:14;return{paddingLeft:i.getSafePaddingLeftCSS(e),paddingRight:i.getSafePaddingRightCSS(e)}}),[i,r,c]),g=(0,o().IS)((e=>({label:{color:e.mediumTextColor,fontWeight:a().Wy.medium,paddingLeft:u,paddingRight:p,paddingTop:c?0:8,paddingBottom:c?4:6,overflow:"visible",textWrap:"wrap",...c&&r?{fontSize:15,paddingTop:0,color:e.text.secondary}:{}}})),[r,c,u,p]);return(0,d.jsx)(l().A,{isSmall:!0,style:g.label,children:s})}const g=function(e){const{store:s}=e,{parentStore:t,canAccessParent:o}=(0,n().K8)((()=>(0,i(928074).iG)({store:s})),[s]);return o?(0,d.jsx)(p,{children:(0,d.jsx)(r().sA,{id:"blockPermissionsSettings.permissionsList.attribution",defaultMessage:"From {attribution}",values:{attribution:(0,d.jsx)(i(485952).i,{navigableParentStore:t})}})}):(0,d.jsx)(p,{children:(0,d.jsx)(r().sA,{id:"blockPermissionsSettings.permissionsList.genericHeader",defaultMessage:"People with access"})})}},913348:(e,s,i)=>{i.d(s,{A:()=>A});i(898992),i(672577),i(581454);var t=i(296540),n=()=>i(484714),o=()=>i(56366),r=()=>i(401497),a=()=>i(148307),l=()=>i(187174),m=()=>i(959013),d=()=>i(284371),c=()=>i(449506),u=()=>i(453697),p=()=>i(820635),g=()=>i(103448),h=()=>i(698449),b=()=>i(351360),f=()=>i(663590),v=()=>i(87043),x=()=>i(946928),y=i(474848);function I(e){const{group:s,store:i,groupPermission:t}=e,a=(0,n().v3)(),m=(0,o().K8)((()=>b().default.state.currentSpaceStore),[]),[{value:d}]=(0,l().Yb)((async()=>{const e=await c().callApi({eventName:"getSpacePermissionGroupMembers",environment:a,data:{groupIds:[s.group_id],spaceId:s.space_id}});if("success"===e.type){var i;const t=null===(i=e.data.groupUsersMap[s.group_id])||void 0===i?void 0:i.userIds,{limitedUserStores:n}=(0,h().gA)({userIds:t,limit:void 0,spaceStore:m});return n}}),[m,a,s.group_id,s.space_id]),u=(0,r().IS)((e=>({container:{paddingLeft:16}})),[]);return(0,y.jsx)("div",{style:u.container,children:null==d?void 0:d.map((e=>(0,y.jsx)("div",{children:(0,y.jsx)(S,{userStore:e,store:i,groupPermission:t})},e.id)))})}function S(e){const{userStore:s,store:i,groupPermission:t}=e,r=(0,n().v3)(),{isMobile:a}=r.device,l=(0,m().tz)(),d=(0,o().K8)((()=>(0,f().FI)()),[]),c=(0,o().K8)((()=>s.getDisplayName(l)),[l,s]),p=(0,o().K8)((()=>s.getEmail()),[s]);return(0,y.jsx)(v().Ay,{store:i,permissionItem:{type:"display_only_group_member_permission"},from:t.from,icon:(0,y.jsx)(u().A,{userStore:s,avatarShouldShowShadow:!1,size:a&&d?v().Bj:v().Ev,hasTooltip:!1}),title:c||p,subtitle:p,upgradeButtonName:"permission_groups"})}function P(e){const{group:s}=e,i=(0,m().tz)(),t=(0,h().Pf)({intl:i,groupName:s.name});return(0,y.jsx)(m().sA,{defaultMessage:"People in {groupName} have access to the page",values:{groupName:t},id:"blockPermissionsSettings.groupPermission.tooltipV2"})}function j(e){const{group:s}=e,i=(0,m().tz)(),t=(0,h().Pf)({intl:i,groupName:s.name});return(0,y.jsx)(p().Q,{group:s,limit:15,noMembersMessage:(0,y.jsx)(g().A,{imageURL:a().A.images.tooltips.share.sharedPng,imageWidth:240,imageHeight:120,caption:(0,y.jsx)(m().sA,{defaultMessage:"For all members of the {groupName} group, this page will show up in the <boldtext>Shared</boldtext> section in their sidebar.",values:{boldtext:e=>(0,y.jsx)("span",{style:{fontWeight:d().Wy.bold},children:e}),groupName:t},id:"blockPermissionsSettings.groupPermission.tooltip"})})})}const A=function(e){const{store:s,groupPermission:a,spaceId:l,fromPermissionWrapper:d,disableExpansion:c}=e,{isMobile:u}=(0,n().Y0)(),p=(0,m().tz)(),[g,S]=(0,t.useState)(!1),[A,C]=(0,t.useState)(!1),M=(0,o().K8)((()=>(0,f().FI)()),[]),{group:w,memberCount:k}=(0,o().K8)((()=>{const{currentSpaceStore:e}=b().default.state;if(!e)return{};return{...i(605402).A.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===a.permissionItem.group_id))}}),[a.permissionItem.group_id]),_=(0,o().K8)((()=>!c&&(!(!w||!k||0===k)&&M)),[c,w,M,k]),T=(0,t.useCallback)((()=>S(!0)),[]),R=(0,t.useCallback)((()=>S(!1)),[]),N=(0,t.useCallback)((()=>{_&&C(!A)}),[A,_]),D=(0,r().IS)((e=>({mobileChevronIcon:{marginLeft:4,fill:e.icon.secondary,transform:`rotate(${A?90:0}deg)`,transition:"transform 150ms ease"},mobileTitleContainer:{display:"flex",alignItems:"center"}})),[A]);if(!w)return null;const L=(0,h().Pf)({intl:p,groupName:w.name}),B=w.icon&&!M&&(0,y.jsx)(i(614505).A,{disabled:!0,title:L,icon:w.icon?{pointer:{table:"space",id:l},icon:w.icon}:void 0,isEmptyPage:!1,size:18}),W=_?(0,y.jsx)(i(180925).A,{expanded:A,hovered:g,onClick:N,children:(0,y.jsx)(x().A,{groupIcon:w.icon,isRedesignEnabled:M,spaceId:l})}):(0,y.jsx)(x().A,{groupIcon:w.icon,isRedesignEnabled:M,spaceId:l});return(0,y.jsxs)("div",{style:{fontWeight:400},className:i(38337).HlM,children:[(0,y.jsx)(v().Ay,{onMouseEnter:T,onMouseLeave:R,onClick:_?N:void 0,isCollapsible:_,store:s,permissionItem:a.permissionItem,from:a.from,icon:W,title:(0,y.jsxs)("div",{style:D.mobileTitleContainer,children:[L,_&&u&&(0,y.jsx)("div",{style:D.mobileChevronIcon,children:(0,i(742117).V)({height:12,width:12})})]}),tag:B,ignoreLocalHoverState:e.ignoreLocalHoverState,showInherited:e.showInherited,nonInheritedTooltip:e.tooltip?e.tooltip:M?(0,y.jsx)(P,{group:w}):(0,y.jsx)(j,{group:w}),subtitle:M&&u?(0,y.jsxs)("div",{children:[(0,y.jsx)(m().sA,{defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} person} other {{numberOfGroupMembers} people}}",id:"blockPermissionsSettings.groupPermission.none",values:{numberOfGroupMembers:k}})," · ",(0,y.jsx)(m().sA,{...(0,i(747788).R)({type:"group_permission",role:a.permissionItem.role,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:M}).label})]}):(0,y.jsxs)("div",{children:[(0,y.jsx)(m().sA,{defaultMessage:"Group",id:"blockPermissionsSettings.groupPermission.label"})," · ",(0,y.jsx)(m().sA,{defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} person} other {{numberOfGroupMembers} people}}",id:"blockPermissionsSettings.groupPermission.none",values:{numberOfGroupMembers:k}})]}),upgradeButtonName:"group_permission_item",isRemovableOverride:e.isRemovableOverride,fromPermissionWrapper:d,roleItemOverrides:e.roleItemOverrides,menuListItemProps:e.menuListItemProps,style:e.style,...e.permissionItemArgs}),A&&(0,y.jsx)(I,{group:w,store:s,groupPermission:a})]},w.id)}},920410:(e,s,i)=>{function t(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"none"===e.role?"private":s?"open_unlisted_hybrid":e.unlisted_timestamp?"unlisted":"open"}i.d(s,{W:()=>t})},931429:(e,s,i)=>{i.d(s,{A:()=>b});var t=i(296540),n=()=>i(484714),o=()=>i(56366),r=i(474848);const a=(0,i(340498).wt)("peopleSquare",{viewBox:"0 0 14 18",svg:(0,r.jsx)("g",{children:(0,r.jsx)("path",{d:"M3.151 17.172c-.738 0-1.296-.19-1.674-.567-.379-.374-.568-.926-.568-1.655V7.212c0-.734.19-1.288.568-1.661.378-.374.936-.56 1.674-.56h7.698c.733 0 1.29.186 1.668.56.382.373.574.927.574 1.66v7.74c0 .724-.182 1.275-.547 1.654-.365.378-.873.567-1.524.567H3.15zm.082-1.347h7.698a.756.756 0 00.58-.253c.156-.164.233-.412.233-.745V7.321c0-.328-.086-.574-.26-.738-.168-.169-.41-.253-.724-.253H3.233c-.319 0-.562.084-.731.253-.164.164-.246.41-.246.738v7.506c0 .333.082.581.246.745.169.169.412.253.731.253zM2.42 3.91c.045-.328.157-.58.335-.759.182-.177.456-.266.82-.266h6.795c.365 0 .636.089.814.266.182.178.298.431.348.76H2.42zm1.176-1.99c.018-.309.118-.544.3-.703.183-.16.438-.24.766-.24h4.621c.333 0 .588.08.766.24.182.16.285.394.307.704h-6.76zm2.85 14.103a.392.392 0 01-.328-.177c-.086-.114-.13-.283-.13-.506 0-.274.073-.554.219-.841.146-.287.356-.554.629-.8.278-.246.61-.444.998-.595a3.561 3.561 0 011.32-.232c.615 0 1.15.119 1.606.355.456.237.813.531 1.073.882.26.356.408.711.444 1.067a.98.98 0 01-.088.41.668.668 0 01-.301.314c-.142.082-.338.123-.588.123H6.446zm2.707-3.937c-.273 0-.524-.073-.752-.219a1.735 1.735 0 01-.553-.595 1.727 1.727 0 01-.205-.84c0-.306.068-.581.205-.828.136-.246.319-.44.547-.58a1.4 1.4 0 01.758-.22c.27 0 .518.071.745.213.228.14.41.335.547.58.142.242.212.518.212.828 0 .31-.068.59-.205.84a1.655 1.655 0 01-.547.602 1.367 1.367 0 01-.752.219zm-4.327.772c.274 0 .527.03.759.09.232.054.44.136.622.245a3.209 3.209 0 00-.759.985 2.647 2.647 0 00-.266 1.148c0 .255.047.488.143.697H2.898c-.319 0-.544-.086-.676-.26a1.054 1.054 0 01-.192-.642c.01-.355.132-.706.37-1.053.236-.346.562-.633.977-.861.42-.232.902-.349 1.45-.349zm0-.683c-.355 0-.663-.14-.923-.417a1.47 1.47 0 01-.39-1.032 1.353 1.353 0 01.39-1.005c.265-.274.572-.41.923-.41.356 0 .663.136.923.41.26.269.39.601.39.998 0 .41-.13.756-.39 1.039-.26.278-.567.417-.923.417z"})})});var l=()=>i(959013),m=()=>i(125565),d=()=>i(753199),c=()=>i(805025),u=()=>i(99756);function p(e){let{store:s,trustedDomainPermission:m,fromPermissionWrapper:p,permissionItemArgs:b,renderStyle:f,menuListItemProps:v,selectTrustedDomainHandler:x}=e;const y=(0,n().v3)(),I=y.device.isMobile,{isPhone:S,isTablet:P}=(0,n().Y0)(),j=(0,i(653953).X)(),A=(0,o().K8)((()=>(0,i(663590).FI)()),[]),C=(0,o().K8)((()=>i(351360).default.state.currentSpaceStore),[]),M=(0,i(726360).H)(),{workspaceTrustedDomain:w,numberOfTrustedDomains:k}=(0,o().K8)((()=>{if(M){var e;const s=(null===(e=M.getForSpace(C))||void 0===e?void 0:e.enabledTrustedEmailDomains)??[];return{workspaceTrustedDomain:s.length>0?s[0]:"",numberOfTrustedDomains:s.length}}return{workspaceTrustedDomain:"",numberOfTrustedDomains:0}}),[C,M]),_=(0,t.useCallback)((async e=>{await(0,d().s7)({event:e,context:d().y$.ToggleTrustedDomainPermission,callback:async()=>{await(0,i(861481).T)({trustedDomainPermission:m,store:s,environment:y,sudoModeStore:b.sudoModeStore,location:b.location,fromPermissionWrapper:p})}})}),[m,s,y,b,p]),T=(0,i(401497).IS)((e=>({container:S?{background:e.popoverBackground}:{},icon:{width:24,height:24,...!A&&{fill:e.mediumIconColor}},iconContainer:A?{}:{backgroundColor:e.lightDividerColor,borderRadius:32},menuItemContainer:{...!S&&{paddingTop:c().Lh,paddingBottom:c().Lh}},menuIcon:{height:16,width:16,fill:e.icon.secondary},menuIconContainer:{marginLeft:I?13:A?6:9,...A?{marginRight:6}:{alignSelf:"center"}},menuItemToggleStyle:{marginTop:4,marginRight:S||P?10:6,alignSelf:"baseline"},menuItemText:{lineHeight:"unset",...S&&{paddingTop:c().T3,paddingBottom:c().T3},color:e.text.primary}})),[I,S,A,P]),R=(0,r.jsx)(g,{workspaceTrustedDomain:w,numberOfTrustedDomains:k,renderStyle:f,spaceName:j}),N=(0,r.jsx)(h,{workspaceTrustedDomain:w,numberOfTrustedDomains:k});return"permissionSelectOption"===f?(0,r.jsx)("div",{style:T.container,children:(0,r.jsx)(i(760217).A,{...v,title:R,caption:N,buttonStyle:T.menuItemContainer,shouldWrapTitle:!0,shouldWrapCaption:!0,style:T.menuItemText,icon:a({...T.menuIcon}),desktopIconStyle:T.menuIconContainer,onClick:async e=>{await(async e=>{"permissionSelectOption"===f&&await _(e)})(e)},badge:(0,r.jsx)(i(13898).A,{})})}):(0,r.jsx)(i(87043).Ay,{upgradeButtonName:"trusted_domain_item",store:s,permissionItem:m.permissionItem,from:m.from,icon:A?(0,r.jsx)(u().A,{type:"square",iconType:"function",iconFn:a,iconStyle:T.icon,isMobile:I}):a(T.icon),iconStyle:T.iconContainer,title:R,selectHeader:A&&I?(0,r.jsx)(i(678553).A,{title:R,icon:(0,r.jsx)(u().A,{type:"square",iconType:"function",iconFn:i(973633).P,iconStyle:T.icon,isMobile:I}),desktopIconStyle:{marginLeft:16}}):void 0,nonInheritedTooltip:void 0,subtitle:I&&A?(0,r.jsx)(l().sA,{...(0,i(747788).R)({type:"trusted_domain_permission",role:m.permissionItem.role,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:A}).label}):void 0,fromPermissionWrapper:p,isRemovableOverride:!0,...b})}function g(e){let{workspaceTrustedDomain:s,numberOfTrustedDomains:i,renderStyle:t,spaceName:n}=e;return"permissionItem"===t?s&&1===i?(0,r.jsx)(l().sA,{id:"trustedDomainItem.titleWithSpecificDomain.label",defaultMessage:"People with a {workspaceTrustedDomain} email address",values:{workspaceTrustedDomain:s}}):(0,r.jsx)(l().sA,{id:"trustedDomainItem.titleWhenNoSpecificDomain",defaultMessage:"People with a trusted email address",values:{workspaceTrustedDomain:s}}):s&&1===i?(0,r.jsx)(l().sA,{id:"trustedDomainItem.titleWithSpecificDomain.mobileLabel",defaultMessage:"Everyone with a {workspaceTrustedDomain} email address",values:{spaceName:n,workspaceTrustedDomain:s}}):(0,r.jsx)(l().sA,{id:"trustedDomainItem.titleWithSpecificDomain",defaultMessage:"Everyone with a trusted email address",values:{spaceName:n}})}function h(e){let{workspaceTrustedDomain:s,numberOfTrustedDomains:i}=e;return s&&1===i?(0,r.jsx)(m().A,{isSmall:!0,isMultiline:!0,style:{whiteSpace:"normal"},children:(0,r.jsx)(l().sA,{id:"trustedDomainItem.captionWithSpecificDomain.label",defaultMessage:"Workspace members and people with a {workspaceTrustedDomain} email address can access",values:{workspaceTrustedDomain:s}})}):(0,r.jsx)(m().A,{isSmall:!0,isMultiline:!0,style:{whiteSpace:"normal"},children:(0,r.jsx)(l().sA,{id:"trustedDomainItem.captionWhenNoSpecificDomain",defaultMessage:"Workspace members and People with a trusted email address can access",values:{workspaceTrustedDomain:s}})})}const b=t.memo(p)},932267:(e,s,i)=>{i.d(s,{u:()=>n});var t=()=>i(496603);function n(e,s){const i=(0,t().o8)(e);i.role=s;const{is_site:n}=i;return"none"===s?n?{...i,role:"reader",is_public_share_link:!1}:{...i,is_public_share_link:!1}:{...i,is_public_share_link:!0}}},946928:(e,s,i)=>{i.d(s,{A:()=>l});var t=i(296540),n=()=>i(87043),o=()=>i(99756),r=i(474848);function a(e){let{groupIcon:s,isRedesignEnabled:t,spaceId:a}=e;const{isMobile:l}=(0,i(484714).Y0)(),m=(0,i(401497).IS)((e=>({icon:{fill:e.icon.secondary}})),[]);return s&&t&&a?(0,r.jsx)(o().A,{type:"circle",iconType:"recordIcon",icon:{icon:s,pointer:{table:i(96689).NX,id:a}},isMobile:l}):t?(0,r.jsx)(o().A,{type:"circle",iconType:"function",iconFn:i(658985).$,iconStyle:m.icon,isMobile:l}):(0,r.jsx)(i(173783).A,{size:l&&t?n().Bj:n().Ev})}const l=t.memo(a)},955307:(e,s,i)=>{i.d(s,{A:()=>ie});var t=i(296540),n=()=>i(484714),o=()=>i(56366),r=()=>i(878377),a=()=>i(663590),l=()=>i(928074),m=()=>i(401497),d=()=>i(584262),c=()=>i(433847),u=()=>i(959013),p=()=>i(946141),g=()=>i(296798),h=()=>i(614505),b=()=>i(16006),f=()=>i(946548),v=()=>i(125565),x=()=>i(492414),y=()=>i(108944),I=()=>i(632709),S=()=>i(630116),P=()=>i(848237),j=()=>i(976721),A=()=>i(26934),C=()=>i(623275),M=()=>i(437487),w=i(474848);function k(e){const{store:s,sudoModeStore:i}=e,a=(0,n().v3)(),{isMobile:l}=(0,n().Y0)(),d=(0,o().K8)((()=>function(e){const{store:s,environment:i}=e;return r().Uo6([r().Km9,r().AU6(r().oy3)])({environment:i,blocks:[s],publicEditMode:void 0})}({store:s,environment:a})),[s,a]),u=(0,o().K8)((()=>s.isRestricted()),[s]),p=(0,o().K8)((()=>y().fU(s)[1]),[s]),g=(0,o().K8)((()=>(0,c().wD)(y().E(p))),[p]),h=(0,t.useCallback)((async()=>{const e=!!i&&i.shouldSaveTransactionWithSudoMode(s);if(s.isDefined()&&p)if(u){const i=s.getPermissionItems(),t=(0,c().Cd)(s.getModel(),i,g);await(0,A().b)({environment:a,useSudoMode:e,store:s,permissionChanges:t,from:"inheritance_banner",shareMenuSessionId:M().Ay.state.sessionId,isRedesignEnabled:!0,parentStore:p})}else await(0,j().Dw)({environment:a,useSudoMode:e,store:s,permissionItem:void 0,fromPermissionWrapper:"inheritance_banner",isRedesignEnabled:!0,shouldInherit:!1})}),[a,i,s,u,p,g]),b=(0,m().IS)((e=>({container:{...(0,C().kJ)({theme:e,inheritanceBannerEnabled:!0,isMobile:l}),paddingLeft:12,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:8},labelContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},rightContainer:{flexShrink:0}})),[l]);return!d&&u?null:p?g.length<2?null:(0,w.jsxs)("div",{style:b.container,children:[(0,w.jsx)("div",{style:b.labelContainer,children:(0,w.jsx)(v().A,{isMultiline:!0,isSmall:!0,children:(0,w.jsx)(_,{store:s,navigableParentStore:p,showToggle:d})})}),d&&(0,w.jsx)("div",{style:b.rightContainer,children:(0,w.jsx)(f().A,{on:!u,onClick:h})})]}):null}function _(e){let{store:s,navigableParentStore:i,showToggle:t}=e;const r=(0,n().v3)(),a=(0,o().K8)((()=>{if(i instanceof S().Bv)return(0,x().Ay)({store:i,fullyQualified:!1,pageVisitSource:d().y8.ShareMenu})}),[i]),l=(0,o().K8)((()=>i.getIcon()),[i]),c=(0,m().IS)((e=>({recordContainer:{display:"inline",alignItems:"center"},title:{display:"inline"},recordIcon:{display:"inline-block",marginRight:2,verticalAlign:"text-bottom"}})),[]),f=(0,w.jsxs)("div",{style:c.recordContainer,children:[(0,w.jsx)(h().A,{disabled:!0,icon:l,size:14,isEmptyPage:!1,style:c.recordIcon}),(0,w.jsx)(g().A,{inline:!0,underline:!0,onClick:()=>{i instanceof S().h4&&(P().F2({environment:r,teamId:i.id,tab:I().p.Members,from:"share_menu"}),p().ks(r,{store:i,option:"view",from:"share_menu"}))},href:a,style:c.recordContainer,children:(0,w.jsx)(b().A,{shouldWrap:!0,store:i,style:c.title})})]});return t?(0,w.jsx)(u().sA,{id:"pageShareMenu.inheritingFromParentPageBanner.switchLabel",defaultMessage:"Share with everyone who has access to {parentPageTitle}",values:{parentPageTitle:f}}):(0,w.jsx)(u().sA,{id:"pageShareMenu.inheritingFromParentPageBanner.readOnlyLabel",defaultMessage:"Shared with everyone who has access to {parentPageTitle}",values:{parentPageTitle:f}})}var T=()=>i(485952),R=(i(898992),i(354520),()=>i(183607)),N=()=>i(568625),D=()=>i(370360);const L=(0,i(340498).wt)("sliders",{viewBox:"0 0 16 13",svg:(0,w.jsx)("g",{children:(0,w.jsx)("path",{d:"M10.536 12.066c-.323 0-.62-.08-.889-.239a1.826 1.826 0 01-.635-.642 1.674 1.674 0 01-.24-.882c0-.32.08-.61.24-.875.16-.27.371-.483.635-.643.27-.16.566-.24.89-.24.318 0 .61.08.874.24.269.16.483.374.643.643.16.264.239.556.239.875 0 .323-.08.617-.24.882a1.803 1.803 0 01-.642.642 1.66 1.66 0 01-.875.24zm0-.922a.8.8 0 00.588-.24.818.818 0 00.246-.601.796.796 0 00-.246-.595.799.799 0 00-.588-.24.83.83 0 00-.601.24.807.807 0 00-.24.595c0 .237.08.437.24.601a.83.83 0 00.601.24zm-1.169-1.49v1.298h-7.78a.625.625 0 01-.457-.191.637.637 0 01-.185-.458c0-.178.062-.33.185-.458a.625.625 0 01.458-.192h7.78zm5.059 0c.168 0 .314.063.437.19a.64.64 0 01.185.459.64.64 0 01-.185.458.588.588 0 01-.437.191h-2.653V9.653h2.653zM5.539 7.807c-.324 0-.62-.08-.889-.24a1.846 1.846 0 01-.635-.635 1.697 1.697 0 01-.24-.882c0-.324.08-.618.24-.882.16-.269.371-.483.635-.643.27-.16.565-.239.89-.239.318 0 .61.08.874.24.269.159.483.373.643.642.16.264.239.558.239.882 0 .319-.08.613-.24.882a1.817 1.817 0 01-.642.635c-.264.16-.556.24-.875.24zm0-.923a.822.822 0 00.834-.834.816.816 0 00-.834-.841.816.816 0 00-.84.84c0 .233.079.431.239.596a.83.83 0 00.601.239zm-3.978-1.49h2.761v1.298H1.561a.59.59 0 01-.431-.184.637.637 0 01-.185-.458c0-.183.062-.337.185-.465a.58.58 0 01.43-.191zm12.837 0a.61.61 0 01.458.19.633.633 0 01.192.466c0 .178-.064.33-.192.458a.622.622 0 01-.458.184h-7.71V5.395h7.71zm-3.862-1.846c-.323 0-.62-.08-.889-.24a1.845 1.845 0 01-.635-.635 1.697 1.697 0 01-.24-.882c0-.324.08-.618.24-.882.16-.269.371-.483.635-.642.27-.16.566-.24.89-.24.318 0 .61.08.874.24.269.16.483.373.643.642.16.264.239.558.239.882 0 .319-.08.613-.24.882a1.828 1.828 0 01-.642.636c-.264.16-.556.239-.875.239zm0-.923a.788.788 0 00.588-.246.81.81 0 00.246-.595.796.796 0 00-.246-.595.788.788 0 00-.588-.246.818.818 0 00-.601.246.807.807 0 00-.24.595c0 .233.08.43.24.595a.818.818 0 00.601.246zM9.401 1.143V2.44H1.588a.625.625 0 01-.458-.191.637.637 0 01-.185-.458c0-.178.062-.33.185-.458a.625.625 0 01.458-.191H9.4zm5.025 0c.168 0 .314.063.437.191s.185.28.185.458-.062.33-.185.458a.588.588 0 01-.437.191H11.69V1.143h2.735z"})})});var B=()=>i(854150),W=()=>i(534177),E=()=>i(284371),K=()=>i(704152),O=()=>i(760217),U=()=>i(406699),V=()=>i(285790),F=()=>i(928600),z=()=>i(939740),G=()=>i(89924),H=()=>i(722872),Y=()=>i(115512),q=()=>i(962730),$=()=>i(262400);const Q=14;function X(e){const{showRestoreButton:s,store:i,type:t,sudoModeStore:r}=e,a=(0,n().v3)(),{isMobile:l}=(0,n().Y0)(),d=(0,o().K8)((()=>y().fU(i)[1]),[i]),c=(0,o().K8)((()=>i.canAdmin()),[i]),u=(0,m().IS)((e=>({banner:{...(0,C().kJ)({theme:e,inheritanceBannerEnabled:!1,isMobile:l}),display:"flex",flexDirection:"row",alignItems:"flex-start",gap:8},content:{display:"flex",alignItems:"flex-start",gap:2,flex:"1 0 0"},label:{fontSize:(0,Y().ny)(a,"UIRegular"),lineHeight:"20px",color:e.text.secondary,flex:"1 0 0",paddingLeft:4},icon:{height:16,width:16,color:e.icon.secondary},iconContainer:{paddingTop:2,height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"}})),[a,l]);return c?l?(0,w.jsxs)("div",{style:u.banner,children:[(0,w.jsxs)("div",{style:u.content,children:["restricted"===t&&(0,w.jsx)("div",{style:u.iconContainer,children:(0,R().X)(u.icon)}),(0,w.jsx)(v().A,{style:u.label,isMultiline:!0,children:(0,w.jsx)(Z,{type:t,navigableParentStore:d,showRestoreButton:s,store:i})})]}),s&&(0,w.jsx)(J,{type:t,store:i,sudoModeStore:r})]}):(0,w.jsxs)("div",{style:u.banner,children:[(0,w.jsxs)("div",{style:u.content,children:["restricted"===t&&(0,w.jsx)("div",{style:u.iconContainer,children:(0,R().X)(u.icon)}),(0,w.jsx)(v().A,{style:u.label,isMultiline:!0,children:(0,w.jsx)(Z,{store:i,type:t,navigableParentStore:d,showRestoreButton:s})})]}),s&&(0,w.jsx)(J,{type:t,store:i,sudoModeStore:r})]}):null}function Z(e){const{store:s,type:i,navigableParentStore:t}=e,r=(0,n().v3)(),a=(0,o().K8)((()=>{if(t instanceof S().Bv)return(0,x().Ay)({store:t,fullyQualified:!1,pageVisitSource:d().y8.ShareMenu})}),[t]),l=(0,o().K8)((()=>t instanceof S().h4),[t]),c=(0,o().K8)((()=>t.getIcon()),[t]),f=(0,o().K8)((()=>s.isCollectionView()?"database":"page"),[s]),v=(0,m().IS)((e=>({recordContainer:{display:"inline",alignItems:"center",gap:2,marginLeft:2},title:{display:"inline"},recordIcon:{display:"inline-block",marginRight:2,verticalAlign:"text-bottom"}})),[]),y=t instanceof S().h4?(0,w.jsx)(g().A,{inline:!0,underline:!0,onClick:()=>{P().F2({environment:r,teamId:t.id,tab:I().p.Members,from:"permission_item"}),p().ks(r,{store:t,option:"view",from:"share_menu"})},children:(0,w.jsx)(b().A,{shouldWrap:!0,maxLength:30,store:t,style:v.title})}):(0,w.jsxs)("div",{style:v.recordContainer,children:[c&&(0,w.jsx)(h().A,{disabled:!0,icon:c,size:14,isEmptyPage:!1,style:v.recordIcon}),(0,w.jsx)(g().A,{inline:!0,href:a,style:v.recordContainer,children:(0,w.jsx)(b().A,{shouldWrap:!1,maxLength:30,store:t,style:v.title,underline:!0})})]});switch(i){case"elevated":return l?"database"===f?(0,w.jsx)(u().sA,{id:"pageShareMenu.restoreTeamspacePermissionsBannerDatabase.label",defaultMessage:"Share settings on this database differ from the {teamspaceTitle} teamspace default",values:{teamspaceTitle:y}}):(0,w.jsx)(u().sA,{id:"pageShareMenu.restoreTeamspacePermissionsBanner.label",defaultMessage:"Share settings on this page differ from the {teamspaceTitle} teamspace default",values:{teamspaceTitle:y}}):"database"===f?(0,w.jsx)(u().sA,{id:"pageShareMenu.restoreParentPagePermissionsBannerDatabase.label",defaultMessage:"Share settings on this database differ from the parent page {parentPageTitle}",values:{parentPageTitle:y}}):(0,w.jsx)(u().sA,{id:"pageShareMenu.restoreParentPagePermissionsBanner.label",defaultMessage:"Share settings on this page differ from the parent page {parentPageTitle}",values:{parentPageTitle:y}});case"restricted":return l?"database"===f?(0,w.jsx)(u().sA,{id:"pageShareMenu.restrictedAccessFromTeamspaceBannerDatabase.label",defaultMessage:"Share settings on this database are unlinked from the {teamspaceTitle} teamspace default",values:{teamspaceTitle:y}}):(0,w.jsx)(u().sA,{id:"pageShareMenu.restrictedAccessFromTeamspaceBanner.label",defaultMessage:"Share settings on this page are unlinked from the {teamspaceTitle} teamspace default",values:{teamspaceTitle:y}}):"database"===f?(0,w.jsx)(u().sA,{id:"pageShareMenu.restrictedAccessFromParentPageBannerDatabase.label",defaultMessage:"Share settings on this database are unlinked from the parent page {parentPageTitle}",values:{parentPageTitle:y}}):(0,w.jsx)(u().sA,{id:"pageShareMenu.restrictedAccessFromParentPageBanner.label",defaultMessage:"Share settings on this page are unlinked from the parent page {parentPageTitle}",values:{parentPageTitle:y}});default:(0,W().HB)(i)}}function J(e){const{type:s,store:i,sudoModeStore:t}=e,r=(0,n().v3)(),{isMobile:a}=(0,n().Y0)(),l=(0,u().tz)(),g=(0,o().K8)((()=>!!t&&t.shouldSaveTransactionWithSudoMode(i)),[i,t]),h=(0,o().K8)((()=>(0,y().fU)(i)[1]),[i]),b=h.table===B().yK,f=(0,o().K8)((()=>{if(h instanceof S().Bv)return(0,x().Ay)({store:h,fullyQualified:!1,pageVisitSource:d().y8.ShareMenu})}),[h]),v=(0,m().IS)((e=>({popupContainer:{minWidth:265},icon:{fill:e.icon.secondary,height:16,width:16},mobileRestoreButton:{fontSize:(0,Y().ny)(r,"UIRegular"),fontWeight:E().Wy.medium,flexShrink:0,borderRadius:4,paddingLeft:4,paddingRight:4,color:e.text.uiBluePrimary}})),[r]),j=[b?{key:"showTeamSettings",render:e=>(0,w.jsx)(O().A,{...e,icon:L({height:Q,width:Q}),title:(0,w.jsx)(u().sA,{id:"pageShareMenu.restoreParentPagePermissionsBanner.viewDefaults.label",defaultMessage:"View defaults"})}),action:()=>{h.table===B().yK&&(P().F2({environment:r,teamId:h.id,tab:I().p.Members,from:"permission_item"}),p().ks(r,{store:h,option:"view",from:"share_menu"}))}}:f?{key:"showParentPageSettings",render:e=>(0,w.jsx)(O().A,{...e,icon:L({height:Q,width:Q}),title:(0,w.jsx)(u().sA,{id:"pageShareMenu.restoreParentPagePermissionsBanner.viewDefaults.label",defaultMessage:"View defaults"}),href:f}),action:()=>{}}:void 0,{key:"restore",action:async()=>{if("elevated"===s)await(0,$().u)({environment:r,useSudoMode:g,store:i});else if("restricted"===s){if(!i.isDefined())return;const e=i.getPermissionItems(),s=y().fU(i)[1];if(!s)return;const t=(0,c().wD)(y().E(s)),n=(0,c().Cd)(i.getModel(),e,t);await(0,A().b)({environment:r,useSudoMode:g,store:i,permissionChanges:n,from:"unlinked_banner",shareMenuSessionId:M().Ay.state.sessionId,isRedesignEnabled:!0,parentStore:s})}else(0,W().HB)(s)},render:e=>(0,w.jsx)(O().A,{...e,title:(0,w.jsx)(u().sA,{id:"pageShareMenu.restoreParentPagePermissionsBanner.restoreSettings.label",defaultMessage:"Restore settings"}),icon:(0,D().u)({height:Q,width:Q})})}].filter(W().O9),C=[{key:"all",render:e=>(0,w.jsx)(G().A,{...e}),items:j}];return a?(0,w.jsx)(K().A,{style:v.mobileRestoreButton,onClick:async()=>{if("elevated"===s)await(0,$().u)({environment:r,useSudoMode:g,store:i});else if("restricted"===s){if(!i.isDefined())return;const e=i.getPermissionItems(),s=y().fU(i)[1];if(!s)return;const t=(0,c().wD)(y().E(s)),n=(0,c().Cd)(i.getModel(),e,t);await(0,A().b)({environment:r,useSudoMode:g,store:i,permissionChanges:n,from:"unlinked_banner",shareMenuSessionId:M().Ay.state.sessionId,isRedesignEnabled:!0,parentStore:s})}else(0,W().HB)(s)},children:(0,w.jsx)(u().sA,{defaultMessage:"Restore",id:"pageShareMenu.restoreParentPagePermissionsBanner.restore.mobile.label"})}):(0,w.jsx)(U().Ay,{render:()=>(0,w.jsx)(F().A,{menuType:H().gu.Popup,children:(0,w.jsx)(z().Ay,{type:z().Oh.Vertical,sections:C,initialFocus:void 0})}),renderOrigin:e=>(0,w.jsx)(V().A,{icon:N().L,iconStyle:v.icon,ariaLabel:l.formatMessage({id:"pageShareMenu.restorePagePermissionsBanner.restoreOptionsButton.label",defaultMessage:"See restore permissions options"}),...e}),popupType:U().z7.Popup,placementToOrigin:q().W.Bottom,alignmentToOrigin:q().C.End})}function ee(e){const{store:s}=e,i=(0,n().v3)(),t=(0,o().K8)((()=>function(e){const{store:s,environment:i}=e;return r().or([r().Km9,r().Uo6([r()._mr,r().AU6(r().Km9)])])({environment:i,blocks:[s],publicEditMode:void 0})}({store:s,environment:i})),[s,i]);return(0,o().K8)((()=>(0,a().FI)()),[])?(0,w.jsx)(X,{type:"restricted",showRestoreButton:t,store:s,sudoModeStore:e.sudoModeStore}):(0,w.jsx)(T().A,{type:"unrestrict",showRestoreButton:t,store:s,sudoModeStore:e.sudoModeStore})}function se(e){const{store:s}=e,i=(0,o().K8)((()=>(0,l().le)({store:s})),[s]),t=(0,o().K8)((()=>(0,a().FI)()),[]);return i?t?(0,w.jsx)(X,{type:"elevated",showRestoreButton:!1,store:s,sudoModeStore:e.sudoModeStore}):(0,w.jsx)(T().A,{type:"restore-team",showRestoreButton:!1,store:s,sudoModeStore:e.sudoModeStore}):null}const ie=function(e){const{store:s,showRestrictedPermissionBanner:i,showPermissionInheritanceBanner:t}=e,{canAccessParent:n}=(0,o().K8)((()=>(0,l().iG)({store:s})),[s]);return n?t?(0,w.jsx)(k,{store:s,sudoModeStore:e.sudoModeStore}):i?(0,w.jsx)(ee,{store:s,sudoModeStore:e.sudoModeStore}):(0,w.jsx)(se,{store:s,sudoModeStore:e.sudoModeStore}):null}},984804:(e,s,i)=>{i.d(s,{A:()=>M});i(296540);var t=()=>i(484714),n=()=>i(56366),o=()=>i(401497),r=()=>i(792071),a=()=>i(798880),l=()=>i(695608),m=()=>i(959013),d=()=>i(100622),c=()=>i(919172),u=()=>i(678553),p=()=>i(125565),g=()=>i(453697),h=()=>i(747788),b=()=>i(351360),f=()=>i(663590),v=()=>i(87043),x=()=>i(810727),y=i(474848);function I(e){const{userValue:s,guestLabel:i,isRedesignEnabled:t}=e;return(0,y.jsx)(u().A,{title:(0,y.jsx)(P,{userValue:s,guestLabel:i}),caption:(0,y.jsx)(j,{userValue:s,isRedesignEnabled:t}),icon:(0,y.jsx)(S,{userValue:s}),desktopIconStyle:{marginLeft:16}})}function S(e){const{userValue:s}=e,i=(0,t().Y0)().isMobile,r=(0,n().K8)((()=>(0,f().FI)()),[]),a=(0,o().IS)((()=>({iconPlaceholder:{height:i&&r?v().Bj:v().Ev,width:i&&r?v().Bj:v().Ev,borderRadius:20}})),[i,r]);return s?(0,y.jsx)(g().A,{userValue:s,size:i&&r?v().Bj:v().Ev}):(0,y.jsx)(A,{style:a.iconPlaceholder})}function P(e){const{userValue:s,guestLabel:i}=e,t=(0,m().tz)(),r=(0,n().K8)((()=>(0,f().FI)()),[]),a=(0,n().K8)((()=>{const{currentUserStore:e}=b().default.state;return!!e&&(!!s&&e.id===s.id)}),[s]),u=(0,o().IS)((e=>({titlePlaceholder:{height:8,width:81,borderRadius:4},pendingInvitation:{color:d().Ay.PendingInvitationTextColor},titleYouIndicator:{color:r?"dark"===e.mode?e.text.secondary:e.text.tertiary:e.mediumTextColor}})),[r]);if(!s)return(0,y.jsx)(A,{style:u.titlePlaceholder});const g=(0,l().c6)(t,s);return(0,y.jsx)(y.Fragment,{children:g?(0,y.jsxs)("div",{style:{display:"flex",gap:4},children:[(0,y.jsx)(p().A,{className:"notranslate",children:a?(0,y.jsx)(m().sA,{id:"cellMemberAvatar.displayName.title",defaultMessage:"{userFullDisplayName} <youIndicatorText>(You)</youIndicatorText>",values:{userFullDisplayName:g,youIndicatorText:e=>(0,y.jsx)("span",{style:u.titleYouIndicator,children:e})}}):g}),i&&(0,y.jsx)(c().Q,{labelType:i,shouldUseTabStyle:r})]}):(0,y.jsx)(m().sA,{defaultMessage:"Invitation sent",id:"blockPermissionsSettings.sentInvitation.message"})})}function j(e){const{userValue:s,isRedesignEnabled:i,permissionRole:n}=e,{isMobile:r}=(0,t().Y0)(),a=(0,o().IS)((()=>({subtitlePlaceholder:{height:8,width:139,borderRadius:4,marginTop:10}})),[]);if(i&&r&&n){const e=(0,h().R)({type:"user_permission",role:n,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:i}).label;return(0,y.jsx)(p().A,{isSmall:!0,children:(0,y.jsx)(m().sA,{...e})})}return null!=s&&s.email?(0,y.jsx)(p().A,{isSmall:!0,children:s.email}):(0,y.jsx)(A,{style:a.subtitlePlaceholder})}function A(e){const s=(0,o().IS)((s=>({placeholder:{...e.style,background:s.lightDividerColor}})),[e.style]);return(0,y.jsx)("div",{style:s.placeholder})}function C(e){const{userValue:s,permissionItem:i,store:t}=e,n=(0,m().tz)(),o=r().Bj6.fromValue(a().oo,s),l=null==o?void 0:o.getDisplayName(n),d=(0,x().z)({permissionItem:i,targetType:"user",targetName:l,store:t});return d||null}const M=function(e){const{store:s,userPermission:o,spaceVisibleUserMap:r,fromPermissionWrapper:l}=e,m=(0,t().v3)().device.isMobile,d=(0,n().K8)((()=>(0,f().FI)()),[]),c=(0,n().K8)((()=>i(630116).LU.createChildStore(s,{table:a().oo,id:o.permissionItem.user_id}).getValue()),[s,o.permissionItem.user_id]),u=(0,n().K8)((()=>{if(null!=c&&c.id)return(0,i(619338).p)({spaceVisibleUserMap:r,userId:c.id,store:s})}),[s,r,c]);return(0,y.jsx)("div",{children:(0,y.jsx)(v().Ay,{store:s,permissionItem:o.permissionItem,from:o.from,ignoreLocalHoverState:e.ignoreLocalHoverState,icon:(0,y.jsx)(S,{userValue:c}),title:(0,y.jsx)(P,{userValue:c,guestLabel:u}),subtitle:(0,y.jsx)(j,{userValue:c,isRedesignEnabled:d,permissionRole:o.permissionItem.role}),selectHeader:d&&m?(0,y.jsx)(I,{userValue:c,guestLabel:u,isRedesignEnabled:d}):void 0,selectFooter:e.selectFooter,showInherited:e.showInherited,upgradeButtonName:"user_permission_item",isRemovableOverride:e.isRemovableOverride,fromPermissionWrapper:l,roleItemOverrides:e.roleItemOverrides,nonInheritedTooltip:d&&!e.tooltip?(0,y.jsx)(C,{userValue:c,permissionItem:o.permissionItem,store:s}):e.tooltip,menuListItemProps:e.menuListItemProps,style:e.style,...e.permissionItemArgs})},o.permissionItem.user_id)}}}]);