"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[53179],{184966:(t,e,o)=>{o.d(e,{t:()=>b});o(944114),o(809678),o(898992),o(581454),o(737550);var n=()=>o(134025),r=()=>o(142748),i=()=>o(433847),s=()=>o(68263),a=()=>o(96689),l=()=>o(116225),d=()=>o(896628),c=()=>o(44729),p=()=>o(317909),u=()=>o(780054),m=()=>o(71584),f=()=>o(989423),g=()=>o(659915),v=()=>o(747444);function b(t){const{environment:e,draftPostStore:o,onSubmitPost:s,from:b}=t,k=e.currentUser.id;o&&k&&(o.isPublishedPost()||(!function(t){const{environment:e,postStore:o}=t;p().createAndCommit({environment:e,perform:t=>(o.getContentStores().toReversed().some((e=>{if(!(0,g().o)(e))return!0;c().zz({childStore:e,parentStore:o,transaction:t})})),o),userAction:"PostChannel.trimPostDraft",canUndo:!1})}({environment:e,postStore:o}),function(t){const{environment:e,blockToDuplicateStore:o,userId:s}=t;if(!o.isDefined())return;const l=(0,r().Yn)(o.getParentPointer(),o.getRecordModel),f=(0,i().wD)(l).map((t=>({...t,role:h(t.role,"comment_only")})));f.push({type:"restricted_permission"}),f.push({type:"user_permission",user_id:s,role:"editor"}),p().createAndCommit({environment:e,perform:t=>{const[[r],i]=m().duplicateBlock({environment:e,stores:[o],addCopyName:!1,transaction:t,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!1,targetSpaceId:o.getSpaceId(),baseUrl:u().A.domainBaseUrl,publicDomainName:u().A.publicDomainName,preferDuplicateLocation:"local",createActivities:!0});return p().applyOperation({store:r,operation:n().op.update({pointer:r.pointer,path:[],args:{alive:!0,parent_id:o.getParentId(),parent_table:o.getParentTable(),permissions:f,created_time:Date.now(),last_edited_time:Date.now()}}),transaction:t}),d().zA({stores:[r],update:{draft_status:"published"},transaction:t}),p().applyOperation({store:o,operation:n().op.update({pointer:o.pointer,path:[],args:{alive:!1}}),transaction:t}),t.postSubmitCallbacks.push((()=>i.then((()=>p().createAndCommit({environment:e,perform:t=>(d().zA({stores:[r],update:{draft_status:"published"},transaction:t}),c().s8({blockStore:o,transaction:t}),p().applyOperation({store:o,operation:n().op.update({pointer:o.pointer,path:[],args:{parent_id:o.getSpaceId(),parent_table:a().NX,permissions:[{type:"restricted_permission"}]}}),transaction:t}),o),userAction:"PostChannel.cleanupDraft",canUndo:!1}))))),r},userAction:"PostChannel.publishDraft",canUndo:!1}).performResult}({environment:e,blockToDuplicateStore:o,userId:k}),null==s||s(),v().A.setState({isOpen:!1}),(0,f().u4)({environment:e,event:{eventName:"post_created",eventProperties:{block_id:o.id,parent_collection_id:o.getParentId(),from:b}}}),l().u4({name:"post_created"})))}function h(t,e){if(!t)return t;const o="string"==typeof t&&t in s().TE?s().TE[t]:void 0;if(!o)return t;return o>s().TE[e]?e:t}},484595:(t,e,o)=>{o.d(e,{A:()=>a,p:()=>i});var n=o(296540),r=o(474848);const i=8;function s(t,e){let{isSelected:n}=t;const{radioButtonStyle:s,dotStyle:a}=(0,o(401497).IS)((t=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:i,background:n?t.blueColor:t.whiteButtonBackground,border:n?"none":`1px solid ${t.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:t.text.contrastPrimary,transition:"opacity 100ms ease-out",opacity:n?1:0}})),[n]);return(0,r.jsx)("div",{ref:e,style:s,children:(0,r.jsx)("div",{style:a})})}const a=n.forwardRef(s)},522500:(t,e,o)=>{o.d(e,{q:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("megaphone",{viewBox:"0 0 64 64",svg:(0,n.jsx)("path",{d:"m54,10v40h-4l-20-10h-4l4,16h-10l-4-16c-4.94,0-8-3.06-8-8v-4c0-4.94,3.06-8,8-8h14l20-10h4Z"})})},618968:(t,e,o)=>{o.r(e),o.d(e,{TopbarFavoriteButton:()=>C});var n=o(296540),r=()=>o(484714),i=()=>o(56366),s=()=>o(401497),a=()=>o(877788),l=o(474848);const d={viewBox:"0 0 20 20",svg:(0,l.jsx)("path",{d:"M10.594 2.83a.625.625 0 0 0-1.188 0L7.899 7.468H3.025a.625.625 0 0 0-.367 1.13L6.6 11.462l-1.506 4.636a.625.625 0 0 0 .962.699L10 13.932l3.943 2.865a.625.625 0 0 0 .962-.699L13.4 11.462l3.943-2.865a.625.625 0 0 0-.367-1.13H12.1z"})},c=(0,o(340498).wt)("starFill",d);var p=()=>o(959013),u=()=>o(778417),m=()=>o(317909),f=()=>o(989423),g=()=>o(38337),v=()=>o(245128),b=()=>o(963589),h=()=>o(869562),k=()=>o(962730),y=()=>o(285790),S=()=>o(35392),A=()=>o(859428),x=()=>o(281401),B=()=>o(863059);const T=(0,p().YK)({isBookmarkedMessage:{defaultMessage:"Favorited",id:"topbar.favoriteButton.activeTitle"},isNotBookmarkedMessage:{defaultMessage:"Favorite",id:"topbar.favoriteButton.title"},isBookmarkedTooltip:{defaultMessage:"Remove from your favorites",id:"topbar.favoriteButton.activeTooltip1"},isNotBookmarkedTooltip:{defaultMessage:"Add to your favorites",id:"topbar.favoriteButton.tooltip1"}});function C(t){let{spaceViewStore:e,store:o,iconStyle:d,buttonStyle:S,showKeyboardShortcut:C,useDefaultTooltipPlacement:w,isTablet:j}=t;const _=(0,r().v3)(),P=(0,p().tz)(),D=(0,i().K8)((()=>!!e&&(0,v().A)({spaceViewStore:e,pageId:o.id})),[e,o]),I=D?c:a().w,O=(0,n.useMemo)((()=>D?()=>function(t,e,o){if(!o)return;u().IU({environment:e}),f().vd(e,"unbookmark",{from:"topbar"}),m().createAndCommit({userAction:"TopbarFavoriteButton.handleUnbookmarkClick",environment:e,canUndo:!0,perform:e=>{h().unbookmarkPage({spaceViewStore:o,store:t,transaction:e})}})}(o,_,e):()=>function(t,e,o){if(!o)return;u().IU({environment:e}),f().vd(e,"bookmark",{from:"topbar"}),m().createAndCommit({userAction:"TopbarFavoriteButton.handleBookmarkClick",environment:e,canUndo:!0,perform:e=>{h().bookmarkPage({spaceViewStore:o,store:t,transaction:e})}})}(o,_,e)),[D,o,_,e]),R=(0,b().X)("tablet_refresh_gate"),L=(0,B().gQ)(),U=(0,s().IS)((t=>({icon:{...j&&R?L.tabletIcon:L.icon,...D?{fill:t.topbarFavorite}:void 0,...d},button:{...L.iconButton,...S}})),[L.icon,L.tabletIcon,L.iconButton,D,d,S,j,R]),E=(0,s().IS)((t=>({iconContainer:(0,x().aD)(t).iconContainer})),[]);return(0,l.jsx)(A().A,{placement:w?void 0:k().W.Bottom,originGap:_.device.isElectronWindows?10:void 0,renderTooltip:()=>(0,l.jsx)(M,{isBookmarked:D,showKeyboardShortcut:C}),render:t=>(0,l.jsx)(y().A,{...t,className:g().ZEs,icon:I,style:j?E.iconContainer:U.button,iconStyle:U.icon,onClick:O,ariaLabel:P.formatMessage(D?T.isBookmarkedMessage:T.isNotBookmarkedMessage)})})}function M(t){let{isBookmarked:e,showKeyboardShortcut:o}=t;const n=(0,s().DP)();return(0,l.jsxs)("div",{style:{textAlign:"center"},children:[(0,l.jsx)("div",{children:(0,l.jsx)(p().sA,{...e?T.isBookmarkedTooltip:T.isNotBookmarkedTooltip})}),o&&(0,l.jsx)(S().A,{style:{color:n.text.contrastSecondary},name:"toggleFavorite"})]})}},659915:(t,e,o)=>{o.d(e,{o:()=>r,s:()=>i});o(898992),o(430670);var n=()=>o(919709);function r(t){return!t.isTransclusionType()&&!t.isCollectionView()&&!t.hasContent()&&t.isEmptyTitle()}function i(t){const e=(0,n().tyK)(t.getTitleValue()),o=t.getContentStores().flatMap((t=>(0,n().tyK)(t.getTitleValue())));return e.length>0||o&&o.length>0}},661945:(t,e,o)=>{o.d(e,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isOpen:!1}}}const r=new n},732800:(t,e,o)=>{o.d(e,{A:()=>a});var n=o(296540),r=()=>o(959013),i=o(474848);function s(t){const e=(0,o(56366).K8)((()=>{if(!t.postStore)return 0;const e=(0,o(108944).yQ)(t.postStore);return e?null==e?void 0:e.getRawMembership().length:0}),[t.postStore]);return(0,i.jsx)(o(957986).A,{open:t.isOpen,onDismiss:t.onDismiss,render:()=>(0,i.jsx)(o(887480).Ay,{icon:o(522500).q,title:(0,i.jsx)(r().sA,{id:"posts.confirmMentionEveryoneModal.title",defaultMessage:"Notify {sizeOfTeam} people?",values:{sizeOfTeam:e}}),subtitle:(0,i.jsx)(r().sA,{id:"posts.confirmMentionEveryoneModal.subtitle",defaultMessage:"Using @everyone notifies everyone in the teamspace. Are you sure you want to send this?"}),confirmText:(0,i.jsx)(r().sA,{id:"posts.confirmMentionEveryoneModal.confirmText",defaultMessage:"Send"}),cancelText:(0,i.jsx)(r().sA,{id:"posts.confirmMentionEveryoneModal.cancelText",defaultMessage:"Edit message"}),confirmTextStyle:"red",radioOptions:[],onDismiss:t.onDismiss,onConfirm:t.onConfirm})})}const a=n.memo(s)},747444:(t,e,o)=>{o.d(e,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isOpen:!1,blockStore:void 0}}}const r=new n},809678:(t,e,o)=>{var n=o(746518),r=o(437628),i=o(225397),s=o(206469),a=Array;n({target:"Array",proto:!0},{toReversed:function(){return r(i(this),a)}}),s("toReversed")},873892:(t,e,o)=>{o.r(e),o.d(e,{TopbarSubmitPostButton:()=>k});var n=o(296540),r=()=>o(484714),i=()=>o(56366),s=()=>o(401497),a=()=>o(120739),l=()=>o(959013),d=()=>o(284371),c=()=>o(435009),p=()=>o(108944),u=()=>o(184966),m=()=>o(732800),f=()=>o(659915),g=()=>o(661945),v=()=>o(704152),b=()=>o(204063),h=o(474848);function k(t){const{store:e}=t,o=(0,r().v3)(),k=(0,r().Y0)(),y=(0,n.useCallback)((()=>{if(!e)return;const t=(0,p().Uo)(e);t&&c().oo({environment:o,url:(0,a().a)({teamId:t.id})})}),[o,e]),S=(0,n.useCallback)((()=>{u().t({environment:o,draftPostStore:e,onSubmitPost:y,from:"full_page_topbar"})}),[o,e,y]),A=(0,n.useCallback)((()=>{e&&(0,f().s)(e)?g().A.setState({isOpen:!0}):S()}),[e,S]),x=(0,i().K8)((()=>g().A.state.isOpen),[]),B=(0,s().IS)((t=>({postButtonMobile:{display:"flex",alignItems:"center",height:32,paddingLeft:12,paddingRight:12,marginRight:16,fontWeight:d().Wy.medium,color:t.text.primary,background:t.tint.regular,borderRadius:16},postButtonDesktop:{marginLeft:2},iconButton:{marginLeft:16,background:t.tint.regular,borderRadius:16,width:32,height:32},rightButtons:{display:"flex",alignItems:"center"}})),[]);return(0,h.jsxs)(h.Fragment,{children:[k.isMobile?(0,h.jsx)(v().A,{onClick:A,style:B.postButtonMobile,children:(0,h.jsx)(l().sA,{id:"posts.postButton.label",defaultMessage:"Post"})}):(0,h.jsx)(b().A,{onClick:A,style:B.postButtonDesktop,children:(0,h.jsx)(l().sA,{id:"posts.postButton.label",defaultMessage:"Post"})}),(0,h.jsx)(m().A,{postStore:e,isOpen:x,onDismiss:()=>g().A.setState({isOpen:!1}),onConfirm:()=>{g().A.setState({isOpen:!1}),S()}})]})}},877788:(t,e,o)=>{o.d(e,{w:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M10 2.399c.27 0 .51.174.594.432l1.507 4.636h4.874a.625.625 0 0 1 .367 1.13L13.4 11.462l1.506 4.636a.625.625 0 0 1-.962.699L10 13.932l-3.943 2.865a.625.625 0 0 1-.962-.699L6.6 11.462 2.658 8.597a.625.625 0 0 1 .367-1.13h4.874L9.406 2.83A.625.625 0 0 1 10 2.399m0 2.647L8.948 8.285a.625.625 0 0 1-.595.432H4.95l2.754 2c.22.16.31.442.227.7l-1.052 3.238 2.755-2.001a.625.625 0 0 1 .734 0l2.755 2-1.052-3.237a.625.625 0 0 1 .227-.7l2.754-2h-3.405a.625.625 0 0 1-.594-.432z"})},r=(0,o(340498).wt)("star",n)}}]);