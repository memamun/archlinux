"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[53289],{140612:(e,t,o)=>{o.d(t,{w:()=>s});var r=()=>o(989423);function s(e,t){const{spaceId:o,pageId:s,joinSpaceMethod:n}=t;(0,r().u4)({environment:e,event:{eventName:"trusted_domain_banner_cta_clicked",eventProperties:{spaceId:o,pageId:s,joinSpaceMethod:n}}})}},156061:(e,t,o)=>{o.d(t,{A:()=>s});class r extends(()=>o(757695))().default{getInitialState(){return{isCreatingSpace:!1,didPerformAction:!1,flowId:o(206267).JW()}}}const s=r},313786:(e,t,o)=>{o.d(t,{A:()=>n});var r=o(296540),s=()=>o(705540);function n(e){return(0,r.useEffect)((()=>{document.title=e.title,s().setWindowTitle(e.title)}),[e.title]),e.children}},322114:(e,t,o)=>{o.d(t,{A:()=>C});var r=o(296540),s=()=>o(484714),n=()=>o(56366),i=()=>o(757695),a=()=>o(959013),l=()=>o(100622),c=()=>o(534177),d=()=>o(284371),u=()=>o(452939),g=()=>o(701763),p=()=>o(140612),m=()=>o(449506),f=()=>o(898486),h=()=>o(722872),x=()=>o(351360),v=()=>o(10984),S=()=>o(251126),j=()=>o(805751),b=()=>o(623580),y=()=>o(928600),A=()=>o(864943),w=()=>o(204063),M=o(474848);const P={marginBottom:10},k={...P,width:"100%",height:"100%",padding:10,alignItems:"top",borderRadius:0},I=(0,a().YK)({requestAccessMessagePlaceholder:{defaultMessage:"Message (optional)",id:"requestAccessForm.messageInput.placeholder"},rateLimitError:{defaultMessage:"You have recently requested access to this page.",id:"requestAccessForm.errorMessage.rateLimit"},currentUserNotFound:{defaultMessage:"Current user not found.",id:"requestAccessForm.errorMessage.currentUserNotFound"}});function E(){return(0,M.jsx)(a().sA,{defaultMessage:"Cancel",id:"requestAccessForm.cancelButton.label"})}const T=i().default.createClass(0,{name:"RequestAttemptStore"}),_=i().default.createClass(void 0,{name:"MessageStore"});const C=function(e){const t=(0,s().v3)(),i=(0,s().WS)(),l=(0,n().uB)(e.popupStore,o(463830).A),c=(0,n().uB)(void 0,_),g=(0,n().uB)(void 0,T),m=(0,r.useCallback)((()=>q(l)),[l]),f=(0,r.useCallback)((()=>(0,M.jsx)(W,{...e,requestAttemptStore:g,messageStore:c,buttonPopupStore:l})),[e,g,c,l]),h=(0,n().K8)((()=>g.state>0),[g]),x=(0,n().K8)((()=>l.state.open),[l]);if("current-actor-to-block"===e.type)return(0,M.jsx)(N,{type:"page",block:e.block,flowId:e.flowId,buttonType:e.buttonType});if("current-actor-to-collection"===e.type)return(0,M.jsx)(N,{type:"collection",collection:e.collection,flowId:e.flowId,buttonType:e.buttonType});const v="primary"===e.buttonType?w().A:A().A,S=i?(0,M.jsx)(o(14235).Ay,{popupType:o(377586).n.SlideUp,open:x,render:f}):(0,M.jsx)(o(957986).A,{open:x,onDismiss:m,render:f});return"current-actor-to-space-via-onboarding"===e.type?S:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(v,{size:"lg",disabled:h,onClick:()=>{var o,r;return function(e,t){const{environment:o,flowId:r,type:s,source:n,spaceId:i,pageId:a}=e;"trusted_domain_page"===n&&i&&p().w(o,{spaceId:i,pageId:a,joinSpaceMethod:"request_to_join"});"current-actor-to-block"===s?u().Xx(o,{button_name:"request-access",flow_id:r,request_access_type:"page"}):"current-actor-to-space-via-team"===s&&u().Xx(o,{button_name:"request-access",flow_id:r,request_access_type:"team"});t.setState({open:!0})}({environment:t,flowId:e.flowId,type:e.type,source:e.source,pageId:null===(o=e.block)||void 0===o?void 0:o.id,spaceId:null===(r=e.block)||void 0===r?void 0:r.spaceId},l)},style:"outline"===e.buttonType?{fontWeight:d().Wy.semibold}:{},children:h?(0,M.jsx)(a().sA,{id:"fullPageError.requestAccessButton.requested",defaultMessage:"Requested access"}):F(e.type)}),S]})};function B(e){let{result:t}=e;return t&&t.error?(0,M.jsx)("div",{style:{color:l().Ay.redWithAlpha(1),textAlign:"center",width:"100%",marginBottom:16},children:t.error}):null}function D(e){e.update((e=>e+1))}function q(e){return e.setState({open:!1})}function R(e){let{error:t,result:o,ready:i,requestAttemptStore:l,messageStore:c,type:u}=e;const g=(0,a().tz)(),p=(0,s().WS)(),m=(0,r.useCallback)((()=>D(l)),[l]),f=(0,r.useCallback)((e=>function(e,t){t.setState(e.target.value)}(e,c)),[c]),h=(0,n().K8)((()=>Boolean(0===l.state||i&&o&&o.error)),[l,i,o]),x=(0,n().K8)((()=>c.state||""),[c]);return(0,M.jsxs)(M.Fragment,{children:[!p&&(0,M.jsx)("div",{style:{fontSize:16,fontWeight:d().Wy.semibold,marginBottom:16},children:F(u)}),(0,M.jsx)(b().A,{format:p?b().C.Transparent:void 0,textarea:!0,value:x,onChange:f,disabled:!h,placeholder:g.formatMessage(I.requestAccessMessagePlaceholder),style:{...p?{...k,padding:"16px"}:{...P,marginBottom:16,padding:"8px 12px",alignItems:"flex-start"}}}),!p&&(0,M.jsx)(w().A,{size:"lg",disabled:!h,onClick:m,style:P,children:(0,M.jsx)(a().sA,{defaultMessage:"Send request",id:"requestAccessForm.sendRequestButton.label"})}),(0,M.jsx)(B,{result:o})]})}function W(e){const{requestAttemptStore:t,messageStore:o,buttonPopupStore:i}=e,l=(0,s().v3)(),d=(0,s().WS)(),u=(0,a().tz)(),p=(0,r.useCallback)(((r,s,n)=>(0,M.jsx)(R,{requestAttemptStore:t,messageStore:o,error:r,result:s,ready:n,type:e.type})),[t,o,e.type]),v=(0,n().K8)((()=>{var e;return null===(e=x().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),b=(0,r.useCallback)((t=>async function(e){const{messageStore:t,buttonPopupStore:o,type:r,teamId:s,requestAttempt:n,environment:i,currentUserId:a,intl:l,flowId:d}=e;if(0===n)return;const u=t.state,p=await async function(){if("current-actor-to-block"===r)return m().callApi({eventName:"requestAccess",environment:i,data:{type:"current-actor-to-block",block:e.block,message:u}});if("current-actor-to-collection"===r)return m().callApi({eventName:"requestAccess",environment:i,data:{type:"current-actor-to-collection",collection:e.collection,message:u}});if("current-actor-to-space-via-team"===r)return m().callApi({eventName:"requestAccess",environment:i,data:{type:"current-actor-to-space-via-team",teamId:s,message:u}});if("current-actor-to-space-via-block"===r){if(!a)return;return m().callApi({eventName:"requestAccess",environment:i,data:{type:"actor-to-space",spaceId:e.block.spaceId,message:u,forActorId:a,attributes:{add_permissions_on_approval:!1,origin_type:"trusted_domain_page"}}})}if("current-actor-to-space-via-onboarding"===r){if(!a)return;return m().callApi({eventName:"requestAccess",environment:i,data:{type:"actor-to-space",spaceId:e.spaceId,message:u,forActorId:a,attributes:{add_permissions_on_approval:!1,origin_type:"onboarding"}}})}}();return p?"success"!==p.type?"UserRateLimitResponse"===(null===(h=p.body)||void 0===h?void 0:h.name)?{error:l.formatMessage(I.rateLimitError)}:{error:(0,f().Hu)(l,p)}:("current-actor-to-block"===r?g().T_(i,{request_access_type:"page",flow_id:d,requestId:p.data.requestId}):"current-actor-to-space-via-team"===r?g().T_(i,{request_access_type:"team",flow_id:d}):"current-actor-to-space-via-block"===r?g().T_(i,{request_access_type:"space",flow_id:d,source:"trusted_domain_page"}):"current-actor-to-collection"===r?g().T_(i,{request_access_type:"collection",flow_id:d,requestId:p.data.requestId}):"current-actor-to-space-via-onboarding"===r?g().T_(i,{request_access_type:"space",flow_id:d,source:"onboarding"}):(0,c().HB)(r),o.reset(),{value:!0}):{error:l.formatMessage(I.currentUserNotFound)};var h}({...e,requestAttempt:t,environment:l,intl:u,currentUserId:v})),[l,u,e,v]),w=(0,r.useCallback)((()=>D(t)),[t]),P=(0,r.useCallback)((()=>q(i)),[i]),k=(0,n().O$)(t);return d?(0,M.jsx)(y().A,{menuType:h().gu.Modal,whiteBackground:!0,title:F(e.type),left:E(),onClickLeft:P,right:(0,M.jsx)(a().sA,{id:"requestAccessForm.mobileSend.label",defaultMessage:"Send"}),onClickRight:w,children:(0,M.jsx)(j().A,{debugName:"RequestAccessForm",capture:!0,children:(0,M.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"stretch",alignItems:"stretch",width:"100%",height:"100%"},children:(0,M.jsx)(S().A,{request:k,performRequest:b,render:p})})})}):(0,M.jsx)(j().A,{debugName:"RequestAccessForm",capture:!0,children:(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evently",alignItems:"stretch",padding:"20px 28px 24px",width:"340px"},children:[(0,M.jsx)(S().A,{request:k,performRequest:b,render:p}),(0,M.jsx)(A().A,{size:"lg",onClick:P,children:E()})]})})}function N(e){const{type:t,flowId:o,buttonType:i}=e,l=(0,s().v3)(),d="outline"===i?A().A:w().A,[u,p]=(0,r.useState)(!1),[f,h]=(0,r.useState)(!1),x={attributes:{add_permissions_on_approval:!1,role:(0,n().K8)((()=>(0,v().dL)()),[])?"reader":"read_and_write"},message:void 0};let S;"page"===t?S={...x,type:"current-actor-to-block",block:{id:e.block.id,spaceId:e.block.spaceId}}:"collection"===t?S={...x,type:"current-actor-to-collection",collection:{id:e.collection.id,spaceId:e.collection.spaceId}}:(0,c().HB)(t);const j=(0,r.useCallback)((async()=>{var e;const r=await m().callApi({eventName:"requestAccess",environment:l,data:S});"success"===r.type&&r.data.request?(p(!0),g().T_(l,{request_access_type:t,previous_access_level:"none",requested_access_level:"read_and_write",flow_id:o,requestId:r.data.requestId})):"failed"===r.type&&"UserRateLimitResponse"===(null===(e=r.body)||void 0===e?void 0:e.name)&&h(!0)}),[l,S,t,o]);return(0,M.jsx)(d,{size:"lg",disabled:u||f,disabledFeedback:u||f,onClick:j,children:u?(0,M.jsx)(a().sA,{id:"fullPageError.requestAccessButton.edit.Requested",defaultMessage:"Requested access"}):f?(0,M.jsx)(a().sA,{id:"fullPageError.requestAccessButton.edit.TryAgain",defaultMessage:"Try again later"}):F("page"===t?"current-actor-to-block":"current-actor-to-collection")})}function F(e){return"current-actor-to-space-via-block"===e||"current-actor-to-space-via-onboarding"===e?(0,M.jsx)(a().sA,{defaultMessage:"Request membership",id:"requestAccessForm.requestAccessToSpaceButton.title"}):(0,M.jsx)(a().sA,{defaultMessage:"Request access",id:"requestAccessForm.requestAccessButton.title"})}},753289:(e,t,o)=>{o.r(t),o.d(t,{PageError:()=>ct,PageError404:()=>Dt});o(898992),o(823215),o(672577);var r=o(296540),s=()=>o(662303),n=()=>o(484714),i=()=>o(56366),a=()=>o(401497),l=()=>o(584262),c=()=>o(148307),d=()=>o(857639),u=()=>o(416504),g=()=>o(711901),p=o(474848);const m=(0,o(340498).wt)("googlePlay",{viewBox:"0 0 14 14",svg:(0,p.jsx)("path",{d:"M3.41741,13.7929001 L13.0843,8.42241009 C14.2002,7.80245009 14.2002,6.19755009 13.0843,5.57759009 L3.41741,0.207109087 C2.33284,-0.395426913 1,0.388821087 1,1.62952009 L1,12.3705001 C1,13.6112001 2.33284,14.3954001 3.41741,13.7929001 Z"})});var f=()=>o(517592),h=()=>o(735384),x=()=>o(427704),v=()=>o(677338),S=()=>o(959013),j=()=>o(100622),b=()=>o(284371),y=()=>o(452939),A=()=>o(245981),w=()=>o(339702),M=()=>o(705540),P=()=>o(915086),k=()=>o(730570),I=()=>o(857783),E=()=>o(755636),T=()=>o(435009),_=()=>o(904671),C=()=>o(345913),B=()=>o(482707),D=()=>o(972435),q=()=>o(836251),R=()=>o(437622),W=()=>o(991221),N=()=>o(106694),F=()=>o(684381),L=()=>o(997513),K=()=>o(211212),z=()=>o(133234),U=()=>o(222130),O=()=>o(215152),H=()=>o(20489),V=()=>o(623275),J=()=>o(437487),Y=()=>o(869562),G=()=>o(817411),$=()=>o(962730),X=()=>o(756279),Z=()=>o(351360),Q=()=>o(227440),ee=()=>o(278715),te=()=>o(508496),oe=()=>o(529183),re=()=>o(156061),se=()=>o(990261),ne=()=>o(712505),ie=()=>o(454354),ae=()=>o(749240),le=()=>o(47582),ce=()=>o(704152),de=()=>o(493823),ue=()=>o(297872),ge=()=>o(187485),pe=()=>o(296798),me=()=>o(864943),fe=()=>o(204063),he=()=>o(614505),xe=()=>o(2143),ve=()=>o(125565),Se=()=>o(313786),je=()=>o(908470),be=()=>o(719147),ye=()=>o(21140),Ae=()=>o(374475),we=()=>o(322114),Me=()=>o(426116),Pe=()=>o(994877);function ke(e){const{publicPageData:t,environment:o,flowId:r,store:s,skipClickLogging:n}=e;s.setState({...s.state,didPerformAction:!0}),n||y().Xx(o,{button_name:"join-workspace",flow_id:r});const{currentUserRootStore:i,currentUserSettingsStore:a}=Z().default.state;if(i&&a&&t.spaceId){const e=t.spaceId;Me().DT({environment:o,userRootStore:i,spaceId:e,navigate:!0,analyticsFrom:"page_error",userSettingsStore:a})}}function Ie(e){Pe().SI({environment:e,from:"page_error"})}var Ee=()=>o(126553),Te=()=>o(541258),_e=()=>o(186445),Ce=()=>o(38337),Be=()=>o(719431),De=()=>o(905654),qe=()=>o(589994),Re=()=>o(175947),We=()=>o(224011),Ne=()=>o(948914),Fe=()=>o(802790);function Le(e){let{children:t,isFront:o,style:r={},...s}=e;const{isMobile:i,isTablet:l}=(0,n().Y0)(),c=(0,a().IS)((e=>({wrapper:{width:"100vw",paddingLeft:i?16:30,paddingRight:i?16:30,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",...o?{paddingTop:l?"20vh":"12vh"}:{},...r}})),[o,i,l,r]);return(0,p.jsx)("div",{style:c.wrapper,...s,children:t})}function Ke(){const{isMobile:e,isElectronMac:t,isElectron:o}=(0,n().Y0)(),{isShowingTabBar:r,isFullscreen:s}=He(),i=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",paddingTop:!o||r||s?20:(0,Re().ek)(t),maxWidth:1300,paddingLeft:20,paddingRight:20},text:{fontWeight:b().Wy.medium,fontSize:16}})),[o,t,s,r]);return(0,p.jsxs)("div",{style:i.container,children:[(0,f().A)({width:e?28:30,height:e?28:30,marginRight:10,flexShrink:0}),(0,p.jsx)("div",{style:i.text,children:"Notion"})]})}function ze(){const{isElectron:e,isElectronMac:t}=(0,n().Y0)(),{isShowingTabBar:o,isFullscreen:r}=He(),s=(0,a().IS)((e=>({desktopDragArea:{width:"100%",height:(0,Re().ek)(t),position:"absolute",top:0,left:0}})),[t]);return!e||o||r?null:(0,p.jsx)("div",{className:Ce().sbV,style:s.desktopDragArea})}function Ue(e){let{children:t,style:o={},...r}=e;const{isMobile:s}=(0,n().Y0)(),i=(0,a().IS)((e=>({greeting:{fontSize:s?18:20,marginBottom:10,textAlign:"center",color:e.regularTextColor,fontWeight:b().Wy.medium,maxWidth:350,...o}})),[s,o]);return(0,p.jsx)("div",{style:i.greeting,...r,children:t})}function Oe(){return(0,p.jsx)(Fe().A,{size:48,innerStyle:{maxWidth:280}})}function He(){return(0,i().K8)((()=>({isShowingTabBar:Ne().A.state.isShowingTabBar,isFullscreen:We().A.state.isFullScreen})),[])}function Ve(e){const{sudoModeStore:t,hideChangePermissions:o}=e,s=(0,a().DP)(),l=(0,n().v3)(),c=(0,i().K8)((()=>(0,_e()._m)(l)),[l]),d=(0,i().K8)((()=>Z().default.state.mainEditorCurrentBlockStore),[]),u=(0,i().K8)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),g=(0,i().K8)((()=>null==c?void 0:c.getEmail()),[c]);return(0,r.useEffect)((()=>{d&&Te().bC({environment:l,store:d})}),[l,d]),(0,p.jsxs)("div",{style:{textAlign:"center"},children:[u&&!Boolean(o)?(0,p.jsx)(Je,{sudoModeStore:t}):(0,p.jsx)(Oe,{}),(0,p.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:{marginTop:4},children:(0,p.jsx)(S().sA,{id:"fullPageError.wrongLoggedInUserError.message",defaultMessage:"You’re currently logged in as {currentlyLoggedInUser}",values:{currentlyLoggedInUser:(0,p.jsx)("span",{style:{color:s.regularTextColor},children:g})}})}),(0,p.jsx)(Ye,{...e})]})}function Je(e){let{sudoModeStore:t}=e;const o=(0,a().IS)((e=>({WorkspaceOwnerPermissions:{background:e.cardBackground,borderRadius:4,padding:18,margin:24,width:400},WorkspaceOwnerPermissionsButton:{fontWeight:b().Wy.medium,justifyContent:"center",margin:"18px auto 12px"}})),[]),r=(0,i().K8)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),s=(0,i().O$)(t);return r&&s.privatePageStore&&!s.changePermissionsEnabled?(0,p.jsxs)("div",{style:o.WorkspaceOwnerPermissions,children:[(0,p.jsx)(ve().A,{isMultiline:!0,style:{textAlign:"center"},children:(0,p.jsx)(S().sA,{id:"fullPageError.workspaceOwner.canChangePermissionsMessage",defaultMessage:"As a <b>workspace owner</b>, you can change the permissions of this page to add yourself or others. Any changes will appear in the audit log.",values:{b:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,p.jsx)("b",{children:t})}}})}),(0,p.jsxs)(me().A,{size:"lg",style:o.WorkspaceOwnerPermissionsButton,onClick:()=>t.setState({...t.state,changePermissionsEnabled:!0}),children:[(0,Ee().x)({width:16,height:16,marginRight:6}),(0,p.jsx)(S().sA,{id:"fullPageError.workspaceOwner.canChangePermissionsMessageButton",defaultMessage:"Change permissions"})]})]}):null}function Ye(e){let{loginModalStore:t,loginStore:o,trustedDomain:r}=e;const s=(0,n().v3)();return qe().transactionQueue.hasTasks()?(0,p.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:{marginTop:4},children:(0,p.jsx)(S().sA,{id:"fullPageError.sendMessageForHelp.message",defaultMessage:"<sendmessagelink>Message support</sendmessagelink> for help.",values:{sendmessagelink:e=>(0,p.jsx)(be().A,{onClick:()=>Ie(s),children:e})}})}):(0,p.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:{marginTop:4},children:(0,p.jsx)(S().sA,{id:"fullPageError.wrongAccountRequestAccess.message",defaultMessage:"You might need to <loginlink>log in</loginlink> with a different email.",values:{loginlink:e=>De().T_(s)?(0,p.jsxs)(be().A,{onClick:()=>{t.setState({open:!0})},children:[e,(0,p.jsx)(L().z,{loginModalStore:t,loginStore:o,title:(0,p.jsx)(S().sA,{id:"sidebarSwitcherMultiAccount.addAccount.title",defaultMessage:"Add an account"}),description:(0,p.jsx)(S().sA,{id:"sidebarSwitcherMultiAccount.addAccount.description",defaultMessage:"Use an existing account, or sign up with a new email. Your current account will remain logged in."}),className:Ce().w7$,trustedDomain:r})]}):(0,p.jsx)(be().A,{href:x().JZ.logout,onClick:()=>Be().logout(s),children:e})}})})}var Ge=()=>o(426388);function $e(e){let{buttonStyles:t={}}=e;const o=(0,n().v3)(),r=(0,a().IS)((e=>({LoggedOutFooter:{display:"flex",justifyContent:"center",marginBottom:16,marginTop:16,flexWrap:"wrap",zIndex:1}})),[]);return(0,p.jsxs)("div",{style:r.LoggedOutFooter,children:[(0,p.jsx)(ge().A,{href:"https://www.notion.com/product",external:!0,children:(0,p.jsxs)(de().p,{isGray:!0,...t,children:[(0,Ge().S)({width:16,height:16,marginRight:8}),(0,p.jsx)(S().sA,{id:"fullPageError.whatIsNotionButton.label",defaultMessage:"What is Notion?"})]})}),(0,p.jsx)(de().p,{onClick:()=>Ie(o),...t,style:{marginLeft:4,...t.style},isGray:!0,children:(0,p.jsx)(S().sA,{id:"fullPageError.sendMessageButton.label",defaultMessage:"Message support"})}),(0,p.jsx)(ge().A,{href:x().JZ.termsAndPrivacy,external:!0,style:{marginLeft:4},children:(0,p.jsx)(de().p,{isGray:!0,...t,children:(0,p.jsx)(S().sA,{id:"fullPageError.termsAndPrivacyButton.label",defaultMessage:"Terms"})})})]})}var Xe=()=>o(433052),Ze=()=>o(235921),Qe=()=>o(1130),et=()=>o(144114),tt=()=>o(607859);function ot(e){let{canJoinSpaceWithData:t,color:o,route:r,store:s}=e;const a=(0,n().v3)(),c=(0,i().K8)((()=>{const{currentUserRootStore:e}=Z().default.state;return e&&0===e.getSpaceViewPointers().length}),[]),{isCreatingSpace:d,flowId:u}=(0,i().K8)((()=>{const{isCreatingSpace:e,flowId:t}=s.state;return{isCreatingSpace:e,flowId:t}}),[s]),g=(0,i().K8)((()=>{const{currentUserStore:e}=Z().default.state;return!(null!=e&&e.getOnboardingCompleted())}),[]);return t?(0,p.jsx)(rt,{color:o,size:"lg",onClick:()=>ke({publicPageData:t,environment:a,flowId:u,store:s}),children:(0,p.jsx)(S().sA,{id:"fullPageError.joinSpaceButton.label",defaultMessage:"Join the space"})}):"onboarding"===r.name||g?(0,p.jsx)(rt,{color:o,size:"lg",onClick:()=>function(e,t){y().Xx(e,{button_name:"back-to-onboarding",flow_id:t}),Xe().Aj();const o=tt().default.state;o.isOnboarding?et().up(o)?Qe().sy(e,{type:"new-user",disableRedirectUrl:!0,source:"page_error"}):et().Cy(o)?Qe().sy(e,{type:"create-or-join",disableRedirectUrl:!0,source:"page_error"}):(tt().default.reset(),Ze().A.reset(),T().oo({environment:e,url:x().JZ.root})):(tt().default.reset(),Ze().A.reset(),T().oo({environment:e,url:x().JZ.root}))}(a,u),children:(0,p.jsx)(S().sA,{id:"fullPageError.returnToOnboardingButton.label",defaultMessage:"Back to onboarding"})}):c||d?(0,p.jsx)(rt,{color:o,disabled:d,size:"lg",onClick:()=>async function(e,t,o){y().Xx(e,{button_name:"create-account",flow_id:t});const{currentUserRootStore:r,currentUserStore:s}=Z().default.state;r&&s&&(o.setState({...o.state,isCreatingSpace:!0}),await Qe().Ig(e),o.setState({...o.state,isCreatingSpace:!1}))}(a,u,s),children:(0,p.jsx)(S().sA,{id:"fullPageError.createOrJoinWorkspaceButton.label",defaultMessage:"Create or join a workspace"})}):(0,p.jsx)(rt,{color:o,size:"lg",onClick:()=>function(e,t){if(y().Xx(e,{button_name:"back-to-my-content",flow_id:t}),q().UL(e))return void T().aX(e);const{currentUserRootStore:o,currentUserSettingsStore:r,currentSpaceViewStore:s}=Z().default.state;if(!o||!r)return void T().oo({environment:e,url:x().JZ.root,redirect:!0});if(s)return void Me().tR({environment:e,spaceViewStore:s,userRootStore:o,userSettingsStore:r,pageVisitSource:l().y8.PageError,navigationType:"switchingToOrLoadingSpace"});Me().t9({environment:e,userRootStore:o,userSettingsStore:r,pageVisitSource:l().y8.PageError})}(a,u),children:(0,p.jsx)(S().sA,{id:"fullPageError.backToMyContentButton.label",defaultMessage:"Back to my content"})})}function rt(e){let{color:t,...o}=e;const r=(0,a().DP)();return"blue"===t?(0,p.jsx)(fe().A,{...o}):(0,p.jsx)(me().A,{size:"lg",backgroundColor:r.whiteButtonBackground,...o,style:{fontWeight:b().Wy.medium,height:"auto",...o.style}})}function st(e){let{canRequestAccess:t,pageTitle:o,inSudoModeAndInTrash:r}=e;return t?r?o?(0,p.jsx)(S().sA,{id:"fullPageError.canReqestAccess.inTrash.titleWithPageName",defaultMessage:"No access to {pageTitle} in Trash",values:{pageTitle:o}}):(0,p.jsx)(S().sA,{id:"fullPageError.canRequestAccess.inTrash.title",defaultMessage:"No access to this page in Trash"}):o?(0,p.jsx)(S().sA,{id:"fullPageError.canRequestAccess.titleWithPageName",defaultMessage:"No access to {pageTitle}",values:{pageTitle:o}}):(0,p.jsx)(S().sA,{id:"fullPageError.canRequestAccess.title",defaultMessage:"No access to this page"}):(0,p.jsx)(S().sA,{id:"fullPageError.noAccess.title",defaultMessage:"Page not found"})}const nt={fontWeight:b().Wy.bold},it={display:"flex",justifyContent:"center",marginBottom:16,marginTop:16,flexWrap:"wrap",zIndex:1},at={width:14,height:14,marginRight:6,flexShrink:0},lt={maxWidth:300};function ct(e){let{route:t,publicPageData:o,shouldRedirectFromHome:s}=e;const a=(0,n().v3)(),c=gt(a),d=(0,i().uB)(void 0,re().A),u=(0,i().uB)(void 0,ie().A),g=(0,i().uB)(void 0,oe().Ay),m=(0,i().uB)(void 0,O().A),f=(0,i().uB)(void 0,H().A),h=(0,r.useRef)(!1),x=(0,i().K8)((()=>d.state.flowId),[d]),S=(0,i().K8)((()=>{var e;return null===(e=Z().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id}),[]),j=(0,i().K8)((()=>{var e;return(null===(e=Z().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.isPlaceholderWorkflowTemplateBlock())??!1}),[]),b=(0,i().K8)((()=>d.state.didPerformAction),[d]),y=(0,i().K8)((()=>!Q().A.state.online),[]),A=(0,i().K8)((()=>{var e;const{mainEditorCurrentBlockStore:t}=Z().default.state;return null==t||null===(e=t.getModel())||void 0===e?void 0:e.isNonverifiedContentClassification()}),[]);(0,r.useEffect)((()=>{ne().default.state.open&&k().J(ne().default.state.presenceStore,a,se().o,ne().default.state.targetStore),k().J(Z().default.state.presenceStore,a,se().uk,Z().default.state.mainEditorCurrentBlockStore),Y().cancelSidebarInitialRenderLog()}),[a]),(0,r.useEffect)((()=>{if(!h.current&&(h.current=!0,P().setInitialRenderCompleted(),s&&async function(e){let{environment:t,flowId:o}=e;const r=Z().default.state.currentSpaceViewStore;if(!r)return;pt("invalid_home_block",o,t);const s=await(0,R().zd)(t,r);s&&I().uK({environment:t,store:s,openInNew:void 0,templateGalleryItem:void 0,projectManagementLaunch:!1,pageVisitSource:l().y8.PersonalHomeErrorRedirect})}({environment:a,flowId:x}),gt(a)||(0,v().$P)(window.location.href),a.device.isElectron||a.mobileNative)){const e=null==o?void 0:o.requireInterstitial;if(e){const t=e+window.location.hash;E().f({environment:a,url:t}),q().UL(a)?T().aX(a):M().closeTab()}}}),[a,x,null==o?void 0:o.requireInterstitial,s]);const w=(0,i().K8)((()=>Z().default.state.currentSpaceStore),[]);return(0,r.useEffect)((()=>{_().B({environment:a,sudoModeStore:u,pageBlockId:S,currentSpaceStore:w})}),[a,S,u,w]),b?null:y?(0,p.jsx)(bt,{store:d,sudoModeStore:u,loginModalStore:m,loginStore:f}):"teamsInvite"===t.name&&c?(0,p.jsx)(_t,{publicPageData:o,route:t,store:d,sudoModeStore:u,inviteTargetsStore:g,loginModalStore:m,loginStore:f,source:"teamsInvite",canJoinSpace:!0}):"initiateExternalAuthenticationFromDesktop"===t.name?(0,p.jsx)(Pt,{route:t,store:d,sudoModeStore:u,loginModalStore:m,loginStore:f}):j?(0,p.jsx)(Dt,{route:t,store:d}):o?o&&"onboarding"===t.name?(0,p.jsx)(_t,{publicPageData:o,route:t,store:d,sudoModeStore:u,inviteTargetsStore:g,loginModalStore:m,loginStore:f,source:"onboarding",canJoinSpace:!1}):null!=o&&o.spaceName?A&&o.requireInterstitial?(0,p.jsx)(Dt,{route:t,store:d}):o.requireInterstitial?(0,p.jsx)(yt,{href:o.requireInterstitial+window.location.hash,urlToDisplay:o.requireInterstitial,store:d}):A?(0,p.jsx)(Mt,{route:t,store:d}):c?(0,p.jsx)(qt,{route:t,publicPageData:o,pageErrorStore:d,sudoModeStore:u,inviteTargetsStore:g,loginModalStore:m,loginStore:f}):(0,p.jsx)(wt,{store:d,publicPageData:o}):(0,p.jsx)(Dt,{route:t,store:d}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ze,{}),(0,p.jsx)(G().A,{skipFadeinDelay:!0})]})}function dt(){return(0,f().A)({width:50,height:50,marginBottom:16})}function ut(e){let{inviteeEmail:t}=e;return t?(0,p.jsx)(S().sA,{id:"signupPage.subtitle.invitationVersion",defaultMessage:"Please check {invitee_email} for your temporary login code.",values:{invitee_email:(0,p.jsx)("b",{children:t})}}):null}function gt(e){return!!e.currentUser.id}function pt(e,t,o){y().xn(o,{type:e,flow_id:t})}function mt(e){let{environment:t,currentRoute:o}=e;return(0,r.useEffect)((()=>{T().oo({environment:t,url:`/home?p=${o.peekViewBlockId}&pm=${o.peekMode}`})}),[t,o]),null}function ft(e){let{isElectron:t,publicPageData:o,showInvitationVersion:r,inviterName:n,greetingStyle:i,iconBoxInitialStyle:a,trustedDomain:l}=e;const c=(0,S().tz)(),d=Boolean(l)&&"none"===o.publicAccessRole;return(0,p.jsxs)(p.Fragment,{children:[t&&(0,p.jsx)(Se().A,{title:c.formatMessage({defaultMessage:"Log in",id:"errorPage.loggedOutWorkspace.title"})}),r?(0,p.jsx)("div",{style:{fontSize:28,fontWeight:700,maxWidth:358,letterSpacing:.364,lineHeight:1.2,textAlign:"center",fontFamily:b().vc(s().locale).sans},children:n?(0,p.jsx)("div",{children:(0,p.jsx)(S().sA,{id:"signupPage.title.showInvitationVersion",defaultMessage:"Verify your email to accept {inviter_name}'s invite",values:{inviter_name:n}})}):(0,p.jsx)("div",{children:(0,p.jsx)(S().sA,{id:"signupPage.title.showInvitationVersion.noInviterName",defaultMessage:"Verify your email to accept the invite"})})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Ae().A,{type:Ae().H.NoAccess,publicPageData:o,iconBoxInitialStyle:a}),(0,p.jsx)(Ue,{style:i,children:d?(0,p.jsx)(S().sA,{id:"fullPageError.domainSharingPage.message",defaultMessage:"Sign in to view this shared page"}):(0,p.jsx)(S().sA,{id:"fullPageError.improveLoggedOutLandingExp.message",defaultMessage:"Sign in to see this page in {workspaceName}",values:{workspaceName:(0,p.jsx)("span",{style:nt,children:o.spaceName})}})})]})]})}function ht(){const e=(0,n().v3)();return(0,p.jsx)("div",{style:it,children:(0,p.jsx)(ve().A,{isSmall:!0,isSecondaryColor:!0,isMultiline:!1,style:{textAlign:"center",marginBottom:18,maxWidth:440},children:(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsx)(S().sA,{id:"fullPageError.somethingWrong.label",defaultMessage:"Something wrong?"}),(0,p.jsx)(ge().A,{onClick:()=>Ie(e),style:{textDecoration:"underline",paddingLeft:"4px"},children:(0,p.jsx)(S().sA,{id:"fullPageError.reportAProblem.label",defaultMessage:"Report a problem"})})]})})})}function xt(e){let{sudoModeStore:t,inviteTargetsStore:o}=e;const r=(0,a().DP)(),s=(0,i().K8)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),n=(0,i().O$)(t);return s&&n.privatePageStore&&n.changePermissionsEnabled?(0,p.jsx)("div",{style:{textAlign:"left",borderRadius:4,background:r.modalBackground,position:"relative",boxShadow:r.shadowMD,width:V().$D,margin:"24px auto"},children:(0,p.jsx)(B().k,{store:n.privatePageStore,sudoModeStore:t,inviteTargetsStore:o,location:"no_access_page",onClose:()=>J().Ay.reset()})}):null}function vt(e){const t=e.state.privatePageStore;if(!e.shouldUserHaveAccessToPrivatePageBlock()||!t)return;const o=t.getModel();if(!o)return;const r=o.getRenderTitleWithPlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,u().P)(),intl:D().A.getIntl()}),s=o.getRenderIcon({getRecordModel:t.getRecordModel});return(0,p.jsxs)(p.Fragment,{children:[s&&(0,p.jsx)(he().A,{isEmptyPage:!0,disabled:!0,icon:s,size:24,style:{display:"inline-block",marginRight:4}}),r&&(0,p.jsx)("span",{children:r})]})}function St(e){let{sudoModeStore:t}=e;const o=(0,a().DP)(),r=(0,i().K8)((()=>vt(t)),[t]),s=(0,i().K8)((()=>{var e;return null===(e=Z().default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]);return(0,p.jsxs)("div",{style:{background:o.cardBackground,borderRadius:4,padding:18,margin:"24px auto 0",width:400},children:[(0,p.jsx)(Ue,{style:{fontWeight:b().Wy.semibold,marginBottom:6},children:r?(0,p.jsx)(S().sA,{id:"fullPageError.changePermissions.titleWithPageName",defaultMessage:"Change permissions for {pageTitle}",values:{pageTitle:r}}):(0,p.jsx)(S().sA,{id:"fullPageError.changePermissions.title",defaultMessage:"Change permissions for this page"})}),(0,p.jsx)(ve().A,{isMultiline:!0,style:{textAlign:"center"},children:s?(0,p.jsx)(S().sA,{id:"fullPageError.workspaceOwner.changePermissions.descriptionWithSpaceName",defaultMessage:"As a workspace owner for <b>{spaceName}</b>, you can change the permissions of this page.",values:{b:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,p.jsx)("b",{children:t})},spaceName:s}}):(0,p.jsx)(S().sA,{id:"fullPageError.workspaceOwner.changePermissions.description",defaultMessage:"As an owner of this workspace, you can change the permissions of this page.",values:{b:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,p.jsx)("b",{children:t})}}})})]})}function jt(e){let{publicPageData:t,sudoModeStore:o,inSudoModeAndInTrash:r}=e;const s=(0,a().DP)(),n=(0,i().K8)((()=>vt(o)),[o]),l=Boolean(t.canRequestAccess);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{children:dt()}),(0,p.jsx)(Ue,{style:{fontWeight:b().Wy.semibold,marginBottom:6},children:(0,p.jsx)(st,{canRequestAccess:l,pageTitle:n,inSudoModeAndInTrash:r})}),(0,p.jsx)(Ue,{style:{color:s.mediumTextColor,fontWeight:b().Wy.regular,lineHeight:1.4},children:l?r?(0,p.jsx)(S().sA,{id:"fullPageError.pageInTrash.message",defaultMessage:"As a <bold>workspace owner</bold>, you can restore this page to update access to it",values:{bold:e=>(0,p.jsx)("b",{children:e}),br:(0,p.jsx)("br",{})}}):(0,p.jsx)(S().sA,{id:"fullPageError.canRequestAccess.message",defaultMessage:"You can access this page if someone approves your request."}):(0,p.jsx)(S().sA,{id:"fullPageError.cannotRequestAccess.message",defaultMessage:"You don't have permission to access this page."})})]})}function bt(e){let{store:t,sudoModeStore:o,loginModalStore:s,loginStore:i}=e;const a=(0,n().v3)();return(0,r.useEffect)((()=>{pt("offline",t.state.flowId,a),(0,w().j)(a,{type:"page_error"})}),[t,a]),(0,p.jsxs)(Le,{children:[(0,p.jsx)(ze,{}),(0,p.jsxs)(Ue,{children:[(0,p.jsx)(S().sA,{id:"fullPageError.offlineError.message",defaultMessage:"Oops, you seem to be offline. Please go online to view this page."}),(0,p.jsx)(Ve,{sudoModeStore:o,loginModalStore:s,loginStore:i})]})]})}function yt(e){let{href:t,urlToDisplay:o,store:s}=e;const i=(0,n().v3)();return(0,r.useEffect)((()=>pt("incorrect_domain_interstitial_block",s.state.flowId,i)),[s,i]),(0,p.jsxs)("div",{style:{position:"relative",height:"100%",width:"100%"},children:[(0,p.jsxs)(Le,{style:{height:"100%"},children:[(0,p.jsx)(ze,{}),(0,p.jsx)(Ue,{style:{maxWidth:"240px"},children:(0,p.jsx)(S().sA,{id:"fullPageError.publicDomainInterstitial.title",defaultMessage:"Continue to external site by following the link below"})}),(0,p.jsx)(ve().A,{isSmall:!1,isSecondaryColor:!0,isMultiline:!0,style:{textAlign:"center",marginBottom:18,maxWidth:440},children:(0,p.jsx)(ge().A,{href:t,external:!1,style:{textDecoration:"underline",color:j().Ay.blue,overflowWrap:"anywhere"},children:o})}),(0,p.jsxs)(ye().Ye,{gap:8,children:[(0,p.jsx)(me().A,{size:"lg",onClick:()=>{d().log({level:"info",from:"PageError",type:"incorrectDomainInterstitial",data:{miscDataToConvertToString:{action:"navigateBack",canGoBack:q().UL(i)}}}),q().UL(i)?T().aX(i):T().oo({environment:i,url:"/home"})},children:(0,p.jsx)(S().sA,{id:"PageError.IncorrectDomainInterstitialButton.back.label",defaultMessage:"Go back"})}),(0,p.jsx)(de().p,{isLightGray:!0,onClick:()=>{d().log({level:"info",from:"PageError",type:"incorrectDomainInterstitial",data:{miscDataToConvertToString:{action:"navigateHome"}}}),T().oo({environment:i,url:"/home"})},children:(0,p.jsx)(S().sA,{id:"PageError.IncorrectDomainInterstitialButton.home.label",defaultMessage:"Take me Home"})})]})]}),(0,p.jsx)("div",{style:{position:"fixed",width:"100%",bottom:0},children:(0,p.jsx)(ht,{})})]})}function At(e){const t=(0,a().IS)((t=>{const o=e.themeOverride??t;return{backgroundImg:{position:"absolute",top:230,WebkitMask:"linear-gradient(to bottom, rgba(0,0,0,1) 50%, rgba(0,0,0,0) 100%)",zIndex:0},wrapper:{boxShadow:o.shadowMD,zIndex:1,border:`1px ${o.stroke.primary}`,background:o.modalBackground,borderRadius:20,display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",padding:40},loginDisclaimer:{color:o.text.secondary,maxWidth:400}}}),[e.themeOverride]);return e.isEnabled?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("img",{src:c().A.images.onboarding.skeletonPageSvg,style:t.backgroundImg}),(0,p.jsx)("div",{style:t.wrapper,children:e.children}),(0,p.jsx)(F().z,{style:t.loginDisclaimer,themeOverride:e.themeOverride})]}):(0,p.jsx)(p.Fragment,{children:e.children})}function wt(e){var t;let{publicPageData:o,store:s}=e;const l=(0,a().DP)(),c=(0,n().v3)(),{device:d}=c,{inviteeEmail:u,inviterName:f,showInvitationVersion:h}=(0,i().K8)((()=>{const{inviteeEmail:e,inviterName:t}=U().A.state;return{inviteeEmail:e,inviterName:t,showInvitationVersion:z().A.isTemporaryPasscode()&&e===z().A.state.email}}),[]),b=(0,j().O4)({theme:"light"}),y=null!==(t=o.domainLinkSharingEnabledDomains)&&void 0!==t&&t.length&&"none"===o.publicAccessRole?o.domainLinkSharingEnabledDomains[0]:void 0;(0,r.useEffect)((()=>{pt("team_login",s.state.flowId,c),(0,v().wA)(window.location.href)}),[s,c]);const A=(0,i().K8)((()=>!(d.isMobile||d.isElectron||h)),[d.isElectron,d.isMobile,h]),w=(0,i().K8)((()=>A?{paddingTop:"5vh"}:{}),[A]),M=(0,i().K8)((()=>z().A.isMfa()),[]),P=(0,p.jsx)(ue().A,{capture:!0,allowMobileAutoScroll:!0,render:e=>(0,p.jsx)(je().A,{analyticsName:"team_login",hideNavItems:!0,hideNotificationBanner:!0,children:(0,p.jsxs)(Le,{isFront:!0,style:w,...e,children:[(0,p.jsxs)(At,{isEnabled:A,themeOverride:b,children:[(0,p.jsx)(ft,{isElectron:c.device.isElectron,publicPageData:o,showInvitationVersion:h,inviterName:f,greetingStyle:{color:b.regularTextColor,overflow:"hidden",textOverflow:"ellipsis"},iconBoxInitialStyle:{background:b.regularDividerColor,color:b.mediumTextColor},trustedDomain:y}),u&&h?(0,p.jsx)("div",{style:{fontSize:"18px",fontWeight:400,width:"100%",maxWidth:358,textAlign:"center",color:"#535353",lineHeight:"145.34%",opacity:.78,marginBottom:24},children:(0,p.jsx)(ut,{inviteeEmail:u})}):null,M?(0,p.jsx)(K().A,{loginStore:z().A}):(0,p.jsx)(N().A,{emailLabelType:"email",style:{...lt},emailPasscodePlaceholderType:h?"paste_code":"enter_code",emailInputAutoFocus:!0,from:"pageError",loginStore:z().A,showInvitationVersion:h,isSignup:h,themeOverride:b,disableDisclaimer:A})]}),d.isMobile&&!d.isMobileNative&&!h&&(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)("div",{style:{height:1,width:"100vw",background:l.regularDividerColor,marginTop:36,marginBottom:36}}),(0,p.jsxs)(fe().A,{style:{width:280},size:"lg",onClick:()=>{T().eG({url:window.location.href,environment:c})},children:[d.isIOS?(0,g().L)(at):m(at),(0,p.jsx)(S().sA,{id:"fullPageError.openInMobileAppButton.label",defaultMessage:"Open in mobile app"})]}),(0,p.jsx)(pe().A,{href:d.isIOS?x().JZ.appStore:x().JZ.playStore,external:!0,innerStyle:{marginTop:16},children:(0,p.jsx)(ve().A,{isSmall:!0,style:{textDecoration:"underline",fontSize:14,color:b.mediumTextColor},children:(0,p.jsx)(S().sA,{id:"fullPageError.downloadMobileAppButton.label",defaultMessage:"Get mobile app"})})})]}),(0,p.jsx)($e,{buttonStyles:{iconStyle:{fill:b.mediumTextColor},style:{color:b.mediumTextColor},pressedStyle:{background:b.buttonPressedBackground}}})]})})});return c.device.isMobileNative?(0,p.jsx)(xe().H,{type:X().A.Y,style:{width:"100%",height:"100%",overflow:"auto",WebkitOverflowScrolling:"touch"},children:P}):P}function Mt(e){let{route:t,store:o}=e;const s=(0,n().v3)(),i=gt(s);return(0,r.useEffect)((()=>{pt("content_classification_block",o.state.flowId,s)}),[s,o]),(0,p.jsxs)(Le,{children:[(0,p.jsx)(ze,{}),(0,p.jsx)(Ae().A,{type:Ae().H.Unsafe}),(0,p.jsx)(Ue,{children:(0,p.jsx)(S().sA,{id:"fullPageError.unsafePageError.title",defaultMessage:"This page has been flagged as unsafe"})}),(0,p.jsx)(ve().A,{isSmall:!1,isSecondaryColor:!0,isMultiline:!0,style:{textAlign:"center",marginBottom:18,maxWidth:440},children:(0,p.jsx)(S().sA,{id:"fullPageError.unsafePageError.message",defaultMessage:"This page may contain spam, phishing, illegal, or inappropriate content. If you received this link from an unknown source, we suggest you to close this tab. <proceedanywaylink>Proceed anyway</proceedanywaylink>",values:{proceedanywaylink:e=>(0,p.jsx)(be().A,{onClick:()=>function(e){const{mainEditorCurrentBlockStore:t}=Z().default.state;t&&(ee().A.bypassPage(t.id),y().bL(e))}(s),children:e})}})}),i?(0,p.jsx)(ot,{route:t,store:o,color:"blue"}):(0,p.jsx)($e,{})]})}function Pt(e){let{route:t,store:o,sudoModeStore:s,loginModalStore:i,loginStore:a}=e;const l=(0,n().v3)(),{device:c}=l,d=gt(l);return(0,r.useEffect)((()=>{pt("oauth_no_access",o.state.flowId,l)}),[l,o]),(0,p.jsxs)("div",{children:[(0,p.jsx)(ze,{}),(0,p.jsx)(Ke,{}),(0,p.jsxs)(Le,{isFront:!0,style:{marginTop:c.isMobile?0:"12vh",justifyContent:"start"},children:[(0,p.jsx)(Ae().A,{type:Ae().H.NotFound}),(0,p.jsx)(Ue,{children:(0,p.jsx)(S().sA,{id:"fullPageError.cannotRequestAccess.message",defaultMessage:"You don't have permission to access this page."})}),d&&(0,p.jsx)(ot,{route:t,store:o,color:"blue"}),(0,p.jsx)(Ve,{sudoModeStore:s,loginModalStore:i,loginStore:a})]})]})}function kt(e){let{publicPageData:t,sudoModeStore:o,inSudoModeAndInTrash:s,route:a,store:l}=e;const c=(0,i().K8)((()=>l.state.flowId),[l]),d=(0,n().v3)(),{spaceId:u,pageId:g}={...t},m=(0,r.useCallback)((async()=>{const{currentSpaceStore:e}=Z().default.state,t=o.state.privatePageStore;e&&t&&(await C().iN({environment:d,block:t,spaceId:t.pointer.spaceId||e.id,from:"page_error"}),o.reset())}),[o,d]);return t&&t.canRequestAccess&&u&&g?(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:8},children:[s?(0,p.jsx)(fe().A,{onClick:m,size:"lg",children:(0,p.jsx)(S().sA,{id:"fullPageError.pageInTrash.restoreButton",defaultMessage:"Restore page"})}):(0,p.jsx)(we().A,{type:"current-actor-to-block",block:{id:g,spaceId:u},flowId:c}),(0,p.jsx)(ot,{route:a,store:l,color:"white"})]}):(0,p.jsx)(ot,{route:a,store:l,color:"blue"})}function It(e){let{route:t,store:o}=e;const r=(0,a().DP)(),s=(0,i().K8)((()=>o.state.flowId),[o]);if("teamsInvite"!==t.name)return(0,p.jsx)(ot,{route:t,store:o,color:"blue"});const{teamId:n}=t;return n?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Ue,{style:{color:r.mediumTextColor,fontWeight:b().Wy.regular,lineHeight:1.4},children:(0,p.jsx)(S().sA,{id:"fullPageError.canRequestWorkspaceAccess.message",defaultMessage:"You can access this workspace if someone approves your request."})}),(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,p.jsx)("div",{children:(0,p.jsx)(we().A,{type:"current-actor-to-space-via-team",teamId:n,flowId:s})}),(0,p.jsx)("div",{style:{width:10,height:10}}),(0,p.jsx)(ot,{route:t,store:o,color:"white"})]})]}):(0,p.jsx)(ot,{route:t,store:o,color:"blue"})}function Et(e){let{route:t,store:o,sudoModeStore:r,loginModalStore:s,loginStore:n,trustedDomain:i}=e;const l=(0,a().DP)();return(0,p.jsxs)(Le,{children:[(0,p.jsx)(ze,{}),(0,p.jsx)("div",{children:dt()}),(0,p.jsx)(Ue,{style:{fontWeight:b().Wy.semibold,marginBottom:6},children:(0,p.jsx)(S().sA,{id:"fullPageError.domainSharingPage.title",defaultMessage:"No access to this shared page"})}),(0,p.jsx)(Ue,{style:{color:l.mediumTextColor,fontWeight:b().Wy.regular,lineHeight:1.4,marginBottom:20},children:(0,p.jsx)(S().sA,{id:"fullPageError.domainSharingPage.messageV2",defaultMessage:"You can access this page by signing in to an account with a <b>@{trustedDomain}</b> email address.",values:{trustedDomain:i,b:e=>(0,p.jsx)("b",{children:e})}})}),(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,p.jsx)("div",{children:(0,p.jsxs)(fe().A,{size:"lg",onClick:()=>s.setState({open:!0}),children:[(0,p.jsx)(S().sA,{id:"fullPageError.domainSharingPage.login.",defaultMessage:"Log in"}),(0,p.jsx)(L().z,{loginModalStore:s,loginStore:n,title:(0,p.jsx)(S().sA,{id:"sidebarSwitcherMultiAccount.addAccount.title",defaultMessage:"Add an account"}),description:(0,p.jsx)(S().sA,{id:"sidebarSwitcherMultiAccount.addAccount.descriptionV2",defaultMessage:"Log in/sign up with a @makenotion.com email address. Your current account will remain logged in."}),className:"notion-space-settings",trustedDomain:i})]})}),(0,p.jsx)("div",{style:{width:10,height:10}}),(0,p.jsx)(ot,{route:t,store:o,color:"white"})]}),(0,p.jsx)(Ve,{sudoModeStore:r,loginModalStore:s,loginStore:n,trustedDomain:i})]})}function Tt(e){let{publicPageData:t,route:o,store:r,sudoModeStore:s,inviteTargetsStore:a,loginModalStore:l,loginStore:c}=e;const d=(0,n().v3)(),u=(0,i().K8)((()=>s.state.loading),[s]),g=(0,i().K8)((()=>s.shouldUserHaveAccessToPrivatePageBlock&&s.shouldUserHaveAccessToPrivatePageBlock()&&s.state.changePermissionsEnabled),[s]),m=(0,i().K8)((()=>s.shouldUserHaveAccessToPrivatePageBlock()),[s]),f=(0,i().K8)((()=>{if(!m||!te().default.checkGate({gateName:"cdrr_deleted_from_trash_view"}))return!1;const e=s.state.privatePageStore;return!!e&&(e.pathHasDeletedPermission()&&!e.pathHasPurgedDeletedPermission())}),[s,m]),h=(0,i().K8)((()=>Boolean(s.state.privatePageStore&&s.state.privatePageStore.pathIsDead()&&te().default.checkGate({gateName:"cdrr_deleted_from_trash_view"}))),[s]);return u?(0,p.jsx)(G().A,{skipFadeinDelay:!0}):f?(0,p.jsxs)(Le,{children:[(0,p.jsx)(ze,{}),(0,p.jsx)(Wt,{isElectron:d.device.isElectron}),(0,p.jsx)(Bt,{sudoModeStore:s,route:o,store:r}),(0,p.jsx)(Ve,{sudoModeStore:s,loginModalStore:l,loginStore:c,hideChangePermissions:!0})]}):(0,p.jsxs)(Le,{children:[(0,p.jsx)(ze,{}),(0,p.jsx)(Wt,{isElectron:d.device.isElectron}),g?(0,p.jsx)(St,{sudoModeStore:s}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(jt,{sudoModeStore:s,publicPageData:t,inSudoModeAndInTrash:h}),(0,p.jsx)(kt,{publicPageData:t,sudoModeStore:s,inSudoModeAndInTrash:h,route:o,store:r})]}),m?(0,p.jsx)(xt,{sudoModeStore:s,inviteTargetsStore:a}):null,(0,p.jsx)(Ve,{sudoModeStore:s,loginModalStore:l,loginStore:c,hideChangePermissions:h})]})}function _t(e){const t=(0,n().v3)(),{source:o,canJoinSpace:s,publicPageData:i,route:a,store:l,sudoModeStore:c,inviteTargetsStore:d,loginModalStore:u,loginStore:g}=e;if((0,r.useEffect)((()=>{"onboarding"===o?pt("onboarding_error",l.state.flowId,t):"teamsInvite"===o?pt("team_invite_no_access",l.state.flowId,t):i&&pt("team_no_access",l.state.flowId,t)}),[i,o,l,t]),i){var m;const e=null!==(m=i.domainLinkSharingEnabledDomains)&&void 0!==m&&m.length?i.domainLinkSharingEnabledDomains[0]:void 0;return e?(0,p.jsx)(Et,{route:a,store:l,sudoModeStore:c,loginModalStore:u,loginStore:g,trustedDomain:e}):(0,p.jsx)(Tt,{publicPageData:i,route:a,store:l,sudoModeStore:c,inviteTargetsStore:d,loginModalStore:u,loginStore:g})}return(0,p.jsxs)(Le,{children:[(0,p.jsx)(ze,{}),(0,p.jsx)(Wt,{isElectron:t.device.isElectron}),(0,p.jsx)("div",{children:dt()}),(0,p.jsx)(Ue,{children:s?(0,p.jsx)(S().sA,{id:"fullPageError.notInWorkspace.message",defaultMessage:"You are not in this workspace."}):(0,p.jsx)(S().sA,{id:"fullPageError.accessNotAllowed.message",defaultMessage:"You do not have access to this page."})}),"teamsInvite"===o?(0,p.jsx)(It,{route:a,store:l}):(0,p.jsx)(ot,{route:a,store:l,color:"blue",canJoinSpaceWithData:s?i:void 0}),(0,p.jsx)(Ve,{sudoModeStore:c,loginModalStore:u,loginStore:g})]})}function Ct(e){let{publicPageData:t,route:o,store:s,sudoModeStore:i,inviteTargetsStore:a,loginModalStore:l,loginStore:c}=e;const d=(0,n().v3)();return(0,r.useEffect)((()=>{pt("team_page_no_access",s.state.flowId,d)}),[d,s]),(0,p.jsx)(Tt,{publicPageData:t,route:o,store:s,sudoModeStore:i,inviteTargetsStore:a,loginModalStore:l,loginStore:c})}function Bt(e){let{sudoModeStore:t,route:o,store:s}=e;const l=(0,n().v3)(),c=(0,i().K8)((()=>t.state.privatePageStore),[t]),d=(0,i().K8)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),u=(0,i().O$)(ae().subscriptionDataStoreInstance),g=(0,W().T)({subscriptionData:u}),m=(0,r.useCallback)((()=>{c&&C().tz({environment:l,blockStore:c,handleSuccess:()=>{A().L(l,{pageId:c.id,from:"page"}),T().VP({environment:l,blocks:[c]})}})}),[l,c]),f=function(e){const{device:t}=e;return(0,a().IS)((e=>({buttonContainer:{display:"flex",flexDirection:"row",marginBottom:18},container:{display:"flex",alignItems:"center",flexDirection:"column"},heading:{fontSize:t.isMobile?18:22,textAlign:"center",color:e.regularTextColor,marginBottom:32},subheading:{fontSize:t.isMobile?18:17,marginBottom:20,textAlign:"center",color:e.mediumTextColor,fontWeight:b().Wy.regular,lineHeight:1.4},restoreButton:{marginRight:10},permanentlyDeleteButton:{display:"flex",color:e.text.secondary,fontSize:14},trashIcon:{width:14,marginRight:4}})),[t])}(l),x=(0,r.useCallback)((e=>(0,p.jsx)(fe().A,{...e,size:"lg",style:f.restoreButton,children:(0,p.jsx)(S().sA,{id:"fullPageError.deletedFromTrashPage.restoreButton",defaultMessage:"Restore page"})})),[f]),v=(0,i().K8)((()=>vt(t)),[t]);return c&&d?(0,p.jsxs)("div",{style:f.container,children:[(0,p.jsx)("div",{children:dt()}),(0,p.jsx)("div",{style:f.heading,children:(0,p.jsx)(S().sA,{id:"fullPageError.deletedFromTrashPage.titleWithPageName",defaultMessage:"<bold>{pageTitle}</bold> has been deleted from the Trash",values:{pageTitle:v,bold:e=>(0,p.jsx)("b",{children:e})}})}),(0,p.jsx)("div",{style:f.subheading,children:(0,p.jsx)(S().sA,{id:"fullPageError.deletedFromTrashPage.message",defaultMessage:"As a workspace owner, you can restore this page. <br>This will be recorded in the audit log.</br>",values:{br:e=>(0,p.jsx)("div",{children:e})}})}),(0,p.jsxs)("div",{style:f.buttonContainer,children:[(0,p.jsx)(le().V,{renderPopupOrigin:x,blockStore:c,environment:l,placementToOrigin:$().W.Bottom,includeNonRestoreActions:!1,getValidDeletedPermissions:g,from:"retainedPage"}),(0,p.jsx)(ot,{route:o,store:s,color:"white"})]}),(0,p.jsxs)(ce().A,{style:f.permanentlyDeleteButton,onClick:m,children:[(0,h().I)(f.trashIcon),(0,p.jsx)(S().sA,{id:"fullPageError.deletedFromTrashPage.permanentlyDeleteButton",defaultMessage:"Permanently delete"})]})]}):null}function Dt(e){let{store:t,route:o}=e;const s=(0,n().v3)(),{device:i}=s,a=gt(s);return(0,r.useEffect)((()=>pt("404",t.state.flowId,s)),[t,s]),(0,p.jsxs)("div",{children:[(0,p.jsx)(ze,{}),(0,p.jsx)(Ke,{}),(0,p.jsxs)(Le,{isFront:!0,style:{marginTop:i.isMobile?0:"12vh",justifyContent:"start"},children:[(0,p.jsx)(Ae().A,{type:Ae().H.NotFound}),(0,p.jsx)(Ue,{children:(0,p.jsx)(S().sA,{id:"fullPageError.contentDoesNotExist.title",defaultMessage:"This content does not exist"})}),a?(0,p.jsx)(ot,{route:o,store:t,color:"blue"}):(0,p.jsx)($e,{}),(0,p.jsx)(Oe,{}),(0,p.jsx)(ve().A,{isSmall:!0,style:{textAlign:"center"},children:(0,p.jsx)(S().sA,{id:"fullPageError.contentDoesNotExist.message",defaultMessage:"Having trouble? <helplink>Message support</helplink>",values:{helplink:e=>(0,p.jsx)(be().A,{onClick:()=>Ie(s),children:e})}})})]})]})}function qt(e){let{route:t,publicPageData:o,pageErrorStore:r,sudoModeStore:s,inviteTargetsStore:a,loginModalStore:l,loginStore:c}=e;const d=(0,n().v3)(),{allStoresLoaded:u,foundSpaceView:g}=(0,i().K8)((()=>{const{currentUserRootStore:e}=Z().default.state;if(!e||!e.isReady())return{allStoresLoaded:!1,foundSpaceView:null};const t=(null==e?void 0:e.getSpaceViewStores())||[];if(!t.every((e=>e.isReady())))return{allStoresLoaded:!1,foundSpaceView:null};return{allStoresLoaded:!0,foundSpaceView:t.find((e=>e.getSpaceId()===o.spaceId))}}),[o.spaceId]);return u?g&&"page"===t.name?t.peekViewBlockId?(0,p.jsx)(mt,{environment:d,currentRoute:t}):(0,p.jsx)(Ct,{publicPageData:o,route:t,store:r,sudoModeStore:s,inviteTargetsStore:a,loginModalStore:l,loginStore:c}):o.canJoinSpace?"space"===t.name?(0,p.jsx)(Rt,{publicPageData:o,pageErrorStore:r}):(0,p.jsx)(_t,{publicPageData:o,route:t,store:r,sudoModeStore:s,inviteTargetsStore:a,loginModalStore:l,loginStore:c,source:"workspace",canJoinSpace:!0}):(0,p.jsx)(_t,{publicPageData:o,route:t,store:r,sudoModeStore:s,inviteTargetsStore:a,loginModalStore:l,loginStore:c,source:"workspace",canJoinSpace:!1}):null}function Rt(e){let{publicPageData:t,pageErrorStore:o}=e;const s=(0,n().v3)(),a=(0,i().K8)((()=>o.state.flowId),[o]);return(0,r.useEffect)((()=>{ke({publicPageData:t,environment:s,flowId:a,store:o,skipClickLogging:!0})}),[t,s,a,o]),null}function Wt(e){let{isElectron:t}=e;const o=(0,S().tz)();return t?(0,p.jsx)(Se().A,{title:o.formatMessage({defaultMessage:"No access",id:"errorPage.workspaceNoAccess.title"})}):(0,p.jsx)(p.Fragment,{})}}}]);