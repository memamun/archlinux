"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[56353],{881489:(e,t,i)=>{i.r(t),i.d(t,{default:()=>T});var n=i(296540),o=()=>i(484714),l=()=>i(543906),a=()=>i(427704),r=()=>i(939768),s=()=>i(857639),c=()=>i(449506);var d=()=>i(555267),u=()=>i(56366),m=()=>i(401497),g=()=>i(750559),h=()=>i(68263),p=()=>i(829126),f=()=>i(959013),y=()=>i(100622),x=()=>i(284371),v=()=>i(780054),b=()=>i(864943),C=()=>i(204063),j=()=>i(614505),A=()=>i(719147),k=()=>i(863513),w=i(474848);function S(e){const{confirmationData:t}=e,{clientName:i,clientCapability:l}=t,a=(0,n.useMemo)((()=>!i||!(null!=l&&l.read_user_email_name_photo)),[i,l]),r=function(e){const{WindowSizeStore:t}=e.environment,i=(0,u().K8)((()=>t.state.width>500),[t]),n=(0,u().K8)((()=>t.state.height<900),[t]);return(0,m().IS)((e=>({layoutContainer:{height:"100%",overflow:"auto",backgroundColor:i?y().Ay.frontCreamBackground:y().Ay.white},pageContainer:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},contentBox:{width:"500px",minHeight:"480px",borderRadius:5,backgroundColor:y().Ay.white,boxShadow:i?e.shadowSM:"none",display:"flex",flexDirection:"column",fontSize:x().J.UIRegular.desktop,marginTop:n?16:i?"calc((100vh - 900px) / 2)":0,marginBottom:40,transition:"all 0.2s ease"},contentBody:{paddingLeft:40,paddingRight:40,paddingTop:25,paddingBottom:25,flex:1,display:"flex",flexDirection:"column"}})),[i,n])}({environment:(0,o().v3)()});return(0,w.jsx)("div",{style:r.layoutContainer,children:(0,w.jsx)("div",{style:r.pageContainer,children:(0,w.jsxs)("div",{style:r.contentBox,children:[(0,w.jsx)(k().A,{disableAccountSwitcher:!0,onSpaceSwitch:async e=>{},useEmailAccount:!0}),(0,w.jsx)("div",{style:r.contentBody,children:a?(0,w.jsx)(_,{...e}):(0,w.jsx)(M,{...e})})]})})})}function _(e){const{setCanRedirect:t,setRedirectUrl:i}=e,[l,a]=(0,n.useState)(!1),r=function(){const{isMobile:e}=(0,o().Y0)(),t=e?25:48,i=e?18:20;return(0,m().IS)((()=>({container:{textAlign:"center",flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},icon:{fill:y().Ay.red,width:t,height:t,marginBottom:20,display:"inline-block"},title:{fontSize:i,margin:"0 50px 32px",textAlign:"center",fontWeight:x().Wy.medium,marginBottom:12},body:{marginTop:0,marginBottom:24,width:"80%"}})),[t,i])}(),s=(0,w.jsx)(f().sA,{id:"globalOauthConfirmationPage.error.title",defaultMessage:"Something went wrong."}),c=(0,n.useCallback)((()=>{a(!0),i(v().A.domainBaseUrl),t(!0)}),[a,i,t]);return(0,w.jsxs)("section",{style:r.container,children:[(0,g().f)(r.icon),(0,w.jsx)("header",{style:r.title,children:s}),(0,w.jsx)("p",{style:r.body,children:(0,w.jsx)(f().sA,{id:"globalOauthConfirmationPage.error.detail",defaultMessage:"Please try again or contact Notion support."})}),(0,w.jsx)("div",{style:r.body,children:(0,w.jsx)(C().A,{size:"lg",onClick:c,disabled:l,children:(0,w.jsx)(f().sA,{id:"globalOauthConfirmationPage.error.returnHome",defaultMessage:"Return to home"})})})]})}function M(e){const{clientId:t,confirmationData:i,setCanRedirect:l,setRedirectUrl:a}=e,{clientName:r,clientMetadata:s,clientCapability:c}=i,[d,u]=(0,n.useState)(!1),g=(0,n.useMemo)((()=>!!c&&(0,h().jj)(c)),[c]),y=(0,n.useCallback)((()=>{u(!0),a(v().A.domainBaseUrl),l(!0)}),[u,a,l]),k=(0,n.useCallback)((()=>{u(!0),l(!0)}),[l,u]),S=function(){const{isMobile:e}=(0,o().Y0)();return(0,m().IS)((t=>({title:{fontSize:e?18:20,margin:"0 50px 22px",textAlign:"center",fontWeight:x().Wy.medium},inlineTextLink:{color:"black",textDecoration:"none"},buttonGroup:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:34},footer:{fontSize:x().J.UISmall.desktop,color:t.mediumTextColor,paddingTop:20,paddingBottom:16},innerFooterContainer:{color:t.regularTextColor,fontWeight:x().Wy.semibold,marginBottom:4}})),[e])}(),_=null!=s&&s.logo_url?{pointer:{table:p().W,id:t},icon:s.logo_url}:void 0;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{style:{padding:15},children:(0,w.jsx)(j().A,{icon:_,disabled:!0,title:r,size:54,isEmptyPage:!1,style:{margin:"auto"}})}),(0,w.jsx)("div",{style:S.title,children:(0,w.jsx)(f().sA,{id:"globalOauthConfirmationPage.permissions.title",defaultMessage:"<inlinetextlink>{clientName}</inlinetextlink> is requesting access to your name, email, and profile photo.",values:{clientName:r,inlinetextlink:e=>null!=s&&s.website_url?(0,w.jsx)(A().A,{style:S.inlineTextLink,href:null==s?void 0:s.website_url,children:e}):e}})}),g&&(0,w.jsx)("div",{style:{textAlign:"center"},children:(0,w.jsx)(f().sA,{id:"globalOauthConfirmationPage.permissions.noWorkspaceAccess",defaultMessage:"{clientName} will not have access to any of your Notion workspaces.",values:{clientName:r}})}),(0,w.jsxs)("div",{style:S.buttonGroup,children:[(0,w.jsx)(b().A,{size:"lg",onClick:y,style:{height:32},disabled:d,children:(0,w.jsx)(f().sA,{id:"globalOauthConfirmationPage.permissions.cancel",defaultMessage:"Cancel"})}),(0,w.jsx)(C().A,{size:"lg",onClick:k,disabled:d,children:(0,w.jsx)(f().sA,{id:"globalOauthConfirmationPage.permissions.allow",defaultMessage:"Allow"})})]}),(0,w.jsx)("footer",{style:S.footer,children:(0,w.jsx)("div",{children:(0,w.jsx)(f().sA,{id:"globalOauthConfirmationPage.permissions.warning.body",defaultMessage:"By allowing access, you consent to sharing info with {clientName}. Learn how <inlinetextlink>{clientName}</inlinetextlink> handles your data by reviewing their <privacypolicylink>Privacy Policy</privacypolicylink> and <termsofservicelink>Terms of Service</termsofservicelink>.",values:{clientName:r,inlinetextlink:e=>null!=s&&s.website_url?(0,w.jsx)(A().A,{href:null==s?void 0:s.website_url,children:e}):e,privacypolicylink:e=>null!=s&&s.privacy_policy_url?(0,w.jsx)(A().A,{href:null==s?void 0:s.privacy_policy_url,children:e}):e,termsofservicelink:e=>null!=s&&s.terms_of_use_url?(0,w.jsx)(A().A,{href:null==s?void 0:s.terms_of_use_url,children:e}):e}})})})]})}function T(e){const t=(0,o().v3)(),{clientId:i,redirectUri:u,csrfState:m,responseType:g,scope:h}=e,[p,f]=(0,n.useState)(!1),[y,x]=(0,n.useState)(void 0),[v,b]=(0,n.useState)(void 0);return(0,n.useEffect)((()=>{const e=r().Gm({url:`${a().JZ.globalOauthAuthorization}`,query:{client_id:i,state:m,redirect_uri:u,scope:h,response_type:g,skip_confirmation:"true"}});b(e)}),[i,u,m,g,h,b,f]),(0,l().A)((()=>{(async()=>{const e=await async function(e){const{environment:t,clientId:i,requestedScopes:n}=e,o=await c().callApi({eventName:"getOauthMetadata",environment:t,data:{clientId:i,requestedScopes:n}});return"failed"!==o.type&&o.data?{clientName:o.data.clientName,clientMetadata:o.data.clientMetadata,clientCapability:o.data.clientCapability,previouslyConfirmedOauth:o.data.issuedValidToken}:(s().log({level:"warning",type:"requestFaileOrMissingData",from:"globalOauthActions",data:{miscDataToConvertToString:{clientId:i,currentUserId:t.currentUser.id}}}),{previouslyConfirmedOauth:!1})}({environment:t,clientId:i,requestedScopes:[h]}),{previouslyConfirmedOauth:n}=e;n&&f(!0),x(e)})()}),!p),(0,n.useEffect)((()=>{p&&v&&(window.location.href=v)}),[p,v]),!y||y.previouslyConfirmedOauth?(0,w.jsx)(d().A,{}):(0,w.jsx)(S,{clientId:i,confirmationData:y,setCanRedirect:f,setRedirectUrl:b})}}}]);