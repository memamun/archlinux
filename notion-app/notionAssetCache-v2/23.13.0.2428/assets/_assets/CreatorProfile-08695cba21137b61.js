"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[40200],{369:(e,t,a)=>{a.d(t,{R:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("eyeHide",{viewBox:"0 0 16 12",svg:(0,i.jsx)("path",{d:"M12.2754 10.9346L3.08545 1.76074C2.91895 1.59424 2.91895 1.3042 3.08545 1.1377C3.25732 0.96582 3.53662 0.971191 3.7085 1.1377L12.8931 10.3169C13.0649 10.4888 13.0703 10.752 12.8931 10.9346C12.7212 11.1172 12.4473 11.1064 12.2754 10.9346ZM8 1.44922C12.4526 1.44922 15.4067 5.02637 15.4067 6.13281C15.4067 6.76123 14.4346 8.20605 12.7588 9.31787L11.8618 8.41553C13.167 7.58301 13.978 6.54102 13.978 6.13281C13.978 5.50977 11.3516 2.62012 8 2.62012C7.43066 2.62012 6.9043 2.70068 6.39404 2.84033L5.42188 1.86816C6.21143 1.61035 7.06006 1.44922 8 1.44922ZM8 10.811C3.60645 10.811 0.587891 7.22852 0.587891 6.13281C0.587891 5.48828 1.6084 4.0166 3.33789 2.89404L4.25635 3.8125C2.87598 4.67725 2.0166 5.77832 2.0166 6.13281C2.0166 6.87402 4.64307 9.64014 8 9.64014C8.6123 9.64014 9.18701 9.54883 9.73486 9.39307L10.707 10.3652C9.88525 10.6445 8.98291 10.811 8 10.811ZM10.6211 7.06201L7.06543 3.50635C7.35547 3.38818 7.66699 3.32373 8 3.32373C9.55762 3.32373 10.8145 4.56445 10.8145 6.12744C10.8145 6.45508 10.7446 6.77734 10.6211 7.06201ZM8 8.93652C6.43164 8.93652 5.18555 7.6582 5.18018 6.13281C5.18018 5.75146 5.26074 5.39697 5.41113 5.08008L9.04199 8.70557C8.7251 8.85059 8.37598 8.93652 8 8.93652Z"})})},20051:(e,t,a)=>{a.d(t,{Bl:()=>l,IH:()=>u,Lh:()=>w,Mh:()=>y,RY:()=>h,VP:()=>C,_A:()=>m,n$:()=>x});var i=()=>a(534177),r=()=>a(130382),n=()=>a(416845),o=()=>a(266442);const s=15;function l(e){if(!o().Vu.includes(e))throw new(n().rT)("Rating must be an integer between 1 and 5.",{type:"marketplace_listing_review_invalid_rating"});return!0}const d=3,c=100;function u(e){if(e.length<d)throw new(n().rT)("Title too short",{type:"marketplace_listing_review_title_too_short"});if(e.length>c)throw new(n().rT)("Title too long",{type:"marketplace_listing_review_title_too_long"})}const p=50,g=1500;function m(e){if(e.length<p)throw new(n().rT)("Description too short",{type:"marketplace_listing_review_description_too_short"});if(e.length>g)throw new(n().rT)("Title too long",{type:"marketplace_listing_review_description_too_long"})}const f=40;function h(e){if(0===e.length)throw new(n().rT)("Name is required",{type:"marketplace_listing_review_name_too_short"});if(e.length>f)throw new(n().rT)("Name too long",{type:"marketplace_listing_review_name_too_long"})}const b=5,v=1500;function x(e){if(e.length<b)throw new(n().rT)("Creator response too short",{type:"marketplace_listing_review_creator_response_too_short"});if(e.length>v)throw new(n().rT)("Creator response too long",{type:"marketplace_listing_review_creator_response_too_long"})}function y(e){return void 0!==e.getTitle()&&void 0!==e.getSerializedContent()}function C(e){return(0,r().YH)(e)<s}function w(e){switch(e){case"mostRecent":return{columnName:"updated_time",direction:"descending"};case"highestRating":return{columnName:"rating",direction:"descending"};case"lowestRating":return{columnName:"rating",direction:"ascending"};default:(0,i().HB)(e)}}},24184:(e,t,a)=>{a.d(t,{e:()=>i});const i=(0,a(340498).xh)("arrowCounterClockwise",{default:{loader:()=>a.e(79311).then(a.bind(a,579311))},small:{loader:()=>a.e(49121).then(a.bind(a,449121))},mini:{loader:()=>a.e(48591).then(a.bind(a,248591))},large:{loader:()=>a.e(95490).then(a.bind(a,873109))}})},60200:(e,t,a)=>{a.d(t,{R:()=>o});a(296540);var i=()=>a(401497),r=()=>a(710149),n=a(474848);function o(e){const{width:t,height:a,borderRadius:o,marginBottom:s}=e,l=function(e){const{width:t,height:a,borderRadius:r,marginBottom:n}=e;return(0,i().IS)((()=>({loadingText:{width:t??120,height:a??14,borderRadius:r??2,marginBottom:n??0}})),[t,a,r,n])}({width:t,height:a,borderRadius:o,marginBottom:s});return(0,n.jsx)(r().A,{style:l.loadingText})}},73223:(e,t,a)=>{a.r(t),a.d(t,{dismissTutorial:()=>c,resetTutorials:()=>u,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>g,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>d});var i=()=>a(541235),r=()=>a(317909),n=()=>a(755199),o=()=>a(739135),s=()=>a(351360);function l(e,t){var a;const{currentUserSettingsStore:i}=s().default.state;if(!i)return;const r=null===(a=i.getSettings())||void 0===a?void 0:a.tutorials;m({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{n().mJ({userSettingsStore:i,transaction:e,data:{tutorials:{...r,[t]:(0,o().i9)(i,t)}}})},userId:i.id})}function d(e,t){var a;const{currentUserSettingsStore:i}=s().default.state;if(!i)return;const r=null===(a=i.getSettings())||void 0===a?void 0:a.tutorials;m({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{n().mJ({userSettingsStore:i,transaction:e,data:{tutorials:{...r,[t]:(0,o().KD)(i,t)}}})},userId:i.id})}function c(e,t){var a;const{currentUserSettingsStore:r}=s().default.state;if(!r)return;const o=null===(a=r.getSettings())||void 0===a?void 0:a.tutorials;m({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{n().mJ({userSettingsStore:r,transaction:e,data:{tutorials:{...o,[t]:i().YD}}})},userId:r.id})}function u(e){const{currentUserSettingsStore:t}=s().default.state;t&&m({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{n().mJ({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,a){var r;const{currentUserSettingsStore:l}=s().default.state;if(!l||(0,o().x$)(l,t))return;const d=(0,o().gt)(l,t);i().c$[t].steps.findIndex((e=>e.id===d))>=i().c$[t].steps.findIndex((e=>e.id===a))||n().mJ({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(r=l.getSettings())||void 0===r?void 0:r.tutorials,[t]:a}}})}function g(e,t,a){if((0,o().ll)(a))return;const i=(0,o().tb)(t,a);i&&p(e,t,i)}function m(e){return r().createAndCommit({...e,canUndo:!1})}},77279:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});class i extends(()=>a(757695))().default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const r=new i},100594:(e,t,a)=>{a.d(t,{CN:()=>M,D0:()=>x,D5:()=>D,GL:()=>f,I9:()=>m,JQ:()=>b,JW:()=>I,PC:()=>v,Rb:()=>_,SK:()=>S,UK:()=>L,VY:()=>c,YU:()=>w,Yp:()=>C,_x:()=>j,bg:()=>p,fn:()=>T,i8:()=>P,kq:()=>u,q_:()=>R,sh:()=>g,tG:()=>h,xS:()=>A,zn:()=>k});var i=()=>a(534177),r=()=>a(708685),n=()=>a(921598),o=()=>a(970013),s=()=>a(713998),l=()=>a(499755),d=()=>a(901610);const c=["gray","blue","yellow","green","purple","teal","orange","pink","red"],u=["auto","colorful"];let p=function(e){return e.small="small",e.medium="medium",e.large="large",e.extra_large="extra_large",e}({});function g(e){switch(e){case p.small:return 300;case p.medium:return 400;case p.large:return 600;case p.extra_large:return 800;default:(0,i().HB)(e)}}function m(e){switch(e){case p.small:return 150;case p.medium:return 250;case p.large:return 300;case p.extra_large:return 400;default:(0,i().HB)(e)}}let f=function(e){return e.avatar="avatar",e.avatar_name="avatar_name",e.name="name",e}({}),h=function(e){return e.none="none",e.x_axis="x_axis",e.y_axis="y_axis",e.both="both",e}({}),b=function(e){return e.none="none",e.horizontal="horizontal",e.vertical="vertical",e.both="both",e}({}),v=function(e){return e.normal="normal",e.percent="percent",e.side_by_side="side_by_side",e}({}),x=function(e){return e.none="none",e.value="value",e.name="name",e.name_and_value="name_and_value",e}({});function y(e){if(!e)return!1;return n().BI.includes(e)}function C(e){const t=(0,r().getFormulaPropertySchemaBaseResultType)(e);return"text"===t||"number"===t||"checkbox"===t||"person"===t||"date"===t}function w(e,t){var a,r;let o,d=e.chartFormat;if("groups_reducer"===e.dataConfig.type){var c;const{chartFormat:a,chartGroupByFormat:i}=function(e,t,a,i){const r=(0,s()._g)({schema:i,property:e.property});if(r&&"donut"===a&&(0,l().e0)(r)){const a=(0,n().MP)(e);return{chartFormat:{...t,mainSort:l().S0.yDescending},chartGroupByFormat:a}}return{chartFormat:t,chartGroupByFormat:e}}(null==e||null===(c=e.dataConfig)||void 0===c?void 0:c.groupBy,null==e?void 0:e.chartFormat,"donut",t);d=a,o={...e.dataConfig,groupBy:i,aggregationConfig:{aggregation:e.dataConfig.aggregationConfig.aggregation}}}else"results_reducer"===e.dataConfig.type?(o=e.dataConfig,d={...d,mainSort:l().S0.yDescending}):(0,i().HB)(e.dataConfig);R(e)&&d&&(void 0===(null===(a=d)||void 0===a?void 0:a.donutDataLabels)||(null===(r=d)||void 0===r?void 0:r.donutDataLabels)===x.none)?d.donutDataLabels=x.value:!R(e)&&d&&(d.donutDataLabels=x.none);const u={...e,type:"donut",dataConfig:o};return d&&(u.chartFormat=d),u}function j(e,t){let a;"groups_reducer"===e.dataConfig.type?a={...e.dataConfig,aggregationConfig:{...e.dataConfig.aggregationConfig,seriesFormat:{displayType:t},stackOptions:void 0}}:"results_reducer"===e.dataConfig.type?a={...e.dataConfig,valueSeriesFormat:{displayType:t}}:(0,i().HB)(e.dataConfig);const r=e.chartFormat;return r&&r.donutDataLabels&&r.donutDataLabels!==x.none?r.axisShowDataLabels=!0:!r||r.donutDataLabels!==x.none&&void 0!==r.donutDataLabels||(r.axisShowDataLabels=!1),{...e,type:t,dataConfig:a}}function S(e,t){let a;if("groups_reducer"===e.dataConfig.type){var r;const i=null==e||null===(r=e.dataConfig)||void 0===r?void 0:r.groupBy;a={...e.dataConfig,groupBy:i,aggregationConfig:{...e.dataConfig.aggregationConfig,seriesFormat:{displayType:t}}}}else"results_reducer"===e.dataConfig.type?a={...e.dataConfig,valueSeriesFormat:{displayType:t}}:(0,i().HB)(e.dataConfig);return{...e,type:t,dataConfig:a}}const _={main:l().S0.xAscending,stacked:l().S0.manual};function M(e){let{chartConfig:t,xAxisPropertyId:a,newDataConfigType:r,groupBy:n,aggregation:o,valueProperty:s}=e;const d="groups_reducer"===t.dataConfig.type?t.dataConfig.aggregationConfig.seriesFormat:t.dataConfig.valueSeriesFormat;"groups_reducer"===r?t.dataConfig={type:"groups_reducer",groupBy:n,aggregationConfig:{aggregation:o,seriesFormat:d,stackOptions:"groups_reducer"===t.dataConfig.type?t.dataConfig.aggregationConfig.stackOptions:void 0}}:"results_reducer"===r?t.dataConfig={type:"results_reducer",nameProperty:a,valueProperty:s,valueSeriesFormat:d}:(0,i().HB)(r);const c="formula"===n.type?n.groupBy.sort:n.sort;return t.chartFormat={...t.chartFormat,mainSort:(0,l().gN)(c)},t}function A(e){let{property:t,propertySchema:a,groupByOption:i,hideEmptyGroups:o}=e;const s=a.type;if((0,n().Eg)(a)){if((0,n()._o)(s)){if(i&&y(i))return{type:s,property:t,groupBy:i,sort:{type:"ascending"}}}else{if((0,n().KI)(s)||"select"===s||"multi_select"===s)return{type:s,property:t,sort:{type:"ascending"}};if((0,n().iF)(s)){if(i&&((l=i)&&n().PC.includes(l)))return{type:s,property:t,groupBy:i,sort:{type:"ascending"}}}else{if("number"===s)return{type:s,property:t,groupBy:{type:"unique"},start:-1,end:-1,size:-1,sort:{type:"ascending"}};if("formula"===s){const e=(0,r().getFormulaPropertySchemaResultType)(a);if("number"===e)return{type:"formula",property:t,groupBy:{type:"number",groupBy:{type:"unique"},start:-1,end:-1,size:-1,sort:{type:"ascending"}}};if("date"===e&&y(i))return{type:"formula",property:t,groupBy:{type:"date",groupBy:i,sort:{type:"ascending"}}}}else if("person"===s)return{type:s,property:t,sort:{type:"manual"}}}}var l;return(0,n().V0)({property:t,propertySchema:a,hideEmptyGroups:o})}}function I(e){const t="formula"===e.type?(0,r().getFormulaPropertySchemaResultType)(e):void 0;return(0,o().AM)(e)||"number"===t}function k(e){const t="formula"===e.type?(0,r().getFormulaPropertySchemaResultType)(e):void 0;return(0,n()._o)(e.type)||"date"===t}function T(e){const t="formula"===e.type?(0,r().getFormulaPropertySchemaResultType)(e):void 0;return(0,o().JY)(e)||"person"===t}function P(e){if("formula"===e.type){const t=(0,r().getFormulaPropertySchemaResultType)(e);return(0,n()._o)(t)}return(0,n()._o)(e.type)}function L(e){return"text"===e||"number"===e||"person"===e||"date"===e}function D(e){var t;return!(!e||!(0,d().m)(e))&&("groups_reducer"!==e.dataConfig.type||!e.dataConfig.aggregationConfig.stackOptions||"percent"!==(null===(t=e.chartFormat)||void 0===t?void 0:t.axisGroupStyle))}function R(e){return!!D(e)&&(!(!e||!(0,d().m)(e))&&(void 0===(null===(t=e.chartFormat)||void 0===t?void 0:t.axisShowDataLabels)||(null===(a=e.chartFormat)||void 0===a?void 0:a.axisShowDataLabels)));var t,a}},171789:(e,t,a)=>{a.d(t,{A:()=>o});a(898992),a(354520),a(581454);var i=a(296540),r=a(474848);function n(){const[e,t]=(0,i.useReducer)(((e,t)=>{switch(t.type){case"push":return[...e.map((e=>({...e,isAnimatingOut:!0}))),{item:t.item,isAnimatingOut:!1}];case"delete":return e.filter((e=>e.item.key!==t.key));case"clear":return e.map((e=>({...e,isAnimatingOut:!0})));default:return e}}),[]);return(0,i.useEffect)((()=>{const e=new(a(496506).default)((()=>a(666429).Ay.state.currentItem),{debugName:"currentItemStore"});let i=null;function r(){const a=e.state;a&&i!==a.key?(t({type:"push",item:a}),i=a.key):a||t({type:"clear"})}return e.addListener(r),()=>{e.removeListener(r)}}),[]),(0,r.jsx)(a(625325).A,{open:e.length>0,zIndex:201,children:e.map((e=>(0,i.createElement)(s,{...e,key:e.item.key,dispatch:t})))})}const o=i.memo(n),s=i.memo((function(e){let{dispatch:t,isAnimatingOut:n,item:o}=e;const s=(0,a(401497).DP)(),l=(0,a(552871).L)(),d=(0,i.useCallback)((()=>{t({type:"delete",key:o.key})}),[t,o.key]),c=(0,i.useRef)(n);(0,i.useEffect)((()=>{if(!c.current&&n){const e=setTimeout(d,270);return()=>{d(),clearTimeout(e)}}c.current=n}),[n,d]);const u=o.position??"bottom",p="top"===u?{top:24}:{bottom:l};return(0,r.jsx)("div",{style:{...p,position:"fixed",left:0,width:"100%",display:"flex",zIndex:1e6,padding:4,pointerEvents:"none"},children:(0,r.jsxs)("div",{"aria-live":"polite",style:{background:s.tooltipBackground,color:s.text.contrastPrimary,borderRadius:8,padding:"11px 16px",boxShadow:s.shadowLG,margin:"0 auto",fontSize:14,display:"flex",alignItems:"center",pointerEvents:"auto",...o.style,animationName:`snackbar-slide-in-${u}`,animationDuration:"270ms",animationTimingFunction:"ease",transitionProperty:"transform, opacity",transitionDuration:"270ms",transitionTimingFunction:"ease",transform:n?"scale(0.95)":"scale(1)",opacity:n?0:1},onTransitionEnd:n?d:void 0,children:[o.label,o.helpUrl&&(0,r.jsx)(a(296798).A,{href:o.helpUrl,external:!0,style:{marginLeft:8,width:16,height:16,color:s.text.contrastPrimary},children:(0,a(133033).$)({fill:s.text.contrastSecondary})}),(0,r.jsx)("div",{style:{marginLeft:4,marginRight:-4},children:o.right})]})})}))},204552:(e,t,a)=>{a.d(t,{c:()=>r,x:()=>n});var i=()=>a(645873);const r=(0,i()._h)(new(i().O2)("UniversalQnaModals",(async()=>await Promise.all([a.e(23806),a.e(37353),a.e(55373),a.e(29151),a.e(16908),a.e(48315),a.e(847),a.e(5887),a.e(17989),a.e(56985),a.e(21627),a.e(82472),a.e(96345),a.e(75659),a.e(47858),a.e(51860),a.e(221),a.e(14358)]).then(a.bind(a,457974)))),(e=>e.UniversalQnaModals)),n=(0,i()._h)(new(i().O2)("SlackConnectionOptions",(async()=>await a.e(85873).then(a.bind(a,210230)))),(e=>e.SlackConnectionOptions))},236190:(e,t,a)=>{a.d(t,{c:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("minus",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.037 8.844h9.92a.705.705 0 00.368-.103.825.825 0 00.28-.28.73.73 0 000-.773.752.752 0 00-.28-.28.705.705 0 00-.369-.102H3.037a.705.705 0 00-.369.102.824.824 0 00-.28.28.73.73 0 000 .772.914.914 0 00.28.281.705.705 0 00.37.103z"})})},239820:(e,t,a)=>{a.d(t,{E:()=>i});const i=(0,a(340498).xh)("plusCircleFill",{default:{loader:()=>a.e(57667).then(a.bind(a,357667))},small:{loader:()=>a.e(99149).then(a.bind(a,99149))},mini:{loader:()=>a.e(59419).then(a.bind(a,59419))},large:{loader:()=>a.e(68849).then(a.bind(a,668849))}})},252051:(e,t,a)=>{a.d(t,{AI:()=>u,PB:()=>m,XC:()=>c,Yp:()=>r,Zz:()=>n,eq:()=>p,ev:()=>b,iq:()=>d,j2:()=>f,jQ:()=>g,jV:()=>i,kC:()=>h,o0:()=>o,p0:()=>s});const i=(0,a(959013).YK)({chart:{defaultMessage:"chart",id:"chartExport.chart"},exportChart:{defaultMessage:"Save chart as...",id:"chartExport.exportChart"},exportChartPreview:{defaultMessage:"Preview",id:"chartExport.exportChartPreview"},exportChartBackground:{defaultMessage:"Background",id:"chartExport.exportChartBackground"},copyPng:{defaultMessage:"Copy as PNG",id:"chartExport.copyAsPng"},downloadPng:{defaultMessage:"Download PNG",id:"chartExport.downloadPng"},downloadSvg:{defaultMessage:"Download SVG",id:"chartExport.downloadSVG"},madeWithNotion:{defaultMessage:"Made with Notion",id:"chartExport.madeWithNotion"}}),r=200,n=2,o=800,s=500,l=240,d=120,c=96,u=64,p=2*d,g=2*c,m=2*u;function f(e){let t={width:o,height:s};return"none"===e&&(t={width:o+p,height:s+g}),{chart:t,plotOptions:{pie:{size:l}}}}const h=20,b=8},274609:(e,t,a)=>{a.d(t,{L:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("historyBack",{viewBox:"0 0 14 14",svg:(0,i.jsx)("polygon",{points:"2.85893 7.74676 8.05608 12.9439 7 14 0.528042 7.52804 0 7 0.528042 6.47196 7 0 8.05608 1.05608 2.85893 6.25324 14 6.25324 14 7.74676"})})},282339:(e,t,a)=>{a.d(t,{QW:()=>f,dG:()=>g,ic:()=>m,lc:()=>p,xG:()=>h,ye:()=>u});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698);var i=()=>a(67657),r=()=>a(708685),n=()=>a(921598),o=()=>a(713998),s=()=>a(594013),l=()=>a(100594),d=()=>a(901610);const c=new Set(["groupBy_property_not_configured","groupBy_property_deleted","groupBy_property_not_groupable","groupBy_formula_not_groupable","aggregation_property_not_configured","aggregation_invalid","aggregation_deleted","stackBy_property_not_groupable","stackBy_formula_not_groupable","stackBy_property_deleted","name_property_not_configured","name_property_deleted","name_property_invalid","property_value_property_not_configured","property_value_property_deleted","property_value_property_invalid"]);function u(e){let{chartConfig:t,collectionSchema:a}=e;if(!t||"placeholder"===t.type)return"chart_config_not_found";if(void 0===t.dataConfig)return"data_model_invalid";if("groups_reducer"===t.dataConfig.type){const e=t.dataConfig.groupBy;if(!e)return"groupBy_property_not_configured";const s=(0,o()._g)({schema:a,property:e.property});if(!s)return"groupBy_property_deleted";const u=(0,n().Eg)(s);if("formula"===s.type&&!u)return"groupBy_formula_not_groupable";if(!u)return"groupBy_property_not_groupable";const p=t.dataConfig.aggregationConfig;if(!p)return"aggregation_property_not_configured";if("count"!==p.aggregation.aggregator){const e=p.aggregation.property,t=(0,o()._g)({schema:a,property:e});if(!t)return"aggregation_deleted";if((0,i().FM)(p.aggregation)&&t&&!(0,l().JW)(t))return"aggregation_invalid";if("formula"===(null==t?void 0:t.type)&&"unique"===p.aggregation.aggregator){const e=(0,r().getFormulaPropertySchemaResultType)(t);if(!(0,l().UK)(e))return"aggregation_invalid"}}if((0,d().m)(t)){var c;const e=null===(c=t.dataConfig.aggregationConfig.stackOptions)||void 0===c?void 0:c.groupBy.property;if(e){const t=(0,o()._g)({schema:a,property:e});if(!t)return"stackBy_property_deleted";const i=(0,n().Eg)(t);if("formula"===t.type&&!i)return"stackBy_formula_not_groupable";if(!i)return"stackBy_property_not_groupable"}}}else{if("results_reducer"!==t.dataConfig.type)return"data_model_invalid";{const e=t.dataConfig.nameProperty;if(!e)return"name_property_not_configured";const i=(0,o()._g)({schema:a,property:e});if(!i)return"name_property_deleted";if(!(0,s().tH)(i))return"name_property_invalid";const r=t.dataConfig.valueProperty;if(!r)return"property_value_property_not_configured";const n=(0,o()._g)({schema:a,property:r});if(!n)return"property_value_property_deleted";if(!(0,s().Iw)(n))return"property_value_property_invalid"}}}function p(e){return"groupBy_property_not_configured"===e||"groupBy_property_deleted"===e||"groupBy_property_not_groupable"===e||"groupBy_formula_not_groupable"===e||"name_property_not_configured"===e||"name_property_deleted"===e||"name_property_invalid"===e}function g(e){return"aggregation_property_not_configured"===e||"aggregation_deleted"===e||"aggregation_invalid"===e||"property_value_property_not_configured"===e||"property_value_property_deleted"===e||"property_value_property_invalid"===e}function m(e){return"stackBy_property_deleted"===e||"stackBy_property_not_groupable"===e||"stackBy_formula_not_groupable"===e||"stackBy_property_no_values"===e}function f(e){return c.has(e)}function h(e){return"stackBy_property_no_values"===e}},284622:(e,t,a)=>{a.d(t,{G:()=>i});const i=(0,a(340498).xh)("xmarkCircle",{default:{loader:()=>a.e(93449).then(a.bind(a,593449))},small:{loader:()=>a.e(57507).then(a.bind(a,657507))},mini:{loader:()=>a.e(26357).then(a.bind(a,26357))},large:{loader:()=>a.e(16939).then(a.bind(a,116939))}})},292119:(e,t,a)=>{a.d(t,{v:()=>n});a(296540);var i=()=>a(643819),r=a(474848);function n(e){const{cost:t,intl:a}=e,n=e.trailingZeroDisplay??"auto",o=e.currencySign??"accounting",s=i().W.fromValue(t);let l=a.formatNumber(s.amount/Math.pow(10,s.currencyValue.minorUnitDigits),{style:"currency",currency:s.currencyCode,currencyDisplay:"symbol",currencySign:o});return"stripIfInteger"===n&&(l=l.replace(new RegExp(`[.,]0{${s.currencyValue.minorUnitDigits}}(\\s+.*)?$`),"$1")),(0,r.jsx)(r.Fragment,{children:l})}},345404:(e,t,a)=>{a.d(t,{kE:()=>B});var i=()=>a(638681),r=()=>a(377315),n=()=>a(343747);const o=i().object({required:{r:i().lte(i().gte(i().integer(),0),255),g:i().lte(i().gte(i().integer(),0),255),b:i().lte(i().gte(i().integer(),0),255)},optional:{}}),s=i().object({required:{value:i().union([i().string(),i().nonEmpty(i().array(i().string()))])},optional:{section:i().literals(n().RB.avatar,n().RB.identifier,n().RB.primary,n().RB.secondary,n().RB.body)}}),l=r().CA.object({required:{url:r().CA.string()},optional:{}}),d=r().CA.object({required:{content:r().CA.string()},optional:{link:r().CA.nullable(l)}}),c=r().CA.union([r().CA.object({required:{text:d},optional:{type:r().CA.literal("text")}})]),u=r().CA.object({required:{value:r().CA.array(c)},optional:{section:r().CA.literals(n().RB.body,n().RB.title)}}),p=i().object({required:{value:i().union([i().string(),i().nonEmpty(i().array(i().string()))])},optional:{language:i().string(),section:i().literals(n().RB.body)}}),g=i().object({required:{value:i().union([i().boolean(),i().nonEmpty(i().array(i().boolean()))])},optional:{}}),m=i().object({required:{value:i().union([i().number(),i().nonEmpty(i().array(i().number()))])},optional:{}}),f=i().object({required:{value:i().union([i().string(),i().nonEmpty(i().array(i().string()))])},optional:{color:o,section:i().literals(n().RB.primary)}}),h=i().object({required:{value:i().union([i().string(),i().tuple([i().string()])])},optional:{color:o,section:i().literal(n().RB.title)}}),b=i().object({required:{value:i().union([o,i().nonEmpty(i().array(o))])},optional:{section:i().literals(n().RB.entity,n().RB.background)}}),v=i().object({required:{value:i().union([i().dateString(),i().nonEmpty(i().array(i().dateString()))])},optional:{section:i().literals(n().RB.primary,n().RB.secondary)}}),x=i().object({required:{value:i().union([i().dateString(),i().nonEmpty(i().array(i().dateString()))])},optional:{section:i().literals(n().RB.primary,n().RB.secondary)}}),y=i().object({required:{value:i().tuple([i().dateString(),i().dateString()])},optional:{section:i().literals(n().RB.primary,n().RB.secondary)}}),C=i().object({required:{value:i().union([i().dateString(),i().tuple([i().dateString()])])},optional:{section:i().literals(n().RB.primary,n().RB.secondary)}}),w=i().object({required:{value:i().union([i().dateString(),i().tuple([i().dateString()])])},optional:{section:i().literals(n().RB.primary,n().RB.secondary)}}),j=i().union([i().object({required:{plain_text:s},optional:{type:i().literal("plain_text")}}),i().object({required:{rich_text:u},optional:{type:i().literal("rich_text")}}),i().object({required:{boolean:g},optional:{type:i().literal("boolean")}}),i().object({required:{number:m},optional:{type:i().literal("number")}}),i().object({required:{enum:f},optional:{type:i().literal("enum")}}),i().object({required:{title:h},optional:{type:i().literal("title")}}),i().object({required:{color:b},optional:{type:i().literal("color")}}),i().object({required:{date:v},optional:{type:i().literal("date")}}),i().object({required:{datetime:x},optional:{type:i().literal("datetime")}}),i().object({required:{datetimerange:y},optional:{type:i().literal("datetimerange")}}),i().object({required:{created_datetime:C},optional:{type:i().literal("created_datetime")}}),i().object({required:{last_edited_datetime:w},optional:{type:i().literal("last_edited_datetime")}}),i().object({required:{code:p},optional:{type:i().literal("code")}})]),S=i().object({required:{},optional:{section:i().literal(n().RB.embed)}}),_=i().object({required:{},optional:{section:i().literal(n().RB.embed)}}),M=i().object({required:{},optional:{section:i().literal(n().RB.embed)}}),A=i().object({required:{},optional:{section:i().literal("embed")}}),I=i().object({required:{},optional:{format:i().nullable(i().literals("icon")),section:i().literals(n().RB.avatar,n().RB.entity,n().RB.embed)}}),k=i().intersection([i().object({required:{src_url:i().union([i().string(),i().nonEmpty(i().array(i().string()))])},optional:{default_height:i().number(),default_width:i().number()}}),i().union([i().object({required:{html:S},optional:{type:i().literal("html")}}),i().object({required:{pdf:_},optional:{type:i().literal("pdf")}}),i().object({required:{audio:M},optional:{type:i().literal("audio")}}),i().object({required:{video:A},optional:{type:i().literal("video")}}),i().object({required:{image:I},optional:{type:i().literal("image")}})])]),T=i().union([i().string(),i().nonEmpty(i().array(i().string()))]),P=i().object({required:{uri:T},optional:{type:i().literal("mention"),mention:i().object({required:{},optional:{section:i().literal(n().RB.primary)}}),extension:i().isNull()}}),L=i().object({required:{uri:T},optional:{type:i().literal("extension"),extension:i().nonEmpty(i().array(i().object({required:{id:i().string()},optional:{section:i().literals(n().RB.avatar,n().RB.embed,n().RB.primary,n().RB.secondary)}}))),mention:i().isNull()}}),D=i().union([P,L]),R=i().object({required:{uri:T},optional:{}}),E=i().intersection([i().object({required:{id:i().string(),name:i().string()},optional:{}}),i().union([i().object({required:{inline:j},optional:{type:i().literal("inline")}}),i().object({required:{embed:k},optional:{type:i().literal("embed")}}),i().object({required:{relation:D},optional:{type:i().literal("relation")}}),i().object({required:{people:R},optional:{type:i().literal("people")}})])]),B=i().array(E)},388182:(e,t,a)=>{a.d(t,{A:()=>i});const i=a(757695).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},432540:(e,t,a)=>{a.d(t,{I:()=>i});const i=(0,a(340498).xh)("chevronDown",{default:{loader:()=>a.e(2611).then(a.bind(a,902611))},small:{loader:()=>a.e(3581).then(a.bind(a,503581))},mini:{loader:()=>a.e(32715).then(a.bind(a,532715))},large:{loader:()=>a.e(17217).then(a.bind(a,617217))}})},434945:(e,t,a)=>{a.d(t,{DZ:()=>x,F3:()=>M,PF:()=>C,Ud:()=>L,_H:()=>R,a_:()=>j,dg:()=>P,pv:()=>w,px:()=>A,ut:()=>I,v:()=>S});a(944114),a(898992),a(354520),a(430670),a(803949),a(581454),a(737550),a(296540);var i=()=>a(842599),r=()=>a(179034),n=()=>a(96689),o=()=>a(506391),s=()=>a(496603),l=()=>a(534177),d=()=>a(939768),c=()=>a(630116),u=()=>a(725951),p=()=>a(685200),g=()=>a(739095),m=()=>a(939482),f=()=>a(492414),h=()=>a(972435),b=()=>a(836251),v=a(474848);const x=(0,a(959013).YK)({missingValuesError:{id:"developerIntegrationForm.error.missingFieldRequired",defaultMessage:"{ fieldName } is required."},invalidInputError:{id:"developerIntegrationForm.error.invalidInput",defaultMessage:"{ fieldName } is invalid."},transactionGenericError:{id:"developerIntegrationAction.error.failedTransaction",defaultMessage:"Something went wrong, please try again"},basicSectionTitle:{id:"developerIntegrationForm.sectionHeader.basic",defaultMessage:"Basic information"},secretSectionTitle:{id:"developerIntegrationForm.sectionHeader.secrets",defaultMessage:"Secrets"},capabilitiesSectionTitle:{id:"developerIntegrationForm.sectionHeader.capabilities",defaultMessage:"Capabilities"},oauthSectionTitle:{id:"developerIntegrationForm.sectionHeader.oauthAndUri",defaultMessage:"OAuth Domain & URIs"},organizationSectionTitle:{id:"developerIntegrationForm.sectionHeader.organization",defaultMessage:"Organization Information"},externalOauthSectionTitle:{id:"developerIntegrationForm.sectionHeader.external_oauth_setup",defaultMessage:"External Authorization Setup"},unfurlingSectionTitle:{id:"developerIntegrationForm.sectionHeader.unfurlingDomains",defaultMessage:"Unfurling Domain & Patterns"},basicPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.basic",defaultMessage:"Basic information"},secretPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.secrets",defaultMessage:"Secrets"},capabilitiesPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.capabilities",defaultMessage:"Capabilities"},distributionPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.distribution",defaultMessage:"Distribution"},linkPreviewPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.unfurling",defaultMessage:"Link Preview"},distributionSwitcherLabel:{id:"developerIntegrationFormDistributionView.switcher.label",defaultMessage:"Do you want to make this integration public?"},unfurlingSwitcherLabel:{id:"developerIntegrationFormUnfurlingView.switcher.label",defaultMessage:"Do you want to enable link preview for this integration?"},integrationTypeLabel:{id:"developerIntegrationFormBasicView.integrationType.label",defaultMessage:"Type"},integrationTypeSubtitle:{id:"developerIntegrationFormBasicView.integrationType.subtitle",defaultMessage:"Internal integrations are installed to a specific workspace. You can make this integration public later"},nameLabel:{id:"developerIntegrationFormBasicView.name.label",defaultMessage:"Name"},nameSubtitle:{id:"developerIntegrationFormBasicView.name.subtitle",defaultMessage:"Name to identify your integration to users"},typeLabel:{id:"developerIntegrationFormBasicView.type.label",defaultMessage:"Type"},typeSubtitle:{id:"developerIntegrationFormBasicView.type.subtitle",defaultMessage:"Type of integration"},iconLabel:{id:"developerIntegrationFormBasicView.icon.label",defaultMessage:"Logo"},iconSubtitle:{id:"developerIntegrationFormBasicView.icon.subtitle",defaultMessage:"512px x 512px in PNG format is recommended"},spaceLabel:{id:"developerIntegrationFormBasicView.space.label",defaultMessage:"Associated workspace"},spaceSubtitle:{id:"developerIntegrationFormBasicView.space.subtitle",defaultMessage:"Select a workspace to install the integration to. Workspace owners will be able to manage the integration as well. You can upgrade the integration to use OAuth later"},tokenLabel:{id:"developerIntegrationFormSecretView.secret.label",defaultMessage:"Internal Integration Secret"},authorizationUrlLabel:{id:"developerIntegrationFormSecretView.integrationAuthUrl.label",defaultMessage:"Authorization URL"},clientIdLabel:{id:"developerIntegrationFormSecretView.clientId.label",defaultMessage:"OAuth client ID"},clientSecretLabel:{id:"developerIntegrationFormSecretView.clientSecret.label",defaultMessage:"OAuth client secret"},capabilitiesLabel:{id:"developerIntegrationFormCapabilitiesView.capabilities.label",defaultMessage:"Capabilities"},redirectUrisLabel:{id:"developerIntegrationFormDistributionView.redirect_uris.label",defaultMessage:"Redirect URIs"},redirectUrisSubtitle:{id:"developerIntegrationFormDistributionView.redirect_uri.subtitle",defaultMessage:"In the Notion OAuth flow, users will be redirected to this path after they have authenticated with Notion. The path will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address. It must also be included in the token request"},websiteUrlLabel:{id:"developerIntegrationFormDistributionView.website_url.label",defaultMessage:"Website or homepage"},websiteUrlSubtitle:{id:"developerIntegrationFormDistributionView.website_url.subtitle",defaultMessage:"Used to link to your integration’s website or homepage in your integration page and authentication screens"},taglineLabel:{id:"developerIntegrationFormDistributionView.tagline.label",defaultMessage:"Tagline"},taglineSubtitle:{id:"developerIntegrationFormDistributionView.tagline.subtitle",defaultMessage:"A short description of what the integration does"},privacyPolicyUrlLabel:{id:"developerIntegrationFormDistributionView.privacy_policy_url.label",defaultMessage:"Privacy policy"},privacyPolicyUrlSubtitle:{id:"developerIntegrationFormDistributionView.privacy_policy_url.subtitle",defaultMessage:"Used to link to your integration’s privacy policy in your integration page and authentication screens"},termOfUseLabel:{id:"developerIntegrationFormDistributionView.term_of_use.label",defaultMessage:"Terms of use"},termOfUseSubtitle:{id:"developerIntegrationFormDistributionView.term_of_use.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens"},emailLabel:{id:"developerIntegrationFormDistributionView.email.label",defaultMessage:"Support email"},emailSubtitle:{id:"developerIntegrationFormDistributionView.email.subtitle",defaultMessage:"Used to link to your integration’s support email in your integration page and authentication screens"},developerNameLabel:{id:"developerIntegrationFormDistributionView.developer_name.label",defaultMessage:"Company name"},developerNameSubtitle:{id:"developerIntegrationFormDistributionView.developer_name.subtitle",defaultMessage:"The name of your company or organization. You may use your own name if this does not apply"},templateLabel:{id:"developerIntegrationFormDistributionView.template.label",defaultMessage:"Notion URL for optional template"},templateSubtitle:{id:"developerIntegrationFormDistributionView.template.subtitle",defaultMessage:"Use this field if you'd like to offer a user a Notion page to duplicate into their workspace during OAuth. URL must be to a public Notion page"},unfurlUrlLabel:{id:"developerIntegrationFormUnfurlingView.unfurlUrl.label",defaultMessage:"Unfurl Callback URL"},unfurlUrlCaption:{id:"developerIntegrationFormUnfurlingView.unfurlUrl.caption",defaultMessage:"Called with a POST request when an unfurl action occurs and with a DELETE request when unfurl url preview(s) or mention(s) is deleted"},domainLabel:{id:"developerIntegrationFormUnfurlingView.domain.label",defaultMessage:"Unfurl Url Domain"},urlMatchingAndPlaceholderLabel:{id:"developerIntegrationFormUnfurlingView.urlmatching.label",defaultMessage:"URL matching and placeholder"},urlMatchingAndPlaceholderCaption:{id:"developerIntegrationFormUnfurlingView.urlmatching.caption",defaultMessage:"When users paste a URL that matches this pattern on your verified domain, they'll have the option to unfurl it as a preview. Any sample URLs are validated against provided patterns"},externalOauthAuthorizeUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthAuthorizeUrl.label",defaultMessage:"OAuth Authorize URL"},externalOauthAuthorizeUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthAuthorizeUrl.caption",defaultMessage:"Used by Notion to initiate user authorization with the integration"},externalOauthTokenUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthTokenUrl.label",defaultMessage:"OAuth Token URL"},externalOauthTokenUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthTokenUrl.caption",defaultMessage:"Called by Notion to retrieve an access token for the unfurl callback URL"},externalOauthScopesLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthScopes.label",defaultMessage:"OAuth Scopes"},externalOauthScopesCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthScopes.caption",defaultMessage:"Optional scopes string"},externalDeletionUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalDeletionUrl.label",defaultMessage:"Deleted Token Callback URL "},externalDeletionUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalDeletionUrl.caption",defaultMessage:"Called by Notion when a user removes your integration"},externalClientIdLabel:{id:"developerIntegrationFormUnfurlingView.externalClientId.label",defaultMessage:"OAuth Client ID"},externalClientSecretLabel:{id:"developerIntegrationFormUnfurlingView.externalClientSecret.label",defaultMessage:"OAuth Client Secret"},termsOfUseUrlLabel:{id:"developerIntegrationFormDistributionView.term_of_use_url.label",defaultMessage:"Terms of use"},termsOfUseUrlSubtitle:{id:"developerIntegrationFormDistributionView.term_of_use_url.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens"}});function y(e){return`${s().xQ(e)}Label`}h().A.formatMessage(x.basicPageTitle),h().A.formatMessage(x.secretPageTitle),h().A.formatMessage(x.capabilitiesPageTitle),h().A.formatMessage(x.distributionPageTitle),h().A.formatMessage(x.organizationSectionTitle),h().A.formatMessage(x.oauthSectionTitle),h().A.formatMessage(x.linkPreviewPageTitle),h().A.formatMessage(x.externalOauthSectionTitle),h().A.formatMessage(x.unfurlingSectionTitle);function C(e,t){const a=["basic","secrets","capabilities","distribution"];switch(e){case"create-bot":return["basic"];case"update-bot":case"create-guest-integration":return a;case"update-compliance-integration":return["basic","secrets","distribution","compliance"];default:return t&&a.push("linkPreview"),a}}const w={type:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},name:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},icon:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},space:{supportedBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},capabilities:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},token:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},authorization_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},redirect_uris:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},template_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},developer_name:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},website_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},tagline:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},privacy_policy_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},terms_of_use_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},email:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},unfurl_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},domain:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1}},url_matching_and_placeholder:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1}},external_oauth_authorize_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_oauth_token_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_oauth_scopes:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},external_client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_deletion_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}}};function j(e){const{formData:t,setFormData:a,formStateType:i,currentFieldNames:r,formFieldValidationSchema:n}=e,o=function(e){const{formData:t,formStateType:a,currentFieldNames:i,formFieldValidationSchema:r=w}=e;return i.filter((e=>{const i=t[e].value;return r[e].requiredBy[a]&&!i}))}({formData:t,formStateType:i,currentFieldNames:r,formFieldValidationSchema:n});return o.forEach((e=>{const t=y(e);a({field:e,error:h().A.formatMessage(x.missingValuesError,{fieldName:h().A.formatMessage(x[t])})})})),o}function S(e){const{formData:t,formStateType:a,templateStore:i,setFormData:r,currentFieldNames:n}=e,o=function(e){const{formData:t,formStateType:a,templateStore:i,currentFieldNames:r,formFieldValidationSchema:n=w}=e,o=[];return r.forEach((e=>{const r=t[e].value,s=n[e].supportedBy[a],l=g().Yj[e];if(s&&r&&l){const a=l({value:r,formData:t,templateStore:i});var d;a.validated||o.push({fieldName:e,errorMessages:null===(d=a.errorMessages)||void 0===d?void 0:d.map((e=>{let{descriptor:t,values:a}=e;return{descriptor:t,values:a??{}}}))})}})),o}({formData:t,formStateType:a,templateStore:i,currentFieldNames:n});return o.forEach((e=>{var t;r({field:e.fieldName,error:e.errorMessages?e.errorMessages.map(((e,t)=>{let{descriptor:a,values:i}=e;return(0,v.jsx)("div",{children:h().A.formatMessage(a,i)},`validation-error-${t}`)})):h().A.formatMessage(x.invalidInputError,{fieldName:null==x||null===(t=x[y(e.fieldName)])||void 0===t?void 0:t.defaultMessage})})})),o}function _(e){if(!e)return;const t={};return(0,l().WP)(e).forEach((e=>{let[a,i]=e;i&&(t[a]=!0)})),t}function M(e){return{token:e.token.value,client_id:e.client_id.value,client_secret:e.client_secret.value,authorization_url:e.authorization_url.value,name:e.name.value,icon:e.icon.value,space:e.space.value,redirect_uris:(e.redirect_uris.value||[]).map((e=>g().AT(e))),website_url:g().AT(e.website_url.value),tagline:e.tagline.value,privacy_policy_url:g().AT(e.privacy_policy_url.value),terms_of_use_url:g().AT(e.terms_of_use_url.value),template_page_id:(0,b().wU)(e.template_url.value??"")??null,email:i().qh(e.email.value),capabilities:_(e.capabilities.value),developer_name:e.developer_name.value,unfurl_url:e.unfurl_url.value,domain:e.domain.value,url_matching_and_placeholder:e.url_matching_and_placeholder.value,external_oauth_authorize_url:g().AT(e.external_oauth_authorize_url.value),external_oauth_token_url:g().AT(e.external_oauth_token_url.value),external_client_id:e.external_client_id.value,external_client_secret:e.external_client_secret.value,external_oauth_scopes:e.external_oauth_scopes.value,external_deletion_url:g().AT(e.external_deletion_url.value)}}function A(e){const{formData:t,formStateType:a,currentFieldNames:i,formFieldValidationSchema:r=w}=e;return i.some((e=>r[e].supportedBy[a]&&t[e].error))}const I={read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1,read_comment:!1,insert_comment:!1,link_preview:!1,synced_database:!1,workspace_content_transfer:!1};function k(e){const t={...I};return e&&(0,l().WP)(e).forEach((e=>{let[a,i]=e;i&&(0,l().O)(t,a)&&(t[a]=!0)})),t}const T={value:void 0,error:void 0},P={type:T,name:T,icon:T,space:T,capabilities:T,token:T,authorization_url:T,client_secret:T,client_id:T,tagline:T,email:T,website_url:T,privacy_policy_url:T,terms_of_use_url:T,template_url:T,redirect_uris:T,developer_name:T,external_oauth_authorize_url:T,external_oauth_token_url:T,external_client_id:T,external_client_secret:T,external_oauth_scopes:T,external_deletion_url:T,unfurl_url:T,domain:T,url_matching_and_placeholder:T};function L(e,t){return"error"in t?{...e,[t.field]:{...e[t.field],error:t.error}}:{...e,[t.field]:{...e[t.field],...t.value&&{error:void 0},value:t.value}}}async function D(e){const{pageId:t,store:a}=e;if(!a||!t)return;const i=c().Bv.createChildStore(a,{table:r().ev,id:t});return await i.load(),(0,f().Ay)({store:i,preferPublicLink:!0,pageVisitSource:void 0})}async function R(e){const{userRootStore:t,formStoreState:a,environment:i,initialUrlMatchingAndPlaceholder:r=[m().dZ]}=e;if("create-bot"===a.type){return{token:void 0,client_id:void 0,client_secret:void 0,authorization_url:void 0,space:(t?t.getAdminSpaceStores():[])[0],developer_name:void 0,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,template_url:void 0,redirect_uris:void 0,capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_comment:!1,insert_comment:!1,read_user_with_email:!1,read_user_without_email:!1,link_preview:!1,synced_database:!1,workspace_content_transfer:!1},unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-bot"===a.type||"create-guest-integration"===a.type){var s;const e=null===(s=a.startingRecord)||void 0===s?void 0:s.value,i=t&&e&&c().SL.createChildStore(t,{id:e.space_id,table:n().NX});return{token:a.startingRecord,client_id:void 0,client_secret:void 0,authorization_url:void 0,name:null==e?void 0:e.name,icon:null==e?void 0:e.icon,space:i,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,template_url:void 0,redirect_uris:void 0,capabilities:k(null==e?void 0:e.capabilities),developer_name:void 0,unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-guest-integration"===a.type){const e=a.startingRecord.value;return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,authorization_url:(0,d().P0)({baseUrl:(0,u().sZ)("production"),clientId:a.startingRecord.value.id,redirectUri:a.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await D({pageId:e.info.template_page_id,store:t,environment:i}),redirect_uris:e.redirect_uris,capabilities:k(e.capabilities),developer_name:e.info.developer_name,unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("create-third-party-external-integration"===a.type){const e=a.startingRecord.value;return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,authorization_url:(0,d().P0)({baseUrl:(0,u().sZ)("production"),clientId:a.startingRecord.value.id,redirectUri:a.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await D({pageId:e.info.template_page_id,store:t,environment:i}),redirect_uris:void 0,capabilities:k(e.capabilities),developer_name:e.info.developer_name,unfurl_url:void 0,domain:{developmentDomain:m().es,verifiedDomains:[],domainVerifications:[]},url_matching_and_placeholder:r,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-third-party-external-integration"===a.type){var g,f;const e=a.startingRecord.value,r=null===(g=a.startingAuthRecord)||void 0===g?void 0:g.value,n=a.domainVerifications,s=e.info.original_url_patterns||[],c={developmentDomain:(null===(f=e.info.development_url_domains)||void 0===f?void 0:f[0])||"",verifiedDomains:e.info.original_url_domains||[],domainVerifications:n},m=s.map((t=>{var a;if(!0!==(null===(a=t.additional_types)||void 0===a?void 0:a.collection))return{name:(0,p().g)({patternName:t.name,integrationId:e.id}),regex:t.regex,attributes:((null==t?void 0:t.attributes)??[]).map(o().mW),sampleUrls:(null==t?void 0:t.sample_urls)??[]}})).filter(l().O9);return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,authorization_url:(0,d().P0)({baseUrl:(0,u().sZ)("production"),clientId:a.startingRecord.value.id,redirectUri:a.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await D({pageId:e.info.template_page_id,store:t,environment:i}),redirect_uris:e.redirect_uris,capabilities:k(e.capabilities),developer_name:e.info.developer_name,domain:c,url_matching_and_placeholder:m,unfurl_url:e.info.unfurl_url,external_oauth_authorize_url:null==r?void 0:r.oauth_authorize_url,external_oauth_token_url:null==r?void 0:r.oauth_token_url,external_client_id:null==r?void 0:r.client_id,external_client_secret:null==r?void 0:r.client_secret,external_oauth_scopes:null==r?void 0:r.scopes,external_deletion_url:null==r?void 0:r.deletion_url}}if("update-first-party-external-integration"===a.type){var h;const e=a.startingRecord.value,t=e.info.original_url_patterns||[],i={developmentDomain:(null===(h=e.info.development_url_domains)||void 0===h?void 0:h[0])||"",verifiedDomains:e.info.original_url_domains??[],domainVerifications:[]},r=t.map((t=>{var a;if(!0!==(null===(a=t.additional_types)||void 0===a?void 0:a.collection))return{name:(0,p().g)({patternName:t.name,integrationId:e.id}),regex:t.regex,attributes:((null==t?void 0:t.attributes)??[]).map(o().mW),sampleUrls:(null==t?void 0:t.sample_urls)??[]}})).filter(l().O9);return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,authorization_url:void 0,name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:void 0,redirect_uris:e.redirect_uris,capabilities:k(e.capabilities),developer_name:e.info.developer_name,domain:i,url_matching_and_placeholder:r,unfurl_url:e.info.unfurl_url,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-compliance-integration"===a.type){var b;const e=a.startingRecord.value,r=null===(b=a.startingAuthRecord)||void 0===b?void 0:b.value;return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,authorization_url:(0,d().P0)({baseUrl:(0,u().sZ)("production"),clientId:a.startingRecord.value.id,redirectUri:a.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await D({pageId:e.info.template_page_id,store:t,environment:i}),redirect_uris:e.redirect_uris,capabilities:k(e.capabilities),developer_name:e.info.developer_name,domain:void 0,url_matching_and_placeholder:void 0,unfurl_url:void 0,external_oauth_authorize_url:null==r?void 0:r.oauth_authorize_url,external_oauth_token_url:null==r?void 0:r.oauth_token_url,external_client_id:null==r?void 0:r.client_id,external_client_secret:null==r?void 0:r.client_secret,external_oauth_scopes:null==r?void 0:r.scopes,external_deletion_url:null==r?void 0:r.deletion_url}}(0,l().HB)(a)}},447887:(e,t,a)=>{a.d(t,{A:()=>M});a(296540);var i=()=>a(484714),r=()=>a(987264),n=()=>a(959013),o=()=>a(981485),s=()=>a(38337),l=()=>a(662303),d=()=>a(148307),c=()=>a(576250),u=()=>a(274609),p=()=>a(427704),g=()=>a(100622),m=()=>a(284371),f=()=>a(756279),h=()=>a(704152),b=()=>a(493823),v=()=>a(187485),x=()=>a(2143),y=()=>a(309684),C=()=>a(603745),w=()=>a(313786),j=a(474848);function S(e){const{className:t,title:a,subtitle:i,onNavigateBack:r,navigateBackMessage:l,children:g,icon:m,sideContent:S,innerContainerStyles:M}=e,A=(0,n().tz)();return(0,j.jsx)(w().A,{title:A.formatMessage({id:"developerIntegrationsLayout.document.title",defaultMessage:"My integrations | Notion Developers"}),children:(0,j.jsxs)(x().H,{className:t,style:_.scroller,type:f().A.Y,children:[(0,j.jsx)(C().A,{}),(0,j.jsxs)("div",{className:s().f1O,style:_.topBar,children:[(0,j.jsx)("div",{children:(0,j.jsx)(v().A,{href:p().JZ.developerPortal,external:!0,children:(0,j.jsx)("img",{src:d().A.images.integrations.notionDevsLogoGaSvg})})}),(0,j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,j.jsx)(v().A,{style:{display:"flex",marginLeft:-6},href:p().JZ.developerPortal,external:!0,children:(0,j.jsx)(b().p,{icon:c().y,size:"sm",children:"View documentation"})}),(0,j.jsx)(y().Ay,{onChange:e=>{o().cL(e)}})]})]}),(0,j.jsxs)("div",{style:{..._.innerContainer,...M},children:[(0,j.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:80,marginBottom:80},children:[(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"66%",justifyContent:"center"},children:[(0,j.jsx)(h().A,{style:{..._.button,...!r&&{display:"none"}},onClick:r,children:(0,j.jsxs)("div",{style:{..._.buttonContent,fontSize:20},children:[(0,u().L)(_.arrowIcon),(0,j.jsx)("div",{style:{marginLeft:12},children:l||(0,j.jsx)(n().sA,{id:"developerIntegrationsLayout.backButton.label",defaultMessage:"My integrations"})})]})}),(0,j.jsx)("div",{style:_.header,children:a}),(0,j.jsx)("div",{style:_.subtitle,children:i})]}),(0,j.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"center",flex:1},children:m})]}),S?(0,j.jsxs)("div",{style:_.gridContainer,children:[(0,j.jsx)("div",{style:_.leftColumn,children:S}),(0,j.jsx)("div",{style:_.rightColumn,children:g})]}):g]}),(0,j.jsxs)("footer",{style:_.footerContainer,children:[(0,j.jsxs)("section",{style:_.footerColophon,children:[(0,j.jsx)("h1",{style:_.footerLogo,children:(0,j.jsx)("img",{src:d().A.images.integrations.notionFooterLogoSvg})}),(0,j.jsx)("h6",{style:_.footerCopy,children:"The all-in-one workspace for your notes, tasks, wikis, and databases."}),(0,j.jsx)("h6",{style:_.footerCopy,children:`©${(new Date).getFullYear()} Notion Labs, Inc.`}),(0,j.jsx)(v().A,{external:!0,href:p().JZ.termsAndPrivacy,style:_.footerLink,children:"Terms & Privacy"})]}),(0,j.jsxs)("nav",{style:{..._.footerNav,gridColumnStart:7},children:[(0,j.jsx)("h5",{style:_.footerSectionHeader,children:"Developers"}),(0,j.jsx)(v().A,{external:!0,href:"https://developers.notion.com/docs",style:_.footerLink,children:"Guides"}),(0,j.jsx)(v().A,{external:!0,href:"https://developers.notion.com/reference",style:_.footerLink,children:"API Reference"}),(0,j.jsx)(v().A,{external:!0,href:p().JZ.creatorProfileIntegrations,style:_.footerLink,children:"My integrations"}),(0,j.jsx)(v().A,{external:!0,href:"https://developers.notion.com/page/frequently-asked-questions",style:_.footerLink,children:"FAQs"}),(0,j.jsx)(v().A,{external:!0,href:p().JZ.developerTerms,style:_.footerLink,children:"Developer terms"})]}),(0,j.jsxs)("nav",{style:_.footerNav,children:[(0,j.jsx)("h5",{style:_.footerSectionHeader,children:"Notion"}),(0,j.jsx)(v().A,{external:!0,href:p().JZ.product,style:_.footerLink,children:"Product"}),(0,j.jsx)(v().A,{external:!0,href:p().JZ.teams,style:_.footerLink,children:"Teams"}),(0,j.jsx)(v().A,{external:!0,href:p().JZ.enterprise,style:_.footerLink,children:"Enterprise"}),(0,j.jsx)(v().A,{external:!0,href:p().JZ.blog,style:_.footerLink,children:"Blog"}),(0,j.jsx)(v().A,{external:!0,href:p().JZ.careers,style:_.footerLink,children:"Careers"})]}),(0,j.jsxs)("nav",{style:_.footerNav,children:[(0,j.jsx)("h5",{style:_.footerSectionHeader,children:"Social"}),(0,j.jsx)(v().A,{external:!0,href:"https://notionup.typeform.com/to/dSurQQp2Q",style:_.footerLink,children:"Developer newsletter"}),(0,j.jsx)(v().A,{external:!0,href:"http://twitter.com/notionapi",style:_.footerLink,children:"Twitter"})]})]})]})})}const _={footerLink:{color:g().Ay.frontTextMedium,cursor:"pointer",textDecoration:"none",display:"block",marginBottom:4},footerColophon:{gridColumn:"auto/span 3"},footerNav:{gridColumn:"auto/span 2",marginBottom:16},footerLogo:{margin:"0 auto 20px",fontSize:0,display:"block"},footerSectionHeader:{fontFamily:m().vc(l().locale).mono,fontWeight:m().Wy.medium,margin:"0 auto 8px",marginBottom:"1.1em",fontSize:15},footerCopy:{fontSize:15,fontWeight:m().Wy.regular,lineHeight:"1.5em",color:g().Ay.frontTextMedium,margin:"0 auto 8px",marginBottom:"1.1em"},footerContainer:{padding:"70px 30px",alignItems:"flex-start",justifyItems:"flex-start",flex:"1 0 auto",zIndex:999,width:"100%",maxWidth:1160,boxSizing:"border-box",margin:"0 auto",borderTop:`1px solid ${g().Ay.dividerColor}`,display:"grid",gridTemplateColumns:"repeat(12,1fr)",columnGap:16,gap:16},scroller:{height:"100vh",background:g().Ay.frontCreamBackground,padding:"0px 10px"},innerContainer:{margin:"auto",width:914},topBar:{maxWidth:1100,height:60,margin:"0 auto",display:"flex",alignItems:"center",marginTop:13,marginBottom:10,justifyContent:"space-between"},header:{fontWeight:m().Wy.bold,fontFamily:m().vc(l().locale).sans,fontSize:50,color:g().Ay.frontText,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},subtitle:{fontWeight:m().Wy.regular,fontSize:24,color:g().Ay.frontTextMedium,letterSpacing:"0.015em"},button:{display:"inline-flex",color:g().Ay.frontTextMedium,borderRadius:4,padding:6,fontSize:15,width:"fit-content"},buttonContent:{display:"flex",alignItems:"center"},arrowIcon:{width:20,height:20},gridContainer:{display:"grid",gridTemplateColumns:"180px auto",paddingBottom:120,gap:60},leftColumn:{gridColumnStart:1,gridColumnEnd:2},rightColumn:{gridColumnStart:2,gridColumnEnd:3}};function M(){const e=(0,i().v3)();return(0,j.jsx)(S,{className:s().UMc,title:(0,j.jsx)(n().sA,{id:"developerIntegrationNotFound.title.label",defaultMessage:"Not Found"}),subtitle:(0,j.jsx)(n().sA,{id:"developerIntegrationNotFound.subtitle.label",defaultMessage:"This integration doesn't exist."}),onNavigateBack:()=>o().cL(e),icon:(0,r().s)({width:98,height:98}),sideContent:null,children:null})}},465039:(e,t,a)=>{a.d(t,{KF:()=>d,LS:()=>l});a(16280);var i=a(296540),r=()=>a(401497),n=()=>a(981305),o=a(474848);const s=(0,i.createContext)({screenWidthType:"desktop",isMobileWidth:!1,isLowResolutionTabletWidth:!1,isDesktopWidth:!1,isTabletWidth:!1});function l(){const e=(0,i.useContext)(s);if(!e)throw new Error("ScreenWidthContext not found. Please make sure this is used within a ScreenWidthContext.Provider.");return e}function d(e){const{children:t,mobileUpperBound:a=550,lowResolutionTabletUpperBound:l=720,tabletUpperBound:d=1024,throttle:c=0}=e,u=(0,i.useRef)(null),p=(0,r().IS)((()=>({sizeObserverContainer:{width:"100%",height:0,position:"absolute"}})),[]),[g,m]=(0,i.useState)("desktop"),f=(0,i.useCallback)((e=>{e.state.width<=a?m("mobile"):e.state.width>a&&e.state.width<=l?m("lowResolutionTablet"):e.state.width>l&&e.state.width<=d?m("tablet"):m("desktop")}),[a,l,d]);(0,n().B)(u,f,c);const h="mobile"===g,b="desktop"===g,v="tablet"===g,x="lowResolutionTablet"===g,y=i.useMemo((()=>({screenWidthType:g,isMobileWidth:h,isLowResolutionTabletWidth:x,isDesktopWidth:b,isTabletWidth:v})),[g,h,x,b,v]);return(0,o.jsxs)(s.Provider,{value:y,children:[(0,o.jsx)("div",{ref:u,style:p.sizeObserverContainer}),t]})}s.displayName="ScreenWidthContext"},505776:(e,t,a)=>{a.d(t,{A:()=>r});class i extends(()=>a(757695))().default{constructor(){super(...arguments),this.updatePreviewState=e=>{this.update((t=>({...t,previewCanvasState:e(t.previewCanvasState)})))}}getInitialState(){return{chart:void 0,responsiveChartOptions:void 0,previewCanvasState:void 0,exportBackgroundColor:"gradient"}}}const r=i},515916:(e,t,a)=>{a.d(t,{A:()=>r});class i extends(()=>a(757695))().default{getInitialState(){return{open:!1}}}const r=new i},529324:(e,t,a)=>{a.d(t,{C:()=>i});const i=(0,a(340498).xh)("magnifyingGlass",{default:{loader:()=>a.e(1827).then(a.bind(a,901827))},small:{loader:()=>a.e(41805).then(a.bind(a,741805))},mini:{loader:()=>a.e(20283).then(a.bind(a,420283))},large:{loader:()=>a.e(61969).then(a.bind(a,861969))}})},532564:(e,t,a)=>{a.d(t,{V:()=>s,Z:()=>o});a(16280);var i=a(296540),r=a(474848);const n=i.createContext(void 0);function o(e){return(0,r.jsx)(n.Provider,{value:e.value,children:e.children})}function s(){const e=i.useContext(n);if(!e)throw new Error("useChartStore must be used within a ChartContextProvider");return e}n.displayName="ChartContext"},541235:(e,t,a)=>{a.d(t,{YD:()=>n,c$:()=>i,q_:()=>r});const i={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},r="completed",n="dismissed"},592589:(e,t,a)=>{a.d(t,{B:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("chartMixed",{viewBox:"0 0 64 64",svg:(0,i.jsx)("path",{d:"m60,48v6H4v-6h6v-14h12v14h4v-8h12v8h4v-22h12v22h6ZM16,28c1.84,0,3.49-.83,4.59-2.14l5.41,2.03s0,.07,0,.11c0,3.31,2.69,6,6,6s6-2.69,6-6c0-.78-.15-1.53-.43-2.22l7.49-6.55c.87.49,1.87.77,2.94.77,3.31,0,6-2.69,6-6s-2.69-6-6-6-6,2.69-6,6c0,.78.15,1.53.43,2.22l-7.49,6.55c-.87-.49-1.87-.77-2.94-.77-1.84,0-3.49.83-4.59,2.14l-5.41-2.03s0-.07,0-.11c0-3.31-2.69-6-6-6s-6,2.69-6,6,2.69,6,6,6Z"})})},603745:(e,t,a)=>{a.d(t,{A:()=>m});var i=a(296540),r=()=>a(56366),n=()=>a(959013),o=()=>a(100622),s=()=>a(638013),l=()=>a(284371),d=()=>a(515916),c=()=>a(704152),u=()=>a(623580),p=()=>a(957986),g=a(474848);function m(){const e=(0,r().O$)(d().A);return(0,g.jsx)(p().A,{open:e.open,overlayZIndex:9999999,onDismiss:()=>{d().A.reset()},preventHideChildrenWhileOpening:!0,innerStyle:{overflow:"hidden",borderRadius:6,padding:"24px 32px",width:336,fontSize:16,boxShadow:s().m,background:o().Ay.white},render:()=>(0,g.jsx)(f,{...e})})}function f(e){const[t,a]=i.useState(""),[r,s]=i.useState(!1);if(!e.open)return null;const{title:p,message:m,onConfirm:f}=e,v=a=>{const{deleteIntegrationIfConfirmationInputMatch:i}=a;e.isDestructive&&e.deleteMatchText!==t?s(!0):i&&(f(),d().A.reset())};return(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,g.jsx)("div",{style:{fontSize:16,fontWeight:l().Wy.semibold},children:p}),(0,g.jsx)("div",{style:{fontSize:14,color:o().Ay.frontTextMedium,margin:"8px 0 16px"},children:m}),e.isDestructive&&(0,g.jsxs)("div",{style:{marginBottom:12},children:[(0,g.jsx)(u().A,{autoFocus:!0,placeholder:e.deleteMatchText,value:t,onChange:t=>{const i=t.target.value;r&&e.deleteMatchText===i&&s(!1),a(i)},onSubmit:()=>v({deleteIntegrationIfConfirmationInputMatch:!1})}),r&&(0,g.jsx)("div",{style:{marginTop:4,color:o().Ay.frontRed,fontSize:12},children:e.deleteMatchError})]}),(0,g.jsxs)("div",{style:{display:"flex"},children:[(0,g.jsx)(c().A,{onClick:()=>{d().A.reset()},style:{...b.button,border:`1px solid ${o().Ay.uiLightBorder}`,marginRight:8,fontSize:15},children:(0,g.jsx)(n().sA,{id:"developerIntegration.confirmationModal.cancelLabel",defaultMessage:"Cancel"})}),(0,g.jsx)(h,{onSubmit:()=>v({deleteIntegrationIfConfirmationInputMatch:!0}),isWarning:e.isDestructive||e.isWarning,confirmationMessage:e.confirmationMessage})]})]})}function h(e){const{onSubmit:t,confirmationMessage:a,isWarning:i}=e;return(0,g.jsx)(c().A,{onClick:t,style:{...b.button,background:i?o().Ay.frontRedButtonBackground:o().Ay.blue,color:o().Ay.white,fontSize:15},hoveredStyle:{backgroundColor:i?o().Ay.frontRedButtonBackgroundHovered:o().Ay.frontBlueButtonHoveredBackground},pressedStyle:{backgroundColor:i?o().Ay.frontRedButtonBackgroundPressed:o().Ay.frontBlueButtonPressedBackground},children:a})}const b={button:{padding:6,borderRadius:6,flex:1,textAlign:"center"}}},620586:(e,t,a)=>{a.d(t,{BV:()=>c,HH:()=>g,LF:()=>d,NF:()=>v,Pi:()=>u,Q1:()=>f,nH:()=>b,tm:()=>m,wW:()=>p});var i=()=>a(100594),r=()=>a(970013),n=()=>a(751735),o=()=>a(100622),s=()=>a(534177),l=()=>a(10594);function d(e){return void 0!==e&&"auto"!==e&&"colorful"!==e}function c(e,t){if("auto"!==e){if("colorful"===e)return o().OK.colorful.slice(0,6);if(u(e)){const a="gray"===e?"dark"===t.mode?"white":"black":e;return o().OK[a]}(0,s().HB)(e)}}function u(e){return i().VY.includes(e)}function p(e,t,a){const i=function(e,t,a){if("auto"===e)return;let i;if(i="gray"===e?"dark"===a.mode?"white":"black":e,t&&u(e)){const e=o().OK[i];return[e[0],e[3]]}return o().OK[i]}(e,t,a);if(i)return u(e)&&t?{colorAxis:{minColor:i[1],maxColor:i[0],showInLegend:!1},colors:i}:{colorAxis:void 0,colors:i}}function g(e){var t,a;let{collectionContextStore:i,groupValue:n,index:s,groupBy:d,theme:c,environment:u}=e;const g=i.normalizedSchemaStore.state,m=i.normalizedFormatStore.state;if("placeholder"===(null===(t=m.chart_config)||void 0===t?void 0:t.type)||void 0===n.value)return"light"===c.mode?o().OK.translucentGray[0]:o().OK.translucentGray[1];const f=g[d.property],h=f&&((0,r().lx)(f)||(0,r().DD)(f)),b=(null===(a=m.chart_config)||void 0===a||null===(a=a.chartFormat)||void 0===a?void 0:a.colorTheme)||"auto";if("auto"===b&&h){const e=(0,l().$e)({environment:u,groupFormat:{property:d.property,value:n},schema:g,format:m,theme:c,ignoreDisableColorColumns:!0});if(e)return e.chartColor}const v=p("auto"===b?"colorful":b,!1,c),x=(null==v?void 0:v.colors)||o().OK.colorful;return x[s%x.length]}function m(e,t){return t?{linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,"rgba(0, 0, 0, 0)"],[1,"rgba(0, 0, 0, 0)"]]}:{linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,(0,n().X4)(e,.1)],[1,(0,n().X4)(e,0)]]}}const f=["gradient","blue","red","yellow","grey","none"],h=(0,a(959013).YK)({gradient:{defaultMessage:"Gradient",id:"chart.export.background.gradient"},blue:{defaultMessage:"Blue",id:"chart.export.background.blue"},red:{defaultMessage:"Red",id:"chart.export.background.red"},yellow:{defaultMessage:"Yellow",id:"chart.export.background.yellow"},grey:{defaultMessage:"Grey",id:"chart.export.background.grey"},none:{defaultMessage:"None",id:"chart.export.background.none"}});function b(e){return h[e]}function v(e,t,a){const i="light"===e.mode?a?100:50:a?600:500;switch(t){case"blue":return e.accentColors.blue[i];case"red":return e.accentColors.red[i];case"yellow":return e.accentColors.yellow[i];case"grey":return e.accentColors.gray[i];case"none":const r=a?e.buttonHoveredBackground:e.popoverBackground;return`linear-gradient(to top right, ${r} calc(50% - 1px), ${e.regularDividerColor}, ${r} calc(50% + 1px) )`;case"gradient":return`${a?`linear-gradient(${e.buttonHoveredBackground}, ${e.buttonHoveredBackground}), `:""}${"dark"===e.mode?"linear-gradient(123deg, #3C3F41 40.15%, #4A2F27 89.33%)":"linear-gradient(123deg, #FEF5E9 40.15%, #FEE9E9 89.33%)"}`;default:(0,s().HB)(t)}}},656881:(e,t,a)=>{a.d(t,{b:()=>r,y:()=>n});var i=()=>a(972435);const r=(0,a(959013).YK)({noData:{defaultMessage:"No data",id:"chartError.noData"},badYAxisRange:{defaultMessage:"No data due to axis range",id:"chartError.badYAxisRange"},unconfiguredProperty:{id:"chartError.unconfiguredProperty",defaultMessage:"Property is not configured. Please make another selection."},unsupportedProperty:{id:"chartError.unsupportedProperty",defaultMessage:"This property type is not supported. Please select another property"},unsupportedFormula:{id:"chartError.unsupportedFormula",defaultMessage:"This formula is not supported. Please select another property or adjust your formula."},deletedProperty:{id:"chartError.deletedProperty",defaultMessage:"This property has been deleted. Please select another property."},invalidAggregation:{id:"chartError.invalidAggregation",defaultMessage:"Previously selected property is no longer valid with the current aggregation. Please make another selection."},invalidPropertyValueChart:{id:"chartError.invalidPropertyValueChart",defaultMessage:"Selected property is no longer valid with the previous configured chart. Please make another selection."},noValues:{id:"chartError.noValues",defaultMessage:"This property has no values. Please add some values or select another property."}});function n(e){switch(e){case"groupBy_property_not_configured":case"aggregation_property_not_configured":case"name_property_not_configured":case"property_value_property_not_configured":return i().A.formatMessage(r.unconfiguredProperty);case"groupBy_property_not_groupable":case"stackBy_property_not_groupable":return i().A.formatMessage(r.unsupportedProperty);case"groupBy_formula_not_groupable":case"stackBy_formula_not_groupable":return i().A.formatMessage(r.unsupportedFormula);case"groupBy_property_deleted":case"stackBy_property_deleted":case"aggregation_deleted":case"name_property_deleted":case"property_value_property_deleted":return i().A.formatMessage(r.deletedProperty);case"aggregation_invalid":return i().A.formatMessage(r.invalidAggregation);case"stackBy_property_no_values":return i().A.formatMessage(r.noValues);case"name_property_invalid":case"property_value_property_invalid":return i().A.formatMessage(r.invalidPropertyValueChart);default:return}}},684749:(e,t,a)=>{a.r(t),a.d(t,{CreatorProfile:()=>rg});var i=a(296540),r=()=>a(484714),n=()=>a(56366),o=()=>a(401497),s=()=>a(148307),l=()=>a(187174),d=()=>a(959013),c=()=>a(100622),u=()=>a(2143),p=()=>a(313786),g=()=>a(171789),m=()=>a(465039),f=()=>a(532688),h=()=>a(756279),b=()=>a(351360),v=(a(16280),a(898992),a(354520),()=>a(402390)),x=()=>a(679927),y=()=>a(449506),C=()=>a(901389),w=()=>a(495262),j=()=>a(436572),S=()=>a(989423),_=()=>a(212050),M=()=>a(493823),A=a(474848);function I(e){const{children:t}=e,a=(0,o().IS)((()=>({wrapperContainer:{fontSize:15}})),[]);return(0,A.jsx)("span",{style:a.wrapperContainer,children:t})}function k(e){const{children:t}=e,a=(0,o().IS)((()=>({actionWrapperContainer:{display:"flex",alignItems:"center",gap:2,marginLeft:20}})),[]);return(0,A.jsx)("div",{style:a.actionWrapperContainer,children:t})}function T(e){const t=(0,o().IS)((()=>({actionButton:{color:"rgba(153, 153, 153, 1)",fontWeight:500,height:void 0,marginLeft:0,fontSize:15,padding:"3px 8px"},actionButtonHovered:{background:"rgba(255, 255, 255, 0.125)",borderRadius:"4px",color:"rgba(230, 230, 230, 1)"},actionButtonPressed:{background:"rgba(255, 255, 255, 0.125)",borderRadius:"4px",color:"rgba(191, 191, 191, 1)"}})),[]),{buttonLabel:a,onClick:i,onClose:r}=e;return(0,A.jsxs)(k,{children:[(0,A.jsx)(M().p,{onClick:i,style:t.actionButton,hoveredStyle:t.actionButtonHovered,pressedStyle:t.actionButtonPressed,children:a}),(0,A.jsx)(P,{onClose:r})]})}function P(e){const{onClose:t}=e,a=(0,o().IS)((e=>({closeIconContainer:{padding:4,color:"rgba(153, 153, 153, 1)"},closeIconContainerHovered:{background:"rgba(255, 255, 255, 0.125)",borderRadius:"4px",color:"rgba(230, 230, 230, 1)"},closeIconContainerPressed:{background:"rgba(255, 255, 255, 0.125)",borderRadius:"4px",color:"rgba(191, 191, 191, 1)"},closeIcon:{width:20,height:20}})),[]);return(0,A.jsx)(M().p,{onClick:()=>{j().N2(),null==t||t()},style:a.closeIconContainer,hoveredStyle:a.closeIconContainerHovered,pressedStyle:a.closeIconContainerPressed,children:(0,_().u)(a.closeIcon)})}var L=()=>a(284371);function D(){return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pin.error.tooManyPinnedTemplates",defaultMessage:"No more than {maxPinnedTemplateCount} can be pinned.",values:{maxPinnedTemplateCount:x().v8}})})}function R(e){const{templateName:t}=e,a=U();return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pin.success",defaultMessage:"<bold>{templateName}</bold> has been pinned.",values:{templateName:t||"Template",bold:e=>(0,A.jsx)("span",{style:t?a.templateNameBold:{},children:e})}})})}function E(e){const{templateName:t}=e,a=U();return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.unpin.success",defaultMessage:"<bold>{templateName}</bold> has been unpinned.",values:{bold:e=>(0,A.jsx)("span",{style:t?a.templateNameBold:{},children:e}),templateName:t||"Template"}})})}function B(e){const{templateName:t}=e,a=U();return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pin.error",defaultMessage:"Failed to pin <bold>{templateName}</bold>.",values:{bold:e=>(0,A.jsx)("span",{style:t?a.templateNameBold:{},children:e}),templateName:t||"template"}})})}function F(e){const{templateName:t}=e,a=U();return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.unpin.error",defaultMessage:"Failed to unpin <bold>{templateName}</bold>.",values:{bold:e=>(0,A.jsx)("span",{style:t?a.templateNameBold:{},children:e}),templateName:t||"template"}})})}function U(){return(0,o().IS)((()=>({templateNameBold:{fontWeight:L().Wy.semibold}})),[])}a(944114),a(737550);var N=()=>a(228271),z=()=>a(209199),O=()=>a(534177),W=()=>a(434945),V=()=>a(972435);const H=(0,d().YK)({publicIntegrationLabel:{id:"creatorProfile.integrationSubmission.publicIntegrationLabel",defaultMessage:"Public"},internalIntegrationLabel:{id:"creatorProfile.integrationSubmission.internalIntegrationLabel",defaultMessage:"Internal"},integrationTypeLabel:{id:"creatorProfile.integrationSubmission.integrationType.label",defaultMessage:"Type"},integrationLogoLabel:{id:"creatorProfile.integrationSubmission.integrationLogo.label",defaultMessage:"Logo"},spaceLabel:{id:"creatorProfile.integrationSubmission.space.label",defaultMessage:"Associated workspace"},spaceSubtitle:{id:"creatorProfile.integrationSubmission.space.subtitle",defaultMessage:"Select a workspace to install the integration to. Workspace owners will be able to manage the integration as well. You can upgrade the integration to use OAuth later"},websiteUrlTypeLabel:{id:"creatorProfile.integrationSubmission.websiteUrlType.label",defaultMessage:"Website"},privacyPolicyTypeLabel:{id:"creatorProfile.integrationSubmission.privacyPolicyType.label",defaultMessage:"Privacy Policy URL"},privacyPolicyTypeSubtitle:{id:"creatorProfile.integrationSubmission.privacyPolicyType.subtitle",defaultMessage:"Used to link to your integration’s privacy policy in your integration page and authentication screens"},developerNameLabel:{id:"creatorProfile.integrationSubmission.developerName.label",defaultMessage:"Company name"},termsOfUseTypeLabel:{id:"creatorProfile.integrationSubmission.termsOfUseType.label",defaultMessage:"Terms of Use URL"},termsOfUseTypeSubtitle:{id:"creatorProfile.integrationSubmission.termsOfUseType.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens"},emailLabel:{id:"creatorProfile.integrationSubmission.email.label",defaultMessage:"Email"},emailSubtitle:{id:"creatorProfile.integrationSubmission.email.subtitle",defaultMessage:"Enter the email address of the integration's developer"},oauthSectionHeader:{id:"creatorProfile.integrationSubmission.oauthSectionHeader",defaultMessage:"OAuth domains & URIs"},redirectUrisTypeLabel:{id:"creatorProfile.integrationSubmission.redirectUrisType.label",defaultMessage:"Redirect URIs"},redirectUrisTypeSubtitle:{id:"creatorProfile.integrationSubmission.redirectUrisType.subtitle",defaultMessage:"In the Notion OAuth flow, users will be redirected to this path after they have authenticated with Notion. The path will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address. It must also be included in the token request."},taglineTypeLabel:{id:"creatorProfile.integrationSubmission.taglineType.label",defaultMessage:"Tagline"},templateUrlTypeLabel:{id:"creatorProfile.integrationSubmission.templateUrlType.label",defaultMessage:"Notion URL for optional template"},templateUrlTypeSubtitle:{id:"creatorProfile.integrationSubmission.templateUrlType.subtitle",defaultMessage:"Use this field if you'd like to offer a user a Notion page to duplicate into their workspace during OAuth. URL must be to a public Notion page."},tokenTypeLabel:{id:"creatorProfile.integrationSubmission.tokenType.label",defaultMessage:"Internal Integration Secret"},capabilitiesTypeHeader:{id:"creatorProfile.integrationSubmission.capabilitiesType.header",defaultMessage:"Capabilities"},unfurlUrlLabel:{id:"creatorProfile.integrationSubmission.unfurlUrl.label",defaultMessage:"Unfurl Callback URL"},unfurlUrlCaption:{id:"creatorProfile.integrationSubmission.unfurlUrl.caption",defaultMessage:"Called with a POST request when an unfurl action occurs and with a DELETE request when unfurl url preview(s) or mention(s) is deleted"},unfurlUrlSectionHeader:{id:"creatorProfile.integrationSubmission.unfurlUrl.header",defaultMessage:"Unfurling domain & patterns"},domainLabel:{id:"creatorProfile.integrationSubmission.domain.label",defaultMessage:"Unfurl Url Domain"},urlMatchingAndPlaceholderLabel:{id:"creatorProfile.integrationSubmission.urlmatching.label",defaultMessage:"URL matching and placeholder"},urlMatchingAndPlaceholderCaption:{id:"creatorProfile.integrationSubmission.urlmatching.caption",defaultMessage:"When users paste a URL that matches this pattern on your verified domain, they'll have the option to unfurl it as a preview. Any sample URLs are validated against provided patterns"},externalOauthAuthorizeUrlLabel:{id:"creatorProfile.integrationSubmission.externalOauthAuthorizeUrl.label",defaultMessage:"OAuth Authorize URL"},externalOauthAuthorizeUrlCaption:{id:"creatorProfile.integrationSubmission.externalOauthAuthorizeUrl.caption",defaultMessage:"Used by Notion to initiate user authorization with the integration"},externalOauthTokenUrlLabel:{id:"creatorProfile.integrationSubmission.externalOauthTokenUrl.label",defaultMessage:"OAuth Token URL"},externalOauthTokenUrlCaption:{id:"creatorProfile.integrationSubmission.externalOauthTokenUrl.caption",defaultMessage:"Called by Notion to retrieve an access token for the unfurl callback URL"},externalOauthScopesLabel:{id:"creatorProfile.integrationSubmission.externalOauthScopes.label",defaultMessage:"OAuth Scopes"},externalOauthScopesCaption:{id:"creatorProfile.integrationSubmission.externalOauthScopes.caption",defaultMessage:"Optional scopes string"},externalDeletionUrlLabel:{id:"creatorProfile.integrationSubmission.externalDeletionUrl.label",defaultMessage:"Deleted Token Callback URL "},externalDeletionUrlCaption:{id:"creatorProfile.integrationSubmission.externalDeletionUrl.caption",defaultMessage:"Called by Notion when a user removes your integration"},externalClientIdLabel:{id:"creatorProfile.integrationSubmission.externalClientId.label",defaultMessage:"OAuth Client ID"},externalClientSecretLabel:{id:"creatorProfile.integrationSubmission.externalClientSecret.label",defaultMessage:"OAuth Client Secret"},externalOauthSectionTitle:{id:"creatorProfile.integrationSubmission.externalOauthSectionTitle",defaultMessage:"External authorization setup"},externalOauthSectionSubtitle:{id:"creatorProfile.integrationSubmission.externalOauthSectionSubtitle",defaultMessage:"See Notion 2.0 documentation for information on OAuth 2.0"},unfurlingSectionTitle:{id:"creatorProfile.integrationSubmission.unfurlingSectionTitle",defaultMessage:"Unfurling domain & patterns"},unfurlingSwitcherLabel:{id:"creatorProfile.integrationSubmission.unfurlingSwitcherLabel",defaultMessage:"Enable link preview"},authorizationUrlLabel:{id:"creatorProfile.integrationSubmission.authorizationUrlLabel",defaultMessage:"Authorization URL"},disallowedWordError:{id:"creatorProfile.integrationSubmission.errorMessages.disallowedWordError",defaultMessage:'{field} cannot contain the word "{word}"'}}),q=(0,d().YK)({nameIsTakenError:{id:"creatorProfile.integrationPublishRequest.errorMessages.nameIsTakenError",defaultMessage:"This integration name has already been used. Please try another one."},previewImages:{id:"creatorProfile.integrationPublishRequest.previewImages.label",defaultMessage:"Preview images"},description:{id:"creatorProfile.integrationPublishRequest.description.label",defaultMessage:"Description"},descriptionPlaceholder:{id:"creatorProfile.integrationPublishRequest.description.placeholder",defaultMessage:"Explain how your integration works"},howToUse:{id:"creatorProfile.integrationPublishRequest.howToUse.label",defaultMessage:"How to use"},howToUsePlaceholder:{id:"creatorProfile.integrationPublishRequest.howToUse.placeholder",defaultMessage:"1. In clear numbered steps, describe how to use your integration"},addToNotion:{id:"creatorProfile.integrationPublishRequest.addToNotion.label",defaultMessage:"Installation URL"},slug:{id:"creatorProfile.integrationPublishRequest.slug.label",defaultMessage:"Slug"},slugPlaceholder:{id:"creatorProfile.integrationPublishRequest.slug.placeholder",defaultMessage:"Optional custom slug"},categoryLabel:{id:"creatorProfile.integrationPublishRequest.category.label",defaultMessage:"Category"},featureLabel:{id:"creatorProfile.integrationPublishRequest.feature.label",defaultMessage:"Feature"},requiredFieldError:{id:"creatorProfile.integrationPublishRequest.errorMessages.requiredFieldError",defaultMessage:"{name} is required"},submitError:{id:"creatorProfile.integrationPublishRequest.errorMessages.submitError",defaultMessage:"There was an error submitting the integration for publishing"},previewImagesRequiredError:{id:"creatorProfile.integrationPublishRequest.errorMessages.previewImagesError",defaultMessage:"At least one preview image is required"},maxCategoriesError:{id:"creatorProfile.integrationPublishRequest.errorMessages.maxCategoriesError",defaultMessage:"You can only select up to 3 categories"},nameContainsIntegrationError:{id:"creatorProfile.integrationPublishRequest.errorMessages.nameContainsIntegrationError",defaultMessage:"Integration name must not contain the word 'Integration'"},invalidUrlError:{id:"creatorProfile.integrationPublishRequest.errorMessages.invalidUrlError",defaultMessage:"Invalid URL"},maxFeaturesError:{id:"creatorProfile.integrationPublishRequest.errorMessages.maxFeaturesError",defaultMessage:"You can only select up to 3 features"},howToUseTooLongError:{id:"creatorProfile.integrationPublishRequest.errorMessages.howToUseTooLongError",defaultMessage:"How to use is too long"},descriptionTooLongError:{id:"creatorProfile.integrationPublishRequest.errorMessages.descriptionTooLongError",defaultMessage:"Description is too long"},notCreator:{id:"creatorProfile.integrationPublishRequest.errorMessages.notCreator",defaultMessage:"You are not the creator of this integration. Only the creator can publish this integration"},featuresMismatchError:{id:"creatorProfile.integrationPublishRequest.errorMessages.featuresMismatchError",defaultMessage:'The selected features: "{features}" do not match integration capabilities'},integrationError:{id:"creatorProfile.integrationPublishRequest.errorMessages.integrationError",defaultMessage:"There is an error in the integration Configuration and/or Basic information."}}),K=(0,d().YK)({slugIsEmptyError:{id:"creatorProfile.integrationPublishRequest.errorMessages.slugIsEmptyError",defaultMessage:"Slug cannot be empty"},slugTooLongError:{id:"creatorProfile.integrationPublishRequest.errorMessages.slugTooLongError",defaultMessage:"Slug is too long"},slugCharactersError:{id:"creatorProfile.integrationPublishRequest.errorMessages.slugCharactersError",defaultMessage:"Slug can only contain lowercase letters, numbers, and hyphens"},slugHyphenError:{id:"creatorProfile.integrationPublishRequest.errorMessages.slugHyphenError",defaultMessage:"Slug cannot contain consecutive hyphens."},slugIsTakenError:{id:"creatorProfile.integrationPublishRequest.errorMessages.slugIsTakenError",defaultMessage:"This integration slug has already been used. Please try another one."}});function Z(e){if(!e)return;const t=JSON.parse(e);return"document"===t.nodeType&&"text"===t.content[0].content[0].nodeType?t.content[0].content[0].value:void 0}function $(e){try{const t=e.get("locale");return t&&z().Yr.some((e=>e===t))?t:void 0}catch(t){return}}function Y(e){const[t,a,i,r,n,o]=(null==e?void 0:e.split("/"))||[],s=function(e){if("draft"===e)return"draft";if("published"===e)return"published";if("new"===e)return"new";throw new Error("Bad form type provided")}(n);return"new"===s?{type:s,id:void 0,contentfulId:o}:"draft"===s||"published"===s?{type:s,id:o}:void(0,O().HB)(s)}function G(e){const{setFormData:t,formData:a,formFields:i,formStateType:r,templateStore:n,actorEmail:o}=e,s=(0,W().a_)({formData:a,setFormData:t,formStateType:r,currentFieldNames:i,formFieldValidationSchema:re}),l=(0,W().v)({formData:a,setFormData:t,formStateType:r,templateStore:n,currentFieldNames:i,formFieldValidationSchema:re}),d=function(e){const{name:t,actorEmail:a,setFormData:i,companyName:r}=e;let n=!0;if((0,N().Fn)(a))return n;for(const o of x().I5)t&&t.toLowerCase().includes(o)&&(i({field:"name",error:V().A.formatMessage(H.disallowedWordError,{field:"Name",word:o})}),n=!1),r&&r.toLowerCase().includes(o)&&(i({field:"developer_name",error:V().A.formatMessage(H.disallowedWordError,{field:"Company Name",word:o})}),n=!1);return n}({name:a.name.value,actorEmail:o,companyName:a.developer_name.value,setFormData:t});return l.length>0||(null==s?void 0:s.length)>0||!d||(0,W().px)({formData:a,formStateType:r,currentFieldNames:i,formFieldValidationSchema:re})}function X(e,t){return"approved"===e?"published":"pending"===e&&null!=t&&t.id?"published_in_review":"rejected"===e&&null!=t&&t.id?"published_rejected":"rejected"===e?"rejected":"in_review"}const Q=["icon","external_oauth_authorize_url","external_oauth_token_url","external_client_id","external_client_secret","external_oauth_scopes","external_deletion_url"],J=["unfurl_url","domain","url_matching_and_placeholder"],ee=["update-third-party-external-integration","update-first-party-external-integration"],te=["update-third-party-external-integration","update-compliance-integration","update-first-party-external-integration","create-third-party-external-integration","create-compliance-integration"],ae=["update-third-party-external-integration","update-first-party-external-integration","create-third-party-external-integration","create-first-party-external-integration"],ie=["create-bot","update-bot","create-guest-integration","create-third-party-external-integration","update-compliance-integration"],re={type:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},name:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},icon:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},space:{supportedBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},capabilities:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},token:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},authorization_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},redirect_uris:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},template_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},developer_name:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},website_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},tagline:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},privacy_policy_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},terms_of_use_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},email:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},unfurl_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},domain:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1}},url_matching_and_placeholder:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1}},external_oauth_authorize_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_oauth_token_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_oauth_scopes:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},external_client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_deletion_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}}};function ne(e,t){return t&&void 0!==e&&"published"!==e?`published_${e}`:e}var oe=()=>a(559845);const se=20;function le(e){const{creatorId:t,orderBy:a,paid:i}=e;return`${t}::${a}::${i}`}async function de(e){var t;const{environment:a,locale:i,creatorId:r,includeLocalizedTemplates:n}=e,{page:o,orderBy:s="recent",paid:l="all"}=oe().A.state.publishedTemplateSearchArgs,d=le({creatorId:r,orderBy:s,paid:l}),c=oe().A.state.publishedTemplatesSearch;if(null!=c&&null!==(t=c[d])&&void 0!==t&&null!==(t=t.templates)&&void 0!==t&&t[o-1])return!0;const u=await y().callApi({eventName:"getCreatorTemplates",environment:a,data:{offset:se*(o-1),limit:se,locale:(0,v().H)(i),orderBy:s,filterBy:{paid:"all"===l?void 0:l},includeLocalizedTemplates:n}});if("success"===u.type){const e=u.data.templateIds,t=u.data.templateGroupsByContentfulId,a=u.data.count||0;if(c[d]){const i=c[d];return oe().A.setState({...oe().A.state,publishedTemplatesSearch:{...oe().A.state.publishedTemplatesSearch,[d]:{count:a,templates:[...i.templates,e],templateGroupsByContentfulId:{...i.templateGroupsByContentfulId,...t||{}}}}}),!0}return oe().A.setState({...oe().A.state,publishedTemplatesSearch:{...c,[d]:{count:a,templates:[e],templateGroupsByContentfulId:t||{}}}}),!0}return!1}async function ce(e){const{templateId:t,environment:a,type:i,templateName:r,isUndo:n,creatorId:o}=e;try{const e=oe().A.state.pinnedTemplates,s="pin"===i?[...e,t]:e.filter((e=>e!==t));if(s.length>x().v8)return j().D6({label:(0,A.jsx)(D,{})}),!1;if("success"===(await y().callApi({eventName:"updatePinnedTemplates",environment:a,data:{templateIds:s}})).type){oe().A.setState({...oe().A.state,pinnedTemplates:s});const e="pin"===i?"creator_profile_template_pin":"creator_profile_template_unpin";return S().vd(a,e),n||j().D6({label:"pin"===i?(0,A.jsx)(R,{templateName:r}):(0,A.jsx)(E,{templateName:r}),right:(0,A.jsx)(T,{buttonLabel:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pin.unpin.undo",defaultMessage:"Undo"}),onClick:async()=>{w().tN({environment:a,preventSelectText:!0}),j().N2();await ce({environment:a,templateId:t,templateName:r,creatorId:o,isUndo:!0,type:"pin"===i?"unpin":"pin"})&&j().D6({label:"pin"===i?(0,A.jsx)(E,{templateName:r}):(0,A.jsx)(R,{templateName:r}),right:(0,A.jsx)(k,{children:(0,A.jsx)(P,{})})})}})}),!0}throw new Error}catch(s){return j().D6({label:"pin"===i?(0,A.jsx)(B,{templateName:r}):(0,A.jsx)(F,{templateName:r}),right:(0,A.jsx)(T,{buttonLabel:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pin.unpin.error.retry",defaultMessage:"Retry"}),onClick:async()=>{j().N2(),await ce({environment:a,templateId:t,templateName:r,creatorId:o,isUndo:n,type:i})}})}),!1}}async function ue(e){const{environment:t,id:a}=e,i=await y().callApi({eventName:"deleteTemplateDraft",environment:t,data:{templateDraftId:a}});return"success"===i.type?(S().vd(t,"creator_profile_template_delete_draft"),oe().A.setState({...oe().A.state,draftTemplates:{}}),!0):(C().Qg(i),!1)}async function pe(e){const{environment:t,id:a}=e,i=await y().callApi({eventName:"deleteTemplate",environment:t,data:{templateId:a}});return"success"===i.type?(S().vd(t,"creator_profile_template_delete"),!0):(C().Qg(i),!1)}async function ge(e,t){if(!t.startsWith("/profile/templates/form/"))return!0;const{type:a,id:i}=Y(t);if("new"===a)return!0;const r=await y().callApi({eventName:"validateActorOwnsTemplate",environment:e,data:{type:a,id:i}});return"success"===r.type&&r.data.actorOwnsTemplate}var me=()=>a(231656);var fe=()=>a(628199),he=()=>a(769206),be=(a(672577),a(581454),()=>a(432540)),ve=()=>a(704152),xe=()=>a(406699),ye=()=>a(928600),Ce=()=>a(678553),we=()=>a(460292),je=()=>a(132389),Se=()=>a(722872),_e=()=>a(757695);class Me extends _e().default{getInitialState(){return{profileFormType:null}}}const Ae=new Me;var Ie=()=>a(204063);function ke(e){const{showCreatorProfileForm:t,header:a,description:i,subdescription:r}=e,n=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"space-between",gap:24,flexWrap:"wrap"},topContainer:{display:"flex",flexDirection:"column",gap:4},sidebarHeader:{fontSize:18,fontWeight:L().Wy.semibold,color:e.regularTextColor},sidebarDescription:{fontSize:14,color:e.lightTextColor,fontWeight:L().Wy.regular},createButtonColor:{background:e.white}})),[]);return(0,A.jsxs)("div",{style:n.container,children:[(0,A.jsxs)("div",{style:n.topContainer,children:[a,i,r]}),(0,A.jsx)("div",{children:(0,A.jsx)(Ie().A,{color:"black",size:"xl",onClick:t,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.template.button.createProfile",defaultMessage:"Create a Profile"})})})]})}const Te=ke;var Pe=()=>a(987017);function Le(e){let{tabs:t,style:a,defaultSelectedIndex:r=0}=e;const n=(0,o().IS)((()=>({menuItem:{paddingLeft:0,marginTop:"20px",marginBottom:"48px"},selectedTabTitleStyle:{fontWeight:L().Wy.semibold}})),[]),[s,l]=(0,i.useState)(r);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Pe().Ay,{tabs:t.map((e=>e.title)),selectedIndex:s,onChange:e=>{var a,i;l(e),null===(a=(i=t[e]).onChange)||void 0===a||a.call(i)},style:{...n.menuItem,...a},selectedTabTitleStyle:n.selectedTabTitleStyle}),t[s].content]})}var De=()=>a(62554),Re=(a(814603),a(147566),a(198721),()=>a(861017)),Ee=()=>a(435009),Be=()=>a(780054),Fe=()=>a(340498);const Ue=(0,Fe().wt)("bookOpen",{viewBox:"0 0 20 20",svg:(0,A.jsx)("path",{d:"M9.375 6.25v10.625H7.812l-.59-1.184C6.984 15.219 6.634 15 6.103 15H1.875V3.75h5c1.544 0 2.5.956 2.5 2.5zm3.75-2.5c-1.544 0-2.5.956-2.5 2.5v10.625h1.563l.59-1.184c.238-.472.588-.691 1.119-.691h4.228V3.75h-5z"})});var Ne=()=>a(770634);function ze(e){const{children:t}=e,a=(0,o().IS)((()=>({creatorProfileNavTabWrapperContainer:{display:"flex",gap:"6px",alignItems:"center",fontSize:"15px"}})),[]);return(0,A.jsx)("span",{style:a.creatorProfileNavTabWrapperContainer,children:t})}const Oe=["creatorProfile","creatorProfileTemplates","creatorProfileIntegrations","creatorProfileAnalytics","creatorProfileCoupons","creatorProfileLearn"],We={creatorProfile:{index:Oe.indexOf("creatorProfile"),route:"/profile",tabLabel:(0,A.jsxs)(ze,{children:[(0,a(385527).h)({height:16,width:16}),(0,A.jsx)(d().sA,{defaultMessage:"Profile",id:"creatorProfile.tabs.header.profile"})]},"profile")},creatorProfileTemplates:{index:Oe.indexOf("creatorProfileTemplates"),route:"/profile/templates",tabLabel:(0,A.jsxs)(ze,{children:[(0,a(214683).T)({height:16,width:16}),(0,A.jsx)(d().sA,{defaultMessage:"Templates",id:"creatorProfile.tabs.header.templates"})]},"templates")},creatorProfileIntegrations:{index:Oe.indexOf("creatorProfileIntegrations"),route:"/profile/integrations",tabLabel:(0,A.jsxs)(ze,{children:[(0,a(243642).G)({height:16,width:16}),(0,A.jsx)(d().sA,{defaultMessage:"Integrations",id:"creatorProfile.tabs.header.integrations"})]},"integrations")},creatorProfileAnalytics:{index:Oe.indexOf("creatorProfileAnalytics"),route:"/profile/analytics",tabLabel:(0,A.jsxs)(ze,{children:[(0,a(592589).B)({height:16,width:16}),(0,A.jsx)(d().sA,{defaultMessage:"Analytics",id:"creatorProfile.tabs.header.analytics"})]},"analytics")},creatorProfileLearn:{index:Oe.indexOf("creatorProfileLearn"),route:"https://www.notion.com/help/notion-academy/course/templates-and-marketplace",tabLabel:(0,A.jsxs)(ze,{children:[Ue({height:16,width:16}),(0,A.jsx)(d().sA,{defaultMessage:"Learn",id:"creatorProfile.tabs.header.learn"})]},"learn")},creatorProfileCoupons:{index:Oe.indexOf("creatorProfileCoupons"),route:"/profile/coupons",tabLabel:(0,A.jsxs)(ze,{children:[(0,Ne().C)({height:16,width:16}),(0,A.jsx)(d().sA,{defaultMessage:"Coupons",id:"creatorProfile.tabs.header.coupons"})]},"coupons")}},Ve=["/profile","/profile/templates","/profile/templates/faq","/profile/templates/form/new","/profile/templates/form/new/","/profile/templates/form/published/","/profile/templates/form/draft/","/profile/integrations","/profile/integrations/form/new-integration","/profile/integrations/public/","/profile/integrations/internal/","/profile/analytics","/profile/coupons","/profile/coupons/new-coupon","/profile/coupons/edit/"];function He(e,t){return`/profile/templates/form/${e}/${t}`}const qe={hideTabBorder:!0,tabBorderStyle:{borderWidth:0},style:{flexDirection:"column",boxShadow:"none"}};function Ke(e){const{handleChange:t,activeIndex:a,isVertical:r}=e,n=(0,o().IS)((()=>({navTab:{fontWeight:L().Wy.medium,color:c().Ay.frontTextLight,paddingBottom:0,paddingTop:"4px"},tabTitle:{color:"inherit"},selectedTab:{color:c().Ay.frontText}})),[]),s=(0,i.useMemo)((()=>Oe.map((e=>We[e].tabLabel))),[]);return(0,A.jsx)(Pe().Ay,{tabs:s,selectedIndex:a,onChange:e=>{const i=Oe[e],r=We[i];"creatorProfileLearn"!==i?(a!==e&&"creatorProfile"===i&&Ae.reset(),t(r.route)):window.open(r.route,"_blank","noopener,noreferrer")},tabTitleStyle:n.tabTitle,tabStyle:n.navTab,selectedTabStyle:n.selectedTab,...r?qe:{}})}const Ze=(0,i.createContext)({onBeforeViewChange:{current:null},name:void 0,setView:()=>{},searchParams:new URLSearchParams});function $e(){const e=i.useContext(Ze);if(void 0===e)throw new Error("useCreatorProfileNavContext must be used within CreatorProfileNav");return e}function Ye(e){const{children:t}=e,a=(0,r().v3)(),i=window.location.search,o=new URLSearchParams(i);(0,n().O$)(a.RouterStore);const s=window.location.pathname.endsWith("/")?window.location.pathname.slice(0,window.location.pathname.length-1):window.location.pathname,l=(0,Re().parseRoute)({url:window.location.href,isMobile:a.device.isMobile,baseUrl:Be().A.domainBaseUrl,publicDomainName:Be().A.publicDomainName,protocol:Be().A.protocol,currentUrl:window.location.href}).name;return(0,O().O)(We,l)&&function(e){for(const t of Ve){if(e===t)return!0;if(e.includes("/profile/templates/form/published/")||e.includes("/profile/templates/form/new/")||e.includes("/profile/templates/form/draft/")||e.includes("/profile/integrations/public/")||e.includes("/profile/integrations/internal/")||e.includes("/profile/coupons/new-coupon")||e.includes("/profile/coupons/edit/"))return!0}return!1}(s)?(0,A.jsx)(Ge,{name:l,path:s,searchParams:o,children:t}):null}function Ge(e){const{name:t,children:a,path:n,searchParams:s}=e,{isMobileWidth:l,isLowResolutionTabletWidth:d}=(0,m().LS)(),c=(0,o().IS)((()=>({navContainerLarge:{display:"flex",justifyContent:"space-between"},navMenuLarge:{width:"160px",marginRight:"24px",marginLeft:"24px"},pageLargeLayout:{width:"66vw",margin:"0 auto"},navContainerSmall:{display:"flex",flexDirection:"column",marginBottom:"32px"},navMenuSmall:{width:"100%"},pageSmallLayout:{margin:"0 24px"},navMenuLargeFixedContainer:{position:"fixed",top:"106px"}})),[]),u=(0,r().v3)(),p=(0,i.useRef)(null),g=(0,i.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!0;if(p.current&&!t)try{await p.current()}catch(i){if(!(i instanceof Error&&"abandon_route"===i.message))throw i;a=!1}a&&Ee().oo({environment:u,url:e})}),[u]),f=We[t].index,h=l||d;return(0,A.jsx)(Ze.Provider,{value:{name:n,onBeforeViewChange:p,setView:g,searchParams:s},children:(0,A.jsxs)("section",{style:h?c.navContainerSmall:c.navContainerLarge,children:[(0,A.jsx)("section",{style:h?c.navContainerSmall:c.navMenuLarge,children:h?(0,A.jsx)(Ke,{activeIndex:f,handleChange:g,isVertical:!h}):(0,A.jsx)("div",{style:c.navMenuLargeFixedContainer,children:(0,A.jsx)(Ke,{activeIndex:f,handleChange:g,isVertical:!h})})}),(0,A.jsx)("section",{style:h?c.pageSmallLayout:c.pageLargeLayout,children:a})]})})}Ze.displayName="CreatorProfileNavContext";var Xe=()=>a(710144),Qe=()=>a(72135),Je=()=>a(697476),et=()=>a(952047),tt=()=>a(532564),at=()=>a(505776),it=()=>a(760217),rt=()=>a(554509),nt=()=>a(933117);const ot=["web","app"],st=["1d","7d","28d","total"],lt=["all","paid","free"];function dt(){const{isFeatureEnabled:e}=(0,Xe().O)("marketplace_analytics_filters"),[t,a]=(0,i.useState)({dateRange:"7d",sources:["web","app"],paid:["paid","free"],templateListingId:void 0});(0,i.useEffect)((()=>{e&&a((e=>({...e,dateRange:"28d"})))}),[e]);return{filtersConfig:t,onDateRangeChange:e=>{a({...t,dateRange:e})},onSourceChange:e=>{const{sources:i}=t;if(i.includes(e)&&i.length<=1)return;const r=[...i];r.includes(e)?r.splice(r.indexOf(e),1):r.push(e),a({...t,sources:r})},onPaidChange:e=>{a("all"!==e?{...t,paid:[e]}:{...t,paid:["paid","free"]})},onTemplateListingIdChange:e=>{t.templateListingId!==e?a({...t,templateListingId:e}):a({...t,templateListingId:void 0})}}}function ct(e){const{onDateRangeChange:t,dateRange:a}=e,i=(0,o().IS)((()=>({filtersButton:{display:"flex",alignItems:"center",gap:5}})),[]),r={onSelect:e=>{t(e)},items:st,renderOrigin:e=>(0,A.jsxs)(M().p,{...e,style:i.filtersButton,children:[(0,A.jsx)(rt().D,{styleName:"UIRegular-14px/Semibold",colorName:"primary",children:ut[a]}),(0,A.jsx)(we().Q,{iconGroup:be().I,variantName:"mini",colorName:"secondary"})]}),getKey:e=>e,renderItem:e=>(0,A.jsx)(it().A,{...e,title:ut[e.value]}),selectedItem:a};return(0,A.jsx)(nt().A,{...r})}const ut={"1d":(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.dateRange.filter.1day.label",defaultMessage:"1 day ago"}),"7d":(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.dateRange.filter.7days.label",defaultMessage:"Last 7 days"}),"28d":(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.dateRange.filter.28days.label",defaultMessage:"Last 28 days"}),total:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.dateRange.filter.total.label",defaultMessage:"All-time"})};function pt(e){const{onPaidChange:t,paid:a}=e,i=2===a.length?"all":a[0],r=(0,o().IS)((()=>({filtersButton:{display:"flex",alignItems:"center",gap:5}})),[]),n={onSelect:e=>{t(e)},items:lt,renderOrigin:e=>(0,A.jsxs)(M().p,{...e,style:r.filtersButton,children:[(0,A.jsx)(rt().D,{styleName:"UIRegular-14px/Semibold",colorName:"primary",children:gt[i]}),(0,A.jsx)(we().Q,{iconGroup:be().I,variantName:"mini",colorName:"secondary"})]}),getKey:e=>e,renderItem:e=>(0,A.jsx)(it().A,{...e,title:gt[e.value]}),selectedItem:i};return(0,A.jsx)(nt().A,{...n})}const gt={all:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.paid.filter.freeAndAll.label",defaultMessage:"Free + Paid"}),free:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.paid.filter.paid.label",defaultMessage:"Free"}),paid:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.paid.filter.free.label",defaultMessage:"Paid"})};var mt=()=>a(758318);function ft(e){const{onSourceChange:t,sources:a}=e,i=(0,o().IS)((()=>({filtersButton:{display:"flex",alignItems:"center",gap:5},dropdownMenuItemTextContainer:{display:"flex",flexDirection:"column",gap:1},dropdownMenuItemContainer:{minHeight:40,padding:"8px 0px",display:"flex",alignItems:"center",justifyContent:"space-between"}})),[]);if(0===a.length)return null;const r=a.includes("web")&&a.includes("app"),n=a[0],s=ht[n],l={onSelect:e=>{t(e)},items:ot,renderOrigin:e=>(0,A.jsxs)(M().p,{...e,style:i.filtersButton,children:[(0,A.jsx)(rt().D,{styleName:"UIRegular-14px/Semibold",colorName:"primary",children:r?(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.sourceFilter.both.buttonLabel",defaultMessage:"Logged-in + Logged-out"}):s.buttonLabel}),(0,A.jsx)(we().Q,{iconGroup:be().I,variantName:"mini",colorName:"secondary"})]}),getKey:e=>e,renderItem:e=>{const t=ht[e.value];return(0,A.jsx)(it().A,{...e,title:(0,A.jsxs)("div",{style:i.dropdownMenuItemContainer,children:[(0,A.jsxs)("div",{style:i.dropdownMenuItemTextContainer,children:[(0,A.jsx)(rt().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:t.dropdownTitle}),(0,A.jsx)(rt().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:t.dropdownSubtitle})]}),a.includes(e.value)&&(0,A.jsx)(we().Q,{iconGroup:mt().a,variantName:"mini",colorName:"primary"})]})})},selectedItem:r?void 0:n,width:"100%",minWidth:305};return(0,A.jsx)(nt().A,{...l})}const ht={app:{buttonLabel:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.sourceFilter.item.app.buttonLabel",defaultMessage:"Logged-in"}),dropdownTitle:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.sourceFilter.item.app.dropdownTitle",defaultMessage:"Logged-in"}),dropdownSubtitle:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.sourceFilter.item.app.dropdownSubtitle",defaultMessage:"Visits from inside the Notion product (notion.so/marketplace)"})},web:{buttonLabel:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.sourceFilter.item.web.buttonLabel",defaultMessage:"Logged-out"}),dropdownTitle:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.sourceFilter.item.web.dropdownTitle",defaultMessage:"Logged-out"}),dropdownSubtitle:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.sourceFilter.item.web.dropdownSubtitle",defaultMessage:"Visits from web traffic (notion.com/marketplace)"})}};var bt=()=>a(292119),vt=()=>a(959577),xt=()=>a(837530),yt=()=>a(630116);function Ct(e){const{selectedTemplateListingId:t,onTemplateChange:a}=e,o=(0,r().v3)(),s=jt(),c=(0,d().tz)(),[u]=(0,l().Yb)((async()=>{const e=await y().callApi({eventName:"getCreatorTemplates",environment:o,data:{locale:(0,v().H)(c),limit:500,includeLocalizedTemplates:!0}});return"success"===e.type?e.data.templateIds:[]}),[o,c]),p=(0,i.useMemo)((()=>(null==u?void 0:u.value)??[]),[u.value]),g=(0,n().K8)((()=>p.map((e=>{const t=new(yt().$x)(o,{table:vt().XX,id:e});if(t.isDefined()&&t.isReady())return{id:t.id,name:t.getName(),price:t.getPrice(),imageUrl:t.getAttributes().image.url,listingId:t.getListingId()}})).filter(O().O9)),[o,p]),m=g.find((e=>e.listingId===t&&void 0!==t)),f={onSelect:e=>{e.listingId&&a(e.listingId)},items:g,renderOrigin:e=>(0,A.jsxs)(M().p,{...e,style:s.filtersButton,children:[(0,A.jsx)(rt().D,{styleName:"UIRegular-14px/Semibold",colorName:"primary",children:m?m.name:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateFilter.allTemplates.buttonLabel",defaultMessage:"All templates"})}),(0,A.jsx)(we().Q,{iconGroup:be().I,variantName:"mini",colorName:"secondary"})]}),getKey:e=>e.id,renderItem:e=>(0,A.jsx)(wt,{template:e.value,menuProps:e,selectedTemplate:m}),selectedItem:void 0,width:"100%",minWidth:482};return(0,A.jsx)(nt().A,{...f})}function wt(e){const{template:t,menuProps:a,selectedTemplate:i}=e,r=jt(),n=(0,d().tz)();return(0,A.jsx)(it().A,{...a,title:(0,A.jsxs)("div",{style:r.templateDropdownMenuItemContainer,children:[(0,A.jsxs)("div",{style:r.templateDropdownMetadataContainer,children:[(0,A.jsx)(xt().$g,{src:t.imageUrl,imageHeight:50,imageWidth:80,imageBorderRadius:4,isDisabled:!0,imageContainerStyle:r.templatePreviewImageContainer}),(0,A.jsxs)("div",{style:r.templateDropdownTextContainer,children:[(0,A.jsx)(rt().D,{styleName:"UIRegular-14px/Medium",colorName:"primary",children:t.name}),(0,A.jsx)(rt().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:0!==t.price&&void 0!==t.price?(0,A.jsx)(bt().v,{cost:{amount:100*t.price,currencyCode:"USD"},intl:n,trailingZeroDisplay:"stripIfInteger"}):(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateDropdownItem.price.free",defaultMessage:"Free"})})]})]}),i&&i.id===t.id&&(0,A.jsx)(we().Q,{iconGroup:mt().a,variantName:"mini",colorName:"primary"})]})})}function jt(){return(0,o().IS)((()=>({filtersButton:{display:"flex",alignItems:"center",gap:5},templateDropdownTextContainer:{display:"flex",flexDirection:"column",gap:1},templateDropdownMetadataContainer:{display:"flex",alignItems:"center",gap:16},templateDropdownMenuItemContainer:{minHeight:40,padding:"8px 0px",display:"flex",alignItems:"center",justifyContent:"space-between"},templatePreviewImageContainer:{border:"1px solid rgba(0, 0, 0, 0.04)",borderRadius:4,boxShadow:"0 4px 18px rgb(0 0 0 / 4%), 0 2.025px 7.84688px rgb(0 0 0 / 2.7%), 0 0.8px 2.925px rgb(0 0 0 / 2%), 0 0.175px 1.04062px rgb(0 0 0 / 1.3%)"}})),[])}function St(e){const{onDateRangeChange:t,onSourceChange:a,filtersConfig:i,shouldShowPaidFilter:r,shouldShowTemplateFilter:n,onTemplateChange:s,onPaidChange:l}=e,c=(0,o().IS)((()=>({filtersContainer:{display:"flex",alignItems:"center",gap:18,marginLeft:-6},filters:{fontSize:15,lineHeight:"22px",margin:0,fontWeight:L().Wy.semibold}})),[]),{isFeatureEnabled:u}=(0,Xe().O)("marketplace_analytics_filters");return u?(0,A.jsxs)("div",{style:c.filtersContainer,children:[(0,A.jsx)(ct,{dateRange:i.dateRange,onDateRangeChange:t}),(0,A.jsx)(ft,{sources:i.sources,onSourceChange:a}),r&&l&&(0,A.jsx)(pt,{paid:i.paid,onPaidChange:l}),n&&s&&(0,A.jsx)(Ct,{selectedTemplateListingId:i.templateListingId,onTemplateChange:s})]}):(0,A.jsx)("div",{style:c.filters,children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.template.subHeader",defaultMessage:"Last 7 days"})})}function _t(e){return e.success}function Mt(e){const{templateMetrics:t,filtersConfig:a,type:i}=e,{dateRange:r,sources:n}=a,o=t,s="views"===i?"views":"downloads";let l="";l=n.includes("web")&&n.includes("app")?"app_web":n.includes("web")?"web":"app";const d=`${s}_${l}_${r}`;if(d in o){return o[d]}return 0}a(908872);var At=()=>a(496603);function It(){const e=(0,d().tz)(),t=(0,o().IS)((e=>({defaultContainer:{border:`1px solid ${e.accentColors.gray[100]}`,borderRadius:"8px",backgroundColor:e.cardContentBackground,maxHeight:"375px",maxWidth:"300px",width:"max-content",overflow:"hidden",pointerEvents:"auto",boxShadow:"0px 2px 4px rgb(0, 0, 0, 0.1)"},scrollContainer:{overflow:"auto",padding:"15px 15px 10px 15px",maxHeight:"375px"},row:{fontSize:"12px",lineHeight:"18px",textAlign:"left",display:"flex",justifyContent:"space-between",gap:"16px"},square:{height:"7px",width:"7px",minWidth:"7px",borderRadius:"1px",borderWidth:"0px",marginRight:"6px",marginTop:"6px",verticalAlign:"top",display:"inline-block"},rowLeft:{display:"inline-block",color:e.chartRowLeftColor,overflowX:"hidden",whiteSpace:"normal"},rowLeftContainer:{display:"inline-flex"},rowRight:{color:e.chartRowRightColor}})),[]),a=(0,i.useCallback)((e=>Object.keys(e).reduce(((t,a)=>`${t}${(0,At().kW)(a)}:${e[a]};`),"")),[]),{rowStyle:r,squareStyle:n,rowLeftStyles:s,rowLeftContainerStyle:l,rowRightStyles:c,outsideContainerStyle:u,scrollContainerStyle:p}=(0,i.useMemo)((()=>({outsideContainerStyle:a(t.defaultContainer),scrollContainerStyle:a(t.scrollContainer),rowStyle:a(t.row),rowLeftContainerStyle:a(t.rowLeftContainer),squareStyle:a(t.square),rowLeftStyles:a(t.rowLeft),rowRightStyles:a(t.rowRight)})),[t,a]),g=(0,i.useMemo)((()=>({useHTML:!0,shadow:!1,borderWidth:0,backgroundColor:void 0,outside:!1,stickOnContact:!0,hideDelay:100})),[]);return(0,i.useMemo)((()=>({...g,shared:!0,formatter:function(){const t=this.points??[];return`\n\t\t\t\t<div style="${u}">\n\t\t\t\t<div style="${p}">\n\t\t\t\t\t${t.map((t=>{const a=t.color??t.series.color,i=t.series.name,o=(0,Qe().ZV)(t.y??void 0,"compact",e),d=""===i?e.formatMessage(kt.empty):i;return`\n\t\t\t\t\t\t\t<div style="${r}">\n\t\t\t\t\t\t\t\t<div style="${l}">\n\t\t\t\t\t\t\t\t\t<div style="${n} background-color: ${a};"></div> \n\t\t\t\t\t\t\t\t\t\t<div style="${s}">\n\t\t\t\t\t\t\t\t\t\t\t${d}\n\t\t\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span style="${c}">\n\t\t\t\t\t\t\t\t\t${o}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`})).join("")}\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`}})),[g,u,p,e,r,n,s,c,l])}const kt=(0,d().YK)({noData:{defaultMessage:"No data",id:"creatorProfile.chart.tooltip.noData"},empty:{defaultMessage:"Empty",id:"creatorProfile.chart.tooltip.empty"}});function Tt(e){const t=(0,o().IS)((()=>({lastUpdated:{fontSize:12,textAlign:"right",color:"rgba(17, 17, 17, 0.5)"}})),[]),{value:a}=e,{isMobileWidth:i}=(0,m().LS)();return i||!a?null:(0,A.jsx)("div",{style:t.lastUpdated,children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.lastUpdated",defaultMessage:"Last updated {date} (UTC)",values:{date:(0,A.jsx)(d().XU,{value:a,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}})})}function Pt(){var e,t;const a=(0,r().v3)(),i=(0,d().tz)(),s=dt(),c=(0,n().K8)((()=>{const{currentUserStore:e}=b().default.state;return null==e?void 0:e.id}),[]),[{status:u,value:p}]=(0,l().Yb)((async()=>{if(!c)return{timeseriesData:[],lastUpdated:void 0};const e=await y().callApi({eventName:"getMarketplaceMetrics",environment:a,data:{metrics:["views"],sources:s.filtersConfig.sources,dateRange:s.filtersConfig.dateRange,by:"date"}});if("success"===e.type&&_t(e.data)){const t=e.data;return{webTimeseriesData:t.metrics.map((e=>({x:new Date(e.ds).getTime(),y:e.views_web_1d,name:i.formatMessage(Lt.loggedOut)}))),appTimeseriesData:t.metrics.map((e=>({x:new Date(e.ds).getTime(),y:e.views_app_1d,name:i.formatMessage(Lt.loggedIn)}))),lastUpdated:e.data.lastUpdated}}return{webTimeseriesData:[],appTimeseriesData:[],lastUpdated:void 0}}),[c,a,i,s.filtersConfig]),g=(0,n().uB)(void 0,at().A),m=(0,o().IS)((()=>({header:{fontSize:24,lineHeight:"30px",fontWeight:L().Wy.semibold,marginBottom:4},subheader:{display:"flex",justifyContent:"space-between"},container:{marginTop:72}})),[]),f=It();return(0,A.jsxs)("div",{style:m.container,children:[(0,A.jsx)("div",{style:m.header,children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateViews.header",defaultMessage:"Template views"})}),(0,A.jsxs)("div",{style:m.subheader,children:[(0,A.jsx)(St,{filtersConfig:s.filtersConfig,onDateRangeChange:s.onDateRangeChange,onSourceChange:s.onSourceChange}),(0,A.jsx)(Tt,{value:null==p?void 0:p.lastUpdated})]}),(0,A.jsx)(tt().Z,{value:g,children:(0,A.jsx)(Je().AxisChart,{tooltipOptions:f,onLoadEventHandler:()=>{},seriesData:[{name:i.formatMessage(Lt.loggedIn),type:"area",fillColor:"rgba(0, 0, 0, 0)",color:"rgba(165, 121, 217, 1)",data:(null==p?void 0:p.webTimeseriesData)??[]},{name:i.formatMessage(Lt.loggedOut),type:"area",fillColor:"rgba(0, 0, 0, 0)",color:"rgba(234, 139, 66, 1)",data:(null==p?void 0:p.appTimeseriesData)??[]}],xAxisType:"datetime",showHorizontalGridLines:!0,xAxisTitle:i.formatMessage(Lt.date),yAxisTitle:i.formatMessage(Lt.views),yLabelFormatter:e=>(0,Qe().ZV)(e,e>9999?"compact":"number",i),timezone:"UTC",xLabelFormatter:e=>new Date(e).toLocaleDateString(i.locale,{month:"numeric",day:"numeric",timeZone:"UTC"}),axisType:"line",dataLabelsEnabled:!1,loadingProps:{isInitialLoading:"pending"===u,isThrottledLoading:"pending"===u,initialLoadingSvg:()=>(0,A.jsx)(et().z,{chartType:"line",showCopy:!1})},hasData:"resolved"===u&&(((null==p||null===(e=p.webTimeseriesData)||void 0===e?void 0:e.length)??0)>0||((null==p||null===(t=p.appTimeseriesData)||void 0===t?void 0:t.length)??0)>0)})})]})}const Lt=(0,d().YK)({loggedOut:{id:"creatorProfile.analytics.profileViews.loggedOut",defaultMessage:"Logged-out"},loggedIn:{id:"creatorProfile.analytics.profileViews.app",defaultMessage:"Logged-in"},date:{id:"creatorProfile.analytics.profileViews.date",defaultMessage:"Date"},views:{id:"creatorProfile.analytics.profileViews.views",defaultMessage:"Views"}});var Dt=()=>a(187485),Rt=()=>a(317182),Et=()=>a(60200);function Bt(e){const{header:t,sortBy:a,limit:o,shouldShowPaidFilter:s=!0}=e,c=(0,r().v3)(),p=dt(),g=(0,n().K8)((()=>{const{currentUserStore:e}=b().default.state;return null==e?void 0:e.id}),[]),[{status:m,value:f}]=(0,l().Yb)((async()=>{if(!g)return{timeseriesData:[],lastUpdated:void 0};const e=await y().callApi({eventName:"getMarketplaceMetrics",environment:c,data:{by:"template",metrics:["views","downloads"],sources:p.filtersConfig.sources,dateRange:p.filtersConfig.dateRange,templateFilterBy:{paid:p.filtersConfig.paid.includes("paid")&&p.filtersConfig.paid.includes("free")?void 0:p.filtersConfig.paid[0]}}});if("success"===e.type&&_t(e.data)){const t=e.data.templatesMap;return{templateMetrics:t?Object.values(t):[],lastUpdated:e.data.lastUpdated}}return{tableData:[],lastUpdated:void 0}}),[g,c,p.filtersConfig]),v=Ut({isLoading:"pending"===m}),C=(0,i.useMemo)((()=>[...Array(10)].map(((e,t)=>({key:`loading-row-${t}`,columns:[(0,A.jsx)(Et().R,{width:224,height:14},`loadingProduct-${t}-1`),(0,A.jsx)(Et().R,{width:119,height:14},`loadingCreatedBy-${t}-2`),(0,A.jsx)(Et().R,{width:119,height:14},`loadingPrice-${t}-3`)]})))),[]),w=function(e){const{templateMetrics:t,sortBy:a,limit:i,filtersConfig:r}=e;let n=[...t];a&&n.sort(((e,t)=>{const i=Mt({templateMetrics:e.metrics||x().xH,filtersConfig:r,type:a});return Mt({templateMetrics:t.metrics||x().xH,filtersConfig:r,type:a})-i}));void 0!==i&&i>0&&(n=n.slice(0,i));return n}({templateMetrics:(null==f?void 0:f.templateMetrics)??[],sortBy:a,filtersConfig:p.filtersConfig,limit:o}),j=(0,i.useMemo)((()=>w.map(((e,t)=>{if(!e)return;const a=(null==e?void 0:e.metrics)||x().xH,i=Mt({templateMetrics:a,filtersConfig:p.filtersConfig,type:"views"}),r=Mt({templateMetrics:a,filtersConfig:p.filtersConfig,type:"downloads"});return{key:`template-${t}`,columns:[(0,A.jsx)(Ft,{name:e.name,image:e.image,slug:e.slug},`template-row-name-${t}`),(0,A.jsx)(rt().D,{styleName:"UIRegular-14px/Regular",children:(0,A.jsx)(d().Gr,{maximumFractionDigits:2,...i>9999?{notation:"compact"}:{},value:i})},`template-row-views-${t}`),(0,A.jsx)(rt().D,{styleName:"UIRegular-14px/Regular",children:(0,A.jsx)(d().Gr,{maximumFractionDigits:2,...r>9999?{notation:"compact"}:{},value:r})},`template-row-downloads-${t}`)]}})).filter(O().O9)),[w,p.filtersConfig]),S=[{key:"name",header:(0,A.jsx)(rt().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateAnalytics.name",defaultMessage:"Name"})}),style:{width:"47%",minWidth:300}},{key:"views",header:(0,A.jsx)(rt().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateAnalytics.views",defaultMessage:"Views"})}),style:{width:"20%",minWidth:200}},{key:"downloads",header:(0,A.jsx)(rt().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateAnalytics.downloads",defaultMessage:"Downloads"})}),style:{width:"20%",minWidth:200}}];return(0,A.jsxs)("div",{style:v.container,children:[t,(0,A.jsxs)("div",{style:v.subheader,children:[(0,A.jsx)(St,{filtersConfig:p.filtersConfig,onDateRangeChange:p.onDateRangeChange,onSourceChange:p.onSourceChange,shouldShowPaidFilter:s,onPaidChange:p.onPaidChange}),(0,A.jsx)(Tt,{value:null==f?void 0:f.lastUpdated})]}),(0,A.jsx)(u().H,{type:h().A.X,style:{overflow:"unset"},children:(0,A.jsx)(Rt().A,{columns:S,rows:"pending"===m?C:j??[],rowStyle:v.row,hideTopBorderForHeader:!0})})]})}function Ft(e){const{name:t,image:a,slug:i}=e,r=Ut({isLoading:!1});return(0,A.jsxs)("div",{style:r.templatePreview,children:[(0,A.jsx)(xt().$g,{src:(null==a?void 0:a.url)||"",imageHeight:50,imageWidth:80,imageBorderRadius:6,isDisabled:!0,imageContainerStyle:r.templatePreviewImageContainer}),(0,A.jsx)(Dt().A,{href:`/marketplace/templates/${i}`,children:(0,A.jsx)(rt().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:t})})]})}function Ut(e){const{isLoading:t}=e;return(0,o().IS)((()=>({tableContainer:{width:"100%",height:t?"100%":void 0,display:"flex",flexDirection:"column",position:"relative",gap:16},row:{height:58},filters:{fontSize:15,lineHeight:"22px",margin:0,fontWeight:L().Wy.semibold,marginBottom:24},subheader:{display:"flex",justifyContent:"space-between"},container:{marginTop:72},templatePreview:{display:"flex",alignItems:"center",gap:16},templatePreviewImageContainer:{border:"1px solid rgba(0, 0, 0, 0.04)",borderRadius:4,boxShadow:"0 4px 18px rgb(0 0 0 / 4%), 0 2.025px 7.84688px rgb(0 0 0 / 2.7%), 0 0.8px 2.925px rgb(0 0 0 / 2%), 0 0.175px 1.04062px rgb(0 0 0 / 1.3%)"}})),[t])}const Nt=(0,Fe().xh)("eye",{default:{loader:()=>a.e(80789).then(a.bind(a,680789))},small:{loader:()=>a.e(81239).then(a.bind(a,481239))},mini:{loader:()=>a.e(99145).then(a.bind(a,99145))},large:{loader:()=>a.e(25647).then(a.bind(a,525647))}}),zt=(0,Fe().xh)("templateDownloads",{default:{loader:()=>a.e(56591).then(a.bind(a,556591))},small:{loader:()=>a.e(30753).then(a.bind(a,430753))},mini:{loader:()=>a.e(1615).then(a.bind(a,1615))},large:{loader:()=>a.e(47797).then(a.bind(a,947797))}}),Ot=(0,Fe().wt)("productDownloads",{viewBox:"0 0 55 41",svg:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("path",{d:"M2.7168 6.78613H42.498V9.40234H2.7168V6.78613ZM6.55762 34.6924C4.61556 34.6924 3.15592 34.21 2.17871 33.2451C1.21387 32.2926 0.731445 30.8639 0.731445 28.959V6.28516C0.731445 4.36784 1.21387 2.93294 2.17871 1.98047C3.15592 1.01562 4.61556 0.533203 6.55762 0.533203H38.6572C40.6117 0.533203 42.0713 1.01562 43.0361 1.98047C44.001 2.94531 44.4834 4.38021 44.4834 6.28516V28.959C44.4834 30.8639 44.001 32.2926 43.0361 33.2451C42.0713 34.21 40.6117 34.6924 38.6572 34.6924H6.55762ZM6.59473 31.7051H38.6201C39.5355 31.7051 40.2406 31.4639 40.7354 30.9814C41.2425 30.4867 41.4961 29.7568 41.4961 28.792V6.45215C41.4961 5.4873 41.2425 4.75749 40.7354 4.2627C40.2406 3.7679 39.5355 3.52051 38.6201 3.52051H6.59473C5.66699 3.52051 4.95573 3.7679 4.46094 4.2627C3.96615 4.75749 3.71875 5.4873 3.71875 6.45215V28.792C3.71875 29.7568 3.96615 30.4867 4.46094 30.9814C4.95573 31.4639 5.66699 31.7051 6.59473 31.7051Z",fill:"#E7B533"}),(0,A.jsxs)("mask",{id:"path-2-outside-1_446_28461",maskUnits:"userSpaceOnUse",x:"31.5142",y:"19",width:"23",height:"24",fill:"black",children:[(0,A.jsx)("rect",{fill:"white",x:"31.5142",y:"19",width:"23",height:"24"}),(0,A.jsx)("path",{d:"M43.1626 38.6094C42.0324 38.6094 40.9699 38.3932 39.9751 37.9609C38.9803 37.5339 38.1027 36.9401 37.3423 36.1797C36.5819 35.4245 35.9855 34.5495 35.5532 33.5547C35.1261 32.5599 34.9126 31.4948 34.9126 30.3594C34.9126 29.2292 35.1261 28.1667 35.5532 27.1719C35.9855 26.1771 36.5793 25.2995 37.3345 24.5391C38.0949 23.7786 38.9725 23.1849 39.9673 22.7578C40.9673 22.3255 42.0324 22.1094 43.1626 22.1094C44.2928 22.1094 45.3553 22.3255 46.3501 22.7578C47.3501 23.1849 48.2277 23.7786 48.9829 24.5391C49.7433 25.2995 50.3397 26.1771 50.772 27.1719C51.2043 28.1667 51.4204 29.2292 51.4204 30.3594C51.4204 31.4948 51.2043 32.5599 50.772 33.5547C50.3397 34.5495 49.7433 35.4245 48.9829 36.1797C48.2277 36.9401 47.3527 37.5339 46.3579 37.9609C45.3631 38.3932 44.298 38.6094 43.1626 38.6094ZM43.1782 26.0781C42.9126 26.0781 42.6886 26.1615 42.5063 26.3281C42.3293 26.4948 42.2407 26.7057 42.2407 26.9609V30.4297L42.3345 32.0469L41.7407 31.2422L40.9126 30.3203C40.7616 30.1432 40.561 30.0547 40.311 30.0547C40.0715 30.0547 39.8761 30.1302 39.7251 30.2812C39.5741 30.4271 39.4985 30.612 39.4985 30.8359C39.4985 31.0755 39.5819 31.2839 39.7485 31.4609L42.4204 34.2344C42.6287 34.4688 42.8813 34.5859 43.1782 34.5859C43.4751 34.5859 43.7303 34.4688 43.9438 34.2344L46.6079 31.4609C46.7746 31.2786 46.8579 31.0703 46.8579 30.8359C46.8579 30.612 46.7824 30.4271 46.6313 30.2812C46.4803 30.1302 46.285 30.0547 46.0454 30.0547C45.7902 30.0547 45.5897 30.1432 45.4438 30.3203L44.6235 31.2188L44.022 32.0547L44.1157 30.4297V26.9609C44.1157 26.7057 44.0246 26.4948 43.8423 26.3281C43.6652 26.1615 43.4438 26.0781 43.1782 26.0781Z"})]}),(0,A.jsx)("path",{d:"M43.1626 38.6094C42.0324 38.6094 40.9699 38.3932 39.9751 37.9609C38.9803 37.5339 38.1027 36.9401 37.3423 36.1797C36.5819 35.4245 35.9855 34.5495 35.5532 33.5547C35.1261 32.5599 34.9126 31.4948 34.9126 30.3594C34.9126 29.2292 35.1261 28.1667 35.5532 27.1719C35.9855 26.1771 36.5793 25.2995 37.3345 24.5391C38.0949 23.7786 38.9725 23.1849 39.9673 22.7578C40.9673 22.3255 42.0324 22.1094 43.1626 22.1094C44.2928 22.1094 45.3553 22.3255 46.3501 22.7578C47.3501 23.1849 48.2277 23.7786 48.9829 24.5391C49.7433 25.2995 50.3397 26.1771 50.772 27.1719C51.2043 28.1667 51.4204 29.2292 51.4204 30.3594C51.4204 31.4948 51.2043 32.5599 50.772 33.5547C50.3397 34.5495 49.7433 35.4245 48.9829 36.1797C48.2277 36.9401 47.3527 37.5339 46.3579 37.9609C45.3631 38.3932 44.298 38.6094 43.1626 38.6094ZM43.1782 26.0781C42.9126 26.0781 42.6886 26.1615 42.5063 26.3281C42.3293 26.4948 42.2407 26.7057 42.2407 26.9609V30.4297L42.3345 32.0469L41.7407 31.2422L40.9126 30.3203C40.7616 30.1432 40.561 30.0547 40.311 30.0547C40.0715 30.0547 39.8761 30.1302 39.7251 30.2812C39.5741 30.4271 39.4985 30.612 39.4985 30.8359C39.4985 31.0755 39.5819 31.2839 39.7485 31.4609L42.4204 34.2344C42.6287 34.4688 42.8813 34.5859 43.1782 34.5859C43.4751 34.5859 43.7303 34.4688 43.9438 34.2344L46.6079 31.4609C46.7746 31.2786 46.8579 31.0703 46.8579 30.8359C46.8579 30.612 46.7824 30.4271 46.6313 30.2812C46.4803 30.1302 46.285 30.0547 46.0454 30.0547C45.7902 30.0547 45.5897 30.1432 45.4438 30.3203L44.6235 31.2188L44.022 32.0547L44.1157 30.4297V26.9609C44.1157 26.7057 44.0246 26.4948 43.8423 26.3281C43.6652 26.1615 43.4438 26.0781 43.1782 26.0781Z",fill:"#E7B533"}),(0,A.jsx)("path",{d:"M39.9751 37.9609L41.1708 35.2095L41.1586 35.2043L39.9751 37.9609ZM37.3423 36.1797L39.4636 34.0584L39.4563 34.0511L37.3423 36.1797ZM35.5532 33.5547L32.7965 34.7382L32.8018 34.7503L35.5532 33.5547ZM35.5532 27.1719L32.8018 25.9762L32.7965 25.9884L35.5532 27.1719ZM37.3345 24.5391L35.2131 22.4177L35.2059 22.425L37.3345 24.5391ZM39.9673 22.7578L41.1508 25.5145L41.1577 25.5115L39.9673 22.7578ZM46.3501 22.7578L45.1544 25.5093L45.1631 25.513L45.1718 25.5167L46.3501 22.7578ZM48.9829 24.5391L46.8543 26.6531L46.8616 26.6604L48.9829 24.5391ZM48.9829 36.1797L46.8689 34.0511L46.8616 34.0584L46.8543 34.0657L48.9829 36.1797ZM46.3579 37.9609L45.1744 35.2042L45.1623 35.2095L46.3579 37.9609ZM42.5063 26.3281L40.482 24.114L40.466 24.1287L40.4503 24.1435L42.5063 26.3281ZM42.2407 30.4297H39.2407V30.5166L39.2458 30.6033L42.2407 30.4297ZM42.3345 32.0469L39.9205 33.8281L45.9136 41.9504L45.3294 31.8733L42.3345 32.0469ZM41.7407 31.2422L44.1547 29.461L44.069 29.3448L43.9725 29.2374L41.7407 31.2422ZM40.9126 30.3203L38.6301 32.2672L38.6551 32.2965L38.6808 32.3251L40.9126 30.3203ZM39.7251 30.2812L41.8089 32.4395L41.8278 32.4212L41.8464 32.4026L39.7251 30.2812ZM39.7485 31.4609L37.5639 33.517L37.5759 33.5298L37.588 33.5423L39.7485 31.4609ZM42.4204 34.2344L44.6626 32.2413L44.6227 32.1963L44.5809 32.153L42.4204 34.2344ZM43.9438 34.2344L41.7803 32.1561L41.7529 32.1847L41.7263 32.2139L43.9438 34.2344ZM46.6079 31.4609L48.7715 33.5392L48.7971 33.5125L48.822 33.4852L46.6079 31.4609ZM46.6313 30.2812L44.51 32.4026L44.5286 32.4212L44.5476 32.4395L46.6313 30.2812ZM45.4438 30.3203L47.6593 32.3431L47.7109 32.2866L47.7596 32.2274L45.4438 30.3203ZM44.6235 31.2188L42.4081 29.1959L42.2904 29.3248L42.1885 29.4664L44.6235 31.2188ZM44.022 32.0547L41.027 31.8819L40.4329 42.1781L46.457 33.807L44.022 32.0547ZM44.1157 30.4297L47.1107 30.6025L47.1157 30.5162V30.4297H44.1157ZM43.8423 26.3281L41.7862 28.5127L41.802 28.5276L41.818 28.5422L43.8423 26.3281ZM43.1626 35.6094C42.4261 35.6094 41.7724 35.4709 41.1707 35.2095L38.7794 40.7124C40.1674 41.3155 41.6387 41.6094 43.1626 41.6094V35.6094ZM41.1586 35.2043C40.5115 34.9264 39.9528 34.5475 39.4636 34.0584L35.221 38.301C36.2526 39.3327 37.4491 40.1413 38.7916 40.7176L41.1586 35.2043ZM39.4563 34.0511C38.9689 33.567 38.5874 33.0096 38.3047 32.359L32.8018 34.7503C33.3837 36.0894 34.1949 37.282 35.2283 38.3083L39.4563 34.0511ZM38.3099 32.3712C38.0512 31.7685 37.9126 31.1081 37.9126 30.3594H31.9126C31.9126 31.8815 32.2011 33.3513 32.7965 34.7382L38.3099 32.3712ZM37.9126 30.3594C37.9126 29.6178 38.0504 28.9598 38.3099 28.3554L32.7965 25.9884C32.2019 27.3735 31.9126 28.8405 31.9126 30.3594H37.9126ZM38.3047 28.3675C38.5901 27.7107 38.974 27.1455 39.4631 26.6531L35.2059 22.425C34.1845 23.4534 33.3809 24.6435 32.8018 25.9762L38.3047 28.3675ZM39.4558 26.6604C39.9449 26.1712 40.5037 25.7923 41.1508 25.5145L38.7838 20.0011C37.4413 20.5775 36.2448 21.3861 35.2132 22.4177L39.4558 26.6604ZM41.1577 25.5115C41.7677 25.2478 42.4262 25.1094 43.1626 25.1094V19.1094C41.6386 19.1094 40.1668 19.4032 38.7769 20.0041L41.1577 25.5115ZM43.1626 25.1094C43.8991 25.1094 44.5528 25.2478 45.1544 25.5093L47.5457 20.0064C46.1578 19.4032 44.6865 19.1094 43.1626 19.1094V25.1094ZM45.1718 25.5167C45.8218 25.7943 46.3754 26.1709 46.8543 26.6531L51.1115 22.425C50.08 21.3864 48.8784 20.5755 47.5284 19.9989L45.1718 25.5167ZM46.8616 26.6604C47.3534 27.1522 47.737 27.7151 48.0205 28.3675L53.5234 25.9762C52.9424 24.6391 52.1333 23.4468 51.1042 22.4177L46.8616 26.6604ZM48.0205 28.3675C48.282 28.9692 48.4204 29.6229 48.4204 30.3594H54.4204C54.4204 28.8354 54.1265 27.3642 53.5234 25.9762L48.0205 28.3675ZM48.4204 30.3594C48.4204 31.1031 48.2812 31.7591 48.0205 32.359L53.5234 34.7503C54.1273 33.3606 54.4204 31.8865 54.4204 30.3594H48.4204ZM48.0205 32.359C47.7378 33.0096 47.3563 33.567 46.8689 34.0511L51.0969 38.3083C52.1303 37.282 52.9415 36.0894 53.5234 34.7503L48.0205 32.359ZM46.8543 34.0657C46.3728 34.5505 45.8196 34.9273 45.1744 35.2043L47.5414 40.7176C48.8858 40.1404 50.0826 39.3298 51.1115 38.2937L46.8543 34.0657ZM45.1623 35.2095C44.5624 35.4702 43.9063 35.6094 43.1626 35.6094V41.6094C44.6898 41.6094 46.1639 41.3163 47.5536 40.7124L45.1623 35.2095ZM43.1782 23.0781C42.225 23.0781 41.2611 23.4017 40.482 24.114L44.5307 28.5422C44.347 28.7102 44.1189 28.8549 43.8572 28.9523C43.5992 29.0483 43.3629 29.0781 43.1782 29.0781V23.0781ZM40.4503 24.1435C39.6381 24.9079 39.2407 25.9245 39.2407 26.9609H45.2407C45.2407 27.186 45.2003 27.47 45.0733 27.7724C44.945 28.0781 44.76 28.3268 44.5624 28.5127L40.4503 24.1435ZM39.2407 26.9609V30.4297H45.2407V26.9609H39.2407ZM39.2458 30.6033L39.3395 32.2205L45.3294 31.8733L45.2357 30.2561L39.2458 30.6033ZM44.7485 30.2657L44.1547 29.461L39.3267 33.0234L39.9205 33.8281L44.7485 30.2657ZM43.9725 29.2374L43.1444 28.3155L38.6808 32.3251L39.509 33.247L43.9725 29.2374ZM43.1951 28.3735C42.4278 27.4739 41.3654 27.0547 40.311 27.0547V33.0547C40.0772 33.0547 39.7687 33.0119 39.4371 32.8655C39.0998 32.7165 38.8285 32.4998 38.6301 32.2672L43.1951 28.3735ZM40.311 27.0547C39.3815 27.0547 38.388 27.3757 37.6038 28.1599L41.8464 32.4026C41.6325 32.6165 41.3669 32.7934 41.0668 32.9094C40.7733 33.0229 40.5085 33.0547 40.311 33.0547V27.0547ZM37.6413 28.123C36.8626 28.8749 36.4985 29.8586 36.4985 30.8359H42.4985C42.4985 31.0659 42.4586 31.3548 42.3324 31.6637C42.2046 31.9766 42.0175 32.2381 41.8089 32.4395L37.6413 28.123ZM36.4985 30.8359C36.4985 31.8524 36.8823 32.7927 37.5639 33.517L41.9331 29.4048C42.0856 29.5668 42.2373 29.7848 42.3465 30.0577C42.4559 30.3314 42.4985 30.6002 42.4985 30.8359H36.4985ZM37.588 33.5423L40.2599 36.3158L44.5809 32.153L41.909 29.3795L37.588 33.5423ZM40.1782 36.2275C40.9195 37.0615 41.9713 37.5859 43.1782 37.5859V31.5859C43.4365 31.5859 43.7335 31.6397 44.0286 31.7766C44.3197 31.9117 44.528 32.0899 44.6626 32.2413L40.1782 36.2275ZM43.1782 37.5859C44.3817 37.5859 45.4229 37.0654 46.1614 36.2548L41.7263 32.2139C41.8558 32.0717 42.0576 31.9016 42.3404 31.7717C42.6278 31.6398 42.9197 31.5859 43.1782 31.5859V37.5859ZM46.1074 36.3126L48.7715 33.5392L44.4444 29.3827L41.7803 32.1561L46.1074 36.3126ZM48.822 33.4852C49.4644 32.7827 49.8579 31.8627 49.8579 30.8359H43.8579C43.8579 30.5887 43.9036 30.3197 44.01 30.0538C44.1153 29.7905 44.258 29.5852 44.3938 29.4366L48.822 33.4852ZM49.8579 30.8359C49.8579 29.8586 49.4938 28.8749 48.7151 28.123L44.5476 32.4395C44.339 32.2381 44.1518 31.9766 44.024 31.6637C43.8979 31.3548 43.8579 31.0659 43.8579 30.8359H49.8579ZM48.7527 28.1599C47.9684 27.3757 46.9749 27.0547 46.0454 27.0547V33.0547C45.8479 33.0547 45.5831 33.0229 45.2896 32.9094C44.9895 32.7934 44.7239 32.6165 44.51 32.4026L48.7527 28.1599ZM46.0454 27.0547C45.0078 27.0547 43.9125 27.4606 43.1281 28.4132L47.7596 32.2274C47.5492 32.483 47.2635 32.7118 46.9154 32.8655C46.5763 33.0152 46.2672 33.0547 46.0454 33.0547V27.0547ZM43.2284 28.2975L42.4081 29.1959L46.839 33.2416L47.6593 32.3431L43.2284 28.2975ZM42.1885 29.4664L41.5869 30.3024L46.457 33.807L47.0586 32.9711L42.1885 29.4664ZM47.017 32.2275L47.1107 30.6025L41.1207 30.2569L41.027 31.8819L47.017 32.2275ZM47.1157 30.4297V26.9609H41.1157V30.4297H47.1157ZM47.1157 26.9609C47.1157 25.8952 46.6936 24.8701 45.8666 24.114L41.818 28.5422C41.6201 28.3613 41.4283 28.1134 41.2935 27.8013C41.1596 27.4915 41.1157 27.1972 41.1157 26.9609H47.1157ZM45.8984 24.1435C45.1112 23.4027 44.1311 23.0781 43.1782 23.0781V29.0781C42.9941 29.0781 42.7526 29.0485 42.4865 28.9483C42.2157 28.8463 41.978 28.6932 41.7862 28.5127L45.8984 24.1435Z",fill:"white",mask:"url(#path-2-outside-1_446_28461)"})]})}),Wt=(0,Fe().wt)("productViews",{viewBox:"0 0 55 41",svg:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("path",{d:"M2.7168 6.78613H42.498V9.40234H2.7168V6.78613ZM6.55762 34.6924C4.61556 34.6924 3.15592 34.21 2.17871 33.2451C1.21387 32.2926 0.731445 30.8639 0.731445 28.959V6.28516C0.731445 4.36784 1.21387 2.93294 2.17871 1.98047C3.15592 1.01562 4.61556 0.533203 6.55762 0.533203H38.6572C40.6117 0.533203 42.0713 1.01562 43.0361 1.98047C44.001 2.94531 44.4834 4.38021 44.4834 6.28516V28.959C44.4834 30.8639 44.001 32.2926 43.0361 33.2451C42.0713 34.21 40.6117 34.6924 38.6572 34.6924H6.55762ZM6.59473 31.7051H38.6201C39.5355 31.7051 40.2406 31.4639 40.7354 30.9814C41.2425 30.4867 41.4961 29.7568 41.4961 28.792V6.45215C41.4961 5.4873 41.2425 4.75749 40.7354 4.2627C40.2406 3.7679 39.5355 3.52051 38.6201 3.52051H6.59473C5.66699 3.52051 4.95573 3.7679 4.46094 4.2627C3.96615 4.75749 3.71875 5.4873 3.71875 6.45215V28.792C3.71875 29.7568 3.96615 30.4867 4.46094 30.9814C4.95573 31.4639 5.66699 31.7051 6.59473 31.7051Z",fill:"#2E98EA"}),(0,A.jsx)("circle",{cx:"43.5",cy:"30.5",r:"1.5",fill:"white"}),(0,A.jsxs)("mask",{id:"path-3-outside-1_446_28461",maskUnits:"userSpaceOnUse",x:"28",y:"20",width:"29",height:"21",fill:"black",children:[(0,A.jsx)("rect",{fill:"white",x:"28",y:"20",width:"29",height:"21"}),(0,A.jsx)("path",{d:"M42.4297 37.1562C41.3672 37.1562 40.3646 37.026 39.4219 36.7656C38.4844 36.5104 37.6198 36.1719 36.8281 35.75C36.0365 35.3281 35.3255 34.8646 34.6953 34.3594C34.0703 33.849 33.5365 33.3385 33.0938 32.8281C32.6562 32.3177 32.3229 31.8464 32.0938 31.4141C31.8646 30.9818 31.75 30.6328 31.75 30.3672C31.75 30.1068 31.8646 29.7604 32.0938 29.3281C32.3229 28.8958 32.6562 28.4245 33.0938 27.9141C33.5365 27.4036 34.0703 26.8958 34.6953 26.3906C35.3255 25.8802 36.0365 25.4141 36.8281 24.9922C37.6198 24.5703 38.4844 24.2318 39.4219 23.9766C40.3646 23.7214 41.3672 23.5938 42.4297 23.5938C43.5078 23.5938 44.5182 23.7214 45.4609 23.9766C46.4089 24.2318 47.2786 24.5703 48.0703 24.9922C48.8672 25.4141 49.5755 25.8802 50.1953 26.3906C50.8203 26.8958 51.349 27.4036 51.7812 27.9141C52.2188 28.4245 52.5521 28.8958 52.7812 29.3281C53.0104 29.7604 53.125 30.1068 53.125 30.3672C53.125 30.6328 53.0104 30.9818 52.7812 31.4141C52.5521 31.8464 52.2188 32.3177 51.7812 32.8281C51.349 33.3385 50.8229 33.849 50.2031 34.3594C49.5833 34.8646 48.875 35.3281 48.0781 35.75C47.2865 36.1719 46.4167 36.5104 45.4688 36.7656C44.5208 37.026 43.5078 37.1562 42.4297 37.1562ZM42.4375 34.5C43.0104 34.5 43.5469 34.3932 44.0469 34.1797C44.5521 33.9609 44.9948 33.6615 45.375 33.2812C45.7552 32.8958 46.0521 32.4557 46.2656 31.9609C46.4844 31.4661 46.5938 30.9375 46.5938 30.375C46.5938 29.7969 46.4844 29.2604 46.2656 28.7656C46.0521 28.2656 45.7552 27.8255 45.375 27.4453C44.9948 27.0651 44.5521 26.7708 44.0469 26.5625C43.5469 26.349 43.0104 26.2422 42.4375 26.2422C41.8646 26.2422 41.3255 26.349 40.8203 26.5625C40.3203 26.7708 39.8776 27.0651 39.4922 27.4453C39.112 27.8203 38.8151 28.2578 38.6016 28.7578C38.388 29.2578 38.2812 29.7969 38.2812 30.375C38.2812 30.9375 38.388 31.4661 38.6016 31.9609C38.8203 32.4557 39.1198 32.8958 39.5 33.2812C39.8802 33.6615 40.3203 33.9609 40.8203 34.1797C41.3255 34.3932 41.8646 34.5 42.4375 34.5ZM42.4297 32C41.9818 32 41.599 31.8411 41.2812 31.5234C40.9635 31.2057 40.8047 30.8255 40.8047 30.3828C40.8047 29.9349 40.9635 29.5521 41.2812 29.2344C41.599 28.9115 41.9818 28.75 42.4297 28.75C42.8828 28.75 43.2682 28.9115 43.5859 29.2344C43.9089 29.5521 44.0703 29.9349 44.0703 30.3828C44.0703 30.8255 43.9089 31.2057 43.5859 31.5234C43.2682 31.8411 42.8828 32 42.4297 32Z"})]}),(0,A.jsx)("path",{d:"M42.4297 37.1562C41.3672 37.1562 40.3646 37.026 39.4219 36.7656C38.4844 36.5104 37.6198 36.1719 36.8281 35.75C36.0365 35.3281 35.3255 34.8646 34.6953 34.3594C34.0703 33.849 33.5365 33.3385 33.0938 32.8281C32.6562 32.3177 32.3229 31.8464 32.0938 31.4141C31.8646 30.9818 31.75 30.6328 31.75 30.3672C31.75 30.1068 31.8646 29.7604 32.0938 29.3281C32.3229 28.8958 32.6562 28.4245 33.0938 27.9141C33.5365 27.4036 34.0703 26.8958 34.6953 26.3906C35.3255 25.8802 36.0365 25.4141 36.8281 24.9922C37.6198 24.5703 38.4844 24.2318 39.4219 23.9766C40.3646 23.7214 41.3672 23.5938 42.4297 23.5938C43.5078 23.5938 44.5182 23.7214 45.4609 23.9766C46.4089 24.2318 47.2786 24.5703 48.0703 24.9922C48.8672 25.4141 49.5755 25.8802 50.1953 26.3906C50.8203 26.8958 51.349 27.4036 51.7812 27.9141C52.2188 28.4245 52.5521 28.8958 52.7812 29.3281C53.0104 29.7604 53.125 30.1068 53.125 30.3672C53.125 30.6328 53.0104 30.9818 52.7812 31.4141C52.5521 31.8464 52.2188 32.3177 51.7812 32.8281C51.349 33.3385 50.8229 33.849 50.2031 34.3594C49.5833 34.8646 48.875 35.3281 48.0781 35.75C47.2865 36.1719 46.4167 36.5104 45.4688 36.7656C44.5208 37.026 43.5078 37.1562 42.4297 37.1562ZM42.4375 34.5C43.0104 34.5 43.5469 34.3932 44.0469 34.1797C44.5521 33.9609 44.9948 33.6615 45.375 33.2812C45.7552 32.8958 46.0521 32.4557 46.2656 31.9609C46.4844 31.4661 46.5938 30.9375 46.5938 30.375C46.5938 29.7969 46.4844 29.2604 46.2656 28.7656C46.0521 28.2656 45.7552 27.8255 45.375 27.4453C44.9948 27.0651 44.5521 26.7708 44.0469 26.5625C43.5469 26.349 43.0104 26.2422 42.4375 26.2422C41.8646 26.2422 41.3255 26.349 40.8203 26.5625C40.3203 26.7708 39.8776 27.0651 39.4922 27.4453C39.112 27.8203 38.8151 28.2578 38.6016 28.7578C38.388 29.2578 38.2812 29.7969 38.2812 30.375C38.2812 30.9375 38.388 31.4661 38.6016 31.9609C38.8203 32.4557 39.1198 32.8958 39.5 33.2812C39.8802 33.6615 40.3203 33.9609 40.8203 34.1797C41.3255 34.3932 41.8646 34.5 42.4375 34.5ZM42.4297 32C41.9818 32 41.599 31.8411 41.2812 31.5234C40.9635 31.2057 40.8047 30.8255 40.8047 30.3828C40.8047 29.9349 40.9635 29.5521 41.2812 29.2344C41.599 28.9115 41.9818 28.75 42.4297 28.75C42.8828 28.75 43.2682 28.9115 43.5859 29.2344C43.9089 29.5521 44.0703 29.9349 44.0703 30.3828C44.0703 30.8255 43.9089 31.2057 43.5859 31.5234C43.2682 31.8411 42.8828 32 42.4297 32Z",fill:"#2E98EA"}),(0,A.jsx)("path",{d:"M39.4219 36.7656L40.2207 33.8739L40.2099 33.871L39.4219 36.7656ZM34.6953 34.3594L32.7977 36.683L32.8083 36.6916L32.8189 36.7001L34.6953 34.3594ZM33.0938 32.8281L30.816 34.7805L30.8217 34.7872L30.8274 34.7938L33.0938 32.8281ZM33.0938 27.9141L30.8274 25.9484L30.8217 25.955L30.816 25.9617L33.0938 27.9141ZM34.6953 26.3906L36.5812 28.7237L36.5835 28.7219L34.6953 26.3906ZM39.4219 23.9766L38.6379 21.0808L38.6339 21.0819L39.4219 23.9766ZM45.4609 23.9766L44.677 26.8723L44.681 26.8734L45.4609 23.9766ZM48.0703 24.9922L46.6594 27.6397L46.6666 27.6436L48.0703 24.9922ZM50.1953 26.3906L48.2882 28.7064L48.2988 28.7151L48.3094 28.7237L50.1953 26.3906ZM51.7812 27.9141L49.492 29.8529L49.4977 29.8597L49.5035 29.8664L51.7812 27.9141ZM51.7812 32.8281L49.5035 30.8758L49.4977 30.8825L49.492 30.8893L51.7812 32.8281ZM50.2031 34.3594L52.0986 36.6847L52.1044 36.68L52.1102 36.6752L50.2031 34.3594ZM48.0781 35.75L46.6745 33.0986L46.6673 33.1025L48.0781 35.75ZM45.4688 36.7656L44.6888 33.8688L44.6814 33.8708L44.674 33.8728L45.4688 36.7656ZM44.0469 34.1797L45.2252 36.9386L45.232 36.9357L45.2389 36.9327L44.0469 34.1797ZM45.375 33.2812L47.4963 35.4026L47.5035 35.3954L47.5107 35.3881L45.375 33.2812ZM46.2656 31.9609L43.5218 30.7479L43.5165 30.76L43.5112 30.7722L46.2656 31.9609ZM46.2656 28.7656L43.5067 29.9439L43.5141 29.9613L43.5218 29.9787L46.2656 28.7656ZM44.0469 26.5625L42.8686 29.3214L42.8858 29.3288L42.9032 29.3359L44.0469 26.5625ZM40.8203 26.5625L41.9742 29.3317L41.9812 29.3288L41.9883 29.3258L40.8203 26.5625ZM39.4922 27.4453L41.5988 29.5812L41.599 29.581L39.4922 27.4453ZM38.6016 31.9609L35.8471 33.1497L35.8524 33.1619L35.8578 33.174L38.6016 31.9609ZM39.5 33.2812L37.3643 35.3881L37.3715 35.3954L37.3787 35.4026L39.5 33.2812ZM40.8203 34.1797L39.6179 36.9282L39.635 36.9357L39.6523 36.943L40.8203 34.1797ZM41.2812 29.2344L43.4026 31.3557L43.4112 31.3471L43.4197 31.3384L41.2812 29.2344ZM43.5859 29.2344L41.4474 31.3384L41.4645 31.3558L41.4819 31.3729L43.5859 29.2344ZM43.5859 31.5234L41.4819 29.3849L41.4732 29.3935L41.4646 29.4021L43.5859 31.5234ZM42.4297 34.1562C41.614 34.1562 40.8818 34.0566 40.2207 33.8739L38.6231 39.6573C39.8473 39.9955 41.1204 40.1562 42.4297 40.1562V34.1562ZM40.2099 33.871C39.4708 33.6698 38.8173 33.4106 38.239 33.1025L35.4173 38.3975C36.4223 38.9331 37.4979 39.3511 38.6339 39.6603L40.2099 33.871ZM38.239 33.1025C37.5939 32.7587 37.0417 32.3954 36.5718 32.0187L32.8189 36.7001C33.6093 37.3338 34.479 37.8976 35.4173 38.3975L38.239 33.1025ZM36.5929 32.0358C36.0761 31.6137 35.6712 31.2212 35.3601 30.8625L30.8274 34.7938C31.4017 35.4559 32.0645 36.0842 32.7977 36.683L36.5929 32.0358ZM35.3715 30.8758C35.0287 30.4758 34.8394 30.1883 34.7443 30.0089L29.4432 32.8192C29.8064 33.5044 30.2838 34.1596 30.816 34.7805L35.3715 30.8758ZM34.7443 30.0089C34.685 29.8971 34.6762 29.8619 34.6862 29.8922C34.6921 29.9101 34.7068 29.958 34.7207 30.0322C34.7344 30.1058 34.75 30.2202 34.75 30.3672H28.75C28.75 31.3807 29.1474 32.2612 29.4432 32.8192L34.7443 30.0089ZM34.75 30.3672C34.75 30.5194 34.7335 30.6375 34.7194 30.7124C34.7051 30.7881 34.69 30.8367 34.6841 30.8544C34.6743 30.8841 34.6837 30.8476 34.7443 30.7333L29.4432 27.923C29.153 28.4704 28.75 29.3524 28.75 30.3672H34.75ZM34.7443 30.7333C34.8394 30.5539 35.0287 30.2664 35.3715 29.8664L30.816 25.9617C30.2838 26.5826 29.8064 27.2378 29.4432 27.923L34.7443 30.7333ZM35.3601 29.8797C35.6678 29.525 36.0687 29.1381 36.5812 28.7237L32.8094 24.0575C32.072 24.6536 31.4052 25.2823 30.8274 25.9484L35.3601 29.8797ZM36.5835 28.7219C37.0503 28.3438 37.5986 27.981 38.239 27.6397L35.4173 22.3446C34.4743 22.8471 33.6007 23.4166 32.8072 24.0593L36.5835 28.7219ZM38.239 27.6397C38.8173 27.3315 39.4708 27.0724 40.2099 26.8712L38.6339 21.0819C37.4979 21.3911 36.4223 21.8091 35.4173 22.3446L38.239 27.6397ZM40.2058 26.8723C40.8716 26.6921 41.6089 26.5938 42.4297 26.5938V20.5938C41.1255 20.5938 39.8576 20.7506 38.6379 21.0808L40.2058 26.8723ZM42.4297 26.5938C43.2702 26.5938 44.0148 26.6931 44.677 26.8723L46.2449 21.0808C45.0217 20.7497 43.7454 20.5938 42.4297 20.5938V26.5938ZM44.681 26.8734C45.4302 27.0751 46.0858 27.334 46.6595 27.6397L49.4812 22.3446C48.4715 21.8066 47.3875 21.3884 46.2409 21.0797L44.681 26.8734ZM46.6666 27.6436C47.3063 27.9822 47.8422 28.3391 48.2882 28.7064L52.1024 24.0748C51.3089 23.4213 50.4281 22.8459 49.474 22.3408L46.6666 27.6436ZM48.3094 28.7237C48.8161 29.1333 49.2029 29.5116 49.492 29.8529L54.0705 25.9752C53.495 25.2957 52.8245 24.6584 52.0812 24.0575L48.3094 28.7237ZM49.5035 29.8664C49.8463 30.2664 50.0356 30.5539 50.1307 30.7333L55.4318 27.923C55.0686 27.2378 54.5912 26.5826 54.059 25.9617L49.5035 29.8664ZM50.1307 30.7333C50.1913 30.8476 50.2007 30.8841 50.1909 30.8544C50.185 30.8367 50.1699 30.7881 50.1556 30.7124C50.1415 30.6375 50.125 30.5194 50.125 30.3672H56.125C56.125 29.3524 55.722 28.4704 55.4318 27.923L50.1307 30.7333ZM50.125 30.3672C50.125 30.2202 50.1406 30.1058 50.1543 30.0322C50.1682 29.958 50.1829 29.9101 50.1888 29.8922C50.1988 29.8619 50.19 29.8971 50.1307 30.0089L55.4318 32.8192C55.7276 32.2612 56.125 31.3807 56.125 30.3672H50.125ZM50.1307 30.0089C50.0356 30.1883 49.8463 30.4758 49.5035 30.8758L54.059 34.7805C54.5912 34.1596 55.0686 33.5044 55.4318 32.8192L50.1307 30.0089ZM49.492 30.8893C49.1958 31.2389 48.8039 31.6253 48.296 32.0436L52.1102 36.6752C52.8419 36.0726 53.5021 35.4381 54.0705 34.767L49.492 30.8893ZM48.3077 32.034C47.8586 32.4001 47.3188 32.7575 46.6745 33.0986L49.4818 38.4014C50.4312 37.8987 51.3081 37.3291 52.0986 36.6847L48.3077 32.034ZM46.6673 33.1025C46.0936 33.4082 45.4381 33.6671 44.6888 33.8688L46.2487 39.6625C47.3953 39.3538 48.4793 38.9356 49.489 38.3975L46.6673 33.1025ZM44.674 33.8728C44.0087 34.0556 43.265 34.1562 42.4297 34.1562V40.1562C43.7506 40.1562 45.033 39.9965 46.2635 39.6584L44.674 33.8728ZM42.4375 37.5C43.3933 37.5 44.3329 37.3197 45.2252 36.9386L42.8686 31.4208C42.7609 31.4668 42.6276 31.5 42.4375 31.5V37.5ZM45.2389 36.9327C46.0824 36.5675 46.8425 36.0564 47.4963 35.4026L43.2537 31.1599C43.1471 31.2665 43.0217 31.3544 42.8548 31.4267L45.2389 36.9327ZM47.5107 35.3881C48.1511 34.7389 48.6583 33.9879 49.0201 33.1497L43.5112 30.7722C43.4459 30.9236 43.3593 31.0527 43.2393 31.1744L47.5107 35.3881ZM49.0094 33.174C49.4039 32.2819 49.5938 31.3383 49.5938 30.375H43.5938C43.5938 30.5367 43.5649 30.6504 43.5218 30.7479L49.0094 33.174ZM49.5938 30.375C49.5938 29.4082 49.4085 28.4552 49.0094 27.5526L43.5218 29.9787C43.5602 30.0656 43.5938 30.1855 43.5938 30.375H49.5938ZM49.0245 27.5873C48.6623 26.7392 48.1504 25.978 47.4963 25.324L43.2537 29.5666C43.36 29.673 43.4418 29.792 43.5067 29.9439L49.0245 27.5873ZM47.4963 25.324C46.8318 24.6594 46.0553 24.1457 45.1906 23.7891L42.9032 29.3359C43.0488 29.396 43.1578 29.4708 43.2537 29.5666L47.4963 25.324ZM45.2252 23.8036C44.3329 23.4225 43.3933 23.2422 42.4375 23.2422V29.2422C42.6276 29.2422 42.7609 29.2754 42.8686 29.3214L45.2252 23.8036ZM42.4375 23.2422C41.4816 23.2422 40.5435 23.4225 39.6523 23.7992L41.9883 29.3258C42.1075 29.2754 42.2476 29.2422 42.4375 29.2422V23.2422ZM39.6665 23.7933C38.8113 24.1496 38.045 24.6589 37.3853 25.3096L41.599 29.581C41.7102 29.4713 41.8293 29.3921 41.9742 29.3317L39.6665 23.7933ZM37.3855 25.3094C36.7227 25.9632 36.2065 26.7276 35.8426 27.5795L41.3605 29.9361C41.4237 29.788 41.5013 29.6774 41.5988 29.5812L37.3855 25.3094ZM35.8426 27.5795C35.4601 28.4752 35.2812 29.4179 35.2812 30.375H41.2812C41.2812 30.1758 41.3159 30.0404 41.3605 29.9361L35.8426 27.5795ZM35.2812 30.375C35.2812 31.3281 35.4645 32.2631 35.8471 33.1497L41.356 30.7722C41.3115 30.6692 41.2812 30.5469 41.2812 30.375H35.2812ZM35.8578 33.174C36.2235 34.0013 36.7291 34.7442 37.3643 35.3881L41.6357 31.1744C41.5105 31.0474 41.4171 30.9101 41.3454 30.7479L35.8578 33.174ZM37.3787 35.4026C38.0274 36.0513 38.7804 36.5618 39.6179 36.9282L42.0228 31.4312C41.8602 31.3601 41.733 31.2716 41.6213 31.1599L37.3787 35.4026ZM39.6523 36.943C40.5435 37.3197 41.4816 37.5 42.4375 37.5V31.5C42.2476 31.5 42.1075 31.4668 41.9883 31.4164L39.6523 36.943ZM42.4297 29C42.5682 29 42.7548 29.0263 42.9565 29.11C43.1579 29.1935 43.3069 29.3064 43.4026 29.4021L39.1599 33.6448C40.0383 34.5231 41.1833 35 42.4297 35V29ZM43.4026 29.4021C43.495 29.4945 43.6076 29.6415 43.6919 29.8435C43.7767 30.0463 43.8047 30.237 43.8047 30.3828H37.8047C37.8047 31.6344 38.289 32.7739 39.1599 33.6448L43.4026 29.4021ZM43.8047 30.3828C43.8047 30.5213 43.7784 30.708 43.6947 30.9096C43.6111 31.111 43.4983 31.26 43.4026 31.3557L39.1599 27.1131C38.2816 27.9914 37.8047 29.1365 37.8047 30.3828H43.8047ZM43.4197 31.3384C43.3263 31.4333 43.1774 31.5489 42.9725 31.6353C42.7669 31.722 42.5746 31.75 42.4297 31.75V25.75C41.1674 25.75 40.0172 26.2416 39.1428 27.1304L43.4197 31.3384ZM42.4297 31.75C42.2921 31.75 42.1038 31.7237 41.8994 31.6381C41.695 31.5525 41.5441 31.4367 41.4474 31.3384L45.7244 27.1304C44.8426 26.2341 43.6867 25.75 42.4297 25.75V31.75ZM41.4819 31.3729C41.387 31.2795 41.2715 31.1305 41.185 30.9256C41.0983 30.72 41.0703 30.5277 41.0703 30.3828H47.0703C47.0703 29.1206 46.5787 27.9703 45.6899 27.0959L41.4819 31.3729ZM41.0703 30.3828C41.0703 30.2305 41.1001 30.0342 41.1879 29.8274C41.2751 29.622 41.3903 29.4751 41.4819 29.3849L45.6899 33.6619C46.5711 32.795 47.0703 31.6504 47.0703 30.3828H41.0703ZM41.4646 29.4021C41.5636 29.3031 41.7145 29.19 41.9154 29.1072C42.1158 29.0246 42.2984 29 42.4297 29V35C43.6709 35 44.8216 34.5304 45.7073 33.6448L41.4646 29.4021Z",fill:"white",mask:"url(#path-3-outside-1_446_28461)"})]})});var Vt=()=>a(710149);const Ht={views:null,downloads:null};function qt(e){const t=(0,r().v3)(),a=dt(),i=(0,n().K8)((()=>{const{currentUserStore:e}=b().default.state;return null==e?void 0:e.id}),[]),[{value:s,status:c}]=(0,l().Yb)((async()=>{if(!i)return{metrics:Ht,lastUpdated:void 0};const e=await y().callApi({eventName:"getMarketplaceMetricSummary",environment:t,data:{metrics:["views","downloads"],sources:a.filtersConfig.sources,dateRange:a.filtersConfig.dateRange}});return"success"===e.type&&e.data.success?e.data:{metrics:Ht,lastUpdated:void 0}}),[i,t,a.filtersConfig]),u="resolved"===c?s.metrics:Ht,p=(0,d().tz)(),g=e.product,{isMobileWidth:f}=(0,m().LS)(),h=function(e){return(0,o().IS)((t=>({shimmer:{height:"100%",width:"100%"},container:{display:"flex",gap:24,...e?{flexDirection:"column"}:{}},metricTitle:{fontSize:16,fontWeight:L().Wy.medium},header:{fontSize:24,lineHeight:"30px",fontWeight:L().Wy.semibold,marginBottom:4},subheader:{display:"flex",justifyContent:"space-between"},metricContainer:{border:"1px solid rgba(17, 17, 17, 0.1)",borderRadius:6,display:"flex",alignItems:"center",...e?{height:78,width:"100%",justifyContent:"space-between",paddingLeft:20,paddingRight:20}:{height:180,width:304,justifyContent:"center",flexDirection:"column"},gap:8},viewValue:{color:"rgba(46, 152, 234, 1)",fontSize:e?32:42,fontWeight:L().Wy.semibold},metricValue:{display:"flex",alignItems:"center",gap:6},viewIcon:{color:"rgba(46, 152, 234, 0.5)"},downloadValue:{color:"rgba(231, 181, 51, 1)",fontSize:e?32:42,fontWeight:L().Wy.semibold},downloadIcon:{color:"rgba(231, 181, 51, 0.5)"}})),[e])}(f);return(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{style:h.header,children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.template.header",defaultMessage:"Top line Metrics"})}),(0,A.jsxs)("div",{style:h.subheader,children:[(0,A.jsx)(St,{filtersConfig:a.filtersConfig,onDateRangeChange:a.onDateRangeChange,onSourceChange:a.onSourceChange}),(0,A.jsx)(Tt,{value:null==s?void 0:s.lastUpdated})]}),(0,A.jsx)(je().A,{size:16}),(0,A.jsxs)("div",{style:h.container,children:[(0,A.jsx)("div",{style:h.metricContainer,children:"pending"===c?(0,A.jsx)(Vt().A,{style:h.shimmer}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:h.metricTitle,children:g?p.formatMessage(Kt[g].views):(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.topLineMetrics.views",defaultMessage:"All product views"})}),null!=u&&u.views?(0,A.jsxs)("div",{style:h.metricValue,children:[(0,A.jsx)("div",{style:h.viewIcon,children:(0,A.jsx)(we().Q,{iconGroup:Nt,variantName:"large"})}),(0,A.jsx)("div",{style:h.viewValue,children:(0,A.jsx)(d().Gr,{value:u.views,maximumFractionDigits:2,...u.views>9999?{notation:"compact"}:{}})})]}):(0,A.jsx)("div",{children:Wt({width:54,height:40})})]})}),(0,A.jsx)("div",{style:h.metricContainer,children:"pending"===c?(0,A.jsx)(Vt().A,{style:h.shimmer}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:h.metricTitle,children:g?p.formatMessage(Kt[g].downloads):(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.topLineMetrics.downloads",defaultMessage:"All product downloads"})}),null!=u&&u.downloads?(0,A.jsxs)("div",{style:h.metricValue,children:[(0,A.jsx)("div",{style:h.downloadIcon,children:(0,A.jsx)(we().Q,{iconGroup:zt,variantName:"large"})}),(0,A.jsx)("div",{style:h.downloadValue,children:(0,A.jsx)(d().Gr,{value:u.downloads,maximumFractionDigits:2,...u.downloads>9999?{notation:"compact"}:{}})})]}):(0,A.jsx)("div",{children:Ot({width:54,height:40})})]})})]})]})}const Kt={template:(0,d().YK)({views:{id:"creatorProfile.analytics.topLineMetrics.templates.views",defaultMessage:"All template views"},downloads:{id:"creatorProfile.analytics.topLineMetrics.templates.downloads",defaultMessage:"All template downloads"}})};function Zt(){const e=(0,o().IS)((()=>({header:{fontSize:24,lineHeight:"30px",fontWeight:L().Wy.semibold,marginBottom:4}})),[]),{isFeatureEnabled:t}=(0,Xe().O)("marketplace_analytics_templates_chart");return(0,A.jsxs)("div",{children:[(0,A.jsx)(qt,{}),(0,A.jsx)(Pt,{}),t&&(0,A.jsx)(Bt,{header:(0,A.jsx)("div",{style:e.header,children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateAnalytics.topTemplates.header",defaultMessage:"Top 5 templates"})}),sortBy:"downloads",limit:5,shouldShowPaidFilter:!1})]})}function $t(){var e,t;const a=(0,r().v3)(),i=(0,d().tz)(),s=dt(),c=(0,n().K8)((()=>{const{currentUserStore:e}=b().default.state;return null==e?void 0:e.id}),[]),[{status:u,value:p}]=(0,l().Yb)((async()=>{if(!c)return{timeseriesData:[],lastUpdated:void 0};const e=await y().callApi({eventName:"getMarketplaceMetrics",environment:a,data:{metrics:["downloads"],sources:s.filtersConfig.sources,dateRange:s.filtersConfig.dateRange,by:s.filtersConfig.templateListingId?"templateDate":"date",templateListingId:s.filtersConfig.templateListingId}});if("success"===e.type&&_t(e.data)){const t=e.data;return{webTimeseriesData:t.metrics.map((e=>({x:new Date(e.ds).getTime(),y:e.downloads_web_1d,name:i.formatMessage(Yt.loggedOut)}))),appTimeseriesData:t.metrics.map((e=>({x:new Date(e.ds).getTime(),y:e.downloads_app_1d,name:i.formatMessage(Yt.loggedIn)}))),lastUpdated:e.data.lastUpdated}}return{webTimeseriesData:[],appTimeseriesData:[],lastUpdated:void 0}}),[c,a,i,s.filtersConfig]),g=(0,n().uB)(void 0,at().A),m=(0,o().IS)((e=>({header:{fontSize:24,lineHeight:"30px",fontWeight:L().Wy.semibold,marginBottom:4},filters:{fontSize:15,lineHeight:"22px",margin:0,fontWeight:L().Wy.semibold},subheader:{display:"flex",justifyContent:"space-between"},container:{marginTop:72}})),[]),f=It();return(0,A.jsxs)("div",{style:m.container,children:[(0,A.jsx)("div",{style:m.header,children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateDownloads.header",defaultMessage:"Template downloads"})}),(0,A.jsxs)("div",{style:m.subheader,children:[(0,A.jsx)(St,{filtersConfig:s.filtersConfig,onDateRangeChange:s.onDateRangeChange,onSourceChange:s.onSourceChange,shouldShowTemplateFilter:!0,onTemplateChange:s.onTemplateListingIdChange}),(0,A.jsx)(Tt,{value:null==p?void 0:p.lastUpdated})]}),(0,A.jsx)(tt().Z,{value:g,children:(0,A.jsx)(Je().AxisChart,{tooltipOptions:f,onLoadEventHandler:()=>{},seriesData:[{name:i.formatMessage(Yt.loggedOut),type:"area",fillColor:"rgba(0, 0, 0, 0)",color:"rgba(165, 121, 217, 1)",data:(null==p?void 0:p.webTimeseriesData)??[]},{name:i.formatMessage(Yt.loggedIn),type:"area",fillColor:"rgba(0, 0, 0, 0)",color:"rgba(234, 139, 66, 1)",data:(null==p?void 0:p.appTimeseriesData)??[]}],xAxisType:"datetime",showHorizontalGridLines:!0,xAxisTitle:i.formatMessage(Yt.date),yAxisTitle:i.formatMessage(Yt.downloads),yLabelFormatter:e=>(0,Qe().ZV)(e,e>9999?"compact":"number",i),timezone:"UTC",xLabelFormatter:e=>new Date(e).toLocaleDateString(i.locale,{month:"numeric",day:"numeric",timeZone:"UTC"}),axisType:"line",dataLabelsEnabled:!1,loadingProps:{isInitialLoading:"pending"===u,isThrottledLoading:"pending"===u,initialLoadingSvg:()=>(0,A.jsx)(et().z,{chartType:"line",showCopy:!1})},hasData:"resolved"===u&&(((null==p||null===(e=p.webTimeseriesData)||void 0===e?void 0:e.length)??0)>0||((null==p||null===(t=p.appTimeseriesData)||void 0===t?void 0:t.length)??0)>0)})})]})}const Yt=(0,d().YK)({loggedOut:{id:"creatorProfile.analytics.templateDownloads.loggedOout",defaultMessage:"Logged-out"},loggedIn:{id:"creatorProfile.analytics.templateDownloads.loggedIn",defaultMessage:"Logged-in"},date:{id:"creatorProfile.analytics.templateDownloads.date",defaultMessage:"Date"},downloads:{id:"creatorProfile.analytics.templateDownloads.downloads",defaultMessage:"Downloads"}});function Gt(){const e=(0,o().IS)((()=>({header:{fontSize:24,lineHeight:"30px",fontWeight:L().Wy.semibold,marginBottom:4}})),[]),{isFeatureEnabled:t}=(0,Xe().O)("marketplace_analytics_templates_chart");return(0,A.jsxs)("div",{children:[(0,A.jsx)(qt,{product:"template"}),t&&(0,A.jsx)($t,{}),(0,A.jsx)(Bt,{header:(0,A.jsx)("div",{style:e.header,children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateAnalytics.allTemplates.header",defaultMessage:"All Templates"})})})]})}function Xt(e){const{creatorId:t}=e,{setView:a}=$e(),r=(0,o().IS)((e=>({creatorProfileTemplatesEmptyStateHeader:{fontSize:24,color:e.regularTextColor,fontWeight:L().Wy.semibold},creatorProfileTemplatesEmptyStateDescription:{fontSize:15,color:e.mediumTextColor}})),[]),{isMobileWidth:n}=(0,m().LS)(),[s,l]=(0,i.useState)("overview");return(0,A.jsxs)("div",{children:[(0,A.jsx)(De().y,{size:"large",header:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.pageHeader",defaultMessage:"Analytics"}),subHeader:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.pageHeaderSubtitle",defaultMessage:"Insights to help you track, analyze, and optimize your content"})}),null==t?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(je().A,{size:24}),(0,A.jsx)(Te,{showCreatorProfileForm:()=>{Ae.setState({profileFormType:"create"}),a("/profile")},header:(0,A.jsx)("div",{style:r.creatorProfileTemplatesEmptyStateHeader,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.analytics.header",defaultMessage:"Create a Creator Profile"})}),description:(0,A.jsx)("div",{style:r.creatorProfileTemplatesEmptyStateDescription,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.analytics.description",defaultMessage:"A Creator Profile is required to submit, manage, and analyze Notion templates."})})})]}):n?(0,A.jsx)(Jt,{selectedSection:s,onSectionChange:e=>l(e)}):(0,A.jsx)(Qt,{selectedSection:s,onSectionChange:e=>l(e)})]})}function Qt(e){const t=(0,d().tz)(),{selectedSection:a,onSectionChange:i}=e;return(0,A.jsx)(Le,{style:{marginBottom:40},tabs:[{title:t.formatMessage(ea.overview),content:(0,A.jsx)(Zt,{}),onChange:()=>{i("overview")}},{title:t.formatMessage(ea.templates),content:(0,A.jsx)(Gt,{}),onChange:()=>{i("templates")}}],defaultSelectedIndex:"overview"===a?0:1})}function Jt(e){const{selectedSection:t,onSectionChange:a}=e,n=(0,r().v3)(),[s,l]=(0,i.useState)(!1),c=(0,d().tz)(),u=(0,i.useMemo)((()=>function(e){return[{value:"overview",label:e.formatMessage(ea.overviewLabel)},{value:"templates",label:e.formatMessage(ea.templateLabel)}]}(c)),[c]),p=(0,o().IS)((e=>({dropdownButton:{width:"100%",border:"1px solid rgba(0, 0, 0, 0.08)",padding:"8px 16px",borderRadius:4,marginBottom:40,display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:15,fontWeight:455}})),[]);return(0,A.jsxs)("div",{children:[(0,A.jsx)(xe().Ay,{open:s,onClick:()=>{l(!0)},renderOrigin:e=>{var a;let{onClick:i}=e;return(0,A.jsxs)(ve().A,{style:p.dropdownButton,role:"select",onClick:i,children:[null===(a=u.find((e=>e.value===t)))||void 0===a?void 0:a.label,(0,A.jsx)(we().Q,{colorName:"tertiary",iconGroup:be().I,variantName:"small"})]})},popupType:n.device.isMobile?xe().z7.SlideUp:xe().z7.Popup,render:()=>(0,A.jsx)(ye().A,{menuType:Se().gu.ActionSheet,children:u.map((e=>(0,A.jsx)(Ce().A,{title:e.label,onClick:()=>{l(!1),a(e.value)}},e.value)))})}),"overview"===t&&(0,A.jsx)(Zt,{}),"templates"===t&&(0,A.jsx)(Gt,{})]})}const ea=(0,d().YK)({overview:{id:"creatorProfile.analytics.tabs.analytics.overview",defaultMessage:"Overview"},templates:{id:"creatorProfile.analytics.tabs.analytics.templates",defaultMessage:"Templates"},overviewLabel:{id:"creatorProfile.analytics.dropdown.overview",defaultMessage:"Overview"},templateLabel:{id:"creatorProfile.analytics.dropdown.templates",defaultMessage:"Templates"}});var ta=()=>a(719147),aa=()=>a(21140),ia=()=>a(836251);function ra(){const e=(0,fe().x)();return"completed"===(null==e?void 0:e.stripe_connect_onboarding_phase)}var na=()=>a(983125),oa=()=>a(197190);function sa(e){const{displayName:t,hideProfile:a}=e,{name:i=""}=$e(),r=function(e){const t=e.split("/"),a=[];for(const i of t)if(i in ca){const e=ca[i];a.push(e)}return a}(i),n=function(e){const t=e.split("/");for(const a of t)try{if("number"==typeof parseInt(a,10))return a}catch{}}(i),o=da();return a&&r.shift(),(0,A.jsx)("ul",{style:o.crumbContainer,children:r.map(((e,a)=>(0,A.jsx)(la,{isLast:a===r.length-1,value:e.value(n),display:e.display(t)},e.value(n))))})}function la(e){const{isLast:t,value:a,display:i}=e,{setView:r}=$e(),n=da();return t?(0,A.jsx)("li",{style:n.activeCrumb,children:i},a):(0,A.jsxs)("li",{style:n.crumb,children:[(0,A.jsx)(oa().A,{onClick:()=>a?r(a):null,style:n.crumbButton,hoveredStyle:n.crumbButton,children:i}),(0,na().d)({height:16,width:16,color:"rgba(17, 17, 17, 0.5)"})]},a)}function da(){return(0,o().IS)((e=>({activeCrumb:{fontWeight:L().Wy.semibold,color:e.regularTextColor},crumb:{display:"flex",gap:"4px",alignItems:"center",fontWeight:L().Wy.semibold,color:"rgba(17, 17, 17, 0.5)"},crumbButton:{borderRadius:"4px",padding:"2px 8px"},crumbContainer:{listStyle:"none",display:"flex",gap:"12px",alignItems:"center",margin:0,padding:"0 0 12px 0"}})),[])}const ca={"new-coupon":{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"New Coupon",id:"creatorProfile.breadcrumb.createCoupon"}),value:()=>"/profile/coupons/new-coupon"},edit:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Edit Coupon",id:"creatorProfile.breadcrumb.editCoupon"}),value:e=>`/profile/coupons/edit/${e}`},coupons:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Coupons",id:"creatorProfile.breadcrumb.coupons"}),value:()=>"/profile/coupons"},profile:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Profile",id:"creatorProfile.breadcrumb.profile"}),value:()=>"/profile"},templates:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Templates",id:"creatorProfile.breadcrumb.templates"}),value:()=>"/profile/templates"},faq:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Template Creator FAQ",id:"creatorProfile.breadcrumb.faq"}),value:()=>"/profile/templates/faq"},new:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"New Template",id:"creatorProfile.breadcrumb.newTemplate"}),value:()=>"/profile/templates/form/new"},draft:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Edit Template",id:"creatorProfile.breadcrumb.editTemplate"}),value:e=>`/profile/templates/form/draft/${e}`},published:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Edit Template",id:"creatorProfile.breadcrumb.editTemplate"}),value:e=>`/profile/templates/form/published/${e}`},integrations:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Integrations",id:"creatorProfile.breadcrumb.viewIntegrations"}),value:()=>"/profile/integrations"},"new-integration":{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"New Integration",id:"creatorProfile.breadcrumb.newIntegrationForm"}),value:()=>"/profile/integrations/form/new-integration"},public:{display:e=>e,value:e=>`/profile/integrations/public/${e}`},internal:{display:e=>e,value:e=>`/profile/integrations/internal/${e}`}};var ua=()=>a(953418);function pa(e){const{route:t,children:a,exact:o,shouldRenderCallback:s}=e,{name:l}=$e(),d=(null==l?void 0:l.split("/"))||[],c=t.split("/"),u=function(e,t){const{name:a}=$e(),[o,s]=(0,i.useState)(null),l=(0,r().v3)(),d=Boolean(t);i.useEffect((()=>{async function e(e){if(!a)return!1;const t=await e(l,a);s(t)}t&&e(t)}),[t,a,e,l]);const c=(0,n().K8)((()=>!(d&&!o)||(!1===o?(Ee().oo({environment:l,url:"/not-found",redirect:!0}),!1):null!==o&&void 0)),[o,l,d]);return c}(t,s);if(!u)return null;if(o&&l!==t)return null;for(const i of c)if(!d.includes(i))return null;return(0,A.jsx)(ga,{children:a})}function ga(e){return function(){const e=(0,r().v3)();i.useEffect((()=>{const t=document.getElementsByClassName("notion-scroller").item(0);t&&ua().VG({element:t,environment:e,options:{top:0,behavior:"smooth"}})}),[e])}(),(0,A.jsx)(A.Fragment,{children:e.children})}function ma(){const e=(0,o().IS)((e=>({creatorProfileCouponsEmptyStateHeader:{fontSize:24,color:e.regularTextColor,fontWeight:L().Wy.semibold},creatorProfileCouponsEmptyStateDescription:{fontSize:15,color:e.mediumTextColor}})),[]),{setView:t}=$e();return(0,A.jsx)(Te,{showCreatorProfileForm:()=>{Ae.setState({profileFormType:"create"}),t("/profile")},header:(0,A.jsx)("div",{style:e.creatorProfileCouponsEmptyStateHeader,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.coupons.header",defaultMessage:"Create a Creator Profile"})}),description:(0,A.jsx)("div",{style:e.creatorProfileCouponsEmptyStateDescription,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.coupons.description",defaultMessage:"A Creator Profile is required to manage your coupons."})})})}var fa=()=>a(388821),ha=()=>a(374982);class ba extends _e().default{getInitialState(){return{activeCoupons:[],inactiveCoupons:[]}}}const va=new ba;async function xa(e){let{environment:t}=e;const a=await y().callApi({eventName:"getCreatorCoupons",environment:t,data:{}});if("success"===a.type){const e=fa().RecordMapWithRole.create(a.data.recordMap).getModelsByTable(ha().QO),t=e.filter((e=>e.active)).sort(((e,t)=>e.created_time-t.created_time)),i=e.filter((e=>!e.active)).sort(((e,t)=>e.created_time-t.created_time));va.setState({activeCoupons:t.map((e=>e.id)),inactiveCoupons:i.map((e=>e.id))})}}async function ya(e){let{environment:t,couponId:a}=e;"success"===(await y().callApi({eventName:"deleteMarketplaceCoupon",environment:t,data:{couponId:a}})).type&&await xa({environment:t})}async function Ca(e){let{environment:t,couponId:a,active:i}=e;const r=new(yt().tT)(t,{table:ha().QO,id:a});if(!r.canRead())return;const n=r.getModel();if(!n)return;const o=n.getStartTime()??0,s=n.getEndTime()??0;"success"===(await y().callApi({eventName:"createOrUpdateMarketplaceCoupon",environment:t,data:{id:a,active:i,discountType:n.getDiscount().type,discountValue:n.getDiscount().value,usageLimit:n.getCouponUsage().limit,applyToAll:n.getApplyToAll(),eligibleListingIds:n.getEligibleListingIds(),startDate:o,endDate:s}})).type&&await xa({environment:t})}const wa=(0,Fe().wt)("shop",{viewBox:"0 0 18 18",svg:(0,A.jsx)("path",{d:"M18 3V4.875C18 6.73875 16.4888 8.25 14.625 8.25C13.4513 8.25 12.4163 7.65 11.8125 6.73875C11.2087 7.65 10.1737 8.25 9 8.25C7.82625 8.25 6.79125 7.65 6.1875 6.73875C5.58375 7.65 4.54875 8.25 3.375 8.25C1.51125 8.25 0 6.73875 0 4.875V3L1.5 0H16.5L18 3ZM14.25 13.5H3.75V9.75H1.5V18H16.5V9.75H14.25V13.5Z"})}),ja=(0,Fe().wt)("stripeLogo",{viewBox:"0 0 400 400",svg:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("rect",{width:"400",height:"400",rx:"62",fill:"#635bff"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#fff",d:"M184.4 155.5c0-9.4 7.7-13.1 20.5-13.1 18.4 0 41.6 5.6 60 15.5v-56.8C244.8 93.1 225 90 205 90c-49.1 0-81.7 25.6-81.7 68.4 0 66.7 91.9 56.1 91.9 84.9 0 11.1-9.7 14.7-23.2 14.7-20.1 0-45.7-8.2-66-19.3v57.5c22.5 9.7 45.2 13.8 66 13.8 50.3 0 84.9-24.9 84.9-68.2-.4-72-92.5-59.2-92.5-86.3z"})]})});var Sa=()=>a(864943),_a=()=>a(464708);function Ma(e){const{message:t,badgeContainerStyle:a,badgeTitleStyle:i}=e,r=(0,o().IS)((e=>({badgeContainer:{borderRadius:"20px",padding:"1px 8px",marginLeft:0,alignSelf:"inherit"},badgeTitle:{fontSize:"12px",fontWeight:L().Wy.semibold,textWrap:"nowrap"}})),[]),n={...r.badgeContainer,...a},s={...r.badgeTitle,...i};return(0,A.jsx)(_a().A,{style:n,content:(0,A.jsx)("span",{style:s,children:t})})}function Aa(e){const{title:t,subtitle:a,pill:i,left:r,right:n}=e,s=function(){const{isMobileWidth:e}=(0,m().LS)();return(0,o().IS)((t=>({cardContainer:{display:"flex",flexDirection:e?"column":"row",alignItems:e?"start":"center",borderRadius:8,border:`1px solid ${t.outlineButtonBorder}`,padding:16,paddingLeft:20,width:"100%",gap:e?18:0},leftContainer:{marginRight:16},centerContainer:{display:"flex",flexDirection:"column",gap:e?12:0,width:"100%"},rightContainer:{display:"flex",justifyContent:"flex-end",marginLeft:e?0:16,width:e?"100%":void 0},titleContainer:{display:"flex",alignItems:e?"start":"center",justifyContent:"flex-start",flexDirection:e?"column-reverse":"row",gap:9},title:{fontWeight:L().Wy.semibold,fontSize:16,lineHeight:"22px"},subtitle:{fontSize:14,color:t.mediumTextColor,lineHeight:"22px"}})),[e])}();return(0,A.jsxs)("div",{style:s.cardContainer,children:[r?(0,A.jsx)("div",{style:s.leftContainer,children:r}):null,(0,A.jsxs)("div",{style:s.centerContainer,children:[(0,A.jsxs)("div",{style:s.titleContainer,children:[(0,A.jsx)("div",{style:s.title,children:t}),(0,A.jsx)("div",{children:i})]}),(0,A.jsx)("div",{style:s.subtitle,children:a})]}),n?(0,A.jsx)("div",{style:s.rightContainer,children:n}):null]})}var Ia=()=>a(556927),ka=()=>a(107683),Ta=()=>a(898486);class Pa extends _e().default{getInitialState(){return{name:"",handle:"",contactEmail:"",creatorDescription:"",links:At().Hn(5,At().dY("")),image:"",coverImage:"",webhookUrl:"",webhookUrlTested:!1,imageErrorMessage:void 0,nameErrorMessage:void 0,handleErrorMessage:void 0,contactEmailErrorMessage:void 0,creatorDescriptionErrorMessage:void 0,coverImageErrorMessage:void 0,webhookUrlErrorMessage:void 0,linksErrorMessage:At().Hn(5,At().dY(void 0)),contactEmailToggleError:!1,initialValues:{name:"",handle:"",contactEmail:"",creatorDescription:"",links:At().Hn(5,At().dY("")),image:"",coverImage:"",webhookUrl:"",webhookUrlTested:!1}}}}const La=new Pa,Da=(0,Fe().wt)("thoughtAlertCloud",{viewBox:"0 0 20 20",svg:(0,A.jsx)("path",{d:"M5.3125 16.0938C5.3125 16.8719 4.68438 17.5 3.90625 17.5C3.12812 17.5 2.5 16.8719 2.5 16.0938C2.5 15.3156 3.12812 14.6875 3.90625 14.6875C4.68438 14.6875 5.3125 15.3156 5.3125 16.0938ZM18.125 11.25C18.125 13.6656 16.1656 15.625 13.75 15.625C13.4375 15.625 13.1344 15.5906 12.8406 15.5281C12.0437 16.3562 10.9281 16.875 9.6875 16.875C7.70312 16.875 6.03125 15.5531 5.49375 13.7437C3.48438 13.675 1.875 12.0281 1.875 10C1.875 8.48125 2.77813 7.17812 4.07812 6.5875C4.22813 3.95937 6.4 1.875 9.0625 1.875C10.4469 1.875 11.6969 2.4375 12.6031 3.34375C12.9594 3.20312 13.3438 3.125 13.75 3.125C15.475 3.125 16.875 4.525 16.875 6.25C16.875 6.82188 16.7188 7.35313 16.4531 7.8125C17.4688 8.6125 18.125 9.85313 18.125 11.25ZM11.25 12.1875H8.75V14.0625H11.25V12.1875ZM11.25 4.6875H8.75V8.4375L9.375 10.9375H10.625L11.25 8.4375V4.6875Z"})});function Ra(e){let{primaryOnClick:t,secondaryOnClick:a}=e;const i=(0,d().tz)(),r=(0,o().IS)((e=>({title:{marginBottom:24},icon:{height:28,width:28,fill:"#FFBA33",marginBottom:21},font:{font:"inter",fontSize:16},modalContainer:{padding:"24px 28px",width:400},bullet:{marginBottom:12,paddingLeft:0},list:{marginBottom:22,paddingLeft:22},primaryCta:{justifyContent:"center",width:"100%",height:38,marginBottom:12,color:e.white,background:e.primaryBlack},primaryCtaHovered:{background:e.grayButtonBackground},secondaryCta:{justifyContent:"center",width:"100%",height:38,backgroundColor:e.white,border:`1px solid ${e.grayButtonBackground}`}})),[]);return(0,A.jsxs)("div",{style:r.modalContainer,children:[(0,A.jsx)("span",{children:Da(r.icon)}),(0,A.jsx)(rt().D,{styleName:"Title-24px/Bold",style:r.title,children:i.formatMessage(Ea.importantNote)}),(0,A.jsxs)("ul",{style:r.list,children:[(0,A.jsx)("li",{style:r.bullet,children:(0,A.jsx)(rt().D,{customStyles:r.font,children:i.formatMessage(Ea.firstBullet)})}),(0,A.jsx)("li",{style:r.bullet,children:(0,A.jsx)(rt().D,{customStyles:r.font,children:i.formatMessage(Ea.secondBullet)})}),(0,A.jsx)("li",{style:r.bullet,children:(0,A.jsx)(rt().D,{customStyles:r.font,children:i.formatMessage(Ea.thirdBullet)})})]}),(0,A.jsx)(M().p,{style:r.primaryCta,hoveredStyle:r.primaryCtaHovered,onClick:t,children:(0,A.jsx)(rt().D,{styleName:"Heading-17px/Medium",children:i.formatMessage(Ea.primaryCta)})}),(0,A.jsx)(M().p,{style:r.secondaryCta,onClick:a,children:(0,A.jsx)(rt().D,{styleName:"Heading-17px/Medium",children:i.formatMessage(Ea.secondaryCta)})})]})}const Ea=(0,d().YK)({importantNote:{id:"creatorProfile.sellerImportantNoteModal.importantNote",defaultMessage:"Important note"},firstBullet:{id:"creatorProfile.sellerImportantNoteModal.firstBullet",defaultMessage:"Once you onboard to payments, all existing paid templates will automatically start accepting Notion payments."},secondBullet:{id:"creatorProfile.sellerImportantNoteModal.secondBullet",defaultMessage:"In addition, any links to your template (the notion.site URL) will automatically re-direct to your listing in Marketplace."},thirdBullet:{id:"creatorProfile.sellerImportantNoteModal.thirdBullet",defaultMessage:"You can modify any individual listing to accept payments from a third-party platform in your template settings."},primaryCta:{id:"creatorProfile.sellerImportantNoteModal.primaryCta",defaultMessage:"Continue onboarding"},secondaryCta:{id:"creatorProfile.sellerImportantNoteModal.secondaryCta",defaultMessage:"Learn more"}});function Ba(e){const t=(0,r().v3)(),a=(0,d().tz)(),o=(0,fe().x)(),{onboardingStatus:s,setOnboardingStatus:l}=e,[c,u]=(0,i.useState)(!1),p=i.useCallback((async()=>{if(c)return;u(!0);const e=await y().callApi({eventName:"initiateCreatorStripeOnboarding",environment:t,data:{}});"success"===e.type?(l("started"),window.location.reload(),window.open(e.data.onboardingLink,"_blank","noreferrer")):C().f1((0,Ta().Hu)(a,e)),u(!1)}),[t,l,a,c]),g=(0,n().K8)((()=>La.state.contactEmail),[]),m=i.useCallback((async()=>{if(c)return;u(!0);const e=await y().callApi({eventName:"retrieveCreatorStripeDashboardLink",environment:t,data:{}});"success"===e.type?window.open(e.data.dashboardLink,"_blank"):C().f1((0,Ta().Hu)(a,e)),u(!1)}),[t,a,c]),[f,h]=i.useState(!1);return"enabled"===s?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Fa,{onClick:()=>{var e;o&&(g&&null!==(e=o.attributes)&&void 0!==e&&e.contactEmail?h(!0):La.setState({...La.state,contactEmailToggleError:!0,contactEmailErrorMessage:a.formatMessage(Ua.contactEmailRequiredForOnboardingErrorMessage)}))},children:(0,A.jsx)(d().sA,{id:"creatorProfileSeller.button.getStarted",defaultMessage:"Get started"})}),(0,A.jsx)(ka().s,{isOpen:f,onClosed:()=>h(!1),render:()=>(0,A.jsx)(Ra,{primaryOnClick:p,secondaryOnClick:()=>{h(!1),window.open(ia().xS("guides.marketplaceSelling"),"_blank","noreferrer")}}),showCloseIcon:!0})]}):"started"===s?(0,A.jsx)(Fa,{onClick:p,children:(0,A.jsx)(d().sA,{id:"creatorProfileSeller.button.completeOnboarding",defaultMessage:"Complete onboarding"})}):"completed"===s?(0,A.jsx)(Fa,{onClick:m,children:(0,A.jsx)(d().sA,{id:"creatorProfileSeller.button.sellerDashboard",defaultMessage:"Stripe seller dashboard"})}):null}function Fa(e){const{children:t,...a}=e,i=(0,o().IS)((e=>({externalIcon:{paddingLeft:4}})),[]);return(0,A.jsxs)(M().p,{isBlue:!0,...a,ignoreLocalHoverState:void 0,children:[t,(0,A.jsx)("div",{style:i.externalIcon,children:(0,A.jsx)(we().Q,{iconGroup:Ia().j,variantName:"small"})})]})}const Ua=(0,d().YK)({contactEmailRequiredForOnboardingErrorMessage:{id:"creatorProfileSellerAreaButtons.contactEmailRequiredForOnboardingErrorMessage",defaultMessage:"Stripe requires that you add an email address. Please add and 'Save' to continue."}}),Na="https://notion.notion.site/11fefdeead0581efa85cccef11c2fdda?pvs=105";function za(e){const{onboardingStatus:t,setOnboardingStatus:a}=e,i=(0,d().tz)(),r=(0,o().IS)((e=>({button:{fontWeight:L().Wy.semibold},inProgressBadgeContainer:{backgroundColor:e.accentColors.orange[100]},inProgressBadgeTitle:{color:e.accentColors.orange[500]},completedBadgeContainer:{backgroundColor:e.accentColors.green[100]},completedBadgeTitle:{color:e.accentColors.green[500]}})),[]);switch(t){case"disabled":return(0,A.jsx)(Aa,{title:i.formatMessage(Oa.calloutTitleDisabled),subtitle:i.formatMessage(Oa.calloutSubtitleDisabled),left:wa({height:16,width:16}),right:(0,A.jsx)("div",{style:r.button,children:(0,A.jsx)(Sa().A,{size:"lg",onClick:()=>{window.open(Na)},children:(0,A.jsx)(d().sA,{id:"creatorProfileSellerCallout.button.fillOutSurvey",defaultMessage:"Fill out survey"})})})});case"enabled":return(0,A.jsx)(Aa,{title:i.formatMessage(Oa.calloutTitleEnabled),subtitle:i.formatMessage(Oa.calloutSubtitleEnabled),left:ja({height:24,width:24}),right:(0,A.jsx)(Ba,{onboardingStatus:t,setOnboardingStatus:a})});case"started":return(0,A.jsx)(Aa,{title:i.formatMessage(Oa.calloutTitleStarted),subtitle:i.formatMessage(Oa.calloutSubtitleStarted),pill:(0,A.jsx)(Ma,{message:(0,A.jsx)(d().sA,{id:"creatorProfileSellerCallout.badge.inProgress",defaultMessage:"In Progress"}),badgeContainerStyle:r.inProgressBadgeContainer,badgeTitleStyle:r.inProgressBadgeTitle}),left:ja({height:24,width:24}),right:(0,A.jsx)(Ba,{onboardingStatus:t,setOnboardingStatus:a})});case"completed":return(0,A.jsx)(Aa,{title:i.formatMessage(Oa.calloutTitleCompleted),subtitle:i.formatMessage(Oa.calloutSubtitleCompleted),pill:(0,A.jsx)(Ma,{message:(0,A.jsx)(d().sA,{id:"creatorProfileSellerCallout.badge.complete",defaultMessage:"Complete"}),badgeContainerStyle:r.completedBadgeContainer,badgeTitleStyle:r.completedBadgeTitle}),left:ja({height:24,width:24}),right:(0,A.jsx)(Ba,{onboardingStatus:t,setOnboardingStatus:a})})}}const Oa=(0,d().YK)({calloutTitleDisabled:{id:"creatorProfileSellerCallout.title.stageDisabled",defaultMessage:"Get access to Stripe Merchant"},calloutSubtitleDisabled:{id:"creatorProfileSellerCallout.subtitle.stageDisabled",defaultMessage:"Complete a short survey to get started with payments in Notion"},calloutTitleEnabled:{id:"creatorProfileSellerCallout.title.stageEnabled",defaultMessage:"Complete onboarding with Stripe"},calloutSubtitleEnabled:{id:"creatorProfileSellerCallout.subtitle.stageEnabled",defaultMessage:"Get all of your paid templates processed on Notion"},calloutTitleStarted:{id:"creatorProfileSellerCallout.title.stageStarted",defaultMessage:"Pick up where you left off"},calloutSubtitleStarted:{id:"creatorProfileSellerCallout.subtitle.stageStarted",defaultMessage:"After completing all the steps, it should take up to 20 minutes to get verified"},calloutTitleCompleted:{id:"creatorProfileSellerCallout.title.stageCompleted",defaultMessage:"You've been successfully onboarded"},calloutSubtitleCompleted:{id:"creatorProfileSellerCallout.subtitle.stageCompleted",defaultMessage:"All of your information has been verified. Go forth and sell!"}});function Wa(){const e=(0,o().IS)((e=>({icon:{height:32,width:32,color:e.accentColors.gray[200]},container:{width:"100%",border:"2px dashed",borderColor:e.accentColors.gray[100],borderRadius:8,display:"grid",placeItems:"center",height:"100%",minHeight:297},header:{display:"flex",flexDirection:"column",alignItems:"center",color:e.accentColors.gray[500],gap:"12px"}})),[]),t=(0,fe().x)();return(0,A.jsx)("div",{style:e.container,children:(0,A.jsxs)("div",{style:e.header,children:[(0,Ne().C)(e.icon),Va(null==t?void 0:t.stripe_connect_onboarding_phase)]})})}function Va(e){if(!e)return null;switch(e){case"completed":return(0,A.jsx)(d().sA,{id:"creatorProfile.coupons.emptyState.headerCanCreate",defaultMessage:"You haven't created any coupons yet."});case"disabled":return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(d().sA,{id:"creatorProfile.coupons.emptyState.headerCannotCreate",defaultMessage:"You must be a Stripe-verified creator to add coupons."}),(0,A.jsx)(Ie().A,{onClick:()=>{window.open(Na)},children:(0,A.jsx)(d().sA,{id:"creatorProfile.coupons.emptyStateApplyButton",defaultMessage:"Apply"})})]});case"enabled":case"started":return(0,A.jsx)(d().sA,{id:"creatorProfile.coupons.emptyState.headerStatusPending",defaultMessage:"Your Stripe verification status is still pending, you can add coupons upon completion."});default:return(0,O().HB)(e)}}var Ha=()=>a(603250);const qa=30,Ka="DELETED__",Za=1e6,$a=5e3;function Ya(e){return new Date(parseInt(e.toString())).toISOString().split("T")[0]}var Ga=()=>a(24184),Xa=()=>a(568625),Qa=()=>a(369),Ja=()=>a(253093),ei=()=>a(735384),ti=()=>a(285790),ai=()=>a(939740),ii=()=>a(89924),ri=()=>a(42425);const ni=(0,d().YK)({edit:{id:"creatorProfile.coupons.actions.edit",defaultMessage:"Edit"},deactivate:{id:"creatorProfile.coupons.actions.deactivate",defaultMessage:"Deactivate"},delete:{id:"creatorProfile.coupons.actions.delete",defaultMessage:"Delete coupon"},relist:{id:"creatorProfile.coupons.actions.relist",defaultMessage:"Make coupon active"},couponActionsAriaLabel:{id:"creatorProfile.coupons.actions.ariaLabel",defaultMessage:"Coupons actions"}});function oi(e){const{type:t,couponId:a}=e,i=(0,r().v3)(),n=(0,d().tz)(),s=(0,o().IS)((e=>({buttonIcon:{width:20,height:20},deleteButton:{color:e.icon.uiRedPrimary}})),[]),l="active"===t?[{key:"edit",render:e=>(0,A.jsx)(it().A,{...e,icon:(0,Ja().j)(s.buttonIcon),title:n.formatMessage(ni.edit)}),action:()=>{(0,S().u4)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"edit",source:"creator_coupons_active",coupon_id:a}}}),Ee().oo({environment:i,url:`/profile/coupons/edit/${a}`})}},{key:"deactivate",render:e=>(0,A.jsx)(it().A,{...e,icon:(0,Qa().R)(s.buttonIcon),title:n.formatMessage(ni.deactivate)}),action:async()=>{await async function(e){let{environment:t,couponId:a}=e;await Ca({environment:t,couponId:a,active:!1})}({environment:i,couponId:a}),(0,S().u4)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"deactivate",source:"creator_coupons_active",coupon_id:a}}})}},{key:"delete",render:e=>(0,A.jsx)(it().A,{...e,icon:(0,ei().I)(s.buttonIcon),title:n.formatMessage(ni.delete),buttonStyle:s.deleteButton}),action:async()=>{await ya({environment:i,couponId:a}),(0,S().u4)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"delete",source:"creator_coupons_active",coupon_id:a}}})}}]:[{key:"edit",render:e=>(0,A.jsx)(it().A,{...e,icon:(0,Ja().j)(s.buttonIcon),title:n.formatMessage(ni.edit)}),action:()=>{(0,S().u4)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"edit",source:"creator_coupons_inactive",coupon_id:a}}}),Ee().oo({environment:i,url:`/profile/coupons/edit/${a}`})}},{key:"relist",render:e=>(0,A.jsx)(it().A,{...e,icon:(0,A.jsx)(we().Q,{iconGroup:Ga().e,variantName:"default"}),title:n.formatMessage(ni.relist)}),action:async()=>{(0,S().u4)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"activate",source:"creator_coupons_inactive",coupon_id:a}}}),await async function(e){let{environment:t,couponId:a}=e;await Ca({environment:t,couponId:a,active:!0})}({environment:i,couponId:a})}},{key:"delete",render:e=>(0,A.jsx)(it().A,{...e,icon:(0,ei().I)(s.buttonIcon),title:n.formatMessage(ni.delete),buttonStyle:s.deleteButton}),action:async()=>{(0,S().u4)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"delete",source:"creator_coupons_inactive",coupon_id:a}}}),await ya({environment:i,couponId:a})}}];return(0,A.jsx)(ye().A,{menuType:Se().gu.Popup,width:200,children:(0,A.jsx)(ai().Ay,{initialFocus:void 0,type:ai().Oh.Vertical,sections:[{key:"actions",render:e=>(0,A.jsx)(ii().A,{...e}),items:l}]})})}function si(e){const{type:t,couponId:a}=e,i=(0,o().IS)((()=>({buttonIcon:{width:14,height:14}})),[]),r=(0,d().tz)();return(0,A.jsx)(xe().Ay,{alignmentToOrigin:ri().C1.End,renderOrigin:e=>(0,A.jsx)(ti().A,{...e,ariaLabel:r.formatMessage(ni.couponActionsAriaLabel),icon:Xa().L,iconStyle:i.buttonIcon}),popupType:xe().z7.Popup,render:()=>(0,A.jsx)(oi,{type:t,couponId:a})})}var li=()=>a(179034),di=()=>a(666450),ci=()=>a(614505);function ui(e){const t=(0,r().v3)();return(0,n().K8)((()=>{if(!e)return[];return e.map((e=>new(yt().$1)(t,{table:di().UL,id:e}))).filter((e=>e.getCheckoutEnabled())).map((e=>e.getProductId())).filter((e=>(0,O().O9)(e))).map((e=>new(yt().$x)(t,{table:vt().XX,id:e}))).filter((e=>{var t;return(0,O().O9)(e)&&(null===(t=e.getAttributes())||void 0===t?void 0:t.checkout_enabled)})).map((e=>e.getListingId())).filter((e=>(0,O().O9)(e)))}),[t,e])}const pi=4,gi=(0,d().YK)({unknownTemplate:{defaultMessage:"Unknown template",id:"creatorProfile.couponsTable.templatesDropdown.unknownTemplate"},showMore:{defaultMessage:"View {count} more",id:"creatorProfile.couponsTable.templatesDropdown.showMore"}});function mi(e){const{eligibleListingIds:t}=e,a=(0,r().v3)(),o=(0,d().tz)(),[s,l]=(0,i.useState)(t.length<=pi),c=(0,n().K8)((()=>{const e=[];for(const i of t){const t=new(yt().$1)(a,{table:di().UL,id:i});if(!t.isReady())continue;const r=t.getProductId();if(void 0===r||!t.getCheckoutEnabled())continue;const n=new(yt().$x)(a,{table:vt().XX,id:r});if(!n.isReady())continue;const o=n.getBlockId();if(void 0===o)continue;const s=new(yt().Bv)(a,{table:li().ev,id:o});if(!s.isReady())continue;const l=s.getIcon();e.push({templateName:n.getName(),icon:l})}return e}),[t,a]),u=(0,i.useMemo)((()=>{const e=(s?c:c.slice(0,pi)).map(((e,t)=>({key:`template-${t}`,render:t=>(0,A.jsx)(it().A,{focused:!1,...t,icon:e.icon?(0,A.jsx)(ci().A,{icon:e.icon,isEmptyPage:!1,size:16,disabled:!0}):void 0,title:e.templateName,disabled:!0}),action:()=>{},disabled:!0})));return s||e.push({key:"show-more",render:e=>(0,A.jsx)(it().A,{focused:!1,...e,title:o.formatMessage(gi.showMore,{count:c.length-pi})}),action:()=>l(!0),disabled:!1}),e}),[c,s,o]);return(0,A.jsx)(ye().A,{menuType:Se().gu.Popup,width:264,children:(0,A.jsx)(ai().Ay,{type:ai().Oh.Vertical,initialFocus:void 0,sections:[{key:"templates",items:u,render:e=>(0,A.jsx)(ii().A,{...e})}]})})}function fi(e){const{applyToAll:t,eligibleListingIds:a}=e,i=ui(a).length;return(0,A.jsx)(xe().Ay,{alignmentToOrigin:ri().C1.End,renderOrigin:e=>(0,A.jsx)(M().p,{disabled:t,...e,children:t?(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.templatesDropdown.allTemplates",defaultMessage:"All templates"}):(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.templatesDropdown.templates",defaultMessage:"{count, plural, one {1 template} other {{count} templates}}",values:{count:i}})}),popupType:xe().z7.Popup,render:()=>(0,A.jsx)(mi,{eligibleListingIds:a}),disabled:0===i})}const hi=[{key:"code",header:(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.column.code",defaultMessage:"Code"}),style:{width:"15%"}},{key:"value",header:(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.column.value",defaultMessage:"Value"}),style:{width:"15%"}},{key:"startDate",header:(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.column.startDate",defaultMessage:"Start date (UTC)"}),style:{width:"15%"}},{key:"endDate",header:(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.column.endDate",defaultMessage:"End date (UTC)"}),style:{width:"15%"}},{key:"usage",header:(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.column.usage",defaultMessage:"Uses"}),style:{width:"15%"}},{key:"templates",header:(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.column.templates",defaultMessage:"Templates"}),style:{width:"15%"}},{key:"edit",header:(0,A.jsx)("div",{}),style:{width:"10%"}}],bi=(0,d().YK)({unlimited:{id:"creatorProfile.couponsTable.unlimited",defaultMessage:"Unlimited"},unspecified:{id:"creatorProfile.couponsTable.unspecified",defaultMessage:"Unspecified"},percentageDiscount:{id:"creatorProfile.couponsTable.percentageDiscount",defaultMessage:"{value}% off"},fixedDiscount:{id:"creatorProfile.couponsTable.fixedDiscount",defaultMessage:"${value} off"},active:{id:"creatorProfile.couponsTable.active",defaultMessage:"Active"},inactive:{id:"creatorProfile.couponsTable.inactive",defaultMessage:"Inactive"}});function vi(e,t,a){const i=t.code,r="percentage"===t.getDiscount().type?e.formatMessage(bi.percentageDiscount,{value:t.getDiscount().value}):e.formatMessage(bi.fixedDiscount,{value:t.getDiscount().value/100}),n=t.getStartTime()?Ya(t.getStartTime()):e.formatMessage(bi.unspecified),o=t.getEndTime()?Ya(t.getEndTime()):e.formatMessage(bi.unspecified),s=t.getCouponUsage().number_of_uses,l=t.getCouponUsage().limit===Number.MAX_VALUE?e.formatMessage(bi.unlimited):t.getCouponUsage().limit;return[(0,A.jsx)("div",{style:{wordBreak:"break-word"},children:i},"code"),(0,A.jsx)("div",{children:r},"value"),(0,A.jsx)("div",{children:n},"startDate"),(0,A.jsx)("div",{children:o},"endDate"),(0,A.jsx)("div",{children:`${s} / ${l}`},"usage"),(0,A.jsx)(fi,{applyToAll:t.apply_to_all,eligibleListingIds:t.getEligibleListingIds()},`templates-${t.id}`),(0,A.jsx)(si,{type:a,couponId:t.id},`action-${t.id}`)]}function xi(e){const{type:t}=e,a=(0,d().tz)(),i=(0,o().IS)((()=>({title:{fontSize:24,fontWeight:L().Wy.semibold},container:{overflowX:"auto"},table:{minWidth:640}})),[]),s=(0,r().v3)(),l=(0,n().K8)((()=>("active"===t?va.state.activeCoupons:va.state.inactiveCoupons).map((e=>{const i=new(yt().tT)(s,{table:ha().QO,id:e}).getModel();if(i)return{key:i.id,columns:vi(a,i,t)}})).filter(O().O9)),[s,a,t]),c="active"===t?a.formatMessage(bi.active):a.formatMessage(bi.inactive);return(0,A.jsxs)("div",{style:i.container,children:[(0,A.jsx)("div",{style:i.title,children:c}),(0,A.jsx)(je().A,{size:24}),(0,A.jsx)(Rt().A,{columns:hi,rows:l,tableStyle:i.table})]})}function yi(){const e=(0,r().v3)(),[t]=(0,l().Yb)((async()=>{await xa({environment:e})}),[e]),{activeCoupons:a,inactiveCoupons:i}=(0,n().O$)(va);return"resolved"===t.status&&0===a.length&&0===i.length?(0,A.jsx)(Wa,{}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(xi,{type:"active"}),(0,A.jsx)(je().A,{size:24}),(0,A.jsx)(xi,{type:"inactive"})]})}var Ci=()=>a(244641),wi=()=>a(284622),ji=()=>a(725614),Si=()=>a(331542),_i=()=>a(573351),Mi=()=>a(195821),Ai=()=>a(963575),Ii=()=>a(416845);const ki=["codeError","discountValueError","discountTypeError","startDateError","endDateError","usageLimitError","eligibleListingIdsError"];class Ti extends _e().default{getInitialState(){return{id:void 0,code:"",discount:{type:"percentage",value:0},coupon_usage:{limit:Number.MAX_VALUE,number_of_uses:0},active:!0,startDate:"",endDate:"",apply_to_all:!1,eligible_listing_ids:[],codeError:void 0,discountValueError:void 0,discountTypeError:void 0,startDateError:void 0,endDateError:void 0,usageLimitError:void 0,eligibleListingIdsError:void 0,initialValues:{id:void 0,code:"",discount:{type:"percentage",value:0},active:!1,startDate:"",endDate:"",coupon_usage:{limit:Number.MAX_VALUE,number_of_uses:0},apply_to_all:!1,eligible_listing_ids:[]}}}}const Pi=new Ti;class Li extends _e().default{getInitialState(){return{templateIds:[]}}}const Di=new Li;async function Ri(e,t){const a=await y().callApi({eventName:"checkMarketplaceCouponExists",environment:e,data:{code:t}});"success"===a.type&&a.data.codeExists&&Pi.setState({...Pi.state,codeError:V().A.formatMessage(Gi.couponCodeTakenError)})}async function Ei(e){const{initialValues:t,...a}=Pi.state;Pi.state.id||(Ni(a.code),await Ri(e,a.code)),zi(a.discount),a.endDate&&Wi(a.endDate),a.startDate&&Oi(a.startDate),Vi(a.coupon_usage.limit),function(e,t){if(t)return;Ui({value:e,validationFunction:Yi,fieldName:"eligibleListingIdsError"})}(a.eligible_listing_ids,a.apply_to_all);for(const o of ki)if(Pi.state[o])return!1;const i={discountType:a.discount.type,discountValue:a.discount.value,active:a.active,applyToAll:a.apply_to_all,startDate:a.startDate,endDate:a.endDate,usageLimit:a.coupon_usage.limit,eligibleListingIds:a.eligible_listing_ids??[]},r=a.id?{id:a.id,...i}:{code:a.code,...i},n=await y().callApi({eventName:"createOrUpdateMarketplaceCoupon",environment:e,data:{...r}});return!(!n||(0,Ii().Ow)(n)||"failed"===n.type)&&n.data.success}function Bi(e){Pi.setState({...Pi.state,[e]:void 0})}const Fi=200;function Ui(e){const{value:t,validationFunction:a,fieldName:i}=e;try{a(t)}catch(r){if((0,Ii().V4)(r)){const e=(0,Ta().DX)(V().A.getIntl(),r.body);e&&Pi.setState({...Pi.state,[i]:e})}}}function Ni(e){Ui({value:e,validationFunction:$i,fieldName:"codeError"})}function zi(e){Ui({value:e,validationFunction:Zi,fieldName:"discountValueError"})}function Oi(e){Ui({value:e,validationFunction:Ki,fieldName:"startDateError"})}function Wi(e){Ui({value:e,validationFunction:Ki,fieldName:"endDateError"})}function Vi(e){Ui({value:e,validationFunction:Hi,fieldName:"usageLimitError"})}function Hi(e){if(!function(e,t){const a=Number.isInteger(e)&&e>0,i=e<=Za||e===Number.MAX_VALUE;return a&&i&&e>=t}(e,Pi.state.coupon_usage.number_of_uses)){if(e<Pi.state.coupon_usage.number_of_uses)throw new(Ii().rT)("Coupon has already been used more times than this limit",{type:"marketplace_coupon_submission_invalid_usage_limit_already_surpassed"});throw new(Ii().rT)("Invalid usage limit",{type:"marketplace_coupon_submission_invalid_usage_limit"})}}function qi(e){const t=Ci().c9.now().toUTC().startOf("day").toMillis();return Ci().c9.fromFormat(e,"yyyy-MM-dd",{zone:"utc"}).startOf("day").toMillis()<t}function Ki(e){if(""!==e){if(isNaN(Date.parse(e)))throw new(Ii().rT)("Date is misformed",{type:"marketplace_coupon_submission_invalid_date"});if(qi(e))throw new(Ii().rT)("Date cannot be in the past",{type:"marketplace_coupon_submission_invalid_date_in_past"});if(Pi.state.startDate&&Pi.state.endDate&&Ci().c9.fromFormat(Pi.state.endDate,"yyyy-MM-dd",{zone:"utc"}).endOf("day").toMillis()<Ci().c9.fromFormat(Pi.state.startDate,"yyyy-MM-dd",{zone:"utc"}).startOf("day").toMillis())throw new(Ii().rT)("End date cannot be before start date",{type:"marketplace_coupon_submission_start_date_end_date_out_of_order"})}}function Zi(e){if(!function(e){const{type:t,value:a}=e;if(isNaN(a)||!(a>=1))return!1;if("percentage"===t){const e=a<=99,t=Math.floor(a)===a;return e&&t}return"fixed"===t}(e))throw new(Ii().rT)("Invalid discount",{type:"marketplace_coupon_submission_invalid_discount"})}function $i(e){if(!function(e){const t=!(0,Ha().e)(e)&&!e.startsWith(Ka)&&""!==e&&function(e){return/^[A-Z0-9]+$/.test(e)}(e),a=e.length<=qa;return t&&a}(e))throw new(Ii().rT)("Coupon code invalid",{type:"marketplace_coupon_submission_invalid_code"})}function Yi(e){if(!e||0===e.length)throw new(Ii().rT)("No eligible listing ids provided",{type:"marketplace_coupon_submission_invalid_eligible_listing_ids"})}const Gi=(0,d().YK)({couponCodeTakenError:{id:"couponFormActions.codeAlreadyUsedError",defaultMessage:"Invalid code, code already in use by another coupon"}});var Xi=()=>a(647556);var Qi=()=>a(787446);const Ji=(0,Fe().wt)("exclamationMarkTriangle",{viewBox:"0 0 16 16",svg:(0,A.jsx)("path",{d:"M2.94141 14.1181C2.54493 14.1181 2.20085 14.0315 1.90918 13.8584C1.61752 13.6852 1.39193 13.4528 1.23243 13.1611C1.07748 12.8694 1 12.5459 1 12.1904C1 11.844 1.09115 11.5136 1.27344 11.1992L6.56446 1.97754C6.74219 1.65397 6.98145 1.41016 7.28223 1.2461C7.58301 1.08203 7.89747 1 8.22559 1C8.55369 1 8.86589 1.08203 9.16209 1.2461C9.45829 1.4056 9.69989 1.64942 9.88669 1.97754L15.1777 11.1992C15.2689 11.3541 15.3373 11.5159 15.3828 11.6845C15.4284 11.8531 15.4512 12.0218 15.4512 12.1904C15.4512 12.5459 15.3714 12.8694 15.2119 13.1611C15.0524 13.4528 14.8268 13.6852 14.5352 13.8584C14.2481 14.0315 13.9063 14.1181 13.5098 14.1181H2.94141ZM3.06446 12.8261H13.3867C13.6009 12.8261 13.7695 12.7556 13.8926 12.6143C14.0156 12.473 14.0772 12.3089 14.0772 12.122C14.0772 11.9899 14.0453 11.8624 13.9815 11.7393L8.81349 2.68848C8.74509 2.57455 8.65849 2.49252 8.55369 2.44239C8.44889 2.3877 8.33949 2.36035 8.22559 2.36035C8.11166 2.36035 8 2.3877 7.89063 2.44239C7.78581 2.49252 7.7015 2.57455 7.6377 2.68848L2.46289 11.7255C2.43099 11.7893 2.40821 11.8577 2.39454 11.9306C2.38086 11.999 2.37403 12.0628 2.37403 12.122C2.37403 12.3089 2.43555 12.473 2.5586 12.6143C2.68164 12.7556 2.85026 12.8261 3.06446 12.8261ZM8.23239 9.38765C7.83594 9.38765 7.63086 9.18715 7.61719 8.78615L7.52149 5.46387C7.51237 5.26335 7.5739 5.09929 7.70606 4.97168C7.83822 4.84408 8.00912 4.78028 8.21875 4.78028C8.42839 4.78028 8.60159 4.84636 8.73829 4.97852C8.87499 5.10612 8.93879 5.26791 8.92969 5.46387L8.82029 8.78615C8.81119 9.18715 8.61519 9.38765 8.23239 9.38765ZM8.23239 11.6572C8.00912 11.6572 7.81771 11.5865 7.65821 11.4453C7.50326 11.2994 7.42579 11.1194 7.42579 10.9052C7.42579 10.691 7.50326 10.5133 7.65821 10.372C7.81771 10.2262 8.00912 10.1533 8.23239 10.1533C8.45119 10.1533 8.63799 10.2239 8.79299 10.3652C8.95249 10.5065 9.03219 10.6865 9.03219 10.9052C9.03219 11.124 8.95249 11.304 8.79299 11.4453C8.63349 11.5865 8.44659 11.6572 8.23239 11.6572Z"})}),er=(0,i.forwardRef)((function(e,t){const r=(0,i.useRef)(null),[n,s]=(0,i.useState)(!1),l=(0,o().IS)((e=>({iconStyles:{height:"14px",width:"14px",fill:e.accentColors.red[500]},creatorProfileSubmissionErrorBannerContainer:{color:e.accentColors.red[500],fontSize:"13.5px",marginTop:"20px",scrollMarginTop:"300px",maxWidth:"960px",minHeight:"40px",borderRadius:"8px",padding:"10px 24px 10px 24px",display:"flex",alignItems:"center",flexWrap:"wrap",gap:"10px",backgroundColor:e.accentColors.red[100]},creatorProfileSubmissionErrorBannerHidden:{scrollMarginTop:"300px"}})),[]),{count:c}=e,u=(0,a(591779).ZC)(c);let p=null;return(0,i.useEffect)((()=>{void 0!==u&&c<u&&s(!1)}),[c,u]),0!==c&&n&&(p=(0,A.jsxs)(A.Fragment,{children:[Ji(l.iconStyles),(0,A.jsx)(d().sA,{defaultMessage:"{count, plural, one {There is {count} error below} other {There are {count} errors below}}",id:"creatorProfile.form.CreatorProfileSubmissionErrorBanner",values:{count:c}})]})),(0,i.useImperativeHandle)(t,(()=>({scrollIntoView(e){var t,a;s(!0),null==r||null===(t=r.current)||void 0===t||null===(a=t.scrollIntoView)||void 0===a||a.call(t,e)}})),[]),(0,A.jsx)("div",{ref:r,style:c>0&&n?l.creatorProfileSubmissionErrorBannerContainer:l.creatorProfileSubmissionErrorBannerHidden,children:p})}));var tr=()=>a(949961),ar=()=>a(540123);function ir(e){const[t,a]=i.useState(!1),{name:r,isActive:n,disabled:s,onClick:l,style:d}=e,c=(0,o().IS)((()=>({toggleInner:{background:"#ffffff",width:"14px",height:"14px",borderRadius:"14px",position:"relative",left:"0",transition:"left 150ms"},toggleInnerActive:{transition:"left 150ms",left:"12px"},toggleActive:{background:"#2383e2"},toggle:{display:"block",width:"30px",height:"18px",background:"rgba(0, 0, 0, 0.2)",borderRadius:"30px",border:"0",padding:"2px"},toggleFocus:{outline:"rgba(35, 131, 226, 0.57) solid 2px"},disabled:{opacity:.5}})),[]),u={...c.toggle,...n?c.toggleActive:{},...t?c.toggleFocus:{},...s?c.disabled:{},...d};return(0,A.jsx)("button",{style:u,type:"button",onClick:l,name:r,id:r,"aria-pressed":n?"true":"false","aria-label":r,"aria-describedby":r,disabled:s,onFocus:()=>a(!0),onBlur:()=>a(!1),children:(0,A.jsx)("div",{style:n?{...c.toggleInner,...c.toggleInnerActive}:c.toggleInner})})}const rr=ir;a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698);var nr=()=>a(529324),or=()=>a(623580),sr=()=>a(758375),lr=()=>a(183607),dr=()=>a(113474);function cr(e){const t=(0,r().v3)();return(0,n().K8)((()=>{const a=new(yt().$x)(t,{table:"template",id:e});return{image:a.getTemplateImage(),name:a.getName(),price:a.getPrice(),numberDuplicates:a.getNumberOfDuplicates(),slug:a.getSlug(),templateDraftId:a.getTemplateDraftId(),contentfulId:a.getContentfulId()}}),[t,e])}function ur(e){const{children:t,href:a}=e;return(0,A.jsx)(Qi().u,{variant:"light",href:a,children:t||(0,A.jsx)(d().sA,{id:"creatorProfile.templates.button.editTemplate",defaultMessage:"Edit Template"})})}const pr=(0,Fe().wt)("clockFilled",{viewBox:"0 0 64 64",svg:(0,A.jsx)("g",{children:(0,A.jsx)("path",{d:"M32 8C18.75 8 8 18.75 8 32s10.75 24 24 24 24-10.75 24-24S45.25 8 32 8zm14 28H29V16h6v14h11v6z"})})});var gr=()=>a(841224),mr=()=>a(693954),fr=()=>a(950705),hr=()=>a(859428);const br=(0,i.createContext)({displaySection:"published"});function vr(e){let{localizedTemplateDraftData:t,displaySection:a}=e;const i=Mr(),r=function(e){const t=e.reduce(((e,t)=>{const a="in_review"===t.status||"rejected"===t.status?t.status:"published",i=e.find((e=>e.status===a));return i?i.data.push(t):e.push({status:a,data:[t]}),e}),[]),a=["published","in_review","rejected"];return t.sort(((e,t)=>a.indexOf(e.status)-a.indexOf(t.status)))}(t);return(0,A.jsx)(br.Provider,{value:{displaySection:a},children:(0,A.jsxs)("div",{style:i.localizedTemplateContainer,children:[(0,gr().Q)({...i.icon,...i.languageIcon}),(0,A.jsx)(xr,{groups:r})]})})}function xr(e){let{groups:t}=e;const a=Mr();return(0,A.jsx)("div",{style:a.languageDisplayItem,children:t.map(((e,i)=>{let{status:r,data:n}=e;return(0,A.jsxs)("div",{style:a.languageDisplayItem,children:[(0,A.jsx)(Cr,{status:r,locales:n}),i<t.length-1&&(0,A.jsx)("span",{style:a.languageDisplaySeparator,children:" · "})]},r)}))})}function yr(e,t){return"in_review"===e?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.draftTemplates.languagesInReviewCount",defaultMessage:"{count, plural, one {1 in review} other {{count} in review}}",values:{count:t}}):"rejected"===e?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.draftTemplates.languagesRejectedCount",defaultMessage:"{count, plural, one {1 rejected} other {{count} rejected}}",values:{count:t}}):(0,A.jsx)(d().sA,{id:"creatorProfile.templates.draftTemplates.languagesCount",defaultMessage:"{count, plural, one {1 language} other {{count} languages}}",values:{count:t}})}function Cr(e){let{status:t,locales:a}=e;const r=(0,d().tz)(),n=Mr(),{displaySection:o}=function(){const e=(0,i.useContext)(br);if(!e)throw new Error("useLocalizedTemplatesDisplay must be used within a LocalizedTemplatesDisplayContext.Provider");return e}();let s=null;return 0===a.length?null:(s=a.length<=2?(0,A.jsx)("div",{style:n.languageDisplayItem,children:a.map(((e,i)=>{if(!e.locale||!e.id)return null;const s=e.id,l=He(o,s);return(0,A.jsx)("div",{style:n.languageDisplayItemWithGap,children:(0,A.jsxs)("div",{style:n.languageDisplayItem,children:[(0,A.jsx)(Sr,{status:t,hideIcon:i>0,text:(0,fr().V)(r)[e.locale].caption,href:l}),i<a.length-1&&(0,A.jsx)("span",{style:n.languageDisplaySeparator,children:" · "})]})},e.id)}))}):(0,A.jsx)(_r,{localizedTemplateDraftData:a,status:t,tooltipText:yr(t,a.length)}),(0,A.jsx)("div",{children:s}))}br.displayName="LocalizedTemplatesDisplayContext";const wr={in_review:pr,draft:a(173019).r,rejected:mr().Q,published:null};function jr(e){let{status:t,styles:a}=e;if(!t||!wr[t])return null;const i=wr[t];return(0,A.jsx)("span",{children:i("rejected"===t?{...a.icon,...a.rejectedIcon}:a.icon)})}function Sr(e){let{href:t,text:a,status:r,hideIcon:n}=e;const[s,l]=(0,i.useState)(!1),d=function(e,t){return(0,o().IS)((a=>{const i=Ar(a,e);return{localizedTemplateLink:{color:t?i.hovered:i.base,fontSize:12,fontWeight:L().Wy.medium,display:"flex",alignItems:"center"},icon:{height:16,width:16,fill:t?i.hovered:i.base,marginRight:2},rejectedIcon:{height:12,width:12}}}),[e,t])}(r,s),{setView:c}=$e(),u=(0,i.useCallback)((e=>{t&&(e.preventDefault(),e.stopPropagation(),e.ctrlKey||e.metaKey?window.open(t,"_blank"):c(t))}),[t,c]),p=(0,i.useCallback)((e=>{t&&1===e.button&&(e.preventDefault(),window.open(t,"_blank"))}),[t]);return(0,A.jsxs)("div",{style:d.localizedTemplateLink,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:u,onAuxClick:p,children:[!n&&r&&(0,A.jsx)(jr,{status:r,styles:d}),a]})}function _r(e){let{localizedTemplateDraftData:t,status:a,tooltipText:i}=e;const r=Mr(),n=(0,d().tz)();return(0,A.jsx)("div",{children:(0,A.jsx)(hr().A,{renderTooltip:()=>(0,A.jsx)("div",{style:r.tooltipContent,children:t.map((e=>e.locale&&(0,A.jsx)(rt().D,{styleName:"Body-12px/Regular",colorName:"contrastPrimary",children:(0,fr().V)(n)[e.locale].caption},e.id)))}),render:e=>(0,A.jsx)("div",{...e,children:(0,A.jsx)(Sr,{text:i,status:a})})})})}function Mr(){return(0,o().IS)((e=>({localizedTemplateContainer:{display:"flex",alignItems:"flex-start"},languageIcon:{marginTop:2},languageDisplaySeparator:{paddingLeft:4,paddingRight:4,display:"flex",alignItems:"center",color:c().Ay.frontTextLight,height:18},localizedTemplateLink:{color:c().Ay.frontTextLight,fontSize:12,fontWeight:L().Wy.medium},languageDisplayItemWithGap:{display:"flex",alignItems:"center",gap:4},languageDisplayItem:{display:"flex",alignItems:"center",flexWrap:"wrap"},hoveredTextStyle:{color:c().Ay.frontTextDark},tooltipContent:{display:"flex",flexDirection:"column",gap:4},icon:{height:16,width:16,fill:c().Ay.frontTextLight,marginRight:6}})),[])}function Ar(e,t){return"in_review"===t?{base:e.creatorProfile.inReviewText,hovered:e.creatorProfile.inReviewHoveredText}:"rejected"===t?{base:e.accentColors.red[500],hovered:e.accentColors.red[700]}:"draft"===t?{base:e.accentColors.blue[500],hovered:e.accentColors.blue[700]}:{base:c().Ay.frontTextLight,hovered:c().Ay.frontTextDark}}const Ir=vr;a(941795);var kr=()=>a(721265),Tr=()=>a(816559),Pr=()=>a(479490);function Lr(e){const[t,a]=(0,i.useState)(!1),r=(0,Pr().A)("(hover: none)");return(0,i.useEffect)((()=>{e.current&&(e.current.onmouseenter=()=>{a(!0)},e.current.onmouseleave=()=>{a(!1)})}),[e]),{isHovered:t,isTouchDevice:r}}const Dr=(0,i.createContext)(void 0);function Rr(){const e=(0,i.useContext)(Dr);if(!e)throw new Error("TemplateCardContext not found. Please make sure this is used within a TemplateCard.");return e}Dr.displayName="TemplateCardContext";const Er=["in_review","rejected","published","published_draft","published_rejected","published_in_review"],Br={published:(0,A.jsx)(d().sA,{id:"creatorProfile.draftTemplates.status.published",defaultMessage:"Published"}),rejected:(0,A.jsx)(d().sA,{id:"creatorProfile.draftTemplates.status.rejected",defaultMessage:"Rejected"}),in_review:(0,A.jsx)(d().sA,{id:"creatorProfile.draftTemplates.status.inReview",defaultMessage:"Awaiting Approval"}),published_draft:(0,A.jsx)(d().sA,{id:"creatorProfile.draftTemplates.status.publishedDraft",defaultMessage:"Unpublished Changes"}),published_rejected:(0,A.jsx)(d().sA,{id:"creatorProfile.draftTemplates.status.publishedRejected",defaultMessage:"Changes Rejected"}),published_in_review:(0,A.jsx)(d().sA,{id:"creatorProfile.draftTemplates.status.publishedInReview",defaultMessage:"Changes Awaiting Approval"}),draft:null};function Fr(e){const t=(0,o().IS)((e=>({rejectedBadgeContainer:{backgroundColor:e.accentColors.red[100]},inReviewBadgeContainer:{backgroundColor:"rgba(230, 230, 230, 1)"},inReviewBadgeNewContainer:{backgroundColor:e.creatorProfile.inReviewBackground},inReviewBadgeTitle:{color:"rgba(102, 102, 102, 1)"},inReviewBadgeNewTitle:{color:e.creatorProfile.inReviewText},rejectedBadgeTitle:{color:e.accentColors.red[500]},publishedBadgeContainer:{backgroundColor:e.accentColors.green[100]},publishedBadgeTitle:{color:e.accentColors.green[500]},publishedDraftBadgeContainer:{backgroundColor:e.accentColors.blue[100]},publishedDraftBadgeTitle:{color:e.accentColors.blue[500]}})),[]),{templateStatus:a}=e,{isFeatureEnabled:i}=(0,Xe().O)("self_serve_localization_frontend");if(void 0===a||!Er.includes(a))return null;const r={..."published"===a?t.publishedBadgeContainer:{},..."published_draft"===a?t.publishedDraftBadgeContainer:{},..."in_review"===a||"published_in_review"===a?i?t.inReviewBadgeNewContainer:t.inReviewBadgeContainer:{},..."rejected"===a||"published_rejected"===a?t.rejectedBadgeContainer:{}},n={..."published_draft"===a?t.publishedDraftBadgeTitle:{},..."published"===a?t.publishedBadgeTitle:{},..."in_review"===a||"published_in_review"===a?i?t.inReviewBadgeNewTitle:t.inReviewBadgeTitle:{},..."rejected"===a||"published_rejected"===a?t.rejectedBadgeTitle:{}},s=Br[a];return(0,A.jsx)(Ma,{message:s,badgeContainerStyle:r,badgeTitleStyle:n})}function Ur(e){const{children:t,topRightCardOverlay:a,bottomRightCardOverlay:r,onClick:n,href:s,actions:l,shouldShowHoverBackground:d=!0,selected:c=!1}=e,u=(0,o().IS)((e=>({templateCardContainer:{width:"100%",display:"flex",alignItems:"center",gap:"24px",borderRadius:"8px",padding:"16px 24px",cursor:"pointer"},templateCardMobileContainer:{display:"flex",flexDirection:"column",gap:"12px",borderRadius:"8px",cursor:"pointer"},templateCardContainerHovered:{background:"rgba(0, 0, 0, 0.03)"},templateCardContainerPressed:{background:"rgba(0, 0, 0, 0.03)"},templateCardContainerNoHovered:{background:"none"},templateCardContainerNoPressed:{background:"none"},templateCardContainerSelected:{boxShadow:e.shadowSM}})),[]),p=(0,i.useRef)(null),{isHovered:g,isTouchDevice:f}=Lr(p),h=(0,Pr().A)("(max-width: 1190px)")&&Boolean(l),{isMobileWidth:b}=(0,m().LS)(),v={...b?u.templateCardMobileContainer:u.templateCardContainer,...g&&d?u.templateCardContainerHovered:u.templateCardContainerNoHovered,...c?u.templateCardContainerSelected:{}};return(0,A.jsx)(Dr.Provider,{value:{isHovered:g,isTouchDevice:f,shouldShowActionsBelowContent:h},children:(0,A.jsxs)("div",{ref:p,style:{position:"relative"},children:[(0,A.jsxs)(ve().A,{style:v,hoveredStyle:d?u.templateCardContainerHovered:u.templateCardContainerNoHovered,pressedStyle:d?u.templateCardContainerPressed:u.templateCardContainerNoPressed,onClick:n,href:s,children:[a?(0,A.jsx)("div",{children:a}):null,r?(0,A.jsx)("div",{children:r}):null,t]}),l]})})}function Nr(e){const{imageSrc:t,node:a,topLeftOverlay:i,topRightOverlay:r,onClick:n,type:s="template",style:l}=e,{isMobileWidth:d}=(0,m().LS)(),c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rectangle";return(0,o().IS)((()=>({thumbnail:{position:"relative",borderRadius:"6px",aspectRatio:"16/10",boxShadow:"0px 3px 9px rgb(0 0 0 / 3%)",border:"1px solid rgba(0, 0, 0, 0.08)",flexShrink:0},thumbnailMobile:{height:"210px"},templateCardImage:{...Or[e],objectFit:"cover",borderRadius:"6px"},templateCardImageMobile:{width:"100%",height:"210px",objectFit:"cover",borderRadius:"6px"}})),[e])}("integration"===s?"square":"rectangle"),u=d?c.templateCardImageMobile:c.templateCardImage;return(0,A.jsx)(zr,{onClick:n,children:(0,A.jsxs)("div",{style:{...c.thumbnail,...d?c.thumbnailMobile:{},...l},children:["string"==typeof t?(0,A.jsx)(Tr().Ay,{src:t.startsWith("http")?t:`https:${t}`,style:u,placeholderLoadedStyle:u,loading:"lazy"}):(0,A.jsx)("div",{style:u,children:a}),i||null,r||null]})})}function zr(e){const{onClick:t,children:a}=e,{isMobileWidth:i}=(0,m().LS)(),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rectangle";return(0,o().IS)((()=>({templateCardImageWrapper:Or[e],templateCardImageMobileWrapper:{width:"100%",height:"210px"},templateCardImageHover:{background:"transparent"}})),[e])}();return t?(0,A.jsx)(ve().A,{onClick:t,style:i?r.templateCardImageMobileWrapper:r.templateCardImageWrapper,hoveredStyle:r.templateCardImageHover,children:a}):(0,A.jsx)(A.Fragment,{children:a})}const Or={square:{width:80,height:80},rectangle:{width:160,height:100}};function Wr(e){const{title:t,subtitle:a,children:i}=e,{isTouchDevice:r,shouldShowActionsBelowContent:n}=Rr(),s=(0,o().IS)((()=>({templateCardTitleAndSubtitleContainer:{display:"flex",flexDirection:"column",gap:"2px"},templateCardContentSmallContainer:{display:"flex",flexDirection:"column",gap:"8px"},templateCardContentBigContainer:{display:"flex",alignSelf:"center",justifyContent:"space-between",flexGrow:3},templateCardTitle:{fontWeight:L().Wy.semibold,fontSize:15,lineHeight:"22px"},templateCardContentActionStub:{height:"34px",width:"100%"}})),[]),{isMobileWidth:l}=(0,m().LS)(),d=r||n;return(0,A.jsxs)("div",{style:d?s.templateCardContentSmallContainer:s.templateCardContentBigContainer,children:[(0,A.jsxs)("div",{style:s.templateCardTitleAndSubtitleContainer,children:["string"==typeof t?(0,A.jsx)("span",{style:s.templateCardTitle,children:t}):(0,A.jsx)(A.Fragment,{children:t}),a||null]}),i,n&&!l?(0,A.jsx)("div",{style:s.templateCardContentActionStub}):null]})}function Vr(e){const{children:t,imageType:a="rectangle",extraLeftSpacing:r=0,forceShow:n=!1}=e,{isHovered:s,isTouchDevice:l,shouldShowActionsBelowContent:d}=Rr(),{isMobileWidth:c}=(0,m().LS)(),u=s&&!l,p=function(e){const{imageType:t,extraLeftSpacing:a}=e,i=Or[t].width;return(0,o().IS)((()=>({templateCardActionsContainer:{position:"absolute",display:"flex",gap:"8px 4px",alignItems:"center",flexWrap:"wrap"},templateCardActionsContainerRight:{right:"24px",top:"50%",transform:"translateY(-50%)"},templateCardActionsContainerBelow:{bottom:"4px",left:i+25+a}})),[i,a])}({imageType:a,extraLeftSpacing:r});if((!u&&!d&&!l||c)&&!n)return null;const g=i.Children.toArray(t),f={...p.templateCardActionsContainer,...d?p.templateCardActionsContainerBelow:p.templateCardActionsContainerRight};return(0,A.jsx)("div",{style:f,children:l||d?g.reverse():g})}function Hr(e){const t=(0,o().IS)((()=>({templateTitleContainer:{display:"flex",alignItems:"center",gap:"6px"},templateNarrowWidthTitleContainer:{display:"flex",flexDirection:"column",alignSelf:"self-start",gap:"2px"},templateTitle:{fontWeight:L().Wy.semibold,fontSize:15,lineHeight:"22px"}})),[]),a=(0,Pr().A)("(max-width: 816px)"),{templateName:i,templateStatus:r}=e;return a?(0,A.jsxs)("div",{style:t.templateNarrowWidthTitleContainer,children:[(0,A.jsx)(Fr,{templateStatus:r}),(0,A.jsx)("span",{style:t.templateTitle,children:i})]}):(0,A.jsxs)("div",{style:t.templateTitleContainer,children:[(0,A.jsx)("span",{style:t.templateTitle,children:i}),(0,A.jsx)(Fr,{templateStatus:r})]})}function qr(e){const{templateStatus:t}=e,a=(0,o().IS)((e=>({imageOverlayContainer:{position:"absolute",top:-6,right:-7},lockedIconContainer:{height:"20px",width:"20px",borderRadius:"50%",backgroundColor:"rgba(128, 128, 128, 1)",display:"flex",alignItems:"center",justifyContent:"center"},lockedIcon:{width:"14px",height:"14px",fill:e.white}})),[]);return"in_review"===t||"published_in_review"===t?(0,A.jsx)("div",{style:a.imageOverlayContainer,children:(0,A.jsx)("div",{style:a.lockedIconContainer,children:(0,A.jsx)("span",{children:(0,kr().p)(a.lockedIcon)})})}):null}function Kr(e){const{children:t,style:a}=e,{isMobileWidth:i}=(0,m().LS)(),r=(0,o().IS)((()=>({templateCardGrid:{display:"flex",flexDirection:"column",gap:"28px"},templateCardGridMobile:{display:"flex",flexDirection:"column",gap:"40px"}})),[]);return(0,A.jsx)("div",{style:{...i?r.templateCardGridMobile:r.templateCardGrid,...a},children:t})}function Zr(){const e=(0,o().IS)((()=>({ellipseContainer:{width:"2px",height:"2px",borderRadius:"50%",background:"rgba(128, 128, 128, 1)"}})),[]);return(0,A.jsx)("div",{style:e.ellipseContainer})}function $r(e){var t,a;const{creatorId:s}=e,c=(0,o().IS)((e=>({publishedTemplatesSubHeader:{display:"flex",marginLeft:"-12px",marginTop:"-4px",color:"black"},publishedTemplateLoadMore:{display:"flex",justifyContent:"center",marginTop:"24px"},templateCardGridContainer:{minHeight:"300px"},noPublishedTemplatesText:{color:e.regularTextColor}})),[]),u=(0,r().v3)(),p=(0,d().tz)(),g=(0,i.useRef)("idle"),{isStatsigReady:m,isFeatureEnabled:f}=(0,Xe().O)("self_serve_localization_frontend"),{name:h}=$e(),b=(0,n().K8)((()=>{const e=oe().A.state,{orderBy:t,page:a,paid:i="all"}=e.publishedTemplateSearchArgs;return{publishedTemplatesSearch:e.publishedTemplatesSearch,orderBy:t,page:a,paid:i}}),[]),{publishedTemplatesSearch:v,orderBy:x,page:y,paid:C}=b,[w,j]=(0,i.useState)(le({creatorId:s,orderBy:x,paid:C})),[{status:S}]=(0,l().Yb)((async()=>m&&h?de({environment:u,locale:p,creatorId:s,orderBy:x,paid:C,page:y,includeLocalizedTemplates:f}):Promise.resolve({})),[u,p,s,x,C,y,m,f,h]),_=(0,i.useCallback)((async(e,t)=>{await ce({environment:u,templateId:e,templateName:t,creatorId:s,type:"pin"})}),[s,u]);(0,i.useEffect)((()=>{"resolved"===S&&"pending"===g.current&&j(`${s}::${x}::${C}`),g.current=S}),[S,x,C,s]);const M=v[w],I=(null==M||null===(t=M.templates)||void 0===t?void 0:t.reduce(((e,t)=>t.length+e),0))||0;return 0===I&&"recent"===x&&"all"===C?null:(0,A.jsxs)("section",{children:[(0,A.jsx)(De().y,{size:"medium",header:(0,A.jsx)(d().sA,{defaultMessage:"Published",id:"creatorProfile.templates.published"}),subHeader:(0,A.jsx)("div",{style:c.publishedTemplatesSubHeader,children:(0,A.jsxs)("div",{style:{display:"flex"},children:[(0,A.jsx)(nt().A,{items:Jr,getKey:e=>e.value,onSelect:e=>{oe().A.setState({...oe().A.state,publishedTemplateSearchArgs:{...oe().A.state.publishedTemplateSearchArgs,paid:e.val,page:1}})},selectedItem:Jr.find((e=>e.val===C)),renderItem:e=>(0,A.jsx)(it().A,{...e,title:e.key}),renderOrigin:e=>{var t;return(0,A.jsx)(dr()._,{focused:!1,title:void 0===C?Jr[0].value:null===(t=Jr.find((e=>e.val===C)))||void 0===t?void 0:t.value,...e})}}),(0,A.jsx)(nt().A,{items:en,getKey:e=>e.value,onSelect:e=>{oe().A.setState({...oe().A.state,publishedTemplateSearchArgs:{...oe().A.state.publishedTemplateSearchArgs,orderBy:e.val,page:1}})},selectedItem:en.find((e=>e.val===x)),renderItem:e=>(0,A.jsx)(it().A,{...e,title:e.key}),renderOrigin:e=>{var t;return(0,A.jsx)(dr()._,{focused:!1,title:null===(t=en.find((e=>e.val===x)))||void 0===t?void 0:t.value,...e})}})]})})}),m?0===I?(0,A.jsx)("div",{style:c.templateCardGridContainer,children:(0,A.jsx)("span",{style:c.noPublishedTemplatesText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.publishedTemplates.noTemplates.label",defaultMessage:"No published templates found."})})}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Kr,{style:c.templateCardGridContainer,children:(null==M||null===(a=M.templates)||void 0===a?void 0:a[0].length)>0?(0,A.jsx)(A.Fragment,{children:M.templates.map((e=>e.map((e=>{const t=null==M?void 0:M.templateGroupsByContentfulId;return(0,A.jsx)(Yr,{templateId:e,pinTemplate:_,localizedTemplateGroups:t},`publishedTemplateCard--${e}`)}))))}):null}),["idle","resolved"].includes(S)&&(null==M?void 0:M.count)>I?(0,A.jsx)("div",{style:c.publishedTemplateLoadMore,children:(0,A.jsx)(Qi().u,{variant:"light",onClick:()=>{oe().A.setState({...oe().A.state,publishedTemplateSearchArgs:{...oe().A.state.publishedTemplateSearchArgs,page:oe().A.state.publishedTemplateSearchArgs.page+1}})},children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.publishedTemplates.button.loadMore",defaultMessage:"Load More"})})}):null]}):(0,A.jsx)("div",{children:(0,A.jsx)(Si().A,{})})]})}function Yr(e){var t,a;const{templateId:i,pinTemplate:o}=e,{isFeatureEnabled:s}=(0,Xe().O)("self_serve_localization_frontend"),l=(0,r().v3)(),c=cr(i),u=c.contentfulId,p=function(e){const t=(0,r().v3)(),{isFeatureEnabled:a}=(0,Xe().O)("self_serve_localization_frontend");return(0,n().K8)((()=>e&&a?e.map((e=>{const a=new(yt().$x)(t,{table:"template",id:e}),i=a.getTemplateDraftId();let r;if(i){const e=new(yt().x1)(t,{table:"template_draft",id:i});if(e.isReady()&&e.isDefined()){const t=e.getStatus();"published"!==t&&(r=t)}}return{name:a.getName(),locale:a.getLocale(),id:e,...r?{status:r}:{}}})):[]),[t,e,a])}(u?null===(t=e.localizedTemplateGroups)||void 0===t?void 0:t[u]:[]),g=c.templateDraftId,{setView:m}=$e(),f=(0,n().K8)((()=>{if(!g)return;const e=new(yt().x1)(l,{table:"template_draft",id:g});return e.isReady()&&e.isDefined()?e.getStatus():void 0}),[l,g]),h="published"!==f&&void 0!==f?`published_${f}`:f,b=He("published",i);return(0,A.jsxs)(Ur,{href:s?void 0:b,onClick:s?()=>m(b):void 0,actions:(0,A.jsxs)(Vr,{children:[(0,A.jsx)(Xr,{pinTemplate:o,templateId:i,templateName:c.name||""},`pinPublishedTemplate-${i}`),"in_review"===f?(0,A.jsx)(ur,{href:`/profile/templates/form/published/${i}`,children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.button.viewTemplate",defaultMessage:"View Submission"})}):(0,A.jsx)(ur,{href:`/profile/templates/form/published/${i}`})]}),children:[(0,A.jsx)(Nr,{imageSrc:null==c||null===(a=c.image)||void 0===a?void 0:a.url,node:null,topRightOverlay:(0,A.jsx)(qr,{templateStatus:h})}),(0,A.jsx)(Wr,{title:(0,A.jsx)(Hr,{templateName:c.name||"",templateStatus:s||"published"===h?void 0:h}),subtitle:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Gr,{price:c.price,duplicationCount:c.numberDuplicates}),s&&p.length>0&&(0,A.jsx)(vr,{localizedTemplateDraftData:p,displaySection:"published"})]})})]})}function Gr(e){const t=(0,o().IS)((()=>({publishedTemplatesSubHeader:{display:"flex",marginLeft:"-12px",marginTop:"-4px",color:"black"},priceText:{color:c().Ay.black,fontWeight:L().Wy.medium},publishedTemplateLoadMore:{display:"flex",justifyContent:"center",marginTop:"24px"},publishedTemplateCardContentContainer:{display:"flex",alignItems:"center",gap:"5px",color:c().Ay.frontTextLight,fontSize:"12px",minHeight:"12px"},publishedTemplateCardDuplicates:{display:"flex",alignItems:"center",gap:"2px",fontSize:"12px"}})),[]),{price:a,duplicationCount:i}=e,r=(0,d().tz)(),n=i&&i>0,s=void 0!==a;return n||s?(0,A.jsxs)("div",{style:t.publishedTemplateCardContentContainer,children:[s&&(0,A.jsx)("span",{style:t.priceText,children:(0,A.jsx)(bt().v,{cost:{currencyCode:"USD",amount:100*a},trailingZeroDisplay:"auto",intl:r})}),n&&s&&(0,A.jsx)(Zr,{}),(0,A.jsx)("span",{style:t.publishedTemplateCardDuplicates,children:n?(0,A.jsxs)(A.Fragment,{children:[(0,lr().X)({height:12,width:12}),Qe().ZV(e.duplicationCount,"compact",r)]}):null})]}):null}function Xr(e){const{pinTemplate:t,templateId:a,templateName:i}=e;return(0,A.jsx)(M().p,{isLightGray:!0,onClick:()=>t(a,i),children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.publishedTemplates.button.pin",defaultMessage:"Pin"})},`pin-button-${a}`)}const Qr=(0,d().YK)({selectPriceFilterAll:{id:"creatorProfile.filter.all",defaultMessage:"Free & Paid"},selectPriceFilterPaid:{defaultMessage:"Paid",id:"creatorProfile.filter.paid"},selectPriceFilterFree:{defaultMessage:"Free",id:"creatorProfile.filter.free"},selectSortValueRecent:{defaultMessage:"Most Recent",id:"creatorProfile.sort.recent"},selectSortValueDuplication:{defaultMessage:"Duplications",id:"creatorProfile.sort.duplication"}}),Jr=[{value:Qr.selectPriceFilterAll.defaultMessage,val:"all"},{value:Qr.selectPriceFilterPaid.defaultMessage,val:"paid"},{value:Qr.selectPriceFilterFree.defaultMessage,val:"free"}],en=[{value:Qr.selectSortValueRecent.defaultMessage,val:"recent"},{value:Qr.selectSortValueDuplication.defaultMessage,val:"duplications"}],tn=(0,d().YK)({eligibleTemplateCount:{id:"creatorProfile.couponForm.templates.eligibleTemplateCount",defaultMessage:"{count, plural, one {{count} eligible template} other {{count} eligible templates}}"},selectedTemplateCount:{id:"creatorProfile.couponForm.templates.selectedTemplateCount",defaultMessage:"{count, plural, one {{count} selected} other {{count} selected}}"},searchPlaceholder:{id:"creatorProfile.couponForm.templates.searchPlaceholder",defaultMessage:"Search templates"},selectTemplate:{id:"creatorProfile.couponForm.templates.selectTemplate",defaultMessage:"Select"},unselectTemplate:{id:"creatorProfile.couponForm.templates.unselectTemplate",defaultMessage:"Unselect"}});function an(){const e=(0,d().tz)(),t=(0,r().v3)(),a=(0,o().IS)((e=>({templatePickerSection:{display:"flex",flexDirection:"column",gap:6},container:{display:"flex",flexDirection:"column",gap:12,borderWidth:1,borderStyle:"solid",borderRadius:12,borderColor:e.stroke.primary},errorContainer:{display:"flex",flexDirection:"column",gap:12,borderWidth:1,borderStyle:"solid",borderRadius:12,borderColor:e.stroke.uiRedPrimary},header:{display:"flex",justifyContent:"space-between",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.stroke.primary,padding:"16px 24px"},headerTitle:{alignSelf:"center",fontWeight:500,fontSize:14},searchInput:{lineHeight:"40px",fontSize:16,width:300,borderRadius:10},templatesContainer:{display:"flex",flexDirection:"column",gap:12,padding:"8px 24px 16px 24px",maxHeight:772,overflowY:"auto"},errorMessage:{color:e.errorText,fontSize:12,fontWeight:400,lineHeight:"16px"}})),[]),[{status:s}]=(0,l().Yb)((async()=>await async function(e){const{environment:t,intl:a}=e,i=(0,v().H)(a),r=await y().callApi({eventName:"getCreatorTemplates",environment:t,data:{locale:i,limit:Fi,offset:0,orderBy:"recent",filterBy:{checkoutEnabled:!0},includeLocalizedTemplates:!0}});"success"===r.type&&Di.setState({templateIds:r.data.templateIds})}({environment:t,intl:e})),[t,e]),c=(0,n().K8)((()=>Di.state.templateIds),[]),u=(0,n().K8)((()=>Pi.state.eligible_listing_ids??[]),[]),p=(0,n().K8)((()=>Pi.state.eligibleListingIdsError),[]),{templateStores:g,listingStores:m}=(0,n().K8)((()=>{const e=c.map((e=>new(sr().s)(t,{table:vt().XX,id:e}))),a=e.map((e=>{const a=e.getListingId();return a?new(yt().$1)(t,{table:di().UL,id:a}):null}));return{templateStores:e,listingStores:a}}),[t,c]),[f,h]=(0,i.useState)(""),[b,x]=(0,i.useState)(g);(0,i.useEffect)((()=>{if(!f)return void x(g);const e=g.filter((e=>{var t;return null===(t=e.getName())||void 0===t?void 0:t.toLowerCase().includes(f.toLowerCase())}));x(e)}),[g,f]);const C=(0,n().K8)((()=>b.map((t=>{var a;const i=m.find((e=>(null==e?void 0:e.id)===t.getListingId()));if(!i)return null;const r=i.id,n=(i.getPrice()??0)/100,o=i.getInstallationCount(),s=o&&o>0?o:void 0,l=u.includes(r);return(0,A.jsxs)(Ur,{selected:l,actions:(0,A.jsx)(Vr,{forceShow:l,children:(0,A.jsx)(Qi().u,{variant:l?"neutral":"light",onClick:()=>{if(l)Pi.setState({...Pi.state,eligible_listing_ids:[...u.filter((e=>e!==r))]});else{const e=Array.from(new Set([...u,r]));Pi.setState({...Pi.state,eligible_listing_ids:e})}},children:l?e.formatMessage(tn.unselectTemplate):e.formatMessage(tn.selectTemplate)})}),children:[(0,A.jsx)(Nr,{type:"template",imageSrc:null===(a=t.getAttributes())||void 0===a||null===(a=a.image)||void 0===a?void 0:a.url,node:void 0}),(0,A.jsx)(Wr,{title:t.getName(),subtitle:(0,A.jsx)(Gr,{price:n,duplicationCount:s})})]},t.id)}))),[b,m,e,u]),w=ui(u);return(0,i.useEffect)((()=>{w.length>0&&Pi.setState({...Pi.state,eligibleListingIdsError:void 0,eligible_listing_ids:w})}),[w]),"pending"===s?(0,A.jsx)(Si().A,{}):(0,A.jsxs)("div",{style:a.templatePickerSection,children:[(0,A.jsxs)("div",{style:p?a.errorContainer:a.container,children:[(0,A.jsxs)("div",{style:a.header,children:[(0,A.jsx)("div",{style:a.headerTitle,children:w.length>0?e.formatMessage(tn.selectedTemplateCount,{count:w.length}):e.formatMessage(tn.eligibleTemplateCount,{count:b.length})}),(0,A.jsx)(or().A,{left:(0,A.jsx)(we().Q,{iconGroup:nr().C,variantName:"default",colorName:"secondary"}),style:a.searchInput,placeholder:e.formatMessage(tn.searchPlaceholder),value:f,onChange:e=>h(e.target.value)})]}),(0,A.jsx)("div",{style:a.templatesContainer,children:C})]}),p&&(0,A.jsx)("div",{style:a.errorMessage,children:p})]})}let rn=function(e){return e[e.Default=0]="Default",e}({});function nn(){const e=dn(),t=(0,d().tz)(),[a,o]=(0,i.useState)(!1),s=Ci().c9.now().toUTC().startOf("day"),l=s.toMillis(),c=s.toFormat("yyyy-MM-dd"),u=(0,r().v3)(),p=(0,r().Y0)(),g=i.useRef(null),{setView:m,name:f}=$e(),h=ra();(0,i.useEffect)((()=>{h||m("/profile/coupons")}),[h,m]);const b=null!=f&&f.startsWith("/profile/coupons/edit/")?f.split("/profile/coupons/edit/")[1]:void 0;!function(e){const t=(0,r().v3)();(0,n().K8)((()=>{if(!e){const e=Pi.getInitialState();return void Pi.setState({...e,initialValues:{...e}})}const a=new(Xi().t)(t,{table:ha().QO,id:e});if(!a.canRead())return;const i=a.getModel();if(!i)return;const r=i.start_time?Ci().c9.fromMillis(parseInt(i.start_time.toString()),{zone:"utc"}).toFormat("yyyy-MM-dd"):"",n=i.end_time?Ci().c9.fromMillis(parseInt(i.end_time.toString()),{zone:"utc"}).toFormat("yyyy-MM-dd"):"",o=Pi.getInitialState(),s={id:i.id,code:i.code,discount:{value:i.getDiscount().value,type:i.getDiscount().type},coupon_usage:{limit:i.getCouponUsage().limit,number_of_uses:i.getCouponUsage().number_of_uses},active:i.active,startDate:r,endDate:n,apply_to_all:i.apply_to_all,eligible_listing_ids:i.getEligibleListingIds()};Pi.setState({...o,...s,initialValues:{...s}})}),[t,e])}(b);const v=Boolean(b),{code:x,codeError:y,discountValueError:C,active:w,startDate:j,startDateError:_,endDate:M,endDateError:I,coupon_usage:k,usageLimitError:T,apply_to_all:P,eligibleListingIdsError:L}=(0,n().K8)((()=>Pi.state),[]),D=Intl.DateTimeFormat().resolvedOptions().timeZone,R=Boolean(j&&qi(j)),E=[y,C,_,I,T,L].filter((e=>Boolean(e))).length;(0,i.useEffect)((()=>{const e=e=>{ji().blurActiveElement()};return document.addEventListener("wheel",e),()=>{document.removeEventListener("wheel",e)}}),[]);const B=j?Ci().c9.fromFormat(j,"yyyy-MM-dd").startOf("day").toMillis():void 0,F=M?Ci().c9.fromFormat(M,"yyyy-MM-dd").endOf("day").toMillis():void 0;return(0,A.jsxs)("div",{children:[(0,A.jsx)(De().y,{size:"large",header:v?(0,A.jsx)(d().sA,{defaultMessage:"Edit coupon",id:"creatorProfile.coupons.form.editTitle"}):(0,A.jsx)(d().sA,{defaultMessage:"Create a coupon",id:"creatorProfile.coupons.form.createTitle"}),subHeader:v?(0,A.jsx)(d().sA,{defaultMessage:"Edits will immediately take effect",id:"creatorProfile.coupons.form.editSubtitle"}):(0,A.jsx)(d().sA,{defaultMessage:"New coupons will be available for use immediately.",id:"creatorProfile.coupons.form.createSubtitle"})}),(0,A.jsx)(er,{count:E,ref:g}),(0,A.jsxs)("div",{style:e.container,children:[(0,A.jsxs)("div",{style:e.basicDetails,children:[(0,A.jsx)(rt().D,{styleName:"UITitle-22px/Semibold",children:(0,A.jsx)(d().sA,{defaultMessage:"Basic details",id:"creatorProfile.coupons.form.couponBody"})}),(0,A.jsx)("div",{children:(0,A.jsx)(ar().o,{htmlLabel:"couponCode",label:(0,A.jsx)(d().sA,{defaultMessage:"Coupon code",id:"creatorProfile.coupons.form.couponCode"}),required:!0,placeholder:t.formatMessage(ln.couponPlaceholder),type:"text",format:rn.Default,style:v?e.textInputEditing:e.textInput,error:y,errorMessageStyle:e.errorMessage,value:x,disabled:v,onChange:e=>{Pi.setState({...Pi.state,code:e.target.value.toLocaleUpperCase()})},onFocus:()=>Bi("codeError"),onBlur:async e=>{Ni(e.target.value),await Ri(u,e.target.value)},maxlength:qa,children:!y&&(0,A.jsxs)("div",{style:e.codeHelperText,children:[v?t.formatMessage(ln.codeHelperTextEdit):t.formatMessage(ln.codeHelperText),(0,A.jsx)(tr().c,{maxLength:qa,inputLength:x.length})]})})}),(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{style:e.discountSection,children:[(0,A.jsx)(on,{}),(0,A.jsx)("div",{style:C?e.discountPickerError:e.discountPicker,children:(0,A.jsx)(sn,{})})]}),!C&&(0,A.jsx)("div",{style:e.helperText,children:t.formatMessage(ln.discountHelperText)})]}),(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{style:e.activeToggle,children:[(0,A.jsx)(rr,{isActive:w,onClick:()=>{Pi.setState({...Pi.state,active:!w})}}),(0,A.jsx)(d().sA,{defaultMessage:"Active",id:"creatorProfile.coupons.form.activeToggle"})]}),(0,A.jsx)("div",{style:e.helperText,children:t.formatMessage(ln.activeToggleText)})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(xe().Ay,{popupType:p.isMobile?xe().z7.SlideUp:xe().z7.Popup,render:t=>(0,A.jsx)("div",{style:e.datePickerContainer,children:(0,A.jsx)(_i().A,{value:B||l,firstDayOfWeek:0,onChange:e=>{var a;const i=Ci().c9.fromMillis(e);Pi.setState({...Pi.state,startDate:null===(a=i.toISO())||void 0===a?void 0:a.split("T")[0]}),t.close()},onBlur:e=>{var t,a;const i=Ci().c9.fromJSDate(e,{zone:D});Pi.setState({...Pi.state,startDate:null===(t=i.toISO())||void 0===t?void 0:t.split("T")[0]}),Oi(null===(a=i.toISO())||void 0===a?void 0:a.split("T")[0])},onFocus:()=>{Bi("startDateError")},disabledDays:{before:Ci().c9.fromFormat(c,"yyyy-MM-dd").toJSDate(),...F?{after:new Date(F)}:{}}})}),placementToOrigin:xe().sx.Top,renderOrigin:a=>(0,A.jsx)(Mi().A,{htmlLabel:"startDate",errorMessage:_,errorMessageStyle:e.errorMessage,name:(0,A.jsx)(d().sA,{defaultMessage:"Start date (UTC)",id:"creatorProfile.coupons.form.startDate"}),children:(0,A.jsxs)("div",{style:e.dateButtonLabel,children:[(0,A.jsx)(ve().A,{...a,style:!j||v&&R?{...e.dateButton,...e.datePlaceholder}:e.dateButton,disabled:v&&R,children:j||"YYYY-MM-DD"}),(!v||!R)&&(0,A.jsx)(ve().A,{onClick:()=>{Pi.setState({...Pi.state,startDate:""})},ariaLabel:t.formatMessage(ln.clearStartDate),children:(0,A.jsx)(we().Q,{iconGroup:wi().G,variantName:"small",colorName:"tertiary"})})]})})}),!_&&(0,A.jsx)("div",{style:e.helperText,children:v&&R?t.formatMessage(ln.startDateEditText):t.formatMessage(ln.startDateHelperText)})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(xe().Ay,{popupType:p.isMobile?xe().z7.SlideUp:xe().z7.Popup,render:t=>(0,A.jsx)("div",{style:e.datePickerContainer,children:(0,A.jsx)(_i().A,{value:F||l,firstDayOfWeek:0,onChange:e=>{var a;const i=Ci().c9.fromMillis(e,{zone:D});Pi.setState({...Pi.state,endDate:null===(a=i.toISO())||void 0===a?void 0:a.split("T")[0]}),t.close()},onBlur:e=>{var t;Wi(null===(t=Ci().c9.fromJSDate(e,{zone:D}).toISO())||void 0===t?void 0:t.split("T")[0])},onFocus:()=>{Bi("endDateError")},disabledDays:{before:new Date(B&&B>l?B:l)}})}),placementToOrigin:xe().sx.Top,renderOrigin:a=>(0,A.jsx)(Mi().A,{htmlLabel:"endDate",errorMessage:I,errorMessageStyle:e.errorMessage,name:(0,A.jsx)(d().sA,{defaultMessage:"End date (UTC)",id:"creatorProfile.coupons.form.endDate"}),children:(0,A.jsxs)("div",{style:e.dateButtonLabel,children:[(0,A.jsx)(ve().A,{...a,style:M?e.dateButton:{...e.dateButton,...e.datePlaceholder},children:M||"YYYY-MM-DD"}),(0,A.jsx)(ve().A,{onClick:()=>{Pi.setState({...Pi.state,endDate:""})},ariaLabel:t.formatMessage(ln.clearEndDate),children:(0,A.jsx)(we().Q,{iconGroup:wi().G,variantName:"small",colorName:"tertiary"})})]})})}),!I&&(0,A.jsx)("div",{style:e.helperText,children:t.formatMessage(ln.endDateHelperText)})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(ar().o,{htmlLabel:"usageLimit",label:(0,A.jsx)(d().sA,{defaultMessage:"Usage limit",id:"creatorProfile.coupons.form.usageLimit"}),placeholder:t.formatMessage(ln.usageLimitPlaceholder),type:"number",format:rn.Default,style:e.textInput,value:k.limit===Number.MAX_VALUE?"":k.limit.toString(),error:T,onChange:e=>{const a=Number(e.target.value);a>Za?Pi.setState({...Pi.state,usageLimitError:t.formatMessage(ln.usageLimitTooHigh)}):(Bi("usageLimitError"),Pi.setState({...Pi.state,coupon_usage:{...Pi.state.coupon_usage,limit:""===e.target.value?Number.MAX_VALUE:a}}))},onFocus:e=>{parseInt(e.target.value)>Za||Bi("usageLimitError")},onBlur:e=>{Vi(Pi.state.coupon_usage.limit)},inputElementAttributes:{min:0,step:1,max:1e6}}),!T&&(0,A.jsx)("div",{style:e.helperText,children:t.formatMessage(ln.usageLimitHelperText)})]})]}),(0,A.jsxs)("div",{style:e.eligibleProducts,children:[(0,A.jsx)("div",{style:e.eligibleProductsTitle,children:(0,A.jsx)(rt().D,{styleName:"UITitle-22px/Semibold",children:(0,A.jsx)(d().sA,{defaultMessage:"Eligible products",id:"creatorProfile.coupons.form.eligibleProducts"})})}),(0,A.jsxs)("div",{style:e.activeToggle,children:[(0,A.jsx)(rr,{isActive:P,onClick:()=>{Pi.setState({...Pi.state,apply_to_all:!P,eligible_listing_ids:[],eligibleListingIdsError:void 0})}}),(0,A.jsx)(d().sA,{defaultMessage:"Apply to all products",id:"creatorProfile.coupons.form.applyToAllToggle"})]}),P?null:(0,A.jsx)(an,{})]})]}),(0,A.jsxs)("div",{style:e.submitSection,children:[(0,A.jsx)(Qi().u,{variant:"light",onClick:()=>{(0,S().u4)({environment:u,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"cancel",source:v?"edit_form":"new_coupon_form"}}}),m("/profile/coupons")},children:(0,A.jsx)(d().sA,{id:"creatorProfileForm.cancel.button",defaultMessage:"Cancel"})}),(0,A.jsx)(Qi().u,{variant:"dark",onClick:async()=>{o(!0);try{const e=await Ei(u);!0===e?(Pi.reset(),m("/profile/coupons",!0)):ua().Rt({element:null==g?void 0:g.current,environment:u,options:{behavior:"smooth"}}),(0,S().u4)({environment:u,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"save",source:v?"edit_form":"new_coupon_form",coupon_id:v?b:void 0,result:!0===e?"success":"error"}}})}catch(e){}finally{o(!1)}},children:a?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(d().sA,{id:"creatorProfileForm.editCoupon.button.saving",defaultMessage:"Saving"}),(0,A.jsx)(Si().A,{style:e.spinner})]}):(0,A.jsx)(d().sA,{id:"creatorProfileForm.editCoupon.button.save",defaultMessage:"Save"})})]})]})}function on(){const e=(0,d().tz)(),t=dn(),[a,r]=i.useState(""),{discount:o,discountValueError:s}=(0,n().K8)((()=>Pi.state),[]);return(0,i.useEffect)((()=>{r(0===o.value?"":(o.value/100).toFixed(2))}),[o.value]),(0,A.jsxs)("div",{style:t.discountValue,children:["fixed"===o.type&&(0,A.jsx)(ar().o,{htmlLabel:"discountValue",label:(0,A.jsx)(d().sA,{defaultMessage:"Discount",id:"creatorProfile.coupons.form.discountValue"}),required:!0,type:"number",error:s,placeholder:e.formatMessage({defaultMessage:"Amount",id:"creatorProfile.couponSubmission.fixedDiscountPlaceholder"}),format:rn.Default,style:t.discountTextInput,value:a,onChange:t=>{Number(t.target.value)>$a?Pi.setState({...Pi.state,discountValueError:e.formatMessage(ln.discountTooHigh)}):Bi("discountValueError"),r(t.target.value)},onFocus:e=>{Number(a)>$a||Bi("discountValueError")},onBlur:e=>{Pi.setState({...Pi.state,discount:{...o,value:100*Number(a)}}),zi(Pi.state.discount)}}),"percentage"===o.type&&(0,A.jsx)(ar().o,{htmlLabel:"discountValue",label:(0,A.jsx)(d().sA,{defaultMessage:"Discount",id:"creatorProfile.coupons.form.discountValue"}),required:!0,error:s,placeholder:e.formatMessage({defaultMessage:"Percentage",id:"creatorProfile.couponSubmission.percentageDiscountPlaceholder"}),format:rn.Default,style:t.discountTextInput,value:0===o.value?"":o.value.toString(),onChange:e=>{Pi.setState({...Pi.state,discount:{...o,value:""===e.target.value?0:parseInt(e.target.value)}})},onFocus:e=>{Bi("discountValueError")},onBlur:e=>{zi(o)},type:"number"})]})}function sn(){const e=dn(),t={percentage:(0,A.jsx)(d().sA,{id:"creatorProfile.couponForm.percentOffDiscount",defaultMessage:"% off"}),fixed:(0,A.jsx)(d().sA,{id:"creatorProfile.couponForm.fixedDiscount",defaultMessage:"Fixed discount ($)"})},a=(0,n().K8)((()=>Pi.state.discount.type),[]),i={items:["fixed","percentage"],getKey:e=>e,selectedItem:a,width:"100%",minWidth:"100%",onSelect:e=>{Pi.setState({...Pi.state,discountValueError:void 0,discount:{type:e,value:0}})},renderItem:e=>(0,A.jsx)(it().A,{...e,title:t[e.value]}),renderOrigin:i=>(0,A.jsxs)(Sa().A,{size:"lg",...i,buttonStyle:e.discountPickerButton,children:[(0,A.jsx)("span",{children:t[a]}),(0,A.jsx)(we().Q,{colorName:"secondary",iconGroup:be().I,variantName:"small"})]}),sameWidthAsOrigin:!0};return(0,A.jsx)("div",{children:(0,A.jsx)(nt().A,{...i})})}const ln=(0,d().YK)({clearStartDate:{id:"creatorProfile.coupons.form.clearStartDate",defaultMessage:"Clear start date"},clearEndDate:{id:"creatorProfile.coupons.form.clearEndDate",defaultMessage:"Clear end date"},discountHelperText:{id:"creatorProfile.coupons.form.discountHelperText",defaultMessage:"If the discount makes the template price less than $0.99, it will be rounded up to $0.99."},codeHelperText:{id:"creatorProfile.coupons.form.codeHelperText",defaultMessage:"Coupon code must only use numbers and letters."},codeHelperTextEdit:{id:"creatorProfile.coupons.form.codeHelperTextEdit",defaultMessage:"Coupon code cannot be edited after it has been created."},couponPlaceholder:{id:"creatorProfileForm.creatorDetail.form.couponPlaceholder",defaultMessage:"Enter coupon code"},activeToggleText:{id:"creatorProfile.coupons.form.activeToggleText",defaultMessage:"If you don't activate the coupon now, you can activate it later."},startDateHelperText:{id:"creatorProfile.coupons.form.startDateHelperText",defaultMessage:"Start date for when coupon is valid. If empty, coupon will start immediately."},startDateEditText:{id:"creatorProfile.coupons.form.startDateEditText",defaultMessage:"Cannot edit start date of coupon that has already passed."},endDateHelperText:{id:"creatorProfile.coupons.form.endDateHelperText",defaultMessage:"End date for when coupon is valid. If empty, coupon will not expire."},usageLimitPlaceholder:{id:"creatorProfile.coupons.form.usageLimitPlaceholder",defaultMessage:"Number of uses"},usageLimitHelperText:{id:"creatorProfile.coupons.form.usageLimitHelperText",defaultMessage:"Number of times coupon can be used. If empty, coupon can be used unlimited times."},usageLimitTooHigh:{id:"creatorProfile.coupons.form.usageLimitTooHighError",defaultMessage:"Usage limit is too high."},discountTooHigh:{id:"creatorProfile.coupons.form.discountTooHigh",defaultMessage:"Fixed discount is too large."}});function dn(){return(0,o().IS)((e=>({datePickerContainer:{padding:"18px 14px 14px"},container:{display:"flex",flexDirection:"column",gap:"60px"},title:{marginBottom:"10px"},basicDetails:{gap:"32px",paddingTop:"12px",display:"flex",flexDirection:"column"},helperText:{fontSize:12,marginTop:"6px",color:e.lightTextColor},codeHelperText:{fontSize:12,marginTop:"6px",color:e.lightTextColor,display:"flex",flexDirection:"row",justifyContent:"space-between"},sectionSubtitle:{fontSize:14,color:e.lightTextColor},textInput:{background:"transparent",fontSize:14,borderRadius:Ai().A.borderRadius,padding:"9px"},textInputEditing:{background:"transparent",fontSize:14,borderRadius:Ai().A.borderRadius,padding:"9px",color:e.lightTextColor},discountTextInput:{background:"transparent",fontSize:14,borderRadius:Ai().A.borderRadius,padding:"9px"},discountMenuItem:{width:"100%"},activeToggle:{display:"flex",alignItems:"center",gap:"8px",width:"fit-content"},eligibleProductsTitle:{display:"flex",flexDirection:"column",gap:"4px"},eligibleProducts:{display:"flex",flexDirection:"column",gap:"24px"},submitSection:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",gap:12,marginTop:40,background:"white",padding:"10px 0 20px 0"},discountSection:{display:"flex",flexDirection:"row",gap:"8px",alignItems:"flex-end"},discountValue:{width:"50%"},discountPicker:{width:"50%",marginTop:"22px"},discountPickerError:{width:"50%",marginTop:"22px",marginBottom:"24px"},discountPickerButton:{display:"flex",flexDirection:"row",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,padding:"9px",height:"38px"},errorMessage:{marginTop:"6px"},spinner:{marginLeft:"4px"},dateButton:{display:"flex",alignItems:"center",flexGrow:1,fontSize:15,lineHeight:"26px",borderRadius:6,paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,boxShadow:e.inputBoxShadow},datePlaceholder:{color:e.lightTextColor},dateButtonLabel:{display:"flex",alignItems:"center",gap:"4px"}})),[])}function cn(e){const{creatorId:t}=e,{setView:a,name:n}=$e(),o=(0,r().v3)(),s=null!=t,l=ra();return(0,i.useEffect)((()=>{l||"/profile/coupons"===n||a("/profile/coupons")}),[l,a,n]),(0,A.jsxs)("div",{children:[(0,A.jsxs)(pa,{route:"/profile/coupons",exact:!0,children:[(0,A.jsxs)(aa().Ye,{justifyContent:"space-between",children:[(0,A.jsx)(De().y,{size:"large",header:(0,A.jsx)(d().sA,{id:"creatorProfile.coupons.pageHeader",defaultMessage:"Coupons"}),subHeader:(0,A.jsx)(d().sA,{id:"creatorProfile.coupons.pageHeaderSubtitle",defaultMessage:"Manage all of your coupons. Learn more about coupons <couponLink>here</couponLink>",values:{couponLink:e=>(0,A.jsx)(ta().A,{external:!0,href:(0,ia().xS)("guides.marketplaceSelling"),children:e})}})}),s&&l&&(0,A.jsx)(Ie().A,{onClick:()=>{(0,S().u4)({environment:o,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"create",source:"creator_coupons"}}}),a("/profile/coupons/new-coupon")},children:(0,A.jsx)(d().sA,{id:"creatorProfile.coupons.createCouponButton",defaultMessage:"Create Coupon"})})]}),(0,A.jsx)(je().A,{size:24}),s?(0,A.jsx)(yi,{}):(0,A.jsx)(ma,{})]}),l&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(pa,{route:"/profile/coupons/new-coupon",children:[(0,A.jsx)(sa,{}),(0,A.jsx)(nn,{})]}),(0,A.jsxs)(pa,{route:"/profile/coupons/edit",children:[(0,A.jsx)(sa,{}),(0,A.jsx)(nn,{})]})]})]})}var un=()=>a(979958),pn=()=>a(603745),gn=()=>a(388693),mn=()=>a(824862),fn=()=>a(332393);class hn extends _e().default{getInitialState(){return{type:"create-bot",startingRecord:void 0,recordTypeOnSubmission:"internal",status:"unpublished"}}updateRecordTypeOnSwitch(e){if("update-bot"===this.state.type){if("public"!==e)return;this.setState({type:"create-guest-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else if("create-guest-integration"===this.state.type){if("internal"!==e||!this.state.startingRecord)return;this.setState({type:"update-bot",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else if("update-guest-integration"===this.state.type){if("unfurling"!==e)return;this.setState({type:"create-third-party-external-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,startingAuthRecord:void 0,status:"unpublished"})}else if("create-third-party-external-integration"===this.state.type){if("public"!==e)return;this.setState({type:"update-guest-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else"create-bot"===this.state.type||"update-third-party-external-integration"===this.state.type||"update-first-party-external-integration"===this.state.type||"update-compliance-integration"===this.state.type||(0,O().HB)(this.state)}updateCreationFormType(e){"create-guest-integration"===e&&this.setState({type:"create-guest-integration",startingRecord:void 0,recordTypeOnSubmission:"public",status:"unpublished"}),"create-bot"===e&&this.setState({type:"create-bot",startingRecord:void 0,recordTypeOnSubmission:"internal",status:"unpublished"})}initializeNewForm(e,t,i){if(e.table===mn().GP)this.setState({type:"update-bot",startingRecord:e,recordTypeOnSubmission:"internal",status:"unpublished"});else if(e.table===fn().Li)if((0,a(20498).NV)(e.value.id))((0,gn().sP)(e.value)||(0,gn().cx)(e.value))&&this.setState({type:"update-compliance-integration",startingRecord:{table:fn().Li,value:e.value},startingAuthRecord:t,recordTypeOnSubmission:"compliance",status:e.value.status});else if((0,gn().v_)(e.value)||(0,gn().mt)(e.value))if((0,a(617871).CX)({integrationId:e.value.id,env:"production"}))this.setState({type:"update-first-party-external-integration",startingRecord:{table:e.table,value:e.value},recordTypeOnSubmission:"unfurling",status:e.value.status});else{if(!t)return;const r=i.map((e=>({type:e.verified_at?"verified":"unverified",id:e.id,domain:e.domain,verificationCode:e.verification_code,createdAt:e.created_at,expiresAt:e.expires_at,alive:e.alive})));this.setState({type:"update-third-party-external-integration",startingRecord:{table:e.table,value:e.value},startingAuthRecord:t,recordTypeOnSubmission:"unfurling",status:e.value.status,domainVerifications:r,domainVerificationStore:"update-third-party-external-integration"===this.state.type?this.state.domainVerificationStore:new(a(543649).A)})}else"guest"===e.value.type&&this.setState({type:"update-guest-integration",startingRecord:{table:e.table,value:e.value},recordTypeOnSubmission:"public",status:e.value.status});else(0,O().HB)(e)}}const bn=hn;var vn=()=>a(555267),xn=()=>a(447887),yn=()=>a(725252),Cn=()=>a(799288),wn=()=>a(926397),jn=()=>a(840911),Sn=()=>a(96689),_n=()=>a(559926),Mn=()=>a(572088),An=()=>a(437622);class In extends _e().default{getInitialState(){return{description:"",how_to_use:"",features:[],categories:[],slug:"",preview_images:[],add_to_notion_url:"",listing_status:null,errors:{description:"",how_to_use:"",add_to_notion_url:"",slug:"",preview_images:"",features:"",categories:"",_general:""}}}setErrors(e){this.setState({...this.state,errors:{...this.state.errors,...e}})}setValues(e){this.setState({...this.state,...e})}}const kn=new In;const Tn=function(){const e=(0,o().IS)((()=>({icon:{display:"flex",alignItems:"flex-end",justifyContent:"center",flex:1},innerContainer:{display:"flex",justifyContent:"space-between",marginTop:80,marginBottom:80},contentContainer:{display:"flex",flexDirection:"column",width:"66%",justifyContent:"center"},header:{fontWeight:L().Wy.bold,fontSize:50,color:c().Ay.frontText,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},subtitle:{fontWeight:L().Wy.regular,fontSize:24,color:c().Ay.frontTextMedium,letterSpacing:"0.015em"},button:{display:"inline-flex",color:c().Ay.frontTextMedium,borderRadius:4,padding:6,fontSize:15,width:"fit-content"},buttonContent:{display:"flex",alignItems:"center"},arrowIcon:{width:20,height:20}})),[]);return(0,A.jsxs)("div",{style:e.innerContainer,children:[(0,A.jsxs)("div",{style:e.contentContainer,children:[(0,A.jsx)("div",{style:e.header,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integration.notFound.title.label",defaultMessage:"Not Found"})}),(0,A.jsx)("div",{style:e.subtitle,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integration.notFound.subtitle.label",defaultMessage:"This integration doesn't exist."})})]}),(0,A.jsx)("div",{style:e.icon,children:(0,a(987264).s)({width:98,height:98})})]})};var Pn=()=>a(427704);Object.entries({"8btEqLBipIhzrURDtMiMp":"Security & compliance",LrLnDt6KMdjAjuzJx3Mue:"Sales","6Nnak0fGdhHnYOqbbRmGbP":"Identity","4jaNdw5xVtuE1Kb7WH8VDW":"Marketing","4917v9HZijGubR4nmfJdhV":"Finance","2YuNhKaZMbW7vxlqx8DNef":"Customer experience","29jYzS08IK5xXF2k5R40gP":"Forms","6b0oRAGgoFg76mFv6lMK1m":"File management","1gyl4Y79DvZ0TM3D5FyYX5":"Engineering","2xVe1cxdZe794uAIyw6Kl9":"Design","6b0K7wADJ37fQorrlSQsaq":"Automations","6HgHpfWS9cNQn9EXZkndTW":"Productivity","3Tmdhi67ZGO3xHaaooyCgj":"Collaboration","5qR7nmskJp1EvKEsGwPGjf":"Communication","4Cbg47uBGFaVqIoP4yW39W":"Analytics"}).reduce(((e,t)=>{let[a,i]=t;return{...e,[i]:a}}),{});const Ln=(0,d().YK)({generalQuality:{defaultMessage:"This integration does not meet our quality standards. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.generalQuality"},selfPromotion:{defaultMessage:"This integration is self-promotional. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.selfPromotion"},offensiveContent:{defaultMessage:"This integration contains offensive content. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.offensiveContent"},offensiveContentImages:{defaultMessage:"This integration contains offensive images. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.offensiveContentPhoto"},logoIsNotUnique:{defaultMessage:"This integration's logo is not unique. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.logoIsNotUnique"},impersonatingBrand:{defaultMessage:"This integration is impersonating a brand. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.impersonatingBrand"},supportEmailDomain:{defaultMessage:"This integration's support email domain does not match the integration domain. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.supportEmailDomain"},oauthFlowError:{defaultMessage:"This integration's OAuth flow is incorrect. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.oauthFlowError"},privateAPI:{defaultMessage:"This integration is using private APIs. We only accept integrations using public Notion APIs. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.privateAPI"},notSupportedType:{defaultMessage:"This integration is not supported. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.notSupportedType"},custom:{defaultMessage:"This integration has been rejected.",id:"creatorProfile.integration.status.rejected.custom"},notSupportedLanguage:{defaultMessage:"We currently only support integrations in English. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.notSupportedLanguage"}});var Dn=()=>a(755636),Rn=()=>a(193657);function En(e){const t=(0,r().v3)();return(0,n().K8)((()=>{if(!e)return{};const a=new(yt().CX)(t,{table:fn().Li,id:e}),i=new(yt().UR)(t,{table:Rn().bh,id:(0,gn().Ry)({integrationId:e,locale:"en-US"})});return{listingStatus:a.getListingStatus(),slug:i.getSlug(),integrationListingModel:i.getModel()}}),[t,e])}function Bn(e){const{integrationId:t}=e,a=(0,r().v3)(),i=Un(),{listingStatus:n,integrationListingModel:o,slug:s}=En(t);if(!n)return null;const l=X(n||null,o),c="published"===l||"published_in_review"===l||"published_rejected"===l;return(0,A.jsxs)("div",{style:i.messageContainerOuter,children:[(0,A.jsxs)("div",{style:i.messageContainer,children:[(0,A.jsxs)("div",{style:i.messageInfo,children:[(0,A.jsx)(Fr,{templateStatus:l}),(0,A.jsx)("span",{style:i.messageText,children:(0,A.jsx)(Fn,{integrationStatus:l,isPublished:c,integrationId:t,slug:s})})]}),c?(0,A.jsx)(Qi().u,{variant:"neutral",onClick:()=>Dn().f({environment:a,url:`${Be().A.domainBaseUrl}${Pn().JZ.integrations}/${s}`}),children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishForm.status.published.cta",defaultMessage:"View live integration"})}):null]}),("approved"===n||"pending"===n)&&(0,A.jsx)(rt().D,{styleName:"Body-13px/Regular",children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishForm.disabledAfterPublish",defaultMessage:"You are no longer be able to update the configuration of this integration. To update, you will need to create a new integration."})})]})}function Fn(e){const{integrationStatus:t,integrationId:a}=e;return(0,A.jsxs)(A.Fragment,{children:["in_review"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishForm.status.inReview.message",defaultMessage:"Integrations under review are not editable. Review time is 5-10 business days."}):null,"published_in_review"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishForm.status.approvedAndinReview.message",defaultMessage:"Integration is live on the gallery. Changes are under review."}):null,"published"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishForm.status.published.message",defaultMessage:"Integration is live on the gallery."}):null,"rejected"===t||"published_rejected"===t?(0,A.jsx)(Nn,{integrationId:a}):null,"published_draft"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishForm.status.publishedDraft.Message",defaultMessage:"Integration has unpublished changes"}):null]})}function Un(){const{isDesktopWidth:e}=(0,m().LS)();return(0,o().IS)((t=>({rejectMessage:{gap:"4px",display:"flex"},messageInfo:{display:"flex",gap:"10px",alignItems:"center"},messageContainerOuter:{display:"flex",flexDirection:"column",gap:"10px",backgroundColor:"rgba(0, 0, 0, 0.03)",padding:"10px 24px 10px 24px",maxWidth:"960px",minHeight:"60px",marginBottom:32},messageContainer:{justifyContent:"space-between",borderRadius:"8px",display:"flex",alignItems:"center",flexWrap:e?"nowrap":"wrap",gap:"10px",marginTop:"10px"},messageText:{color:t.regularTextColor,fontSize:"13.5px",flexShrink:e?10:"inherit"}})),[e])}function Nn(e){const{integrationId:t}=e,a=Un(),i=(0,r().v3)(),{rejectReason:o,customRejectReason:s}=(0,n().K8)((()=>{if(void 0===t)return{};const e=new(yt().CX)(i,{table:fn().Li,id:t});if("internal"===e.getType())throw new Error("Integration type should not be internal");const a=e.getInfo();return{rejectReason:null==a?void 0:a.reject_reason,customRejectReason:null==a?void 0:a.custom_reject_reason}}),[i,t]),l=o?(0,At().Jt)(Ln,o):void 0;return"custom"===o&&s?(0,A.jsxs)("div",{style:a.rejectMessage,children:[(0,A.jsx)(d().sA,{...Ln.custom}),s]}):l?(0,A.jsx)(d().sA,{...l}):(0,A.jsx)(d().sA,{...Ln.generalQuality})}var zn=()=>a(857639),On=()=>a(229833),Wn=()=>a(981485);function Vn(e){const{botOrIntegrationPointer:t}=e,a=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]);return(0,n().K8)((()=>{if(t.table===mn().GP){if(!a)return;const e=yt().vK.createChildStore(a,t);return null==e?void 0:e.getIntegrationPointer()}if(t.table===fn().Li)return t;(0,O().HB)(t)}),[t,a])}function Hn(){const e=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]);return async t=>{let a;if(t.template_url.value){const i=(0,ia().wU)(t.template_url.value);e&&i&&(a=yt().Bv.createChildStore(e,{table:li().ev,id:i}),await a.load())}return a}}a(18107),a(967357);function qn(e){var t;return{responseType:"error",data:{field:(null===(t=e.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type)??"base",message:e.body&&"debugMessage"in e.body&&e.body.debugMessage?e.body.debugMessage:void 0}}}async function Kn(e){const{environment:t,...a}=e,i=await y().callApi({eventName:"updateWebhookSubscription",environment:t,data:a});return"failed"===i.type?qn(i):{responseType:"success",data:i.data}}var Zn=()=>a(378765);var $n=()=>a(776217);function Yn(e){const t=(0,r().v3)(),{integrationPointer:a}=e,[{status:i,error:n,value:o},s]=(0,l().Yb)((async()=>{if(!a)return[];const{recordMap:e,integrationWebhookSubscriptionIds:i,subscriptionDeliveryStates:r}=await async function(e){const{environment:t,integrationId:a}=e,i=await y().callApi({eventName:"listWebhookSubscriptions",environment:t,data:{integrationId:a}});if("failed"===i.type)throw i.error;return i.data}({environment:t,integrationId:a.id});return fa().RecordMap.create(e).getModels(i.map((e=>({id:e,table:$n().bn})))).filter(O().O9).map((e=>({id:e.pointer.id,integration_id:e.getIntegrationId(),status:e.getStatus(),url:e.getUrl(),event_types:e.getEventTypes(),paused_reason:e.getPausedReason(),delivery_state:r?r[e.pointer.id]:void 0})))}),[t,a]);return{result:o,status:i,error:n,refetch:s}}var Gn=()=>a(282135),Xn=()=>a(689094),Qn=()=>a(299797),Jn=()=>a(133033),eo=()=>a(84817),to=()=>a(625830),ao=()=>a(125565),io=()=>a(2609),ro=()=>a(702796),no=()=>a(962730),oo=()=>a(970585);function so(e){let{event:t}=e;const a=(0,o().IS)((e=>({tooltip:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:250},eventType:{color:c().Tj.uiGray}})),[]);return(0,A.jsxs)("div",{style:a.tooltip,children:[(0,A.jsx)("div",{style:a.eventType,children:t.type}),(0,A.jsx)("div",{children:t.description})]})}const lo={viewBox:"0 0 16 16",svg:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("path",{d:"M7.9 5.281a.625.625 0 0 0-.625.625v2.5a.625.625 0 0 0 1.25 0v-2.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,A.jsx)("path",{d:"M9.58 2.788c-.702-1.217-2.458-1.217-3.16 0l-4.677 8.1c-.702 1.216.176 2.737 1.58 2.737h9.354c1.405 0 2.283-1.52 1.58-2.738zm-2.078.625a.575.575 0 0 1 .996 0l4.677 8.1a.575.575 0 0 1-.498.862H3.324a.575.575 0 0 1-.498-.863z"})]})},co=(0,Fe().wt)("exclamationMarkTriangleSmall",lo),uo=(0,d().YK)({commentCapabilityWarning:{id:"webhookSubscriptionModal.commentCapabilityWarning",defaultMessage:"Enable read comment capabilities to receive these events"},databaseCapabilityWarning:{id:"webhookSubscriptionModal.databaseCapabilityWarning",defaultMessage:"Enable read content capabilities to receive these events"},pageCapabilityWarning:{id:"webhookSubscriptionModal.pageCapabilityWarning",defaultMessage:"Enable read content capabilities to receive these events"},blockCapabilityWarning:{id:"webhookSubscriptionModal.blockCapabilityWarning",defaultMessage:"Enable read content capabilities to receive these events"}});function po(e){let{categoryType:t,botCapabilities:a}=e;const i=(0,d().tz)(),r=(0,o().IS)((e=>({tooltipText:{width:250},warningIcon:{fill:e.icon.uiYellowPrimary,width:Fe().Ev.sm,height:Fe().Ev.sm}})),[]);let n;return n="comment"!==t||null!=a&&a.read_comment?"page"!==t||null!=a&&a.read_content?"database"!==t||null!=a&&a.read_content?null:i.formatMessage(uo.databaseCapabilityWarning):i.formatMessage(uo.pageCapabilityWarning):i.formatMessage(uo.commentCapabilityWarning),n?(0,A.jsx)(hr().A,{textWrap:!0,renderTooltip:()=>(0,A.jsx)("div",{style:r.tooltipText,children:n}),render:e=>(0,A.jsx)(ti().A,{...e,ariaLabel:n,icon:co,iconStyle:r.warningIcon,disableBackground:!0})}):null}const go=(0,d().YK)({pageCategoryLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.page",defaultMessage:"Page"},pageContentUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageContentUpdated",defaultMessage:"Page content updated"},pageContentUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageContentUpdated",defaultMessage:"A page’s content is changed, such as adding or removing a block on the page. Consecutive events of this type within a short time window are aggregated."},pageCreatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageCreated",defaultMessage:"Page created"},pageCreatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageCreated",defaultMessage:"A new page is created. Updates to the page within a short time window are aggregated."},pageDeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageDeleted",defaultMessage:"Page deleted"},pageDeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageDeleted",defaultMessage:"A page is moved to the trash. Events of this type are aggregated by canceling out any subsequent page.undeleted events within a short time frame."},pageLockedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageLocked",defaultMessage:"Page locked"},pageLockedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageLocked",defaultMessage:"A page is locked from editing."},pageMovedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageMoved",defaultMessage:"Page moved"},pageMovedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageMoved",defaultMessage:"A page is moved to a different location. Consecutive events of this type within a short time window are aggregated."},pagePropertiesUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pagePropertiesUpdated",defaultMessage:"Page properties updated"},pagePropertiesUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pagePropertiesUpdated",defaultMessage:"A page’s properties are updated. Consecutive events of this type within a short time window are aggregated."},pageUndeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageUndeleted",defaultMessage:"Page undeleted"},pageUndeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageUndeleted",defaultMessage:"A page is restored from the trash. Events of this type are aggregated by canceling out any subsequent page.deleted events within a short time frame."},pageUnlockedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageUnlocked",defaultMessage:"Page unlocked"},pageUnlockedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageUnlocked",defaultMessage:"A page is unlocked for editing."},databaseCategoryLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.database",defaultMessage:"Database"},databaseContentUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseContentUpdated",defaultMessage:"Database content updated"},databaseContentUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseContentUpdated",defaultMessage:"A database’s contents are updated, such as adding or removing a child page. Consecutive events of this type within a short time window are aggregated."},databaseCreatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseCreated",defaultMessage:"Database created"},databaseCreatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseCreated",defaultMessage:"A new database is created. Updates to the database within a short time window are aggregated."},databaseDeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseDeleted",defaultMessage:"Database deleted"},databaseDeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseDeleted",defaultMessage:"A database is moved to the trash. Events of this type are aggregated by canceling out any subsequent database.undeleted events within a short time frame."},databaseMovedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseMoved",defaultMessage:"Database moved"},databaseMovedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseMoved",defaultMessage:"A database is moved to a different location. Consecutive events of this type within a short time window are aggregated."},databaseSchemaUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseSchemaUpdated",defaultMessage:"Database schema updated"},databaseSchemaUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseSchemaUpdated",defaultMessage:"A database’s schema is updated, such as adding or removing a property or changing the type of an existing property. Consecutive events of this type within a short time window are aggregated."},databaseUndeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseUndeleted",defaultMessage:"Database undeleted"},databaseUndeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseUndeleted",defaultMessage:"A database is restored from the trash. Events of this type are aggregated by canceling out any subsequent database.deleted events within a short time frame."},commentCategoryLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.comment",defaultMessage:"Comment"},commentCreatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.commentCreated",defaultMessage:"Comment created"},commentCreatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.commentCreated",defaultMessage:"A new discussion or suggestion comment is added."},commentDeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.commentDeleted",defaultMessage:"Comment deleted"},commentDeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.commentDeleted",defaultMessage:"A comment is deleted."},commentUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.commentUpdated",defaultMessage:"Comment updated"},commentUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.commentUpdated",defaultMessage:"A comment is updated."}}),mo=[{type:"page",label:(0,A.jsx)(d().sA,{...go.pageCategoryLabel}),eventTypes:[{type:"page.content_updated",name:(0,A.jsx)(d().sA,{...go.pageContentUpdatedEventType}),description:(0,A.jsx)(d().sA,{...go.pageContentUpdatedEventDescription}),ariaLabel:V().A.formatMessage(go.pageContentUpdatedEventDescription)},{type:"page.created",name:(0,A.jsx)(d().sA,{...go.pageCreatedEventType}),description:(0,A.jsx)(d().sA,{...go.pageCreatedEventDescription}),ariaLabel:V().A.formatMessage(go.pageCreatedEventDescription)},{type:"page.deleted",name:(0,A.jsx)(d().sA,{...go.pageDeletedEventType}),description:(0,A.jsx)(d().sA,{...go.pageDeletedEventDescription}),ariaLabel:V().A.formatMessage(go.pageDeletedEventDescription)},{type:"page.locked",name:(0,A.jsx)(d().sA,{...go.pageLockedEventType}),description:(0,A.jsx)(d().sA,{...go.pageLockedEventDescription}),ariaLabel:V().A.formatMessage(go.pageLockedEventDescription)},{type:"page.moved",name:(0,A.jsx)(d().sA,{...go.pageMovedEventType}),description:(0,A.jsx)(d().sA,{...go.pageMovedEventDescription}),ariaLabel:V().A.formatMessage(go.pageMovedEventDescription)},{type:"page.properties_updated",name:(0,A.jsx)(d().sA,{...go.pagePropertiesUpdatedEventType}),description:(0,A.jsx)(d().sA,{...go.pagePropertiesUpdatedEventDescription}),ariaLabel:V().A.formatMessage(go.pagePropertiesUpdatedEventDescription)},{type:"page.undeleted",name:(0,A.jsx)(d().sA,{...go.pageUndeletedEventType}),description:(0,A.jsx)(d().sA,{...go.pageUndeletedEventDescription}),ariaLabel:V().A.formatMessage(go.pageUndeletedEventDescription)},{type:"page.unlocked",name:(0,A.jsx)(d().sA,{...go.pageUnlockedEventType}),description:(0,A.jsx)(d().sA,{...go.pageUnlockedEventDescription}),ariaLabel:V().A.formatMessage(go.pageUnlockedEventDescription)}]},{type:"database",label:(0,A.jsx)(d().sA,{...go.databaseCategoryLabel}),eventTypes:[{type:"database.content_updated",name:(0,A.jsx)(d().sA,{...go.databaseContentUpdatedEventType}),description:(0,A.jsx)(d().sA,{...go.databaseContentUpdatedEventDescription}),ariaLabel:V().A.formatMessage(go.databaseContentUpdatedEventDescription)},{type:"database.created",name:(0,A.jsx)(d().sA,{...go.databaseCreatedEventType}),description:(0,A.jsx)(d().sA,{...go.databaseCreatedEventDescription}),ariaLabel:V().A.formatMessage(go.databaseCreatedEventDescription)},{type:"database.deleted",name:(0,A.jsx)(d().sA,{...go.databaseDeletedEventType}),description:(0,A.jsx)(d().sA,{...go.databaseDeletedEventDescription}),ariaLabel:V().A.formatMessage(go.databaseDeletedEventDescription)},{type:"database.moved",name:(0,A.jsx)(d().sA,{...go.databaseMovedEventType}),description:(0,A.jsx)(d().sA,{...go.databaseMovedEventDescription}),ariaLabel:V().A.formatMessage(go.databaseMovedEventDescription)},{type:"database.schema_updated",name:(0,A.jsx)(d().sA,{...go.databaseSchemaUpdatedEventType}),description:(0,A.jsx)(d().sA,{...go.databaseSchemaUpdatedEventDescription}),ariaLabel:V().A.formatMessage(go.databaseSchemaUpdatedEventDescription)},{type:"database.undeleted",name:(0,A.jsx)(d().sA,{...go.databaseUndeletedEventType}),description:(0,A.jsx)(d().sA,{...go.databaseUndeletedEventDescription}),ariaLabel:V().A.formatMessage(go.databaseUndeletedEventDescription)}]},{type:"comment",label:(0,A.jsx)(d().sA,{...go.commentCategoryLabel}),eventTypes:[{type:"comment.created",name:(0,A.jsx)(d().sA,{...go.commentCreatedEventType}),description:(0,A.jsx)(d().sA,{...go.commentCreatedEventDescription}),ariaLabel:V().A.formatMessage(go.commentCreatedEventDescription)},{type:"comment.deleted",name:(0,A.jsx)(d().sA,{...go.commentDeletedEventType}),description:(0,A.jsx)(d().sA,{...go.commentDeletedEventDescription}),ariaLabel:V().A.formatMessage(go.commentDeletedEventDescription)},{type:"comment.updated",name:(0,A.jsx)(d().sA,{...go.commentUpdatedEventType}),description:(0,A.jsx)(d().sA,{...go.commentUpdatedEventDescription}),ariaLabel:V().A.formatMessage(go.commentUpdatedEventDescription)}]}],fo=(0,d().YK)({allSelectedEventsCount:{id:"webhookSubscriptionModal.numTotalEventsSelected",defaultMessage:"Events ({totalEventsSelected})"},allSelectedCategoryCount:{id:"webhookSubscriptionModal.allCategoryEventsSelected",defaultMessage:"{totalNum} events"},webhookUrl:{id:"webhookSubscriptionModal.webhookURL",defaultMessage:"Webhook URL"},webhookUrlPlaceholder:{id:"webhookSubscriptionModal.webhookUrlPlaceholder",defaultMessage:"Enter the URL where you want to receive events"},selectedEventTypes:{id:"webhookSubscriptionModal.selectEvents",defaultMessage:"Select the events to listen to"},createButton:{id:"webhookSubscriptionModal.create",defaultMessage:"Create subscription"},editButton:{id:"webhookSubscriptionModal.edit",defaultMessage:"Update subscription"},noChangesToSave:{id:"webhookSubscriptionModal.noChangesToSave",defaultMessage:"Your selections already match the current settings"},cancelButton:{id:"webhookSubscriptionModal.cancel",defaultMessage:"Cancel"},genericError:{id:"webhookSubscriptionModal.genericErrorMessage",defaultMessage:"Something went wrong, please retry again"},createHeader:{defaultMessage:"Create subscription",id:"webhookSubscriptionModal.createModalTitle"},editHeader:{defaultMessage:"Edit subscription",id:"webhookSubscriptionModal.editModalTitle"},createByline:{defaultMessage:"Set up your webhook endpoint to receive live events from Notion",id:"webhookSubscriptionModal.modalByline"}});function ho(e){var t;let{integrationId:a,onRefetchSubscription:s,setIsOpen:l,webhookSubscription:c,botCapabilities:u}=e;const p=null!==c;function g(e){const{eventCategory:t,totalNumEventsForCategory:a,numSelectedForCategory:r}=e,n=t.type,o=()=>{M((e=>({...e,[n]:!e[n]})))},s=()=>{0!==C[n].length?w((e=>({...e,[n]:[]}))):w((e=>({...e,[n]:b[n]})))};return{key:n,action:o,render:e=>{let l;return l=r===a||r>0&&"partial",(0,i.createElement)(it().A,{textWrapperStyle:E.textWrapperStyle,title:(0,A.jsxs)("div",{style:E.title,children:[(0,A.jsx)(to().A,{checked:l,size:14,checkSize:8,onClick:s,style:E.checkbox}),(0,A.jsx)(ao().A,{style:E.categoryText,children:t.label})]}),right:(0,A.jsxs)(eo().Y1,{direction:"horizontal",gap:"auto",align:"center",children:[(0,A.jsx)(po,{categoryType:n,botCapabilities:u}),(0,A.jsx)(ao().A,{isSecondaryColor:!0,style:E.categorySubHeader,children:(0,A.jsx)(d().sA,{...fo.allSelectedCategoryCount,values:{totalNum:a}})}),(0,A.jsx)(ro().A,{style:E.toggleButton,open:_[n],onClick:o,isSidebar:!1,fill:!1,icon:"chevron"})]}),...e,key:n})}}}const m=(0,n().uB)(void 0,oo().A),f=(0,d().tz)(),h=i.useMemo((()=>mo.filter((e=>{let{hidden:t}=e;return!t}))),[]),b=i.useMemo((()=>h.reduce(((e,t)=>({...e,[t.type]:t.eventTypes.map((e=>{let{type:t}=e;return t}))})),{})),[h]),v=i.useMemo((()=>h.reduce(((e,t)=>e+t.eventTypes.length),0)),[h]),x=i.useMemo((()=>p?h.reduce(((e,t)=>({...e,[t.type]:t.eventTypes.map((e=>{let{type:t}=e;return t})).filter((e=>{var t;return null==c||null===(t=c.event_types)||void 0===t?void 0:t[e]}))})),{}):h.reduce(((e,t)=>({...e,[t.type]:t.eventTypes.map((e=>{let{type:t}=e;return t}))})),{})),[c,p,h]),[C,w]=i.useState(x),[j,S]=i.useState(p?c.url:""),[_,M]=i.useState(Object.keys(b).reduce(((e,t)=>(e[t]=!1,e)),{})),[I,k]=i.useState(""),[T,P]=i.useState(""),[D,R]=i.useState(!1),E=function(e){let{hasEventTypesError:t}=e;return(0,o().IS)((e=>({textWrapperStyle:{margin:0},textInput:{height:32,fontSize:15},disabledTextInput:{height:32,fontSize:15,color:e.lightTextColor},webhookUrlSection:{marginTop:24,marginBottom:24},container:{paddingBottom:8},toggleButton:{marginLeft:2,marginRight:2},title:{margin:0,display:"flex",alignItems:"center",paddingLeft:12},categoryText:{marginLeft:8,fontWeight:L().Wy.medium},categorySubHeader:{marginLeft:6,width:60},icon:{height:32,width:32,fill:e.icon.secondary},eventTypesError:{color:e.text.uiRedPrimary,marginTop:6},eventTypesContainer:{maxHeight:280,borderRadius:8,border:`1px solid ${t?e.stroke.uiRedSecondary:e.stroke.secondary}`},eventTypesWrapper:{height:290},eventTypesSection:{overflowY:"scroll",maxHeight:220},actionButton:{marginTop:15,width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},eventName:{display:"flex",alignItems:"center"},helpIcon:{width:15,height:15},eventTypesHeader:{display:"flex",height:40,padding:16,borderBottom:`1px solid ${e.regularDividerColor}`,gap:10,alignItems:"center"},categoryToggle:{display:"flex",alignItems:"center",justifyContent:"flex-start"},checkbox:{marginLeft:0},eventNameItem:{paddingLeft:28}})),[t])}({hasEventTypesError:T.length>0}),B=(0,r().v3)(),F=p&&"pending"!==c.status,U=!(0,At().n4)(j.trim(),(null==c||null===(t=c.url)||void 0===t?void 0:t.trim())||""),N=!(0,At().n4)(C,x),z=U||N;async function W(){if(p&&!j)return void k("Webhook URL cannot be blank");k(""),P(""),R(!0);const e=Object.values(C).flat().reduce(((e,t)=>({...e,[t]:!0})),{});let t;if(t=p?await Kn({environment:B,subscriptionId:c.id,eventTypes:e,...F?{}:{url:j}}):await async function(e){const{environment:t,...a}=e,i=await y().callApi({eventName:"createWebhookSubscription",environment:t,data:a});return"failed"===i.type?qn(i):{responseType:"success",data:i.data}}({environment:B,integrationId:a,url:j,eventTypes:e}),R(!1),"error"===t.responseType){const e=t.data.message??f.formatMessage(fo.genericError);"url"===t.data.field?k(e):"eventTypes"===t.data.field&&P(e)}else"success"===t.responseType?(l(!1),s()):(0,O().HB)(t)}const V=[];let H=0;for(const i of h){if(i.hidden)continue;const e=i.type,t=[];let a=0;for(const{type:r,name:n,description:o,ariaLabel:s}of i.eventTypes)t.push({key:r,action:()=>{const t=C[e].filter((e=>e!==r));C[e].includes(r)||t.push(r),w((a=>({...a,[e]:t})))},render:t=>(0,A.jsx)(it().A,{...t,icon:(0,A.jsx)(to().A,{checked:C[e].includes(r),size:14,checkSize:8,onClick:()=>{const t=C[e].filter((e=>e!==r));C[e].includes(r)||t.push(r),w((a=>({...a,[e]:t})))}}),focused:!1,title:(0,A.jsx)(hr().A,{textWrap:!0,renderTooltip:()=>(0,A.jsx)(so,{event:{type:r,description:o}}),render:e=>(0,A.jsxs)("div",{...e,style:E.eventName,children:[n,(0,A.jsx)(ti().A,{ariaLabel:s,icon:Jn().$,iconStyle:E.helpIcon,disableBackground:!0})]})}),className:"notranslate",style:E.eventNameItem})}),C[e].includes(r)&&(a++,H+=1);V.push(g({eventCategory:i,shouldShowCount:!0,totalNumEventsForCategory:t.length,numSelectedForCategory:a})),_[e]&&V.push(...t)}const q={key:"results",items:V,render:e=>(0,A.jsx)(ii().A,{...e,title:null,loading:!1})},K=p?fo.editButton:fo.createButton;let Z;return Z=0!==H&&(H===v||"partial"),(0,A.jsxs)(eo().Y1,{padding:24,children:[(0,A.jsx)(io().rQ,{icon:(0,Gn().V)(E.icon),title:p?f.formatMessage(fo.editHeader):f.formatMessage(fo.createHeader),byline:f.formatMessage(fo.createByline)}),(0,A.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await W()},children:[(0,A.jsx)("div",{style:E.webhookUrlSection,children:(0,A.jsxs)(eo().Y1,{gap:6,children:[(0,A.jsx)(rt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,A.jsx)(d().sA,{...fo.webhookUrl})}),(0,A.jsx)(or().A,{ignoreKeyboardMode:!0,errorOutline:I.length>0,value:j,style:F?E.disabledTextInput:E.textInput,onChange:e=>S(e.target.value),disabled:F,placeholder:f.formatMessage(fo.webhookUrlPlaceholder)}),I.length>0?(0,A.jsx)(rt().D,{styleName:"UISmall-12px/Regular",colorName:"uiRedPrimary",children:I}):(0,A.jsx)(rt().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:F?"If you want to change this, you must delete this webhook and create another":"Enter a public, SSL-enabled URL where you will receive events"})]})}),(0,A.jsxs)(eo().Y1,{gap:6,children:[(0,A.jsx)(rt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,A.jsx)(d().sA,{...fo.selectedEventTypes})}),(0,A.jsxs)("div",{style:E.eventTypesWrapper,children:[(0,A.jsxs)("div",{style:E.eventTypesContainer,children:[(0,A.jsxs)("div",{style:E.eventTypesHeader,children:[(0,A.jsx)(to().A,{checked:Z,size:14,checkSize:8,onClick:function(){w(0===H?h.reduce(((e,t)=>({...e,[t.type]:b[t.type]})),{}):h.reduce(((e,t)=>({...e,[t.type]:[]})),{}))},style:E.checkbox}),(0,A.jsx)(rt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,A.jsx)(d().sA,{...fo.allSelectedEventsCount,values:{totalEventsSelected:H}})})]}),(0,A.jsx)("div",{style:E.eventTypesSection,children:(0,A.jsx)(ai().Ay,{type:ai().Oh.Vertical,store:m,initialFocus:0,sections:[q]})})]}),(0,A.jsx)("div",{children:T.length>0&&(0,A.jsx)(rt().D,{styleName:"UISmall-12px/Regular",style:E.eventTypesError,children:T})})]})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(hr().A,{placement:no().W.Top,alignment:no().C.Center,disableTooltip:z||!p,renderTooltip:()=>(0,A.jsx)(d().sA,{...fo.noChangesToSave}),textWrap:!0,render:e=>(0,A.jsx)(Ie().A,{size:"lg",...e,onClick:async()=>await W(),style:E.actionButton,disabled:D||!z,children:(0,A.jsx)(d().sA,{...K})})}),(0,A.jsx)(Sa().A,{size:"lg",style:E.actionButton,onClick:()=>{l(!1)},disabled:D,children:(0,A.jsx)(d().sA,{...fo.cancelButton})})]})]})}function bo(e){let{onRefetchSubscription:t,isOpen:a,setIsOpen:i,integrationId:r,webhookSubscription:n,botCapabilities:o}=e;return a?(0,A.jsx)(ka().s,{areaConstraint:{width:{type:"min",length:600},height:{type:"min",length:600}},isOpen:a,onClosed:()=>i(!1),render:()=>(0,A.jsx)(ho,{integrationId:r,onRefetchSubscription:t,setIsOpen:i,webhookSubscription:n,botCapabilities:o})}):null}function vo(e){let{integrationId:t,onRefetchSubscription:a,modalIsOpen:i,setModalIsOpen:r,botCapabilities:n}=e;const s=(0,o().IS)((e=>({createWebhookButton:{marginTop:"12px"},learnMoreLink:{display:"inline",color:e.blueColor},container:{border:`1px solid ${e.regularDividerColor}`,borderRadius:8,padding:"75px 0"}})),[]);return(0,A.jsx)("div",{style:s.container,children:(0,A.jsxs)(aa().wt,{gap:4,children:[(0,A.jsx)(Qn().A,{icon:Gn().V,bodyWidth:400,title:(0,A.jsx)(d().sA,{defaultMessage:"No webhook subscription",id:"creatorProfile.integrations.emptyWebhookSubscriptionView.title"}),description:(0,A.jsx)(d().sA,{defaultMessage:"Get real-time updates and automate workflows when important changes happen. <learnMoreLink>Learn more</learnMoreLink>",id:"creatorProfile.integrations.emptyWebhookSubscriptionView.description",values:{learnMoreLink:e=>(0,A.jsx)(Dt().A,{href:(0,ia().xS)("guides.publicAPI"),style:s.learnMoreLink,children:e})}})}),(0,A.jsxs)(aa().Ye,{justifyContent:"center",children:[(0,A.jsx)(Sa().A,{size:"lg",icon:Xn().W,style:s.createWebhookButton,onClick:()=>r(!0),children:(0,A.jsx)(d().sA,{defaultMessage:"Create a subscription",id:"creatorProfile.integrations.emptyWebhookSubscriptionView.createWebhookButton.label"})}),(0,A.jsx)(bo,{isOpen:i,setIsOpen:r,integrationId:t,onRefetchSubscription:a,webhookSubscription:null,botCapabilities:n})]})]})})}var xo=()=>a(671089),yo=()=>a(55293),Co=()=>a(532940),wo=()=>a(765974);const jo={viewBox:"0 0 20 20",svg:(0,A.jsx)("path",{d:"M4.75 3.75a1 1 0 0 0-1 1v10.5a1 1 0 0 0 1 1H7.5a1 1 0 0 0 1-1V4.75a1 1 0 0 0-1-1zm7.75 0a1 1 0 0 0-1 1v10.5a1 1 0 0 0 1 1h2.75a1 1 0 0 0 1-1V4.75a1 1 0 0 0-1-1z"})},So=(0,Fe().wt)("mediaPauseFill",jo);var _o=()=>a(802790),Mo=()=>a(690197),Ao=()=>a(869190),Io=()=>a(416504),ko=()=>a(46124),To=()=>a(249117);const Po=(0,d().YK)({title:{id:"creatorProfile.integrations.webhookSubscriptionEventsModal.title",defaultMessage:"View failed events"},subtitle:{id:"creatorProfile.integrations.webhookSubscriptionEventsModal.subtitle",defaultMessage:"View details about failed deliveries to your webhook URL for debugging purposes."},numSuccessesLabel:{id:"creatorProfile.integrations.webhookSubscriptionEventsModal.numSuccessesLabel",defaultMessage:"Number of successes"},numFailuresLabel:{id:"creatorProfile.integrations.webhookSubscriptionEventsModal.numFailuresLabel",defaultMessage:"Number of failures"},lastFailureTimestampMsLabel:{id:"creatorProfile.integrations.webhookSubscriptionEventsModal.lastFailureTimestampMsLabel",defaultMessage:"Most recent failure"}});function Lo(e){const{deliveryState:t,isOpen:a,onDismiss:r}=e,n=(0,o().IS)((e=>({container:{padding:16,backgroundColor:e.surface.wash,marginLeft:8,marginRight:8},headerIcon:{width:32,height:32},title:{textAlign:"center",fontSize:16,fontWeight:L().Wy.semibold,lineHeight:"22px",marginBottom:8,marginTop:8},subtitle:{textAlign:"center",fontSize:14,lineHeight:"20px",marginBottom:16,color:e.mediumTextColor,fontWeight:L().Wy.regular},propertyRow:{display:"inherit"}})),[]),s=(0,d().tz)(),l=(0,v().H)(s),c=(0,Io().P)(),u=[{key:"num_failures",label:(0,A.jsx)(d().sA,{...Po.numFailuresLabel}),value:String(t.numFailures)},...t.numSuccesses?[{key:"num_successes",label:(0,A.jsx)(d().sA,{...Po.numSuccessesLabel}),value:String(t.numSuccesses)}]:[],...t.lastFailureTimestampMs?[{key:"last_failure_timestamp_ms",label:(0,A.jsx)(d().sA,{...Po.lastFailureTimestampMsLabel}),value:(p=t.lastFailureTimestampMs,(0,Ao().W_)(p,"medium_with_seconds",l,c))}]:[]];var p;return(0,A.jsx)(ka().s,{areaConstraint:{width:{type:"min",length:500},height:{type:"min",length:150}},isOpen:a,onDismiss:r,render:()=>(0,A.jsxs)(eo().Y1,{style:n.container,direction:"vertical",children:[(0,A.jsx)(aa().Ye,{justifyContent:"center",children:(0,ko().L)(n.headerIcon)}),(0,A.jsx)(aa().Ye,{justifyContent:"center",style:n.title,children:(0,A.jsx)(d().sA,{...Po.title})}),(0,A.jsx)(aa().Ye,{justifyContent:"center",style:n.subtitle,children:(0,A.jsx)(d().sA,{...Po.subtitle})}),(0,A.jsx)(To().xA,{gap:8,children:u.map(((e,t)=>(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)(To().LX,{row:t+1,col:1,children:(0,A.jsx)("span",{children:(0,A.jsx)(ao().A,{isSecondaryColor:!0,children:e.label})})}),(0,A.jsx)(To().LX,{row:t+1,col:2,children:(0,A.jsx)("span",{children:(0,A.jsx)(ao().A,{children:e.value})})})]},e.key)))})]})})}var Do=()=>a(568721),Ro=()=>a(259613);const Eo=(0,d().YK)({enabledEventCount:{defaultMessage:"{numEnabledEvents}/{numTotalEvents} events",id:"creatorProfile.integrations.webhookSubscriptionDetail.enabledEventCount"}});function Bo(e){const t=(0,d().tz)(),{enabledEventTypes:a,botCapabilities:i}=e,r=(0,o().IS)((e=>({eventRow:{alignItems:"center"},eventName:{lineHeight:"18px",paddingLeft:6,fontWeight:L().Wy.medium,fontSize:12},eventCountContainer:{width:76,textAlign:"right",height:24},eventCountLabel:{lineHeight:"24px",color:e.mediumTextColor},checkbox:{background:e.icon.uiBluePrimary,fill:e.white},disabledCheckbox:{background:e.icon.secondary,fill:e.white},helpIcon:{width:15,height:15}})),[]),n=function(e){return mo.map((t=>{const a=t.eventTypes.map((t=>({type:t.type,name:t.name,description:t.description,isEnabled:!e||!!e[t.type]}))),i=a.filter((e=>{let{isEnabled:t}=e;return t})).length;return{type:t.type,title:t.label,numEnabledEvents:i,numTotalEvents:a.length,eventInfo:a,hidden:t.hidden}}))}(a),s=e=>{let{category:t,botCapabilities:a}=e;const{numEnabledEvents:i,numTotalEvents:n}=t;return(0,A.jsxs)(eo().Y1,{direction:"horizontal",align:"center",gap:8,children:[(0,A.jsx)(po,{categoryType:t.type,botCapabilities:a}),(0,A.jsx)("div",{style:r.eventCountContainer,children:(0,A.jsx)(ao().A,{style:r.eventCountLabel,children:(0,A.jsx)(d().sA,{...Eo.enabledEventCount,values:{numEnabledEvents:i,numTotalEvents:n}})})})]})},l=e=>{let{event:a}=e;return(0,A.jsxs)(aa().Ye,{style:r.eventRow,children:[(0,A.jsx)(Ro().T,{size:12,round:!0,thinOutline:!0,checked:!0,disabled:!0,style:a.isEnabled?r.checkbox:r.disabledCheckbox}),(0,A.jsx)(ao().A,{isSecondaryColor:!a.isEnabled,style:r.eventName,children:a.name}),(0,A.jsx)(hr().A,{textWrap:!0,renderTooltip:()=>(0,A.jsx)(so,{event:a}),render:e=>(0,A.jsx)("div",{...e,children:(0,A.jsx)(ti().A,{ariaLabel:t.formatMessage({id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTooltip",defaultMessage:"Event type: {eventType}"},{eventType:a.type}),icon:Jn().$,iconStyle:r.helpIcon,disableBackground:!0})})})]})},c=e=>{let{category:t}=e;const a=t.eventInfo.map(((e,t)=>{const a=Math.floor(t/3)+1,i=t%3+1;return(0,A.jsx)(To().LX,{row:a,col:i,children:l({event:e})},e.type)}));for(let i=a.length+1;i<=3;i++)a.push((0,A.jsx)(To().LX,{row:1,col:i,children:(0,A.jsx)(ao().A,{})},`empty-${i}`));return(0,A.jsx)(To().xA,{gap:8,children:a})},u=n.map((e=>(e=>{let{category:t,botCapabilities:a}=e;return{key:t.type,title:t.title,secondaryLabel:s({category:t,botCapabilities:a}),content:c({category:t}),hidden:t.hidden}})({category:e,botCapabilities:i})));return(0,A.jsx)(Do().b,{sections:u})}var Fo=()=>a(662303);const Uo=(0,d().YK)({verifySubscription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verifySubscription",defaultMessage:"Verify subscription"},instruction1:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.instruction1",defaultMessage:"We sent a verification token to your webhook URL."},instruction2:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.instruction2",defaultMessage:"Enter it below to activate your subscription."},urlLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.urlLabel",defaultMessage:"Webhook URL"},resendToken:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.resendToken",defaultMessage:"Resend token"},verificationTokenLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verificationTokenLabel",defaultMessage:"Verification token"},verificationMessage:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verificationMessage",defaultMessage:"{message}"},verifyButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verifyButton",defaultMessage:"Verify subscription"},cancelButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.cancelButton",defaultMessage:"Cancel"},verificationFailure:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verificationFailure",defaultMessage:"Invalid verification token."},resendTokenFailure:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.resendTokenFailure",defaultMessage:"Failed to send verification token with status {httpCode}"},resendTokenSuccess:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.resendTokenSuccess",defaultMessage:"Verification token was successfully sent to the URL"}});function No(e){const{webhookSubscription:t,onClosed:a,onRefetchSubscription:n}=e,[s,l]=i.useState(""),[c,u]=i.useState(""),[p,g]=i.useState({status:"",message:""}),m=(0,o().IS)(Oo,[]),f=(0,r().v3)(),h=(0,d().tz)(),b=(0,i.useCallback)((async e=>{let{id:t,verificationToken:i}=e;u("");try{const e=await async function(e){const{environment:t,...a}=e,i=await y().callApi({eventName:"verifyWebhookSubscription",environment:t,data:a});if("failed"===i.type)throw i.error;return i.data}({environment:f,id:t,verificationToken:i});e&&(a(),n())}catch(r){return u(h.formatMessage(Uo.verificationFailure))}}),[f,n,h,a]),v=(0,i.useCallback)((async e=>{g({status:"",message:""});const t=await async function(e){const{environment:t,...a}=e,i=await y().callApi({eventName:"sendWebhookVerificationToken",environment:t,data:a});if("failed"===i.type)throw i.error;return i.data}({environment:f,id:e});"failure"===t.status?g({status:"failure",message:h.formatMessage(Uo.resendTokenFailure,{httpCode:t.httpCode})}):g({status:"success",message:h.formatMessage(Uo.resendTokenSuccess)})}),[f,h]);return(0,A.jsxs)(eo().Y1,{padding:"24px 20px",children:[(0,A.jsxs)("div",{style:m.modalHeader,children:[(0,A.jsx)("div",{style:m.iconContainer,children:(0,ko().L)(m.icon)}),(0,A.jsx)(rt().D,{styleName:"Heading-17px/Semibold",customStyles:{marginBottom:10},children:(0,A.jsx)(d().sA,{...Uo.verifySubscription})}),(0,A.jsxs)(rt().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:[(0,A.jsx)(d().sA,{...Uo.instruction1}),(0,A.jsx)("br",{}),(0,A.jsx)(d().sA,{...Uo.instruction2})]})]}),(0,A.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await b({id:t.id,verificationToken:s})},style:m.topSpacing,children:[(0,A.jsxs)(eo().Y1,{gap:6,children:[(0,A.jsx)(rt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,A.jsx)(d().sA,{...Uo.urlLabel})}),(0,A.jsx)(or().A,{value:t.url,disabled:!0,right:(0,A.jsxs)(aa().Ye,{children:[(0,A.jsx)("div",{style:m.resendButtonContainer}),(0,A.jsx)(ve().A,{onClick:async()=>{await v(t.id)},style:m.resendButton,children:(0,A.jsx)(d().sA,{...Uo.resendToken})})]})})]}),["success","failure"].includes(p.status)&&(0,A.jsx)(rt().D,{styleName:"UISmall-12px/Regular",style:"failure"===p.status?m.errorLabel:m.successLabel,children:p.message}),(0,A.jsx)("div",{style:m.topSpacing,children:(0,A.jsxs)(eo().Y1,{gap:6,children:[(0,A.jsx)(rt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,A.jsx)(d().sA,{...Uo.verificationTokenLabel})}),(0,A.jsx)(or().A,{type:"text",value:s,placeholder:"secret_********",onChange:e=>l(e.target.value)})]})}),c.length>0&&(0,A.jsx)(rt().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",style:m.errorLabel,children:(0,A.jsx)(d().sA,{...Uo.verificationMessage,values:{message:c}})}),(0,A.jsx)("div",{style:m.topSpacing,children:(0,A.jsx)(Ie().A,{size:"lg",style:m.modalButton,onClick:async()=>{await b({id:t.id,verificationToken:s})},children:(0,A.jsx)(d().sA,{...Uo.verifyButtonLabel})},"btn-verify")}),(0,A.jsx)("div",{children:(0,A.jsx)(Sa().A,{size:"lg",style:m.modalButton,onClick:a,children:(0,A.jsx)(d().sA,{...Uo.cancelButtonLabel})})})]})]})}function zo(e){const{webhookSubscription:t,isOpen:a,setIsOpen:i,onRefetchSubscription:r}=e;if(!a)return null;const n=()=>{i(!1)};return(0,A.jsx)(ka().s,{areaConstraint:{width:{type:"min",length:600},height:{type:"min",length:300}},isOpen:a,onClosed:n,render:()=>(0,A.jsx)(No,{webhookSubscription:t,onClosed:n,onRefetchSubscription:r})})}function Oo(e){return{icon:{height:32,width:32,fill:e.icon.secondary},iconContainer:{width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:8},resendButtonContainer:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1},resendButton:{display:"inline-flex",alignItems:"center",fontFamily:L().vc(Fo().locale).sans,borderRadius:6,padding:"0 6px",height:24,width:100,color:c().Ay.blue},modalHeader:{textAlign:"center"},modalButton:{marginTop:10,width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},topSpacing:{marginTop:20},successLabel:{marginTop:6,color:"green"},errorLabel:{marginTop:6,color:e.text.uiYellowPrimary}}}const Wo=(0,d().YK)({confirmDeleteModalTitle:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmDelete.message",defaultMessage:"Are you sure you want to delete this subscription?"},confirmDeleteModalDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmDelete.description",defaultMessage:"Your webhook URL will no longer receive events and the subscription will be deleted. You’ll need to create a new one to receive events again."},confirmDeleteModalAcceptButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmDelete.acceptButtonLabel",defaultMessage:"Delete subscription"},confirmResumeModalTitle:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmResume.message",defaultMessage:"Are you sure you want to resume this subscription?"},confirmResumeModalDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmResume.description",defaultMessage:"Your webhook URL will start receiving Notion events and should be ready to return a successful HTTP response."},confirmResumeModalAcceptButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmResume.acceptButtonLabel",defaultMessage:"Resume"},confirmPauseModalTitle:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmPause.message",defaultMessage:"Are you sure you want to pause this subscription?"},confirmPauseModalDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmPause.description",defaultMessage:"Events will not be sent to your webhook URL until you resume the subscription."},confirmPauseModalAcceptButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmPause.acceptButtonLabel",defaultMessage:"Pause subscription"},urlLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.urlLabel",defaultMessage:"Webhook URL"},urlDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.urlDescription",defaultMessage:"This is where your webhook events are sent."},enabledEventsLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.enabledEventsLabel",defaultMessage:"Subscribed events"},enabledEventsDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.enabledEventsDescription",defaultMessage:"These webhooks events will be sent to your webhook URL"},deleteButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.buttonLabels.delete",defaultMessage:"Delete"},editButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.buttonLabels.edit",defaultMessage:"Edit subscription"},verifyButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.buttonLabels.verify",defaultMessage:"Verify"},pauseButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.buttonLabels.pause",defaultMessage:"Pause"},resumeButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.buttonLabels.resume",defaultMessage:"Resume"},learnMoreButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.learnMoreFooterText",defaultMessage:"Learn more about webhooks"},activeWebhookStatusLabel:{defaultMessage:"This subscription is currently active",id:"creatorProfile.integrations.webhookSubscriptionDetail.activeWebhookStatusLabel"},verifyCalloutHeader:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verifyCalloutHeader",defaultMessage:"You must verify your endpoint to receive webhook events"},verifyCalloutBody:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verifyCalloutBody",defaultMessage:"To start receiving events, you need to verify your endpoint. This ensures a secure connection between Notion and your application."},pausedCalloutHeader:{id:"creatorProfile.integrations.webhookSubscriptionDetail.pausedCalloutHeader",defaultMessage:"Webhook subscription is currently paused"},pausedCalloutBody:{id:"creatorProfile.integrations.webhookSubscriptionDetail.pausedCalloutBody",defaultMessage:"Your webhook subscription is currently paused due to high error rate. Please fix the problem and resume to enable event delivery."},pausedByUserStatusLabel:{defaultMessage:"This subscription is currently paused",id:"creatorProfile.integrations.webhookSubscriptionDetail.pausedByuserWebhookStatusLabel"},openDeliveryStateButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.openDeliveryStateButtonLabel",defaultMessage:"View failed events"}});function Vo(e){return"pending"===e?Wo.verifyCalloutHeader:"paused"===e?Wo.pausedCalloutHeader:void 0}function Ho(e){return"pending"===e?Wo.verifyCalloutBody:"paused"===e?Wo.pausedCalloutBody:void 0}function qo(e){const{webhookSubscription:t,onUpdateSubscriptionStatus:a,onRefetchSubscription:r,modalIsOpen:n,setModalIsOpen:s,botCapabilities:l}=e,{status:u}=t,p=(0,o().IS)((e=>({activeText:{fontSize:14,lineHeight:"18px",color:e.text.uiBluePrimary,paddingLeft:6,letterSpacing:"-0.154px"},pausedText:{fontSize:14,lineHeight:"18px",color:e.lightTextColor,letterSpacing:"-0.154px"},pausedByUserIcon:{width:Fe().Ev.sm,height:Fe().Ev.sm,marginRight:6,fill:e.icon.uiYellowPrimary},mainButtonArea:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:8},secondaryButtonArea:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:8},mediumBoldButton:{fontWeight:L().Wy.medium,height:32},frame:{border:`1px solid ${e.regularDividerColor}`,borderRadius:6},frameBody:{padding:24},frameFooter:{padding:"20px 24px",justifyContent:"space-between",display:"flex",alignItems:"center"},footerButton:{height:32},urlInput:{color:e.lightTextColor},sectionTitle:{fontWeight:L().Wy.semibold,paddingBottom:4},sectionSubtitle:{paddingBottom:12,alignItems:"center"},sectionBody:{paddingBottom:8},divider:{paddingTop:16,paddingBottom:16},learnMoreButton:{display:"inline-flex",fontWeight:L().Wy.medium,marginLeft:0},learnMoreInnerButton:{height:28,paddingLeft:8,paddingRight:8},warningIcon:{width:Fe().Ev.sm,height:Fe().Ev.sm,color:e.statusTokenText.yellow,marginRight:6,marginTop:2},pauseIcon:{width:Fe().Ev.sm,height:Fe().Ev.sm,marginRight:6},belowFrameArea:{marginLeft:2,marginTop:8},calloutContainer:{marginTop:12,padding:15,borderRadius:10,backgroundColor:e.accentColors.yellow[50]},calloutHeader:{fontWeight:L().Wy.bold,marginBlockStart:"0.5em",marginBlockEnd:"0.5em"},calloutIcon:{width:18,height:18,color:e.statusTokenText.yellow,marginRight:6},calloutBody:{paddingLeft:25,color:e.lightTextColor,marginBlockStart:"0.2em",marginBlockEnd:"0.2em",maxWidth:640,fontSize:14,marginTop:0},deleteConfirmationModalIcon:{height:32,width:32,fill:e.icon.redPrimary},pauseConfirmationModalIcon:{height:32,width:32,fill:e.icon.graySecondary},resumeConfirmationModalIcon:{height:32,width:32,fill:e.icon.graySecondary},fullWidth:{width:"100%"},openDeliveryStateButton:{color:e.text.uiBluePrimary}})),[]),[g,m]=i.useState(!1),f="paused"===u&&"user_deactivation"!==t.paused_reason,h="paused"===u&&"user_deactivation"===t.paused_reason,[b,v]=i.useState(!1);const x=[{key:"url",title:(0,A.jsx)(d().sA,{...Wo.urlLabel}),subtitle:(0,A.jsx)(d().sA,{...Wo.urlDescription}),main:(0,A.jsx)(or().A,{value:t.url,disabled:!0,style:p.urlInput,format:or().C.Large}),footer:(0,A.jsxs)(aa().Ye,{justifyContent:"space-between",alignItems:"center",style:p.fullWidth,children:[(0,A.jsx)(aa().Ye,{alignItems:"center",children:"active"===u?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(to().A,{size:12,round:!0,thinOutline:!0,checked:!0,disabled:!0}),(0,A.jsx)("div",{style:p.activeText,children:(0,A.jsx)(d().sA,{...Wo.activeWebhookStatusLabel})})]}):h?(0,A.jsxs)(A.Fragment,{children:[(0,wo().b)(p.pausedByUserIcon),(0,A.jsx)("div",{style:p.pausedText,children:(0,A.jsx)(d().sA,{...Wo.pausedByUserStatusLabel})})]}):void 0}),t.delivery_state&&(0,A.jsxs)(aa().Ye,{alignItems:"center",children:[(0,A.jsx)(M().p,{isGray:!0,size:"xs",style:p.openDeliveryStateButton,onClick:()=>v(!0),children:(0,A.jsx)(d().sA,{...Wo.openDeliveryStateButtonLabel})}),(0,A.jsx)(Lo,{isOpen:b,onDismiss:()=>v(!1),deliveryState:t.delivery_state})]})]})},{key:"events",title:(0,A.jsx)(d().sA,{...Wo.enabledEventsLabel}),subtitle:(0,A.jsx)(d().sA,{...Wo.enabledEventsDescription}),main:(0,A.jsx)(Bo,{botCapabilities:l,enabledEventTypes:t.event_types})}],y=x.map(((e,t)=>(0,A.jsxs)("div",{children:[(0,A.jsx)(aa().Ye,{style:p.sectionTitle,children:(0,A.jsx)(ao().A,{children:e.title})}),(0,A.jsx)(aa().Ye,{style:p.sectionSubtitle,children:(0,A.jsx)(ao().A,{isSecondaryColor:!0,children:e.subtitle})}),(0,A.jsx)("div",{style:p.sectionBody,children:e.main}),e.footer&&(0,A.jsx)(aa().Ye,{style:p.sectionSubtitle,children:e.footer}),t<x.length-1&&(0,A.jsx)(je().A,{axis:"y",size:8})]},e.key))),w=[(0,A.jsx)(M().p,{isRed:!0,onClick:async()=>await async function(e){const{accept:t}=await C().Gh({message:(0,A.jsx)(d().sA,{...Wo.confirmDeleteModalTitle}),description:(0,A.jsx)(d().sA,{...Wo.confirmDeleteModalDescription}),acceptLabel:(0,A.jsx)(d().sA,{...Wo.confirmDeleteModalAcceptButtonLabel}),icon:(0,yo().J)(p.deleteConfirmationModalIcon),mode:"wide"});t&&a({id:e,status:"archived"})}(t.id),style:p.mediumBoldButton,children:(0,A.jsx)(d().sA,{...Wo.deleteButtonLabel})},"btn-delete"),(0,A.jsx)(Ie().A,{style:p.footerButton,onClick:()=>s(!0),children:(0,A.jsx)(d().sA,{...Wo.editButtonLabel})},"btn-edit")];let j=null;"pending"===u?j=(0,A.jsxs)("span",{children:[(0,A.jsxs)(Sa().A,{size:"lg",onClick:()=>m(!0),style:p.mediumBoldButton,children:[(0,Co().q)(p.warningIcon),(0,A.jsx)(d().sA,{...Wo.verifyButtonLabel})]}),(0,A.jsx)(zo,{isOpen:g,setIsOpen:m,webhookSubscription:t,onRefetchSubscription:r})]},"btn-verify"):"active"===u?j=(0,A.jsx)("span",{children:(0,A.jsxs)(Sa().A,{size:"lg",onClick:async()=>await async function(e){const{accept:t}=await C().Gh({message:(0,A.jsx)(d().sA,{...Wo.confirmPauseModalTitle}),description:(0,A.jsx)(d().sA,{...Wo.confirmPauseModalDescription}),acceptLabel:(0,A.jsx)(d().sA,{...Wo.confirmPauseModalAcceptButtonLabel}),acceptColor:"blue",icon:So(p.pauseConfirmationModalIcon),mode:"wide"});t&&a({id:e,status:"paused"})}(t.id),style:p.mediumBoldButton,children:[So(p.pauseIcon),(0,A.jsx)(d().sA,{...Wo.pauseButtonLabel})]})},"btn-pause"):"paused"===u&&(j=(0,A.jsxs)(Sa().A,{size:"lg",onClick:async()=>await async function(e){const{accept:t}=await C().Gh({message:(0,A.jsx)(d().sA,{...Wo.confirmResumeModalTitle}),description:(0,A.jsx)(d().sA,{...Wo.confirmResumeModalDescription}),acceptLabel:(0,A.jsx)(d().sA,{...Wo.confirmResumeModalAcceptButtonLabel}),acceptColor:"blue",icon:(0,xo().x)(p.resumeConfirmationModalIcon),mode:"wide"});t&&a({id:e,status:"active"})}(t.id),style:p.mediumBoldButton,children:[(0,Co().q)(p.warningIcon),(0,A.jsx)(d().sA,{...Wo.resumeButtonLabel})]},"btn-resume"));const S=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{children:(0,A.jsx)("span",{style:p.secondaryButtonArea,children:j})}),(0,A.jsx)("div",{children:(0,A.jsx)("span",{style:p.mainButtonArea,children:w})})]}),_=(0,A.jsx)(Mo().A,{title:(0,A.jsx)(d().sA,{...Wo.learnMoreButtonLabel}),href:"https://developers.notion.com/reference/integration-webhooks",style:p.learnMoreButton,analyticsFrom:"webhook_subscription_detail",buttonStyle:p.learnMoreInnerButton}),I=("pending"===u||f)&&(0,A.jsxs)("div",{style:p.calloutContainer,children:[(0,A.jsxs)(aa().Ye,{style:p.sectionTitle,children:[(0,Co().q)(p.calloutIcon),(0,A.jsx)(ao().A,{isMultiline:!0,children:(0,A.jsx)(d().sA,{...Vo(u)})})]}),(0,A.jsx)("div",{style:p.calloutBody,children:(0,A.jsx)(d().sA,{...Ho(u)})})]});return(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{style:p.frame,children:[(0,A.jsxs)("div",{style:p.frameBody,children:[y,I]}),(0,A.jsx)(_o().A,{size:1,dividerColor:c().Ay.dividerColor}),(0,A.jsx)("div",{style:p.frameFooter,children:S})]}),(0,A.jsx)(bo,{isOpen:n,setIsOpen:s,webhookSubscription:t,onRefetchSubscription:r,integrationId:t.integration_id,botCapabilities:l}),(0,A.jsx)("div",{style:p.belowFrameArea,children:_})]})}function Ko(e){const{botOrIntegrationPointer:t}=e,a=Vn({botOrIntegrationPointer:t}),o=function(e){let{integrationId:t}=e;const a=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]);return(0,n().K8)((()=>{if(!a||!t)return{};const e={id:t,table:fn().Li};return yt().CX.createChildStore(a,e).getCapabilities()}),[t,a])}({integrationId:null==a?void 0:a.id}),[s,l]=(0,i.useState)([]),{status:d,result:c,refetch:u}=Yn({integrationPointer:a});(0,i.useEffect)((()=>{c&&l(c)}),[c]);const[p,g]=i.useState(!1),m=(0,r().v3)(),f=(0,i.useCallback)((async e=>{const{id:t,status:a}=e;await Kn({environment:m,subscriptionId:t,status:a}),u()}),[m,u]),h=s.at(0);let v=null;return h?v=(0,A.jsx)(qo,{webhookSubscription:h,onUpdateSubscriptionStatus:f,onRefetchSubscription:u,modalIsOpen:p,setModalIsOpen:g,botCapabilities:o}):a&&(v=(0,A.jsx)(vo,{integrationId:a.id,onRefetchSubscription:u,modalIsOpen:p,setModalIsOpen:g,botCapabilities:o})),(0,A.jsx)(Zn().A,{loaded:"resolved"===d||"rejected"===d,legacySpinnerSize:20,showSpinnerTimeout:500,children:v})}async function Zo(e){var t;const{integrationFields:a,integrationListingContentfulId:i,userId:r,errors:n,setErrors:o,values:s,environment:l,actorEmail:d,isInstallationUrlOptional:c}=e;let u=!1;const p=function(e){var t,a,i,r;const{values:n}=e,o=[];return n.description||o.push("description"),n.how_to_use||o.push("how_to_use"),null!=n&&null!==(t=n.categories)&&void 0!==t&&t.length||o.push("categories"),null!=n&&null!==(a=n.features)&&void 0!==a&&a.length||o.push("features"),null!=n&&null!==(i=n.preview_images)&&void 0!==i&&i.length&&(null==n||null===(r=n.preview_images)||void 0===r?void 0:r.length)<1&&o.push("preview_images"),null!=n&&n.add_to_notion_url||e.isInstallationUrlOptional||o.push("add_to_notion_url"),o}({values:s,isInstallationUrlOptional:c});if(p.length>0){let e=n;for(const t of p)e={...e,[t]:V().A.formatMessage(q.requiredFieldError,{name:(0,At().ZH)(t.replaceAll("_"," "))})};o(e),u=!0}(null==a?void 0:a.created_by_id)!==r&&o({_general:V().A.formatMessage(q.notCreator)});const g=await async function(e){var t,a,i;const{name:r,values:n,setErrors:o,environment:s,integrationFields:l,integrationListingContentfulId:d,actorEmail:c}=e;let u=!0;null!=n&&null!==(t=n.categories)&&void 0!==t&&t.length&&n.categories.length>3&&(o({categories:V().A.formatMessage(q.maxCategoriesError)}),u=!1);null!=n&&null!==(a=n.features)&&void 0!==a&&a.length&&n.features.length>3&&(o({features:V().A.formatMessage(q.maxFeaturesError)}),u=!1);if(n.features){var p,g;const e=[];!n.features.includes("linkPreview")||null!=l&&null!==(p=l.capabilities)&&void 0!==p&&p.link_preview||e.push("Link Preview"),!n.features.includes("syncedDatabase")||null!=l&&null!==(g=l.capabilities)&&void 0!==g&&g.synced_database||e.push("Synced Database"),e.length>0&&(o({features:V().A.formatMessage(q.featuresMismatchError,{features:e.join(", ")})}),u=!1)}const m=await async function(e){const{setErrors:t,name:a,environment:i,integrationId:r,actorEmail:n}=e;let o=!0;if(!a)return t({_general:V().A.formatMessage(q.requiredFieldError,{name:"Name"})}),!1;const s=(0,N().Fn)(n);if(!s)for(const d of[...x().I5,"integration"])if(a&&a.toLowerCase().includes(d))return t({_general:V().A.formatMessage(H.disallowedWordError,{word:d,field:"Name"})}),!1;const l=await y().callApi({eventName:"validateIntegrationName",environment:i,data:{name:a,actorEmail:n,integrationId:r,locale:z().q}});"success"!==l.type&&(t({_general:V().A.formatMessage(q.nameIsTakenError)}),o=!1);return o}({name:r??"",actorEmail:c??"",setErrors:o,environment:s,integrationId:(null==l?void 0:l.id)??""});m||(u=!1);(!n.preview_images||n.preview_images.length<1)&&(o({preview_images:V().A.formatMessage(q.previewImagesRequiredError)}),u=!1);if(n.slug){const e=await async function(e){const{setErrors:t,environment:a,slug:i,contentfulId:r,integrationId:n}=e,o=function(e){return 0===e.length?V().A.formatMessage(K.slugIsEmptyError):e.length>x().od?V().A.formatMessage(K.slugTooLongError):/^[a-z0-9-]+$/.test(e)?e.startsWith("-")||e.endsWith("-")||e.includes("--")?V().A.formatMessage(K.slugHyphenError):void 0:V().A.formatMessage(K.slugCharactersError)}(i);if(o)return t({slug:o}),!1;const s=await y().callApi({eventName:"validateTemplateDraftSlug",environment:a,data:{slug:i,integrationId:n,contentfulId:r,locale:"en-US"}});if("success"!==s.type)return t({slug:V().A.formatMessage(K.slugIsTakenError)}),!1;return!0}({environment:s,slug:n.slug,contentfulId:d,integrationId:null==l?void 0:l.id,setErrors:o});e||(u=!1)}n.how_to_use&&(null===(i=n.how_to_use)||void 0===i?void 0:i.length)>x().ID&&(o({how_to_use:V().A.formatMessage(q.howToUseTooLongError)}),u=!1);n.description&&n.description.length>x().ID&&(o({description:V().A.formatMessage(q.descriptionTooLongError)}),u=!1);if(n.add_to_notion_url){new RegExp(/^(https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/g).test(n.add_to_notion_url)||(o({add_to_notion_url:V().A.formatMessage(q.invalidUrlError)}),u=!1)}return u}({values:s,setErrors:o,integrationFields:a,environment:l,integrationListingContentfulId:i,name:s.name,actorEmail:d});if(!g)return;if(u)return;const m=await y().callApi({eventName:"submitIntegrationPublishRequest",environment:l,data:{id:(null==a?void 0:a.id)??"",category_contentful_ids:s.categories??[],logo:(null==a?void 0:a.icon)??"",description:s.description??"",how_to_use:s.how_to_use??"",preview_images:(null===(t=s.preview_images)||void 0===t?void 0:t.filter((e=>!!e)))??[],features:s.features??[],add_to_notion_url:s.add_to_notion_url??"",slug:s.slug,name:s.name,icon:s.icon}});"success"===m.type&&m.data.success?he().A.setState({isOpen:!0,type:"IntegrationPublishRequestSuccess",onAccept:()=>{Ee().oo({url:Pn().JZ.creatorProfileIntegrations,environment:l})},onDismiss:()=>{Ee().oo({url:Pn().JZ.creatorProfileIntegrations,environment:l})}}):C().f1(V().A.formatMessage(q.submitError))}const $o=(0,d().YK)({securityAndCompliance:{id:"creatorProfile.integrationPublish.category.security",defaultMessage:"Security & compliance"},sales:{id:"creatorProfile.integrationPublish.category.sales",defaultMessage:"Sales"},identity:{id:"creatorProfile.integrationPublish.category.identity",defaultMessage:"Identity"},marketing:{id:"creatorProfile.integrationPublish.category.marketing",defaultMessage:"Marketing"},finance:{id:"creatorProfile.integrationPublish.category.finance",defaultMessage:"Finance"},customerExperience:{id:"creatorProfile.integrationPublish.category.customerExperience",defaultMessage:"Customer experience"},forms:{id:"creatorProfile.integrationPublish.category.forms",defaultMessage:"Forms"},fileManagement:{id:"creatorProfile.integrationPublish.category.fileManagement",defaultMessage:"File management"},engineering:{id:"creatorProfile.integrationPublish.category.engineering",defaultMessage:"Engineering"},design:{id:"creatorProfile.integrationPublish.category.design",defaultMessage:"Design"},automations:{id:"creatorProfile.integrationPublish.category.automations",defaultMessage:"Automations"},productivity:{id:"creatorProfile.integrationPublish.category.productivity",defaultMessage:"Productivity"},collaboration:{id:"creatorProfile.integrationPublish.category.collaboration",defaultMessage:"Collaboration"},communication:{id:"creatorProfile.integrationPublish.category.communication",defaultMessage:"Communication"},analytics:{id:"creatorProfile.integrationPublish.category.analytics",defaultMessage:"Analytics"}}),Yo=(0,d().YK)({workspacesEvents:{id:"creatorProfile.integrationPublish.feature.workspacesEvents",defaultMessage:"Workspace Events"},contentRedaction:{id:"creatorProfile.integrationPublish.feature.contentRedaction",defaultMessage:"Content Redaction"},permissionsRedaction:{id:"creatorProfile.integrationPublish.feature.permissionsRedaction",defaultMessage:"Permissions Redaction"},workflowAutomation:{id:"creatorProfile.integrationPublish.feature.workflowAutomation",defaultMessage:"Workflow Automation"},linkPreview:{id:"creatorProfile.integrationPublish.feature.linkPreview",defaultMessage:"Link Preview"},syncedDatabase:{id:"creatorProfile.integrationPublish.feature.syncedDatabase",defaultMessage:"Synced Database"},importer:{id:"creatorProfile.integrationPublish.feature.importer",defaultMessage:"Importer"},connectedProperty:{id:"creatorProfile.integrationPublish.feature.connectedProperty",defaultMessage:"Connected property"}}),Go={workspaceEvents:V().A.formatMessage(Yo.workspacesEvents),contentRedaction:V().A.formatMessage(Yo.contentRedaction),connectedProperty:V().A.formatMessage(Yo.connectedProperty),permissionsRedaction:V().A.formatMessage(Yo.permissionsRedaction),workflowAutomation:V().A.formatMessage(Yo.workflowAutomation),linkPreview:V().A.formatMessage(Yo.linkPreview),syncedDatabase:V().A.formatMessage(Yo.syncedDatabase),importer:V().A.formatMessage(Yo.importer)},Xo={"8btEqLBipIhzrURDtMiMp":V().A.formatMessage($o.securityAndCompliance),LrLnDt6KMdjAjuzJx3Mue:V().A.formatMessage($o.sales),"6Nnak0fGdhHnYOqbbRmGbP":V().A.formatMessage($o.identity),"4jaNdw5xVtuE1Kb7WH8VDW":V().A.formatMessage($o.marketing),"4917v9HZijGubR4nmfJdhV":V().A.formatMessage($o.finance),"2YuNhKaZMbW7vxlqx8DNef":V().A.formatMessage($o.customerExperience),"29jYzS08IK5xXF2k5R40gP":V().A.formatMessage($o.forms),"6b0oRAGgoFg76mFv6lMK1m":V().A.formatMessage($o.fileManagement),"1gyl4Y79DvZ0TM3D5FyYX5":V().A.formatMessage($o.engineering),"2xVe1cxdZe794uAIyw6Kl9":V().A.formatMessage($o.design),"6b0K7wADJ37fQorrlSQsaq":V().A.formatMessage($o.automations),"6HgHpfWS9cNQn9EXZkndTW":V().A.formatMessage($o.productivity),"3Tmdhi67ZGO3xHaaooyCgj":V().A.formatMessage($o.collaboration),"5qR7nmskJp1EvKEsGwPGjf":V().A.formatMessage($o.communication),"4Cbg47uBGFaVqIoP4yW39W":V().A.formatMessage($o.analytics)};var Qo=()=>a(508496),Jo=()=>a(784892),es=()=>a(14235),ts=()=>a(881690),as=()=>a(856952),is=()=>a(377586);function rs(){return(0,o().IS)((()=>({noCursorAllowed:{cursor:"not-allowed"},inputDisabled:{cursor:"not-allowed",backgroundColor:"rgba(0, 0, 0, 0.03)",color:"rgba(128, 128, 128, 1)"}})),[])}function ns(e){const{disabled:t,selectedIds:a=[],setSelectedIds:r,candidates:n,title:s}=e,l=(0,o().IS)((e=>({textInput:{borderRadius:Ai().A.borderRadius,background:"none"},icon:{fill:e.lightTextColor,height:"16px",width:"16px"},token:{marginLeft:"6px",color:e.regularTextColor}})),[]),c=rs(),[u,p]=(0,i.useState)(""),[g,m]=(0,i.useState)(!1),f=(0,i.useMemo)((()=>[{key:"default-features-list",render:e=>(0,A.jsx)(ii().A,{...e,title:(0,A.jsx)(d().sA,{id:"integrationSubmission.featurePicker.title",defaultMessage:"{title}",values:{title:s}}),loading:!1}),items:(void 0!==n?Object.entries(n).map((e=>{let[t,a]=e;return{id:t,name:a}})):[]).filter((e=>!(null!=a&&a.includes(e.id)))).map((e=>({key:e.id,render:t=>(0,A.jsx)(it().A,{...t,title:e.name}),action:()=>{p(""),null!=a&&a.includes(e.id)||r([...a,e.id])}})))}]),[n,a,r,s]);return(0,A.jsx)(es().Ay,{popupType:is().n.Popup,placementToOrigin:no().W.Bottom,sameWidthAsOrigin:!0,open:g,onDismiss:()=>{p(""),m(!1)},origin:(0,A.jsx)(as().Ay,{disabled:t,style:{...l.textInput,...t?c.inputDisabled:{}},focus:g,focusInitial:!1,focusAfterAnimation:!0,format:as().le.Share,inputDivStyle:{alignItems:"center"},value:u,onChange:e=>{p(e.target.value)},onClick:()=>{m(!0)},onRemoveLastToken:()=>{r([])},placeholder:"",type:"integration-features",tokens:null==a?void 0:a.map((e=>(0,A.jsx)(ts().A,{showRemoveButton:!t,isSingle:!1,style:{...l.token,...t?c.noCursorAllowed:{}},onClickRemove:t=>{t.stopPropagation(),r(a.filter((t=>t!==e)))},disabled:t,value:(0,A.jsx)("div",{style:{display:"flex"},children:n[e]}),format:Jo().NY.Small},e))),onEmptySubmit:At().D_,showBorder:!0}),render:()=>(0,A.jsx)(ye().A,{menuType:Se().gu.Popup,tokenInputHeader:!0,disableHeaderBorder:!0,maxHeight:"25dvh",children:(0,A.jsx)(ai().Ay,{type:ai().Oh.Vertical,initialFocus:0,sections:f})})})}function os(e){const{handleReset:t,handleSave:a,isFormDirty:i=!0,isLoading:r,disabled:n,hideTermsOfService:s=!1,submitCTA:l=(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.save",defaultMessage:"Save"})}=e,u=function(e){return(0,o().IS)((()=>({container:{marginTop:"12px",display:"flex",width:"100%",justifyContent:e?"flex-end":"space-between",alignItems:"center"},formActions:{display:"flex",gap:12,justifyContent:"flex-end"},terms:{fontSize:12,color:c().Ay.frontTextLight}})),[e])}(s);return(0,A.jsxs)("div",{style:u.container,children:[!s&&(0,A.jsx)("div",{style:u.terms,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.developerTermsOnSubmit",defaultMessage:"By submitting, you agree to Notion's <developerTermsLink>Developer Terms</developerTermsLink>.",values:{developerTermsLink:e=>(0,A.jsx)(ta().A,{href:Pn().JZ.developerTerms,children:e})}})}),(0,A.jsxs)("div",{style:u.formActions,children:[(0,A.jsx)(Qi().u,{disabled:n,variant:"light",onClick:t,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.cancel",defaultMessage:"Cancel"})}),(0,A.jsx)(Qi().u,{disabled:n||!i,variant:"dark",onClick:a,isLoading:r,children:l})]})]})}const ss=(0,Fe().wt)("creatorProfileUpload",{viewBox:"0 0 18 18",svg:(0,A.jsx)("g",{children:(0,A.jsx)("path",{d:"M18.125 9.375c0 1.928-1.197 3.125-3.125 3.125h-1.25v-1.875H15c.887 0 1.25-.363 1.25-1.25s-.363-1.25-1.25-1.25h-1.25V6.25c0-2.044-1.081-3.125-3.125-3.125S7.5 4.206 7.5 6.25v.625H5.625c-1.278 0-1.875.597-1.875 1.875s.597 1.875 1.875 1.875h.625V12.5h-.625c-2.313 0-3.75-1.438-3.75-3.75C1.875 6.437 3.313 5 5.625 5c.04 0 .078.003.119.006C6.2 2.662 7.98 1.25 10.625 1.25c3.084 0 5 1.916 5 5v.047c1.56.234 2.503 1.369 2.503 3.078h-.003zM5.937 13.988l1.325 1.325 1.8-1.8v5.237h1.876v-5.238l1.8 1.8 1.325-1.324L10 9.925l-4.063 4.063z"})})});var ls=()=>a(920773),ds=()=>a(429145);function cs(e){const{value:t,setValue:a,setError:i,showRemove:n=!0,dimensionsCopy:s="512 x 512",containerStyle:l={height:100,width:100},vertical:c}=e,u=(0,r().v3)(),p=function(e){return(0,o().IS)((t=>({uploadButton:{height:100,width:100,display:"flex",flexDirection:"column",justifyContent:"center",background:e?`url(${e}) no-repeat center bottom/cover`:t.accentColors.gray[30]},uploadContent:{textAlign:"center"},dimensionsText:{color:t.lightTextColor},icon:{width:18,height:18},image:{width:100,height:100,objectFit:"cover",borderRadius:4},container:{display:"flex",alignItems:"flex-start",gap:16},verticalContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:16},imagePlaceholderLoaded:{width:"fit-content"},buttonContainer:{display:"flex",flexDirection:"column",justifyContent:"center",gap:4}})),[e])}(t),{isUploading:g,uploadFile:m}=(0,ds().lN)({onError:e=>{i(e.message)},onSuccess:e=>{a(e)},environment:u}),f=c?p.verticalContainer:p.container;return t?(0,A.jsxs)("div",{style:f,children:[(0,A.jsx)(Tr().Ay,{placeholderLoadedStyle:p.imagePlaceholderLoaded,src:t,style:{...p.image,...l}}),(0,A.jsxs)("div",{style:p.buttonContainer,children:[(0,A.jsx)(Qi().u,{isLoading:g,variant:"light",onClick:m,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.imageUpload.upload",defaultMessage:"Upload image"})}),n&&(0,A.jsx)(Qi().u,{variant:"neutral",onClick:()=>{a(void 0)},children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.imageUpload.remove",defaultMessage:"Remove"})})]})]}):(0,A.jsx)(ls().p,{style:{...p.uploadButton,...l},iconStyle:p.icon,icon:ss,onClick:m,children:g?(0,A.jsx)(Si().A,{style:{marginLeft:4}}):(0,A.jsxs)("div",{style:p.uploadContent,children:[(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.imageUpload.label",defaultMessage:"Upload"}),(0,A.jsx)("br",{}),(0,A.jsx)("div",{style:p.dimensionsText,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.imageUpload.dimensions",defaultMessage:"{dimensionsCopy}",values:{dimensionsCopy:s}})})]})})}function us(e){const{values:t,setValue:a,setError:i,error:r,disabled:n}=e,s=(0,o().IS)((e=>({error:{color:e.errorText,fontSize:12,marginTop:2},image:{width:200,height:100},container:{display:"flex",gap:8},outer:{overflowX:"scroll"},helperText:{fontSize:12,fontWeight:L().Wy.regular,color:e.accentColors.gray[400],marginBottom:4},linkText:{cursor:"pointer",color:e.accentColors.gray[400]},disabled:{pointerEvents:"none",opacity:.7}})),[]),l={...s.container,...n?{...s.disabled}:{}};return(0,A.jsxs)("div",{style:s.outer,children:[(0,A.jsx)("div",{style:s.helperText,children:(0,A.jsx)(d().sA,{defaultMessage:"Recommended: Use our Figma template for high quality preview images. {figmaLink}.",id:"creatorProfile.integrationPublishRequest.previewImageUpload.helperText",values:{figmaLink:(0,A.jsx)("a",{style:s.linkText,href:"https://www.figma.com/design/9eNjv5T6ZNg4eQVcWWpszX/Integration-Gallery-Preview-Image-Templates?node-id=0-1&t=pUEQmZOJ5aHhKMpC-1",target:"_blank",children:(0,A.jsx)(d().sA,{defaultMessage:"Figma template",id:"creatorProfile.integrationPublishRequest.previewImageUpload.figmaTemplate"})})}})}),(0,A.jsxs)("div",{style:l,children:[(0,A.jsx)(cs,{value:t[0],dimensionsCopy:"1080 x 920",containerStyle:s.image,setError:i,setValue:e=>a(0,e),vertical:!0}),(0,A.jsx)(cs,{value:t[1],dimensionsCopy:"1080 x 920",containerStyle:s.image,setError:i,setValue:e=>a(1,e),vertical:!0}),(0,A.jsx)(cs,{value:t[2],dimensionsCopy:"1080 x 920",containerStyle:s.image,setError:i,setValue:e=>a(2,e),vertical:!0}),(0,A.jsx)(cs,{value:t[3],dimensionsCopy:"1080 x 920",containerStyle:s.image,setError:i,setValue:e=>a(3,e),vertical:!0})]}),r&&(0,A.jsx)("div",{style:s.error,children:r})]})}function ps(e){const{integrationPointer:t,values:a,setValues:o}=e,s=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]),l=(0,n().K8)((()=>{var e;return null===(e=b().default.state.currentUserStore)||void 0===e||null===(e=e.getModel())||void 0===e?void 0:e.email}),[]),c=(0,n().K8)((()=>{var e;return null===(e=b().default.state.currentUserStore)||void 0===e||null===(e=e.getModel())||void 0===e?void 0:e.id}),[]),[u,p]=i.useState(!1),g=(0,n().K8)((()=>{if(t&&s){const e=s.getRecordModel(t);return{name:null==e?void 0:e.getName(),id:null==e?void 0:e.id,created_by_id:null==e?void 0:e.getCreatedById(),icon:null==e?void 0:e.getInfo().icon,listing_status:null==e?void 0:e.getListingStatus(),capabilities:null==e?void 0:e.getCapabilities()}}}),[t,s]),m=(0,n().K8)((()=>kn.getState().errors),[]),f=(0,r().v3)(),h=e=>{kn.setErrors(e)},v=async()=>{p(!0),await Zo({integrationFields:g,environment:f,errors:m,setErrors:h,values:{...a,name:null==g?void 0:g.name,icon:null==g?void 0:g.icon},actorEmail:l,userId:null==s?void 0:s.userId,isInstallationUrlOptional:C}),p(!1)},x=(0,n().K8)((()=>Qo().default.getConfigKey("integration_tech_partners","tech_partner_ids")),[]),y=ms(),C=!!c&&(null==x?void 0:x.includes(c));return(0,A.jsxs)("form",{onSubmit:v,children:[(0,A.jsxs)("div",{style:y.header,children:[(0,A.jsx)(Tr().Ay,{placeholderLoadedStyle:y.imagePlaceholderLoaded,src:null==g?void 0:g.icon,style:y.image}),(0,A.jsx)(rt().D,{style:y.name,styleName:"UITitle-30px/Semibold",children:null==g?void 0:g.name})]}),(0,A.jsx)(gs,{errors:m,values:a,setValues:e=>o({...a,...e}),isSubmitting:u,setErrors:h,isInstallationUrlOptional:C}),(0,A.jsx)(rt().D,{style:y.warningText,styleName:"Body-14px/Regular",children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishRequest.disabledAfterPublish",defaultMessage:"Once your integration is submitted and approved for publishing on the Integration Gallery, you will no longer be able to update the configuration of this integration. To update the configuration, you will need to create a new integration."})}),(0,A.jsx)("div",{style:y.formActions,children:(0,A.jsx)(os,{handleSave:v,handleReset:()=>{Ee().oo({url:Pn().JZ.creatorProfileIntegrations,environment:f})},isLoading:u,submitCTA:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishRequest.submit",defaultMessage:"Submit"})})})]})}function gs(e){const{errors:t,values:a,setValues:i,isSubmitting:r=!1,disabled:n=!1,setErrors:o,isInstallationUrlOptional:s=!1}=e,l=(0,d().tz)(),c=ms();return(0,A.jsxs)("div",{style:c.container,children:[(0,A.jsx)(Mi().A,{name:l.formatMessage(q.featureLabel),htmlLabel:"features",hideLabel:!1,errorMessage:t.features,required:!0,labelStyle:c.label,children:(0,A.jsx)(ns,{selectedIds:a.features,setSelectedIds:e=>i({features:e}),title:l.formatMessage(q.featureLabel),disabled:r||n,candidates:Go})}),(0,A.jsx)(Mi().A,{name:l.formatMessage(q.categoryLabel),htmlLabel:"categories",hideLabel:!1,errorMessage:t.categories,required:!0,labelStyle:c.label,children:(0,A.jsx)(ns,{selectedIds:a.categories,setSelectedIds:e=>i({categories:e}),title:l.formatMessage(q.categoryLabel),disabled:r||n,candidates:Xo})}),(0,A.jsx)(ar().o,{htmlLabel:"description",value:a.description,placeholder:l.formatMessage(q.descriptionPlaceholder),type:"text",style:c.textInput,onChange:e=>i({description:e.target.value}),onFocus:()=>{null!=t&&t.description&&o({description:""})},textareaElementAttributes:{rows:6},labelStyle:c.label,required:!0,textarea:!0,disabled:r||n,format:or().C.Default,label:l.formatMessage(q.description),error:t.description}),(0,A.jsx)(ar().o,{htmlLabel:"how to use",value:a.how_to_use,placeholder:l.formatMessage(q.howToUsePlaceholder),required:!0,type:"text",style:c.textInput,onChange:e=>i({how_to_use:e.target.value}),onFocus:()=>{null!=t&&t.how_to_use&&o({how_to_use:""})},textareaElementAttributes:{rows:6},labelStyle:c.label,textarea:!0,disabled:r||n,format:or().C.Default,label:l.formatMessage(q.howToUse),error:t.how_to_use}),(0,A.jsx)(ar().o,{required:!s,htmlLabel:"add to notion",value:a.add_to_notion_url,placeholder:"https://www.acme.com/integration/notion-dlp",type:"text",style:c.textInput,onChange:e=>i({add_to_notion_url:e.target.value}),onFocus:()=>{null!=t&&t.add_to_notion_url&&o({add_to_notion_url:""})},labelStyle:c.label,disabled:r||n,format:or().C.Default,label:l.formatMessage(q.addToNotion),error:t.add_to_notion_url}),(0,A.jsx)(ar().o,{htmlLabel:"slug",value:a.slug,placeholder:l.formatMessage(q.slugPlaceholder),type:"text",style:c.textInput,onChange:e=>i({slug:e.target.value}),onFocus:()=>{null!=t&&t.slug&&o({slug:""})},labelStyle:c.label,disabled:r||n,format:or().C.Default,label:l.formatMessage(q.slug),error:t.slug}),(0,A.jsx)(Mi().A,{name:l.formatMessage(q.previewImages),htmlLabel:"preview_images",hideLabel:!1,required:!0,labelStyle:c.label,children:(0,A.jsx)(us,{setValue:(e,r)=>{t.preview_images&&o({preview_images:""});const n=a.preview_images??[];n.splice(e,1,r),i({preview_images:n.filter(O().Vq)})},setError:e=>o({preview_images:e}),error:t.preview_images,values:a.preview_images??[],disabled:r||n})}),t._general&&(0,A.jsx)(rt().D,{style:c.error,styleName:"Body-14px/Regular",children:t._general})]})}function ms(){return(0,o().IS)((e=>({error:{color:e.accentColors.red[500],marginBottom:8},imagePlaceholderLoaded:{width:"fit-content"},header:{marginBottom:32},formActions:{marginTop:32},warningText:{marginTop:32,color:e.accentColors.gray[400]},textInput:{background:"transparent",fontSize:14,borderRadius:4,padding:"9px"},label:{fontSize:13},disabledInput:{color:e.accentColors.gray[400],background:e.accentColors.gray[30],cursor:"not-allowed"},container:{gap:32,display:"flex",flexDirection:"column"},image:{width:100,height:100},name:{marginTop:16}})),[])}var fs=()=>a(715862);function hs(e){const{value:t}=e,[a,r]=i.useState(!1),n=()=>r(!1);return(0,A.jsx)(es().Ay,{popupType:is().n.Popup,alignmentToOrigin:no().C.Start,placementToOrigin:no().W.Bottom,originGap:2,sameWidthAsOrigin:!0,open:a,onDismiss:n,render:()=>(0,A.jsx)(vs,{...e,value:t,onClose:n}),origin:(0,A.jsx)(bs,{...e,value:t,onClick:()=>r(!0)})})}function bs(e){const{onClick:t,value:a,renderMenuItem:i}=e,r=(0,o().IS)((e=>({dropdown:{background:e.whiteButtonBackground,border:`1px solid ${e.outlineButtonBorder}`,borderRadius:6,height:32},expandIcon:{height:12,width:12,fill:e.lightIconColor}})),[]);return(0,A.jsx)(A.Fragment,{children:i({item:a,focused:!1,onClick:t,style:r.dropdown,right:(0,fs().e)(r.expandIcon)})})}function vs(e){const{keyName:t,items:a,value:i,setValue:r,renderMenuItem:n,onClose:o}=e;let s=0;const l=a.map(((e,t)=>(e.id===(null==i?void 0:i.id)&&(s=t),{key:e.id,action:()=>{r(e),o()},render:t=>n({...t,item:e})})));return(0,A.jsx)(ye().A,{menuType:Se().gu.Popup,children:(0,A.jsx)(ai().Ay,{type:ai().Oh.Vertical,initialFocus:s,sections:[{key:`form-input-section-${t}`,items:l,render:e=>(0,A.jsx)(ii().A,{...e})}]})})}function xs(e){const{label:t,subtitle:a,caption:i,error:r,children:n,field:s,formStateType:l,formFieldValidationSchema:d=W().pv}=e,u=d[s].requiredBy[l],p=(0,o().IS)((()=>({wrapper:{display:"flex"},label:{fontSize:13.5,fontWeight:L().Wy.regular,color:c().Ay.black},required:{color:c().Ay.red,marginLeft:2},subtitle:{fontSize:12,color:c().Ay.frontTextLight},caption:{fontSize:12,color:c().Ay.frontTextLight},error:{marginTop:4,fontSize:15,color:c().Ay.frontRed},field:{display:"grid",gridTemplateColumns:"1fr",gap:6,marginBottom:32}})),[]);return(0,A.jsxs)("div",{style:p.field,children:[(0,A.jsxs)("header",{style:p.wrapper,children:[(0,A.jsx)("div",{style:p.label,children:t}),u&&(0,A.jsx)("div",{style:p.required,children:"*"})]}),i&&(0,A.jsx)("div",{style:p.caption,children:i}),n,a&&(0,A.jsx)("div",{style:p.subtitle,children:a}),r&&(0,A.jsx)("div",{style:p.error,children:r})]})}var ys=()=>a(486345),Cs=()=>a(884107),ws=()=>a(739095),js=()=>a(515916),Ss=()=>a(297780);function _s(e){const{currentValue:t,setNewValue:a,typeaheadTitle:r,style:n}=e,o=t||[],[s,l]=i.useState(""),d=()=>l("");return(0,A.jsx)(es().Ay,{popupType:is().n.Popup,sameWidthAsOrigin:!0,open:s.length>0,onDismiss:d,origin:(0,A.jsx)(Ss().A,{style:{background:c().Ay.white,minHeight:32,fontSize:15},placeholder:"",value:s,onChange:e=>l(e.target.value),tokens:o.map(((e,t)=>(0,A.jsx)(ts().A,{format:Jo().NY.Medium,showRemoveButton:!0,isSingle:!1,shouldWrap:!0,value:e,style:n,onClickRemove:()=>{a(o.filter((t=>t!==e)))}},`${e}-${t}`))),onRemoveLastToken:()=>{o.length>0&&a(o.slice(0,o.length-1))}}),render:()=>{const e=s.trim(),t=(0,gn().kG)(Be().A.domainBaseUrl,e).map((e=>({key:e,render:t=>(0,A.jsx)(it().A,{...t,title:e}),action:()=>{d(),a([...o,e])}})));return(0,A.jsx)(ye().A,{menuType:Se().gu.Popup,children:(0,A.jsx)(ai().Ay,{type:ai().Oh.Vertical,initialFocus:0,sections:[{key:"valid-url-suggestion",items:t,render:e=>(0,A.jsx)(ii().A,{...e,title:r})}]})})}})}function Ms(e){const{currentRule:t,onUpdate:a,shouldShowDelete:r,onDelete:n,onError:s}=e,{name:l,regex:u,attributes:p,sampleUrls:g}=t,[m,f]=i.useState(JSON.stringify(p,null,2)),h=(0,o().IS)((()=>({container:{marginBottom:24,display:"flex",flexDirection:"column",gap:12},label:{fontSize:13.5,fontWeight:L().Wy.regular,color:c().Ay.frontTextMedium}})),[]);return(0,A.jsxs)("div",{style:h.container,children:[(0,A.jsxs)("label",{children:[(0,A.jsx)("div",{style:h.label,children:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.regexRule.name.label",defaultMessage:"Rule Name"})}),(0,A.jsx)(or().A,{inputClassName:l,style:{background:c().Ay.white,height:32,fontSize:15},value:l,onChange:e=>{a({...t,name:e.target.value})},right:r&&(0,A.jsx)(As,{onDelete:n})})]}),(0,A.jsxs)("label",{children:[(0,A.jsx)("div",{style:h.label,children:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.sampleUrls.label",defaultMessage:"Sample URLs"})}),(0,A.jsx)(_s,{currentValue:g,setNewValue:e=>{a({...t,sampleUrls:e})},style:{color:c().Ay.black},setErrorValue:e=>s(e),typeaheadTitle:(0,A.jsx)(d().sA,{id:"developerIntegrationsForm.urlsInput.typePrompt",defaultMessage:"Type or paste a url…"})})]}),(0,A.jsxs)("label",{children:[(0,A.jsx)("div",{style:h.label,children:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.regexRule.pattern.label",defaultMessage:"Pattern"})}),(0,A.jsx)(or().A,{style:{background:c().Ay.white,fontSize:15},autosize:!0,textarea:!0,value:u,onChange:e=>{a({...t,regex:e.target.value})}})]}),(0,A.jsxs)("label",{children:[(0,A.jsx)("div",{style:h.label,children:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.regexRule.attributes.label",defaultMessage:"Attributes"})}),(0,A.jsx)(or().A,{format:or().C.ExtraLarge,style:{backgroundColor:c().Ay.white},inputStyle:{fontSize:14,lineHeight:"18px",height:200,fontFamily:L().Tf.mono,padding:4},textarea:!0,value:m,onChange:e=>{const i=e.target.value;f(i);const r=(0,ws().VU)(i);void 0===r?s((0,A.jsx)(d().sA,{id:"developerIntegrationForm.jsonEditor.error",defaultMessage:"{value} attributes has invalid JSON.",values:{value:l}})):a({...t,attributes:r})}})]})]})}function As(e){let{onDelete:t}=e;return(0,A.jsx)(ve().A,{style:{padding:4,borderRadius:3},onClick:()=>{js().A.setState({open:!0,isDestructive:!1,isWarning:!0,title:(0,A.jsx)(d().sA,{id:"developerIntegrationFormRegexRule.deletionModal.title",defaultMessage:"Are you sure you want to delete this regex pattern rule?"}),message:(0,A.jsx)(d().sA,{id:"developerIntegrationFormRegexRule.deletionModal.message",defaultMessage:"Changes will not be saved until you submit the form."}),confirmationMessage:(0,A.jsx)(d().sA,{id:"developerIntegrationFormRegexRule.deletionModal.confirm",defaultMessage:"Delete"}),onConfirm:()=>{t()}})},children:(0,ei().I)({width:15,height:15})})}function Is(e,t){const{spaceStore:i,...o}=e,s=(0,r().v3)(),l=(0,n().K8)((()=>i&&(0,An().c2)(s,i)),[s,i]),d=(0,n().K8)((()=>i&&(0,An().GK)(s,i)),[s,i]);return(0,A.jsx)(it().A,{...o,ref:t,title:i&&(0,A.jsx)(a(16006).A,{store:i}),icon:i&&(0,A.jsx)(ci().A,{disabled:!0,icon:l,title:d,isEmptyPage:!1,size:19})})}const ks=i.forwardRef(Is);function Ts(e){const{secret:t,secretName:a,onCopy:i,actionButtons:r}=e;return(0,A.jsx)(or().A,{type:t?"text":"password",disabled:!0,style:{fontFamily:L().vc(Fo().locale).mono,color:c().Ay.frontTextMedium},inputStyle:t?{cursor:"text"}:void 0,value:t||" ".repeat(40),right:(0,A.jsxs)("div",{style:{display:"flex"},children:[(0,A.jsx)("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),t?(0,A.jsx)(Ps,{onCopy:i,secret:t,secretName:a}):r]})})}function Ps(e){const{secretName:t,secret:a,onCopy:n}=e,o=(0,r().v3)(),[s,l]=i.useState(!1),u=i.useCallback((async()=>{const e=await Cs().R.clipboardActions.load();e.copyString({environment:o,stringValue:a,copiedMessage:e.clipboardMessages.copiedToClipboard}),n()}),[o,n,a]),p=s?(0,A.jsx)(d().sA,{defaultMessage:"{secretName} copied",id:"formSecretShow.secretCopied.tooltip",values:{secretName:t}}):(0,A.jsx)(d().sA,{defaultMessage:"Copy {secretName}",id:"formSecretShow.copySecret.tooltip",values:{secretName:t}});return(0,A.jsx)(hr().A,{placement:no().W.Top,renderTooltip:()=>p,render:e=>(0,A.jsx)(ve().A,{onClick:e=>{e.preventDefault(),l(!0),setTimeout((()=>{l(!1)}),1500),u()},...e,style:{...Ls.button,color:s?c().Ay.mediumTextColor:c().Ay.blue},children:s?(0,A.jsx)(d().sA,{id:"formSecretShow.copied.label",defaultMessage:"Copied"}):(0,A.jsx)(d().sA,{id:"formSecretShow.copySecret.label",defaultMessage:"Copy"})})})}const Ls={button:{display:"inline-flex",alignItems:"center",fontFamily:L().vc(Fo().locale).sans,borderRadius:4,padding:"0 6px",height:24,color:c().Ay.blue}};function Ds(e){const{onError:t,bot:a}=e,n=(0,r().v3)(),o=(0,d().tz)(),s=a.id,[l,c]=i.useState(),u=i.useCallback((async()=>{const e=await y().callApi({eventName:"getBotToken",environment:n,data:{botId:s}});"success"===e.type?(_n().aS(n,{table:mn().GP}),c(e.data.token)):t((0,Ta().Hu)(o,e)??"Error fetching bot token.")}),[n,s,t,o]),p=i.useCallback((async()=>{const e=await y().callApi({eventName:"revokeBotToken",environment:n,data:{botId:s}});return"success"===e.type?{success:!0}:(t((0,Ta().Hu)(o,e)??"Error revoking bot token."),{success:!1})}),[n,s,t,o]);return(0,A.jsx)(Ts,{secret:l,secretName:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.botToken.secretName",defaultMessage:"token"}),onCopy:()=>{_n().Er(n,{table:mn().GP,from:"developer-integrations-view"})},actionButtons:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(ve().A,{onClick:()=>{!function(e){const{onConfirm:t}=e;js().A.setState({isDestructive:!1,isWarning:!1,open:!0,onConfirm:t,title:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.title",defaultMessage:"Refresh token?"}),message:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.message",defaultMessage:"Refreshing will revoke the existing token and generate a new one. Make sure you’re storing the token securely."}),confirmationMessage:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.confirm",defaultMessage:"Continue"})})}({onConfirm:async()=>{(await p()).success&&await u()}})},style:Rs.button,children:(0,A.jsx)(d().sA,{id:"developerIntegrationShotBotToken.refreshSecret.label",defaultMessage:"Refresh"})}),(0,A.jsx)(ve().A,{onClick:()=>{u()},style:Rs.button,children:(0,A.jsx)(d().sA,{id:"developerIntegrationShotBotToken.showSecret.label",defaultMessage:"Show"})})]})})}const Rs={button:{display:"inline-flex",alignItems:"center",fontFamily:L().vc(Fo().locale).sans,borderRadius:6,padding:"0 6px",height:24,color:c().Ay.blue}};function Es(e){const{onError:t,integration:a}=e,o=(0,r().v3)(),s=(0,d().tz)(),[l,c]=i.useState(),u=a.id,p=a.info.has_viewed_secret,g=(0,n().K8)((()=>b().default.state.currentUserStore),[]),m=g?(0,yt().Oo)(g,{id:u,table:fn().Li}):void 0,f=i.useCallback((async()=>{if(!m)return;const e=await y().callApi({eventName:"getIntegrationSecret",environment:o,data:{integrationId:u}});"success"===e.type?(Wn().UM({environment:o,integrationStore:m}),_n().aS(o,{table:fn().Li}),c(e.data.secret)):t((0,Ta().Hu)(s,e)??"Error fetching client secret.")}),[o,m,u,t,s]);return(0,A.jsx)(Ts,{secret:l,secretName:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.integrationSecret.secretName",defaultMessage:"secret"}),onCopy:()=>{_n().Er(o,{table:fn().Li,from:"developer-integrations-view"})},actionButtons:(0,A.jsx)(Bs,{onClick:()=>{!function(e){const{hasSecretBeenViewed:t,onConfirm:a}=e,i=t?(0,A.jsx)(d().sA,{id:"developerIntegrationForm.clientSecret.confirmationModal.refreshTitle",defaultMessage:"Refresh OAuth client secret?"}):(0,A.jsx)(d().sA,{id:"developerIntegrationForm.clientSecret.confirmationModal.showTitle",defaultMessage:"Show OAuth client secret?"}),r=t?(0,A.jsx)(d().sA,{id:"developerIntegrationForm.clientSecret.confirmationModal.alreadyViewedMessage",defaultMessage:"You’ve already viewed the client secret. Viewing again will revoke and generate a new one. Make sure you’re storing the secret securely."}):(0,A.jsx)(d().sA,{id:"developerIntegrationForm.clientSecret.confirmationModal.displayOnceMessage",defaultMessage:"This client secret will only be displayed once and cannot be viewed again. Make sure you’re storing the secret securely."});js().A.setState({isDestructive:!1,isWarning:!1,open:!0,onConfirm:a,title:i,message:r,confirmationMessage:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.clientSecret.confirmationModal.confirm",defaultMessage:"Continue"})})}({hasSecretBeenViewed:p,onConfirm:()=>{f()}})},hasSecretBeenViewed:p})})}function Bs(e){const{onClick:t,hasSecretBeenViewed:a}=e;return(0,A.jsx)(ve().A,{onClick:t,style:Fs.button,children:a?(0,A.jsx)(d().sA,{id:"formSecretShow.refreshSecret.label",defaultMessage:"Refresh"}):(0,A.jsx)(d().sA,{id:"formSecretShow.showSecret.label",defaultMessage:"Show"})})}const Fs={button:{display:"inline-flex",alignItems:"center",fontFamily:L().vc(Fo().locale).sans,borderRadius:6,padding:"0 6px",height:24,color:c().Ay.blue}};var Us=()=>a(484595),Ns=()=>a(366208);const zs=(0,d().YK)({read_comment_title:{id:"developerIntegrationForm.capabilities.read_comment.title",defaultMessage:"Read comments"},read_comment_caption:{id:"developerIntegrationForm.capabilities.read_comment.caption",defaultMessage:"Read comments on blocks and pages."},insert_comment_title:{id:"developerIntegrationForm.capabilities.insert_comment.title",defaultMessage:"Insert comments"},insert_comment_caption:{id:"developerIntegrationForm.capabilities.insert_comment.caption",defaultMessage:"Create comments on blocks and pages."},comment_capabilities_title:{id:"developerIntegrationForm.capabilities.comment_capabilities.title",defaultMessage:"Comment Capabilities"},content_capabilities_title:{id:"developerIntegrationForm.capabilities.content_capabilities.headerTitle",defaultMessage:"Content Capabilities"},user_capabilities_title:{id:"developerIntegrationForm.capabilities.user_capabilities.headerTitle",defaultMessage:"User Capabilities"},read_content_title:{id:"developerIntegrationForm.capabilities.read_content.title",defaultMessage:"Read content"},read_content_caption:{id:"developerIntegrationForm.capabilities.read_content.caption",defaultMessage:"Request to read content."},update_content_title:{id:"developerIntegrationForm.capabilities.update_content.title",defaultMessage:"Update content"},update_content_caption:{id:"developerIntegrationForm.capabilities.update_content.caption",defaultMessage:"Request to update existing content."},insert_content_title:{id:"developerIntegrationForm.capabilities.insert_content.title",defaultMessage:"Insert content"},insert_content_caption:{id:"developerIntegrationForm.capabilities.insert_content.caption",defaultMessage:"Request to create new content."},no_user_capabilities_title:{id:"developerIntegrationForm.capabilities.no_user_capabilities.title",defaultMessage:"No user information"},no_user_capabilities_caption:{id:"developerIntegrationForm.capabilities.no_user_capabilities.caption",defaultMessage:"Do not request any user information access."},read_user_without_email_title:{id:"developerIntegrationForm.capabilities.read_user_without_email.title",defaultMessage:"Read user information without email addresses"},read_user_without_email_caption:{id:"developerIntegrationForm.capabilities.read_user_without_email.caption",defaultMessage:"Request access to user information, not including email addresses."},read_user_with_email_title:{id:"developerIntegrationForm.capabilities.read_user_with_email.title",defaultMessage:"Read user information including email addresses"},read_user_with_email_caption:{id:"developerIntegrationForm.capabilities.read_user_with_email.caption",defaultMessage:"Request access to user information, including email addresses."},workspace_capabilities_title:{id:"developerIntegrationForm.capabilities.workspace_capabilities.title",defaultMessage:"Workspace Capabilities"},workspace_content_transfer_title:{id:"developerIntegrationForm.capabilities.workspace_content_transfer.title",defaultMessage:"Transfer content"},workspace_content_transfer_caption:{id:"developerIntegrationForm.capabilities.workspace_content_transfer.caption",defaultMessage:"Transfer content between workspace users"}});function Os(e,t,a){return{key:e,action:()=>null,render:r=>{const n=i=>{i.preventDefault(),a({...t,[e]:!t[e]})};return(0,i.createElement)(it().A,{...r,title:V().A.formatMessage(zs[`${e}_title`]),caption:V().A.formatMessage(zs[`${e}_caption`]),icon:(0,A.jsx)(to().A,{checked:Boolean(t[e]),size:16,onClick:n}),key:e,onClick:n})}}}function Ws(){return(0,o().IS)((()=>({basicTextInput:{background:c().Ay.white,height:32,fontSize:15},domainInputTitle:{marginTop:15,fontSize:15,fontWeight:L().Wy.regular,color:c().Ay.frontTextMedium},plainButton:{display:"flex",alignItems:"center"},icon:{width:15,height:15}})),[])}function Vs(e){return(0,o().IS)((()=>({authInput:{color:c().Ay.frontTextMedium,fontFamily:L().vc(Fo().locale).mono},authInputRight:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1},authButton:{display:"inline-flex",alignItems:"center",borderRadius:4,padding:"0 6px",height:24,color:e?c().Ay.frontTextMedium:c().Ay.blue,fontFamily:L().vc(Fo().locale).sans}})),[e])}function Hs(e){const{formData:t,setFormData:a,formStoreState:i,formFieldDetail:r,field:s,disabled:l}=e,d=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]),c=(0,n().K8)((()=>d?d.getAdminSpaceStores():[]),[d]),{type:u}=i,{label:p,subtitle:g,caption:m,sectionHeader:f,sectionSubheader:h}=r[s]??{},v=(0,o().IS)((()=>({header:{marginBottom:24,marginTop:64},sectionHeader:{fontSize:24,fontWeight:L().Wy.semibold},sectionSubheader:{fontSize:15},disabled:{pointerEvents:"none",opacity:.7}})),[]),x=qs[s];return x?(0,A.jsxs)(A.Fragment,{children:[f&&(0,A.jsxs)("div",{style:v.header,children:[(0,A.jsx)("div",{style:v.sectionHeader,children:f}),(0,A.jsx)("div",{style:v.sectionSubheader,children:h})]}),(0,A.jsx)("div",{style:l?v.disabled:void 0,children:(0,A.jsx)(xs,{label:p,subtitle:g,caption:m,error:t[s].error,field:s,formStateType:u,formFieldValidationSchema:re,children:(0,A.jsx)(x,{autoFocus:!1,spaces:c,currentValue:t[s].value,setErrorValue:e=>{a({field:s,error:e})},setNewValue:e=>{a({value:e,field:s})},formStoreState:i})},s)})]}):null}const qs={type:function(e){const{currentValue:t="create-bot",setNewValue:a}=e,i=e=>"create-bot"===e||"create-guest-integration"===e||"update-bot"===e,r=(0,o().IS)((()=>({caption:{fontSize:12,color:c().Ay.frontTextLight}})),[]);if(!i(t))return(0,A.jsx)(hs,{keyName:"type",value:{id:t,title:"Public"},setValue:e=>{i(e.id)&&a(e.id)},items:Zs,renderMenuItem:e=>{var t;return(0,A.jsx)(it().A,{...e,title:null==e||null===(t=e.item)||void 0===t?void 0:t.title,disabled:!0})}});const n=t.includes("bot")?"create-bot":"create-guest-integration";return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(hs,{keyName:"type",value:{id:n,title:Ks[n]},setValue:e=>{i(e.id)&&a(e.id)},items:Zs,renderMenuItem:e=>{var t;return(0,A.jsx)(it().A,{...e,title:null==e||null===(t=e.item)||void 0===t?void 0:t.title})}}),(0,A.jsx)("div",{style:r.caption,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.typeCaption",defaultMessage:"You can change the type of your integration at any time. Please note that switching to a public integration may require additional fields."})})]})},space:function(e){const{spaces:t,currentValue:a,setNewValue:r,setErrorValue:n,disabled:o}=e,[s,l]=i.useState(!1);return(0,i.useEffect)((()=>{s||0!==t.length||(l(!0),n((0,A.jsx)(d().sA,{id:"developerIntegrationsForm.spacePicker.missingSpacesError",defaultMessage:"You are not an owner of any workspaces. Please <linktonotion>create a new one</linktonotion> or ask your workspace owner to update your access.",values:{linktonotion:e=>(0,A.jsx)(ta().A,{href:(0,ia().xS)("guides.joinOrCreateWorkspace"),children:e})}}))),s&&t.length>0&&(l(!1),n(void 0))}),[t,n,s]),(0,A.jsx)(hs,{keyName:"space",items:t,value:a,setValue:r,renderMenuItem:e=>(0,A.jsx)(ks,{...e,spaceStore:e.item,disabled:o})})},icon:function(e){const{currentValue:t,setNewValue:a,setErrorValue:i,formStoreState:r}=e,n=r.type;return(0,A.jsx)(cs,{value:t,setError:i,setValue:a,showRemove:n.includes("bot")})},name:null,token:function(e){const t=(0,r().v3)(),{currentValue:a,setErrorValue:i}=e,o=(0,n().K8)((()=>b().default.state.currentUserStore),[]),s=(0,n().K8)((()=>{if(!o||!a)return;if(a.value.parent_table!==Sn().NX)return;const e=yt().SL.createChildStore(o,{id:a.value.parent_id,table:a.value.parent_table});return(0,An().GK)(t,e)}),[o,a,t]);return a?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Ds,{bot:a.value,onError:i}),s&&(0,A.jsx)("div",{style:{fontSize:12,color:c().Ay.frontTextLight},children:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.botToken.subtitle",defaultMessage:"Only works with the <bold>{spaceName}</bold> workspace. To change workspace, <developertermslink>create another integration</developertermslink>.",values:{spaceName:s,bold:e=>(0,A.jsx)("b",{children:e}),developertermslink:e=>(0,A.jsx)(ta().A,{href:Pn().JZ.creatorProfileIntegrations,children:e})}})})]}):null},client_id:function(e){const{currentValue:t}=e,a=(0,r().v3)(),[n,o]=i.useState(!1),s=Vs(n);if(!t)return null;const l=n?(0,A.jsx)(d().sA,{defaultMessage:"ID copied",id:"developerIntegrationsForm.clientIdCopied.tooltip"}):(0,A.jsx)(d().sA,{defaultMessage:"Copy client ID",id:"developerIntegrationsForm.copyClientId.tooltip"});return(0,A.jsx)(or().A,{type:"text",disabled:!0,style:s.authInput,value:t.value.id,right:(0,A.jsxs)("div",{style:{display:"flex"},children:[(0,A.jsx)("div",{style:s.authInputRight}),(0,A.jsx)(hr().A,{placement:no().W.Top,renderTooltip:()=>l,render:e=>(0,A.jsx)(ve().A,{onClick:async e=>{e.preventDefault(),o(!0),setTimeout((()=>{o(!1)}),1500);const i=await Cs().R.clipboardActions.load();i.copyString({environment:a,stringValue:t.value.id,copiedMessage:i.clipboardMessages.copiedLinkToClipboard})},...e,style:s.authButton,children:n?(0,A.jsx)(d().sA,{id:"developerIntegrationsForm.copiedId.label",defaultMessage:"Copied"}):(0,A.jsx)(d().sA,{id:"developerIntegrationsForm.copyId.label",defaultMessage:"Copy"})})})]})})},client_secret:function(e){const{currentValue:t,setErrorValue:a}=e;return t&&"internal"!==t.value.type?(0,A.jsx)(Es,{integration:t.value,onError:a}):null},authorization_url:function(e){const{currentValue:t}=e,a=(0,r().v3)(),[n,o]=i.useState(!1),s=Vs(n);if(!t)return null;const l=n?(0,A.jsx)(d().sA,{defaultMessage:"URL copied",id:"developerIntegrationsForm.authUrlCopied.tooltip"}):(0,A.jsx)(d().sA,{defaultMessage:"Copy authorization URL",id:"developerIntegrationsForm.authUrlCopy.tooltip"});return(0,A.jsx)(or().A,{type:"text",disabled:!0,style:s.authInput,value:t,right:(0,A.jsxs)("div",{style:{display:"flex"},children:[(0,A.jsx)("div",{style:s.authInputRight}),(0,A.jsx)(hr().A,{placement:no().W.Top,renderTooltip:()=>l,render:e=>(0,A.jsx)(ve().A,{onClick:async e=>{e.preventDefault(),o(!0),setTimeout((()=>{o(!1)}),1500);const i=await Cs().R.clipboardActions.load();i.copyString({environment:a,stringValue:t,copiedMessage:i.clipboardMessages.copiedLinkToClipboard})},...e,style:s.authButton,children:n?(0,A.jsx)(d().sA,{id:"developerIntegrationsForm.copiedAuthUrl.label",defaultMessage:"Copied"}):(0,A.jsx)(d().sA,{id:"developerIntegrationsForm.copyAuthUrl.label",defaultMessage:"Copy"})})})]})})},capabilities:function(e){const{setNewValue:t,currentValue:r,formStoreState:o}=e,s={...W().ut,...r},l=(0,n().K8)((()=>b().default.state.currentUserStore),[]),d=o.startingRecord,c=(0,n().K8)((()=>{if(!l||!d||d.table!==mn().GP)return!1;const e=d.value;if(e.parent_table!==Sn().NX||"guest"!==e.type)return!1;const t=yt().SL.createChildStore(l,{id:e.parent_id,table:e.parent_table});return t&&(0,a(979340).OX)(t.getSubscriptionTier())}),[d,l]),u={no_user_capabilities:!1===s.read_user_without_email&&!1===s.read_user_with_email,read_user_without_email:!0===s.read_user_without_email&&!1===s.read_user_with_email,read_user_with_email:!0===s.read_user_with_email};return(0,A.jsx)(ai().Ay,{type:ai().Oh.Vertical,initialFocus:void 0,sections:At().oE([{key:"content_capabilities",items:["read_content","update_content","insert_content"].map((e=>Os(e,s,t))),render:e=>(0,A.jsx)(ii().A,{...e,title:V().A.formatMessage(zs.content_capabilities_title)})},{key:"comment_capabilities",items:["read_comment","insert_comment"].map((e=>Os(e,s,t))),render:e=>(0,A.jsx)(ii().A,{...e,title:V().A.formatMessage(zs.comment_capabilities_title)})},c&&{key:"workspace_capabilities",items:["workspace_content_transfer"].map((e=>Os(e,s,t))),render:e=>(0,A.jsx)(ii().A,{...e,title:V().A.formatMessage(zs.workspace_capabilities_title)})},{key:"user_capabilities",items:["no_user_capabilities","read_user_without_email","read_user_with_email"].map((e=>function(e,t,a,r){return{key:e,action:()=>null,render:n=>(0,i.createElement)(it().A,{...n,title:V().A.formatMessage(zs[`${e}_title`]),caption:V().A.formatMessage(zs[`${e}_caption`]),icon:(0,A.jsx)(Us().A,{isSelected:t}),key:e,onClick:t=>{t.preventDefault(),r({...a,read_user_without_email:"no_user_capabilities"!==e,read_user_with_email:"read_user_with_email"===e})}})}}(e,u[e],s,t))),render:e=>(0,A.jsx)(ii().A,{...e,title:V().A.formatMessage(zs.user_capabilities_title)})}])})},template_url:$s,redirect_uris:function(e){return(0,A.jsx)(_s,{...e,style:{color:c().Ay.frontTextMedium},typeaheadTitle:(0,A.jsx)(d().sA,{id:"developerIntegrationsForm.redirectUri.typePrompt",defaultMessage:"Type a redirect uri…"})})},tagline:$s,privacy_policy_url:$s,terms_of_use_url:$s,email:$s,developer_name:$s,website_url:$s,unfurl_url:$s,domain:function(e){const{currentValue:t,autoFocus:i,setNewValue:n,formStoreState:o,setErrorValue:s}=e,l=(0,r().v3)(),c=(0,d().tz)(),u=Ws();if("update-third-party-external-integration"!==o.type&&"update-first-party-external-integration"!==o.type)return null;const{developmentDomain:p,verifiedDomains:g,domainVerifications:m}=t||{developmentDomain:"",verifiedDomains:[],domainVerifications:[]},f=g.map((e=>({domain:e,status:Ns().A$.Success,data:{type:"verified",domain:e}}))),h=Date.now(),b=m.filter(ys().sy).sort(((e,t)=>e.createdAt-t.createdAt)).map((e=>({domain:e.domain,status:h>e.expiresAt?Ns().A$.Failure:Ns().A$.Pending,data:{...e,type:h>e.expiresAt?"invalid":"unverified"}}))),v=o.startingRecord.value.id;async function x(){const e=await y().callApi({eventName:"getIntegrationDomainVerifications",environment:l,data:{integrationId:v}});if("success"===e.type){const t=fa().RecordMapWithRole.create(e.data.recordMap),i=a(813690).xb.fromRecordMapWithRole(t),r=e.data.verificationIds.map((e=>i({table:wn().Hx,id:e}))).filter(O().O9).map(ys().pl).filter((e=>"verified"!==e.type));n({developmentDomain:p,verifiedDomains:g,domainVerifications:r})}}return"update-third-party-external-integration"===o.type?(0,A.jsx)(a(375243).Ay,{domains:[...f,...b],domainVerificationStore:o.domainVerificationStore,verificationType:"integration",verificationTargetId:v,refreshDomains:x,onRemoveDomain:async function(e){if("verified"!==e.type){const t=await y().callApi({eventName:"deleteDomainVerificationCode",environment:l,data:{id:e.id}});"failed"===t.type&&s(t.error.message),await x()}else Wn().dK({environment:l,integrationId:v,allVerifiedDomains:g,domainToRemove:e.domain})}}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:u.domainInputTitle,children:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.domain.developmentDomain.label",defaultMessage:"Development domain"})}),(0,A.jsx)(or().A,{autoFocus:i,style:u.basicTextInput,value:p,onChange:e=>n({verifiedDomains:g,domainVerifications:m,developmentDomain:e.target.value})}),(0,A.jsx)("div",{style:u.domainInputTitle,children:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.domain.verifiedDomains.label",defaultMessage:"Verified domain(s)"})}),(0,A.jsx)(Ss().A,{placeholder:c.formatMessage({id:"domainVerificationInput.domainInput.placeholder",defaultMessage:"No domains configured"}),value:"",onChange:At().lQ,onRemoveLastToken:At().lQ,readOnly:!0,tokens:f.map((e=>{let{domain:t,status:a}=e;return(0,A.jsx)(Ns().Ay,{status:a,showRemoveButton:!1,isSingle:!1,format:Jo().NY.Medium,value:t},t)}))})]})},url_matching_and_placeholder:function(e){const{currentValue:t,setNewValue:i,setErrorValue:r}=e,n=Ws();return(0,A.jsxs)(A.Fragment,{children:[null==t?void 0:t.map(((e,a)=>(0,A.jsx)(Ms,{currentRule:e,shouldShowDelete:0!==a,onUpdate:e=>{i([...t.slice(0,a),e,...t.slice(a+1)])},onDelete:()=>{0!==a&&i([...t.slice(0,a),...t.slice(a+1)])},onError:r},`regex-rule-${a}`))),(0,A.jsxs)(M().p,{style:n.plainButton,isBlue:!0,onClick:e=>{e.preventDefault(),i([...t??[],a(939482).dZ])},children:[(0,Xn().W)(n.icon),(0,A.jsx)(d().sA,{id:"developerIntegrationsForm.regexPatternRulesInput.addMore.label",defaultMessage:"Add another rule"})]})]})},external_oauth_authorize_url:$s,external_oauth_token_url:$s,external_client_id:$s,external_client_secret:function(e){const{autoFocus:t,currentValue:a,setNewValue:i}=e,r=Ys();return(0,A.jsx)(or().A,{type:"password",autoFocus:t,style:r.basicTextInput,value:a,onChange:e=>i(e.target.value)})},external_oauth_scopes:$s,external_deletion_url:$s},Ks={"create-bot":V().A.formatMessage(H.internalIntegrationLabel),"create-guest-integration":V().A.formatMessage(H.publicIntegrationLabel)},Zs=[{id:"create-bot",title:"Internal"},{id:"create-guest-integration",title:"Public"}];function $s(e){const{autoFocus:t,currentValue:a,setNewValue:i}=e,r=Ys();return(0,A.jsx)(or().A,{autoFocus:t,style:r.basicTextInput,value:a,onChange:e=>i(e.target.value)})}function Ys(){return(0,o().IS)((e=>({basicTextInput:{background:e.white,height:32,fontSize:15}})),[])}var Gs=()=>a(946548);function Xs(e){const{label:t,subtitle:a,onClick:i,isDisabled:r,isActive:n,labelStyles:s={},subtitleStyles:l={}}=e,d=(0,o().IS)((e=>({label:{fontSize:15,color:e.lightTextColor,display:"flex",justifyContent:"space-between"},subtitle:{fontSize:15,color:e.lightTextColor,paddingTop:15}})),[]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{style:{...d.label,...s},children:[t,(0,A.jsx)(Gs().A,{onClick:i,on:n,disabled:r})]}),(0,A.jsx)("div",{style:{...d.subtitle,...l},children:a})]})}function Qs(e){const{integrationFormStore:t,formData:a,setFormData:r,formFieldDetail:s,disabled:l}=e,c=(0,n().K8)((()=>t.getState().type),[t]),u=(0,n().K8)((()=>{var e;return null===(e=t.getState().startingRecord)||void 0===e?void 0:e.value.id}),[t]),p=ee.includes(c)||l,g=te.includes(c),[m,f]=(0,i.useState)(g),h=(b=u,{key:"unfurling",title:V().A.formatMessage(H.unfurlingSectionTitle),subtitle:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.sectionCaption.unfurling",defaultMessage:"Visit the <previewlab>Link Preview Lab</previewlab> to plan out unfurling previews and responses.",values:{previewlab:e=>{if(!b)return"";const t=Wn().zA({table:fn().Li,id:b});return(0,A.jsx)(ta().A,{external:!1,href:t,children:e})}}}),fields:J});var b;const v="create-third-party-external-integration"===c?[el]:[el,h],x=(0,n().K8)((()=>t.getState()),[t]),y=v.map((e=>({...e,fields:e.fields.filter((e=>{const{supportedBy:t}=re[e];return t[c]}))}))),C=(0,o().IS)((()=>({sectionHeader:{fontSize:24,fontWeight:L().Wy.semibold,marginBottom:24},switcherSubtitle:{paddingTop:8,fontSize:12},switcher:{justifyContent:"flex-end",alignItems:"center",flexDirection:"row-reverse",gap:8}})),[]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:C.sectionHeader,children:(0,A.jsx)(d().sA,{defaultMessage:"Link Preview",id:"creatorProfile.manageIntegration.linkPreview.title"})}),(0,A.jsx)(Xs,{onClick:()=>{const e=m?"public":"unfurling";f(!m),t.updateRecordTypeOnSwitch(e),r({field:"icon",error:void 0})},label:V().A.formatMessage(H.unfurlingSwitcherLabel),subtitle:(0,A.jsx)(d().sA,{id:"creatorProfile.manageIntegration.linkPreview.switcher.subtitle",defaultMessage:"Unfurl external data inside Notion. Requires additional fields to configure the matching URL pattern and interface."}),isActive:m,isDisabled:p,labelStyles:C.switcher,subtitleStyles:C.switcherSubtitle}),m&&(0,A.jsx)(A.Fragment,{children:y.map((e=>(0,A.jsx)(i.Fragment,{children:e.fields.map((e=>(0,A.jsx)(Hs,{formData:a,setFormData:r,formStoreState:x,formFieldDetail:Js("unfurl_url",h.subtitle,s),field:e,disabled:l},e)))},e.key)))})]})}function Js(e,t,a){return{...a,[e]:{...null==a?void 0:a[e],sectionSubheader:t}}}const el={key:"external_oauth",title:V().A.formatMessage(H.externalOauthSectionTitle),fields:Q};const tl=[{tabName:"configuration",tabTitle:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationManagement.tabs.configuration",defaultMessage:"Configuration"},"creatorProfile.integrationManagement.tabs.configuration")},{tabName:"basicInformation",tabTitle:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationManagement.tabs.basicInformation",defaultMessage:"Basic information"},"creatorProfile.integrationManagement.tabs.basicInformation")}],al={tabName:"listing",tabTitle:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationManagement.tabs.listing",defaultMessage:"Listing information"},"creatorProfile.integrationManagement.tabs.listing")},il={tabName:"webhooks",tabTitle:(0,A.jsxs)(eo().Y1,{direction:"horizontal",gap:4,align:"center",children:[(0,A.jsx)(d().sA,{id:"creatorProfile.integrationManagement.tabs.webhooks",defaultMessage:"Webhooks"},"creatorProfile.integrationManagement.tabs.webhooks"),(0,A.jsx)(a(147294).E,{newBadgeKey:"integration_webhooks",didUserEngage:!1})]})};function rl(e){const{tabIndex:t,setTabIndex:a,tabs:i}=e;return(0,A.jsx)(Pe().Ay,{tabs:i.map((e=>{let{tabTitle:t}=e;return t})),selectedIndex:t,onChange:e=>a(e)})}const nl=function(){return(0,A.jsx)(d().sA,{id:"developerIntegrationForm.domainVerification.caption",defaultMessage:"Development and verified domains for URLs to unfurl with this integration. Domains must be verified before publishing to users. See the <textlink>Notion documentation</textlink> for more verification process.",values:{textlink:e=>(0,A.jsx)(ta().A,{href:"https://developers.notion.com/docs/building-a-link-preview#domain-verification",external:!0,children:e})}})};function ol(e){switch(e){case"create-bot":return{formFields:["name","space","type","icon"],fieldDetails:{type:{label:V().A.formatMessage(H.integrationTypeLabel)},space:{label:V().A.formatMessage(H.spaceLabel),subtitle:V().A.formatMessage(H.spaceSubtitle)},icon:{label:V().A.formatMessage(H.integrationLogoLabel)}}};case"create-guest-integration":return{formFields:["name","space",...ll.formFields,"icon","redirect_uris","template_url"],fieldDetails:{space:{label:V().A.formatMessage(H.spaceLabel),subtitle:V().A.formatMessage(H.spaceSubtitle)},icon:{label:V().A.formatMessage(H.integrationLogoLabel)},...ll.fieldDetails}};default:return{formFields:[],fieldDetails:{}}}}const sl={unfurl_url:{sectionHeader:V().A.formatMessage(H.unfurlUrlSectionHeader),label:V().A.formatMessage(H.unfurlUrlLabel),caption:V().A.formatMessage(H.unfurlUrlCaption)},domain:{label:V().A.formatMessage(H.domainLabel),caption:(0,A.jsx)(nl,{})},url_matching_and_placeholder:{label:V().A.formatMessage(H.urlMatchingAndPlaceholderLabel),caption:V().A.formatMessage(H.urlMatchingAndPlaceholderCaption)},external_oauth_authorize_url:{label:V().A.formatMessage(H.externalOauthAuthorizeUrlLabel),caption:V().A.formatMessage(H.externalOauthAuthorizeUrlCaption),sectionHeader:V().A.formatMessage(H.externalOauthSectionTitle),sectionSubheader:(0,A.jsx)(d().sA,{id:"creatorProfile.manageIntegration.linkPreview.sectionSubtitle.external_oauth",defaultMessage:"See <textlink>Notion documentation</textlink> for information on <authlink>OAuth 2.0.</authlink>",values:{textlink:e=>(0,A.jsx)(ta().A,{href:"https://developers.notion.com/docs/build-a-link-preview-integration",external:!0,children:e}),authlink:e=>(0,A.jsx)(ta().A,{href:"https://datatracker.ietf.org/doc/html/rfc6749",external:!0,children:e})}})},external_oauth_token_url:{label:V().A.formatMessage(H.externalOauthTokenUrlLabel),caption:V().A.formatMessage(H.externalOauthTokenUrlCaption)},external_oauth_scopes:{label:V().A.formatMessage(H.externalOauthScopesLabel),caption:V().A.formatMessage(H.externalOauthScopesCaption)},external_client_id:{label:V().A.formatMessage(H.externalClientIdLabel)},external_client_secret:{label:V().A.formatMessage(H.externalClientSecretLabel)},external_deletion_url:{label:V().A.formatMessage(H.externalDeletionUrlLabel),caption:V().A.formatMessage(H.externalDeletionUrlCaption)}},ll={formFields:["name","type","developer_name","website_url","tagline","privacy_policy_url","terms_of_use_url","email"],fieldDetails:{type:{label:V().A.formatMessage(H.integrationTypeLabel)},developer_name:{label:V().A.formatMessage(H.developerNameLabel)},website_url:{label:V().A.formatMessage(H.websiteUrlTypeLabel)},privacy_policy_url:{label:V().A.formatMessage(H.privacyPolicyTypeLabel),subtitle:V().A.formatMessage(H.privacyPolicyTypeSubtitle)},terms_of_use_url:{label:V().A.formatMessage(H.termsOfUseTypeLabel),subtitle:V().A.formatMessage(H.termsOfUseTypeSubtitle)},tagline:{label:V().A.formatMessage(H.taglineTypeLabel)},email:{label:V().A.formatMessage(H.emailLabel),subtitle:V().A.formatMessage(H.emailSubtitle)},redirect_uris:{label:V().A.formatMessage(H.redirectUrisTypeLabel),subtitle:V().A.formatMessage(H.redirectUrisTypeSubtitle),sectionHeader:V().A.formatMessage(H.oauthSectionHeader)},template_url:{label:V().A.formatMessage(H.templateUrlTypeLabel),subtitle:V().A.formatMessage(H.templateUrlTypeSubtitle)}}},dl={formFields:["publish"],fieldDetails:{}};const cl=function(e){const{formData:t,setFormData:a,disabled:i}=e,r=(0,d().tz)(),n=function(){const{isMobileWidth:e}=(0,m().LS)();return(0,o().IS)((()=>({titleInput:{fontSize:e?30:36,lineHeight:e?"34px":"40px",fontWeight:L().Wy.semibold},errorMessage:{fontSize:15},label:{fontSize:13.5,fontWeight:L().Wy.regular,color:c().Ay.black}})),[e])}();return(0,A.jsx)(ar().o,{labelStyle:n.label,htmlLabel:"integrationName",label:(0,A.jsx)(d().sA,{defaultMessage:"Integration Name",id:"creatorProfile.integrationSubmission.integrationName"}),disabled:i,errorMessageStyle:n.errorMessage,shouldHideLabel:Boolean(i),error:t.name.error,placeholder:r.formatMessage({defaultMessage:"Add integration name",id:"creatorProfile.integrationSubmission.namePlaceholder"}),inputStyle:n.titleInput,value:t.name.value,onChange:e=>{a({value:e.target.value,field:"name"})},type:"text",focusInitial:!1,onFocus:()=>{a({field:"name",error:""})}})};function ul(e){var t;const a=(0,o().IS)((()=>({errorMessage:{fontSize:15},label:{height:1},icon:{marginBottom:24}})),[]),s=(0,d().tz)(),{integrationFormStore:c,setIsConvertingToPublic:u,botOrIntegrationPointer:p}=e,[g,m]=i.useState(0),[f,h]=i.useState(!1),v=(0,r().v3)(),x=(0,n().K8)((()=>kn.getState()),[]),w=(0,n().K8)((()=>c.getState()),[c]),S=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]),_=(0,n().K8)((()=>{var e;return null===(e=b().default.state.currentUserStore)||void 0===e||null===(e=e.getModel())||void 0===e?void 0:e.email}),[]),M=(0,n().K8)((()=>{if(p&&S){return!!S.getRecordModel({table:Rn().bh,id:(0,gn().Ry)({integrationId:p.id,locale:"en-US"})})}return!1}),[p,S]),I=w.type,k=x.listing_status,T=function(e){const{botOrIntegrationPointer:t}=e,a=Vn({botOrIntegrationPointer:t}),i=(0,r().v3)(),[{value:n}]=(0,l().Yb)((async()=>{if(!a)return!1;const e=await y().callApi({eventName:"checkWebhookEligibility",environment:i,data:{integrationId:a.id}});if("failed"===e.type)return!1;const{data:{isEligible:t}}=e;return t}),[a,i]);return Boolean(n)}({botOrIntegrationPointer:p}),P=(0,i.useMemo)((()=>[...tl,...k?[al]:[],...T?[il]:[]]),[k,T]),L=P[g].tabName,D="pending"===x.listing_status||"configuration"===L&&M,[R,E]=i.useReducer(W().Ud,W().dg),B=Hn(),F=(0,n().K8)((()=>{if(p&&S){const e=S.getRecordModel({table:Rn().bh,id:(0,gn().Ry)({integrationId:p.id,locale:"en-US"})});return null==e?void 0:e.getContentfulId()}}),[p,S]),U=(0,n().K8)((()=>{if(p&&S&&p.table===fn().Li){const e=S.getRecordModel(p);return{name:null==e?void 0:e.getName(),id:null==e?void 0:e.id,icon:null==e?void 0:e.getInfo().icon,listing_status:null==e?void 0:e.getListingStatus(),created_by_id:null==e?void 0:e.getCreatedById(),capabilities:null==e?void 0:e.getCapabilities()}}}),[p,S]),N=e=>{kn.setErrors(e)},z=async()=>{if(h(!0),"listing"===L)await Zo({integrationFields:U,environment:v,errors:x.errors,setErrors:N,values:{...x,name:R.name.value,icon:R.icon.value},userId:null==S?void 0:S.userId,integrationListingContentfulId:F,actorEmail:_}),h(!1);else{const t=q.filter((e=>"link_preview"!==e));"configuration"===L&&(ae.includes(I)&&t.push(...Q),ie.includes(I)||t.push(...J));const a=await B(R);if(G({formData:R,formStateType:I,setFormData:E,formFields:t,templateStore:a,actorEmail:_}))return void h(!1);try{if(!Wn().E9({environment:v,formState:w,formData:(0,W().F3)(R)}))throw new Error("Record pointer is undefined");j().D6({label:s.formatMessage({id:"creatorProfile.integrationUpdate.successMessage",defaultMessage:"Integration updated successfully"})})}catch(e){C().f1(s.formatMessage({id:"creatorProfile.integrationUpdate.errorMessages.submitError",defaultMessage:"There was an error updating the integration"})),zn().log({level:"error",from:"CreatorProfileIntegrationUpdate",type:"updateError",error:(0,On().n6)(e)})}finally{h(!1)}}},{formFields:q,fieldDetails:K}=null===(t=function(e){switch(e){case"update-bot":return{configuration:{formFields:["name","token","capabilities"],fieldDetails:{token:{label:V().A.formatMessage(H.tokenTypeLabel)},capabilities:{label:"",sectionHeader:V().A.formatMessage(H.capabilitiesTypeHeader),sectionSubheader:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,A.jsx)(ta().A,{href:"https://developers.notion.com/docs/authorization",children:e})}})}}},basicInformation:{formFields:["name","type"],fieldDetails:{type:{label:V().A.formatMessage(H.integrationTypeLabel)},space:{label:V().A.formatMessage(H.spaceLabel),subtitle:V().A.formatMessage(H.spaceSubtitle)}}},listing:{formFields:[],fieldDetails:{}},webhooks:{formFields:[],fieldDetails:{}}};case"update-compliance-integration":return{configuration:{formFields:["name","client_id","client_secret","authorization_url","icon","external_oauth_authorize_url","external_oauth_token_url","external_client_id","external_client_secret","external_oauth_scopes","external_deletion_url"],fieldDetails:{token:{label:V().A.formatMessage(H.tokenTypeLabel)},capabilities:{label:"",sectionHeader:V().A.formatMessage(H.capabilitiesTypeHeader),sectionSubheader:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,A.jsx)(ta().A,{href:"https://developers.notion.com/docs/authorization",children:e})}})},client_id:{label:V().A.formatMessage(H.externalClientIdLabel)},client_secret:{label:V().A.formatMessage(H.externalClientSecretLabel)},icon:{label:V().A.formatMessage(H.integrationLogoLabel)},authorization_url:{label:V().A.formatMessage(H.authorizationUrlLabel)},...sl}},basicInformation:{formFields:[...ll.formFields,"redirect_uris","template_url"],fieldDetails:ll.fieldDetails},listing:dl,webhooks:{formFields:[],fieldDetails:{}}};default:return{configuration:{formFields:["name","client_id","client_secret","authorization_url","capabilities","link_preview"],fieldDetails:{token:{label:V().A.formatMessage(H.tokenTypeLabel)},capabilities:{label:"",sectionHeader:V().A.formatMessage(H.capabilitiesTypeHeader),sectionSubheader:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,A.jsx)(ta().A,{href:"https://developers.notion.com/docs/authorization",children:e})}})},client_id:{label:V().A.formatMessage(H.externalClientIdLabel)},client_secret:{label:V().A.formatMessage(H.externalClientSecretLabel)},authorization_url:{label:V().A.formatMessage(H.authorizationUrlLabel)},...sl}},basicInformation:{formFields:[...ll.formFields,"redirect_uris","template_url"],fieldDetails:ll.fieldDetails},listing:dl,webhooks:{formFields:[],fieldDetails:{}}}}}(I))||void 0===t?void 0:t[L],[Z,$]=(0,i.useState)({});(0,i.useEffect)((()=>{if(!S)return;(async()=>{const e=await(0,W()._H)({formStoreState:c.getState(),userRootStore:S,environment:v,initialUrlMatchingAndPlaceholder:[]});$(e);for(const t of(0,O().uv)(e))E({field:t,value:e[t]})})()}),[S,v,c]),(0,i.useEffect)((()=>{E({field:"type",value:I})}),[I]);let Y=!0;"configuration"!==L&&"basicInformation"!==L||(Y=(0,O().uv)(R).some((e=>"type"!==e&&!(0,At().n4)(R[e].value,Z[e])))),(0,i.useEffect)((()=>{"create-guest-integration"===R.type.value&&he().A.setState({isOpen:!0,type:"IntegrationInternalToPublicConfirmation",onAccept:()=>{c.updateRecordTypeOnSwitch("public"),u(!0)},onDismiss:()=>{c.updateRecordTypeOnSwitch("internal"),u(!1),E({field:"type",value:"update-bot"})}})}),[v,R.type.value,c,u]);const X="pending"===x.listing_status||"webhooks"===L;return(0,A.jsxs)("form",{onSubmit:z,children:[(0,A.jsx)("div",{style:a.icon,children:(0,A.jsx)(Hs,{field:"icon",setFormData:E,formData:R,formStoreState:w,formFieldDetail:{...K,icon:{...K.icon,label:V().A.formatMessage(H.integrationLogoLabel)}},disabled:X})}),(0,A.jsx)(cl,{disabled:X,formData:R,setFormData:E}),(0,A.jsx)(je().A,{size:32}),(0,A.jsx)(rl,{tabIndex:g,setTabIndex:m,tabs:P}),(0,A.jsx)(je().A,{size:32}),"webhooks"===L?(0,A.jsx)(Ko,{botOrIntegrationPointer:p}):q.map((e=>function(e){const{field:t,integrationFormStore:a,formData:i,setFormData:r,fieldDetails:n,formStoreState:o,disabled:s,integrationPointer:l,listingValues:d,listingErrors:c}=e;if("link_preview"===t)return(0,A.jsx)(Qs,{integrationFormStore:a,formData:i,setFormData:r,formFieldDetail:n,disabled:s},t);if("publish"===t){const e=e=>{kn.setValues(e)},t=e=>{kn.setErrors(e)};return(null==l?void 0:l.table)===fn().Li?(0,A.jsx)(gs,{setValues:e,values:d,errors:c,setErrors:t,disabled:s}):null}const u="client_id"===t||"client_secret"===t||"authorization_url"===t;return(0,A.jsx)(Hs,{formData:i,setFormData:r,formStoreState:o,field:t,formFieldDetail:n,disabled:!u&&s},t)}({field:e,integrationFormStore:c,formData:R,setFormData:E,fieldDetails:K,formStoreState:w,listingData:x,disabled:D,integrationPointer:p,listingErrors:x.errors,listingValues:{description:x.description,how_to_use:x.how_to_use,features:x.features,categories:x.categories,slug:x.slug,preview_images:x.preview_images,add_to_notion_url:x.add_to_notion_url}}))),"webhooks"===L?null:(0,A.jsx)(os,{handleSave:z,handleReset:async()=>{const e=await(0,W()._H)({formStoreState:c.getState(),userRootStore:S,environment:v});for(const t of(0,O().uv)(e))E({field:t,value:e[t]})},isFormDirty:Y,isLoading:f,disabled:D||!Y,hideTermsOfService:!0,submitCTA:"listing"===L?(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishRequest.save",defaultMessage:"Submit to Gallery"}):void 0})]})}function pl(e){const t=(0,d().tz)(),{integrationFormStore:a,setIsConvertingToPublic:o}=e,s="create-guest-integration",l=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]),c=(0,n().K8)((()=>a.getState()),[a]),u=(0,n().K8)((()=>{var e;return null===(e=b().default.state.currentUserStore)||void 0===e||null===(e=e.getModel())||void 0===e?void 0:e.email}),[]),p=(0,r().v3)(),[g,m]=i.useReducer(W().Ud,W().dg),{formFields:f,fieldDetails:h}=ol(s),v=(0,O().WP)(g).filter((e=>{let[t,a]=e;return f.includes(t)&&"type"!==t})).some((e=>{let[t,a]=e;return!!a.value})),x=Hn(),y=async()=>{const e=await x(g);if(G({formData:g,formStateType:s,setFormData:m,formFields:f,templateStore:e,actorEmail:u}))return;if("create-guest-integration"!==c.type)return void C().f1(t.formatMessage({id:"creatorProfile.integrationSubmission.errorMessages.submitError",defaultMessage:"There was an error creating the integration"}));const a=Wn().E9({environment:p,formState:c,formData:(0,W().F3)(g)});if(!a)return void C().f1(t.formatMessage({id:"creatorProfile.integrationSubmission.errorMessages.submitError",defaultMessage:"There was an error creating the integration"}));const i=()=>{const e={[mn().GP]:"internal",[fn().Li]:"public"}[a.table];Ee().oo({environment:p,url:`${Pn().JZ.creatorProfileIntegrations}/${e}/${a.id}`})};he().A.setState({isOpen:!0,type:"IntegrationConversionSuccess",onDismiss:i,onAccept:i})};(0,i.useEffect)((()=>{if(!l)return;(async()=>{const e=await(0,W()._H)({formStoreState:a.getState(),userRootStore:l,environment:p});for(const t of(0,O().uv)(e))m({field:t,value:e[t]});m({field:"type",value:s})})()}),[l,p,a]);return(0,A.jsxs)("form",{onSubmit:y,children:[(0,A.jsx)(cl,{formData:g,setFormData:m}),(0,A.jsx)(je().A,{size:32}),f.map(((e,t)=>(0,A.jsx)(Hs,{formData:g,setFormData:m,formStoreState:c,field:e,formFieldDetail:h,disabled:"type"===e},e+t))),(0,A.jsx)(os,{handleSave:y,handleReset:()=>{a.updateRecordTypeOnSwitch("internal"),o(!1)},isFormDirty:v})]})}function gl(e){var t;const a=(0,r().v3)(),{botOrIntegrationPointer:o}=e,[s,d]=i.useState(!1),{loadedFormState:c,integrationFormStore:u,spaceName:p}=function(e){const{botOrIntegrationPointer:t,existingFormStore:a}=e,o=(0,r().v3)(),s=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]),d=(0,n().uB)(a,bn),c=(0,n().K8)((()=>d.getState().type),[d]),u=(0,n().K8)((()=>d.getState().startingRecord),[d]),p=(0,n().K8)((()=>d.getState().status),[d]),g=(0,n().K8)((()=>{const e=(0,Mn().o8)();return(0,W().PF)(c,e)}),[c]),[m,f]=(0,i.useState)("secrets"),h="published"===p&&"secrets"!==m,v=(0,n().K8)((()=>{if(t&&s){const e=t.table,a=s.getRecordValue(t);if(a){const i=e===fn().Li&&((0,Cn().Hx)(a.capabilities)||(0,Cn().EK)(a.capabilities))&&s.getRecordValue({table:jn().Ps,id:t.id});return{botOrIntegrationRecord:{value:a,table:t.table},maybeExternalAuthRecord:i?{table:jn().Ps,value:i}:void 0}}}}),[s,t]),[{value:x}]=(0,l().Yb)((async()=>{if(!s||!v||v.botOrIntegrationRecord.table!==fn().Li)return[];const e=v.botOrIntegrationRecord.value.id,t=await y().callApi({eventName:"getIntegrationDomainVerifications",environment:o,data:{integrationId:e}});if("success"===t.type)return t.data.verificationIds.map((e=>s.getRecordValue({table:wn().Hx,id:e}))).filter(O().O9);if("failed"===t.type)throw t.error;return(0,O().HB)(t)}),[o,v,s]);(0,i.useEffect)((()=>{if(!v)return;const{botOrIntegrationRecord:e,maybeExternalAuthRecord:t}=v;d.initializeNewForm(e,t,x||[]),_n().X2(o,{table:e.table})}),[d,o,v,x]);const C=(0,n().K8)((()=>{if(!s||!v)return;const{botOrIntegrationRecord:e}=v;if(e.value.parent_table!==Sn().NX)return;const t=yt().SL.createChildStore(s,{id:e.value.parent_id,table:e.value.parent_table});return(0,An().GK)(o,t)}),[v,s,o]);return{loadedFormState:(0,yn().L)({value:u}),selectedPage:m,integrationFormStore:d,setSelectedPage:f,showPublishedIntegrationWarning:h,supportedPages:g,spaceName:C}}(e),g=c.value;if((0,i.useEffect)((()=>{if(g&&g.table===fn().Li){var e;const t=g.value.info.gallery_listing_info,a=g.value.info.installation_url||g.value.info.installation_info_url;kn.setState({description:Z(null==t?void 0:t.description),how_to_use:Z(null==t?void 0:t.how_to_use),features:null==t?void 0:t.features,categories:null==t?void 0:t.tags,add_to_notion_url:a,slug:null==t?void 0:t.slug,preview_images:null==t||null===(e=t.preview_images)||void 0===e?void 0:e.map((e=>e.url)),errors:{},listing_status:g.value.listing_status})}else kn.setState(kn.getInitialState())}),[g]),"pending"===c.status)return(0,A.jsx)(vn().A,{});if("rejected"===c.status||!o)return(0,A.jsx)(Tn,{});const m=a.currentUser.id;return(null==g?void 0:g.table)===fn().Li&&(null==g||null===(t=g.value)||void 0===t?void 0:t.parent_id)!==m?(0,A.jsx)(xn().A,{}):s?(0,A.jsx)(pl,{integrationFormStore:u,setIsConvertingToPublic:d}):(0,A.jsxs)("main",{children:[(0,A.jsx)(Bn,{integrationId:o.id}),(0,A.jsx)(ul,{integrationFormStore:u,spaceName:p,botOrIntegrationPointer:o,setIsConvertingToPublic:d})]})}function ml(){const e=(0,o().IS)((e=>({readFaq:{cursor:"pointer",color:e.regularTextColor,fontWeight:L().Wy.semibold},linkStyles:{color:e.regularTextColor,textDecoration:"none"}})),[]);return(0,A.jsx)("span",{style:e.readFaq,children:(0,A.jsx)("a",{style:e.linkStyles,href:"https://developers.notion.com",children:(0,A.jsx)(d().sA,{defaultMessage:"Learn more",id:"creatorProfile.integrations.listLink"})})})}const fl=function(){const e=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"space-between",gap:24,flexWrap:"wrap"},topContainer:{display:"flex",flexDirection:"column",gap:4},sidebarHeader:{fontSize:18,fontWeight:L().Wy.semibold,color:e.regularTextColor},sidebarDescription:{fontSize:14,color:e.lightTextColor,fontWeight:L().Wy.regular},createButtonColor:{background:e.white},faq:{display:"flex",color:e.lightTextColor,gap:8}})),[]);return(0,A.jsx)("div",{style:e.container,children:(0,A.jsx)(De().y,{size:"large",header:(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.pageHeader",defaultMessage:"Integrations"}),subHeader:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.pageHeaderSubtitle",defaultMessage:"Create, review, and edit development information and credentials."}),(0,A.jsxs)("div",{style:e.faq,children:[(0,A.jsx)(d().sA,{defaultMessage:"Integrations use the API to access Notion's pages, databases, and users. ",id:"creatorProfile.templates.listSubheader"}),(0,A.jsx)(ml,{})]})]})})})};var hl=()=>a(239820),bl=()=>a(720665),vl=()=>a(495249);var xl=()=>a(798880);function yl(e){const{record:t,hasCreatorProfile:a}=e,i=(0,o().IS)((e=>({iconText:{fontSize:28},icon:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",borderRadius:"6px"},subtitleType:{fontSize:12,fontWeight:L().Wy.semibold},subtitleCreatedBy:{fontSize:12,color:e.lightTextColor},subtitle:{display:"flex",alignItems:"center"}})),[]),s=(0,r().v3)(),l=(0,n().K8)((()=>b().default.state.currentUserStore),[]),c=(0,n().K8)((()=>t.name??""),[t]),u=(0,n().K8)((()=>t.table===fn().Li?t.getInfo().icon:t.icon),[t]),p=(0,n().K8)((()=>t.table===fn().Li&&("external"===t.getType()||"guest"===t.getType())),[t]),g=function(e){const t=(0,d().tz)(),a=(0,n().K8)((()=>b().default.state.currentUserStore),[]),i=(0,n().K8)((()=>{if(!a)return;if(e.created_by_id===a.id)return(0,A.jsx)(d().sA,{id:"developerIntegrationCard.createdByTagline.creatorIsUser",defaultMessage:"Created by you"});const i=yt().LU.createChildStore(a,{table:xl().oo,id:e.created_by_id}),r=i.getModel();return i.isReady()&&r?(0,A.jsx)(d().sA,{id:"developerIntegrationCard.createdByTagline.placeholder",defaultMessage:"Created by {userFullDisplayName}",values:{userFullDisplayName:r.getFullName(t)}}):void 0}),[a,e,t]);return i}(t),m=En(t.id);if(!l)return null;const f=(0,yt().Oo)(l,{id:t.id,table:t.table}),h=function(e){const t=e.table===fn().Li;return`${Pn().JZ.creatorProfileIntegrations}/${t?"public":"internal"}/${e.id}`}(t.pointer);return(0,A.jsxs)(Ur,{actions:(0,A.jsxs)(Vr,{imageType:"square",extraLeftSpacing:25,children:[(0,A.jsx)(Qi().u,{variant:"neutral",onClick:()=>{he().A.setState({isOpen:!0,type:"DeleteIntegrationConfirmation",modalButtonType:"destructive",onAccept:()=>function(e){const{recordStore:t,environment:a}=e;_n().uj(a,{table:t.table}),Wn().ZY({environment:a,recordStore:t}).then((()=>{j().D6({label:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationDeletion.snackbar.success",defaultMessage:"Integration deleted"})})})).catch((()=>{j().D6({label:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationDeletion.snackbar.fail",defaultMessage:"Error deleting integration. Please try again"})})}))}({recordStore:f,environment:s})})},children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationDeletion.hover.deleteButton",defaultMessage:"Delete"})}),(0,A.jsx)(Qi().u,{variant:"light",href:h,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationDeletion.hover.editButton",defaultMessage:"Edit Settings"})}),p&&!m.listingStatus&&(0,A.jsx)(Qi().u,{variant:"dark",onClick:()=>{a?Ee().oo({url:`${Pn().JZ.creatorProfileIntegrations}/public/${t.id}/publish`,environment:s}):he().A.setState({isOpen:!0,type:"CreatorProfileRequired",onAccept:()=>Ee().oo({url:Pn().JZ.creatorProfile,environment:s})})},children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublish.hover.submitButton",defaultMessage:"Submit to Gallery"})})]}),href:h,children:[(0,A.jsx)(Nr,{type:"integration",imageSrc:u,node:u?null:(0,A.jsx)("div",{style:i.icon,children:(0,A.jsx)("span",{style:i.iconText,children:c[0]})})}),(0,A.jsx)(Wr,{title:(0,A.jsx)(Hr,{templateName:c,templateStatus:m.listingStatus?X(m.listingStatus,m.integrationListingModel):void 0}),subtitle:(0,A.jsxs)("div",{style:i.subtitle,children:[(0,A.jsx)("div",{style:i.subtitleType,children:p?(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.subtitlePublic",defaultMessage:"Public Integration"}):(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.subtitleInternal",defaultMessage:"Internal Integration"})})," ","·"," ",(0,A.jsx)("div",{style:i.subtitleCreatedBy,children:(0,A.jsx)("div",{style:i.subtitleCreatedBy,children:g})})]})})]})}const Cl={all:(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.allFilter.label",defaultMessage:"View all"}),internal:(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.internalFilter.label",defaultMessage:"Internal"}),public:(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.publicFilter.label",defaultMessage:"Public"})},wl=function(e){const{setFilter:t,filter:a}=e,i=(0,o().IS)((e=>({filterButton:{fontSize:15,height:28,marginBottom:16,width:"fit-content"},selectedFilterButton:{color:c().Ay.frontText,fontWeight:L().Wy.medium}})),[]),n=(0,r().v3)(),s={onSelect:e=>{t(e),_n().hO(n,{type:e})},items:[...vl().Tl],renderOrigin:e=>(0,A.jsxs)(M().p,{...e,children:[Cl[a],(0,A.jsx)(we().Q,{iconGroup:be().I,variantName:"mini"})]}),getKey:e=>e,renderItem:e=>(0,A.jsx)(it().A,{...e,title:Cl[e.value]}),selectedItem:a};return(0,A.jsx)("div",{style:i.filterButton,children:(0,A.jsx)(nt().A,{...s})})};function jl(e){let{children:t}=e;const a=(0,o().IS)((()=>({integrationCardGrid:{display:"flex",flexDirection:"column",gap:"28px"},integrationCardGridMobile:{display:"flex",flexDirection:"column",gap:"40px"}})),[]),{isMobileWidth:i}=(0,m().LS)();return(0,A.jsx)("div",{style:{...i?a.integrationCardGridMobile:a.integrationCardGrid},children:t})}function Sl(){const e=(0,r().v3)(),t=(0,o().IS)((e=>({newIntegrationTitle:{color:e.mediumTextColor},icon:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",background:e.accentColors.gray[30],borderRadius:"6px"}})),[]),[a,s]=i.useState([]),[c,u]=i.useState([]),p=Boolean((0,fe().x)()),g=(0,n().K8)((()=>b().default.state.currentUserStore),[]),m=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]),f=(0,n().K8)((()=>m?m.getAdminSpaceStores():[]),[m]),[h,v]=i.useState("all");i.useEffect((()=>{s([]),u([])}),[e.currentUser.id]),i.useEffect((()=>{_n().KD(e)}),[e]);const[{value:x,status:C}]=(0,l().Yb)((async()=>{const t=f.map((e=>e.id)),a=await y().callApi({eventName:"getDeveloperBotsAndIntegrations",environment:e,data:{ownedSpaceIds:t}});if("success"===a.type)return a.data;if("failed"===a.type)throw zn().log({level:"error",from:"creatorProfile",type:"IntegrationLoadError",data:{message:`Cannot load user integrations and bots ${a.error}`}}),a.error;return(0,O().HB)(a)}),[e,f]),w=null==x?void 0:x.integrationIds;i.useEffect((()=>{w&&s((e=>(0,bl().sb)([...e,...w])))}),[w]);const j=null==x?void 0:x.botIds;i.useEffect((()=>{j&&u((e=>(0,bl().sb)([...e,...j])))}),[j]);const S=(0,n().K8)((()=>{if(g){return(0,vl().ud)({ids:a,table:fn().Li,userStore:g}).filter((e=>e.alive))}return[]}),[g,a]),_=(0,n().K8)((()=>{if(g){return(0,vl().ud)({ids:c,table:mn().GP,userStore:g}).filter((e=>e.alive))}return[]}),[g,c]),M=(0,n().K8)((()=>(0,vl().Dz)([...S,..._])),[S,_]),I=(0,n().K8)((()=>({all:M,internal:_,public:S}[h])),[h,M,_,S]);return"pending"===C?(0,A.jsx)(vn().A,{}):(0,A.jsxs)("section",{children:[0===I.length&&(0,A.jsx)(De().y,{header:(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.listHeaderNew",defaultMessage:"Create a new integration"}),subHeader:null,size:"medium"}),(0,A.jsx)(wl,{filter:h,setFilter:v}),(0,A.jsxs)(jl,{children:[(0,A.jsxs)(Ur,{href:"/profile/integrations/form/new-integration",onClick:()=>_n().$u(e),children:[(0,A.jsx)(Nr,{type:"integration",node:(0,A.jsx)("div",{style:t.icon,children:(0,A.jsx)(we().Q,{overrideSize:e=>2.25*e,variantName:"default",colorName:"secondary",iconGroup:hl().E})})}),(0,A.jsx)(Wr,{title:(0,A.jsx)("div",{style:t.newIntegrationTitle,children:(0,A.jsx)(d().sA,{defaultMessage:"New integration",id:"creatorProfile.integrations.newIntegration"})})})]}),I.map((e=>(0,A.jsx)(yl,{hasCreatorProfile:p,record:e},e.id)))]})]})}var _l=()=>a(645873);const Ml=new(_l().O2)("integrations",(async()=>{const[{default:e}]=await Promise.all([Promise.all([a.e(39600),a.e(45758)]).then(a.bind(a,146828))]);return{DeveloperIntegrationLab:e}})),Al=(0,_l()._h)(Ml,(e=>e.DeveloperIntegrationLab));function Il(e){const{botOrIntegrationPointer:t}=e,a=(0,n().K8)((()=>{const{description:e,slug:t,how_to_use:a,preview_images:i,add_to_notion_url:r,features:n,categories:o}=kn.getInitialState();return{description:e,slug:t,how_to_use:a,preview_images:i,add_to_notion_url:r,features:n,categories:o}}),[]),[r,o]=i.useState(a);return(0,A.jsx)(ps,{integrationPointer:t,values:r,setValues:o})}function kl(e){const{botOrIntegrationPointer:t,isPublish:a,isLab:i,integrationFormStore:r}=e;return a?(null==t?void 0:t.table)===fn().Li&&t?(0,A.jsx)(Il,{botOrIntegrationPointer:t}):null:i?(null==t?void 0:t.table)===fn().Li&&t?(0,A.jsx)(Al,{integrationPointer:t}):null:(0,A.jsx)(gl,{botOrIntegrationPointer:t,integrationsFormStore:r})}function Tl(e){const t=(0,d().tz)(),{integrationFormStore:a}=e,[o,s]=i.useState("create-bot"),l=(0,n().K8)((()=>a.getState()),[a]),c=(0,r().v3)(),u=(0,n().K8)((()=>b().default.state.currentUserStore),[]),p=(0,n().K8)((()=>{var e;return null==u||null===(e=u.getModel())||void 0===e?void 0:e.email}),[u]),[g,m]=i.useReducer(W().Ud,W().dg),[{formFields:f,fieldDetails:h},v]=i.useState((()=>ol(o))),x=Object.entries(g).filter((e=>{let[t,a]=e;return f.includes(t)&&"type"!==t})).some((e=>{let[t,a]=e;return!!a.value})),y=Hn(),w=async()=>{const e=await y(g);if(G({formData:g,formStateType:o,setFormData:m,formFields:f,templateStore:e,actorEmail:p}))return;if("create-bot"!==l.type&&"create-guest-integration"!==l.type)return void C().f1(t.formatMessage({id:"creatorProfile.integrationSubmission.errorMessages.submitError",defaultMessage:"There was an error creating the integration"}));const a=Wn().GA({environment:c,formState:l,formData:(0,W().F3)(g)});if(!a)return void C().f1(t.formatMessage({id:"creatorProfile.integrationSubmission.errorMessages.submitError",defaultMessage:"There was an error creating the integration"}));const i=()=>{const e={[mn().GP]:"internal",[fn().Li]:"public"};Ee().oo({environment:c,url:`${Pn().JZ.creatorProfileIntegrations}/${e[a.table]}/${a.id}`})};he().A.setState({isOpen:!0,type:"IntegrationSuccessCreation",onAccept:i,onDismiss:i})};return(0,i.useEffect)((()=>{m({value:"create-bot",field:"type"})}),[]),(0,i.useEffect)((()=>{const e=g.type.value;e&&(s(e),v(ol(e)),a.updateCreationFormType(e))}),[a,g.type.value]),(0,A.jsxs)("form",{onSubmit:w,children:[(0,A.jsx)(cl,{formData:g,setFormData:m}),(0,A.jsx)(je().A,{size:32}),f.map(((e,t)=>(0,A.jsx)(Hs,{formData:g,setFormData:m,formStoreState:l,field:e,formFieldDetail:h},e+t))),(0,A.jsx)(os,{handleSave:w,handleReset:()=>{a.reset(),Ee().oo({environment:c,url:Pn().GJ.creatorProfileIntegrations})},isFormDirty:x})]})}function Pl(e){const{botOrIntegrationPointer:t,isPublish:a,isLab:i}=e,r=(0,n().uB)(void 0,bn),o=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]),s=(0,n().K8)((()=>{if(t&&o){const e=o.getRecordModel(t);return null==e?void 0:e.getName()}}),[o,t]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(pa,{route:"/profile/integrations",exact:!0,children:[(0,A.jsx)(fl,{}),(0,A.jsx)(Sl,{})]}),(0,A.jsxs)(pa,{route:"/profile/integrations/form/new-integration",exact:!0,children:[(0,A.jsx)(sa,{hideProfile:!0}),(0,A.jsx)(Tl,{integrationFormStore:r})]}),(0,A.jsxs)(pa,{route:"/profile/integrations/public/",children:[(0,A.jsx)(sa,{hideProfile:!0,displayName:s}),(0,A.jsx)(kl,{botOrIntegrationPointer:t,isPublish:a,isLab:i,integrationFormStore:r})]}),(0,A.jsxs)(pa,{route:"/profile/integrations/internal/",children:[(0,A.jsx)(sa,{hideProfile:!0,displayName:s}),(0,A.jsx)(gl,{botOrIntegrationPointer:t,integrationsFormStore:r})]}),(0,A.jsx)(pn().A,{})]})}const Ll={CreatorProfileModal:new(_l().O2)("CreatorProfileModal",(async()=>await a.e(22931).then(a.bind(a,705199))))},Dl=(0,_l()._h)(Ll.CreatorProfileModal,(e=>e.default));var Rl=()=>a(471987),El=()=>a(192249),Bl=()=>a(829764),Fl=()=>a(430287);var Ul=()=>a(83489),Nl=()=>a(583835),zl=()=>a(638681);zl().object({required:{webhookUrl:zl().string()},optional:{}});const Ol=(0,Nl().Dv)("testMarketplaceWebhook");var Wl=()=>a(357625),Vl=()=>a(317909),Hl=()=>a(963589),ql=()=>a(87726),Kl=()=>a(735577),Zl=()=>a(167749),$l=()=>a(337073),Yl=()=>a(390575);function Gl(e){Xl({value:e,validationFunction:e=>{if(""!==e&&!(0,Kl().A)(e))throw new(Ii().rT)("Webhook URL invalid",{type:"template_creator_webhook_url_invalid"})},fieldName:"webhookUrlErrorMessage"})}function Xl(e){const{value:t,validationFunction:a,fieldName:i}=e;try{a(t)}catch(r){if((0,Ii().V4)(r)){const t=(0,Ta().DX)(V().A.getIntl(),r.body);t&&Ql("linksErrorMessage"===i?{fieldName:i,errorMessage:t,linkIndex:e.linkIndex}:{fieldName:i,errorMessage:t})}}}function Ql(e){const{fieldName:t,errorMessage:a}=e;if("linksErrorMessage"===t){const i=La.getState().linksErrorMessage;i[e.linkIndex]=a,La.setState({...La.getState(),[t]:[...i]})}else La.setState({...La.getState(),[t]:a})}function Jl(e){const{errorFieldName:t}=e;if("linksErrorMessage"===t){const a=La.getState().linksErrorMessage;a[e.linkIndex]=void 0,La.setState({...La.getState(),[t]:a})}else La.setState({...La.getState(),[t]:void 0})}function ed(e){let t=[];if(e.length<5){const a=5-e.length;t=[...Array(a)].map((()=>""))}return[...e,...t]}function td(e){return e.preventDefault(),e.returnValue=""}function ad(){return(0,A.jsx)(d().sA,{defaultMessage:"Save",id:"creatorProfile.confirmNavigation.confirm"})}function id(){return(0,A.jsx)(d().sA,{defaultMessage:"Discard and Exit",id:"creatorProfile.confirmNavigation.reject"})}function rd(){return(0,A.jsx)(d().sA,{defaultMessage:"Continue",id:"creatorProfile.confirmNavigation.confirm.continue"})}function nd(){return(0,A.jsx)(d().sA,{defaultMessage:"Keep Editing",id:"creatorProfile.confirmNavigation.reject.edit"})}function od(e){const{isActive:t,onAccept:a,onReject:r,onFinal:n,acceptLabel:s,rejectLabel:l}=e,{onBeforeViewChange:u}=$e(),p=(0,o().IS)((()=>({header:{fontSize:"24px",lineHeight:"30px",fontWeight:L().Wy.bold,display:"flex",gap:"16px",flexDirection:"column"},description:{color:c().Ay.black}})),[]),g=(0,i.useMemo)((()=>({message:(0,A.jsxs)("div",{style:p.header,children:[(0,mr().Q)({height:"28px",width:"28px",color:"rgba(234, 79, 68, 1)"}),(0,A.jsx)(d().sA,{defaultMessage:"Unsaved changes",id:"creatorProfile.confirmNavigation.header"})]}),description:(0,A.jsx)("div",{style:p.description,children:(0,A.jsx)(d().sA,{defaultMessage:"Your changes will be discarded if you exit this page without saving.",id:"creatorProfile.confirmNavigation.description"})}),acceptLabel:s,cancelLabel:l})),[p.description,p.header,s,l]),m=(0,i.useCallback)((()=>async function(e){const{isActive:t,onAccept:a,onReject:i,onFinal:r,userActionArgs:n}=e;t&&((await C().Gh(n)).accept?await a():await i(),await r())}({isActive:t,onAccept:async()=>{await a()},onReject:async()=>{r&&await r()},onFinal:async()=>{n&&await n(),u.current=null},userActionArgs:g})),[t,a,u,n,r,g]);(0,i.useEffect)((()=>(t?(u.current=m,window.addEventListener("beforeunload",td)):(u.current=null,window.removeEventListener("beforeunload",td)),()=>{u.current=null,window.removeEventListener("beforeunload",td)})),[t,u,m])}var sd=()=>a(382479);function ld(e){return(0,n().K8)((()=>{const t=e.state,a=t.initialValues,i=(0,O().uv)(a).reduce(((e,a)=>({...e,[a]:t[a]})),{});return!(0,At().n4)(i,a)}),[e])}function dd(e){const{onboardingStatus:t,setOnboardingStatus:a}=e,i=(0,o().IS)((e=>({sectionTitle:{fontSize:24,fontWeight:L().Wy.semibold},sectionSubtitle:{fontSize:15,fontWeight:455},red_circle:{color:"#D30000"},light_green_circle:{color:"#1Fd655"},dark_green_circle:{color:"#0B6E4F"},yellow_circle:{color:"#FFF200"},black_circle:{color:"#000000"},delayText:{fontSize:12,color:e.lightTextColor,width:"max-content"},container:{display:"flex",flexDirection:"column",gap:4,alignSelf:"flex-start",width:"max-content"},inlineLink:{color:e.regularTextColor,fontWeight:L().Wy.bold},caption:{fontSize:12,color:"rgba(17, 17, 17, 0.5)"},inlineEmailLink:{color:"rgba(17, 17, 17, 0.5)",fontWeight:L().Wy.semibold}})),[]),r=(0,d().tz)();return(0,A.jsxs)(eo().Y1,{gap:16,padding:"0 0 24px 0",width:"hug",children:[(0,A.jsxs)(eo().Y1,{gap:2,children:[(0,A.jsx)("div",{style:i.sectionTitle,children:r.formatMessage(cd.sellWithNotionTitle)}),(0,A.jsx)("div",{style:i.sectionSubtitle,children:r.formatMessage(cd.sellWithNotionSubtitle,{link:e=>(0,A.jsx)(ta().A,{href:Pn().JZ.sellerOnboardingLearnMore,external:!0,style:i.inlineLink,disableUnderline:!0,children:e})})})]}),(0,A.jsxs)(eo().Y1,{gap:10,direction:"vertical",align:"center-left",width:"hug",children:[(0,A.jsx)(za,{onboardingStatus:t,setOnboardingStatus:a}),(0,A.jsx)("div",{style:i.caption,children:r.formatMessage(cd.sellWithNotionCaption,{link:e=>(0,A.jsx)(ta().A,{href:`mailto:${x().hj}`,external:!0,style:i.inlineEmailLink,disableUnderline:!0,children:e})})})]})]})}const cd=(0,d().YK)({sellWithNotionTitle:{id:"creatorProfileForm.seller.onboarding.title",defaultMessage:"Sell with Notion"},beginOnboarding:{id:"creatorProfileForm.seller.onboarding.begin",defaultMessage:"Begin {accountType} Onboarding"},status:{id:"creatorProfileForm.seller.onboarding.status",defaultMessage:"Onboarding Status: {status}"},stripeDashboard:{id:"creatorProfileForm.seller.onboarding.dashboard",defaultMessage:"Seller Dashboard"},delayText:{id:"creatorProfileForm.seller.onboarding.delayText",defaultMessage:"Please allow a few minutes for onboarding status to update"},sellWithNotionSubtitle:{id:"creatorProfileForm.seller.onboarding.commissionDisclaimer",defaultMessage:"Process payments via Notion with a low commission rate. <link>Learn more</link>"},sellWithNotionCaption:{id:"creatorProfileForm.seller.onboarding.caption",defaultMessage:"Notion has partnered with Stripe to provide a seamless payment experience for creators. If you run into any issues, please contact <link>templates@makenotion.com</link>."}});function ud(){return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.form.deleteSuccess",defaultMessage:"Template deleted successfully"})})}function pd(){return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.draft.form.discardSuccess",defaultMessage:"Template draft discarded successfully"})})}function gd(){return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.form.save.success",defaultMessage:"Profile updated successfully"})})}function md(){return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfileActions.createCreatorProfileSuccess",defaultMessage:"Profile created successfully. You can now upload templates and submit them to the Marketplace."})})}var fd=()=>a(360083);const hd=(0,d().YK)({uploadAvatar:{id:"creatorProfileForm.avatarUploadButton.label",defaultMessage:"Upload profile picture"}}),bd=function(e){const{disabled:t}=e,s=(0,r().v3)(),l=(0,o().IS)((e=>({uploader:{display:"flex",gap:15,alignItems:"center",justifyContent:"left"},uploadedImageContainer:{width:"56px",height:"56px"},uploadedImage:{width:"56px",height:"56px",objectFit:"cover",borderRadius:"50%",background:"rgba(0, 0, 0, 0.08)"},buttonsContainer:{display:"flex",alignItems:"center",gap:8},removeButton:{fontSize:13.5,color:e.lightTextColor},loadingSpinner:{marginLeft:4},avatarEmptyStateContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:"56px",width:"56px",borderRadius:"50%",background:"rgba(0, 0, 0, 0.08)"},avatarEmptyState:{height:"40px",width:"40px",fill:"white"}})),[]),c=(0,n().K8)((()=>La.state.image),[]),u=(0,i.useCallback)((e=>La.setState({...La.state,image:e})),[]),p=(0,i.useCallback)((e=>{La.setState({...La.state,image:c||""}),C().f1(e.message),"upload"===e.type&&zn().log({level:"error",from:"TemplateCreatorSubmissionFormIconUpload",type:"uploadError",error:(0,On().n6)(e)})}),[c]),{uploadFile:g,isUploading:m}=(0,ds().lN)({onSuccess:u,onError:p,environment:s}),f=(0,i.useCallback)((()=>{La.setState({...La.state,image:""})}),[]);return(0,A.jsxs)("div",{style:l.uploader,children:[c?(0,A.jsx)(fd().A,{url:c,isAuthenticated:!1,stripGoogleIconQuery:!0,width:56,render:(e,t)=>(0,A.jsx)("div",{style:l.uploadedImageContainer,children:(0,A.jsx)(Tr().Ay,{src:t,style:l.uploadedImage})})}):(0,A.jsx)("div",{style:l.avatarEmptyStateContainer,children:(0,a(91451).z)(l.avatarEmptyState)}),(0,A.jsxs)("div",{style:l.buttonsContainer,children:[(0,A.jsxs)(Qi().u,{disabled:m||t,onClick:g,variant:"light",children:[(0,A.jsx)(d().sA,{...hd.uploadAvatar}),m&&(0,A.jsx)(Si().A,{style:l.loadingSpinner})]}),c?(0,A.jsx)(Qi().u,{disabled:m||t,variant:"neutral",style:l.removeButton,onClick:f,children:(0,A.jsx)(d().sA,{id:"templateCreator.removeButton.label",defaultMessage:"Remove"})}):null]})]})};function vd(e){const{actionType:t,handleUpload:a,handleRemove:i,isUploading:r,isDisabled:n}=e,o=xd();return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(Qi().u,{disabled:n,onClick:a,variant:"light",children:["change"===t?(0,A.jsx)(d().sA,{...yd.changeCoverImage}):(0,A.jsx)(d().sA,{...yd.uploadCoverImage}),r&&(0,A.jsx)(Si().A,{style:o.loadingSpinner})]}),"change"===t?(0,A.jsx)(Qi().u,{disabled:n,variant:"light",onClick:i,children:(0,A.jsx)(d().sA,{id:"templateCreator.removeButton.label",defaultMessage:"Remove"})}):null]})}function xd(){return(0,o().IS)((e=>({uploader:{display:"flex",gap:15,alignItems:"center",marginBottom:"8px"},uploadedImage:{width:"100%",height:"100%",objectFit:"cover"},loadingSpinner:{marginLeft:4},uploadActionContainer:{right:8,bottom:8,position:"absolute",gap:8,display:"flex"},imagePreviewContainer:{width:"100%",height:"auto",aspectRatio:4,position:"relative",background:"rgba(0, 0, 0, 0.08)",display:"flex",justifyContent:"center",borderRadius:"6px",overflow:"hidden"},uploadEmptyState:{textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"2px"},uploadEmptyStateIcon:{height:18,width:18,fill:"rgba(102, 102, 102, 1)",paddingBottom:"2px"},uploadEmptyStateTitle:{fontSize:"13.5px",weight:554,lineHeight:"19px",color:"rgba(102, 102, 102, 1)"},uploadEmptyStateSubtitle:{fontSize:"12px",weight:459,lineHeight:"17px",color:"rgba(17, 17, 17, 0.5)"}})),[])}const yd=(0,d().YK)({uploadCoverImage:{id:"creatorProfileForm.coverPhotoUploadButton.label",defaultMessage:"Upload cover image"},changeCoverImage:{id:"creatorProfileForm.coverPhotoUploadButton.label.change",defaultMessage:"Change cover image"}}),Cd=function(e){const{disabled:t}=e,a=(0,n().K8)((()=>La.state.coverImage),[]),o=(0,i.useCallback)((e=>{La.setState({...La.state,coverImage:e})}),[]),s=(0,i.useCallback)((e=>{La.setState({...La.state,coverImage:""}),C().f1(e.message),"upload"===e.type&&zn().log({level:"error",from:"TemplateCreatorSubmissionFormCoverPhotoUpload",type:"uploadError",error:(0,On().n6)(e.error)})}),[]),l=(0,r().v3)(),c=xd(),{uploadFile:u,isUploading:p}=(0,ds().lN)({onSuccess:o,onError:s,environment:l}),g=(0,i.useCallback)((()=>{La.setState({...La.state,coverImage:""})}),[]);return(0,A.jsx)("div",{style:c.uploader,children:a?(0,A.jsx)(fd().A,{url:a,isAuthenticated:!1,stripGoogleIconQuery:!0,width:650,render:(e,a)=>(0,A.jsxs)("div",{style:c.imagePreviewContainer,children:[(0,A.jsx)(Tr().Ay,{src:a,style:c.uploadedImage}),(0,A.jsx)("div",{style:c.uploadActionContainer,children:(0,A.jsx)(vd,{handleUpload:u,handleRemove:g,isUploading:p,isDisabled:p||!!t,actionType:"change"})})]})}):(0,A.jsxs)("div",{style:c.imagePreviewContainer,children:[(0,A.jsxs)("div",{style:c.uploadEmptyState,children:[(0,A.jsx)("div",{children:ss(c.uploadEmptyStateIcon)}),(0,A.jsx)("div",{style:c.uploadEmptyStateTitle,children:(0,A.jsx)(d().sA,{defaultMessage:"Upload Header Image",id:"creatorProfile.coverImage.uploadEmptyState"})}),(0,A.jsx)("div",{style:c.uploadEmptyStateSubtitle,children:(0,A.jsx)(d().sA,{defaultMessage:"1920 × 480 • Max 2MB",id:"creatorProfile.coverImage.uploadEmptyStateInfo"})})]}),(0,A.jsx)("div",{style:c.uploadActionContainer,children:(0,A.jsx)(vd,{actionType:"upload",handleUpload:u,isUploading:p,isDisabled:p||!!t})})]})})},wd=150;function jd(e){var t;const{type:a,templateCreatorProfile:o,marketplaceSellerProfile:s}=e,l=(0,d().tz)(),c=(0,r().v3)(),u=kd(),p=Id(),{setView:g}=$e(),m=(0,i.useRef)(null),f=(0,i.useRef)(null),h=(0,fe().x)(),[v,x]=(0,i.useState)(!1),[w,S]=(0,i.useState)(!1),[_,M]=(0,i.useState)(!1),[I,k]=(0,i.useState)(""),[T,P]=(0,i.useState)(1),[L,D]=(0,i.useState)((null==h?void 0:h.stripe_connect_onboarding_phase)??"disabled"),R=ra(),E=(0,Hl().X)("enable_marketplace_seller")&&R,{name:B,handle:F,contactEmail:U,creatorDescription:N,nameErrorMessage:z,handleErrorMessage:W,contactEmailErrorMessage:H,creatorDescriptionErrorMessage:q,linksErrorMessage:K,contactEmailToggleError:Z,webhookUrl:$,webhookUrlErrorMessage:Y}=(0,n().K8)((()=>{const{name:e,handle:t,contactEmail:a,creatorDescription:i,nameErrorMessage:r,handleErrorMessage:n,contactEmailErrorMessage:o,creatorDescriptionErrorMessage:s,linksErrorMessage:l,contactEmailToggleError:d,webhookUrl:c,webhookUrlErrorMessage:u}=La.state;return{name:e,handle:t,contactEmail:a,creatorDescription:i,nameErrorMessage:r,handleErrorMessage:n,contactEmailErrorMessage:o,creatorDescriptionErrorMessage:s,linksErrorMessage:l,contactEmailToggleError:d,webhookUrl:c,webhookUrlErrorMessage:u}}),[]),G=(0,n().K8)((()=>b().default.state.currentUserStore),[]),X=(0,n().K8)((()=>null==G?void 0:G.getEmail()),[G]),Q=(0,sd().X)();(0,i.useEffect)((()=>{var e,t;o&&(!function(e,t){var a,i,r,n,o;if(null===e)return;const s=(null===(a=e.attributes)||void 0===a?void 0:a.links)||[...Array(5)].map((()=>"")),l={name:e.name||"",handle:e.username||"",contactEmail:(null===(i=e.attributes)||void 0===i?void 0:i.contactEmail)||"",creatorDescription:(null===(r=e.attributes)||void 0===r?void 0:r.description)||"",image:(null===(n=e.attributes)||void 0===n||null===(n=n.image)||void 0===n?void 0:n.url)||"",links:ed(s.filter((e=>!!e))),coverImage:(null===(o=e.attributes)||void 0===o||null===(o=o.cover_image)||void 0===o?void 0:o.url)||"",webhookUrl:t||"",webhookUrlTested:!1};La.setState({...La.getInitialState(),...l,initialValues:{...l}})}(o,null==s||null===(e=s.webhook_config)||void 0===e?void 0:e.all),M(Boolean(null===(t=o.attributes)||void 0===t?void 0:t.contactEmail)),k(o.username||""),x(!0))}),[o,s]),(0,i.useEffect)((()=>{!_&&v&&La.setState({...La.state,contactEmail:""})}),[_,v]),(0,i.useEffect)((()=>{Z&&(M(!0),ua().Rt({element:f.current,environment:c,options:{behavior:"smooth",block:"center"}}))}),[Z,c]);const J=[z,W,H,q,Y,...K.filter((e=>Boolean(e)))].filter((e=>Boolean(e))).length,ee=ld(La);od({isActive:ee,onAccept:()=>Promise.resolve(),onReject:()=>{throw new Error("abandon_route")},acceptLabel:(0,A.jsx)(rd,{}),rejectLabel:(0,A.jsx)(nd,{})});const te=(0,i.useMemo)((()=>({...p.textInput,...w?p.disabledInput:{}})),[p.textInput,p.disabledInput,w]);if(null===a)return null;const ae=w||!ee;return(0,A.jsxs)("div",{children:[(0,A.jsx)(De().y,{size:"large",header:(0,A.jsx)(d().sA,{id:"creatorProfileForm.title",defaultMessage:"Creator Profile"}),subHeader:(0,A.jsxs)("div",{style:u.subheaderContainer,children:[(0,A.jsx)(d().sA,{id:"creatorProfileForm.subTitle",defaultMessage:"Information here is separate from your Notion account profile. Items with asterisk * are required."}),o&&(0,A.jsx)(A.Fragment,{children:o&&Q?(0,A.jsx)(Dt().A,{href:(0,ql().kc)(o.username),external:!0,children:(0,A.jsx)("span",{style:u.viewProfileText,children:(0,A.jsx)(d().sA,{id:"creatorProfileForm.viewProfile.label",defaultMessage:"View Profile↗"})})}):(0,A.jsx)("span",{style:u.noPublishedTemplatesText,children:(0,A.jsx)(d().sA,{id:"creatorProfileForm.noPublishedTemplates.label",defaultMessage:"Your creator profile will be available at {url} after you have at least one published template.",values:{url:(0,ql().kc)(o.username)}})})})]})}),(0,A.jsx)(er,{count:J,ref:m}),(0,A.jsxs)("div",{style:u.basicInformation,children:[(0,A.jsx)(Cd,{disabled:w}),(0,A.jsx)("div",{style:u.avatarUploadContainer,children:(0,A.jsx)(bd,{disabled:w})}),(0,A.jsxs)("div",{style:u.creatorProfileContainer,children:[X&&(0,A.jsx)(ar().o,{htmlLabel:"currentEmail",label:l.formatMessage(Td.notionAccount),value:X,type:"text",style:{...p.textInput,...p.disabledInput},disabled:!0,format:or().C.Default}),(0,A.jsx)(ar().o,{htmlLabel:"creatorDisplayName",value:B,format:or().C.Default,placeholder:l.formatMessage(Td.displayNamePlaceholderWithIntegration),type:"text",style:te,onFocus:()=>Jl({errorFieldName:"nameErrorMessage"}),onChange:e=>{La.setState({...La.state,name:e.target.value})},onBlur:e=>{!function(t){Xl({value:t,validationFunction:e=>{const t=Qo().default.getConfigKey("creator_profile_allowlist","names");(0,$l().IQ)(e,t)},fieldName:"nameErrorMessage"});try{if(La.state.initialValues.name!==t&&(0,Zl().N)(t.toLowerCase(),!1))throw new(Ii().rT)("Name is not allowed",{type:"template_creator_name_reserved"})}catch(e){if((0,Ii().V4)(e)){const a=(0,Ta().DX)(V().A.getIntl(),e.body);a&&Ql({fieldName:"nameErrorMessage",errorMessage:a})}}}(e.target.value)},disabled:w,label:l.formatMessage(Td.displayName),error:z,children:(0,A.jsx)("div",{style:p.helperText,children:l.formatMessage(Td.displayNameHelperText)})}),(0,A.jsx)(ar().o,{htmlLabel:"handle",value:`@${F}`,placeholder:"@",type:"text",style:te,onFocus:()=>Jl({errorFieldName:"handleErrorMessage"}),onChange:e=>La.setState({...La.state,handle:e.target.value.replace("@","")}),onBlur:async e=>{const t=e.target.value.replace("@","");""!==I&&t===I||await async function(t){const{environment:a,handle:i}=t;Xl({value:i,validationFunction:e=>{const t=Qo().default.getConfigKey("creator_profile_allowlist","usernames");(0,$l().VD)(e,t)},fieldName:"handleErrorMessage"});try{if(i!==La.state.initialValues.handle&&(0,Zl().N)(i.toLowerCase(),!1))throw new(Ii().rT)("Name is not allowed",{type:"template_creator_name_reserved"})}catch(e){if((0,Ii().V4)(e)){const a=(0,Ta().DX)(V().A.getIntl(),e.body);a&&Ql({fieldName:"handleErrorMessage",errorMessage:a})}}if(!La.getState().handleErrorMessage){const e=await y().callApi({eventName:"validateTemplateCreatorHandle",environment:a,data:{handle:i}});"success"!==e.type&&Ql({fieldName:"handleErrorMessage",errorMessage:(0,Ta().Hu)(V().A.getIntl(),e)})}}({environment:c,handle:t})},disabled:w,format:or().C.Default,label:l.formatMessage(Td.handle),error:W}),(0,A.jsxs)("div",{style:u.emailContainer,ref:f,children:[(0,A.jsx)(_d,{checked:_,onChange:()=>{M(!_),La.setState({...La.state,contactEmailErrorMessage:void 0})},disabled:w,disallowTogglingOff:(0,O().O9)(null==o||null===(t=o.attributes)||void 0===t?void 0:t.contactEmail)&&("started"===L||"completed"===L)}),_&&(0,A.jsx)(ar().o,{htmlLabel:"contactEmail",label:l.formatMessage(Td.email),error:H,format:or().C.Default,value:U,type:"email",style:te,onFocus:()=>{La.setState({...La.state,contactEmailToggleError:!1,contactEmailErrorMessage:void 0})},onChange:e=>La.setState({...La.state,contactEmail:e.target.value}),onBlur:e=>{Xl({value:e.target.value,validationFunction:$l().P4,fieldName:"contactEmailErrorMessage"})},disabled:w,children:(0,A.jsx)("div",{style:p.helperText,children:l.formatMessage(Td.emailHelperText)})})]}),(0,A.jsx)(ar().o,{htmlLabel:"description",format:or().C.Default,label:l.formatMessage(Td.creatorDescription),error:q,maxlength:280,value:N,type:"text",textarea:!0,style:te,onFocus:()=>Jl({errorFieldName:"creatorDescriptionErrorMessage"}),onChange:e=>{La.setState({...La.state,creatorDescription:e.target.value})},onBlur:e=>{Xl({value:e.target.value,validationFunction:$l().pG,fieldName:"creatorDescriptionErrorMessage"})},disabled:w,showCharacterCounter:!0}),E&&(0,A.jsx)("div",{style:u.webhookInput,children:(0,A.jsx)(ar().o,{htmlLabel:"webhookUrl",format:or().C.Default,label:(0,A.jsx)(Md,{}),error:Y,maxlength:wd,value:$,type:"text",style:te,onFocus:()=>Jl({errorFieldName:"webhookUrlErrorMessage"}),onChange:e=>{La.setState({...La.state,webhookUrl:e.target.value,webhookUrlTested:!1})},onBlur:e=>{Gl(e.target.value)},disabled:w,showCharacterCounter:void 0===Y,right:(0,A.jsx)(Ad,{})})})]})]}),(0,A.jsxs)("div",{style:u.remainingSections,children:[(0,A.jsx)(Sd,{intl:l,disabled:w,numberOfVisibleLinks:T,setNumberOfVisibleLinks:P}),(0,A.jsx)(dd,{onboardingStatus:L,setOnboardingStatus:D})]}),(0,A.jsx)("div",{style:u.submitSection,children:(0,A.jsx)(Qi().u,{variant:"dark",disabled:ae,onClick:async()=>{S(!0);const{initialValues:e,...t}=La.state;if(J>0)ua().Rt({element:m.current,environment:c,options:{behavior:"smooth"}});else if(await async function(e){var t,a;const{environment:i,creator:r,onSuccess:n}=e,o={name:r.name.trim(),handle:r.handle.trim(),creatorDescription:null===(t=r.creatorDescription)||void 0===t?void 0:t.trim(),links:r.links.map((e=>At().s8(e.trim(),"/"))).filter((e=>e.length>0)),contactEmail:null===(a=r.contactEmail)||void 0===a?void 0:a.trim(),image:r.image,coverImage:r.coverImage};try{const e=Qo().default.getConfigKey("creator_profile_allowlist","usernames"),t=Qo().default.getConfigKey("creator_profile_allowlist","names");(0,$l().g2)({creator:o,usernameAllowlist:e,nameAllowlist:t})}catch(d){if((0,Ii().V4)(d)){const e=(0,Ta().DX)(V().A.getIntl(),d.body);if(e)return void C().f1(e)}}const s={...o,name:(0,Yl().ZC)("production",o.name),handle:(0,Yl().ZC)("production",o.handle)},l=await y().callApi({eventName:"submitTemplateCreator",environment:i,data:s});"success"!==l.type?C().Qg(l):l.data.success?(me().A.setState({creatorId:l.data.creatorId}),null==n||n()):C().rG({message:"Failed to create or edit creator profile"})}({environment:c,creator:{...t,...!_&&{contactEmail:void 0}},onSuccess:()=>{!function(){const{name:e,handle:t,contactEmail:a,creatorDescription:i,links:r,image:n,coverImage:o,webhookUrl:s,webhookUrlTested:l}=La.state,d=ed(r.filter((e=>!!e))),c={name:e,handle:t,contactEmail:a,creatorDescription:i,links:d,image:n,coverImage:o,webhookUrl:s,webhookUrlTested:l};La.setState({...La.state,links:d,initialValues:{...c}})}(),P(1),"create"!==a?j().D6({label:(0,A.jsx)(gd,{})}):(j().D6({label:(0,A.jsx)(md,{})}),g("/profile/templates",!0))}}),null!=s&&s.id&&E){const e=new(yt().sV)(c,{table:Rl().XX,id:s.id});Vl().createAndCommit({userAction:"creatorProfile.updateWebhookUrl",environment:c,canUndo:!0,perform:t=>{Vl().applyOperation({store:e,operation:{pointer:e.pointer,path:["webhook_config"],command:"update",args:{all:$}},transaction:t})}})}S(!1)},children:w?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(d().sA,{id:"creatorProfileForm.save.button.saving",defaultMessage:"Saving"}),(0,A.jsx)(Si().A,{style:{marginLeft:4}})]}):(0,A.jsx)(d().sA,{id:"creatorProfileForm.save.button",defaultMessage:"Save"})})})]})}function Sd(e){const{intl:t,disabled:a,numberOfVisibleLinks:i,setNumberOfVisibleLinks:r}=e,o=Id(),s=kd(),{links:l,linksErrorMessage:d}=(0,n().K8)((()=>{const{links:e,linksErrorMessage:t}=La.state;return{links:e,linksErrorMessage:t}}),[]),c=function(e){const t=[...e];for(;t.length>0&&""===t[t.length-1];)t.pop();return t}(l);let u=c;return i>c.length?u=[...c,...At().Hn(i-c.length,At().dY(""))]:r(c.length),(0,A.jsxs)("div",{style:s.linksInputContainer,children:[(0,A.jsxs)("div",{style:s.linksTitleSection,children:[(0,A.jsx)("div",{style:s.sectionTitle,children:t.formatMessage(Td.links)}),(0,A.jsx)("div",{style:s.linksSubTitle,children:t.formatMessage(Td.linksHelperText)})]}),u.map(((e,i)=>(0,A.jsx)(ar().o,{htmlLabel:`link-${i}`,format:or().C.Default,label:t.formatMessage(Td.link,{number:i+1}),error:d[i],value:e,placeholder:"https://",type:"url",style:{...o.textInput,...a?o.disabledInput:{}},onFocus:()=>Jl({errorFieldName:"linksErrorMessage",linkIndex:i}),onChange:e=>{La.setState({...La.state,links:l.map(((t,a)=>a===i?e.target.value:t))})},onBlur:e=>function(e,t){Xl({value:e,validationFunction:$l().Pr,fieldName:"linksErrorMessage",linkIndex:t})}(e.target.value,i),disabled:a},`link-${i}`))),(0,A.jsx)("div",{style:s.linksAddButton,children:(0,A.jsx)(Sa().A,{size:"lg",onClick:()=>{i>=5||(i>=c.length?r(i+1):r(c.length+1))},disabled:u.length>=5,children:t.formatMessage(Td.addLinkButtonLabel)})})]})}function _d(e){const{checked:t,onChange:a,disabled:i,disallowTogglingOff:r}=e,n=Id();return(0,A.jsx)(Mi().A,{name:(0,A.jsx)(d().sA,{defaultMessage:"Let people email me",id:"creatorProfileForm.allowPeopleToEmailMe"}),htmlLabel:"emailToggle",children:(0,A.jsx)(hr().A,{placement:no().W.Right,renderTooltip:()=>(0,A.jsx)(rt().D,{styleName:"UIRegular-14px/Regular",colorName:"contrastPrimary",children:(0,A.jsx)(d().sA,{id:"creatorProfileForm.email.tooltip",defaultMessage:"You must maintain a public email address as a Stripe verified seller"})}),render:e=>(0,A.jsx)("div",{...e,style:n.contactEmailToggle,children:(0,A.jsx)(ir,{isActive:t,onClick:a,disabled:i||r})}),disableTooltip:!r})})}function Md(){const e=(0,d().tz)(),t=kd();return(0,A.jsxs)("div",{style:t.webhookUrlLabel,children:[e.formatMessage(Td.webhookUrl),(0,A.jsx)(hr().A,{placement:no().W.Bottom,allowHover:!0,delayThreshold:400,closeDelay:2e3,renderTooltip:()=>(0,A.jsxs)("div",{style:t.webhookUrlTooltip,children:[(0,A.jsx)(d().sA,{id:"creatorProfileForm.webhookUrl.tooltip",defaultMessage:"Register to receive Marketplace notifications."}),(0,A.jsx)(ta().A,{href:Pn().JZ.marketplaceWebhookLearnMore,external:!0,disableUnderline:!0,children:(0,A.jsx)(d().sA,{id:"creatorProfileForm.webhookUrl.tooltip.learnMore",defaultMessage:"Learn more →"})})]}),render:e=>(0,A.jsx)("div",{...e,children:(0,A.jsx)(we().Q,{iconGroup:Ul().H,variantName:"small",colorName:"tertiary"})})})]})}function Ad(){const e=kd(),[t,a]=(0,i.useState)(!1),o=(0,r().v3)(),[s,l]=(0,i.useState)(0),{webhookUrl:c,webhookUrlTested:u,webhookUrlErrorMessage:p}=(0,n().O$)(La),g=(0,d().tz)();return(0,A.jsx)(ve().A,{style:e.webhookTestButton,onClick:async()=>{if(Gl(c),(0,O().O9)(p))return;const e=Date.now();if(e-s<bl().Xb)La.setState({...La.state,webhookUrlErrorMessage:g.formatMessage(Td.webhookTestButtonRateLimit)});else{l(e),a(!0);try{for await(const e of(0,Wl().UT)(o,Ol,{webhookUrl:c})){if(e.error){La.setState({...La.state,webhookUrlErrorMessage:g.formatMessage(Td.webhookTestButtonError)});break}if(e.value.error&&e.value.statusCode){La.setState({...La.state,webhookUrlErrorMessage:`${g.formatMessage(Td.webhookTestButtonInputError)} ${e.value.statusCode} (${e.value.error})`});break}La.setState({...La.state,webhookUrlTested:!0})}}finally{a(!1)}}},disabled:t||u,hoveredStyle:e.webhookTestButtonHovered,children:t?(0,A.jsxs)("div",{style:e.webhookTestInProgressButton,children:[(0,A.jsx)(Si().A,{}),(0,A.jsx)(d().sA,{id:"creatorProfile.testWebhookUrlInProgressButton",defaultMessage:"Testing"})]}):u?(0,A.jsxs)("div",{style:e.webhookTestValidatedButton,children:[(0,A.jsx)(we().Q,{iconGroup:mt().a,variantName:"mini",colorName:"bluePrimary"}),(0,A.jsx)(d().sA,{id:"creatorProfile.WebhookUrlValidatedButton",defaultMessage:"Validated"})]}):(0,A.jsx)(d().sA,{id:"creatorProfile.testWebhookUrlButton",defaultMessage:"Test"})})}function Id(){return(0,o().IS)((e=>({textInput:{background:"transparent",fontSize:14,borderRadius:Ai().A.borderRadius,padding:"9px"},disabledInput:{color:e.accentColors.gray[400],background:e.accentColors.gray[30],cursor:"not-allowed"},textContainer:{padding:"1px"},helperText:{fontSize:12,color:e.lightTextColor},contactEmailToggle:{width:"fit-content"},inlineLink:{color:e.regularTextColor,fontWeight:L().Wy.bold}})),[])}function kd(){return(0,o().IS)((e=>({webhookUrlLabel:{display:"flex",flexDirection:"row",alignItems:"center",gap:4},webhookInput:{display:"flex",flexDirection:"row"},subheaderContainer:{display:"flex",flexDirection:"column"},webhookUrlTooltip:{display:"flex",flexDirection:"row",alignItems:"center",gap:4},webhookTestButton:{color:e.blueColor,paddingLeft:"7px",paddingRight:"7px",borderRadius:"4px"},webhookTestInProgressButton:{color:e.text.secondary,display:"flex",flexDirection:"row",gap:"8px",alignItems:"center"},webhookTestValidatedButton:{display:"flex",flexDirection:"row",gap:"8px",alignItems:"center"},webhookTestButtonHovered:{background:e.accentColors.uiBlue[200]},viewProfileText:{color:e.accentColors.blue[500],fontSize:"13px"},noPublishedTemplatesText:{color:"rgba(17, 17, 17, 0.5)",fontSize:"13px"},sectionTitle:{fontSize:24,fontWeight:L().Wy.semibold},basicInformation:{marginTop:54,display:"flex",flexDirection:"column",marginBottom:72},creatorProfileContainer:{display:"flex",flexDirection:"column",gap:32},avatarUploadContainer:{marginTop:32,marginBottom:24},emailContainer:{display:"flex",flexDirection:"column",gap:"8px"},submitSection:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",gap:12,marginTop:40,background:"white",padding:"10px 0 20px 0"},linksInputContainer:{display:"flex",flexDirection:"column",width:"100%",gap:24,marginBottom:24},linksTitleSection:{display:"flex",flexDirection:"column",gap:2},linksSubTitle:{fontSize:15},creatorDescriptionContainer:{display:"flex",flexDirection:"column",gap:4},linksAddButton:{width:"fit-content"},remainingSections:{display:"flex",flexDirection:"column",gap:72}})),[])}const Td=(0,d().YK)({webhookTestButtonInputError:{id:"creatorProfileForm.webhookTestButtonInputError",defaultMessage:"Webhook URL destination returned an error:"},webhookTestButtonError:{id:"creatorProfileForm.webhookTestButtonError",defaultMessage:"Something went wrong"},webhookTestButtonRateLimit:{id:"creatorProfileForm.webhookTestButtonRateLimit",defaultMessage:"Please wait at least one minute before testing your webhook again."},webhookUrl:{id:"creatorProfileForm.creatorDetail.form.webhookUrl",defaultMessage:"Webhook URL"},notionAccount:{id:"creatorProfileForm.creatorDetail.form.notionAccount",defaultMessage:"Notion account"},displayName:{id:"creatorProfileForm.creatorDetail.form.name",defaultMessage:"Display name *"},displayNamePlaceholder:{id:"creatorProfileForm.creatorDetail.form.namePlaceholder",defaultMessage:"This is the name that will be associated on your template."},displayNamePlaceholderWithIntegration:{id:"creatorProfileForm.creatorDetail.form.namePlaceholderWithIntegration",defaultMessage:"This is the name that will be associated on your templates and integrations."},displayNameHelperText:{id:"creatorProfileForm.creatorDetail.form.nameHelperText",defaultMessage:"Can be different from your Notion account name. This can be the name of your company or organization."},handle:{id:"creatorProfileForm.creatorDetail.form.handle",defaultMessage:"Creator handle *"},email:{id:"creatorProfileForm.creatorDetail.form.email",defaultMessage:"Email"},emailHelperText:{id:"creatorProfileForm.creatorDetail.form.emailHelperText",defaultMessage:"Can be different from your Notion email. Will be publicly displayed."},creatorDescription:{id:"creatorProfileForm.creatorDetail.form.creatorDescription",defaultMessage:"A short description of yourself *"},links:{id:"creatorProfileForm.creatorDetail.form.links",defaultMessage:"Contact"},linksHelperText:{id:"creatorProfileForm.creatorDetail.form.linksHelperText",defaultMessage:"Display up to 5 links on your Profile."},link:{id:"creatorProfileForm.creatorDetail.form.link",defaultMessage:"Link {number}"},addLinkButtonLabel:{id:"creatorProfileForm.creatorDetail.form.addLinkButtonLabel",defaultMessage:"Add a Link"}});function Pd(){const e=(0,fe().x)(),t=function(){const{creatorId:e}=(0,n().O$)(me().A),t=(0,r().v3)();return(0,n().K8)((()=>{if(!e)return null;const a=(0,Bl().f)({table:Rl().XX,parentTable:El().Hi,parentId:e}),i=new(Fl().s)(t,{table:Rl().XX,id:a});if(!(0,O().O9)(i))return null;const r=i.id,n=i.getWebhookConfig();return r?{id:r,webhook_config:n}:null}),[e,t])}(),{profileFormType:a}=(0,n().K8)((()=>Ae.state),[]);(0,i.useEffect)((()=>{e&&Ae.setState({profileFormType:"edit"})}),[e]);const s=(0,o().IS)((e=>({creatorInfoContainer:{position:"relative",flex:"400px",gap:"12px"},creatorInfoPrimaryHeader:{fontWeight:L().Wy.medium,fontSize:30,color:c().Ay.uiBlack},profileHandle:{color:c().Ay.frontTextMedium,fontSize:13.5},creatorInfoDescription:{fontSize:15,maxWidth:"600px"},creatorInfoCount:{color:c().Ay.frontTextMedium,fill:c().Ay.frontTextMedium,display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"6px",fontSize:13.5}})),[]);return e||null!==a?(0,A.jsx)("section",{style:s.creatorInfoContainer,children:(0,A.jsx)(jd,{type:a,templateCreatorProfile:e,marketplaceSellerProfile:t})}):(0,A.jsx)(Ld,{showCreatorProfileForm:()=>Ae.setState({profileFormType:"create"})})}function Ld(e){const{showCreatorProfileForm:t}=e,a=(0,o().IS)((e=>({creatorInfoEmptyStateHeader:{fontSize:36,color:e.regularTextColor,fontWeight:L().Wy.semibold},creatorInfoEmptyStateDescription:{fontSize:16,color:e.regularTextColor},creatorInfoEmptyStateSubdescription:{fontSize:13.5,color:e.mediumTextColor}})),[]);return(0,A.jsx)(ke,{showCreatorProfileForm:t,header:(0,A.jsx)("div",{style:a.creatorInfoEmptyStateHeader,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.creatorProfile.header",defaultMessage:"Creator Profile"})}),description:(0,A.jsx)("div",{style:a.creatorInfoEmptyStateDescription,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.creatorProfile.description",defaultMessage:"Create a Creator Profile to submit and manage Notion templates."})}),subdescription:(0,A.jsx)("div",{style:a.creatorInfoEmptyStateSubdescription,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.creatorProfile.subdescription",defaultMessage:"Your Creator profile is separate from your Notion user account."})})})}function Dd(){const e=(0,o().IS)((e=>({readFaq:{cursor:"pointer",color:e.regularTextColor,fontWeight:L().Wy.semibold}})),[]),{setView:t}=$e();return(0,A.jsx)("span",{style:e.readFaq,onClick:()=>t("/profile/templates/faq"),children:(0,A.jsx)("a",{children:(0,A.jsx)(d().sA,{defaultMessage:"Read FAQ",id:"creatorProfile.templates.draftSubtitleLink"})})})}var Rd=()=>a(130382);const Ed=(0,Fe().wt)("circlePlus",{viewBox:"0 0 22 22",svg:(0,A.jsx)("path",{d:"M11 22C17.0326 22 22 17.0326 22 11C22 4.97795 17.0221 0 10.9895 0C4.9674 0 0 4.97795 0 11C0 17.0326 4.9674 22 11 22ZM5.83221 11.0105C5.83221 10.3461 6.30681 9.87152 6.96069 9.87152H9.88207V6.95014C9.88207 6.30681 10.3461 5.83221 10.9895 5.83221C11.6539 5.83221 12.1285 6.30681 12.1285 6.95014V9.87152H15.0499C15.6932 9.87152 16.1678 10.3461 16.1678 11.0105C16.1678 11.6539 15.6932 12.1179 15.0499 12.1179H12.1285V15.0499C12.1285 15.6932 11.6539 16.1572 10.9895 16.1572C10.3461 16.1572 9.88207 15.6932 9.88207 15.0499V12.1179H6.96069C6.30681 12.1179 5.83221 11.6539 5.83221 11.0105Z"})});var Bd=()=>a(827570);function Fd(e){const t=(0,o().IS)((()=>({loadMoreContainer:{display:"flex",justifyContent:"center",marginTop:"24px"}})),[]),[a,s]=(0,i.useState)(1),c=(0,r().v3)(),{isStatsigReady:u,isFeatureEnabled:p}=(0,Xe().O)("self_serve_localization_frontend"),{isFeatureEnabled:g}=(0,Xe().O)("template_creator_blocklist"),{name:m}=$e(),f=(0,n().K8)((()=>{var e,t;const a=null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.id,i=oe().A.state;if(!a)return[];return(null===(t=i.draftTemplates[a])||void 0===t?void 0:t.templates)||[]}),[]),h=(0,n().K8)((()=>{var e,t;const a=null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.id;if(!a)return{};return null===(t=oe().A.state.draftTemplates[a])||void 0===t?void 0:t.templateDraftsByContentfulId}),[]),v=(0,n().K8)((()=>{var e,t;const a=null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.id;if(!a)return{};return null===(t=oe().A.state.draftTemplates[a])||void 0===t?void 0:t.contentfulIdToDefaultLocaleTemplateId}),[]),{totalUserDraftTemplatesCount:x,currentFetchedTemplateCount:C}=(0,n().K8)((()=>{var e;const t=null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.id;if(void 0===t)return{totalUserDraftTemplatesCount:0,currentFetchedTemplateCount:0};const a=oe().A.state.draftTemplates[t],i=(null==a?void 0:a.count)||0,r=(null==a?void 0:a.templates)||[];return{totalUserDraftTemplatesCount:i,currentFetchedTemplateCount:null==r?void 0:r.reduce(((e,t)=>e+t.length),0)}}),[]),w=x>C;return(0,l().Yb)((async()=>u&&m?async function(e){var t;const{environment:a,page:i,groupByContentfulId:r}=e,n=a.currentUser.id,o=oe().A.state.draftTemplates;if(!n||null!=o&&null!==(t=o[n])&&void 0!==t&&t.templates[i-1])return;const s=await y().callApi({eventName:"getTemplateDrafts",environment:a,data:{offset:se*(i-1),limit:se,includeCount:!0,groupByContentfulId:r}});if("success"===s.type){const e=s.data.templateDraftIds,t=s.data.templateDraftsByContentfulId,a=s.data.contentfulIdToDefaultLocaleTemplateId;if(0===e.length)return;const r={...oe().A.state,draftTemplates:{...o,[n]:{count:s.data.count||0,templates:[...o[n]?o[n].templates.slice(0,i):[],e,...o[n]?o[n].templates.slice(i):[]],templateDraftsByContentfulId:{...o[n]?o[n].templateDraftsByContentfulId:{},...t},contentfulIdToDefaultLocaleTemplateId:{...o[n]?o[n].contentfulIdToDefaultLocaleTemplateId:{},...a}}}};oe().A.setState(r)}}({environment:c,page:a,groupByContentfulId:p}):async()=>Promise.resolve({})),[c,a,u,p,m]),(0,A.jsxs)("section",{children:[(0,A.jsx)(De().y,{header:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.draftHeader",defaultMessage:"Drafts"}),subHeader:g?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.draftSubtitle.banned",defaultMessage:"You are currently ineligible to create new templates."}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(d().sA,{defaultMessage:"Start a template and submit for approval.",id:"creatorProfile.templates.draftSubtitle"})," ",(0,A.jsx)(Dd,{})]}),size:"medium"}),u?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(Kr,{children:[g?null:(0,A.jsxs)(Ur,{href:"/profile/templates/form/new",shouldShowHoverBackground:!1,children:[(0,A.jsx)(Nr,{node:(0,A.jsx)(Od,{})}),(0,A.jsx)(Wr,{title:(0,A.jsx)(Ud,{})})]}),c.currentUser.id?f.map((e=>e.map((e=>(0,A.jsx)(Nd,{templateId:e,templateDraftGroupsByContentfulId:h,contentfulIdToDefaultLocaleTemplateId:v},e))))):null]}),w?(0,A.jsx)("div",{style:t.loadMoreContainer,children:(0,A.jsx)(Qi().u,{variant:"light",onClick:()=>s((e=>e+1)),children:(0,A.jsx)(d().sA,{id:"creatorProfile.draftTemplate.loadMore",defaultMessage:"Load more"})})}):null]}):(0,A.jsx)("div",{children:(0,A.jsx)(Si().A,{})})]})}function Ud(){const{isHovered:e,isTouchDevice:t}=Rr(),a=(0,o().IS)((()=>({draftTemplatesSubtitle:{color:c().Ay.frontTextLight},draftTemplatesSubtitleHovered:{color:c().Ay.black,fontWeight:L().Wy.medium}})),[]);return(0,A.jsx)("span",{style:e&&!t?a.draftTemplatesSubtitleHovered:a.draftTemplatesSubtitle,children:(0,A.jsx)(d().sA,{defaultMessage:"Start a New Template",id:"creatorProfile.templates.newTemplateCTA"})})}function Nd(e){var t;const{templateId:a,templateDraftGroupsByContentfulId:i,contentfulIdToDefaultLocaleTemplateId:o}=e,s=(0,r().v3)(),{isFeatureEnabled:l}=(0,Xe().O)("self_serve_localization_frontend"),{setView:c}=$e(),u=(0,n().K8)((()=>{const e=new(yt().x1)(s,{table:"template_draft",id:a});return{name:e.getName(),status:e.getStatus(),image:e.getCoverImage(),lastUpdatedAt:e.getLastUpdatedAt(),price:e.getPrice(),slug:e.getSlug(),isPublished:(e.getPublishedVersion()||0)>0,contentfulId:e.getContentfulId()}}),[s,a]),p=u.contentfulId,g=function(e){const t=(0,r().v3)(),{isFeatureEnabled:a}=(0,Xe().O)("self_serve_localization_frontend");return(0,n().K8)((()=>e&&a?e.map((e=>{const a=new(yt().x1)(t,{table:Bd()._F,id:e});return{name:a.getName(),locale:a.getLocale(),id:e,status:a.getStatus()}})):[]),[t,e,a])}(p?null==i?void 0:i[p]:[]),m=function(e){const t=(0,r().v3)();return(0,n().K8)((()=>e?new(yt().$x)(t,{table:"template",id:e}).getName():""),[t,e])}(p&&l?null==o?void 0:o[p]:void 0);if(u.isPublished)return null;const f=He("draft",a);return(0,A.jsxs)(Ur,{href:l?void 0:f,onClick:l?()=>c(f):void 0,actions:(0,A.jsx)(Vr,{children:"in_review"===u.status?(0,A.jsx)(ur,{href:`/profile/templates/form/draft/${a}`,children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.button.viewTemplateDraft",defaultMessage:"View Submission"})}):(0,A.jsx)(ur,{href:`/profile/templates/form/draft/${a}`})}),children:[(0,A.jsx)(Nr,{imageSrc:null==u||null===(t=u.image)||void 0===t?void 0:t.url,node:null,topRightOverlay:(0,A.jsx)(qr,{templateStatus:u.status})}),(0,A.jsx)(Wr,{title:(0,A.jsx)(Hr,{templateName:l&&m?m:u.name||"",templateStatus:l?void 0:u.status}),subtitle:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(zd,{templatePrice:u.price,templateLastUpdatedAt:u.lastUpdatedAt,templateStatus:u.status}),l&&g.length>0&&(0,A.jsx)(Ir,{localizedTemplateDraftData:g,displaySection:"draft"})]})})]})}function zd(e){const t=(0,d().tz)(),{templatePrice:a,templateLastUpdatedAt:i,templateStatus:r}=e,n=(0,o().IS)((()=>({draftTemplateSubtitleContainer:{display:"flex",alignItems:"center",gap:"5px",fontSize:"12px"},priceText:{fontWeight:L().Wy.medium,color:"rgba(0, 0, 0, 1)"},lastEditedText:{fontWeight:L().Wy.medium,color:"rgba(128, 128, 128, 1)"}})),[]);return(0,A.jsxs)("div",{style:n.draftTemplateSubtitleContainer,children:[void 0!==a&&(0,A.jsx)("span",{style:n.priceText,children:(0,A.jsx)(bt().v,{cost:{currencyCode:"USD",amount:100*a},trailingZeroDisplay:"auto",intl:t})}),void 0!==a&&void 0!==i&&(0,A.jsx)(Zr,{}),void 0!==i&&(0,A.jsx)("span",{style:n.lastEditedText,children:"rejected"===r?(0,A.jsx)(d().sA,{id:"creatorProfile.template.draft.lastRejected.label",defaultMessage:"Rejected {messageOfTimestampMs} ago",values:{messageOfTimestampMs:(0,Rd().lH)(Date.now()-i,t)}}):(0,A.jsx)(d().sA,{id:"creatorProfile.template.draft.lastEdited.label",defaultMessage:"Last edited {messageOfTimestampMs} ago",values:{messageOfTimestampMs:(0,Rd().lH)(Date.now()-i,t)}})}),(0,A.jsx)("span",{style:n.lastEditedText})]})}function Od(){const{isHovered:e,isTouchDevice:t}=Rr(),a=(0,o().IS)((()=>({createTemplateCTA:{backgroundColor:"#F6F5F4",height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",color:c().Ay.frontTextLight},circlePlusIcon:{height:"30px",width:"30px"},circlePlusIconHovered:{color:"rgba(102, 102, 102, 1)"}})),[]),i={...a.circlePlusIcon,...e&&!t?a.circlePlusIconHovered:{}};return(0,A.jsx)("div",{style:a.createTemplateCTA,children:Ed(i)})}var Wd=()=>a(713838),Vd=()=>a(674020),Hd=()=>a(750559);const qd=(0,Nl().Dv)("exportMarketplacePurchases");var Kd=()=>a(812182);async function Zd(e){let{environment:t,intl:a}=e;const i=(0,Wl().UT)(t,qd,{statuses:["succeeded","refunded"]});!function(e,t){S().u4({environment:e,event:{eventName:"marketplace_purchase_export",eventProperties:t}})}(t,{});const r=await i.next();if(r.value.error){const e=(0,Ta().A)(a,r.value.error);Kd().HK({id:"marketplace_purchase_export_toast",title:a.formatMessage({id:"creatorProfile.templates.purchaseExport.error.toast.title",defaultMessage:"Something went wrong"}),message:e,presentationType:"transient",icon:Hd().f})}else Kd().HK({id:"marketplace_purchase_export_toast",title:a.formatMessage({id:"creatorProfile.templates.purchaseExport.started.toast.title",defaultMessage:"Your CSV export is currently being generated"}),message:a.formatMessage({id:"creatorProfile.templates.purchaseExport.started.toast.message",defaultMessage:"Once it is ready, an email will be sent to you with the download link."}),presentationType:"transient",icon:Vd().y})}function $d(){const e=(0,r().v3)(),t=function(){const{isMobileWidth:e}=(0,m().LS)();return(0,o().IS)((t=>({container:{display:"flex",flexDirection:e?"column":"row",justifyContent:"space-between",alignItems:e?"start":"center",borderWidth:1,borderStyle:"solid",borderColor:t.stroke.primary,borderRadius:8,paddingLeft:20,paddingRight:20,paddingTop:17.5,paddingBottom:17.5,gap:18,marginTop:52,marginBottom:52},leftContainer:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",gap:18},madeASaleContainer:{display:"flex",flexDirection:"column",gap:4},madeASaleTitle:{fontSize:16,lineHeight:"24px",letterSpacing:-.15},madeASaleDescription:{color:t.mediumTextColor,lineHeight:"19px",fontSize:13.5},purchaseExportButtonContainer:{width:e?"100%":"auto",display:"flex",flexDirection:"row",justifyContent:"end",alignItems:"center"}})),[e])}(),a=(0,d().tz)(),[n,s]=(0,i.useState)(!1);(0,i.useEffect)((()=>{y().callApi({eventName:"getMarketplaceAcquisitionsCountByCreator",environment:e,data:{statuses:["succeeded","refunded"]}}).then((e=>{s(Boolean("success"===(null==e?void 0:e.type)&&e.data.success&&e.data.acquisitionCount>0))}))}),[e]);const l=(0,i.useCallback)((async()=>{await Zd({environment:e,intl:a})}),[e,a]);return n?(0,A.jsxs)("section",{style:t.container,children:[(0,A.jsxs)("div",{style:t.leftContainer,children:[(0,Wd().e)({width:24,height:24}),(0,A.jsxs)("div",{style:t.madeASaleContainer,children:[(0,A.jsx)("div",{style:t.madeASaleTitle,children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.madeASale.title",defaultMessage:"You’ve made a sale!"})}),(0,A.jsx)("div",{style:t.madeASaleDescription,children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.madeASale.description",defaultMessage:"Download a CSV of all of your sales from the Notion Marketplace"})})]})]}),(0,A.jsx)("div",{style:t.purchaseExportButtonContainer,children:(0,A.jsx)(Sa().A,{size:"lg",onClick:l,children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.purchaseExportButton",defaultMessage:"Download CSV"})})})]}):null}var Yd=()=>a(788941);function Gd(e){const{creatorId:t}=e,a=(0,r().v3)(),o=(0,d().tz)(),s=(0,fe().x)();(0,l().Yb)((async()=>{await async function(e){var t;const{locale:a,templateCreatorProfile:i,environment:r}=e,n=(null==i||null===(t=i.attributes)||void 0===t?void 0:t.pinned_templates)??[],o=await y().callApi({eventName:"getCreatorTemplates",environment:r,data:{locale:(0,v().H)(a),limit:x().v8,filterBy:{contentfulIds:n}}});if("success"===o.type){const e=o.data.templateIds;return oe().A.setState({...oe().A.state,pinnedTemplates:e}),!0}return!1}({locale:o,templateCreatorProfile:s,environment:a})}),[o,s,a]);const c=(0,n().K8)((()=>oe().A.state.pinnedTemplates),[]),u=(0,i.useCallback)((async(e,i)=>{await ce({environment:a,templateId:e,templateName:i,creatorId:t,type:"unpin"})}),[t,a]);return 0===c.length?null:(0,A.jsxs)("section",{children:[(0,A.jsx)(De().y,{size:"medium",header:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pinnedTemplatesHeader",defaultMessage:"{pinnedTemplatesCount} Pinned",values:{pinnedTemplatesCount:c.length}}),subHeader:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pinnedTemplatesSubheader",defaultMessage:"Pinned templates stay at the top of your profile, and appear in the order you pinned them."})}),(0,A.jsx)(Kr,{children:c.map((e=>(0,A.jsx)(Xd,{templateId:e,unpinTemplate:u},`pinnedTemplateCard-${e}`)))})]})}function Xd(e){var t;const{templateId:a,unpinTemplate:i}=e,r=cr(a),n=(0,o().IS)((e=>({imageOverlayContainer:{position:"absolute",top:-6,left:-7},pinnedIconContainer:{height:20,width:20,borderRadius:"50%",backgroundColor:e.accentColors.orange[400],display:"flex",alignItems:"center",justifyContent:"center"},pinIcon:{width:7,height:11.38,color:e.white}})),[]);return(0,A.jsxs)(Ur,{href:`/profile/templates/form/published/${a}`,actions:(0,A.jsxs)(Vr,{children:[(0,A.jsx)(Qd,{unpinTemplate:i,templateId:a,templateName:r.name||""},`unpinPinnedTemplate-${a}`),(0,A.jsx)(ur,{href:`/profile/templates/form/published/${a}`})]}),children:[(0,A.jsx)(Nr,{imageSrc:null==r||null===(t=r.image)||void 0===t?void 0:t.url,node:null,topLeftOverlay:(0,A.jsx)("div",{style:n.imageOverlayContainer,children:(0,A.jsx)("div",{style:n.pinnedIconContainer,children:(0,A.jsx)("span",{children:(0,Yd().b)(n.pinIcon)})})})}),(0,A.jsx)(Wr,{title:r.name,subtitle:(0,A.jsx)(Gr,{price:r.price,duplicationCount:r.numberDuplicates})})]})}function Qd(e){const{unpinTemplate:t,templateId:a,templateName:i}=e;return(0,A.jsx)(M().p,{isLightGray:!0,onClick:()=>t(a,i),children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pinnedTemplates.button.unpin",defaultMessage:"Unpin"})},`unpin-button-${a}`)}var Jd=()=>a(509630),ec=()=>a(655649),tc=()=>a(20051);const ac=(0,Fe().xh)("arrowTurnUpLeft",{default:{loader:()=>a.e(84360).then(a.bind(a,384360))},small:{loader:()=>a.e(33438).then(a.bind(a,933438))},mini:{loader:()=>a.e(83750).then(a.bind(a,683750))},large:{loader:()=>a.e(81750).then(a.bind(a,181750))}});var ic=()=>a(266442),rc=()=>a(174723),nc=()=>a(85370);const oc={isOpen:!1,reviewId:void 0,currentCreatorResponse:void 0};class sc extends _e().default{getInitialState(){return{...oc}}openModal(e,t){this.setState({...oc,isOpen:!0,reviewId:e,currentCreatorResponse:t})}closeModal(){this.setState(oc)}}const lc=new sc;function dc(e){let{reviewId:t,templateId:a,creatorAvatar:i}=e;const s=(0,r().v3)(),l=(0,o().IS)((()=>({templateCardImage:{alignSelf:"flex-start"}})),[]),{isCreatorResponseButtonVisible:d,creatorResponse:c}=(0,n().K8)((()=>{var e;const a=new(yt().Js)(s,{table:ic().UN,id:t});return{isCreatorResponseButtonVisible:a.isDefined()&&(0,tc().Mh)(a.getModel()),creatorResponse:null===(e=a.getSerializedCreatorResponse())||void 0===e?void 0:e.raw_value}}),[s,t]),{slug:u,imageUrl:p}=(0,n().K8)((()=>{var e;const t=new(yt().$x)(s,{table:"template",id:a});return{slug:t.getSlug(),imageUrl:null===(e=t.getTemplateImage())||void 0===e?void 0:e.url}}),[s,a]),g=(0,rc().Px)(u);return(0,A.jsxs)(Ur,{href:g,actions:d&&(0,A.jsx)(uc,{reviewId:t,creatorResponse:c}),children:[(0,A.jsx)(Nr,{imageSrc:p,node:null,style:l.templateCardImage}),(0,A.jsx)(nc().x,{reviewId:t,creatorAvatar:i,appearance:"narrow",isCreatorResponseTitleVisible:!0})]})}function cc(){const e=(0,o().IS)((()=>({container:{width:"100%",display:"flex",alignItems:"center",gap:"24px",borderRadius:"8px"},image:{width:"160px",height:"100px",borderRadius:"6px"}})),[]);return(0,A.jsxs)("div",{style:e.container,children:[(0,A.jsx)(Vt().A,{style:e.image}),(0,A.jsx)(nc().Q,{})]})}function uc(e){let{reviewId:t,creatorResponse:a}=e;const i=(0,o().IS)((e=>({buttonGroup:{display:"flex",gap:"2px",borderRadius:"6px",padding:"2px",background:e.surface.elevated,boxShadow:`0px 0px 0px 1px ${e.stroke.secondary}, rgba(227, 226, 224, 0.50), 0px 2px 4px 0px rgba(0, 0, 0, 0.04)`}})),[]),r=(0,d().tz)(),n=Boolean(a)?r.formatMessage(pc.editLabel):r.formatMessage(pc.replyLabel);return(0,A.jsx)(Vr,{children:(0,A.jsx)("div",{style:i.buttonGroup,children:(0,A.jsx)(hr().A,{renderTooltip:e=>(0,A.jsx)("span",{...e,children:n}),render:e=>(0,A.jsx)(ti().A,{...e,icon:e=>(0,A.jsx)(we().Q,{iconGroup:ac,variantName:"default",colorName:"secondary",style:e}),onClick:()=>lc.openModal(t,a),ariaLabel:n})})})})}const pc=(0,d().YK)({replyLabel:{id:"creatorProfile.templates.review.creatorResponse.replyLabel",defaultMessage:"Reply"},editLabel:{id:"creatorProfile.templates.review.creatorResponse.editLabel",defaultMessage:"Edit your reply"}});function gc(){const{isOpen:e,reviewId:t,currentCreatorResponse:a}=(0,n().O$)(lc),r=(0,i.useCallback)((()=>{lc.closeModal()}),[]);return(0,A.jsx)(ka().s,{isOpen:e,onDismiss:r,render:()=>{if(e)return(0,A.jsx)(mc,{reviewId:t,currentCreatorResponse:a})},showCloseIcon:!0})}function mc(e){let{reviewId:t,currentCreatorResponse:a}=e;const n=(0,r().v3)(),s=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:"20px",padding:"24px 28px",minWidth:"300px",width:"50vw",maxWidth:"650px"},header:{display:"flex",flexDirection:"column",gap:"8px"},reviewContainer:{borderRadius:"6px",border:"1px solid rgba(0, 0, 0, 0.04)",background:"rgba(246, 245, 244, 0.50)",padding:"20px"},input:{background:e.white},responseContainer:{display:"flex",flexDirection:"column",gap:"6px"},cancelButton:{height:"36px",fontWeight:500},footer:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"12px"}})),[]),c=(0,d().tz)(),[u,p]=(0,i.useState)(a||""),[g,m]=(0,i.useState)(""),[f,h]=(0,l().V$)((async()=>{try{(0,tc().n$)(u),await y().callApi({eventName:"updateCreatorMarketplaceListingReview",environment:n,data:{reviewId:t,creatorResponse:u}}),lc.closeModal()}catch(e){if((0,Ii().V4)(e)){const t=(0,Ta().DX)(c,e.body);return void(t&&m(t))}m(c.formatMessage({id:"creatorProfile.templateReviewResponseModal.error",defaultMessage:"Something went wrong. Please try again."}))}}),[c,n,t,u]),b=(0,i.useCallback)((()=>{lc.closeModal()}),[]),v=(0,i.useCallback)((e=>{p(e.target.value),m("")}),[]);return(0,A.jsxs)("form",{method:"dialog",style:s.container,children:[(0,A.jsxs)("div",{style:s.header,children:[(0,A.jsx)(rt().D,{styleName:"Title-24px/Bold",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateReviewResponseModal.title",defaultMessage:"Reply to review"})}),(0,A.jsx)(rt().D,{styleName:"Body-14px/Regular",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateReviewResponseModal.description",defaultMessage:"Write a short response to the feedback you've received on your template."})})]}),(0,A.jsx)("div",{style:s.reviewContainer,children:(0,A.jsx)(nc().x,{reviewId:t,appearance:"narrow",isCreatorResponseVisible:!1})}),(0,A.jsxs)("div",{style:s.responseContainer,children:[(0,A.jsx)(rt().D,{styleName:"Caption-12px/Regular",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateReviewResponseModal.responseHeading",defaultMessage:"Creator response"})}),(0,A.jsx)(or().A,{textarea:!0,autosize:!0,ignoreKeyboardMode:!0,textareaSubmitOnEnter:!1,showClearButton:!1,autosizeMinHeight:140,value:u,onChange:v,placeholder:c.formatMessage({id:"creatorProfile.templateReviewResponseModal.responsePlaceholder",defaultMessage:"Hey there..."}),style:s.input}),g&&(0,A.jsx)(rt().D,{styleName:"Caption-12px/Regular",colorName:"redTertiary",children:g})]}),(0,A.jsxs)("div",{style:s.footer,children:[(0,A.jsx)(Sa().A,{size:"lg",onClick:b,style:s.cancelButton,children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateReviewResponseModal.cancelButton",defaultMessage:"Cancel"})}),(0,A.jsx)(Ie().A,{color:"black",size:"xl",onClick:h,isLoading:"pending"===f.status,disabled:Boolean(g),children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateReviewResponseModal.submitButton",defaultMessage:"Submit reply"})})]})]})}const fc=10;function hc(){const e=(0,o().IS)((()=>({sortSelect:{width:"fit-content",marginBottom:"20px"},reviewsList:{display:"flex",flexDirection:"column",gap:"24px"},loadMore:{marginTop:"48px",marginLeft:"-8px"}})),[]),{ids:t,isEmpty:a,isLoadingMore:s,isFirstPageLoading:l,showLoadMoreButton:c,handleLoadMoreClick:u,sort:p,handleSortChange:g}=(0,Jd().c)({getReviews:bc,limit:fc}),m=function(){const e=(0,r().v3)();return(0,n().K8)((()=>{var t,a,i;const{creatorId:r}=me().A.state;let n;return r&&(n=new(ec().k)(e,{table:El().Hi,id:r})),{email:null===(t=n)||void 0===t||null===(t=t.getAttributes())||void 0===t?void 0:t.contactEmail,name:null===(a=n)||void 0===a?void 0:a.getName(),avatarUrl:(null===(i=n)||void 0===i||null===(i=i.getAttributes())||void 0===i||null===(i=i.image)||void 0===i?void 0:i.url)??""}}),[e])}();return a?null:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:e.sortSelect,children:(0,A.jsx)(nt().A,{items:xc,getKey:e=>e.value,onSelect:e=>g(e.val),selectedItem:xc.find((e=>e.val===p)),renderItem:e=>(0,A.jsx)(it().A,{...e,title:e.key}),renderOrigin:e=>{var t;return(0,A.jsx)(dr()._,{focused:!1,title:null===(t=xc.find((e=>e.val===p)))||void 0===t?void 0:t.value,...e})}})}),(0,A.jsx)(Kr,{children:t.map((e=>(0,A.jsx)(i.Fragment,{children:l||!("productId"in e)?(0,A.jsx)(cc,{}):(0,A.jsx)(dc,{reviewId:e.reviewId,templateId:e.productId,creatorAvatar:m})},e.reviewId)))}),c?(0,A.jsx)(M().p,{onClick:u,isGray:!0,style:e.loadMore,isLoading:s,children:(0,A.jsx)(d().sA,{id:"creatorProfile.reviewList.viewAll",defaultMessage:"Load more"})}):null,(0,A.jsx)(gc,{})]})}async function bc(e){return await async function(e){let{environment:t,productTable:a,sort:i,offset:r,limit:n}=e;const o=await y().callApi({eventName:"getCreatorMarketplaceListingReviews",environment:t,data:{productTable:a,sort:(0,tc().Lh)(i??"mostRecent"),limit:n,offset:r}});let s=[];return"success"===o.type&&o.data.success&&(s=o.data.ids),{ids:s}}({...e,productTable:vt().XX,limit:fc})}const vc=(0,d().YK)({mostRecent:{id:"creatorProfile.reviewList.mostRecent",defaultMessage:"Most recent"},highestRating:{id:"creatorProfile.reviewList.highestRating",defaultMessage:"High to low ratings"},lowestRating:{id:"creatorProfile.reviewList.lowestRating",defaultMessage:"Low to high ratings"}}),xc=[{value:V().A.formatMessage(vc.mostRecent),val:"mostRecent"},{value:V().A.formatMessage(vc.highestRating),val:"highestRating"},{value:V().A.formatMessage(vc.lowestRating),val:"lowestRating"}];var yc=()=>a(236190);const Cc=(0,d().YK)({question1:{id:"templateSubmission.templateCreatorFaq.question1",defaultMessage:"How are templates reviewed?"},answer1:{id:"templateSubmission.templateCreatorFaq.answer1",defaultMessage:"The Notion team regularly reviews template submissions to maintain the quality of our gallery. You can learn more about the review process and qualifications for publication on the <term>Marketplace Guidelines and Terms</term> page."},question2:{id:"templateSubmission.templateCreatorFaq.question2",defaultMessage:"I’ve submitted my template. Now what?"},answer2:{id:"templateSubmission.templateCreatorFaq.answer2",defaultMessage:"We’ll review your template and send you an email if the template or the revision is accepted and published or rejected. This process can take 1-2 weeks."},question3:{id:"templateSubmission.templateCreatorFaq.question3",defaultMessage:"How many templates can a Notion user submit?"},answer3:{id:"templateSubmission.templateCreatorFaq.answer3",defaultMessage:"You can submit as many templates as you’d like."},question4:{id:"templateSubmission.templateCreatorFaq.question4",defaultMessage:"How do I change my creator profile information?"},answer4:{id:"templateSubmission.templateCreatorFaq.answer4",defaultMessage:"You can make changes to your creator profile, including the name, handle, image, links, and more at <submitProfile>https://www.notion.so/profile.</submitProfile>"},question5:{id:"templateSubmission.templateCreatorFaq.question5",defaultMessage:"Can I make updates to my template after submission?"},answer5:{id:"templateSubmission.templateCreatorFaq.answer5",defaultMessage:"You can make changes to your template itself any time after it’s been published in the gallery. To make changes to like the title, price, or description, simply edit the template in your creator profile and submit for review."},question6:{id:"templateSubmission.templateCreatorFaq.question6",defaultMessage:"Do I get to keep all the proceeds from a paid template?"},answer6:{id:"templateSubmission.templateCreatorFaq.answer6",defaultMessage:"Currently, Notion’s template gallery only supports payment through third-party sites. Revenue splits are subject to the individual terms and conditions described by those websites."},question7:{id:"templateSubmission.templateCreatorFaq.question7",defaultMessage:"I have questions about submitting templates or templates I’ve already submitted. Who can I contact?"},answer7:{id:"templateSubmission.templateCreatorFaq.answer7",defaultMessage:"For any and all things related to templates, simply email <supportEmail>templates@makenotion.com</supportEmail> and we’ll be happy to assist you!"},question8:{id:"templateSubmission.templateCreatorFaq.question8",defaultMessage:"What makes a good template?"},answer8:{id:"templateSubmission.templateCreatorFaq.answer8",defaultMessage:"<p>If you have a specific template or workflow you’d like to share with the community, we highly encourage you to create and submit a template!</p><p>Before you set off building and sharing, there are some important considerations for creating a template:</p><p>Good templates are useful. Templates are tools; tools solve a clear problem or need for someone. There’s both a clear audience for your template and a clear problem to be solved, and your template solves that problem.</p><p>Good templates are differentiated. Notion is more flexible than typical word document. Differentiated templates combine one or more of Notion’s core product types (docs, projects, and wikis), or are very clearly visually different than a basic word document.</p><p>Good templates are scalable. If your template is intended for team use, it should be able to work with more than just one person. There are a few key points to check to ensure scalability: If it’s intended for collaboration, what might this look like if you added 10 people? 50? 100? If you added content from the last two months, what would it look like? If you already have lots of stuff in your Notion, does it easily fit in?</p><p>Good templates have the basics. They’re inoffensive, use correct spelling, and are thoughtfully structured.</p>"},question9:{id:"templateSubmission.templateCreatorFaq.question9",defaultMessage:"Can I use my templates to get people to sign up to Notion and earn a commission?"},answer9:{id:"templateSubmission.templateCreatorFaq.answer9",defaultMessage:"Yes! You can do that by <affiliateLink>becoming a Notion Affiliate partner</affiliateLink>. Affiliates earn 50% commission for every new sign-up that upgrades to our Plus, Business, or AI plans, for 12 months. You can direct your affiliate links to anywhere on the Notion website, including your own templates."}});function wc(e){let{faq:t}=e;const[a,r]=(0,i.useState)(!1),n=(0,o().IS)((e=>({faq:{borderBottom:`1px solid ${e.lightDividerColor}`},question:{margin:0,cursor:"pointer",display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},questionText:{padding:"1em 20px 1em 0",fontWeight:L().Wy.semibold},answer:{paddingBottom:"1em"}})),[]);return(0,A.jsxs)("section",{style:n.faq,children:[(0,A.jsxs)("header",{style:n.question,role:"button","aria-pressed":a?"true":"false",onClick:()=>r((e=>!e)),children:[(0,A.jsx)("div",{style:n.questionText,children:t.question}),a?(0,yc().c)({width:14,height:14}):(0,Xn().W)({width:14,height:14})]}),a&&(0,A.jsx)("div",{style:n.answer,children:t.answer})]})}const jc=function(){const e=(0,d().tz)(),t=[{question:e.formatMessage(Cc.question1),answer:e.formatMessage(Cc.answer1,{term:e=>(0,A.jsx)(ta().A,{href:"https://www.notion.so/Template-Gallery-Guidelines-and-Terms-ec93f618c12d4f08b75b9132a7e55b33",external:!0,children:e})})},{question:e.formatMessage(Cc.question2),answer:e.formatMessage(Cc.answer2)},{question:e.formatMessage(Cc.question3),answer:e.formatMessage(Cc.answer3)},{question:e.formatMessage(Cc.question4),answer:e.formatMessage(Cc.answer4,{submitProfile:e=>(0,A.jsx)(ta().A,{href:"https://www.notion.so/profile",children:e})})},{question:e.formatMessage(Cc.question5),answer:e.formatMessage(Cc.answer5,{supportEmail:e=>(0,A.jsx)(ta().A,{href:"mailto:templates@makenotion.com",children:e})})},{question:e.formatMessage(Cc.question6),answer:e.formatMessage(Cc.answer6)},{question:e.formatMessage(Cc.question9),answer:e.formatMessage(Cc.answer9,{affiliateLink:e=>(0,A.jsx)(ta().A,{href:"https://www.notion.com/affiliates",children:e})})},{question:e.formatMessage(Cc.question7),answer:e.formatMessage(Cc.answer7,{supportEmail:e=>(0,A.jsx)(ta().A,{href:"mailto:templates@makenotion.com",children:e})})},{question:e.formatMessage(Cc.question8),answer:e.formatMessage(Cc.answer8,{p:e=>(0,A.jsx)("p",{children:e})})}],a=(0,o().IS)((e=>({faqWrap:{borderTop:`1px solid ${e.lightDividerColor}`}})),[]);return(0,A.jsx)("article",{style:a.faqWrap,children:t.length>0&&t.map(((e,t)=>(0,A.jsx)(wc,{faq:e},`faq-${t}`)))})};function Sc(){const e=(0,o().IS)((()=>({templateFAQContainer:{display:"flex",flexDirection:"column",gap:36}})),[]);return(0,A.jsxs)("div",{style:e.templateFAQContainer,children:[(0,A.jsx)(De().y,{size:"large",header:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.faq",defaultMessage:"Template Creator FAQ"}),subHeader:null}),(0,A.jsx)(jc,{})]})}var _c=()=>a(3544),Mc=()=>a(763824);const Ac=(0,Nl().Dv)("generateTemplateScreenshot");async function Ic(e){const{url:t,environment:a}=e,i=Qo().default.checkGate({gateName:"disable_template_screenshot_generation",disableExposureLogging:!0}),r=Mc().yX();if(i)return r.reject({success:!1,error:"Template screenshot generation is disabled"}),r.promise;const n=Date.now(),o=(0,Wl().UT)(a,Ac,{url:t});let s;for await(const l of o)s=l;if(s)if(s.error){const e=(0,Ta().A)(V().A.getIntl(),s.error);r.reject(e)}else r.resolve(s);else r.reject(void 0);return S().vd(a,"generate_template_screenshot_client",{time:Date.now()-n}),r.promise}var kc=()=>a(298907);const Tc={contentfulId:void 0,locales:[],isInitialized:!1};class Pc extends _e().default{getInitialState(){return{...Tc}}setContentfulId(e){this.setState({...this.state,contentfulId:e})}getLocales(){return this.state.locales}setLocales(e){this.setState({...this.state,locales:[...e]})}setIsInitialized(e){this.setState({...this.state,isInitialized:e})}updateState(e){this.setState({...this.state,...e})}resetState(){this.setState(Tc)}getDefaultLocaleTemplate(){var e;const{locales:t}=this.state;if(t&&0!==t.length)return null==t||null===(e=t.find((e=>{var t;return null==e||null===(t=e.template)||void 0===t?void 0:t.is_default_locale})))||void 0===e?void 0:e.template}getDefaultLocaleTemplateDraft(){var e;const{locales:t}=this.state;if(t&&0!==t.length)return null==t||null===(e=t.find((e=>{var t;return null==e||null===(t=e.template)||void 0===t?void 0:t.is_default_locale})))||void 0===e?void 0:e.templateDraft}removeLocale(e){this.setState({...this.state,locales:[...this.state.locales.filter((t=>t.locale!==e))]})}}const Lc=new Pc,Dc={isOpen:!1,isTranslating:!1,shouldTranslate:!0,hasTranslated:!1};class Rc extends _e().default{getInitialState(){return{...Dc}}openModal(){this.setState({...Dc,isOpen:!0})}closeModal(){this.setState({...Dc,isOpen:!1})}updateState(e){this.setState({...this.state,...e})}setIsTranslating(e){this.setState({...this.state,isTranslating:e})}setShouldTranslate(e){this.setState({...this.state,shouldTranslate:e})}setHasTranslated(e){this.setState({...this.state,hasTranslated:e})}}const Ec=new Rc,Bc=(0,d().YK)({submitTemplateMissingImage:{id:"templateSubmitActions.submitTemplateMissingImage",defaultMessage:"Please generate an image for your template by re-entering the template URL"},saveTemplateDraftSuccess:{id:"templateSubmitActions.saveTemplateDraftSuccess",defaultMessage:"Template saved."},submitTemplateSuccess:{id:"templateSubmitActions.submitSuccess",defaultMessage:"Template submitted! We will review it shortly."},submitTemplateMissingUrl:{id:"templateSubmitActions.submitTemplateMissingUrl",defaultMessage:"Please enter a valid url for your template."},submitTemplateInvalidUuid:{id:"templateSubmitActions.submitTemplateInvalidUuid",defaultMessage:"The link does not seem to be a valid Notion template."},submitTemplateMissingName:{id:"templateSubmitActions.submitTemplateMissingName",defaultMessage:"Please enter a name for your template"},submitTemplateMissingVerifiedInstantDelivery:{id:"templateSubmitActions.submitTemplateMissingVerifiedInstantDelivery",defaultMessage:"Please confirm that the template will be delivered instantly upon purchase."},submitTemplateLongDescriptionContainsHtml:{id:"templateSubmitActions.submitTemplateLongDescriptionContainsHtml",defaultMessage:"Long description contains HTML"}});function Fc(){const e=kc().A.state,{initialValues:t,...a}=e;return{url:a.url,name:a.name,locale:a.locale,shortDescription:a.shortDescription,longDescription:a.longDescription,categories:a.categories.map((e=>e.id)),image:a.image,mobileImage:a.mobileImage,emoji:a.emoji,purchaseUrl:a.purchaseUrl,price:a.price,icon:a.icon,templateDraftId:a.templateDraftId,slug:a.slug,screenshots:a.screenshots,mobileScreenshots:a.mobileScreenshots,videos:a.videos,restrictRedistribution:a.restrictRedistribution,checkoutEnabled:a.checkoutEnabled,emailRequirement:a.emailRequirement,verifiedInstantDelivery:a.verifiedInstantDelivery,isDefaultLocale:e.isDefaultLocale,...a.isFree?{price:void 0,purchaseUrl:void 0,checkoutEnabled:void 0}:{},...a.contentfulId?{contentfulId:a.contentfulId}:{},marketplaceAcquisitionEmail:a.isFree||a.checkoutEnabled?a.marketplaceAcquisitionEmail:void 0}}async function Uc(e){const{environment:t,action:a,currentView:i,templateContentfulId:r,hasTemplateBeenReviewed:n}=e;let o;const s=Fc(),l=!s.contentfulId;if(!(await Oc({environment:t,url:s.url,templateDraftId:s.templateDraftId,shouldValidateBlockIdUsedByOtherTemplate:l})))return!1;if("save_draft"===a){if(!Nc(s))return!1;{const e={...s,status:"draft",name:(0,Yl().ZC)("production",s.name??"Untitled")};o=await y().callApi({eventName:"submitTemplateDraft",environment:t,data:e})}}else if("publish"===a){const e=await async function(e,t,a,i){var r;let n=!0;const o=kc().A.state.initialValues;Nc(t)?void 0===t.locale&&(n=!1):n=!1;null!=t&&null!==(r=t.image)&&void 0!==r&&r.url||Be().A.isLocalhost||kc().A.setState({...kc().A.state,imageError:V().A.formatMessage(Bc.submitTemplateMissingImage)});if(!t.name||!o.name||o.name!==t.name){var s;Wc((0,N().pK)(null===(s=b().default.state.currentUserStore)||void 0===s?void 0:s.getModel()),t.name)}Kc(t.shortDescription),l=t.longDescription,zc({value:l||"",validationFunction:_c().Jf,fieldName:"longDescriptionError"});var l;const d=kc().A.state.isDefaultLocale;!a&&d&&Zc(t.categories||[]);t.slug&&o.slug&&o.slug===t.slug||await $c({environment:e,slug:t.slug||"",contentfulId:i});t.checkoutEnabled&&Hc(t.price);if("number"==typeof t.price){var c;if(Vc(t.price??0),t.checkoutEnabled)null!==(c=t.purchaseUrl)&&void 0!==c&&c.length&&t.purchaseUrl.length>0&&qc(t.purchaseUrl);else qc(t.purchaseUrl??""),t.purchaseUrl&&au(t.purchaseUrl)&&!t.verifiedInstantDelivery&&kc().A.setState({...kc().A.state,purchaseUrlError:V().A.formatMessage(Bc.submitTemplateMissingVerifiedInstantDelivery)})}for(const u of kc().J)void 0!==kc().A.state[u]&&(n=!1);return function(e){return!!n}}(t,s,n,r);if(!e(s))return!1;{const e={...s,status:"in_review",name:(0,Yl().ZC)("production",s.name??"Untitled")};o=await y().callApi({eventName:"submitTemplateDraft",environment:t,data:e})}}else(0,O().HB)(a);const{type:d}=Y(i),c="published"!==d;return"success"===o.type?("save_draft"===a?(S().u4({environment:t,event:{eventName:"creator_profile_template_save_draft",eventProperties:{}}}),C().rG({message:V().A.formatMessage(Bc.saveTemplateDraftSuccess)}),Qo().default.logEvent("creator_profile_template_save_draft")):"publish"===a&&(S().u4({environment:t,event:{eventName:"creator_profile_template_request_review",eventProperties:{is_new_submission:c}}}),Qo().default.logEvent("creator_profile_template_request_review",void 0,{is_new_submission:c}),C().rG({message:V().A.formatMessage(Bc.submitTemplateSuccess)})),kc().A.reset(),!0):(C().Qg(o),!1)}function Nc(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.url?kc().A.state.uuid||kc().A.state.urlError?e.name?!(e.longDescription&&!(0,_c().Wd)(e.longDescription))||(t&&kc().A.setState({...kc().A.state,longDescriptionError:V().A.formatMessage(Bc.submitTemplateLongDescriptionContainsHtml)}),!1):(t&&kc().A.setState({...kc().A.state,nameError:V().A.formatMessage(Bc.submitTemplateMissingName)}),!1):(t&&kc().A.setState({...kc().A.state,urlError:V().A.formatMessage(Bc.submitTemplateInvalidUuid)}),!1):(t&&kc().A.setState({...kc().A.state,urlError:V().A.formatMessage(Bc.submitTemplateMissingUrl)}),!1)}function zc(e){const{value:t,validationFunction:a,fieldName:i}=e;try{a(t)}catch(r){if((0,Ii().V4)(r)){const e=(0,Ta().DX)(V().A.getIntl(),r.body);e&&kc().A.setState({...kc().A.state,[i]:e})}}}async function Oc(e){const{environment:t,url:a,templateDraftId:i,shouldValidateBlockIdUsedByOtherTemplate:r,shouldValidateBlockIdForLocalization:n}=e;if(kc().A.setState({...kc().A.state,url:a}),!a)return kc().A.setState({...kc().A.state,urlError:V().A.formatMessage(Bc.submitTemplateMissingUrl)}),!1;const o=await y().callApi({eventName:"validateTemplate",environment:t,data:{url:a,templateDraftId:i,shouldValidateBlockIdUsedByOtherTemplate:r,contentfulId:kc().A.state.contentfulId,shouldValidateBlockIdForLocalization:n}});if("success"!==o.type)return kc().A.setState({...kc().A.state,urlError:(0,Ta().Hu)(V().A.getIntl(),o)}),!1;kc().A.setState({...kc().A.state,urlError:void 0});const{blockId:s}=o.data;return kc().A.setState({...kc().A.state,url:a,uuid:s}),!0}function Wc(e,t){zc({value:{name:t||"",isExemptFromDisallowedWords:e,env:"production"},validationFunction:_c().mx,fieldName:"nameError"})}function Vc(e){zc({value:e,validationFunction:_c().YD,fieldName:"priceError"})}function Hc(e){zc({value:e||0,validationFunction:_c().WR,fieldName:"priceError"})}function qc(e){zc({value:{purchaseUrl:e,publicDomainName:Be().A.publicDomainName},validationFunction:_c().Fr,fieldName:"purchaseUrlError"})}function Kc(e){zc({value:e||"",validationFunction:_c().$V,fieldName:"shortDescriptionError"})}function Zc(e){zc({value:e,validationFunction:_c().Tv,fieldName:"categoriesError"}),e.length<=x().Cw&&e.length>0&&kc().A.setState({...kc().A.state,categoriesError:void 0})}async function $c(e){const{environment:t,slug:a,contentfulId:i}=e;kc().A.setState({...kc().A.state,slug:a});const r=await y().callApi({eventName:"validateTemplateDraftSlug",environment:t,data:{slug:a,templateDraftId:kc().A.state.templateDraftId,contentfulId:i}});"success"===r.type?kc().A.setState({...kc().A.state,slugError:void 0}):kc().A.setState({...kc().A.state,slugError:(0,Ta().Hu)(V().A.getIntl(),r)})}function Yc(e){kc().A.setState({...kc().A.state,[e]:void 0})}function Gc(){kc().A.reset()}function Xc(e,t){var a,i,r,n;const o=kc().A.getInitialState(),s={contentfulId:(null==t?void 0:t.contentfulId)||e.getContentfulId(),templateDraftId:e.id,name:e.getName()||"",url:e.getTemplatePublicUrl()||"",price:e.getPrice(),slug:e.getSlug(),isFree:void 0===e.getPrice()&&void 0===e.getPurchaseUrl(),longDescription:e.getLongDescription()||"",shortDescription:e.getDescription()||"",uuid:e.getBlockId(),categories:[],locale:e.getLocale(),purchaseUrl:e.getPurchaseUrl(),image:(null===(a=e.getAttributes())||void 0===a?void 0:a.image)||{url:"",width:0,height:0},mobileImage:(null===(i=e.getAttributes())||void 0===i?void 0:i.mobile_image)||{url:"",width:0,height:0},mobileScreenshots:e.getMobileScreenshots(),screenshots:e.getScreenshots(),videos:e.getVideos(),status:e.getStatus()||"draft",restrictRedistribution:e.getRestrictRedistribution()||void 0,checkoutEnabled:e.getCheckoutEnabled()||void 0,emailRequirement:e.getEmailRequirement()||void 0,isDefaultLocale:(null==t?void 0:t.isDefaultLocale)??!1,verifiedInstantDelivery:(null===(r=e.getDraftAttributes())||void 0===r?void 0:r.verified_instant_delivery)??!1,marketplaceAcquisitionEmail:(null===(n=e.getAttributes())||void 0===n||null===(n=n.custom_emails)||void 0===n?void 0:n.marketplace_acquisition)??""};kc().A.setState({...o,...s,initialValues:{...s}})}async function Qc(e,t){const a=kc().A.state,{isGeneratingImage:i,url:r}=a;kc().A.setState({...kc().A.state,isGeneratingImage:!0});const n=t??r;if(i)return!1;const o=await Ic({url:n,environment:e}).catch((()=>{j().D6({label:(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{defaultMessage:"Error generating screenshot",id:"creatorProfile.snackbar.error.screenshot"})})})}));return o&&"value"in o&&kc().A.setState({...a,mobileImage:o.value.mobile,image:o.value.desktop}),kc().A.setState({...kc().A.state,isGeneratingImage:!1}),!0}function Jc(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const a=Lc.getDefaultLocaleTemplate(),i=Lc.getDefaultLocaleTemplateDraft();if(!a||t)return;const{attributes:r,price:n,slug:o}=a;return{slug:o,price:n,purchaseUrl:null==r?void 0:r.purchase_url,restrictRedistribution:null==r?void 0:r.restrict_redistribution,emailRequirement:null==r?void 0:r.email_requirement,checkoutEnabled:null==r?void 0:r.checkout_enabled,url:null!=r&&r.public_site_url?r.public_site_url:"",isFree:(void 0===n||0===n)&&void 0===(null==r?void 0:r.purchase_url),...(null==r?void 0:r.image)&&{image:r.image},...(null==r?void 0:r.mobile_image)&&{mobileImage:r.mobile_image},...(null==r?void 0:r.screenshots)&&{screenshots:r.screenshots},...(null==r?void 0:r.mobile_screenshots)&&{mobileScreenshots:r.mobile_screenshots},verifiedInstantDelivery:(null==i||null===(e=i.draft_attributes)||void 0===e?void 0:e.verified_instant_delivery)??!0}}async function eu(e){const{environment:t,data:a}=e,i=await y().callApi({eventName:"translateTemplateListingData",environment:t,data:a}),r=Jc(),n=kc().A.state,o=n.initialValues;if("success"!==i.type)return C().Qg(i),!1;{const{name:e,shortDescription:t,longDescription:a}=i.data;kc().A.setState({...n,...e&&{name:e},...t&&{shortDescription:t},...a&&{longDescription:a},...r||{},initialValues:{...o}})}return Ec.updateState({isTranslating:!1,isOpen:!1,shouldTranslate:!0,hasTranslated:!0}),!0}const tu=["gumroad.com","etsy.com","lemonsqueezy.com","payhip.com","ko-fi.com"];function au(e){try{const t=new URL(e);return!tu.find((e=>t.hostname.endsWith(e)))}catch(t){return!0}}var iu=()=>a(939768);a(803949);function ru(e,t){const a=!e.some((e=>e.locale===t));return i=t,z().Yr.some((e=>e===i))&&a;var i}function nu(e,t,a){const{isFeatureEnabled:n}=(0,Xe().O)("self_serve_localization_frontend"),o=(0,r().v3)(),s=(0,i.useCallback)((async()=>{if(!n||!e&&!t)return{localizedTemplates:[],localizedTemplateDrafts:[]};const a=e?{contentfulId:e,slug:void 0}:{contentfulId:void 0,slug:t??""},{localizedTemplates:i,localizedTemplateDrafts:r}=await async function(e){let{environment:t,args:a}=e;const i=await y().callApi({eventName:"getLocalizedTemplatesByIdOrSlug",environment:t,data:a});if("success"===i.type&&i.data.success){const{localizedTemplates:e,localizedTemplateDrafts:t}=i.data;return{localizedTemplates:e,localizedTemplateDrafts:t??[]}}return{localizedTemplates:[],localizedTemplateDrafts:[]}}({environment:o,args:a});return{localizedTemplates:i,localizedTemplateDrafts:r}}),[o,e,t,n]),[{value:d={localizedTemplates:[],localizedTemplateDrafts:[]}}]=(0,l().Yb)((async()=>n?s():{localizedTemplates:[],localizedTemplateDrafts:[]}),[s,n]);(0,i.useEffect)((()=>{var i,r,o;if(!n||!d.localizedTemplates||0===d.localizedTemplates.length&&0===d.localizedTemplateDrafts.length||!e&&!t)return;const s=(null===(i=d.localizedTemplates)||void 0===i?void 0:i.reduce(((e,t)=>{const a=(0,z().p5)(t.locale);return a&&e.push({locale:a,template:t}),e}),[]))||[];null===(r=d.localizedTemplateDrafts)||void 0===r||r.forEach((e=>{const t=s.find((t=>t.locale===e.locale)),a=(0,z().p5)(e.locale);if(a)if(t){var i;const t=s.find((t=>t.locale===e.locale));t&&"published"!==(null==t||null===(i=t.templateDraft)||void 0===i?void 0:i.status)&&(t.templateDraft=e)}else s.push({locale:a,templateDraft:e})}));const l=(0,z().p5)(a);if(l){if(1===s.length){if(!s.find((e=>{var t;return null===(t=e.template)||void 0===t?void 0:t.is_default_locale})))return void Lc.setLocales([{locale:l}])}ru(s,l)&&s.push({locale:l})}s.length>0&&(Lc.setLocales(s),Lc.setIsInitialized(!0));const c=s.find((e=>{var t;return null===(t=e.template)||void 0===t?void 0:t.is_default_locale}));null!=c&&null!==(o=c.template)&&void 0!==o&&o.contentful_id&&Lc.setContentfulId(c.template.contentful_id)}),[d,a,n,e,t])}function ou(e){const t=(0,r().v3)();return(0,n().K8)((()=>{if(!e)return!1;const a=new(yt().x1)(t,{table:"template_draft",id:e}),i=a.getStatus(),r=a.getPublishedVersion(),n=a.getRejectReason();return"in_review"===i||void 0!==r&&r>0||void 0!==n}),[e,t])}var su=()=>a(30175);function lu(e){const{type:t,id:a,contentfulId:o,locale:s}=e,l=(0,r().v3)(),c=(0,d().tz)(),u=s??(0,v().H)(c),p=(0,v().H)(c),g=(0,n().K8)((()=>su().A.getState()),[]),m=(0,n().K8)((()=>{var e;return null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.getSettings()}),[]),f=(0,i.useRef)(void 0),h=(0,i.useRef)(!1),x=(0,i.useRef)(void 0),y=(0,i.useRef)(void 0);(0,i.useEffect)((()=>{"new"!==t&&(f.current=void 0),y.current=a}),[t,a]),(0,n().K8)((()=>{if("new"===t){if(u===f.current)return;const e=e=>z().Yr.some((t=>t===e)),t=s??(null!=m&&m.preferred_locale&&e(null==m?void 0:m.preferred_locale)?null==m?void 0:m.preferred_locale:z().q);!function(e){let{locale:t,contentfulId:a,values:i}=e;const r=kc().A.getInitialState(),n=!a,o=n?{}:Jc(n)||{};t&&kc().A.setState({...r,...a&&{contentfulId:a},locale:t,isDefaultLocale:n,...i,...o,initialValues:{...r.initialValues,locale:t,isDefaultLocale:n,...i}})}({locale:t,contentfulId:o,values:g}),f.current=t}}),[t,null==m?void 0:m.preferred_locale,o,s,u,g]);const C=(0,n().K8)((()=>{if("new"===t){if(!o)return;const e=Lc.getDefaultLocaleTemplate();if(!e)return;const t=new(yt().$x)(l,{table:"template",id:e.id}).getTemplateDraftId();if(!t)return;return new(yt().x1)(l,{table:"template_draft",id:t}).getTags()}if(void 0!==a){if("published"===t){const e=new(yt().$x)(l,{table:"template",id:a}),t=e.getTemplateDraftId();if(!t)return;const i=new(yt().x1)(l,{table:"template_draft",id:t});return Xc(i,{contentfulId:e.getContentfulId(),isDefaultLocale:e.isDefaultLocale()}),x.current=a,i.getTags()}if("draft"===t){const e=new(yt().x1)(l,{table:"template_draft",id:a});return Xc(e),e.getTags()}(0,O().HB)(t)}}),[t,a,l,o]);(0,n().K8)((()=>{if(!C)return[];const e=[];for(const t of C){const a=(0,Bl().D)({table:"template_tag",locale:p,contentful_id:t}),i=new(yt().Qk)(l,{table:"template_tag",id:a});e.push({id:i.getContentfulId()||"",name:i.getName()||""})}const i=e.filter((e=>Boolean(e.name))),r="new"===t&&o||"draft"===t||"published"===t,n=!h.current||f.current||x.current===a||"draft"===t&&y.current!==a;r&&i.length>0&&i.length===C.length&&n&&(!function(e){const t=kc().A.state,a={...t.initialValues,categories:e};kc().A.setState({...t,categories:e,initialValues:a})}(i),h.current=!0)}),[C,l,t,o,f,x,a,p])}function du(){const[e,t]=(0,i.useState)(!0),a=(0,n().K8)((()=>Lc.state.locales),[]),r=(0,n().K8)((()=>Lc.state.isInitialized),[]),o=(0,n().K8)((()=>Lc.getDefaultLocaleTemplate()),[]),s=(0,n().K8)((()=>kc().A.state.locale),[]);return(0,i.useEffect)((()=>{if(!r)return;const e=o?o.locale===s:1===a.length;kc().A.setIsDefaultLocale(e),t(e)}),[o,s,a,r]),e}function cu(e){const t=(0,r().v3)();return(0,n().K8)((()=>{if(void 0===e)return;return new(yt().x1)(t,{table:"template_draft",id:e}).getStatus()}),[t,e])}const uu={isOpen:!1};class pu extends _e().default{getInitialState(){return{...uu}}openModal(){this.setState({...uu,isOpen:!0})}closeModal(){this.setState({...uu,isOpen:!1})}updateState(e){this.setState({...this.state,...e})}}const gu=new pu;function mu(e){let{isFormDisabled:t,marketplaceAcquisitionEmailError:a,marketplaceAcquisitionEmail:r,submissionFormStyles:n,disabledInputStyles:s}=e;const{isStatsigReady:l,isFeatureEnabled:c}=(0,Xe().O)("template_custom_email_snippet"),u=(0,i.useMemo)((()=>(0,_c().LZ)(r)??""),[r]),{isMobileWidth:p}=(0,m().LS)(),g=(f=p,(0,o().IS)((e=>({errorMessage:{fontSize:12,color:e.errorText},emailInputContainer:{display:"flex",gap:"12px",flexDirection:f?"column":"row"},emailPreview:{width:"100%",display:"flex",flexDirection:"column"},emailPreviewContent:{boxShadow:e.inputBoxShadow,borderRadius:"4px",padding:"8px 14px",height:216,backgroundColor:e.surface.wash},emailPreviewText:{fontSize:12,paddingBottom:4,color:"rgba(55, 53, 47, 0.8)"},emailPreviewHelp:{fontSize:12,color:"rgba(17, 17, 17, 0.5)"},emailPreviewHelpContainer:{alignSelf:"flex-end"}})),[f]));var f;return l&&c?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{style:g.emailInputContainer,children:[(0,A.jsx)(ar().o,{htmlLabel:"templateEmailSnippet",label:(0,A.jsx)(d().sA,{defaultMessage:"Custom Markdown email snippet",id:"creatorProfile.templateSubmission.marketplaceAcquisitionEmail"}),maxlength:1e3,textarea:!0,textareaElementAttributes:{rows:10},showCharacterCounter:!0,format:or().C.Default,style:{...n.inputStyle,...t?s.inputDisabled:{},fontFamily:"monospace"},inputStyle:t?s.noCursorAllowed:n.fullDescription,onChange:e=>{const t=kc().A.state;kc().A.setState({...t,marketplaceAcquisitionEmail:e.target.value})},onFocus:e=>Yc("marketplaceAcquisitionEmailError"),onBlur:e=>{zc({value:e.target.value,validationFunction:_c().$A,fieldName:"marketplaceAcquisitionEmailError"})},value:r,disabled:t}),(0,A.jsxs)("div",{style:g.emailPreview,children:[(0,A.jsx)("div",{style:g.emailPreviewText,children:(0,A.jsx)(d().sA,{defaultMessage:"Preview",id:"creatorProfile.templateSubmission.emailPreview"})}),(0,A.jsx)("div",{style:g.emailPreviewContent,children:(0,A.jsx)("div",{dangerouslySetInnerHTML:{__html:`\n\t\t\t\t\t\t\t\t\t <div>\n\t\t\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t\t\t\tbody {\n\t\t\t\t\t\t\t\t\t\t\t\t:first-child {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmargin-block-start: 0;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t.email-preview-content {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmax-height: 200px;\n\t\t\t\t\t\t\t\t\t\t\t\t\toverflow: scroll;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t\t\t\t\t<div class="email-preview-content">\n\t\t\t\t\t\t\t\t\t\t\t${u}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t`}})}),(0,A.jsx)("div",{style:g.emailPreviewHelpContainer,children:(0,A.jsx)(M().p,{onClick:()=>{he().A.setState({isOpen:!0,type:"MarkdownGuide",onAccept:()=>{},attributes:{source:"email_snippet"}})},style:g.emailPreviewHelp,children:(0,A.jsx)(d().sA,{defaultMessage:"Get help",id:"creatorProfile.templateSubmission.emailPreviewHelp"})})})]})]}),a&&(0,A.jsx)("div",{role:"alert",style:g.errorMessage,children:a})]}):(0,A.jsx)(A.Fragment,{})}var fu=()=>a(96248),hu=()=>a(383529),bu=()=>a(649940),vu=()=>a(476256),xu=()=>a(873735);function yu(e){let{longDescriptionError:t,isFormDisabled:a,longDescription:r}=e;const n=(0,o().IS)((()=>({editorWrapper:{border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",backgroundColor:"white",minHeight:"200px",fontSize:"14px",marginBottom:"-6px"},emailPreviewHelp:{fontSize:12,color:"rgba(17, 17, 17, 0.5)"},emailPreviewHelpContainer:{alignSelf:"flex-end"}})),[]),s=(0,i.useRef)(null);return(0,i.useEffect)((()=>{s.current&&s.current.setMarkdown(r||"")}),[r]),(0,A.jsxs)(Mi().O,{htmlLabel:"templateLongDescription",name:(0,A.jsx)(d().sA,{defaultMessage:"Full description",id:"creatorProfile.templateSubmission.fullDescription"}),errorMessage:t,children:[(0,A.jsx)("div",{style:n.editorWrapper,children:(0,A.jsx)(fu().R,{ref:s,markdown:r||"",onChange:e=>{const t=kc().A.state;kc().A.setState({...t,longDescription:e})},contentEditableClassName:"mdx-editor",readOnly:a,plugins:[(0,hu().xO)(),(0,bu().Zq)(),(0,vu().O)(),(0,xu().r)()]})}),(0,A.jsx)("div",{style:n.emailPreviewHelpContainer,children:(0,A.jsx)(M().p,{onClick:()=>{he().A.setState({isOpen:!0,type:"MarkdownGuide",onAccept:()=>{},attributes:{source:"long_description"}})},style:n.emailPreviewHelp,children:(0,A.jsx)(d().sA,{defaultMessage:"Get help",id:"creatorProfile.templateSubmission.emailPreviewHelp"})})})]})}var Cu=()=>a(668725);function wu(e){const{disabled:t}=e,a=(0,o().IS)((e=>({selectInputButton:{border:"none",boxShadow:e.inputBoxShadow,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"18px 14px",width:"100%"},selectText:{height:"20px",fontSize:14,lineHeight:"20px"},selectChevron:{width:16,height:16,fill:e.lightTextColor},accessLockingPickerSubtitle:{display:"inline-flex",gap:"4px",flexWrap:"wrap"},buttonStyles:{borderRadius:"4px",padding:"0px 4px"}})),[]),i=rs(),r=(0,d().tz)(),{selectedSellWith:s,isPaid:l}=(0,n().K8)((()=>({selectedSellWith:kc().A.state.checkoutEnabled?"notion":"other",isPaid:!kc().A.state.isFree})),[]),c=(0,n().K8)((()=>({open:{label:r.formatMessage({id:"creatorProfile.templateSubmissionForm.openRedistribution",defaultMessage:"Open"}),caption:r.formatMessage({id:"creatorProfile.templateSubmissionForm.allowRedistribution",defaultMessage:"Allow users to redistribute blocks in my template"})},restricted:{label:r.formatMessage({id:"creatorProfile.templateSubmissionForm.restrictedRedistribution",defaultMessage:"Restricted"}),caption:r.formatMessage({id:"creatorProfile.templateSubmissionForm.disallowRedistribution",defaultMessage:"Prevent users from redistributing blocks in my template"})}})),[r]),{selectedAccessLocking:u}=(0,n().K8)((()=>({selectedAccessLocking:kc().A.state.restrictRedistribution?"restricted":"open"})),[]),p={items:["open","restricted"],getKey:e=>e,selectedItem:u,onSelect:e=>{const t=kc().A.state;kc().A.setState({...t,restrictRedistribution:"restricted"===e})},originGap:6,width:"100%",minWidth:"100%",renderItem:e=>{const t=c[e.value];return(0,A.jsx)(it().A,{...e,title:null==t?void 0:t.label,caption:null==t?void 0:t.caption})},renderOrigin:e=>{var r;return(0,A.jsxs)(Sa().A,{size:"lg",...e,style:{...a.selectInputButton,...t?i.inputDisabled:{}},disabled:t,children:[(0,A.jsx)("span",{style:a.selectText,children:null===(r=c[u])||void 0===r?void 0:r.label}),(0,Cu().b)(a.selectChevron)]})},disabled:t,sameWidthAsOrigin:!0};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(hr().A,{disableTooltip:!("other"===s&&l),renderTooltip:()=>(0,A.jsx)(d().sA,{defaultMessage:"Access locking can not be set to restricted on templates sold via 3rd party platforms",id:"creatorProfile.templateSubmissionForm.accessLockingTooltip"}),placement:no().W.Bottom,render:e=>(0,A.jsx)("div",{...e,children:(0,A.jsx)(nt().A,{...p})})}),(0,A.jsx)("div",{style:a.accessLockingPickerSubtitle,children:(0,A.jsx)(rt().D,{colorName:"secondary",styleName:"Caption-12px/Regular",customStyles:a.accessLockingPickerSubtitle,children:(0,A.jsx)(d().sA,{id:"templateSubmission.accessLocking.label",defaultMessage:"Prevent people from duplicating templates across workspaces, or re-selling purchased templates in Marketplace. {link}",values:{link:(0,A.jsx)(ve().A,{href:ia().xS("guides.marketplaceSelling"),style:a.buttonStyles,external:!0,children:(0,A.jsx)(rt().D,{colorName:"primary",styleName:"Caption-12px/Regular",children:(0,A.jsx)(d().sA,{id:"templateSubmission.accessLocking.learnMore",defaultMessage:"Learn more"})})})}})})})]})}var ju=()=>a(199734),Su=()=>a(732770);function _u(e){const{disabled:t}=e,a=(0,r().v3)(),s=(0,d().tz)(),c=(0,o().IS)((e=>({textInput:{borderRadius:Ai().A.borderRadius,background:"none"},icon:{fill:e.lightTextColor,height:"16px",width:"16px"},token:{marginLeft:"6px",color:e.regularTextColor}})),[]),u=rs(),p=z().Yr.some((e=>e===Fo().locale))?Fo().locale:z().q,[g,m]=(0,i.useState)(""),[f,h]=(0,i.useState)(""),[b,v]=(0,i.useState)(!1),C=(0,n().K8)((()=>kc().A.state.categories),[]),w=(0,n().K8)((()=>kc().A.state.templateDraftId),[]),j=(0,n().K8)((()=>kc().A.state.isDefaultLocale),[]),S=ou(w),_=(0,n().K8)((()=>new Set(C.map((e=>e.id)))),[C]);(0,i.useEffect)((()=>{_.size>0&&!S&&j&&Zc(Array.from(_))}),[_,S,j]);const[{value:I,status:k}]=(0,l().Yb)((async()=>{var e;const t=await y().callApi({eventName:"getTemplateSearchResults",environment:a,data:{query:g,locale:p,limit:""!==g?10:100,type:"category",includeRootCategory:!0}});if("success"!==t.type||!t.data.success)return[];const i=null===(e=t.data.templatesCategories)||void 0===e||null===(e=e.items)||void 0===e?void 0:e.filter((e=>!x().zZ.has(e.contentful_id))).map((e=>{var t,a;return{id:e.contentful_id,name:e.name,icon:null==e?void 0:e.icon,rootCategory:{name:null===(t=e.rootCategory)||void 0===t?void 0:t.name,icon:null===(a=e.rootCategory)||void 0===a?void 0:a.icon}}}));if(Su().A.setKeyboardMode(!1),""===g){const e=At().$z(i,(e=>e.rootCategory.name)),t=Object.values(e),a=Math.max(...t.map((e=>e.length))),r=[];for(let i=0;i<a;i++)t.forEach((e=>{i<e.length&&r.push(e[i])}));return At().k4(r.slice(0,60))}return i}),[a,g,p],{debounce:500}),T=(0,i.useMemo)((()=>[{key:"default-teams-list",render:e=>(0,A.jsx)(ii().A,{...e,title:(0,A.jsx)(d().sA,{id:"templateSubmission.categoryPicker.title",defaultMessage:"Categories"}),loading:!1}),items:("resolved"===k?void 0!==I?I:[]:[]).filter((e=>!_.has(e.id))).map((e=>({key:e.id,render:t=>{var a;return(0,A.jsx)(it().A,{...t,title:e.name,right:(0,A.jsx)(M().p,{disabled:!0,icon:t=>(0,A.jsx)(Mu,{icon:e.icon,style:t,rootCategory:e.rootCategory}),children:null===(a=e.rootCategory)||void 0===a?void 0:a.name}),rightStyle:{paddingTop:2,paddingBottom:2}})},action:()=>{h(""),_.has(e.id)||kc().A.setState({...kc().A.state,categories:[...C,e]})}})))}]),[I,C,_,k]),P=(0,n().r6)((()=>kc().A.state.categories.length),[]);return(0,A.jsx)(es().Ay,{popupType:is().n.Popup,placementToOrigin:no().W.Bottom,sameWidthAsOrigin:!0,open:b,onDismiss:()=>{m(""),h(""),v(!1)},forceRemeasureStore:P,origin:(0,A.jsx)(as().Ay,{disabled:t,style:{...c.textInput,...t?u.inputDisabled:{}},focus:b,focusInitial:!1,focusAfterAnimation:!0,format:as().le.Share,inputDivStyle:{alignItems:"center"},value:f,onChange:e=>{m(e.target.value),h(e.target.value)},onClick:()=>{v(!0)},onRemoveLastToken:()=>{kc().A.setState({...kc().A.state,categories:kc().A.state.categories.slice(0,-1)})},type:"template-categories",tokens:C.map((e=>(0,A.jsx)(ts().A,{showRemoveButton:!t,isSingle:!1,style:{...c.token,...t?u.noCursorAllowed:{}},onClickRemove:t=>{t.stopPropagation(),kc().A.setState({...kc().A.state,categories:C.filter((t=>t.id!==e.id))})},disabled:t,value:(0,A.jsx)("div",{style:{display:"flex"},children:e.name}),format:Jo().NY.Small},e.id))),placeholder:t?"":s.formatMessage({id:"templateSubmission.categoryPicker.placeholder",defaultMessage:"Type to search..."}),onEmptySubmit:At().D_,showBorder:!0,right:(0,ju().U)(c.icon)}),render:()=>(0,A.jsx)(ye().A,{menuType:Se().gu.Popup,tokenInputHeader:!0,disableHeaderBorder:!0,maxHeight:"25dvh",children:(0,A.jsx)(ai().Ay,{type:ai().Oh.Vertical,initialFocus:0,sections:T})})})}const Mu=i.memo((function(e){var t,i;const{rootCategory:r,style:n,icon:o}=e,s=(null==r||null===(t=r.icon)||void 0===t?void 0:t.name)||(null==o?void 0:o.name)||"square",l=(null==r||null===(i=r.icon)||void 0===i?void 0:i.color)||(null==o?void 0:o.color)||"lightgray",d="teal"===l?"green":l;return(0,A.jsx)(a(854672).A,{type:"notion_icon",icon:`/icons/${s}_${d}.svg`,size:16,style:n})}),((e,t)=>{var a,i,r,n;return(null==e||null===(a=e.rootCategory.icon)||void 0===a?void 0:a.name)===(null==t||null===(i=t.rootCategory.icon)||void 0===i?void 0:i.name)&&(null==e||null===(r=e.rootCategory.icon)||void 0===r?void 0:r.color)===(null==t||null===(n=t.rootCategory.icon)||void 0===n?void 0:n.color)}));function Au(e){let{disabled:t}=e;const a=(0,o().IS)((e=>({selectInputButton:{border:"none",boxShadow:e.inputBoxShadow,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"18px 14px",width:"100%"},selectText:{height:"20px",fontSize:14,lineHeight:"20px"},selectChevron:{width:16,height:16,fill:e.lightTextColor},buttonStyles:{borderRadius:"4px",padding:"0px 4px"}})),[]),r=rs(),s=function(){const e=(0,d().tz)();return(0,i.useMemo)((()=>({none:{label:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.none",defaultMessage:"None"}),caption:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.noneCaption",defaultMessage:"Users do not need to share their email address with me to download my template"})},optional:{label:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.optional",defaultMessage:"Optional"}),caption:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.optionalCaption",defaultMessage:"Let users opt-in to sharing their email address with me to download my template"})},required:{label:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.required",defaultMessage:"Required"}),caption:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.requiredCaption",defaultMessage:"Users must share their email address with me to download my template"})}})),[e])}(),l=(0,n().K8)((()=>kc().A.state.emailRequirement||"none"),[]);return(0,A.jsx)(nt().A,{items:[...vt().fJ],getKey:e=>e,selectedItem:l,onSelect:e=>{kc().A.setState({...kc().A.state,emailRequirement:e})},originGap:6,width:"100%",minWidth:"100%",renderItem:e=>{const t=s[e.value];return(0,A.jsx)(it().A,{...e,title:t.label,caption:t.caption})},renderOrigin:e=>(0,A.jsxs)(Sa().A,{...e,size:"lg",style:{...a.selectInputButton,...t?r.inputDisabled:{}},disabled:t,children:[(0,A.jsx)("span",{style:a.selectText,children:s[l].label}),(0,Cu().b)(a.selectChevron)]}),disabled:t,sameWidthAsOrigin:!0})}function Iu(e){const{currentLocale:t}=e,a=(0,d().tz)(),s=(0,r().v3)(),l=(0,o().IS)((e=>({outerContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,maxWidth:960},barContainer:{display:"flex",padding:4,gap:4,background:e.accentColors.translucentGray[75],borderRadius:4,maxWidth:960,flex:1,flexWrap:"nowrap",overflowX:"auto",scrollbarWidth:"none",whiteSpace:"nowrap"},buttonBaseStyle:{padding:"5.5px 24px",flex:"1 1 auto"},buttonUnselected:{display:"flex",justifyContent:"center",alignItems:"center",color:e.accentColors.translucentGray[700],borderRadius:4,textAlign:"center"},buttonSelected:{color:e.accentColors.translucentGray[700],background:e.white,borderRadius:4},languageButton:{padding:6,border:"1px solid rgba(0, 0, 0, 0.06)",borderRadius:6,boxShadow:"0px 0.7px 1.46px 0px rgba(0, 0, 0, 0.01)"},languageContainer:{display:"flex",alignItems:"center",gap:4},languageIcon:{width:14,height:14},baseIndicator:{width:4,height:4,borderRadius:"50%",marginRight:4},inReviewIndicator:{background:e.creatorProfile.inReviewText},rejectedIndicator:{background:e.accentColors.red[500]},draftIndicator:{background:e.accentColors.gray[200]}})),[]),c=i.useRef(null),{setView:u,name:p}=$e(),{type:g}=Y(p),m=(0,n().K8)((()=>kc().A.state.isDefaultLocale),[])?["new","draft"].includes(g):void 0,f=(0,n().K8)((()=>kc().A.state.locale),[]),h=(0,z().p5)(f),b=h&&{locale:h,template:void 0,templateDraft:void 0},v=(0,n().K8)((()=>Lc.getLocales()),[]),x=m&&b?[b]:v,y=(0,n().K8)((()=>Lc.state.contentfulId),[]);i.useEffect((()=>{ua().Rt({element:c.current,environment:s,options:{behavior:"smooth",inline:"center",block:"nearest"}})}),[t,s]);const{isStatsigReady:C,isFeatureEnabled:w}=(0,Xe().O)("self_serve_localization_frontend");if(!C||!t||!v)return null;if(0===x.length||C&&!w)return null;const j=()=>{y&&(Lc.setContentfulId(y),gu.openModal())};return C&&(0,A.jsxs)("div",{style:l.outerContainer,children:[(0,A.jsxs)("div",{style:l.barContainer,children:[x.map((e=>{var i;const r=e.locale===t,n={...l.buttonBaseStyle,...l.buttonUnselected,...r?l.buttonSelected:{}},o=null==e||null===(i=e.templateDraft)||void 0===i?void 0:i.status,s=!!o&&["in_review","draft","rejected"].includes(o);return(0,A.jsxs)(ve().A,{style:n,hoveredStyle:n,pressedStyle:n,ref:r?c:null,onClick:()=>(e=>{var t,a,i,r;const n=null!==(t=e.template)&&void 0!==t&&t.id?`/profile/templates/form/published/${null===(a=e.template)||void 0===a?void 0:a.id}`:null!==(i=e.templateDraft)&&void 0!==i&&i.id?`/profile/templates/form/draft/${null===(r=e.templateDraft)||void 0===r?void 0:r.id}`:y?`/profile/templates/form/new/${y}?locale=${e.locale}`:void 0;n&&u(n)})(e),children:[s&&(0,A.jsx)("span",{style:{...l.baseIndicator,..."in_review"===o?l.inReviewIndicator:{},..."rejected"===o?l.rejectedIndicator:{},..."draft"===o?l.draftIndicator:{}}}),(0,A.jsx)(rt().D,{styleName:"Body-13px/Semibold",children:(0,fr().V)(a)[e.locale].caption})]},e.locale)})),y&&1===v.length&&(0,A.jsx)(ve().A,{style:{...l.buttonBaseStyle,...l.buttonUnselected},hoveredStyle:l.buttonUnselected,pressedStyle:l.buttonUnselected,onClick:j,children:(0,A.jsxs)("div",{style:l.languageContainer,children:[(0,gr().Q)(l.languageIcon),(0,A.jsx)(rt().D,{styleName:"Body-13px/Semibold",children:(0,A.jsx)(d().sA,{id:"TemplateFormLocaleBar.addLanguageCta",defaultMessage:"Add Language"})})]})})]}),y&&v.length>1&&(0,A.jsx)(ve().A,{onClick:j,style:l.languageButton,children:(0,gr().Q)(l.languageIcon)})]})}function ku(e){const{disabled:t}=e,a=(0,o().IS)((e=>({selectInputButton:{border:"none",boxShadow:e.inputBoxShadow,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"18px 14px",width:"100%"},selectText:{height:"20px",fontSize:14,lineHeight:"20px"},selectChevron:{width:16,height:16,fill:e.lightTextColor},SellWithPickerSubtitle:{display:"inline-flex",gap:"4px",flexWrap:"wrap"},buttonStyles:{borderRadius:"4px",padding:"0px 4px"}})),[]),i=rs(),r=(0,d().tz)(),s=(0,n().K8)((()=>({notion:{label:r.formatMessage({id:"creatorProfile.templateSubmissionForm.sellWithNotionTitle",defaultMessage:"Notion"}),caption:r.formatMessage({id:"creatorProfile.templateSubmissionForm.sellWithNotionDescription",defaultMessage:"Sell with Notion"})},other:{label:r.formatMessage({id:"creatorProfile.templateSubmissionForm.sellWithOtherTitle",defaultMessage:"Other"}),caption:r.formatMessage({id:"creatorProfile.templateSubmissionForm.sellWithOtherDescription",defaultMessage:"Sell via a 3rd party platform"})}})),[r]),{selectedSellWith:l}=(0,n().K8)((()=>({selectedSellWith:kc().A.state.checkoutEnabled?"notion":"other"})),[]),c={items:["notion","other"],getKey:e=>e,selectedItem:l,onSelect:e=>{const t=kc().A.state;let{restrictRedistribution:a,emailRequirement:i}=t;"other"===e&&(a=!1,i="none"),kc().A.setState({...t,checkoutEnabled:"notion"===e,restrictRedistribution:a,emailRequirement:i})},originGap:6,width:"100%",minWidth:"100%",renderItem:e=>{const t=s[e.value];return(0,A.jsx)(it().A,{...e,title:null==t?void 0:t.label,caption:null==t?void 0:t.caption})},renderOrigin:e=>{var r;return(0,A.jsxs)(Sa().A,{size:"lg",...e,style:{...a.selectInputButton,...t?i.inputDisabled:{}},disabled:t,children:[(0,A.jsx)("span",{style:a.selectText,children:null===(r=s[l])||void 0===r?void 0:r.label}),(0,Cu().b)(a.selectChevron)]})},disabled:t};return(0,A.jsx)(nt().A,{...c})}function Tu(e){const{isMobileWidth:t}=(0,m().LS)(),{disabled:a}=e,{price:r,purchaseUrl:s,isFree:l,checkoutEnabled:c,purchaseUrlError:u,priceError:p,verifiedInstantDelivery:g}=(0,n().K8)((()=>kc().A.state),[]),f=(0,o().IS)((e=>({priceFields:{transition:"height 100ms",display:"flex",flexDirection:"column",gap:"16px"},priceFieldsValues:{display:"flex",gap:"16px"},priceFieldsValuesMobile:{display:"flex",flexDirection:"column",gap:"12px"},priceFieldsCost:{width:"auto",flexBasis:"20%",flex:1},priceFieldsCostMobile:{width:"100%"},priceFieldsSellWith:{flexBasis:"160px",width:"auto"},priceFieldsSellWithMobile:{width:"100%"},priceFieldsUrl:{width:"auto",flex:2},priceFieldsUrlMobile:{width:"100%"},inputStyle:{background:"none",padding:"8px 14px"},subtext:{fontSize:12,color:e.lightTextColor},inlineLink:{color:e.regularTextColor,fontWeight:L().Wy.semibold}})),[]),h=rs(),b=function(){const e=ra();if(!e)return"required_seller_not_onboarded";return"optional"}(),[v,x]=(0,i.useState)(!1);(0,i.useEffect)((()=>{x(!!s&&au(s))}),[s]),(0,i.useEffect)((()=>{void 0!==r&&(c?Hc(r):Vc(r))}),[c,r]);const y=ra();return(0,A.jsxs)("section",{style:f.priceFields,children:[(0,A.jsx)(Mi().O,{htmlLabel:"paidTemplate",name:(0,A.jsx)(d().sA,{defaultMessage:"Paid template",id:"creatorProfile.templateSubmission.paidToggleLabel"}),children:(0,A.jsx)(ir,{isActive:!l,onClick:()=>{const e=!l,t=void 0===c?!e:c;kc().A.setState({...kc().A.state,isFree:e,...y?{checkoutEnabled:t}:{},...e?{priceError:void 0,purchaseUrlError:void 0}:{}})},disabled:a})}),l?null:(0,A.jsxs)("section",{style:t?f.priceFieldsValuesMobile:f.priceFieldsValues,children:["optional"===b&&(0,A.jsx)(Mi().O,{htmlLabel:"templateSellWith",style:t?f.priceFieldsSellWithMobile:f.priceFieldsSellWith,name:(0,A.jsx)(d().sA,{defaultMessage:"Sell with",id:"creatorProfile.templateSubmission.sellWithPickerLabel"}),children:(0,A.jsx)(ku,{disabled:a})}),(0,A.jsx)(Mi().O,{errorMessage:p,htmlLabel:"templatePrice",style:t?f.priceFieldsCostMobile:f.priceFieldsCost,name:(0,A.jsx)(d().sA,{defaultMessage:"Price (USD)",id:"creatorProfile.templateSubmission.priceLabel"}),children:(0,A.jsx)(or().A,{value:null==r?void 0:r.toFixed(2),type:"number",id:"templatePrice",onBlur:e=>{const t=e.target.value?Math.floor(Math.abs(100*parseFloat(e.target.value)))/100:void 0,a=kc().A.state;kc().A.setState({...a,price:t})},onFocus:e=>Yc("priceError"),min:"0.00",step:"0.01",placeholder:"0.00",style:{...f.inputStyle,...a?h.inputDisabled:{}},inputStyle:a?h.noCursorAllowed:{},disabled:a})}),("optional"!==b||!c)&&(0,A.jsxs)(Mi().O,{errorMessage:u,style:t?f.priceFieldsUrlMobile:f.priceFieldsUrl,name:(0,A.jsx)(d().sA,{defaultMessage:"Purchase URL",id:"creatorProfile.templateSubmission.purchaseUrlLabel"}),children:[(0,A.jsx)(or().A,{value:null==s?void 0:s.trim(),type:"url",onChange:e=>{const t=kc().A.state;kc().A.setState({...t,purchaseUrl:e.target.value})},onFocus:e=>Yc("purchaseUrlError"),onBlur:e=>{c?Yc("purchaseUrlError"):(qc(e.target.value),x(au(e.target.value)))},placeholder:"https://",style:{...f.inputStyle,...a?h.inputDisabled:{}},inputStyle:a?h.noCursorAllowed:{},disabled:a}),v&&(0,A.jsxs)("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,A.jsx)(to().A,{size:14,checked:g??!1,onClick:()=>{kc().A.setState({...kc().A.state,verifiedInstantDelivery:!g}),Yc("purchaseUrlError")},disabled:a}),(0,A.jsx)(rt().D,{styleName:"Caption-12px/Regular",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateSubmission.verifyInstantDelivery",defaultMessage:"I confirm that the template will be delivered instantly upon purchase via this link."})})]}),(0,A.jsx)("div",{style:f.subtext,children:"required_seller_not_onboarded"===b?(0,A.jsx)(d().sA,{id:"creatorProfile.templateSubmission.purchaseUrlSubtext.sellerNotOnboarded",defaultMessage:"You are not a Stripe verified creator. To sell directly with Notion get started <link>here</link>.",values:{link:e=>(0,A.jsx)(ta().A,{href:Pn().JZ.creatorProfile,external:!0,style:f.inlineLink,disableUnderline:!0,children:e})}}):null})]})]})]})}var Pu=()=>a(213962),Lu=()=>a(108944),Du=()=>a(299545),Ru=()=>a(259122),Eu=()=>a(167360),Bu=()=>a(201609);function Fu(e){const{desktopImage:t,mobileImage:a}=e;Ru().Ay.setState({...Ru().Ay.state,...t?{desktopImage:t}:{},...a?{mobileImage:a}:{}}),Eu().Ay.setState({...Eu().Ay.state,video:void 0})}function Uu(e){const t=kc().A.state.mobileScreenshots,a=kc().A.state.screenshots;if(t&&a){const i=1===t.length?[]:[...t.slice(0,e),...t.slice(e+1)],r=1===a.length?[]:[...a.slice(0,e),...a.slice(e+1)];kc().A.setState({...kc().A.state,screenshots:r,mobileScreenshots:i})}}function Nu(){Ru().Ay.setState({...Ru().Ay.state,desktopImage:Ru().BR})}function zu(){Ru().Ay.setState({...Ru().Ay.state,mobileImage:Ru().H8})}var Ou=()=>a(840303);var Wu=()=>a(380048),Vu=()=>a(742117),Hu=()=>a(839010);const qu=i.createContext({activeItem:{name:"",itemNode:(0,A.jsx)("div",{}),mainNode:(0,A.jsx)("div",{})}});function Ku(){const e=(0,i.useContext)(qu);if(!e)throw new Error("Must be used within an TemplateImageCarousel");return e}function Zu(e){const{items:t,shouldNotShowCarousel:a}=e,r=(0,d().tz)(),n=(0,i.useRef)(null),o=(0,i.useRef)(null),s=(0,i.useRef)(null),l=Gu(),[c,u]=(0,i.useState)(0),{canScrollLeft:p,canScrollRight:g,onScroll:m}=function(e){const{rootRef:t,scrollLeftRef:a,scrollRightRef:r}=e,[n,o]=(0,i.useState)(!1),[s,l]=(0,i.useState)(!1),d="function"==typeof IntersectionObserver,c=e=>{const[t]=e;o(!t.isIntersecting)},u=e=>{const[t]=e;l(!t.isIntersecting)},p=(0,i.useCallback)((e=>{const{current:a}=t;if(a){const t=Math.abs(.3*a.clientWidth),i="left"===e?-1:1;a.scrollTo({left:a.scrollLeft+t*i,behavior:"smooth"})}}),[t]);return(0,i.useEffect)((()=>{if(d&&a.current&&r.current&&t.current){const e=new IntersectionObserver(c,{threshold:[1],root:t.current}),i=new IntersectionObserver(u,{threshold:[1],root:t.current});return e.observe(a.current),i.observe(r.current),()=>{o(!1),l(!1),e.disconnect(),i.disconnect()}}return()=>{}}),[a,r,d,t]),{canScrollLeft:n,canScrollRight:s,onScroll:p}}({rootRef:n,scrollLeftRef:o,scrollRightRef:s}),f=(0,i.useCallback)((e=>{var a;const i=t[e];null===(a=i.onItemClick)||void 0===a||a.call(i),null!==i.mainNode&&u(e)}),[t]),h=t.length;(0,i.useEffect)((()=>{if(c===h-1){const e=Math.max(0,c-1);f(e)}}),[h,f,c]);const b=t[c];return(0,A.jsx)(qu.Provider,{value:{activeItem:b},children:(0,A.jsxs)("div",{style:l.imageCarousel,children:[(0,A.jsx)(Yu,{}),!a&&(0,A.jsxs)("div",{style:l.imageCarouselRowContainer,children:[(0,A.jsxs)("section",{style:l.imageCarouselRow,ref:n,id:"templateImageCarouselRow",children:[(0,A.jsx)("div",{style:l.carouselScrollStub,ref:o}),t.map(((e,t)=>(0,A.jsx)($u,{name:e.name,onClick:f,index:t,itemNode:e.itemNode,overlay:e.overlay},e.name))),(0,A.jsx)("div",{style:l.carouselScrollStub,ref:s})]}),p&&(0,A.jsx)("button",{style:{...l.arrow,...l.arrowLeft},onClick:()=>m("left"),"aria-label":r.formatMessage({id:"creatorProfile.templateSubmission.imageCarousel.leftButton",defaultMessage:"View previous images"}),type:"button",children:(0,Wu().I)(l.chevronIcon)}),g&&(0,A.jsx)("button",{style:{...l.arrow,...l.arrowRight},onClick:()=>m("right"),"aria-label":r.formatMessage({id:"creatorProfile.templateSubmission.imageCarousel.rightButton",defaultMessage:"View next images"}),type:"button",children:(0,Vu().V)(l.chevronIcon)})]})]})})}function $u(e){const{onClick:t,name:a,index:i,itemNode:r,overlay:n}=e,{activeItem:s}=Ku(),l=function(e){return(0,o().IS)((()=>({imageCarouselItem:{padding:"16px 10px",background:e?"rgba(246, 245, 244, 1)":""},imageCarouselItemContainer:{height:"auto",minWidth:"160px",position:"relative",flexShrink:0,borderRadius:"8px",overflow:"hidden"}})),[e])}(s.name===a);return(0,A.jsxs)("div",{style:l.imageCarouselItemContainer,children:[(0,A.jsx)(oa().A,{style:l.imageCarouselItem,onClick:()=>t(i),children:r}),n]})}function Yu(){const{activeItem:e}=Ku(),t=Gu();return(0,A.jsx)("div",{style:t.imageCarouselMain,children:null==e?void 0:e.mainNode})}function Gu(){return(0,o().IS)((()=>({imageCarousel:{display:"flex",gap:"32px",flexDirection:"column"},carouselScrollStub:{width:"1px"},imageCarouselRow:{position:"relative",display:"flex",alignItems:"center",marginLeft:"-10px",overflowX:"scroll",gap:"4px"},imageCarouselRowContainer:{position:"relative",overflow:"hidden"},imageCarouselMain:{width:"100%",background:"transparent",position:"relative"},arrow:{zIndex:2,width:"34px",height:"34px",borderRadius:"50%",display:"flex",backgroundColor:"rgba(26, 26, 26, 1)",justifyContent:"center",alignItems:"center",border:"1px solid rgba(26, 26, 26, 1)",position:"absolute",top:"40%",boxShadow:"\n\t\t\t\t\t0px 0.17499999701976776px 1.040624976158142px 0px rgba(0, 0, 0, 0.013),\n\t\t\t\t\t0px 0.800000011920929px 2.924999952316284px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t\t0px 2.0250000953674316px 7.846875190734863px 0px rgba(0, 0, 0, 0.027),\n\t\t\t\t\t0px 4px 18px 0px rgba(0, 0, 0, 0.04)\n\t\t\t\t"},arrowLeft:{left:"5px"},arrowRight:{right:"5px"},chevronIcon:{height:"20px",width:"20px",color:c().Tj.white}})),[])}function Xu(e){const{data:t}=e,a=(0,o().IS)((()=>({videoContainer:{width:"100%",height:"100%",overflow:"hidden",background:"rgba(0, 0, 0, 1)",position:"relative",borderRadius:"6px",aspectRatio:"16/7.4",boxShadow:"0px 0.6666666865348816px 3.502314805984497px 0px rgba(0, 0, 0, 0.0096),\n\t\t\t\t\t0px 2.933333396911621px 7.251852035522461px 0px rgba(0, 0, 0, 0.0157),\n\t\t\t\t\t0px 7.199999809265137px 14.462499618530273px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t\t0px 13.866666793823242px 28.348148345947266px 0px rgba(0, 0, 0, 0.0243),\n\t\t\t\t\t0px 23.33333396911621px 52.122684478759766px 0px rgba(0, 0, 0, 0.0304),\n\t\t\t\t\t0px 36px 89px 0px rgba(0, 0, 0, 0.04)"}})),[]);return(0,A.jsx)("div",{style:a.videoContainer,children:(0,A.jsx)(Hu().A,{source:t.iFrameSrcUrl,background:!1,isFullWidth:!0,isFullHeight:!0})})}function Qu(e){const{data:t}=e,a=tp();return(0,A.jsx)("div",{style:a.itemContainer,children:(0,A.jsx)("div",{style:a.desktopImageContainer,children:(0,A.jsx)(Tr().Ay,{src:t.thumbnailImage.url||"",style:a.desktopImage})})})}function Ju(e){var t,a;const i=(0,o().IS)((()=>({imageContainer:{display:"flex",width:"100%",height:"100%",justifyContent:"space-between",alignItems:"center",gap:"25px"},desktopImageContainerLoading:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},desktopImageContainer:{width:"80%",aspectRatio:"16/10",overflow:"hidden",boxShadow:"0px 0.6666666865348816px 3.502314805984497px 0px rgba(0, 0, 0, 0.0096),\n\t\t\t\t\t0px 2.933333396911621px 7.251852035522461px 0px rgba(0, 0, 0, 0.0157),\n\t\t\t\t\t0px 7.199999809265137px 14.462499618530273px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t\t0px 13.866666793823242px 28.348148345947266px 0px rgba(0, 0, 0, 0.0243),\n\t\t\t\t\t0px 23.33333396911621px 52.122684478759766px 0px rgba(0, 0, 0, 0.0304),\n\t\t\t\t\t0px 36px 89px 0px rgba(0, 0, 0, 0.04)",borderRadius:"6px"},mobileImageContainer:{width:"25%",overflow:"hidden",aspectRatio:"0.5",boxShadow:"0px 0.6666666865348816px 3.502314805984497px 0px rgba(0, 0, 0, 0.0096),\n\t\t\t\t\t0px 2.933333396911621px 7.251852035522461px 0px rgba(0, 0, 0, 0.0157),\n\t\t\t\t\t0px 7.199999809265137px 14.462499618530273px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t\t0px 13.866666793823242px 28.348148345947266px 0px rgba(0, 0, 0, 0.0243),\n\t\t\t\t\t0px 23.33333396911621px 52.122684478759766px 0px rgba(0, 0, 0, 0.0304),\n\t\t\t\t\t0px 36px 89px 0px rgba(0, 0, 0, 0.04)",borderRadius:"6px"},desktopImage:{width:"100%",height:"100%",objectFit:"cover",transition:"-webkit-filter 180ms"},mobileImage:{width:"100%",height:"100%",objectFit:"cover",transition:"-webkit-filter 180ms"},hoveredImage:{filter:"brightness(0.8)"}})),[]),{data:r,isHovered:n,isGeneratingImage:s}=e;return(0,A.jsxs)("div",{style:i.imageContainer,children:[(0,A.jsx)("div",{style:i.desktopImageContainer,children:s?(0,A.jsx)("div",{style:i.desktopImageContainerLoading,children:(0,A.jsx)(Si().A,{})}):(0,A.jsx)(Tr().Ay,{src:(null===(t=r.desktop)||void 0===t?void 0:t.url)||"",style:{...i.desktopImage,...n?i.hoveredImage:{}}})}),(0,A.jsx)("div",{style:i.mobileImageContainer,children:s?(0,A.jsx)("div",{style:i.desktopImageContainerLoading,children:(0,A.jsx)(Si().A,{})}):(0,A.jsx)(Tr().Ay,{style:{...i.mobileImage,...n?i.hoveredImage:{}},src:(null===(a=r.mobile)||void 0===a?void 0:a.url)||""})})]})}function ep(e){var t,a;const{data:i}=e,r=tp();return(0,A.jsxs)("div",{style:r.itemContainer,children:[(0,A.jsx)("div",{style:r.desktopImageContainer,children:(0,A.jsx)(Tr().Ay,{style:r.desktopImage,src:(null===(t=i.desktop)||void 0===t?void 0:t.url)||""})}),(0,A.jsx)("div",{style:r.mobileImageContainer,children:(0,A.jsx)(Tr().Ay,{style:r.mobileImage,src:(null===(a=i.mobile)||void 0===a?void 0:a.url)||""})})]})}function tp(){return(0,o().IS)((()=>({itemContainer:{display:"flex",width:"100%",height:"100%",justifyContent:"space-between",gap:"12px",alignItems:"center",padding:"12px",position:"relative"},desktopImageContainer:{width:"160px",aspectRatio:"16/10",overflow:"hidden",borderRadius:"6px",boxShadow:"\n\t\t\t\t0px 0.17499999701976776px 1.040624976158142px 0px rgba(0, 0, 0, 0.013),\n\t\t\t\t0px 0.800000011920929px 2.924999952316284px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t0px 2.0250000953674316px 7.846875190734863px 0px rgba(0, 0, 0, 0.027),\n\t\t\t\t0px 4px 18px 0px rgba(0, 0, 0, 0.04)\n\t\t\t\t"},mobileImageContainer:{width:"51px",height:"100px",overflow:"hidden",borderRadius:"6px",boxShadow:"\n\t\t\t\t0px 0.17499999701976776px 1.040624976158142px 0px rgba(0, 0, 0, 0.013),\n\t\t\t\t0px 0.800000011920929px 2.924999952316284px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t0px 2.0250000953674316px 7.846875190734863px 0px rgba(0, 0, 0, 0.027),\n\t\t\t\t0px 4px 18px 0px rgba(0, 0, 0, 0.04)\n\t\t\t\t"},desktopImage:{width:"100%",height:"100%",objectFit:"cover"},mobileImage:{width:"100%",height:"100%",objectFit:"cover"}})),[])}function ap(){return(0,o().IS)((e=>({imageUploadTabViewContainer:{display:"flex",flexDirection:"column",gap:"10px"},imagesContainer:{display:"flex",gap:"20px",alignItems:"center",maxHeight:"184px"},imageContainer:{display:"flex",flexDirection:"column",gap:"10px",width:"100%",height:"100%"},desktopImageContainer:{width:"80%",aspectRatio:"16/10",flexShrink:"initial"},mobileImageContainer:{width:"25%",aspectRatio:"0.5",flexShrink:"initial"},uploadedImageContainer:{width:"100%",height:"100%",position:"relative"},uploadedImage:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"6px"},toggleAndInputContainer:{display:"flex",flexDirection:"column",gap:"10px"},errorMessage:{fontSize:"12px",color:e.accentColors.red[500],width:"303px"}})),[])}function ip(e){const{children:t}=e,a=(0,o().IS)((()=>({customErrorText:{fontSize:"12px",color:"rgba(17, 17, 17, 0.5)"}})),[]);return(0,A.jsx)("span",{style:a.customErrorText,children:t})}function rp(e){const{isActive:t,onClick:a,disabled:i}=e,r=(0,o().IS)((()=>({toggleContainer:{display:"flex",alignItems:"center",gap:"10px"},uploadCustomImagesText:{fontSize:"12px",color:"rgba(51, 51, 51, 1)"}})),[]);return(0,A.jsxs)("div",{style:r.toggleContainer,children:[(0,A.jsx)(ir,{isActive:t,onClick:a,disabled:i}),(0,A.jsx)("span",{style:r.uploadCustomImagesText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.templateLink.toggle.label",defaultMessage:"Upload my own images"})})]})}function np(){return(0,o().IS)((()=>({titleText:{fontSize:"13.5px",color:"rgba(102, 102, 102, 1)",fontWeight:L().Wy.medium},subTitleText:{fontSize:"12px",color:"rgba(17, 17, 17, 0.5)"},uploadCustomImageContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:"4px"},uploadIcon:{width:"16px",height:"16px",color:"rgba(102, 102, 102, 1)"},titleContainer:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"}})),[])}function op(e){const{isCustomImageUpload:t,isDisabled:a}=e,i=np(),r=(0,o().IS)((()=>({desktopImageTemplateLinkPlaceholderText:{textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",padding:"12px"}})),[]);return a?null:t?(0,A.jsxs)("div",{style:i.uploadCustomImageContainer,children:[(0,A.jsxs)("div",{style:i.titleContainer,children:[(0,A.jsx)("span",{children:ss(i.uploadIcon)}),(0,A.jsx)("span",{style:i.titleText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.customImage.desktop.title",defaultMessage:"Desktop"})})]}),(0,A.jsx)("span",{style:i.subTitleText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.customImage.desktop.subtitle",defaultMessage:"2048 × 1280 · Required"})})]}):(0,A.jsx)("span",{style:r.desktopImageTemplateLinkPlaceholderText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.templateLink.placeholder",defaultMessage:"Enter template link to generate image"})})}function sp(e){const{style:t,onClick:a,isUploading:r,disabled:n,imageUrl:s,emptyState:l,imageOverlay:d,isStatic:c}=e,u=(0,o().IS)((()=>({imageUploadContainer:{display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(246, 245, 244, 1)",borderRadius:"6px",border:"1px solid rgba(0, 0, 0, 0.04)",height:"100%",padding:0},buttonHovered:{background:"rgba(0, 0, 0, 0.04)"},buttonHoveredWithImage:{background:"rgba(0, 0, 0, 0.2)"},hoveredDiv:{cursor:"pointer"}})),[]),p=(0,i.useRef)(null),{isHovered:g,isTouchDevice:m}=Lr(p),f=!c&&(g||m),h=g&&!c&&!n;return void 0===a||c?(0,A.jsx)("div",{style:{...u.imageUploadContainer,...h?u.hoveredDiv:{},...t},ref:p,children:(0,A.jsx)(lp,{imageUrl:s,imageOverlay:f?d:void 0,isUploading:r,emptyState:l,isStatic:c})}):(0,A.jsx)(M().p,{onClick:a,disabled:n,style:{...u.imageUploadContainer,...h?u.hoveredDiv:{},...t},ref:p,children:(0,A.jsx)(lp,{imageUrl:s,imageOverlay:f?d:void 0,isUploading:r,emptyState:l})})}function lp(e){const{isUploading:t,imageUrl:a,emptyState:r,imageOverlay:n,isStatic:s}=e,l=ap(),d=(0,o().IS)((()=>({imageHovered:{filter:"brightness(0.8)"}})),[]),c=(0,i.useRef)(null),{isHovered:u,isTouchDevice:p}=Lr(c);return t?(0,A.jsx)(Si().A,{}):a?(0,A.jsxs)("div",{style:l.uploadedImageContainer,ref:c,children:[n,(0,A.jsx)(Tr().Ay,{src:a,style:{...l.uploadedImage,...!u||p||s?{}:d.imageHovered}})]}):(0,A.jsx)(A.Fragment,{children:r})}function dp(e){const{onClick:t}=e,a=(0,o().IS)((()=>({button:{top:-8,right:-4,position:"absolute",borderRadius:"12px",height:"24px",padding:"0px",zIndex:2},icon:{height:24,width:24,fill:"white"}})),[]);return(0,A.jsx)(Qi().u,{testId:"remove-image-preview-button",variant:"dark",style:a.button,onClick:t,children:(0,Pu().s)(a.icon)})}function cp(e){const{isCustomImageUpload:t,isDisabled:a}=e,i=np();return a?null:t?(0,A.jsxs)("div",{style:i.uploadCustomImageContainer,children:[(0,A.jsxs)("div",{style:i.titleContainer,children:[(0,A.jsx)("span",{children:ss(i.uploadIcon)}),(0,A.jsx)("span",{style:i.titleText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.customImage.mobile.title",defaultMessage:"Mobile"})})]}),(0,A.jsx)("span",{style:i.subTitleText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.customImage.mobile.subtitle",defaultMessage:"750 × 1500"})}),(0,A.jsx)("span",{style:i.subTitleText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.customImage.mobile.required",defaultMessage:"Required"})})]}):null}function up(e){const{desktopImage:t,mobileImage:a,errorMessage:o}=(0,n().K8)((()=>Ru().Ay.state),[]),{screenshots:s}=(0,n().K8)((()=>kc().A.state),[]),{onToggle:l,type:c}=e,[u,p]=(0,i.useState)(null),g=(0,r().v3)(),m=ap(),f=(0,i.useCallback)((e=>{null!==u&&Fu("desktop"===u?{desktopImage:{url:e,width:Ru().c4,height:Ru().$z}}:{mobileImage:{url:e,width:Ru()._3,height:Ru().jj}})}),[u]),h=(0,i.useCallback)((e=>{"upload"===e.type&&zn().log({level:"error",from:"TemplateSubmissionFormImageUpload",type:"uploadError",error:(0,On().n6)(e.error)}),Ru().Ay.setState({...Ru().Ay.state,errorMessage:e.message})}),[]),b=(0,i.useCallback)((()=>{Ru().Ay.setState({...Ru().Ay.state,errorMessage:void 0,isUploading:!0})}),[]),v=(0,i.useCallback)((()=>{p(null),Ru().Ay.setState({...Ru().Ay.state,errorMessage:void 0,isUploading:!1})}),[]),{uploadFile:y,isUploading:C}=(0,ds().lN)({onStart:b,onSuccess:f,onError:h,onComplete:v,environment:g});(0,i.useEffect)((()=>{null!==u&&y()}),[u]);const w=C&&"desktop"===u,j=C&&"mobile"===u,S=s&&s.length===x().x_&&"new"===c,_=C||S,M=w||S,I=j||S;return(0,A.jsxs)("div",{style:m.imageUploadTabViewContainer,children:[(0,A.jsxs)("div",{style:m.imagesContainer,children:[(0,A.jsx)(sp,{style:m.desktopImageContainer,isUploading:w,onClick:()=>{"desktop"!==u?p("desktop"):y()},disabled:_,imageUrl:t.url,emptyState:(0,A.jsx)(op,{isCustomImageUpload:!0,isDisabled:M}),imageOverlay:(0,A.jsx)(dp,{onClick:()=>Nu()})}),(0,A.jsx)(sp,{style:m.mobileImageContainer,isUploading:j,onClick:()=>{"mobile"!==u?p("mobile"):y()},disabled:_,imageUrl:a.url,emptyState:(0,A.jsx)(cp,{isCustomImageUpload:!0,isDisabled:I}),imageOverlay:(0,A.jsx)(dp,{onClick:()=>zu()})})]}),(0,A.jsxs)("div",{style:m.toggleAndInputContainer,children:[(0,A.jsx)(rp,{isActive:!0,onClick:l}),S&&(0,A.jsx)(ip,{children:(0,A.jsx)(d().sA,{id:"creatorPlatform.template.imageUpload.status.maxLimit",defaultMessage:"You can only upload a maximum of {maxNumImages} images.",values:{maxNumImages:x().x_}})}),void 0!==o&&(0,A.jsx)("span",{style:m.errorMessage,children:o})]})]})}qu.displayName="TemplateImageCarouselContext";var pp=()=>a(982615);function gp(e){const t=(0,d().tz)(),{generationFn:a,validationFn:r}=e,[n,o]=(0,i.useState)("idle"),[s,l]=(0,i.useState)(null);return{status:n,errorMessage:s,onScreenshotGeneration:async()=>{try{l(null),o("parsing"),await r(),o("uploading"),await a(),o("success")}catch(e){o("error"),e instanceof Error?l(e.message):l(t.formatMessage({id:"templates.screenshotGeneration.generic.error",defaultMessage:"Unable to generate screenshot. Please try again."}))}}}}function mp(e){const{inputProps:t,buttonProps:a}=e,i=(0,o().IS)((()=>({linkContainer:{display:"flex",alignItems:"center",gap:"20px"}})),[]);return(0,A.jsxs)("div",{style:i.linkContainer,children:[(0,A.jsx)(or().A,{...t}),(0,A.jsx)(Qi().u,{...a,children:(0,A.jsx)(d().sA,{defaultMessage:"Generate",id:"creatorProfile.templateImageUploader.dialog.link.generate"})})]})}function fp(e){const{status:t,left:a,children:i}=e,r=(0,o().IS)((e=>({statusContainer:{display:"flex",alignItems:"center",gap:"2px"},statusText:{fontSize:"12px"},parsingText:{color:"rgba(17, 17, 17, 0.5)"},generatingText:{color:"rgba(39, 145, 141, 1)"},successText:{color:"rgba(42, 157, 153, 1)"},errorText:{color:e.accentColors.red[500]}})),[]),n={...r.statusText,..."parsing"===t?r.parsingText:{},..."uploading"===t?r.generatingText:{},..."success"===t?r.successText:{},..."error"===t?r.errorText:{}};return(0,A.jsxs)("div",{style:{...r.statusContainer,...n},children:[a,i]})}function hp(e){const{onToggle:t,type:a}=e,s=(0,r().v3)(),l=(0,o().IS)((e=>({templateLinkContainer:{display:"flex",flexDirection:"column",gap:"4px"},templateLinkInput:{backgroundColor:e.white,height:"36px",width:"303px"},checkmarkIcon:{width:"14px",height:"14px"},uploadStatusMessageContainer:{width:"303px"}})),[]),c=rs(),u=ap(),{desktopImage:p,mobileImage:g,errorMessage:m}=(0,n().K8)((()=>Ru().Ay.state),[]),{screenshots:f}=(0,n().K8)((()=>kc().A.state),[]),{status:h,onScreenshotGeneration:b,errorMessage:v}=gp({validationFn:async()=>{try{const e=await async function(e){const t=kc().A.state,{environment:a,url:i}=e;if(!i){const e=new(Ii().rT)("Missing template URL.",{type:"template_missing_url"});return{success:!1,error:(0,Ta().DX)(V().A.getIntl(),e.body)}}const r=(0,Re().parseRoute)({url:i.trim(),baseUrl:Be().A.domainBaseUrl,isMobile:a.device.isMobile,publicDomainName:Be().A.publicDomainName,protocol:Be().A.protocol,currentUrl:window.location.href});if(!r||"page"!==r.name||!r.blockId){const e=new(Ii().rT)(`Invalid template URL ${i}`,{type:"template_not_exists"});return{success:!1,error:(0,Ta().DX)(V().A.getIntl(),e.body)}}if(!r.requestedOnPublicDomain){const e=new(Ii().rT)(`Template ${i} is not on public domain`,{type:"template_not_on_public_domain"});return{success:!1,error:(0,Ta().DX)(V().A.getIntl(),e.body)}}if("page"===r.name){const e=new(yt().Bv)(a,{table:li().ev,id:r.blockId});await(0,Du().hS)(e);const i=(0,Lu().fU)(e);let n=!1;for(const a of i)if(a.id===t.uuid){n=!0;break}if(!n){const e=new(Ii().rT)("This link doesn’t seem to belong to the same template. Please try again.",{type:"template_not_child_of_parent"});return{success:!1,error:(0,Ta().DX)(V().A.getIntl(),e.body)}}}return{success:!0}}({environment:s,url:y});if(!e.success)throw new Error(e.error)}catch(e){throw e}},generationFn:async()=>{const e=vp(a,y);try{await async function(e){const{url:t,environment:a}=e,i=await Ic({url:t,environment:a}).catch((e=>{throw e}));return i&&"value"in i&&Fu({desktopImage:i.value.desktop,mobileImage:i.value.mobile}),!0}({environment:s,url:e})}catch(t){throw t}}}),[y,C]=(0,i.useState)(""),w=f&&f.length===x().x_&&"new"===a,j="uploading"===h||"parsing"===h||w,S=(0,i.useCallback)((()=>{const e=vp(a,y);C(e);try{Ru().Ay.setState({...Ru().Ay.state,isUploading:!0}),b()}catch(t){}finally{Ru().Ay.setState({...Ru().Ay.state,isUploading:!1})}}),[b,y,a]);return(0,A.jsxs)("div",{style:u.imageUploadTabViewContainer,children:[(0,A.jsxs)("div",{style:u.imagesContainer,children:[(0,A.jsx)(sp,{isStatic:"cover"===a,style:u.desktopImageContainer,isUploading:"uploading"===h,imageUrl:p.url,emptyState:(0,A.jsx)(op,{isCustomImageUpload:!1,isDisabled:j}),imageOverlay:(0,A.jsx)(dp,{onClick:()=>Nu()}),disabled:j}),(0,A.jsx)(sp,{isStatic:"cover"===a,style:u.mobileImageContainer,isUploading:"uploading"===h,imageUrl:g.url,emptyState:(0,A.jsx)(cp,{isCustomImageUpload:!1,isDisabled:j}),imageOverlay:(0,A.jsx)(dp,{onClick:()=>zu()}),disabled:j})]}),(0,A.jsxs)("div",{style:u.toggleAndInputContainer,children:["cover"!==a?(0,A.jsx)(rp,{isActive:!1,onClick:t,disabled:j}):null,(0,A.jsxs)("div",{style:l.templateLinkContainer,children:[(0,A.jsx)(mp,{inputProps:{format:or().C.Default,placeholder:"https://",value:y,style:{...l.templateLinkInput,...j?c.inputDisabled:{}},inputStyle:{...j?c.noCursorAllowed:{}},onChange:e=>C(e.target.value),type:"url",disabled:j},buttonProps:{onClick:S,variant:"light",disabled:!y.startsWith("https://")||j}}),(0,A.jsxs)("div",{style:l.uploadStatusMessageContainer,children:[w&&(0,A.jsx)(ip,{children:(0,A.jsx)(d().sA,{id:"creatorPlatform.template.imageUpload.status.maxLimit",defaultMessage:"You can only upload a maximum of {maxNumImages} images.",values:{maxNumImages:x().x_}})}),"idle"!==h&&(0,A.jsx)(fp,{status:h,left:"success"===h?(0,A.jsx)("span",{children:(0,pp().$)(l.checkmarkIcon)}):void 0,children:(0,A.jsx)(bp,{status:h,errorMessage:v})}),m?(0,A.jsx)("span",{style:u.errorMessage,children:m}):null]})]})]})]})}function bp(e){const{status:t,errorMessage:a}=e;return"parsing"===t?(0,A.jsx)(d().sA,{id:"creatorPlatform.template.imageUpload.templateLink.status.parsing",defaultMessage:"Parsing link..."}):"uploading"===t?(0,A.jsx)(d().sA,{id:"creatorPlatform.template.imageUpload.templateLink.status.generating",defaultMessage:"Generating Preview..."}):"success"===t?(0,A.jsx)(d().sA,{id:"creatorPlatform.template.imageUpload.templateLink.status.success",defaultMessage:"Preview saved."}):"error"===t?(0,A.jsx)(A.Fragment,{children:a}):void(0,O().HB)(t)}function vp(e,t){if("cover"===e){const e=new URL(t);return`${e.origin}${e.pathname}`}return t}function xp(e){const{type:t}=e,[a,r]=(0,i.useState)(!1),n=i.useCallback((()=>{r((e=>!e))}),[]);return a&&"cover"!==t?(0,A.jsx)(up,{onToggle:n,type:t}):(0,A.jsx)(hp,{onToggle:n,type:t})}function yp(){const e=(0,n().K8)((()=>Eu().Ay.state.video),[]),t=(0,n().K8)((()=>kc().A.state.videos||[]),[]),a=(0,d().tz)(),s=(0,r().v3)(),[l,c]=(0,i.useState)(""),[u,p]=(0,i.useState)((()=>(null==e?void 0:e.url)||"")),g=rs(),m=(0,o().IS)((e=>({videoTabContainer:{display:"flex",flexDirection:"column",gap:"10px"},iframeContainer:{width:"400px",height:"224px",position:"relative",background:"rgba(0, 0, 0, 1)"},videoLinkInputContainer:{display:"flex",flexDirection:"column",gap:"4px"},videoLinkInput:{background:"none",height:"36px",width:"303px",padding:"8px 14px"},statusMessageContainer:{width:"303px"}})),[]),{status:f,onScreenshotGeneration:h,errorMessage:b}=gp({validationFn:async()=>{},generationFn:async()=>{const e=await(0,Bu().l9)({environment:s,url:u});if(!e.success)throw new Error(e.error);(0,Bu().B4)({video:e.templateVideo})}});(0,i.useEffect)((()=>{e?(async()=>{if(e){const t=await(0,Bu().W)({environment:s,video:e});c(t.iFrameSrcUrl)}})():(c(""),p(""))}),[e,s]);const v="parsing"===f||"error"===f,x=0!==t.length&&!e;return(0,A.jsxs)("div",{style:m.videoTabContainer,children:[l&&(0,A.jsx)("div",{style:m.iframeContainer,children:(0,A.jsx)(Hu().A,{source:l,background:!1,style:m.iframeContainer,isFullHeight:!0,isFullWidth:!0})}),(0,A.jsxs)("div",{style:m.videoLinkInputContainer,children:[(0,A.jsx)(mp,{inputProps:{format:or().C.Default,placeholder:a.formatMessage({id:"creatorPlatform.templates.imageUpload.video.link.placeholder",defaultMessage:"Enter YouTube or Vimeo link..."}),value:u,onChange:e=>p(e.target.value),type:"url",disabled:x,style:{...m.videoLinkInput,...x?g.inputDisabled:{}},inputStyle:x?g.noCursorAllowed:{}},buttonProps:{onClick:h,variant:"light",disabled:0===u.length||x}}),(0,A.jsxs)("div",{style:m.statusMessageContainer,children:[x&&(0,A.jsx)(ip,{children:(0,A.jsx)(d().sA,{id:"creatorPlatform.template.videoUpload.status.maxLimit",defaultMessage:"Only one preview video is supported at this time."})}),v&&(0,A.jsx)(fp,{status:f,children:(0,A.jsx)(Cp,{status:f,errorMessage:b})})]})]})]})}function Cp(e){const{status:t,errorMessage:a}=e;return"parsing"===t?(0,A.jsx)(d().sA,{id:"creatorPlatform.template.imageUpload.templateLink.status.parsing",defaultMessage:"Parsing link..."}):"error"===t?(0,A.jsx)(A.Fragment,{children:a}):void(0,O().HB)(t)}function wp(e){const{selectedIndex:t,onTabChange:a,type:i}=e,r=(0,o().IS)((e=>({tab:{color:"rgba(17, 17, 17, 0.5)"},selectedTab:{color:e.regularTextColor}})),[]),n=Object.keys(Sp).filter((e=>"cover"!==i||"image"===e)).map((e=>{if((0,O().O)(Sp,e))return Sp[e].tabLabel}));return(0,A.jsx)(Pe().Ay,{tabs:n,selectedIndex:t,onChange:e=>{a(e)},tabStyle:r.tab,selectedTabStyle:r.selectedTab})}const jp=["image","video"],Sp={image:{index:jp.indexOf("image"),tabLabel:(0,A.jsx)("span",{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.tabs.image",defaultMessage:"Image"})},"templateImageUploadTab-image")},video:{index:jp.indexOf("video"),tabLabel:(0,A.jsx)("span",{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.tabs.video",defaultMessage:"Video"})},"templateImageUploadTab-video")}};function _p(e){const t=(0,r().v3)(),{type:a}=e,[s,l]=(0,i.useState)("video"===a?1:0),c=(0,o().IS)((e=>({imageDialogContainer:{display:"flex",flexDirection:"column"},tabMenuDialogContainer:{position:"relative",marginBottom:"20px"},removeButton:{position:"absolute",top:8,right:0,fontSize:"13.5px",color:e.accentColors.red[500],zIndex:2},actionContainer:{display:"flex",justifyContent:"flex-end",paddingRight:"0",marginTop:"24px",marginBottom:"-10px",gap:"12px"}})),[]),u=(0,d().tz)(),{desktopImage:p,mobileImage:g}=(0,n().K8)((()=>Ru().Ay.state),[]),{video:m}=(0,n().K8)((()=>Eu().Ay.state),[]),f=i.useCallback((()=>{const e=function(e){const{intl:t}=e,{desktopImage:a,mobileImage:i}=Ru().Ay.state;return i.url&&!a.url?(Ru().Ay.setState({...Ru().Ay.state,errorMessage:t.formatMessage({id:"creatorPlatform.template.imageUpload.desktopImage.required.error",defaultMessage:"Desktop image is required."})}),!1):!(a.url&&!i.url&&(Ru().Ay.setState({...Ru().Ay.state,errorMessage:t.formatMessage({id:"creatorPlatform.template.imageUpload.mobileImage.required.error",defaultMessage:"Mobile image is required."})}),1))}({intl:u});e&&(!function(e,t){var a,i;const{desktopImage:r,mobileImage:n,index:o}=Ru().Ay.state,s=[...kc().A.state.screenshots||[]],l=[...kc().A.state.mobileScreenshots||[]];if((void 0!==o||r.url||n.url)&&(void 0===o||r.url!==(null===(a=s[o])||void 0===a?void 0:a.url)||n.url!==(null===(i=l[o])||void 0===i?void 0:i.url)))if(void 0===o||r.url||n.url){if("cover"===e)return S().vd(t,"creator_profile_template_update_cover"),void(r.url&&n.url&&kc().A.setState({...kc().A.state,image:r,mobileImage:n}));void 0===o?(s.push(r),l.push(n)):(s[o]=r,l[o]=n),S().vd(t,"creator_profile_template_add_image_preview"),kc().A.setState({...kc().A.state,screenshots:s,mobileScreenshots:l})}else Uu(o)}(a,t),(0,Bu().YQ)(t),C().zw())}),[u,a,t]),h=i.useCallback((e=>{l(e)}),[]),b=0===s&&(Boolean(null==p?void 0:p.url)||Boolean(null==g?void 0:g.url)),v="cover"!==a&&(b||1===s&&m);return(0,A.jsxs)("div",{style:c.imageDialogContainer,children:[(0,A.jsxs)("div",{style:c.tabMenuDialogContainer,children:[(0,A.jsx)(wp,{selectedIndex:s,onTabChange:h,type:a}),v&&(0,A.jsx)(M().p,{onClick:()=>{Ru().Ay.setState({...Ru().Ay.state,desktopImage:Ru().BR,mobileImage:Ru().H8}),(0,Bu().gg)()},style:c.removeButton,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templates.imageUpload.remove",defaultMessage:"Remove"})})]}),(0,A.jsx)("div",{children:0===s?(0,A.jsx)(xp,{type:a}):1===s?(0,A.jsx)(yp,{}):null}),(0,A.jsxs)("div",{style:c.actionContainer,children:[(0,A.jsx)(Qi().u,{variant:"neutral",onClick:()=>C().zw(),children:(0,A.jsx)(d().sA,{defaultMessage:"Cancel",id:"creatorPlatform.templates.imageUpload.cancel"})}),(0,A.jsx)(Qi().u,{variant:"dark",onClick:f,children:(0,A.jsx)(d().sA,{defaultMessage:"Save",id:"creatorPlatform.templates.imageUpload.save"})})]})]})}function Mp(e){const{type:t}=e,a=(0,o().IS)((e=>({imageUploaderHeaderContainer:{display:"flex",flexDirection:"column",gap:"4px"},imageUploaderHeader:{fontSize:"24px",fontWeight:L().Wy.bold,color:e.regularTextColor},imageUploaderSubheader:{fontSize:"15px",color:e.regularTextColor},closeIconButtonContainer:{position:"absolute",top:"12px",right:"12px"},closeIconButton:{padding:"4px"},closeIconDisabled:{cursor:"not-allowed"},closeIconButtonHovered:{background:"rgba(0, 0, 0, 0.04)",borderRadius:"4px"},closeIcon:{width:"20px",height:"20px"}})),[]),{isUploading:r}=(0,n().K8)((()=>Ru().Ay.state),[]),s=(0,i.useCallback)((()=>{C().zw()}),[]);return(0,A.jsxs)("div",{style:a.imageUploaderHeaderContainer,children:[(0,A.jsx)("div",{style:a.closeIconButtonContainer,children:(0,A.jsx)(M().p,{style:{...a.closeIconButton,...r?a.closeIconDisabled:{}},hoveredStyle:a.closeIconButtonHovered,onClick:s,disabled:r,children:(0,A.jsx)("span",{children:(0,_().u)(a.closeIcon)})})}),(0,A.jsx)("span",{style:a.imageUploaderHeader,children:(0,A.jsx)(Ap,{type:t})}),(0,A.jsx)("span",{style:a.imageUploaderSubheader,children:(0,A.jsx)(Ip,{type:t})})]})}function Ap(e){const{type:t}=e;return"image"===t||"new"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.header.images",defaultMessage:"Add Preview"}):"cover"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.header.cover",defaultMessage:"Template Cover"}):"video"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.header.video",defaultMessage:"Add Video Preview"}):void(0,O().HB)(t)}function Ip(e){const{type:t}=e;return"new"===t||"video"===t||"image"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.subheader",defaultMessage:"Link to another location in your template, upload your own images, or link to a video."}):"cover"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.subheader.cover",defaultMessage:"Cover is your template’s default preview image. It is automatically generated from its link, or can be set to another location in your template."}):void(0,O().HB)(t)}const kp=[{itemNode:(0,A.jsx)("div",{}),mainNode:(0,A.jsx)(Lp,{}),name:"loading"}];function Tp(e){const{type:t,index:a}=e,i=(0,o().IS)((()=>({button:{position:"absolute",top:"4px",right:"4px",borderRadius:"12px",height:"24px",padding:"0px"},icon:{height:24,width:24,fill:"white"}})),[]),n=(0,r().v3)();return(0,A.jsx)(Qi().u,{variant:"dark",style:i.button,onClick:()=>function(e){const{index:t,type:a,environment:i}=e;"image"===a?(S().vd(i,"creator_profile_template_remove_image_preview"),Uu(t)):"video"===a&&(S().vd(i,"creator_profile_template_remove_video_preview"),(0,Bu().Mx)(t))}({type:t,index:a,environment:n}),children:(0,Pu().s)(i.icon)})}function Pp(){const e=rs(),t=(0,o().IS)((e=>({addPreviewThumbnailContainer:{display:"flex",height:"110px",alignItems:"center",flexDirection:"column",justifyContent:"center",gap:"4px",borderRadius:"6px",border:"1px solid rgba(0, 0, 0, 0.04)",backgroundColor:"rgba(246, 245, 244, 1)",cursor:"pointer"},addPreviewIcon:{width:"18px",height:"18px"},addPreviewText:{fontSize:"13.5px",color:"rgba(102, 102, 102, 1)"},imageUploaderDialog:{width:"456px"},mainImageEditContainer:{opacity:0,position:"absolute",bottom:"12px",right:"12px",transition:"opacity 180ms",display:"flex",gap:"14px"},hoveredMainImageEditContainer:{opacity:1},errorMessage:{fontSize:12,color:e.errorText}})),[]),a=(0,r().v3)(),{screenshots:i,coverImage:s,hasImages:l,videos:c,imageError:u,status:p,isGeneratingImage:g}=(0,n().K8)((()=>{const{mobileImage:e,image:t,mobileScreenshots:a,screenshots:i,imageError:r,videos:n,status:o,isGeneratingImage:s}=kc().A.state,l={mobile:e,desktop:t},d=null==i?void 0:i.map(((e,t)=>({mobile:null==a?void 0:a[t],desktop:e})));return{coverImage:l,hasImages:Boolean(t&&t.url),screenshots:d,videos:n,status:o,isGeneratingImage:s,imageError:r}}),[]),m=(0,Ou().K)({videos:c}),f="in_review"===p||g,h=e=>{!function(e){"image"===e.type||"cover"===e.type?Ru().Ay.setState({...Ru().Ay.state,desktopImage:e.desktopImage,mobileImage:e.mobileImage,index:e.index}):"video"===e.type?Eu().Ay.setState({video:e.video,index:e.index}):"new"===e.type&&(Ru().Ay.reset(),Eu().Ay.reset())}(e),C().ui({items:[],message:(0,A.jsx)(Mp,{type:e.type}),description:(0,A.jsx)(_p,{type:e.type}),showCancel:!1,keepFocus:!0,mode:"wide",innerStyle:t.imageUploaderDialog,disableBackgroundDismiss:!0,onDismiss:()=>{Ru().Ay.reset(),Eu().Ay.reset()}})},b=[{itemNode:(0,A.jsx)(ep,{data:s}),mainNode:(0,A.jsx)(Dp,{children:e=>{let{isHovered:i,isTouchDevice:r}=e;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Ju,{data:s,isHovered:i&&!f,isGeneratingImage:g}),void 0===s.desktop||f?null:(0,A.jsxs)("div",{style:{...t.mainImageEditContainer,...i||r?t.hoveredMainImageEditContainer:{}},children:[(0,A.jsx)(Qi().u,{variant:"light",onClick:()=>Qc(a),children:(0,A.jsx)(d().sA,{defaultMessage:"Regenerate",id:"creatorProfile.imageUploader.main.regenCover"})}),(0,A.jsx)(Qi().u,{variant:"light",onClick:()=>h({desktopImage:s.desktop||Ru().BR,mobileImage:s.mobile||Ru().H8,index:0,type:"cover"}),children:(0,A.jsx)(d().sA,{defaultMessage:"Edit Cover",id:"creatorProfile.imageUploader.main.editCover"})})]})]})}}),name:"cover-image"},...m.map(((e,a)=>({itemNode:(0,A.jsx)(Dp,{children:t=>{let{isHovered:i,isTouchDevice:r}=t;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Qu,{data:e}),!i&&!r||f?null:(0,A.jsx)(Tp,{index:a,type:"video"})]})}}),mainNode:(0,A.jsx)(Dp,{children:i=>{let{isHovered:r,isTouchDevice:n}=i;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Xu,{data:e}),!f&&(0,A.jsx)(Qi().u,{style:{...t.mainImageEditContainer,...r||n?t.hoveredMainImageEditContainer:{}},variant:"light",onClick:()=>h({type:"video",index:a,video:c[a]}),children:(0,A.jsx)(d().sA,{defaultMessage:"Edit Video",id:"creatorProfile.imageUploader.main.editVideo"})})]})}}),name:`video-${a}`}))),...i?i.map(((e,a)=>{var i;return{itemNode:(0,A.jsx)(Dp,{children:t=>{let{isHovered:i,isTouchDevice:r}=t;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(ep,{data:e}),!i&&!r||f?null:(0,A.jsx)(Tp,{index:a,type:"image"})]})}}),mainNode:(0,A.jsx)(Dp,{children:i=>{let{isHovered:r,isTouchDevice:n}=i;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Ju,{data:e,isHovered:r&&!f}),!f&&(0,A.jsx)(Qi().u,{variant:"light",onClick:()=>h({desktopImage:e.desktop,mobileImage:e.mobile||Ru().H8,index:a,type:"image"}),style:{...t.mainImageEditContainer,...r||n?t.hoveredMainImageEditContainer:{}},children:(0,A.jsx)(d().sA,{defaultMessage:"Edit Preview",id:"creatorProfile.imageUploader.main.editPreview"})})]})}}),name:`${`${null==e||null===(i=e.desktop)||void 0===i?void 0:i.url}-${a}`||`image-${a}`} `}})):[],{itemNode:(0,A.jsxs)("div",{style:{...t.addPreviewThumbnailContainer,...f?e.noCursorAllowed:{}},children:[(0,A.jsx)("span",{children:Ed(t.addPreviewIcon)}),(0,A.jsx)("span",{style:t.addPreviewText,children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.addPreview",defaultMessage:"Add Preview"})})]}),mainNode:null,onItemClick:()=>{f||(S().vd(a,"creator_profile_click_template_add_preview"),h({type:"new"}))},name:"add-preview"}];return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Zu,{items:l?b:kp,shouldNotShowCarousel:!l}),u?(0,A.jsx)("div",{style:t.errorMessage,children:u}):null]})}function Lp(){const e=(0,o().IS)((()=>({loadingContainer:{boxShadow:"\n\t\t\t\t0px 0.6666666865348816px 3.502314805984497px 0px rgba(0, 0, 0, 0.0096),\n\t\t\t\t0px 2.933333396911621px 7.251852035522461px 0px rgba(0, 0, 0, 0.0157),\n\t\t\t\t0px 7.199999809265137px 14.462499618530273px 0px rgba(0, 0, 0, 0.02),\n \t\t\t\t0px 13.866666793823242px 28.348148345947266px 0px rgba(0, 0, 0, 0.0243),\n\t\t\t\t0px 23.33333396911621px 52.122684478759766px 0px rgba(0, 0, 0, 0.0304),\n\t\t\t\t0px 36px 89px 0px rgba(0, 0, 0, 0.04)\n\t\t\t\t",backgroundColor:"rgba(246, 245, 244, 1)",aspectRatio:2.15,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px"},loadingContainerCopy:{color:"rgba(191, 191, 191, 1)",fontSize:"24px",lineHeight:"30px",padding:"24px",fontWeight:L().Wy.semibold,textAlign:"center"}})),[]),t=(0,n().K8)((()=>{const{isGeneratingImage:e}=kc().A.state;return e}),[])?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.generatingPreview",defaultMessage:"Generating image..."}):(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.generatePreview",defaultMessage:"Enter template link to generate cover image"});return(0,A.jsx)("div",{style:e.loadingContainer,children:(0,A.jsx)("span",{style:e.loadingContainerCopy,children:t})})}function Dp(e){const{children:t}=e,a=(0,o().IS)((()=>({mainItemContainer:{width:"100%",height:"100%",position:"relative"}})),[]),r=i.useRef(null),{isHovered:n,isTouchDevice:s}=Lr(r);return(0,A.jsx)("div",{style:a.mainItemContainer,ref:r,children:t?t({isHovered:!s&&n,isTouchDevice:s}):null})}function Rp(e){const{disabled:t}=e,a=(0,o().IS)((e=>({selectInputButton:{border:"none",boxShadow:e.inputBoxShadow,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"12px 14px"},selectText:{height:"20px",fontSize:14,lineHeight:"20px"},selectChevron:{width:16,height:16,fill:e.lightTextColor}})),[]),i=rs(),r=(0,d().tz)(),s=(0,n().K8)((()=>(0,fr().V)(r)),[r]),{selectedLocale:l}=(0,n().K8)((()=>({selectedLocale:kc().A.state.locale??z().q})),[]),c={items:[...z().Yr],getKey:e=>e,selectedItem:l,onSelect:e=>{const t=kc().A.state;kc().A.setState({...t,locale:e})},originGap:6,width:200,renderItem:e=>{const t=s[e.value];return(0,A.jsx)(it().A,{...e,title:null==t?void 0:t.label,caption:null==t?void 0:t.caption})},renderOrigin:e=>{var r;return(0,A.jsxs)(Sa().A,{size:"lg",...e,style:{...a.selectInputButton,...t?i.inputDisabled:{}},disabled:t,children:[(0,A.jsx)("span",{style:a.selectText,children:null===(r=s[l])||void 0===r?void 0:r.label}),(0,Cu().b)(a.selectChevron)]})},disabled:t};return(0,A.jsx)(nt().A,{...c})}var Ep=()=>a(500861);function Bp(e){const{submittingState:t,isDirty:a,handleSubmit:o}=e,{setView:s,name:l}=$e(),{type:d,id:c}=Y(l),{isMobileWidth:u}=(0,m().LS)(),p=Fp(),g=(0,r().v3)(),f=(0,n().K8)((()=>kc().A.state.templateDraftId),[]),h=du(),b=(0,n().K8)((()=>kc().A.state.locale),[]),v=cu(f),{isFeatureEnabled:x}=(0,Xe().O)("self_serve_localization_frontend"),{isFeatureEnabled:w}=(0,Xe().O)("template_listing_translate"),S=(0,n().K8)((()=>Lc.getDefaultLocaleTemplate()),[]),_=x?"published"===d&&h:"published"===d,M=function(e,t,a,i){return!(!e||!t)&&!(a||"in_review"===i||"draft"===i&&a)}(x,w,h,v),I="rejected"===v||"draft"===v||a,k=(0,n().K8)((()=>Ec.state.isTranslating),[]),T=ne(v,"published"===d),P=i.useCallback((()=>{oe().A.reset(),s("/profile/templates",!0),Gc()}),[s]),L=i.useCallback((async()=>{if((await C().Gh(x?Np:Up)).accept&&c){let e=!1;e=x?await async function(e){const{environment:t,templateId:a,locale:i}=e;return"success"===(await y().callApi({eventName:"deleteLocalizedTemplates",environment:t,data:{templateId:a,locale:i}})).type}({environment:g,templateId:c,locale:b}):await pe({environment:g,id:c}),e&&(P(),j().D6({label:(0,A.jsx)(ud,{})}))}}),[c,g,P,b,x]),D=i.useCallback((async()=>{const e="draft"===v||"rejected"===v;if((await C().Gh(zp)).accept)if(e&&f){await ue({environment:g,id:f})&&(P(),j().D6({label:(0,A.jsx)(pd,{})}))}else P(),j().D6({label:(0,A.jsx)(pd,{})})}),[g,P,v,f]),R=i.useCallback((async()=>{b&&null!=S&&S.id&&(Ec.openModal(),await eu({environment:g,data:{templateId:S.id,targetLocale:b}}))}),[g,b,null==S?void 0:S.id]);return(0,A.jsx)("section",{children:(0,A.jsxs)("div",{style:u?p.formActionsMobile:p.formActions,children:[(0,A.jsx)(Op,{onDeleteTemplate:L,onDeleteTemplateDraft:D,isDeleteDisabled:!1!==t,isDiscardDisabled:!1!==t,shouldRenderDelete:_,shouldRenderDiscard:I,isPublished:"published"===d,shouldRenderRegenerateTranslation:M,onRegenerateTranslation:R,isRegenerateTranslationDisabled:k}),(0,A.jsx)(Wp,{onSaveTemplateDraft:()=>o("save_draft"),onSubmitTemplateDraft:()=>o("publish"),isSaveDisabled:!a||!1!==t,isSubmitDisabled:"published"===d&&"published_draft"!==T&&!a||!1!==t,isSaveLoading:"save_draft"===t,isSubmitLoading:"publish"===t})]})})}function Fp(){return(0,o().IS)((()=>({formActions:{display:"flex",justifyContent:"space-between",alignItems:"center"},formActionsMobile:{display:"flex",flexDirection:"column-reverse",alignItems:"center",gap:"24px"},deleteAndDiscardContainer:{display:"flex",gap:"12px"},deleteAndDiscardMobileContainer:{display:"flex",alignItems:"center",gap:"20px"},saveAndSubmitContainer:{display:"flex",gap:"12px"},saveAndSubmitMobileContainer:{display:"flex",flexDirection:"column",width:"100%",gap:"12px"}})),[])}const Up={message:(0,A.jsx)("div",{style:{fontSize:"24px",fontWeight:L().Wy.bold,lineHeight:"30px"},children:(0,A.jsx)(d().sA,{defaultMessage:"Are you sure?",id:"creatorProfile.deleteTemplate.header"})}),description:(0,A.jsx)("div",{style:{color:c().Ay.black},children:(0,A.jsx)(d().sA,{defaultMessage:"You can’t recover this template once it has been deleted.",id:"creatorProfile.deleteTemplate.description"})}),acceptLabel:(0,A.jsx)(d().sA,{defaultMessage:"Yes, delete",id:"creatorProfile.deleteTemplate.confirm"}),cancelLabel:(0,A.jsx)(d().sA,{defaultMessage:"Cancel",id:"creatorProfile.deleteTemplate.reject"})},Np={message:(0,A.jsx)("div",{style:{fontSize:"24px",fontWeight:L().Wy.bold,lineHeight:"30px"},children:(0,A.jsx)(d().sA,{defaultMessage:"Are you sure?",id:"creatorProfile.deleteLocalizedTemplates.header"})}),description:(0,A.jsx)("div",{style:{color:c().Ay.black},children:(0,A.jsx)(d().sA,{defaultMessage:"Deleting this template will remove all localized versions and cannot be undone. You can’t recover these templates once they have been deleted.",id:"creatorProfile.deleteLocalizedTemplates.description"})}),acceptLabel:(0,A.jsx)(d().sA,{defaultMessage:"Yes, delete",id:"creatorProfile.deleteTemplate.confirm"}),cancelLabel:(0,A.jsx)(d().sA,{defaultMessage:"Cancel",id:"creatorProfile.deleteTemplate.reject"})},zp={message:(0,A.jsx)("div",{style:{fontSize:"24px",fontWeight:L().Wy.bold,lineHeight:"30px"},children:(0,A.jsx)(d().sA,{defaultMessage:"Are you sure?",id:"creatorProfile.discardTemplateDraft.header"})}),description:(0,A.jsx)("div",{style:{color:c().Ay.black},children:(0,A.jsx)(d().sA,{defaultMessage:"You can’t recover this template draft once it has been discarded.",id:"creatorProfile.discardTemplateDraft.description"})}),acceptLabel:(0,A.jsx)(d().sA,{defaultMessage:"Yes, discard",id:"creatorProfile.discardTemplateDraft.confirm"}),cancelLabel:(0,A.jsx)(d().sA,{defaultMessage:"Cancel",id:"creatorProfile.discardTemplateDraft.reject"})};function Op(e){const{onDeleteTemplate:t,onDeleteTemplateDraft:a,isDeleteDisabled:i,isDiscardDisabled:r,shouldRenderDelete:o,shouldRenderDiscard:s,isPublished:l,shouldRenderRegenerateTranslation:c,isRegenerateTranslationDisabled:u,onRegenerateTranslation:p}=e,g=Fp(),{isMobileWidth:f}=(0,m().LS)(),h=(0,n().K8)((()=>Ec.state.hasTranslated),[]);return(0,A.jsxs)("div",{style:f?g.deleteAndDiscardMobileContainer:g.deleteAndDiscardContainer,children:[o&&(0,A.jsx)(Qi().u,{variant:"warning",onClick:t,disabled:i,children:(0,A.jsx)(d().sA,{defaultMessage:"Delete template",id:"creatorProfile.templateForm.deleteTemplate"})},"deleteTemplateButton"),c&&(0,A.jsx)(Qi().u,{variant:"neutral",onClick:p,disabled:u,children:h?(0,A.jsx)(d().sA,{defaultMessage:"Re-generate translation",id:"creatorProfile.templateForm.regenerateTranslation"}):(0,A.jsx)(d().sA,{defaultMessage:"Generate translation",id:"creatorProfile.templateForm.generateTranslation"})},"regenerateTranslationButton"),s&&(0,A.jsx)(Qi().u,{variant:"neutral",onClick:a,disabled:r,children:l?(0,A.jsx)(d().sA,{defaultMessage:"Discard changes",id:"creatorProfile.templateForm.discardChanges"}):(0,A.jsx)(d().sA,{defaultMessage:"Discard draft",id:"creatorProfile.templateForm.discardDraft"})},"discardTemplateDraftButton")]})}function Wp(e){const{onSaveTemplateDraft:t,onSubmitTemplateDraft:a,isSaveDisabled:i,isSubmitDisabled:r,isSaveLoading:n,isSubmitLoading:o}=e,s=Fp(),{isMobileWidth:l}=(0,m().LS)();return(0,A.jsxs)("div",{style:l?s.saveAndSubmitMobileContainer:s.saveAndSubmitContainer,children:[(0,A.jsx)(Qi().u,{variant:"light",onClick:t,isLoading:n,disabled:i,children:(0,A.jsx)(d().sA,{defaultMessage:"Save",id:"creatorProfile.templateForm.saveDraft"})},"saveTemplateDraftButton"),(0,A.jsx)(Qi().u,{variant:"dark",onClick:a,isLoading:o,disabled:r,children:(0,A.jsx)(d().sA,{defaultMessage:"Submit for review",id:"creatorProfile.templateForm.submit"})},"submitTemplateDraftForReviewButton")]})}function Vp(){const e=(0,r().v3)(),t=(0,d().tz)(),a=function(e){let{width:t=400}=e;return(0,o().IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:`${t}px`,padding:"20px"},iconStyle:{width:"28px",height:"28px",fill:e.blueColor},header:{display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"left",gap:8,fontWeight:L().Wy.semibold,fontSize:16,marginTop:20,marginBottom:24},alignLeftContainer:{display:"flex",justifyContent:"flex-start",width:"100%"},languageDisplayList:{marginTop:8,display:"flex",flexDirection:"column",width:"100%"},languageSelect:{width:"100%"},innerButtonStyle:{padding:"8px 16px",height:34,width:"100%",display:"flex",justifyContent:"space-between"},selectedText:{color:e.regularTextColor},saveButton:{marginTop:20,width:"100%",textAlign:"center",display:"flex",justifyContent:"center"},removeCta:{color:e.redBadgeBackground},checkboxContainer:{display:"flex",gap:4,alignItems:"center",marginTop:12,marginBottom:12}})),[t])}({}),{isFeatureEnabled:s}=(0,Xe().O)("template_listing_translate"),[l,c]=(0,i.useState)(void 0),u=(0,n().K8)((()=>Lc.state.locales),[]),p=(0,n().K8)((()=>Lc.state.contentfulId),[]),{isOpen:g}=(0,n().O$)(gu),m=(0,n().K8)((()=>Ec.state.shouldTranslate),[]),f=()=>{l&&p&&(Lc.setLocales([...u,{locale:l}]),Ee().oo({url:`/profile/templates/form/new/${p}?locale=${l}`,environment:e})),gu.closeModal()},h=z().Yr.filter((e=>!u.some((t=>t.locale===e)))),b=(0,i.useCallback)((()=>{gu.closeModal()}),[]);return(0,A.jsx)(ka().s,{isOpen:g,onDismiss:b,showCloseIcon:!0,render:()=>(0,A.jsxs)("div",{style:a.container,children:[(0,A.jsx)("div",{style:a.alignLeftContainer,children:(0,gr().Q)(a.iconStyle)}),(0,A.jsxs)("div",{style:a.header,children:[(0,A.jsx)(rt().D,{styleName:"Title-24px/Bold",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.title",defaultMessage:"Language versions"})}),(0,A.jsx)(rt().D,{styleName:"Body-14px/Regular",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.description",defaultMessage:"Form fields are separate in each language version of your template."})})]}),(0,A.jsx)("div",{style:a.alignLeftContainer,children:(0,A.jsx)(rt().D,{styleName:"Body-12px/Regular",color:"secondary",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.numLanguages",defaultMessage:"{num, number} languages",values:{num:u.length}})})}),(0,A.jsx)("div",{style:a.languageDisplayList,children:u.map((e=>(0,A.jsx)(Hp,{localizedTemplate:e},e.locale)))}),h.length>0&&(0,A.jsx)(Ep().A,{style:a.languageSelect,innerButtonStyle:a.innerButtonStyle,renderMenuSections:e=>[{key:"addNewLanguage",render:e=>(0,A.jsx)(ii().A,{...e}),items:h.map((a=>({key:a,action:()=>{c(a),e.close()},render:e=>(0,A.jsx)(it().A,{...e,title:(0,A.jsx)(rt().D,{styleName:"Body-13px/Regular",children:(0,fr().V)(t)[a].caption})})})))}],selectedTitle:(0,A.jsx)(rt().D,{styleName:"Body-14px/Regular",style:a.selectedText,children:l?(0,fr().V)(t)[l].caption:"Add a language"})}),(0,A.jsx)(Ie().A,{color:"black",size:"xl",onClick:f,style:a.saveButton,disabled:!l,children:(0,A.jsx)(d().sA,{defaultMessage:"Save",id:"creatorProfile.templateLanguagePickerModal.saveCta"})}),s&&(0,A.jsxs)("div",{style:a.checkboxContainer,children:[(0,A.jsx)(to().A,{checked:m,onClick:()=>{Ec.setShouldTranslate(!m)},size:14}),(0,A.jsx)("div",{onClick:()=>{Ec.setShouldTranslate(!m)},children:(0,A.jsx)(ao().A,{style:{cursor:"pointer"},isSmall:!0,children:(0,A.jsx)(d().sA,{defaultMessage:"Let Notion translate template listing",id:"creatorProfile.templateLanguagePickerModal.translateTemplateListing"})})})]})]}),animateSizeTransition:!1})}function Hp(e){var t,a,n,s;let{localizedTemplate:l}=e;const c=(0,r().v3)(),[u,p]=(0,i.useState)(null),g=(0,o().IS)((e=>({languageItem:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"4px",padding:"8px 16px",borderRadius:"4px"},hoveredLanguageItem:{background:e.state.hover},removeCta:{color:e.redBadgeBackground},primaryLocale:{opacity:.5}})),[]),m=(0,d().tz)(),{setView:f}=$e(),h=(null===(t=l.template)||void 0===t?void 0:t.template_draft_id)||(null===(a=l.templateDraft)||void 0===a?void 0:a.id),b=cu(h),v=null===(n=l.template)||void 0===n?void 0:n.is_default_locale,x=function(e){var t,a,i;let{localizedTemplate:r,templateDraftStatus:n}=e;return!0!==(null==r||null===(t=r.template)||void 0===t?void 0:t.is_default_locale)&&"in_review"!==(null==r||null===(a=r.templateDraft)||void 0===a?void 0:a.status)&&"published"!==(null==r||null===(i=r.templateDraft)||void 0===i?void 0:i.status)&&!(null!=r&&r.template)}({localizedTemplate:l,templateDraftStatus:b}),y=function(e){var t,a;let{localizedTemplate:i,templateDraftStatus:r,shouldRenderDiscard:n}=e;return!n&&!0!==(null==i||null===(t=i.template)||void 0===t?void 0:t.is_default_locale)&&"in_review"!==(null==i||null===(a=i.templateDraft)||void 0===a?void 0:a.status)&&!(null==i||!i.template)&&"published"===r}({localizedTemplate:l,templateDraftStatus:b,shouldRenderDiscard:x}),w=null===(s=l.template)||void 0===s?void 0:s.id,S=i.useCallback((()=>{gu.closeModal(),f("/profile/templates",!0)}),[f]),_=i.useCallback((async()=>{if((await C().Gh(Up)).accept&&w){await pe({environment:c,id:w})&&(S(),j().D6({label:(0,A.jsx)(ud,{})}))}}),[w,c,S]),M=i.useCallback((async()=>{const e="draft"===b||"rejected"===b;if((await C().Gh(zp)).accept)if(e&&h){await ue({environment:c,id:h})&&(S(),j().D6({label:(0,A.jsx)(pd,{})}))}else S(),j().D6({label:(0,A.jsx)(pd,{})})}),[h,b,c,S]);return(0,A.jsxs)("div",{style:{...g.languageItem,...u&&g.hoveredLanguageItem},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[(0,A.jsx)(rt().D,{styleName:"Body-14px/Regular",children:(0,fr().V)(m)[l.locale].caption}),v&&(0,A.jsx)(rt().D,{styleName:"Body-12px/Regular",color:"tertiary",style:g.primaryLocale,children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.primaryLocale",defaultMessage:"Primary"})}),u&&y&&(0,A.jsx)(oa().A,{style:g.removeCta,onClick:()=>_(),hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},children:(0,A.jsx)(rt().D,{styleName:"Body-12px/Medium",color:"red",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.removeCta",defaultMessage:"Remove"})})}),u&&x&&(0,A.jsx)(oa().A,{style:g.removeCta,onClick:()=>M(),hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},children:(0,A.jsx)(rt().D,{styleName:"Body-12px/Medium",color:"red",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.discardCta",defaultMessage:"Discard"})})})]})}const qp=["in_review","rejected","published","published_rejected","published_in_review","published_draft"];function Kp(e){const{templateStatus:t,templateDraftId:a,isPublished:i,templateId:s}=e,l=function(){const{isDesktopWidth:e}=(0,m().LS)();return(0,o().IS)((t=>({messageContainer:{maxWidth:"960px",minHeight:"60px",borderRadius:"8px",padding:"10px 24px 10px 24px",display:"flex",alignItems:"center",flexWrap:e?"nowrap":"wrap",gap:"10px",backgroundColor:"rgba(0, 0, 0, 0.03)",marginTop:"10px"},messageText:{color:t.regularTextColor,fontSize:"13.5px",flexShrink:e?10:"inherit"}})),[e])}(),c=(0,r().v3)(),{slug:u}=(0,n().K8)((()=>{if(i&&s){return{slug:new(yt().$x)(c,{table:"template",id:s}).getSlug()}}if(!a)return{};return{slug:new(yt().x1)(c,{table:"template_draft",id:a}).getSlug()}}),[c,a,i,s]),p=(0,rc().Px)(u),g=ne(t,i);return void 0===g||void 0===t?null:qp.includes(g)?(0,A.jsxs)("div",{style:l.messageContainer,children:[(0,A.jsx)(Fr,{templateStatus:g}),(0,A.jsx)("span",{style:l.messageText,children:(0,A.jsx)(Zp,{templateStatus:g,templateDraftId:a,isPublished:i,templateId:s,slug:u})}),i?(0,A.jsx)(Qi().u,{variant:"neutral",onClick:()=>Dn().f({environment:c,url:p}),children:(0,A.jsx)(d().sA,{id:"creatorProfile.submissionForm.status.published.cta",defaultMessage:"View live template"})}):null]}):null}function Zp(e){const{templateStatus:t,templateDraftId:a,slug:i}=e,r=(0,rc().Px)(i);return(0,A.jsxs)(A.Fragment,{children:["in_review"===t||"published_in_review"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.submissionForm.status.inReview.message",defaultMessage:"Templates under review are not editable. Review time is 1-3 business days."}):null,"published"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.submissionForm.status.published.message",defaultMessage:"Template is live at {url}",values:{url:r}}):null,"rejected"===t||"published_rejected"===t?(0,A.jsx)(Gp,{templateId:a}):null,"published_draft"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.submissionForm.status.publishedDraft.Message",defaultMessage:"Template has unpublished changes"}):null]})}const $p=(0,d().YK)({bad_purchase_url:{id:"creatorProfile.submissionForm.status.rejected.badPurchaseUrl.message",defaultMessage:"We are unable to access the purchase link provided: {purchaseUrl}."},bad_public_url:{id:"creatorProfile.submissionForm.status.rejected.badPublicUrl.message",defaultMessage:"We are unable to access the Notion link provided: {publicSiteUrl}. Please make sure your template is public via the <b>Publish</b> tab in the <b>Share</b> menu."},duplication_not_enabled:{id:"creatorProfile.submissionForm.status.rejected.duplicationNotEnabled.message",defaultMessage:"Duplication wasn’t turned on. Make sure you turn on duplications via the <b>Published</b> tab in the <b>Share</b> menu."},bad_images:{id:"creatorProfile.submissionForm.status.rejected.badImages.message",defaultMessage:"The images or videos attached do not meet our standards."},title_notion_mention:{id:"creatorProfile.submissionForm.status.rejected.titleNotionMention.message",defaultMessage:"Please remove 'Notion' from your title and re-submit."},title_notion_template_mention:{id:"creatorProfile.submissionForm.status.rejected.titleNotionTemplateMention.message",defaultMessage:"Please remove 'Notion' and 'Template' from your title and re-submit."},title_template_mention:{id:"creatorProfile.submissionForm.status.rejected.titleTemplateMention.message",defaultMessage:"Please remove 'Template' from your title and re-submit."},language_mismatch:{id:"creatorProfile.submissionForm.status.rejected.languageMismatch.message",defaultMessage:"The content of your submission does not match the language selected. Please update the content or change to the correct language."},content_template:{id:"creatorProfile.submissionForm.status.rejected.contentTemplate.message",defaultMessage:"Your submission resembles a content product more than a template that other users can replicate and adjust for their own use-case. Whilst Notion can be used to publish and share such interesting and useful content, the Marketplace is not currently suitable for hosting them."},content_over_size_limit:{id:"templateReviewEmail.status.rejected.contentOverSizeLimit.message",defaultMessage:"Your template was rejected because it contains too many blocks ({numBlocks, number} blocks). We cap the size of templates at {maxNumBlocks, number} blocks to prevent duplication issues. You can edit the template to reduce its size and submit again for approval."},unsupported_language:{id:"creatorProfile.submissionForm.status.rejected.unsupportedLanguage.message",defaultMessage:"We currently support seven languages and are unable to list any template that is not in those. We are working on adding more!"},general_quality:{id:"creatorProfile.submissionForm.status.rejected.general.message",defaultMessage:"The template does not meet our quality criteria. You can edit and submit again."},restricted_content:{id:"creatorProfile.submissionForm.status.rejected.restrictedContent.message",defaultMessage:"The template contains content that is not allowed to be redistributed. Remove the content and re-submit."},payment_link_mismatch:{id:"templateReviewEmail.status.rejected.paymentLinkMismatch.message",defaultMessage:"The purchase link you provided doesn’t match the template you submitted! Please update the link and re-submit."},currency_mismatch:{id:"templateReviewEmail.status.rejected.currencyMismatch.message",defaultMessage:"The price of the template should be in USD. Please convert the currency of your template and re-submit."},unsupported_payment_method:{id:"templateReviewEmail.status.rejected.unsupportedPaymentMethod.message",defaultMessage:"We do not support the payment link you’ve submitted. The payment link must be for purchasing a specific product with a visible template title that delivers automatically upon purchase. Please update the purchase link and resubmit."},dark_mode_screenshot:{id:"templateReviewEmail.status.rejected.darkModeScreenshot.message",defaultMessage:"While your template looks great, we don’t accept dark mode screenshots for the first thumbnail. Please generate a new screenshot in light mode and resubmit."},private_subpage:{id:"templateReviewEmail.status.rejected.privateSubpage.message",defaultMessage:"Some of your template’s subpages are private and not accessible to users. Please edit your template to make all content accessible and able to be duplicated, then resubmit."}}),Yp={bad_purchase_url:e=>{let{purchaseUrl:t}=e;return t?(0,A.jsx)(d().sA,{...$p.bad_purchase_url,values:{purchaseUrl:t}}):(0,A.jsx)(d().sA,{...$p.general_quality})},bad_public_url:e=>{let{publicSiteUrl:t}=e;return t?(0,A.jsx)(d().sA,{...$p.bad_public_url,values:{publicSiteUrl:t,b:e=>(0,A.jsx)("b",{children:e})}}):(0,A.jsx)(d().sA,{...$p.general_quality})},duplication_not_enabled:()=>(0,A.jsx)(d().sA,{...$p.duplication_not_enabled,values:{b:e=>(0,A.jsx)("b",{children:e})}}),bad_images:()=>(0,A.jsx)(d().sA,{...$p.bad_images,values:{a:e=>(0,A.jsx)("a",{href:"https://www.notion.com/help/how-to-submit-a-template",children:e})}}),title_notion_mention:()=>(0,A.jsx)(d().sA,{...$p.title_notion_mention}),title_notion_template_mention:()=>(0,A.jsx)(d().sA,{...$p.title_notion_template_mention}),title_template_mention:()=>(0,A.jsx)(d().sA,{...$p.title_template_mention}),language_mismatch:()=>(0,A.jsx)(d().sA,{...$p.language_mismatch}),unsupported_language:()=>(0,A.jsx)(d().sA,{...$p.unsupported_language}),content_template:()=>(0,A.jsx)(d().sA,{...$p.content_template}),content_over_size_limit:e=>{let{numBlocks:t,maxNumBlocks:a}=e;return(0,A.jsx)(d().sA,{...$p.content_over_size_limit,values:{numBlocks:t,maxNumBlocks:a}})},custom:e=>{let{customRejectReason:t}=e;return t?(0,A.jsx)(A.Fragment,{children:t}):(0,A.jsx)(d().sA,{...$p.general_quality})},general_quality:()=>(0,A.jsx)(d().sA,{...$p.general_quality}),restricted_content:()=>(0,A.jsx)(d().sA,{...$p.restricted_content}),payment_link_mismatch:()=>(0,A.jsx)(d().sA,{...$p.payment_link_mismatch}),currency_mismatch:()=>(0,A.jsx)(d().sA,{...$p.currency_mismatch}),unsupported_payment_method:()=>(0,A.jsx)(d().sA,{...$p.unsupported_payment_method}),dark_mode_screenshot:()=>(0,A.jsx)(d().sA,{...$p.dark_mode_screenshot}),private_subpage:()=>(0,A.jsx)(d().sA,{...$p.private_subpage})};function Gp(e){const{templateId:t}=e,a=(0,r().v3)(),{numBlocks:i,rejectReason:o,customRejectReason:s,purchaseUrl:l,publicSiteUrl:c}=(0,n().K8)((()=>{var e;if(void 0===t)return{};const i=new(yt().x1)(a,{table:Bd()._F,id:t});return{numBlocks:null===(e=i.getDraftAttributes())||void 0===e?void 0:e.num_blocks,rejectReason:i.getRejectReason(),customRejectReason:i.getCustomRejectReason(),purchaseUrl:i.getPurchaseUrl(),publicSiteUrl:i.getTemplatePublicUrl()}}),[a,t]),u=(0,n().K8)((()=>Qo().default.getConfigKey("template_limits","maxNumBlocks")),[]);if(void 0!==o){const e=(0,Yp[o])({purchaseUrl:l,publicSiteUrl:c,customRejectReason:s,numBlocks:i,maxNumBlocks:u});return(0,A.jsx)(A.Fragment,{children:e})}return(0,A.jsx)(d().sA,{...$p.general_quality})}function Xp(){const e=function(e){let{width:t=400}=e;return(0,o().IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:`${t}px`,padding:20},iconStyle:{width:28,height:28,fill:e.blueColor},header:{display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"left",gap:8,fontWeight:L().Wy.semibold,fontSize:16,marginTop:20,marginBottom:24,width:"100%"},alignLeftContainer:{display:"flex",justifyContent:"flex-start",width:"100%"},skipButton:{marginTop:20,width:"100%",textAlign:"center",display:"flex",justifyContent:"center"}})),[t])}({}),{isOpen:t}=(0,n().O$)(Ec);return(0,A.jsx)(ka().s,{isOpen:t,render:()=>(0,A.jsxs)("div",{style:e.container,children:[(0,A.jsx)("div",{style:e.alignLeftContainer,children:(0,gr().Q)(e.iconStyle)}),(0,A.jsx)("div",{style:e.header,children:(0,A.jsx)(rt().D,{styleName:"Title-24px/Bold",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateTranslationModal.title",defaultMessage:"Translating..."})})})]}),animateSizeTransition:!1,allowDismissByEscape:!1})}function Qp(){const{isMobileWidth:e}=(0,m().LS)(),t=(0,d().tz)(),a=(0,r().v3)(),[s,l]=i.useState(!1),c=function(){const{isMobileWidth:e}=(0,m().LS)();return(0,o().IS)((()=>({formContainer:{display:"flex",flexDirection:"column",gap:"32px",maxWidth:"960px"},titleInput:{fontSize:e?30:36,lineHeight:e?"34px":"40px",fontWeight:L().Wy.semibold},noCursorAllowed:{cursor:"not-allowed"},inputStyle:{background:"none",padding:"8px 14px"},inputDisabled:{cursor:"not-allowed",backgroundColor:"rgba(0, 0, 0, 0.03)",color:"rgba(128, 128, 128, 1)"},formRow:{display:"flex",gap:"12px"},formRowMobile:{flexDirection:"column"},languageInput:{width:"33%"},languageInputMobile:{width:"100%"},fullDescription:{resize:"vertical"},urlSlugLeftContainer:{marginLeft:"-13px",padding:"9px 0px 9px 9px",marginRight:"-6px",fontSize:e?12:"inherit",borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.03)",color:"rgba(128, 128, 128, 1)"}})),[e])}(),u=rs(),p=i.useRef(null),{isFeatureEnabled:g}=(0,Xe().O)("self_serve_localization_frontend"),{name:f,setView:h,searchParams:v}=$e(),{type:x,id:C,contentfulId:w}=Y(f),j=$(v);lu({type:x,id:C,contentfulId:w,locale:g&&"new"===x?j:void 0});const S=ld(kc().A),_=(0,n().K8)((()=>Nc(Fc(),!1)),[]),M=async e=>{l(e);try{!0===await Uc({action:e,environment:a,templateContentfulId:X??void 0,hasTemplateBeenReviewed:re,currentView:f})?(oe().A.reset(),Gc(),h("/profile/templates",!0)):ua().Rt({element:null==p?void 0:p.current,environment:a,options:{behavior:"smooth"}})}catch(t){}finally{l(!1)}};od({isActive:S,onAccept:()=>M("save_draft"),onReject:_?void 0:()=>{throw new Error("abandon_route")},acceptLabel:_?(0,A.jsx)(ad,{}):(0,A.jsx)(rd,{}),rejectLabel:_?(0,A.jsx)(id,{}):(0,A.jsx)(nd,{})});const{url:I,name:k,shortDescription:T,longDescription:P,slug:D,isFree:R,checkoutEnabled:E,urlError:B,imageError:F,nameError:U,categoriesError:z,shortDescriptionError:O,longDescriptionError:W,accessLockingError:V,slugError:H,isGeneratingImage:q,templateDraftId:K,initialValues:Z,locale:G,contentfulId:X,purchaseUrlError:Q,marketplaceAcquisitionEmail:J,marketplaceAcquisitionEmailError:ee}=(0,n().K8)((()=>kc().A.state),[]);nu(X,D,G),function(){const e=(0,r().v3)(),{isFeatureEnabled:t}=(0,Xe().O)("self_serve_localization_frontend"),{isFeatureEnabled:a}=(0,Xe().O)("template_listing_translate"),{name:o,searchParams:s}=$e(),{type:l,contentfulId:d}=Y(o),c=$(s),u=(0,n().K8)((()=>Lc.getDefaultLocaleTemplate()),[]),p=(0,n().K8)((()=>Ec.state.isTranslating),[]),g=(0,n().K8)((()=>Ec.state.shouldTranslate),[]),m=(0,n().K8)((()=>gu.state.isOpen),[]),{templateDraftId:f,locale:h}=(0,n().K8)((()=>kc().A.state),[]);(0,i.useEffect)((()=>{Ec.setHasTranslated(!1)}),[f]),(0,i.useEffect)((()=>{Ec.setHasTranslated(!1)}),[h]),(0,i.useEffect)((()=>{t&&a&&"new"===l&&d&&c&&c!==(null==u?void 0:u.locale)&&null!=u&&u.id&&!p&&g&&!m&&(Ec.openModal(),eu({environment:e,data:{templateId:null==u?void 0:u.id,targetLocale:c}}).catch((()=>{})))}),[t,a,l,d,c,u,e,p,g,m])}();const{publishedVersion:te,templateContentfulId:ae}=(0,n().K8)((()=>{if(void 0===K)return{publishedVersion:0,templateContentfulId:void 0};const e=new(yt().x1)(a,{table:"template_draft",id:K});return{publishedVersion:e.getPublishedVersion()||0,templateContentfulId:e.getContentfulId()}}),[a,K]),ie=cu(K),re=ou(K),ne=ra(),se="in_review"===ie||!1!==s||q,le=!R&&!E,de=[B,U,z,O,W,H,F,Q].filter((e=>Boolean(e))).length,ce=(0,n().K8)((()=>gu.state.isOpen),[]),ue=(0,n().K8)((()=>Ec.state.isOpen),[]),pe=du(),ge=g&&!pe,me=ge&&("published"===ie||"draft"===ie||void 0===ie),fe=(0,n().K8)((()=>{var e;const t=null===(e=b().default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return!(null==t||!t.match(/.*@makenotion\.com$/))}),[]),he=R||E||fe;return(0,i.useEffect)((()=>()=>{Lc.resetState()}),[]),(0,A.jsxs)("main",{children:[(0,A.jsx)(Iu,{currentLocale:G}),(0,A.jsx)(Kp,{templateStatus:ie,templateDraftId:K,isPublished:"published"===x,templateId:C}),(0,A.jsx)(er,{count:de,ref:p}),(0,A.jsxs)("div",{style:c.formContainer,children:[(0,A.jsx)(ar().o,{htmlLabel:"templateName",label:(0,A.jsx)(d().sA,{defaultMessage:"Template Name",id:"creatorProfile.templateSubmission.templateName"}),shouldHideLabel:!0,error:U,placeholder:t.formatMessage({defaultMessage:"Add template title",id:"creatorProfile.templateSubmission.titlePlaceholder"}),inputStyle:{...c.titleInput,...se?u.noCursorAllowed:{}},value:k,onChange:e=>{kc().A.setState({...kc().A.state,name:e.target.value})},type:"text",onFocus:()=>Yc("nameError"),onBlur:async e=>{const t=e.target.value.trim();if(!t||!Z.name||Z.name!==t){var i;Wc((0,N().pK)(null===(i=b().default.state.currentUserStore)||void 0===i?void 0:i.getModel()),t)}if(t.length>0&&(!D||0===D.length)){const e=await async function(e){var t;const{environment:a,name:i}=e,r=(0,_c().lp)(i),n=await y().callApi({eventName:"validateTemplateDraftSlug",environment:a,data:{slug:r}});if("success"===n.type)return r;if("template_slug_already_exists"!==(null===(t=n.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return"";for(let o=0;o<3;o++){const e=(0,_c().lp)(i,!0);if("success"===(await y().callApi({eventName:"validateTemplateDraftSlug",environment:a,data:{slug:e}})).type)return e}return""}({environment:a,name:t});e&&kc().A.setState({...kc().A.state,slug:e,slugError:void 0})}},focusInitial:"new"===x,disabled:se||q}),(0,A.jsx)(ar().o,{htmlLabel:"templateLink",label:(0,A.jsx)(d().sA,{defaultMessage:"Template link",id:"creatorProfile.templateSubmission.linkLabel"}),error:B,format:or().C.Default,style:{...c.inputStyle,...se?u.inputDisabled:{}},inputStyle:se?u.noCursorAllowed:{},placeholder:"https://",value:I,type:"url",onFocus:e=>{Yc("urlError"),Yc("imageError")},onBlur:async e=>{var t,i;const r=await Oc({environment:a,url:(null===(t=e.target.value)||void 0===t?void 0:t.trim())||"",templateDraftId:K,shouldValidateBlockIdUsedByOtherTemplate:!ge,shouldValidateBlockIdForLocalization:ge});if(null!==(i=e.target.value)&&void 0!==i&&i.trim()&&r){const t=function(e){const t=iu().bk(e.trim());return t?(t.search="",t.hash="",t.toString()):""}(e.target.value);kc().A.setState({...kc().A.state,url:t}),await async function(e,t){const a=kc().A.state,{uuid:i,image:r,mobileImage:n,isGeneratingImage:o}=a;return!(!Boolean(i)||o)&&(!((!a.initialValues.uuid||a.uuid===a.initialValues.uuid)&&(Boolean(null==r?void 0:r.url)||Boolean(null==n?void 0:n.url)))&&await Qc(e,t))}(a,t)}},disabled:se}),(0,A.jsx)(Pp,{}),(0,A.jsxs)("div",{style:{...c.formRow,...e?c.formRowMobile:{}},children:[(0,A.jsx)(Mi().O,{htmlLabel:"templateCategories",name:(0,A.jsx)(d().sA,{defaultMessage:"Template categories",id:"creatorProfile.templateSubmission.categorySelectLabel"}),errorMessage:z,children:(0,A.jsx)(_u,{disabled:me||se||re})}),!me&&(0,A.jsx)("div",{style:e?c.languageInputMobile:c.languageInput,children:(0,A.jsx)(Mi().O,{htmlLabel:"templateLanguage",name:(0,A.jsx)(d().sA,{defaultMessage:"Language",id:"creatorProfile.templateSubmission.languageSelectLabel"}),children:(0,A.jsx)(Rp,{disabled:se||te>0})})})]}),(0,A.jsx)(ar().o,{htmlLabel:"templateUrlSlug",label:(0,A.jsx)(d().sA,{defaultMessage:"Template URL slug",id:"creatorProfile.templateSubmission.slugLabel"}),error:H,format:or().C.Default,style:{...c.inputStyle,...se?u.inputDisabled:{}},inputStyle:se?u.noCursorAllowed:{},value:D,onChange:e=>{kc().A.setState({...kc().A.state,slug:e.target.value})},disabled:me||se,onFocus:()=>Yc("slugError"),onBlur:async e=>{var t;const i=(null===(t=e.target.value)||void 0===t?void 0:t.trim())||"";i&&Z.slug&&Z.slug===i||await $c({environment:a,slug:i,contentfulId:ae})},left:(0,A.jsx)("span",{style:c.urlSlugLeftContainer,children:`${(0,rc().Px)()}/`})}),(0,A.jsx)(Tu,{disabled:se||me}),(0,A.jsx)(Mi().O,{htmlLabel:"accessLocking",name:(0,A.jsx)(d().sA,{defaultMessage:"Access locking",id:"creatorProfile.templateSubmission.accessLockingLabel"}),errorMessage:V,children:(0,A.jsx)(wu,{disabled:me||se||le||!ne})}),(0,A.jsx)(ar().o,{htmlLabel:"templateShortDescription",label:(0,A.jsx)(d().sA,{defaultMessage:"Brief description",id:"creatorProfile.templateSubmission.shortDescription"}),error:O,maxlength:280,textarea:!0,format:or().C.Default,style:{...c.inputStyle,...se?u.inputDisabled:{}},inputStyle:se?u.noCursorAllowed:{},onChange:e=>{const t=kc().A.state;kc().A.setState({...t,shortDescription:e.target.value})},onFocus:e=>Yc("shortDescriptionError"),onBlur:e=>Kc(e.target.value),value:T,disabled:se,showCharacterCounter:!0}),(0,A.jsx)(yu,{longDescriptionError:W,isFormDisabled:se,longDescription:P}),ne?(0,A.jsx)(Mi().O,{htmlLabel:"templateEmailRequirement",name:(0,A.jsx)(d().sA,{defaultMessage:"Email requirement",id:"creatorProfile.templateSubmission.emailRequirementLabel"}),children:(0,A.jsx)(Au,{disabled:se||le||me})}):null,he&&(0,A.jsx)(mu,{submissionFormStyles:c,disabledInputStyles:u,marketplaceAcquisitionEmail:J,isFormDisabled:se,marketplaceAcquisitionEmailError:ee}),"in_review"!==ie&&(0,A.jsx)(Bp,{submittingState:s,isDirty:S,handleSubmit:M}),ce&&(0,A.jsx)(Vp,{}),ue&&(0,A.jsx)(Xp,{})]})]})}function Jp(e){const{creatorId:t}=e,{isMobile:a}=(0,r().Y0)();return(0,A.jsxs)("div",{children:[(0,A.jsxs)(pa,{route:"/profile/templates",exact:!0,children:[(0,A.jsx)(De().y,{size:"large",header:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pageHeader",defaultMessage:"Templates"}),subHeader:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pageHeaderSubtitle",defaultMessage:"Update template information, pin templates, and more."})}),!a&&(0,A.jsx)($d,{}),null==t?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(je().A,{size:24}),(0,A.jsx)(eg,{})]}):(0,A.jsx)(ag,{creatorId:t})]}),(0,A.jsxs)(pa,{route:"/profile/templates/form",shouldRenderCallback:ge,children:[(0,A.jsx)(sa,{}),(0,A.jsx)(Qp,{})]}),(0,A.jsxs)(pa,{route:"/profile/templates/faq",children:[(0,A.jsx)(sa,{}),(0,A.jsx)(Sc,{})]})]})}function eg(){const e=(0,o().IS)((e=>({creatorProfileTemplatesEmptyStateHeader:{fontSize:24,color:e.regularTextColor,fontWeight:L().Wy.semibold},creatorProfileTemplatesEmptyStateDescription:{fontSize:15,color:e.mediumTextColor}})),[]),{setView:t}=$e();return(0,A.jsx)(ke,{showCreatorProfileForm:()=>{Ae.setState({profileFormType:"create"}),t("/profile")},header:(0,A.jsx)("div",{style:e.creatorProfileTemplatesEmptyStateHeader,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.templates.header",defaultMessage:"Create a Creator Profile"})}),description:(0,A.jsxs)("div",{style:e.creatorProfileTemplatesEmptyStateDescription,children:[(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.templates.description",defaultMessage:"A Creator Profile is required to submit and manage Notion templates."})," ",(0,A.jsx)(Dd,{})]})})}function tg(e){const{creatorId:t}=e,a=(0,o().IS)((e=>({creatorProfileMainSection:{display:"flex",gap:"72px",flexDirection:"column"}})),[]);return(0,A.jsxs)("section",{style:a.creatorProfileMainSection,children:[(0,A.jsx)(Fd,{creatorId:t}),(0,A.jsx)(Gd,{creatorId:t}),(0,A.jsx)($r,{creatorId:t})]})}function ag(e){let{creatorId:t}=e;const a=(0,d().tz)();return(0,A.jsx)(Le,{tabs:[{title:a.formatMessage(ig.templateListings),content:(0,A.jsx)(tg,{creatorId:t})},{title:a.formatMessage(ig.ratingsAndReviews),content:(0,A.jsx)(hc,{})}]})}const ig=(0,d().YK)({templateListings:{id:"creatorProfile.templates.tabs.listings",defaultMessage:"Template listings"},ratingsAndReviews:{id:"creatorProfile.templates.tabs.ratingsAndReviews",defaultMessage:"Ratings & reviews"}});function rg(e){const t=(0,n().K8)((()=>{var e;return null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.userId}),[]),a=(0,n().K8)((()=>b().default.state.renderPhase),[]),v=(0,r().v3)(),x=(0,d().tz)(),[{status:C}]=(0,l().Yb)((async()=>{if(t)return async function(e){const{environment:t,userId:a}=e,i=await y().callApi({eventName:"getCurrentTemplateCreatorId",environment:t,data:{}});if("success"===i.type&&i.data.success){const e=i.data.userIdToTemplateCreatorIdMap[a];me().A.setState({creatorId:e})}}({environment:v,userId:t})}),[v,t]),w=(0,fe().x)(),j=(0,o().IS)((()=>({scroller:{height:"100dvh",paddingBottom:"120px",backgroundColor:c().Ay.white},center:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}})),[]);(0,i.useEffect)((()=>{const e=document.querySelector('link[rel="shortcut icon"]');e&&e.setAttribute("href",s().A.images.templates.faviconIco)}),[]);const[{status:S}]=(0,l().Yb)((async()=>{if(w&&w.contentful_id)return de({environment:v,locale:x,creatorId:w.contentful_id,orderBy:"recent",paid:"all",page:1})}),[]),_="pending"!==C,M=(0,n().K8)((()=>he().A.getState().isOpen),[]);return(0,A.jsxs)(p().A,{title:x.formatMessage({id:"creatorProfile.document.title",defaultMessage:"My Creator Profile | Notion"}),children:[(0,A.jsx)(g().A,{}),(0,A.jsx)(u().H,{style:j.scroller,type:h().A.Y,children:(0,A.jsxs)(m().KF,{children:[(0,A.jsx)(un().v,{}),(0,A.jsx)(Ye,{children:_&&"pending"!==S&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(pa,{route:"/profile",exact:!0,children:(0,A.jsx)(Pd,{})}),(0,A.jsx)(pa,{route:"/profile/templates",children:(0,A.jsx)(Jp,{creatorId:null==w?void 0:w.contentful_id})}),(0,A.jsx)(pa,{route:"/profile/integrations",children:(0,A.jsx)(Pl,{isPublish:e.publish,isLab:e.lab,botOrIntegrationPointer:e.botOrIntegrationPointer})}),(0,A.jsx)(pa,{route:"/profile/analytics",children:(0,A.jsx)(Xt,{creatorId:null==w?void 0:w.contentful_id})}),(0,A.jsx)(pa,{route:"/profile/coupons",children:(0,A.jsx)(cn,{creatorId:null==w?void 0:w.contentful_id})})]})})]})}),M&&(0,A.jsx)(Dl,{}),"rendered"!==a||v.device.isMobile?null:(0,A.jsx)(f().RK,{})]})}},685200:(e,t,a)=>{a.d(t,{O:()=>o,g:()=>n});var i=()=>a(617871);const r="entity_item";function n(e){const{patternName:t,integrationId:a}=e;if((0,i().CX)({integrationId:a,env:"production"}))return t;{const e=t.indexOf("_");return e<0?r:t.slice(e+1)}}function o(e){const{patternName:t,integrationId:a}=e;return(0,i().CX)({integrationId:a,env:"production"})?t:`${a}_${t}`}},739095:(e,t,a)=>{a.d(t,{AT:()=>b,VU:()=>p,Yj:()=>y});a(944114),a(898992),a(823215),a(354520),a(581454),a(737550);var i=()=>a(842599),r=()=>a(513416),n=()=>a(345404),o=()=>a(506391),s=()=>a(534177),l=()=>a(939768),d=()=>a(720665),c=()=>a(671593);const u=(0,a(959013).YK)({capabilityErrorMessage:{id:"developerIntegrationsCreate.error.capabilities.invalidContent2",defaultMessage:"At least one capability must be requested."},regexPatternErrorMessage:{id:"developerIntegrationFormValidator.urlMatchingAndPlaceholder.regex.error",defaultMessage:"{value} regex pattern is invalid."},regexAttributesErrorMessage:{id:"developerIntegrationFormValidator.urlMatchingAndPlaceholder.attributes.error",defaultMessage:"{value} attributes JSON does not match request schema."},sampleUrlMissingDomain:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlMissingDomain.error",defaultMessage:'URL "{value}" is missing a domain.'},sampleUrlDoesNotMatchProvidedDomain:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlDoesNotMatchProvidedDomain.error",defaultMessage:'URL "{value}" does not match a provided domain.'},sampleUrlDoesNotMatchProvidedRegexes:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlDoesNotMatchProvidedRegexes.error",defaultMessage:'URL "{value}" does not match a provided regex pattern.'},templateUrlIsNotNotionPage:{id:"developerIntegrationFormValidator.templateUrl.templateUrlIsNotNotionPage.error",defaultMessage:"URL must direct to a public Notion template."},templateUrlCannotBeDuplicated:{id:"developerIntegrationFormValidator.templateUrl.templateUrlCannotBeDuplicated.error",defaultMessage:"Linked template must be public."}});function p(e){let t;try{t=JSON.parse(e)}catch(a){t=void 0}return t}function g(e){const{value:t}=e,a=l().q7(t);if(!a)return{validated:!1};return l().qg(a).hostname?{validated:!0}:{validated:!1}}function m(e){try{return new RegExp(e),{validated:!0}}catch{return{validated:!1}}}function f(e){if((0,c().tf)(n().kE,e))return{validated:!1};for(const t of e){const e=(0,o().q8)(t);if(!(0,r().PX)(e))return{validated:!1}}return{validated:!0}}function h(e){const{domains:t,regex:a,urls:i}=e;if(0===i.length)return[];const r=[];for(const n of i){const e=(0,o().fu)({url:n,domains:t,regex:new RegExp(a)});"invalid_url"===e.type?r.push({descriptor:u.sampleUrlMissingDomain,value:n}):"url_does_not_match_domain"===e.type?r.push({descriptor:u.sampleUrlDoesNotMatchProvidedDomain,value:n}):"url_does_not_match_regex"===e.type?r.push({descriptor:u.sampleUrlDoesNotMatchProvidedRegexes,value:n}):"success"===e.type||(0,s().HB)(e)}return r}function b(e){const t=l().q7(e);if(!t||!e)return;const a=t[t.length-1],i=e[e.length-1];return"/"===a&&"/"!==i?t.slice(0,t.length-1):t}const v={insert_comment:!0,insert_content:!0,read_comment:!0,read_content:!0,update_content:!0,link_preview:!0,synced_database:!0,workspace_content_transfer:!0,read_user_with_email:!1,read_user_without_email:!1},x=(0,s().uv)(v).filter((e=>v[e]));const y={email:function(e){const{value:t}=e,a=i().qh(t);return a?{validated:i().DT(a).valueOf()}:{validated:!1}},redirect_uris:function(e){const{value:t}=e;return{validated:t.every((e=>(0,a(388693).rf)(a(780054).A.domainBaseUrl,e)))}},website_url:g,privacy_policy_url:g,terms_of_use_url:g,template_url:function(e){const{value:t,templateStore:i}=e;return l().q7(t)?(0,a(836251).wU)(t)?i&&(0,a(731320).qw)(i)?{validated:!0}:{validated:!1,errorMessages:[{descriptor:u.templateUrlCannotBeDuplicated}]}:{validated:!1,errorMessages:[{descriptor:u.templateUrlIsNotNotionPage}]}:{validated:!1}},capabilities:function(e){const{value:t}=e;return x.some((e=>t[e]))?{validated:!0}:{validated:!1,errorMessages:[{descriptor:u.capabilityErrorMessage}]}},unfurl_url:g,url_matching_and_placeholder:function(e){const{value:t,formData:a}=e,i=[];for(const o of t){if(m(o.regex).validated){var r;const e=h({domains:(n=null===(r=a.domain)||void 0===r?void 0:r.value,n?(0,d().sb)([...n.developmentDomain&&[n.developmentDomain],...n.domainVerifications.map((e=>{let{domain:t}=e;return t})),...n.verifiedDomains]):[]),regex:o.regex,urls:o.sampleUrls});i.push(...e)}else i.push({descriptor:u.regexPatternErrorMessage,value:o.name});f(o.attributes).validated||i.push({descriptor:u.regexAttributesErrorMessage,value:o.name})}var n;return i.length>0?{validated:!1,errorMessages:i.map((e=>{let{descriptor:t,value:a}=e;return{descriptor:t,values:{value:a}}}))}:{validated:!0}},external_oauth_authorize_url:g,external_oauth_token_url:g,external_deletion_url:g}},739135:(e,t,a)=>{a.d(t,{KD:()=>d,gt:()=>c,i9:()=>l,ll:()=>o,tb:()=>s,x$:()=>n});var i=()=>a(541235),r=()=>a(496603);function n(e,t){return o(c(e,t))}function o(e){return void 0!==e&&(e===i().q_||e===i().YD)}function s(e,t){if(o(t))return;const a=i().c$[e],r=a.steps.findIndex((e=>e.id===t));return-1===r?a.steps[0].id:r===a.steps.length-1?i().q_:a.steps[r+1].id}function l(e,t){const a=c(e,t);if(a&&!o(a))return s(t,a)}function d(e,t){const a=c(e,t);if(a)return function(e,t){const a=i().c$[e];var n;if(o(t))return null===(n=(0,r().HV)(a.steps))||void 0===n?void 0:n.id;const s=a.steps.findIndex((e=>e.id===t));return-1!==s&&0!==s?a.steps[s-1].id:void 0}(t,a)}function c(e,t){var a;if(!e)return;const r=((null===(a=e.getSettings())||void 0===a?void 0:a.tutorials)||{})[t];return void 0===r?i().c$[t].steps[0].id:r}},769206:(e,t,a)=>{a.d(t,{A:()=>r});class i extends(()=>a(757695))().default{getInitialState(){return{isOpen:!1}}}const r=new i},770634:(e,t,a)=>{a.d(t,{C:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("ticket",{viewBox:"0 0 64 64",svg:(0,i.jsx)("path",{d:"m44,40h-24v-16h24v16Zm8-8c0,3.7,2.3,6,6,6v12H6v-12c3.7,0,6-2.3,6-6s-2.3-6-6-6v-12h52v12c-3.7,0-6,2.3-6,6Zm-4-12H16v24h32v-24Z"})})},788941:(e,t,a)=>{a.d(t,{b:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("pinFilled",{viewBox:"0 0 13 19",svg:(0,i.jsx)("path",{d:"M.102 11.773c0 .665.445 1.102 1.148 1.102h4.227v3.648c0 1.196.5 2.188.695 2.188.187 0 .687-.992.687-2.188v-3.648h4.227c.703 0 1.148-.438 1.148-1.102 0-1.648-1.32-3.39-3.515-4.187L8.46 4c1.14-.648 2.078-1.383 2.484-1.906.203-.266.305-.531.305-.766 0-.476-.367-.828-.914-.828H2.008c-.555 0-.914.352-.914.828 0 .234.093.5.297.766.406.523 1.343 1.258 2.484 1.906l-.258 3.586C1.422 8.383.102 10.125.102 11.773z"})})},837530:(e,t,a)=>{a.d(t,{$g:()=>c,GF:()=>d,lR:()=>u});a(296540);var i=()=>a(401497),r=()=>a(704152),n=()=>a(816559),o=()=>a(554509),s=()=>a(554283),l=a(474848);function d(e){const{children:t,onClick:a,width:n,height:o,shouldHideBorders:d=!1,href:c,orientation:u="vertical",style:p,isDisabled:g=!1,hoveredStyle:m,pressedStyle:f}=e,[h,b]=(0,s().B)(),v=function(e){const{width:t,height:a,orientation:r,isHovered:n,isDisabled:o}=e;return(0,i().IS)((e=>({marketplaceCardWrapper:{position:"relative",width:"100%",display:"flex"},marketplaceCardContainer:{position:"relative",borderRadius:"12px",transition:"background 20ms ease-in 0s",display:"flex",flexDirection:"vertical"===r?"column":"row",cursor:"pointer",overflow:"hidden",width:t??252,height:a??"auto",..."dark"===e.mode&&{background:"rgba(255, 255, 255, 0.05)"},flex:1},marketplaceCardContainerHovered:{background:"dark"===e.mode?"rgba(255, 255, 255, 0.05)":"none"},marketplaceCardContainerPressed:{background:"dark"===e.mode?"rgba(255, 255, 255, 0.05)":"none"},boxShadow:{position:"absolute",pointerEvents:"none",borderRadius:12,inset:0,zIndex:1,..."dark"===e.mode?{boxShadow:n&&!o?"rgba(255, 255, 255, 0.05) 0px 0px 0px 1px inset":"unset"}:{boxShadow:n&&!o?"0px 12px 32px 0px rgba(0, 0, 0, 0.03), 0px 0px 0px 1px rgba(0, 0, 0, 0.08)":"0px 12px 32px 0px rgba(0, 0, 0, 0.02), 0px 0px 0px 1px rgba(0, 0, 0, 0.05)"}}})),[r,t,a,n,o])}({width:n,height:o,orientation:u,isHovered:b,isDisabled:g});return(0,l.jsxs)("div",{ref:h,style:v.marketplaceCardWrapper,children:[(0,l.jsx)(r().A,{style:{...v.marketplaceCardContainer,...p},hoveredStyle:{...v.marketplaceCardContainerHovered,...m},pressedStyle:{...v.marketplaceCardContainerPressed,...f},onClick:a,href:c,disabled:g,children:t}),!d&&(0,l.jsx)("div",{style:v.boxShadow})]})}function c(e){const{imageHeight:t,imageWidth:a,src:r,overlay:o,alt:d,shouldShowBorders:c=!1,imageContainerStyle:u={},imageStyle:p={},isDisabled:g=!1,imageBorderRadius:m=12,href:f}=e,[h,b]=(0,s().B)(),v=function(e){const{isHovered:t,imageHeight:a,src:r,href:n,borderRadius:o,isDisabled:s,imageWidth:l}=e;return(0,i().IS)((e=>({marketplaceCardImageContainer:{position:"relative",borderRadius:o,transition:"background 20ms ease-in 0s",cursor:n&&"pointer"},marketplaceCardImageOverlay:{position:"absolute",top:30,left:16},marketplaceCardImage:{borderRadius:o,objectPosition:"inherit",...void 0!==a?{height:a}:{height:"auto"},...void 0!==l?{width:l}:{width:"inherit"},...!r&&{background:e.surface.wash},..."dark"===e.mode&&{border:"1px solid",borderColor:e.marketplaceEditorial.border.white,...t&&{borderColor:e.marketplaceEditorial.border.hover.white}}},marketplaceCardImageBoxContainer:{objectPosition:"inherit"},boxShadow:{position:"absolute",pointerEvents:"none",borderRadius:o,inset:0,zIndex:1,..."dark"===e.mode?{boxShadow:t&&!s?"rgba(255, 255, 255, 0.05) 0px 0px 0px 1px inset":"unset"}:{boxShadow:t&&!s?"0px 12px 32px 0px rgba(0, 0, 0, 0.03), 0px 0px 0px 1px rgba(0, 0, 0, 0.08)":"0px 12px 32px 0px rgba(0, 0, 0, 0.02), 0px 0px 0px 1px rgba(0, 0, 0, 0.05)"}}})),[n,t,a,r,o,s,l])}({isHovered:b,imageHeight:t,imageWidth:a,src:r,isDisabled:g,href:f,borderRadius:m}),x=(0,l.jsxs)("div",{style:{...v.marketplaceCardImageContainer,...u},ref:h,children:[r?(0,l.jsx)(n().Ay,{src:r,style:{...v.marketplaceCardImage,...p},placeholderLoadedStyle:v.marketplaceCardImageBoxContainer,loading:"lazy",alt:d}):(0,l.jsx)("div",{style:{...v.marketplaceCardImage,...p}}),o&&(0,l.jsx)("div",{style:v.marketplaceCardImageOverlay,children:o}),c&&(0,l.jsx)("div",{style:v.boxShadow})]});return f?(0,l.jsx)("a",{href:f,children:x}):x}function u(e){const{title:t,subtitle:a,children:r,style:n}=e,s=(0,i().IS)((()=>({marketplaceCardContentContainer:{position:"relative",padding:"12px 16px 16px 16px"},marketplaceCardTitleContainer:{display:"flex",flexDirection:"column",gap:"2px",height:"100%"}})),[]);return(0,l.jsxs)("div",{style:{...s.marketplaceCardContentContainer,...n},children:[(0,l.jsxs)("div",{style:s.marketplaceCardTitleContainer,children:["string"==typeof t?(0,l.jsx)(o().D,{styleName:"Body-14px/Regular",colorName:"primary",children:t}):(0,l.jsx)(l.Fragment,{children:t}),a?"string"==typeof a?(0,l.jsx)(o().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:a}):a:null]}),r]})}},841224:(e,t,a)=>{a.d(t,{Q:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("language",{viewBox:"0 0 64 64",svg:(0,i.jsx)("path",{d:"m20,19.24l2.16,5.76h-4.32l2.16-5.76Zm5.95,4.62c2.49-3.27,6.07-5.64,10.5-6.87-2.61-5.68-8.42-8.99-16.45-8.99C8.89,8,2,14.32,2,24.5c0,5.19,1.8,9.37,5.03,12.22l-5.03,5.03,1.5,2.25c4.06,0,7.8-1.36,10.81-3.63,1.74.41,3.64.63,5.69.63.82,0,1.61-.05,2.39-.11-.25-1.39-.39-2.85-.39-4.39,0-2.73.43-5.23,1.22-7.5h-6.88l-1.12,3h-4.22l6-16h6l2.95,7.86Zm18.05,13.46c.99-.9,1.84-1.99,2.4-3.32h-4.79c.56,1.33,1.41,2.42,2.4,3.32Zm12.97,11.4l5.03,5.03-1.5,2.25c-4.06,0-7.8-1.36-10.81-3.63-1.74.41-3.64.63-5.69.63-11.11,0-18-6.32-18-16.5s6.89-16.5,18-16.5,18,6.32,18,16.5c0,5.19-1.8,9.37-5.03,12.22Zm-3.97-18.72h-7v-3h-4v3h-7v4h2.49c.58,1.97,1.68,3.86,3.22,5.52-2.76,1.36-5.38,1.74-5.38,1.74l1.4,3.75c2.78-.5,5.21-1.48,7.26-2.78,2.05,1.3,4.49,2.29,7.26,2.78l1.4-3.75s-2.62-.38-5.38-1.74c1.55-1.66,2.64-3.55,3.22-5.52h2.49v-4Z"})})},889350:(e,t,a)=>{a.d(t,{Z:()=>o});a(296540);var i=()=>a(401497),r=()=>a(710149),n=a(474848);function o(e){const{size:t=22,radius:a=100}=e,o=function(e){const{size:t,radius:a}=e;return(0,i().IS)((()=>({loadingAvatar:{width:t,height:t,borderRadius:a}})),[t,a])}({size:t,radius:a});return(0,n.jsx)(r().A,{style:o.loadingAvatar})}},939482:(e,t,a)=>{a.d(t,{AC:()=>_,AW:()=>I,B3:()=>x,Ie:()=>v,O2:()=>b,aZ:()=>k,dZ:()=>S,es:()=>C,j9:()=>y,ky:()=>j,uL:()=>w});a(944114),a(898992),a(354520),a(430670),a(581454);var i=()=>a(221844),r=()=>a(700500),n=()=>a(807427),o=()=>a(513416),s=()=>a(206267),l=()=>a(792071),d=()=>a(179034),c=()=>a(798880),u=()=>a(919709),p=()=>a(506391),g=()=>a(534177),m=()=>a(720665),f=()=>a(630116),h=()=>a(594794);function b(e){return(0,m().sb)(e.flatMap((e=>{if("relation"===e.type)return e.relation.uri})).filter(g().O9))}function v(e){const{environment:t,integration:a,rootUrl:g,rootAttributes:m,relatedUrisToAttributes:b}=e,v=s().Dt(),x=t.currentUser.id,y=new(i().A)({name:"developerIntegrationLabHelpers.getBlockStores"}),C=[],w={};for(const[i,r]of Object.entries(b)){const e=s().JW();C.push({id:e,uri:i,attributes:r}),w[i]=e}const j=[{id:"rootInstanceId",original_url:g,attributes:m,related_external_object_uris_to_instance_ids:w},...C].map((e=>{const t=[];for(const a of e.attributes){const e=(0,p().q8)(a);(0,o().PX)(e)&&t.push(e)}return{...e,attributes:t}}));if("success"!==(0,p().$B)({url:g,integrations:[a],currentSpaceId:v}).type)return{error:"Sample URL does not match provided integration regex."};const S=(0,h().JH)({table:d().ev,environment:t,spaceId:v});let _;for(const i of j){const e={table:d().ev,id:i.id,spaceId:v},a={...i,domain:"test"},n={id:i.id,type:r().xd.externalObjectInstance,version:0,created_at:0,created_by_table:c().oo,created_by_id:(0,h().Z1)({table:c().oo,spaceId:v,environment:t}),last_edited_time:0,last_edited_by_table:c().oo,last_edited_by_id:(0,h().Z1)({table:c().oo,spaceId:v,environment:t}),parent_table:d().ev,parent_id:(0,h().Z1)({table:d().ev,spaceId:v,environment:t}),space_id:v,alive:!0,domain:"",format:a};if(y.setRecord({pointer:e,userId:x},{role:"editor",value:n}),i===j[0]){const t={...n,format:{...a,attributes:void 0}};y.setRecord({pointer:S,userId:x},{role:"editor",value:t}),_=e}}if(!_)return{error:"Root external object was not defined."};const M=new(f().Bv)(t,S,{inMemoryRecordCache:y}),A=new(f().Bv)(t,_,{inMemoryRecordCache:y}),I=(0,h().JH)({table:d().ev,environment:t,spaceId:v}),k=new(f().Bv)(t,I,{inMemoryRecordCache:y}),{model:T}=l().zgg.create({id:I.id,type:"text",space_id:v,parent:{id:(0,h().Z1)({table:d().ev,spaceId:v,environment:t}),table:d().ev,spaceId:v},properties:{title:[(0,u().wmz)((0,u().bMp)(S.id))]},createdBy:{table:c().oo,id:(0,h().Z1)({table:c().oo,spaceId:v,environment:t})}},{useCrdt:n().I()}),P=T.__IM_SORRY__getValue();y.setRecord({pointer:I,userId:x},{role:"editor",value:P});const L=(0,h().JH)({table:d().ev,environment:t,spaceId:v}),D=new(f().Bv)(t,L,{inMemoryRecordCache:y}),{model:R}=l().zgg.create({id:L.id,type:"text",space_id:v,parent:{id:(0,h().Z1)({table:d().ev,spaceId:v,environment:t}),table:d().ev,spaceId:v},properties:{title:[(0,u().wmz)((0,u().bMp)(j[0].id))]},createdBy:{table:c().oo,id:(0,h().Z1)({table:c().oo,spaceId:v,environment:t})}},{useCrdt:n().I()}),E=R.__IM_SORRY__getValue();return y.setRecord({pointer:L,userId:x},{role:"editor",value:E}),{emptyInstanceBlockStore:M,previewBlockStore:A,emptyInlineBlockStore:k,inlineBlockStore:D}}const x=s().Dt(),y="https://acme.com/items/23487",C="acme.com",w="^(?<site>https\\:\\/\\/acme\\.com)\\/items\\/(?<itemNo>\\d+)$",j=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Acme Item #$<itemNo>",section:"title"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#$<itemNo>",section:"identifier"}}},{id:"site",name:"Site",type:"inline",inline:{plain_text:{value:"$<site>",section:"secondary"}}}],S={name:"item",regex:w,attributes:j,sampleUrls:[y]},_=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Feature Request: Link Previews",section:"title"}}},{id:"state",name:"State",type:"relation",relation:{uri:"acme:item_state/open",mention:{section:"primary"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#23487",section:"identifier"}}},{id:"itemIcon",name:"Item Icon",type:"inline",inline:{color:{value:{r:247,g:247,b:42},section:"entity"}}},{id:"user",name:"User",type:"relation",relation:{uri:"https://acme.com/fig-ment",extension:[{id:"title",section:"secondary"},{id:"avatar_url",section:"avatar"}]}},{id:"description",name:"Description",type:"inline",inline:{plain_text:{value:"Would love to be able to preview some Acme resources in Notion!\n Maybe an open item?",section:"body"}}},{id:"updated_at",name:"Updated At",type:"inline",inline:{datetime:{value:"2022-01-11T19:53:18.829Z",section:"secondary"}}},{id:"label",name:"Label",type:"inline",inline:{enum:{value:"🔨 Ready to Build",color:{r:100,g:100,b:100},section:"primary"}}}],M={uri:"https://acme.com/fig-ment",attributes:[{id:"title",name:"User Name",type:"inline",inline:{title:{value:"fig"}}},{id:"avatar_url",name:"Avatar URL",type:"embed",embed:{src_url:"https://avatars.githubusercontent.com/u/93556354?s=88&u=4967f0be0900684b6963a953ca7fe0ff2268746f&v=4",image:{}}}]},A={uri:"acme:item_state/open",attributes:[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Open",section:"title"}}},{id:"icon",name:"Icon",type:"embed",embed:{src_url:"/images/external_integrations/acme-icon.png",image:{section:"avatar"}}},{id:"color",name:"Color",type:"inline",inline:{color:{value:{r:235,g:64,b:52},section:"background"}}}]};function I(){const e=[M,A],t=b(_),a={};for(const i of t){const t=e.find((e=>e.uri===i));t&&(a[i]=t.attributes)}return a}function k(e){const{domain:t,regex:a,currentIntegration:i}=e,r={...i.info,original_url_domains:[t],original_url_patterns:[{name:"acme-issue",regex:a,attributes:e.attributes.map((e=>{const t=(0,p().q8)(e);if((0,o().PX)(t))return t})).filter(g().O9)}]};return{...i,info:r}}},950705:(e,t,a)=>{function i(e){return{"en-US":{label:"English",caption:e.formatMessage({defaultMessage:"English (US)",id:"languagePicker.captions.englishUS"})},"de-DE":{label:"Deutsch",caption:e.formatMessage({defaultMessage:"German",id:"languagePicker.captions.germanDE"})},"ko-KR":{label:"한국어",caption:e.formatMessage({defaultMessage:"Korean",id:"languagePicker.captions.koreanKo"})},"zh-CN":{label:"简体中文",caption:e.formatMessage({defaultMessage:"Simplified Chinese",id:"languagePicker.captions.chineseS"})},"zh-TW":{label:"繁體中文",caption:e.formatMessage({defaultMessage:"Traditional Chinese",id:"languagePicker.captions.chineseT"})},"ja-JP":{label:"日本語",caption:e.formatMessage({defaultMessage:"Japanese",id:"languagePicker.captions.japaneseJa"})},"es-ES":{label:"Español (España)",caption:e.formatMessage({defaultMessage:"Spanish (Spain)",id:"languagePicker.captions.spanishEs"})},"es-LA":{label:"Español (Latinoamérica)",caption:e.formatMessage({defaultMessage:"Spanish (Latin America)",id:"languagePicker.captions.spanishLatam"})},"pt-BR":{label:"Português (Brasil)",caption:e.formatMessage({defaultMessage:"Portuguese (Brazil)",id:"languagePicker.captions.portugueseBr"})},"fr-FR":{label:"Français (France)",caption:e.formatMessage({defaultMessage:"French",id:"languagePicker.captions.frenchFr"})},"da-DK":{label:"Dansk",caption:e.formatMessage({defaultMessage:"Danish",id:"languagePicker.captions.danishDk"})},"fi-FI":{label:"Suomi",caption:e.formatMessage({defaultMessage:"Finnish",id:"languagePicker.captions.finnishFi"})},"nb-NO":{label:"Norsk",caption:e.formatMessage({defaultMessage:"Norwegian",id:"languagePicker.captions.norwegianNo"})},"nl-NL":{label:"Nederlands",caption:e.formatMessage({defaultMessage:"Dutch",id:"languagePicker.captions.dutchNl"})},"sv-SE":{label:"Svenska",caption:e.formatMessage({defaultMessage:"Swedish",id:"languagePicker.captions.swedishSe"})},pseudo:{label:"🤡Pseudolocale🤡",caption:e.formatMessage({defaultMessage:"Pseudolocale",id:"languagePicker.captions.pseudolocale"})}}}function r(e){return{en:{name:e.formatMessage({defaultMessage:"English",id:"languagePicker.name.english"}),abbreviation:e.formatMessage({defaultMessage:"EN",id:"languagePicker.abbreviation.english"})},de:{name:e.formatMessage({defaultMessage:"German",id:"languagePicker.name.german"}),abbreviation:e.formatMessage({defaultMessage:"DE",id:"languagePicker.abbreviation.german"})},ko:{name:e.formatMessage({defaultMessage:"Korean",id:"languagePicker.name.korean"}),abbreviation:e.formatMessage({defaultMessage:"KO",id:"languagePicker.abbreviation.korean"})},zh:{name:e.formatMessage({defaultMessage:"Chinese",id:"languagePicker.name.chinese"}),abbreviation:e.formatMessage({defaultMessage:"ZH",id:"languagePicker.abbreviation.chinese"})},ja:{name:e.formatMessage({defaultMessage:"Japanese",id:"languagePicker.name.japanese"}),abbreviation:e.formatMessage({defaultMessage:"JA",id:"languagePicker.abbreviation.japanese"})},es:{name:e.formatMessage({defaultMessage:"Spanish",id:"languagePicker.name.spanish"}),abbreviation:e.formatMessage({defaultMessage:"ES",id:"languagePicker.abbreviation.spanish"})},pt:{name:e.formatMessage({defaultMessage:"Portuguese",id:"languagePicker.name.portuguese"}),abbreviation:e.formatMessage({defaultMessage:"PT",id:"languagePicker.abbreviation.portuguese"})},fr:{name:e.formatMessage({defaultMessage:"French",id:"languagePicker.name.french"}),abbreviation:e.formatMessage({defaultMessage:"FR",id:"languagePicker.abbreviation.french"})},da:{name:e.formatMessage({defaultMessage:"Danish",id:"languagePicker.name.danish"}),abbreviation:e.formatMessage({defaultMessage:"DA",id:"languagePicker.abbreviation.danish"})},fi:{name:e.formatMessage({defaultMessage:"Finnish",id:"languagePicker.name.finnish"}),abbreviation:e.formatMessage({defaultMessage:"FI",id:"languagePicker.abbreviation.finnish"})},nb:{name:e.formatMessage({defaultMessage:"Norwegian",id:"languagePicker.name.norwegian"}),abbreviation:e.formatMessage({defaultMessage:"NB",id:"languagePicker.abbreviation.norwegian"})},nl:{name:e.formatMessage({defaultMessage:"Dutch",id:"languagePicker.name.dutch"}),abbreviation:e.formatMessage({defaultMessage:"NL",id:"languagePicker.abbreviation.dutch"})},sv:{name:e.formatMessage({defaultMessage:"Swedish",id:"languagePicker.name.swedish"}),abbreviation:e.formatMessage({defaultMessage:"SV",id:"languagePicker.abbreviation.swedish"})}}}a.d(t,{V:()=>i,W:()=>r})},951447:(e,t,a)=>{a.d(t,{j:()=>r});var i=a(296540);function r(e){const[t,a]=(0,i.useState)(!1),r="function"==typeof IntersectionObserver;return(0,i.useEffect)((()=>{if(r&&e.current){const t=new IntersectionObserver((e=>{const t=e[0];a(t.intersectionRatio<1)}),{threshold:[1]});return t.observe(e.current),()=>{a(!1),t.disconnect()}}return()=>{}}),[r,e]),t}},981305:(e,t,a)=>{a.d(t,{B:()=>n});a(16280);var i=a(296540),r=()=>a(472090);function n(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,i.useEffect)((()=>{const i=new(r().E)({throttleMs:a});if(!e.current)throw new Error("ref.current is null");return i.observe(e.current),i.rect.addListener(t),()=>{i.destroy()}}),[t])}},981485:(e,t,a)=>{a.d(t,{ZY:()=>P,GA:()=>V,zA:()=>z,cL:()=>U,dK:()=>F,UM:()=>T,E9:()=>L});a(944114),a(898992),a(354520),a(581454);var i=()=>a(799288),r=()=>a(857639),n=()=>a(513416),o=()=>a(427704),s=()=>a(824862),l=()=>a(840911),d=()=>a(332393),c=()=>a(798880),u=()=>a(20498),p=()=>a(506391),g=()=>a(229833),m=()=>a(498212),f=()=>a(534177),h=()=>a(671593),b=()=>a(559926),v=()=>a(908928),x=()=>a(901389),y=()=>a(96689),C=()=>a(449506),w=()=>a(246826);var j=()=>a(434945),S=()=>a(685200),_=()=>a(972435),M=()=>a(351360),A=()=>a(630116),I=()=>a(435009),k=()=>a(317909);function T(e){const{environment:t,integrationStore:a}=e;k().createAndCommit({userAction:"developerIntegrationActions.setIntegrationSecretView",environment:t,canUndo:!0,perform:e=>{!function(e){const{integrationStore:t,transaction:a}=e,i=(0,A().G_)(t,t.pointer,"info");w().zv({store:i,data:{has_viewed_secret:!0},transaction:a})}({integrationStore:a,transaction:e})}})}async function P(e){const{environment:t,recordStore:a}=e;function i(){b().gp(t,{table:a.table})}a.table===s().GP?await v().KA({environment:t,botId:a.id,onSuccess:i}):a.table===d().Li?await async function(e){const{environment:t,integrationId:a,onSuccess:i}=e,r=await C().callApi({eventName:"deleteIntegration",environment:t,data:{integrationId:a}});"failed"===r.type?x().Qg(r):"success"===r.type&&i&&i()}({environment:t,integrationId:a.id,onSuccess:i}):(0,f().HB)(a.table)}function L(e){const{environment:t,formState:a,formData:i}=e;if("create-bot"===a.type)return D({environment:t,formData:i});if("update-bot"===a.type)return function(e){const{environment:t,botPointer:a,formData:i}=e,{currentUserRootStore:r}=M().default.state;if(!r)return;const n=(0,A().Oo)(r,a),o="developerIntegrationActions.updateBot";k().createAndCommit({userAction:o,environment:t,canUndo:!0,perform:e=>{w().zv({store:n,data:{name:i.name,icon:i.icon??null,parent_id:i.space.id,last_edited_by_id:r.id,last_edited_by_table:c().oo,last_edited_at:Date.now(),capabilities:i.capabilities},transaction:e}),e.postSubmitCallbacks=[t=>{t&&W(t,o,e.spaceId)}]}}),b().u2(t,{table:s().GP});const l=n.getKeyStore("integration_id").getValue();if(l){const e=(0,A().Oo)(r,{id:l,table:d().Li}),a={name:i.name,capabilities:i.capabilities},n=(0,A().G_)(e,e.pointer,"info"),o="developerIntegrationActions.updateIntegration";k().createAndCommit({userAction:o,environment:t,canUndo:!0,perform:t=>{w().zv({store:e,data:a,transaction:t}),w().zv({store:n,data:{icon:i.icon??""},transaction:t}),t.postSubmitCallbacks=[e=>{e&&W(e,o,t.spaceId)}]}})}else E({environment:t,botPointer:a,formData:i});return a}({environment:t,botPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table,spaceId:a.startingRecord.value.space_id},formData:i});if("create-guest-integration"===a.type){if(!a.startingRecord)return;const e=a.startingRecord.value.integration_id;return e?B({environment:t,integrationPointer:{id:e,table:d().Li},formData:i,botPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table,spaceId:a.startingRecord.value.space_id}}):R({environment:t,botPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table,spaceId:a.startingRecord.value.space_id},formData:i})}return"update-guest-integration"===a.type?B({environment:t,integrationPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table},formData:i}):"create-third-party-external-integration"===a.type?function(e){const{environment:t,formData:a,integrationPointer:i}=e,{currentUserRootStore:r}=M().default.state,n=i.id;if(!r)return;const o=O(a);if(!o)return;const s=o.oauth_authorize_url;B({environment:t,integrationPointer:i,formData:a,hasLinkPreviewCapabilities:!0,redirect_uris:[s]});const u="developerIntegrationActions.createThirdPartyExternalIntegration";return k().createAndCommit({userAction:u,environment:t,canUndo:!0,perform:e=>{!function(e,t,a){const{integrationId:i,userRootStore:r,config:{oauth_authorize_url:n,oauth_token_url:o,client_id:s,client_secret:d,scopes:u,deletion_url:p}}=a,g={id:i,oauth_authorize_url:n,oauth_token_url:o,client_id:s,client_secret:d,scopes:u,parent_id:r.id,parent_table:c().oo,deletion_url:p};w().eC({environment:e,table:l().Ps,value:g,transaction:t,inMemoryRecordCache:r.inMemoryRecordCache})}(t,e,{integrationId:n,userRootStore:r,config:o}),e.postSubmitCallbacks=[t=>{t&&W(t,u,e.spaceId)}]}}),N(t,i),b().BW(t,{table:d().Li}),i}({environment:t,integrationPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table},formData:i}):"update-third-party-external-integration"===a.type?function(e){const{environment:t,integrationPointer:a,formData:i}=e,{currentUserRootStore:r}=M().default.state;if(!r)return;const n=O(i);if(!n)return;const o=(0,A().Oo)(r,{table:l().Ps,id:a.id}),s={oauth_authorize_url:n.oauth_authorize_url,oauth_token_url:n.oauth_token_url,client_id:n.client_id,client_secret:n.client_secret,scopes:n.scopes||null,deletion_url:n.deletion_url||null},d=n.oauth_authorize_url;B({environment:t,integrationPointer:a,formData:i,hasLinkPreviewCapabilities:!0,redirect_uris:[d]});const c="developerIntegrationActions.updateThirdPartyExternalIntegration";return k().createAndCommit({userAction:c,environment:t,canUndo:!0,perform:e=>{w().zv({store:o,data:s,transaction:e}),e.postSubmitCallbacks=[t=>{t&&W(t,c,e.spaceId)}]}}),a}({environment:t,integrationPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table},formData:i}):"update-first-party-external-integration"===a.type?B({environment:t,integrationPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table},formData:i,hasLinkPreviewCapabilities:!0}):"update-compliance-integration"===a.type?function(e){const{environment:t,integrationPointer:a,formData:i}=e,{currentUserRootStore:r}=M().default.state;if(!r)return;const n=O(i),o=null==n?void 0:n.oauth_authorize_url;if(B({environment:t,integrationPointer:a,formData:i,...o?{redirect_uris:[o]}:void 0}),n){const e=(0,A().Oo)(r,{table:l().Ps,id:a.id}),i={oauth_authorize_url:n.oauth_authorize_url,oauth_token_url:n.oauth_token_url,client_id:n.client_id,client_secret:n.client_secret,scopes:n.scopes||null,deletion_url:n.deletion_url||null},o="developerIntegrationActions.updateComplianceIntegration";k().createAndCommit({userAction:o,environment:t,canUndo:!0,perform:t=>{w().zv({store:e,data:i,transaction:t}),t.postSubmitCallbacks=[e=>{e&&W(e,o,t.spaceId)}]}})}return a}({environment:t,integrationPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table},formData:i}):(0,f().HB)(a)}function D(e){const{environment:t,formData:a}=e,{currentUserRootStore:i}=M().default.state;if(!i)return;const{botStore:r}=v().gI({environment:t,name:a.name,icon:a.icon,userId:i.id,spaceStore:a.space,spaceRole:"none",type:"guest",capabilities:a.capabilities||{read_content:!0,insert_content:!0,update_content:!0,read_user_without_email:!0,read_user_with_email:!0}});return N(t,{id:r.id,table:s().GP,spaceId:a.space.id}),b().BW(t,{table:s().GP}),{id:r.id,table:s().GP,spaceId:a.space.id}}function R(e){const{environment:t,botPointer:a,formData:r}=e,{currentUserRootStore:n}=M().default.state;if(!n)return;const o=(0,A().Oo)(n,a),s=o.getValue(),l=s&&(0,i().hu)(s)?s.capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_user_without_email:!0,read_user_with_email:!0},u={name:r.name,tagline:r.tagline,icon:r.icon,email:r.email,website_url:r.website_url,privacy_policy_url:r.privacy_policy_url,terms_of_use_url:r.terms_of_use_url,template_page_id:r.template_page_id,redirect_uris:r.redirect_uris,capabilities:l,userRootStore:n,developer_name:r.developer_name},p="developerIntegrationActions.integrationId",{performResult:g}=k().createAndCommit({userAction:p,environment:t,canUndo:!0,perform:e=>{const a=function(e,t,a){const{name:i,tagline:r,icon:n,email:o,website_url:s,privacy_policy_url:l,terms_of_use_url:u,template_page_id:p,redirect_uris:g,capabilities:m,userRootStore:f,developer_name:h}=a,b=Date.now(),v=f.id,x={name:i,parent_table:c().oo,parent_id:v,created_at:b,created_by_id:v,created_by_table:c().oo,updated_at:b,updated_by_id:v,updated_by_table:c().oo,redirect_uris:g,type:"guest",status:"unpublished",info:{tagline:r,icon:n,email:o,website_url:s,privacy_policy_url:l,terms_of_use_url:u,template_page_id:p,developer_name:h},capabilities:m,alive:!0};return w().eC({environment:e,table:d().Li,value:x,transaction:t,inMemoryRecordCache:f.inMemoryRecordCache})}(t,e,u),i=a.id;return w().zv({store:o,data:{integration_id:i,parent_table:c().oo,parent_id:n.id},transaction:e}),e.postSubmitCallbacks=[t=>{t&&W(t,p,e.spaceId)}],i}}),m={id:g,table:d().Li};return N(t,m),b().BW(t,{table:d().Li,template_id:r.template_page_id}),m}function E(e){const{environment:t,botPointer:a,formData:r}=e,{currentUserRootStore:n}=M().default.state;if(!n||!a.spaceId)return;const o=(0,A().Oo)(n,a),s=o.getValue(),l=s&&(0,i().hu)(s)?s.capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_user_without_email:!0,read_user_with_email:!0},u={name:r.name,icon:r.icon,capabilities:l,userRootStore:n,spaceId:a.spaceId},p="developerIntegrationActions.integrationId";return k().createAndCommit({userAction:p,environment:t,canUndo:!0,perform:e=>{const a=function(e,t,a){const{name:i,icon:r,spaceId:n,capabilities:o,userRootStore:s}=a,l=Date.now(),u=s.id,p={name:i,parent_table:y().NX,parent_id:n,created_at:l,created_by_id:u,created_by_table:c().oo,updated_at:l,updated_by_id:u,updated_by_table:c().oo,redirect_uris:[""],type:"internal",status:"unpublished",info:{icon:r??""},capabilities:o,alive:!0};return w().eC({environment:e,table:d().Li,value:p,transaction:t,inMemoryRecordCache:s.inMemoryRecordCache})}(t,e,u),i=a.id;return w().zv({store:o,data:{integration_id:i},transaction:e}),e.postSubmitCallbacks=[t=>{t&&W(t,p,e.spaceId)}],i}}),N(t,a),a}function B(e){const{environment:t,integrationPointer:a,formData:i,hasLinkPreviewCapabilities:r,redirect_uris:o,botPointer:s}=e,{currentUserRootStore:l}=M().default.state;if(!l)return;const g=void 0!==s,m=(0,A().Oo)(l,a),h=m.getValue(),v=a.id,x=h&&(0,d().SF)(h)||null==h?void 0:h.info.template_page_id,y=(0,u().Hr)(v),C=y?y.allowedBotCapabilities:r?{...i.capabilities,link_preview:!0}:i.capabilities,j=r?"external":"guest";let _;_=!h||(0,d().SF)(h)?l.id:h.parent_id;const I={name:i.name,redirect_uris:o??i.redirect_uris,capabilities:C,type:j,parent_table:c().oo,parent_id:_},T=(0,A().G_)(m,m.pointer,"info"),P=function(e){const{hasLinkPreviewCapabilities:t,integrationId:a,formData:i,currentIntegrationInfo:r}=e;if(t)return function(e){var t,a,i;const{integrationId:r,formData:o,currentIntegrationInfo:s}=e,l=(null==s||null===(t=s.original_url_patterns)||void 0===t?void 0:t.filter((e=>{var t;return!0===(null===(t=e.additional_types)||void 0===t?void 0:t.collection)})))??[],d=(null===(a=o.url_matching_and_placeholder)||void 0===a||null===(a=a.map((e=>{const t=[];for(const a of e.attributes){const e=(0,p().q8)(a);if(!(0,n().PX)(e))return;t.push(e)}return{name:(0,S().O)({patternName:e.name,integrationId:r}),regex:e.regex,attributes:t,sample_urls:e.sampleUrls}})))||void 0===a?void 0:a.filter(f().O9))??[],c=null===(i=o.domain)||void 0===i||null===(i=i.domainVerifications)||void 0===i||null===(i=i.filter((e=>"unverified"===e.type)))||void 0===i?void 0:i.map((e=>e.domain));return{template_page_id:o.template_page_id,tagline:o.tagline,icon:o.icon,email:o.email,website_url:o.website_url,privacy_policy_url:o.privacy_policy_url,terms_of_use_url:o.terms_of_use_url,developer_name:o.developer_name,unfurl_url:o.unfurl_url,development_url_domains:c,original_url_patterns:[...d,...l],dark_icon:(null==s?void 0:s.dark_icon)??o.icon,accent_color:(null==s?void 0:s.accent_color)??{r:36,g:41,b:47},accent_icon:(null==s?void 0:s.accent_icon)??o.icon}}({integrationId:a,formData:i,currentIntegrationInfo:r});return{tagline:i.tagline,icon:i.icon,email:i.email,website_url:i.website_url,privacy_policy_url:i.privacy_policy_url,terms_of_use_url:i.terms_of_use_url,template_page_id:i.template_page_id,developer_name:i.developer_name}}({hasLinkPreviewCapabilities:r,integrationId:v,formData:i,currentIntegrationInfo:T.getValue()}),L="developerIntegrationActions.updateIntegration";k().createAndCommit({userAction:L,environment:t,canUndo:!0,perform:e=>{if(w().zv({store:m,data:I,transaction:e}),w().zv({store:T,data:P,transaction:e}),g&&s){const t=(0,A().Oo)(l,s);w().zv({store:t,data:{integration_id:v,parent_table:c().oo,parent_id:l.id},transaction:e})}e.postSubmitCallbacks=[t=>{t&&W(t,L,e.spaceId)}]}});const D=i.template_page_id??void 0,R=x!==D;return b().u2(t,{table:d().Li,...R&&{template_id_before:x},...R&&{template_id_after:D}}),a}function F(e){const{environment:t,integrationId:a,allVerifiedDomains:i,domainToRemove:r}=e,{currentUserRootStore:n}=M().default.state;if(!n)return;const o=(0,A().Oo)(n,{table:d().Li,id:a}),s=(0,A().G_)(o,o.pointer,"info"),l="developerIntegrationActions.removeVerifiedDomain";k().createAndCommit({userAction:l,environment:t,canUndo:!0,perform:e=>{w().zv({store:s,data:{original_url_domains:i.filter((e=>e!==r))},transaction:e}),e.postSubmitCallbacks=[t=>{t&&W(t,l,e.spaceId)}]}}),b().u2(t,{table:d().Li})}function U(e){I().oo({environment:e,url:o().JZ.creatorProfileIntegrations})}function N(e,t){if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]))return;const a={[s().GP]:"internal",[d().Li]:"public"}[t.table],i=(0,m().Xw)(t.id);I().oo({environment:e,url:`${o().JZ.creatorProfileIntegrations}/${a}/${i}`})}function z(e){return`${o().JZ.creatorProfileIntegrations}/public/${e.id}/lab`}function O(e){const t={oauth_authorize_url:e.external_oauth_authorize_url,oauth_token_url:e.external_oauth_token_url,client_id:e.external_client_id,client_secret:e.external_client_secret,scopes:e.external_oauth_scopes,deletion_url:e.external_deletion_url};return(0,h().tf)(l().WW,t)?void 0:t}function W(e,t,a){x().f1(_().A.formatMessage(j().DZ.transactionGenericError)),r().log({level:"error",from:"developerIntegrationActions",type:"createAndCommit",error:(0,g().n6)(e),data:{userAction:t,spaceId:a}})}function V(e){const{environment:t,formState:a,formData:i}=e;if("create-bot"===a.type){const e=D({environment:t,formData:i});if(!e)return;return E({environment:t,botPointer:{id:e.id,table:e.table,spaceId:e.spaceId},formData:i})}if("create-guest-integration"===a.type){const e=D({environment:t,formData:i});if(!e)return;return R({environment:t,botPointer:{id:e.id,table:e.table,spaceId:e.spaceId},formData:i})}return(0,f().HB)(a)}},983125:(e,t,a)=>{a.d(t,{d:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("chevronRightRoundedThin",{viewBox:"0 0 24 24",svg:(0,i.jsx)("path",{d:"M17.0078 11.8594C17.0078 11.724 16.9818 11.599 16.9297 11.4844C16.8776 11.3698 16.7995 11.2604 16.6953 11.1562L10.6094 5.20312C10.4375 5.03125 10.224 4.94531 9.96875 4.94531C9.80208 4.94531 9.64844 4.98698 9.50781 5.07031C9.36719 5.14844 9.25521 5.25521 9.17188 5.39062C9.09375 5.52604 9.05469 5.67969 9.05469 5.85156C9.05469 6.09635 9.14844 6.3151 9.33594 6.50781L14.8203 11.8594L9.33594 17.2109C9.14844 17.4036 9.05469 17.625 9.05469 17.875C9.05469 18.0417 9.09375 18.1927 9.17188 18.3281C9.25521 18.4688 9.36719 18.5781 9.50781 18.6562C9.64844 18.7396 9.80208 18.7812 9.96875 18.7812C10.224 18.7812 10.4375 18.6927 10.6094 18.5156L16.6953 12.5625C16.7995 12.4583 16.8776 12.349 16.9297 12.2344C16.9818 12.1198 17.0078 11.9948 17.0078 11.8594Z"})})},995166:(e,t,a)=>{a.d(t,{M:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("starFilled",{viewBox:"0 0 24 24",svg:(0,i.jsx)("path",{d:"M4.603 22.837c.375.277.826.2 1.4-.22l6.002-4.411 6.003 4.41c.561.42 1.024.498 1.387.221.375-.276.463-.73.232-1.403l-2.346-7.075 6.047-4.366c.572-.41.77-.83.627-1.271-.143-.432-.55-.653-1.255-.653l-7.424.045-2.269-7.108C12.787.32 12.457 0 12.005 0c-.463 0-.782.32-1.002 1.006l-2.27 7.108-7.423-.045c-.716 0-1.123.221-1.266.653-.144.442.066.862.638 1.27l6.036 4.367-2.335 7.075c-.231.674-.143 1.127.22 1.403z"})})}}]);