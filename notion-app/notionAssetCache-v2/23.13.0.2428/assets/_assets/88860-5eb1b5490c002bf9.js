"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[10862,38978,88860],{2609:(e,t,a)=>{a.d(t,{hr:()=>C,jl:()=>M,p6:()=>I,rQ:()=>A});a(898992),a(672577),a(581454),a(296540);var s=()=>a(56366),n=()=>a(401497),i=()=>a(803960),o=()=>a(29037),r=()=>a(959013),l=()=>a(722872),d=()=>a(115512),c=()=>a(700250),u=()=>a(493823),g=()=>a(843189),m=()=>a(760217),p=()=>a(406699),h=()=>a(625830),f=()=>a(331542),x=()=>a(928600),v=()=>a(939740),y=()=>a(554509),b=()=>a(204063),S=()=>a(89924),j=()=>a(475971),w=a(474848);function A(e){const{icon:t,title:a,byline:s,bylineWidthOverride:i}=e,o=(0,n().IS)((()=>({container:{margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:8},title:{textAlign:"center"},byline:{textAlign:"center"}})),[]);return(0,w.jsxs)("div",{style:o.container,children:[t,(0,w.jsx)(y().D,{styleName:"Heading-17px/Semibold",customStyles:o.title,children:a}),(0,w.jsx)(y().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",customStyles:i?{...o.byline,width:i}:o.byline,children:s})]})}function M(e){const{primaryText:t,primaryAction:a,primaryDisabled:s,secondaryText:i,secondaryAction:o,isLightRed:r,isDarkRed:l,isLoading:d}=e,c=(0,n().IS)((e=>({container:{margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",gap:8,padding:"0 20px",marginLeft:-20,width:"calc(100% + 40px)"},fullWidth:{width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},cancelButton:{...j().W,height:32,color:e.text.secondary}})),[]);return(0,w.jsxs)("div",{style:c.container,children:[r?(0,w.jsx)(g().E,{size:"lg",onClick:a,color:r?"uiRed":void 0,disabled:s,style:c.fullWidth,children:d?(0,w.jsx)(f().A,{}):t}):(0,w.jsx)(b().A,{size:"lg",onClick:a,disabled:s,style:c.fullWidth,isRed:l,children:d?(0,w.jsx)(f().A,{}):t}),(0,w.jsx)(u().p,{size:"lg",onClick:o,style:{...c.fullWidth,...c.cancelButton},children:i})]})}function C(e){const{selectedId:t,options:a,onChange:s}=e,d=(0,n().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:8},chevron:{width:12,marginLeft:3,marginRight:3,fill:e.lightIconColor},selectedButton:{width:"100%",margin:0,paddingTop:4,paddingBottom:4,border:`1px solid ${e.outlineButtonBorder}`},selectedCheckmark:{width:14},icon:{alignSelf:"start",marginTop:0,fill:e.icon.secondary,height:18,width:18}})),[]);return(0,w.jsxs)("div",{style:d.container,children:[(0,w.jsx)(y().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,w.jsx)(r().sA,{id:"orgConsole.modal.dropdown.title",defaultMessage:"Select role"})}),(0,w.jsx)(p().Ay,{popupType:p().z7.Popup,renderOrigin:e=>{const s=a.find((e=>e.id===t));return s?(0,w.jsx)(m().A,{...e,title:s.title,caption:s.caption,icon:s.icon({fill:d.icon.fill}),desktopIconStyle:d.icon,disabled:!1,right:(0,i().g)(d.chevron),shouldWrapCaption:!0,buttonStyle:d.selectedButton,focused:!1}):null},originGap:8,placementToOrigin:c().UV.Bottom,alignmentToOrigin:c().MY.Center,sameWidthAsOrigin:!0,render:e=>{const n=[{key:"options",render:e=>(0,w.jsx)(S().A,{...e,topBorder:0!==e.index}),items:a.map((a=>{const n=a.id===t;return{key:a.id,render:e=>(0,w.jsx)(m().A,{...e,title:a.title,caption:a.caption,icon:a.icon({fill:d.icon.fill}),desktopIconStyle:d.icon,right:n?(0,w.jsx)("div",{style:d.selectedCheckmark,children:(0,o().checkmarkIcon)()}):void 0,shouldWrapCaption:!0}),action:()=>{s(a.id),e.close()}}}))}];return(0,w.jsx)(x().A,{menuType:l().gu.Popup,children:(0,w.jsx)(v().Ay,{type:v().Oh.Vertical,initialFocus:void 0,sections:n})})}})]})}function I(e){const{items:t,selectedIds:a,disabledIds:i,onSelectHeader:o,onSelect:r,titleText:l,headerText:c,headerAction:u}=e,g=(0,n().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:8,marginBottom:4},selectorContainer:{border:`1px solid ${e.stroke.secondary}`,boxShadow:"0px 2px 4px 0px #0000000a",borderRadius:8},checkbox:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},headerText:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},right:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end",flexDirection:"row"},workspace:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:8},byline:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},bylineWithoutCheckboxes:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:28,width:28},textContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",gap:2},selectorHeader:{padding:"4px 12px",borderBottom:`1px solid ${e.stroke.secondary}`,display:"grid",gridTemplateColumns:"24px 1fr 1fr"},selectorHeaderWithAction:{padding:"4px 4px 4px 12px",borderBottom:`1px solid ${e.stroke.secondary}`,display:"grid",gridTemplateColumns:"24px 1fr 1fr"},selectorBody:{paddingInline:12,display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"center",width:"100%",maxHeight:204,overflowX:"hidden",overflowY:"auto"},selectorBodyRow:{display:"grid",gridTemplateColumns:"24px minmax(auto, 50%) 1fr",width:"100%",paddingBlock:8,gap:8,borderTop:`1px solid ${e.stroke.secondary}`}})),[]),m=void 0!==a&&void 0!==i&&r&&o,p=void 0!==i?t.length-i.length:0,f=(0,s().K8)((()=>{if(void 0===a)return!1;let e=0;for(const s of t)a.includes(s.id)&&(e+=1);return 0!==e&&(e===p?0!==p:"partial")}),[t,a,p]);return(0,w.jsxs)("div",{style:g.container,children:[(0,w.jsx)(y().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:l}),(0,w.jsxs)("div",{style:g.selectorContainer,children:[(0,w.jsxs)("div",{style:{...u?g.selectorHeaderWithAction:g.selectorHeader,gridTemplateColumns:m?"24px 1fr 1fr":"1fr 1fr"},children:[m?(0,w.jsx)("div",{style:g.checkbox,children:(0,w.jsx)(h().A,{checked:f,size:14,checkSize:10,onClick:o})}):null,(0,w.jsx)(y().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",customStyles:g.headerText,children:c}),(0,w.jsx)("div",{style:g.right,children:u})]}),(0,w.jsx)("div",{style:g.selectorBody,children:t.map(((e,t)=>{let{id:s,icon:n,name:o,caption:l,byline:c}=e;return(0,w.jsxs)("div",{style:{...g.selectorBodyRow,borderTopWidth:0===t?0:1,gridTemplateColumns:m?"24px minmax(auto, 50%) 1fr":"minmax(auto, 50%) 1fr"},children:[m?(0,w.jsx)("div",{style:g.checkbox,children:(0,w.jsx)(h().A,{checked:a.includes(s)||i.includes(s),size:14,checkSize:10,onClick:()=>r(s),disabled:i.includes(s),style:{opacity:i.includes(s)?.3:1}})}):null,(0,w.jsxs)("div",{style:g.workspace,children:[(0,w.jsx)("div",{style:g.iconContainer,children:n}),(0,w.jsxs)("div",{style:g.textContainer,children:[(0,w.jsx)(y().D,{styleName:"UIRegular-14px/Medium",customStyles:{...(0,d().pA)(1),textOverflow:"ellipsis"},children:o}),l?(0,w.jsx)(y().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:{...(0,d().pA)(1),textOverflow:"ellipsis"},children:l}):null]})]}),(0,w.jsx)("div",{style:g.byline,children:c})]},s)}))})]})]})}},5347:(e,t,a)=>{a.d(t,{K:()=>h,L:()=>p});var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(959013),r=()=>a(534177),l=()=>a(76590),d=()=>a(201549),c=()=>a(351360),u=()=>a(311670),g=()=>a(864943),m=a(474848);function p(e){const{style:t,analyticsType:a,filters:r,disabled:l}=e,d=(0,n().v3)(),[u,p]=(0,s.useState)(!1),f=(0,i().K8)((()=>{var e;return null===(e=c().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),x=l||u;return(0,m.jsx)(g().A,{size:"lg",style:t,disabled:x,onClick:async function(){f&&(p(!0),await h({environment:d,spaceId:f,analyticsType:a,filters:r}),p(!1))},children:(0,m.jsx)(o().sA,{id:"spaceAnalytics.usersTab.export",defaultMessage:"Export as CSV"})})}async function h(e){const{environment:t,spaceId:a,organizationId:s,analyticsType:n,filters:i}=e;if(a)switch(n){case u().e.Users:l().TJ(t,{daysFilter:i.daysFilter}),await d().aC(t,{spaceId:a,organizationId:s,daysFilter:i.daysFilter});break;case u().e.Content:l().lP(t,{filters:i}),await d().QF(t,{spaceId:a,organizationId:s,filters:i});break;default:(0,r().HB)(n)}}},12193:(e,t,a)=>{a.d(t,{D:()=>n});a(296540);const s={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0m3.123-4.514c.55.252 1.21.463 1.953.612q.135-.585.308-1.086a6.6 6.6 0 0 1 .512-1.15 6.4 6.4 0 0 0-2.773 1.624m-.814.994a6.34 6.34 0 0 0-1.029 2.895h3.396c.022-.715.081-1.403.173-2.048-.962-.191-1.827-.48-2.54-.847m-1.029 4.145a6.34 6.34 0 0 0 1.03 2.895c.712-.367 1.577-.656 2.54-.848a19 19 0 0 1-.174-2.047zm4.647 0c.021.657.076 1.283.158 1.862a15 15 0 0 1 3.08 0c.082-.58.137-1.205.158-1.862zm4.647 0a19 19 0 0 1-.173 2.048c.845.169 1.615.412 2.274.717a.6.6 0 0 1 .23.182 6.34 6.34 0 0 0 1.065-2.947zm3.396-1.25a6.34 6.34 0 0 0-1.03-2.895c-.712.367-1.577.656-2.54.847.093.645.152 1.333.174 2.048zm-4.647 0a17 17 0 0 0-.158-1.862 15 15 0 0 1-3.08 0c-.082.58-.137 1.205-.158 1.862zm-6.2 5.139a6.4 6.4 0 0 0 2.773 1.624 6.6 6.6 0 0 1-.512-1.15 11 11 0 0 1-.308-1.086 9 9 0 0 0-1.953.612m9.004 0a9 9 0 0 0-1.953-.611q-.135.584-.308 1.085a6.6 6.6 0 0 1-.512 1.15 6.4 6.4 0 0 0 2.773-1.624m-3.443.067q.136-.395.249-.86a13.7 13.7 0 0 0-2.615-.001q.111.466.248.861c.198.575.42.995.635 1.259.22.269.366.302.424.302s.205-.033.424-.302c.215-.264.437-.684.635-1.259m3.443-9.095a6.4 6.4 0 0 0-2.773-1.624c.196.337.366.726.512 1.15q.173.501.308 1.086a9 9 0 0 0 1.953-.612M10 6.342q.676-.001 1.308-.062a9 9 0 0 0-.249-.861c-.198-.575-.42-.995-.635-1.259-.22-.269-.366-.302-.424-.302s-.204.033-.424.302c-.215.264-.437.684-.635 1.259q-.136.395-.248.861.631.061 1.307.062"})},n=(0,a(340498).wt)("globe",s)},15936:(e,t,a)=>{a.d(t,{g:()=>i});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M12.876 7.978a.625.625 0 1 0-1.072-.643L9.25 11.59 7.815 9.916a.625.625 0 0 0-.95.814l2 2.333a.625.625 0 0 0 1.01-.085z"}),(0,s.jsx)("path",{d:"M10.28 2.241a.63.63 0 0 0-.56 0l-1.89.945a7.5 7.5 0 0 1-3.342.789H3.7a.625.625 0 0 0-.625.625v6.933a5.13 5.13 0 0 0 3.106 4.71l3.573 1.532a.63.63 0 0 0 .492 0l3.573-1.532a5.13 5.13 0 0 0 3.106-4.71V4.6a.625.625 0 0 0-.625-.625h-.788c-1.16 0-2.305-.27-3.343-.79zM8.39 4.304 10 3.499l1.61.805a8.7 8.7 0 0 0 3.902.921h.163v6.308c0 1.55-.924 2.95-2.349 3.562L10 16.52l-3.326-1.425a3.88 3.88 0 0 1-2.349-3.562V5.225h.163c1.354 0 2.69-.315 3.902-.921"})]})},i=(0,a(340498).wt)("checkmarkShield",n)},17297:(e,t,a)=>{a.d(t,{m:()=>ue});var s=a(296540),n=(a(581454),()=>a(959013)),i=()=>a(496603),o=()=>a(534177),r=()=>a(489695),l=()=>a(202966),d=()=>a(64939),c=()=>a(624090),u=()=>a(130382),g=()=>a(674741),m=()=>a(857639),p=()=>a(433847),h=()=>a(348564),f=()=>a(179034),x=()=>a(326399),v=()=>a(96689),y=()=>a(854150),b=()=>a(287882),S=()=>a(301608),j=()=>a(939962),w=()=>a(326346),A=a(474848);function M(e){return"workspace"!==e}function C(e){var t,a,s,n,i,o,r;const l={read_content:null===(t=e.capabilities)||void 0===t?void 0:t.read_content,update_content:null===(a=e.capabilities)||void 0===a?void 0:a.update_content,insert_content:null===(s=e.capabilities)||void 0===s?void 0:s.insert_content,read_comment:null===(n=e.capabilities)||void 0===n?void 0:n.read_comment,insert_comment:null===(i=e.capabilities)||void 0===i?void 0:i.insert_comment,user_capabilities:null!==(o=e.capabilities)&&void 0!==o&&o.read_user_with_email?"read_user_including_email":null!==(r=e.capabilities)&&void 0!==r&&r.read_user_without_email?"read_user_excluding_email":"none"};return JSON.stringify(l)}const I=(0,n().YK)({started:{id:"space.spaceContentDuplicationStatus.started",defaultMessage:"Started"},completed:{id:"space.spaceContentDuplicationStatus.completed",defaultMessage:"Completed"},failed:{id:"space.spaceContentDuplicationStatus.failed",defaultMessage:"Failed"}}),T=(0,n().YK)({equallyRestrictive:{defaultMessage:". This is the same as the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_equal"},moreRestrictive:{defaultMessage:". This is more restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_more_restrictive"},lessRestrictive:{defaultMessage:". This is less restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_less_restrictive"}});function k(e,t){if(void 0!==e&&void 0!==t)return e===t?(0,A.jsx)(n().sA,{...T.equallyRestrictive}):!e&&t?(0,A.jsx)(n().sA,{...T.moreRestrictive}):e&&!t?(0,A.jsx)(n().sA,{...T.lessRestrictive}):void 0}function _(e){return e.name?`“${e.name}“ group`:(0,A.jsx)(n().sA,{...l().D.group})}function D(e){return e.changes.name.oldValue&&e.changes.name.newValue?(0,A.jsx)(n().sA,{defaultMessage:"from “{oldTeamName}“ to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_old_team_name_to_new_team_name",values:{oldTeamName:e.changes.name.oldValue,newTeamName:e.changes.name.newValue}}):!e.changes.name.oldValue&&e.changes.name.newValue?(0,A.jsx)(n().sA,{defaultMessage:"from some teamspace name to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_unknown_team_name_to_new_team_name",values:{newTeamName:e.changes.name.newValue}}):(0,A.jsx)(n().sA,{defaultMessage:"for {teamName}",id:"auditlog.actionNames.eventColumn.for_team_name",values:{teamName:z(e)}})}function z(e){return"team"in e.target?P(e.target.team):(0,A.jsx)(n().sA,{...l().D.team})}function P(e){return e.name?`“${e.name}“ teamspace`:(0,A.jsx)(n().sA,{...l().D.team})}function N(e){if(e)switch(e){case"owner":return(0,A.jsx)(n().sA,{...l().D.team_owner});case"member":return(0,A.jsx)(n().sA,{...l().D.team_member});case"team_level_guest":return(0,A.jsx)(n().sA,{...l().D.team_level_guest})}return(0,A.jsx)(n().sA,{...l().D.team_member})}function R(e){var t,a;return{oldRole:(0,A.jsx)(n().sA,{...B(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.oldValue)}),newRole:(0,A.jsx)(n().sA,{...B(null===(a=e.changes)||void 0===a||null===(a=a.permission)||void 0===a?void 0:a.newValue)})}}function B(e){if(!e)return p().Sf.noAccessLabel;switch(e){case"editor":return p().Sf.workspaceOwnerLabel;case"membership_admin":return p().Sf.membershipAdminLabel;case"read_and_write":return p().Sf.memberLabel;default:return p().Sf.noAccessLabel}}function L(e){var t,a;return null!==(t=e.target)&&void 0!==t&&null!==(t=t.page)&&void 0!==t&&null!==(t=t.meta)&&void 0!==t&&t.parent&&"title"in(null===(a=e.target)||void 0===a||null===(a=a.page)||void 0===a||null===(a=a.meta)||void 0===a?void 0:a.parent)?`“${e.target.page.meta.parent.title}“`:(0,A.jsx)(n().sA,{...j().yr.an_untitled_page})}function E(e){var t;return null!==(t=e.actor.meta)&&void 0!==t&&t.platform?(0,A.jsx)(n().sA,{defaultMessage:"on {platform}",id:"auditlog.actionNames.eventColumn.logged_in_platform",values:{platform:e.actor.meta.platform}}):""}function O(e){switch(e){case"google":return(0,A.jsx)(n().sA,{defaultMessage:"Google",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.google"});case"email":return(0,A.jsx)(n().sA,{defaultMessage:"temporary passcode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.email"});case"admin":return(0,A.jsx)(n().sA,{defaultMessage:"Notion support access",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.admin"});case"saml":return(0,A.jsx)(n().sA,{defaultMessage:"SAML SSO",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.saml"});case"apple":return(0,A.jsx)(n().sA,{defaultMessage:"Apple ID",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.apple"});case"microsoft":return(0,A.jsx)(n().sA,{defaultMessage:"Microsoft",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.microsoft"});case"password":case"password-no-mfa":case"password-sms":case"password-totp":case"password-backup-code":return(0,A.jsx)(n().sA,{defaultMessage:"password",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.password"});case"passkey":return(0,A.jsx)(n().sA,{defaultMessage:"passkey",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.passkey"});default:(0,o().HB)(e)}}function U(e){return e.changes.name.oldValue?(0,A.jsx)(n().sA,{defaultMessage:"from “{oldDomain}“",id:"auditlog.actionNames.eventColumn.old_domain",values:{oldDomain:e.changes.name.oldValue}}):""}function F(e,t){return"block"===e.table?(0,A.jsx)(n().sA,{defaultMessage:"{teamName} page {parentPage}",id:"auditlog.actionNames.eventColumn.team_parent_page",values:{teamName:P(t),parentPage:V(e)}}):"team"===e.table?P(t):void 0}function V(e){return"title"in e?`“${e.title}“`:(0,A.jsx)(n().sA,{...j().yr.an_untitled_page})}function H(e,t){if(!t)return(0,A.jsx)(n().sA,{...j().yr.an_untitled_page});const a=t.table;return"space"===a?t.id!==e?(0,A.jsx)(n().sA,{...l().D.otherWorkspace}):M(t.permissionLevel)?(0,A.jsx)(n().sA,{...l().D.private}):(0,A.jsx)(n().sA,{...l().D.thisWorkspace}):"team"===a?P(t):"block"===a?t.title?`“${t.title}“`:(0,A.jsx)(n().sA,{...j().yr.an_untitled_page}):void 0}const W=(0,n().YK)({open:{defaultMessage:"Open",id:"auditlog.actionNames.eventColumn.team_privacy_types.open"},closed:{defaultMessage:"Closed",id:"auditlog.actionNames.eventColumn.team_privacy_types.closed"},private:{defaultMessage:"Private",id:"auditlog.actionNames.eventColumn.team_privacy_types.private"},default:{defaultMessage:"Default",id:"auditlog.actionNames.eventColumn.team_privacy_types.default"},unknown:{defaultMessage:"an unknown privacy state",id:"auditlog.actionNames.eventColumn.team_privacy_types.unknown"}});function q(e){return e?(0,A.jsx)(n().sA,{...W[e]}):(0,A.jsx)(n().sA,{...W.unknown})}function G(e){return e.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.disabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.enabled"})}function K(e){return e.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.disabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.enabled"})}function Y(e){return"approved"===e.changes.requestStatus.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Approved",id:"auditlog.actionNames.eventColumn.membership_request_resolved.approved"}):(0,A.jsx)(n().sA,{defaultMessage:"Declined",id:"auditlog.actionNames.eventColumn.membership_request_resolved.declined"})}function Q(e){return e.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.enabled"})}function $(e){return e.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.disabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.enabled"})}const X=(0,n().YK)({team_members:{defaultMessage:"any teamspace member",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_members"},team_owners:{defaultMessage:"only teamspace owners",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_owners"},unknown:{defaultMessage:"unknown",id:"auditlog.actionNames.eventColumn.team_access_level_types.unknown"}});function Z(e){var t,a,s,p,T,B,V,W,Z,ee,te,ae,se,ne,ie,oe,re,le,de,ce,ue,ge,me,pe,he,fe,xe,ve,ye,be,Se,je,we,Ae,Me,Ce,Ie,Te,ke,_e,De,ze,Pe,Ne,Re;const{auditLogEntry:Be,env:Le,intl:Ee,options:Oe}=e,{renderPageName:Ue}=Oe;if((0,r().nS)(Be))return(0,r().ZD)({...e,auditLogEntry:Be});switch(Be.actionName){case"page.properties_edited":{const St=Be.meta.propertiesUpdated,jt=Be.meta.propertiesUpdated.map((e=>`“${e.propertyName}“`)).join(", ");return 1===St.length?(0,A.jsx)(n().sA,{defaultMessage:"Edited property {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.single_property",values:{properties:jt,pageName:(0,j().wS)(Be)}}):(0,A.jsx)(n().sA,{defaultMessage:"Edited properties {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.multiple_properties",values:{properties:jt,pageName:(0,j().wS)(Be)}})}case"page.suggestion.comment.updated":return(0,A.jsx)(n().sA,{defaultMessage:"Edited comment on suggestion on {pageName}",id:"auditlog.actionNames.eventColumn.page.suggestion.comment.updated",values:{pageName:(0,j().wS)(Be)}});case"page.discussion.comment.updated":return(0,A.jsx)(n().sA,{defaultMessage:"Edited comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.updated",values:{pageName:(0,j().wS)(Be)}});case"page_edited":return(0,A.jsx)(n().sA,{defaultMessage:"Edited {pageName}",id:"auditlog.actionNames.eventColumn.page_edited",values:{pageName:(0,j().wS)(Be)}});case"page_viewed":return(0,A.jsx)(n().sA,{defaultMessage:"Viewed {pageName}",id:"auditlog.actionNames.eventColumn.page_viewed_under",values:{pageName:Ue(Be)}});case"page_deleted":return Be.target.page.meta.permanentDeletion?(0,A.jsx)(n().sA,{defaultMessage:"Deleted {pageName} from Trash",id:"auditlog.actionNames.eventColumn.page_permanently_deleted",values:{pageName:(0,j().wS)(Be)}}):(0,A.jsx)(n().sA,{defaultMessage:"Moved {pageName} to Trash",id:"auditlog.actionNames.eventColumn.page_deleted",values:{pageName:(0,j().wS)(Be)}});case"page.purged":return(0,A.jsx)(n().sA,{defaultMessage:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page.purged",values:{pageName:(0,j().wS)(Be)}});case"page_restored":return(0,A.jsx)(n().sA,{defaultMessage:"Restored {pageName}{withAdminPerms, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_restored",values:{pageName:(0,j().wS)(Be),withAdminPerms:(0,d().th)(Be)}});case"page_exported":return(0,A.jsx)(n().sA,{defaultMessage:"Exported {pageName}",id:"auditlog.actionNames.eventColumn.page_exported",values:{pageName:(0,j().wS)(Be)}});case"page_moved":{var Fe,Ve,He;const wt=null===(Fe=Be.changes)||void 0===Fe?void 0:Fe.team,At=Be.changes.parent.oldValue,Mt=Be.changes.parent.newValue;let Ct=H(Be.spaceId,Be.changes.parent.oldValue),It=H(Be.spaceId,Be.changes.parent.newValue);null!=wt&&wt.oldValue&&null!=wt&&wt.newValue&&At&&Mt&&("block"===At.table||"block"===Mt.table)?(Ct=F(At,null==wt?void 0:wt.oldValue),It=F(Mt,null==wt?void 0:wt.newValue)):"space"===(null===(Ve=Be.changes.parent.oldValue)||void 0===Ve?void 0:Ve.table)&&"space"===(null===(He=Be.changes.parent.newValue)||void 0===He?void 0:He.table)&&Be.changes.parent.oldValue.id===Be.changes.parent.newValue.id&&(M(Be.changes.parent.oldValue.permissionLevel)||M(Be.changes.parent.newValue.permissionLevel))&&(Ct=M(Be.changes.parent.oldValue.permissionLevel)?(0,A.jsx)(n().sA,{...l().D.private}):(0,A.jsx)(n().sA,{...l().D.workspaceLevel}),It=M(Be.changes.parent.newValue.permissionLevel)?(0,A.jsx)(n().sA,{...l().D.private}):(0,A.jsx)(n().sA,{...l().D.workspaceLevel}));const Tt=Ct?Ee.formatMessage({id:"auditLogEntry.changes.page_moved.old_parent",defaultMessage:" from {oldParentName}"},{oldParentName:Ct}):"",kt=It?Ee.formatMessage({id:"auditLogEntry.changes.page_moved.new_parent",defaultMessage:" to {newParentName}"},{newParentName:It}):"";return(0,A.jsx)(n().sA,{defaultMessage:"Moved {pageName}{oldParentMessage}{newParentMessage}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_moved",values:{pageName:(0,j().wS)(Be),oldParentMessage:Tt,newParentMessage:kt,inSudoMode:(0,j().AJ)(Be)}})}case"page_permission_updated":return function(e,t){var a,s,i;const o="bot"in t.target,r="space"in t.target,l="team"in t.target,c="group"in t.target,u="user"in t.target&&"guest"===(null===(a=t.target.user.meta)||void 0===a?void 0:a.spaceRole);var g,m;if(o)return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for bot {botName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_bot",values:{botName:(0,d().xC)(e,t),oldRole:(0,j().H8)(null===(g=t.changes)||void 0===g||null===(g=g.permission)||void 0===g?void 0:g.oldValue),newRole:(0,j().H8)(null===(m=t.changes)||void 0===m||null===(m=m.permission)||void 0===m?void 0:m.newValue),pageName:(0,j().wS)(t),inSudoMode:(0,j().AJ)(t)}});var p,h,f,x,v,y;if(r)return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for everyone in the workspace from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_space",values:{oldRole:(0,j().H8)(null===(p=t.changes)||void 0===p||null===(p=p.permission)||void 0===p?void 0:p.oldValue),newRole:(0,j().H8)(null===(h=t.changes)||void 0===h||null===(h=h.permission)||void 0===h?void 0:h.newValue),pageName:(0,j().wS)(t),inSudoMode:(0,j().AJ)(t)}});if(l)return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for {teamName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_team",values:{oldRole:(0,j().H8)(null===(f=t.changes)||void 0===f||null===(f=f.permission)||void 0===f?void 0:f.oldValue),newRole:(0,j().H8)(null===(x=t.changes)||void 0===x||null===(x=x.permission)||void 0===x?void 0:x.newValue),pageName:(0,j().wS)(t),teamName:z(t),inSudoMode:(0,j().AJ)(t)}});if(u)return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for guest {guestNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_guest",values:{guestNameAndEmail:(0,d().xC)(e,t),oldRole:(0,j().H8)(null===(v=t.changes)||void 0===v||null===(v=v.permission)||void 0===v?void 0:v.oldValue),newRole:(0,j().H8)(null===(y=t.changes)||void 0===y||null===(y=y.permission)||void 0===y?void 0:y.newValue),pageName:(0,j().wS)(t),inSudoMode:(0,j().AJ)(t)}});if(c){var b,S;return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for group {groupName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_group",values:{groupName:(0,d().xC)(e,t),oldRole:(0,j().H8)(null===(b=t.changes)||void 0===b||null===(b=b.permission)||void 0===b?void 0:b.oldValue),newRole:(0,j().H8)(null===(S=t.changes)||void 0===S||null===(S=S.permission)||void 0===S?void 0:S.newValue),pageName:(0,j().wS)(t),inSudoMode:(0,j().AJ)(t)}})}return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for {memberNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_default",values:{memberNameAndEmail:(0,d().xC)(e,t),oldRole:(0,j().H8)(null===(s=t.changes)||void 0===s||null===(s=s.permission)||void 0===s?void 0:s.oldValue),newRole:(0,j().H8)(null===(i=t.changes)||void 0===i||null===(i=i.permission)||void 0===i?void 0:i.newValue),pageName:(0,j().wS)(t),inSudoMode:(0,j().AJ)(t)}})}(Ee,Be);case"page_created":const Qe=(0,h().fS)(Be);if(null!=Qe&&null!==(t=Qe.meta)&&void 0!==t&&t.parent){var We,qe,Ge,Ke;if(Qe.meta.parent.table===v().NX)return"private"===(null===(Ge=Qe.meta)||void 0===Ge?void 0:Ge.permissionLevel)||"private"===(null===(Ke=Qe.meta)||void 0===Ke?void 0:Ke.pageAudience)?(0,A.jsx)(n().sA,{defaultMessage:"Created a private page",id:"auditlog.actionNames.eventColumn.page_created_private"}):(0,A.jsx)(n().sA,{defaultMessage:"Created a page in the workspace",id:"auditlog.actionNames.eventColumn.page_created_workspace"});if((null===(We=Qe.meta)||void 0===We?void 0:We.parent.table)===y().yK)return(0,A.jsx)(n().sA,{defaultMessage:"Created a page under {teamName}",id:"auditlog.actionNames.eventColumn.page_created_team",values:{teamName:P(Qe.meta.parent)}});if((null===(qe=Qe.meta)||void 0===qe?void 0:qe.parent.table)===f().ev)return(0,A.jsx)(n().sA,{defaultMessage:"Created a page under {parentPageName}",id:"auditlog.actionNames.eventColumn.page_created_under",values:{parentPageName:L(Be)}})}return(0,A.jsx)(n().sA,{defaultMessage:"Created a page",id:"auditlog.actionNames.eventColumn.page_created_general"});case"page_shared_to_web":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,A.jsx)(n().sA,{defaultMessage:"Disabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.disabled",values:{pageName:(0,j().wS)(e),inSudoMode:(0,j().AJ)(e)}});return(0,A.jsx)(n().sA,{defaultMessage:"Enabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.enabled",values:{pageName:(0,j().wS)(e),inSudoMode:(0,j().AJ)(e),newRole:(0,j().H8)(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(Be);case"page.shared_with_email_domain":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,A.jsx)(n().sA,{defaultMessage:"Unshared {pageName} with email domains{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_with_email_domain.disabled",values:{pageName:(0,j().wS)(e),inSudoMode:(0,j().AJ)(e)}});return(0,A.jsx)(n().sA,{defaultMessage:"Shared {pageName} with email domains{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_with_email_domain.enabled",values:{pageName:(0,j().wS)(e),inSudoMode:(0,j().AJ)(e),newRole:(0,j().H8)(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(Be);case"login":return function(e,t){var a,s,i;const o=null===(a=e.meta)||void 0===a?void 0:a.authType;return null!==(s=e.actor.meta)&&void 0!==s&&s.countryCode&&o?(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod} in {geolocation}",values:{platform:E(e),geolocation:(0,w().BN)(e,t),loginMethod:O(o)}}):null!==(i=e.actor.meta)&&void 0!==i&&i.countryCode&&!o?(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry",defaultMessage:"Logged in {platform} in {geolocation}",values:{platform:E(e),geolocation:(0,w().BN)(e,t)}}):o?(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.loginWithPlatform.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod}",values:{platform:E(e),loginMethod:O(o)}}):(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.loginWithPlatform",defaultMessage:"Logged in {platform}",values:{platform:E(e)}})}(Be,Ee);case"allowed_support_access":return(0,A.jsx)(n().sA,{defaultMessage:"Granted support access for {name} until {date}",id:"auditlog.actionNames.allowed_support_access",values:{date:Ee.formatDate(Be.changes.expiresAt),name:Be.target.user.name}});case"revoked_support_access":return(0,A.jsx)(n().sA,{defaultMessage:"Revoked support access for {name}",id:"auditlog.actionNames.revoked_support_access",values:{name:Be.target.user.name}});case"preferred_name_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id),i=e.changes.name.oldValue,o=e.changes.name.newValue;if(s){if(i&&o)return(0,A.jsx)(n().sA,{defaultMessage:"Changed {memberNameAndEmail} name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed",values:{memberNameAndEmail:(0,d().xC)(t,e),oldValue:i,newValue:o}});if(!i&&o)return(0,A.jsx)(n().sA,{defaultMessage:"Set {memberNameAndEmail} name to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_to_value",values:{memberNameAndEmail:(0,d().xC)(t,e),newValue:o}});if(i&&!o)return(0,A.jsx)(n().sA,{defaultMessage:"Removed {memberNameAndEmail} name “{oldValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_from_value",values:{memberNameAndEmail:(0,d().xC)(t,e),oldValue:i}})}if(i&&o)return(0,A.jsx)(n().sA,{defaultMessage:"Changed name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed",values:{oldValue:i,newValue:o}});if(!i&&o)return(0,A.jsx)(n().sA,{defaultMessage:"Set name to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_to_value",values:{newValue:o}});if(i&&!o)return(0,A.jsx)(n().sA,{defaultMessage:"Removed name “{oldValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_from_value",values:{oldValue:i}});return(0,A.jsx)(n().sA,{defaultMessage:"Name was changed",id:"auditlog.actionNames.eventColumn.preferred_name_changed_generic"})}(Be,Ee);case"email_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return s?(0,A.jsx)(n().sA,{defaultMessage:"Changed {memberNameAndEmail} email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.external_email_changed",values:{memberNameAndEmail:(0,d().xC)(t,e),oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.email_changed",values:{oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}})}(Be,Ee);case"picture_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return s?(0,A.jsx)(n().sA,{defaultMessage:"Changed {memberNameAndEmail} profile picture",id:"auditlog.actionNames.eventColumn.external_picture_changed",values:{memberNameAndEmail:(0,d().xC)(t,e)}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed profile picture",id:"auditlog.actionNames.eventColumn.picture_changed"})}(Be,Ee);case"member_invited":{const _t=R(Be);return(0,A.jsx)(n().sA,{defaultMessage:"Invited {memberNameAndEmail} to the workspace as {newRole}",id:"auditlog.actionNames.eventColumn.member_invited",values:{memberNameAndEmail:(0,d().xC)(Ee,Be),newRole:_t.newRole}})}case"member_role_updated":{const Dt=R(Be);return(0,A.jsx)(n().sA,{defaultMessage:"Updated {memberNameAndEmail} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.member_role_updated",values:{memberNameAndEmail:(0,d().xC)(Ee,Be),oldRole:Dt.oldRole,newRole:Dt.newRole}})}case"member_removed":return Be.actor.actorId===Be.target.user.id?(0,A.jsx)(n().sA,{defaultMessage:"Left the workspace",id:"auditlog.actionNames.eventColumn.member_left"}):(0,A.jsx)(n().sA,{defaultMessage:"Removed {memberNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.member_removed",values:{memberNameAndEmail:(0,d().xC)(Ee,Be)}});case"guest_removed":return(0,A.jsx)(n().sA,{defaultMessage:"Removed guest {guestNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.guest_removed",values:{guestNameAndEmail:(0,d().xC)(Ee,Be)}});case"file_downloaded":return function(e){return(0,A.jsx)(n().sA,{defaultMessage:"Downloaded {fileName} from {pageName}",id:"auditlog.actionNames.eventColumn.file_downloaded",values:{fileName:J(e),pageName:(0,j().wS)(e)}})}(Be);case"invite_link_toggled":return Be.changes.enabled.newValue?(0,A.jsx)(n().sA,{id:"auditlog.actionNames.eventColumn.inviteLink.enabled",defaultMessage:"Enabled invite link"}):(0,A.jsx)(n().sA,{id:"auditlog.actionNames.eventColumn.inviteLink.disabled",defaultMessage:"Disabled invite link"});case"public_page_sharing_toggled":case"workspace_sidebar_editing_toggled":case"disable_guests_toggled":case"pages_to_other_workspaces_toggled":case"export_toggled":case"page_access_requests_toggled":return(0,r().ez)((0,d().sp)(Be,Ee));case"workspace_name_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed workspace name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_name_changed",values:{oldValue:Be.changes.name.oldValue,newValue:Be.changes.name.newValue}});case"workspace_domain_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed workspace domain {oldValue} to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_domain_changed",values:{oldValue:U(Be),newValue:Be.changes.name.newValue}});case"workspace_integration_restriction_changed":return function(e){const t=void 0,{oldValue:a,newValue:s}=e.changes.integration_restrictions;if(s===t)return(0,A.jsx)(n().sA,{defaultMessage:"Enabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.no_restrictions"});if(a===t&&"approved_only"===s)return(0,A.jsx)(n().sA,{defaultMessage:"Disabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.approved_only"});if("approved_or_built_by_notion"===a&&"approved_only"===s)return(0,A.jsx)(n().sA,{defaultMessage:"Disabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.disabled_built_by_notion.from_approved_or_built_by_notion"});if("approved_only"===a&&"approved_or_built_by_notion"===s)return(0,A.jsx)(n().sA,{defaultMessage:"Enabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.enabled_built_by_notion"});return(0,A.jsx)(n().sA,{defaultMessage:"Changed workspace integration restriction",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.fallback_message"})}(Be);case"workspace.settings.disallow_webhook_automation_action_toggled":return function(e){const{newValue:t}=e.changes.enabled;if(t)return(0,A.jsx)(n().sA,{defaultMessage:"Disabled using 'Send webhook' action in automations",id:"auditlog.actionNames.eventColumn.workspace.settings.disallow_webhook_automation_action_toggled.enabled"});return(0,A.jsx)(n().sA,{defaultMessage:"Enabled using 'Send webhook' action in automations",id:"auditlog.actionNames.eventColumn.workspace.settings.disallow_webhook_automation_action_toggled.disabled"})}(Be);case"allowed_email_domain_added":return(0,A.jsx)(n().sA,{defaultMessage:"Added “{addedValue}“ into allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_added",values:{addedValue:Be.changes.domain}});case"allowed_email_domain_removed":return(0,A.jsx)(n().sA,{defaultMessage:"Removed “{removedValue}“ from allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_removed",values:{removedValue:Be.changes.domain}});case"public_page_set":return Be.changes.name.oldValue?(0,A.jsx)(n().sA,{defaultMessage:"Changed public home page from “{oldPage}“ to “{newPage}“",id:"auditlog.actionNames.eventColumn.public_page_changed",values:{oldPage:Be.changes.name.oldValue,newPage:Be.changes.name.newValue}}):(0,A.jsx)(n().sA,{defaultMessage:"Set “{newPage}“ as public home page",id:"auditlog.actionNames.eventColumn.public_page_set",values:{newPage:Be.changes.name.newValue}});case"idp_metadata_url_updated":case"organization.saml.idp_metadata_url_updated":return Be.changes.url.oldValue?(0,A.jsx)(n().sA,{defaultMessage:"Changed IDP metadata URL from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_updated",values:{oldValue:Be.changes.url.oldValue,newValue:Be.changes.url.newValue}}):(0,A.jsx)(n().sA,{defaultMessage:"Set IDP metadata URL to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_set",values:{newValue:Be.changes.url.newValue}});case"saml_toggled":case"organization.saml.toggled":return Be.changes.enabled.newValue?(0,A.jsx)(n().sA,{...l().D.saml_enabled}):(0,A.jsx)(n().sA,{...l().D.saml_disabled});case"saml_enforce_toggled":case"organization.saml.enforce_toggled":return Be.changes.enabled.newValue?(0,A.jsx)(n().sA,{...l().D.saml_enforced}):(0,A.jsx)(n().sA,{...l().D.saml_unenforced});case"automatic_account_creation_toggled":case"organization.saml.automatic_account_creation_toggled":return Be.changes.enabled.newValue?(0,A.jsx)(n().sA,{...l().D.automatic_account_creation_enabled}):(0,A.jsx)(n().sA,{...l().D.automatic_account_creation_disabled});case"workspace_analytics_toggled":return Be.changes.enabled.newValue?(0,A.jsx)(n().sA,{...l().D.workspace_analytics_enabled}):(0,A.jsx)(n().sA,{...l().D.workspace_analytics_disabled});case"workspace_creation_set_for_email_domain":case"organization.managed_user_settings.workspace_creation_enum_updated":return function(e,t){const{oldValue:a,newValue:s}=e.changes.workspace_creation;if(!a&&!s)return(0,A.jsx)(n().sA,{defaultMessage:"Changed workspace creation setting",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain.fallback_message"});const i=e.changes.workspace_creation.oldValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.beforeSetting",defaultMessage:" from {prevWorkspaceCreationSetting}"},{prevWorkspaceCreationSetting:(0,x().XB)(e.changes.workspace_creation.oldValue,t)}):"",o=e.changes.workspace_creation.newValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.afterSetting",defaultMessage:" to {afterWorkspaceCreationSetting}"},{afterWorkspaceCreationSetting:(0,x().XB)(e.changes.workspace_creation.newValue,t)}):"";return(0,A.jsx)(n().sA,{defaultMessage:"Changed workspace creation setting{before}{after}.",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain",values:{before:i,after:o}})}(Be,Ee);case"member_added_to_group":return(0,A.jsx)(n().sA,{defaultMessage:"Added {memberNameAndEmail} to {groupName}",id:"auditlog.actionNames.eventColumn.member_added_to_group",values:{memberNameAndEmail:(0,d().xC)(Ee,Be),groupName:_(Be.target.group)}});case"member_removed_from_group":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {memberNameAndEmail} from {groupName}",id:"auditlog.actionNames.eventColumn.member_removed_from_group",values:{memberNameAndEmail:(0,d().xC)(Ee,Be),groupName:_(Be.target.group)}});case"space_transfer_status_changed":return function(e,t){const{oldValue:a,newValue:s}=e.changes.spaceTransferStatus,i=e.target.space.name?t.formatMessage({id:"auditLogEntry.changes.space_transfer_status_changed.space_name",defaultMessage:" for {spaceName}"},{spaceName:e.target.space.name}):"";if(!a&&!s)return(0,A.jsx)(n().sA,{defaultMessage:"Workspace transfer status changed{spaceNameMessage}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.fallback_message",values:{spaceNameMessage:i}});if(!s)return(0,A.jsx)(n().sA,{defaultMessage:"Workspace transfer request cleared{spaceNameMessage} from prior status of {oldStatus}",id:"auditlog.actionNames.eventColumn.space_transfer_status_cleared",values:{spaceNameMessage:i,oldStatus:a}});return(0,A.jsx)(n().sA,{defaultMessage:"{newStatus, select, requested {Workspace transfer request initiated{spaceNameMessage}.} started {Workspace transfer started{spaceNameMessage}} completed {Workspace transfer completed{spaceNameMessage}} other {Workspace transfer status change to {newStatus}{spaceNameMessage}}}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.newStatus",values:{spaceNameMessage:i,newStatus:s}})}(Be,Ee);case"space_claim_and_upgrade_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,s=(0,A.jsx)(n().sA,{defaultMessage:"Status changed for workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return s;if(!a&&"completed"!==t)return(0,A.jsx)(n().sA,{defaultMessage:"Pending workspace claim for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,A.jsx)(n().sA,{defaultMessage:"{workspaceName} has been claimed and upgraded to the Enterprise plan",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,A.jsx)(n().sA,{defaultMessage:"Request to claim and upgrade {workspaceName} has been sent.",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return s}(Be);case"space_claim_deletion_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimDeletionStatus,s=(0,A.jsx)(n().sA,{defaultMessage:"Claimable workspace deletion status change for {spaceName}",id:"auditlog.actionNames.eventColumn.space_claim_deletion_status_changed.fallback_message",values:{spaceName:e.target.space.name}});if(!t&&!a)return s;if(!a||"canceled"===a)return(0,A.jsx)(n().sA,{defaultMessage:"Recovered workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.status_cleared",values:{spaceName:e.target.space.name}});return(0,A.jsx)(n().sA,{defaultMessage:"Deleted workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.deleted",values:{spaceName:e.target.space.name}})}(Be);case"organization.domain_claim.claim_and_upgrade_status_updated":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,s=(0,A.jsx)(n().sA,{defaultMessage:"Status changed for organization's workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return s;if(!a&&"completed"!==t)return(0,A.jsx)(n().sA,{defaultMessage:"Pending workspace claim by organization for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,A.jsx)(n().sA,{defaultMessage:"{workspaceName} has been successfully claimed by organization.",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,A.jsx)(n().sA,{defaultMessage:"Request sent to claim workspace: {workspaceName} for organization.",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return s}(Be);case"membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.membership_requests_toggled",values:{enabled:G(Be)}});case"external_membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled",values:{enabled:K(Be)}});case"membership_request_resolved":return(0,A.jsx)(n().sA,{defaultMessage:"{status} request to add {email} to the workspace as a member",id:"auditlog.actionNames.eventColumn.membership_request_resolved",values:{status:Y(Be),email:(0,d().xC)(Ee,Be)}});case"guest_membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled",values:{enabled:Q(Be)}});case"team_created":return(0,A.jsx)(n().sA,{defaultMessage:"Created {teamName}",id:"auditlog.actionNames.eventColumn.team_created",values:{teamName:z(Be)}});case"team_archived":return(0,A.jsx)(n().sA,{defaultMessage:"Archived {teamName}",id:"auditlog.actionNames.eventColumn.team_archived",values:{teamName:z(Be)}});case"team_restored":return(0,A.jsx)(n().sA,{defaultMessage:"Restored {teamName}",id:"auditlog.actionNames.eventColumn.team_restored",values:{teamName:z(Be)}});case"team_default_toggled":return Be.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Added {teamName} to the default teamspace list. Workspace members will automatically be added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_enabled",values:{teamName:z(Be)}}):(0,A.jsx)(n().sA,{defaultMessage:"Removed {teamName} from the default teamspace list. Workspace members will no longer be automatically added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_disabled",values:{teamName:z(Be)}});case"team_public_page_sharing_toggled":return Be.changes.enabled.newValue?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Disabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_disabled",values:{teamName:z(Be)}}),k((null===(a=Be.meta)||void 0===a?void 0:a.spacePublicPageSharingDisabled)??(null==Be?void 0:Be.spacePublicPageSharingDisabled),Be.changes.enabled.newValue)]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Enabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_enabled",values:{teamName:z(Be)}}),k((null===(s=Be.meta)||void 0===s?void 0:s.spacePublicPageSharingDisabled)??(null==Be?void 0:Be.spacePublicPageSharingDisabled),Be.changes.enabled.newValue)]});case"team_export_toggled":return Be.changes.enabled.newValue?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Disabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_disabled",values:{teamName:z(Be)}}),k((null===(p=Be.meta)||void 0===p?void 0:p.spaceExportDisabled)??(null==Be?void 0:Be.spaceExportDisabled),Be.changes.enabled.newValue)]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Enabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_enabled",values:{teamName:z(Be)}}),k((null===(T=Be.meta)||void 0===T?void 0:T.spaceExportDisabled)??(null==Be?void 0:Be.spaceExportDisabled),Be.changes.enabled.newValue)]});case"team_sidebar_editing_toggled":return Be.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_disabled",values:{teamName:z(Be)}}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_enabled",values:{teamName:z(Be)}});case"team_creation_admins_setting_toggled":return Be.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_disabled",values:{teamName:z(Be)}}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_enabled",values:{teamName:z(Be)}});case"team_guests_toggled":return Be.changes.enabled.newValue?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Disabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_disabled",values:{teamName:z(Be)}}),k((null===(B=Be.meta)||void 0===B?void 0:B.spaceDisableGuests)??Be.spaceDisableGuests,Be.changes.enabled.newValue)]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Enabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_enabled",values:{teamName:z(Be)}}),k((null===(V=Be.meta)||void 0===V?void 0:V.spaceDisableGuests)??Be.spaceDisableGuests,Be.changes.enabled.newValue)]});case"team_name_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed teamspace name {oldTeamNameToNewTeamName}",id:"auditlog.actionNames.eventColumn.team_name_changed",values:{oldTeamNameToNewTeamName:D(Be)}});case"team_description_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed description of {teamName}",id:"auditlog.actionNames.eventColumn.team_description_changed",values:{teamName:z(Be)}});case"team_icon_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed icon of {teamName}",id:"auditlog.actionNames.eventColumn.team_icon_changed",values:{teamName:z(Be)}});case"member_added_to_team":return(0,A.jsx)(n().sA,{defaultMessage:"Invited {memberNameAndEmail} to {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_added_to_team",values:{memberNameAndEmail:(0,d().xC)(Ee,Be),teamName:z(Be),teamRole:N(Be.changes.teamRole.newValue)}});case"group_added_to_team":return(0,A.jsx)(n().sA,{defaultMessage:"Invited {groupName} to {teamName} as teamspace member",id:"auditlog.actionNames.eventColumn.group_added_to_team",values:{groupName:_(Be.target.group),teamName:z(Be)}});case"member_removed_from_team":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {memberNameAndEmail} from {teamName}",id:"auditlog.actionNames.eventColumn.member_removed_from_team",values:{memberNameAndEmail:(0,d().xC)(Ee,Be),teamName:z(Be)}});case"group_removed_from_team":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {groupName} from {teamName}",id:"auditlog.actionNames.eventColumn.group_removed_from_team",values:{groupName:_(Be.target.group),teamName:z(Be)}});case"member_joined_team":const $e=z(Be),Xe=N(Be.changes.teamRole.newValue);return(0,j().AJ)(Be)?(0,A.jsx)(n().sA,{defaultMessage:"Joined {teamName} as {teamRole} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_joined_team_privileged",values:{teamName:$e,teamRole:Xe}}):(0,A.jsx)(n().sA,{defaultMessage:"Joined {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_joined_team",values:{teamName:$e,teamRole:Xe}});case"member_left_team":return(0,A.jsx)(n().sA,{defaultMessage:"Left {teamName}",id:"auditlog.actionNames.eventColumn.member_left_team",values:{teamName:z(Be)}});case"member_team_role_updated":const Ze=(0,d().xC)(Ee,Be),Je=N(Be.changes.teamRole.oldValue),et=N(Be.changes.teamRole.newValue),tt=z(Be);return(0,j().AJ)(Be)?(0,A.jsx)(n().sA,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_team_role_updated_privileged",values:{memberNameAndEmail:Ze,oldTeamRole:Je,newTeamRole:et,teamName:tt}}):(0,A.jsx)(n().sA,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName}",id:"auditlog.actionNames.eventColumn.member_team_role_updated",values:{memberNameAndEmail:Ze,oldTeamRole:Je,newTeamRole:et,teamName:tt}});case"team_user_permission_updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated {userNameOrEmail}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_user_permission_updated",values:{userNameOrEmail:(0,d().xC)(Ee,Be),oldPermission:(0,j().H8)(Be.changes.permission.oldValue),newPermission:(0,j().H8)(Be.changes.permission.newValue),teamName:z(Be)}});case"team_group_permission_updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated {groupName}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_group_permission_updated",values:{groupName:_(Be.target.group),oldPermission:(0,j().H8)(Be.changes.permission.oldValue),newPermission:(0,j().H8)(Be.changes.permission.newValue),teamName:z(Be)}});case"team_member_default_permission_updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated default page permissions for teamspace members in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_member_default_permission_updated",values:{teamName:z(Be),oldRole:(0,j().H8)(null===(W=Be.changes)||void 0===W||null===(W=W.permission)||void 0===W?void 0:W.oldValue),newRole:(0,j().H8)(null===(Z=Be.changes)||void 0===Z||null===(Z=Z.permission)||void 0===Z?void 0:Z.newValue)}});case"team_guest_default_permission_updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated default page permissions for teamspace guests in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_guest_default_permission_updated",values:{teamName:z(Be),oldRole:(0,j().H8)(null===(ee=Be.changes)||void 0===ee||null===(ee=ee.permission)||void 0===ee?void 0:ee.oldValue),newRole:(0,j().H8)(null===(te=Be.changes)||void 0===te||null===(te=te.permission)||void 0===te?void 0:te.newValue)}});case"team_workspace_default_permission_updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated default page permissions for everyone else in the workspace for {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_workspace_default_permission_updated",values:{teamName:z(Be),oldRole:(0,j().H8)(null===(ae=Be.changes)||void 0===ae||null===(ae=ae.permission)||void 0===ae?void 0:ae.oldValue),newRole:(0,j().H8)(null===(se=Be.changes)||void 0===se||null===(se=se.permission)||void 0===se?void 0:se.newValue)}});case"team_privacy_type_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed the teamspace privacy type for {teamName} from {oldType} to {newType}",id:"auditlog.actionNames.eventColumn.team_privacy_type_changed",values:{teamName:z(Be),oldType:q(null===(ne=Be.changes)||void 0===ne?void 0:ne.teamAccessLevel.oldValue),newType:q(null===(ie=Be.changes)||void 0===ie?void 0:ie.teamAccessLevel.newValue)}});case"team_invite_access_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed who can invite teamspace members to {newType} for {teamName}",id:"auditlog.actionNames.eventColumn.team_invite_access_changed",values:{teamName:z(Be),newType:(Ye=null===(oe=Be.changes)||void 0===oe||null===(oe=oe.teamInviteAccess)||void 0===oe?void 0:oe.newValue,Ye?(0,A.jsx)(n().sA,{...X[Ye]}):(0,A.jsx)(n().sA,{...X.unknown}))}});case"teams_enabled_for_space":return(0,A.jsx)(n().sA,{defaultMessage:"Enabled teamspaces for {workspaceName}",id:"auditlog.actionNames.eventColumn.teams_enabled_for_space",values:{workspaceName:Be.target.space.name}});case"private_content_transferred":return(0,A.jsx)(n().sA,{defaultMessage:"Transferred private content from {fromUserName} to {toUserName}",id:"auditLog.actionNames.eventColumn.private_content_transferred",values:{fromUserName:(0,d().q4)(Ee,Be.changes.userPermission.oldValue),toUserName:(0,d().q4)(Ee,Be.changes.userPermission.newValue)}});case"user_analytics_exported":return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}",values:{daysFilterString:Ee.formatMessage(S().jy[(null===(re=Be.meta)||void 0===re?void 0:re.daysFilter)||"last_90_days"]).toLowerCase()}});case"content_analytics_exported":return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}",values:{daysFilterString:Ee.formatMessage(S().jy[(null===(le=Be.meta)||void 0===le?void 0:le.daysFilter)||"last_90_days"]).toLowerCase()}});case"admin_content_search_queried":case"admin_content_search_exported":function at(e){return e.join(Ee.formatMessage(l().D.adminContentSearchPredicateSplit))}function st(e){return"starting"in e&&"ending"in e?`${e.starting} - ${e.ending}`:"starting"in e?`${e.starting} - `:"ending"in e?` - ${e.ending}`:void 0}const nt=Be.searchParameters.query&&Ee.formatMessage(l().D.adminContentSearchQuery,{query:Be.searchParameters.query}),it=Be.searchParameters.teamspaces&&Be.searchParameters.teamspaces.length>0&&Ee.formatMessage(l().D.adminContentSearchTeamspaces,{teamspaceCount:Be.searchParameters.teamspaces.length,teamspaces:at(Be.searchParameters.teamspaces)}),ot=Be.searchParameters.createdBy&&Be.searchParameters.createdBy.length>0&&Ee.formatMessage(l().D.adminContentSearchCreatedBy,{createdBy:at(Be.searchParameters.createdBy)}),rt=Be.searchParameters.sharedWith&&Be.searchParameters.sharedWith.length>0&&Ee.formatMessage(l().D.adminContentSearchSharedWith,{sharedWith:at(Be.searchParameters.sharedWith)}),lt=Be.searchParameters.audience&&Be.searchParameters.audience.length>0&&Ee.formatMessage(l().D.adminContentSearchAudience,{audience:at(Be.searchParameters.audience)}),dt=Be.searchParameters.createdTime&&Ee.formatMessage(l().D.adminContentSearchCreatedTime,{createdTime:st(Be.searchParameters.createdTime)}),ct=Be.searchParameters.lastEditedTime&&Ee.formatMessage(l().D.adminContentSearchLastEditedTime,{lastEditedTime:st(Be.searchParameters.lastEditedTime)}),ut=Be.searchParameters.deletionStatuses&&Be.searchParameters.deletionStatuses.length>0&&Ee.formatMessage(l().D.adminContentSearchDeletionStatus,{deletionStatuses:at(Be.searchParameters.deletionStatuses.map((e=>Ee.formatMessage((0,g().uT)(e))))),deletionStatusesCount:Be.searchParameters.deletionStatuses.length}),gt=i().oE([nt,it,ot,rt,lt,dt,ct,ut]);if("admin_content_search_queried"===Be.actionName){if(0===gt.length)return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried.no_filters",defaultMessage:"Ran a content search with no filters"});{const zt=at(gt);return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried",defaultMessage:"Ran a content search with the following criteria: {searchCriteria}",values:{searchCriteria:zt}})}}if(0===gt.length)return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported.no_filters",defaultMessage:"Exported a content search result with no filters"});{const Pt=at(gt);return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported",defaultMessage:"Exported a content search result with the following criteria: {searchCriteria}",values:{searchCriteria:Pt}})}case"admin_managed_users_log_out_all":case"organization.managed_users.log_out":{const Nt=Ee.formatList(Be.meta.emailDomains,{type:"conjunction"});return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_managed_users_log_out_all",defaultMessage:"Logged out all managed users with the email domains {emailDomains}",values:{emailDomains:Nt}})}case"admin_managed_users_log_out_one":case"organization.managed_users.log_out_one":return(0,A.jsx)(n().sA,{defaultMessage:"Logged out {guestNameAndEmail} from all of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_log_out_one",values:{guestNameAndEmail:(0,d().xC)(Ee,Be)}});case"admin_managed_users_password_cleared_one":case"organization.managed_users.password_cleared_one":return(0,A.jsx)(n().sA,{defaultMessage:"Reset the password and MFA settings for {guestNameAndEmail} and logged them out of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_password_cleared_one",values:{guestNameAndEmail:(0,d().xC)(Ee,Be)}});case"admin_managed_users_password_cleared":case"organization.managed_users.password_cleared":{const Rt=Ee.formatList(Be.meta.emailDomains,{type:"conjunction"});return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_managed_users_password_cleared",defaultMessage:"Cleared passwords for all users with the email domains {emailDomains}",values:{emailDomains:Rt}})}case"automation_edited":return(0,A.jsx)(n().sA,{id:"auditlog.actionNames.eventColumn.automation_edited",defaultMessage:"Edited {automationType} on {pageTitle}",values:{automationType:(0,d().KE)(Be.meta.automationType),pageTitle:(0,j().wS)(Be)}});case"ai_admin_legal_acceptance_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} Notion AI for the workspace.",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled",values:{enabled:$(Be)}});case"workspace.settings.hipaa_compliance_updated":return Be.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Enabled HIPAA compliance",id:"auditlog.actionNames.eventColumn.hipaa_compliance_updated.enabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Disabled HIPAA compliance",id:"auditlog.actionNames.eventColumn.hipaa_compliance_updated.disabled"});case"space_consolidation_started":case"space_consolidation_completed":case"space_consolidation_failed":const mt=Be.spaceId===Be.meta.spaceConsolidationMetadata.source_space_id,pt=Be.meta.spaceConsolidationMetadata.source_space_name??Be.meta.spaceConsolidationMetadata.source_space_id,ht=Be.meta.spaceConsolidationMetadata.target_space_name??Be.meta.spaceConsolidationMetadata.target_space_id,ft=Be.changes.spaceContentDuplicationStatus.newValue;return(0,A.jsx)(n().sA,{defaultMessage:"{status} workspace consolidation {direction} {spaceName}.",id:"auditlog.actionNames.eventColumn.space_consolidation_status_changed",values:{status:ft?(0,A.jsx)(n().sA,{...I[ft]}):"",spaceName:mt?ht:pt,direction:(0,A.jsx)(n().sA,{...mt?l().D.into:l().D.from})}});case"mfa_sms_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} SMS MFA on “{value}“",id:"auditlog.actionNames.eventColumn.mfa_sms_toggled",values:{value:null!==(de=Be.changes)&&void 0!==de&&de.maskedPhoneNumber.oldValue?null===(ce=Be.changes)||void 0===ce?void 0:ce.maskedPhoneNumber.oldValue:null===(ue=Be.changes)||void 0===ue?void 0:ue.maskedPhoneNumber.newValue,enabled:null!==(ge=Be.changes)&&void 0!==ge&&ge.enabled.newValue?"Enabled":"Disabled"}});case"mfa_totp_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} TOTP MFA",id:"auditlog.actionNames.eventColumn.mfa_totp_toggled",values:{enabled:null!==(me=Be.changes)&&void 0!==me&&me.enabled.newValue?"Enabled":"Disabled"}});case"mfa_backup_code_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} backup codes for MFA",id:"auditlog.actionNames.eventColumn.mfa_backup_code_toggled",values:{enabled:null!==(pe=Be.changes)&&void 0!==pe&&pe.enabled.newValue?"Enabled":"Disabled"}});case"user_suspended":return(0,A.jsx)(n().sA,{defaultMessage:"Suspended {userNameAndEmail}",id:"auditLogEntry.user_suspended",values:{userNameAndEmail:(0,d().xC)(Ee,Be)}});case"user_unsuspended":return(0,A.jsx)(n().sA,{defaultMessage:"Reactivated {userNameAndEmail}",id:"auditLogEntry.user_unsuspended",values:{userNameAndEmail:(0,d().xC)(Ee,Be)}});case"user_deleted":return Be.target?(0,A.jsx)(n().sA,{defaultMessage:"Deleted {userNameAndEmail}",id:"auditLogEntry.user_deleted",values:{userNameAndEmail:(0,d().q4)(Ee,Be.target.user)}}):(0,A.jsx)(n().sA,{...l().D.user_deleted});case"workspace.settings.prevent_granting_support_access_updated":case"organization.managed_user_settings.prevent_granting_support_access_updated":return Be.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.enabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.disabled"});case"workspace.settings.prevent_profile_edits_updated":case"organization.managed_user_settings.prevent_profile_edits_updated":return Be.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.enabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.disabled"});case"workspace.settings.external_workspace_access_updated":case"organization.managed_user_settings.external_workspace_access_updated":return Be.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.enabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.disabled"});case"workspace.settings.delete_from_trash_delay":return void 0!==Be.changes.valueS.oldValue||void 0!==Be.changes.valueS.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Changed duration for when pages are deleted from Trash from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_settings_delete_from_trash_delay",values:{oldDuration:(0,b().rN)(Be.changes.valueS.oldValue??c().I4,Ee),newDuration:(0,b().rN)(Be.changes.valueS.newValue??c().I4,Ee)}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed duration for when pages are deleted from Trash.",id:"auditLogEntry.workspace_settings_delete_from_trash_delay.generic"});case"workspace.settings.purge_delay":return void 0!==Be.changes.valueS.oldValue||void 0!==Be.changes.valueS.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Changed duration for when deleted pages are permanently deleted from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_settings_purge_delay",values:{oldDuration:(0,b().rN)(Be.changes.valueS.oldValue??c().qI,Ee),newDuration:(0,b().rN)(Be.changes.valueS.newValue??c().qI,Ee)}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed duration for when deleted pages are permanently deleted.",id:"auditLogEntry.workspace_settings_purge_delay.generic"});case"workspace.settings.custom_session_duration_updated":case"organization.managed_user_settings.custom_session_duration_updated":return void 0!==Be.changes.valueMs.oldValue&&void 0!==Be.changes.valueMs.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Changed the session duration for all managed users from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated",values:{oldDuration:(0,u().lH)(Be.changes.valueMs.oldValue,Ee),newDuration:(0,u().lH)(Be.changes.valueMs.newValue,Ee)}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed the session duration for all managed users.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated.disabled"});case"workspace.public_domain.created":return(0,A.jsx)(n().sA,{defaultMessage:"Public domain “{name}“ created",id:"auditLogEntry.workspace_public_domain_created",values:{name:Be.target.publicDomain.domainName}});case"workspace.public_domain.updated":return void 0!==(null===(he=Be.changes.name)||void 0===he?void 0:he.oldValue)&&void 0!==(null===(fe=Be.changes.name)||void 0===fe?void 0:fe.newValue)?(0,A.jsx)(n().sA,{defaultMessage:"Changed public domain name from “{oldValue}“ to “{newValue}“",id:"auditLogEntry.workspace_public_domain_updated.domain_name",values:{oldValue:Be.changes.name.oldValue,newValue:Be.changes.name.newValue}}):void 0===(null===(xe=Be.changes.publicHomePage)||void 0===xe?void 0:xe.oldValue)&&void 0!==(null===(ve=Be.changes.publicHomePage)||void 0===ve?void 0:ve.newValue)?(0,A.jsx)(n().sA,{defaultMessage:"Changed public domain add home page “{newValue}“",id:"auditLogEntry.workspace_public_domain_updated.public_home_page.add",values:{newValue:Be.changes.publicHomePage.newValue}}):void 0!==(null===(ye=Be.changes.publicHomePage)||void 0===ye?void 0:ye.oldValue)&&void 0!==(null===(be=Be.changes.publicHomePage)||void 0===be?void 0:be.newValue)?(0,A.jsx)(n().sA,{defaultMessage:"Changed public domain home page from “{oldValue}“ to “{newValue}“",id:"auditLogEntry.workspace_public_domain_updated.public_home_page.update",values:{oldValue:Be.changes.publicHomePage.oldValue,newValue:Be.changes.publicHomePage.newValue}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed public domain",id:"auditLogEntry.workspace_public_domain_updated.unknown"});case"workspace.public_domain.deleted":return(0,A.jsx)(n().sA,{defaultMessage:"Public domain “{name}“ deleted",id:"auditLogEntry.workspace_public_domain_deleted",values:{name:Be.target.publicDomain.domainName}});case"workspace.custom_emoji.updated":const xt=null===(Se=Be.changes.name)||void 0===Se?void 0:Se.oldValue,vt=null===(je=Be.changes.name)||void 0===je?void 0:je.newValue,yt=null===(we=Be.changes.url)||void 0===we?void 0:we.oldValue,bt=null===(Ae=Be.changes.url)||void 0===Ae?void 0:Ae.newValue;return void 0!==xt&&void 0!==vt&&void 0!==yt&&void 0!==bt?(0,A.jsx)(n().sA,{defaultMessage:"Changed image and name of custom emoji from “{oldName}“ to “{newName}“",id:"auditLogEntry.workspace_custom_emoji_updated.name_image",values:{oldName:xt,newName:vt}}):void 0!==xt&&void 0!==vt?(0,A.jsx)(n().sA,{defaultMessage:"Changed name of custom emoji from “{oldName}“ to “{newName}“",id:"auditLogEntry.workspace_custom_emoji_updated.name",values:{oldName:xt,newName:vt}}):void 0!==yt&&void 0!==bt?(0,A.jsx)(n().sA,{defaultMessage:"Changed image of custom emoji “{name}“",id:"auditLogEntry.workspace_custom_emoji_updated.image",values:{name:Be.target.customEmoji.name}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed custom emoji",id:"auditLogEntry.workspace_custom_emoji_updated.unknown"});case"workspace.custom_emoji.deleted":return(0,A.jsx)(n().sA,{defaultMessage:"Deleted custom emoji “{name}“",id:"auditLogEntry.workspace_custom_emoji_deleted",values:{name:Be.target.customEmoji.name}});case"integration.created":return(0,A.jsx)(n().sA,{defaultMessage:"Added {botName} to the workspace",id:"auditLogEntry.integration.created",values:{botName:(0,d().Hg)(Ee,Be.meta.bot)}});case"integration.deleted":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {botName} from workspace",id:"auditLogEntry.integration.deleted",values:{botName:(0,d().Hg)(Ee,Be.meta.bot)}});case"page.automation_deleted":return(0,A.jsx)(n().sA,{defaultMessage:"Deleted automation {automationType} from {pageTitle}",id:"auditLogEntry.page.automation_deleted",values:{automationType:(0,d().KE)(Be.meta.automationType),pageTitle:(0,j().wS)(Be)}});case"page.file_deleted":return(0,A.jsx)(n().sA,{defaultMessage:"Deleted file {fileName} from {pageTitle}",id:"auditLogEntry.page.file_deleted",values:{fileName:J(Be),pageTitle:(0,j().wS)(Be)}});case"integration.secret_reset":return(0,A.jsx)(n().sA,{defaultMessage:"Reset authentication secret of {botName}",id:"auditLogEntry.integration.secret_reset",values:{botName:(0,d().Hg)(Ee,Be.meta.bot)}});case"integration.settings.updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated settings of {botName}",id:"auditLogEntry.integration.settings.update",values:{botName:(0,d().Hg)(Ee,Be.meta.bot)}});case"integration.permission.updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated capabilities of {botName}: {botCapabilities}",id:"auditLogEntry.integration.permission.update",values:{botName:(0,d().Hg)(Ee,Be.meta.bot),botCapabilities:C(Be.meta.bot)}});case"workspace.external_account_connected":return(0,A.jsx)(n().sA,{defaultMessage:"Connected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_connected",values:{integrationName:(0,d().Hg)(Ee,Be.meta.bot)}});case"workspace.external_account_disconnected":return(0,A.jsx)(n().sA,{defaultMessage:"Disconnected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_disconnected",values:{integrationName:(0,d().Hg)(Ee,Be.meta.bot)}});case"workspace.integration_added":return(0,A.jsx)(n().sA,{defaultMessage:"Added {integrationName} to the workspace",id:"auditLogEntry.workspace.workspace.integration_added",values:{integrationName:(0,d().Hg)(Ee,Be.meta.bot)}});case"workspace.integration_removed":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {integrationName} from workspace",id:"auditLogEntry.workspace.workspace.integration_removed",values:{integrationName:(0,d().Hg)(Ee,Be.meta.bot)}});case"workspace.integration_webhook_inactivated":return(0,A.jsx)(n().sA,{defaultMessage:"Webhook events for {integrationName} failing",id:"auditLogEntry.workspace.integration_webhook_inactivated",values:{integrationName:(0,d().Hg)(Ee,Be.meta.bot)}});case"workspace.integration_webhook_reactivated":return(0,A.jsx)(n().sA,{defaultMessage:"Webhook events for {integrationName} restored",id:"auditLogEntry.workspace.integration_webhook_reactivated",values:{integrationName:(0,d().Hg)(Ee,Be.meta.bot)}});case"user.settings.analytics_tracking_setting_updated":return(0,A.jsx)(n().sA,{defaultMessage:"{enabledOrDisabled} page view tracking on their user account",id:"auditLogEntry.user.settings.analytics_tracking_setting_updated",values:{enabledOrDisabled:(0,d().ko)(Ee,Boolean(null===(Me=Be.changes)||void 0===Me||null===(Me=Me.enabled)||void 0===Me?void 0:Me.newValue))}});case"workspace.settings.guest_invite_request_setting_updated":return function(e,t){var a;return(0,A.jsx)(n().sA,{defaultMessage:"{enabledOrDisabled} allowing members to request inviting guests",id:"auditLogEntry.workspace.settings.guest_invite_request_setting_updated",values:{enabledOrDisabled:(0,d().ko)(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(Be,Ee);case"workspace.settings.ai_leap_toggled":return function(e,t){var a;return(0,A.jsx)(n().sA,{defaultMessage:"{enabledOrDisabled} Notion AI LEAP (Learning & Early Access Program)",id:"auditLogEntry.workspace.settings.ai_leap_toggled",values:{enabledOrDisabled:(0,d().ko)(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(Be,Ee);case"workspace.guest_invite_request_resolved":return function(e,t){const a=e.changes.requestStatus.newValue;return"approved"===a?(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.approved",defaultMessage:"Approved {requestorNameAndEmail}'s request to add guest {guestNameAndEmail} to {pageTitle}",values:{requestorNameAndEmail:(0,d().q4)(t,e.target.user),guestNameAndEmail:(0,d().q4)(t,e.meta.targetGuest),pageTitle:(0,j().uU)(e.meta.pagesAndRoles[0].page)}}):"rejected"===a?(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.rejected",defaultMessage:"Declined request to add guest {guestNameAndEmail} to {pageTitle}",values:{guestNameAndEmail:(0,d().q4)(t,e.meta.targetGuest),pageTitle:(0,j().uU)(e.meta.pagesAndRoles[0].page)}}):(0,A.jsx)(A.Fragment,{})}(Be,Ee);case"workspace.settings.integration_restrictions.integration_added_to_allowlist":case"workspace.settings.integration_restrictions.integration_removed_from_allowlist":return function(e){if("workspace.settings.integration_restrictions.integration_added_to_allowlist"===e.actionName)return(0,A.jsx)(n().sA,{defaultMessage:"Added {integrationName} to the approved connections list",id:"auditLogEntry.workspace.settings.integration_allowlist_add",values:{integrationName:e.meta.integrationName}});return(0,A.jsx)(n().sA,{defaultMessage:"Removed {integrationName} from the approved connections list",id:"auditLogEntry.workspace.settings.integration_allowlist_remove",values:{integrationName:e.meta.integrationName}})}(Be);case"workspace_exported":case"public_page_cleared":case"password_changed":case"password_cleared":case"password_set":case"member_joined":case"scim_token_generated":case"scim_token_revoked":case"invite_link_reset":case"idp_metadata_xml_removed":case"idp_metadata_xml_updated":case"workspace.members_exported":case"organization.created":return(0,A.jsx)(n().sA,{...l().D[Be.actionName]});case"organization.saml.idp_metadata_xml_removed":return(0,A.jsx)(n().sA,{...l().D.idp_metadata_xml_removed});case"organization.saml.idp_metadata_xml_updated":return(0,A.jsx)(n().sA,{...l().D.idp_metadata_xml_updated});case"organization.owner.added":return(0,A.jsx)(n().sA,{defaultMessage:"Added {ownerNameAndEmail} as an organization owner",id:"auditlogEventFilter.eventColumn.organization.owner.added",values:{ownerNameAndEmail:(0,d().xC)(Ee,Be)}});case"organization.owner.removed":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {ownerNameAndEmail} as an organization owner",id:"auditlogEventFilter.eventColumn.organization.owner.removed",values:{ownerNameAndEmail:(0,d().xC)(Ee,Be)}});case"organization.audit_log_exported":return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.organization.audit_log_exported",defaultMessage:"Exported the organization audit log for last {duration} days",values:{duration:Be.meta.duration}});case"organization.settings.name_changed":return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.organization.settings.name_changed",defaultMessage:"Changed the organization name from “{oldValue}“ to “{newValue}“",values:{oldValue:Be.changes.name.oldValue,newValue:Be.changes.name.newValue}});case"organization.workspace.removed":return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.organization.workspace.removed",defaultMessage:"Removed workspace “{workspaceName}“ from the organization",values:{workspaceName:Be.target.space.name}});case"organization.email_domain.verified":return(0,A.jsx)(n().sA,{defaultMessage:"Added a verified email domain “{emailDomain}“ to the organization",id:"auditlog.actionNames.eventColumn.organization.email_domain.verified",values:{emailDomain:Be.changes.domain}});case"organization.email_domain.unverified":return(0,A.jsx)(n().sA,{defaultMessage:"Removed a verified email domain “{emailDomain}“ from the organization",id:"auditlog.actionNames.eventColumn.organization.email_domain.unverified",values:{emailDomain:Be.changes.domain}});case"organization.default_space_settings.disable_guests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for guests",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.disable_guests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Ee,value:null===(Ce=Be.changes)||void 0===Ce||null===(Ce=Ce.enabled)||void 0===Ce?void 0:Ce.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.enable_ai_feature_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for AI feature",id:"auditlog.actionNames.eventColumn.organization.enable_ai_feature_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Ee,value:null===(Ie=Be.changes)||void 0===Ie||null===(Ie=Ie.enabled)||void 0===Ie?void 0:Ie.newValue,shouldInvertBoolean:!1})}});case"organization.default_space_settings.disable_page_analytics_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for page view tracking for workspace analytics",id:"auditlog.actionNames.eventColumn.organization.disable_page_analytics_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Ee,value:null===(Te=Be.changes)||void 0===Te||null===(Te=Te.enabled)||void 0===Te?void 0:Te.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_public_access_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for members sharing pages publicly",id:"auditlog.actionNames.eventColumn.organization.disable_public_access_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Ee,value:null===(ke=Be.changes)||void 0===ke||null===(ke=ke.enabled)||void 0===ke?void 0:ke.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_move_to_space_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for moving or duplicating pages to other workspaces",id:"auditlog.actionNames.eventColumn.organization.disable_move_to_space_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Ee,value:null===(_e=Be.changes)||void 0===_e||null===(_e=_e.enabled)||void 0===_e?void 0:_e.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_export_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for exporting pages",id:"auditlog.actionNames.eventColumn.organization.disable_export_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Ee,value:null===(De=Be.changes)||void 0===De||null===(De=De.enabled)||void 0===De?void 0:De.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.organization.disable_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Ee,value:null===(ze=Be.changes)||void 0===ze||null===(ze=ze.enabled)||void 0===ze?void 0:ze.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_guest_membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.organization.disable_guest_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Ee,value:null===(Pe=Be.changes)||void 0===Pe||null===(Pe=Pe.enabled)||void 0===Pe?void 0:Pe.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.enable_guest_invite_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing members to request inviting guests",id:"auditlog.actionNames.eventColumn.organization.enable_guest_invite_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Ee,value:null===(Ne=Be.changes)||void 0===Ne||null===(Ne=Ne.enabled)||void 0===Ne?void 0:Ne.newValue,shouldInvertBoolean:!1})}});case"organization.default_space_settings.disable_external_membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.organization.disable_external_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Ee,value:null===(Re=Be.changes)||void 0===Re||null===(Re=Re.enabled)||void 0===Re?void 0:Re.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.integration_restriction_updated":return function(e){const t=void 0,{newValue:a}=e.changes.integration_restrictions;if(a===t)return(0,A.jsx)(n().sA,{defaultMessage:"Updated organization integrations setting: workspaces may have their own integration restrictions",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.undefined"});switch(a){case"no_restrictions":return(0,A.jsx)(n().sA,{defaultMessage:"Updated organization integrations setting: allowing members to install all integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.no_restrictions"});case"approved_only":return(0,A.jsx)(n().sA,{defaultMessage:"Updated organization integrations setting: allowing members to install only approved integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.approved_only"});case"approved_or_built_by_notion":return(0,A.jsx)(n().sA,{defaultMessage:"Updated organization integrations setting: allowing members to install only approved and Notion-built integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.approved_or_built_by_notion"});default:(0,o().HB)(a)}}(Be);case"form_response.created":return(0,A.jsx)(n().sA,{defaultMessage:"New form submission for {formName} created",id:"auditLogEntry.workspace_form_submission_created",values:{formName:(0,j().$T)(Be)}});case"form.created":return(0,A.jsx)(n().sA,{defaultMessage:"Created form",id:"auditLogEntry.workspace_form_created"});case"form.content.updated":return(0,A.jsx)(n().sA,{defaultMessage:"Edited form {formName}",id:"auditLogEntry.workspace_form_edited",values:{formName:(0,j().$T)(Be)}});case"workspace.shared_email_domain_added":return(0,A.jsx)(n().sA,{defaultMessage:"Added shared email domain {emailDomain}",id:"auditLogEntry.workspace_shared_email_domain_added",values:{emailDomain:Be.changes.domain}});case"workspace.shared_email_domain_removed":return(0,A.jsx)(n().sA,{defaultMessage:"Removed shared email domain {emailDomain}",id:"auditLogEntry.workspace_shared_email_domain_removed",values:{emailDomain:Be.changes.domain}});case"page.viewed.by_shared_email_domain_user":return(0,A.jsx)(n().sA,{defaultMessage:"{pageName} viewed by user on shared email domain",id:"auditLogEntry.page_viewed_by_shared_email_domain_user",values:{pageName:(0,j().wS)(Be)}});default:if("local"!==Le)return m().log({level:"error",from:"auditLogEvent",type:"AuditLogEvent",data:{miscDataToConvertToString:{data:Be}}}),(0,A.jsx)(A.Fragment,{});(0,o().HB)(Be)}var Ye}function J(e){const{name:t,extension:a}=e.target.file;return t?`“${t}“`:a?(0,A.jsx)(n().sA,{...l().D.a_file_with_extension,values:{extension:a}}):(0,A.jsx)(n().sA,{...l().D.a_file})}var ee=()=>a(284371),te=()=>a(859428),ae=()=>a(962730),se=()=>a(56366),ne=()=>a(401497),ie=()=>a(584262),oe=()=>a(187485),re=()=>a(492414),le=()=>a(351360),de=()=>a(630116);function ce(e){const{pageAuditLogEntry:t}=e,{table:a,id:s,meta:n}=t.target.page,i=(0,ne().IS)((e=>({link:{display:"inline",color:e.mediumTextColor,textDecoration:"underline"}})),[]),o=(0,se().K8)((()=>{const{currentSpaceStore:e}=le().default.state;return n&&n.parent&&e?(0,de().Oo)(e,n.parent):e}),[n]),r=(0,se().K8)((()=>o?de().Bv.createChildStore(o,{id:s,table:a}):null),[o,s,a]),l=(0,se().K8)((()=>r?(0,re().Ay)({store:r,pageVisitSource:ie().y8.AuditLog}):null),[r]);return l?(0,A.jsxs)(A.Fragment,{children:["“",(0,A.jsx)(oe().A,{style:i.link,external:!0,href:l,children:(0,j().wS)(t,{noQuotes:!0})}),"“"]}):(0,A.jsx)(A.Fragment,{children:(0,j().wS)(t)})}function ue(e){const{auditLogEntry:t,id:a}=e,[i,o]=(0,s.useState)(""),r=(0,n().tz)();return(0,s.useEffect)((()=>{const e=document.getElementById(a);o((null==e?void 0:e.textContent)||"")}),[a]),(0,A.jsx)(te().A,{style:{whiteSpace:"normal"},delayThreshold:80,renderTooltip:()=>(0,A.jsx)(me,{text:i,auditLogEntry:t}),placement:ae().W.Bottom,render:e=>(0,A.jsx)("div",{...e,style:{fontSize:14,...ee().RC},id:a,children:(0,A.jsx)(ge,{auditLogEntry:t,env:"production",intl:r})})})}function ge(e){const{auditLogEntry:t,env:a,intl:s}=e;return Z({auditLogEntry:t,env:a,intl:s,options:{renderPageName:e=>(0,A.jsx)(ce,{pageAuditLogEntry:e})}})}function me(e){var t,a;const{auditLogEntry:s,text:i}=e,o=(0,n().tz)(),r=(0,w().aj)({auditLogEntry:s,intl:o}),l=(0,w().Bb)({auditLogEntry:s,intl:o});return(0,A.jsxs)("div",{children:[i,(null===(t=s.actor.meta)||void 0===t?void 0:t.ipAddress)&&(0,A.jsx)("div",{children:(0,A.jsx)(n().sA,{defaultMessage:"IP address: {ip}",values:{ip:null===(a=s.actor.meta)||void 0===a?void 0:a.ipAddress},id:"auditLogSettings.metadata.ipAddress"})}),(0,A.jsx)("div",{children:(0,w().BN)(s,o)}),r&&(0,A.jsx)(n().sA,{id:"auditLogColumnEvent.tooltip.audienceMessage",defaultMessage:"Page audience: {audience}",values:{audience:r}}),l&&(0,A.jsx)(n().sA,{id:"auditLogColumnEvent.tooltip.audienceMessage.forms",defaultMessage:"Form audience: {audience}",values:{audience:l}})]})}},23534:(e,t,a)=>{a.d(t,{M:()=>u,g:()=>g});var s=a(296540),n=()=>a(484714),i=()=>a(187174),o=()=>a(436604),r=()=>a(534177),l=()=>a(449506),d=()=>a(511303);const c={pageViews:0,uniquePageViews:0,pagesCreated:0,pageEdits:0,topPages:[]};function u(e){let{spaceId:t}=e;const[a,n]=(0,s.useState)("last_90_days");return{...g({spaceId:t,daysFilter:a}),daysFilter:a,setDaysFilter:n}}function g(e){let{spaceId:t,daysFilter:a}=e;const u=(0,n().v3)(),{updateCacheWithRecordMap:g}=(0,s.useContext)(d().N),[{status:m,value:p,error:h}]=(0,i().Yb)((async()=>{const e=await l().callApi({eventName:"getContentEngagementAnalytics",environment:u,data:{spaceId:t,daysFilter:a},headers:{[o().B3]:t}});switch("success"===e.type&&g(e),e.type){case"success":return{pageViews:e.data.pageViews,uniquePageViews:e.data.uniquePageViews,pagesCreated:e.data.pagesCreated,pageEdits:e.data.pageEdits,topPages:e.data.topPages};case"failed":throw e.body;default:(0,r().HB)(e)}}),[u,t,a,g]);return{data:(0,s.useMemo)((()=>p||c),[p]),loading:"pending"===m||"idle"===m,error:h}}},27198:(e,t,a)=>{a.d(t,{Cx:()=>r,LL:()=>d,Ox:()=>c,Qq:()=>i,h6:()=>l,tL:()=>o});a(296540);var s=()=>a(959013),n=a(474848);function i(e){const{memberCount:t}=e;return(0,n.jsx)(s().sA,{id:"organization.general.members.count",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:t.toLocaleString()}})}function o(e){const{teamCount:t}=e;return(0,n.jsx)(s().sA,{id:"organization.general.teamspaces.count",defaultMessage:"{teamCount, plural, one {{teamCount} teamspace} other {{teamCount} teamspaces}}",values:{teamCount:t.toLocaleString()}})}function r(e){const{workspacesCount:t}=e;return(0,n.jsx)(s().sA,{id:"organization.general.workspaces.count",defaultMessage:"{workspacesCount, plural, one {{workspacesCount} workspace} other {{workspacesCount} workspaces}}",values:{workspacesCount:t}})}function l(e){const{guestCount:t}=e;return(0,n.jsx)(s().sA,{defaultMessage:"{numGuests} {numGuests, plural, one {guest} other {guests}}",id:"organizationManageWorkspacesTable.numGuests",values:{numGuests:t}})}function d(e){const{verifiedDomainsCount:t,pendingDomainsCount:a}=e;return(0,n.jsx)(s().sA,{defaultMessage:"{verifiedDomainsCount} verified · {pendingDomainsCount} pending",id:"organizationEmailDomainsTable.emailDomainsSummaryCounts",values:{verifiedDomainsCount:t,pendingDomainsCount:a}})}function c(e){const{scimTokensCount:t}=e;return(0,n.jsx)(s().sA,{defaultMessage:"{scimTokensCount} tokens",id:"organizationEmailDomainsTable.scimTokensCount",values:{scimTokensCount:t}})}},28119:(e,t,a)=>{a.d(t,{TD:()=>i,YS:()=>o});var s=()=>a(645873);const n={ConfirmHIPAAModal:new(s().O2)("ConfirmHIPAAModal",(async()=>a.e(77761).then(a.bind(a,919099)))),HIPAASuccessModal:new(s().O2)("HIPAASuccessModal",(async()=>a.e(50568).then(a.bind(a,222660))))},i=(0,s()._h)(n.ConfirmHIPAAModal,(e=>e.ConfirmHIPAAModal)),o=(0,s()._h)(n.HIPAASuccessModal,(e=>e.HIPAASuccessModal))},29037:(e,t,a)=>{a.r(t),a.d(t,{checkmarkIcon:()=>n,iconDefinition:()=>s});a(296540);const s={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M15.784 4.002a.625.625 0 0 1 .214.857L9.443 15.784a.625.625 0 0 1-1.01.085l-4.37-5.098a.625.625 0 0 1 .949-.814l3.806 4.44 6.109-10.181a.625.625 0 0 1 .857-.214"})},n=(0,a(340498).wt)("checkmark",s)},30731:(e,t,a)=>{a.d(t,{BI:()=>c,ES:()=>p,Em:()=>r,Hl:()=>m,Ht:()=>g,Tq:()=>o,jO:()=>h,qC:()=>u,r6:()=>l,y2:()=>d});var s=()=>a(869190),n=()=>a(604995),i=()=>a(416504);function o(e,t){return(0,s().eV)({value:n().C6.notionDateTimeToLuxon(e,t.locale),preset:"short"})}function r(e,t){return(0,s().eV)({value:n().C6.notionDateTimeToLuxon(e,t.locale),preset:"time"})}function l(e,t){return n().C6.notionDateTimeToLuxon(e,t.locale).toFormat(n().k8)}function d(e,t){let a={starting:void 0,ending:void 0};var s,n,o,r;if(t.starting&&t.ending)a={starting:{type:"datetime",start_time:"",start_date:t.starting.start_date,time_zone:""},ending:{type:"datetime",start_time:"",start_date:t.ending.start_date,time_zone:""}},null!==(s=e.starting)&&void 0!==s&&s.start_time&&null!==(n=e.starting)&&void 0!==n&&n.time_zone&&(a.starting={...a.starting,start_time:e.starting.start_time,time_zone:e.starting.time_zone}),null!==(o=e.ending)&&void 0!==o&&o.start_time&&null!==(r=e.ending)&&void 0!==r&&r.time_zone?a.ending={...a.ending,start_time:e.ending.start_time,time_zone:e.ending.time_zone}:a={starting:{...a.starting,start_time:"00:00",time_zone:(0,i().P)()},ending:{...a.ending,start_time:"23:59",time_zone:(0,i().P)()}};else if(t.starting){var l,d;a=null!==(l=e.starting)&&void 0!==l&&l.start_time&&null!==(d=e.starting)&&void 0!==d&&d.time_zone?{starting:{type:"datetime",start_date:t.starting.start_date,start_time:e.starting.start_time,time_zone:e.starting.time_zone},ending:e.ending}:{starting:{type:"datetime",start_date:t.starting.start_date,start_time:"00:00",time_zone:(0,i().P)()},ending:e.ending}}else if(t.ending){var c,u;a=null!==(c=e.ending)&&void 0!==c&&c.start_time&&null!==(u=e.ending)&&void 0!==u&&u.time_zone?{ending:{type:"datetime",start_date:t.ending.start_date,start_time:e.ending.start_time,time_zone:e.ending.time_zone},starting:e.starting}:{ending:{type:"datetime",start_date:t.ending.start_date,start_time:"23:59",time_zone:(0,i().P)()},starting:e.starting}}else a={starting:e.starting,ending:e.ending};return a}function c(e){return e.starting&&e.ending?{starting:{type:"date",start_date:e.starting.start_date},ending:{type:"date",start_date:e.ending.start_date}}:e.starting?{starting:{type:"date",start_date:e.starting.start_date}}:e.ending?{ending:{type:"date",start_date:e.ending.start_date}}:{}}function u(e){if(e)return{type:"date",start_date:e.start_date}}function g(e){return`${e.actorType}:${e.actorId}`}function m(e){const t=e.split(":");if(2===t.length)return"bot"===t[0]?{actorId:t[1],actorType:"bot"}:"notion_user"===t[0]?{actorId:t[1],actorType:"notion_user"}:void 0}function p(e){return{starting:e.starting?{type:"date",start_date:e.starting.start_date}:void 0,ending:e.ending?{type:"date",start_date:e.ending.start_date}:void 0}}function h(e){return void 0===e.starting&&void 0===e.ending}},34293:(e,t,a)=>{a.d(t,{A:()=>o});a(296540);var s=()=>a(959013),n=()=>a(824160),i=a(474848);function o(e){return(0,i.jsx)(n().A,{...e,children:"membership_admin"===e.role?(0,i.jsx)(s().sA,{id:"spacePermissionsSettings.user.membershipAdmin",defaultMessage:"Membership admin"}):(0,i.jsx)(s().sA,{id:"spacePermissionsSettings.user.workspaceOwner",defaultMessage:"Workspace owner"})})}},37625:(e,t,a)=>{a.d(t,{Ay:()=>I});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(401497),r=()=>a(668725),l=()=>a(959013),d=()=>a(972435),c=()=>a(722872),u=()=>a(37433),g=()=>a(632709),m=()=>a(848237),p=()=>a(898808),h=()=>a(452558),f=()=>a(493823),x=()=>a(760217),v=()=>a(406699),y=()=>a(419357),b=()=>a(928600),S=()=>a(89924),j=()=>a(125565),w=a(474848);function A(e){let{teamsForMember:t,shouldHideTeamMemberCount:a}=e;const s=(0,o().IS)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),n=t.length;return(0,w.jsx)(v().Ay,{popupType:v().z7.Popup,renderOrigin:e=>(0,w.jsx)(f().p,{disabled:0===n,style:0===n?s.noTeams:s.button,...e,children:0===n?(0,w.jsx)(l().sA,{id:"teamsDropdownForMember.teamsCountNone.label",defaultMessage:"No access"}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l().sA,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:n}}),(0,r().b)(s.chevron)]})}),render:()=>(0,w.jsx)(C,{teamStores:t,shouldHideTeamMemberCount:a})})}const M=(0,l().YK)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function C(e){const{shouldHideTeamMemberCount:t}=e,a=(0,n().v3)(),r=(0,o().IS)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),[f,v]=(0,s.useState)(""),A=(0,s.useCallback)((e=>m().F2({environment:a,teamId:e,tab:g().p.Members,from:"teams_dropdown_for_team_member"})),[a]),C=(0,i().K8)((()=>[{key:"teams for member",render:e=>(0,w.jsx)(S().A,{...e}),actions:e.teamStores.map((e=>{const a={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:a=>{var s;return(0,w.jsx)(x().A,{icon:(0,w.jsx)(p().x,{disabled:!0,store:e}),title:(0,w.jsx)(j().A,{style:r.teamMenuItem,children:e.getName()}),caption:t?void 0:(0,w.jsx)(l().sA,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:(null===(s=(0,u().PF)(e))||void 0===s?void 0:s.memberCountWithGuests)??0}}),inline:!0,...a})},action:()=>{A(e.id)},closeParentMenu:!1};return a}))}]),[e.teamStores,r.teamMenuItem,A,t]),I=f,T=(0,w.jsx)(S().A,{isInput:!0,children:(0,w.jsx)(y().Ay,{value:I,onChange:(0,s.useCallback)((e=>{v(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:d().A.formatMessage(M.filterTeams)})}),k={menuType:c().gu.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?T:void 0};return(0,w.jsx)(b().A,{...k,children:(0,w.jsx)(h().A,{filter:I,context:{blocks:[],environment:a,publicEditMode:void 0},initialFocus:0,sections:C})})}const I=function(e){const t=(0,i().K8)((()=>e.teamStores??a(988499).A.state.teams),[e.teamStores]),s=(0,i().K8)((()=>t.filter((t=>t.isMemberOrGuest(e.memberId,e.userPermissionGroupIds)))),[t,e.memberId,e.userPermissionGroupIds]);return(0,w.jsx)(A,{teamsForMember:s})}},43450:(e,t,a)=>{a.d(t,{R:()=>i});var s=()=>a(484714),n=()=>a(56366);function i(e){const t=(0,s().v3)();return(0,n().K8)((()=>{const a=t.currentUser.id;return!!(e&&e.isDefined()&&a)&&Boolean(e.isOwner(a))}),[t.currentUser.id,e])}},46413:(e,t,a)=>{a.d(t,{D:()=>i});var s=()=>a(348564),n=()=>a(118685);class i extends n().f{getInitialState(){return{categorySelections:{page:n().o.All,space:n().o.All,team:n().o.All,account:n().o.All,form:n().o.All},categoryToggleOpen:{page:!0,space:!0,team:!0,account:!0,form:!0},searchQuery:void 0,actionSelections:(0,a(534177).s8)(s().D$,(()=>!0)),isMenuOpen:!1,renderOrder:[{category:"page",orderedActions:s().Dj.page},{category:"space",orderedActions:s().Dj.space},{category:"account",orderedActions:s().Dj.account},{category:"team",orderedActions:s().Dj.team},{category:"form",orderedActions:s().Dj.form}]}}}},47095:(e,t,a)=>{a.d(t,{Z:()=>n});var s=()=>a(401497);function n(){return(0,s().IS)((e=>({longShimmer:{borderRadius:4,height:14,width:185},longTallShimmer:{borderRadius:4,height:25,width:185},shortShimmer:{borderRadius:4,height:14,width:70},avatarShimmer:{borderRadius:"100%",height:28,width:28,background:"light"===e.mode?"rgb(243 243 243)":"rgb(38 38 38)"}})),[])}},51703:(e,t,a)=>{a.d(t,{j:()=>u});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520),a(803949),a(581454);var s=()=>a(484714),n=()=>a(187174),i=()=>a(798880),o=()=>a(322769),r=()=>a(630116),l=()=>a(142448),d=()=>a(303129),c=()=>a(443573);function u(){const e=(0,d().l)(),t=(0,s().v3)(),{spaceUsers:a,loading:u}=(0,c().$)(e),[g]=(0,n().Yb)((()=>{if(u)return Promise.resolve(void 0);const s=new Set,n=new Set,d=new Set,c={},g={};for(const t of e){const e=a[t.id]??[],i=e.filter(o().c7);i.forEach((e=>{n.add(e.userId),"editor"===e.role&&s.add(e.userId)}));const r=e.filter(o().QE);r.forEach((e=>d.add(e.userId))),c[t.id]=i,g[t.id]=r}const m=Array.from(s).map((e=>new(r().LU)(t,{table:i().oo,id:e}))).sort(((e,t)=>e.getProfilePhoto()?-1:t.getProfilePhoto()?1:0)).map((e=>e.id));return Promise.resolve({memberCount:n.size,guestCount:d.size,sampleMemberIds:Array.from(new Set([...m,...n])).slice(0,l().iP),membersForSpace:c,guestsForSpace:g,loading:u})}),[u,e,a,t]);return{state:g,loading:u}}},51922:(e,t,a)=>{a.d(t,{_:()=>l});a(581454),a(296540);var s=()=>a(401497),n=()=>a(284371),i=()=>a(554509),o=()=>a(8178),r=a(474848);function l(e){const{title:t}=e,a=d({bylineWidth:"byline"in e&&e.byline?e.bylineWidth:void 0}),s="byline"in e?{marginBottom:0,paddingBottom:0}:{},n={...a.headingStyle,...s};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o().A,{large:!0,style:n,children:(0,r.jsx)("div",{style:a.titleContainer,children:(0,r.jsx)(i().D,{styleName:"UITitle-22px/Semibold",children:t})})}),"byline"in e&&(0,r.jsx)("div",{style:a.children,children:(0,r.jsx)(i().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:e.byline})})]})}function d(e){let{bylineWidth:t}=e;return(0,s().IS)((e=>({headingStyle:{marginBottom:16,paddingBottom:8,display:"flex",justifyContent:"space-between",alignItems:"center"},titleContainer:{display:"flex",justifyContent:"center",alignItems:"center",gap:12},title:{fontSize:20,fontWeight:n().Wy.medium,lineHeight:"150%",display:"flex",alignItems:"center",gap:0,margin:0},children:{width:t??"80%",marginTop:12,marginBottom:22},tabContainerStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14,overflow:"visible"},tabStyle:{marginLeft:-8,marginRight:8},tabTitleStyle:{paddingLeft:8,paddingRight:8},tabBorderStyle:{left:8,right:8}})),[t])}},55293:(e,t,a)=>{a.d(t,{J:()=>n});a(296540);var s=a(474848);const n=(0,a(340498).wt)("exclamationMarkOctagon",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M7.908 16.441a2.7 2.7 0 0 1-.765-.095 1.8 1.8 0 0 1-.581-.28 3.3 3.3 0 0 1-.486-.438l-2.638-2.94a3 3 0 0 1-.363-.485 1.7 1.7 0 0 1-.184-.492 3.5 3.5 0 0 1-.048-.622V8.04q0-.362.048-.622.054-.26.184-.485.13-.226.362-.486l2.64-2.94a3 3 0 0 1 .485-.444q.26-.184.58-.28a2.7 2.7 0 0 1 .766-.095h4.184q.437 0 .759.095.328.096.58.28.26.178.493.445l2.604 2.94q.24.273.376.498.137.22.192.479.06.252.061.615v3.049q0 .362-.055.622a1.6 1.6 0 0 1-.177.492q-.13.225-.37.486l-2.631 2.939a3.7 3.7 0 0 1-.492.437 1.7 1.7 0 0 1-.581.28 2.7 2.7 0 0 1-.76.096zm.328-1.326h3.528q.32 0 .52-.055a.86.86 0 0 0 .355-.17 2.6 2.6 0 0 0 .341-.315l2.359-2.611q.206-.226.266-.417.069-.198.069-.574v-2.81q0-.383-.069-.574a1.2 1.2 0 0 0-.266-.417L12.98 4.56a2.6 2.6 0 0 0-.341-.315.9.9 0 0 0-.356-.178 2 2 0 0 0-.52-.054H8.237q-.322 0-.526.054a1 1 0 0 0-.362.178q-.15.116-.328.315L4.654 7.17q-.197.226-.266.418t-.069.574v2.81q0 .376.069.574.068.19.266.417l2.366 2.611q.177.198.328.315a.9.9 0 0 0 .362.17q.205.055.526.055Zm1.77-4.416q-.593 0-.614-.601l-.096-3.323a.61.61 0 0 1 .184-.492.7.7 0 0 1 .513-.191q.315 0 .52.198.204.192.191.485l-.11 3.323q-.012.6-.587.601Zm0 2.27a.84.84 0 0 1-.573-.212.71.71 0 0 1-.233-.54.69.69 0 0 1 .233-.533.82.82 0 0 1 .574-.22q.328 0 .56.213a.69.69 0 0 1 .24.54.69.69 0 0 1-.24.54.82.82 0 0 1-.56.212Z"})})},59976:(e,t,a)=>{a.d(t,{b:()=>i});var s=()=>a(645873);const n=new(s().O2)("time-series",(async()=>await Promise.resolve().then(a.bind(a,968526)))),i=(0,s()._h)(n,(e=>e.TimeSeries))},63964:(e,t,a)=>{a.d(t,{A:()=>W});var s=a(296540),n=()=>a(56366),i=()=>a(401497),o=()=>a(591779),r=()=>a(301608),l=()=>a(959013),d=()=>a(284371),c=()=>a(972435),u=()=>a(836251),g=()=>a(962730),m=()=>a(859428),p=()=>a(125565),h=()=>a(690197),f=()=>a(733815),x=()=>a(452864),v=(a(16280),a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(581454),()=>a(484714)),y=()=>a(416845),b=()=>a(436604),S=()=>a(496603),j=()=>a(76590),w=()=>a(449506),A=()=>a(898486);const M={field:"num_searches",direction:"desc"},C=a(593467).Jb,I={sort:M,timeRange:C,searchAnalyticsDataList:[],numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};a(898992),a(354520);var T=()=>a(534177),k=()=>a(994776),_=()=>a(641300),D=()=>a(760217),z=()=>a(364280),P=()=>a(331542),N=()=>a(554509),R=()=>a(89924),B=()=>a(500861),L=()=>a(882690),E=a(474848);const O=(0,l().YK)({numSearches:{id:"workspaceAnalytics.searchTab.searchTable.searches.tooltip",defaultMessage:"Number of times users in the workspace have searched the query"},numUniqueUsers:{id:"workspaceAnalytics.searchTab.searchTable.uniqueSearches.tooltip",defaultMessage:"Total number of users that have searched the query"},ctr:{id:"workspaceAnalytics.searchTab.searchTable.ctr.tooltip",defaultMessage:"Percentage of times users have opened page from results of this query"}}),U=(0,l().YK)({queryText:{id:"spaceAnalyticsSearchTable.column.query",defaultMessage:"Query"},numSearches:{id:"spaceAnalyticsSearchTable.column.searches",defaultMessage:"Searches"},numUniqueUsers:{id:"spaceAnalyticsSearchTable.column.uniqueSearches",defaultMessage:"Unique searches"},ctr:{id:"spaceAnalyticsSearchTable.column.ctr",defaultMessage:"Click-through rate"}});function F(e){let{searchAnalyticsDataList:t,runNewSearch:a,sort:o,setSort:d,loadNextPage:u,loading:g,error:m,dateFilterProps:h}=e;const f=(0,s.useMemo)((()=>function(e){const{dateFilterProps:t}=e;return{queryText:{id:"queryText",headerTitle:(0,E.jsxs)(z().fI,{gap:8,alignItems:"center",children:[c().A.formatMessage(U.queryText),t?(0,E.jsx)(H,{currentFilter:t.currentFilter,onChangeFilter:t.onChangeFilter}):null]}),renderCell:e=>(0,E.jsx)(p().A,{children:e.queryText}),widthData:{width:200,maxWidth:300},sortable:!1},numSearches:{id:"numSearches",headerTitle:(0,E.jsx)(L().Z,{tooltipMessageDescriptor:O.numSearches,columnHeader:U.numSearches}),renderCell:e=>(0,E.jsx)(V,{value:e.numSearches}),widthData:{width:120,maxWidth:120},sortable:!0},numUniqueUsers:{id:"numUniqueUsers",headerTitle:(0,E.jsx)(L().Z,{tooltipMessageDescriptor:O.numUniqueUsers,columnHeader:U.numUniqueUsers}),renderCell:e=>(0,E.jsx)(V,{value:e.numUniqueUsers}),widthData:{width:120,maxWidth:120},sortable:!0},ctr:{id:"ctr",headerTitle:(0,E.jsx)(L().Z,{tooltipMessageDescriptor:O.ctr,columnHeader:U.ctr}),renderCell:e=>(0,E.jsx)(V,{value:Math.round(1e3*e.ctr)/1e3,isPercentage:!0}),widthData:{width:120,maxWidth:120},sortable:!0}}}({dateFilterProps:h})),[h]),x=(0,T().uv)(f).map((e=>f[e])),v=(0,n().K8)((()=>t.map((e=>({id:e.queryText,isClickable:!1,...e})))),[t]),y=(0,s.useMemo)((()=>function(e,t){const a=r().tV[t.field];if(!a)return;const s=e[a];return{column:s,sortAscending:"asc"===t.direction}}(f,o)),[f,o]),b=(0,i().IS)((e=>(0,_().rC)({columnRenderInfo:x,theme:e,containerMarginTop:0})),[x]),S=(0,i().IS)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return m?(0,E.jsx)(k().t,{error:m,runNewSearch:a}):(0,E.jsxs)("div",{children:[(0,E.jsx)(_().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:x,rows:v,sortState:y,onSortStateChanged:e=>{d(function(e){const t=r().Bt[e.column.id],a=e.sortAscending?"asc":"desc";if(!t)return{field:"num_searches",direction:a};return{field:t,direction:a}}(e))},loadMoreMethod:{type:"scroll",onLoadMore:u},renderNoRowsComponent:()=>(0,E.jsx)(p().A,{isSmall:!0,style:S.emptyQuery,children:!g&&0===t.length&&(0,E.jsx)(l().sA,{id:"settings.workspaceAnalytics.searchTable.table.empty",defaultMessage:"No search query analytics to display."})}),styles:b}),g?(0,E.jsx)(P().A,{style:S.loadingSpinner}):null]})}function V(e){let{value:t,isPercentage:a}=e;const s=(0,i().IS)((e=>({centered:{width:"100%",textAlign:"center"}})),[]),n=a?`${t}%`:t;return(0,E.jsx)(p().A,{style:s.centered,children:n})}function H(e){return(0,E.jsx)(B().A,{selectedTitle:(0,E.jsx)(N().D,{styleName:"UISmall-12px/Regular",children:c().A.formatMessage(r().jy[e.currentFilter])}),renderMenuSections:t=>[{key:"day_filter_selector",render:e=>(0,E.jsx)(R().A,{...e}),items:r().jf.filter((e=>"all_time"!==e)).map((a=>({key:a,action:()=>{},render:()=>(0,E.jsx)(D().A,{focused:!1,onClick:()=>{e.onChangeFilter(a),t.close()},title:(0,E.jsx)(N().D,{styleName:"UISmall-12px/Regular",children:c().A.formatMessage(r().jy[a])})})})))}]})}function W(e){const{spaceStore:t,hideHeader:a=!1}=e,T=(0,i().IS)((()=>({header:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",marginBottom:16},sectionTitle:{fontWeight:d().Wy.semibold,fontSize:16,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4}})),[]),k=(0,s.useRef)(!1),{searchAnalyticsDataList:_,timeRange:D,sort:z,loading:P,error:N,loadNextPage:R,runNewSearch:B,setTimeRange:L,setSort:O}=function(e){let{spaceStore:t}=e;const a=(0,v().v3)(),[n,i]=(0,s.useState)(I),o=(0,s.useRef)(M),r=(0,s.useRef)(C),d=(0,l().tz)(),c=(0,s.useCallback)((async e=>{let{fetchFromFirstPage:s,ignoreSearchInputComparison:l}=e;const d=!S().n4(n.sort,o.current)||!S().n4(n.timeRange,r.current);if(!l&&!d)return;o.current=n.sort,r.current=n.timeRange;let c=n.loading,u=n.error,g=n.hasNextPage,m=n.paginationToken;if(s&&(i((e=>({...I,timeRange:e.timeRange,sort:e.sort}))),c=I.loading,u=I.error,g=I.hasNextPage,m=I.paginationToken),!g||c)return;if(u)return;i((e=>({...e,loading:!0})));const p=await w().callApi({eventName:"loadSearchAnalytics",environment:a,data:{spaceId:t.id,sort:n.sort,timeRange:n.timeRange,startCursor:m},headers:{[b().B3]:t.id}});if("failed"===p.type)return void i((e=>({...e,loading:!1,error:p})));const h=p.data.results;i((e=>{const t=[],a=new Set(e.searchAnalyticsDataList.map((e=>e.queryText)));for(const n of h){const e=n.queryText;a.has(e)||(t.push(n),a.add(e))}const s=[...e.searchAnalyticsDataList,...t];return{...e,searchAnalyticsDataList:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:p.data.nextCursor,hasNextPage:Boolean(p.data.nextCursor)}}))}),[a,t,n.sort,n.timeRange,n.loading,n.error,n.hasNextPage,n.paginationToken]);(0,s.useEffect)((()=>{n.shouldReRunSearch&&(i((e=>({...e,shouldReRunSearch:!1}))),c({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[n.shouldReRunSearch,c]);const u=(0,s.useCallback)((async()=>{n.shouldReRunSearch||await c({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[n.shouldReRunSearch,c]),g=(0,s.useCallback)((async e=>{await c({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[c]),m=(0,s.useCallback)((e=>{"all_time"!==e&&(i((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),j().kJ(a,{daysFilter:e}))}),[a]),p=(0,s.useCallback)((e=>{i((t=>({...t,sort:e,shouldReRunSearch:!0}))),j().G4(a,{column:e.field,isAscending:"asc"===e.direction})}),[a]),h=(0,s.useMemo)((()=>{if(n.error)return 404===n.error.status?new(y().m_)({message:(0,A().Hu)(d,n.error)}):new Error((0,A().Hu)(d,n.error))}),[n.error,d]);return{...n,error:h,loadNextPage:u,runNewSearch:g,setTimeRange:m,setSort:p}}({spaceStore:t}),U=(0,o().ZC)(t.id),V=(0,s.useMemo)((()=>void 0!==U&&t.id!==U),[t.id,U]);(0,s.useEffect)((()=>{k.current&&!V||(B(!0),k.current=!0)}),[B,V]);const H=(0,n().K8)((()=>t.getName()),[t]);return"NotFoundError"===(null==N?void 0:N.name)?(0,E.jsx)(x().H,{type:"empty",spaceName:H}):(0,E.jsxs)(E.Fragment,{children:[a?null:(0,E.jsxs)("div",{style:T.header,children:[(0,E.jsxs)(p().A,{style:T.sectionTitle,children:[(0,E.jsx)(l().sA,{id:"settings.workspaceAnalytics.searchTab.searchQueries.title",defaultMessage:"Search queries"}),(0,E.jsx)(m().A,{placement:g().W.Bottom,render:e=>(0,E.jsx)(h().A,{...e,href:(0,u().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:T.helpInfo}),renderTooltip:()=>(0,E.jsx)(l().sA,{id:"settings.workspaceAnalytics.searchTab.searchQueries.tooltip",defaultMessage:"Displays popular search queries in the workspace from the {dateRange}",values:{dateRange:c().A.formatMessage(r().Yr[D])}})})]}),(0,E.jsx)(f().Z,{currentFilter:D,onChangeFilter:L,hideAllTime:!0})]}),(0,E.jsx)(F,{searchAnalyticsDataList:_,runNewSearch:B,sort:z,setSort:O,loadNextPage:R,loading:P,error:N,dateFilterProps:a?{currentFilter:D,onChangeFilter:L}:void 0})]})}},73514:(e,t,a)=>{a.d(t,{C:()=>n});a(296540);var s=a(474848);const n=(0,a(340498).wt)("analyticsSearch",{viewBox:"0 0 51 52",svg:(0,s.jsx)("path",{d:"M.414 21.297c0 2.86.533 5.543 1.6 8.049a21.156 21.156 0 004.468 6.576 20.797 20.797 0 006.577 4.443c2.505 1.067 5.18 1.6 8.023 1.6 2.116 0 4.13-.305 6.043-.914a21.55 21.55 0 005.332-2.565l11.654 11.655a3.44 3.44 0 001.245.812c.473.186.964.28 1.472.28.728 0 1.371-.17 1.93-.508a3.48 3.48 0 001.32-1.346 3.887 3.887 0 00.482-1.93 3.8 3.8 0 00-.279-1.447 3.126 3.126 0 00-.787-1.193l-11.578-11.63a20.414 20.414 0 002.818-5.51c.694-2.013 1.041-4.138 1.041-6.372 0-2.844-.541-5.51-1.625-7.998a20.718 20.718 0 00-4.443-6.602 20.515 20.515 0 00-6.602-4.468c-2.488-1.067-5.162-1.6-8.023-1.6-2.844 0-5.518.533-8.023 1.6a20.592 20.592 0 00-6.577 4.468A21.072 21.072 0 002.014 13.3c-1.067 2.488-1.6 5.154-1.6 7.998zm5.408 0c0-2.1.39-4.071 1.168-5.916a15.517 15.517 0 013.301-4.875 15.168 15.168 0 014.875-3.276c1.845-.795 3.817-1.193 5.916-1.193 2.116 0 4.096.398 5.941 1.193a14.877 14.877 0 014.85 3.276 15.515 15.515 0 013.3 4.875c.796 1.845 1.194 3.817 1.194 5.916 0 2.116-.398 4.096-1.193 5.941a15.517 15.517 0 01-3.301 4.875 15.426 15.426 0 01-4.85 3.276c-1.845.795-3.825 1.193-5.941 1.193-2.099 0-4.07-.398-5.916-1.193a15.737 15.737 0 01-4.875-3.276 15.52 15.52 0 01-3.3-4.875c-.78-1.845-1.169-3.825-1.169-5.941zm15.31 10.36c.458 0 .746-.263.864-.788.237-1.32.474-2.437.711-3.351.254-.931.559-1.693.914-2.286a4.554 4.554 0 011.397-1.498c.575-.389 1.311-.694 2.209-.914.914-.237 2.056-.448 3.427-.634.542-.085.813-.381.813-.89 0-.507-.271-.812-.813-.913-1.354-.17-2.496-.373-3.427-.61-.915-.253-1.668-.567-2.26-.939a4.814 4.814 0 01-1.422-1.498c-.373-.61-.677-1.363-.914-2.26a42.337 42.337 0 01-.635-3.326c-.084-.542-.372-.813-.863-.813s-.796.263-.914.788a53.724 53.724 0 01-.737 3.377c-.22.914-.507 1.675-.863 2.285a4.64 4.64 0 01-1.396 1.472c-.576.373-1.32.677-2.235.914-.914.22-2.048.424-3.402.61-.559.101-.838.406-.838.914 0 .49.28.787.838.889 1.693.186 3.055.44 4.088.761 1.032.305 1.828.762 2.387 1.371.575.61 1.015 1.44 1.32 2.489.305 1.05.584 2.395.838 4.037a1 1 0 00.279.584c.17.152.38.228.635.228z"})})},76590:(e,t,a)=>{a.d(t,{$s:()=>g,G4:()=>f,Jv:()=>r,Jy:()=>o,PH:()=>m,TJ:()=>l,Tm:()=>u,Wt:()=>p,Y5:()=>d,kJ:()=>h,lP:()=>c,n_:()=>n,wy:()=>i});var s=()=>a(989423);function n(e,t){s().vd(e,"overview_analytics_filter_change",t)}function i(e,t){s().vd(e,"user_analytics_engagement_timerange_filter_change",t)}function o(e,t){s().vd(e,"user_analytics_table_filter_change",t)}function r(e,t){s().vd(e,"user_analytics_table_sort_change",t)}function l(e,t){s().vd(e,"user_analytics_export_requested",t)}function d(e,t){s().vd(e,"content_analytics_engagement_timerange_filter_change",t)}function c(e,t){s().vd(e,"content_analytics_export_requested",t)}function u(e,t){s().vd(e,"content_analytics_table_filter_change",t)}function g(e,t){s().vd(e,"content_analytics_table_timerange_filter_change",t)}function m(e,t){s().vd(e,"content_analytics_table_sort_change",t)}function p(e,t){s().vd(e,"workspace_analytics_tab_click",t)}function h(e,t){s().vd(e,"search_analytics_table_timerange_filter_change",t)}function f(e,t){s().vd(e,"search_analytics_table_sort_change",t)}},83489:(e,t,a)=>{a.d(t,{H:()=>s});const s=(0,a(340498).xh)("infoCircle",{default:{loader:()=>a.e(29288).then(a.bind(a,829288))},small:{loader:()=>a.e(81438).then(a.bind(a,781438))},mini:{loader:()=>a.e(16742).then(a.bind(a,16742))},large:{loader:()=>a.e(29750).then(a.bind(a,29750))}})},83842:(e,t,a)=>{a.r(t),a.d(t,{AccessLevelSection:()=>Z,SidebarCreateTeamModal:()=>ae,TeamDescriptionRow:()=>q,TeamIconAndNameRow:()=>Y});a(581454);var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(401497),r=()=>a(148307),l=()=>a(66913),d=()=>a(652631),c=()=>a(959013),u=()=>a(496603),g=()=>a(534177),m=()=>a(284371),p=()=>a(946141),h=()=>a(704152),f=()=>a(623580),x=()=>a(545805),v=()=>a(331542),y=()=>a(957986),b=()=>a(125565),S=()=>a(453697),j=()=>a(101919),w=()=>a(972435),A=()=>a(437622),M=()=>a(37433),C=()=>a(456663),I=()=>a(351360),T=()=>a(630116),k=()=>a(205618),_=()=>a(714300),D=()=>a(848237),z=()=>a(204063),P=()=>a(213525),N=()=>a(10984),R=()=>a(475355),B=()=>a(812941),L=a(474848);function E(){const e=(0,n().v3)(),{currentSpaceStore:t,spaceViewStore:a}=(0,i().K8)((()=>({currentSpaceStore:I().default.state.currentSpaceStore,spaceViewStore:I().default.state.currentSpaceViewStore})),[]),r=(0,i().K8)((()=>{var e;return null===(e=I().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),l=(0,_().l)({spaceId:r}),d=(0,i().O$)(C().A),m=(0,M().Gt)(l),p=function(){const e=(0,i().K8)((()=>N().El()&&!C().A.state.isDefault),[]),t=C().o.Team,a=C().o.Members;return e?[t,a]:[t]}(),{screen:h,pageNumber:f,teamId:x}=d,v=""===d.name,y=(0,o().IS)((e=>({box:{justifyContent:"space-between",alignItems:"center",display:"flex",width:"100%",paddingTop:22},button:{marginLeft:8},previous:{fontSize:14,color:e.mediumTextColor,cursor:"pointer"},learnMoreLink:{overflow:"hidden"}})),[]),b=(0,s.useCallback)(((a,s)=>{t&&function(e){let{pageOrder:t,pageNumber:a,teamId:s,currentSpaceStore:n,environment:i,from:o}=e;const r=a+1;if(r<=t.length)C().A.update((e=>({...e,loading:!1,screen:t[r-1],pageNumber:r})));else if(s){const e=T().h4.createChildStore(n,{table:"team",id:s,spaceId:n.id});D().L0({environment:i,teamStore:e,shouldScroll:!0}),D().lJ({environment:i,from:o,teamStore:e})}}({pageOrder:p,pageNumber:f,teamId:s||x,currentSpaceStore:t,environment:e,from:a})}),[t,e,f,p,x]),S=u().sg((async()=>{if(!t||!a)return;let s=x;switch(h){case C().o.Team:s=await async function(e){var t;let{spaceStore:a,environment:s,shouldShowZeroTeamsExperience:n,sidebarCreateTeamModalStoreState:i}=e;const{name:o,description:r,icon:l,flowId:d,accessLevel:c,isDefault:u}=i,g=await(0,P().d$)({environment:s,spaceStore:a,teamName:o});if(!g)return;let m;C().A.update((e=>({...e,loading:!0}))),m=n?await R().oH({environment:s,name:o,description:r,icon:l,flowId:d,trackCreateTeamComplete:!0}):await R().gj({environment:s,name:o,description:r,icon:l,accessLevel:c,isDefault:u,flowId:d,createTeamHome:!0});if(!m)return;const p=null===(t=m)||void 0===t?void 0:t.id;return C().A.update((e=>({...e,teamId:p}))),p}({spaceStore:t,environment:e,shouldShowZeroTeamsExperience:m,sidebarCreateTeamModalStoreState:d});break;case C().o.Members:break;default:(0,g().HB)(h)}s?b("success",s):C().A.update((e=>({...e,loading:!1})))}),1e3,{leading:!0,trailing:!1}),j=(0,s.useCallback)(S,[S]);return(0,L.jsxs)("div",{style:y.box,children:[(0,L.jsx)(B().A,{containerStyle:y.learnMoreLink,helpCenterLocation:"bestPractices",analyticsFrom:"teams_learn_more_sidebar_create_team_modal"}),(0,L.jsx)("div",{style:{display:"inline-flex"},children:(0,L.jsx)(z().A,{size:"lg",onClick:j,disabled:v,style:y.button,children:(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.footer.createTeam",defaultMessage:"Create teamspace"})})})]})}var O=()=>a(144707),U=()=>a(284331),F=()=>a(898808);const V={userSelect:"none",WebkitUserSelect:"none",position:"relative",padding:"22px 26px"},H={createTeamContainer:{...V,width:480},addMembersContainer:{...V,width:500},full:{width:"100%"}},W=(0,c().YK)({teamNamePlaceholder:{id:"sidebarCreateTeamModal.teamScreen.namePlaceholder",defaultMessage:"Acme Labs"},teamDescriptionPlaceholder:{id:"sidebarCreateTeamModal.teamScreen.descriptionPlaceholder",defaultMessage:"Details about your teamspace"}});function q(){const e=(0,i().K8)((()=>C().A.state.description),[]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(j().A,{hasMarginTop:!0,children:(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.teamScreen.teamDescriptionLabel",defaultMessage:"Description"})}),(0,L.jsx)(f().A,{value:e,placeholder:w().A.formatMessage(W.teamDescriptionPlaceholder),textarea:!0,onChange:e=>{C().A.update((t=>({...t,description:e.target.value})))}})]})}function G(e){return(0,L.jsx)("div",{id:e.titleAriaId,style:{fontSize:18,fontWeight:m().Wy.semibold},children:(()=>{switch(e.screen){case C().o.Team:return(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.teamTitle.label",defaultMessage:"Create a new teamspace"});case C().o.Members:return(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.membersTitle.label",defaultMessage:"Add people"});default:(0,g().HB)(e.screen)}})()})}function K(e){const t=(0,n().v3)(),{screen:a,teamId:o}=(0,i().K8)((()=>{const{screen:e,teamId:t}=C().A.state;return{screen:e,teamId:t}}),[]),r=(0,s.useCallback)(((e,a)=>{D().lJ({environment:t,from:a,teamStore:e})}),[t]);switch(a){case C().o.Team:return(0,L.jsx)($,{titleAriaId:e.titleAriaId,descriptionAriaId:e.descriptionAriaId,parentSpaceStore:e.parentSpaceStore});case C().o.Members:return o?(0,L.jsx)(J,{teamId:o,onCompleted:e=>{r(e,"success")},onCanceled:e=>{r(e,"dismiss_button")}}):null;default:(0,g().HB)(a)}}function Y(e){let{parentSpaceStore:t}=e;const a=(0,i().K8)((()=>t??I().default.state.currentSpaceStore),[t]),{icon:s,name:n}=(0,i().K8)((()=>{const{icon:e,name:t}=C().A.state;return{icon:e,name:t}}),[]),r=(0,o().IS)((e=>({container:{display:"inline-flex",width:"100%",verticalAlign:"middle"},icon:{marginRight:8,marginTop:1}})),[]);if(!a)return null;const l=s?{icon:s,pointer:{table:"space",id:a.id}}:void 0;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(j().A,{hasMarginTop:!0,children:(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.teamScreen.teamNameLabel",defaultMessage:"Icon & name"})}),(0,L.jsxs)("div",{style:r.container,children:[(0,L.jsx)(F().x,{icon:l,size:26,style:r.icon,onChange:e=>{C().A.update((t=>({...t,icon:e})))},iconLoggingData:{recordTable:"team",source:"team_creation"},parentSpaceStore:t}),(0,L.jsx)(f().A,{value:n,placeholder:w().A.formatMessage(W.teamNamePlaceholder),onChange:e=>{C().A.update((t=>({...t,name:e.target.value})))},preventSafariAutofill:!0})]})]})}function Q(e){const t=(0,o().IS)((()=>({description:{marginTop:3,marginBottom:26}})),[]);return(0,L.jsx)(b().A,{id:e.descriptionAriaId,isMultiline:!0,isSmall:!0,isSecondaryColor:!0,style:t.description,children:(()=>{switch(e.screen){case C().o.Team:return(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.teamDescription.label",defaultMessage:"Teamspaces are where your team organizes pages, permissions, and members"});case C().o.Members:return null;default:(0,g().HB)(e.screen)}})()})}function $(e){const t=(0,n().v3)(),{open:a,from:o,flowId:r}=(0,i().K8)((()=>{const e=C().A.state;return{open:e.open,from:e.open?e.from:void 0,flowId:e.flowId}}),[]);return(0,s.useEffect)((()=>{a&&o&&p().H8(t,{from:o,flowId:r})}),[]),(0,L.jsxs)("div",{style:H.createTeamContainer,children:[(0,L.jsx)(G,{titleAriaId:e.titleAriaId,screen:C().o.Team}),(0,L.jsx)(Q,{descriptionAriaId:e.descriptionAriaId,screen:C().o.Team}),(0,L.jsxs)("div",{style:H.full,children:[(0,L.jsx)(Y,{parentSpaceStore:e.parentSpaceStore}),(0,L.jsx)(q,{}),(0,L.jsx)(Z,{parentSpaceStore:e.parentSpaceStore})]}),(0,L.jsx)(E,{})]})}function X(){const e=(0,i().K8)((()=>C().A.state.loading),[]),t=(0,o().IS)((e=>({spinner:{width:"100%",height:"100%",backgroundColor:e.modalUnderlayBackground,position:"absolute",top:0,left:0}})),[]);return(0,L.jsx)(L.Fragment,{children:e&&(0,L.jsx)("div",{style:t.spinner,children:(0,L.jsx)(v().A,{style:{position:"absolute",top:"50%",left:"50%"}})})})}function Z(e){let{parentSpaceStore:t}=e;const a=(0,o().IS)((e=>({openAccessMessage:{fontSize:13,color:e.mediumTextColor,marginTop:20,lineHeight:1.4,display:"flex"},iconContainer:{marginRight:8},openTeamIcon:{width:24,fill:e.mediumIconColor},teamAccessPopupContainer:{marginTop:20}})),[]),s=(0,_().l)({spaceId:null==t?void 0:t.id}),r=(0,M().Gt)(s),l=(0,n().v3)(),u=(0,i().K8)((()=>{const e=t??I().default.state.currentSpaceStore;return e?(0,A().GK)(l,e):"this workspace"}),[l,t]),{accessLevel:g,isDefault:m}=(0,i().K8)((()=>{const{accessLevel:e,isDefault:t}=C().A.state;return{accessLevel:e,isDefault:t}}),[]);return r?(0,L.jsxs)("div",{style:a.openAccessMessage,children:[(0,L.jsx)("div",{style:a.iconContainer,children:(0,d().X)(a.openTeamIcon)}),(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.teamScreen.openAccessLabel",defaultMessage:"Everyone at {spaceName} and new members will have access to this teamspace",values:{spaceName:u}})]}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(j().A,{hasMarginTop:!0,children:(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.teamScreen.permissionsLabel",defaultMessage:"Permissions"})}),(0,L.jsx)(O().u,{currentAccessLevel:g,currentIsDefault:m,onChange:(e,t)=>{t?C().A.update((e=>({...e,accessLevel:"open",isDefault:t}))):C().A.update((a=>({...a,accessLevel:e,isDefault:t})))},parentSpaceStore:t})]})}function J(e){const t=(0,n().v3)(),a=(0,i().uB)(void 0,k().A);(0,i().K8)((()=>{const{defaultInviteTargets:e,flowId:t}=C().A.state;a.setState({...a.state,flowId:t}),e&&a.setState({...a.state,isInviteTargetsEmpty:!1,inviteTargets:e})}),[a]);const s=(0,i().K8)((()=>e.parentSpaceStore??I().default.state.currentSpaceStore),[e.parentSpaceStore]);if(!s)return null;const o=T().h4.createChildStore(s,{table:"team",id:e.teamId,spaceId:s.id});return(0,L.jsx)("div",{style:H.full,children:(0,L.jsx)("div",{style:H.addMembersContainer,children:(0,L.jsx)(U().A,{store:o,permissionsInviteStore:a,isNewlyCreatedTeam:!0,onSubmitSuccessful:()=>{e.onCompleted(o),D().L0({environment:t,teamStore:o,shouldScroll:!0})},onDismiss:()=>{e.onCanceled(o)}})})})}const ee=[r().A.images.avatars.avatar1Png,r().A.images.avatars.avatar2Png,r().A.images.avatars.avatar3Png];function te(e){let{handleModalClose:t}=e;const a=(0,o().IS)((e=>({container:{borderTopLeftRadius:5,borderTopRightRadius:5,background:e.inputBackground,boxShadow:e.inputBoxShadow},header:{display:"flex",padding:14,fontWeight:m().Wy.medium},avatarGroup:{display:"flex",width:"100",marginLeft:4,alignSelf:"center"},avatar:{marginLeft:-4},message:{paddingLeft:14,paddingRight:14},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor}})),[]);return(0,L.jsx)("div",{style:a.container,children:(0,L.jsxs)("div",{style:a.header,children:[(0,L.jsx)("div",{style:a.avatarGroup,children:ee.map(((e,t)=>(0,L.jsx)(S().A,{avatarShouldShowShadow:!0,style:a.avatar,size:28,avatar:{avatarUrl:e}},t)))}),(0,L.jsx)(b().A,{style:a.message,isMultiline:!0,isSmall:!0,children:(0,L.jsx)(c().sA,{id:"sidebarCreateTeamModal.teamScreen.firstTeamHeader",defaultMessage:"Create your first teamspace to start using Notion with your teammates"})}),(0,L.jsx)(h().A,{onClick:t,style:a.closeButton,hoveredStyle:a.closeButtonHover,children:(0,l().V)(a.closeButtonIcon)})]})})}function ae(e){let{parentSpaceStore:t}=e;const a=(0,n().v3)(),r=(0,s.useId)(),d=(0,s.useId)(),c=(0,o().IS)((e=>({modal:{maxWidth:500,borderRadius:5,overflow:"visible"},closeButton:{position:"absolute",top:14,right:14,zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:14,fill:e.mediumTextColor},wrapper:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none"},container:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none"}})),[]),g=(0,s.useCallback)((e=>{D().lJ({environment:a,from:e})}),[a]),{open:m,loading:p,screen:f}=(0,i().K8)((()=>{const{open:e,loading:t,screen:a}=C().A.state;return{open:e,loading:t,screen:a}}),[]),v=(0,_().l)({spaceId:null==t?void 0:t.id}),b=(0,M().Gt)(v),S=(0,s.useRef)(b);return(0,s.useEffect)((()=>{p||(S.current=b&&f===C().o.Team)}),[p,f,b]),m?(0,L.jsx)(y().A,{ariaLabelledBy:r,ariaDescribedBy:d,open:m,innerStyle:c.modal,onDismiss:()=>{g("modal")},render:()=>{const{device:e}=a;return(0,L.jsxs)("div",{style:{height:"100%"},children:[!e.isMobile&&(S.current?(0,L.jsx)(te,{handleModalClose:()=>{g("close_button")}}):(0,L.jsx)(h().A,{onClick:()=>{g("close_button")},style:c.closeButton,hoveredStyle:c.closeButtonHover,children:(0,l().V)(c.closeButtonIcon)})),(0,L.jsx)("div",{style:c.wrapper,children:(0,L.jsx)(x().A,{debugName:"SidebarCreateTeamModal",capture:!0,onBackspace:u().D_,onLeft:u().D_,onRight:u().D_,onSelectAll:u().D_,onRedo:u().D_,onUndo:u().D_,onCut:u().D_,onCopy:u().D_,onPaste:u().D_,onKeypress:u().D_,onDelete:u().D_,onTab:u().D_,children:(0,L.jsx)(K,{titleAriaId:r,descriptionAriaId:d,parentSpaceStore:t})})}),(0,L.jsx)(X,{})]})}}):null}},87043:(e,t,a)=>{a.d(t,{Ev:()=>P,Bj:()=>N,Ay:()=>F});var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(401497),r=()=>a(584262),l=()=>a(142748),d=()=>a(433847),c=()=>a(68263),u=()=>a(179034),g=()=>a(519831),m=()=>a(854150),p=()=>a(959013),h=()=>a(100622),f=()=>a(534177),x=()=>a(761652),v=()=>a(296798),y=()=>a(125565),b=()=>a(912913),S=()=>a(492414),j=()=>a(299545),w=()=>a(976721),A=()=>a(632709),M=()=>a(630116),C=()=>a(848237),I=()=>a(265665),T=()=>a(484578),k=()=>a(663590),_=()=>a(623275),D=a(474848);const z=function(e){const{store:t,isDisabled:a,isCurrentUserPermission:s}=e;return a?s?(0,D.jsx)(p().sA,{defaultMessage:"Your access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.tooltip",values:{inlineIconAndName:(0,D.jsx)(x().A,{store:t,useInvertedColors:!0})}}):(0,D.jsx)(p().sA,{defaultMessage:"This access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissions.tooltip",values:{inlineIconAndName:(0,D.jsx)(x().A,{store:t,useInvertedColors:!0})}}):s?(0,D.jsx)(p().sA,{defaultMessage:"Your access is based on {inlineIconAndName}. Changing your access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.canEdit.tooltip",values:{inlineIconAndName:(0,D.jsx)(x().A,{store:t,useInvertedColors:!0,maxLength:26})}}):(0,D.jsx)(p().sA,{defaultMessage:"This access is based on {inlineIconAndName}. Changing this access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissions.canEdit.tooltip",values:{inlineIconAndName:(0,D.jsx)(x().A,{store:t,useInvertedColors:!0,maxLength:26})}})},P=32,N=40,R=(0,p().YK)({fromLinkBox:{defaultMessage:"From {linkBoxWithPageTitle}",id:"pagePermissionItem.fromInheritedRecordPermissions.setting"}});function B(e){const{from:t,store:r,onClick:l,permissionItem:d,ignoreLocalHoverState:c,nonInheritedTooltip:p,inheritedTooltip:h,shouldDisable:x,isCollapsible:v,openRoleSelectMenuOnRender:y}=e,b=(0,n().Y0)(),S=(0,n().v3)(),j=(0,i().uB)(void 0,a(463830).A),w=(0,i().K8)((()=>{const e=t.table;return e===u().ev?M().Bv.createChildStore(r,{table:u().ev,id:t.blockId}):e===m().yK?M().h4.createChildStore(r,{table:m().yK,id:t.teamId}):e===g().Vl?M().md.createChildStore(r,{table:g().Vl,id:t.collectionId}):void(0,f().HB)(e)}),[t,r]),A=(0,i().K8)((()=>(0,k().FI)()),[]),[C,I]=(0,s.useState)(!1),P=(0,s.useCallback)((()=>{j.setState({...j.state,open:!0}),I(!0)}),[j]),N=(0,s.useCallback)((()=>{I(!1)}),[]);(0,s.useEffect)((()=>{y&&!j.state.open&&requestAnimationFrame((()=>{P()}))}),[y,P,j]);const R=A&&C,B=(0,i().K8)((()=>x||(0,T().dK)({permissionItem:d,store:r})),[x,d,r]),E=(0,i().K8)((()=>w.id!==r.id),[w,r]),O=(0,a(649145).L)((e=>{l?l(e):B||j.setState({...j.state,open:!0})}),[j,l,B],a(753199).y$.PermissionItemClick),U=(0,i().K8)((()=>{const e=S.currentUser.id;return"user_permission"===d.type&&d.user_id===e}),[S,d]),F=(0,i().K8)((()=>R?null:A?E?h||(0,D.jsx)(z,{store:w,isDisabled:B,isCurrentUserPermission:U}):p:(0,T().YY)(d)||(0,T().rC)(d)?null:E?(0,D.jsx)(z,{store:w,isDisabled:B,isCurrentUserPermission:U}):p),[A,d,E,p,h,w,B,U,R]),V=(0,o().IS)((t=>{const a=A?{...(0,_().wo)({isMobile:b.isMobile}),...e.menuListItemProps?{width:"unset"}:{}}:{};return{disabledButton:{...a,cursor:"not-allowed"},button:a,pressedButton:{background:t.buttonPressedBackgroundLight},tooltip:{maxWidth:240}}}),[b.isMobile,A,e.menuListItemProps]);return(0,D.jsx)(a(859428).A,{delayThreshold:0,renderTooltip:()=>F,textWrap:!0,disableTooltip:!Boolean(F)||R,forceRenderTooltipPopupComponent:A&&Boolean(F),style:V.tooltip,render:t=>{const s=(0,a(553965).A)(t,{onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave});return e.menuListItemProps?(0,D.jsx)(a(760217).A,{...e.menuListItemProps,onClick:O,disabled:B,ignoreLocalHoverState:c,pressed:!1,buttonStyle:B&&!A?V.disabledButton:V.button,textWrapperStyle:{marginLeft:0,marginRight:0},style:{padding:0},title:(0,D.jsx)(L,{...e,isDisabled:B,fromStore:w,buttonPopupStore:j,isInherited:E,onOpenMenu:P,onClose:N}),...s}):(0,D.jsx)(a(704152).A,{disabled:B&&!v,mobileFeedback:b.isMobile,ignoreLocalHoverState:c,style:B&&!A?V.disabledButton:V.button,pressedStyle:A?V.pressedButton:void 0,onClick:O,...s,children:(0,D.jsx)(L,{...e,isDisabled:B,fromStore:w,buttonPopupStore:j,isInherited:E,onOpenMenu:P,onClose:N})})},placement:a(962730).W.Left})}function L(e){const{permissionItem:t,fromStore:a,isCompact:r,iconStyle:l,icon:d,title:c,tag:u,subtitle:g,showInherited:m,isInherited:p,permissionRoleSelect:h,hideRoleSelectButton:x,renderTitleWithoutUILabelWrapper:v,onClose:b,style:S}=e,j=(0,n().v3)(),w=j.device.isMobile,A=(0,i().K8)((()=>function(e){return"user_permission"===e.type}(t)),[t]),C=(0,i().K8)((()=>(0,k().FI)()),[]),{paddingLeft:T,paddingRight:z}=(0,i().K8)((()=>({paddingLeft:j.WindowSizeStore.getSafePaddingLeftCSS(C?w?0:8:14),paddingRight:j.WindowSizeStore.getSafePaddingRightCSS(C?w?0:8:14)})),[j.WindowSizeStore,w,C]),P=(0,o().IS)((e=>({container:{display:"flex",alignItems:"center",minHeight:r?44:C?void 0:52,...C?{height:w?void 0:_().CJ}:void 0,paddingTop:w&&C?12:8,paddingBottom:w&&C?12:8,paddingLeft:T,paddingRight:z,...S},icon:{flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",width:C&&w?40:32,height:C&&w?40:32,marginRight:(0,_().qj)({isMobile:w}),...l},title:{marginRight:"auto",minWidth:0},labelWrapper:{display:"flex",flexDirection:"row"},label:{fontWeight:400},tag:{marginLeft:4},roleSelect:{display:"flex",alignItems:"center",flexShrink:0,marginLeft:8},button:{color:e.mediumTextColor,fontSize:w?14:12}})),[r,T,z,w,l,C,S]),N=(0,s.useMemo)((()=>x?null:function(e){return"display_only_overview_permission"===e.type||"display_only_hidden_permission"===e.type||"display_only_inherited_permission"===e.type||"display_only_group_member_permission"===e.type}(t)?h:e.store instanceof M().Bv?(0,D.jsx)(E,{...e,onClose:b,permissionItem:t}):e.store instanceof M().md?(0,D.jsx)(O,{...e,store:e.store,onClose:b,permissionItem:t}):void(0,f().HB)(e.store)),[x,t,e,h,b]);return(0,D.jsxs)("div",{className:"notranslate",style:P.container,children:[(0,D.jsx)("div",{style:P.icon,children:d}),(0,D.jsxs)("div",{style:P.title,children:[(0,D.jsxs)("div",{style:P.labelWrapper,children:[v?c:(0,D.jsx)(y().A,{style:A?void 0:P.label,children:(0,D.jsx)(I().j,{children:c})}),u&&(0,D.jsx)("div",{style:P.tag,children:u})]}),g&&(0,D.jsx)(y().A,{style:e.subtitleStyle,isSmall:!0,children:g}),m&&p&&(0,D.jsx)(U,{store:a})]}),N?(0,D.jsx)("div",{style:P.roleSelect,children:N}):null]})}function E(e){const{isInherited:t,permissionItem:a,store:r,from:g,isDisabled:m,sudoModeStore:p,location:h,fromPermissionWrapper:f,onUpgradeButtonClick:x,onChange:v,onClose:y,onOpenMenu:S,upgradeButtonName:j,buttonPopupStore:A,isRemovableOverride:C,onChangeSuccess:I}=e,T=(0,n().v3)(),z=(0,i().K8)((()=>{var e;const t=r.getModel(),s=null===(e=r.getParentStore())||void 0===e?void 0:e.getModel();return(0,d().tp)({record:t,parent:s,from:g,permissionItem:a})?(0,d().SK)({ancestors:l().Yn(r.pointer,r.getRecordModel),from:g}):a.role}),[g,a,r]),P=(0,i().K8)((()=>(0,k().FI)()),[]),N=(0,i().K8)((()=>r instanceof M().Bv?r.getType():void 0),[r]),R=(0,i().K8)((()=>{const e=T.currentUser.id;return c().B2(a)&&a.user_id===e}),[T,a]),B=(0,s.useCallback)((async e=>{let s=!1;const n={...a};n.role=z,s=v?await v(e):await(0,w().o5)({oldPermissionItem:n,newRole:e,wasInherited:t,environment:T,store:r,sudoModeStore:p,location:h,fromPermissionWrapper:f}),s&&(null==I||I(e))}),[a,z,t,T,r,p,h,f,v,I]),L=(0,o().IS)((e=>({button:{color:e.mediumTextColor,fontSize:(0,_().kx)({environment:T,isRedesignEnabled:P})}})),[T,P]);return(0,D.jsx)(b().Ay,{role:z,table:u().ev,blockType:N,type:a.type,disabled:m,isUserPermission:R,onChange:B,onClick:P?S:void 0,onClose:P?y:void 0,onUpgradeButtonClick:x,upgradeButtonName:j,buttonPopupStore:A,buttonStyle:L.button,showPermissionOverrideWarning:t&&!e.selectFooter,isRemovableOverride:C,footer:e.selectFooter,roleItemOverrides:e.roleItemOverrides,from:"shareMenu",header:e.selectHeader})}function O(e){const{isInherited:t,permissionItem:a,store:r,from:u,isDisabled:m,sudoModeStore:p,location:h,fromPermissionWrapper:f,onUpgradeButtonClick:x,onChange:v,onClose:y,onOpenMenu:S,upgradeButtonName:j,buttonPopupStore:A,isRemovableOverride:M,onChangeSuccess:C}=e,I=(0,n().v3)(),T=(0,i().K8)((()=>{var e;const t=r.getModel(),s=null===(e=r.getParentStore())||void 0===e?void 0:e.getModel();return(0,d().tp)({record:t,parent:s,from:u,permissionItem:a})?(0,d().SK)({ancestors:l().Yn(r.pointer,r.getRecordModel),from:u}):a.role}),[u,a,r]),z=(0,i().K8)((()=>(0,k().FI)()),[]),P=(0,i().K8)((()=>{const e=I.currentUser.id;return c().B2(a)&&a.user_id===e}),[I,a]),N=(0,s.useCallback)((async e=>{let s=!1;const n={...a};n.role=T,s=v?await v(e):await(0,w().o5)({oldPermissionItem:n,newRole:e,wasInherited:t,environment:I,store:r,sudoModeStore:p,location:h,fromPermissionWrapper:f}),s&&(null==C||C(e))}),[a,T,t,I,r,p,h,f,v,C]),R=(0,o().IS)((e=>({button:{color:e.mediumTextColor,fontSize:(0,_().kx)({environment:I,isRedesignEnabled:z})}})),[I,z]);return(0,D.jsx)(b().Ay,{role:T,table:g().Vl,blockType:void 0,type:a.type,disabled:m,isUserPermission:P,onChange:N,onClick:z?S:void 0,onClose:z?y:void 0,onUpgradeButtonClick:x,upgradeButtonName:j,buttonPopupStore:A,buttonStyle:R.button,showPermissionOverrideWarning:t&&!e.selectFooter,isRemovableOverride:M,footer:e.selectFooter,roleItemOverrides:e.roleItemOverrides,from:"shareMenu",header:e.selectHeader})}function U(e){const{store:t}=e,a=(0,n().v3)(),l=(0,p().tz)(),d=(0,i().K8)((()=>{if(t.table===u().ev)return(0,S().Ay)({store:t,fullyQualified:!1,pageVisitSource:r().y8.LinkInPage})}),[t]),c=(0,i().K8)((()=>(0,j().$R)(t)),[t]),g=(0,s.useCallback)((()=>{C().F2({environment:a,teamId:t.id,tab:A().p.Members,from:"permission_item"})}),[t.id,a]),m=(0,o().IS)((e=>({label:{lineHeight:1.4},linkBox:{display:"inline-flex",alignItems:"center",borderBottom:`0.5px solid ${h().Ay.mediumTextColor}`}})),[]);return(0,D.jsx)(y().A,{isSmall:!0,style:m.label,children:l.formatMessage(R.fromLinkBox,{linkBoxWithPageTitle:(0,D.jsx)(v().A,{inline:!0,href:d,onClick:c?g:void 0,innerStyle:m.linkBox,children:(0,D.jsx)(x().A,{store:t,useInvertedColors:!1})})})})}const F=s.memo(B)},90907:(e,t,a)=>{a.d(t,{h:()=>i});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"}),(0,s.jsx)("path",{d:"M10 1.95a4 4 0 0 0-4 4v1.433a2.426 2.426 0 0 0-2.025 2.392v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.426 2.426 0 0 0 14 7.383V5.95a4 4 0 0 0-4-4m2.75 5.4h-5.5v-1.4a2.75 2.75 0 0 1 5.5 0zM5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},i=(0,a(340498).wt)("lock",n)},99756:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(296540),n=()=>a(401497),i=()=>a(87043),o=a(474848);function r(e){let{type:t,isMobile:s,containerStyle:r,iconSize:d,...c}=e;const u=d??20,g=(0,n().IS)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"center",...(0,a(623275).iM)({theme:e,size:d??(s?i().Bj:i().Ev),useLargeBorderRadius:!0,useLightBackgroundColor:!0}),..."circle"===t&&{borderRadius:"100%"},...r}})),[r,s,t,d]);return(0,o.jsx)("div",{style:g.container,children:"function"===c.iconType?(0,o.jsx)(l,{iconFn:c.iconFn,iconStyle:c.iconStyle,innerIconSize:u}):"emoji"===c.iconType?(0,o.jsx)(a(56086).A,{char:c.emoji,size:u}):"recordIcon"===c.iconType?(0,o.jsx)(a(614505).A,{icon:c.icon,disabled:!0,isEmptyPage:!1,size:u,defaultIcon:(0,a(658985).$)()}):c.element})}function l(e){let{iconFn:t,iconStyle:a,innerIconSize:s}=e;return t((0,n().IS)((e=>({icon:{width:s,height:s,fill:e.mediumIconColor,...a}})),[a,s]).icon)}const d=s.memo(r)},118685:(e,t,a)=>{a.d(t,{f:()=>i,o:()=>n});a(898992),a(354520),a(672577),a(803949);var s=()=>a(534177);let n=function(e){return e.All="All",e.Partial="Partial",e.None="None",e}({});class i extends(()=>a(757695))().default{getAllActionNames(){return(0,s().uv)(this.state.actionSelections)}getSelectedActionNames(){return this.getAllActionNames().filter((e=>this.state.actionSelections[e]))}hasActionNameSelected(){const e=this.getAllActionNames(),t=this.getSelectedActionNames();return t.length>0&&t.length!==e.length}updateSearchQuery(e){this.setState({...this.state,searchQuery:e})}toggleCategorySelection(e){const t=e.category;this.setState({...this.state,categoryToggleOpen:{...this.state.categoryToggleOpen,[t]:!this.state.categoryToggleOpen[t]}})}selectCategorySelection(e){const t=e.category,a=this.state.categorySelections[t],s=a===n.None||a===n.Partial?n.All:n.None,i=s===n.All,o={...this.state.actionSelections},r=this.state.renderOrder.find((e=>e.category===t));r&&(r.orderedActions.forEach((e=>{o[e]=i})),this.setState({...this.state,actionSelections:o,categorySelections:{...this.state.categorySelections,[r.category]:s}}))}selectActionName(e,t){const a=this.state.actionSelections[e],s={...this.state.actionSelections,[e]:!a},i=t.orderedActions.filter((e=>s[e])).length,o=0===i?n.None:i===t.orderedActions.length?n.All:n.Partial;this.setState({...this.state,actionSelections:s,categorySelections:{...this.state.categorySelections,[t.category]:o}})}clearAllSelections(){const e=this.getBulkUpdateNextActionSelectionState((0,s().uv)(this.state.actionSelections),!1),t=this.getBulkUpdateNextCategorySelectionState((0,s().uv)(this.state.categorySelections),n.None);this.setState({...this.state,actionSelections:e,categorySelections:t})}getBulkUpdateNextCategorySelectionState(e,t){const a={...this.state.categorySelections};return e.forEach((e=>{a[e]=t})),a}getBulkUpdateNextActionSelectionState(e,t){const a={...this.state.actionSelections};return e.forEach((e=>{a[e]=t})),a}}},126158:(e,t,a)=>{a.d(t,{m:()=>n});a(296540);var s=a(474848);const n=(0,a(340498).wt)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,s.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},129852:(e,t,a)=>{a.d(t,{q:()=>i});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M9.875 6.25c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5"}),(0,s.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},i=(0,a(340498).wt)("exclamationMarkCircle",n)},132813:(e,t,a)=>{a.d(t,{A:()=>n});class s extends(()=>a(757695))().default{getInitialState(){return{disablePublicAccess:!1,disableGuests:!1,disableMoveToSpace:!1,disableExport:!1,disableSpacePageEdits:!1,disablePublicAccessRequests:!1,disableTeamCreation:!1,disableMembershipRequests:!1,disableExternalMembershipRequests:!1,disableGuestMembershipRequests:!1,disableMemberUpgradeRequests:!1,enableGuestInviteRequests:!1,enableAiFeature:!1,disableTeamGuests:!1,disableGuestsModalOpen:!1,enableAiTraining:!1,zeroRetentionEnabled:!1}}getValueForSpace(e){if(e.isDefined())return{disablePublicAccess:Boolean(e.getDisablePublicAccess()),disableGuests:Boolean(e.getDisableGuests()),disableMoveToSpace:Boolean(e.getDisableMoveToSpace()),disableExport:Boolean(e.getDisableExport()),disableSpacePageEdits:Boolean(e.getDisableSpacePageEdits()),disablePublicAccessRequests:Boolean(e.getDisablePublicAccessRequests()),disableTeamCreation:Boolean(e.getDisableTeamCreation()),disableMembershipRequests:Boolean(e.getSetting("disable_membership_requests")),disableExternalMembershipRequests:Boolean(e.getSetting("disable_external_membership_requests")),disableGuestMembershipRequests:Boolean(e.getSetting("disable_guest_membership_requests")),enableGuestInviteRequests:Boolean(e.getSetting("enable_guest_invite_requests")),enableAiFeature:Boolean(e.getSetting("enable_ai_feature")),disableTeamGuests:Boolean(e.getSetting("disable_team_guests")),enableAiTraining:Boolean(e.getSetting("enable_ai_training")),zeroRetentionEnabled:Boolean(e.getSetting("zero_retention_enabled")),disableMemberUpgradeRequests:Boolean(e.getSetting("disable_member_upgrade_requests"))}}}const n=s},135851:(e,t,a)=>{a.d(t,{e:()=>s});const s={rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}},142448:(e,t,a)=>{a.d(t,{Gz:()=>v,Qp:()=>b,iP:()=>f,tR:()=>x});a(581454);var s=a(296540),n=()=>a(56366),i=()=>a(401497),o=()=>a(591779),r=()=>a(959013),l=()=>a(962730),d=()=>a(756279),c=()=>a(710149),u=()=>a(554509),g=()=>a(2143),m=()=>a(859428),p=()=>a(47095),h=a(474848);const f=4,x=24,v=18,y=10;function b(e){const{avatars:t,totalCount:a,avatarLimit:x,renderOverflowTooltip:v,isLightBackground:b,avatarStyles:S,isLoading:j}=e,w=(0,p().Z)(),A=(0,i().IS)((e=>({bottom:{display:"flex"},userAvatarContainer:{display:"flex",flexDirection:"row",isolation:"isolate",alignItems:"center",cursor:"default"},hiddenAvatarCount:{display:"flex",marginLeft:12,alignItems:"center"},scroller:{maxWidth:250,maxHeight:300,padding:0}})),[]),{pinTooltip:M,unpinTooltip:C,setImmediateState:I,isHovering:T}=function(){const[e,t]=(0,s.useState)(!1),a=(0,o().lW)(e,400,Object.is),[n,i]=(0,s.useState)(void 0),r=n||a,l=(0,s.useCallback)((()=>i(r)),[r]),d=(0,s.useCallback)((()=>{i(void 0)}),[]);return{pinTooltip:l,unpinTooltip:d,setImmediateState:t,isHovering:!1===e&&!0===r}}(),k=(0,n().K8)((()=>{let e=t;t.length>(x||f)&&(e=t.slice(0,x||f));for(const t of e)if(!t.renderAvatar)return[];return e}),[x,t]),_=(0,s.useCallback)((e=>({marginRight:e+1===k.length?0:-y,...S})),[S,k.length]);if(j)return(0,h.jsxs)("div",{style:A.bottom,children:[(0,h.jsx)("div",{style:A.userAvatarContainer,children:new Array(f).fill(null).map(((e,t)=>(0,h.jsx)(c().A,{style:{...w.avatarShimmer,..._(t)}},t)))}),(0,h.jsx)("div",{style:A.hiddenAvatarCount,children:(0,h.jsx)(c().A,{style:w.shortShimmer})})]});const D=x||f,z=(a||t.length)-D;return(0,h.jsxs)("div",{style:A.bottom,children:[(0,h.jsx)("div",{style:A.userAvatarContainer,children:k.map(((e,t)=>(0,h.jsx)(m().A,{isLightBackground:b,disableTooltip:!e.renderTooltip,delayThreshold:0,renderTooltip:e.renderTooltip??(()=>{}),placement:l().W.Bottom,alignment:l().C.Start,render:a=>(0,h.jsx)("div",{style:{zIndex:D-t,..._(t)},...a,children:e.renderAvatar()})},`avatar-${t}`)))}),z>0&&(0,h.jsx)(m().A,{disableTooltip:!v,placement:l().W.Bottom,alignment:l().C.Start,style:{paddingRight:0},forceVisibleState:T||void 0,delayThreshold:0,renderTooltip:e=>v?(0,h.jsx)(g().H,{...e,onMouseEnter:M,onMouseLeave:C,type:d().A.Y,style:A.scroller,children:v(e)}):void 0,allowHover:!0,render:e=>(0,h.jsx)("div",{style:A.hiddenAvatarCount,...e,onMouseEnter:t=>{var a;I(!0),null===(a=e.onMouseEnter)||void 0===a||a.call(e,t)},onMouseLeave:t=>{var a;I(!1),null===(a=e.onMouseLeave)||void 0===a||a.call(e,t)},children:(0,h.jsx)(u().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,h.jsx)(r().sA,{defaultMessage:"+{numHiddenAvatars}",id:"settingsConsole.general.numHiddenAvatars",values:{numHiddenAvatars:z.toLocaleString()}})})}),isLightBackground:b})]})}},144707:(e,t,a)=>{a.d(t,{u:()=>w});a(898992),a(672577),a(581454),a(296540);var s=()=>a(484714),n=()=>a(56366),i=()=>a(401497),o=()=>a(831310),r=()=>a(668725),l=()=>a(742117),d=()=>a(760217),c=()=>a(406699),u=()=>a(928600),g=()=>a(939740),m=()=>a(89924),p=()=>a(859428),h=()=>a(722872),f=()=>a(553965),x=()=>a(962730),v=()=>a(700250),y=()=>a(595967),b=()=>a(43450),S=()=>a(209592),j=a(474848);function w(e){let{currentAccessLevel:t,currentIsDefault:a=!1,onChange:w,teamStore:A,disabledWithRightChevron:M=!1,style:C,parentSpaceStore:I}=e;const{device:T}=(0,s().v3)(),k=(0,b().R)(A),_=(0,y().v)(),D=(0,i().IS)((e=>({chevron:{width:12,marginLeft:3,marginRight:3,fill:e.lightIconColor},selectedButton:{width:"100%",margin:0,paddingTop:4,paddingBottom:4,border:`1px solid ${e.outlineButtonBorder}`,...C},selectedCheckmark:{width:T.isMobile?16:14},icon:{alignSelf:"center",marginTop:0}})),[T.isMobile,C]),z=(0,n().K8)((()=>(null==A?void 0:A.isDefault())??a),[A,a]),P=z?"default":t,N=(0,S().Z)({teamStore:A,onChange:w,isDefault:z,parentSpaceStore:I});return(0,j.jsx)(c().Ay,{popupType:T.isMobile?c().z7.SlideUp:c().z7.Popup,renderOrigin:e=>{const t=N.find((e=>e.key===P));if(!t)return null;const a=t.disableAllOptionsTooltip,s=M||Boolean(a)||Boolean(A)&&!k;return(0,j.jsx)(p().A,{placement:x().W.Bottom,alignment:x().C.Start,disableTooltip:!a||!k,renderTooltip:()=>a,style:{width:350},textWrap:!0,render:a=>(0,j.jsx)(d().A,{...(0,f().A)(e,a),title:t.title,caption:t.caption,icon:t.icon({fill:t.iconColor}),desktopIconStyle:D.icon,disabled:s,right:M?(0,l().V)(D.chevron):s?void 0:(0,r().b)(D.chevron),focused:!1,shouldWrapCaption:!0,buttonStyle:D.selectedButton})})},placementToOrigin:v().UV.Bottom,alignmentToOrigin:v().MY.Start,sameWidthAsOrigin:!0,render:e=>{const t=[{key:"access levels",render:e=>(0,j.jsx)(m().A,{...e,topBorder:0!==e.index}),items:N.map((t=>{const a=t.key===P;return{key:t.key,render:e=>(0,j.jsx)(p().A,{placement:x().W.Top,disableTooltip:!t.tooltip,renderTooltip:()=>t.tooltip,render:s=>(0,j.jsx)(d().A,{...(0,f().A)(e,s),title:t.title,caption:t.caption,icon:t.icon({fill:t.iconColor}),desktopIconStyle:D.icon,right:a?(0,j.jsx)("div",{style:D.selectedCheckmark,children:(0,o().o)()}):void 0,disabled:t.disabled,shouldWrapCaption:!0})}),action:()=>{t.onSelect(),e.close()}}}))},..._?[{key:"try private teamspaces",render:()=>(0,j.jsx)(y().c,{messageKey:"privateTeamspaces",styleOverrides:{margin:"4px 12px 12px 12px"}}),items:[]}]:[]];return(0,j.jsx)(u().A,{menuType:h().gu.Popup,children:(0,j.jsx)(g().Ay,{type:g().Oh.Vertical,initialFocus:void 0,sections:t})})}})}},160867:(e,t,a)=>{a.d(t,{Ay:()=>lt,Fu:()=>bt,Sr:()=>mt});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(662303),i=()=>a(484714),o=()=>a(56366),r=()=>a(401497),l=()=>a(584262),d=()=>a(784892),c=()=>a(842599),u=()=>a(467730),g=()=>a(96689),m=()=>a(798880),p=()=>a(294712),h=()=>a(441738),f=()=>a(979340),x=()=>a(959013),v=()=>a(209199),y=()=>a(496603),b=()=>a(966505),S=()=>a(745638),j=()=>a(449506),w=()=>a(920093),A=()=>a(901389),M=()=>a(201549),C=()=>a(246826),I=()=>a(666144),T=()=>a(706024),k=()=>a(426116),_=()=>a(317909),D=()=>a(994877),z=()=>a(656633),P=()=>a(351360),N=()=>a(134217);var R=()=>a(989423),B=()=>a(972435),L=()=>a(722872),E=()=>a(657328),O=()=>a(836251),U=()=>a(437622),F=()=>a(963589),V=()=>a(176983),H=()=>a(11978),W=()=>a(28119),q=()=>a(377586),G=()=>a(430483),K=()=>a(508496),Y=()=>a(592674),Q=()=>a(630116),$=()=>a(189157),X=()=>a(404141),Z=()=>a(469776),J=()=>a(112698),ee=()=>a(972418),te=()=>a(597898),ae=()=>a(749240),se=()=>a(378941),ne=()=>a(66913),ie=()=>a(12193),oe=()=>a(939768),re=()=>a(493823),le=()=>a(843189),de=()=>a(802790),ce=()=>a(364280),ue=()=>a(285790),ge=()=>a(623580),me=()=>a(554509),pe=()=>a(204063),he=()=>a(641514),fe=()=>a(8178),xe=a(474848);const ve=(0,x().YK)({closeModalAriaLabel:{id:"requestMembershipCustomizationUrlButton.closeModalAriaLabel",defaultMessage:"Close request membership customization modal"}});function ye(e){const t=(0,i().v3)(),{spaceStore:a,isOpen:n,onDismiss:o}=e,[l,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),g=(0,s.useCallback)((e=>""===e||(0,oe().AY)(e)),[]);(0,s.useEffect)((()=>{d(a.getSettings().request_membership_customization_redirect_url||"")}),[a]);const m=(0,r().IS)((e=>({modal:{maxWidth:500,paddingTop:20,fontSize:14,borderRadius:10},cancelButton:{position:"absolute",top:"10px",right:"10px"},title:{margin:"10px 0"},errorText:{color:e.errorText,fontSize:12},button:{padding:"6px 12px"},icon:{width:36,height:36,color:e.text.secondary},header:{padding:"0px 20px",maxWidth:300}})),[]),p=(0,s.useCallback)((async e=>{await j().callApi({eventName:"updateSpaceTrustedDomainSettings",environment:t,data:{spaceId:a.id,newRequestMembershipCustomizationRedirectUrl:e}})}),[t,a]);return(0,xe.jsx)(he().A,{innerStyle:m.modal,isOpen:n,onDismiss:o,render:()=>(0,xe.jsxs)(ce().VP,{alignItems:"center",children:[(0,xe.jsx)(ue().A,{icon:ne().V,onClick:o,style:m.cancelButton,ariaLabel:B().A.formatMessage(ve.closeModalAriaLabel)}),(0,xe.jsx)(fe().A,{large:!0,style:m.header,children:(0,xe.jsxs)(ce().VP,{alignItems:"center",children:[(0,xe.jsx)("div",{style:{...m.icon},children:(0,ie().D)()}),(0,xe.jsx)(me().D,{styleName:"Heading-17px/Semibold",colorName:"primary",customStyles:m.title,children:(0,xe.jsx)(x().sA,{id:"requestMembershipCustomizationUrlButton.title",defaultMessage:"Customize request access link"})}),(0,xe.jsx)(me().D,{styleName:"Body-14px/Regular",colorName:"secondary",customStyles:{textAlign:"center"},children:(0,xe.jsx)(x().sA,{id:"requestMembershipCustomizationUrlButton.byline",defaultMessage:"Customize the destination when users request to join workspace"})})]})}),(0,xe.jsxs)(ce().VP,{alignItems:"start",gap:4,marginTop:24,paddingLeft:20,paddingRight:20,children:[(0,xe.jsx)(me().D,{styleName:"Body-12px/Medium",colorName:"secondary",customStyles:{marginBottom:6},children:(0,xe.jsx)(x().sA,{id:"requestMembershipCustomizationUrlButton.input.label",defaultMessage:"Custom URL"})}),(0,xe.jsx)(ge().A,{type:"text",value:l,onChange:e=>{const t=e.target.value;d(t),u(!g(t))},focusInitial:!0}),c?(0,xe.jsx)("div",{style:{...m.errorText},children:(0,xe.jsx)(x().sA,{id:"requestMembershipCustomizationUrlButton.invalidUrl",defaultMessage:"Invalid URL"})}):null,(0,xe.jsx)(me().D,{styleName:"Body-12px/Regular",colorName:"secondary",customStyles:{marginTop:6,textAlign:"start",marginBottom:14},children:(0,xe.jsx)(x().sA,{id:"requestMembershipCustomizationUrlButton.input.hint",defaultMessage:"Users will be redirected to this URL when they request to join workspace."})})]}),(0,xe.jsx)(de().A,{size:20}),(0,xe.jsxs)(ce().fI,{justifyContent:"flex-end",gap:12,paddingLeft:20,paddingRight:20,paddingBottom:12,width:"100%",children:[(0,xe.jsx)(le().E,{style:m.button,onClick:o,children:(0,xe.jsx)(x().sA,{defaultMessage:"Cancel",id:"requestMembershipCustomizationUrlButton.cancel.label"})}),(0,xe.jsx)(pe().A,{style:m.button,onClick:async()=>{await p(l),o()},disabled:!g(l),children:(0,xe.jsx)(x().sA,{defaultMessage:"Save action",id:"requestMembershipCustomizationUrlButton.save.label"})})]})]})})}function be(e){const{spaceStore:t}=e,[a,n]=(0,s.useState)(!1);return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(re().p,{isBlue:!0,style:{marginRight:"16px"},onClick:()=>n(!0),children:(0,xe.jsx)(x().sA,{defaultMessage:"Customize",id:"requestMembershipCustomizationUrlButton.customizeAction.label"})}),(0,xe.jsx)(ye,{spaceStore:t,isOpen:a,onDismiss:()=>n(!1)})]})}var Se=()=>a(641300),je=()=>a(125565),we=()=>a(489143),Ae=()=>a(760217),Me=()=>a(928600),Ce=()=>a(939740),Ie=()=>a(89924);const Te=function(e){const t=(0,r().DP)(),n=e.store,l=(0,o().K8)((()=>null==n?void 0:n.state.modalOpen),[n]),d=(0,r().IS)((e=>({input:{margin:12,boxShadow:e.inputBoxShadow,borderRadius:4,fontSize:12,maxWidth:326,marginRight:"auto"},searchIcon:{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]),c=(0,s.useCallback)((()=>{y(""),n.setState({...n.state,loading:!1,modalOpen:!1})}),[n]),{spaceBasicSettingsStore:g,spaceStore:m,trustedDomainNumMembers:p}=e,h=(0,i().v3)(),{device:f}=h,[v,y]=(0,s.useState)(""),b=(0,o().K8)((()=>(null==g?void 0:g.state.emailDomains)??[]),[g]),S=(0,o().K8)((()=>bt({subscriptionData:ae().subscriptionDataStoreInstance.state,spaceStore:m,emailDomainsToExclude:[...b,...p]})),[m,b,p]),j=(0,x().tz)(),w=(0,s.useCallback)((e=>{y(e.target.value)}),[]);return(0,xe.jsx)(a(957986).A,{open:l,preventHideChildrenWhileOpening:!0,onDismiss:c,render:()=>{const s=v.trim(),n=(0,xe.jsx)(x().sA,{id:"trustedDomainSettings.trustedEmailDomainsSection.emailDomainsDropdown.placeholder",defaultMessage:"Choose an email domain"}),i=(0,xe.jsx)(x().sA,{id:"trustedDomainSettings.trustedEmailDomainsSection.emailDomainsDropdown.placeholderNoResults",defaultMessage:"Type an email domain of a member of this workspace"}),o=(0,u().Ay)(s,S,(e=>e)).map(((t,a)=>({key:a,render:e=>(0,xe.jsx)(Ae().A,{...e,title:t}),action:()=>{y(""),e.addTrustedDomain(t),c()}})));let r;return r=f.isMobile?{menuType:L().gu.ActionSheet}:{menuType:L().gu.Popup,width:"100%"},(0,xe.jsx)(Me().A,{...r,children:(0,xe.jsxs)("div",{style:{background:t.popoverBackground,width:350,borderRadius:2},children:[(0,xe.jsx)(ge().A,{placeholder:j.formatMessage({defaultMessage:"Search domains...",id:"manageTrustedDomains.searchFilter.placeholder"}),style:d.input,left:(0,a(381138).q)(d.searchIcon),value:v,onChange:w,format:ge().C.Small,showClearButton:!0}),(0,xe.jsx)(Ce().Ay,{style:{padding:14,margin:"0px -12px"},type:Ce().Oh.Vertical,initialFocus:o.length>0?0:void 0,sections:[{key:0,render:e=>(0,xe.jsx)(Ie().A,{...e,disableDesktopPadding:!0,title:o.length>0?n:i}),items:o}]})]})})}})};var ke=()=>a(534177),_e=()=>a(265665);const De=(0,xe.jsx)(x().sA,{id:"manageTrustedDomainsTable.joinSpaceCell.clickToJoin",defaultMessage:"Click to join workspace"}),ze=(0,xe.jsx)(x().sA,{id:"manageTrustedDomainsTable.joinSpaceCell.requestToJoin",defaultMessage:"Request to join workspace"}),Pe=(0,xe.jsx)(x().sA,{id:"manageTrustedDomainsTable.joinSpaceCell.disabled",defaultMessage:"Disabled"});function Ne(e){let{data:t}=e;const a=(0,r().IS)((e=>({text:{color:e.regularTextColor}})),[]);return(0,xe.jsx)(_e().j,{style:a.text,children:t.emailDomain})}function Re(e){let{data:t}=e;return(0,xe.jsx)("div",{children:Be(t.joinSpaceMethod)})}function Be(e){return"click_to_join"===e?De:"request_to_join"===e?ze:"disabled"===e?Pe:void(0,ke().HB)(e)}function Le(e){let{data:t}=e;return(0,xe.jsx)(_e().j,{children:(0,xe.jsx)(x().sA,{id:"manageTrustedDomainsTable.numMembersCell",defaultMessage:"{numMembers, plural, one {{numMembers} member} other {{numMembers} members}}",values:{numMembers:t.numMembers}})})}const Ee=[{id:"emailDomainColumn",headerTitle:(0,xe.jsx)(x().sA,{id:"manageTrustedDomainsTable.columnTitle.emailDomain",defaultMessage:"Email Domain"}),renderCell:e=>(0,xe.jsx)(Ne,{data:e}),widthData:{width:10},sortable:!1},{id:"numMembersColumn",headerTitle:(0,xe.jsx)(x().sA,{id:"manageTrustedDomainsTable.columnTitle.numMembers",defaultMessage:"Members"}),renderCell:e=>(0,xe.jsx)(Le,{data:e}),widthData:{minWidth:10,widthPercent:20},sortable:!1},{id:"joinSpaceMethodColumn",headerTitle:(0,xe.jsx)(x().sA,{id:"manageTrustedDomainsTable.columnTitle.joinSpaceMethod",defaultMessage:"Join Workspace"}),renderCell:e=>(0,xe.jsx)(Re,{data:e}),widthData:{minWidth:10,widthPercent:40},sortable:!1}];function Oe(e){let{addTrustedDomainStore:t,spaceStore:a,spaceBasicSettingsStore:s,trustedDomainNumMembers:n,trustedDomainStores:l}=e;const d=(0,we().A)(),c=(0,r().IS)((e=>{const t=(0,Se().rC)({columnRenderInfo:Ee,theme:e,containerMarginTop:0});return{...t,container:{...t.container,marginBottom:24}}}),[]),u=(0,r().IS)((e=>({noTrustedDomainsLabel:{marginTop:15,marginBottom:30,textAlign:"center"}})),[]),g=(0,i().v3)(),m=(0,o().K8)((()=>{if(!l)return[];const e=new Map;for(const t of n)e.set(t.trustedDomain.email_domain,t.numMembers);return y().oE(l.filter((e=>e.getDomainLinkSharingEnabled())).map((t=>{const a=t.getModel();if(!a||!t.canRead()||!t.isReady())return;const s=e.get(a.getEmailDomain())??0;return{id:a.id,emailDomain:a.getEmailDomain(),numMembers:s,joinSpaceMethod:a.getJoinSpaceMethod(),domainLinkSharingEnabled:a.getDomainLinkSharingEnabled(),isClickable:!1,onJoinSpaceMethodChange:e=>{let{joinSpaceMethod:a}=e;return(0,se().BS)({store:t,environment:g,joinSpaceMethod:a})},onRemoveTrustedDomain:()=>(0,se().Hf)({store:t,environment:g})}})))}),[n,l,g]),p=Ee.map((e=>({...e,headerStyle:d.tableHeader}))),h=(0,o().K8)((()=>y().oE(l.filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())))),[l]);return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Te,{store:t,spaceStore:a,spaceBasicSettingsStore:s,trustedDomainNumMembers:h,addTrustedDomain:function(e){(0,se().NZ)({environment:g,trustedEmailDomain:e,trustedDomainStores:l,spaceStore:a,spaceBasicSettingsStore:s})}}),(0,xe.jsx)(Se().WE,{columnRenderInfo:p,rows:m,renderNoRowsComponent:()=>(0,xe.jsx)(Ue,{style:u.noTrustedDomainsLabel,numDomains:m.length}),styles:c,showRowBorders:!0})]})}function Ue(e){let{style:t,numDomains:a}=e;return a>0?null:(0,xe.jsx)(je().A,{isSmall:!0,style:t,children:(0,xe.jsx)(x().sA,{id:"manageTrustedDomainsTable.emptyManageTrustedDomainsTableDisclaimer.noTrustedDomainsExist",defaultMessage:"Could not find any email domains."})})}class Fe extends(()=>a(757695))().default{getInitialState(){return{modalOpen:!1,loading:!1,trustedDomain:void 0}}}const Ve=Fe;var He=()=>a(864943),We=()=>a(14235),qe=()=>a(614505),Ge=()=>a(946548),Ke=()=>a(690197),Ye=()=>a(843878);const Qe=function(e){let{handleExportClick:t}=e;const n=(0,o().O$)(P().default),{currentSpaceStore:r}=n,l=(0,o().O$)(a(544019).A),d=(0,i().v3)();return(0,s.useEffect)((()=>{M().X({environment:d,spaceId:null==r?void 0:r.id})}),[null==r?void 0:r.id,d]),(0,xe.jsxs)(s.Fragment,{children:[(0,xe.jsx)(fe().A,{children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.exportContentSection.title",defaultMessage:"Export content"})}),(0,xe.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,xe.jsx)(He().A,{disabled:!!l.count,size:"lg",onClick:t,children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.exportContentSection.exportButton.label",defaultMessage:"Export all workspace content"})}),l.count?(0,xe.jsxs)(a(21140).Ye,{gap:4,children:[(0,xe.jsx)(a(331542).A,{}),(0,xe.jsxs)(je().A,{isSmall:!0,children:[(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.exportContentSection.exportInProgress",defaultMessage:"Export in progress"}),l.exportedPageCount?(0,xe.jsx)(xe.Fragment,{children:` (${l.exportedPageCount} pages exported)`}):(0,xe.jsx)(xe.Fragment,{})]})]}):(0,xe.jsx)(xe.Fragment,{})]}),(0,xe.jsx)("div",{style:{height:12}}),(0,xe.jsx)(Ke().A,{title:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.exportContentSection.helpButton.caption",defaultMessage:"Learn about exporting workspaces."}),href:(0,O().xS)("guides.exportWorkspace"),analyticsFrom:"space_settings"}),(0,Ye().J_)()]})};var $e=()=>a(719147),Xe=()=>a(418884),Ze=()=>a(702723),Je=()=>a(881690),et=()=>a(297780);function tt(){return(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.workspaceNameSection.nameInput.caption",defaultMessage:"You can use your organization or company name. Keep it simple."})}const at=(0,x().YK)({nameInputPlaceholder:{id:"spaceBasicSettings.nameInput.placeholder",defaultMessage:"e.g. company name"},workspaceDomainInputPlaceholder:{id:"spaceBasicSettings.domainSection.workspaceDomainInput.placeholder",defaultMessage:"URL"},allowedEmailDomainsInputPlaceholder:{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.placeholder",defaultMessage:"Type an email domain…"},copyDomainTooltip:{id:"spaceBasicSettings.workspaceDomain.tooltip",defaultMessage:"Click to copy link"},turnOffAiWhenSubscribedToAiWarning:{id:"spaceBasicSettings.aiFeature.turnOffAiWhenSubscribedToAiWarning",defaultMessage:"Your current plan includes Notion AI. You can turn off access to AI, but you will continue to be billed for it."},turnOffAiWhenSubscribedToAccept:{id:"spaceBasicSettings.aiFeature.turnOffAiWhenSubscribedToAccept",defaultMessage:"Turn off AI"},activateHIPAAButton:{id:"spaceBasicSettings.hipaaCompliance.activateButton.label",defaultMessage:"Activate"},deactivateHIPAAButton:{id:"spaceBasicSettings.hipaaCompliance.deactivateButton.label",defaultMessage:"Deactivate"}});function st(e){const{spaceStore:t,organizationOverrides:n}=e,l=(0,i().v3)(),d=(0,o().K8)((()=>!a(227440).A.state.online),[]),{canAdminSpaceStore:c,spaceId:u}=(0,o().K8)((()=>({canAdminSpaceStore:t.canAdmin(),spaceId:t.id})),[t]),g=(0,o().K8)((()=>{var e;return null===(e=P().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),m=(0,o().uB)(e.spaceBasicSettingsStore,a(194763).A),p=(0,o().uB)(e.securitySettingsStore,a(132813).A),f=(0,o().K8)((()=>(0,U().IL)(t)),[t]),v=(0,te().P9)({name:"hipaa_compliance",spaceId:u,userId:g});(0,a(852507).l)((()=>{const e=m.getValueForSpace(t),a=p.getValueForSpace(t);e&&m.setState(e),a&&p.setState(a)}));const S=(0,o().K8)((()=>function(e){var t;return!(null===(t=P().default.state.currentSpaceStore)||void 0===t||!t.canAdmin())&&(0,N().n)(e,"enterprise")}(l)),[l]),[j]=(0,a(187174).Yb)((async()=>({trustedDomainNumMembers:c?await(0,se().hs)({environment:l,spaceId:t.id,currentUserId:g}):[]})),[l,t,g,c]),w=(0,o().K8)((()=>{if("resolved"!==j.status)return[];const e=j.value.trustedDomainNumMembers.map((e=>e.trustedDomain.id));return(0,se().J7)({trustedDomainIds:e,spaceStore:t})}),[t,j]),C=(0,o().K8)((()=>y().oE(w.filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())))),[w]),I=(0,o().K8)((()=>{var e;const a=(null===(e=ae().subscriptionDataStoreInstance.state)||void 0===e?void 0:e.addOns)??[];return function(e){var t;const{environment:a,spaceStore:s,currentAddOns:n}=e;if(!s.canAdmin())return!1;if(Boolean(null===(t=s.getModel())||void 0===t?void 0:t.isAiLeapEnabledOnSpace()))return!0;if(!h().GI(n))return!1;const i=(0,z().vp)(a,s.id),o=K().default.checkGate({gateName:"ai_display_leap_settings_for_sales_assisted_workspace"});if(i&&!o)return!1;return G().zD.isWorkspaceLeapEligible({ignoreEnterpriseCheck:!0})}({environment:l,spaceStore:t,currentAddOns:a})}),[l,t]),T=(0,o().K8)((()=>N().vl(l)),[l]),_=(0,o().K8)((()=>c&&!t.getDisableExport()),[c,t]),D=(0,o().O$)(ae().subscriptionDataStoreInstance),R=(0,a(847554).b)(D),B=(0,r().IS)((()=>({dangerZoneContainer:{display:"flex",flexWrap:"wrap",gap:"16px 12px"},gap:{height:12}})),[]);return d?(0,xe.jsx)(dt,{}):(0,xe.jsxs)(Ye().Ay,{controlRow:c&&(0,xe.jsx)(wt,{spaceStore:t,spaceBasicSettingsStore:m,securitySettingsStore:p}),controlRowPaddingTopBottom:14,children:[c&&(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(gt,{}),(0,xe.jsx)(nt,{spaceStore:t,spaceBasicSettingsStore:m}),(0,Ye().J_)(),(0,xe.jsx)(it,{spaceStore:t,spaceBasicSettingsStore:m}),(0,Ye().J_)()]}),(S||I)&&(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(ut,{}),S&&(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(ht,{securitySettingsStore:p,isControlledByOrganization:Boolean(n.enable_ai_feature)}),(0,Ye().J_)()]}),c&&v&&(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(ft,{spaceStore:t,securitySettingsStore:p,spaceBasicSettingsStore:m}),(0,Ye().J_)()]}),I&&(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(vt,{securitySettingsStore:p}),(0,Ye().J_)()]})]}),(0,xe.jsx)(ct,{}),f&&(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(je().A,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.guestLimitedAccessMessage",defaultMessage:"You are currently a guest in this workspace. Ask an admin to add you as a member in order to see other pages."})}),(0,Ye().J_)()]}),c&&T&&(0,xe.jsxs)(s.Fragment,{children:[(0,xe.jsx)(fe().A,{children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.title",defaultMessage:"Allowed email domains"})}),(0,xe.jsx)(yt,{spaceStore:t,spaceBasicSettingsStore:m,trustedEmailDomains:C}),(0,xe.jsx)(je().A,{isSmall:!0,isMultiline:!0,style:{marginTop:4,marginBottom:4},children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.caption",defaultMessage:"Anyone with email addresses at these domains can automatically join your workspace."})}),(0,Ye().J_)(),(0,xe.jsx)(St,{spaceBasicSettingsStore:m,spaceStore:t,trustedDomainsState:j,trustedDomainStores:w})]}),_&&(0,xe.jsx)(Qe,{handleExportClick:()=>function(e){const{currentSpaceStore:t}=P().default.state;t&&M().Ss({environment:e,root:{table:"space",id:t.id,spaceId:t.id},isCollectionViewExportTypeSupported:!0})}(l)}),c&&(0,xe.jsx)(rt,{}),c&&(0,xe.jsx)(ot,{spaceStore:t,spaceBasicSettingsStore:m,organizationOverrides:n}),(0,xe.jsx)(fe().A,{children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.dangerousSettingsSection.title",defaultMessage:"Danger zone"})}),(0,xe.jsxs)("div",{style:B.dangerZoneContainer,children:[(R>1||f)&&(0,xe.jsx)(He().A,{size:"lg",onClick:()=>function(e,t){const{currentUserSettingsStore:a}=P().default.state;a&&A().ui({message:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.prompt",defaultMessage:"Are you sure you want to leave this workspace?"}),showCancel:!0,keepFocus:!0,items:[{label:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.leaveButton.label",defaultMessage:"Leave"}),color:"red",onAccept:async()=>{await k().ev({environment:t,spaceId:e.id,userSettingsStore:a})&&(b().dp(t),X().A.setState({...X().A.state,open:!1}))}}]})}(t,l),children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.dangerousSettingsSection.leaveWorkspaceButton.label",defaultMessage:"Leave workspace"})}),c&&(0,xe.jsx)(jt,{spaceStore:e.spaceStore})]}),c&&(0,xe.jsxs)(s.Fragment,{children:[(0,xe.jsx)("div",{style:B.gap}),(0,xe.jsx)(Ke().A,{title:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceHelpButton.caption",defaultMessage:"Learn about deleting workspaces."}),href:(0,O().xS)("guides.deleteWorkspace"),analyticsFrom:"space_settings"})]})]})}function nt(e){let{spaceStore:t,spaceBasicSettingsStore:a}=e;const n=(0,o().K8)((()=>a.state.name),[a]),i=(0,s.useCallback)((e=>{a.setState({...a.state,name:e.target.value})}),[a]),l=(0,r().IS)((()=>({label:{marginTop:4}})),[]);return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(fe().A,{children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.workspaceNameSection.title",defaultMessage:"Name"})}),(0,xe.jsx)(ge().A,{value:n,placeholder:B().A.formatMessage(at.nameInputPlaceholder),readOnly:!1,onChange:i,maxlength:g().zX}),(0,xe.jsx)(je().A,{isSmall:!0,isMultiline:!0,style:l.label,children:(0,xe.jsx)(tt,{})})]})}function it(e){let{spaceStore:t,spaceBasicSettingsStore:a}=e;const n=(0,i().v3)(),l=(0,o().K8)((()=>(0,U().c2)(n,t)),[n,t]),d=(0,o().K8)((()=>a.state.name),[a]),c=(0,o().K8)((()=>({recordTable:t.table,source:"workspace_settings"})),[t]),u=(0,s.useCallback)((e=>{_().createAndCommit({userAction:"SpaceBasicSettings.handleRecordIconChange",environment:n,canUndo:!0,perform:a=>{C().KY({store:t.getIconStore(),value:e,transaction:a})}})}),[n,t]),g=(0,r().IS)((e=>({iconContainer:{width:72,height:72,border:`1px solid ${e.regularDividerColor}`,borderRadius:6,display:"flex",justifyContent:"center",alignItems:"center"},label:{marginTop:8}})),[]);return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(fe().A,{children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.workspaceIconSection.title",defaultMessage:"Icon"})}),(0,xe.jsx)("div",{style:g.iconContainer,children:(0,xe.jsx)(qe().A,{bucket:"public",disabled:!1,icon:l,isEmptyPage:!1,title:d,size:64,iconLoggingData:c,onChange:u})}),(0,xe.jsx)(je().A,{isSmall:!0,isMultiline:!0,style:g.label,children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.workspaceIconSection.caption",defaultMessage:"Upload an image or pick an emoji. It will show up in your sidebar and notifications."})})]})}function ot(e){let{spaceStore:t,spaceBasicSettingsStore:a,organizationOverrides:n}=e;const l=(0,i().v3)(),{isMobile:d}=l.device,c=(0,o().K8)((()=>t.getSettings().disable_page_analytics),[t]),u=Boolean(n.disable_page_analytics),g=(0,o().K8)((()=>a.state.name),[a]),m=(0,s.useCallback)((()=>{if(u)return;const e=!c;_().createAndCommit({userAction:"SpaceBasicSettings.analyticsSettings.onSelectOption",environment:l,canUndo:!0,perform:a=>{C().zv({store:t,data:{settings:{...t.getSettings(),disable_page_analytics:e}},transaction:a})}}),R().vd(l,e?"page_analytics_workspace_opt_out":"page_analytics_workspace_opt_in")}),[c,l,u,t]),p=(0,r().IS)((()=>({toggleContainer:{display:"flex",gap:12,flexDirection:"column"}})),[]);return(0,xe.jsxs)(s.Fragment,{children:[(0,xe.jsx)(fe().A,{children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.analytics.title",defaultMessage:"Analytics"})}),(0,xe.jsxs)("div",{style:p.toggleContainer,children:[(0,xe.jsx)(Ze().A,{isMobile:d,title:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.analytics.settings.title",defaultMessage:"Save and display page view analytics"}),caption:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.analytics.settings.description",defaultMessage:"People with edit or full access will be able to see how many views a page has. If this is turned off, page views will not be stored for all pages in {workspaceName}.",values:{workspaceName:g}}),type:"toggle",isOn:!c,isLocked:u,lockedTooltip:(0,E().C)(),onToggle:m}),(0,xe.jsx)(Ke().A,{title:(0,xe.jsx)(x().sA,{defaultMessage:"Learn about workspace analytics.",id:"spaceBasicSettings.workspaceAnalytics.helpButton.caption"}),href:(0,O().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq"})]}),(0,Ye().J_)()]})}function rt(){const e=(0,i().v3)(),t=(0,x().tz)(),a=(0,H().O)(),n=(0,o().K8)((()=>{var t;return null===(t=e.currentUser)||void 0===t?void 0:t.id}),[e]),l=(0,te()._X)({name:"export_members",spaceId:a,userId:n}),d=(0,V().J)(),c=(0,o().K8)((()=>d&&"available"===(null==l?void 0:l.type)),[d,l]),u=(0,s.useCallback)((()=>{!function(e,t){const{currentSpaceStore:a}=P().default.state,s=ae().subscriptionDataStoreInstance.state;a&&s&&"subscribed_admin"===s.type&&M().IG(t,{spaceStore:a,subscriptionData:s,intl:e})}(t,e)}),[e,t]),g=(0,r().IS)((()=>({header:{display:"flex",alignItems:"center"},title:{marginRight:8},desktop:{marginTop:-1},button:{display:"flex"},gap:{height:12}})),[]);return(0,xe.jsxs)(s.Fragment,{children:[(0,xe.jsxs)(fe().A,{style:g.header,children:[(0,xe.jsx)("span",{style:g.title,children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.exportMembersSection.title",defaultMessage:"Export members"})}),!c&&(null==l?void 0:l.upsell)&&(0,xe.jsx)(J().B,{upsell:l.upsell,analyticsName:"space_export_members",desktopStyle:g.desktop})]}),(0,xe.jsx)("div",{style:g.button,children:(0,xe.jsx)(He().A,{size:"lg",disabled:!c,onClick:u,disabledFeedback:!0,children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.exportMembersSection.exportAsCSVButton.label",defaultMessage:"Export members as CSV"})})}),(0,xe.jsx)("div",{style:g.gap}),(0,xe.jsx)(Ke().A,{title:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.exportMembersSection.helpButton.caption",defaultMessage:"Learn about exporting members."}),href:(0,O().xS)("guides.exportMembers"),analyticsFrom:"space_settings"}),(0,Ye().J_)()]})}const lt=s.memo(st);function dt(){return(0,xe.jsx)(Ye().Ay,{children:(0,xe.jsx)(je().A,{isSmall:!0,style:{textAlign:"center"},children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.offlineMessage",defaultMessage:"Please go online to manage settings."})})})}function ct(){return(0,xe.jsx)(fe().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.public.subtitle",defaultMessage:"Public settings"})})}function ut(){return(0,xe.jsx)(fe().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.feature.subtitle",defaultMessage:"Feature settings"})})}function gt(){return(0,xe.jsx)(fe().A,{large:!0,divider:"full",children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.title",defaultMessage:"Workspace settings"})})}async function mt(e,t,a,s,i){const{currentUserSettingsStore:o}=P().default.state;if(!o)return;const r=(0,U().GK)(a,e)||t.formatMessage({defaultMessage:"Untitled workspace",id:"spaceBasicSettings.deleteWorkspace.untitledWorkspace.placeholder"}),l=(0,v().vL)(n().locale)?(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.prompt",defaultMessage:"This action cannot be undone. This will permanently delete the workspace, including all pages and files. Please type the name of the workspace to confirm."}):(0,xe.jsx)(xe.Fragment,{children:(0,xe.jsx)(Xe().A,{translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente el espacio de trabajo, incluidas todas las páginas y archivos. Por favor escriba el nombre del espacio de trabajo para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит рабочее пространство, включая все страницы и файлы. Пожалуйста, введите название рабочей области для подтверждения.",zh:"此操作无法撤消。 这将永久删除工作区，包括所有页面和文件。 请输入要确认的工作空间的名称。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird der Arbeitsbereich einschließlich aller Seiten und Dateien dauerhaft gelöscht. Bitte geben Sie den Namen des Arbeitsbereichs zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement l'espace de travail, y compris toutes les pages et tous les fichiers. Veuillez saisir le nom de l'espace de travail pour confirmer.",ja:"この操作を元に戻すことはできません。 これにより、すべてのページとファイルを含むワークスペースが完全に削除されます。 確認するワークスペースの名前を入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'area di lavoro, incluse tutte le pagine e i file. Digita il nome dell'area di lavoro per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente o espaço de trabalho, incluindo todas as páginas e arquivos. Por favor, digite o nome do espaço de trabalho para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt de werkruimte permanent verwijderd, inclusief alle pagina's en bestanden. Typ de naam van de werkruimte om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie obszaru roboczego, w tym wszystkich stron i plików. Wpisz nazwę obszaru roboczego, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort arbetsytan permanent, inklusive alla sidor och filer. Vänligen skriv in arbetsplatsens namn för att bekräfta.",uk:"Цю дію не можна скасувати. Це дозволить остаточно видалити робочу область, включаючи всі сторінки та файли. Введіть назву робочої області для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette arbeidsområdet, inkludert alle sider og filer. Vennligst skriv navnet på arbeidsområdet for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu, tüm sayfaları ve dosyaları içeren çalışma alanını kalıcı olarak siler. Lütfen onaylamak için çalışma alanının adını yazın.",cs:"Tuto akci nelze vrátit zpět. Tím se trvale odstraní pracovní prostor včetně všech stránek a souborů. Zadejte prosím název pracovního prostoru, který chcete potvrdit.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn không gian làm việc, bao gồm tất cả các trang và tệp. Vui lòng nhập tên của không gian làm việc để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette arbejdsområdet, inklusive alle sider og filer. Indtast navnet på arbejdsområdet for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a munkaterületet, beleértve az összes oldalt és fájlt. Kérjük, írja be a munkaterület nevét a megerősítéshez.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي ذلك إلى حذف مساحة العمل كليا ، بما يشمل جميع الصفحات والملفات. يرجى كتابة اسم مساحة العمل للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบพื้นที่ทำงานอย่างถาวรรวมถึงหน้าและไฟล์ทั้งหมด โปรดพิมพ์ชื่อของพื้นที่ทำงานเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את סביבת העבודה, כולל כל הדפים והקבצים. הקלד את שם מרחב העבודה כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa työtilan pysyvästi, mukaan lukien kaikki sivut ja tiedostot. Vahvista kirjoittamalla työtilan nimi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus ruang kerja, termasuk semua halaman dan file. Silakan ketik nama ruang kerja untuk mengonfirmasi."}})});await w().h({title:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.title",defaultMessage:"Delete this entire workspace permanently?"}),message:l,acceptLabel:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.deleteWorkspaceButton.label",defaultMessage:"Permanently delete workspace"}),requiredInputValue:r})&&(k().cN({environment:a,spaceId:e.id,onDelete:s,organizationId:i}),b().db(a),X().A.setState({...X().A.state,open:!1}))}function pt(){X().A.setState({...X().A.state,open:!1}),$().A.setState($().A.getInitialState())}function ht(e){let{securitySettingsStore:t,isControlledByOrganization:a}=e;const s=(0,o().K8)((()=>Boolean(null==t?void 0:t.state.enableAiFeature)),[t]);return(0,xe.jsx)("div",{children:(0,xe.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>{a||async function(e){var t;const a=(null===(t=ae().subscriptionDataStoreInstance.state)||void 0===t?void 0:t.addOns)??[],s=h().GI(a),n=!e.state.enableAiFeature;if(!n&&s&&!(await A().Gh({message:B().A.formatMessage(at.turnOffAiWhenSubscribedToAiWarning),acceptLabel:B().A.formatMessage(at.turnOffAiWhenSubscribedToAccept)})).accept)return;e&&e.setState({...e.state,enableAiFeature:n})}(t)},children:[(0,xe.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,xe.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.aiFeature.label",defaultMessage:"Notion AI"})}),(0,xe.jsx)(je().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.aiFeature.ga.caption",defaultMessage:"Enable to provide AI-powered functionality for all members of your workspace.{br}By enabling Notion AI, you are agreeing to the <inlinelink>Notion AI Supplementary Terms</inlinelink>",values:{br:(0,xe.jsx)("br",{}),inlinelink:e=>(0,xe.jsx)($e().A,{href:"https://notion.notion.site/fa9034c8b5a04818a6baf3eac2adddbb",external:!0,onClick:e=>e.stopPropagation(),children:e})}})})]}),(0,xe.jsx)("div",{style:{marginTop:5},children:(0,xe.jsx)(Ge().A,{on:s,isLocked:a,lockedTooltip:(0,E().C)()})})]})})}function ft(e){let{spaceStore:t,securitySettingsStore:a,spaceBasicSettingsStore:s}=e;const n=(0,r().IS)((()=>({title:{display:"flex",alignItems:"center",gap:8}})),[]);return(0,xe.jsx)(Ze().A,{type:"custom",isMobile:!1,title:(0,xe.jsxs)("div",{style:n.title,children:[(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.hipaaCompliance.label",defaultMessage:"HIPAA Compliance"}),(0,xe.jsx)(Ke().A,{href:(0,O().xS)("guides.hipaaCompliancy"),analyticsFrom:"space_settings"})]}),caption:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.hipaaCompliance.description",defaultMessage:"Store and process Protected Health Information (PHI) by enabling HIPAA compliance. By enabling HIPAA compliance, you are agreeing to Notion’s <inlinelink>Business Associate Agreement</inlinelink>",values:{inlinelink:e=>(0,xe.jsx)($e().A,{href:(0,O().xS)("guides.hipaaBAA"),external:!0,onClick:e=>e.stopPropagation(),children:e})}}),customButton:(0,xe.jsx)(xt,{spaceStore:t,securitySettingsStore:a})})}function xt(e){let{spaceStore:t,securitySettingsStore:a}=e;const n=(0,i().v3)(),r=(0,o().K8)((()=>(0,U().Ar)(t)),[t]),[l,d]=s.useState(r),[c,u]=s.useState(!1),[g,m]=s.useState(!1),p=(0,s.useCallback)((()=>async function(e){let{securitySettingsStore:t,spaceStore:a,environment:s,isGoingToDisableHIPAACompliancy:n,openModal:i,closeModal:o}=e;o(),t.setState({...t.state,zeroRetentionEnabled:!t.state.zeroRetentionEnabled}),T().V(s,{spaceStore:a,securitySettingsState:t.state}),k().xu(s,a),i(),await j().callApi({eventName:"sendHIPAACompliancyUpdate",environment:s,data:{spaceId:a.id,isDisablingHIPAA:n}})}({securitySettingsStore:a,spaceStore:t,environment:n,isGoingToDisableHIPAACompliancy:l,openModal:()=>m(!0),closeModal:()=>u(!1)})),[n,a,t,l]);return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(W().YS,{isOpen:g,hasDisabledHIPAACompliancy:l,onClose:()=>m(!1)}),(0,xe.jsx)(W().TD,{isOpen:c,onClose:()=>u(!1),onConfirmDecision:p,isDisablingHIPAACompliancy:l}),(0,xe.jsx)(He().A,{size:"lg",onClick:()=>{u(!0),d(a.state.zeroRetentionEnabled)},children:(0,xe.jsx)(x().sA,{...r?at.deactivateHIPAAButton:at.activateHIPAAButton})})]})}function vt(e){let{securitySettingsStore:t}=e;const a=(0,o().K8)((()=>Boolean(t.state.enableAiTraining)),[t]);return(0,xe.jsx)("div",{children:(0,xe.jsxs)("div",{style:{display:"flex",alignItems:"center"},onClick:()=>{t.setState({...t.state,enableAiTraining:!a})},children:[(0,xe.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,xe.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.aiLeap.label",defaultMessage:"Share data to improve Notion AI"})}),(0,xe.jsx)(je().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.aiLeap.description",defaultMessage:"Help improve Notion’s AI models by allowing data from across this workspace to be shared with Notion.{br}By enabling AI LEAP (Learning and Early Access Program) you are agreeing to the <inlinelink>Notion AI LEAP Supplementary Terms</inlinelink>. <learnmore>Learn more</learnmore>.",values:{br:(0,xe.jsx)("br",{}),learnmore:e=>(0,xe.jsx)($e().A,{href:"https://www.notion.so/help/notion-ai-leap-program-faqs",external:!0,onClick:e=>e.stopPropagation(),children:e}),inlinelink:e=>(0,xe.jsx)($e().A,{href:"https://notion.notion.site/0c55d702d0154a788d9e70c4ee396399",external:!0,onClick:e=>e.stopPropagation(),children:e})}})})]}),(0,xe.jsx)("div",{style:{marginTop:5},children:(0,xe.jsx)(Ge().A,{on:a})})]})})}function yt(e){let{spaceStore:t,spaceBasicSettingsStore:a,trustedEmailDomains:n}=e;const r=(0,i().v3)(),l=(0,x().tz)(),{device:c}=r,[g,m]=(0,s.useState)(""),p=(0,o().K8)((()=>a.state.emailDomains),[a]),h=(0,o().K8)((()=>t.canAdmin()),[t]),f=(0,o().O$)(ae().subscriptionDataStoreInstance),v=(0,s.useCallback)((e=>{m(e.target.value)}),[]);return(0,xe.jsx)(We().Ay,{popupType:c.isMobile?q().n.SlideUp:q().n.Popup,sameWidthAsOrigin:!0,open:g.length>0,origin:(0,xe.jsx)(et().A,{placeholder:l.formatMessage(at.allowedEmailDomainsInputPlaceholder),value:g,onChange:v,readOnly:!h,onRemoveLastToken:()=>{const e=p.slice(0,p.length-1);a.setState({...a.state,emailDomains:e})},tokens:p.map((e=>(0,xe.jsx)(Je().A,{showRemoveButton:!0,isSingle:!1,format:d().NY.Medium,onClickRemove:()=>{const t=p.filter((t=>t!==e));a.setState({...a.state,emailDomains:t})},value:e},e)))}),render:()=>{const e=g.trim(),s=(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholder",defaultMessage:"Type an email domain…"}),i=(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholderNoResults",defaultMessage:"Type an email domain of a member of this workspace…"}),o=bt({subscriptionData:f,spaceStore:t,emailDomainsToExclude:[...p,...n]}),r=(0,u().Ay)(e,o,(e=>e)).map(((e,t)=>({key:t,render:t=>(0,xe.jsx)(Ae().A,{...t,title:e}),action:()=>{const t=[...p,e];a.setState({...a.state,emailDomains:t}),m("")}})));let l;return l=c.isMobile?{menuType:L().gu.ActionSheet}:{menuType:L().gu.Popup,width:"100%"},(0,xe.jsx)(Me().A,{...l,children:(0,xe.jsx)(Ce().Ay,{type:Ce().Oh.Vertical,initialFocus:r.length>0?0:void 0,sections:[{key:0,render:e=>(0,xe.jsx)(Ie().A,{...e,disableDesktopPadding:!0,title:r.length>0?s:i}),items:r}]})})},onDismiss:()=>{m("")}})}function bt(e){const{subscriptionData:t,spaceStore:a,emailDomainsToExclude:s}=e;return t?N().Ye(t).map((e=>{if(("unsubscribed_admin"===t.type||"unsubscribed_member"===t.type||"subscribed_admin"===t.type)&&t.joinedMemberIds.includes(e.userId)){const t=Q().LU.createChildStore(a,{table:m().oo,id:e.userId}).getEmail();return t&&(0,c().zN)(t)}})).filter(((e,t,a)=>Boolean(e&&t===a.indexOf(e)&&!s.includes(e)))):[]}function St(e){let{spaceStore:t,spaceBasicSettingsStore:a,trustedDomainsState:n,trustedDomainStores:r}=e;const l=(0,i().v3)(),{isMobile:d}=l.device,c=(0,o().uB)(void 0,Ve),u=(0,s.useCallback)((()=>{D().SI({environment:l,from:"trusted_domain_settings_section"})}),[l]),g=(0,o().K8)((()=>(0,f().OX)(t.getSubscriptionTier())),[t]),m=(0,o().K8)((()=>t.getName()),[t]),p=(0,o().K8)((()=>Boolean("request_to_join"===t.getSettings().join_space_method)),[t]),h=(0,o().K8)((()=>Boolean(t.getSettings().domain_link_sharing_enabled)),[t]),v=(0,F().X)("trusted_domain_admin_redesign"),y=(0,s.useCallback)((async e=>{const{newDomainLinkSharingValue:a,newJoinSpaceMethod:s}=e;await j().callApi({eventName:"updateSpaceTrustedDomainSettings",environment:l,data:{spaceId:t.id,newDomainLinkSharingValue:a,newJoinSpaceMethod:s}})}),[l,t]),b=(0,s.useCallback)((async()=>{await y({newDomainLinkSharingValue:!h})}),[y,h]),S=(0,s.useCallback)((async()=>{const e=p?"click_to_join":"request_to_join";await y({newJoinSpaceMethod:e})}),[y,p]),w=(null==r?void 0:r.length)>0;return"resolved"===n.status&&w?v?(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(ce().VP,{children:(0,xe.jsx)(Ze().A,{isMobile:d,disabled:!g,upsellOptions:{shouldUpsell:!g,subscriptionTier:"enterprise",analyticsName:"trusted_domain_item"},title:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.trustedDomainsSection.allowShareWithTrustedDomains.title",defaultMessage:"Enable organization-wide access for pages shared with this workspace"}),caption:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.trustedDomainsSection.allowShareWithTrustedDomains.description",defaultMessage:"Allow teammates with trusted email domains who aren’t workspace members to access pages shared with “Everyone at {spaceName}”",values:{spaceName:m}}),type:"toggle",isOn:h,onToggle:b})}),(0,Ye().J_)(),(0,xe.jsx)(ce().VP,{children:(0,xe.jsx)(Ze().A,{isMobile:d,disabled:!g,upsellOptions:{shouldUpsell:!g,subscriptionTier:"enterprise",analyticsName:"trusted_domain_item"},title:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.trustedDomainsSection.setJoinSpaceMethod.title",defaultMessage:"Teammates with trusted email domains can join"}),caption:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.trustedDomainsSection.setJoinSpaceMethod.description",defaultMessage:"Allow teammates with trusted email domains to join this workspace without requesting access"}),type:"custom",customButton:(0,xe.jsxs)(ce().fI,{children:[p&&g&&(0,xe.jsx)(be,{spaceStore:t}),(0,xe.jsx)(ce().VP,{justifyContent:"center",children:(0,xe.jsx)(Ge().A,{on:!p,disabled:!g,onClick:S})})]}),disableSettingsItemClick:!0})}),(0,Ye().J_)()]}):(0,xe.jsxs)(s.Fragment,{children:[(0,xe.jsx)(Ze().A,{type:"custom",isMobile:!1,title:(0,xe.jsxs)(ce().fI,{gap:8,children:[(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.trustedDomainLinkSharingSection.title",defaultMessage:"Share pages with anyone at your company"}),(0,xe.jsx)(Ke().A,{href:(0,O().xS)("guides.guides"),analyticsFrom:"space_settings"})]}),caption:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.trustedDomainsSection.addTrustedDomain.caption",defaultMessage:"Members can share pages with anyone with these trusted email domains, even if they're not yet on Notion. Please message <supportLink>support</supportLink> if you need assistance.",values:{supportLink:e=>(0,xe.jsx)($e().A,{onClick:u,children:e})}}),customButton:(0,xe.jsx)(xe.Fragment,{})}),(0,xe.jsx)(ce().fI,{marginTop:8,children:(0,xe.jsx)(Oe,{addTrustedDomainStore:c,spaceStore:t,spaceBasicSettingsStore:a,trustedDomainNumMembers:n.value.trustedDomainNumMembers,trustedDomainStores:r})})]}):null}function jt(e){let{spaceStore:t}=e;const a=(0,i().v3)(),n=(0,x().tz)(),[r,d]=s.useState(!1),c=(0,o().K8)((()=>P().default.state.currentUserRootStore),[]),u=(0,o().K8)((()=>P().default.state.currentUserSettingsStore),[]),g=(0,ee().lh)({spaceId:t.id}),m=(0,s.useCallback)((async()=>{c&&u&&(await I().sy({environment:a,inMemoryRecordCache:a.defaultRecordCache.inMemoryRecordCache,pointer:{table:p().GD,id:c.id},userId:a.currentUser.id}),k().t9({environment:a,userRootStore:c,ignoreSpaceId:t.id,userSettingsStore:u,pageVisitSource:l().y8.SwitchSpace}))}),[a,c,u,t.id]);return(0,xe.jsxs)(xe.Fragment,{children:[r?(0,xe.jsx)(Z().S4,{billingData:g,isOpen:r,onClose:()=>d(!1),onConfirmDelete:async()=>await mt(t,n,a,m),spaceStore:t}):null,(0,xe.jsx)(He().A,{size:"lg",color:"uiRed",onClick:async()=>await async function(e){const{environment:t,spaceStore:a,intl:s,showDowngradeModal:n,onDelete:i}=e,o=ae().subscriptionDataStoreInstance.state,r=N().RJ(o);if((0,S().H)(t),r)return void n();await mt(a,s,t,i)}({environment:a,spaceStore:t,intl:n,showDowngradeModal:()=>d(!0),onDelete:m}),children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceButton.label",defaultMessage:"Delete entire workspace"})})]})}function wt(e){let{spaceStore:t,spaceBasicSettingsStore:a,securitySettingsStore:n}=e;const o=(0,i().v3)(),r=(0,s.useCallback)((()=>async function(e,t,a,s){await k().Ef({environment:e,spaceStore:t,spaceBasicSettingsStore:a,securitySettingsStore:s}),$().A.setState($().A.getInitialState()),X().A.setState({...X().A.state,open:!1}),Y().A.resetData(e,{spaceId:t.id})}(o,t,a,n)),[o,t,a,n]);return(0,xe.jsxs)("div",{style:{display:"flex"},children:[(0,xe.jsx)(pe().A,{size:"lg",onClick:r,disabled:!1,children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.updateButton.label",defaultMessage:"Update"})}),(0,xe.jsx)(He().A,{size:"lg",style:{marginLeft:12},onClick:pt,children:(0,xe.jsx)(x().sA,{id:"spaceBasicSettings.cancelButton.label",defaultMessage:"Cancel"})})]})}},174517:(e,t,a)=>{a.d(t,{$:()=>j,p:()=>S});var s=a(296540),n=()=>a(484714),i=()=>a(401497),o=()=>a(959013),r=()=>a(449506),l=()=>a(901389),d=()=>a(436572),c=()=>a(898486),u=()=>a(364280),g=()=>a(7674),m=()=>a(554509),p=()=>a(107683),h=()=>a(437594),f=()=>a(625319),x=()=>a(602105),v=()=>a(2609),y=()=>a(688437),b=a(474848);function S(e){let{refetchPendingDomains:t,onDismiss:a,domainVerification:i,regenerateCode:u}=e;const h=(0,n().v3)(),x=(0,o().tz)(),[S,A]=(0,s.useState)(!1),M=(0,y().x5)(),{refreshOrganization:C}=(0,s.useContext)(f().D),I=(0,s.useCallback)((async()=>{if(S)return;A(!0);const e=await r().callApi({eventName:"verifyDomain",environment:h,data:{verificationId:i.id}});"success"===e.type?(A(!1),t(),C(),d().D6({label:(0,b.jsx)(m().D,{styleName:"UIRegular-14px/Regular",children:(0,b.jsx)(o().sA,{id:"organizationEmailDomainsTable.toastMessage.verifyDomain.success",defaultMessage:"Successfully verified <b>{domain}</b>",values:{domain:i.domain,b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,b.jsx)("b",{children:t})}}})})}),a()):(l().f1((0,c().Hu)(x,e)),A(!1))}),[h,x,S,A,t,C,i.id,i.domain,a]);return(0,b.jsx)(p().s,{isOpen:!0,onDismiss:a,render:e=>{let{sizeRange:t}=e;return(0,b.jsx)(g().tf,{showDismissButton:!1,sizeRange:t,header:(0,b.jsx)(y().Ws,{}),footer:(0,b.jsx)(v().jl,{primaryText:(0,b.jsx)(o().sA,{...w.verifyButton}),primaryAction:I,primaryDisabled:"invalid"===i.type,secondaryText:(0,b.jsx)(o().sA,{...w.cancelButton}),secondaryAction:a,isLoading:S}),children:(0,b.jsx)("div",{style:M.content,children:(0,b.jsx)(j,{domainVerification:i,regenerateCode:u})})})}})}function j(e){let{domainVerification:t,regenerateCode:a}=e;const s=(0,i().IS)((e=>({instructionsContainer:{padding:16,borderRadius:x().V.medium,background:e.cardBackground,display:"flex",flexDirection:"column",gap:16},list:{color:e.text.secondary,fontSize:12,lineHeight:"16px"}})),[]);return(0,b.jsxs)(u().VP,{gap:24,children:[(0,b.jsxs)(u().VP,{gap:12,children:[(0,b.jsx)(h().bi,{domainVerification:t,regenerateCode:a}),(0,b.jsx)(h().KS,{domainVerification:t})]}),(0,b.jsxs)("div",{style:s.instructionsContainer,children:[(0,b.jsx)(m().D,{styleName:"Body-12px/Medium",children:(0,b.jsx)(o().sA,{...w.instructionsHeader})}),(0,b.jsx)(h().vr,{listStyles:s.list})]})]})}const w=(0,o().YK)({verifyButton:{id:"orgConsole.emailDomains.verifyEmailDomainModal.button.verify",defaultMessage:"Verify domain"},cancelButton:{id:"orgConsole.emailDomains.verifyEmailDomainModal.button.cancel",defaultMessage:"Cancel"},inputLabel:{id:"orgConsole.emailDomains.verifyEmailDomainModal.verificationCodeInputLabel",defaultMessage:"Your verification code"},instructionsHeader:{id:"orgConsole.emailDomains.verifyEmailDomainModal.instuctionsHeader",defaultMessage:"Instructions to verify your domain"}})},175458:(e,t,a)=>{a.d(t,{a:()=>u});a(296540);var s=()=>a(401497),n=()=>a(416845),i=()=>a(959013),o=()=>a(100622),r=()=>a(284371),l=()=>a(298697),d=()=>a(125565),c=a(474848);function u(e){let{icon:t,iconStyles:a,textStyles:u,style:g,title:m,byline:p,loading:h,error:f}=e;const x=function(e,t,a){return(0,s().IS)((s=>({title:{fontWeight:r().Wy.medium,fontSize:16,maxWidth:"100%"},byline:{fontSize:r().J.UISmall.desktop,marginTop:4},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",overflow:"hidden",...t},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:8},icon:{height:28,width:28,color:s.lightTextColor,fill:"currentcolor",...e},container:{height:"100%",flex:1,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",border:`1px solid ${s.outlineButtonBorder}`,borderRadius:4,padding:12,gap:8,...a},loadingTitle:{display:"block",width:"40%"},loadingByline:{display:"block",width:"60%",marginTop:8,marginBottom:8},errorTitle:{textAlign:"center",color:o().Ay.red}})),[e,t,a])}(a,u,g);return h?(0,c.jsx)("div",{style:x.container,children:(0,c.jsxs)("div",{style:x.textContainer,children:[(0,c.jsx)("div",{style:x.loadingTitle,children:(0,c.jsx)(l().A,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}),p?(0,c.jsx)("div",{style:x.loadingByline,children:(0,c.jsx)(l().A,{paragraphs:[{lineHeight:14,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}):null]})}):f?(0,c.jsx)("div",{style:x.container,children:(0,c.jsx)("div",{style:x.titleContainer,children:(0,c.jsx)(d().A,{style:x.errorTitle,children:(0,n().op)(f)?f.message:(0,c.jsx)(i().sA,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,c.jsx)("br",{})}})})})}):(0,c.jsxs)("div",{style:x.container,children:[t?t(x.icon):null,(0,c.jsxs)("div",{style:x.textContainer,children:[(0,c.jsx)(d().A,{style:x.title,showTooltipWhenTruncated:!0,children:m}),p?(0,c.jsx)(d().A,{style:x.byline,isMultiline:!0,children:p}):null]})]})}},182392:(e,t,a)=>{a.d(t,{i:()=>l,y:()=>r});var s=()=>a(734459),n=()=>a(435009),i=()=>a(989423),o=()=>a(216441);function r(e,t,a){n().oo({environment:e,url:(0,s().re)({organizationId:t,tabRoute:a})})}function l(e){const{environment:t,from:a,organizationId:r,tabRoute:l,properties:d,queryParams:c}=e;function u(e,t){const a=null==e?void 0:e.name,s=null==t?void 0:t.subtab;return a?s?`${a}/${s}`:a:void 0}r&&(0,i().u4)({environment:t,event:{eventName:"org_console_navigate_to_page",eventProperties:{organizationId:r,route:u(l,d),from:u(null==a?void 0:a.tabRoute,null==a?void 0:a.properties),spaceId:null==c?void 0:c[o().ge]}}}),n().oo({environment:t,url:(0,s().re)({organizationId:r,tabRoute:l,properties:d,queryParams:c})})}},183607:(e,t,a)=>{a.d(t,{X:()=>n});a(296540);var s=a(474848);const n=(0,a(340498).wt)("arrowsDiverging",{viewBox:"0 0 12 12",svg:(0,s.jsx)("path",{d:"M6 11.2891C6.42188 11.2891 6.63281 11.0469 6.63281 10.5625V7.3457C6.63281 7.00586 6.71875 6.64062 6.89062 6.25C7.06641 5.85938 7.29492 5.47266 7.57617 5.08984C7.86133 4.70703 8.16992 4.35547 8.50195 4.03516C8.83789 3.71484 9.16406 3.45312 9.48047 3.25L9.95508 2.94531C10.1621 2.81641 10.2656 2.63281 10.2656 2.39453C10.2656 2.21875 10.2109 2.07227 10.1016 1.95508C9.99219 1.83789 9.8418 1.7793 9.65039 1.7793C9.4668 1.7793 9.29102 1.83398 9.12305 1.94336L8.81836 2.14844C8.51367 2.34766 8.20898 2.58984 7.9043 2.875C7.59961 3.15625 7.31641 3.45508 7.05469 3.77148C6.79297 4.08398 6.56836 4.39258 6.38086 4.69727C6.19727 4.99805 6.07227 5.26953 6.00586 5.51172H5.98828C5.91797 5.26953 5.79102 4.99805 5.60742 4.69727C5.42383 4.39258 5.19922 4.08398 4.93359 3.77148C4.67188 3.45508 4.38867 3.15625 4.08398 2.875C3.7832 2.58984 3.48047 2.34766 3.17578 2.14844L2.87109 1.94336C2.69922 1.83398 2.52344 1.7793 2.34375 1.7793C2.14844 1.7793 1.99609 1.83984 1.88672 1.96094C1.78125 2.08203 1.72852 2.22461 1.72852 2.38867C1.72852 2.62695 1.83203 2.8125 2.03906 2.94531L2.51367 3.25C2.83008 3.45312 3.1543 3.71484 3.48633 4.03516C3.81836 4.35547 4.12695 4.70703 4.41211 5.08984C4.69727 5.47266 4.92773 5.85938 5.10352 6.25C5.2793 6.64062 5.36719 7.00586 5.36719 7.3457V10.5625C5.36719 11.0469 5.57812 11.2891 6 11.2891ZM1.81641 3.9707L3.71484 1.52734C3.85547 1.33984 3.88281 1.17578 3.79688 1.03516C3.71484 0.890625 3.55469 0.814453 3.31641 0.806641L0.808594 0.712891C0.613281 0.705078 0.466797 0.763672 0.369141 0.888672C0.271484 1.00977 0.251953 1.16406 0.310547 1.35156L1.02539 3.75391C1.0918 3.98438 1.20312 4.125 1.35938 4.17578C1.51953 4.22656 1.67188 4.1582 1.81641 3.9707ZM10.0898 3.95898C10.2266 4.1543 10.375 4.23047 10.5352 4.1875C10.6992 4.14062 10.8164 4.00391 10.8867 3.77734L11.6777 1.39258C11.7402 1.20508 11.7246 1.04883 11.6309 0.923828C11.541 0.798828 11.3984 0.736328 11.2031 0.736328L8.68945 0.753906C8.45117 0.753906 8.28711 0.824219 8.19727 0.964844C8.10742 1.10156 8.13086 1.26562 8.26758 1.45703L10.0898 3.95898Z"})})},188668:(e,t,a)=>{a.d(t,{R:()=>D,Z:()=>z});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(401497),r=()=>a(576250),l=()=>a(854150),d=()=>a(798880),c=()=>a(301608),u=()=>a(959013),g=()=>a(534177),m=()=>a(284371),p=()=>a(76590),h=()=>a(972435),f=()=>a(836251),x=()=>a(997583),v=()=>a(962730),y=()=>a(630116),b=()=>a(249117),S=()=>a(859428),j=()=>a(125565),w=()=>a(690197),A=()=>a(655546),M=()=>a(511303),C=()=>a(374255),I=()=>a(175458),T=()=>a(733815),k=a(474848);const _=640;function D(e){let{data:t,loading:a,error:r,daysFilter:g,setDaysFilter:D}=e;const P=(0,n().v3)(),{activeMembersCount:N,previousActiveMembersCount:R,activeGuestsCount:B,previousActiveGuestsCount:L,topTeamspaces:E,topViewers:O,topEditors:U}=t,F=(0,o().IS)((e=>({title:{fontWeight:m().Wy.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},summaryCard:{minHeight:70},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16}})),[]),[V,H]=(0,x().z)(),{organizationOwnerRecordCache:W}=(0,s.useContext)(M().N),q=(0,s.useCallback)((e=>{p().n_(P,{filter:"user_engagement",daysFilter:e}),D(e)}),[P,D]),G=(0,i().K8)((()=>E.map((e=>{let{teamspaceId:t,pageViews:a}=e;return{store:new(y().h4)(P,{id:t,table:l().yK},{inMemoryRecordCache:W}),caption:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageViews",defaultMessage:"{pageViews} views",values:{pageViews:(0,k.jsx)(A()._,{abbreviateNumber:!0,num:a})}})}})).filter((e=>e.store.canRead())).slice(0,5)),[P,E,W]),K=(0,i().K8)((()=>O.map((e=>{let{userId:t,pageViews:a}=e;return{store:new(y().LU)(P,{id:t,table:d().oo}),caption:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,k.jsx)(A()._,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[P,O]),Y=(0,i().K8)((()=>U.map((e=>{let{userId:t,pageEdits:a}=e;return{store:new(y().LU)(P,{id:t,table:d().oo}),caption:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,k.jsx)(A()._,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[P,U]);return(0,k.jsxs)("div",{style:F.container,ref:V,children:[(0,k.jsxs)("div",{style:F.titleContainer,children:[(0,k.jsxs)(j().A,{style:F.title,children:[(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.title",defaultMessage:"User engagement"}),(0,k.jsx)(S().A,{placement:v().W.Bottom,render:e=>(0,k.jsx)(w().A,{...e,href:(0,f().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:F.helpInfo}),renderTooltip:()=>"all_time"!==g?(0,k.jsx)(u().sA,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:h().A.formatMessage(c().Yr[g])}}):(0,k.jsx)(u().sA,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,k.jsx)(T().Z,{currentFilter:g,onChangeFilter:q})]}),(0,k.jsxs)(b().xA,{gap:16,children:[(0,k.jsx)(b().LX,{row:1,col:1,children:(0,k.jsx)(I().a,{style:F.summaryCard,loading:a,error:r,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,k.jsx)(A()._,{abbreviateNumber:H<_,num:N})}}),byline:void 0!==R?(0,k.jsx)(z,{userType:"members",daysFilter:g,count:N,previousCount:R}):null})}),(0,k.jsx)(b().LX,{row:1,col:2,children:(0,k.jsx)(I().a,{style:F.summaryCard,loading:a,error:r,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,k.jsx)(A()._,{abbreviateNumber:H<_,num:B})}}),byline:void 0!==L?(0,k.jsx)(z,{userType:"guests",daysFilter:g,count:B,previousCount:L}):null})})]}),(0,k.jsxs)(b().xA,{gap:16,children:[(0,k.jsx)(b().LX,{row:1,col:1,children:(0,k.jsx)(C().N,{loading:a,error:r,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeTeamspaces",defaultMessage:"Most active teamspaces"}),items:G})}),(0,k.jsx)(b().LX,{row:1,col:2,children:(0,k.jsx)(C().N,{loading:a,error:r,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeViewers",defaultMessage:"Most active viewers"}),items:K})}),(0,k.jsx)(b().LX,{row:1,col:3,children:(0,k.jsx)(C().N,{loading:a,error:r,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeEditors",defaultMessage:"Most active editors"}),items:Y})})]})]})}function z(e){let{userType:t,daysFilter:a,count:s,previousCount:n}=e;const i=0===s&&0===n?0:Math.round((s-n)/n*100);let l;l=i===1/0?function(e,t,a){if("all_time"===a)return(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"});return"guests"===e?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.guests.positive",defaultMessage:"{changeValue} more guests than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:c().Eb[a].toLocaleString()}}):(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.members.positive",defaultMessage:"{changeValue} more members than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:c().Eb[a].toLocaleString()}})}(t,s,a):function(e,t){switch(t){case"all_time":return 0===e?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"}):e>0?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.positive",defaultMessage:"{changeInPercentage}% more since the start",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.negative",defaultMessage:"{changeInPercentage}% less since the start",values:{changeInPercentage:Math.abs(e)}});case"last_90_days":return 0===e?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.none",defaultMessage:"No changes in previous 90 days"}):e>0?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.positive",defaultMessage:"{changeInPercentage}% more than previous 90 days",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.negative",defaultMessage:"{changeInPercentage}% less than previous 90 days",values:{changeInPercentage:Math.abs(e)}});case"last_28_days":return 0===e?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.none",defaultMessage:"No changes in previous 28 days"}):e>0?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.positive",defaultMessage:"{changeInPercentage}% more than previous 28 days",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.negative",defaultMessage:"{changeInPercentage}% less than previous 28 days",values:{changeInPercentage:Math.abs(e)}});case"last_7_days":return 0===e?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.none",defaultMessage:"No changes in previous 7 days"}):e>0?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.positive",defaultMessage:"{changeInPercentage}% more than previous 7 days",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.negative",defaultMessage:"{changeInPercentage}% less than previous 7 days",values:{changeInPercentage:Math.abs(e)}});default:(0,g().HB)(t)}}(i,a);const d=i>0?(0,r().y)({height:12,width:12,fill:"currentColor"}):i<0?(0,r().y)({height:12,width:12,transform:"rotate(90deg)",fill:"currentColor"}):void 0,m=(0,o().IS)((e=>({text:{color:i>0?e.accentColors.green[500]:i<0?e.accentColors.red[500]:e.lightTextColor,display:"flex",alignItems:"center",gap:4}})),[i]);return(0,k.jsxs)("span",{style:m.text,children:[d,l]})}},189157:(e,t,a)=>{a.d(t,{A:()=>n});class s extends(()=>a(757695))().default{getInitialState(){return{displaySummary:!0,openDropdown:!1,query:""}}}const n=new s},190106:(e,t,a)=>{a.d(t,{A:()=>x});var s=a(296540),n=()=>a(484714),i=()=>a(401497),o=()=>a(199734),r=()=>a(959013),l=()=>a(284371),d=()=>a(701763),c=()=>a(753199),u=()=>a(621979),g=()=>a(145214),m=()=>a(285790),p=()=>a(297872),h=()=>a(623580),f=a(474848);function x(e){let{handleSearchQueryChange:t,handleEnterPressed:a,handleInputCleared:x,currentTab:v,isSearchBarAlwaysOpen:y}=e;const b=(0,n().v3)(),{styles:S,isSearchOpen:j,intl:w,handleSearchButtonClick:A,handleSearchDismiss:M,searchQuery:C,setSearchQuery:I}=function(e){let{handleSearchQueryChange:t,handleInputCleared:a,currentTab:o,isSearchBarAlwaysOpen:c}=e;const u=(0,i().IS)((e=>({searchIcon:{width:14,height:void 0,fill:e.mediumTextColor},topbarIconButton:{display:"flex",alignItems:"center",fontSize:14,height:28,width:28,padding:6,color:e.mediumTextColor,fill:e.mediumIconColor,fontWeight:l().Wy.regular,lineHeight:1,borderRadius:4},searchInput:{fontSize:14,lineHeight:1,paddingRight:4,color:e.regularTextColor,marginBottom:1}})),[]),g=(0,n().v3)(),[m,p]=(0,s.useState)(!1),[h,f]=(0,s.useState)(void 0),x=(0,s.useCallback)((()=>{p(!0),o&&d().Z9(g,{current_tab:o})}),[g,o]),v=(0,s.useCallback)((()=>{p(!1),f(void 0),t(void 0),null==a||a()}),[t,a]),y=(0,r().tz)();return{styles:u,isSearchOpen:m||c,intl:y,handleSearchButtonClick:x,handleSearchDismiss:v,searchQuery:h,setSearchQuery:f}}({handleSearchQueryChange:t,handleInputCleared:x,currentTab:v,isSearchBarAlwaysOpen:y});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m().A,{ariaLabel:w.formatMessage({id:"searchPlaceholder",defaultMessage:"Type to search..."}),icon:o().U,iconStyle:S.searchIcon,style:S.topbarIconButton,onClick:A,disableBackground:y}),(0,f.jsx)(g().A,{visible:j,animate:{width:150,opacity:1},initial:{width:0,opacity:0},exit:{width:0,opacity:0},skip:y,children:(0,f.jsx)(p().A,{capture:j,allowEsc:!0,render:e=>(0,f.jsx)("div",{style:{display:"flex",alignItems:"center",overflow:"hidden"},...e,children:(0,f.jsx)(h().A,{style:S.searchInput,format:h().C.Transparent,value:C,onChange:e=>{const a=e.target.value;I(a),t(a)},placeholder:w.formatMessage({id:"searchPlaceholder",defaultMessage:"Type to search..."}),focusInitial:j,showClearButton:!0,onCancel:M,onClick:c().kV,onClearButtonClick:M,onKeyDown:e=>{27===e.keyCode&&M(),a&&(0,u().A)(b,e,"enter")&&a()},onBlur:()=>{!C&&M()}})})})})]})}},194763:(e,t,a)=>{a.d(t,{A:()=>n});class s extends(()=>a(757695))().default{getInitialState(){return{name:"",emailDomains:[]}}getValueForSpace(e){if(e.isDefined())return{name:e.getName()||"",emailDomains:e.getEmailDomains()}}}const n=s},200582:(e,t,a)=>{a.d(t,{m:()=>n});a(296540);const s={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M11.633 1.812c.263.096.43.354.41.632l-.392 5.51h3.099a.625.625 0 0 1 .506.992l-6.18 8.54a.625.625 0 0 1-1.13-.412l.402-5.5H5.25a.625.625 0 0 1-.507-.99l6.17-8.55a.625.625 0 0 1 .72-.222m-5.161 8.513H9.02a.625.625 0 0 1 .623.67l-.29 3.976 4.173-5.766H10.98a.625.625 0 0 1-.623-.67l.284-3.987z"})},n=(0,a(340498).wt)("lightning",s)},201549:(e,t,a)=>{a.d(t,{Dd:()=>be,z_:()=>Se,_3:()=>je,Lw:()=>ze,uU:()=>Ce,UP:()=>le,QF:()=>De,U6:()=>Ie,M0:()=>Te,s6:()=>ve,IG:()=>pe,P_:()=>de,aC:()=>_e,X:()=>Pe,Sg:()=>he,id:()=>Me,Ss:()=>ge});a(898992),a(354520),a(672577),a(430670),a(581454),a(296540);var s=()=>a(700500),n=()=>a(857639),i=()=>a(416504),o=()=>a(416845),r=()=>a(763884),l=()=>a(386164),d=()=>a(179034),c=()=>a(519831),u=()=>a(946064),g=()=>a(96689),m=()=>a(798880),p=()=>a(959013),h=()=>a(496603),f=()=>a(763824),x=()=>a(534177),v=()=>a(583835);const y=(0,v().Dv)("exportAdminContentSearch"),b=(0,v().Dv)("exportAuditLog"),S=(0,v().Dv)("exportBlock"),j=(0,v().Dv)("exportContentAnalytics"),w=(0,v().Dv)("exportDomainClaimableSpaces"),A=(0,v().Dv)("exportDomainClaimableSpacesForOrganization"),M=(0,v().Dv)("exportSpace"),C=(0,v().Dv)("exportUserAnalytics");var I=()=>a(30731),T=()=>a(56366),k=()=>a(250064),_=()=>a(802790),D=a(474848);const z={fontWeight:a(284371).Wy.semibold};const P=function(e){let{exportProgressStore:t,disabledExportTeamNames:s}=e;const{messageStyle:n,spinnerContainerStyle:i}=(0,a(401497).IS)((e=>({messageStyle:{fontSize:14,color:e.mediumTextColor,textAlign:"center"},spinnerContainerStyle:{marginTop:24,marginBottom:24,display:"flex",justifyContent:"center"}})),[]);return(0,D.jsxs)("div",{style:n,children:[(0,D.jsx)("div",{style:i,children:(0,D.jsx)(a(331542).A,{})}),(0,D.jsx)(B,{exportProgressStore:t}),(0,D.jsx)(R,{exportProgressStore:t}),(0,D.jsx)(N,{disabledExportTeamNames:s})]})};function N(e){let{disabledExportTeamNames:t}=e;return t.length>0?(0,D.jsxs)("span",{children:[(0,D.jsx)(_().A,{size:10}),(0,D.jsx)("p",{children:(0,D.jsx)(p().sA,{id:"exportActions.exportDisabledTeams.message",defaultMessage:"Export is disabled for the following teamspaces: <b>{teamNames}</b>",values:{teamNames:(0,k().l)(t),b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,D.jsx)("span",{style:z,children:t})}}})})]}):null}function R(e){let{exportProgressStore:t}=e;return(0,T().K8)((()=>t.state.targetEmailAddress),[t])?(0,D.jsx)("p",{children:(0,D.jsx)(p().sA,{id:"exportProgressDialog.emailMessage",defaultMessage:"We'll also send you an email with the download link."})}):null}function B(e){let{exportProgressStore:t}=e;const a=(0,T().K8)((()=>t.state.pagesExported),[t]);return a>0?(0,D.jsx)("p",{children:(0,D.jsx)(p().sA,{id:"exportProgressDialog.exportedPagesMessage",defaultMessage:"{pagesExported, plural, one {{pagesExported} page exported} other {{pagesExported} pages exported}}",values:{pagesExported:a}})}):(0,D.jsx)("p",{children:(0,D.jsx)(p().sA,{id:"exportProgressDialog.exportStartedMessage",defaultMessage:"Exporting…"})})}var L=()=>a(878377),E=()=>a(638146),O=()=>a(898486),U=()=>a(972435),F=()=>a(71304),V=()=>a(544019),H=()=>a(351360),W=()=>a(605402),q=()=>a(508496),G=()=>a(436529);class K extends(()=>a(757695))().default{getInitialState(){return{pagesExported:0}}}const Y=K;var Q=()=>a(630116),$=()=>a(870092),X=()=>a(134217),Z=()=>a(701763),J=()=>a(989423);function ee(e,t){J().vd(e,"export",t)}function te(e,t){J().vd(e,"export_failed",t)}var ae=()=>a(449506),se=()=>a(901389),ne=()=>a(235116),ie=()=>a(357625),oe=()=>a(496414);const re=(0,p().YK)({exporting:{id:"exportActions.exporting.loadingMessage",defaultMessage:"Exporting"},exportAuditLogEmail:{id:"exportActions.auditLog.exporting.EmailMessage",defaultMessage:"Your CSV export is currently being generated. The generated CSV has a 2-hour delay from the real time audit log. Once it is ready, an email will be sent to you with the download link."},exportCSVEmail:{id:"exportActions.exportingCSV.EmailMessage",defaultMessage:"Your CSV export is currently being generated. Once it is ready, an email will be sent to you with the download link."},exportFailed:{id:"exportActions.exportFailedError.message",defaultMessage:"Export failed."},adminMessage:{defaultMessage:"Admin",id:"export.userPermissionsRole.admin.message"},workspaceOwnerMessage:{defaultMessage:"Workspace owner",id:"export.userPermissionsRole.workspaceOwner.message"},memberMessage:{defaultMessage:"Member",id:"export.userPermissionsRole.member.message"},membershipAdminMessage:{defaultMessage:"Membership admin",id:"export.userPermissionsRole.membershipAdmin.message"},guestMessage:{defaultMessage:"Guest",id:"export.userPermissionsRole.guest.message"},idMessage:{defaultMessage:"ID",id:"export.csvHeader.id"},emailMessage:{defaultMessage:"Email",id:"export.csvHeader.email"},nameMessage:{defaultMessage:"Name",id:"export.csvHeader.name"},roleMessage:{defaultMessage:"Role",id:"export.csvHeader.role"},permissionGroupsMessage:{defaultMessage:"Permission groups",id:"export.csvHeader.permissionGroups"},pagesMessage:{defaultMessage:"Pages",id:"export.csvHeader.pages"},partitionMessage:{defaultMessage:"Export is still in progress due to file size. We will send you an email about its progress.",id:"export.exportPartitioned.message"},privatePageMessage:{defaultMessage:"Private page",id:"export.privatePageTitle.message"},pageTitleAndIdMessage:{defaultMessage:"{pageTitle} ({pageId})",id:"export.pageTitleAndId.message"},pageSeparatorMessage:{defaultMessage:", ",id:"export.pageSeparator.message"}});async function le(e,t){if(!ye({environment:e,...t}))return void te(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive});const{currentUserStore:a}=H().default.state;if(!a)return void te(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive});const s=a.getEmail();if(!s)return void te(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive});ee(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive}),"currentView"===t.exportOptions.collectionViewExportType&&(t.exportOptions.preferredViewMap=ue(a.id));const n=(0,ie().UT)(e,S,t,{spaceId:t.block.spaceId}),i=H().default.state.currentSpaceStore;await ce(e,n,t.recursive,s,null==i?void 0:i.id)}async function de(e,t,a,s){if(!ye({environment:e,recursive:!0,exportOptions:t.exportOptions,isOrgConsole:void 0!==a}))return void te(e,{target:"space",format:t.exportOptions.exportType,recursive:!0});const{currentUserStore:n}=H().default.state;if(!n)return void te(e,{target:"space",format:t.exportOptions.exportType,recursive:!0});const i=n.getEmail();if(!i)return void te(e,{target:"space",format:t.exportOptions.exportType,recursive:!0});ee(e,{target:"space",format:t.exportOptions.exportType,recursive:!0}),"currentView"===t.exportOptions.collectionViewExportType&&(t.exportOptions.preferredViewMap=ue(n.id));const o=(0,ie().UT)(e,M,t);await ce(e,o,!0,i,t.spaceId,s)}async function ce(e,t,a,s,n,i){const{currentSpaceViewStore:o}=H().default.state;if(!o&&!i)return;const r=new Y;r.setState({pagesExported:0,targetEmailAddress:s});let l,d=!1;const c=((null==o?void 0:o.getTeamsStores())||i)??[],u=null==c?void 0:c.filter((e=>e.getSetting("disable_export"))).flatMap((e=>e.getName()||[]));if(a){const t=u.length>0?6e3:1250;l=(0,f().wR)(t);const a={exportProgressStore:r,disabledExportTeamNames:u};se().ui({message:(0,D.jsx)(P,{...a}),showCancel:!1,keepFocus:!0,disableBackgroundDismiss:!0,items:[{label:(0,D.jsx)(p().sA,{id:"exportProgressDialog.closeButton.label",defaultMessage:"Close"}),onAccept:()=>{Pe({environment:e,spaceId:n}),d=!0}}]})}else l=Promise.resolve(),oe().m({message:re.exporting});for await(const g of t){if(d)return;if(g.error)return oe().V(),void se().f1(U().A.formatMessage(re.exportFailed));{const{value:t}=g;if("complete"===t.type||"partition"===t.type)return await l,oe().V(),void("complete"===t.type?(se().zw(),!d&&t.exportURL&&ne().I5(e,t.exportURL)):se().rG({message:U().A.formatMessage(re.partitionMessage)}));r.setState({...r.state,pagesExported:t.pagesExported})}}}function ue(e){const t={};return r().A.scan(((a,s)=>{if(a.includes(E().Ie)&&a.includes(e)){const e=a.split(E().Ie)[1];e&&s&&(t[e]=s)}})),t}function ge(e){const{root:t,environment:a,isCollectionViewExportTypeSupported:s}=e,n=a.currentUser.id,o=Ae(n),r=o&&o.exportType||"markdown",l=s?"currentView":void 0,d="pdf"===r?{exportType:"pdf",timeZone:(0,i().P)(),pdfFormat:Me(n),locale:"en",collectionViewExportType:l}:{exportType:r,timeZone:(0,i().P)(),locale:"en",collectionViewExportType:l};Se(a,{open:!0,root:t,recursive:"space"===t.table,exportOptions:d,shouldExportComments:!1})}function me(e,t){switch(t){case"editor":return e.formatMessage(re.workspaceOwnerMessage);case"membership_admin":return e.formatMessage(re.membershipAdminMessage);case"read_and_write":return e.formatMessage(re.memberMessage);case"none":return e.formatMessage(re.guestMessage);default:return n().log({level:"error",from:"exportActions",type:"roleNotFound",data:{miscDataToConvertToString:{role:t}}}),""}}async function pe(e,t){const{spaceStore:a,subscriptionData:s,intl:n}=t;await ae().callApi({eventName:"exportSpaceMembers",environment:e,data:{spaceId:a.getSpaceId()}});const i=s.users.map((e=>e.userId)),o=await ae().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:e,data:{spaceId:a.getSpaceId(),userIds:i},headers:(0,l().WS)({cellId:void 0,spaceId:a.getSpaceId()})}),r={};if("success"===o.type)for(const[l,d]of Object.entries(o.data.userToGroupMap)){const e=(d||[]).map((e=>W().A.state.permissionGroupsAndMemberCounts.find((t=>t.group.group_id===e)))),t=h().oE(e).map((e=>e.group.name)).sort().join(",");r[l]=t}await he(a,s.users,r,n)}async function he(e,t,a,s){const n=q().default.checkGate({gateName:"dont_load_users"})?[]:h().oE(await f().lX(t,40,(async t=>{const n=$().L.createChildStore(e,{table:m().oo,id:t.userId});await n.waitUntil((()=>n.isReady()));const i=n.getEmail(),o=n.getFullName(s);if(i||o)return[i||"",o||"",me(s,t.role),a[t.userId]||"",n.id]})));fe(xe([[re.emailMessage,re.nameMessage,re.roleMessage,re.permissionGroupsMessage,re.idMessage].map((e=>s.formatMessage(e))),...n]),"members.csv")}function fe(e,t){const a=document.createElement("a");a.setAttribute("href",`data:text/csv;charset=utf-8,${encodeURIComponent(e)}`),a.setAttribute("download",t),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}function xe(e){return e.map((e=>e.map((e=>((e=e.replace(/"/g,'""')).search(/("|,|\n)/g)>=0&&(e=`"${e}"`),e))).join(","))).join("\n")}async function ve(e,t){let{guests:a,intl:n,spaceStore:i}=t;await ae().callApi({eventName:"exportSpaceGuests",environment:e,data:{spaceId:i.getSpaceId()}});const o=n.formatMessage(re.pageSeparatorMessage),r=h().oE(await Promise.all(a.map((async t=>{const a=$().L.createChildStore(i,{table:m().oo,id:t.userId});async function r(t){const a=Q().Bv.createChildStore(i.getPagesStore(),{table:d().ev,id:t});if(await a.load(),a.isCollectionView()){const e=a.getCollectionPointer();if(e){const t=Q().md.createChildStore(i,{table:c().Vl,id:e.id});t&&await t.load()}}else if(a.getType()===s().xd.alias){const e=a.getAliasTargetStore();e&&await e.load()}return(0,F().Qe)(a,n,e,!1)??n.formatMessage(re.privatePageMessage)}const[,...l]=await Promise.all([a.load(),...t.guestPageIds.map((e=>async function(e){return n.formatMessage(re.pageTitleAndIdMessage,{pageId:e,pageTitle:await r(e)})}(e)))]),u=a.getEmail(),g=a.getFullName(n);if(u||g)return[u||"",g||"",l.join(o),a.id]})))),l=[[re.emailMessage,re.nameMessage,re.pagesMessage,re.idMessage].map((e=>n.formatMessage(e))),...r];fe(xe(l),"guests.csv"),Z().Is(e,{line_count:l.length})}function ye(e){const t="pdf"===e.exportOptions.exportType&&e.recursive;return!!e.isOrgConsole||(!t||be(e.environment))}function be(e){return(0,X().n)(e,"enterprise")||(0,X().n)(e,"business")||L().hfc()}function Se(e,t){const a=G().Ay.state,s=e.currentUser.id;let n=t;if(G().xt(n)&&!be(e))if("space"===n.root.table){const e=a.open&&!G().xt(a)?a.exportOptions.exportType:"html";n={...n,exportOptions:{...n.exportOptions,exportType:e}}}else n={...n,recursive:!1};if(!ye({environment:e,...n}))throw new(o().Um)("Invalid export options",{data:n});G().Ay.setState(n),function(e){const t=G().Ay.state;if(t.open){const a={...Ae(e),exportType:t.exportOptions.exportType};"pdf"===t.exportOptions.exportType&&(a.pdfFormat=t.exportOptions.pdfFormat),r().A.set({userId:e,key:we,value:a})}}(s)}function je(){G().Ay.setState({open:!1,shouldExportComments:!1})}const we="ExportSettings";function Ae(e){return r().A.get({userId:e,key:we})}function Me(e){const t=Ae(e);return t&&t.pdfFormat||G().N4()}async function Ce(e,t){const{currentUserStore:a}=H().default.state,{targetPointer:s}=t;if(!a)return n().log({level:"error",from:"exportActions",type:"exportAuditLogCSV-currentUserStoreNotFound",data:{miscDataToConvertToString:{targetPointer:s}}}),se().rG({message:U().A.formatMessage(re.exportFailed)}),void te(e,{target:"auditLog",format:"csv",recursive:!1});if(!a.isDefined())return n().log({level:"error",from:"exportActions",type:"exportAuditLogCSV-currentUserValueNotFound",data:{miscDataToConvertToString:{targetPointer:s}}}),se().rG({message:U().A.formatMessage(re.exportFailed)}),void te(e,{target:"auditLog",format:"csv",recursive:!1});let i;ee(e,{target:"auditLog",format:"csv",recursive:!1}),s.table===g().NX?i=(0,ie().UT)(e,b,{spaceId:s.id,exportOptions:t.exportOptions}):s.table===u().y7?i=(0,ie().UT)(e,b,{organizationId:s.id,exportOptions:t.exportOptions}):(0,x().HB)(s),await ke(i,re.exportAuditLogEmail)}async function Ie(e){const{environment:t,data:a}=e;ee(t,{target:"domainClaimableSpaces",format:"csv",recursive:!1});const s=(0,ie().UT)(t,w,a);await ke(s,re.exportCSVEmail)}async function Te(e){const{environment:t,data:a}=e;ee(t,{target:"domainClaimableSpaces",format:"csv",recursive:!1});const s=(0,ie().UT)(t,A,a);await ke(s,re.exportCSVEmail)}async function ke(e,t){const a=await e.next();if(a.value.error){const e=(0,O().A)(U().A.getIntl(),a.value.error);se().f1(e)}else se().rG({message:U().A.formatMessage(t)})}async function _e(e,t){ee(e,{target:"userAnalytics",format:"csv",recursive:!1});const a=(0,ie().UT)(e,C,t);await ke(a,re.exportCSVEmail)}async function De(e,t){ee(e,{target:"contentAnalytics",format:"csv",recursive:!1});const a=(0,ie().UT)(e,j,t);await ke(a,re.exportCSVEmail)}async function ze(e,t){ee(e,{target:"adminContentSearchAnalytics",format:"csv",recursive:!1});const a=(0,ie().UT)(e,y,{spaceId:t.spaceId,organizationId:t.organizationId,sort:{field:"relevance",direction:"desc"},query:t.filters.query,audience:t.filters.audience,lastEditedTime:(0,I().ES)(t.filters.lastEditedTime),createdTime:(0,I().ES)(t.filters.createdTime),createdBy:t.filters.createdBy,sharedWith:t.filters.sharedWith,teamspaceIds:t.filters.teamIds,deletionStatuses:t.filters.pageStatus});await ke(a,re.exportCSVEmail)}async function Pe(e){let{environment:t,spaceId:a}=e;if(!a)return;const s=await ae().callApi({eventName:"getActiveExportTasks",environment:t,data:{spaceId:a}});var n;"success"===s.type&&V().A.setState({count:s.data.length,exportedPageCount:null===(n=s.data[0])||void 0===n?void 0:n.exportedPageCount})}},202345:(e,t,a)=>{a.d(t,{t:()=>i});a(296540);var s=()=>a(401497),n=a(474848);function i(e){let{children:t}=e;const a=(0,s().IS)((e=>({container:{margin:"24px 32px 24px",padding:"0 16px",boxSizing:"border-box"}})),[]);return(0,n.jsx)("div",{style:a.container,children:t})}},205618:(e,t,a)=>{a.d(t,{A:()=>n});class s extends(()=>a(757695))().default{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"member",isInviteTargetsEmpty:!0,table:a(854150).yK,isFocused:!0,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const n=s},207583:(e,t,a)=>{a.d(t,{F:()=>n});a(296540);var s=a(474848);const n=(0,a(340498).wt)("eyeHideInversePadded",{viewBox:"0 0 24 24",svg:(0,s.jsx)("path",{d:"M17.3867 18.1074C17.6055 18.3193 17.9404 18.333 18.1592 18.1074C18.3848 17.875 18.3711 17.5469 18.1592 17.335L6.5791 5.76855C6.37402 5.55664 6.01855 5.5498 5.80664 5.76855C5.60156 5.97363 5.60156 6.3291 5.80664 6.53418L17.3867 18.1074ZM12 6.1582C10.8105 6.1582 9.73047 6.36328 8.72559 6.69141L9.81934 7.78516C10.5098 7.58691 11.2275 7.4707 12 7.4707C16.3682 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 12.6113 18.7334 14.0059 16.9766 15.1064L17.9883 16.125C20.1348 14.7168 21.3857 12.8779 21.3857 12.0713C21.3857 10.6699 17.6055 6.1582 12 6.1582ZM12 17.9912C13.2646 17.9912 14.4199 17.7725 15.4658 17.4102L14.3789 16.3232C13.6338 16.542 12.8477 16.6787 12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.6133 5.32129 10.1299 7.19434 8.98145L6.16211 7.94922C3.92676 9.37109 2.60742 11.251 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM15.4111 13.3906C15.5889 12.9873 15.6914 12.5361 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C11.5283 8.39355 11.084 8.48242 10.6738 8.65332L15.4111 13.3906ZM12 15.7559C12.5332 15.7559 13.0322 15.6328 13.4766 15.4209L8.64355 10.5811C8.4248 11.0322 8.30176 11.5312 8.30176 12.0781C8.30859 14.0811 9.94238 15.7559 12 15.7559Z"})})},208261:(e,t,a)=>{a.d(t,{h:()=>g});a(296540);var s=()=>a(401497),n=()=>a(278238),i=()=>a(959013),o=()=>a(962730),r=()=>a(859428),l=()=>a(453697),d=()=>a(731736),c=()=>a(142448),u=a(474848);function g(e){let{permissionGroup:t,hasTooltip:a,type:g="avatar"}=e;const{group:m,memberCount:p}=t,h=m.name,f=m.space_id,x=m.icon,{tooltipTextStyle:v,tooltipAvatarContainer:y,tooltipContainer:b,tooltipUserInfoContainer:S}=(0,l().n)(),j=(0,s().IS)((e=>({iconContainer:{position:"relative"},iconBackground:{position:"absolute",top:0,bottom:0,left:0,right:0,background:e.contentBackground,zIndex:1,borderRadius:"100%"},icon:{position:"relative",zIndex:2,height:c().tR,width:c().tR,background:x&&(0,n().T8)(x)?(0,n().ez)({icon:x,mode:e.mode,useLightGrayColor:!1}):e.accentColors.gray[75]}})),[x]),w=e=>(0,u.jsxs)("div",{style:j.iconContainer,...e,children:[(0,u.jsx)(d().e,{icon:x,spaceId:f,size:c().Gz,containerStyles:j.icon}),(0,u.jsx)("div",{style:j.iconBackground})]}),A=e=>(0,u.jsxs)("div",{style:b,children:[(0,u.jsx)("div",{style:y,children:w()}),(0,u.jsxs)("div",{style:S,children:[h,!e&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("br",{}),(0,u.jsx)("span",{style:v,children:(0,u.jsx)(i().sA,{id:"organization.workspace.teamspaces.groupAvatar.memberCount",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:p}})})]})]})]});return a?(0,u.jsx)(r().A,{renderTooltip:()=>A("avatar-name"===g),placement:o().W.Bottom,alignment:o().C.Start,render:e=>w(e)}):"avatar-name"===g||"avatar-name-count"===g?A("avatar-name"===g):(0,u.jsx)("div",{children:w()})}},209592:(e,t,a)=>{a.d(t,{Z:()=>S});a(296540);var s=()=>a(484714),n=()=>a(56366),i=()=>a(401497),o=()=>a(12193),r=()=>a(90907),l=()=>a(835607),d=()=>a(737693),c=()=>a(340498),u=()=>a(468006),g=()=>a(959013),m=()=>a(100622),p=()=>a(437622),h=()=>a(351360),f=()=>a(991249),x=a(474848);const v=function(e){let{tier:t}=e;const s=()=>"business"===t?(0,x.jsx)(g().sA,{id:"upgradeToBusinessBadge",defaultMessage:"Business"}):(0,x.jsx)(g().sA,{id:"upgradeToEnterpriseBadge",defaultMessage:"Enterprise"});return(0,x.jsx)(a(824160).A,{children:(0,x.jsx)(s,{})})};var y=()=>a(233510),b=()=>a(976519);function S(e){let{teamStore:t,isDefault:a,onChange:S=(()=>{}),parentSpaceStore:w}=e;const A=(0,s().v3)(),M=(0,b().q)(null==t?void 0:t.id),C=(0,y().c)(w),I="business",T=(0,n().K8)((()=>w??h().default.state.currentSpaceStore),[w]),k=(0,n().K8)((()=>(null==T?void 0:T.canAdmin())??!1),[T]),_=(0,n().K8)((()=>{if(T)return(0,p().GK)(A,T)}),[A,T]),D=(0,n().K8)((()=>{const e=null==t?void 0:t.getSettingsStore().getValue();return!!e&&"private"===(0,u().MA)(e)}),[t]),z=(0,i().IS)((()=>({icon:{width:c().Ev.default,height:c().Ev.default},iconContainer:{width:c().Ev.default,height:c().Ev.default,display:"flex",justifyContent:"center",alignItems:"center",marginLeft:5,marginRight:5}})),[]),P=(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.privateTeamspaceUpsellBusiness.tooltip",defaultMessage:"Upgrade to Business Plan to enable Private teamspaces"}),N=(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.defaultTeamSpace.title",defaultMessage:"Default"}),R=(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.openTeamspace.title",defaultMessage:"Open"}),B=(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.closedTeamSpace.title",defaultMessage:"Closed"}),L=(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.privateTeamSpace.title",defaultMessage:"Private"}),E="dark"===(0,i().DP)().mode?m().Ay.uiLightGray:m().Ay.black,O=[{key:"open",icon:e=>(0,x.jsx)("div",{style:z.iconContainer,children:(0,d().V)({...e,...z.icon})}),iconColor:E,level:R,title:R,caption:(0,x.jsx)(g().sA,{id:"CreateTeamspaceMenu.openTeamspace.caption",defaultMessage:"Anyone can see and join this teamspace"}),disabled:!1,onSelect:()=>S("open",!1)},{key:"closed",icon:e=>(0,x.jsx)("div",{style:z.iconContainer,children:(0,l().F)({...e,...z.icon})}),iconColor:E,level:B,title:B,caption:(0,x.jsx)(g().sA,{id:"CreateTeamspaceMenu.closedTeamspace.caption",defaultMessage:"Anyone can see this teamspace but not join"}),disabled:!1,onSelect:()=>S("closed",!1)},{key:"private",icon:e=>(0,x.jsx)("div",{style:z.iconContainer,children:(0,r().h)({...e,...z.icon})}),iconColor:E,level:L,title:C?L:(0,x.jsx)(j,{title:L,badge:(0,x.jsx)(v,{tier:I})}),caption:(0,x.jsx)(g().sA,{id:"CreateTeamspaceMenu.privateTeamspace.caption",defaultMessage:"Only members can see that this teamspace exists"}),disabled:!C&&!k,tooltip:C?void 0:P,onSelect:()=>{if(!C&&!D)return f().K(A,{from:"team_security_settings",upsell:{type:"product",product:I,limit:{type:"none"}},dontOpenPlansOnCancel:!0});S("private",!1)}}];if(a||k){const e=a&&(!k||M),t={key:"default",icon:e=>(0,x.jsx)("div",{style:z.iconContainer,children:(0,o().D)({...e,...z.icon})}),iconColor:E,level:N,title:N,caption:(0,x.jsx)(g().sA,{id:"CreateTeamspaceMenu.defaultTeamspace.caption",defaultMessage:"Everyone at {spaceName} must be a member",values:{spaceName:_}}),disabled:!1,disableAllOptionsTooltip:e?k?(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.closeOrPrivateTeamspace.disabledTooltipOnlyDefaultTeam",defaultMessage:"Add another default teamspace to change teamspace permissions."}):(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.defaultTeamspace.disabledTooltipNonAdmin",defaultMessage:"You can't change this setting because you are not a workspace admin"}):void 0,onSelect:()=>S("open",!0)};O.unshift(t)}return O}function j(e){let{title:t,badge:a}=e;const s=(0,i().IS)((()=>({container:{display:"flex",flexWrap:"wrap",alignItems:"center"},badge:{marginLeft:5}})),[]);return(0,x.jsxs)("div",{style:s.container,children:[t,(0,x.jsx)("div",{style:s.badge,children:a})]})}},212727:(e,t,a)=>{a.r(t),a.d(t,{gearIcon:()=>i,iconDefinition:()=>n});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M7.29 10c0 1.5 1.22 2.71 2.71 2.71 1.5 0 2.71-1.21 2.71-2.71S11.5 7.29 10 7.29 7.29 8.5 7.29 10m1.25 0c0-.81.66-1.46 1.46-1.46.81 0 1.46.65 1.46 1.46s-.65 1.46-1.46 1.46-1.46-.65-1.46-1.46"}),(0,s.jsx)("path",{d:"M8.49 17.64q.75.15 1.53.15v-.01c.47 0 .94-.04 1.41-.13.26-.05.46-.25.5-.51l.26-1.53.15-.06 1.28.91c.21.14.49.14.71 0 .41-.28.8-.61 1.18-.98.33-.33.63-.7.9-1.09.15-.21.15-.5 0-.71l-.9-1.27.06-.15 1.55-.27c.26-.05.46-.25.51-.5a7.8 7.8 0 0 0 .02-2.94.62.62 0 0 0-.51-.5l-1.53-.26-.06-.15.91-1.28c.14-.21.14-.49 0-.71a7.9 7.9 0 0 0-2.07-2.08.62.62 0 0 0-.71 0l-1.27.9-.15-.06-.27-1.55a.64.64 0 0 0-.5-.51c-.5-.1-1-.15-1.53-.15-.47 0-.95.04-1.41.13-.26.05-.46.25-.5.51l-.26 1.53-.15.06-1.28-.91a.65.65 0 0 0-.71 0 7.9 7.9 0 0 0-2.08 2.07c-.15.21-.15.5 0 .71l.9 1.27-.06.15-1.55.27c-.26.05-.46.25-.51.5-.1.5-.15 1-.15 1.53 0 .47.04.95.13 1.41.05.26.25.46.51.5l1.53.26.06.15-.91 1.28c-.14.21-.15.49 0 .71.29.42.61.81.98 1.18.34.34.7.65 1.09.91.21.15.5.15.71 0l1.27-.9.15.06.27 1.55c.05.26.25.46.5.51m2.29-1.15c-.53.07-1.09.07-1.63 0l-.25-1.47a.62.62 0 0 0-.42-.49 6 6 0 0 1-.68-.28.63.63 0 0 0-.65.04l-1.2.85a6.8 6.8 0 0 1-1.14-1.16l.86-1.21c.13-.19.15-.43.05-.64-.11-.22-.21-.45-.28-.68a.62.62 0 0 0-.49-.43l-1.45-.25a6.7 6.7 0 0 1 0-1.63l1.47-.25c.23-.04.42-.2.49-.42.07-.23.17-.46.28-.68.11-.21.09-.46-.04-.65l-.85-1.2A6.8 6.8 0 0 1 6.01 4.8l1.21.86c.19.13.43.15.64.05.22-.11.45-.21.68-.28s.39-.26.43-.49l.25-1.45c.53-.07 1.09-.07 1.63 0l.25 1.47c.04.23.2.42.42.49.23.07.46.17.68.28.21.11.46.09.65-.04l1.2-.85A6.8 6.8 0 0 1 15.19 6l-.86 1.21c-.13.19-.15.43-.05.64.11.22.21.45.28.68s.26.39.49.43l1.45.25a6.7 6.7 0 0 1 0 1.63l-1.47.25c-.23.04-.42.2-.49.42-.07.23-.17.46-.28.68-.11.21-.09.46.04.65l.85 1.2a6.8 6.8 0 0 1-1.16 1.14l-1.21-.86a.64.64 0 0 0-.64-.05c-.22.11-.45.21-.68.28s-.39.26-.43.49z"})]})},i=(0,a(340498).wt)("gear",n)},216441:(e,t,a)=>{a.d(t,{P$:()=>$h,N9:()=>Qh,HG:()=>Xh,ge:()=>Zh,XX:()=>rf,uy:()=>tf,eu:()=>af,Tc:()=>lf,aZ:()=>of,sE:()=>Jh,KJ:()=>ef,I:()=>sf,KX:()=>nf});var s=a(296540),n=()=>a(340498),i=a(474848);const o=(0,n().wt)("briefcaseOutline",{viewBox:"0 0 20 20",svg:(0,i.jsx)("g",{children:(0,i.jsx)("path",{d:"M2.788 9.955V8.622q1.56.636 3.377.95 1.818.308 3.828.308 2.017 0 3.835-.308a16.5 16.5 0 0 0 3.377-.943l.007 1.326q-1.62.575-3.445.861a24 24 0 0 1-3.774.287q-1.948 0-3.773-.287a19 19 0 0 1-3.432-.86Zm6.139 2.42q-.828 0-.827-.8V10.4h3.787v1.176q0 .8-.827.8H8.927ZM4.12 16.866q-1.087 0-1.647-.553-.56-.548-.56-1.634V7.986q0-1.094.56-1.64.56-.547 1.647-.547h11.751q1.094 0 1.648.547.56.546.56 1.64v6.693q0 1.087-.56 1.633-.555.554-1.648.554H4.122Zm.055-1.292h11.641q.445 0 .677-.239.24-.232.24-.697v-6.61q0-.473-.24-.705-.232-.232-.677-.232H4.176q-.444 0-.684.232-.232.233-.232.704v6.61q0 .465.232.698.24.24.684.24ZM6.41 6.353V5.17q0-.964.533-1.436.534-.471 1.45-.471h3.192q.971 0 1.476.471.513.472.513 1.436v1.176H12.33v-1.17q0-.368-.205-.567-.199-.198-.574-.198h-3.11q-.377 0-.582.198-.204.2-.205.568v1.176z"})})});var r=()=>a(202017),l=()=>a(536583);const d={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h4.923a4.8 4.8 0 0 1-.789-1.25H6.25a.875.875 0 0 1-.875-.875v-11c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v5.252a5 5 0 0 1 1.25.132V4.5a2.125 2.125 0 0 0-2.125-2.125z"}),(0,i.jsx)("path",{d:"M7.25 5.2a.55.55 0 0 0 0 1.1h5.5a.55.55 0 0 0 0-1.1zM6.7 8.25a.55.55 0 0 1 .55-.55h5.5a.55.55 0 0 1 0 1.1h-5.5a.55.55 0 0 1-.55-.55m11 8.357a3.625 3.625 0 1 0-.893.878l1.223 1.427a.625.625 0 1 0 .94-.823zM12.376 14.5a2.375 2.375 0 1 1 4.75 0 2.375 2.375 0 0 1-4.75 0"})]})},c=(0,n().wt)("docTextMagnifyingGlass",d);var u=()=>a(212727),g=()=>a(90907),m=()=>a(835607);const p={viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242M7.676 6.441c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M10 11.63c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h8.3c.68 0 1.328-.287 1.74-.767.429-.502.591-1.217.23-1.923-1.02-1.99-3.42-3.305-6.12-3.305m-5.007 3.875c.761-1.488 2.672-2.626 5.007-2.626s4.246 1.138 5.007 2.626c.105.204.07.378-.067.54-.156.182-.448.33-.79.33h-8.3c-.342 0-.634-.148-.79-.33-.138-.162-.172-.336-.067-.54"})},h=(0,n().wt)("person",p),f=(0,n().wt)("personTwoCircle",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M9.993 17.126a6.8 6.8 0 0 1-2.727-.554 7.1 7.1 0 0 1-2.256-1.524 7.3 7.3 0 0 1-1.525-2.256 6.8 6.8 0 0 1-.553-2.727q0-1.45.553-2.728a7.24 7.24 0 0 1 3.773-3.78 6.8 6.8 0 0 1 2.728-.554q1.456 0 2.735.554t2.256 1.53a7.1 7.1 0 0 1 1.53 2.25q.555 1.278.554 2.728 0 1.449-.553 2.727a7.22 7.22 0 0 1-3.787 3.78 6.8 6.8 0 0 1-2.728.554m0-1.395q1.184 0 2.208-.437a5.7 5.7 0 0 0 1.805-1.217 5.7 5.7 0 0 0 1.217-1.804q.437-1.026.437-2.208a5.55 5.55 0 0 0-.437-2.202 5.66 5.66 0 0 0-3.029-3.028 5.6 5.6 0 0 0-2.208-.438q-1.176 0-2.208.438A5.6 5.6 0 0 0 5.98 6.052a5.7 5.7 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.202q0 1.182.438 2.208a5.7 5.7 0 0 0 1.21 1.804 5.6 5.6 0 0 0 4.013 1.654Zm-.321-3q-.396 0-.56-.117a.41.41 0 0 1-.158-.341q0-.417.335-.875.335-.459.95-.78t1.463-.321q.84 0 1.45.321.615.321.943.78.335.458.335.875a.41.41 0 0 1-.157.341q-.158.116-.561.116zm2.03-3.015q-.533 0-.923-.417a1.44 1.44 0 0 1-.39-1.019q0-.594.39-.998a1.234 1.234 0 0 1 1.833-.007q.39.397.389.998 0 .609-.39 1.026-.382.417-.909.417m-5.55 3.014q-.322 0-.459-.13-.13-.129-.13-.369 0-.437.294-.888.294-.452.828-.752.54-.308 1.264-.308a2.54 2.54 0 0 1 1.408.41q-.362.28-.594.663a2 2 0 0 0-.287.76q-.055.368.116.614zm1.797-2.946q-.458 0-.8-.362a1.3 1.3 0 0 1-.341-.889q0-.513.341-.868a1.076 1.076 0 0 1 1.593-.007q.342.35.342.868 0 .534-.342.896a1.05 1.05 0 0 1-.793.362"})});var x=()=>a(737693),v=()=>a(959013),y=()=>a(508496),b=(a(898992),a(354520),a(581454),()=>a(484714)),S=()=>a(56366),j=()=>a(401497),w=()=>a(798880),A=()=>a(322769),M=()=>a(449506),C=()=>a(901389),I=()=>a(898486),T=()=>a(972435),k=()=>a(963589),_=()=>a(630116),D=()=>a(554509),z=()=>a(538739),P=()=>a(511303),N=()=>a(625319),R=()=>a(725036),B=()=>a(443573),L=()=>a(284371),E=()=>a(614505),O=()=>a(602105),U=()=>a(623580),F=()=>a(7674),V=()=>a(864943),H=()=>a(204063),W=()=>a(107683),q=()=>a(859428),G=()=>a(101919),K=()=>a(2609);const Y=(0,v().YK)({namePlaceholder:{defaultMessage:"Display name",id:"organization.general.textInput.name.placeholder"},emailPlaceholder:{defaultMessage:"Email",id:"organization.general.textInput.email.placeholder"},descriptionPlaceholder:{defaultMessage:"Description",id:"organization.general.textInput.description.placeholder"}});function Q(e){let{editButtonText:t,isEditing:a,setIsEditing:s,onCancel:n,onSave:o,disabled:r,disabledTooltipText:l,saveButtonText:d}=e;const c=(0,j().IS)((e=>({container:{marginLeft:"auto",display:"flex",gap:8},cancelButton:{fontSize:L().J.UIRegular.desktop,fontWeight:L().Wy.medium}})),[]);return!1===a?(0,i.jsx)("div",{style:c.container,children:(0,i.jsx)(q().A,{disableTooltip:!r||!l,renderTooltip:()=>l,render:e=>(0,i.jsx)(V().A,{style:{marginLeft:"auto"},size:"sm",onClick:()=>s(!0),disabled:r,disabledFeedback:r,...e,children:t})})}):(0,i.jsxs)("div",{style:c.container,children:[(0,i.jsx)(V().A,{onClick:n,size:"md",style:{...c.cancelButton},disabled:r,disabledFeedback:r,children:(0,i.jsx)(v().sA,{id:"organization.general.cancel.button",defaultMessage:"Cancel"})}),(0,i.jsx)(H().A,{onClick:o,disabled:r,children:d??(0,i.jsx)(v().sA,{id:"organization.general.save.button",defaultMessage:"Save"})})]})}function $(e){const{title:t,byline:a,icon:n,onSave:o,onNameChange:r,onDescriptionChange:l,onEmailChange:d,onDismiss:c,disabled:u,disabledTooltipText:g,bylineWidthOverride:m}=e,p=(0,v().tz)(),[h,f]=(0,s.useState)(!1),[x,y]=(0,s.useState)(e.name),[b,S]=(0,s.useState)(e.email),[w,A]=(0,s.useState)(e.description);(0,s.useEffect)((()=>{r(x)}),[r,x]),(0,s.useEffect)((()=>{b&&(null==d||d(b))}),[d,b]),(0,s.useEffect)((()=>{null==l||l(w)}),[l,w]),(0,s.useEffect)((()=>{y(e.name)}),[e.name]),(0,s.useEffect)((()=>{S(e.email)}),[e.email]),(0,s.useEffect)((()=>{A(e.description)}),[e.description]);const M=function(e){return(0,j().IS)((t=>({container:{marginLeft:"auto",display:"flex",gap:8,opacity:e?.3:1},icon:{height:32,width:32,fill:t.icon.secondary},content:{display:"flex",flexDirection:"column",gap:24,width:392,overflowY:"auto"},inputContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%",gap:8},inputRow:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:t.modalBackground}})),[e])}(u);function C(){f(!1),c()}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(q().A,{disableTooltip:!u||!g,renderTooltip:()=>g,render:e=>(0,i.jsx)("div",{style:M.container,children:(0,i.jsx)(V().A,{size:"md",onClick:()=>f(!0),...e,disabled:u,children:(0,i.jsx)(v().sA,{id:"organization.general.editProfile.button",defaultMessage:"Edit details"})})})}),h?(0,i.jsx)(W().s,{isOpen:!0,onDismiss:C,areaConstraint:{height:{type:"min",length:300}},render:s=>{let{sizeRange:r}=s;return(0,i.jsx)(F().tf,{showDismissButton:!1,sizeRange:r,header:(0,i.jsx)(K().rQ,{icon:n(M.icon),title:t,byline:a,bylineWidthOverride:m}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organization.general.editDetailsModal.button.saveChanges",defaultMessage:"Save changes"}),primaryAction:async()=>{await o(),C()},primaryDisabled:!1,secondaryText:(0,i.jsx)(v().sA,{id:"organization.general.editDetailsModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:C}),children:(0,i.jsx)("div",{style:M.content,children:(0,i.jsxs)("div",{style:M.inputContainer,children:[(0,i.jsxs)("div",{style:M.inputRow,children:[(0,i.jsx)(G().A,{children:(0,i.jsx)(v().sA,{id:"organization.general.editDetailsModal.details.nameLabel",defaultMessage:"Name"})}),(0,i.jsx)(U().A,{style:M.input,value:x,placeholder:p.formatMessage(Y.namePlaceholder),onChange:e=>{y(e.target.value)}})]}),e.description||l?(0,i.jsxs)("div",{style:M.inputRow,children:[(0,i.jsx)(G().A,{children:(0,i.jsx)(v().sA,{id:"organization.general.editDetailsModal.details.descriptionLabel",defaultMessage:"Description"})}),(0,i.jsx)(U().A,{style:M.input,value:w,textarea:!0,autosizeMinHeight:100,autosizeMaxHeight:600,placeholder:p.formatMessage(Y.descriptionPlaceholder),onChange:e=>{A(e.target.value)}})]}):null,e.email?(0,i.jsxs)("div",{style:M.inputRow,children:[(0,i.jsx)(G().A,{children:(0,i.jsx)(v().sA,{id:"organization.general.editDetailsModal.details.emailLabel",defaultMessage:"Email"})}),(0,i.jsx)(U().A,{style:M.input,value:b,placeholder:p.formatMessage(Y.emailPlaceholder),onChange:e=>{S(e.target.value)}})]}):null]})})})}}):null]})}function X(e){const{title:t,byline:a,icon:s,onSave:n,onCancel:o,onIconChange:r,onNameChange:l,onDescriptionChange:d,localIconWithPointer:c,entityName:u,entityDescription:g,entityDescriptionText:m,disabled:p,disabledTooltipText:h,bylineWidthOverride:f}=e,v=(0,j().IS)((()=>({container:{display:"flex",gap:16,flexDirection:"column",marginBottom:36},profileContainer:{display:"flex"},metadataContainer:{gap:10,display:"flex",flexDirection:"column"},orgName:{fontSize:26,fontWeight:L().Wy.bold},bottom:{display:"flex"},userAvatarContainer:{display:"flex",flexDirection:"row-reverse"},icon:{borderRadius:O().V.large,marginTop:-88},defaultIcon:{padding:20,backgroundColor:"rgba(220, 220, 220, 0.2)",borderRadius:O().V.large}})),[]);return(0,i.jsxs)("div",{style:v.container,children:[(0,i.jsx)(E().A,{disabled:Boolean(p),bucket:"public",icon:c,defaultIcon:(0,x().V)(v.defaultIcon),isEmptyPage:!1,size:80,onChange:r,style:v.icon}),(0,i.jsxs)("div",{style:v.profileContainer,children:[(0,i.jsxs)("div",{style:v.metadataContainer,children:[(0,i.jsx)(D().D,{styleName:"UITitle-26px/Bold",children:u}),g]}),(0,i.jsx)($,{title:t,byline:a,icon:s,name:u,description:m,onSave:n,onNameChange:l,onDescriptionChange:d,onDismiss:o,disabled:p,disabledTooltipText:h,bylineWidthOverride:f})]})]})}function Z(){const e=(0,j().IS)((e=>({topRectangle:{width:"100%",height:100,backgroundColor:"light"===e.mode?"rgba(252, 252, 252, 1)":"rgba(35,35,35,1)"}})),[]);return(0,i.jsx)("div",{style:e.topRectangle})}var J=()=>a(817863);function ee(e){let{children:t}=e;const a=(0,j().IS)((()=>({container:{width:"100%",padding:48}})),[]);return(0,i.jsx)("div",{style:a.container,children:t})}var te=()=>a(721672),ae=()=>a(404085),se=()=>a(493823),ne=()=>a(364280);function ie(e){let{title:t,content:a}=e;const s=(0,j().IS)((()=>({container:{margin:"40px auto"},content:{marginTop:16,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}})),[]);return(0,i.jsxs)("div",{style:s.container,children:[(0,i.jsx)(D().D,{styleName:"Heading-17px/Medium",as:"h2",children:t}),(0,i.jsx)("div",{style:s.content,children:a})]})}function oe(e){let{title:t,badge:a,byline:s,content:n,rightContent:o,onClick:r,disabled:l,...d}=e;const c=(0,j().IS)((e=>({container:{margin:"6px auto",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:12,alignItems:"center",justifyContent:"space-between",width:"100%",height:"fit-content",padding:"12px 16px",borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,boxShadow:O().v},containerDark:{background:e.accentColors.translucentGray[30],borderColor:e.stroke.primary},left:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",gap:6,flex:"1 1 200px"},rightContent:{display:"flex",flexDirection:"row",flexShrink:0,justifyContent:"center",alignItems:"center",gap:12},title:{margin:0,padding:0,textWrap:"wrap"},secondaryText:{margin:0,padding:0,textWrap:"wrap"},content:{padding:"2px 0 6px"},iconButton:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:e.accentColors.gray[100],height:20,width:20},icon:{height:20,width:20,padding:4,color:e.icon.primary,transform:"rotate(270deg)"}})),[]),u=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:c.left,children:[(0,i.jsxs)(ne().fI,{alignItems:"center",children:[(0,i.jsx)(D().D,{customStyles:c.title,styleName:"UIRegular-14px/Medium",as:"p",children:t}),a]}),n?(0,i.jsx)("div",{style:c.content,children:n}):null,(0,i.jsx)(D().D,{customStyles:c.secondaryText,styleName:"UIMedium-13px/Regular",colorName:"secondary",as:"p",children:s})]}),(0,i.jsxs)("div",{style:c.rightContent,children:[o&&(0,i.jsx)(D().D,{customStyles:c.secondaryText,styleName:"UIMedium-13px/Regular",colorName:"secondary",as:"p",children:o}),void 0===r?null:(0,i.jsx)("div",{style:c.iconButton,children:(0,ae().l)(c.icon)})]})]});return void 0===r?(0,i.jsx)("div",{style:c.container,children:u}):(0,i.jsx)(se().p,{style:c.container,onClick:r,hoveredStyle:{...c.container,...c.containerDark},pressedStyle:{...c.container,...c.containerDark},disabled:l,disabledFeedback:l,...d,children:u})}var re=()=>a(710149),le=()=>a(47095),de=()=>a(477657);function ce(e){let{memberCount:t,sampleMemberUserStores:a,onClick:s,disabled:n,isLoading:o}=e;const r=(0,le().Z)();return(0,i.jsx)(te().A,{disabled:n,isLoading:o,headerText:(0,i.jsx)(v().sA,{id:"organization.general.members.title",defaultMessage:"Members"}),mainText:void 0===t||o?(0,i.jsx)(re().A,{style:r.longTallShimmer}):(0,i.jsx)(v().sA,{id:"organization.general.members.count",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:t.toLocaleString()}}),bottom:(0,i.jsx)(de().t,{users:a,totalMemberCount:t,isLoading:o}),onClick:s})}var ue=()=>a(27198),ge=()=>a(762433),me=()=>a(426116),pe=()=>a(989423),he=()=>a(836251),fe=()=>a(437622),xe=()=>a(28119),ve=()=>a(351360),ye=()=>a(57605),be=()=>a(288864),Se=()=>a(459401),je=()=>a(376203),we=()=>a(946548),Ae=()=>a(573660);function Me(e){let{title:t,byline:a,isToggledOn:s,onToggle:n,badge:o,isLocked:r,lockedTooltip:l}=e;const d=(0,je().B)(),c=(0,je().B)();return(0,i.jsx)(Ae().y,{title:t,titleId:d,byline:a,bylineId:c,item:(0,i.jsx)(we().A,{"aria-labelledby":d,"aria-describedby":c,on:s,onClick:n,isLocked:r,lockedTooltip:l}),badge:o})}function Ce(e){let{spaceStore:t,organizationId:a}=e;return(0,i.jsxs)(Se().L,{children:[(0,i.jsx)(Ie,{spaceStore:t}),(0,i.jsx)(Te,{spaceStore:t,organizationId:a}),(0,i.jsx)(ke,{spaceStore:t})]})}function Ie(e){let{spaceStore:t}=e;const a=(0,b().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(P().N),o=(0,S().K8)((()=>t.getSetting("enable_ai_feature")??!1),[t]),[r,l]=(0,s.useState)(o),d=(0,S().K8)((()=>t.id),[t]),c=(0,S().K8)((()=>{var e;if(!(null===(e=ve().default.state.currentUserStore)||void 0===e?void 0:e.id))return!1;const t=ye().A.getData(a,{spaceId:d});return(0,ge().ji)(t).includes("ai")}),[a,d]),u=(0,s.useCallback)((async()=>{const e=!r;if(!1===e&&c){if(!(await C().Gh({message:(0,i.jsx)(v().sA,{id:"featureSettings.ai.turnOffAiWhenSubscribedToAiWarning",defaultMessage:"Your current plan includes Notion AI. You can turn off access to AI, but you will continue to be billed for it."}),acceptLabel:(0,i.jsx)(v().sA,{id:"featureSettings.ai.turnOffAiWhenSubscribedToAccept",defaultMessage:"Turn off AI"})})).accept)return}l(e);const t=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:a,data:{spaceId:d,spaceSettings:{enable_ai_feature:e}}});"success"===t.type?n({data:t.data}):C().f1((0,I().Hu)(T().A.getIntl(),t))}),[c,r,a,d,n]);return(0,i.jsx)(Me,{title:(0,i.jsx)(v().sA,{id:"featureSettings.ai.title",defaultMessage:"Notion AI"}),byline:(0,i.jsx)(v().sA,{id:"featureSettings.ai.description",defaultMessage:"Enable AI-powered features for all workspace members. By activating Notion AI, you agree to the <inlinelink>Notion AI Supplementary Terms</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(be()._,{href:"https://notion.notion.site/fa9034c8b5a04818a6baf3eac2adddbb",external:!0,children:e})}}),isToggledOn:r,onToggle:u})}function Te(e){let{spaceStore:t,organizationId:a}=e;const n=(0,b().v3)(),{updateCacheWithRecordMap:o}=(0,s.useContext)(P().N),r=(0,S().K8)((()=>(0,fe().Ar)(t)),[t]),[l,d]=(0,s.useState)(r),[c,u]=s.useState(!1),[g,m]=s.useState(!1),p=(0,s.useCallback)((async()=>{u(!1);const e=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:n,data:{spaceId:t.id,spaceSettings:{zero_retention_enabled:!l}}});"success"===e.type?(o({data:e.data}),me().xu(n,t),await M().callApi({eventName:"sendHIPAACompliancyUpdate",environment:n,data:{spaceId:t.id,isDisablingHIPAA:l,organizationId:a}}),m(!0)):C().f1((0,I().Hu)(T().A.getIntl(),e))}),[n,t,l,o,a]),h=(0,s.useCallback)((()=>{u(!0)}),[]);return(0,i.jsxs)(i.Fragment,{children:[c&&(0,i.jsx)(xe().TD,{isOpen:!0,onClose:()=>u(!1),onConfirmDecision:p,isDisablingHIPAACompliancy:l}),g&&(0,i.jsx)(xe().YS,{isOpen:!0,hasDisabledHIPAACompliancy:l,onClose:()=>{m(!1),d(!l)}}),(0,i.jsx)(Me,{title:(0,i.jsx)(v().sA,{id:"featureSettings.hipaa.title",defaultMessage:"HIPAA Compliance"}),byline:(0,i.jsx)(v().sA,{id:"featureSettings.hipaa.description",defaultMessage:"Enable HIPAA compliance to securely store and process Protected Health Information (PHI). By enabling, you agree to the <inlinelink>Business Associate Agreement</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(be()._,{href:(0,he().xS)("guides.hipaaBAA"),external:!0,children:e})}}),isToggledOn:l,onToggle:h})]})}function ke(e){let{spaceStore:t}=e;const a=(0,b().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(P().N),o=(0,S().K8)((()=>t.id),[t]),r=(0,S().K8)((()=>t.getName()??""),[t]),l=(0,S().K8)((()=>t.getSettings().disable_page_analytics??!1),[t]),[d,c]=(0,s.useState)(l),u=(0,s.useCallback)((async()=>{const e=!d,t=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:a,data:{spaceId:o,spaceSettings:{disable_page_analytics:e}}});"success"===t.type?(n({data:t.data}),pe().vd(a,e?"page_analytics_workspace_opt_out":"page_analytics_workspace_opt_in"),c(e)):C().f1((0,I().Hu)(T().A.getIntl(),t))}),[d,a,o,n]);return(0,i.jsx)(Me,{title:(0,i.jsx)(v().sA,{id:"featureSettings.pageAnalytics.title",defaultMessage:"Page analytics"}),byline:(0,i.jsx)(v().sA,{id:"featureSettings.pageAnalytics.description",defaultMessage:"Allow members with edit or full access to view page analytics. If disabled, page view data will not be stored for pages in this workspace.",values:{workspaceName:r}}),isToggledOn:!d,onToggle:u})}var _e=()=>a(646736),De=()=>a(427704),ze=()=>a(745638),Pe=()=>a(435009),Ne=()=>a(469776),Re=()=>a(588264),Be=()=>a(102601),Le=()=>a(160867);function Ee(e){let{spaceStore:t,onCloseModal:a,organizationId:n}=e;const o=(0,b().v3)(),r=(0,v().tz)(),[l,d]=(0,s.useState)(!1),{refreshOrganization:c,spaceIds:u}=(0,s.useContext)(N().D),g=(0,s.useCallback)((()=>{d(!0)}),[]),m=1===u.length&&u.includes(t.id),p=(0,S().K8)((()=>ye().A.getData(o,{spaceId:t.id})),[o,t.id]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Re().Y,{}),(0,i.jsx)(Be().n,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.deleteWorkspace.title",defaultMessage:"Delete workspace"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.deleteWorkspace.caption",defaultMessage:"To confirm deletion, you'll need to enter the workspace name. <inlinelink>Learn more</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(be()._,{href:(0,he().xS)("guides.deleteWorkspace"),external:!0,children:e})}}),buttonLabel:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.deleteWorkspace.button",defaultMessage:"Delete workspace"}),type:"danger",onClick:g,modal:l?(0,i.jsx)(Ne().S4,{isOpen:!0,billingData:p,onClose:()=>d(!1),onConfirmDelete:async()=>{(0,ze().H)(o),await(0,Le().Sr)(t,r,o,(async()=>{m?Pe().oo({environment:o,url:De().JZ.root}):await c(),a()}),n)},spaceStore:t}):null})]})}var Oe=()=>a(416504),Ue=()=>a(820579),Fe=()=>a(201549),Ve=()=>a(760217),He=()=>a(89924),We=()=>a(500861),qe=()=>a(890434),Ge=()=>a(742784);const Ke=["pdf","html","markdown"],Ye=["currentView","all"],Qe=["everything","no_files"];function $e(e){let{onDismiss:t,spaceId:a,organizationId:n}=e;const o=(0,j().IS)((e=>({icon:{height:24,width:24,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:12,width:480},switcherContainer:{marginTop:4}})),[]),[r,l]=(0,s.useState)({selectedExportType:"markdown",selectedCollectionViewExportType:"currentView",selectedContent:"everything",createFoldersForSubpages:!0}),d=(0,b().v3)(),c=d.currentUser.id,u=(0,s.useMemo)((()=>[a]),[a]),{teamStores:g}=(0,R().o)(u),m=(0,s.useCallback)((async()=>{t();const e="pdf"===r.selectedExportType?{exportType:r.selectedExportType,collectionViewExportType:r.selectedCollectionViewExportType,timeZone:(0,Oe().P)(),pdfFormat:Fe().id(c),locale:"en"}:{exportType:r.selectedExportType,collectionViewExportType:r.selectedCollectionViewExportType,includeContents:r.selectedContent,flattenExportFiletree:r.createFoldersForSubpages,timeZone:(0,Oe().P)(),locale:"en"};await Fe().P_(d,{spaceId:a,exportOptions:e,shouldExportComments:!1},n,g[a])}),[c,d,r,t,a,g,n]);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:t,render:()=>(0,i.jsx)(F().tf,{showDismissButton:!1,header:(0,i.jsx)(K().rQ,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.modal.title",defaultMessage:"Export all workspace content"}),icon:(0,Ue().f)(o.icon),byline:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.modal.caption",defaultMessage:"You can export all your pages as HTML, Markdown, or CSV (for databases), along with any files you've uploaded, too."})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.modal.button",defaultMessage:"Export"}),primaryAction:m,secondaryText:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.cancel",defaultMessage:"Cancel"}),secondaryAction:t}),children:(0,i.jsxs)("div",{style:o.content,children:[(0,i.jsx)(We().A,{label:(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.exportFormat",defaultMessage:"Export format"})}),selectedTitle:(0,Ge().getBlockExportTypeTitle)(r.selectedExportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,i.jsx)(He().A,{...e}),items:Ke.map((t=>({key:t,action:()=>{e.close(),l({...r,selectedExportType:t})},render:e=>(0,i.jsx)(Ve().A,{...e,title:(0,Ge().getBlockExportTypeTitle)(t)})})))}]}),(0,i.jsx)(We().A,{label:(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.includeDatabases",defaultMessage:"Include databases"})}),selectedTitle:(0,Ge().getCollectionViewExportTypeTitle)(r.selectedCollectionViewExportType),renderMenuSections:e=>[{key:"includeDatabases",render:e=>(0,i.jsx)(He().A,{...e}),items:Ye.map((t=>({key:t,action:()=>{e.close(),l({...r,selectedCollectionViewExportType:t})},render:e=>(0,i.jsx)(Ve().A,{...e,title:(0,Ge().getCollectionViewExportTypeTitle)(t)})})))}]}),(0,i.jsx)(We().A,{label:(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.includeContent",defaultMessage:"Include content"})}),selectedTitle:(0,Ge().getBlockIncludeContentsTitle)(r.selectedContent),renderMenuSections:e=>[{key:"includeContent",render:e=>(0,i.jsx)(He().A,{...e}),items:Qe.map((t=>({key:t,action:()=>{e.close(),l({...r,selectedContent:t})},render:e=>(0,i.jsx)(Ve().A,{...e,title:(0,Ge().getBlockIncludeContentsTitle)(t)})})))}]}),(0,i.jsx)("div",{style:o.switcherContainer,children:(0,i.jsx)(qe().A,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.createFoldersForSubpages",defaultMessage:"Create folders for subpages"}),subtitle:"",on:r.createFoldersForSubpages,onChange:()=>l({...r,createFoldersForSubpages:!r.createFoldersForSubpages})})})]})})})}function Xe(e){let{spaceStore:t,organizationId:a}=e;const n=(0,S().K8)((()=>t.id),[t]),[o,r]=(0,s.useState)(!1);return(0,i.jsx)(Be().n,{type:"default",title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.title",defaultMessage:"Export workspace content"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.caption",defaultMessage:"Export all workspace content for legal and compliance purposes. <inlinelink>Learn more</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(be()._,{href:(0,he().xS)("guides.exportWorkspace"),external:!0,children:e})}}),buttonLabel:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportContent.button",defaultMessage:"Export workspace content"}),onClick:()=>r(!0),modal:o&&(0,i.jsx)($e,{onDismiss:()=>r(!1),spaceId:n,organizationId:a})})}a(672577);var Ze=()=>a(496603),Je=()=>a(187174),et=()=>a(803418),tt=()=>a(763824);function at(e){let{spaceIds:t}=e;const{permissionGroupsForSpace:a,loadPermissionGroupsForSpace:n}=(0,s.useContext)(N().D),[i,o]=(0,s.useState)(!1);return(0,Je().Yb)((async()=>{o(!0),await(0,tt().lX)(t,et().O,(e=>n(e))),o(!1)}),[t,n]),{permissionGroupsForSpace:a,loading:i}}function st(e){let{userIds:t,spaceIds:a}=e;const{userPermissionGroupIdsBySpaceId:n,loadUserPermissionGroupIdsBySpaceId:i}=(0,s.useContext)(N().D),[o,r]=(0,s.useState)(!1);return(0,Je().Yb)((async()=>{r(!0),await(0,tt().lX)(a,et().O,(e=>i(e,t))),r(!1)}),[a,t,i]),{spaceIdToUserPermissionGroupMap:n,loading:o}}function nt(e){let{spaceStore:t,organizationId:a}=e;const n=function(e,t){const a=(0,v().tz)(),{visibleUsers:n}=(0,B().d)(e.id),i=(0,s.useMemo)((()=>n.map((e=>e.userId))),[n]),o=(0,s.useMemo)((()=>[e.id]),[e.id]),{spaceIdToUserPermissionGroupMap:r}=st({userIds:i,spaceIds:o}),l=(0,s.useMemo)((()=>r[e.id]),[r,e.id]),{permissionGroupsForSpace:d}=at({spaceIds:o}),c=(0,b().v3)();return(0,s.useCallback)((async()=>{await M().callApi({eventName:"exportSpaceMembers",environment:c,data:{organizationId:t,spaceId:e.id}});const s={};for(const[t,a]of Object.entries(l)){const n=a.map((t=>d[e.id].find((e=>e.group.group_id===t)))),i=Ze().oE(n).map((e=>e.group.name)).sort().join(",");s[t]=i}await Fe().Sg(e,n,s,a)}),[c,t,e,n,a,l,d])}(t,a);return(0,i.jsx)(Be().n,{type:"default",title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportMembers.title",defaultMessage:"Export members"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportMembers.caption",defaultMessage:"Download a CSV list of all workspace members. <inlinelink>Learn more</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(be()._,{href:(0,he().xS)("guides.exportMembers"),external:!0,children:e})}}),buttonLabel:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.exportMembers.button",defaultMessage:"Export members"}),onClick:n})}var it=()=>a(55293),ot=()=>a(436572),rt=()=>a(625830);function lt(e){let{spaceIds:t,onCancel:a,onSubmit:n,organizationId:o,refetchData:r,isSingleWorkspaceAction:l}=e;const d=(0,j().IS)((e=>({icon:{height:30,width:30,color:e.text.uiRedPrimary},confirmation:{display:"flex",width:"100%",justifyContent:"center",gap:10},modalContainer:{width:440}})),[]),c=(0,b().v3)(),u=(0,s.useCallback)((async()=>{const e=await M().callApi({eventName:"removeWorkspacesFromOrganization",environment:c,data:{organizationId:o,spaceIds:t}});"success"===e.type?(r(),ot().D6({label:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.removeFromOrganization.success",defaultMessage:"{numWorkspaces, plural, one {Removed {numWorkspaces} workspace} other {Removed {numWorkspaces} workspaces}} from organization",values:{numWorkspaces:t.length}})}),n()):C().f1((0,I().Hu)(T().A.getIntl(),e))}),[c,o,t,n,r]),[g,m]=(0,s.useState)(!1);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)("div",{style:d.modalContainer,children:(0,i.jsx)(F().tf,{showDismissButton:!1,header:(0,i.jsx)(K().rQ,{icon:(0,it().J)(d.icon),title:l?(0,i.jsx)(v().sA,{id:"removeWorkspaceFromOrgModal.titleSingle",defaultMessage:"Remove workspace from organization"}):(0,i.jsx)(v().sA,{id:"removeWorkspaceFromOrgModal.title",defaultMessage:"{numWorkspaces, plural, one {Remove {numWorkspaces} workspace} other {Remove {numWorkspaces} workspaces}} from organization",values:{numWorkspaces:t.length}}),byline:l?(0,i.jsx)(v().sA,{id:"removeWorkspaceFromOrgModal.bylineSingle",defaultMessage:"Removing this workspace will disable SAML SSO and organization-wide security settings for it."}):(0,i.jsx)(v().sA,{id:"removeWorkspaceFromOrgModal.byline",defaultMessage:"Removing these workspaces will disable SAML SSO and organization-wide security settings for them.",values:{numWorkspaces:t.length}})}),footer:(0,i.jsx)(K().jl,{isDarkRed:!0,primaryDisabled:!g,primaryText:(0,i.jsx)(v().sA,{id:"removeWorkspaceFromOrgModal.removeButton",defaultMessage:"{numWorkspaces, plural, one {Remove workspace} other {Remove workspaces}}",values:{numWorkspaces:t.length}}),primaryAction:u,secondaryText:(0,i.jsx)(v().sA,{id:"removeWorkspaceFromOrgModal.cancelButton",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsxs)("div",{style:d.confirmation,children:[(0,i.jsx)(rt().A,{checked:g,size:14,checkSize:10,onClick:()=>m(!g)}),(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"removeWorkspaceFromOrgModal.confirmationText",defaultMessage:"I understand SAML SSO will be disabled for some users"})})]})})})})}function dt(e){let{spaceStore:t,organizationId:a,onCloseModal:n}=e;const{refreshOrganization:o,spaceIds:r}=(0,s.useContext)(N().D),l=1===r.length&&r.includes(t.id),d=(0,S().K8)((()=>t.id),[t]),c=(0,s.useMemo)((()=>[d]),[d]),[u,g]=(0,s.useState)(!1),m=(0,s.useCallback)((()=>{g(!0)}),[]),p=(0,s.useCallback)((()=>{g(!1),n()}),[n]);return(0,i.jsx)(Be().n,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.removeFromOrganization.title",defaultMessage:"Remove from organization"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.removeFromOrganization.caption",defaultMessage:"Remove this workspace from this organization. You can re-add it anytime."}),buttonLabel:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.removeFromOrganization.button",defaultMessage:"Remove from organization"}),tooltipLabel:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.removeFromOrganization.button.disabledTooltip",defaultMessage:"You must have at least one workspace in your organization."}),disabled:l,type:"danger",onClick:m,modal:u&&(0,i.jsx)(lt,{isSingleWorkspaceAction:!0,spaceIds:c,organizationId:a,onCancel:()=>g(!1),onSubmit:p,refetchData:o})})}function ct(e){let{spaceStore:t,organizationId:a,onCloseModal:s}=e;const n=(0,_e().HI)(t),o=(0,S().K8)((()=>(null==n?void 0:n.isMember())??!1),[n]),r=(0,S().K8)((()=>!t.getDisableExport()&&o),[o,t]);return(0,i.jsxs)(Se().L,{children:[(0,i.jsx)(nt,{spaceStore:t,organizationId:a}),r&&(0,i.jsx)(Xe,{spaceStore:t,organizationId:a}),(0,i.jsx)(dt,{spaceStore:t,organizationId:a,onCloseModal:s}),(0,i.jsx)(Ee,{spaceStore:t,organizationId:a,onCloseModal:s})]})}var ut=()=>a(784892),gt=()=>a(842599),mt=()=>a(467730),pt=()=>a(278768),ht=()=>a(722872),ft=()=>a(870092),xt=()=>a(378941),vt=()=>a(928600),yt=()=>a(939740),bt=()=>a(14235),St=()=>a(569892),jt=()=>a(881690),wt=()=>a(297780);function At(e){let{spaceStore:t,organizationId:a}=e;return(0,i.jsxs)(Se().L,{children:[(0,i.jsx)(It,{spaceStore:t,organizationId:a}),(0,i.jsx)(Mt,{spaceStore:t,organizationId:a})]})}function Mt(e){let{spaceStore:t,organizationId:a}=e;const s=(0,j().IS)((()=>({textContainer:{display:"flex",flexDirection:"column",maxWidth:"70%"}})),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:s.textContainer,children:[(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",children:(0,i.jsx)(v().sA,{id:"orgConsole.shareSettings.emailDomains.title",defaultMessage:"Enable organization-wide access"})}),(0,i.jsx)(D().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"orgConsole.shareSettings.emailDomains.caption",defaultMessage:"Add your company email domain to let team members discover and share workspace pages, even if they’re not on Notion."})})]}),(0,i.jsx)(Ct,{spaceStore:t,organizationId:a})]})}function Ct(e){let{spaceStore:t,organizationId:a}=e;const n=(0,v().tz)(),o=(0,b().v3)(),[r,l]=(0,s.useState)(""),d=(0,s.useCallback)((e=>{l(e.target.value)}),[]),c=(0,S().K8)((()=>t.getEmailDomains()),[t]);(0,s.useEffect)((()=>{g(c)}),[c]);const[u,g]=(0,s.useState)(c),m=(0,S().K8)((()=>{var e;return null===(e=ve().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),[p]=(0,Je().Yb)((async()=>({trustedDomainNumMembers:await(0,xt().hs)({environment:o,spaceId:t.id,currentUserId:m,organizationId:a})})),[o,t,m,a]),h=(0,S().K8)((()=>{if("resolved"!==p.status)return[];const e=p.value.trustedDomainNumMembers.map((e=>e.trustedDomain.id));return(0,xt().J7)({trustedDomainIds:e,spaceStore:t})}),[t,p]),f=(0,S().K8)((()=>Ze().oE(h.filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())))),[h]),{updateCacheWithRecordMap:x}=(0,s.useContext)(P().N),y=(0,s.useCallback)((async e=>{g(e);const s=await M().callApi({eventName:"updateWorkspaceInOrganization",environment:o,data:{spaceId:t.id,organizationId:a,emailDomains:e}});"success"===s.type?x({data:s.data}):C().f1((0,I().Hu)(T().A.getIntl(),s))}),[o,t.id,a,x]),j=(0,S().K8)((()=>t.getSpaceId()),[t]),{visibleUsers:k,joinedUserIds:_}=(0,B().d)(j);return(0,i.jsx)(bt().Ay,{popupType:bt().nl.Popup,sameWidthAsOrigin:!0,open:r.length>0,origin:(0,i.jsx)(wt().A,{placeholder:n.formatMessage({id:"orgConsole.shareSettings.emailDomains.placeholder",defaultMessage:"Type an email domain…"}),value:r,onChange:d,onRemoveLastToken:async()=>{const e=u.slice(0,u.length-1);await y(e)},tokens:u.map((e=>(0,i.jsx)(jt().A,{showRemoveButton:!0,isSingle:!1,format:ut().NY.Medium,onClickRemove:async()=>{const t=u.filter((t=>t!==e));await y(t)},value:e},e)))}),render:()=>{const e=r.trim(),t=(0,i.jsx)(v().sA,{id:"orgConsole.shareSettings.emailDomains.headerTitle",defaultMessage:"Type an email domain…"}),a=(0,i.jsx)(v().sA,{id:"orgConsole.shareSettings.emailDomains.headerTitleNoResults",defaultMessage:"Type an email domain of a member of this workspace…"}),s=[...c,...f],n=k.filter((e=>(0,A().c7)(e)&&_.includes(e.userId))).map((e=>{const t=new(ft().L)(o,{table:w().oo,id:e.userId}).getEmail();if(t)return(0,gt().zN)(t)})).filter(((e,t,a)=>Boolean(e&&t===a.indexOf(e)&&!s.includes(e)))),d=(0,mt().Ay)(e,n,(e=>e)).map(((e,t)=>({key:t,render:t=>(0,i.jsx)(Ve().A,{...t,title:e}),action:async()=>{const t=[...u,e];await y(t),l("")}}))),g={menuType:ht().gu.Popup,width:"100%"};return(0,i.jsx)(vt().A,{...g,children:(0,i.jsx)(yt().Ay,{type:yt().Oh.Vertical,initialFocus:d.length>0?0:void 0,sections:[{key:0,render:e=>(0,i.jsx)(He().A,{...e,disableDesktopPadding:!0,title:d.length>0?t:a}),items:d}]})})},onDismiss:()=>{l("")}})}function It(e){let{spaceStore:t,organizationId:a}=e;const n=(0,S().K8)((()=>Boolean(t.getInviteLinkEnabled())),[t]),[o,r]=(0,s.useState)(n),l=(0,S().K8)((()=>t.getSpaceId()),[t]),d=(0,b().v3)(),{updateCacheWithRecordMap:c}=(0,s.useContext)(P().N),u=(0,s.useCallback)((async()=>{pt().OE(d,{enabled:!o}),r(!o);const e=await M().callApi({eventName:"updateWorkspaceInOrganization",environment:d,data:{spaceId:l,organizationId:a,inviteLinkEnabled:!o}});"success"===e.type?c({data:e.data}):C().f1((0,I().Hu)(T().A.getIntl(),e))}),[d,o,a,l,c]);return(0,i.jsx)(Me,{title:(0,i.jsx)(v().sA,{id:"orgConsole.shareSettings.inviteLink.title",defaultMessage:"Invite link to add members"}),byline:o?(0,i.jsx)(St().jo,{spaceStore:t,showBlueLink:!0,organizationId:a}):(0,i.jsx)(v().sA,{id:"orgConsole.shareSettings.inviteLink.caption",defaultMessage:"Only people with permission to invite members can see this."}),isToggledOn:o,onToggle:u})}var Tt=()=>a(284230);function kt(e){let{spaceStore:t,organizationId:a}=e;const n=(0,j().IS)((e=>({token:{borderRadius:3,backgroundColor:e.white}})),[]),o=(0,b().v3)(),r=(0,s.useMemo)((()=>[t.id]),[t.id]),{teamStores:l}=(0,R().o)(r),{updateCacheWithRecordMap:d}=(0,s.useContext)(P().N),c=(0,s.useCallback)((async e=>{let{addedTeams:s,removedTeams:n}=e;const i=await M().callApi({eventName:"updateDefaultTeamsInOrganizationSpace",environment:o,data:{organizationId:a,spaceId:t.id,addedTeams:s.map((e=>{let{store:t}=e;return t.id})),removedTeams:n.map((e=>{let{store:t}=e;return t.id}))}});"success"===i.type?d({data:i.data}):C().f1((0,I().Hu)(T().A.getIntl(),i))}),[o,t,a,d]),u=0===l[t.id].length?null:(0,i.jsx)("div",{children:(0,i.jsx)(Tt().A,{unarchivedTeams:l[t.id],isOrgOwner:!0,onUpdate:c,immediateUpdate:!0,tokenStyle:n.token,description:(0,i.jsx)(D().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"teamspaceSettings.defaultTeams.caption",defaultMessage:"Select teamspaces that new and current workspace members join automatically."})})})});return(0,i.jsx)("div",{style:{width:"100%"},children:(0,i.jsxs)(Se().L,{children:[u,(0,i.jsx)(_t,{spaceStore:t}),(0,i.jsx)(Dt,{spaceStore:t})]})})}function _t(e){let{spaceStore:t}=e;const a=(0,S().K8)((()=>t.getDisableTeamCreation()),[t]),[n,o]=(0,s.useState)(a),r=(0,b().v3)(),{updateCacheWithRecordMap:l}=(0,s.useContext)(P().N),d=(0,s.useCallback)((async()=>{const e=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:r,data:{spaceId:t.id,spaceSettings:{disable_team_creation:!n}}});"success"===e.type?(o(!n),l({data:e.data})):C().f1((0,I().Hu)(T().A.getIntl(),e))}),[r,t.id,n,l]);return(0,i.jsx)(Me,{title:(0,i.jsx)(v().sA,{id:"teamspaceSettings.limitTeamspaceCreation.title",defaultMessage:"Limit teamspace creation to only workspace owners"}),byline:(0,i.jsx)(v().sA,{id:"teamspaceSettings.limitTeamspaceCreation.description",defaultMessage:"Restrict teamspace creation to workspace owners only."}),isToggledOn:n,onToggle:d})}function Dt(e){let{spaceStore:t}=e;const a=(0,S().K8)((()=>t.getDisableExternalMembershipRequests()),[t]),[n,o]=(0,s.useState)(!a),r=(0,b().v3)(),{updateCacheWithRecordMap:l}=(0,s.useContext)(P().N),d=(0,s.useCallback)((async()=>{const e=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:r,data:{spaceId:t.id,spaceSettings:{disable_external_membership_requests:n}}});"success"===e.type?(o(!n),l({data:e.data})):C().f1((0,I().Hu)(T().A.getIntl(),e))}),[r,t.id,n,l]);return(0,i.jsx)(Me,{title:(0,i.jsx)(v().sA,{id:"teamspaceSettings.memberRequest.title",defaultMessage:"Teamspace invite link to add members"}),byline:(0,i.jsx)(v().sA,{id:"teamspaceSettings.memberRequest.description",defaultMessage:"Allow membership requests from teamspace invite links."}),isToggledOn:n,onToggle:d})}function zt(e){let{organizationId:t,spaceStore:a,setSelectedTab:n,onCloseModal:o}=e;const r=(0,j().IS)((()=>({tilesContainer:{display:"flex",gap:12,flexWrap:"wrap"},dotSeparator:{margin:"0 4px"}})),[]),l=(0,b().v3)(),[d,c]=(0,s.useState)(""),u=(0,k().X)("organization_console_ga_enabled"),g=(0,S().K8)((()=>null==a?void 0:a.getName()),[a]),m=(0,S().K8)((()=>{var e;return null==a||null===(e=a.getIcon())||void 0===e?void 0:e.icon}),[a]);(0,s.useEffect)((()=>{c(g||"")}),[g]);const{updateCacheWithRecordMap:p}=(0,s.useContext)(P().N),{loadVisibleUsersForSpace:h}=(0,s.useContext)(N().D);(0,s.useEffect)((()=>{h(a.id,!0)}),[a.id,h]);const{visibleUsers:f,loading:y}=(0,B().d)(a.id),L=(0,S().K8)((()=>{const e=f.filter((e=>(0,A().c7)(e)));return{sampleMemberStores:e.slice(0,4).map((e=>new(_().LU)(l,{table:w().oo,id:e.userId}))),numGuests:f.filter(A().QE).length,numMembers:e.length}}),[l,f]),E=(0,s.useMemo)((()=>[a.id]),[a.id]),{teamStores:O,loading:U}=(0,R().o)(E),F=(0,s.useMemo)((()=>O[a.id]),[O,a.id]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z,{}),(0,i.jsxs)(ee,{children:[(0,i.jsx)(X,{title:(0,i.jsx)(v().sA,{id:"organization.general.organization.workspace.title",defaultMessage:"Edit workspace details"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.organization.workspace.byline",defaultMessage:"Edit this workspace's name below. Changes will take effect immediately upon saving."}),icon:x().V,onSave:async function(){if(!a||d===g)return;const e=await M().callApi({eventName:"updateWorkspaceInOrganization",environment:l,data:{organizationId:t,spaceId:a.id,name:d}});"success"===e.type?p(e):C().f1((0,I().Hu)(T().A.getIntl(),e))},onCancel:()=>{c(g||"")},onIconChange:async e=>{if(!a)return;const s=await M().callApi({eventName:"updateWorkspaceInOrganization",environment:l,data:{organizationId:t,spaceId:a.id,icon:e}});"success"===s.type?p(s):C().f1((0,I().Hu)(T().A.getIntl(),s))},onNameChange:e=>c(e||""),localIconWithPointer:m?{pointer:a.pointer,icon:m}:void 0,entityName:g||"",entityDescription:(0,i.jsxs)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:[(0,i.jsx)(ue().Qq,{memberCount:L.numMembers}),(0,i.jsx)(z().A,{style:r.dotSeparator}),(0,i.jsx)(ue().h6,{guestCount:L.numGuests})]})}),(0,i.jsxs)("div",{style:r.tilesContainer,children:[(0,i.jsx)(ce,{memberCount:L.numMembers,sampleMemberUserStores:L.sampleMemberStores,onClick:()=>n("members"),isLoading:y}),(0,i.jsx)(te().A,{disabled:!u,isLoading:U,headerText:(0,i.jsx)(v().sA,{id:"organization.general.workspace.teamspace.title",defaultMessage:"Associated teamspaces"}),mainText:(0,i.jsx)(v().sA,{id:"organization.general.workspace.teamspace.count",defaultMessage:"{teamspaceCount, plural, one {{teamspaceCount} teamspace} other {{teamspaceCount} teamspaces}}",values:{teamspaceCount:F.length}}),bottom:(0,i.jsx)(J().tv,{teamStores:F,isLoading:U}),onClick:()=>!!u&&n("teamspaces")})]}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.featureSettings.title",defaultMessage:"Feature settings"}),content:(0,i.jsx)(Ce,{spaceStore:a,organizationId:t})}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.shareSettings.title",defaultMessage:"Share settings"}),content:(0,i.jsx)(At,{spaceStore:a,organizationId:t})}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.teamspaceSettings.title",defaultMessage:"Teamspace settings"}),content:(0,i.jsx)(kt,{spaceStore:a,organizationId:t})}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.workspace.settings.manageWorkspace.title",defaultMessage:"Manage workspace"}),content:(0,i.jsx)(ct,{spaceStore:a,organizationId:t,onCloseModal:o})})]})]})}a(737550);var Pt=()=>a(97835),Nt=()=>a(236262),Rt=()=>a(534177),Bt=()=>a(641300),Lt=()=>a(566468),Et=()=>a(495427);function Ot(e){const[t,a]=(0,s.useState)(e.initialSelectedIds||[]);function n(){a([])}return(0,s.useEffect)((()=>{n()}),[e.allPossibleIds]),{selectedIds:t,handleToggleId:function(e){a((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},handleSelectAllIds:function(){a(e.allPossibleIds)},handleUnselectAllIds:n}}function Ut(e){const[t,a]=(0,s.useState)([]);return{selectedRows:t,handleToggleRow:function(e){a((t=>t.some((t=>t.id===e.id))?t.filter((t=>t.id!==e.id)):[...t,e]))},handleSelectAllRows:function(){a(e.allPossibleRows)},handleUnselectAllRows:function(){a([])}}}var Ft=()=>a(87043),Vt=()=>a(464708),Ht=()=>a(75491),Wt=()=>a(437607);var qt=()=>a(489143),Gt=()=>a(145214);function Kt(e){const{icon:t,title:a,byline:n}=e,[o,r]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=setTimeout((()=>r(!0)),100);return()=>clearTimeout(e)}),[]);const l=(0,j().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:8,margin:"52px auto"},icon:{color:e.icon.secondary,fill:e.icon.secondary,height:36,width:36}})),[]);return(0,i.jsxs)(Gt().A,{animate:{opacity:o?1:0},initial:{opacity:0},style:l.container,children:[t?t(l.icon):null,(0,i.jsx)(D().D,{styleName:"UIHeading-17px/Semibold",colorName:"secondary",children:a}),(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"tertiary",children:n})]})}var Yt=()=>a(780054);function Qt(e){const{error:t,runNewSearch:a}=e,[n,o]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=setTimeout((()=>o(!0)),100);return()=>clearTimeout(e)}),[]);const r=(0,j().IS)((e=>({icon:{color:e.redBadgeBackground,fill:"currentColor",height:36,width:36},description:{width:328,textAlign:"center"},errorMessage:{borderRadius:4,background:e.cardBackground,fontFamily:L().Tf.mono,fontSize:12,color:e.lightTextColor,padding:"18px 24px",margin:"auto"}})),[]);return(0,i.jsx)(Gt().A,{style:{opacity:n?1:0},animate:{opacity:n?1:0},children:(0,i.jsxs)(ne().VP,{justifyContent:"center",alignItems:"center",gap:12,margin:"40px auto",children:[(0,i.jsxs)(ne().VP,{gap:8,alignItems:"center",children:[(0,it().J)(r.icon),(0,i.jsx)(D().D,{styleName:"UIHeading-17px/Semibold",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"orgConsole.baseTable.errorState.title",defaultMessage:"Something went wrong"})}),(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"tertiary",customStyles:r.description,children:(0,i.jsx)(v().sA,{id:"orgConsole.baseTable.errorState.byline",defaultMessage:"Something went wrong when we were loading the results. Try to run your search again."})})]}),null,a?(0,i.jsx)(V().A,{size:"md",onClick:()=>a(),children:(0,i.jsx)(v().sA,{id:"adminContentSearchTab.pagesTable.error.confirm",defaultMessage:"Retry"})}):null]})})}var $t=()=>a(135851),Xt=()=>a(743556),Zt=()=>a(731736),Jt=()=>a(713996),ea=()=>a(386164),ta=()=>a(698449);var aa=()=>a(179034);function sa(e){let{blockIds:t}=e;const a=(0,b().v3)(),{organizationOwnerRecordCache:n}=(0,s.useContext)(P().N);return(0,S().K8)((()=>t.map((e=>new(_().Bv)(a,{table:aa().ev,id:e},{inMemoryRecordCache:n})))),[a,t,n])}var na=()=>a(96689);function ia(e){let{spaceId:t}=e;const a=(0,b().v3)(),{organizationOwnerRecordCache:n}=(0,s.useContext)(P().N),{spaceIds:i}=(0,s.useContext)(N().D);return(0,S().K8)((()=>{if(t&&i.includes(t))return new(_().SL)(a,{id:t,table:na().NX},{inMemoryRecordCache:n})}),[t,i,n,a])}var oa=()=>a(590082);const ra=(0,v().YK)({untitled:{id:"settingsConsole.groupSettings.untitledGroup",defaultMessage:"Untitled"}});const la=function(e){let{group:t,organizationId:a,onDismiss:n,removePagesFromGroup:o}=e;const r=(0,v().tz)(),l=(0,le().Z)(),d=ia({spaceId:t.spaceId}),{visibleUsers:c,loading:u}=(0,B().d)(t.spaceId),g=c.filter((e=>(0,A().c7)(e))).length,{workspaceName:m,workspaceIcon:p}=(0,S().K8)((()=>({workspaceName:null==d?void 0:d.getName(),workspaceIcon:null==d?void 0:d.getIcon()})),[d]),h=function(e){let{groupId:t,spaceId:a}=e;const n=(0,b().v3)(),{organizationOwnerRecordCache:i}=(0,s.useContext)(P().N);return(0,S().K8)((()=>new(_().Cv)(n,{table:Wt().n,id:(0,Wt().T1)({spacePermissionGroupId:t,spaceId:a}),spaceId:a},{inMemoryRecordCache:i})),[n,t,a,i])}({groupId:t.groupId,spaceId:t.spaceId}),{name:f,spaceId:x,icon:y}=(0,S().K8)((()=>({name:h.getName()||r.formatMessage(ra.untitled),spaceId:h.getSpaceId(),icon:h.getIcon()})),[h,r]),C=(0,j().IS)((()=>({groupIconContainer:{marginLeft:8}})),[]),I=sa({blockIds:t.sharedPageIds}),T=function(e){let{spaceStore:t,groupStore:a}=e;const s=(0,v().tz)(),n=(0,b().v3)(),[{value:i,status:o,error:r}]=(0,Je().Yb)((async()=>{const e=a.getGroupId(),i=a.getSpaceId();if(!e||!i)return[];const o=await M().callApi({eventName:"getGroupMembersInOrganizationSpace",environment:n,data:{groupIds:[e],spaceId:i},headers:(0,ea().WS)({spaceId:i})});if("success"===o.type){var r;const a=((null===(r=o.data.groupUsersMap[e])||void 0===r?void 0:r.userIds)??[]).map((e=>new(_().LU)(n,{table:w().oo,id:e})));return(0,ta().cp)({userStores:a,spaceStore:t,intl:s})}}),[n,t,a,s]);return{members:i??[],loading:"pending"===o,error:r}}({groupStore:h,spaceStore:d}),k=function(e){const{spaceStore:t,groupStore:a}=e,n=(0,s.useMemo)((()=>null!=t&&t.id?[t.id]:[]),[null==t?void 0:t.id]),{teamStores:i,loading:o}=(0,R().o)(n);return{teamStores:(0,S().K8)((()=>null!=t&&t.id?i[t.id].filter((e=>e.getRawMembership().some((e=>"group"===e.entity_type&&e.group_id===a.getGroupId())))):[]),[i,null==t?void 0:t.id,a]),loading:o}}({groupStore:h,spaceStore:d});return(0,i.jsx)(oa().iv,{isOpen:!0,sidebarProps:{sidebarTitleIcon:(0,i.jsx)(Zt().e,{spaceId:x,icon:y,size:oa().WK}),sidebarTitle:f,sidebarByline:(0,i.jsx)(v().sA,{id:"settingsConsole.groupSettings.title.byline",defaultMessage:"Group · {numMembers, plural, one {# member} other {# members}}",values:{numMembers:t.membersCount}}),bottomEntitySection:(0,i.jsxs)("div",{style:C.groupIconContainer,children:[(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"settingsConsole.groupSettings.bottom.preamble",defaultMessage:"Part of workspace"})}),(0,i.jsx)(Lt().s7,{title:m,iconSize:32,icon:(0,i.jsx)(E().A,{disabled:!0,icon:p,isEmptyPage:!1,size:36}),byline:u?(0,i.jsx)(re().A,{style:l.shortShimmer}):(0,i.jsx)(ue().Qq,{memberCount:g})})]}),hideSeparator:!0},tabRenderer:af,tabNames:Jt().o3,tabAccessor:tf,defaultTab:"general",onDismiss:n,sceneProps:{groupStore:h,membersState:T,teamsState:k,groupPageStores:I,organizationId:a,onCloseModal:n,removePagesFromGroup:o}})};var da=()=>a(453697);const ca=28;function ua(e){let{userId:t,showEmailByline:a,badge:s,isNotMultiSelectable:n,rightContent:o,overrides:r}=e;const l=(0,v().tz)(),d=(0,b().v3)(),c=(0,j().IS)((e=>({iconStyle:{color:e.lightTextColor,fontWeight:L().Wy.medium},lockShieldIcon:{width:16,height:16,color:e.lightTextColor,fontWeight:L().Wy.medium}})),[]),u=(0,S().K8)((()=>{const e=new(ft().L)(d,{table:w().oo,id:t});return{userStore:e,isReady:e.isReady(),userName:e.getDisplayName(l),email:e.getEmail()}}),[d,t,l]);return null!=u&&u.isReady?(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!Boolean(u.userName),badge:s,title:(null==r?void 0:r.name)??u.userName,byline:a?(null==r?void 0:r.email)??u.email:void 0,rightContent:o,icon:(0,i.jsx)(da().A,{size:ca,userStore:u.userStore,iconStyle:c.iconStyle}),summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:n?"100%":`calc(100% - ${Bt().Gr}px)`}}):(0,i.jsx)(ga,{})}function ga(e){const t=(0,j().IS)((()=>({icon:{borderRadius:"100%",height:e.iconSize??ca,width:e.iconSize??ca,marginLeft:-4,...e.iconStyles},title:{width:120}})),[e.iconSize,e.iconStyles]);return(0,i.jsx)(Lt().mf,{includeIcon:!0,iconStyles:t.icon,titleStyles:t.title})}const ma=(0,v().YK)({untitled:{id:"organizationGroupsTable.nameColumn.untitled",defaultMessage:"Untitled"}}),pa={id:"name",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.nameColumn.header",defaultMessage:"Groups"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(ba,{row:e}),widthData:{width:275,maxWidth:275},sortable:!1,shouldShowSortTooltip:!1},ha={id:"pages",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.pagesColumn.header",defaultMessage:"Pages shared with this group"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Ht().Kb,{}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.pagesColumn.title",defaultMessage:"{count, plural, one {# page} other {# pages}}",values:{count:e.organizationGroup.sharedPageIds.length}})}),widthData:{widthPercent:25,minWidth:200,maxWidth:200},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},fa={id:"teams",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.teamsColumn.header",defaultMessage:"Associated Teamspaces"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Ht().Kb,{}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.teamsColumn.title",defaultMessage:"{count, plural, one {# teamspace} other {# teamspaces}}",values:{count:e.organizationGroup.teamsCount}})}),widthData:{widthPercent:25,minWidth:200,maxWidth:200},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},xa={id:"members",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.membersColumn.header",defaultMessage:"Members"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Ht().Kb,{}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.membersColumn.title",defaultMessage:"{count, plural, one {# member} other {# members}}",values:{count:e.organizationGroup.membersCount}})}),widthData:{widthPercent:25,minWidth:200,maxWidth:200},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},va=[pa,ha,fa,xa];function ya(e){let{groupId:t,groups:a,loading:n,error:o,organizationStore:r,loadNextPage:l,refreshPage:d,currentPage:c,hasNextPage:u,hasPreviousPage:g,loadPreviousPage:p,removePagesFromGroup:h}=e;const f=(0,k().X)("organization_console_group_single_view_modal"),[x,y]=(0,s.useState)({isOpen:!1});(0,s.useEffect)((()=>{const e=a.find((e=>e.groupId===t));e&&y({isOpen:!0,type:"viewGroup",groupId:e.groupId})}),[a,t,y]);const w=(0,qt().A)(),A=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:va,theme:e,containerMarginTop:0})),[]),M=function(e){let{groupAndSpaceIds:t}=e;const a=(0,b().v3)(),{organizationOwnerRecordCache:n}=(0,s.useContext)(P().N);return(0,S().K8)((()=>t.map((e=>{let{groupId:t,spaceId:s}=e;return new(_().Cv)(a,{table:Wt().n,id:(0,Wt().T1)({spacePermissionGroupId:t,spaceId:s}),spaceId:s},{inMemoryRecordCache:n})}))),[a,t,n])}({groupAndSpaceIds:a.map((e=>({groupId:e.groupId,spaceId:e.spaceId})))}),C=(0,S().K8)((()=>a.map((e=>{const t=M.find((t=>t.getGroupId()===e.groupId)),a=Boolean(null==t?void 0:t.getDeletedAt());return{organizationGroup:e,id:e.groupId,groupStore:t,isClickable:f&&!a,type:Xt().T.OrganizationGroup}}))),[a,f,M]),I=n?(0,Xt().n)():C;const T=va.map((e=>({...e,headerStyle:w.tableHeader,rowStyle:w.tableRow}))),D=x.isOpen?a.find((e=>e.groupId===x.groupId)):void 0;return!n&&o?(0,i.jsx)(Qt,{error:o,runNewSearch:()=>d(!0)}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Bt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:T,rows:I,renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:m().F,title:(0,i.jsx)(v().sA,{id:"workspaceModalGroupsView.empty",defaultMessage:"No groups found"}),byline:(0,i.jsx)(v().sA,{id:"workspaceModalGroupsView.empty.byline",defaultMessage:"There are no groups that match this query."})}),styles:A,loadMoreMethod:{type:"pages",onLoadNext:l,onLoadPrevious:p,hasNextPage:u,hasPrevPage:g,currentPage:c},onRowClick:function(e){e.type===Xt().T.OrganizationGroup&&e.isClickable&&y({isOpen:!0,type:"viewGroup",groupId:e.organizationGroup.groupId})},extendToFullScreen:$t().e}),x.isOpen&&"viewGroup"===x.type&&D?(0,i.jsx)(la,{group:D,organizationId:r.id,onDismiss:()=>y({isOpen:!1}),removePagesFromGroup:h}):null]})}function ba(e){const{row:t}=e,a=(0,v().tz)(),[s,n,o]=(0,S().K8)((()=>t.groupStore?[t.groupStore.getName(),t.groupStore.getIcon(),Boolean(t.groupStore.getDeletedAt())]:[void 0,void 0,!1]),[t.groupStore]),r=s||t.organizationGroup.name||a.formatMessage(ma.untitled),l=n||t.organizationGroup.icon;return(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!Boolean(r),title:r,badge:o?(0,i.jsx)(Sa,{}):null,icon:(0,i.jsx)(Zt().e,{icon:l,spaceId:t.organizationGroup.spaceId,size:26}),iconSize:Ft().Ev,summaryStyles:{width:`calc(100% - ${Ft().Ev}px)`,paddingBlock:8}})}function Sa(){return(0,i.jsx)(q().A,{renderTooltip:()=>(0,i.jsx)(v().sA,{id:"organizationGroupsTable.membersColumn.title.deletedBadge.tooltip",defaultMessage:"This group has been deleted"}),render:e=>(0,i.jsx)(Vt().A,{...e,content:(0,i.jsx)(v().sA,{id:"organizationGroupsTable.membersColumn.title.deletedBadge.content",defaultMessage:"Deleted"})})})}function ja(e,t){const{permissionGroupsForSpace:a,loadPermissionGroupsForSpace:n}=(0,s.useContext)(N().D);(0,s.useEffect)((()=>{t||n(e)}),[e,n,t]);return(0,s.useMemo)((()=>a[e]),[a,e])}const wa=et().q,Aa=[{propertyId:pa.id,direction:"ascending"}];function Ma(e,t){const{loadPermissionGroupsForSpace:a}=(0,s.useContext)(N().D),n=ja(e),[i,o]=(0,s.useState)(),r=(0,S().K8)((()=>n.map((a=>{const s=a.group;return{id:s.group_id,groupName:s.name,groupIcon:s.icon,teamspacesCount:t.filter((e=>e.isAssociatedWithPermissionGroup(s))).length,memberCount:a.memberCount,isClickable:!1,spaceId:e}}))),[n,t,e]),l=(0,s.useMemo)((()=>{const e=null!=i&&i.length?i:Aa;return function(e){let{rows:t,appliedSorts:a}=e;const s=a.map((e=>{let{propertyId:t}=e;return t===fs.id?"teamspacesCount":t===xs.id?"memberCount":e=>e.groupName.toLowerCase()})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Rt().HB)(t)}));return Ze().My(t,s,n)}({rows:r,appliedSorts:e})}),[r,i]);return{rows:l,loadPermissionGroupsForSpace:a,appliedSorts:i,setAppliedSorts:o}}var Ca=()=>a(334013),Ia=(a(944114),()=>a(106628));async function Ta(e){const{query:t,environment:a}=e,s=await Ia().T.searchActions.load(),{user:n,email:i}=await s.searchEmailUser(a,t),o=[];return n?o.push({type:"existingUser",value:n}):i&&o.push({type:"newUser",value:{email:i},source:"email"}),{inviteUsers:o,inviteBots:[],inviteGroups:[],importedContacts:[]}}function ka(e){let{organizationId:t,spaceId:a}=e;return async function(e){const{query:s,environment:n}=e,i=await M().callApi({eventName:"getMembersInOrganizationSpace",environment:n,data:{organizationId:t,spaceId:a,query:s,limit:5},headers:(0,ea().WS)({spaceId:a})});if("success"!==i.type)return{inviteUsers:[],inviteBots:[],inviteGroups:[],importedContacts:[]};const o=[];for(const t of i.data.members){const e=new(_().LU)(n,{table:w().oo,id:t.userId}).getModel();e&&o.push({type:"existingUser",value:e})}return{inviteUsers:o,inviteBots:[],inviteGroups:[],importedContacts:[]}}}var _a=()=>a(629148),Da=()=>a(757695),za=()=>a(946064);class Pa extends Da().default{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"read_and_write",isInviteTargetsEmpty:!0,table:za().y7,flowId:void 0,inputFocus:"none",emailMessage:""}}}var Na=()=>a(221723);function Ra(e){let{organizationId:t,spaceId:a,groups:n,onDismiss:o,onSubmit:r}=e;const l=(0,b().v3)(),d=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},content:{width:540}})),[]),[c,u]=(0,s.useState)(!1);async function g(){if(c)return;u(!0);const e=await M().callApi({eventName:"deleteGroupsInOrganizationSpace",environment:l,data:{organizationId:t,spaceId:a,groupIds:n.map((e=>e.id))}});"success"===e.type?(o(),r&&r()):"failed"===e.type&&C().f1((0,I().Hu)(T().A.getIntl(),e)),u(!1)}return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:(0,Nt().I)(d.icon),title:(0,i.jsx)(v().sA,{id:"organization.team.settings.deleteGroups.modal.title",defaultMessage:"Are you sure you want to delete {teamCount, plural, one {this group} other {these groups}}?",values:{teamCount:n.length}}),byline:(0,i.jsx)(v().sA,{id:"organization.team.settings.deleteGroups.modal.byline",defaultMessage:"This action cannot be undone. Any pages that are private to this group will be transferred to you."})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organization.team.settings.deleteGroups.modal.primaryAction",defaultMessage:"Delete {groupsCount, plural, one {group} other {groups}}",values:{groupsCount:n.length}}),primaryAction:g,primaryDisabled:c,secondaryText:(0,i.jsx)(v().sA,{id:"organization.team.settings.deleteGroups.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:o,isDarkRed:!0,isLoading:c}),children:(0,i.jsx)("div",{style:d.content,children:(0,i.jsx)(Ba,{groups:n})})})})}function Ba(e){const{groups:t}=e,[a,n]=(0,s.useState)(""),o=(0,S().K8)((()=>t.map((e=>({id:e.id,icon:(0,i.jsx)(Zt().e,{icon:e.groupIcon,spaceId:e.spaceId,size:Na().iK}),name:e.groupName,byline:(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organization.team.settings.deleteGroups.modal.groupsList.item.memberCount",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:e.memberCount}})})})))),[t]),r=(0,mt().Ay)(a,o,(e=>e.name??""));return(0,i.jsx)(K().p6,{items:r,titleText:(0,i.jsx)(v().sA,{id:"organization.team.settings.deleteGroups.modal.groupsList.title",defaultMessage:"Selected groups"}),headerText:(0,i.jsx)(v().sA,{id:"organization.team.settings.deleteGroups.modal.groupsList.header",defaultMessage:"Groups ({groupsCount})",values:{groupsCount:t.length}}),headerAction:(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:a,setQueryFilter:n})})}function La(e){let{organizationId:t,onDismiss:a,onSubmit:n,spaceId:o,...r}=e;const l=(0,b().v3)(),d=(0,v().tz)(),{updateCacheWithRecordMap:c}=(0,s.useContext)(P().N),u=(0,_a().E)({organizationId:t}),[g,m]=(0,s.useState)(!1),p=(0,S().K8)((()=>new Pa),[]),h=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:24,width:540,overflowY:"auto"}})),[]),{inviteTargets:f}=(0,S().K8)((()=>({inviteTargets:p.state.inviteTargets})),[p]),x=(0,S().K8)((()=>{const e=p.state.inviteTargets.length>0;return!g&&e}),[p,g]);async function y(){var e,s;m(!0);const i=null===(e=r.groupStore)||void 0===e?void 0:e.getGroupId(),u=i?[i]:null===(s=r.groups)||void 0===s?void 0:s.map((e=>e.id));if(null==u||!u.length||!x)return void m(!1);const g=f.filter((e=>"existingUser"===e.type)).map((e=>e.value.id)).filter(Rt().O9),p=await M().callApi({eventName:"updateGroupsInOrganizationSpace",environment:l,data:{organizationId:t,spaceId:o,groupIds:u,addMembers:g}});"success"===p.type?("success"===p.type&&n&&(n(),(0,pe().u4)({environment:l,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:o,update_type:"add_members"}}})),c({data:p.data}),a(),m(!1)):C().f1((0,I().Hu)(d,p))}const w=(0,S().K8)((()=>r.groupStore?r.groupStore.getName():r.groups.length?r.groups[0].groupName:d.formatMessage({id:"orgConsole.people.modal.addUsersToGroup.title.defaultSingular",defaultMessage:"group"})),[r,d]);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:a,areaConstraint:{height:{type:"min",length:200}},render:e=>{let{sizeRange:s}=e;return(0,i.jsx)(F().tf,{showDismissButton:!1,sizeRange:s,header:(0,i.jsx)(K().rQ,{icon:(0,Pt().x)(h.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToGroup.title",defaultMessage:"Add members to <gray>{groupCount, plural, one {{groupName}} other {# groups}}</gray>",values:{groupCount:r.groupStore?1:r.groups.length,groupName:w,gray:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.jsx)(D().D,{colorName:"secondary",as:"span",children:t})}}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToGroup.byline.space",defaultMessage:"Add the following users to this group."})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToGroup.button.add",defaultMessage:"Add members"}),primaryAction:y,primaryDisabled:!x,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToGroup.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsxs)("div",{style:h.content,children:[(0,i.jsx)(Ca().A,{disableAutoFocus:!0,showCurrentUser:!0,parentStore:u,permissionsInviteStore:p,performSearchRequest:ka({organizationId:t,spaceId:o})}),r.groups&&r.groups.length>1?(0,i.jsx)(Ba,{groups:r.groups}):void 0]})})}})}var Ea=()=>a(704152);function Oa(e){let{isOpen:t,children:a}=e;const s=(0,j().IS)((e=>({outer:{position:"absolute",top:-40,left:0,zIndex:999},inner:{display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:5,background:e.popoverBackground,boxShadow:e.shadowSM,height:32,overflow:"hidden"}})),[]);return(0,i.jsx)(Gt().A,{visible:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:s.outer,children:(0,i.jsx)("div",{style:s.inner,children:a})})}function Ua(e){const{icon:t,iconSize:a,title:s,isPrimary:n,isDestructive:o,onClick:r,disabled:l,disabledTooltipText:d}=e,c=(0,j().IS)((e=>({button:{color:n?e.blueColor:o?e.text.uiRedPrimary:e.text.primary,fontSize:14,whiteSpace:"nowrap",height:"100%",alignItems:"center",justifyContent:"center",gap:4,display:"flex",paddingRight:10,paddingLeft:10,borderRadius:0,boxShadow:`1px 0 0 ${e.regularDividerColor}`,fontVariantNumeric:"tabular-nums"},icon:{height:a??20,width:a??20,fill:"currentColor"}})),[n,o,a]);return(0,i.jsx)(q().A,{disableTooltip:!l,renderTooltip:()=>d,textWrap:!0,style:{width:260},render:e=>(0,i.jsxs)(Ea().A,{style:c.button,onClick:r,disabled:l,disabledFeedback:!0,...e,children:[t?t(c.icon):void 0,s]})})}function Fa(e){let{itemsSelectedCount:t}=e;return(0,i.jsx)(v().sA,{id:"settingsConsole.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount, plural, one {1 selected} other {{itemsSelectedCount} selected}}",values:{itemsSelectedCount:t}})}var Va=()=>a(51922),Ha=()=>a(887720),Wa=()=>a(815756);function qa(){return(0,j().IS)((()=>({tableHeader:{position:"relative",display:"flex",flexDirection:"row"},leftContent:{display:"flex",flex:"auto",flexWrap:"wrap",justifyContent:"flex-start",rowGap:4,alignItems:"flex-start",width:"100%",margin:"0 auto 12px",paddingTop:4},rightContent:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"flex-start",width:"100%",margin:"0 auto 12px",minHeight:28,gap:8},filters:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%"},multiSelect:{position:"relative"},search:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px"},actionContainer:{position:"relative",display:"flex",flexDirection:"row",gap:8}})),[])}var Ga=()=>a(764880),Ka=()=>a(792071),Ya=()=>a(68263),Qa=()=>a(574752),$a=()=>a(962730),Xa=()=>a(377586),Za=()=>a(862139),Ja=()=>a(267155),es=()=>a(856952),ts=()=>a(457688);function as(e){let{isOpen:t,onDismiss:a,onClick:n,spaceStore:o,includeGroups:r,selectedValues:l,setSelectedValues:d,inputPlaceholder:c}=e;const u=(0,v().tz)(),g=(0,b().v3)(),{organizationOwnerRecordCache:m}=(0,s.useContext)(P().N),[p,h]=(0,s.useState)(""),f=(0,s.useMemo)((()=>l.map((e=>e.userId)).filter(Rt().O9)),[l]),x=(0,s.useMemo)((()=>l.map((e=>e.groupId)).filter(Rt().O9)),[l]),{visibleUsers:j}=(0,B().d)(o.id),{permissionGroupsForSpace:A,loadPermissionGroupsForSpace:M}=(0,s.useContext)(N().D);(0,s.useEffect)((()=>{r&&M(o.id)}),[o.id,M,r]);const C=(0,s.useMemo)((()=>{const e=A[o.id].filter((e=>{let{group:t}=e;return!(null!=x&&x.includes(t.group_id))}));return(p?(0,mt().Ay)(p,e,(e=>{let{group:t}=e;return(0,ta().Pf)({intl:u,groupName:t.name})}),{normalizeFuzzyScore:!0}):e).slice(0,5)}),[A,o.id,x,u,p]),[{value:I}]=(0,Je().Yb)((async()=>{if(y().default.checkGate({gateName:"dont_load_users"}))return[];const e=j.filter((e=>(0,Ya().DH)(e.role)&&!(null!=f&&f.includes(e.userId))));return(await(0,Qa().searchUsers)({environment:g,query:p,parentStore:o,userIds:e.map((e=>e.userId))})).slice(0,5)}),[g,p,o,f,j]),T=(0,s.useCallback)((e=>{const t=l.filter((t=>t.userId!==e));d(t)}),[l,d]),k=(0,s.useCallback)((e=>{const t=l.filter((t=>t.groupId!==e));d(t)}),[l,d]),D=(0,S().K8)((()=>l.map((e=>{if("user"===e.type){const t=new(_().LU)(g,{table:w().oo,id:e.userId});return(0,i.jsx)(jt().A,{showRemoveButton:!0,value:t.getFullName(u)||t.getEmail(),format:ut().NY.Medium,isSingle:!1,onClickRemove:()=>T(e.userId)},e.userId)}if("group"===e.type){const t=new(_().Cv)(g,{table:Wt().n,id:(0,Wt().T1)({spacePermissionGroupId:e.groupId,spaceId:o.id}),spaceId:o.id},{inMemoryRecordCache:m});return(0,i.jsx)(jt().A,{showRemoveButton:!0,value:t.getName(),format:ut().NY.Medium,isSingle:!1,onClickRemove:()=>k(e.groupId)},e.groupId)}(0,Rt().HB)(e)}))),[g,T,k,u,l,m,o.id]),z=(0,s.useCallback)((e=>{h(e.currentTarget.value)}),[]),R=e=>{const t=[...l,{type:"user",userId:e}];d(t),h("")},L=r?{includeGroups:r,onSelectGroup:e=>{const t=[...l,{type:"group",groupId:e}];d(t),h("")},permissionGroups:C}:{includeGroups:!1};return(0,i.jsx)(bt().Ay,{placementToOrigin:$a().W.Bottom,alignmentToOrigin:$a().C.Start,originGap:8,open:t&&(Boolean(null==I?void 0:I.length)||Boolean(C.length&&r)),popupType:Xa().n.Popup,onDismiss:a,sameWidthAsOrigin:!0,origin:(0,i.jsx)(es().Ay,{showBorder:!0,onRemoveLastToken:()=>d([]),format:es().le.Select,value:p,tokens:D,onChange:z,onClick:n,placeholder:c??u.formatMessage(ns.membersPlaceholder),style:{borderRadius:6,padding:"6px 8px"},inputStyle:{borderRadius:6},inputFullWidth:!0}),render:()=>(0,i.jsx)(ss,{spaceStore:o,onSelectUser:R,users:I??[],query:p,...L})})}function ss(e){let{spaceStore:t,onSelectUser:a,onSelectGroup:s,includeGroups:n,users:o,permissionGroups:r,query:l}=e;if(!(null!=o&&o.length||null!=r&&r.length))return null;const d=[],c=(o??[]).map((e=>({key:e.id,render:t=>(0,i.jsx)(ts().A,{...t,actor:(0,Ga().A7)(e)}),action:()=>{a(e.id)}})));c.length&&d.push({key:"user results",render:e=>(0,i.jsx)(Ja().z,{loading:!1,...e}),items:c});const u=n&&s?r.map((e=>{let{group:a}=e;return{key:a.group_id,render:e=>(0,i.jsx)(Za()._,{menuListItemProps:e,group:Ka().Bj6.fromValue(Wt().n,a),spaceStore:t}),action:()=>{s(a.group_id)}}})):[];return u.length&&d.push({key:"group results",render:e=>(0,i.jsx)(He().A,{title:(0,i.jsx)(v().sA,{id:"spaceMembersInput.searchDropdown.selectGroupTitle",defaultMessage:"Select a group"}),loading:!1,...e}),items:u}),(0,i.jsx)(yt().Ay,{initialFocus:l.length>0?0:void 0,type:yt().Oh.Vertical,sections:d})}const ns=(0,v().YK)({membersPlaceholder:{id:"spaceMembersInput.members.placeholder",defaultMessage:"No members yet"}});function is(e){let{onDismiss:t,spaceStore:a,organizationId:n,refetchData:o}=e;const[r,l]=(0,s.useState)(void 0),[d,c]=(0,s.useState)(void 0),u=(0,j().IS)((e=>({footer:{display:"flex",justifyContent:"flex-end",gap:8},content:{width:540},headerIcon:{width:32,height:32,fill:e.icon.secondary},icon:{width:24,height:24,fill:e.icon.secondary},iconButton:{width:32,height:32,borderRadius:6,border:`1px solid ${e.stroke.primary}`,background:e.buttonHoveredBackground},iconNameContainer:{display:"flex",gap:8},header:{marginBottom:4},iconNameSection:{marginBottom:20}})),[]),[g,p]=(0,s.useState)([]),h=(0,b().v3)(),f=async()=>{const e=g.map((e=>{let{userId:t}=e;return t})).filter(Rt().O9),s=await M().callApi({eventName:"createPermissionGroupWithMembers",environment:h,data:{spaceId:a.id,organizationId:n,name:r,icon:null==d?void 0:d.icon,userIds:e}});t(),"success"===s.type?o():C().f1((0,I().Hu)(T().A.getIntl(),s))},x=(0,s.useCallback)((e=>{l(e.currentTarget.value)}),[]),y=(0,s.useCallback)((e=>{c(e?{pointer:{id:a.id,table:na().NX},icon:e}:void 0)}),[a]),S=(0,s.useCallback)((()=>{k(!0)}),[]),w=(0,v().tz)(),[A,k]=(0,s.useState)(!1);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:t,render:()=>(0,i.jsx)(F().tf,{showDismissButton:!1,header:(0,i.jsx)(K().rQ,{title:(0,i.jsx)(v().sA,{id:"createGroupModal.title",defaultMessage:"Create a new group"}),icon:(0,m().F)(u.headerIcon),byline:(0,i.jsx)(v().sA,{id:"createGroupModal.byline",defaultMessage:"Use groups to manage access to teamspaces and pages within a workspace."})}),footer:(0,i.jsx)(K().jl,{secondaryText:(0,i.jsx)(v().sA,{id:"createGroupModal.cancel",defaultMessage:"Cancel"}),primaryText:(0,i.jsx)(v().sA,{id:"createGroupModal.create",defaultMessage:"Create group"}),primaryAction:f,secondaryAction:t}),children:(0,i.jsxs)("div",{style:u.content,children:[(0,i.jsxs)("div",{style:u.iconNameSection,children:[(0,i.jsx)("div",{style:u.header,children:(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"createGroupModal.iconAndName.header",defaultMessage:"Icon & name"})})}),(0,i.jsxs)("div",{style:u.iconNameContainer,children:[(0,i.jsx)(E().A,{disabled:!1,bucket:"public",icon:d,defaultIcon:(0,m().F)(u.icon),isEmptyPage:!1,size:24,onChange:y,style:u.iconButton}),(0,i.jsx)(U().A,{value:r,onChange:x,placeholder:w.formatMessage(os.groupNamePlaceholder)})]})]}),(0,i.jsx)("div",{style:u.header,children:(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"createGroupModal.members.header",defaultMessage:"Members"})})}),(0,i.jsx)(as,{spaceStore:a,isOpen:A,onDismiss:()=>k(!1),onClick:S,selectedValues:g,setSelectedValues:p})]})})})}const os=(0,v().YK)({groupNamePlaceholder:{id:"createGroupModal.groupName.placeholder",defaultMessage:"Enter a name for the group"}}),rs={viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M15.825 5.05a.875.875 0 0 0-.875-.875H7.313a.875.875 0 1 0 0 1.75h5.524L4.393 14.37c-.32.32-.303.857.039 1.198.341.342.878.36 1.198.039l8.445-8.444v5.524a.875.875 0 1 0 1.75 0z"})},ls=(0,n().wt)("arrowDiagonalUpRightFill",rs);var ds=()=>a(734459),cs=()=>a(285790);function us(e){let{isHovered:t,iconFunction:a,tooltipMessage:s,buttonProps:n}=e;const o=(0,j().IS)((e=>({container:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"right"},buttonContainer:{display:"flex",background:e.surface.elevated,padding:2,boxShadow:e.shadowSM,borderRadius:6},button:{height:20,width:20,boxShadow:"none"},icon:{color:e.icon.secondary,height:14,width:14}})),[]);return(0,i.jsx)("div",{style:o.container,children:t&&(0,i.jsx)(q().A,{renderTooltip:()=>s,render:e=>(0,i.jsx)("div",{style:o.buttonContainer,...e,children:(0,i.jsx)(cs().A,{ariaLabel:s,hasBackground:!0,icon:a,showShadow:!0,iconStyle:o.icon,style:o.button,onClick:e=>{var t;null===(t=n.onClick)||void 0===t||t.call(n,e),e.stopPropagation()},...n})})})})}function gs(e){let{groupId:t,organizationId:a,isHovered:n}=e;const o=(0,v().tz)(),r=(0,s.useMemo)((()=>(0,ds().re)({organizationId:a,tabRoute:Jt().kr,properties:{subtab:Jt().DE.Groups},queryParams:{[$h]:t}})),[a,t]);return(0,k().X)("organization_console_group_single_view_modal")?(0,i.jsx)(us,{isHovered:n,iconFunction:ls,tooltipMessage:o.formatMessage(ms.viewFullDetail),buttonProps:{href:r,external:!0}}):null}const ms=(0,v().YK)({viewFullDetail:{defaultMessage:"View full detail",id:"organization.workspace.members.emailColumn.viewFullDetail"}}),ps=(0,v().YK)({name:{id:"workspaceModalGroupsView.nameColumn.header",defaultMessage:"Name"},teams:{id:"workspaceModalGroupsView.teamspacesColumn.sortName",defaultMessage:"Teamspaces"},members:{id:"workspaceModalGroupsView.membersColumn.header",defaultMessage:"Members"}}),hs={id:"name",headerTitle:(0,i.jsx)(v().sA,{...ps.name}),renderCell:e=>{const t=0===e.groupName.length?(0,i.jsx)(v().sA,{id:"workspaceModalGroupsView.untitledGroup",defaultMessage:"Untitled"}):e.groupName;return(0,i.jsx)(Lt().s7,{title:t,icon:(0,i.jsx)(Zt().e,{icon:e.groupIcon,spaceId:e.spaceId,size:Na().p8}),iconSize:Na().p8,iconMargin:Lt().Ji,summaryStyles:{width:`calc(100% - ${Na().p8+Lt().Ji}px)`}})},widthData:{widthPercent:40,minWidth:100},sortable:!1},fs={id:"teamspaces",headerTitle:(0,i.jsx)(v().sA,{id:"workspaceModalGroupsView.teamspacesColumn.header",defaultMessage:"Associated Teamspaces"}),renderCell:e=>(0,i.jsx)(D().D,{colorName:"secondary",children:(0,i.jsx)(v().sA,{defaultMessage:"{numTeamspaces} {numTeamspaces, plural, one {teamspace} other {teamspaces}}",id:"workspaceModalGroupsView.numTeamspaces",values:{numTeamspaces:e.teamspacesCount}})}),widthData:{widthPercent:30,minWidth:100},sortable:!1},xs={id:"members",headerTitle:(0,i.jsx)(v().sA,{...ps.members}),renderCell:e=>(0,i.jsx)(D().D,{colorName:"secondary",children:(0,i.jsx)(v().sA,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"organizationManageWorkspacesTable.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:20,minWidth:100},sortable:!1};function vs(e){return{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>(0,i.jsx)(gs,{groupId:t.id,isHovered:t.isRowHovered,organizationId:e}),widthData:{widthPercent:10,minWidth:36},sortable:!1}}const ys=[{id:hs.id,name:T().A.formatMessage(ps.name),type:"title"},{id:fs.id,name:T().A.formatMessage(ps.teams),type:"number"},{id:xs.id,name:T().A.formatMessage(ps.members),type:"number"}];var bs=function(e){return e.CreateGroup="create-group",e.DeleteGroups="delete-groups",e.AddMembers="add-members",e}(bs||{});function Ss(e){let{spaceStore:t,organizationId:a}=e;const n=(0,s.useMemo)((()=>[hs,fs,xs,vs(a)]),[a]),o=(0,j().IS)((()=>({createGroupButton:{marginBottom:8}})),[]),r=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:n,theme:e,containerMarginTop:0})),[n]),l=qa(),d=(0,s.useMemo)((()=>[t.id]),[t]),{teamStores:c}=(0,R().o)(d),u=(0,s.useMemo)((()=>Object.values(c).flat()),[c]),{rows:g,loadPermissionGroupsForSpace:p,setAppliedSorts:h,appliedSorts:f}=Ma(t.id,u),{filteredRows:x,query:y,setQuery:b,loadNextPage:S,loadPrevPage:w,hasNextPage:A,hasPrevPage:M,currentPageIndex:C}=function(e){const[t,a]=(0,s.useState)(""),[n,i]=(0,s.useState)(0),o=(0,s.useMemo)((()=>{if(!e)return[];let a=e;return t&&(a=(0,mt().Ay)(t,a,(e=>e.groupName))),a}),[t,e]),r=(0,s.useMemo)((()=>{const e=n*wa,t=e+wa;return o.slice(e,t)}),[o,n]);(0,s.useEffect)((()=>{i(0)}),[t]);const l=(0,s.useMemo)((()=>(n+1)*wa<o.length),[o,n]),d=n>0,c=(0,s.useCallback)((()=>{l&&i((e=>e+1))}),[l]),u=(0,s.useCallback)((()=>{d&&i((e=>e-1))}),[d]);return{query:t,setQuery:a,filteredRows:r,loadNextPage:c,loadPrevPage:u,hasNextPage:l,hasPrevPage:d,currentPageIndex:n}}(g),{selectedRows:I,handleToggleRow:T,handleSelectAllRows:k,handleUnselectAllRows:_}=Ut({allPossibleRows:x}),[D,z]=(0,s.useState)(),[P,N]=(0,s.useState)(),[B,L]=(0,s.useState)(!1),E=e=>{T(e)};return(0,i.jsxs)(ee,{children:[(0,i.jsx)(Va()._,{title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.groups.title",defaultMessage:"Groups"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.workspace.groups.byline",defaultMessage:"Set up groups to simplify page permissions and manage teamspace members at scale."})}),(0,i.jsx)("div",{style:l.multiSelect,children:(0,i.jsxs)(Oa,{isOpen:I.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.groups.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:I.length}}),onClick:_}),(0,i.jsx)(Ua,{icon:Pt().x,iconSize:16,title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.groups.multiselect.addMembers",defaultMessage:"Add members"}),onClick:()=>z(bs.AddMembers)}),(0,i.jsx)(Ua,{icon:Nt().I,iconSize:16,title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.groups.multiselect.delete",defaultMessage:"Delete groups"}),onClick:()=>z(bs.DeleteGroups),isDestructive:!0})]})}),(0,i.jsxs)("div",{style:l.actionContainer,children:[(0,i.jsx)("div",{style:l.filters,children:(0,i.jsx)(Wa().e,{sortProperties:ys,isMenuOpen:B,setIsMenuOpen:L,onApply:e=>{L(!1),h(e),N(void 0)},currentSorts:P??f??[]})}),(0,i.jsx)("div",{style:l.search,children:g.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ha().x,{appliedSorts:f,openSortPillMenu:e=>{e&&N([{propertyId:e,direction:"ascending"}]),L(!0)},sortProperties:ys}),(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:y,setQueryFilter:b})]})}),(0,i.jsx)(H().A,{onClick:()=>z(bs.CreateGroup),style:o.createGroupButton,children:(0,i.jsx)(v().sA,{defaultMessage:"Create new group",id:"workspaceModalGroupsView.createNewGroupButton"})})]}),(0,i.jsx)(Bt().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,rows:x,columnRenderInfo:n,styles:r,onRowClick:E,multiselect:{header:{isDisabled:!1,isSelected:x.length>0&&I.length===x.length,onClick:()=>{I.length===x.length?_():k()}},row:{getDisabledState:()=>!1,getSelectedState:e=>I.some((t=>t.id===e.id)),onClick:E}},renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:m().F,title:(0,i.jsx)(v().sA,{id:"workspaceModalGroupsView.empty",defaultMessage:"No groups found"}),byline:(0,i.jsx)(v().sA,{id:"workspaceModalGroupsView.empty.byline",defaultMessage:"There are no groups that match this query."})}),loadMoreMethod:{type:"pages",onLoadNext:S,onLoadPrevious:w,hasNextPage:A,hasPrevPage:M,currentPage:C+1}}),D===bs.CreateGroup&&(0,i.jsx)(is,{onDismiss:()=>z(void 0),spaceStore:t,organizationId:a,refetchData:()=>p(t.id,!0)}),D===bs.DeleteGroups&&(0,i.jsx)(Ra,{spaceId:t.id,organizationId:a,groups:I,onDismiss:()=>z(void 0),onSubmit:()=>{p(t.id,!0),_()}}),D===bs.AddMembers&&(0,i.jsx)(La,{spaceId:t.id,organizationId:a,groups:I,onDismiss:()=>z(void 0),onSubmit:()=>{p(t.id,!0),_()}})]})}const js=(0,n().wt)("removePersonOutline",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M11.524 16.45h-5.79q-1.75 0-1.75-1.177 0-.696.417-1.463.424-.765 1.21-1.428a6.4 6.4 0 0 1 1.9-1.073q1.108-.417 2.489-.417.895 0 1.675.191a6.4 6.4 0 0 1 1.435.513 4.5 4.5 0 0 0-.464.43q-.22.225-.397.5A5.7 5.7 0 0 0 10 12.074q-1.135 0-2.017.32-.875.315-1.476.8-.595.48-.91.992-.314.506-.314.902 0 .096.048.137.055.04.178.04h5.824q.007.315.048.602a4 4 0 0 0 .143.581Zm-1.53-6.358a2.75 2.75 0 0 1-1.512-.438 3.2 3.2 0 0 1-1.08-1.175A3.35 3.35 0 0 1 7 6.845q0-.882.403-1.6A3.2 3.2 0 0 1 8.49 4.104a2.78 2.78 0 0 1 1.504-.424q.82 0 1.497.43.684.431 1.087 1.156.41.718.403 1.592 0 .89-.403 1.627a3.2 3.2 0 0 1-1.08 1.17 2.7 2.7 0 0 1-1.504.437m0-1.19q.471 0 .867-.266a1.95 1.95 0 0 0 .643-.739q.24-.465.24-1.039a2 2 0 0 0-.24-1.011 1.9 1.9 0 0 0-.636-.718 1.54 1.54 0 0 0-.875-.267q-.478 0-.875.26-.396.26-.636.711t-.239 1.012q0 .574.24 1.046.238.465.635.738.403.273.875.273Zm5.83 9.79a3.4 3.4 0 0 1-1.36-.274 3.5 3.5 0 0 1-1.121-.766 3.7 3.7 0 0 1-.766-1.12 3.4 3.4 0 0 1-.273-1.361q0-.725.273-1.36.28-.636.766-1.121a3.5 3.5 0 0 1 1.12-.766 3.4 3.4 0 0 1 1.361-.274q.725 0 1.36.274a3.56 3.56 0 0 1 1.88 1.886q.28.636.28 1.36 0 .719-.28 1.354a3.5 3.5 0 0 1-.765 1.128q-.486.486-1.128.76a3.3 3.3 0 0 1-1.347.28m-1.77-3.056h3.527a.44.44 0 0 0 .328-.144.43.43 0 0 0 0-.642.44.44 0 0 0-.328-.144h-3.527a.44.44 0 0 0-.328.144.44.44 0 0 0-.137.32q0 .186.137.322.135.144.328.144"})});var ws=()=>a(618659),As=()=>a(319625);const Ms={rows:[],filters:{},query:void 0,sorts:void 0,loading:!1,error:void 0,hasNextPage:!0,hasPreviousPage:!1,nextCursor:void 0},Cs=1;a(803949);var Is=()=>a(433847),Ts=()=>a(848538),ks=()=>a(303129);function _s(e){let{inviteTargets:t,inviteRole:a,organizationStore:n}=e;const o=(0,b().v3)(),[r,l]=(0,s.useState)(!1);return{spaceStores:(0,ks().l)(),loading:r,onSubmit:(0,s.useCallback)((async e=>{l(!0);const s=t.filter((e=>"existingUser"===e.type)).map((e=>e.value.id)).filter(Rt().O9),r=t.filter((e=>"newUser"===e.type&&"email"===e.source)).map((e=>e.value.email)),d=(0,Ts().jM)(a),c=await M().callApi({eventName:"bulkAddUsersToOrganizationSpaces",environment:o,data:{organizationId:n.id,existingUserIds:s,newUserEmails:r,spaceIds:e,role:d}});l(!1),"success"===c.type&&((0,pe().u4)({environment:o,event:{eventName:"org_console_people_add_members",eventProperties:{organization_id:n.id,space_ids:e,num_users_added:r.length+s.length}}}),1===e.length?ot().D6({label:(0,i.jsx)(v().sA,{id:"workspacesMultiSelect.toastMessage.addUsers.singleSpace.success",defaultMessage:"Successfully added users to workspace"})}):ot().D6({label:(0,i.jsx)(v().sA,{id:"workspacesMultiSelect.toastMessage.addUsers.success",defaultMessage:"Successfully added users to {numWorkspaces, plural, one {{numWorkspaces} workspace} other {{numWorkspaces} workspaces}}.",values:{numWorkspaces:e.length}})}))}),[n,o,a,t])}}var Ds=()=>a(84817);function zs(e){const{userStore:t}=e,a=(0,j().IS)((e=>({userRow:{display:"flex",alignItems:"center",padding:"6px 12px",flexDirection:"row",gap:12},name:{flex:1},email:{flex:2,maxWidth:"70%",overflow:"hidden"}})),[]),s=(0,v().tz)(),n=(0,S().K8)((()=>({name:t.getDisplayName(s),email:t.getEmail()})),[s,t]);return(0,i.jsxs)("div",{style:a.userRow,children:[(0,i.jsx)(da().A,{userStore:t,size:28}),(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Medium",colorName:"primary",customStyles:a.name,children:n.name}),(0,i.jsx)(Ds().Y1,{align:"center-right",style:a.email,children:(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:n.email})})]})}const Ps=function(e){let{userIds:t}=e;const n=(0,j().IS)((e=>({userListContainer:{borderRadius:8,border:`1px solid ${e.stroke.secondary}`},userListHeader:{padding:"4px 16px",borderBottom:`1px solid ${e.stroke.secondary}`,display:"flex",alignItems:"center"},scroller:{maxHeight:200},searchInput:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%"}})),[]),o=(0,b().v3)(),r=(0,v().tz)(),l=(0,S().K8)((()=>t.map((e=>new(ft().L)(o,{table:w().oo,id:e})))),[o,t]),[d,c]=(0,s.useState)(""),u=(0,S().K8)((()=>{if(d){return(0,mt().Ay)(d,l,(e=>e.getDisplayName(r)))}return l}),[d,l,r]);return(0,i.jsxs)("div",{children:[(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",as:"p",children:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.usersList.label",defaultMessage:"Selected users"})}),(0,i.jsxs)("div",{style:n.userListContainer,children:[(0,i.jsxs)("div",{style:n.userListHeader,children:[(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.usersList.nameLabel",defaultMessage:"Name"})}),(0,i.jsx)("div",{style:n.searchInput,children:(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:d,setQueryFilter:c})})]}),(0,i.jsx)(a(2143).H,{type:a(756279).A.Y,style:n.scroller,children:u.map((e=>(0,i.jsx)("div",{children:(0,i.jsx)(zs,{userStore:e})},e.id)))})]})]})};var Ns=()=>a(653088);function Rs(e){const{userModel:t,refreshSpaceData:a,...n}=e,o=[{type:"existingUser",value:t}],r=(0,s.useCallback)((e=>(e.forEach((e=>a(e))),Promise.resolve())),[a]);return(0,i.jsx)(Es,{title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberModalForSingleUser.title",defaultMessage:"Upgrade guest to workspace member"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberModalForSingleUser.byline",defaultMessage:"Choose workspaces to grant this guest full membership and expanded access."}),buttonText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberModalForSingleUser.button.add",defaultMessage:"Upgrade guest"}),inviteTargets:o,inviteRole:"read_and_write",refreshPage:r,...n})}function Bs(e){const{permissionsInviteStore:t,...a}=e,s=(0,v().tz)(),{inviteRole:n,inviteTargets:o}=(0,S().K8)((()=>({inviteRole:t.state.inviteRole,inviteTargets:t.state.inviteTargets})),[t]);return(0,i.jsx)(Es,{title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberModal.title",defaultMessage:"Upgrade {count} {count, plural, one {guest} other {guests}} to {role}",values:{count:o.length,role:s.formatMessage((0,Is().rd)((0,Ts().jM)(n))).toLocaleLowerCase()}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberModal.byline",defaultMessage:"Upgrade the selected guests to members in your workspaces"}),buttonText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberModal.button.add",defaultMessage:"Upgrade guests"}),inviteTargets:o,inviteRole:n,...a})}function Ls(e){const{inviteTargets:t,...a}=e;return(0,i.jsx)(Es,{title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberForSingleWorkspaceModal.title",defaultMessage:"Upgrade {count} {count, plural, one {guest to member} other {guests to member}}",values:{count:t.length}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberForSingleWorkspaceModal.byline",defaultMessage:"Upgrade following guests to full members for broader workspace access."}),buttonText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberForSingleWorkspaceModal.button.add",defaultMessage:"Upgrade guests"}),inviteTargets:t,inviteRole:"read_and_write",...a})}function Es(e){let{title:t,byline:a,buttonText:n,inviteTargets:o,inviteRole:r,organizationStore:l,refreshPage:d,onDismiss:c,disabledSpaceIds:u,spaceStore:g,bylineWidthOverride:m}=e;const[p,h]=(0,s.useState)(g?[g.id]:[]),{spaceStores:f,loading:x,onSubmit:y}=_s({inviteRole:r,inviteTargets:o,organizationStore:l}),b=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:540}})),[]);function S(e){h((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function w(){h((e=>{const t=f.length-((null==u?void 0:u.length)??0);return e.length!==t?f.map((e=>e.id)).filter((e=>!(null!=u&&u.includes(e)))):[]}))}async function A(){0!==p.length&&(await y(p),await d(p),c())}return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:c,render:()=>(0,i.jsx)(F().tf,{showDismissButton:!1,header:(0,i.jsx)(K().rQ,{icon:(0,Pt().x)(b.icon),title:t,byline:a,bylineWidthOverride:m}),footer:(0,i.jsx)(K().jl,{primaryText:n,primaryAction:A,primaryDisabled:0===p.length||x,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.convertToMemberModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:c}),children:(0,i.jsx)("div",{style:b.content,children:g?(0,i.jsx)(Ps,{userIds:o.map((e=>e.value.id)).filter(Rt().O9)}):(0,i.jsx)(Ns().O,{spaceStores:f,selectedSpaceIds:p,onSelect:S,onSelectHeader:w,disabledRowMetadata:{disabledSpaceIds:u??[],disabledByline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.workspacesSelect.workspaceRowDisabledByline",defaultMessage:"Already a member"})}})})})})}a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698);function Os(e){let{inviteTargets:t,organizationStore:a}=e;const n=(0,b().v3)(),[o,r]=(0,s.useState)(!1);return{spaceStores:(0,ks().l)(),loading:o,onSubmit:(0,s.useCallback)((async e=>{r(!0);const s=t.filter((e=>"existingUser"===e.type)).map((e=>e.value.id)).filter(Rt().O9);"success"===(await M().callApi({eventName:"removeUserFromOrganizationSpaces",environment:n,data:{organizationId:a.id,userIds:s,spaceIds:e}})).type&&((0,pe().u4)({environment:n,event:{eventName:"org_console_people_remove_users",eventProperties:{organization_id:a.id,space_ids:e,num_users_removed:s.length}}}),1===e.length?ot().D6({label:(0,i.jsx)(v().sA,{id:"workspacesMultiSelect.toastMessage.removeUsers.success.singleWorkspace",defaultMessage:"Successfully removed users from workspace."})}):ot().D6({label:(0,i.jsx)(v().sA,{id:"workspacesMultiSelect.toastMessage.removeUsers.success",defaultMessage:"Successfully removed users from {numWorkspaces, plural, one {{numWorkspaces} workspace} other {{numWorkspaces} workspaces}}.",values:{numWorkspaces:e.length}})})),r(!1)}),[t,n,a.id])}}function Us(e){const{userModel:t,refreshSpaceData:a,guestSpaceIds:n,...o}=e,r=[{type:"existingUser",value:t}],l=(0,s.useCallback)((e=>(e.forEach((e=>a(e))),Promise.resolve())),[a]);return(0,i.jsx)(qs,{title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsFromWorkspaceModalForSingleUser.title",defaultMessage:"Remove guest access"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsFromWorkspaceModalForSingleUser.byline",defaultMessage:"Choose the workspaces you wish to remove this guest’s access."}),buttonText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsFromWorkspaceModalForSingleUser.button.remove",defaultMessage:"Remove guest access"}),inviteTargets:r,refreshPage:l,spaceIdsToDisplay:n,...o})}function Fs(e){let{count:t}=e;return(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.title",defaultMessage:"Remove {count} {count, plural, one {guest} other {guests}} from workspace",values:{count:t}})}function Vs(e){let{count:t}=e;return(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.button.remove",defaultMessage:"Remove {count, plural, one {guest} other {guests}}",values:{count:t}})}function Hs(e){const{permissionsInviteStore:t,organizationGuests:a,...s}=e,n=(0,S().K8)((()=>t.state.inviteTargets),[t]),o=new Set;for(const i of n){const e=a.find((e=>e.userId===i.value.id)),t=e?Object.keys(e.guestPages):[];for(const a of t)o.add(a)}return(0,i.jsx)(qs,{title:(0,i.jsx)(Fs,{count:n.length}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.byline",defaultMessage:"Remove access to all pages within selected workspaces."}),buttonText:(0,i.jsx)(Vs,{count:n.length}),inviteTargets:n,spaceIdsToDisplay:Array.from(o),...s})}function Ws(e){const{inviteTargets:t,...a}=e;return(0,i.jsx)(qs,{title:(0,i.jsx)(Fs,{count:t.length}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsFromSingleWorkspaceModal.byline",defaultMessage:"Remove the following guests from the workspace and revoke all page access."}),buttonText:(0,i.jsx)(Vs,{count:t.length}),inviteTargets:t,...a})}function qs(e){let{title:t,byline:a,buttonText:n,inviteTargets:o,organizationStore:r,refreshPage:l,onDismiss:d,spaceIdsToDisplay:c,spaceStore:u}=e;const[g,m]=(0,s.useState)(u?[u.id]:[]),{spaceStores:p,loading:h,onSubmit:f}=Os({inviteTargets:o,organizationStore:r}),x=p.filter((e=>!c||c.includes(e.id))),y=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:540}})),[]);function b(e){m((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function S(){m((e=>e.length!==x.length?x.map((e=>e.id)):[]))}async function w(){0!==g.length&&(await f(g),await l(g),d())}return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:d,render:()=>(0,i.jsx)(F().tf,{showDismissButton:!1,header:(0,i.jsx)(K().rQ,{icon:js(y.icon),title:t,byline:a}),footer:(0,i.jsx)(K().jl,{primaryText:n,primaryAction:w,primaryDisabled:0===g.length||h,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:d}),children:(0,i.jsx)("div",{style:y.content,children:u?(0,i.jsx)(Ps,{userIds:o.map((e=>e.value.id)).filter(Rt().O9)}):(0,i.jsx)(Ns().O,{spaceStores:x,selectedSpaceIds:g,onSelect:b,onSelectHeader:S})})})})}const Gs={viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M14.754 4.125a7.625 7.625 0 1 0-2.052 12.964.625.625 0 0 0-.46-1.162 6.376 6.376 0 1 1 3.672-3.83c-.159.457-.654.778-1.278.778a1.28 1.28 0 0 1-1.28-1.28V7.079a.625.625 0 0 0-1.25 0v.214c-.654-.555-1.496-.839-2.383-.839-.969 0-1.878.338-2.546 1-.672.665-1.058 1.614-1.058 2.751s.385 2.098 1.05 2.778c.665.679 1.575 1.04 2.554 1.04s1.893-.36 2.563-1.037q.075-.074.143-.153a2.53 2.53 0 0 0 2.207 1.292c1.01 0 2.081-.533 2.459-1.618a7.625 7.625 0 0 0-2.341-8.382m-7.385 6.08c0-.846.28-1.46.687-1.862.41-.406.99-.639 1.667-.639s1.266.234 1.683.641c.412.404.697 1.018.697 1.86 0 .844-.286 1.478-.704 1.9-.421.425-1.01.669-1.676.669-.667 0-1.247-.243-1.66-.666-.412-.42-.694-1.056-.694-1.903"})},Ks=(0,n().wt)("at",Gs);var Ys=()=>a(125565),Qs=()=>a(981982);function $s(e){let{selectedEmailDomains:t,setSelectedEmailDomains:a,emailDomains:s,pillTitle:n}=e;const o=(0,S().K8)((()=>s.map((e=>({key:e,value:e,title:(0,i.jsx)(Ys().A,{children:e}),shortTitle:e})))),[s]);return(0,i.jsx)(Qs().VX,{pillTitle:n,pillIcon:Ks,selectedItems:t,setSelectedItems:a,items:o})}function Xs(e){let{userId:t,organizationId:a,isHovered:n,usersType:o}=e;const r=(0,v().tz)(),l=(0,s.useMemo)((()=>(0,ds().re)({organizationId:a,tabRoute:Jt().kr,properties:{subtab:o},queryParams:{userId:t}})),[a,t,o]);return(0,i.jsx)(us,{isHovered:n,iconFunction:ls,tooltipMessage:r.formatMessage(Zs.viewFullDetail),buttonProps:{href:l,external:!0}})}const Zs=(0,v().YK)({viewFullDetail:{defaultMessage:"View full detail",id:"organization.workspace.members.emailColumn.viewFullDetail"}}),Js=(0,v().YK)({name:{id:"organization.workspace.guests.nameColumn.header",defaultMessage:"Name"},email:{id:"organization.workspace.guests.emailColumn.header",defaultMessage:"Email"},pages:{id:"organization.workspace.guests.pagesColumn.header",defaultMessage:"Pages"}}),en={id:"name",headerTitle:(0,i.jsx)(v().sA,{...Js.name}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(ua,{userId:e.id}),widthData:{widthPercent:40,minWidth:100},sortable:!1},tn={id:"pages",headerTitle:(0,i.jsx)(v().sA,{...Js.pages}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:120}}):(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organization.workspace.guests.pagesColumn.pages",defaultMessage:"{count, plural, one {# page} other {# pages}}",values:{count:e.pagesCount}})}),widthData:{widthPercent:20,minWidth:80},sortable:!1},an={id:"email",headerTitle:(0,i.jsx)(v().sA,{...Js.email}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)(ws().xF,{userId:e.id,styles:{overflow:"hidden"}}),widthData:{widthPercent:40,minWidth:100},sortable:!1};function sn(e){return{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>t.type===Xt().T.Loading?void 0:(0,i.jsx)(Xs,{userId:t.id,isHovered:t.isRowHovered,organizationId:e,usersType:"guests"}),widthData:{widthPercent:9,minWidth:36},sortable:!1}}const nn=[{id:en.id,name:T().A.formatMessage(Js.name),type:"title"},{id:tn.id,name:T().A.formatMessage(Js.pages),type:"number"},{id:an.id,name:T().A.formatMessage(Js.email),type:"text"}];var on=function(e){return e.RemoveFromWorkspace="remove-from-workspace",e.ConvertToMember="convert-to-member",e}(on||{});function rn(e){let{organizationId:t,spaceStore:a}=e;const n=(0,s.useMemo)((()=>[en,tn,an,sn(t)]),[t]),o=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:n,theme:e,containerMarginTop:0})),[n]),r=qa(),l=(0,_a().E)({organizationId:t}),{rows:d,filters:c,setFilters:u,query:g,setQuery:p,hasNextPage:h,hasPreviousPage:f,loadNextPage:x,loadPreviousPage:y,currentPage:A,sorts:C,setSorts:I,loading:T,reloadPage:k}=function(e){let{spaceId:t,organizationId:a}=e;const n=(0,b().v3)(),[i,o]=(0,s.useState)(Ms),[r,l]=(0,s.useState)(Cs),d=(0,s.useRef)(void 0),c=(0,s.useCallback)((e=>{o((t=>({...t,filters:e}))),l(Cs)}),[]),u=(0,s.useCallback)((e=>{o((t=>({...t,sorts:e}))),l(Cs)}),[]),g=(0,s.useCallback)((e=>{o((t=>({...t,query:e}))),l(Cs)}),[]);function m(){if(!d.current)return;const e=d.current.offset-et().q;return e<0?void 0:e}const p=(0,s.useCallback)((async e=>{let{cursor:s}=e;try{o((e=>({...e,loading:!0}))),d.current=s;const e=await M().callApi({eventName:"getGuestsInOrganizationSpace",environment:n,data:{organizationId:a,spaceId:t,filters:i.filters,sorts:(r=i.sorts,null==r?void 0:r.map((e=>{let{propertyId:t,direction:a}=e;if("name"===t){return{columnName:"actor",direction:a}}if("email"===t||"pages"===t){return{columnName:t,direction:a}}})).filter(Rt().O9)),query:i.query,cursor:s,limit:et().q},headers:(0,ea().WS)({spaceId:t})});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Rt().HB)(e)}o((t=>({...t,rows:e.data.guests.map((e=>({id:e.userId,pagesCount:e.guestPageCount,isClickable:!0,type:Xt().T.SingleWorkspaceGuest}))),loading:!1,error:void 0,hasNextPage:e.data.hasNextPage,hasPreviousPage:void 0!==m(),nextCursor:e.data.nextCursor})))}catch(l){const e=(0,As().A)(l);o((t=>({...t,loading:!1,error:e})))}var r}),[n,a,t,i.filters,i.query,i.sorts]),h=(0,s.useCallback)((async()=>{if(i.hasNextPage)return l((e=>e+1)),p({cursor:i.nextCursor})}),[p,i.nextCursor,i.hasNextPage]),f=(0,s.useCallback)((async()=>{const e=m();if(void 0!==e)return l((e=>Math.max(1,e-1))),p({cursor:{offset:e}})}),[p]),x=(0,s.useCallback)((async()=>{await p({cursor:d.current})}),[p]);return(0,s.useEffect)((()=>{p({cursor:void 0})}),[a,p]),{rows:i.rows,filters:i.filters,setFilters:c,query:i.query,setQuery:g,sorts:i.sorts,setSorts:u,hasNextPage:i.hasNextPage,hasPreviousPage:i.hasPreviousPage,loadNextPage:h,loadPreviousPage:f,reloadPage:x,currentPage:r,loading:i.loading}}({organizationId:t,spaceId:a.id}),{memberEmailDomainsForSpace:D}=(0,s.useContext)(N().D),z=(null==D?void 0:D[a.id])??[],{selectedRows:P,handleToggleRow:R,handleSelectAllRows:B,handleUnselectAllRows:L}=Ut({allPossibleRows:d}),[E,O]=(0,s.useState)(),U=(0,s.useCallback)((async()=>{await k(),L()}),[k,L]),F=(0,b().v3)(),V=(0,S().K8)((()=>P.map((e=>new(_().LU)(F,{table:w().oo,id:e.id}).getModel())).filter(Rt().O9).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[F,P]),[H,W]=(0,s.useState)(),[q,G]=(0,s.useState)(!1);return(0,i.jsxs)(ee,{children:[(0,i.jsx)(Va()._,{title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.guests.title",defaultMessage:"Guests"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.workspace.guests.byline",defaultMessage:"Manage guests for page-specific access or upgrade them to members for broader permissions across the workspace."})}),(0,i.jsx)("div",{style:r.multiSelect,children:(0,i.jsxs)(Oa,{isOpen:P.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(v().sA,{id:"organization.general.workspaceMembersTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:P.length}}),onClick:L}),(0,i.jsx)(Ua,{icon:Pt().x,title:(0,i.jsx)(v().sA,{id:"organization.general.workspaceGuestsTable.multiselect.convertToMember",defaultMessage:"Upgrade to member"}),onClick:()=>O(on.ConvertToMember)}),(0,i.jsx)(Ua,{icon:js,iconSize:20,title:(0,i.jsx)(v().sA,{id:"organization.general.workspaceGuestsTable.multiselect.remove",defaultMessage:"Remove from workspace"}),onClick:()=>O(on.RemoveFromWorkspace)})]})}),(0,i.jsxs)("div",{style:r.actionContainer,children:[(0,i.jsxs)("div",{style:r.filters,children:[(0,i.jsx)(Wa().e,{sortProperties:nn,isMenuOpen:q,setIsMenuOpen:G,onApply:e=>{G(!1),I(e),W(void 0)},currentSorts:H??C??[]}),(0,i.jsx)($s,{pillTitle:(0,i.jsx)(v().sA,{id:"organization.workspaceGuestsTable.emailFilter.title",defaultMessage:"Email"}),emailDomains:z,selectedEmailDomains:c.emailDomains||[],setSelectedEmailDomains:e=>{u({...c,emailDomains:e})}})]}),(0,i.jsxs)("div",{style:r.search,children:[(0,i.jsx)(Ha().x,{appliedSorts:C,openSortPillMenu:e=>{e&&W([{propertyId:e,direction:"ascending"}]),G(!0)},sortProperties:nn}),(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:g,setQueryFilter:p})]})]}),(0,i.jsx)(Bt().WE,{hideHeaderRowPadding:!0,rows:T?(0,Xt().n)():d,columnRenderInfo:n,styles:o,onRowClick:e=>{e.type!==Xt().T.Loading&&R(e)},renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:m().F,title:(0,i.jsx)(v().sA,{id:"workspaceGuestsTable.empty",defaultMessage:"No guests found"}),byline:(0,i.jsx)(v().sA,{id:"workspaceGuestsTable.empty.byline",defaultMessage:"There are no guests that match this query."})}),showRowBorders:!0,multiselect:{header:{isDisabled:T,isSelected:d.length>0&&P.length===d.length,onClick:()=>{P.length===d.length?L():B()}},row:{getDisabledState:()=>T,getSelectedState:e=>P.some((t=>t.id===e.id)),onClick:e=>{e.type!==Xt().T.Loading&&R(e)}}},loadMoreMethod:{type:"pages",onLoadNext:async()=>{await x(),L()},onLoadPrevious:async()=>{await y(),L()},hasNextPage:h,hasPrevPage:f,currentPage:A}}),l&&E===on.ConvertToMember?(0,i.jsx)(Ls,{inviteTargets:V,organizationStore:l,onDismiss:()=>O(void 0),refreshPage:U,spaceStore:a}):null,l&&E===on.RemoveFromWorkspace&&(0,i.jsx)(Ws,{inviteTargets:V,organizationStore:l,onDismiss:()=>O(void 0),refreshPage:U,spaceStore:a})]})}const ln={viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242M7.676 6.441c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M10 11.63c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h7.88v-1.25H5.85c-.342 0-.634-.148-.79-.33-.138-.162-.172-.336-.067-.54.761-1.488 2.672-2.626 5.007-2.626a6.7 6.7 0 0 1 2.255.381 4 4 0 0 1 .036-1.301 8 8 0 0 0-2.291-.33m7.396 4.866v-1.34a2.719 2.719 0 1 0-2.417 0v3.454l1.209 1.058 1.208-1.058-.906-1.057zm-1.907-4.38a.698.698 0 1 1 1.396 0 .698.698 0 0 1-1.396 0"})},dn=(0,n().wt)("personKey",ln);let cn=function(e){return e.WorkspaceMember="workspace-member",e.Loading="loading",e}({});const un={rows:[],filters:{},query:void 0,sorts:void 0,loading:!1,error:void 0,currentPage:1,hasNextPage:!0,hasPreviousPage:!1};var gn=()=>a(922189);const mn=[{id:"workspace-owner",title:"Workspace owner",value:"editor",caption:"Workspace owners can manage rights of their members.",icon:m().F},{id:"memberbership-admin",title:"Membership admin",value:"membership_admin",caption:"Can manage workspace and group membership.",icon:gn().u},{id:"member",title:"Member",value:"read_and_write",caption:"Cannot change workspace settings or invite new members to the workspace.",icon:h}];function pn(e){const{organizationStore:t,onDismiss:a,refreshPage:n,spaceId:o}=e,r=(0,S().K8)((()=>new Pa),[]),[l,d]=(0,s.useState)(o?[o]:[]),c=(0,S().K8)((()=>{var e;const t=r.state.inviteRole;return(null===(e=mn.find((e=>e.value===t)))||void 0===e?void 0:e.id)??mn[0].id}),[r]),u=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:24,width:540,overflowY:"auto",paddingBottom:24}})),[]),{inviteRole:g,inviteTargets:m}=(0,S().K8)((()=>({inviteRole:r.state.inviteRole,inviteTargets:r.state.inviteTargets})),[r]),{spaceStores:p,loading:h,onSubmit:f}=_s({inviteRole:g,inviteTargets:m,organizationStore:t}),x=(0,S().K8)((()=>{const e=l.length>0,t=r.state.inviteTargets.length>0;return!h&&e&&t}),[l,r,h]);function y(e){d((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function b(){d((e=>e.length!==p.length?p.map((e=>e.id)):[]))}function w(e){var t;const a=null===(t=mn.find((t=>t.id===e)))||void 0===t?void 0:t.value;a&&r.setState({...r.state,inviteRole:a})}async function A(){x&&(await f(l),await n(),a())}return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:a,areaConstraint:{height:{type:"min",length:400}},render:e=>{let{sizeRange:s}=e;return(0,i.jsx)(F().tf,{showDismissButton:!1,sizeRange:s,header:(0,i.jsx)(K().rQ,{icon:(0,Pt().x)(u.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.title",defaultMessage:"Add members to workspaces"}),byline:o?(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.byline.space",defaultMessage:"Add the following users to this workspace."}):(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.byline",defaultMessage:"Select members, workspaces, and roles to grant the appropriate access to workspace content, membership management and security controls."})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.button.add",defaultMessage:"Add members"}),primaryAction:A,primaryDisabled:!x,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsxs)("div",{style:u.content,children:[(0,i.jsx)(Ca().A,{disableAutoFocus:!0,showCurrentUser:!0,parentStore:t,permissionsInviteStore:r,performSearchRequest:Ta}),(0,i.jsx)(K().hr,{selectedId:c,onChange:w,options:mn}),!o&&(0,i.jsx)(Ns().O,{spaceStores:p,selectedSpaceIds:l,onSelect:y,onSelectHeader:b})]})})}})}function hn(e){const{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o,spaceStore:r,membersSpaceIds:l}=e,[d,c]=(0,s.useState)(!1),[u,g]=(0,s.useState)(r?[r.id]:[]),m=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:540}})),[]),{inviteTargets:p}=(0,S().K8)((()=>({inviteTargets:t.state.inviteTargets})),[t]),{spaceStores:h,onSubmit:f}=Os({inviteTargets:p,organizationStore:a}),x=h.filter((e=>!l||l.has(e.id)));function y(e){g((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function b(){g((e=>e.length!==x.length?x.map((e=>e.id)):[]))}async function w(){0!==u.length&&(c(!0),await f(u),await o(),n(),c(!1))}return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(F().tf,{showDismissButton:!1,header:(0,i.jsx)(K().rQ,{icon:js(m.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.title",defaultMessage:"Remove members from workspace"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.byline",defaultMessage:"Choose workspaces to remove <bold>{count} {count, plural, one {user} other {users}}</bold> from, revoking access to all content.",values:{count:p.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.button.remove",defaultMessage:"Remove {count, plural, one {user} other {users}}",values:{count:p.length}}),primaryAction:w,primaryDisabled:d||0===u.length,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:m.content,children:r?(0,i.jsx)(Ps,{userIds:p.map((e=>e.value.id)).filter(Rt().O9)}):(0,i.jsx)(Ns().O,{spaceStores:x,selectedSpaceIds:u,onSelect:y,onSelectHeader:b})})})})}function fn(e){let{setUserRoles:t,selectedUserRoles:a,roles:s}=e;return(0,i.jsx)(Qs().VX,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.filters.userRole.title",defaultMessage:"Role"}),pillIcon:gn().u,selectedItems:a,setSelectedItems:t,items:s})}const xn=[{key:"owner",value:"owner",title:(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.owner",defaultMessage:"Workspace owner"})},{key:"membership_admin",value:"membership_admin",title:(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.membershipAdmin",defaultMessage:"Membership admin"})},{key:"member",value:"member",title:(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.member",defaultMessage:"Member"})}],vn=[{key:"organizationOwner",value:"organization_owner",title:(0,i.jsx)(v().sA,{id:"organizationMembers.table.filters.userRole.organizationOwner",defaultMessage:"Organization owner"}),wrapCaption:!0},...xn];var yn=()=>a(416845);function bn(e){let{organizationId:t,userIds:a}=e;const n=(0,b().v3)(),i=(0,v().tz)(),{updateCacheWithRecordMap:o}=(0,s.useContext)(P().N);return(0,s.useCallback)((async(e,s)=>{const r=await M().callApi({eventName:"updateUserRoleInOrganizationSpace",environment:n,data:{organizationId:t,userIds:a,newRole:s,spaceId:e}});"success"===r.type?(ot().D6({label:i.formatMessage(Sn.changeRolesSuccess)}),o({data:r.data})):C().f1((0,I().Hu)(T().A.getIntl(),r))}),[n,i,t,o,a])}const Sn=(0,v().YK)({removeUserSuccess:{id:"settingsConsole.singleUserView.workspacesTab.useUpdateUserRole.removeUser",defaultMessage:"Successfully removed user from space"},addUserSuccess:{id:"settingsConsole.singleUserView.workspacesTab.useUpdateUserRole.addUser",defaultMessage:"Successfully added user to space"},changeRoleSuccess:{id:"settingsConsole.singleUserView.workspacesTab.useUpdateUserRole.changeRole",defaultMessage:"Successfully updated user's role in space"},changeRolesSuccess:{id:"settingsConsole.singleUserView.workspacesTab.useUpdateUserRole.changeRoles",defaultMessage:"Successfully updated users' roles in space"}});function jn(e){const{permissionsInviteStore:t,onDismiss:a,refreshPage:s,spaceStore:n,organizationStore:o}=e,r=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:540}})),[]),{inviteTargets:l}=(0,S().K8)((()=>({inviteTargets:t.state.inviteTargets})),[t]),d=bn({organizationId:o.id,userIds:l.map((e=>e.value.id)).filter(Rt().O9)});async function c(){await d(n.id,"member"),await s(),a()}return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(F().tf,{showDismissButton:!1,header:(0,i.jsx)(K().rQ,{icon:js(r.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersToMemberModal.title",defaultMessage:"Demote {count} {count, plural, one {user} other {users}} to member",values:{count:l.length}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersToMemberModal.byline",defaultMessage:"Downgrade these users to members."})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersToMemberModal.button.demote",defaultMessage:"Demote"}),primaryAction:c,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersToMemberModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:r.content,children:(0,i.jsx)(Ps,{userIds:l.map((e=>e.value.id)).filter(Rt().O9)})})})})}function wn(e){const{permissionsInviteStore:t,onDismiss:a,refreshPage:s,organizationStore:n,spaceStore:o}=e,r=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:540}})),[]),{inviteTargets:l}=(0,S().K8)((()=>({inviteTargets:t.state.inviteTargets})),[t]),d=bn({organizationId:n.id,userIds:l.map((e=>e.value.id)).filter(Rt().O9)});async function c(){await d(o.id,"owner"),await s(),a()}return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(F().tf,{showDismissButton:!1,header:(0,i.jsx)(K().rQ,{icon:dn(r.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.title",defaultMessage:"Promote {count} {count, plural, one {user} other {users}} to workspace owner",values:{count:l.length}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.byline",defaultMessage:"Grant workspace owner access to these users."})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.button.promote",defaultMessage:"Promote"}),primaryAction:c,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:r.content,children:(0,i.jsx)(Ps,{userIds:l.map((e=>e.value.id)).filter(Rt().O9)})})})})}const An=new Array(et().q).fill(0).map(((e,t)=>({id:`loading-${t}`,isClickable:!1,type:cn.Loading}))),Mn=(0,v().YK)({name:{id:"organization.workspace.members.nameColumn.header",defaultMessage:"Name"},email:{id:"organization.workspace.members.emailColumn.header",defaultMessage:"Email"},role:{id:"organization.workspace.members.roleColumn.header",defaultMessage:"Role"}}),Cn={id:"name",headerTitle:(0,i.jsx)(v().sA,{...Mn.name}),renderCell:e=>e.type===cn.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(ua,{userId:e.id}),widthData:{widthPercent:33,minWidth:100},sortable:!1},In={id:"role",headerTitle:(0,i.jsx)(v().sA,{...Mn.role}),renderCell:e=>{if(e.type===cn.Loading)return(0,i.jsx)(Lt().mf,{containerStyles:{width:120}});let t=(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.member",defaultMessage:"Member"});switch(e.role){case"owner":t=(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.owner",defaultMessage:"Workspace owner"});break;case"membership_admin":t=(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.membershipAdmin",defaultMessage:"Membership admin"})}return(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t})},widthData:{widthPercent:25,minWidth:80},sortable:!1},Tn={id:"email",headerTitle:(0,i.jsx)(v().sA,{...Mn.email}),renderCell:e=>e.type===cn.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)(ws().xF,{userId:e.id,styles:{overflow:"hidden"}}),widthData:{widthPercent:33,minWidth:100},sortable:!1};function kn(e){return{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>t.type===cn.Loading?void 0:(0,i.jsx)(Xs,{userId:t.id,isHovered:t.isRowHovered,organizationId:e,usersType:"members"}),widthData:{widthPercent:9,minWidth:36},sortable:!1}}const _n=[{id:Cn.id,name:T().A.formatMessage(Mn.name),type:"title"},{id:In.id,name:T().A.formatMessage(Mn.role),type:"title"},{id:Tn.id,name:T().A.formatMessage(Mn.email),type:"number"}];function Dn(e){let{organizationId:t,spaceStore:a}=e;const n=(0,_a().E)({organizationId:t}),o=(0,s.useMemo)((()=>[Cn,In,Tn,kn(t)]),[t]),r=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:o,theme:e,containerMarginTop:0})),[o]),l=qa(),{rows:d,filters:c,setFilters:u,query:g,setQuery:p,hasNextPage:h,hasPreviousPage:f,loadNextPage:x,loadPreviousPage:y,currentPage:A,sorts:C,setSorts:I,loading:T,reloadPage:k}=function(e){let{spaceId:t,organizationId:a}=e;const n=(0,b().v3)(),{updateCacheWithRecordMap:i}=(0,s.useContext)(P().N),[o,r]=(0,s.useState)(un),l=(0,s.useCallback)((e=>{r((t=>({...t,filters:e,currentPage:un.currentPage})))}),[]),d=(0,s.useCallback)((e=>{r((t=>({...t,sorts:e,currentPage:un.currentPage})))}),[]),c=(0,s.useCallback)((e=>{r((t=>({...t,query:e,currentPage:un.currentPage})))}),[]),u=(0,s.useCallback)((async e=>{let{cursor:s}=e;try{r((e=>({...e,loading:!0})));const e=await M().callApi({eventName:"getMembersInOrganizationSpace",environment:n,data:{organizationId:a,spaceId:t,filters:o.filters,sorts:(l=o.sorts,null==l?void 0:l.map((e=>{let{propertyId:t,direction:a}=e;return"name"===t?{columnName:"actor",direction:a}:"role"===t?{columnName:"role",direction:a}:void 0})).filter(Rt().O9)),query:o.query,cursor:s,limit:et().q},headers:(0,ea().WS)({spaceId:t})});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Rt().HB)(e)}i({data:e.data}),r((t=>{let a=t.currentPage;return e.data.hasPreviousPage?null!=s&&s.previousCursorId?a-=1:null!=s&&s.nextCursorId&&(a+=1):a=un.currentPage,{...t,rows:e.data.members.filter((e=>"none"!==e.spaceRole&&"page_guest"!==e.spaceRole)).map((e=>({id:e.userId,role:e.spaceRole,isClickable:!0,type:cn.WorkspaceMember}))),loading:!1,error:void 0,hasNextPage:e.data.hasNextPage,hasPreviousPage:e.data.hasPreviousPage,currentPage:a}}))}catch(d){const e=(0,As().A)(d);r((t=>({...t,loading:!1,error:e})))}var l}),[n,a,t,i,o.filters,o.query,o.sorts]),g=(0,s.useCallback)((async e=>{await u({cursor:{nextCursorId:e}})}),[u]),m=(0,s.useCallback)((async e=>{await u({cursor:{previousCursorId:e}})}),[u]),p=(0,s.useCallback)((async e=>{await u({cursor:{currentCursorId:e}})}),[u]);return(0,s.useEffect)((()=>{u({cursor:void 0})}),[a,u]),{rows:o.rows,filters:o.filters,setFilters:l,query:o.query,setQuery:c,sorts:o.sorts,setSorts:d,hasNextPage:o.hasNextPage,hasPreviousPage:o.hasPreviousPage,loadNextPage:g,loadPreviousPage:m,reloadPage:p,currentPage:o.currentPage,loading:o.loading}}({organizationId:t,spaceId:a.id}),{memberEmailDomainsForSpace:D}=(0,s.useContext)(N().D),z=(null==D?void 0:D[a.id])??[],{selectedRows:R,handleToggleRow:B,handleSelectAllRows:L,handleUnselectAllRows:E}=Ut({allPossibleRows:d}),[O,U]=(0,s.useState)({isOpen:!1}),[F,V]=(0,s.useState)(),[W,q]=(0,s.useState)(!1),G=(0,s.useCallback)((async()=>{var e;await k(null===(e=d[0])||void 0===e?void 0:e.id),E()}),[d,k,E]),K=(0,S().K8)((()=>new Pa),[]),Y=(0,b().v3)(),Q=(0,S().K8)((()=>R.map((e=>new(_().LU)(Y,{table:w().oo,id:e.id}).getModel())).filter(Rt().O9).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[Y,R]);return(0,s.useEffect)((()=>{K.setState({...K.state,inviteTargets:Q,isInviteTargetsEmpty:!1})}),[K,Q]),(0,i.jsxs)(ee,{children:[(0,i.jsx)(Va()._,{title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.members.title",defaultMessage:"Members"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.workspace.members.byline",defaultMessage:"Add, remove, or change member roles to manage access and collaboration in your workspace."})}),(0,i.jsx)("div",{style:l.multiSelect,children:(0,i.jsxs)(Oa,{isOpen:R.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(v().sA,{id:"organization.general.workspaceMembersTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:R.length}}),onClick:E}),(0,i.jsx)(Ua,{disabled:R.some((e=>"owner"===e.role)),disabledTooltipText:(0,i.jsx)(v().sA,{id:"organization.general.workspaceMembersTable.multiselect.promote.disabledTooltip",defaultMessage:"Cannot promote users that are already owners"}),icon:dn,iconSize:20,title:(0,i.jsx)(v().sA,{id:"organization.general.workspaceMembersTable.multiselect.promote",defaultMessage:"Promote to workspace owner"}),onClick:()=>U({isOpen:!0,modalType:"promoteToWorkspaceOwner",userIds:R.map((e=>e.id))})}),(0,i.jsx)(Ua,{disabled:R.some((e=>"member"===e.role)),disabledTooltipText:(0,i.jsx)(v().sA,{id:"organization.general.workspaceMembersTable.multiselect.demote.disabledTooltip",defaultMessage:"Cannot demote users that are already members"}),icon:js,iconSize:20,title:(0,i.jsx)(v().sA,{id:"organization.general.workspaceMembersTable.multiselect.demote",defaultMessage:"Demote to member"}),onClick:()=>U({isOpen:!0,modalType:"demoteToMember",userIds:R.map((e=>e.id))})}),(0,i.jsx)(Ua,{icon:js,iconSize:20,title:(0,i.jsx)(v().sA,{id:"organization.general.workspaceMembersTable.multiselect.remove",defaultMessage:"Remove from workspace"}),onClick:()=>U({isOpen:!0,modalType:"removeFromWorkspace",userIds:R.map((e=>e.id))})})]})}),(0,i.jsxs)("div",{style:l.actionContainer,children:[(0,i.jsxs)("div",{style:l.filters,children:[(0,i.jsx)(Wa().e,{sortProperties:_n,isMenuOpen:W,setIsMenuOpen:q,onApply:e=>{q(!1),I(e),V(void 0)},currentSorts:F??C??[]}),(0,i.jsx)(fn,{setUserRoles:e=>u({...c,roles:e}),selectedUserRoles:c.roles||[],roles:xn}),(0,i.jsx)($s,{pillTitle:(0,i.jsx)(v().sA,{id:"organization.workspaceMembersTable.emailFilter.title",defaultMessage:"Email"}),emailDomains:z,selectedEmailDomains:c.emailDomains||[],setSelectedEmailDomains:e=>{u({...c,emailDomains:e})}})]}),(0,i.jsxs)("div",{style:l.search,children:[(0,i.jsx)(Ha().x,{appliedSorts:C,openSortPillMenu:e=>{e&&V([{propertyId:e,direction:"ascending"}]),q(!0)},sortProperties:_n}),(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:g,setQueryFilter:p})]}),(0,i.jsx)(H().A,{onClick:()=>U({isOpen:!0,modalType:"addMembers"}),children:(0,i.jsx)(v().sA,{defaultMessage:"Add members",id:"organization.workspaceMembersTable.addMemberButton"})})]}),(0,i.jsx)(Bt().WE,{hideHeaderRowPadding:!0,rows:T?An:d,columnRenderInfo:o,styles:r,onRowClick:e=>{e.type!==cn.Loading&&B(e)},renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:m().F,title:(0,i.jsx)(v().sA,{id:"workspaceMembersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(v().sA,{id:"workspaceMembersTable.empty.byline",defaultMessage:"There are no members that match this query."})}),showRowBorders:!0,multiselect:{header:{isDisabled:T,isSelected:d.length>0&&R.length===d.length,onClick:()=>{R.length===d.length?E():L()}},row:{getDisabledState:()=>T,getSelectedState:e=>R.some((t=>t.id===e.id)),onClick:e=>{e.type!==cn.Loading&&B(e)}}},loadMoreMethod:{type:"pages",onLoadNext:async()=>{await x(d[d.length-1].id),E()},onLoadPrevious:async()=>{await y(d[0].id),E()},hasNextPage:h,hasPrevPage:f,currentPage:A}}),n&&O.isOpen&&"addMembers"===O.modalType&&(0,i.jsx)(pn,{organizationStore:n,onDismiss:()=>U({isOpen:!1}),refreshPage:G,spaceId:a.id}),n&&O.isOpen&&"promoteToWorkspaceOwner"===O.modalType&&(0,i.jsx)(wn,{permissionsInviteStore:K,onDismiss:()=>U({isOpen:!1}),refreshPage:G,organizationStore:n,spaceStore:a}),n&&O.isOpen&&"demoteToMember"===O.modalType&&(0,i.jsx)(jn,{permissionsInviteStore:K,organizationStore:n,onDismiss:()=>U({isOpen:!1}),refreshPage:G,spaceStore:a}),n&&O.isOpen&&"removeFromWorkspace"===O.modalType&&(0,i.jsx)(hn,{permissionsInviteStore:K,organizationStore:n,onDismiss:()=>U({isOpen:!1}),refreshPage:G,spaceStore:a})]})}var zn=()=>a(333046),Pn=()=>a(317131);function Nn(e){switch(e){case"editor":return"owner";case"membership_admin":return"membership_admin";default:return"member"}}function Rn(e){switch(e.role){case"owner":return 1;case"membership_admin":return 2;default:return 3}}function Bn(e){if(!e.accessLevel)return 4;switch(e.accessLevel){case"open":return 1;case"closed":return 2;case"private":return 3;default:(0,Rt().HB)(e.accessLevel)}}var Ln=()=>a(480795);const En=et().q,On=[{propertyId:"name",direction:"ascending"}];function Un(e){const t=(0,s.useMemo)((()=>[e]),[e]),{teamStores:a,loading:n}=(0,R().o)(t),{teamAggregateDataForSpace:i,loading:o}=(0,Ln().N)(t),r=n||o,[l,d]=(0,s.useState)(),[c,u]=(0,s.useState)(""),[g,m]=(0,s.useState)(0),p=i[e],h=(0,S().K8)((()=>(a[e]??[]).map((t=>{const a=null==p?void 0:p[t.id];return{id:t.id,spaceId:e,teamStore:t,teamName:t.getName()??"",teamIcon:t.getIcon(),ownerIds:t.getAllOwnerIds(),memberCount:(null==a?void 0:a.memberCountWithGuests)??0,accessLevel:t.getTeamAccessLevel(),isDefault:t.isDefault(),isClickable:!1,type:Xt().T.SingleWorkspaceTeam}}))),[p,a,e]),f=(0,s.useMemo)((()=>{const e=null!=l&&l.length?l:On;return function(e){let{rows:t,appliedSorts:a}=e;const s=a.map((e=>{let{propertyId:t}=e;return t===vi.id?"memberCount":t===xi.id?Bn:e=>e.teamName.toLowerCase()})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Rt().HB)(t)}));return Ze().My(t,s,n)}({rows:h,appliedSorts:e})}),[h,l]),x=(0,s.useMemo)((()=>c?(0,mt().Ay)(c,f,(e=>e.teamName)):f),[c,f]),v=(0,s.useMemo)((()=>{const e=g*En,t=e+En;return x.slice(e,t)}),[x,g]);(0,s.useEffect)((()=>{m(0)}),[c]);const y=(0,s.useMemo)((()=>(g+1)*En<x.length),[x,g]),b=g>0;return{rows:v,loadNextPage:(0,s.useCallback)((()=>{y&&m((e=>e+1))}),[y]),loadPrevPage:(0,s.useCallback)((()=>{b&&m((e=>e-1))}),[b]),hasNextPage:y,hasPrevPage:b,currentPageIndex:g,appliedSorts:l,setAppliedSorts:d,query:c,setQuery:u,loading:r}}var Fn=()=>a(300089),Vn=()=>a(806754),Hn=()=>a(486019),Wn=()=>a(888867),qn=()=>a(456663),Gn=()=>a(83842);function Kn(e){let{organizationId:t,spaceStore:a,owner:n,onDismiss:o,onSubmit:r}=e;const l=(0,b().v3)(),d=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{width:540},ownerInput:{width:"100%"}})),[]);function c(){qn().A.reset(),o()}const u=(0,v().tz)(),[g,m]=(0,s.useState)(!1),[p,h]=(0,s.useState)([]),f=(0,S().K8)((()=>""===qn().A.state.name||!(n||p.length)||g),[g,n,p]),x=(0,s.useCallback)((()=>{w(!0)}),[]),[y,w]=(0,s.useState)(!1);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:c,render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:(0,Wn().s)(d.icon),title:(0,i.jsx)(v().sA,{id:"organization.team.settings.createTeam.modal.title",defaultMessage:"Create a new teamspace"}),byline:(0,i.jsx)(v().sA,{id:"organization.team.settings.createTeam.modal.byline",defaultMessage:"Create a teamspace to organize your teams pages, permissions, and members. Customize the name, icon, and default permission to get started."})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organization.team.settings.createTeam.modal.primaryAction",defaultMessage:"Create teamspace"}),primaryAction:async()=>{m(!0),await async function(){if(!n&&!p.length)return;const{name:e,icon:s,description:i,accessLevel:o}=qn().A.state,d=n?[n]:p.map((e=>"user"===e.type?{entity_type:e.type,user_id:e.userId,type:"owner"}:"group"===e.type?{entity_type:e.type,group_id:e.groupId,type:"owner"}:void(0,Rt().HB)(e)));await M().callApi({eventName:"createTeamInOrganizationSpace",environment:l,data:{organizationId:t,spaceId:a.id,name:e,icon:s,description:i,accessLevel:o,members:d}}),c(),r&&r()}(),m(!1)},primaryDisabled:f,secondaryText:(0,i.jsx)(v().sA,{id:"organization.team.settings.createTeam.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:c}),children:(0,i.jsxs)("div",{style:d.content,children:[(0,i.jsx)(Gn().TeamIconAndNameRow,{parentSpaceStore:a}),(0,i.jsx)(Gn().TeamDescriptionRow,{}),(0,i.jsx)(Gn().AccessLevelSection,{parentSpaceStore:a}),!n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G().A,{hasMarginTop:!0,children:(0,i.jsx)(v().sA,{id:"organization.team.settings.createTeam.modal.ownersLabel",defaultMessage:"Teamspace owners"})}),(0,i.jsx)(as,{spaceStore:a,isOpen:y,onDismiss:()=>w(!1),onClick:x,includeGroups:!0,selectedValues:p,setSelectedValues:h,inputPlaceholder:u.formatMessage(Yn.ownersPlaceholder)})]})]})})})}const Yn=(0,v().YK)({ownersPlaceholder:{id:"spaceMembersInput.owners.placeholder",defaultMessage:"No owners yet"}});var Qn=()=>a(142448);function $n(e){let{setAccessLevels:t,selectedAccessLevels:a}=e;return(0,i.jsx)(Qs().VX,{pillTitle:(0,i.jsx)(v().sA,{id:"organization.filters.teamAccessLevel.title",defaultMessage:"Access"}),pillIcon:g().h,selectedItems:a,setSelectedItems:t,items:Xn})}const Xn=[{key:"open",value:"open",title:(0,i.jsx)(v().sA,{id:"organization.table.filters.access.open",defaultMessage:"Open"})},{key:"closed",value:"closed",title:(0,i.jsx)(v().sA,{id:"organization.table.filters.access.closed",defaultMessage:"Closed"})},{key:"private",value:"private",title:(0,i.jsx)(v().sA,{id:"organization.table.filters.access.private",defaultMessage:"Private"})}];var Zn=()=>a(898808);function Jn(e){let{organizationId:t,onDismiss:a,groupStore:n,teamStores:o}=e;const r=(0,b().v3)(),l=(0,v().tz)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(P().N),{loadTeamsForSpace:c}=(0,s.useContext)(N().D),[u,g]=(0,s.useState)(!1),m=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:440}})),[]);async function p(){g(!0);const e=n.getSpaceId(),s=n.getGroupId(),i=o.map((e=>e.id));if(!e||!s)return void g(!1);const u=await M().callApi({eventName:"updateGroupsInOrganizationSpace",environment:r,data:{organizationId:t,spaceId:e,groupIds:[s],removeTeams:i}});"success"===u.type?(d({data:u.data}),await c(e,!0),a(),g(!1),(0,pe().u4)({environment:r,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:e,update_type:"remove_from_team"}}})):C().f1((0,I().Hu)(l,u))}return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(F().tf,{showDismissButton:!1,header:(0,i.jsx)(K().rQ,{icon:js(m.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.title",defaultMessage:"Remove group from {count} {count, plural, one {teamspace} other {teamspaces}}",values:{count:o.length}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.byline",defaultMessage:"Remove this group from the following teamspaces."})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.button.remove",defaultMessage:"Remove from {count, plural, one {teamspace} other {teamspaces}}",values:{count:o.length}}),primaryAction:p,primaryDisabled:u,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:m.content,children:(0,i.jsx)(ei,{teamStores:o})})})})}function ei(e){const{teamStores:t}=e,[a,n]=(0,s.useState)(""),o=(0,S().K8)((()=>t.map((e=>({id:e.id,icon:(0,i.jsx)(Zn().x,{disabled:!0,store:e,size:24}),name:e.getName(),byline:(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.pagesList.item.memberCount",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:e.getRawMembership().length}})})})))),[t]),r=(0,mt().Ay)(a,o,(e=>e.name??""));return(0,i.jsx)(K().p6,{items:r,titleText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.pagesList.title",defaultMessage:"Selected teamspaces"}),headerText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.pagesList.header",defaultMessage:"Teamspaces"}),headerAction:(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:a,setQueryFilter:n})})}const ti=(0,v().YK)({name:{id:"organization.group.teamspaces.nameColumn.header",defaultMessage:"Name"},owners:{id:"organization.group.teamspaces.ownersColumn.header",defaultMessage:"Owners"},access:{id:"organization.group.teamspaces.accessColumn.header",defaultMessage:"Access"}}),ai={id:"name",headerTitle:(0,i.jsx)(v().sA,{...ti.name}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(a(112772).o,{useThinTitle:!0,showMemberCount:!0,iconSize:28,teamStore:e.teamStore,memberCountOverride:e.memberCount}),widthData:{widthPercent:33,minWidth:100},sortable:!1},si={id:"owners",headerTitle:(0,i.jsx)(v().sA,{...ti.owners}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)(di,{ownerIds:e.ownerIds,spaceId:e.spaceId}),widthData:{widthPercent:33,minWidth:100},sortable:!1},ni={id:"access",headerTitle:(0,i.jsx)(v().sA,{...ti.access}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:120}}):function(e){let t=(0,i.jsx)(v().sA,{id:"organization.workspace.teamspaces.accessColumn.unknown",defaultMessage:"Unknown"});switch(e){case"open":t=(0,i.jsx)(v().sA,{id:"organization.workspace.teamspaces.accessColumn.open",defaultMessage:"Open"});break;case"closed":t=(0,i.jsx)(v().sA,{id:"organization.workspace.teamspaces.accessColumn.closed",defaultMessage:"Closed"});break;case"private":t=(0,i.jsx)(v().sA,{id:"organization.workspace.teamspaces.accessColumn.private",defaultMessage:"Private"})}return(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t})}(e.accessLevel),widthData:{widthPercent:33,minWidth:100},sortable:!1},ii=[{id:ai.id,name:T().A.formatMessage(ti.name),type:"title"},{id:ni.id,name:T().A.formatMessage(ti.access),type:"title"}],oi=[ai,si,ni];var ri=function(e){return e.CreateNewTeamspace="create-new-teamspace",e.RemoveGroupFromTeam="remove-from-group",e}(ri||{});function li(e){let{organizationId:t,groupStore:a,teamsState:n}=e;const{loadTeamsForSpace:o}=(0,s.useContext)(N().D),r=(0,Hn().F)(),l=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:oi,theme:e,containerMarginTop:0})),[]),d=(0,S().K8)((()=>{const e=a.getGroupId();return e?{type:"owner",entity_type:"group",group_id:e}:void 0}),[a]),c=(0,S().K8)((()=>a.getSpaceStore()),[a]),u=(0,s.useMemo)((()=>{const e=a.getSpaceId();return e?[e]:[]}),[a]),{teamAggregateDataForSpace:g}=(0,Ln().N)(u),p=(0,S().K8)((()=>null==g?void 0:g[a.getSpaceId()]),[g,a]),h=(0,S().K8)((()=>n.teamStores.map((e=>{var t;return{type:Xt().T.OrganizationGroupMember,id:e.id,name:e.getName(),spaceId:e.getSpaceId(),teamId:e.id,teamStore:e,ownerIds:e.getAllOwnerIds(),accessLevel:e.getTeamAccessLevel(),memberCount:null==p||null===(t=p[e.id])||void 0===t?void 0:t.memberCountWithGuests,isClickable:!0}}))),[n,p]),[f,x]=(0,s.useState)(),[y,b]=(0,s.useState)({}),[w,A]=(0,s.useState)(),[M,C]=(0,s.useState)(!1),[I,T]=(0,s.useState)(),k=I??w??[],_=(0,s.useMemo)((()=>{if(!h)return[];let e=h;return y.query&&(e=(0,mt().Ay)(y.query,e,(e=>e.name||""))),y.accessLevels&&y.accessLevels.length>0&&(e=e.filter((e=>{var t;const a=e.accessLevel;return!!a&&(null===(t=y.accessLevels)||void 0===t?void 0:t.includes(a))}))),function(e){const{rows:t,appliedSorts:a}=e,s=null!=a&&a.length?a:[{propertyId:ni.id,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===ni.id?Bn:t===ai.id?"name":Bn})),i=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Rt().HB)(t)}));return(0,Ze().My)(t,n,i)}({rows:e,appliedSorts:w})}),[h,y.accessLevels,y.query,w]),D=Math.max(1,Math.floor(_.length/et().q)),[z,P]=(0,s.useState)(0),R=_.slice(z*et().q,(z+1)*et().q),B=et().q*(z+1)<_.length,L=z>0;const{selectedRows:E,handleToggleRow:O,handleSelectAllRows:U,handleUnselectAllRows:F}=Ut({allPossibleRows:R});return(0,i.jsxs)(ee,{children:[(0,i.jsx)(Va()._,{title:(0,i.jsx)(v().sA,{id:"organization.groups.modal.teamspaces.title",defaultMessage:"Teamspaces"}),byline:(0,i.jsx)(v().sA,{id:"organization.groups.modal.teamspaces.byline",defaultMessage:"Add and remove teamspaces from this group to manage access across this workspace."})}),(0,i.jsxs)("div",{style:r.tableHeader,children:[(0,i.jsxs)("div",{style:r.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:E.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(v().sA,{id:"organization.group.teamspacesTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:E.length}}),onClick:F}),(0,i.jsx)(Ua,{icon:js,title:(0,i.jsx)(v().sA,{id:"organization.group.teamspacesTable.multiselect.remove",defaultMessage:"Remove group from teamspace"}),onClick:()=>x(ri.RemoveGroupFromTeam)})]}),(0,i.jsx)(Vn().A,{children:(0,i.jsx)(Wa().e,{sortProperties:ii,isMenuOpen:M,setIsMenuOpen:C,onApply:e=>{C(!1),A(e),T(void 0)},currentSorts:k})}),k.length>0?(0,i.jsx)(Fn().he,{}):null,(0,i.jsx)($n,{setAccessLevels:e=>b((t=>({...t,accessLevels:e}))),selectedAccessLevels:y.accessLevels||[]})]}),(0,i.jsxs)("div",{style:r.rightContent,children:[(0,i.jsx)(Ha().x,{appliedSorts:w,openSortPillMenu:e=>{e&&T([{propertyId:e,direction:"ascending"}]),C(!0)},sortProperties:ii}),(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:y.query,setQueryFilter:e=>{b((t=>({...t,query:e})))}}),(0,i.jsx)(H().A,{onClick:()=>{x(ri.CreateNewTeamspace)},children:(0,i.jsx)(v().sA,{id:"organizationTeamspacesSubTab.button.createTeamspace",defaultMessage:"Create teamspace"})})]})]}),(0,i.jsx)(Bt().WE,{hideHeaderRowPadding:!0,rows:n.loading?(0,Xt().n)():R,columnRenderInfo:oi,styles:l,onRowClick:e=>{e.type!==Xt().T.Loading&&O(e)},renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:m().F,title:(0,i.jsx)(v().sA,{id:"teamsTable.empty",defaultMessage:"No teamspaces found"}),byline:(0,i.jsx)(v().sA,{id:"teamsTable.empty.byline",defaultMessage:"There are no teams that match this query."})}),showRowBorders:!0,multiselect:{header:{isDisabled:n.loading,isSelected:R.length>0&&E.length===R.length,onClick:()=>{E.length===R.length?F():U()}},row:{getDisabledState:()=>n.loading,getSelectedState:e=>E.some((t=>t.id===e.id)),onClick:e=>{e.type!==Xt().T.Loading&&O(e)}}},loadMoreMethod:{type:"pages",onLoadNext:()=>{P((e=>B?e+1:e)),F()},onLoadPrevious:()=>{P((e=>Math.max(e-1,0))),F()},hasNextPage:B,hasPrevPage:L,currentPage:z+1,finalPage:D}}),f===ri.RemoveGroupFromTeam?(0,i.jsx)(Jn,{organizationId:t,onDismiss:()=>{x(void 0),F()},groupStore:a,teamStores:E.map((e=>e.teamStore))}):null,f===ri.CreateNewTeamspace&&c?(0,i.jsx)(Kn,{organizationId:t,spaceStore:c,owner:d,onDismiss:()=>{x(void 0)},onSubmit:()=>{o(c.id,!0)}}):null]})}function di(e){const t=(0,qt().A)(),s=(0,b().v3)(),{ownerIds:n,spaceId:o}=e,r=Object.values(n).flat().length,l=(0,S().K8)((()=>n.ownerUserIds.map((e=>new(_().LU)(s,{table:w().oo,id:e})))),[n.ownerUserIds,s]),d=ja(o).filter((e=>{let{group:t}=e;return n.ownerGroupIds.includes(t.group_id)})),c=l.map((e=>({renderAvatar:()=>(0,i.jsx)(da().A,{userStore:e,size:Qn().tR,avatarShouldShowShadow:!1,iconStyle:{fontSize:12},showAvatarInTooltip:!0,hasTooltip:!0,type:"avatar"},e.id)}))),u=d.map((e=>({renderAvatar:()=>(0,i.jsx)(a(208261).h,{permissionGroup:e,hasTooltip:!0,type:"avatar"})})));return(0,i.jsx)(Qn().Qp,{avatarStyles:t.roundAvatarBorder,avatars:c.concat(u),totalCount:r,isLoading:!1,renderOverflowTooltip:()=>(0,i.jsx)(a(696601).A,{userStores:l,permissionGroups:d})})}function ci(e){let{organizationId:t,spaceId:a,teams:n,onDismiss:o,onSubmit:r}=e;const l=(0,b().v3)(),d=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},content:{width:540}})),[]),[c,u]=(0,s.useState)(!1);async function g(){if(c)return;u(!0);const e=await M().callApi({eventName:"deleteTeamsInOrganization",environment:l,data:{organizationId:t,spaceId:a,teamIds:n.map((e=>e.teamStore.id))}});"success"===e.type?(o(),r&&r()):"failed"===e.type&&C().f1((0,I().Hu)(T().A.getIntl(),e)),u(!1)}return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:(0,Nt().I)(d.icon),title:(0,i.jsx)(v().sA,{id:"organization.team.settings.archiveTeam.modal.title",defaultMessage:"Are you sure you want to archive {teamCount, plural, one {this teamspace} other {these teamspaces}}?",values:{teamCount:n.length}}),byline:(0,i.jsx)(v().sA,{id:"organization.team.settings.archiveTeam.modal.byline",defaultMessage:"This action cannot be undone."})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organization.team.settings.archiveTeam.modal.primaryAction",defaultMessage:"Archive {teamCount, plural, one {teamspace} other {teamspaces}}",values:{teamCount:n.length}}),primaryAction:g,primaryDisabled:c,secondaryText:(0,i.jsx)(v().sA,{id:"organization.team.settings.archiveTeam.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:o,isDarkRed:!0,isLoading:c}),children:(0,i.jsx)("div",{style:d.content,children:(0,i.jsx)(ui,{teams:n})})})})}function ui(e){const{teams:t}=e,[a,n]=(0,s.useState)(""),o=(0,S().K8)((()=>t.map((e=>{let{teamStore:t,memberCount:a}=e;return{id:t.id,icon:(0,i.jsx)(Zn().x,{disabled:!0,store:t,size:24}),name:t.getName(),byline:(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organization.team.settings.archiveTeam.modal.teamsList.item.memberCount",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:a}})})}}))),[t]),r=(0,mt().Ay)(a,o,(e=>e.name??""));return(0,i.jsx)(K().p6,{items:r,titleText:(0,i.jsx)(v().sA,{id:"organization.team.settings.archiveTeam.modal.teamsList.title",defaultMessage:"Selected teamspaces"}),headerText:(0,i.jsx)(v().sA,{id:"organization.team.settings.archiveTeam.modal.teamsList.header",defaultMessage:"Teamspaces ({teamCount})",values:{teamCount:t.length}}),headerAction:(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:a,setQueryFilter:n})})}function gi(e){let{organizationId:t,spaceStore:a,teams:n,onDismiss:o,onSubmit:r}=e;const l=(0,b().v3)(),d=(0,v().tz)(),c=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:24,width:540,overflowY:"auto"}})),[]),[u,g]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[h,f]=(0,s.useState)([]),x=(0,s.useCallback)((()=>{g(!0)}),[]);async function y(){if(m)return;p(!0);const e=await M().callApi({eventName:"updateMembersInTeamsInOrganization",environment:l,data:{organizationId:t,spaceId:a.id,teamIds:n.map((e=>e.teamStore.id)),addMembers:h.map((e=>"user"===e.type?{type:"member",entity_type:"user",user_id:e.userId}:"group"===e.type?{type:"member",entity_type:"group",group_id:e.groupId}:void(0,Rt().HB)(e)))}});"success"===e.type?(o(),r&&r()):"failed"===e.type&&C().f1((0,I().Hu)(T().A.getIntl(),e)),p(!1)}const w=(0,S().K8)((()=>n[0].teamStore.getName()),[n]);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:(0,Pt().x)(c.icon),title:(0,i.jsx)(v().sA,{id:"organization.team.settings.addTeamMembers.title",defaultMessage:"Add members to <gray>{teamCount, plural, one {{teamName}} other {# teamspaces}}</gray>",values:{teamCount:n.length,teamName:w,gray:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.jsx)(D().D,{colorName:"secondary",as:"span",children:t})}}}),byline:(0,i.jsx)(v().sA,{...mi.headerByline})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{...mi.addMembers}),primaryAction:y,primaryDisabled:m,secondaryText:(0,i.jsx)(v().sA,{...mi.cancel}),secondaryAction:o,isLoading:m}),children:(0,i.jsxs)("div",{style:c.content,children:[(0,i.jsx)(as,{spaceStore:a,isOpen:u,onDismiss:()=>g(!1),onClick:x,includeGroups:!0,selectedValues:h,setSelectedValues:f,inputPlaceholder:d.formatMessage(mi.membersPlaceholder)}),n.length>1?(0,i.jsx)(ui,{teams:n}):void 0]})})})}const mi=(0,v().YK)({headerByline:{id:"organization.team.settings.addTeamMembers.byline.space",defaultMessage:"Select the members you wish to add to this teamspace."},addMembers:{id:"organization.team.settings.addTeamMembers.modal.primaryAction",defaultMessage:"Add members"},cancel:{id:"organization.team.settings.addTeamMembers.modal.cancelAction",defaultMessage:"Cancel"},membersPlaceholder:{id:"organization.team.settings.addTeamMembers.members.placeholder",defaultMessage:"Add members or groups"}}),pi=(0,v().YK)({name:{id:"workspaceModalTeamsView.nameColumn.header",defaultMessage:"Name"},members:{id:"workspaceModalTeamsView.membersColumn.header",defaultMessage:"Members"},permissions:{id:"workspaceModalTeamsView.membersColumn.permissions",defaultMessage:"Access"}}),hi={id:"name",headerTitle:(0,i.jsx)(v().sA,{...pi.name}),renderCell:e=>{if(e.type===Xt().T.Loading)return(0,i.jsx)(Lt().mf,{containerStyles:{width:200}});const t=0===e.teamName.length?(0,i.jsx)(v().sA,{id:"workspaceModalTeamsView.untitledGroup",defaultMessage:"Untitled"}):e.teamName;return(0,i.jsx)(Lt().s7,{title:t,icon:(0,i.jsx)(E().A,{disabled:!0,icon:e.teamIcon,title:e.teamName,size:Na().p8,isLarge:!0,isEmptyPage:!1}),iconSize:Na().p8,iconMargin:Lt().Ji,summaryStyles:{width:`calc(100% - ${Na().p8+Lt().Ji+Bt().Gr}px)`}})},widthData:{widthPercent:40,minWidth:100},sortable:!1},fi={id:"owners",headerTitle:(0,i.jsx)(v().sA,{id:"workspaceModalTeamsView.ownersColumn.header",defaultMessage:"Owners"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Pn().p,{}):e.ownerIds.ownerGroupIds.length>0||e.ownerIds.ownerUserIds.length>0?(0,i.jsx)(di,{ownerIds:e.ownerIds,spaceId:e.spaceId}):null,widthData:{widthPercent:20,minWidth:100},sortable:!1},xi={id:"permissions",headerTitle:(0,i.jsx)(v().sA,{...pi.permissions}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Ht().Kb,{}):(0,i.jsx)(D().D,{colorName:"secondary",children:(0,zn().X)(e.accessLevel,e.isDefault)}),widthData:{widthPercent:20,minWidth:100},sortable:!1},vi={id:"members",headerTitle:(0,i.jsx)(v().sA,{...pi.members}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Ht().Kb,{}):(0,i.jsx)(D().D,{colorName:"secondary",children:(0,i.jsx)(v().sA,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"workspaceModalTeamsView.membersColumn.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:20,minWidth:100},sortable:!1},yi=[hi,fi,xi,vi],bi=[{id:hi.id,name:T().A.formatMessage(pi.name),type:"title"},{id:vi.id,name:T().A.formatMessage(pi.members),type:"number"},{id:xi.id,name:T().A.formatMessage(pi.permissions),type:"title"}];var Si=function(e){return e.CreateTeam="create-team",e.ArchiveTeam="archive-team",e.AddMembers="add-members",e}(Si||{});function ji(e){let{spaceStore:t,organizationId:a}=e;const n=(0,j().IS)((()=>({createGroupButton:{marginBottom:8}})),[]),o=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:yi,theme:e,containerMarginTop:0})),[]),r=qa(),l=(0,s.useMemo)((()=>[t.id]),[t.id]),{teamStores:d}=(0,R().o)(l),{rows:c,setAppliedSorts:u,appliedSorts:g,query:p,setQuery:h,loadNextPage:f,loadPrevPage:x,hasNextPage:y,hasPrevPage:b,currentPageIndex:w,loading:A}=Un(t.id),M=A?(0,Xt().n)():c,{loadTeamsForSpace:C}=(0,s.useContext)(N().D),{selectedRows:I,handleToggleRow:T,handleSelectAllRows:k,handleUnselectAllRows:_}=Ut({allPossibleRows:c}),[D,z]=(0,s.useState)(),[P,B]=(0,s.useState)(!1),[L,E]=(0,s.useState)(),O=(0,S().K8)((()=>I.filter((e=>e.teamStore.isDefault())).length===(d[t.id]??[]).filter((e=>e.isDefault())).length),[d,I,t.id]),U=e=>{e.type!==Xt().T.Loading&&T(e)};return(0,i.jsxs)(ee,{children:[(0,i.jsx)(Va()._,{title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.teams.title",defaultMessage:"Teamspaces"}),byline:(0,i.jsx)(v().sA,{id:"workspaceModalTeamsView.byline",defaultMessage:"Manage teamspace membership and permissions"})}),(0,i.jsx)("div",{style:r.multiSelect,children:(0,i.jsxs)(Oa,{isOpen:I.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.teams.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:I.length}}),onClick:_}),(0,i.jsx)(Ua,{icon:Pt().x,iconSize:16,title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.teams.multiselect.inviteMembers",defaultMessage:"Invite members"}),onClick:()=>E(Si.AddMembers)}),(0,i.jsx)(Ua,{icon:Nt().I,iconSize:16,title:(0,i.jsx)(v().sA,{id:"organization.general.workspace.teams.multiselect.archive",defaultMessage:"Archive teamspace"}),onClick:()=>E(Si.ArchiveTeam),isDestructive:!0,disabled:O,disabledTooltipText:(0,i.jsx)(v().sA,{id:"organization.general.workspace.teams.multiselect.archive.disabledTooltip",defaultMessage:"Cannot archive the last default teamspace."})})]})}),(0,i.jsxs)("div",{style:r.actionContainer,children:[(0,i.jsx)("div",{style:r.filters,children:(0,i.jsx)(Wa().e,{sortProperties:bi,isMenuOpen:P,setIsMenuOpen:B,onApply:e=>{B(!1),u(e),z(void 0)},currentSorts:D??g??[]})}),(0,i.jsx)("div",{style:r.search,children:M.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ha().x,{appliedSorts:g,openSortPillMenu:e=>{e&&z([{propertyId:e,direction:"ascending"}]),B(!0)},sortProperties:bi}),(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:p,setQueryFilter:h})]})}),(0,i.jsx)(H().A,{onClick:()=>E(Si.CreateTeam),style:n.createGroupButton,children:(0,i.jsx)(v().sA,{defaultMessage:"Create teamspace",id:"workspaceModalTeamsView.createTeamspaceButton"})})]}),(0,i.jsx)(Bt().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,rows:M,columnRenderInfo:yi,styles:o,renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:m().F,title:(0,i.jsx)(v().sA,{id:"workspaceModalTeamsView.empty",defaultMessage:"No teams found"}),byline:(0,i.jsx)(v().sA,{id:"workspaceModalTeamsView.empty.byline",defaultMessage:"There are no teams that match this query."})}),loadMoreMethod:{type:"pages",onLoadNext:f,onLoadPrevious:x,hasNextPage:y,hasPrevPage:b,currentPage:w+1},onRowClick:U,multiselect:{header:{isDisabled:A,isSelected:M.length>0&&I.length===M.length,onClick:()=>{I.length===M.length?_():k()}},row:{getDisabledState:()=>A,getSelectedState:e=>I.some((t=>t.id===e.id)),onClick:U}}}),L===Si.CreateTeam&&(0,i.jsx)(Kn,{organizationId:a,spaceStore:t,onDismiss:()=>E(void 0),onSubmit:()=>C(t.id,!0)}),L===Si.AddMembers&&(0,i.jsx)(gi,{organizationId:a,spaceStore:t,teams:I,onDismiss:()=>E(void 0),onSubmit:()=>{_(),C(t.id,!0)}}),L===Si.ArchiveTeam&&(0,i.jsx)(ci,{organizationId:a,spaceId:t.id,teams:I,onDismiss:()=>E(void 0),onSubmit:()=>{_(),C(t.id,!0)}})]})}var wi=()=>a(331542),Ai=(a(16280),()=>a(221844)),Mi=()=>a(223116),Ci=()=>a(436604),Ii=()=>a(445120),Ti=()=>a(148832),ki=()=>a(583521);const _i={query:void 0,teamIds:[],userIds:[]};function Di(e){const t=(0,b().v3)(),a=(0,k().X)("legal_holds_enabled");let n,i,o;"legalHoldId"in e?n=e.legalHoldId:"organizationId"in e?i=e.organizationId:"spaceId"in e&&(o=e.spaceId);const[{status:r,value:l},d]=(0,Je().Yb)((async()=>{if(!a)return[];if(n||i||o){const e=await M().callApi({eventName:"getLegalHoldMembers",environment:t,data:{legalHoldId:n,organizationId:i,spaceId:o}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,Rt().HB)(e)}throw new Error("No legal hold ID, organization ID, or space ID provided.")}),[t,n,i,o,a]),c=(0,s.useMemo)((()=>l??[]),[l]),u=(0,s.useMemo)((()=>new Set(c)),[c]);return{loading:"pending"===r,members:c,membersSet:u,refetch:d}}function zi(e){let{spaceStores:t}=e;return(0,S().K8)((()=>t.map((e=>{var t;return{id:e.id,name:e.getName(),subscriptionTier:e.getSubscriptionTier(),icon:null===(t=e.getIcon())||void 0===t?void 0:t.icon}}))),[t])}var Pi=()=>a(12193),Ni=()=>a(223544),Ri=()=>a(994006);const Bi=10;function Li(e){let{pillTitle:t,pillIcon:a,userIds:s,guestUserIds:n,showSearch:o,...r}=e;const l=(0,b().v3)(),d=(0,v().tz)(),c=(0,j().IS)((e=>({guestIcon:{height:16,width:16,color:e.guestIconColor},groupIcon:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"}})),[]),u=(0,S().K8)((()=>{var e;return null===(e=ve().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),g=Boolean(n),m=(0,S().K8)((()=>{const e=s.map((e=>Ei({userId:e,isGuest:!1,showCaption:g,currentUserId:u,environment:l,intl:d,iconStyles:c.guestIcon})));return n&&e.push(...n.map((e=>Ei({userId:e,isGuest:!0,showCaption:g,currentUserId:u,environment:l,intl:d,iconStyles:c.guestIcon})))),r.includeGroups&&r.permissionGroups&&e.push(...r.permissionGroups.map((e=>function(e){let{group:t,iconStyles:a}=e;const s={id:t.getGroupId(),type:"permission_group"},n=t.getSpaceId();return{key:t.getGroupId(),value:s,title:(0,i.jsx)(Ni().FS,{group:t,spaceId:n}),shortTitle:t.getName(),searchTerms:[t.getName()],tokenIcon:(0,i.jsx)(E().A,{disabled:!0,icon:t.icon?{pointer:{id:n,table:na().NX},icon:t.icon}:void 0,size:14,isEmptyPage:!1,title:t.getName(),defaultIcon:(0,Wn().s)(a)})}}({group:e,iconStyles:c.groupIcon})))),e}),[s,n,r.includeGroups,r.permissionGroups,g,u,l,d,c]),p=r.includeGroups?r.selectedUsers:r.selectedUsers.map((e=>({id:e,type:"user"}))),h=r.includeGroups?r.setSelectedUsers:e=>r.setSelectedUsers(e.filter((e=>"user"===e.type)).map((e=>e.id)));return o?(0,i.jsx)(Qs().V$,{pillTitle:t,pillIcon:a,selectedItems:p,setSelectedItems:h,items:m,pageSize:Bi,searchPlaceholder:T().A.formatMessage(r.includeGroups?Ni().uU.usersAndGroupsPlaceholder:Ni().uU.usersPlaceholder)}):(0,i.jsx)(Qs().VX,{pillTitle:t,pillIcon:a,selectedItems:p,setSelectedItems:h,items:m})}function Ei(e){let{userId:t,isGuest:a,showCaption:s,currentUserId:n,environment:o,intl:r,iconStyles:l}=e;const d=new(ft().L)(o,{table:w().oo,id:t},{userId:n}),c={id:t,type:"user"},u=d.getDisplayName(r);return{key:t,value:c,title:s?(0,i.jsx)(Ni().tp,{userStore:d,isGuest:a}):(0,i.jsx)(Ri().A,{userStore:d,avatarSize:20}),shortTitle:u,searchTerms:[u.toLowerCase(),d.getEmail()].filter(Rt().O9),tokenColor:a?"rgba(218, 163, 64, 0.2)":void 0,tokenIcon:a?(0,Pi().D)(l):(0,i.jsx)(da().A,{userStore:d,size:16})}}var Oi=()=>a(296746);function Ui(e){let{selectedSpaceIds:t,setSelectedSpaceIds:a,spaceData:s}=e;const n=(0,v().tz)(),o=(0,Oi().I)(s,n);return(0,i.jsx)(Qs().VX,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:x().V,selectedItems:t,setSelectedItems:a,items:o})}function Fi(e){let{selectedSpaceId:t,setSelectedSpaceId:a,spaceData:s,shouldHideClear:n}=e;const o=(0,v().tz)(),r=(0,Oi().I)(s,o,!0);return(0,i.jsx)(Qs().G0,{pillTitle:(0,i.jsx)(v().sA,{id:"orgConsole.filters.workspace.title",defaultMessage:"Workspace"}),pillIcon:x().V,selectedItem:t,setSelectedItem:e=>{void 0!==e&&e!==t&&a(e)},items:r,shouldUseCheck:!0,shouldHidePrefix:!0,selectionRequired:!0})}var Vi=()=>a(108944),Hi=()=>a(592010),Wi=()=>a(421645),qi=()=>a(773290),Gi=()=>a(625383),Ki=()=>a(744766);const Yi={id:"page",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.pageColumn.header",defaultMessage:"Page"}),renderCell:e=>(0,i.jsx)(Ki().oc,{blockStore:e.blockStore}),widthData:{widthPercent:25,minWidth:280,maxWidth:280},sortable:!1},Qi={id:"location",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.locationColumn.header",defaultMessage:"Location"}),renderCell:e=>(0,i.jsx)(Wi().E,{blockStore:e.blockStore,teamStore:(0,Vi().Uo)(e.blockStore)}),widthData:{widthPercent:25,minWidth:140},sortable:!1},$i={id:"pageStatus",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.pageStatusColumn.header",defaultMessage:"Page status"}),renderCell:e=>(0,i.jsx)(a(371895).u,{pageStatus:e.pageStatus}),widthData:{widthPercent:25,minWidth:140},sortable:!1};function Xi(e){let{blockStore:t,selectedSpaceId:a}=e;const s=ia({spaceId:a});return s?(0,i.jsx)(Hi().b,{blockStore:t,spaceStore:s}):null}const Zi={id:"audience",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.audienceColumn.header",defaultMessage:"Audience"}),renderCell:e=>(0,i.jsx)(Xi,{blockStore:e.blockStore,selectedSpaceId:e.selectedSpaceId}),widthData:{widthPercent:25,minWidth:140},sortable:!1},Ji={id:"sharedWith",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.sharedWithColumn.header",defaultMessage:"Shared with"}),renderCell:e=>(0,i.jsx)(a(604484).o,{blockStore:e.blockStore}),widthData:{widthPercent:25,minWidth:140},sortable:!1},eo={id:"lastEditedBy",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.lastEditedByColumn.header",defaultMessage:"Last edited by"}),renderCell:e=>{const t=e.blockStore.getLastEditedById();return t?(0,i.jsx)(qi().T,{blockStore:e.blockStore,userIds:[t]}):null},widthData:{widthPercent:25,minWidth:140},sortable:!1},to={id:"lastEditedTime",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.lastEditedTimeColumn.header",defaultMessage:"Last edited on"}),renderCell:e=>0===e.blockStore.getLastEditedTime()?null:(0,i.jsx)(a(738268).Z,{lastEditedTime:e.blockStore.getLastEditedTime(),lastEditedById:e.blockStore.getLastEditedById(),deletedFromTrashTime:e.blockStore.getDeletedFromTrashTime(),movedToTrashTime:e.blockStore.getMovedToTrashTime(),pageStatus:e.pageStatus}),widthData:{widthPercent:25,minWidth:140},sortable:!1},ao={id:"createdBy",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.createdByColumn.header",defaultMessage:"Created by"}),renderCell:e=>{const t=e.blockStore.getCreatedById();return t?(0,i.jsx)(qi().T,{blockStore:e.blockStore,userIds:[t]}):null},widthData:{widthPercent:25,minWidth:140},sortable:!1},so={id:"createdTime",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.createdTimeColumn.header",defaultMessage:"Created on"}),renderCell:e=>(0,i.jsx)(Gi().d,{dateTs:e.blockStore.getCreatedTime()}),widthData:{widthPercent:25,minWidth:140},sortable:!1};function no(e){let{data:t,loading:a,selectedSpaceId:n,onLoadMore:o,hasNextPage:r}=e;const l=s.useMemo((()=>[Yi,Qi,$i,Zi,Ji,eo,to,ao,so]),[]),d=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:l,theme:e,containerMarginTop:0})),[l]),c=t.map((e=>{const t=e.pathIsDead()?e.pathHasDeletedPermission()?"deleted_from_trash":"in_trash":"alive";return{id:e.id,blockStore:e,selectedSpaceId:n,type:Xt().T.SingleLegalHoldPage,isClickable:!1,pageStatus:t}}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Bt().WE,{columnRenderInfo:l,hideHeaderRowPadding:!0,rows:c,renderNoRowsComponent:()=>!a&&(0,i.jsx)(Kt,{title:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.empty",defaultMessage:"No pages found"}),byline:(0,i.jsx)(v().sA,{id:"singleLegalHoldContentTable.empty.byline",defaultMessage:"There are no pages that match this query."})}),styles:d,showRowBorders:!0,allowHorizontalScroll:!0,loadMoreMethod:r?{type:"button",onLoadMore:o}:void 0,setStickyHeaderRow:!0}),a?(0,i.jsx)(ne().fI,{alignItems:"center",justifyContent:"center",paddingTop:24,paddingBottom:24,children:(0,i.jsx)(wi().A,{})}):null]})}const io=(0,v().YK)({content:{id:"settingsConsole.singleLegalHoldContentTab.title",defaultMessage:"Browse Content"},contentLabel:{id:"settingsConsole.singleLegalHoldContentTab.label",defaultMessage:"View the pages currently on hold in each workspace."},placeholder:{id:"settingsConsole.singleLegalHoldContentTab.search.placeholder",defaultMessage:"Search by page name"}});function oo(e){let{legalHoldId:t}=e;const a=(0,v().tz)(),n=zi({spaceStores:(0,ks().l)()}),{spaceIds:o,loading:r}=function(e){const t=(0,b().v3)(),{legalHoldId:a}=e,[{status:s,value:n},i]=(0,Je().Yb)((async()=>{const e=await M().callApi({eventName:"getLegalHoldSpaceIdsWithPages",environment:t,data:{legalHoldId:a}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,Rt().HB)(e)}),[t,a]);return{loading:"pending"===s,spaceIds:n,refetch:i}}({legalHoldId:t}),l=(0,s.useMemo)((()=>o?n.filter((e=>o.includes(e.id))):[]),[n,o]);return r?(0,i.jsxs)(ee,{children:[(0,i.jsx)(Va()._,{title:a.formatMessage(io.content),byline:a.formatMessage(io.contentLabel)}),(0,i.jsx)(ne().VP,{alignItems:"center",justifyContent:"center",children:(0,i.jsx)(wi().A,{})})]}):(0,i.jsx)(ro,{spaceData:l,legalHoldId:t})}function ro(e){let{spaceData:t,legalHoldId:a}=e;const n=(0,v().tz)(),o=(0,Hn().F)(),{content:r,loading:l,loadNextPage:d,selectedSpaceId:c,setSelectedSpaceId:u,filters:g,setFilters:m,hasNextPage:p}=function(e){const t=(0,b().v3)(),{legalHoldId:a,spaceIds:n}=e,i=t.currentUser.id,[o,r]=s.useState(n[0]),[l,d]=s.useState(void 0),[c,u]=s.useState(void 0),[g,m]=s.useState(_i),[p,h]=s.useState([]),{query:f,teamIds:x,userIds:v}=g,y=null==x?void 0:x.join(","),S=null==v?void 0:v.join(","),[{status:j}]=(0,Je().Yb)((async()=>{if(!o)throw new Error("No space ID provided,");if(!i)throw new Error("Current user not found.");const e=y?y.split(","):[],s=S?S.split(","):[],n=await M().callApi({eventName:"getLegalHoldPages",environment:t,data:{id:a,spaceId:o,query:""===f?void 0:f,cursor:c,filters:e.length>0||s.length>0?{teamIds:e.length>0?e:void 0,userIds:s.length>0?s:void 0}:void 0},headers:{[Ci().B3]:o}});if("success"!==n.type){if("failed"===n.type)throw n.error;return(0,Rt().HB)(n)}{const e=(0,ki().p)({recordMapWithRoleJson:n.data.recordMap}),a=new(Ai().A)({name:Mi().$H,data:new(Ii().b)({[i]:e})});a.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),h((e=>{const s=[],i=new Set(e.map((e=>e.id)));for(const o of n.data.recordIds)if(!i.has(o)){const e=new(Ti().B)(t,{table:aa().ev,id:o},{inMemoryRecordCache:a});s.push(e)}return[...e,...s]})),d(n.data.nextCursor)}}),[t,a,o,f,i,y,S,c],{debounce:300}),w="pending"===j;return{content:p,loading:w,filters:g,setFilters:function(e){h([]),u(void 0),m((t=>({...t,...e})))},selectedSpaceId:o,setSelectedSpaceId:function(e){h([]),u(void 0),r(e)},loadNextPage:function(){0===p.length||!l||w||u(l)},hasNextPage:void 0!==l}}({legalHoldId:a,spaceIds:t.map((e=>e.id))}),{query:h,teamIds:f,userIds:x}=g,y=s.useMemo((()=>[c]),[c]),{teamStores:S}=(0,R().o)(y),{members:j}=Di({legalHoldId:a,spaceId:c});return(0,i.jsxs)(ee,{children:[(0,i.jsx)(Va()._,{title:n.formatMessage(io.content),byline:n.formatMessage(io.contentLabel)}),(0,i.jsxs)("div",{style:o.tableHeader,children:[(0,i.jsxs)("div",{style:o.leftContent,children:[(0,i.jsx)(Fi,{selectedSpaceId:c,setSelectedSpaceId:e=>{u(e),m({teamIds:[]})},spaceData:t}),(0,i.jsx)(zn().j,{selectedTeamIds:f,setSelectedTeamIds:e=>{m({teamIds:e})},teamStores:S[c],onMenuClose:()=>{}}),(0,i.jsx)(Li,{pillTitle:(0,i.jsx)(v().sA,{id:"legalHoldContentTable.filters.holdMembers.title",defaultMessage:"Hold members"}),pillIcon:Wn().s,selectedUsers:x,setSelectedUsers:e=>{m({userIds:e})},userIds:j})]}),(0,i.jsx)("div",{style:o.rightContent,children:(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:h,setQueryFilter:e=>{e!==g.query&&m({query:e})},placeholderText:n.formatMessage(io.placeholder)})})]}),(0,i.jsx)(no,{selectedSpaceId:c,data:r,loading:l,onLoadMore:d,hasNextPage:p})]})}function lo(){const e=(0,b().v3)(),[t,a]=(0,Je().V$)((async t=>{let{legalHoldId:a,name:s,description:n,icon:i,status:o,userIds:r}=t;const l=await M().callApi({eventName:"updateLegalHold",environment:e,data:{legalHoldId:a,name:s,description:n,icon:i,status:o,userIds:r}});if("success"===l.type)return l.data;if("failed"===l.type)throw l.error;return(0,Rt().HB)(l)}),[e]);return{loading:"pending"===t.status,updateLegalHold:a}}var co=()=>a(100622),uo=()=>a(678553),go=()=>a(64e3),mo=()=>a(15144),po=()=>a(15936),ho=()=>a(804059);const fo=(0,n().wt)("shieldSlash",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M4.19 11.425V6.619l1.29 1.285v3.268q0 .751.206 1.278.205.527.67.978.464.444 1.25.95a99 99 0 0 0 1.97 1.217q.142.089.232.123a.4.4 0 0 0 .157.034q.075 0 .157-.034a2 2 0 0 0 .24-.123 81 81 0 0 0 1.736-1.074l.984.992q-.525.342-1.183.717-.656.384-1.456.82-.13.069-.26.103a.8.8 0 0 1-.218.041.8.8 0 0 1-.219-.04 1.2 1.2 0 0 1-.26-.103A47 47 0 0 1 7 15.6q-1.011-.635-1.634-1.237a3.8 3.8 0 0 1-.895-1.299q-.28-.704-.28-1.64Zm10.978 2.208-1.012-1.012q.157-.3.226-.65a4 4 0 0 0 .075-.8V6.477a.6.6 0 0 0-.048-.267q-.048-.096-.191-.144l-.711-.253q-.397-.15-.834-.307a126 126 0 0 0-1.688-.615 32 32 0 0 0-.657-.24 2 2 0 0 0-.205-.061.65.65 0 0 0-.314 0 3 3 0 0 0-.199.061q-.225.075-.52.185-.293.102-.635.226l-1.367.492-1.019-1.027q.555-.205 1.183-.43a59 59 0 0 1 1.176-.417q.54-.185.827-.28.17-.042.355-.076a1.7 1.7 0 0 1 .356-.04q.17 0 .355.033.192.034.363.082.218.075.622.22.41.143.909.32a64 64 0 0 1 1.9.684q.411.15.636.246.506.218.745.5.246.279.246.888v5.168q0 .67-.137 1.21a3.4 3.4 0 0 1-.437.998m.451 3.199L2.863 4.09a.54.54 0 0 1-.15-.39q0-.232.15-.376.165-.165.39-.164.225 0 .39.164L16.392 16.06a.51.51 0 0 1 .157.39q0 .225-.157.382a.5.5 0 0 1-.383.164.53.53 0 0 1-.39-.164"})});let xo=function(e){return e.ThreeMonths="three-months",e.SixMonths="six-months",e.OneYear="one-year",e}({});Object.values(xo);const vo=(0,v().YK)({organizationOwnerLabel:{id:"organizationMember.owner.label",defaultMessage:"Organization owner"}});var yo=()=>a(463830),bo=()=>a(406699),So=()=>a(893468);function jo(){const e=(0,j().IS)((e=>({lockShieldIcon:{width:16,height:16,color:e.lightTextColor}})),[]);return(0,i.jsx)(q().A,{renderTooltip:()=>(0,i.jsx)(v().sA,{defaultMessage:"This user is placed in a legal hold in this organization.",id:"userSummary.legalHoldTooltip"}),render:t=>(0,i.jsx)("div",{...t,children:(0,a(373204).K)(e.lockShieldIcon)})})}function wo(e){const{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o}=e,[r,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)([]),u=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:540}})),[]),{inviteRole:g,inviteTargets:m}=(0,S().K8)((()=>({inviteRole:t.state.inviteRole,inviteTargets:t.state.inviteTargets})),[t]),{spaceStores:p,onSubmit:h}=_s({inviteRole:g,inviteTargets:m,organizationStore:a});function f(e){c((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function x(){c((e=>e.length!==p.length?p.map((e=>e.id)):[]))}async function y(){0!==d.length&&(l(!0),await h(d),await o(),n(),l(!1))}return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(F().tf,{showDismissButton:!1,header:(0,i.jsx)(K().rQ,{icon:(0,Pt().x)(u.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.title",defaultMessage:"Add members to workspace"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.byline",defaultMessage:"Choose workspaces to add <bold>{count} {count, plural, one {user} other {users}}</bold> as workspace members, granting access to workspace content and default teamspaces.",values:{count:m.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.button.add",defaultMessage:"Add users"}),primaryAction:y,primaryDisabled:r||0===d.length,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:u.content,children:(0,i.jsx)(Ns().O,{spaceStores:p,selectedSpaceIds:d,onSelect:f,onSelectHeader:x})})})})}function Ao(e){let{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o}=e;const r=(0,v().tz)(),l=(0,b().v3)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(P().N),[c,u]=(0,s.useState)(!1),g=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:24,height:"fit-content",width:540}})),[]),m=(0,S().K8)((()=>t.state.inviteTargets.map((e=>e.value.id)).filter(Rt().O9)),[t]),p=(0,S().K8)((()=>!c&&m.length>0),[c,m]);async function h(){var e;if(!p)return;u(!0);const t=a.getOwnerIds().filter((e=>!m.includes(e))),s=null===(e=ve().default.state.currentUserStore)||void 0===e?void 0:e.id,c=s&&m.includes(s),g=await M().callApi({eventName:"updateOrganization",environment:l,data:{organizationId:a.id,ownerIds:t}});"success"===g.type?(d(g),ot().D6({label:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.success",defaultMessage:"Successfully demoted from admin"})}),c&&Pe().oo({environment:l,url:De().JZ.root})):C().f1((0,I().Hu)(r,g)),await o(),n(),u(!1)}return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(F().tf,{showDismissButton:!1,header:(0,i.jsx)(K().rQ,{icon:fo(g.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.title",defaultMessage:"Downgrade organization owners"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.byline",defaultMessage:"Remove organization owner permissions from <bold>{count} {count, plural, one {user} other {users}}</bold>. Workspace roles and permissions remain unchanged.",values:{count:m.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.button.add",defaultMessage:"Downgrade"}),primaryAction:h,primaryDisabled:!p,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:g.content,children:(0,i.jsx)(Ps,{userIds:m})})})})}function Mo(e){let{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o}=e;const r=(0,v().tz)(),l=(0,b().v3)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(P().N),[c,u]=(0,s.useState)(!1),g=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:24,height:"fit-content",width:540}})),[]),m=(0,S().K8)((()=>t.state.inviteTargets.map((e=>e.value.id)).filter(Rt().O9)),[t]),p=(0,S().K8)((()=>!c&&m.length>0),[c,m]);async function h(){if(!p)return;u(!0);const e=a.getOwnerIds(),t=Array.from(new Set(e.concat(m))),s=await M().callApi({eventName:"updateOrganization",environment:l,data:{organizationId:a.id,ownerIds:t}});"success"===s.type?(d(s),ot().D6({label:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.success",defaultMessage:"Successfully promoted to admin"})})):C().f1((0,I().Hu)(r,s)),await o(),n(),u(!1)}return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(F().tf,{showDismissButton:!1,header:(0,i.jsx)(K().rQ,{icon:(0,po().g)(g.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.title",defaultMessage:"Make users organization owners"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.byline",defaultMessage:"Choose workspaces to add <bold>{count} {count, plural, one {user} other {users}}</bold> as workspace members, granting access to workspace content and default teamspaces.",values:{count:m.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.button.add",defaultMessage:"Make {count, plural, one {organization owner} other {organization owners}}",values:{count:m.length}}),primaryAction:h,primaryDisabled:!p,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:g.content,children:(0,i.jsx)(Ps,{userIds:m})})})})}function Co(e){let{userStore:t,organizationStore:a}=e;const n=(0,ks().l)(),{spaceUsers:i,loading:o}=(0,B().$)(n),r=(0,S().K8)((()=>{var e;return(null===(e=a.getRoles().find((e=>e.id===t.id)))||void 0===e?void 0:e.role)??"none"}),[a,t.id]),[l,d]=(0,s.useState)(new Map),[c,u]=(0,s.useState)(new Map),g=(0,s.useMemo)((()=>n.map((e=>e.id))),[n]),[m,p]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(!o&&!m){const e=new Map;for(const a of g){const s=i[a];if(!s)continue;const n=s.find((e=>e.userId===t.id));n&&e.set(a,n)}d(e)}}),[o,g,i,t.id,m]);const{loadVisibleUsersForSpace:h}=(0,s.useContext)(N().D),f=(0,s.useCallback)((async e=>{p(!0),await h(e,!0),u((t=>{const a=new Map(t);return a.delete(e),a})),p(!1)}),[h]),x=(0,s.useCallback)((e=>{u((t=>{const a=new Map(t);return a.delete(e),f(e),a}))}),[f]),v=(0,s.useCallback)(((e,a)=>{u((s=>{if(!(0,Ya().DH)(a))return s;const n=new Map(s);return n.set(e,{userId:t.id,role:a}),f(e),n}))}),[f,t.id]);return{loading:o,userData:{loading:o,userSpaceAccessMap:new Map([...l,...c]),organizationRole:r,removeUserFromSpaceCache:x,updateUserRoleInSpaceCache:v}}}function Io(e){let{onDismiss:t,...a}=e;const s=(0,b().v3)(),n=(0,v().tz)(),{userId:o,organizationStore:r,lastActiveAt:l,isOnLegalHold:d}=a,{userStore:c}=(0,S().K8)((()=>({userStore:new(_().LU)(s,{table:w().oo,id:o})})),[s,o]),{loading:u,userData:g}=Co({userStore:c,organizationStore:r}),m=(0,S().K8)((()=>(0,i.jsx)(da().A,{size:oa().WK,userStore:c})),[c]),[p,h]=(0,S().K8)((()=>[c.getDisplayName(n),c.getEmail()??""]),[c,n]);return(0,i.jsx)(oa().iv,{sidebarProps:{sidebarTitle:p,sidebarByline:h,sidebarTitleIcon:m,hideSeparator:!0},tabRenderer:ef,tabNames:Jt().AM,defaultTab:"general",sceneProps:{isLoading:u,organizationStore:r,userStore:c,userData:{lastActiveAt:l,...g},isOnLegalHold:d},tabAccessor:Jh,isOpen:!0,onDismiss:t})}const To={id:"actor",headerTitle:(0,i.jsx)(v().sA,{id:"organizationMembersTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(ua,{userId:e.organizationMember.userId,badge:e.usersOnLegalHold.has(e.organizationMember.userId)?(0,i.jsx)(jo,{}):null,rightContent:(0,i.jsx)(Eo,{userId:e.organizationMember.userId,setSelectedUserId:e.setSelectedUserId,setOpenedModal:e.setOpenedModal,isOrganizationOwner:"owner"===e.organizationMember.organizationRole,isLastOrganizationOwner:e.isLastOrganizationOwner})}),widthData:{width:275,maxWidth:275},sortable:!1,shouldShowSortTooltip:!1},ko={id:"role",headerTitle:(0,i.jsx)(v().sA,{id:"organizationMembersTable.roleColumn.header",defaultMessage:"Highest role"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):(0,i.jsx)(Bo,{organizationMember:e.organizationMember}),widthData:{widthPercent:20,minWidth:70},sortable:!1,shouldShowSortTooltip:!1},_o={id:"spaces",headerTitle:(0,i.jsx)(v().sA,{id:"organizationMembersTable.spacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):(0,i.jsx)(Lo,{organizationMember:e.organizationMember}),widthData:{widthPercent:25,minWidth:120},sortable:!1,hasClickableContents:!1},Do={id:"email",headerTitle:(0,i.jsx)(v().sA,{id:"organizationMembersTable.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:240}}):(0,i.jsx)(ws().xF,{userId:e.organizationMember.userId}),widthData:{widthPercent:25,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},zo={id:"lastActive",headerTitle:(0,i.jsx)(v().sA,{id:"organizationMembersTable.lastActiveColumn.header",defaultMessage:"Last active"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:100}}):(0,i.jsx)(So().F,{useSecondaryColorTitle:!0,isNoActivitySecondaryColor:!0,lastActiveAt:e.organizationMember.lastActiveAt}),widthData:{widthPercent:10,minWidth:100},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},Po=[To,ko,Do,_o,zo];var No=function(e){return e.AddToWorkspace="add-to-workspace",e.RemoveFromWorkspace="remove-from-workspace",e.PromoteToAdmin="promote-to-admin",e.DemoteAdmin="demote-admin",e}(No||{});function Ro(e){let{members:t,usersOnLegalHold:a,loading:n,error:o,loadNextPage:r,organizationStore:l,loadPreviousPage:d,currentPage:c,hasPreviousPage:u,hasNextPage:g,refreshPage:p,userId:h,selectedIds:f,onSelectAll:x,onUnselectAll:y,onSelectRow:A}=e;const M=(0,b().v3)(),C=(0,qt().A)(),I=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:Po,theme:e,containerMarginTop:0})),[]),T=Po.map((e=>({...e,headerStyle:C.tableHeader,rowStyle:C.tableRow}))),k=()=>{B({isOpen:!1})},[D,z]=(0,s.useState)(),[P,N]=(0,s.useState)(),[R,B]=(0,s.useState)(h?{isOpen:!0,userId:h,organizationStore:l,lastActiveAt:void 0,onDismiss:k}:{isOpen:!1}),L=(0,S().K8)((()=>t.map((e=>({organizationMember:e,usersOnLegalHold:a,id:e.userId,isClickable:!0,type:Xt().T.OrganizationMember,setSelectedUserId:z,setOpenedModal:N,isLastOrganizationOwner:l.isUserLastOwner(e.userId)})))),[t,l,a]),E=n?(0,Xt().n)():L;function O(){N(void 0)}const U={header:{isDisabled:n,isSelected:f.length>0&&f.length===t.length,onClick:()=>{f.length===t.length?y():x()}},row:{getDisabledState:e=>n,getSelectedState:e=>e.type===Xt().T.OrganizationMember&&f.includes(e.organizationMember.userId),onClick:e=>{e.type===Xt().T.OrganizationMember&&A(e.organizationMember.userId)}}},F=(0,S().K8)((()=>{const e=new Pa,t=D?new(_().LU)(M,{table:w().oo,id:D}).getModel():void 0;return t?(e.setState({...e.state,inviteTargets:[{type:"existingUser",value:t,spaceRole:void 0}],inviteRole:"read_and_write",isInviteTargetsEmpty:!1}),e):e}),[M,D]);return!n&&o?(0,i.jsx)(Qt,{error:o,runNewSearch:()=>p(!0)}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Bt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:T,rows:E,renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:m().F,title:(0,i.jsx)(v().sA,{id:"workspaceMembersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(v().sA,{id:"workspaceMembersTable.empty.byline",defaultMessage:"There are no members that match this query."})}),styles:I,loadMoreMethod:{type:"pages",onLoadNext:r,onLoadPrevious:d,hasNextPage:g,hasPrevPage:u,currentPage:c},multiselect:U,onRowClick:function(e){e.type===Xt().T.OrganizationMember&&B({isOpen:!0,onDismiss:k,userId:e.organizationMember.userId,organizationStore:l,lastActiveAt:e.organizationMember.lastActiveAt})},extendToFullScreen:$t().e}),P===No.AddToWorkspace?(0,i.jsx)(wo,{permissionsInviteStore:F,onDismiss:O,organizationStore:l,refreshPage:p}):null,P===No.RemoveFromWorkspace?(0,i.jsx)(hn,{permissionsInviteStore:F,onDismiss:O,organizationStore:l,refreshPage:p}):null,P===No.PromoteToAdmin?(0,i.jsx)(Mo,{permissionsInviteStore:F,onDismiss:O,organizationStore:l,refreshPage:p}):null,P===No.DemoteAdmin?(0,i.jsx)(Ao,{permissionsInviteStore:F,onDismiss:O,organizationStore:l,refreshPage:p}):null,R.isOpen&&(0,i.jsx)(Io,{...R,isOnLegalHold:a.has(R.userId)})]})}function Bo(e){let{organizationMember:t}=e;const a=(0,v().tz)(),s=Oo(t);return(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:a.formatMessage(s)})}function Lo(e){let{organizationMember:t}=e;const a=t.spacesInfo.map((e=>e.spaceId)),s=(0,ks().l)(a);return 0===a.length?(0,i.jsx)(D().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organizationMembersTable.spacesColumn.noWorkspaces",defaultMessage:"No workspaces"})}):(0,i.jsx)(J().$,{spaceStores:s,isLoading:!1,showTooltip:!0})}function Eo(e){const t=(0,v().tz)(),{userId:a,setSelectedUserId:s,setOpenedModal:n,isOrganizationOwner:o,isLastOrganizationOwner:r}=e,l=(0,S().uB)(void 0,yo().A),d=(0,j().IS)((()=>({popupMenu:{width:270},icon:{height:20,width:20,fill:"currentColor"}})),[]),c=[{key:"add-to-workspaces",render:e=>(0,i.jsx)(Ve().A,{...e,icon:(0,Pt().x)(d.icon),title:(0,i.jsx)(v().sA,{id:"organizationMembersTable.userColumn.menu.addUserToWorkspaces",defaultMessage:"Add to workspaces"})}),action:()=>{n(No.AddToWorkspace),s(a),l.setState({...l.state,open:!1})}},{key:"remove-from-workspaces",render:e=>(0,i.jsx)(Ve().A,{...e,icon:js(d.icon),title:(0,i.jsx)(v().sA,{id:"organizationMembersTable.userColumn.menu.removeUserFromWorkspaces",defaultMessage:"Remove from workspaces"})}),action:()=>{n(No.RemoveFromWorkspace),s(a),l.setState({...l.state,open:!1})}},{key:"promote-to-owner",render:e=>(0,i.jsx)(Ve().A,{...e,icon:(0,po().g)(d.icon),title:(0,i.jsx)(v().sA,{id:"organizationMembersTable.userColumn.menu.makeOrganizationOwner",defaultMessage:"Make organization owner"}),disabled:o,disabledFeedback:o}),action:()=>{n(No.PromoteToAdmin),s(a),l.setState({...l.state,open:!1})}},{key:"demote-from-owner",render:e=>(0,i.jsx)(Ve().A,{...e,icon:fo(d.icon),title:(0,i.jsx)(v().sA,{id:"organizationMembersTable.userColumn.menu.downgradeOrganizationOwner",defaultMessage:"Downgrade organization owner"}),disabled:r||!o,disabledFeedback:r||!o}),action:()=>{n(No.DemoteAdmin),s(a),l.setState({...l.state,open:!1})}}],u={key:"actions",render:e=>(0,i.jsx)(He().A,{title:(0,i.jsx)(v().sA,{id:"organizationMembersTable.userColumn.menu.title",defaultMessage:"Member actions"}),...e}),items:c};return(0,i.jsx)(bo().Ay,{stopClickPropagation:!0,popupType:Xa().n.Popup,alignmentToOrigin:$a().C.Start,placementToOrigin:$a().W.Bottom,style:d.popupMenu,render:()=>(0,i.jsx)(vt().A,{menuType:ht().gu.Popup,width:270,children:(0,i.jsx)(yt().Ay,{type:yt().Oh.Vertical,initialFocus:void 0,sections:[u]})}),onClose:Ze().lQ,buttonPopupStore:l,renderOrigin:e=>(0,i.jsx)(cs().A,{ariaLabel:t.formatMessage({id:"memberActionsMenuButton.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:ho().W,...e})})}function Oo(e){if("owner"===e.organizationRole)return vo.organizationOwnerLabel;const t=e.spacesInfo.length>0?e.spacesInfo[0].role:"none";return(0,Is().rd)(t)}const Uo=(0,v().YK)({legalHoldAddMembersPlaceholder:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.addMembersPlaceholder",defaultMessage:"Search names or emails"},legalHoldAddMembersRequiredValidationError:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.addMembersRequiredValidationError",defaultMessage:"Hold members are required."}});function Fo(e){let{organizationId:t,holdMemberUserIds:a,setHoldMemberUserIds:n,error:o,nonRemovableIds:r}=e;const l=(0,b().v3)(),d=(0,v().tz)(),[c,u]=s.useState(""),[g,m]=s.useState(!1),p=(0,j().IS)((e=>({token:{boxShadow:e.shadow2XS}})),[]),[{status:h,value:f}]=(0,Je().Yb)((async()=>{if(0===c.length)return[];const e=await M().callApi({eventName:"getMembersInOrganization",environment:l,data:{organizationId:t,query:c}});if("success"===e.type)return e.data.members;if("failed"===e.type)throw e.error;return(0,Rt().HB)(e)}),[l,t,c],{debounce:300}),[{status:x,value:y}]=(0,Je().Yb)((async()=>{if(0===c.length)return[];const e=await M().callApi({eventName:"getGuestsInOrganization",environment:l,data:{organizationId:t,query:c}});if("success"===e.type)return e.data.guests;if("failed"===e.type)throw e.error;return(0,Rt().HB)(e)}),[l,t,c],{debounce:300}),A=(0,s.useMemo)((()=>new Set(null==f?void 0:f.map((e=>e.userId)))),[f]),C=(0,s.useMemo)((()=>null==y?void 0:y.filter((e=>!A.has(e.userId)))),[y,A]),I=(0,s.useMemo)((()=>new Set(null==y?void 0:y.map((e=>e.userId)))),[y]),[{status:k,value:D}]=(0,Je().Yb)((async()=>{if(0===c.length)return[];const e=await M().callApi({eventName:"getRemovedUsers",environment:l,data:{organizationId:t,query:c}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,Rt().HB)(e)}),[l,t,c],{debounce:300}),z=(0,s.useMemo)((()=>null==D?void 0:D.filter((e=>{const t=A.has(e),a=I.has(e);return!t&&!a}))),[D,A,I]),P=(0,S().K8)((()=>a.map((e=>{const t=new(_().LU)(l,{table:w().oo,id:e});return(0,i.jsx)(jt().A,{showRemoveButton:!(null!=r&&r.includes(e)),onClickRemove:t=>{const s=a.filter((t=>t!==e));n(s),t.stopPropagation()},backgroundColor:co().Tj.white,format:ut().NY.Medium,isSingle:!1,value:(0,i.jsx)(Ri().A,{userStore:t,avatarSize:18}),style:p.token},e)}))),[l,a,p.token,n,r]),N=(0,S().K8)((()=>f&&0!==(null==f?void 0:f.length)?f.map((e=>{const t=new(_().LU)(l,{table:w().oo,id:e.userId}),s=Oo(e);return{key:e.userId,render:e=>(0,i.jsx)(ts().A,{...e,defaultUserTitle:"name_only_semibold",defaultUserCaption:"email",actor:(0,Ga().MR)(t.getModel()),right:(0,i.jsx)(uo().C,{caption:d.formatMessage(s)})}),action:()=>{const t=[...a,e.userId];n(t),u("")}}})).filter((e=>!a.includes(e.key.toString()))):[]),[l,a,f,n,d]),R=(0,S().K8)((()=>C&&0!==(null==C?void 0:C.length)?C.map((e=>{const t=new(_().LU)(l,{table:w().oo,id:e.userId});return{key:e.userId,render:e=>(0,i.jsx)(ts().A,{...e,defaultUserTitle:"name_only_semibold",defaultUserCaption:"email",actor:(0,Ga().MR)(t.getModel())}),action:()=>{const t=[...a,e.userId];n(t),u("")}}})).filter((e=>!a.includes(e.key.toString()))):[]),[l,C,a,n]),B=(0,S().K8)((()=>z&&0!==(null==z?void 0:z.length)?z.map((e=>{const t=new(_().LU)(l,{table:w().oo,id:e});return{key:e,render:e=>(0,i.jsx)(ts().A,{...e,defaultUserTitle:"name_only_semibold",defaultUserCaption:"email",actor:(0,Ga().MR)(t.getModel())}),action:()=>{const t=[...a,e];n(t),u("")}}})):[]),[l,a,z,n]),L={key:"users",render:e=>(0,i.jsx)(He().A,{...e,title:(0,i.jsx)(v().sA,{defaultMessage:"Members",id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.members.title"})}),items:N},E={key:"guests",render:e=>(0,i.jsx)(He().A,{...e,title:(0,i.jsx)(v().sA,{defaultMessage:"Guests",id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.guests.title"})}),items:R},O={key:"removedUsers",render:e=>(0,i.jsx)(He().A,{...e,title:(0,i.jsx)(v().sA,{defaultMessage:"Removed users",id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.removedUsers.title"})}),items:B},U={key:"empty",render:e=>(0,i.jsx)(He().A,{...e}),items:[{key:"empty-item",render:e=>(0,i.jsx)(go().A,{title:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.empty.item",defaultMessage:"Type or paste in emails above, separated by commas."})}),action:Ze().lQ}]},F="resolved"===h&&"resolved"===x&&"resolved"===k;function V(){if(0===c.length)return[U];const e=[];return N.length>0&&e.push(L),R.length>0&&e.push(E),B.length>0&&e.push(O),e}return(0,i.jsxs)(ne().VP,{width:"100%",gap:8,children:[(0,i.jsxs)(ne().VP,{gap:0,children:[(0,i.jsx)(G().A,{children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersLabel",defaultMessage:"Hold members"})}),(0,i.jsx)(bt().Ay,{popupType:bt().nl.Popup,sameWidthAsOrigin:!0,open:g||c.length>0,enableOutsideClickDismiss:!0,onDismiss:()=>{m(!1)},origin:(0,i.jsx)(wt().A,{onClick:e=>{m(!0),e.stopPropagation()},tokens:P,placeholder:T().A.formatMessage(Uo.legalHoldAddMembersPlaceholder),value:c,onChange:e=>u(e.target.value),onRemoveLastToken:()=>{const e=a.slice(0,-1);n(e)},errorOutline:!!o,inputElementAttributes:{"aria-describedby":"legalHoldAddMembersError"}}),render:()=>(0,i.jsx)(vt().A,{menuType:ht().gu.Popup,children:(0,i.jsx)(yt().Ay,{type:yt().Oh.Vertical,initialFocus:F&&[...N,...R,...B].length>0?0:void 0,sections:V()})})})]}),(0,i.jsx)(mo().R,{id:"legalHoldAddMembersError",error:o})]})}function Vo(e){let{onDismiss:t,legalHoldId:a,organizationId:n,userIdsAlreadyInLegalHold:o,onSuccess:r}=e;const[l,d]=s.useState({holdMemberUserIds:void 0}),[c,u]=(0,s.useState)(o),g=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},byline:{width:400}})),[]),{loading:m,updateLegalHold:p}=lo(),h=async()=>{if(c.length)try{await p({legalHoldId:a,userIds:c}),r(),t()}catch(e){return}else d((e=>({...e,holdMemberUserIds:Uo.legalHoldAddMembersRequiredValidationError})))};return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:t,areaConstraint:{width:{type:"min",length:580}},render:e=>{let{sizeRange:a}=e;return(0,i.jsx)(F().tf,{showDismissButton:!1,sizeRange:a,header:(0,i.jsx)(K().rQ,{icon:(0,Pt().x)(g.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.title",defaultMessage:"Add new hold member"}),byline:(0,i.jsx)("div",{style:g.byline,children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.byline",defaultMessage:"Members affected by a legal hold won't be notified of the hold and will still maintain their permissions to create, edit, and delete files."})})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.button.addMember",defaultMessage:"Add hold member"}),primaryAction:h,primaryDisabled:m,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:t}),children:(0,i.jsx)(Fo,{organizationId:n,holdMemberUserIds:c,nonRemovableIds:o,setHoldMemberUserIds:e=>{u(e),e.length&&d((e=>({...e,holdMemberUserIds:void 0})))},error:l.holdMemberUserIds})})}})}function Ho(e){let{userIdsToRemove:t,legalHoldId:a,onDismiss:n,onSuccess:o}=e;const[r,l]=(0,s.useState)(!1),d=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:440,display:"flex",flexDirection:"column",alignItems:"center"},confirmationContainer:{display:"flex",gap:10,alignItems:"center"}})),[]),{loading:c,updateLegalHold:u}=lo(),g=async()=>{try{await u({legalHoldId:a,userIds:[]}),await o(),n()}catch(e){}},m=t.length;return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:(0,it().J)(d.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.title",defaultMessage:"Are you sure you want to remove {memberRemovalCount, plural, one {this member} other {these members}}?",values:{memberRemovalCount:m}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.byline",defaultMessage:"Removing all members will release the hold. This action is final and pages deleted after release will be permanently deleted according to the data retention setting.",values:{memberRemovalCount:m}})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.buttonText",defaultMessage:"Remove {memberRemovalCount, plural, one {member} other {members}}",values:{memberRemovalCount:m}}),primaryAction:g,primaryDisabled:c||!r,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.cancelButton",defaultMessage:"Cancel"}),secondaryAction:n,isDarkRed:!0}),children:(0,i.jsx)("div",{style:d.container,children:(0,i.jsxs)("div",{style:d.confirmationContainer,children:[(0,i.jsx)(rt().A,{checked:r,size:14,checkSize:10,onClick:()=>l(!r)}),(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.confirmationText",defaultMessage:"I understand the actions of releasing legal hold"})})]})})})})}function Wo(e){let{userIdsToRemove:t,allUserIds:a,legalHoldId:s,onDismiss:n,onSuccess:o}=e;const r=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary}})),[]),{loading:l,updateLegalHold:d}=lo(),c=async()=>{try{const e=a.filter((e=>!t.includes(e)));await d({legalHoldId:s,userIds:e}),o(),n()}catch(e){}},u=t.length;return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:n,areaConstraint:{width:{type:"fixed",length:421}},render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:(0,it().J)(r.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.title",defaultMessage:"Are you sure you want to remove {memberRemovalCount, plural, one {this member} other {these members}}?",values:{memberRemovalCount:u}}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.byline",defaultMessage:"Deleting {memberRemovalCount, plural, one {this member} other {these members}} will also remove associated pages by {memberRemovalCount, plural, one {this member} other {these members}}.",values:{memberRemovalCount:u}})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.buttonText",defaultMessage:"Remove {memberRemovalCount, plural, one {member} other {members}}",values:{memberRemovalCount:u}}),primaryAction:c,primaryDisabled:l,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.cancelButton",defaultMessage:"Cancel"}),secondaryAction:n,isDarkRed:!0})})})}function qo(e){let{organizationGuest:t}=e;const a=Object.keys(t.guestPages),s=(0,ks().l)(a);return 0===a.length?(0,i.jsx)(D().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.spacesColumn.noWorkspaces",defaultMessage:"No workspaces"})}):(0,i.jsx)(J().$,{spaceStores:s,isLoading:!1,showTooltip:!0})}var Go=function(e){return e.RemoveFromLegalHold="remove-from-legal-hold",e.ReleaseLegalHold="release-legal-hold",e}(Go||{});function Ko(e){const t=(0,v().tz)(),{userId:a,onRemoveMember:s}=e,n=(0,S().uB)(void 0,yo().A),o=(0,j().IS)((()=>({popupMenu:{width:248},icon:{height:20,width:20,fill:"currentColor"}})),[]),r=[{key:"remove-member-from-legal-hold",render:e=>(0,i.jsx)(Ve().A,{...e,icon:js(o.icon),title:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.userColumn.menu.removeMemberFromLegalHold",defaultMessage:"Remove member"})}),action:()=>{s(a),n.setState({...n.state,open:!1})}}],l={key:"actions",render:e=>(0,i.jsx)(He().A,{title:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.userColumn.menu.title",defaultMessage:"Member actions"}),...e}),items:r};return(0,i.jsx)(bo().Ay,{stopClickPropagation:!0,popupType:Xa().n.Popup,alignmentToOrigin:$a().C.Start,placementToOrigin:$a().W.Bottom,style:o.popupMenu,render:()=>(0,i.jsx)(vt().A,{menuType:ht().gu.Popup,width:248,children:(0,i.jsx)(yt().Ay,{type:yt().Oh.Vertical,initialFocus:void 0,sections:[l]})}),onClose:Ze().lQ,buttonPopupStore:n,renderOrigin:e=>(0,i.jsx)(cs().A,{ariaLabel:t.formatMessage({id:"legalHoldMemberActionsMenuButton.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:ho().W,...e})})}function Yo(e){const{userId:t,onRemoveMember:a}=e,s=(0,b().v3)();return(0,S().K8)((()=>new(_().LU)(s,{table:w().oo,id:t})),[t,s])?(0,i.jsx)(ua,{userId:t,rightContent:(0,i.jsx)(Ko,{userId:t,onRemoveMember:a})}):null}const Qo={id:"name",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.nameColumn.header",defaultMessage:"Name"}),renderCell:e=>{if(e.type===Xt().T.Loading)return(0,i.jsx)(Lt().mf,{includeIcon:!0,containerStyles:{width:140}});const{onRemoveMember:t}=e;return e.type===Xt().T.SingleLegalHoldMemberUser?(0,i.jsx)(Yo,{onRemoveMember:t,userId:e.organizationMember.userId}):e.type===Xt().T.SingleLegalHoldMemberGuest?(0,i.jsx)(Yo,{onRemoveMember:t,userId:e.organizationGuest.userId}):e.type===Xt().T.SingleLegalHoldMemberDeletedUser?(0,i.jsx)(Yo,{onRemoveMember:t,userId:e.deletedMemberId}):(0,Rt().HB)(e)},widthData:{widthPercent:26,minWidth:275,maxWidth:275},sortable:!1},$o={id:"role",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.roleColumn.header",defaultMessage:"Highest role"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):e.type===Xt().T.SingleLegalHoldMemberUser?(0,i.jsx)(Bo,{organizationMember:e.organizationMember}):e.type===Xt().T.SingleLegalHoldMemberGuest?(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.guestRole",defaultMessage:"Guest"})}):e.type===Xt().T.SingleLegalHoldMemberDeletedUser?(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.deletedUserRole",defaultMessage:"Deleted user"})}):(0,Rt().HB)(e),widthData:{widthPercent:25,minWidth:80},sortable:!1},Xo={id:"workspaces",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.workspacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):e.type===Xt().T.SingleLegalHoldMemberUser?(0,i.jsx)(Lo,{organizationMember:e.organizationMember}):e.type===Xt().T.SingleLegalHoldMemberGuest?(0,i.jsx)(qo,{organizationGuest:e.organizationGuest}):e.type===Xt().T.SingleLegalHoldMemberDeletedUser?null:(0,Rt().HB)(e),widthData:{widthPercent:25,minWidth:80},sortable:!1},Zo={id:"email",headerTitle:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:240}}):e.type===Xt().T.SingleLegalHoldMemberUser?(0,i.jsx)(ws().xF,{userId:e.organizationMember.userId}):e.type===Xt().T.SingleLegalHoldMemberGuest?(0,i.jsx)(ws().xF,{userId:e.organizationGuest.userId}):e.type===Xt().T.SingleLegalHoldMemberDeletedUser?null:(0,Rt().HB)(e),widthData:{widthPercent:25,minWidth:80},sortable:!1};function Jo(e){let{data:t,loading:a,currentPage:n,setCurrentPage:o,selectedIds:r,onSelectAll:l,onUnselectAll:d,onSelectRow:c,legalHoldId:u,onRemoveMembersSuccess:g,onRemoveLastMembersSuccess:m}=e;const[p,h]=(0,s.useState)(),[f,x]=(0,s.useState)(),y=s.useMemo((()=>[Qo,$o,Xo,Zo]),[]),b=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:y,theme:e,containerMarginTop:0})),[y]),S=t.map((e=>"user"===e.type||"guest"===e.type?e.userId:"deleted"===e.type?e.deletedMemberId:(0,Rt().HB)(e))),w=s.useCallback((e=>{h(e),S.includes(e)&&1===S.length?x(Go.ReleaseLegalHold):x(Go.RemoveFromLegalHold)}),[h,x,S]),A=t.map((e=>{const t={onRemoveMember:w};return"user"===e.type?{id:e.userId,organizationMember:e,isClickable:!0,type:Xt().T.SingleLegalHoldMemberUser,...t}:"guest"===e.type?{id:e.userId,organizationGuest:e,isClickable:!0,type:Xt().T.SingleLegalHoldMemberGuest,...t}:"deleted"===e.type?{id:e.deletedMemberId,deletedMemberId:e.deletedMemberId,type:Xt().T.SingleLegalHoldMemberDeletedUser,isClickable:!0,...t}:(0,Rt().HB)(e)})),M=a?(0,Xt().n)():A.slice(et().q*(n-1),et().q*n),C=A.length>et().q*n,I=1!==n,T={header:{isDisabled:a,isSelected:r.length>0&&r.length===t.length,onClick:()=>{r.length===t.length?d():l()}},row:{getDisabledState:e=>a,getSelectedState:e=>e.type===Xt().T.SingleLegalHoldMemberUser?r.includes(e.organizationMember.userId):e.type===Xt().T.SingleLegalHoldMemberGuest?r.includes(e.organizationGuest.userId):e.type===Xt().T.SingleLegalHoldMemberDeletedUser&&r.includes(e.deletedMemberId),onClick:e=>{e.type===Xt().T.SingleLegalHoldMemberUser&&c(e.organizationMember.userId),e.type===Xt().T.SingleLegalHoldMemberGuest&&c(e.organizationGuest.userId),e.type===Xt().T.SingleLegalHoldMemberDeletedUser&&c(e.deletedMemberId)}}},k=s.useCallback((()=>{x(void 0),h(void 0)}),[x,h]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Bt().WE,{columnRenderInfo:y,hideHeaderRowPadding:!0,rows:M,renderNoRowsComponent:()=>(0,i.jsx)(Kt,{title:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTable.empty.byline",defaultMessage:"There are no members that match this query."})}),styles:b,showRowBorders:!0,allowHorizontalScroll:!0,loadMoreMethod:{type:"pages",onLoadNext:()=>{C&&o(n+1)},onLoadPrevious:()=>{I&&o(n-1)},hasNextPage:C,hasPrevPage:I,currentPage:n},setStickyHeaderRow:!0,multiselect:T,extendToFullScreen:{rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}}),f===Go.RemoveFromLegalHold&&p?(0,i.jsx)(Wo,{userIdsToRemove:[p],allUserIds:S,legalHoldId:u,onDismiss:k,onSuccess:g}):null,f===Go.ReleaseLegalHold&&p?(0,i.jsx)(Ho,{userIdsToRemove:[p],legalHoldId:u,onDismiss:k,onSuccess:m}):null]})}const er=(0,v().YK)({members:{id:"settingsConsole.singleLegalHoldMembersTab.title",defaultMessage:"Hold Members"},membersLabel:{id:"settingsConsole.singleLegalHoldMembersTab.label",defaultMessage:"View members currently on hold."},placeholder:{id:"settingsConsole.singleLegalHoldMembersTab.search.placeholder",defaultMessage:"Search by member name or email."}}),tr=(0,v().YK)({name:{id:"settingsConsole.singleLegalHoldMembersTab.sort.name",defaultMessage:"Name"},role:{id:"settingsConsole.singleLegalHoldMembersTab.sort.role",defaultMessage:"Highest role"}}),ar=[{id:"actor",name:T().A.formatMessage(tr.name),type:"title"},{id:"role",name:T().A.formatMessage(tr.role),type:"text"}],sr=[...vn,{key:"guest",value:"guest",title:(0,i.jsx)(v().sA,{id:"legalHoldsMembers.table.filters.userRole.guest",defaultMessage:"Guest"})}];var nr=function(e){return e.AddMember="add-member",e.RemoveMember="remove-member",e.RemoveLastMembers="remove-last-members",e}(nr||{});function ir(e){let{legalHoldId:t,organizationId:a,setSelectedTab:n,refetchLegalHold:o}=e;const r=(0,v().tz)(),[l,d]=s.useState(),[c,u]=s.useState([]),[g,m]=s.useState([]),[p,h]=s.useState(void 0),[f,x]=s.useState(!1),[y,S]=s.useState(),[j,w]=s.useState(),[A,C]=s.useState(1),{members:I,guests:T,deletedMembersIds:k,allIdsInLegalHold:_,loading:D,refetch:z}=function(e){const t=(0,b().v3)(),{organizationId:a,legalHoldId:n,selectedSpaceIds:i,selectedUserRoles:o,query:r,sort:l}=e,{members:d,loading:c,refetch:u}=Di({legalHoldId:n}),g=d.join(","),m=i.join(","),p=o.join(","),h=function(e){if(e)return"actor"===e.propertyId?{columnName:"actor",direction:e.direction}:"role"===e.propertyId?{columnName:"role",direction:e.direction}:void 0}(l),f=null==h?void 0:h.columnName,x=null==h?void 0:h.direction,[{status:v,value:y}]=(0,Je().Yb)((async()=>{if(0===g.length||"guest"===p)return{members:[]};const e=g.split(","),s=m.length>0?m.split(","):void 0,n=p.length>0?p.split(","):void 0,i=null==n?void 0:n.filter((e=>"guest"!==e)),o=await M().callApi({eventName:"getMembersInOrganization",environment:t,data:{organizationId:a,filters:{userIds:e,spaceIds:s,roles:i},limit:e.length,query:r,sort:f&&x?{columnName:f,direction:x}:void 0}});if("success"===o.type)return{members:o.data.members};if("failed"===o.type)throw o.error;return(0,Rt().HB)(o)}),[t,a,g,m,p,r,f,x]),[{status:S,value:j}]=(0,Je().Yb)((async()=>{const e=g.split(","),s=m.length>0?m.split(","):void 0,n=await M().callApi({eventName:"getGuestsInOrganization",environment:t,data:{organizationId:a,filters:{userIds:e,spaceIds:s},limit:e.length,query:r}});if("success"===n.type)return n.data;if("failed"===n.type)throw n.error;return(0,Rt().HB)(n)}),[t,a,g,m,r]),w=(0,s.useMemo)((()=>(null==y?void 0:y.members)??[]),[y]),A=(0,s.useMemo)((()=>new Set(w.map((e=>e.userId)))),[w]),C=(0,s.useMemo)((()=>(null==j?void 0:j.guests.map((e=>({...e,lastActiveTime:(null==j?void 0:j.guestIdToLastActive[e.userId])??void 0}))).filter((e=>!A.has(e.userId))))??[]),[j,A]),I=0===i.length&&0===o.length&&!r,T=(0,s.useMemo)((()=>I?d.filter((e=>!w.some((t=>t.userId===e))&&!C.some((t=>t.userId===e)))):[]),[d,w,C,I]);return{loading:c||"pending"===v||"pending"===S,members:w,guests:C,deletedMembersIds:T,allIdsInLegalHold:d,refetch:u}}({organizationId:a,legalHoldId:t,selectedSpaceIds:g,selectedUserRoles:c,query:p,sort:null==j?void 0:j[0]}),P=zi({spaceStores:(0,ks().l)()}),N=(0,Hn().F)(),R=(0,s.useMemo)((()=>[...I.map((e=>({...e,type:"user"}))),...T.map((e=>({...e,type:"guest"}))),...k.map((e=>({type:"deleted",deletedMemberId:e})))]),[I,T,k]),{selectedIds:B,handleToggleId:L,handleSelectAllIds:E,handleUnselectAllIds:O}=Ot({allPossibleIds:_}),U=s.useCallback((async()=>{C(1),w(void 0),S(void 0),h(void 0),u([]),m([]),await z()}),[z]),F=s.useCallback((async()=>{await o(),n("general")}),[n,o]);return(0,i.jsxs)(ee,{children:[(0,i.jsx)(Va()._,{title:r.formatMessage(er.members),byline:r.formatMessage(er.membersLabel)}),(0,i.jsxs)("div",{style:N.tableHeader,children:[(0,i.jsxs)("div",{style:N.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:B.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(Fa,{itemsSelectedCount:B.length}),onClick:O}),(0,i.jsx)(Ua,{icon:js,title:(0,i.jsx)(v().sA,{id:"singleLegalHoldMembersTab.multiselect.removeFromLegalHold",defaultMessage:"Remove from legal hold"}),onClick:()=>{B.length===_.length?d(nr.RemoveLastMembers):d(nr.RemoveMember)}})]}),(0,i.jsx)(Wa().e,{preventMultipleSorts:!0,sortProperties:ar,isMenuOpen:f,setIsMenuOpen:x,onApply:e=>{x(!1),w(e),S(void 0),C(1)},currentSorts:y??j??[]}),(0,i.jsx)(fn,{setUserRoles:e=>{u(e),C(1)},selectedUserRoles:c,roles:sr}),(0,i.jsx)(Ui,{selectedSpaceIds:g,setSelectedSpaceIds:e=>{m(e),C(1)},spaceData:P})]}),(0,i.jsxs)("div",{style:N.rightContent,children:[(0,i.jsx)(Ha().x,{appliedSorts:j,openSortPillMenu:e=>{e&&S([{propertyId:e,direction:"ascending"}]),x(!0)},sortProperties:ar}),(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:p,setQueryFilter:e=>{h(e),C(1)},placeholderText:r.formatMessage(er.placeholder)}),(0,i.jsx)(H().A,{onClick:()=>{d(nr.AddMember)},disabled:D,children:(0,i.jsx)(v().sA,{id:"legalHoldsMembers.button.addMember",defaultMessage:"Add member"})})]})]}),(0,i.jsx)(Jo,{data:R,loading:D,currentPage:A,setCurrentPage:C,selectedIds:B,onSelectAll:E,onUnselectAll:O,onSelectRow:L,legalHoldId:t,onRemoveMembersSuccess:U,onRemoveLastMembersSuccess:F}),l===nr.AddMember?(0,i.jsx)(Vo,{onDismiss:()=>d(void 0),onSuccess:U,legalHoldId:t,organizationId:a,userIdsAlreadyInLegalHold:_}):null,l===nr.RemoveMember?(0,i.jsx)(Wo,{onDismiss:()=>d(void 0),onSuccess:U,legalHoldId:t,userIdsToRemove:B,allUserIds:_}):null,l===nr.RemoveLastMembers?(0,i.jsx)(Ho,{onDismiss:()=>d(void 0),onSuccess:F,legalHoldId:t,userIdsToRemove:B}):null]})}var or=()=>a(406533),rr=()=>a(42583),lr=()=>a(802790),dr=()=>a(249117);function cr(e){let{iconFunction:t,label:a,value:s,disabled:n}=e;const o=(0,v().tz)(),r=(0,j().IS)((e=>({label:{color:e.mediumTextColor,minWidth:140,display:"flex",flexDirection:"row",gap:6,opacity:n?.3:1,alignItems:"center"},value:{color:e.regularTextColor,overflow:"hidden",opacity:n?.3:1},icon:{width:16,height:16}})),[n]);return(0,i.jsxs)(ne().fI,{gap:4,alignItems:"center",height:"100%",children:[(0,i.jsxs)("div",{style:r.label,children:[t(r.icon),(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",children:o.formatMessage(a)})]}),(0,i.jsx)(D().D,{styleName:"Body-14px/Regular",style:r.value,children:s})]})}function ur(e){let{startDate:t,endDate:a}=e;return void 0===t?null:(0,i.jsx)(v().sA,{id:"legalHold.general.holdRange",defaultMessage:"{startDate} - {endDate}",values:{startDate:(0,i.jsx)(v().XU,{value:t,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}),endDate:a?(0,i.jsx)(v().XU,{value:a,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}):(0,i.jsx)(v().sA,{id:"legalHold.general.holdRange.ongoing",defaultMessage:"Ongoing"})}})}var gr=()=>a(379951);function mr(e,t){if(t)return{pointer:{table:gr().PX,id:e},icon:t}}function pr(e){let{legalHoldId:t,legalHoldName:a,legalHoldIcon:s,size:n=Qn().tR,emojiSize:o=Qn().Gz}=e;const r=mr(t,s);return(0,i.jsx)(E().A,{size:n,emojiSize:o,disabled:!0,icon:r,isEmptyPage:!1,title:a,isLarge:!0,isRaw:!1})}function hr(e){let{userIds:t,totalCount:a}=e;const s=(0,b().v3)(),n=(0,S().K8)((()=>t.map((e=>new(_().LU)(s,{table:w().oo,id:e})))),[t,s]);return(0,i.jsx)(Pn().l,{userStores:n,useSecondaryColorTitle:!0,totalCount:a,useIconsOnly:!0})}function fr(e){let t,a,s,{status:n}=e;switch(n){case"active":t=(0,i.jsx)(v().sA,{id:"legalHoldsTable.status.active",defaultMessage:"Active"}),a="yellow",s=co().XA.light.yellow[100];break;case"released":t=(0,i.jsx)(v().sA,{id:"legalHoldsTable.status.released",defaultMessage:"Released"}),s=co().XA.light.gray[100],a="gray";break;default:(0,Rt().HB)(n)}return(0,i.jsx)(jt().A,{format:ut().NY.Medium,value:t,isSingle:!0,showRemoveButton:!1,isRound:!0,backgroundColor:s,showColoredDot:a})}var xr=()=>a(985405);function vr(e){let{workspaceIds:t,totalCount:a}=e;const n=(0,b().v3)(),{organizationOwnerRecordCache:o}=(0,s.useContext)(P().N),r=(0,S().K8)((()=>t.map((e=>new(xr().S)(n,{table:na().NX,id:e},{inMemoryRecordCache:o})))),[t,n,o]);return(0,i.jsx)(J().$,{spaceStores:r,totalCount:a,showTooltip:!0,isLoading:!1})}function yr(e){let{onDismiss:t,onSubmit:a}=e;const n=(0,v().tz)(),[o,r]=(0,s.useState)(!1),[l,d]=(0,s.useState)(!1),c=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:440,display:"flex",flexDirection:"column",alignItems:"center"},confirmationContainer:{display:"flex",gap:10,alignItems:"center"}})),[]);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:t,render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:(0,it().J)(c.icon),title:n.formatMessage(br.title),byline:n.formatMessage(br.byline)}),footer:(0,i.jsx)(K().jl,{primaryText:n.formatMessage(br.buttonText),primaryAction:async()=>{r(!0),await async function(){await a(),t()}(),r(!1)},primaryDisabled:o||!l,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.destructiveUserAction.cancelButton",defaultMessage:"Cancel"}),secondaryAction:t,isDarkRed:!0}),children:(0,i.jsx)("div",{style:c.container,children:(0,i.jsxs)("div",{style:c.confirmationContainer,children:[(0,i.jsx)(rt().A,{checked:l,size:14,checkSize:10,onClick:()=>d(!l)}),(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:n.formatMessage(br.confirmationText)})]})})})})}const br=(0,v().YK)({title:{id:"orgConsole.legalHolds.modal.releaseLegalHold.title",defaultMessage:"Are you sure you want to release this hold?"},byline:{id:"orgConsole.legalHolds.modal.releaseLegalHold.byline",defaultMessage:"This action is final and any members and pages deleted after release will be permanently deleted."},confirmationText:{id:"orgConsole.legalHolds.modal.releaseLegalHold.confirmationText",defaultMessage:"I understand the actions of releasing legal hold"},buttonText:{id:"orgConsole.legalHolds.modal.releaseLegalHold.buttonText",defaultMessage:"Release legal hold"}});var Sr=()=>a(843189);function jr(e){let{onClick:t}=e;return(0,i.jsx)(Sr().E,{color:"uiRed",onClick:t,children:(0,i.jsx)(v().sA,{id:"legalHold.general.release.button",defaultMessage:"Release legal hold"})})}const wr=(0,v().YK)({holdRangeLabel:{id:"legalHold.general.details.holdRange",defaultMessage:"Hold from"},holdRangeLabelViewedFrom:{id:"legalHold.general.details.holdRange.viewedFrom",defaultMessage:"Viewed from"},holdRangeLabelEditedFrom:{id:"legalHold.general.details.holdRange.editedFrom",defaultMessage:"Edited from"},holdRangeLabelCreatedFrom:{id:"legalHold.general.details.holdRange.createdFrom",defaultMessage:"Created from"},createdByLabel:{id:"legalHold.general.details.createdBy",defaultMessage:"Created by"},workspacesLabel:{id:"legalHold.general.details.workspaces",defaultMessage:"Workspaces"},createdAtLabel:{id:"legalHold.general.details.createdAt",defaultMessage:"Created at"},manageLegalHoldTitle:{id:"legalHold.general.manage.title",defaultMessage:"Manage legal hold"},releaseLegalHoldLabel:{id:"legalHold.general.release.label",defaultMessage:"Release legal hold"},releaseLegalHoldDescription:{id:"legalHold.general.release.description",defaultMessage:"By releasing this legal hold, pages that are past their retention period will be deleted. This action can not be undone."},disabledTooltipText:{id:"legalHold.general.edit.disabledTooltipText",defaultMessage:"This legal hold has been released and cannot be edited."}}),Ar={"page.viewed":(0,i.jsx)(v().sA,{id:"legalHold.general.pages.tooltip.viewed",defaultMessage:"The associated page count will change over time for ongoing legal holds as users view more pages"}),"page.edited":(0,i.jsx)(v().sA,{id:"legalHold.general.pages.tooltip.edited",defaultMessage:"The associated page count will change over time for ongoing legal holds as users edit more pages"}),"page.created":(0,i.jsx)(v().sA,{id:"legalHold.general.pages.tooltip.created",defaultMessage:"The associated page count will change over time for ongoing legal holds as users create more pages"})};function Mr(e){let{createdBy:t}=e;const a=(0,b().v3)(),s=(0,S().K8)((()=>{if(t)return new(ft().L)(a,{table:w().oo,id:t})}),[t,a]);return s?(0,i.jsx)(Pn().l,{userStores:[s]}):null}function Cr(e){let{legalHoldId:t,setSelectedTab:a,legalHold:n,loading:o,refetchLegalHold:r}=e;const l=(0,v().tz)(),[d,c]=(0,s.useState)(""),[u,g]=(0,s.useState)(""),[m,p]=(0,s.useState)(!1),{updateLegalHold:h}=lo(),{name:f,description:y,icon:b}=n??{},S=(0,j().IS)((e=>({icon:{height:16,width:16,fill:e.mediumTextColor}})),[]);(0,s.useEffect)((()=>{f&&c(f),y&&g(y)}),[f,y]);const{longTallShimmer:w,longShimmer:A,shortShimmer:M}=(0,le().Z)(),C=mr(t,null==n?void 0:n.icon),I=(0,s.useCallback)((e=>{g(e||"")}),[g]),T=(0,s.useCallback)((e=>{c(e||"")}),[c]),k=(0,s.useCallback)((()=>{c(f||""),g(y||"")}),[f,y]),_=(0,s.useCallback)((async e=>{const a=await h({legalHoldId:t,icon:e});a.icon&&a.icon!==b&&await r()}),[t,h,r,b]),z=(0,s.useCallback)((()=>{p(!0)}),[]),P=(0,s.useCallback)((async()=>{await h({legalHoldId:t,status:"released"}),await r()}),[t,h,r]),N=(0,s.useMemo)((()=>{var e,t;return null!=n&&n.userInteractionType?null!=n&&null!==(e=n.userInteractionType)&&void 0!==e&&e.includes("page.viewed")?wr.holdRangeLabelViewedFrom:null!=n&&null!==(t=n.userInteractionType)&&void 0!==t&&t.includes("page.edited")?wr.holdRangeLabelEditedFrom:wr.holdRangeLabelCreatedFrom:wr.holdRangeLabel}),[null==n?void 0:n.userInteractionType]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z,{}),(0,i.jsxs)(ee,{children:[(0,i.jsx)(X,{title:(0,i.jsx)(v().sA,{id:"legalHold.general.edit.title",defaultMessage:"Edit legal hold details"}),byline:(0,i.jsx)(v().sA,{id:"legalHold.general.edit.byline",defaultMessage:"Edit this legal hold's name below. Changes will take effect immediately upon saving."}),icon:gn().u,localIconWithPointer:C,onSave:async()=>{const e=await h({legalHoldId:t,name:""===d?void 0:d,description:""===u?void 0:u});e.name&&e.name!==d&&c(e.name),e.description&&e.description!==u&&g(e.description),await r()},onCancel:k,onNameChange:T,onIconChange:_,entityName:(null==n?void 0:n.name)||"",disabled:"released"===(null==n?void 0:n.status),disabledTooltipText:l.formatMessage(wr.disabledTooltipText),entityDescription:(0,i.jsxs)(ne().VP,{marginTop:2,alignItems:"flex-start",gap:12,children:[o?(0,i.jsx)(re().A,{style:M}):n&&(0,i.jsx)(fr,{status:n.status}),o?(0,i.jsx)(re().A,{style:A}):n&&(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:n.description})]}),onDescriptionChange:I,entityDescriptionText:null==n?void 0:n.description}),(0,i.jsxs)(ne().VP,{gap:40,children:[(0,i.jsxs)(dr().xA,{gap:12,children:[(0,i.jsx)(dr().LX,{row:1,col:1,children:(0,i.jsx)(cr,{iconFunction:rr().D,label:N,value:(0,i.jsx)(ur,{startDate:null==n?void 0:n.startDate,endDate:null==n?void 0:n.endDate})},"holdRange")}),(0,i.jsx)(dr().LX,{row:1,col:2,children:(0,i.jsx)(cr,{iconFunction:gn().u,label:wr.createdByLabel,value:(0,i.jsx)(Mr,{createdBy:null==n?void 0:n.createdBy})},"createdBy")}),(0,i.jsx)(dr().LX,{row:2,col:1,children:(0,i.jsx)(cr,{iconFunction:x().V,label:wr.workspacesLabel,value:(0,i.jsx)(vr,{workspaceIds:(null==n?void 0:n.workspaces.ids)||[],totalCount:(null==n?void 0:n.workspaces.total)||0})},"workspaces")}),(0,i.jsx)(dr().LX,{row:2,col:2,children:(0,i.jsx)(cr,{iconFunction:rr().D,label:wr.createdAtLabel,value:(0,i.jsx)(v().XU,{value:null==n?void 0:n.createdTime,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})},"createdAt")})]}),(0,i.jsxs)(ne().fI,{gap:12,wrap:"wrap",children:[(0,i.jsx)(te().A,{isLoading:o,headerText:(0,i.jsx)(v().sA,{id:"legalHold.general.members.title",defaultMessage:"Members on hold"}),mainText:n?(0,i.jsx)(v().sA,{id:"legalHold.general.members.count",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:n.users.total}}):(0,i.jsx)(re().A,{style:w}),bottom:(0,i.jsx)(hr,{userIds:(null==n?void 0:n.users.ids)||[],totalCount:(null==n?void 0:n.users.total)||0}),onClick:()=>{a("members")}}),(0,i.jsx)(te().A,{disabled:"active"!==(null==n?void 0:n.status),isLoading:o,headerText:(0,i.jsxs)(ne().fI,{gap:4,children:[(0,i.jsx)(v().sA,{id:"legalHold.general.pages.title",defaultMessage:"Associated pages"}),"active"===(null==n?void 0:n.status)&&(0,i.jsx)(q().A,{style:{width:238},textWrap:!0,renderTooltip:()=>null!=n&&n.userInteractionType?Ar[n.userInteractionType[0]]:null,render:e=>(0,i.jsx)("div",{...e,children:(0,or().T)(S.icon)})})]}),mainText:n?(0,i.jsx)(v().sA,{id:"legalHold.general.pages.count",defaultMessage:"{pageCount, plural, one {{pageCount} page} other {{pageCount} pages}}",values:{pageCount:n.pages.total}}):(0,i.jsx)(re().A,{style:w}),bottom:(0,i.jsx)(Ir,{pages:(null==n?void 0:n.pages.ids)||[],totalCount:(null==n?void 0:n.pages.total)||0,isLoading:o}),onClick:()=>{a("browse_content")}})]}),"active"===(null==n?void 0:n.status)&&(0,i.jsxs)("div",{children:[(0,i.jsx)(lr().A,{size:1}),(0,i.jsx)(ie,{title:l.formatMessage(wr.manageLegalHoldTitle),content:(0,i.jsx)(Ae().y,{title:l.formatMessage(wr.releaseLegalHoldLabel),byline:l.formatMessage(wr.releaseLegalHoldDescription),item:(0,i.jsx)(jr,{onClick:z})})})]})]}),m&&(0,i.jsx)(yr,{onDismiss:()=>p(!1),onSubmit:P})]})]})}function Ir(e){let{pages:t,totalCount:a,isLoading:n}=e;const o=(0,b().v3)(),{organizationOwnerRecordCache:r}=(0,s.useContext)(P().N),l=(0,S().K8)((()=>t.map((e=>new(Ti().B)(o,{table:aa().ev,id:e},{inMemoryRecordCache:r})))),[t,o,r]);return(0,i.jsx)(J().ng,{blockStores:l,totalCount:a,showTooltip:!0,isLoading:n})}var Tr=()=>a(280335),kr=()=>a(532940),_r=()=>a(179030);function Dr(e){let{organizationStore:t,userStore:a,groupStore:n,onDismiss:o,onCloseOuterModal:r}=e;const l=(0,b().v3)(),d=(0,v().tz)(),{updateCacheWithRecordMap:c}=(0,s.useContext)(P().N),{userData:u}=Co({userStore:a,organizationStore:t}),g=(0,S().K8)((()=>{var e;const t=n.getSpaceId();return t?null===(e=u.userSpaceAccessMap.get(t))||void 0===e?void 0:e.role:void 0}),[u,n]),m=(0,S().K8)((()=>{var e;return null===(e=n.getSpaceStore())||void 0===e?void 0:e.getName()}),[n]),p=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:480}})),[]);const[h,f]=(0,s.useState)(!1);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:(0,kr().q)(p.icon),title:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.modal.title",defaultMessage:"Are you sure you want to delete this group?"}),byline:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.modal.byline",defaultMessage:"Deleting this group will remove member access to pages and teamspaces. Any pages that are private to this group will be transferred to you."})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.modal.primaryAction",defaultMessage:"Delete group"}),primaryAction:async()=>{f(!0),await async function(){const e=n.getSpaceId(),a=n.getGroupId();if(!e||!a)return;const s=await M().callApi({eventName:"deleteGroupsInOrganizationSpace",environment:l,data:{organizationId:t.id,spaceId:e,groupIds:[a]}});"success"===s.type?(c({data:s.data}),o(),r(),(0,pe().u4)({environment:l,event:{eventName:"org_console_delete_group_in_space",eventProperties:{organization_id:t.id,space_id:e}}})):C().f1((0,I().Hu)(d,s))}(),f(!1)},primaryDisabled:h,secondaryText:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:o,isLightRed:!0}),children:(0,i.jsx)("div",{style:p.container,children:"editor"!==g?(0,i.jsx)(_r().l,{display:"inline",tint:"gray",iconGroup:Tr().Z,label:(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",children:m?(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.modal.notInWorkspaceWarning",defaultMessage:"<b>You are not an owner of this workspace</b>. By deleting this group you will join the <b>{workspaceName}</b> workspace as workspace owner.",values:{b:e=>(0,i.jsx)("b",{children:e}),workspaceName:m}}):(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.modal.notInWorkspaceWarningNoName",defaultMessage:"<b>You are not an owner of this workspace</b>. By deleting this group you will join this group's workspace as workspace owner.",values:{b:e=>(0,i.jsx)("b",{children:e})}})})}):null})})})}function zr(e){let{organizationId:t,membersState:a,teamsState:n,groupStore:o,setSelectedTab:r,onCloseModal:l}=e;const d=(0,b().v3)(),c=(0,v().tz)(),{updateCacheWithRecordMap:u}=(0,s.useContext)(P().N),g=(0,j().IS)((e=>({tilesContainer:{display:"flex",gap:12,flexWrap:"wrap"},dotSeparator:{margin:"0 4px"},divider:{color:e.stroke.secondary}})),[]),[p,h]=(0,s.useState)(""),f=(0,S().K8)((()=>o.getName()),[o]),x=(0,S().K8)((()=>o.getIcon()),[o]);return(0,s.useEffect)((()=>{h(f||"")}),[f]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z,{}),(0,i.jsxs)(ee,{children:[(0,i.jsx)(X,{title:(0,i.jsx)(v().sA,{id:"organization.general.organization.group.title",defaultMessage:"Edit group details"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.organization.group.byline",defaultMessage:"Edit this group's name below. Changes will take effect immediately upon saving."}),icon:m().F,onSave:async function(){if(p===f)return;const e=o.getSpaceId(),a=o.getGroupId();if(!e||!a)return;const s=await M().callApi({eventName:"updateGroupsInOrganizationSpace",environment:d,data:{organizationId:t,spaceId:e,groupIds:[a],name:p}});"success"===s.type?(u(s),(0,pe().u4)({environment:d,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:e,update_type:"name"}}})):C().f1((0,I().Hu)(c,s))},onCancel:function(){h(f||"")},onIconChange:async function(e){const a=o.getSpaceId(),s=o.getGroupId();if(!a||!s)return;const n=await M().callApi({eventName:"updateGroupsInOrganizationSpace",environment:d,data:{organizationId:t,spaceId:a,groupIds:[s],icon:e}});"success"===n.type?(u(n),(0,pe().u4)({environment:d,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:a,update_type:"icon"}}})):C().f1((0,I().Hu)(c,n))},onNameChange:e=>h(e||""),localIconWithPointer:x?{pointer:o.pointer,icon:x}:void 0,entityName:f||"",entityDescription:(0,i.jsxs)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:[(0,i.jsx)(ue().Qq,{memberCount:a.members.length}),(0,i.jsx)(z().A,{style:g.dotSeparator}),(0,i.jsx)(ue().tL,{teamCount:n.teamStores.length})]})}),(0,i.jsxs)("div",{style:g.tilesContainer,children:[(0,i.jsx)(ce,{memberCount:a.members.length,sampleMemberUserStores:a.members.slice(0,5),onClick:()=>r("members"),isLoading:a.loading}),(0,i.jsx)(te().A,{isLoading:n.loading,headerText:(0,i.jsx)(v().sA,{id:"organization.group.teamspace.title",defaultMessage:"Associated teamspaces"}),mainText:(0,i.jsx)(v().sA,{id:"organization.group.teamspace.count",defaultMessage:"{teamspaceCount, plural, one {{teamspaceCount} teamspace} other {{teamspaceCount} teamspaces}}",values:{teamspaceCount:n.teamStores.length}}),bottom:(0,i.jsx)(J().tv,{teamStores:n.teamStores,isLoading:n.loading}),onClick:()=>r("teamspaces")})]}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.title",defaultMessage:"Manage group"}),content:(0,i.jsxs)(Se().L,{children:[(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.createTeamspace.title",defaultMessage:"Create teamspace"}),byline:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.createTeamspace.byline",defaultMessage:"Create a new teamspace using the information and members from this group."}),item:(0,i.jsx)(Pr,{organizationId:t,groupStore:o})}),(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.title",defaultMessage:"Delete group"}),byline:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.byline",defaultMessage:"Remove this group from the workspace permanently."}),item:(0,i.jsx)(Nr,{organizationId:t,groupStore:o,onCloseModal:l})})]})})]})]})}function Pr(e){const{organizationId:t,groupStore:a}=e,[n,o]=(0,s.useState)(!1),r=(0,_a().E)({organizationId:t}),l=(0,S().K8)((()=>{const e=a.getGroupId();return e?{type:"owner",entity_type:"group",group_id:e}:void 0}),[a]),d=(0,S().K8)((()=>a.getSpaceStore()),[a]);return r&&d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V().A,{size:"md",onClick:()=>{qn().A.setState({...qn().A.state,name:a.getName()||""}),o(!0)},children:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.createTeamspace.button",defaultMessage:"Create teamspace"})}),n?(0,i.jsx)(Kn,{organizationId:t,spaceStore:d,onDismiss:()=>o(!1),owner:l}):null]}):null}function Nr(e){const{organizationId:t,groupStore:a,onCloseModal:n}=e,o=(0,b().v3)(),[r,l]=(0,s.useState)(!1),d=(0,_a().E)({organizationId:t}),c=(0,S().K8)((()=>{if(ve().default.state.currentUserStore)return new(_().LU)(o,{table:w().oo,id:ve().default.state.currentUserStore.id})}),[o]);return d&&c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Sr().E,{color:"uiRed",onClick:()=>l(!0),children:(0,i.jsx)(v().sA,{id:"organization.group.settings.manageGroup.delete.button",defaultMessage:"Delete group"})}),r?(0,i.jsx)(Dr,{organizationStore:d,userStore:c,groupStore:a,onCloseOuterModal:n,onDismiss:()=>{l(!1)}}):null]}):null}function Rr(e){let{organizationId:t,onDismiss:a,groupStore:n,userIds:o}=e;const r=(0,b().v3)(),l=(0,v().tz)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(P().N),[c,u]=(0,s.useState)(!1),g=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:540}})),[]);async function m(){u(!0);const e=n.getSpaceId(),s=n.getGroupId();if(!e||!s)return void u(!1);const i=await M().callApi({eventName:"updateGroupsInOrganizationSpace",environment:r,data:{organizationId:t,spaceId:e,groupIds:[s],removeMembers:o}});"success"===i.type?(d({data:i.data}),a(),u(!1),(0,pe().u4)({environment:r,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:e,update_type:"remove_members"}}})):C().f1((0,I().Hu)(l,i))}return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(F().tf,{showDismissButton:!1,header:(0,i.jsx)(K().rQ,{icon:js(g.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToGroupModal.title",defaultMessage:"Remove members from group"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToGroupModal.byline",defaultMessage:"Confirm that you want to remove <bold>{count} {count, plural, one {user} other {users}}</bold> from this group, revoking access to all content that this group owns.",values:{count:o.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToGroupModal.button.remove",defaultMessage:"Remove {count, plural, one {user} other {users}}",values:{count:o.length}}),primaryAction:m,primaryDisabled:c,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removeUsersToGroupModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:g.content,children:(0,i.jsx)(Ps,{userIds:o})})})})}const Br=(0,v().YK)({name:{id:"organization.group.members.nameColumn.header",defaultMessage:"Name"},email:{id:"organization.group.members.emailColumn.header",defaultMessage:"Email"},role:{id:"organization.group.members.roleColumn.header",defaultMessage:"Role"}}),Lr={id:"name",headerTitle:(0,i.jsx)(v().sA,{...Br.name}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(ua,{userId:e.userId}),widthData:{widthPercent:33,minWidth:100},sortable:!1},Er={id:"email",headerTitle:(0,i.jsx)(v().sA,{...Br.email}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)(ws().xF,{userId:e.userId,styles:{overflow:"hidden"}}),widthData:{widthPercent:33,minWidth:100},sortable:!1},Or={id:"role",headerTitle:(0,i.jsx)(v().sA,{...Br.role}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:120}}):function(e){let t=(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.member",defaultMessage:"Member"});switch(e){case"owner":t=(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.owner",defaultMessage:"Workspace owner"});break;case"membership_admin":t=(0,i.jsx)(v().sA,{id:"organization.workspace.members.roleColumn.membershipAdmin",defaultMessage:"Membership admin"})}return(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t})}(e.role),widthData:{widthPercent:33,minWidth:100},sortable:!1},Ur=[{id:Lr.id,name:T().A.formatMessage(Br.name),type:"title"},{id:Er.id,name:T().A.formatMessage(Br.email),type:"title"},{id:Or.id,name:T().A.formatMessage(Br.role),type:"title"}],Fr=[Lr,Er,Or];var Vr=function(e){return e.AddToGroup="add-to-group",e.RemoveFromGroup="remove-from-group",e}(Vr||{});function Hr(e){let{organizationId:t,groupStore:a,onCloseModal:n,membersState:o}=e;const{organizationMemberEmailDomains:r}=(0,s.useContext)(N().D),l=(0,v().tz)(),d=(0,S().K8)((()=>a.getSpaceId()),[a]),c=(0,Hn().F)(),u=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:Fr,theme:e,containerMarginTop:0})),[]),g=(0,S().K8)((()=>o.members.map((e=>({type:Xt().T.OrganizationGroupMember,id:e.id,name:e.getDisplayName(l),email:e.getEmail(),role:Nn(e.getRole()),userId:e.id,isClickable:!0})))),[o,l]),[p,h]=(0,s.useState)(),[f,x]=(0,s.useState)({}),[y,b]=(0,s.useState)(),[w,A]=(0,s.useState)(!1),[M,C]=(0,s.useState)(),I=M??y??[],T=(0,s.useMemo)((()=>{if(!g)return[];let e=g;return f.query&&(e=(0,mt().Ay)(f.query,e,(e=>e.name))),f.emailDomains&&f.emailDomains.length>0&&(e=e.filter((e=>{var t;const a=e.email?(0,gt().zN)(e.email):void 0;return!!a&&(null===(t=f.emailDomains)||void 0===t?void 0:t.includes(a))}))),f.roles&&f.roles.length>0&&(e=e.filter((e=>{var t;const a=e.role;return!!a&&(null===(t=f.roles)||void 0===t?void 0:t.includes(a))}))),function(e){const{rows:t,appliedSorts:a}=e,s=null!=a&&a.length?a:[{propertyId:Or.id,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===Er.id?"email":t===Or.id?Rn:t===Lr.id?"name":Rn})),i=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Rt().HB)(t)}));return(0,Ze().My)(t,n,i)}({rows:e,appliedSorts:y})}),[g,f.roles,f.emailDomains,f.query,y]),k=Math.max(1,Math.ceil(T.length/et().q)),[_,D]=(0,s.useState)(0),z=T.slice(_*et().q,(_+1)*et().q),P=et().q*(_+1)<T.length,R=_>0;const{selectedRows:B,handleToggleRow:L,handleSelectAllRows:E,handleUnselectAllRows:O}=Ut({allPossibleRows:z});return!o.loading&&o.error?(0,i.jsx)(Qt,{error:o.error}):(0,i.jsxs)(ee,{children:[(0,i.jsx)(Va()._,{title:(0,i.jsx)(v().sA,{id:"organization.groups.modal.members.title",defaultMessage:"Members"}),byline:(0,i.jsx)(v().sA,{id:"organization.groups.modal.members.byline",defaultMessage:"Add and remove members from this group to manage access across this workspace."})}),(0,i.jsxs)("div",{style:c.tableHeader,children:[(0,i.jsxs)("div",{style:c.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:B.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(v().sA,{id:"organization.group.membersTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:B.length}}),onClick:O}),(0,i.jsx)(Ua,{icon:js,title:(0,i.jsx)(v().sA,{id:"organization.group.membersTable.multiselect.remove",defaultMessage:"Remove from group"}),onClick:()=>h(Vr.RemoveFromGroup)})]}),(0,i.jsx)(Vn().A,{children:(0,i.jsx)(Wa().e,{sortProperties:Ur,isMenuOpen:w,setIsMenuOpen:A,onApply:e=>{A(!1),b(e),C(void 0)},currentSorts:I})}),I.length>0?(0,i.jsx)(Fn().he,{}):null,(0,i.jsx)($s,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.filters.email.title",defaultMessage:"Email"}),emailDomains:r,selectedEmailDomains:f.emailDomains||[],setSelectedEmailDomains:e=>{x((t=>({...t,emailDomains:e})))}}),(0,i.jsx)(fn,{setUserRoles:e=>x((t=>({...t,roles:e}))),selectedUserRoles:f.roles||[],roles:xn})]}),(0,i.jsxs)("div",{style:c.rightContent,children:[(0,i.jsx)(Ha().x,{appliedSorts:y,openSortPillMenu:e=>{e&&C([{propertyId:e,direction:"ascending"}]),A(!0)},sortProperties:Ur}),(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:f.query,setQueryFilter:e=>{x((t=>({...t,query:e})))}}),(0,i.jsx)(H().A,{onClick:()=>{h(Vr.AddToGroup)},children:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.button.addMembers",defaultMessage:"Add members"})})]})]}),p===Vr.RemoveFromGroup?(0,i.jsx)(Rr,{organizationId:t,onDismiss:()=>{h(void 0),O()},groupStore:a,userIds:B.map((e=>e.userId))}):null,p===Vr.AddToGroup&&d?(0,i.jsx)(La,{organizationId:t,onDismiss:()=>{h(void 0),O()},spaceId:d,groupStore:a}):null,(0,i.jsx)(Bt().WE,{hideHeaderRowPadding:!0,rows:o.loading?(0,Xt().n)():z,columnRenderInfo:Fr,styles:u,onRowClick:e=>{e.type!==Xt().T.Loading&&L(e)},renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:m().F,title:(0,i.jsx)(v().sA,{id:"membersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(v().sA,{id:"membersTable.empty.byline",defaultMessage:"There are no members that match this query."})}),showRowBorders:!0,multiselect:{header:{isDisabled:o.loading,isSelected:z.length>0&&B.length===z.length,onClick:()=>{B.length===z.length?O():E()}},row:{getDisabledState:()=>o.loading,getSelectedState:e=>B.some((t=>t.id===e.id)),onClick:e=>{e.type!==Xt().T.Loading&&L(e)}}},loadMoreMethod:{type:"pages",onLoadNext:()=>{D((e=>P?e+1:e)),O()},onLoadPrevious:()=>{D((e=>Math.max(e-1,0))),O()},hasNextPage:P,hasPrevPage:R,currentPage:_+1,finalPage:k}})]})}function Wr(e){let{organizationId:t,onDismiss:a,groupStore:n,spaceStore:o,pageIds:r,removePagesFromGroup:l}=e;const d=(0,b().v3)(),c=(0,v().tz)(),{updateCacheWithRecordMap:u}=(0,s.useContext)(P().N),[g,m]=(0,s.useState)(!1),p=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:440}})),[]);async function h(){m(!0);const e=n.getSpaceId(),s=n.getGroupId();if(!e||!s)return void m(!1);const i=await M().callApi({eventName:"updateGroupsInOrganizationSpace",environment:d,data:{organizationId:t,spaceId:e,groupIds:[s],removePages:r}});if("success"!==i.type)return C().f1((0,I().Hu)(c,i)),void m(!1);u({data:i.data}),l(s,r),a(),m(!1),(0,pe().u4)({environment:d,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:e,update_type:"remove_from_page"}}})}return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(F().tf,{showDismissButton:!1,header:(0,i.jsx)(K().rQ,{icon:js(p.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.title",defaultMessage:"Remove group from pages"}),byline:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.byline",defaultMessage:"Confirm that you want to remove this group from <bold>{count, plural, one {this page} other {these pages}} {count}</bold>, revoking this group’s access to that content.",values:{count:r.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.button.remove",defaultMessage:"Remove {count, plural, one {page} other {pages}}",values:{count:r.length}}),primaryAction:h,primaryDisabled:g,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:p.content,children:(0,i.jsx)(qr,{pageIds:r,spaceStore:o})})})})}function qr(e){const{pageIds:t,spaceStore:a}=e,n=(0,v().tz)(),o=sa({blockIds:t}),[r,l]=(0,s.useState)(""),d=(0,S().K8)((()=>o.map((e=>{var t,s;return{id:e.id,icon:(0,i.jsx)(E().A,{icon:null===(t=e.getModel())||void 0===t?void 0:t.getRenderIcon({getRecordModel:e.getRecordModel}),size:20,isEmptyPage:!1,disabled:!0}),name:null===(s=e.getModel())||void 0===s?void 0:s.getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:(0,Oe().P)(),intl:n}),caption:(0,Ki().q7)({blockStore:e,spaceStore:a,intl:n})}}))),[o,a,n]),c=(0,mt().Ay)(r,d,(e=>e.name??""));return(0,i.jsx)(K().p6,{items:c,titleText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.pagesList.title",defaultMessage:"Selected pages"}),headerText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.pagesList.header",defaultMessage:"Page"}),headerAction:(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:r,setQueryFilter:l})})}const Gr=(0,v().YK)({name:{id:"organization.group.pages.pageColumn.header",defaultMessage:"Page"},createdBy:{id:"organization.group.pages.createdByColumn.header",defaultMessage:"Created by"},createdOn:{id:"organization.group.pages.createdOnColumn.header",defaultMessage:"Created on"},audience:{id:"organization.group.pages.audienceColumn.header",defaultMessage:"Audience"}}),Kr={id:"name",headerTitle:(0,i.jsx)(v().sA,{...Gr.name}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(Ki().oc,{useThinTitle:!0,blockStore:e.blockStore,parentSpaceStore:e.spaceStore}),widthData:{widthPercent:30,minWidth:130},sortable:!1},Yr={id:"createdBy",headerTitle:(0,i.jsx)(v().sA,{...Gr.createdBy}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)(qi().T,{blockStore:e.blockStore,userIds:e.createdById?[e.createdById]:[]}),widthData:{widthPercent:18,minWidth:75},sortable:!1},Qr={id:"createdOn",headerTitle:(0,i.jsx)(v().sA,{...Gr.createdOn}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)(Gi().d,{useSecondaryColorTitle:!0,dateTs:e.createdOn}),widthData:{widthPercent:18,minWidth:75},sortable:!1},$r={id:"audience",headerTitle:(0,i.jsx)(v().sA,{...Gr.audience}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:120}}):(0,i.jsx)(Hi().b,{useSecondaryColorTitle:!0,blockStore:e.blockStore,spaceStore:e.spaceStore}),widthData:{widthPercent:18,minWidth:75},sortable:!1},Xr=[{id:Kr.id,name:T().A.formatMessage(Gr.name),type:"title"},{id:Yr.id,name:T().A.formatMessage(Gr.createdBy),type:"person"},{id:Qr.id,name:T().A.formatMessage(Gr.createdOn),type:"date"}],Zr=[Kr,Yr,Qr,$r];var Jr=function(e){return e.RemoveGroupFromPage="remove-from-group",e}(Jr||{});function el(e){let{organizationId:t,groupStore:a,groupPageStores:n,removePagesFromGroup:o}=e;const r=ia({spaceId:(0,S().K8)((()=>a.getSpaceId()),[a])}),d=(0,Hn().F)(),c=(0,qt().A)(),u=(0,j().IS)((e=>{const t=(0,Bt().rC)({columnRenderInfo:Zr,theme:e,containerMarginTop:0});return{...t,container:{...t.container,width:"calc(100% + 56px)"}}}),[]),g=Zr.map((e=>({...e,headerStyle:c.tableHeader,rowStyle:c.tableRow}))),m=(0,S().K8)((()=>n.map((e=>{var t;return{type:Xt().T.OrganizationGroupPage,id:e.id,title:null===(t=e.getModel())||void 0===t?void 0:t.getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:(0,Oe().P)(),intl:T().A.getIntl()}),blockId:e.id,blockStore:e,spaceStore:r,createdOn:e.getCreatedTime(),createdById:e.getCreatedById(),isClickable:!0}}))),[n,r]),p=(0,S().K8)((()=>(0,Ze().sb)(n.map((e=>e.getCreatedByPointer())).filter((e=>(null==e?void 0:e.table)===w().oo)).map((e=>e.id)))),[n]),[h,f]=(0,s.useState)(),[x,y]=(0,s.useState)({}),[b,A]=(0,s.useState)(),[M,C]=(0,s.useState)(!1),[I,k]=(0,s.useState)(),_=I??b??[],D=(0,s.useMemo)((()=>{if(!m)return[];let e=m;x.query&&(e=(0,mt().Ay)(x.query,e,(e=>e.title||"")));const t=x.createdByIds;return t&&t.length>0&&(e=e.filter((e=>!!e.createdById&&t.includes(e.createdById)))),function(e){const{rows:t,appliedSorts:a}=e,s=null!=a&&a.length?a:[{propertyId:Kr.id,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===Kr.id?"title":t===Qr.id?"createdOn":t===Yr.id?"createdById":"title"})),i=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Rt().HB)(t)}));return(0,Ze().My)(t,n,i)}({rows:e,appliedSorts:b})}),[m,x.query,x.createdByIds,b]),z=Math.max(1,Math.floor(D.length/et().q)),[P,N]=(0,s.useState)(0),R=D.slice(P*et().q,(P+1)*et().q),B=et().q*(P+1)<D.length,L=P>0;const{selectedRows:E,handleToggleRow:O,handleSelectAllRows:U,handleUnselectAllRows:F}=Ut({allPossibleRows:R});return(0,i.jsxs)(ee,{children:[(0,i.jsx)(Va()._,{title:(0,i.jsx)(v().sA,{id:"organization.groups.modal.pages.title",defaultMessage:"Pages"}),byline:(0,i.jsx)(v().sA,{id:"organization.groups.modal.pages.byline",defaultMessage:"View all pages accessible to this group or remove their access."})}),(0,i.jsxs)("div",{style:d.tableHeader,children:[(0,i.jsxs)("div",{style:d.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:E.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(v().sA,{id:"organization.group.pagesTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:E.length}}),onClick:F}),(0,i.jsx)(Ua,{icon:js,title:(0,i.jsx)(v().sA,{id:"organization.group.pagesTable.multiselect.remove",defaultMessage:"Remove group from page"}),onClick:()=>f(Jr.RemoveGroupFromPage)})]}),(0,i.jsx)(Vn().A,{children:(0,i.jsx)(Wa().e,{sortProperties:Xr,isMenuOpen:M,setIsMenuOpen:C,onApply:e=>{C(!1),A(e),k(void 0)},currentSorts:_})}),_.length>0?(0,i.jsx)(Fn().he,{}):null,(0,i.jsx)(Li,{pillTitle:(0,i.jsx)(v().sA,{id:"organization.group.pagesTable.filters.createdBy",defaultMessage:"Created by"}),selectedUsers:x.createdByIds||[],setSelectedUsers:e=>{y((t=>({...t,createdByIds:e})))},userIds:p})]}),(0,i.jsxs)("div",{style:d.rightContent,children:[(0,i.jsx)(Ha().x,{appliedSorts:b,openSortPillMenu:e=>{e&&k([{propertyId:e,direction:"ascending"}]),C(!0)},sortProperties:Xr}),(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:x.query,setQueryFilter:e=>{y((t=>({...t,query:e})))}})]})]}),(0,i.jsx)(Bt().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,rows:R,columnRenderInfo:g,styles:u,onRowClick:e=>{e.type!==Xt().T.Loading&&O(e)},renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:l().d,title:(0,i.jsx)(v().sA,{id:"pagesTable.empty",defaultMessage:"No pages found"}),byline:(0,i.jsx)(v().sA,{id:"pagesTable.empty.byline",defaultMessage:"There are no pages that match this query."})}),showRowBorders:!0,multiselect:{header:{isDisabled:!1,isSelected:R.length>0&&E.length===R.length,onClick:()=>{E.length===R.length?F():U()}},row:{getDisabledState:()=>!1,getSelectedState:e=>E.some((t=>t.id===e.id)),onClick:e=>{e.type!==Xt().T.Loading&&O(e)}}},loadMoreMethod:{type:"pages",onLoadNext:()=>{N((e=>B?e+1:e)),F()},onLoadPrevious:()=>{N((e=>Math.max(e-1,0))),F()},hasNextPage:B,hasPrevPage:L,currentPage:P+1,finalPage:z}}),h===Jr.RemoveGroupFromPage?(0,i.jsx)(Wr,{organizationId:t,onDismiss:()=>{f(void 0),F()},groupStore:a,spaceStore:r,pageIds:E.map((e=>e.blockId)),removePagesFromGroup:o}):null]})}var tl=()=>a(348564),al=()=>a(366951),sl=()=>a(230357),nl=()=>a(873066),il=()=>a(821879),ol=()=>a(604995),rl=()=>a(824862);class ll extends Da().default{getInitialState(){return{auditLogPointer:void 0,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set}}isUserOrBotRemoved(e){return Boolean(e&&(this.state.removedUserIds.has(e)||this.state.removedBotIds.has(e)))}}const dl=new ll;class cl extends Da().default{getInitialState(){return{cachedResponses:{}}}getCursor(e,t,a){if(a<=1||!Ze().n4(this.state.pointer,e))return;const s=(0,sl()._)(t);if(this.state.filterStr!==s)return;const n=this.state.cachedResponses[a-1];return"success"===n.status?null==n?void 0:n.nextCursor:void 0}startLoading(e,t){this.updateResultHelper(e,t,{status:"loading"})}updateLoadedResult(e,t,a){this.updateResultHelper(e,t,{...a,status:"success",loadedAt:Date.now()})}updateError(e,t){this.updateResultHelper(e,t,{status:"error"})}updateResultHelper(e,t,a){const s=(0,sl()._)(t);1!==t.pageNum&&Ze().n4(this.state.pointer,e)&&this.state.filterStr===s?this.setState({pointer:e,filterStr:s,cachedResponses:{...this.state.cachedResponses,[t.pageNum]:{...a}}}):this.setState({pointer:e,filterStr:s,cachedResponses:{[t.pageNum||1]:{...a}}})}}const ul=new cl,gl=(0,v().YK)({loadCurrentAuditLogError:{id:"auditlog.error.loadCurrentAuditLogError",defaultMessage:"Failed to load audit logs"}});async function ml(e){var t,a;const{environment:s,auditLogPointer:n}=e,i=e.filters||sl().A.getState();ul.startLoading(n,i);const{sortOrder:o,pageSize:r,pageNum:l}=i,d={limit:r,cursor:ul.getCursor(n,i,l),filters:{timeRange:{starting:i.timeRange.starting?ol().C6.toUnixMs(i.timeRange.starting):void 0,ending:i.timeRange.ending?ol().C6.toUnixMs(i.timeRange.ending):void 0},...(null===(t=i.actors)||void 0===t?void 0:t.length)>0?{actors:i.actors}:void 0,...(null===(a=i.actions)||void 0===a?void 0:a.length)>0?{actions:i.actions}:void 0},sort:o||tl().K7.CreatedNewest};n.table===na().NX?await pl({environment:s,request:{...d,spaceId:n.id},auditLogPointer:n,filters:i}):n.table===za().y7?await pl({environment:s,request:{...d,organizationId:n.id},auditLogPointer:n,filters:i}):(0,Rt().HB)(n.table)}async function pl(e){const{environment:t,request:a,auditLogPointer:s,filters:n}=e;let i;if("spaceId"in a?i=await M().callApi({eventName:"searchAuditLog",environment:t,data:a,headers:(0,ea().WS)({spaceId:a.spaceId})}):"organizationId"in a?i=await M().callApi({eventName:"searchAuditLogForOrganization",environment:t,data:a}):(0,Rt().HB)(a),"success"===i.type)ul.updateLoadedResult(s,n,i.data);else if(ul.updateError(s,n),(0,yn().op)(i.body)){const e=(0,I().Hu)(T().A.getIntl(),i);C().f1(e)}else C().f1(T().A.formatMessage(gl.loadCurrentAuditLogError))}async function hl(e){const{environment:t,parentStore:a}=e;if(!a)return void dl.reset();const s=dl.getState(),n={id:a.id,table:a.table};if(Ze().n4(s.auditLogPointer,n)||dl.reset(),!n)return;let i;if(a.table===na().NX){const e=await Ia().T.searchActions.load();i=await e.searchSpaceActorIds({environment:t,membersOnly:!1})}else if(a.table===za().y7){var o;i={userIds:(null===(o=a.getModel())||void 0===o?void 0:o.getOwnerIds())||[],botIds:[]}}else(0,Rt().HB)(a);const r=await async function(e){const{environment:t,auditLogPointer:a}=e;if(a.table===na().NX){const e=await M().callApi({eventName:"getHistoricalAuditLogUsers",environment:t,data:{spaceId:a.id}});return"success"!==e.type?[]:e.data.results}if(a.table===za().y7){const e=await M().callApi({eventName:"getHistoricalAuditLogUsers",environment:t,data:{organizationId:a.id}});return"success"!==e.type?[]:e.data.results}(0,Rt().HB)(a.table)}({environment:t,auditLogPointer:n}),l={auditLogPointer:n,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set};for(const c of i.userIds)l.allUserIds.add(c);for(const c of i.botIds)l.allBotIds.add(c);for(const c of r)(d=c.actorId)!==rl().eR.id&&d!==w().BF.id&&d!==w().mc.id||l.allUserIds.has(c.actorId)?c.actorType!==w().oo||l.allUserIds.has(c.actorId)?c.actorType!==rl().GP||l.allBotIds.has(c.actorId)||(l.allBotIds.add(c.actorId),l.removedBotIds.add(c.actorId)):(l.allUserIds.add(c.actorId),l.removedUserIds.add(c.actorId)):l.allUserIds.add(c.actorId);var d;dl.setState(l)}var fl=()=>a(237824),xl=()=>a(46413);a(908872);const vl=(0,n().wt)("status",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.994 13.822a5.8 5.8 0 0 1-2.338-.474 6.1 6.1 0 0 1-1.933-1.307 6.2 6.2 0 0 1-1.307-1.934 5.8 5.8 0 0 1-.475-2.337q0-1.243.475-2.338a6.2 6.2 0 0 1 3.234-3.24 5.8 5.8 0 0 1 2.338-.475q1.248 0 2.344.474 1.095.475 1.934 1.313a6.1 6.1 0 0 1 1.312 1.928q.475 1.095.475 2.338a5.8 5.8 0 0 1-.475 2.337 6.2 6.2 0 0 1-3.246 3.24q-1.095.475-2.338.475m0-1.195q1.014 0 1.893-.375a4.87 4.87 0 0 0 2.59-2.59q.375-.88.375-1.892 0-1.008-.375-1.887a4.85 4.85 0 0 0-4.489-2.97 4.8 4.8 0 0 0-1.892.374A4.8 4.8 0 0 0 4.555 4.33a4.9 4.9 0 0 0-1.037 1.553 4.8 4.8 0 0 0-.375 1.887q0 1.013.375 1.892.374.88 1.037 1.547a4.8 4.8 0 0 0 3.44 1.418Zm0-6.996a.42.42 0 0 1-.44-.434.42.42 0 0 1 .44-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.434m1.29.346a.43.43 0 0 1-.311-.123.43.43 0 0 1-.123-.317.42.42 0 0 1 .433-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.44Zm.943.943a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.433.42.42 0 0 1 .433.433.42.42 0 0 1-.433.434m.345 1.289a.42.42 0 0 1-.433-.434.42.42 0 0 1 .433-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.434m-.345 1.295a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.44.42.42 0 0 1 .433.44.42.42 0 0 1-.434.434Zm-.944.937a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.433.42.42 0 0 1 .434.434.42.42 0 0 1-.434.433m-1.289.346a.42.42 0 0 1-.44-.434.42.42 0 0 1 .44-.433.42.42 0 0 1 .434.434.42.42 0 0 1-.434.433M6.7 10.441a.42.42 0 0 1-.433-.433.42.42 0 0 1 .433-.434q.188 0 .31.123a.41.41 0 0 1 .13.31.41.41 0 0 1-.13.311.42.42 0 0 1-.31.123m-.943-.937a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.44.42.42 0 0 1 .433.44.42.42 0 0 1-.434.434ZM5.41 8.209a.42.42 0 0 1-.433-.434.42.42 0 0 1 .433-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.434m.346-1.29a.42.42 0 0 1-.434-.433.42.42 0 0 1 .434-.433.42.42 0 0 1 .433.433.42.42 0 0 1-.433.434Zm.943-.942a.42.42 0 0 1-.433-.44.42.42 0 0 1 .433-.433q.188 0 .31.123a.41.41 0 0 1 .13.31.42.42 0 0 1-.13.317.42.42 0 0 1-.31.123"})});function yl(e){let{organizationId:t,filters:a,sort:s,query:n}=e;const i=(0,b().v3)(),o=JSON.stringify(s),r=Boolean(a),[{status:l,value:d},c]=(0,Je().Yb)((async()=>{if(!t)return[];let e=[];if(o){const t=JSON.parse(o);t&&(e=function(e){return e.map((e=>"status"===e.propertyId?{direction:e.direction,columnName:"status"}:"name"===e.propertyId?{direction:e.direction,columnName:"name"}:"lastModifiedAt"===e.propertyId?{direction:e.direction,columnName:"last_edited_time"}:void 0)).filter((e=>void 0!==e))}(t))}const s=await M().callApi({eventName:"getLegalHolds",environment:i,data:{organizationId:t,filters:r?{status:null==a?void 0:a.status,userIds:null==a?void 0:a.userIds}:void 0,sort:e.length>0?e:void 0,query:n??void 0}});if("success"===s.type)return s.data;if("failed"===s.type)throw s.error;return(0,Rt().HB)(s)}),[i,t,r,null==a?void 0:a.status,null==a?void 0:a.userIds,n,o]);return{loading:"pending"===l,legalHolds:d??[],refetch:c}}var bl=()=>a(202345),Sl=()=>a(244641);const jl=(0,n().wt)("murse",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M2.788 9.955V8.622q1.56.636 3.377.95 1.818.308 3.828.308 2.017 0 3.835-.308a16.5 16.5 0 0 0 3.377-.943l.007 1.326q-1.62.575-3.445.861a24 24 0 0 1-3.774.287q-1.948 0-3.773-.287a19 19 0 0 1-3.432-.86Zm6.139 2.42q-.828 0-.827-.8V10.4h3.787v1.176q0 .8-.827.8H8.927ZM4.12 16.866q-1.087 0-1.647-.553-.56-.548-.56-1.634V7.986q0-1.094.56-1.64.56-.547 1.647-.547h11.751q1.094 0 1.648.547.56.546.56 1.64v6.693q0 1.087-.56 1.633-.555.554-1.648.554H4.122Zm.055-1.292h11.641q.445 0 .677-.239.24-.232.24-.697v-6.61q0-.473-.24-.705-.232-.232-.677-.232H4.176q-.444 0-.684.232-.232.233-.232.704v6.61q0 .465.232.698.24.24.684.24ZM6.41 6.353V5.17q0-.964.533-1.436.534-.471 1.45-.471h3.192q.971 0 1.476.471.513.472.513 1.436v1.176H12.33v-1.17q0-.368-.205-.567-.199-.198-.574-.198h-3.11q-.377 0-.582.198-.204.2-.205.568v1.176z"})});var wl=()=>a(498212),Al=()=>a(427711);const Ml=(0,v().YK)({legalHoldNamePlaceholder:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.namePlaceholder",defaultMessage:"Name of investigation"},legalHoldDescriptionPlaceholder:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.descriptionPlaceholder",defaultMessage:"Describe the nature of this investigation"},legalHoldNameRequiredValidationError:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.nameRequiredValidationError",defaultMessage:"Name is required."},legalHoldDateRangeRequiredValidationError:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.dateRangeRequiredValidationError",defaultMessage:"Start date is required."}});function Cl(e){let{onDismiss:t,onSuccess:a,organizationId:n}=e;const[o,r]=s.useState(""),[l,d]=s.useState(void 0),[c,u]=s.useState(void 0),[g,m]=s.useState("page.viewed"),[p,h]=s.useState(void 0),[f,x]=s.useState([]),[y,S]=s.useState({name:void 0,holdMemberUserIds:void 0,dateRange:void 0}),w=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},byline:{width:400}})),[]),{loading:A,createLegalHold:C}=function(){const e=(0,b().v3)(),[t,a]=(0,Je().V$)((async t=>{let{name:a,icon:s,description:n,userInteractionType:i,startDate:o,endDate:r,organizationId:l,spaceId:d,userIds:c}=t;const u=await M().callApi({eventName:"createLegalHold",environment:e,data:{name:a,icon:s,description:n,userInteractionType:i,startDate:o,endDate:r,organizationId:l,spaceId:d,userIds:c}});if("success"===u.type)return u.data;if("failed"===u.type)throw u.error;return(0,Rt().HB)(u)}),[e]);return{loading:"pending"===t.status,createLegalHold:a}}(),I=async()=>{if(!o||null==p||!p.start_date||!f.length){const e={name:o?void 0:Ml.legalHoldNameRequiredValidationError,dateRange:null!=p&&p.start_date?void 0:Ml.legalHoldDateRangeRequiredValidationError,holdMemberUserIds:f.length?void 0:Uo.legalHoldAddMembersRequiredValidationError};return void S(e)}const e={name:o,icon:l,description:c,userInteractionType:[g],startDate:new Date(null==p?void 0:p.start_date).getTime(),endDate:null!=p&&p.end_date?new Date(null==p?void 0:p.end_date).getTime():void 0,organizationId:n,userIds:f};try{await C(e),null==a||a(),t()}catch(s){return}};return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:t,areaConstraint:{width:{type:"min",length:580}},render:e=>{let{sizeRange:a}=e;return(0,i.jsx)(F().tf,{showDismissButton:!1,sizeRange:a,header:(0,i.jsx)(K().rQ,{icon:jl(w.icon),title:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.title",defaultMessage:"Create legal hold"}),byline:(0,i.jsx)("div",{style:w.byline,children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.byline",defaultMessage:"Members affected by a legal hold won't be notified of the hold and will still maintain their permissions to create, edit, and delete files. {link}",values:{link:(0,i.jsx)(be()._,{href:"/legal-holds",children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.byline.learnMore",defaultMessage:"Learn more"})})}})})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.button.create",defaultMessage:"Create legal hold"}),primaryAction:I,primaryDisabled:A,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:t}),children:(0,i.jsxs)(ne().VP,{gap:24,width:"100%",children:[(0,i.jsx)(Il,{name:o,icon:l,error:y.name,onNameChange:e=>{r(e),""!==e&&S((e=>({...e,name:void 0})))},onIconChange:d}),(0,i.jsxs)(ne().VP,{gap:0,children:[(0,i.jsx)(G().A,{children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.descriptionLabel",defaultMessage:"Description"})}),(0,i.jsx)(U().A,{value:c,placeholder:T().A.formatMessage(Ml.legalHoldDescriptionPlaceholder),onChange:e=>u(e.target.value),textarea:!0})]}),(0,i.jsx)(Fo,{organizationId:n,holdMemberUserIds:f,setHoldMemberUserIds:e=>{x(e),e.length&&S((e=>({...e,holdMemberUserIds:void 0})))},error:y.holdMemberUserIds}),(0,i.jsx)(_l,{interactionType:g,setInteractionType:m,dateRange:p,setDateRange:e=>{h(e),null!=e&&e.start_date&&S((e=>({...e,dateRange:void 0})))},error:y.dateRange})]})})}})}function Il(e){let{name:t,icon:a,onNameChange:s,onIconChange:n,error:o}=e;const r=a?{icon:a,pointer:{table:"legal_hold",id:(0,wl().Ay)()}}:void 0,l=(0,j().IS)((e=>({icon:{boxShadow:e.inputBoxShadow,background:e.inputBackground,height:32,width:32}})),[]);return(0,i.jsxs)(ne().VP,{gap:8,children:[(0,i.jsxs)(ne().VP,{gap:0,children:[(0,i.jsx)(G().A,{children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.nameLabel",defaultMessage:"Icon & Name"})}),(0,i.jsxs)(ne().fI,{gap:8,children:[(0,i.jsx)(E().A,{isLarge:!0,largeIcon:!0,disabled:!1,isEmptyPage:!1,bucket:"public",style:l.icon,icon:r,size:24,emojiSize:24,onChange:n}),(0,i.jsx)(U().A,{errorOutline:!!o,value:t,placeholder:T().A.formatMessage(Ml.legalHoldNamePlaceholder),onChange:e=>s(e.target.value),inputElementAttributes:{"aria-describedby":"legalHoldNameError",required:!0}})]})]}),(0,i.jsx)(mo().R,{id:"legalHoldNameError",error:o})]})}const Tl={"page.viewed":(0,i.jsx)(v().sA,{id:"legalHolds.userInteractionType.dropdown.label.viewed",defaultMessage:"Viewed, edited & created"}),"page.edited":(0,i.jsx)(v().sA,{id:"legalHolds.userInteractionType.dropdown.label.edited",defaultMessage:"Edited & created"}),"page.created":(0,i.jsx)(v().sA,{id:"legalHolds.userInteractionType.dropdown.label.created",defaultMessage:"Created only"})},kl={"page.viewed":(0,i.jsx)(v().sA,{id:"legalHolds.dateRange.label.viewed",defaultMessage:"Pages viewed between"}),"page.edited":(0,i.jsx)(v().sA,{id:"legalHolds.dateRange.label.edited",defaultMessage:"Pages edited between"}),"page.created":(0,i.jsx)(v().sA,{id:"legalHolds.dateRange.label.created",defaultMessage:"Pages created between"})};function _l(e){let{interactionType:t,setInteractionType:a,dateRange:n,setDateRange:o,error:r}=e;const l=s.useMemo((()=>({starting:null!=n&&n.start_date?{type:"date",start_date:n.start_date}:void 0,ending:null!=n&&n.end_date?{type:"date",start_date:n.end_date}:void 0})),[n]),d=(0,j().IS)((e=>({innerButton:{background:e.inputBackground,marginRight:0},popupWrapper:{paddingTop:12,paddingBottom:12},buttonError:{border:`1px solid ${e.redBadgeBackground}`},downIcon:{display:"none"},settingLabel:{marginBottom:0}})),[]);return(0,i.jsxs)(ne().VP,{gap:8,children:[(0,i.jsxs)(ne().fI,{gap:12,alignItems:"center",children:[(0,i.jsx)(G().A,{style:d.settingLabel,children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.holdPagesLabel",defaultMessage:"Hold pages"})}),(0,i.jsx)(We().A,{innerButtonStyle:d.innerButton,downIconStyle:d.downIcon,selectedTitle:Tl[t],renderMenuSections:e=>[{key:"user_interaction_type",render:e=>(0,i.jsx)(He().A,{...e}),items:[{key:"page.viewed",action:()=>{a("page.viewed"),e.close()},render:e=>(0,i.jsx)(Ve().A,{...e,title:Tl["page.viewed"]})},{key:"page.edited",action:()=>{a("page.edited"),e.close()},render:e=>(0,i.jsx)(Ve().A,{...e,title:Tl["page.edited"]})},{key:"page.created",action:()=>{a("page.created"),e.close()},render:e=>(0,i.jsx)(Ve().A,{...e,title:Tl["page.created"]})}]}]}),(0,i.jsx)(G().A,{style:d.settingLabel,children:(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.label.between",defaultMessage:"between"})}),(0,i.jsx)(bo().Ay,{popupType:bo().z7.Popup,placementToOrigin:bo().sx.Bottom,alignmentToOrigin:bo().yP.Start,renderOrigin:e=>(0,i.jsx)(se().p,{isRed:!!r,style:{...d.innerButton,...r&&d.buttonError},"aria-describedby":"legalHoldDateRangeError",...e,children:n?(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange",defaultMessage:"{startDate} - {endDate}",values:{startDate:null!=n&&n.start_date?(0,i.jsx)(v().XU,{value:null==n?void 0:n.start_date,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}):(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange.startDate.placeholder",defaultMessage:"Select start date"}),endDate:null!=n&&n.end_date?(0,i.jsx)(v().XU,{value:n.end_date,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}):(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange.endDate.ongoing",defaultMessage:"Ongoing"})}}):(0,i.jsx)(v().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange.placeholder",defaultMessage:"Select date range"})}),popupWrapStyle:d.popupWrapper,render:e=>(0,i.jsx)(vt().A,{menuType:ht().gu.Popup,children:(0,i.jsx)(He().A,{children:(0,i.jsxs)(ne().VP,{gap:12,children:[(0,i.jsx)(ne().fI,{paddingLeft:12,paddingRight:12,children:(0,i.jsx)(G().A,{children:kl[t]})}),(0,i.jsx)(Al().A,{title:void 0,disableMenuWrap:!0,value:l,onUpdate:e=>{var t,a;if(e.error)return;const s={...l,...e.value},n=null===(t=s.starting)||void 0===t?void 0:t.start_date,i=null===(a=s.ending)||void 0===a?void 0:a.start_date;o({type:"daterange",start_date:n,end_date:i})},onDismiss:()=>{e.close()},minDate:Sl().c9.now().minus({years:gr().JN}),maxDate:Sl().c9.now().plus({years:gr().gM})})]})})})})]}),(0,i.jsx)(mo().R,{id:"legalHoldDateRangeError",error:r})]})}const Dl={id:"name",headerTitle:(0,i.jsx)(v().sA,{id:"organizationLegalHoldsSubTab.legalHolds.nameColumn.header",defaultMessage:"Hold name"}),renderCell:e=>{if(e.type===Xt().T.Loading)return(0,i.jsx)(Lt().mf,{includeIcon:!0,containerStyles:{width:140}});const t=(0,i.jsx)(pr,{legalHoldName:e.name,legalHoldId:e.id,legalHoldIcon:e.icon,size:Qn().tR,emojiSize:Qn().Gz});return(0,i.jsx)(Lt().s7,{title:e.name,icon:t})},widthData:{widthPercent:25,minWidth:280,maxWidth:280},sortable:!1},zl={id:"status",headerTitle:(0,i.jsx)(v().sA,{id:"organizationLegalHoldsSubTab.legalHolds.statusColumn.header",defaultMessage:"Status"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):(0,i.jsx)(fr,{status:e.status}),widthData:{widthPercent:15,minWidth:140},sortable:!1},Pl={id:"workspaces",headerTitle:(0,i.jsx)(v().sA,{id:"organizationLegalHoldsSubTab.legalHolds.workspacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):(0,i.jsx)(vr,{workspaceIds:e.workspaces.ids,totalCount:e.workspaces.total}),widthData:{widthPercent:20,minWidth:140},sortable:!1},Nl={id:"users",headerTitle:(0,i.jsx)(v().sA,{id:"organizationLegalHoldsSubTab.legalHolds.membersColumn.header",defaultMessage:"Hold members"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):(0,i.jsx)(hr,{userIds:e.users.ids,totalCount:e.users.total}),widthData:{widthPercent:20,minWidth:140},sortable:!1};function Rl(e){let{lastEditedTime:t,lastEditedBy:a}=e;const s=(0,b().v3)(),n=(0,v().tz)(),{userStore:o,fullName:r}=(0,S().K8)((()=>{if(a){const e=new(ft().L)(s,{table:w().oo,id:a});return{userStore:e,fullName:e.getFullName(n)}}return{userStore:void 0,fullName:void 0}}),[a,s,n]);return o?(0,i.jsxs)(ne().fI,{alignItems:"center",gap:12,children:[(0,i.jsx)(Pn().l,{userStores:[o],useSecondaryColorTitle:!0,useIconsOnly:!0}),(0,i.jsx)(Ys().A,{isSecondaryColor:!0,children:(0,i.jsx)(v().sA,{id:"legalHoldsTable.updatedAt.byAndDate",defaultMessage:"{fullName} on {date}",values:{fullName:r,date:(0,i.jsx)(v().XU,{value:t,year:"numeric",month:"short",day:"numeric"})}})})]}):null}const Bl={id:"lastModifiedAt",headerTitle:(0,i.jsx)(v().sA,{id:"organizationLegalHoldsSubTab.legalHolds.lastModifiedAtColumn.header",defaultMessage:"Last modified at"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{includeIcon:!0,containerStyles:{width:140}}):(0,i.jsx)(Rl,{lastEditedTime:e.lastEditedTime,lastEditedBy:e.lastEditedBy}),widthData:{widthPercent:20,minWidth:140},sortable:!0};function Ll(e){let{data:t,loading:a,currentPage:n,setCurrentPage:o,setSelectedLegalHoldId:r}=e;const l=s.useMemo((()=>[Dl,zl,Pl,Nl,Bl]),[]),d=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:l,theme:e,containerMarginTop:0})),[l]),c=t.map((e=>({...e,isClickable:!0,type:Xt().T.OrganizationLegalHold}))),u=a&&0===c.length?(0,Xt().n)():c.slice(et().q*(n-1),et().q*n),g=c.length>et().q*n,m=1!==n;return(0,i.jsx)(Bt().WE,{columnRenderInfo:l,hideHeaderRowPadding:!0,rows:u,renderNoRowsComponent:()=>(0,i.jsx)(Kt,{title:(0,i.jsx)(v().sA,{id:"legalHoldsTable.empty",defaultMessage:"No legal holds found"}),byline:(0,i.jsx)(v().sA,{id:"legalHoldsTable.empty.byline",defaultMessage:"There are no legal holds that match this query."})}),styles:d,showRowBorders:!0,onRowClick:e=>{e.type===Xt().T.OrganizationLegalHold&&r(e.id)},loadMoreMethod:{type:"pages",onLoadNext:()=>{g&&o(n+1)},onLoadPrevious:()=>{m&&o(n-1)},hasNextPage:g,hasPrevPage:m,currentPage:n},allowHorizontalScroll:!0,setStickyHeaderRow:!0,extendToFullScreen:$t().e})}function El(e){let{interactionType:t,startDate:a,endDate:s}=e;const n=(0,i.jsx)(v().sA,{defaultMessage:"This legal hold is currently holding pages created, edited, and viewed between {legalHoldDateRange}",id:"legalHold.tooltip.interactionTypeAndDateRange.viewed",values:{legalHoldDateRange:(0,i.jsx)(ur,{startDate:a,endDate:s})}});return t?t.includes("page.viewed")?n:t.includes("page.created")?(0,i.jsx)(v().sA,{defaultMessage:"This legal hold is currently holding pages created between {legalHoldDateRange}",id:"legalHold.tooltip.interactionTypeAndDateRange.created",values:{legalHoldDateRange:(0,i.jsx)(ur,{startDate:a,endDate:s})}}):t.includes("page.edited")?(0,i.jsx)(v().sA,{defaultMessage:"This legal hold is currently holding pages created and edited between {legalHoldDateRange}",id:"legalHold.tooltip.interactionTypeAndDateRange.edited",values:{legalHoldDateRange:(0,i.jsx)(ur,{startDate:a,endDate:s})}}):void 0:n}function Ol(e){let{organizationId:t,legalHoldId:a,legalHoldIcon:s,legalHoldName:n,onDismiss:o}=e;const{legalHold:r,loading:l,refetch:d}=function(e){const t=(0,b().v3)(),[{status:a,value:s},n]=(0,Je().Yb)((async()=>{const a=await M().callApi({eventName:"getLegalHold",environment:t,data:{legalHoldId:e}});if("success"===a.type)return a.data;if("failed"===a.type)throw a.error;return(0,Rt().HB)(a)}),[t,e]);return{loading:"pending"===a,legalHold:s,refetch:n}}(a),c=(0,j().IS)((e=>({icon:{height:16,width:16,fill:e.mediumTextColor}})),[]),u=(0,i.jsxs)(ne().fI,{gap:4,alignItems:"center",children:[(0,i.jsx)(ur,{startDate:null==r?void 0:r.startDate,endDate:null==r?void 0:r.endDate}),(0,i.jsx)(q().A,{textWrap:!0,renderTooltip:()=>(0,i.jsx)(ne().fI,{width:"204px",children:El({interactionType:null==r?void 0:r.userInteractionType,startDate:null==r?void 0:r.startDate,endDate:null==r?void 0:r.endDate})}),render:e=>(0,i.jsx)("div",{...e,children:(0,or().T)(c.icon)})})]});return(0,i.jsx)(oa().iv,{sidebarProps:{sidebarTitle:(null==r?void 0:r.name)||n,sidebarByline:u,sidebarTitleIcon:(0,i.jsx)(pr,{legalHoldId:a,size:oa().WK,emojiSize:oa().WK,legalHoldIcon:(null==r?void 0:r.icon)||s,legalHoldName:(null==r?void 0:r.name)||n}),sidebarItemsTitle:(0,i.jsx)(v().sA,{defaultMessage:"Legal hold settings",id:"legalHold.sidebar.topEntitySection"}),hideSeparator:!0,renderTooltip:e=>{if("released"===(null==r?void 0:r.status)&&"browse_content"===e.id)return(0,i.jsx)(v().sA,{id:"legalHold.sidebar.browseContent.tooltip",defaultMessage:"You can no longer view the content of a released legal hold."})}},sceneProps:{legalHoldId:a,legalHold:r,organizationId:t,loading:l,refetchLegalHold:d},tabRenderer:lf,tabNames:Jt().hx,defaultTab:"general",tabAccessor:"active"===(null==r?void 0:r.status)?rf:of,isOpen:!0,onDismiss:o})}const Ul=(0,v().YK)({placeholder:{id:"organizationLegalHoldsSubTab.legalHolds.search.placeholder",defaultMessage:"Search by legal hold name."}}),Fl=(0,v().YK)({name:{id:"organizationLegalHoldsSubTab.legalHolds.sort.name",defaultMessage:"Name"},status:{id:"organizationLegalHoldsSubTab.legalHolds.sort.status",defaultMessage:"Status"},lastModifiedAt:{id:"organizationLegalHoldsSubTab.legalHolds.sort.lastModifiedAt",defaultMessage:"Last modified at"}}),Vl=[{id:"name",name:T().A.formatMessage(Fl.name),type:"title"},{id:"status",name:T().A.formatMessage(Fl.status),type:"status"},{id:"lastModifiedAt",name:T().A.formatMessage(Fl.lastModifiedAt),type:"last_edited_time"}],Hl=[{key:"active",value:"active",title:(0,i.jsx)(v().sA,{id:"legalHoldsTable.filters.status.active",defaultMessage:"Active"}),shortTitle:(0,i.jsx)(v().sA,{id:"legalHoldsTable.filters.status.active.shortTitle",defaultMessage:"Active"})},{key:"released",value:"released",title:(0,i.jsx)(v().sA,{id:"legalHoldsTable.filters.status.released",defaultMessage:"Released"}),shortTitle:(0,i.jsx)(v().sA,{id:"legalHoldsTable.filters.status.released.shortTitle",defaultMessage:"Released"})}];var Wl=function(e){return e.CreateLegalHold="create-legal-hold",e}(Wl||{});function ql(e){let{organizationId:t}=e;const a=(0,v().tz)(),[n,o]=s.useState(),[r,l]=s.useState(""),[d,c]=s.useState(),[u,g]=s.useState(1),[m,p]=s.useState(!1),[h,f]=s.useState(),[x,y]=s.useState(),[b,S]=s.useState(),[j,w]=s.useState([]),A=j.length>0?j:void 0,M=b||A?{status:b,userIds:A}:void 0,{legalHolds:C,loading:I,refetch:T}=yl({organizationId:t,filters:M,query:""===r?void 0:r,sort:x}),k=(0,Hn().F)(),_=Array.from(C.reduce(((e,t)=>(t.users.ids.forEach((t=>{e.add(t)})),e)),new Set)),D=C.find((e=>e.id===d)),z=s.useCallback((async()=>{g(1),y(void 0),f(void 0),l(""),S(void 0),w([]),await T()}),[T]);return(0,i.jsxs)(bl().t,{children:[(0,i.jsx)(Va()._,{title:Wd[Hd.LegalHolds].title,bylineWidth:"600px",byline:(0,i.jsx)(v().sA,{id:"organizationLegalHoldsSubTab.legalHolds.byline",defaultMessage:"Placing a legal hold on a team member allows Organization Owners to view and export all the content that’s been created or modified by that member."})}),(0,i.jsxs)("div",{style:k.tableHeader,children:[(0,i.jsxs)("div",{style:k.leftContent,children:[(0,i.jsx)(Wa().e,{sortProperties:Vl,isMenuOpen:m,setIsMenuOpen:p,onApply:e=>{p(!1),y(e),f(void 0),g(1)},currentSorts:h??x??[]}),(0,i.jsx)(Qs().G0,{pillTitle:(0,i.jsx)(v().sA,{id:"legalHoldsTable.filters.status.title",defaultMessage:"Status"}),pillIcon:vl,selectedItem:b,setSelectedItem:e=>{S(e),g(1)},items:Hl,shouldUseCheck:!0}),(0,i.jsx)(Li,{pillTitle:(0,i.jsx)(v().sA,{id:"legalHoldsTable.filters.holdMembers.title",defaultMessage:"Hold members"}),pillIcon:Wn().s,selectedUsers:j,setSelectedUsers:e=>{w(e),g(1)},userIds:_})]}),(0,i.jsxs)("div",{style:k.rightContent,children:[(0,i.jsx)(Ha().x,{appliedSorts:x,openSortPillMenu:e=>{e&&f([{propertyId:e,direction:"ascending"}]),p(!0)},sortProperties:Vl}),(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:r,setQueryFilter:e=>{l(e),g(1)},placeholderText:a.formatMessage(Ul.placeholder)}),(0,i.jsx)(H().A,{onClick:()=>{o(Wl.CreateLegalHold)},children:(0,i.jsx)(v().sA,{id:"legalHoldsTable.button.addLegalHold",defaultMessage:"Create hold"})})]})]}),(0,i.jsx)(Ll,{data:C,loading:I,currentPage:u,setCurrentPage:g,setSelectedLegalHoldId:c}),d?(0,i.jsx)(Ol,{organizationId:t,legalHoldIcon:(null==D?void 0:D.icon)??"",legalHoldName:(null==D?void 0:D.name)??"",legalHoldId:d,onDismiss:async()=>{c(void 0),await T()}}):null,n===Wl.CreateLegalHold?(0,i.jsx)(Cl,{onDismiss:()=>o(void 0),organizationId:t,onSuccess:z}):null]})}var Gl=()=>a(571499);function Kl(e){let{children:t}=e;const a=(0,j().IS)((e=>({container:{width:"100%",maxWidth:880,margin:"48px auto 100px",padding:"0 40px 0"}})),[]);return(0,i.jsx)("div",{style:a.container,children:t})}var Yl=()=>a(182392),Ql=()=>a(652399),$l=()=>a(829351),Xl=()=>a(17297),Zl=()=>a(617842),Jl=()=>a(623742);function ed(e){const{auditLogEntry:t,parentStore:a,id:n}=e,o=(0,v().tz)(),r=(0,S().K8)((()=>{if(t.actor.actorType===w().oo){const e=_().LU.createChildStore(a,{id:t.actor.actorId,table:w().oo});if(e.isDefined()&&!e.getIsDeleted())return{actorStore:e};if(t.actor.email)return{avatar:{name:t.actor.name,email:t.actor.email}}}else if(t.actor.actorType===rl().GP){const e=_().vK.createChildStore(a,{id:t.actor.actorId,table:rl().GP});return e.isDefined()?{actorStore:e}:{avatar:{name:t.actor.name,email:t.actor.actorId}}}return{actorStore:void 0}}),[a,t]),l=(0,S().K8)((()=>{var e,t;if(r)return(null===(e=r.actorStore)||void 0===e?void 0:e.getDisplayName(o))??(null===(t=r.avatar)||void 0===t?void 0:t.name)}),[r,o]),d=(0,S().K8)((()=>{var e,t;if(r)return(null===(e=r.actorStore)||void 0===e?void 0:e.getDetail())??(null===(t=r.avatar)||void 0===t?void 0:t.email)}),[r]),c=(0,s.useMemo)((()=>{var e;if(t.actor.actorType===w().oo)return(0,Jl().v)(null===(e=t.actor.meta)||void 0===e?void 0:e.spaceRole)}),[t]),u=(0,j().IS)((()=>({container:{display:"block",width:"100%",paddingBlock:6}})),[]),g=(0,s.createRef)();return(0,i.jsx)(q().A,{disableTooltip:td(g.current),renderTooltip:()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:l}),(0,i.jsx)("div",{children:d})]}),placement:$a().W.Bottom,render:e=>(0,i.jsx)("div",{...e,style:u.container,children:(0,i.jsx)(Jl().A,{id:n,...r,spaceRole:c})})})}function td(e){return!!e&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}var ad=()=>a(326346),sd=()=>a(884107),nd=()=>a(47373);function id(e){const{auditLogEntry:t,eventColumnId:a}=e,s=(0,S().K8)((()=>(0,nd().Qd)()),[]),n=(0,S().K8)((()=>y().default.checkGate({gateName:"audit_log_event_name_column"})?ad().HW:ad().Gb),[]),i=(0,v().tz)(),o=(0,b().v3)();return async()=>{const e=await sd().R.clipboardActions.load();e.copyString({environment:o,stringValue:(0,ad().ZM)({auditLogEntry:t,intl:i,getAuditLogEventText:od(a),isTeamGuestsEnabled:s,csvColumnNames:n}),copiedMessage:e.clipboardMessages.copiedToClipboard})}}function od(e){return t=>{var a;return null===(a=document.getElementById(e))||void 0===a?void 0:a.textContent}}const rd={id:"actor",headerTitle:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlog.logTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(ed,{parentStore:e.parentStore,auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:30},sortable:!1},ld={id:"event",headerTitle:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(Xl().m,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:40},sortable:!1},dd={id:"dateTimeAndMenu",headerTitle:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlog.logTable.dateColumn.header",defaultMessage:"Date"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`,a=`event-${e.auditLogEntry.actionName}-${e.id}`,s=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($l().V,{auditLogEntry:e.auditLogEntry,id:s}),(0,i.jsx)(gd,{auditLogEntry:e.auditLogEntry,ids:{actorColumnId:t,eventColumnId:a,dateTimeColumnId:s}})]})},widthData:{width:25},sortable:!0,shouldShowSortTooltip:!0},cd=[rd,ld,dd];function ud(){return(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40vh",flexDirection:"column"},children:[(0,i.jsx)("div",{children:(0,i.jsx)(Ys().A,{isSecondaryColor:!0,style:{fontWeight:500},children:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlog.logTable.noResults",defaultMessage:"No results"})})}),(0,i.jsx)(Ys().A,{isSecondaryColor:!0,children:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlog.logTable.noResultsHelpText",defaultMessage:"Try different filters. Logs may take some time to show up."})})]})}function gd(e){const t=(0,j().DP)(),a=(0,j().IS)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%"},button:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:28,borderRadius:O().V.small}})),[]),s=id({auditLogEntry:e.auditLogEntry,eventColumnId:e.ids.eventColumnId});return(0,i.jsx)(q().A,{delayThreshold:80,placement:$a().W.Bottom,render:e=>(0,i.jsx)("div",{style:a.container,...e,children:(0,i.jsx)(Ea().A,{style:a.button,onClick:s,children:(0,l().d)({width:16,height:16,fill:t.mediumIconColor})})}),renderTooltip:()=>(0,i.jsx)(v().sA,{id:"AuditLogSettings.copyAuditLogEvent",defaultMessage:"Copy row"})})}const md=(0,v().j4)((function(e){const{searchResponse:t,parentStore:a}=e,[n,o]=(0,S().$y)(sl().A),r=t.results||[],l=t.hasMoreResults,d=Boolean(r.length),c=e=>{const t={...n,pageNum:e};o(t)},u=(0,qt().A)(),g=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:cd,theme:e,containerMarginTop:0})),[]),m=r.map(((e,t)=>({id:t.toString(),auditLogEntry:e,parentStore:a,isClickable:!1}))),p=(0,s.useCallback)((()=>{const e=n.sortOrder===tl().K7.CreatedOldest?tl().K7.CreatedNewest:tl().K7.CreatedOldest;o({...n,sortOrder:e,pageNum:1})}),[n,o]),h=(0,s.useMemo)((()=>({column:dd,sortAscending:n.sortOrder===tl().K7.CreatedOldest})),[n]),f=cd.map((e=>({...e,headerStyle:u.tableHeader})));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Bt().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:f,rows:m,sortState:h,onSortStateChanged:p,renderNoRowsComponent:ud,styles:g}),d?(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:[(0,i.jsx)(Zl().M,{onClick:()=>{c(n.pageNum-1)},disabled:1===n.pageNum,children:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlog.logTable.previousPage",defaultMessage:"Previous"})}),(0,i.jsx)(Zl().M,{disabled:!l,onClick:()=>{c(n.pageNum+1)},children:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlog.logTable.nextPage",defaultMessage:"Next"})})]}):null]})}));function pd(e){let{organizationId:t,selectedSpaceId:a,parentStore:n}=e;const o=(0,b().v3)(),[r]=(0,S().$y)(ul),[l]=(0,S().$y)(sl().A),d=(0,sl()._)(l)!==r.filterStr?void 0:r.cachedResponses[l.pageNum];return(0,s.useEffect)((()=>{n.id&&ml({environment:o,auditLogPointer:{id:n.id,table:n.table}})}),[o,n,l]),(0,s.useEffect)((()=>{hl({environment:o,parentStore:n})}),[o,n]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{justifyContent:"space-between",display:"flex",paddingTop:4,paddingBottom:12},children:[(0,i.jsx)(tc,{organizationId:t,selectedSpaceId:a,parentStore:n}),(0,i.jsx)(Ql().A,{parentStore:n})]}),"loading"===(null==d?void 0:d.status)&&(0,i.jsx)(al().A,{}),"success"===(null==d?void 0:d.status)&&(0,i.jsx)(md,{searchResponse:d,parentStore:n})]})}function hd(e){const{organizationId:t,spaceId:a}=e,s=ia({spaceId:a}),n=(0,_a().E)({organizationId:t}),o=s||n;return o&&t?(0,i.jsx)(bl().t,{children:(0,i.jsxs)("div",{style:{padding:"12px 16px"},children:[(0,i.jsx)(Va()._,{title:(0,i.jsx)(v().sA,{id:"organization.auditLog.title",defaultMessage:"Audit log"}),byline:(0,i.jsx)(v().sA,{id:"organization.auditLog.byline",defaultMessage:"Access to detailed information about security and safety-related activity. This can help identify potential security issues, investigate suspicious behavior, and troubleshoot access."})}),(0,i.jsx)(pd,{organizationId:t,selectedSpaceId:a,parentStore:o})]})}):null}var fd=()=>a(793571),xd=()=>a(404302),vd=()=>a(710967),yd=()=>a(518658),bd=()=>a(29037),Sd=()=>a(224701),jd=()=>a(113474),wd=()=>a(933117);const Ad="organization";function Md(e){let{organizationId:t,currentTabRoute:a,currentTabProperties:n,shouldShowOrganizationOption:o,showAsPill:r,selectedSpaceStore:l}=e;const d=(0,b().v3)(),c=(0,_a().E)({organizationId:t}),u=(0,ks().l)(),{itemIcon:g,itemName:m}=function(e){const t=Td(),{itemIcon:a,itemName:s}=(0,S().K8)((()=>{const a="Organization";return e?{itemIcon:(0,i.jsx)(E().A,{disabled:!0,icon:e.getIcon(),isEmptyPage:!1,title:e.getName(),size:Na().iK,isLarge:!0}),itemName:e.getName()}:{itemIcon:(0,i.jsx)("div",{style:t.organizationIconContainer,children:(0,x().V)(t.organizationIcon)}),itemName:a}}),[e,t]);return{itemIcon:a,itemName:s}}(l),p=(null==l?void 0:l.id)??(o?Ad:void 0),h=(0,j().IS)((e=>({container:{display:"inline-flex",width:"fit-content"},menuItem:{fontSize:"inherit",borderRadius:O().V.default,border:`1px solid ${e.stroke.secondary}`,paddingTop:4,paddingBottom:4}})),[]);(0,s.useEffect)((()=>{l&&(ve().default.setState({...ve().default.state,currentSpaceStore:l}),(0,Sd().$D)({environment:d,spaceId:l.id}))}),[l,d]);const f=(0,s.useCallback)((e=>{e?(0,Yl().i)({environment:d,organizationId:t,tabRoute:a,properties:n,queryParams:{[Zh]:e}}):(0,Yl().y)(d,t,a)}),[a,n,d,t]),y=(0,S().K8)((()=>u.map((e=>e.id))),[u]),w=(0,s.useMemo)((()=>o?[Ad,...y]:y),[y,o]),A=(0,S().K8)((()=>{const e=c?{key:c.id,value:Ad,title:(0,i.jsx)(v().sA,{id:"organizationConsole.table.filters.option.organization.title",defaultMessage:"Organization"}),shortTitle:(0,i.jsx)(v().sA,{id:"organizationConsole.table.filters.option.organization.title",defaultMessage:"Organization"})}:void 0,t=u.map((e=>({key:e.id,value:e.id,title:e.getName(),shortTitle:e.getName()})));return o&&e?[e,...t]:t}),[u,c,o]);return r?(0,i.jsx)(Qs().G0,{shouldUseCheck:!0,showActive:!0,shouldHidePrefix:!0,selectionRequired:!0,pillTitle:o?(0,i.jsx)(v().sA,{id:"organizationConsole.table.filters.orgOrWorkspaces.title",defaultMessage:"Organization or workspace"}):(0,i.jsx)(v().sA,{id:"organizationConsole.table.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:x().V,selectedItem:p,setSelectedItem:f,items:A}):(0,i.jsx)("div",{style:h.container,children:(0,i.jsx)(wd().A,{items:w,getKey:Ze().D_,selectedItem:p,onSelect:f,width:300,renderItem:e=>{const t=e.value;return t===Ad?(0,i.jsx)(Id,{isSelected:!p,...e}):(0,i.jsx)(Cd,{spaceId:t,isSelected:p===t,...e})},renderOrigin:e=>(0,i.jsx)(jd()._,{focused:!1,icon:g,title:m,style:h.menuItem,desktopIconStyle:{marginLeft:4,marginRight:0},...e})})})}function Cd(e){let{spaceId:t,isSelected:a,...n}=e;const o=(0,b().v3)(),{organizationOwnerRecordCache:r}=(0,s.useContext)(P().N),l=Td(),{icon:d,name:c}=(0,S().K8)((()=>{const e=new(_().SL)(o,{id:t,table:na().NX},{inMemoryRecordCache:r});return{icon:e.getIcon(),name:e.getName()}}),[t,r,o]);return(0,i.jsx)(Ve().A,{title:c,right:a?(0,bd().checkmarkIcon)(l.checkIcon):null,icon:(0,i.jsx)(E().A,{disabled:!0,icon:d,isEmptyPage:!1,title:c,size:Na().iK,isLarge:!0}),...n})}function Id(e){let{isSelected:t,...a}=e;const s=Td();return(0,i.jsx)(Ve().A,{title:"Organization",right:t?(0,bd().checkmarkIcon)(s.checkIcon):null,icon:(0,i.jsx)("div",{style:s.organizationIconContainer,children:(0,x().V)(s.organizationIcon)}),...a})}function Td(){return(0,j().IS)((e=>({checkIcon:{width:14,height:14},organizationIconContainer:{width:23,height:23,display:"flex",alignItems:"center",justifyContent:"center"},organizationIcon:{width:18,height:18}})),[])}function kd(e){let{selectedTeamspaceIds:t,setSelectedTeamspaceIds:a,teamspaceStores:s}=e;const n=function(e){const t=(0,j().IS)((()=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block",paddingTop:4,paddingBottom:4}})),[]);return(0,S().K8)((()=>e.map((e=>{const a=e.getName(),s=e.getIcon();return{key:e.id,value:e.id,title:(0,i.jsxs)("div",{style:t.optionContainer,children:[(0,i.jsx)(E().A,{disabled:!0,icon:s,isEmptyPage:!1,size:Na().iK,title:a,isLarge:!0,emojiSize:Na().iK,isRaw:!1}),(0,i.jsx)(Ys().A,{style:t.optionTitle,children:a})]}),shortTitle:a}}))),[e,t])}(s);return(0,i.jsx)(Qs().VX,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationConsole.table.filters.teamspaces.title",defaultMessage:"Teamspaces"}),pillIcon:x().V,selectedItems:t,setSelectedItems:a,items:n})}var _d=()=>a(701144);function Dd(e){let{audienceValues:t,selectedAudience:a,setSelectedAudience:n}=e;const o=(0,_d().Ry)([]),r=(0,s.useMemo)((()=>(t??xd().p).map((e=>({key:e.toString(),value:e,shortTitle:(0,_d().j)(e),title:(0,_d().j)(e),caption:(0,_d().b0)(e),wrapCaption:!0})))),[t]);return(0,i.jsx)(Qs().VX,{pillTitle:o,pillIcon:Wn().s,selectedItems:a,setSelectedItems:n,items:r})}var zd=()=>a(797561);function Pd(e){let{spaceStore:t,includeGuests:a,pillTitle:n,...o}=e;const{visibleUsers:r,loading:l}=(0,B().d)(t.id),d=ja(t.id,!o.includeGroups),c=r.filter(A().c7),u=r.filter(A().QE),{userIds:g,guestUserIds:m}=(0,s.useMemo)((()=>l?{userIds:[],guestUserIds:void 0}:a?{userIds:c.map((e=>e.userId)),guestUserIds:u.map((e=>e.userId))}:{userIds:c.map((e=>e.userId)),guestUserIds:void 0}),[l,a,c,u]),p=o.includeGroups?{...o,permissionGroups:null==d?void 0:d.map((e=>{let{group:t}=e;return Ka().Bj6.fromValue(Wt().n,t)}))}:o;return(0,i.jsx)(Li,{pillTitle:n,pillIcon:zd().E,userIds:g,guestUserIds:m,showSearch:!0,...p})}var Nd=()=>a(624090),Rd=()=>a(920495),Bd=()=>a(459173);const Ld=["alive","in_trash","deleted_from_trash"];function Ed(e){let{spaceStore:t,selectedPageStatus:a,setSelectedPageStatus:n}=e;const o=(0,v().tz)(),{currentDeleteFromTrashDelayInSeconds:r,currentPurgeDelayInSeconds:l}=(0,S().K8)((()=>({currentDeleteFromTrashDelayInSeconds:(0,Nd().XX)(t.getModel())/1e3,currentPurgeDelayInSeconds:(0,Nd().NA)(t.getModel())/1e3})),[t]),d=(0,s.useMemo)((()=>(0,Bd().Rv)({currentDeleteFromTrashDelayInSeconds:r,currentPurgeDelayInSeconds:l,intl:o})),[r,l,o]),c=(0,s.useMemo)((()=>Ld.map((e=>({key:e.toString(),value:e,shortTitle:(0,Bd().$E)([e]),title:(0,Bd().dU)(e),caption:d(e),wrapCaption:!0})))),[d]);return(0,i.jsx)(Qs().VX,{pillIcon:Rd().n,pillTitle:(0,Bd().$E)([]),selectedItems:a,setSelectedItems:n,items:c})}function Od(e){let{spaceStore:t,filters:a,setFilters:n,pageStores:o,organizationId:r}=e;const l=(0,s.useMemo)((()=>[t.id]),[t.id]),{teamStores:d}=(0,R().o)(l),c=d[t.id],u=(0,Hn().F)();return(0,i.jsxs)("div",{style:u.tableHeader,children:[(0,i.jsxs)("div",{style:u.leftContent,children:[(0,i.jsx)(Md,{showAsPill:!0,organizationId:r,currentTabRoute:Jt().D8,currentTabProperties:{subtab:Hd.ContentSearch},selectedSpaceStore:t}),(0,i.jsx)(Ed,{spaceStore:t,selectedPageStatus:a.pageStatus,setSelectedPageStatus:function(e){n({pageStatus:e},{runSearchAfter:!0})}}),(0,i.jsx)(yd().Z,{lastEditedTime:a.lastEditedTime,createdTime:a.createdTime,setLastEditedTime:function(e){n({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){n({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}}),(0,i.jsx)(kd,{selectedTeamspaceIds:a.teamIds,setSelectedTeamspaceIds:function(e){n({teamIds:e},{runSearchAfter:!0})},teamspaceStores:c}),(0,i.jsx)(Pd,{spaceStore:t,selectedUsers:a.sharedWith??[],setSelectedUsers:function(e){n({sharedWith:e},{runSearchAfter:!0})},includeGroups:!0,includeGuests:!0,pillTitle:(0,i.jsx)(v().sA,{id:"adminContentSearchTab.pagesTable.filters.sharedWith.title",defaultMessage:"Shared with"})}),(0,i.jsx)(Dd,{selectedAudience:a.audience,setSelectedAudience:function(e){n({audience:e},{runSearchAfter:!0})},audienceValues:xd().p}),(0,i.jsx)(Pd,{spaceStore:t,selectedUsers:a.createdBy,setSelectedUsers:function(e){n({createdBy:e},{runSearchAfter:!0})},includeGuests:!0,pillTitle:(0,i.jsx)(v().sA,{id:"adminContentSearchTab.pagesTable.filters.createdBy.title",defaultMessage:"Created by"})})]}),(0,i.jsxs)("div",{style:u.rightContent,children:[(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:a.query,setQueryFilter:function(e){n({query:e},{runSearchAfter:!0})}}),(0,i.jsx)(vd().t,{spaceId:t.id,organizationId:r,disabled:0===o.length,filters:a,shouldUseIconButton:!0})]})]})}function Ud(e){let{spaceStore:t,userStore:a,organizationId:n}=e;const{showSuggestions:o,loadNextPage:r,hasNextPage:l,pageStores:d,loading:c,error:u,runNewSearch:g,filters:m,setFilters:p,refreshSearchResult:h}=(0,ki().I)({spaceStore:t,userStore:a,hasUserConfirmedAcknowledgement:true,organizationId:n});return(0,s.useEffect)((()=>{g()}),[t.id,g]),(0,i.jsxs)(bl().t,{children:[(0,i.jsx)(Va()._,{title:(0,i.jsx)(v().sA,{id:"settingsConsole.spaceContentSearch.title",defaultMessage:"Content search"}),byline:(0,i.jsx)(v().sA,{id:"settingsConsole.spaceContentSearch.description",defaultMessage:"Organization owners can search for any page in the workspaces owned by the organization. This includes private pages and deleted pages retained per the data retention policy"})}),(0,i.jsx)(Od,{spaceStore:t,setFilters:p,filters:m,pageStores:d,organizationId:n}),(0,i.jsx)(fd().r,{loading:c,error:u,pageStores:d,loadNextPage:r,hasNextPage:l,filters:m,setFilters:p,showSuggestions:o,runNewSearch:g,hasUserConfirmedAcknowledgement:true,refreshSearchResult:h,shouldShowLoadMore:!0})]})}function Fd(e){let{spaceId:t,organizationId:a,subtab:n,queryParams:i,tabRoute:o}=e;const r=(0,b().v3)(),{spaceIds:l}=(0,s.useContext)(N().D);(0,s.useEffect)((()=>{!t&&l.length>0&&Pe().oo({environment:r,url:(0,ds().re)({organizationId:a,tabRoute:o,properties:{subtab:n},queryParams:{...i,[Zh]:l[0]}})})}),[r,t,a,l,n,i,o])}function Vd(e){let{organizationId:t,spaceId:a,tabRoute:s,subtab:n,queryParams:o}=e;const r=(0,S().K8)((()=>ve().default.state.currentUserStore),[]),l=ia({spaceId:a});return Fd({organizationId:t,spaceId:a,tabRoute:s,subtab:n,queryParams:o}),l&&r&&t?(0,i.jsx)(Ud,{spaceStore:l,userStore:r,organizationId:t}):null}let Hd=function(e){return e.LegalHolds="legal-holds",e.ContentSearch="content-search",e.AuditLog="audit-log",e}({});const Wd={[Hd.LegalHolds]:{title:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.legalHolds.title",defaultMessage:"Legal holds"})},[Hd.ContentSearch]:{title:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.contentSearch.title",defaultMessage:"Content search"})},[Hd.AuditLog]:{title:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.auditLog.title",defaultMessage:"Audit log"})}};function qd(e){const{subtab:t,organizationId:a}=e,n=(0,b().v3)(),o=(0,s.useMemo)((()=>t?function(e){switch(e){case Hd.LegalHolds:return Hd.LegalHolds;case Hd.ContentSearch:return Hd.ContentSearch;case Hd.AuditLog:return Hd.AuditLog;default:return Hd.LegalHolds}}(t):void 0),[t]);if(!a)return null;let r=null;switch(o){case Hd.ContentSearch:r=(0,i.jsx)(Vd,{...e});break;case Hd.AuditLog:r=(0,i.jsx)(hd,{...e});break;case Hd.LegalHolds:r=(0,i.jsx)(ql,{organizationId:a})}return r&&o?(0,i.jsx)(Gl().D,{breadcrumbs:[{onClick:()=>{(0,Yl().i)({environment:n,organizationId:a,from:{tabRoute:Jt().D8,properties:{subtab:o}},tabRoute:Jt().D8})},message:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.breadcrumb.goBack",defaultMessage:"Data & Compliance"})},{message:Wd[o].title}],children:r}):(0,i.jsx)(Gd,{...e})}function Gd(e){let{organizationId:t}=e;const a=(0,b().v3)(),n=(0,le().Z)(),{availableOrganizationFeatures:o}=(0,s.useContext)(N().D),r=o.legal_holds_enabled,{legalHolds:l,loading:d}=yl({organizationId:t,filters:{status:"active"}});return(0,i.jsxs)(Kl,{children:[(0,i.jsx)(Va()._,{title:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.title",defaultMessage:"Data & Compliance"}),byline:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.byline",defaultMessage:"Access tools for content search, audit logs, and legal holds to ensure data governance and meet regulatory requirements."}),bylineWidth:"70%"}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.title",defaultMessage:"Data governance"}),content:(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsx)(oe,{title:Wd[Hd.LegalHolds].title,byline:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.legalHolds.byline",defaultMessage:"Place members on legal hold and export their content."}),rightContent:d?(0,i.jsx)(re().A,{style:n.longShimmer}):(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.legalHolds.rightContent",defaultMessage:"{numLegalHolds, plural, one {# active legal hold} other {# active legal holds}}",values:{numLegalHolds:l.length.toLocaleString()}}),onClick:()=>Kd({environment:a,organizationId:t,tab:Hd.LegalHolds})}),(0,i.jsx)(oe,{title:Wd[Hd.ContentSearch].title,byline:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.contentSearch.byline",defaultMessage:"See all the pages this user has shared externally or with other members."}),onClick:()=>Kd({environment:a,organizationId:t,tab:Hd.ContentSearch})}),(0,i.jsx)(oe,{title:Wd[Hd.AuditLog].title,byline:(0,i.jsx)(v().sA,{id:"organization.dataAndCompliance.dataGovernance.auditLog.byline",defaultMessage:"See all recent activity on Notion."}),onClick:()=>Kd({environment:a,organizationId:t,tab:Hd.AuditLog})})]})})]})}function Kd(e){const{environment:t,organizationId:a,tab:s}=e;(0,Yl().i)({environment:t,organizationId:a,from:{tabRoute:Jt().D8},tabRoute:Jt().D8,properties:{subtab:s}})}var Yd=()=>a(118685);class Qd extends Yd().f{getInitialState(){return{categorySelections:{organization:Yd().o.All},categoryToggleOpen:{organization:!0},searchQuery:void 0,actionSelections:(0,Rt().s8)(tl().cj,(()=>!0)),isMenuOpen:!1,renderOrder:[{category:"organization",orderedActions:tl().A1.organization}]}}}var $d=()=>a(30731);const Xd=(0,v().j4)((function(e){const{parentStore:t,auditLogHistoricalUserStore:a,selectedActors:n,onChange:o,intl:r}=e,l=(0,b().v3)(),[d,c]=s.useState(new Set(n.map($d().Ht))),u=(0,i.jsx)(v().sA,{id:"auditlogActorFilter.title",defaultMessage:"User"}),g=(0,s.useCallback)((()=>{const e=Array.from(d).map($d().Hl).filter((e=>Boolean(e)));o(e)}),[d,o]),m=(0,s.useCallback)((()=>{const e=n.map($d().Ht);c(new Set(e))}),[n]),p=(0,s.useCallback)((e=>{"applyButton"!==e?m():g()}),[g,m]),f={title:u,tokenInputPlaceholder:r.formatMessage({defaultMessage:"Search user...",id:"auditlogActorFilter.searchActor.placeholder"}),resultSectionTitle:r.formatMessage({defaultMessage:"Select users",id:"auditlogActorFilter.searchActor.resultsTitle"}),componentDebugName:"SearchActorFilter"};return(0,i.jsx)(il().A,{mode:il().C.Pill,title:u,icon:h,iconStyles:{marginRight:2},items:Array.from(d),hasItemsSelected:(null==n?void 0:n.length)>0,onChange:e=>{c(new Set(e))},renderFooter:!0,allowApplyBatchSelection:!0,keepInputOnItemConfirm:!0,onMenuDismiss:p,labelText:f,performRequest:e=>async function(e){let{args:t,auditLogHistoricalUserStore:a,selectedActors:s,environment:n,parentStore:i}=e;const{query:o}=t,{allUserIds:r,allBotIds:l}=a.getState(),d=100,c=await Ia().T.searchActions.load(),u=await c.searchActorsById({environment:n,query:o,userIds:[...r],botIds:[...l],store:i}),g=[...u.users.map((e=>`notion_user:${e.id}`)),...u.bots.map((e=>`bot:${e.id}`))];if(o.length>0)return g.slice(0,d);const m=s.map($d().Ht),p=new Set(m),h=g.filter((e=>!p.has(e)));return[...m,...h].slice(0,Math.max(m.length,d))}({args:e,auditLogHistoricalUserStore:a,selectedActors:n,environment:l,parentStore:t}),renderResultMenuItem:(e,s)=>{var n;const o=function(e,t){const a=(0,$d().Hl)(e);if(!a)return(0,Ga().MR)(void 0);if("notion_user"===a.actorType)return(0,Ga().MR)(function(e,t){const a=_().LU.createChildStore(t,{table:w().oo,id:e});return a.getModel()}(a.actorId,t));return(0,Ga().oC)(function(e,t){const a=_().vK.createChildStore(t,{table:rl().GP,id:e});return a.getModel()}(a.actorId,t))}(e,t);return(0,i.jsx)(Zd,{...s,item:e,tempActorSelections:d,showRemovedBadge:a.isUserOrBotRemoved(null===(n=o.asActor)||void 0===n?void 0:n.id),actor:o,intl:r})},renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})})),Zd=(0,s.forwardRef)(((e,t)=>{const{item:n,intl:o,tempActorSelections:r,showRemovedBadge:l,actor:d}=e,c=(0,S().K8)((()=>(0,Ga().lR)(o,d)),[o,d]);return(0,s.createElement)(ts().A,{...e,ref:t,key:n,actor:d,useEmailAsTooltip:!0,checkState:r.has(n),userTitle:(0,i.jsxs)("div",{style:{display:"flex",gap:4},children:[c,l&&(0,i.jsx)(a(824160).A,{children:(0,i.jsx)(v().sA,{id:"auditlogActorFilter.removed_user",defaultMessage:"Removed"})})]})})}));function Jd(e){let{onChange:t}=e;const a=(0,S().uB)(void 0,Qd),s=(0,S().uB)(void 0,Qd);return(0,i.jsx)(fl().A,{lastSelectionStore:a,componentStore:s,onChange:t})}function ec(e){let{onChange:t}=e;const a=(0,S().uB)(void 0,xl().D),s=(0,S().uB)(void 0,xl().D);return(0,i.jsx)(fl().A,{lastSelectionStore:a,componentStore:s,onChange:t})}Zd.displayName="ResultMenuItem";const tc=(0,v().j4)((function(e){const{parentStore:t,organizationId:n,selectedSpaceId:o}=e,r=ia({spaceId:o}),{availableOrganizationFeatures:l}=(0,s.useContext)(N().D),[d,c]=(0,S().$y)(sl().A),[u,g,m]=(0,S().$y)(dl);return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:4},children:[l.organization_console_new_data_compliance_view_enabled?(0,i.jsx)(Md,{showAsPill:!0,shouldShowOrganizationOption:!0,organizationId:n,currentTabRoute:Jt().D8,currentTabProperties:{subtab:Hd.AuditLog},selectedSpaceStore:r}):(0,i.jsx)(Md,{showAsPill:!0,shouldShowOrganizationOption:!0,organizationId:n,currentTabRoute:Jt()._g,selectedSpaceStore:r}),(0,i.jsx)(nl().A,{mode:il().C.Pill,focused:!1,title:(0,i.jsx)(v().sA,{id:"settingsConsole.auditlogDateFilter.title",defaultMessage:"Date"}),icon:rr().D,value:d.timeRange,showButtons:"footer",onChange:e=>{c({...d,timeRange:e,pageNum:1})}}),(0,i.jsx)(Xd,{parentStore:t,auditLogHistoricalUserStore:m,selectedActors:d.actors,onChange:e=>{c({...d,actors:e,pageNum:1})}}),(0,a(299545).nw)(t)?(0,i.jsx)(Jd,{onChange:e=>{c({...d,actions:e,pageNum:1})}}):(0,i.jsx)(ec,{onChange:e=>{c({...d,actions:e,pageNum:1})}})]})}));function ac(e){let{isHovered:t,auditLogEntry:a,eventColumnId:s}=e;const n=(0,v().tz)(),o=id({auditLogEntry:a,eventColumnId:s});return(0,i.jsx)(us,{isHovered:t,iconFunction:l().d,tooltipMessage:n.formatMessage(sc.copyRow),buttonProps:{onClick:o}})}const sc=(0,v().YK)({copyRow:{defaultMessage:"Copy row",id:"organization.auditLog.table.copyRow"}}),nc=[{id:"timestampColumn",headerTitle:(0,i.jsx)(v().sA,{id:"auditlog.logTable.timestampColumn.header",defaultMessage:"Timestamp"}),renderCell:e=>{const t=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)($l().V,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{widthPercent:30,minWidth:160,maxWidth:200},sortable:!1},{id:"event",headerTitle:(0,i.jsx)(v().sA,{id:"settingsConsole.singleUserView.auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(Xl().m,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{widthPercent:70,minWidth:200,maxWidth:800},sortable:!1},{id:"copyAction",headerTitle:void 0,renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(ac,{isHovered:e.isRowHovered,auditLogEntry:e.auditLogEntry,eventColumnId:t})},widthData:{width:30},sortable:!1}];const ic=(0,v().j4)((function(e){const{searchResponse:t,parentStore:a,filters:s,setFilters:n}=e,o=t.results||[],r=t.hasMoreResults,l=e=>{const t={...s,pageNum:e};n(t)},d=(0,qt().A)(),c=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:nc,theme:e,containerMarginTop:0})),[]),u=o.map(((e,t)=>({id:t.toString(),auditLogEntry:e,parentStore:a,isClickable:!1}))),g=nc.map((e=>({...e,rowStyle:d.tableRow})));return(0,i.jsx)(Bt().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:g,rows:u,renderNoRowsComponent:ud,styles:c,loadMoreMethod:{type:"pages",onLoadNext:()=>{l(s.pageNum+1)},onLoadPrevious:()=>{l(s.pageNum-1)},hasNextPage:r,hasPrevPage:s.pageNum>1,currentPage:s.pageNum}})}));function oc(e){var t;let{userStore:a}=e;const n=(0,b().v3)(),o=(0,ks().l)(),r=zi({spaceStores:o}),[l,d]=(0,s.useState)(null===(t=o[0])||void 0===t?void 0:t.id),c=ia({spaceId:l}),u=(0,S().O$)(ul),[g,m]=(0,s.useState)({pageNum:1,pageSize:et().q,timeRange:{},actors:[{actorId:a.id,actorType:"notion_user"}],actions:[],sortOrder:tl().K7.CreatedNewest}),p=(0,sl()._)(g)!==u.filterStr?void 0:u.cachedResponses[g.pageNum];(0,s.useEffect)((()=>{c&&ml({environment:n,auditLogPointer:{id:c.id,table:c.table},filters:g})}),[n,c,g]);const h=(0,j().IS)((()=>({filters:{display:"flex",flexDirection:"row"},actionContainer:{display:"flex",flexDirection:"row",margin:"0 auto 12px"}})),[]);return c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:h.actionContainer,children:(0,i.jsxs)("div",{style:h.filters,children:[(0,i.jsx)(Fi,{selectedSpaceId:l,setSelectedSpaceId:d,spaceData:r,shouldHideClear:!0}),(0,i.jsx)(nl().A,{mode:il().C.Pill,focused:!1,title:(0,i.jsx)(v().sA,{id:"singleUserAuditLogTable.datedFilter.title",defaultMessage:"Date"}),icon:rr().D,value:g.timeRange,showButtons:"footer",onChange:e=>{m({...g,timeRange:e,pageNum:1})}}),(0,i.jsx)(ec,{onChange:e=>{m({...g,actions:e,pageNum:1})}})]})}),"loading"===(null==p?void 0:p.status)&&(0,i.jsx)(al().A,{}),"success"===(null==p?void 0:p.status)&&(0,i.jsx)(ic,{searchResponse:p,parentStore:c,filters:g,setFilters:m})]}):null}const rc=(0,v().YK)({auditLog:{id:"settingsConsole.singleUserView.auditLogTab.title",defaultMessage:"Audit log"},auditLogLabel:{id:"settingsConsole.singleUserView.auditLogTab.label",defaultMessage:"View all the audit log events for this user"}});function lc(e){const t=(0,v().tz)();return(0,i.jsxs)(ee,{children:[(0,i.jsx)(Va()._,{title:t.formatMessage(rc.auditLog),byline:t.formatMessage(rc.auditLogLabel)}),(0,i.jsx)(oc,{...e})]})}var dc=()=>a(907514),cc=()=>a(139125),uc=()=>a(325020);function gc(e){let{organizationStore:t,userStore:a,userData:n}=e;const{userSpaceAccessMap:o,updateUserRoleInSpaceCache:r,removeUserFromSpaceCache:l}=n,d=(0,v().tz)(),c=(0,j().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",gap:16,width:"100%",paddingBottom:16},divider:{color:e.stroke.secondary}})),[]),u=Array.from(o.values()).some((e=>(0,A().QE)(e))),[g,m]=s.useState({isOpen:!1}),[p,h]=s.useState({isOpen:!1}),f=(0,s.useCallback)((()=>{u&&m({isOpen:!0,memberSpaceIds:Array.from(o.entries()).map((e=>{let[t,a]=e;return(0,A().c7)(a)?t:void 0})).filter(Rt().O9)})}),[u,o]),x=(0,s.useCallback)((()=>{u&&h({isOpen:!0,guestSpaceIds:Array.from(o.entries()).map((e=>{let[t,a]=e;return(0,A().QE)(a)?t:void 0})).filter(Rt().O9)})}),[u,o]),y=(0,S().K8)((()=>a.getModel()),[a]);return u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:c.container,children:[(0,i.jsx)(D().D,{styleName:"Heading-17px/Regular",children:d.formatMessage(mc.manageGuestAccessTitle)}),(0,i.jsx)(Ae().y,{title:d.formatMessage(mc.convertGuestLabel),byline:d.formatMessage(mc.convertGuestDescription),item:(0,i.jsx)(V().A,{size:"md",onClick:f,children:d.formatMessage(mc.convertGuestButton)})}),(0,i.jsx)(lr().A,{dividerColor:c.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:d.formatMessage(mc.removeGuestLabel),byline:d.formatMessage(mc.removeGuestDescription),item:(0,i.jsx)(V().A,{size:"md",onClick:x,children:d.formatMessage(mc.removeGuestButton)})})]}),g.isOpen&&y&&(0,i.jsx)(Rs,{organizationStore:t,userModel:y,disabledSpaceIds:g.memberSpaceIds,onDismiss:()=>m({isOpen:!1}),refreshSpaceData:e=>r(e,"read_and_write")}),p.isOpen&&y&&(0,i.jsx)(Us,{organizationStore:t,userModel:y,guestSpaceIds:p.guestSpaceIds,onDismiss:()=>h({isOpen:!1}),refreshSpaceData:e=>l(e)})]}):null}const mc=(0,v().YK)({manageGuestAccessTitle:{id:"organizationConsole.singleUserView.manageGuestAccess.manageGuestAccessTitle",defaultMessage:"Guest access"},convertGuestLabel:{id:"organizationConsole.singleUserView.manageUserActions.convertGuestLabel",defaultMessage:"Upgrade guest to member"},convertGuestDescription:{id:"organizationConsole.singleUserView.manageUserActions.convertGuestDescription",defaultMessage:"Upgrade this guest to a workspace member with full workspace access."},convertGuestButton:{id:"organizationConsole.singleUserView.manageUserActions.convertGuestButton",defaultMessage:"Upgrade to member"},removeGuestLabel:{id:"organizationConsole.singleUserView.manageUserActions.removeGuestLabel",defaultMessage:"Remove guest access"},removeGuestDescription:{id:"organizationConsole.singleUserView.manageUserActions.removeGuestDescription",defaultMessage:"Revoke their guest's access to all pages in select workspaces."},removeGuestButton:{id:"organizationConsole.singleUserView.manageUserActions.removeGuestButton",defaultMessage:"Remove guest access"}});var pc=()=>a(966505);function hc(e){const{userId:t,onDismiss:a,onSubmit:n,shouldWarnLegalHold:o}=e,r=(0,b().v3)(),l=(0,v().tz)(),d=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:440,display:"flex",flexDirection:"column",alignItems:"center"},confirmationContainer:{display:"flex",gap:10,alignItems:"center"}})),[]),c=(0,S().K8)((()=>{if(!t)return"";return new(ft().L)(r,{table:w().oo,id:t}).getDisplayName(l)}),[r,t,l]);const[u,g]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:(0,it().J)(d.icon),title:o?l.formatMessage(fc.legalHoldTitle):l.formatMessage(fc.title),byline:l.formatMessage(fc.byline,{userName:c,b:e=>(0,i.jsx)("b",{children:e})})}),footer:(0,i.jsx)(K().jl,{primaryText:l.formatMessage(fc.buttonText),primaryAction:async()=>{g(!0),await async function(){await n(),a()}(),g(!1)},primaryDisabled:u||!m,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.destructiveUserAction.cancelButton",defaultMessage:"Cancel"}),secondaryAction:a,isDarkRed:!0}),children:(0,i.jsx)("div",{style:d.container,children:(0,i.jsxs)("div",{style:d.confirmationContainer,children:[(0,i.jsx)(rt().A,{checked:m,size:14,checkSize:10,onClick:()=>p(!m)}),(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:l.formatMessage(fc.confirmationText)})]})})})})}const fc=(0,v().YK)({title:{id:"orgConsole.people.modal.deleteUser.title",defaultMessage:"Are you sure you want to delete this user?"},legalHoldTitle:{id:"orgConsole.people.modal.deleteUser.legalHoldTitle",defaultMessage:"This user is currently on legal hold."},byline:{id:"orgConsole.people.modal.deleteUser.byline",defaultMessage:"<b>{userName}</b> will be removed from all workspaces, losing access to content, groups, and teamspaces. Restore within 30 days before permanent deletion."},confirmationText:{id:"orgConsole.people.modal.deleteUser.confirmationText",defaultMessage:"I understand this deletion is permanent"},buttonText:{id:"orgConsole.people.modal.deleteUser.buttonText",defaultMessage:"Delete user"}});function xc(e){let{userStore:t,isSuspended:a,disabled:n,shouldWarnLegalHold:o}=e;const r=(0,b().v3)(),[l,d]=(0,s.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Sr().E,{color:"uiRed",onClick:()=>d(!0),disabled:n,children:(0,i.jsx)(v().sA,{id:"organizationConsole.singleUserView.manageUserActions.deleteUserAccountButton",defaultMessage:"Delete user"})}),l&&(0,i.jsx)(hc,{shouldWarnLegalHold:o,userId:t.id,onDismiss:()=>d(!1),onSubmit:async()=>await vc({environment:r,isSuspended:a,userId:t.id})})]})}async function vc(e){let{environment:t,isSuspended:a,userId:s}=e;pc().KB(t,{user_status:a?"suspended":"notSuspended"});const n=await M().callApi({eventName:"deleteManagedUser",environment:t,data:{userId:s}});pc().$W(t,{user_status:a?"suspended":"notSuspended"}),"failed"===n.type&&C().c1(n.error.message)}var yc=()=>a(412632);function bc(e){const t=(0,b().v3)(),{type:a,userId:n,onDismiss:o,onSubmit:r}=e,l=(0,v().tz)(),d=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:375}})),[]),c=(0,S().K8)((()=>{if(!n)return"";return new(ft().L)(t,{table:w().oo,id:n}).getDisplayName(l)}),[t,n,l]);const{title:u,byline:g,buttonText:m}=function(){switch(a){case"suspend":return{title:l.formatMessage(Sc.suspendTitle),byline:l.formatMessage(Sc.suspendByline,{userName:c,b:e=>(0,i.jsx)("b",{children:e})}),buttonText:l.formatMessage(Sc.suspendButton)};case"resetPasswordSingle":return{title:l.formatMessage(Sc.resetPasswordSingleTitle),byline:l.formatMessage(Sc.resetPasswordSingleByline),buttonText:l.formatMessage(Sc.resetPasswordSingleButton)};case"resetPasswordAll":return{title:l.formatMessage(Sc.resetPasswordAllTitle),byline:l.formatMessage(Sc.resetPasswordAllByline),buttonText:l.formatMessage(Sc.resetPasswordAllButton)};case"logoutSingle":return{title:l.formatMessage(Sc.logoutSingleTitle),byline:l.formatMessage(Sc.logoutSingleByline),buttonText:l.formatMessage(Sc.logoutSingleButton)};case"logoutAll":return{title:l.formatMessage(Sc.logoutAllTitle),byline:l.formatMessage(Sc.logoutAllByline),buttonText:l.formatMessage(Sc.logoutAllButton)};default:(0,Rt().HB)(a)}}();const[p,h]=(0,s.useState)(!1);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:(0,kr().q)(d.icon),title:u,byline:(0,i.jsx)("div",{style:d.container,children:g})}),footer:(0,i.jsx)(K().jl,{primaryText:m,primaryAction:async()=>{h(!0),await async function(){await r(),o()}(),h(!1)},primaryDisabled:p,secondaryText:(0,i.jsx)(v().sA,{id:"orgConsole.people.modal.destructiveUserAction.cancelButton",defaultMessage:"Cancel"}),secondaryAction:o,isLightRed:!0})})})}const Sc=(0,v().YK)({suspendTitle:{id:"orgConsole.people.modal.destructiveUserAction.suspendTitle",defaultMessage:"Suspend this user?"},suspendByline:{id:"orgConsole.people.modal.destructiveUserAction.suspendByline",defaultMessage:"<b>{userName}</b> will lose all workspace and notification access. Their content, comments, and @mentions will stay visible, and integrations will remain active."},suspendButton:{id:"orgConsole.people.modal.destructiveUserAction.suspendButton",defaultMessage:"Suspend user"},resetPasswordSingleTitle:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordTitle",defaultMessage:"Reset password for this user?"},resetPasswordSingleByline:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordByline",defaultMessage:"This will log the user out, remove 2-step verification, and require re-authentication via email. The user must set a new password to log back into Notion."},resetPasswordSingleButton:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordButton",defaultMessage:"Reset password"},resetPasswordAllTitle:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordAllTitle",defaultMessage:"Reset password for all managed users?"},resetPasswordAllByline:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordAllByline",defaultMessage:"This will log the users out, remove 2-step verification, and require re-authentication via email. All managed users must set new passwords to log back into Notion."},resetPasswordAllButton:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordAllButton",defaultMessage:"Reset all passwords"},logoutSingleTitle:{id:"orgConsole.people.modal.destructiveUserAction.logoutTitle",defaultMessage:"Log out this user?"},logoutSingleByline:{id:"orgConsole.people.modal.destructiveUserAction.logoutByline",defaultMessage:"You are about to log out this user from their current session. They will need to re-authenticate to log back into Notion."},logoutSingleButton:{id:"orgConsole.people.modal.destructiveUserAction.logoutButton",defaultMessage:"Log out user"},logoutAllTitle:{id:"orgConsole.people.modal.destructiveUserAction.logoutAllTitle",defaultMessage:"Log out all managed users?"},logoutAllByline:{id:"orgConsole.people.modal.destructiveUserAction.logoutAllByline",defaultMessage:"You are about to log out the users from their current session. They will need to re-authenticate to log back into Notion."},logoutAllButton:{id:"orgConsole.people.modal.destructiveUserAction.logoutAllButton",defaultMessage:"Log out all users"}});function jc(e){let{organizationStore:t,userId:a,disabled:n,isRed:o}=e;const r=(0,b().v3)(),[l,d]=(0,s.useState)(!1),c=a?(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedAccounts.logoutUsers.logoutButton",defaultMessage:"Force log out"}):(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedAccounts.logoutAllUsers.logoutButton",defaultMessage:"Log out all users"}),u=()=>d(!0);return(0,i.jsxs)(i.Fragment,{children:[o?(0,i.jsx)(Sr().E,{color:"uiRed",disabled:n,onClick:u,children:c}):(0,i.jsx)(V().A,{size:"md",disabled:n,disabledFeedback:n,onClick:u,children:c}),l&&(0,i.jsx)(bc,{type:a?"logoutSingle":"logoutAll",onDismiss:()=>d(!1),onSubmit:async()=>{a?await wc({environment:r,organizationId:t.id,userId:a}):await async function(e){let{environment:t,organizationId:a,emailDomains:s}=e;pc().V6(t,{email_domains:s}),await M().callApi({eventName:"logoutManagedUsers",environment:t,data:{organizationId:a,target:{type:yc().u.Domains,emailDomains:s}}}),ot().D6({label:(0,i.jsx)(v().sA,{id:"managedAccounts.toastMessage.logout.all.success",defaultMessage:"Successfully logged out all managed accounts"})}),pc().wE(t,{email_domains:s})}({environment:r,organizationId:t.id,emailDomains:t.getEmailDomains()})}})]})}async function wc(e){let{environment:t,organizationId:a,userId:s}=e;pc().fv(t),await M().callApi({eventName:"logoutManagedUsers",environment:t,data:{organizationId:a,target:{type:yc().u.User,userId:s}}}),ot().D6({label:(0,i.jsx)(v().sA,{id:"managedAccounts.toastMessage.logout.single.success",defaultMessage:"Successfully logged out user"})}),pc().fv(t)}function Ac(e){let{organizationStore:t,userId:a,disabled:n,isRed:o}=e;const r=(0,b().v3)(),[l,d]=(0,s.useState)(!1),c=a?(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedAccounts.forcePasswordReset.resetSingleButton",defaultMessage:"Reset password"}):(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedAccounts.forcePasswordReset.resetAllButton",defaultMessage:"Reset all passwords"}),u=()=>d(!0);return(0,i.jsxs)(i.Fragment,{children:[o?(0,i.jsx)(Sr().E,{color:"uiRed",disabled:n,onClick:u,children:c}):(0,i.jsx)(V().A,{size:"md",disabled:n,disabledFeedback:n,onClick:u,children:c}),l&&(0,i.jsx)(bc,{type:a?"resetPasswordSingle":"resetPasswordAll",onDismiss:()=>d(!1),onSubmit:async()=>{a?await Mc({environment:r,organizationId:t.id,userId:a}):await async function(e){let{environment:t,organizationId:a,emailDomains:s}=e;pc().m6(t,{email_domains:s}),await M().callApi({eventName:"resetPasswordsForManagedUsers",environment:t,data:{organizationId:a,target:{type:yc().u.Domains,emailDomains:s}}}),ot().D6({label:(0,i.jsx)(v().sA,{id:"managedAccounts.toastMessage.forcePasswordReset.all.success",defaultMessage:"Successfully reset passwords for all managed accounts"})}),pc().Jm(t,{email_domains:s})}({environment:r,organizationId:t.id,emailDomains:t.getEmailDomains()})}})]})}async function Mc(e){let{environment:t,organizationId:a,userId:s}=e;pc().HD(t),await M().callApi({eventName:"resetPasswordsForManagedUsers",environment:t,data:{organizationId:a,target:{type:yc().u.User,userId:s}}}),ot().D6({label:(0,i.jsx)(v().sA,{id:"managedUsers.toastMessage.forcePasswordReset.success",defaultMessage:"Successfully reset password for user"})}),pc().CF(t)}var Cc=()=>a(702723),Ic=()=>a(475971);function Tc(e){let{isAccessGranted:t,disabled:a,toggleDataAccessConsent:s}=e;const n=t?"granted":"denied",o=[{key:"granted",label:(0,i.jsx)(v().sA,{id:"organizationConsole.singleUserView.details.supportAccessGranted",defaultMessage:"Access granted"})},{key:"denied",label:(0,i.jsx)(v().sA,{id:"organizationConsole.singleUserView.details.supportAccessNotGranted",defaultMessage:"Not granted"})}],r=(0,j().IS)((e=>({button:{border:`1px solid ${e.outlineButtonBorder}`,...Ic().W,...a&&Ic().M}})),[a]);return(0,i.jsx)(Cc().m,{isMobile:!1,disabled:a,type:"dropdown",currentOption:n,options:o,onSelectOption:e=>{e!==n&&s()},buttonStyle:r.button,placementToOrigin:$a().W.Bottom,alignmentToOrigin:$a().C.End})}function kc(e){let{userStore:t,isSuspended:a,disabled:n}=e;const o=(0,b().v3)(),[r,l]=(0,s.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V().A,{size:"md",onClick:async()=>{a?await _c({environment:o,isSuspended:a,userId:t.id}):l(!0)},disabled:n,disabledFeedback:n,children:a?(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedAccounts.suspendUser.reactivateButton",defaultMessage:"Re-activate user"}):(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedAccounts.suspendUser.suspendButton",defaultMessage:"Suspend user"})}),r&&(0,i.jsx)(bc,{type:"suspend",userId:t.id,onDismiss:()=>l(!1),onSubmit:async()=>await _c({environment:o,isSuspended:a,userId:t.id})})]})}async function _c(e){let{environment:t,isSuspended:a,userId:s}=e;a||pc().th(t);const n=await M().callApi({eventName:"updateUserSuspension",environment:t,data:{userId:s,suspend:!a}});a?pc().P4(t):pc().Az(t,{suspended_user_id:s}),"failed"===n.type&&C().f1((0,I().Hu)(T().A.getIntl(),n))}function Dc(e){let{organizationStore:t,userStore:a,isUserManaged:s,isAccessGranted:n,toggleDataAccessConsent:o,isOnLegalHold:r}=e;const l=(0,v().tz)(),d=a.id,c=(0,S().K8)((()=>a.getIsSuspended()),[a]),u=(0,S().K8)((()=>t.isUserLastOwner(a.id)),[t,a.id]),g=(0,j().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]);return(0,i.jsxs)("div",{style:g.container,children:[(0,i.jsx)(D().D,{styleName:"Heading-17px/Regular",children:l.formatMessage(Pc.manageUserTitle)}),!s&&(0,i.jsx)(_r().l,{iconGroup:Tr().Z,label:l.formatMessage(Pc.settingsNotAvailable),description:l.formatMessage(Pc.settingsNotAvailableDescription),display:"inline",tint:"gray"}),(0,i.jsx)(Ae().y,{title:l.formatMessage(Pc.supportAccessLabel),byline:l.formatMessage(Pc.supportAccessDescription),item:(0,i.jsx)(zc,{disableTooltip:s,children:(0,i.jsx)(Tc,{isAccessGranted:n,disabled:!s,toggleDataAccessConsent:o})})}),(0,i.jsx)(lr().A,{dividerColor:g.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:l.formatMessage(Pc.changeStatusLabel),byline:l.formatMessage(Pc.changeStatusDescription),item:(0,i.jsx)(zc,{disableTooltip:s,children:(0,i.jsx)(kc,{userStore:a,isSuspended:c,disabled:!s})})}),(0,i.jsx)(lr().A,{dividerColor:g.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:l.formatMessage(Pc.forcePasswordResetLabel),byline:l.formatMessage(Pc.forcePasswordResetDescription),item:(0,i.jsx)(zc,{disableTooltip:s,children:(0,i.jsx)(Ac,{organizationStore:t,userId:d,disabled:!s})})}),(0,i.jsx)(lr().A,{dividerColor:g.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:l.formatMessage(Pc.forceLogoutLabel),byline:l.formatMessage(Pc.forceLogoutDescription),item:(0,i.jsx)(zc,{disableTooltip:s,children:(0,i.jsx)(jc,{organizationStore:t,userId:d,disabled:!s})})}),(0,i.jsx)(lr().A,{dividerColor:g.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:l.formatMessage(Pc.deleteUserAccountLabel),byline:l.formatMessage(Pc.deleteUserAccountDescription),item:(0,i.jsx)(zc,{disableTooltip:s&&!u,disabledTooltipText:u&&s?Pc.deleteAccountDisabledForLastOrgOwner:void 0,children:(0,i.jsx)(xc,{userStore:a,isSuspended:c,disabled:!s||u,shouldWarnLegalHold:s&&r})})})]})}function zc(e){let{children:t,disableTooltip:a,disabledTooltipText:s}=e;const n=(0,v().tz)();return(0,i.jsx)(q().A,{renderTooltip:()=>n.formatMessage(s??Pc.settingsNotAvailableTooltip),render:e=>(0,i.jsx)("div",{...e,children:t}),disableTooltip:a})}const Pc=(0,v().YK)({manageUserTitle:{id:"organizationConsole.singleUserView.manageUserActions.manageUserTitle",defaultMessage:"Managed user access"},settingsNotAvailable:{id:"organizationConsole.singleUserView.manageUserActions.notAvailable",defaultMessage:"Managed actions are not available for this user"},settingsNotAvailableDescription:{id:"organizationConsole.singleUserView.manageUserActions.notAvailableDescription",defaultMessage:"These settings are only available for user accounts with verified domains."},settingsNotAvailableTooltip:{id:"organizationConsole.singleUserView.manageUserActions.notAvailableTooltip",defaultMessage:"Not available for this role"},supportAccessLabel:{id:"organizationConsole.singleUserView.manageUserActions.supportAccessLabel",defaultMessage:"Allow support access"},supportAccessDescription:{id:"organizationConsole.singleUserView.manageUserActions.supportAccessDescription",defaultMessage:"Enable Notion support to troubleshoot or recover content."},changeStatusLabel:{id:"organizationConsole.singleUserView.manageUserActions.changeStatusLabel",defaultMessage:"Suspend or re-activate user"},changeStatusDescription:{id:"organizationConsole.singleUserView.manageUserActions.changeStatusDescription",defaultMessage:"Suspend to restrict all workspace access while keeping content and integrations active. Reactivate to restore access."},forcePasswordResetLabel:{id:"organizationConsole.singleUserView.manageUserActions.forcePasswordResetLabel",defaultMessage:"Reset password"},forcePasswordResetDescription:{id:"organizationConsole.singleUserView.manageUserActions.forcePasswordResetDescription",defaultMessage:"Log out user and require password reset on next login."},forceLogoutLabel:{id:"organizationConsole.singleUserView.manageUserActions.forceLogoutLabel",defaultMessage:"Force log out"},forceLogoutDescription:{id:"organizationConsole.singleUserView.manageUserActions.forceLogoutDescription",defaultMessage:"Log out user from all workspaces and require re-authentication."},deleteUserAccountLabel:{id:"organizationConsole.singleUserView.manageUserActions.deleteUserAccountLabel",defaultMessage:"Delete user account"},deleteUserAccountDescription:{id:"organizationConsole.singleUserView.manageUserActions.deleteUserAccountDescription",defaultMessage:"Remove this user from all workspaces. You have 30 days to restore access and data."},deleteAccountDisabledForLastOrgOwner:{id:"organizationConsole.singleUserView.manageUserActions.deleteAccountDisabledForLastOrgOwner",defaultMessage:"At least one organization owner is required. Add a new organization owner to enable this action."}}),Nc=(0,v().YK)({editButtonText:{id:"organizationConsole.singleUserView.editProfile.button",defaultMessage:"Edit profile"},disabledEditButtonTooltip:{id:"organizationConsole.singleUserView.manageUserActions.notAvailableTooltip",defaultMessage:"Not available for this role"},emailLabel:{id:"organizationConsole.singleUserView.details.emailLabel",defaultMessage:"Email"},lastActiveLabel:{id:"organizationConsole.singleUserView.details.lastActiveLabel",defaultMessage:"Last active"},emptyLastActive:{id:"identityProvisioningSettings.managedUsers.details.emptyLastActive",defaultMessage:"No activity"},supportAccessLabel:{id:"organizationConsole.singleUserView.details.supportAccessLabel",defaultMessage:"Support access"},supportAccessGranted:{id:"organizationConsole.singleUserView.details.supportAccessGranted",defaultMessage:"Access granted"},supportAccessNotGranted:{id:"organizationConsole.singleUserView.details.supportAccessNotGranted",defaultMessage:"Not granted"},unsupported:{id:"organizationConsole.singleUserView.details.unsupported",defaultMessage:"Unsupported"},joinedLabel:{id:"organizationConsole.singleUserView.details.joinedLabel",defaultMessage:"Joined"},emptyAccountCreated:{id:"identityProvisioningSettings.managedUsers.details.emptyAccountCreated",defaultMessage:"Incomplete"},toastSuccessfulCopy:{defaultMessage:"Copied email to clipboard",id:"singleUserModal.emailCell.copyButton.successfulCopy"}});function Rc(e){let{organizationStore:t,userStore:s,userData:n,isOnLegalHold:o}=e;const{lastActiveAt:r,userSpaceAccessMap:l}=n,d=(0,v().tz)(),c=(0,b().v3)(),{longTallShimmer:u}=(0,le().Z)(),{resetState:g,saveChanges:m,profilePhoto:p,name:h,email:f}=(0,a(721249).u)({userStore:s}),x=function(e){const t=Array.from(e.userSpaceAccessMap.values()).map((e=>(0,A().c7)(e)?(0,Ts().jM)(e.role):(0,A().QE)(e)?"page_guest":void(0,Rt().HB)(e)));return(0,Is().nn)(e.organizationRole,t)}(n),y=(0,S().K8)((()=>s.getIsSuspended()),[s]),w=(0,S().K8)((()=>y?{type:"suspended"}:(0,cc().qh)({profilePhoto:p.value,name:h.value,email:f.value})),[y,p.value,h.value,f.value]),{userName:M,userEmail:C}=(0,S().K8)((()=>s.isReady()?{userName:s.getDisplayName(d),userEmail:s.getEmail()}:{userName:void 0,userEmail:void 0}),[s,d]),I=(0,S().K8)((()=>{const e=t.getEmailDomains();if(C&&(0,gt().Wy)(e,C))return(0,gt().zN)(C)}),[t,C]),T=void 0!==I,{isAccessGranted:k,toggleDataAccessConsent:_}=(0,a(555893).e)({userId:s.id,isUserUnmanaged:!T}),z=function(e){let t;for(const a of e.values())(0,A().c7)(a)&&a.firstJoinedSpaceTime&&(void 0===t||t>a.firstJoinedSpaceTime)&&(t=a.firstJoinedSpaceTime);return t}(l),P=(0,j().IS)((e=>({avatarContainer:{marginTop:-88,display:"flex",width:"100%"},nameContainer:{paddingTop:13,color:e.primaryBlack,display:"flex",alignItems:"center",gap:8},nameInput:{fontSize:26,fontWeight:L().Wy.bold,maxWidth:300},badgesContainer:{paddingTop:9,display:"flex"},label:{color:e.mediumTextColor},divider:{paddingTop:28},emailCell:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},infoContainer:{display:"grid",gridAutoColumns:"minmax(0, 1fr)",gridAutoFlow:"column",rowGap:16,columnGap:20},mainContentContainer:{display:"flex",flexDirection:"column",gap:40}})),[]),N=(0,a(402390).H)(d),R=(0,S().K8)((()=>!a(227440).A.state.online),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z,{}),(0,i.jsxs)(ee,{children:[(0,i.jsx)("div",{style:P.avatarContainer,children:(0,i.jsx)(cc().Ay,{size:80,avatarType:w,disabled:!T,isOffline:R,loading:p.loading,onUploadProfilePhoto:p.setAndSave,onRemoveProfilePhoto:p.remove})}),(0,i.jsxs)("div",{style:P.nameContainer,children:[M?(0,i.jsx)(D().D,{styleName:"UITitle-26px/Bold",children:M}):(0,i.jsx)(re().A,{style:u}),(0,i.jsx)($,{icon:gn().u,title:(0,i.jsx)(v().sA,{id:"organization.general.editDetailsModal.title",defaultMessage:"Edit user details"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.editDetailsModal.byline",defaultMessage:"Edit this user's name and email address below. Changes will take effect immediately upon saving."}),name:M,email:C,onDismiss:g,onSave:m,onNameChange:h.set,onEmailChange:f.set,disabled:!M||!T,disabledTooltipText:d.formatMessage(Nc.disabledEditButtonTooltip)})]}),(0,i.jsxs)("div",{style:P.mainContentContainer,children:[(0,i.jsxs)("div",{style:P.badgesContainer,children:[y&&(0,i.jsx)(uc().zJ,{}),(0,i.jsx)(uc().NQ,{highestRole:x}),(0,i.jsx)(uc()._B,{emailDomain:I}),o&&(0,i.jsx)(uc().sg,{})]}),(0,i.jsxs)("div",{style:P.infoContainer,children:[(0,i.jsx)(dr().LX,{row:1,col:1,children:(0,i.jsx)(cr,{iconFunction:Ks,label:Nc.emailLabel,value:(0,i.jsxs)(ne().fI,{gap:4,alignItems:"center",children:[(0,i.jsx)("div",{style:P.emailCell,children:C}),C&&(0,i.jsx)(ws().lz,{isHovered:!0,size:16,containerStyles:{marginBlock:1},onCopyClick:async()=>{const e=await sd().R.clipboardActions.load();await e.copyString({stringValue:C,environment:c,copiedMessage:e.clipboardMessages.copiedPropertyToClipboard}),ot().D6({label:d.formatMessage(Nc.toastSuccessfulCopy)})}})]})},"email")}),(0,i.jsx)(dr().LX,{row:1,col:2,children:(0,i.jsx)(cr,{iconFunction:rr().D,label:Nc.lastActiveLabel,value:r?(0,dc().DG)(r):d.formatMessage(Nc.emptyLastActive)},"lastActive")}),(0,i.jsx)(dr().LX,{row:2,col:1,children:(0,i.jsx)(cr,{iconFunction:or().T,label:Nc.supportAccessLabel,value:d.formatMessage(T?k?Nc.supportAccessGranted:Nc.supportAccessNotGranted:Nc.unsupported)},"supportAccess")}),(0,i.jsx)(dr().LX,{row:2,col:2,children:(0,i.jsx)(cr,{iconFunction:rr().D,label:Nc.joinedLabel,value:z?(0,a(869190).W_)(z,"medium",N):d.formatMessage(Nc.emptyAccountCreated)},"joined")})]}),(0,i.jsx)(lr().A,{size:1}),(0,i.jsx)(gc,{organizationStore:t,userStore:s,userData:n}),(0,i.jsx)(Dc,{organizationStore:t,userStore:s,isUserManaged:T,isAccessGranted:k,toggleDataAccessConsent:_,isOnLegalHold:o})]})]})]})}const Bc=et().q;var Lc=()=>a(203093),Ec=()=>a(684088),Oc=()=>a(51703);const Uc="unset";function Fc(e){return"none"===e||"everyone"!==e&&void(0,Rt().HB)(e)}function Vc(e){return!0===e?"no":!1===e?"yes":void(0,Rt().HB)(e)}function Hc(e){return!0===e?"none":!1===e?"everyone":void(0,Rt().HB)(e)}function Wc(e){return Hc(e.getDisablePublicAccess())}const qc={settingName:"publish-sites",teamSettingName:"disable_public_access",title:(0,i.jsx)(v().sA,{id:"organization.security.settings.publishingSites.title",defaultMessage:"Publishing sites & forms"}),byline:(0,i.jsx)(v().sA,{id:"organization.security.settings.publishingSites.byline",defaultMessage:"Control who can publish sites and forms to the web."}),getOptions:cu,getValueFromSpace:Wc,getValueFromTeam:Wc,getValueFromOrganization:e=>{const t=e.getDisablePublicAccess();if(void 0!==t)return Hc(t)},formatValueToSave:e=>({disable_public_access:Fc(e)}),formatUndefinedToSave:()=>({disable_public_access:null})};function Gc(e){return Hc(e.getDisableExport())}const Kc={settingName:"export-pages",teamSettingName:"disable_export",title:(0,i.jsx)(v().sA,{id:"organization.security.settings.exportingPages.title",defaultMessage:"Exporting Pages"}),byline:(0,i.jsx)(v().sA,{id:"organization.security.settings.exportingPages.byline",defaultMessage:"Control who can export pages."}),getOptions:cu,getValueFromSpace:Gc,getValueFromTeam:Gc,getValueFromOrganization:e=>{const t=e.getDisableExport();if(void 0!==t)return Hc(t)},formatValueToSave:e=>({disable_export:Fc(e)}),formatUndefinedToSave:()=>({disable_export:null})},Yc={settingName:"duplicate-pages",title:(0,i.jsx)(v().sA,{id:"organization.security.settings.duplicatePages.title",defaultMessage:"Duplicating pages to other workspaces"}),byline:(0,i.jsx)(v().sA,{id:"organization.security.settings.duplicatePages.byline",defaultMessage:"Control who can duplicate pages into other workspaces."}),getOptions:cu,getValueFromSpace:e=>Hc(e.getDisableMoveToSpace()),getValueFromOrganization:e=>{const t=e.getDisableMoveToSpace();if(void 0!==t)return Hc(t)},formatValueToSave:e=>({disable_move_to_space:Fc(e)}),formatUndefinedToSave:()=>({disable_move_to_space:null})};function Qc(e){let{store:t,guestRequestStore:a}=e;return $c({disableGuests:t.getDisableGuests(),enableGuestInviteRequests:a.getEnableGuestInviteRequest()})}function $c(e){let{disableGuests:t,enableGuestInviteRequests:a}=e;return!1===t?"everyone":!0===t&&!0===a?"request":!0===t?"wo_only":void(0,Rt().HB)(t)}const Xc={settingName:"guest-invites",teamSettingName:"disable_guests",title:(0,i.jsx)(v().sA,{id:"organization.security.settings.addingGuests.title",defaultMessage:"Adding guests"}),byline:(0,i.jsx)(v().sA,{id:"organization.security.settings.addingGuests.byline",defaultMessage:"Manage how members can add guests to pages."}),getOptions:()=>[{key:"everyone",label:au},{key:"request",label:tu},{key:"wo_only",label:nu}],getValueFromSpace:e=>Qc({store:e,guestRequestStore:e}),getValueFromTeam:(e,t)=>Qc({store:e,guestRequestStore:t}),getValueFromOrganization:e=>{const t=e.getDisableGuests(),a=e.getEnableGuestInviteRequest();if(void 0!==t&&void 0!==a)return $c({disableGuests:t,enableGuestInviteRequests:a})},formatValueToSave:e=>"wo_only"===e?{disable_guests:!0,enable_guest_invite_requests:!1}:"request"===e?{disable_guests:!0,enable_guest_invite_requests:!0}:"everyone"===e?{disable_guests:!1,enable_guest_invite_requests:!1}:void(0,Rt().HB)(e),formatUndefinedToSave:()=>({disable_guests:null,enable_guest_invite_requests:null})},Zc={settingName:"member-requests",title:(0,i.jsx)(v().sA,{id:"organization.security.settings.memberRequests.title",defaultMessage:"Requesting membership"}),byline:(0,i.jsx)(v().sA,{id:"organization.security.settings.memberRequests.byline",defaultMessage:"Manage whether members can submit requests to add more members."}),getOptions:uu,getValueFromSpace:e=>Vc(e.getDisableMembershipRequests()),getValueFromOrganization:e=>{const t=e.getDisableMembershipRequests();if(void 0!==t)return Vc(t)},formatValueToSave:e=>"yes"===e?{disable_membership_requests:!1}:"no"===e?{disable_membership_requests:!0}:void(0,Rt().HB)(e),formatUndefinedToSave:()=>({disable_membership_requests:null})},Jc={settingName:"restrict-integrations",title:(0,i.jsx)(v().sA,{id:"organization.security.settings.integrations.title",defaultMessage:"Adding integrations"}),byline:(0,i.jsx)(v().sA,{id:"organization.security.settings.integrations.byline",defaultMessage:"Control what integrations members can connect."}),getOptions:()=>[{key:"approved_only",label:iu},{key:"approved_or_built_by_notion",label:ou},{key:"no_restrictions",label:ru}],getValueFromSpace:e=>e.getIntegrationRestrictions()??"no_restrictions",getValueFromOrganization:e=>e.getIntegrationRestrictions(),formatValueToSave:e=>({integration_restrictions:e}),formatUndefinedToSave:()=>({integration_restrictions:null})},eu={settingName:"webhook-automations",title:(0,i.jsx)(v().sA,{id:"organization.security.settings.webhookAutomations.title",defaultMessage:"Webhook automations"}),byline:(0,i.jsx)(v().sA,{id:"organization.security.settings.webhookAutomations.byline",defaultMessage:"Manage access to webhooks in database automations and buttons."}),getOptions:uu,getValueFromSpace:e=>Vc(e.getDisallowWebhookAutomationAction()),getValueFromOrganization:e=>{const t=e.getDisallowWebhookAutomationAction();if(void 0!==t)return Vc(t)},formatValueToSave:e=>"yes"===e?{disallow_webhook_automation_action:!1}:"no"===e?{disallow_webhook_automation_action:!0}:void(0,Rt().HB)(e),formatUndefinedToSave:()=>({disallow_webhook_automation_action:null})},tu=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.byRequest",defaultMessage:"By request only"}),au=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.everyone",defaultMessage:"Enabled for everyone"}),su=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.noOne",defaultMessage:"Disabled for everyone"}),nu=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.workspaceOwnersOnly",defaultMessage:"Workspace owners only"}),iu=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.onlyApproved",defaultMessage:"Approved only"}),ou=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.approvedOrNotion",defaultMessage:"Native or approved"}),ru=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.noRestrictions",defaultMessage:"All integrations"}),lu=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.enabledForMembers",defaultMessage:"Enabled for members"}),du=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.disabledForMembers",defaultMessage:"Disabled for members"});function cu(){return[{key:"everyone",label:au},{key:"none",label:su}]}function uu(){return[{key:"yes",label:lu},{key:"no",label:du}]}const gu=(0,i.jsx)(v().sA,{id:"settingsConsole.setting.value.workspaceManaged",defaultMessage:"Workspace managed"}),mu={[qc.settingName]:qc,[Kc.settingName]:Kc,[Yc.settingName]:Yc,[Xc.settingName]:Xc,[Zc.settingName]:Zc,[Jc.settingName]:Jc,[eu.settingName]:eu};const pu="setting-name",hu=(0,v().YK)({name:{id:"settingsConsole.securityTable.column.settingName.title",defaultMessage:"Name"},members:{id:"settingsConsole.securityTable.column.members.title",defaultMessage:"Members"},teams:{id:"settingsConsole.securityTable.column.team.title",defaultMessage:"Teamspaces"},guests:{id:"settingsConsole.securityTable.column.guests.title",defaultMessage:"Guests"},sites:{id:"settingsConsole.securityTable.column.sites.title",defaultMessage:"Sites"}}),fu={id:"name",headerTitle:(0,i.jsx)(v().sA,{...hu.name}),renderCell:e=>(0,i.jsx)(Lt().s7,{title:e.title,byline:e.byline,icon:(0,i.jsx)(E().A,{disabled:!0,icon:e.icon,title:e.title,size:e.iconSize,isLarge:!0,isEmptyPage:!1}),iconSize:e.iconSize,iconMargin:Lt().Ji,summaryStyles:{width:`calc(100% - ${e.iconSize+Lt().Ji}px)`}}),widthData:{widthPercent:0,minWidth:350,maxWidth:350},sortable:!1},xu={id:"teams",headerTitle:(0,i.jsx)(v().sA,{...hu.teams}),renderCell:e=>{if(void 0!==e.teamCount)return(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.column.team.value",defaultMessage:"{teamCount, plural, one {{teamCount} teamspace} other {{teamCount} teamspaces}}",values:{teamCount:e.teamCount}})})},widthData:{widthPercent:100,minWidth:160},sortable:!1},vu={id:"members",headerTitle:(0,i.jsx)(v().sA,{...hu.members}),renderCell:e=>void 0===e.memberCount?(0,i.jsx)(re().A,{style:{borderRadius:O().V.small,width:"60%",height:18}}):(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.column.members.value",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:e.memberCount}})}),widthData:{widthPercent:100,minWidth:150},sortable:!1},yu={id:"setting",headerTitle:(0,i.jsx)("div",{}),renderCell:e=>(0,i.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"right",alignItems:"center"},children:[(0,i.jsx)(se().p,{isBlue:!0,style:{fontWeight:510,visibility:e.shouldShowBulkApply?void 0:"hidden"},onClick:e.onBulkApply,disabled:!e.shouldShowBulkApply,children:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.bulkApply",defaultMessage:"Bulk apply"})}),(0,i.jsx)(ju,{isPending:e.isPending,settingValue:e.settingValue,settingOptions:e.settingOptions,onSelectOption:e.onSelectOption})]}),widthData:{widthPercent:0,minWidth:100},sortable:!1},bu={id:"guests",headerTitle:(0,i.jsx)(v().sA,{...hu.guests}),renderCell:e=>{if(void 0!==e.guestCount)return(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.column.guests.value",defaultMessage:"{guestCount, plural, one {{guestCount} guest} other {{guestCount} guests}}",values:{guestCount:e.guestCount}})})},widthData:{widthPercent:100,minWidth:120},sortable:!1},Su={id:"sites",headerTitle:(0,i.jsx)(v().sA,{...hu.sites}),renderCell:e=>{if(void 0!==e.siteCount)return(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.column.sites.value",defaultMessage:"{siteCount, plural, one {{siteCount} site} other {{siteCount} sites}}",values:{siteCount:e.siteCount}})})},widthData:{widthPercent:100,minWidth:120},sortable:!1};function ju(e){let{settingValue:t,settingOptions:a,isPending:s,onSelectOption:n}=e;const o=(0,j().IS)((e=>({button:{marginTop:4,marginBottom:4,fontWeight:L().Wy.medium,color:e.text.primary,background:e.buttonHoveredBackground},buttonHover:{background:e.darkBannerBackground},menu:{width:300},container:{display:"flex",width:"100%",justifyContent:"right"},pendingIndicator:{position:"absolute",top:1,right:-3,background:"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[300],border:`1px solid ${e.contentBackground}`,width:9,height:9,borderRadius:9}})),[]);return(0,i.jsx)("div",{style:o.container,children:(0,i.jsxs)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",style:{position:"relative"},children:[(0,i.jsx)(Cc().m,{isMobile:!1,disabled:!1,type:"dropdown",currentOption:t,options:a,onSelectOption:n,buttonStyle:o.button,buttonHoverStyle:o.buttonHover,menuStyle:o.menu,placementToOrigin:$a().W.Bottom,alignmentToOrigin:$a().C.End}),s&&(0,i.jsx)("div",{style:o.pendingIndicator})]})})}function wu(e){let{settingValue:t,spaceStore:a,teamStores:s,config:n}=e;const i={},o={},r=n.getValueFromSpace(a);if(i[a.id]=t!==r?t:void 0,n.teamSettingName)for(const l of s){const e=n.getValueFromTeam(l,a);o[l.id]=t!==e?t:void 0}return{spaceChanges:i,teamChanges:o}}function Au(e){let{rows:t,appliedSorts:a}=e;const s=a.map((e=>{let{propertyId:t}=e;return t===fu.id?e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.toLowerCase()}:t===vu.id?"memberCount":t===xu.id?"teamCount":t===Su.id?"siteCount":t===bu.id?"guestCount":"title"})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Rt().HB)(t)}));return Ze().My(t,s,n)}function Mu(e){var t,a;const{spaceStores:n,teamStoresForSpace:o,teamAggregateDataForSpace:r,orgPeopleCountState:l,sitesForSpace:d,config:c,organizationStore:u,appliedSorts:g,setSpaceExpandedState:m}=e,{pendingSpaceSettings:p,pendingTeamSettings:h,setPendingSpaceSettings:f,setPendingTeamSettings:x,pendingOrgSetting:y}=(0,s.useContext)(Ec().A),b=null===(t=l.value)||void 0===t?void 0:t.membersForSpace,j=null===(a=l.value)||void 0===a?void 0:a.guestsForSpace,w=(0,S().K8)((()=>n.map((e=>{var t,a,s;const n=o[e.id],l=p[e.id]??c.getValueFromSpace(e),S=function(e){let{teamStores:t,spaceStore:a,config:s,spaceSettingValue:n,teamAggregateDataForSpace:o,pendingTeamSettings:r,setPendingTeamSettings:l,appliedSorts:d}=e;if(!s.teamSettingName)return;const c=null==t?void 0:t.map((e=>{var t;const d=s.getValueFromTeam(e,a),c=null===(t=o[a.id])||void 0===t?void 0:t[e.id];return{id:e.id,iconSize:24,icon:e.getIcon(),title:e.getName()??"",byline:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.team.byline",defaultMessage:"Teamspace"}),memberCount:(null==c?void 0:c.memberCountWithGuests)??0,settingValue:r[e.id]??d,parentSettingValue:n,settingOptions:s.getOptions(),onSelectOption:t=>{const a=t===d?void 0:t;l({[e.id]:a})},isClickable:!1,isPending:(0,Rt().O9)(r[e.id])}}));return null!=d&&d.length&&c?Au({rows:c,appliedSorts:d}):c}({teamStores:n,spaceStore:e,config:c,spaceSettingValue:l,setPendingTeamSettings:x,pendingTeamSettings:h,teamAggregateDataForSpace:r,appliedSorts:g}),w=c.getValueFromSpace(e),A={id:e.id,iconSize:28,icon:e.getIcon(),title:e.getName()??"",byline:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.organization.space",defaultMessage:"Workspace"}),guestCount:j?null===(t=j[e.id])||void 0===t?void 0:t.length:void 0,siteCount:d?d[e.id]:void 0,memberCount:b?null===(a=b[e.id])||void 0===a?void 0:a.length:void 0,teamCount:null==n?void 0:n.length,collapsibleRows:S,settingValue:l,parentSettingValue:y??c.getValueFromOrganization(u),settingOptions:c.getOptions(),onSelectOption:t=>{const a=t===w?void 0:t;f({[e.id]:a})},isClickable:!1,isPending:(0,Rt().O9)(p[e.id]),onBulkApply:()=>{const{spaceChanges:t,teamChanges:a}=wu({spaceStore:e,teamStores:o[e.id],config:c,settingValue:l});f(t),x(a),Object.values(a).filter(Rt().O9).length&&m({[e.id]:!0})}};return A.shouldShowBulkApply=A.isPending&&A.onBulkApply&&Boolean(null===(s=A.collapsibleRows)||void 0===s?void 0:s.some((e=>e.settingValue!==A.settingValue))),A}))),[n,o,r,b,j,d,c,u,p,f,h,x,y,g,m]);return null!=g&&g.length&&w?Au({rows:w,appliedSorts:g}):w}function Cu(e){var t,a;let{organizationStore:n,spaceStores:o,teamStoresForSpace:r,config:l,hasTeamColumn:d,rowFilterFn:c,isFiltered:u,appliedSorts:m}=e;const p=(0,b().v3)(),h=(0,qt().A)(),f=(0,s.useMemo)((()=>o.map((e=>e.id))),[o]),{teamAggregateDataForSpace:x}=(0,Ln().N)(f),y=Boolean("publish-sites"===l.settingName),w=function(e){let{environment:t,settingName:a}=e;const{spaceIds:n}=(0,s.useContext)(N().D),[i]=(0,Je().Yb)((async()=>{if((0,Rt().O9)(a)&&"publish-sites"!==a)return;let e=0;const s={};return await(0,tt().lX)(n,et().O,(async a=>{const n=await M().callApi({eventName:"getPublishedPageCountForOrganizationSpace",environment:t,data:{spaceId:a},headers:(0,ea().WS)({spaceId:a})});"failed"!==n.type&&(e+=n.data.publishedPagesCount,s[a]=n.data.publishedPagesCount)})),{orgSitesCount:e,sitesCountForSpace:s}}),[t,n,a]);return{state:i}}({environment:p,settingName:l.settingName}),A=null===(t=w.state.value)||void 0===t?void 0:t.orgSitesCount,C=null===(a=w.state.value)||void 0===a?void 0:a.sitesCountForSpace,{state:I}=(0,Oc().j)(),[T,k]=(0,s.useState)({}),[_,D]=(0,s.useState)({}),z=function(e){var t,a;const{organizationStore:n,orgPeopleCountState:o,orgSitesCount:r,teamStoresForSpace:l,config:d,spaceStores:c,setSpaceExpandedState:u}=e,{pendingOrgSetting:g,setPendingOrgSetting:m,setPendingSpaceSettings:p,setPendingTeamSettings:h}=(0,s.useContext)(Ec().A),f=null===(t=o.value)||void 0===t?void 0:t.memberCount,x=null===(a=o.value)||void 0===a?void 0:a.guestCount;return(0,S().K8)((()=>{const e=d.getValueFromOrganization(n),t=g??e??Uc;return{id:n.id,icon:n.getIcon(),iconSize:32,title:n.getName()??"Default",byline:(0,i.jsx)(v().sA,{id:"settingsConsole.securityTable.organization.byline",defaultMessage:"Organization"}),memberCount:f,guestCount:x,siteCount:r,teamCount:Object.values(l).flat().length,settingValue:t,parentSettingValue:void 0,settingOptions:[{key:Uc,label:gu},...d.getOptions()],onSelectOption:t=>{let a=t===e?void 0:t;void 0===e&&t===Uc&&(a=void 0),m(a)},onBulkApply:()=>{let e={},a={};const s={};for(const n of c){const{spaceChanges:i,teamChanges:o}=wu({spaceStore:n,teamStores:l[n.id],config:d,settingValue:t});e={...e,...i},a={...a,...o},Object.values(o).filter(Rt().O9).length&&(s[n.id]=!0)}p(e),h(a),u(s)},isClickable:!1,hideToggle:!0,isPending:(0,Rt().O9)(g)}}),[n,c,l,f,x,r,d,g,m,p,h,u])}({organizationStore:n,orgPeopleCountState:I,orgSitesCount:A,teamStoresForSpace:r,config:l,spaceStores:o,setSpaceExpandedState:e=>k((t=>({...t,...e})))}),P=Mu({spaceStores:o,teamStoresForSpace:r,teamAggregateDataForSpace:x,orgPeopleCountState:I,sitesForSpace:C,config:l,organizationStore:n,appliedSorts:m,setSpaceExpandedState:e=>k((t=>({...t,...e})))});z.shouldShowBulkApply=z.isPending&&z.settingValue!==Uc&&z.onBulkApply&&P.some((e=>{var t;return e.settingValue!==z.settingValue||Boolean(null===(t=e.collapsibleRows)||void 0===t?void 0:t.some((e=>e.settingValue!==z.settingValue)))}));const R="guest-invites"===l.settingName,B=(0,s.useMemo)((()=>[fu,R?bu:void 0,y?Su:void 0,d?xu:void 0,vu,yu].filter(Rt().O9)),[d,R,y]),L=B.map((e=>({...e,headerStyle:h.tableHeader,rowStyle:h.tableRow}))),E=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:B,theme:e,containerMarginTop:0})),[B]);return(0,s.useEffect)((()=>{if(!0===u){const e={};for(const t of f)e[t]=!0;D(e)}else D({})}),[u,f]),(0,i.jsx)(Lc().bf,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,rows:[z,...P],rowFilterFn:c,isFiltered:u,columnRenderInfo:L,renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:g().h,title:(0,i.jsx)(v().sA,{id:"organizationSecuritySettingTable.empty",defaultMessage:"No settings found"}),byline:(0,i.jsx)(v().sA,{id:"organizationSecuritySettingTable.empty.byline",defaultMessage:"There are no settings that match this query."})}),styles:E,extendToFullScreen:$t().e,expandedState:u?_:T,setExpandedState:u?D:k})}function Iu(e){let{selectedGroupIds:t,setSelectedGroupIds:a,groups:s}=e;const n=function(e){const t=(0,j().IS)((()=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block",paddingTop:4,paddingBottom:4}})),[]);return(0,S().K8)((()=>e.map((e=>({key:e.groupId,value:e.groupId,title:(0,i.jsxs)("div",{style:t.optionContainer,children:[(0,i.jsx)(E().A,{disabled:!0,icon:e.groupIcon,isEmptyPage:!1,size:Na().iK,title:e.groupName,isLarge:!0,emojiSize:Na().iK,isRaw:!1}),(0,i.jsx)(Ys().A,{style:t.optionTitle,children:e.groupName})]}),shortTitle:e.groupName,count:(0,i.jsx)(v().sA,{id:"groupsFilter.numMembers",defaultMessage:"{count} {count, plural, one {member} other {members}}",values:{count:e.memberCount}})})))),[e,t])}(s);return(0,i.jsx)(Qs().VX,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationConsole.table.filters.groups.title",defaultMessage:"Groups"}),pillIcon:f,selectedItems:t,setSelectedItems:a,items:n})}const Tu={id:"groups",headerTitle:(0,i.jsx)(v().sA,{id:"singleUserView.groupsTable.groupsColumn.header",defaultMessage:"Groups"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(Lt().s7,{title:e.groupName,icon:(0,i.jsx)(E().A,{disabled:!0,icon:e.groupIcon,isEmptyPage:!1,title:e.groupName,size:Na().p8,isLarge:!0}),iconSize:Na().p8,summaryStyles:{overflow:"hidden"}}),widthData:{widthPercent:40,minWidth:100},sortable:!1},ku={id:"members",headerTitle:(0,i.jsx)(v().sA,{id:"singleUserView.groupsTable.membersColumn.header",defaultMessage:"Members"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Ht().Kb,{}):(0,i.jsx)(D().D,{colorName:"secondary",children:(0,i.jsx)(v().sA,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"singleUserView.groupsTable.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:30,minWidth:50},sortable:!1};function _u(e,t){return{id:"teamspaces",headerTitle:(0,i.jsx)(v().sA,{id:"singleUserView.groupsTable.associatedTeamspacesColumn.header",defaultMessage:"Teamspaces"}),renderCell:a=>{if(a.type===Xt().T.Loading)return(0,i.jsx)(Ht().Kb,{});const s=a.associatedTeamspaceIds;if(0===s.length)return null;const n=e.filter((e=>s.includes(e.id)));return(0,i.jsx)(J().tv,{teamStores:n,isLoading:t,showTooltip:!0})},widthData:{widthPercent:30,minWidth:50},sortable:!1}}function Du(e){let{organizationStore:t,userStore:a}=e;const n=(0,ks().l)(),o=(0,s.useMemo)((()=>n.map((e=>e.id))),[n]),[r,l]=(0,s.useState)(o[0]),{teamStores:d,loading:c}=(0,R().o)(o),u=(0,s.useMemo)((()=>d[r]??[]),[d,r]),g=s.useMemo((()=>{return[Tu,ku,_u(u,c),(e=t.id,{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>t.type===Xt().T.Loading?null:(0,i.jsx)(gs,{groupId:t.id,isHovered:t.isRowHovered,organizationId:e}),widthData:{width:30},sortable:!1})];var e}),[u,t.id,c]),p=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:g,theme:e,containerMarginTop:0})),[g]),h=(0,j().IS)((()=>({filters:{display:"flex",flexDirection:"row"},search:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px"},actionContainer:{display:"flex",flexDirection:"row"}})),[]),f=[{id:Tu.id,name:T().A.formatMessage(hu.name),type:"title"},{id:ku.id,name:T().A.formatMessage(hu.members),type:"number"}],[x,y]=(0,s.useState)(),[b,w]=(0,s.useState)(!1),[A,M]=(0,s.useState)(),{rows:C,loading:I}=function(e){let{userId:t,spaceId:a,teamStores:n}=e;const i=(0,s.useMemo)((()=>[t]),[t]),o=(0,s.useMemo)((()=>[a]),[a]),{spaceIdToUserPermissionGroupMap:r,loading:l}=st({userIds:i,spaceIds:o}),{permissionGroupsForSpace:d,loading:c}=at({spaceIds:o}),u=(0,s.useMemo)((()=>{var e;return(null===(e=r[a])||void 0===e?void 0:e[t])??[]}),[a,r,t]),g=(0,s.useMemo)((()=>(d[a]??[]).filter((e=>u.includes(e.group.group_id)))),[a,d,u]);return{rows:(0,S().K8)((()=>g.map((e=>{const t=e.group;return{type:Xt().T.SingleUserGroup,id:t.group_id,groupId:t.group_id,groupName:t.name,groupIcon:t.icon?{pointer:{id:t.group_id,spaceId:t.space_id,table:Wt().n},icon:t.icon}:void 0,memberCount:e.memberCount,associatedTeamspaceIds:n.filter((e=>e.isAssociatedWithPermissionGroup(t))).map((e=>e.id)),isClickable:!1}}))),[g,n]),loading:l||c}}({userId:a.id,spaceId:r,teamStores:u}),{filters:k,updateFilters:_,query:D,setQuery:z,filteredRows:P,onPageChange:N,hasMoreResults:B}=function(e,t){const[a,n]=(0,s.useState)({pageNum:1}),i=(0,s.useCallback)((e=>{n((t=>({...t,...e,pageNum:1})))}),[]),[o,r]=(0,s.useState)(""),{filteredRows:l,hasMoreResults:d}=(0,s.useMemo)((()=>{if(!e)return{filteredRows:[],hasMoreResults:!1};let s=e;o&&(s=(0,mt().Ay)(o,s,(e=>e.groupName))),a.groupIds&&a.groupIds.length>0&&(s=s.filter((e=>{var t;return null===(t=a.groupIds)||void 0===t?void 0:t.includes(e.groupId)}))),a.teamspaceIds&&a.teamspaceIds.length>0&&(s=s.filter((e=>{var t;return null===(t=a.teamspaceIds)||void 0===t?void 0:t.some((t=>e.associatedTeamspaceIds.includes(t)))}))),s=t&&t.length>0?s.sort(((e,a)=>{for(const s of t)if("groups"===s.propertyId){const t=e.groupName,n=a.groupName;if(t!==n)return"ascending"===s.direction?t.localeCompare(n):n.localeCompare(t)}else if("members"===s.propertyId){const t=e.memberCount,n=a.memberCount;if(t!==n)return"ascending"===s.direction?t-n:n-t}return 0})):s.sort(((e,t)=>e.groupName.localeCompare(t.groupName)));const n=s.length>a.pageNum*Bc;return s=s.slice((a.pageNum-1)*Bc,a.pageNum*Bc),{filteredRows:s,hasMoreResults:n}}),[e,o,a.groupIds,a.teamspaceIds,a.pageNum,t]);return{filters:a,updateFilters:i,query:o,setQuery:r,filteredRows:l,onPageChange:e=>{const t={...a,pageNum:e};n(t)},hasMoreResults:d}}(C,x),L=zi({spaceStores:n}),E=A??x??[],O=I?(0,Xt().n)():P;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:h.actionContainer,children:[(0,i.jsxs)("div",{style:h.filters,children:[(0,i.jsx)(Vn().A,{children:(0,i.jsx)(Wa().e,{sortProperties:f,isMenuOpen:b,setIsMenuOpen:w,onApply:e=>{w(!1),y(e),M(void 0)},currentSorts:E})}),E.length>0?(0,i.jsx)(Fn().he,{}):null,(0,i.jsx)(Fi,{selectedSpaceId:r,setSelectedSpaceId:e=>{_({teamspaceIds:void 0,groupIds:void 0}),l(e)},spaceData:L}),(0,i.jsx)(Iu,{selectedGroupIds:k.groupIds||[],setSelectedGroupIds:e=>{_({groupIds:e})},groups:C},`${r}-groups`),(0,i.jsx)(kd,{selectedTeamspaceIds:k.teamspaceIds||[],setSelectedTeamspaceIds:e=>{_({teamspaceIds:e})},teamspaceStores:u},`${r}-teamspaces`)]}),(0,i.jsxs)("div",{style:h.search,children:[(0,i.jsx)(Ha().x,{appliedSorts:x,openSortPillMenu:e=>{e&&M([{propertyId:e,direction:"ascending"}]),w(!0)},sortProperties:f}),(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:D,setQueryFilter:z})]})]}),(0,i.jsx)(Bt().WE,{hideHeaderRowPadding:!0,columnRenderInfo:g,rows:O,renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:m().F,title:(0,i.jsx)(v().sA,{id:"singleUserView.groupsTable.empty",defaultMessage:"No groups found"}),byline:(0,i.jsx)(v().sA,{id:"singleUserView.groupsTable.empty.byline",defaultMessage:"There are no groups that match this query."})}),styles:p,showRowBorders:!0,loadMoreMethod:{type:"pages",onLoadNext:()=>{N(k.pageNum+1)},onLoadPrevious:()=>{N(k.pageNum-1)},hasNextPage:B,hasPrevPage:k.pageNum>1,currentPage:k.pageNum}})]})}const zu=(0,v().YK)({groups:{id:"settingsConsole.singleUserView.groupsTab.title",defaultMessage:"Groups"},groupsLabel:{id:"settingsConsole.singleUserView.groupsTab.label",defaultMessage:"View permission groups this user is a part of and associated teamspaces."}});function Pu(e){const t=(0,v().tz)();return(0,i.jsxs)(ee,{children:[(0,i.jsx)(Va()._,{title:t.formatMessage(zu.groups),byline:t.formatMessage(zu.groupsLabel)}),(0,i.jsx)(Du,{...e})]})}function Nu(e){const{userStore:t,metadata:a,onDismiss:n,onSubmit:o}=e,r=(0,v().tz)(),l=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.yellowPrimary},content:{height:"fit-content",width:390,border:"1px solid var(--stroke-regular, #E3E2E0)",borderRadius:6,padding:"4px 12px",display:"flex",alignItems:"center"},check:{height:20,width:20,color:e.text.tertiary}})),[]);const d=(0,S().K8)((()=>t.getDisplayName(r)),[t,r]),{state:c}=(0,Oc().j)(),{workspaceName:u,workspaceIcon:g,memberCount:m}=(0,S().K8)((()=>{var e;return a.isExternal?{workspaceName:a.workspaceName,workspaceIcon:a.workspaceIcon,memberCount:0}:{workspaceName:a.spaceStore.getName(),workspaceIcon:a.spaceStore.getIcon(),memberCount:(null===(e=c.value)||void 0===e||null===(e=e.membersForSpace[a.spaceStore.id])||void 0===e?void 0:e.length)||0}}),[a,c]),p=a.isExternal,h=!p&&(0,Ts().MN)(a.userRole),[f,x]=(0,s.useState)(!1);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:(0,kr().q)(l.icon),title:p||h?r.formatMessage(Ru.removeMemberTitle):r.formatMessage(Ru.removeGuestAccessTitle),byline:r.formatMessage(p?Ru.removeMemberFromExternalWorkspaceByline:h?Ru.removeMemberByline:Ru.removeGuestAccessByline,{b:e=>(0,i.jsx)("b",{children:e}),userName:d})}),footer:(0,i.jsx)(K().jl,{primaryText:p||h?r.formatMessage(Ru.removeMemberButton):r.formatMessage(Ru.removeGuestAccessButton),primaryAction:async()=>{x(!0),await async function(){await o(),n()}(),x(!1)},primaryDisabled:f,secondaryText:r.formatMessage(Ru.cancelButton),secondaryAction:n}),children:(0,i.jsxs)("div",{style:l.content,children:[(0,i.jsx)(Lt().s7,{title:u,byline:p?r.formatMessage(Ru.externalWorkspace):(0,i.jsxs)(i.Fragment,{children:[r.formatMessage(Ru.workspace),(0,i.jsx)(z().A,{}),(0,i.jsx)(ue().Qq,{memberCount:m})]}),icon:(0,i.jsx)(E().A,{disabled:!0,icon:g,title:u,size:32,isLarge:!0,isEmptyPage:!1}),iconSize:32}),(0,bd().checkmarkIcon)(l.check)]})})})}const Ru=(0,v().YK)({removeMemberTitle:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberTitle",defaultMessage:"Remove member from workspace"},removeGuestAccessTitle:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeGuestAccessTitle",defaultMessage:"Remove guest access"},removeMemberByline:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberByline",defaultMessage:"<b>{userName}</b> will lose access to all content, teamspaces, and groups in this workspace."},removeGuestAccessByline:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeGuestAccessByline",defaultMessage:"<b>{userName}</b> will lose guest access to all pages in this workspace."},removeMemberFromExternalWorkspaceByline:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberFromExternalWorkspaceByline",defaultMessage:"<b>{userName}</b> will lose access to all content, teamspaces, and groups in this external workspace."},removeMemberButton:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberButton",defaultMessage:"Remove member"},removeGuestAccessButton:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeGuestAccessButton",defaultMessage:"Remove guest access"},cancelButton:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.cancelButton",defaultMessage:"Cancel"},workspace:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.workspace",defaultMessage:"Workspace"},externalWorkspace:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.externalWorkspace",defaultMessage:"External workspace"}});function Bu(e){const{row:t}=e,[a,n]=(0,s.useState)(!1);return(0,i.jsx)("div",{style:{marginRight:0,marginLeft:"auto"},children:function(e){switch(e.metadata.type){case"workspace":if(e.metadata.isExternal){const t=e.metadata.onClick;return(0,i.jsx)(Sr().E,{color:"uiBlue",onClick:()=>{n(!0),t(),n(!1)},children:(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.removeFromWorkspace",defaultMessage:"Remove from workspace"})})}const t=e.metadata.onUpdateRole;return"none"===e.metadata.roleValue?(0,i.jsx)(Sr().E,{color:"uiBlue",disabled:a,onClick:async()=>{n(!0),await t("member"),n(!1)},children:(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.addToWorkspace",defaultMessage:"Add to workspace"})}):"page_guest"===e.metadata.roleValue?(0,i.jsx)(Sr().E,{color:"uiBlue",disabled:a,onClick:async()=>{n(!0),await t("none"),n(!1)},children:(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.removeGuestAccess",defaultMessage:"Remove guest access"})}):(0,i.jsx)(Lu,{settingValue:e.metadata.roleValue,settingOptions:e.metadata.roleOptions,onSelectOption:t});case"teamspace":return;default:(0,Rt().HB)(e.metadata)}}(t)})}function Lu(e){let{settingValue:t,settingOptions:a,onSelectOption:s}=e;const n=(0,j().IS)((e=>({dropdown:{marginTop:4,marginBottom:4,border:void 0,background:e.buttonHoveredBackground},buttonHover:{background:e.darkBannerBackground}})),[]);return(0,i.jsx)(Cc().m,{isMobile:!1,type:"dropdown",currentOption:t,options:a,onSelectOption:s,buttonStyle:{...Ic().W,...n.dropdown},placementToOrigin:$a().W.Bottom,alignmentToOrigin:$a().C.End,buttonHoverStyle:n.buttonHover})}const Eu=[{id:"name",renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(ga,{iconSize:Lc().tS,iconStyles:{marginLeft:0}}):(0,i.jsxs)(ne().fI,{gap:8,children:[(0,i.jsx)(Lt().s7,{title:e.title,iconSize:Lc().tS,icon:(0,i.jsx)(E().A,{disabled:!0,icon:e.icon,title:e.title,size:Lc().tS,isLarge:!0,isEmptyPage:!1}),summaryStyles:{overflow:"hidden"}}),"workspace"===e.metadata.type&&e.metadata.isExternal&&(0,i.jsx)(Vt().A,{content:(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.externalWorkspace.badge",defaultMessage:"External"})})]}),headerTitle:void 0,sortable:!1,widthData:{widthPercent:40,minWidth:100}},{id:"metadata",renderCell:e=>{if(e.type===Xt().T.Loading)return(0,i.jsx)(Ht().Kb,{});if("workspace"===e.metadata.type&&e.metadata.isExternal)return(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.externalWorkspace",defaultMessage:"External workspace"})});let t,a;switch(e.metadata.type){case"workspace":t=(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.workspace",defaultMessage:"Workspace"}),a=(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.teamspaceCount",defaultMessage:"{teamCount, plural, one {{teamCount} teamspace} other {{teamCount} teamspaces}}",values:{teamCount:e.metadata.teamCount}});break;case"teamspace":t=(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.teamspace",defaultMessage:"Teamspace"}),a=(0,i.jsx)(v().sA,{id:"orgConsole.singleUserView.workspacesTable.teamspaceMemberCount",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:e.metadata.memberCount}});break;default:(0,Rt().HB)(e.metadata)}return(0,i.jsxs)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:[t," · ",a]})},headerTitle:void 0,sortable:!1,widthData:{widthPercent:30,minWidth:100}},{id:"action",renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Ht().Kb,{}):(0,i.jsx)(Bu,{row:e}),headerTitle:void 0,sortable:!1,widthData:{widthPercent:30,minWidth:100}}];a(18107),a(967357);function Ou(e){const{organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:o}=e,{externalSpaceRows:r,loading:l}=function(e){let{organizationStore:t,userStore:a,setRemoveUserModalState:n}=e;const o=(0,b().v3)(),{managedUser:r,reloadManagedUser:l,loading:d}=function(e){let{organizationStore:t,userStore:a}=e;const n=(0,b().v3)(),i=(0,S().K8)((()=>t.getEmailDomains()),[t]),o=(0,S().K8)((()=>{const e=a.getEmail();return!(!e||!(0,gt().Wy)(i,e))}),[i,a]),[r,l]=(0,s.useState)(void 0),[d,c]=(0,s.useState)(!1),[u,g]=(0,Je().Yb)((async()=>{if(0===i.length||!o)return;c(!0);const e=await M().callApi({eventName:"getManagedUsers",environment:n,data:{query:a.id,emailDomains:i}});if("failed"===e.type)throw c(!1),e.error;const t=e.data.results;l(t.at(0)),c(!1)}),[i,n,o,a.id]);return{managedUser:r,loading:d,reloadManagedUser:g}}({organizationStore:t,userStore:a}),c=(0,s.useMemo)((()=>(null==r?void 0:r.workspaces.filter((e=>e.isExternal)).map((e=>e.id)))??[]),[r]),u=(0,S().K8)((()=>c.map((e=>function(e){let{environment:t,userStore:a,spaceId:s,managedUser:n,reloadManagedUser:o,setRemoveUserModalState:r}=e;const l=null==n?void 0:n.workspaces.find((e=>e.id===s));if(!l)return;const d=l.name,c=l.icon?{pointer:{table:na().NX,id:s},icon:l.icon}:void 0,u={type:Xt().T.SingleUserWorkspace,id:s,spaceId:s,icon:c,title:d,metadata:{type:"workspace",isExternal:!0,onClick:()=>{r({userStore:a,metadata:{isExternal:!0,workspaceName:d??"",workspaceIcon:c},onSubmit:async()=>{await async function(e){let{environment:t,userId:a,spaceId:s,spaceName:n}=e;pc().PG(t,{external_space_id:s});const o=await M().callApi({eventName:"removeManagedUserFromSpace",environment:t,data:{userId:a,targetSpaceId:s}});pc().st(t,{external_space_id:s}),"success"===o.type?ot().D6({label:(0,i.jsx)(v().sA,{defaultMessage:"Successfully removed user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceConfirmation",values:{workspaceName:n}})}):ot().D6({label:(0,i.jsx)(v().sA,{defaultMessage:"Failed to remove user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceFailure",values:{workspaceName:n}})})}({environment:t,userId:a.id,spaceId:s,spaceName:d??""}),await o()}})}},isPending:!1,isClickable:!1};return u}({environment:o,userStore:a,spaceId:e,managedUser:r,reloadManagedUser:l,setRemoveUserModalState:n})))),[c,o,a,r,l,n]);return{externalSpaceRows:u,loading:d}}({organizationStore:t,userStore:a,setRemoveUserModalState:o}),{organizationSpaceRows:d,loading:c}=function(e){let{organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:i}=e;const o=(0,v().tz)(),r=(0,ks().l)(),l=(0,ks().l)(),d=(0,s.useMemo)((()=>r.map((e=>e.id))),[r]),{teamStores:c,loading:u}=(0,R().o)(d),{teamAggregateDataForSpace:g,loading:m}=(0,Ln().N)(d),p=function(e){let{organizationId:t,userId:a,userData:n}=e;const{removeUserFromSpaceCache:i,updateUserRoleInSpaceCache:o}=n,r=(0,b().v3)(),l=(0,v().tz)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(P().N),c=(0,s.useCallback)((async e=>{const s=e.id,n=await M().callApi({eventName:"removeUserFromOrganizationSpaces",environment:r,data:{organizationId:t,userIds:[a],spaceIds:[s]}});"success"===n.type?(ot().D6({label:l.formatMessage(Sn.changeRoleSuccess)}),i(s),d({data:n.data}),(0,pe().u4)({environment:r,event:{eventName:"org_console_people_remove_users",eventProperties:{organization_id:t,space_ids:[s],num_users_removed:1}}})):C().f1((0,I().Hu)(T().A.getIntl(),n))}),[r,t,a,l,i,d]),u=(0,s.useCallback)((async(e,s)=>{const n=await M().callApi({eventName:"updateUserRoleInOrganizationSpace",environment:r,data:{organizationId:t,userIds:[a],newRole:s,spaceId:e}});"success"===n.type?(ot().D6({label:l.formatMessage(Sn.changeRoleSuccess)}),o(e,(0,Ts().DR)(s)),d({data:n.data}),(0,pe().u4)({environment:r,event:{eventName:"org_console_people_update_user_role",eventProperties:{organization_id:t,space_id:e}}})):C().f1((0,I().Hu)(T().A.getIntl(),n))}),[r,l,t,d,o,a]),g=(0,s.useCallback)((async(e,s)=>{const n=await M().callApi({eventName:"bulkAddUsersToOrganizationSpaces",environment:r,data:{organizationId:t,existingUserIds:[a],newUserEmails:[],spaceIds:[e],role:s}});"success"===n.type?(ot().D6({label:l.formatMessage(Sn.addUserSuccess)}),o(e,(0,Ts().DR)(s)),d({data:n.data}),(0,pe().u4)({environment:r,event:{eventName:"org_console_people_add_members",eventProperties:{organization_id:t,space_ids:[e],num_users_added:1}}})):C().f1((0,I().Hu)(T().A.getIntl(),n))}),[r,l,t,d,o,a]);return(0,s.useCallback)((async(e,t,a)=>{if(t===a)return;const s=e.id;if((0,Ts().MN)(t))switch(a){case"none":await c(e);break;case"page_guest":throw new(yn().yI)("Cannot change role to guest.");case"owner":case"membership_admin":case"member":await u(s,a);break;default:(0,Rt().HB)(a)}else switch(a){case"none":await c(e);break;case"page_guest":throw new(yn().yI)("Cannot change role to guest.");case"member":case"owner":case"membership_admin":await g(s,a);break;default:(0,Rt().HB)(a)}}),[g,c,u])}({organizationId:t.id,userId:a.id,userData:n}),h=(0,s.useMemo)((()=>[a.id]),[a]),{spaceIdToUserPermissionGroupMap:f,loading:x}=st({userIds:h,spaceIds:d}),y=(0,s.useMemo)((()=>u||m||x),[u,m,x]),j=(0,S().K8)((()=>d.map((e=>{const t=l.find((t=>t.id===e));if(!t)return;const s=c[e]??[],r=g[e]??{};return function(e){let{userStore:t,spaceStore:a,teamStores:s,teamDataForSpace:n,userPermissionGroupIds:i,userData:o,intl:r,onUpdateMemberRole:l,setRemoveUserModalState:d}=e;const{userSpaceAccessMap:c}=o,u=c.get(a.id),g=u?(0,A().QE)(u)?"page_guest":(0,Ts().jM)(u.role):"none",m=t.id,p=(0,Ts().MN)(g)?null==s?void 0:s.map((e=>{var t;const s=n[e.id];return function(e){let{userId:t,spaceId:a,teamStore:s,teamData:n,userPermissionGroups:i,userRole:o}=e;const r=s.isMemberOrGuest(t,i,{membership_type:o,user_id:t});if(!r)return;const l={type:Xt().T.SingleUserWorkspace,id:s.id,spaceId:a,icon:s.getIcon(),title:s.getName()??"",metadata:{type:"teamspace",memberCount:(null==n?void 0:n.memberCountWithGuests)??0,onClick:()=>{}},isPending:!1,isClickable:!1};return l}({userId:m,spaceId:a.id,teamStore:e,teamData:s,userPermissionGroups:new Set((null===(t=i[a.id])||void 0===t?void 0:t[m])??[]),userRole:g})})).filter(Rt().O9):void 0,h={type:Xt().T.SingleUserWorkspace,id:a.id,spaceId:a.id,icon:a.getIcon(),title:a.getName()??"",metadata:{type:"workspace",isExternal:!1,teamCount:null==s?void 0:s.length,roleValue:g,roleOptions:g?Uu(r):[],onUpdateRole:async e=>{"none"===e?d({userStore:t,metadata:{isExternal:!1,userRole:g,spaceStore:a},onSubmit:async()=>{await l(a,g,e,o)}}):await l(a,g,e,o)}},collapsibleRows:p,isPending:!1,isClickable:!1};return h}({userStore:a,spaceStore:t,teamStores:s,teamDataForSpace:r,userPermissionGroupIds:f,userData:n,intl:o,onUpdateMemberRole:p,setRemoveUserModalState:i})}))),[d,l,c,g,f,a,n,o,p,i]);return{organizationSpaceRows:j,loading:y}}({organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:o});return{spaceRows:(0,s.useMemo)((()=>Ze().My([...d,...r].filter(Rt().O9),(e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.toLowerCase()}),"asc")),[r,d]),loading:(0,s.useMemo)((()=>l||c),[l,c])}}function Uu(e){return[{key:"owner",label:e.formatMessage(Fu.workspaceOwnerOption)},{key:"membership_admin",label:e.formatMessage(Fu.membershipAdminOption)},{key:"member",label:e.formatMessage(Fu.workspaceMemberOption)},{key:"none",label:(0,i.jsx)("span",{style:{color:co().Tj.red},children:e.formatMessage(Fu.removeFromWorkspaceOption)})}]}const Fu=(0,v().YK)({workspaceOwnerOption:{id:"settingsConsole.singleUserView.workspacesTab.workspaceOwnerOption",defaultMessage:"Workspace owner"},membershipAdminOption:{id:"settingsConsole.singleUserView.workspacesTab.membershipAdminOption",defaultMessage:"Membership admin"},workspaceMemberOption:{id:"settingsConsole.singleUserView.workspacesTab.workspaceMemberOption",defaultMessage:"Workspace member"},removeFromWorkspaceOption:{id:"settingsConsole.singleUserView.workspacesTab.removeFromWorkspaceOption",defaultMessage:"Remove from workspace"}});function Vu(e){let{organizationStore:t,userStore:a,userData:n}=e;const o=(0,v().tz)(),r=(0,qt().A)(),l=(0,j().IS)((e=>({filters:{display:"flex",flexDirection:"row"},loading:{height:200,display:"flex",alignItems:"center",justifyContent:"center"},headerStyle:{...r.tableHeader,boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`,height:12}})),[r.tableHeader]),d=zi({spaceStores:(0,ks().l)()}),[c,u]=(0,s.useState)([]),[g,m]=(0,s.useState)(void 0),{spaceRows:p,loading:h}=Ou({organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:m}),f=Eu.map((e=>({...e,headerStyle:l.headerStyle,rowStyle:{...r.tableRow,height:56}}))),x=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:f,theme:e,containerMarginTop:0})),[f]),[y,b]=(0,s.useState)({}),S=h?(0,Xt().n)():p;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:l.filters,children:(0,i.jsx)(Ui,{selectedSpaceIds:c,setSelectedSpaceIds:u,spaceData:d})}),(0,i.jsx)(Lc().bf,{rows:S,rowFilterFn:e=>!(e.type===Xt().T.SingleUserWorkspace&&c.length>0)||c.includes(e.spaceId),isFiltered:c.length>0,columnRenderInfo:f,renderNoRowsComponent:()=>(0,i.jsx)("div",{children:o.formatMessage(Hu.emptyState)}),styles:x,showRowBorders:!0,hideHeaderRowPadding:!0,expandedState:y,setExpandedState:b}),g&&(0,i.jsx)(Nu,{...g,onDismiss:()=>{m(void 0)}})]})}const Hu=(0,v().YK)({emptyState:{id:"settingsConsole.singleUserView.workspacesTab.emptyState",defaultMessage:"Empty!"}}),Wu=(0,v().YK)({workspaces:{id:"settingsConsole.singleUserView.workspacesTab.title",defaultMessage:"Workspaces"},workspacesLabel:{id:"settingsConsole.singleUserView.workspacesTab.label",defaultMessage:"Add, remove, or adjust this user's role to control their workspace access and collaboration permissions."}});function qu(e){const t=(0,v().tz)();return(0,i.jsxs)(ee,{children:[(0,i.jsx)(Va()._,{title:t.formatMessage(Wu.workspaces),byline:t.formatMessage(Wu.workspacesLabel)}),(0,i.jsx)(Vu,{...e})]})}var Gu=()=>a(311670),Ku=()=>a(5347),Yu=()=>a(452864),Qu=()=>a(593467);function $u(e){const t=(0,b().v3)(),{spaceStore:a,daysFilter:s,sort:n}=e,[{value:i,status:o}]=(0,Je().Yb)((async()=>await Qu().i_({environment:t,spaceStore:a,nextGraphFilter:s,nextTableFilter:s,nextSort:n})),[t,a,s,n]);return{usersTabData:i,loading:"resolved"!==o}}const Xu={id:"user",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.memberViewTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(Jl().A,{containerStyle:{height:52},actorStore:e.userStore,spaceRole:e.userRole&&(0,Jl().v)(e.userRole)}),widthData:{widthPercent:40,minWidth:275},sortable:!1,shouldShowSortTooltip:!1},Zu={id:"pageViews",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.memberViewTable.pageViewsColumn.header",defaultMessage:"Page views"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Ju,{pageViews:e.pageViews}),widthData:{widthPercent:10,minWidth:100},sortable:!1,shouldShowSortTooltip:!1};function Ju(e){let{pageViews:t}=e;const s=(0,j().IS)((e=>({eyeHideIcon:{width:20,height:20,color:e.lightIconColor}})),[]);return void 0===t?(0,i.jsx)(q().A,{placement:$a().W.Bottom,render:e=>(0,i.jsx)("div",{...e,children:(0,a(566910).e)(s.eyeHideIcon)}),renderTooltip:e=>(0,i.jsx)(v().sA,{id:"spaceAnalyticsUsersTab.optedOutUser.icon.tooltip",defaultMessage:"User has disabled page view tracking"})}):(0,i.jsx)(Ys().A,{children:t})}const eg={id:"pageEdits",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.memberViewTable.pageEditsColumn.header",defaultMessage:"Page edits"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Ys().A,{children:e.pageEdits}),widthData:{widthPercent:10,minWidth:100},sortable:!1,shouldShowSortTooltip:!0,hasClickableContents:!1},tg={id:"lastActiveAt",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.memberViewTable.lastActiveColumn.header",defaultMessage:"Last active"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:150}}):(0,i.jsx)(So().F,{lastActiveAt:e.lastActiveAt,isNoActivitySecondaryColor:!0}),widthData:{widthPercent:15,minWidth:150},sortable:!1,shouldShowSortTooltip:!0,hasClickableContents:!1};function ag(e,t){return{id:"teamspaces",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.memberViewTable.teamspacesColumn.header",defaultMessage:"Teamspaces"}),renderCell:a=>{if(a.type===Xt().T.Loading)return(0,i.jsx)(Ht().Kb,{});const s=a.associatedTeamspaceIds;if(0===s.length)return null;const n=e.filter((e=>s.includes(e.id)));return(0,i.jsx)(J().tv,{teamStores:n,isLoading:t,showTooltip:!0})},widthData:{widthPercent:15,minWidth:150},sortable:!1}}function sg(e){var t;const{spaceStore:a,daysFilter:n,isWorkspaceAnalyticsDisabled:o,sort:r}=e,l=(0,S().K8)((()=>a.getName()),[a]),d=a.id,c=(0,S().K8)((()=>[a.id]),[a.id]),{teamStores:u,loading:g}=(0,R().o)(c),p=(0,s.useMemo)((()=>u[d]??[]),[u,d]),[h,f]=(0,s.useState)(1);(0,s.useEffect)((()=>{f(1)}),[a.id,n,r]);const{usersTabData:x,loading:y}=$u({spaceStore:a,daysFilter:n,sort:r}),{rows:b,hasMoreResults:w}=function(e){let{usersTabData:t,usersTabDataLoading:a,spaceId:n,teamspaceStores:i,currPage:o}=e;const r=(0,s.useMemo)((()=>(null==t?void 0:t.usersAndStats)??[]),[t]),l=(0,s.useMemo)((()=>r.map((e=>e.userStore.id))),[r]),d=(0,S().K8)((()=>[n]),[n]),{spaceIdToUserPermissionGroupMap:c,loading:u}=st({userIds:l,spaceIds:d}),{visibleUsers:g,loading:m}=(0,B().d)(n),p=(0,S().K8)((()=>a||u||m||!t?(0,Xt().n)():r.map((e=>{var t;let{userStore:a,stats:s}=e;const o=null===(t=g.find((e=>e.userId===s.userId)))||void 0===t?void 0:t.role;return{type:Xt().T.AnalyticsMemberViewsRow,id:s.userId,userStore:a,userRole:o,pageViews:s.numPageViews,pageEdits:s.numPageEdits,lastActiveAt:s.lastActive,associatedTeamspaceIds:i.filter((e=>{var t;return e.isMemberOrGuest(s.userId,new Set((null===(t=c[n])||void 0===t?void 0:t[s.userId])??[]),{membership_type:o?(0,Ts().jM)(o):"none",user_id:s.userId})})).map((e=>e.id)),isClickable:!1}}))),[a,u,m,t,r,g,i,c,n]),h=p.length>o*et().q,f=p.slice((o-1)*et().q,o*et().q);return{rows:f,hasMoreResults:h}}({usersTabData:x,usersTabDataLoading:y,spaceId:d,teamspaceStores:p,currPage:h}),A=s.useMemo((()=>[Xu,Zu,eg,tg,ag(p,g)]),[p,g]),M=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:A,theme:e,containerMarginTop:0})),[A]);return o?(0,i.jsx)(Yu().H,{type:"disabled",spaceName:l}):"NotFoundError"===(null==x||null===(t=x.usersAndStatsError)||void 0===t?void 0:t.name)?(0,i.jsx)(Yu().H,{type:"empty",spaceName:l}):(0,i.jsx)(Bt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,columnRenderInfo:A,rows:b,renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:m().F,title:(0,i.jsx)(v().sA,{id:"analyticsMemberViewsTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(v().sA,{id:"analyticsMemberViewsTable.empty.byline",defaultMessage:"There are no members with available analytics data."})}),styles:M,showRowBorders:!0,loadMoreMethod:{type:"pages",onLoadNext:()=>{f(h+1)},onLoadPrevious:()=>{f(h-1)},hasNextPage:w,hasPrevPage:h>1,currentPage:h}})}var ng=()=>a(733815),ig=()=>a(826658);function og(e){let{organizationId:t,spaceStore:a,subtab:n,daysFilter:o,setDaysFilter:r,title:l,byline:d,disableFilters:c,sortProps:u,additionalFilters:g,querySearchProps:m,onExport:p}=e;const h=qa(),[f,x]=(0,s.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Va()._,{title:l,byline:d}),(0,i.jsxs)("div",{style:h.actionContainer,children:[(0,i.jsxs)("div",{style:h.filters,children:[u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Vn().A,{children:(0,i.jsx)(Wa().e,{...u.sortPillProps})}),u.sortPillProps.currentSorts.length>0?(0,i.jsx)(Fn().he,{}):null]}):null,(0,i.jsx)(Md,{showAsPill:!0,organizationId:t,selectedSpaceStore:a,currentTabRoute:Jt().Tr,currentTabProperties:{subtab:n}}),c?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ng().Z,{currentFilter:o,onChangeFilter:r}),g]})]}),c?null:(0,i.jsxs)("div",{style:h.rightContent,children:[u?(0,i.jsx)(Ha().x,{...u.sortButtonProps}):null,m?(0,i.jsx)(Et().nv,{...m}):null,p?(0,i.jsx)(ig().K,{onClick:async()=>{x(!0),await p(),x(!1)},disabled:f}):null]})]})]})}function rg(e){let{organizationId:t,spaceStore:a,daysFilter:n,setDaysFilter:o}=e;const r=(0,b().v3)(),l=(0,j().IS)((e=>({container:{width:"100%",padding:"22px 32px"}})),[]),d=(0,S().K8)((()=>Boolean(null==a?void 0:a.getSettings().disable_page_analytics)),[a]),[c,u]=(0,s.useState)(void 0),[g,m]=(0,s.useState)(),[p,h]=(0,s.useState)(!1),f=g??(c?[lg(c)]:[]);return(0,s.useEffect)((()=>{u(void 0),m(void 0),h(!1)}),[a.id]),(0,i.jsxs)("div",{style:l.container,children:[(0,i.jsx)(og,{organizationId:t,spaceStore:a,subtab:Og.MemberViews,daysFilter:n,setDaysFilter:o,disableFilters:d,title:(0,i.jsx)(v().sA,{id:"organization.memberViews.title",defaultMessage:"Member views"}),byline:(0,i.jsx)(v().sA,{id:"organization.memberViews.byline",defaultMessage:"View all member views and edits"}),sortProps:{sortPillProps:{sortProperties:ug,isMenuOpen:p,setIsMenuOpen:h,onApply:e=>{h(!1),m(void 0);const t=e.at(0);u(t?function(e){return{field:e.propertyId===Zu.id?"page_views":e.propertyId===eg.id?"page_edits":"last_active",direction:"descending"===e.direction?"desc":"asc"}}(t):void 0)},currentSorts:f,preventMultipleSorts:!0},sortButtonProps:{appliedSorts:c?[lg(c)]:void 0,openSortPillMenu:e=>{e&&m([{propertyId:e,direction:"descending"}]),h(!0)},sortProperties:ug}},onExport:async()=>{await(0,Ku().K)({environment:r,spaceId:a.id,organizationId:t,analyticsType:Gu().e.Users,filters:{daysFilter:n}})}}),(0,i.jsx)(sg,{organizationId:t,spaceStore:a,daysFilter:n,isWorkspaceAnalyticsDisabled:d,sort:c??dg})]})}function lg(e){return{propertyId:"page_views"===e.field?Zu.id:"page_edits"===e.field?eg.id:tg.id,direction:"desc"===e.direction?"descending":"ascending"}}const dg={field:"last_active",direction:"desc"},cg=(0,v().YK)({pageViews:{id:"organization.analytics.memberViewTable.pageViewsColumn.sortHeader",defaultMessage:"Page views"},pageEdits:{id:"organization.analytics.memberViewTable.pageEditsColumn.sortHeader",defaultMessage:"Page edits"},lastActive:{id:"organization.analytics.memberViewTable.lastActiveColumn.sortHeader",defaultMessage:"Last active"}}),ug=[{id:Zu.id,name:T().A.formatMessage(cg.pageViews),type:"number"},{id:eg.id,name:T().A.formatMessage(cg.pageEdits),type:"number"},{id:tg.id,name:T().A.formatMessage(cg.lastActive),type:"date"}];var gg=()=>a(837503),mg=()=>a(23534),pg=()=>a(663484);const hg={id:"views",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.viewsColumn.header",defaultMessage:"Views"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Ys().A,{children:e.views.toLocaleString()}),widthData:{widthPercent:10,minWidth:100},sortable:!1},fg={id:"uniqueViews",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.uniqueViewsColumn.header",defaultMessage:"Unique views"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Ys().A,{children:e.uniqueViews.toLocaleString()}),widthData:{widthPercent:10,minWidth:100},sortable:!1},xg={id:"location",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.locationColumn.header",defaultMessage:"Location"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)(Wi().E,{blockStore:e.blockStore,teamStore:e.teamStore}),widthData:{widthPercent:20,minWidth:220},sortable:!1},vg={id:"audience",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.audienceColumn.header",defaultMessage:"Audience"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:180}}):(0,i.jsx)(Ys().A,{children:(0,Hi().Z)(e.audience)}),widthData:{widthPercent:15,minWidth:180},sortable:!1},yg={id:"lastEditedBy",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.lastEditedByColumn.header",defaultMessage:"Last edited by"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:150}}):e.lastEditedById?(0,i.jsx)("div",{style:L().RC,children:(0,i.jsx)(qi().T,{blockStore:e.blockStore,userIds:[e.lastEditedById]})}):null,widthData:{widthPercent:15,minWidth:150,maxWidth:180},sortable:!1},bg={id:"lastEditedTime",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.lastEditedTimeColumn.header",defaultMessage:"Last edited at"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:150}}):(0,i.jsx)(Gi().d,{dateTs:e.lastEditedTime}),widthData:{widthPercent:15,minWidth:150},sortable:!1},Sg={id:"createdBy",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.createdByColumn.header",defaultMessage:"Created by"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:150}}):e.createdById?(0,i.jsx)("div",{style:L().RC,children:(0,i.jsx)(qi().T,{blockStore:e.blockStore,userIds:[e.createdById]})}):null,widthData:{widthPercent:15,minWidth:150,maxWidth:180},sortable:!1},jg={id:"createdAt",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.createdAtColumn.header",defaultMessage:"Created at"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:150}}):(0,i.jsx)(Gi().d,{dateTs:e.createdTime}),widthData:{widthPercent:15,minWidth:150},sortable:!1};function wg(e){var t;const{spaceStore:a,loadMoreMethod:n,isWorkspaceAnalyticsDisabled:o}=e,r=(0,mg().M)({spaceId:a.id}),d=(0,S().K8)((()=>a.getName()),[a]),c=function(e){const{loading:t,navigableBlockStores:a,analyticsByPageId:s}=e,n=(0,S().K8)((()=>a.map((e=>{var t,a,n;return{type:Xt().T.AnalyticsPageViewsRow,id:e.id,isClickable:!1,blockStore:e,views:(null===(t=s.get(e.id))||void 0===t?void 0:t.pageViews)||0,uniqueViews:(null===(a=s.get(e.id))||void 0===a?void 0:a.uniquePageViews)||0,teamStore:(0,Vi().Uo)(e),lastEditedById:e.getLastEditedById(),lastEditedTime:e.getLastEditedTime(),createdTime:e.getCreatedTime(),createdById:e.getCreatedById(),audience:(null===(n=s.get(e.id))||void 0===n?void 0:n.audience)||"private"}}))),[a,s]);if(t)return(0,Xt().n)();return n}(e),u=s.useMemo((()=>[{id:"page",headerTitle:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViewTable.pageColumn.header",defaultMessage:"Page"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(Ki().oc,{blockStore:e.blockStore,rightIcon:(0,i.jsx)(pg().r,{blockStore:e.blockStore})}),widthData:{widthPercent:30,minWidth:250},sortable:!1},hg,fg,xg,vg,yg,bg,Sg,jg]),[a]),g=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:u,theme:e,containerMarginTop:0})),[u]);return o?(0,i.jsx)(Yu().H,{type:"disabled",spaceName:d}):"NotFoundError"===(null==r||null===(t=r.error)||void 0===t?void 0:t.name)?(0,i.jsx)(Yu().H,{type:"empty",spaceName:d}):(0,i.jsx)(Bt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,columnRenderInfo:u,rows:c,renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:l().d,title:(0,i.jsx)(v().sA,{id:"analyticsPageViewsTable.empty",defaultMessage:"No pages found"}),byline:(0,i.jsx)(v().sA,{id:"analyticsPageViewsTable.empty.byline",defaultMessage:"There are no pages that match this query."})}),styles:g,showRowBorders:!0,loadMoreMethod:n})}function Ag(e){let{organizationId:t,spaceStore:a,daysFilter:n,setDaysFilter:o}=e;const r=(0,b().v3)(),l=(0,j().IS)((e=>({container:{width:"100%",padding:"22px 32px"}})),[]),d=(0,s.useMemo)((()=>[a.id]),[a.id]),{teamStores:c}=(0,R().o)(d),u=(0,s.useMemo)((()=>c[a.id]),[c,a.id]),[g,m]=(0,s.useState)(void 0),[p,h]=(0,s.useState)(),[f,x]=(0,s.useState)(!1),y=p??(g?[Mg(g)]:[]),[w,A]=(0,s.useState)([]),[C,I]=(0,s.useState)([]),[T,k]=(0,s.useState)({starting:void 0,ending:void 0}),[D,z]=(0,s.useState)({starting:void 0,ending:void 0}),[N,B]=(0,s.useState)("");(0,s.useEffect)((()=>{m(void 0),h(void 0),x(!1),A([]),I([]),k({starting:void 0,ending:void 0}),z({starting:void 0,ending:void 0}),B("")}),[a.id]);const{navigableBlockStores:L,analyticsByPageId:E,runNewSearch:O,loading:U,loadMoreMethod:F}=function(e){let{spaceStore:t,daysFilter:a,query:n,sort:i,teamIds:o,createdBy:r,createdOn:l,lastEditedOn:d}=e;const c=(0,b().v3)(),[u,g]=(0,s.useState)(void 0),[m,p]=(0,s.useState)([]);(0,s.useEffect)((()=>{g(void 0),p([])}),[t.id,a,n,i,o,r,l,d]);const{organizationOwnerRecordCache:h,updateCacheWithRecordMap:f}=(0,s.useContext)(P().N),[{value:x,status:v},y]=(0,Je().Yb)((async()=>{const e=m.at(-1),s=await M().callApi({eventName:"loadContentAnalytics",environment:c,data:{spaceId:t.id,sort:i,titleQuery:n,filters:{inTeams:o,createdBy:r,createdTime:(0,$d().ES)(l),lastEditedTime:(0,$d().ES)(d)},timeRange:a,startCursor:e},headers:{[Ci().B3]:t.id}});if("failed"===s.type)return;f(s);const u=s.data.results,p=u.map((e=>e.id)),h=new Map(u.map((e=>[e.id,e.analytics])));return g(s.data.nextCursor),{navigableBlockIds:p,analyticsByPageId:h}}),[r,l,a,c,d,m,n,i,t.id,o,f]),S=(0,s.useMemo)((()=>((null==x?void 0:x.navigableBlockIds)??[]).map((e=>new(_().Bv)(c,{id:e,table:aa().ev},{inMemoryRecordCache:h})))),[null==x?void 0:x.navigableBlockIds,h,c]);return{loading:"pending"===v,analyticsByPageId:(null==x?void 0:x.analyticsByPageId)??new Map,navigableBlockStores:S,runNewSearch:y,loadMoreMethod:{type:"pages",hasPrevPage:Boolean(m.length>0),hasNextPage:Boolean(u),onLoadPrevious:()=>{g(m.at(-1)),p((e=>e.slice(0,-1)))},onLoadNext:()=>{u&&(p((e=>[...e,u])),g(void 0))},currentPage:m.length+1}}}({spaceStore:a,daysFilter:n,query:N,sort:g??Cg,teamIds:w,createdBy:C,createdOn:T,lastEditedOn:D}),V=(0,S().K8)((()=>Boolean(null==a?void 0:a.getSettings().disable_page_analytics)),[a]);return(0,i.jsxs)("div",{style:l.container,children:[(0,i.jsx)(og,{organizationId:t,spaceStore:a,subtab:Og.PageViews,daysFilter:n,setDaysFilter:o,title:(0,i.jsx)(v().sA,{id:"organization.pageViews.title",defaultMessage:"Page views"}),byline:(0,i.jsx)(v().sA,{id:"organization.pageViews.byline",defaultMessage:"View all recent page views and edits"}),disableFilters:V,additionalFilters:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(zn().j,{selectedTeamIds:w,setSelectedTeamIds:A,onMenuClose:()=>{},teamStores:u}),(0,i.jsx)(gg().Q,{spaceStore:a,createdByFilterIds:C,setCreatedByFilter:e=>{I(e)},includeGuests:!0}),(0,i.jsx)(yd().Z,{lastEditedTime:D,createdTime:T,setLastEditedTime:e=>{z(e),k({starting:void 0,ending:void 0})},setCreatedOnTime:e=>{k(e),z({starting:void 0,ending:void 0})}})]}),sortProps:{sortPillProps:{sortProperties:Tg,isMenuOpen:f,setIsMenuOpen:x,onApply:e=>{x(!1),h(void 0);const t=e.at(0);m(t?function(e){return{field:e.propertyId===hg.id?"pageViews":"uniquePageViews",direction:"descending"===e.direction?"desc":"asc"}}(t):void 0)},currentSorts:y,preventMultipleSorts:!0},sortButtonProps:{appliedSorts:g?[Mg(g)]:void 0,openSortPillMenu:e=>{e&&h([{propertyId:e,direction:"descending"}]),x(!0)},sortProperties:Tg}},querySearchProps:{mode:Et().Ke.AnimatedSearchButton,query:N,setQueryFilter:e=>{B(e)}},onExport:async()=>{await(0,Ku().K)({environment:r,spaceId:a.id,organizationId:t,analyticsType:Gu().e.Content,filters:{query:N,daysFilter:n,createdBy:C,teamIds:w,createdTime:(0,$d().ES)(T),lastEditedTime:(0,$d().ES)(D)}})}}),(0,i.jsx)(wg,{organizationId:t,spaceStore:a,navigableBlockStores:L,analyticsByPageId:E,runNewSearch:O,loadMoreMethod:F,loading:U,isWorkspaceAnalyticsDisabled:V})]})}function Mg(e){return{propertyId:"pageViews"===e.field?hg.id:fg.id,direction:"desc"===e.direction?"descending":"ascending"}}const Cg={field:"pageViews",direction:"desc"},Ig=(0,v().YK)({views:{id:"organization.analytics.pageViewTable.viewsColumn.sortHeader",defaultMessage:"All views"},uniqueViews:{id:"organization.analytics.pageViewTable.uniqueViewsColumn.sortHeader",defaultMessage:"Unique views"}}),Tg=[{id:hg.id,name:T().A.formatMessage(Ig.views),type:"number"},{id:fg.id,name:T().A.formatMessage(Ig.uniqueViews),type:"number"}];var kg=()=>a(854150),_g=()=>a(997583),Dg=()=>a(690197),zg=()=>a(655546),Pg=()=>a(374255),Ng=()=>a(807106),Rg=()=>a(188668),Bg=()=>a(63964),Lg=()=>a(254685);function Eg(e){var t,a,n;let{organizationId:o,spaceStore:r,daysFilter:l}=e;const d=(0,b().v3)(),c=(0,v().tz)(),[u,g]=(0,_g().z)(),{longTallShimmer:m,shortShimmer:p}=(0,le().Z)(),h=(0,S().K8)((()=>{var e;return null===(e=ve().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),{organizationOwnerRecordCache:f}=(0,s.useContext)(P().N),x=(0,Ng().C)({spaceStore:r,userId:h,isOrganizationOwner:!0,daysFilter:l}),{activeMembersCount:y,previousActiveMembersCount:A,activeGuestsCount:M,previousActiveGuestsCount:C,topTeamspaces:I,topViewers:T,topEditors:k}=x.data,z=(0,S().K8)((()=>I.map((e=>{let{teamspaceId:t,pageViews:a}=e;return{store:new(_().h4)(d,{id:t,table:kg().yK},{inMemoryRecordCache:f}),caption:(0,i.jsx)(v().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageViews",defaultMessage:"{pageViews} views",values:{pageViews:(0,i.jsx)(zg()._,{abbreviateNumber:!0,num:a})}})}})).filter((e=>e.store.canRead())).slice(0,5)),[d,I,f]),N=(0,S().K8)((()=>T.map((e=>{let{userId:t,pageViews:a}=e;return{store:new(_().LU)(d,{id:t,table:w().oo}),caption:(0,i.jsx)(v().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,i.jsx)(zg()._,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[d,T]),R=(0,S().K8)((()=>k.map((e=>{let{userId:t,pageEdits:a}=e;return{store:new(_().LU)(d,{id:t,table:w().oo}),caption:(0,i.jsx)(v().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,i.jsx)(zg()._,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[d,k]),{usersTabData:B}=$u({spaceStore:r,daysFilter:l}),L=(0,mg().g)({spaceId:r.id,daysFilter:l}),{pageViews:E,uniquePageViews:U,pageEdits:F,topPages:V}=L.data,H=(0,S().K8)((()=>V.map((e=>{let{pageId:t,pageViews:a}=e;return{store:new(_().Bv)(d,{id:t,table:aa().ev},{inMemoryRecordCache:f}),caption:(0,i.jsx)(v().sA,{id:"workspaceAnalytics.overview.contentEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,i.jsx)(zg()._,{abbreviateNumber:!1,num:a})}})}}))),[d,V,f]),W=(0,j().IS)((e=>({twoColumnGridWithGap:{display:"grid",columnGap:16,gridAutoColumns:"minmax(0, 1fr)",gridAutoFlow:"column",width:"100%",marginBottom:-6},twoColumnGridWithNoGap:{display:"grid",columnGap:0,gridAutoColumns:"minmax(0, 1fr)",gridAutoFlow:"column",width:"100%",border:`1px solid ${e.regularDividerColor}`,borderRadius:8,boxShadow:O().v},graphContainer:{width:"100%"},graphDisplayBox:{borderRadius:8,boxShadow:O().v},searchContainer:{width:"100%"},cardTitle:{fontSize:12,alignSelf:"start",color:e.text.secondary,fontWeight:510},analyticsCardListContainer:{border:"0px",borderRadius:0,padding:"14px 16px 14px 16px"},containerWithRightBorder:{borderRight:`1px solid ${e.regularDividerColor}`,height:"100%"},bylineShimmer:{...p,height:17}})),[p]),G=Math.floor(g-8),K=(0,S().K8)((()=>Boolean(null==r?void 0:r.getSettings().disable_page_analytics)),[r]),Y=(0,S().K8)((()=>null==r?void 0:r.getName()),[r]);return K?(0,i.jsx)(Yu().H,{type:"disabled",spaceName:Y}):"NotFoundError"===(null===(t=L.error)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(a=x.error)||void 0===a?void 0:a.name)||"NotFoundError"===(null==B||null===(n=B.usersAndStatsError)||void 0===n?void 0:n.name)?(0,i.jsx)(Yu().H,{type:"empty",spaceName:Y}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.title",defaultMessage:"User engagement"}),content:(0,i.jsxs)(ne().VP,{gap:16,width:"100%",children:[(0,i.jsxs)("div",{style:W.twoColumnGridWithGap,children:[(0,i.jsx)(dr().LX,{row:1,col:1,children:(0,i.jsx)(oe,{title:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.activeMembers.title",defaultMessage:"Active members"}),content:x.loading?(0,i.jsx)(re().A,{style:m}):(0,i.jsx)(D().D,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.members",defaultMessage:"{activeMembersCount} members",values:{activeMembersCount:(0,i.jsx)(zg()._,{abbreviateNumber:!1,num:y})}})}),byline:x.loading?(0,i.jsx)(re().A,{style:W.bylineShimmer}):void 0!==A?(0,i.jsx)(Rg().Z,{userType:"members",daysFilter:l,count:y,previousCount:A}):null,onClick:()=>{Hg({environment:d,organizationId:o,spaceId:r.id,tab:Og.MemberViews})}})}),(0,i.jsx)(dr().LX,{row:1,col:2,children:(0,i.jsx)(oe,{title:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.activeGuests.title",defaultMessage:"Active guests"}),content:x.loading?(0,i.jsx)(re().A,{style:m}):(0,i.jsx)(D().D,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.guests",defaultMessage:"{activeGuestsCount} guests",values:{activeGuestsCount:(0,i.jsx)(zg()._,{abbreviateNumber:!1,num:M})}})}),byline:x.loading?(0,i.jsx)(re().A,{style:W.bylineShimmer}):void 0!==C?(0,i.jsx)(Rg().Z,{userType:"guests",daysFilter:l,count:M,previousCount:C}):null,onClick:void 0})})]}),(0,i.jsx)("div",{style:W.graphContainer,children:(0,i.jsx)(Lg().N,{usersTabData:B,daysFilter:l,intl:c,containerRef:u,widthOfGraph:G,displayBoxStyle:W.graphDisplayBox,graphTitleStyle:W.cardTitle})}),(0,i.jsxs)("div",{style:W.twoColumnGridWithNoGap,children:[(0,i.jsx)(dr().LX,{row:1,col:1,children:(0,i.jsx)("div",{style:W.containerWithRightBorder,children:(0,i.jsx)(Pg().N,{loading:x.loading,error:x.error,title:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.activeViewers",defaultMessage:"Most active viewers"}),items:N,titleStyle:W.cardTitle,containerStyle:W.analyticsCardListContainer})})}),(0,i.jsx)(dr().LX,{row:1,col:2,children:(0,i.jsx)(Pg().N,{loading:x.loading,error:x.error,title:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.activeEditors",defaultMessage:"Most active editors"}),items:R,titleStyle:W.cardTitle,containerStyle:W.analyticsCardListContainer})})]})]})}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.analytics.contentEngagement.title",defaultMessage:"Content engagement"}),content:(0,i.jsxs)(ne().VP,{gap:16,width:"100%",children:[(0,i.jsxs)("div",{style:W.twoColumnGridWithGap,children:[(0,i.jsx)(dr().LX,{row:1,col:1,children:(0,i.jsx)(oe,{title:(0,i.jsx)(v().sA,{id:"organization.analytics.contentEngagement.pageViews.title",defaultMessage:"Page views"}),content:L.loading?(0,i.jsx)(re().A,{style:m}):(0,i.jsx)(D().D,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(v().sA,{id:"organization.analytics.contentEngagement.pageViews",defaultMessage:"{pageViews} total views",values:{pageViews:(0,i.jsx)(zg()._,{abbreviateNumber:!1,num:E})}})}),byline:L.loading?(0,i.jsx)(re().A,{style:W.bylineShimmer}):(0,i.jsx)(v().sA,{id:"organization.analytics.contentEngagement.uniqueViews.title",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,i.jsx)(zg()._,{abbreviateNumber:!1,num:U})}}),onClick:()=>Hg({environment:d,organizationId:o,spaceId:r.id,tab:Og.PageViews})})}),(0,i.jsx)(dr().LX,{row:1,col:2,children:(0,i.jsx)(oe,{title:(0,i.jsx)(v().sA,{id:"organization.analytics.contentEngagement.pageEdits.title",defaultMessage:"Page edits"}),content:L.loading?(0,i.jsx)(re().A,{style:m}):(0,i.jsx)(D().D,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(v().sA,{id:"organization.analytics.contentEngagement.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,i.jsx)(zg()._,{abbreviateNumber:!1,num:F})}})}),byline:(0,i.jsx)(i.Fragment,{children:" "}),onClick:void 0})})]}),(0,i.jsxs)("div",{style:W.twoColumnGridWithNoGap,children:[(0,i.jsx)(dr().LX,{row:1,col:1,children:(0,i.jsx)("div",{style:W.containerWithRightBorder,children:(0,i.jsx)(Pg().N,{loading:x.loading,error:x.error,title:(0,i.jsx)(v().sA,{id:"organization.analytics.userEngagement.activeTeamspaces",defaultMessage:"Most active teamspaces"}),items:z,titleStyle:W.cardTitle,containerStyle:W.analyticsCardListContainer})})}),(0,i.jsx)(dr().LX,{row:1,col:2,children:(0,i.jsx)(Pg().N,{loading:L.loading,error:L.error,title:(0,i.jsx)(v().sA,{id:"workspaceAnalytics.overview.contentEngagement.popularPages",defaultMessage:"Most popular pages"}),items:H,titleStyle:W.cardTitle,containerStyle:W.analyticsCardListContainer})})]})]})}),(0,i.jsx)(ie,{title:(0,i.jsxs)(ne().fI,{gap:8,children:[(0,i.jsx)(v().sA,{id:"organization.analytics.searchQueries.title",defaultMessage:"Search queries"}),(0,i.jsx)(q().A,{placement:$a().W.Bottom,render:e=>(0,i.jsx)(Dg().A,{...e,href:(0,he().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq"}),renderTooltip:()=>(0,i.jsx)(v().sA,{id:"organization.analytics.searchQueries.tooltip",defaultMessage:"Displays popular search queries in the workspace from the selected date range."})})]}),content:(0,i.jsx)("div",{style:W.searchContainer,children:(0,i.jsx)(Bg().A,{spaceStore:r,hideHeader:!0})})})]})}let Og=function(e){return e.PageViews="page-views",e.MemberViews="member-views",e}({});const Ug={[Og.PageViews]:{title:(0,i.jsx)(v().sA,{id:"organization.analytics.pageViews.title",defaultMessage:"Page views"})},[Og.MemberViews]:{title:(0,i.jsx)(v().sA,{id:"organization.analytics.memberViews.title",defaultMessage:"Member views"})}};function Fg(e){let{spaceId:t,organizationId:a,subtab:n,queryParams:o,tabRoute:r}=e;const l=(0,b().v3)(),d=ia({spaceId:t});Fd({spaceId:t,organizationId:a,subtab:n,queryParams:o,tabRoute:r});const c=(0,s.useMemo)((()=>n?function(e){switch(e){case Og.MemberViews:return Og.MemberViews;case Og.PageViews:return Og.PageViews;default:return Og.MemberViews}}(n):void 0),[n]),[u,g]=(0,s.useState)("last_90_days");if(!d||!t||!a)return null;let m=null;switch(c){case Og.MemberViews:m=(0,i.jsx)(rg,{organizationId:a,spaceStore:d,daysFilter:u,setDaysFilter:g});break;case Og.PageViews:m=(0,i.jsx)(Ag,{organizationId:a,spaceStore:d,daysFilter:u,setDaysFilter:g})}return m&&c?(0,i.jsx)(Gl().D,{breadcrumbs:[{onClick:()=>{(0,Yl().i)({environment:l,from:{tabRoute:Jt().Tr},organizationId:a,tabRoute:Jt().Tr,queryParams:o})},message:(0,i.jsx)(v().sA,{id:"organization.analytics.breadcrumb.goBack",defaultMessage:"Analytics"})},{message:Ug[c].title}],children:m}):(0,i.jsx)(Vg,{organizationId:a,spaceStore:d,daysFilter:u,setDaysFilter:g})}function Vg(e){let{organizationId:t,spaceStore:a,daysFilter:s,setDaysFilter:n}=e;const o=(0,j().IS)((e=>({divider:{color:e.stroke.secondary,marginTop:16,marginBottom:16}})),[]);return(0,i.jsxs)(Kl,{children:[(0,i.jsx)(og,{organizationId:t,spaceStore:a,daysFilter:s,setDaysFilter:n,title:(0,i.jsx)(v().sA,{id:"organization.analytics.title",defaultMessage:"Analytics"}),byline:(0,i.jsx)(v().sA,{id:"organization.analytics.byline",defaultMessage:"Overview of how your organization is engaging with content across the workspace"})}),(0,i.jsx)(lr().A,{size:1,style:o.divider,dividerColor:o.divider.color}),(0,i.jsx)(Eg,{organizationId:t,spaceStore:a,daysFilter:s})]})}function Hg(e){const{environment:t,organizationId:a,spaceId:s,tab:n}=e;(0,Yl().i)({environment:t,from:{tabRoute:Jt().Tr},organizationId:a,tabRoute:Jt().Tr,queryParams:{[Zh]:s,subtab:n}})}var Wg=()=>a(564766),qg=()=>a(755636),Gg=()=>a(920093),Kg=()=>a(496414);function Yg(e){let{organizationStore:t}=e;const a=(0,b().v3)(),s=(0,v().tz)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Re().Y,{}),(0,i.jsx)(Be().n,{title:(0,i.jsx)(v().sA,{id:"organization.settings.deleteOrganization.title",defaultMessage:"Delete organization"}),byline:(0,i.jsx)(v().sA,{id:"organization.settings.deleteOrganization.caption",defaultMessage:"To confirm deletion, you’ll need to enter the organization name."}),buttonLabel:(0,i.jsx)(v().sA,{id:"organization.settings.deleteOrganization.button",defaultMessage:"Delete organization"}),type:"danger",onClick:async()=>{await async function(e,t,a){const{currentUserSettingsStore:s}=ve().default.state;if(!s)return;const n=e.getName()||t.formatMessage({defaultMessage:"Untitled organization",id:"organization.settings.deleteOrganization.untitledOrganization.placeholder"}),o=(0,i.jsx)(v().sA,{id:"organization.settings.deleteOrganization.confirmation.prompt",defaultMessage:"This will permanently delete the organization, including any security settings and verified domains. Workspaces will not be deleted. Please type the name of the organization to confirm."});if(await Gg().h({title:(0,i.jsx)(v().sA,{id:"organization.settings.deleteOrganization.confirmation.title",defaultMessage:"Delete this organization permanently?"}),message:o,acceptLabel:(0,i.jsx)(v().sA,{id:"organization.settings.deleteOrganization.confirmation.button",defaultMessage:"Permanently delete organization"}),requiredInputValue:n})){Kg().m({message:Qg.deletingOrganization});try{const s=await M().callApi({eventName:"deleteOrganization",environment:a,data:{organizationId:e.id}});if("success"!==s.type)return void C().f1((0,I().Hu)(t,s));Pe().oo({environment:a,url:De().JZ.root})}finally{Kg().V()}}}(t,s,a)},modal:null})]})}const Qg=(0,v().YK)({deletingOrganization:{id:"organization.deleting.loading",defaultMessage:"Deleting organization..."}});var $g=()=>a(566534);const Xg=1,Zg=et().q;function Jg(e){const[t,a]=(0,s.useState)({}),[n,i]=(0,s.useState)(),[o,r]=(0,s.useState)(""),[l,d]=(0,s.useState)(Xg),c=(0,s.useCallback)((e=>{a((t=>({...t,...e}))),d(Xg)}),[]),u=(0,s.useMemo)((()=>{if(!e)return[];let a=e;return o&&(a=(0,mt().Ay)(o,a,(e=>e.spaceName))),t.spaceIds&&t.spaceIds.length>0&&(a=a.filter((e=>{var a;return null===(a=t.spaceIds)||void 0===a?void 0:a.includes(e.id)}))),t.emailDomains&&t.emailDomains.length>0&&(a=a.filter((e=>{var a;return null===(a=t.emailDomains)||void 0===a?void 0:a.includes(e.emailDomain)}))),t.owners&&t.owners.length>0&&(a=a.filter((e=>e.owners.some((e=>{var a;return null===(a=t.owners)||void 0===a?void 0:a.includes(e)}))))),function(e){let{rows:t,appliedSorts:a}=e;const s=null!=a&&a.length?a:[{propertyId:Im,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===km.id?"emailDomain":t===Dm.id?"memberCount":t===zm.id?"guestCount":e=>e.spaceName.toLowerCase()})),i=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Rt().HB)(t)}));return Ze().My(t,n,i)}({rows:a,appliedSorts:n})}),[e,t.spaceIds,t.emailDomains,t.owners,o,n]),g=(0,s.useMemo)((()=>{const e=(l-1)*Zg,t=e+Zg;return u.slice(e,t)}),[u,l]),m=(0,s.useMemo)((()=>l*Zg<u.length),[u,l]),p=l>Xg,h=(0,s.useCallback)((()=>{m&&d((e=>e+1))}),[m]),f=(0,s.useCallback)((()=>{p&&d((e=>e-1))}),[p]);return{filters:t,updateFilters:c,query:o,setQuery:e=>{r(e),d(Xg)},paginatedRows:g,appliedSorts:n,setAppliedSorts:e=>{i(e),d(Xg)},loadNextPage:h,loadPrevPage:f,hasNextPage:m,hasPrevPage:p,currentPage:l}}const em={};var tm=()=>a(818211);const am={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M6.75 2.545a.55.55 0 0 1 .55-.55h5.4a.55.55 0 0 1 0 1.1H7.3a.55.55 0 0 1-.55-.55m-1.25 1.7a.55.55 0 1 0 0 1.1h9a.55.55 0 0 0 0-1.1zm7.036 5.847a.625.625 0 1 0-1.072-.643l-1.953 3.256-1.036-1.208a.625.625 0 1 0-.95.813l1.6 1.867a.625.625 0 0 0 1.011-.085z"}),(0,i.jsx)("path",{d:"M5.088 6.42a2.125 2.125 0 0 0-2.125 2.125v6.45c0 1.174.951 2.125 2.125 2.125h9.825a2.125 2.125 0 0 0 2.125-2.125v-6.45a2.125 2.125 0 0 0-2.125-2.125zm-.875 2.125c0-.483.392-.875.875-.875h9.825c.483 0 .875.392.875.875v6.45a.875.875 0 0 1-.875.875H5.088a.875.875 0 0 1-.875-.875z"})]})},sm=(0,n().wt)("checkStack",am),nm=(0,n().wt)("personTransfer",{viewBox:"0 0 26 20",svg:(0,i.jsx)("path",{d:"M5.918 10.085q-.738 0-1.347-.39a2.9 2.9 0 0 1-.964-1.039A3 3 0 0 1 3.252 7.2a2.85 2.85 0 0 1 1.32-2.44 2.5 2.5 0 0 1 1.346-.383q.732 0 1.333.376.61.375.97 1.018.363.643.363 1.43a2.92 2.92 0 0 1-1.333 2.494 2.4 2.4 0 0 1-1.333.39m0-1.155q.396 0 .725-.226.334-.232.533-.622.204-.39.205-.882 0-.485-.205-.861a1.5 1.5 0 0 0-.533-.588 1.3 1.3 0 0 0-.725-.219 1.3 1.3 0 0 0-.738.219 1.6 1.6 0 0 0-.527.602 1.8 1.8 0 0 0-.198.847q0 .5.198.889.198.39.527.615.335.226.738.226m-3.562 6.795q-.78 0-1.175-.267-.397-.267-.397-.82 0-.622.349-1.3.349-.675 1.012-1.264.663-.587 1.613-.95c.95-.363 1.351-.362 2.153-.362s1.518.12 2.147.362a5.2 5.2 0 0 1 1.613.95 4.4 4.4 0 0 1 1.019 1.265q.348.677.348 1.299 0 .553-.396.82-.398.267-1.176.267zm-.177-1.156h7.465q.13 0 .13-.116 0-.321-.24-.752a3 3 0 0 0-.724-.834 4 4 0 0 0-1.204-.683q-.724-.274-1.695-.274-.963 0-1.688.274a4.1 4.1 0 0 0-1.21.683 3.1 3.1 0 0 0-.732.834q-.24.43-.239.752 0 .116.137.116m17.91-4.457q-.738 0-1.347-.383a2.9 2.9 0 0 1-.964-1.045 3 3 0 0 1-.355-1.456q0-.773.355-1.415.363-.643.964-1.026a2.5 2.5 0 0 1 1.347-.383q.738 0 1.34.383.608.375.964 1.019.362.635.362 1.422 0 .8-.362 1.456a2.9 2.9 0 0 1-.971 1.039 2.4 2.4 0 0 1-1.333.39Zm0-1.155q.404 0 .731-.226.336-.232.527-.622.198-.39.198-.881 0-.486-.198-.862a1.47 1.47 0 0 0-.527-.588 1.3 1.3 0 0 0-.731-.218q-.404 0-.738.218a1.6 1.6 0 0 0-.527.602 1.8 1.8 0 0 0-.198.848q0 .498.198.888c.198.39.308.465.527.615q.334.226.738.226m-3.562 6.795q-.78 0-1.175-.267-.39-.265-.39-.82 0-.622.342-1.299.349-.676 1.011-1.258a5.2 5.2 0 0 1 1.614-.95q.949-.369 2.153-.369 1.203 0 2.153.37a5.2 5.2 0 0 1 1.614.95 4.3 4.3 0 0 1 1.011 1.257q.35.677.349 1.299 0 .555-.396.82-.398.267-1.176.267zm-.177-1.155h7.464q.137 0 .137-.117 0-.32-.246-.752a3 3 0 0 0-.724-.833 4 4 0 0 0-1.21-.677q-.725-.274-1.689-.274-.97 0-1.695.274a4 4 0 0 0-1.21.677 3 3 0 0 0-.718.834q-.24.43-.24.752 0 .116.13.116Zm-5.695-4.423a.63.63 0 0 1-.45-.185.63.63 0 0 1-.192-.458q0-.266.191-.458a.62.62 0 0 1 .451-.191.6.6 0 0 1 .458.191q.192.191.192.458c0 .267-.064.33-.192.458a.62.62 0 0 1-.458.185m2.345 0a.64.64 0 0 1-.458-.185.64.64 0 0 1-.185-.458.64.64 0 0 1 .185-.458.63.63 0 0 1 .458-.191q.267 0 .458.191.192.191.191.458c-.001.267-.063.33-.191.458a.64.64 0 0 1-.458.185m2.338 0a.64.64 0 0 1-.458-.185.64.64 0 0 1-.185-.458.64.64 0 0 1 .185-.458.63.63 0 0 1 .458-.191q.26 0 .451.191.192.191.191.458c-.001.267-.063.33-.19.458a.63.63 0 0 1-.452.185"})}),im={claimableSpaces:[],filters:{query:""},loading:!1,error:void 0,nextEarliestCreatedAt:Date.now(),hasNextPage:!0};function om(e){let{organizationId:t}=e;const a=(0,b().v3)(),[n,i]=(0,s.useState)(im),o=(0,s.useRef)(!1),r=(0,s.useRef)({}),l=(0,s.useCallback)((async e=>{let{nextEarliestCreatedAt:s,filters:n}=e;try{const{spaces:e,earliestCreatedAt:o,hasMoreSpaces:r}=await async function(e){const{environment:t,organizationId:a,emailDomains:s,spaceCreatedTimeUpperBound:n,memberCountFilter:i,query:o}=e,r=await M().callApi({eventName:"getClaimableWorkspacesInOrganization",environment:t,data:{organizationId:a,emailDomains:s,memberCountFilter:i,spaceCreatedTimeUpperBound:n,limit:et().q,filters:{query:o}}});if("failed"===r.type)throw r.error;return{spaces:r.data.results.map((e=>({id:e.id,name:e.spaceName,icon:e.spaceIcon,createdAt:e.spaceCreatedTime,memberCount:e.memberCount,subscriptionTier:e.subscriptionTier,creatorEmailDomain:e.spaceCreatedByDomain,creator:e.spaceCreator,admins:e.admins,spaceRequest:e.spaceRequest,isDelinquent:e.isDelinquent,isPendingBilling:e.isPendingBilling,isActorInSpace:e.isActorInSpace}))),earliestCreatedAt:r.data.hasMoreSpaces?r.data.earliestCreatedAt:void 0,hasMoreSpaces:r.data.hasMoreSpaces}}({environment:a,organizationId:t,emailDomains:n.emailDomains,memberCountFilter:n.memberCountFilter,query:n.query,spaceCreatedTimeUpperBound:s?s-1:Date.now()});i((t=>({...t,loading:!1,error:void 0,claimableSpaces:t.claimableSpaces.concat(e),nextEarliestCreatedAt:o,hasNextPage:r})))}catch(o){const e=(0,As().A)(o);i((t=>({...t,loading:!1,error:e})))}}),[a,t]),d=(0,s.useCallback)((async e=>{let{restartSearch:a,nextEarliestCreatedAt:s}=e;if(!t)return;let o=n.loading,d=n.error;a&&(i((e=>({...im,filters:e.filters}))),o=im.loading,d=im.error),o||d||(i((e=>({...e,loading:!0}))),r.current=n.filters,await l({nextEarliestCreatedAt:s,filters:n.filters}))}),[t,n,l]);(0,s.useEffect)((()=>{!o.current&&Boolean(t)&&(d({restartSearch:!0}),o.current=!0)}),[t,d]),(0,s.useEffect)((()=>{Ze().n4(r.current,n.filters)||d({restartSearch:!0})}),[n.filters,d]);const c=(0,s.useCallback)((async()=>{if(n.hasNextPage)return d({restartSearch:!1,nextEarliestCreatedAt:n.nextEarliestCreatedAt})}),[d,n.hasNextPage,n.nextEarliestCreatedAt]),u=(0,s.useCallback)((e=>{i((t=>({...t,filters:{...t.filters,...e}})))}),[]),g=(0,s.useCallback)((e=>(i((t=>({...t,loading:Boolean(e),claimableSpaces:[]}))),d({restartSearch:!0}))),[d]);return{loadNextPage:c,claimableSpaces:n.claimableSpaces,nextEarliestCreatedAt:n.nextEarliestCreatedAt,filters:n.filters,loading:n.loading,error:n.error,hasNextPage:n.hasNextPage,setFilters:u,refreshPage:g}}function rm(e){let{selectedMemberCountType:t,setSelectedMemberCountType:a}=e;return(0,i.jsx)(Qs().G0,{pillTitle:(0,i.jsx)(v().sA,{id:"filters.memberCountType.title",defaultMessage:"Member count"}),pillIcon:m().F,selectedItem:t,setSelectedItem:a,items:lm,shouldUseCheck:!0})}const lm=[{key:"one",value:"single",title:(0,i.jsx)(v().sA,{id:"filters.memberCountType.option.single.title",defaultMessage:"Single member"}),shortTitle:(0,i.jsx)(v().sA,{id:"filters.memberCountType.option.single.title",defaultMessage:"Single member"})},{key:"multi",value:"multi",title:(0,i.jsx)(v().sA,{id:"filters.memberCountType.option.multi.title",defaultMessage:"Multiple members"}),shortTitle:(0,i.jsx)(v().sA,{id:"filters.memberCountType.option.multi.title",defaultMessage:"Multiple members"})}];var dm=()=>a(379990),cm=()=>a(911259);async function um(e){const{spaceIds:t,fn:a,successMessage:s}=e,n=(0,tt().lX)(t,et().O,(async e=>a(e))),i=await n;return function(e){const{responses:t,successMessage:a}=e,s=t.find((e=>"failed"===(null==e?void 0:e.type)));if(s)return C().f1((0,I().Hu)(T().A.getIntl(),s));if(a)ot().D6({label:a})}({responses:i,successMessage:s}),i}function gm(e){const{spaces:t}=e,a=(0,j().IS)((e=>({workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,boxSizing:"border-box",padding:"0 12px",width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column",maxHeight:200,overflowY:"auto"},content:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",width:"100%"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16}})),[]);return(0,i.jsx)("div",{style:a.workspaceContainer,children:t.map((e=>(0,i.jsxs)("div",{style:a.content,children:[(0,i.jsx)(dm().H,{id:e.id,name:e.name,icon:e.icon,subscriptionTier:e.subscriptionTier,memberCount:e.memberCount}),(0,i.jsx)("div",{style:a.checkContainer,children:(0,bd().checkmarkIcon)(a.check)})]},e.id)))})}function mm(e){let{organizationId:t,claimableSpaces:a,onDismiss:n,onRefresh:o}=e;const r=(0,b().v3)(),l=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{width:480}})),[]);const[d,c]=(0,s.useState)(!1);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:(0,cm().F)(l.icon),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.title",defaultMessage:"Add workspace to organization?"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.byline",defaultMessage:"Send a request to claim ownership of this workspace. Once approved, it will be added to your organization."}),bylineWidthOverride:"90%"}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.button.primary",defaultMessage:"Send request"}),primaryAction:async()=>{c(!0),await async function(){await um({spaceIds:a.map((e=>e.id)),fn:async e=>M().callApi({eventName:"requestClaimForSalesAssisted",environment:r,data:{requestingOrganizationId:t,targetSpaceId:e}}),successMessage:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.saveSuccess",defaultMessage:"Successfully requested to add {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await o(),n()}(),c(!1)},primaryDisabled:d,secondaryText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:l.content,children:(0,i.jsx)(gm,{spaces:a})})})})}function pm(e){const t=(0,j().IS)((e=>({labelContainer:{display:"inline-flex",alignItems:"center",marginBottom:8},container:{position:"relative",width:"100%"},input:{padding:"6px 10px"},textBelowInput:{marginTop:6},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:14,width:14},inputContainer:{display:"flex",alignItems:"center"},inputElementWithCopyButton:{width:"calc(100% - 24px)",...L().RC},inputElementWhenMultiline:{minHeight:94},copyButton:{position:"absolute",right:4,height:"fit-content"}})),[]);return(0,i.jsxs)("div",{style:t.container,children:[(0,i.jsxs)("div",{style:t.labelContainer,children:[(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:e.labelMessage}),e.helpMessage&&(0,i.jsx)(q().A,{renderTooltip:()=>e.helpMessage,render:e=>(0,i.jsx)("span",{...e,children:(0,or().T)(t.helpIcon)})})]}),(0,i.jsxs)("div",{style:t.inputContainer,children:[(0,i.jsx)(U().A,{textarea:e.multiline,value:e.value,placeholder:e.placeholder,disabled:e.disabled,onChange:e.onChange,onBlur:e.onBlur,style:t.input,inputStyle:{...e.onCopyClick?t.inputElementWithCopyButton:void 0,...e.multiline?t.inputElementWhenMultiline:void 0}}),e.onCopyClick?(0,i.jsx)(ws().lz,{onCopyClick:e.onCopyClick,isHovered:!0,containerStyles:t.copyButton}):null]}),e.secondaryMessage?(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:t.textBelowInput,children:e.secondaryMessage}):null,e.errorMessage?(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"uiRedPrimary",customStyles:t.textBelowInput,children:e.errorMessage}):null]})}function hm(e){let{organizationId:t,claimableSpaces:a,onDismiss:n,onRefresh:o}=e;const r=(0,b().v3)(),l=(0,v().tz)(),[d,c]=(0,s.useState)(!1),[u,g]=(0,s.useState)(),[m,p]=(0,s.useState)(!0),h=(0,j().IS)((e=>({icon:{height:32,fill:e.icon.secondary},content:{width:440,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:24},confirmation:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",gap:10}})),[]);function f(){const e=(0,gt().qh)(u);return p((0,gt().DT)(e)),e}const[x,y]=(0,s.useState)(!1);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:nm(h.icon),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.title",defaultMessage:"Request transfer"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.byline",defaultMessage:"Request the workspace owner to transfer this workspace to a personal account. Access will be restricted until transfer is complete."}),bylineWidthOverride:"85%"}),footer:(0,i.jsx)(K().jl,{primaryDisabled:!d||x||!m||!u,primaryText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.button.primary",defaultMessage:"Request transfer"}),primaryAction:async()=>{y(!0),await async function(){const e=f();e&&(await um({spaceIds:a.map((e=>e.id)),fn:async a=>M().callApi({eventName:"initiateOrganizationSpaceTransfer",environment:r,data:{organizationId:t,targetSpaceId:a,contactEmail:e}}),successMessage:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.saveSuccess",defaultMessage:"Successfully requested transfer for {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await o(),n())}(),y(!1)},secondaryText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsxs)("div",{style:h.content,children:[(0,i.jsx)(gm,{spaces:a}),(0,i.jsx)(pm,{value:u,onChange:e=>g(e.target.value),onBlur:f,placeholder:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.placeholder",defaultMessage:"admin@example.com"}),labelMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.contactEmailInput",defaultMessage:"Assign a contact for inquiries"}),helpMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.helpMessage",defaultMessage:"The Workspace Owner of the transfer requested workspace can contact this email for inquiries"}),errorMessage:m?void 0:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.errorMessage",defaultMessage:"Invalid email address"})}),(0,i.jsxs)("div",{style:h.confirmation,children:[(0,i.jsx)(rt().A,{checked:d,size:14,checkSize:10,onClick:()=>c((e=>!e))}),(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.confirmationCheckbox",defaultMessage:"I understand this cannot be undone"})})]})]})})})}function fm(e){let{organizationId:t,claimableSpaces:a,onDismiss:n,onRefresh:o}=e;const r=(0,b().v3)(),l=(0,v().tz)(),[d,c]=(0,s.useState)(!1),[u,g]=(0,s.useState)(),[m,p]=(0,s.useState)(!0),h=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.uiRedPrimary},content:{display:"flex",flexDirection:"column",width:440,justifyContent:"center",alignItems:"center",gap:24},confirmation:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",gap:10}})),[]);function f(){const e=(0,gt().qh)(u);return p((0,gt().DT)(e)),e}const[x,y]=(0,s.useState)(!1);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:(0,Nt().I)(h.icon),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.title",defaultMessage:"Delete workspace?"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.byline",defaultMessage:"Schedule this workspace deletion in 30 days, revoking access for all users and notifying workspace owners."}),bylineWidthOverride:"90%"}),footer:(0,i.jsx)(K().jl,{isDarkRed:!0,primaryDisabled:!d||x||!m||!u,primaryText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.button.primary",defaultMessage:"Schedule deletion"}),primaryAction:async()=>{y(!0),await async function(){const e=f();e&&(await um({spaceIds:a.map((e=>e.id)),fn:async a=>M().callApi({eventName:"deleteSpaceForOrganizationDomain",environment:r,data:{organizationId:t,targetSpaceId:a,contactEmail:e}}),successMessage:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.saveSuccess",defaultMessage:"Successfully scheduled to delete {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await o(),n())}(),y(!1)},secondaryText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsxs)("div",{style:h.content,children:[(0,i.jsx)(gm,{spaces:a}),(0,i.jsx)(pm,{value:u,onChange:e=>g(e.target.value),onBlur:f,placeholder:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.placeholder",defaultMessage:"admin@example.com"}),labelMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.contactEmailInput",defaultMessage:"Assign a contact for inquiries"}),helpMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.helpMessage",defaultMessage:"The Workspace Owner of the deleted workspace can contact this email for inquiries"}),errorMessage:m?void 0:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.errorMessage",defaultMessage:"Invalid email address"})}),(0,i.jsxs)("div",{style:h.confirmation,children:[(0,i.jsx)(rt().A,{checked:d,size:14,checkSize:10,onClick:()=>c((e=>!e))}),(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.confirmationCheckbox",defaultMessage:"I understand this cannot be undone after the 30-day period"})})]})]})})})}const xm=[{id:"name",headerTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(a(204121).X,{shouldAccountForMultiselect:!0,rightContent:(0,i.jsx)(bm,{claimableSpace:e.claimableSpace,setSelectedSpaceId:e.setSelectedSpaceId,setOpenedModal:e.setOpenedModal}),spaceId:e.claimableSpace.id,spaceName:e.claimableSpace.name,spaceIcon:e.claimableSpace.icon,badge:e.claimableSpace.spaceRequest?(0,i.jsx)(Sm,{claimableSpace:e.claimableSpace}):void 0}),widthData:{width:300,maxWidth:300},sortable:!1,shouldShowSortTooltip:!1},{id:"plan",headerTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.plan.header",defaultMessage:"Plan"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,dm().K)(e.claimableSpace.subscriptionTier,T().A.getIntl())}),widthData:{widthPercent:15,minWidth:40},sortable:!1,shouldShowSortTooltip:!1},{id:"memberCount",headerTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.memberCount.header",defaultMessage:"Members"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:120}}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.memberCount.count",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:e.claimableSpace.memberCount}})}),widthData:{widthPercent:15,minWidth:40},sortable:!1,shouldShowSortTooltip:!1},{id:"domain",headerTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.domain.header",defaultMessage:"Verified email domain"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:200}}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.domain.email",defaultMessage:"@{domain}",values:{domain:e.claimableSpace.creatorEmailDomain}})}),widthData:{widthPercent:20,minWidth:70},sortable:!1,shouldShowSortTooltip:!1},{id:"owners",headerTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.owners.header",defaultMessage:"Workspace owners"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Pn().p,{}):e.workspaceOwnerUserStores.length>0?(0,i.jsx)(Pn().l,{isClickable:!0,userStores:e.workspaceOwnerUserStores}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.owners.noOwners",defaultMessage:"Nobody"})}),hasClickableContents:!0,widthData:{widthPercent:15,minWidth:40},sortable:!1,shouldShowSortTooltip:!1},{id:"createdBy",headerTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.createdBy.header",defaultMessage:"Created by"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Pn().p,{}):e.claimableSpace.creator?(0,i.jsx)(Pn().l,{isClickable:!0,userStores:[e.createdByUserStore]}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.createdBy.deletedUser",defaultMessage:"Deleted user"})}),hasClickableContents:!0,widthData:{widthPercent:20,minWidth:70},sortable:!1,shouldShowSortTooltip:!1},{id:"createdOn",headerTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.createdOn.header",defaultMessage:"Created on"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:80}}):(0,i.jsx)(Gi().d,{useSecondaryColorTitle:!0,dateTs:e.claimableSpace.createdAt}),widthData:{widthPercent:20,minWidth:70},sortable:!1,shouldShowSortTooltip:!1}];var vm=function(e){return e.AddWorkspace="add-workspace",e.RequestTransfer="request-transfer",e.ScheduleDeletion="schedule-deletion",e}(vm||{});function ym(e){let{organizationId:t,claimableSpaces:a,hasMoreResults:n,onLoadMoreResults:o,refreshPage:r,loading:l,error:d,selectedIds:c,onSelectAll:u,onUnselectAll:g,onSelectRow:m}=e;const p=(0,b().v3)(),[h,f]=(0,s.useState)(),[y,S]=(0,s.useState)(),A=(0,qt().A)(),M=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:xm,theme:e,containerMarginTop:0})),[]),C=(0,s.useMemo)((()=>a.map((e=>({id:e.id,type:Xt().T.OrganizationClaimableWorkspace,claimableSpace:e,createdByUserStore:e.creator?new(_().LU)(p,{table:w().oo,id:e.creator.id}):void 0,workspaceOwnerUserStores:e.admins.map((e=>new(_().LU)(p,{table:w().oo,id:e.id}))),setSelectedSpaceId:f,setOpenedModal:S,isClickable:!0})))),[a,p]),I=l?0===C.length?(0,Xt().n)():[...C,...(0,Xt().n)(3)]:C,T=xm.map((e=>({...e,headerStyle:A.tableHeaderForModal,rowStyle:A.tableRowForModal}))),k={header:{isDisabled:l,isSelected:c.length>0&&c.length===a.length,onClick:()=>{c.length===a.length?g():u()}},row:{getDisabledState:e=>l,getSelectedState:e=>e.type===Xt().T.OrganizationClaimableWorkspace&&c.includes(e.claimableSpace.id),onClick:e=>{e.type===Xt().T.OrganizationClaimableWorkspace&&m(e.claimableSpace.id)}}},D=h?a.find((e=>e.id===h)):void 0;return!l&&d?(0,i.jsx)(Qt,{error:d,runNewSearch:r}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Bt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:T,rows:I,styles:M,onRowClick:e=>m(e.id),multiselect:k,loadMoreMethod:!l&&n?{type:"button",onLoadMore:o}:void 0,renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:x().V,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.empty.title",defaultMessage:"No workspaces found"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.empty.byline",defaultMessage:"There are no workspaces that match this query."})})}),y===vm.AddWorkspace&&D?(0,i.jsx)(mm,{organizationId:t,claimableSpaces:[D],onDismiss:()=>S(void 0),onRefresh:r}):null,y===vm.RequestTransfer&&D?(0,i.jsx)(hm,{organizationId:t,claimableSpaces:[D],onDismiss:()=>S(void 0),onRefresh:r}):null,y===vm.ScheduleDeletion&&D?(0,i.jsx)(fm,{organizationId:t,claimableSpaces:[D],onDismiss:()=>S(void 0),onRefresh:r}):null]})}function bm(e){const{claimableSpace:t,setSelectedSpaceId:a,setOpenedModal:s}=e,n=(0,j().IS)((()=>({icon16x20:{height:16,width:20,fill:"currentColor"},icon20x20:{height:20,width:20,fill:"currentColor"}})),[]),o=[{key:"add-workspace",type:"action",icon:sm(n.icon20x20),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.addWorkspace",defaultMessage:"Add workspace"}),caption:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.addWorkspace.caption",defaultMessage:"Claim ownership and add this workspace to your organization."}),disabled:(0,tm().Rx)(t)||(0,tm().NK)(t),tooltipTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.addWorkspace.disabledTooltip",defaultMessage:"You can only add workspaces to your organization that have more than one member and have no pending requests."}),tooltipDisabled:(0,tm().eG)(t)&&!(0,tm().NK)(t),action:()=>{s(vm.AddWorkspace),a(t.id)}},{key:"request-transfer",type:"action",icon:nm(n.icon20x20),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.requestTransfer",defaultMessage:"Request transfer"}),caption:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.requestTransfer.caption",defaultMessage:"Prompt the owner to transfer workspace ownership to a personal account."}),disabled:(0,tm().eG)(t)||(0,tm().NK)(t),tooltipTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.requestTransfer.disabledTooltip",defaultMessage:"You can only request transfers for workspaces with one member and have no pending requests."}),tooltipDisabled:(0,tm().Rx)(t)&&!(0,tm().NK)(t),action:()=>{s(vm.RequestTransfer),a(t.id)}},{key:"schedule-deletion",type:"action",icon:(0,Nt().I)(n.icon20x20),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion",defaultMessage:"Schedule deletion"}),caption:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion.caption",defaultMessage:"Schedule for 30-day deletion, revoke access, and notify owners."}),disabled:(0,tm().eG)(t)||(0,tm().NK)(t)||(0,tm().t_)(t),tooltipTitle:(0,tm().t_)(t)?(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion.disabledTooltip.notFreeTier",defaultMessage:"Only workspaces on the free tier are eligible for deletion."}):(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion.disabledTooltip",defaultMessage:"You can only delete workspaces with one member and have no pending requests."}),tooltipDisabled:(0,tm().Rx)(t)&&!(0,tm().NK)(t)&&!(0,tm().t_)(t),action:()=>{s(vm.ScheduleDeletion),a(t.id)}}];return(0,i.jsx)(Lt().bd,{items:o})}function Sm(e){const{claimableSpace:t}=e,n=(0,v().tz)(),o=(0,s.useMemo)((()=>{const e=t.admins[0];return e?(0,a(695608).c6)(n,e):void 0}),[n,t]);const r=function(){var e;switch(null===(e=t.spaceRequest)||void 0===e?void 0:e.type){case"team_claim_upgrade":case"organization_claiming_space":return(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.claim",defaultMessage:"Workspace claim request is being processed."});case"organization_domain_claim_space_deletion":case"domain_claim_space_deletion":return(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.delete",defaultMessage:"Workspace is in the process of being deleted."});case"organization_personal_external_transfer":case"personal_external_transfer":return o?(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.transfer",defaultMessage:"Waiting for {ownerName} to transfer this workspace to an external account.",values:{ownerName:o}}):(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.transfer.noOwnerName",defaultMessage:"Waiting for the workspace owner to transfer this workspace to an external account."});default:return}}();return r?(0,i.jsx)(q().A,{renderTooltip:()=>r,render:e=>(0,i.jsx)(Vt().A,{...e,content:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.pendingBadge.content",defaultMessage:"Pending"})})}):null}function jm(e){let{organizationId:t,onDismiss:a}=e;const s=(0,j().IS)((e=>({content:{display:"flex",flexDirection:"column",width:"100%",gap:0,overflowY:"auto",padding:"16px 12px"}})),[]);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:a,areaConstraint:{height:{type:"fixed",length:800},width:{type:"fixed",length:1280}},render:e=>{let{sizeRange:a}=e;return(0,i.jsx)(F().tf,{sizeRange:a,showDismissButton:!1,header:null,footer:null,children:(0,i.jsxs)("div",{style:s.content,children:[(0,i.jsx)(Va()._,{title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.title",defaultMessage:"Add workspaces"}),byline:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.byline",defaultMessage:"Add workspaces created with a verified domain, or request ownership transfer to a personal account."})}),(0,i.jsx)(Am,{organizationId:t})]})})}})}var wm=function(e){return e.AddWorkspace="add-workspace",e.RequestTransfer="request-transfer",e.ScheduleDeletion="schedule-deletion",e}(wm||{});function Am(e){let{organizationId:t}=e;const[a,n]=(0,s.useState)(),o=(0,Hn().F)(),r=(0,v().tz)(),l=(0,b().v3)(),d=(0,_a().E)({organizationId:t}),c=(0,S().K8)((()=>(null==d?void 0:d.getEmailDomains())??[]),[d]),[u,g]=(0,s.useState)(!1),{claimableSpaces:m,filters:p,setFilters:h,loading:f,error:x,hasNextPage:y,loadNextPage:j,refreshPage:w}=om({organizationId:t}),A=(0,s.useMemo)((()=>m.map((e=>e.id))),[m]),{selectedIds:M,handleToggleId:C,handleSelectAllIds:I,handleUnselectAllIds:T}=Ot({allPossibleIds:A}),k=(0,s.useMemo)((()=>M.map((e=>m.find((t=>t.id===e)))).filter(Rt().O9)),[m,M]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:o.tableHeader,children:[(0,i.jsxs)("div",{style:o.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:M.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(Fa,{itemsSelectedCount:M.length}),onClick:T}),(0,i.jsx)(Ua,{icon:sm,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.multiselect.addWorkspace",defaultMessage:"Add workspace"}),disabled:k.some(tm().Rx)||k.some(tm().NK),disabledTooltipText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.multiselect.addWorkspace.disabledTooltip",defaultMessage:"You can only add workspaces to your organization that have more than one member and have no pending requests."}),onClick:()=>n(wm.AddWorkspace)}),(0,i.jsx)(Ua,{icon:nm,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.multiselect.requestTransfer",defaultMessage:"Request transfer"}),disabled:k.some(tm().eG)||k.some(tm().NK),disabledTooltipText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.multiselect.requestTransfer.disabledTooltip",defaultMessage:"You can only request transfers for workspaces with one member and have no pending requests."}),onClick:()=>n(wm.RequestTransfer)}),(0,i.jsx)(Ua,{isDestructive:!0,icon:Nt().I,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.multiselect.scheduleDeletion",defaultMessage:"Schedule deletion"}),disabled:k.some(tm().eG)||k.some(tm().NK)||k.some(tm().t_),disabledTooltipText:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.multiselect.scheduleDeletion.disabledTooltip",defaultMessage:"You can only delete workspaces with one member, no pending requests, and on the free tier."}),onClick:()=>n(wm.ScheduleDeletion)})]}),(0,i.jsx)(rm,{selectedMemberCountType:p.memberCountFilter,setSelectedMemberCountType:e=>h({memberCountFilter:e})}),(0,i.jsx)($s,{pillTitle:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.filters.email.title",defaultMessage:"Verified email domains"}),emailDomains:c,selectedEmailDomains:p.emailDomains||[],setSelectedEmailDomains:e=>{h({emailDomains:e})}})]}),(0,i.jsxs)("div",{style:o.rightContent,children:[(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:p.query,setQueryFilter:e=>h({query:e}),placeholderText:r.formatMessage({id:"organization.workspaces.addModal.filters.query.placeholder",defaultMessage:"Search by workspace name"})}),(0,i.jsx)(ig().K,{disabled:u,onClick:async()=>{g(!0),await Fe().M0({environment:l,data:{organizationId:t}}),g(!1)}})]})]}),(0,i.jsx)(ym,{organizationId:t,claimableSpaces:m,hasMoreResults:y,onLoadMoreResults:j,refreshPage:()=>w(!0),loading:f,error:x,selectedIds:M,onSelectAll:I,onUnselectAll:T,onSelectRow:C}),a===wm.AddWorkspace?(0,i.jsx)(mm,{organizationId:t,claimableSpaces:k,onDismiss:()=>n(void 0),onRefresh:()=>w(!0)}):null,a===wm.RequestTransfer?(0,i.jsx)(hm,{organizationId:t,claimableSpaces:k,onDismiss:()=>n(void 0),onRefresh:()=>w(!0)}):null,a===wm.ScheduleDeletion?(0,i.jsx)(fm,{organizationId:t,claimableSpaces:k,onDismiss:()=>n(void 0),onRefresh:()=>w(!0)}):null]})}var Mm=()=>a(687190);function Cm(e){var t;let{spaceStore:a,organizationId:s,onDismiss:n}=e;const o=(0,S().K8)((()=>a.getName()),[a]),{state:r}=(0,Oc().j)(),l=(null===(t=r.value)||void 0===t||null===(t=t.membersForSpace[a.id])||void 0===t?void 0:t.length)||0,d=(0,S().K8)((()=>(0,i.jsx)(E().A,{disabled:!0,icon:a.getIcon(),defaultIcon:(0,x().V)(),isEmptyPage:!1,size:oa().WK})),[a]),c=(0,S().K8)((()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v().sA,{id:"organization.general.workspace",defaultMessage:"Workspace"}),(0,i.jsx)(z().A,{style:{margin:"0 2px"}}),(0,i.jsx)(ue().Qq,{memberCount:l})]})),[l]);return(0,i.jsx)(oa().iv,{isOpen:!0,sidebarProps:{sidebarTitleIcon:d,sidebarTitle:o,sidebarByline:c,hideSeparator:!0,bottomEntitySection:(0,i.jsx)(Mm().Ir,{organizationId:s}),renderTooltip:()=>(0,i.jsx)(Mm().uL,{})},tabRenderer:nf,tabNames:Jt().yp,tabAccessor:sf,defaultTab:"general",onDismiss:n,sceneProps:{spaceStore:a,organizationId:s,onCloseModal:n}})}const Im="space",Tm=(0,v().YK)({workspace:{id:"organizationManageWorkspacesTable.spaceColumn.sortName",defaultMessage:"Workspace"},members:{id:"organizationManageWorkspacesTable.membersColumn.header",defaultMessage:"Members"},guests:{id:"organizationManageWorkspacesTable.guestsColumn.header",defaultMessage:"Guests"},emailDomain:{id:"organizationManageWorkspacesTable.emailDomain.sortName",defaultMessage:"Email Domain"}});const km={id:"emailDomain",headerTitle:(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesTable.verifiedEmailDomainColumn.header",defaultMessage:"Verified email domain"}),renderCell:e=>e.type!==Xt().T.Loading&&e.emailDomain?(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesTable.emailDomainColumn.emailDomain",defaultMessage:"@{emailDomain}",values:{emailDomain:e.emailDomain}})}):(0,i.jsx)(Lt().mf,{}),widthData:{widthPercent:20,minWidth:180},sortable:!1};function _m(e,t){return{id:"owners",headerTitle:(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesTable.ownersColumn.header",defaultMessage:"Workspace owners"}),renderCell:a=>a.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{}):(0,i.jsx)(de().t,{users:e.filter((e=>a.owners.includes(e.id))),totalMemberCount:a.owners.length,showTooltip:!0,isLoading:t}),widthData:{widthPercent:20,minWidth:140},sortable:!1}}const Dm={id:"members",headerTitle:(0,i.jsx)(v().sA,{...Tm.members}),renderCell:e=>e.type===Xt().T.Loading||void 0===e.memberCount?(0,i.jsx)(Lt().mf,{}):(0,i.jsx)(D().D,{colorName:"secondary",children:(0,i.jsx)(v().sA,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"organizationManageWorkspacesTable.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:15,minWidth:120},sortable:!1},zm={id:"guests",headerTitle:(0,i.jsx)(v().sA,{...Tm.guests}),renderCell:e=>e.type===Xt().T.Loading||void 0===e.guestCount?(0,i.jsx)(Lt().mf,{}):(0,i.jsx)(D().D,{colorName:"secondary",children:(0,i.jsx)(ue().h6,{guestCount:e.guestCount})}),widthData:{widthPercent:15,minWidth:120},sortable:!1},Pm=[{id:Im,name:T().A.formatMessage(Tm.workspace),type:"title"},{id:km.id,name:T().A.formatMessage(Tm.emailDomain),type:"title"},{id:Dm.id,name:T().A.formatMessage(Tm.members),type:"number"},{id:zm.id,name:T().A.formatMessage(Tm.guests),type:"number"}];function Nm(e){let{organizationId:t}=e;const a=(0,b().v3)(),{availableOrganizationFeatures:n,refreshOrganization:o}=(0,s.useContext)(N().D),r=n.has_access_to_domain_claim,l=(0,k().X)("organization_console_ga_enabled"),d=(0,qt().A)(),c=(0,ks().l)(),{workspaceOwnerIdsBySpaceId:u,loading:g}=function(e){let{organizationId:t}=e;const a=(0,b().v3)(),[{status:s,error:n,value:i}]=(0,Je().Yb)((async()=>{if(!t)return{userIdsBySpaceId:{}};const e=await M().callApi({eventName:"getWorkspaceOwnersInOrganization",environment:a,data:{organizationId:t}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,Rt().HB)(e)}),[a,t]);return{workspaceOwnerIdsBySpaceId:(null==i?void 0:i.userIdsBySpaceId)??em,loading:"pending"===s||"idle"===s,error:n}}({organizationId:t}),m=(0,S().K8)((()=>{const e=new Set(Object.values(u).flat());return Array.from(e).map((e=>new(ft().L)(a,{table:w().oo,id:e})))}),[a,u]),p=s.useMemo((()=>{return[(e=c.length,{id:Im,headerTitle:(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesTable.spaceColumn.header",defaultMessage:"Workspaces ({numWorkspaces})",values:{numWorkspaces:e}}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{}):(0,i.jsx)(Lt().s7,{title:e.spaceName,icon:(0,i.jsx)(E().A,{disabled:!0,icon:e.spaceIcon,isEmptyPage:!1,title:e.spaceName,size:Na().p8,isLarge:!0}),iconSize:Na().p8,iconMargin:Lt().Ji,summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:`calc(100% - ${Bt().Gr}px)`}}),widthData:{widthPercent:0,minWidth:350,maxWidth:350},sortable:!1}),km,_m(m,g),Dm,zm];var e}),[m,c.length,g]),h=p.map((e=>({...e,headerStyle:d.tableHeader,rowStyle:d.tableRow}))),f=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:p,theme:e,containerMarginTop:0})),[p]),y=qa(),{spaceUsers:C}=(0,B().$)(c),{emailDomainsBySpace:I,allEmailDomains:T,isLoadingEmailDomains:_}=function(e,t){const a=(0,s.useMemo)((()=>t.map((e=>e.id))),[t]),n=(0,b().v3)(),[{value:i,status:o}]=(0,Je().Yb)((async()=>{if(0===a.length)return;const t=await M().callApi({eventName:"getWorkspaceCreatorEmailDomainsForOrg",environment:n,data:{organizationId:e,spaceIds:a}});return"success"===t.type?{emailDomainMap:t.data.emailDomainMap,emailDomains:[...new Set(Object.values(t.data.emailDomainMap).filter((e=>void 0!==e)))]}:void 0}),[n,e,a]);return{isLoadingEmailDomains:"pending"===o||"idle"===o,emailDomainsBySpace:null==i?void 0:i.emailDomainMap,allEmailDomains:null==i?void 0:i.emailDomains}}(t,c),D=(0,S().K8)((()=>0===c.length||_||c.some((e=>!e.isReady()))||m.some((e=>!e.isReady()))),[c,m,_]),z=(0,S().K8)((()=>c.map((e=>{const t=null==I?void 0:I[e.id],a=null==C?void 0:C[e.id];let s,n;if(a){s=a.filter(A().QE).filter((e=>!e.isTeamGuest&&e.isPageGuest)).length,n=a.filter((e=>(0,A().c7)(e))).length}return{type:Xt().T.OrganizationWorkspace,spaceName:e.getName()||"",spaceIcon:e.getIcon(),emailDomain:t||"",owners:u[e.id]||[],memberCount:n,guestCount:s,id:e.id,isClickable:!0}}))),[I,c,C,u]),{filters:P,updateFilters:R,query:L,setQuery:O,paginatedRows:U,appliedSorts:F,setAppliedSorts:V,loadNextPage:W,loadPrevPage:G,hasNextPage:K,hasPrevPage:Y,currentPage:Q}=Jg(z),$=D?(0,Xt().n)():U,X=(0,s.useMemo)((()=>U.map((e=>e.id))),[U]),{selectedIds:Z,handleToggleId:J,handleSelectAllIds:ee,handleUnselectAllIds:te}=Ot({allPossibleIds:X}),ae=zi({spaceStores:c}),[se,ne]=(0,s.useState)(),[ie,oe]=(0,s.useState)(),[re,le]=(0,s.useState)(!1);const de=(0,S().K8)((()=>{if(se&&"viewWorkspace"===(null==se?void 0:se.type))return c.find((e=>e.id===se.spaceId))}),[se,c]),ce=ie??F??[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:y.tableHeader,children:[(0,i.jsxs)("div",{style:y.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:Z.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(Fa,{itemsSelectedCount:Z.length}),onClick:te}),(0,i.jsx)(Ua,{disabled:Z.length===z.length,disabledTooltipText:(0,i.jsx)(v().sA,{id:"manageWorkspacesTable.multiselect.removeAllWorkspacesTooltip",defaultMessage:"You must have at least one workspace in your organization"}),icon:$g().U,iconSize:14,title:(0,i.jsx)(v().sA,{id:"manageWorkspacesTable.multiselect.removeWorkspace",defaultMessage:"Remove workspace"}),onClick:()=>ne({type:"removeWorkspace",spaceIds:Z})})]}),(0,i.jsx)(Vn().A,{children:(0,i.jsx)(Wa().e,{sortProperties:Pm,isMenuOpen:re,setIsMenuOpen:le,onApply:e=>{le(!1),V(e),oe(void 0)},currentSorts:ce})}),ce.length>0?(0,i.jsx)(Fn().he,{}):null,(0,i.jsx)(Ui,{selectedSpaceIds:P.spaceIds||[],setSelectedSpaceIds:e=>R({spaceIds:e}),spaceData:ae}),(0,i.jsx)($s,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesTable.emailDomainsFilter.pillTitle",defaultMessage:"Verified email domain"}),emailDomains:T||[],selectedEmailDomains:P.emailDomains||[],setSelectedEmailDomains:e=>{R({emailDomains:e})}}),(0,i.jsx)(Li,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesTable.ownersFilter.pillTitle",defaultMessage:"Workspace owners"}),pillIcon:dn,userIds:u?[...new Set(Object.values(u).flat())]:[],selectedUsers:P.owners||[],setSelectedUsers:e=>{R({owners:e})}})]}),(0,i.jsxs)("div",{style:y.rightContent,children:[(0,i.jsx)(Ha().x,{appliedSorts:F,openSortPillMenu:e=>{e&&oe([{propertyId:e,direction:"ascending"}]),le(!0)},sortProperties:Pm}),(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:L,setQueryFilter:O}),(0,i.jsx)(q().A,{renderTooltip:()=>(0,i.jsx)(v().sA,{defaultMessage:"Coming soon",id:"manageWorkspacesTable.comingSoon"}),disableTooltip:l,render:e=>r?(0,i.jsx)(H().A,{disabled:!l,onClick:()=>ne({type:"addWorkspaces"}),...e,children:(0,i.jsx)(v().sA,{defaultMessage:"Add workspace",id:"manageWorkspacesTable.addWorkspaceButton"})}):null})]})]}),"addWorkspaces"===(null==se?void 0:se.type)?(0,i.jsx)(jm,{onDismiss:()=>ne(void 0),organizationId:t}):null,"viewWorkspace"===(null==se?void 0:se.type)&&de?(0,i.jsx)(Cm,{spaceStore:de,onDismiss:()=>ne(void 0),organizationId:t}):null,"removeWorkspace"===(null==se?void 0:se.type)?(0,i.jsx)(lt,{spaceIds:se.spaceIds,organizationId:t,onCancel:()=>{ne(void 0)},onSubmit:()=>{ne(void 0),te()},refetchData:async()=>await o()}):null,(0,i.jsx)(Bt().WE,{hideHeaderRowPadding:!0,columnRenderInfo:h,rows:$,loadMoreMethod:{type:"pages",onLoadNext:W,onLoadPrevious:G,hasNextPage:K,hasPrevPage:Y,currentPage:Q},renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:x().V,title:(0,i.jsx)(v().sA,{id:"manageWorkspacesTable.empty",defaultMessage:"No workspaces found"}),byline:(0,i.jsx)(v().sA,{id:"manageWorkspacesTable.empty.byline",defaultMessage:"There are no workspaces that match this query."})}),styles:f,showRowBorders:!0,onRowClick:function(e){e.type!==Xt().T.Loading&&e.isClickable&&ne({type:"viewWorkspace",spaceId:e.id})},multiselect:{header:{isDisabled:!1,isSelected:U.length>0&&Z.length===U.length,onClick:()=>{Z.length===U.length?te():ee()}},row:{getDisabledState:()=>!1,getSelectedState:e=>Z.includes(e.id),onClick:e=>{J(e.id)}}},allowHorizontalScroll:!0,extendToFullScreen:$t().e})]})}function Rm(e){let{organizationStore:t}=e;const a=(0,b().v3)(),s=(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesSubTab.title",defaultMessage:"Manage workspaces"});return(0,i.jsx)(Gl().D,{breadcrumbs:[{message:(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesSubTab.breadcrumb.goBack",defaultMessage:"General"}),onClick:()=>{(0,Yl().i)({environment:a,from:{tabRoute:Jt().Vo,properties:{subtab:"workspaces"}},organizationId:t.id,tabRoute:Jt().Vo})}},{message:s}],children:(0,i.jsxs)(bl().t,{children:[(0,i.jsx)(Va()._,{title:s,byline:(0,i.jsx)(v().sA,{id:"organizationManageWorkspacesSubTab.description",defaultMessage:"View and manage all workspaces associated to this organization."})}),(0,i.jsx)(Nm,{organizationId:t.id})]})})}var Bm=()=>a(852507);function Lm(e){const{samlConfig:t,updateCreateAccount:a,loading:s}=e,n=(0,v().tz)(),o=(0,b().v3)();return(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.automaticAccountCreation.title",defaultMessage:"Automatic account creation"}),badge:(0,i.jsx)(cs().A,{icon:or().T,ariaLabel:n.formatMessage({id:"organization.general.saml.settings.automaticAccountCreation.iconButton.ariaLabel",defaultMessage:"Learn more"}),onClick:()=>qg().f({environment:o,url:(0,he().xS)("guides.samlJIT")})}),byline:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.automaticAccountCreation.byline",defaultMessage:"Automatically create accounts for new SAML SSO users."}),item:(0,i.jsx)(we().A,{on:Boolean(null==t?void 0:t.createAccount),onClick:async function(){t&&await a(!t.createAccount)},disabled:!t||s})})}var Em=()=>a(234279),Om=()=>a(719147),Um=()=>a(484595);function Fm(e){const t=(0,j().IS)((e=>({labelContainer:{display:"inline-flex",alignItems:"center",marginBottom:8},container:{position:"relative",width:"100%"},textBelowInput:{marginTop:6},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:14,width:14},inputContainer:{display:"flex",alignItems:"center",gap:8},radioOption:{display:"flex",alignItems:"center"}})),[]);return(0,i.jsxs)("div",{style:t.container,children:[(0,i.jsxs)("div",{style:t.labelContainer,children:[(0,i.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:e.labelMessage}),e.helpMessage&&(0,i.jsx)(q().A,{renderTooltip:()=>e.helpMessage,render:e=>(0,i.jsx)("span",{...e,children:(0,or().T)(t.helpIcon)})})]}),(0,i.jsx)("div",{style:t.inputContainer,children:e.items.map((a=>(0,i.jsxs)(se().p,{style:t.radioOption,onClick:a.onClick,children:[(0,i.jsx)(Um().A,{isSelected:e.selectedItem===a.value}),(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:a.label})]},a.id)))}),e.secondaryMessage?(0,i.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:t.textBelowInput,children:e.secondaryMessage}):null]})}var Vm=function(e){return e.MetadataUrl="metadataUrl",e.MetadataXml="metadataXml",e}(Vm||{});function Hm(e){let{saveButtonText:t,samlConfig:a,loading:n,onSave:o,onDismiss:r}=e;const l=(0,b().v3)(),d=(0,v().tz)(),[c,u]=(0,s.useState)(null!=a&&a.idpMetadata?Vm.MetadataXml:Vm.MetadataUrl),[g,m]=(0,s.useState)(null==a?void 0:a.idpMetadataUrl),[p,h]=(0,s.useState)(null==a?void 0:a.idpMetadata),[f,x]=(0,s.useState)(void 0),[y,S]=(0,s.useState)(void 0),w=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},byline:{paddingInline:32},container:{width:480,display:"flex",flexDirection:"column",gap:24,overflowY:"auto"}})),[]),A=a?(0,Wg().zW)(null==a?void 0:a.id,Yt().A.domainBaseUrl):null,M=(0,s.useCallback)((async()=>{if(!A)return;const e=await sd().R.clipboardActions.load();e.copyString({environment:l,stringValue:A,copiedMessage:e.clipboardMessages.copiedLinkToClipboard})}),[l,A]),C=[{id:"metadataUrl",value:Vm.MetadataUrl,label:"URL",onClick:()=>u(Vm.MetadataUrl)},{id:"metadataXml",value:Vm.MetadataXml,label:"Metadata XML",onClick:()=>u(Vm.MetadataXml)}];async function I(){switch(c){case Vm.MetadataUrl:return void("valid"===(0,Wg().vU)(g??"").type?await o({metadataUrl:g}):x((0,Wg().vU)(g??"")));case Vm.MetadataXml:return void("valid"===(0,Wg().$W)(p??"").type?await o({metadataXml:p}):S((0,Wg().$W)(p??"")))}}return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:r,areaConstraint:{width:{type:"fixed",length:480}},render:e=>{let{sizeRange:a}=e;return(0,i.jsx)(F().tf,{sizeRange:a,header:(0,i.jsx)(K().rQ,{icon:(0,po().g)(w.icon),title:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.configure.modal.title",defaultMessage:"Set up SAML SSO"}),byline:(0,i.jsx)("div",{style:w.byline,children:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.configure.modal.byline",defaultMessage:"Allow organization members to log into Notion through your identity provider (IDP). <guidelink>Learn more</guidelink>",values:{guidelink:e=>(0,i.jsx)(Om().A,{hoverColor:"blue",href:(0,he().xS)("guides.samlSettings"),external:!0,children:e})}})})}),footer:(0,i.jsx)(K().jl,{primaryText:t??(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.configure.modal.primaryAction",defaultMessage:"Save"}),primaryAction:I,primaryDisabled:n,secondaryText:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.configure.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:r}),children:(0,i.jsxs)("div",{style:w.container,children:[A?(0,i.jsx)(pm,{disabled:!0,onCopyClick:M,value:A,placeholder:"https://notion.so/sso/saml/...",labelMessage:d.formatMessage({id:"organization.general.saml.settings.configure.modal.urlInput.label",defaultMessage:"Assertion Consumer Service (ACS) URL"}),secondaryMessage:d.formatMessage({id:"organization.general.saml.settings.configure.modal.urlInput.secondary",defaultMessage:"Add this URL to your IDP’s SAML SSO configuration"})}):null,(0,i.jsx)(Fm,{items:C,selectedItem:c,labelMessage:d.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.label",defaultMessage:"Setup method"})}),c===Vm.MetadataUrl?(0,i.jsx)(pm,{value:g,onChange:e=>m(e.target.value),onBlur:()=>x((0,Wg().vU)(g??"")),placeholder:"https://...",labelMessage:d.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.url.value.label",defaultMessage:"URL"}),secondaryMessage:d.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.url.value.secondary",defaultMessage:"Paste the URL from your IDP"}),errorMessage:f?Wm(f,d):void 0}):c===Vm.MetadataXml?(0,i.jsx)(pm,{multiline:!0,value:p,onChange:e=>h(e.target.value),onBlur:()=>S((0,Wg().$W)(p??"")),placeholder:'<md:EntityDescriptor entityID="...',labelMessage:d.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.xml.value.label",defaultMessage:"Metadata XML"}),secondaryMessage:d.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.xml.value.secondary",defaultMessage:"Paste the XML from your IDP"}),errorMessage:y?Wm(y,d):void 0}):null]})})}})}function Wm(e,t){if("valid"!==e.type)switch(e.reason){case"empty":return t.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.value.error.empty",defaultMessage:"You cannot leave this field empty"});case"signed_request":return t.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.value.error.signedRequest",defaultMessage:"Requests cannot be signed"})}}var qm=function(e){return e.UpdateConfiguration="update-configuration",e.UpdateAndEnableConfiguration="update-and-enable-configuration",e}(qm||{});function Gm(e){const{samlConfig:t,onUpdateSamlStatus:a,onUpdateSamlMetadataUrl:n,onUpdateSamlMetadataXml:o,loading:r}=e,[l,d]=(0,s.useState)(),c=!!t&&("disabled"!==t.status&&"unconfigured"!==t.status);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.enableSamlSso.title",defaultMessage:"Enable SAML SSO"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.enableSamlSso.byline",defaultMessage:"Allow members to log in with SAML SSO using a verified domain."}),item:(0,i.jsx)(Em().D,{buttonTitle:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.enableSamlSso.configure.button",defaultMessage:"Configure"}),buttonOnClick:()=>d(qm.UpdateConfiguration),buttonDisabled:!t||r,on:c,onClick:async function(){if(!t)return;const{status:e,idpMetadata:s,idpMetadataUrl:n}=t,i=n||s;switch(e){case"disabled":i?await a("configured"):d(qm.UpdateAndEnableConfiguration);break;case"unconfigured":d(qm.UpdateAndEnableConfiguration);break;case"configured":case"enforced":await a("disabled");break;case"enforced_for_domain":break;default:(0,Rt().HB)(e)}},disabled:!t||r})}),l===qm.UpdateConfiguration?(0,i.jsx)(Hm,{samlConfig:t,loading:r,onSave:async function(e){const{metadataUrl:t,metadataXml:a}=e;let s=!1;t?s=await n(t):a&&(s=await o(a)),s&&d(void 0)},onDismiss:()=>d(void 0)}):null,l===qm.UpdateAndEnableConfiguration?(0,i.jsx)(Hm,{samlConfig:t,loading:r,onSave:async function(e){const{metadataUrl:t,metadataXml:a}=e;let s=!1;t?s=await n(t,!0):a&&(s=await o(a,!0)),s&&d(void 0)},onDismiss:()=>d(void 0),saveButtonText:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.configure.modal.primaryAction.saveAndEnable",defaultMessage:"Save & enable"})}):null]})}function Km(e){const{samlConfig:t,onUpdateSamlStatus:a,loading:s}=e,n=(0,j().IS)((e=>({button:{border:`1px solid ${e.outlineButtonBorder}`,...Ic().W}})),[]),o="enforced"===(null==t?void 0:t.status)?"enforced":"enforced_for_domain"===(null==t?void 0:t.status)?"enforced_for_domain":"not_enforced",r=[{key:"enforced",label:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.loginMethod.option.enforced",defaultMessage:"Only SAML SSO"})},{key:"not_enforced",label:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.loginMethod.option.notEnforced",defaultMessage:"Any method"})}];return"enforced_for_domain"===o?(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.loginMethod.title",defaultMessage:"Login method"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.loginMethod.byline",defaultMessage:"Customize login methods for SAML-enabled workspaces. Owners retain password access."}),item:(0,i.jsx)(V().A,{size:"md",disabled:!0,disabledFeedback:!0,children:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.loginMethod.option.enforcedForDomain",defaultMessage:"Enforced for domain"})})}):(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.loginMethod.title",defaultMessage:"Login method"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.loginMethod.byline",defaultMessage:"Customize login methods for SAML-enabled workspaces. Owners retain password access."}),item:(0,i.jsx)(Cc().m,{isMobile:!1,disabled:!t||s,type:"dropdown",placementToOrigin:$a().W.Bottom,alignmentToOrigin:$a().C.End,currentOption:o,options:r,onSelectOption:async function(e){"enforced"===e?await a("enforced"):"enforced_for_domain"===e?await a("enforced_for_domain"):await a("configured")},buttonStyle:n.button})})}function Ym(){const{samlConfig:e,updateSamlConfig:t,loading:a}=function(){const e=(0,b().v3)(),t=(0,v().tz)(),{samlConfigs:a,loadSamlConfigs:n,refreshSamlConfigs:o}=(0,s.useContext)(N().D),[r,l]=(0,s.useState)(!1);(0,Bm().w)((()=>{n()}));const d=(0,s.useCallback)((async(a,s)=>{l(!0);const n=await M().callApi({eventName:"setSamlConfig",environment:e,data:{spaceId:a,...s}});return"failed"===n.type?(C().f1((0,I().Hu)(t,n)),l(!1),!1):(await o(),l(!1),ot().D6({label:(0,i.jsx)(v().sA,{id:"organization.general.saml.settings.saveChanges.toast.success",defaultMessage:"Successfully updated SAML configuration"})}),!0)}),[e,o,t]);return{samlConfig:a.at(0),refreshSamlConfigs:o,updateSamlConfig:d,loading:r}}();async function n(a){return!!e&&await t(e.id,{status:a})}return(0,i.jsx)(Ae().c,{items:[(0,i.jsx)(Gm,{samlConfig:e,onUpdateSamlStatus:n,onUpdateSamlMetadataUrl:async function(a,s){return!!e&&await t(e.id,{idpMetadataUrl:a,status:s?"configured":void 0})},onUpdateSamlMetadataXml:async function(a,s){return!!e&&await t(e.id,{idpMetadata:a,status:s?"configured":void 0})},loading:a},"enable-saml-sso"),(0,i.jsx)(Km,{samlConfig:e,onUpdateSamlStatus:n,loading:a},"login-method"),(0,i.jsx)(Lm,{samlConfig:e,updateCreateAccount:async function(a){return!!e&&await t(e.id,{createAccount:a})},loading:a},"auto-account-creation")]})}a(823215);var Qm=()=>a(978604);function $m(e){let{organizationStore:t,userStore:a,spaceId:n,onSubmit:o,onDismiss:r,onRefresh:l}=e;const d=(0,b().v3)(),c=(0,v().tz)(),u=ia({spaceId:n}),{visibleUsers:g}=(0,B().d)(n),{userData:m}=Co({userStore:a,organizationStore:t}),p=(0,S().K8)((()=>null==u?void 0:u.getName()),[u]),h=(0,S().K8)((()=>{var e;return n?null===(e=m.userSpaceAccessMap.get(n))||void 0===e?void 0:e.role:void 0}),[m,n]),f=(0,S().K8)((()=>{var e;if(!u)return;const t=g.filter((e=>(0,A().c7)(e))).length;return{id:u.id,name:u.getName()??"",icon:null===(e=u.getIcon())||void 0===e?void 0:e.icon,subscriptionTier:u.getSubscriptionTier(),memberCount:t}}),[u,g]),x=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},container:{width:520},content:{width:"100%",display:"flex",flexDirection:"column",gap:16}})),[]);async function y(){o(),await async function(){const e=await M().callApi({eventName:"bulkAddUsersToOrganizationSpaces",environment:d,data:{organizationId:t.id,existingUserIds:[a.id],newUserEmails:[],spaceIds:[n],role:"owner"}});if("failed"===e.type)return void C().f1((0,I().Hu)(c,e));const s=new(_().SL)(d,{id:n,table:"space"});try{await(0,Qm().H)({environment:d,spaceStore:s,userStore:a})}catch(i){return void C().f1(c.formatMessage(Xm.genericCreationError))}ot().D6({label:c.formatMessage(Xm.successCreationMessage)})}(),await l(),r()}const[w,T]=(0,s.useState)(!1);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:r,render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:(0,cm().F)(x.icon),title:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.title",defaultMessage:"Add new SCIM token"}),byline:(0,i.jsx)("div",{style:x.container,children:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.byline",defaultMessage:"This will generate a new SCIM token for this workspace."})})}),footer:(0,i.jsx)(K().jl,{primaryText:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.button.primary",defaultMessage:"Create SCIM token"}),primaryAction:async()=>{T(!0),await y(),T(!1)},primaryDisabled:w,secondaryText:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:r}),children:(0,i.jsxs)("div",{style:x.content,children:["editor"!==h?(0,i.jsx)(_r().l,{iconGroup:Tr().Z,display:"inline",tint:"gray",label:p?(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.workspaceOwnerWarning.label.withWorkspaceName    ",defaultMessage:"You are not already a workspace owner of {workspaceName}.",values:{workspaceName:p}}):(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.workspaceOwnerWarning.label",defaultMessage:"You are not already a workspace owner."}),description:p?(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.workspaceOwnerWarning.description.withWorkspaceName",defaultMessage:"When creating a new SCIM token, you will be added as a workspace owner of <b>{workspaceName}</b>.",values:{workspaceName:p,b:e=>(0,i.jsx)("b",{children:e})}}):(0,i.jsx)(v().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.workspaceOwnerWarning.description",defaultMessage:"When creating a new SCIM token, you will be added as a workspace owner of this workspace."})}):null,f?(0,i.jsx)(gm,{spaces:[f]}):null]})})})}const Xm=(0,v().YK)({genericCreationError:{id:"organizationScimSubTab.genericCreationError",defaultMessage:"Failed to create SCIM token"},successCreationMessage:{id:"organizationScimSubTab.successCreationMessage",defaultMessage:"SCIM token created successfully"}}),Zm={viewBox:"0 0 16 16",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M8 3.8a.825.825 0 1 0 0 1.65.825.825 0 0 0 0-1.65"}),(0,i.jsx)("path",{d:"M8 1.375a4 4 0 0 0-2.125 7.39v3.922c0 .18.078.352.213.47l1.5 1.313a.625.625 0 0 0 .824 0l1.5-1.312a.625.625 0 0 0 .063-.877l-.777-.906.777-.906a.63.63 0 0 0 .15-.406V8.764A4 4 0 0 0 8 1.374m-2.75 4a2.75 2.75 0 1 1 3.972 2.464.63.63 0 0 0-.347.56V9.83L7.9 10.968c-.2.234-.2.58 0 .814l.723.842L8 13.17l-.875-.765V8.399a.63.63 0 0 0-.347-.56A2.75 2.75 0 0 1 5.25 5.375"})]})},Jm=(0,n().wt)("keySmall",Zm),ep={viewBox:"0 0 16 16",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M12.848 2.8a3.145 3.145 0 0 0-4.448 0L6.918 4.283a.625.625 0 0 0 .884.883l1.482-1.482c.74-.74 1.94-.74 2.68 0l.294.294c.74.74.74 1.94 0 2.68l-1.482 1.483a.625.625 0 1 0 .884.884l1.482-1.482a3.145 3.145 0 0 0 0-4.449z"}),(0,i.jsx)("path",{d:"M10.472 5.47a.625.625 0 0 0-.884 0L5.229 9.83a.625.625 0 1 0 .884.883l4.359-4.359a.625.625 0 0 0 0-.883"}),(0,i.jsx)("path",{d:"M5.167 6.918a.625.625 0 0 0-.884 0L2.8 8.4a3.146 3.146 0 0 0 0 4.448l.294.294a3.145 3.145 0 0 0 4.449 0l1.482-1.482a.625.625 0 0 0-.884-.884L6.66 12.258c-.74.74-1.94.74-2.68 0l-.295-.294c-.74-.74-.74-1.94 0-2.68L5.167 7.8a.625.625 0 0 0 0-.883"})]})},tp=(0,n().wt)("linkSmall",ep),ap={viewBox:"0 0 16 16",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M5.066 4.914a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076m2.162 0a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076M5.066 6.458a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077m2.162 0a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077M5.066 8.002a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077m2.162 0a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077m4.169.618a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076m0 1.544a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076"}),(0,i.jsx)("path",{d:"M4.063 2.977a1.934 1.934 0 0 0-1.935 1.935V12.4c0 .343.279.622.622.622h10.5a.62.62 0 0 0 .622-.622V8.772a1.934 1.934 0 0 0-1.934-1.934h-1.772V4.912a1.934 1.934 0 0 0-1.934-1.935zm-.691 1.935c0-.382.31-.691.69-.691h4.17c.381 0 .69.31.69.69v6.868H7.895v-1.54a.513.513 0 0 0-.512-.513H4.912a.513.513 0 0 0-.513.513v1.54H3.372zm6.794 6.867V8.08h1.772c.381 0 .69.31.69.691v3.007zm-4.742 0V10.75H6.87v1.028z"})]})},sp=(0,n().wt)("teamspaceSmall",ap);var np=()=>a(129852);function ip(e){let{organizationStore:t,botId:a,spaceId:n,onDismiss:o,onRefresh:r}=e;const l=(0,b().v3)(),d=(0,v().tz)(),c=(0,j().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:440},content:{width:"100%",display:"flex",flexDirection:"column",gap:16}})),[]);async function u(){await async function(){const e=await M().callApi({eventName:"deleteBotInOrganizationSpace",environment:l,data:{botId:a,spaceId:n}});"failed"!==e.type?ot().D6({label:d.formatMessage(op.successDeletionMessage)}):C().f1((0,I().Hu)(d,e))}(),await r(),o()}const[g,m]=(0,s.useState)(!1);return(0,i.jsx)(W().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(F().tf,{header:(0,i.jsx)(K().rQ,{icon:(0,np().q)(c.icon),title:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.deleteBotModal.action.innerModal.title",defaultMessage:"Are you sure you want to delete this bot?"}),byline:(0,i.jsx)("div",{style:c.container,children:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.deleteBotModal.action.innerModal.byline",defaultMessage:"SCIM configurations using this token will stop working.{br}A new token will be required.",values:{br:(0,i.jsx)("br",{})}})})}),footer:(0,i.jsx)(K().jl,{isDarkRed:!0,primaryText:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.deleteBotModal.action.innerModal.button.primary",defaultMessage:"Revoke token"}),primaryAction:async()=>{m(!0),await u(),m(!1)},primaryDisabled:g,secondaryText:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.deleteBotModal.action.innerModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:o})})})}const op=(0,v().YK)({genericCreationError:{id:"organizationScimSubTab.genericCreationError",defaultMessage:"Failed to create SCIM token"},successDeletionMessage:{id:"organizationScimSubTab.successDeletionMessage",defaultMessage:"SCIM token deleted successfully"}}),rp=[{id:"user",headerTitle:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.userColumn.title",defaultMessage:"User"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(ga,{}):e.legacy?(0,i.jsx)(ua,{userId:wl().rN,rightContent:(0,i.jsx)(cp,{scimBotId:e.id,spaceId:e.spaceId,setSelectedScimBotId:e.setSelectedScimBotId,setOpenedModal:e.setOpenedModal}),overrides:{name:"Deactivated user"}}):(0,i.jsx)(ua,{showEmailByline:!0,isNotMultiSelectable:!0,userId:e.ownerUserId,badge:e.ownedByCurrentUser?(0,i.jsx)(Vt().A,{style:{margin:0},content:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.userColumn.you",defaultMessage:"You"})}):void 0,rightContent:(0,i.jsx)(cp,{scimBotId:e.id,spaceId:e.spaceId,setSelectedScimBotId:e.setSelectedScimBotId,setOpenedModal:e.setOpenedModal})}),widthData:{width:275,maxWidth:275},sortable:!1},{id:"role",headerTitle:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.roleColumn.title",defaultMessage:"Highest role"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{}):e.legacy?(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.roleColumn.role.none",defaultMessage:"None"})}):e.isOrganizationOwner?(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.roleColumn.role.organizationOwner",defaultMessage:"Organization owner"})}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.roleColumn.role.workspaceOwner",defaultMessage:"Workspace owner"})}),widthData:{widthPercent:25,minWidth:100},sortable:!1},{id:"createdAt",headerTitle:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.createdAtColumn.title",defaultMessage:"Created at"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Gi().h,{}):(0,i.jsx)(Gi().d,{useSecondaryColorTitle:!0,dateTs:e.createdAt}),widthData:{widthPercent:25,minWidth:100},sortable:!1},{id:"token",headerTitle:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.tokenColumn.title",defaultMessage:"Token"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{}):(0,i.jsx)(Lt().s7,{useThinTitle:!0,title:"••••••••••••••••••••••"}),widthData:{widthPercent:25,minWidth:100},sortable:!1}];var lp=function(e){return e.AddToken="add-token",e.RevokeToken="revoke-token",e.RegenerateToken="regenerate-token",e}(lp||{});function dp(e){const{organizationStore:t,spaceId:a,scimBots:n,loading:o,error:r,onRefresh:l}=e,[d,c]=(0,s.useState)(),[u,g]=(0,s.useState)(),m=(0,S().K8)((()=>{var e;return null===(e=ve().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),p=(0,qt().A)(),h=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:rp,theme:e,containerMarginTop:0})),[]),f=(0,S().K8)((()=>n.map((e=>e.isLegacy?{type:Xt().T.OrganizationSpaceScimBot,id:e.botId,createdAt:e.createdAt,spaceId:a,setSelectedScimBotId:c,setOpenedModal:g,legacy:!0,isClickable:!1}:{type:Xt().T.OrganizationSpaceScimBot,id:e.botId,createdAt:e.createdAt,spaceId:a,setSelectedScimBotId:c,setOpenedModal:g,ownerUserId:e.createdById,ownedByCurrentUser:e.createdById===m,isOrganizationOwner:t.getOwnerIds().includes(e.createdById),legacy:!1,isClickable:!1}))),[n,a,m,t]),x=rp.map((e=>({...e,headerStyle:p.tableHeader,rowStyle:p.tableRow}))),y=o?(0,Xt().n)(3):f;return!o&&r?(0,i.jsx)(Qt,{error:r,runNewSearch:l}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Bt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:x,rows:y,styles:h,renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:Jm,title:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.empty",defaultMessage:"No SCIM tokens found"}),byline:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.table.empty.byline",defaultMessage:"There are no SCIM tokens that match this query."})}),extendToFullScreen:$t().e}),u===lp.RevokeToken&&d?(0,i.jsx)(ip,{organizationStore:t,botId:d,spaceId:a,onDismiss:()=>g(void 0),onRefresh:()=>Promise.resolve()}):null]})}function cp(e){const{scimBotId:t,spaceId:s,setSelectedScimBotId:n,setOpenedModal:o}=e,r=(0,b().v3)(),l=(0,v().tz)(),d=(0,j().IS)((()=>({icon:{height:20,width:20,fill:"currentColor"}})),[]);async function c(e){const t=await sd().R.clipboardActions.load();await t.copyString({stringValue:e,environment:r,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard}),ot().D6({label:l.formatMessage(ws().DZ.toastSuccessfulCopy)})}const u=[{key:"copy-token",type:"action",icon:Jm(d.icon),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.copyToken",defaultMessage:"Copy SCIM token"}),action:()=>{!async function(){const e=await M().callApi({eventName:"getScimValueTokenForOrganizationSpace",environment:r,data:{spaceId:s,scimBotId:t},headers:(0,ea().WS)({cellId:void 0,spaceId:s})});if("failed"===e.type)return void C().f1((0,I().Hu)(l,e));c(e.data.token)}()}},{key:"copy-scim-base-url",type:"action",icon:tp(d.icon),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.copyScimBaseUrl",defaultMessage:"Copy SCIM base URL"}),action:()=>{c(Yt().A.domainBaseUrl+De().JZ.scimApiBasePath)}},{key:"copy-scim-space-id",type:"action",icon:sp(d.icon),title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.copyScimSpaceId",defaultMessage:"Copy workspace ID"}),action:()=>{c(s)}},{key:"divider",type:"divider"},{key:"revoke-token",type:"action",icon:(0,a(259476).h)(d.icon),isDestructive:!0,title:(0,i.jsx)(v().sA,{id:"organization.workspaces.addModal.table.name.menuActions.revokeToken",defaultMessage:"Revoke token"}),action:()=>{o(lp.RevokeToken),n(t)}}];return(0,i.jsx)(Lt().bd,{items:u})}const up=["organization_owner","owner"],gp=vn.filter((e=>up.includes(e.value)));function mp(e){let{organizationStore:t,subtab:a,queryParams:n}=e;const o=(0,b().v3)(),r=(0,k().X)("organization_console_ga_enabled"),l=(0,s.useMemo)((()=>n[Zh]),[n]);if(Fd({organizationId:t.id,spaceId:l,tabRoute:Jt().Vo,subtab:a,queryParams:n}),!r)return(0,i.jsx)(v().sA,{...fp.gaNotEnabledError});const d=(0,i.jsx)(v().sA,{...fp.title});return(0,i.jsx)(Gl().D,{breadcrumbs:[{message:(0,i.jsx)(v().sA,{...fp.goBack}),onClick:()=>{(0,Yl().i)({environment:o,from:{tabRoute:Jt().Vo,properties:{subtab:Jt().al.Scim}},organizationId:t.id,tabRoute:Jt().Vo})}},{message:d}],children:(0,i.jsxs)(bl().t,{children:[(0,i.jsx)(Va()._,{title:d,byline:(0,i.jsx)(v().sA,{...fp.description})}),(0,i.jsx)(hp,{organizationStore:t,spaceId:l})]})})}var pp=function(e){return e.AddToken="add-token",e}(pp||{});function hp(e){const{organizationStore:t,spaceId:a}=e,n=(0,Hn().F)(),[o,r]=(0,s.useState)({}),[l,d]=(0,s.useState)(void 0),[c,u]=(0,s.useState)(!1),{scimBots:g,refresh:m,loading:p,error:h}=function(e){const t=(0,b().v3)(),[{status:a,value:s,error:n},i]=(0,Je().Yb)((async()=>{if(!e)return[];const a=await M().callApi({eventName:"getScimTokensForOrganizationSpace",environment:t,data:{spaceId:e},headers:(0,ea().WS)({cellId:void 0,spaceId:e})});if("success"===a.type)return a.data.scimBots;if("failed"===a.type)throw a.error;(0,Rt().HB)(a)}),[e,t]);return{loading:"pending"===a,error:n,scimBots:s??[],refresh:i}}(a),f=(0,S().K8)((()=>ve().default.state.currentUserStore),[]),x=!!p||g.some((e=>e.createdById===(null==f?void 0:f.id))),y=ia({spaceId:a}),j=!f||p||c||x,w=(0,S().K8)((()=>g.filter((e=>{if(!o.roles||0===o.roles.length)return!0;const a=t.getOwnerIds().includes(e.createdById)?"organization_owner":"owner";return o.roles.includes(a)}))),[g,o.roles,t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:n.tableHeader,children:[(0,i.jsxs)("div",{style:n.leftContent,children:[(0,i.jsx)(Md,{showAsPill:!0,organizationId:t.id,currentTabRoute:Jt().Vo,currentTabProperties:{subtab:Jt().al.Scim},selectedSpaceStore:y}),(0,i.jsx)(fn,{setUserRoles:e=>{(function(e){return e.every((e=>up.includes(e)))})(e)&&r({...o,roles:e})},selectedUserRoles:o.roles||[],roles:gp})]}),(0,i.jsx)("div",{style:n.rightContent,children:(0,i.jsx)(H().A,{disabled:j,onClick:()=>d(pp.AddToken),children:(0,i.jsx)(v().sA,{id:"organizationScimSubTab.button.addToken",defaultMessage:"Add token"})})})]}),(0,i.jsx)(dp,{organizationStore:t,spaceId:a,loading:p,scimBots:w,error:h,onRefresh:async()=>{await m()}}),l===pp.AddToken&&f?(0,i.jsx)($m,{organizationStore:t,userStore:f,spaceId:a,onSubmit:()=>u(!0),onDismiss:()=>{d(void 0),u(!1)},onRefresh:async()=>{await m()}}):null]})}const fp=(0,v().YK)({title:{id:"organizationScimSubTab.title",defaultMessage:"SCIM provisioning"},description:{id:"organizationScimSubTab.description",defaultMessage:"Seamlessly manage users and groups through your identity provider. Access SCIM tokens for each workspace below."},gaNotEnabledError:{id:"organizationScimSubTab.notEnabled",defaultMessage:"This feature is not available"},goBack:{id:"organizationScimSubTab.breadcrumb.goBack",defaultMessage:"General"}});var xp=()=>a(675801);function vp(){const e=(0,b().v3)(),{refreshOrganization:t}=(0,s.useContext)(N().D),a=(0,ks().l)(),[n,o]=(0,s.useState)(!1),r=(0,S().K8)((()=>a.every((e=>e.getSettings().are_scim_invite_emails_suppressed))),[a]);return(0,i.jsx)(Ae().c,{items:[(0,i.jsx)(xp().S,{isEnabled:r,onToggle:async function(){o(!0);const s=!r;await um({spaceIds:a.map((e=>e.id)),fn:async t=>M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:e,data:{spaceId:t,spaceSettings:{are_scim_invite_emails_suppressed:s}}}),successMessage:(0,i.jsx)(v().sA,{id:"organization.general.scim.settings.suppressScimInviteEmails.success",defaultMessage:"Successfully updated SCIM invite emails setting for {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await t(!0),o(!1)},disabled:n},"suppress-scim-invite-emails")]})}function yp(e){var t;let{organizationId:n,tabRoute:o,subtab:r,queryParams:l}=e;const d=(0,v().tz)(),c=(0,le().Z)(),u=(0,j().IS)((e=>({orgInfoContainer:{display:"flex",gap:16,flexDirection:"column",marginBottom:36},profileContainer:{display:"flex"},container:{display:"flex",gap:12,flexWrap:"wrap"},orgMetadataContainer:{gap:10,display:"flex",flexDirection:"column"},orgName:{fontSize:26,fontWeight:L().Wy.bold},bottom:{display:"flex"},userAvatarContainer:{display:"flex",flexDirection:"row-reverse"},hiddenAvatarCount:{display:"flex",alignItems:"center",marginLeft:12},defaultIcon:{width:80,fill:e.accentColors.gray[500],borderRadius:O().V.large,padding:24,height:80,marginTop:-88,boxShadow:"0 0 0px 2px rgba(0, 0, 0, 0.04)"},divider:{color:e.stroke.secondary},workspacesIcons:{display:"flex",height:24}})),[]),g=(0,b().v3)(),{state:m,loading:p}=(0,Oc().j)(),h=(0,S().K8)((()=>m.value?m.value.sampleMemberIds.map((e=>new(ft().L)(g,{table:w().oo,id:e}))):[]),[g,m.value]),{scimBotCount:f,loading:y}=function(){const{spaceIds:e}=(0,s.useContext)(N().D),t=(0,b().v3)(),[{status:a,value:n}]=(0,Je().Yb)((async()=>(await um({spaceIds:e,fn:async e=>M().callApi({eventName:"getScimTokensForOrganizationSpace",environment:t,data:{spaceId:e}})})).map((e=>"success"===(null==e?void 0:e.type)?e.data.scimBots.length:0)).reduce(((e,t)=>e+t),0)),[t,e]);return{loading:"pending"===a,didError:"rejected"===a,scimBotCount:n}}(),A=(null===(t=m.value)||void 0===t?void 0:t.memberCount)||0,_=(0,ks().l)(),{domainVerifications:R}=(0,a(522985).J)({organizationId:n}),B=(0,S().K8)((()=>R?R.map((e=>(0,a(375243).W0)({id:e.id,domain:e.domain,verificationCode:e.verification_code,createdAt:e.created_at,expiresAt:e.expires_at,verifiedAt:e.verified_at,invalidatedAt:e.info.invalidated_at}))).filter((e=>{let{status:t}=e;return t===a(366208).A$.Pending})).length:0),[R]),{updateCacheWithRecordMap:E}=(0,s.useContext)(P().N),U=(0,_a().E)({organizationId:n}),F=(0,S().K8)((()=>null==U?void 0:U.getRawIcon()),[U]),V=(0,S().K8)((()=>(null==U?void 0:U.getName())||""),[U]),H=(0,S().K8)((()=>null==U?void 0:U.getEmailDomains().length),[U]),W=(0,k().X)("organization_console_ga_enabled"),[G,K]=(0,s.useState)();(0,s.useEffect)((()=>{K(V)}),[V]);const Y=(0,s.useMemo)((()=>r?function(e){switch(e){case Jt().al.Workspaces:return Jt().al.Workspaces;case Jt().al.EmailDomains:return Jt().al.EmailDomains;case Jt().al.Scim:return Jt().al.Scim;default:return Jt().al.Workspaces}}(r):void 0),[r]);const Q=()=>{(0,Yl().i)({environment:g,from:{tabRoute:Jt().kr},organizationId:n,tabRoute:Jt().Vo,properties:{subtab:Jt().al.Workspaces}})};return U?Y===Jt().al.Workspaces?(0,i.jsx)(Rm,{organizationStore:U}):Y===Jt().al.EmailDomains?(0,i.jsx)(a(338499).CX,{organizationStore:U}):Y===Jt().al.Scim?(0,i.jsx)(mp,{organizationStore:U,subtab:r,tabRoute:o,queryParams:l}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z,{}),(0,i.jsxs)(Kl,{children:[(0,i.jsx)(X,{title:(0,i.jsx)(v().sA,{id:"organization.general.organization.title",defaultMessage:"Edit organization details"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.organization.byline",defaultMessage:"Edit this organization's name below. Changes will take effect immediately upon saving."}),bylineWidthOverride:"85%",icon:x().V,onSave:async function(){if(!U||G===V)return;const e=await M().callApi({eventName:"updateOrganization",environment:g,data:{organizationId:U.id,name:G}});"success"===e.type?E(e):C().f1((0,I().Hu)(T().A.getIntl(),e))},onCancel:()=>{K(V)},onIconChange:async function(e){if(!U||!e)return;const t=await M().callApi({eventName:"updateOrganization",environment:g,data:{organizationId:U.id,icon:e}});"success"===t.type?E(t):C().f1((0,I().Hu)(T().A.getIntl(),t))},onNameChange:e=>K(e),entityName:V,localIconWithPointer:void 0===F?void 0:{pointer:U.pointer,icon:F},entityDescription:(0,i.jsxs)(D().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:[(0,i.jsx)(v().sA,{id:"organization.general.orgMetadata",defaultMessage:"Enterprise plan"}),(0,i.jsx)(z().A,{style:{margin:"0 5px"}}),(0,i.jsx)(ue().Qq,{memberCount:A})]})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:u.container,children:[(0,i.jsx)(ce,{memberCount:A,sampleMemberUserStores:h,onClick:()=>{(0,Yl().i)({environment:g,from:{tabRoute:Jt().kr},organizationId:n,tabRoute:Jt().kr,properties:{subtab:"members"}})},isLoading:p||0===A}),(0,i.jsx)(te().A,{headerText:(0,i.jsx)(v().sA,{id:"organization.general.workspaces.title",defaultMessage:"Workspaces"}),mainText:(0,i.jsx)(ue().Cx,{workspacesCount:_.length}),bottom:(0,i.jsx)("div",{style:u.workspacesIcons,children:(0,i.jsx)(J().$,{spaceStores:_,isLoading:!1})}),onClick:Q})]}),(0,i.jsx)(lr().A,{size:1,style:{marginTop:52},dividerColor:u.divider.color}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.general.configure.title",defaultMessage:"Manage organization"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(oe,{title:(0,i.jsx)(v().sA,{id:"organization.general.manageWorkspaces.title",defaultMessage:"Manage workspaces"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.manageWorkspaces.subtitle",defaultMessage:"Add or remove workspaces from your organization."}),rightContent:0!==_.length&&(0,i.jsx)(ue().Cx,{workspacesCount:_.length}),onClick:Q}),W&&(0,i.jsx)(oe,{title:(0,i.jsx)(v().sA,{id:"organization.general.manageEmailDomains.title",defaultMessage:"Manage email domains"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.manageEmailDomains.subtitle",defaultMessage:"Verify email domains to manage matching user accounts and workspaces."}),rightContent:H?(0,i.jsx)(ue().LL,{verifiedDomainsCount:H,pendingDomainsCount:B}):(0,i.jsx)(re().A,{style:c.shortShimmer}),onClick:()=>{(0,Yl().i)({environment:g,from:{tabRoute:Jt().kr},organizationId:n,tabRoute:Jt().Vo,properties:{subtab:Jt().al.EmailDomains}})}}),!W&&(0,i.jsx)(q().A,{renderTooltip:()=>(0,i.jsx)(v().sA,{id:"organization.general.tooltip",defaultMessage:"Coming soon"}),placement:$a().W.Right,render:e=>(0,i.jsx)(oe,{disabled:!0,title:(0,i.jsx)(v().sA,{id:"organization.general.manageEmailDomains.title",defaultMessage:"Manage email domains"}),byline:(0,i.jsx)(v().sA,{id:"organization.general.manageEmailDomains.subtitle",defaultMessage:"Verify email domains to manage matching user accounts and workspaces."}),onClick:()=>{},...e})})]})}),W?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.general.saml.title",defaultMessage:"SAML Single sign-on (SSO)"}),content:(0,i.jsx)(Ym,{})}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.general.scim.title",defaultMessage:"SCIM provisioning"}),content:(0,i.jsxs)(ne().VP,{gap:16,width:"100%",children:[(0,i.jsx)(vp,{}),(0,i.jsx)(lr().A,{size:1,dividerColor:u.divider.color}),(0,i.jsx)(oe,{title:(0,i.jsx)(v().sA,{id:"organization.general.scimProvisioning.title",defaultMessage:"SCIM provisioning"}),badge:(0,i.jsx)(cs().A,{icon:or().T,ariaLabel:d.formatMessage({id:"organization.general.scimProvisioning.iconButton.ariaLabel",defaultMessage:"Learn more about SCIM provisioning"}),onClick:()=>qg().f({environment:g,url:(0,he().xS)("guides.scim")})}),byline:(0,i.jsx)(v().sA,{id:"organization.general.scimProvisioning.subtitle",defaultMessage:"Generate a token to configure SCIM."}),rightContent:y?(0,i.jsx)(re().A,{style:c.shortShimmer}):void 0!==f?(0,i.jsx)(ue().Ox,{scimTokensCount:f}):null,onClick:()=>{(0,Yl().i)({environment:g,from:{tabRoute:Jt().kr},organizationId:n,tabRoute:Jt().Vo,properties:{subtab:Jt().al.Scim}})}}),(0,i.jsx)(_r().l,{display:"inline",iconGroup:a(83489).H,label:(0,i.jsx)(v().sA,{id:"organization.general.scimProvisioning.setupInformation.title",defaultMessage:"Setup information"}),tint:"gray",description:(0,i.jsxs)(ne().VP,{gap:12,paddingTop:16,children:[(0,i.jsxs)(ne().fI,{justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organization.general.scimProvisioning.setupInformation.samlId",defaultMessage:"SAML SSO Entity ID"})}),(0,i.jsx)(bp,{text:(0,Wg().Hw)(Yt().A.domainBaseUrl)})]}),(0,i.jsx)(lr().A,{size:1,dividerColor:u.divider.color}),(0,i.jsxs)(ne().fI,{justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organization.general.scimProvisioning.setupInformation.scimUrl",defaultMessage:"SCIM Base URL"})}),(0,i.jsx)(bp,{text:Yt().A.domainBaseUrl+De().JZ.scimApiBasePath})]})]})})]})}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.general.deleteOrganization.title",defaultMessage:"Organization settings"}),content:(0,i.jsx)(Yg,{organizationStore:U})})]}):null]})]})]}):null}function bp(e){const{text:t}=e,a=(0,b().v3)(),s=(0,v().tz)();return(0,i.jsxs)(ne().fI,{justifyContent:"space-between",alignItems:"center",gap:8,children:[(0,i.jsx)(D().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t}),(0,i.jsx)(ws().lz,{isHovered:!0,onCopyClick:async function(e){e.stopPropagation();const n=await sd().R.clipboardActions.load();await n.copyString({stringValue:t,environment:a,copiedMessage:n.clipboardMessages.copiedPropertyToClipboard}),ot().D6({label:s.formatMessage(ws().DZ.toastSuccessfulCopy)})}})]})}var Sp=()=>a(326399),jp=()=>a(368332);function wp(e){let{organizationStore:t}=e;const a=(0,b().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(P().N),o=(0,j().IS)((e=>({button:{border:`1px solid ${e.outlineButtonBorder}`,...Ic().W}})),[]),r=(0,s.useMemo)((()=>Object.entries(Sp().iI).map((e=>{let[t,a]=e;return{key:t,label:(0,i.jsx)(Ys().A,{children:(0,dc().OH)(0,a)})}}))),[]),l=(0,S().K8)((()=>{var e;return(0,jp().k)(null===(e=t.getManagedUserSettings())||void 0===e?void 0:e.custom_session_duration)??Sp().DP}),[t]);return(0,i.jsx)(Cc().m,{isMobile:!1,disabled:!1,type:"dropdown",currentOption:l,options:r,onSelectOption:async function(e){var s;const o=(null===(s=t.getManagedUserSettings())||void 0===s?void 0:s.custom_session_duration)??Sp().iI[Sp().DP],r=Sp().iI[e];if(void 0===r)return;pc().m4(a,{custom_session_duration_ms:o});const{accept:l}=await C().Gh({message:(0,i.jsx)(Ys().A,{style:C().xh.title,children:(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.message",defaultMessage:"Confirm change"})}),description:(0,i.jsxs)(Ys().A,{isMultiline:!0,isSecondaryColor:!0,children:[(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.description",defaultMessage:"You are about to change the session duration for all of your managed users from <b>{oldDuration}</b> to <b>{newDuration}.</b>",values:{oldDuration:(0,dc().OH)(0,o),newDuration:(0,dc().OH)(0,r),b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.jsx)("b",{children:t})}}}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.secondDescription",defaultMessage:"This may log some users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})]}),acceptLabel:(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.acceptLabel",defaultMessage:"Confirm change"}),cancelLabel:(0,i.jsx)(v().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!l)return;pc().JN(a,{new_session_duration_ms:r});const d=await M().callApi({eventName:"updateOrganization",environment:a,data:{organizationId:t.id,managedUserSettings:{customSessionDuration:(0,jp().k)(r)}}});"success"===d.type?n(d):C().f1((0,I().Hu)(T().A.getIntl(),d))},buttonStyle:o.button,placementToOrigin:$a().W.Bottom,alignmentToOrigin:$a().C.End})}function Ap(e){let{organizationStore:t}=e;const a=(0,j().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]);return(0,i.jsxs)("div",{style:a.container,children:[(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.accountAccess.settings.actions.sessionDuration.title",defaultMessage:"Session duration"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.accountAccess.settings.actions.sessionDuration.byline",defaultMessage:"Set re-authentication interval for managed accounts."}),item:(0,i.jsx)(wp,{organizationStore:t})}),(0,i.jsx)(lr().A,{dividerColor:a.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.accountAccess.settings.actions.passwordManagement.title",defaultMessage:"Reset passwords for all users"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.accountAccess.settings.actions.passwordManagement.byline",defaultMessage:"Log out and force all managed users to reset their passwords on next login."}),item:(0,i.jsx)(Ac,{organizationStore:t,isRed:!0})}),(0,i.jsx)(lr().A,{dividerColor:a.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.accountAccess.settings.actions.sessionManagement.title",defaultMessage:"Log out all users"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.accountAccess.settings.actions.sessionManagement.byline",defaultMessage:"Log out all managed users and require re-authentication."}),item:(0,i.jsx)(jc,{organizationStore:t,isRed:!0})})]})}function Mp(e){const t=(0,b().v3)(),{updateCacheWithRecordMap:a}=(0,s.useContext)(P().N),n=(0,S().K8)((()=>e.getManagedUserSettings()),[e]),[i,o]=(0,s.useState)({prevent_profile_edits:!1,workspace_creation_enum:!1,prevent_members_joining_external_workspace:!1,prevent_granting_support_access:!1,disable_notion_mail:!1});return{prevent_profile_edits:{value:null==n?void 0:n.prevent_profile_edits,loading:i.prevent_profile_edits,toggle:async function(){o((e=>({...e,prevent_profile_edits:!0})));const s=await M().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{preventProfileEdits:!(null!=n&&n.prevent_profile_edits)}}});"success"===s.type?a(s):C().f1((0,I().Hu)(T().A.getIntl(),s)),o((e=>({...e,prevent_profile_edits:!1})))}},workspace_creation_enum:{value:null==n?void 0:n.workspace_creation_enum,loading:i.workspace_creation_enum,toggle:async function(){o((e=>({...e,workspace_creation_enum:!0})));const s="admins_only"===(null==n?void 0:n.workspace_creation_enum)?"unrestricted":"admins_only",i=await M().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{workspaceCreationEnum:s}}});"success"===i.type?a(i):C().f1((0,I().Hu)(T().A.getIntl(),i)),o((e=>({...e,workspace_creation_enum:!1})))}},prevent_members_joining_external_workspace:{value:null==n?void 0:n.prevent_members_joining_external_workspace,loading:i.prevent_members_joining_external_workspace,toggle:async function(){o((e=>({...e,prevent_members_joining_external_workspace:!0})));const s=await M().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{preventMembersJoiningExternalWorkspace:!(null!=n&&n.prevent_members_joining_external_workspace)}}});"success"===s.type?a(s):C().f1((0,I().Hu)(T().A.getIntl(),s)),o((e=>({...e,prevent_members_joining_external_workspace:!1})))}},prevent_granting_support_access:{value:null==n?void 0:n.prevent_granting_support_access,loading:i.prevent_granting_support_access,toggle:async function(){o((e=>({...e,prevent_granting_support_access:!0})));const s=await M().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{preventGrantingSupportAccess:!(null!=n&&n.prevent_granting_support_access)}}});"success"===s.type?a(s):C().f1((0,I().Hu)(T().A.getIntl(),s)),o((e=>({...e,prevent_granting_support_access:!1})))}},disable_notion_mail:{value:null==n?void 0:n.disable_notion_mail,loading:i.disable_notion_mail,toggle:async function(){o((e=>({...e,disable_notion_mail:!0})));const s=await M().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{disableNotionMail:!(null!=n&&n.disable_notion_mail)}}});"success"===s.type?a(s):C().f1((0,I().Hu)(T().A.getIntl(),s)),o((e=>({...e,disable_notion_mail:!1})))}}}}function Cp(e){let{organizationStore:t}=e;const a=Mp(t),s=(0,j().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]),n=(0,k().X)("enable_notion_mail_settings_toggle");return(0,i.jsxs)("div",{style:s.container,children:[(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.changeProfileInformation.title",defaultMessage:"Allow users to change profile information"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.changeProfileInformation.byline",defaultMessage:"Allow managed users to update their name, email, and profile photo."}),item:(0,i.jsx)(we().A,{on:!Boolean(a.prevent_profile_edits.value),onClick:a.prevent_profile_edits.toggle,disabled:a.prevent_profile_edits.loading})}),(0,i.jsx)(lr().A,{dividerColor:s.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.createNewWorkspaces.title",defaultMessage:"Allow users to create new workspaces"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.createNewWorkspaces.byline",defaultMessage:"When on, any user can create workspaces. When off, only organization owners can."}),item:(0,i.jsx)(we().A,{on:"unrestricted"===a.workspace_creation_enum.value,onClick:a.workspace_creation_enum.toggle,disabled:a.workspace_creation_enum.loading})}),(0,i.jsx)(lr().A,{dividerColor:s.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.joinExternalWorkspaces.title",defaultMessage:"Allow users to join external workspaces"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.joinExternalWorkspaces.byline",defaultMessage:"When on, all members can join external workspaces. When off, only organization owners can."}),item:(0,i.jsx)(we().A,{on:!Boolean(a.prevent_members_joining_external_workspace.value),onClick:a.prevent_members_joining_external_workspace.toggle,disabled:a.prevent_members_joining_external_workspace.loading})}),(0,i.jsx)(lr().A,{dividerColor:s.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.grantSupportAccess.title",defaultMessage:"Allow users to grant support access to accounts"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.grantSupportAccess.byline",defaultMessage:"Allow Notion support to troubleshoot or recover content; access can be revoked anytime."}),item:(0,i.jsx)(we().A,{on:!Boolean(a.prevent_granting_support_access.value),onClick:a.prevent_granting_support_access.toggle,disabled:a.prevent_granting_support_access.loading})}),n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(lr().A,{dividerColor:s.divider.color,size:1}),(0,i.jsx)(Ae().y,{title:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.enableNotionMail.title",defaultMessage:"Enable Notion Mail"}),byline:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.enableNotionMail.byline",defaultMessage:"Enable Notion Mail for all members under your company domains."}),(0,i.jsx)("br",{}),(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.settings.toggles.enableNotionMail.terms",defaultMessage:"By using Notion Mail, you agree to the Notion Mail and Notion AI Supplementary Terms."})]}),item:(0,i.jsx)(we().A,{on:!Boolean(a.disable_notion_mail.value),onClick:a.disable_notion_mail.toggle,disabled:a.disable_notion_mail.loading})})]})]})}var Ip=()=>a(240865);const Tp=et().q,kp={managedUsers:[],filters:{query:"",multiFactorStatus:void 0,workspaceId:void 0},numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,paginationTokenHistory:[],loading:!1,error:void 0};var _p=()=>a(875166);function Dp(e){let{selectedAccountStatus:t,setSelectedAccountStatus:a}=e;return(0,i.jsx)(Qs().G0,{pillTitle:(0,i.jsx)(v().sA,{id:"managedAccounts.table.filters.accountStatus.title",defaultMessage:"Status"}),pillIcon:_p().E,selectedItem:t,setSelectedItem:a,items:zp,shouldUseCheck:!0})}const zp=[{key:"notSuspended",value:"notSuspended",title:(0,i.jsx)(v().sA,{id:"managedAccounts.table.filters.accountStatus.active",defaultMessage:"Active"}),shortTitle:(0,i.jsx)(v().sA,{id:"managedAccounts.table.filters.accountStatus.active",defaultMessage:"Active"}),wrapCaption:!0},{key:"suspended",value:"suspended",title:(0,i.jsx)(v().sA,{id:"managedAccounts.table.filters.accountStatus.suspended",defaultMessage:"Suspended"}),shortTitle:(0,i.jsx)(v().sA,{id:"managedAccounts.table.filters.accountStatus.suspended",defaultMessage:"Suspended"}),wrapCaption:!0}];const Pp=(0,n().wt)("personSlash",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M16.2 16.675 3.52 3.987a.52.52 0 0 1-.158-.383.53.53 0 0 1 .547-.54q.225 0 .39.15l12.674 12.681a.52.52 0 0 1 .157.383q0 .225-.157.39a.53.53 0 0 1-.39.157.53.53 0 0 1-.383-.15M10 4.862q-.533 0-.97.328a1.9 1.9 0 0 0-.636.855l-.903-.902a3 3 0 0 1 1.06-1.06A2.74 2.74 0 0 1 10 3.68q.827 0 1.504.424.684.424 1.08 1.141a3.2 3.2 0 0 1 .403 1.6 3.34 3.34 0 0 1-.328 1.47 3.2 3.2 0 0 1-.868 1.12l-.854-.854a1.96 1.96 0 0 0 .587-.718q.226-.458.226-1.018a2.1 2.1 0 0 0-.24-1.012 1.87 1.87 0 0 0-.635-.71 1.56 1.56 0 0 0-.875-.26Zm3.514 10.405 1.169 1.162-.206.013a3 3 0 0 1-.218.007H5.734q-1.75 0-1.75-1.176 0-.642.363-1.346a5 5 0 0 1 1.039-1.347 6 6 0 0 1 1.64-1.073 6.8 6.8 0 0 1 2.167-.567l1.142 1.148a2 2 0 0 0-.17-.007 2 2 0 0 0-.165-.007q-1.135 0-2.017.322-.874.314-1.476.8-.595.478-.91.99-.314.507-.314.903 0 .096.048.137.055.04.178.04z"})}),Np=(0,n().wt)("rectanglePencilEllipsis",{viewBox:"0 0 22 20",svg:(0,i.jsx)("path",{d:"M2.523 15.942q-.963 0-1.49-.512-.52-.513-.52-1.477V8.04q0-.971.52-1.477.527-.512 1.49-.512h12.845L14.11 7.3H2.715q-.84 0-.841.842v5.708q0 .396.219.615t.622.219h13.802q.403 0 .622-.22.219-.218.218-.614V9.257l1.36-1.36v6.056q0 .964-.519 1.477-.52.512-1.49.512zm10.391-4.6q-.116.047-.219-.055-.095-.102-.04-.219l.649-1.401 5.885-5.893 1.067 1.06-5.9 5.886zm7.861-7.034-1.06-1.067.493-.485a.7.7 0 0 1 .451-.212.53.53 0 0 1 .438.157l.191.185a.59.59 0 0 1 .192.45.67.67 0 0 1-.212.466zM4.438 12.012a.99.99 0 0 1-.725-.301 1 1 0 0 1-.294-.718q0-.417.294-.718.3-.3.724-.3.417 0 .711.3.301.3.301.718a.98.98 0 0 1-.3.718q-.295.3-.712.3Zm3 0a.98.98 0 0 1-.717-.301 1 1 0 0 1-.294-.718q0-.417.294-.718.3-.3.717-.3.424 0 .718.3.3.3.301.718a.98.98 0 0 1-.3.718.97.97 0 0 1-.719.3Zm3.008 0a.98.98 0 0 1-.717-.301.98.98 0 0 1-.301-.718q0-.417.3-.718.301-.3.718-.3.418 0 .718.3t.3.718a.98.98 0 0 1-.3.718q-.3.3-.718.3Z"})}),Rp={marginLeft:4,height:14,width:14,opacity:.5},Bp={id:"user",headerTitle:(0,i.jsx)(v().sA,{id:"managedAccounts.table.user",defaultMessage:"Users"}),renderCell:e=>e.type===Xt().T.ManagedUser?(0,i.jsx)(ua,{userId:e.managedUser.userId,badge:e.usersOnLegalHold.has(e.managedUser.userId)?(0,i.jsx)(jo,{}):null,rightContent:(0,i.jsx)(Wp,{managedUser:e.managedUser,isLastOrgOwner:e.isLastOrgOwner,handleEditDetails:e.handleEditDetails,handleUpdateUserSuspension:e.handleUpdateUserSuspension,handleLogOutUser:e.handleLogOutUser,handleResetPassword:e.handleResetPassword,handleDeleteUser:e.handleDeleteUser})}):(0,i.jsx)(ga,{}),widthData:{width:275,maxWidth:275},sortable:!1},Lp={id:"email",headerTitle:(0,i.jsx)(v().sA,{id:"organizationAccounts.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:240}}):(0,i.jsx)(ws().xF,{userId:e.managedUser.userId}),widthData:{widthPercent:25,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},Ep={id:"workspaces",headerTitle:(0,i.jsx)(v().sA,{id:"managedAccounts.table.workspaces",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Xt().T.ManagedUser?(0,i.jsx)(Vp,{managedUser:e.managedUser}):(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}),widthData:{widthPercent:25,minWidth:120},sortable:!1},Op={id:"lastActive",headerTitle:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},children:[(0,i.jsx)(v().sA,{id:"managedAccounts.table.lastActive",defaultMessage:"Last active"}),(0,i.jsx)(q().A,{render:e=>(0,i.jsx)("div",{...e,children:(0,a(525884).A)(Rp)}),renderTooltip:()=>(0,i.jsx)(v().sA,{id:"managedAccounts.table.lastActive.tooltip",defaultMessage:"This may be delayed by several hours."})})]}),renderCell:e=>e.type===Xt().T.ManagedUser?(0,i.jsx)(So().F,{lastActiveAt:e.managedUser.lastActiveAt,containerStyle:{opacity:.5}}):(0,i.jsx)(Gi().h,{}),widthData:{width:60},sortable:!1},Up=[Bp,{id:"accountStatus",headerTitle:(0,i.jsx)(v().sA,{id:"organization.managedAccounts.table.accountStatus",defaultMessage:"Status"}),renderCell:e=>e.type===Xt().T.ManagedUser?(0,i.jsx)(Hp,{status:e.managedUser.accountStatus}):(0,i.jsx)(Lt().mf,{containerStyles:{width:80}}),widthData:{width:60},sortable:!1},Lp,Ep,Op];function Fp(e){let{organizationStore:t,usersOnLegalHold:a,managedUsers:n,loading:o,loadNextPage:r,loadPrevPage:l,currentPage:d,hasPreviousPage:c,hasNextPage:u,refreshPage:g,selectedIds:p,onSelectAll:h,onUnselectAll:f,onSelectRow:x}=e;const y=(0,b().v3)(),w=(0,qt().A)(),A=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:Up,theme:e,containerMarginTop:0})),[]),[M,C]=(0,s.useState)({isOpen:!1}),I=()=>{C({isOpen:!1})},[T,k]=(0,s.useState)(void 0),_=()=>{k(void 0)},[D,z]=(0,s.useState)(void 0),P=()=>{z(void 0)},N=(0,S().K8)((()=>n.map((e=>({id:e.userId,type:Xt().T.ManagedUser,managedUser:e,isLastOrgOwner:t.isUserLastOwner(e.userId),isClickable:!0,usersOnLegalHold:a,handleEditDetails:()=>{C({isOpen:!0,onDismiss:I,userId:e.userId,organizationStore:t,lastActiveAt:e.lastActiveAt})},handleUpdateUserSuspension:async()=>{"notSuspended"===e.accountStatus?k({type:"suspend",userId:e.userId,onDismiss:_,onSubmit:async()=>{await _c({environment:y,isSuspended:"suspended"===e.accountStatus,userId:e.userId}),g()}}):(await _c({environment:y,isSuspended:"suspended"===e.accountStatus,userId:e.userId}),g())},handleLogOutUser:()=>{k({type:"logoutSingle",onDismiss:_,onSubmit:async()=>{await wc({environment:y,organizationId:t.id,userId:e.userId}),g()}})},handleResetPassword:()=>{k({type:"resetPasswordSingle",userId:e.userId,onDismiss:_,onSubmit:async()=>{await Mc({environment:y,organizationId:t.id,userId:e.userId}),g()}})},handleDeleteUser:()=>{z({userId:e.userId,onDismiss:P,onSubmit:async()=>{await vc({environment:y,isSuspended:"suspended"===e.accountStatus,userId:e.userId}),g()}})}})))),[y,n,t,g,a]);const R=o?(0,Xt().n)():N,B=Up.map((e=>({...e,headerStyle:w.tableHeader,rowStyle:w.tableRow}))),L={header:{isDisabled:o,isSelected:p.length>0&&p.length===n.length,onClick:()=>{p.length===n.length?f():h()}},row:{getDisabledState:e=>o,getSelectedState:e=>e.type===Xt().T.ManagedUser&&p.includes(e.managedUser.userId),onClick:e=>{e.type===Xt().T.ManagedUser&&x(e.managedUser.userId)}}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Bt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:B,rows:R,renderNoRowsComponent:()=>o?null:(0,i.jsx)(Kt,{icon:m().F,title:(0,i.jsx)(v().sA,{id:"managedAccounts.table.empty",defaultMessage:"No users found"}),byline:(0,i.jsx)(v().sA,{id:"managedAccounts.table.empty.byline",defaultMessage:"There are no users that match this query."})}),loadMoreMethod:{type:"pages",onLoadNext:r,onLoadPrevious:l,hasNextPage:u,hasPrevPage:c,currentPage:d},styles:A,multiselect:L,onRowClick:function(e){e.type===Xt().T.ManagedUser&&C({isOpen:!0,onDismiss:I,userId:e.managedUser.userId,organizationStore:t,lastActiveAt:e.managedUser.lastActiveAt})},extendToFullScreen:$t().e}),M.isOpen&&(0,i.jsx)(Io,{...M,isOnLegalHold:a.has(M.userId)}),T&&(0,i.jsx)(bc,{...T}),D&&(0,i.jsx)(hc,{shouldWarnLegalHold:a.has(D.userId),...D})]})}function Vp(e){let{managedUser:t}=e;return 0===t.workspaces.length?(0,i.jsx)(D().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.spacesColumn.noWorkspaces",defaultMessage:"No workspaces"})}):(0,i.jsx)(J().Nt,{workspaces:t.workspaces,showTooltip:!0})}function Hp(e){const{status:t}=e;let a,s,n,o;const r=(0,j().DP)();switch(t){case"notSuspended":a=(0,i.jsx)(v().sA,{id:"organization.managedAccounts.table.accountStatusValue.active",defaultMessage:"Active"}),s=r.statusTokenText.green,o=r.statusTokenBackground.green,n="green";break;case"suspended":a=(0,i.jsx)(v().sA,{id:"organization.managedAccounts.table.accountStatusValue.suspended",defaultMessage:"Suspended"}),s=r.statusTokenText.yellow,o=r.statusTokenBackground.yellow,n="yellow";break;default:(0,Rt().HB)(t)}return(0,i.jsx)(jt().A,{format:ut().NY.Medium,value:a,isSingle:!0,showRemoveButton:!1,isRound:!0,backgroundColor:o,showColoredDot:n,color:s})}function Wp(e){const t=(0,v().tz)(),{managedUser:s,isLastOrgOwner:n,handleEditDetails:o,handleUpdateUserSuspension:r,handleLogOutUser:l,handleResetPassword:d,handleDeleteUser:c}=e,u=(0,S().uB)(void 0,yo().A),g=(0,j().IS)((()=>({popupMenu:{width:248},icon:{height:20,width:20,fill:"currentColor"}})),[]),m=[{key:"edit-details",render:e=>(0,i.jsx)(Ve().A,{...e,icon:(0,a(859384).M)(g.icon),title:(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.userColumn.menu.editDetails",defaultMessage:"Edit details"})}),action:()=>{o(),u.setState({...u.state,open:!1})}},{key:"log-out-user",render:e=>(0,i.jsx)(Ve().A,{...e,icon:(0,$g().U)(g.icon),title:(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.userColumn.menu.logoutUser",defaultMessage:"Log out"})}),action:()=>{l(),u.setState({...u.state,open:!1})}},{key:"reset-password",render:e=>(0,i.jsx)(Ve().A,{...e,icon:Np(g.icon),title:(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.userColumn.menu.resetPassword",defaultMessage:"Reset password"})}),action:()=>{d(),u.setState({...u.state,open:!1})}}],p={key:"actions",render:e=>(0,i.jsx)(He().A,{title:(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.userColumn.menu.title",defaultMessage:"Managed account actions"}),...e}),items:m},h=[{key:"suspend-user",render:e=>(0,i.jsx)(Ve().A,{...e,isRedOnHover:!0,icon:"suspended"===s.accountStatus?(0,a(519143).D)(g.icon):Pp(g.icon),title:"suspended"===s.accountStatus?(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.userColumn.menu.unSuspendUser",defaultMessage:"Reactivate user"}):(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.userColumn.menu.suspendUser",defaultMessage:"Suspend user"})}),action:()=>{r(),u.setState({...u.state,open:!1})}},{key:"delete-user",render:e=>(0,i.jsx)(Ve().A,{...e,isRedOnHover:!0,icon:(0,Nt().I)(g.icon),title:(0,i.jsx)(v().sA,{id:"organizationManagedUsersTable.userColumn.menu.deleteUser",defaultMessage:"Delete user"}),disabled:n,disabledFeedback:n}),action:()=>{c(),u.setState({...u.state,open:!1})}}],f={key:"destructive-actions",render:e=>(0,i.jsx)(He().A,{topBorder:!0,...e}),items:h};return(0,i.jsx)(bo().Ay,{stopClickPropagation:!0,popupType:Xa().n.Popup,alignmentToOrigin:$a().C.Start,placementToOrigin:$a().W.Bottom,style:g.popupMenu,render:()=>(0,i.jsx)(vt().A,{menuType:ht().gu.Popup,width:248,children:(0,i.jsx)(yt().Ay,{type:yt().Oh.Vertical,initialFocus:void 0,sections:[p,f]})}),onClose:()=>{},buttonPopupStore:u,renderOrigin:e=>(0,i.jsx)(cs().A,{ariaLabel:t.formatMessage({id:"managedUserActionsMenuButton.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:ho().W,...e})})}var qp=()=>a(771495);function Gp(e){let{selectedMfaMethod:t,setSelectedMfaMethod:a}=e;return(0,i.jsx)(Qs().G0,{pillTitle:(0,i.jsx)(v().sA,{id:"managedUsersTab.table.filters.mfaMethod.title",defaultMessage:"2-step verification method"}),pillIcon:po().g,selectedItem:t,setSelectedItem:a,items:qp().l,shouldUseCheck:!0})}const Kp=(0,v().YK)({placeholder:{id:"identityProvisioningSettings.managedUsers.searchInput.placeholder",defaultMessage:"Search name, email, or user ID"}});function Yp(e){let{organizationStore:t}=e;const a=(0,b().v3)(),s=(0,i.jsx)(v().sA,{id:"organization.people.accounts.title",defaultMessage:"Manage user accounts"});return(0,i.jsx)(Gl().D,{breadcrumbs:[{message:(0,i.jsx)(v().sA,{id:"organizationGuestsSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{(0,Yl().i)({environment:a,from:{tabRoute:Jt().kr,properties:{subtab:Jt().DE.ManagedUsers}},organizationId:t.id,tabRoute:Jt().kr})}},{message:s}],children:(0,i.jsxs)(bl().t,{children:[(0,i.jsx)(Va()._,{title:s,byline:(0,i.jsx)(v().sA,{id:"organization.people.accounts.byline",defaultMessage:"Manage user accounts with verified domain emails: adjust access, update profiles, and control permissions."})}),(0,i.jsx)($p,{organizationStore:t})]})})}var Qp=function(e){return e.AddToWorkspace="add-to-workspace",e.RemoveFromWorkspace="remove-from-workspace",e.DeleteUser="delete-user",e}(Qp||{});function $p(e){let{organizationStore:t}=e;const a=(0,b().v3)(),n=(0,v().tz)(),o=(0,Ip().V)()||0,r=(0,j().IS)((e=>({link:{fontSize:14,fontWeight:400,color:e.mediumTextColor,textDecoration:"none"},title:{marginTop:21,fontWeight:L().Wy.semibold,fontSize:17,display:"flex",justifyContent:"flex-start",alignItems:"center"},byline:{fontSize:14,fontWeight:L().Wy.regular,color:e.mediumTextColor,paddingBottom:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"},leftContent:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px",paddingTop:4,rowGap:4},rightContent:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px",minHeight:28,gap:8},tableHeader:{position:"relative",display:"flex",flexDirection:"row"}})),[]),{managedUsers:l,filters:d,setFilters:c,loading:u,currentPage:g,hasPrevPage:m,hasNextPage:p,loadNextPage:h,loadPrevPage:f,refreshPage:x}=function(e){let{organizationStore:t}=e;const a=(0,b().v3)(),[n,i]=(0,s.useState)(kp),o=(0,s.useRef)(n.filters),r=(0,s.useRef)(!1),l=(0,S().K8)((()=>t.getEmailDomains()),[t]),d=(0,s.useMemo)((()=>n.filters.emailDomains&&n.filters.emailDomains.length>0?n.filters.emailDomains:l),[n.filters.emailDomains,l]),c=(0,s.useCallback)((async e=>{if(0===d.length)return;let t=n.loading,s=n.error,r=n.hasNextPage,l=n.paginationToken,c=n.paginationTokenHistory;if(e.restartSearch&&(i((e=>({...kp,filters:e.filters}))),t=kp.loading,s=kp.error,r=kp.hasNextPage,l=kp.paginationToken,c=[]),r&&!t&&!s){i((e=>({...e,loading:!0}))),o.current=n.filters;try{var u;const e=await M().callApi({eventName:"getManagedUsers",environment:a,data:{query:n.filters.query,multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId,userStatus:n.filters.managedUserStatus,paginationToken:l,emailDomains:d,limit:Tp}});if(pc().F2(a,{filters:{multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId},query_length:(null===(u=n.filters.query)||void 0===u?void 0:u.length)??0,current_page:l}),"failed"===e.type)throw e.error;const t=e.data.nextPaginationToken,s=e.data.results;i((e=>({...e,managedUsers:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:t,paginationTokenHistory:l?[...c,l]:c,hasNextPage:Boolean(t)})))}catch(g){const e=(0,As().A)(g);i((t=>({...t,loading:!1,error:e})))}}}),[a,n.loading,n.error,n.hasNextPage,n.paginationToken,n.paginationTokenHistory,n.filters,d]),u=(0,s.useCallback)((async e=>{if(0===d.length)return;let t=n.loading,s=n.error,r=n.paginationToken,l=n.paginationTokenHistory;if(e.restartSearch&&(i((e=>({...kp,filters:e.filters}))),t=kp.loading,s=kp.error,r=kp.paginationToken,l=[]),0===l.length||t)return;if(s)return;i((e=>({...e,loading:!0}))),o.current=n.filters;const c=l[l.length-2];try{var u;const e=await M().callApi({eventName:"getManagedUsers",environment:a,data:{query:n.filters.query,multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId,userStatus:n.filters.managedUserStatus,paginationToken:c,emailDomains:d,limit:Tp}});if(pc().F2(a,{filters:{multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId},query_length:(null===(u=n.filters.query)||void 0===u?void 0:u.length)??0,current_page:r}),"failed"===e.type)throw e.error;const t=e.data.nextPaginationToken,s=e.data.results;i((e=>({...e,managedUsers:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:t,paginationTokenHistory:l.slice(0,-1),hasNextPage:Boolean(t)})))}catch(g){const e=(0,As().A)(g);i((t=>({...t,loading:!1,error:e})))}}),[a,n.loading,n.error,n.paginationToken,n.paginationTokenHistory,n.filters,d]);(0,s.useEffect)((()=>{!r.current&&d.length>0&&(c({restartSearch:!0}),r.current=!0)}),[d,c]),(0,s.useEffect)((()=>{Ze().n4(o.current,n.filters)||c({restartSearch:!0})}),[n.filters,c]);const g=(0,s.useCallback)((()=>c({restartSearch:!1})),[c]),m=(0,s.useCallback)((()=>u({restartSearch:!1})),[u]),p=(0,s.useCallback)((e=>{i((t=>({...t,filters:{...t.filters,...e}})))}),[]),h=(0,s.useCallback)(((e,t)=>{i((a=>({...a,managedUsers:a.managedUsers.map((a=>a.userId===e?{...a,workspaces:a.workspaces.filter((e=>e.id!==t))}:a))})))}),[]),f=(0,s.useCallback)(((e,t)=>{i((a=>({...a,managedUsers:a.managedUsers.map((a=>a.userId===e?{...a,accountStatus:t}:a))})))}),[]),x=(0,s.useCallback)((e=>{i((t=>({...t,managedUsers:t.managedUsers.filter((t=>t.userId!==e))})))}),[]),v=(0,s.useCallback)((()=>c({restartSearch:!0})),[c]);return{managedUsers:n.managedUsers,filters:n.filters,loading:n.loading,error:n.error,removeWorkspaceFromUser:h,removeUserFromManagedUsers:x,setFilters:p,currentPage:n.paginationTokenHistory.length+1,hasNextPage:n.hasNextPage,loadNextPage:g,hasPrevPage:n.paginationTokenHistory.length>0,loadPrevPage:m,updateManagedUserAccountStatus:f,refreshPage:v}}({organizationStore:t}),y=(0,s.useMemo)((()=>l.map((e=>e.userId))),[l]),{selectedIds:A,handleToggleId:C,handleSelectAllIds:I,handleUnselectAllIds:T}=Ot({allPossibleIds:y}),{organizationOwnerRecordCache:k}=(0,s.useContext)(P().N),{spaceIds:D}=(0,s.useContext)(N().D),[z,R]=(0,s.useState)(),B=(0,S().K8)((()=>{const e=[];for(const t of D)e.push(new(_().SL)(a,{id:t,table:na().NX},{inMemoryRecordCache:k}));return e.map((e=>{var t;return{id:e.id,name:e.getName(),createdTime:e.getCreatedTime(),memberCount:o,icon:null===(t=e.getIcon())||void 0===t?void 0:t.icon,subscriptionTier:e.getSubscriptionTier()}}))}),[a,k,D,o]),{membersSet:E}=Di({organizationId:t.id});function O(){R(void 0)}async function U(){await x(),T()}const F=(0,S().K8)((()=>new Pa),[]),V=(0,S().K8)((()=>t.getEmailDomains()),[t]),H=(0,S().K8)((()=>A.map((e=>new(_().LU)(a,{table:w().oo,id:e}).getModel())).filter(Rt().O9).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[a,A]);(0,s.useEffect)((()=>{F.setState({...F.state,inviteTargets:H,inviteRole:"read_and_write",isInviteTargetsEmpty:!1})}),[F,H]);const{inviteTargets:W}=(0,S().K8)((()=>({inviteTargets:F.state.inviteTargets})),[F]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:r.tableHeader,children:[(0,i.jsxs)("div",{style:r.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:A.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(Fa,{itemsSelectedCount:A.length}),onClick:T}),(0,i.jsx)(Ua,{icon:Pt().x,title:(0,i.jsx)(v().sA,{id:"organizationManagedAccountsSubTab.multiselect.addToWorkspace",defaultMessage:"Add to workspace"}),onClick:()=>R(Qp.AddToWorkspace)}),(0,i.jsx)(Ua,{icon:js,title:(0,i.jsx)(v().sA,{id:"organizationManagedAccountsSubTab.multiselect.removeFromWorkspace",defaultMessage:"Remove from workspace"}),onClick:()=>R(Qp.RemoveFromWorkspace)})]}),(0,i.jsx)($s,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationManagedAccountsTable.emailDomainsFilter.pillTitle",defaultMessage:"Domain email"}),emailDomains:V,selectedEmailDomains:d.emailDomains||[],setSelectedEmailDomains:e=>{c({emailDomains:e})}}),(0,i.jsx)(Fi,{selectedSpaceId:d.workspaceId,setSelectedSpaceId:e=>{c({workspaceId:e})},spaceData:B}),(0,i.jsx)(Gp,{selectedMfaMethod:d.multiFactorStatus,setSelectedMfaMethod:e=>{c({multiFactorStatus:e})}}),(0,i.jsx)(Dp,{selectedAccountStatus:d.managedUserStatus,setSelectedAccountStatus:e=>{c({managedUserStatus:e})}})]}),(0,i.jsx)("div",{style:r.rightContent,children:(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:d.query,setQueryFilter:e=>c({query:e}),placeholderText:n.formatMessage(Kp.placeholder)})})]}),z===Qp.AddToWorkspace?(0,i.jsx)(wo,{permissionsInviteStore:F,onDismiss:O,organizationStore:t,refreshPage:U}):null,z===Qp.RemoveFromWorkspace?(0,i.jsx)(hn,{permissionsInviteStore:F,onDismiss:O,organizationStore:t,refreshPage:U,membersSpaceIds:Xp({managedUsers:l,inviteTargets:W})}):null,(0,i.jsx)(Fp,{organizationStore:t,managedUsers:l,usersOnLegalHold:E,loading:u,currentPage:g,loadNextPage:h,loadPrevPage:f,hasPreviousPage:m,hasNextPage:p,selectedIds:A,onSelectAll:I,onUnselectAll:T,onSelectRow:C,refreshPage:U})]})}function Xp(e){let{managedUsers:t,inviteTargets:a}=e;const s=new Set;if(t)for(const n of a){const e=t.find((e=>e.userId===n.value.id));for(const t of(null==e?void 0:e.workspaces)??[])s.add(t.id)}return s}const Zp=et().q,Jp={groups:[],loading:!1,error:void 0,hasNextPage:!0,cursor:void 0,sortState:{column:pa,sortAscending:!0},filters:{},query:"",hasPreviousPage:!1},eh={columnName:"name",direction:"ascending"};function th(e){return"name"===e.column.id?{columnName:"name",direction:e.sortAscending?"ascending":"descending"}:"members"===e.column.id?{columnName:"members",direction:e.sortAscending?"ascending":"descending"}:eh}const ah=(0,v().YK)({placeholder:{id:"organizationGroupsSubTab.groupsSearch.placeholder",defaultMessage:"Search by email or name."},name:{id:"organizationGroupsSubTab.sort.name",defaultMessage:"Name"},memberCount:{id:"organizationGroupsSubTab.sort.memberCount",defaultMessage:"Member count"}});function sh(e){let{organizationStore:t,groupId:a}=e;const s=(0,b().v3)(),n=(0,i.jsx)(v().sA,{id:"organization.people.groups.title",defaultMessage:"Manage groups"});return(0,i.jsx)(Gl().D,{breadcrumbs:[{message:(0,i.jsx)(v().sA,{id:"organizationGroupsSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{(0,Yl().i)({environment:s,from:{tabRoute:Jt().kr,properties:{subtab:Jt().DE.Groups}},organizationId:t.id,tabRoute:Jt().kr})}},{message:n}],children:(0,i.jsxs)(bl().t,{children:[(0,i.jsx)(Va()._,{title:n,byline:(0,i.jsx)(v().sA,{id:"organization.people.groups.byline",defaultMessage:"Set up groups to manage page permissions from the share menu and manage teamspace members in bulk."})}),(0,i.jsx)(nh,{organizationStore:t,groupId:a})]})})}function nh(e){let{organizationStore:t,groupId:a}=e;const n=(0,v().tz)(),{groups:o,loading:r,error:l,loadNextPage:d,setSortState:c,filters:u,setFilters:g,query:m,setQuery:p,refreshPage:h,currentPage:f,loadPreviousPage:x,hasPreviousPage:y,hasNextPage:S,removePagesFromGroup:j}=function(e){let{organizationStore:t}=e;const a=(0,b().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(P().N),[i,o]=(0,s.useState)(Jp),[r,l]=(0,s.useState)(1),d=(0,s.useRef)(!1),c=(0,s.useRef)(Jp.sortState),u=(0,s.useRef)({}),g=(0,s.useRef)(Jp.query),m=(0,s.useRef)(Jp.cursor),p=(0,s.useCallback)((async e=>{let{cursor:s,sortState:i,filters:r,query:l}=e;try{const e=await M().callApi({eventName:"getGroupsInOrganization",environment:a,data:{organizationId:t.id,sort:th(i),cursor:s,filters:r,query:l,limit:Zp}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Rt().HB)(e)}n({data:e.data}),o((t=>({...t,error:void 0,loading:!1,groups:e.data.groups,cursor:e.data.nextCursor,hasNextPage:e.data.hasNextPage,hasPreviousPage:void 0!==j()})))}catch(d){const e=(0,As().A)(d);o((t=>({...t,loading:!1,error:e})))}}),[a,t.id,n]),h=(0,s.useCallback)((async e=>{let{restartSearch:a,overridePage:s}=e;if(!t.id)return;let n=i.loading,r=i.error,l=s?s.hasNextPage:i.hasNextPage,d=s?s.cursor:i.cursor;return a&&(o((e=>({...Jp,sortState:e.sortState,filters:e.filters,query:e.query}))),n=Jp.loading,r=Jp.error,l=Jp.hasNextPage,d=Jp.cursor),!l||n||r?void 0:(o((e=>({...e,loading:!0}))),u.current=i.filters,c.current=i.sortState,g.current=i.query,m.current=s?s.cursor:d,p({cursor:d,sortState:i.sortState,filters:i.filters,query:i.query}))}),[t.id,i,p]);(0,s.useEffect)((()=>{!d.current&&Boolean(t.id)&&(h({restartSearch:!0}),d.current=!0)}),[t,h]);const f=(0,s.useCallback)((()=>(l((e=>e+1)),h({restartSearch:!1}))),[h]);(0,s.useEffect)((()=>{Ze().n4(c.current,i.sortState)||h({restartSearch:!0})}),[i.sortState,h]),(0,s.useEffect)((()=>{Ze().n4(u.current,i.filters)||h({restartSearch:!0})}),[i.filters,h]),(0,s.useEffect)((()=>{Ze().n4(g.current,i.query)||h({restartSearch:!0})}),[i.query,h]);const x=(0,s.useCallback)((e=>{o((t=>({...t,filters:{...t.filters,...e}})))}),[]),v=(0,s.useCallback)((e=>{o((t=>({...t,sortState:e??Jp.sortState})))}),[]),y=(0,s.useCallback)((e=>{o((t=>({...t,query:e})))}),[]),S=(0,s.useCallback)((async e=>(e&&o((e=>({...e,loading:!0,groups:[]}))),p({cursor:m.current,sortState:i.sortState,filters:i.filters,query:i.query}))),[p,i]);function j(){if(!m.current)return;const e=m.current.offset-Zp;return e<0?void 0:e}const w=(0,s.useCallback)((async()=>{const e=j();void 0!==e&&(l((e=>Math.max(1,e-1))),await h({restartSearch:!1,overridePage:{cursor:{offset:e},hasNextPage:!0}}))}),[h]),A=(0,s.useCallback)(((e,t)=>{o((a=>({...a,groups:a.groups.map((a=>a.groupId===e?{...a,sharedPageIds:a.sharedPageIds.filter((e=>!t.includes(e)))}:a))})))}),[]);return{groups:i.groups,loading:i.loading,error:i.error,loadNextPage:f,currentPage:r,hasNextPage:i.hasNextPage,cursor:i.cursor,setSortState:v,sortState:i.sortState,setFilters:x,filters:i.filters,query:i.query,setQuery:y,loadPreviousPage:w,hasPreviousPage:i.hasPreviousPage,refreshPage:S,removePagesFromGroup:A}}({organizationStore:t}),w=zi({spaceStores:(0,ks().l)()}),A=(0,Hn().F)(),C=[{id:pa.id,name:n.formatMessage(ah.name),type:"title"},{id:xa.id,name:n.formatMessage(ah.memberCount),type:"number"}],[I,T]=(0,s.useState)(),[k,_]=(0,s.useState)(!1),[D,z]=(0,s.useState)(),N=D??I??[];return(0,s.useEffect)((()=>{if(!I||0===I.length)return void c(void 0);const e=I[0];switch(e.propertyId){case pa.id:c({column:pa,sortAscending:"ascending"===e.direction});break;case xa.id:c({column:xa,sortAscending:"ascending"===e.direction})}}),[c,I]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:A.tableHeader,children:[(0,i.jsxs)("div",{style:A.leftContent,children:[(0,i.jsx)(Vn().A,{children:(0,i.jsx)(Wa().e,{preventMultipleSorts:!0,sortProperties:C,isMenuOpen:k,setIsMenuOpen:_,onApply:e=>{_(!1),T(e),z(void 0)},currentSorts:N})}),N.length>0?(0,i.jsx)(Fn().he,{}):null,(0,i.jsx)(Ui,{selectedSpaceIds:u.spaceIds||[],setSelectedSpaceIds:e=>g({spaceIds:e}),spaceData:w})]}),(0,i.jsxs)("div",{style:A.rightContent,children:[(0,i.jsx)(Ha().x,{appliedSorts:I,openSortPillMenu:e=>{e&&z([{propertyId:e,direction:"ascending"}]),_(!0)},sortProperties:C}),(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:m,setQueryFilter:p,placeholderText:n.formatMessage(ah.placeholder)})]})]}),(0,i.jsx)(ya,{groupId:a,groups:o,loading:r,error:l,organizationStore:t,loadNextPage:d,currentPage:f,loadPreviousPage:x,hasPreviousPage:y,refreshPage:h,hasNextPage:S,removePagesFromGroup:j})]})}const ih={id:"actor",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(ga,{}):(0,i.jsx)(ua,{userId:e.organizationGuest.userId,badge:e.usersOnLegalHold.has(e.organizationGuest.userId)?(0,i.jsx)(jo,{}):null,rightContent:(0,i.jsx)(ph,{userId:e.organizationGuest.userId,setSelectedUserId:e.setSelectedUserId,setOpenedModal:e.setOpenedModal})}),widthData:{width:275,maxWidth:275},sortable:!1,shouldShowSortTooltip:!1},oh={id:"email",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:240}}):(0,i.jsx)(ws().xF,{userId:e.organizationGuest.userId}),widthData:{widthPercent:25,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},rh={id:"spaces",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.spacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:140}}):(0,i.jsx)(qo,{organizationGuest:e.organizationGuest}),widthData:{widthPercent:25,minWidth:120},sortable:!1,hasClickableContents:!1},lh={id:"pages",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.pagesColumn.header",defaultMessage:"Pages"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Ht().Kb,{}):(0,i.jsx)(mh,{organizationGuest:e.organizationGuest}),widthData:{widthPercent:10,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},dh={id:"lastActive",headerTitle:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.lastActiveColumn.header",defaultMessage:"Last active"}),renderCell:e=>e.type===Xt().T.Loading?(0,i.jsx)(Lt().mf,{containerStyles:{width:100}}):(0,i.jsx)(So().F,{lastActiveAt:e.organizationGuest.lastActiveTime,isNoActivitySecondaryColor:!0}),widthData:{widthPercent:10,minWidth:100},sortable:!1,shouldShowSortTooltip:!0,hasClickableContents:!1},ch=[ih,oh,rh,dh,lh];var uh=function(e){return e.ConvertToMember="convert-to-member",e.RemoveFromWorkspace="remove-from-workspace",e}(uh||{});function gh(e){let{guests:t,usersOnLegalHold:a,loading:n,error:o,organizationStore:r,loadNextPage:l,refreshPage:d,currentPage:c,hasNextPage:u,hasPreviousPage:g,loadPreviousPage:p,selectedIds:h,onSelectAll:f,onUnselectAll:x,onSelectRow:y}=e;const A=(0,b().v3)(),M=(0,qt().A)(),C=(0,j().IS)((e=>(0,Bt().rC)({columnRenderInfo:ch,theme:e,containerMarginTop:0})),[]),[I,T]=(0,s.useState)(),[k,D]=(0,s.useState)(),[z,P]=(0,s.useState)({isOpen:!1}),N=t.map((e=>({organizationGuest:e,usersOnLegalHold:a,id:e.userId,isClickable:!0,type:Xt().T.OrganizationGuest,setSelectedUserId:T,setOpenedModal:D}))),R=n?(0,Xt().n)():N;function B(){D(void 0)}const L=()=>{P({isOpen:!1})};const E=ch.map((e=>({...e,headerStyle:M.tableHeader,rowStyle:M.tableRow}))),O={header:{isDisabled:n,isSelected:h.length>0&&h.length===t.length,onClick:()=>{h.length===t.length?x():f()}},row:{getDisabledState:e=>n,getSelectedState:e=>e.type===Xt().T.OrganizationGuest&&h.includes(e.organizationGuest.userId),onClick:e=>{e.type===Xt().T.OrganizationGuest&&y(e.organizationGuest.userId)}}},U=(0,S().K8)((()=>{const e=new Pa,t=I?new(_().LU)(A,{table:w().oo,id:I}).getModel():void 0;return t?(e.setState({...e.state,inviteTargets:[{type:"existingUser",value:t,spaceRole:void 0}],inviteRole:"read_and_write",isInviteTargetsEmpty:!1}),e):e}),[A,I]);return!n&&o?(0,i.jsx)(Qt,{error:o,runNewSearch:()=>d(!0)}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Bt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:E,rows:R,renderNoRowsComponent:()=>(0,i.jsx)(Kt,{icon:m().F,title:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.empty",defaultMessage:"No guests found"}),byline:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.empty.byline",defaultMessage:"There are no guests that match this query."})}),styles:C,loadMoreMethod:{type:"pages",onLoadNext:l,onLoadPrevious:p,hasNextPage:u,hasPrevPage:g,currentPage:c},multiselect:O,onRowClick:function(e){e.type===Xt().T.OrganizationGuest&&P({isOpen:!0,onDismiss:L,userId:e.organizationGuest.userId,organizationStore:r,lastActiveAt:e.organizationGuest.lastActiveTime})},extendToFullScreen:$t().e}),k===uh.ConvertToMember?(0,i.jsx)(Bs,{organizationStore:r,permissionsInviteStore:U,onDismiss:B,refreshPage:d}):null,k===uh.RemoveFromWorkspace?(0,i.jsx)(Hs,{permissionsInviteStore:U,onDismiss:B,organizationStore:r,refreshPage:d,organizationGuests:t}):null,z.isOpen&&(0,i.jsx)(Io,{...z,isOnLegalHold:a.has(z.userId)})]})}function mh(e){let{organizationGuest:t}=e;const a=Object.values(t.guestPages).flat();return(0,i.jsx)(Lt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.pagesColumn.title",defaultMessage:"{count, plural, one {# page} other {# pages}}",values:{count:a.length}})})}function ph(e){const t=(0,v().tz)(),{userId:a,setSelectedUserId:s,setOpenedModal:n}=e,o=(0,S().uB)(void 0,yo().A),r=(0,j().IS)((()=>({popupMenu:{width:248},icon:{height:20,width:20,fill:"currentColor"}})),[]),l=[{key:"convert-to-member",render:e=>(0,i.jsx)(Ve().A,{...e,icon:(0,Pt().x)(r.icon),title:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.userColumn.menu.convertToMember",defaultMessage:"Upgrade to member"})}),action:()=>{n(uh.ConvertToMember),s(a),o.setState({...o.state,open:!1})}},{key:"remove-from-workspace",render:e=>(0,i.jsx)(Ve().A,{...e,icon:js(r.icon),title:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.userColumn.menu.removeUserFromWorkspace",defaultMessage:"Remove from workspace"})}),action:()=>{n(uh.RemoveFromWorkspace),s(a),o.setState({...o.state,open:!1})}}],d={key:"actions",render:e=>(0,i.jsx)(He().A,{title:(0,i.jsx)(v().sA,{id:"organizationGuestsTable.userColumn.menu.title",defaultMessage:"Guest actions"}),...e}),items:l};return(0,i.jsx)(bo().Ay,{stopClickPropagation:!0,popupType:Xa().n.Popup,alignmentToOrigin:$a().C.Start,placementToOrigin:$a().W.Bottom,style:r.popupMenu,render:()=>(0,i.jsx)(vt().A,{menuType:ht().gu.Popup,width:248,children:(0,i.jsx)(yt().Ay,{type:yt().Oh.Vertical,initialFocus:void 0,sections:[d]})}),onClose:Ze().lQ,buttonPopupStore:o,renderOrigin:e=>(0,i.jsx)(cs().A,{ariaLabel:t.formatMessage({id:"guestActionsMenuButton.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:ho().W,...e})})}const hh={guests:[],loading:!1,error:void 0,hasNextPage:!0,cursor:void 0,sortState:{column:ih,sortAscending:!0},filters:{},query:"",hasPreviousPage:!1},fh={columnName:"actor",direction:"ascending"};function xh(e){return"actor"===e.column.id?{columnName:"actor",direction:e.sortAscending?"ascending":"descending"}:"lastActive"===e.column.id?{columnName:"lastActive",direction:e.sortAscending?"ascending":"descending"}:fh}function vh(e){let{selectedLastActiveOption:t,setSelectedLastActiveOption:a}=e;return(0,i.jsx)(Qs().G0,{pillTitle:(0,i.jsx)(v().sA,{id:"filters.lastActive.title",defaultMessage:"Last active"}),pillIcon:rr().D,selectedItem:t,setSelectedItem:a,items:yh,shouldUseCheck:!0})}const yh=[{key:"three-months",value:xo.ThreeMonths,title:(0,i.jsx)(v().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanThreeMonths.title",defaultMessage:"Within the last 3 months"}),shortTitle:(0,i.jsx)(v().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanThreeMonths.shortTitle",defaultMessage:"3 months"})},{key:"six-months",value:xo.SixMonths,title:(0,i.jsx)(v().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanSixMonths.title",defaultMessage:"Within the last 6 months"}),shortTitle:(0,i.jsx)(v().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanSixMonths.shortTitle",defaultMessage:"6 months"})},{key:"one-year",value:xo.OneYear,title:(0,i.jsx)(v().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanOneYear.title",defaultMessage:"Within the last 1 year"}),shortTitle:(0,i.jsx)(v().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanOneYear.shortTitle",defaultMessage:"1 year"})}],bh=(0,v().YK)({placeholder:{id:"organizationGuestsSubTab.guestsSearch.placeholder",defaultMessage:"Search by email or name."},name:{id:"organizationGuestsSubTab.sort.name",defaultMessage:"Name"}});function Sh(e){let{organizationStore:t}=e;const a=(0,b().v3)(),s=(0,i.jsx)(v().sA,{id:"organization.people.guests.title",defaultMessage:"Manage guests"});return(0,i.jsx)(Gl().D,{breadcrumbs:[{message:(0,i.jsx)(v().sA,{id:"organizationGuestsSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{(0,Yl().i)({environment:a,from:{tabRoute:Jt().kr,properties:{subtab:Jt().DE.Guests}},organizationId:t.id,tabRoute:Jt().kr})}},{message:s}],children:(0,i.jsxs)(bl().t,{children:[(0,i.jsx)(Va()._,{title:s,byline:(0,i.jsx)(v().sA,{id:"organization.people.guests.byline",defaultMessage:"Manage guests for page-specific access or upgrade them to members for broader permissions across the workspace."})}),(0,i.jsx)(wh,{organizationStore:t})]})})}var jh=function(e){return e.ConvertToMember="convert-to-member",e.RemoveFromWorkspace="remove-from-workspace",e}(jh||{});function wh(e){let{organizationStore:t}=e;const a=(0,v().tz)(),n=(0,b().v3)(),{guests:o,loading:r,error:l,loadNextPage:d,setSortState:c,filters:u,setFilters:g,query:m,setQuery:p,refreshPage:h,currentPage:f,loadPreviousPage:x,hasPreviousPage:y,hasNextPage:j}=function(e){let{organizationStore:t}=e;const a=(0,b().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(P().N),[i,o]=(0,s.useState)(hh),[r,l]=(0,s.useState)(1),d=(0,s.useRef)(!1),c=(0,s.useRef)(hh.sortState),u=(0,s.useRef)({}),g=(0,s.useRef)(hh.query),m=(0,s.useRef)(hh.cursor),p=(0,s.useCallback)((async e=>{let{cursor:s,sortState:i,filters:r,query:l}=e;try{const e=await M().callApi({eventName:"getGuestsInOrganization",environment:a,data:{organizationId:t.id,cursor:s,sort:xh(i),filters:r,query:l}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Rt().HB)(e)}{n({data:e.data});const t=e.data.guests.map((t=>({userId:t.userId,guestPages:t.guestPages,lastActiveTime:e.data.guestIdToLastActive[t.userId]})));o((a=>({...a,loading:!1,guests:t,cursor:e.data.nextCursor,hasNextPage:e.data.hasNextPage,hasPreviousPage:void 0!==j()})))}}catch(d){const e=(0,As().A)(d);o((t=>({...t,loading:!1,error:e})))}}),[a,t.id,n]),h=(0,s.useCallback)((async e=>{let{restartSearch:a,overridePage:s}=e;if(!t.id)return;let n=i.loading,r=i.error,l=s?s.hasNextPage:i.hasNextPage,d=s?s.cursor:i.cursor;return a&&(o((e=>({...hh,sortState:e.sortState,filters:e.filters,query:e.query}))),n=hh.loading,r=hh.error,l=hh.hasNextPage,d=hh.cursor),!l||n||r?void 0:(o((e=>({...e,loading:!0}))),u.current=i.filters,c.current=i.sortState,g.current=i.query,m.current=s?s.cursor:d,p({cursor:d,sortState:i.sortState,filters:i.filters,query:i.query}))}),[t.id,i,p]);(0,s.useEffect)((()=>{!d.current&&Boolean(t.id)&&(h({restartSearch:!0}),d.current=!0)}),[t,h]);const f=(0,s.useCallback)((()=>(l((e=>e+1)),h({restartSearch:!1}))),[h]);(0,s.useEffect)((()=>{Ze().n4(c.current,i.sortState)||h({restartSearch:!0})}),[i.sortState,h]),(0,s.useEffect)((()=>{Ze().n4(u.current,i.filters)||h({restartSearch:!0})}),[i.filters,h]),(0,s.useEffect)((()=>{Ze().n4(g.current,i.query)||h({restartSearch:!0})}),[i.query,h]);const x=(0,s.useCallback)((e=>{o((t=>({...t,filters:{...t.filters,...e}})))}),[]),v=(0,s.useCallback)((e=>{o((t=>({...t,sortState:e??hh.sortState})))}),[]),y=(0,s.useCallback)((e=>{o((t=>({...t,query:e})))}),[]),S=(0,s.useCallback)((async e=>(e&&o((e=>({...e,loading:!0,guests:[]}))),p({cursor:m.current,sortState:i.sortState,filters:i.filters,query:i.query}))),[p,i]);function j(){if(!m.current)return;const e=m.current.offset-et().q;return e<0?void 0:e}const w=(0,s.useCallback)((async()=>{const e=j();void 0!==e&&(l((e=>Math.max(1,e-1))),await h({restartSearch:!1,overridePage:{cursor:{offset:e},hasNextPage:!0}}))}),[h]);return{guests:i.guests,loading:i.loading,error:i.error,loadNextPage:f,currentPage:r,hasNextPage:i.hasNextPage,cursor:i.cursor,setSortState:v,sortState:i.sortState,setFilters:x,filters:i.filters,query:i.query,setQuery:y,loadPreviousPage:w,hasPreviousPage:i.hasPreviousPage,refreshPage:S}}({organizationStore:t}),A=(0,s.useMemo)((()=>o.map((e=>e.userId))),[o]),{selectedIds:C,handleToggleId:I,handleSelectAllIds:T,handleUnselectAllIds:k}=Ot({allPossibleIds:A}),D=zi({spaceStores:(0,ks().l)()}),{membersSet:z}=Di({organizationId:t.id}),{guestEmailDomains:R}=(0,s.useContext)(N().D),[B,L]=(0,s.useState)(),E=(0,Hn().F)();function O(){L(void 0)}async function U(){await h(),k()}const F=(0,S().K8)((()=>new Pa),[]),V=(0,S().K8)((()=>C.map((e=>new(_().LU)(n,{table:w().oo,id:e}).getModel())).filter(Rt().O9).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[n,C]);(0,s.useEffect)((()=>{F.setState({...F.state,inviteTargets:V,inviteRole:"read_and_write",isInviteTargetsEmpty:!1})}),[F,V]);const H=[{id:ih.id,name:a.formatMessage(bh.name),type:"title"}],[W,q]=(0,s.useState)(),[G,K]=(0,s.useState)(!1),[Y,Q]=(0,s.useState)();(0,s.useEffect)((()=>{if(!W||0===W.length)return void c(void 0);const e=W[0];if(e.propertyId===ih.id)c({column:ih,sortAscending:"ascending"===e.direction})}),[c,W]);const $=Y??W??[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:E.tableHeader,children:[(0,i.jsxs)("div",{style:E.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:C.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(Fa,{itemsSelectedCount:C.length}),onClick:k}),(0,i.jsx)(Ua,{icon:Pt().x,title:(0,i.jsx)(v().sA,{id:"organizationGuestsSubTab.multiselect.addToWorkspace",defaultMessage:"Upgrade to member"}),onClick:()=>L(jh.ConvertToMember)}),(0,i.jsx)(Ua,{icon:js,title:(0,i.jsx)(v().sA,{id:"organizationGuestsSubTab.multiselect.removeFromWorkspace",defaultMessage:"Remove from workspace"}),onClick:()=>L(jh.RemoveFromWorkspace)})]}),(0,i.jsx)(Vn().A,{children:(0,i.jsx)(Wa().e,{preventMultipleSorts:!0,sortProperties:H,isMenuOpen:G,setIsMenuOpen:K,onApply:e=>{K(!1),q(e),Q(void 0)},currentSorts:$})}),$.length>0?(0,i.jsx)(Fn().he,{}):null,(0,i.jsx)($s,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationGuestsSubTab.filters.email.title",defaultMessage:"Email"}),emailDomains:R,selectedEmailDomains:u.emailDomains||[],setSelectedEmailDomains:e=>{g({emailDomains:e})}}),(0,i.jsx)(Ui,{selectedSpaceIds:u.spaceIds||[],setSelectedSpaceIds:e=>g({spaceIds:e}),spaceData:D}),(0,i.jsx)(vh,{selectedLastActiveOption:u.lastActive,setSelectedLastActiveOption:e=>g({lastActive:e})})]}),(0,i.jsxs)("div",{style:E.rightContent,children:[(0,i.jsx)(Ha().x,{appliedSorts:W,openSortPillMenu:e=>{e&&Q([{propertyId:e,direction:"ascending"}]),K(!0)},sortProperties:H}),(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:m,setQueryFilter:p,placeholderText:a.formatMessage(bh.placeholder)})]})]}),B===jh.ConvertToMember?(0,i.jsx)(Bs,{organizationStore:t,permissionsInviteStore:F,onDismiss:O,refreshPage:U}):null,B===jh.RemoveFromWorkspace?(0,i.jsx)(Hs,{permissionsInviteStore:F,onDismiss:O,organizationStore:t,refreshPage:U,organizationGuests:o}):null,(0,i.jsx)(gh,{guests:o,usersOnLegalHold:z,loading:r,error:l,organizationStore:t,loadNextPage:d,currentPage:f,loadPreviousPage:x,hasPreviousPage:y,refreshPage:h,hasNextPage:j,selectedIds:C,onSelectAll:T,onUnselectAll:k,onSelectRow:I})]})}const Ah={members:[],filters:{},loading:!1,error:void 0,currentCursor:void 0,hasNextPage:!0,nextCursor:void 0,hasPreviousPage:!1,previousCursor:void 0,sortState:void 0,query:"",currentPage:1};function Mh(e){let{organizationId:t}=e;const a=(0,k().X)("settings_console_edge_cache"),n=function(e){let{organizationId:t}=e;const a=(0,b().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(P().N),[i,o]=(0,s.useState)(Ah),r=(0,s.useRef)(!1),l=(0,s.useRef)({}),d=(0,s.useRef)(Ah.sortState),c=(0,s.useRef)(Ah.query);function u(e){return"actor"===(null==e?void 0:e.column.id)?{columnName:"actor",direction:e.sortAscending?"ascending":"descending"}:"role"===(null==e?void 0:e.column.id)?{columnName:"role",direction:e.sortAscending?"ascending":"descending"}:void 0}const g=(0,s.useCallback)((async e=>{let{cursor:s,filters:i,sortState:r,query:l}=e;const d=et().q;try{const e=await M().callApi({eventName:"getMembersInOrganization",environment:a,data:{organizationId:t,cursor:s,filters:i,sort:u(r),query:l,limit:d}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Rt().HB)(e)}n({data:e.data}),o((t=>({...t,members:e.data.members,loading:!1,error:void 0,hasNextPage:e.data.hasNextPage,hasPreviousPage:e.data.hasPreviousPage,currentPage:e.data.hasPreviousPage?t.currentPage:Ah.currentPage})))}catch(c){const e=(0,As().A)(c);o((t=>({...t,loading:!1,error:e})))}}),[a,t,n]),m=(0,s.useCallback)((async e=>{let{restartSearch:a,cursor:s}=e;if(!t)return;let n=i.loading,r=i.error;a&&(o((e=>({...Ah,filters:e.filters,sortState:e.sortState,query:e.query}))),n=Ah.loading,r=Ah.error),n||r||(o((e=>({...e,loading:!0,members:[]}))),l.current=i.filters,d.current=i.sortState,c.current=i.query,await g({cursor:s,filters:i.filters,sortState:i.sortState,query:i.query}))}),[t,i,g]);(0,s.useEffect)((()=>{!r.current&&Boolean(t)&&(m({restartSearch:!0}),r.current=!0)}),[t,m]),(0,s.useEffect)((()=>{Ze().n4(l.current,i.filters)||m({restartSearch:!0})}),[i.filters,m]),(0,s.useEffect)((()=>{Ze().n4(d.current,i.sortState)||m({restartSearch:!0})}),[i.sortState,m]),(0,s.useEffect)((()=>{Ze().n4(c.current,i.query)||m({restartSearch:!0})}),[i.query,m]);const p=(0,s.useCallback)((async()=>{var e;if(!i.hasNextPage)return;o((e=>({...e,currentPage:e.currentPage+1})));const t=null===(e=i.members[i.members.length-1])||void 0===e?void 0:e.userId;return m({restartSearch:!1,cursor:t?{nextCursorId:t}:void 0})}),[m,i.members,i.hasNextPage]),h=(0,s.useCallback)((async()=>{var e;if(!i.hasPreviousPage)return;o((e=>({...e,currentPage:Math.max(1,e.currentPage-1)})));const t=null===(e=i.members[0])||void 0===e?void 0:e.userId;await m({restartSearch:!1,cursor:t?{previousCursorId:t}:void 0})}),[m,i.members,i.hasPreviousPage]),f=(0,s.useCallback)((e=>{o((t=>({...t,filters:{...t.filters,...e}})))}),[]),x=(0,s.useCallback)((e=>{o((t=>({...t,sortState:e})))}),[]),v=(0,s.useCallback)((e=>{var t;const a=null===(t=i.members[0])||void 0===t?void 0:t.userId;return e&&o((e=>({...e,loading:!0,members:[]}))),g({cursor:a?{currentCursorId:a}:void 0,filters:i.filters,sortState:i.sortState,query:i.query})}),[g,i.members,i.filters,i.sortState,i.query]),y=(0,s.useCallback)((e=>{o((t=>({...t,query:e})))}),[]);return{loadNextPage:p,loadPreviousPage:h,members:i.members,filters:i.filters,loading:i.loading,error:i.error,currentPage:i.currentPage,currentCursor:i.currentCursor,hasNextPage:i.hasNextPage,nextCursor:i.nextCursor,setFilters:f,sortState:i.sortState,setSortState:x,hasPreviousPage:i.hasPreviousPage,previousCursor:i.previousCursor,refreshPage:v,query:i.query,setQuery:y}}({organizationId:t}),i=function(e){let{organizationId:t}=e;const a=(0,b().v3)(),[n,i]=(0,s.useState)(Ah),o=(0,s.useRef)(!1),r=(0,s.useRef)({}),l=(0,s.useRef)(Ah.sortState),d=(0,s.useRef)(Ah.query);function c(e){return"actor"===(null==e?void 0:e.column.id)?{columnName:"actor",direction:e.sortAscending?"ascending":"descending"}:"role"===(null==e?void 0:e.column.id)?{columnName:"role",direction:e.sortAscending?"ascending":"descending"}:void 0}const u=(0,s.useCallback)((async e=>{let{cursor:s,filters:n,sortState:o,query:r}=e;const l=et().q;try{const e=await M().callApi({eventName:"listOrgUsers",environment:a,data:{organizationId:t,cursor:s,filters:n,sort:c(o),query:r,limit:l}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Rt().HB)(e)}i((t=>({...t,members:e.data.members.map(Ch),loading:!1,error:void 0,hasNextPage:Boolean(e.data.nextCursor),nextCursor:e.data.nextCursor,hasPreviousPage:Boolean(e.data.previousCursor),previousCursor:e.data.previousCursor,currentPage:e.data.previousCursor?t.currentPage:Ah.currentPage,currentCursor:s})))}catch(d){const e=(0,As().A)(d);i((t=>({...t,loading:!1,error:e})))}}),[a,t]),g=(0,s.useCallback)((async e=>{let{restartSearch:a,cursor:s}=e;if(!t)return;let o=n.loading,c=n.error;a&&(i((e=>({...Ah,filters:e.filters,sortState:e.sortState,query:e.query}))),o=Ah.loading,c=Ah.error),o||c||(i((e=>({...e,loading:!0,members:[]}))),r.current=n.filters,l.current=n.sortState,d.current=n.query,await u({cursor:s,filters:n.filters,sortState:n.sortState,query:n.query}))}),[t,n,u]);(0,s.useEffect)((()=>{!o.current&&Boolean(t)&&(g({restartSearch:!0}),o.current=!0)}),[t,g]),(0,s.useEffect)((()=>{Ze().n4(r.current,n.filters)||g({restartSearch:!0})}),[n.filters,g]),(0,s.useEffect)((()=>{Ze().n4(l.current,n.sortState)||g({restartSearch:!0})}),[n.sortState,g]),(0,s.useEffect)((()=>{Ze().n4(d.current,n.query)||g({restartSearch:!0})}),[n.query,g]);const m=(0,s.useCallback)((async()=>{if(n.nextCursor)return i((e=>({...e,currentPage:e.currentPage+1}))),g({restartSearch:!1,cursor:n.nextCursor})}),[g,n.nextCursor]),p=(0,s.useCallback)((async()=>{n.previousCursor&&(i((e=>({...e,currentPage:Math.max(1,e.currentPage-1)}))),await g({restartSearch:!1,cursor:n.previousCursor}))}),[g,n.previousCursor]),h=(0,s.useCallback)((e=>{i((t=>({...t,filters:{...t.filters,...e}})))}),[]),f=(0,s.useCallback)((e=>{i((t=>({...t,sortState:e})))}),[]),x=(0,s.useCallback)((e=>(e&&i((e=>({...e,loading:!0,members:[]}))),u({cursor:n.currentCursor,filters:n.filters,sortState:n.sortState,query:n.query}))),[u,n.filters,n.sortState,n.query,n.currentCursor]),v=(0,s.useCallback)((e=>{i((t=>({...t,query:e})))}),[]);return{loadNextPage:m,loadPreviousPage:p,members:n.members,filters:n.filters,loading:n.loading,error:n.error,currentPage:n.currentPage,currentCursor:n.currentCursor,hasNextPage:n.hasNextPage,nextCursor:n.nextCursor,previousCursor:n.previousCursor,setFilters:h,sortState:n.sortState,setSortState:f,hasPreviousPage:n.hasPreviousPage,refreshPage:x,query:n.query,setQuery:v}}({organizationId:t});return a?i:n}function Ch(e){return{userId:e.id,userEmail:e.email,status:e.status,lastActiveAt:e.lastActiveAt,organizationRole:e.organizationRole,spacesInfo:e.spacesInfo}}const Ih=(0,v().YK)({placeholder:{id:"organizationMemberSubTab.membersSearch.placeholder",defaultMessage:"Search by email or name."},name:{id:"organizationMemberSubTab.sort.name",defaultMessage:"Name"},highestRole:{id:"organizationMemberSubTab.sort.highestRole",defaultMessage:"Highest role"}});function Th(e){let{organizationStore:t,userId:a}=e;const s=(0,b().v3)(),n=(0,i.jsx)(v().sA,{id:"organization.people.members.title",defaultMessage:"Manage members"});return(0,i.jsx)(Gl().D,{breadcrumbs:[{message:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{(0,Yl().i)({environment:s,from:{tabRoute:Jt().kr,properties:{subtab:Jt().DE.Members}},organizationId:t.id,tabRoute:Jt().kr})}},{message:n}],children:(0,i.jsxs)(bl().t,{children:[(0,i.jsx)(Va()._,{title:n,byline:(0,i.jsx)(v().sA,{id:"organization.people.members.byline",defaultMessage:"Add, remove, or change member roles to manage access and collaboration across workspaces."})}),(0,i.jsx)(_h,{organizationStore:t,userId:a})]})})}var kh=function(e){return e.AddNewMembers="add-new-members",e.AddToWorkspace="add-to-workspace",e.RemoveFromWorkspace="remove-from-workspace",e.PromoteToAdmin="promote-to-admin",e.DemoteAdmin="demote-admin",e}(kh||{});function _h(e){let{organizationStore:t,userId:a}=e;const n=(0,v().tz)(),o=(0,b().v3)(),{loadNextPage:r,members:l,loading:d,error:c,setFilters:u,filters:g,setSortState:m,loadPreviousPage:p,currentPage:h,hasPreviousPage:f,hasNextPage:x,refreshPage:y,query:j,setQuery:A}=Mh({organizationId:t.id}),M=(0,s.useMemo)((()=>l.map((e=>e.userId))),[l]),C=(0,S().K8)((()=>t.getOwnerIds()),[t]),{selectedIds:I,handleToggleId:T,handleSelectAllIds:k,handleUnselectAllIds:D}=Ot({allPossibleIds:M}),z=zi({spaceStores:(0,ks().l)()}),{membersSet:P}=Di({organizationId:t.id}),{organizationMemberEmailDomains:R}=(0,s.useContext)(N().D),[B,L]=(0,s.useState)(),E=(0,Hn().F)();function O(){L(void 0)}async function U(){await y(),D()}const F=(0,S().K8)((()=>new Pa),[]),V=(0,S().K8)((()=>{const e=I.map((e=>new(_().LU)(o,{table:w().oo,id:e}).getModel())).filter(Rt().O9);return e.map((e=>({type:"existingUser",value:e,spaceRole:void 0})))}),[o,I]);(0,s.useEffect)((()=>{F.setState({...F.state,inviteTargets:V,inviteRole:"read_and_write",isInviteTargetsEmpty:!1})}),[F,V]);const{inviteTargets:W}=(0,S().K8)((()=>({inviteTargets:F.state.inviteTargets})),[F]),q=[{id:To.id,name:n.formatMessage(Ih.name),type:"title"},{id:ko.id,name:n.formatMessage(Ih.highestRole),type:"text"}],[G,K]=(0,s.useState)(),[Y,Q]=(0,s.useState)(!1),[$,X]=(0,s.useState)();(0,s.useEffect)((()=>{if(!G||0===G.length)return void m(void 0);const e=G[0];switch(e.propertyId){case To.id:m({column:To,sortAscending:"ascending"===e.direction});break;case ko.id:m({column:ko,sortAscending:"ascending"===e.direction})}}),[m,G]);const Z=$??G??[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:E.tableHeader,children:[(0,i.jsxs)("div",{style:E.leftContent,children:[(0,i.jsxs)(Oa,{isOpen:I.length>0,children:[(0,i.jsx)(Ua,{isPrimary:!0,title:(0,i.jsx)(Fa,{itemsSelectedCount:I.length}),onClick:D}),(0,i.jsx)(Ua,{icon:Pt().x,title:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.multiselect.addToWorkspace",defaultMessage:"Add to workspace"}),onClick:()=>L(kh.AddToWorkspace)}),(0,i.jsx)(Ua,{icon:js,title:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.multiselect.removeFromWorkspace",defaultMessage:"Remove from workspace"}),onClick:()=>L(kh.RemoveFromWorkspace)}),(0,i.jsx)(Ua,{disabled:I.filter((e=>C.includes(e))).length>0,disabledTooltipText:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.multiselect.promoteToAdminTooltip",defaultMessage:"Selected members are already organization owners"}),icon:po().g,title:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.multiselect.promoteToAdmin",defaultMessage:"Make organization owner"}),onClick:()=>L(kh.PromoteToAdmin)}),(0,i.jsx)(Ua,{disabled:I.filter((e=>C.includes(e))).length===C.length||I.filter((e=>!C.includes(e))).length>0,disabledTooltipText:I.filter((e=>C.includes(e))).length===C.length?(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.multiselect.demoteFromAdminTooltip.allOrgOwnersSelected",defaultMessage:"You must have at least one organization owner"}):(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.multiselect.demoteFromAdminTooltip.notOrgOwnerSelected",defaultMessage:"Only available for organization owners"}),icon:fo,title:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.multiselect.demoteFromAdmin",defaultMessage:"Downgrade organization owner"}),onClick:()=>L(kh.DemoteAdmin)})]}),(0,i.jsx)(Vn().A,{children:(0,i.jsx)(Wa().e,{preventMultipleSorts:!0,sortProperties:q,isMenuOpen:Y,setIsMenuOpen:Q,onApply:e=>{Q(!1),K(e),X(void 0)},currentSorts:Z})}),Z.length>0?(0,i.jsx)(Fn().he,{}):null,(0,i.jsx)(fn,{setUserRoles:e=>u({roles:e}),selectedUserRoles:g.roles||[],roles:vn}),(0,i.jsx)($s,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.filters.email.title",defaultMessage:"Email"}),emailDomains:R,selectedEmailDomains:g.emailDomains||[],setSelectedEmailDomains:e=>{u({emailDomains:e})}}),(0,i.jsx)(Ui,{selectedSpaceIds:g.spaceIds||[],setSelectedSpaceIds:e=>u({spaceIds:e}),spaceData:z}),(0,i.jsx)(Dp,{selectedAccountStatus:g.userStatus,setSelectedAccountStatus:e=>u({userStatus:e})}),(0,i.jsx)(vh,{selectedLastActiveOption:g.lastActive,setSelectedLastActiveOption:e=>u({lastActive:e})})]}),(0,i.jsxs)("div",{style:E.rightContent,children:[(0,i.jsx)(Ha().x,{appliedSorts:G,openSortPillMenu:e=>{e&&X([{propertyId:e,direction:"ascending"}]),Q(!0)},sortProperties:q}),(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:j,setQueryFilter:A,placeholderText:n.formatMessage(Ih.placeholder)}),(0,i.jsx)(H().A,{onClick:()=>{L(kh.AddNewMembers)},children:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.button.addMembers",defaultMessage:"Add members"})})]})]}),B===kh.AddNewMembers?(0,i.jsx)(pn,{onDismiss:O,organizationStore:t,refreshPage:U}):null,B===kh.AddToWorkspace?(0,i.jsx)(wo,{permissionsInviteStore:F,onDismiss:O,organizationStore:t,refreshPage:U}):null,B===kh.RemoveFromWorkspace?(0,i.jsx)(hn,{permissionsInviteStore:F,onDismiss:O,organizationStore:t,refreshPage:U,membersSpaceIds:Dh({organizationMembers:l,inviteTargets:W})}):null,B===kh.PromoteToAdmin?(0,i.jsx)(Mo,{permissionsInviteStore:F,onDismiss:O,organizationStore:t,refreshPage:U}):null,B===kh.DemoteAdmin?(0,i.jsx)(Ao,{permissionsInviteStore:F,onDismiss:O,organizationStore:t,refreshPage:U}):null,(0,i.jsx)(Ro,{members:l,usersOnLegalHold:P,loading:d,error:c,loadNextPage:r,loadPreviousPage:p,organizationStore:t,currentPage:h,hasPreviousPage:f,hasNextPage:x,refreshPage:y,userId:a,selectedIds:I,onSelectAll:k,onUnselectAll:D,onSelectRow:T})]})}function Dh(e){let{organizationMembers:t,inviteTargets:a}=e;const s=new Set;if(t)for(const n of a){const e=t.find((e=>e.userId===n.value.id));for(const t of(null==e?void 0:e.spacesInfo)??[])s.add(t.spaceId)}return s}var zh=()=>a(802042);function Ph(e){return(0,i.jsx)(Nh,{...e})}function Nh(e){const t=(0,_a().E)({organizationId:e.organizationId}),a=(0,s.useMemo)((()=>e.subtab?function(e){switch(e){case Jt().DE.Members:return Jt().DE.Members;case Jt().DE.Guests:return Jt().DE.Guests;case Jt().DE.Groups:return Jt().DE.Groups;case Jt().DE.ManagedUsers:return Jt().DE.ManagedUsers;default:return Jt().DE.Members}}(e.subtab):void 0),[e.subtab]);if(!t)return null;switch(a){case Jt().DE.Members:return(0,i.jsx)(Th,{organizationStore:t,userId:e.userId});case Jt().DE.Guests:return(0,i.jsx)(Sh,{organizationStore:t});case Jt().DE.Groups:return(0,i.jsx)(sh,{organizationStore:t,groupId:e.groupId});case Jt().DE.ManagedUsers:return(0,i.jsx)(Yp,{organizationStore:t});default:return(0,i.jsx)(Rh,{...e})}}function Rh(e){var t,a,n;let{organizationId:o}=e;const r=(0,b().v3)(),l=(0,_a().E)({organizationId:o}),d=(0,zh().o)({organizationId:o}),{state:c,loading:u}=(0,Oc().j)(),g=function(){const e=(0,ks().l)(),t=(0,s.useMemo)((()=>e.map((e=>e.id))),[e]),{permissionGroupsForSpace:a,loadPermissionGroupsForSpace:n}=(0,s.useContext)(N().D);return(0,s.useEffect)((()=>{for(const e of t)n(e)}),[t,n]),{count:(0,s.useMemo)((()=>t.map((e=>{const t=a[e];return(null==t?void 0:t.length)??0})).reduce(((e,t)=>e+t),0)),[t,a]),loading:(0,s.useMemo)((()=>t.some((e=>void 0===a[e]))),[t,a])}}(),m=(0,S().K8)((()=>c.value?c.value.sampleMemberIds.map((e=>new(_().LU)(r,{table:w().oo,id:e}))):[]),[r,c.value]),p=(0,S().K8)((()=>l?l.getOwnerIds().length:void 0),[l]),h=null===(t=c.value)||void 0===t?void 0:t.memberCount,f=null===(a=c.value)||void 0===a?void 0:a.guestCount,x=g.loading?void 0:g.count,y=(0,le().Z)(),A=(0,j().IS)((e=>({actionContainer:{display:"flex",gap:24,justifyContent:"flex-start",alignItems:"center",height:32},divider:{color:e.stroke.secondary,marginTop:38,marginBottom:-12}})),[]),[M,C]=(0,s.useState)(!1);return l?(0,i.jsxs)(Kl,{children:[(0,i.jsx)(Va()._,{title:(0,i.jsx)(v().sA,{id:"organization.people.title",defaultMessage:"People"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.byline",defaultMessage:"Manage access, permissions, and user accounts. Oversee members, guests, and groups seamlessly."}),bylineWidth:"90%"}),(0,i.jsxs)("div",{style:A.actionContainer,children:[(0,i.jsx)(H().A,{onClick:()=>{C(!0)},children:(0,i.jsx)(v().sA,{id:"organizationMembersSubTab.button.addMembers",defaultMessage:"Add members"})}),(0,i.jsx)(de().t,{users:m,totalMemberCount:h,isLoading:u})]}),(0,i.jsx)(lr().A,{size:1,style:A.divider,dividerColor:A.divider.color}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.title",defaultMessage:"Roles & permissions"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(oe,{title:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.members.title",defaultMessage:"Manage members"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.members.byline",defaultMessage:"Add, remove, or adjust member roles."}),rightContent:Boolean(void 0!==p&&void 0!==h)?(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.members.rightContent",defaultMessage:"{numOwners, plural, one {# org owner} other {# org owners}} · {numMembers, plural, one {# member} other {# members}}",values:{numOwners:p,numMembers:h}}):(0,i.jsx)(re().A,{style:y.longShimmer}),onClick:()=>Bh({environment:r,organizationId:o,tab:Jt().DE.Members})}),(0,i.jsx)(oe,{title:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.guests.title",defaultMessage:"Manage guests"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.guests.byline",defaultMessage:"Invite for page access or upgrade to members for full workspace access."}),rightContent:Boolean(void 0!==f)?(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.guests.rightContent",defaultMessage:"{numGuests, plural, one {# guest} other {# guests}}",values:{numGuests:f}}):(0,i.jsx)(re().A,{style:y.shortShimmer}),onClick:()=>Bh({environment:r,organizationId:o,tab:Jt().DE.Guests})}),(0,i.jsx)(oe,{title:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.groups.title",defaultMessage:"Manage groups"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.groups.byline",defaultMessage:"Add and remove members from permission groups."}),rightContent:Boolean(void 0!==x)?(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.groups.rightContent",defaultMessage:"{numGroups, plural, one {# permission group} other {# permission groups}}",values:{numGroups:x}}):(0,i.jsx)(re().A,{style:y.longShimmer}),onClick:()=>Bh({environment:r,organizationId:o,tab:Jt().DE.Groups})}),(0,i.jsx)(oe,{title:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.accounts.title",defaultMessage:"Manage user accounts"}),byline:(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.accounts.byline",defaultMessage:"Manage user accounts with verified domain emails."}),rightContent:Boolean(void 0!==d.count)?(0,i.jsx)(v().sA,{id:"organization.people.rolesAndPermissions.accounts.rightContent",defaultMessage:"{numUsers} accounts",values:{numUsers:null===(n=d.count)||void 0===n?void 0:n.usersCount}}):(0,i.jsx)(re().A,{style:y.shortShimmer}),onClick:()=>Bh({environment:r,organizationId:o,tab:Jt().DE.ManagedUsers})})]})}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.people.managedAccounts.title",defaultMessage:"Managed accounts"}),content:(0,i.jsx)(Cp,{organizationStore:l})}),(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"organization.people.accountAccess.title",defaultMessage:"Account access"}),content:(0,i.jsx)(Ap,{organizationStore:l})}),M?(0,i.jsx)(pn,{onDismiss:()=>C(!1),organizationStore:l,refreshPage:async()=>Promise.resolve()}):null]}):null}function Bh(e){const{environment:t,organizationId:a,tab:s}=e;(0,Yl().i)({environment:t,from:{tabRoute:Jt().kr},organizationId:a,tabRoute:Jt().kr,properties:{subtab:s}})}function Lh(e){let{organizationStore:t}=e;const{spaceIds:a}=(0,s.useContext)(N().D),n=(0,b().v3)(),o=(0,ks().l)(),r=()=>{(0,Yl().i)({environment:n,from:{tabRoute:Jt().Xe},organizationId:t.id,tabRoute:Jt().Vo,properties:{subtab:Jt().al.Workspaces}})},l=e=>(0,Yl().i)({environment:n,from:{tabRoute:Jt().Xe},organizationId:t.id,tabRoute:Jt().Xe,queryParams:{[pu]:e}});return(0,i.jsxs)(Kl,{children:[(0,i.jsx)(Va()._,{title:(0,i.jsx)(v().sA,{id:"settingsConsole.security.title",defaultMessage:"Security"}),byline:(0,i.jsx)(v().sA,{id:"settingsConsole.security.organizationSettings.landingPage.description",defaultMessage:"Enforce security settings to {workspaceCount, plural, one {the <workspaceslink>1 workspace</workspaceslink>} other {all <workspaceslink>{workspaceCount} workspaces</workspaceslink>}} in your organization. Once enforced, workspace owners will not be able to change them.",values:{workspaceCount:a.length,workspaceslink:e=>(0,i.jsx)(Om().A,{hoverColor:"blue",onClick:r,children:e})}})}),(0,i.jsx)(Eh,{navigateToSettingTab:l,organizationStore:t,spaceStores:o}),(0,i.jsx)(Oh,{navigateToSettingTab:l,organizationStore:t,spaceStores:o}),(0,i.jsx)(Uh,{navigateToSettingTab:l,organizationStore:t,spaceStores:o})]})}function Eh(e){return(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"settingsConsole.security.organizationSettings.pageAndPublishing.title",defaultMessage:"Publishing & pages"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Fh,{config:qc,...e}),(0,i.jsx)(Fh,{config:Kc,...e}),(0,i.jsx)(Fh,{config:Yc,...e})]})})}function Oh(e){return(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"settingsConsole.security.organizationSettings.membersAndGuests.title",defaultMessage:"Members & guests"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Fh,{config:Zc,...e}),(0,i.jsx)(Fh,{config:Xc,...e})]})})}function Uh(e){return(0,i.jsx)(ie,{title:(0,i.jsx)(v().sA,{id:"settingsConsole.security.organizationSettings.integrations.title",defaultMessage:"Integrations"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Fh,{config:Jc,...e}),(0,i.jsx)(Fh,{config:eu,...e})]})})}function Fh(e){var t;let{config:a,navigateToSettingTab:s,organizationStore:n,spaceStores:o}=e;const r=a.getOptions(),l=(0,S().K8)((()=>a.getValueFromOrganization(n)),[n,a]),d=(null===(t=r.find((e=>e.key===l)))||void 0===t?void 0:t.label)??gu,c=(0,S().K8)((()=>o.map((e=>a.getValueFromSpace(e)))),[o,a]),u=Boolean(l&&c.filter((e=>e!==l)).length)?gu:d;return(0,i.jsx)(oe,{title:a.title,byline:a.byline,rightContent:u,onClick:()=>s(a.settingName)})}var Vh=()=>a(529497);function Hh(e){let{selectedValues:t,setSelectedValues:a,options:s}=e;return(0,i.jsx)(Qs().VX,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationSecuritySettingFilter.filters.setting.title",defaultMessage:"Setting"}),pillIcon:u().gearIcon,selectedItems:t,setSelectedItems:a,items:s.map((e=>{let{key:t,label:a,count:s}=e;return{key:t,value:t,title:a,count:s}}))})}function Wh(e){let{selectedValue:t,setSelectedValue:a}=e;return(0,i.jsx)(Qs().G0,{pillTitle:(0,i.jsx)(v().sA,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:x().V,selectedItem:t,setSelectedItem:a,shouldUseCheck:!0,items:[{key:"pending",value:"pending",title:(0,i.jsx)(v().sA,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.pending.title",defaultMessage:"With pending changes only"}),shortTitle:(0,i.jsx)(v().sA,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.pending.shortTitle",defaultMessage:"Changes"})},{key:"custom",value:"custom",title:(0,i.jsx)(v().sA,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.custom.title",defaultMessage:"With custom setting only"}),shortTitle:(0,i.jsx)(v().sA,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.custom.shortTitle",defaultMessage:"Custom setting"})}]})}function qh(e){let{searchQuery:t,setSearchQuery:a,filters:n,setFilters:o,options:r,appliedSorts:l,setAppliedSorts:d,config:c}=e;const u=(0,j().IS)((()=>({leftContent:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px",paddingTop:4},rightContent:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px",minHeight:28,gap:6},tableHeader:{position:"relative",display:"flex",flexDirection:"row"}})),[]),g=[{id:fu.id,name:T().A.formatMessage(hu.name),type:"title"},{id:vu.id,name:T().A.formatMessage(hu.members),type:"number"},{id:xu.id,name:T().A.formatMessage(hu.teams),type:"number"}];Boolean("publish-sites"===c.settingName)&&g.push({id:Su.id,name:T().A.formatMessage(hu.sites),type:"number"});Boolean("guest-invites"===c.settingName)&&g.push({id:bu.id,name:T().A.formatMessage(hu.guests),type:"number"});const[m,p]=(0,s.useState)(!1),[h,f]=(0,s.useState)(),x=h??l??[];return(0,i.jsxs)("div",{style:u.tableHeader,children:[(0,i.jsxs)("div",{style:u.leftContent,children:[(0,i.jsx)(Vn().A,{children:(0,i.jsx)(Wa().e,{sortProperties:g,isMenuOpen:m,setIsMenuOpen:p,onApply:e=>{p(!1),d(e),f(void 0)},currentSorts:x})}),x.length>0?(0,i.jsx)(Fn().he,{}):null,(0,i.jsx)(Wh,{selectedValue:n.workspaceFilter,setSelectedValue:e=>o({...n,workspaceFilter:e})}),(0,i.jsx)(Hh,{selectedValues:n.settingFilter??[],setSelectedValues:e=>o({...n,settingFilter:e.length?e:void 0}),options:r})]}),(0,i.jsxs)("div",{style:u.rightContent,children:[(0,i.jsx)(Ha().x,{appliedSorts:l,openSortPillMenu:e=>{e&&f([{propertyId:e,direction:"ascending"}]),p(!0)},sortProperties:g}),(0,i.jsx)(Et().nv,{mode:Et().Ke.AnimatedSearchButton,query:t,setQueryFilter:a})]})]})}function Gh(e){const{organizationStore:t,spaceStores:a,teamStoresForSpace:n,config:o,hasTeamColumn:r}=e,[l,d]=(0,s.useState)({}),[c,u]=(0,s.useState)(),[g,m]=(0,s.useState)(),{pendingOrgSetting:p,pendingSpaceSettings:h,pendingTeamSettings:f}=(0,s.useContext)(Ec().A),x=Boolean(Object.values(l).filter((e=>(0,Rt().O9)(e))).length),v=(0,S().K8)((()=>function(e){let{config:t,organizationStore:a,spaceStores:s,teamStoresForSpace:n,pendingOrgSetting:i,pendingSpaceSettings:o,pendingTeamSettings:r}=e;const l={};for(const c of t.getOptions())l[c.key]={option:c,count:0};const d=i??t.getValueFromOrganization(a);if(d&&d!==Uc){const e=l[d];e&&(l[d]={...e,count:e.count+1})}for(const c of s){const e=o[c.id]??t.getValueFromSpace(c),a=l[e];if(l[e]={...a,count:a.count+1},t.teamSettingName)for(const s of n[c.id]){const e=r[s.id]??t.getValueFromTeam(s,c),a=l[e];l[e]={...a,count:a.count+1}}}return Object.values(l).map((e=>{let{option:t,count:a}=e;return{...t,count:a}}))}({organizationStore:t,spaceStores:a,config:o,teamStoresForSpace:n,pendingOrgSetting:p,pendingSpaceSettings:h,pendingTeamSettings:f})),[t,a,n,o,p,h,f]);return(0,i.jsxs)("div",{children:[(0,i.jsx)(qh,{appliedSorts:g,setAppliedSorts:m,searchQuery:c,setSearchQuery:u,filters:l,setFilters:d,options:v,config:o}),(0,i.jsx)(Cu,{organizationStore:t,spaceStores:a,teamStoresForSpace:n,hasTeamColumn:r,config:o,rowFilterFn:e=>function(e,t,a){let s=!0;return t&&e.title&&(s=s&&e.title.toLowerCase().includes(t.toLowerCase())),a.workspaceFilter&&("custom"===a.workspaceFilter?s=s&&Boolean(e.parentSettingValue)&&e.parentSettingValue!==e.settingValue:"pending"===a.workspaceFilter?s=s&&e.isPending:(0,Rt().HB)(a.workspaceFilter)),a.settingFilter&&(s=s&&a.settingFilter.includes(e.settingValue)),s}(e,c,l),isFiltered:Boolean(c||x),appliedSorts:null!=g&&g.length?g:[{propertyId:"name",direction:"ascending"}]})]})}function Kh(e){let{organizationStore:t,settingName:a}=e;const n=(0,b().v3)(),o=(0,j().DP)(),{updateCacheWithRecordMap:r}=(0,s.useContext)(P().N),l=t.id,d=function(e){return mu[e]}(a),c=(0,ks().l)(),u=(0,s.useMemo)((()=>c.map((e=>e.id))),[c]),g=Boolean(d.teamSettingName),{teamStores:m}=(0,R().o)(u,!g),{pendingOrgSetting:p,pendingSpaceSettings:h,pendingTeamSettings:f,clearAllPendingSettings:x,hasPendingSecuritySettings:y}=(0,s.useContext)(Ec().A);(0,s.useEffect)((()=>(x(),x)),[x]);const S=(0,s.useCallback)((async()=>{if(y()){const{accept:e}=await(0,Vh().S)(o);if(!e)return;x()}(0,Yl().i)({environment:n,from:{tabRoute:Jt().Xe},organizationId:t.id,tabRoute:Jt().Xe})}),[n,o,x,y,t.id]),w=y(),A=(0,s.useCallback)((async()=>{const e=async function(e){let{environment:t,pendingOrgSetting:a,config:s,organizationId:n,updateCacheWithRecordMap:i}=e;if(!a)return;const o=a===Uc?s.formatUndefinedToSave():s.formatValueToSave(a),r=await M().callApi({eventName:"updateOrganizationSettings",environment:t,data:{organizationId:n,settings:o}});return"success"===r.type&&i({data:r.data}),r}({environment:n,pendingOrgSetting:p,config:d,organizationId:l,updateCacheWithRecordMap:r}),t=tt().lX(u,et().O,(async e=>async function(e){let{environment:t,pendingSpaceSettings:a,pendingTeamSettings:s,spaceId:n,teamStoresForSpace:i,config:o,updateCacheWithRecordMap:r}=e;const l=function(e){let t,{pendingSpaceSettings:a,spaceId:s,config:n}=e;return a[s]&&(t=n.formatValueToSave(a[s])),t}({pendingSpaceSettings:a,spaceId:n,config:o}),d=function(e){let{pendingTeamSettings:t,config:a,teams:s}=e;const n=[];for(const i of s){const e=t[i.id];e&&n.push({teamId:i.id,...a.formatValueToSave(e)})}return n.length?n:void 0}({pendingTeamSettings:s,config:o,teams:i[n]});if(l||d){const e=await M().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:t,data:{spaceId:n,spaceSettings:l,teamSettings:d}});return"success"===e.type&&r({data:e.data}),e}}({environment:n,pendingSpaceSettings:h,pendingTeamSettings:f,spaceId:e,teamStoresForSpace:m,config:d,updateCacheWithRecordMap:r})));!function(e){let{orgResponse:t,spaceResponses:a}=e;const s=(null==a?void 0:a.find((e=>"failed"===(null==e?void 0:e.type))))??t;"failed"===(null==s?void 0:s.type)?C().f1((0,I().Hu)(T().A.getIntl(),s)):ot().D6({label:(0,i.jsx)(v().sA,{id:"organizationSecuritySettingPage.saveSettings.success",defaultMessage:"Successfully saved all settings"})})}({orgResponse:await e,spaceResponses:await t}),x()}),[n,l,d,p,f,h,x,u,m,r]);return(0,i.jsx)(Gl().D,{breadcrumbs:[{onClick:S,message:(0,i.jsx)(v().sA,{id:"organizationSecuritySettingPage.breadcrumb.goBack",defaultMessage:"Security"})},{message:d.title}],headerRight:(0,i.jsx)(Q,{onCancel:x,onSave:A,disabled:!w,saveButtonText:(0,i.jsx)(v().sA,{id:"organizationSecuritySettingPage.saveChanges",defaultMessage:"Save changes"}),isLarge:!0}),children:(0,i.jsxs)(bl().t,{children:[(0,i.jsx)(Va()._,{title:d.title,byline:d.byline}),(0,i.jsx)(Gh,{organizationStore:t,spaceStores:c,teamStoresForSpace:m,hasTeamColumn:g,config:d})]})})}function Yh(e){let{organizationId:t,queryParams:a}=e;const s=(0,_a().E)({organizationId:t}),n=a[pu],o=(0,Rt().O)(mu,n)?n:void 0;return s?o?(0,i.jsx)(Kh,{settingName:o,organizationStore:s}):(0,i.jsx)(Lh,{organizationStore:s}):null}const Qh={general:()=>!0,security:()=>!0,people:()=>!0,data_and_compliance:e=>{let{features:t}=e;return t.organization_console_new_data_compliance_view_enabled??!1},audit_log:e=>{let{features:t}=e;return!t.organization_console_new_data_compliance_view_enabled},analytics:e=>{let{features:t}=e;return t.organization_console_ga_enabled??!1},content_search:()=>!1},$h="group-id",Xh={general:{tab:{icon:u().gearIcon,name:(0,i.jsx)(v().sA,{id:"settingsConsole.organization.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(yp,{subtab:e.properties.subtab,...e})},security:{tab:{icon:g().h,name:(0,i.jsx)(v().sA,{id:"settingsConsole.organization.tabNames.security",defaultMessage:"Security"})},scene:e=>(0,i.jsx)(Yh,{...e})},people:{tab:{icon:m().F,name:(0,i.jsx)(v().sA,{id:"settingsConsole.organization.tabNames.people",defaultMessage:"People"})},scene:e=>(0,i.jsx)(Ph,{subtab:e.properties.subtab,userId:e.queryParams.userId,groupId:e.queryParams[$h],...e})},data_and_compliance:{tab:{icon:o,name:(0,i.jsx)(v().sA,{id:"settingsConsole.organization.tabNames.dataAndCompliance",defaultMessage:"Data & Compliance"})},scene:e=>(0,i.jsx)(qd,{subtab:e.properties.subtab,spaceId:e.queryParams[Zh],...e})},audit_log:{tab:{icon:r().n,name:(0,i.jsx)(v().sA,{id:"settingsConsole.organization.tabNames.audit_log",defaultMessage:"Audit log"})},scene:e=>(0,i.jsx)(hd,{...e,spaceId:e.queryParams[Zh]})},content_search:{tab:{icon:c,name:(0,i.jsx)(v().sA,{id:"settingsConsole.organization.tabNames.contentSearch",defaultMessage:"Content search"})},scene:e=>(0,i.jsx)(Vd,{spaceId:e.queryParams[Zh],...e})},analytics:{tab:{icon:a(489538).o,name:(0,i.jsx)(v().sA,{id:"settingsConsole.organization.tabNames.contentAnalytics",defaultMessage:"Analytics"})},scene:e=>(0,i.jsx)(Fg,{spaceId:e.queryParams[Zh],subtab:e.properties.subtab,...e})}},Zh="space-id",Jh={general:()=>!0,workspaces:()=>!0,groups:()=>!0,audit_log:()=>!0},ef={general:{tab:{icon:u().gearIcon,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleUserView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(Rc,{...e})},workspaces:{tab:{icon:x().V,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleUserView.tabNames.workspaces",defaultMessage:"Workspaces"})},scene:e=>(0,i.jsx)(qu,{...e})},groups:{tab:{icon:f,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleUserView.tabNames.groups",defaultMessage:"Groups"})},scene:e=>(0,i.jsx)(Pu,{...e})},audit_log:{tab:{icon:r().n,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleUserView.tabNames.auditLog",defaultMessage:"Audit log"})},scene:e=>(0,i.jsx)(lc,{...e})}},tf={general:()=>!0,members:()=>!0,teamspaces:()=>!0,pages:()=>!0},af={general:{tab:{icon:u().gearIcon,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleGroupView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(zr,{organizationId:e.organizationId,membersState:e.membersState,teamsState:e.teamsState,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal})},members:{tab:{icon:m().F,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleGroupView.tabNames.members",defaultMessage:"Members"})},scene:e=>(0,i.jsx)(Hr,{organizationId:e.organizationId,membersState:e.membersState,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal})},teamspaces:{tab:{icon:x().V,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleGroupView.tabNames.teamspaces",defaultMessage:"Teamspaces"})},scene:e=>(0,i.jsx)(li,{organizationId:e.organizationId,teamsState:e.teamsState,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal})},pages:{tab:{icon:l().d,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleGroupView.tabNames.pages",defaultMessage:"Pages"})},scene:e=>(0,i.jsx)(el,{organizationId:e.organizationId,groupPageStores:e.groupPageStores,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal,removePagesFromGroup:e.removePagesFromGroup})}},sf={general:()=>!0,members:()=>!0,guests:()=>y().default.checkGate({gateName:"organization_console_ga_enabled"}),groups:()=>y().default.checkGate({gateName:"organization_console_ga_enabled"}),teamspaces:()=>y().default.checkGate({gateName:"organization_console_ga_enabled"})},nf={general:{tab:{icon:u().gearIcon,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleWorkspaceView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(zt,{...e})},members:{tab:{icon:m().F,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleWorkspaceView.tabNames.members",defaultMessage:"Members"})},scene:e=>(0,i.jsx)(Dn,{...e})},guests:{tab:{icon:h,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleWorkspaceView.tabNames.guests",defaultMessage:"Guests"})},scene:e=>(0,i.jsx)(rn,{...e})},groups:{tab:{icon:f,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleWorkspaceView.tabNames.groups",defaultMessage:"Groups"})},scene:e=>(0,i.jsx)(Ss,{...e})},teamspaces:{tab:{icon:x().V,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleWorkspaceView.tabNames.teamspaces",defaultMessage:"Teamspaces"})},scene:e=>(0,i.jsx)(ji,{...e})}},of={general:()=>!0,members:()=>!0,browse_content:()=>!1},rf={general:()=>!0,members:()=>!0,browse_content:()=>!0},lf={general:{tab:{icon:u().gearIcon,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleLegalHoldView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(Cr,{...e})},members:{tab:{icon:x().V,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleLegalHoldView.tabNames.members",defaultMessage:"Members"})},scene:e=>(0,i.jsx)(ir,{...e})},browse_content:{tab:{icon:c,name:(0,i.jsx)(v().sA,{id:"settingsConsole.singleLegalHoldView.tabNames.browseContent",defaultMessage:"Browse content"})},scene:e=>(0,i.jsx)(oo,{...e})}}},221723:(e,t,a)=>{a.d(t,{iK:()=>n,p8:()=>s});const s=28,n=24},223544:(e,t,a)=>{a.d(t,{FS:()=>q,Jo:()=>H,tp:()=>W,uU:()=>U,v8:()=>V});a(944114),a(898992),a(354520),a(672577),a(581454);var s=a(296540),n=()=>a(56366),i=()=>a(401497),o=()=>a(784892),r=()=>a(12193),l=()=>a(888867),d=()=>a(797561),c=()=>a(96689),u=()=>a(695608),g=()=>a(959013),m=()=>a(534177),p=()=>a(56394),h=()=>a(972435),f=()=>a(722872),x=()=>a(698449),v=()=>a(962730),y=()=>a(377586),b=()=>a(351360),S=()=>a(605402),j=()=>a(970585),w=()=>a(493823),A=()=>a(760217),M=()=>a(625830),C=()=>a(928600),I=()=>a(939740),T=()=>a(14235),k=()=>a(204063),_=()=>a(614505),D=()=>a(228927),z=()=>a(89924),P=()=>a(125565),N=()=>a(453697),R=()=>a(484595),B=()=>a(806754),L=()=>a(881690),E=()=>a(297780),O=a(474848);const U=(0,g().YK)({usersPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersPlaceholder",defaultMessage:"Search for users..."},usersAndGroupsPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersAndGroupsPlaceholder",defaultMessage:"Search for users and groups..."}}),F=10,V={key:"no-results",action:()=>{},render:e=>(0,O.jsx)(P().A,{isSecondaryColor:!0,style:{width:"100%",margin:"8px 12px"},...e,children:(0,O.jsx)(g().sA,{id:"adminContentSearchTab.pagesTable.filters.users.noResultsMessage",defaultMessage:"No results found."})})};function H(e){let{userStores:t,title:a,selectedItems:i,setSelectedItems:c,onMenuClose:H,isMultiSelect:K,includePermissionGroups:Y,guestUserIdSet:Q}=e;const $=(0,g().tz)(),X=(0,n().uB)(void 0,j().A),Z=G(),[J,ee]=(0,s.useState)(F),[te,ae]=(0,s.useState)(!1),[se,ne]=(0,s.useState)(""),ie=t.length,oe=(0,n().K8)((()=>b().default.state.currentSpaceStore),[]),re=(0,s.useMemo)((()=>i.map((e=>{let{id:t}=e;return t}))),[i]),le=(0,n().K8)((()=>Y?S().A.state.permissionGroupsAndMemberCounts.map((e=>e.group)):[]),[Y]),de=(0,n().K8)((()=>re.map((e=>t.find((t=>t.id===e)))).filter(m().O9)),[re,t]),ce=(0,n().K8)((()=>re.map((e=>le.find((t=>t.group_id===e)))).filter(m().O9)),[re,le]);function ue(){ee(F),ae(!1),ne(""),H()}function ge(){ne(""),c([])}function me(e){e<5&&J<ie&&ee(J+F)}function pe(e){if(K){return re.includes(e.id)?[...i.filter((t=>{let{id:a}=t;return a!==e.id}))]:[...i,e]}return re.includes(e.id)?[]:[e]}function he(e){const t=pe({id:e,type:"user"});c(t),ne("")}function fe(e){const t=pe({id:e,type:"permission_group"});c(t),ne("")}const xe=(0,s.useCallback)((e=>{ne(e.target.value)}),[]),ve=(0,n().K8)((()=>de.map((e=>{const t=(0,u().c6)($,e.getModel()),a=!!Q&&Q.has(e.id);return(0,O.jsx)(L().A,{isSingle:!0,format:o().NY.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=re.filter((t=>t!==e.id)).map((e=>({id:e,type:"user"})));c(t)},style:a?Z.guestPillContainer:Z.pillContainer,value:(0,O.jsxs)("div",{style:Z.pillContents,children:[a?(0,r().D)(Z.guestIcon):(0,O.jsx)(N().A,{userStore:e,size:16}),(0,O.jsx)(P().A,{style:Z.pillText,children:t})]})},e.id)}))),[re,de,c,Q,Z,$]),ye=(0,n().K8)((()=>ce.map((e=>{const t=x().Pf({intl:$,groupName:e.name});return(0,O.jsx)(L().A,{isSingle:!0,format:o().NY.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=re.filter((t=>t!==e.group_id)).map((e=>({id:e,type:"permission_group"})));c(t)},style:Z.pillContainer,value:(0,O.jsxs)("div",{style:Z.pillContents,children:[(0,O.jsx)(_().A,{disabled:!0,icon:e.icon&&oe?{pointer:oe.pointer,icon:e.icon}:void 0,size:14,isEmptyPage:!1,title:t,defaultIcon:(0,l().s)(Z.defaultGroupIconPill),style:Z.groupIconSpacing}),(0,O.jsx)(P().A,{style:Z.pillText,children:t})]})},e.id)}))),[re,ce,c,Z,oe,$]);const be=(0,O.jsx)(p().A,{on:re.length>0,icon:(0,d().E)(Z.icon),title:a,onClick:()=>ae(!0)});return(0,O.jsx)(B().A,{children:(0,O.jsx)(T().Ay,{popupType:y().n.Popup,placementToOrigin:v().W.Bottom,alignmentToOrigin:v().C.Start,open:te,render:function(){const e=[];for(const i of t){var a;const t=(0,u().c6)($,i.getModel()),s=!!Q&&Q.has(i.id);(t.toLocaleLowerCase().includes(se)||null!==(a=i.getEmail())&&void 0!==a&&a.toLocaleLowerCase().includes(se))&&e.push({key:i.id,action:()=>he(i.id),render:e=>(0,O.jsx)(A().A,{...e,icon:K?(0,O.jsx)(M().A,{checked:re.includes(i.id),onClick:()=>he(i.id),size:16}):(0,O.jsx)(R().A,{isSelected:re.includes(i.id)}),focused:!1,title:(0,O.jsx)(W,{userStore:i,isGuest:s})})})}const s=[];for(const t of le){x().Pf({intl:$,groupName:t.name}).toLocaleLowerCase().includes(se)&&s.push({key:t.id,action:()=>fe(t.group_id),render:e=>(0,O.jsx)(A().A,{...e,icon:K?(0,O.jsx)(M().A,{checked:re.includes(t.group_id),onClick:()=>fe(t.group_id),size:16}):(0,O.jsx)(R().A,{isSelected:re.includes(t.group_id)}),focused:!1,title:(0,O.jsx)(q,{group:t,spaceId:null==oe?void 0:oe.id})})})}const n=[...e,...s],o={key:"userOptions",items:n.length>0?n.slice(0,J):[V],render:e=>(0,O.jsx)(z().A,{...e,title:null,loading:!1})};return(0,O.jsxs)("div",{style:Z.container,children:[(0,O.jsx)(E().A,{focus:!0,value:se,style:Z.input,placeholder:h().A.formatMessage(Y?U.usersAndGroupsPlaceholder:U.usersPlaceholder),onChange:xe,onRemoveLastToken:()=>{const e=i.slice(0,-1);c(e)},tokens:[...ve,...ye]}),(0,O.jsxs)(C().A,{menuType:f().gu.Popup,header:null,maxHeight:250,width:300,children:[(0,O.jsx)(I().Ay,{type:I().Oh.Vertical,store:X,initialFocus:0,sections:[o]}),(0,O.jsx)(D().A,{onChange:me})]}),(0,O.jsxs)(z().A,{topBorder:!0,style:Z.footer,children:[(0,O.jsx)(w().p,{onClick:ge,children:(0,O.jsx)(g().sA,{id:"adminContentSearchTab.pagesTable.filters.users.clearButton",defaultMessage:"Clear"})}),(0,O.jsx)(k().A,{onClick:ue,children:(0,O.jsx)(g().sA,{id:"adminContentSearchTab.pagesTable.filters.users.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:ue,keepFocus:!0,origin:be,preventScaleTransition:!0,originGap:8})})}function W(e){let{userStore:t,isGuest:a}=e;const s=(0,g().tz)(),i=G(),o=(0,n().K8)((()=>t.getDisplayName(s)),[t,s]);return(0,O.jsxs)("div",{style:i.optionContainer,children:[(0,O.jsx)(N().A,{userStore:t,size:24,style:i.optionAvatar}),(0,O.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,O.jsx)(P().A,{style:i.optionTitle,children:o}),(0,O.jsx)(P().A,{style:i.optionCaption,children:a?(0,O.jsx)(g().sA,{id:"adminContentSearchTab.pagesTable.filters.users.guestCaption",defaultMessage:"Guest"}):(0,O.jsx)(g().sA,{id:"adminContentSearchTab.pagesTable.filters.users.memberCaption",defaultMessage:"Member"})})]})]})}function q(e){let{group:t,spaceId:a}=e;const s=G(),n=(0,g().tz)(),i=x().Pf({intl:n,groupName:t.name});return(0,O.jsxs)("div",{style:s.optionContainer,children:[(0,O.jsx)(_().A,{disabled:!0,icon:t.icon&&a?{pointer:{id:a,table:c().NX},icon:t.icon}:void 0,size:22,isEmptyPage:!1,title:i,defaultIcon:(0,l().s)(s.defaultGroupIcon),style:s.groupIconSpacing}),(0,O.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,O.jsx)(P().A,{style:s.optionTitle,children:i}),(0,O.jsx)(P().A,{style:s.optionCaption,children:(0,O.jsx)(g().sA,{id:"adminContentSearchTab.pagesTable.filters.users.groupCaption",defaultMessage:"Group"})})]})]})}function G(){return(0,i().IS)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:8},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginRight:4,fill:"currentColor"},defaultGroupIcon:{height:22,width:22,color:e.mediumTextColor,fill:"currentColor"},defaultGroupIconPill:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"},groupIconSpacing:{marginRight:8},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},guestPillContainer:{margin:"0px 6px 6px 0px",background:e.guestTokenBackground,height:20},guestIcon:{height:16,width:16,color:e.guestIconColor},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},pillText:{marginLeft:4},optionTitle:{display:"block"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"}})),[])}},229907:(e,t,a)=>{a.d(t,{lT:()=>d});a(944114);var s=()=>a(244641),n=()=>a(720665),i=()=>a(416845);const o=7;function r(e){if(void 0===e)return s().c9.utc();const t={zone:"utc"};return"number"==typeof e?s().c9.fromMillis(e,t):s().c9.fromISO(e,t)}function l(e,t){const a=t?r(t):s().c9.utc(),n=r(e??function(e){const{days:t,endDate:a,startDate:n}=e;if(t<=0)throw new(i().yI)("Days must be greater than 0");const o=a?r(a):s().c9.utc();if(!o.isValid)throw new(i().yI)(`endDate ${a} is in an invalid format`);const l=n?r(n).toMillis():0,d=o.minus({days:t-1}).toMillis();return Math.max(d,l)}({days:o,endDate:t}));if(!n.isValid)throw new(i().yI)(`startDate ${e} is in an invalid format`);if(!a.isValid)throw new(i().yI)(`endDate ${t} is in an invalid format`);if(n>a)throw new(i().yI)(`startDate ${e} => ${n.toISO()} is after endDate ${t} => ${a.toISO()}`);return{startTimestamp:n.toMillis(),endTimestamp:a.toMillis()}}function d(e,t){const{startTimestamp:a,endTimestamp:s}=l(e,t),i=[];let o=a;for(;o<=s;)i.push(r(o).toISODate()),o+=n().nD;return i}},230357:(e,t,a)=>{a.d(t,{A:()=>r,_:()=>l});a(581454),a(814603),a(147566),a(198721);var s=()=>a(604995),n=()=>a(348564),i=()=>a(30731);class o extends(()=>a(757695))().default{getInitialState(){return{pageNum:1,pageSize:10,timeRange:{},actors:[],actions:[],sortOrder:n().K7.CreatedNewest}}}const r=new o;function l(e){const{timeRange:t,actors:a,actions:o,sortOrder:r}=e,l=new URLSearchParams;return t.starting&&l.append("starting",`${s().C6.toUnixMs(t.starting)}`),t.ending&&l.append("ending",`${s().C6.toUnixMs(t.ending)}`),(null==a?void 0:a.length)>0&&l.append("actors",a.map(i().Ht).join(",")),(null==o?void 0:o.length)>0&&l.append("actions",o.join(",")),l.append("sort",`${r||n().K7.CreatedNewest}`),l.toString()}},233510:(e,t,a)=>{a.d(t,{Z:()=>c,c:()=>d});var s=()=>a(56366),n=()=>a(979340),i=()=>a(809730),o=()=>a(351360),r=()=>a(807778),l=()=>a(972418);function d(e){const{currentSpaceStore:t}=(0,s().O$)(o().default),a=e??t;return(0,s().K8)((()=>{const e=(null==a?void 0:a.getSubscriptionTier())??"free";return(0,n().rV)(e,"business")}),[a])}function c(){const{currentSpaceStore:e}=(0,s().O$)(o().default),t=(0,l().lh)({spaceId:null==e?void 0:e.id});return(0,s().K8)((()=>{const a=(null==e?void 0:e.getSubscriptionTier())??"free";return!(0,r().hG)()&&(0,n().rV)(a,"business")||(0,i().e)({billingData:t})}),[e,t])}},234748:(e,t,a)=>{a.d(t,{I:()=>n});a(296540);var s=a(474848);const n=(0,a(340498).wt)("settingsWorkspace",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M11.757 16.94v-1.333h4.812q.178 0 .267-.088.09-.09.089-.267v-7.95q0-.179-.09-.267-.087-.09-.266-.089h-4.327V5.62h4.703q.609 0 .957.383.35.376.349 1.032v8.484q0 .655-.349 1.039-.348.382-.957.382zm2.659-7.417q-.219 0-.219-.225V8.252q0-.232.219-.232h1.08q.226 0 .226.232v1.046q0 .225-.226.225zm0 2.53q-.219 0-.219-.233v-1.046q0-.232.219-.232h1.08q.226 0 .226.232v1.046q0 .233-.226.233zm0 2.522q-.219 0-.219-.232v-1.046q0-.226.219-.226h1.08q.226 0 .226.226v1.046q0 .232-.226.232zm-12.674.944V3.624q0-.663.349-1.039.349-.383.964-.383h8.627q.607 0 .957.383.355.376.355 1.039v11.895q0 .655-.355 1.039-.35.382-.957.382H3.055q-.616 0-.964-.382-.35-.384-.349-1.04Zm1.333-.267q0 .177.09.267.087.088.266.088h7.875q.177 0 .266-.088.09-.09.09-.267V3.897q0-.185-.09-.273-.089-.09-.266-.089H3.43q-.179 0-.267.089-.09.09-.089.273v11.355Zm1.853.991v-2.618q0-.437.205-.65.205-.218.622-.218H8.98q.417 0 .623.219.204.21.205.649v2.618h-1.04v-2.27q0-.204-.211-.204h-2.38q-.21 0-.211.205v2.27h-1.04Zm.198-9.755q-.26 0-.26-.273V4.943q0-.273.26-.273h1.306q.273 0 .273.273v1.272q0 .273-.273.273zm3.172 0q-.267 0-.267-.273V4.943q0-.273.267-.273h1.306q.266 0 .266.273v1.272q0 .273-.266.273zM5.126 9.106q-.26 0-.26-.273V7.568q0-.273.26-.273h1.306q.273 0 .273.273v1.265q0 .273-.273.273zm3.172 0q-.267 0-.267-.273V7.568q0-.273.267-.273h1.306q.266 0 .266.273v1.265q0 .273-.266.273zm-3.172 2.625q-.26 0-.26-.28v-1.264q0-.274.26-.274h1.306q.273 0 .273.274v1.264q0 .28-.273.28zm3.172 0q-.267 0-.267-.28v-1.264q0-.274.267-.274h1.306q.266 0 .266.274v1.264q0 .28-.266.28z"})})},236527:(e,t,a)=>{a.d(t,{_:()=>g,a:()=>m});a(296540);var s=()=>a(56366),n=()=>a(401497),i=()=>a(798880),o=()=>a(959013),r=()=>a(351360),l=()=>a(630116),d=()=>a(566468),c=()=>a(453697),u=a(474848);function g(e){let{userId:t}=e;const a=(0,o().tz)(),g=(0,n().IS)((e=>({iconStyle:{color:e.lightTextColor,fontWeight:500}})),[]),p=(0,s().K8)((()=>{const e=r().default.state.currentSpaceStore;if(!e)return;const s=l().LU.createChildStore(e,{table:i().oo,id:t});return{userStore:s,isReady:s.isReady(),userName:s.getDisplayName(a),userEmail:s.getEmail()}}),[t,a]);return null!=p&&p.isReady?(0,u.jsx)(d().s7,{useThinTitle:!0,title:p.userName,byline:p.userEmail,icon:(0,u.jsx)(c().A,{size:28,userStore:p.userStore,iconStyle:g.iconStyle})}):(0,u.jsx)(m,{})}function m(e){const t=(0,n().IS)((()=>({icon:{borderRadius:"100%",height:e.iconSize??28,width:e.iconSize??28,marginLeft:-4}})),[e.iconSize]);return(0,u.jsx)(d().mf,{includeByline:!0,includeIcon:!0,iconStyles:t.icon})}},237824:(e,t,a)=>{a.d(t,{A:()=>z});a(944114),a(898992),a(908872);var s=a(296540),n=()=>a(56366),i=()=>a(401497),o=()=>a(845960),r=()=>a(326346),l=()=>a(467730),d=()=>a(200582),c=()=>a(959013),u=()=>a(100622),g=()=>a(496603),m=()=>a(534177),p=()=>a(56394),h=()=>a(493823),f=()=>a(760217),x=()=>a(625830),v=()=>a(623580),y=()=>a(928600),b=()=>a(939740),S=()=>a(204063),j=()=>a(89924),w=()=>a(125565),A=()=>a(47373),M=()=>a(722872),C=()=>a(962730),I=()=>a(508496),T=()=>a(702796),k=a(474848);const _={page:(0,k.jsx)(c().sA,{id:"auditlogEventFilter.categoryName.page",defaultMessage:"Page"}),space:(0,k.jsx)(c().sA,{id:"auditlogEventFilter.categoryName.workspace",defaultMessage:"Workspace"}),team:(0,k.jsx)(c().sA,{id:"auditlogEventFilter.categoryName.team",defaultMessage:"Teamspace"}),account:(0,k.jsx)(c().sA,{id:"auditlogEventFilter.categoryName.account",defaultMessage:"Account"}),organization:(0,k.jsx)(c().sA,{id:"auditlogEventFilter.categoryName.organization",defaultMessage:"Organization"}),form:(0,k.jsx)(c().sA,{id:"auditlogEventFilter.categoryName.form",defaultMessage:"Form"})};function D(e){let{totalNumEventsForCategory:t,numSelectedForCategory:a,category:s,categoryOpen:n,shouldShowCount:o,onCategoryClick:r,onCategoryToggleClick:l,...d}=e;const u=(0,i().IS)((e=>({textWrapperStyle:{margin:0},title:{margin:0,display:"flex",alignItems:"center"},categoryText:{marginLeft:8,fontWeight:600},categorySubHeader:{marginLeft:6},toggleButton:{marginLeft:2,marginRight:2}})),[]);let g,m;return g=o?t===a?(0,k.jsx)(c().sA,{id:"auditlogEventFilter.allEventsSelected",defaultMessage:"({totalNum} events)",values:{totalNum:t}}):(0,k.jsx)(c().sA,{id:"auditlogEventFilter.numEventsSelected",defaultMessage:"({numSelected} of {totalNum} events selected)",values:{numSelected:a,totalNum:t}}):null,m=t===a||0!==a&&"partial",(0,k.jsx)(f().A,{...d,className:"notranslate",textWrapperStyle:u.textWrapperStyle,focused:!1,title:(0,k.jsxs)("div",{style:u.title,children:[(0,k.jsx)(T().A,{style:u.toggleButton,open:n,onClick:l,isSidebar:!1,fill:!1,icon:"chevron"}),(0,k.jsx)(x().A,{checked:m,size:14,checkSize:8,onClick:r}),(0,k.jsx)(w().A,{style:u.categoryText,children:_[s]}),(0,k.jsx)(w().A,{isSecondaryColor:!0,style:u.categorySubHeader,children:g})]})})}const z=function(e){let{onChange:t,lastSelectionStore:o,componentStore:r}=e;const l=(0,i().DP)(),d=(0,n().uB)(void 0,a(970585).A),u=(0,n().K8)((()=>r.state.isMenuOpen),[r]),g=(0,s.useCallback)((()=>(0,k.jsx)(U,{onChange:t,componentStore:r,lastSelectionStore:o,menuListStore:d})),[t,r,o,d]),m=(0,s.useCallback)((()=>function(e,t){e.setState({...e.state,actionSelections:{...t.state.actionSelections}}),E(!1,e)}(r,o)),[r,o]),p=R(l),h=(0,k.jsx)(c().sA,{id:"auditlogEventFilter.title",defaultMessage:"Event"}),f=(0,k.jsx)(O,{componentStore:r,title:h});return(0,k.jsx)(a(806754).A,{marginAfter:!1,children:(0,k.jsx)(a(14235).Ay,{popupType:a(377586).n.Popup,placementToOrigin:C().W.Bottom,alignmentToOrigin:C().C.Start,open:u,render:g,onDismiss:m,keepFocus:!0,origin:f,preventScaleTransition:!0,style:p.popup})})};function P(e){var t;return g().oE([e.key,null===(t=e.localizedActionName)||void 0===t?void 0:t.toLowerCase()]).join(" ")}function N(e){let{totalNumSelected:t,totalNumEvents:a}=e;const s=(0,i().IS)((e=>({container:{background:u().Ay.diffBackground,color:u().Ay.diffTextColor,paddingInline:6,margin:8,marginBottom:0,borderRadius:4,fontWeight:510,width:"fit-content"},textWrapperStyle:{marginLeft:8}})),[]);return(0,k.jsx)(w().A,{style:s.container,children:(0,k.jsx)(c().sA,{id:"auditLogEventFilter.selectedPill",defaultMessage:"{totalNumSelected} of {totalNumEvents} selected",values:{totalNumSelected:t,totalNumEvents:a}})})}function R(e){return{container:{minWidth:460},searchInput:{padding:8,borderBottomLeftRadius:0,borderBottomRightRadius:0,boxShadow:"none",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.lightDividerColor},popup:{paddingBottom:8}}}function B(e){const{renderGroup:t,shouldShowCount:a,totalNumEventsForCategory:s,numSelectedForCategory:n,componentStore:i}=e,o=t.category,r=()=>{i.toggleCategorySelection(t)},l=()=>{i.selectCategorySelection(t)};return{key:o,action:r,render:e=>(0,k.jsx)(D,{totalNumEventsForCategory:s,numSelectedForCategory:n,category:o,categoryOpen:i.state.categoryToggleOpen[o],shouldShowCount:a,onCategoryToggleClick:r,onCategoryClick:l,...e}),localizedActionName:null,actionName:null}}function L(e){const{actionName:t,renderGroup:a,componentStore:s,intl:n}=e,i=()=>{s.selectActionName(t,a)},o=n.formatMessage(r().T0[t]);return{key:t,action:i,render:e=>(0,k.jsx)(f().A,{...e,icon:(0,k.jsx)(x().A,{checked:s.state.actionSelections[t],size:14,checkSize:8,onClick:i}),focused:!1,title:o,className:"notranslate",style:{paddingLeft:32},textWrapperStyle:{marginLeft:4}}),actionName:t,localizedActionName:o}}function E(e,t){t.setState({...t.state,isMenuOpen:e})}function O(e){let{title:t,componentStore:a}=e;const s=(0,n().K8)((()=>a.hasActionNameSelected()),[a]);return(0,k.jsx)(p().A,{on:s,icon:(0,d().m)({width:16,marginRight:6,fill:"currentColor"}),title:(0,k.jsx)("span",{children:t}),onClick:()=>{E(!0,a)}})}function U(e){let{onChange:t,componentStore:a,lastSelectionStore:r,menuListStore:d}=e;const u=(0,i().DP)(),g=(0,c().tz)(),p=(0,s.useCallback)((e=>function(e,t){t.updateSearchQuery(e.target.value)}(e,a)),[a]),f=R(u),x=(0,n().K8)((()=>[...(0,m().WP)(o().BU).reduce(((e,t)=>{let[a,s]=t;return I().default.checkGate({gateName:a})?e:[...e,...s]}),[]),...(0,A().Qd)()?[]:["team_guest_default_permission_updated"],...(0,A().nJ)()?[]:["guest_membership_requests_toggled"]]),[]),{actionSelections:w,categoryToggleOpen:C,renderOrder:T,searchQuery:_}=(0,n().K8)((()=>{const{actionSelections:e,categoryToggleOpen:t,renderOrder:s,searchQuery:n}=a.state;return{actionSelections:e,categoryToggleOpen:t,renderOrder:s,searchQuery:n}}),[a]),D=[];let z=0,O=0;for(const s of T){const e=s.category,t=[];let n=0;for(const i of s.orderedActions)x.includes(i)||(t.push(L({actionName:i,renderGroup:s,intl:g,componentStore:a})),w[i]&&n++);if(z+=n,O+=t.length,D.push(B({renderGroup:s,shouldShowCount:!Boolean(_),totalNumEventsForCategory:t.length,numSelectedForCategory:n,componentStore:a})),C[e])if(_){const e=(0,l().Ay)(_,t,P);D.push(...e)}else D.push(...t)}const U={key:"results",items:D,render:e=>(0,k.jsx)(j().A,{...e,title:null,loading:!1})};return(0,k.jsxs)("div",{style:f.container,children:[(0,k.jsx)(v().A,{style:f.searchInput,placeholder:g.formatMessage({id:"auditlogEventFilter.searchPlaceholder",defaultMessage:"Search for an event"}),onChange:p,value:_,showClearButton:!0}),_&&(0,k.jsx)(N,{totalNumSelected:z,totalNumEvents:O}),(0,k.jsx)(y().A,{menuType:M().gu.Popup,header:null,maxHeight:356,children:(0,k.jsx)(b().Ay,{type:b().Oh.Vertical,store:d,initialFocus:0,sections:[U]})}),(0,k.jsxs)(j().A,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},children:[(0,k.jsx)(h().p,{onClick:()=>{!function(e){e.clearAllSelections()}(a)},children:(0,k.jsx)(c().sA,{id:"auditlogEventFilter.clearButton",defaultMessage:"Clear"})}),(0,k.jsx)(S().A,{onClick:()=>{!function(e,t,a){const s=t.getAllActionNames(),n=t.getSelectedActionNames();e(s.length===n.length?[]:n),0===n.length&&t.reset(),a.setState({...a.state,actionSelections:{...t.state.actionSelections}}),E(!1,t)}(t,a,r)},children:(0,k.jsx)(c().sA,{id:"auditlogEventFilter.applyButton",defaultMessage:"Apply"})})]})]})}},254437:(e,t,a)=>{a.d(t,{F:()=>n});a(296540);var s=a(474848);const n=(0,a(340498).wt)("mail",{viewBox:"0 0 30 30",svg:(0,s.jsx)("path",{d:"M0,4v22h30V4H0z M17.591,16.33C16.137,17.753,15.819,18,15,18s-1.137-0.247-2.555-1.635L2,6h26L17.591,16.33z M2,8.814 l7.17,7.119L2,21.8V8.814z M2.445,24l8.141-6.661L11,17.75c1.438,1.406,2.281,2.25,4,2.25s2.563-0.844,4-2.25l0.414-0.411L27.555,24 H2.445z M28,21.8l-7.17-5.867L28,8.814V21.8z"})})},254685:(e,t,a)=>{a.d(t,{N:()=>$,A:()=>Q});a(581454);var s=a(296540),n=()=>a(968526),i=()=>a(484714),o=()=>a(56366),r=()=>a(401497),l=()=>a(301608),d=()=>a(959013),c=()=>a(100622),u=()=>a(284371),g=()=>a(76590),m=()=>a(593467),p=()=>a(59976),h=()=>a(972435),f=()=>a(836251),x=()=>a(997583),v=()=>a(962730),y=()=>a(311670),b=()=>a(298697),S=()=>a(859428),j=()=>a(125565),w=()=>a(690197),A=()=>a(5347),M=()=>a(452864),C=()=>a(249117),I=()=>a(655546),T=()=>a(175458),k=()=>a(733815),_=()=>a(188668),D=a(474848);const z=640;function P(e){let{data:t,loading:a,error:s,daysFilter:n,setDaysFilter:i}=e;const[o,c]=(0,x().z)(),g=(0,r().IS)((e=>({title:{fontWeight:u().Wy.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},container:{display:"flex",flexDirection:"column",gap:16},helpInfo:{marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},summaryCard:{height:70},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{activeMembersCount:m,previousActiveMembersCount:p,activeGuestsCount:y,previousActiveGuestsCount:b}=t;return(0,D.jsxs)("div",{style:g.container,ref:o,children:[(0,D.jsxs)("div",{style:g.titleContainer,children:[(0,D.jsxs)(j().A,{style:g.title,children:[(0,D.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userEngagement.title",defaultMessage:"User engagement"}),(0,D.jsx)(S().A,{placement:v().W.Bottom,render:e=>(0,D.jsx)(w().A,{...e,href:(0,f().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:g.helpInfo}),renderTooltip:()=>"all_time"!==n?(0,D.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:h().A.formatMessage(l().Yr[n])}}):(0,D.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,D.jsx)(k().Z,{currentFilter:n,onChangeFilter:i})]}),(0,D.jsxs)(C().xA,{gap:16,children:[(0,D.jsx)(C().LX,{row:1,col:1,children:(0,D.jsx)(T().a,{style:g.summaryCard,loading:a,error:s,title:(0,D.jsx)(d().sA,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,D.jsx)(I()._,{abbreviateNumber:c<z,num:m})}}),byline:void 0!==p?(0,D.jsx)(_().Z,{userType:"members",daysFilter:n,count:m,previousCount:p}):null})}),(0,D.jsx)(C().LX,{row:1,col:2,children:(0,D.jsx)(T().a,{style:g.summaryCard,loading:a,error:s,title:(0,D.jsx)(d().sA,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,D.jsx)(I()._,{abbreviateNumber:c<z,num:y})}}),byline:void 0!==b?(0,D.jsx)(_().Z,{userType:"guests",daysFilter:n,count:y,previousCount:b}):null})})]})]})}a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520);var N=()=>a(187174),R=()=>a(386164),B=()=>a(848538),L=()=>a(449506),E=()=>a(646736),O=()=>a(623742),U=()=>a(351360),F=()=>a(641300),V=()=>a(882690);const H=(0,d().YK)({page_views:{id:"workspaceAnalytics.usersTab.usersTable.pageViews.tooltip",defaultMessage:"Total number of page views for the user across all pages in the workspace"},page_edits:{id:"workspaceAnalytics.usersTab.usersTable.pageEdits.tooltip",defaultMessage:"Total number of page edits for the user across all pages in the workspace"}}),W=(0,d().YK)({user:{id:"spaceAnalyticsUsersTab.column.user",defaultMessage:"User"},page_views:{id:"spaceAnalyticsUsersTab.column.pageViews",defaultMessage:"Page views"},page_edits:{id:"spaceAnalyticsUsersTab.column.pageEdits",defaultMessage:"Page edits"},last_active:{id:"spaceAnalyticsUsersTab.column.lastActive",defaultMessage:"Last active"},teams:{id:"spaceAnalyticsUsersTab.column.teams",defaultMessage:"Teamspaces"}}),q={user:{id:"user",renderCell:function(e){const{userStore:t,role:n}=e,i=(0,r().IS)((e=>({container:{height:52}})),[]);(0,s.useEffect)((()=>{t.load()}),[t]);return(0,o().K8)((()=>t.isReady()),[t])?(0,D.jsx)(O().A,{containerStyle:i.container,actorStore:t,spaceRole:n&&(0,O().v)(n)}):(0,D.jsx)(a(236527).a,{})},headerTitle:h().A.formatMessage(W.user),widthData:{width:100},sortable:!1},page_views:{id:"page_views",renderCell:function(e){const{page_views:t}=e,s=(0,r().IS)((e=>({eyeHideIcon:{width:20,height:20,color:e.lightIconColor},cell:{marginLeft:10}})),[]);if(void 0===t)return(0,D.jsx)(S().A,{placement:v().W.Bottom,render:e=>(0,D.jsx)("div",{...e,children:(0,a(207583).F)(s.eyeHideIcon)}),renderTooltip:e=>(0,D.jsx)(d().sA,{id:"spaceAnalyticsUsersTab.optedOutUser.icon.tooltip",defaultMessage:"User has disabled page view tracking"})});return(0,D.jsx)(j().A,{children:t})},headerTitle:(0,D.jsx)(V().Z,{tooltipMessageDescriptor:H.page_views,columnHeader:W.page_views}),widthData:{width:80},sortable:!0},page_edits:{id:"page_edits",renderCell:function(e){const{page_edits:t}=e;return(0,D.jsx)(j().A,{children:t})},headerTitle:(0,D.jsx)(V().Z,{tooltipMessageDescriptor:H.page_edits,columnHeader:W.page_edits}),widthData:{width:80},sortable:!0},last_active:{id:"last_active",renderCell:function(e){const t=e.last_active;let s;s=t?(0,D.jsx)(a(625383).d,{dateTs:t}):(0,D.jsx)(j().A,{isSecondaryColor:!0,children:(0,D.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userTable.lastActiveTimestamp.noLastActive",defaultMessage:"No activity"})});return(0,D.jsx)("div",{children:s})},headerTitle:h().A.formatMessage(W.last_active),widthData:{width:50},sortable:!0},teams:{id:"teams",renderCell:function(e){const{teamStores:t,userStore:s,role:n,userPermissionGroupIds:i}=e;if(!n)return(0,D.jsx)(j().A,{children:(0,D.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.teamsColumn.guest",defaultMessage:"None"})});return(0,D.jsx)(a(37625).Ay,{teamStores:t,memberId:s.id,userPermissionGroupIds:i})},headerTitle:h().A.formatMessage(W.teams),widthData:{width:50},sortable:!1}};const G=(0,a(534177).uv)(q).map((e=>q[e])),K=25;function Y(e){const t=(0,i().v3)(),[a,n]=(0,s.useState)(K),{teamStores:u,usersAndStats:m,filter:p,onUserTabFilterChange:h,usersAndStatsError:f}=e,{userRoles:x,spaceId:v}=(0,o().K8)((()=>{const{currentSpaceStore:e}=U().default.state,t=m.map((e=>e.userStore.id)),a=null==e?void 0:e.id,s={};for(const n of t){const t=(0,E().sE)(e,n),a=null==t?void 0:t.getMembershipType();if(a&&"none"!==a&&"page_guest"!==a){const e=(0,B().C4)(a);s[n]=e}}return{userRoles:s,spaceId:a}}),[m]),[{value:y}]=(0,N().Yb)((async()=>{if(void 0===v)return{};const e=await L().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:t,data:{spaceId:v,userIds:m.map((e=>e.userStore.id))},headers:(0,R().WS)({cellId:void 0,spaceId:v})});return"success"===e.type?e.data.userToGroupMap:{}}),[t,v,m],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3}),[b,S]=(0,s.useState)({column:q.last_active,sortAscending:!1}),w=(0,s.useCallback)((e=>{g().Jv(t,{column:e.column.id,isAscending:e.sortAscending}),S(e)}),[S,t]),A=m.map((e=>{let{userStore:t,stats:a}=e;return{id:a.userId,userStore:t,teamStores:u,isClickable:!1,last_active:a.lastActive,page_views:a.numPageViews,page_edits:a.numPageEdits,role:x[a.userId],userPermissionGroupIds:new Set((null==y?void 0:y[a.userId])||[])}})).sort(function(e){switch(e.column.id){case"last_active":return(t,a)=>(0,l().mj)(t.last_active,a.last_active,e.sortAscending);case"page_views":return(t,a)=>(0,l().xV)(t.page_views,a.page_views,e.sortAscending);case"page_edits":return(t,a)=>e.sortAscending?t.page_edits-a.page_edits:a.page_edits-t.page_edits;default:return(e,t)=>0}}(b)),M=(0,s.useMemo)((()=>A.slice(0,a)),[A,a]),C=(0,r().IS)((e=>({error:{color:c().Ay.red},dateFilterPill:{display:"flex",marginTop:10,marginBottom:15,flexFlow:"row",alignItems:"center"},timeFilterDescription:{marginRight:5}})),[]);const I=(0,s.useCallback)((e=>{g().Jy(t,{daysFilter:e}),h({tableFilter:e})}),[t,h]),T=(0,r().IS)((e=>(0,F().rC)({columnRenderInfo:G,theme:e,containerMarginTop:0})),[]);return(0,D.jsxs)(D.Fragment,{children:[f&&(0,D.jsx)(j().A,{isMultiline:!1,style:C.error,children:f}),(0,D.jsxs)("div",{style:C.dateFilterPill,children:[(0,D.jsx)(j().A,{isSecondaryColor:!0,style:C.timeFilterDescription,children:(0,D.jsx)(d().sA,{id:"workspaceAnalytics.timeFilter.description",defaultMessage:"Views and edits from"})}),(0,D.jsx)(k().Z,{currentFilter:p,onChangeFilter:I})]}),(0,D.jsx)(F().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,setStickyHeaderRow:!0,maxHeight:500,sortState:b,onSortStateChanged:w,columnRenderInfo:G,rows:M,renderNoRowsComponent:()=>(0,D.jsx)("div",{children:"N/A"}),styles:T,loadMoreMethod:{type:"scroll",onLoadMore:function(){a<m.length&&n(a+K)}}})]})}function Q(e){var t,a;let{spaceStore:n,teamStores:p,usersTabData:b,onUserTabFilterChange:C,userEngagement:I}=e;const[T,k]=(0,x().z)(),_=(0,r().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},sectionTitle:{fontWeight:u().Wy.medium,fontSize:16},sectionTitleLeft:{marginBlock:"8px 4px",marginBottom:5,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-around"},numUsersCaption:{display:"flex"},overviewText:{textAlign:"center"},error:{color:c().Ay.red},tableHeader:{marginTop:20,flexDirection:"row",display:"flex",justifyContent:"space-between",alignItems:"end"},tooltip:{marginLeft:3},infoIcon:{height:14,width:14,color:e.mediumTextColor}})),[]),z=(0,i().v3)(),N=(0,d().tz)(),R=(0,s.useCallback)((e=>{g().wy(z,{daysFilter:e});C({graphFilter:"all_time"===e?"last_90_days":e}),I.setDaysFilter(e)}),[C,I,z]),B=(0,o().K8)((()=>n.getName()),[n]);if("NotFoundError"===(null==b||null===(t=b.usersAndStatsError)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(a=I.error)||void 0===a?void 0:a.name))return(0,D.jsx)(M().H,{type:"empty",spaceName:B});const L=Math.floor(k-8);return(0,D.jsxs)("div",{style:_.container,children:[(0,D.jsx)(P,{data:I.data,loading:I.loading,error:I.error,daysFilter:I.daysFilter,setDaysFilter:R}),(0,D.jsx)($,{usersTabData:b,daysFilter:I.daysFilter,intl:N,containerRef:T,widthOfGraph:L}),(0,D.jsxs)("div",{style:_.tableHeader,children:[(0,D.jsxs)("div",{style:_.sectionTitleLeft,children:[(0,D.jsx)(j().A,{style:_.sectionTitle,children:(0,D.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.allUsers.title",defaultMessage:"All members in Notion"})}),(0,D.jsx)(S().A,{placement:v().W.Bottom,render:e=>(0,D.jsx)(w().A,{...e,href:(0,f().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:_.helpInfo}),renderTooltip:()=>b&&"all_time"!==b.tableFilter?(0,D.jsx)(d().sA,{id:"settings.workspaceAnalytics.allMembers.tooltip.lastDays",defaultMessage:"Per member workspace activity over the {dateRange}",values:{dateRange:h().A.formatMessage(l().Yr[b.tableFilter])}}):(0,D.jsx)(d().sA,{id:"settings.workspaceAnalytics.allMembers.tooltip.allTime",defaultMessage:"All time per member workspace activity"})})]}),b?(0,D.jsx)(A().L,{analyticsType:y().e.Users,filters:{daysFilter:b.tableFilter}}):null]}),b?(0,D.jsx)(Y,{teamStores:p,filter:b.tableFilter,usersAndStats:b.usersAndStats,onUserTabFilterChange:C,usersAndStatsError:b.usersAndStatsError&&m().fP(b.usersAndStatsError,N)}):null]})}function $(e){let{usersTabData:t,daysFilter:a,containerRef:s,widthOfGraph:n,intl:i,displayBoxStyle:o,graphTitleStyle:r}=e;return(0,D.jsx)(X,{style:o,children:(0,D.jsx)("div",{ref:s,children:t?(0,D.jsx)(Z,{width:n,dailyUsersData:t.dailyUsersData,userEngagementDaysFilter:a,daysFilter:t.graphFilter,dailyUsersError:t.dailyUsersError&&m().fP(t.dailyUsersError,i),graphTitleStyle:r}):(0,D.jsx)(J,{})})})}function X(e){const t=(0,r().IS)((t=>({border:{borderRadius:4,overflow:"hidden",border:`1px solid ${t.regularDividerColor}`,backgroundColor:t.contentBackground,color:t.regularTextColor,padding:20,...e.style}})),[e.style]);return(0,D.jsx)("div",{style:t.border,children:e.children})}function Z(e){const{width:t,dailyUsersData:a,userEngagementDaysFilter:s,daysFilter:i,dailyUsersError:g}=e,m=(0,r().IS)((t=>({graphHeader:{marginBottom:10,display:"flex",justifyContent:"space-between"},graphTitle:{fontSize:u().J.UIRegular.desktop,fontWeight:"bolder",display:"flex",alignItems:"center",height:24,...e.graphTitleStyle},graphCaption:{fontSize:u().J.UISmall.desktop},graphTooltip:{marginLeft:5,width:14,height:14},helpInfo:{marginLeft:4},emptyGraphBody:{textAlign:"center",paddingTop:50,paddingBottom:50},error:{color:c().Ay.red},graphSubLabel:{paddingTop:4,color:"grey"}})),[e.graphTitleStyle]),{blueLayer:x}=(0,n().useTimeSeriesPalette)(),y=(0,o().K8)((()=>{if(0===a.length)return;return{startDate:a[0].ds,endDate:a[a.length-1].ds}}),[a]),b=(0,o().K8)((()=>a.map((e=>({ds:e.ds,values:{active_members:e.active_members||0}})))),[a]);let A;return A=!y||a.length<3?(0,D.jsx)("div",{style:m.emptyGraphBody,children:(0,D.jsx)(j().A,{isSecondaryColor:!0,children:(0,D.jsx)(d().sA,{id:"workspaceAnalytics.usersOverTime.emptyGraph",defaultMessage:"Not enough data to display graph"})})}):(0,D.jsx)(p().b,{startDate:y.startDate,endDate:y.endDate,width:t,data:b,height:300,layers:[{key:"active_members",...x,renderLabel:e=>(0,D.jsx)(d().sA,{id:"workspaceAnalytics.usersOverTime.activeMembers",defaultMessage:"{activeMembers, plural, one {1 active member} other {{activeMembers} active members}}",values:{activeMembers:e}})}],renderTooltipSubLabel:()=>(0,D.jsx)("div",{style:m.graphSubLabel,children:(0,D.jsx)(d().sA,{id:"workspaceAnalytics.usersOverTime.activeMembers.sublabel",defaultMessage:"Viewed a page in the {dateRange}",values:{dateRange:h().A.formatMessage(l().Yr[i])}})})}),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{style:m.graphHeader,children:(0,D.jsxs)(j().A,{style:m.graphTitle,children:[(0,D.jsx)(d().sA,{id:"workspaceAnalytics.membersOverTime.title",defaultMessage:"Active members over time"}),"all_time"===s&&(0,D.jsx)(S().A,{placement:v().W.Bottom,render:e=>(0,D.jsx)(w().A,{...e,href:(0,f().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:m.helpInfo}),renderTooltip:()=>(0,D.jsx)(d().sA,{id:"settings.workspaceAnalytics.membersOverTime.allTimeTooltip",defaultMessage:"All Time selection shows members who have viewed a page in the last 90 days."})})]})}),g&&(0,D.jsx)(j().A,{isMultiline:!1,style:m.error,children:g}),A]})}function J(){return(0,D.jsxs)("div",{children:[(0,D.jsx)(b().A,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]}),(0,D.jsx)(b().A,{paragraphs:[{lineHeight:300,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:12}]})]})}},259476:(e,t,a)=>{a.d(t,{h:()=>i});a(296540);var s=a(474848);const n={viewBox:"0 0 16 16",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M6.688 6.3a.575.575 0 0 0-.575.575v4.5a.575.575 0 1 0 1.15 0v-4.5a.575.575 0 0 0-.575-.575m2.625 0a.575.575 0 0 0-.575.575v4.5a.575.575 0 1 0 1.15 0v-4.5a.575.575 0 0 0-.575-.575"}),(0,s.jsx)("path",{d:"M6.625 2.125a1.5 1.5 0 0 0-1.5 1.5v.75h-2a.625.625 0 0 0 0 1.25h.528l.29 6.4c.048 1.035.9 1.85 1.936 1.85h4.242a1.94 1.94 0 0 0 1.935-1.85l.291-6.4h.528a.625.625 0 1 0 0-1.25h-2v-.75a1.5 1.5 0 0 0-1.5-1.5zm-.25 1.5a.25.25 0 0 1 .25-.25h2.75a.25.25 0 0 1 .25.25v.75h-3.25zm-1.183 8.344-.288-6.344h6.192l-.288 6.344a.687.687 0 0 1-.687.656H5.879a.687.687 0 0 1-.687-.656"})]})},i=(0,a(340498).wt)("trashSmall",n)},263919:(e,t,a)=>{a.d(t,{A:()=>j});a(944114),a(898992),a(354520),a(672577),a(581454);var s=a(296540),n=()=>a(842599),i=()=>a(985595),o=()=>a(792071),r=()=>a(798880),l=()=>a(959013),d=()=>a(284371),c=()=>a(743260),u=()=>a(299545),g=()=>a(962730),m=()=>a(406999),p=()=>a(630116),h=()=>a(760217),f=()=>a(939740),x=()=>a(64e3),v=()=>a(267155),y=a(474848);const b=(0,l().YK)({invited_page:{id:"PermissionsInviteSearchRequest.userTooltip.invited_page",defaultMessage:"{userNameAndEmail} is invited to this page already"},invited_database:{id:"PermissionsInviteSearchRequest.userTooltip.invite_database",defaultMessage:"{userNameAndEmail} is invited to this database already"},invited_space:{id:"PermissionsInviteSearchRequest.userTooltip.invited_space",defaultMessage:"{userNameAndEmail} is invited to this workspace already"},invited_team:{id:"PermissionsInviteSearchRequest.userTooltip.invited_team",defaultMessage:"{userNameAndEmail} is invited to this teamspace already"},not_in_space:{id:"PermissionsInviteSearchRequest.userTooltip.admin",defaultMessage:"Click to invite {userNameAndEmail}"}});function S(e,t){return e.filter(((e,a)=>a<t))}const j=function(e){const{store:t,shouldShowBots:j,shouldShowGroups:w,sectionRenderLimit:A,membersOnly:M,hideCurrentUser:C,hideUserTypeToken:I,disableInvitedUsers:T,guestsMustBeRequested:k,hideTitle:_,defaultUserTitle:D,performSearchRequest:z}=e,[P,N,R]=(0,a(56366).$y)(e.permissionsInviteStore),B=(0,a(484714).v3)(),{device:L}=B,E=(0,l().tz)(),{tokenQuery:O}=P,U=(0,s.useMemo)((()=>c()._c({environment:{device:L}})),[L]),F=(0,a(401497).IS)((e=>({roleBadge:{...U},invitedBadge:{...U,backgroundColor:e.defaultBadgeBackground}})),[U]),V="invitee",H={request:O,performRequest:e=>z?z({query:e,limit:10,environment:B}):a(542056).hQ({query:e,sectionLimit:{userLimit:10,botLimit:j?10:0,groupLimit:w?10:0,importContactLimit:0},membersOnly:M,environment:B,intl:E}),render:(e,s,j)=>{if(e)return(0,y.jsx)(v().z,{loading:!j,hideTitle:_,children:(0,y.jsx)(x().A,{title:(0,y.jsx)(l().sA,{id:"inviteUserModal.searchInput.errorMessage",defaultMessage:"Something went wrong"})})});const M=s&&{...s,inviteUsers:s.inviteUsers.filter((e=>!(0,c().mQ)({permissionsInviteStore:R,target:e})&&(!C||e.value.id!==B.currentUser.id))),importedContacts:(0,c().GZ)(s.inviteUsers,s.importedContacts)},z=M&&(null==O?void 0:O.length)>0,{inviteUsers:N,inviteGroups:L,importedContacts:U=[]}=z?M:(0,c().Es)({currentInviteActors:M,permissionsInviteStore:R,targetStore:t}),H=[...S(N,A),...S(U,10)].map(((e,s)=>{const n="newUser"===e.type?e.value.email:e.value.id,d=(0,c().$D)(e),f=Boolean(z&&(0,c().VF)({permissionsInviteStore:R,userTarget:e,targetStore:t}));return{key:n,render:s=>{const{tooltip:n,userTypeToken:m}=function(e){const{userTarget:t,targetStore:a,isInvited:s,userSpaceRole:n,styles:i,intl:d}=e,g="newUser"===t.type?null:o().Bj6.fromValue(r().oo,t.value).getDisplayName(d),m=t.value.email,h=g&&g!==m?`${g} (${m})`:m,f=n&&"not_in_space"!==n;if(s)return{tooltip:(0,u().Yu)(a)?d.formatMessage(b.invited_space,{userNameAndEmail:h}):a instanceof p().Bv?d.formatMessage(b.invited_page,{userNameAndEmail:h}):a instanceof p().md?d.formatMessage(b.invited_database,{userNameAndEmail:h}):d.formatMessage(b.invited_team,{userNameAndEmail:h}),userTypeToken:(0,y.jsx)("div",{style:{...i.invitedBadge},children:(0,y.jsx)(l().sA,{id:"inviteUserModal.userRole.invitedBadge.label",defaultMessage:"Invited"})})};if(f){const e=c().S6({role:n,intl:d,nameOrEmail:h});return{tooltip:e.tooltip,userTypeToken:(0,y.jsx)("div",{style:{...i.roleBadge},children:e.userRoleBadge})}}return{tooltip:d.formatMessage(b.not_in_space,{userNameAndEmail:h}),userTypeToken:void 0}}({userTarget:e,targetStore:t,userSpaceRole:d,isInvited:f,styles:F,intl:E});return"existingUser"===e.type?(0,y.jsx)(a(457688).A,{...s,actor:(0,a(764880).A7)(e.value),right:I?void 0:m,tooltip:n,tooltipPlacement:g().W.Left,disabled:T&&f,defaultUserTitle:D}):(0,y.jsx)(a(859428).A,{placement:g().W.Left,alignment:g().C.Start,textWrap:!0,render:t=>(0,y.jsx)(h().A,{...s,...t,icon:(0,i().n)({width:24,height:24}),right:m,title:e.value.email.trim(),disabled:T&&f}),disableTooltip:!n,renderTooltip:()=>n})},action:()=>{if(T&&f)return;if(!P.isInviteTargetsEmpty&&(0,m().qs)(P))return;const t={...e,..."existingUser"===e.type&&{spaceRole:d}};a(134696).kH(B,{subscription_tier:(0,a(10984).AI)(),invite_token_query:O,selected_user_token:e,selected_user_token_rank:s,from:"permission_invite"}),R.setState({...P,inviteTargets:[...P.inviteTargets,t],isInviteTargetsEmpty:!1,tokenQuery:"",inputFocus:V})}}})),W=S(L,A).map((e=>{const{value:t}=e;return{key:t.id,render:e=>(0,y.jsx)(a(862139)._,{group:t,menuListItemProps:e}),action:()=>{!P.isInviteTargetsEmpty&&(0,m().qs)(P)||R.setState({...P,inviteTargets:[...P.inviteTargets,e],isInviteTargetsEmpty:!1,tokenQuery:"",inputFocus:V})}}})),q=[],G=P.isInviteTargetsEmpty||!(0,m().qs)(P);if(H.length>0&&G&&q.push({key:"user results",render:e=>(0,y.jsx)(v().z,{...e,loading:!j,hideTitle:_}),items:H}),w&&W.length>0&&G&&q.push({key:"group results",render:e=>(0,y.jsx)(a(89924).A,{...e,title:(0,y.jsx)(l().sA,{id:"inviteUserModal.searchDropdown.selectGroupTitle",defaultMessage:"Select a group"}),loading:!j}),items:W}),0===q.length&&G){const e=(0,n().qh)(P.tokenQuery);if((0,n().DT)(e)){const n={type:"newUser",value:{email:e},source:"email"},i=(0,c().mQ)({target:n,permissionsInviteStore:R});if(!i)return;if(i)return(0,y.jsx)(v().z,{loading:!j,hideTitle:_,children:(0,y.jsx)(x().A,{title:(0,y.jsx)(l().sA,{id:"inviteUserModal.userAlreadyInvitedMessage",defaultMessage:"Already inviting {user}.",values:{user:(0,y.jsx)("span",{style:{fontWeight:d().Wy.bold},children:(0,c().Sk)({intl:E,target:i})})}})})});const o=(s&&s.inviteUsers||[]).find((t=>"existingUser"===t.type&&t.value.email===e));if(o&&"existingUser"===o.type&&(0,c().wF)({store:t,target:o}))return(0,y.jsx)(v().z,{loading:!j,hideTitle:_,children:(0,y.jsx)(x().A,{title:(0,y.jsx)(l().sA,{id:"inviteUserModal.userAlreadyHasPermissionMessage",defaultMessage:"{user} already has permission.",values:{user:(0,y.jsx)("span",{style:{fontWeight:d().Wy.bold},children:(0,a(695608).c6)(E,o.value)})}})})})}else{if(!P.tokenQuery)return null;q.push({key:"user results",render:e=>(0,y.jsx)(v().z,{...e,loading:!j,hideTitle:_,title:k?(0,y.jsx)(l().sA,{id:"inviteUserModal.searchDropdown.requestPeople",defaultMessage:"Keep typing to request inviting an email"}):(0,y.jsx)(l().sA,{id:"inviteUserModal.searchDropdown.addPeople",defaultMessage:"Keep typing to invite email"})}),items:[{key:P.tokenQuery,render:e=>(0,y.jsx)(h().A,{icon:(0,i().n)({width:24,height:24}),title:P.tokenQuery,...e}),action:()=>{}}]})}}return(0,y.jsx)(f().Ay,{type:f().Oh.Vertical,initialFocus:O.length>0?0:void 0,sections:q})}};return(0,y.jsx)(a(251126).A,{...H})}},266324:(e,t,a)=>{a.d(t,{A:()=>M});var s=a(296540),n=()=>a(112452),i=()=>a(959013),o=()=>a(284371),r=()=>a(962730),l=()=>a(285790),d=()=>a(859428),c=()=>a(484714),u=()=>a(56366),g=()=>a(401497),m=()=>a(449506),p=()=>a(901389),h=()=>a(436572),f=()=>a(7674),x=()=>a(107683),v=()=>a(49210),y=()=>a(84817),b=()=>a(364280),S=()=>a(554509),j=()=>a(453697),w=a(474848);function A(e){let{spaceId:t,userStore:a,onDismiss:n,onSubmit:o}=e;const r=(0,c().v3)(),l=a.id,d=(0,i().tz)(),x=(0,u().K8)((()=>a.getDisplayName(d)),[a,d]),v=(0,g().IS)((e=>({secondaryIcon:{fill:e.icon.uiBlueSecondary},primaryIcon:{fill:e.icon.uiBluePrimary},title:{color:e.text.primary,textAlign:"center",fontSize:17,fontWeight:500,lineHeight:"22px"}})),[]),A=(0,s.useCallback)((async()=>{const e=await m().callApi({eventName:"recoverUserContentInSpace",environment:r,data:{spaceId:t,userId:l}});if("failed"===e.type)throw p().Qg(e),e;o(),n(),h().D6({label:(0,w.jsx)(i().sA,{id:"restoreAccessModal.snackbarMessage",defaultMessage:"Initiated restoration of access for{nbsp}{displayName}",values:{displayName:(0,w.jsx)("b",{children:x}),nbsp:(0,w.jsx)(w.Fragment,{children:" "})}})})}),[r,t,l,x,n,o]);return(0,w.jsx)(f().tf,{header:(0,w.jsx)(f().YA,{iconAndTitle:(0,w.jsxs)(y().Y1,{align:"top-center",gap:9,children:[(0,w.jsx)(j().A,{userStore:a,size:40}),(0,w.jsx)("div",{style:v.title,children:(0,w.jsx)(i().sA,{defaultMessage:"Restore access",id:"restoreAccessModal.title"})})]}),description:(0,w.jsx)(i().sA,{id:"restoreAccessModal.subtitle",defaultMessage:"Restore additional access for members who were removed and re-added within the last 30 days"})}),footer:(0,w.jsx)(f().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,w.jsx)(i().sA,{defaultMessage:"Restore access",id:"restoreAccessModal.restoreButton"}),onClick:A}],secondaryButtons:[{buttonType:"secondary",label:(0,w.jsx)(i().sA,{defaultMessage:"Cancel",id:"restoreAccessModal.cancelButton"}),onClick:n}]}),children:(0,w.jsxs)(b().VP,{gap:24,children:[(0,w.jsx)(S().D,{styleName:"Body-14px/Regular",colorName:"primary",customStyles:{textAlign:"center"},children:(0,w.jsx)(i().sA,{id:"restoreAccessModal.contextDescription",defaultMessage:"<b>{displayName}</b> already has access to their private pages",values:{b:e=>(0,w.jsx)("b",{children:e}),displayName:x}})}),(0,w.jsx)(S().D,{styleName:"Body-14px/Regular",colorName:"primary",customStyles:{textAlign:"center"},children:(0,w.jsx)(i().sA,{id:"restoreAccessModal.actionDescription",defaultMessage:"Would you like to restore <b>{displayName}</b>'s access to their shared pages, groups, and teamspaces?",values:{b:e=>(0,w.jsx)("b",{children:e}),displayName:x}})})]})})}function M(e){let{spaceId:t,userStore:a,onSubmit:s}=e;const o=(0,i().tz)();return(0,w.jsx)(d().A,{placement:r().W.Right,renderTooltip:()=>(0,w.jsx)(C,{}),render:e=>(0,w.jsx)(l().A,{icon:n()._,ariaLabel:o.formatMessage({id:"restoreAccessButton.aria",defaultMessage:"Restore access"}),onClick:()=>async function(e,t,a){return await v().T.showAsyncModal((s=>(0,w.jsx)(x().s,{isOpen:s.isOpen,onDismiss:s.onDismiss,onClosed:s.onClosed,areaConstraint:{width:{type:"fixed",length:380}},render:()=>(0,w.jsx)(A,{spaceId:e,userStore:t,onDismiss:s.onDismiss,onSubmit:a})})))}(t,a,s),...e})})}function C(){return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{style:{fontWeight:o().Wy.semibold},children:(0,w.jsx)(i().sA,{id:"userCell.restoreAccessTooltip.label",defaultMessage:"Restore access to teamspaces, groups, and shared pages"})}),(0,w.jsx)("div",{children:(0,w.jsx)(i().sA,{id:"userCell.restoreAccessTooltip.description",defaultMessage:"Only available if a member was removed and re-added in the last 30 days"})})]})}},267155:(e,t,a)=>{a.d(t,{z:()=>r});a(296540);var s=()=>a(401497),n=()=>a(959013),i=()=>a(89924),o=a(474848);function r(e){const t=(0,s().IS)((()=>({container:{paddingBlock:4}})),[]);return(0,o.jsx)(i().A,{title:e.hideTitle?void 0:(0,o.jsx)(n().sA,{id:"inviteUserModal.searchDropdown.selectPersonTitle",defaultMessage:"Select a person"}),style:t.container,...e})}},271084:(e,t,a)=>{a.d(t,{k:()=>n});class s extends(()=>a(757695))().default{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}}const n=new s},284230:(e,t,a)=>{a.d(t,{A:()=>z});a(944114),a(898992),a(823215),a(354520),a(581454),a(908872);var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(401497),r=()=>a(784892),l=()=>a(467730),d=()=>a(468006),c=()=>a(959013),u=()=>a(496603);function g(e,t){return{state:t,store:e}}class m extends(()=>a(757695))().default{getInitialState(){return{showAutoCompletePopup:!1,defaultTeams:{}}}addedAndCurrentTeams(){return Object.values(this.state.defaultTeams).filter((e=>{let{state:t}=e;return"current-default"===t||"add-default"===t}))}addedTeams(){return Object.values(this.state.defaultTeams).filter((e=>{let{state:t}=e;return"add-default"===t}))}removedTeams(){return Object.values(this.state.defaultTeams).filter((e=>{let{state:t}=e;return"remove-default"===t}))}}const p=new m;function h(e){var t;let{teamStore:a}=e;return null===(t=p.state.defaultTeams[a.id])||void 0===t?void 0:t.state}function f(e,t){const a=p.state,s={...a.defaultTeams};t?s[e.id]=g(e,t):delete s[e.id],p.setState({...a,defaultTeams:s})}var x=()=>a(928600),v=()=>a(939740),y=()=>a(14235),b=()=>a(204063),S=()=>a(89924),j=()=>a(859428),w=()=>a(626822),A=()=>a(881690),M=()=>a(856952),C=()=>a(722872),I=()=>a(115512),T=()=>a(962730),k=()=>a(377586),_=()=>a(898808),D=a(474848);function z(e){let{immediateUpdate:t,onUpdate:a,tokenStyle:r,unarchivedTeams:m,description:A,isOrgOwner:I}=e;const _=(0,n().Y0)(),z=(0,c().tz)(),L=(0,n().v3)(),[E,O]=(0,s.useState)(!1),U=(0,i().uB)(p),[F,V]=(0,s.useState)(""),{addedTeams:H,removedTeams:W,addedAndCurrentTeams:q}=(0,i().K8)((()=>({addedAndCurrentTeams:U.addedAndCurrentTeams(),addedTeams:U.addedTeams(),removedTeams:U.removedTeams()})),[U]),G=(0,i().K8)((()=>m.reduce(((e,t)=>(e[t.id]=t.getName(),e)),{})),[m]),K=(0,i().K8)((()=>m.filter((e=>e.isDefault()))),[m]);(0,s.useEffect)((()=>function(e){const t=p.state,a=e.reduce(((e,t)=>(e[t.id]=g(t,"current-default"),e)),{});p.setState({...t,defaultTeams:a})}(K)),[K]);let Y=null;0===m.length?Y=(0,D.jsx)(c().sA,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.noUnarchivedTeamsExist",defaultMessage:"Create your first teamspace to set a default"}):0===H.length&&0===W.length?Y=(0,D.jsx)(c().sA,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.noChangesToExistingDefaultTeams",defaultMessage:"Current selection already matches existing default teams"}):0===q.length&&(Y=(0,D.jsx)(c().sA,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.atLeastOneDefaultTeamMustBeSelected",defaultMessage:"At least one default team must be selected"}));const Q=e=>{O(!0),a({addedTeams:e.addedTeams,removedTeams:e.removedTeams}),O(!1)},$=e=>{!function(e){let{teamStore:t}=e;f(t,"add-default"===h({teamStore:t})?null:"remove-default")}({teamStore:e}),t&&Q({addedTeams:[],removedTeams:[g(e,"remove-default")]})},X=e=>{!function(e){let{teamStore:t}=e;f(t,"remove-default"===h({teamStore:t})?"current-default":"add-default")}({teamStore:e}),U.update((e=>({...e,showAutoCompletePopup:!1}))),t&&Q({addedTeams:[g(e,"add-default")],removedTeams:[]}),V("")},Z=L.currentUser.id,J=(0,i().K8)((()=>Z?m.filter((e=>{const t=e.getSettingsStore().getValue();return!!t&&((I||e.isOwner(Z))&&"open"===(0,d().MA)(t)&&q.every((t=>t.store.id!==e.id)))})):[]),[Z,m,I,q]),ee=(0,l().Ay)(F,J,(e=>G[e.id]??"")),te=[];ee.length>0&&F.length>0&&te.push({key:"default-teams-list",render:e=>(0,D.jsx)(S().A,{...e,title:(0,D.jsx)(c().sA,{id:"defaultTeamsInput.defaultTeamList.title",defaultMessage:"Teamspaces"}),loading:!1}),items:ee.map((e=>({key:e.id,render:t=>(0,D.jsx)(w().A,{...t,teamStore:e}),action:()=>X(e)})))});const ae=(0,i().K8)((()=>U.state.showAutoCompletePopup&&te.length>0),[U,te.length]),se=(0,o().IS)((e=>({defaultTeamsHeader:{fontSize:14,marginBottom:2},inputAndButtonContainer:{paddingTop:12,display:"flex"},inputContainer:{flexGrow:1},tokenInputMenu:{borderRadius:ae?R:N,margin:0},menuList:{maxHeight:300,border:`1px solid ${e.regularDividerColor}`,borderTop:0,borderRadius:B},updateButton:{marginLeft:10,height:35}})),[ae]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{style:se.defaultTeamsHeader,children:(0,D.jsx)(c().sA,{id:"teamsWorkspaceSettings.defaultTeams.title",defaultMessage:"Default teamspaces"})}),A,(0,D.jsxs)("div",{style:se.inputAndButtonContainer,children:[(0,D.jsx)("div",{style:se.inputContainer,children:(0,D.jsx)(y().Ay,{popupType:k().n.Popup,placementToOrigin:T().W.Bottom,sameWidthAsOrigin:!0,open:ae,borderRadius:B,onDismiss:()=>U.update((e=>({...e,showAutoCompletePopup:!1}))),origin:(0,D.jsx)(M().Ay,{disabled:E||0===m.length,style:se.tokenInputMenu,focusInitial:_.isMobile,focusAfterAnimation:!0,format:M().le.Share,inputDivStyle:{alignItems:"center"},value:F,onChange:e=>{U.update((e=>({...e,showAutoCompletePopup:!0}))),V(e.target.value)},type:"default-teams",tokens:q.map((e=>(0,D.jsx)(P,{teamStore:e.store,onClickRemove:$,style:r,hideRemoveButton:1===q.length},e.store.id))),placeholder:z.formatMessage({id:"teamsWorkspaceSettings.defaultTeams.inputPlaceholder",defaultMessage:"Select a default teamspace..."}),onRemoveLastToken:()=>{const e=q,t=u().HV(e);t&&$(t.store)},onEmptySubmit:u().D_,showBorder:!0}),render:()=>(0,D.jsx)(x().A,{menuType:C().gu.Popup,tokenInputHeader:!0,disableHeaderBorder:!0,children:(0,D.jsx)("div",{style:se.menuList,children:(0,D.jsx)(v().Ay,{type:v().Oh.Vertical,initialFocus:0,sections:te})})}),trapFocus:!1})}),!t&&(0,D.jsx)(j().A,{placement:T().W.Top,alignment:T().C.Center,disableTooltip:null===Y,renderTooltip:()=>Y,style:{width:180},textWrap:!0,render:e=>(0,D.jsx)(b().A,{...e,style:se.updateButton,disabled:null!==Y||E,size:"lg",onClick:()=>Q({addedTeams:H,removedTeams:W}),children:(0,D.jsx)(c().sA,{id:"teamsWorkspaceSettings.updateButton.label.2",defaultMessage:"Update"})})})]})]})}function P(e){const t=(0,n().Y0)(),{teamStore:a,onClickRemove:s,style:o,hideRemoveButton:l}=e,{name:d}=(0,i().K8)((()=>({name:a.getName()})),[a]);return(0,D.jsx)(A().A,{showRemoveButton:!l,isSingle:!1,format:t.isMobile?r().NY.Large:r().NY.Medium,style:{marginLeft:6,...o},onClickRemove:()=>s(a),value:(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,D.jsx)(_().x,{disabled:!0,store:a,size:14,style:{marginRight:4}}),d]})})}const N=3,R=(0,I().Nb)({topLeft:N,topRight:N,bottomLeft:0,bottomRight:0}),B=(0,I().Nb)({topLeft:0,topRight:0,bottomLeft:N,bottomRight:N})},284331:(e,t,a)=>{a.d(t,{m:()=>_,A:()=>D});a(898992),a(354520),a(581454),a(737550);var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(401497),r=()=>a(657222),l=()=>a(959013),d=()=>a(284371),c=()=>a(946141),u=()=>a(884107),g=()=>a(542056),m=()=>a(436572),p=()=>a(493823),h=()=>a(331542),f=()=>a(864943),x=()=>a(204063),v=()=>a(859428),y=()=>a(125565),b=()=>a(645873);const S=new(b().O2)("teamPermissionsInvite",(async()=>await Promise.all([a.e(23806),a.e(75134),a.e(43380),a.e(9304),a.e(96346),a.e(36192),a.e(44711),a.e(53321),a.e(16471),a.e(90825),a.e(37353),a.e(49889),a.e(97727),a.e(55373),a.e(29151),a.e(16908),a.e(62475),a.e(3151),a.e(98629),a.e(58550),a.e(22900),a.e(85128),a.e(95555),a.e(90409),a.e(63077),a.e(74562),a.e(95794),a.e(46414),a.e(8184),a.e(99353),a.e(52681),a.e(14518),a.e(17713),a.e(28271),a.e(17254),a.e(4422),a.e(59794),a.e(67435),a.e(75355),a.e(48315),a.e(47123),a.e(847),a.e(5887),a.e(70769),a.e(97965),a.e(17989),a.e(3965),a.e(38911),a.e(9034),a.e(52012),a.e(56985),a.e(50142),a.e(20838),a.e(21627),a.e(88860),a.e(83210),a.e(26090),a.e(82472),a.e(96345),a.e(10596),a.e(73285),a.e(75659),a.e(78846),a.e(47858),a.e(13324),a.e(51860),a.e(15724),a.e(81141),a.e(27274),a.e(99346),a.e(92448),a.e(65638),a.e(72915),a.e(28721),a.e(69689),a.e(23463),a.e(25426),a.e(6463),a.e(91056),a.e(26483),a.e(29333),a.e(5396),a.e(1440),a.e(34576),a.e(95810),a.e(89109),a.e(3560),a.e(77169),a.e(24071),a.e(68610),a.e(67064),a.e(49978),a.e(3720),a.e(47762),a.e(85475),a.e(11740),a.e(97996),a.e(5066),a.e(35299),a.e(68117),a.e(14267),a.e(33731),a.e(30016),a.e(14410),a.e(49471),a.e(31185),a.e(75681)]).then(a.bind(a,500844)))),j=(0,b()._h)(S,(e=>e.TeamPermissionsInvite));var w=()=>a(47373),A=()=>a(743260),M=()=>a(37433),C=a(474848);const I={button:{height:32},buttonContainer:{width:"100%",paddingTop:22,display:"flex",justifyContent:"end"},multiButtonContainer:{width:"100%",paddingTop:12,display:"flex",justifyContent:"space-between"},singleButtonContainer:{width:"100%",paddingTop:12,display:"flex",justifyContent:"right"},container:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none",width:"100%"},containerLeftAligned:{display:"flex",alignItems:"left",justifyContent:"left",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none",width:"100%"},titleAndIcon:{paddingBottom:18,alignItems:"center",display:"flex"},addMembersTo:{minWidth:"25%"},icon:{paddingRight:3,paddingLeft:3},teamName:{paddingRight:10,fontWeight:d().Wy.medium,...d().RC,maxWidth:250},full:{width:"100%"},inviteInput:{zIndex:1},submitTooltip:{minWidth:250},subtitle:{paddingTop:16,position:"relative",zIndex:-1}};function T(e){var t;let{isLoading:a,isNewlyCreatedTeam:s,onDismiss:n,onSubmit:o,inviteTargets:r,inviteRole:d,canEditSpaceMembership:c,membershipRequestsDisabled:u,spaceAllowedDomains:g,hasTeamGuestsMatchAllowedDomain:m}=e;const p=r.length>0,y=r.filter((e=>(0,A().yi)(e))).length>0&&u&&!c,b=(0,i().K8)((()=>(0,w().Qd)()&&"team_level_guest"===d&&r.some((e=>"group"===e.type||"existingUser"===e.type&&"none"!==e.spaceRole&&"not_in_space"!==e.spaceRole))),[d,r]),S=b||y||m;if(a)return(0,C.jsx)(x().A,{style:{...I.button,minWidth:80},disabled:!0,children:(0,C.jsx)(h().A,{onDarkBackground:!0})});if(s&&!p)return(0,C.jsx)(f().A,{size:"lg",style:I.button,onClick:n,disabled:a,children:(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlay.inviteModal.skipForNow",defaultMessage:"Skip for now"})});const j=b?(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.memberOrGroupInvitedAsTeamGuestTooltip",defaultMessage:"Cannot add space members or groups as teamspace guests. Remove them to continue."}):m?(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.hasTeamGuestsMatchAllowedDomain",defaultMessage:"Cannot add users with {emailDomains} as teamspace guests. Remove them to continue.",values:{emailDomains:null==g||null===(t=g.map((e=>`@${e}`)))||void 0===t?void 0:t.join(", ")}}):null;return(0,C.jsx)(v().A,{textWrap:!0,style:I.submitTooltip,disableTooltip:!j,renderTooltip:()=>j,render:e=>(0,C.jsx)(x().A,{style:I.button,onClick:o,disabled:!p||a||S,...e,children:(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlayV2.inviteButton.label",defaultMessage:"Invite"})})})}function k(e){let{inviteTargets:t,workspaceName:a,canEditSpaceMembership:s,membershipRequestsDisabled:n,isFreeTier:i,inviteRole:o,hasTeamGuestsMatchAllowedDomain:r}=e;if(void 0===s)return null;if(!t||0===t.length)return null;const d=t.map((e=>{if("group"!==e.type&&(0,A().yi)(e))return e.value.email})).filter((e=>e));if(!d||0===d.length)return null;const c=e=>(0,C.jsx)("b",{children:e}),u=a??"this workspace";return s?i?(0,C.jsx)(y().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingularOwner.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a workspace owner.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPluralOwners.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as workspace owners.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})}):"team_level_guest"===o?r?null:(0,C.jsx)(y().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.teamGuest.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed teamspace guest.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.teamGuest.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed teamspace guests.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})}):(0,C.jsx)(y().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed workspace member.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed workspace members.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})}):n?(0,C.jsx)(y().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipDisabled.subtitle",defaultMessage:"You can't add workspace guests to a teamspace. Ask your admin to add them as workspace members first."})}):(0,C.jsx)(y().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipSingular.subtitle",defaultMessage:"Request will be sent to your admin to add <b>{guestEmail}</b> as a member to {workspaceName}.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipPlural.subtitle",defaultMessage:"Request will be sent to your admin to add <b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> as members to {workspaceName}.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})})}function _(e){const{store:t,isSmall:a}=e,s=(0,n().v3)(),i=(0,o().IS)((e=>({button:{marginRight:5,marginLeft:5,height:32,fontSize:a?12:14},icon:{width:a?12:14,height:a?12:14}})),[a]);return(0,C.jsx)(p().p,{onClick:async()=>{const e=await u().R.clipboardActions.load();e.copyString({environment:s,stringValue:(0,M().TP)(t.id),copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),c().lY(s,{store:t})},icon:r().w,style:i.button,iconStyle:i.icon,isBlue:!0,children:a?(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlay.copyLinkCondensedButton.label",defaultMessage:"Copy link"}):(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlay.copyLinkButton.label",defaultMessage:"Copy invite link"})})}const D=function(e){let{store:t,permissionsInviteStore:o,isNewlyCreatedTeam:r,onSubmitSuccessful:d,onDismiss:c}=e;const u=(0,n().v3)(),{teamName:p,workspaceName:h,canEditSpaceMembership:f,membershipRequestsDisabled:x,spaceAllowedDomains:v}=(0,i().K8)((()=>{const{currentSpaceStore:e}=a(351360).default.state;return{teamName:t.getName(),workspaceName:null==e?void 0:e.getName(),canEditSpaceMembership:null==e?void 0:e.canEditMembership(),membershipRequestsDisabled:null==e?void 0:e.getDisableMembershipRequests(),spaceAllowedDomains:null==e?void 0:e.getEmailDomains()}}),[t]);(0,s.useEffect)((()=>()=>{r&&a(848237).L0({environment:u,teamStore:t,shouldScroll:!0})}),[r,t,u]);const[y,b]=(0,s.useState)(!1),S=(0,i().K8)((()=>o.state.inviteTargets),[o]),D=(0,i().K8)((()=>o.state.inviteTargets.length),[o]),z=(0,i().K8)((()=>o.state.inviteRole),[o]),P=(0,i().K8)((()=>a(10984).dL()),[]),N=(0,i().K8)((()=>!(null==v||!v.length||"team_level_guest"!==z||!(0,w().Qd)())&&S.some((e=>"group"!==e.type&&(0,a(842599).Wy)(v,e.value.email)))),[v,z,S]),R=(0,i().K8)((()=>!P&&!(0,M().FQ)(t)),[t,P]),B=async()=>{if(b(!0),D>0){const e=o.state.inviteTargets,{success:a}=await g().l5({environment:u,store:t,permissionsInviteStore:o,inviteOrigin:"team_invite_overlay"});if(void 0!==f)if(a){const a=(0,A().c3)({inviteTargets:e,recordStore:t,canEditSpaceMembership:f});if(!a)return;setTimeout((()=>{m().D6({label:a})}))}else setTimeout((()=>{m().D6({label:(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlay.inviteMembersFailure.message",defaultMessage:"Failed to send invites"})})}))}g().Oo({permissionsInviteStore:o}),b(!1),null==d||d()};return(0,C.jsx)("div",{className:a(38337).jnS,style:{...I.full},children:(0,C.jsxs)("div",{style:I.containerLeftAligned,children:[(0,C.jsxs)("div",{style:I.titleAndIcon,children:[(0,C.jsx)("div",{style:I.addMembersTo,children:(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.membersTitle.label",defaultMessage:"Invite people to"})}),(0,C.jsx)("div",{style:I.icon,children:(0,C.jsx)(a(898808).x,{disabled:!0,store:t,size:20})}),(0,C.jsx)(a(265665).j,{style:I.teamName,children:p})]}),(0,C.jsxs)("div",{style:I.inviteInput,children:[(0,C.jsx)(j,{store:t,permissionsInviteStore:o,onEmptySubmit:B}),(0,C.jsx)("div",{style:I.subtitle,children:(0,C.jsx)(k,{inviteTargets:S,workspaceName:h,canEditSpaceMembership:f,membershipRequestsDisabled:x,isFreeTier:P,inviteRole:z,hasTeamGuestsMatchAllowedDomain:N})})]}),(0,C.jsx)("div",{style:R?I.multiButtonContainer:I.singleButtonContainer,children:(0,C.jsxs)("div",{style:R?I.multiButtonContainer:{},children:[R&&(0,C.jsx)(_,{store:t}),(0,C.jsx)(T,{isLoading:y,onSubmit:B,onDismiss:()=>{g().Oo({permissionsInviteStore:o}),null==c||c()},isNewlyCreatedTeam:r,inviteTargets:S,inviteRole:z,canEditSpaceMembership:f,membershipRequestsDisabled:x,spaceAllowedDomains:v,hasTeamGuestsMatchAllowedDomain:N})]})})]})})}},288864:(e,t,a)=>{a.d(t,{_:()=>r});a(296540);var s=()=>a(401497),n=()=>a(284371),i=()=>a(719147),o=a(474848);function r(e){let{href:t,external:a,onClick:r,children:l}=e;const d=(0,s().IS)((e=>({link:{color:e.icon.uiBluePrimary,fontWeight:n().Wy.medium}})),[]);return(0,o.jsx)(i().A,{disableUnderline:!0,href:t,external:a,onClick:r,color:d.link.color,hoverColor:"blue",style:d.link,children:l})}},296746:(e,t,a)=>{a.d(t,{I:()=>p,f:()=>m});a(581454),a(296540);var s=()=>a(56366),n=()=>a(401497),i=()=>a(234748),o=()=>a(96689),r=()=>a(979340),l=()=>a(959013),d=()=>a(567865),c=()=>a(614505),u=()=>a(125565),g=a(474848);function m(e){let{selectedSpaceId:t,setSelectedSpaceId:a,spaceData:s}=e;const n=p(s,(0,l().tz)());return(0,g.jsx)(d().zr,{pillTitle:(0,g.jsx)(l().sA,{id:"managedUsersTab.table.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:i().I,selectedItem:t,setSelectedItem:a,items:n})}function p(e,t,a){const i=function(e){return(0,n().IS)((t=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block"},optionCaption:{display:"block",color:t.mediumTextColor,fontSize:12,lineHeight:"15px"},container:{padding:e?"8px 0":"4px 0",overflow:"hidden"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:6,fill:"currentColor"}})),[e])}(a);return(0,s().K8)((()=>e.map((e=>{const s=e.name,n=e.icon?{pointer:{table:o().NX,id:e.id,spaceId:e.id},icon:e.icon}:void 0;return{key:e.id,value:e.id,title:(0,g.jsxs)("div",{style:i.optionContainer,children:[(0,g.jsx)(c().A,{disabled:!0,icon:n,isEmptyPage:!1,size:24,title:s,isLarge:!0,emojiSize:24,isRaw:!1}),(0,g.jsxs)("div",{style:i.container,children:[(0,g.jsx)(u().A,{style:i.optionTitle,children:s}),!a&&(0,g.jsx)(u().A,{style:i.optionCaption,children:(0,r().u2)(e.subscriptionTier,t)})]})]}),shortTitle:s}}))),[e,t,i,a])}},297401:(e,t,a)=>{a.d(t,{A:()=>n});a(296540);var s=a(474848);const n=function(e){const t=(0,a(484714).v3)(),n={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginRight:-12,marginTop:-12,marginBottom:-12,paddingRight:12,paddingTop:12,paddingBottom:12}},{onClick:i,disabled:o}=e,{device:r}=t,l=r.isMobile?{...n.removeFilterButton,...n.removeFilterButtonMobile}:n.removeFilterButton;return(0,s.jsx)(a(285790).A,{icon:a(931121).J,onClick:i,disabled:o,disableBackground:!0,style:l})}},297780:(e,t,a)=>{a.d(t,{A:()=>l});var s=a.n(a(32485)),n=(a(296540),()=>a(484714)),i=()=>a(553965),o=()=>a(623580),r=a(474848);const l=function(e){let{readOnly:t,onClick:i,style:o,tokens:l,value:u,onRemoveLastToken:m,onChange:p,onSubmit:h,onBlur:f,overflowHorizontally:x,focus:v,type:y,placeholder:b,errorOutline:S,inputStyle:j,inputElementAttributes:w}=e;const A=(0,a(401497).DP)(),M=(0,n().v3)(),{device:C}=M;return(0,r.jsxs)("div",{className:t?void 0:s()({"notion-focusable-within":!0,"notion-focusable-within-error-outline":S}),onClick:i,style:C.isMobile?c(A,o):d(A,o),children:[x?(0,r.jsx)("div",{style:{display:"flex",flexShrink:0},children:l}):l,(0,r.jsx)(g,{tokens:l,value:u,onRemoveLastToken:m,onChange:p,onSubmit:h,onBlur:f,focus:v,readOnly:t,type:y,placeholder:b,inputStyle:j,inputElementAttributes:w})]})};function d(e,t){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",minHeight:32,boxShadow:e.inputBoxShadow,background:e.inputBackground,borderRadius:4,fontSize:14,cursor:"text",overflow:"hidden",padding:"7px 9px 0px",...t}}function c(e,t){return{...d(e,t),fontSize:14,padding:"7px 10px 0"}}const u={flexGrow:1,flexShrink:1,flexBasis:60,minWidth:60,width:"auto",lineHeight:"20px"};function g(e){let{tokens:t,value:a,onRemoveLastToken:s,onChange:l,onSubmit:d,onBlur:c,focus:g,readOnly:m,type:p,placeholder:h,inputStyle:f,inputElementAttributes:x}=e;const v=(0,n().v3)(),{device:y}=v,b=0===t.length;return(0,r.jsx)(o().A,{format:o().C.Transparent,...(0,i().A)({onKeyDown:e=>function(e,t,a){"Backspace"===e.key&&0===t.length&&a()}(e,a,s)},{onChange:l}),value:a,onSubmit:d,onBlur:c,focus:g,style:{...u,margin:y.isMobile?"0 8px 8px 0":"0 6px 6px 0"},readOnly:m,inputStyle:{height:18,...f},size:1,type:p,placeholder:b?h:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,inputElementAttributes:x})}},303129:(e,t,a)=>{a.d(t,{l:()=>c});a(581454);var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(96689),r=()=>a(630116),l=()=>a(511303),d=()=>a(625319);function c(e){const t=(0,n().v3)(),{organizationOwnerRecordCache:a}=(0,s.useContext)(l().N),{spaceIds:c}=(0,s.useContext)(d().D);return(0,i().K8)((()=>(e??c).map((e=>new(r().SL)(t,{id:e,table:o().NX},{inMemoryRecordCache:a})))),[a,c,e,t])}},311670:(e,t,a)=>{a.d(t,{A:()=>i,e:()=>s});let s=function(e){return e.Overview="overview",e.Users="users",e.Content="content",e.Search="search",e}({});class n extends(()=>a(757695))().default{getInitialState(){return{}}shouldRefreshState(e){const t=this.getState();return e!==t.currentSpaceId||!(t.currentTab!==s.Users||t.usersTabData&&t.usersTabData.usersAndStats)}}const i=new n},325020:(e,t,a)=>{a.d(t,{NQ:()=>u,YM:()=>d,_B:()=>g,sg:()=>m,zJ:()=>c});a(296540);var s=()=>a(401497),n=()=>a(959013),i=()=>a(100622),o=()=>a(534177),r=()=>a(464708),l=a(474848);function d(e){let{content:t,isBlue:a}=e;const n=(0,s().IS)((e=>({badge:{marginLeft:0,marginRight:6,padding:"2px 6px",fontSize:13,lineHeight:"18px",...a&&{background:"light"===e.mode?i().Tj.diffBackground:"rgba(35, 131, 226, 0.2)",color:e.blueColor}}})),[a]);return(0,l.jsx)(r().A,{content:t,style:n.badge})}function c(){return(0,l.jsx)(d,{content:(0,l.jsx)(n().sA,{id:"organizationConsole.singleUserView.suspendedBadge",defaultMessage:"Suspended"})})}function u(e){let{highestRole:t}=e;const a=function(){switch(t){case"owner":return(0,l.jsx)(n().sA,{id:"organizationConsole.organizationRole.ownerRole",defaultMessage:"Org owner"});case"member":return(0,l.jsx)(n().sA,{id:"organizationConsole.organizationRole.memberRole",defaultMessage:"Member"});case"guest":return(0,l.jsx)(n().sA,{id:"organizationConsole.organizationRole.guestRole",defaultMessage:"Guest"});case"none":return;default:(0,o().HB)(t)}}();return a?(0,l.jsx)(d,{isBlue:!0,content:a}):null}function g(e){let{emailDomain:t}=e;return t?(0,l.jsx)(d,{content:(0,l.jsx)(n().sA,{id:"organizationConsole.singleUserView.managedByDomainBadge",defaultMessage:"Managed by {domain}",values:{domain:t}})}):null}function m(){return(0,l.jsx)(d,{content:(0,l.jsx)(n().sA,{id:"organizationConsole.singleUserView.legalHoldBadge",defaultMessage:"On legal hold"})})}},333046:(e,t,a)=>{a.d(t,{X:()=>P,j:()=>z});a(944114),a(898992),a(354520),a(672577),a(581454);var s=a(296540),n=()=>a(56366),i=()=>a(401497),o=()=>a(784892),r=()=>a(888867),l=()=>a(959013),d=()=>a(534177),c=()=>a(56394),u=()=>a(972435),g=()=>a(722872),m=()=>a(37433),p=()=>a(962730),h=()=>a(377586),f=()=>a(970585),x=()=>a(898808),v=()=>a(493823),y=()=>a(760217),b=()=>a(928600),S=()=>a(939740),j=()=>a(14235),w=()=>a(204063),A=()=>a(89924),M=()=>a(125565),C=()=>a(484595),I=()=>a(806754),T=()=>a(881690),k=()=>a(297780),_=a(474848);const D=(0,l().YK)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.teams.placeholder",defaultMessage:"Search for teamspaces..."}});function z(e){let{selectedTeamIds:t,setSelectedTeamIds:a,onMenuClose:z,teamStores:N}=e;const R=(0,n().uB)(void 0,f().A),B=(0,i().IS)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},pillText:{marginLeft:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8},optionTitle:{display:"block"},noResultsMessage:{width:"100%",margin:"8px 12px"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"}})),[]),[L,E]=(0,s.useState)(!1),[O,U]=(0,s.useState)(""),F=(0,n().K8)((()=>[...N].sort(m().XE)),[N]),V=(0,n().K8)((()=>t.map((e=>N.find((t=>t.id===e)))).filter(d().O9)),[N,t]);function H(){E(!1),U(""),z()}function W(){U(""),a([])}function q(e){const s=t.includes(e)?[]:[e];a(s),U("")}const G=(0,s.useCallback)((e=>{U(e.target.value)}),[]),K=(0,n().K8)((()=>V.map((e=>{const s=e.getName();return(0,_.jsx)(T().A,{isSingle:!0,format:o().NY.Inline,showRemoveButton:!0,onClickRemove:()=>{const s=t.filter((t=>t!==e.id));a(s)},style:B.pillContainer,value:(0,_.jsxs)("div",{style:B.pillContents,children:[(0,_.jsx)(x().x,{disabled:!0,store:e,size:16}),(0,_.jsx)(M().A,{style:B.pillText,children:s})]})},e.id)}))),[V,t,a,B]);const Y=(0,_.jsx)(c().A,{on:t.length>0,icon:(0,r().s)(B.icon),title:(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.title",defaultMessage:"Teamspace"}),onClick:()=>E(!0)});return(0,_.jsx)(I().A,{children:(0,_.jsx)(j().Ay,{popupType:h().n.Popup,placementToOrigin:p().W.Bottom,alignmentToOrigin:p().C.Start,open:L,render:function(){const e=[];for(const n of F){const a=n.getName(),s=n.getTeamAccessLevel(),i=n.isDefault();a&&a.toLocaleLowerCase().includes(O)&&e.push({key:n.id,action:()=>q(n.id),render:e=>(0,_.jsx)(y().A,{...e,icon:(0,_.jsx)(C().A,{isSelected:t.includes(n.id)}),focused:!1,title:(0,_.jsxs)("div",{style:B.optionContainer,children:[(0,_.jsx)(x().x,{disabled:!0,store:n,size:24,style:B.teamIcon}),(0,_.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,_.jsx)(M().A,{style:B.optionTitle,children:a}),(0,_.jsx)(M().A,{style:B.optionCaption,children:P(s,i)})]})]})})})}const a={key:"no-results",action:()=>{},render:e=>(0,_.jsx)(M().A,{isSecondaryColor:!0,style:B.noResultsMessage,...e,children:(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.noResultsMessage",defaultMessage:"No results found."})})},s={key:"teamOptions",items:e.length>0?e:[a],render:e=>(0,_.jsx)(A().A,{...e,title:null,loading:!1})};return(0,_.jsxs)("div",{style:B.container,children:[(0,_.jsx)(k().A,{focus:!0,value:O,style:B.input,placeholder:u().A.formatMessage(D.placeholder),onChange:G,onRemoveLastToken:W,tokens:K}),(0,_.jsx)(b().A,{menuType:g().gu.Popup,header:null,maxHeight:250,width:300,children:(0,_.jsx)(S().Ay,{type:S().Oh.Vertical,store:R,initialFocus:0,sections:[s]})}),(0,_.jsxs)(A().A,{topBorder:!0,style:B.footer,children:[(0,_.jsx)(v().p,{onClick:W,children:(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.clearButton",defaultMessage:"Clear"})}),(0,_.jsx)(w().A,{onClick:H,children:(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:H,keepFocus:!0,origin:Y,preventScaleTransition:!0})})}function P(e,t){if(t)return(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.default",defaultMessage:"Default"});switch(e){case"private":return(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.private",defaultMessage:"Private"});case"closed":return(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.closed",defaultMessage:"Closed"});case"open":return(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.open",defaultMessage:"Open"});default:(0,d().HB)(e)}}},334013:(e,t,a)=>{a.d(t,{A:()=>x});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(56366),i=()=>a(401497),o=()=>a(842599),r=()=>a(959013),l=()=>a(534177),d=()=>a(14235),c=()=>a(417555),u=()=>a(856952),g=()=>a(743260),m=()=>a(962730),p=()=>a(406999),h=a(474848);function f(e){const{permissionsInviteStore:t}=e,a=(0,r().tz)(),d=(0,n().K8)((()=>{const{inputFocus:e}=t.state;return"invitee"===e}),[t]),m=(0,n().K8)((()=>t.state.tokenQuery),[t]),f=(0,n().K8)((()=>t.state.inviteTargets.filter((e=>(0,p().eL)(e)))),[t]),x=(0,n().K8)((()=>t.state.inviteRole||"editor"),[t]),v=(0,s.useCallback)((e=>{const{newInviteTargets:a,newInputValue:s,inputFocus:n}=e;a.length>0?t.setState({...t.state,inviteTargets:a,isInviteTargetsEmpty:!1,table:"space",inviteRole:x,...(0,l().O9)(s)&&{tokenQuery:s},...(0,l().O9)(n)&&{inputFocus:n}}):t.setState({...t.state,inviteTargets:[],isInviteTargetsEmpty:!0,table:"space",inviteRole:x,...(0,l().O9)(s)&&{tokenQuery:s},...(0,l().O9)(n)&&{inputFocus:n}})}),[x,t]),y=(0,s.useCallback)((e=>{const a=e.target.value,{extractedEmails:s,newInputValue:n}=(0,o().Ct)(a),i=s.map((e=>({type:"newUser",value:{email:e},source:"email"}))).filter((e=>!(0,g().mQ)({target:e,permissionsInviteStore:t}))).filter(p().eL),r=[...f,...i];v({newInviteTargets:r,newInputValue:n,inputFocus:"invitee"})}),[f,t,v]),b=(0,s.useCallback)((e=>{const t=f.filter((t=>t!==e));v({newInviteTargets:t})}),[f,v]),S=(0,s.useCallback)((()=>{const e=f.slice(0,-1);v({newInviteTargets:e})}),[f,v]),j=(0,i().IS)((()=>({tokenMenuItem:{borderRadius:6,padding:"4px 8px"}})),[]),w=f.map((e=>(0,h.jsx)(c().A,{target:e,onClickRemove:b},e.value.id)));return(0,h.jsx)(u().Ay,{focusInitial:!0,focus:d,showBorder:!0,format:u().le.Select,tokenWrapStyle:{gap:4},value:m,onChange:y,onRemoveLastToken:S,type:"email",placeholder:a.formatMessage({id:"spacePermissionsInviteEmailSection.tokenInput.placeholder",defaultMessage:"Search names or emails"}),tokens:w,focusAfterAnimation:!0,style:j.tokenMenuItem})}const x=function(e){const{permissionsInviteStore:t,disableAutoFocus:l,showCurrentUser:c}=e,u=(0,a(58293).r)(),x=e.parentStore||u,v=(0,n().K8)((()=>{var e;return"invitee"===(null===(e=t.state)||void 0===e?void 0:e.inputFocus)}),[t]),y=(0,s.useCallback)((()=>{const e=t.state.tokenQuery.trim();if((0,o().DT)(e)){const a=t.state.inviteTargets.filter((e=>(0,p().eL)(e))),s="editor",n=t.state.inviteRole||s,i={type:"newUser",value:{email:e},source:"email"};if(!(0,g().mQ)({target:i,permissionsInviteStore:t})){const e=[...a,i];t.setState({...t.state,inviteTargets:e,isInviteTargetsEmpty:!1,table:"space",inviteRole:n,tokenQuery:""})}}t.setState({...t.state,inputFocus:"none"})}),[t]),b=(0,s.useCallback)((e=>{t.setState({...t.state,inputFocus:"invitee"}),e.stopPropagation()}),[t]);(0,s.useEffect)((()=>{l||t.setState({...t.state,inputFocus:"invitee"})}),[t,l]);const S=(0,i().IS)((e=>({origin:{display:"flex",flexDirection:"column",width:"100%",gap:8,padding:2},emailText:{color:e.mediumTextColor}})),[]);return x?(0,h.jsx)(d().Ay,{placementToOrigin:m().W.Bottom,alignmentToOrigin:m().C.Start,originGap:10,open:v,popupType:d().nl.Popup,sameWidthAsOrigin:!0,disableMouseCapture:!0,enableOutsideClickDismiss:!0,onDismiss:y,render:()=>(0,h.jsx)(a(263919).A,{permissionsInviteStore:t,store:x,defaultRoleForSpaceBot:"editor",shouldShowBots:!1,shouldShowGroups:!1,sectionRenderLimit:4,membersOnly:!1,disableInvitedUsers:!1,hideCurrentUser:!c,hideUserTypeToken:!1,hideTitle:!0,defaultUserTitle:"name_and_email_unless_right",performSearchRequest:e.performSearchRequest}),origin:(0,h.jsxs)("div",{style:S.origin,onClick:b,children:[(0,h.jsx)(a(554509).D,{styleName:"UISmall-12px/Medium",customStyles:S.emailText,children:(0,h.jsx)(r().sA,{id:"spacePermissionsInviteEmailSection.title",defaultMessage:"Email addresses"})}),(0,h.jsx)(f,{permissionsInviteStore:t})]})}):null}},338499:(e,t,a)=>{a.d(t,{q3:()=>je,CX:()=>Ae,Hj:()=>Ce});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(713996),r=()=>a(959013),l=()=>a(496603),d=()=>a(534177),c=()=>a(449506),u=()=>a(901389),g=()=>a(300089),m=()=>a(898486),p=()=>a(972435),h=()=>a(963589),f=()=>a(204063),x=()=>a(375243),v=()=>a(806754),y=()=>a(495427),b=()=>a(366208),S=()=>a(522985),j=()=>a(187174),w=()=>a(511303);var A=()=>a(802042),M=()=>a(486019),C=()=>a(182392),I=()=>a(571499),T=()=>a(202345),k=()=>a(51922),_=()=>a(887720),D=()=>a(815756),z=()=>a(875166),P=()=>a(981982),N=a(474848);function R(e){let{selectedStatuses:t,setSelectedStatuses:a}=e;return(0,N.jsx)(P().VX,{pillTitle:(0,N.jsx)(r().sA,{id:"organizationEmailDomains.table.filters.status.title",defaultMessage:"Status"}),pillIcon:z().E,selectedItems:t,setSelectedItems:a,items:B})}const B=[b().A$.Success,b().A$.Pending,b().A$.Failure].map((e=>({key:e,value:e,title:(0,N.jsx)(x().d9,{status:e}),shortTitle:(0,x().xF)(e),dontShrinkTitle:!0})));var L=()=>a(688437),E=()=>a(401497),O=()=>a(12193),U=()=>a(7674),F=()=>a(864943),V=()=>a(107683),H=()=>a(2609);function W(e){const{onDismiss:t,domainVerification:a}=e,s=(0,E().IS)((e=>({headerIcon:{height:32,width:32,fill:e.icon.secondary},content:{width:400},fullButton:{width:"100%"}})),[]);return(0,N.jsx)(V().s,{isOpen:!0,onDismiss:t,render:e=>{let{sizeRange:n}=e;return(0,N.jsx)(U().tf,{showDismissButton:!1,sizeRange:n,header:(0,N.jsx)(H().rQ,{icon:(0,O().D)(s.headerIcon),title:(0,N.jsx)(r().sA,{id:"settingsConsole.emailDomains.invalidDomainModal.title",defaultMessage:"Unable to verify email domain"}),byline:(0,N.jsx)(r().sA,{id:"settingsConsole.emailDomains.invalidDomainModal.invalid",defaultMessage:"You are unable to verify the email domain <b>{domain}</b> because it has already been verified by another workspace or organization.",values:{domain:a.domain,b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,N.jsx)("b",{children:t})}}})}),footer:(0,N.jsx)("div",{style:s.content,children:(0,N.jsx)(F().A,{size:"lg",onClick:t,style:s.fullButton,children:(0,N.jsx)(r().sA,{id:"settingsConsole.emailDomains.invalidDomainModal.okay",defaultMessage:"OK"})})})})}})}var q=()=>a(467730),G=()=>a(55293),K=()=>a(96689),Y=()=>a(284371),Q=()=>a(436572),$=()=>a(630116),X=()=>a(625830),Z=()=>a(364280),J=()=>a(331542),ee=()=>a(554509),te=()=>a(614505),ae=()=>a(625319),se=()=>a(221723);function ne(e){let{domainVerification:t,onDismiss:a,organizationId:i,associatedAccountCount:o,linkedSpaceIds:l}=e;const g=(0,E().IS)((e=>({icon:{height:30,width:30,color:e.text.uiRedPrimary},confirmation:{display:"flex",width:"100%",justifyContent:"center",gap:10},modalContainer:{width:480},loadingContainer:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",height:100}})),[]),h=(0,n().v3)(),{refreshOrganization:f}=(0,s.useContext)(ae().D),[x,v]=(0,s.useState)(!1),[y,b]=(0,s.useState)(!1),S=(0,s.useCallback)((async()=>{if(!x||y)return;b(!0);const e=await c().callApi({eventName:"deleteVerifiedDomainsForOrganization",environment:h,data:{organizationId:i,emailDomainsToRemove:[t.domain]}});b(!1),a(),"success"===e.type?(f(),Q().D6({label:(0,N.jsx)(ee().D,{styleName:"UIRegular-14px/Regular",children:(0,N.jsx)(r().sA,{id:"organizationEmailDomainsTable.toastMessage.removeDomain.success",defaultMessage:"Successfully removed <b>{domain}</b>",values:{domain:t.domain,b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,N.jsx)("b",{children:t})}}})})})):u().f1((0,m().Hu)(p().A.getIntl(),e))}),[h,i,f,a,x,y,t.domain]);return(0,N.jsx)(V().s,{isOpen:!0,onDismiss:a,render:e=>{let{sizeRange:s}=e;return(0,N.jsx)("div",{style:g.modalContainer,children:(0,N.jsx)(U().tf,{showDismissButton:!1,sizeRange:s,header:(0,N.jsx)(H().rQ,{icon:(0,G().J)(g.icon),title:(0,N.jsx)(r().sA,{...oe.title}),byline:(0,d().O9)(l)&&(0,d().O9)(o)?(0,N.jsx)(r().sA,{id:"orgConsole.emailDomains.removeEmailDomainModal.byline",defaultMessage:"This will disable SAML SSO, revoke management for <b>{userCount, plural, one {# user} other {# users}}</b>, and remove <b>{spaceCount, plural, one {# linked workspace} other {# linked workspaces}}</b>.",values:{userCount:o,spaceCount:l.length,domain:t.domain,b:e=>(0,N.jsx)("span",{style:{fontWeight:Y().Wy.semibold},children:e})}}):null}),footer:(0,N.jsx)(H().jl,{isDarkRed:!0,primaryDisabled:!x||y,primaryText:(0,N.jsx)(r().sA,{...oe.removeButton}),primaryAction:S,secondaryText:(0,N.jsx)(r().sA,{...oe.cancelButton}),secondaryAction:a}),children:(0,d().O9)(l)?(0,N.jsxs)(Z().VP,{gap:24,width:"100%",children:[l.length?(0,N.jsx)(ie,{linkedSpaceIds:l}):null,(0,N.jsxs)("div",{style:g.confirmation,children:[(0,N.jsx)(X().A,{checked:x,size:14,checkSize:10,onClick:()=>v(!x)}),(0,N.jsx)(ee().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,N.jsx)(r().sA,{...oe.confirmation})})]})]}):(0,N.jsx)("div",{style:g.loadingContainer,children:(0,N.jsx)(J().A,{})})})})}})}function ie(e){const{linkedSpaceIds:t}=e,a=(0,n().v3)(),{organizationOwnerRecordCache:o}=(0,s.useContext)(w().N),[l,d]=(0,s.useState)(""),c=t.map((e=>new($().SL)(a,{id:e,table:K().NX},{inMemoryRecordCache:o}))),u=(0,i().K8)((()=>c.map((e=>({id:e.id,icon:(0,N.jsx)(te().A,{disabled:!0,icon:e.getIcon(),isEmptyPage:!1,title:e.getName(),size:se().iK,isLarge:!0}),name:e.getName()})))),[c]),g=(0,q().Ay)(l,u,(e=>e.name??""));return(0,N.jsx)(H().p6,{items:g,titleText:(0,N.jsx)(r().sA,{...oe.linkedWorkspaces}),headerText:(0,N.jsx)(r().sA,{...oe.workspaces}),headerAction:(0,N.jsx)(y().nv,{mode:y().Ke.AnimatedSearchButton,query:l,setQueryFilter:d})})}const oe=(0,r().YK)({title:{id:"orgConsole.emailDomains.removeEmailDomainModal.title",defaultMessage:"Remove email domain and workspaces?"},removeButton:{id:"orgConsole.emailDomains.removeEmailDomainModal.button.remove",defaultMessage:"Remove domain and workspaces"},cancelButton:{id:"orgConsole.emailDomains.removeEmailDomainModal.button.cancel",defaultMessage:"Cancel"},confirmation:{id:"orgConsole.emailDomains.removeEmailDomainModal.confirmation",defaultMessage:"I understand this cannot be undone"},linkedWorkspaces:{id:"orgConsole.emailDomains.removeEmailDomainModal.spacesList.title",defaultMessage:"Linked workspaces"},workspaces:{id:"orgConsole.emailDomains.removeEmailDomainModal.spacesList.header",defaultMessage:"Workspaces"}});var re=()=>a(174517),le=(a(944114),()=>a(525884)),de=()=>a(641300),ce=()=>a(566468),ue=()=>a(489143),ge=()=>a(135851),me=()=>a(743556);const pe=(0,r().YK)({domain:{id:"settingsConsole.organizationEmailDomains.table.header.domain",defaultMessage:"Email domain"},status:{id:"organizationEmailDomains.table.header.status",defaultMessage:"Status"}}),he={id:"domain",headerTitle:(0,N.jsx)(r().sA,{...pe.domain}),renderCell:e=>e.type===me().T.Loading?(0,N.jsx)(ce().mf,{}):(0,N.jsx)(ce().s7,{useThinTitle:!0,title:e.domain,rightContent:(0,N.jsx)(Se,{domainStatus:e.status,onViewDetails:"success"!==e.status?e.onShowDetails:void 0,onRemove:e.onRemove,isOnlyVerifiedDomain:e.isOnlyVerifiedDomain}),summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:"100%"}}),widthData:{widthPercent:26,minWidth:275,maxWidth:275},sortable:!1},fe={id:"spaces",headerTitle:(0,N.jsx)(r().sA,{id:"organizationEmailDomains.table.header.spaces",defaultMessage:"Linked workspaces"}),renderCell:e=>e.type!==me().T.Loading&&e.spaceStores?"success"===e.status?e.spaceStores.length<1?(0,N.jsx)(ee().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,N.jsx)(r().sA,{id:"organizationEmailDomains.table.spacesColumn.noSpaces",defaultMessage:"None"})}):(0,N.jsx)(a(817863).$,{spaceStores:e.spaceStores,showTooltip:!0,isLoading:!1}):void 0:(0,N.jsx)(ce().mf,{}),widthData:{widthPercent:25,minWidth:100},sortable:!1},xe={id:"associatedAccounts",headerTitle:(0,N.jsx)(r().sA,{id:"organizationEmailDomains.table.header.associatedAccounts",defaultMessage:"Associated user accounts"}),renderCell:e=>e.type===me().T.Loading||e.isAssociatedAccountCountLoading?(0,N.jsx)(ce().mf,{}):"success"===e.status?(0,N.jsx)(ee().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,N.jsx)(r().sA,{id:"organizationEmailDomains.table.associatedAccountsCount",defaultMessage:"{count, plural, one {# account} other {# accounts}}",values:{count:e.associatedAccountCount??0}})}):void 0,widthData:{widthPercent:25,minWidth:100},sortable:!1},ve={id:"status",headerTitle:(0,N.jsx)(r().sA,{...pe.status}),renderCell:e=>e.type===me().T.Loading?(0,N.jsx)(ce().mf,{}):(0,N.jsx)(x().d9,{status:e.status}),widthData:{widthPercent:25,minWidth:100},sortable:!1},ye=[he,ve,fe,xe];function be(e){let{domains:t,loading:a,setSelectedDomain:i,setOpenedModal:o,managedUsersCountState:l,spaceIdsForDomain:g,refetchPendingDomains:p}=e;const h=(0,n().v3)(),{organizationOwnerRecordCache:f}=(0,s.useContext)(w().N),v=(0,r().tz)(),y=(0,ue().A)(),b=(0,E().IS)((e=>(0,de().rC)({columnRenderInfo:ye,theme:e,containerMarginTop:0})),[]);const S=1===t.filter((e=>"verified"===e.data.type)).length,j=t.map((e=>{var t,a;let{domain:s,status:n,data:r}=e;const x=g?g[s]??[]:void 0;return{type:me().T.OrganizationEmailDomain,id:"verified"===r.type?s:r.id,isClickable:!1,domain:s,status:n,spaceStores:x?x.map((e=>{let{spaceId:t}=e;return new($().SL)(h,{id:t,table:K().NX},{inMemoryRecordCache:f})})):void 0,managedUsersCountState:l,associatedAccountCount:null!==(t=l.count)&&void 0!==t&&t.countsPerDomain?null===(a=l.count)||void 0===a?void 0:a.countsPerDomain[s]:void 0,isAssociatedAccountCountLoading:l.loading,onShowDetails:()=>function(e){i(e);const t="invalid"===e.type&&Date.now()<=e.expiresAt;o(t?je.InvalidEmailDomain:je.VerifyEmailDomain)}(r),onRemove:()=>async function(e){const{type:t}=e;if("invalid"===t||"unverified"===t){const t=await c().callApi({eventName:"deleteDomainVerificationCode",environment:h,data:{id:e.id}});return"failed"===t.type?u().f1((0,m().Hu)(v,t)):void("success"===t.type&&await p())}"verified"===t?(i(e),o(je.RemoveEmailDomain)):(0,d().HB)(t)}(r),isOnlyVerifiedDomain:S&&"verified"===r.type}})),A=a?0===j.length?(0,me().n)(5):[...j,...(0,me().n)(3)]:j,M=ye.map((e=>({...e,headerStyle:y.tableHeader,rowStyle:y.tableRow})));return(0,N.jsx)(de().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:M,rows:A,styles:b,renderNoRowsComponent:()=>(0,N.jsx)(x().Jd,{}),extendToFullScreen:ge().e})}function Se(e){let{onViewDetails:t,onRemove:s,domainStatus:n,isOnlyVerifiedDomain:i}=e;const o=(0,x().Rf)(),l=[];return t&&"pending"===n&&l.push({key:"verify",type:"action",icon:(0,le().A)(o.menuIcon),title:(0,N.jsx)(r().sA,{defaultMessage:"Verify domain",id:"organizationEmailDomainsTable.actionsMenu.onVerifyDomain.verify"}),caption:(0,N.jsx)(r().sA,{defaultMessage:"Confirm your DNS record was successfully updated.",id:"organizationEmailDomainsTable.actionsMenu.onVerifyDomain.verifyCaption"}),action:()=>t()}),t&&"failure"===n&&l.push({key:"details",type:"action",icon:(0,le().A)(o.menuIcon),title:(0,N.jsx)(r().sA,{defaultMessage:"View details",id:"organizationEmailDomainsTable.actionsMenu.onVerifyDomain.details"}),caption:(0,N.jsx)(r().sA,{defaultMessage:"See more information about the state of this domain verification record.",id:"organizationEmailDomainsTable.actionsMenu.onVerifyDomain.detailsCaption"}),action:()=>t()}),s&&l.push({key:"remove",type:"action",icon:(0,a(236262).I)(o.menuIcon),title:(0,N.jsx)(r().sA,{id:"organizationEmailDomainsTable.actionsMenu.onRemove.remove",defaultMessage:"Remove domain"}),caption:"success"===n?(0,N.jsx)(r().sA,{id:"organizationEmailDomainsTable.actionsMenu.onRemove.removeSuccessfulCaption",defaultMessage:"Delete domain verification and remove linked organization workspaces."}):(0,N.jsx)(r().sA,{id:"organizationEmailDomainsTable.actionsMenu.onRemove.removeCaption",defaultMessage:"Delete domain verification record."}),action:()=>{i||s()},disabled:i,tooltipTitle:(0,N.jsx)(r().sA,{id:"organizationEmailDomainsTable.actionsMenu.onRemove.disabledTooltip",defaultMessage:"You may not remove the last verified domain from your organization."}),tooltipDisabled:!i}),0===l.length?null:(0,N.jsx)(ce().bd,{items:l})}let je=function(e){return e.AddEmailDomain="add-email-domain",e.VerifyEmailDomain="verify-email-domain",e.RemoveEmailDomain="remove-email-domain",e.InvalidEmailDomain="invalid-email-domain",e}({});const we=[{id:he.id,name:p().A.formatMessage(pe.domain),type:"title"},{id:ve.id,name:p().A.formatMessage(pe.status),type:"status"}];function Ae(e){var t;let{organizationStore:a}=e;const u=(0,n().v3)(),m=(0,h().X)("organization_console_ga_enabled"),p=(0,M().F)(),[b,z]=(0,s.useState)([]),[P,B]=(0,s.useState)(),[L,E]=(0,s.useState)(),[O,U]=(0,s.useState)(!1),[F,V]=(0,s.useState)(),H=F??L??[],W=(0,A().o)({organizationId:a.id,includeCountsPerDomain:!0}),q=(0,i().K8)((()=>a.getEmailDomains()),[a]),G=function(e){const{organizationId:t,domains:a}=e,i=(0,n().v3)(),{updateCacheWithRecordMap:o}=(0,s.useContext)(w().N),[{status:r,value:l}]=(0,j().Yb)((async()=>{const e=await c().callApi({eventName:"getOrganizationSpacesForDomain",environment:i,data:{organizationId:t,domains:a}});if("success"===e.type)return o({data:e.data}),e.data;if("failed"===e.type)throw e.error;return(0,d().HB)(e)}),[i,t,a,o]);return{loading:"pending"===r,didError:"rejected"===r,data:l}}({organizationId:a.id,domains:q}),K=G.loading?void 0:l().$z(null===(t=G.data)||void 0===t?void 0:t.spaceEmailDomains,(e=>e.emailDomain)),Y=(0,s.useMemo)((()=>q.map(x().vv).filter((e=>Ie(e,P,b)))),[q,b,P]),{domainVerifications:Q,refetchDomainVerifications:$,loading:X}=(0,S().J)({organizationId:a.id}),Z=function(e){let{domains:t,appliedSorts:a}=e;if(!a)return t;const s=a.map((e=>{let{propertyId:t}=e;return t===ve.id?e=>Te[e.status]:e=>{var t;return null===(t=e.domain)||void 0===t?void 0:t.toLowerCase()}})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,d().HB)(t)}));return l().My(t,s,n)}({domains:[...Y,...(0,i().K8)((()=>Q?Q.map((e=>Ce(e))).filter((e=>Ie(e,P,b))):[]),[Q,b,P])],appliedSorts:L}),[J,ee]=(0,s.useState)(),[te,ae]=(0,s.useState)();if(!m)return(0,N.jsx)(r().sA,{...ke.gaNotEnabledError});const se=(0,N.jsx)(r().sA,{...ke.title});return(0,N.jsx)(I().D,{breadcrumbs:[{message:(0,N.jsx)(r().sA,{...ke.goBack}),onClick:()=>{(0,C().i)({environment:u,from:{tabRoute:o().Vo,properties:{subtab:o().al.EmailDomains}},organizationId:a.id,tabRoute:o().Vo})}},{message:se}],children:(0,N.jsxs)(T().t,{children:[(0,N.jsx)(k()._,{title:se,byline:(0,N.jsx)(r().sA,{...ke.description})}),(0,N.jsxs)("div",{style:p.tableHeader,children:[(0,N.jsxs)("div",{style:p.leftContent,children:[(0,N.jsx)(v().A,{children:(0,N.jsx)(D().e,{sortProperties:we,isMenuOpen:O,setIsMenuOpen:U,onApply:e=>{U(!1),E(e),V(void 0)},currentSorts:H})}),H.length>0?(0,N.jsx)(g().he,{}):null,(0,N.jsx)(R,{selectedStatuses:b,setSelectedStatuses:z})]}),(0,N.jsxs)("div",{style:p.rightContent,children:[(0,N.jsx)(_().x,{appliedSorts:L,openSortPillMenu:e=>{e&&V([{propertyId:e,direction:"ascending"}]),U(!0)},sortProperties:we}),(0,N.jsx)(y().nv,{mode:y().Ke.AnimatedSearchButton,query:P,setQueryFilter:B}),(0,N.jsx)(f().A,{onClick:()=>ee(je.AddEmailDomain),children:(0,N.jsx)(r().sA,{...ke.addDomainButton})})]})]}),(0,N.jsx)(be,{domains:Z,loading:X,setOpenedModal:ee,setSelectedDomain:ae,managedUsersCountState:W,spaceIdsForDomain:K,refetchPendingDomains:$}),(0,N.jsx)(Me,{openedModal:J,setOpenedModal:ee,selectedDomain:te,setSelectedDomain:ae,organizationId:a.id,refetchPendingDomains:$,managedUsersCountState:W,spaceIdsForDomain:K})]})})}function Me(e){let{openedModal:t,setOpenedModal:a,refetchPendingDomains:i,selectedDomain:o,setSelectedDomain:l,organizationId:g,managedUsersCountState:p,spaceIdsForDomain:h}=e;const f=(0,n().v3)(),x=(0,r().tz)(),v=()=>a(void 0),y=(0,s.useCallback)((async e=>{const t=await c().callApi({eventName:"deleteDomainVerificationCode",environment:f,data:{id:e.id}});if("failed"===t.type)return u().f1((0,m().Hu)(x,t));const a=await c().callApi({eventName:"createDomainVerificationCode",environment:f,data:{type:"org_saml_config",domain:e.domain,organizationId:g}});if("failed"===a.type)return u().f1((0,m().Hu)(x,a));i(),l(Ce(a.data.domainVerification).data)}),[f,x,g,i,l]);if(!t)return null;if(t===je.RemoveEmailDomain){var b;if(!o||"verified"!==o.type)return null;const e=h?(h[o.domain]??[]).map((e=>e.spaceId)):void 0;return(0,N.jsx)(ne,{organizationId:g,onDismiss:v,domainVerification:o,associatedAccountCount:null!==(b=p.count)&&void 0!==b&&b.countsPerDomain?p.count.countsPerDomain[o.domain]:void 0,linkedSpaceIds:e})}return t===je.VerifyEmailDomain?o&&"verified"!==o.type?(0,N.jsx)(re().p,{onDismiss:v,refetchPendingDomains:i,domainVerification:o,regenerateCode:y}):null:t===je.AddEmailDomain?(0,N.jsx)(L().nb,{organizationId:g,onDismiss:v,onSubmit:e=>{i(),l(e),a(je.VerifyEmailDomain)}}):t===je.InvalidEmailDomain?o&&"invalid"===o.type?(0,N.jsx)(W,{onDismiss:v,domainVerification:o}):null:void(0,d().HB)(t)}function Ce(e){return(0,x().W0)({id:e.id,domain:e.domain,verificationCode:e.verification_code,createdAt:e.created_at,expiresAt:e.expires_at,verifiedAt:e.verified_at,invalidatedAt:e.info.invalidated_at})}function Ie(e,t,a){let s=!t||e.domain.toLowerCase().includes(t.toLowerCase());return a.length&&(s=s&&a.includes(e.status)),s}const Te={[b().A$.Success]:0,[b().A$.Pending]:1,[b().A$.Failure]:2};const ke=(0,r().YK)({title:{id:"organizationEmailDomainsSubTab.title",defaultMessage:"Manage email domains"},description:{id:"organizationEmailDomainsSubTab.description",defaultMessage:"Verify email domains to manage matching user accounts and associated organization workspaces."},addDomainButton:{id:"organizationEmailDomainsSubTab.button.addEmailDomain",defaultMessage:"Add email domain"},gaNotEnabledError:{id:"organizationEmailDomainsSubTab.notEnabled",defaultMessage:"This feature is not available"},goBack:{id:"organizationEmailDomainsSubTab.breadcrumb.goBack",defaultMessage:"General"}})},366208:(e,t,a)=>{a.d(t,{A$:()=>o,Ay:()=>l});a(296540);var s=()=>a(962730),n=()=>a(881690),i=a(474848);const o={Success:"success",Pending:"pending",Failure:"failure"};const r={display:"flex",justifyContent:"center",alignItems:"baseline"},l=function(e){let{status:t,value:l,renderTooltip:d,...c}=e;const u=(0,a(401497).DP)(),g={[o.Success]:u.statusTokenBackground.green,[o.Pending]:u.statusTokenBackground.yellow,[o.Failure]:u.statusTokenBackground.red},m={[o.Success]:u.statusTokenIndicator.green,[o.Pending]:u.statusTokenIndicator.yellow,[o.Failure]:u.statusTokenIndicator.red},p={[o.Success]:u.statusTokenText.green,[o.Pending]:u.statusTokenText.yellow,[o.Failure]:u.statusTokenText.red};return d?(0,i.jsx)(n().A,{...c,backgroundColor:g[t],color:p[t],value:(0,i.jsx)(a(859428).A,{placement:s().W.Bottom,alignment:s().C.Start,renderTooltip:d,render:e=>(0,i.jsxs)("div",{style:r,...e,children:[(0,i.jsx)("div",{style:{background:m[t],width:8,height:8,borderRadius:"100%",marginRight:4}}),l]})})}):(0,i.jsx)(n().A,{...c,backgroundColor:g[t],color:p[t],value:(0,i.jsxs)("div",{style:r,children:[(0,i.jsx)("div",{style:{background:m[t],width:8,height:8,borderRadius:"100%",marginRight:4}}),l]})})}},366951:(e,t,a)=>{a.d(t,{A:()=>n});a(296540);var s=a(474848);const n=function(){return(0,s.jsx)("div",{style:{},children:(0,s.jsx)(a(298697).A,{paragraphs:[{lineHeight:40,lineMargin:5,sectionWidths:[100],repeat:8,sectionMargin:10}]})})}},368332:(e,t,a)=>{a.d(t,{a:()=>i,k:()=>o});a(898992),a(672577);var s=()=>a(326399);const n={externalWorkspaceName:{defaultMessage:"External workspace",id:"managedUsers.externalWorkspaceName",description:"A generic name to replace the real name of an external workspace."}};function i(e){return e.formatMessage(n.externalWorkspaceName)}function o(e){if(!e)return;const t=Object.entries(s().iI).find((t=>{let[a,s]=t;return s===e}));if(t){return t[0]}}},371895:(e,t,a)=>{a.d(t,{u:()=>r});a(296540);var s=()=>a(959013),n=()=>a(534177),i=()=>a(566468),o=a(474848);function r(e){let{pageStatus:t}=e;return(0,o.jsx)(i().s7,{useThinTitle:!0,title:l(t)})}function l(e){switch(e){case"alive":return(0,o.jsx)(s().sA,{id:"adminContentSearchTab.pagesTable.pageStatusCell.active",defaultMessage:"Active"});case"in_trash":return(0,o.jsx)(s().sA,{id:"adminContentSearchTab.pagesTable.pageStatusCell.trash",defaultMessage:"In Trash"});case"deleted_from_trash":return(0,o.jsx)(s().sA,{id:"adminContentSearchTab.pagesTable.pageStatusCell.retained",defaultMessage:"Retained"});default:(0,n().HB)(e)}}},374255:(e,t,a)=>{a.d(t,{N:()=>f});a(581454),a(296540);var s=()=>a(56366),n=()=>a(401497),i=()=>a(959013),o=()=>a(100622),r=()=>a(534177),l=()=>a(284371),d=()=>a(898808),c=()=>a(298697),u=()=>a(614505),g=()=>a(16006),m=()=>a(125565),p=()=>a(453697),h=a(474848);function f(e){let{title:t,items:a,loading:s,error:i,titleStyle:o,containerStyle:r}=e;const d=(0,n().IS)((e=>({title:{alignSelf:"center",maxWidth:"100%",fontWeight:l().Wy.semibold,marginBottom:8,...l().RC},container:{flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",height:"100%",width:"100%",border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,padding:12,overflow:"hidden"}})),[]);return(0,h.jsxs)("div",{style:{...d.container,...r},children:[(0,h.jsx)(m().A,{style:{...d.title,...o},showTooltipWhenTruncated:!0,children:t}),s?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(v,{}),(0,h.jsx)(v,{}),(0,h.jsx)(v,{}),(0,h.jsx)(v,{}),(0,h.jsx)(v,{})]}):i?(0,h.jsx)(y,{}):a.map(((e,t)=>(0,h.jsx)(x,{item:e},t)))]})}function x(e){let{item:t}=e;const{store:a,caption:n}=t,o=(0,i().tz)(),l=b(),c=(0,s().K8)((()=>{switch(a.table){case"block":return(0,h.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,h.jsx)(u().A,{icon:a.getIcon(),size:18,isEmptyPage:!1,disabled:!0}),(0,h.jsx)(g().A,{store:a})]});case"notion_user":return(0,h.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,h.jsx)(p().A,{userStore:a,size:18}),(0,h.jsx)(m().A,{children:a.getDisplayName(o)})]});case"team":const e=a.getName();return(0,h.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,h.jsx)(d().x,{disabled:!0,store:a,size:20}),(0,h.jsx)(m().A,{children:e})]});default:(0,r().HB)(a)}}),[a,l.nameAndIconContainer,o]);return(0,h.jsxs)("div",{style:l.container,children:[(0,h.jsx)(m().A,{style:l.label,children:c}),(0,h.jsx)("div",{style:l.caption,children:(0,h.jsx)(m().A,{isSecondaryColor:!0,isSmall:!0,children:n})})]})}function v(){const e=b();return(0,h.jsxs)("div",{style:e.container,children:[(0,h.jsx)(m().A,{style:e.label,children:(0,h.jsx)(c().A,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})}),(0,h.jsx)("div",{style:e.loadingCaption,children:(0,h.jsx)(c().A,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})})]})}function y(){const e=b();return(0,h.jsx)("div",{style:e.container,children:(0,h.jsx)(m().A,{style:e.errorLabel,children:(0,h.jsx)(i().sA,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,h.jsx)("br",{})}})})})}function b(){return(0,n().IS)((e=>({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingBlock:4,gap:4},nameAndIconContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:8,alignItems:"center",width:"100%"},label:{width:"100%"},caption:{display:"flex",justifyContent:"center",alignItems:"center"},loadingCaption:{display:"block",width:"50%"},errorLabel:{width:"100%",textAlign:"center",color:o().Ay.red}})),[])}},375243:(e,t,a)=>{a.d(t,{Jd:()=>k,d9:()=>_,Ay:()=>B,W0:()=>R,vv:()=>N,xF:()=>P,Rf:()=>z});a(944114),a(581454);var s=a(296540),n=()=>a(401497),i=()=>a(959013),o=()=>a(534177),r=()=>a(901389),l=()=>a(641300),d=()=>a(760217),c=()=>a(554509),u=()=>a(204063),g=()=>a(125565),m=()=>a(449506),p=()=>a(989423),h=()=>a(898486),f=()=>a(662303),x=()=>a(284371),v=a(474848);const y=(0,i().YK)({samlConfigSubtitle:{id:"verifyDomainModal.addNewDomain.samlConfig.subtitle",defaultMessage:"Users with a verified domain can log in {br}using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.addNewDomain.integration.subtitle",defaultMessage:"Link preview integrations must verify {br}domains before they are published."}});const b=function(e){let{handleAddNewDomain:t,loading:r,verificationType:l}=e;const[d,c]=(0,s.useState)(""),m=!Boolean(d),p=(0,s.useCallback)((e=>{c(e.target.value)}),[]),h=(0,n().IS)((()=>({title:{fontFamily:x().vc(f().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:x().vc(f().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},input:{marginTop:22,marginBottom:14},button:{width:"100%",opacity:m?.5:1}})),[m]);let b;switch(l){case"integration":b=y.integrationSubtitle;break;case"saml_config":b=y.samlConfigSubtitle;break;default:(0,o().HB)(l)}return(0,v.jsxs)(s.Fragment,{children:[(0,v.jsx)(g().A,{style:h.title,children:(0,v.jsx)(i().sA,{id:"verifyDomainModal.addNewDomain.title",defaultMessage:"Add new domain"})}),(0,v.jsx)(g().A,{style:h.subtitle,isMultiline:!0,children:(0,v.jsx)(i().sA,{...b,values:{br:(0,v.jsx)("br",{})}})}),(0,v.jsx)(a(623580).A,{value:d,style:h.input,placeholder:"notion.so",onChange:p}),(0,v.jsx)(u().A,{onClick:()=>t(d),style:h.button,size:"lg",disabled:m,children:r?(0,v.jsx)(a(331542).A,{}):(0,v.jsx)(i().sA,{id:"verifyDomainModal.addNewDomain.next",defaultMessage:"Next"})})]})};var S=()=>a(864943);const j=function(e){let{domain:t,isExpired:a,onClose:o}=e;const r=(0,n().IS)((e=>({title:{fontFamily:x().vc(f().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:x().vc(f().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);return(0,v.jsxs)(s.Fragment,{children:[(0,v.jsx)(g().A,{style:r.title,isMultiline:!0,children:(0,v.jsx)(i().sA,{id:"verifyDomainModal.invalidDomain.title",defaultMessage:"Unable to verify {domain}",values:{domain:t}})}),(0,v.jsx)(g().A,{style:r.subtitle,isMultiline:!0,children:a?(0,v.jsx)(i().sA,{id:"verifyDomainModal.invalidDomain.expired",defaultMessage:"The code for this domain's verification has expired."}):(0,v.jsx)(i().sA,{id:"verifyDomainModal.invalidDomain.invalid",defaultMessage:"You are unable to verify this domain because it has already been verified by another workspace."})}),(0,v.jsx)(S().A,{size:"lg",onClick:o,style:{width:"100%"},children:(0,v.jsx)(i().sA,{id:"verifyDomainModal.invalidDomain.okay",defaultMessage:"OK"})})]})},w=(0,i().YK)({samlConfigSubtitle:{id:"verifyDomainModal.verifiedDomain.samlConfig.subtitle",defaultMessage:"Users are able to use this email domain to{br}log in using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.verifiedDomain.integration.subtitle",defaultMessage:"This integration can unfurl URLs containing this domain."}});const A=function(e){let{domain:t,onClose:a,verificationType:r}=e;const l=(0,n().IS)((()=>({title:{fontFamily:x().vc(f().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:x().vc(f().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);let d;switch(r){case"saml_config":d=w.samlConfigSubtitle;break;case"integration":d=w.integrationSubtitle;break;default:(0,o().HB)(r)}return(0,v.jsxs)(s.Fragment,{children:[(0,v.jsx)(g().A,{style:l.title,isMultiline:!0,children:(0,v.jsx)(i().sA,{id:"verifyDomainModal.verifiedDomain.title",defaultMessage:"Successfully verified {domain}",values:{domain:t}})}),(0,v.jsx)(g().A,{style:l.subtitle,isMultiline:!0,children:(0,v.jsx)(i().sA,{...d,values:{br:(0,v.jsx)("br",{})}})}),(0,v.jsx)(S().A,{size:"lg",onClick:a,style:{width:"100%"},children:(0,v.jsx)(i().sA,{id:"verifyDomainModal.verifiedDomain.okay",defaultMessage:"OK"})})]})};const M=function(e){const t=(0,a(484714).v3)(),l=(0,i().tz)(),d=(0,n().DP)(),[c,u]=(0,a(56366).$y)(e.store,a(543649).A),{verificationType:g,verificationTargetId:f,refreshDomains:x}=e,y=(0,s.useCallback)((()=>{u((e=>({...e,loading:!1,modalOpen:!1})))}),[u]),S=(0,s.useCallback)((async e=>{u((e=>({...e,loading:!0})));const s="integration"===g?{type:g,integrationId:f,domain:e}:{type:g,spaceId:f,domain:e},n=await m().callApi({eventName:"createDomainVerificationCode",environment:t,data:s});if("success"===n.type){x(),p().vd(t,"domain_verification_domain_added",{type:g});const e=n.data.domainVerification,s=(0,a(486345).pl)(e);u((e=>({...e,domainVerification:s,loading:!1})))}else r().f1((0,h().Hu)(l,n)),u((e=>({...e,loading:!1})))}),[t,u,f,x,g,l]),w=(0,s.useCallback)((async e=>{u((e=>({...e,loading:!0})));const a=await m().callApi({eventName:"verifyDomain",environment:t,data:{verificationId:e.id}});if(p().vd(t,"domain_verification_verification_attempted",{type:g}),"success"===a.type){x(),p().vd(t,"domain_verification_domain_verified",{type:g});const a={type:"verified",domain:e.domain};u((e=>({...e,domainVerification:a,loading:!1})))}else r().f1((0,h().Hu)(l,a)),u((e=>({...e,loading:!1})))}),[t,l,u,x,g]),M=(0,s.useCallback)((()=>{if(!c.domainVerification)return(0,v.jsx)(b,{handleAddNewDomain:S,loading:c.loading,verificationType:g});switch(c.domainVerification.type){case"invalid":return(0,v.jsx)(j,{domain:c.domainVerification.domain,isExpired:Date.now()>c.domainVerification.expiresAt,onClose:y});case"unverified":return(0,v.jsx)(a(437594).ZQ,{handleVerifyDomain:w,domainVerification:c.domainVerification,loading:c.loading});case"verified":return(0,v.jsx)(A,{domain:c.domainVerification.domain,onClose:y,verificationType:g});default:(0,o().HB)(c.domainVerification)}}),[c.domainVerification,c.loading,w,S,y,g]);return(0,v.jsx)(a(957986).A,{open:c.modalOpen,preventHideChildrenWhileOpening:!0,onDismiss:y,render:()=>(0,v.jsx)("div",{style:{background:d.popoverBackground,width:410,padding:24,borderRadius:4},children:M()})})};var C=()=>a(366208);const I=[{id:"domain",headerTitle:(0,v.jsx)(i().sA,{id:"domainVerificationTable.table.header.domain",defaultMessage:"Domain"}),renderCell:e=>(0,v.jsx)(g().A,{children:e.domain}),widthData:{width:100},sortable:!1},{id:"status",headerTitle:(0,v.jsx)(i().sA,{id:"domainVerificationTable.table.header.status",defaultMessage:"Status"}),renderCell:e=>(0,v.jsx)(_,{status:e.status}),widthData:{width:100},sortable:!1},{id:"actions",headerTitle:null,renderCell:e=>(0,v.jsx)(D,{onShowDetails:e.onShowDetails,onRemove:e.onRemove}),widthData:{width:20},sortable:!1}],T=(0,i().YK)({verifiedSAMLWarning:{defaultMessage:"Deleting this domain will prevent others with this email from logging in using SAML SSO.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.description"},verifiedIntegrationsWarning:{defaultMessage:"Deleting this domain will prevent integrations from unfurling urls that contain this domain.",id:"domainVerificationInput.myIntegrations.emailDomainsSection.removeDomain.description"},unverifiedDomainWarning:{defaultMessage:"Deleting this domain will restart its verification process. A new verification code will be generated for this domain in the next verification attempt.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.pending.description"}});function k(){return(0,v.jsx)(g().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,v.jsx)(i().sA,{id:"securitySAMLSettings.emailDomainsSection.emptyTable",defaultMessage:"No domains configured."})})}function _(e){let{status:t}=e;const a=(0,n().IS)((e=>{const a={[C().A$.Success]:e.statusTokenBackground.green,[C().A$.Pending]:e.statusTokenBackground.yellow,[C().A$.Failure]:e.statusTokenBackground.red},s={[C().A$.Success]:e.statusTokenIndicator.green,[C().A$.Pending]:e.statusTokenIndicator.yellow,[C().A$.Failure]:e.statusTokenIndicator.red},n={[C().A$.Success]:e.statusTokenText.green,[C().A$.Pending]:e.statusTokenText.yellow,[C().A$.Failure]:e.statusTokenText.red};return{container:{background:a[t],color:n[t],display:"flex",justifyContent:"center",alignItems:"center",gap:6,borderRadius:18,height:20,paddingLeft:7,paddingRight:9},dot:{background:s[t],width:8,height:8,borderRadius:"100%"}}}),[t]);return(0,v.jsxs)("div",{style:a.container,children:[(0,v.jsx)("div",{style:a.dot}),(0,v.jsx)(c().D,{styleName:"UIRegular-14px/Medium",children:P(t)})]})}function D(e){let{onShowDetails:t,onRemove:s}=e;const n=z(),o=[];return t&&o.push({key:"details",action:()=>t(),render:e=>(0,v.jsx)(d().A,{...e,style:n.menuItem,focused:!1,icon:(0,a(738418).G)(n.menuIcon),title:(0,v.jsx)(i().sA,{defaultMessage:"View details",id:"securitySAMLSettings.emailDomainsSection.details"}),caption:(0,v.jsx)(i().sA,{defaultMessage:"See more information about the state of this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.detailsCaption"}),shouldWrapCaption:!0})}),s&&o.push({key:"remove",action:()=>s(),render:e=>(0,v.jsx)(d().A,{...e,style:n.menuItem,focused:!1,icon:(0,a(735384).I)(n.menuIcon),title:(0,v.jsx)(i().sA,{defaultMessage:"Remove domain",id:"securitySAMLSettings.emailDomainsSection.remove"}),caption:(0,v.jsx)(i().sA,{defaultMessage:"Delete this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.removeCaption"}),shouldWrapCaption:!0})}),0===o.length?null:(0,v.jsx)(a(75491).ED,{hideDropdownIcon:!0,title:(0,a(30626)._)(n.primaryIcon),items:o})}function z(){return(0,n().IS)((e=>({primaryIcon:{width:14,height:14,color:e.mediumIconColor,fill:"currentColor"},menuItem:{width:250},menuIcon:{width:14,height:14,color:e.regularIconColor,fill:"currentColor"}})),[])}function P(e){switch(e){case C().A$.Success:return(0,v.jsx)(i().sA,{defaultMessage:"Verified",id:"domainVerificationInput.emailDomainsSection.statusToken.verified"});case C().A$.Pending:return(0,v.jsx)(i().sA,{defaultMessage:"Pending",id:"domainVerificationInput.emailDomainsSection.statusToken.pending"});case C().A$.Failure:return(0,v.jsx)(i().sA,{defaultMessage:"Failed",id:"domainVerificationInput.emailDomainsSection.statusToken.failed"});default:(0,o().HB)(e)}}function N(e){return{domain:e,status:C().A$.Success,data:{type:"verified",domain:e}}}function R(e){return Date.now()>e.expiresAt||Boolean(e.invalidatedAt)?{domain:e.domain,status:C().A$.Failure,data:{type:"invalid",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}:{domain:e.domain,status:C().A$.Pending,data:{type:"unverified",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}}const B=function(e){const{disabled:t,domains:a,domainVerificationStore:d,verificationType:c,verificationTargetId:g,refreshDomains:m,onRemoveDomain:p,onClickAddDomain:h,renderOverrideAddDomainButton:f}=e,x=(0,n().IS)((e=>(0,l().rC)({columnRenderInfo:I,theme:e,containerMarginTop:0})),[]);function y(){t||(h&&h(),d.setState({domainVerification:void 0,loading:!1,modalOpen:!0}))}async function b(e,t){let a;if(t===C().A$.Failure)return void p(e);t===C().A$.Pending?a=T.unverifiedDomainWarning:t===C().A$.Success?a="saml_config"===c?T.verifiedSAMLWarning:T.verifiedIntegrationsWarning:(0,o().HB)(t);const{accept:s}=await r().Gh(function(e){return{mode:"wide",message:(0,v.jsx)(i().sA,{defaultMessage:"Delete this domain?",id:"domainVerificationInput.emailDomainsSection.removeDomain.message"}),description:(0,v.jsx)(i().sA,{...e}),acceptLabel:(0,v.jsx)(i().sA,{id:"domainVerificationInput.emailDomainsSection.removeDomain.accept",defaultMessage:"Delete domain"}),cancelLabel:(0,v.jsx)(i().sA,{id:"domainVerificationInput.emailDomainsSection.removeDomain.cancel",defaultMessage:"Cancel"})}}(a));s&&p(e)}const S=a.map((e=>{let{domain:a,status:s,data:n}=e;return{id:"verified"===n.type?a:n.id,isClickable:!1,domain:a,status:s,onShowDetails:t?void 0:()=>function(e){t||d.setState({domainVerification:e,loading:!1,modalOpen:!0})}(n),onRemove:t?void 0:()=>b(n,s)}}));return(0,v.jsxs)(s.Fragment,{children:[f?f(y):(0,v.jsx)(u().A,{size:"lg",disabled:t,onClick:y,style:{margin:"4px 0px 16px",width:"fit-content"},children:(0,v.jsx)(i().sA,{defaultMessage:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"})}),(0,v.jsx)(l().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:I,rows:S,styles:x,renderNoRowsComponent:()=>(0,v.jsx)(k,{})}),(0,v.jsx)(M,{store:d,verificationTargetId:g,verificationType:c,refreshDomains:m})]})}},378941:(e,t,a)=>{a.d(t,{BS:()=>f,Hf:()=>h,J7:()=>g,NZ:()=>p,XC:()=>x,hs:()=>m});a(16280),a(944114),a(898992),a(354520),a(672577),a(581454);var s=()=>a(857639),n=()=>a(792071),i=()=>a(277816),o=()=>a(534177),r=()=>a(449506),l=()=>a(246826),d=()=>a(317909),c=()=>a(351360),u=()=>a(630116);function g(e){let{trustedDomainIds:t,spaceStore:a}=e;return t.map((e=>{const t=u().LX.createChildStore(a,{table:i().A,id:e,spaceId:a.id});if(t.canRead())return t})).filter(o().O9)}async function m(e){let{environment:t,spaceId:a,currentUserId:n,organizationId:i}=e;const o=await r().callApi({eventName:"getTrustedDomainsNumberOfMembers",environment:t,data:{spaceId:a,organizationId:i},userId:n});return"failed"===o.type?(s().rateLimitedLog({from:"trustedDomainHelpers",level:"error",type:"getTrustedDomainsNumberOfMembersForSpaceFailed"}),[]):o.data.results}function p(e){let{environment:t,trustedEmailDomain:a,trustedDomainStores:s,spaceStore:n,spaceBasicSettingsStore:o}=e,r=s.find((e=>e.getEmailDomain()===a));const c=o.state.emailDomains;return r?(d().createAndCommit({userAction:"trustedDomainActions.setTrustedDomainDLSEnabled",environment:t,canUndo:!0,perform:e=>{l().zv({store:n,data:{email_domains:c},transaction:e}),l().zv({store:r,data:{domain_link_sharing_enabled:!0,join_space_method:"request_to_join"},transaction:e})}}),r):(d().createAndCommit({userAction:"trustedDomainActions.createTrustedDomain",environment:t,canUndo:!0,perform:e=>{l().zv({store:n,data:{email_domains:c},transaction:e});const s={space_id:n.id,join_space_method:"request_to_join",domain_link_sharing_enabled:!0,email_domain:a};r=l().eC({environment:t,table:i().A,value:s,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e})}}),r&&s.push(r),r)}function h(e){let{store:t,environment:a}=e;const{currentSpaceStore:s}=c().default.getState();if(!s)throw new Error("currentSpaceStore does not exist");if(s.id!==t.getSpaceId())throw new Error("Mismatched spaceId");return!!t.isReady()&&(d().createAndCommit({userAction:"trustedDomainActions.deleteTrustedDomain",environment:a,canUndo:!0,perform:e=>{l().zv({store:t,data:{domain_link_sharing_enabled:!1},transaction:e})}}),!0)}function f(e){let{store:t,environment:a,joinSpaceMethod:s}=e;const{currentSpaceStore:n}=c().default.getState();if(!n)throw new Error("currentSpaceStore does not exist");if(n.id!==t.getSpaceId())throw new Error("Mismatched spaceId");return!!t.isReady()&&(t.getJoinSpaceMethod()!==s&&(d().createAndCommit({userAction:"trustedDomainActions.setTrustedDomainJoinSpaceMethod",environment:a,canUndo:!0,perform:e=>{l().zv({store:t,data:{join_space_method:s},transaction:e})}}),!0))}async function x(e){let{environment:t,spaceId:a}=e;const s=await r().callApi({eventName:"getTrustedDomainsForSpace",environment:t,data:{spaceId:a}});if("success"!==s.type)return[];return s.data.results.filter((e=>e.domain_link_sharing_enabled)).map((e=>n().Bj6.fromValue(i().A,e)))}},379990:(e,t,a)=>{a.d(t,{H:()=>c,K:()=>g});a(296540);var s=()=>a(401497),n=()=>a(96689),i=()=>a(959013),o=()=>a(534177),r=()=>a(614505),l=()=>a(125565),d=a(474848);function c(e){let{id:t,name:a,icon:o,subscriptionTier:c,memberCount:u,highlightIconContainer:m}=e;const p=(0,i().tz)(),h=o?{pointer:{table:n().NX,id:t,spaceId:t},icon:o}:void 0,f=(0,s().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:"8px 0",width:"100%"},summaryContainer:{width:"calc(100% - 38px)"},iconContainer:{height:38,width:38,flexGrow:0,flexShrink:0,flexBasis:38,marginRight:12,display:"flex",justifyContent:"center",alignItems:"center",background:m?e.selectLightGray[50]:void 0,borderRadius:6},name:{fontSize:14,fontWeight:500},byline:{fontSize:12,opacity:.5}})),[m]);return(0,d.jsxs)("div",{style:f.container,children:[(0,d.jsx)("div",{style:f.iconContainer,children:(0,d.jsx)(r().A,{disabled:!0,icon:h,isEmptyPage:!1,size:32,title:a,isLarge:!0,emojiSize:28,isRaw:!1})}),(0,d.jsxs)("div",{style:f.summaryContainer,children:[(0,d.jsx)(l().A,{style:f.name,showTooltipWhenTruncated:!0,children:a}),(0,d.jsx)(l().A,{style:f.byline,children:(0,d.jsx)(i().sA,{id:"identityAndProvisioning.claimWorkspaces.summaryByline",defaultMessage:"{subscriptionTier} · {memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{subscriptionTier:g(c,p),memberCount:u}})})]})]})}const u=(0,i().YK)({free:{id:"subscriptionTier.free",defaultMessage:"Free"},personal:{id:"subscriptionTier.personal",defaultMessage:"Personal Pro"},plus:{id:"subscriptionTier.plus",defaultMessage:"Plus"},business:{id:"subscriptionTier.business",defaultMessage:"Business"},enterprise:{id:"subscriptionTier.enterprise",defaultMessage:"Enterprise"}});function g(e,t){switch(e){case"personal_free":case"team_free":case"free":return t.formatMessage(u.free);case"student":case"personal":return t.formatMessage(u.personal);case"plus":return t.formatMessage(u.plus);case"business":return t.formatMessage(u.business);case"enterprise":return t.formatMessage(u.enterprise);default:(0,o().HB)(e)}}},380048:(e,t,a)=>{a.d(t,{I:()=>n});a(296540);var s=a(474848);const n=(0,a(340498).wt)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},380468:(e,t,a)=>{a.d(t,{A:()=>h});a(944114),a(898992),a(354520),a(581454);var s=a.n(a(844751)),n=a(296540),i=()=>a(959013),o=()=>a(496603),r=()=>a(760217),l=()=>a(939740),d=()=>a(89924),c=()=>a(250202),u=()=>a(972435),g=a(474848);const m=(0,i().YK)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.propertySelect.inputPlaceholder"},none:{defaultMessage:"None",id:"database.viewSettings.propertySelect.noneMessage"},remove:{defaultMessage:"Remove",id:"database.viewSettings.propertySelect.removeMessage"}});function p(e){let{currentProperty:t,showNoneOption:p,showRemoveOption:h,getProperties:f,onAccept:x,inputPlaceholder:v,defaultShowPropertyCount:y,schema:b,format:S,renderProperty:j}=e;const w=(0,a(484714).Y0)(),[A,M]=(0,n.useState)(""),[C,I]=(0,n.useState)(!1),T=(0,a(56366).uB)(void 0,a(970585).A),k=(0,a(401497).IS)((e=>({icon:{width:16,fill:e.mediumTextColor,marginLeft:4,marginRight:2},menuItem:{color:e.mediumTextColor}})),[]),[_,D]=(0,a(857437).$)(),z=(0,a(390066).L)(S,b,void 0,a(651124).jf.Page).collection_page_properties||[],P=!y||C,N=u().A.formatMessage(m.none),R=p?{key:"none",render:e=>(0,g.jsx)(r().A,{...e,checkState:!t,title:N}),action:()=>{x(void 0)}}:void 0,B=h?{key:"remove",render:e=>(0,g.jsx)(r().A,{...e,icon:(0,a(735384).I)(k.icon),title:u().A.formatMessage(m.remove)}),action:()=>{x(void 0)}}:void 0,L=f();let E=o().Ul(L,(e=>z.findIndex((t=>t.property===e))));if(A){const e=new Map;let t=E.map((t=>{const s=b[t],n=s?`${s.name} ${a(682146).dC[s.type]}`:"";return e.set(t,n),n}));t=s().filter(A,t).map((e=>{let{original:t}=e;return t})),E=E.filter((a=>t.includes(e.get(a)||"")))}else!P&&y&&(E=E.slice(0,y));const O=o().oE([!A||s().test(A,N)?R:void 0,...E.map((e=>function(e,t,a,s,n){const i=t[e];if(!i)return;const o={key:e,render:t=>{const a=e===s;return n?n(t,e,a,i):(0,g.jsx)(c().G,{...t,propertySchema:i,format:c().e.Name,checkState:a})},action:()=>{a(e)}};return o}(e,b,x,t,j)))]);if(!P&&L.length>E.length&&!A){const e={key:"show_more",render:e=>(0,g.jsx)(r().A,{...e,icon:(0,a(30626)._)(k.icon),style:k.menuItem,title:(0,g.jsx)(i().sA,{defaultMessage:"{moreCount} more",id:"database.viewSettings.propertySelect.showMoreTitle",values:{moreCount:L.length-E.length}})}),action:()=>{I(!0)}};O.push(e)}const U=O.length>0,F=Boolean(A),V=!B||U||F;V&&!U&&O.push({action:o().lQ,key:"noResults",render:e=>(0,g.jsx)(a(736767).A,{...e,caption:(0,g.jsx)(i().sA,{defaultMessage:"No results",id:"database.viewSettings.propertySelect.noResultsTitle"})})});const H=[];return V&&H.push({key:"input",comp:(0,g.jsx)(d().A,{isInput:!0,children:(0,g.jsx)(a(419357).Ay,{focusInitial:!w.isMobile||void 0,focus:!w.isMobile||void 0,value:A,onChange:e=>{M(e.target.value),T.setState({...T.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}}),I(!1)},placeholder:v||u().A.formatMessage(m.inputPlaceholder),..._})})}),(O.length>0||B)&&H.push({key:"properties",comp:(0,g.jsx)(l().Ay,{type:l().Oh.Vertical,initialFocus:0,comboboxProps:V?D:void 0,sections:[...O.length>0?[{key:"results",render:e=>(0,g.jsx)(d().A,{...e}),items:O}]:[],...B?[{key:"remove",render:e=>(0,g.jsx)(d().A,{topBorder:O.length>0,...e}),items:[B]}]:[]],store:T})}),(0,g.jsx)(g.Fragment,{children:H.map((e=>{let{key:t,comp:a}=e;return(0,g.jsx)(n.Fragment,{children:a},t)}))})}const h=n.memo(p,a(821062).A)},397103:(e,t,a)=>{a.d(t,{h:()=>o});var s=()=>a(56366),n=()=>a(351360),i=()=>a(597898);function o(){var e;const{currentSpaceId:t,currentUserId:a}=(0,s().K8)((()=>{var e,t;return{currentSpaceId:null===(e=n().default.state.currentSpaceStore)||void 0===e?void 0:e.id,currentUserId:null===(t=n().default.state.currentUserStore)||void 0===t?void 0:t.id}}),[]),o=(0,i()._X)({name:"members",spaceId:t,userId:a,amount:"unknown"}),r=null==o||null===(e=o.limit)||void 0===e?void 0:e.total;return!!r&&("unlimited"===r||r>1)}},401332:(e,t,a)=>{a.d(t,{A:()=>n});class s extends(()=>a(757695))().default{getInitialState(){return{}}}const n=s},404085:(e,t,a)=>{a.d(t,{l:()=>n});a(296540);const s={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M9.381 13.619a.875.875 0 0 0 1.238 0l5.4-5.4A.875.875 0 1 0 14.78 6.98L10 11.763 5.219 6.98A.875.875 0 1 0 3.98 8.22z"})},n=(0,a(340498).wt)("arrowChevronSingleDownFill",s)},404302:(e,t,a)=>{a.d(t,{p:()=>s});const s=["private","shared_internally","shared_externally","shared_to_web"]},406533:(e,t,a)=>{a.d(t,{T:()=>i});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,s.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},i=(0,a(340498).wt)("questionMarkCircle",n)},412632:(e,t,a)=>{a.d(t,{u:()=>s});let s=function(e){return e.User="user",e.Domains="domains",e}({})},417555:(e,t,a)=>{a.d(t,{A:()=>c});a(296540);var s=()=>a(799288),n=()=>a(784892),i=()=>a(738418),o=()=>a(695608),r=()=>a(534177),l=()=>a(698449),d=a(474848);const c=function(e){let{isStrikedThrough:t,backgroundColor:c,onClickRemove:u,target:g,disabled:m,showInfoIcon:p,style:h,shouldWrap:f}=e;const x=(0,a(484714).v3)(),v=(0,a(959013).tz)(),{device:y}=x,b=(0,a(56366).K8)((()=>function(e){let t,{target:a,intl:n,showInfoIcon:c}=e;switch(a.type){case"newUser":t=a.value.email.trim();break;case"existingUser":t=(0,o().c6)(n,a.value);break;case"bot":t=(0,s().Hg)(a.value);break;case"group":t=(0,l().Pf)({intl:n,groupName:a.value.name});break;default:(0,r().HB)(a)}return c?(u=t,(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,i().G)({marginRight:4,width:14,height:14}),u]})):t;var u}({target:g,intl:v,showInfoIcon:p})),[g,v,p]);return(0,d.jsx)(a(881690).A,{showRemoveButton:!0,isSingle:!0,isStrikedThrough:t,backgroundColor:c,format:y.isMobile?n().NY.Large:n().NY.Medium,onClickRemove:e=>function(e,t,a){e.stopPropagation(),t(a)}(e,u,g),disabled:m,disabledFeedback:!0,value:b,style:h,shouldWrap:f})}},418884:(e,t,a)=>{a.d(t,{A:()=>o});a(296540),a(581454);function s(){return(navigator.languages?navigator.languages.map((e=>e.toLowerCase())):navigator.language?[navigator.language.toLowerCase()]:navigator.userLanguage?[navigator.userLanguage.toLowerCase()]:[]).map((e=>e.split("-")[0]))}const n=["ar","az","he","fa","ur"];var i=a(474848);const o=function(e){const{style:t,translations:a}=e,o=s();for(const s of o){const e=a[s];if(e){const a=n.includes(s);return(0,i.jsx)("div",{style:{...a&&{direction:"rtl"},...t},children:e})}}return null}},421645:(e,t,a)=>{a.d(t,{E:()=>h});a(898992),a(354520),a(296540);var s=()=>a(56366),n=()=>a(401497),i=()=>a(449552),o=()=>a(234194),r=()=>a(433847),l=()=>a(68263),d=()=>a(959013),c=()=>a(108944),u=()=>a(566468),g=()=>a(112772),m=a(474848),p=function(e){return e.Shared="shared",e.Private="private",e.Hidden="hidden",e}(p||{});function h(e){let{blockStore:t,teamStore:a}=e;const h=(0,n().IS)((e=>({icon:{height:18,width:18,color:e.lightIconColor,fill:"currentColor"}})),[]),f=(0,s().K8)((()=>{const e=(0,c().E)(t),a=(0,r().wD)(e),s=a.filter((e=>!(0,l().T6)(e)));return 1===s.length&&(0,l().B2)(s[0])?p.Private:a.length>0?p.Shared:p.Hidden}),[t]);return a?(0,m.jsx)(g().o,{useThinTitle:!0,teamStore:a}):function(){switch(f){case p.Shared:return(0,m.jsx)(u().s7,{useThinTitle:!0,icon:(0,o().M)(h.icon),title:(0,m.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.locationCell.shared",defaultMessage:"Shared"})});case p.Hidden:case p.Private:return(0,m.jsx)(u().s7,{useThinTitle:!0,icon:(0,i().g)(h.icon),title:(0,m.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.locationCell.private",defaultMessage:"Private"})})}}()}},436529:(e,t,a)=>{a.d(t,{Ay:()=>l,N4:()=>o,xt:()=>i});var s=()=>a(662303);const n=["en","en-us","en-ca"];function i(e){return"pdf"===e.exportOptions.exportType}function o(){return n.includes(s().locale.toLowerCase())?"Letter":"A4"}class r extends(()=>a(757695))().default{getInitialState(){return{open:!1,shouldExportComments:!1}}}const l=new r},437594:(e,t,a)=>{a.d(t,{KS:()=>A,ZQ:()=>w,bi:()=>C,vr:()=>I});var s=a(296540),n=()=>a(662303),i=()=>a(484714),o=()=>a(401497),r=()=>a(925907),l=()=>a(959013),d=()=>a(284371),c=()=>a(720665),u=()=>a(884107),g=()=>a(907514),m=()=>a(493823),p=()=>a(364280),h=()=>a(285790),f=()=>a(903706),x=()=>a(331542),v=()=>a(864943),y=()=>a(859428),b=()=>a(125565),S=()=>a(101919),j=a(474848);function w(e){let{handleVerifyDomain:t,domainVerification:a,loading:i}=e;const r=(0,o().IS)((e=>({title:{fontFamily:d().vc(n().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:d().vc(n().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},list:{fontSize:14,lineHeight:"19px"},input:{marginTop:22}})),[]);return(0,j.jsxs)(s.Fragment,{children:[(0,j.jsx)(b().A,{style:r.title,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.title",defaultMessage:"Verify your domain"})}),(0,j.jsx)(b().A,{style:r.subtitle,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.subtitle",defaultMessage:"Follow these steps to finalize verification."})}),(0,j.jsxs)(p().VP,{marginTop:24,gap:24,children:[(0,j.jsxs)(p().VP,{gap:12,children:[(0,j.jsx)(C,{domainVerification:a}),(0,j.jsx)(A,{domainVerification:a})]}),(0,j.jsx)(I,{listStyles:r.list})]}),(0,j.jsx)(v().A,{size:"lg",style:{width:"100%"},onClick:()=>t(a),disabled:i,children:i?(0,j.jsx)(x().A,{}):(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.verify",defaultMessage:"Verify domain"})})]})}function A(e){let{domainVerification:t}=e;const a=(0,i().v3)();return(0,j.jsx)(M,{value:t.domain,handleCopyLink:async function(){const e=await u().R.clipboardActions.load();e.copyString({environment:a,stringValue:t.domain,copiedMessage:e.clipboardMessages.copiedLinkToClipboard})},label:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.domainLabel",defaultMessage:"Domain"})})}function M(e){let{value:t,handleCopyLink:a,disabled:s,label:i}=e;const c=(0,l().tz)().formatMessage(T.copy),u=(0,o().IS)((e=>({container:{display:"flex",background:e.surface.elevated,padding:2,boxShadow:e.shadowSM,borderRadius:6},buttonStyle:{height:20,width:20,boxShadow:"none"},iconStyle:{color:e.mediumTextColor,fill:e.mediumTextColor},input:{fontFamily:d().vc(n().locale).mono,textOverflow:"ellipsis"}})),[]);return(0,j.jsxs)(p().VP,{gap:0,children:[(0,j.jsx)(S().A,{children:i}),(0,j.jsx)(f().A,{value:t,readOnly:!0,inputStyle:u.input,right:(0,j.jsx)(y().A,{renderTooltip:()=>c,render:e=>(0,j.jsx)("div",{style:u.container,...e,children:(0,j.jsx)(h().A,{onClick:a,ariaLabel:c,hasBackground:!0,icon:r().n,showShadow:!0,iconStyle:u.iconStyle,style:u.buttonStyle})})})})]})}function C(e){let{domainVerification:t,containerStyles:a,regenerateCode:n}=e;const r=(0,i().v3)(),[h,f]=(0,s.useState)(!1),x=t.expiresAt-Date.now()<2*c().pT,v=t.expiresAt<Date.now(),y=(0,o().IS)((e=>({expiresSoonText:{color:"dark"===e.mode?e.accentColors.yellow[700]:e.accentColors.yellow[500]},expiredText:{color:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500]},blueButton:{fontWeight:d().Wy.medium,color:e.blueColor},blueButtonHover:{background:e.outlineBlueButtonHoveredBackground}})),[]);return(0,j.jsx)("div",{style:a,children:(0,j.jsxs)(p().VP,{gap:4,children:[(0,j.jsx)(M,{label:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeLabel",defaultMessage:"Verification code"}),value:`notion-domain-verification=${t.verificationCode}`,handleCopyLink:async function(){const e=await u().R.clipboardActions.load();e.copyString({environment:r,stringValue:`notion-domain-verification=${t.verificationCode}`,copiedMessage:e.clipboardMessages.copiedLinkToClipboard})},disabled:v}),(0,j.jsxs)(p().fI,{alignItems:"center",justifyContent:"space-between",children:[v?(0,j.jsx)(b().A,{style:y.expiredText,isSmall:!0,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeExpired",defaultMessage:"This verification code expired on {expirationDate}",values:{expirationDate:(0,g().DG)(t.expiresAt)}})}):(0,j.jsx)(b().A,{style:x?y.expiresSoonText:void 0,isSmall:!0,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeExpiresAt",defaultMessage:"This verification code expires on {timeLeft}",values:{timeLeft:(0,g().DG)(t.expiresAt)}})}),v&&n?(0,j.jsx)(m().p,{isGray:!0,size:"xs",style:y.blueButton,hoveredStyle:y.blueButtonHover,onClick:async()=>{f(!0),await n(t),f(!1)},disabled:h,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.regenerateButton",defaultMessage:"Regenerate"})}):void 0]})]})})}function I(e){let{listStyles:t}=e;const a=(0,o().IS)((()=>({list:{paddingInlineStart:22,margin:0},listItem:{fontFamily:d().vc(n().locale).sans,fontWeight:400,marginBottom:12}})),[]);return(0,j.jsxs)("ol",{style:{...a.list,...t},children:[(0,j.jsx)("li",{style:a.listItem,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.instructionsDNS",defaultMessage:"Go to the DNS settings for your domain host."})}),(0,j.jsx)("li",{style:a.listItem,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.instructionsTXT",defaultMessage:"Create a TXT record and paste the verification code."})}),(0,j.jsx)("li",{style:a.listItem,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.instructionsHangTight",defaultMessage:"This update usually takes a few minutes but may take up to 72 hours to complete."})}),(0,j.jsx)("li",{style:a.listItem,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.instructionsVerify",defaultMessage:'Click "Verify domain" to confirm once your DNS record is updated.'})})]})}const T=(0,l().YK)({copy:{defaultMessage:"Copy to Clipboard",id:"verifyDomainModal.verifyExistingDomain.copyButton.copyToClipboard"}})},443573:(e,t,a)=>{a.d(t,{$:()=>d,d:()=>l});a(581454);var s=a(296540),n=()=>a(187174),i=()=>a(803418),o=()=>a(763824),r=()=>a(625319);function l(e){const{visibleUsersForSpace:t,joinedUserIdsForSpace:a,loadVisibleUsersForSpace:i}=(0,s.useContext)(r().D),o=(0,s.useMemo)((()=>t[e]??[]),[t,e]),l=(0,s.useMemo)((()=>a[e]??[]),[a,e]),[d,c]=(0,s.useState)(!1);return(0,n().Yb)((async()=>{c(!0),await i(e),c(!1)}),[e,i]),{visibleUsers:o,joinedUserIds:l,loading:d}}function d(e){const{visibleUsersForSpace:t,loadVisibleUsersForSpace:a}=(0,s.useContext)(r().D),l=(0,s.useMemo)((()=>e.map((e=>e.id))),[e]),[d,c]=(0,s.useState)(!1);return(0,n().Yb)((async()=>{c(!0),await(0,o().lX)(l,i().O,(e=>a(e))),c(!1)}),[l,a]),{spaceUsers:t,loading:d}}},452864:(e,t,a)=>{a.d(t,{H:()=>h});a(296540);var s=()=>a(484714),n=()=>a(401497),i=()=>a(73514),o=()=>a(133033),r=()=>a(959013),l=()=>a(755636),d=()=>a(972435),c=()=>a(836251),u=()=>a(493823),g=()=>a(125565),m=a(474848);const p=(0,r().YK)({emptyAnalyticsHeading:{id:"workspaceAnalyticsTabs.empty.heading",defaultMessage:"No workspace analytics in the last 90 days"},emptyAnalyticsDescription:{id:"workspaceAnalyticsTabs.empty.description",defaultMessage:"It may take some time for workspace analytics information to appear."},disabledAnalyticsHeading:{id:"workspaceAnalyticsTabs.disabled.heading",defaultMessage:"Analytics are disabled"},disabledAnalyticsDescription:{id:"workspaceAnalyticsTabs.disabled.description",defaultMessage:"An admin has turned off page view recording for {name}.{br}This information will not be available in your workspace settings or on individual pages."},disabledAnalyticsDescriptionNoSpaceName:{id:"workspaceAnalyticsTabs.disabled.description.unnamed",defaultMessage:"An admin has turned off page view recording for this space.{br}This information will not be available in your workspace settings or on individual pages."}});function h(e){const t=(0,n().IS)((e=>({outerDiv:{display:"flex",flexDirection:"column",justifyContent:"center",height:"80%",gap:24},innerDiv:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",gap:4},header:{fontSize:16,fontWeight:500},analyticsIcon:{fill:e.mediumTextColor,padding:20,height:150,width:150},learnMoreIcon:{width:14,height:14},learnMore:{gap:4}})),[]),a=(0,s().v3)(),{type:h,spaceName:f}=e,x=function(e,t){switch(e){case"empty":return{heading:d().A.formatMessage(p.emptyAnalyticsHeading),description:d().A.formatMessage(p.emptyAnalyticsDescription)};case"disabled":const e=t?(0,m.jsx)(r().sA,{...p.disabledAnalyticsDescription,values:{name:t,br:(0,m.jsx)("br",{})}}):(0,m.jsx)(r().sA,{...p.disabledAnalyticsDescriptionNoSpaceName,values:{br:(0,m.jsx)("br",{})}});return{heading:d().A.formatMessage(p.disabledAnalyticsHeading),description:e}}}(h,f);return(0,m.jsx)("div",{style:t.outerDiv,children:(0,m.jsxs)("div",{style:t.innerDiv,children:[(0,i().C)(t.analyticsIcon),(0,m.jsx)(g().A,{isSecondaryColor:!0,style:t.header,children:x.heading}),(0,m.jsx)(g().A,{isSecondaryColor:!0,children:x.description}),(0,m.jsxs)(u().p,{onClick:()=>l().f({environment:a,url:(0,c().xS)("guides.workspaceAnalytics")}),style:t.learnMore,children:[(0,o().$)(t.learnMoreIcon),(0,m.jsx)(g().A,{isSmall:!0,children:(0,m.jsx)(r().sA,{id:"workspaceAnalyticsTabs.disabled.learnMore",defaultMessage:"Learn more"})})]})]})})}},459173:(e,t,a)=>{a.d(t,{$E:()=>f,MC:()=>m,Rv:()=>h,dU:()=>p});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698);var s=a(296540),n=()=>a(56366),i=()=>a(624090),o=()=>a(515358),r=()=>a(926401),l=()=>a(287882),d=()=>a(959013),c=()=>a(534177),u=()=>a(474747),g=a(474848);function m(e){let{spaceStore:t,selectedPageStatus:a,setSelectedPageStatus:o,onMenuClose:l}=e;const c=(0,d().tz)(),m=new Set(["alive","in_trash","deleted_from_trash"]),{currentDeleteFromTrashDelayInSeconds:x,currentPurgeDelayInSeconds:v}=(0,n().K8)((()=>({currentDeleteFromTrashDelayInSeconds:(0,i().XX)(t.getModel())/1e3,currentPurgeDelayInSeconds:(0,i().NA)(t.getModel())/1e3})),[t]),y=(0,s.useMemo)((()=>h({currentDeleteFromTrashDelayInSeconds:x,currentPurgeDelayInSeconds:v,intl:c})),[x,v,c]);return(0,g.jsx)(u().A,{pillIcon:r().n,allOptions:m,selectedOptions:a,setSelectedOption:o,setPillTitleStringToActiveSelection:!0,onMenuClose:l,getFormattedStringTitle:p,getFormattedStringCaption:y,getPillTitle:f})}function p(e){switch(e){case"alive":return(0,g.jsx)(d().sA,{...o().o.alive});case"in_trash":return(0,g.jsx)(d().sA,{...o().o.trash});case"deleted_from_trash":return(0,g.jsx)(d().sA,{...o().o.retained});default:(0,c().HB)(e)}}function h(e){return function(t){switch(t){case"alive":return null;case"in_trash":return(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.caption.trash",defaultMessage:"Trashed pages are automatically deleted after {duration}",values:{duration:(0,l().rN)(e.currentDeleteFromTrashDelayInSeconds,e.intl)}});case"deleted_from_trash":return(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.caption.internal",defaultMessage:"Pages deleted from Trash are retained for {duration}",values:{duration:(0,l().rN)(e.currentPurgeDelayInSeconds,e.intl)}});default:(0,c().HB)(t)}}}function f(e){if(0===e.length)return(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.default",defaultMessage:"Page status"});const t=e.includes("alive"),a=e.includes("in_trash"),s=e.includes("deleted_from_trash");return t?a&&s?(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.allStatusSelected",defaultMessage:"All pages"}):a||s?(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.inactiveStatusWithActive",defaultMessage:"Include {trashSelected, select, true {Trash} other {retained pages}}",values:{trashSelected:a}}):(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.activeOnly",defaultMessage:"Active pages"}):a&&s?(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.inactiveOnly",defaultMessage:"Inactive pages"}):(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.singleInactiveStatus",defaultMessage:"{trashSelected, select, true {Trash} other {Retained pages}} only",values:{trashSelected:a}})}},459401:(e,t,a)=>{a.d(t,{L:()=>r});a(898992),a(581454),a(941795);var s=a(296540),n=()=>a(401497),i=()=>a(802790),o=a(474848);function r(e){let{children:t}=e;const a=(0,n().IS)((e=>({divider:{color:e.stroke.secondary},container:{display:"flex",flexDirection:"column",gap:16,width:"100%",paddingTop:14}})),[]),r=s.Children.toArray(t);return(0,o.jsx)("div",{style:a.container,children:r.map(((e,t)=>(0,o.jsxs)(s.Fragment,{children:[e,t<r.length-1&&(0,o.jsx)(i().A,{dividerColor:a.divider.color,size:1})]},t)))})}},466492:(e,t,a)=>{a.d(t,{J:()=>i});a(296540);var s=()=>a(401497),n=a(474848);function i(e){let{left:t,right:a,showElevatedConsoleContainer:i}=e;const o=(0,s().IS)((e=>({grid:{display:"grid",gridTemplateColumns:"250px 1fr",background:i?e.surface.wash:void 0,height:"100%"},leftColumnFixed:{position:"relative",boxSizing:"border-box",maxHeight:"100%",overflow:"auto"},rightColumn:{position:"relative",background:e.surface.page,boxSizing:"border-box",maxHeight:"100%",overflow:"auto",...i?{borderRadius:12,border:"1px solid rgba(0, 0, 0, 0.08)",margin:"8px 8px 8px 0",boxShadow:"0 4px 0 -2px rgba(0, 0, 0, 0.04)",maxHeight:"calc(100% - 16px)"}:{}}})),[i]);return(0,n.jsxs)("div",{style:o.grid,children:[(0,n.jsx)("div",{style:o.leftColumnFixed,children:t}),(0,n.jsx)("div",{style:o.rightColumn,children:a})]})}},469776:(e,t,a)=>{a.d(t,{S4:()=>r,am:()=>o,hv:()=>i});var s=()=>a(645873);const n={DowngradeModal:new(s().O2)("DowngradeModal",(async()=>Promise.all([a.e(23806),a.e(48756),a.e(10815)]).then(a.bind(a,572143)))),RemoveAddOnModal:new(s().O2)("RemoveAddOnModal",(async()=>Promise.all([a.e(23806),a.e(48756),a.e(51466)]).then(a.bind(a,3031)))),DeletePaidWorkspaceModal:new(s().O2)("DeletePaidWorkspaceModal",(async()=>Promise.all([a.e(23806),a.e(48756),a.e(98906)]).then(a.bind(a,876963))))},i=(0,s()._h)(n.DowngradeModal,(e=>e.DowngradeModal)),o=(0,s()._h)(n.RemoveAddOnModal,(e=>e.RemoveAddOnModal)),r=(0,s()._h)(n.DeletePaidWorkspaceModal,(e=>e.DeletePaidWorkspaceModal))},474747:(e,t,a)=>{a.d(t,{A:()=>j});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(56366),i=()=>a(401497),o=()=>a(959013),r=()=>a(56394),l=()=>a(722872),d=()=>a(962730),c=()=>a(377586),u=()=>a(970585),g=()=>a(493823),m=()=>a(760217),p=()=>a(625830),h=()=>a(928600),f=()=>a(939740),x=()=>a(14235),v=()=>a(204063),y=()=>a(89924),b=()=>a(806754),S=a(474848);function j(e){let{allOptions:t,selectedOptions:a,setSelectedOption:j,onMenuClose:w,pillIcon:A,setPillTitleStringToActiveSelection:M,getFormattedStringTitle:C,getFormattedStringCaption:I,getPillTitle:T}=e;const k=(0,n().uB)(void 0,u().A),_=(0,i().IS)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8}})),[]),[D,z]=(0,s.useState)(!1);function P(){z(!1),w&&w()}function N(){j&&j([])}function R(e){const t=a.includes(e)?[...a.filter((t=>t!==e))]:[...a,e];j&&j(t)}const B=(0,S.jsx)(r().A,{on:a.length>0,icon:A(_.icon),title:M&&a[0]?T(a):T([]),onClick:()=>z(!0),disabled:!j,hideChevron:!j});return j?(0,S.jsx)(b().A,{children:(0,S.jsx)(x().Ay,{popupType:c().n.Popup,placementToOrigin:d().W.Bottom,alignmentToOrigin:d().C.Start,open:D,render:function(){const e={key:"menuOptions",items:Array.from(t).map((e=>({key:e,action:()=>R(e),render:t=>(0,S.jsx)(m().A,{...t,icon:(0,S.jsx)(p().A,{checked:a.includes(e),onClick:()=>R(e),size:16}),focused:!1,title:C(e),caption:I(e),shouldWrapCaption:!0})}))),render:e=>(0,S.jsx)(y().A,{...e,title:null,loading:!1})};return(0,S.jsxs)("div",{style:_.container,children:[(0,S.jsx)(h().A,{menuType:l().gu.Popup,header:null,maxHeight:250,width:300,children:(0,S.jsx)(f().Ay,{type:f().Oh.Vertical,store:k,initialFocus:0,sections:[e]})}),(0,S.jsxs)(y().A,{topBorder:!0,style:_.footer,children:[(0,S.jsx)(g().p,{onClick:N,children:(0,S.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.clearButton",defaultMessage:"Clear"})}),(0,S.jsx)(v().A,{onClick:P,children:(0,S.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:P,keepFocus:!0,origin:B,preventScaleTransition:!0,trapFocus:!0})}):B}},475971:(e,t,a)=>{a.d(t,{M:()=>n,W:()=>s});const s={height:28,paddingLeft:8,paddingRight:8,paddingTop:4,paddingBottom:4,fontWeight:a(284371).Wy.medium},n={opacity:.4}},477657:(e,t,a)=>{a.d(t,{t:()=>l});a(581454),a(296540);var s=()=>a(453697),n=()=>a(489143),i=()=>a(142448),o=()=>a(696601),r=a(474848);function l(e){const{users:t,totalMemberCount:a,showTooltip:l,isLoading:d}=e,c=(0,n().A)(),u=t.map((e=>({renderAvatar:()=>(0,r.jsx)(s().A,{userStore:e,size:i().tR,avatarShouldShowShadow:!1,hasTooltip:l,iconStyle:{fontSize:12},delayThreshold:0,showAvatarInTooltip:!0},e.id)})));return(0,r.jsx)(i().Qp,{avatarStyles:c.roundAvatarBorder,avatars:u,totalCount:a,renderOverflowTooltip:l?()=>(0,r.jsx)(o().A,{userStores:t}):void 0,isLoading:d})}},480795:(e,t,a)=>{a.d(t,{N:()=>l});var s=a(296540),n=()=>a(187174),i=()=>a(803418),o=()=>a(763824),r=()=>a(625319);function l(e){const{teamAggregateDataForSpace:t,loadTeamsForSpace:a}=(0,s.useContext)(r().D),[l,d]=(0,s.useState)(!1);return(0,n().Yb)((async()=>{d(!0),await(0,o().lX)(e,i().O,(e=>a(e))),d(!1)}),[e,a]),{teamAggregateDataForSpace:t,loading:l}}},484578:(e,t,a)=>{a.d(t,{QX:()=>u,YY:()=>d,dK:()=>r,ek:()=>l,rC:()=>c});var s=()=>a(68263),n=()=>a(534177),i=()=>a(337567),o=()=>a(630116);function r(e){let{permissionItem:t,store:a}=e;return"display_only_inherited_permission"!==t.type&&(a instanceof o().md?a.pathIsDead():a instanceof o().Bv?a.pathIsDead()||!d(t)&&!a.canAdmin()||(0,i().dL)(a):void(0,n().HB)(a))}function l(e){let{permissionItem:t,store:a}=e;const n=(0,s().Yi)(t.from);return t.from.table!==a.table||n!==a.id}function d(e){return"display_only_overview_permission"===e.type}function c(e){return"display_only_inherited_permission"===e.type}function u(e){const t=e&&"from"in e?e.permissionItem:e;if(!t||!(0,s().Tt)(t.role))return"private";return(0,s().Ni)(t)&&"none"!==t.role?"unlisted":"open"}},486019:(e,t,a)=>{a.d(t,{F:()=>n});var s=()=>a(401497);function n(){return(0,s().IS)((e=>({leftContent:{display:"flex",flex:"auto",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",width:"100%",margin:"0 auto 12px",paddingTop:4},rightContent:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"flex-start",width:"100%",margin:"0 auto 12px",minHeight:28,gap:8},tableHeader:{position:"relative",display:"flex",flexDirection:"row"}})),[])}},486345:(e,t,a)=>{a.d(t,{pl:()=>o,sy:()=>i});var s=()=>a(792071),n=()=>a(926397);const i=(0,a(534177).u0)((e=>"invalid"===e.type||"unverified"===e.type?{true:e}:{false:e}));function o(e){const t=s().Bj6.fromValue(n().Hx,e);return{type:t.verified_at?"verified":"unverified",id:t.id,domain:t.domain,verificationCode:t.verification_code,createdAt:t.created_at,expiresAt:t.expires_at,invalidatedAt:t.getInfo().invalidated_at}}},489143:(e,t,a)=>{a.d(t,{A:()=>i});var s=()=>a(401497),n=()=>a(284371);function i(){return(0,s().IS)((e=>({linkButton:{fontWeight:n().Wy.medium,fontSize:n().J.UIRegular.desktop,color:e.mediumTextColor},tableHeader:{background:e.surface.page},tableHeaderForModal:{background:e.surface.elevated},tableRow:{background:e.surface.page},tableRowForModal:{background:e.surface.elevated},roundAvatarBorder:{borderStyle:"solid",borderColor:e.white,borderWidth:2,borderRadius:"100%"}})),[])}},489538:(e,t,a)=>{a.d(t,{o:()=>n});a(296540);const s={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M3.75 3.125c.345 0 .625.28.625.625v7.097l3.016-2.639a.625.625 0 0 1 .854.028l3.036 3.037 3.485-3.485H12.75a.625.625 0 1 1 0-1.25h3.5c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0V8.696l-3.902 3.902a.625.625 0 0 1-.884 0L7.774 9.534l-3.399 2.974v2.242c0 .483.392.875.875.875h11a.625.625 0 1 1 0 1.25h-11a2.125 2.125 0 0 1-2.125-2.125v-11c0-.345.28-.625.625-.625"})},n=(0,a(340498).wt)("chartLineUptrend",s)},490094:(e,t,a)=>{a.d(t,{J:()=>c});a(898992),a(354520),a(581454),a(737550),a(296540);var s=()=>a(534177),n=()=>a(722872),i=()=>a(928600),o=()=>a(939740),r=()=>a(89924),l=()=>a(250202),d=a(474848);function c(e){let{sortProperties:t,onClick:a,currentSorts:c}=e;const u=t.map((e=>{if(null==c?void 0:c.some((t=>{let{propertyId:a}=t;return a===e.id})))return;return{key:e.name,render:t=>(0,d.jsx)(l().G,{...t,propertySchema:e,format:l().e.Name}),action:()=>a(e.id)}})).filter(s().O9);return u.length?(0,d.jsx)(i().A,{menuType:n().gu.Popup,children:(0,d.jsx)(o().Ay,{type:o().Oh.Vertical,initialFocus:void 0,sections:[{key:"properties",render:e=>(0,d.jsx)(r().A,{...e}),items:u}]})}):null}},492666:(e,t,a)=>{a.d(t,{b:()=>i});var s=()=>a(989423),n=()=>a(508496);function i(e){s().vd(e,"workspace_invite_copy_link"),n().default.logEvent("workspace_invite_copy_link")}},495427:(e,t,a)=>{a.d(t,{Jj:()=>p,Ke:()=>m,nv:()=>h});var s=a(296540),n=()=>a(401497),i=()=>a(199734),o=()=>a(959013),r=()=>a(496603),l=()=>a(972435),d=()=>a(623580),c=()=>a(204063),u=()=>a(190106),g=a(474848);let m=function(e){return e.OnChange="on-change",e.Button="button",e.AnimatedSearchButton="animated-search-button",e}({});const p=(0,o().YK)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.query.placeholder",defaultMessage:"Search by page ID, title or content"},titleOnlyPlaceholder:{id:"settings.workspaceAnalytics.contentTab.placeholder",defaultMessage:"Search by title"}});function h(e){let{mode:t,query:a,setQueryFilter:h,placeholderText:f,disabled:x}=e;const[v,y]=(0,s.useState)(a??""),b=function(e){return(0,n().IS)((t=>({searchIcon:{color:t.lightIconColor,width:14},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:t.modalBackground,opacity:e?.5:1},button:{opacity:e?.5:1},searchInputContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center",flexDirection:"row"}})),[e])}(x),S=(0,s.useMemo)((()=>(0,r().sg)(h,500)),[h]),j=(0,s.useCallback)((e=>{void 0===e&&t===m.AnimatedSearchButton||(y(e??""),t!==m.OnChange&&t!==m.AnimatedSearchButton||S(e??""))}),[S,t]),w=(0,s.useCallback)((e=>{j(e.target.value)}),[j]);return t===m.AnimatedSearchButton?(0,g.jsx)("div",{style:b.searchInputContainer,children:(0,g.jsx)(u().A,{handleSearchQueryChange:j,handleEnterPressed:()=>h(v),handleInputCleared:()=>h(""),isSearchBarAlwaysOpen:!1})}):(0,g.jsx)(d().A,{value:v,style:b.input,left:(0,i().U)(b.searchIcon),placeholder:f||l().A.formatMessage(p.placeholder),focus:!x&&void 0,onChange:w,onSubmit:()=>h(v),disabled:x,right:t===m.Button?(0,g.jsx)(c().A,{onClick:()=>h(v),disabled:x,style:b.button,children:(0,g.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.query.searchButton",defaultMessage:"Search"})}):null})}},497799:(e,t,a)=>{a.d(t,{H:()=>c});a(898992),a(823215),a(354520),a(581454);var s=()=>a(56366),n=()=>a(798880),i=()=>a(322769),o=()=>a(508496),r=()=>a(630116),l=()=>a(134217),d=()=>a(749240);function c(e){let{spaceStore:t}=e;return(0,s().K8)((()=>{const e=d().subscriptionDataStoreInstance.state;if(!e)return{loading:!0};if(o().default.checkGate({gateName:"dont_load_users"}))return{loading:!1,members:[],guests:[]};const a=l().Be(e);if(!a.every((e=>r().LU.createChildStore(t,{table:n().oo,id:e.userId}).isReady())))return{loading:!0};const s=a.filter(i().c7),c=a.filter(i().QE);return{loading:!1,members:s.map((e=>{let{userId:a}=e;return r().LU.createChildStore(t,{table:n().oo,id:a})})),guests:c.map((e=>{let{userId:a}=e;return r().LU.createChildStore(t,{table:n().oo,id:a})}))}}),[t])}},501497:(e,t,a)=>{a.d(t,{RC:()=>l,S6:()=>d,tD:()=>c});var s=()=>a(56366),n=()=>a(624090),i=()=>a(869190),o=()=>a(604995),r=()=>a(508496);function l(){return r().default.getConfigKey("permanently_delete_tree_queue_task_override","cdrr_enabled_timestamp_override")??n().mu}function d(){return(0,s().K8)((()=>l()),[])}function c(e,t,a){const s=(0,o().AA)(e,t);if((0,o().ak)(s)){const e=s.end.diff(s.start),t=e.as("year");if(t>=1)return(0,i().up)({years:Math.round(t)},a);const n=e.as("days");if(n>=1&&n<=45)return(0,i().up)({days:Math.round(n)},a);const o=e.as("months");if(o>=1)return(0,i().up)({months:Math.round(o)},a);if(n>=1)return(0,i().up)({days:Math.round(n)},a);const r=e.as("hours");if(r>=1)return(0,i().up)({hours:Math.round(r)},a);const l=e.as("minutes");return(0,i().up)({minutes:Math.round(l)},a)}return""}},511303:(e,t,a)=>{a.d(t,{$:()=>c,N:()=>d});var s=a(296540),n=()=>a(221844),i=()=>a(484714),o=()=>a(388821),r=()=>a(351360),l=a(474848);const d=(0,s.createContext)({organizationOwnerRecordCache:void 0,updateCacheWithRecordMap:e=>{}});function c(e){let{children:t}=e;const a=(0,i().v3)(),[n,c]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{const e=u(a);c(e)}),[a]);const g=(0,s.useCallback)((e=>{var t;const s=null===(t=r().default.state.currentUserStore)||void 0===t?void 0:t.id;if(!s||!e.data.organizationOwnerRecordMap)return;if(!e.data.organizationOwnerRecordMap)return;const n=o().RecordMap.create(e.data.organizationOwnerRecordMap);c((e=>{if(!e)return u(a);for(const{pointer:t,model:a}of n)e.setModelAndRole({pointer:t,userId:s},a,"editor");return u(a,e.data)}))}),[a]);return n?(0,l.jsx)(d.Provider,{value:{organizationOwnerRecordCache:n,updateCacheWithRecordMap:g},children:t}):null}function u(e,t){const a=new(n().A)({name:"organizationSettingsConsoleCache",data:t});return a.addCacheFallback(e.defaultRecordCache.inMemoryRecordCache),a}d.displayName="OrganizationCacheContext"},515358:(e,t,a)=>{a.d(t,{o:()=>i,p:()=>n});var s=()=>a(959013);const n=(0,s().YK)({private:{id:"adminContentSearchTab.pagesTable.audienceCell.private",defaultMessage:"Private"},sharedExternally:{id:"adminContentSearchTab.pagesTable.audienceCell.sharedExternally",defaultMessage:"Shared externally"},sharedInternally:{id:"adminContentSearchTab.pagesTable.audienceCell.sharedInternally",defaultMessage:"Shared internally"},publishedToWeb:{id:"adminContentSearchTab.pagesTable.audienceCell.publishedToWeb",defaultMessage:"Published to web"}}),i=(0,s().YK)({alive:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.active",defaultMessage:"Active pages"},trash:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.inTrash",defaultMessage:"In Trash"},retained:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.retainedPages",defaultMessage:"Retained pages"}})},518658:(e,t,a)=>{a.d(t,{Z:()=>y});var s=a(296540),n=()=>a(56366),i=()=>a(401497),o=()=>a(597777),r=()=>a(803960),l=()=>a(42583),d=()=>a(959013),c=()=>a(534177),u=()=>a(30731),g=()=>a(780865),m=()=>a(704152),p=()=>a(760217),h=()=>a(933117),f=()=>a(873066),x=()=>a(821879),v=a(474848);function y(e){let{lastEditedTime:t,createdTime:a,setLastEditedTime:i,setCreatedOnTime:r}=e;const m=(0,d().tz)(),[p,h]=(0,s.useState)("createdTime"),y=(0,s.useMemo)((()=>{switch(p){case"createdTime":return a;case"lastEditedTime":return t;default:(0,c().HB)(p)}}),[t,a,p]),S=(0,s.useMemo)((()=>{switch(p){case"createdTime":return r;case"lastEditedTime":return i;default:(0,c().HB)(p)}}),[i,r,p]);const j=(0,n().K8)((()=>{if((0,u().jO)(y))switch(p){case"createdTime":return(0,v.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.createdOn.title",defaultMessage:"Created on"});case"lastEditedTime":return(0,v.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.title",defaultMessage:"Last edited on"});default:(0,c().HB)(p)}const e=(0,u().ES)(y),t=g().tX(e,m,o().vz);switch(p){case"createdTime":return(0,v.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.createdOn.titleWithDateRange",defaultMessage:"Created on: {dateRangeString}",values:{dateRangeString:t}});case"lastEditedTime":return(0,v.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.titleWithDateRange",defaultMessage:"Last edited on: {dateRangeString}",values:{dateRangeString:t}});default:(0,c().HB)(p)}}),[y,p,m]);return(0,v.jsx)(f().A,{header:(0,v.jsx)(b,{selectedItem:p,setSelectedItem:function(e){h(e)}}),mode:x().C.Pill,focused:!1,hideTime:!0,pillTitle:j,title:j,icon:l().D,value:y,showButtons:"footer",onChange:e=>{S(e)}})}function b(e){let{selectedItem:t,setSelectedItem:a}=e;const s=(0,i().IS)((e=>({button:{margin:"14px 12px 4px",padding:"2px 8px",width:"fit-content",borderRadius:4},text:{display:"flex",alignItems:"center",color:e.mediumTextColor,fill:e.lightIconColor,fontWeight:500,fontSize:13},icon:{height:14,width:14,marginLeft:4}})),[]),n={width:190,items:["createdTime","lastEditedTime"],selectedItem:t,getKey:e=>e,onSelect:e=>a(e),renderItem:e=>(0,v.jsx)(p().A,{title:S(e.value),...e}),renderOrigin:e=>(0,v.jsx)(m().A,{...e,style:s.button,children:(0,v.jsxs)("div",{style:s.text,children:[S(t),(0,r().g)(s.icon)]})})};return(0,v.jsx)(h().A,{...n,mobileActionSheet:!0})}function S(e){return{lastEditedTime:(0,v.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.option",defaultMessage:"Last edited on"}),createdTime:(0,v.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.createdOn.option",defaultMessage:"Created on"})}[e]}},519143:(e,t,a)=>{a.d(t,{D:()=>n});a(296540);const s={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"m3.625 11.151 1.187-1.187a.625.625 0 1 1 .884.884l-2.254 2.254a.625.625 0 0 1-.884 0L.304 10.848a.625.625 0 0 1 .884-.884l1.187 1.187V10a7.625 7.625 0 0 1 12.814-5.587.625.625 0 1 1-.851.915A6.375 6.375 0 0 0 3.625 10zm14-2.302 1.187 1.187a.625.625 0 1 0 .884-.884l-2.254-2.254a.625.625 0 0 0-.884 0l-2.254 2.254a.625.625 0 1 0 .884.884l1.187-1.187V10a6.375 6.375 0 0 1-10.713 4.672.625.625 0 0 0-.85.915A7.625 7.625 0 0 0 17.625 10z"})},n=(0,a(340498).wt)("arrowCircleLoop",s)},522500:(e,t,a)=>{a.d(t,{q:()=>n});a(296540);var s=a(474848);const n=(0,a(340498).wt)("megaphone",{viewBox:"0 0 64 64",svg:(0,s.jsx)("path",{d:"m54,10v40h-4l-20-10h-4l4,16h-10l-4-16c-4.94,0-8-3.06-8-8v-4c0-4.94,3.06-8,8-8h14l20-10h4Z"})})},522985:(e,t,a)=>{a.d(t,{J:()=>r});var s=()=>a(484714),n=()=>a(187174),i=()=>a(534177),o=()=>a(449506);function r(e){const{organizationId:t}=e,a=(0,s().v3)(),[{status:r,value:l},d]=(0,n().Yb)((async()=>{if(!t)return;const e=await o().callApi({eventName:"getDomainVerificationCodesForOrganization",environment:a,data:{organizationId:t}});if("success"===e.type)return e.data.domainVerifications;if("failed"===e.type)throw e.error;return(0,i().HB)(e)}),[a,t]);return{loading:"pending"===r,didError:"rejected"===r,domainVerifications:l,refetchDomainVerifications:d}}},525884:(e,t,a)=>{a.d(t,{A:()=>i});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M8.65 8.25a.625.625 0 1 0 0 1.25h.725v3.25H8.65a.625.625 0 1 0 0 1.25h2.7a.625.625 0 1 0 0-1.25h-.725V8.875A.625.625 0 0 0 10 8.25zM10.7 6.3a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,s.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},i=(0,a(340498).wt)("infoCircle",n)},529497:(e,t,a)=>{a.d(t,{S:()=>l});a(296540);var s=()=>a(532940),n=()=>a(959013),i=()=>a(901389),o=()=>a(125565),r=a(474848);async function l(e){return i().Gh({message:(0,r.jsx)(o().A,{style:i().xh.title,children:(0,r.jsx)(n().sA,{id:"organizationSecuritySettings.discardChanges.confirmation.message",defaultMessage:"Discard unsaved changes?"})}),description:(0,r.jsx)(o().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,r.jsx)(n().sA,{id:"organizationSecuritySettings.discardChanges.confirmation.description",defaultMessage:"Once discarded, changes cannot be recovered."})}),acceptLabel:(0,r.jsx)(n().sA,{id:"organizationSecuritySettings.discardChanges.confirmation.acceptLabel",defaultMessage:"Discard"}),cancelLabel:(0,r.jsx)(n().sA,{id:"organizationSecuritySettings.discardChanges.confirmation.cancelLabel",defaultMessage:"Cancel"}),icon:(0,s().q)({width:24,height:24,fill:e.text.uiRedPrimary})})}},532940:(e,t,a)=>{a.d(t,{q:()=>i});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M9.875 6.75c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5"}),(0,s.jsx)("path",{d:"M8.16 3.563c.818-1.417 2.863-1.417 3.68 0l5.846 10.125c.818 1.416-.204 3.187-1.84 3.187H4.155c-1.636 0-2.659-1.77-1.84-3.187zm2.598.624a.875.875 0 0 0-1.516 0L3.397 14.313a.875.875 0 0 0 .758 1.313h11.69a.875.875 0 0 0 .759-1.312z"})]})},i=(0,a(340498).wt)("exclamationMarkTriangle",n)},541558:(e,t,a)=>{a.d(t,{Ay:()=>x,CL:()=>y,bL:()=>v});var s=a(296540),n=()=>a(484714),i=()=>a(713998),o=()=>a(244149),r=()=>a(959013),l=()=>a(436696),d=()=>a(755022),c=()=>a(760217),u=()=>a(406699),g=()=>a(933117),m=()=>a(150987),p=()=>a(272630),h=()=>a(992510),f=a(474848);const x=function(e){let{schema:t,sort:a,disabled:n,onChange:i,index:o,collectionViewType:r,collectionContextStore:l}=e;const d=t[a.property];return d?(0,f.jsxs)(s.Fragment,{children:[(0,f.jsx)(S,{disabled:n,schema:t,sort:a,onChange:i,index:o,collectionViewType:r,collectionContextStore:l,propertySchema:d}),(0,f.jsx)(b,{sort:a,index:o,onChange:i,collectionViewType:r,collectionContextStore:l,disabled:n})]}):null},v={ascending:(0,f.jsx)(r().sA,{defaultMessage:"Ascending",id:"collectionSortMenuRow.sortDirectionSelectMenu.ascending"}),descending:(0,f.jsx)(r().sA,{defaultMessage:"Descending",id:"collectionSortMenuRow.sortDirectionSelectMenu.descending"})},y=(0,r().YK)({menuTitle:{id:"collectionSortMenuRow.sortDirectionSelectMenu.title",defaultMessage:"Sort"},emptyPlaceholder:{id:"collectionSortMenuRow.sortDirectionSelectMenu.placeholder",defaultMessage:"Empty"}});function b(e){let{sort:t,index:a,onChange:s,collectionViewType:i,collectionContextStore:u,disabled:m}=e;const h=(0,n().v3)(),x=(0,r().tz)(),b=t.direction,S={menuTitle:x.formatMessage(y.menuTitle),items:[...o().FU],getKey:e=>e,selectedItem:b,disabled:m,onSelect:e=>{const n={...t,direction:e};s(a,n),u?(0,l().X)({environment:h,action:"set_sort_direction",collectionContextStore:u}):i&&(0,d().D)(h,{view_type:i,action:"set_sort_direction"})},renderItem:e=>(0,f.jsx)(c().A,{title:v[e.value],...e}),renderOrigin:e=>(0,f.jsx)(p().A,{...e,placeholder:x.formatMessage(y.emptyPlaceholder),title:b&&v[b],disabled:m,desktopStyle:{opacity:1}})};return(0,f.jsx)(g().A,{...S,mobileActionSheet:!0},"direction")}function S(e){let{propertySchema:t,disabled:a,schema:s,sort:o,onChange:r,index:c,collectionViewType:g,collectionContextStore:p}=e;const x=(0,n().v3)(),{device:v}=x;return(0,f.jsx)(u().Ay,{popupType:v.isMobile?u().z7.SlideUp:u().z7.Popup,renderOrigin:e=>(0,f.jsx)(h().A,{...e,propertySchema:t,disabled:a,textWrapperStyle:{opacity:1}}),render:e=>(0,f.jsx)(m().A,{isRelationProperty:!1,schema:s,onAccept:e=>function(e,t,a,s,n,i,o){s(n,{...a,property:e}),o?(0,l().X)({environment:t,action:"set_sort_property",collectionContextStore:o}):i&&(0,d().D)(t,{view_type:i,action:"set_sort_property"})}(e,x,o,r,c,g,p),onClose:e.close,allowProperty:i().oH}),disabled:a})}},543649:(e,t,a)=>{a.d(t,{A:()=>n});class s extends(()=>a(757695))().default{getInitialState(){return{modalOpen:!1,loading:!1,domainVerification:void 0}}}const n=s},544019:(e,t,a)=>{a.d(t,{A:()=>n});class s extends(()=>a(757695))().default{getInitialState(){return{count:0,exportedPageCount:0}}}const n=new s},555893:(e,t,a)=>{a.d(t,{e:()=>g});var s=a(296540),n=()=>a(484714),i=()=>a(736501),o=()=>a(959013),r=()=>a(966505),l=()=>a(449506),d=()=>a(901389),c=()=>a(436572);const u=(0,o().YK)({getSupportAccessFailed:{defaultMessage:"Failed to load user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.getSupportAccessFailed"},setSupportAccessFailed:{defaultMessage:"Failed to update user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.setSupportAccessFailed"},toastDisabled:{id:"managedUsers.toastMessage.supportAccessDisabled",defaultMessage:"Successfully disabled user's support access status"},toastEnabled:{id:"managedUsers.toastMessage.supportAccessEnabled",defaultMessage:"Successfully enabled user's support access status"}});function g(e){const{spaceId:t,userId:a,isUserUnmanaged:g}=e,m=(0,o().tz)(),p=(0,n().v3)(),[h,f]=(0,s.useState)({loading:!1,error:void 0}),[x,v]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{!async function(){const e=await async function(){if(!a)return;if(g)return;f({loading:!0,error:void 0});const e=await l().callApi({eventName:"getDataAccessConsentForManagedUser",environment:p,data:{spaceId:t,userId:a}});return"failed"===e.type?(f({loading:!1,error:e.error}),void d().c1(m.formatMessage(u.getSupportAccessFailed))):(f({loading:!1,error:void 0}),e.data.expiryTime)}();v(e)}()}),[p,m,t,a,g]);const y=(0,s.useMemo)((()=>Boolean(x&&Number(x)>Date.now())),[x]),b=(0,s.useCallback)((async()=>{if(!a)return;f({loading:!0,error:void 0});const e=y?void 0:Date.now()+i().f,s=await l().callApi({eventName:"setDataAccessConsentForManagedUser",environment:p,data:{spaceId:t,userId:a,expiryTime:e}});if(r().MZ(p,{new_value:Boolean(e)}),"failed"===s.type)return f({loading:!1,error:s.error}),void d().c1(m.formatMessage(u.setSupportAccessFailed));v(e),e?c().D6({label:m.formatMessage(u.toastEnabled)}):c().D6({label:m.formatMessage(u.toastDisabled)}),f({loading:!1,error:void 0})}),[p,m,t,a,y]);return{isAccessGranted:y,toggleDataAccessConsent:b,loading:h.loading,error:h.error}}},566534:(e,t,a)=>{a.d(t,{U:()=>i});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125v-1.062h-1.25V15.5a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875v-11c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v1.125h1.25V4.5a2.125 2.125 0 0 0-2.125-2.125z"}),(0,s.jsx)("path",{d:"M17.942 9.558a.625.625 0 0 1 0 .884l-2.5 2.5a.625.625 0 1 1-.884-.884l1.408-1.408H10a.625.625 0 1 1 0-1.25h6.016l-1.458-1.458a.625.625 0 1 1 .884-.884z"})]})},i=(0,a(340498).wt)("arrowRightFromRectangle",n)},569892:(e,t,a)=>{a.d(t,{Ay:()=>z,_A:()=>N,jo:()=>R});var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(401497),r=()=>a(133033),l=()=>a(959013),d=()=>a(284371),c=()=>a(836251),u=()=>a(278768),g=()=>a(492666),m=()=>a(449506),p=()=>a(884107),h=()=>a(901389),f=()=>a(755636),x=()=>a(426116),v=()=>a(317909),y=()=>a(437622),b=()=>a(224701),S=()=>a(84817),j=()=>a(843189),w=()=>a(802790),A=()=>a(285790),M=()=>a(946548),C=()=>a(125565),I=()=>a(719147),T=()=>a(8178),k=()=>a(288864),_=()=>a(792223),D=a(474848);function z(e){let{spaceStore:t,inviteLinkCode:a,spacePermissionsSettingsStore:s}=e;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(P,{}),(0,D.jsx)(N,{spaceStore:t,inviteLinkCode:a,spacePermissionsSettingsStore:s})]})}function P(){const e=B(),t=(0,n().v3)(),a=(0,s.useCallback)((()=>{f().f({environment:t,url:(0,c().xS)("guides.invitePerson")})}),[t]),i=(0,l().tz)();return(0,D.jsxs)(T().A,{divider:"none",large:!0,style:e.headingStyle,children:[(0,D.jsx)(l().sA,{id:"spacePermissionsSettings.people.common.title",defaultMessage:"People"}),(0,D.jsx)(A().A,{onClick:a,icon:r().$,ariaLabel:i.formatMessage({id:"spacePermissionsSettings.people.common.iconButton.ariaLabel",defaultMessage:"Learn more about inviting people"})})]})}function N(e){let{spaceStore:t,inviteLinkCode:a,spacePermissionsSettingsStore:s,shouldUseEdgeCache:r}=e;const d=(0,n().v3)(),c=(0,i().K8)((()=>(0,y().e3)({spaceStore:t,environment:d,inviteLinkCode:a})),[t,a,d]),m=(0,_().Gg)({spaceStore:t}),h=(0,i().K8)((()=>Boolean(t.getInviteLinkEnabled())),[t]),f=B(),b=(0,o().IS)((e=>({divider:{color:e.stroke.secondary}})),[]);return m&&c?(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{style:f.inviteLinkSection,children:[(0,D.jsxs)("div",{style:{marginRight:8,flexGrow:1},children:[(0,D.jsx)(T().A,{smallMarginBottom:!0,children:(0,D.jsx)(l().sA,{id:"spacePermissionsSettings.spaceMembers.inviteLink.description",defaultMessage:"Invite link to add members"})}),(0,D.jsx)(C().A,{isSmall:!0,isMultiline:!0,style:{marginTop:0,width:"85%"},children:s&&h&&c?(0,D.jsx)(R,{spaceStore:t}):(0,D.jsx)(l().sA,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption.v2",defaultMessage:"Only people with permission to invite members can see this."})})]}),(0,D.jsx)("div",{style:{minWidth:130},children:(0,D.jsxs)(S().Y1,{gap:16,align:"center-right",direction:"horizontal",children:[s&&h&&c&&(0,D.jsx)(j().E,{color:"uiBlue",onClick:()=>{!async function(e){let{environment:t,inviteLinkUrl:a}=e;const s=await p().R.clipboardActions.load();s.copyString({environment:t,stringValue:a,copiedMessage:s.clipboardMessages.copiedLinkToClipboard}),(0,g().b)(t)}({environment:d,inviteLinkUrl:c})},children:(0,D.jsx)(l().sA,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"})}),(0,D.jsx)(M().A,{on:h,onClick:()=>{!function(e){let{environment:t,spaceStore:a,inviteLinkEnabled:s}=e;const n=!s;u().OE(t,{enabled:n}),v().createAndCommit({userAction:"SpacePermissionsSettings.handleInviteLinkClick",environment:t,canUndo:!0,perform:e=>{x().Xk({transaction:e,spaceStore:a,inviteLinkEnabled:Boolean(n)})}})}({environment:d,spaceStore:t,inviteLinkEnabled:h})}})]})})]}),(0,D.jsx)(w().A,{size:40,dividerColor:b.divider.color})]}):r?null:(0,D.jsx)("div",{style:{marginBottom:20}})}function R(e){let{spaceStore:t,organizationId:a,showBlueLink:i}=e;const o=(0,n().v3)(),r=(0,s.useCallback)((()=>{h().ui({message:(0,D.jsx)(l().sA,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset the invite link for all space members? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:h().zw,items:[{label:(0,D.jsx)(l().sA,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await m().callApi({eventName:"refreshInviteLink",environment:o,data:{spaceId:t.id,organizationId:a}}),b().Ow(o)}}]})}),[o,t.id,a]);return(0,D.jsx)(l().sA,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink.v2",defaultMessage:"Only people with permission to invite members can see this. You can also <resetlink>generate a new link</resetlink>",values:{resetlink:e=>i?(0,D.jsx)(k()._,{onClick:r,children:e}):(0,D.jsx)(I().A,{onClick:r,children:e})}})}function B(){return(0,o().IS)((e=>({commonTitle:{display:"flex",alignItems:"center"},commonTitleText:{fontSize:"17px",lineHeight:"22px",fontWeight:590,color:e.text.primary,fontStyle:"normal"},commonHelpButton:{paddingLeft:"1px"},inviteLinkSection:{paddingTop:"24px",paddingBottom:"8px",display:"flex",alignItems:"center"},headingStyle:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:d().Wy.medium,display:"flex"}})),[])}},571499:(e,t,a)=>{a.d(t,{D:()=>l});a(581454);var s=a(296540),n=()=>a(401497),i=()=>a(493823),o=()=>a(554509),r=a(474848);function l(e){let{breadcrumbs:t,headerRight:a,children:l}=e;const d=(0,n().IS)((e=>({container:{margin:"0 auto"},top:{padding:"14px 16px",border:0,borderBottom:`1px solid ${e.stroke.secondary}`,display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,backgroundColor:e.contentBackground,zIndex:10},breadcrumb:{display:"flex",justifyContent:"flex-start",width:"fit-content",alignItems:"center",gap:8},content:{padding:"14px 16px"},iconButton:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:e.accentColors.gray[100],height:20,width:20},icon:{height:20,width:20,padding:4,color:e.icon.primary,transform:"rotate(90deg)"}})),[]);return(0,r.jsxs)("div",{style:d.container,children:[(0,r.jsxs)("div",{style:d.top,children:[(0,r.jsx)("div",{style:d.breadcrumb,children:t.map(((e,t)=>{let a;return 0!==t&&(a=(0,r.jsx)(o().D,{styleName:"Body-14px/Regular",colorName:"quaternary",as:"span",children:"/"})),(0,r.jsxs)(s.Fragment,{children:[a,(0,r.jsx)(i().p,{onClick:e.onClick,isGray:Boolean(e.onClick),disabled:!e.onClick,children:e.message})]},`breadcrumb-${t}`)}))}),a]}),(0,r.jsx)("div",{style:d.content,children:l})]})}},573660:(e,t,a)=>{a.d(t,{c:()=>g,y:()=>u});a(581454);var s=a(296540),n=()=>a(401497),i=()=>a(802790),o=()=>a(364280),r=()=>a(554509),l=a(474848);const d=24,c=12;function u(e){let{title:t,titleId:a,byline:s,bylineId:i,item:u,onClick:g,padding:m,itemStyles:p,styles:h,badge:f,shouldHighlight:x}=e;const v=(0,n().IS)((e=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:m,cursor:g?"pointer":"default",position:"relative"},settingLeft:{flex:3,display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:6},settingRight:{flex:1,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"flex-start"},highlight:{height:`calc(100% + ${c}px)`,width:`calc(100% + ${d}px)`,left:`-${d/2}px`,position:"absolute",backgroundColor:e.buttonHoveredBackground},byline:{lineHeight:"18px"}})),[m,g]),y={...v.settingContainer,...h};return(0,l.jsxs)("div",{style:y,...g?{onClick:g,role:"button",tabIndex:0}:{},children:[(0,l.jsxs)("div",{style:v.settingLeft,children:[(0,l.jsxs)(o().fI,{alignItems:"center",children:[(0,l.jsx)(r().D,{id:a,styleName:"UIRegular-14px/Regular",colorName:"primary",children:t}),f]}),s&&(0,l.jsx)(r().D,{id:i,styleName:"UIMedium-13px/Regular",colorName:"secondary",customStyles:v.byline,children:s})]}),(0,l.jsx)("div",{style:{...v.settingRight,...p},children:u}),x&&(0,l.jsx)("div",{style:v.highlight})]})}function g(e){const{items:t}=e,a=(0,n().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]);return(0,l.jsx)("div",{style:a.container,children:t.map(((e,n)=>(0,l.jsxs)(s.Fragment,{children:[e,n<t.length-1?(0,l.jsx)(i().A,{dividerColor:a.divider.color,size:1}):null]},n)))})}},574752:(e,t,a)=>{a.r(t),a.d(t,{ENGLISH_PERSONAL_PRONOUNS:()=>je,TEST_ONLY__getVisibleSpaceUserIds:()=>we,getLocalCacheFromAppState:()=>ee,isPersonalPronoun:()=>Se,searchActorsById:()=>Ie,searchCollections:()=>de,searchCollectionsWithRecents:()=>ce,searchEmailUser:()=>Ce,searchInstallableIntegrations:()=>fe,searchLocalNavigableBlocks:()=>ue,searchMentionablePages:()=>Te,searchPageIds:()=>ae,searchPageIdsInAncestor:()=>re,searchPagesInAncestor:()=>oe,searchPagesInCollection:()=>se,searchPagesInSpace:()=>te,searchPagesWithParent:()=>ne,searchPublicPages:()=>_e,searchSpaceActorIds:()=>Me,searchSpaceActors:()=>Ae,searchSpaceBots:()=>me,searchSpaceGroups:()=>ge,searchTeams:()=>De,searchTrashPages:()=>le,searchUsers:()=>ve,searchVisibleSpaceUsers:()=>ye});a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520),a(672577),a(430670),a(581454);var s=a.n(a(844751)),n=()=>a(799288),i=()=>a(842599),o=()=>a(617871),r=()=>a(857639),l=()=>a(467730),d=()=>a(142748),c=()=>a(68263),u=()=>a(388821),g=()=>a(861017),m=()=>a(179034),p=()=>a(824862),h=()=>a(519831),f=()=>a(96689),x=()=>a(798880),v=()=>a(245241),y=()=>a(468006),b=()=>a(919709),S=()=>a(695608),j=()=>a(496603),w=()=>a(763824),A=()=>a(498212),M=()=>a(973647),C=()=>a(534177),I=()=>a(720665),T=()=>a(449506),k=()=>a(908928),_=()=>a(518362),D=()=>a(780054),z=()=>a(186445),P=()=>a(47373),N=()=>a(108944),R=()=>a(731320),B=()=>a(825972),L=()=>a(780865),E=()=>a(698449),O=()=>a(696746),U=()=>a(351360),F=()=>a(227440),V=()=>a(605402),H=()=>a(508496),W=()=>a(968172),q=()=>a(20199),G=()=>a(558407),K=()=>a(630116),Y=()=>a(271084),Q=()=>a(224701),$=()=>a(134217),X=()=>a(749240),Z=()=>a(690978),J=()=>a(448433);async function ee(e){const{currentSpaceStore:t,currentSpaceViewStore:a}=U().default.state;if(!t)return;return H().default.checkGate({gateName:"search_use_local_search_cache"})?(q().A.state.localSearchableBlocksCache||await q().A.waitUntil((()=>Boolean(q().A.state.localSearchableBlocksCache))),q().A.state.localSearchableBlocksCache):await(0,J().h)({environment:e,currentSpaceStore:t,currentSpaceViewStore:a})}async function te(e){const{environment:t,query:a,limit:s,currentPageId:n,searchSessionId:i,searchSessionFlowNumber:o,recentlyMentionedPageIds:r,spaceId:l,requireEditPermissions:d,excludeTemplates:c,source:g,boostRecentlyViewedPages:m,ignoresHighlight:p,filterOverrides:h}=e,{currentSpaceStore:f}=U().default.state,x={results:[],recordMap:u().RecordMapWithRole.create().toJson(),total:0,trackEventProperties:void 0};if(!f)return x;const y=await ee(t),b=v().N2({isDeletedOnly:!1,navigableBlockContentOnly:!0,excludeTemplates:c,requireEditPermissions:d||void 0,...h}),S={field:"relevance"};if(!a&&y){const e=(0,Z().k)({query:{query:{text:a,filters:b,sort:S},limit:s},localCachedPages:y,userId:t.currentUser.id,environment:t});return e||x}const j=await T().callApi({eventName:"search",environment:t,data:{type:v().Vz.BlocksInSpace,query:a,spaceId:l,currentPageId:n,searchSessionId:i,searchSessionFlowNumber:o,recentlyMentionedPageIds:r,limit:s,filters:b,sort:S,source:g,recentPagesForBoosting:m?(0,B().cs)(W().A.getWithoutSubscribing(l)):void 0,ignoresHighlight:p}});if("failed"===j.type)throw j.error;return j.data}async function ae(e){const t=await te(e);return{results:t.results.map((e=>e.id)),recordMap:t.recordMap}}async function se(e){const{environment:t,query:a,collectionId:s,limit:n,spaceId:i,excludeTemplates:o,source:r,includePublicPagesWithoutExplicitAccess:l,boostRecentlyViewedPages:d,ignoresHighlight:c}=e,u=new Array,g=await ee(t),m=v().N2({isDeletedOnly:!1,navigableBlockContentOnly:!0,includePublicPagesWithoutExplicitAccess:l,excludeTemplates:o}),p={field:"relevance"},f=T().callApi({eventName:"search",environment:t,data:{type:v().Vz.BlocksInCollection,query:a,spaceId:i,collectionId:s,limit:n,filters:m,sort:p,source:r,recentPagesForBoosting:d?(0,B().cs)(W().A.getWithoutSubscribing(i)):void 0,ignoresHighlight:c}});if(g){const e={table:h().Vl,id:s,spaceId:i},o=new(K().md)(t,e);await o.load();const r=(0,Z().k)({query:{query:{text:a,filters:o.isPageTreeCollection()?{...m,ancestors:[s]}:{...m,parentId:s},sort:p},limit:n},localCachedPages:g,userId:t.currentUser.id,environment:t});r&&u.push(...r.results)}const x=await f;if("failed"===x.type){if(0===u.length)throw x.error}else{let e=x.data.results;a||(e=L().Fj({sort:p,batchSize:n,currentUserId:t.currentUser.id,unsorted:e})),u.push(...e)}return{results:j().oE(j().sb(u.map((e=>e.id))))}}async function ne(e){const{environment:t,query:a,parentId:s,limit:n,spaceId:i,excludeTemplates:o,source:r,includePublicPagesWithoutExplicitAccess:l,boostRecentlyViewedPages:d,ignoresHighlight:c}=e,[u,g]=await Promise.all([T().callApi({eventName:"search",environment:t,data:{type:v().Vz.BlocksInParent,query:a,spaceId:i,parentId:s,limit:n,filters:v().N2({isDeletedOnly:!1,navigableBlockContentOnly:!0,includePublicPagesWithoutExplicitAccess:l,excludeTemplates:o}),sort:{field:"relevance"},source:r,recentPagesForBoosting:d?(0,B().cs)(W().A.getWithoutSubscribing(i)):void 0,ignoresHighlight:c}}),ie(e)]);if("failed"===u.type)throw u.error;return{results:j().oE(j().sb([g,...u.data.results.map((e=>e.id))]))}}async function ie(e){const{environment:t,query:a,parentId:s,spaceId:n}=e,i=(0,g().parseRoute)({url:a,baseUrl:D().A.domainBaseUrl,publicDomainName:D().A.publicDomainName,isMobile:t.device.isMobile,protocol:D().A.protocol,currentUrl:window.location.href}),o="page"===i.name?i.peekViewBlockId||i.blockId:void 0,r=((0,A().c_)(a)?(0,A().np)(a):void 0)||o;if(r){const e={table:m().ev,id:r},a=new(K().Bv)(t,e);await a.load();const i=a.id,o=a.getParentId(),l=a.getSpaceId();if(o===s&&l===n)return i}}async function oe(e){const{environment:t,query:a,ancestorId:s,limit:n,excludeTemplates:i,source:o,currentPageId:r,searchSessionId:l,searchSessionFlowNumber:d,recentlyMentionedPageIds:c,ignoresHighlight:u}=e,g=await T().callApi({eventName:"search",environment:t,data:{type:v().Vz.BlocksInAncestor,query:a,ancestorId:s,filters:v().N2({navigableBlockContentOnly:!0,excludeTemplates:i}),sort:{field:"relevance"},limit:n,source:o,currentPageId:r,searchSessionId:l,searchSessionFlowNumber:d,recentlyMentionedPageIds:c,ignoresHighlight:u}});if("failed"===g.type)throw g.error;return g.data}async function re(e){return{results:(await oe(e)).results.map((e=>e.id))}}async function le(e){const{environment:t,query:a,limit:s,spaceId:n}=e,i=0===a.trim().length?{field:"lastEdited",direction:"desc"}:{field:"relevance"},o={query:a,filters:v().N2({isDeletedOnly:!0,navigableBlockContentOnly:!0,excludeTemplates:!1,editedBy:e.editedByIds||[],ancestors:e.ancestorIds||[],inTeams:e.teamspaceIds||[]}),sort:i,limit:s,spaceId:n,source:"trash"},r=T().callApi({eventName:"search",environment:t,data:{type:v().Vz.BlocksInSpace,...o}}),l=await r;if("failed"===l.type)throw l.error;{const{results:e,recordMap:t,total:a}=l.data;return{results:e.map((e=>e.id)),recordMap:u().RecordMapWithRole.create(t),endOfResultsReached:a===e.length}}}async function de(e,t){const{query:a,limit:s,source:n,requireEditPermissions:i,databaseType:o,spaceStore:r,searchSessionId:l}=t;if(!r)return{results:[],total:0};const d=r.id,[c,u]=await Promise.all([ze(e,{...t,spaceId:d,requireEditPermissions:i,databaseType:o,parentStore:r}),T().callApi({eventName:"search",environment:e,data:{type:v().Vz.CollectionsInSpace,query:a,spaceId:d,limit:s,filters:{...v().N2({excludeTemplates:!0,requireEditPermissions:i,databaseType:o})},sort:{field:"relevance"},source:n,recentPagesForBoosting:(0,B().cs)(W().A.get(d)),searchSessionId:l}})]),g=j().KC("success"===u.type?j().oE(u.data.results.map((e=>e.collectionId))):[],c).slice(0,s);return{results:g,total:"success"===u.type?u.data.total:g.length}}async function ce(e){const{environment:t,collectionViewBlockStore:a,spaceStore:s,parentStore:n,query:i,limit:o,requireEditPermissions:r,databaseType:l,searchSessionId:d}=e;let c=[],u=0;if(!i){const e=t.currentUser.id;s&&(c=[...(0,_().F)({currentUserId:e,spaceId:s.id}).map((e=>K().md.createChildStore(n,{table:h().Vl,id:e})))]),c=[...j().oE(null==a?void 0:a.getCollectionViewStores().map((e=>e.getCollectionStore()))),...c],l&&(c=c.filter((e=>{const t=e.getDatabaseType();return!!t&&l.includes(t)}))),c=j().hS(c,(e=>e.id)).filter((e=>!r||e.canEdit()))}const g=await de(t,{query:i,limit:o,source:"collection_settings_source",requireEditPermissions:r,databaseType:l,spaceStore:s,searchSessionId:d});return c=[...c,...g.results.map((e=>K().md.createChildStore(n,{table:h().Vl,id:e})))],u=g.total,c=c.filter((e=>!(0,N().ze)(e)&&e.canRead())),await Promise.all(c.map((async e=>{await e.load()}))),{results:j().hS(c,(e=>e.id)).slice(0,o).map((e=>e.id)),total:u}}async function ue(e){const{environment:t,searchQuery:a,blockTypes:s,currentSpaceStore:n,currentSpaceViewStore:i,limit:o,parentId:r}=e,l=await(0,J().h)({environment:t,currentSpaceStore:n,currentSpaceViewStore:i}),d={query:{text:a,filters:(0,v().N2)({requireEditPermissions:!1,isDeletedOnly:!1,excludeTemplates:!0,navigableBlockContentOnly:!0,blockTypes:s,parentId:r}),sort:{field:"relevance"}},limit:o},c=(0,Z().r)({query:d,localCachedPages:l,parentStore:n,isOnline:F().A.state.online,environment:t,shouldLimitLocalResultsWhenOnline:!1,applyScoreThresholdWhenOnline:!0,canUseLtr:!1});return c&&M().Q.isSuccess(c)?c.value.results.filter((e=>e.store.pathIsAccessibleAndAlive())):[]}function ge(e){const{query:t,intl:a}=e,s=V().A.state.permissionGroupsAndMemberCounts.map((e=>e.group));if(0===s.length)return[];return t?(0,l().Ay)(t,s,(e=>(0,E().Pf)({intl:a,groupName:e.name})),{normalizeFuzzyScore:!0}):s}async function me(e){const{query:t}=e,{currentSpaceStore:a}=U().default.state;if(!a)return[];return he({parentStore:a,query:t,botIds:await pe(e)})}async function pe(e){const{environment:t}=e,{currentSpaceStore:a}=U().default.state;if(!a)return[];const s=a.id,n=await k().Ju({environment:t,table:f().NX,id:s,type:"guest"});return j().sb(n.botIds)}function he(e){const{parentStore:t,query:a,botIds:s}=e,i=j().oE(s.map((e=>{const a=t.table===f().NX?t.id:void 0;return(0,K().Oo)(t,{table:p().GP,id:e,spaceId:a}).getValue()})));return a?(0,l().Ay)(a,i,n().tb):i}async function fe(e){const{query:t,environment:a,spaceId:s,botSettings:n}=e;if(!s)return[];const i=await T().callApi({eventName:"searchIntegrations",environment:a,data:{query:t}});if("success"===i.type){const e=i.data.integrationIds,t=n&&n.integration_approval_statuses?Object.keys(n.integration_approval_statuses):[],a=Boolean(null==n?void 0:n.integration_restrictions),s=Boolean("approved_or_built_by_notion"===(null==n?void 0:n.integration_restrictions));return a?e.filter((e=>s?t.includes(e)||(0,o().CX)({integrationId:e,env:"production"}):t.includes(e))):e}if("failed"===i.type)throw i.error;(0,C().HB)(i)}const xe=new Set(["gmail.com","yahoo.com","hotmail.com","outlook.com","icloud.com","aol.com"]);async function ve(e){var t;let{environment:a,parentStore:s,query:n,userIds:o,minFuzzyScore:d,placeSelfFirst:c}=e;const u=H().default.checkGate({gateName:"search_batch_load_users"}),g=w().lX(o,u?300:Math.max(o.length,1),(async e=>{const t=K().LU.createChildStore(s,{table:x().oo,id:e});return await t.load(),t.getValue()}));(await(0,w().nQ)(1e4,[g])).timeout&&r().log({level:"error",from:"searchActions.searchUsers",type:"UserStoreLoadTimeoutV1",error:{message:"The UserStore.load()'s took longer than 10 seconds"},data:{searchedUserIdCount:o.length,queryLength:n.length,parentStoreLoaded:s.isReady()}});const m=j().oE(await g);let p;const h=null===(t=U().default.state.currentUserStore)||void 0===t?void 0:t.userId;if(c&&h){const e=m.findIndex((e=>h===e.id));e>-1&&(p=m[e],m.splice(e,1))}const f=Y().k.state??{},v=Math.max(...Object.values(f));function y(e){var t;return e===(null===(t=U().default.state.currentUserRootStore)||void 0===t?void 0:t.userId)?v+1e-5:f[e]??0}const b=j().Im(f)?m:m.sort(((e,t)=>{const a=y(e.id);return y(t.id)-a})),A=new Set(s.getEmailDomains()),M=n?(0,l().Ay)(n,b,S().T2,{minThreshold:d,getSortScore:e=>{const{original:t,score:a}=e,s=t.email&&(0,i().zN)(t.email),n=p&&(0,i().zN)(p.email),o=s&&A.has(s),r=n===s,l=n&&xe.has(n);return a*(o||r&&!l?-2:-1)}}):m;return p?[p,...M]:M}async function ye(e){const{currentSpaceStore:t}=U().default.state;if(!t)return[];const a=e.query.startsWith("@")?e.query.slice(1):e.query,s=await be(e);return ve({environment:e.environment,parentStore:t,query:a,userIds:s,minFuzzyScore:e.minFuzzyScore,placeSelfFirst:e.placeSelfFirst})}async function be(e){const{environment:t,membersOnly:a}=e,{currentSpaceStore:s}=U().default.state;if(!s)return[];await Q().$D({environment:t,spaceId:s.id});const n=X().subscriptionDataStoreInstance.state;if(!n)return[];const i=(0,$().Be)(n).filter((e=>!(a&&!(0,c().DH)(e.role)))),{mainEditorCurrentBlockStore:o,currentUserStore:r}=U().default.state,l=o&&!a?(0,R().i0)(o).flatMap((e=>{let{permissionItem:t}=e;return(0,c().B2)(t)?[t.user_id]:[]})):[],d=(0,P().Qd)()&&o?function(e,t){const a=N().Uo(e);if(a){const e=new Set((0,y().gm)({membership:a.getRawMembership()}));return t.filter((t=>"none"!==t.role||t.isPageGuest||t.isTeamGuest&&e.has(t.userId)))}return t.filter((e=>"none"!==e.role||e.isPageGuest))}(o,i):i,u=d.map((e=>e.userId));return j().sb([...j().oE([null==r?void 0:r.userId]),...l,...u])}function Se(e,t){return!(!t.startsWith("en-")||!je.has(e.toLowerCase()))}const je=new Set(["me","you","i"]),we=be;async function Ae(e){const{query:t}=e,[a,s]=await Promise.all([ye({...e,placeSelfFirst:""===t||Se(t,e.userLocale)}),me(e)]);return{users:a,bots:s}}async function Me(e){const[t,a]=await Promise.all([be(e),pe(e)]);return{userIds:t,botIds:a}}async function Ce(e,t){const a=(0,i().qh)(t);if((0,i().DT)(a)&&a){const t=await T().callApi({eventName:"findUser",environment:e,data:{email:a}});if("failed"===t.type)throw t.error;const s=t.data;return s.value?{user:s.value.value}:{email:a}}return{}}async function Ie(e){const{environment:t,query:a,userIds:s,botIds:n,store:i}=e;if(H().default.checkGate({gateName:"dont_load_users"}))return{users:[],bots:[]};let o=i;if(!o){const{currentSpaceStore:e}=U().default.state;if(!e)return{users:[],bots:[]};o=e}return{users:await ve({environment:t,parentStore:o,query:a,userIds:s}),bots:he({parentStore:o,query:a,botIds:n})}}async function Te(e){const{nearBlock:t,environment:a,query:s,source:n,searchSessionId:i,searchSessionFlowNumber:o}=e,{currentSpaceStore:r}=U().default.state,l=(0,z().s0)(),d=t&&(0,R().i0)(t).find((e=>{let{permissionItem:t}=e;return(0,c().FP)(t)})),u=G().A.getMentionedIds(a.currentUser.id);if(r){return ke(await te({environment:a,query:s,limit:20,spaceId:r.id,currentPageId:l,searchSessionId:i,searchSessionFlowNumber:o,recentlyMentionedPageIds:u,requireEditPermissions:!1,excludeTemplates:!0,source:n,boostRecentlyViewedPages:!0,ignoresHighlight:!0}))}if(d&&d.from.table===m().ev){return ke(await oe({environment:a,query:s,limit:20,ancestorId:d.from.blockId,excludeTemplates:!0,source:n,currentPageId:l,searchSessionId:i,searchSessionFlowNumber:o,recentlyMentionedPageIds:u,ignoresHighlight:!0}))}return[]}function ke(e){const{trackEventProperties:t,results:a}=e,s=(0,I().MU)((0,C().WP)(t).map((e=>{let[t,a]=e;return[`server-${t}`,a]})));return a.map((e=>({...e,serverEventProperties:s})))}async function _e(e){const{environment:t,query:a,source:s,limit:n}=e,{currentSpaceStore:i}=U().default.state;if(!i)return[];return(await te({environment:t,query:a,limit:n||20,spaceId:i.id,requireEditPermissions:!0,excludeTemplates:!0,source:s,boostRecentlyViewedPages:!1})).results.filter((e=>{const t=K().Bv.createChildStore(i,{table:m().ev,id:e.id}),a=(0,N().E)(t);return(0,d().ot)(a)}))}async function De(e){let{spaceViewStore:t,query:a,teamStores:s}=e;const n=j().oE(await Promise.all(s.map((async e=>(await e.load(),e.getValue()))))),i=t.getTeamsStores(),o=new Set(i.map((e=>e.id)));return a?(0,l().Ay)(a,n,(e=>e.name),{getSortScore:e=>{const{original:t,score:a}=e;return a*(o.has(t.id)?-2:-1)}}):n}function ze(e,t){const{query:a,limit:n,spaceId:i,requireEditPermissions:o,databaseType:r}=t,l=[];if(n>0){const d=new AbortController;e.defaultRecordCache.inMemoryRecordCache.forEachRecord(e.currentUser.id,(e=>{let{model:u,role:g}=e;if(u.table===h().Vl){const e=u.space_id===i,m=!o||(0,c().p2)(g);if(!e||!m||(0,O().Nh)(u.getParentId()))return;const p=u.getDatabaseType();if(!(!r||p&&r.includes(p)))return;const h=(0,b().q4_)(u.getName());if(!s().test(a,h))return;const f=K().md.createChildStore(t.parentStore,u.pointer),x=N().g7(f);if(!N().yR(x))return;l.push(u.pointer.id),l.length>=n&&d.abort()}}),d.signal)}return l}},582684:(e,t,a)=>{a.d(t,{C:()=>n});a(296540);const s={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M14.075 3.45a.625.625 0 0 0-.884 0l-3.497 3.5a.625.625 0 0 0 .883.884l2.431-2.431v10.705a.625.625 0 0 0 1.25 0V5.402l2.431 2.43a.625.625 0 1 0 .884-.883zM2.427 12.167a.625.625 0 0 1 .884 0l2.43 2.431V3.893a.625.625 0 0 1 1.25 0v10.705l2.431-2.43a.625.625 0 0 1 .884.883L6.81 16.55a.625.625 0 0 1-.884 0l-3.498-3.498a.625.625 0 0 1 0-.884"})},n=(0,a(340498).wt)("arrowUpDown",s)},583521:(e,t,a)=>{a.d(t,{p:()=>C,I:()=>M});a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(581454);var s=a(296540),n=()=>a(221844),i=()=>a(223116),o=()=>a(484714),r=()=>a(792071),l=()=>a(436604),d=()=>a(388821),c=()=>a(179034),u=()=>a(445120),g=()=>a(319625),m=()=>a(496603),p=()=>a(989423);var h=()=>a(449506),f=()=>a(904671),x=()=>a(30731),v=()=>a(963589),y=()=>a(630116);const b=20,S={query:"",createdBy:[],sharedWith:void 0,audience:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[],pageStatus:["alive"]},j={...S,audience:["shared_externally","shared_internally","shared_to_web"]},w={filters:S,pageStores:[],numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0,shouldReRunSearch:!1,showSuggestions:!0},A={...w,filters:j};function M(e){let{spaceStore:t,userStore:a,hasUserConfirmedAcknowledgement:r,organizationId:d}=e;const S=(0,v().X)("enabled_bev_default_audience_filter")?A:w,j=(0,o().v3)(),[M,I]=(0,s.useState)(S),T=(0,s.useRef)(S.filters),k=(0,s.useRef)(t.id),_=(0,s.useCallback)((async e=>{let{restartSearch:s,ignoreFilterComparison:o}=e;if(!r)return;if(!o&&m().n4(M.filters,T.current)&&t.id===k.current)return;T.current=M.filters,k.current=t.id;let f=M.loading,v=M.error,S=M.hasNextPage,A=M.numPagesLoaded,_=M.paginationToken;if(s&&(I((e=>({...w,showSuggestions:e.showSuggestions,filters:e.filters}))),f=w.loading,v=w.error,S=w.hasNextPage,A=w.numPagesLoaded,_=w.paginationToken),S&&!f&&!v){I((e=>({...e,showSuggestions:!1,loading:!0})));try{const e=await h().callApi({eventName:"adminContentSearch",environment:j,data:{spaceId:t.id,organizationId:d,sort:{field:"relevance",direction:"desc"},limit:b,paginationToken:_,query:M.filters.query,audience:M.filters.audience,lastEditedTime:(0,x().ES)(M.filters.lastEditedTime),createdTime:(0,x().ES)(M.filters.createdTime),createdBy:M.filters.createdBy,sharedWith:M.filters.sharedWith,teamspaceIds:M.filters.teamIds,deletionStatuses:M.filters.pageStatus},headers:{[l().B3]:t.id}});if("failed"===e.type)throw e.error;!function(e,t){p().vd(e,"admin_content_search_analytics_queried",t)}(j,{filters:M.filters,pageNumber:A});const s=e.data.paginationToken,o=e.data.recordIds,r=C({recordMapWithRoleJson:e.data.recordMap}),g=new(n().A)({name:i().a9,data:new(u().b)({[a.id]:r})});g.addCacheFallback(j.defaultRecordCache.inMemoryRecordCache),I((e=>{const t=[],a=new Set(e.pageStores.map((e=>e.id)));for(const s of o)if(!a.has(s)){const e=new(y().Bv)(j,{table:c().ev,id:s},{inMemoryRecordCache:g});t.push(e)}const n=[...e.pageStores,...t];return{...e,pageStores:n,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:s,hasNextPage:Boolean(s)}}))}catch(D){const e=(0,g().A)(D);I((t=>({...t,loading:!1,error:e})))}}}),[j,d,t,a,r,M.filters,M.loading,M.error,M.hasNextPage,M.numPagesLoaded,M.paginationToken]);(0,s.useEffect)((()=>{M.shouldReRunSearch&&(I((e=>({...e,shouldReRunSearch:!1}))),_({restartSearch:!0,ignoreFilterComparison:!1}))}),[M.shouldReRunSearch,_]);const D=(0,s.useCallback)((async()=>{M.shouldReRunSearch||await _({restartSearch:!1,ignoreFilterComparison:!0})}),[M.shouldReRunSearch,_]),z=(0,s.useCallback)((async e=>{await _({restartSearch:!0,ignoreFilterComparison:e||!1})}),[_]),P=(0,s.useCallback)(((e,t)=>{!function(e,t){p().vd(e,"admin_content_search_analytics_filter_change",t)}(j,{newFilters:e}),I((a=>({...a,filters:{...a.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})))}),[j]),N=(0,s.useCallback)((async e=>{const a=await async function(e){let{environment:t,blockId:a,spaceStore:s}=e;const n=await h().callApi({eventName:"getPrivatePageInfo",environment:t,data:{id:a}});if("failed"===n.type)return;const o=f().$({environment:t,blockId:a,privateRecordCacheName:i().a9,ancestorData:n.data,spaceId:s.id});return o}({environment:j,blockId:e,spaceStore:t});a?I((t=>{const s=[];for(const n of t.pageStores)n.id===e?a.pathHasPurgedDeletedPermission()||s.push(a):s.push(n);return{...t,pageStores:s,loading:!1,error:void 0}})):await _({restartSearch:!0,ignoreFilterComparison:!1})}),[j,t,_]);return{showSuggestions:M.showSuggestions,filters:M.filters,pageStores:M.pageStores,loading:M.loading,error:M.error,hasNextPage:M.hasNextPage,loadNextPage:D,runNewSearch:z,setFilters:P,refreshSearchResult:N}}function C(e){const{recordMapWithRoleJson:t}=e,a=d().RecordMapWithRole.create(t),s=d().RecordMapWithRole.create();for(const{pointer:n,model:i}of a)if(i){const e=r().Bj6.fromValue(n.table,m().mg(i.__IM_SORRY__getValue()));s.setModelAndRole(n,e,"editor")}return s}},590082:(e,t,a)=>{a.d(t,{WK:()=>u,iv:()=>g});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(351360),r=()=>a(107683),l=()=>a(466492),d=()=>a(687190),c=a(474848);const u=40;function g(e){let{sidebarProps:t,tabRenderer:a,tabNames:n,tabAccessor:i,defaultTab:o,sceneProps:d,isOpen:u,onDismiss:g}=e;const[p,h]=(0,s.useState)(o),f=a[p];return(0,c.jsx)(r().s,{isOpen:u,onDismiss:g,render:()=>(0,c.jsx)(l().J,{left:(0,c.jsx)(m,{sidebarProps:t,tabRenderer:a,tabNames:n,tabAccessor:i,selectedTabName:p,setSelectedTab:h}),right:(0,c.jsx)("div",{style:{width:"calc(100% - 8px)"},children:f.scene({...d,setSelectedTab:h})}),showElevatedConsoleContainer:!0}),areaConstraint:{width:{type:"fixed",length:1280},height:{type:"fixed",length:800}},borderRadius:20})}function m(e){let{sidebarProps:t,tabRenderer:a,tabNames:r,tabAccessor:l,selectedTabName:u,setSelectedTab:g}=e;const m=(0,n().v3)(),p=(0,i().K8)((()=>o().default.state.currentUserStore),[]),h=(0,i().K8)((()=>r.filter((e=>l[e]({environment:m,currentUserStore:p})))),[p,m,l,r]),f=(0,s.useMemo)((()=>r.map((e=>({id:e,name:a[e].tab.name,icon:a[e].tab.icon,isSelected:u===e,onClick:()=>{g(e)},disabled:!h.includes(e)})))),[r,a,u,h,g]);return(0,c.jsx)(d().yc,{items:f,...t})}},592010:(e,t,a)=>{a.d(t,{Z:()=>m,b:()=>g});var s=a(296540),n=()=>a(56366),i=()=>a(515358),o=()=>a(433847),r=()=>a(959013),l=()=>a(534177),d=()=>a(108944),c=()=>a(566468),u=a(474848);function g(e){let{blockStore:t,spaceStore:a,useSecondaryColorTitle:i}=e;const[r,l]=(0,s.useState)(),g=(0,n().K8)((()=>{const e=d().E(t);return o().wD(e)}),[t]);(0,s.useEffect)((()=>{!async function(){if(!a)return;const e=await o().x8({spaceId:a.getSpaceId(),inheritedPermissionItemsForPage:g,loadRecordModel:a.loadRecordModel});l(e)}()}),[a,g]);const p=(0,s.useMemo)((()=>{if(r)return m(r)}),[r]);return(0,u.jsx)(c().s7,{useSecondaryColorTitle:i,useThinTitle:!0,title:p})}function m(e){switch(e){case"private":return(0,u.jsx)(r().sA,{...i().p.private});case"shared_internally":return(0,u.jsx)(r().sA,{...i().p.sharedInternally});case"shared_externally":return(0,u.jsx)(r().sA,{...i().p.sharedExternally});case"shared_to_web":return(0,u.jsx)(r().sA,{...i().p.publishedToWeb});default:(0,l().HB)(e)}}},593467:(e,t,a)=>{a.d(t,{Jb:()=>d,OJ:()=>h,fP:()=>x,i_:()=>f});a(898992),a(354520),a(581454);var s=()=>a(416845),n=()=>a(436604),i=()=>a(798880),o=()=>a(898486),r=()=>a(630116),l=()=>a(449506);const d="last_90_days",c={field:"last_active",direction:"desc"};async function u(e){const{environment:t,filter:a,spaceId:s,currentSpaceId:n,usersTabData:i}=e,o=null==i?void 0:i.dailyUsersData;return o&&a===(null==i?void 0:i.graphFilter)&&n===s?o:g({environment:t,spaceId:s,filter:a})}async function g(e){const{environment:t,spaceId:a,filter:s}=e,i=await l().callApi({eventName:"getDailyUsersAnalytics",environment:t,data:{spaceId:a,activeWindow:"all_time"===s?"last_90_days":s},headers:{[n().B3]:a}});return"failed"===i.type?i.body:i.data}async function m(e){const{environment:t,filter:a,sort:s,spaceStore:n,currentSpaceId:i,usersTabData:o}=e,r=null==o?void 0:o.tableFilter,l=null==o?void 0:o.userTableSort;return null!=o&&o.usersAndStats&&r===a&&l&&l.direction===s.direction&&l.field===s.field&&i===n.id?o.usersAndStats:p({environment:t,filter:a,sort:s,spaceStore:n})}async function p(e){const{environment:t,filter:a,sort:s,spaceStore:o}=e,d=await l().callApi({eventName:"loadWorkspaceAnalyticsUsers",environment:t,data:{spaceId:o.id,filters:{timeRange:a},sort:s},headers:{[n().B3]:o.id}});return"failed"===d.type?d.body:d.data.users.map((e=>({stats:e,userStore:r().LU.createChildStore(o,{table:i().oo,id:e.userId})})))}async function h(e){const{environment:t,spaceStore:a,currentTab:n,currentSpaceId:i,usersTabData:o,setState:r,graphFilter:l,tableFilter:g}=e,p=await async function(e){const{environment:t,spaceStore:a,currentSpaceId:n,usersTabData:i,graphFilter:o,tableFilter:r}=e,l=o||(null==i?void 0:i.graphFilter)||d,g=r||(null==i?void 0:i.tableFilter)||d,p=(null==i?void 0:i.userTableSort)||c,[h,f]=await Promise.all([u({environment:t,filter:l,spaceId:a.id,currentSpaceId:n,usersTabData:i}),m({environment:t,filter:g,sort:p,spaceStore:a,currentSpaceId:n,usersTabData:i})]),x=(0,s().Ow)(h)||!h?[]:h,v=(0,s().Ow)(f)||!f?[]:f;return{graphFilter:l,tableFilter:g,userTableSort:p,dailyUsersError:(0,s().Ow)(h)?h:void 0,dailyUsersData:x,usersAndStatsError:(0,s().Ow)(f)?f:void 0,usersAndStats:v}}({environment:t,spaceStore:a,currentSpaceId:i,usersTabData:o,graphFilter:l,tableFilter:g});r({currentSpaceId:a.id,currentTab:n,usersTabData:p})}async function f(e){const{environment:t,spaceStore:a}=e,n=e.nextGraphFilter||d,i=e.nextTableFilter||d,o=e.nextSort||c,[r,l]=await Promise.all([g({environment:t,filter:n,spaceId:a.id}),p({environment:t,filter:i,sort:o,spaceStore:a})]),u=(0,s().Ow)(r)||!r?[]:r,m=(0,s().Ow)(l)||!l?[]:l;return{graphFilter:n,tableFilter:i,userTableSort:o,dailyUsersError:(0,s().Ow)(r)?r:void 0,dailyUsersData:u,usersAndStatsError:(0,s().Ow)(l)?l:void 0,usersAndStats:m}}function x(e,t){if((0,s().vP)(e)){const a=(0,o().DX)(t,e);if(a)return a}return t.formatMessage({defaultMessage:"Failed to retrieve analytics. Try refreshing and reopening the settings.",id:"workspaceAnalytics.usersTab.refershUserAnalytics.defaultFailed"})}},594137:(e,t,a)=>{a.d(t,{z:()=>r});var s=()=>a(484714),n=()=>a(187174),i=()=>a(534177),o=()=>a(449506);function r(e){const t=(0,s().v3)(),[{value:a,status:r}]=(0,n().Yb)((async()=>{if(!e)return{};const a=await o().callApi({eventName:"getAvailableOrganizationFeatures",environment:t,data:{organizationId:e}});if("success"===a.type)return a.data;if("failed"===a.type)throw a.error;(0,i().HB)(a)}),[t,e]);return{loading:"pending"===r,features:a??{}}}},602105:(e,t,a)=>{a.d(t,{V:()=>s,v:()=>n});const s={mini:3,small:4,default:6,medium:8,large:12,max:16},n="0px 4px 0px -2px #00000005"},609989:(e,t,a)=>{a.d(t,{$:()=>s,A:()=>i});const s={INVALID_DATE:"Invalid date",INVALID_RANGE:"Invalid range",NOT_SUPPORTED:"Not supported"};class n extends(()=>a(757695))().default{getInitialState(){return{dateEdited:!1,timeEdited:!1,temporaryValue:{date:void 0,time:void 0},error:void 0}}}const i=n},617842:(e,t,a)=>{a.d(t,{M:()=>i});a(296540);var s=()=>a(493823),n=a(474848);function i(e){const{children:t,disabled:a,onClick:i}=e;return(0,n.jsx)(s().p,{onClick:i,disabled:a,style:{justifyContent:"center",marginLeft:6},isBlue:!a,isLightGray:a,children:t})}},623742:(e,t,a)=>{a.d(t,{A:()=>x,v:()=>f});var s=a(296540),n=()=>a(56366),i=()=>a(310442),o=()=>a(824862),r=()=>a(798880),l=()=>a(959013),d=()=>a(534177),c=()=>a(256863),u=()=>a(125565),g=()=>a(453697),m=()=>a(351360),p=a(474848);function h(e){const{actorStore:t,avatar:a,isLarge:s}=e,n=s?32:28;return t?t.table===o().GP?(0,p.jsx)(c().A,{botStore:t,size:n}):t.table===r().oo?(0,p.jsx)(g().A,{userStore:t,size:n}):t.table===i().yj?(0,p.jsx)(g().A,{userStore:void 0,size:n}):void(0,d().HB)(t):a?(0,p.jsx)(g().A,{avatar:a,size:n}):(0,p.jsx)(g().A,{userStore:void 0,size:n})}function f(e){return"membership_admin"===e?"membership_admin":"editor"===e||"admin"===e?"admin":"none"===e||"guest"===e?"guest":"team_level_guest"===e?"team_level_guest":void("member"!==e&&"read_and_write"!==e&&"no_access"!==e&&"not_in_space"!==e&&e&&(0,d().HB)(e))}const x=function(e){const t=(0,l().tz)(),{actorStore:i,avatar:o,containerStyle:d,id:c,spaceRole:g,avatarBadge:f,caption:x,isLarge:v,restorationStatus:y,hideRolePill:b}=e,S=!b&&("admin"===g||"membership_admin"===g),j="guest"===g||"team_level_guest"===g,w=!b&&j,A=(0,n().K8)((()=>i?i.getDisplayName(t):null==o?void 0:o.name),[i,o,t]),M=(0,n().K8)((()=>{const{currentUserStore:e}=m().default.state;return!!e&&(!!i&&e.id===i.id)}),[i]),C=(0,a(401497).IS)((e=>({titleYouIndicator:{color:e.mediumTextColor}})),[]),I=(0,n().K8)((()=>Boolean(x)?x:i?i.getDetail():null==o?void 0:o.email),[x,i,o]),T=(0,n().K8)((()=>m().default.state.currentSpaceStore),[]),k=(0,n().K8)((()=>(0,a(663590).FI)()),[]),[_,D]=(0,s.useState)(!1);return(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center",maxWidth:v?"unset":300,marginLeft:v&&!k?2:0,...d},children:[(0,p.jsxs)("div",{style:{position:"relative",...!v&&{height:28,width:28}},children:[(0,p.jsx)(h,{actorStore:i,avatar:o,isLarge:v}),f]}),(0,p.jsxs)("div",{style:{minWidth:0,marginLeft:v?10:6,marginRight:v?10:6},children:[(0,p.jsxs)("div",{id:c,style:{display:"flex",gap:4},children:[(0,p.jsx)(u().A,{children:M?(0,p.jsx)(l().sA,{id:"cellMemberAvatar.displayName.title",defaultMessage:"{userFullDisplayName} <youIndicatorText>(You)</youIndicatorText>",values:{userFullDisplayName:A,youIndicatorText:e=>(0,p.jsx)("span",{style:C.titleYouIndicator,children:e})}}):A}),S&&(0,p.jsx)(a(34293).A,{role:g}),w&&(0,p.jsx)(a(919172).Q,{labelType:g,shouldUseTabStyle:k}),T&&y&&(0,p.jsx)(a(881753).A,{spaceStore:T,restorationStatus:y,didAttemptRecovery:_})]}),(0,p.jsx)(u().A,{isSmall:!0,style:{display:"flex"},children:(0,p.jsx)(u().A,{isSmall:!0,children:I})})]}),!j&&!_&&T&&(null==i?void 0:i.table)===r().oo&&A&&"canBeRestored"===(null==y?void 0:y.status)&&(0,p.jsx)(a(266324).A,{userStore:i,spaceId:T.id,onSubmit:()=>D(!0)})]})}},625319:(e,t,a)=>{a.d(t,{D:()=>u,X:()=>g});a(944114);var s=a(296540),n=()=>a(484714),i=()=>a(852507),o=()=>a(386164),r=()=>a(449506),l=()=>a(594137),d=()=>a(511303),c=a(474848);const u=(0,s.createContext)({spaceIds:[],samlConfigs:[],teamIdsForSpace:{},teamAggregateDataForSpace:{},loadTeamsForSpace:function(e,t){return Promise.resolve()},visibleUsersForSpace:{},loadVisibleUsersForSpace:function(e,t){return Promise.resolve()},joinedUserIdsForSpace:{},permissionGroupsForSpace:{},loadPermissionGroupsForSpace:function(e,t){return Promise.resolve()},userPermissionGroupIdsBySpaceId:{},loadUserPermissionGroupIdsBySpaceId:function(e,t){return Promise.resolve()},refreshSamlConfigs:async()=>{},loadSamlConfigs:async()=>Promise.resolve([]),organizationMemberEmailDomains:[],memberEmailDomainsForSpace:{},guestEmailDomains:[],refreshOrganization:async function(){},availableOrganizationFeatures:{}});function g(e){let{children:t,organizationId:a}=e;const g=(0,n().v3)(),[m,p]=(0,s.useState)([]),[h,f]=(0,s.useState)([]),[x,v]=(0,s.useState)({}),[y,b]=(0,s.useState)({}),[S,j]=(0,s.useState)({}),[w,A]=(0,s.useState)({}),[M,C]=(0,s.useState)({}),[I,T]=(0,s.useState)({}),[k,_]=(0,s.useState)({}),[D,z]=(0,s.useState)([]),[P,N]=(0,s.useState)([]),{updateCacheWithRecordMap:R}=(0,s.useContext)(d().N),B=(0,s.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=await r().callApi({eventName:"getSpacesInOrganization",environment:g,data:{organizationId:a}});if("success"===t.type&&(p(t.data.spaceIds),R({data:t.data})),e)return;const s=await r().callApi({eventName:"getAllOrganizationMemberEmailDomains",environment:g,data:{organizationId:a}});"success"===s.type&&(N(s.data.orgMemberEmailDomains),_(s.data.memberEmailDomainsBySpace),z(s.data.guestEmailDomains))}),[g,a,R]),L=(0,s.useCallback)((async()=>{const e=await r().callApi({eventName:"getSamlConfigsForOrganization",environment:g,data:{organizationId:a}});"success"===e.type&&f(e.data.samlConfigs)}),[g,a]),E=(0,s.useCallback)((async()=>{if(h.length>0)return h;const e=await r().callApi({eventName:"getSamlConfigsForOrganization",environment:g,data:{organizationId:a}});return"success"===e.type?(f(e.data.samlConfigs),e.data.samlConfigs):[]}),[g,a,h]);(0,i().w)((()=>{B()}));const O=function(e,t){const{updateCacheWithRecordMap:a}=(0,s.useContext)(d().N),i=(0,n().v3)(),l=(0,s.useRef)({});return(0,s.useCallback)((async s=>{if(l.current[s])return;l.current[s]=!0;const n=await r().callApi({eventName:"getTeamsForOrganizationSpace",environment:i,data:{spaceId:s},headers:(0,o().WS)({spaceId:s})});"success"===n.type&&(a({data:n.data}),e(s,n.data.teamIds),t(s,n.data.teamAggregateData)),l.current[s]=!1}),[i,e,t,a])}((0,s.useCallback)(((e,t)=>{v((a=>({...a,[e]:t})))}),[]),(0,s.useCallback)(((e,t)=>{b((a=>({...a,[e]:t})))}),[])),U=(0,s.useCallback)((async(e,t)=>{const a=x[e],s=y[e];(void 0===a||void 0===s||t)&&await O(e)}),[O,y,x]),F=function(e,t){const a=(0,n().v3)(),i=(0,s.useRef)({});return(0,s.useCallback)((async s=>{if(void 0!==i.current[s])return void(await i.current[s]);const n=r().callApi({eventName:"getVisibleUsers",environment:a,data:{spaceId:s,supportsEdgeCache:!0},headers:(0,o().WS)({spaceId:s})}).then((a=>{if("success"===a.type){let n,i=[];"visibleUsers"in a.data?n=a.data.visibleUsers:(n=a.data.users,i=a.data.joinedMemberIds),e(s,n),t(s,i)}})).finally((()=>{delete i.current[s]}));i.current[s]=n,await n}),[a,t,e])}((0,s.useCallback)(((e,t)=>j((a=>({...a,[e]:t})))),[]),(0,s.useCallback)(((e,t)=>A((a=>({...a,[e]:t})))),[])),V=(0,s.useCallback)((async(e,t)=>{(void 0===S[e]||t)&&await F(e)}),[F,S]),H=(0,s.useCallback)(((e,t)=>C((a=>({...a,[e]:t})))),[]),W=function(e,t){const a=(0,n().v3)(),i=(0,s.useRef)({});return(0,s.useCallback)((async s=>{if(!i.current[s]){i.current[s]=!0;try{const n=await r().callApi({eventName:"getAllSpacePermissionGroupsWithMemberCount",environment:a,data:{spaceId:s,organizationId:e},headers:(0,o().WS)({cellId:void 0,spaceId:s})});"success"===n.type&&t(s,n.data.groupsWithMemberCount)}finally{i.current[s]=!1}}}),[a,e,t])}(a,H),q=(0,s.useCallback)((async(e,t)=>{(void 0===M[e]||t)&&await W(e)}),[W,M]),G=function(e){const t=(0,n().v3)(),a=(0,s.useRef)({});return(0,s.useCallback)((async(s,n)=>{const i=[];for(const e of n){var l;null!==(l=a.current[s])&&void 0!==l&&l[e]||i.push(e)}if(0!==i.length){void 0===a.current[s]&&(a.current[s]={});for(const e of i)a.current[s][e]=!0;try{const a=await r().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:t,data:{spaceId:s,userIds:i},headers:(0,o().WS)({cellId:void 0,spaceId:s})});if("success"===a.type){const t={};for(const e of i)t[e]=a.data.userToGroupMap[e]??[];e(s,t)}}finally{for(const e of i)a.current[s][e]=!1}}}),[t,e])}((0,s.useCallback)(((e,t)=>T((a=>({...a,[e]:{...a[e],...t}})))),[])),K=(0,s.useCallback)((async(e,t)=>{const a=[];for(const n of t){var s;null!==(s=I[e])&&void 0!==s&&s[n]||a.push(n)}a.length>0&&await G(e,a)}),[G,I]),{features:Y}=(0,l().z)(a);return(0,c.jsx)(u.Provider,{value:{spaceIds:m,samlConfigs:h,teamIdsForSpace:x,teamAggregateDataForSpace:y,loadTeamsForSpace:U,visibleUsersForSpace:S,loadVisibleUsersForSpace:V,joinedUserIdsForSpace:w,permissionGroupsForSpace:M,loadPermissionGroupsForSpace:q,userPermissionGroupIdsBySpaceId:I,loadUserPermissionGroupIdsBySpaceId:K,refreshSamlConfigs:L,loadSamlConfigs:E,organizationMemberEmailDomains:P,guestEmailDomains:D,memberEmailDomainsForSpace:k,refreshOrganization:B,availableOrganizationFeatures:Y},children:t})}u.displayName="OrganizationDataContext"},626822:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(296540),n=()=>a(959013),i=a(474848);function o(e,t){const{teamStore:s,renderAsEveryoneMention:o}=e,{name:r}=(0,a(56366).K8)((()=>({name:s.getName()})),[s]);return(0,i.jsx)(a(760217).A,{...e,icon:o?(0,a(522500).q)({width:14,height:14}):(0,i.jsx)(a(898808).x,{size:14,store:s,disabled:!0}),title:o?(0,i.jsx)(n().sA,{id:"posts.teamMenuItem.everyoneMention",defaultMessage:"@everyone"}):r,ref:t,inline:!0,caption:o?(0,i.jsx)(n().sA,{id:"posts.teamMenuItem.caption",defaultMessage:"Notifies everyone in the teamspace"}):void 0})}const r=s.forwardRef(o)},629148:(e,t,a)=>{a.d(t,{E:()=>d});var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(946064),r=()=>a(630116),l=()=>a(511303);function d(e){let{organizationId:t}=e;const a=(0,n().v3)(),{organizationOwnerRecordCache:d}=(0,s.useContext)(l().N);return(0,i().K8)((()=>{if(t)return new(r().Vl)(a,{table:o().y7,id:t},{inMemoryRecordCache:d})}),[a,t,d])}},643908:(e,t,a)=>{a.d(t,{A:()=>n});a(296540);var s=a(474848);const n=function(e){const t=(0,a(484714).v3)(),{render:n,requireUpgradeToTier:i,analyticsName:o,renderUpgradeTooltip:r,onUpgradeClick:l,alwaysAllowClick:d,tooltipPlacement:c,upgradeButtonDesktopStyle:u,upgradeButtonMobileStyle:g}=e;let m,{onClick:p,renderTooltip:h}=e;return i&&(m=(0,s.jsx)(a(118849).A,{subscriptionTier:i,analyticsName:o,desktopStyle:{display:"inline-block",pointerEvents:"none",...u},mobileStyle:{display:"inline-block",pointerEvents:"none",...g}}),d||(p=e=>{a(991249).K(t,{from:o,upsell:{type:"product",product:i,limit:{type:"none"}}}),l&&l(e)},h=r)),(0,s.jsx)(a(859428).A,{renderTooltip:h||(()=>null),render:e=>n((0,a(553965).A)(e,{onClick:p}),m),disableTooltip:!h,placement:c})}},649145:(e,t,a)=>{a.d(t,{L:()=>i});var s=a(296540),n=()=>a(753199);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;return(0,s.useCallback)((t=>{(0,n().SQ)({event:t,context:a,callback:()=>e(t)})}),[...t,a])}},652399:(e,t,a)=>{a.d(t,{A:()=>w});a(296540);var s=()=>a(484714),n=()=>a(56366),i=()=>a(959013),o=()=>a(901389),r=()=>a(201549),l=()=>a(760217),d=()=>a(928600),c=()=>a(939740),u=()=>a(14235),g=()=>a(204063),m=()=>a(89924),p=()=>a(859428),h=()=>a(972435),f=()=>a(722872),x=()=>a(962730),v=()=>a(377586);class y extends(()=>a(757695))().default{getInitialState(){return{open:!1}}}const b=new y;var S=a(474848);const j=(0,i().YK)({30:{id:"auditLogCSV.menu.30days",defaultMessage:"Last 30 days"},60:{id:"auditLogCSV.menu.60days",defaultMessage:"Last 60 days"},90:{id:"auditLogCSV.menu.90days",defaultMessage:"Last 90 days"},365:{id:"auditLogCSV.menu.365days",defaultMessage:"Last 1 year"},Export:{id:"auditLogCSV.menu.export",defaultMessage:"Export"}});function w(e){let{parentStore:t}=e;const a=(0,i().tz)(),s=(0,n().O$)(b);return(0,S.jsx)(u().Ay,{popupType:v().n.Popup,open:s.open,placementToOrigin:x().W.Bottom,alignmentToOrigin:x().C.End,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,keepFocus:!1,render:()=>(0,S.jsx)(T,{parentStore:t}),onDismiss:M,enableOutsideClickDismiss:!0,origin:(0,S.jsx)(p().A,{renderTooltip:()=>(0,S.jsx)(i().sA,{id:"auditLogCSV.popup.tooltip",defaultMessage:"Click for options to export the Audit Log in CSV form"}),render:e=>(0,S.jsx)(g().A,{size:"lg",onClick:()=>{return e=!s.open,void b.setState({open:e});var e},...e,children:a.formatMessage(j.Export)})})})}function A(e,t,a){r().uU(e,{targetPointer:a.pointer,exportOptions:{duration:t}})}function M(){b.setState({open:!1})}function C(e,t,a){return{key:e,render:()=>(0,S.jsx)(l().A,{focused:!1,title:h().A.formatMessage(j[e]),onClick:()=>{M(),A(t,e,a)}}),action:()=>{}}}function I(e,t,a){return{key:e,render:()=>(0,S.jsx)(l().A,{focused:!1,title:h().A.formatMessage(j[e]),onClick:()=>{o().ui({message:(0,S.jsx)(i().sA,{id:"auditLogCSV.menu.365days.prompt",defaultMessage:"Are you sure you want to export a one year CSV? You can't repeat this action while this is processing in the background."}),showCancel:!0,keepFocus:!0,items:[{label:(0,S.jsx)(i().sA,{id:"AuditLogCSV.exportConfirmationDialog.label",defaultMessage:"Export"}),color:"blue",onAccept:()=>{M(),A(t,e,a)}}]})}}),action:()=>{}}}function T(e){let{parentStore:t}=e;const a=(0,s().v3)(),n=[C(30,a,t),C(60,a,t),C(90,a,t),I(365,a,t)];return(0,S.jsx)(d().A,{menuType:f().gu.Popup,children:(0,S.jsx)(c().Ay,{type:c().Oh.Vertical,sections:[{key:"results",render:e=>(0,S.jsx)(m().A,{...e}),items:n}],initialFocus:0})})}},652631:(e,t,a)=>{a.d(t,{X:()=>n});a(296540);var s=a(474848);const n=(0,a(340498).wt)("openTeam",{viewBox:"0 0 28 28",svg:(0,s.jsx)("path",{d:"M3.24121 21.4326C3.24121 22.4082 3.80371 23.0322 4.7002 23.0322H22.4629C23.3506 23.0322 23.9131 22.4082 23.9131 21.4326V10.2178C23.9131 9.24219 23.3506 8.61816 22.4629 8.61816H17.2334V5.89355C17.2334 4.91797 16.6709 4.29395 15.7832 4.29395H4.7002C3.80371 4.29395 3.24121 4.91797 3.24121 5.89355V21.4326ZM4.65625 21.1074V6.21875C4.65625 5.86719 4.81445 5.70898 5.16602 5.70898H15.3174C15.6602 5.70898 15.8184 5.86719 15.8184 6.21875V21.1074C15.8184 21.4502 15.6602 21.6172 15.3174 21.6172H13.2959V19.0244C13.2959 18.2686 12.9619 17.917 12.2412 17.917H8.2334C7.5127 17.917 7.17871 18.2686 7.17871 19.0244V21.6172H5.16602C4.81445 21.6172 4.65625 21.4502 4.65625 21.1074ZM7.31934 9.5498H9.0332C9.24414 9.5498 9.39355 9.40918 9.39355 9.18945V7.52832C9.39355 7.31738 9.24414 7.16797 9.0332 7.16797H7.31934C7.1084 7.16797 6.97656 7.31738 6.97656 7.52832V9.18945C6.97656 9.40918 7.1084 9.5498 7.31934 9.5498ZM11.4414 9.5498H13.1465C13.3574 9.5498 13.5068 9.40918 13.5068 9.18945V7.52832C13.5068 7.31738 13.3574 7.16797 13.1465 7.16797H11.4414C11.2217 7.16797 11.0898 7.31738 11.0898 7.52832V9.18945C11.0898 9.40918 11.2217 9.5498 11.4414 9.5498ZM17.2334 21.4326V10.0332H21.9971C22.3398 10.0332 22.498 10.2002 22.498 10.543V21.1074C22.498 21.4502 22.3398 21.6172 21.9971 21.6172H17.2246C17.2334 21.5557 17.2334 21.4941 17.2334 21.4326ZM7.31934 13.0303H9.0332C9.24414 13.0303 9.39355 12.8896 9.39355 12.6699V11.0088C9.39355 10.7979 9.24414 10.6484 9.0332 10.6484H7.31934C7.1084 10.6484 6.97656 10.7979 6.97656 11.0088V12.6699C6.97656 12.8896 7.1084 13.0303 7.31934 13.0303ZM11.4414 13.0303H13.1465C13.3574 13.0303 13.5068 12.8896 13.5068 12.6699V11.0088C13.5068 10.7979 13.3574 10.6484 13.1465 10.6484H11.4414C11.2217 10.6484 11.0898 10.7979 11.0898 11.0088V12.6699C11.0898 12.8896 11.2217 13.0303 11.4414 13.0303ZM19.1582 13.4521H20.5732C20.749 13.4521 20.8721 13.3291 20.8721 13.1533V11.7822C20.8721 11.6064 20.749 11.4834 20.5732 11.4834H19.1582C18.9736 11.4834 18.8682 11.6064 18.8682 11.7822V13.1533C18.8682 13.3291 18.9736 13.4521 19.1582 13.4521ZM7.31934 16.5107H9.0332C9.24414 16.5107 9.39355 16.3613 9.39355 16.1504V14.4893C9.39355 14.2695 9.24414 14.1289 9.0332 14.1289H7.31934C7.1084 14.1289 6.97656 14.2695 6.97656 14.4893V16.1504C6.97656 16.3613 7.1084 16.5107 7.31934 16.5107ZM11.4414 16.5107H13.1465C13.3574 16.5107 13.5068 16.3613 13.5068 16.1504V14.4893C13.5068 14.2695 13.3574 14.1289 13.1465 14.1289H11.4414C11.2217 14.1289 11.0898 14.2695 11.0898 14.4893V16.1504C11.0898 16.3613 11.2217 16.5107 11.4414 16.5107ZM19.1582 16.8096H20.5732C20.749 16.8096 20.8721 16.6865 20.8721 16.5107V15.1396C20.8721 14.9639 20.749 14.8408 20.5732 14.8408H19.1582C18.9736 14.8408 18.8682 14.9639 18.8682 15.1396V16.5107C18.8682 16.6865 18.9736 16.8096 19.1582 16.8096ZM19.1582 20.167H20.5732C20.749 20.167 20.8721 20.0439 20.8721 19.8682V18.4971C20.8721 18.3213 20.749 18.1982 20.5732 18.1982H19.1582C18.9736 18.1982 18.8682 18.3213 18.8682 18.4971V19.8682C18.8682 20.0439 18.9736 20.167 19.1582 20.167ZM8.33008 19.3496C8.33008 19.165 8.42676 19.0684 8.61133 19.0684H11.8633C12.0566 19.0684 12.1445 19.165 12.1445 19.3496V21.6172H8.33008V19.3496Z"})})},653088:(e,t,a)=>{a.d(t,{O:()=>y,i:()=>b});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(56366),i=()=>a(401497),o=()=>a(467730),r=()=>a(68263),l=()=>a(959013),d=()=>a(710149),c=()=>a(554509),u=()=>a(614505),g=()=>a(495427),m=()=>a(47095),p=()=>a(725036),h=()=>a(443573),f=()=>a(2609),x=()=>a(221723),v=a(474848);function y(e){let{spaceStores:t,selectedSpaceIds:a,onSelectHeader:i,onSelect:r,disabledRowMetadata:d}=e;const m=(0,n().K8)((()=>t.map((e=>e.id))),[t]),[h,y]=(0,s.useState)(""),{teamStores:S}=(0,p().o)(m),j=(0,n().K8)((()=>t.map((e=>{const t=S[e.id]??[],a=d&&d.disabledSpaceIds.includes(e.id);return{id:e.id,icon:(0,v.jsx)(u().A,{size:x().iK,emojiSize:x().iK,disabled:!0,icon:e.getIcon(),isEmptyPage:!1,title:e.getName(),isLarge:!0,isRaw:!1}),name:e.getName(),byline:a?(0,v.jsx)(c().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:d.disabledByline}):(0,v.jsx)(b,{spaceId:e.id,teamCount:t.length})}}))),[t,S,d]),w=(0,o().Ay)(h,j,(e=>e.name??""));return(0,v.jsx)(f().p6,{items:w,selectedIds:a,disabledIds:(null==d?void 0:d.disabledSpaceIds)??[],onSelectHeader:i,onSelect:r,titleText:(0,v.jsx)(l().sA,{id:"orgConsole.people.modal.workspacesSelect.selectTitle",defaultMessage:"Select workspaces"}),headerText:(0,v.jsx)(l().sA,{id:"orgConsole.people.modal.workspacesSelect.headerRowTitle",defaultMessage:"Workspaces{selectedCount, plural, =0 {} one { ({selectedCount})} other { ({selectedCount})}}",values:{selectedCount:a.length}}),headerAction:(0,v.jsx)(g().nv,{mode:g().Ke.AnimatedSearchButton,query:h,setQueryFilter:y})})}function b(e){const{spaceId:t,teamCount:a,loading:s,styles:n}=e,{visibleUsers:o,loading:u}=(0,h().d)(t),g=o?o.filter((e=>(0,r().DH)(e.role))).length:0,p=(0,m().Z)(),f=(0,i().IS)((e=>({shimmer:{background:"rgba(255, 255, 255, 0.4)",marginTop:1,width:"80%"}})),[]);return s||u?(0,v.jsx)(d().A,{style:{...p.shortShimmer,...f.shimmer}}):(0,v.jsx)(c().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:n,children:(0,v.jsx)(l().sA,{id:"orgConsole.people.modal.workspacesSelect.workspaceRowByline",defaultMessage:"{teamCount, plural, one {# teamspace} other {# teamspaces}} · {memberCount, plural, one {# member} other {# members}}",values:{teamCount:a,memberCount:g}})})}},655546:(e,t,a)=>{a.d(t,{_:()=>l});a(296540);var s=()=>a(402390),n=()=>a(959013),i=()=>a(962730),o=()=>a(859428),r=a(474848);function l(e){let{num:t,abbreviateNumber:a}=e;const l=(0,n().tz)(),d=(0,s().H)(l),c=t.toLocaleString(d),u=Intl.NumberFormat(d,{notation:"compact",maximumFractionDigits:1}).format(t);return a?(0,r.jsx)(o().A,{placement:i().W.Bottom,render:e=>(0,r.jsx)("span",{...e,children:u}),renderTooltip:()=>c}):(0,r.jsx)("span",{children:c})}},657328:(e,t,a)=>{a.d(t,{C:()=>i});a(296540);var s=()=>a(959013),n=a(474848);function i(){return(0,n.jsx)(s().sA,{id:"organization.workspaceSettings.locked.tooltip",defaultMessage:"This setting is being managed by your organization."})}},658985:(e,t,a)=>{a.d(t,{$:()=>n});a(296540);var s=a(474848);const n=(0,a(340498).wt)("membersFilled",{viewBox:"0 0 30 30",svg:(0,s.jsx)("path",{d:"M20.31 14.731c2.22 0 4.097-1.967 4.097-4.513 0-2.485-1.887-4.391-4.098-4.391-2.2 0-4.097 1.937-4.087 4.411 0 2.526 1.866 4.493 4.087 4.493zm-11.725.233c1.937 0 3.57-1.724 3.57-3.935 0-2.17-1.653-3.823-3.57-3.823-1.917 0-3.57 1.683-3.56 3.844 0 2.19 1.633 3.914 3.56 3.914zm-5.588 9.21h7.606c-1.085-1.552.082-4.615 2.374-6.42-1.116-.72-2.566-1.248-4.392-1.248-4.533 0-7.464 3.337-7.464 6.085 0 1.004.507 1.582 1.876 1.582zm10.994-.01h12.637c1.673 0 2.251-.508 2.251-1.44 0-2.607-3.316-6.198-8.57-6.198-5.263 0-8.57 3.59-8.57 6.197 0 .933.578 1.44 2.252 1.44z"})})},663484:(e,t,a)=>{a.d(t,{r:()=>M});a(296540);var s=()=>a(484714),n=()=>a(56366),i=()=>a(401497),o=()=>a(584262),r=()=>a(452951),l=()=>a(30626),d=()=>a(657222),c=()=>a(959013),u=()=>a(884107),g=()=>a(755636),m=()=>a(492414),p=()=>a(722872),h=()=>a(962730),f=()=>a(463830),x=()=>a(760217),v=()=>a(406699),y=()=>a(285790),b=()=>a(928600),S=()=>a(939740),j=()=>a(14235),w=()=>a(89924),A=a(474848);function M(e){let{blockStore:t}=e;const a=(0,s().v3)(),M=(0,n().uB)(void 0,f().A),C=(0,i().IS)((e=>({changePermissionsIcon:{height:18,width:18,color:e.regularIconColor,fill:"currentColor"},copyLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor"},openLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor",transform:"rotate(-45deg)"}})),[]);const I={key:"actions",render:e=>(0,A.jsx)(w().A,{...e}),items:[{key:"copy-link",render:e=>(0,A.jsx)(x().A,{...e,icon:(0,d().w)(C.copyLinkIcon),title:(0,A.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:async function(){const e=(0,m().Ay)({store:t,pageVisitSource:o().y8.CopyLink}),s=await u().R.clipboardActions.load();await s.copyString({environment:a,stringValue:e,copiedMessage:s.clipboardMessages.copiedLinkToClipboard}),M.setState({open:!1})}},{key:"open-page-in-new-tab",render:e=>(0,A.jsx)(x().A,{...e,icon:(0,r().Z)(C.openLinkIcon),title:(0,A.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.page.actions.openLink",defaultMessage:"Open in new tab"})}),action:function(){const e=(0,m().Ay)({store:t,pageVisitSource:o().y8.LinkInPage});g().f({environment:a,url:e}),M.setState({open:!1})}}]},T=(0,c().tz)();return(0,A.jsx)(v().Ay,{popupType:j().nl.Popup,alignmentToOrigin:h().C.Center,placementToOrigin:h().W.Right,style:{width:248},render:()=>(0,A.jsx)(b().A,{menuType:p().gu.Popup,width:248,children:(0,A.jsx)(S().Ay,{type:S().Oh.Vertical,initialFocus:void 0,sections:[I]})}),buttonPopupStore:M,renderOrigin:e=>(0,A.jsx)(y().A,{icon:l()._,ariaLabel:T.formatMessage({id:"pageCellActions.iconButton.ariaLabel",defaultMessage:"More actions"}),...e})})}},675801:(e,t,a)=>{a.d(t,{S:()=>l,i:()=>d});a(296540);var s=()=>a(959013),n=()=>a(317909),i=()=>a(946548),o=()=>a(573660),r=a(474848);function l(e){let{isEnabled:t,onToggle:a,disabled:n}=e;return(0,r.jsx)(o().y,{title:(0,r.jsx)(s().sA,{id:"identityAndProvisioning.scim.suppressScimInviteEmails.title",defaultMessage:"Suppress invite emails from SCIM provisioning"}),byline:(0,r.jsx)(s().sA,{id:"identityAndProvisioning.scim.suppressScimInviteEmails.message",defaultMessage:"Control if users will receive invite emails when provisioned by SCIM to workspaces and groups."}),item:(0,r.jsx)(i().A,{on:t,onClick:a,disabled:n})})}function d(e){let{environment:t,areScimInviteEmailsSuppressed:a,spaceStore:s}=e;n().createAndCommit({userAction:"ScimSection.SuppressScimInviteEmailsSetting",environment:t,canUndo:!0,perform:e=>{n().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings","are_scim_invite_emails_suppressed"],command:"set",args:a},transaction:e})}})}},684088:(e,t,a)=>{a.d(t,{A:()=>o,m:()=>l});a(898992),a(354520),a(908872);var s=a(296540),n=()=>a(534177),i=a(474848);const o=(0,s.createContext)({pendingTeamSettings:{},pendingSpaceSettings:{},pendingOrgSetting:void 0,setPendingTeamSettings:()=>{},setPendingSpaceSettings:()=>{},setPendingOrgSetting:()=>{},clearAllPendingSettings:()=>{},hasPendingSecuritySettings:()=>!1});function r(e){return Object.entries(e).filter((e=>{let[t,a]=e;return(0,n().O9)(a)})).reduce(((e,t)=>{let[a,s]=t;return e[a]=s,e}),{})}function l(e){let{children:t}=e;const[a,n]=(0,s.useState)({}),[l,d]=(0,s.useState)({}),[c,u]=(0,s.useState)(void 0),g=(0,s.useCallback)((e=>{n(r({...a,...e}))}),[a]),m=(0,s.useCallback)((e=>{d(r({...l,...e}))}),[l]),p=(0,s.useCallback)((()=>{n({}),d({}),u(void 0)}),[n,d,u]),h=(0,s.useCallback)((()=>Boolean(c||Object.keys(l).length||Object.keys(a).length)),[c,l,a]);return(0,i.jsx)(o.Provider,{value:{pendingTeamSettings:a,pendingSpaceSettings:l,pendingOrgSetting:c,setPendingTeamSettings:g,setPendingSpaceSettings:m,setPendingOrgSetting:u,clearAllPendingSettings:p,hasPendingSecuritySettings:h},children:t})}o.displayName="OrganizationSecuritySettingsContext"},687190:(e,t,a)=>{a.d(t,{$n:()=>D,Ir:()=>z,uL:()=>P,yc:()=>_});a(581454),a(296540);var s=()=>a(484714),n=()=>a(56366),i=()=>a(401497),o=()=>a(737693),r=()=>a(959013),l=()=>a(284371),d=()=>a(159588),c=()=>a(843518),u=()=>a(644914),g=()=>a(962730),m=()=>a(351360),p=()=>a(224011),h=()=>a(948914),f=()=>a(197190),x=()=>a(710149),v=()=>a(554509),y=()=>a(614505),b=()=>a(566468),S=()=>a(859428),j=()=>a(453697),w=()=>a(236527),A=()=>a(490044),M=()=>a(27198),C=()=>a(590082),I=()=>a(51703),T=()=>a(629148),k=a(474848);function _(e){let{sidebarTitle:t,sidebarByline:a,sidebarTitleIcon:o,sidebarItemsTitle:r,topEntitySection:m,bottomEntitySection:x,items:y,hideSeparator:b,renderTooltip:j}=e;const w=(0,s().v3)(),{isElectron:M}=w.device,C=(0,n().K8)((()=>p().A.state.isFullScreen),[]),I=(0,n().K8)((()=>h().A.state.isShowingTabBar),[]),T=(0,i().IS)((e=>({container:{background:e.surface.wash,boxShadow:b?void 0:e.sidebarBoxShadow,padding:8,width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:12},itemButton:{fontWeight:l().Wy.regular,color:e.regularTextColor,...(0,d().sQ)({isMobile:!1})},itemIcon:{fill:e.icon.primary,width:18},selectedItemIcon:{fill:e.icon.primary,width:18},selectedItemButton:{fontWeight:l().Wy.semibold,background:e.buttonHoveredBackground},disabledItemButton:{opacity:.3},sidebarItemContainer:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row"},divider:{color:e.lightDividerColor},titleContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",padding:8,gap:10},titleTextContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",gap:2,width:"100%"},text:{...l().RC,width:"100%"},titleIconStyle:{width:16,height:16,color:e.primaryBlack,marginRight:8},bottomEntitySection:{position:"absolute",bottom:0,paddingBottom:8,width:"calc(100% - 16px)"},sidebarItemsContainer:{display:"flex",flexDirection:"column",gap:1},sidebarItemsTitleContainer:{display:"flex",flexDirection:"column",padding:8}})),[b]),_=(0,u().Vl)({isExpanded:!0,isFullScreenDesktop:C,isShowingTabBar:I,isElectron:M});return(0,k.jsxs)("div",{style:T.container,children:[_?(0,k.jsx)(c().F,{isExpanded:!0}):null,m,(0,k.jsxs)("div",{style:T.titleContainer,children:[o,(0,k.jsxs)("div",{style:T.titleTextContainer,children:[(0,k.jsx)(v().D,{styleName:"UIHeading-17px/Semibold",customStyles:T.text,children:t}),(0,k.jsx)(v().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:T.text,children:a})]})]}),(0,k.jsxs)("div",{style:T.sidebarItemsContainer,children:[r?(0,k.jsx)("div",{style:T.sidebarItemsTitleContainer,children:(0,k.jsx)(v().D,{colorName:"secondary",styleName:"UISmall-12px/Medium",children:r})}):null,y.map((e=>{const t=e.isSelected?{...T.itemButton,...T.selectedItemButton}:T.itemButton,a=e.disabled?{...t,...T.disabledItemButton}:t,s=e.isSelected?T.selectedItemIcon:T.itemIcon;return(0,k.jsx)(S().A,{disableTooltip:!e.disabled,renderTooltip:()=>null==j?void 0:j(e),render:t=>(0,k.jsx)(f().A,{style:a,disabled:e.disabled,...t,children:(0,k.jsx)(A().A,{style:T.sidebarItemContainer,left:e.icon(s),onClick:()=>{e.disabled||e.onClick()},children:e.name})},e.id),placement:g().W.Right},e.id)}))]}),(0,k.jsx)("div",{style:T.bottomEntitySection,children:x})]})}function D(e){let{userStore:t}=e;const a=(0,r().tz)(),s=(0,i().IS)((e=>({container:{padding:"0px 8px",background:e.surface.wash},iconStyle:{color:e.lightTextColor,fontWeight:500},preamble:{display:"block",fontSize:12,fontWeight:500,color:e.lightTextColor}})),[]),o=(0,n().K8)((()=>m().default.state.currentUserStore),[]),l=t??o,d=void 0===t,c=(0,n().K8)((()=>{if(l)return{userName:l.getDisplayName(a),userEmail:l.getEmail()}}),[a,l]);return(0,k.jsxs)("div",{style:s.container,children:[d&&(0,k.jsx)(v().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,k.jsx)(r().sA,{id:"settingsConsole.sidebar.userSection.loggedInAs",defaultMessage:"Logged in as"})}),l&&c?(0,k.jsx)(b().s7,{title:c.userName,byline:c.userEmail,iconSize:C().WK,iconMargin:8,icon:(0,k.jsx)(j().A,{size:C().WK,userStore:l,iconStyle:s.iconStyle})}):(0,k.jsx)(w().a,{iconSize:C().WK})]})}function z(e){const{organizationId:t,iconSize:a=36}=e,{state:s}=(0,I().j)(),l=(0,T().E)({organizationId:t}),d=(0,i().IS)((e=>({container:{padding:"0px 8px",background:e.surface.wash},iconStyle:{color:e.lightTextColor,fontWeight:500},preamble:{display:"block",fontSize:12,fontWeight:500,color:e.lightTextColor}})),[]),c=(0,n().K8)((()=>l?(0,k.jsx)(y().A,{disabled:!0,icon:l.getIcon(),defaultIcon:(0,o().V)(),isEmptyPage:!1,size:a}):(0,k.jsx)(x().A,{style:{height:a,width:a,borderRadius:4}})),[l,a]),u=(0,n().K8)((()=>l?l.getName():(0,k.jsx)(x().A,{style:{height:14,width:70,borderRadius:4}})),[l]),g=(0,n().K8)((()=>{var e;return s.value?(0,k.jsx)(M().Qq,{memberCount:(null===(e=s.value)||void 0===e?void 0:e.memberCount)||0}):(0,k.jsx)(x().A,{style:{height:14,width:100,borderRadius:4,marginTop:4}})}),[s.value]);return(0,k.jsxs)("div",{style:d.container,children:[(0,k.jsx)(v().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,k.jsx)(r().sA,{id:"settingsConsole.sidebar.childOfOrganization.preamble",defaultMessage:"Part of organization"})}),(0,k.jsx)(b().s7,{title:u,byline:g,iconSize:a,icon:c,iconMargin:8})]})}function P(){return(0,k.jsx)(r().sA,{defaultMessage:"Coming soon",id:"orgConsole.baseSidebar.comingSoon"})}},688437:(e,t,a)=>{a.d(t,{K4:()=>S,nb:()=>b,Ws:()=>j,x5:()=>A});var s=a(296540),n=()=>a(484714),i=()=>a(401497),o=()=>a(486345);a(898992),a(823215),a(581454);var r=()=>a(12193),l=()=>a(959013),d=()=>a(449506),c=()=>a(898486),u=()=>a(972435),g=()=>a(364280),m=()=>a(623580),p=()=>a(7674),h=()=>a(15144),f=()=>a(554509),x=()=>a(107683),v=()=>a(2609),y=a(474848);function b(e){const{organizationId:t,onDismiss:a,onSubmit:i}=e,r=A(),g=(0,n().v3)(),[m,h]=(0,s.useState)(),[f,b]=(0,s.useState)(),M=async()=>{if(!m)return b(w.invalidDomainError);if(!function(e){const{domain:t,allowSubDomain:a}=e,s=t.split(".").map((e=>e.replace(/\s/g,"").toLowerCase())),n=a?127:2;return s.length>=2&&s.length<=n&&s.every((e=>e.length>0&&e.length<=63))?s.join("."):void 0}({domain:m,allowSubDomain:!0}))return b(w.invalidDomainError);const e=await d().callApi({eventName:"createDomainVerificationCode",environment:g,data:{type:"org_saml_config",domain:m,organizationId:t}});"success"===e.type?i((0,o().pl)(e.data.domainVerification)):b((0,c().Hu)(u().A.getIntl(),e))};return(0,y.jsx)(x().s,{isOpen:!0,areaConstraint:{width:{type:"fixed",length:400}},onDismiss:a,render:e=>{let{sizeRange:t}=e;return(0,y.jsx)(p().tf,{showDismissButton:!1,sizeRange:t,header:(0,y.jsx)(j,{}),footer:(0,y.jsx)(v().jl,{primaryText:(0,y.jsx)(l().sA,{...w.addButton}),primaryAction:M,secondaryText:(0,y.jsx)(l().sA,{...w.cancelButton}),secondaryAction:a}),children:(0,y.jsx)("div",{style:r.content,children:(0,y.jsx)(S,{pendingDomain:m,setPendingDomain:h,error:f})})})}})}function S(e){let{pendingDomain:t,setPendingDomain:a,error:s}=e;const n=A();return(0,y.jsxs)(g().VP,{gap:8,children:[(0,y.jsx)(f().D,{colorName:"secondary",styleName:"Body-12px/Medium",children:(0,y.jsx)(l().sA,{...w.inputLabel})}),(0,y.jsx)(m().A,{value:t,placeholder:u().A.formatMessage(w.emailDomainPlaceholder),onChange:e=>a(e.target.value),errorOutline:Boolean(s),inputElementAttributes:{required:!0,"aria-describedby":"domain-verification-validation-errors"}}),s?(0,y.jsx)("div",{style:n.error,children:(0,y.jsx)(h().R,{id:"domain-verification-validation-errors",error:s})}):null]})}function j(){const e=A();return(0,y.jsx)(v().rQ,{icon:(0,r().D)(e.headerIcon),title:(0,y.jsx)(l().sA,{...w.title}),byline:(0,y.jsx)(l().sA,{...w.byline})})}const w=(0,l().YK)({title:{id:"orgConsole.emailDomains.addEmailDomainModal.title",defaultMessage:"Add email domain"},byline:{id:"orgConsole.emailDomains.addEmailDomainModal.byline",defaultMessage:"Verify email domain to manage associated users and workspaces."},addButton:{id:"orgConsole.emailDomains.addEmailDomainModal.button.add",defaultMessage:"Get verification code"},cancelButton:{id:"orgConsole.emailDomains.addEmailDomainModal.button.cancel",defaultMessage:"Cancel"},inputLabel:{id:"orgConsole.emailDomains.addEmailDomainModal.domainInputLabel",defaultMessage:"Enter email domain"},invalidDomainError:{id:"orgConsole.emailDomains.addEmailDomainModal.invalidDomainError",defaultMessage:"Invalid domain, please check its format and spelling"},emailDomainPlaceholder:{id:"orgConsole.emailDomains.addEmailDomainModal.emailDomainPlaceholder",defaultMessage:"notion.so"}});function A(){return(0,i().IS)((e=>({headerIcon:{height:32,width:32,fill:e.icon.secondary},content:{width:480},error:{height:15}})),[])}},696601:(e,t,a)=>{a.d(t,{A:()=>n});a(581454),a(296540);var s=a(474848);const n=function(e){let{userStores:t,permissionGroups:n}=e;const i=(0,a(401497).IS)((()=>({container:{display:"flex",flexDirection:"column",gap:4}})),[]);return(0,s.jsxs)("div",{style:i.container,children:[t.map((e=>(0,s.jsx)(a(453697).A,{userStore:e,type:"avatar-name-email",size:a(142448).tR,avatarShouldShowShadow:!1,hasTooltip:!1,iconStyle:{fontSize:12}},e.id))),null==n?void 0:n.map((e=>(0,s.jsx)(a(208261).h,{permissionGroup:e,type:"avatar-name-count"},e.group.group_id)))]})}},701144:(e,t,a)=>{a.d(t,{Ry:()=>c,b0:()=>g,j:()=>u,tE:()=>d});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(296540);var s=()=>a(234194),n=()=>a(404302),i=()=>a(959013),o=()=>a(534177),r=()=>a(474747),l=a(474848);function d(e){let{audienceValues:t,selectedAudience:a,setSelectedAudience:i,onMenuClose:o,setPillTitleStringToActiveSelection:d}=e;return(0,l.jsx)(r().A,{allOptions:t?new Set(t):new Set(n().p),getFormattedStringCaption:g,getFormattedStringTitle:u,getPillTitle:c,selectedOptions:a,setSelectedOption:i,pillIcon:s().M,onMenuClose:o,setPillTitleStringToActiveSelection:d})}function c(e){return e[0]?u(e[0]):(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.title",defaultMessage:"Audience"})}function u(e){switch(e){case"private":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.private",defaultMessage:"Private"});case"shared_externally":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.external",defaultMessage:"Shared externally"});case"shared_internally":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.internal",defaultMessage:"Shared internally"});case"shared_to_web":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.publishedToWeb",defaultMessage:"Shared to web"});default:(0,o().HB)(e)}}function g(e){switch(e){case"private":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.private",defaultMessage:"Pages that only a single workspace member has access to."});case"shared_externally":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.external",defaultMessage:"Pages that are shared with guests or connections."});case"shared_internally":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.internal",defaultMessage:"Pages that are shared with other workspace members."});case"shared_to_web":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.publishedToWeb",defaultMessage:"Pages that are available for anyone to see on the web."});default:(0,o().HB)(e)}}},710967:(e,t,a)=>{a.d(t,{t:()=>m});var s=a(296540),n=()=>a(484714),i=()=>a(401497),o=()=>a(959013),r=()=>a(989423);var l=()=>a(201549),d=()=>a(864943),c=()=>a(826658),u=a(474848);const g=(0,o().YK)({exportButton:{id:"adminContentSearchTab.export",defaultMessage:"Export results"}});function m(e){let{spaceId:t,organizationId:a,filters:m,disabled:p,shouldUseIconButton:h}=e;const[f,x]=(0,s.useState)(!1),v=(0,n().v3)(),y=p||f,b=(0,i().IS)((e=>({button:{opacity:y?.5:1}})),[y]);async function S(){x(!0),function(e,t){r().vd(e,"admin_content_search_analytics_export_requested",t)}(v,{filters:m}),await l().Lw(v,{spaceId:t,organizationId:a,filters:m}),x(!1)}return h?(0,u.jsx)(c().K,{onClick:S,disabled:y}):(0,u.jsx)(d().A,{size:"lg",style:b.button,disabled:y,onClick:S,children:(0,u.jsx)(o().sA,{...g.exportButton})})}},721249:(e,t,a)=>{a.d(t,{u:()=>x});a(944114);var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(959013),r=()=>a(966505),l=()=>a(449506),d=()=>a(901389),c=()=>a(436572),u=()=>a(892632),g=()=>a(898486),m=()=>a(351360),p=()=>a(125565),h=a(474848);const f=(0,o().YK)({uploadFailed:{defaultMessage:"Upload failed.",id:"identityAndProvisioning.managedUsers.modal.failedUpload"}});function x(e){const{userStore:t}=e,a=(0,o().tz)(),x=(0,n().v3)(),{userProfilePhoto:v,userName:y,userEmail:b,isSuspended:S}=(0,i().K8)((()=>({userProfilePhoto:t.getProfilePhoto(),userName:t.getFullName(a),userEmail:t.getEmail(),isSuspended:t.getIsSuspended()})),[t,a]),[j,w]=(0,s.useState)({loading:!1,error:void 0}),[A,M]=(0,s.useState)({value:v,loading:!1}),[C,I]=(0,s.useState)(y),[T,k]=(0,s.useState)(b);async function _(e){var s;const n=null===(s=m().default.state.currentSpaceStore)||void 0===s?void 0:s.id,i=[];A.value!==v&&i.push("profile_photo"),C!==y&&i.push("name"),T!==b&&i.push("email"),r().wF(x,{user_status:S?"suspended":"notSuspended",edited_fields:i});const{accept:u}=await d().Gh({message:(0,h.jsx)(p().A,{style:d().xh.title,children:(0,h.jsx)(o().sA,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.message",defaultMessage:"Confirm changes"})}),description:(0,h.jsxs)(p().A,{isMultiline:!0,isSecondaryColor:!0,children:[(0,h.jsx)(o().sA,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.description",defaultMessage:"Changes made to this user's account will be reflected across all workspaces they have access to."}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)(o().sA,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.descriptionForScim",defaultMessage:"If this user is being provisioned through SCIM, your changes be later overwritten by the next SCIM sync."})]}),acceptLabel:(0,h.jsx)(o().sA,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.acceptLabel",defaultMessage:"Save changes"}),cancelLabel:(0,h.jsx)(o().sA,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.cancelLabel",defaultMessage:"Go back"})});if(!u)return void D();w({loading:!0,error:void 0});const f=await l().callApi({eventName:"updateUserProfile",environment:x,data:{userId:t.id,spaceId:n,name:C,email:T,profilePhoto:(null==e?void 0:e.profilePhoto)??A.value}});if(r().Mh(x,{user_status:S?"suspended":"notSuspended",edited_fields:i}),"failed"===f.type)return d().f1((0,g().Hu)(a,f)),void w({loading:!1,error:f.error});c().D6({label:(0,h.jsx)(o().sA,{id:"managedUsers.toastMessage.updateProfileData.success",defaultMessage:"Successfully updated user's profile"})}),setTimeout((()=>{w({loading:!1,error:void 0})}),500)}function D(){M({value:v,loading:!1}),I(y),k(b)}return{hasStagedChanges:A.value!==v||C!==y||T!==b,saveChanges:_,resetState:D,loading:j.loading,error:j.error,profilePhoto:{value:A.value,loading:A.loading,set:function(){u().Bz({environment:x,onStart:()=>{M((e=>({...e,loading:!0})))},bucket:"public",onError:()=>{M((e=>({...e,loading:!1}))),d().f1(a.formatMessage(f.uploadFailed))},onComplete:e=>{const t=e[0];M({value:t,loading:!1})},accept:"image/*"})},setAndSave:function(){u().Bz({environment:x,onStart:()=>{M((e=>({...e,loading:!0})))},bucket:"public",onError:()=>{M((e=>({...e,loading:!1}))),d().f1(a.formatMessage(f.uploadFailed))},onComplete:e=>{const t=e[0];M({value:t,loading:!1}),_({profilePhoto:t})},accept:"image/*"})},remove:function(){M({value:"",loading:!1})}},name:{value:C,set:I},email:{value:T,set:k}}}},721672:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(296540),n=()=>a(710149),i=()=>a(554509),o=()=>a(602105),r=a(474848);const l=function(e){let{headerText:t,mainText:l,bottom:d,onClick:c,isLoading:u,disabled:g}=e;const[m,p]=s.useState(!1),h=(0,a(401497).IS)((e=>({loadingMainText:{width:140,borderRadius:4,height:25},loadingBottom:{width:120,borderRadius:4,height:24},container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:20,width:"100%",padding:16,borderRadius:o().V.medium,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,boxShadow:o().v,height:"auto",flex:"1 1 200px"},containerDark:{background:e.accentColors.translucentGray[30],borderColor:e.stroke.primary},content:{display:"flex",flexDirection:"column",gap:12},textContainer:{display:"flex",flexDirection:"column",gap:8},mainText:{color:e.accentColors.gray[900],fontSize:20},iconButton:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:m?e.accentColors.translucentGray[300]:e.accentColors.gray[100],height:20,width:20},icon:{height:20,width:20,padding:4,color:m?e.accentColors.gray[800]:e.icon.primary,transform:"rotate(270deg)"},bottomContainer:{minHeight:28}})),[m]);return(0,r.jsxs)(a(493823).p,{onClick:c,style:h.container,shouldShrink:!0,hoveredStyle:{...h.container,...h.containerDark},pressedStyle:{...h.container,...h.containerDark},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),disabled:g,children:[(0,r.jsxs)("div",{style:h.content,children:[(0,r.jsxs)("div",{style:h.textContainer,children:[(0,r.jsx)(i().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:t}),u?(0,r.jsx)(n().A,{style:h.loadingMainText}):(0,r.jsx)(i().D,{customStyles:h.mainText,styleName:"UITitle-Medium-20px/Semibold",colorName:"primary",children:l})]}),(0,r.jsx)("div",{style:h.bottomContainer,children:u?(0,r.jsx)(n().A,{style:h.loadingBottom}):d})]}),!g&&(0,r.jsx)("div",{style:h.iconButton,children:(0,a(404085).l)(h.icon)})]})}},725036:(e,t,a)=>{a.d(t,{o:()=>m});a(581454);var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(187174),r=()=>a(854150),l=()=>a(803418),d=()=>a(763824),c=()=>a(630116),u=()=>a(511303),g=()=>a(625319);function m(e,t){const a=(0,n().v3)(),{organizationOwnerRecordCache:m}=(0,s.useContext)(u().N),{teamIdsForSpace:p,loadTeamsForSpace:h}=(0,s.useContext)(g().D);(0,o().Yb)((async()=>{t||await(0,d().lX)(e,l().O,(async e=>h(e)))}),[e,h,t]);const{teamStoresForSpace:f,isLoading:x}=(0,i().K8)((()=>{const t={};let s=!1;for(const n of e){const e=p[n];s=s||void 0===e,t[n]=(null==e?void 0:e.map((e=>new(c().h4)(a,{id:e,table:r().yK},{inMemoryRecordCache:m}))))??[]}return{teamStoresForSpace:t,isLoading:s}}),[e,p,m,a]);return{teamStores:f,loading:x}}},731736:(e,t,a)=>{a.d(t,{e:()=>l});a(296540);var s=()=>a(401497),n=()=>a(922189),i=()=>a(96689),o=()=>a(99756),r=a(474848);function l(e){const{icon:t,spaceId:a,size:l,containerStyles:d}=e,c=(0,s().IS)((e=>({icon:{fill:e.icon.secondary}})),[]);return t&&a?(0,r.jsx)(o().A,{iconSize:l,type:"circle",iconType:"recordIcon",icon:{icon:t,pointer:{table:i().NX,id:a}},containerStyle:{background:"transparent",...d}}):(0,r.jsx)(o().A,{iconSize:l,type:"circle",iconType:"function",iconFn:n().u,iconStyle:c.icon,containerStyle:{background:"transparent",...d}})}},733815:(e,t,a)=>{a.d(t,{Z:()=>y});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(401497),i=()=>a(42583),o=()=>a(301608),r=()=>a(56394),l=()=>a(972435),d=()=>a(722872),c=()=>a(962730),u=()=>a(377586),g=()=>a(760217),m=()=>a(928600),p=()=>a(939740),h=()=>a(14235),f=()=>a(89924),x=()=>a(806754),v=a(474848);function y(e){const t=(0,n().IS)((e=>({popup:{width:125,marginLeft:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:a,hideAllTime:y}=e,[b,S]=(0,s.useState)(!1),j=o().jf.filter((e=>!y||"all_time"!==e)).map((t=>{const a=()=>{e.onChangeFilter(t),S(!1)};return{key:t,action:()=>{},render:()=>(0,v.jsx)(g().A,{focused:!1,onClick:a,title:l().A.formatMessage(o().jy[t])})}})),w=(0,v.jsx)(r().A,{on:Boolean(a),wrapStyle:t.pillStyle,icon:(0,i().D)({width:16,marginRight:6,fill:"currentColor"}),title:l().A.formatMessage(o().jy[a]),onClick:()=>{S(!0)}}),A=[{key:"filters",items:j,render:e=>(0,v.jsx)(f().A,{...e,title:null,loading:!1})}],M=(0,v.jsx)(m().A,{menuType:d().gu.Popup,header:null,children:(0,v.jsx)(p().Ay,{type:p().Oh.Vertical,initialFocus:0,sections:A})});return(0,v.jsx)(x().A,{marginAfter:!1,children:(0,v.jsx)(h().Ay,{popupType:u().n.Popup,placementToOrigin:c().W.Bottom,alignmentToOrigin:c().C.Start,open:b,render:()=>M,onDismiss:()=>S(!1),keepFocus:!0,origin:w,preventScaleTransition:!0,style:t.popup,trapFocus:!0,originGap:8})})}},736501:(e,t,a)=>{a.d(t,{f:()=>s});const s=28*a(720665).nD},737693:(e,t,a)=>{a.d(t,{V:()=>i});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M6.625 6.625a.675.675 0 1 1-1.35 0 .675.675 0 0 1 1.35 0M5.95 9.55a.675.675 0 1 0 0-1.35.675.675 0 0 0 0 1.35m.675 1.575a.675.675 0 1 1-1.35 0 .675.675 0 0 1 1.35 0M9.1 7.3a.675.675 0 1 0 0-1.35.675.675 0 0 0 0 1.35m.675 1.575a.675.675 0 1 1-1.35 0 .675.675 0 0 1 1.35 0M9.1 11.8a.675.675 0 1 0 0-1.35.675.675 0 0 0 0 1.35m6.413.225a.675.675 0 1 1-1.35 0 .675.675 0 0 1 1.35 0m-.675 2.925a.675.675 0 1 0 0-1.35.675.675 0 0 0 0 1.35"}),(0,s.jsx)("path",{d:"M1.9 5.725A2.475 2.475 0 0 1 4.375 3.25h6.3a2.475 2.475 0 0 1 2.475 2.475v3.15h2.475A2.475 2.475 0 0 1 18.1 11.35v5.4a.675.675 0 0 1-.675.675H2.575a.675.675 0 0 1-.675-.675zM4.375 4.6c-.621 0-1.125.504-1.125 1.125v10.35h1.913V13.6c0-.31.251-.562.562-.562h3.6c.31 0 .563.251.563.562v2.475H11.8V5.725c0-.621-.504-1.125-1.125-1.125zm4.388 11.475v-1.912H6.288v1.912zm4.387-5.85v5.85h3.6V11.35c0-.621-.504-1.125-1.125-1.125z"})]})},i=(0,a(340498).wt)("teamspace",n)},738268:(e,t,a)=>{a.d(t,{Z:()=>g});a(296540);var s=()=>a(662303),n=()=>a(56366),i=()=>a(869190),o=()=>a(798880),r=()=>a(959013),l=()=>a(534177),d=()=>a(6208),c=()=>a(625383),u=a(474848);function g(e){let{pageStatus:t,lastEditedTime:a,lastEditedById:g,movedToTrashTime:m,deletedFromTrashTime:p}=e;const h=(0,d().y)(g),f=(0,n().K8)((()=>{if("alive"===t)return(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.lastEdited",defaultMessage:"Last edited by {name} on {time}",values:{name:h,time:(0,i().W_)(a,"month_day_time",s().locale)}});if((0,l().O9)(p)){return!!g&&(0,o().O5)(g)?(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.autoDeletedFromTrash",defaultMessage:"Automatically deleted from Trash on {time}",values:{time:(0,i().W_)(p,"month_day_time",s().locale)}}):(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.deletedFromTrash",defaultMessage:"Deleted from Trash by {name} on {time}",values:{name:h,time:(0,i().W_)(p,"month_day_time",s().locale)}})}return(0,l().O9)(m)?(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.movedToTrash",defaultMessage:"Moved to Trash by {name} on {time}",values:{name:h,time:(0,i().W_)(m,"month_day_time",s().locale)}}):void 0}),[p,g,a,m,t,h]);return(0,u.jsx)(c().d,{dateTs:a,tooltip:f})}},742784:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K,getBlockExportTypeTitle:()=>Y,getBlockIncludeContentsTitle:()=>Q,getCollectionViewExportTypeTitle:()=>$});a(581454);var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(401497),r=()=>a(148307),l=()=>a(522419),d=()=>a(72135),c=()=>a(161479),u=()=>a(96689),g=()=>a(959013),m=()=>a(496603),p=()=>a(201549),h=()=>a(722872),f=()=>a(553965),x=()=>a(668766),v=()=>a(62856),y=()=>a(962730),b=()=>a(463830),S=()=>a(227440),j=()=>a(436529),w=()=>a(991249),A=()=>a(643908),M=()=>a(493823),C=()=>a(760217),I=()=>a(805751),T=()=>a(623580),k=()=>a(928600),_=()=>a(939740),D=()=>a(204063),z=()=>a(89924),P=()=>a(500861),N=()=>a(946548),R=()=>a(890434),B=()=>a(125565),L=()=>a(327165),E=()=>a(103448),O=a(474848);const U=["pdf","html","markdown"],F=["currentView","all"],V=1;function H(e){return e>.1&&e<2}const W=["everything","no_files"],q=(0,g().YK)({dialogLabel:{id:"exportModal.dialogLabel",defaultMessage:"Export"}});function G(e){let{value:t,onChange:a}=e;const n=(0,g().tz)(),i=s.useCallback((e=>{const t=e.target.value,s=(0,d().sA)(t)||(0,x().q)(t,n);let i;"object"==typeof s?i="percent"===s.format?s.value:s.value/100:"number"==typeof s&&(i=s/100),void 0!==i&&a(i)}),[a,n]),[o,r]=s.useState(!1),l=s.useMemo((()=>(0,d().ZV)(Math.round(100*t),"number",n)),[t,n]);return(0,O.jsx)(I().A,{debugName:"ExportModal",capture:o,children:(0,O.jsx)(T().A,{value:l,onChange:i,onFocus:()=>r(!0),onBlur:()=>r(!1),style:{width:60},inputStyle:{textAlign:"right"}})})}const K=function(){const e=(0,g().tz)(),t=(0,i().uB)(void 0,b().A),n=(0,i().uB)(void 0,b().A),o=(0,i().uB)(void 0,b().A),r=(0,i().uB)(void 0,b().A),l=(0,s.useCallback)((()=>(0,O.jsx)(me,{includeContentsPopupStore:r,exportTypePopupStore:o,pdfFormatPopupStore:n,collectionViewExportTypePopupStore:t})),[r,o,n,t]),d=(0,i().K8)((()=>j().Ay.state.open),[]);return(0,O.jsx)(a(641514).A,{ariaLabel:e.formatMessage(q.dialogLabel),onDismiss:ae,render:l,isOpen:d})};function Y(e){switch(e){case"pdf":return(0,O.jsx)(g().sA,{id:"exportModal.exportFormatButton.pdf.label",defaultMessage:"PDF"});case"markdown":return(0,O.jsx)(g().sA,{id:"exportModal.exportFormatButton.markdownAndCSV.label",defaultMessage:"Markdown & CSV"});case"html":return(0,O.jsx)(g().sA,{id:"exportModal.exportFormatButton.html.label",defaultMessage:"HTML"})}}function Q(e){switch(e){case"everything":return(0,O.jsx)(g().sA,{id:"exportModal.includeContentTypes.everything.label",defaultMessage:"Everything"});case"no_files":return(0,O.jsx)(g().sA,{id:"exportModal.includeContentTypes.no_files.label",defaultMessage:"No files or images"})}}function $(e){switch(e){case"all":return(0,O.jsx)(g().sA,{id:"exportModal.includeDatabases.all.label.defaultView",defaultMessage:"Default View"});case"currentView":return(0,O.jsx)(g().sA,{id:"exportModal.includeDatabases.currentView.label",defaultMessage:"Current view"})}}function X(e){switch(e){case"Letter":return(0,O.jsx)(g().sA,{id:"exportModal.pageFormatButton.letter.label",defaultMessage:"Letter"});case"A3":return(0,O.jsx)(g().sA,{id:"exportModal.pageFormatButton.a3.label",defaultMessage:"A3"});case"A4":return(0,O.jsx)(g().sA,{id:"exportModal.pageFormatButton.a4.label",defaultMessage:"A4"});case"Legal":return(0,O.jsx)(g().sA,{id:"exportModal.pageFormatButton.legal.label",defaultMessage:"Legal"});case"Tabloid":return(0,O.jsx)(g().sA,{id:"exportModal.pageFormatButton.tabloid.label",defaultMessage:"Tabloid"})}}function Z(){const e=j().Ay.state;return e.open&&(0,j().xt)(e)?void 0===e.exportOptions.scale?V:e.exportOptions.scale:V}function J(){return H(Z())}function ee(e){return{width:320,padding:24,fontSize:14,color:e.mediumTextColor}}function te(){const e=(0,o().DP)();return(0,O.jsx)("div",{style:ee(e),children:(0,O.jsx)(g().sA,{defaultMessage:"Please go online to export.",id:"exportModal.offlineMessage.description"})})}function ae(){p()._3()}function se(e){const t=j().Ay.state;if(t.open){if((0,j().xt)(t)&&!p().Dd(e))return void w().K(e,{from:"export_modal",upsell:{type:"product",product:"enterprise",limit:{type:"none"}}});p().z_(e,{...t,recursive:!t.recursive})}}function ne(e){if(!J())return;const t=j().Ay.state;t.open&&(p()._3(),void 0===t.exportOptions.flattenExportFiletree&&e.device.isWindows&&(t.exportOptions.flattenExportFiletree=!0),t.root.table===u().NX?p().P_(e,{spaceId:t.root.id,exportOptions:t.exportOptions,shouldExportComments:t.shouldExportComments}):p().UP(e,{block:{id:t.root.id,spaceId:(0,c().e)(t.root.spaceId)},recursive:t.recursive,exportOptions:t.exportOptions,shouldExportComments:t.shouldExportComments}))}function ie(e,t,a,s){const n=j().Ay.state,i=n.open&&"pdf"===e&&"space"===n.root.table&&!p().Dd(s)&&"business";return{key:e,action:()=>{t.close(),i?w().K(s,{from:"export_modal",upsell:{type:"product",product:i,limit:{type:"none"}}}):function(e,t,a){const s=j().Ay.state;if(!s.open)return;const{exportOptions:n}=s;if(e===n.exportType)return;let i;i="pdf"===e?{...n,exportType:"pdf",pdfFormat:p().id(t)}:{...n,exportType:e},p().z_(a,{...s,exportOptions:i})}(e,a,s)},render:t=>{let{onClick:a,key:s,...n}=t;return(0,O.jsx)(A().A,{requireUpgradeToTier:i,analyticsName:"export_modal",onClick:a,render:(t,a)=>(0,O.jsx)(C().A,{...(0,f().A)(n,t),title:Y(e),right:a}),renderUpgradeTooltip:()=>(0,O.jsx)(E().A,{imageURL:r().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,O.jsx)(g().sA,{defaultMessage:"Upgrade to export the workspace as PDFs",id:"exportModal.workspacePdfUpgradeTooltip.title"}),caption:(0,O.jsx)(g().sA,{defaultMessage:"Creates a zip file containing all pages in the workspace as PDF files.",id:"exportModal.workspacePdfUpgradeTooltip.caption"})}),tooltipPlacement:y().W.Left,upgradeButtonDesktopStyle:{marginTop:2}},s)}}}function oe(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=j().Ay.state;a.open&&p().z_(t,{...a,exportOptions:{...a.exportOptions,includeContents:e}})}(e,a)},render:t=>(0,O.jsx)(C().A,{...t,title:Q(e)})}}function re(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=j().Ay.state;a.open&&p().z_(t,{...a,exportOptions:{...a.exportOptions,collectionViewExportType:e}})}(e,a)},render:t=>(0,O.jsx)(C().A,{...t,title:$(e)})}}function le(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=j().Ay.state;a.open&&(0,j().xt)(a)&&p().z_(t,{...a,exportOptions:{...a.exportOptions,pdfFormat:e}})}(e,a)},render:t=>(0,O.jsx)(C().A,{...t,title:X(e)})}}function de(){const e=(0,o().DP)(),t=(0,n().v3)(),a=(0,i().K8)((()=>Z()),[]),s=(0,v().A)(!0,500,100);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",height:32},children:[(0,O.jsx)(B().A,{style:{color:e.lightTextColor},children:(0,O.jsx)(g().sA,{id:"exportModal.pageScale.description",defaultMessage:"Scale percent"})}),(0,O.jsx)(G,{value:a,onChange:e=>function(e,t){const a=j().Ay.state;a.open&&(0,j().xt)(a)&&p().z_(t,{...a,exportOptions:{...a.exportOptions,scale:e}})}(e,t)})]}),!H(a)&&s&&(0,O.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:32,padding:"4px 0"},children:(0,O.jsx)(B().A,{isSmall:!0,isMultiline:!0,style:{color:e.errorText},children:(0,O.jsx)(g().sA,{id:"exportModal.pageScale.invalidScaleError",defaultMessage:"Scale percent must be a number between 10 and 200"})})})]})}function ce(e){let{modalState:t,includeContentsPopupStore:a,exportTypePopupStore:s,pdfFormatPopupStore:d,collectionViewExportTypePopupStore:c}=e;const u=(0,o().DP)(),m=(0,n().v3)(),h=(0,i().uB)(c,b().A),f=(0,i().uB)(d,b().A),x=(0,i().uB)(s,b().A),v=(0,i().uB)(a,b().A),{device:S,currentUser:w}=m,C=(0,i().K8)((()=>(0,j().xt)(t)&&!p().Dd(m)&&"business"),[t,m]),I=m.device.isWindows,T=(0,i().K8)((()=>J()),[]),k=(0,i().K8)((()=>$(t.exportOptions.collectionViewExportType||"currentView")),[t]);return(0,O.jsxs)("div",{style:{width:320,padding:24,fontSize:14},children:[(0,O.jsx)(P().A,{isMenuItem:S.isMobile,buttonPopupStore:x,label:(0,O.jsx)(g().sA,{id:"exportModal.exportFormat.description",defaultMessage:"Export format"}),selectedTitle:Y(t.exportOptions.exportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,O.jsx)(z().A,{...e}),items:U.map((t=>ie(t,e,w.id,m)))}]}),t.exportOptions.collectionViewExportType&&(0,O.jsx)(P().A,{isMenuItem:S.isMobile,buttonPopupStore:h,label:(0,O.jsx)(g().sA,{id:"exportModal.includeDatabases.description",defaultMessage:"Include databases"}),selectedTitle:k,renderMenuSections:e=>[{key:"exportCollection",render:e=>(0,O.jsx)(z().A,{...e}),items:F.map((t=>re(t,e,m)))}]}),(0,O.jsx)(P().A,{isMenuItem:S.isMobile,buttonPopupStore:v,label:(0,O.jsx)(g().sA,{id:"exportModal.includeContents.description",defaultMessage:"Include content"}),selectedTitle:Q(t.exportOptions.includeContents||"everything"),renderMenuSections:e=>[{key:"includeContents",render:e=>(0,O.jsx)(z().A,{...e}),items:W.map((t=>oe(t,e,m)))}]}),(0,j().xt)(t)&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(P().A,{isMenuItem:S.isMobile,buttonPopupStore:f,label:(0,O.jsx)(g().sA,{id:"exportModal.pageFormat.description",defaultMessage:"Page format"}),selectedTitle:X(t.exportOptions.pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",render:e=>(0,O.jsx)(z().A,{...e}),items:l().yC.map((t=>le(t,e,m)))},{key:"otherPaperFormats",render:e=>(0,O.jsx)(z().A,{topBorder:!0,...e}),items:l().hj.map((t=>le(t,e,m)))}]}),(0,O.jsx)(de,{})]}),"space"!==t.root.table&&(0,O.jsx)(A().A,{requireUpgradeToTier:C,analyticsName:"export_modal",onClick:()=>se(m),render:(e,a)=>(0,O.jsxs)("div",{...e,style:{display:"flex",alignItems:"center",height:32},children:[(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:"auto",color:u.lightTextColor,fontSize:14},children:[(0,O.jsx)(g().sA,{defaultMessage:"Include subpages",id:"exportModal.includeSubpages.label"})," ",a&&(0,O.jsx)("div",{style:{marginLeft:8},children:a})]}),(0,O.jsx)(N().A,{on:t.recursive,disabled:Boolean(C)})]}),renderUpgradeTooltip:()=>(0,O.jsx)(E().A,{imageURL:r().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,O.jsx)(g().sA,{defaultMessage:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),caption:(0,O.jsx)(g().sA,{defaultMessage:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})}),tooltipPlacement:y().W.Left,upgradeButtonDesktopStyle:{marginTop:2}}),(0,O.jsx)(R().A,{title:(0,O.jsx)(g().sA,{id:"exportModal.flattenExportFiletree.description",defaultMessage:"Create folders for subpages"}),subtitle:"",style:{color:u.lightTextColor,fontSize:14,display:"flex",alignItems:"center",marginRight:"auto",height:32},on:void 0===t.exportOptions.flattenExportFiletree?!I:!t.exportOptions.flattenExportFiletree,disabled:!t.recursive,onChange:()=>function(e){const t=j().Ay.state;t.open&&p().z_(e,{...t,exportOptions:{...t.exportOptions,flattenExportFiletree:!t.exportOptions.flattenExportFiletree}})}(m)}),"html"===t.exportOptions.exportType?(0,O.jsx)(R().A,{title:(0,O.jsx)(g().sA,{id:"exportModal.shouldExportComments.description",defaultMessage:"Export comments"}),subtitle:"",style:{color:u.lightTextColor,fontSize:14,display:"flex",alignItems:"center",marginRight:"auto",height:32},on:t.shouldExportComments,onChange:()=>function(e){const t=j().Ay.state;t.open&&p().z_(e,{...t,shouldExportComments:!t.shouldExportComments})}(m)}):null,(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:16},children:[(0,O.jsx)(M().p,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:ae,children:(0,O.jsx)(g().sA,{defaultMessage:"Cancel",id:"exportModal.cancelButton.label"})}),(0,O.jsx)(D().A,{onClick:()=>ne(m),disabled:!T,children:(0,O.jsx)(g().sA,{defaultMessage:"Export",id:"exportModal.exportButton.label"})})]})]})}function ue(e,t,a,s){const{currentUser:n,device:i}=t;return m().oE([{key:"export type",render:s=>{let{ref:o,...r}=s;return(0,O.jsx)(P().A,{...r,isMenuItem:i.isMobile,buttonPopupStore:a,label:(0,O.jsx)(g().sA,{defaultMessage:"Export format",id:"exportModal.exportFormat.description"}),selectedTitle:Y(e.exportOptions.exportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,O.jsx)(z().A,{...e}),items:U.map((a=>ie(a,e,n.id,t)))}]})},action:()=>{a.setState({open:!0})}},(0,j().xt)(e)&&{key:"pdf format",render:a=>{let{ref:n,...o}=a;return(0,O.jsx)(P().A,{...o,isMenuItem:i.isMobile,buttonPopupStore:s,label:(0,O.jsx)(g().sA,{defaultMessage:"Page format",id:"exportModal.pageFormat.description"}),selectedTitle:X(e.exportOptions.pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",render:e=>(0,O.jsx)(z().A,{...e}),items:l().yC.map((a=>le(a,e,t)))},{key:"otherPaperFormats",render:e=>(0,O.jsx)(z().A,{topBorder:!0,...e}),items:l().hj.map((a=>le(a,e,t)))}]})},action:()=>{s.setState({open:!0})}},"space"!==e.root.table&&{key:"recursive",render:a=>{let{onClick:s,key:n,...i}=a;const o=(0,j().xt)(e)&&!p().Dd(t)&&"business";return(0,O.jsx)(A().A,{requireUpgradeToTier:o,analyticsName:"export_modal",onClick:s,render:(t,a)=>{const s=(0,f().A)(i,t);return(0,O.jsx)(C().A,{...s,title:(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,O.jsx)(g().sA,{defaultMessage:"Include subpages",id:"exportModal.includeSubpages.label"})," ",a&&(0,O.jsx)("div",{style:{marginLeft:8},children:a})]}),right:(0,O.jsx)(N().A,{...s,on:e.recursive,disabled:Boolean(o)})})},renderUpgradeTooltip:()=>(0,O.jsx)(E().A,{imageURL:r().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,O.jsx)(g().sA,{defaultMessage:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),caption:(0,O.jsx)(g().sA,{defaultMessage:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})}),tooltipPlacement:y().W.Left,upgradeButtonDesktopStyle:{marginTop:2}},n)},action:()=>se(t)}])}function ge(e){let{modalState:t,exportTypePopupStore:a,pdfFormatPopupStore:s}=e;const i=(0,n().v3)(),o={menuType:h().gu.Modal,title:(0,O.jsx)(g().sA,{id:"exportModal.title",defaultMessage:"Export"}),right:(0,O.jsx)(g().sA,{id:"exportModal.closeButton.label",defaultMessage:"Close"}),onClickRight:ae};return(0,O.jsx)(k().A,{...o,children:(0,O.jsx)(_().Ay,{type:_().Oh.Vertical,initialFocus:void 0,sections:[{key:"exportOptions",render:e=>(0,O.jsx)(z().A,{...e}),items:ue(t,i,a,s)},{key:"actions",render:e=>{let{children:t,...a}=e;return(0,O.jsx)(z().A,{...a,children:t})},items:[{key:"submit",render:e=>{const{onClick:t,...a}=e;return(0,O.jsx)(L().A,{...a,onClick:t||(()=>ne(i)),disabled:!J(),title:(0,O.jsx)(g().sA,{id:"exportModal.exportButton.label",defaultMessage:"Export"})})},action:()=>ne(i)}]}]})})}function me(e){let{includeContentsPopupStore:t,exportTypePopupStore:a,pdfFormatPopupStore:s,collectionViewExportTypePopupStore:o}=e;const r=(0,n().v3)(),{device:l}=r,d=(0,i().K8)((()=>S().A.state.online),[]),c=(0,i().O$)(j().Ay);return d?c.open?l.isMobile?(0,O.jsx)(ge,{exportTypePopupStore:a,pdfFormatPopupStore:s,modalState:c}):(0,O.jsx)(ce,{includeContentsPopupStore:t,exportTypePopupStore:a,pdfFormatPopupStore:s,collectionViewExportTypePopupStore:o,modalState:c}):null:(0,O.jsx)(te,{})}},743556:(e,t,a)=>{a.d(t,{T:()=>n,n:()=>i});a(581454);var s=()=>a(803418);let n=function(e){return e.Loading="loading",e.ManagedUser="managed-user",e.OrganizationSpaceScimBot="organization-space-scim-bot",e.OrganizationWorkspace="organization-workspace",e.OrganizationGroup="organization-group",e.OrganizationGroupMember="organization-group-member",e.OrganizationGroupPage="organization-group-page",e.OrganizationGuest="organization-guest",e.OrganizationMember="organization-member",e.OrganizationClaimableWorkspace="organization-claimable-workspace",e.OrganizationEmailDomain="organization-email-domain",e.SingleUserGroup="single-user-group",e.SingleUserWorkspace="single-user-workspace",e.OrganizationLegalHold="organization-legal-hold",e.SingleLegalHoldMemberUser="single-legal-hold-member-user",e.SingleLegalHoldMemberGuest="single-legal-hold-member-guest",e.SingleLegalHoldMemberDeletedUser="single-legal-hold-member-deleted-user",e.SingleLegalHoldPage="single-legal-hold-page",e.SingleWorkspaceTeam="workspace-team",e.SingleWorkspaceGuest="workspace-guest",e.AnalyticsMemberViewsRow="analytics-member-view",e.AnalyticsPageViewsRow="analytics-page-views",e}({});function i(e){return new Array(e??s().q).fill(0).map(((e,t)=>({id:`loading-${t}`,isClickable:!1,type:n.Loading})))}},745638:(e,t,a)=>{a.d(t,{H:()=>i});var s=()=>a(989423),n=()=>a(508496);function i(e){s().vd(e,"delete_workspace_click"),n().default.logEvent("delete_workspace_click")}},762286:(e,t,a)=>{a.d(t,{A:()=>n});class s extends(()=>a(757695))().default{getInitialState(){return{recentRecoverableUsers:[],searchQuery:void 0}}}const n=new s},766558:(e,t,a)=>{a.d(t,{j:()=>n,y:()=>i});var s=()=>a(284371);function n(e){const{theme:t,isInHomeWidget:a}=e;return{display:"flex",alignItems:"center",fontSize:14,padding:6,...a?{height:24,width:24,color:t.lightTextColor,fill:t.lightIconColor}:{height:28,width:28,color:t.mediumIconColor,fill:t.mediumIconColor},fontWeight:s().Wy.regular,lineHeight:1,borderRadius:6}}function i(e){const{theme:t}=e;return{display:"flex",alignItems:"center",fontSize:14,height:28,padding:6,color:t.mediumIconColor,fontWeight:s().Wy.regular,lineHeight:1,borderRadius:6}}},771495:(e,t,a)=>{a.d(t,{M:()=>r,l:()=>l});a(296540);var s=()=>a(373204),n=()=>a(959013),i=()=>a(567865),o=a(474848);function r(e){let{selectedMfaMethod:t,setSelectedMfaMethod:a}=e;return(0,o.jsx)(i().zr,{pillTitle:(0,o.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.title",defaultMessage:"2-step verification method"}),pillIcon:s().K,selectedItem:t,setSelectedItem:a,items:l})}const l=[{key:"totp",value:"totp",title:(0,o.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.totp",defaultMessage:"Authenticator"}),shortTitle:(0,o.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.totp",defaultMessage:"Authenticator"}),caption:(0,o.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.totp.caption",defaultMessage:"Users who have enabled 2-step verification through an authenticator app"}),wrapCaption:!0},{key:"sms",value:"sms",title:(0,o.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.sms",defaultMessage:"Phone number"}),shortTitle:(0,o.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.sms",defaultMessage:"Phone number"}),caption:(0,o.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.sms.caption",defaultMessage:"Users who have enabled 2-step verification through their phone number"}),wrapCaption:!0},{key:"backup_code",value:"backup_code",title:(0,o.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.backupCode",defaultMessage:"Backup code"}),shortTitle:(0,o.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.backupCode",defaultMessage:"Backup code"}),caption:(0,o.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.backup_code.caption",defaultMessage:"Users who have enabled 2-step verification with active backup codes."}),wrapCaption:!0}]},773290:(e,t,a)=>{a.d(t,{T:()=>l});a(581454),a(296540);var s=()=>a(56366),n=()=>a(798880),i=()=>a(630116),o=()=>a(317131),r=a(474848);function l(e){let{blockStore:t,userIds:a,isClickable:l}=e;const d=(0,s().K8)((()=>a.map((e=>i().LU.createChildStore(t,{table:n().oo,id:e})))),[t,a]);return(0,r.jsx)(o().l,{userStores:d,isClickable:l})}},792223:(e,t,a)=>{a.d(t,{BV:()=>g,Gg:()=>v,k4:()=>f,r1:()=>h,rl:()=>m,t1:()=>p,zh:()=>x});var s=()=>a(484714),n=()=>a(56366),i=()=>a(187174),o=()=>a(979340),r=()=>a(449506),l=()=>a(901389),d=()=>a(397103),c=()=>a(134217),u=()=>a(762286);function g(e){let{spaceStore:t,members:a}=e;const n=h({spaceStore:t}),o=(0,s().v3)(),d=t.id,[c]=(0,i().Yb)((async()=>{if(!n)return;const e=await r().callApi({eventName:"getRecentlyRemovedUsers",environment:o,data:{spaceId:d}});if("failed"===e.type)throw l().Qg(e),e;return e.data.recentlyRemovedMembers}),[d,o,n,a]);return c.value}function m(e){let{spaceStore:t,subscriptionData:a}=e;const n=p({spaceStore:t,subscriptionData:a}),o=(0,s().v3)();(0,i().Yb)((async()=>{if(!n)return;const e=await r().callApi({eventName:"getRecoverableSpaceUserContent",environment:o,data:{spaceId:t.id}});if("failed"===e.type)throw e;const a=e.data.recentSpaceRecoverPages;return u().A.setState({...u().A.state,recentRecoverableUsers:a}),a}),[t,o,n])}function p(e){let{spaceStore:t,subscriptionData:a}=e;return(0,n().K8)((()=>t.canAdmin()&&o().OX(a.subscriptionTier)),[a,t])}function h(e){let{spaceStore:t}=e;return(0,n().K8)((()=>t.canAdmin()),[t])}function f(e){let{spaceStore:t}=e;return(0,n().K8)((()=>t.canEditMembership()),[t])}function x(){const e=(0,s().v3)();return(0,n().K8)((()=>c().vl(e)),[e])}function v(e){let{spaceStore:t}=e;const a=(0,d().h)();return(0,n().K8)((()=>(null==t?void 0:t.canEditMembership())&&a),[t,a])}},793571:(e,t,a)=>{a.d(t,{r:()=>Se});a(581454);var s=a(296540),n=()=>a(56366),i=()=>a(401497),o=()=>a(959013),r=()=>a(108944),l=()=>a(991221),d=()=>a(749240),c=()=>a(641300),u=()=>a(364280),g=()=>a(331542),m=()=>a(625383),p=()=>a(125565),h=()=>a(484714),f=()=>a(738418),x=()=>a(449552),v=()=>a(284371),y=()=>a(989423);var b=()=>a(755636),S=()=>a(72234),j=()=>a(836251),w=()=>a(493823),A=()=>a(204063),M=a(474848);function C(e){const t=(0,h().v3)(),a=(0,i().IS)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:36,height:36,color:e.lightTextColor,fill:"currentColor"},disclaimerTitle:{margin:"12px auto",fontWeight:v().Wy.medium,fontSize:16},disclaimer:{fontWeight:v().Wy.regular,fontSize:14,color:e.lightTextColor,textAlign:"center",width:432,margin:"0 auto 16px"},acknowledgeButton:{width:195,margin:"8px auto 0"},learnMoreButton:{width:195,margin:"8px auto 0",justifyContent:"center",color:e.lightTextColor},learnMoreButtonIcon:{width:12,height:12,marginRight:4}})),[]),n=(0,s.useCallback)((()=>{!function(e){y().vd(e,"admin_content_search_analytics_acknowledge_confirm")}(t),S().dK(t)}),[t]);return(0,M.jsxs)("div",{style:a.container,children:[(0,x().g)(a.headerIcon),(0,M.jsx)("h1",{style:a.disclaimerTitle,children:(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimerTitle",defaultMessage:"Before using this feature"})}),(0,M.jsx)("p",{style:a.disclaimer,children:(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimer",defaultMessage:"As a workspace owner, you can use content search to find pages that you don't have access to, including the private pages of other workspace members. Consult with your organization's legal department on how to use this feature. Actions taken here will be recorded in the audit log."})}),(0,M.jsx)(A().A,{style:a.acknowledgeButton,onClick:n,children:(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.confirm",defaultMessage:"Acknowledge"})}),(0,M.jsxs)(w().p,{style:a.learnMoreButton,onClick:()=>{const e=(0,j().xS)("adminContentSearch");b().f({environment:t,url:e})},children:[(0,f().G)(a.learnMoreButtonIcon),(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.learnMore",defaultMessage:"Learn more"})]})]})}var I=()=>a(994776),T=()=>a(149375),k=()=>a(701144);function _(e){let{filters:t,setFilters:a}=e;const s=(0,i().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},title:{margin:"12px auto",fontWeight:v().Wy.medium,fontSize:16},description:{fontWeight:v().Wy.regular,fontSize:14,color:e.lightTextColor,textAlign:"center",maxWidth:386,margin:"0 auto 16px"},suggestion:{position:"relative",height:38,width:"100%",maxWidth:440,margin:"12px auto 0",justifyContent:"center",color:e.darkTextColor,boxShadow:e.shadow2XS},filterContainer:{margin:"0 8px",display:"flex",alignItems:"center",justifyContent:"center"},arrowIconContainer:{position:"absolute",right:12,transform:"rotate(180deg)"},arrowIcon:{width:18,height:18,opacity:.5,color:e.lightTextColor,fill:"currentColor"}})),[]);return(0,M.jsxs)("div",{style:s.container,children:[(0,M.jsx)("h1",{style:s.title,children:(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.suggestions.title",defaultMessage:"Search pages in your workspace"})}),(0,M.jsx)("p",{style:s.description,children:(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.suggestions.description",defaultMessage:"Use filters to find pages with specific sharing and permissions settings, such as:"})}),(0,M.jsxs)(w().p,{style:s.suggestion,onClick:function(){a({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_externally"],teamIds:[]},{runSearchAfter:!0})},children:[(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,M.jsx)("div",{style:s.filterContainer,children:(0,M.jsx)(k().tE,{setPillTitleStringToActiveSelection:!0,selectedAudience:["shared_externally"]})})}}),(0,M.jsx)("div",{style:s.arrowIconContainer,children:(0,T().v)(s.arrowIcon)})]}),(0,M.jsxs)(w().p,{style:s.suggestion,onClick:function(){a({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_to_web"],teamIds:[]},{runSearchAfter:!0})},children:[(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,M.jsx)("div",{style:s.filterContainer,children:(0,M.jsx)(k().tE,{setPillTitleStringToActiveSelection:!0,selectedAudience:["shared_to_web"]})})}}),(0,M.jsx)("div",{style:s.arrowIconContainer,children:(0,T().v)(s.arrowIcon)})]})]})}a(898992),a(354520);var D=()=>a(30626),z=()=>a(534177),P=()=>a(482707),N=()=>a(722872),R=()=>a(437487),B=()=>a(962730),L=()=>a(463830),E=()=>a(529183),O=()=>a(454354),U=()=>a(406699),F=()=>a(285790),V=()=>a(928600),H=()=>a(939740),W=()=>a(14235),q=()=>a(47582),G=()=>a(824176),K=()=>a(451830);function Y(e){const{pageStatus:t,blockStore:a,refreshSearchResult:s}=e;switch(t){case"alive":case"in_trash":return(0,M.jsx)(Q,{pageStatus:t,blockStore:a,refreshSearchResult:s});case"deleted_from_trash":return(0,M.jsx)($,{pageStatus:t,blockStore:a,getValidDeletedPermissions:e.getValidDeletedPermissions,refreshSearchResult:s});default:(0,z().HB)(t)}}function Q(e){let{blockStore:t,pageStatus:a,refreshSearchResult:i}=e;const r=(0,o().tz)(),l=(0,n().uB)(void 0,L().A),d=(0,h().v3)(),c=(0,n().uB)(void 0,O().A),u=(0,n().uB)(void 0,E().Ay),g=(0,K().o)(),[m,p]=(0,s.useState)(!1);(0,s.useEffect)((()=>{c.setState({...c.state,privatePageStore:t,changePermissionsEnabled:!0,loading:!1,error:void 0})}),[t,c]);const f=[(0,G().j9)({environment:d,pageStatus:a,popupStore:l,blockStore:t,handleOpenPermissionsMenu:()=>p(!0),onRestoreOrDeletePage:i,from:"adminContentSearch"}),(0,G().CT)({environment:d,pageStatus:a,popupStore:l,blockStore:t,onRestoreOrDeletePage:i,from:"adminContentSearch"})].filter(z().O9);return(0,M.jsx)(U().Ay,{popupType:W().nl.Popup,alignmentToOrigin:B().C.Start,placementToOrigin:B().W.Bottom,style:m?g.popupShareModal:g.popupMenu,render:()=>m?(0,M.jsx)(P().k,{store:t,sudoModeStore:c,inviteTargetsStore:u,location:"admin_content_search"}):(0,M.jsx)(V().A,{menuType:N().gu.Popup,width:248,children:(0,M.jsx)(H().Ay,{type:H().Oh.Vertical,initialFocus:void 0,sections:f})}),onClose:()=>{p(!1),R().Ay.reset()},buttonPopupStore:l,renderOrigin:e=>(0,M.jsx)(F().A,{ariaLabel:r.formatMessage({id:"pageCellActions.aliveOrInTrash.iconButton.ariaLabel",defaultMessage:"More actions for page"}),icon:D()._,...e})})}function $(e){let{blockStore:t,getValidDeletedPermissions:a,refreshSearchResult:n}=e;const i=(0,o().tz)(),r=(0,s.useCallback)((e=>(0,M.jsx)(F().A,{ariaLabel:i.formatMessage({id:"pageCellActions.deletedFromTrash.iconButton.ariaLabel",defaultMessage:"More actions for deleted from trash page"}),icon:D()._,...e})),[i]),l=(0,h().v3)();return(0,M.jsx)(q().V,{environment:l,renderPopupOrigin:r,blockStore:t,placementToOrigin:B().W.Bottom,includeNonRestoreActions:!0,getValidDeletedPermissions:a,onRestoreOrDeletePage:n,from:"adminContentSearch"})}var X=()=>a(624090),Z=()=>a(287882),J=()=>a(720665),ee=()=>a(464708),te=()=>a(859428);function ae(e){let{pageStatus:t,blockStore:s}=e;const r=(0,i().IS)((e=>({grayBadge:{width:"fit-content",whiteSpace:"nowrap",display:"flex",flexDirection:"row"},trashIcon:{marginRight:2,height:12,width:12}})),[]),{deleteFromTrashDelayMs:l,purgeDelayMs:d}=(0,n().K8)((()=>{const e=s.getSpaceStore();return{deleteFromTrashDelayMs:(0,X().XX)(null==e?void 0:e.getModel()),purgeDelayMs:(0,X().NA)(null==e?void 0:e.getModel())}}),[s]),c=(0,n().K8)((()=>{if("in_trash"===t)return(0,X().BT)(s.pointer,s.getRecordModel)}),[s,t]),u=(0,n().K8)((()=>{if("deleted_from_trash"===t)return(0,X().uZ)(s.pointer,s.getRecordModel)}),[s,t]),g=(0,a(501497).S6)();switch(t){case"alive":return null;case"in_trash":return Date.now()>=(0,X().vw)({movedToTrashTime:c,deleteFromTrashDelayMs:l,cdrrDeletionEnabledTimestamp:g})?(0,M.jsx)(se,{deleteFromTrashDelaySeconds:l/J().TD,purgeDelaySeconds:d/J().TD,pageStatus:t}):(0,M.jsx)(ee().A,{style:r.grayBadge,content:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{children:(0,a(735384).I)(r.trashIcon)}),(0,M.jsx)(o().sA,{id:"adminContentSearch.pageStatusBadge.trash",defaultMessage:"In Trash"})]})});case"deleted_from_trash":return Date.now()>=(u??X().mZ)+d?(0,M.jsx)(se,{deleteFromTrashDelaySeconds:l/J().TD,purgeDelaySeconds:d/J().TD,pageStatus:t}):(0,M.jsx)(ee().A,{style:r.grayBadge,content:(0,M.jsx)(o().sA,{id:"adminContentSearch.pageStatusBadge.retained",defaultMessage:"Retained"})});default:(0,z().HB)(t)}}function se(e){const{pageStatus:t,deleteFromTrashDelaySeconds:a,purgeDelaySeconds:s}=e,n=(0,o().tz)(),r=(0,i().IS)((e=>({redBadge:{color:e.text.uiRedPrimary,backgroundColor:e.fill.redPrimary,width:"fit-content",whiteSpace:"nowrap"},secondaryTooltip:{color:e.text.contrastSecondary}})),[]);return"in_trash"===t?(0,M.jsx)(te().A,{renderTooltip:()=>(0,M.jsx)(o().sA,{id:"adminContentSearch.pageStatusBadge.deletionPending.trash.tooltip",defaultMessage:"<primary>We are processing the deletion from Trash</primary><secondary>This page is past {duration} in Trash</secondary>",values:{primary:e=>(0,M.jsx)("div",{children:e}),secondary:e=>(0,M.jsx)("div",{style:r.secondaryTooltip,children:e}),duration:(0,Z().rN)(a,n)}}),placement:B().W.Bottom,render:e=>(0,M.jsx)("div",{...e,children:(0,M.jsx)(ee().A,{style:r.redBadge,content:(0,M.jsx)(o().sA,{id:"adminContentSearch.pageStatusBadge.trash.deletionPending",defaultMessage:"Deleted from Trash soon"})})})}):"deleted_from_trash"===t?(0,M.jsx)(te().A,{renderTooltip:()=>(0,M.jsx)(o().sA,{id:"adminContentSearch.pageStatusBadge.deletionPending.perm.tooltip",defaultMessage:"<primary>Will be permanently deleted soon </primary> <secondary>Retained pages are permanently deleted after {duration}</secondary>",values:{primary:e=>(0,M.jsx)("div",{children:e}),secondary:e=>(0,M.jsx)("div",{style:r.secondaryTooltip,children:e}),duration:(0,Z().rN)(s,n)}}),placement:B().W.Bottom,render:e=>(0,M.jsx)("div",{...e,children:(0,M.jsx)(ee().A,{style:r.redBadge,content:(0,M.jsx)(o().sA,{id:"adminContentSearch.pageStatusBadge.perm.deletionPending",defaultMessage:"Permanently deleted soon"})})})}):null}var ne=()=>a(58293);var ie=()=>a(566468);function oe(e){let{deletedFromTrashTime:t}=e;const a=function(){const e=(0,ne().r)();return(0,n().K8)((()=>{const t=null==e?void 0:e.getModel();return(0,X().NA)(t)}),[e])}();if((0,z().O9)(t)){const e=t+a;return e>Date.now()?(0,M.jsx)(m().d,{dateTs:e,omitTooltip:!0}):(0,M.jsx)(te().A,{render:e=>(0,M.jsx)("div",{...e,children:(0,M.jsx)(ie().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,M.jsx)(o().sA,{defaultMessage:"N/A",id:"adminContentSearchTab.pagesTable.deletedTimeCell.notAvailable"})})}),renderTooltip:()=>(0,M.jsx)(o().sA,{defaultMessage:"This page is in process of being permanently deleted",id:"adminContentSearchTab.pagesTable.deletedTimeCell.beingPurged.tooltip"})})}return(0,M.jsx)(ie().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,M.jsx)(o().sA,{defaultMessage:"N/A",id:"adminContentSearchTab.pagesTable.deletedTimeCell.notAvailable"})})}var re=()=>a(773290);const le={id:"page",headerTitle:(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.page.name",defaultMessage:"Page"}),renderCell:e=>(0,M.jsx)(a(744766).oc,{blockStore:e.pageStore,rightIcon:(0,M.jsx)(Y,{blockStore:e.pageStore,pageStatus:e.pageStatus,getValidDeletedPermissions:e.filterDeletedPermissions,refreshSearchResult:e.refreshSearchResult}),inlineTitleContent:(0,M.jsx)(ae,{pageStatus:e.pageStatus,blockStore:e.pageStore})}),widthData:{width:320,maxWidth:320},sortable:!1},de={id:"location",headerTitle:(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.location.name",defaultMessage:"Location"}),renderCell:e=>(0,M.jsx)(a(421645).E,{blockStore:e.pageStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},ce={id:"createdTime",headerTitle:(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.createdTime.name",defaultMessage:"Created on"}),renderCell:e=>(0,M.jsx)(m().d,{dateTs:e.createdTime}),widthData:{width:140},sortable:!1},ue={id:"lastEditedTime",headerTitle:(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.name",defaultMessage:"Last edited on"}),renderCell:e=>(0,M.jsx)(a(738268).Z,{lastEditedTime:e.lastEditedTime,lastEditedById:e.lastEditedById,deletedFromTrashTime:e.deletedFromTrashTime,movedToTrashTime:e.movedToTrashTime,pageStatus:e.pageStatus}),widthData:{width:140},sortable:!1},ge={id:"createdBy",headerTitle:(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.createdBy.name",defaultMessage:"Created by"}),renderCell:e=>e.createdById?(0,M.jsx)(re().T,{blockStore:e.pageStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},me={id:"lastEditedBy",headerTitle:(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.lastEditedBy.name",defaultMessage:"Last edited by"}),renderCell:e=>e.lastEditedById?(0,M.jsx)(re().T,{blockStore:e.pageStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1};function pe(e){let{blockStore:t}=e;const s=(0,n().K8)((()=>a(351360).default.state.currentSpaceStore),[]);return s?(0,M.jsx)(a(592010).b,{blockStore:t,spaceStore:s}):null}const he={id:"audience",headerTitle:(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.audience.name",defaultMessage:"Audience"}),renderCell:e=>(0,M.jsx)(pe,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},fe={id:"sharedWith",headerTitle:(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.sharedWith.name",defaultMessage:"Shared with"}),renderCell:e=>(0,M.jsx)(a(604484).o,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},xe={id:"retainedUntil",headerTitle:(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.retainedUntil.name",defaultMessage:"Retained until"}),renderCell:e=>(0,M.jsx)(oe,{deletedFromTrashTime:e.deletedFromTrashTime}),widthData:{width:140},sortable:!1},ve={id:"pageStatus",headerTitle:(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.pageStatus.name",defaultMessage:"Page status"}),renderCell:e=>(0,M.jsx)(a(371895).u,{pageStatus:e.pageStatus}),widthData:{width:140},sortable:!1},ye=[le,de,he,fe,me,ue,ge,ce],be=[le,de,ve,xe,he,fe,me,ue,ge,ce];function Se(e){let{loading:t,error:a,loadNextPage:m,hasNextPage:h,filters:f,setFilters:x,pageStores:v,showSuggestions:y,runNewSearch:b,hasUserConfirmedAcknowledgement:S,refreshSearchResult:j,shouldShowLoadMore:w}=e;const A=S&&!t&&!y,T=S&&!y,k=(0,n().O$)(d().subscriptionDataStoreInstance),D=(0,l().T)({subscriptionData:k}),z=(0,s.useMemo)((()=>f.pageStatus.includes("deleted_from_trash")||f.pageStatus.includes("in_trash")||0===f.pageStatus.length),[f.pageStatus]),P=z?be:ye,N=(0,n().K8)((()=>v.map((e=>{const t=z&&e.pathIsDead()?e.pathHasDeletedPermission()?"deleted_from_trash":"in_trash":"alive";return{id:e.id,isClickable:!1,pageStore:e,teamStore:(0,r().Uo)(e),createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),pageStatus:t,movedToTrashTime:e.getMovedToTrashTime(),deletedFromTrashTime:"deleted_from_trash"===t?e.getDeletedFromTrashAt():void 0,filterDeletedPermissions:"deleted_from_trash"===t?D:void 0,refreshSearchResult:j}}))),[v,z,D,j]),R=(0,i().IS)((e=>(0,c().rC)({columnRenderInfo:P,theme:e,containerMarginTop:0})),[P]);return a?(0,M.jsx)(I().t,{runNewSearch:b,error:a}):S?y&&0===N.length?(0,M.jsx)(_,{filters:f,setFilters:x}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(c().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:w?void 0:400,columnRenderInfo:P,rows:N,loadMoreMethod:T?w?{type:"button",onLoadMore:m,hasNextPage:h}:{type:"scroll",onLoadMore:m}:void 0,renderNoRowsComponent:()=>(0,M.jsx)(p().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:A&&(0,M.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.empty",defaultMessage:"No pages found with your query."})}),styles:R}),t?(0,M.jsx)(u().fI,{justifyContent:"center",children:(0,M.jsx)(g().A,{style:{margin:"24px auto 24px"}})}):null]}):(0,M.jsx)(C,{})}},802042:(e,t,a)=>{a.d(t,{o:()=>r});var s=()=>a(484714),n=()=>a(187174),i=()=>a(534177),o=()=>a(449506);function r(e){const{organizationId:t,includeCountsPerDomain:a}=e,r=(0,s().v3)(),[{status:l,value:d}]=(0,n().Yb)((async()=>{if(!t)return;const e=await o().callApi({eventName:"getVerifiedUsersCountForOrganization",environment:r,data:{organizationId:t,includeCountsPerDomain:a}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,i().HB)(e)}),[r,t,a]);return{loading:"pending"===l,didError:"rejected"===l,count:d}}},803418:(e,t,a)=>{a.d(t,{O:()=>n,q:()=>s});const s=20,n=25},803960:(e,t,a)=>{a.d(t,{g:()=>n});a(296540);const s={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M9.558 13.442c.244.244.64.244.884 0l5.4-5.4a.625.625 0 1 0-.884-.884L10 12.116 5.042 7.158a.625.625 0 0 0-.884.884z"})},n=(0,a(340498).wt)("arrowChevronSingleDown",s)},804059:(e,t,a)=>{a.d(t,{W:()=>n});a(296540);const s={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M4 11.75a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5m6 0a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5m6 0a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5"})},n=(0,a(340498).wt)("ellipsisFill",s)},806754:(e,t,a)=>{a.d(t,{A:()=>n});a(296540);var s=a(474848);const n=function(e){const t={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}},{title:n,marginAfter:i,desktopStyle:o,desktopTitleStyle:r,...l}=e,d=(i||o)&&{...i&&t.marginAfter,...o},c=r?{...t.desktopTitleStyle,...r}:t.desktopTitleStyle;return(0,s.jsx)(a(89924).A,{disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:d,desktopTitleStyle:c,shouldShowBottomDivider:!1,title:n,...l})}},807106:(e,t,a)=>{a.d(t,{C:()=>p,_:()=>m});var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(187174),r=()=>a(436604),l=()=>a(534177),d=()=>a(449506),c=()=>a(646736),u=()=>a(511303);const g={activeMembersCount:0,previousActiveMembersCount:0,activeGuestsCount:0,previousActiveGuestsCount:0,topTeamspaces:[],topViewers:[],topEditors:[]};function m(e){let{spaceStore:t,userId:a,isOrganizationOwner:n}=e;const[i,o]=(0,s.useState)("last_90_days");return{...p({spaceStore:t,userId:a,isOrganizationOwner:n,daysFilter:i}),daysFilter:i,setDaysFilter:o}}function p(e){let{spaceStore:t,userId:a,isOrganizationOwner:m,daysFilter:p}=e;const h=(0,n().v3)(),{updateCacheWithRecordMap:f}=(0,s.useContext)(u().N),x=(0,i().K8)((()=>t.id),[t]),v=(0,i().K8)((()=>Boolean(t&&a&&(0,c().dp)(t,a).isWorkspaceOwner())),[t,a]),[{status:y,value:b,error:S}]=(0,o().Yb)((async()=>{if(!a||!(m||v))return g;const e=await d().callApi({eventName:"getUserEngagementAnalytics",environment:h,data:{spaceId:x,daysFilter:p},headers:{[r().B3]:x}});switch(e.type){case"success":return f(e),{activeMembersCount:e.data.activeMembersCount,previousActiveMembersCount:e.data.previousActiveMembersCount,activeGuestsCount:e.data.activeGuestsCount,previousActiveGuestsCount:e.data.previousActiveGuestsCount,topTeamspaces:e.data.topTeamspaces,topViewers:e.data.topViewers,topEditors:e.data.topEditors};case"failed":throw e.body;default:(0,l().HB)(e)}}),[h,a,x,p,v,m,f]);return{data:(0,s.useMemo)((()=>b||g),[b]),loading:"pending"===y||"idle"===y,error:S}}},809730:(e,t,a)=>{a.d(t,{e:()=>r});var s=()=>a(534177),n=()=>a(597777);var i=()=>a(807778),o=()=>a(10984);function r(e){var t;let{billingData:a}=e;return function(e){let{subscriptionTier:t,subscriptionCreatedAtTime:a,useLegacyBehavior:i}=e;return"enterprise"===t||!("plus"!==t||!i)&&(0,s().O9)(a)&&a<n().fQ}({subscriptionTier:(0,o().AI)(),subscriptionCreatedAtTime:null==a||null===(t=a.subscription)||void 0===t||null===(t=t.startDate)||void 0===t?void 0:t.toMillis(),useLegacyBehavior:!(0,i().hG)()})}},812941:(e,t,a)=>{a.d(t,{A:()=>g});a(296540);var s=()=>a(401497),n=()=>a(959013),i=()=>a(534177),o=()=>a(690197),r=()=>a(836251),l=()=>a(265665),d=a(474848);function c(e){switch(e){case"bestPractices":return(0,r().xS)("guides.teamspacesLearnMore");case"workspaceOwnerGuide":return(0,r().xS)("guides.teamspacesWorkspaceOwner");case"settingsAndPermissions":return(0,r().xS)("guides.teamspacesSettingsAndPermissions");default:return(0,i().HB)(e)}}function u(e){return e||(0,d.jsx)(l().j,{children:(0,d.jsx)(n().sA,{defaultMessage:"Learn about teamspaces",id:"teamsLearnMoreLink"})})}function g(e){let{onClick:t,message:a,helpCenterLocation:n,analyticsFrom:i,containerStyle:r}=e;const l=(0,s().IS)((()=>({button:{maxWidth:"100%"}})),[]);return(0,d.jsx)("div",{style:r,children:(0,d.jsx)(o().A,{buttonStyle:l.button,title:u(a),analyticsFrom:i,href:c(n),onClick:t})})}},815756:(e,t,a)=>{a.d(t,{e:()=>U});a(898992),a(672577);var s=a(296540),n=()=>a(401497),i=()=>a(340498),o=a(474848);const r={viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M10.875 2.924c0-.441-.392-.799-.875-.799s-.875.358-.875.799v11.964L5.219 10.98a.875.875 0 0 0-1.239 1.24l5.4 5.4a.875.875 0 0 0 1.238 0l5.4-5.4a.875.875 0 1 0-1.238-1.238l-3.906 3.907z"})},l=(0,i().wt)("arrowStraightDownFill",r),d={viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M10.619 2.381a.875.875 0 0 0-1.238 0l-5.4 5.4A.875.875 0 0 0 5.22 9.02l3.906-3.907V17.05c0 .456.392.826.875.826s.875-.37.875-.826V5.112l3.906 3.907A.875.875 0 1 0 16.02 7.78z"})},c=(0,i().wt)("arrowStraightUpFill",d);var u=()=>a(582684),g=()=>a(959013),m=()=>a(56394),p=()=>a(406699),h=()=>a(14235),f=(a(354520),a(581454),()=>a(617668)),x=()=>a(236262),v=()=>a(534177),y=()=>a(722872),b=()=>a(760217),S=()=>a(439264),j=()=>a(928600),w=()=>a(554509),A=()=>a(89924),M=()=>a(244149),C=()=>a(846141),I=()=>a(541558),T=()=>a(678553),k=()=>a(933117),_=()=>a(272630),D=()=>a(992510),z=()=>a(490094);function P(e){let{sort:t,sortProperties:a,onChange:s,currentSorts:i}=e;const r=(0,n().IS)((()=>({sortRow:{display:"flex",alignItems:"center",flexGrow:1,whiteSpace:"nowrap"},section:{padding:"8px 0 0 8px",width:"100%"}})),[]);if(!t)return null;return(0,o.jsx)(A().A,{extraTopPadding:!0,style:r.section,children:(0,o.jsx)(T().A,{showDragHandle:!0,title:(0,o.jsxs)("div",{style:r.sortRow,children:[(0,o.jsx)(R,{currentPropertyId:t.propertyId,sortProperties:a,currentSorts:i,onChange:s}),(0,o.jsx)(N,{sort:t,currentSorts:i,onChange:s})]}),right:(0,o.jsx)(C().B,{onDeleteClick:()=>{const e=i.filter((e=>{let{propertyId:a}=e;return a!==(null==t?void 0:t.propertyId)}));s(e)}}),rightStyle:{marginRight:19}})})}function N(e){let{sort:t,onChange:a,currentSorts:s}=e;const n=(0,g().tz)(),i=t.direction;return(0,o.jsx)(k().A,{menuTitle:n.formatMessage(I().CL.menuTitle),items:[...M().FU],selectedItem:i,onSelect:e=>{const n=s.map((a=>a.propertyId===t.propertyId?{...a,direction:e}:a));a(n)},getKey:e=>e,renderItem:e=>(0,o.jsx)(b().A,{title:I().bL[e.value],...e}),renderOrigin:e=>(0,o.jsx)(_().A,{...e,placeholder:n.formatMessage(I().CL.emptyPlaceholder),title:i&&I().bL[i],desktopStyle:{opacity:1}})},"direction")}function R(e){let{currentPropertyId:t,sortProperties:a,currentSorts:s,onChange:n}=e;const i=a.find((e=>e.id===t));return i?(0,o.jsx)(p().Ay,{popupType:p().z7.Popup,renderOrigin:e=>(0,o.jsx)(D().A,{...e,disabled:s.length===a.length,propertySchema:i,textWrapperStyle:{opacity:1}}),render:e=>{let{close:i}=e;return(0,o.jsx)(z().J,{onClick:e=>{(e=>{const a=s.map((a=>a.propertyId===t?{propertyId:e,direction:a.direction}:a));n(a)})(e),i()},currentSorts:s,sortProperties:a})}}):null}function B(e){let{sortProperties:t,currentSorts:a,onChange:s,preventMultipleSorts:n}=e;const i=a.map((e=>e.propertyId));return(0,o.jsxs)(j().A,{menuType:y().gu.Popup,minWidth:320,children:[(0,o.jsx)(S().Ay,{direction:"vertical",keys:i,renderKey:e=>(0,o.jsx)(P,{sortProperties:t,onChange:s,currentSorts:a,sort:a.find((t=>t.propertyId===e))}),onDrop:e=>function(e,t,a){const s=e.map((e=>a.find((t=>t.propertyId===e)))).filter(v().O9);t(s)}(e,s,a)}),(0,o.jsxs)(A().A,{children:[n?null:(0,o.jsx)(L,{sortProperties:t,currentSorts:a,onChange:s}),(0,o.jsx)(E,{currentSorts:a,onChange:s})]})]})}function L(e){let{sortProperties:t,currentSorts:a,onChange:s}=e;const n=O();if(!(a.length<t.length))return null;return(0,o.jsx)(p().Ay,{popupType:h().nl.Popup,renderOrigin:e=>(0,o.jsx)(b().A,{focused:!1,icon:(0,f().plusIcon)(n.icon),title:(0,o.jsx)(w().D,{colorName:"secondary",children:(0,o.jsx)(g().sA,{id:"database.viewSettings.sortTab.newSort",defaultMessage:"Add sort"})}),...e}),render:e=>{let{close:n}=e;return(0,o.jsx)(z().J,{sortProperties:t,currentSorts:a,onClick:e=>{s([...a,{propertyId:e,direction:"ascending"}]),n()}})}})}function E(e){let{currentSorts:t,onChange:a}=e;const s=O();return t.length>0?(0,o.jsx)(b().A,{focused:!1,icon:(0,x().I)(s.icon),title:(0,o.jsx)(w().D,{colorName:"secondary",children:(0,o.jsx)(g().sA,{id:"database.viewSettings.sortTab.deleteAllSorts",defaultMessage:"Delete sort"})}),onClick:()=>a([])}):null}function O(){return(0,n().IS)((e=>({icon:{width:24,height:16,marginRight:-2,fill:e.mediumIconColor}})),[])}function U(e){const{currentSorts:t,isMenuOpen:a,setIsMenuOpen:i,sortProperties:r,onApply:d,preventMultipleSorts:f}=e,x=(0,n().IS)((e=>({sortDirectionIcon:{width:12,height:22,marginRight:6,fill:"currentColor"},multiSortIcon:{width:16,height:22,marginRight:6,fill:"currentColor"},empty:{height:24}})),[]),[v,y]=(0,s.useState)(t.length?t:void 0),b=v??t;let S,j;if(1===b.length){var w;const e=b[0];S="ascending"===e.direction?c(x.sortDirectionIcon):l(x.sortDirectionIcon),j=null===(w=r.find((t=>t.id===e.propertyId)))||void 0===w?void 0:w.name}else S=(0,u().C)(x.multiSortIcon),j=(0,o.jsx)(g().sA,{defaultMessage:"{sortCount} sorts",id:"settingsConsoleSortButton.multiSorts.label",values:{sortCount:b.length}});const A=b.length||a?(0,o.jsx)(m().A,{on:b.length>0,icon:S,title:j,onClick:()=>i(!0)}):(0,o.jsx)("div",{style:x.empty});return(0,o.jsx)(h().Ay,{popupType:p().z7.Popup,open:a,origin:A,onDismiss:()=>{d(b),y(void 0),i(!1)},originGap:4,render:()=>(0,o.jsx)(B,{...e,preventMultipleSorts:b.length>0&&f,onChange:y,currentSorts:b})})}},817863:(e,t,a)=>{a.d(t,{ng:()=>F,Nt:()=>U,tv:()=>O,$:()=>E});a(898992),a(672577),a(581454);var s=a(296540),n=()=>a(96689),i=()=>a(625319),o=()=>a(303129),r=()=>a(56366),l=()=>a(401497),d=()=>a(416504),c=()=>a(278238),u=()=>a(972435),g=()=>a(614505),m=()=>a(142448),p=()=>a(534177),h=()=>a(364280),f=()=>a(710149),x=()=>a(554509),v=()=>a(566468),y=()=>a(47095),b=()=>a(480795),S=()=>a(725036),j=()=>a(27198),w=()=>a(325020),A=()=>a(653088),M=a(474848);const C=24,I=24;function T(e){switch(e.type){case"workspace":return(0,M.jsx)(D,{spaceStore:e.store});case"team":return(0,M.jsx)(_,{teamStore:e.store});case"external_workspace":return(0,M.jsx)(z,{name:e.name,icon:e.icon});case"block":return(0,M.jsx)(P,{blockStore:e.store});default:(0,p().HB)(e)}}function k(e){let{iconCellInfoArray:t}=e;const a=(0,l().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:4}})),[]);return(0,M.jsx)("div",{style:a.container,children:t.map((e=>T(e)))})}function _(e){var t;const{teamStore:a}=e,s=N(),n=(0,y().Z)(),{name:i,icon:o}=(0,r().K8)((()=>({name:a.getName(),icon:a.getIcon()})),[a]),l=(0,r().K8)((()=>a.getSpaceId()??""),[a]),d=(0,r().K8)((()=>[l]),[l]),{teamAggregateDataForSpace:c,loading:u}=(0,b().N)(d),m=(null==c||null===(t=c[l])||void 0===t||null===(t=t[a.id])||void 0===t?void 0:t.memberCount)??0;return(0,M.jsx)("div",{style:s.container,children:(0,M.jsx)(v().s7,{title:(0,M.jsx)("span",{style:s.primaryOnDarkBackground,children:i}),icon:(0,M.jsx)(g().A,{size:C,emojiSize:I,disabled:!0,icon:o,isEmptyPage:!1,title:i,isLarge:!0,isRaw:!1}),iconSize:C,byline:u?(0,M.jsx)(f().A,{style:n.shortShimmer}):(0,M.jsx)(x().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:s.secondaryOnDarkBackground,children:(0,M.jsx)(j().Qq,{memberCount:m})})})})}function D(e){var t;const{spaceStore:a}=e,s=N(),{name:n,icon:i}=(0,r().K8)((()=>({name:a.getName(),icon:a.getIcon()})),[a]),o=(0,r().K8)((()=>[a.id]),[a]),{teamStores:l,loading:d}=(0,S().o)(o);return(0,M.jsx)("div",{style:s.container,children:(0,M.jsx)(v().s7,{title:(0,M.jsx)("span",{style:s.primaryOnDarkBackground,children:n}),icon:(0,M.jsx)(g().A,{size:C,emojiSize:I,disabled:!0,icon:i,isEmptyPage:!1,title:n,isLarge:!0,isRaw:!1}),iconSize:C,byline:(0,M.jsx)(A().i,{spaceId:a.id,teamCount:(null===(t=l[a.id])||void 0===t?void 0:t.length)??0,loading:d,styles:s.secondaryOnDarkBackground})})})}function z(e){const{name:t,icon:a}=e,s=N();return(0,M.jsx)("div",{style:s.container,children:(0,M.jsx)(v().s7,{title:(0,M.jsxs)(h().fI,{gap:8,children:[t,(0,M.jsx)(w().YM,{content:"External"})]}),icon:(0,M.jsx)(g().A,{size:C,emojiSize:I,disabled:!0,icon:a,isEmptyPage:!1,title:t,isLarge:!0,isRaw:!1}),iconSize:C})})}function P(e){const{blockStore:t}=e,a=(0,r().K8)((()=>{const e=null==t?void 0:t.getModel();if(e&&t)return e.getRenderIcon({getRecordModel:t.getRecordModel})}),[t]),{pageTitle:s,placeholderTitle:n}=(0,r().K8)((()=>{const e=null==t?void 0:t.getModel();return e&&t?{pageTitle:e.getRenderTitle({getRecordModel:t.getRecordModel,userTimeZone:(0,d().P)(),intl:u().A.getIntl()}),placeholderTitle:e.getEmptyTitlePlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,d().P)(),intl:u().A.getIntl()})}:{}}),[t]),i=N();return(0,M.jsx)("div",{style:i.container,children:(0,M.jsx)(v().s7,{title:s||n,icon:(0,M.jsx)(g().A,{icon:a,size:I,isEmptyPage:!1,disabled:!0}),iconSize:I})})}function N(){return(0,l().IS)((e=>({container:{width:250},primaryOnDarkBackground:{color:"dark"===e.mode?e.primaryBlack:e.white},secondaryOnDarkBackground:{color:"dark"===e.mode?e.primaryBlack:e.white,opacity:.8}})),[])}const R=2;function B(e){const{iconCellInfoArray:t,totalCount:a,showTooltip:s,isLoading:n}=e,i=(0,r().K8)((()=>t.sort(((e,t)=>{if("block"===e.type||"block"===t.type)return 0;const a="external_workspace"===e.type?e.name:e.store.getName(),s="external_workspace"===t.type?t.name:t.store.getName();return a||s?a&&!s?-1:!a&&s?1:a.localeCompare(s):0}))),[t]),o=(0,r().K8)((()=>i.map((e=>({renderAvatar:()=>(0,M.jsx)(L,{iconCellInfo:e}),renderTooltip:s?()=>T(e):void 0})))),[i,s]);return(0,M.jsx)(m().Qp,{avatars:o,totalCount:a,renderOverflowTooltip:s?()=>(0,M.jsx)(k,{iconCellInfoArray:i}):void 0,isLoading:n})}function L(e){const{iconCellInfo:t}=e,{name:a,icon:s}=(0,r().K8)((()=>{if("block"===t.type){const e=t.store.getModel();return e?{name:e.getRenderTitle({getRecordModel:t.store.getRecordModel,userTimeZone:(0,d().P)(),intl:u().A.getIntl()}),icon:e.getRenderIcon({getRecordModel:t.store.getRecordModel})}:{name:"",icon:void 0}}return"external_workspace"===t.type?{name:t.name,icon:t.icon}:{name:t.store.getName(),icon:t.store.getIcon()}}),[t]),n=(0,l().IS)((e=>({icon:{borderRadius:5,marginRight:-R,border:`${R}px solid ${e.modalBackground}`,display:"flex",alignItems:"center",justifyContent:"center",height:m().tR+2*R,width:m().tR+2*R,background:s&&(0,c().T8)(s.icon)?(0,c().ez)({icon:s.icon,mode:e.mode,useLightGrayColor:!1}):e.accentColors.gray[75],zIndex:2,position:"relative"},iconContainer:{position:"relative"},iconBackground:{position:"absolute",top:0,bottom:0,left:0,right:0,background:e.contentBackground,zIndex:1}})),[s]);return(0,M.jsxs)("div",{style:n.iconContainer,children:[(0,M.jsx)("div",{style:n.icon,children:(0,M.jsx)(g().A,{size:m().tR,emojiSize:m().Gz,disabled:!0,icon:s,isEmptyPage:!1,title:"block"===t.type?void 0:a,isLarge:"block"!==t.type,isRaw:!1})}),(0,M.jsx)("div",{style:n.iconBackground})]})}function E(e){const{spaceStores:t,totalCount:a,showTooltip:s,isLoading:n}=e;return(0,M.jsx)(B,{iconCellInfoArray:t.map((e=>({type:"workspace",store:e}))),totalCount:a,showTooltip:s,isLoading:n})}function O(e){const{teamStores:t,totalCount:a,isLoading:s,showTooltip:n}=e;return(0,M.jsx)(B,{iconCellInfoArray:t.map((e=>({type:"team",store:e}))),totalCount:a,showTooltip:n,isLoading:s})}function U(e){const{workspaces:t,totalCount:a,showTooltip:r}=e,{spaceIds:l}=(0,s.useContext)(i().D),d=(0,o().l)(l),c=t.map((e=>l.includes(e.id)?{type:"workspace",store:d.find((t=>t.id===e.id))}:{type:"external_workspace",name:e.name??"",icon:e.icon?{pointer:{table:n().NX,id:e.id},icon:e.icon}:void 0}));return(0,M.jsx)(B,{iconCellInfoArray:c,totalCount:a,showTooltip:r,isLoading:!1})}function F(e){const{blockStores:t,totalCount:a,showTooltip:s,isLoading:n}=e;return(0,M.jsx)(B,{iconCellInfoArray:t.map((e=>({type:"block",store:e}))),totalCount:a,showTooltip:s,isLoading:n})}},818211:(e,t,a)=>{a.d(t,{Av:()=>n,NK:()=>r,Rx:()=>o,eG:()=>i,t_:()=>l});var s=()=>a(322769);function n(e,t){if(void 0!==e&&(0,s().me)(e))return!1;const a=(0,s().kF)(e)||(0,s().zq)(e);return!(void 0===e||!a||0!==t)||1===t}function i(e){return e.memberCount>1}function o(e){return!i(e)}function r(e){return Boolean(e.spaceRequest)}function l(e){return"free"!==e.subscriptionTier}},820579:(e,t,a)=>{a.d(t,{f:()=>n});a(296540);const s={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M10 2.4c.345 0 .625.28.625.625v9.966l3.333-3.333a.625.625 0 1 1 .884.884l-4.4 4.4a.625.625 0 0 1-.884 0l-4.4-4.4a.625.625 0 0 1 .884-.884l3.333 3.333V3.025c0-.345.28-.625.625-.625M4.15 16.35a.625.625 0 1 0 0 1.25h11.7a.625.625 0 0 0 0-1.25z"})},n=(0,a(340498).wt)("arrowLineDown",s)},821879:(e,t,a)=>{a.d(t,{C:()=>P,A:()=>N});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(484714),i=()=>a(401497),o=()=>a(959013),r=()=>a(496603),l=()=>a(115512),d=()=>a(962730),c=()=>a(377586),u=()=>a(493823),g=()=>a(760217),m=()=>a(14235),p=()=>a(204063),h=()=>a(89924),f=()=>a(978625),x=()=>a(56366),v=()=>a(857639),y=()=>a(229833),b=()=>a(722872),S=()=>a(970585),j=()=>a(939740),w=()=>a(64e3),A=()=>a(45552),M=()=>a(856952),C=a(474848);const I={menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}};const T=function(e){let{labelText:t,value:i,renderResultMenuItem:o,onConfirm:r,items:l,performRequest:d,onDismiss:c,onChange:u,renderToken:g,onRemove:m,onClear:p,disabled:h}=e;const f=(0,n().v3)(),v=(0,x().uB)(void 0,S().A),y=(0,x().uB)(void 0,a(40851).A),[b,j]=(0,a(857437).$)(),w=(0,s.useCallback)(((e,a,s)=>(0,C.jsx)(z,{error:e,data:a,ready:s,labelText:t,value:i,renderResultMenuItem:o,onConfirm:r,menuListStore:v,comboboxProps:j})),[t,i,o,r,v,j]),A={query:i,current:l};return(0,C.jsx)(a(928600).A,{...D(f,c,t,i,l,u,g,m,p,h,b),children:(0,C.jsx)(a(251126).A,{debounce:100,requestStore:y,request:A,performRequest:d,render:w})})};function k(e){const{device:t}=e;return t.isMobile}function _(e){let{labelText:t,value:a,items:s,disabled:i,onChange:o,renderToken:l,onRemove:d,onClear:c,inputComboboxProps:u}=e;const g=(0,n().v3)(),m=s.map((e=>l(e,{onRemove:()=>d(e)})));return(0,C.jsx)(h().A,{isInput:!0,children:(0,C.jsx)("div",{style:{padding:"4px 8px"},children:(0,C.jsx)(M().Ay,{focus:!k(g)||void 0,focusAfterAnimation:!0,format:M().le.FilterValue,tokens:m,placeholder:t.tokenInputPlaceholder,onRemoveLastToken:()=>function(e,t){const a=r().HV(e);a&&t(a)}(s,d),onClearButtonClick:c,value:a,onChange:o,showClearButton:!0,disabled:Boolean(i),style:I.inputMenu,...u})})})}function D(e,t,a,s,n,i,o,r,l,d,c){if(k(e)){return{menuType:b().gu.Modal,title:a.title,right:(0,C.jsx)(A().DoneMenuText,{}),onClickRight:t,header:(0,C.jsx)(_,{labelText:a,value:s,items:n,disabled:d,onChange:i,renderToken:o,onRemove:r,onClear:l,inputComboboxProps:c})}}return{menuType:b().gu.Popup,onClickOutside:t,header:(0,C.jsx)(_,{labelText:a,value:s,items:n,disabled:d,onChange:i,renderToken:o,onRemove:r,onClear:l,inputComboboxProps:c}),...I.menu}}function z(e){let{error:t,data:a,ready:n,labelText:i,value:r,renderResultMenuItem:l,onConfirm:d,menuListStore:c,comboboxProps:u}=e;const g=(0,x().uB)(c,S().A),m=(0,s.useCallback)((e=>(0,C.jsx)(h().A,{...e,title:i.resultSectionTitle,loading:!n})),[i,n]);if(t)return v().log({level:"error",from:i.componentDebugName,type:"requestFailed",error:(0,y().n6)(t),data:{miscDataToConvertToString:{query:r}}}),(0,C.jsx)(m,{children:(0,C.jsx)(w().A,{title:(0,C.jsx)(o().sA,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!a)return(0,C.jsx)(m,{children:(0,C.jsx)(w().A,{title:(0,C.jsx)(o().sA,{defaultMessage:"Loading…",id:"search.inputMenu.loading.message"})})});if(a&&0===a.length)return(0,C.jsx)(m,{children:(0,C.jsx)(w().A,{title:(0,C.jsx)(o().sA,{defaultMessage:"No results found.",id:"search.inputMenu.noResults.message"})})});const p={key:"results",items:a.map((e=>function(e,t,a){return{key:e,action:()=>a(e),render:a=>t(e,a)}}(e,l,d))),render:m};return(0,C.jsx)(j().Ay,{type:j().Oh.Vertical,store:g,initialFocus:0,sections:[p],comboboxProps:u})}let P=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});function N(e){const{items:t,keepInputOnItemConfirm:a,mode:i,onChange:o,onMenuDismiss:l,onMenuOpen:d}=e,{device:c}=(0,n().v3)(),u=(0,s.useRef)(),g=(0,s.useRef)(null),[m,p]=(0,s.useState)(!1),[h,f]=(0,s.useState)(""),[x,v]=(0,s.useState)(void 0),[y,b]=(0,s.useState)(void 0);function S(e,t){u.current=requestAnimationFrame((e=>{if(g&&g.current&&(b(g.current.getBoundingClientRect()),t)){const{shouldOpenMenu:e,nextIndexToReplace:a}=t;e&&(p(!0),v(a))}}))}(0,s.useEffect)((()=>(window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S),u.current&&(cancelAnimationFrame(u.current),u.current=void 0)})),[]);const j=t.length;function w(e){M(),p(!1),v(void 0),null==l||l(e)}function A(e){f(e.target.value)}function M(){f("")}function I(){o([])}const T=(0,s.useCallback)((e=>{const a=t.filter((t=>t!==e));o(a)}),[t,o]),k=(0,s.useCallback)((e=>{if("number"==typeof x&&x<t.length){const a=t.slice(0,x).concat(e,t.slice(x+1));o(a)}else if(t.includes(e)&&P.Pill)T(e);else{const a=t.concat(e);o(r().sb(a))}a||M()}),[T,x,t,a,o]);return(0,s.useEffect)((()=>{S()}),[j,i]),c.isMobile?(0,C.jsx)(H,{inputTemporaryValue:h,isMenuOpen:m,onClearInput:M,onClearItems:I,onItemConfirm:k,onMenuClose:w,onMenuInputChange:A,onMenuOpen:function(){p(!0)},onRemove:T,searchTokenFilterProps:e}):(0,C.jsx)(L,{hasItemsSelected:i===P.Pill&&e.hasItemsSelected,inputTemporaryValue:h,isMenuOpen:m,onClearInput:M,onClearItems:I,onItemConfirm:k,onMenuClose:w,onMenuInputChange:A,onMenuOpen:function(e){null==d||d(),S(0,{shouldOpenMenu:!0,nextIndexToReplace:e})},onRemove:T,popupOriginRect:y,ref:g,searchTokenFilterProps:e})}function R(e){return{buttonMenuItem:{color:e.mediumTextColor},appendListItemButton:{color:e.lightTextColor}}}function B(e,t){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:l().ny(e,"UIRegular")},icon:{height:16,width:16,marginRight:"Pill"===t?6:-2,fill:"currentColor"},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}const L=(0,s.forwardRef)((function(e,t){const{hasItemsSelected:i,inputTemporaryValue:o,isMenuOpen:r,onClearInput:l,onClearItems:u,onItemConfirm:g,onMenuClose:p,onMenuInputChange:h,onMenuOpen:f,onRemove:x,popupOriginRect:v,searchTokenFilterProps:y}=e,{addItemLabel:b,disabled:S,focused:j,icon:w,iconStyles:A,items:M,mode:I,renderFilter:T,title:k}=y,_=(0,n().v3)(),D=S||r,z=(0,s.useCallback)((()=>{f()}),[f]);return(0,C.jsxs)(a(806754).A,{title:I===P.Section?k:void 0,marginAfter:I===P.Section,style:B(_,I).sectionMenuItem,children:[I!==P.Pill&&(0,C.jsx)(E,{disableFilters:D,items:M,onClick:f,onRemove:x,renderFilter:T}),I===P.Section?(0,C.jsx)(O,{addItemLabel:b,disabled:S,isMenuOpen:r,mode:I,onClick:z,ref:t}):I===P.Button?(0,C.jsx)(U,{disabled:S,focused:j,icon:w,isMenuOpen:r,mode:I,onClick:z,ref:t,title:k}):I===P.Pill?(0,C.jsx)(F,{disabled:S,hasItemsSelected:i,icon:w,iconStyles:A,onClick:z,ref:t,title:k}):void(0,a(534177).HB)(I),(0,C.jsx)(m().Ay,{alignmentToOrigin:d().C.Start,keepFocus:!0,onDismiss:p,open:r,originRect:v,placementToOrigin:d().W.Bottom,popupType:c().n.Popup,preventScaleTransition:!0,render:()=>(0,C.jsx)(W,{searchTokenFilterProps:y,inputTemporaryValue:o,onMenuInputChange:h,onClearInput:l,onClearItems:u,onItemConfirm:g,onMenuClose:p,onRemove:x}),trapFocus:!0})]})}));function E(e){const{disableFilters:t,items:a,onClick:n,onRemove:i,renderFilter:o}=e,r=(0,s.useMemo)((()=>a.map(((e,a)=>(0,C.jsx)("li",{children:o(e,{disabled:t,onClick:()=>n(a),onRemove:()=>i(e)})},`${e}_${a}`)))),[t,a,n,i,o]);return(0,C.jsx)("ul",{style:l().$t,children:r})}const O=(0,s.forwardRef)((function(e,t){const{addItemLabel:s,disabled:o,isMenuOpen:r,mode:l,onClick:d}=e,c=B((0,n().v3)(),l),u=(0,i().IS)(R,[R]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{ref:t,style:c.menuItemWrapper}),(0,C.jsx)(g().A,{disabled:o||r,focused:!1,icon:(0,a(689094).W)(c.iconSmall),onClick:d,style:{...c.appendListItemButton,...u.appendListItemButton},title:s})]})})),U=(0,s.forwardRef)((function(e,t){const{disabled:a,focused:s,icon:o,isMenuOpen:r,mode:l,onClick:d,title:c}=e,u=B((0,n().v3)(),l),m=(0,i().IS)(R,[R]),p={...u.menuItem,...m.buttonMenuItem};return(0,C.jsx)("div",{ref:t,style:u.menuItemWrapper,children:(0,C.jsx)(g().A,{disabled:a||r,focused:s,icon:o(u.icon),onClick:d,style:p,title:c})})})),F=(0,s.forwardRef)((function(e,t){const{disabled:s,hasItemsSelected:i,icon:o,iconStyles:r,onClick:l,title:d}=e,c=B((0,n().v3)(),P.Pill);return(0,C.jsx)("div",{ref:t,style:c.menuItemWrapper,children:(0,C.jsx)(a(56394).A,{on:i,icon:o({...c.icon,...r}),title:(0,C.jsx)("span",{children:d}),onClick:l,wrapStyle:{opacity:s?.4:1}})})}));function V(e){const{disableFilters:t,items:a,mode:s,onClickClear:i,onMenuOpen:o,renderItemForSummary:r,title:d}=e,c=B((0,n().v3)(),s),u={...l().$t,...c.summary},g=a.length-1,m=(0,C.jsx)("ul",{style:u,children:a.map(((e,t)=>(0,C.jsxs)("li",{style:c.summaryItem,children:[r(e),t!==g&&","," "]},e)))});return(0,C.jsx)(f().A,{disabled:t,label:d,onClick:o,onClickClear:i,title:m})}function H(e){const{inputTemporaryValue:t,isMenuOpen:a,onClearInput:s,onClearItems:i,onItemConfirm:o,onMenuClose:r,onMenuInputChange:l,onMenuOpen:d,onRemove:u,searchTokenFilterProps:p}=e,{mode:h,disabled:f,title:x,items:v,renderItemForSummary:y,icon:b}=p,S=B((0,n().v3)(),h),j=f||a,w=h===P.Section?(0,C.jsx)(V,{disableFilters:j,items:v,mode:h,onClickClear:i,onMenuOpen:d,renderItemForSummary:y,title:x}):(0,C.jsx)(g().A,{disabled:j,focused:!1,icon:b({...S.icon}),onClick:d,title:x});return(0,C.jsx)(m().Ay,{keepFocus:!0,onDismiss:r,open:a,origin:w,popupType:c().n.SlideUp,render:()=>(0,C.jsx)(W,{inputTemporaryValue:t,onClearInput:s,onClearItems:i,onItemConfirm:o,onMenuClose:r,onMenuInputChange:l,onRemove:u,searchTokenFilterProps:p})})}function W(e){const{inputTemporaryValue:t,onClearInput:a,onClearItems:s,onItemConfirm:n,onMenuClose:i,onMenuInputChange:r,onRemove:l,searchTokenFilterProps:d}=e,{renderToken:c,renderFooter:g,allowApplyBatchSelection:m}=d;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T,{...d,onChange:r,onClear:()=>{a(),s()},onConfirm:n,onDismiss:i,onRemove:l,renderToken:c,value:t}),g&&(0,C.jsxs)(h().A,{style:{padding:6,justifyContent:"space-between",display:"flex",flexDirection:"row"},topBorder:!0,children:[(0,C.jsx)(u().p,{onClick:s,children:(0,C.jsx)(o().sA,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),m&&(0,C.jsx)(p().A,{onClick:()=>{i("applyButton")},children:(0,C.jsx)(o().sA,{defaultMessage:"Apply",id:"searchTokenFilter.applyButton"})})]})]})}},826658:(e,t,a)=>{a.d(t,{K:()=>l});a(296540);var s=()=>a(401497),n=()=>a(820579),i=()=>a(959013),o=()=>a(285790),r=a(474848);function l(e){const t=(0,i().tz)(),a=(0,s().IS)((e=>({icon:{width:21,height:void 0,fill:e.mediumTextColor},button:{display:"flex",alignItems:"center",fontSize:14,height:28,width:28,padding:6,color:e.mediumTextColor,fill:e.mediumIconColor,lineHeight:1,borderRadius:4}})),[]);return(0,r.jsx)(o().A,{ariaLabel:t.formatMessage({id:"organization.shared.table.exportButton.label",defaultMessage:"Export content"}),icon:n().f,iconStyle:a.icon,style:a.button,onClick:e.onClick,disabled:e.disabled,disabledFeedback:e.disabled,disableBackground:e.disabled})}},829351:(e,t,a)=>{a.d(t,{V:()=>u});a(296540);var s=()=>a(662303),n=()=>a(401497),i=()=>a(869190),o=()=>a(959013),r=()=>a(859428),l=()=>a(125565),d=()=>a(962730),c=a(474848);function u(e){const{auditLogEntry:t,id:a}=e,u=(0,n().IS)((()=>({container:{display:"block",width:"100%"}})),[]);return(0,c.jsx)(r().A,{renderTooltip:()=>(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column",fontVariantNumeric:"tabular-nums"},children:(0,c.jsx)("div",{children:(0,c.jsx)(o().sA,{id:"auditLogSettings.timeTooltip.utcTime",defaultMessage:"UTC: {time}",values:{time:(0,i().qV)(t.serverTimestamp)}})})}),render:e=>(0,c.jsx)("div",{id:a,style:u.container,children:(0,c.jsx)(l().A,{isSecondaryColor:!0,...e,children:(0,i().W_)(t.serverTimestamp,"medium_with_time",s().locale)})}),placement:d().W.Bottom})}},835607:(e,t,a)=>{a.d(t,{F:()=>n});a(296540);const s={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M13 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242m-2.324 4.066c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M13 11.63c-2.334 0-4.354 1.36-5.202 3.323-.309.715-.125 1.419.309 1.912.418.476 1.064.76 1.743.76h6.3c.68 0 1.325-.284 1.744-.76.433-.493.617-1.197.308-1.912-.848-1.963-2.868-3.324-5.202-3.324m-4.054 3.818C9.59 13.955 11.153 12.88 13 12.88s3.409 1.075 4.054 2.57a.52.52 0 0 1-.1.59c-.166.19-.461.336-.804.336h-6.3c-.343 0-.638-.146-.805-.336a.52.52 0 0 1-.1-.59M5.6 4.742c-.871 0-1.582.361-2.062.96-.468.582-.686 1.35-.686 2.142s.218 1.56.686 2.143c.48.598 1.19.959 2.062.959.87 0 1.582-.361 2.062-.96.468-.582.686-1.35.686-2.142S8.13 6.284 7.662 5.7c-.48-.598-1.191-.96-2.062-.96M4.102 7.844c0-.576.159-1.047.41-1.36.24-.299.59-.492 1.088-.492.497 0 .847.193 1.087.492.251.313.41.784.41 1.36s-.159 1.047-.41 1.36c-.24.299-.59.492-1.087.492s-.848-.193-1.087-.492c-.252-.313-.411-.784-.411-1.36m1.498 3.56a4.33 4.33 0 0 1 2.72.949 6.6 6.6 0 0 0-.831.937 3.08 3.08 0 0 0-1.89-.636c-1.099 0-2.047.558-2.561 1.372a.38.38 0 0 0-.07.244.4.4 0 0 0 .104.223c.147.176.437.328.778.328h2.825c-.133.428-.16.851-.103 1.25H3.85c-.68 0-1.334-.293-1.738-.777-.427-.513-.566-1.246-.131-1.935.744-1.179 2.092-1.955 3.619-1.955"})},n=(0,a(340498).wt)("people",s)},837503:(e,t,a)=>{a.d(t,{Q:()=>l});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(581454);var s=a(296540),n=()=>a(959013),i=()=>a(497799),o=()=>a(223544),r=a(474848);function l(e){let{spaceStore:t,createdByFilterIds:a,setCreatedByFilter:l,runNewSearch:d,includeGuests:c}=e;const u=(0,i().H)({spaceStore:t}),g=(0,s.useMemo)((()=>u.loading?[]:c?[...u.members,...u.guests]:u.members),[u,c]),m=(0,s.useMemo)((()=>u.loading?new Set:new Set(u.guests.map((e=>e.id)))),[u]);const p=(0,s.useMemo)((()=>a.map((e=>({id:e,type:"user"})))),[a]);return(0,r.jsx)(o().Jo,{userStores:g,title:(0,r.jsx)(n().sA,{id:"adminContentSearchTab.pagesTable.filters.createdBy.title",defaultMessage:"Created by"}),selectedItems:p,setSelectedItems:function(e){const t=e.map((e=>{let{id:t}=e;return t}));l(t)},onMenuClose:d||(()=>{}),isMultiSelect:!0,guestUserIdSet:m})}},843518:(e,t,a)=>{a.d(t,{F:()=>d});a(296540);var s=()=>a(484714),n=()=>a(401497),i=()=>a(175947),o=()=>a(277201),r=()=>a(38337),l=a(474848);function d(e){let{}=e;const{isElectronMac:t}=(0,s().Y0)(),a=function(e){return(0,n().IS)((t=>({container:{display:"flex",justifyContent:"flex-end",alignItems:"center",paddingRight:10,height:(0,i().ek)(e)},unexpand:{borderRadius:4,width:28,height:28},hoveredUnexpand:{fill:t.regularTextColor,background:t.sidebarItemSelectedBackground}})),[e])}(t);return(0,l.jsx)("div",{style:a.container,className:r().sbV,children:(0,l.jsx)("div",{className:r().qGl,children:(0,l.jsx)(o().I,{style:a.unexpand,hoveredStyle:a.hoveredUnexpand})})})}},846141:(e,t,a)=>{a.d(t,{B:()=>_,A:()=>C});a(898992),a(354520),a(672577),a(581454),a(737550),a(296540);var s=()=>a(484714),n=()=>a(236262),i=()=>a(340498),o=a(474848);const r={viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M12.642 3.358a.625.625 0 0 0-.884 0L8 7.116 4.242 3.358a.625.625 0 1 0-.884.884L7.116 8l-3.758 3.758a.625.625 0 0 0 .884.884L8 8.884l3.758 3.758a.625.625 0 1 0 .884-.884L8.884 8l3.758-3.758a.625.625 0 0 0 0-.884"})},l=(0,i().wt)("xMarkSmall",r);var d=()=>a(959013),c=()=>a(100622),u=()=>a(496603),g=()=>a(436696),m=()=>a(497222),p=()=>a(753199),h=()=>a(722872),f=()=>a(541558),x=()=>a(760217),v=()=>a(439264),y=()=>a(285790),b=()=>a(678553),S=()=>a(8980),j=()=>a(14235),w=()=>a(89924),A=()=>a(859428);const M=(0,d().YK)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.collectionSortMenu.inputPlaceholder"},deleteButtonTooltip:{defaultMessage:"Remove sort rule",id:"database.sortMenu.deleteButtonTooltip"}});const C=function(e){let{schema:t,format:i,sorts:r,showDeleteAll:l,disabled:c,parentStore:u,collectionContextStore:p,onChange:f,onDeleteAll:x}=e;const v=(0,s().v3)(),{device:y}=v,b=!!Object.keys(t).some((e=>!r.find((t=>t.property===e)))),S=l&&r.length>0;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(z,{sorts:r,schema:t,disabled:c,parentStore:u,collectionContextStore:p,onChange:f}),(b||S)&&(0,o.jsxs)(w().A,{children:[b&&(0,o.jsx)(a(406699).Ay,{popupType:y.isMobile?j().nl.SlideUp:j().nl.Popup,renderOrigin:e=>(0,o.jsx)(m().A,{icon:a(617668).plusIcon,isGray:!0,title:(0,o.jsx)(d().sA,{id:"database.viewSettings.sortTab.newSort",defaultMessage:"Add sort"}),...e}),render:e=>{let s;return s=y.isMobile?{menuType:h().gu.ActionSheet}:{menuType:h().gu.Popup,width:280,height:287},(0,o.jsx)(a(928600).A,{...s,children:(0,o.jsx)(a(380468).A,{schema:t,format:i,getProperties:()=>Object.entries(t).filter((e=>{let[t,s]=e;return!r.find((e=>e.property===t))&&(0,a(713998).oH)(s)})).map((e=>{let[t]=e;return t})),onAccept:a=>{!function(e,t,a,s,n,i){var o;if(!e)return;const r=null===(o=a[e])||void 0===o?void 0:o.type,l=[...s,{property:e,direction:"ascending"}];n(l),(0,g().X)({environment:t,action:"create_sort_accept",collectionContextStore:i,property_type:r})}(a,v,t,r,f,p),e.close()},inputPlaceholder:a(972435).A.formatMessage(M.inputPlaceholder)})})}}),S&&(0,o.jsx)(m().A,{icon:n().I,isRed:!0,isGray:!0,title:(0,o.jsx)(d().sA,{id:"database.viewSettings.sortTab.deleteAllSorts",defaultMessage:"Delete sort"}),onClick:()=>function(e,t,a,s){t([]),null==s||s(),(0,g().X)({environment:e,action:"delete_all_sorts",collectionContextStore:a})}(v,f,p,x)})]})]})};function I(e,t,a,s,n,i){s(n.map(((a,s)=>s===e?t:a))),(0,g().X)({environment:a,collectionContextStore:i,action:"update_sort"})}function T(e,t,a,s,n){a(s.filter(((t,a)=>a!==e))),(0,g().X)({environment:t,action:"delete_sort",collectionContextStore:n})}function k(e){let{index:t,onChange:a,sorts:i,collectionContextStore:r}=e;const l=(0,s().v3)();return(0,o.jsx)(x().A,{title:(0,o.jsx)("div",{style:{color:c().Ay.red},children:(0,o.jsx)(d().sA,{defaultMessage:"Delete",id:"database.viewSettings.sortTab.mobileDeleteButtonTitle"})}),icon:(0,o.jsx)(S().I,{icon:n().I,color:"redPrimary"}),onClick:()=>T(t,l,a,i,r),focused:!1})}function _(e){let{onDeleteClick:t}=e;const a=(0,d().tz)();return(0,o.jsx)(A().A,{render:e=>(0,o.jsx)(y().A,{ariaLabel:a.formatMessage(M.deleteButtonTooltip),icon:l,iconStyle:{width:i().Ev.sm,height:i().Ev.sm},onClick:t,style:{marginRight:-6},...e}),renderTooltip:()=>a.formatMessage(M.deleteButtonTooltip)})}function D(e){let{sort:t,index:a,schema:n,disabled:i,parentStore:r,collectionContextStore:l,onChange:d,sorts:c}=e;const u=(0,s().v3)(),{device:g}=u;return g.isMobile?(0,o.jsxs)(w().A,{children:[(0,o.jsx)(f().Ay,{index:a,sort:t,schema:n,parentStore:r,collectionContextStore:l,onChange:(e,t)=>I(e,t,u,d,c,l)}),!i&&(0,o.jsx)(k,{onChange:d,sorts:c,collectionContextStore:l,index:a})]}):(0,o.jsx)(w().A,{extraTopPadding:!0,desktopStyle:{padding:"8px 0 0 8px",width:"100%"},children:(0,o.jsx)(b().A,{showDragHandle:!g.isMobile&&!i,title:(0,o.jsx)("div",{style:{display:"flex",alignItems:"center",flexGrow:1,whiteSpace:"nowrap"},onMouseDown:p().tr,children:(0,o.jsx)(f().Ay,{index:a,sort:t,schema:n,parentStore:r,collectionContextStore:l,onChange:(e,t)=>I(e,t,u,d,c,l)})}),right:!i&&(0,o.jsx)(_,{onDeleteClick:()=>T(a,u,d,c,l)}),rightStyle:{marginRight:19}})})}function z(e){let{sorts:t,schema:a,disabled:n,parentStore:i,collectionContextStore:r,onChange:l}=e;const d=(0,s().v3)(),{device:c}=d;if(c.isMobile)return(0,o.jsx)(o.Fragment,{children:t.map(((e,s)=>(0,o.jsx)(D,{schema:a,disabled:n,parentStore:i,collectionContextStore:r,onChange:l,sorts:t,sort:e,index:s},s)))});{const e=t.map(((e,t)=>t.toString()));return e.length>0?(0,o.jsx)("div",{style:{marginBottom:2},children:(0,o.jsx)(v().Ay,{direction:"vertical",keys:e,renderKey:e=>(0,o.jsx)(D,{schema:a,disabled:n,parentStore:i,collectionContextStore:r,onChange:l,sorts:t,sort:t[parseInt(e)],index:parseInt(e)}),onDrop:e=>function(e,t,a,s,n){a(u().oE(e.map((e=>s[parseInt(e)])))),(0,g().X)({environment:t,action:"reorder_sorts",collectionContextStore:n})}(e,d,l,t,r)})}):null}}},862139:(e,t,a)=>{a.d(t,{_:()=>u});a(296540);var s=()=>a(56366),n=()=>a(959013),i=()=>a(698449),o=()=>a(351360),r=()=>a(760217),l=()=>a(173783),d=()=>a(614505),c=a(474848);function u(e){const{group:t,menuListItemProps:a,spaceStore:u}=e,g=(0,s().K8)((()=>{const e=u??o().default.state.currentSpaceStore;if(e&&t.icon)return{pointer:{table:e.table,id:e.id},icon:t.icon}}),[t,u]),m=(0,n().tz)(),p=(0,i().Pf)({intl:m,groupName:t.name});return(0,c.jsx)(r().A,{...a,icon:g?(0,c.jsx)(d().A,{disabled:!0,size:22,icon:g,isEmptyPage:!1,title:p}):(0,c.jsx)(l().A,{size:22}),title:p})}},873066:(e,t,a)=>{a.d(t,{A:()=>le});var s=a(296540),n=()=>a(484714),i=()=>a(56366),o=()=>a(401497),r=()=>a(563884),l=()=>a(959013),d=()=>a(534177),c=()=>a(30731),u=()=>a(56394),g=()=>a(780865),m=()=>a(962730),p=()=>a(377586),h=()=>a(117586),f=()=>a(141025),x=()=>a(35394),v=()=>a(493823),y=()=>a(760217),b=()=>a(545805),S=()=>a(14235),j=()=>a(204063),w=()=>a(89924),A=()=>a(604995),M=()=>a(416504),C=()=>a(972435),I=()=>a(722872),T=()=>a(513488),k=()=>a(45552),_=()=>a(574036),D=()=>a(539320),z=()=>a(498140),P=()=>a(609989),N=()=>a(623580),R=a(474848);const B=(0,l().YK)({invalidDateError:{id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"},invalidDateRangeError:{id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"},notSupportedDateRangeError:{id:"dateInputError.notSupportedDateRangeError.tooltip",defaultMessage:"The date is not supported"}});const L=function(e){const t=(0,l().tz)(),n=(0,i().uB)(void 0,P().A),{value:o,customErrorMessage:r}=e;(0,s.useEffect)((()=>{n.reset()}),[o,n]);const d=(0,s.useCallback)((()=>(0,R.jsx)(q,{dateTimeInputMenuItemProps:e,store:n})),[e,n]),c=(0,i().K8)((()=>O(t,n,r)),[t,n,r]);return c?(0,R.jsx)(a(859428).A,{renderTooltip:()=>c,forceVisibleState:!0,placement:m().W.Left,render:d,originGap:-8}):(0,R.jsx)(q,{dateTimeInputMenuItemProps:e,store:n})};function E(e,t){const{device:a}=e;return!!a.isMobile||!t}function O(e,t,a){if(!t.state.error)return;const s=a&&a(t.state.error);if(s)return s;switch(t.state.error){case P().$.INVALID_DATE:return e.formatMessage(B.invalidDateError);case P().$.INVALID_RANGE:return e.formatMessage(B.invalidDateRangeError);case P().$.NOT_SUPPORTED:return e.formatMessage(B.notSupportedDateRangeError);default:(0,d().HB)(t.state.error)}}function U(e,t,a,s,n,i){const o=function(e,t,a,s,n){if(!a.state.dateEdited&&!a.state.timeEdited)return;if(!a.state.temporaryValue.date&&!a.state.temporaryValue.time)return{value:void 0};const i=(0,z().J8)(a.state.temporaryValue.date||"",t);if(i){let t="";return t=s?(null==e?void 0:e.start_time)||"00:00":n?"23:59":"00:00",{value:{type:"datetime",start_date:i,time_zone:(null==e?void 0:e.time_zone)||(0,M().P)(),start_time:t}}}const o=(0,z().KZ)(a.state.temporaryValue.time||"",t);return(null!=e&&e.start_date||i)&&o?{value:{type:"datetime",start_date:(null==e?void 0:e.start_date)||i,start_time:o,time_zone:(null==e?void 0:e.time_zone)||(0,M().P)()}}:{error:P().$.INVALID_DATE}}(e,t,a,n,i);if(o)return s?s(o):o}function F(e){const{theme:t,disabled:a,focus:s,intl:n,store:i,customErrorMessage:o}=e,r=function(e){return{inputDefault:{background:e.inputBackground,boxShadow:e.inputBoxShadow},inputFocused:{boxShadow:e.outlineBlueInputBoxShadow},inputError:{boxShadow:e.outlineRedInputBoxShadow},placeholder:{color:e.lightTextColor}}}(t),l=O(n,i,o);if(!a)return l?r.inputError:s?r.inputFocused:r.inputDefault}function V(e,t,a,s,n,i,o,r,l,d,c){const{device:u}=e,g=function(e,t){return{menuItem:{marginBottom:e.device.isMobile?1:12},inputWrapper:{borderRadius:6,height:28,paddingRight:E(e,t)?6:0,position:"relative"},inputEditRegion:{width:E(e,t)?"calc(100% - 14px)":"100%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"}}}(e,d);return{style:{...g.menuItem,...n},inputOuterStyle:{...g.inputWrapper,...s,...F({theme:t,disabled:i,focus:o,intl:r,store:l,customErrorMessage:c})},inputStyle:{...g.inputEditRegion,...u.isMobile&&g.inputEditRegionMobile,...a}}}function H(e,t,a,s,n,i,o,r,l,d){let c;(!r||"date"===t&&null!=n&&n.start_time||"time"===t&&null!=n&&n.start_date)&&(c=U(n,i,o,l,r,d),c&&(a(c),c.error?o.setState({...o.state,dateEdited:!1,error:c.error}):o.reset())),s&&s(e,c)}function W(e,t,a,s,n,i,o,r,l){const d=U(t,a,s,i,o,r);d?(e(d),d.error?s.setState({...s.state,dateEdited:!1,timeEdited:!1,error:d.error}):s.reset()):s.setState({...s.state,dateEdited:!1,timeEdited:!1}),l&&n&&n(l)}function q(e){let{dateTimeInputMenuItemProps:t,store:a}=e;const{store:r,hideClearButton:d,focus:u,showTime:g,placeholder:m,customErrorMessage:p,...h}=t,{onBlur:f,onClear:x,onDateFocus:v,onSubmit:y,onTimeFocus:b,onUpdate:S,isEndingDate:j,inputStyle:w,inputOuterStyle:A,style:M,disabled:I,validate:T,value:k}=t,_=(0,l().tz)(),D=(0,o().DP)(),z=(0,n().v3)(),P=(0,s.useCallback)((e=>function(e,t,a,s,n,i,o,r,l,d){const{device:c}=t;i.setState({...i.state,timeEdited:!0,temporaryValue:{...i.state.temporaryValue,time:e.target.value||""}}),c.isAndroid&&W(a,s,n,i,o,r,l,d)}(e,z,S,k,_,a,f,T,g,j)),[z,S,k,_,a,f,T,g,j]),B=(0,s.useCallback)((e=>function(e,t,a){t.setState({...t.state,timeEdited:!1}),a&&a(e)}(e,a,b)),[a,b]),L=(0,s.useCallback)((()=>function(e,t,a,s,n,i,o,r){s.setState({...s.state,dateEdited:!0,timeEdited:!0,temporaryValue:{date:void 0,time:void 0},error:void 0});const l=U(t,a,s,i,o,r);l&&e(l),s.setState({...s.state,dateEdited:!1,timeEdited:!1}),n&&n()}(S,k,_,a,x,T,g,j)),[S,k,_,a,x,T,g,j]),O=(0,s.useCallback)((e=>W(S,k,_,a,f,T,g,j)),[S,k,_,a,f,T,g,j]),F=(0,s.useCallback)((e=>function(e,t,a,s,n,i,o,r,l,d){const{device:c}=t;i.setState({...i.state,dateEdited:!0,temporaryValue:{...i.state.temporaryValue,date:e.target.value||""}}),c.isAndroid&&W(a,s,n,i,o,r,l,d)}(e,z,S,k,_,a,f,T,g,j)),[z,S,k,_,a,f,T,g,j]),q=(0,s.useCallback)((e=>function(e,t,a){t.setState({...t.state,dateEdited:!1}),a&&a(e)}(e,a,v)),[a,v]),{device:K}=z,Y=K.isMobile?"date":"text",Q=K.isMobile?"time":"text",$=N().C.Transparent,X=K.isMobile?void 0:u,Z=(0,i().K8)((()=>V(z,D,w,A,M,I,X,_,a,d,p)),[z,D,w,A,M,I,X,_,a,d,p]),J={display:"flex",alignItems:"center",lineHeight:2,background:D.inputBackground,paddingLeft:8,flexBasis:"50%",...Z.inputOuterStyle},ee=(0,i().K8)((()=>function(e,t,a,s){const{device:n}=e;return n.isMobile?t?c().Tq(t,a):"":s.state.temporaryValue.date?s.state.temporaryValue.date:s.state.dateEdited?s.state.temporaryValue.date||"":t?c().Tq(t,a):""}(z,k,_,a)),[z,k,_,a]),te=(0,i().K8)((()=>function(e,t,a,s){const{device:n}=e;return n.isMobile?t?c().Em(t,a):"":s.state.temporaryValue.time?s.state.temporaryValue.time:s.state.timeEdited?s.state.temporaryValue.time||"":t?c().Em(t,a):""}(z,k,_,a)),[z,k,_,a]);return(0,R.jsxs)("div",{style:J,children:[(0,R.jsx)(N().A,{...h,type:Y,format:$,placeholder:m,focus:"date"===X,onFocus:q,onChange:F,onSubmit:e=>H(e,"date",S,y,k,_,a,g,T,j),onBlur:O,value:ee,size:1,style:{fontSize:K.isMobile?16:14},showClearButton:!g&&E(z,d),onClearButtonClick:L}),g&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{style:{height:14,width:1,background:D.regularDividerColor,marginLeft:6,marginRight:12,flexShrink:0}}),(0,R.jsx)(N().A,{...h,placeholder:C().A.formatMessage(G.timePlaceholder),type:Q,format:$,focus:"time"===X,onFocus:B,onChange:P,onSubmit:e=>H(e,"time",S,y,k,_,a,g,T,j),onBlur:O,value:te,size:1,style:{fontSize:K.isMobile?16:14},showClearButton:E(z,d),onClearButtonClick:L})]})]})}const G=(0,l().YK)({startingDateMessage:{defaultMessage:"Starting",id:"auditLog.dateTimeRangeMenu.startingDatePlaceholder"},endingDateMessage:{defaultMessage:"Ending",id:"auditLog.dateTimeRangeMenu.endingDatePlaceholder"},timePlaceholder:{defaultMessage:"12:00 AM",id:"auditLog.dateTimeRangeMenu.timePlaceholderInNumber"}});const K=function(e){let{title:t,value:s,onUpdate:o,onDismiss:r,disabled:l,footer:d,header:c,hideTime:u,showTime:g,store:m,dayRangeStore:p,minDate:h,maxDate:v,customErrorMessage:y}=e;const b=(0,n().v3)(),S=(0,i().uB)(p,x().A),j=(0,i().uB)(m,f().Ay);(0,a(852507).l)((()=>{void 0!==g&&j.setState({...j.state,showTime:g})}));const{device:w}=b;return(0,R.jsx)(a(928600).A,{...se(b,t,s,o,j,S,r,l,d,h,v),children:(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,R.jsxs)("div",{children:[c,!w.isMobile&&(0,R.jsx)(ae,{value:s,disabled:l,onUpdate:o,store:j,dayRangeStore:S,minDate:h,maxDate:v,customErrorMessage:y}),(0,R.jsx)(X,{value:s,onUpdate:o,store:j,dayRangeStore:S,minDate:h,maxDate:v})]}),(0,R.jsx)(te,{onUpdate:o,value:s,hideTime:u,store:j,dayRangeStore:S})]})})};function Y(e){const{field:t,parsed:a,value:s,minValue:n,maxValue:i}=e;return a.error?a:function(e){const{range:t,minValue:a,maxValue:s}=e,n=t.starting?A().C6.notionDateTimeToLuxon(t.starting):void 0,i=t.ending?A().C6.notionDateTimeToLuxon(t.ending):void 0;if(n&&i&&i<n)return{error:T().$.INVALID_RANGE};const o=e=>(0,d().O9)(a)&&(0,d().O9)(e)&&e<a,r=e=>(0,d().O9)(s)&&(0,d().O9)(e)&&e>s;return o(n)||o(i)||r(n)||r(i)?{error:T().$.NOT_SUPPORTED}:{value:t}}({range:{...s,[t]:a.value},minValue:n,maxValue:i})}function Q(e){const{field:t,parsed:a,value:s,minValue:n,maxValue:i}=e;if(a.error)return a;return function(e){const{range:t,minValue:a,maxValue:s}=e,n=t.starting?A().C6.notionDateToLuxon(t.starting):void 0,i=t.ending?A().C6.notionDateToLuxon(t.ending):void 0;if(n&&i&&i<n)return{error:T().$.INVALID_RANGE};const o=e=>a&&e&&e<a,r=e=>s&&e&&e>s;return o(n)||o(i)||r(n)||r(i)?{error:T().$.NOT_SUPPORTED}:{value:t}}({range:{...c().BI(s),[t]:a.value},minValue:n,maxValue:i})}function $(e,t){return{pickerSection:{paddingLeft:16,paddingRight:16},pickerSectionMobile:{paddingTop:16,paddingBottom:8},sidebar:{paddingTop:12,paddingBottom:24,overflowY:"auto",overflowX:"hidden",flex:"0 0 220px",backgroundColor:t.sidebarSecondaryBackground,borderLeft:`1px solid ${t.regularDividerColor}`,maxWidth:"fit-content"},menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4,color:t.mediumTextColor}}}function X(e){let{value:t,onUpdate:a,store:s,dayRangeStore:r,minDate:l,maxDate:d}=e;const u=(0,o().DP)(),g=(0,n().v3)(),m=(0,i().uB)(r,x().A),p=(0,i().uB)(s,f().Ay),{device:h}=g,v=$(g,u),y=function(e){return{pickerSectionMobile:{background:e.popoverBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}}(u),b={...v.pickerSection,...h.isMobile&&v.pickerSectionMobile,...h.isMobile&&y.pickerSectionMobile};return(0,R.jsx)(w().A,{children:(0,R.jsx)("div",{style:b,children:(0,R.jsx)(D().A,{value:c().BI(t),dateTimeStore:p,store:m,onUpdate:e=>{if(e.error)return null;const s=c().y2(t,e.value);return a({error:e.error,value:s})},minDate:l,maxDate:d,validate:(e,a)=>Q({field:e,parsed:a,value:t,minValue:l,maxValue:d})})})})}function Z(e,t,a){t.setState({...t.state,focus:e});const s=f().yL[e];a.setState({...a.state,focus:s})}function J(e,t){t.setState({...t.state,focus:e})}function ee(e,t,a){e.ending&&Z(h().xQ.EndDate,t,a),t.setState({...t.state,temporaryDateRange:e}),a.setState({...a.state,displayMonth:e.starting||e.ending?A().mF(e.starting||e.ending):void 0,temporaryDateRange:{starting:c().qC(e.starting),ending:c().qC(e.ending)}})}function te(e){let{onUpdate:t,value:a,hideTime:s,store:r,dayRangeStore:d}=e;const c=(0,o().DP)(),u=(0,n().v3)(),g=(0,i().K8)((()=>r.state.showTime),[r]);return(0,R.jsxs)("aside",{style:$(u,c).sidebar,children:[s?null:(0,R.jsx)(_().A,{title:(0,R.jsx)(l().sA,{id:"auditlogDateFilter.timeToggle",defaultMessage:"Use time"}),on:g,onClick:()=>{if(r.toggleShowTime(),r.state.showTime){const e=a;e.starting&&(e.starting.start_time="00:00"),e.ending&&(e.ending.start_time="23:59"),t({value:e})}},focused:!1}),(0,R.jsx)(y().A,{focused:!1,title:(0,R.jsx)(l().sA,{id:"auditlogDateFilter.quickFilters.today",defaultMessage:"Today"}),onClick:()=>{const e=Date.now(),t=A().KQ(e,(0,M().P)());ee({starting:{...t,start_time:"00:00"},ending:t},r,d)},style:$(u,c).menuItem}),(0,R.jsx)(y().A,{focused:!1,title:(0,R.jsx)(l().sA,{id:"auditlogDateFilter.quickFilters.yesterday",defaultMessage:"Yesterday"}),onClick:()=>{const e=A().jI((0,M().P)());ee({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M().P)()},ending:{type:"datetime",start_date:e.start_date,start_time:"23:59",time_zone:(0,M().P)()}},r,d)},style:$(u,c).menuItem}),(0,R.jsx)(y().A,{focused:!1,title:(0,R.jsx)(l().sA,{id:"auditlogDateFilter.quickFilters.lastWeek",defaultMessage:"Last 7 days"}),onClick:()=>{const e=A().t0((0,M().P)()),t=A().KQ(Date.now(),(0,M().P)());ee({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M().P)()},ending:t},r,d)},style:$(u,c).menuItem}),(0,R.jsx)(y().A,{focused:!1,title:(0,R.jsx)(l().sA,{id:"auditlogDateFilter.quickFilters.lastMonth",defaultMessage:"Last 30 days"}),onClick:()=>{const e=A().ZG((0,M().P)()),t=A().KQ(Date.now(),(0,M().P)());ee({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M().P)()},ending:t},r,d)},style:$(u,c).menuItem})]})}function ae(e){let{value:t,disabled:a,onUpdate:s,store:r,dayRangeStore:d,minDate:u,maxDate:g,customErrorMessage:m}=e;const p=(0,l().tz)(),f=(0,o().DP)(),x=(0,n().v3)(),{device:v,WindowSizeStore:y}=x,b=(0,i().K8)((()=>r.getFocus()),[r]);let S="date";b!==h().xQ.StartTime&&b!==h().xQ.EndTime||(S="time");const j=function(e,t){return{earliestValidEnding:e.starting&&c().r6(e.starting,t),latestValidStarting:e.ending&&c().r6(e.ending,t)}}(t,p),w=(0,i().K8)((()=>r.state.showTime),[r]),A=(0,i().K8)((()=>y.getSafePaddingLeftCSS(16)),[y]);return(0,R.jsxs)("div",{style:{paddingTop:v.isMobile?16:12,paddingBottom:v.isMobile?16:8,paddingLeft:v.isMobile?A:14,paddingRight:v.isMobile?A:14,display:w?"block":"flex",...v.isMobile&&{boxShadow:`\n                        0 1px 0 ${f.regularDividerColor}\n                    `,position:"relative",zIndex:2},background:v.isMobile?f.popoverBackground:void 0},children:[(0,R.jsx)(L,{disabled:a,placeholder:C().A.formatMessage(G.startingDateMessage),focus:b===h().xQ.StartDate||b===h().xQ.StartTime?S:void 0,value:t.starting,validate:e=>function(e){const{parsed:t,value:a,minValue:s,maxValue:n}=e,i=Y({field:"starting",parsed:t,value:a,minValue:s,maxValue:n});return i.error?i:{value:i.value.starting}}({parsed:e,value:t,minValue:u,maxValue:g}),customErrorMessage:m,onUpdate:e=>function(e,t,a){e.error||t({value:{...a,starting:e.value}})}(e,s,t),onDateFocus:()=>Z(h().xQ.StartDate,r,d),onTimeFocus:()=>J(h().xQ.StartTime,r),onSubmit:(e,t)=>function(e,t,a,s,n){t&&t.error||(a===h().xQ.StartDate&&s.state.showTime?s.setState({...s.state,focus:h().xQ.StartTime}):(s.setState({...s.state,focus:h().xQ.EndDate}),n.setState({...n.state,focus:"ending"})))}(0,t,b,r,d),inputElementAttributes:{max:j.latestValidStarting},showTime:w}),(0,R.jsx)("div",{style:{width:12,height:8}}),(0,R.jsx)(L,{disabled:a,placeholder:C().A.formatMessage(G.endingDateMessage),focus:b===h().xQ.EndDate||b===h().xQ.EndTime?S:void 0,value:t.ending,validate:e=>function(e){const{parsed:t,value:a,minValue:s,maxValue:n}=e,i=Y({field:"ending",parsed:t,value:a,minValue:s,maxValue:n});return i.error?i:{value:i.value.ending}}({parsed:e,value:t,minValue:u,maxValue:g}),customErrorMessage:m,onUpdate:e=>function(e,t,a){e.error||t({value:{...a,ending:e.value}})}(e,s,t),onDateFocus:()=>Z(h().xQ.EndDate,r,d),onTimeFocus:()=>J(h().xQ.EndTime,r),onSubmit:(e,t)=>function(e,t,a,s){t&&t.error||a===h().xQ.EndDate&&s.state.showTime&&s.setState({...s.state,focus:h().xQ.EndTime})}(0,t,b,r),inputElementAttributes:{min:j.earliestValidEnding},showTime:w})]})}function se(e,t,a,s,n,i,o,r,l,d,c){const{device:u}=e;if(u.isMobile){return{menuType:I().gu.Modal,title:t,right:(0,R.jsx)(k().DoneMenuText,{}),onClickRight:o,header:(0,R.jsx)(ae,{value:a,disabled:r,onUpdate:s,store:n,dayRangeStore:i,minDate:d,maxDate:c})}}return{menuType:I().gu.Popup,onClickOutside:o,footer:l}}var ne=()=>a(297401),ie=()=>a(821879),oe=()=>a(978625),re=()=>a(806754);const le=(0,l().j4)((function(e){let{onChange:t,onMenuDismiss:a,showButtons:o,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:g,icon:m,mode:p,focused:h,pillTitle:v,minDate:y,maxDate:b,customErrorMessage:S}=e;const j=(0,n().v3)(),w=(0,i().uB)(void 0,x().A),A=(0,i().uB)(void 0,f().Ay);(0,s.useEffect)((()=>{fe({value:u},A,w)}),[u,A,w]);const{device:M}=j;return M.isMobile?(0,R.jsx)(Me,{onChange:t,onMenuDismiss:a,showButtons:o,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:g,icon:m,store:A,dayRangeStore:w,mode:p,minDate:y,maxDate:b,customErrorMessage:S}):(0,R.jsx)(Ae,{onChange:t,onMenuDismiss:a,showButtons:o,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:g,focused:h,icon:m,mode:p,pillTitle:v,store:A,dayRangeStore:w,minDate:y,maxDate:b,customErrorMessage:S})}));function de(e){const{device:t}=e;return t.isMobile?p().n.SlideUp:p().n.Popup}function ce(e){return{buttonMenuItem:{color:e.mediumTextColor},activeMenuItem:{color:e.regularTextColor}}}function ue(e){e.preventDefault&&e.preventDefault()}function ge(e){e({starting:void 0,ending:void 0})}function me(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},icon:{height:16,width:16,marginRight:6},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:0,paddingBottom:8},popupWithSidebar:{display:"flex"},menuItemTitleDesktop:{width:"100%"},summary:{display:"inline-flex"}}}function pe(e,t,a){a||(e.setState({...e.state,isOpen:!0,focus:h().xQ.StartDate}),t.setState({...t.state,isOpen:!0,focus:"starting"}))}function he(e,t,a,s,n,i){const{temporaryDateRange:o}=a.state;g().a9(e)||(i||t(o),a.setState({...a.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),s.setState({...s.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),n&&n())}function fe(e,t,a){if(e.error)return;const s={starting:(0,c().qC)(e.value.starting),ending:(0,c().qC)(e.value.ending)};return a.setState({...a.state,temporaryDateRange:{...a.state.temporaryDateRange,...s}}),t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})}function xe(e){let{disabled:t,icon:a,title:i,store:o,dayRangeStore:r}=e;const l=(0,n().v3)(),d=(0,s.useCallback)((()=>pe(o,r,t)),[o,r,t]),c=me(l);return(0,R.jsx)(y().A,{disabled:t,focused:!1,icon:a(c.icon),title:i,onClick:d})}function ve(e){let{disabled:t,title:a,value:i,intl:o,onChange:l,store:d,dayRangeStore:c}=e;const u=(0,n().v3)(),m=(0,s.useCallback)((()=>pe(d,c,t)),[d,c,t]),p=me(u),h=(0,R.jsxs)("div",{style:p.summary,children:[(0,r().k)(p.iconActiveMobile),g().tX(i,o)]});return(0,R.jsx)(oe().A,{disabled:t,onClick:m,onClickClear:()=>ge(l),label:a,title:h})}function ye(e){let{disabled:t,value:a,focused:i,intl:l,onChange:d,store:c,dayRangeStore:u}=e;const m=(0,o().DP)(),p=(0,n().v3)(),h=(0,s.useCallback)((()=>pe(c,u,t)),[c,u,t]),f=me(p),x=ce(m),v={...f.menuItem,...x.activeMenuItem},b=g().tX(a,l),S=(0,R.jsx)(ne().A,{onClick:()=>ge(d),disabled:t});return(0,R.jsx)(y().A,{focused:i,disabled:t,icon:(0,r().k)(f.iconActiveDesktop),title:b,right:S,isTokenTitle:!0,alignIconTop:!0,onClick:h,desktopTitleStyle:f.menuItemTitleDesktop,desktopIconStyle:f.iconActiveDesktopWrapper,style:v})}function be(e){let{disabled:t,title:a,icon:i,focused:r,mode:l,store:d,dayRangeStore:c}=e;const u=(0,o().DP)(),g=(0,n().v3)(),m=(0,s.useCallback)((()=>pe(d,c,t)),[d,c,t]),p=me(g),h=ce(u),f={...p.menuItem,...h.buttonMenuItem,...l===ie().C.Pill?{width:"fit-content",border:"solid 1px",paddingLeft:0,paddingRight:0,borderRadius:20,fontSize:12}:{}};return(0,R.jsx)(y().A,{focused:r,disabled:t,icon:i(p.icon),title:a,onClick:m,style:f})}function Se(e){let{disabled:t,value:a,pillTitle:n,store:i,dayRangeStore:o}=e;const d=(0,s.useCallback)((()=>pe(i,o,t)),[i,o,t]),c=(0,R.jsx)(l().sA,{id:"searchDateFilter.shortTitle",defaultMessage:"Date"});return(0,R.jsx)(u().A,{on:Boolean(a.starting||a.ending),icon:(0,r().k)({width:16,marginRight:6,fill:"currentColor"}),title:(0,R.jsx)("span",{children:n||c}),onClick:d})}function je(e){let{onChange:t,onMenuDismiss:a,showButtons:s,store:n,dayRangeStore:i}=e;return(0,R.jsxs)(w().A,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},children:[(0,R.jsx)(v().p,{onClick:()=>{n.clearTemporaryDateRange(),i.clearTemporaryDateRange(),t({starting:void 0,ending:void 0})},children:(0,R.jsx)(l().sA,{id:"searchDateFilter.clearButton",defaultMessage:"Clear"})}),(0,R.jsx)(j().A,{onClick:e=>{t(n.state.temporaryDateRange),he(e,t,n,i,a,s)},children:(0,R.jsx)(l().sA,{id:"searchDateFilter.applyButton",defaultMessage:"Apply"})})]})}function we(e){let{onChange:t,onMenuDismiss:a,showButtons:n,title:o,header:r,sidebar:d,hideTime:c,value:u,store:g,dayRangeStore:m,minDate:p,maxDate:h,customErrorMessage:f}=e;const x=(0,s.useCallback)((e=>he(e,t,g,m,a,n)),[t,g,m,a,n]),y=(0,s.useCallback)((e=>fe(e,g,m)),[g,m]),b=(0,i().K8)((()=>function(e,t){const{temporaryDateRange:a}=t.state;return{...e,...a}}(u,g)),[u,g]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(K,{title:o,value:b,onUpdate:y,store:g,dayRangeStore:m,onDismiss:x,footer:"footer"===n&&(0,R.jsx)(je,{onChange:t,onMenuDismiss:a,showButtons:n,store:g,dayRangeStore:m}),sidebar:d,hideTime:c,header:r,minDate:p,maxDate:h,customErrorMessage:f}),"side"===n&&(0,R.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"},children:[(0,R.jsx)(v().p,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:x,children:(0,R.jsx)(l().sA,{defaultMessage:"Cancel",id:"DateTimeFilter.cancelButton.label"})}),(0,R.jsx)(j().A,{onClick:()=>t(g.state.temporaryDateRange),children:(0,R.jsx)(l().sA,{defaultMessage:"Accept",id:"DateTimeFilter.acceptButton.label"})})]})]})}function Ae(e){let{mode:t,onChange:a,onMenuDismiss:o,showButtons:r,title:c,header:u,sidebar:g,hideTime:p,value:h,disabled:f,focused:x,icon:v,pillTitle:y,store:j,dayRangeStore:w,minDate:A,maxDate:M,customErrorMessage:C}=e;const I=(0,n().v3)(),T=(0,l().tz)(),k=(0,s.useCallback)((e=>he(e,a,j,w,o,r)),[a,j,w,o,r]),_=(0,s.useCallback)((()=>(0,R.jsx)(we,{onChange:a,onMenuDismiss:o,showButtons:r,title:c,header:u,sidebar:g,hideTime:p,value:h,store:j,dayRangeStore:w,minDate:A,maxDate:M,customErrorMessage:C})),[a,o,r,c,u,g,p,h,j,w,A,M,C]),D=me(I),z=t===ie().C.Section,P=z?c:void 0,N=t===ie().C.Section?(0,R.jsx)(ye,{disabled:f,value:h,focused:x,intl:T,onChange:a,store:j,dayRangeStore:w}):t===ie().C.Button?(0,R.jsx)(be,{disabled:f,title:c,icon:v,focused:x,mode:t,store:j,dayRangeStore:w}):t===ie().C.Pill?(0,R.jsx)(Se,{disabled:f,value:h,pillTitle:y,store:j,dayRangeStore:w}):void(0,d().HB)(t),B=(0,i().K8)((()=>j.state.isOpen),[j]);return(0,R.jsx)(re().A,{title:P,marginAfter:z,children:(0,R.jsx)(b().A,{debugName:"DateTimeFilter",capture:B,onUp:ue,onDown:ue,onEnter:ue,children:(0,R.jsx)(S().Ay,{popupType:de(I),open:B,origin:N,render:_,onDismiss:k,placementToOrigin:m().W.Bottom,alignmentToOrigin:m().C.Start,style:g?D.popupWithSidebar:D.popup,originGap:8,trapFocus:!0})})})}function Me(e){let{mode:t,onChange:a,onMenuDismiss:n,showButtons:o,title:r,header:d,sidebar:c,hideTime:u,value:g,disabled:m,icon:h,store:f,dayRangeStore:x,minDate:v,maxDate:y,customErrorMessage:b}=e;const j=(0,l().tz)(),w=(0,s.useCallback)((e=>he(e,a,f,x,n,o)),[a,f,x,n,o]),A=(0,s.useCallback)((()=>(0,R.jsx)(we,{onChange:a,onMenuDismiss:n,showButtons:o,title:r,header:d,sidebar:c,hideTime:u,value:g,store:f,dayRangeStore:x,minDate:v,maxDate:y,customErrorMessage:b})),[a,n,o,r,d,c,u,g,f,x,v,y,b]),M=(0,i().K8)((()=>f.state.isOpen),[f]),C=t===ie().C.Section?(0,R.jsx)(ve,{disabled:m,title:r,value:g,intl:j,onChange:a,store:f,dayRangeStore:x}):(0,R.jsx)(xe,{disabled:m,icon:h,title:r,store:f,dayRangeStore:x});return(0,R.jsx)(S().Ay,{popupType:p().n.SlideUp,open:M,origin:C,render:A,onDismiss:w,preventScaleTransition:!0})}},875166:(e,t,a)=>{a.d(t,{E:()=>n});a(296540);var s=a(474848);const n=(0,a(340498).wt)("circleDottedCircle",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M9.993 16.626a6.8 6.8 0 0 1-2.727-.554 7.1 7.1 0 0 1-2.256-1.524 7.3 7.3 0 0 1-1.525-2.256 6.8 6.8 0 0 1-.553-2.728q0-1.449.553-2.727a7.24 7.24 0 0 1 3.773-3.78 6.8 6.8 0 0 1 2.728-.554q1.456 0 2.735.554t2.256 1.53a7.1 7.1 0 0 1 1.53 2.25 6.8 6.8 0 0 1 .554 2.727q0 1.45-.553 2.728a7.22 7.22 0 0 1-3.787 3.78 6.8 6.8 0 0 1-2.728.554m0-1.395q1.184 0 2.208-.437a5.7 5.7 0 0 0 1.805-1.217 5.7 5.7 0 0 0 1.217-1.804q.437-1.026.437-2.209a5.55 5.55 0 0 0-.437-2.2 5.66 5.66 0 0 0-3.029-3.029 5.6 5.6 0 0 0-2.208-.438q-1.176 0-2.208.438A5.6 5.6 0 0 0 5.98 5.552a5.7 5.7 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.201q0 1.183.438 2.209a5.7 5.7 0 0 0 1.21 1.804 5.6 5.6 0 0 0 4.013 1.654Zm0-8.162a.49.49 0 0 1-.513-.506.49.49 0 0 1 .513-.505.49.49 0 0 1 .506.505.49.49 0 0 1-.506.506m1.504.404a.5.5 0 0 1-.362-.144.5.5 0 0 1-.144-.369.49.49 0 0 1 .506-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.513m1.1 1.1a.49.49 0 0 1-.505-.506.49.49 0 0 1 .506-.505.49.49 0 0 1 .505.505.49.49 0 0 1-.505.506Zm.404 1.504a.49.49 0 0 1-.506-.506.49.49 0 0 1 .506-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.506m-.403 1.51a.49.49 0 0 1-.506-.505.49.49 0 0 1 .506-.513.49.49 0 0 1 .506.513.49.49 0 0 1-.506.506Zm-1.1 1.095a.49.49 0 0 1-.506-.506.49.49 0 0 1 .505-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.506Zm-1.505.403a.49.49 0 0 1-.513-.506.49.49 0 0 1 .513-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.506m-1.51-.403a.49.49 0 0 1-.506-.506.49.49 0 0 1 .505-.506q.219 0 .363.143.15.144.15.363a.48.48 0 0 1-.15.362.5.5 0 0 1-.363.144Zm-1.101-1.094a.49.49 0 0 1-.506-.506.49.49 0 0 1 .506-.513.49.49 0 0 1 .506.513.49.49 0 0 1-.506.506m-.403-1.51a.49.49 0 0 1-.506-.507.49.49 0 0 1 .506-.506.49.49 0 0 1 .505.506.49.49 0 0 1-.505.506Zm.403-1.505a.49.49 0 0 1-.506-.506.49.49 0 0 1 .506-.505.49.49 0 0 1 .506.505.49.49 0 0 1-.506.506m1.1-1.1a.49.49 0 0 1-.505-.513.49.49 0 0 1 .505-.506q.219 0 .363.144.15.143.15.362 0 .225-.15.37a.5.5 0 0 1-.363.143"})})},881753:(e,t,a)=>{a.d(t,{A:()=>h});a(296540);var s=()=>a(662303),n=()=>a(56366),i=()=>a(401497),o=()=>a(869190),r=()=>a(959013),l=()=>a(284371),d=()=>a(777092),c=()=>a(962730),u=()=>a(464708),g=()=>a(859428),m=()=>a(125565),p=a(474848);function h(e){let{spaceStore:t,restorationStatus:a,didAttemptRecovery:s}=e;const n=x();return(0,p.jsx)(g().A,{placement:c().W.Bottom,renderTooltip:()=>(0,p.jsx)(f,{spaceStore:t,restorationStatus:a,didAttemptRecovery:s}),render:e=>(0,p.jsx)("div",{...e,children:(0,p.jsx)(u().A,{content:(0,p.jsx)(m().A,{style:n.recentlyReaddedText,children:(0,p.jsx)(r().sA,{id:"userCell.recentlyReadded.label",defaultMessage:"Recently re-added"})}),style:n.recentlyReaddedBadge})})})}function f(e){let{spaceStore:t,restorationStatus:a,didAttemptRecovery:i}=e;const l=x(),{displayName:c,displayTime:u}=function(e){let{spaceStore:t,restorationStatus:a}=e;const i="restored"===a.status?{table:a.restoredByTable,id:a.restoredById,spaceId:t.id}:void 0,l=i?(0,d().JQ)({parentStore:t,pointer:i}):void 0,c=(0,r().tz)(),{displayName:u}=(0,n().K8)((()=>({displayName:null==l?void 0:l.getDisplayName(c)})),[l,c]),g="restored"===a.status?(0,o().W_)(a.restoredTime,"medium_with_time",s().locale):void 0;return{displayName:u,displayTime:g}}({spaceStore:t,restorationStatus:a});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:l.tooltipFirstLine,children:(0,p.jsx)(r().sA,{id:"userCell.recentlyReaddedTooltip.label",defaultMessage:"Member was removed and re-added within the last 30 days"})}),i&&(0,p.jsx)("div",{style:l.tooltipSecondLine,children:(0,p.jsx)(r().sA,{id:"userCell.recentlyReaddedTooltip.inProgress.description",defaultMessage:"Restoration of access is in progress",values:{displayName:c,displayTime:u}})}),!i&&c&&u&&(0,p.jsx)("div",{style:l.tooltipSecondLine,children:(0,p.jsx)(r().sA,{id:"userCell.recentlyReaddedTooltip.description",defaultMessage:"{displayName} restored their access on {displayTime}",values:{displayName:c,displayTime:u}})})]})}function x(){return(0,i().IS)((e=>({recentlyReaddedBadge:{background:e.fill.blueSecondary,marginLeft:0,maxWidth:"max-content"},recentlyReaddedText:{color:e.text.bluePrimary,fontSize:l().J.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px"},tooltipFirstLine:{color:e.text.contrastPrimary,fontWeight:l().Wy.semibold},tooltipSecondLine:{color:e.text.contrastSecondary}})),[])}},882690:(e,t,a)=>{a.d(t,{Z:()=>l});a(296540);var s=()=>a(959013),n=()=>a(972435),i=()=>a(962730),o=()=>a(859428),r=a(474848);function l(e){const{tooltipMessageDescriptor:t,columnHeader:a}=e;return(0,r.jsx)(o().A,{placement:i().W.Top,renderTooltip:e=>(0,r.jsx)("div",{...e,children:(0,r.jsx)(s().sA,{...t})}),render:e=>(0,r.jsx)("div",{...e,children:n().A.formatMessage(a)})})}},887720:(e,t,a)=>{a.d(t,{x:()=>h});var s=a(296540),n=()=>a(401497),i=()=>a(582684),o=()=>a(972435),r=()=>a(541558),l=()=>a(766558),d=()=>a(406699),c=()=>a(285790),u=()=>a(14235),g=()=>a(859428),m=()=>a(490094),p=a(474848);function h(e){const{appliedSorts:t,openSortPillMenu:a}=e,[h,f]=(0,s.useState)(!1),x=Boolean(null==t?void 0:t.length),v=function(e){let{hasSort:t}=e;return(0,n().IS)((e=>({iconStyle:{width:21,height:void 0,fill:t?e.icon.uiBluePrimary:e.actionMenuButtonTextColor},buttonStyle:(0,l().j)({theme:e,isInHomeWidget:!1})})),[t])}({hasSort:x}),y=(0,s.useCallback)((()=>{x?a():f(!0)}),[f,a,x]),b=o().A.formatMessage(r().CL.menuTitle);return(0,p.jsx)(u().Ay,{popupType:d().z7.Popup,open:h,origin:(0,p.jsx)(g().A,{renderTooltip:()=>b,render:e=>(0,p.jsx)(c().A,{...e,ariaLabel:b,icon:i().C,iconStyle:v.iconStyle,style:v.buttonStyle,onClick:y})}),onDismiss:()=>f(!1),originGap:4,render:()=>(0,p.jsx)(m().J,{...e,currentSorts:t,onClick:e=>{a(e),f(!1)}})})}},888867:(e,t,a)=>{a.d(t,{s:()=>n});a(296540);const s={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M10.326 3.617c.62-.773 1.537-1.242 2.674-1.242s2.055.47 2.675 1.242c.608.757.9 1.765.9 2.824s-.292 2.066-.9 2.824c-.62.772-1.538 1.241-2.675 1.241s-2.054-.469-2.674-1.241c-.608-.758-.9-1.766-.9-2.824 0-1.059.292-2.067.9-2.824M7.798 14.953c.848-1.963 2.868-3.324 5.202-3.324s4.354 1.36 5.202 3.324c.309.715.125 1.419-.309 1.912-.418.476-1.064.76-1.743.76h-6.3c-.68 0-1.325-.284-1.743-.76-.434-.493-.618-1.197-.309-1.912M5.6 4.742c-.871 0-1.582.361-2.062.96-.468.582-.686 1.35-.686 2.142s.218 1.56.686 2.143c.48.598 1.19.959 2.062.959.87 0 1.582-.361 2.062-.96.468-.582.686-1.35.686-2.142S8.13 6.284 7.662 5.7c-.48-.598-1.191-.96-2.062-.96m0 6.664a4.33 4.33 0 0 1 2.72.949 6.5 6.5 0 0 0-1.532 2.164 2.86 2.86 0 0 0-.216 1.554H3.85c-.68 0-1.334-.293-1.738-.777-.427-.513-.566-1.246-.131-1.935.744-1.179 2.092-1.955 3.619-1.955"})},n=(0,a(340498).wt)("peopleFill",s)},893468:(e,t,a)=>{a.d(t,{F:()=>l});a(296540);var s=()=>a(401497),n=()=>a(959013),i=()=>a(625383),o=()=>a(125565),r=a(474848);function l(e){let{lastActiveAt:t,containerStyle:a,useSecondaryColorTitle:l,isNoActivitySecondaryColor:d}=e;const c=(0,s().IS)((e=>({container:{...a}})),[a]);return(0,r.jsx)("div",{style:c.container,children:t?(0,r.jsx)(i().d,{useSecondaryColorTitle:l,dateTs:t}):(0,r.jsx)(o().A,{isSecondaryColor:d,children:(0,r.jsx)(n().sA,{id:"identityAndProvisioning.managedUsers.table.lastActive.unknown",defaultMessage:"No activity"})})})}},911259:(e,t,a)=>{a.d(t,{F:()=>i});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M13.042 9.554a.625.625 0 0 1-.884 0l-1.533-1.533v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 0 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"}),(0,s.jsx)("path",{d:"M17.625 10a7.625 7.625 0 1 1-15.25 0 7.625 7.625 0 0 1 15.25 0M10 16.375a6.375 6.375 0 1 0 0-12.75 6.375 6.375 0 0 0 0 12.75"})]})},i=(0,a(340498).wt)("arrowInCircleUp",n)},920495:(e,t,a)=>{a.d(t,{n:()=>i});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M13.3 14.25a.55.55 0 0 1-.55.55h-5.5a.55.55 0 1 1 0-1.1h5.5a.55.55 0 0 1 .55.55m-.55-1.95a.55.55 0 1 0 0-1.1h-5.5a.55.55 0 0 0 0 1.1z"}),(0,s.jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125V8.121c0-.563-.224-1.104-.622-1.502L11.63 2.997a2.13 2.13 0 0 0-1.502-.622zM5.375 4.5c0-.483.392-.875.875-.875h3.7V6.25A2.05 2.05 0 0 0 12 8.3h2.625v7.2a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875zm8.691 2.7H12a.95.95 0 0 1-.95-.95V4.184z"})]})},i=(0,a(340498).wt)("page",n)},922189:(e,t,a)=>{a.d(t,{u:()=>i});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M10 5.125c-.95 0-1.723.393-2.245 1.044-.51.635-.75 1.474-.75 2.346s.24 1.71.75 2.346c.522.65 1.295 1.044 2.245 1.044s1.723-.394 2.245-1.044c.51-.635.75-1.474.75-2.346s-.24-1.711-.75-2.346c-.522-.65-1.294-1.044-2.245-1.044"}),(0,s.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 0 0-4.087 11.268C6.702 13.495 8.246 12.56 10 12.56s3.298.934 4.087 2.332A6.375 6.375 0 0 0 10 3.626"})]})},i=(0,a(340498).wt)("personCircleFill",n)},926938:(e,t,a)=>{a.d(t,{q:()=>r});var s=()=>a(484714),n=()=>a(187174),i=()=>a(534177),o=()=>a(449506);function r(){const e=(0,s().v3)(),[{status:t,error:a,value:r},l]=(0,n().Yb)((async()=>{const t=await o().callApi({eventName:"getUserOrganizations",environment:e,data:{}});if("success"===t.type)return t.data;if("failed"===t.type)throw t.error;return(0,i().HB)(t)}),[e]);return{organizationsInfo:(null==r?void 0:r.organizationsInfo)??[],loading:"pending"===t||"idle"===t,error:a,refresh:l}}},976519:(e,t,a)=>{a.d(t,{q:()=>i});a(898992),a(354520);var s=()=>a(56366),n=()=>a(988499);function i(e){return(0,s().K8)((()=>{if(!e)return!1;const t=n().A.state.teams.filter((e=>e.isDefault()&&!e.isArchived()));return 1===t.length&&t[0].id===e}),[e])}},976721:(e,t,a)=>{a.d(t,{Dw:()=>S,Hc:()=>b,o5:()=>y});a(16280),a(296540);var s=()=>a(857639),n=()=>a(183607),i=()=>a(433847),o=()=>a(161479),r=()=>a(959013),l=()=>a(496603),d=()=>a(701763),c=()=>a(901389),u=()=>a(579627),g=()=>a(317909),m=()=>a(125565),p=()=>a(247123),h=()=>a(406792),f=()=>a(630116),x=()=>a(663590),v=a(474848);async function y(e){let{newRole:t,...a}=e;const s=a.oldPermissionItem,n=(0,l().o8)(s);return n.role=t,await b({newPermissionItem:n,...a})}async function b(e){const{oldPermissionItem:t,newPermissionItem:a,wasInherited:n,environment:r,store:l,sudoModeStore:c,restrictingVisibility:m,fromPermissionWrapper:p,trustedDomainsLoggingData:v}=e,y=(0,x().FI)();if(!(0,i().nK)(t,a))throw new Error("Permission type mismatch.");const b=!!c&&c.shouldSaveTransactionWithSudoMode(l),j=(0,i().$q)(t.role,a.role);if(n&&j!==a.role||m){return await S({environment:r,useSudoMode:b,store:l,permissionItem:a,fromPermissionWrapper:p,isRedesignEnabled:y,shouldInherit:!0,trustedDomainsLoggingData:v})}return l instanceof f().Bv&&!l.isTopLevel()&&t.role!==a.role&&j!==t.role&&d().MR(r),g().createAndCommit({userAction:"PermissionItem.handlePermissionItemChange",environment:r,canUndo:!0,useSudoMode:b,perform:t=>{const s=h().default.DO_NOT_USE_markLegacy("share_menu.update_page_permission_lag");u().wd({environment:r,store:l,permissionItems:[a],transaction:t,pagePermissionChangeLocation:e.location,metric:s,fromPermissionWrapper:p})}}),"trusted_domain_permission"===a.type&&s().log({level:"warning",from:"shareMenu.handlePermissionItemChange",type:"TrustedDomainPermissionChange",spaceId:(0,o().e)(l.pointer.spaceId),data:{miscDataToConvertToString:{message:"shareMenu.handlePermissionItemChange updating trusted domain permission",blockId:l.id,oldPermissionItem:t,newPermissionItem:a,trustedDomainsLoggingData:v}}}),!0}async function S(e){const{environment:t,useSudoMode:a,store:s,permissionItem:i,fromPermissionWrapper:o,isRedesignEnabled:l,shouldInherit:d,trustedDomainsLoggingData:h}=e,f="none"===(null==i?void 0:i.role)?{type:"remove",permissionItem:i}:{type:"restrict"};return!!("user_permission"===(null==i?void 0:i.type)&&(null==i?void 0:i.user_id)===t.currentUser.id||(l?await c().Gh({message:(0,p().r6)(f,l),description:(0,v.jsx)(m().A,{isSmall:!0,isMultiline:!0,children:(0,v.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.footer.whisperTextV2",defaultMessage:"Changing this will unlink this page from its parent, so it will no longer inherit share settings. Admins can still restore settings on unlinked pages."})}),acceptLabel:(0,p().QU)(f,l),icon:(0,n().X)({height:24,width:24})}):await c().Gh({message:(0,p().r6)(f),acceptLabel:(0,p().QU)(f),cancelLabel:(0,v.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,v.jsx)(m().A,{isSmall:!0,isMultiline:!0,children:(0,v.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.footer.whisperText",defaultMessage:"Admins will still be able to restore permissions from restricted pages."})})})).accept)&&(g().createAndCommit({userAction:"PermissionItem.onAccept",environment:t,canUndo:!0,useSudoMode:a,perform:e=>{u().wW({environment:t,store:s,permissionItem:i,shouldInherit:d,transaction:e,fromPermissionWrapper:o,trustedDomainsLoggingData:h})}}),!0)}},978604:(e,t,a)=>{a.d(t,{H:()=>f,K:()=>x});var s=a(296540),n=()=>a(484714),i=()=>a(689094),o=()=>a(959013),r=()=>a(534177),l=()=>a(908928),d=()=>a(901389),c=()=>a(972435),u=()=>a(962730),g=()=>a(493823),m=()=>a(859428),p=a(474848);const h=(0,o().YK)({failedCreatingNewScimToken:{id:"scimTokenSettings.error.failedCreatingNewScimToken",defaultMessage:"Failed to create a new SCIM token, please try again later."}});async function f(e){let{environment:t,spaceStore:a,userStore:s}=e;const{botStore:n,transactionPromise:i}=l().gI({environment:t,spaceStore:a,name:"SCIM",userId:s.id,spaceRole:"editor",type:"scim"});return await i,n.id}function x(e){const[t,a]=(0,s.useState)(!1),l=(0,n().v3)();const x=!t&&"Able"===e.tokenCreationAbility,v=t||"Able"!==e.tokenCreationAbility,y=(0,p.jsx)(g().p,{isBlue:x,isLightGray:v,disabled:v,style:{position:"relative",marginLeft:"auto",marginRight:0},icon:e=>(0,i().W)({...e,width:14,height:14,fill:"inherit",marginRight:"6px"}),onClick:async function(){a(!0);try{const t=await f({...e,environment:l});e.onNewScimToken(t)}catch(t){d().f1(c().A.formatMessage(h.failedCreatingNewScimToken))}a(!1)},children:(0,p.jsx)(o().sA,{id:"scimTokenSettings.NewSCIMTokenButton.title",defaultMessage:"Add token"})});let b;switch(e.tokenCreationAbility){case"Able":return y;case"Undefined":b=(0,p.jsx)(o().sA,{defaultMessage:"Not able to create a new SCIM token right now. Please try again later.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.undefined"});break;case"SpaceHasExistingToken":b=(0,p.jsx)(o().sA,{defaultMessage:"To create a new SCIM token, please revoke the existing token.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.spaceHasLegacyToken"});break;case"UserHasExistingToken":b=(0,p.jsx)(o().sA,{defaultMessage:"You already have a registered SCIM token. To create a new one, please revoke the token created by you.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.userHasExistingToken"});break;default:(0,r().HB)(e.tokenCreationAbility)}return(0,p.jsx)(m().A,{textWrap:!1,renderTooltip:()=>b,placement:u().W.Right,render:e=>(0,p.jsx)("div",{...e,style:{paddingLeft:"4px"},children:y})})}},978625:(e,t,a)=>{a.d(t,{A:()=>l});a(296540);var s=()=>a(484714),n=()=>a(284371),i=()=>a(946548),o=()=>a(297401),r=a(474848);const l=function(e){const{disabled:t,label:n,title:i,onClick:o,isToggle:l,isToggleActive:u,onClickClear:g,...m}=e,p=(0,a(401497).DP)(),h=(0,s().v3)(),f=function(e){return{menuItemLabel:{color:e.lightTextColor}}}(p),x=d(h),v=(0,r.jsx)("span",{style:f.menuItemLabel,children:n});return(0,r.jsx)(a(760217).A,{focused:!1,...m,inline:l,disabled:t,icon:v,title:i,right:(0,r.jsx)(c,{disabled:!!t,isToggle:!!l,isToggleActive:!!u,onClick:o,onClickClear:g}),onClick:o,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:x.menuItem,desktopIconStyle:x.menuItemLabel})};function d(e){return{menuItem:{background:void 0,minHeight:void 0,fontSize:e.device.isMobile?n().J.UISmall.mobile:n().J.UIRegular.desktop,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}function c(e){let{disabled:t,isToggle:a,isToggleActive:n,onClick:l,onClickClear:c=(()=>{})}=e;const u=d((0,s().v3)()).rightWrapper;return a?(0,r.jsx)("div",{style:u,children:(0,r.jsx)(i().A,{on:!!n,onClick:l})}):(0,r.jsx)(o().A,{disabled:t,onClick:c})}},981982:(e,t,a)=>{a.d(t,{G0:()=>M,V$:()=>I,VX:()=>C});a(898992),a(354520),a(672577),a(581454),a(737550);var s=a(296540),n=()=>a(56366),i=()=>a(401497),o=()=>a(784892),r=()=>a(959013),l=()=>a(496603),d=()=>a(534177),c=()=>a(722872),u=()=>a(223544),g=()=>a(567865),m=()=>a(493823),p=()=>a(760217),h=()=>a(928600),f=()=>a(939740),x=()=>a(554509),v=()=>a(204063),y=()=>a(228927),b=()=>a(89924),S=()=>a(125565),j=()=>a(881690),w=()=>a(297780),A=a(474848);function M(e){const{pillTitle:t,selectedItem:a,items:s,shouldHidePrefix:n,selectionRequired:i}=e,o=s.find((e=>(0,l().n4)(e.value,a)));return(0,A.jsx)(g().zr,{...e,renderMenu:e=>(0,A.jsx)(k,{...e,pillTitle:t,selectionRequired:i}),pillTitle:(0,A.jsx)("div",{style:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis"},children:n?o?o.shortTitle:t:(0,A.jsxs)(A.Fragment,{children:[t,Boolean(o)?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("span",{children:": "}),(0,A.jsx)("span",{children:null==o?void 0:o.shortTitle})]}):void 0]})})})}function C(e){const{pillTitle:t}=e,[a,n]=(0,s.useState)(e.selectedItems);return(0,A.jsx)(T,{...e,tempSelectedItems:a,setTempSelectedItems:n,renderMenu:e=>(0,A.jsx)(k,{...e,pillTitle:t})})}function I(e){const{pillTitle:t,pageSize:a,searchPlaceholder:n,items:i}=e,[o,r]=(0,s.useState)(e.selectedItems),[l,d]=(0,s.useState)("");return(0,A.jsx)(T,{...e,tempSelectedItems:o,setTempSelectedItems:r,onToggleSelected:()=>d(""),renderMenu:e=>(0,A.jsx)(_,{...e,items:i,pageSize:a,pillTitle:t,searchPlaceholder:n,tempSelectedItems:o,setTempSelectedItems:r,query:l,setQuery:d})})}function T(e){const{pillTitle:t,selectedItems:a,items:s,renderMenu:n,tempSelectedItems:i,setTempSelectedItems:o}=e;let d;if(1===a.length){const e=s.find((e=>(0,l().n4)(e.value,a[0])));d=(null==e?void 0:e.shortTitle)||(null==e?void 0:e.title)}else a.length>1&&(d=(0,A.jsx)(r().sA,{id:"settingsConsoleFilterPill.numSelected",defaultMessage:"{count} selected",values:{count:a.length}}));return(0,A.jsx)(g().m1,{...e,tempSelectedItems:i,setTempSelectedItems:o,renderMenu:n,pillTitle:(0,A.jsxs)("div",{children:[t,Boolean(d)?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("span",{children:": "}),(0,A.jsx)("span",{children:d})]}):void 0]})})}function k(e){let{items:t,toggleSelectedItem:a,renderItemOptionIcon:s,menuListStore:n,clearSelection:i,pillTitle:o,selectAll:l,shouldUseCheck:d,selectionRequired:g,onSubmit:S,handleScroll:j,renderSearchInput:w}=e;const M=D(),C={key:"menuOptions",items:t.length?t.map((e=>({key:e.key,action:()=>a(e.value),render:t=>(0,A.jsx)(p().A,{...t,icon:d?void 0:s(e.value),title:e.title,caption:e.caption,shouldWrapCaption:e.wrapCaption,dontShrinkTitle:e.dontShrinkTitle,hoveredStyle:M.hoveredItem,right:d?s(e.value):(0,A.jsx)(x().D,{colorName:"tertiary",children:e.count})})}))):[u().v8],render:e=>(0,A.jsx)(b().A,{...e,title:null,loading:!1})};return(0,A.jsxs)("div",{style:M.container,children:[(0,A.jsxs)(b().A,{topBorder:!1,style:M.header,children:[(0,A.jsx)(x().D,{styleName:"UISmall-12px/Medium",colorName:"tertiary",children:o}),l?(0,A.jsx)("div",{style:M.buttonContainer,children:(0,A.jsx)(m().p,{onClick:l,isBlue:!0,size:"xs",children:(0,A.jsx)(r().sA,{id:"settingsConsoleFilterPill.selectAllButton",defaultMessage:"Select all"})})}):void 0]}),w?w():void 0,(0,A.jsxs)(h().A,{menuType:c().gu.Popup,header:null,maxHeight:250,width:320,children:[(0,A.jsx)(f().Ay,{type:f().Oh.Vertical,store:n,initialFocus:void 0,sections:[C]}),j&&(0,A.jsx)(y().A,{onChange:j})]}),(0,A.jsxs)(b().A,{topBorder:!0,style:M.footer,children:[g?(0,A.jsx)("div",{}):(0,A.jsx)(m().p,{onClick:i,style:M.clearButton,children:(0,A.jsx)(r().sA,{id:"settingsConsoleFilterPill.clearButton",defaultMessage:"Clear"})}),(0,A.jsx)(v().A,{onClick:S,children:(0,A.jsx)(r().sA,{id:"core.baseFilterPill.doneButton",defaultMessage:"Apply"})})]})]})}function _(e){const{items:t,pageSize:a,searchPlaceholder:i,tempSelectedItems:r,setTempSelectedItems:c,query:u,setQuery:g}=e,m=D(),p=(0,s.useMemo)((()=>u?t.filter((e=>e.searchTerms.some((e=>e.includes(u.toLowerCase()))))):t),[u,t]),h=(0,s.useCallback)((e=>{g(e.target.value)}),[g]),[f,x]=(0,s.useState)(a),v=(0,s.useMemo)((()=>a?p.slice(0,f):p),[p,f,a]);const y=(0,n().K8)((()=>r.map((e=>{const a=t.find((t=>(0,l().n4)(t.value,e)));if(a)return(0,A.jsx)(j().A,{isSingle:!0,format:o().NY.Inline,style:m.tokenContainer,showRemoveButton:!0,onClickRemove:()=>{const e=r.filter((e=>!(0,l().n4)(e,a.value)));c(e)},value:(0,A.jsxs)("div",{style:m.tokenContents,children:[a.tokenIcon,(0,A.jsx)(S().A,{children:a.shortTitle})]}),backgroundColor:a.tokenColor},a.key)})).filter(d().O9)),[r,c,m,t]);return(0,A.jsx)(k,{...e,toggleSelectedItem:t=>{e.toggleSelectedItem(t),g("")},items:v,handleScroll:function(e){a&&f&&e<5&&f<p.length&&x(f+a)},renderSearchInput:()=>(0,A.jsx)(w().A,{focus:!0,value:u,style:m.search,placeholder:i??"",onChange:h,onRemoveLastToken:()=>{const e=r.slice(0,-1);c(e)},tokens:y})})}function D(){return(0,i().IS)((e=>({container:{padding:"8px 0 6px"},header:{padding:"0px 8px 6px 12px",justifyContent:"space-between",display:"flex",alignItems:"center",flexDirection:"row"},icon:{width:12,marginRight:6,fill:"currentColor"},buttonContainer:{display:"flex",alignItems:"center"},check:{width:16,height:16,color:e.text.tertiary},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},clearButton:{fontWeight:500},search:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},tokenContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},tokenContainer:{margin:"0px 6px 6px 0px",height:20},hoveredItem:{background:e.buttonHoveredBackground}})),[])}},994776:(e,t,a)=>{a.d(t,{t:()=>d});a(296540);var s=()=>a(401497),n=()=>a(750559),i=()=>a(959013),o=()=>a(284371),r=()=>a(864943),l=a(474848);function d(e){let{runNewSearch:t,error:a}=e;const d=(0,s().IS)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:28,height:28,color:e.redBadgeBackground,fill:"currentColor"},title:{margin:"8px auto",fontWeight:o().Wy.medium,fontSize:16},description:{fontWeight:o().Wy.regular,fontSize:14,lineHeight:1.3,color:e.lightTextColor,textAlign:"center",width:328,margin:"0 auto 16px"},errorMessage:{borderRadius:4,background:e.cardBackground,fontFamily:o().Tf.mono,fontSize:12,color:e.lightTextColor,padding:"18px 24px",margin:"0 auto 12px"},errorButton:{width:195,margin:"8px auto 0",textAlign:"center"}})),[]);return(0,l.jsxs)("div",{style:d.container,children:[(0,n().f)(d.headerIcon),(0,l.jsx)("h1",{style:d.title,children:(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.error.title",defaultMessage:"Something went wrong"})}),(0,l.jsx)("p",{style:d.description,children:(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.error.description",defaultMessage:"Something went wrong when we were loading the results. Try to run your search again."})}),null,(0,l.jsx)(r().A,{size:"lg",style:d.errorButton,onClick:()=>t(!0),children:(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.error.confirm",defaultMessage:"Retry"})})]})}}}]);