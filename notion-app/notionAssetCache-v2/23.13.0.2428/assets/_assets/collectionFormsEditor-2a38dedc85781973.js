"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[86227],{261164:(e,o,t)=>{t.d(o,{o:()=>r});t(296540);var n=t(474848);const r=(0,t(340498).wt)("arrowRightRounded",{viewBox:"0 0 16 13",svg:(0,n.jsx)("path",{d:"M15.3828 6.85156C15.3828 7.09635 15.2917 7.3099 15.1094 7.49219L9.95312 12.6328C9.77083 12.8099 9.5651 12.8984 9.33594 12.8984C9.09635 12.8984 8.89583 12.8203 8.73438 12.6641C8.57812 12.5078 8.5 12.3125 8.5 12.0781C8.5 11.9583 8.52083 11.8464 8.5625 11.7422C8.60938 11.638 8.67188 11.5469 8.75 11.4688L10.5 9.70312L13.4141 7.04688L13.6875 7.54688L10.9766 7.70312H1.48438C1.22396 7.70312 1.01302 7.625 0.851562 7.46875C0.695312 7.30729 0.617188 7.10156 0.617188 6.85156C0.617188 6.59635 0.695312 6.39062 0.851562 6.23438C1.01302 6.07292 1.22396 5.99219 1.48438 5.99219H10.9766L13.6875 6.15625L13.4141 6.66406L10.5 4L8.75 2.22656C8.67188 2.14844 8.60938 2.0599 8.5625 1.96094C8.52083 1.85677 8.5 1.74219 8.5 1.61719C8.5 1.38281 8.57812 1.1875 8.73438 1.03125C8.89583 0.875 9.09635 0.796875 9.33594 0.796875C9.45052 0.796875 9.5599 0.820312 9.66406 0.867188C9.76823 0.914062 9.86719 0.984375 9.96094 1.07812L15.1094 6.21094C15.2917 6.39323 15.3828 6.60677 15.3828 6.85156Z"})})},343168:(e,o,t)=>{t.d(o,{A:()=>r});class n extends(()=>t(757695))().default{getInitialState(){return{openTooltip:void 0}}}const r=new n},536308:(e,o,t)=>{t.r(o),t.d(o,{formEditorActions:()=>n()});var n=()=>t(894995)},590856:(e,o,t)=>{t.d(o,{y:()=>r});t(296540);var n=t(474848);const r=(0,t(340498).wt)("collectionForm",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M5.50195 4.75635C5.37435 4.75635 5.26953 4.71305 5.1875 4.62646C5.10547 4.53988 5.06445 4.43734 5.06445 4.31885C5.06445 4.1958 5.10547 4.09326 5.1875 4.01123C5.26953 3.9292 5.37435 3.88818 5.50195 3.88818H10.5059C10.6289 3.88818 10.7314 3.9292 10.8135 4.01123C10.8955 4.09326 10.9365 4.1958 10.9365 4.31885C10.9365 4.43734 10.8955 4.53988 10.8135 4.62646C10.7314 4.71305 10.6289 4.75635 10.5059 4.75635H5.50195ZM5.50195 7.0874C5.37435 7.0874 5.26953 7.04639 5.1875 6.96436C5.10547 6.87777 5.06445 6.77295 5.06445 6.6499C5.06445 6.53141 5.10547 6.43115 5.1875 6.34912C5.26953 6.26709 5.37435 6.22607 5.50195 6.22607H10.5059C10.6289 6.22607 10.7314 6.26709 10.8135 6.34912C10.8955 6.43115 10.9365 6.53141 10.9365 6.6499C10.9365 6.77295 10.8955 6.87777 10.8135 6.96436C10.7314 7.04639 10.6289 7.0874 10.5059 7.0874H5.50195ZM5.50195 9.42529C5.37435 9.42529 5.26953 9.38428 5.1875 9.30225C5.10547 9.22021 5.06445 9.11995 5.06445 9.00146C5.06445 8.87842 5.10547 8.77588 5.1875 8.69385C5.26953 8.60726 5.37435 8.56396 5.50195 8.56396H7.92188C8.04948 8.56396 8.1543 8.60726 8.23633 8.69385C8.31836 8.77588 8.35938 8.87842 8.35938 9.00146C8.35938 9.11995 8.31836 9.22021 8.23633 9.30225C8.1543 9.38428 8.04948 9.42529 7.92188 9.42529H5.50195ZM2.13867 13.1577V2.84229C2.13867 2.10856 2.32552 1.55257 2.69922 1.17432C3.07292 0.791504 3.62663 0.600098 4.36035 0.600098H11.6406C12.3743 0.600098 12.9281 0.791504 13.3018 1.17432C13.6755 1.55257 13.8623 2.10856 13.8623 2.84229V13.1577C13.8623 13.896 13.6755 14.4543 13.3018 14.8325C12.9281 15.2108 12.3743 15.3999 11.6406 15.3999H4.36035C3.62663 15.3999 3.07292 15.2108 2.69922 14.8325C2.32552 14.4543 2.13867 13.896 2.13867 13.1577ZM3.48535 13.0757C3.48535 13.3901 3.56738 13.6317 3.73145 13.8003C3.89551 13.9689 4.14388 14.0532 4.47656 14.0532H11.5312C11.8639 14.0532 12.1123 13.9689 12.2764 13.8003C12.4404 13.6317 12.5225 13.3901 12.5225 13.0757V2.93115C12.5225 2.61214 12.4404 2.36833 12.2764 2.19971C12.1123 2.02653 11.8639 1.93994 11.5312 1.93994H4.47656C4.14388 1.93994 3.89551 2.02653 3.73145 2.19971C3.56738 2.36833 3.48535 2.61214 3.48535 2.93115V13.0757Z"})})},894995:(e,o,t)=>{t.r(o),t.d(o,{FORMS_SHARE_CALLOUT_KEY:()=>J,changeFormClosedState:()=>de,changeFormSubmissionPermissions:()=>me,createAndFocusCollectionFormEditorView:()=>ne,createCollectionFormEditorView:()=>re,createDummyFormPage:()=>ye,createFormInPrivate:()=>ie,createFormQuestion:()=>se,createFormQuestionAndModuleForNewlyDuplicatedProperty:()=>ce,createFormQuestionAndUpdateOrCreateModule:()=>le,createResponsesCollectionView:()=>ae,handleUpdateFormQuestionName:()=>ee,incrementAndTrackUserFormsCreated:()=>X,maybeAlertAboutUnsupportedPublicQuestions:()=>ge,maybeSyncQuestionNameToPropertyName:()=>oe,remapQuestionToNewProperty:()=>fe,toggleAnonymousFormSubmissionState:()=>ue,toggleNotionBrandingState:()=>pe});t(16280),t(944114),t(898992),t(354520),t(672577),t(803949),t(296540);var n=()=>t(401497),r=()=>t(584262),i=()=>t(700500),a=()=>t(31503),s=()=>t(970013),c=()=>t(713998),l=()=>t(110192),d=()=>t(416504),m=()=>t(261164),u=()=>t(590856),p=()=>t(29118),f=()=>t(235692),y=()=>t(388821),g=()=>t(450648),v=()=>t(179034),C=()=>t(869558),S=()=>t(37165),h=()=>t(144081),I=()=>t(919709),b=()=>t(959013),A=()=>t(498212),_=()=>t(183558),w=()=>t(284371),x=()=>t(235191),M=()=>t(669548),Q=()=>t(901389),F=()=>t(896628),T=()=>t(246826),N=()=>t(857783),P=()=>t(185544),R=()=>t(317909),V=()=>t(755199),k=()=>t(478251),E=()=>t(180762),B=()=>t(989423),D=()=>t(389658),L=()=>t(682146),U=()=>t(594794),j=()=>t(972435),z=()=>t(465425),q=()=>t(978846),H=()=>t(33218),O=()=>t(351360),Z=()=>t(508496),W=()=>t(343168),G=()=>t(611371),K=()=>t(465741),Y=t(474848);const $=(0,b().YK)({responsesViewName:{id:"formEditorActions.responsesViewName",defaultMessage:"Responses"},newFormViewName:{id:"formEditorActions.newFormViewName",defaultMessage:"Form builder"},formDatabaseTitle:{id:"newBlock.databaseInline.formDatabaseTitle",defaultMessage:"New form"}}),J="forms_share_form_tooltip";function X(e,o){const{currentUserSettingsStore:t}=O().default.state;if(!t)return;const n=function(){const{currentUserSettingsStore:e}=O().default.state;if(!e)return;return e.getSettingsStore().getKeyStore("user_forms_created_count").getValue()??0}();void 0!==n&&(V().mJ({userSettingsStore:t,transaction:o,data:{user_forms_created_count:n+1}}),function(e,o){(0,B().u4)({environment:e,event:{eventName:"form_created",eventProperties:{user_total_form_count:o.userFormsCreatedCount}}})}(e,{userFormsCreatedCount:n+1})),Z().default.logEvent("form_created")}function ee(e){var o;const{questionStore:t,newName:n,environment:r,collectionStore:i,collectionSchema:a,collectionContextStore:s}=e,c=null===(o=t.getConfig())||void 0===o?void 0:o.propertyId;if(!c)throw new Error("No property ID found for question");R().createAndCommit({userAction:"formQuestion.changeName",environment:r,canUndo:!0,perform:e=>{var o,r;const l=null===(o=t.getConfig())||void 0===o?void 0:o.name;if(!l)return;const m=(0,g().r4)({textValue:l,getRecordModel:t.getRecordModel,deterministic:!0,userTimeZone:(0,d().P)(),intl:j().A.getIntl()})===(null===(r=a[c])||void 0===r?void 0:r.name);R().applyOperation({store:t,operation:{pointer:t.pointer,path:["config","name"],command:"set",args:[[n]]},transaction:e}),t.shouldSyncQuestionNameToPropertyName()&&(m&&!(0,L().fE)({property:c,collectionContextStore:s,newValue:n})?x().YO({collectionStore:i,property:c,name:n,transaction:e}):R().applyOperation({store:t,operation:{pointer:t.pointer,path:["config","shouldSyncQuestionNameToPropertyName"],command:"set",args:!1},transaction:e}))}})}function oe(e){var o;const{questionStore:t,environment:n,collectionStore:r,collectionContextStore:i}=e,a=null===(o=t.getConfig())||void 0===o?void 0:o.propertyId;if(!a)throw new Error("No property ID found for question");R().createAndCommit({userAction:"formQuestion.changeName",environment:n,canUndo:!0,perform:e=>{if(!t.shouldSyncQuestionNameToPropertyName())return;const o=t.getNameStore().getValue();if(!o)return;const n=(0,g().r4)({textValue:o,getRecordModel:t.getRecordModel,deterministic:!0,userTimeZone:(0,d().P)(),intl:j().A.getIntl()}),s=(0,L().fE)({property:a,collectionContextStore:i,newValue:n})?(0,l().Q)(n):n;x().YO({collectionStore:r,property:a,name:s,transaction:e})}})}function te(){const e=(0,n().IS)((e=>({container:{display:"flex",flexDirection:"column"},iconGroup:{display:"flex",flexDirection:"row",justifyContent:"center",color:e.icon.secondary,alignItems:"center"},dialogTitle:{fontSize:16,fontWeight:w().Wy.semibold,lineHeight:"22px",marginTop:12,marginBottom:12},dialogDescription:{color:e.text.secondary,fontSize:14,lineHeight:"20px"}})),[]);return(0,Y.jsxs)("div",{style:e.container,children:[(0,Y.jsxs)("div",{style:e.iconGroup,children:[(0,p().K)({width:24}),(0,m().o)({width:16,marginLeft:16,marginRight:14}),(0,u().y)({width:24})]}),(0,Y.jsx)("span",{style:e.dialogTitle,children:(0,Y.jsx)(b().sA,{defaultMessage:"Auto-create form questions based on existing properties?",id:"NewFormOnExistingCollectionDialogTitle.message"})}),(0,Y.jsx)("span",{style:e.dialogDescription,children:(0,Y.jsx)(b().sA,{defaultMessage:"Only supported property types will create new questions.",id:"NewFormOnExistingCollectionDialogTitle.description"})})]})}function ne(e){const{environment:o,collectionContextStore:t,transaction:n}=e,r=t.collectionViewBlockStore(),i=t.collectionStore();if(!r||!i)return;const s=t.normalizedSchemaStore.state,c=re({environment:o,collectionViewBlockStore:r,schema:s,transaction:n,initializeWithAllDefaultQuestions:!1});if(!c)return;(0,E().t)({environment:o,collectionContextStore:t,collectionViewId:c.newViewId,isFullScreen:t.isFullScreenStore.state,isRootChild:t.isRootChildStore.state,isInPeekRenderer:t.isInPeekRendererStore.state});const l=c.layoutStore,d=Object.keys(s).filter((e=>{const o=s[e];return"title"!==e&&o&&(0,a().Sg)(o)}));d.length>0&&d.length<=K().eb&&Q().ui({showCancel:!1,keepFocus:!1,message:(0,Y.jsx)(te,{}),mode:"wide",items:[{label:(0,Y.jsx)(b().sA,{defaultMessage:"Create {numQuestions, plural, one {1 question} other {{numQuestions} questions}}",id:"formEditorActions.createQuestions.primaryAction",values:{numQuestions:d.length}}),color:"blue",buttonType:"solid",onAccept(){R().createAndCommit({environment:o,userAction:"formActions.autoCreateFormQuestionsForExistingDatabase",canUndo:!0,perform:e=>{for(const n of d)ce({environment:o,transaction:e,layoutStore:l,collectionStore:i,propertyId:n,position:{type:"area_relative",area:"form_layout_schema",location:"end_moveable"},addLayoutModule:t=>{(0,q().UQ)({environment:o,sessionId:(0,A().Ay)(),layoutStore:l,position:t.position??{type:"area_relative",area:"form_layout_schema",location:"end_moveable"},module:t.layoutModule,transaction:e,isPropertyCreation:!1})},collectionContextStore:t,shouldLogEvent:!0,autoCreatedFromExistingDatabase:!0})}})}},{label:(0,Y.jsx)(b().sA,{defaultMessage:"Start from scratch",id:"formEditorActions.createQuestions.secondary"}),color:"gray",buttonType:"plain",onAccept(){}}]})}function re(e){const{environment:o,collectionViewBlockStore:t,transaction:n,schema:r,initializeWithAllDefaultQuestions:i}=e;if(!t)return;const c=t.getSpaceId(),{formBlockStore:l,layoutStore:d}=function(e){var o;const{environment:t,spaceId:n,inMemoryRecordCache:r,transaction:i,schema:c,initializeWithAllDefaultQuestions:l}=e,d=Object.keys(c).find((e=>{var o;return"multi_select"===(null===(o=c[e])||void 0===o?void 0:o.type)})),m=Boolean(l&&void 0!==d),u=(0,U().Z1)({environment:t,table:v().ev,spaceId:n}),p=(0,U().Z1)({environment:t,table:S().lo,spaceId:n}),y=m?(0,U().Z1)({environment:t,table:S().lo,spaceId:n}):void 0,g=T().Wv({id:u,environment:t,type:"form",permissions:(0,a().eb)(),inMemoryRecordCache:r,transaction:i}),C=T().eC({environment:t,table:h().zx,value:{space_id:n,parent_table:v().ev,parent_id:g.id,modules:(0,f().oP)(p,y)},inMemoryRecordCache:r,transaction:i});var I,b;F().zA({stores:[g],update:{form_layout_pointer:{id:C.id,spaceId:n,table:h().zx}},transaction:i}),se({environment:t,questionId:p,spaceId:n,layoutId:C.id,propertyId:s().rn,initialQuestionTitle:(null===(o=c[s().rn])||void 0===o?void 0:o.name)??"",inMemoryRecordCache:r,transaction:i,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1}),m&&y&&d&&se({environment:t,questionId:y,spaceId:n,layoutId:C.id,propertyId:d,initialQuestionTitle:(null===(I=c[d])||void 0===I?void 0:I.name)??"",existingFormQuestionConfig:{propertyId:d,name:[[(null===(b=c[d])||void 0===b?void 0:b.name)??""]],propertyTypeSpecificConfig:{multi_select:{maxSelectionCount:1}}},inMemoryRecordCache:r,transaction:i,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1});return{formBlockStore:g,layoutStore:C}}({environment:o,spaceId:c,inMemoryRecordCache:t.inMemoryRecordCache,transaction:n,schema:r,initializeWithAllDefaultQuestions:i}),m=(0,k().i)({environment:o,collectionViewBlockStore:t,collectionView:{type:"form_editor",parent_id:t.id,parent_table:v().ev,alive:!0,space_id:c,name:j().A.formatMessage($.newFormViewName),format:{form_block_pointer:{id:l.id,spaceId:c,table:v().ev}}},transaction:n});return T().zv({store:l,data:{parent_id:m.id,parent_table:C().Gy,alive:!0},transaction:n}),W().A.setState({openTooltip:m.id}),z().HH(o,J),X(o,n),{newViewId:m.id,layoutStore:d,formId:l.id}}function ie(e){const{environment:o,navigateToFormBuilder:t}=e,{currentSpaceStore:n,currentSpaceViewStore:i}=O().default.state;if(!n||!i)return;if(!(0,G().EF)(o))return void(0,G().QY)(o);if(!(n&&n.canEdit()&&i))return;const a=n.id,s=o.idCreator.getSpaceIdCreatorSync(a);R().createAndCommit({environment:o,userAction:"formActions.createAndNavigateToFormInPrivate",canUndo:!0,perform:e=>{var c;const{targetBlockStore:l}=M().j({environment:o,sourceBlockId:"root",targetBlockPointer:(0,U().zP)({environment:o,table:v().ev,spaceId:a}),sourceBlockSubtree:(0,y().partialRecordMapToRecordMap)(D().mT({isInline:!0,name:(0,I().x9d)(j().A.formatMessage($.formDatabaseTitle))})),targetRecordCache:n.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!1,spaceIdCreator:s}),d=l.getCollectionStore(),m=null==d||null===(c=d.getModel())||void 0===c?void 0:c.getNormalizedSchema(),u=l;if(!m)throw new Error("Schema not found");re({environment:o,transaction:e,collectionViewBlockStore:u,schema:m,initializeWithAllDefaultQuestions:!0}),ae({environment:o,transaction:e,collectionViewBlockStore:u,schema:m}),P().yM({environment:o,spaceStore:n,spaceViewStore:i,pageStore:l,isPrivate:!0,transaction:e,location:{type:"prepend"}}),t&&N().uK({environment:o,store:l,pageVisitSource:r().y8.CreateFormDeepLink})}})}function ae(e){const{environment:o,collectionViewBlockStore:t,transaction:n}=e,r=t.getSpaceId(),i=Object.keys(e.schema).find((o=>{var t;return"created_by"===(null===(t=e.schema[o])||void 0===t?void 0:t.type)}));(0,k().i)({environment:o,collectionViewBlockStore:t,collectionView:{type:"table",parent_id:t.id,parent_table:v().ev,alive:!0,name:j().A.formatMessage($.responsesViewName),space_id:r,format:{table_properties:[{property:"title",visible:!0},...i?[{property:i,visible:!0}]:[]],table_wrap:!0,collection_pointer:t.getCollectionPointer()}},transaction:n})}function se(e){const{environment:o,questionId:t,spaceId:n,layoutId:r,propertyId:i,initialQuestionTitle:a,inMemoryRecordCache:s,transaction:c,shouldSyncQuestionNameToPropertyName:l,collectionContextStore:d,shouldLogEvent:m=!0,autofocusTitle:u,existingFormQuestionConfig:p,autoCreatedFromExistingDatabase:f}=e;T().eC({environment:o,table:S().lo,value:{id:t,space_id:n,parent_table:h().zx,parent_id:r,alive:!0,config:{...p,propertyId:i,name:[[a]],shouldSyncQuestionNameToPropertyName:l}},inMemoryRecordCache:s,transaction:c}),m&&(0,B().u4)({environment:o,event:{eventName:"add_form_question",eventProperties:{...(0,K().YA)({collectionContextStore:d,propertyId:i,questionId:t}),auto_created_from_existing_database:Boolean(f)}}}),u&&u.autofocusedQuestionTextStore.autofocusQuestionTitle({questionId:t})}function ce(e){const{environment:o,transaction:t,layoutStore:n,collectionStore:r,propertyId:i,position:a,addLayoutModule:s,collectionContextStore:c,shouldLogEvent:l=!0,autofocusTitle:d,existingFormQuestionConfig:m,autoCreatedFromExistingDatabase:u}=e,p=r.getSchema()[i];if(!p)throw new Error(`No schema found for property ${i}`);const f=m?(0,I().q4_)(null==m?void 0:m.name):p.name,y=n.getSpaceId(),g=(0,U().Z1)({environment:o,table:S().lo,spaceId:y});return se({environment:o,questionId:g,spaceId:y,layoutId:n.id,propertyId:i,initialQuestionTitle:f,inMemoryRecordCache:n.inMemoryRecordCache,transaction:t,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:l,collectionContextStore:c,autofocusTitle:d,existingFormQuestionConfig:m,autoCreatedFromExistingDatabase:u}),s({layoutModule:{type:"formQuestion",id:(0,_().Ay)(),formQuestionId:g},position:a,transaction:t}),{questionId:g}}function le(e){const{environment:o,transaction:t,layoutStore:n,propertyId:r,initialQuestionTitle:i,moduleId:a,shouldSyncQuestionNameToPropertyName:s,collectionContextStore:c,autofocusTitle:l,area:d,sessionId:m}=e,u=n.getModel();if(!u)throw new Error("Layout model cannot be undefined");const p=n.getSpaceId(),f=(0,U().Z1)({environment:o,table:S().lo,spaceId:p});se({environment:o,questionId:f,spaceId:p,layoutId:u.id,propertyId:r,initialQuestionTitle:i,inMemoryRecordCache:n.inMemoryRecordCache,transaction:t,shouldSyncQuestionNameToPropertyName:s,collectionContextStore:c,autofocusTitle:l});const y={type:"formQuestion",id:a??(0,_().Ay)(),formQuestionId:f,..."form_conditional_modules"===d?{parentModuleId:e.parentModuleId,parentConditionalGroupId:e.parentConditionalGroupId}:{}};return a?(0,H().UQ)({environment:o,transaction:t,layoutStore:n,position:{area:d,moduleId:a},updatedModule:y}):"form_conditional_modules"===d&&(0,q().UQ)({environment:o,transaction:t,layoutStore:n,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:e.parentConditionalGroupId,parentModuleId:e.parentModuleId},module:y,sessionId:m,isPropertyCreation:!1}),{updatedModuleId:y.id,formQuestionId:f}}function de(e){let{environment:o,formBlockStore:t,isClosed:n}=e;t.getIsFormClosed()!==n&&R().createAndCommit({userAction:"formActions.changeFormClosedState",environment:o,canUndo:!0,perform:e=>{F().zA({stores:[t],update:{form_config:{...t.getFormConfig(),is_form_closed:n}},transaction:e})}})}function me(e){let{environment:o,formBlockStore:t,permissions:n}=e;t.getFormSubmissionPermissions()!==n&&R().createAndCommit({userAction:"formActions.changeFormSubmissionPermissions",environment:o,canUndo:!0,perform:e=>{F().zA({stores:[t],update:{form_config:{...t.getFormConfig(),submission_permissions:n}},transaction:e})}})}function ue(e){let{environment:o,formBlockStore:t}=e;const n=t.getIsFormAnonymousSubmissionEnabled();R().createAndCommit({userAction:"formActions.changeAnonymousFormSubmissionState",environment:o,canUndo:!0,perform:e=>{F().zA({stores:[t],update:{form_config:{...t.getFormConfig(),anonymous_submissions:!n}},transaction:e})}})}function pe(e){var o;let{environment:t,formBlockStore:n}=e;const r=n.getSiteStore();if(!r)return;const i=(null===(o=r.getHeader())||void 0===o?void 0:o.hideWatermark)??!1;R().createAndCommit({userAction:"formBlockStore.publicForm.toggleNotionBranding",environment:t,canUndo:!0,perform:e=>{R().applyOperation({store:r,operation:{pointer:r.pointer,path:["header","hideWatermark"],command:"set",args:!i},transaction:e})}})}function fe(e){let{environment:o,newPropertyId:t,formQuestionStore:n}=e;R().createAndCommit({userAction:"formQuestion.remapQuestionToNewProperty",environment:o,canUndo:!0,perform:e=>{R().applyOperation({store:n,operation:{pointer:n.pointer,path:["config","propertyId"],command:"set",args:t},transaction:e})}})}function ye(e){const{environment:o,collectionSchema:t,temporaryRecordCache:n,spaceId:r,collectionId:a,formMode:s}=e,c={};Object.keys(t).forEach((e=>{c[e]=(0,I().x9d)("")}));const{performResult:l}=R().createAndCommit({environment:o,userAction:"formActions.createDummyFormPage",perform:e=>{const t=T().Wv({environment:o,type:i().xd.page,inMemoryRecordCache:n,transaction:e,spaceId:r,properties:{...c}});return T().zv({store:t,data:{alive:"viewer"===s,parent_id:a,parent_table:"collection"},transaction:e}),t},canUndo:!1});return l}async function ge(e){const{environment:o,formBlockStore:t,collectionSchema:n,theme:r,onAccept:i}=e;if(!n)return;const a=(0,K().Dx)(t),s=(null==a?void 0:a.getNormalizedFormQuestionStoresForFormLayout({collectionSchema:n}))??[],l=[];if(s.forEach((e=>{const t=e.getPropertyId();if(!t)return;const r=(0,c()._g)({schema:n,property:t}),i=null==r?void 0:r.type;if(!i)return;(0,K().CK)({environment:o,propertyType:i,propertySchema:r,isPublicForm:!0})&&l.push(e)})),0===l.length)return void i();const m=l.map(((e,o)=>{const t=(0,g().r4)({textValue:e.getNameStore().getValue(),getRecordModel:e.getRecordModel,deterministic:!0,userTimeZone:(0,d().P)(),intl:j().A.getIntl()}),n=o===l.length-1;return(0,Y.jsx)("div",{style:{fontSize:14,textAlign:"start",padding:"8px 12px",borderBottom:n?void 0:`1px solid ${r.lightDividerColor}`},children:t},e.id)})),{accept:u}=await Q().Gh({message:(0,Y.jsx)(b().sA,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.message",defaultMessage:"These questions are not supported in public forms and will not be shown to respondents:"}),description:(0,Y.jsx)("div",{style:{borderRadius:6,border:`1px solid ${r.lightDividerColor}`,width:"calc(100% + 24px)",marginLeft:-12,marginTop:12,maxHeight:210,overflow:"auto"},children:m}),acceptLabel:(0,Y.jsx)(b().sA,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.acceptLabel",defaultMessage:"Got it"}),acceptColor:"blue",cancelButtonType:"plain",mode:"wide"});u&&i()}}}]);