"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[66073],{619418:(e,t,a)=>{a.d(t,{Y:()=>u});a(581454),a(296540);var l=()=>a(401497),i=()=>a(534177),r=()=>a(284371),n=()=>a(493823),s=()=>a(554509),o=()=>a(864943),c=()=>a(204063),d=a(474848);function u(e){let{icon:t,title:a,subTitle:i,body:n,actions:o,width:c,style:u}=e;const m=function(e){let{width:t=406,style:a={}}=e;return(0,l().IS)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:`${t}px`,padding:"20px",gap:"24px",...a},header:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"8px",fontWeight:r().Wy.semibold,fontSize:"16px"},headerPadding:{paddingTop:"16px"},actions:{display:"flex",flexDirection:"column",gap:"6px",width:"100%"}})),[t,a])}({width:c,style:u});return(0,d.jsxs)("div",{style:m.container,children:[(0,d.jsxs)("div",{style:{...m.header,...!t&&m.headerPadding},children:[t,a,i?(0,d.jsx)(s().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:i}):null]}),n,(0,d.jsx)("div",{style:m.actions,children:null==o?void 0:o.map(((e,t)=>(0,d.jsx)(p,{...e},`marketplace-modal-action-${t}`)))})]})}function p(e){const t=(0,l().IS)((()=>({plainButton:{justifyContent:"center"},actionError:{textAlign:"center"}})),[]);return(0,d.jsxs)(d.Fragment,{children:[(()=>{switch(e.type){case"primary":return(0,d.jsx)(c().A,{size:"lg",onClick:e.onClick,disabled:e.isDisabled,isLoading:e.isLoading,children:e.text});case"outline":return(0,d.jsx)(o().A,{size:"lg",onClick:e.onClick,children:(0,d.jsx)(s().D,{styleName:"UIRegular-14px/Medium",children:e.text})});case"plain":return(0,d.jsx)(n().p,{size:"lg",onClick:e.onClick,isBlue:e.isBlue,isGray:!e.isBlue,style:t.plainButton,children:(0,d.jsx)(s().D,{styleName:"UIRegular-14px/Medium",children:e.text})});default:(0,i().HB)(e)}})(),e.error&&(0,d.jsx)(s().D,{styleName:"UIRegular-14px/Regular",colorName:"redTertiary",customStyles:t.actionError,children:e.error})]})}},767651:(e,t,a)=>{a.r(t),a.d(t,{MarketplaceEmailCaptureModal:()=>f});var l=a(296540),i=()=>a(484714),r=()=>a(56366),n=()=>a(401497),s=()=>a(959013),o=()=>a(534177),c=()=>a(625830),d=()=>a(623580),u=()=>a(554509),p=()=>a(107683),m=()=>a(453697),x=()=>a(989423),k=()=>a(351360),h=()=>a(396990),y=()=>a(619418),g=a(474848);function f(){const{isOpen:e,emailRequirement:t}=(0,r().O$)(h().A),{trackOpen:a,trackCancel:i}=A();(0,l.useEffect)((()=>{e&&a()}),[e,a]);return(0,g.jsx)(p().s,{isOpen:e,onDismiss:()=>{i({from:"modal_close"}),h().A.cancel()},showCloseIcon:!0,render:()=>{if(e)switch(t){case"optional":return(0,g.jsx)(C,{});case"required":return(0,g.jsx)(j,{});default:(0,o().HB)(t)}return null}})}function b(e){var t;let{title:a,subTitle:i,primaryAction:o,secondaryAction:p}=e;const x=(0,s().tz)(),f=(0,n().IS)((e=>({modalContent:{padding:"28px"},body:{display:"flex",flexDirection:"column",gap:"12px"},input:{cursor:"not-allowed",color:e.text.tertiary},checkboxLabel:{display:"flex",gap:"8px"},checkbox:{marginTop:"2px"}})),[]),[b,C]=(0,l.useState)(!1),[j,v]=(0,l.useState)(""),{trackSubmit:M}=A(),S=(0,r().K8)((()=>{var e;return(null===(e=k().default.state.currentUserStore)||void 0===e?void 0:e.getEmail())||""}),[]),{isOpen:w,creator:D}=(0,r().O$)(h().A);return w?(0,g.jsx)(y().Y,{icon:(0,g.jsx)(m().A,{size:36,avatar:{avatarUrl:(null==D||null===(t=D.attributes)||void 0===t||null===(t=t.image)||void 0===t?void 0:t.url)||"",name:(null==D?void 0:D.name)||""}}),title:a,subTitle:i,body:(0,g.jsxs)("div",{style:f.body,children:[(0,g.jsx)(d().A,{disabled:!0,value:S,inputStyle:f.input}),(0,g.jsxs)("label",{style:f.checkboxLabel,children:[(0,g.jsx)(c().A,{size:14,checked:b,onClick:()=>{v(""),C(!b)},style:f.checkbox,"aria-required":!0,"aria-invalid":Boolean(j)}),(0,g.jsx)(u().D,{as:"span",styleName:"UIRegular-14px/Regular",children:(0,g.jsx)(s().sA,{id:"marketplace.emailCaptureModal.optional.checkboxLabel",defaultMessage:"Allow the creator to add me to their mailing list for updates, promotions, and helpful tips"})})]})]}),actions:[{...o,onClick:()=>{b?(M(),h().A.submit()):v(x.formatMessage({id:"marketplace.emailCaptureModal.required.error",defaultMessage:"Please check the field above to share your email"}))},error:j},p],width:446,style:f.modalContent}):null}function C(){const{trackSkip:e}=A();return(0,g.jsx)(b,{title:(0,g.jsx)(s().sA,{id:"marketplace.emailCaptureModal.optional.title",defaultMessage:"Share your email with the creator"}),primaryAction:{type:"outline",text:(0,g.jsx)(s().sA,{id:"marketplace.emailCaptureModal.optional.submit",defaultMessage:"Submit"})},secondaryAction:{type:"plain",isBlue:!0,text:(0,g.jsx)(s().sA,{id:"marketplace.emailCaptureModal.optional.skip",defaultMessage:"Skip, just get template"}),onClick:()=>{e(),h().A.skip()}}})}function j(){const{trackCancel:e}=A(),t=(0,r().K8)((()=>h().A.state.creator),[]);return(0,g.jsx)(b,{title:(0,g.jsx)(s().sA,{id:"marketplace.emailCaptureModal.required.title",defaultMessage:"Please share your email address"}),subTitle:(0,g.jsx)(s().sA,{id:"marketplace.emailCaptureModal.required.subTitle",defaultMessage:"{creatorName} has required that you share an email address before downloading their template",values:{creatorName:null==t?void 0:t.name}}),primaryAction:{type:"primary",text:(0,g.jsx)(s().sA,{id:"marketplace.emailCaptureModal.required.submit",defaultMessage:"Submit and get template"})},secondaryAction:{type:"plain",text:(0,g.jsx)(s().sA,{id:"marketplace.emailCaptureModal.required.skip",defaultMessage:"Cancel"}),onClick:()=>{e({from:"cancel"}),h().A.cancel()}}})}function A(){const e=(0,i().v3)(),{templateId:t,emailRequirement:a}=(0,r().O$)(h().A),n=(0,l.useMemo)((()=>({template_id:t,is_optional:"optional"===a,is_free:!0})),[t,a]),s=(0,l.useCallback)((t=>{(0,x().u4)({environment:e,event:{eventName:"marketplace_capture_email",eventProperties:{...n,...t}}})}),[e,n]);return{trackOpen:(0,l.useCallback)((()=>{s({action:"open"})}),[s]),trackSubmit:(0,l.useCallback)((()=>{s({action:"submit"})}),[s]),trackSkip:(0,l.useCallback)((()=>{s({action:"skip"})}),[s]),trackCancel:(0,l.useCallback)((e=>{let{from:t}=e;s({action:"cancel",from:t})}),[s])}}}}]);