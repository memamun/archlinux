"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[5066],{97059:(e,t,n)=>{n.d(t,{W:()=>g,w:()=>v});n(944114);var o=()=>n(585515),r=()=>n(577449),i=()=>n(161479),a=()=>n(545285),s=()=>n(763824),l=()=>n(780054),c=()=>n(870618),d=()=>n(670631),u=()=>n(227440),p=()=>n(508496),f=()=>n(540758);async function v(e){const{environment:t}=e;return(await s().lX(Object.keys(d().A.state.offlinePages||{}),100,(e=>async function(e){const{environment:t,pageId:n}=e,s={page:{id:n,spaceId:(0,i().e)(void 0)},limit:1/0,cursor:{stack:[]},verticalColumns:!1},d=[];return await o().T({...s,baseUrl:l().A.domainBaseUrl,publicDomainName:l().A.publicDomainName,shouldTraverseToggleBlocks:!0},r().h.sideEffect((e=>((0,a().u)(e)&&d.push(e.id),Promise.resolve())),r().h.fromMonomorphicFunctionUnsafe((async e=>{const n=await c().h7({environment:t,pointer:e,useInMemoryCacheOnly:!1,skipAccessWrites:!0});return null==n?void 0:n.model})))),d}({environment:t,pageId:e})))).flat()}function g(e,t){return!u().A.state.online&&(e.device.isElectron||e.device.isMobileNative)&&p().default.checkGate({gateName:"download_for_offline"})&&!(0,f().B)(t)}},232280:(e,t,n)=>{n.d(t,{a:()=>r,h:()=>o});const o=.5,r=.3},278014:(e,t,n)=>{n.d(t,{ac:()=>y,jU:()=>A,qg:()=>x});var o=()=>n(799954),r=()=>n(700500),i=()=>n(534177),a=()=>n(571400),s=()=>n(519839),l=()=>n(835066),c=()=>n(444570),d=()=>n(327994),u=()=>n(980914),p=()=>n(508496),f=()=>n(871399),v=()=>n(502438);const g=n(236030).Fh-2,h=2,m=4,b=15,S=24;function y(e){const{marginItemType:t,store:n,nodeRect:o,containerRect:a,environment:s}=e,l=function(e){const{store:t,marginItemType:n}=e,o=t.getType(),i=t.getNavigableAncestorFormat(),a=Boolean(i.page_small_text);return o===r().xd.divider?-6:o===r().xd.header?a?7:10:o===r().xd.subHeader?a?4:6:o===r().xd.collectionView?8:o===r().xd.table?"presence_avatars"===n?5.5:14:3}({store:n,marginItemType:t}),c=function(e,t,n){if(t.isTransclusionType())return e+5;if(I(t,n))return e+1;if("ai_block"===t.getType())return t.hasContent()?e+9:e+15;if(t.getType()===r().xd.button)return e+3;return e}(l,n,s),u=((null==o?void 0:o.top)??0)-((null==a?void 0:a.top)??0)+c,p=s.device.isMobile?20:22,f=(d().jK-p)/2;if("selectable_hover_menu_overlay_item"===t)return u;if("attribution_avatars"===t)return u-f;if("presence_avatars"===t){const{attributionsIncludeFoundBlock:t,avatarCount:n}=e;return u+f+(n+(t?1:0)-1)*b}(0,i().HB)(t)}function x(e){const{marginItemType:t,store:n,environment:o,nodeRect:r,containerRect:a,selectable:l}=e,d=o.device.isMobile?20:22,u=(0,c().zb)()+h,{maxLeft:p,isBoundedByParentContainer:f}=function(e){const{environment:t,selectable:n,nodeRect:o,store:r}=e,i=(null==o?void 0:o.left)??0;if(r.isCollectionView()||r.isInsideCollection()){const e=(0,s().UH)(r);if(e&&"table"!==e.getViewType())return{maxLeft:i,isBoundedByParentContainer:!1}}const a=null==n?void 0:n.getScrollerContext();let l=0;if(a&&a.horizontalScroller){const e=a.horizontalScroller.getClientRect();l=(null==e?void 0:e.left)??0}const c=Math.max(l,i),d=I(r,t)&&k(r)?g:0,u=c-d<=l,p=u?l:c;return{maxLeft:p,isBoundedByParentContainer:u}}({environment:o,selectable:l,nodeRect:r,store:n}),v=w(o,u+S,n,f),b=p-((null==a?void 0:a.left)??0);if("drag_handle"===t)return b-w(o,u,n,f);if("plus_button"===t)return b-v;if("attribution_avatars"===t){return b-C({marginItemType:t,store:n,originalMenuOffset:v,environment:o,isBoundedByParentContainer:f})-m-d}if("presence_avatars"===t){return b-C({marginItemType:t,originalMenuOffset:v,environment:o,store:n,isBoundedByParentContainer:f})-m-d}(0,i().HB)(t)}function A(e){const{marginItemType:t,nodeRect:n,containerRect:o}=e;if("add_comment"===t)return((null==o?void 0:o.right)??0)-((null==n?void 0:n.right)??0);(0,i().HB)(t)}function C(e){var t;const{marginItemType:n,originalMenuOffset:o,environment:r,store:a,isBoundedByParentContainer:s}=e,l=f().default.state,c=l.isOpen&&(null===(t=l.currentStore)||void 0===t?void 0:t.id)===a.id;switch(n){case"attribution_avatars":return c?o:w(r,0,a,s);case"presence_avatars":return c&&l.currentStore&&!f().default.isRightMarginCommentHovered()?o:w(r,0,a,s);case"drag_handle":case"plus_button":return o;default:(0,i().HB)(n)}}function w(e,t,n,i){if(!i&&k(n)&&I(n,e))return t+g;if(n.isQuoteBlockChild()){return t+3+14+o().nE.paddingLeft}if(p().default.checkGate({gateName:"db_ux_simplification_next"})&&n.getType()===r().xd.collectionView)return t+6;if(n.isTransclusionType()||"ai_block"===n.getType())return t+4;if(n.isDirectChildOfAiBlock())return t+13;if(n.isInsideTransclusion())return t+5;if(n.getType()===r().xd.table){const o=u().Xe({simpleTableStore:n,environment:e,includeInline:!(0,l().dC)(e,n)}),r=n.isImmediateColumnChild();return 0!==o||r?t+8:t}const s=n.getNumberOfDuplicateBlocksAncestors();return s>0?t+a().t*s:t}function I(e,t){if(e.getType()===r().xd.page){const o=(0,s().UH)(e);var n;if(o)return(e.isInsideCollection()||Boolean(null==o||null===(n=o.collectionStore())||void 0===n?void 0:n.isPageTreeCollection()))&&(0,s().f5)({environment:t,collectionContextStore:o})}return!1}function k(e){var t;const n=v().default.state.stores.includes(e);return f().default.state.isOpen&&(null===(t=f().default.state.currentStore)||void 0===t?void 0:t.id)===e.id||n}},339702:(e,t,n)=>{n.d(t,{j:()=>r});var o=()=>n(989423);function r(e,t){o().vd(e,"offline_access_failure",t)}},343916:(e,t,n)=>{n.d(t,{i:()=>o});const o=(0,n(340498).xh)("arrowUpRightSquare",{default:{loader:()=>n.e(43459).then(n.bind(n,443459))},small:{loader:()=>n.e(97517).then(n.bind(n,497517))},mini:{loader:()=>n.e(60475).then(n.bind(n,260475))},large:{loader:()=>n.e(3953).then(n.bind(n,303953))}})},437768:(e,t,n)=>{n.d(t,{K:()=>Y,A:()=>ee});n(16280),n(898992),n(737550);var o=n(296540),r=()=>n(484714),i=()=>n(56366),a=()=>n(401497),s=()=>n(628182),l=()=>n(175947),c=()=>n(222917),d=()=>n(620689),u=()=>n(662453),p=()=>n(519839),f=()=>n(765974),v=()=>n(668435),g=()=>n(959013),h=()=>n(100622),m=()=>n(284371),b=()=>n(339702),S=()=>n(227440),y=()=>n(204063),x=n(474848);function A(){const e=(0,r().v3)(),t=(0,i().K8)((()=>S().A.state.online),[]);let n;return(0,o.useEffect)((()=>{t||(0,b().j)(e,{type:"page_error_indicator"})}),[t,e]),n=t?(0,x.jsx)(g().sA,{defaultMessage:"Oops, there was an error loading this page. Refresh to load it again.",id:"pageErrorIndicator.loadingError.message"}):e.defaultRecordCache.persistedRecordCache?(0,x.jsx)(g().sA,{defaultMessage:"Please go online to load this page, then you'll be able to access it while offline.",id:"pageOfflineIndicator.hasLocalData.message"}):(0,x.jsx)(g().sA,{defaultMessage:"Oops, you seem to be offline. Please go online to view this page.",id:"pageOfflineIndicator.noLocalData.message"}),(0,x.jsxs)("div",{style:k(e),children:[(0,x.jsx)("div",{style:I(e),children:n}),(0,x.jsx)(y().A,{size:"lg",onClick:()=>window.location.reload(),children:(0,x.jsx)(g().sA,{defaultMessage:"Refresh",id:"pageErrorIndicator.reloadButton.label"})})]})}function C(e){let{isOfflineAndUnavailable:t}=e;const n=(0,r().v3)(),s=(0,i().K8)((()=>S().A.state.online),[]);(0,o.useEffect)((()=>{s||(0,b().j)(n,{type:"page_error_indicator"})}),[s,n]);const c=(0,a().IS)((e=>({container:{height:"100%",minHeight:`calc(100vh - ${2*l().ek(n.device.isElectronMac)}px)`,paddingLeft:n.device.isMobile?16:32,paddingRight:n.device.isMobile?16:32,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},icon:{width:29,height:24,fill:e.text.secondary,marginBottom:8},title:{fontWeight:m().Wy.medium,color:e.text.secondary,textAlign:"center"},description:{color:e.text.secondary,textAlign:"center"},button:{marginTop:8}})),[n.device]);let d,u;return t?(d=(0,x.jsx)(g().sA,{defaultMessage:"This page is not available while offline.",id:"pageOfflineIndicator.unavailableError.title"}),u=(0,x.jsx)(g().sA,{defaultMessage:"Please return online to access this content{hasLocalData, select, true { or sync the page} other {}}.",id:"pageOfflineIndicator.unavailableError.description",values:{hasLocalData:Boolean(n.defaultRecordCache.persistedRecordCache)}})):(d=(0,x.jsx)(g().sA,{defaultMessage:"Oops, there was an error loading this page.",id:"pageErrorIndicator.loadingError.title"}),u=(0,x.jsx)(g().sA,{defaultMessage:"Refresh to load it again.",id:"pageErrorIndicator.loadingError.description"})),(0,x.jsxs)("div",{style:c.container,children:[s?(0,f().b)(c.icon):(0,v().h)(c.icon),(0,x.jsx)("div",{style:c.title,children:d}),(0,x.jsx)("div",{style:c.description,children:u}),s&&(0,x.jsx)(y().A,{style:c.button,size:"lg",onClick:()=>window.location.reload(),children:(0,x.jsx)(g().sA,{defaultMessage:"Refresh",id:"pageErrorIndicator.reloadButton.label"})})]})}const w=function(e){let{isOfflineAndUnavailable:t}=e;return(0,n(963589).X)("download_for_offline")?(0,x.jsx)(C,{isOfflineAndUnavailable:t}):(0,x.jsx)(A,{})};function I(e){const{device:t}=e;return{fontSize:t.isMobile?18:32,marginBottom:8,textAlign:"center",color:h().Ay.uiBlack,maxWidth:640,lineHeight:1.3}}function k(e){const{device:t}=e;return{height:"100%",minHeight:`calc(100vh - ${2*l().ek(e.device.isElectronMac)}px)`,paddingLeft:t.isMobile?16:32,paddingRight:t.isMobile?16:32,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}var j=()=>n(299772),E=()=>n(13679),T=()=>n(824622),B=()=>n(186445),M=()=>n(38337),R=()=>n(68465),O=()=>n(600871),P=()=>n(645873);const _=new(P().O2)("SavePageToOPFS",(()=>n.e(82094).then(n.bind(n,368335)))),K=(0,P()._h)(_,(e=>e.SavePageToOPFS));const N={PersonProfileContainer:new(P().O2)("PersonProfileContainer",(()=>n.e(44632).then(n.bind(n,2356))))},L=(0,P()._h)(N.PersonProfileContainer,(e=>e.PersonProfileContainer));var U=()=>n(441199);const V=new(P().O2)("BeamRenderer",(()=>n.e(61227).then(n.bind(n,397005)))),D=(0,P()._h)(V,(e=>e.BeamActivity));var z=()=>n(644914),H=()=>n(749687),W=()=>n(351360),F=()=>n(948914),$=()=>n(150193),q=()=>n(195613),X=()=>n(712505),G=()=>n(411671),Q=()=>n(543491),Z=()=>n(563615),J=()=>n(766081);const Y="1.375em",ee=o.memo((function(e){const{store:t,routerState:d}=e,u=(0,r().v3)(),{RouterStore:p}=u,f=(0,r().Y0)(),v=(0,o.useRef)(null),[g,h]=(0,o.useState)((()=>l().ek(f.isElectronMac)));(0,o.useLayoutEffect)((()=>{if(!v.current)return;const e=v.current.getBoundingClientRect().height;h(e);const t=new ResizeObserver((e=>{for(const t of e)h(t.contentRect.height)}));return t.observe(v.current),()=>t.disconnect()}),[]);const m=(0,o.useCallback)((e=>{Q().A.state&&("scroll"===e?Q().A.state.hadScroll||(Q().A.setState({...Q().A.state,hadScroll:!0}),c().pF(u,{interactionType:e})):"click"===e?Q().A.state.hadClick||(Q().A.setState({...Q().A.state,hadClick:!0}),c().pF(u,{interactionType:e})):"copy"===e?Q().A.state.hadCopy||(Q().A.setState({...Q().A.state,hadCopy:!0}),c().pF(u,{interactionType:e})):(0,n(534177).HB)(e))}),[u]);(0,o.useEffect)((()=>{if(m){const e=()=>{m("copy")};return window.addEventListener("copy",e),()=>window.removeEventListener("copy",e)}}),[m]),(0,o.useEffect)((()=>()=>t&&n(773582).O({rootStore:t})),[t]);const b=(0,i().r6)((()=>t?G().A.getMode(u,t):G().s.disabled),[u,t]),S=(0,i().r6)((()=>(0,R().ZE)(b.state)),[b]),y=(0,i().K8)((()=>{if(!t)return;const{presenceStore:e,pageVisitStore:n}=W().default.state;return{pageStore:t,presenceStore:e,pageVisitStore:n,publicEditModeStore:b,arePublicEditCompletionsEnabledStore:S}}),[S,b,t]),A=(0,i().K8)((()=>u.currentUser.isLoggedIn()),[u]),{isInvalidPage:C,isAppInitializationScreen:w,appContainerStore:I,isHome:k,isPersonProfile:j,shouldShowAddTo:E}=(0,i().K8)((()=>{if(!t)return{isInvalidPage:!0,isAppInitializationScreen:!1,appContainerStore:void 0,isHome:!1,isPersonProfile:!1,shouldShowAddTo:!1};const e=u.currentUser.id===t.getCreatedById()&&t.getCreatedByTable()===n(798880).oo;return{isInvalidPage:Boolean(!t.isDefined()||!t.canRead()),isAppInitializationScreen:Boolean(t.getAppContainerBlockStore()),appContainerStore:t.getAppContainerBlockStore(),isHome:"personal_home_page"===t.getType(),isPersonProfile:t.isPersonProfile(),shouldShowAddTo:Boolean(d.route.showMoveTo&&t.canEdit()&&A&&e)}}),[t,d.route,A,u.currentUser]),O=(0,i().K8)((()=>W().default.state.mainEditorCurrentBlockStore),[]),_=(0,i().K8)((()=>B().X4(u)),[u]),K=(0,a().DP)(),N=(0,i().K8)((()=>(0,n(696746).lU)(O)),[O]),V=(0,i().K8)((()=>{var e;return Boolean(null===(e=F().A.state.preferences)||void 0===e?void 0:e.isVibrancyEnabled)}),[]),D=(0,i().K8)((()=>{const e="team"===d.route.name,t={flexGrow:0,flexShrink:1,display:"flex",flexDirection:"column",background:N||e?V?`rgba(255, 255, 255, ${n(232280).a})`:(0,n(665579).Lu)({theme:K,isPhone:f.isPhone}):K.contentBackground,zIndex:1,height:f.isMobile?"100vh":`calc(100vh - ${g}px)`,maxHeight:"100%",position:"relative",...N?{height:"100%",position:"absolute"}:{}};if(!(0,z().tv)(u)){const e=H().sidebarOpenStore.state;(0,z().o1)(u)||(t.boxShadow=K.shadowMD),t.pointerEvents=e?"none":"auto",t.transform="translateX(0)"}return!_&&f.isMobileNative&&(t.pointerEvents="auto",t.transform="translateX(0px)"),t}),[d.route.name,N,V,K,f.isPhone,f.isMobile,f.isMobileNative,g,u,_]),q=(0,i().K8)((()=>"nativeTab"===p.state.route.name),[p]),[X,J]=(0,i().K8)((()=>{const e=(0,z().Uh)(u);return[e,e+(0,z().Ql)(u)]}),[u]),Y=(0,i().K8)((()=>n(900652).Z8()),[]),ee=(0,i().K8)((()=>U().default.isTogglingToPanelModeState()),[]),ae=(0,i().O$)(H().sidebarResizingStore),se=(0,i().K8)((()=>Boolean(F().A.state.isShowingTabBar)),[]),le=(0,i().O$)($().A).banners,de=(0,i().K8)((()=>!se&&!(0,z().KB)(u)&&!U().default.isPanelPinnedState()),[u,se]),ue=(0,i().K8)((()=>(0,z().KB)(u)),[u]),pe=(0,i().O$)(n(56197).q),fe=(0,i().K8)((()=>u.WindowSizeStore.state.paddingTop),[u.WindowSizeStore]),ve=(0,a().IS)((()=>({frameContainer:{order:n(72307).A.appCursorListener.editor,display:"flex",flexDirection:"column",width:f.isTablet?"unset":"100%",overflow:f.isTablet?"unset":"hidden",isolation:"auto",background:pe.attached?"black":"transparent"},sheetInset:pe.attached?{borderRadius:12*pe.proportion+"px",transform:`scale(${1-.08*pe.proportion}, ${1-.035*pe.proportion}) translateY(${.8*fe*pe.proportion}px) translateZ(0)`,willChange:"transform border-radius",transition:pe.animating?"transform 0.3s ease-in-out, border-radius 0.3s ease-in-out":void 0}:{}})),[f.isTablet,pe,fe]),ge=(0,i().O$)(n(865241).P),he=(0,i().K8)((()=>null==t?void 0:t.canEdit()),[t]),{value:me}=(0,P().fJ)(Z().oQ.workflowNavigationHelpers),be=(0,i().K8)((()=>{const e=null==me?void 0:me.getWorkflowNavigationState(u);return!!e&&"preview"!==e.type}),[u,me]),Se=(0,i().K8)((()=>W().default.state.currentSpaceViewStore),[]);return(0,o.useEffect)((()=>{n(729380).u.resetHeights()}),[null==O?void 0:O.id]),(0,x.jsx)(te,{pageContext:y,children:(0,x.jsxs)("div",{className:q?"hidden":"",style:ve.frameContainer,children:[!f.isMobile&&!w&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(n(260893).b,{...e,ref:v,showSidebarButton:de,isElectron:f.isElectron,isInvalidPage:C,banners:le}),f.isElectronWindows&&!se&&(0,x.jsx)(n(518598).K,{})]}),(0,x.jsxs)(n(145214).A,{tag:"main",animate:{width:N?J:X,...pe.attached?{}:{translateX:Y}},skip:se&&ae.isResizing||ee||f.isMobile||ge,style:{...D,...ve.sheetInset},className:M().GtI,children:[f.isMobile&&(0,x.jsx)(n(112995).K,{from:"TopbarMobile",fallback:e=>{let{errorId:t}=e;return(0,x.jsx)("div",{className:M().byw,style:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",height:s().s1,maxWidth:"100vw",paddingRight:8},children:(0,x.jsx)(n(138156).W,{errorId:t,iconSize:26})})},children:(0,x.jsx)(ce,{children:(0,x.jsx)(T().$j,{...e,isInvalidPage:C,shouldShowAddTo:E,banners:le,isSidebarExpanded:ue,spaceViewStore:Se})})}),I?(0,x.jsx)(ne,{appContainerStore:I}):"team"===d.route.name?(0,x.jsx)(n(3243).zF,{teamId:d.route.teamId}):"posts"===d.route.name?(0,x.jsx)(n(732430).Lb,{}):k&&t?(0,x.jsx)(re,{store:t}):j&&t?(0,x.jsx)(L,{store:t}):be?(0,x.jsx)(Z().ZO,{}):t?(0,x.jsx)(ie,{store:t,routerState:d,maybeLogSearchInteractionEvent:m}):null,A&&f.isMobile&&t&&(0,x.jsx)(oe,{store:t,shouldShowMoveTo:Boolean((d.route.showMoveTo||f.isTablet)&&he)}),f.isMobileNative&&A&&O&&(0,x.jsx)(T().pX,{})]})]})})}));function te(e){let{pageContext:t,children:o}=e;return t?(0,x.jsx)(n(452446).q,{value:t,children:o}):(0,x.jsx)(x.Fragment,{children:o})}function ne(e){let{appContainerStore:t}=e;return(0,x.jsx)("div",{style:{position:"absolute",height:"100vh",width:"100%"},children:(0,x.jsx)(n(601734).EU,{collectionViewBlockStore:t})})}function oe(e){var t;let{store:n,shouldShowMoveTo:a}=e;const s=(0,r().v3)(),l=(0,i().K8)((()=>{var e;return null===(e=s.mobileNative)||void 0===e?void 0:e.api.renderMobileActionBar}),[null===(t=s.mobileNative)||void 0===t?void 0:t.api.renderMobileActionBar]),c=(0,o.useCallback)((e=>{const{isMobileNative:t}=s.device;return(0,x.jsx)(T().q_,{stores:e,position:t?O().nh.Bottom:O().nh.Floating,currentBlockStore:n})}),[s.device,n]);return s.device.isMobileNative?(0,x.jsx)(T().rs,{currentBlockStore:n,isNativeMobileActionBar:!0,makeActionBarComponent:e=>(0,x.jsx)(T().Ry,{renderApi:l,stores:e,currentBlockStore:n,shouldShowMoveTo:a,fallbackRenderer:c})}):(0,x.jsx)(T().rs,{currentBlockStore:n,isNativeMobileActionBar:!1,makeActionBarComponent:c})}const re=o.memo((function(e){let{store:t}=e;return(0,x.jsx)(E().A,{disable:!0,store:t,isDefaultContainer:!0,render:()=>(0,x.jsx)(n(117296).VJ,{})})}));function ie(e){let{store:t,routerState:a,maybeLogSearchInteractionEvent:s}=e;const l=(0,r().v3)(),{RouterStore:c}=l,{historyState:d}=a,{currentLoadingContainerStore:u,pageVisitStore:p}=(0,i().K8)((()=>{const{currentLoadingContainerStore:e,pageVisitStore:t}=W().default.state;return{currentLoadingContainerStore:e,pageVisitStore:t}}),[]),f=(0,i().K8)((()=>d&&n(496603).Et(d.scrollTop)?d.scrollTop:void 0),[d]),v=(0,i().K8)((()=>Boolean((0,n(731320).qb)(l,t))),[l,t]),g=(0,i().K8)((()=>Boolean(X().default.isCenterPeekOpen()||n(714818).A.state.open)),[]);return(0,x.jsx)(E().A,{store:t,isDefaultContainer:!0,droppable:!0,isRootContainer:!0,disableRectangularSelection:v,disable:g,render:e=>{let{selectableEvents:r,selectableHoverMenuOverlay:i}=e;const d=n(255460).Cf(c),v={pageStore:t,pageVisitStore:p,scrollToBlockIds:d,scrollToDiscussionId:d.length?void 0:a.route.discussionId,scrollToPosition:f,onReady:()=>{n(622232).$(l,{animateScrollToBlocks:!1})},onDone:()=>{t.isCollectionView()||"rendered"===W().default.state.renderPhase||W().default.setState({...W().default.state,renderPhase:"rendered"})},initialChunkSize:n(740456).XS,incrementChunkSize:30,render:e=>{let{scrollerRef:n,error:o,ready:a,initialRequestCompleted:l,endOfResultsReached:c,isCollectionInPage:d}=e;return(0,x.jsx)(ae,{scrollerRef:n,store:t,error:o,ready:a,initialRequestCompleted:l,endOfResultsReached:c,isCollectionInPage:d,selectableEvents:r,selectableHoverMenuOverlay:i,maybeLogSearchInteractionEvent:s})}};return(0,x.jsx)(o.Suspense,{fallback:(0,x.jsx)(J().A,{isVisible:!0,store:t}),children:(0,x.jsx)(n(629537).V,{...v,store:u})})}},t.id)}const ae=o.memo((function(e){let{store:t,error:s,ready:l,initialRequestCompleted:c,endOfResultsReached:f,isCollectionInPage:v,selectableEvents:g,selectableHoverMenuOverlay:h,maybeLogSearchInteractionEvent:m,scrollerRef:b}=e;const S=(0,r().v3)(),y=(0,r().Y0)(),{publicEditModeStore:A}=(0,n(792485).S)()??{},C=(0,i().K8)((()=>(0,R().ZE)(null==A?void 0:A.state)),[A]),w=(0,n(877051).V)(),I=(0,o.useCallback)((e=>{let{startTime:o,endTime:r}=e;const i=p().UH(t);n(406792).default.DO_NOT_USE_measureLegacy({metricName:"collections.max_scroll_lag_in_session",startTime:o,endTime:r},{environment:S,data:n(476492).kz(i)})}),[S,t]),k=(0,o.useCallback)((e=>{if(n(347199).A.PageScroller=e,e){const t=e.getNode();t instanceof HTMLElement&&(b.current=t)}}),[b]),E=(0,o.useCallback)((()=>{m("scroll")}),[m]),T=(0,o.useCallback)((e=>{g.onClick(e),m("click")}),[m,g]),M=(0,i().K8)((()=>t.isCollectionView()),[t]),O=(0,i().K8)((()=>function(e){const t=(0,j().Wj)(e);return"number"==typeof t?`${t}px`:t}(S)),[S]),P=(0,a().IS)((()=>({spinner:{zIndex:1,opacity:.5,marginTop:`calc(-${Y} / 2 - ${O} / 2)`,marginBottom:24,marginLeft:"auto",marginRight:"auto"},scroller:{display:"flex",flexDirection:"column",zIndex:1,flexGrow:1,position:"relative",...l?{}:{opacity:0,pointerEvents:"none",height:0},...M?{}:{alignItems:"center"}}})),[O,M,l]),_=(0,i().K8)((()=>$().A.state.banners.some((e=>"over_free_block_limit"===e.contentKey))),[]),N=(0,i().O$)(n(749240).subscriptionDataStoreInstance),L=(0,n(847554).b)(N),U=(0,i().K8)((()=>(0,n(807778).Km)(L)),[L]),V=(0,i().K8)((()=>X().default.isSidePeekOpen()?void 0:l?d().u5(S):n(756279).A.All),[S,l]),D=(0,i().K8)((()=>B().fl({environment:S,store:t})),[S,t]),z=(0,n(367262).S)();return(0,x.jsxs)(o.Fragment,{children:[(0,x.jsxs)(n(2143).H,{ref:k,onScrollLagMeasure:v?I:void 0,onScroll:E,preventType:V,type:D,style:P.scroller,store:q().A,...g,onClick:T,children:[h,!w&&!y.isPhone&&C&&(0,x.jsx)(u().H7,{scrollerStore:q().A}),!w&&(0,x.jsx)(n(549500).EO,{scrollerStore:q().A}),!w&&(0,x.jsx)(n(738944).x,{blockStore:t}),!w&&U&&_&&(0,x.jsx)(n(811481).i,{}),!w&&(0,x.jsx)(n(998765).hD,{blockStore:t}),c&&(0,x.jsx)(se,{store:t,error:s}),l&&!f&&!(c&&s)&&(0,x.jsx)(n(331542).A,{legacySize:Y,style:P.spinner})]}),!w&&y.isPhone&&C&&(0,x.jsx)(u().H7,{scrollerStore:q().A}),!w&&!y.isPhone&&C&&(0,x.jsx)(u().X9,{scrollerKey:"Page"}),(0,x.jsx)(J().A,{isVisible:!l,store:t}),z&&(0,x.jsx)(K,{pageId:t.id})]})})),se=o.memo((function(e){let{store:t,error:s}=e;const{pageVisitStore:l,presenceStore:c,currentLoadingContainerStore:u}=(0,i().K8)((()=>{const{pageVisitStore:e,presenceStore:t,currentLoadingContainerStore:n}=W().default.state;return{pageVisitStore:e,presenceStore:t,currentLoadingContainerStore:n}}),[]),f=(0,r().v3)(),{WindowSizeStore:v,device:g}=f,h=(0,i().K8)((()=>v.state.height),[v]),[m,b]=(0,i().K8)((()=>{const e=(0,z().Uh)(f),o=Math.max(n(478726).x6,e),r=e+(0,z().Ql)(f),i=(0,p().RX)(t)&&!t.isFullWidth()?o:r,a=g.isMobile&&n(375447).A.state.open?h:0;return[i,(0,j().Wj)(f,d().C6(f)+a)]}),[g.isMobile,h,f,t]),S=(0,i().K8)((()=>X().default.isSidePeekOpen()||X().default.isSidePeekClosingStore.state),[]),y=(0,n(539412).x9)(),A=(0,a().IS)((()=>({pageViewBlockStyle:S?{width:m,position:"absolute",overflowX:"hidden",left:0}:le})),[S,m]),C=(0,i().K8)((()=>(0,n(97059).W)(f,t.id)),[f,t]),I=(0,i().K8)((()=>{if(!f.currentUser.isLoggedIn())return!1;const e=u&&!u.state.endOfResultsReached,n=t.isDefined()&&!t.canRead();return e&&s||n}),[f.currentUser,u,t,s]),k=(0,i().K8)((()=>!1===(null==u?void 0:u.state.endOfResultsReached)),[u]),E=(0,i().K8)((()=>t.canRead()&&t.isDefined()),[t]);return(0,o.useEffect)((()=>{if(I){const e=s||new Error("Page loading error");n(449412).O8(e,{from:"Frame.PageContainerContent",type:"pageLoadingError",data:{pageId:t.id,miscDataToConvertToString:{isLoading:k,canRead:E}}})}}),[I,k,E,s,t.id]),I||C?(0,x.jsx)(w,{isOfflineAndUnavailable:C}):(0,x.jsxs)(o.Fragment,{children:[y?(0,x.jsx)(n(679192).w,{}):null,(0,x.jsx)(j().Ay,{context:n(548821).Rr.Frame,style:A.pageViewBlockStyle,store:t,paddingBottom:b,disabled:!1}),(0,x.jsx)(D,{}),(0,x.jsx)(n(767905).A,{pageVisitStore:l,presenceStore:c,isPeekView:!1})]})})),le={};function ce(e){const{children:t}=e,n=(0,a().IS)((()=>({mobileTopbarPlaceholder:{minHeight:s().s1,display:"flex",flexShrink:0}})),[]);return(0,x.jsx)("div",{style:n.mobileTopbarPlaceholder,children:t})}},529803:(e,t,n)=>{n.d(t,{A:()=>r});class o extends(()=>n(757695))().default{}const r=new o},535725:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(296540);const r=function(e,t){if(e.ref&&t.ref){const n=t.ref;t.ref=t=>{e.ref(t),n(t)}}return o.cloneElement(e,t)}},539412:(e,t,n)=>{n.d(t,{$y:()=>S,jc:()=>b,x9:()=>m});n(296540);var o=()=>n(484714),r=()=>n(56366),i=()=>n(343916),a=()=>n(929468),s=()=>n(959013),l=()=>n(209660),c=()=>n(460292),d=()=>n(989423),u=()=>n(437622),p=()=>n(529803),f=()=>n(780262),v=()=>n(807778),g=()=>n(671812),h=n(474848);function m(){const e=(0,r().K8)((()=>{const{editsBlocked:e}=f().A.state;return e??!1}),[]),t=(0,o().v3)();return(0,r().K8)((()=>(0,v().Jq)(t)),[t])&&e}function b(){return(0,r().K8)((()=>{var e;const t=p().A.state;return null==t||null===(e=t.data)||void 0===e?void 0:e.invoiceHostedUrl}),[])}function S(){const e=(0,o().v3)(),t=b(),n=(0,r().K8)((()=>{var e;const t=p().A.state;return(null==t||null===(e=t.data)||void 0===e?void 0:e.overdueInvoiceCount)??0}),[]),d=(0,r().K8)((()=>(0,u().s7)(e)),[e]),f=function(e,t){if(e)return t>1?(0,h.jsx)(s().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}.",id:"uncollectibleExperience.uncollectibleExperienceOverlay.multipleInvoicesMessageContent",values:{overdueInvoiceCount:t}}):(0,h.jsx)(s().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process your last payment",id:"uncollectibleExperience.uncollectibleExperienceOverlay.messageContent"});return(0,h.jsx)(s().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberMessageContent",defaultMessage:"Access to Notion is limited"})}(d,n),v=function(e){if(e)return;return(0,h.jsx)(s().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberSecondaryLabel",defaultMessage:"Contact a workspace owner to update your workspace’s payment method"})}(d),m=function(e,t,n){if(t){const o=(0,g().a)(n);return n=>{o&&(y(t,e),o(n))}}return n=>{y(t,e),l().Ow()}}(e,d,t),S=function(e){if(e)return(0,h.jsx)(s().sA,{defaultMessage:"View unpaid invoice",id:"uncollectibleExperience.uncollectibleExperienceOverlay.buttonLabel"});return(0,h.jsx)(s().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberButtonLabel",defaultMessage:"View workspace owner"})}(d),x=function(e){if(e)return(0,h.jsx)(c().Q,{iconGroup:i().i,variantName:"default",colorName:"primary"});return(0,h.jsx)(c().Q,{iconGroup:a()._,variantName:"default",colorName:"primary"})}(d);return{clickAction:m,ctaMessage:S,primaryMessage:f,secondaryMessage:v,ctaIcon:x,tooltipBodyMessage:d?S:v,isWorkspaceOwner:d,overdueInvoiceCount:n}}function y(e,t){(0,d().u4)({environment:t,event:{eventName:"subscription_uncollectible_blurred_experience_cta_clicked",eventProperties:{is_workspace_owner:e}}})}},571400:(e,t,n)=>{n.d(t,{t:()=>o});const o=35},629537:(e,t,n)=>{n.d(t,{V:()=>a});n(296540);var o=()=>n(56366),r=()=>n(851240),i=n(474848);function a(e){const{render:t,...n}=e,a=(0,r().A)(n);return(0,i.jsx)(i.Fragment,{children:(0,o().K8)((()=>t(a)),[t,a])})}},679192:(e,t,n)=>{n.d(t,{w:()=>i});var o=()=>n(645873);const r={UncollectibleExperienceOverlay:new(o().O2)("UncollectibleExperienceOverlay",(async()=>n.e(36432).then(n.bind(n,134673))))},i=(0,o()._h)(r.UncollectibleExperienceOverlay,(e=>e.UncollectibleExperienceOverlay))},738944:(e,t,n)=>{n.d(t,{x:()=>i});var o=()=>n(645873);const r=new(o().O2)("ScrollableSitesBannerContainer",(async()=>await Promise.all([n.e(23806),n.e(16471),n.e(47123),n.e(25700),n.e(76526),n.e(7771)]).then(n.bind(n,316881)))),i=(0,o()._h)(r,(e=>e.ScrollableSitesBannerContainer))},739671:(e,t,n)=>{n.d(t,{K:()=>a,N:()=>i});n(898992),n(354520);var o=()=>n(100622),r=()=>n(634201);function i(e){const t=e.name,n=e.email;let o;if(t||n){if(t){const e=t.split(" ").filter((e=>e.length>0));o=e.length>1?String(r().PE(e[0])[0])+String(r().PE(e[e.length-1])[0]):String(r().PE(t)[0])+String(r().PE(t)[1])}else o=null==n?void 0:n.substring(0,2);return o=o?o.toUpperCase():void 0,o}}function a(e,t){return e&&(0,o().Nq)(e,t)}},767905:(e,t,n)=>{n.d(t,{A:()=>O});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(823215),n(354520),n(672577),n(430670),n(581454);var o=n(296540),r=()=>n(484714),i=()=>n(56366),a=()=>n(401497),s=()=>n(798880),l=()=>n(959013),c=()=>n(100622),d=()=>n(496603),u=()=>n(534177),p=()=>n(116008),f=()=>n(777092),v=()=>n(278014),g=()=>n(680026),h=()=>n(569912),m=()=>n(299545),b=()=>n(141333),S=()=>n(129522),y=()=>n(695625),x=()=>n(351360),A=()=>n(372154),C=()=>n(732770),w=()=>n(630116),I=()=>n(502438),k=()=>n(24157),j=()=>n(957876),E=()=>n(453697),T=n(474848);const B={position:"absolute",top:0,left:0,zIndex:89},M=20,R=22;const O=function(e){const{pageVisitStore:t,presenceStore:a}=e,s=(0,r().v3)(),l=(0,o.useRef)(null),c=(0,n(963589).X)("block_attribution"),u=e.isPeekView?n(285288).A:n(195613).A,f=(0,i().K8)((()=>u.state.elementRef??{current:null}),[u]),h=(0,b().yE)(f),j=(0,b().o7)(f),E=(0,i().r6)((()=>{if(!c)return[];const e=h-5e3,t=e+j+5e3,n=function(e){var t;const{blockAttributionEnabled:n,containerEl:o,presenceStore:r,environment:i}=e,{currentUserSettingsStore:a}=x().default.state,s=(null==a||null===(t=a.getSettings())||void 0===t?void 0:t.show_block_attribution)??!0;if(!n||!s)return[];const{rootStore:l}=r.state;if(!o||!l||"editing"!==k().default.state.mode||p().A.state.open||A().A.state.open||C().A.state.isKeyboardMode)return[];let c;for(const d of I().default.state.stores){const e=d.findRecordStoreUIAncestor((e=>e instanceof w().Bv&&e.isTransclusionType())).ancestor;e&&e instanceof w().Bv&&"transclusion_container"===e.getType()&&(c=e)}const u=y().T.getMembersByDOMOrder({filter:()=>!0}),f=o.getBoundingClientRect(),v=m().zo({blockStore:l,transclusionReferences:"omit",childPages:"omit"}).flatMap((e=>{const t=[];if(e.isInsideTransclusion()||e.isTransclusionType()){let n=e;if("transclusion_reference"===e.getType()){const t=e.getTransclusionReferenceTargetStore();t&&(n=t)}"transclusion_reference"!==e.getType()&&"transclusion_container"!==e.getType()||(n!==c?t.push(_(e,u,f,i)):m().zo({blockStore:n,transclusionReferences:"omit",childPages:"omit"}).map((e=>t.push(_(e,u,f,i)))))}else t.push(_(e,u,f,i));return t})).filter((e=>!d().b0(e)));v.sort(((e,t)=>e.top-t.top));const g=v.filter(((e,t,n)=>0===t||e.actor.id!==n[t-1].actor.id));if(1===g.length)return[];return g}({blockAttributionEnabled:c,containerEl:l.current,presenceStore:a,environment:s});n.sort(((e,t)=>e.top-t.top));const o=[];return n.every((n=>n.top>=e&&n.top<=t&&(o.push(n),!0))),o}),[c,a,h,j,s],{debugName:"attributionAvatarStore",useDeepEqual:!0});(0,i().O$)(E),(0,o.useEffect)((()=>{let e;const t=d().sg(E.recompute,100);return c&&(window.addEventListener("resize",t),e=setInterval(t,1e3)),()=>{window.removeEventListener("resize",t),clearInterval(e)}}),[E,c]);const M=(0,i().O$)(E),R=[...(0,i().K8)((()=>function(e){const{attributionAvatars:t,pageVisitStore:n,presenceStore:o,environment:r,containerEl:i}=e,{rootStore:a}=o.state;if(!a||!(0,g().xm)(o))return[];if(!i)return[];const s=r.currentUser.id,l=(0,g().PZ)({pageVisitStore:n,presenceStore:o}).filter((e=>e.userId!==s&&(0,g().dp)(r,e)));if(!l.length)return[];const c=new Set(t.map((e=>{let{blockStore:t}=e;return t.id}))),d={},u=y().T.getMembersByDOMOrder({filter:()=>!0}),p=i.getBoundingClientRect(),f=[];for(const m of l){const e=(0,g().EV)(m),t=null==m?void 0:m.blockPath;let n;if(t&&(null==t?void 0:t.length)>0?n=N(u,t,a):e&&(n=P(u,e,a)),!n)continue;const o=n.props.store.id;d.hasOwnProperty(o)||(d[o]=0),d[o]++;const i=n.getNode();if(!(i&&i instanceof Element))continue;const s=i.getBoundingClientRect();if(!s)continue;let l,b;if(n.props.store.isFirstBlockInCalloutV2Block()){var h;const e=null===(h=n.props.store.getRecordStoreUIParent())||void 0===h?void 0:h.findRecordStoreUIAncestor((e=>e instanceof w().Bv)).ancestor;e instanceof w().Bv&&(l=e,b=l?S().K.getRect(l):void 0)}const y=c.has(o),x=(0,v().ac)({marginItemType:"presence_avatars",nodeRect:b??s,containerRect:p,attributionsIncludeFoundBlock:y,avatarCount:d[o],store:l??n.props.store,environment:r}),A=(0,v().qg)({marginItemType:"presence_avatars",nodeRect:b??s,containerRect:p,environment:r,store:l??n.props.store,selectable:n});f.push({type:"presence",userId:m.userId,left:A,top:x,blockType:n.props.store.getType()})}return f}({attributionAvatars:M,pageVisitStore:t,presenceStore:a,environment:s,containerEl:l.current})),[s,t,a,M],{debugName:"presenceAvatars",useDeepEqual:!0}),...M];return(0,T.jsx)("div",{className:"notion-presence-container",style:B,ref:l,children:(0,T.jsx)(n(882934).A,{render:()=>R.map((t=>{const{left:o,top:r}=t,i={avatarWrapperAnimation:{translateX:o,translateY:r,scale:1,opacity:1},avatarEnterExitAnimation:{scale:.7,opacity:0}},a={...i.avatarWrapperAnimation,...i.avatarEnterExitAnimation};return(0,T.jsx)(n(145214).A,{initial:a,exit:a,animate:i.avatarWrapperAnimation,children:(0,T.jsx)(K,{avatar:t,presenceStore:e.presenceStore})},"attribution"===t.type?t.uniqueId:t.userId)}))})})};function P(e,t,n){return e.find((e=>{const o=e.props.store;return Boolean(o&&o.id===t&&n.uiContains(o)&&e.props.shouldShowHalo)}))}function _(e,t,n,o){const r=e.getLastEditedByPointer();if(!r||r.table!==s().oo)return;const i=e.getType();if("collection_view"===i||"collection_view_page"===i||"divider"===i||"table"===i||"table_row"===i||"tab"===i)return;if(e.isEmptyEditableBlock())return;const a=P(t,e.id,e);if(!a)return;const l=a.getNode();if(!(l&&l instanceof Element))return;const c=l.getBoundingClientRect();if(!c)return;const d=(0,v().ac)({marginItemType:"attribution_avatars",store:e,containerRect:n,nodeRect:c,environment:o}),u=(0,v().qg)({marginItemType:"attribution_avatars",store:e,containerRect:n,nodeRect:c,environment:o,selectable:a});return{type:"attribution",actor:r,left:u,top:d,uniqueId:u>0?`${String(e.key)}+left`:String(e.key),blockStore:e}}function K(e){const{device:t}=(0,r().v3)(),{isMobile:n}=t,{avatar:o}=e,d=(0,l().tz)(),p="presence"===o.type&&o.blockType?o.blockType:void 0,v=n?M:R,g=(0,a().IS)((e=>{const t=p&&["breadcrumb","bulleted_list","numbered_list","toggle"].includes(p),r={width:v,height:v,borderRadius:v};return{uiUserAvatarStyles:{...r},avatarInnerOutline:{...r,outlineStyle:"solid",outlineColor:e.UIUserAvatarInnerOutline,outlineWidth:.5,outlineOffset:-.5},avatarBorder:"presence"===o.type?{...r,outlineStyle:"solid",outlineColor:(0,c().Nq)(o.userId,e),outlineWidth:1.5,outlineOffset:-.5}:{},avatarWrapper:{...r,position:"absolute",top:0,left:n&&t?3:0,outlineStyle:"solid",outlineWidth:.5,outlineOffset:1,outlineColor:e.UIUserAvatarOuterOutline},initialColor:"presence"===o.type?{color:(0,c().Nq)(o.userId,e)}:{}}}),[n,p,v,o]),m=(0,i().K8)((()=>{const{rootStore:t}=e.presenceStore.state;if(t){if("presence"===o.type){const e=w().LU.createChildStore(t,{table:s().oo,id:o.userId});return e.isDefined()?{type:"presence",userStore:e}:null}if("attribution"===o.type){const e=(0,f().JQ)({parentStore:t,pointer:o.actor});return e.isDefined()?{type:"attribution",userId:e.id,name:e.getDisplayName(d),blockStore:o.blockStore}:null}(0,u().HB)(o)}return null}),[o,d,e.presenceStore]);return m?(0,h().A)((e=>"presence"===m.type?(0,T.jsx)("div",{style:g.avatarWrapper,...e,children:(0,T.jsx)("div",{style:g.avatarBorder,children:(0,T.jsx)(E().A,{iconStyle:g.avatarInnerOutline,hasTooltip:!0,userStore:m.userStore,style:g.uiUserAvatarStyles,size:v,avatarShouldShowShadow:!0,initialOverrideStyle:g.initialColor})})}):"attribution"===m.type?(0,T.jsx)("div",{style:g.avatarWrapper,...e,children:(0,T.jsx)(j().A,{userId:m.userId,name:m.name,style:g.uiUserAvatarStyles,size:R,tooltipStore:m.blockStore})}):void(0,u().HB)(m))):null}function N(e,t,n){const o=new Map(t.map(((e,t)=>[e,t])));let r,i;for(const a of e){const e=a.props.store,t=o.get(e.id);if(void 0!==t&&((void 0===i||t<i)&&n.uiContains(e)&&a.props.shouldShowHalo&&(r=a,i=t),0===i))return r}return r}},929468:(e,t,n)=>{n.d(t,{_:()=>o});const o=(0,n(340498).xh)("personCircle",{default:{loader:()=>n.e(89491).then(n.bind(n,989491))},small:{loader:()=>n.e(95357).then(n.bind(n,95357))},mini:{loader:()=>n.e(70891).then(n.bind(n,970891))},large:{loader:()=>n.e(49761).then(n.bind(n,649761))}})},998765:(e,t,n)=>{n.d(t,{hD:()=>i,lK:()=>s});var o=()=>n(645873);const r=new(o().O2)("MaybeMarketplaceReviewNudge",(()=>n.e(54215).then(n.bind(n,348069)))),i=(0,o()._h)(r,(e=>e.MaybeMarketplaceReviewNudge)),a=new(o().O2)("MarketplaceReviewNudge",(()=>Promise.all([n.e(39782),n.e(2501)]).then(n.bind(n,11385)))),s=(0,o()._h)(a,(e=>e.MarketplaceReviewNudge))}}]);