"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[88294],{97065:(e,n,t)=>{t.d(n,{DH:()=>o});var a=()=>t(61844);const i=["trial_from_perf_marketing","onboarding_reverse_trial","mp_reverse_trial","admin_trial"];function o(e){return i.includes(e)||a().FN.includes(e)}},128871:(e,n,t)=>{t.d(n,{b:()=>v});t(898992),t(737550);var a=t(296540),i=()=>t(484714),o=()=>t(56366),s=()=>t(68263),r=()=>t(934839),l=()=>t(135552),c=()=>t(731320),u=()=>t(326589),d=()=>t(351360),p=()=>t(150193);const m=new(t(178624).R)({key:"publicShareLinkEditDisclosureBannerPreference",namespace:t(419494).Bq,important:!0,trackingType:"necessary"}),b=864e5;function v(){const e=(0,i().v3)(),n=(0,o().K8)((()=>{var e;const n=null===(e=m.getState())||void 0===e?void 0:e.dismissedExpiresAt,t=Date.now();return!!(n&&n>t)}),[]),t=(0,o().K8)((()=>{if(!(0,u().g)())return!1;if(!e.currentUser.isLoggedIn())return!1;const n=d().default.state.mainEditorCurrentBlockStore,t=null==n?void 0:n.getRole();if(!t)return!1;const a=(0,s().ok)(t);return!!n&&(0,c().qb)(e,n)&&a}),[e]);(0,a.useEffect)((()=>{const e=p().A.state.banners.some((e=>"PublicShareLinkEditDisclosureBanner"===e.id));t&&!n?r().HQ({bannerStore:p().A,id:"PublicShareLinkEditDisclosureBanner",contentKey:"public_share_link_edit_disclosure_banner",styleKey:l().q.Blue}):e&&r().zA({bannerStore:p().A,id:"PublicShareLinkEditDisclosureBanner"})}),[t,n]);return{markBannerAsDismissed:()=>{const e=Date.now()+90*b;m.setState({dismissedExpiresAt:e})}}}},246760:(e,n,t)=>{t.d(n,{G:()=>a});const a=(0,t(340498).xh)("questionMarkCircled",{default:{loader:()=>t.e(35839).then(t.bind(t,835839))},small:{loader:()=>t.e(83633).then(t.bind(t,183633))},mini:{loader:()=>t.e(58431).then(t.bind(t,658431))},large:{loader:()=>t.e(38405).then(t.bind(t,838405))}})},426433:(e,n,t)=>{t.d(n,{A:()=>B,g:()=>K});var a=t(296540),i=()=>t(484714),o=()=>t(56366),s=()=>t(604341),r=()=>t(959013),l=()=>t(534177),c=()=>t(934839),u=()=>t(209660),d=()=>t(179030),p=()=>t(989423),m=()=>t(135552),b=()=>t(437622),v=()=>t(529803),y=()=>t(150193),f=()=>t(807778),_=()=>t(671812),g=t(474848);const w={updatePaymentMethod:(0,g.jsx)(r().sA,{id:"subscription.payment_status_banner.update_payment_method",defaultMessage:"View unpaid invoice"}),viewBillingTab:(0,g.jsx)(r().sA,{id:"subscription.payment_status_banner.view_billing_tab",defaultMessage:"Go to Billing"}),viewWorkspaceOwner:(0,g.jsx)(r().sA,{id:"subscription.payment_status_banner.view_workspace_owner",defaultMessage:"View workspace owner"}),confirmPayment:(0,g.jsx)(r().sA,{id:"subscription.payment_status_banner.confirm_payment",defaultMessage:"Confirm payment"})};function h(){return()=>{u().Ow()}}function A(){return()=>{u().Ow({currentTab:"billing"})}}function S(e){const{messageType:n,overdueInvoiceCount:t=1}=e;switch(n){case"past_due_owner":return(0,g.jsx)(r().sA,{id:"subscription.payment_status_banner.payment_failed.past_due.workspace_owner",defaultMessage:"We couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}. Please update your payment method or you may lose access to Notion soon.",values:{overdueInvoiceCount:t}});case"past_due_member":return(0,g.jsx)(r().sA,{id:"subscription.payment_status_banner.payment_failed.past_due.member",defaultMessage:"Please contact a workspace owner to update your payment method or you may lose access to Notion soon."});case"unpaid_owner":return(0,g.jsx)(r().sA,{id:"subscription.payment_status_banner.payment_failed.unpaid.workspace_owner",defaultMessage:"Access to Notion is limited to viewing because we couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}. Update your payment information to restore full access.",values:{overdueInvoiceCount:t}});case"unpaid_member":return(0,g.jsx)(r().sA,{id:"subscription.payment_status_banner.payment_failed.unpaid.member",defaultMessage:"Access to Notion is limited to viewing. Contact a workspace owner to update your workspace’s payment method."});default:(0,l().HB)(n)}}function x(e){const{messageType:n,overdueInvoiceCount:t=1}=e;switch(n){case"past_due_owner":return(0,g.jsx)(r().sA,{id:"subscription.payment_status_banner.confirmation_required.past_due.workspace_owner",defaultMessage:"Please confirm {overdueInvoiceCount, plural, one {your subscription payment} other {{overdueInvoiceCount} payments}} or you may lose access to Notion soon.",values:{overdueInvoiceCount:t}});case"unpaid_owner":return(0,g.jsx)(r().sA,{id:"subscription.payment_status_banner.confirmation_required.unpaid.workspace_owner",defaultMessage:"Access to Notion is limited to viewing. Confirm {overdueInvoiceCount, plural, one {your subscription payment} other {{overdueInvoiceCount} payments}} to restore full access.",values:{overdueInvoiceCount:t}});case"unpaid_member":return(0,g.jsx)(r().sA,{id:"subscription.payment_status_banner.confirmation_required.unpaid.member",defaultMessage:"Access to Notion is limited to viewing. Contact a workspace owner to update your workspace’s payment method."});default:(0,l().HB)(n)}}function T(e){const{billingStatusData:n,showNativeInvoicePayment:t,uncollectibleExperienceEnabled:a}=e;if(null==n||!n.data)return;const{isWorkspaceOwner:i}=n,{invoiceHostedUrl:o,overdueInvoiceCount:s,bannerKey:r}=n.data;switch(r){case"past_due":return function(e){const{isWorkspaceOwner:n,invoiceHostedUrl:t,overdueInvoiceCount:a,showNativeInvoicePayment:i}=e,o=m().q.Yellow;return n?{bannerStyleKey:o,messageType:"past_due_owner",messageText:S({overdueInvoiceCount:a,messageType:"past_due_owner"}),callToActionText:i?w.viewBillingTab:w.updatePaymentMethod,callToActionHandler:i?A():(0,_().a)(t)}:{bannerStyleKey:o,messageType:"past_due_member",messageText:S({overdueInvoiceCount:a,messageType:"past_due_member"}),callToActionText:w.viewWorkspaceOwner,callToActionHandler:h()}}({isWorkspaceOwner:i,invoiceHostedUrl:o,overdueInvoiceCount:s,showNativeInvoicePayment:t});case"unpaid":if(a)return;return function(e){const{isWorkspaceOwner:n,invoiceHostedUrl:t,overdueInvoiceCount:a,showNativeInvoicePayment:i}=e,o=m().q.LightRed;return n?{bannerStyleKey:o,messageType:"unpaid_owner",messageText:S({overdueInvoiceCount:a,messageType:"unpaid_owner"}),callToActionText:i?w.viewBillingTab:w.updatePaymentMethod,callToActionHandler:i?A():(0,_().a)(t)}:{bannerStyleKey:o,messageType:"unpaid_member",messageText:S({overdueInvoiceCount:a,messageType:"unpaid_member"}),callToActionText:w.viewWorkspaceOwner,callToActionHandler:h()}}({isWorkspaceOwner:i,invoiceHostedUrl:o,overdueInvoiceCount:s,showNativeInvoicePayment:t});default:(0,l().HB)(r)}}function k(e){if(!e.data)return;const{isWorkspaceOwner:n}=e,{invoiceHostedUrl:t,bannerKey:a}=e.data;switch(a){case"past_due":return function(e,n,t){if(e)return{bannerStyleKey:m().q.Yellow,messageType:"past_due_owner",messageText:x({overdueInvoiceCount:t,messageType:"past_due_owner"}),callToActionText:w.confirmPayment,callToActionHandler:(0,_().a)(n)}}(n,t);case"unpaid":return function(e,n,t){const a=m().q.LightRed;return e?{bannerStyleKey:a,messageType:"unpaid_owner",messageText:x({overdueInvoiceCount:t,messageType:"unpaid_owner"}),callToActionText:w.confirmPayment,callToActionHandler:(0,_().a)(n)}:{bannerStyleKey:a,messageType:"unpaid_member",messageText:x({overdueInvoiceCount:t,messageType:"unpaid_member"}),callToActionText:w.viewWorkspaceOwner,callToActionHandler:h()}}(n,t);default:(0,l().HB)(a)}}function C(e){const{billingStatusData:n}=e;if(void 0===(null==n?void 0:n.data))return;const{overdueReason:t}=n.data;if(t)switch(t){case"payment_failed":return T(e);case"confirmation_required":return k(n);default:(0,l().HB)(t)}}function I(e){const n=v().A.state,t=(0,b().s7)(e);return n&&n.data?{...n,isWorkspaceOwner:t}:void 0}function B(){const e=(0,o().K8)((()=>(0,f().Ug)()),[]),n=(0,i().v3)(),t=(0,o().K8)((()=>I(n)),[n]),r=(0,o().K8)((()=>(0,f().Jq)(n)),[n]),l=(0,a.useMemo)((()=>C({billingStatusData:t,showNativeInvoicePayment:e,uncollectibleExperienceEnabled:r})),[t,e,r]);a.useEffect((()=>(["local","development","staging"].includes("production")&&(0,s().exposeDebugValue)("billingStatus",t),null!=t&&t.data&&l?(c().HQ({bannerStore:y().A,id:"BillingSubscriptionBanner",contentKey:"billing_subscription_status",styleKey:l.bannerStyleKey,prepend:!0}),(0,p().u4)({environment:n,event:{eventName:"billing_subscription_banner_displayed",eventProperties:{isWorkspaceOwner:t.isWorkspaceOwner,...t.data}}})):c().zA({bannerStore:y().A,id:"BillingSubscriptionBanner"}),()=>{c().zA({bannerStore:y().A,id:"BillingSubscriptionBanner"})})),[n,t,l])}function K(e){const{legacyColor:n}=e,t=(0,o().K8)((()=>(0,f().Ug)()),[]),s=(0,i().v3)(),r=(0,o().K8)((()=>I(s)),[s]),l=(0,o().K8)((()=>(0,f().Jq)(s)),[s]),c=(0,a.useMemo)((()=>C({billingStatusData:r,showNativeInvoicePayment:t,uncollectibleExperienceEnabled:l})),[r,t,l]),u=null==c?void 0:c.callToActionText,b=null==c?void 0:c.callToActionHandler,v=(0,a.useCallback)((e=>{void 0!==b&&b(e),null!=r&&r.data&&(0,p().u4)({environment:s,event:{eventName:"billing_subscription_banner_action",eventProperties:{isWorkspaceOwner:r.isWorkspaceOwner,...r.data}}})}),[s,b,r]);return c?(0,g.jsx)(d().l,{label:c.messageText,display:"full-width",actions:[{label:u,onClick:e=>v(e)}],tint:(0,m().V)(n)}):null}},464762:(e,n,t)=>{t.d(n,{K:()=>f,M:()=>y});var a=t(296540),i=()=>t(484714),o=()=>t(959013),s=()=>t(934839),r=()=>t(209660),l=()=>t(179030),c=()=>t(135552),u=()=>t(963589),d=()=>t(176983),p=()=>t(58293),m=()=>t(150193),b=()=>t(324561),v=t(474848);function y(){return(0,v.jsx)(l().l,{label:(0,v.jsx)(o().sA,{id:"sanctions.missing_name_banner.banner_text",defaultMessage:"Please provide your name in the billing tab"}),display:"full-width",actions:[{label:(0,v.jsx)(o().sA,{id:"sanctions.missing_name_banner.cta_message",defaultMessage:"Click to update"}),onClick:()=>{r().Ow({currentTab:"billing",subtab:"address"})}}],tint:"red"})}function f(){const e=(0,i().v3)(),n=function(){var e;const n=(0,u().X)("missing_name_banner"),t=(0,p().r)(),a=(0,b()._3)({spaceId:null==t?void 0:t.id}),i=Boolean(null==a||null===(e=a.address)||void 0===e?void 0:e.name),o=(0,d().J)();return n&&o&&!i}();a.useEffect((()=>(n?s().HQ({bannerStore:m().A,id:"MissingNameBanner",contentKey:"missing_name",prepend:!0,styleKey:c().q.Red}):s().zA({bannerStore:m().A,id:"MissingNameBanner"}),()=>{s().zA({bannerStore:m().A,id:"MissingNameBanner"})})),[e,n])}},696751:(e,n,t)=>{t.d(n,{A:()=>g,U:()=>_});var a=t(296540),i=()=>t(484714),o=()=>t(56366),s=()=>t(534177),r=()=>t(252105),l=()=>t(934839),c=()=>t(179030),u=()=>t(135552),d=()=>t(58293),p=()=>t(646736),m=()=>t(351360),b=()=>t(179580),v=()=>t(150193),y=()=>t(630116),f=t(474848);function _(e){const{legacyColor:n}=e,t=(0,i().v3)(),a=(0,o().K8)((()=>t.currentUser.id),[t]),s=(0,d().r)(),r=(0,p().HI)(s),l=(0,o().K8)((()=>{var e;if(!s||!a||!r)return null;const n=null===(e=b().A.getData(t,{spaceId:s.id}))||void 0===e||null===(e=e.bannerIds)||void 0===e?void 0:e[0];if(!n)return null;const i=y().by.createChildStore(s,{id:n,table:"subscription_banner",spaceId:s.id});return i.isDefined()?(0,f.jsx)("span",{children:i.getBannerText()}):null}),[t,a,s,r]);return l?(0,f.jsx)(c().l,{label:l,display:"full-width",actions:[],tint:(0,u().V)(n)}):null}function g(){const e=(0,i().v3)(),n=(0,o().K8)((()=>m().default.state.currentSpaceStore),[]),[t,c,d,p,f]=(0,o().K8)((()=>{var t;if(!n)return[];const a=null===(t=b().A.getData(e,{spaceId:n.id}))||void 0===t?void 0:t.bannerIds;if(a&&a.length>0){const e=a[0],t=y().by.createChildStore(n,{id:e,table:"subscription_banner",spaceId:n.id});if(!t.isDefined())return[];const i=t.getBannerKey(),o=t.getBannerType(),r=t.getAudience(),l=t.getBannerText();switch(o){case"warning":return[e,u().q.Yellow,i,r,l];case"alert":return[e,u().q.LightRed,i,r,l];case"info":return[e,u().q.LightBlue,i,r,l];default:(0,s().HB)(o)}}return[]}),[e,n]);a.useEffect((()=>{if(t&&c){if(l().HQ({bannerStore:v().A,id:"SubscriptionUncollectibleBanner",contentKey:"arbitrary_subscription_banner",styleKey:c,prepend:!0}),d&&p){const n={banner:d,audience:p,text:""};f&&(n.text=f),r().u4(e,{name:"subscription_uncollectible_banner_displayed",args:n})}}else l().zA({bannerStore:v().A,id:"SubscriptionUncollectibleBanner"});return()=>{l().zA({bannerStore:v().A,id:"SubscriptionUncollectibleBanner"})}}),[e,t,c,d,p,f])}},883894:(e,n,t)=>{t.d(n,{k:()=>f,u:()=>_});var a=t(296540),i=()=>t(484714),o=()=>t(56366),s=()=>t(187174),r=()=>t(959013),l=()=>t(934839),c=()=>t(435009),u=()=>t(179030),d=()=>t(719147),p=()=>t(989423),m=()=>t(135552),b=()=>t(351360),v=()=>t(150193),y=t(474848);function f(){const e=(0,i().v3)();return(0,y.jsx)(u().l,{label:(0,y.jsx)(r().sA,{id:"subscription.russianSanctionsBanner.banner_text",defaultMessage:"Due to <sanctionLink>U.S. sanctions</sanctionLink>, users in Russia will not be able to access Notion from Sept 9, 2024. We sincerely apologize for this disruption in service.",values:{sanctionLink:n=>(0,y.jsx)(d().A,{onClick:()=>c().oo({environment:e,url:"https://ofac.treasury.gov/media/932951/download?inline",openInNew:"tab"}),children:n})}}),display:"full-width",actions:[{label:(0,y.jsx)(r().sA,{id:"subscription.russianSanctionsBanner.learn_more",defaultMessage:"Learn more"}),onClick:()=>c().oo({environment:e,url:"https://www.notion.so/help/restrictions-for-customers-based-in-russia",openInNew:"tab"})}],tint:"yellow"})}function _(){const e=(0,i().v3)(),n=function(){const e=(0,i().v3)(),n=(0,o().K8)((()=>{var e;return null===(e=b().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),[{value:a}]=(0,s().Yb)((async()=>{if(!n)return;const a=await Promise.resolve().then(t.bind(t,449506)),i=await a.callApi({eventName:"getWillBeSubjectToSanctions",environment:e,data:{spaceId:n}});return"success"===i.type?i.data.value:void 0}),[e,n]);return a??!1}();a.useEffect((()=>(n?(l().HQ({bannerStore:v().A,id:"RussianSanctionsBanner",contentKey:"russian_sanctions",prepend:!0,styleKey:m().q.Yellow}),(0,p().u4)({environment:e,event:{eventName:"russia_sanctions_banner_displayed",eventProperties:{}}})):l().zA({bannerStore:v().A,id:"RussianSanctionsBanner"}),()=>{l().zA({bannerStore:v().A,id:"RussianSanctionsBanner"})})),[e,n])}},932737:(e,n,t)=>{t.d(n,{A:()=>g,b:()=>_});var a=()=>t(244641),i=t(296540),o=()=>t(56366),s=()=>t(762433),r=()=>t(97065),l=()=>t(959013),c=()=>t(934839),u=()=>t(209660),d=()=>t(179030),p=()=>t(135552),m=()=>t(351360),b=()=>t(150193),v=()=>t(324561),y=()=>t(775916),f=t(474848);function _(e){const{legacyColor:n}=e,t=(0,f.jsx)(l().sA,{id:"app.banner.trial_subscription.add_payment_method",defaultMessage:"Add a payment method to continue using your free trial. You will not be charged until the end of your trial period."}),a=(0,f.jsx)(l().sA,{id:"app.banner.trial_subscription.add_payment_method.call_to_action",defaultMessage:"Add payment method"});return(0,f.jsx)(d().l,{label:t,display:"full-width",actions:[{label:a,onClick:()=>{u().Ow({currentTab:"billing"})}}],tint:(0,p().V)(n)})}function g(){const e=(0,o().K8)((()=>{var e;return null===(e=m().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),n=(0,v().f_)({spaceId:e}),t=(0,y().p)();let l;const u="admin"===(null==n?void 0:n.type)&&(0,s().i5)(n);l=!(!u||!t)&&(!(0,s().N8)(n.subscription)&&(!n.paymentMethod&&(!(0,r().DH)(t.offer.campaign)&&a().c9.now()>(null==u?void 0:u.minus({days:15}))))),i.useEffect((()=>(l?c().HQ({bannerStore:b().A,id:"SubscriptionTrialAddPaymentMethodBanner",contentKey:"subscription_trial_add_payment_method",styleKey:p().q.Yellow,prepend:!0}):c().zA({bannerStore:b().A,id:"SubscriptionTrialAddPaymentMethodBanner"}),()=>{c().zA({bannerStore:b().A,id:"SubscriptionTrialAddPaymentMethodBanner"})})),[l])}},966689:(e,n,t)=>{t.d(n,{A:()=>A,i:()=>h});var a=()=>t(244641),i=t(296540),o=()=>t(484714),s=()=>t(56366),r=()=>t(401497),l=()=>t(148307),c=()=>t(762433),u=()=>t(534177),d=()=>t(449506),p=()=>t(934839),m=()=>t(179030),b=()=>t(135552),v=()=>t(351360),y=()=>t(57605),f=()=>t(150193),_=()=>t(596513),g=()=>t(714300),w=t(474848);function h(e){const{legacyColor:n}=e,t=(0,s().K8)((()=>{var e;return null===(e=v().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),p=(0,g().l)({spaceId:t}),f=(0,c().q8)(p),h=(0,c().DS)(p),A=null==p?void 0:p.clock.externalId,[x,T]=(0,i.useState)(1),[k,C]=(0,i.useState)("second"),[I,B]=(0,i.useState)(!1),K=(0,o().v3)(),j=(0,r().IS)((e=>({message:{flexGrow:1,textWrap:"wrap"}})),[]);if(!t||!A||!f)return null;const M=async()=>{const e=a().dw.fromObject({[k]:x}),n=function(e){switch(e){case"month":return a().dw.fromObject({months:2});case"year":return a().dw.fromObject({years:2});default:(0,u().HB)(e)}}(f);if(e>n)return void S(`Cannot advance test clock by more than two billing intervals. The current billing interval is ${f}.`);B(!0);"success"===(await d().callApi({eventName:"stripeAdvanceTestClock",environment:K,data:{spaceId:t,epochSeconds:h.plus(e).toSeconds()}})).type?await Promise.all([_().t.resetData(K,{spaceId:t}),y().A.resetData(K,{spaceId:t})]):S("Failed to advance test clock. Check server logs for details."),B(!1)},H=(0,w.jsxs)("div",{style:j.message,children:["The clock time is currently frozen at ",h.toLocaleString(a().c9.DATETIME_FULL)]}),P=[{label:(0,w.jsx)("input",{disabled:I,type:"number",value:x,style:{width:75,textAlign:"right"},onChange:e=>T(parseInt(e.target.value))}),onClick:()=>{}},{label:(0,w.jsxs)("select",{disabled:I,value:k,onChange:e=>{C(e.target.value)},children:[(0,w.jsx)("option",{value:"seconds",children:"seconds"}),(0,w.jsx)("option",{value:"minutes",children:"minutes"}),(0,w.jsx)("option",{value:"hours",children:"hours"}),(0,w.jsx)("option",{value:"days",children:"days"}),(0,w.jsx)("option",{value:"months",children:"months"}),(0,w.jsx)("option",{value:"years",disabled:"year"!==f,children:"years"})]}),onClick:()=>{}},{label:"Advance clock",onClick:()=>M()},{label:I?(0,w.jsx)("img",{src:l().A.images.clubPenguinDanceGif,alt:"loading...",style:{width:48}}):(0,w.jsx)("div",{style:{width:48}}),onClick:()=>{}}];return(0,w.jsx)(m().l,{label:H,display:"full-width",actions:P,tint:(0,b().V)(n)})}function A(){var e;const n=(0,s().K8)((()=>{var e;return null===(e=v().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),t=(0,g().l)({spaceId:n}),a=(0,c().Fq)(t)&&(null==t||null===(e=t.clock)||void 0===e?void 0:e.externalId);i.useEffect((()=>(a?p().HQ({bannerStore:f().A,id:"TestClockBanner",contentKey:"test_clock",styleKey:b().q.Yellow,prepend:!0}):p().zA({bannerStore:f().A,id:"TestClockBanner"}),()=>{p().zA({bannerStore:f().A,id:"TestClockBanner"})})),[a])}function S(e){}}}]);