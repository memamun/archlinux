"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[32644],{173019:(e,t,i)=>{i.d(t,{r:()=>o});i(296540);var n=i(474848);const o=(0,i(340498).wt)("pencil",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},887750:(e,t,i)=>{i.r(t),i.d(t,{ImageHyperlinkOverlay:()=>T,ImageHyperlinkPreview:()=>O});var n=i(296540),o=()=>i(484714),r=()=>i(56366),a=()=>i(401497),l=()=>i(187174),s=()=>i(576250),c=()=>i(173019),d=()=>i(777447),p=()=>i(179034),g=()=>i(983650),h=()=>i(959013),u=()=>i(100622),v=()=>i(534177),y=()=>i(284371),m=()=>i(449506),b=()=>i(145214),k=()=>i(285790),f=()=>i(187485),x=()=>i(16006),w=()=>i(21140),j=()=>i(780054),S=()=>i(712030),I=()=>i(267419),A=()=>i(989423),C=()=>i(129522),H=()=>i(351360),M=()=>i(630116),B=()=>i(781286),_=i(474848);function O(e){const{isHovered:t,store:i,hideText:O,disableActions:P}=e,T=(0,h().tz)(),E=(0,a().DP)(),K=(0,o().v3)(),[R,L]=(0,n.useState)(!1),N=C().K.getRect(i),U=P?80:110,z={linkTitle:{fontStyle:"normal",fontWeight:y().Wy.medium,fontSize:12,letterSpacing:-.154,lineHeight:"143%",fontFeatureSettings:"'case' on",textOverflow:"ellipsis",color:u().Ay.white,maxWidth:N?N.width-U:0,paddingRight:"4px",overflow:"hidden"},iconButton:{display:"flex",alignItems:"center",justifyContent:"center",padding:"4px 6px"},titleOverlay:{left:0,bottom:0,width:"100%",height:"88px",background:"linear-gradient(360deg, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0.18) 50%, rgba(0, 0, 0, 0.09) 65%, rgba(0, 0, 0, 0.045) 75%, rgba(0, 0, 0, 0.0222) 82.85%, rgba(0, 0, 0, 0.0114) 88%, rgba(0, 0, 0, 0) 100%)"}},D=(0,h().YK)({editLink:{defaultMessage:"Edit link",id:"hoverPreviewOverlay.editLink"}}),Y=(0,r().K8)((()=>{const e=i.getImageHyperlink()||"";return"placeholder"===e?void 0:e}),[i]),[{value:W}]=(0,l().Yb)((async()=>{var e,t;if(!Y)return"";const i=await m().callApi({eventName:"getDataForLinkMention",environment:K,data:{url:Y,spaceId:(null===(e=H().default.state.currentSpaceStore)||void 0===e?void 0:e.id)??(null===(t=H().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId()),source:"hyperlink_hover"}});if("success"===i.type){if("error"in i.data)return;return i.data.title}if("failed"===i.type)throw void 0;return(0,v().HB)(i)}),[Y,K]),F=(0,d().lX)({url:Y||"",baseUrl:j().A.domainBaseUrl,publicDomainName:j().A.publicDomainName}),X=(0,r().K8)((()=>{if(!F)return;const e=M().Bv.createChildStore(i,{table:p().ev,id:F});return{pageIcon:(0,g().h6)({pageModel:e.getModel(),pageRole:e.getRole(),baseUrl:j().A.domainBaseUrl,getRecordModel:i.getRecordModel,emojiType:(0,S().FN)(K),isSafariOrIOS:K.device.isSafari||K.device.isIOS,isClient:!0,showEmojiInline:K.device.isWindows,currentUserId:K.currentUser.id,theme:E,emojiData:I().A.state}),title:(0,_.jsx)(x().A,{style:{...z.linkTitle,whiteSpace:"nowrap"},store:e})}}),[K,i,F,E,z.linkTitle]),q=(0,r().K8)((()=>Boolean(Y)&&t),[Y,t]),G=(0,n.useCallback)((()=>{B().hv({store:i})}),[i]);return(0,_.jsx)(b().A,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},visible:q,children:(0,_.jsx)("div",{style:{...z.titleOverlay,pointerEvents:"none",position:"absolute"},children:(0,_.jsxs)(w().Ye,{style:{justifyContent:"start",alignItems:"center",position:"absolute",opacity:q?1:0,left:12,bottom:8,cursor:"pointer",pointerEvents:"auto"},children:[X&&(0,_.jsx)(f().A,{href:Y,external:!1,onClick:e=>{e.stopPropagation(),(0,A().u4)({environment:K,event:{eventName:"image_hyperlink_click",eventProperties:{location:"link",url_type:"notion"}}})},children:(0,_.jsxs)(w().Ye,{style:{alignItems:"center",height:24},children:[X.pageIcon,!O&&X.title]})}),!X&&(0,_.jsx)(f().A,{href:Y,external:!0,onClick:e=>{e.stopPropagation(),(0,A().u4)({environment:K,event:{eventName:"image_hyperlink_click",eventProperties:{location:"link",url_type:"external"}}})},children:(0,_.jsxs)(w().Ye,{style:{alignItems:"center",height:24},children:[(0,_.jsx)("div",{style:{paddingRight:"4px"},children:(0,s().y)({height:14,width:14,fill:u().Ay.white})}),!O&&(0,_.jsx)("div",{style:{...z.linkTitle,whiteSpace:"nowrap"},children:W||Y})]})}),!P&&!O&&(0,_.jsx)(k().A,{icon:c().r,style:{...z.iconButton},hoveredStyle:{background:"rgba(227, 226, 224, 0.25)"},iconStyle:{width:14,height:14,fill:R?"rgba(255, 255, 255, 1)":"rgba(255, 255, 255, 0.65)"},onMouseEnter:()=>L(!0),onMouseLeave:()=>L(!1),ariaLabel:T.formatMessage(D.editLink),onClick:e=>{e.stopPropagation(),G()}})]})})})}const P="opacity 100ms ease-in-out";function T(e){const{isHovered:t,store:i}=e,n=(0,r().K8)((()=>{const e=i.getImageHyperlink()||"";return"placeholder"===e?void 0:e}),[i]),o=(0,r().K8)((()=>n&&t),[n,t]);return(0,_.jsx)("div",{style:{left:0,top:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.3)",pointerEvents:"none",opacity:o?1:0,position:"absolute",transition:P}})}}}]);