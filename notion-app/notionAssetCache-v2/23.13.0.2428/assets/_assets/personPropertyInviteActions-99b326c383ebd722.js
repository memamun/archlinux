"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[57613],{159026:(e,t,i)=>{i.d(t,{Ay:()=>a,NJ:()=>n,d5:()=>s});i(898992),i(354520),i(581454),i(737550);let n=function(e){return e.unselected="unselected",e.workspace_member="workspace_member",e.request_workspace_member="request_workspace_member",e.page_guest="page_guest",e.closed="closed",e}({}),s=function(e){return e[e.closed=0]="closed",e[e.share_page=1]="share_page",e[e.share_workspace=2]="share_workspace",e[e.request_workspace=3]="request_workspace",e}({});class r extends(()=>i(757695))().default{getInitialState(){return{inviteStage:s.closed,selection:n.workspace_member,order:[n.workspace_member,n.page_guest],invitedUsers:[],invitedEmailToUserIdMap:{},flowId:i(206267).JW()}}startWorkspaceInvite(){this.setState({...this.state,inviteStage:s.share_workspace,order:[n.workspace_member,n.page_guest],selection:n.workspace_member})}startRequestMembership(){this.setState({...this.state,inviteStage:s.request_workspace,order:[n.request_workspace_member,n.page_guest],selection:n.request_workspace_member})}hasGuests(){return this.state.invitedUsers.some((e=>e.isGuest))}getGuestEmails(){return this.state.invitedUsers.filter((e=>e.isGuest)).map((e=>e.email))}}const a=r},495867:(e,t,i)=>{i.d(t,{BY:()=>y,Lg:()=>S,id:()=>T,nE:()=>h,xi:()=>_});i(944114),i(898992),i(430670),i(581454);var n=()=>i(857639),s=()=>i(402390),r=()=>i(68263),a=()=>i(762433),o=()=>i(449506),l=()=>i(579627),u=()=>i(436572),c=()=>i(972435),v=()=>i(351360),m=()=>i(57605),d=()=>i(159026),p=()=>i(597898),g=()=>i(47373),f=()=>i(250064);async function y(e){const{environment:t,spaceStore:i,contextualInviteStore:n}=e;!function(e){const{spaceStore:t,contextualInviteStore:i}=e,n=t.getRole();if(!n||!(0,r().NB)(n))return!1;if(!i.hasGuests())return!1;if(t.getDisableMembershipRequests())return!1;return(0,g().x3)()}({environment:t,spaceStore:i,contextualInviteStore:n})?await async function(e){const{spaceStore:t,contextualInviteStore:i,environment:n}=e,s=t.getRole();if(!s||!(0,r().vp)(s))return!1;if(!i.hasGuests())return!1;return await(0,p().Se)(n,{name:"members",spaceId:t.id,userId:t.userId,amount:1})}({environment:t,spaceStore:i,contextualInviteStore:n})?n.startWorkspaceInvite():n.setState({...n.state,inviteStage:d().d5.closed}):n.startRequestMembership()}async function S(e){const{environment:t,spaceStore:i,contextualInviteStore:s,from:r,intl:a}=e,{selection:o,flowId:c}=s.state;if("page_guest"===o||!s.hasGuests())return s.reset(),!1;const{inviteTargets:v,unknownEmails:m}=await I({environment:t,contextualInviteStore:s}),d={...s.state};s.reset();const g=await(0,p().Se)(t,{name:"non_admin_members",spaceId:i.id,userId:i.userId})?e.inviteRole??"read_and_write":"editor";try{await l().eP({environment:t,store:i,inviteTargets:v,inviteRole:g,isOnboarding:!1,invite:{inviteOrigin:r,inviteFlowId:c,disable_invite_email:!0}})}catch(f){return function(e,t){if(0===t.length)return;u().D6({label:e.formatMessage({id:"contextual_invite.contextual_invite_failure",defaultMessage:"{userCount, plural, one {Failed to invite {users} as member} other {Failed to invite {users} as members}}"},{users:T(t,e),userCount:t.length})})}(a,d.invitedUsers),n().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.inviteTargets",data:{miscDataToConvertToString:{...d,inviteTargets:v}}}),!1}finally{m.length&&n().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.unknownUserId",data:{miscDataToConvertToString:{...d,unknownEmails:m}}})}return!0}async function _(e){const{environment:t,spaceStore:i,originId:s,originType:r,reasonMessage:a,contextualInviteStore:l,intl:c}=e,{selection:v}=l.state;if("page_guest"===v||!l.hasGuests())return l.reset(),!1;const{inviteTargets:m,unknownEmails:d}=await I({environment:t,contextualInviteStore:l}),p={...l.state};l.reset();const g=[];try{const e=m.map((e=>o().callApi({eventName:"requestAccess",environment:t,data:{type:"actor-to-space",forActorId:e.value.id,spaceId:i.id,message:a,attributes:{origin_id:s,origin_type:r,origin_table:"share_menu"===r?"block":"space",add_permissions_on_approval:!1}}}).catch((()=>g.push(e)))));await Promise.all(e)}catch(f){return function(e,t){if(0===t.length)return;u().D6({label:e.formatMessage({id:"contextual_invite.request_members_failure",defaultMessage:"Failed to request {users} to become members"},{users:T(t,e)})})}(c,p.invitedUsers),n().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.inviteTargets",data:{miscDataToConvertToString:{...p,inviteTargetsWithErrors:g}}}),!1}finally{d.length&&n().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.unknownUserId",data:{miscDataToConvertToString:{...p,unknownEmails:d}}})}return!0}async function I(e){const{environment:t,contextualInviteStore:i}=e,{invitedEmailToUserIdMap:n}=i.state,s=[],r=[];for(const a of i.state.invitedUsers){if(!a.isGuest)continue;const e=await w(t,a,n);e?s.push({type:"existingUser",value:{id:e,email:a.email,version:1}}):r.push(a.email)}return{inviteTargets:s,unknownEmails:r}}async function w(e,t,i){const n=await async function(e,t,i){let n=t.id;if(n||(n=i[t.email]),!n){const i=await o().callApi({eventName:"findUser",environment:e,data:{email:t.email}});if("failed"!==i.type){const e=i.data;e.value&&(n=e.value.value.id)}}return n}(e,t,i);if(n)return n;const r=(0,s().H)(c().A.getIntl()),a=await o().callApi({eventName:"createEmailUser",environment:e,data:{email:t.email,preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:r}});return"failed"!==a.type?a.data.userId:void 0}function T(e,t){return(0,f().l)(e.flatMap((e=>e.email||[])))}function h(e,t){var i;const{state:n}=t,s=null===(i=v().default.state.currentSpaceStore)||void 0===i?void 0:i.id,r=s?(0,a().AI)(m().A.getData(e,{spaceId:s})):void 0,o=t.getGuestEmails();return{invite_flow_id:n.flowId,user_count:o.length,user_emails:o,invite_space_role_selection:n.selection,is_bot:!1,subscription_tier:r}}},535279:(e,t,i)=>{i.d(t,{P4:()=>s,U1:()=>a,lW:()=>o});i(944114),i(898992),i(354520),i(737550);var n=()=>i(842599);function s(e){const{target:t,inviteTargetsStore:i}=e;return i.state.inviteTargets.some((e=>"newUser"===t.type?e.type===t.type&&t.value.email===e.value.email:"invalidUser"===t.type?e.type===t.type&&t.value.text===e.value.text:"group"===t.type?e.type===t.type&&e.value.group_id===t.value.group_id:e.type===t.type&&e.value.id===t.value.id))}function r(e){return"invalidUser"!==e.type}function a(e){const{inviteTargetsStore:t,includeInputFieldText:i}=e,a=[...t.state.inviteTargets];if(i){const e=function(e){const t=e.state.tokenQuery.trim();if(!(0,n().DT)(t))return;const i={type:"newUser",value:{email:t},source:"email"};return s({target:i,inviteTargetsStore:e})?void 0:i}(t);e&&a.push(e)}return a.filter(r)}function o(e){const{inviteTargetsStore:t,inviteTarget:i}=e;if(s({target:i,inviteTargetsStore:t})){const e=t.state.inviteTargets.filter((e=>"group"===i.type&&"group"===e.type?i.value.group_id!==e.value.group_id:"existingUser"===i.type&&"existingUser"===e.type?i.value.id!==e.value.id:"newUser"!==i.type||"newUser"!==e.type||i.value.email!==e.value.email));return t.setState({...t.state,inviteTargets:e}),!1}return t.setState({inviteTargets:[...t.state.inviteTargets,i],tokenQuery:""}),!0}},542056:(e,t,i)=>{i.d(t,{Ah:()=>A,D6:()=>O,KW:()=>x,Oo:()=>M,Pp:()=>R,St:()=>E,hQ:()=>F,iS:()=>C,kW:()=>q,l5:()=>k,lf:()=>P});i(16280),i(944114),i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(898992),i(354520),i(803949),i(581454);var n=()=>i(842599),s=()=>i(68263),r=()=>i(179034),a=()=>i(96689),o=()=>i(496603),l=()=>i(763824),u=()=>i(534177),c=()=>i(579627),v=()=>i(495867),m=()=>i(731320),d=()=>i(743260),p=()=>i(299545),g=()=>i(37433),f=()=>i(106628),y=()=>i(351360),S=()=>i(57605),_=()=>i(159026),I=()=>i(406999),w=()=>i(630116),T=()=>i(991249),h=()=>i(475355),b=()=>i(134696),U=()=>i(449506);async function k(e){const{environment:t,store:i,sudoModeStore:o,permissionsInviteStore:l,onInviteStart:v,contextualInviteStore:g,inviteOrigin:f}=e,{tokenQuery:y}=l.state;if((0,n().DT)(y.trim())&&(l.state.isInviteTargetsEmpty||!(0,I().qs)(l.state))){const e={type:"newUser",value:{email:y.trim()},source:"email"};d().mQ({target:e,permissionsInviteStore:l})||l.setState({...l.state,inviteTargets:[...l.state.inviteTargets,e],isInviteTargetsEmpty:!1,tokenQuery:""})}if(!l.state.isInviteTargetsEmpty&&l.state.inviteTargets.length>0){null==v||v();const e=l.state;if((0,I().qs)(e)){if(e.table===r().ev){if(!(0,p()._p)(i))throw new Error("Table mismatch.");const{inviteTargets:n,flowId:s,emailMessage:r}=e;l.reset();const a=await c().eP({environment:t,store:i,sudoModeStore:o,inviteTargets:n,inviteRole:void 0,isOnboarding:!1,invite:{inviteFlowId:s,inviteMessage:r,inviteOrigin:f}});return{success:a.success,requestedUserCount:a.success?Object.keys(a.requestedUsers).length:0}}if(e.table===a().NX){if(!(0,p().Yu)(i))throw new Error("Table mismatch.");const{inviteTargets:n,inviteRole:s,flowId:r}=e;l.reset();return{success:(await c().eP({environment:t,store:i,sudoModeStore:o,inviteTargets:n,inviteRole:s,isOnboarding:!1,invite:{inviteFlowId:r,inviteOrigin:f}})).success,requestedUserCount:0}}(0,u().HB)(e)}else{const{inviteRole:n,flowId:r,emailMessage:a}=e;l.reset();const u=await(0,m().hb)(i,e.inviteTargets);if((0,s().PW)(n)){const e=await c().eP({environment:t,store:i,sudoModeStore:o,inviteTargets:u,inviteRole:n,isOnboarding:!1,invite:{inviteFlowId:r,inviteMessage:a,inviteOrigin:f}});return e.success&&(null==g||g.setState({...null==g?void 0:g.state,invitedEmailToUserIdMap:e.invitedUsers})),{success:e.success,requestedUserCount:e.success?Object.keys(e.requestedUsers).length:0}}if((0,p().$R)(i)&&(0,I().nV)(e)){return{success:await c().sQ({environment:t,store:i,inviteTargets:e.inviteTargets,inviteRole:n,createNewTeamFlowId:r}),requestedUserCount:0}}}}return{success:!0,requestedUserCount:0}}function M(e){e.permissionsInviteStore.setState({...e.permissionsInviteStore.state,modalOpen:!1,flowId:void 0})}function x(e){const{permissionsInviteStore:t,contextualInviteStore:i}=e;if(!i)return;const n=[];t.state.inviteTargets.forEach((e=>{if("newUser"===e.type)n.push({email:e.value.email,isGuest:!0});else if("existingUser"===e.type){const t={...e.value,email:e.value.email,isGuest:"none"===e.spaceRole||"not_in_space"===e.spaceRole};n.push(t)}})),i.setState({...i.state,invitedUsers:n})}async function q(e){const{environment:t,store:i,sudoModeStore:n,permissionsInviteStore:s,contextualInviteStore:r,onInviteClick:o,onInviteComplete:l,inviteOrigin:u,intl:c}=e,m=i.getSpaceId(),d=new(w().SL)(t,{table:a().NX,id:m}),p=m?await S().A.awaitData(t,{spaceId:m}):void 0;if((null==r?void 0:r.state.selection)===_().NJ.workspace_member&&d&&(0,g().Gx)(t,p)){if(!(await h().oH({environment:t,flowId:s.state.flowId||"",trackCreateTeamComplete:!1})))return;x({permissionsInviteStore:s,contextualInviteStore:r}),await(0,v().Lg)({environment:t,spaceStore:d,contextualInviteStore:r,from:u,intl:c})}else x({permissionsInviteStore:s,contextualInviteStore:r});let f={success:!1,requestedUserCount:0};try{f=await k({environment:t,store:i,sudoModeStore:n,permissionsInviteStore:s,contextualInviteStore:r,onInviteStart:()=>{null==o||o()},inviteOrigin:u})}catch(y){}finally{null==l||l(f.success,f.requestedUserCount)}}async function C(e){const{environment:t,permissionsInviteStore:i,from:n}=e;await d().iQ({environment:t,permissionsInviteStoreState:i.state,from:n})||i.reset()}function E(e){const{permissionsInviteStore:t,targetToRemove:i,defaultRoleForNonBot:n}=e;if(!t.state.isInviteTargetsEmpty)if((0,I().qs)(t.state))if((0,I().qs)(t.state)){const e=t.state.inviteTargets.filter((e=>e!==i));0===e.length?t.setState({...t.state,inviteTargets:[],inviteRole:n,isInviteTargetsEmpty:!0}):t.setState({...t.state,inviteTargets:e})}else(0,u().HB)(t.state);else{const e=t.state.inviteTargets.filter((e=>e!==i));0===e.length?t.setState({...t.state,inviteTargets:[],inviteRole:n,isInviteTargetsEmpty:!0}):t.setState({...t.state,inviteTargets:e})}}function O(e){const{environment:t,onUpgradeButtonClick:i,upgradeButtonName:n}=e;T().K(t,{from:n,upsell:{type:"product",product:"plus",limit:{type:"none"}}}),null==i||i()}async function A(e,t){const i=new Set(t),n=Array.from(i).map((async t=>{const i=await U().callApi({eventName:"findUser",environment:e,data:{email:t}});if("success"===i.type){const e=i.data;if(e.value){return{type:"existingUser",value:e.value.value}}}return{type:"newUser",value:{email:t},source:"email"}}));return await Promise.all(n)}async function R(e){const t="invitee",{environment:i,permissionsInviteStore:s,event:r}=e;if(!s.state.isInviteTargetsEmpty&&(0,I().qs)(s.state)){const e=r.target.value;s.setState({...s.state,inputFocus:t,tokenQuery:e})}else{const e=r.target.value,{extractedEmails:a,newInputValue:o}=(0,n().Ct)(e),l=(await A(i,a)).filter((e=>!d().mQ({target:e,permissionsInviteStore:s}))),u=[...s.state.inviteTargets,...l];u.length>0?s.setState({...s.state,inviteTargets:u,isInviteTargetsEmpty:!1,inputFocus:t,tokenQuery:o}):s.setState({...s.state,inviteTargets:[],isInviteTargetsEmpty:!0,inputFocus:t,tokenQuery:o})}}function P(e){const{environment:t,newRole:i,permissionsInviteStore:n}=e,{state:s}=n;b().Jy(t,{...d().oX(t,s),invite_updated_role:i}),!s.isInviteTargetsEmpty&&(0,I().qs)(s)||n.setState({...s,inviteRole:i})}async function F(e){var t;const{query:i,environment:n,sectionLimit:s,intl:r,membersOnly:a,importContactType:u}=e,{currentSpaceStore:c}=y().default.state;if(!c)return{inviteUsers:[],inviteBots:[],inviteGroups:[]};const{userLimit:v,botLimit:m,groupLimit:d,importContactLimit:p}=s,g=await f().T.searchActions.load(),[S,_,I,{user:w,email:T},h]=await Promise.all([v>0?g.searchVisibleSpaceUsers({environment:n,query:i,membersOnly:a}):[],m>0?g.searchSpaceBots({environment:n,query:i}):[],d>0?g.searchSpaceGroups({query:i,intl:r}):[],g.searchEmailUser(n,i),p>0?(0,l().nQ)(1500,U().callApi({eventName:"searchContacts",environment:n,data:{spaceId:c.id,limit:p,query:i,importContactType:u}})):void 0]),b=S.slice(0,v).map((e=>({type:"existingUser",value:e}))),k=_.slice(0,m).map((e=>({type:"bot",value:e}))),M=I.slice(0,d).map((e=>({type:"group",value:e})));w&&b.unshift({type:"existingUser",value:w}),T&&b.unshift({type:"newUser",value:{email:T},source:"email"});let x=[];return"success"===(null==h||null===(t=h.result)||void 0===t?void 0:t.type)&&(x=h.result.data.contacts.map((e=>({type:"newUser",value:{email:e.email,name:e.name,avatar_url:e.profile_photo},source:e.type})))),{inviteUsers:o().hS(b,(e=>e.value.email)),inviteBots:k,inviteGroups:M,importedContacts:x}}},980270:(e,t,i)=>{i.r(t),i.d(t,{handleEnterPress:()=>k,handleGuestInvite:()=>h,handleMemberInvite:()=>T,handleMemberRequest:()=>b,handlePopupClickWithEmail:()=>M,inviteToSpaceAsMembers:()=>U,showMessageForInviteComplete:()=>x});i(944114),i(898992),i(354520),i(430670),i(581454),i(737550),i(296540);var n=()=>i(842599),s=()=>i(857639),r=()=>i(206267),a=()=>i(68263),o=()=>i(959013),l=()=>i(319625),u=()=>i(229833),c=()=>i(966505),v=()=>i(449506),m=()=>i(579627),d=()=>i(542056),p=()=>i(436572),g=()=>i(250064),f=()=>i(535279),y=()=>i(731320),S=()=>i(134217),_=()=>i(10984),I=()=>i(475355),w=i(474848);async function T(e){const{environment:t,onInviteComplete:i,flowId:n,intl:r,spaceStore:a,invitedUsers:o,inviteTargetsStore:v,inviteOrigin:m,disable_invite_email:d}=e;let p={success:!1};try{p=await U({environment:t,spaceStore:a,invitedUsers:o,from:m,flowId:n,intl:r,inviteTargetsStore:v,disable_invite_email:d}),p.success?c().ke(t,{invited_user_count:Object.keys(p.invitedUsers).length,invite_flow_id:n,origin:m}):(c().N_(t,{invite_stage:"invite_member",invite_flow_id:n,error:p.error}),s().log({level:"error",from:"personPropertyInviteAction",type:"handleMemberInvite"}))}catch(g){const e=(0,l().A)(g);c().N_(t,{invite_stage:"invite_member",invite_flow_id:n,error:e}),s().log({level:"error",from:"personPropertyInviteAction",type:"handleMemberInvite",error:(0,u().n6)(g)})}finally{null==i||i(p)}}async function h(e){const{environment:t,blockStore:i,inviteTargetsStore:o,sudoModeStore:v,onInviteComplete:d,inviteOrigin:p,role:g,emailMessage:S,flowId:_}=e;let I={success:!1};try{if(I=await async function(e){const{environment:t,blockStore:i,sudoModeStore:s,inviteTargetsStore:o,role:l,inviteOrigin:u,emailMessage:c,onInviteStart:v}=e,d=e.flowId||r().JW();if(!(0,a().PW)(l))return{success:!1};const{tokenQuery:p,inviteTargets:g}=o.state;if((0,n().DT)(p.trim())&&0===g.length){const e={type:"newUser",value:{email:p.trim()},source:"email"};f().P4({target:e,inviteTargetsStore:o})||o.setState({inviteTargets:[...o.state.inviteTargets,e],tokenQuery:""})}const S=await y().hb(i,f().U1({inviteTargetsStore:o}));null==v||v();const _=await m().eP({environment:t,store:i,sudoModeStore:s,inviteTargets:S,inviteRole:l,isOnboarding:!1,invite:{inviteFlowId:d,inviteMessage:c,inviteOrigin:u}});return _}({environment:t,blockStore:i,sudoModeStore:v,inviteTargetsStore:o,role:g,emailMessage:S,inviteOrigin:p,flowId:_}),!I.success)return}catch(w){const e=(0,l().A)(w);c().N_(t,{invite_stage:"invite_guest",invite_flow_id:_,error:e}),s().log({level:"error",from:"personPropertyInviteAction",type:"handleGuestInvite",error:(0,u().n6)(w)})}finally{I.success&&c().oU(t,{invited_user_count:Object.keys(I.invitedUsers).length,origin:p,invite_flow_id:_}),null==d||d(I)}return I}async function b(e){const{environment:t,spaceStore:i,originId:n,originType:r,reasonMessage:a,intl:o,flowId:u,onInviteComplete:m,invitedUsers:d,inviteOrigin:f}=e,y=[];let S={success:!1};try{const e=Object.entries(d).map((e=>{let[s,o]=e;return v().callApi({eventName:"requestAccess",environment:t,data:{type:"actor-to-space",forActorId:o,spaceId:i.id,message:a,attributes:{origin_id:n,origin_type:r,origin_table:"block",add_permissions_on_approval:!1}}}).catch((()=>y.push([s,o])))}));await Promise.all(e),S={success:!0,invitedUsers:d,requestedUsers:{}}}catch(_){const e=(0,l().A)(_);return c().N_(t,{invite_stage:"request_member",invite_flow_id:u,error:e}),function(e,t){const i=Object.keys(t);if(0===i.length)return;p().D6({label:e.formatMessage({id:"contextual_invite.request_members_failure",defaultMessage:"Failed to request {users} to become members"},{users:(0,g().l)(i)})})}(o,d),s().log({level:"error",from:"personPropertyInviteAction",type:"handleMemberRequest",data:{miscDataToConvertToString:{inviteTargetEmailsWithErrors:y}}}),S}finally{S.success&&c().d6(t,{invited_user_count:Object.keys(S.invitedUsers).length,origin:f,invite_flow_id:u}),null==m||m(S)}return S}async function U(e){const{environment:t,spaceStore:i,from:n,invitedUsers:r,intl:a,flowId:o,onInviteStart:l,inviteTargetsStore:u,disable_invite_email:c}=e,v=function(e){const t=[];if(!e)return t;for(const[i,n]of Object.entries(e))t.push({type:"existingUser",value:{id:n,email:i,version:1}});return t}(r),d=function(e){return e.state.inviteTargets.filter((e=>"newUser"===e.type))}(u),f=[...v];for(const s of d){v.some((e=>e.value.email===s.value.email))||f.push(s)}const y=(0,_().AI)(),w=y&&(0,S().fk)(y)?"editor":e.inviteRole??"read_and_write";let T={success:!1};if(!i.isTeamsEnabled()){if(!(await I().oH({environment:t,flowId:o,trackCreateTeamComplete:!1})))return T}try{null==l||l(),T=await m().eP({environment:t,store:i,inviteTargets:f,inviteRole:w,isOnboarding:!1,invite:{inviteOrigin:n,inviteFlowId:o,disable_invite_email:c}})}catch(h){return function(e,t){0!==t.length&&p().D6({label:e.formatMessage({id:"contextual_invite.contextual_invite_failure",defaultMessage:"{userCount, plural, one {Failed to invite {users} as member} other {Failed to invite {users} as members}}"},{users:(0,g().l)(t.flatMap((e=>e.value.email||[]))),userCount:t.length})})}(a,f),s().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.inviteTargets",data:{miscDataToConvertToString:{usersToInviteAsMembers:f}}}),T}return T}async function k(e){const{environment:t,inviteTargetsStore:i,allowShowEmptyError:s,personPropertyInviteStore:r}=e,a=i.state.tokenQuery;if(""===a)return void(0===i.state.inviteTargets.length&&s&&r.setState({...r.state,showEmptyError:!0}));const o=(0,n().C3)(a),l=await d().Ah(t,o);let u=[];0===l.length&&(u=[{type:"invalidUser",value:{text:a}}]);const c=l.filter((e=>!f().P4({inviteTargetsStore:i,target:e}))),v=[...i.state.inviteTargets,...c,...u];i.setState({...i.state,inviteTargets:v,tokenQuery:""})}function M(e){const{email:t,inviteTargetsStore:i}=e,n={type:"newUser",value:{email:t},source:"email"},s=[...i.state.inviteTargets];f().P4({inviteTargetsStore:i,target:n})||s.push(n),i.setState({...i.state,inviteTargets:s})}function x(e){const{success:t,invitedUserEmails:i,isRequestMember:n}=e;t?0!==i.length&&(n?p().D6({label:(0,w.jsx)(o().sA,{id:"shareMenu.inviteSuccess.snackbarMessage.sendMemberRequest",defaultMessage:"Successfully sent request to admin to invite {users}",values:{users:(0,g().l)(i)}})}):p().D6({label:(0,w.jsx)(o().sA,{id:"shareMenu.inviteSuccess.snackbarMessage",defaultMessage:"Successfully invited {users}",values:{users:(0,g().l)(i)}})})):p().D6({label:(0,w.jsx)(o().sA,{id:"shareMenu.inviteFailure.snackbarMessage",defaultMessage:"Failed to invite {users}",values:{users:(0,g().l)(i)}})})}}}]);