"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[55901],{162402:(n,t,i)=>{i.d(t,{q:()=>o});i(296540);var e=i(474848);const o=(0,i(340498).wt)("circleCheckFilled",{viewBox:"0 0 16 16",svg:(0,e.jsx)("path",{d:"M8 16c4.377 0 8-3.631 8-8 0-4.376-3.631-8-8.008-8C3.624 0 0 3.624 0 8c0 4.369 3.631 8 8 8zm-.886-4.165c-.267 0-.487-.11-.69-.384l-1.97-2.416a.852.852 0 01-.187-.51c0-.352.274-.643.627-.643.228 0 .4.07.596.33l1.592 2.055 3.35-5.38c.148-.236.352-.362.556-.362.345 0 .667.236.667.604 0 .173-.102.353-.196.518l-3.686 5.804c-.165.259-.393.384-.66.384z"})})},225334:(n,t,i)=>{i.d(t,{M:()=>s});i(296540);var e=()=>i(401497),o=()=>i(742117),l=()=>i(162402),r=()=>i(100622),a=()=>i(331542),c=i(474848);function s(n){const{isConnecting:t,isIntegrationAuthenticated:i,hideChevronIcon:s}=n,d=(0,e().IS)((n=>({circleCheck:{height:14,width:14,color:r().Ay.blue,fill:r().Ay.blue},chevron:{height:12,width:12},loadingSpinner:{marginLeft:6}})),[]);return t?(0,c.jsx)(a().A,{legacySize:14,style:d.loadingSpinner}):(0,c.jsxs)(c.Fragment,{children:[i&&(0,l().q)(d.circleCheck),!s&&(0,o().V)(d.chevron)]})}},659126:(n,t,i)=>{i.r(t),i.d(t,{default:()=>u});i(898992),i(672577);var e=i(296540),o=()=>i(56366),l=()=>i(617871),r=()=>i(763824),a=()=>i(898563),c=()=>i(449506),s=()=>i(53137),d=i(474848);const u=function(n){const{onClickAuthenticated:t,title:u,hideChevronIcon:h,containerStyle:v,buttonStyle:g,from:f,inviteOrigin:p,flowId:m,loadContacts:C}=n,_=(0,i(484714).v3)(),[w,y]=e.useState(!1),I=(0,o().K8)((()=>i(351360).default.state.currentSpaceStore),[]),S=(0,o().K8)((()=>{const n=null==I?void 0:I.getBotSettingsStore().getValue();return"approved_only"!==(null==n?void 0:n.integration_restrictions)||Boolean((null==n?void 0:n.integration_approval_statuses)&&n.integration_approval_statuses[l().zG])}),[I]),k=(0,o().K8)((()=>s().A.integrations.state.find((n=>n.id===l().zG))),[]),x=(0,o().O$)(s().A.completeSlackAuthentications),A=(0,i(787766).Hc)();return I&&S?(0,d.jsx)("div",{style:v,children:(0,d.jsx)(i(493823).p,{style:g,onClick:async()=>{0===x.length?await async function(n){const{from:e,inviteOrigin:o,flowId:l}=n,s=_.currentUser.id;if(!k||!I||!s)return;try{var d;y(!0),a().fK(_,{origin:o,from:e,invite_flow_id:l});const n=await i(510683).Jq({environment:_,integration:k,spaceId:I.id,from:e});if(i(973647).Q.isFail(n))return void a().mH(_,{origin:o,from:e,invite_flow_id:l,is_success:!1});const s=null===(d=n.value.externalAuthentication)||void 0===d?void 0:d.parent_id;if(!s)return;a().mH(_,{origin:o,from:e,invite_flow_id:l,is_success:!0}),C&&await Promise.race([c().callApi({eventName:"loadContacts",environment:_,data:{botId:s,spaceId:I.id,integrationId:k.id,importContactType:"slack"}}),(0,r().wR)(2e3)]),null==t||t()}finally{y(!1)}}({from:f,inviteOrigin:p,flowId:m,loadContacts:C}):x.length>0&&(null==t||t())},children:(0,d.jsxs)("div",{style:A.labelContainer,children:[u,(0,d.jsx)(i(225334).M,{isConnecting:w,isIntegrationAuthenticated:x.length>0,hideChevronIcon:h})]})})}):null}}}]);