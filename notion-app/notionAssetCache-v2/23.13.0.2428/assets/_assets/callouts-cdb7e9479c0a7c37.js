"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[74688],{15154:(e,t,n)=>{n.d(t,{G:()=>a,_:()=>r});const r=.7,a=1},44211:(e,t,n)=>{n.r(t),n.d(t,{ConfigureRetentionAnnouncement:()=>S});var r=n(296540),a=()=>n(484714),i=()=>n(56366),o=()=>n(624090);const s=(0,n(340498).xh)("infoCircleFill",{default:{loader:()=>n.e(38827).then(n.bind(n,438827))},small:{loader:()=>n.e(65333).then(n.bind(n,265333))},mini:{loader:()=>n.e(25027).then(n.bind(n,925027))},large:{loader:()=>n.e(14233).then(n.bind(n,114233))}});var c=()=>n(287882),l=()=>n(959013),u=()=>n(317909),d=()=>n(755199),m=()=>n(58293),_=()=>n(861243),p=()=>n(351360),g=()=>n(404141),v=n(474848);const f=(0,l().YK)({title:{defaultMessage:"Configure data retention settings",id:"sidebar.configureRetention.title"},body:{defaultMessage:"Starting August 19th, pages in Trash will be automatically deleted after {duration}",id:"sidebar.configureRetention.body"},postLaunchBody:{defaultMessage:"Pages in Trash will be automatically deleted after {duration}",id:"sidebar.configureRetention.postLaunchBody"},button:{defaultMessage:"Configure",id:"sidebar.configureRetention.button"}});function S(e){const t=(0,a().v3)(),n=(0,l().tz)(),S=(0,i().K8)((()=>p().default.state.currentUserSettingsStore),[]),y=(0,m().r)(),b=(0,i().K8)((()=>(0,o().XX)(null==y?void 0:y.getModel())/1e3),[y]),h=(0,r.useCallback)((()=>{S&&(u().createAndCommit({userAction:"ConfigureRetentionAnnouncement.handleClick",environment:t,canUndo:!0,perform:e=>{d().mJ({transaction:e,userSettingsStore:S,data:{seen_trash_autodeletion_announcement:!0}})}}),g().A.setState({openedFrom:"content_search",open:!0,currentTab:"security",highlightedSetting:void 0,defaultSubtab:"data_retention"}))}),[S,t]),w=(0,r.useCallback)((()=>{S&&u().createAndCommit({userAction:"ConfigureRetentionAnnouncement.handleDismiss",environment:t,canUndo:!0,perform:e=>{d().mJ({transaction:e,userSettingsStore:S,data:{seen_trash_autodeletion_announcement:!0}})}})}),[S,t]),I=new Date>new Date("2024-08-19")?f.postLaunchBody:f.body;return(0,v.jsx)(_().Y,{messageKey:"configure_retention_sidebar",title:n.formatMessage(f.title),iconGroup:s,body:n.formatMessage(I,{duration:(0,c().rN)(b,n)}),buttons:[{text:n.formatMessage(f.button),onClick:h}],onDismiss:w})}},51367:(e,t,n)=>{n.d(t,{DL:()=>o,Sq:()=>c,Y5:()=>s,gc:()=>u,wo:()=>l});var r=()=>n(917629),a=()=>n(989423),i=()=>n(508496);function o(e,t){const n=(0,r().h2)(t.callout_key);n&&(t.placement_key=(0,r().t9)(n)),(0,a().u4)({environment:e,event:{eventName:"callout_show",eventProperties:t}}),i().default.logEvent("callout_show",t.callout_key)}function s(e,t){const n=(0,r().h2)(t.callout_key);n&&(t.placement_key=(0,r().t9)(n)),(0,a().u4)({environment:e,event:{eventName:"callout_click",eventProperties:t}}),i().default.logEvent("callout_click",t.callout_key)}function c(e,t){const n=(0,r().h2)(t.callout_key);n&&(t.placement_key=(0,r().t9)(n)),(0,a().u4)({environment:e,event:{eventName:"callout_dismiss",eventProperties:t}}),i().default.logEvent("callout_dismiss",t.callout_key)}function l(e,t){const{eligible_callouts:n,required_arg_timeout:r,required_args_run_duration:i,eligibility_timeouts:o,blocklist:s}=t;(0,a().u4)({environment:e,event:{eventName:"callout_coordinator_resolved",eventProperties:{eligible_callouts:n,required_arg_timeout:r,required_args_run_duration:i,eligibility_timeouts:o,blocklist:s}}})}function u(e,t){(0,a().u4)({environment:e,event:{eventName:"callout_feature_interaction",eventProperties:t}})}},58293:(e,t,n)=>{n.d(t,{r:()=>i});var r=()=>n(56366),a=()=>n(351360);function i(){return(0,r().K8)((()=>a().default.state.currentSpaceStore),[])}},97065:(e,t,n)=>{n.d(t,{DH:()=>i});var r=()=>n(61844);const a=["trial_from_perf_marketing","onboarding_reverse_trial","mp_reverse_trial","admin_trial"];function i(e){return a.includes(e)||r().FN.includes(e)}},240865:(e,t,n)=>{n.d(t,{V:()=>i});var r=()=>n(56366),a=()=>n(351360);function i(){return(0,r().K8)((()=>{const{currentSpaceStore:e}=a().default.state;return(null==e?void 0:e.getMemberCountFromPublicSpaceData())||null}),[])}},324561:(e,t,n)=>{n.d(t,{Gi:()=>_,Q7:()=>m,UU:()=>p,_3:()=>d,a9:()=>u,f_:()=>l});var r=()=>n(484714),a=()=>n(56366),i=()=>n(857639),o=()=>n(762433),s=()=>n(596513),c=()=>n(714300);function l(e){let{spaceId:t}=e;const n=(0,r().v3)();return(0,a().K8)((()=>{if(t)return s().t.getData(n,{spaceId:t})}),[n,t])}function u(e){if("admin"===(null==e?void 0:e.type))return e}function d(e){let{spaceId:t}=e;return u((0,c().l)({spaceId:t}))}function m(e,t,n){if(!t)return 0;const r=(0,o().yB)({spaceId:e,logFunction:i().log.bind(i()),billingData:t});return r?Math.max(r,n):0}function _(e){var t;const n=null===(t=(0,o().KH)(e,"plan"))||void 0===t?void 0:t.price;if(!n)return;const r=n.unitAmount,a="year"===n.billingInterval?12:1;return{amount:r.amount/a,currencyCode:r.currencyCode}}function p(e){return"app_store"===(null==e?void 0:e.provider)||"play_store"===(null==e?void 0:e.provider)||"mixed"===(null==e?void 0:e.provider)}},391657:(e,t,n)=>{n.d(t,{g:()=>u});n(944114);var r=n(296540),a=()=>n(484714),i=()=>n(722559),o=()=>n(465425),s=()=>n(51367),c=()=>n(832895),l=n(474848);function u(e){const{message:t,buttons:n}=e,u=(0,a().v3)();(0,r.useEffect)((()=>{s().DL(u,{callout_key:t.key,placement_key:(0,i().Q3)(t)})}),[u,t]);const d=(0,r.useCallback)((e=>{s().Y5(u,{callout_key:t.key,placement_key:(0,i().Q3)(t),click_type:"primary_cta"}),e&&e()}),[u,t]),m=(0,r.useCallback)((()=>{s().Sq(u,{callout_key:t.key,placement_key:(0,i().Q3)(t),dismiss_type:"sidebar_dismiss"}),o().OX(u,t),e.onDismiss&&e.onDismiss()}),[u,t,e]);let _;if(n){_=[];for(const e of n)_.push({...e,onClick:()=>{d(e.onClick)}})}return(0,l.jsx)(c().Ue,{children:(0,l.jsx)(c().wY,{...e,buttons:_,onDismiss:m})})}},641106:(e,t,n)=>{n.d(t,{N:()=>i,e:()=>r});function r(e,t){t}const a={dummy_modal:{title:{id:"announcementDigest.dummy_modal.title",defaultMessage:"Dummy Modal",description:"Title for the dummy modal announcement"},caption:{id:"announcementDigest.dummy_modal.caption",defaultMessage:"This is a dummy description of an announcement. Hi.",description:"Caption for the dummy modal announcement"},callToAction:{id:"announcementDigest.dummy_modal.callToAction",defaultMessage:"Do Nothing",description:"Button for the dummy modal announcement that does nothing"},imageUrl:n(148307).A.images.sites.sitesLaunchModalPng},dummy_modal_2:void 0,ai_assistant_announcement:void 0,ai_google_drive_universal_qna_announcement:void 0,ai_github_ai_connector_announcement:void 0,ai_jira_universal_qna_announcement:void 0,notion_calendar_launch_promo:void 0,omnimodal:void 0,mwn_feature_modal:void 0,organization_onboarding_modal:void 0};function i(e){return a[e]}},714300:(e,t,n)=>{n.d(t,{l:()=>c});var r=()=>n(484714),a=()=>n(56366),i=()=>n(176983),o=()=>n(596513),s=()=>n(324561);function c(e){let{spaceId:t}=e;const n=(0,r().v3)(),c=(0,i().J)();return(0,a().K8)((()=>{if(!t||!c)return;const e=o().t.getData(n,{spaceId:t});return(0,s().a9)(e)}),[n,t,c],{useDeepEqual:!0})}},749356:(e,t,n)=>{n.d(t,{VY:()=>m,Qm:()=>_,z6:()=>d,OC:()=>v,L6:()=>p,Zc:()=>f,x3:()=>g});var r=()=>n(857639),a=()=>n(386164);const i={plans_page:["lic_25","lic_50","resurrection_offer","ai_fifty_percent_upgrade"],sidebar_upsell:["lic_25","lic_50"]};var o=()=>n(229833),s=()=>n(449506),c=()=>n(901389),l=()=>n(989423),u=()=>n(351360);async function d(e,t){var n;const{spaceId:r,offerCampaign:a}=t;if(!r||!a||null===(n=u().default.state.currentSpaceStore)||void 0===n||!n.canAdmin())return;const i=await s().callApi({eventName:"getCustomerOffer",environment:e,data:{spaceId:r,offerCampaign:a}});return"failed"!==i.type&&"offer"in i.data&&i.data.offer?i.data.offer:void 0}async function m(e){const{environment:t,spaceId:n,offerCampaign:r,entrypoint:a}=e,i=await s().callApi({eventName:"applyCustomerOffer",environment:t,data:{spaceId:n,offerCampaign:r,entrypoint:a??"unknown"}});if("failed"!==i.type)return i;c().Qg(i)}async function _(e,t){const n=await s().callApi({eventName:"applyCustomerOffer",environment:e,data:{...t}});if("failed"!==n.type)return n;c().Qg(n)}async function p(e){const{environment:t,spaceId:n,offerCampaign:r}=e;return void 0!==await d(t,{spaceId:n,offerCampaign:r})}async function g(e){var t;const{environment:n,hasReceived:i,offerType:c,newPlan:l,coupon:d}=e,m=null===(t=u().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId();if(!m)return;const _=await s().callApi({eventName:"updateCustomerOffer",environment:n,data:{spaceId:m,hasReceived:i,offerType:c,newPlan:l,coupon:d},headers:(0,a().WS)({cellId:void 0,spaceId:m})});"failed"===_.type&&r().log({level:"error",from:"offerActions",type:"updateLegacyCustomerOfferFailed",error:(0,o().n6)(_.error)})}async function v(e,t,n){const r=function(e){if(i.hasOwnProperty(e))return i[e]}(n);if(r)for(const a of r){const n=await d(e,{spaceId:t,offerCampaign:a});if((null==n?void 0:n.campaign)===a)return n}}function f(e){let{environment:t,spaceName:n,offerCampaign:r}=e;if(n)switch(r){case"lic_25":case"lic_50":(0,l().WU)(t,"lic_offer_eligible","lic_offer_eligible",3600,{workspace_name:n,lic_25:"lic_25"===r,lic_50:"lic_50"===r});break;case"resurrection_offer":(0,l().WU)(t,"resurrection_offer_eligible","resurrection_offer_eligible",3600,{workspace_name:n});break;default:return}}},832895:(e,t,n)=>{n.d(t,{Ue:()=>g,wY:()=>v});n(944114),n(898992),n(803949);var r=n(296540),a=()=>n(401497),i=()=>n(949306),o=()=>n(534177),s=()=>n(84817),c=()=>n(704152),l=()=>n(493823),u=()=>n(460292),d=()=>n(554509),m=n(474848);const _=(0,r.createContext)(void 0);_.displayName="AnimationDismissContext";const p=300;function g(e){const{children:t}=e,[n,i]=(0,r.useState)(100),o=(0,a().IS)((()=>({card:{marginBottom:`-${n}%`,transitionProperty:"margin-bottom",transitionDuration:`${p}ms`,transitionTimingFunction:"ease"}})),[n]);(0,r.useEffect)((()=>{i(0)}),[]);const s=(0,r.useCallback)((e=>{i(100),setTimeout(e,p)}),[]);return(0,m.jsx)(_.Provider,{value:s,children:(0,m.jsx)("div",{style:o.card,children:t})})}function v(e){const{title:t,body:n,buttons:c,imageUrl:p,imageUrlHeight:g,onDismiss:v,staticIcon:S,iconGroup:y,iconColor:b}=e,h=(0,a().IS)((e=>({container:{backgroundColor:"transparent",margin:8,display:"flex"},card:{borderRadius:8,border:`1px solid ${"dark"===e.mode?e.stroke.secondary:"transparent"}`,boxShadow:e.shadowSM,position:"relative",padding:8,backgroundColor:e.surface.wash,WebkitBackdropFilter:"blur(30px)",backdropFilter:"blur(30px)"},content:{paddingTop:4},closeButton:{position:"absolute",top:8,right:8,width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center"},image:{height:g??56,alignSelf:"start",maxWidth:"100%",marginLeft:4},iconWrapper:{width:24,height:24,display:"flex",justifyContent:"center",alignItems:"center"}})),[g]),w=(0,r.useContext)(_),I=(0,r.useCallback)((()=>{w?w((()=>null==v?void 0:v())):null==v||v()}),[v,w]),k=[];let C,A,P;return c&&(0,o().EI)(c)&&c.forEach(((e,t)=>k.push((0,m.jsx)(f,{...e},t)))),v&&(C=(0,m.jsx)(l().p,{isGray:!0,size:"xs",style:h.closeButton,onClick:I,children:(0,m.jsx)(u().Q,{iconGroup:i().Q,variantName:"mini",colorName:"secondary"})})),p&&(A=(0,m.jsx)("img",{src:p,style:h.image})),y?P=(0,m.jsx)("span",{style:h.iconWrapper,children:(0,m.jsx)(u().Q,{iconGroup:y,variantName:"default",colorName:b??"primary"})}):S&&(P=S),(0,m.jsx)("div",{style:h.container,children:(0,m.jsxs)(s().Y1,{direction:"vertical",style:h.card,gap:8,children:[A,(0,m.jsxs)(s().Y1,{direction:"horizontal",children:[P,(0,m.jsxs)(s().Y1,{gap:4,style:h.content,children:[(0,m.jsxs)(s().Y1,{gap:4,padding:`0px ${v?32:8}px 0px 8px`,children:[(0,m.jsx)(d().D,{styleName:"UISmall-12px/Semibold",colorName:"primary",children:t}),(0,m.jsx)(d().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:n})]}),(0,m.jsx)("div",{children:k})]})]}),C]})})}function f(e){const t=Boolean(e.leftIcon)||Boolean(e.leftIconGroup),n=(0,a().IS)((()=>({button:{paddingTop:4,paddingRight:8,paddingBottom:4,paddingLeft:t?6:8,borderRadius:6},buttonIcon:{width:14}})),[t]);let r,i;return e.leftIcon?r=(0,m.jsx)("div",{style:n.buttonIcon,children:e.leftIcon()}):e.leftIconGroup&&(r=(0,m.jsx)(u().Q,{iconGroup:e.leftIconGroup,variantName:"small"})),e.rightIcon?i=(0,m.jsx)("div",{style:n.buttonIcon,children:e.rightIcon()}):e.rightIconGroup&&(i=(0,m.jsx)(u().Q,{iconGroup:e.rightIconGroup,variantName:"small"})),(0,m.jsx)(s().Y1,{direction:"horizontal",children:(0,m.jsx)(c().A,{style:n.button,onClick:e.onClick,children:(0,m.jsxs)(s().Y1,{direction:"horizontal",align:"center-left",gap:t?4:6,width:"hug",children:[r,(0,m.jsx)(d().D,{styleName:"UISmall-12px/Semibold",colorName:"primary",children:e.text}),i]})})})}},861243:(e,t,n)=>{n.d(t,{Y:()=>o});n(296540);var r=()=>n(391657),a=()=>n(832895),i=n(474848);function o(e){const{messageKey:t}=e,n={id:"",key:t,type:"static",props:{}};return(0,i.jsx)(a().Ue,{children:(0,i.jsx)(r().g,{...e,message:n})})}},890443:(e,t,n)=>{n.r(t),n.d(t,{getEligibleStaticMessages:()=>B,maybeShowMessagesImpl:()=>T,showStartupMessagesImpl:()=>F});n(944114),n(898992),n(354520),n(581454);var r=()=>n(244641),a=()=>n(690495),i=()=>n(917629),o=()=>n(763824),s=()=>n(534177),c=()=>n(449506),l=()=>n(351360),u=()=>n(430483),d=()=>n(57605),m=()=>n(508496),_=()=>n(749240),p=()=>n(731741),g=()=>n(465425),v=()=>n(51367),f=(n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(672577),()=>n(130382)),S=()=>n(402390),y=()=>n(386164),b=()=>n(762433),h=()=>n(166386),w=()=>n(720665),I=()=>n(437622),k=()=>n(596513),C=()=>n(749356),A=()=>n(15154),P=()=>n(807778),D=()=>n(134217),x=()=>n(10984),U=()=>n(597898);function N(e){const{currentUserSettingsStore:t,minAccountAgeInDays:r}=e,a=(0,n(680074).iZ)(t);return Number(a)>=r}function G(e){return"unsubscribed_admin"===e.state.type||"unsubscribed_member"===e.state.type}const q={dummy_modal:async e=>{const{environment:t}=e;return Promise.resolve(!t.device.isElectron&&m().default.checkGate({gateName:"can_see_callout_modal_test"}))},dummy_modal_2:async e=>{const{environment:t}=e;return Promise.resolve(!t.device.isElectron&&m().default.checkGate({gateName:"can_see_callout_modal_test"}))},omnimodal:async e=>{let{}=e;return Promise.resolve(!1)},ai_google_drive_universal_qna_announcement:async e=>Promise.resolve(!1),ai_jira_universal_qna_announcement:async e=>{const{environment:t,currentSpaceStore:n,mainEditorCurrentBlockStore:r,assistantFeatureGateStore:a,currentUserSettingsStore:i}=e,o=await k().t.awaitData(t,{spaceId:n.getSpaceId()}),s=(0,b().eh)(o,"plus")||(0,b().eh)(o,"business")||(0,b().eh)(o,"enterprise"),l=(n.getMemberCountFromPublicSpaceData()??1)>1;if(!(r.canRead()&&n.canAdmin()&&s&&l))return!1;if(!N({currentUserSettingsStore:i,minAccountAgeInDays:8}))return!1;if(!a.isJiraQnaEnabled()||!a.isAiEnabled())return!1;try{const e=await c().callApi({eventName:"getJiraAIConnectorAnnouncementEligibility",environment:t,data:{spaceId:n.getSpaceId()}});return"success"===e.type&&e.data.eligibility}catch{return!1}},ai_github_ai_connector_announcement:async e=>Promise.resolve(!1),ai_assistant_announcement:async e=>{const{currentUserSettingsStore:t,mainEditorCurrentBlockStore:n,assistantFeatureGateStore:r}=e,a=t.getSettings();if(!a)return!1;const i=void 0===(null==a?void 0:a.ai_assistant_onboarding_phase);return Promise.resolve(n.canRead()&&N({currentUserSettingsStore:t,minAccountAgeInDays:8})&&i&&r.canSeeAssistantFeaturePromotionalModal())},sidebar_upgrade_nudge:async e=>{const{currentUserSettingsStore:t,billingData:r,currentSpaceStore:a}=e,i=t.getSettings(),o=a.getMemberCountFromPublicSpaceData()??1,s=(0,n(907917).x)({billingData:r,memberCount:o});return Promise.resolve(!(null!=i&&i.dismissed_sidebar_upgrade_nudge||"none"!==s||(0,b().Fq)(r)||1!==o||(0,I().bN)(a)))},calendar_launch_prompt:async e=>{const{experimentStore:t,currentSpaceStore:a,currentUserSettingsStore:i,subscriptionDataStore:o}=e,s=i.getSettings(),c=null==s?void 0:s.notion_calendar_launch_modal_dismissed_at;if(void 0===c)return!1;if((0,n(583238).mX)())return!1;const l=r().c9.now().toMillis()-c;return Promise.resolve(!G(o)&&t.checkGate({gateName:"notion_calendar_launch_modal"})&&!(0,I().XZ)(a)&&void 0!==s&&"dismissed_modal"===s.notion_calendar_launch_modal_phase&&l>=2*w().nD)},ai_limit_nudge:async e=>{var t,n;const{environment:r,currentSpaceStore:a,currentUserSettingsStore:i}=e,o=i.getSettings();if(void 0===o)return!1;const s=a.getSpaceId(),c=await(0,U().Bw)(r,{name:"ai_usage",spaceId:s,userId:r.currentUser.id,amount:1}),l=c.limit;if("unlimited"===l.total)return!1;const u=+l.current/l.total,d=u>=A().G?!(null===(t=o.addOnLimitNotifications)||void 0===t||!t.disableLimitNotificationInSidebar):!(null===(n=o.addOnLimitNotifications)||void 0===n||!n.disableWarningNotificationInSidebar),m=c.upsell;return"unavailable"!==c.type&&void 0!==m&&!d&&u>=A()._},block_limit_nudge:async e=>{const{environment:t,subscriptionDataStore:n,currentSpaceStore:r}=e,a=n.state;if(!a)return!1;const i=await D().$(t,r.getSpaceId(),a);return G(n)&&D().z8(a,t,r.getSpaceId(),i)},post_reverse_trial_sidebar:async e=>{const{environment:t,subscriptionDataStore:r,currentSpaceStore:a}=e;if(!G(r)||!a.canAdmin())return Promise.resolve(!1);const i=a.getSpaceId(),o=await c().callApi({eventName:"getCustomerOffersReceived",environment:t,data:{spaceId:i},headers:(0,y().WS)({cellId:void 0,spaceId:i})});if("failed"===o.type)return Promise.resolve(!1);const s=o.data,l=(0,h().e8)(s,"trial"),u=l&&(0,n(97065).DH)(l.offer.campaign);return Promise.resolve(u)},lic_offer_sidebar:async e=>{const{environment:t,subscriptionDataStore:n,currentSpaceStore:r}=e,a=r.getSpaceId();if(!G(n)||!D().qc(n.state)||!a)return Promise.resolve(!1);const i=await(0,C().OC)(t,a,"sidebar_upsell");if(!i)return Promise.resolve(!1);const o=i.campaign;if("lic_25"!==o&&"lic_50"!==o)return Promise.resolve(!1);const s=(0,I().GK)(t,r);return s&&(0,C().Zc)({environment:t,spaceName:s,offerCampaign:o}),Promise.resolve(!0)},new_year_2025_offer_sidebar:async e=>{const{environment:t,subscriptionDataStore:n,currentSpaceStore:r}=e,a=r.getSpaceId();if(!(D().qc(n.state)&&G(n)&&a&&(0,P().tW)()))return Promise.resolve(!1);const i=await(0,C().z6)(t,{spaceId:a,offerCampaign:"new_year_2025"});if(!i)return Promise.resolve(!1);return"new_year_2025"!==i.campaign?Promise.resolve(!1):Promise.resolve(!0)},resurrection_offer_sidebar:async e=>{const{environment:t,subscriptionDataStore:n,currentSpaceStore:r}=e,a=(0,P().vv)(),i=r.getSpaceId();if(!(G(n)&&a&&D().qc&&i))return Promise.resolve(!1);const o=await(0,C().z6)(t,{spaceId:i,offerCampaign:"resurrection_offer"});return o?Promise.resolve((0,h().u6)(o)):Promise.resolve(!1)},onboarding_reverse_trial_sidebar:async e=>{const{environment:t,currentSpaceStore:r}=e,a=await d().A.awaitData(t,{spaceId:r.getSpaceId()}),i=(0,n(753735).uq)(a),o=(0,b().DS)(a);if(!i||!r.canAdmin())return Promise.resolve(!1);const s=r.getSpaceId(),l=await c().callApi({eventName:"getCustomerOffersReceived",environment:t,data:{spaceId:s},headers:(0,y().WS)({cellId:void 0,spaceId:s})});if("success"!==l.type)return Promise.resolve(!1);const u=(0,h().e8)(l.data,"trial");if(!u)return Promise.resolve(!1);const m=(0,h().ER)(u,o),_=(0,h().b_)(u.offer).as("days"),p=m>Math.round(_/2);return Promise.resolve(p)},import_data_prompt:async e=>{var t;const{experimentStore:n,currentUserSettingsStore:r}=e;if(!(null===(t=r.getSettings())||void 0===t||null===(t=t.adoption_entry_points)||void 0===t||!t.import_sidebar_announcement))return Promise.resolve(!1);const a=n.getEligibleGroup({experimentId:"adoption_import_push",defaultGroup:"control"});return Promise.resolve("on"===a)},integration_webhooks:async e=>{let{currentSpaceStore:t,experimentStore:n}=e;return Promise.resolve(t.canAdmin()&&n.checkGate({gateName:"show_integration_webhooks_callout"}))},student_org_prompt:async e=>{var t,n;const{environment:r,subscriptionDataStore:a,currentUserSettingsStore:i}=e,o=a.state,s=a.state.subscriptionTier,l=void 0!==s&&["student","personal","personal_free","free"].includes(s),u=new Set(["student_club_monthly","student_club_yearly"]),d=(0,I().p3)(),m=D().qc(o)&&(null==o||null===(t=o.customerData)||void 0===t?void 0:t.stripe)&&"plan"in o.customerData.stripe&&u.has(o.customerData.stripe.plan);if(void 0!==(null===(n=i.getSettings())||void 0===n?void 0:n.dismissed_sidebar_student_org_prompt)||!l||m||"multiplayer"===(null==d?void 0:d.collaborativeIntent))return!1;const _=await c().callApi({eventName:"isEmailEducation",environment:r,data:{validationType:"Domain"}});return"failed"!==_.type&&_.data.isEligible},notion_calendar_launch_promo:async e=>{const{environment:t,currentUserSettingsStore:n,mainEditorCurrentBlockStore:r,experimentStore:a,currentSpaceStore:i}=e,o=n.getSettings();if(!o)return!1;const s=o.notion_calendar_launch_modal_phase,c=t.device.isElectron?void 0===s:void 0===s||"connected_notion_calendar"===s;return Promise.resolve(r.canRead()&&a.checkGate({gateName:"notion_calendar_launch_modal"})&&!(0,I().IL)(i)&&!(0,I().XZ)(i)&&c)},startup_sidebar_footer:async e=>Promise.resolve(!1),asana_post_import_tour:async e=>{var t,n;const{currentUserSettingsStore:r,mainEditorCurrentBlockStore:a}=e,i=a,o=(null==i?void 0:i.isCollectionView())&&(null===(t=i.getFormat())||void 0===t?void 0:t.is_asana_imported_project)&&!(null!==(n=r.getSettings())&&void 0!==n&&n.seen_asana_post_import_tour);return Promise.resolve(o)},configure_retention_sidebar:async e=>{var t;const{environment:n,currentSpaceStore:r,currentUserSettingsStore:a}=e,i=await(0,U().Se)(n,{name:"configurable_retention",spaceId:r.getSpaceId(),userId:n.currentUser.id}),o=void 0===r.getSettings().delete_from_trash_delay_seconds&&void 0===r.getSettings().purge_delay_seconds,s=!(null!==(t=a.getSettings())&&void 0!==t&&t.seen_trash_autodeletion_announcement);return Promise.resolve(i&&r.canAdmin()&&o&&s)},desktop_download_sidebar:async e=>{var t,n,a;const{currentUserSettingsStore:i,environment:o}=e;if("web-desktop"!==o.device.deviceType)return!1;if(!!(null!==(t=i.getSettings())&&void 0!==t&&t.used_mac_app||null!==(n=i.getSettings())&&void 0!==n&&n.used_windows_app))return!1;const s=null===(a=i.getSettings())||void 0===a?void 0:a.signup_time;if(!s)return!1;const c=r().c9.now().toMillis()-s;return!(c>=7*w().nD)&&Promise.resolve(c<1*w().pT)},open_in_calendar_tooltip:async e=>{const{currentSpaceStore:t,currentUserSettingsStore:n}=e,r=n.getSettings(),a=(0,I().dT)({env:"production",spaceStore:t});return Promise.resolve(!(a||null!=r&&r.seen_open_in_calendar_tooltip))},ai_google_drive_qna_notification_tooltip:async e=>{const{environment:t,assistantFeatureGateStore:n,currentSpaceStore:r,currentSpaceViewStore:a}=e,i=a.getSettings();if(!i||!n.isAiEnabled()||!n.canUseUniversalGoogleDriveSearchScope()||void 0!==i.ai_google_drive_qna_notification_seen_at)return Promise.resolve(!1);const o=await c().callApi({eventName:"getGoogleDriveRecallStatusForUser",environment:t,data:{spaceId:r.getSpaceId()}});return Promise.resolve("success"===o.type&&"enabled"===o.data.status)},ai_slack_qna_notification_tooltip:async e=>{const{environment:t,currentSpaceStore:n,currentSpaceViewStore:r,assistantFeatureGateStore:a}=e,i=null==r?void 0:r.getSettings(),o=n.getSpaceId();if(!a.isSlackQnaNotificationEnabled()||!a.isAiEnabled()||!i||void 0!==i.ai_slack_qna_notification_seen_at)return Promise.resolve(!1);const[s,l]=await Promise.all([c().callApi({eventName:"getConnectedAppsForUniversalQna",environment:t,data:{spaceId:o},headers:(0,y().WS)({spaceId:o})}),c().callApi({eventName:"getSlackBulkIngestionStatus",environment:t,data:{spaceId:o},headers:(0,y().WS)({spaceId:o})})]);return Promise.resolve("success"===s.type&&s.data.connectedApps.includes("slack-admin")&&"success"===l.type&&!l.data.inProgress&&l.data.isSyncCompleted)},ai_slack_qna_embed_tooltip:async e=>{var t;const{environment:n,currentSpaceStore:r,mainEditorCurrentBlockStore:a,assistantFeatureGateStore:i,currentUserSettingsStore:o,experimentStore:s}=e;if(null!==(t=o.getSettings())&&void 0!==t&&t.seen_slack_embed_ai_connector_tooltip)return!1;const c=await k().t.awaitData(n,{spaceId:r.getSpaceId()}),l=(0,b().eh)(c,"plus")||(0,b().eh)(c,"business")||(0,b().eh)(c,"enterprise"),u=(r.getMemberCountFromPublicSpaceData()??1)>1;return!!(a.canRead()&&l&&u)&&(!!N({currentUserSettingsStore:o,minAccountAgeInDays:8})&&(!(!s.checkGate({gateName:"enable_slack_embed_tooltips_actual"})||!i.isAiEnabled())&&Promise.resolve(!0)))},ai_sales_assisted_notification_tooltip:async e=>{var t;const{assistantFeatureGateStore:r,currentUserSettingsStore:a,currentSpaceStore:i,environment:o,subscriptionDataStore:s}=e,c=null==a?void 0:a.getSettings(),l=(0,n(656633).vp)(o,i.id),u="tooltip"!==(null==c?void 0:c.ai_assistant_onboarding_phase)||void 0!==(null==c?void 0:c.ai_assistant_onboarding_phase_last_set_at)&&(0,f().Mn)(c.ai_assistant_onboarding_phase_last_set_at)<1,d=(0,n(441738).GI)((null===(t=s.state)||void 0===t?void 0:t.addOns)??[]);return Promise.resolve(r.showAssistantNotionAiCopy()&&r.isAiEnabled()&&l&&void 0===c.ai_sales_assisted_extra_notification_seen_at&&!u&&d)},ai_assistant_origin_element_tooltip:async e=>{const{environment:t,currentUserSettingsStore:r,mainEditorCurrentBlockStore:a,assistantFeatureGateStore:i}=e;return Promise.resolve(!n(186445).$o.state&&a.canRead()&&i.isQnATooltipsVisible(t.device,r))},ai_assistant_reminder_tooltip:async e=>Promise.resolve(!1),language_switch_prompt:async e=>{var t,n;const{currentUserSettingsStore:r}=e,a=(null==r||null===(t=r.getSettings())||void 0===t?void 0:t.preferred_locale)||S().q,i=(null==r||null===(n=r.getSettings())||void 0===n?void 0:n.language_switching_prompt_dismissals)||[],o=!!(0,S().A_)(a,i);return Promise.resolve(o)},forms_share_form_tooltip:async e=>{var t;const{currentUserSettingsStore:n}=e,r=Boolean(null===(t=n.getSettings())||void 0===t?void 0:t.seen_forms_share_form_tooltip);return Promise.resolve(!r)},forms_add_conditional_logic_tooltip:async e=>{var t;const{currentUserSettingsStore:n}=e,r=Boolean(null===(t=n.getSettings())||void 0===t?void 0:t.seen_forms_add_conditional_logic_tooltip);return Promise.resolve(!r)},contact_sales_promo_sidebar_v2:async e=>{var t;const{environment:r,currentSpaceStore:a,subscriptionDataStore:i,currentUserSettingsStore:o,experimentStore:s}=e;let c=!1;try{c=await(0,n(128265).G)(r)}catch(_){}const l=(0,x().dL)()||(0,x().$P)()||(0,x().tL)(),u=D().qc(i.state),d=i.state?await D().$(r,a.pointer.spaceId,i.state):1,m=((null==o||null===(t=o.getSettings())||void 0===t?void 0:t.preferred_locale)||S().q)===S().q;return Promise.resolve(u&&c&&l&&d>5&&m&&Boolean("on"===s.getEligibleGroup({experimentId:"contact_sales_promo_v2",defaultGroup:"control"})))},mwn_feature_modal:async e=>{const{experimentStore:t,currentUserSettingsStore:n,environment:r}=e,a=null==n?void 0:n.getSettings(),i=Boolean(null==a?void 0:a.mwn_feature_modal_dismissed_at_millis),o=r.RouterStore.state.route,s=o&&"gallery"===o.name;return Promise.resolve(!i&&t.checkGate({gateName:"mwn_feature_modal"})&&!s)},customize_slug_tooltip:async e=>{const{currentSpaceStore:t}=e,n=(0,I().oT)(t);return Promise.resolve(n)},collection_add_item_button_tooltip:async e=>{const{mainEditorCurrentBlockStore:t}=e;return Promise.resolve(t.canEdit())},faces_xsell_sidebar:async e=>{var t;const{experimentStore:n,currentUserSettingsStore:r}=e,a=N({currentUserSettingsStore:r,minAccountAgeInDays:8}),i=null==r||null===(t=r.getSettings())||void 0===t?void 0:t.first_seen_faces_xsell_at,o=i&&(0,f().Mn)(i)<7;return Promise.resolve(a&&(n.checkGate({gateName:"faces_xsell_sidebar"})||o))},jira_ai_sidebar_reminder:async e=>{const{assistantFeatureGateStore:t}=e,a=function(e){const{messageKey:t,nDays:n}=e,{currentUserSettingsStore:a,currentSpaceViewStore:i}=l().default.state,o=null==a?void 0:a.getSettings(),s=((null==o?void 0:o.callout_dismissal_timestamps)??[]).find((e=>e.name===t)),c=null==i?void 0:i.getSettings(),u=((null==c?void 0:c.callout_dismissal_timestamps)??[]).find((e=>e.name===t)),d=Math.max((null==s?void 0:s.timestamp)??0,(null==u?void 0:u.timestamp)??0);return!!d&&(r().c9.now().toMillis()-d)/864e5>=n}({messageKey:"ai_jira_universal_qna_announcement",nDays:7}),i=t.notYetConnectedToJiraUniversalQnA(n(99254).y.state),o=q.ai_jira_universal_qna_announcement(e);return a&&i&&o},student_offer_jan_2025_sidebar:async e=>{const{environment:t,experimentStore:n,currentSpaceStore:r}=e,a=(0,I().p3)(),i=r.getMemberCountFromPublicSpaceData()??1,o="singleplayer"===a.collaborativeIntent||1===i;if(!["personal","school"].includes(a.intent??"")||!o)return!1;const s=await c().callApi({eventName:"isEmailEducation",environment:t,data:{validationType:"Domain"}});return"failed"!==s.type&&(!!n.checkGate({gateName:"student_offer_jan_2025_sidebar"})&&s.data.isEligible)},workflow_template_installation:async e=>{const{mainEditorCurrentBlockStore:t}=e;return Promise.resolve(t.canEdit())},organization_onboarding_modal:async e=>{const{environment:t,currentSpaceStore:r,experimentStore:a}=e;if(!a.checkGate({gateName:"organization_console_ga_enabled"}))return!1;const i=(0,n(979340).bp)(r.getSubscriptionTier()),o=r.isReady()&&r.canAdmin();if(!i||!o)return!1;const s=await c().callApi({eventName:"getOrganizationOnboardingInfo",environment:t,data:{spaceId:r.getSpaceId()}});if("success"===s.type){const e=s.data.result.onboardingStatus;return"ineligible"!==e&&"completed"!==e}return!1}};var E=()=>n(641106);const j=5e3,M=3e4;async function R(e){const t={environment:Promise.resolve(e),currentUserSettingsStore:l().default.waitUntil((()=>{var e;return Boolean(null===(e=l().default.state.currentUserSettingsStore)||void 0===e?void 0:e.isReady())})).then((()=>l().default.state.currentUserSettingsStore)),currentSpaceStore:l().default.waitUntil((()=>{var e;return Boolean(null===(e=l().default.state.currentSpaceStore)||void 0===e?void 0:e.isReady())})).then((()=>l().default.state.currentSpaceStore)),mainEditorCurrentBlockStore:l().default.waitUntil((()=>{var e;return Boolean(null===(e=l().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.isReady())})).then((()=>l().default.state.mainEditorCurrentBlockStore)),currentSpaceViewStore:l().default.waitUntil((()=>{var e;return Boolean(null===(e=l().default.state.currentSpaceViewStore)||void 0===e?void 0:e.isReady())})).then((()=>l().default.state.currentSpaceViewStore)),assistantFeatureGateStore:u().zD.waitUntil((()=>u().zD.getIsInitialized())).then((()=>u().zD)),subscriptionDataStore:_().subscriptionDataStoreInstance.waitUntilLoaded().then((()=>_().subscriptionDataStoreInstance)),experimentStore:m().default.waitUntilStatsigReady().then((()=>m().default)),billingData:l().default.waitUntil((()=>{var e;return Boolean(null===(e=l().default.state.currentSpaceStore)||void 0===e?void 0:e.isReady())})).then((()=>l().default.state.currentSpaceStore)).then((t=>d().A.awaitData(e,{spaceId:t.getSpaceId()})))},n={};return Promise.all((0,s().uv)(t).map((e=>async function(e,t,n){const r=await(0,o().nQ)(M,n);return r.timeout?Promise.reject(t):(e[t]=r.result,Promise.resolve(void 0))}(n,e,t[e])))).then((()=>({requiredArgs:n,timeoutKey:void 0})),(e=>({timeoutKey:e,requiredArgs:void 0})))}async function B(e,t){const n=r().c9.now().toMillis(),{requiredArgs:a,timeoutKey:i}=await R(e),s=r().c9.now().toMillis()-n;if(!a)return{eligibleKeys:[],requiredArgTimeout:i,requiredArgsRunDuration:s};const{candidates:c,timeouts:l}=await async function(e,t){const n=[],r=[];for(const a of t){const{timeout:t,result:i}=await(0,o().nQ)(j,q[a](e));t?n.push(a):i&&r.push(a)}return{candidates:r,timeouts:n}}(a,t);return{eligibleKeys:c,eligibilityTimeouts:l,requiredArgsRunDuration:s}}async function T(e,t){await async function(){return new Promise((e=>{Q?e():z.push(e)}))}();const{eligibleKeys:n,eligibilityTimeouts:r,requiredArgsRunDuration:a,requiredArgTimeout:i}=await B(e,t);if(i)return{shown:[],requiredArgTimeout:i,requiredArgsRunDuration:a};const o=K(n),s=[];for(const c of o){const t={id:"",key:c,type:"static",props:{}};g().rG(e,t).success&&s.push(c)}return{shown:s,eligibilityTimeouts:r,requiredArgsRunDuration:a}}async function F(e){const t=i().qd.filter((e=>a().lU[e].show_on_startup));await m().default.waitUntilStatsigReady();const{eligibleKeys:n,eligibilityTimeouts:r,requiredArgTimeout:o,requiredArgsRunDuration:s}=await B(e,t);if(o)return void v().wo(e,{eligible_callouts:[],required_arg_timeout:o,required_args_run_duration:s,eligibility_timeouts:[]});let l=K(n);if(m().default.checkGate({gateName:"callouts_omnimodal"})){const e=l.filter((e=>"Modal"===(0,i().t9)(e)&&Boolean((0,E().N)(e))));e.length>1&&(p().A.setConfig("omnimodal",{callouts:e}),l=["omnimodal",...l.filter((e=>"Modal"!==(0,i().t9)(e)))])}const u=[];for(const a of n)u.push({id:"",key:a,type:"static",props:{}});if(m().default.checkGate({gateName:"callout_show_dynamic_messages"})){const t=await async function(e){const t=await c().callApi({eventName:"getUnreadInAppMessagesForUser",environment:e,data:{}});if("failed"===t.type)return[];return t.data.messages}(e);for(const e of t)p().A.setConfig(e.config.key,{message:e}),u.push(e.config)}const d=[];for(const a of u){g().rG(e,a).success&&d.push(a.key)}const _=m().default.getConfigKey("callout_config","callout_blocklist");v().wo(e,{eligible_callouts:d,required_arg_timeout:null,required_args_run_duration:s,eligibility_timeouts:r??[],blocklist:_}),function(){Q=!0;for(const e of z)e()}()}function K(e){const t=e.filter((e=>"Modal"===(0,i().t9)(e))),n=e.filter((e=>"Modal"!==(0,i().t9)(e)));return t.sort(((e,t)=>(0,i().wV)(t)-(0,i().wV)(e))),n.sort(((e,t)=>(0,i().sp)(e)-(0,i().sp)(t))),[...t,...n]}let Q=!1;const z=[]},907917:(e,t,n)=>{n.d(t,{w:()=>c,x:()=>s});var r=()=>n(762433),a=()=>n(979340),i=()=>n(240865),o=()=>n(324561);function s(e){const{billingData:t,memberCount:n}=e,i=(0,r().AI)(t),o=(0,a().dL)(i),s=(0,a().sP)(i);return o&&n<5?"invite":o?"upgrade":n<5&&!s?"invite":"none"}function c(e){return s({billingData:(0,o().f_)({spaceId:e}),memberCount:(0,i().V)()??1})}}}]);