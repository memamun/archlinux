"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[10596],{34373:(e,t,o)=>{o.d(t,{k:()=>a});o(296540);var s=o(474848);const a=(0,o(340498).wt)("collectionBoard",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M2.39697 14.4634H13.5964C15.0532 14.4634 15.8311 13.6921 15.8311 12.2485V4.24609C15.8311 2.80249 15.0532 2.03125 13.5964 2.03125H2.39697C0.940186 2.03125 0.162354 2.7959 0.162354 4.24609V12.2485C0.162354 13.6987 0.940186 14.4634 2.39697 14.4634ZM2.52222 12.9934C1.94214 12.9934 1.63232 12.7034 1.63232 12.0969V4.39771C1.63232 3.79126 1.94214 3.50122 2.52222 3.50122H4.92822V12.9934H2.52222ZM6.34546 12.9934V3.50122H9.64795V12.9934H6.34546ZM13.4712 3.50122C14.0447 3.50122 14.3611 3.79126 14.3611 4.39771V12.0969C14.3611 12.7034 14.0447 12.9934 13.4712 12.9934H11.0652V3.50122H13.4712Z"})})},69437:(e,t,o)=>{o.d(t,{A:()=>v});o(898992),o(672577),o(581454);var s=o(296540),a=()=>o(831310),n=()=>o(668725),r=()=>o(100622),i=()=>o(534177),l=()=>o(722872),c=()=>o(493823),d=()=>o(760217),p=()=>o(406699),m=()=>o(387881),u=()=>o(419357),g=()=>o(928600),h=()=>o(939740),f=()=>o(89924),y=()=>o(125565),x=()=>o(21140),A=o(474848);function v(e){const{onSelectOption:t,options:o,currentOption:v,placeHolder:I,buttonStyles:S,initialFocus:j,menuProps:w,iconOnly:k,inputProps:b,iconStyles:T,searchThreshold:C}=e,[M,F]=(0,s.useState)(""),P=o.find((e=>{let{key:t}=e;return t===v}));function B(e){return(0,A.jsxs)(x().Ye,{alignItems:"center",style:{gap:4},children:[e.icon,(0,A.jsx)(y().A,{children:e.name})]})}return(0,A.jsx)(p().Ay,{popupType:p().z7.Popup,placementToOrigin:p().sx.Bottom,renderOrigin:e=>(0,A.jsxs)(c().p,{...e,style:{color:v?void 0:r().XA.light.gray[300],...S},children:[(0,A.jsx)(y().A,{style:{textOverflow:"ellipsis",fontSize:"14px",font:"SF Pro Text",color:v?void 0:"#ACABA9",lineHeight:"19.6px"},children:(k?null==P?void 0:P.icon:P&&B(P))??I}),(0,n().b)(T)]}),render:e=>{const s=(0,A.jsx)(u().Ay,{style:{width:"100%",paddingTop:8,paddingBottom:2},onChange:e=>F(e.target.value),value:M,...b}),n={menuType:l().gu.Popup,width:376,left:50,header:(0,i().O9)(C)&&o.length>C?s:null,...w},r=o.map((o=>{let{key:s,name:n,icon:r,searchTerm:i}=o;return{key:s,keywords:i??[],action:()=>{t(s),e.close()},render:e=>(0,A.jsx)(d().A,{...e,title:B({name:n,icon:r}),shouldWrapCaption:!0,right:v===s?(0,A.jsx)("div",{style:{width:14},children:(0,a().o)()}):void 0})}}));return(0,A.jsx)(g().A,{...n,children:(0,A.jsx)(m().j,{type:h().Oh.Vertical,filterQuery:M,sections:[{key:"asanaImport.dropdown.menuList",render:e=>(0,A.jsx)(f().A,{...e}),items:r}],initialFocus:j,style:{position:"relative",alignItems:"flex-end"}})})}})}},113507:(e,t,o)=>{o.d(t,{A:()=>s});const s=new(o(463830).A)},124858:(e,t,o)=>{o.d(t,{E:()=>a});o(296540);var s=o(474848);const a=(0,o(340498).wt)("folder",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M2.4082 14.3672H13.7627C15.0684 14.3672 15.8271 13.6084 15.8271 12.1455V5.11816C15.8271 3.65527 15.0615 2.89648 13.585 2.89648H7.22754C6.73535 2.89648 6.44824 2.78027 6.07227 2.47266L5.67578 2.1582C5.19727 1.76172 4.8418 1.63184 4.13086 1.63184H2.19629C0.917969 1.63184 0.166016 2.37695 0.166016 3.8125V12.1455C0.166016 13.6084 0.931641 14.3672 2.4082 14.3672ZM1.50586 3.92871C1.50586 3.2998 1.84766 2.97168 2.46289 2.97168H3.77539C4.26074 2.97168 4.54102 3.08105 4.92383 3.39551L5.32031 3.7168C5.79199 4.10645 6.16113 4.23633 6.87207 4.23633H13.5098C14.1387 4.23633 14.4873 4.56445 14.4873 5.23438V5.63086H1.50586V3.92871ZM2.49023 13.0273C1.85449 13.0273 1.50586 12.6992 1.50586 12.0361V6.81348H14.4873V12.0361C14.4873 12.6992 14.1387 13.0273 13.5098 13.0273H2.49023Z"})})},136480:(e,t,o)=>{o.d(t,{s:()=>Ce,A:()=>Me});o(898992),o(823215),o(672577),o(581454),o(737550);var s=o(296540),a=()=>o(484714),n=()=>o(56366),r=()=>o(401497),i=()=>o(584262),l=()=>o(148307),c=()=>o(921940),d=()=>o(183210),p=()=>o(677195),m=()=>o(179034),u=()=>o(959013),g=()=>o(534177),h=()=>o(284371),f=()=>o(696977),y=()=>o(435009),x=()=>o(780054),A=()=>o(836251),v=()=>o(962730),I=()=>o(351360),S=()=>o(92513),j=()=>o(404141),w=()=>o(412532),k=()=>o(452951),b=()=>o(162402),T=()=>o(449552),C=()=>o(100622),M=()=>o(898808),F=()=>o(285790),P=()=>o(125565),B=()=>o(21140),R=()=>o(317182),L=o(474848);const D=function(){const e=(0,n().O$)(S().A);return e.result?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(P().A,{isMultiline:!0,children:(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.confirm.subtitle",defaultMessage:"The following data has been successfully imported."})}),(0,L.jsx)("div",{style:{marginTop:32},children:e.result.map((e=>(0,L.jsx)(W,{importStatus:e},e.asanaTeamId)))})]}):(0,L.jsx)(L.Fragment,{})};function W(e){let{importStatus:t}=e;const o=(0,u().tz)(),a=(0,r().DP)(),[i,l]=(0,s.useState)(!1),c=(0,n().K8)((()=>I().default.state.currentSpaceStore),[]),d=(0,n().K8)((()=>S().A.state.teamsAndProjects),[]),p=(0,n().K8)((()=>I().default.state.currentSpaceViewStore),[]),m=(0,n().K8)((()=>{if(!p)return;const e=p.getTeamsStores().map((e=>({id:e.id,name:e.getName(),icon:(0,L.jsx)(M().x,{disabled:!0,store:e})})));return c?(e||[]).concat({id:p.id,name:"Private",icon:(0,L.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"0.25em",backgroundColor:C().XA.light.gray[75]},children:(0,T().g)({color:a.mediumIconColor,width:12.5,height:12.5})})}):e}),[p,c,a]),{notionTeamspaceName:g,notionTeamspaceIcon:h}=(0,s.useMemo)((()=>{const e=null==m?void 0:m.find((e=>e.id===t.notionTeamSpaceId));return e?{notionTeamspaceName:e.name,notionTeamspaceIcon:e.icon}:{notionTeamspaceName:void 0,notionTeamspaceIcon:void 0}}),[m,t]),f=(0,s.useMemo)((()=>{const e=d.find((e=>e.gid===t.asanaTeamId));return null==e?void 0:e.name}),[d,t]);return(0,L.jsxs)(B().Ye,{style:{marginTop:16},children:[(0,L.jsx)(F().A,{ariaLabel:o.formatMessage({id:"asanaImport.importsTab.collapseToggle",defaultMessage:"Collapse toggle"}),icon:w().l,onClick:()=>l((e=>!e)),style:{transform:i?"rotate(90deg)":"rotate(180deg)",marginRight:8,marginTop:4},iconStyle:{width:10,height:10}}),(0,L.jsx)(R().A,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,L.jsx)(B().Ye,{alignItems:"center",gap:2,children:(0,L.jsx)(P().A,{isSmall:!0,style:{width:280,textOverflow:"ellipsis"},children:f})}),style:{width:300}},{key:"importedInto",header:(0,L.jsxs)(B().Ye,{gap:4,children:[(0,L.jsxs)(B().Ye,{style:{alignItems:"center",gap:4},children:[(0,L.jsx)(P().A,{isSmall:!0,children:(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.selectData.importedInto",defaultMessage:"Imported into"})}),(0,k().Z)({width:12})]}),(0,L.jsxs)(B().Ye,{style:{alignItems:"center",gap:4},children:[h,g]})]}),style:{width:300}}],rows:function(e){let{collapsed:o}=e;return o?[]:t.numberOfTasksPerProject.map((e=>({key:e.projectId,columns:[(0,L.jsxs)(B().Ye,{gap:8,alignItems:"center",children:[(0,b().q)({width:12,color:C().XA.dark.green[600]}),(0,L.jsx)(P().A,{isMultiline:!0,style:{wordWrap:"break-word",width:300},children:e.name})]},e.projectId),(0,L.jsxs)(P().A,{isSmall:!0,children:[e.numberOfTasks,(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.selectData.tasksHelperText",defaultMessage:" tasks"})]},`${e.projectId}-tasks-count`)]})))}({collapsed:i})})]})}o(803949);var O=()=>o(112710),V=()=>o(365683),_=()=>o(719147);const z=function(){const e=(0,n().O$)(S().A);if(!e.result)return(0,L.jsx)(L.Fragment,{});const t=e.result;let o=0;return t.forEach((e=>{o+=e.numberOfProjects})),(0,L.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:2},children:[(0,L.jsx)(P().A,{isMultiline:!0,style:{font:"SF Pro",fontWeight:h().Wy.semibold,fontSize:h().J.UIRegular.mobile,paddingTop:8},children:(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.importComplete.subtitle",defaultMessage:"Imported {projectCount} projects into Notion",values:{projectCount:o}})}),(0,L.jsx)("div",{style:{marginTop:20},children:e.result.map((e=>(0,L.jsx)(N,{importStatus:e},e.asanaTeamId)))})]})};function N(e){let{importStatus:t}=e;const o=(0,r().DP)(),a=(0,n().K8)((()=>I().default.state.currentSpaceStore),[]),l=(0,n().K8)((()=>S().A.state.teamsAndProjects),[]),p=(0,n().K8)((()=>I().default.state.currentSpaceViewStore),[]),g=(0,n().K8)((()=>{if(!p)return;const e=p.getTeamsStores().map((e=>({id:e.id,name:e.getName(),icon:(0,L.jsx)(M().x,{disabled:!0,store:e})})));return a?(e||[]).concat({id:p.id,name:"Private",icon:(0,L.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"0.25em",backgroundColor:C().XA.light.gray[75]},children:(0,T().g)({color:o.mediumIconColor,width:12.5,height:12.5})})}):e}),[p,a,o]),{notionTeamspaceName:f,notionTeamspaceIcon:y}=(0,s.useMemo)((()=>{const e=null==g?void 0:g.find((e=>e.id===t.notionTeamSpaceId));return e?{notionTeamspaceName:e.name,notionTeamspaceIcon:e.icon}:{notionTeamspaceName:void 0,notionTeamspaceIcon:void 0}}),[g,t]),A=(0,s.useMemo)((()=>{const e=l.find((e=>e.gid===t.asanaTeamId));return null==e?void 0:e.name}),[l,t]);return(0,L.jsx)(B().Ye,{style:{marginTop:16},children:(0,L.jsx)(R().A,{tableStyle:{borderTop:0,gap:10},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,L.jsx)(B().Ye,{children:(0,L.jsx)(B().Ye,{alignItems:"center",gap:2,children:(0,L.jsx)(P().A,{isSmall:!0,style:{width:280,textOverflow:"ellipsis",font:"SF Pro",fontWeight:h().Wy.regular,fontSize:h().J.UIRegular.desktop},children:(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.importComplete.importFrom",defaultMessage:"From {asanaTeamName} in Asana",values:{asanaTeamName:A}})})})}),style:{width:300}},{key:"seperator",header:(0,L.jsx)(B().Ye,{style:{alignItems:"center",gap:4},children:(0,L.jsx)(P().A,{isMultiline:!0,style:{fontWeight:h().Wy.regular,font:"SF Pro",fontSize:h().J.UIRegular.desktop,color:"rgba(172, 171, 169, 1)"},children:"→"})}),style:{width:13,height:18,paddingRight:20}},{key:"importedInto",header:(0,L.jsxs)(B().Ye,{style:{alignItems:"center",gap:4},children:[y,(0,L.jsx)(P().A,{style:{font:"SF Pro",fontWeight:h().Wy.medium,fontSize:h().J.UIRegular.desktop},children:f}),(0,L.jsx)(P().A,{style:{fontWeight:h().Wy.regular,fontSize:h().J.UIRegular.desktop,font:"SF Pro Text",color:"rgba(172, 171, 169, 1)"},children:"/"}),(0,L.jsx)(L.Fragment,{children:(0,O().a)({width:"16px",height:"16px",color:o.mediumIconColor})}),(0,L.jsx)(P().A,{style:{font:"SF Pro",fontWeight:h().Wy.medium,fontSize:h().J.UIRegular.desktop},children:(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.importComplete.projectLabel",defaultMessage:"Projects"})})]}),style:{width:300}}],rows:t.numberOfTasksPerProject.map((e=>({key:e.projectId,columns:[(0,L.jsxs)(B().Ye,{gap:8,alignItems:"start",flexDirection:"column",children:[(0,L.jsx)(P().A,{isMultiline:!0,style:{wordWrap:"break-word",width:300,fontWeight:h().Wy.medium,font:"SF Pro",fontSize:h().J.UIRegular.desktop},children:e.name}),(0,L.jsxs)(P().A,{isSmall:!0,children:[e.numberOfTasks,(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.importConfir,.tasksHelperText",defaultMessage:" tasks"})]},`${e.projectId}-tasks-count`)]},e.projectId),(0,L.jsx)(B().Ye,{},`${e.projectId}-seperator`),(0,L.jsx)(B().Ye,{children:(0,L.jsxs)("div",{children:[(0,L.jsxs)("div",{style:{display:"flex",gap:4,paddingBottom:6},children:[(0,O().a)({width:20,height:20,color:o.mediumIconColor}),(0,L.jsx)(_().A,{href:e.notionProjectId?(0,c().A)({pageId:e.notionProjectId,pageModel:(0,d().Rr)({table:m().ev,id:e.notionProjectId}),baseUrl:x().A.domainBaseUrl,pageVisitSource:i().y8.Import}):void 0,style:{wordWrap:"break-word",fontWeight:h().Wy.medium,font:"SF Pro",fontSize:h().J.UIRegular.desktop,textDecorationLine:"underline",textDecorationColor:"rgba(227, 226, 224, 1)"},disableHover:!0,children:e.name})]}),(0,L.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,V().H)({width:14,height:14,color:o.mediumIconColor}),(0,L.jsxs)(_().A,{href:e.notionProjectId?(0,c().A)({pageId:e.notionProjectId,pageModel:(0,d().Rr)({table:m().ev,id:e.notionProjectId}),baseUrl:x().A.domainBaseUrl,pageVisitSource:i().y8.Import}):void 0,style:{color:"rgba(120, 119, 116, 1)",font:"SF Pro",fontSize:h().J.UISmall.desktop,fontWeight:h().Wy.regular},disableUnderline:!0,disableHover:!0,children:[e.numberOfTasks,(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.importConfir,.tasksHelperText",defaultMessage:" tasks"})]},`${e.projectId}-tasks-count`)]})]})},`${e.projectId}-notionProjects`)]})))})})}o(944114),o(354520);var E=()=>o(831310),q=()=>o(668725),U=()=>o(464699),H=()=>o(722872),Y=()=>o(848237),$=()=>o(197190),K=()=>o(493823),G=()=>o(760217),J=()=>o(406699),X=()=>o(625830),Q=()=>o(331542),Z=()=>o(928600),ee=()=>o(939740),te=()=>o(89924),oe=()=>o(709438);const se=function(){const e=(0,a().v3)(),t=(0,u().tz)(),o=(0,n().K8)((()=>S().A.getState()),[]),{isLoadingProjects:r,workspaces:i,selectedWorkspace:l,teamsAndProjects:c}=o;return(0,s.useEffect)((()=>{l&&f().D5({selectedWorkspace:l,environment:e}).catch((()=>{}))}),[l,e]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(P().A,{isSmall:!0,style:{paddingTop:4,paddingBottom:4},children:(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.selectData.workspaceChoiceHelperText",defaultMessage:"Only one workspace can be imported at a time."})}),(0,L.jsx)(ne,{onSelectOption:e=>{S().A.setState({...o,selectedProjectsAndTeamspaces:{},selectedWorkspace:e})},options:i.map((e=>({key:e.gid,label:e.name}))),currentOption:l,placeHolder:t.formatMessage({id:"asanaImporter.selectData.selectWorkspacePlaceholder",defaultMessage:"Select a workspace"})}),l?(0,L.jsx)(P().A,{style:{fontWeight:h().Wy.semibold,marginTop:18},children:(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.selectData.selectProjects",defaultMessage:"Select projects"})}):(0,L.jsx)(L.Fragment,{}),r?(0,L.jsxs)(B().Ye,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,L.jsx)(Q().A,{size:"sm"}),(0,L.jsx)(P().A,{isSmall:!0,style:{color:C().XA.light.gray[400]},children:(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.selectData.loadingProjectsHelperText",defaultMessage:"Loading projects in the workspace..."})})]}):c.filter((e=>0!==e.projects.length)).map((e=>(0,L.jsx)(ae,{team:e,selectedWorkspace:l},`${e.gid}-table`)))]})};function ae(e){var t;let{team:o,selectedWorkspace:i}=e;const c=(0,a().v3)(),d=(0,u().tz)(),p=(0,r().DP)(),[m,g]=(0,s.useState)(!1),[y,x]=(0,s.useState)(!1),[A,v]=(0,s.useState)(),j=(0,n().K8)((()=>S().A.getState()),[]),{importCompletedTasks:b,selectedProjectsAndTeamspaces:D}=j,W=(0,n().K8)((()=>I().default.state.currentSpaceViewStore),[]),O=(0,n().K8)((()=>{const e=null==W?void 0:W.getTeamsStores();return null==e?void 0:e.map((e=>({id:e.id,name:e.getName(),icon:(0,L.jsx)(M().x,{disabled:!0,store:e})})))}),[W]);(0,s.useEffect)((()=>{if(!O||!W)return;if(!D[o.gid]){v("private"),f().$8({teamId:o.gid,spaceId:null==W?void 0:W.id});for(const s of O){var e,t;if((null===(e=s.name)||void 0===e?void 0:e.toLowerCase())===(null===(t=o.name)||void 0===t?void 0:t.toLowerCase())){v(s.id),f().$8({teamId:o.gid,spaceId:s.id});break}}}}),[O,o,W,D]);const V=(0,s.useCallback)((e=>{f().$8({teamId:o.gid,spaceId:e}),v(e)}),[o.gid]),_=(0,s.useCallback)((e=>{if("create"===e)return void Y().vn("asana_importer",{onClose:V});let t;if("private"===e){if(null==W||!W.id)return;t=W.id}else t=e;f().$8({teamId:o.gid,spaceId:t}),v(e)}),[null==W?void 0:W.id,o.gid,V]),z=[{key:"private",searchTerm:"private",label:(0,L.jsxs)(B().Ye,{alignItems:"center",style:{gap:8},children:[(0,L.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:16,height:16,borderRadius:"0.25em",backgroundColor:C().XA.light.gray[75]},children:(0,T().g)({color:p.mediumIconColor,width:12.5,height:12.5})}),(0,L.jsx)(P().A,{style:{fontWeight:h().Wy.regular},children:(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.selectData.privateSpaceTitle",defaultMessage:"Private"})})]})}];return O&&z.push(...O.map((e=>({key:e.id,searchTerm:e.name,label:(0,L.jsxs)(B().Ye,{alignItems:"center",style:{gap:8},children:[e.icon,e.name]})})))),z.push({key:"create",searchTerm:"New teamspace",label:(0,L.jsxs)(B().Ye,{alignItems:"center",style:{gap:4},children:[(0,U().b)({color:p.mediumIconColor,width:16,height:16}),(0,L.jsx)(P().A,{children:(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.selectData.newTeamspace",defaultMessage:"New teamspace"})})]})}),(0,L.jsxs)(B().Ye,{style:{marginLeft:-18},children:[(0,L.jsx)(F().A,{ariaLabel:d.formatMessage({id:"asanaImport.importsTab.collapseToggle",defaultMessage:"Collapse toggle"}),icon:w().l,onClick:()=>g((e=>!e)),style:{transform:m?"rotate(90deg)":"rotate(180deg)",marginRight:8,marginTop:24,width:10,height:10},hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},iconStyle:{width:12,height:12}}),(0,L.jsx)(R().A,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,L.jsxs)(B().Ye,{alignItems:"center",gap:2,children:[(0,L.jsx)(re,{onSelectOption:e=>{var t;S().A.setState({...j,selectedProjectsAndTeamspaces:{...D,[o.gid]:{notionTeamspaceId:null===(t=D[o.gid])||void 0===t?void 0:t.notionTeamspaceId,projects:e}}})},options:[{key:"in_complete",label:"Exclude completed projects"},{key:"all",label:"Select all projects"}],currentOption:(e=>{const t=null===(e=D[o.gid])||void 0===e?void 0:e.projects;return"string"==typeof t?t:null!=t&&t.length?"specific":void 0})()}),(0,L.jsx)(P().A,{style:{width:280,textOverflow:"ellipsis"},children:o.name})]}),style:{width:300}},{key:"importInto",header:(0,L.jsxs)(B().Ye,{style:{alignItems:"center"},children:[(0,L.jsx)("div",{children:(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.selectData.importInto",defaultMessage:"Import into"})}),(0,L.jsx)("div",{style:{marginRight:16,marginLeft:8},children:(0,k().Z)({width:12})}),(0,L.jsxs)(B().Ye,{style:{alignItems:"center",gap:8},children:[(0,L.jsx)("img",{src:l().A.emails.notionLogoBlackSmallPng,height:18}),(0,L.jsx)(ne,{options:z,onSelectOption:_,currentOption:null===(t=z.find((e=>e.key===A)))||void 0===t?void 0:t.key,narrow:!0,allowSearch:!0,placeHolder:d.formatMessage({id:"asanaImport.importsTab.selectData.selectATeamspace",defaultMessage:"Select a teamspace"})})]})]}),style:{width:"50%"}}],rows:function(e){let{collapsed:t}=e;if(t)return[];const s=o.projects.map((e=>({key:e.gid,columns:[(0,L.jsxs)(B().Ye,{alignItems:"center",gap:6,style:{marginLeft:20},children:[(0,L.jsx)(X().A,{style:{marginRight:2},onClick:()=>{const t={...D[o.gid]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:s,projects:a}=t;let n;n="all"===a||"in_complete"===a?[]:a.includes(e.gid)?a.filter((t=>t!==e.gid)):a.concat(e.gid),S().A.setState({...j,selectedProjectsAndTeamspaces:{...D,[o.gid]:{notionTeamspaceId:s,projects:n}}})},checked:(()=>{const t={...D[o.gid]||{projects:[],notionTeamspaceId:void 0}};return"all"===t.projects||"in_complete"===t.projects&&!1===e.completed||t.projects.includes(e.gid)})(),size:14,checkSize:8}),(0,L.jsx)(oe().m,{color:e.color,size:6}),(0,L.jsx)("div",{style:{width:240,wordWrap:"break-word"},children:e.completed?(0,L.jsxs)(P().A,{isMultiline:!0,style:{color:p.lightTextColor},children:[e.name,(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.selectData.completedHelperText",defaultMessage:" (Completed)"})]}):(0,L.jsx)(P().A,{isMultiline:!0,children:e.name})})]},`${e.gid}-container`),(0,L.jsxs)(P().A,{isSmall:!0,children:[b?e.task_counts.num_tasks:e.task_counts.num_incomplete_tasks,(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.selectData.tasksHelperText",defaultMessage:" tasks"})]},`${o.gid}-tasks-count`)]})));return o.nextPage&&s.push({key:"loadMore",columns:[(0,L.jsx)($().A,{disabled:y,style:{marginLeft:20,color:C().XA.light.gray[400]},hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},onClick:async()=>{i&&(x(!0),await f().Oh({team:o,environment:c}),x(!1))},children:y?(0,L.jsxs)(B().Ye,{alignItems:"center",gap:8,children:[(0,L.jsx)(Q().A,{size:"sm"}),(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.selectData.loadingMoreProjects",defaultMessage:"Loading more projects..."})]}):(0,L.jsx)(u().sA,{id:"asanaImport.importsTab.selectData.loadMoreProjects",defaultMessage:"Load more projects..."})},`${o.gid}-loadmore`)]}),s}({collapsed:m})})]})}function ne(e){var t;const{onSelectOption:o,options:a,currentOption:n,placeHolder:i,narrow:l,allowSearch:c}=e,d=(0,u().tz)(),[p,m]=(0,s.useState)(""),g=null===(t=a.find((e=>{let{key:t}=e;return t===n})))||void 0===t?void 0:t.label,f=(0,r().IS)((e=>({icon:{width:12,height:12,marginLeft:4,fill:e.lightIconColor}})),[]);return(0,L.jsx)(J().Ay,{popupType:J().z7.Popup,placementToOrigin:J().sx.Bottom,renderOrigin:e=>(0,L.jsxs)(K().p,{...e,style:{paddingTop:l?2:8,paddingBottom:l?2:8,paddingLeft:8,paddingRight:8,opacity:1,width:250,border:`1px solid ${C().XA.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8,background:n?void 0:C().XA.light.gray[75],color:n?void 0:C().XA.light.gray[300]},disabled:!1,children:[(0,L.jsx)(P().A,{style:{textOverflow:"ellipsis"},children:g||i}),(0,q().b)(f.icon)]}),render:e=>{const t={menuType:H().gu.Popup,width:250,left:50},s=[{key:"asanaImport.dropdown.menuList",render:e=>(0,L.jsx)(te().A,{...e}),items:(p.trim()?a.filter((e=>{var t;return null===(t=e.searchTerm)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase())})):a).map((t=>{let{key:s,label:a}=t;return{key:s,action:()=>{o(s),e.close()},render:e=>(0,L.jsx)(G().A,{...e,title:a,shouldWrapCaption:!0,right:g===a?(0,L.jsx)("div",{style:{width:14},children:(0,E().o)()}):void 0})}}))}];return(0,L.jsxs)(L.Fragment,{children:[c?(0,L.jsx)("input",{style:{width:"100%",borderRadius:0,backgroundColor:C().XA.light.gray[200],paddingTop:2,paddingBottom:2,paddingLeft:8,paddingRight:8,opacity:1,border:`1px solid ${C().XA.light.gray[100]}`,justifyContent:"space-between",background:C().XA.light.gray[75],fontSize:h().J.UIRegular.desktop,textOverflow:"ellipses"},placeholder:d.formatMessage({id:"asanaImport.importsTab.selectData.searchTeamspacePlaceholder",defaultMessage:"Search for a teamspace"}),onChange:e=>m(e.target.value),value:p}):(0,L.jsx)(L.Fragment,{}),(0,L.jsx)(Z().A,{...t,children:(0,L.jsx)(ee().Ay,{type:ee().Oh.Vertical,sections:s,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})]})}})}function re(e){var t;const{onSelectOption:o,options:a,currentOption:n}=e,r=null===(t=a.find((e=>{let{key:t}=e;return t===n})))||void 0===t?void 0:t.label,i=(0,s.useMemo)((()=>void 0!==n&&"specific"!==n&&("all"===n||"partial")),[n]);return(0,L.jsx)(J().Ay,{popupType:J().z7.Popup,placementToOrigin:J().sx.Bottom,alignmentToOrigin:J().yP.Start,renderOrigin:e=>(0,L.jsx)(K().p,{...e,style:{padding:0,margin:0,marginRight:4,height:14},hoveredStyle:{},children:(0,L.jsx)(X().A,{checked:i,disabled:!0,size:14,checkSize:8})}),render:e=>{const t={menuType:H().gu.Popup,width:250,left:50},s=[{key:"asanaImport.checkboxDropdown.menuList",render:e=>(0,L.jsx)(te().A,{...e}),items:a.map((t=>{let{key:s,label:a}=t;return{key:s,action:()=>{o(s),e.close()},render:e=>(0,L.jsx)(G().A,{...e,title:a,shouldWrapCaption:!0,right:r===a?(0,L.jsx)("div",{style:{width:14},children:(0,E().o)()}):void 0})}}))}];return(0,L.jsx)(Z().A,{...t,children:(0,L.jsx)(ee().Ay,{type:ee().Oh.Vertical,sections:s,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})}})}var ie=()=>o(864943),le=()=>o(204063),ce=()=>o(946548),de=()=>o(859428),pe=()=>o(690197),me=()=>o(484392),ue=()=>o(743176),ge=()=>o(509657),he=()=>o(936996);const fe=(0,u().YK)({selectProperties:{id:"asanaImport.selectProperties.subtitleForSelectPropertiesTab",defaultMessage:"By default, all Asana task properties will be imported. You can customize this for each teamspace below"},keepAllPropertiesDescription:{id:"asanaImport.selectProperties.keepAllPropertiesDescription",defaultMessage:"Add {count} properties from Asana into your Notion tasks"},customPropertiesLabel:{id:"asanaImport.selectProperties.customPropertiesLabel",defaultMessage:"Custom Properties"},defaultPropertiesLabel:{id:"asanaImport.selectProperties.defaultPropertiesLabel",defaultMessage:"Default Properties"},privateSpaceLabel:{id:"asanaImport.importsTab.chooseWorkspace.privateSpaceTitle",defaultMessage:"Private"}});function ye(e){let{propertiesLoadStatus:t,currentTeamSpaceId:o}=e;const a=(0,u().tz)(),{selectionMode:r,properties:i}=(0,n().K8)((()=>{if("resolved"!==t||!o)return{selectionMode:"all",properties:[]};const e=S().A.state.useSectionAsStatus,{selectionMode:s,properties:a}=S().A.state.selectedTeamspacesAndProperties[o],n=a.slice(),r=n.find((e=>"Completed?"===e.asanaFieldName)),i=n.find((e=>"Section"===e.asanaFieldName));return r&&i&&(e?(r.notionFieldType="checkbox",i.notionFieldType="status"):(r.notionFieldType="status",i.notionFieldType="select")),{selectionMode:s,properties:n}}),[o,t]),l=(0,s.useCallback)((e=>{const t=S().A.state;S().A.setState({...t,selectedTeamspacesAndProperties:{...t.selectedTeamspacesAndProperties,[o]:{...t.selectedTeamspacesAndProperties[o],properties:e}}})}),[o]),c=(0,s.useCallback)((e=>{S().A.setState({...S().A.state,selectedTeamspacesAndProperties:{...S().A.state.selectedTeamspacesAndProperties,[o]:{selectionMode:e,properties:i.map((t=>({...t,isSelected:t.isDefault||"all"===e})))}}})}),[o,i]),d=(0,s.useCallback)((e=>{const t=i.map((t=>t.asanaFieldName===e.asanaFieldName?{...t,isSelected:!t.isSelected}:t));l(t)}),[i,l]),p=(0,s.useCallback)((e=>{let t=!0,o=!0;const s=i.filter((t=>t.isDefault===("default"===e)));return s.length>0&&(s.forEach((e=>{e.isSelected?o=!1:t=!1})),!!t||!o&&"partial")}),[i]),m=(0,s.useCallback)((e=>{const t=!0===p(e),o=i.map((e=>({...e,isSelected:e.isDefault||!t})));l(o)}),[p,i,l]),[g,h]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{"resolved"===t&&0===(null==i?void 0:i.filter((e=>!e.isDefault)).length)&&h(!0)}),[t,i]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(B().Ye,{gap:8,style:{marginTop:10,width:"100%"},children:[(0,L.jsx)(ge().a,{name:"select-all-properties",selectType:"radio",label:"Select all properties",disabled:"pending"===t,value:"all",description:a.formatMessage(fe.keepAllPropertiesDescription,{count:Object.keys(i).length||"all"}),isSelected:"all"===r,style:{flexGrow:1,maxWidth:"50%"},onChange:()=>c("all")}),(0,L.jsx)(ge().a,{name:"customise-properties",selectType:"radio",disabled:"pending"===t,label:"Customize properties",value:"custom",description:"Choose which properties you want to keep",isSelected:"custom"===r,style:{flexGrow:1,maxWidth:"50%"},onChange:()=>c("custom")})]}),(0,L.jsx)("div",{style:{marginTop:8},children:(0,L.jsx)(he().A,{title:(0,L.jsx)(B().Ye,{gap:4,children:(0,L.jsx)(P().A,{children:(0,L.jsx)(u().sA,{...fe.defaultPropertiesLabel})})}),rows:i.filter((e=>e.isDefault)),loading:"pending"===t,getIdentifier:e=>e.asanaFieldName,onToggleGroup:()=>h((e=>!e)),collapsed:!g,onSelectGroup:()=>{},onSelectRow:()=>{},groupCheckedState:!0,rowCheckedState:e=>e.isSelected||!1,renderRow:e=>(0,L.jsx)(xe,{property:e}),rowsContainerStyles:{display:"grid",gap:6},disabled:!0,rowStyles:{marginTop:4,height:24}})}),(0,L.jsx)("div",{style:{marginTop:8},children:(null==i?void 0:i.filter((e=>!e.isDefault)).length)>0&&(0,L.jsx)(he().A,{title:(0,L.jsx)(B().Ye,{gap:4,children:(0,L.jsx)(P().A,{children:(0,L.jsx)(u().sA,{...fe.customPropertiesLabel})})}),rows:i.filter((e=>!e.isDefault)),loading:"pending"===t,disabled:"all"===r,getIdentifier:e=>e.asanaFieldName,onToggleGroup:()=>y((e=>!e)),collapsed:!f,onSelectGroup:()=>m("custom"),onSelectRow:e=>d(e),groupCheckedState:p("custom"),rowCheckedState:e=>e.isSelected||!1,renderRow:e=>(0,L.jsx)(xe,{property:e}),rowsContainerStyles:{display:"grid",gap:6},rowStyles:{marginTop:4,height:24}})})]})}function xe(e){let{property:t,style:o}=e;const a=Ae();return(0,L.jsxs)(s.Fragment,{children:[(0,L.jsx)(B().Ye,{gap:12,alignItems:"center",style:{marginLeft:2,width:"250px",padding:"6px 0px 6px 0px",...o},children:(0,L.jsx)("span",{style:a.propertyLabel,children:t.asanaFieldName})}),(0,L.jsxs)(B().Ye,{style:{padding:"6px 6px"},gap:8,alignItems:"center",children:[(0,L.jsx)(ve,{}),ue().Yp[t.notionFieldType]({width:14,fill:C().Ay.uiGray}),(0,L.jsx)("span",{style:a.propertyLabel,children:t.notionFieldType.split("_").map(me().A).join(" ")})]})]},t.asanaFieldName)}function Ae(){return(0,r().IS)((e=>({teamSpaceLabel:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4},header:{font:"SF Pro",fontWeight:h().Wy.regular,fontSize:h().J.UIRegular.desktop,lineHeight:"19.6px",whiteSpace:"normal",wordWrap:"break-word",paddingTop:4,paddingBottom:20},propertyLabel:{fontSize:h().J.UIRegular.desktop,color:e.regularTextColor,lineHeight:"19.6px"},lockedIcon:{color:e.mediumIconColor,width:12.5,height:12.5}})),[])}function ve(e){let{styles:t}=e;return(0,k().Z)({width:10,marginTop:2,marginRight:12,fill:C().Ay.uiLightGray,...t})}const Ie=function(){var e;const t=(0,a().v3)(),r=(0,u().tz)(),i=Ae(),[l,c]=(0,s.useState)(0),[{status:d}]=(0,o(187174).Yb)((async()=>f().kV(t,S().A.state.selectedProjectsAndTeamspaces)),[t]),p=(0,n().K8)((()=>{var e,t;const s=(0,o(496603).sb)(Object.values(S().A.state.selectedProjectsAndTeamspaces).filter((e=>e.projects.length>0)).map((e=>e.notionTeamspaceId)).filter(g().O9)),a=null===(e=I().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getTeamsStores(),n=null===(t=I().default.state.currentSpaceViewStore)||void 0===t?void 0:t.id;return s.map((e=>{const t=null==a?void 0:a.find((t=>t.id===e));return t||e!==n?{teamSpaceId:e,name:null==t?void 0:t.getName(),icon:(0,L.jsx)(M().x,{disabled:!0,store:t})}:{teamSpaceId:n,icon:(0,T().g)(i.lockedIcon),name:r.formatMessage(fe.privateSpaceLabel)}}))}),[i.lockedIcon,r]);return(0,L.jsxs)("div",{style:{paddingBottom:20},children:[(0,L.jsx)(P().A,{style:i.header,children:(0,L.jsx)(u().sA,{...fe.selectProperties})}),(0,L.jsx)(o(987017).Ay,{style:{padding:0},tabs:p.map((e=>(0,L.jsxs)(B().Ye,{alignItems:"center",gap:8,children:[e.icon,e.name]},e.name))),selectedIndex:l,onChange:c}),(0,L.jsx)(ye,{propertiesLoadStatus:d,currentTeamSpaceId:null===(e=p[l])||void 0===e?void 0:e.teamSpaceId})]})};const Se=(0,u().YK)({failed:{defaultMessage:"Some problems occurred while importing data from your Asana workspace.",id:"Asanaimport.importingData.failed.problemsOccured"},chooseWorkspaceTabLabel:{id:"asanaImport.asanaImportsTab.stepIndicator.chooseWorkspaceTab",defaultMessage:"Choose what to import"},importTabLabel:{id:"asanaImport.asanaImportsTab.stepIndicator.importTab",defaultMessage:"Import"},customizeTabLabel:{id:"asanaImport.asanaImportsTab.stepIndicator.selectPropertiesTab",defaultMessage:"Customize"},chooseWorkspaceNextButtonLabel:{id:"asanaImportsTab.chooseWorkspace.nextButtonText",defaultMessage:"Next"},chooseWorkspaceBackButtonLabel:{id:"asanaImport.chooseWorkspace.backButtonText",defaultMessage:"Back"},selectPropertiesBackButtonText:{id:"asanaImportsTab.selectProperties.backButtonText",defaultMessage:"Back"},startImportButtonText:{id:"asanaImportsTab.selectProperties.nextButtonText",defaultMessage:"Import"}});function je(e){switch(e){case"selectData":return(0,L.jsx)(P().A,{style:{paddingBottom:8,fontSize:18,fontWeight:h().Wy.semibold,width:"100%"},children:(0,L.jsx)(u().sA,{id:"asanaImport.asanaImportsTab.selectData.tabHeader",defaultMessage:"Select Asana workspace"})});case"chooseWorkspace":return(0,L.jsx)(P().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:(0,L.jsx)(u().sA,{id:"asanaImport.asanaImportsTab.chooseWorkspace.tabTitle",defaultMessage:"Choose Asana workspace"})});case"selectProperties":return(0,L.jsx)(P().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:(0,L.jsx)(u().sA,{id:"asanaImport.asanaImportsTab.selectProperties.tabTitle",defaultMessage:"Select properties"})});default:return(0,L.jsx)(L.Fragment,{})}}function we(){let{useV2Styles:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{useV2Styles:!1};return(0,r().IS)((e=>({stepIndicatorLabel:{font:"SF Pro",fontWeight:h().Wy.medium,fontSize:h().J.UIRegular.desktop},stepIndicatorContainer:{height:32,borderRadius:6,padding:"6px"},verificationCheck:{width:14,height:14,padding:"0.5px, 0px, 0px, 0px",color:e.lightIconColor},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor},helpCenterButtonStytles:{display:"flex",alignItems:"baseline",justifyContent:"center",alignContent:"center",fontSize:h().J.UIRegular.desktop,padding:"6px, 0px, 0px, 0px",borderRadius:6,color:e.mediumTextColor,marginTop:2,width:298,height:28,gap:"4px",lineHeight:"18px"},externalLinkIcon:{width:"16px",height:"16px",padding:"0.5px, 0px, 0px, 0px",gap:"8px"},tabNotStarted:{color:e.lightTextColor},tabInProgress:{background:e.buttonHoveredBackground,color:e.regularTextColor},tabDone:{color:e.mediumTextColor}})),[])}const ke=[["chooseWorkspace",Se.chooseWorkspaceTabLabel],["selectProperties",Se.customizeTabLabel],["importingData",Se.importTabLabel],["importComplete",null]];function be(e){let{tab:t}=e;const o=we(),a=(0,s.useCallback)((e=>{const o=ke.findIndex((e=>{let[o,s]=e;return o===t})),s=ke.findIndex((t=>{let[o,s]=t;return o===e}));return(0,g().O9)(o)?s<o?"done":s===o?"in-progress":"not-started":"not-started"}),[t]),n=(0,s.useCallback)((e=>{switch(e){case"done":return o.tabDone;case"in-progress":return o.tabInProgress;default:return o.tabNotStarted}}),[o]);return(0,L.jsx)(B().Ye,{gap:12,alignContent:"center",alignItems:"center",style:{marginTop:10,marginBottom:10},children:ke.map((e=>{let[t,s]=e;const r=a(t);return s?(0,L.jsxs)(B().Ye,{alignContent:"center",alignItems:"center",justifyContent:"center",style:{...o.stepIndicatorContainer,...n(r)},gap:8,children:["done"===r&&(0,p().R)(o.verificationCheck),(0,L.jsx)(P().A,{style:{...o.stepIndicatorLabel},children:(0,L.jsx)(u().sA,{...s})})]},t):null}))})}function Te(){return(0,L.jsx)(pe().A,{buttonStyle:{height:28,paddingLeft:4},title:(0,L.jsx)(u().sA,{id:"asanaImportsTab.confirm.helpCenter",defaultMessage:"Learn more about importing from Asana"}),href:(0,A().xS)("guides.importAsana"),analyticsFrom:"import",style:{marginLeft:-4}})}function Ce(e){let{left:t,next:o,back:s,children:a}=e;return(0,L.jsxs)(B().Ye,{justifyContent:"space-between",alignItems:"center",children:[t,(0,L.jsxs)(B().Ye,{alignItems:"center",gap:12,children:[a,(0,L.jsxs)("div",{style:{gap:2},children:[(0,L.jsx)(de().A,{placement:v().W.Top,alignment:v().C.End,render:e=>(0,L.jsx)(ie().A,{size:"lg",style:{border:0},disabled:s.disabled,onClick:s.onClick,...e,children:s.message}),disableTooltip:!s.renderTooltip,renderTooltip:s.renderTooltip||(()=>(0,L.jsx)(L.Fragment,{}))}),(0,L.jsx)(de().A,{placement:v().W.Top,alignment:v().C.End,render:e=>(0,L.jsx)(le().A,{style:{marginLeft:16},disabled:o.disabled,onClick:o.onClick,...e,children:o.message}),disableTooltip:!o.renderTooltip,renderTooltip:o.renderTooltip||(()=>(0,L.jsx)(L.Fragment,{}))})]})]})]})}const Me=function(e){let{tab:t,fetchActiveImportTasks:r}=e;const p=o(972435).A.getIntl(),g=(0,a().v3)(),h=(0,n().K8)((()=>I().default.state.currentSpaceStore),[]),A=(0,n().K8)((()=>I().default.state.currentSpaceViewStore),[]),v=(0,n().K8)((()=>o(988499).A.state.teams),[]),w=(0,n().O$)(S().A),k=(0,n().O$)(o(522094).A).flowId||o(206267).JW(),{importCompletedTasks:b,useSectionAsStatus:T,loggerPageId:C,selectedProjectsAndTeamspaces:M,selectedWorkspace:F,templateCreationInProgress:R,result:W,workspaces:O}=w,V=(0,s.useCallback)((e=>{switch(e){case"selectProperties":return!0;case"chooseWorkspace":const e=Object.values(M);return e.length&&!e.every((e=>0===e.projects.length&&void 0===e.notionTeamspaceId))&&!e.some((e=>0!==e.projects.length&&!e.notionTeamspaceId))&&!e.some((e=>e.notionTeamspaceId&&0===e.projects.length));case"selectData":return Object.values(M).some((e=>0!==e.projects.length));default:return!1}}),[M]),_=we();let N=t;return"selectData"===t?N="chooseWorkspace":"confirm"===t&&(N="importComplete"),(0,L.jsxs)(o(843878).Ay,{controlRow:(e=>"selectData"===e?(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,L.jsx)(ie().A,{size:"lg",style:{border:0},disabled:!O.length,onClick:()=>{r(),S().A.resetImport()},children:(0,L.jsx)(u().sA,{id:"asanaImport.selectData.backButtonText",defaultMessage:"Back"})}),(0,L.jsxs)(B().Ye,{alignItems:"center",gap:8,children:[F&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(ce().A,{on:b,onClick:()=>S().A.setState({...w,importCompletedTasks:!b})}),(0,L.jsx)(P().A,{children:(0,L.jsx)(u().sA,{id:"asanaImportsTab.selectData.importCompletedTasks",defaultMessage:"Import completed tasks"})})]}),(0,L.jsx)("div",{style:{gap:2},children:(0,L.jsx)(le().A,{style:{marginLeft:16},disabled:!V(e),onClick:()=>{h&&A&&f().Xn({environment:g,currentSpaceViewStore:A,spaceStore:h,teamsStores:v,flowId:k}).catch((()=>{}))},children:R?(0,L.jsxs)(B().Ye,{alignItems:"center",gap:2,children:[(0,L.jsx)(Q().A,{onDarkBackground:!0}),(0,L.jsx)(u().sA,{id:"asanaImportsTab.selectData.creatingTemplates",defaultMessage:"Creating templates"})]}):(0,L.jsx)(u().sA,{id:"asanaImportsTab.selectData.nextButtonText",defaultMessage:"Import"})})})]})]}):"chooseWorkspace"===e?(0,L.jsx)(Ce,{left:(0,L.jsx)(Te,{}),next:{disabled:!V(e),onClick:f().uA,message:p.formatMessage(Se.chooseWorkspaceNextButtonLabel),renderTooltip:V(e)?void 0:()=>(0,L.jsx)(u().sA,{id:"asanaImportsTab.selectData.ImportConfirmationTooltip",defaultMessage:"Please select projects and a teamspace to import into"})},back:{disabled:!1,onClick:()=>{r(),S().A.resetImport()},message:p.formatMessage(Se.chooseWorkspaceBackButtonLabel)},children:F&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(ce().A,{on:b,onClick:()=>S().A.setState({...w,importCompletedTasks:!b})}),(0,L.jsx)(P().A,{children:(0,L.jsx)(u().sA,{id:"asanaImportsTab.chooseWorkspace.chooseImportCompletedTasks",defaultMessage:"Import completed tasks"})})]})}):"selectProperties"===e?(0,L.jsx)(Ce,{left:(0,L.jsx)(Te,{}),next:{disabled:!V(e),onClick:()=>{h&&A&&f().Xn({environment:g,currentSpaceViewStore:A,navigateBeforeTemplateCreation:!0,spaceStore:h,teamsStores:v,flowId:k}).catch((()=>{}))},message:p.formatMessage(Se.startImportButtonText)},back:{disabled:!1,onClick:()=>{S().A.setState({...w,currentTab:"chooseWorkspace"})},message:p.formatMessage(Se.selectPropertiesBackButtonText)},children:(0,L.jsx)(de().A,{textWrap:!0,renderTooltip:e=>(0,L.jsx)(u().sA,{...e,id:"asanaImportsTab.selectProperties.selectPropertiesTooltip",defaultMessage:"Asana completed field is imported as status in Notion. Switch to importing sections as status and completed as checkboxes.",description:"Tooltip explaining the switcher to map completion to status."}),render:e=>(0,L.jsxs)("div",{...e,style:{display:"flex",gap:8},children:[(0,L.jsx)(ce().A,{on:T,onClick:()=>S().A.setState({...w,useSectionAsStatus:!T})}),(0,L.jsx)(P().A,{children:(0,L.jsx)(u().sA,{id:"asanaImportsTab.selectProperties.selectPropertiesStatusMapping",defaultMessage:"Import Section as Status"})})]})})}):"importingData"===e?(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,L.jsx)(Te,{}),(0,L.jsx)(ie().A,{size:"lg",disabled:!O.length||R,onClick:()=>{r(),S().A.resetImport()},children:(0,L.jsx)(u().sA,{id:"asanaImportsTab.importingData.closeButtonText",defaultMessage:"Close"})})]}):"confirm"===e?(0,L.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,L.jsx)(le().A,{onClick:()=>{C&&y().oo({url:(0,c().A)({pageId:C,pageModel:(0,d().Rr)({table:m().ev,id:C}),baseUrl:x().A.domainBaseUrl,pageVisitSource:i().y8.Import}),environment:g}),S().A.resetImport(),j().A.reset()},children:(0,L.jsx)(u().sA,{id:"asanaImportsTab.confirm.doneText",defaultMessage:"Done"})})}):"failure"===e?(0,L.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,L.jsx)(ie().A,{size:"lg",disabled:!O.length,onClick:()=>{r(),S().A.resetImport()},children:(0,L.jsx)(u().sA,{id:"asanaImportsTab.importingData.closeButtonText",defaultMessage:"Close"})})}):"importComplete"===e?(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",height:48,paddingTop:35,paddingBottom:28,border:"1px, 0px, 0px, 0px"},children:[(0,L.jsx)(Te,{}),(0,L.jsx)(le().A,{style:{width:"181px",height:"32px",padding:"0px, 0px, 0px, 8px",borderRadius:"4px",gap:"4px"},onClick:()=>{if(null!=W&&W.length&&C){const e=W.find((e=>void 0!==e.projectCollectionPageId));y().oo({url:(0,c().A)({pageId:(null==e?void 0:e.projectCollectionPageId)||C,pageModel:(0,d().Rr)({table:m().ev,id:(null==e?void 0:e.projectCollectionPageId)||C}),baseUrl:x().A.domainBaseUrl,pageVisitSource:i().y8.Import}),environment:g})}S().A.resetImport(),j().A.reset()},children:(0,L.jsx)(u().sA,{id:"asanaImportsTab.confirm.viewImportedProjects",defaultMessage:"View imported projects"})})]}):void 0)(N),controlRowPaddingTopBottom:"confirm"===t?0:10,removeBoxShadow:"confirm"===t,contentPaddingLeftRight:25,controlRowPaddingLeftRight:15,getPaddingTopBottom:()=>2,children:[(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[(0,L.jsx)(be,{tab:N}),(0,L.jsx)("div",{style:{position:"absolute",top:12,right:12},children:(0,L.jsx)($().A,{onClick:()=>{r(),S().A.resetImport()},style:_.closeButton,hoveredStyle:_.closeButtonHover,children:(0,o(66913).V)(_.closeButtonIcon)})})]}),je(N),(e=>"selectData"===e?(0,L.jsx)(se,{}):"importingData"===e?(0,L.jsx)(o(297464).A,{assetSrc:l().A.images.import.asanaPng}):"confirm"===e?(0,L.jsx)(D,{}):"failure"===e?(0,L.jsx)(o(352403).A,{assetSrc:l().A.images.import.asanaPng,loggerPageId:C,failedMessage:p.formatMessage(Se.failed)}):"chooseWorkspace"===e?(0,L.jsx)(o(453529).Ay,{}):"selectProperties"===e?(0,L.jsx)(Ie,{}):"importComplete"===e?(0,L.jsx)(z,{}):void 0)(N)]})}},162402:(e,t,o)=>{o.d(t,{q:()=>a});o(296540);var s=o(474848);const a=(0,o(340498).wt)("circleCheckFilled",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M8 16c4.377 0 8-3.631 8-8 0-4.376-3.631-8-8.008-8C3.624 0 0 3.624 0 8c0 4.369 3.631 8 8 8zm-.886-4.165c-.267 0-.487-.11-.69-.384l-1.97-2.416a.852.852 0 01-.187-.51c0-.352.274-.643.627-.643.228 0 .4.07.596.33l1.592 2.055 3.35-5.38c.148-.236.352-.362.556-.362.345 0 .667.236.667.604 0 .173-.102.353-.196.518l-3.686 5.804c-.165.259-.393.384-.66.384z"})})},171347:(e,t,o)=>{o.d(t,{A:()=>i,g:()=>n});o(296540);var s=o(474848);const a={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,fontSize:10,textAlign:"center",fontWeight:o(284371).Wy.semibold,borderRadius:4,color:o(100622).Ay.white,position:"static",marginLeft:6,WebkitFontSmoothing:"auto"};let n=function(e){return e[e.Red=0]="Red",e[e.Gray=1]="Gray",e}({});function r(e){return!!e&&e>0}const i=function(e){let{count:t,color:i,style:c,numberStyle:d,fadeIn:p}=e;const m=i===n.Red,u=(0,o(401497).IS)((e=>({badge:{...a,...c,...(t??0)>99&&{width:void 0,padding:2},background:m?e.redBadgeBackground:e.lightIconColor,...p&&{transition:"opacity 0.1s",opacity:r(t)?1:0}}})),[t,p,m,c]);return p||r(t)?(0,s.jsx)("div",{style:u.badge,children:(0,s.jsx)(l,{count:t,numberStyle:d})}):null};function l(e){let{count:t,numberStyle:o}=e;return t?1===t?(0,s.jsx)("span",{style:{marginLeft:-.5,...o},children:"1"}):t>99?(0,s.jsx)("span",{style:{letterSpacing:-.5,...o},children:"99+"}):t>9?(0,s.jsx)("span",{style:{letterSpacing:-.5,marginLeft:-.5,...o},children:t}):(0,s.jsx)("span",{style:{...o},children:t}):null}},192591:(e,t,o)=>{o.d(t,{P:()=>y,_:()=>x});var s=()=>o(861017),a=()=>o(939768),n=()=>o(559926),r=()=>o(901389),i=()=>o(780054),l=()=>o(725951),c=()=>o(313961),d=()=>o(404141),p=()=>o(250933),m=()=>o(449506),u=()=>o(705540),g=()=>o(496414),h=()=>o(957416);const f=(0,o(959013).YK)({authenticatingWithTrello:{id:"trelloActions.authenticatingWithTrello.loadingMessage",defaultMessage:"Authenticating with Trello…"},titleMessage:{defaultMessage:"Trello login",id:"trelloActions.loginPopupModal.title"}});async function y(e){const{environment:t,requestStore:o}=e,p=(0,l().LX)(t);let y=(0,s().bQ)(i().A.domainBaseUrl,{authType:p,userId:t.currentUser.id,isElectronDevice:t.device.isElectron});if(y=p.redirectToAuth?y:await(0,l().YN)(t,y),t.device.isElectron)return void u().openExternalUrl(y);const A=await h().P(t,{width:580,height:700,url:y,titleMessage:f.titleMessage});if(!A)return;const v=a().qg(A),I=v.query.oauth_token,S=v.query.oauth_verifier;if(!I||!S)return;g().m({message:f.authenticatingWithTrello});const j=await m().callApi({eventName:"authWithTrello",environment:t,data:{requestToken:I,verifier:S}});"failed"===j.type?(n()._$(t,{import_source:"trello",data:{import_type:"api",status:"failure",error:j.error,userId:t.currentUser.id}}),console.error(j.error),r().Qg(j),g().V()):(n()._$(t,{import_source:"trello",data:{import_type:"api",status:"success",userId:t.currentUser.id}}),n().mu(t,{integration_name:"trello"}),await o.refresh(),c().A.setState({open:!0}),d().A.setState({...d().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),await x(t,o),g().V())}async function x(e,t){p().A.setState({...p().A.state,isFetchingBoards:!0,showLoader:!0});const o=await m().callApi({eventName:"getTrelloBoards",environment:e,data:{}});return await t.refresh(),"success"===o.type?(p().A.setState({...p().A.state,boardsResponse:o.data,isFetchingBoards:!1,showLoader:!1}),o.data):(console.error(o.error),{boards:[]})}},214437:(e,t,o)=>{o.d(t,{A:()=>s});const s=new(o(463830).A)},250933:(e,t,o)=>{o.d(t,{A:()=>a});class s extends(()=>o(757695))().default{getInitialState(){return{boardsResponse:{boards:[]},isFetchingBoards:!0,showLoader:!1}}}const a=new s},276082:(e,t,o)=>{o.d(t,{A:()=>Be,h:()=>Pe});o(581454);var s=o(296540),a=()=>o(484714),n=()=>o(56366),r=()=>o(401497),i=()=>o(869190),l=()=>o(959013),c=()=>o(100622),d=()=>o(284371),p=()=>o(559926),m=()=>o(449506),u=()=>o(972435),g=()=>o(351360),h=()=>o(92513),f=()=>o(372555),y=()=>o(404141),x=()=>o(297872),A=()=>o(957986),v=o(474848);const I=function(e){let{fetchActiveImportTasks:t}=e;const a=(0,n().O$)(h().A),{isModalOpen:r}=a,i=(0,s.useCallback)((()=>{h().A.resetImport()}),[]),l=(0,s.useCallback)((()=>{const{currentTab:e}=a;return(0,v.jsx)(o(136480).A,{fetchActiveImportTasks:t,tab:e})}),[a,t]);return(0,v.jsx)(A().A,{open:r,innerStyle:{height:"calc(100vh - 100px)",overflow:"hidden",maxHeight:675,borderRadius:12,width:900},render:()=>(0,v.jsx)(x().A,{capture:!0,allowEsc:!0,render:()=>l()}),onDismiss:i})};var S=()=>o(125565),j=()=>o(534177),w=()=>o(84817),k=()=>o(107683),b=()=>o(398391),T=(o(898992),o(823215),o(354520),o(672577),o(803949),()=>o(757695)),C=()=>o(743176),M=()=>o(681546),F=()=>o(940563),P=()=>o(831310),B=()=>o(668725),R=()=>o(566910),L=()=>o(686526),D=()=>o(8980),W=()=>o(722872),O=()=>o(493823),V=()=>o(843189),_=()=>o(760217),z=()=>o(406699),N=()=>o(419357),E=()=>o(928600),q=()=>o(939740),U=()=>o(554509),H=()=>o(204063),Y=()=>o(89924),$=()=>o(21140);const K=(0,l().YK)({searchPlaceholder:{id:"csvImport.mapFieldsStep.searchPlaceholder",defaultMessage:"Search property types..."},heading:{id:"csvImport.mapFieldsStep.heading",defaultMessage:"Setup CSV columns"},description:{id:"csvImport.mapFieldsStep.description",defaultMessage:"Select the type of property you wish to assign each column from your CSV file."}});function G(){const e=(0,n().O$)(b().f),t=(0,a().Y0)(),o=(0,s.useMemo)((()=>T().default.createValue({open:!1,stack:[],closeOnEscape:!0})),[]),[i,l]=(0,s.useState)([]),[c,d]=(0,s.useState)({}),[p,m]=(0,s.useState)(""),[g,h]=(0,s.useState)({}),f=(0,r().DP)(),y=(0,s.useRef)(!1),x=e.open?e:void 0,A=null==x?void 0:x.csvHeaders,I=null==x?void 0:x.csvSampleRows,S=(0,s.useCallback)((e=>{const t=e.filter((e=>""!==(null==e?void 0:e.trim())));if(0===t.length)return"text";if(t.every((e=>!isNaN(Number(e)))))return"number";const o=/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?$/;if(t.every((e=>e&&o.test(e))))return"url";const s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(t.every((e=>e&&s.test(e))))return"email";const a=/^\d{1,4}[-/]\d{1,2}[-/]\d{1,4}$/;if(t.every((e=>e&&a.test(e))))return"date";const n=["true","false","yes","no","0","1"];return t.every((e=>e&&n.includes(e.toLowerCase())))?"checkbox":"text"}),[]);(0,s.useEffect)((()=>{if(e.open&&A&&!y.current)try{const e=(null==x?void 0:x.userPropertyMapping)||[];if(A&&A.length>0){l(A);const t={};if(A.forEach(((e,o)=>{let s="text";if(I&&I.length>0){const e=I.map((e=>e[o]));s=S(e)}t[e]=s})),h(t),e.length>0){const t={};A.forEach(((o,s)=>{const a=e.find((e=>e.headerName===o));if(a){const e=J.find((e=>e.type===a.propertyType));e&&(t[s]=e.type)}})),d(t)}else A.forEach((e=>{const o=t[e];o&&b().f.updatePropertyMapping(e,o)}));y.current=!0}}catch(t){l([]),d({}),h({})}}),[e,A,I,S,x]);const j=(0,r().IS)((e=>({container:{padding:16,height:"100%",overflow:"hidden"},headerContainer:{display:"flex",width:296,flexDirection:"column",alignItems:"flex-start",gap:8,overflow:"hidden",marginLeft:12},header:{color:e.text.primary,textAlign:"center",fontSize:26,fontStyle:"normal",fontWeight:700,letterSpacing:.208},description:{alignSelf:"stretch",color:e.text.secondary,fontFeatureSettings:"case on",fontSize:14,fontStyle:"normal",fontWeight:510,letterSpacing:-.154},mappingFrame:{flex:1,overflowY:"auto",padding:11,width:"100%"},customGrid:{display:"grid",gridTemplateColumns:"1fr 16px 1fr",gap:8,width:"100%",height:28},arrowCell:{display:"flex",alignItems:"center",justifyContent:"center"},headerButton:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",height:32},typeButton:{width:"100%",padding:"8px 12px",border:`1px solid ${e.stroke.primary}`,borderRadius:4,justifyContent:"space-between",height:32},buttonContainer:{marginTop:16,display:"flex",justifyContent:"center",gap:8,width:"100%"},leftContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:8,position:"relative",height:"100%",minHeight:0,overflow:"auto",width:"35%"},rightContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:8,height:"100%",flex:1},previewContainer:{marginTop:16,border:`1px solid ${e.stroke.primary}`,borderRadius:8,padding:16,width:"60%",overflowX:"auto"},previewTable:{width:"55%",borderCollapse:"collapse"},previewHeader:{padding:8,textAlign:"left",borderBottom:`1px solid ${e.stroke.primary}`,fontWeight:"bold"},previewCell:{padding:8,borderBottom:`1px solid ${e.stroke.secondary}`},previewTitle:{marginBottom:8,fontWeight:"bold"},columnHeading:{width:"100%",fontSize:12,fontWeight:600,color:e.text.secondary}})),[]),w=(0,s.useCallback)((()=>{const e=(null==x?void 0:x.userPropertyMapping)||[];i.map(((t,o)=>{const s=e.find((e=>e.headerName===t)),a=(null==s?void 0:s.propertyType)||g[t]||"text";return{header:t,type:a}}));b().f.nextStep()}),[i,g,x]),k=(0,s.useCallback)((()=>{b().f.close({type:"canceled"})}),[]),G=(0,s.useCallback)(((e,t)=>{const s=J.find((e=>e.name===t));if(!s)return;d((t=>({...t,[e]:s.type})));const a=i[e];a&&(b().f.updatePropertyMapping(a,s.type),L().os({collectionSettingsStore:o}))}),[o,i]);return(0,v.jsxs)($().wt,{style:j.container,children:[(0,v.jsxs)($().wt,{style:j.leftContainer,children:[(0,v.jsx)(V().E,{onClick:()=>b().f.previousStep(),children:(0,M().i)({width:16,height:16})}),(0,v.jsxs)($().wt,{style:j.headerContainer,children:[(0,v.jsx)(U().D,{styleName:"UITitle-30px/Semibold",customStyles:j.header,children:u().A.formatMessage(K.heading)}),(0,v.jsx)(U().D,{styleName:"UIRegular-14px/Medium",customStyles:j.description,children:u().A.formatMessage(K.description)})]}),(0,v.jsx)($().wt,{style:j.mappingFrame,children:(0,v.jsxs)("div",{style:j.customGrid,children:[(0,v.jsx)("div",{style:j.columnHeading,children:"CSV File Columns"}),(0,v.jsx)("div",{children:null}),(0,v.jsx)("div",{style:j.columnHeading,children:"Property Type"}),i.map(((e,o)=>(0,v.jsxs)(s.Fragment,{children:[(0,v.jsx)(V().E,{disabled:!0,style:j.headerButton,children:(0,v.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:e})}),(0,v.jsx)("div",{style:j.arrowCell,children:(0,F().P)({width:16,height:16})}),(0,v.jsx)(z().Ay,{popupType:z().z7.Popup,placementToOrigin:z().sx.Bottom,renderOrigin:t=>(0,v.jsxs)(O().p,{...t,style:j.typeButton,children:[(0,v.jsxs)($().Ye,{style:{gap:8,flex:1,overflow:"hidden"},children:["dont_import"===c[o]?(0,v.jsx)(D().I,{icon:R().e,size:16,color:"tertiary"}):(0,v.jsx)(C().Ay,{type:c[o]||g[e]||"text",size:16,icon:void 0,theme:f}),(0,v.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:c[o]&&X(c[o])||g[e]&&X(g[e])||"Don't import"})]}),(0,B().b)({width:12,height:12,fill:f.regularIconColor})]}),render:s=>{const a={menuType:W().gu.Popup,width:200},n=[{key:"propertyTypes",render:e=>(0,v.jsx)(Y().A,{...e}),items:(p?J.filter((e=>{let{name:t}=e;return t.toLowerCase().includes(p.toLowerCase())})):J).map((t=>{let{type:a,name:n}=t;return{key:a,action:()=>{G(o,n),s.close()},render:t=>(0,v.jsx)(_().A,{...t,title:n,icon:"dont_import"===a?(0,v.jsx)(D().I,{icon:R().e,size:16,color:"tertiary"}):(0,v.jsx)(C().Ay,{type:a,size:16,icon:void 0,theme:f}),right:c[o]===a||!c[o]&&g[e]===a?(0,v.jsx)("div",{style:{width:14},children:(0,P().o)({fill:f.regularIconColor})}):void 0})}}))}];return(0,v.jsxs)(E().A,{...a,children:[(0,v.jsx)(Y().A,{shouldShowBottomDivider:!1,children:(0,v.jsx)(N().Ay,{focusInitial:!t.isMobile||void 0,focus:!t.isMobile||void 0,value:p,onChange:e=>{m(e.target.value)},placeholder:u().A.formatMessage(K.searchPlaceholder),showClearButton:!0})}),(0,v.jsx)(q().Ay,{type:q().Oh.Vertical,initialFocus:0,sections:n})]})}})]},o)))]})}),(0,v.jsxs)($().wt,{style:j.buttonContainer,children:[(0,v.jsx)(H().A,{onClick:w,children:"Import CSV"}),(0,v.jsx)(O().p,{isGray:!0,style:{paddingLeft:"44%"},onClick:k,children:"Cancel"})]})]}),(0,v.jsx)($().wt,{style:j.rightContainer})]})}const J=[{type:"title",name:"Title"},{type:"text",name:"Text"},{type:"number",name:"Number"},{type:"select",name:"Select"},{type:"multi_select",name:"Multi-select"},{type:"date",name:"Date"},{type:"checkbox",name:"Checkbox"},{type:"url",name:"URL"},{type:"email",name:"Email"},{type:"phone_number",name:"Phone Number"},{type:"dont_import",name:"Don't Import"}];function X(e){const t=J.find((t=>t.type===e));return(null==t?void 0:t.name)||"Text"}var Q=()=>o(153321),Z=()=>o(148307),ee=()=>o(632625),te=()=>o(258035),oe=()=>o(637433),se=()=>o(892632),ae=()=>o(920773),ne=()=>o(313633),re=()=>o(710149);const ie=(0,l().YK)({title:{id:"csvImport.uploadStep.title",defaultMessage:"Import CSV into Notion"},description:{id:"csvImport.uploadStep.description",defaultMessage:"Create a new table with your CSV data or update an existing table."},uploadButton:{id:"csvImport.uploadStep.uploadButton",defaultMessage:"📎 Choose File"},mapHeadersButton:{id:"csvImport.uploadStep.mapHeadersButton",defaultMessage:"Map CSV headers"},cancelButton:{id:"csvImport.uploadStep.cancelButton",defaultMessage:"X"},selectedFile:{id:"csvImport.uploadStep.selectedFile",defaultMessage:"Selected file:"},importLocation:{id:"csvImport.uploadStep.importLocation",defaultMessage:"Import Location"},importMethod:{id:"csvImport.uploadStep.importMethod",defaultMessage:"Import Method"},uploadHeader:{id:"csvImport.uploadStep.uploadHeader",defaultMessage:"Upload CSV"},uploadProgress:{id:"csvImport.uploadStep.uploadProgress",defaultMessage:"Uploading... {percentComplete}%"},privateSpaceLabel:{id:"csvImport.uploadStep.privateSpaceLabel",defaultMessage:"Private Space"},newTeamspaceLabel:{id:"csvImport.uploadStep.newTeamspaceLabel",defaultMessage:"New Teamspace"},chooseTeamspaceOption:{id:"csvImport.uploadStep.chooseTeamspaceOption",defaultMessage:"Choose a teamspace"},filterTeams:{id:"csvImport.uploadStep.filterTeams",defaultMessage:"Filter teams"},learnAboutImports:{id:"csvImport.uploadStep.learnAboutImports",defaultMessage:"Learn about imports"}}),le=1024,ce=10;function de(){const e=(0,n().O$)(b().f),t=(0,a().v3)(),[o,i]=(0,s.useState)(0),[c,d]=(0,s.useState)(!1),[p,m]=(0,s.useState)(!1),[u,g]=(0,s.useState)(!1),h=(0,s.useCallback)((async()=>{try{g(!1);const o=await se().dA({multiple:!1,accept:".csv"});if(0===o.length)return;const s=o[0];d(!0),m(!0);const a=new FileReader,n=new Promise((e=>{a.onload=t=>{try{var o;const s=null===(o=t.target)||void 0===o?void 0:o.result;if("string"==typeof s){const t=(0,te().CO)(s);if(t.length>0){const o=t[0],s=t.slice(1,Math.min(t.length,ce+1));return void e({headers:o,sampleRows:s})}}e(null)}catch(s){e(null)}},a.onerror=()=>{e(null)}})),r=s.slice(0,le);a.readAsText(r);const l=await new Promise(((e,o)=>{se().Zn({environment:t,uploadType:"csv",files:[s],bucket:"temporary",bypassFreeFileUploadLimitCheck:!0,onBatchStart:()=>{i(0)},onBatchProgress:e=>{let{progressPercent:t}=e;i(t)},onBatchCompleteWithToken:t=>{i(100),e(t)},onBatchError:o})})),c=await n;if(m(!1),!e.open)return;b().f.setState({...e,fileName:s.name,fileUrl:l[0].fileUrl,fileSize:s.size}),c&&(b().f.setCsvData(c.headers,c.sampleRows),g(!0)),d(!1)}catch(o){d(!1),m(!1),g(!1)}}),[t,e]),f=(0,s.useCallback)((()=>{b().f.nextStep()}),[]),y=(0,s.useCallback)((()=>{b().f.close({type:"canceled"})}),[]),x=(0,r().DP)(),A=(0,r().IS)((e=>({container:{display:"flex",width:"92%",flexDirection:"column",alignItems:"flex-start",gap:8,overflow:"hidden",marginLeft:24},shimmerContainer:{borderRadius:12,border:`1px solid ${e.stroke.secondary}`,backgroundColor:"dark"===e.mode?e.popoverWaxPaperBackground:void 0,backgroundImage:`url(${Z().A.images.workflowTemplates.bgDotsPng})`,backgroundRepeat:"repeat",backgroundSize:"70px 70px",backgroundPosition:"0% 0%",backgroundBlendMode:"multiply",position:"absolute",userSelect:"none",inset:0,zIndex:10,paddingTop:16,paddingBottom:16,paddingRight:16},header:{opacity:.6,paddingBottom:20,borderBottom:`1px solid ${e.stroke.primary}`},title:{color:e.text.primary,textAlign:"center",fontSize:26,fontStyle:"normal",fontWeight:700,letterSpacing:.208},description:{alignSelf:"stretch",color:e.text.secondary,fontFeatureSettings:"case on",fontSize:14,fontStyle:"normal",fontWeight:510,letterSpacing:-.154},closeButton:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:12,background:"rgba(0, 0, 0, 0.05)",backdropFilter:"blur(16px)",margin:14},leftContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:8,paddingBottom:14,position:"relative",height:"100%",minHeight:0,overflow:"auto",width:"37%"},rightContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:8,height:"100%",flex:1,paddingTop:8,paddingBottom:8,paddingRight:8},subheader:{color:e.text.secondary,fontSize:12,fontStyle:"normal",fontWeight:510,marginBottom:6},mapHeadersButton:{position:"absolute",bottom:0,padding:14,width:"90%",marginBottom:24,marginLeft:24,marginRight:24},radioContainer:{marginTop:14,gap:10,width:"90%",marginLeft:24,flexDirection:"column"},closeIcon:{width:16},buttonContainer:{marginTop:16,display:"flex",justifyContent:"center",gap:8,width:"92%",position:"absolute",bottom:12,left:24},columns:{display:"grid",gridTemplateColumns:"3fr 2fr 2fr",gap:45},shimmer:{width:"50%",height:9,borderRadius:5},shimmerWide:{width:"100%",height:9,borderRadius:5}})),[]);return e.open?(0,v.jsxs)($().Ye,{style:{height:"100%",minHeight:0,overflow:"hidden"},children:[(0,v.jsxs)($().wt,{style:A.leftContainer,children:[(0,v.jsx)($().Ye,{style:A.closeButton,children:(0,v.jsx)(ne().A,{top:1,right:1,onClick:y})}),(0,v.jsxs)($().Ye,{style:A.container,children:[(0,v.jsx)(U().D,{styleName:"UITitle-30px/Semibold",colorName:"primary",customStyles:A.title,children:(0,v.jsx)(l().sA,{...ie.title})}),(0,v.jsx)(U().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",customStyles:A.description,children:(0,v.jsx)(l().sA,{...ie.description})})]}),(0,v.jsxs)($().Ye,{style:{width:"92%",marginLeft:24,flexDirection:"column",paddingTop:24},children:[(0,v.jsx)(S().A,{style:A.subheader,children:(0,v.jsx)(l().sA,{...ie.uploadHeader})}),(0,v.jsxs)("div",{style:{position:"relative",width:"100%"},children:[e.fileName&&!c?(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[(0,v.jsx)(V().E,{style:{flex:1,borderTopRightRadius:0,borderBottomRightRadius:0},children:(0,v.jsx)("span",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"block"},children:e.fileName})}),(0,v.jsx)(V().E,{onClick:()=>{b().f.setState({...e,fileName:"",fileUrl:"",fileSize:0,csvHeaders:void 0,csvSampleRows:void 0,userPropertyMapping:[]})},style:{flexShrink:0,borderTopLeftRadius:0,borderBottomLeftRadius:0},children:(0,oe().Y)(A.closeIcon)})]}):(0,v.jsx)(V().E,{style:{width:"100%"},onClick:h,disabled:c||p,children:c?(0,v.jsx)(l().sA,{...ie.uploadProgress,values:{percentComplete:o}}):p?"Processing CSV...":(0,v.jsx)(l().sA,{...ie.uploadButton})}),c&&(0,v.jsx)("div",{style:{position:"absolute",left:0,top:0,height:"100%",width:`${o}%`,backgroundColor:"rgba(0,0,0,0.1)",borderRadius:4,transition:"width 0.3s ease"}})]})]}),(0,v.jsxs)($().wt,{style:A.buttonContainer,children:[(0,v.jsx)(H().A,{onClick:f,disabled:!e.fileName||e.isLoading||p||!u,children:(0,v.jsx)(l().sA,{...ie.mapHeadersButton})}),(0,v.jsx)(ae().p,{isGray:!0,style:{paddingLeft:"31%"},onClick:()=>window.open("https://www.notion.com/help/import-data-into-notion","_blank"),children:(0,v.jsx)(l().sA,{...ie.learnAboutImports})})]})]}),(0,v.jsx)($().wt,{style:A.rightContainer,children:(0,v.jsx)(Q().P.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:pe,style:{width:"100%",height:"100%",position:"relative"},children:(0,v.jsxs)(w().Y1,{direction:"vertical",height:"fill",width:"fill",padding:"36px 38px",style:A.shimmerContainer,gap:30,children:[(0,v.jsxs)(w().Y1,{direction:"horizontal",align:"center-left",gap:12,height:50,style:A.header,children:[(0,v.jsx)(ee().A,{icon:"/icons/pencil_gray.svg",size:20,theme:x}),(0,v.jsx)(U().D,{styleName:"UITitle-22px/Semibold",children:e.fileName||"New Table"})]}),(0,v.jsx)("div",{style:A.columns,children:Array.from({length:3}).map(((e,t)=>(0,v.jsxs)(w().Y1,{direction:"vertical",gap:25,children:[(0,v.jsx)(re().A,{style:A.shimmer}),Array.from({length:5}).map(((e,t)=>(0,v.jsx)(re().A,{style:A.shimmerWide},t)))]},t)))})]})})})]}):null}const pe={type:"spring",stiffness:150,damping:20,delay:.5};function me(){return null}function ue(){return null}function ge(){const e=(0,n().O$)(b().f),t=(0,s.useCallback)((()=>{e.open&&b().f.close({type:"canceled"})}),[e]),o=(0,n().K8)((()=>e.open?b().f.getCurrentStep():void 0),[e]),a=(0,s.useCallback)((()=>{b().f.close({type:"canceled"})}),[]),r=(0,s.useMemo)((()=>({width:{type:"fixed",length:1e3},height:{type:"fixed",length:650}})),[]);return o&&e.open?(0,v.jsx)(k().s,{isOpen:!0,areaConstraint:r,onDismiss:t,onClosed:a,backgroundAppearance:"wash",render:e=>{let{sizeRange:t}=e;return(0,v.jsx)(w().Y1,{style:t,children:(0,v.jsx)(he,{currentModalStep:o})})}}):null}function he(e){let{currentModalStep:t}=e;if(!(0,n().K8)((()=>b().f.state),[]).open)return null;switch(t){case"uploadFile":return(0,v.jsx)(de,{});case"mapFieldsForImport":return(0,v.jsx)(G,{});case"mapFieldsForMerge":return(0,v.jsx)(me,{});case"importing":return(0,v.jsx)(ue,{});default:(0,j().HB)(t)}}var fe=()=>o(479199);const ye=function(e){let{fetchActiveImportTasks:t}=e;const a=(0,n().O$)(fe().A),r=(0,s.useCallback)((()=>{fe().A.resetImport()}),[]),i=(0,n().K8)((()=>(0,o(397292).G)()),[]),l=(0,s.useCallback)((()=>{let{currentTab:e}=a;return i?"selectData"===e&&(e="chooseWorkspace"):fe().A.setState({...a,selectedImportType:"ProjectsAndTasks"}),(0,v.jsx)(o(468093).A,{fetchActiveImportTasks:t,tab:e})}),[i,t,a]);return(0,v.jsx)(A().A,{open:a.isModalOpen,innerStyle:{width:800,height:"calc(100vh - 100px)",overflow:"hidden",borderRadius:5,maxHeight:675,...i?{borderRadius:12,width:900}:{}},render:()=>(0,v.jsx)(x().A,{capture:!0,allowEsc:!0,render:()=>l()}),onDismiss:r})};var xe=()=>o(416845),Ae=()=>o(206267),ve=()=>o(970330),Ie=()=>o(901389),Se=()=>o(911686),je=()=>o(522094);class we extends T().default{getInitialState(){return{isDragOverActive:!1}}}const ke=new we;const be=(0,l().YK)({invalidFileFormat:{id:"zipImportOptions.invalidFile",defaultMessage:"Unsupported file format, Please drag and drop a ZIP file"}});const Te=function(e){const t=(0,a().v3)(),s=(0,n().K8)((()=>ke.state.isDragOverActive),[]),i=(0,r().IS)((e=>({buttonStyle:{display:"flex",alignItems:"center",paddingLeft:12,paddingRight:12,paddingTop:2,paddingBottom:2,borderColor:e.outlineButtonBorder,border:1,borderWidth:1,borderRadius:4,height:32,gap:4,background:e.importOptionsButtonBackground},titleStyle:{fontSize:14,fontWeight:"medium",font:"SF Pro",color:e.text.primary,width:183,height:18,textAlign:"center"},divTitleStyle:{color:e.text.secondary,display:"flex",background:s?e.fill.grayPrimary:e.fill.lightGraySecondary,width:"100%",padding:"16px",justifyContent:"center",alignItems:"center",gap:12,borderRadius:8,border:s?"2px solid":"none",borderColor:s?e.stroke.uiBlueSecondary:e.fill.lightGraySecondary},divStyle:{display:"flex",alignItems:"center",marginTop:10,minWidth:0,width:"100%",gap:10},UiLabelStyle:{color:e.text.secondary,font:"SF Pro",fontWeight:400,fontSize:14}})),[s]),c=e=>{ke.setState({...ke.state,isDragOverActive:e})};return(0,v.jsx)("div",{onDrop:o=>{o.preventDefault(),c(!1);const s=o.dataTransfer.files[0];(async function(e,t,o,s){var a;if(1!==t.length)return;if("zip"!==(null===(a=t[0].name.split(".").pop())||void 0===a?void 0:a.toLowerCase())){const e=u().A.formatMessage(be.invalidFileFormat);throw Ie().f1(e),new(xe().yI)("Invalid file format, please upload it as a zip file")}const{mainEditorCurrentBlockStore:n,currentSpaceStore:r,currentSpaceViewStore:i}=g().default.state;if(!r||!i||!n)return;const l=Ce();p().fJ(e,{import_source:"genericImporter",from:s,import_type:"file",flowId:l});const c=await Se().lD({environment:e,pageStore:n,spaceStore:r,spaceViewStore:i,analyticsFrom:s,uploadType:"genericImporter",flowId:Ce()},t);c&&(ve().v(e,{from:"import",type:"page",new_page_id:c.id,creating_block_id:c.id,parent_collection_id:c.getParentCollectionIdUpToTwoLevels()}),o(c,"zip"))})(t,[s],e.onComplete,e.analyticsFrom).then((()=>{})).catch((()=>{}))},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),c(!0)},onDragLeave:e=>{e.preventDefault(),c(!1)},style:i.divStyle,children:(0,v.jsxs)("div",{style:i.divTitleStyle,children:[(0,v.jsx)(Fe,{icon:o(864896).Y}),(0,v.jsx)(S().A,{isSecondaryColor:!0,style:i.UiLabelStyle,children:(0,v.jsx)(l().sA,{id:"zipImport.dragAndDrop",defaultMessage:"Drag and drop your ZIP files here, or"})}),(0,v.jsx)(o(197190).A,{onClick:()=>async function(e,t,o,s){const a=g().default.state,{mainEditorCurrentBlockStore:n,currentSpaceStore:r,currentSpaceViewStore:i}=a;if(!r||!i||!n)return;const l=Ce();p().fJ(e,{import_source:"genericImporter",from:s,import_type:"file",flowId:l});const c=await Se().un({environment:e,pageStore:n,spaceStore:r,spaceViewStore:i,analyticsFrom:s,uploadType:t,flowId:l,allowMultiple:!1});c&&(ve().v(e,{from:"import",type:"page",new_page_id:c.id,creating_block_id:c.id,parent_collection_id:c.getParentCollectionIdUpToTwoLevels()}),o(c,"zip"))}(t,"genericImporter",e.onComplete,e.analyticsFrom),style:i.buttonStyle,children:(0,v.jsx)("div",{style:{minWidth:0,width:"100%"},children:(0,v.jsx)("div",{style:{display:"flex"},children:(0,v.jsx)("div",{style:i.titleStyle,children:(0,v.jsx)(l().sA,{id:"zipImport.uploadFile",defaultMessage:"Upload from your computer"})})})})})]})})};function Ce(){return je().A.state.flowId||Ae().JW()}const Me=20;function Fe(e){let{icon:t}=e;return(0,v.jsx)("div",{children:t({flexShrink:0,width:Me,height:Me,gap:10})})}const Pe=(0,l().YK)({tabTitle:{id:"importsTab.title",defaultMessage:"Import data"},tabSubtitle:{id:"importsTab.subtitle",defaultMessage:"Import data from other apps and files into Notion"},unsupportedImportsHelperText:{id:"importsTab.unsupportedImportsHelperText",defaultMessage:"If your data is located somewhere we don't support yet, you can try importing it via CSV file."},zipImportTitle:{id:"importsTab.zipImport.title",defaultMessage:"Don’t see the app you use? Import a ZIP file, and Notion will convert DOCX, CSV, Text, Markdown, HTML and EPUB files into Notion pages."},activeImportsAndSyncsTitle:{id:"importsTab.activeImportsAndSyncs.title",defaultMessage:"Active imports & syncs"},activeImportsTitle:{id:"importsTab.activeImports.title",defaultMessage:"Active Imports"},activeImportsImportTime:{id:"importsTab.activeImports.importTime",defaultMessage:"Time"},activeImportsImportFrom:{id:"importsTab.activeImports.importFrom",defaultMessage:"From"},activeImportsImportStatus:{id:"importsTab.activeImports.importStatus",defaultMessage:"Status"},activeImportsTableNoActiveImports:{id:"importsTab.activeImportsTable.noActiveImports",defaultMessage:"There are no ongoing imports associated with your account."},activeImportsStatusInProgress:{id:"activeImports.status.inProgress",defaultMessage:"In progress"}}),Be=function(e){const t=(0,n().O$)(g().default),x=(0,n().O$)(y().A),A=(0,n().O$)(h().A),j=(0,n().O$)(f().A),w=x.openedFrom??"modal",{currentSpaceStore:k,mainEditorCurrentBlockStore:b,currentSpaceViewStore:T,currentUserSettingsStore:C}=t,M=(0,a().v3)(),{device:F}=(0,a().v3)(),P=(0,l().tz)(),B=(0,n().K8)((()=>"dark"===M.ThemeStore.state.mode),[M]),[R,L]=(0,s.useState)([]),D=(0,n().K8)((()=>(0,o(504836).pB)()),[]),W=(0,s.useCallback)((async()=>{if(null==k||!k.id)return;const e=await m().callApi({eventName:"getActiveImportTasks",environment:M,data:{spaceId:k.id}});"success"===e.type&&L(e.data)}),[k,M]);(0,s.useEffect)((()=>{W().catch((()=>{}));const e=setInterval(W,6e4);return()=>clearInterval(e)}),[k,M,W]),(0,s.useEffect)((()=>{let e;const t=async s=>{const a=await m().callApi({eventName:"getAsanaWorkspacesNames",environment:M,data:{}});if(s+=1,"success"===a.type)if(null!=a&&a.data.account){var n;h().A.setState({...h().A.state,account:a.data.account,workspaces:a.data.workspaces,isLoadingAsanaWorkspaces:!1,isAccountLinkingInProgress:!1,currentTab:"selectData",selectedWorkspace:(null===(n=a.data)||void 0===n||null===(n=n.workspaces[0])||void 0===n?void 0:n.gid)||void 0,isModalOpen:!0})}else{if(s>o)return;e=setTimeout((()=>t(s)),2e3)}},o=180;if(A.isAccountLinkingInProgress){t(0).catch((()=>{}))}return()=>{clearTimeout(e)}}),[A.isAccountLinkingInProgress,M]),(0,o(187174).Yb)((async()=>{let e;const t=async a=>{var n;const r=await m().callApi({eventName:"getEvernoteAccount",environment:M,data:{}});if(a+=1,"success"===r.type)if(null!=r&&r.data&&null!==(n=r.data)&&void 0!==n&&n.userInfo){f().A.setState({...f().A.state,isFetchingNotebooks:!0,showLoader:!0,linkingAccount:!1});const e=await m().callApi({eventName:"getEvernoteNotebooks",environment:M,data:{}});"success"===e.type&&f().A.setState({...f().A.state,notebooksResponse:e.data,isFetchingNotebooks:!1,showLoader:!1}),o(113507).A.setState({open:!0})}else{if(a>s)return;e=setTimeout((async()=>await t(a)),2e3)}},s=180;if(j.linkingAccount){const e=0;await t(e).catch((()=>{}))}return()=>{clearTimeout(e)}}),[j.linkingAccount,M]);const O=(0,r().IS)((e=>({activeImportAndSyncTitle:{fontSize:d().J.UIRegular.mobile,fontWeight:d().Wy.medium,lineHeight:d().K_.UIRegular.mobile},arrowDownIcon:{width:11,height:12,gap:10,radius:3,fill:"#ACABA9"},activeImportsStatusTimeDiv:{display:"flex",alignItems:"center",flexDirection:"row",gap:4}})),[]),V=D?(0,v.jsx)(l().sA,{id:"importsTab.activeImportsAndSyncs.title",defaultMessage:"Active imports & syncs"}):(0,v.jsx)(l().sA,{id:"importsTab.activeImports.title",defaultMessage:"Active Imports"}),_=(e,t)=>{p().eH(M,{from:w,import_source:t}),o(857783).uK({environment:M,store:e,pageVisitSource:o(584262).y8.Import}),y().A.reset()};return k&&T&&T&&C?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o(8178).A,{large:!F.isMobile||void 0,divider:F.isMobile?void 0:"full",children:P.formatMessage(Pe.tabTitle)}),(0,v.jsx)(S().A,{children:P.formatMessage(Pe.tabSubtitle)}),(0,v.jsx)(S().A,{isSmall:!0,children:e.genericImporterEnabled&&!e.zipImporterEnabled?(0,v.jsx)(l().sA,{id:"importsTab.unsupportedImportsHelperTextForUniversalImport",defaultMessage:"If the app you’re using isn’t listed below, try the <boldtext>Universal import</boldtext> ",values:{boldtext:e=>(0,v.jsx)("span",{style:{fontWeight:600},children:e})}}):P.formatMessage(Pe.unsupportedImportsHelperText)}),(0,v.jsxs)("div",{style:{marginTop:16,width:"100%",overflow:"hidden"},children:[(0,v.jsx)(o(864408).A,{pageStore:b,spaceStore:k,spaceViewStore:T,userSettingsStore:C,analyticsFrom:w,onComplete:_,readOnlyCreditButton:!1}),(0,v.jsx)(I,{fetchActiveImportTasks:W}),(0,v.jsx)(ye,{fetchActiveImportTasks:W}),(0,v.jsx)(ge,{})]}),e.zipImporterEnabled?(0,v.jsxs)("div",{style:{marginTop:32,width:"100%",gap:10,overflow:"hidden"},children:[(0,v.jsx)(S().A,{isSecondaryColor:!0,isMultiline:!0,style:{font:"SF Pro",fontWeight:400,fontSize:14},children:P.formatMessage(Pe.zipImportTitle)}),(0,v.jsx)(Te,{onComplete:_,analyticsFrom:w})]}):(0,v.jsx)(v.Fragment,{}),(null==R?void 0:R.length)>0?(0,v.jsxs)("div",{style:{marginTop:32},children:[(0,v.jsx)(S().A,{isMultiline:!0,style:O.activeImportAndSyncTitle,children:V}),(0,v.jsx)(o(317182).A,{tableStyle:{borderTop:0},columns:[{key:"importTime",header:(0,v.jsxs)("div",{style:O.activeImportsStatusTimeDiv,children:[P.formatMessage(Pe.activeImportsImportTime),(0,o(158359).P)(O.arrowDownIcon)]})},{key:"importFrom",header:P.formatMessage(Pe.activeImportsImportFrom)},{key:"importStatus",header:P.formatMessage(Pe.activeImportsImportStatus)}],rows:R.map((e=>({key:`table-${e.taskId}`,columns:[e.startedAt?`${(0,i().W_)(e.startedAt,"long",u().A.getIntl().locale)} ${(0,i().W_)(e.startedAt,"time",u().A.getIntl().locale)}`:"",(0,o(496603).ZH)(e.source),(0,v.jsx)(o(881690).A,{isRound:!0,showRemoveButton:!1,value:(0,v.jsx)(S().A,{children:P.formatMessage(Pe.activeImportsStatusInProgress)}),backgroundColor:B?c().XA.dark.blue[200]:c().XA.light.blue[200],showColoredDot:"blue",format:o(784892).NY.Small,isSingle:!0},`progress-${e.taskId}`)]})))}),R.length?(0,v.jsx)(v.Fragment,{}):(0,v.jsx)(S().A,{isSmall:!0,style:{marginTop:16},children:P.formatMessage(Pe.activeImportsTableNoActiveImports)})]}):(0,v.jsx)(v.Fragment,{})]}):(0,v.jsx)(v.Fragment,{})}},297464:(e,t,o)=>{o.d(t,{A:()=>d});var s=o(296540),a=()=>o(401497),n=()=>o(959013),r=()=>o(125565),i=()=>o(21140),l=(o(581454),o(474848));const c=function(e){const{dotCount:t=6,speed:n=800}=e,[r,c]=(0,s.useState)(1),d=(0,a().IS)((e=>({iconStyle:{width:6,height:6,fill:e.lightIconColor,opacity:.5},iconStyleBold:{width:6,height:6,fill:e.lightIconColor}})),[]);return(0,s.useEffect)((()=>{const e=setInterval((()=>c((e=>e<t?e+1:1))),n);return()=>clearInterval(e)}),[t,n]),(0,l.jsx)(i().Ye,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"},children:Array.from({length:t},((e,t)=>t+1)).map((e=>(0,l.jsx)("div",{children:(0,o(358373).v)(r===e?d.iconStyleBold:d.iconStyle)},e)))})};const d=function(e){const t=(0,o(56366).K8)((()=>o(92513).A.state.templateCreationInProgress),[]),s=(0,a().IS)((e=>({iconStyle:{width:6,height:6,fill:e.lightIconColor},iconStyleBold:{width:8,height:8,fill:e.mediumIconColor},lightText:{color:e.lightTextColor}})),[]);return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[(0,l.jsxs)(i().Ye,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"},children:[(0,l.jsx)("img",{style:{width:32,height:32,marginRight:8},src:e.assetSrc}),(0,l.jsx)(c,{}),(0,l.jsx)("img",{style:{width:32,height:32,marginLeft:8},src:o(148307).A.images.notionLogoPng})]}),t?(0,l.jsx)(r().A,{style:s.lightText,children:(0,l.jsx)(n().sA,{id:"import.importingData.settingUpWorkspace",defaultMessage:"Creating templates for your projects and tasks."})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i().Ye,{children:(0,l.jsx)(r().A,{style:s.lightText,children:(0,l.jsx)(n().sA,{id:"import.importingData.feelFreeToLeave",defaultMessage:"Data is being imported. Feel free to leave this window."})})}),(0,l.jsx)(i().Ye,{children:(0,l.jsx)(r().A,{style:s.lightText,children:(0,l.jsx)(n().sA,{id:"import.importingData.sendEmail",defaultMessage:"We will send you an email when the import is complete or if any problems occur."})})})]})]})}},313961:(e,t,o)=>{o.d(t,{A:()=>s});const s=new(o(463830).A)},324009:(e,t,o)=>{o.d(t,{J:()=>x,p:()=>A});var s=()=>o(861017),a=()=>o(939768),n=()=>o(559926),r=()=>o(901389),i=()=>o(780054),l=()=>o(725951),c=()=>o(372555),d=()=>o(113507),p=()=>o(522094),m=()=>o(404141),u=()=>o(449506),g=()=>o(705540),h=()=>o(496414),f=()=>o(957416);const y=(0,o(959013).YK)({authenticatingWithEvernote:{id:"evernoteActions.authenticatingWithEvernote.loadingMessage",defaultMessage:"Authenticating with Evernote…"},titleMessage:{defaultMessage:"Evernote login",id:"evernoteActions.loginPopupModal.title"}});async function x(e){const{environment:t,requestStore:o}=e,x=(0,l().LX)(t);let v=(0,s().TD)(i().A.domainBaseUrl,{authType:x,userId:t.currentUser.id,isElectronDevice:t.device.isElectron});if(v=x.redirectToAuth?v:await(0,l().YN)(t,v),t.device.isElectron)return h().m({message:y.authenticatingWithEvernote}),c().A.setState({...c().A.state,linkingAccount:!0,showLoader:!0}),void g().openExternalUrl(v);const I=await f().P(t,{width:580,height:700,url:v,titleMessage:y.titleMessage});if(!I)return;const S=a().qg(I),j=S.query.oauth_token,w=S.query.oauth_verifier;if(!j||!w)return;h().m({message:y.authenticatingWithEvernote});const k=await u().callApi({eventName:"authWithEvernote",environment:t,data:{requestToken:j,verifier:w}}),b=p().A.getOrCreateFlowId();if("failed"===k.type)return n()._$(t,{import_source:"evernote",data:{import_type:"api",status:"failure",error:k.error,userId:t.currentUser.id},flowId:b}),console.error(k.error),r().Qg(k),void h().V();n()._$(t,{import_source:"evernote",data:{import_type:"api",status:"success",userId:t.currentUser.id},flowId:b}),n().mu(t,{integration_name:"evernote"}),await o.refresh(),d().A.setState({open:!0}),m().A.setState({...m().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),await A({environment:t,requestStore:o}),h().V()}async function A(e){const{environment:t,requestStore:o}=e;try{c().A.setState({...c().A.state,isFetchingNotebooks:!0,showLoader:!0});const e=await u().callApi({eventName:"getEvernoteNotebooks",environment:t,data:{}});if(await o.refresh(),"success"===e.type){c().A.setState({...c().A.state,notebooksResponse:e.data,isFetchingNotebooks:!1,showLoader:!1});const{userInfo:t,notebooks:o}=e.data;return{userInfo:t,notebooks:o}}return console.error(e.error),{notebooks:[],userInfo:void 0}}catch(s){return console.error(s),{notebooks:[],userInfo:void 0}}}},352403:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var s=()=>o(358373),a=()=>o(959013),n=()=>o(125565),r=o(474848);const i=function(e){var t;const i=(0,o(401497).IS)((e=>({iconStyle:{width:6,height:6,fill:e.lightIconColor},closeIconStyle:{width:16,height:16,fill:e.redBadgeBackground},lightText:{color:e.lightTextColor}})),[]);return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[(0,r.jsxs)(o(21140).Ye,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"},children:[(0,r.jsx)("img",{style:{width:32,height:32,marginRight:8},src:e.assetSrc}),(0,s().v)(i.iconStyle),(0,s().v)(i.iconStyle),(0,s().v)(i.iconStyle),(0,o(931121).J)(i.closeIconStyle),(0,s().v)(i.iconStyle),(0,s().v)(i.iconStyle),(0,s().v)(i.iconStyle),(0,r.jsx)("img",{style:{width:32,height:32,marginLeft:8},src:o(148307).A.images.notionLogoPng})]}),(0,r.jsx)(n().A,{style:i.lightText,children:e.failedMessage}),(0,r.jsx)(n().A,{style:i.lightText,children:(0,r.jsx)(a().sA,{id:"import.importingData.failed.viewLoggerPage",defaultMessage:"Please try again or read the {link} to troubleshoot.",values:{link:(0,r.jsx)("a",{style:{color:o(100622).Ay.black,cursor:"pointer"},href:`/${null===(t=e.loggerPageId)||void 0===t?void 0:t.replaceAll("-","")}`,children:(0,r.jsx)(a().sA,{id:"import.importingData.failed.linkText",defaultMessage:"import logs"})})}})})]})}},372555:(e,t,o)=>{o.d(t,{A:()=>a});class s extends(()=>o(757695))().default{getInitialState(){return{notebooksResponse:{notebooks:[]},isFetchingNotebooks:!0,showLoader:!1,linkingAccount:!1}}}const a=new s},388416:(e,t,o)=>{o.d(t,{Sq:()=>W,pX:()=>O,g3:()=>_,nM:()=>E,P0:()=>L,Jq:()=>V,Wh:()=>G,nP:()=>K,$A:()=>Q,TJ:()=>Z,i_:()=>N,oz:()=>J,$b:()=>R,qf:()=>D,dJ:()=>Y,p7:()=>ee,No:()=>z,Mi:()=>U});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(430670),o(803949),o(581454);var s=()=>o(584262),a=()=>o(66689),n=()=>o(921940),r=()=>o(183210),i=()=>o(857639),l=()=>o(416845),c=()=>o(179034),d=()=>o(161479),p=()=>o(96689),m=()=>o(319625),u=()=>o(583835);const g=(0,u().Dv)("mondayFullImport"),h=(0,u().Dv)("parallelMondayImport");var f=()=>o(901389),y=()=>o(435009),x=()=>o(313892),A=()=>o(780054),v=()=>o(601734),I=()=>o(972435),S=()=>o(397292),j=()=>o(351360),w=()=>o(522094),k=()=>o(479199),b=()=>o(404141),T=()=>o(559926),C=()=>o(449506),M=()=>o(357625),F=()=>o(911686),P=()=>o(496414),B=()=>o(317909);const R=(0,o(959013).YK)({projectsAndTasksCountTooltip:{id:"mondayImport.importsTab.selectData.tooltipForProjectsAndTasksCount",defaultMessage:"Counts each item in the project board and each task board as a separate project"},boardsKeyWord:{id:"mondayImport.importsTab.selectData.boardsKeyWord",defaultMessage:" boards"},projectsKeyWord:{id:"mondayImport.importsTab.selectData.projectsKeyWord",defaultMessage:" projects"},projectsAndTasksExcludedToolTip:{id:"mondayImport.importsTab.selectData.tooltipForDisabledProjectsAndTasks",defaultMessage:"Project and task boards are excluded."},noBoardsTooltipMessage:{id:"mondayImport.importsTab.selectData.tooltipForDisabledFolderV2",defaultMessage:"This folder has no boards."},successfullyConnected:{id:"mondayActions.successfullyConnected.message",defaultMessage:"Successfully connected monday.com instance."},fullImport:{defaultMessage:"Full Import",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.fullImport"},fullImportDescription:{defaultMessage:"Import all Monday board types as Notion databases. Recommended for a full migration.",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.fullImport.description"},projectsAndTasks:{defaultMessage:"Projects & Tasks only",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.projectsAndTasks"},projectsAndTasksDescription:{defaultMessage:"Import project and task boards from Monday into Notion Projects. Recommended for Project management only.",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.projectsAndTasks.description"},newTeamspaceLabel:{id:"mondayImport.importsTab.selectData.newTeamspace",defaultMessage:"New teamspace"},privateSpaceLabel:{id:"mondayImport.importsTab.selectData.privateSpaceTitle",defaultMessage:"Private"},selectBoardsHeading:{id:"mondayImport.importsTab.chooseWorkspace.selectBoards",defaultMessage:"Choose boards to import"},selectWorkspaceV2:{id:"mondayImporter.selectData.selectWorkspacePlaceholder",defaultMessage:"Select a workspace"},chooseImportType:{id:"mondayImport.importsTab.chooseWorkspace.chooseImportType",defaultMessage:"Choose Import Type"},mapTeamspacesDescription:{id:"mondayImport.importsTab.chooseWorkspace.tabDescription",defaultMessage:"You can give each Monday folder a Notion teamspace to collaborate in."},searchWorkspaces:{id:"mondayImport.importsTab.chooseWorkspace.searchWorkspaces",defaultMessage:"Search workspaces..."},chooseWorkSpace:{id:"mondayImport.importsTab.chooseWorkspace.tabTitle",defaultMessage:"Choose Monday workspace"},chooseTeamspace:{id:"mondayImport.importsTab.selectData.searchTeamspacePlaceholder",defaultMessage:"Search for a teamspace"},excludeProjectsAndTasks:{id:"mondayImport.importsTab.selectData.excludeProjectsAndTasks",defaultMessage:"Exclude projects & tasks boards"},selectWorkSpaceV1:{id:"MondayImport.importsTab.selectData.tabTitle",defaultMessage:"Select Monday.com workspace"},backButton:{id:"mondayImport.selectData.backButtonText",defaultMessage:"Back"},creatingTemplate:{id:"importsTab.selectData.creatingTemplates",defaultMessage:"Creating templates"},nextButton:{id:"importsTab.selectData.nextButtonText",defaultMessage:"Next"}});function L(){return{ProjectsAndTasks:{title:R.projectsAndTasks,description:R.projectsAndTasksDescription},FullImport:{title:R.fullImport,description:R.fullImportDescription}}}function D(){k().A.setState({...k().A.state,isModalOpen:!0})}async function W(e){const{environment:t,userEmail:o,APIToken:s,flowId:a,spaceId:n}=e;if(!t.currentUser.id||!o||!s)return f().rG({message:"Invalid details"}),void P().V();const r=await C().callApi({eventName:"authenticateMondayUser",environment:t,data:{userId:t.currentUser.id,spaceId:n,userEmail:o,APIToken:s}});"failed"===r.type?(T()._$(t,{import_source:"monday.com",data:{import_type:"api",status:"failure",error:r.error},flowId:a}),console.error(r.error),f().Qg(r)):(T()._$(t,{import_source:"monday.com",data:{import_type:"api",status:"success"},flowId:a}),k().A.setState({...k().A.state,account:o}),f().rG({message:I().A.formatMessage(R.successfullyConnected)})),P().V()}async function O(e){const{environment:t,spaceId:o}=e,s=await C().callApi({eventName:"disconnectMonday",environment:t,data:{spaceId:o}});"failed"===s.type?f().Qg(s):(T().kO(t,{integration_name:"monday.com"}),"success"===s.type&&k().A.setState({...k().A.state,account:void 0,workspaces:[]}))}async function V(e){const{environment:t,spaceId:o}=e;k().A.setState({...k().A.state,isLoadingMondayWorkspaces:!0});const s=await C().callApi({eventName:"getMondayWorkspaces",environment:t,data:{spaceId:o}});"success"===s.type&&k().A.setState({...k().A.state,workspaces:s.data.workspaces,isLoadingMondayWorkspaces:!1})}async function _(e){const{environment:t,spaceId:o,selectedWorkspace:s}=e;if(!o)return;k().A.setState({...k().A.state,isLoadingProjects:!0});const a=await C().callApi({eventName:"getMondayFoldersAndBoards",environment:t,data:{spaceId:o,selectedWorkspace:s}});"success"===a.type&&k().A.setState({...k().A.state,mondayFoldersAndBoards:a.data.mondayFoldersAndBoards,isLoadingProjects:!1})}function z(e){var t,o;let{folderId:s,spaceId:a}=e;const n=k().A.state.selectedProjectsAndTeamspaces;k().A.setState({...k().A.state,selectedProjectsAndTeamspaces:{...n,[s]:{projects:(null===(t=n[s])||void 0===t?void 0:t.projects)||[],notionTeamspaceId:a,isEntireFolderSelected:null===(o=n[s])||void 0===o?void 0:o.isEntireFolderSelected}}})}async function N(e){const{environment:t,spaceStore:o,currentSpaceViewStore:s,teamsStores:n,flowId:r}=e,{appTemplatesSetupActions:l,appConfigs:c}=await v().Aw.load(),p=k().A.state.selectedWorkspace;if(!p)return;k().A.setState({...k().A.state,templateCreationInProgress:!0});const m={},u={},g=[],f=new Set;try{for(const e in k().A.state.selectedProjectsAndTeamspaces){const r=k().A.state.selectedProjectsAndTeamspaces[e].projects;if(0===r.length)continue;let i;g.push(...r.map((e=>e.mondayProjectId)));const d=k().A.state.selectedProjectsAndTeamspaces[e],{notionTeamspaceId:p}=d;if(!p)continue;f.add(p);const h=n.find((e=>e.id===d.notionTeamspaceId));if(i=h||o,!m[p]){const{serverCommitResult:e,performResult:o}=B().createAndCommit({environment:t,perform:e=>{const o={type:"preset",uri:a().tP};if("preset"===o.type&&!o.uri.startsWith("notion://wiki")){var n;const a=o.uri,r=null===(n=(0,x().BL)(c(),a))||void 0===n?void 0:n.uri;if(!r)return;const d=c().find((e=>e.uri===r));if(null==d?void 0:d.presets.find((e=>e.uri===a))){return l.initializeApp({environment:t,spaceViewStore:s,appParentStore:i,appUri:r,presetUri:a,transaction:e,from:"monday_import"})}return[]}},canUndo:!0,userAction:"importActions.importMonday"});m[p]=o,await e}u.hasOwnProperty(p)?u[p]=[...u[p],{mondayFolderId:e,projects:r}]:u[p]=[{mondayFolderId:e,projects:r}]}}catch(P){return void k().A.setState({...k().A.state,templateCreationInProgress:!1,currentTab:"failure"})}const y=[],A=j().default.state.currentSpaceViewStore;if(!A)return;const I=F().mD({environment:t,spaceStore:o,spaceViewStore:A,append:!0,mondayV2:(0,S().G)()});await I.deferred.promise;const b=I.pageId;k().A.setState({...k().A.state,loggerPageId:b});for(const[a,i]of Object.entries(u)){const e=m[a];e&&y.push({collectionViewBlocks:e.map((e=>({id:e.id,spaceId:(0,d().e)(o.id)}))),notionTeamSpaceId:a,mondayProjectsAndFolders:i})}T().Pd(t,{integration_name:"monday.com"});const C=(0,M().UT)(t,h,{importParams:y,loggerPageId:b,spaceId:o.id,flowId:r});k().A.setState({...k().A.state,templateCreationInProgress:!1,currentTab:"importingData"}),w().A.reset(),p&&function(e,t,o){try{T().mM(e,{import_source:"monday.com",data:t,flowId:o})}catch(s){i().log({level:"error",from:"mondayActions",type:"parallelMondayImport",error:{miscDataString:JSON.stringify({error:s,message:"Errored in tracking import_source_input event."})}})}}(t,{workspaceId:p,projects:g,numberOfTeamspacesUsed:f.size,userId:t.currentUser.id,spaceId:(0,d().e)(o.id)},r);for await(const a of C){if(!k().A.state.isModalOpen)break;if(a.error)return void k().A.setState({...k().A.state,currentTab:"failure"});"success"===a.taskStatus&&k().A.setState({...k().A.state,currentTab:"confirm",result:a.value.status,isComplete:!0})}}async function E(e){const{environment:t,spaceId:o,selectedWorkspace:s}=e;k().A.setState({...k().A.state,isLoadingHierarchy:!0,isLoadingBoards:!0});try{const e=await C().callApi({eventName:"getMondayFoldersWithHierarchy",environment:t,data:{spaceId:o,selectedWorkspace:s},headers:{}});if("success"===e.type){const a=e.data.mondayFoldersDetailsMap;let n,r={},i=1,l=!0,c=k().A.getState();for(;l&&c.selectedWorkspace===s&&"FullImport"===c.selectedImportType&&!c.templateCreationInProgress;){const e=await C().callApi({eventName:"getMondayBoards",environment:t,data:{spaceId:o,selectedWorkspace:s,page:i},headers:{}});if("success"!==e.type){q();break}n=e.data.mondayBoardsDetailsMap,r={...r,...n},l=e.data.hasMoreBoards;for(const[t,o]of Object.entries(n))a[o.folderId].boards.push(t);k().A.setState({...k().A.state,isLoadingHierarchy:!1,fetchedHierarchy:!0,mondayBoardsDetailsMap:r,mondayFoldersDetailsMap:a}),i++,c=k().A.getState()}k().A.setState({...k().A.state,isLoadingBoards:!1})}else q()}catch(a){q()}}function q(){k().A.setState({...k().A.state,isLoadingHierarchy:!1,isLoadingBoards:!1,fetchedHierarchy:!1})}function U(e){let{folderId:t,notionTeamspaceId:o,notionRootTableName:s}=e;k().A.setState({...k().A.state,selectedTeamspacesForFullImport:{...k().A.state.selectedTeamspacesForFullImport,[t]:{notionTeamspaceId:o,notionRootTableName:s}}})}function H(e){const{mondayFolderDetails:t,currentfolderId:o}=e,s=[],a=[o];for(;a.length>0;){const e=a.pop();if(!e)continue;const o=t[e];if(o&&o.subFolders)for(const t of o.subFolders)s.push(t),a.push(t)}return s}function Y(e){const{excludeProjectsAndTasks:t,board:o}=e;return t&&("task"===o.boardType||"project"===o.boardType)}function $(e){const{mondayFolderDetails:t,folderIds:o,excludeProjectsAndTasks:s,mondayBoardDetails:a}=e,n=[];for(;o.length>0;){const e=o.pop();if(!e)continue;const r=t[e];if(r&&r.boards)for(const t of r.boards)Y({excludeProjectsAndTasks:s,board:a[t]})||n.push(t)}return n}function K(e,t,o,s){return $({folderIds:[e,...H({currentfolderId:e,mondayFolderDetails:t})],mondayFolderDetails:t,mondayBoardDetails:o,excludeProjectsAndTasks:s}).length}function G(e,t,o,s,a){const n=$({folderIds:[e,...H({currentfolderId:e,mondayFolderDetails:o})],mondayFolderDetails:o,mondayBoardDetails:s,excludeProjectsAndTasks:a});let r=0;return n.forEach((e=>{t.has(e)&&(r+=1)})),r}async function J(e){const{environment:t,spaceStore:o,flowId:a,spaceViewStore:i}=e,d=k().A.state;if(!d.selectedWorkspace||!d.mondayFoldersDetailsMap)return;k().A.setState({...k().A.state,templateCreationInProgress:!0});const{selectedFolderIdsForFullImport:u,selectedBoardIdsForFullImport:h,mondayFoldersDetailsMap:x,mondayBoardsDetailsMap:v,excludeProjectsAndTasks:S}=d,j=Object.entries(d.mondayFoldersDetailsMap).flatMap((e=>{let[t,o]=e;return o.parent?[]:[t]})),C=new Map,P={notionTeamspaceId:o.getSpaceId(),notionRootTableName:p().NX},B=(e,t,o)=>{o.forEach((t=>{const o=u.has(t),s=x[t];if(o){const o={id:t,name:s.folderName,boards:[],folders:[]};B(o,s.boards,s.subFolders),e.folders.push(o)}else B(e,s.boards,s.subFolders)})),t.forEach((t=>{if(!h.has(t))return;const o=v[t];e.boards.push({id:t,name:o.name})}))};try{for(;j.length;){const e=j.pop();if(!e)break;const t=x[e];if(u.has(e)&&"null"!==e){const t=x[e],o={id:e,name:t.folderName,boards:[],folders:[]};B(o,t.boards,t.subFolders);const s=X(e,P),a=C.get(s)??{boards:new Array,folders:new Array};a.folders.push(o),C.set(s,a)}else{for(const e of t.boards){if(!h.has(e))continue;const o=v[e],s=X(t.folderId,P),a=C.get(s)??{boards:new Array,folders:new Array},n={id:e,name:o.name};a.boards.push(n),C.set(s,a)}j.push(...t.subFolders)}}}catch(W){return void k().A.setState({...k().A.state,templateCreationInProgress:!1,currentTab:"failure"})}const R=Array.from(C.entries(),(e=>{let[t,o]=e;return{notionRootTableId:t.notionTeamspaceId,notionRootTableName:t.notionRootTableName,mondayBoards:o.boards,mondayFolders:o.folders}})),L=F().mD({environment:t,spaceStore:o,spaceViewStore:i,append:!0,mondayV2:!0});await L.deferred.promise;const D=L.pageId;k().A.setState({...k().A.state,loggerPageId:D}),T().Pd(t,{integration_name:"monday.com"});try{const e=(0,M().UT)(t,g,{importParams:R,loggerPageId:D,spaceId:o.id,flowId:a,excludeProjectsAndTasks:S});k().A.setState({...k().A.state,templateCreationInProgress:!1,currentTab:"importingData"}),w().A.reset();for await(const t of e){if(!k().A.state.isModalOpen)break;if(t.error)throw k().A.setState({...k().A.state,currentTab:"failure",loggerPageId:D}),t.error}}catch(O){const e=O instanceof l().X5?O.body.clientData:void 0;if(e&&"code"in e&&"mondayImportError"===e.code){const e=I().A.formatMessage(F().DZ.importFailedWithError,{error:(0,m().A)(O).message});f().f1(e)}throw new Error((0,m().A)(O).message)}y().oo({url:(0,n().A)({pageId:D,pageModel:(0,r().Rr)({table:c().ev,id:D}),baseUrl:A().A.domainBaseUrl,pageVisitSource:s().y8.Import}),environment:t}),k().A.resetImport(),b().A.reset()}function X(e,t){const{selectedTeamspacesForFullImport:o,mondayFoldersDetailsMap:s}=k().A.state;let a=e;for(;a;){var n;if(a in o)return o[a];a=null===(n=s[a])||void 0===n?void 0:n.parent}return t}function Q(e){const t=new Set(k().A.state.selectedBoardIdsForFullImport);t.has(e)?t.delete(e):t.add(e),k().A.setState({...k().A.state,selectedBoardIdsForFullImport:t})}function Z(e,t,o,s){const a=k().A.state.selectedFolderIdsForFullImport.has(e);!function(e){const{mondayFolderDetails:t,currentfolderId:o,select:s,mondayBoardDetails:a,excludeProjectsAndTasks:n}=e,r=H({currentfolderId:o,mondayFolderDetails:t}),i=$({folderIds:[o,...r],mondayFolderDetails:t,mondayBoardDetails:a,excludeProjectsAndTasks:n}),{selectedFolderIdsForFullImport:l,selectedBoardIdsForFullImport:c}=k().A.state,d=(e,t)=>{t.forEach((t=>{s?e.add(t):e.delete(t)}))};d(l,r),d(c,i),k().A.setState({...k().A.state,selectedBoardIdsForFullImport:c,selectedFolderIdsForFullImport:l})}({currentfolderId:e,mondayFolderDetails:t,mondayBoardDetails:o,select:!a,excludeProjectsAndTasks:s});const n=new Set(k().A.state.selectedFolderIdsForFullImport);a?n.delete(e):n.add(e),k().A.setState({...k().A.state,selectedFolderIdsForFullImport:n})}function ee(e){const{currentfolderId:t,mondayFolderDetails:o,mondayBoardDetails:s,excludeProjectsAndTasks:a}=e,n=$({folderIds:[t,...H({currentfolderId:t,mondayFolderDetails:o})],mondayFolderDetails:o,mondayBoardDetails:s,excludeProjectsAndTasks:a});let r=!1;return n.forEach((e=>{Y({excludeProjectsAndTasks:a,board:s[e]})||(r=!0)})),r}},398391:(e,t,o)=>{o.d(t,{f:()=>a});o(944114),o(581454);class s extends(()=>o(757695))().default{getInitialState(){return{open:!1}}setFileMetadata(e,t,o){this.state.open&&this.setState({...this.state,fileName:e,fileUrl:t,fileSize:o})}setPreviewCollectionInfo(e){this.state.open&&this.setState({...this.state,previewCollectionInfo:e})}setLoading(e){this.state.open&&this.setState({...this.state,isLoading:e})}setError(e){this.state.open&&this.setState({...this.state,error:e})}nextStep(){this.state.open&&this.setState({...this.state,currentStepIndex:this.state.currentStepIndex+1})}previousStep(){this.state.open&&0!==this.state.currentStepIndex&&this.setState({...this.state,currentStepIndex:this.state.currentStepIndex-1})}setImportType(e){this.state.open&&this.setState({...this.state,importType:e})}setFirstRowAsHeader(){this.state.open&&this.setState({...this.state,firstRowAsHeader:!this.state.firstRowAsHeader})}setCsvData(e,t){if(!this.state.open)return;const o={...this.state,csvHeaders:[...e],csvSampleRows:t.map((e=>[...e]))};this.setState(o)}updatePropertyMapping(e,t){if(!this.state.open)return;const o=[...this.state.userPropertyMapping||[]],s=o.findIndex((t=>t.headerName===e));s>=0?o[s]={...o[s],propertyType:t}:o.push({headerName:e,propertyType:t}),this.setState({...this.state,userPropertyMapping:o})}open(e){this.setState({open:!0,currentStepIndex:0,fileName:"",fileUrl:"",fileSize:0,isLoading:!1,previewCollectionInfo:void 0,firstRowAsHeader:!0,importType:e,importLocation:"",teamspaceId:void 0,csvHeaders:void 0,csvSampleRows:void 0,userPropertyMapping:[]})}close(e){this.setState({...this.getInitialState()})}getCurrentStep(){if(!this.state.open)return;const e=["uploadFile"];return"import"===this.state.importType?e.push("mapFieldsForImport"):e.push("mapFieldsForMerge"),e.push("importing"),e[this.state.currentStepIndex]}setImportLocation(e){this.state.open&&this.setState({...this.state,importLocation:e})}}const a=new s;(0,o(604341).exposeDebugValue)("csvImportStore",a)},453529:(e,t,o)=>{o.d(t,{Ar:()=>R,Ay:()=>D,cz:()=>B});o(944114),o(898992),o(354520),o(581454),o(908872),o(844751);var s=o(296540),a=()=>o(484714),n=()=>o(56366),r=()=>o(401497),i=()=>o(158359),l=()=>o(452951),c=()=>o(449552),d=()=>o(464699),p=()=>o(959013),m=()=>o(100622),u=()=>o(534177),g=()=>o(284371),h=()=>o(696977),f=()=>o(351360),y=()=>o(92513),x=()=>o(848237),A=()=>o(898808),v=()=>o(493823),I=()=>o(249117),S=()=>o(710149),j=()=>o(125565),w=()=>o(21140),k=()=>o(709438),b=()=>o(936996),T=()=>o(69437),C=o(474848);const M=(0,p().YK)({selectWorkspace:{id:"asanaImporter.chooseWorkspace.chooseWorkspacePlaceholder",defaultMessage:"Choose a workspace"},selectProjectHeading:{id:"asanaImport.importsTab.chooseWorkspace.selectProjects",defaultMessage:"Choose projects to import"},mapTeamspacesDescription:{id:"asanaImport.importsTab.chooseWorkspace.tabDescription",defaultMessage:"You can give each Asana team a Notion teamspace to collaborate in. Each teamspace has a Projects database, where your imported projects will live."},loadingProjectsPlaceholder:{id:"asanaImport.importsTab.chooseWorkspace.loadingProjectsHelperText",defaultMessage:"Loading projects in the workspace..."},chooseTeamspaceOption:{id:"asanaImport.importsTab.chooseWorkspace.selectTeamspace",defaultMessage:"Choose a teamspace"},filterTeams:{id:"asanaImport.importsTab.chooseWorkspace.filterTeams",defaultMessage:"Filter teamspaces..."},filterWorkspaces:{id:"asanaImport.importsTab.chooseWorkspace.searchAsanaWorkspaces",defaultMessage:"Filter workspaces..."},newTeamspaceLabel:{id:"asanaImport.importsTab.chooseWorkspace.newTeamspace",defaultMessage:"New teamspace"},privateSpaceLabel:{id:"asanaImport.importsTab.chooseWorkspace.privateSpaceTitle",defaultMessage:"Private"},completedProjectLabel:{id:"asanaImport.importsTab.chooseWorkspace.completedHelperText",defaultMessage:" (Completed)"}});function F(e){let{asanaTeam:t}=e;const o=R(),a=(0,p().tz)(),r=(0,n().K8)((()=>y().A.getState()),[]),i=(0,n().K8)((()=>{var e;const t=null===(e=f().default.state.currentSpaceViewStore)||void 0===e||null===(e=e.getTeamsStores())||void 0===e?void 0:e.map((e=>e.canAddOrRemoveTopLevelPages()?{id:e.id,name:e.getName(),icon:(0,C.jsx)(A().x,{disabled:!0,store:e})}:null)).filter((e=>null!==e)),s=[];return t&&s.push(...t.map((e=>{var t;return{key:e.id,searchTerm:(null===(t=e.name)||void 0===t?void 0:t.split(" "))||void 0,icon:e.icon,name:e.name}}))),s.push({key:"private",searchTerm:["private"],icon:(0,c().g)(o.lockedIcon),name:a.formatMessage(M.privateSpaceLabel)}),s.push({key:"create",searchTerm:["New"],icon:(0,d().b)(o.plusIcon),name:a.formatMessage(M.newTeamspaceLabel)}),s}),[a,o.lockedIcon,o.plusIcon]),{importCompletedTasks:l,selectedProjectsAndTeamspaces:m}=r,u=(0,s.useMemo)((()=>m[t.gid]||{projects:[],notionTeamspaceId:void 0}),[m,t.gid]),[g,v]=(0,s.useState)(u.notionTeamspaceId),S=(0,n().K8)((()=>f().default.state.currentSpaceViewStore),[]),w=(0,s.useCallback)((e=>{if(g===e)return h().$8({teamId:t.gid,spaceId:null}),void v(void 0);if("create"===e)return void x().vn("asana_importer",{onClose:e=>{h().$8({teamId:t.gid,spaceId:e}),v(e)}});let o;if("private"===e){if(null==S||!S.id)return;o=S.id}else o=e;h().$8({teamId:t.gid,spaceId:o}),v(e)}),[null==S?void 0:S.id,t.gid,g]),k=(0,s.useCallback)((e=>{const o={...m[t.gid]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:s,projects:a}=o;let n=a;"all"===n&&(n=t.projects.map((e=>e.gid))),"in_complete"===n&&(n=t.projects.filter((e=>!e.completed)).map((e=>e.gid))),n=n.includes(e.gid)?n.filter((t=>t!==e.gid)):n.concat(e.gid),y().A.setState({...r,selectedProjectsAndTeamspaces:{...m,[t.gid]:{notionTeamspaceId:s,projects:n}}})}),[t.gid,t.projects,r,m]),b=(0,s.useMemo)((()=>{const{projects:e}=u;return 0!==e.length&&(e.length===t.projects.length||"partial")}),[u,t.projects]),T=(0,s.useCallback)((()=>{var e;let o=[];0===u.projects.length?(o=t.projects.filter((e=>!e.completed)).map((e=>e.gid)),0===o.length&&(o=t.projects.map((e=>e.gid)))):o=u.projects.length===t.projects.length?[]:t.projects.map((e=>e.gid)),y().A.setState({...r,selectedProjectsAndTeamspaces:{...m,[t.gid]:{notionTeamspaceId:null===(e=m[t.gid])||void 0===e?void 0:e.notionTeamspaceId,projects:o}}})}),[u.projects,t.projects,t.gid,r,m]),F=(0,s.useMemo)((()=>{const e=r.importCompletedTasks;let o=t.projects;return"in_complete"===u.projects?o=o.filter((e=>!e.completed)):"all"!==u.projects&&u.projects.length!==o.length&&(o=o.filter((e=>u.projects.includes(e.gid)))),{projects:o.length,tasks:o.reduce(((t,o)=>t+(e?o.task_counts.num_tasks:o.task_counts.num_incomplete_tasks)),0)}}),[u.projects,t.projects,r.importCompletedTasks]),[L,D]=(0,s.useState)(!1);return(0,C.jsx)("div",{style:o.asanaTeamSectionContainer,children:(0,C.jsxs)(I().xA,{gap:8,children:[(0,C.jsx)(I().LX,{row:1,col:1,children:(0,C.jsx)("div",{style:o.teamAndProjectsCollapse,children:(0,C.jsx)(P,{team:t,importCompletedTasks:l,collapsed:L,onToggle:()=>D((e=>!e)),checked:e=>"all"===u.projects||"in_complete"===u.projects&&!1===e.completed||u.projects.includes(e.gid),onSelectProject:k,onSelectGroup:T,groupCheckState:b})})}),(0,C.jsx)(I().LX,{row:1,col:2,children:(0,C.jsx)(B,{onSelectOption:w,options:i,currentOption:g,style:L?"compact":"full",children:(0,C.jsx)(j().A,{style:{fontSize:"14px",paddingLeft:L?"8px":0},children:(0,C.jsx)(p().sA,{id:"asanaImport.importsTab.chooseWorkspace.totalProjectsAndTasks",defaultMessage:"Import {nProjects} projects, {nTasks} tasks to",values:{nProjects:F.projects,nTasks:F.tasks}})})})})]})})}function P(e){let{team:t,collapsed:o,onToggle:n,importCompletedTasks:r,onSelectProject:l,onSelectGroup:c,groupCheckState:d,checked:g}=e;const f=R(),y=(0,p().tz)(),x=(0,a().v3)(),[A,I]=(0,s.useState)(!1);return(0,C.jsx)(b().A,{getIdentifier:e=>e.gid,onSelectRow:l,rows:t.projects,loadMoreButton:(0,u().O9)(t.nextPage)&&(0,C.jsx)(v().p,{style:{padding:0,width:"60%",height:20},hoveredStyle:{background:"transparent"},onClick:async()=>{I(!0),await h().Oh({team:t,environment:x}),I(!1)},children:A?(0,C.jsx)(S().A,{style:{height:14,width:"100%"}}):(0,C.jsxs)(C.Fragment,{children:[(0,i().P)(f.loadMoreArrowStyles),(0,C.jsx)(j().A,{style:f.loadMoreLabel,children:(0,C.jsx)(p().sA,{id:"asanaImport.importsTab.chooseWorkspace.loadMoreProjects",defaultMessage:"Load more projects"})})]})}),title:(0,C.jsx)("div",{style:{lineHeight:"20px",fontSize:"14px"},children:t.name}),renderRow:e=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(k().m,{color:e.color,size:14,style:{borderRadius:"15%"}}),(0,C.jsxs)(j().A,{style:{...e.completed?f.projectNameCompleted:{},maxWidth:220},children:[e.name,e.completed&&y.formatMessage(M.completedProjectLabel)]}),(0,C.jsxs)(j().A,{isSmall:!0,style:{color:m().XA.light.gray[400]},children:[r?e.task_counts.num_tasks:e.task_counts.num_incomplete_tasks,(0,C.jsx)(p().sA,{id:"asanaImport.importsTab.chooseWorkspace.tasksHelperText",defaultMessage:" tasks"})]})]}),onToggleGroup:n,onSelectGroup:c,collapsed:o,groupCheckedState:d,rowCheckedState:g})}function B(e){let{onSelectOption:t,options:o,currentOption:s,children:a,style:n}=e;const r=(0,p().tz)(),i=R();return(0,C.jsxs)(w().Ye,{flexDirection:"compact"===n?"row":"column",alignItems:"center",justifyContent:"center",style:i.teamSpaceContainer,children:[(0,l().Z)(i.arrowIconStyles),a,(0,C.jsx)(T().A,{onSelectOption:t,options:o,iconOnly:"compact"===n,currentOption:s,placeHolder:r.formatMessage(M.chooseTeamspaceOption),searchThreshold:5,buttonStyles:{maxWidth:300},iconStyles:i.menuChevonDownIcon,menuProps:{maxWidth:300,maxHeight:400,left:50},inputProps:{placeholder:r.formatMessage(M.filterTeams)}})]})}function R(){return(0,r().IS)((e=>({loadingRow:{gap:6,alignItems:"center",marginTop:4,height:19.6},workspaceSelectorButton:{paddingTop:8,paddingBottom:8,paddingLeft:8,paddingRight:8,opacity:1,width:376,border:`1px solid ${m().XA.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8},projectNameCompleted:{color:e.lightTextColor},menuChevonDownIcon:{width:12,height:12,marginLeft:4,fill:e.lightIconColor},plusIcon:{color:e.mediumIconColor,width:16,height:16},lockedIcon:{color:e.mediumIconColor,width:12.5,height:12.5},asanaTeamSectionContainer:{marginBottom:20},teamAndProjectsCollapse:{paddingTop:8,paddingBottom:8},teamSpaceContainer:{height:"100%",border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,padding:"8px 2px",gap:8,position:"relative"},arrowIconStyles:{position:"absolute",top:"50%",left:0,transform:"translate(-64%, -50%)",width:12,height:28,color:e.selectLightGray[700],backgroundColor:e.modalBackground},loadMoreLabel:{color:e.selectLightGray[700]},loadMoreArrowStyles:{width:12,color:e.selectLightGray[700],marginRight:8,marginLeft:1},teamSpaceLabel:{display:"flex",justifyContent:"center",alignItems:"center",width:16,height:16,borderRadius:"0.25em",backgroundColor:m().XA.light.gray[75]}})),[])}function L(){const e=R();return(0,C.jsxs)(I().xA,{gap:8,children:[(0,C.jsxs)(I().LX,{row:1,col:1,children:[(0,C.jsxs)(w().Ye,{style:{paddingLeft:6,paddingRight:8,...e.loadingRow},children:[(0,C.jsx)(S().A,{style:{height:14,width:34}}),(0,C.jsx)(S().A,{style:{height:14,width:200}})]}),(0,C.jsx)(S().A,{style:{marginLeft:40,marginTop:10,height:14,width:180}}),(0,C.jsx)(S().A,{style:{marginLeft:40,marginTop:12,height:14,width:240}})]}),(0,C.jsx)(I().LX,{row:1,col:2,children:(0,C.jsxs)(w().Ye,{flexDirection:"column",alignItems:"center",children:[(0,C.jsx)(S().A,{style:{marginLeft:40,marginTop:12,height:14,width:200}}),(0,C.jsx)(S().A,{style:{marginLeft:40,marginTop:12,height:14,width:140}})]})})]})}const D=function(){const e=(0,a().v3)(),t=(0,p().tz)(),r=R(),i=(0,n().K8)((()=>y().A.getState()),[]),{isLoadingProjects:l,selectedWorkspace:c,teamsAndProjects:d,workspaces:m}=i;return(0,s.useEffect)((()=>{c&&h().D5({selectedWorkspace:c,environment:e}).catch((()=>{}))}),[c,e]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(w().Ye,{alignItems:"center",gap:8,children:[(0,C.jsx)("img",{src:o(148307).A.images.import.asanaPng,width:16,height:16}),(0,C.jsx)(T().A,{searchThreshold:5,onSelectOption:e=>{y().A.setState({...i,selectedProjectsAndTeamspaces:{},selectedWorkspace:e})},options:m.map((e=>({key:e.gid,name:e.name,searchTerm:e.name.split(" ")}))),currentOption:c,placeHolder:t.formatMessage(M.selectWorkspace),inputProps:{placeholder:t.formatMessage(M.filterWorkspaces)},buttonStyles:r.workspaceSelectorButton,iconStyles:r.menuChevonDownIcon})]}),c&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(j().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:(0,C.jsx)(p().sA,{...M.selectProjectHeading})}),(0,C.jsx)(j().A,{style:{font:"SF Pro",fontWeight:g().Wy.regular,fontSize:g().J.UIRegular.desktop,lineHeight:"19.6px",whiteSpace:"normal",wordWrap:"break-word",paddingTop:4,paddingBottom:20},children:(0,C.jsx)(p().sA,{...M.mapTeamspacesDescription})})]}),l?(0,C.jsx)(L,{}):d.filter((e=>0!==e.projects.length)).map((e=>(0,C.jsx)(F,{asanaTeam:e},`${e.gid}-table`)))]})}},468093:(e,t,o)=>{o.d(t,{W:()=>le,A:()=>ce});o(898992),o(672577),o(737550);var s=o(296540),a=()=>o(484714),n=()=>o(56366),r=()=>o(401497),i=()=>o(148307),l=()=>o(959013),c=()=>o(284371),d=()=>o(388416),p=()=>o(351360),m=()=>o(479199),u=()=>o(331542),g=()=>o(864943),h=()=>o(204063),f=()=>o(125565),y=()=>o(690197),x=(o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454),()=>o(21140)),A=(o(354520),o(908872),()=>o(34373)),v=()=>o(124858),I=()=>o(449552),S=()=>o(464699),j=()=>o(100622),w=()=>o(848237),k=()=>o(898808),b=()=>o(493823),T=()=>o(625830),C=()=>o(249117),M=()=>o(859428),F=()=>o(453529),P=()=>o(412532),B=()=>o(452951),R=()=>o(285790),L=()=>o(831310),D=()=>o(668725),W=()=>o(722872),O=()=>o(760217),V=()=>o(406699),_=()=>o(928600),z=()=>o(939740),N=()=>o(89924),E=o(474848);const q=function(){const e=(0,a().v3)(),t=(0,l().tz)(),o=(0,n().K8)((()=>p().default.state.currentSpaceStore),[]),r=(0,n().K8)((()=>m().A.getState()),[]),{workspaces:i,selectedWorkspace:c,selectedImportType:u}=r;return(0,s.useEffect)((()=>{}),[u,c,e,null==o?void 0:o.id]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(f().A,{isSmall:!0,style:{paddingTop:4,paddingBottom:4},children:(0,E.jsx)(l().sA,{id:"mondayImport.importsTab.selectData.workspaceChoiceHelperText",defaultMessage:"Only one workspace can be imported at a time."})}),(0,E.jsx)(U,{onSelectOption:e=>{m().A.setState({...r,selectedProjectsAndTeamspaces:{},selectedBoardIdsForFullImport:new Set,selectedFolderIdsForFullImport:new Set,selectedTeamspacesForFullImport:{},fetchedHierarchy:!1,mondayFoldersDetailsMap:{},mondayBoardsDetailsMap:{},selectedWorkspace:e})},options:i.map((e=>({key:e.id,label:e.name}))),currentOption:r.selectedWorkspace,placeHolder:t.formatMessage(d().$b.selectWorkSpaceV1)}),(0,E.jsx)(Y,{})]})};function U(e){var t;const{onSelectOption:o,options:a,currentOption:n,placeHolder:i,narrow:p,allowSearch:m,shouldBeDisabled:u}=e,g=(0,l().tz)(),[h,y]=(0,s.useState)(""),x=null===(t=a.find((e=>{let{key:t}=e;return t===n})))||void 0===t?void 0:t.label,A=(0,r().IS)((e=>({icon:{width:12,height:12,marginLeft:4,fill:e.lightIconColor}})),[]);return(0,E.jsx)(V().Ay,{popupType:V().z7.Popup,placementToOrigin:V().sx.Bottom,disabled:u,renderOrigin:e=>(0,E.jsxs)(b().p,{...e,style:{paddingTop:p?2:8,paddingBottom:p?2:8,paddingLeft:8,paddingRight:8,opacity:1,width:250,border:`1px solid ${j().XA.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8,background:n?void 0:j().XA.light.gray[75],color:n?void 0:j().XA.light.gray[300]},disabled:!1,children:[(0,E.jsx)(f().A,{style:{textOverflow:"ellipsis"},children:x||i}),(0,D().b)(A.icon)]}),render:e=>{const t={menuType:W().gu.Popup,width:250,left:50},s=[{key:"mondayImport.dropdown.menuList",render:e=>(0,E.jsx)(N().A,{...e}),items:(h.trim()?a.filter((e=>{var t;return null===(t=e.searchTerm)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase())})):a).map((t=>{let{key:s,label:a}=t;return{key:s,action:()=>{o(s),e.close()},render:e=>(0,E.jsx)(O().A,{...e,title:a,shouldWrapCaption:!0,right:x===a?(0,E.jsx)("div",{style:{width:14},children:(0,L().o)()}):void 0})}}))}];return(0,E.jsxs)(E.Fragment,{children:[m?(0,E.jsx)("input",{style:{width:"100%",borderRadius:0,backgroundColor:j().XA.light.gray[200],paddingTop:2,paddingBottom:2,paddingLeft:8,paddingRight:8,opacity:1,border:`1px solid ${j().XA.light.gray[100]}`,justifyContent:"space-between",background:j().XA.light.gray[75],fontSize:c().J.UIRegular.desktop,textOverflow:"ellipses"},placeholder:g.formatMessage(d().$b.chooseTeamspace),onChange:e=>y(e.target.value),value:h}):(0,E.jsx)(E.Fragment,{}),(0,E.jsx)(_().A,{...t,children:(0,E.jsx)(z().Ay,{type:z().Oh.Vertical,sections:s,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})]})}})}var H=()=>o(317182);const Y=function(){const e=(0,a().v3)(),t=(0,n().K8)((()=>p().default.state.currentSpaceStore),[]),o=(0,n().K8)((()=>m().A.getState()),[]),{selectedWorkspace:r,mondayFoldersAndBoards:i}=o;return(0,s.useEffect)((()=>{r&&d().g3({environment:e,spaceId:null==t?void 0:t.id,selectedWorkspace:r}).catch((()=>{}))}),[r,e,null==t?void 0:t.id]),(0,E.jsxs)(E.Fragment,{children:[o.selectedWorkspace?(0,E.jsx)(f().A,{style:{fontWeight:c().Wy.semibold,marginTop:18},children:(0,E.jsx)(l().sA,{id:"mondayImport.importsTab.selectData.selectProjects",defaultMessage:"Select projects"})}):(0,E.jsx)(E.Fragment,{}),o.isLoadingProjects?(0,E.jsxs)(x().Ye,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,E.jsx)(u().A,{size:"sm"}),(0,E.jsx)(f().A,{isSmall:!0,style:{color:j().XA.light.gray[400]},children:(0,E.jsx)(l().sA,{id:"mondayImport.importsTab.selectData.loadingProjectsHelperText",defaultMessage:"Loading projects in the workspace..."})})]}):null==i?void 0:i.map((e=>(0,E.jsx)($,{mondayFolderAndBoards:e},`${e.folderId}-table`)))]})};function $(e){let{mondayFolderAndBoards:t}=e;const o=(0,r().DP)(),a=(0,l().tz)(),i=(0,n().K8)((()=>m().A.getState()),[]),[u,g]=(0,s.useState)(),h=(0,n().K8)((()=>p().default.state.currentSpaceViewStore),[]),y=(0,n().K8)((()=>{const e=null==h?void 0:h.getTeamsStores();return null==e?void 0:e.map((e=>e.canAddOrRemoveTopLevelPages()?{id:e.id,name:e.getName(),icon:(0,E.jsx)(k().x,{disabled:!0,store:e})}:null)).filter((e=>null!==e))}),[h]);(0,s.useEffect)((()=>{if(!y||!h)return;if(!i.selectedProjectsAndTeamspaces[t.folderId]){g("private"),d().No({folderId:t.folderId,spaceId:null==h?void 0:h.id});for(const s of y){var e,o;if((null===(e=s.name)||void 0===e?void 0:e.toLowerCase())===(null===(o=t.folderName)||void 0===o?void 0:o.toLowerCase())){g(s.id),d().No({folderId:t.folderId,spaceId:s.id});break}}}}),[y,t,h,i.selectedProjectsAndTeamspaces,g]);const A=[{key:"private",searchTerm:"private",label:(0,E.jsxs)(x().Ye,{alignItems:"center",style:{gap:8},children:[(0,E.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:16,height:16,borderRadius:"0.25em",backgroundColor:j().XA.light.gray[75]},children:(0,I().g)({color:o.mediumIconColor,width:12.5,height:12.5})}),(0,E.jsx)(f().A,{style:{fontWeight:c().Wy.regular},children:a.formatMessage(d().$b.privateSpaceLabel)})]})}];y&&A.push(...y.map((e=>({key:e.id,searchTerm:e.name,label:(0,E.jsxs)(x().Ye,{alignItems:"center",style:{gap:8},children:[e.icon,e.name]})})))),A.push({key:"create",searchTerm:"New teamspace",label:(0,E.jsxs)(x().Ye,{alignItems:"center",style:{gap:4},children:[(0,S().b)({color:o.mediumIconColor,width:16,height:16}),(0,E.jsx)(f().A,{children:a.formatMessage(d().$b.newTeamspaceLabel)})]})});const v=!(t.projects.length||t.taskBoards.length);return(0,E.jsx)(M().A,{disableTooltip:!v,renderTooltip:()=>(0,E.jsx)(f().A,{style:{color:j().Ay.white},isSmall:!0,children:(0,E.jsx)(l().sA,{id:"mondayImport.importsTab.selectData.tooltipForDisabledFolder",defaultMessage:"This folder has no boards with Item type Projects or Tasks. Other types are not supported."})}),render:e=>(0,E.jsx)("div",{...e,children:(0,E.jsx)(G,{mondayFolderAndBoards:t,teamsOptions:A,setSelectedTeam:g,selectedTeam:u,mondayImportStoreState:i})})})}function K(e){let{collapsed:t,mondayFolderAndBoards:o,mondayImportStoreState:s,isMondayV2Flow:a}=e;if(t)return[];const n=o.projects.map((e=>({key:e.id,columns:[(0,E.jsxs)(x().Ye,{alignItems:"center",gap:6,style:{marginLeft:20},children:[(0,E.jsx)(T().A,{style:{marginRight:2},onClick:()=>{const t={...s.selectedProjectsAndTeamspaces[o.folderId]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:a,projects:n}=t;let r;r=n.find((t=>t.mondayProjectId===e.id))?n.filter((t=>t.mondayProjectId!==e.id)):n.concat({name:e.name,mondayProjectId:e.id,mondayBoardId:e.boardId,collectionType:"projects"}),m().A.setState({...s,selectedProjectsAndTeamspaces:{...s.selectedProjectsAndTeamspaces,[o.folderId]:{notionTeamspaceId:a,projects:r}}})},checked:{...s.selectedProjectsAndTeamspaces[o.folderId]||{projects:[],notionTeamspaceId:void 0}}.projects.some((t=>t.mondayProjectId===e.id)),size:14,checkSize:8}),(0,E.jsx)("div",{style:{width:240,wordWrap:"break-word"},children:(0,E.jsx)(f().A,{isMultiline:!0,style:a?{lineHeight:"20px",fontSize:"14px"}:{},children:e.name})})]},`${e.id}-container`)]}))),r=o.taskBoards.map((e=>({key:e.id,columns:[(0,E.jsxs)(x().Ye,{alignItems:"center",gap:6,style:{marginLeft:20},children:[(0,E.jsx)(T().A,{style:{marginRight:2},onClick:()=>{const t={...s.selectedProjectsAndTeamspaces[o.folderId]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:a,projects:n}=t;let r;r=n.find((t=>t.mondayProjectId===e.id))?n.filter((t=>t.mondayProjectId!==e.id)):n.concat({name:e.name,mondayProjectId:e.id,collectionType:"tasks"}),m().A.setState({...s,selectedProjectsAndTeamspaces:{...s.selectedProjectsAndTeamspaces,[o.folderId]:{notionTeamspaceId:a,projects:r}}})},checked:{...s.selectedProjectsAndTeamspaces[o.folderId]||{projects:[],notionTeamspaceId:void 0}}.projects.some((t=>t.mondayProjectId===e.id)),size:14,checkSize:8}),(0,E.jsx)("div",{style:{width:240,wordWrap:"break-word"},children:(0,E.jsx)(f().A,{isMultiline:!0,style:a?{lineHeight:"20px",fontSize:"14px"}:{},children:e.name})})]},`${e.id}-container`)]})));return[...n,...r]}function G(e){var t;let{mondayFolderAndBoards:o,selectedTeam:a,setSelectedTeam:c,teamsOptions:u,mondayImportStoreState:g}=e;const[h,y]=(0,s.useState)(!1),A=!(o.projects.length||o.taskBoards.length),v=(0,n().K8)((()=>p().default.state.currentSpaceViewStore),[]),I=(0,r().DP)(),S=(0,l().tz)(),j=(0,s.useCallback)((e=>{d().No({folderId:o.folderId,spaceId:e}),c(e)}),[o.folderId,c]),k=(0,s.useCallback)((e=>{if("create"===e)return void w().vn("monday_importer",{onClose:j});let t;if("private"===e){if(null==v||!v.id)return;t=v.id}else t=e;d().No({folderId:o.folderId,spaceId:t}),c(e)}),[o.folderId,c,j,null==v?void 0:v.id]);return(0,E.jsxs)(x().Ye,{style:A?{color:I.mediumTextColor,fill:I.mediumIconColor,opacity:.4,marginLeft:-18}:{marginLeft:-18},children:[(0,E.jsx)(R().A,{ariaLabel:S.formatMessage({id:"mondayImport.importsTab.selectData.collapseToggle",defaultMessage:"Collapse toggle"}),icon:P().l,onClick:()=>y((e=>!e)),style:{transform:h?"rotate(90deg)":"rotate(180deg)",marginRight:8,marginTop:15,width:10,height:10},hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},iconStyle:{width:12,height:12}}),(0,E.jsx)(H().A,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,E.jsxs)(x().Ye,{alignItems:"center",gap:2,children:[(0,E.jsx)(T().A,{style:{marginRight:4,height:14},disabled:A,checked:(()=>{const e={...g.selectedProjectsAndTeamspaces[o.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}};return Boolean(e.isEntireFolderSelected)})(),size:14,checkSize:8,onClick:()=>{const e={...g.selectedProjectsAndTeamspaces[o.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}},{notionTeamspaceId:t,isEntireFolderSelected:s}=e;let a,n;if(s)a=[],n=!1;else{a=[...o.projects.map((e=>({name:e.name,mondayProjectId:e.id,mondayBoardId:e.boardId,collectionType:"projects"}))),...o.taskBoards.map((e=>({name:e.name,mondayProjectId:e.id,collectionType:"tasks"})))],n=!0}m().A.setState({...g,selectedProjectsAndTeamspaces:{...g.selectedProjectsAndTeamspaces,[o.folderId]:{notionTeamspaceId:t,projects:a,isEntireFolderSelected:n}}})}}),(0,E.jsx)(f().A,{style:{width:280,textOverflow:"ellipsis"},children:o.folderName})]}),style:{width:300}},...u?[{key:"importInto",header:(0,E.jsxs)(x().Ye,{style:{alignItems:"center"},children:[(0,E.jsx)("div",{children:(0,E.jsx)(l().sA,{id:"mondayImport.importsTab.selectData.importInto",defaultMessage:"Import into"})}),(0,E.jsx)("div",{style:{marginRight:16,marginLeft:8},children:(0,B().Z)({width:12})}),(0,E.jsxs)(x().Ye,{style:{alignItems:"center",gap:8},children:[(0,E.jsx)("img",{src:i().A.emails.notionLogoBlackSmallPng,height:18}),(0,E.jsx)(U,{options:u,onSelectOption:k,currentOption:null===(t=u.find((e=>e.key===a)))||void 0===t?void 0:t.key,narrow:!0,allowSearch:!0,placeHolder:S.formatMessage({id:"mondayImport.importsTab.selectData.selectATeamspace",defaultMessage:"Select a teamspace"}),shouldBeDisabled:A})]})]}),style:{width:"50%"}}]:[]],rows:K({collapsed:h,mondayFolderAndBoards:o,mondayImportStoreState:g,isMondayV2Flow:!1})})]})}var J=()=>o(702796);function X(){const e=(0,n().K8)((()=>m().A.getState()),[]),t=(0,F().Ar)(),o=(0,l().tz)(),s=(0,n().K8)((()=>{var e;const s=null===(e=p().default.state.currentSpaceViewStore)||void 0===e||null===(e=e.getTeamsStores())||void 0===e?void 0:e.map((e=>e.canAddOrRemoveTopLevelPages()?{id:e.id,name:e.getName(),icon:(0,E.jsx)(k().x,{disabled:!0,store:e})}:null)).filter((e=>null!==e)),a=[];return s&&a.push(...s.map((e=>{var t;return{key:e.id,searchTerm:(null===(t=e.name)||void 0===t?void 0:t.split(" "))||void 0,icon:e.icon,name:e.name}}))),a.push({key:"private",searchTerm:["private"],icon:(0,I().g)(t.lockedIcon),name:o.formatMessage(d().$b.privateSpaceLabel)}),a.push({key:"create",searchTerm:["New"],icon:(0,S().b)(t.plusIcon),name:o.formatMessage(d().$b.newTeamspaceLabel)}),a}),[o,t.lockedIcon,t.plusIcon]),{mondayFoldersDetailsMap:a,selectedImportType:r,isLoadingHierarchy:i,mondayFoldersAndBoards:c,isLoadingProjects:g}=e;return"FullImport"===r?i?(0,E.jsxs)(x().Ye,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,E.jsx)(u().A,{size:"sm"}),(0,E.jsx)(f().A,{isSmall:!0,style:{color:j().XA.light.gray[400]},children:(0,E.jsx)(l().sA,{id:"mondayImport.importsTab.selectData.loadingBoardsHelperText",defaultMessage:"Loading boards in the workspace..."})})]}):(0,E.jsx)(E.Fragment,{children:Object.entries(a).filter((e=>{let[,t]=e;return!t.parent})).map((e=>{let[t,o]=e;return(0,E.jsx)(Z,{currentFolderId:o.folderId,notionTeamspaceOptions:s},`${t}-table`)}))}):"ProjectsAndTasks"===r?g?(0,E.jsxs)(x().Ye,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,E.jsx)(u().A,{size:"sm"}),(0,E.jsx)(f().A,{isSmall:!0,style:{color:j().XA.light.gray[400]},children:(0,E.jsx)(l().sA,{id:"mondayImport.importsTab.selectData.loadingProjectsHelperText",defaultMessage:"Loading projects in the workspace..."})})]}):(0,E.jsx)(E.Fragment,{children:null==c?void 0:c.map((e=>(0,E.jsx)(ee,{mondayFolderAndBoards:e,notionTeamspaceOptions:s},e.folderId)))}):null}const Q=function(){const e=(0,a().v3)(),t=(0,n().K8)((()=>p().default.state.currentSpaceStore),[]),s=(0,n().K8)((()=>m().A.getState()),[]),{selectedWorkspace:r,fetchedHierarchy:i,selectedImportType:l,isLoadingHierarchy:c}=s;return(0,o(187174).Yb)((async()=>{if(r&&l&&t)if("FullImport"===l){if(c||i)return;await d().nM({environment:e,spaceId:t.getSpaceId(),selectedWorkspace:r})}else"ProjectsAndTasks"===l&&await d().g3({environment:e,spaceId:null==t?void 0:t.id,selectedWorkspace:r})}),[e,i,c,l,r,t]),(0,E.jsx)(X,{})};function Z(e){let{currentFolderId:t,notionTeamspaceOptions:o}=e;const a=(0,r().DP)(),i=(0,l().tz)(),[c,g]=(0,s.useState)(!1),[h,y]=(0,s.useState)(),I=(0,n().K8)((()=>m().A.getState()),[]),{mondayFoldersDetailsMap:S,mondayBoardsDetailsMap:k,excludeProjectsAndTasks:b,selectedBoardIdsForFullImport:P,selectedFolderIdsForFullImport:B,isLoadingBoards:R}=I,L=null==S?void 0:S[t],D=(0,n().K8)((()=>p().default.state.currentSpaceViewStore),[]);(0,s.useEffect)((()=>{if(!D||!L||!D.getSpaceId())return;I.selectedFolderIdsForFullImport.has(L.folderId)||y("private")}),[L,D,I.selectedFolderIdsForFullImport]);const W=(0,s.useCallback)((e=>{L&&(d().Mi({folderId:L.folderId,notionTeamspaceId:e,notionRootTableName:"team"}),y(e))}),[L]),O=(0,s.useCallback)((e=>{if(L)if("create"!==e){if("private"===e){if(null==D||!D.getSpaceId()||!L)return;d().Mi({folderId:L.folderId,notionTeamspaceId:D.getSpaceId(),notionRootTableName:"space"})}else d().Mi({folderId:L.folderId,notionTeamspaceId:e,notionRootTableName:"team"});y(e)}else w().vn("monday_importer",{onClose:W})}),[L,W,D]),V=(0,s.useMemo)((()=>B?{boardsCount:d().Wh(t,P,S,k,b)}:{boardsCount:0}),[t,b,k,S,P,B]),_=(0,s.useMemo)((()=>({boardsCount:d().nP(t,S,k,b)})),[t,b,k,S]),z=!(L.boards.length||L.subFolders.length),N=(0,s.useMemo)((()=>d().p7({currentfolderId:t,mondayFolderDetails:S,mondayBoardDetails:k,excludeProjectsAndTasks:b})),[t,b,k,S]),q={color:a.mediumTextColor,fill:a.mediumIconColor,opacity:.4};function U(e){let{mondayFoldersMap:t,mondayBoardsMap:o,currentFolderId:s,excludeProjectsAndTasks:n}=e;if(c)return[];const r=t[s];return[...r.boards.map((e=>{const t=o[e];if(!t||!r)return null;const s=d().dJ({excludeProjectsAndTasks:n,board:t});return{key:e,columns:[(0,E.jsxs)(x().Ye,{alignItems:"center",gap:6,style:{marginLeft:20},children:[(0,E.jsx)(T().A,{style:s?{color:a.mediumTextColor,fill:a.mediumIconColor,opacity:.4,marginRight:2}:{marginRight:2},onClick:()=>{d().$A(e)},checked:P.has(e),size:14,checkSize:8,disabled:s}),(0,E.jsx)(M().A,{disableTooltip:!s,renderTooltip:()=>(0,E.jsx)(f().A,{style:{color:j().Ay.white},isSmall:!0,children:i.formatMessage(d().$b.projectsAndTasksExcludedToolTip)}),render:e=>(0,E.jsx)("div",{...e,children:(0,E.jsx)("div",{style:s?{color:a.mediumTextColor,fill:a.mediumIconColor,opacity:.4,width:240,wordWrap:"break-word"}:{width:240,wordWrap:"break-word"},children:(0,E.jsxs)(f().A,{style:{lineHeight:"20px",fontSize:"14px"},children:[(0,E.jsx)("div",{style:{display:"inline-block",paddingRight:"4px"},children:(0,A().k)({display:"inline-block",color:a.mediumIconColor,width:12.5,height:12.5})}),t.name]})})})})]},`${e}-container`)]}})).filter((e=>null!==e)),...r.subFolders.map((e=>{const s=t[e];return s?{key:e,columns:[(0,E.jsx)(x().Ye,{alignItems:"center",gap:6,style:{marginLeft:20,marginTop:"4px"},children:(0,E.jsx)(H().A,{hideTopBorderForHeader:!0,tableStyle:{borderRadius:2,borderTop:void 0,borderBottom:void 0},cellStyle:{paddingTop:4,paddingBottom:4,verticalAlign:"middle"},rowStyle:{borderTop:void 0},columns:[{key:"team",header:(0,E.jsxs)(x().Ye,{alignItems:"center",gap:2,children:[(0,E.jsx)(T().A,{style:R?{...q,marginRight:4,height:14}:{marginRight:4,height:14},checked:B.has(e),size:14,checkSize:8,disabled:R,onClick:()=>d().TJ(e,t,o,n)}),(0,v().E)({display:"inline-block",color:a.mediumIconColor,width:12.5,height:12.5}),(0,E.jsx)(f().A,{style:{width:280,textOverflow:"ellipsis"},children:s.folderName})]}),style:{width:300,paddingBottom:0}}],rows:U({mondayFoldersMap:t,mondayBoardsMap:o,currentFolderId:e,excludeProjectsAndTasks:n})})},`${e}-container`)]}:null})).filter((e=>null!==e)).flat()]}return L&&k&&N?(0,E.jsx)(M().A,{disableTooltip:!z,renderTooltip:()=>(0,E.jsx)(f().A,{style:{color:j().Ay.white},isSmall:!0,children:i.formatMessage(d().$b.noBoardsTooltipMessage)}),render:e=>{var t;return(0,E.jsx)("div",{...e,children:(0,E.jsx)("div",{style:{marginBottom:10},children:(0,E.jsxs)(C().xA,{gap:8,children:[(0,E.jsx)(C().LX,{row:1,col:1,children:(0,E.jsx)(te,{shouldBeDisabled:z,collapsed:c,onCollapse:()=>g((e=>!e)),columns:[{key:"team",header:(0,E.jsxs)(x().Ye,{alignItems:"center",gap:2,children:[(0,E.jsx)(T().A,{style:{marginRight:4,height:14},disabled:z||R,checked:I.selectedFolderIdsForFullImport.has(L.folderId),size:14,checkSize:8,onClick:()=>d().TJ(L.folderId,S,k,b)}),(0,v().E)({height:12,width:12,display:"inline-block"}),(0,E.jsxs)(x().Ye,{alignItems:"center",gap:6,children:[(0,E.jsx)(f().A,{style:R?{...q,textOverflow:"ellipsis"}:{textOverflow:"ellipsis"},children:L.folderName}),R&&(0,E.jsx)(u().A,{size:"sm"}),(0,E.jsxs)(f().A,{isSmall:!0,children:[_.boardsCount,i.formatMessage(d().$b.boardsKeyWord)]})]})]}),style:{width:300,paddingBottom:0}}],rows:U({mondayFoldersMap:S,mondayBoardsMap:k,currentFolderId:L.folderId,excludeProjectsAndTasks:b})})}),(0,E.jsx)(C().LX,{row:1,col:2,children:(0,E.jsx)(F().cz,{onSelectOption:O,options:o,currentOption:null===(t=o.find((e=>e.key===h)))||void 0===t?void 0:t.key,style:c?"compact":"full",children:(0,E.jsx)(f().A,{style:{fontSize:"14px",paddingLeft:c?"8px":0},children:(0,E.jsx)(l().sA,{id:"mondayImport.importsTab.chooseWorkspace.totalBoards",defaultMessage:"Import {boardsCount} boards to",values:{boardsCount:V.boardsCount}})})})})]})})})}}):null}function ee(e){let{mondayFolderAndBoards:t,notionTeamspaceOptions:o}=e;const a=(0,F().Ar)(),[r,i]=(0,s.useState)(!1),[c,u]=(0,s.useState)(),g=(0,n().K8)((()=>m().A.getState()),[]),h=(0,n().K8)((()=>p().default.state.currentSpaceViewStore),[]),y=(0,n().K8)((()=>{const e=null==h?void 0:h.getTeamsStores();return null==e?void 0:e.map((e=>({id:e.id,name:e.getName(),icon:(0,E.jsx)(k().x,{disabled:!0,store:e})})))}),[h]);(0,s.useEffect)((()=>{if(!y||!h)return;if(!g.selectedProjectsAndTeamspaces[t.folderId]){u("private"),d().No({folderId:t.folderId,spaceId:null==h?void 0:h.id});for(const s of y){var e,o;if((null===(e=s.name)||void 0===e?void 0:e.toLowerCase())===(null===(o=t.folderName)||void 0===o?void 0:o.toLowerCase())){u(s.id),d().No({folderId:t.folderId,spaceId:s.id});break}}}}),[t,h,g.selectedProjectsAndTeamspaces,y]);const A=!(t.projects.length||t.taskBoards.length),v=(0,s.useCallback)((e=>{d().No({folderId:t.folderId,spaceId:e}),u(e)}),[t.folderId]),I=(0,s.useCallback)((e=>{if("create"===e)return void w().vn("monday_importer",{onClose:v});let o;if("private"===e){if(null==h||!h.id)return;o=h.id}else o=e;d().No({folderId:t.folderId,spaceId:o}),u(e)}),[null==h?void 0:h.id,t.folderId,v]),S=(0,l().tz)(),b=(0,s.useMemo)((()=>({projectsCount:t.projects.length,tasksCount:t.taskBoards.length})),[t.projects.length,t.taskBoards.length]),P=(0,s.useMemo)((()=>{var e;const o=null===(e=g.selectedProjectsAndTeamspaces[t.folderId])||void 0===e?void 0:e.projects,[s,a]=o?o.reduce(((e,t)=>{let[o,s]=e;return"projects"===t.collectionType?[o+1,s]:[o,s+1]}),[0,0]):[0,0];return{projectsCount:s,tasksCount:a}}),[t.folderId,g.selectedProjectsAndTeamspaces]);return(0,E.jsx)(M().A,{disableTooltip:!A,renderTooltip:()=>(0,E.jsx)(f().A,{style:{color:j().Ay.white},isSmall:!0,children:(0,E.jsx)(l().sA,{id:"mondayImport.importsTab.selectData.tooltipForDisabledFolder",defaultMessage:"This folder has no boards with Item type Projects or Tasks. Other types are not supported."})}),render:e=>{var s;return(0,E.jsx)("div",{...e,children:(0,E.jsx)("div",{style:a.asanaTeamSectionContainer,children:(0,E.jsxs)(C().xA,{gap:8,children:[(0,E.jsx)(C().LX,{row:1,col:1,children:(0,E.jsx)(te,{shouldBeDisabled:A,collapsed:r,onCollapse:()=>i((e=>!e)),columns:[{key:"team",header:(0,E.jsxs)(x().Ye,{alignItems:"center",gap:2,children:[(0,E.jsx)(T().A,{style:{marginRight:4,height:14},disabled:A,checked:(()=>{const e={...g.selectedProjectsAndTeamspaces[t.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}};return Boolean(e.isEntireFolderSelected)})(),size:14,checkSize:8,onClick:()=>{const e={...g.selectedProjectsAndTeamspaces[t.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}},{notionTeamspaceId:o,isEntireFolderSelected:s}=e;let a,n;if(s)a=[],n=!1;else{a=[...t.projects.map((e=>({name:e.name,mondayProjectId:e.id,mondayBoardId:e.boardId,collectionType:"projects"}))),...t.taskBoards.map((e=>({name:e.name,mondayProjectId:e.id,collectionType:"tasks"})))],n=!0}m().A.setState({...g,selectedProjectsAndTeamspaces:{...g.selectedProjectsAndTeamspaces,[t.folderId]:{notionTeamspaceId:o,projects:a,isEntireFolderSelected:n}}})}}),(0,E.jsxs)(x().Ye,{alignItems:"center",gap:6,children:[(0,E.jsx)(f().A,{style:{textOverflow:"ellipsis"},children:t.folderName}),(0,E.jsx)(M().A,{renderTooltip:()=>(0,E.jsx)(f().A,{style:{color:j().Ay.white},isSmall:!0,children:S.formatMessage(d().$b.projectsAndTasksCountTooltip)}),render:e=>(0,E.jsx)("div",{...e,children:(0,E.jsxs)(f().A,{isSmall:!0,children:[b.projectsCount+b.tasksCount,S.formatMessage(d().$b.projectsKeyWord)]})})})]})]}),style:{width:300,paddingBottom:0}}],rows:K({collapsed:r,mondayFolderAndBoards:t,mondayImportStoreState:g,isMondayV2Flow:!0})})}),(0,E.jsx)(C().LX,{row:1,col:2,children:(0,E.jsx)(F().cz,{onSelectOption:I,options:o,currentOption:null===(s=o.find((e=>e.key===c)))||void 0===s?void 0:s.key,style:r?"compact":"full",children:(0,E.jsx)(f().A,{style:{fontSize:"14px",paddingLeft:r?"8px":0},children:(0,E.jsx)(l().sA,{id:"mondayImport.importsTab.chooseWorkspace.totalprojectsAnsTasks",defaultMessage:"Import {projectsCount} Projects to",values:{projectsCount:P.projectsCount+P.tasksCount}})})})})]})})})}})}function te(e){let{columns:t,rows:o,shouldBeDisabled:s,collapsed:a,onCollapse:n}=e;const i=(0,r().DP)(),l=(0,F().Ar)();return(0,E.jsx)("div",{style:l.teamAndProjectsCollapse,children:(0,E.jsxs)(x().Ye,{style:s?{color:i.mediumTextColor,fill:i.mediumIconColor,opacity:.4}:{},children:[(0,E.jsx)(b().p,{onClick:()=>n(),style:{gap:12},pressedStyle:{background:"transparent"},iconStyle:{marginRight:0,marginTop:10},ignoreLocalHoverState:!0,icon:e=>(0,E.jsx)(J().A,{disabled:!0,style:{...e,pointerEvents:"none"},isSidebar:!1,open:!a,fill:!1,onClick:e=>{e.stopPropagation(),n()},icon:"chevron"})}),(0,E.jsx)(H().A,{hideTopBorderForHeader:!0,tableStyle:{borderRadius:2,borderTop:void 0,borderBottom:void 0},cellStyle:{paddingTop:4,paddingBottom:4,verticalAlign:"middle"},rowStyle:{borderTop:void 0},columns:t,rows:o})]})})}const oe=function(){const e=(0,l().tz)(),t=(0,F().Ar)(),s=(0,n().K8)((()=>m().A.getState()),[]),r=d().P0(),{selectedWorkspace:i,workspaces:p,selectedImportType:u,excludeProjectsAndTasks:g}=s,h=(0,a().v3)().device.isMobile,y="FullImport"===u?{on:g,title:e.formatMessage(d().$b.excludeProjectsAndTasks),focused:!0,onClick:()=>m().A.setState({...s,excludeProjectsAndTasks:!g,selectedFolderIdsForFullImport:new Set,selectedBoardIdsForFullImport:new Set,selectedTeamspacesForFullImport:{}})}:void 0,A=[];return y&&A.push({key:"monday-exclude-projects-and-asks",props:y}),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(x().Ye,{alignItems:"center",gap:8,children:(0,E.jsx)(o(69437).A,{searchThreshold:5,onSelectOption:e=>{m().A.setState({...s,selectedProjectsAndTeamspaces:{},selectedBoardIdsForFullImport:new Set,selectedFolderIdsForFullImport:new Set,selectedTeamspacesForFullImport:{},fetchedHierarchy:!1,mondayFoldersDetailsMap:{},mondayBoardsDetailsMap:{},selectedWorkspace:e})},options:p.map((e=>({key:e.id,name:e.name,searchTerm:[e.name,...e.name.split(" ")]}))),currentOption:i,placeHolder:e.formatMessage(d().$b.selectWorkspaceV2),inputProps:{placeholder:e.formatMessage(d().$b.searchWorkspaces)},buttonStyles:t.workspaceSelectorButton,iconStyles:t.menuChevonDownIcon})}),i&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(f().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:e.formatMessage(d().$b.chooseImportType)}),(0,E.jsx)(x().Ye,{alignItems:"left",gap:8,children:(0,E.jsx)(o(702723).A,{isMobile:h,type:"dropdown",currentOption:u,options:Object.entries(r).map((t=>{let[o,s]=t;return{key:o,label:e.formatMessage(s.title),caption:e.formatMessage(s.description)}})),buttonStyle:{paddingLeft:"0px",marginLeft:"0px"},menuStyle:{width:"300px"},onSelectOption:e=>{m().A.setState({...s,selectedImportType:e,selectedProjectsAndTeamspaces:{},selectedBoardIdsForFullImport:new Set,selectedFolderIdsForFullImport:new Set,selectedTeamspacesForFullImport:{},fetchedHierarchy:!1,mondayFoldersDetailsMap:{},mondayBoardsDetailsMap:{}})},switcherButtons:A})})]}),i&&u&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(f().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:e.formatMessage(d().$b.selectBoardsHeading)}),(0,E.jsx)(f().A,{style:{font:"SF Pro",fontWeight:c().Wy.regular,fontSize:c().J.UIRegular.desktop,lineHeight:"19.6px",whiteSpace:"normal",wordWrap:"break-word",paddingTop:4,paddingBottom:20},children:e.formatMessage(d().$b.mapTeamspacesDescription)})]}),(0,E.jsx)(Q,{})]})};var se=()=>o(162402);const ae=function(){const e=(0,n().O$)(m().A);return e.result?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(f().A,{isMultiline:!0,children:(0,E.jsx)(l().sA,{id:"mondayImport.importsTab.confirm.subtitle",defaultMessage:"The following data has been successfully imported."})}),(0,E.jsx)("div",{style:{marginTop:32},children:e.result.map((e=>(0,E.jsx)(ne,{importStatus:e},e.mondayFolderId)))})]}):(0,E.jsx)(E.Fragment,{})};function ne(e){let{importStatus:t}=e;const o=(0,l().tz)(),a=(0,r().DP)(),[i,c]=(0,s.useState)(!1),d=(0,n().K8)((()=>p().default.state.currentSpaceStore),[]),u=(0,n().K8)((()=>m().A.state.mondayFoldersAndBoards),[]),g=(0,n().K8)((()=>p().default.state.currentSpaceViewStore),[]),h=(0,n().K8)((()=>{if(!g)return;const e=g.getTeamsStores().map((e=>({id:e.id,name:e.getName(),icon:(0,E.jsx)(k().x,{disabled:!0,store:e})})));return d?(e||[]).concat({id:g.id,name:"Private",icon:(0,E.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"0.25em",backgroundColor:j().XA.light.gray[75]},children:(0,I().g)({color:a.mediumIconColor,width:12.5,height:12.5})})}):e}),[g,d,a]),{notionTeamspaceName:y,notionTeamspaceIcon:A}=(0,s.useMemo)((()=>{const e=null==h?void 0:h.find((e=>e.id===t.notionTeamSpaceId));return e?{notionTeamspaceName:e.name,notionTeamspaceIcon:e.icon}:{notionTeamspaceName:void 0,notionTeamspaceIcon:void 0}}),[h,t]),v=(0,s.useMemo)((()=>{var e;return null==u||null===(e=u.find((e=>e.folderId===t.mondayFolderId)))||void 0===e?void 0:e.folderName}),[u,t]);return(0,E.jsxs)(x().Ye,{style:{marginTop:16},children:[(0,E.jsx)(R().A,{ariaLabel:o.formatMessage({id:"mondayImport.importsTab.confirm.collapseToggle",defaultMessage:"Collapse toggle"}),icon:P().l,onClick:()=>c((e=>!e)),style:{transform:i?"rotate(90deg)":"rotate(180deg)",marginRight:8,marginTop:4},iconStyle:{width:10,height:10}}),(0,E.jsx)(H().A,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,E.jsx)(x().Ye,{alignItems:"center",gap:2,children:(0,E.jsx)(f().A,{isSmall:!0,style:{width:280,textOverflow:"ellipsis"},children:v})}),style:{width:300}},{key:"importedInto",header:(0,E.jsxs)(x().Ye,{gap:4,children:[(0,E.jsxs)(x().Ye,{style:{alignItems:"center",gap:4},children:[(0,E.jsx)(f().A,{isSmall:!0,children:(0,E.jsx)(l().sA,{id:"mondayImport.importsTab.selectData.importedInto",defaultMessage:"Imported into"})}),(0,B().Z)({width:12})]}),(0,E.jsxs)(x().Ye,{style:{alignItems:"center",gap:4},children:[A,y]})]}),style:{width:300}}],rows:function(e){let{collapsed:o}=e;return o?[]:t.projects.map((e=>({key:e.projectId,columns:[(0,E.jsxs)(x().Ye,{gap:8,alignItems:"center",children:[(0,se().q)({width:12,color:j().XA.dark.green[600]}),(0,E.jsx)(f().A,{isMultiline:!0,style:{wordWrap:"break-word",width:300},children:e.name})]},e.projectId)]})))}({collapsed:i})})]})}const re=(0,l().YK)({failed:{defaultMessage:"Some problems occurred while importing data from your Monday workspace.",id:"Mondayimport.importingData.failed.problemsOccured"}});function ie(e,t){switch(e){case"selectData":return(0,E.jsx)(f().A,{style:{paddingBottom:8,fontSize:18,width:"100%",fontWeight:c().Wy.semibold},children:t.formatMessage(d().$b.selectWorkSpaceV1)});case"chooseWorkspace":return(0,E.jsx)(f().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:t.formatMessage(d().$b.chooseWorkSpace)});default:return(0,E.jsx)(E.Fragment,{})}}function le(e){let{style:t}=e;return(0,E.jsx)(y().A,{title:(0,E.jsx)(l().sA,{id:"mondayAuthentication.helpButton.caption",defaultMessage:"Learn more about importing from Monday.com"}),href:"https://www.notion.so/help/monday",analyticsFrom:"import",style:t})}const ce=function(e){let{tab:t,fetchActiveImportTasks:c}=e;const f=o(972435).A.getIntl(),y=(0,a().v3)(),A=(0,n().K8)((()=>p().default.state.currentSpaceStore),[]),v=(0,n().K8)((()=>p().default.state.currentSpaceViewStore),[]),I=(0,n().K8)((()=>o(988499).A.state.teams),[]),S=(0,n().O$)(m().A),j=(0,n().O$)(o(522094).A).flowId||o(206267).JW(),{workspaces:w}=S,k=(0,s.useCallback)((()=>{if("FullImport"===S.selectedImportType)return S.selectedBoardIdsForFullImport.size>0||S.selectedFolderIdsForFullImport.size>0;return Object.values(S.selectedProjectsAndTeamspaces).some((e=>0!==e.projects.length))}),[S.selectedProjectsAndTeamspaces,S.selectedFolderIdsForFullImport,S.selectedBoardIdsForFullImport,S.selectedImportType]),b=(0,s.useCallback)((()=>{A&&v&&("FullImport"===S.selectedImportType?d().oz({environment:y,spaceStore:A,flowId:j,spaceViewStore:v}).catch((()=>{})):d().i_({environment:y,spaceStore:A,currentSpaceViewStore:v,teamsStores:I,flowId:j}).catch((()=>{})))}),[v,y,j,S.selectedImportType,A,I]),T=(0,r().IS)((e=>({closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor}})),[]),C=(0,s.useMemo)((()=>"chooseWorkspace"===t),[t]);return(0,E.jsxs)(o(843878).Ay,{controlRow:(e=>"chooseWorkspace"===e?(0,E.jsx)(o(136480).s,{left:(0,E.jsx)(le,{}),next:{disabled:!k()||S.templateCreationInProgress,onClick:b,message:f.formatMessage(d().$b.nextButton)},back:{disabled:!w.length,onClick:()=>{c(),m().A.resetImport()},message:f.formatMessage(d().$b.backButton)}}):"selectData"===e?(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,E.jsx)(g().A,{size:"lg",style:{border:0},disabled:!w.length,onClick:()=>{c(),m().A.resetImport()},children:f.formatMessage(d().$b.backButton)}),(0,E.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,E.jsx)(x().Ye,{alignItems:"center",gap:8,children:(0,E.jsx)(h().A,{style:{marginLeft:16},disabled:!k()||S.templateCreationInProgress,onClick:()=>{b()},children:S.templateCreationInProgress?(0,E.jsxs)(x().Ye,{alignItems:"center",gap:2,children:[(0,E.jsx)(u().A,{onDarkBackground:!0}),f.formatMessage(d().$b.creatingTemplate)]}):(0,E.jsx)(E.Fragment,{children:f.formatMessage(d().$b.nextButton)})})})})]}):"importingData"===e?(0,E.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,E.jsx)(g().A,{size:"lg",disabled:!w.length,onClick:()=>{c(),m().A.resetImport()},children:(0,E.jsx)(l().sA,{id:"importsTab.importingData.closeButtonText",defaultMessage:"Close"})})}):"confirm"===e?(0,E.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,E.jsx)(h().A,{onClick:()=>{var e;if(null!==(e=S.result)&&void 0!==e&&e.length&&S.loggerPageId){const e=S.result.find((e=>void 0!==e.projectCollectionPageId));o(435009).oo({url:(0,o(921940).A)({pageId:(null==e?void 0:e.projectCollectionPageId)||S.loggerPageId,pageModel:(0,o(183210).Rr)({table:o(179034).ev,id:(null==e?void 0:e.projectCollectionPageId)||S.loggerPageId}),baseUrl:o(780054).A.domainBaseUrl,pageVisitSource:o(584262).y8.Import}),environment:y})}m().A.resetImport(),o(404141).A.reset()},children:(0,E.jsx)(l().sA,{id:"importsTab.confirm.doneText",defaultMessage:"Done"})})}):"failure"===e?(0,E.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,E.jsx)(g().A,{size:"lg",disabled:!w.length,onClick:()=>{c(),m().A.resetImport()},children:(0,E.jsx)(l().sA,{id:"importsTab.importingData.closeButtonText",defaultMessage:"Close"})})}):void 0)(t),controlRowPaddingTopBottom:C?10:20,contentPaddingLeftRight:C?25:void 0,controlRowPaddingLeftRight:C?15:void 0,getPaddingTopBottom:C?()=>2:void 0,children:[(0,E.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:(0,E.jsx)("div",{style:{position:"absolute",top:12,right:12},children:(0,E.jsx)(o(197190).A,{onClick:()=>{c(),m().A.resetImport()},style:T.closeButton,hoveredStyle:T.closeButtonHover,children:(0,o(66913).V)(T.closeButtonIcon)})})}),ie(t,f),(e=>"selectData"===e?(0,E.jsx)(q,{}):"chooseWorkspace"===e?(0,E.jsx)(oe,{}):"importingData"===e?(0,E.jsx)(o(297464).A,{assetSrc:i().A.images.import.mondayPng}):"confirm"===e?(0,E.jsx)(ae,{}):"failure"===e?(0,E.jsx)(o(352403).A,{assetSrc:i().A.images.import.mondayPng,loggerPageId:S.loggerPageId,failedMessage:f.formatMessage(re.failed)}):void 0)(t)]})}},477293:(e,t,o)=>{o.d(t,{r:()=>n});var s=()=>o(56366),a=()=>o(508496);function n(e){return(0,s().K8)((()=>a().default.getGroup(e)),[e])}},490884:(e,t,o)=>{o.d(t,{fF:()=>r,k2:()=>n});const s=["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"],a=["text/plain",".md",".mdown",".markdown",".mkdn",".mkd",".Rmd",".md.txt"],n={markdown:a,csv:["text/plain",".csv"],html:["text/html"],docx:s,gdocs:s,dropbox:s,quip:["text/html",a],workflowy:["text/plain"],confluence:["application/zip"],genericImporter:["application/zip"],pdf:["application/pdf"]},r=Object.keys(n)},522094:(e,t,o)=>{o.d(t,{A:()=>a});class s extends(()=>o(757695))().default{getInitialState(){return{flowId:void 0}}getOrCreateFlowId(){const e=this.state.flowId||o(206267).JW();return this.state.flowId&&this.setState({flowId:e}),e}}const a=new s},566254:(e,t,o)=>{o.d(t,{HC:()=>c,Pz:()=>p,_s:()=>i,ml:()=>m,rA:()=>d,x_:()=>l});var s=()=>o(559926),a=()=>o(666803),n=()=>o(449506),r=()=>o(908928);async function i(e,t){const o=await n().callApi({eventName:"getConnectedAppsStatus",environment:e,data:{spaceId:t}});if("failed"===o.type){const e=o.error;return console.error(e),{drive:[],evernote:void 0,trello:void 0,asana:void 0,confluence:void 0}}return o.data}async function l(e,t){await n().callApi({eventName:"disconnectTrello",environment:e,data:{}}),await t.refresh(),s().kO(e,{integration_name:"trello"})}async function c(e,t){await n().callApi({eventName:"disconnectAsana",environment:e,data:{}}),await t.refresh(),s().kO(e,{integration_name:"asana"})}async function d(e,t){await n().callApi({eventName:"disconnectEvernote",environment:e,data:{}}),await t.refresh(),s().kO(e,{integration_name:"evernote"})}async function p(e,t,o){await n().callApi({eventName:"disconnectConfluence",environment:e,data:{spaceId:o}}),await t.refresh(),s().kO(e,{integration_name:"confluence"})}async function m(e){const{environment:t,requestStore:o,botId:n}=e;await r().KA({environment:t,botId:n,onSuccess:()=>{!async function(e){const{environment:t,requestStore:o}=e;await o.refresh();const n=a().Ay.getInitialState();a().Ay.setState(n),s().kO(t,{integration_name:"jira"})}({environment:t,requestStore:o})}})}},609316:(e,t,o)=>{o.d(t,{V:()=>s});const s=(0,o(583835).Dv)("importFile")},637433:(e,t,o)=>{o.d(t,{Y:()=>a});o(296540);const s={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25m2.817 4.808a.625.625 0 0 1 0 .884L10.884 10l1.933 1.933a.625.625 0 1 1-.884.884L10 10.884l-1.933 1.933a.625.625 0 1 1-.884-.884L9.116 10 7.183 8.067a.625.625 0 1 1 .884-.884L10 9.116l1.933-1.933a.625.625 0 0 1 .884 0"})},a=(0,o(340498).wt)("xMarkCircleFill",s)},681546:(e,t,o)=>{o.d(t,{i:()=>a});o(296540);var s=o(474848);const a=(0,o(340498).wt)("arrowLeft",{viewBox:"0 0 30 30",svg:(0,s.jsx)("polygon",{points:"29 14 4.813 14 13.406 5.406 12 4 1 15 12 26 13.406 24.594 4.813 16 29 16"})})},696977:(e,t,o)=>{o.d(t,{x3:()=>C,bk:()=>M,D5:()=>F,uA:()=>W,xd:()=>R,kV:()=>B,Xn:()=>L,Oh:()=>P,qf:()=>O,$8:()=>D});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(581454);var s=()=>o(66689),a=()=>o(857639),n=()=>o(206267),r=()=>o(861017),i=()=>o(161479),l=()=>o(496603),c=()=>o(534177),d=()=>o(939768);const p=(0,o(583835).Dv)("parallelAsanaImport");var m=()=>o(313892),u=()=>o(780054),g=()=>o(601734),h=()=>o(725951),f=()=>o(351360),y=()=>o(92513),x=()=>o(522094),A=()=>o(559926),v=()=>o(449506),I=()=>o(901389),S=()=>o(705540),j=()=>o(357625),w=()=>o(911686),k=()=>o(957416),b=()=>o(317909);const T=(0,o(959013).YK)({authenticatingWithAsana:{id:"asanaActions.authenticatingWithAsana.loadingMessage",defaultMessage:"Authenticating with Asana…"},titleMessage:{id:"asanaActions.loginWithAsanaPopupModal.title",defaultMessage:"Asana login"}});async function C(e){const{environment:t,flowId:o}=e;await v().callApi({eventName:"disconnectAsana",environment:t,data:{}});const s=(0,h().LX)(t);let a=(0,r().Rq)(u().A.domainBaseUrl,{authType:s,userId:t.currentUser.id});if(a=s.redirectToAuth?a:await(0,h().YN)(t,a),t.device.isElectron)return y().A.setState({...y().A.state,isAccountLinkingInProgress:!0}),void S().openExternalUrl(a);const n=await k().P(t,{width:580,height:800,url:a,titleMessage:T.titleMessage});if(!n)return;const i=d().qg(n);if(!i.query.code||!i.query.state)return;y().A.setState({...y().A.state,isAccountLinkingInProgress:!0});const l=await v().callApi({eventName:"authWithAsana",environment:t,data:{code:i.query.code,encryptedState:i.query.state}}),c=await v().callApi({eventName:"getAsanaWorkspacesNames",environment:t,data:{}});if("failed"===l.type)A()._$(t,{import_source:"asana",data:{import_type:"api",status:"failure",error:l.error},flowId:o}),console.error(l.error),I().Qg(l);else if(A()._$(t,{import_source:"asana",data:{import_type:"api",status:"success"},flowId:o}),"success"===c.type){const{data:{account:e,workspaces:t}}=c;y().A.setState({...y().A.state,isAccountLinkingInProgress:!1,account:e,workspaces:t,currentTab:"selectData",isModalOpen:!0})}}async function M(e){const{environment:t}=e;y().A.setState({...y().A.state,isAccountDelinkingInProgress:!0});const o=await v().callApi({eventName:"disconnectAsana",environment:t,data:{}});"failed"===o.type?(console.error(o.error),I().Qg(o)):(A().kO(t,{integration_name:"asana"}),"success"===o.type&&y().A.setState({...y().A.state,isAccountDelinkingInProgress:!1,account:void 0,workspaces:[]}))}async function F(e){const{selectedWorkspace:t,environment:o,forceReload:s=!0}=e;if(s||!y().A.state.teamsAndProjects.length){y().A.setState({...y().A.state,isLoadingProjects:!0});const e=await v().callApi({eventName:"getTeamsAndProjectsInAsanaWorkspace",environment:o,data:{workspaceId:t,size:5}});"success"===e.type&&y().A.setState({...y().A.state,teamsAndProjects:e.data,isLoadingProjects:!1})}}async function P(e){const{team:t,environment:o}=e,s=y().A.getState(),{selectedWorkspace:a,teamsAndProjects:n,loadMoreClicks:r}=s;if(!a)return;const i=await v().callApi({eventName:"getTeamsAndProjectsInAsanaWorkspace",environment:o,data:{workspaceId:a,teamId:t.gid,size:5,nextPage:t.nextPage}}),l=n.findIndex((e=>e.gid===t.gid));if(-1!==l){if("success"===i.type){const e=i.data.find((e=>e.gid===t.gid));if(!e)return;const o={...n[l],projects:[...n[l].projects,...e.projects],nextPage:e.nextPage},a=n.slice(0,l).concat(o,n.slice(l+1));y().A.setState({...s,teamsAndProjects:a,loadMoreClicks:r+1})}return i}}async function B(e,t){const o=[];for(const a of Object.keys(t)){const{notionTeamspaceId:e,projects:s}=t[a];!(0,l().Kg)(s)&&(0,c().O9)(e)&&o.push({asanaTeamId:a,projectIds:s,notionTeamSpaceId:e})}const s=await v().callApi({eventName:"getAsanaTaskProperties",environment:e,data:o});if("success"===s.type){const{selectedTeamspacesAndProperties:e}=y().A.state;for(const{notionTeamSpaceId:t,properties:o}of s.data.data)o&&(e[t]={selectionMode:"all",properties:o.map((e=>({...e,isSelected:!0})))});y().A.setState({...y().A.state,selectedTeamspacesAndProperties:e})}}async function R(e){let{environment:t}=e;y().A.setState({...y().A.state,isLoadingAsanaWorkspaces:!0});const o=await v().callApi({eventName:"getAsanaWorkspacesNames",environment:t,data:{}});var s;"success"===o.type&&y().A.setState({...y().A.state,account:o.data.account,workspaces:o.data.workspaces,selectedWorkspace:null===(s=o.data)||void 0===s||null===(s=s.workspaces[0])||void 0===s?void 0:s.gid,isLoadingAsanaWorkspaces:!1})}async function L(e){let{environment:t,spaceStore:o,currentSpaceViewStore:r,teamsStores:l,flowId:c,navigateBeforeTemplateCreation:d}=e;const{appTemplatesSetupActions:u,appConfigs:h}=await g().Aw.load(),v=y().A.state.selectedWorkspace;if(!v)return;y().A.setState({...y().A.state,...d&&{currentTab:"importingData"},templateCreationInProgress:!0});const I={},S={};try{for(const e in y().A.state.selectedProjectsAndTeamspaces){if(0===y().A.state.selectedProjectsAndTeamspaces[e].projects.length)continue;let a;const n=y().A.state.selectedProjectsAndTeamspaces[e],{notionTeamspaceId:i}=n;if(!i)continue;const c=l.find((e=>e.id===n.notionTeamspaceId));if(a=c||o,S[i])I[e]=S[i];else{const{serverCommitResult:o,performResult:n}=b().createAndCommit({environment:t,perform:e=>{const o={type:"preset",uri:s().tP};if("preset"!==o.type||o.uri.startsWith("notion://wiki"));else{var n;const s=o.uri,i=null===(n=(0,m().BL)(h(),s))||void 0===n?void 0:n.uri;if(!i)return;const l=h().find((e=>e.uri===i));if(null==l?void 0:l.presets.find((e=>e.uri===s))){const o=u.initializeApp({environment:t,spaceViewStore:r,appParentStore:a,appUri:i,presetUri:s,transaction:e,from:"asana_import"});if(2!==(null==o?void 0:o.length))return;return o}}},canUndo:!0,userAction:"importActions.importAsana"});I[e]=n,S[i]=n,await o}}}catch(D){return void y().A.setState({...y().A.state,templateCreationInProgress:!1,currentTab:"failure"})}const k=[],T=f().default.state.currentSpaceViewStore;if(!T)return;const C=w().mD({environment:t,spaceStore:o,spaceViewStore:T,append:!0});await C.deferred.promise;const M=C.pageId;y().A.setState({...y().A.state,loggerPageId:M});const F=new Set,P=[],B=[];for(const s in I){const e=y().A.state.selectedProjectsAndTeamspaces[s],t=I[s];if(!(t&&e.notionTeamspaceId&&e.projects.length))continue;const a="string"==typeof e.projects?[]:e.projects;P.push(...a);const n=y().A.state.selectedTeamspacesAndProperties[e.notionTeamspaceId];n&&(n.useSectionAsStatus=y().A.state.useSectionAsStatus),F.add(e.notionTeamspaceId),B.push(s),k.push({collectionViewBlocks:[{id:t[0].id,spaceId:(0,i().e)(o.id)},{id:t[1].id,spaceId:(0,i().e)(o.id)}],projectIds:a,asanaTeamId:s,notionTeamSpaceId:e.notionTeamspaceId,propertySelection:n,importAllProjects:"all"===e.projects,importOnlyIncompleteProjects:"in_complete"===e.projects})}A().Pd(t,{integration_name:"asana"});const R=(0,j().UT)(t,p,{importParams:k,spaceId:(0,i().e)(o.id),asanaWorkspaceId:v,importCompletedTasks:y().A.state.importCompletedTasks,loggerPageId:M,flowId:c||n().JW()});y().A.setState({...y().A.state,templateCreationInProgress:!1,currentTab:"importingData",choosingWorkspacesCompleted:!0}),x().A.reset();const L=y().A.state.workspaces.find((e=>e.gid===v));L&&function(e,t,o){try{A().mM(e,{import_source:"asana",data:t,flowId:o})}catch(s){a().log({level:"error",from:"asanaV2Actions",type:"parallelAsanaImport",error:{miscDataString:JSON.stringify({error:s,message:"Errored in tracking import_source_input event."})}})}}(t,{workspaceName:L.name,teams:B,projects:P,numberOfTeamspacesUsed:F.size,completedTasks:y().A.state.importCompletedTasks,userId:t.currentUser.id,spaceId:(0,i().e)(o.id)},c);for await(const s of R){if(!y().A.state.isModalOpen)break;if(s.error)return void y().A.setState({...y().A.state,currentTab:"failure"});"success"===s.taskStatus&&y().A.setState({...y().A.state,currentTab:"confirm",result:s.value.status,isComplete:!0})}}function D(e){var t;let{teamId:o,spaceId:s}=e;y().A.setState({...y().A.state,selectedProjectsAndTeamspaces:{...y().A.state.selectedProjectsAndTeamspaces,[o]:{projects:(null===(t=y().A.state.selectedProjectsAndTeamspaces[o])||void 0===t?void 0:t.projects)||[],notionTeamspaceId:s||void 0}}})}function W(){y().A.setState({...y().A.state,currentTab:"selectProperties"})}function O(){y().A.setState({...y().A.state,isModalOpen:!0})}},709438:(e,t,o)=>{o.d(t,{m:()=>i});o(296540);var s=()=>o(401497),a=()=>o(959013),n=o(474848);const r=8;function i(e){let{color:t,size:o,style:i}=e;const l=(0,a().tz)(),c=(0,s().IS)((e=>({dot:{height:o||r,width:o||r,background:t||e.blueColor,flexShrink:0,borderRadius:"100%",pointerEvents:"none",...i}})),[o,t,i]);return(0,n.jsx)("div",{role:"img","aria-label":l.formatMessage({id:"statusDot.ariaLabel",defaultMessage:"New"}),style:c.dot})}},864408:(e,t,o)=>{o.d(t,{A:()=>go});o(581454);var s=o(296540),a=()=>o(484714),n=()=>o(56366),r=()=>o(401497),i=()=>o(148307),l=()=>o(187174),c=()=>o(30626),d=()=>o(133033),p=()=>o(555555),m=()=>o(206267),u=()=>o(490884),g=()=>o(959013),h=()=>o(970330),f=()=>o(559926),y=()=>o(696977),x=()=>o(901389),A=()=>o(757695);class v extends A().default{getInitialState(){return{}}}const I=new v;var S=()=>o(449506),j=()=>o(496414);async function w(e){const{environment:t,spaceId:o,requestStore:s}=e;if(!t.currentUser.id)return x().rG({message:"Invalid details"}),void j().V();I.setState({...I.state,[o]:{...I.state[o],showLoader:!0}});const a=await S().callApi({eventName:"getConfluenceSpaces",environment:t,data:{spaceId:o}});if(await(null==s?void 0:s.refresh()),I.setState({...I.state,[o]:{...I.state[o],showLoader:!1}}),"failed"!==a.type)return I.setState({...I.state,[o]:{...I.state[o],spacesResult:a.data}}),a.data;console.error(a.error),x().Qg(a),j().V()}var k=()=>o(398391);function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"import";k().f.setState({open:!0,currentStepIndex:0,importType:e,fileName:"",fileUrl:"",fileSize:0,isLoading:!1,error:void 0,firstRowAsHeader:!0,previewCollectionInfo:void 0,importLocation:"new",teamspaceId:void 0})}var T=()=>o(324009),C=()=>o(911686),M=()=>o(388416),F=()=>o(192591),P=()=>o(989423),B=()=>o(654534),R=()=>o(508496);function L(){return R().default.checkGate({gateName:"csv_import_v2_screens"})}var D=()=>o(310795),W=()=>o(619400),O=()=>o(866042),V=()=>o(504836),_=()=>o(722872),z=()=>o(397292),N=()=>o(874096);var E=()=>o(836251),q=()=>o(437622),U=()=>o(962730),H=()=>o(92513),Y=()=>o(227440),$=()=>o(214437),K=()=>o(113507),G=()=>o(522094),J=()=>o(313961),X=()=>o(666803),Q=()=>o(479199),Z=()=>o(40851),ee=()=>o(404141),te=()=>o(250933),oe=()=>o(100622),se=()=>o(351360),ae=()=>o(463830);const ne=new(ae().A);var re=()=>o(575143),ie=()=>o(406699),le=()=>o(285790),ce=()=>o(187485),de=()=>o(331542),pe=()=>o(928600),me=()=>o(939740),ue=()=>o(14235),ge=()=>o(89924),he=()=>o(859428),fe=()=>o(125565),ye=()=>o(284371),xe=()=>o(704152),Ae=o(474848);const ve={fontSize:16,fontWeight:ye().Wy.medium},Ie=28,Se={flexShrink:0,width:Ie,height:Ie,borderRadius:4,marginRight:10,background:oe().Tj.white};const je=function(e){let{title:t,actionButton:s,onClick:a,tooltipEvents:n,icon:i,logo:l,caption:c,shouldWrapCaption:d,showSyncBadge:p,showNewBadge:m,showBetaBadge:u}=e;const g=(0,r().DP)();return(0,Ae.jsxs)(xe().A,{...n,onClick:a,style:we(g),children:[(0,Ae.jsx)(Te,{icon:i,logo:l}),(0,Ae.jsxs)("div",{style:{minWidth:0,width:"100%"},children:[(0,Ae.jsxs)("div",{style:{display:"flex"},children:[(0,Ae.jsx)("div",{style:ve,children:t}),p&&(0,Ae.jsx)(o(91315).A,{}),m&&(0,Ae.jsx)(o(515918).A,{}),u&&(0,Ae.jsx)(o(13898).A,{}),(0,Ae.jsx)("div",{style:{marginLeft:"auto"},children:s})]}),(0,Ae.jsx)(Ce,{caption:c,shouldWrapCaption:d})]})]})};function we(e){return{display:"flex",alignItems:"center",padding:10,paddingRight:8,borderRadius:4,marginBottom:12,cursor:"pointer",boxShadow:e.shadowSM,transition:"background 200ms ease-out",background:e.importOptionsButtonBackground}}function ke(e){return{display:"flex",alignItems:"center",justifyContent:"center",width:Ie,height:Ie,borderRadius:4,marginRight:8,color:e.mediumTextColor,background:e.importOptionsIconWrapBackground}}function be(e,t){return{fontSize:12,color:e.mediumTextColor,wordBreak:"keep-all",...!t&&{...ye().RC}}}function Te(e){let{icon:t,logo:o}=e;const s=(0,r().DP)();return o?(0,Ae.jsx)("img",{style:Se,src:o}):t?(0,Ae.jsx)("div",{style:ke(s),children:t({flexShrink:0,width:Ie,height:Ie})}):null}function Ce(e){let{caption:t,shouldWrapCaption:o}=e;const s=(0,r().DP)();return t?(0,Ae.jsx)("div",{style:be(s,o),children:t}):null}const Me={whiteSpace:"pre-wrap"};function Fe(e,t){return(0,Ae.jsx)(he().A,{renderTooltip:()=>(0,Ae.jsx)(fe().A,{style:{color:oe().Ay.white},isSmall:!0,children:(0,Ae.jsx)(g().sA,{id:"AsanaImportOption.helpButton.tooltip",defaultMessage:"Learn about how to import"})}),render:o=>(0,Ae.jsx)(ce().A,{...o,external:!0,href:e,style:{marginLeft:"auto"},children:(0,Ae.jsx)(le().A,{icon:d().$,ariaLabel:t.formatMessage({id:"AsanaImportOption.helpButton.ariaLabel",defaultMessage:"Learn about how to asana import help icon"})})})})}const Pe=function(){const e=(0,n().O$)(H().A),{account:t,isLoadingAsanaWorkspaces:o,isAccountDelinkingInProgress:r,isAccountLinkingInProgress:l}=e,d=(0,a().v3)(),p=(0,g().tz)(),{device:u}=d,h=(0,n().O$)(G().A),x=h.flowId||m().JW();(0,s.useEffect)((()=>{h.flowId||G().A.setState({flowId:x})}),[x,h]);const A={title:p.formatMessage({id:"asanaImportOption.asanaButton.title",defaultMessage:"Asana"}),logo:i().A.images.import.asanaPng,caption:l?p.formatMessage({id:"asanaImportOption.asanaButton.accountLinkingInProgress",defaultMessage:"Authenticating..."}):r?p.formatMessage({id:"asanaImportOption.asanaButton.accountDelinkingInProgress",defaultMessage:"Removing account..."}):t,actionButton:t?(v=[{name:p.formatMessage({id:"asanaImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),captionText:p.formatMessage({id:"asanaImportOption.connectAnotherAccount.captionText",defaultMessage:"Ensure you are logged into the new Asana account in your browser"}),action:()=>y().x3({environment:d,flowId:x}).catch((()=>{}))},{name:p.formatMessage({id:"asanaImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>y().bk({environment:d})}],(0,Ae.jsx)(ie().Ay,{popupType:ue().nl.Popup,renderOrigin:e=>o?(0,Ae.jsx)(de().A,{}):(0,Ae.jsx)(le().A,{ariaLabel:p.formatMessage({id:"asanaImportOption.asanaButton.ariaLabel",defaultMessage:"Import from Asana button"}),icon:c()._,...e}),render:e=>{const t={key:"section",render:e=>(0,Ae.jsx)(ge().A,{...e}),items:v.map((t=>{let{name:o,captionText:s,action:a}=t;return{key:o,render:e=>(0,Ae.jsx)(re().A,{...e,title:o,caption:s,captionStyle:s?Me:void 0}),action:()=>{a(),e.close()}}}))};return(0,Ae.jsx)(pe().A,{menuType:_().gu.Popup,width:200,children:(0,Ae.jsx)(me().Ay,{type:me().Oh.Vertical,initialFocus:void 0,sections:[t]})})}})):Fe((0,E().xS)("guides.importAsana"),p),onClick:()=>{}};var v;return(0,Ae.jsx)(ie().Ay,{onClick:async()=>{var e;H().A.resetImport(),o||l||r||(t?(f().fJ(d,{import_source:"asana",from:"settings_modal",userId:d.currentUser.id,spaceId:null===(e=se().default.state.currentSpaceStore)||void 0===e?void 0:e.id,flowId:x}),await y().xd({environment:d}),y().qf()):y().x3({environment:d,flowId:x}).catch((()=>{})))},popupType:u.isMobile?ie().z7.SlideUp:ie().z7.Popup,buttonPopupStore:ne,renderOrigin:e=>{let{onClick:t}=e;return(0,Ae.jsx)(je,{...A,onClick:t})},render:()=>null})};var Be=()=>o(251126),Re=(o(898992),o(672577),()=>o(831310)),Le=()=>o(668725),De=()=>o(738418),We=()=>o(566254),Oe=()=>o(493823),Ve=()=>o(760217),_e=()=>o(802790),ze=()=>o(805751),Ne=()=>o(623580),Ee=()=>o(957986),qe=()=>o(864943),Ue=()=>o(204063),He=()=>o(690197),Ye=(o(354520),o(803949),()=>o(852507)),$e=()=>o(467730);o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);class Ke extends A().default{getInitialState(){return{searchQuery:"",selection:new Set}}}const Ge=Ke;var Je=()=>o(419357),Xe=()=>o(64e3),Qe=()=>o(21140);const Ze=function(e){let{searchInputPlaceholder:t,sections:o,noSearchResultsPlaceholder:s,handleClickImportConfluenceWorkspace:a,onComplete:r}=e;const i=(0,n().uB)(void 0,Ge);return(0,Ye().l)((()=>{const e=i.state.selection,[t]=o;if(t){const[o]=t.items;o&&e.add(o.key)}i.emit()})),(0,Ae.jsx)(pe().A,{menuType:_().gu.Popup,header:(0,Ae.jsx)(et,{searchInputPlaceholder:t,store:i}),width:280,maxHeight:350,children:(0,Ae.jsx)(tt,{sections:o,noSearchResultsPlaceholder:s,handleClickImportConfluenceWorkspace:a,onComplete:r,store:i})})};function et(e){let{searchInputPlaceholder:t,store:o}=e;const s=(0,n().uB)(o,Ge),a=(0,n().K8)((()=>s.state.searchQuery),[s]);return(0,Ae.jsx)(ge().A,{isInput:!0,desktopStyle:{paddingBottom:2},children:(0,Ae.jsx)(Je().Ay,{focus:!0,focusAfterAnimation:!0,value:a,onChange:e=>{s.setState({...s.state,searchQuery:e.target.value})},placeholder:t})})}function tt(e){let{sections:t,noSearchResultsPlaceholder:o,handleClickImportConfluenceWorkspace:s,onComplete:a,store:r}=e;const i=(0,g().tz)(),l=(0,n().uB)(r,Ge),c=(0,n().K8)((()=>l.state.searchQuery),[l]),d=t.map((e=>{const t=(0,$e().Ay)(c,e.items,(t=>`${t.key} ${t.name} ${e.name}`));return{...e,items:t}})).filter((e=>e.items.length>0));if(0===d.length)return(0,Ae.jsx)(ge().A,{children:(0,Ae.jsx)(Xe().A,{title:o})});const p=d.map((e=>{const o=e.items.map((e=>e.name)),n={};return o.forEach((e=>{n[e]=n[e]?n[e]+1:1})),{key:e.name,render:o=>(0,Ae.jsx)(ge().A,{...o,title:t.length>1?e.name:void 0}),items:e.items.map((e=>({key:e.key,render:t=>(0,Ae.jsx)(Ve().A,{...t,title:(0,Ae.jsxs)(Qe().Ye,{gap:2,alignItems:"center",children:[e.name,n[e.name]>1&&(0,Ae.jsx)(he().A,{placement:U().W.Right,renderTooltip:()=>e.key,render:t=>(0,Ae.jsx)(le().A,{ariaLabel:i.formatMessage({id:"integrationConfluenceImportPopup.associatedSpaceKey",defaultMessage:"Associated space key: {key}"},{key:e.key}),disableBackground:!0,icon:De().G,...t})})]}),right:void 0!==e.count&&(0,Ae.jsx)(fe().A,{isSmall:!0,children:e.count})}),action:()=>{s(e.key,e.name),function(e,t){t(e)}(e,a)}})))}}));return(0,Ae.jsx)(me().Ay,{type:me().Oh.Vertical,initialFocus:void 0,sections:p})}const ot={whiteSpace:"pre-wrap"};function st(e){const{key:t,value:o,spaceId:s}=e;I.setState({...I.state,[s]:{...I.state[s],[t]:o}})}function at(e){var t;const{onSelectOption:o,options:s,currentOption:a}=e,n=null===(t=s.find((e=>{let{key:t}=e;return t===a})))||void 0===t?void 0:t.label,i=(0,r().IS)((e=>({icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);return(0,Ae.jsx)(ie().Ay,{popupType:ie().z7.Popup,placementToOrigin:ie().sx.Left,renderOrigin:e=>(0,Ae.jsxs)(Oe().p,{...e,size:"lg",style:{opacity:1},disabled:!1,children:[n,(0,Le().b)(i.icon)]}),render:e=>{const t={menuType:_().gu.Popup,width:250,left:50},a=[{key:"settings-item-section",render:e=>(0,Ae.jsx)(ge().A,{...e}),items:s.map((t=>{let{key:s,label:a}=t;return{key:s,action:()=>{o(s),e.close()},render:e=>(0,Ae.jsx)(Ve().A,{...e,title:a,shouldWrapCaption:!0,right:n===a?(0,Ae.jsx)("div",{style:{width:14},children:(0,Re().o)()}):void 0})}}))}];return(0,Ae.jsx)(pe().A,{...t,children:(0,Ae.jsx)(me().Ay,{type:me().Oh.Vertical,sections:a,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})}})}async function nt(e){await async function(e){const{environment:t,requestStore:o,userEmail:s,site:a,access_token:n,instance:r,spaceId:i,username:l,password:c,flowId:d}=e;if(!t.currentUser.id)return x().rG({message:"Invalid details"}),void j().V();const p=await S().callApi({eventName:"authenticateConfluenceUser",environment:t,data:{userEmail:s,site:a,access_token:n,instance:r,userId:t.currentUser.id,spaceId:i,username:l,password:c}});await o.refresh(),"failed"===p.type?(f()._$(t,{import_source:"confluence",data:{import_type:"api",status:"failure",error:p.error},flowId:d}),console.error(p.error),x().Qg(p)):(f()._$(t,{import_source:"confluence",data:{import_type:"api",status:"success"},flowId:d}),x().rG({message:"Successfully connected confluence instance."}),await w({environment:t,requestStore:o,spaceId:i})),j().V()}(e)}function rt(e){let{environment:t,title:o,email:s,accountType:a,site:i,APIToken:l,personalAccessToken:c,confluenceVersion:d,username:p,password:m,hidePopup:u,spaceId:h,flowId:f,requestStore:y}=e;const x=(0,n().K8)((()=>I.getState()),[]),A=(0,r().IS)((e=>({title:{fontWeight:ye().Wy.semibold},inputLabels:{fontSize:"14px",fontWeight:"400"},helpText:{textAlign:"center",marginTop:"5px",lineHeight:"15px",fontSize:12,color:e.lightTextColor}})),[]);return(0,Ae.jsx)(ze().A,{debugName:"ConfluenceImportOption",capture:!0,children:(0,Ae.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",padding:20,width:"100%"},children:[(0,Ae.jsxs)("div",{style:{overflowY:"scroll"},children:[(0,Ae.jsxs)("div",{style:{marginBottom:24},children:[(0,Ae.jsx)("div",{style:A.title,children:o}),(0,Ae.jsx)(He().A,{title:(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.helpButton.caption",defaultMessage:"Learn more about importing from Confluence"}),href:"https://www.notion.so/help/import-from-confluence",analyticsFrom:"import",style:{marginTop:8,marginLeft:-4}})]}),(0,Ae.jsxs)("div",{children:[(0,Ae.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[(0,Ae.jsx)("label",{htmlFor:"accountType",style:{...A.inputLabels},children:a}),(0,Ae.jsx)(at,{onSelectOption:e=>{st({key:"instanceValue",value:e,spaceId:h})},options:[{key:"Cloud",label:(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.accountTypeDropdownCloudOption.label",defaultMessage:"Cloud"})},{key:"Server",label:(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.accountTypeDropdownServerOption.label",defaultMessage:"Server/On-Premise"})}],currentOption:x[h].instanceValue??"Cloud"})]}),(0,Ae.jsx)(_e().A,{size:12,isHidden:!0}),(0,Ae.jsx)("div",{children:"Server"===x[h].instanceValue?(0,Ae.jsxs)("div",{children:[(0,Ae.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row",alignItems:"center"},children:[(0,Ae.jsx)("label",{htmlFor:"confluenceVersion",style:{...A.inputLabels},children:d}),(0,Ae.jsx)(at,{onSelectOption:e=>{st({key:"confluenceAuthenticationTypeValue",value:e,spaceId:h})},options:[{key:"OAuth2.0",label:(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.confluenceVersionDropdownNewVersionOption.label",defaultMessage:"7.9 or later"})},{key:"Basic",label:(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.confluenceVersionDropdownOlderVersionOption.label",defaultMessage:"Prior to 7.9"})}],currentOption:x[h].confluenceAuthenticationTypeValue??"OAuth2.0"})]}),(0,Ae.jsx)(_e().A,{size:12,isHidden:!0})]}):void 0}),(0,Ae.jsx)("label",{htmlFor:"email",style:{...A.inputLabels},children:s}),(0,Ae.jsx)(Ne().A,{id:"email",value:x[h].emailValue,autoComplete:"off",autoCapitalize:"off",onChange:e=>{st({key:"emailValue",value:e.target.value,spaceId:h})},showClearButton:!0,placeholder:"notion@acmelabs.com",inputElementAttributes:{minLength:4}}),(0,Ae.jsx)(_e().A,{size:12,isHidden:!0}),(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("label",{htmlFor:"site",style:{...A.inputLabels},children:i}),(0,Ae.jsx)(Ne().A,{id:"site",value:x[h].siteValue,onChange:e=>st({key:"siteValue",value:e.target.value,spaceId:h}),showClearButton:!0,placeholder:"Cloud"===x[h].instanceValue?"https://confluence.atlassian.net":"https://domain.com",inputElementAttributes:{minLength:4}}),(0,Ae.jsx)(_e().A,{size:12,isHidden:!0}),"Cloud"===x[h].instanceValue?(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("label",{htmlFor:"APIToken",style:{...A.inputLabels},children:l}),(0,Ae.jsx)(Ne().A,{id:"AccessToken",type:"password",value:x[h].tokenValue,onChange:e=>{st({key:"tokenValue",value:e.target.value,spaceId:h})},showClearButton:!0,placeholder:"Paste your token here",inputElementAttributes:{minLength:4}})]}):(0,Ae.jsx)("div",{children:(0,Ae.jsx)("div",{children:"Basic"===x[h].confluenceAuthenticationTypeValue?(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("label",{htmlFor:"username",style:{...A.inputLabels},children:p}),(0,Ae.jsx)(Ne().A,{id:"username",value:x[h].usernameValue,onChange:e=>{st({key:"usernameValue",value:e.target.value,spaceId:h})},showClearButton:!0,placeholder:"confluenceUser",inputElementAttributes:{minLength:1}}),(0,Ae.jsx)(_e().A,{size:12,isHidden:!0}),(0,Ae.jsx)("label",{htmlFor:"password",style:{...A.inputLabels},children:m}),(0,Ae.jsx)(Ne().A,{type:"password",id:"password",value:x[h].passwordValue,onChange:e=>{st({key:"passwordValue",value:e.target.value,spaceId:h})},showClearButton:!0,placeholder:"P@S$w0rd",inputElementAttributes:{minLength:1}})]}):(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("label",{htmlFor:"AccessToken",style:{fontSize:"14px",fontWeight:"400"},children:c}),(0,Ae.jsx)(Ne().A,{id:"AccessToken",type:"password",value:x[h].tokenValue,onChange:e=>{st({key:"tokenValue",value:e.target.value,spaceId:h})},showClearButton:!0,placeholder:"Paste your token here",inputElementAttributes:{minLength:4}})]})})})]})]})]}),(0,Ae.jsxs)("div",{style:{flexGrow:0,flexShrink:0},children:[(0,Ae.jsx)(_e().A,{size:24}),(0,Ae.jsx)(Ue().A,{size:"lg",onClick:async()=>{const e=x[h].instanceValue??"Cloud",o=x[h].confluenceAuthenticationTypeValue??"OAuth2.0";await nt({environment:t,userEmail:x[h].emailValue,site:"/"===x[h].siteValue[x[h].siteValue.length-1]?x[h].siteValue.slice(0,-1):x[h].siteValue,access_token:"Server"===e&&"Basic"===o?void 0:x[h].tokenValue,instance:x[h].instanceValue??"Cloud",username:"Basic"===o?x[h].usernameValue:void 0,password:"Basic"===o?x[h].passwordValue:void 0,spaceId:h,flowId:f,requestStore:y}),u()},children:(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.authenticateButton.label",defaultMessage:"Authenticate"})}),(0,Ae.jsx)(qe().A,{size:"lg",style:{marginLeft:12},onClick:()=>{u()},children:(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.cancelButton.label",defaultMessage:"Cancel"})})]})]})})}const it=(0,g().j4)((function(e){var t,o;const s=(0,g().tz)(),r=(0,n().K8)((()=>I.getState()),[]),{spaceStore:l,flowId:c}=e,d=[{name:s.formatMessage({id:"confluenceImportOption.actionsMenu.importViaApi",defaultMessage:"Import via API"}),captionText:s.formatMessage({id:"confluenceImportOption.actionsMenu.importViaApi.message",defaultMessage:"Recommended for the best import experience"}),action:()=>{e.handleApiImportClick("confluence",c),st({key:"open",value:!0,spaceId:l.id})}},{name:s.formatMessage({id:"confluenceImportOption.actionsMenu.importViaFile",defaultMessage:"Import via file"}),captionText:s.formatMessage({id:"confluenceImportOption.actionsMenu.importViaFile.message",defaultMessage:"Best for importing partial workspace content"}),action:()=>e.handleFileUploadClick("confluence",c)}],p=(0,a().v3)(),{device:u}=p,{confluenceResult:h,onComplete:y,requestStore:x,spaceViewStore:A}=e,{account:v}=h,S={spacesResult:void 0,showLoader:!1},{showLoader:j}=r[l.id]||S;function k(e,t){f().mM(p,{import_source:"confluence",data:{spaceKey:e,spaceName:t},flowId:c})}function b(e){return(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("label",{style:{fontSize:"12px",color:"rgba(55, 53, 47, 0.65)",paddingLeft:"12px"},children:(0,Ae.jsx)(g().sA,{id:"confluenceImportOption.search.title",defaultMessage:"Select a space to import"})}),(0,Ae.jsx)(Ze,{searchInputPlaceholder:s.formatMessage({id:"confluenceImportOption.search.placeholder",defaultMessage:"Search for a Space"}),noSearchResultsPlaceholder:s.formatMessage({id:"confluenceImportOption.search.noResultsPlaceholder",defaultMessage:"No Spaces"}),sections:[e],onComplete:async e=>{await async function(e){const{environment:t,onComplete:o,selectedSpace:s,spaceStore:a,spaceViewStore:n,flowId:r}=e,i=await C().Od({environment:t,spaceStore:a,spaceViewStore:n,space:s,flowId:r||m().JW()});o(i,"confluence")}({environment:p,onComplete:y,selectedSpace:e,spaceStore:l,spaceViewStore:A,flowId:c})},handleClickImportConfluenceWorkspace:k})]})}const T={title:"Confluence",logo:i().A.images.import.confluencePng,caption:v,actionButton:v&&j?(0,Ae.jsx)(de().A,{}):v&&e.renderItemActionsButton([{name:s.formatMessage({id:"confluenceImportOption.actionsMenu.importViaFile",defaultMessage:"Import via file"}),action:()=>e.handleFileUploadClick("confluence",c)},{name:s.formatMessage({id:"confluenceImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another instance"}),action:()=>{e.handleApiImportClick("confluence",c),st({key:"open",value:!0,spaceId:l.id})}},{name:s.formatMessage({id:"confluenceImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>async function(e){const{environment:t,spaceId:o,requestStore:s}=e;I.setState({...I.state,[o]:{...I.state[o],showLoader:!1}}),await We().Pz(t,s,o)}({environment:p,spaceId:l.id,requestStore:x})}]),onClick:()=>{}},M=(null===(t=r[l.id])||void 0===t||null===(t=t.spacesResult)||void 0===t?void 0:t.spaces)||[],F={key:"default",name:s.formatMessage({id:"confluenceImportOption.spacesProperty.defaultName",defaultMessage:"Spaces"}),items:M.map((e=>({id:e.id,key:e.key,name:e.name})))},P={key:"section",render:e=>(0,Ae.jsx)(ge().A,{...e}),items:d.map((e=>{let{name:t,captionText:o,action:s}=e;const a={key:t,render:e=>(0,Ae.jsx)(re().A,{...e,title:t,caption:o,captionStyle:o?ot:void 0}),action:s};return a}))},B=s.formatMessage({id:"confluenceAuthentication.emailHelpText",defaultMessage:"Email address of the Confluence user importing the data"}),R=s.formatMessage({id:"confluenceAuthentication.instanceHelperText",defaultMessage:"On Confluence, click 'Help', the (?) next to your profile, then click on 'About Confluence' this will tell you if it is a Server, Cloud or Data Center"}),L=s.formatMessage({id:"confluenceAuthentication.siteHelperText",defaultMessage:"The base URL that is used to access Confluence. If you are running on a non-standard port, please provide the input in host:port format"}),D=s.formatMessage({id:"confluenceAuthentication.stepsToGetConfluenceAccessToken.captions",defaultMessage:"Click to learn how to get access token from Confluence cloud"}),W=s.formatMessage({id:"confluenceAuthentication.stepsToGetConfluencePAT.caption",defaultMessage:"Click to learn how to get personal authentication token from Confluence server"}),O=s.formatMessage({id:"confluenceAuthentication.stepsToGetConfluenceVersion.captions",defaultMessage:"Click to learn how to know the version of Confluence you are running"}),V=s.formatMessage({id:"confluenceAuthentication.usernameHelpText",defaultMessage:"Username of the Confluence user importing the data"}),z=s.formatMessage({id:"confluenceAuthentication.passwordHelpText",defaultMessage:"Password of the Confluence user importing the data"});return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(ie().Ay,{popupType:u.isMobile?ie().z7.SlideUp:ie().z7.Popup,onClick:()=>{f().fJ(p,{import_source:"confluence",from:"settings_modal",userId:p.currentUser.id,spaceId:l.id,flowId:c}),v&&w({environment:p,requestStore:x,spaceId:l.id}).catch((()=>{}))},buttonPopupStore:$().A,render:e=>v?function(e){return j?(0,Ae.jsx)(Ae.Fragment,{}):b(e)}(F):(0,Ae.jsx)(pe().A,{menuType:_().gu.Popup,width:200,children:(0,Ae.jsx)(me().Ay,{onAccept:e.close,type:me().Oh.Vertical,initialFocus:void 0,sections:[P]})}),renderOrigin:e=>{let{onClick:t}=e;return(0,Ae.jsx)(je,{...T,onClick:t})}}),(0,Ae.jsx)(Ee().A,{open:null===(o=r[l.id])||void 0===o?void 0:o.open,innerStyle:{width:600,maxWidth:"calc(100vw - 100px)",overflow:"hidden",borderRadius:5,maxHeight:"90vh"},onDismiss:()=>{st({key:"open",value:!1,spaceId:l.id})},render:()=>(0,Ae.jsx)(rt,{hidePopup:()=>{st({key:"open",value:!1,spaceId:l.id})},environment:p,title:(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.titleMessage",defaultMessage:"Authentication details"}),email:(0,Ae.jsxs)(Qe().Ye,{style:{alignItems:"center",gap:2},children:[(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.emailMessage",defaultMessage:"Email"}),(0,Ae.jsx)(he().A,{placement:U().W.Right,renderTooltip:()=>B,render:e=>(0,Ae.jsx)(le().A,{ariaLabel:B,disableBackground:!0,icon:De().G,...e})})]}),accountType:(0,Ae.jsxs)(Qe().Ye,{style:{alignItems:"center",gap:2},children:[(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.instanceMessage",defaultMessage:"Confluence instance"}),(0,Ae.jsx)(he().A,{style:{width:300,whiteSpace:"normal"},placement:U().W.Right,renderTooltip:()=>R,render:e=>(0,Ae.jsx)(le().A,{ariaLabel:R,disableBackground:!0,icon:De().G,...e})})]}),site:(0,Ae.jsxs)(Qe().Ye,{style:{alignItems:"center",gap:2},children:[(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.siteMessage",defaultMessage:"Site"}),(0,Ae.jsx)(he().A,{style:{width:300,whiteSpace:"normal"},placement:U().W.Right,renderTooltip:()=>L,render:e=>(0,Ae.jsx)(le().A,{ariaLabel:L,disableBackground:!0,icon:De().G,...e})})]}),APIToken:(0,Ae.jsxs)(Qe().Ye,{style:{alignItems:"center",gap:2},children:[(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.apiTokenMessage",defaultMessage:"API token"}),(0,Ae.jsx)(he().A,{placement:U().W.Right,renderTooltip:()=>D,render:e=>(0,Ae.jsx)(le().A,{ariaLabel:D,onClick:()=>{window.open("https://support.atlassian.com/atlassian-account/docs/manage-api-tokens-for-your-atlassian-account","_blank")},icon:De().G,...e})})]}),personalAccessToken:(0,Ae.jsxs)(Qe().Ye,{style:{alignItems:"center",gap:2},children:[(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.personalAccessTokenMessage",defaultMessage:"Personal Access Token"}),(0,Ae.jsx)(he().A,{placement:U().W.Right,style:{width:300,whiteSpace:"normal"},renderTooltip:()=>W,render:e=>(0,Ae.jsx)(le().A,{ariaLabel:W,onClick:()=>{window.open("https://confluence.atlassian.com/enterprise/using-personal-access-tokens-1026032365.html","_blank")},icon:De().G,...e})})]}),confluenceVersion:(0,Ae.jsxs)(Qe().Ye,{style:{alignItems:"center",gap:2},children:[(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.confluenceVersion",defaultMessage:"Confluence version"}),(0,Ae.jsx)(he().A,{style:{width:300,whiteSpace:"normal"},placement:U().W.Right,renderTooltip:()=>O,render:e=>(0,Ae.jsx)(le().A,{ariaLabel:O,onClick:()=>{window.open("https://confluence.atlassian.com/confkb/how-do-i-know-what-version-of-confluence-is-running-179441565.html","_blank")},icon:De().G,...e})})]}),username:(0,Ae.jsxs)(Qe().Ye,{style:{alignItems:"center",gap:2},children:[(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.username",defaultMessage:"Username"}),(0,Ae.jsx)(he().A,{placement:U().W.Right,renderTooltip:()=>V,render:e=>(0,Ae.jsx)(le().A,{ariaLabel:V,disableBackground:!0,icon:De().G,...e})})]}),password:(0,Ae.jsxs)(Qe().Ye,{style:{alignItems:"center",gap:2},children:[(0,Ae.jsx)(g().sA,{id:"confluenceAuthentication.password",defaultMessage:"Password"}),(0,Ae.jsx)(he().A,{placement:U().W.Right,renderTooltip:()=>z,render:e=>(0,Ae.jsx)(le().A,{ariaLabel:z,disableBackground:!0,icon:De().G,...e})})]}),spaceId:l.id,flowId:c,requestStore:x})})]})}));var lt=()=>o(161479),ct=()=>o(496603),dt=()=>o(755636),pt=()=>o(372555),mt=(o(944114),()=>o(625830)),ut=()=>o(678553),gt=()=>o(538739);const ht=function(e){let{analyticsName:t,sections:o,searchInputPlaceholder:s,onComplete:a,noSearchResultsPlaceholder:r}=e;const i=(0,n().uB)(void 0,Ge);return(0,Ye().l)((()=>{const e=i.state.selection,[t]=o;if(t){const[o]=t.items;o&&e.add(o.key)}i.emit()})),(0,Ae.jsx)(pe().A,{menuType:_().gu.Popup,header:(0,Ae.jsx)(ft,{analyticsName:t,sections:o,searchInputPlaceholder:s,store:i}),footer:(0,Ae.jsx)(yt,{sections:o,onComplete:a,store:i}),width:280,maxHeight:350,children:(0,Ae.jsx)(xt,{sections:o,noSearchResultsPlaceholder:r,analyticsName:t,store:i})})};function ft(e){let{analyticsName:t,sections:o,searchInputPlaceholder:r,store:i}=e;const l=(0,a().v3)(),c=(0,s.useCallback)((()=>function(e,t,o){const{selection:s}=o.state;s.clear(),o.emit(),f().aq(e,{integration_name:t})}(l,t,i)),[l,t,i]),d=(0,s.useCallback)((()=>function(e,t,o,s){const{selection:a}=s.state;for(const n of t)for(const e of n.items)a.add(e.key);s.emit(),f().V(e,{integration_name:o})}(l,o,t,i)),[l,o,t,i]),p=(0,n().K8)((()=>i.state.searchQuery),[i]),m=Boolean(p);return(0,Ae.jsxs)(ge().A,{isInput:!0,desktopStyle:{paddingBottom:2},children:[(0,Ae.jsx)(Je().Ay,{focus:!0,focusAfterAnimation:!0,value:p,onChange:e=>{i.setState({...i.state,searchQuery:e.target.value})},placeholder:r}),(0,Ae.jsx)(ut().A,{isTokenTitle:!0,style:{marginTop:2},title:(0,Ae.jsxs)("div",{style:{marginLeft:-3},children:[(0,Ae.jsx)(Oe().p,{isGray:!0,size:"xs",onClick:d,disabled:m,disabledFeedback:!0,children:(0,Ae.jsx)(g().sA,{id:"importPopup.selectAll",defaultMessage:"Select all"})}),(0,Ae.jsx)(gt().A,{disabled:m}),(0,Ae.jsx)(Oe().p,{isGray:!0,size:"xs",onClick:c,disabled:m,disabledFeedback:!0,children:(0,Ae.jsx)(g().sA,{id:"importPopup.deselectAll",defaultMessage:"Deselect all"})})]})})]})}function yt(e){let{sections:t,onComplete:o,store:a}=e;const r=(0,s.useCallback)((()=>function(e,t,o){const{selection:s}=o.state,a=ct().Bq(e.map((e=>e.items))),n=[];s.forEach((e=>{const t=a.find((t=>t.key===e));t&&n.push(t)})),t(n)}(t,o,a)),[t,o,a]),i=0===(0,n().K8)((()=>a.state.selection.size),[a]);return(0,Ae.jsx)(ge().A,{topBorder:!0,desktopStyle:{paddingTop:8,paddingBottom:8},children:(0,Ae.jsx)(ut().A,{title:(0,Ae.jsx)(Ue().A,{disabled:i,onClick:r,children:(0,Ae.jsx)(g().sA,{id:"integrationImportPopup.importButton.label",defaultMessage:"Import"})})})})}function xt(e){let{sections:t,noSearchResultsPlaceholder:o,analyticsName:s,store:r}=e;const i=(0,a().v3)(),{searchQuery:l,selection:c}=(0,n().K8)((()=>{const{searchQuery:e,selection:t}=r.state;return{searchQuery:e,selection:t}}),[r]),d=t.map((e=>{const t=(0,$e().Ay)(l,e.items,(t=>`${t.name} ${e.name}`));return{...e,items:t}})).filter((e=>e.items.length>0));if(0===d.length)return(0,Ae.jsx)(ge().A,{children:(0,Ae.jsx)(Xe().A,{title:o})});const p=d.map((e=>({key:e.name,render:o=>(0,Ae.jsx)(ge().A,{...o,title:t.length>1?e.name:void 0}),items:e.items.map((e=>{const t=()=>function(e,t,o,s){const{selection:a}=s.state;a.has(e.key)?(a.delete(e.key),f().VW(t,{integration_name:o})):(a.add(e.key),f().q5(t,{integration_name:o})),s.emit()}(e,i,s,r);return{key:e.key,render:o=>(0,Ae.jsx)(Ve().A,{...o,title:e.name,icon:(0,Ae.jsx)(mt().A,{checked:c.has(e.key),size:16,onClick:t}),right:void 0!==e.count&&(0,Ae.jsx)(fe().A,{isSmall:!0,children:e.count})}),action:t}}))})));return(0,Ae.jsx)(me().Ay,{type:me().Oh.Vertical,initialFocus:void 0,sections:p})}const At=function(e){let{requestStore:t,analyticsFrom:o,evernoteResult:r,renderItemActionsButton:c,defaultActionButton:d,spaceStore:p,spaceViewStore:m,userSettingsStore:u,onComplete:h}=e;const y=(0,a().v3)(),x=(0,g().tz)(),A=(0,n().K8)((()=>pt().A.getState()),[]),v=(0,s.useCallback)((()=>async function(e,t,o,s){var a;const{isFetchingNotebooks:n}=s;n&&await T().p({environment:e,requestStore:t});const r=G().A.getOrCreateFlowId();f().fJ(e,{import_source:"evernote",from:o,flowId:r,userId:e.currentUser.id,spaceId:null===(a=se().default.state.currentSpaceStore)||void 0===a?void 0:a.id})}(y,t,o,A)),[y,t,o,A]),{device:I}=y,{userInfo:w}=r,{notebooksResponse:k,showLoader:b}=A,M=(null==k?void 0:k.notebooks)||[],F=ct().$z(M,(e=>e.stack||""));(0,l().Yb)((async()=>{A.linkingAccount||(await t.refresh(),j().V())}),[A.linkingAccount,t]);const P=Object.keys(F).map((e=>{const t=e||"Top-Level";return{key:t,name:t,items:(F[e]||[]).map((e=>({key:e.guid,name:e.title,count:e.noteCount})))}})),B={title:"Evernote",logo:i().A.images.import.evernotePng,shouldWrapCaption:!w,caption:w?w.name||w.username||w.email:void 0,actionButton:w&&b?(0,Ae.jsx)(de().A,{}):w?c([{name:x.formatMessage({id:"evernoteImportOption.actionsMenu.learnMore",defaultMessage:"Learn more"}),action:()=>function(e){dt().f({environment:e,url:(0,E().xS)("guides.importEvernote")})}(y)},{name:x.formatMessage({id:"evernoteImportOption.actionsMenu.import",defaultMessage:"Import"}),action:()=>K().A.setState({open:!0})},{name:x.formatMessage({id:"evernoteImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>vt(t,y)},{name:x.formatMessage({id:"evernoteImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>async function(e,t){await S().callApi({eventName:"disconnectEvernote",environment:t,data:{}}),pt().A.setState({notebooksResponse:{notebooks:[]},isFetchingNotebooks:!0,showLoader:!1}),await e.refresh(),f().kO(t,{integration_name:"evernote"})}(t,y)}]):d,onClick:()=>{}};return(0,Ae.jsx)(ie().Ay,{popupType:I.isMobile?ie().z7.SlideUp:ie().z7.Popup,buttonPopupStore:K().A,onClick:v,render:()=>b?(0,Ae.jsx)(Ae.Fragment,{}):(0,Ae.jsx)(ht,{searchInputPlaceholder:x.formatMessage({id:"evernoteImportOption.search.placeholder",defaultMessage:"Search for a notebook…"}),noSearchResultsPlaceholder:x.formatMessage({id:"evernoteImportOption.search.noResultsPlaceholder",defaultMessage:"No notebooks"}),analyticsName:"evernote",sections:P,onComplete:e=>async function(e,t,o,s,a,n,r){const{notebooks:i}=e,l=i.filter((e=>Boolean(t.find((t=>t.key===e.guid)))));f().Pd(r,{integration_name:"evernote",count:t.length});const c=await C().U7({environment:r,spaceStore:o,spaceViewStore:s,userSettingsStore:a,notebooks:l});f().mM(r,{import_source:"evernote",data:{notebooks:l.map((e=>e.guid)),userId:r.currentUser.id,spaceId:(0,lt().e)(o.id)},flowId:G().A.getOrCreateFlowId()}),n(c,"evernote")}(k,e,p,m,u,h,y)}),renderOrigin:e=>{let{onClick:o}=e;return(0,Ae.jsx)(je,{...B,onClick:w?o:()=>vt(t,y)})}})};async function vt(e,t){await T().J({environment:t,requestStore:e})}var It=()=>o(415559),St=()=>o(126090),jt=()=>o(397740);const wt=new(ae().A);const kt=function(e){let{requestStore:t,renderItemActionsButton:o,spaceStore:r,spaceViewStore:l,pageStore:c,analyticsFrom:d,onComplete:p}=e;const m=(0,a().v3)(),u=(0,g().tz)(),{loading:h,areAccountsFetched:y,accountsResponse:x,selectedFileId:A}=(0,n().K8)((()=>{const{loading:e,areAccountsFetched:t,accountsResponse:o,selectedFileId:s}=jt().A.state;return{loading:e,areAccountsFetched:t,accountsResponse:o,selectedFileId:s}}),[]),v=(0,n().K8)((()=>wt.state.open),[]),{device:I}=m,j=x.accounts,w=(0,s.useCallback)((async()=>{await Tt({environment:m,requestStore:t,areAccountsFetched:y,analyticsFrom:d,googleDriveResponse:x,pageStore:c,spaceStore:r,spaceViewStore:l,onComplete:p,selectedFileId:A})}),[m,t,y,d,c,p,l,r,x,A]),k={title:"Google Docs",logo:i().A.images.import.googleDocsPng,actionButton:j&&j.length>0&&o([{name:u.formatMessage({id:"googleDocImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>async function(e){const{requestStore:t,spaceStore:o,spaceViewStore:s,environment:a,analyticsFrom:n,pageStore:r,onComplete:i}=e,l=await It().W3(a);l?(f()._$(a,{import_source:"gDocs",data:{import_type:"api",status:"success"}}),await t.refresh(),ee().A.setState({...ee().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),await Tt({environment:a,requestStore:t,areAccountsFetched:!1,analyticsFrom:n,googleDriveResponse:void 0,spaceStore:o,spaceViewStore:s,onComplete:i,pageStore:r})):f()._$(a,{import_source:"gDocs",data:{import_type:"api",status:"failure"}})}({environment:m,requestStore:t,analyticsFrom:d,pageStore:c,spaceStore:r,spaceViewStore:l,onComplete:p})},{name:u.formatMessage({id:"googleDocImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove All Accounts"}),action:()=>async function(e,t,o){if(!o||0===o.length)return;o.forEach((async e=>{await S().callApi({eventName:"disconnectDrive",environment:t,data:{googleUserId:e.accountId}})})),jt().A.setState({...jt().A.state,accountsResponse:{accounts:[]},loading:!1}),await e.refresh()}(t,m,j)}]),onClick:()=>{}},b={type:"drive",title:(0,Ae.jsx)(g().sA,{defaultMessage:"Browse Google Drive",id:"googleDriveBlock.mediaPicker.googleDriveTab.title"}),onSelect:async e=>await bt({account:e,onComplete:p,requestStore:t,spaceStore:r,spaceViewStore:l,analyticsFrom:d,pageStore:c,environment:m,selectedFileId:A})};return(0,Ae.jsx)(ie().Ay,{open:v,popupType:I.isMobile?ie().z7.SlideUp:ie().z7.Popup,buttonPopupStore:wt,onClick:w,onClose:()=>{jt().A.setState({...jt().A.state,selectedFileId:void 0})},render:()=>h?(0,Ae.jsx)(Ae.Fragment,{}):(0,Ae.jsx)(St().HR,{tab:b,accounts:j,type:St().aD.Docs}),renderOrigin:e=>{let{onClick:t}=e;return(0,Ae.jsx)(je,{...k,onClick:t})}})};async function bt(e){const{account:t,requestStore:o,spaceStore:s,spaceViewStore:a,environment:n,analyticsFrom:r,pageStore:i,onComplete:l,selectedFileId:c}=e;t&&t.token||await async function(e){const{requestStore:t,spaceStore:o,spaceViewStore:s,environment:a,analyticsFrom:n,pageStore:r,onComplete:i,selectedFileId:l}=e;await It().W3(a),await t.refresh(),await Tt({environment:a,requestStore:t,areAccountsFetched:!1,analyticsFrom:n,googleDriveResponse:void 0,spaceStore:o,spaceViewStore:s,onComplete:i,pageStore:r,selectedFileId:l})}({environment:n,requestStore:o,analyticsFrom:r,spaceStore:s,spaceViewStore:a,onComplete:l,pageStore:i,selectedFileId:c}),t&&t.token&&(c?await Ct({fileId:c,token:t.token,environment:n,spaceStore:s,spaceViewStore:a,analyticsFrom:r,onComplete:l,pageStore:i}):await(0,W().openGoogleDriveFilePicker)({environment:n,accessToken:t.token.accessToken,viewType:"documents",from:"import_google_doc",callback:async e=>{await Ct({fileId:e,token:t.token,environment:n,spaceStore:s,spaceViewStore:a,analyticsFrom:r,onComplete:l,pageStore:i})}}),wt.setState({...wt.state,open:!1}))}async function Tt(e){var t;const{requestStore:o,spaceStore:s,spaceViewStore:a,environment:n,analyticsFrom:r,pageStore:i,onComplete:l,googleDriveResponse:c,areAccountsFetched:d,selectedFileId:p}=e;let m=c;d||(jt().A.setState({...jt().A.state,loading:!0}),m=await It().QZ(n),m&&m.accounts&&jt().A.setState({...jt().A.state,accountsResponse:m,areAccountsFetched:!0,loading:!1})),f().fJ(n,{import_source:"gdocs",from:r,userId:n.currentUser.id,spaceId:null===(t=se().default.state.currentSpaceStore)||void 0===t?void 0:t.id});const u=m&&1===m.accounts.length?m.accounts[0]:void 0;return u?await bt({account:u,onComplete:l,requestStore:o,spaceStore:s,spaceViewStore:a,analyticsFrom:r,pageStore:i,environment:n,selectedFileId:p}):(wt.setState({...wt.state,open:!0}),await o.refresh()),m}async function Ct(e){const{fileId:t,token:o,environment:s,spaceStore:a,spaceViewStore:n,analyticsFrom:r,onComplete:i,pageStore:l}=e;l&&(jt().A.setState({...jt().A.state,loading:!0}),await C().ZB({environment:s,fileId:t,token:o,spaceStore:a,spaceViewStore:n,pageStore:l,analyticsFrom:r}).then((e=>{e&&(h().v(s,{from:"import",type:"page",new_page_id:e.id,creating_block_id:e.id,parent_collection_id:e.getParentCollectionIdUpToTwoLevels()}),i(e,"gdocs"))})).catch((()=>{})),jt().A.setState({...jt().A.state,loading:!1,selectedFileId:void 0}))}o(737550);var Mt=()=>o(664133);const Ft=function(e){const t=(0,a().v3)(),{device:s}=t,{jiraResult:r,spaceStore:l,requestStore:c}=e,d=(0,n().K8)((()=>q().p4(l)),[l]),p=(0,n().K8)((()=>q().IL(l)),[l]),{account:u,isOwner:h}=(0,n().K8)((()=>{const e=r.account;if(e){const t=o(53137).A.state;if(t.loaded){const o=e.find((e=>t.externalAuthentications.some((t=>t.id===e.id))));return o?{account:o,isOwner:Boolean(o)}:{account:e[0],isOwner:!1}}}return{}}),[r]),f=(0,g().tz)(),y=[{name:f.formatMessage({id:"jiraImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another instance"}),action:()=>{Mt().jh({environment:t,from:"import_settings",action:"add_account"});const e=X().Ay.createNewFlowId();(0,P().u4)({environment:t,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"imports_tab",flowId:e}}})}}];u&&h&&y.push({name:f.formatMessage({id:"jiraImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>{We().ml({environment:t,requestStore:c,botId:u.id})}});const x={title:"Jira",logo:i().A.images.externalIntegrations.jiraIconPng,onClick:()=>{},caption:null==u?void 0:u.site,actionButton:d&&u?e.renderItemActionsButton(y):null,showNewBadge:e.showNewBadge,showSyncBadge:e.showSyncBadge};return p?(0,Ae.jsx)(Ae.Fragment,{}):(0,Ae.jsx)(ie().Ay,{renderOrigin:e=>{let{onClick:o}=e;return(0,Ae.jsx)(je,{...x,onClick:()=>{const e=m().JW();X().Ay.setState({...X().Ay.state,flowId:e,spaceId:l.id,botId:null==u?void 0:u.id}),Mt().jh({environment:t,from:"import_settings",action:"show_teamspaces"}),(0,P().u4)({environment:t,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"imports_tab",flowId:e}}})}})},popupType:s.isMobile?ie().z7.SlideUp:ie().z7.Popup,render:()=>(0,Ae.jsx)(Ae.Fragment,{})})};var Pt=()=>o(468093);const Bt={whiteSpace:"pre-wrap"};function Rt(e){const t=(0,g().tz)(),o=(0,n().O$)(Q().A),{environment:s,spaceStore:a,flowId:r}=e,i=t.formatMessage({id:"mondayAuthentication.emailHelpText",defaultMessage:"Email address of the Monday.com user importing the data"}),l=t.formatMessage({id:"mondayAuthentication.stepsToGetMondayAPIToken.captions",defaultMessage:"Click to learn how to get API token from Monday.com"});return(0,Ae.jsx)(Ee().A,{open:o.showAuthPopup,innerStyle:{width:600,maxWidth:"calc(100vw - 100px)",overflow:"hidden",borderRadius:5,maxHeight:"90vh"},onDismiss:()=>{Q().A.setState({...Q().A.state,showAuthPopup:!1})},render:()=>(0,Ae.jsx)(Lt,{hidePopup:()=>{Q().A.setState({...Q().A.state,showAuthPopup:!1})},environment:s,title:(0,Ae.jsx)(g().sA,{id:"mondayAuthentication.titleMessage",defaultMessage:"Authentication details"}),email:(0,Ae.jsxs)(Qe().Ye,{style:{alignItems:"center",gap:2},children:[(0,Ae.jsx)(g().sA,{id:"mondayAuthentication.emailMessage",defaultMessage:"Email"}),(0,Ae.jsx)(he().A,{placement:U().W.Right,renderTooltip:()=>i,render:e=>(0,Ae.jsx)(le().A,{...e,ariaLabel:i,disableBackground:!0,icon:De().G})})]}),APIToken:(0,Ae.jsxs)(Qe().Ye,{style:{alignItems:"center",gap:2},children:[(0,Ae.jsx)(g().sA,{id:"mondayAuthentication.apiTokenMessage",defaultMessage:"API token"}),(0,Ae.jsx)(he().A,{placement:U().W.Right,renderTooltip:()=>l,render:e=>(0,Ae.jsx)(le().A,{...e,ariaLabel:l,onClick:()=>{window.open("https://developer.monday.com/api-reference/docs/authentication#accessing-api-tokens","_blank")},icon:De().G})})]}),flowId:r,spaceStore:a})})}function Lt(e){let{environment:t,title:o,email:s,APIToken:a,hidePopup:i,flowId:l,spaceStore:c}=e;const d=(0,n().O$)(Q().A),p=(0,r().IS)((e=>({title:{fontWeight:ye().Wy.semibold},inputLabels:{fontSize:"14px",fontWeight:"400"},helpText:{textAlign:"center",marginTop:"5px",lineHeight:"15px",fontSize:12,color:e.lightTextColor}})),[]);return(0,Ae.jsx)(ze().A,{debugName:"MondayImportOption",capture:!0,children:(0,Ae.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",padding:20,width:"100%"},children:[(0,Ae.jsxs)("div",{style:{overflowY:"scroll"},children:[(0,Ae.jsxs)("div",{style:{marginBottom:24},children:[(0,Ae.jsx)("div",{style:p.title,children:o}),(0,Ae.jsx)(Pt().W,{style:{marginLeft:-4}})]}),(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("label",{htmlFor:"email",style:{...p.inputLabels},children:s}),(0,Ae.jsx)(Ne().A,{id:"email",value:d.email,autoComplete:"off",autoCapitalize:"off",onChange:e=>{Q().A.setState({...Q().A.state,email:e.target.value})},showClearButton:!0,placeholder:"notion@acmelabs.com",inputElementAttributes:{minLength:4}}),(0,Ae.jsx)(_e().A,{size:12,isHidden:!0}),(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("label",{htmlFor:"APIToken",style:{...p.inputLabels},children:a}),(0,Ae.jsx)(Ne().A,{id:"AccessToken",type:"password",value:d.APIToken,onChange:e=>{Q().A.setState({...Q().A.state,APIToken:e.target.value})},showClearButton:!0,placeholder:"Paste your token here",inputElementAttributes:{minLength:4}})]})]})]}),(0,Ae.jsxs)("div",{style:{flexGrow:0,flexShrink:0},children:[(0,Ae.jsx)(_e().A,{size:24}),(0,Ae.jsx)(Ue().A,{size:"lg",onClick:async()=>{await M().Sq({environment:t,userEmail:d.email,APIToken:d.APIToken,flowId:l,spaceId:c.id}),i()},children:(0,Ae.jsx)(g().sA,{id:"mondayAuthentication.authenticateButton.label",defaultMessage:"Authenticate"})}),(0,Ae.jsx)(qe().A,{size:"lg",style:{marginLeft:12},onClick:()=>{i()},children:(0,Ae.jsx)(g().sA,{id:"mondayAuthentication.cancelButton.label",defaultMessage:"Cancel"})})]})]})})}const Dt=function(e){const t=(0,n().O$)(Q().A),o=(0,n().O$)(G().A),{account:r,isLoadingMondayWorkspaces:l}=t,{spaceStore:d}=e,p=(0,a().v3)(),u=(0,g().tz)(),{device:h}=p,y=o.flowId||m().JW();(0,s.useEffect)((()=>{o.flowId||G().A.setState({flowId:y})}),[y,o]);const x={title:u.formatMessage({id:"mondayImportOption.mondayButton.title",defaultMessage:"Monday.com"}),logo:i().A.images.import.mondayPng,showNewBadge:!0,caption:r,actionButton:r?(A=[{name:u.formatMessage({id:"mondayImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>{Q().A.setState({...Q().A.state,showAuthPopup:!0})}},{name:u.formatMessage({id:"mondayImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>M().pX({environment:p,spaceId:d.id})}],(0,Ae.jsx)(ie().Ay,{popupType:ue().nl.Popup,renderOrigin:e=>l?(0,Ae.jsx)(de().A,{}):(0,Ae.jsx)(le().A,{ariaLabel:u.formatMessage({id:"mondayImportOption.mondayButton.ariaLabel",defaultMessage:"Import from Monday.com button"}),icon:c()._,...e}),render:e=>{const t=A.map((t=>{let{name:o,captionText:s,action:a}=t;const n={key:o,render:e=>(0,Ae.jsx)(re().A,{...e,title:o,caption:s,captionStyle:s?Bt:void 0}),action:()=>{a(),e.close()}};return n})),o={key:"section",render:e=>(0,Ae.jsx)(ge().A,{...e}),items:t};return(0,Ae.jsx)(pe().A,{menuType:_().gu.Popup,width:200,children:(0,Ae.jsx)(me().Ay,{type:me().Oh.Vertical,initialFocus:void 0,sections:[o]})})}})):void 0,onClick:()=>{}};var A;return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(ie().Ay,{onClick:async()=>{Q().A.resetImport(),r?(f().fJ(p,{import_source:"monday.com",from:e.analyticsFrom,userId:p.currentUser.id,spaceId:d.id,flowId:y}),await M().Jq({environment:p,spaceId:d.id}),M().qf()):Q().A.setState({...Q().A.state,showAuthPopup:!0})},popupType:h.isMobile?ie().z7.SlideUp:ie().z7.Popup,buttonPopupStore:ne,renderOrigin:e=>{let{onClick:t}=e;return(0,Ae.jsx)(je,{...x,onClick:t})},render:()=>null}),(0,Ae.jsx)(Rt,{environment:p,spaceStore:d,flowId:y})]})};var Wt=()=>o(442277),Ot=()=>o(66913),Vt=()=>o(426388),_t=()=>o(997769),zt=(o(16280),()=>o(179034)),Nt=()=>o(319625);const Et=(0,o(583835).Dv)("importQuip");var qt=()=>o(972435);class Ut extends A().default{getInitialState(){return{showAuthPopup:!1,email:void 0,spaceId:void 0,personalAccessToken:void 0,companyId:void 0,account:void 0,accountEmail:void 0,isFetchingAccount:!1,authResponse:void 0,invalidFields:[]}}resetImport(){const{account:e,accountEmail:t}=this.getState();this.setState({...this.getInitialState(),account:e,accountEmail:t})}}const Ht=new Ut;var Yt=()=>o(630116),$t=()=>o(357625);const Kt=(0,g().YK)({importFailed:{id:"quipActions.importFailedError.message",defaultMessage:"Import failed"},importingFromQuipMessage:{id:"quipActions.importingFromQuip.loadingMessage",defaultMessage:"Importing from quip."},importRootPageTitle:{id:"quipImport.importRootPageTitle",defaultMessage:"Import {date}"}});async function Gt(e){const{environment:t,spaceStore:o}=e;if(!t.currentUser.id)throw new Error("User does not exist");let s,a;j().m({message:Kt.importingFromQuipMessage}),Ht.setState({...Ht.state});try{const e=await S().callApi({eventName:"getQuipAccount",environment:t,data:{spaceId:o.id}});if("success"!==e.type)throw new Error("User account does not exist");s=e.data.email;const n=(0,$t().UT)(t,Et,{userId:t.currentUser.id,email:s,page:{spaceId:o.id}});for await(const t of n){if(t.error)throw t.error;t.value.isComplete||(t.value.rootPageId&&(a=t.value.rootPageId),j().m(t.value.status))}if(!a)throw new Error("No root page");j().V();return Yt().Bv.createChildStore(o,{id:a,table:zt().ev,spaceId:o.id})}catch(n){throw x().f1(qt().A.formatMessage(Kt.importFailed)),j().V(),new Error((0,Nt().A)(n).message)}}var Jt=()=>o(719147);const Xt={whiteSpace:"pre-wrap"},Qt=(0,g().YK)({successfullyConnected:{id:"quipActions.successfullyConnected.message",defaultMessage:"Successfully connected quip instance"},authenticationFailed:{id:"quipActions.authenticationFailed.message",defaultMessage:"Authentication Failed (Please check user details)"},disconnectFailed:{id:"quipActions.disconnectFailed.message",defaultMessage:"Disconnect Account Failed"},headerTitle:{id:"quipActions.header.title",defaultMessage:"Import from Quip"},importCta:{id:"quipActions.importCta",defaultMessage:"Import"}});function Zt(){return(0,r().IS)((e=>({title:{fontWeight:ye().Wy.semibold},inputLabels:{fontSize:ye().J.UISmall.desktop,fontWeight:ye().Wy.semibold,font:"SF Pro",lineHeight:ye().K_.UISmall.desktop,color:e.lightTextColor},placeHolder:{font:"SF Pro",fontWeight:ye().Wy.regular,fontSize:ye().J.UIRegular.desktop,lineHeight:ye().K_.UISmall.desktop},helpText:{textAlign:"center",marginTop:"5px",lineHeight:"15px",fontSize:12,color:e.lightTextColor},inputBox:{width:"100%",height:28,padding:4,gap:4,radius:"default"},captionText:{font:"SF Pro",fontWeight:ye().Wy.regular,lineHeight:ye().K_.UISmall.desktop,fontSize:ye().J.UISmall.desktop,color:e.lightTextColor},spinner:{width:"100%",height:"100%",backgroundColor:e.modalUnderlayBackground,position:"absolute",top:0,left:0},wrapper:{padding:"20px 14px 10px 14px",height:"100%",display:"flex",flexDirection:"column"},header:{fontWeight:ye().Wy.medium,fontSize:17,textAlign:"center",marginTop:8},description:{fontWeight:ye().Wy.regular,color:e.mediumTextColor,fontSize:ye().J.UIRegular.desktop,maxHeight:72,textAlign:"center",padding:"0px 68px",marginBottom:24},icon:{height:40,width:40},iconGroup:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gridColumnGap:9,marginBottom:9},arrowRight:{width:20,height:20,opacity:.4,fontWeight:ye().Wy.bold,padding:3},notionLogo:{height:40,width:40,color:e.regularIconColor},closeButton:{position:"absolute",top:14,right:14,zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:14,fill:e.mediumTextColor},headerWrapper:{marginBottom:18},invalidInput:{boxShadow:e.outlineRedInputBoxShadow},buttonItem:{color:e.mediumTextColor}})),[])}function eo(e){const t=(0,n().O$)(Ht),o=Zt(),{isFetchingAccount:s}=t,{environment:a,spaceStore:r,onComplete:i}=e;return(0,Ae.jsx)(Ee().A,{open:t.showAuthPopup,innerStyle:{width:450,height:"fit-content",overflow:"scroll",borderRadius:5,maxHeight:675,minHeight:300,padding:6},onDismiss:()=>{Ht.setState({...Ht.state,invalidFields:[],showAuthPopup:!1,personalAccessToken:"",email:""})},render:()=>s?(0,Ae.jsx)(to,{loading:t.isFetchingAccount}):(0,Ae.jsxs)("div",{style:o.wrapper,children:[(0,Ae.jsx)(so,{handleModalClose:()=>{Ht.setState({...Ht.state,showAuthPopup:!1})}}),(0,Ae.jsx)(oo,{email:(0,Ae.jsx)(Qe().Ye,{style:{alignItems:"center",gap:2},children:(0,Ae.jsx)(g().sA,{id:"quipAuthentication.emailMessage",defaultMessage:"Email"})}),personalAccessToken:(0,Ae.jsx)(Qe().Ye,{style:{alignItems:"center",gap:2},children:(0,Ae.jsx)(g().sA,{id:"quipAuthentication.personalAccessTokenMessage",defaultMessage:"Personal Access Token"})})}),(0,Ae.jsx)(ao,{children:(0,Ae.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,Ae.jsx)(Ue().A,{onClick:async()=>{await async function(e){const{environment:t,email:o,personalAccessToken:s,spaceStore:a,companyId:n,account:r}=e,i=function(e){const{email:t,personalAccessToken:o}=e,s=[];t&&_t().t(t,"email")||s.push("email");o||s.push("personalAccessToken");return s}({email:o,personalAccessToken:s});if(i.length)return void Ht.setState({...Ht.state,showAuthPopup:!0,isFetchingAccount:!1,invalidFields:i});if(r){if(!(await io({environment:t,spaceStore:a})))return}const l=await async function(e){const{environment:t,email:o,personalAccessToken:s,spaceId:a,companyId:n}=e;if(Ht.setState({...Ht.state,isFetchingAccount:!0}),!(t.currentUser.id&&o&&a&&s))return;const r=await S().callApi({eventName:"authenticateQuipUser",environment:t,data:{userId:t.currentUser.id,email:o,personalAccessToken:s,spaceId:a,companyId:n}});return r&&"failed"!==r.type?r.data:void 0}({environment:t,email:o,personalAccessToken:s,spaceId:a.id,companyId:n});void 0===l?(x().rG({message:qt().A.formatMessage(Qt.authenticationFailed)}),Ht.setState({...Ht.state,showAuthPopup:!0,isFetchingAccount:!1})):Ht.setState({...Ht.state,showAuthPopup:!1,isFetchingAccount:!1})}({environment:a,email:t.email,spaceStore:r,personalAccessToken:t.personalAccessToken,companyId:t.companyId,account:t.account});const e=await Gt({environment:a,spaceStore:r});i(e,"quip")},children:(0,Ae.jsx)(g().sA,{...Qt.importCta})})})})]})})}function to(e){const t=Zt();return(0,Ae.jsx)(Ae.Fragment,{children:e.loading&&(0,Ae.jsx)("div",{style:t.spinner,children:(0,Ae.jsx)(de().A,{style:{position:"absolute",top:"50%",left:"50%"}})})})}function oo(e){let{email:t,personalAccessToken:o}=e;const s=(0,n().O$)(Ht),a=Zt();return(0,Ae.jsx)(ze().A,{debugName:"QuipImportOption",capture:!0,children:(0,Ae.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",width:"100%"},children:(0,Ae.jsx)("div",{style:{overflowY:"scroll"},children:(0,Ae.jsxs)("div",{style:{padding:2},children:[(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("label",{htmlFor:"email",style:{...a.inputLabels},children:t}),(0,Ae.jsx)(_e().A,{size:8,isHidden:!0}),(0,Ae.jsx)(Ne().A,{id:"email",value:s.email,autoComplete:"off",autoCapitalize:"off",onChange:e=>{Ht.setState({...Ht.state,email:e.target.value,invalidFields:[]})},showClearButton:!0,placeholder:"notion@acmelabs.com",style:{...a.inputBox,...s.invalidFields.includes("email")&&a.invalidInput}})]}),(0,Ae.jsx)(_e().A,{size:14,isHidden:!0}),(0,Ae.jsxs)("div",{children:[(0,Ae.jsx)("label",{htmlFor:"personalAccessToken",style:{...a.inputLabels},children:o}),(0,Ae.jsx)(_e().A,{size:8,isHidden:!0}),(0,Ae.jsx)(Ne().A,{id:"personalAccessToken",type:"password",value:s.personalAccessToken,showClearButton:!0,onChange:e=>{Ht.setState({...Ht.state,personalAccessToken:e.target.value,invalidFields:[]})},placeholder:"Paste your token here",inputElementAttributes:{minLength:4},style:{...a.inputBox,...s.invalidFields.includes("personalAccessToken")&&a.invalidInput}}),(0,Ae.jsx)(_e().A,{size:8,isHidden:!0}),(0,Ae.jsx)("div",{style:{...a.captionText,marginBottom:18},children:(0,Ae.jsx)(g().sA,{id:"quipAuthentication.stepsToGetPersonalAccessToken",defaultMessage:"<getapitokenlink>Get Personal Access Token</getapitokenlink>",values:{getapitokenlink:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,Ae.jsx)(Jt().A,{external:!0,href:"https://quip.com/dev/token",onClick:()=>{},children:t})}}})})]})]})})})})}function so(e){let{handleModalClose:t,caption:o,title:s}=e;const a=Zt(),n=s||Qt.headerTitle;return(0,Ae.jsxs)("div",{style:a.headerWrapper,children:[(0,Ae.jsx)(xe().A,{onClick:t,style:a.closeButton,hoveredStyle:a.closeButtonHover,children:(0,Ot().V)(a.closeButtonIcon)}),(0,Ae.jsxs)("div",{style:a.iconGroup,children:[(0,Ae.jsx)("img",{style:a.icon,src:i().A.images.import.quipPng,alt:"Quip Icon"}),(0,Wt().B)(a.arrowRight),(0,Vt().S)(a.notionLogo)]}),(0,Ae.jsx)("div",{style:a.header,children:(0,Ae.jsx)(g().sA,{...n})}),o]})}function ao(e){return(0,Ae.jsx)("div",{children:e.children})}const no=function(e){const t=(0,n().O$)(G().A),o=(0,n().O$)(Ht),{spaceStore:r,onComplete:l}=e,{account:d,authResponse:p,accountEmail:u}=o,h=(0,a().v3)(),f=(0,g().tz)(),{device:y}=h,x=Zt(),A=(0,s.useCallback)((async()=>{await async function(e){const{environment:t,spaceStore:o,account:s,authResponse:a}=e;if(s)Ht.setState({...Ht.state,showAuthPopup:!1,personalAccessToken:void 0,email:void 0,companyId:void 0});else{Ht.setState({...Ht.state,isFetchingAccount:!0});let e=a;void 0===e&&(e=await async function(e){const{environment:t,spaceId:o}=e;let s={account:"",email:""};try{const e=await S().callApi({eventName:"getQuipAccount",environment:t,data:{spaceId:o}});"success"===e.type&&(s=e.data)}catch(a){}finally{return s}}({environment:t,spaceId:o.id})),e&&""!==e.account?Ht.setState({...Ht.state,showAuthPopup:!1,personalAccessToken:void 0,email:void 0,companyId:void 0,account:e.account,accountEmail:e.email}):Ht.setState({...Ht.state,isFetchingAccount:!1,showAuthPopup:!0})}}({environment:h,account:d,spaceStore:r,authResponse:p})}),[h,d,r,p]),v=t.flowId||m().JW();(0,s.useEffect)((()=>{t.flowId||G().A.setState({flowId:v})}),[v,t]);const I={title:f.formatMessage({id:"quipImportOption.quipButton.title",defaultMessage:"Quip"}),logo:i().A.images.import.quipPng,actionButton:d?(j=[{name:f.formatMessage({id:"quipImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>{ro({})}},{name:f.formatMessage({id:"quipImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove account"}),action:async()=>{await io({environment:h,spaceStore:r})}}],(0,Ae.jsx)(ie().Ay,{popupType:ue().nl.Popup,renderOrigin:e=>(0,Ae.jsx)(le().A,{ariaLabel:f.formatMessage({id:"quipImportOption.quipButton.ariaLabel",defaultMessage:"Import from Quip.com button"}),icon:c()._,...e}),render:e=>{const t=j.map((t=>{let{name:o,captionText:s,action:a}=t;const n={key:o,render:e=>(0,Ae.jsx)(re().A,{...e,title:o,caption:s,captionStyle:s?Xt:void 0}),action:()=>{a(),e.close()}};return n})),o={key:"section",render:e=>(0,Ae.jsx)(ge().A,{...e}),items:t};return(0,Ae.jsx)(pe().A,{menuType:_().gu.Popup,width:200,children:(0,Ae.jsx)(me().Ay,{type:me().Oh.Vertical,initialFocus:void 0,sections:[o]})})}})):void 0,onClick:()=>{}};var j;return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(ie().Ay,{onClick:A,popupType:y.isMobile?ie().z7.SlideUp:ie().z7.Popup,renderOrigin:e=>{let{onClick:t}=e;return(0,Ae.jsx)(je,{...I,onClick:t})},render:()=>d?(0,Ae.jsxs)(s.Fragment,{children:[(0,Ae.jsx)(ge().A,{children:(0,Ae.jsx)(Ve().A,{title:(0,Ae.jsx)(g().sA,{defaultMessage:"Import from {email}",id:"quipImportOption.menuItem.email.label",values:{email:u}}),onClick:async()=>{const e=await Gt({environment:h,spaceStore:r});l(e,"quip")},focused:!1})}),(0,Ae.jsx)(ge().A,{topBorder:!0,children:(0,Ae.jsx)(Ve().A,{title:(0,Ae.jsx)(g().sA,{defaultMessage:"Connect another account",id:"quipImportOption.menuItem.connectAnotherQuipAccount.label"}),onClick:()=>ro({}),style:x.buttonItem,focused:!1})})]}):null}),(0,Ae.jsx)(eo,{environment:h,spaceStore:r,flowId:v,onComplete:l})]})};function ro(e){Ht.setState({...Ht.state,isFetchingAccount:!1,showAuthPopup:!0,personalAccessToken:void 0,email:void 0,companyId:void 0})}async function io(e){const{environment:t,spaceStore:o}=e,s=await async function(e){const{environment:t,spaceId:o}=e,s=await S().callApi({eventName:"disconnectQuipAccount",environment:t,data:{spaceId:o}});if(s&&"failed"!==s.type)return s.data}({environment:t,spaceId:o.id});return void 0===s?(x().rG({message:qt().A.formatMessage(Qt.disconnectFailed)}),!1):(Ht.setState({...Ht.state,account:void 0,accountEmail:void 0}),!0)}const lo=function(e){let{requestStore:t,analyticsFrom:o,trelloResult:r,renderItemActionsButton:l,spaceStore:c,spaceViewStore:d,onComplete:p}=e;const m=(0,a().v3)(),u=(0,g().tz)(),{boardsResponse:h,showLoader:y,isFetchingBoards:x}=(0,n().K8)((()=>{const{boardsResponse:e,showLoader:t,isFetchingBoards:o}=te().A.state;return{boardsResponse:e,showLoader:t,isFetchingBoards:o}}),[]),A=(0,s.useCallback)((()=>async function(e,t,o,s){s&&await F()._(e,t);f().fJ(e,{import_source:"trello",from:o})}(m,t,o,x)),[m,t,o,x]),{device:v}=m,{account:I}=r,j=h.boards,w={key:"default",name:u.formatMessage({id:"trelloImportOption.boardProperty.defaultName",defaultMessage:"Boards"}),items:j.map((e=>({key:e.id,name:e.name})))},k={title:"Trello",logo:i().A.images.import.trelloPng,actionButton:I&&y?(0,Ae.jsx)(de().A,{}):I&&l([{name:u.formatMessage({id:"trelloImportOption.actionsMenu.import",defaultMessage:"Import"}),action:()=>J().A.setState({open:!0})},{name:u.formatMessage({id:"trelloImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>co(t,m)},{name:u.formatMessage({id:"trelloImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>async function(e,t){await S().callApi({eventName:"disconnectTrello",environment:t,data:{}}),te().A.setState({boardsResponse:{boards:[]},isFetchingBoards:!0,showLoader:!1}),await e.refresh(),f().kO(t,{integration_name:"trello"})}(t,m)}]),onClick:()=>{}};return(0,Ae.jsx)(ie().Ay,{popupType:v.isMobile?ie().z7.SlideUp:ie().z7.Popup,buttonPopupStore:J().A,onClick:A,render:()=>y?(0,Ae.jsx)(Ae.Fragment,{}):(0,Ae.jsx)(ht,{searchInputPlaceholder:u.formatMessage({id:"trelloImportOption.search.placeholder",defaultMessage:"Search for a board…"}),noSearchResultsPlaceholder:u.formatMessage({id:"trelloImportOption.search.noResultsPlaceholder",defaultMessage:"No boards found."}),analyticsName:"trello",sections:[w],onComplete:e=>async function(e,t,o,s,a,n){const{boards:r}=e,i=r.filter((e=>Boolean(t.find((t=>t.key===e.id)))));f().Pd(n,{integration_name:"trello",count:t.length});const l=await C().MW({environment:n,spaceStore:o,spaceViewStore:s,boards:i});f().mM(n,{import_source:"trello",data:{notebooks:i.map((e=>e.id)),userId:n.currentUser.id,spaceId:(0,lt().e)(o.id)}}),a(l,"trello")}(h,e,c,d,p,m)}),renderOrigin:e=>{let{onClick:o}=e;return(0,Ae.jsx)(je,{...k,onClick:I?o:()=>co(t,m)})}})};async function co(e,t){await F().P({environment:t,requestStore:e})}const po={display:"flex",alignItems:"center",justifyContent:"center",minHeight:240,width:"100%",overflow:"hidden"};function mo(e){let{analyticsFrom:t,spaceStore:o,onComplete:i,spaceViewStore:l,userSettingsStore:c,pageStore:d}=e;const p=(0,a().v3)(),m=(0,r().DP)(),[u,h]=(0,s.useState)(!1),f=(0,n().uB)(void 0,Z().A),y=(0,n().uB)(void 0,Z().A),x=(0,n().uB)(void 0,Z().A),A=(0,n().uB)(void 0,Z().A),v=(0,n().uB)(void 0,Z().A),I=(0,n().K8)((()=>Y().A.state.online),[]),S=(0,n().K8)((()=>ee().A.getState()),[]),j=(0,s.useCallback)((e=>{y.refresh=e.confluence,x.refresh=e.evernote,v.refresh=e.googleDoc,f.refresh=e.jira,A.refresh=e.trello}),[y,x,v,f,A]),w=(0,n().K8)((()=>xo()),[]),k=(0,s.useCallback)((e=>{if(e){const{defaultSubtab:s}=S;return u||(h(!0),ho({defaultSubtab:s,pageStore:d,spaceStore:o,spaceViewStore:l,trelloRequestStore:A,evernoteRequestStore:x,confluenceRequestStore:y,googleDocRequestStore:v,result:e,environment:p,onComplete:i,analyticsFrom:t,flowId:w})),ee().A.setState({...ee().A.state,defaultSubtab:void 0}),(0,Ae.jsx)("div",{style:po,children:(0,Ae.jsx)(Mo,{analyticsFrom:t,onComplete:i,spaceStore:o,spaceViewStore:l,userSettingsStore:c,pageStore:d,trelloRequestStore:A,evernoteRequestStore:x,confluenceRequestStore:y,jiraRequestStore:f,googleDocRequestStore:v,result:e})})}return(0,Ae.jsx)("div",{style:"onboarding"===t?{}:po,children:(0,Ae.jsx)(de().A,{})})}),[t,y,p,x,w,v,f,i,d,S,o,l,A,c,u]);return I?(0,Ae.jsx)(jo,{spaceStore:o,setRefreshers:j,renderChildren:k}):(0,Ae.jsx)("div",{style:{...po,fontSize:14,color:m.mediumTextColor},children:(0,Ae.jsx)(g().sA,{id:"importOptions.offlineErrorMessage",defaultMessage:"Please go online to import."})})}function uo(e){let{analyticsFrom:t,spaceStore:o,onComplete:s,spaceViewStore:i,userSettingsStore:l,pageStore:c}=e;const d=(0,a().v3)(),p=(0,r().DP)(),m=(0,n().uB)(void 0,Z().A),u=(0,n().uB)(void 0,Z().A),h=(0,n().uB)(void 0,Z().A),f=(0,n().uB)(void 0,Z().A),y=(0,n().uB)(void 0,Z().A),x=(0,n().uB)(void 0,Z().A),A=(0,n().uB)(void 0,Z().A),v=(0,n().K8)((()=>Y().A.state.online),[]),I=(0,n().K8)((()=>ee().A.getState()),[]),S=(0,n().K8)((()=>xo()),[]);return v?(0,Ae.jsx)(wo,{spaceStore:o,trelloRequestStore:x,asanaRequestStore:y,evernoteRequestStore:f,confluenceRequestStore:h,mondayRequestStore:u,jiraRequestStore:m,googleDocRequestStore:A,renderChildren:e=>{if(e){const{defaultSubtab:a}=I;return ho({defaultSubtab:a,pageStore:c,spaceStore:o,spaceViewStore:i,trelloRequestStore:x,evernoteRequestStore:f,confluenceRequestStore:h,googleDocRequestStore:A,result:e,environment:d,onComplete:s,analyticsFrom:t,flowId:S}),ee().A.setState({...ee().A.state,defaultSubtab:void 0}),(0,Ae.jsx)("div",{style:po,children:(0,Ae.jsx)(Mo,{analyticsFrom:t,onComplete:s,spaceStore:o,spaceViewStore:i,userSettingsStore:l,pageStore:c,trelloRequestStore:x,evernoteRequestStore:f,confluenceRequestStore:h,jiraRequestStore:m,googleDocRequestStore:A,result:e})})}return(0,Ae.jsx)("div",{style:"onboarding"===t?{}:po,children:(0,Ae.jsx)(de().A,{})})}}):(0,Ae.jsx)("div",{style:{...po,fontSize:14,color:p.mediumTextColor},children:(0,Ae.jsx)(g().sA,{id:"importOptions.offlineErrorMessage",defaultMessage:"Please go online to import."})})}const go=function(e){return(0,o(963589).X)("use_new_import_options")?(0,Ae.jsx)(mo,{...e}):(0,Ae.jsx)(uo,{...e})};function ho(e){let{defaultSubtab:t,environment:o,pageStore:s,spaceStore:a,spaceViewStore:n,trelloRequestStore:r,evernoteRequestStore:i,confluenceRequestStore:l,googleDocRequestStore:c,result:d,onComplete:p,analyticsFrom:g,flowId:x}=e;if(t){if(!u().fF.includes(t)||"gdocs"===t&&d.googleDocResult.isGoogleDocImporterEnabled||"csv"===t&&L())switch(t){case"trello":!function(e,t,o){const s=o.account;s?F()._(e,t).then((()=>{J().A.setState({open:!0})})).catch((()=>{te().A.setState({...te().A.state,isFetchingBoards:!1,showLoader:!1})})):F().P({environment:e,requestStore:t}).then((()=>{})).catch((()=>{}))}(o,r,d.trelloResult);break;case"evernote":!function(e,t,o){const{userInfo:s}=o;s?T().p({environment:e,requestStore:t}).then((()=>{K().A.setState({open:!0})})).catch((()=>{})):T().J({environment:e,requestStore:t}).then((()=>{})).catch((()=>{}))}(o,i,d.evernoteResult);break;case"monday":!function(e,t,o){t.user?M().Jq({environment:e,spaceId:o}).then((()=>{Q().A.setState({...Q().A.state,currentTab:"selectData",isModalOpen:!0})})).catch((()=>{})):Q().A.setState({...Q().A.state,showAuthPopup:!0})}(o,d.mondayResult,a.id);break;case"confluenceApi":!function(e,t,o,s){const{account:a}=t;ee().A.setState({...ee().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),a?w({environment:e,requestStore:s,spaceId:o}).then((()=>{$().A.setState({open:!0})})).catch((()=>{I.setState({...I.state,[o]:{...I.state[o],showLoader:!1}})})):I.setState({...I.state,[o]:{...I.state[o],open:!0}})}(o,d.confluenceResult,a.id,l);break;case"asana":!function(e,t){const{account:o}=t;o?y().xd({environment:e}).then((()=>{H().A.setState({...H().A.state,isModalOpen:!0})})).catch((()=>{H().A.setState({...H().A.state,isAccountLinkingInProgress:!1,isModalOpen:!1})})):y().x3({environment:e,flowId:m().JW()}).then((()=>{})).catch((()=>{}))}(o,d.asanaResult);break;case"jira":!function(e,t){const{account:o}=t;if(!o)return;const s=X().Ay.getState(),a=X().Ay.createNewFlowId();o.length?(X().Ay.setState({...s,type:"teamspace-selection",open:!0}),(0,P().u4)({environment:e,event:{eventName:"external_sync_teamspace_selection",eventProperties:{integration:"jira",actionType:"teamspace_modal_render",flowId:a}}})):(X().Ay.setState({...s,type:"auth",open:!0}),(0,P().u4)({environment:e,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_render",flowId:a}}}));ee().A.setState(ee().A.getInitialState())}(o,d.jiraResult);break;case"gdocs":!function(e){const{requestStore:t,spaceStore:o,spaceViewStore:s,environment:a,analyticsFrom:n,pageStore:r,onComplete:i,areAccountsFetched:l,googleDriveResponse:c,selectedFileId:d}=e;Tt({environment:a,requestStore:t,areAccountsFetched:l,analyticsFrom:n,googleDriveResponse:c,pageStore:r,spaceStore:o,spaceViewStore:s,selectedFileId:d,onComplete:i}).then((()=>{})).catch((()=>{}))}({environment:o,requestStore:c,analyticsFrom:g,pageStore:s,onComplete:p,spaceStore:a,spaceViewStore:n,areAccountsFetched:d.googleDocResult.areAccountsFetched,googleDriveResponse:d.googleDocResult.accountsResponse,selectedFileId:d.googleDocResult.selectedFileId});break;case"csv":b("import")}else!function(e){let{environment:t,pageStore:o,spaceStore:s,spaceViewStore:a,uploadType:n,onComplete:r,analyticsFrom:i}=e;if(!o)return;C().un({environment:t,pageStore:o,spaceStore:s,spaceViewStore:a,analyticsFrom:i,uploadType:n,flowId:m().JW()}).then((e=>{e&&(h().v(t,{from:"import",type:"page",new_page_id:e.id,creating_block_id:e.id,parent_collection_id:e.getParentCollectionIdUpToTwoLevels()}),r(e,n))})).catch((()=>{}))}({pageStore:s,spaceStore:a,spaceViewStore:n,environment:o,uploadType:t,onComplete:p,analyticsFrom:g});f().fJ(o,{import_source:t,from:g,flowId:x,userId:o.currentUser.id,spaceId:a.id})}}function fo(e){let{url:t,helpButtonMessage:o,helpMessageWidth:s,disableBackground:a}=e;return(0,Ae.jsx)(he().A,{renderTooltip:()=>o??(0,Ae.jsx)(g().sA,{id:"importOptions.helpButton.tooltip",defaultMessage:"Learn about how to import"}),style:{width:s??"max-content"},textWrap:!0,render:e=>(0,Ae.jsx)(ce().A,{external:!0,href:t,style:{marginLeft:"auto"},...e,children:(0,Ae.jsx)(le().A,{icon:d().$,disableBackground:a??!1})})})}function yo(e){let{actions:t}=e;return(0,Ae.jsx)(ie().Ay,{popupType:ue().nl.Popup,renderOrigin:e=>(0,Ae.jsx)(le().A,{icon:c()._,...e}),render:e=>{const o={key:"section",render:e=>(0,Ae.jsx)(ge().A,{...e}),items:t.map((t=>{let{name:o,action:s}=t;return{key:o,render:e=>(0,Ae.jsx)(Ve().A,{...e,title:o}),action:()=>{s(),e.close()}}}))};return(0,Ae.jsx)(pe().A,{menuType:_().gu.Popup,width:200,children:(0,Ae.jsx)(me().Ay,{type:me().Oh.Vertical,initialFocus:void 0,sections:[o]})})}})}function xo(){return G().A.state.flowId||m().JW()}async function Ao(e,t,o,s,a,n,r,i){f().fJ(n,{import_source:e,from:t,import_type:"file",flowId:i});const l=await C().un({environment:n,pageStore:r,spaceStore:o,spaceViewStore:s,analyticsFrom:t,uploadType:e,flowId:i});l&&(h().v(n,{from:"import",type:"page",new_page_id:l.id,creating_block_id:l.id,parent_collection_id:l.getParentCollectionIdUpToTwoLevels()}),a(l,e))}function vo(e){let{flowId:t,analyticsFrom:o,spaceStore:s,spaceViewStore:n,onComplete:r,pageStore:l}=e;const c=(0,a().v3)();return(0,Ae.jsx)(je,{title:"Confluence",logo:i().A.images.import.confluencePng,onClick:()=>Ao("confluence",o,s,n,r,c,l,t),actionButton:(0,Ae.jsx)(fo,{url:(0,E().xS)("guides.importConfluence")})})}function Io(e){let{analyticsFrom:t,spaceStore:o,spaceViewStore:a,onComplete:n,pageStore:r}=e;const l=(0,s.useCallback)((()=>{b("import")}),[]);return(0,Ae.jsx)(je,{title:"CSV",logo:i().A.images.import.csvPng,onClick:l})}function So(e){let{analyticsFrom:t,spaceStore:o,spaceViewStore:s,onComplete:n,pageStore:r}=e;const l=(0,a().v3)();return(0,Ae.jsx)(he().A,{placement:U().W.Bottom,render:e=>(0,Ae.jsx)(je,{tooltipEvents:e,title:"CSV",logo:i().A.images.import.csvPng,onClick:()=>Ao("csv",t,o,s,n,l,r)}),renderTooltip:()=>(0,Ae.jsx)(g().sA,{id:"importOptions.csvImport.tooltip",defaultMessage:"Ensure first row in the CSV is the header"})})}function jo(e){const{renderChildren:t,spaceStore:o,setRefreshers:r}=e,i=(0,a().v3)(),c=o.id,[d,p]=(0,l().Yb)((()=>(0,O().L)(i)),[i]),[m,u]=(0,l().Yb)((()=>(0,O().fG)(i,c)),[i,c]),[g,h]=(0,l().Yb)((()=>(0,O().PV)(i)),[i]),[f,y]=(0,l().Yb)((()=>(0,O().wc)()),[]),[x,A]=(0,l().Yb)((()=>(0,O().D1)(i,c)),[i,c]),[v,I]=(0,l().Yb)((()=>(0,O().$d)(i,c)),[i,c]),[S,j]=(0,l().Yb)((()=>(0,O().p1)(i)),[i]);(0,s.useEffect)((()=>{r({confluence:async()=>{await u()},evernote:async()=>{await h()},googleDoc:async()=>{await y()},jira:async()=>{await A()},trello:async()=>{await j()}})}),[r,p,u,h,y,A,I,j]);return(0,n().K8)((()=>t(S.value&&d.value&&g.value&&m.value&&v.value&&x.value&&f.value?{trelloResult:S.value,asanaResult:d.value,evernoteResult:g.value,confluenceResult:m.value,mondayResult:v.value,jiraResult:x.value,googleDocResult:f.value}:void 0)),[t,S,d,g,m,v,x,f])}function wo(e){let{renderChildren:t,spaceStore:o,trelloRequestStore:s,asanaRequestStore:n,evernoteRequestStore:r,confluenceRequestStore:i,mondayRequestStore:l,jiraRequestStore:c,googleDocRequestStore:d}=e;const p=(0,a().v3)();return(0,Ae.jsx)(Be().A,{request:p,performRequest:O().p1,requestStore:s,render:(e,s)=>(0,Ae.jsx)(Be().A,{request:p,performRequest:O().L,requestStore:n,render:(e,a)=>(0,Ae.jsx)(Be().A,{request:p,performRequest:O().PV,requestStore:r,render:(e,n)=>(0,Ae.jsx)(Be().A,{request:p,performRequest:()=>(0,O().fG)(p,o.id),requestStore:i,render:(e,r)=>(0,Ae.jsx)(Be().A,{request:p,performRequest:()=>(0,O().$d)(p,o.id),requestStore:l,render:(e,i)=>(0,Ae.jsx)(Be().A,{request:p,performRequest:()=>(0,O().D1)(p,o.id),requestStore:c,render:(e,o)=>(0,Ae.jsx)(Be().A,{request:p,performRequest:O().wc,requestStore:d,render:(e,l)=>t(s&&a&&n&&r&&i&&o&&l?{trelloResult:s,asanaResult:a,evernoteResult:n,confluenceResult:r,mondayResult:i,jiraResult:o,googleDocResult:l}:void 0)})})})})})})})}function ko(e){let{analyticsFrom:t,onComplete:o,spaceStore:s,spaceViewStore:a,userSettingsStore:n,googleDocRequestStore:r,pageStore:i}=e;return(0,Ae.jsx)(kt,{renderItemActionsButton:e=>(0,Ae.jsx)(yo,{actions:e}),onComplete:o,requestStore:r,spaceStore:s,spaceViewStore:a,userSettingsStore:n,pageStore:i,analyticsFrom:t})}function bo(e){let{trelloResult:t,analyticsFrom:o,onComplete:s,spaceStore:a,spaceViewStore:n,userSettingsStore:r,trelloRequestStore:i}=e;return(0,Ae.jsx)(lo,{trelloResult:t,analyticsFrom:o,renderItemActionsButton:e=>(0,Ae.jsx)(yo,{actions:e}),onComplete:s,requestStore:i,spaceStore:a,spaceViewStore:n,userSettingsStore:r})}function To(e){let{confluenceResult:t,flowId:o,analyticsFrom:s,onComplete:n,spaceStore:r,spaceViewStore:i,userSettingsStore:l,pageStore:c,confluenceRequestStore:d}=e;const p=(0,a().v3)();return(0,Ae.jsx)(it,{confluenceResult:t,analyticsFrom:s,flowId:o,renderItemActionsButton:e=>(0,Ae.jsx)(yo,{actions:e}),onComplete:n,spaceStore:r,requestStore:d,spaceViewStore:i,userSettingsStore:l,handleFileUploadClick:(e,t)=>Ao(e,s,r,i,n,p,c,t),handleApiImportClick:(e,t)=>function(e,t,o,s,a,n){w({environment:a,requestStore:t,spaceId:o.id}).catch((()=>{})),f().fJ(a,{import_source:e,from:s,import_type:"api",flowId:n})}(e,d,r,s,p,t)})}function Co(e){let{evernoteResult:t,onComplete:o,spaceStore:s,spaceViewStore:a,userSettingsStore:n,evernoteRequestStore:r}=e;return(0,Ae.jsx)(At,{evernoteResult:t,analyticsFrom:"onboarding",renderItemActionsButton:e=>(0,Ae.jsx)(yo,{actions:e}),defaultActionButton:(0,Ae.jsx)(fo,{url:(0,E().xS)("guides.importEvernote")}),onComplete:o,requestStore:r,spaceStore:s,spaceViewStore:a,userSettingsStore:n})}function Mo(e){let{result:t,analyticsFrom:o,onComplete:s,spaceStore:r,spaceViewStore:l,userSettingsStore:c,pageStore:d,trelloRequestStore:m,evernoteRequestStore:u,confluenceRequestStore:h,jiraRequestStore:f,googleDocRequestStore:y}=e;const x=(0,a().v3)(),A=(0,n().K8)((()=>xo()),[]),v=(0,n().K8)((()=>(0,B().n0)(x)),[x]),I=(0,n().K8)((()=>(0,z().c)()),[]),S=(0,n().K8)((()=>R().default.checkGate({gateName:"quip_importer"})),[]),j=(0,n().K8)((()=>(0,D().LB)()),[]),w=(0,n().K8)((()=>(0,D().jw)()),[]),k=(0,n().K8)((()=>(0,V().pB)()),[]),b=(0,n().K8)((()=>(0,q().p4)(r)),[r]),T=(0,n().K8)((()=>(0,V().yX)()),[])&&!b,C=(0,n().K8)((()=>(0,N().s)()),[]),M=(0,n().K8)((()=>(0,W().V)()),[]),F=(0,n().K8)((()=>L()),[]);return(0,Ae.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",overflow:"hidden",gridAutoRows:"1fr",gap:"4px 20px",padding:2,width:"100%"},children:[(0,Ae.jsx)(Pe,{}),v?(0,Ae.jsx)(To,{analyticsFrom:o,onComplete:s,spaceStore:r,spaceViewStore:l,userSettingsStore:c,pageStore:d,confluenceRequestStore:h,confluenceResult:t.confluenceResult,flowId:A}):(0,Ae.jsx)(vo,{analyticsFrom:o,spaceStore:r,spaceViewStore:l,onComplete:s,pageStore:d,flowId:A}),M?(0,Ae.jsx)(ko,{onComplete:s,spaceStore:r,spaceViewStore:l,userSettingsStore:c,googleDocRequestStore:y,pageStore:d,analyticsFrom:o}):(0,Ae.jsx)(je,{title:"Google Docs",logo:i().A.images.import.googleDocsPng,actionButton:(0,Ae.jsx)(fo,{url:(0,E().xS)("guides.importGoogleDocs")}),onClick:()=>Ao("gdocs",o,r,l,s,x,d)}),C&&(0,Ae.jsx)(je,{title:"PDF",showBetaBadge:!0,logo:i().A.images.import.pdfSvg,onClick:()=>Ao("pdf",o,r,l,s,x,d)}),F?(0,Ae.jsx)(Io,{analyticsFrom:o,spaceStore:r,spaceViewStore:l,onComplete:s,pageStore:d}):(0,Ae.jsx)(So,{analyticsFrom:o,spaceStore:r,spaceViewStore:l,onComplete:s,pageStore:d}),(0,Ae.jsx)(je,{title:(0,Ae.jsx)(g().sA,{id:"importOptions.textMarkdown.title",defaultMessage:"Text & Markdown"}),logo:i().A.images.import.textPng,onClick:()=>Ao("markdown",o,r,l,s,x,d)}),(0,Ae.jsx)(je,{title:"HTML",logo:i().A.images.import.htmlPng,onClick:()=>Ao("html",o,r,l,s,x,d)}),(0,Ae.jsx)(je,{title:"Word",logo:i().A.images.import.wordPng,onClick:()=>Ao("docx",o,r,l,s,x,d)}),(0,Ae.jsx)(je,{title:"Dropbox Paper",logo:i().A.images.import.dropboxPaperPng,actionButton:(0,Ae.jsx)(fo,{url:(0,E().xS)("guides.importDropboxPaper")}),onClick:()=>Ao("dropbox",o,r,l,s,x,d)}),(0,Ae.jsx)(bo,{analyticsFrom:o,onComplete:s,spaceStore:r,spaceViewStore:l,userSettingsStore:c,trelloRequestStore:m,trelloResult:t.trelloResult}),(0,Ae.jsx)(Co,{onComplete:s,spaceStore:r,spaceViewStore:l,userSettingsStore:c,evernoteRequestStore:u,evernoteResult:t.evernoteResult}),I&&(0,Ae.jsx)(Dt,{spaceStore:r,analyticsFrom:o,flowId:A}),S&&(0,Ae.jsx)(no,{spaceStore:r,analyticsFrom:o,flowId:A,onComplete:s}),!S&&(0,Ae.jsx)(je,{title:"Quip",logo:i().A.images.import.quipPng,actionButton:(0,Ae.jsx)(fo,{url:(0,E().xS)("guides.importQuip")}),onClick:()=>Ao("quip",o,r,l,s,x,d)}),(0,Ae.jsx)(je,{title:"Workflowy",logo:i().A.images.import.workflowyPng,actionButton:(0,Ae.jsx)(fo,{url:(0,E().xS)("guides.importWorkflowy")}),onClick:()=>Ao("workflowy",o,r,l,s,x,d)}),j&&!w&&(0,Ae.jsx)(je,{title:(0,Ae.jsx)(g().sA,{id:"importOptions.genericImporter.title",defaultMessage:"Universal import"}),icon:p().n,onClick:()=>Ao("genericImporter",o,r,l,s,x,d,A),actionButton:(0,Ae.jsx)(fo,{url:"",helpButtonMessage:(0,Ae.jsx)(g().sA,{id:"importOptions.universalImport.tooltip",defaultMessage:"Import any ZIP file that contains text, Markdown, CSV, HTML, and other files"}),helpMessageWidth:240,disableBackground:!0})}),k&&!T&&(0,Ae.jsx)(Ft,{flowId:A,spaceStore:r,showNewBadge:!1,showSyncBadge:!0,requestStore:f,jiraResult:t.jiraResult,renderItemActionsButton:e=>(0,Ae.jsx)(yo,{actions:e})})]})}},864896:(e,t,o)=>{o.d(t,{Y:()=>n});o(296540);var s=o(474848);const a={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M9.533.62a.625.625 0 0 1 .884 0l2.5 2.5a.625.625 0 1 1-.884.884l-1.408-1.408V11a.625.625 0 1 1-1.25 0V2.546L7.917 4.004a.625.625 0 1 1-.884-.883z"}),(0,s.jsx)("path",{d:"M8.125 5.125H5.5A2.125 2.125 0 0 0 3.375 7.25v7.5c0 1.174.951 2.125 2.125 2.125h9a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 14.5 5.125h-2.625v1.25H14.5c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-9a.875.875 0 0 1-.875-.875v-7.5c0-.483.392-.875.875-.875h2.625z"})]})},n=(0,o(340498).wt)("squareAndArrowUp",a)},911686:(e,t,o)=>{o.d(t,{mD:()=>re,Od:()=>ce,U7:()=>le,lD:()=>se,ZB:()=>ne,MW:()=>ie,un:()=>oe,DZ:()=>ee});o(16280),o(944114),o(898992),o(354520),o(803949),o(581454);var s=()=>o(662303),a=()=>o(584262),n=()=>o(700500),r=()=>o(869190),i=()=>o(857639),l=()=>o(416504),c=()=>o(416845),d=()=>o(206267),p=()=>o(490884),m=()=>o(72135),u=()=>o(179034),g=()=>o(161479),h=()=>o(319625),f=()=>o(496603),y=()=>o(229833),x=()=>o(763824),A=()=>o(578194),v=()=>o(609316),I=()=>o(583835);const S=(0,I().Dv)("importGoogleDoc"),j=(0,I().Dv)("importTrello"),w=(0,I().Dv)("parallelImportConfluenceExport"),k=(0,I().Dv)("parallelImportConfluenceViaApi"),b=(0,I().Dv)("partitionedUniversalImport");var T=()=>o(435009),C=()=>o(989423),M=()=>o(654534),F=()=>o(898486),P=()=>o(310795),B=()=>o(492414),R=()=>o(974233),L=()=>o(508496);const D=1073741824;var W=()=>o(972435),O=()=>o(770769),V=()=>o(214437),_=()=>o(113507),z=()=>o(313961),N=()=>o(712505),E=()=>o(630116),q=()=>o(404141),U=()=>o(559926),H=()=>o(449506),Y=()=>o(901389),$=()=>o(357625),K=()=>o(722101),G=()=>o(496414),J=()=>o(246826),X=()=>o(185544),Q=()=>o(317909),Z=()=>o(892632);const ee=(0,o(959013).YK)({uploadingOneFile:{id:"importActions.uploadingOneFile.loadingMessage",defaultMessage:"Uploading… ({percentComplete}%)"},uploadingMultipleFilesNotStarted:{id:"importActions.uploadingMultipleFilesNotStarted.loadingMessage",defaultMessage:"Uploaded 0 of {totalNumberOfFiles}"},uploadingMultipleFilesInProgress:{id:"importActions.uploadingMultipleFilesInProgress.loadingMessage",defaultMessage:"Uploaded {numberOfUploadedFiles} of {totalNumberOfFiles}"},uploadingMultipleFilesComplete:{id:"importActions.uploadingMultipleFilesComplete.loadingMessage",defaultMessage:"Uploaded {totalNumberOfFiles} of {totalNumberOfFiles}"},importingOneFile:{id:"importActions.importingOneFile.loadingMessage",defaultMessage:"Importing…"},importingMultipleFilesNotStarted:{id:"importActions.importingMultipleFilesNotStarted.loadingMessage",defaultMessage:"Imported 0 of {totalNumberOfFiles}"},importingMultipleFilesInProgress:{id:"importActions.importingMultipleFilesInProgress.loadingMessage",defaultMessage:"Imported {numberOfImportedFiles} of {totalNumberOfFiles}"},importingMultipleFilesComplete:{id:"importActions.importingMultipleFilesComplete.loadingMessage",defaultMessage:"Imported {totalNumberOfFiles} of {totalNumberOfFiles}"},importingFromTrelloMessage:{id:"importActions.importingFromTrello.loadingMessage",defaultMessage:"{importingCount, plural, one {Importing {importingCount} board from Trello} other {Importing {importingCount} boards from Trello}}"},importingFromAsanaMessage:{id:"importActions.importingFromAsana.loadingMessage",defaultMessage:"{importingCount, plural, one {Importing {importingCount} project from Asana} other {Importing {importingCount} projects from Asana}}"},importingFromEvernoteMessage:{id:"importActions.importingFromEvernote.loadingMessage",defaultMessage:"{importingCount, plural, one {Importing {importingCount} notebook from Evernote} other {Importing {importingCount} notebooks from Evernote}}"},importingFromConfluenceViaAPIMessage:{id:"importActions.importingFromConfluenceViaAPI.loadingMessage",defaultMessage:"Importing confluence space: {confluenceSpaceKey}."},importFailed:{id:"importActions.importFailedError.message",defaultMessage:"Import failed"},importFailedWithError:{id:"importActions.importFailedWithError.message",defaultMessage:"Import failed: {error}"},fileImportFailedSizeTooLarge:{id:"importActions.fileImportFailedError.sizeTooLarge.message",defaultMessage:"Import failed: file exceeds 5MB."},fileImportFailedCustomSizeTooLarge:{id:"importActions.fileImportFailedError.customSizeTooLarge.message",defaultMessage:"Import file cannot exceed {maxSize}."},trelloImportFailed:{id:"importActions.trelloImportFailedError.message",defaultMessage:"Trello import failed."},asanaImportFailed:{id:"importActions.asanaImportFailedError.message",defaultMessage:"Asana import failed."},evernoteImportFailed:{id:"importActions.evernoteImportFailedError.message",defaultMessage:"Evernote import failed."},confluenceImportViaAPIFailed:{id:"importActions.confluenceImportViaAPIFailedError.message",defaultMessage:"Confluence space import failed."},importTitle:{id:"importActions.importTitle",defaultMessage:"Import {date}"},importTitleWithImportName:{id:"importActions.importTitleWithImportName",defaultMessage:"{name}"},importTitleForGenericFileImporter:{id:"importActions.importTitleForGenericFileImporter",defaultMessage:"{fileName} Import {date}"},importTitleForMondayV2:{id:"importActions.importTitleForMondayV2",defaultMessage:"Import from Monday - {date}"},onlyDocxExtensionSupported:{id:"importErrors.onlyDocxExtensionSupported.message",defaultMessage:"Import failed: file type not supported."},csvImportFailedColumnsTooLarge:{id:"importActions.csvImportFailedColumnsTooLargeError.message",defaultMessage:"Import failed: CSV file has too many columns."},csvImportFailedRowsTooLarge:{id:"importActions.csvImportFailedRowsTooLargeError.message",defaultMessage:"Import failed: CSV file has too many rows."},xlsxImportFailedColumnsTooLarge:{id:"importActions.xlsxImportFailedColumnsTooLargeError.message",defaultMessage:"Import failed: XLSX file has too many columns."},xlsxImportFailedRowsTooLarge:{id:"importActions.xlsxImportFailedRowsTooLargeError.message",defaultMessage:"Import failed: XLSX file has too many rows."}}),te=1073741824;async function oe(e){const{uploadType:t,allowMultiple:o}=e;return se(e,await Z().dA({multiple:o??!0,accept:p().k2[t].join(",")}))}async function se(e,t){const{environment:o,pageStore:s,spaceStore:n,isTeamPage:r,spaceViewStore:p,uploadType:g,flowId:f,analyticsFrom:x}=e;let A;try{if(0===t.length)return;const h=1===t.length,y=performance.now(),I={};if("confluence"===g){const s=(Number((0,M().xc)(o))||15)*te;if(t[0].size>s)throw U()._$(e.environment,{import_source:"confluence",data:{import_type:"file",status:"failure",error:"Maximum upload size exceeded",fileSize:t[0].size},flowId:f}),new(c().ic)("Maximum upload size exceeded",{clientData:{type:"upload_file_size_exceeded",messageValues:{maxSize:m().z3(s,1)}}})}else if("genericImporter"===g){const s=(0,P().qr)(o)||15,a=s*te;if(t[0].size>a)throw U()._$(e.environment,{import_source:"file",data:{import_type:"file",status:"failure",error:"Maximum upload size exceeded",fileSize:t[0].size},flowId:f}),new(c().yI)("Maximum upload size exceeded",{clientData:{type:"upload_file_size_exceeded",messageValues:{maxSize:`${s} GB}`}}})}else if("pdf"===g){const o=Number(L().default.getEligibleGroup({experimentId:"special_case_pdf_file_size",defaultGroup:D.toString()})),s=o;for(const a of t)if(a.size>s)throw U()._$(e.environment,{import_source:"file",data:{import_type:"file",status:"failure",error:"Maximum upload size exceeded",fileSize:a.size},flowId:f}),new(c().yI)("Maximum upload size exceeded",{clientData:{type:"upload_file_size_exceeded",messageValues:{maxSize:`${o} GB}`}}})}const S=await new Promise(((e,s)=>{Z().Zn({environment:o,uploadType:g,files:t,bucket:"temporary",bypassFreeFileUploadLimitCheck:!0,flowId:f,spaceId:n.id,onBatchStart:()=>{G().m({message:h?ee.uploadingOneFile:ee.uploadingMultipleFilesNotStarted,interpolatedValues:{totalNumberOfFiles:t.length,percentComplete:0}})},onBatchProgress:e=>{let{uploadedFiles:o,progressPercent:s}=e;G().m({message:h?ee.uploadingOneFile:ee.uploadingMultipleFilesInProgress,interpolatedValues:{numberOfUploadedFiles:o,totalNumberOfFiles:t.length,percentComplete:s}})},onBatchCompleteWithToken:o=>{G().m({message:h?ee.uploadingOneFile:ee.uploadingMultipleFilesComplete,interpolatedValues:{totalNumberOfFiles:t.length,percentComplete:100}}),e(o)},onBatchError:s})})),j=performance.now();I.uploadTimeTaken=j-y;const k="slash_command"===x&&!["gdocs","confluence","genericImporter"].includes(g),F=await ae(o,n,p,g,(null==t?void 0:t.length)??0,null==t?void 0:t[0].name,s,r,k);A=F.createdPage;const R=F.importType,W=F.pageId,O=S.map(((e,o)=>({fileURL:e.fileUrl,fileName:t[o].name,signedToken:e.signedToken}))),V=L().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"});let _=0;G().m({message:h?ee.importingOneFile:ee.importingMultipleFilesInProgress,interpolatedValues:{numberOfImportedFiles:_,totalNumberOfFiles:t.length}});const z=(0,l().P)();if(V&&("ReplaceBlock"===R||"AppendToBlock"===R)&&"csv"===g){const e=E().Bv.createChildStore(n,{table:u().ev,id:W}),t=(0,B().Ay)({store:e,preferPublicLink:!1,pageVisitSource:a().y8.Import});T().navigateOnBaseUrl({environment:o,url:t})}for(const{fileURL:e,fileName:s,signedToken:a}of O){if("confluence"===g){U()._$(o,{import_source:"confluence",data:{import_type:"file",status:"success",fileSize:t[0].size},flowId:f});const r=re({environment:o,spaceStore:n,spaceViewStore:p});await r.deferred.promise;const i=r.pageId;U().Pd(o,{integration_name:"confluence"});const l=$().UT(o,w,{fileURL:e,fileName:s,page:{id:W,spaceId:n.id},loggerPageId:i,flowId:f||d().JW(),signedToken:a});for await(const e of l){if(e.error)throw e.error;e.value.isComplete||G().m(e.value.status)}}else if("AppendToBlock"===R){const t={fileURL:e,fileName:s,importType:R,block:{id:W,spaceId:F.spaceId},spaceId:F.spaceId,flowId:f,userTimeZone:z,signedToken:a,importEntryPoint:x};U().mM(o,{import_source:"file",data:t,flowId:f});const n=L().default.checkGate({gateName:"partitioned_universal_importer"}),r={fileURL:e,fileName:s,importType:"ReplaceBlock",spaceId:F.spaceId,rootId:W,userTimeZone:z,signedToken:a};U().Pd(o,{integration_name:"genericImporter"===g?"universal":g});const i="genericImporter"===g&&n?$().UT(o,b,r):$().UT(o,v().V,t);let l=!1;for await(const e of i){if(e.error)throw e.error;V&&"csv"===g&&"status"in e.value&&"created_collection"===e.value.status.message&&!l&&(l=!0,G().V(),q().A.reset(),I.importingSpinnerSpan||=performance.now()-j)}}else if("ReplaceBlock"===R){const t={fileURL:e,fileName:s,importType:R,block:{id:W,spaceId:F.spaceId},flowId:f,spaceId:F.spaceId,userTimeZone:z,signedToken:a,importEntryPoint:x};U().mM(o,{import_source:"file",data:t,flowId:f}),U().Pd(o,{integration_name:"genericImporter"===g?"universal":"file"});const n=L().default.checkGate({gateName:"partitioned_universal_importer"}),r={fileURL:e,fileName:s,importType:"ReplaceBlock",spaceId:F.spaceId,rootId:W,userTimeZone:z,signedToken:a},i="genericImporter"===g&&n?$().UT(o,b,r):$().UT(o,v().V,t);let l=!1;for await(const e of i){if(e.error)throw e.error;V&&"csv"===g&&"status"in e.value&&"created_collection"===e.value.status.message&&(l||(l=!0,G().V(),q().A.reset(),I.importingSpinnerSpan||=performance.now()-j))}}_++,V&&"csv"===g||G().m({message:h?ee.importingOneFile:ee.importingMultipleFilesInProgress,interpolatedValues:{numberOfImportedFiles:_,totalNumberOfFiles:t.length}})}return G().V(),I.overallTimeTaken=performance.now()-y,function(e,t){const{uploadType:o,importType:s,importLatencies:a,fileNames:n}=t;if(("ReplaceBlock"===s||"AppendToBlock"===s)&&"csv"===o){const e=a.uploadTimeTaken,t=a.importingSpinnerSpan,o=t&&e?t+e:a.overallTimeTaken;a.firstTimeNavigateToCollection=o}i().log({level:"info",from:"importActions",type:"importFiles",data:{miscDataToConvertToString:{fileNames:n,importLatencies:a,uploadType:o,importType:s},message:"Finished importing file"}});for(const[r,i]of Object.entries(a))(0,C().u4)({environment:e,event:{eventName:"import_file_finished",eventProperties:{importUploadType:o,importType:s,importLatency:i,importSource:"file",importLatencyType:r,importFileCount:n.length}}})}(o,{uploadType:g,importType:R,importLatencies:I,fileNames:t.map((e=>e.name))}),E().Bv.createChildStore(n,{table:u().ev,id:W})}catch(S){var I;let e;i().log({level:"error",from:"importFiles",type:"importFilesFailure",error:(0,y().n6)(S),data:{spaceId:n.id}}),G().V(),Q().createAndCommit({userAction:"importActions.importFiles",environment:o,canUndo:!0,perform:e=>{A&&K().TF({parentStore:n.getPagesStore(),childToRemoveStore:A,transaction:e})}});let t=null,s=null;if(S instanceof c().mv&&S.clientData?(t=S.clientData,F().yC[S.clientData.type]&&"ImportFileSizeTooLargeError"===(0,h().A)(S).message?s=F().yC[S.clientData.type]:F().mW[S.clientData.type]&&"CsvImportError"===(0,h().A)(S).message?s=F().mW[S.clientData.type]:F().Ep[S.clientData.type]?s=F().Ep[S.clientData.type]:F()._j[S.clientData.type]&&(s=F()._j[S.clientData.type])):S instanceof c().ic&&"upload_file_size_exceeded"===(null===(I=S.body)||void 0===I||null===(I=I.clientData)||void 0===I?void 0:I.type)&&F().Ep[S.body.clientData.type]?(t=S.body.clientData,s=F().Ep[t.type]):S instanceof R().C&&(t={messageValues:{error:"You've reached the maximum number of file uploads for a 12-hour period. We suggest uploading a ZIP file that includes all your files."}},s=ee.importFailedWithError),t&&s){const o="messageValues"in t?t.messageValues:void 0;e=W().A.formatMessage(s,o)}else e=t&&"code"in t&&("fileImportError"===t.code||"confluenceImportError"===t.code)?W().A.formatMessage(ee.importFailedWithError,{error:(0,h().A)(S).message}):"ImportFileSizeTooLargeError"===(0,h().A)(S).message?W().A.formatMessage(ee.fileImportFailedSizeTooLarge):"ImportcsvTooManyColumns"===(0,h().A)(S).message?W().A.formatMessage(ee.csvImportFailedColumnsTooLarge):"ImportcsvTooManyRows"===(0,h().A)(S).message?W().A.formatMessage(ee.csvImportFailedRowsTooLarge):"ImportxlsxTooManyColumns"===(0,h().A)(S).message?W().A.formatMessage(ee.xlsxImportFailedColumnsTooLarge):"ImportxlsxTooManyRows"===(0,h().A)(S).message?W().A.formatMessage(ee.xlsxImportFailedRowsTooLarge):W().A.formatMessage(ee.importFailed);throw Y().f1(e),S}}async function ae(e,t,o,a,n,i,l,c,d){var p;let m,u,g,h=t.id;if(N().default.isSidePeekOpen()&&null!==(p=N().default.peekTargetStore.state)&&void 0!==p&&p.isEmptyPage())u=N().default.peekTargetStore.state.id,g="ReplaceBlock";else if(l&&(l.isEmptyPage()||d))n>1||l.isInsideCollection()||d?(u=l.id,g="AppendToBlock"):(u=l.id,g="ReplaceBlock");else{const l={date:(0,r().W_)(Date.now(),"medium",s().locale)};"genericImporter"===a&&(l.fileName=i?i.replace(".zip",""):"Universal File");const{performResult:d}=Q().createAndCommit({userAction:"importActions.result",environment:e,canUndo:!0,perform:s=>{const r=W().A.formatMessage("genericImporter"===a?ee.importTitleForGenericFileImporter:ee.importTitle,l),i=X().IT({environment:e,spaceStore:t,spaceViewStore:o,isPrivate:!c,prepend:!c,title:r,transaction:s}),d=n>1?"AppendToBlock":"ReplaceBlock",p=x().yX();return s.postSubmitCallbacks.push((e=>{e?p.reject(e):p.resolve(void 0)})),{deferred:p,createdPage:i,pageId:i.id,importType:d,spaceId:i.getSpaceId()}}});m=d.createdPage,u=d.pageId,g=d.importType,h=d.spaceId,await d.deferred.promise}return{createdPage:m,pageId:u,importType:g,spaceId:h}}async function ne(e){const{environment:t,fileId:o,token:s,spaceStore:a,spaceViewStore:n,pageStore:r,analyticsFrom:i}=e;let l;try{G().m({message:ee.importingOneFile});const e="link_paste"===i||"slash_command"===i,c=await ae(t,a,n,"gdocs",1,void 0,r,void 0,e);l=c.createdPage;const d=c.importType,p=c.pageId,m={fileId:o,tokenId:s.id,importType:d,block:{id:p,spaceId:a.id}};U().mM(t,{import_source:"gDocs",data:m}),U().Pd(t,{integration_name:"gDocs"});const{value:g}=await $().UT(t,S,m).next();if(g.error)throw g.error;return G().V(),E().Bv.createChildStore(a,{table:u().ev,id:p})}catch(d){Q().createAndCommit({userAction:"importActions.importFiles",environment:t,canUndo:!0,perform:e=>{l&&K().TF({parentStore:a.getPagesStore(),childToRemoveStore:l,transaction:e})}});let e=W().A.formatMessage(ee.importFailed);throw d instanceof c().mv&&d.clientData&&("only_docx_extension_supported"===d.clientData.type?e=W().A.formatMessage(ee.onlyDocxExtensionSupported):"file_size_exceeded"===d.clientData.type&&(e=W().A.formatMessage(ee.fileImportFailedCustomSizeTooLarge,{maxSize:d.clientData.messageValues.maxSize}))),Y().f1(e),G().V(),new Error((0,h().A)(d).message)}}function re(e){const{environment:t,spaceStore:o,spaceViewStore:a,append:n,mondayV2:i}=e,{performResult:l}=Q().createAndCommit({userAction:"importActions.result",environment:t,canUndo:!0,perform:e=>{const l=i?W().A.formatMessage(ee.importTitleForMondayV2,{date:(0,r().W_)(Date.now(),"medium",s().locale)}):W().A.formatMessage(ee.importTitle,{date:(0,r().W_)(Date.now(),"medium",s().locale)}),c=X().IT({environment:t,spaceStore:o,spaceViewStore:a,isPrivate:!0,prepend:!n,title:i?l:`${l} Logs`,transaction:e}),d=x().yX();return e.postSubmitCallbacks.push((e=>{e?d.reject(e):d.resolve(void 0)})),{deferred:d,pageId:c.id}}});return l}async function ie(e){const{environment:t,boards:o,spaceStore:s,spaceViewStore:a}=e;G().m({message:ee.importingFromTrelloMessage,interpolatedValues:{importingCount:o.length}}),z().A.setState({open:!1});const{performResult:{deferred:n,pages:r}}=Q().createAndCommit({userAction:"importActions.importTrello",environment:t,canUndo:!0,perform:e=>{const n=o.map((o=>X().IT({environment:t,spaceStore:s,spaceViewStore:a,isPrivate:!0,prepend:!0,loading:!0,title:o.name,transaction:e}))),r=x().yX();return e.postSubmitCallbacks.push((e=>{e?r.reject(e):r.resolve(void 0)})),{deferred:r,pages:n}}});await n.promise;try{return await Promise.all(r.map((async(e,s)=>{const a=o[s],{value:n}=await $().UT(t,j,{boardId:a.id,block:{id:e.id,spaceId:(0,g().e)(e.pointer.spaceId)}}).next();if(n.error)throw n.error}))),G().V(),r[0]}catch(i){Q().createAndCommit({userAction:"importActions.importTrello",environment:t,canUndo:!0,perform:e=>{for(const t of r)K().TF({parentStore:s.getPagesStore(),childToRemoveStore:t,transaction:e})}});let e=W().A.formatMessage(ee.trelloImportFailed);const o=i instanceof c().lV?i.body.clientData:void 0;throw o&&"code"in o&&"trelloImportError"===o.code&&(e=W().A.formatMessage(ee.importFailedWithError,{error:(0,h().A)(i).message})),Y().f1(e),G().V(),new Error((0,h().A)(i).message)}}async function le(e){const{environment:t,spaceStore:o,spaceViewStore:s,notebooks:a,userSettingsStore:r}=e;if(0===a.length)throw new Error("Expected at least one notebook");G().m({message:ee.importingFromEvernoteMessage,interpolatedValues:{importingCount:a.length}}),_().A.setState({open:!1});const i=await async function(e){const{environment:t,spaceStore:o,spaceViewStore:s,notebooks:a}=e,{serverCommitResult:r,performResult:{blockStores:i}}=Q().createAndCommit({userAction:"importActions.createStacks",environment:t,canUndo:!0,perform:e=>{const r=f().sb(f().oE(a.map((e=>e.stack)))).sort().reverse(),i={};let l=e=>!0;return a.length>1&&r.length>0&&(r.forEach((r=>{const l=X().IT({environment:t,spaceStore:o,spaceViewStore:s,isPrivate:!0,prepend:!0,loading:!1,title:r,transaction:e}),c=l.getContentStore();a.filter((e=>e.stack===r)).forEach((o=>{const s=J().Wv({environment:t,type:n().xd.copyIndicator,inMemoryRecordCache:l.inMemoryRecordCache,transaction:e,spaceId:c.pointer.spaceId});K().BC({parentStore:c,appendStore:s,transaction:e}),i[o.guid]=s}))})),l=e=>!Boolean(e.stack)),a.filter(l).reverse().forEach((a=>{const n=X().IT({environment:t,spaceStore:o,spaceViewStore:s,isPrivate:!0,prepend:!0,loading:!0,title:a.title,transaction:e});i[a.guid]=n})),{blockStores:i}}});return await r,i}({environment:t,spaceStore:o,spaceViewStore:s,notebooks:a}),l=i[a[0].guid];try{return await async function(e){const{environment:t,spaceStore:o,spaceViewStore:s,notebooks:a,waitForNotebookStore:n,notebookMapping:r,userSettingsStore:i}=e;let l;if(x().vA(a,de,(async e=>{await Promise.all(e.map((async e=>{const o=r[e.guid];if(!o)throw new Error(`Missing notebook page ${e.guid}`);const s=x().yX();o===n&&(l=s),await async function(e){const{environment:t,notebookStore:o,notebook:s,firstCompleted:a}=e,n=$().UT(t,A().r,{notebookId:s.guid,block:{id:o.id,spaceId:(0,g().e)(o.pointer.spaceId)},timestamp:Date.now(),parentTable:u().ev}),{value:r}=await n.next();if(r.error){console.error(r.error),Q().createAndCommit({userAction:"importActions.importEvernoteNotebook",environment:t,canUndo:!0,perform:e=>{const t=o.getParentBlockStore();if(t){const s=t.getContentStore();K().TF({parentStore:s,childToRemoveStore:o,transaction:e})}}});let e=W().A.formatMessage(ee.evernoteImportFailed);const s=r.error instanceof c().Df?r.error.body.clientData:void 0;s&&"code"in s&&"evernoteImportError"===s.code&&(e=W().A.formatMessage(ee.importFailedWithError,{error:(0,h().A)(r.error).message})),Y().f1(e),a.resolve(void 0)}a.resolve(void 0)}({environment:t,notebookStore:o,notebook:e,firstCompleted:s})})))})),!l)throw new Error("waitForNotebookFirstCompleted not defined.");const d=i.getSettings();null!=d&&d.created_evernote_getting_started||await O().createGettingStartedPageInSpace({environment:t,type:"evernote",spaceStore:o,spaceViewStore:s,userSettingsStore:i});await l.promise}({environment:t,waitForNotebookStore:l,notebookMapping:i,notebooks:a,spaceStore:o,spaceViewStore:s,userSettingsStore:r}),G().V(),l}catch(d){throw G().V(),Y().f1(W().A.formatMessage(ee.evernoteImportFailed)),d}}async function ce(e){const{environment:t,spaceStore:o,spaceViewStore:s,space:a,flowId:n}=e;if(!t.currentUser.id)throw new Error("User does not exist.");G().m({message:ee.importingFromConfluenceViaAPIMessage,interpolatedValues:{confluenceSpaceKey:a.name}}),V().A.setState({open:!1});const r=re({environment:t,spaceStore:o,spaceViewStore:s});await r.deferred.promise;const l=r.pageId;let d;if((0,M().vY)(t)){const e=await H().callApi({eventName:"createTeam",environment:t,data:{spaceId:o.id,name:a.name,accessLevel:"closed"}});if("failed"===e.type)throw new Error("Cannot create teamspace");d=e.data.teamId}const{performResult:p}=Q().createAndCommit({userAction:"importActions.importConfluenceViaApi",environment:t,canUndo:!0,perform:e=>{const n=W().A.formatMessage(ee.importTitleWithImportName,{name:a.name}),r=X().IT({environment:t,spaceStore:o,spaceViewStore:s,isPrivate:!0,prepend:!0,title:n,transaction:e}),i=x().yX();return e.postSubmitCallbacks.push((e=>{e?i.reject(e):i.resolve(void 0)})),{deferred:i,createdPage:r,pageId:r.id}}});await p.deferred.promise;const m=p.createdPage;try{if(!m)throw new Error("No root page");U().Pd(t,{integration_name:"confluence"});const e=$().UT(t,k,{userId:t.currentUser.id,confluenceSpaceKey:a.key,confluenceSpaceId:a.id,confluenceSpaceName:a.name,page:{id:p.pageId,spaceId:o.id},loggerPageId:l,flowId:n,teamId:d});for await(const t of e){if(t.error)throw t.error;t.value.isComplete||G().m(t.value.status)}return G().V(),m}catch(u){i().log({level:"error",from:"importConfluenceViaAPI",type:"importConfluenceViaAPIFailure",error:(0,y().n6)(u),data:{spaceId:o.id}}),Q().createAndCommit({userAction:"importActions.importConfluenceViaApi",environment:t,canUndo:!0,perform:e=>{m&&K().TF({parentStore:o.getPagesStore(),childToRemoveStore:m,transaction:e})}});let e=W().A.formatMessage(ee.confluenceImportViaAPIFailed);const s=u instanceof c().ic?u.body.clientData:void 0;throw s&&"code"in s&&"confluenceImportError"===s.code&&(e=W().A.formatMessage(ee.importFailedWithError,{error:(0,h().A)(u).message})),Y().f1(e),G().V(),new Error((0,h().A)(u).message)}}const de=2},936996:(e,t,o)=>{o.d(t,{A:()=>p});o(581454),o(296540);var s=()=>o(401497),a=()=>o(100622),n=()=>o(493823),r=()=>o(625830),i=()=>o(710149),l=()=>o(21140),c=()=>o(702796),d=o(474848);function p(e){let{getIdentifier:t,onSelectRow:o,rows:p,title:m,renderRow:u,onToggleGroup:g,onSelectGroup:h,collapsed:f,groupCheckedState:y,rowCheckedState:x,disabled:A,rowStyles:v={},rowsContainerStyles:I={},loadMoreButton:S,checkboxStyles:j={},loading:w}=e;const k=(0,s().IS)((e=>({row:{display:"flex",cursor:"pointer",alignItems:"center",gap:6,height:24,marginTop:4,marginLeft:40},loadingRow:{gap:6,alignItems:"center",marginTop:4,height:19.6}})),[]);if(w){const e=(null==v?void 0:v.lineHeight)||14;return(0,d.jsxs)("div",{children:[(0,d.jsxs)(l().Ye,{style:{paddingLeft:6,paddingRight:8,...k.loadingRow},children:[(0,d.jsx)(i().A,{style:{height:14,width:34}}),(0,d.jsx)(i().A,{style:{height:e,width:200}})]}),(0,d.jsxs)("div",{style:{...k.row,...v},children:[(0,d.jsx)(i().A,{style:{height:14,width:14}}),(0,d.jsx)(i().A,{style:{height:e,width:64}})]}),(0,d.jsxs)("div",{style:{...k.row,...v},children:[(0,d.jsx)(i().A,{style:{height:14,width:14}}),(0,d.jsx)(i().A,{style:{height:e,width:96}})]})]})}return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n().p,{onClick:g,style:{gap:6},pressedStyle:{background:"transparent"},iconStyle:{marginRight:0},ignoreLocalHoverState:!0,icon:e=>(0,d.jsx)(c().A,{disabled:!0,style:{...e,pointerEvents:"none"},isSidebar:!1,open:!f,fill:!1,onClick:e=>{e.stopPropagation(),g()},icon:"chevron"}),children:[(0,d.jsx)(r().A,{disabled:A,onClick:h,checked:y,style:{borderRadius:2,...j},size:14,checkSize:8,checkedColor:A?a().Ay.blueWithAlpha(.3):a().Ay.blue}),m]}),!f&&(0,d.jsxs)("div",{style:I,children:[p.map((e=>(0,d.jsxs)("div",{style:{...k.row,...v},onClick:A?void 0:()=>{o(e)},children:[(0,d.jsx)(r().A,{style:{marginRight:1,borderRadius:2,...j},onClick:t=>{t.stopPropagation(),o(e)},disabled:A,checked:x(e),size:14,checkSize:8,checkedColor:A?a().Ay.blueWithAlpha(.3):a().Ay.blue}),u(e)]},t(e)))),S&&!A&&(0,d.jsx)("div",{style:k.row,children:S})]})]})}}}]);