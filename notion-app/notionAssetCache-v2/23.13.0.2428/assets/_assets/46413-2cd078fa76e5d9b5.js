"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[46413],{66323:(e,t,i)=>{i.d(t,{b:()=>c,h:()=>l});var o=()=>i(713998),n=()=>i(798880),r=()=>i(931075),a=()=>i(606952),s=()=>i(317909);function c(e){const{environment:t,blockStore:i,verificationValue:c}=e,l=i.getPropertyStore(r()._e.Verification),d=(0,o().j2)(c),p=i.getPropertyStore(r()._e.Owner),u=t.currentUser.id,f=u?{table:n().oo,id:u}:void 0;s().createAndCommit({userAction:"PageAddVerificationButton.verifyPage",environment:t,canUndo:!0,perform:e=>{a().KY({environment:t,store:l,value:d,transaction:e}),f&&s().applyOperation({transaction:e,store:p,operation:{path:p.path,pointer:p.pointer,command:"addPersonAfter",args:{pointer:f}}})}})}function l(e){const{environment:t,blockStore:i,verificationValue:n}=e,c=i.getPropertyStore(r()._e.Verification),l=(0,o().j2)(n);s().createAndCommit({userAction:"PageVerificationBadge.updatePageVerification",environment:t,canUndo:!0,perform:e=>{a().KY({environment:t,store:c,value:l,transaction:e})}})}},122894:(e,t,i)=>{i.d(t,{n:()=>o});const o=(0,i(959013).YK)({expirationProperty:{defaultMessage:"Expiration",id:"verificationHelpers.menuTitle.Expiration"},noExpiration:{defaultMessage:"None",id:"verificationHelpers.noExpiration"},verifierProperty:{defaultMessage:"Owner",id:"verificationHelpers.menuTitle.Owner"},noOwners:{defaultMessage:"No owners",id:"verificationHelpers.noOwners.placeholder"},removeVerificationProperty:{defaultMessage:"Remove verification",id:"verificationHelpers.removeVerification"},nonOwnerCannotRemoveVerification:{defaultMessage:"Only owners can remove verification",id:"verificationHelpers.nonOwnerCannotRemoveVerification"},nonOwnersCannotEditVerification:{defaultMessage:"Only owners can edit verification",id:"verificationHelpers.nonOwnersCannotEditVerification"},ownersAttribution:{defaultMessage:"{numOtherActors, plural, =0 {{actorName}} one {{actorName} and {numOtherActors} other} other {{actorName} and {numOtherActors} others}}",id:"verificationHelpers.displayPageOwners"},verificationMenuTitle:{defaultMessage:"Configure Verification",id:"verificationHelpers.verificationMenu.menuTitle.configureVerification"},addVerificationMenuTitle:{defaultMessage:"Verification Status",id:"verificationHelpers.verificationMenu.menuTitle.addVerification"}})},446413:(e,t,i)=>{i.d(t,{C:()=>N});var o=i(296540),n=()=>i(484714),r=()=>i(56366),a=()=>i(931075),s=()=>i(959013),c=()=>i(534177),l=()=>i(908671),d=()=>i(66323),p=()=>i(51493),u=(i(898992),i(737550),()=>i(401497)),f=()=>i(764880),m=()=>i(906380),v=()=>i(797561),g=()=>i(42583),y=i(474848);const h={viewBox:"0 0 20 20",svg:(0,y.jsx)("path",{d:"M15.692 5.192a.625.625 0 1 0-.884-.884L10 9.116 5.192 4.308a.625.625 0 1 0-.884.884L9.116 10l-4.808 4.808a.625.625 0 1 0 .884.884L10 10.884l4.808 4.808a.625.625 0 1 0 .884-.884L10.884 10z"})},b=(0,i(340498).wt)("xMark",h);var M=()=>i(53528),V=()=>i(284371),x=()=>i(722872),w=()=>i(470928),S=()=>i(962730),C=()=>i(760217),P=()=>i(928600),k=()=>i(939740),A=()=>i(45552),j=()=>i(8980),T=()=>i(89924),R=()=>i(859428),O=()=>i(125565),B=()=>i(8802),D=()=>i(122894);function H(e){const{onClose:t,blockStore:i,setVerificationMenuDisplay:o}=e,a=(0,n().v3)(),c=(0,s().tz)(),l=a.device.isMobile,h=(0,r().K8)((()=>(0,w().i1)(i)),[i]),H="verified"===h.type,U="verified"===h.type||"expired"===h.type,I=(0,r().K8)((()=>{const{verificationOwners:e}=(0,w().h4)({blockStore:i}),t=e.length;if(t<=0)return c.formatMessage(D().n.noOwners);const o=e[0],n=(0,f().xC)({pointer:o,getRecordModel:i.getRecordModel}),r=null==n?void 0:n.asActor,a=null==r?void 0:r.getDisplayName(c);if(!a)return c.formatMessage(D().n.noOwners);const s=t-1;return c.formatMessage(D().n.ownersAttribution,{actorName:a,numOtherActors:s})}),[i,c]),E=(0,r().K8)((()=>i.canEdit()),[i]),z=(0,r().K8)((()=>{const{verificationOwners:e}=(0,w().h4)({blockStore:i}),t=a.currentUser.id;return e.some((e=>e.id===t))}),[i,a.currentUser]),K=(0,u().IS)((e=>({disabledButton:{opacity:.7},redStyling:{color:e.text.uiRedPrimary},buttonRightContainer:{display:"flex",alignItems:"center",maxWidth:150,gap:2,color:e.icon.secondary},buttonRightText:{color:e.icon.secondary,fontSize:l?V().J.UIRegular.mobile:V().J.UISmall.desktop},footer:{color:e.text.secondary,fontSize:V().J.UISmall.desktop,borderTop:l?`1px solid ${e.regularDividerColor}`:void 0}})),[l]),_="none"!==h.type&&(0,y.jsx)("div",{style:K.footer,children:(0,y.jsx)(B().d,{lastVerifiedDate:H&&h.isIndefinite?h.startDateTime:h.dateTimeRange.start,getRecordModel:i.getRecordModel,actorPointer:h.actorPointer})});let N;return N=l?{menuType:x().gu.Modal,title:c.formatMessage(D().n.verificationMenuTitle),right:(0,y.jsx)(A().DoneMenuText,{}),onClickRight:t,footer:_}:{menuType:x().gu.Popup,width:320,footer:_},(0,y.jsx)(P().A,{...N,children:(0,y.jsx)(k().Ay,{type:k().Oh.Vertical,initialFocus:0,sections:[{key:"Verification Configuration",render:e=>(0,y.jsx)(T().A,{...e,hideTitle:l,title:c.formatMessage(D().n.verificationMenuTitle),disableMobilePadding:!0,disableMobileBorders:!0}),items:[{key:"Expiration",render:e=>{let t=c.formatMessage(D().n.noExpiration);"verified"!==h.type||h.isIndefinite?"expired"===h.type&&(t=M().OH({dateTime:h.dateTimeRange.end,intl:c,shortenDateAndRange:!0})):t=M().OH({dateTime:h.dateTimeRange.end,intl:c,shortenDateAndRange:!0});const i=!z,o=(0,y.jsxs)("div",{style:K.buttonRightContainer,children:[(0,y.jsx)(O().A,{style:K.buttonRightText,showTooltipWhenTruncated:!0,children:t}),z&&(0,y.jsx)(j().I,{icon:m().arrowChevronSingleRightSmallIcon,size:"sm"})]});return(0,y.jsx)(R().A,{placement:S().W.Right,render:t=>(0,y.jsx)(C().A,{...e,...t,title:c.formatMessage(D().n.expirationProperty),icon:(0,y.jsx)(j().I,{icon:g().D}),right:o,disabled:i,buttonStyle:i?K.disabledButton:void 0}),renderTooltip:()=>c.formatMessage(D().n.nonOwnersCannotEditVerification),disableTooltip:!i})},action:()=>{o("expiration")}},{key:"Verifier",render:e=>(0,y.jsx)(C().A,{...e,title:c.formatMessage(D().n.verifierProperty),icon:(0,y.jsx)(j().I,{icon:v().E}),right:(0,y.jsxs)("div",{style:K.buttonRightContainer,children:[(0,y.jsx)(O().A,{style:K.buttonRightText,showTooltipWhenTruncated:!0,children:I}),(0,y.jsx)(j().I,{icon:m().arrowChevronSingleRightSmallIcon,size:"sm"})]}),disabled:!E}),action:()=>{o("owner")}},{key:"Remove",render:e=>{const t=!z||!U;return(0,y.jsx)(R().A,{placement:S().W.Right,render:i=>(0,y.jsx)(C().A,{...e,...i,title:c.formatMessage(D().n.removeVerificationProperty),icon:(0,y.jsx)(j().I,{icon:b}),style:K.redStyling,disabled:t,buttonStyle:t?K.disabledButton:void 0}),renderTooltip:()=>c.formatMessage(D().n.nonOwnerCannotRemoveVerification),disableTooltip:!t})},action:()=>{var e;e={value:void 0,metadata:{action:"remove",entrypoint:"page_menu"}},d().h({environment:a,blockStore:i,verificationValue:e.value}),(0,p().q)({environment:a,blockStore:i,update:e}),t()}}]}]})})}var U=()=>i(436572),I=()=>i(317909),E=()=>i(41459),z=()=>i(583538);function K(e){const{blockStore:t,onClose:i}=e,o=(0,n().v3)(),l=(0,s().tz)(),{verifierValue:d,isDefaultUnpersistedValue:u}=(0,r().K8)((()=>{const{verificationOwners:e,isCreatedByDefault:i}=(0,w().h4)({blockStore:t});return{verifierValue:e,isDefaultUnpersistedValue:Boolean(i)}}),[t]);return(0,y.jsx)(z().Ay,{value:d,format:E().j.Page,valueIsUnpersistedDefaultValue:u,propertySchema:{name:l.formatMessage(D().n.verifierProperty),type:"person",limit:void 0,default:"created_by"},schema:{},insertChar:void 0,disabled:!1,onChange:e=>{(e=>{const i=t.getPropertyStore(a()._e.Owner);"personPropertyMenuUpdateAddPerson"===e.type?(I().createAndCommit({userAction:"PageVerificationBadge.addVerifier",environment:o,canUndo:!0,perform:t=>{for(const o of e.newValues)I().applyOperation({transaction:t,store:i,operation:{path:i.path,pointer:i.pointer,command:"addPersonAfter",args:{pointer:o}}})}}),(0,p().y)({environment:o,blockStore:t,entrypoint:"breadcrumbs",action:"add"})):"personPropertyMenuUpdateRemovePerson"===e.type?1===d.length?U().D6({label:(0,y.jsx)(s().sA,{id:"pageVerification.removeLastVerifier.error",defaultMessage:"At least one owner is required for verification."})}):(I().createAndCommit({userAction:"PageVerificationBadge.removeVerifier",environment:o,canUndo:!0,perform:t=>{I().applyOperation({transaction:t,store:i,operation:{path:i.path,pointer:i.pointer,command:"removePerson",args:{pointer:e.removedValue}}})}}),(0,p().y)({environment:o,blockStore:t,entrypoint:"breadcrumbs",action:"remove"})):"personPropertyMenuUpdateReplacePerson"===e.type?(I().createAndCommit({userAction:"PageVerificationBadge.replaceVerifier",environment:o,canUndo:!0,perform:t=>{I().applyOperation({transaction:t,store:i,operation:{path:i.path,pointer:i.pointer,command:"addPersonAfter",args:{pointer:e.newValue}}})}}),(0,p().y)({environment:o,blockStore:t,entrypoint:"breadcrumbs",action:"replace"})):(0,c().HB)(e)})(e)},onDismiss:i,parentStore:t,isTemplatePage:!1,formQuestionStore:void 0})}var _=()=>i(206837);function N(e){const{onClose:t,blockStore:i,entrypoint:r}=e,a=(0,n().v3)(),[s,l]=(0,o.useState)("mainVerificationMenu");return"mainVerificationMenu"===s?(0,y.jsx)(H,{onClose:t,blockStore:i,setVerificationMenuDisplay:l}):"owner"===s?(0,y.jsx)(L,{blockStore:i,onClose:a.device.isMobile?()=>l("mainVerificationMenu"):t,setVerificationMenuDisplay:l}):"expiration"===s?(0,y.jsx)(W,{blockStore:i,onClose:a.device.isMobile?()=>l("mainVerificationMenu"):t,setVerificationMenuDisplay:l,entrypoint:r}):void(0,c().HB)(s)}function L(e){const{onClose:t,blockStore:i,setVerificationMenuDisplay:o}=e,r=(0,n().v3)(),a=(0,s().tz)(),c=r.device.isMobile;return(0,y.jsxs)(y.Fragment,{children:[!c&&(0,y.jsx)(_().o,{label:q(a,"owner"),onClickBackButton:()=>o("mainVerificationMenu"),onClose:t,showBottomBorder:!0,width:350}),(0,y.jsx)(K,{blockStore:i,onClose:t})]})}function W(e){const{onClose:t,blockStore:i,setVerificationMenuDisplay:o,entrypoint:c}=e,u=(0,n().v3)(),f=(0,s().tz)(),m=u.device.isMobile,v=(0,r().K8)((()=>i.getPropertyStore(a()._e.Verification).getValue()),[i]);return(0,y.jsx)(l().y,{propertyName:"Verification Status",onChange:e=>{(e=>{d().h({environment:u,blockStore:i,verificationValue:e.value}),(0,p().q)({environment:u,blockStore:i,update:e})})(e)},verificationValue:(0,a().U1)(v),getRecordModel:i.getRecordModel,blockId:i.id,onClose:t,showTitle:m,showRemoveVerificationButton:m,showVerificationFooter:m,showCurrentStatusHeader:m,showCustomHeader:!m,customHeader:!m&&(0,y.jsx)(_().o,{label:q(f,"expiration"),onClickBackButton:()=>o("mainVerificationMenu"),onClose:t,showBottomBorder:!0,width:320}),entrypoint:c})}function q(e,t){return"expiration"===t?e.formatMessage(D().n.expirationProperty):"owner"===t?e.formatMessage(D().n.verifierProperty):"mainVerificationMenu"===t?null:void(0,c().HB)(t)}}}]);