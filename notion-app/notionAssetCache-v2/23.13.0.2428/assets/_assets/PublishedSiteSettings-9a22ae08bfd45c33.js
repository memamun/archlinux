"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[39301],{43972:(e,t,i)=>{i.d(t,{w:()=>l});i(296540);var n=()=>i(764880),o=()=>i(534177),s=()=>i(256863),a=()=>i(453697),r=i(474848);function l(e){const{actor:t}=e,i={size:e.size??14,style:{marginRight:2,...e.style}};return(0,n().H3)(t)?(0,r.jsx)(s().A,{botValue:t.asActor,...i}):(0,n().ps)(t)?(0,r.jsx)(a().A,{userValue:t.asActor,...i}):(0,n().h2)(t)?(0,r.jsx)(a().A,{userValue:void 0,...i}):void(0,o().HB)(t)}},67805:(e,t,i)=>{i.d(t,{X:()=>a,cT:()=>r,sL:()=>l});i(898992),i(672577);var n=()=>i(68263),o=()=>i(731320),s=()=>i(508496);function a(e,t){return e.sort(((e,i)=>{const n=e.store.canAdmin();if(n===i.store.canAdmin()){var o,s;const n=null===(o=e.publishedMetadata.publishedBy)||void 0===o?void 0:o.id,a=e.publishedMetadata.publishedTime,r=null===(s=i.publishedMetadata.publishedBy)||void 0===s?void 0:s.id,l=i.publishedMetadata.publishedTime;if(t){if(n===t&&r===t&&a&&l)return l-a;if(n===t)return-1;if(r===t)return 1}return a&&l?l-a:0}return n?-1:1}))}function r(e){const{environment:t,store:i}=e;if(!i.pathIsAccessibleAndAlive())return!1;if(!o().i0(i).find((e=>(0,n().W8)(e.permissionItem))))return!1;if(o().qb(t,i))return!1;return!("on"===s().default.getEligibleGroup({experimentId:"sites_disable_banner",defaultGroup:"control"}))}function l(e){const{environment:t,store:i}=e;if(!i.pathIsAccessibleAndAlive())return!1;if(!o().i0(i).find((e=>(0,n().FP)(e.permissionItem)&&"none"!==e.permissionItem.role)))return!1;if(o().qb(t,i))return!1;return"on"===s().default.getEligibleGroup({experimentId:"sites_disable_banner",defaultGroup:"control"})}},69857:(e,t,i)=>{i.r(t),i.d(t,{default:()=>It});var n=i(296540),o=()=>i(484714),s=()=>i(56366),a=()=>i(401497),r=()=>i(68263),l=()=>i(989423),d=()=>i(976721),c=()=>i(525700),u=()=>i(578872);function p(){const e=(0,o().v3)();return(0,s().K8)((()=>e.WindowSizeStore.getSafePaddingLeftCSS(8)),[e])}var g=()=>i(380682),h=()=>i(413582),m=()=>i(584262),f=()=>i(919709),b=()=>i(959013),S=()=>i(496603),x=()=>i(284371),y=()=>i(703875);var v=()=>i(939740),A=()=>i(864943),j=()=>i(204063),k=()=>i(89924),_=()=>i(859428),T=()=>i(437622),w=()=>i(963589),I=()=>i(447934),C=()=>i(138372),M=()=>i(716979),B=()=>i(562800),R=()=>i(962730),E=()=>i(351360),L=()=>i(676870),P=()=>i(435212),O=()=>i(993502),D=()=>i(209660),K=()=>i(493823),H=()=>i(125565),W=()=>i(663590),z=i(474848);const F=(0,b().YK)({allSiteSettingsTitle:{defaultMessage:"Manage all sites",id:"publishSiteSettings.allSites.settingTitle"},viewTemplateListingTitle:{defaultMessage:"View template listing",id:"publishSiteSettings.viewTemplateListing.settingTitle"}});function N(e){let{store:t}=e;const i=(0,o().v3)(),{isMobile:r}=i.device,l=(0,s().K8)((()=>{const e=E().default.state.currentSpaceStore;return!r&&!(0,T().IL)(e)}),[r]),d=(0,s().K8)((()=>(0,W().FI)()),[]),c=(0,n.useCallback)((()=>{D().Ow({currentTab:"sites"})}),[]),u=(0,a().IS)((e=>({button:{height:32,color:e.text.secondary,fontWeight:d?void 0:x().Wy.medium,paddingLeft:8},iconStyle:{height:16,width:16,fill:"transparent",stroke:e.icon.secondary}})),[d]);return i.device.isMobile||!l?null:d?(0,z.jsx)(K().p,{onClick:c,style:u.button,children:(0,z.jsx)(H().A,{isSecondaryColor:!0,children:(0,z.jsx)(b().sA,{...F.allSiteSettingsTitle})})}):(0,z.jsx)(K().p,{onClick:c,style:u.button,children:(0,z.jsx)(b().sA,{...F.allSiteSettingsTitle})})}var U=()=>i(585293);function V(e,t){const n=(0,a().IS)((e=>({icon:{margin:0,height:16,width:16,fill:e.icon.secondary}})),[]);return(0,z.jsx)(U().a,{role:"button",...e,ref:t,title:(0,z.jsx)(b().sA,{defaultMessage:"Site customization",id:"publishSiteSettings.customizeSite.settingTitle"}),icon:(0,i(626466).I)(n.icon)})}const Y=n.forwardRef(V);var q=()=>i(801494),G=()=>i(742117),Z=()=>i(972435),$=()=>i(553965);const Q=(0,b().YK)({embedPageTitleTooltip:{defaultMessage:"Embed this page in other websites outside of Notion",id:"publishSiteSettings.embed.settingTitleTooltip"}});function X(e,t){const n=(0,a().IS)((e=>({icon:{margin:0,height:16,width:16,fill:e.icon.secondary},chevronIcon:{height:12,width:12,fill:e.icon.tertiary}})),[]);return(0,z.jsx)(_().A,{renderTooltip:()=>Z().A.formatMessage(Q.embedPageTitleTooltip),disableTooltip:!1,render:o=>(0,z.jsx)(U().a,{...(0,$().A)(e,o),ref:t,title:(0,z.jsx)(b().sA,{defaultMessage:"Embed this page",id:"publishSiteSettings.embed.settingTitle"}),icon:(0,i(815883).N)(n.icon),right:(0,G().V)(n.chevronIcon),badge:(0,z.jsx)(i(147294).E,{newBadgeKey:"publish_site_settings_embed_page",didUserEngage:!1,style:{display:"inline"}})}),placement:R().W.Bottom,alignment:R().C.Center,textWrap:!0,style:{maxWidth:O().SITE_SETTINGS_TOOLTIP_WIDTH}})}const J=n.forwardRef(X);var ee=()=>i(439616);function te(e,t){const{siteRootBlockStore:n,permissionItem:o}=e,r=(0,s().K8)((()=>u().ZV(n,o)),[n,o]),l=(0,a().IS)((e=>({icon:{margin:0,height:16,width:16,fill:e.icon.secondary},chevronIcon:{height:12,width:12,fill:e.icon.tertiary}})),[]);return(0,z.jsx)(U().a,{...e,ref:t,title:(0,z.jsx)(b().sA,{defaultMessage:"Search engine indexing",id:"publishSiteSettings.SEO.settingTitle"}),icon:(0,i(883679).l)(l.icon),right:(0,z.jsxs)(z.Fragment,{children:[r?(0,z.jsx)(b().sA,{defaultMessage:"On",id:"publishSiteSettings.SEO.valueOn"}):(0,z.jsx)(b().sA,{defaultMessage:"Off",id:"publishSiteSettings.SEO.valueOff"}),(0,G().V)(l.chevronIcon)]})})}const ie=n.forwardRef(te);var ne=()=>i(465425),oe=()=>i(131448),se=(i(944114),i(898992),i(581454),i(737550),()=>i(167355)),ae=()=>i(846899),re=()=>i(413267),le=()=>i(760217),de=()=>i(406699),ce=()=>i(802790),ue=()=>i(928600),pe=()=>i(460292),ge=()=>i(719147),he=()=>i(722872),me=()=>i(652300),fe=()=>i(700250),be=()=>i(404141),Se=()=>i(991249),xe=()=>i(112698),ye=()=>i(597898),ve=()=>i(182242);function Ae(e){const{store:t,siteRootBlockStore:i,disabled:r,showManageAllDomains:l}=e,d=(0,o().v3)(),{device:u}=d,p=(0,s().K8)((()=>{var e;const n=t.getSpaceStore(),o=null===(e=i.getSiteStore())||void 0===e?void 0:e.getDomainId();return o?B().Ue(n,o):B().Nq(n)}),[t,i]),g=(0,s().K8)((()=>null==p?void 0:p.getDomainStatus()),[p]),h=(0,n.useCallback)((e=>{i.id===t.id&&(c().zV({environment:d,siteRootBlockStore:i,domainId:e.id,resetWatermark:"custom"===(null==p?void 0:p.domain_type)&&"custom"!==e.domain_type}),(0,L().Ex)(d,{site_root_block_id:i.id,previous_domain_id:(null==p?void 0:p.id)??null,new_domain_id:e.id}))}),[d,i,t,p]),m=(0,s().K8)((()=>T().IL(t.getSpaceStore())),[t]),f=r||m,S=(0,a().IS)((e=>({valueButton:{paddingLeft:10,paddingRight:8,height:"100%",borderTopRightRadius:0,borderBottomRightRadius:0,background:"payment_required"===g?e.tint.uiRed:"inherit",color:"payment_required"===g?e.text.uiRedPrimary:e.text.primary},valueButtonPressed:{background:"payment_required"===g?e.tint.uiRedPressed:"inherit"},icon:{marginRight:4}})),[g]);return(0,z.jsx)(_().A,{renderTooltip:()=>(0,z.jsx)(b().sA,{id:"publishSiteSettings.publicDomain.noDomainUpdateForGuest",defaultMessage:"You do not have access to update the domain for this published site"}),disableTooltip:!f,render:e=>(0,z.jsx)(de().Ay,{popupType:u.isMobile?de().z7.SlideUp:de().z7.Popup,renderOrigin:t=>(0,z.jsxs)(K().p,{...(0,$().A)(e,t),disabled:f,style:S.valueButton,hoveredStyle:S.valueButton,pressedStyle:{...S.valueButton,...S.valueButtonPressed},children:["payment_required"===g&&(0,z.jsx)("div",{style:S.icon,children:(0,z.jsx)(pe().Q,{iconGroup:se().F,colorName:"redPrimary",variantName:"small"})}),(0,z.jsx)(ve().G,{domain:p})]}),alignmentToOrigin:fe().MY.Start,placementToOrigin:fe().UV.Bottom,render:e=>(0,z.jsx)(je,{store:t,siteRootBlockStore:i,currentDomainId:null==p?void 0:p.id,onChange:h,showManageAllDomains:l,onClose:()=>{e.close()}})}),textWrap:!0,placement:R().W.Bottom,alignment:R().C.End})}function je(e){const{store:t,siteRootBlockStore:i,currentDomainId:r,onChange:l,showManageAllDomains:d,onClose:c}=e,u=(0,o().v3)(),p=u.device,{spaceId:g,userId:h}=(0,s().K8)((()=>{var e,i;return{spaceId:null===(e=t.getSpaceStore())||void 0===e?void 0:e.id,userId:null===(i=t.getSpaceStore())||void 0===i?void 0:i.userId}}),[t]),[m,f]=(0,n.useState)(!1),y=(0,ye()._X)({name:"sites_multiple_public_domains",spaceId:g,userId:h}),A=null==y?void 0:y.upsell,j=()=>{be().A.setState({open:!0,currentTab:"billing",defaultSubtab:void 0,highlightedSetting:void 0,openedFrom:"share_menu"})},T=i.id===t.id,w=(0,s().K8)((()=>B().$o(t.getSpaceStore())),[t]),I=(0,s().K8)((()=>w.some((e=>"payment_required"===e.getDomainStatus()))),[w]),C=(0,a().IS)((e=>({icon:{height:14,width:14,fill:e.icon.secondary},checkIcon:{height:12,width:12,fill:e.icon.secondary},aliasIcon:{marginRight:10},titleText:x().RC,disabledText:{color:e.text.tertiary,...x().RC},paymentRequiredText:{color:e.text.uiRedPrimary,...x().RC},disabledMessageContainer:{paddingTop:4,display:"flex",flexDirection:"column",gap:4,whiteSpace:"normal"},billingTabLink:{backgroundColor:m?e.tint.regular:void 0}})),[m]),M=[];I&&M.push({key:"payment-required",render:e=>(0,z.jsx)(k().A,{...e,style:{paddingTop:0}}),items:[{key:"payment-required",action:S().lQ,render:e=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:{padding:"8px 16px",fontSize:14},...e,children:(0,z.jsx)(b().sA,{defaultMessage:"Update payment method for your custom domain in the {billingTabLink}",id:"publishSiteSettings.publicDomain.paymentRequired",values:{billingTabLink:(0,z.jsx)(ge().A,{disableHover:!0,onClick:j,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),style:C.billingTabLink,children:(0,z.jsx)(b().sA,{defaultMessage:"Billing tab",id:"publishSiteSettings.publicDomain.paymentRequiredLink"})})}})}),(0,z.jsx)(ce().A,{size:"100%"})]})}]}),T||M.push({key:"disabled",render:e=>(0,z.jsx)(k().A,{...e}),items:[{key:"disabled",action:S().lQ,render:e=>(0,z.jsx)(le().A,{...e,focused:e.focused,disabled:!0,title:(0,z.jsxs)("div",{style:C.disabledMessageContainer,children:[(0,z.jsx)(b().sA,{defaultMessage:"The domain for this site can only be updated on the root page",id:"publishSiteSettings.publicDomain.disallowedForNonRoot"}),(0,z.jsx)(me().A,{store:i})]})})}]});const E=w.map((e=>({key:e.id,action:()=>{l(e),c()},render:t=>{const i="active"!==e.getDomainStatus()||!T,n="payment_required"===e.getDomainStatus(),o=i?C.disabledText:n?C.paymentRequiredText:C.titleText,s=i?{...C.checkIcon,...C.disabledText}:C.checkIcon,a=(0,z.jsx)(le().A,{...t,disabled:i,title:B().MN({domainName:e.getDomainName(),domainType:e.getDomainType()}),titleStyle:o,right:e.id===r||!r&&e.isDefault()?(0,re().b)(s):null});return n?(0,z.jsx)(_().A,{placement:R().W.Bottom,render:e=>(0,z.jsx)("div",{...e,children:a}),renderTooltip:()=>(0,z.jsx)(b().sA,{id:"sites.sitesSettingModal.domainMenu.paymentRequiredTooltip",defaultMessage:"Update payment method to use this domain for publishing"})}):a}})));return M.push({key:"domains",render:e=>(0,z.jsx)(k().A,{...e,topBorder:!T,style:I?{paddingTop:0}:{}}),items:E}),!p.isMobile&&d&&M.push({key:"manage",render:e=>(0,z.jsx)(k().A,{...e,topBorder:!0}),items:[{key:"manage",action:()=>{A?Se().K(u,{from:"manage_all_domains",upsell:A}):D().Ow({currentTab:"sites"}),c()},render:e=>(0,z.jsx)(le().A,{...e,focused:e.focused,disabled:!1,title:(0,z.jsx)("div",{style:{display:"flex",gap:6},children:A?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(b().sA,{defaultMessage:"Get multiple domains",id:"publishSiteSettings.publicDomain.getDomains"}),(0,z.jsx)(xe().B,{upsell:A,analyticsName:"manage_all_domains",desktopStyle:{paddingTop:2}})]}):(0,z.jsx)(b().sA,{defaultMessage:"Manage all domains",id:"publishSiteSettings.publicDomain.manageDomains"})}),left:A?void 0:(0,ae().B)(C.icon)})}]}),(0,z.jsx)(ue().A,{menuType:p.isMobile?he().gu.ActionSheet:he().gu.Popup,width:265,children:(0,z.jsx)(v().Ay,{type:v().Oh.Vertical,initialFocus:void 0,sections:M})})}var ke=()=>i(498212),_e=()=>i(603250),Te=()=>i(427704);const we=/^[-a-z0-9]+$/,Ie=/^[-]+$/,Ce=60;var Me=()=>i(939768),Be=()=>i(623580),Re=()=>i(898486),Ee=()=>i(492414),Le=()=>i(375555),Pe=()=>i(630116);function Oe(){const e=(0,a().IS)((e=>({separator:{color:e.text.tertiary,paddingRight:4}})),[]);return(0,z.jsx)("div",{style:e.separator,children:"/"})}const De=(0,b().YK)({max_length_exceeded:{id:"customSlugInput.maxLengthExceeded.message",defaultMessage:"Sorry, slug exceeds 60 characters"},invalid_characters:{id:"customSlugInput.invalidCharacters.message",defaultMessage:"Sorry, slug can only contain - and lower case alphanumeric characters"},missing_alphanumeric_characters:{id:"customSlugInput.missingAlphanumericCharacters.message",defaultMessage:"Sorry, slug must contain at least one alphanumeric character"},uuid_format:{id:"customSlugInput.incorrectUuidFormat.message",defaultMessage:"Sorry, slug cannot be of UUID format"},disallowed_words:{id:"customSlugInput.disallowedWords.message",defaultMessage:"Sorry, slug contains disallowed words"}});function Ke(e){const{store:t,siteRootBlockStore:i,onSave:r,onBlur:d,isError:u,onError:p,clearError:g}=e,h=(0,o().v3)(),f=(0,b().tz)(),S=(0,s().K8)((()=>{var e;return t.getSlug()||(null===(e=Me().qg((0,Ee().Ay)({store:t,preferPublicLink:!0,pageVisitSource:m().y8.CopyLink})).pathname)||void 0===e?void 0:e.substring(1))}),[t]),[y,v]=(0,n.useState)(S??""),A=(0,n.useRef)(null),j=(0,n.useRef)(null),k=(0,n.useCallback)((()=>{var e,t;(0,l().u4)({environment:h,event:{eventName:"clear_slug",eventProperties:{slug:y,site_id:i.getSiteId(),domain_id:null===(e=i.getSiteStore())||void 0===e?void 0:e.getDomainId()}}}),g(),v(""),null===(t=A.current)||void 0===t||t.focus()}),[h,y,g,v,i]),T=(0,n.useCallback)((async()=>{var e;if((0,l().u4)({environment:h,event:{eventName:"save_slug",eventProperties:{slug:y,is_new:Boolean(!S),site_id:i.getSiteId(),domain_id:null===(e=i.getSiteStore())||void 0===e?void 0:e.getDomainId()}}}),!y)return;if(y===S)return void d();const n=function(e){if(e.length>Ce)return"max_length_exceeded";if(!we.test(e))return"invalid_characters";if(Ie.test(e))return"missing_alphanumeric_characters";if((0,ke().uj)(e)||(0,ke().c_)(e))return"uuid_format";const t=[...Object.values(Te().GJ),...Object.values(Te().eR)],i=`/${e}`;return t.findIndex((e=>e===i))>=0||(0,_e().e)(e)?"disallowed_words":"ok"}(y);if("ok"!==n){const e=f.formatMessage(De[n]);return void p(e)}const o=await c().n0({environment:h,blockStore:t,slug:y});if(null!=o&&o.error){var s;const e=null===(s=o.error.body)||void 0===s?void 0:s.clientData;if(e&&"slug_unavailable"===e.type&&e.existingBlockIdWithSlug){const i=e.existingBlockIdWithSlug,n=Pe().Bv.createChildStore(t,{id:i,table:"block"}),o=(0,Re().$c)(e);if(o){const e=f.formatMessage(o,{pageName:(0,z.jsx)(me().A,{store:n,hideIcon:!0})});return void p(e)}}const i=(0,Re().Hu)(f,o.error);p(i)}else r(y),d()}),[h,f,t,i,r,d,p,S,y]),w=(0,n.useCallback)((e=>{"Enter"===e.key&&T()}),[T]),I=(0,a().IS)((e=>({inputContainer:{display:"flex",alignItems:"center",paddingLeft:4,paddingRight:4,height:30,flex:1,borderTopRightRadius:6,borderBottomRightRadius:6,borderLeft:`1px solid ${e.outlineButtonBorder}`,background:e.surface.wash,lineHeight:2.14,...x().RC}})),[]),C=(0,n.useCallback)((e=>{e.relatedTarget!==j.current&&d()}),[d]);(0,n.useEffect)((()=>{A.current&&(0,Le().G)(h,A.current)}),[h]);const M=!y||u;return(0,z.jsxs)("div",{style:I.inputContainer,children:[(0,z.jsx)(Oe,{}),(0,z.jsx)(Be().A,{ref:A,type:"text",value:y,onChange:e=>{g(),v(e.target.value)},onKeyDown:w,format:Be().C.Transparent,onBlur:C,inputStyle:{height:"90%"}}),u?(0,z.jsx)(We,{onClear:k}):(0,z.jsx)(_().A,{render:e=>(0,z.jsx)(He,{ref:j,tooltipEvents:e,disabled:M,onConfirm:()=>{T()}}),renderTooltip:()=>y?(0,z.jsx)(b().sA,{id:"customSlugInput.existingError.tooltip",defaultMessage:"Please fix the error before saving"}):(0,z.jsx)(b().sA,{id:"customSlugInput.emptySlug.tooltip",defaultMessage:"Please enter a slug to save"}),disableTooltip:!M,placement:R().W.Top})]})}const He=n.forwardRef((function(e,t){const{disabled:i,onConfirm:n,tooltipEvents:o}=e,s=(0,a().IS)((e=>({buttonHoveredContainer:{background:i?"transparent":e.tint.uiBlue},button:{border:"none",marginLeft:4,color:i?e.text.tertiary:e.text.uiBluePrimary}})),[i]);return(0,z.jsx)(A().A,{...o,size:"sm",ref:t,onClick:n,style:s.button,hoveredStyle:s.buttonHoveredContainer,disabled:i,children:(0,z.jsx)(b().sA,{id:"customSlugInput.save.button",defaultMessage:"Save"})})}));function We(e){const{onClear:t}=e,i=(0,a().IS)((e=>({buttonContainer:{marginRight:3},button:{border:"none",color:e.text.secondary,fontWeight:x().Wy.medium}})),[]);return(0,z.jsx)(A().A,{size:"sm",onClick:t,style:i.button,buttonStyle:i.buttonContainer,children:(0,z.jsx)(b().sA,{id:"customSlugInput.clear.button",defaultMessage:"Clear"})})}var ze=()=>i(657222),Fe=()=>i(884107),Ne=()=>i(118849),Ue=()=>i(134217),Ve=()=>i(10984),Ye=()=>i(40226);function qe(e){const{store:t,siteRootBlockStore:i,onClick:r,slugOverride:d}=e,c=(0,o().v3)(),[p,g]=(0,n.useState)(!1),h=(0,s().K8)((()=>Ye().R({store:t,pageVisitSource:m().y8.CopyLink})),[t]),f=(0,s().K8)((()=>u().mg(t,i)),[t,i]),b=(0,n.useCallback)((async()=>{const{mobileNative:e}=c,t=await Fe().R.clipboardActions.load();e?e.copyText(h,Z().A.formatMessage(t.clipboardMessages.copiedLinkToClipboard)):t.copyString({environment:c,stringValue:h,copiedMessage:t.clipboardMessages.copiedLinkToClipboard}),(0,l().u4)({environment:c,event:{eventName:"copy_web_link",eventProperties:{}}})}),[c,h]),S=(0,s().K8)((()=>Ve().y4()),[])&&Boolean(r),x=(0,a().IS)((e=>({container:{display:"flex",flex:1,overflow:"auto",height:30,background:e.surface.wash,borderTopRightRadius:6,borderBottomRightRadius:6,...S&&{background:p?e.surface.wash:e.surface.page},...!f&&{borderTopLeftRadius:6,borderBottomLeftRadius:6}},copyButtonBackground:S?{background:p?e.surface.wash:e.surface.page}:{}})),[S,p,f]);return(0,z.jsxs)("div",{style:x.container,children:[(0,z.jsx)("div",{style:{flex:1,overflow:"auto"},onClick:S?r:void 0,children:(0,z.jsx)(Ge,{store:t,siteUrl:h,slugOverride:d,isClickable:S,setIsHovering:g,canUpdateDomain:f})}),(0,z.jsx)(Ze,{style:x.copyButtonBackground,onCopySite:b})]})}function Ge(e){var t;const{store:i,siteUrl:n,slugOverride:r,isClickable:l,setIsHovering:d,canUpdateDomain:c}=e,u=(0,o().v3)(),p=(0,s().K8)((()=>{var e;return null===(e=i.getSpaceStore())||void 0===e?void 0:e.canAdmin()}),[i]),g=(0,s().K8)((()=>Ue().Si(u)),[u]),h=(0,s().K8)((()=>Ve().y4()),[]),m=(0,a().IS)((e=>({inputContainer:{display:"flex",paddingLeft:c?4:10,paddingRight:4,color:e.text.tertiary,borderLeft:`1px solid ${e.outlineButtonBorder}`,background:"transparent",lineHeight:2.14,...!c&&{borderLeft:void 0,borderTopLeftRadius:6,borderBottomLeftRadius:6},...l&&{color:e.text.primary,cursor:"pointer"}},input:{...x().RC,flex:1},inputWrapper:{display:"flex",overflowX:"auto",overflowY:"hidden"},tooltipTitle:{color:e.text.contrastPrimary},tooltipDescription:{color:e.text.contrastSecondary,whiteSpace:"normal"},upsellButton:{alignSelf:"center",height:"fit-content"}})),[c,l]),f=Me().qg(n),S=r||(null===(t=f.pathname)||void 0===t?void 0:t.substring(1)),y=""===S,v=!h&&g?(0,z.jsx)(Ne().A,{subscriptionTier:g,analyticsName:"site_slugs",disableTooltip:!0,desktopStyle:m.upsellButton}):null;return y?(0,z.jsx)(_().A,{renderTooltip:()=>(0,z.jsx)(b().sA,{id:"publishSiteSettings.publicDomain.disabledHomepageTitle",defaultMessage:"This is the homepage of your domain"}),disableTooltip:!1,render:e=>(0,z.jsxs)("div",{style:m.inputContainer,children:[(0,z.jsx)("div",{style:m.input,...e,children:p?(0,z.jsx)(Oe,{}):(0,z.jsx)("div",{style:m.input,children:`${f.hostname}/`})}),v]}),placement:R().W.Bottom,textWrap:!0,style:{maxWidth:240}}):(0,z.jsxs)("div",{style:m.inputContainer,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[(0,z.jsxs)("div",{style:m.inputWrapper,children:[(0,z.jsx)(Oe,{}),(0,z.jsx)("div",{style:m.input,children:S})]}),v]})}function Ze(e){const{style:t,onCopySite:i}=e,n=(0,a().IS)((e=>({copyContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",borderTopRightRadius:6,borderBottomRightRadius:6,...t},copyButton:{border:"none",height:24,width:24,marginRight:4,paddingLeft:0},copyIcon:{height:16,width:16,fill:e.icon.secondary,marginRight:0}})),[t]);return(0,z.jsx)(_().A,{renderTooltip:()=>(0,z.jsx)(b().sA,{id:"publishSiteSettings.copySiteLink.tooltip",defaultMessage:"Copy site link"}),render:e=>(0,z.jsx)("div",{style:n.copyContainer,children:(0,z.jsx)(A().A,{...e,size:"lg",icon:ze().w,onClick:i,style:n.copyButton,iconStyle:n.copyIcon})}),placement:R().W.Top})}function $e(e){const{store:t,siteRootBlockStore:i,isError:o,setError:a,showSlugInput:r,setShowSlugInput:l}=e,[d,c]=(0,n.useState)(),p=(0,s().K8)((()=>t.canAdmin()),[t]),g=(0,s().K8)((()=>u().kx(t,i)),[t,i]);return p&&!g?r?(0,z.jsx)(Ke,{store:t,siteRootBlockStore:i,onSave:e=>{c(e)},onBlur:()=>{l(!1)},isError:o,onError:e=>{a(e)},clearError:()=>{a(void 0)}}):(0,z.jsx)(qe,{store:t,siteRootBlockStore:i,slugOverride:d,onClick:()=>{l(!0)}}):(0,z.jsx)(qe,{store:t,siteRootBlockStore:i})}var Qe=()=>i(594607),Xe=()=>i(515918),Je=()=>i(953006);const et="customize_slug_tooltip";function tt(e){const{originRef:t}=e,i=(0,o().v3)(),n=(0,s().K8)((()=>oe().default.isVisible(et)),[]);return(0,z.jsx)(Qe().B,{shouldShow:n,calloutId:et,children:(0,z.jsx)(Je().k,{style:{width:220},pointerLength:25,pointerPosition:"50%",origin:t,placementToOrigin:"left",alignmentToOrigin:R().C.Center,header:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(b().sA,{id:"customSlugInput.slugTooltip.header",defaultMessage:"Customize your slug"}),(0,z.jsx)(Xe().A,{})]}),content:(0,z.jsx)(b().sA,{id:"customSlugInput.slugTooltip.content",defaultMessage:"You can now change your default URL to anything you want"}),shouldDismissUponOutsideClick:!0,onCloseClick:()=>{ne().a(i,et)}})})}const it="customize_slug_tooltip";function nt(e){const{store:t,siteRootBlockStore:i,disabled:r,showManageAllDomains:l}=e,d=(0,o().v3)(),c=d.device.isMobile,g=(0,n.useRef)(null);(0,n.useEffect)((()=>{ne().HH(d,it)}),[d]);const h=(0,s().K8)((()=>oe().default.isVisible(it)),[]),[m,f]=(0,n.useState)(h),[b,S]=(0,n.useState)();(0,n.useEffect)((()=>{h&&f(!0)}),[h]);const x=(0,s().K8)((()=>u().mg(t,i)),[t,i]),y=p(),v=(0,a().IS)((e=>({container:{marginLeft:c?y:12,marginRight:c?y:12},linkContainer:{display:"flex",alignItems:"center",height:32,borderRadius:6,fontSize:14,lineHeight:2.28,border:b?`1px solid ${e.errorText}`:m?`1px solid ${e.stroke.uiBluePrimary}`:`1px solid ${e.outlineButtonBorder}`,boxShadow:m&&!b?e.focusedShadow:void 0}})),[y,c,m,b]);return(0,z.jsxs)("div",{style:v.container,children:[(0,z.jsx)(tt,{originRef:g}),(0,z.jsxs)("div",{style:v.linkContainer,ref:g,children:[x&&(0,z.jsx)(Ae,{store:t,siteRootBlockStore:i,disabled:r,showManageAllDomains:l}),(0,z.jsx)($e,{store:t,siteRootBlockStore:i,isError:Boolean(b),setError:e=>{S(e)},showSlugInput:m,setShowSlugInput:f})]}),(0,z.jsx)(ot,{errorMessage:b})]})}function ot(e){const{errorMessage:t}=e,i=(0,a().IS)((e=>({container:{fontSize:12,lineHeight:1.33,minHeight:20,width:"100%",color:e.errorText,padding:2,marginTop:6,display:"flex",flexDirection:"row",alignItems:"center"}})),[]);return t?(0,z.jsx)("div",{style:i.container,children:t}):null}function st(e){const{store:t,siteRootBlockStore:i,showManageAllDomains:n}=e,o=(0,s().K8)((()=>!t.canAdmin()),[t]),r=(0,a().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:8,paddingBottom:12},settingsContainer:{opacity:o?.7:1}})),[o]);return(0,z.jsxs)("div",{style:r.container,children:[i&&(0,z.jsx)(nt,{store:t,siteRootBlockStore:i,disabled:o,showManageAllDomains:n}),(0,z.jsx)(_().A,{renderTooltip:()=>(0,z.jsx)(b().sA,{defaultMessage:"You must have full access to this page to update the settings",id:"publishSiteSettings.all.noEditAccess"}),disableTooltip:!o,render:t=>(0,z.jsx)("div",{style:r.settingsContainer,...t,children:(0,z.jsx)(rt,{...e,disabled:o})})}),(0,z.jsx)(lt,{...e}),(0,z.jsx)(at,{store:t})]})}function at(e){const{store:t}=e,i=(0,o().v3)().device.isMobile,n=(0,s().K8)((()=>!t.canAdmin()),[t]),r=(0,s().K8)((()=>{var e;return null===(e=t.getSpaceStore())||void 0===e?void 0:e.canAdmin()}),[t]),{domainDisplayName:l,isPublicHomepage:d}=(0,s().K8)((()=>{const e=t.getSpaceStore(),i=u().UP(t),n=B().Ix({spaceStore:e,domainId:i}),o=B().Ue(e,i);return{domainDisplayName:n,isPublicHomepage:(null==o?void 0:o.getPublicHomePage())===t.id}}),[t]),c=(0,a().IS)((e=>({container:{paddingLeft:18,paddingRight:18,color:e.text.secondary,fontSize:14}})),[]);return i?n?(0,z.jsx)("div",{style:c.container,children:(0,z.jsx)(b().sA,{id:"publishSiteSettings.noEditAccess.mobileTooltip",defaultMessage:"You must have full access to this page to update the settings"})}):d&&!r?(0,z.jsx)("div",{style:c.container,children:(0,z.jsx)(b().sA,{defaultMessage:"This page is the homepage of {domain}. Please visit the Sites tab in Settings on desktop to make changes.",id:"publishSiteSettings.unpublishHomePage.mobileTooltip",values:{domain:l}})}):null:null}function rt(e){const{store:t,siteRootBlockStore:i,mostPermissivePublicItem:n,location:s,sudoModeStore:r,onSettingUpdate:d,onSeoClick:u,onEmbedClick:g,disabled:h}=e,{permissionItem:m,from:f}=n,b=(0,o().v3)(),x=p(),y="published_site_settings"===s,A=(0,a().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:4,paddingLeft:x,paddingRight:x,paddingBottom:y?0:12,paddingTop:0,boxShadow:y?void 0:`inset 0 -1px 0 ${e.regularDividerColor}`}})),[x,y]),j=(0,w().X)("enable_embeddable_sites_for_space"),_=(0,w().X)("sharing_anyone_with_the_link"),T=(0,S().oE)([i&&!b.device.isMobile&&{key:"customizeSiteSetting",render:e=>(0,z.jsx)(Y,{...e,disabled:h}),action:()=>{I().jP({environment:b,store:t,siteRootBlockStore:i,from:"customize_site"}),c().HY({siteRootBlockStore:i,permissionItem:m,from:f,sudoModeStore:r}),(0,P().as)(b,{page_from:t.id,is_root:i.id===t.id})}},i&&{key:"setLocaleUserSetting",render:e=>(0,z.jsx)(ie,{...e,disabled:h,siteRootBlockStore:i,permissionItem:m}),action:()=>{u()}},!_&&{key:"linkExpirationSetting",render:e=>(0,z.jsx)(ee().A,{...e,disabled:h,permissionItem:m,onChange:e=>{d({...m,expiration_timestamp:e}),(0,L().i_)(b,{target_block_id:t.id,expiration_timestamp:e??null})}}),action:()=>{}},{key:"duplicateAsTemplateSetting",render:e=>(0,z.jsx)(q().A,{...e,disabled:h,value:m.allow_duplicate}),action:()=>{const e=m.allow_duplicate;d({...m,allow_duplicate:!e}),function(e,t){l().vd(e,"toggle_allow_duplicate",t)}(b,{allow_duplicate:!e})}},j&&{key:"embedSetting",render:e=>(0,z.jsx)(J,{...e,disabled:h}),action:()=>{g()}}]),C=(0,S().oE)([{key:0,render:e=>(0,z.jsx)(k().A,{style:A.container,...e}),items:T}]);return(0,z.jsx)(v().Ay,{type:v().Oh.Vertical,sections:C,initialFocus:void 0,resetFocusOnMouseOut:!0})}function lt(e){const{store:t,mostPermissivePublicItem:i,onUnpublish:r,onSettingUpdate:l,showAllPublishedSites:d,shouldAskForConfirmationOnPublish:u}=e,p=(0,o().v3)(),g=p.device.isMobile,h=(0,s().K8)((()=>t.canAdmin()),[t]),S=(0,s().K8)((()=>{var e;return null===(e=t.getSpaceStore())||void 0===e?void 0:e.canAdmin()}),[t]),v=(0,s().K8)((()=>Boolean(B().NG(t.getSpaceStore(),t.id))),[t]),k=!h||v&&!S,I=(0,n.useCallback)((async()=>{let e=!0;if(u&&(e=await M().EL(f().q4_(t.getTitleValue()))),e){const e=(0,C().H)({permissionItem:i.permissionItem});l(e),(0,L().T6)(p,{target_block_id:t.id}),r&&r()}}),[p,i,u,t,l,r]),P=(0,n.useCallback)((()=>{y().V(p),c().uY({environment:p,store:t,pageVisitSource:m().y8.SiteSettings})}),[p,t]),D=(0,w().X)("sites_split_publish_actions")||g,K=(0,s().K8)((()=>{const e=E().default.state.currentSpaceStore;return!g&&!(0,T().IL)(e)&&d}),[g,d]),H=(0,a().IS)((()=>({buttonContainer:{gap:6},actionButtons:{display:"flex",alignItems:"center",gap:8,marginTop:4,paddingLeft:D?12:8,paddingRight:12,height:32,justifyContent:"flex-end"},button:{flexGrow:1,flexBasis:D?0:void 0,maxWidth:D?void 0:90,fontWeight:x().Wy.medium},disabledButton:{opacity:.7},icon:{height:16,width:16,marginRight:4}})),[D]);return D?(0,z.jsxs)("div",{style:H.buttonContainer,children:[(0,z.jsxs)("div",{style:H.actionButtons,children:[(0,z.jsx)(_().A,{disableTooltip:!k,renderTooltip:()=>v&&!S?(0,z.jsx)(b().sA,{defaultMessage:"You cannot unpublish the public homepage of a workspace domain. Go to the Sites tab in Settings to make changes.",id:"publishSiteSettings.unpublishHomePage.tooltip"}):(0,z.jsx)(b().sA,{defaultMessage:"You must have full access to this page to unpublish it",id:"publishSiteSettings.unpublish.tooltip"}),render:e=>(0,z.jsx)(A().A,{...e,size:"lg",onClick:I,disabled:k,style:k?{...H.button,...H.disabledButton}:H.button,children:(0,z.jsx)(b().sA,{defaultMessage:"Unpublish",id:"publishSiteSettings.unpublish.title"})}),textWrap:!0,placement:R().W.Bottom,style:{width:O().SITE_SETTINGS_TOOLTIP_WIDTH}}),(0,z.jsx)(j().A,{onClick:P,style:H.button,children:(0,z.jsx)(b().sA,{defaultMessage:"View site",id:"publishSiteSettings.viewSite.title"})})]}),K&&(0,z.jsx)("div",{style:H.actionButtons,children:(0,z.jsx)("div",{style:{display:"flex",flex:1},children:(0,z.jsx)(N,{store:t})})})]}):(0,z.jsxs)("div",{style:H.actionButtons,children:[K&&(0,z.jsx)("div",{style:{display:"flex",flex:1},children:(0,z.jsx)(N,{store:t})}),(0,z.jsx)(_().A,{disableTooltip:!k,renderTooltip:()=>v?(0,z.jsx)(b().sA,{defaultMessage:"You cannot unpublish the public homepage of a workspace domain. Go to the Sites tab in Settings to make changes.",id:"publishSiteSettings.unpublishHomePage.tooltip"}):(0,z.jsx)(b().sA,{defaultMessage:"You must have full access to this page to unpublish it",id:"publishSiteSettings.unpublish.tooltip"}),render:e=>(0,z.jsx)(A().A,{...e,size:"lg",onClick:I,disabled:k,style:k?{...H.button,...H.disabledButton}:H.button,children:(0,z.jsx)(b().sA,{defaultMessage:"Unpublish",id:"publishSiteSettings.unpublish.title"})}),textWrap:!0,placement:R().W.Bottom,style:{width:O().SITE_SETTINGS_TOOLTIP_WIDTH}}),(0,z.jsx)(j().A,{onClick:P,style:H.button,children:(0,z.jsx)(b().sA,{defaultMessage:"View site",id:"publishSiteSettings.viewSite.title"})})]})}var dt=()=>i(819121),ct=()=>i(416504),ut=()=>i(30626);const pt=(0,i(340498).wt)("sparkleMagnifyingGlass",{viewBox:"0 0 19 15",svg:(0,z.jsx)("path",{d:"M.02 5.78c0-.77.143-1.49.43-2.16A5.578 5.578 0 0 1 3.424.645a5.384 5.384 0 0 1 2.16-.438 5.4 5.4 0 0 1 2.167.438 5.499 5.499 0 0 1 1.77 1.196c.51.51.91 1.103 1.197 1.777.287.67.43 1.39.43 2.16 0 .597-.09 1.167-.273 1.71a5.495 5.495 0 0 1-.759 1.483l3.46 3.472a.843.843 0 0 1 .211.322c.05.127.075.257.075.39 0 .19-.043.364-.13.519a.982.982 0 0 1-.875.499c-.136 0-.266-.023-.39-.069a.926.926 0 0 1-.334-.218L8.646 10.4a5.833 5.833 0 0 1-1.428.69 5.218 5.218 0 0 1-1.634.254 5.457 5.457 0 0 1-2.16-.43A5.78 5.78 0 0 1 1.646 9.71 5.6 5.6 0 0 1 .45 7.94a5.457 5.457 0 0 1-.43-2.16Zm1.456 0c0 .564.107 1.095.32 1.592.215.497.509.934.883 1.313a4.26 4.26 0 0 0 1.305.881c.497.215 1.03.322 1.6.322.57 0 1.103-.107 1.6-.322a4.236 4.236 0 0 0 1.312-.881c.378-.379.672-.816.882-1.313a3.98 3.98 0 0 0 .321-1.593c0-.57-.107-1.103-.321-1.6a4.083 4.083 0 0 0-.882-1.312 4.083 4.083 0 0 0-1.312-.882 3.996 3.996 0 0 0-1.6-.32c-.57 0-1.103.106-1.6.32-.492.21-.927.504-1.305.882a4.236 4.236 0 0 0-.882 1.313 3.996 3.996 0 0 0-.321 1.6Zm2.064-.404a.472.472 0 0 1-.355-.15.511.511 0 0 1-.137-.356.483.483 0 0 1 .492-.492h4.095a.46.46 0 0 1 .348.143.475.475 0 0 1 .144.35.498.498 0 0 1-.144.355.45.45 0 0 1-.348.15H3.54Zm0 1.798a.483.483 0 0 1-.355-.144.487.487 0 0 1-.137-.348c0-.137.045-.256.137-.356.095-.1.214-.15.355-.15h2.953c.137 0 .253.05.349.15a.486.486 0 0 1 0 .704.475.475 0 0 1-.349.144H3.54ZM15.852.694c.738 0 1.296.186 1.674.56.379.374.568.927.568 1.661v8.32c0 .729-.19 1.28-.568 1.654-.378.378-.936.567-1.674.567H14.6c.036-.237.03-.472-.02-.704a1.703 1.703 0 0 0-.288-.643h1.477c.314 0 .556-.082.724-.246.173-.164.26-.412.26-.745V3.024c0-.328-.087-.574-.26-.738-.168-.164-.41-.246-.724-.246H7.676V.693h8.176ZM4.23 12.108h4.998l1.346 1.347H4.142c-.734 0-1.292-.19-1.675-.567-.378-.374-.568-.925-.568-1.655v-1.9h1.347v1.784c0 .333.084.581.253.745.169.164.412.246.731.246Z"})});var gt=()=>i(700500),ht=()=>i(792071),mt=()=>i(450648),ft=()=>i(179034);const bt="Notion | The connected workspace with site publishing",St="Made with Notion, the all-in-one connected workspace with publishing capabilities.";var xt=()=>i(594739),yt=()=>i(614505),vt=()=>i(946548),At=()=>i(21140),jt=()=>i(370898);const kt=(0,b().YK)({seoTitle:{id:"publishSiteSettings.SEO.toggle",defaultMessage:"Discoverable on the web"}});function _t(e){const{store:t,siteRootBlockStore:i,permissionItem:r,onNavigateBack:d}=e,p=(0,o().v3)(),g=(0,b().tz)(),{spaceId:h,userId:m}=(0,s().K8)((()=>{var e,i;return{spaceId:null===(e=t.getSpaceStore())||void 0===e?void 0:e.id,userId:null===(i=t.getSpaceStore())||void 0===i?void 0:i.userId}}),[t]),f=(0,ye().P9)({name:"seo_title_and_description",spaceId:h,userId:m}),S=(0,s().K8)((()=>u().ZV(i,r)),[i,r]),{seoTitle:y,seoDescription:v,icon:A,domainName:j}=(0,s().K8)((()=>{var e,n,o,s;let a=null===(e=t.getFormat())||void 0===e?void 0:e.seo_title,r=null===(n=t.getFormat())||void 0===n?void 0:n.seo_description;a||(a=function(e,t,i,n){if(!t)return;const o=t.getRenderTitle({getRecordModel:i,userTimeZone:n,intl:e});return o?`${o} | Notion`:void 0}(g,t.getModel(),t.getRecordModel,(0,ct().P)())),r||(r=function(e,t,i,n){if(!t)return;const o=t.getCollectionPointer(),s=o&&i(o);if(s&&s.getDescription()){const t=(0,mt().r4)({intl:e,textValue:s.getDescription(),getRecordModel:i,userTimeZone:n});if(t)return t}let a=[...t.getContentIds()||[]];for(;a.length>0;){const t=a.shift();if(!t)break;const o=i({table:ft().ev,id:t});if(!o||"page"===o.type||!(0,gt().Db)(o.type,o.getFormat()))continue;const s=ht().Bj6.fromBlock(o).getRenderTitle({getRecordModel:i,userTimeZone:n,intl:e});if(s)return s;a=a.concat(o.getContentIds()||[])}}(g,t.getModel(),t.getRecordModel,(0,ct().P)()));let l=t.getIcon();const d=null===(o=i.getSiteStore())||void 0===o?void 0:o.getFaviconUrl();return d&&(l={pointer:i.pointer,icon:d}),{seoTitle:a,seoDescription:r,icon:l,domainName:B().Ix({spaceStore:t.getSpaceStore(),domainId:null===(s=i.getSiteStore())||void 0===s?void 0:s.getDomainId()})}}),[g,t,i]),[k,_]=(0,n.useState)(y),[T,w]=(0,n.useState)(v),[I,C]=(0,n.useState)(!1),[M,R]=(0,n.useState)(!1),E=!S||!f,L=()=>{c().H6({environment:p,siteRootBlockStore:i,isSearchEngineIndexingEnabled:!S}),function(e,t){l().vd(e,"toggle_allow_search_engine_indexing",t)}(p,{allow_search_engine_indexing:!S}),C(!0)},P=(0,n.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,dt().p)(t)&&R(!0)}),[]),O=(0,n.useCallback)((()=>{R(!1)}),[]),D=(0,a().IS)((e=>({searchIcon:{width:19},linkTitleContainer:{paddingLeft:8,paddingRight:8},descriptionContainer:{paddingLeft:8,paddingRight:8},inputLabel:{fontWeight:x().Wy.medium,fontSize:12,lineHeight:1.25,color:e.text.secondary},inputContainer:{borderRadius:6,height:34,padding:4,fontWeight:x().Wy.regular,fontSize:14,lineHeight:1.3,backgroundColor:e.surface.wash},input:{paddingLeft:4,color:E?e.lightTextColor:void 0},descriptionInput:{height:68}})),[E]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt().A,{show:M}),(0,z.jsx)(jt().O,{title:kt.seoTitle,icon:pt,iconStyle:D.searchIcon,right:(0,z.jsx)(vt().A,{on:Boolean(S),onClick:L}),disabled:!1,onClick:L}),(0,z.jsx)(Tt,{isSeoOff:!S,title:k,description:T,icon:A,domainName:j}),(0,z.jsxs)(At().wt,{gap:6,style:D.linkTitleContainer,children:[(0,z.jsx)("div",{style:D.inputLabel,children:(0,z.jsx)(b().sA,{id:"publishSiteSettings.SEO.titleInputLabel",defaultMessage:"Link title"})}),(0,z.jsx)(Be().A,{type:"text",style:D.inputContainer,inputStyle:D.input,value:k,onChange:e=>{_(e.target.value),C(!0)},placeholder:bt,disabled:E,onFocus:P,onBlur:O})]}),(0,z.jsxs)(At().wt,{gap:6,style:D.descriptionContainer,children:[(0,z.jsx)("div",{style:D.inputLabel,children:(0,z.jsx)(b().sA,{id:"publishSiteSettings.SEO.descriptionInputLabel",defaultMessage:"Description"})}),(0,z.jsx)(Be().A,{textarea:!0,style:{...D.inputContainer,...D.descriptionInput},inputStyle:D.input,value:T,onChange:e=>{w(e.target.value),C(!0)},placeholder:St,disabled:E,onFocus:P,onBlur:O})]}),(0,z.jsx)(wt,{spaceId:h,userId:m,disabled:!I,onSaveClick:()=>{c().HE({environment:p,store:t,seoTitle:k,seoDescription:T}),d()}})]})}function Tt(e){const{isSeoOff:t,title:i,description:n,icon:o,domainName:s}=e,r=(0,a().IS)((e=>({container:{paddingLeft:8,paddingRight:8},previewContainer:{alignItems:"center",justifyContent:"center",padding:12,border:`1px solid ${e.stroke.primary}`,borderRadius:8,height:84},domainContainer:{alignItems:"center",fontSize:11,lineHeight:1.5,width:"100%",opacity:t?.3:1},menuIcon:{color:e.text.secondary,height:12,width:12,transform:"rotate(90deg)",marginTop:1},inputLabel:{fontWeight:x().Wy.medium,fontSize:12,lineHeight:1.25,color:e.text.secondary},title:{color:e.seoPreviewTitle,fontSize:16,lineHeight:1.4,fontWeight:x().Wy.medium,width:"100%",opacity:t?.3:1,...x().RC},description:{fontSize:12,lineHeight:1.33,width:"100%",opacity:t?.3:1,...x().RC},emptyPlaceholderText:{color:e.text.tertiary,width:"100%",textAlign:"center"}})),[t]);return(0,z.jsxs)(At().wt,{gap:6,style:r.container,children:[(0,z.jsx)("div",{style:r.inputLabel,children:(0,z.jsx)(b().sA,{id:"publishSiteSettings.SEO.previewTitle",defaultMessage:"SEO preview"})}),(0,z.jsxs)(At().wt,{justifyContent:"space-between",alignItems:"center",style:r.previewContainer,children:[(0,z.jsxs)(At().Ye,{gap:4,style:r.domainContainer,children:[(0,z.jsx)(yt().A,{disabled:!0,icon:o,isEmptyPage:!1,disableShrinking:!0,size:16,emojiSize:16,style:{marginRight:4}}),s,(0,ut()._)(r.menuIcon)]}),(0,z.jsxs)("div",{style:r.title,children:[i||bt," "]}),(0,z.jsx)("div",{style:r.description,children:n||St})]})]})}function wt(e){const{disabled:t,onSaveClick:i,spaceId:n,userId:o}=e,s=(0,ye()._X)({name:"seo_title_and_description",spaceId:n,userId:o}),r=null==s?void 0:s.upsell,l=(0,a().IS)((()=>({upsellContainer:{paddingLeft:8},saveButton:{height:32,marginLeft:"auto",marginRight:8,width:"fit-content"}})),[]);return r?(0,z.jsxs)(At().Ye,{gap:6,style:l.upsellContainer,children:[(0,z.jsx)(H().A,{children:(0,z.jsx)(b().sA,{id:"publishSiteSettings.SEO.upgradeTitle",defaultMessage:"Edit link title and description"})}),(0,z.jsx)(xe().B,{upsell:r,analyticsName:"search_engine_indexing_title_override"})]}):(0,z.jsx)(j().A,{onClick:i,disabled:t,style:l.saveButton,children:(0,z.jsx)(b().sA,{defaultMessage:"Save changes",id:"publishSiteSettings.seo.saveChanges"})})}function It(e){const{store:t,mostPermissivePublicItem:i,sudoModeStore:p,location:h,showManageAllDomains:m,showAllPublishedSites:f,onUnpublish:b,shouldAskForConfirmationOnPublish:S}=e,{permissionItem:x,from:y}=i,v=(0,o().v3)(),{isMobile:A}=(0,o().Y0)(),j=(0,s().K8)((()=>{if(t.getSpaceStore())return u().GN(t)}),[t]),k=(0,a().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:8,...A?{paddingTop:16}:{}}})),[A]),_=(0,s().K8)((()=>g().A.state.siteSettingContentType),[]),T=(0,n.useCallback)((e=>{const i=(0,r().Yi)(y);(0,d().Hc)({oldPermissionItem:x,newPermissionItem:e,wasInherited:i!==t.id,environment:v,store:t,sudoModeStore:p,location:h})}),[v,t,x,p,y,h]);return(0,z.jsx)("div",{style:k.container,children:"initial"===_?(0,z.jsx)(st,{store:t,siteRootBlockStore:j,location:h,mostPermissivePublicItem:i,sudoModeStore:p,onSettingUpdate:T,onSeoClick:()=>{(0,c().Bp)("seo")},onEmbedClick:()=>{(0,c().Bp)("embed"),(0,l().u4)({environment:v,event:{eventName:"click_embed_page_settings",eventProperties:{target_block_id:t.id}}})},showManageAllDomains:m,showAllPublishedSites:f,onUnpublish:b,shouldAskForConfirmationOnPublish:S}):(0,z.jsx)(Ct,{settingsContentType:_,store:t,siteRootBlockStore:j,permissionItem:x,onNavigateBack:()=>{(0,c().Bp)("initial")}})})}function Ct(e){const{store:t,siteRootBlockStore:i,permissionItem:n,onNavigateBack:s,settingsContentType:r}=e,{isMobile:l}=(0,o().Y0)(),d=p(),c=(0,a().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:16,marginTop:14,marginBottom:l?0:16,paddingLeft:d,paddingRight:d}})),[d,l]);return i?(0,z.jsx)("div",{style:c.container,children:"seo"===r?(0,z.jsx)(_t,{store:t,siteRootBlockStore:i,permissionItem:n,onNavigateBack:s}):(0,z.jsx)(h().M,{currentBlockStore:t})}):null}},72307:(e,t,i)=>{i.d(t,{A:()=>n});const n={appCursorListener:{sidebar:1,secondarySidebar:2,editor:3,aiChat:3,marketplace:3,teamHome:3}}},77126:(e,t,i)=>{i.d(t,{j:()=>o});class n extends(()=>i(959180))().A{}const o=new n},138372:(e,t,i)=>{i.d(t,{H:()=>o});var n=()=>i(508496);function o(e){const{permissionItem:t}=e,{is_public_share_link:i}=t;return n().default.checkGate({gateName:"sharing_anyone_with_the_link"})?i?{...t,is_site:!1}:{...t,role:"none",is_site:!1}:{...t,is_site:!1,role:"none"}}},182242:(e,t,i)=>{i.d(t,{G:()=>c});i(296540);var n=()=>i(484714),o=()=>i(56366),s=()=>i(401497),a=()=>i(883234),r=()=>i(125565),l=()=>i(562800),d=i(474848);function c(e){const{domain:t,style:i}=e,{device:c}=(0,n().v3)(),[u,p]=(0,o().K8)((()=>[t?l().MN({domainName:t.getDomainName(),domainType:t.getDomainType()}):"",null==t?void 0:t.getDomainStatus()]),[t]),g=(0,s().IS)((e=>({container:{display:"flex",alignItems:"center",gap:6,maxWidth:c.isMobile?185:320},label:{color:"payment_required"===p?e.text.uiRedPrimary:void 0,flex:1},chevronIcon:{height:10,width:10,fill:"payment_required"===p?e.text.uiRedSecondary:e.icon.tertiary}})),[c,p]);return(0,d.jsxs)("div",{style:{...g.container,...i},children:[(0,d.jsx)(r().A,{style:g.label,children:u}),(0,a()._)(g.chevronIcon)]})}},332390:(e,t,i)=>{i.d(t,{C7:()=>C,Yf:()=>R,k8:()=>M,lN:()=>B,oG:()=>E});var n=i(296540),o=()=>i(484714),s=()=>i(56366),a=()=>i(700500),r=()=>i(130382),l=()=>i(959013),d=()=>i(534177),c=()=>i(191197),u=()=>i(953006),p=()=>i(68465),g=()=>i(231722),h=()=>i(792002),m=()=>i(465425),f=()=>i(51367),b=()=>i(301421),S=()=>i(351360),x=()=>i(411671),y=()=>i(630116),v=()=>i(24157),A=()=>i(576590),j=()=>i(656633),k=()=>i(972911),_=i(474848);const T=1,w=1,I=(0,l().YK)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Ask AI when searching"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"AI can find pages and synthesize a quick, concise answer for you. Try it now."},showAssistantOriginElementLocationHeader:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.header",defaultMessage:"Start by asking a question"},showAssistantOriginElementLocationContent:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.content",defaultMessage:"Notion AI will find pages and compose a concise answer for you. Try it now."}});function C(){const e=(0,o().v3)(),t=function(){const e=(0,o().v3)(),t=(0,s().K8)((()=>{var e;return null===(e=S().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),i=(0,s().K8)((()=>{const t=S().default.state.mainEditorCurrentBlockStore;return t&&x().A.getMode(e,t)}),[e]);return(0,s().K8)((()=>{if(e.device.isMobile)return;const{currentUserSettingsStore:n,inAppCalloutStore:o}=S().default.state;if(!o.getCalloutVisibility("ai_onboarding_tooltip").canShow)return;const s=null==n?void 0:n.getSettings();if(!s)return;if((0,d().O9)(s.last_used_ai_writer_at))return;if("tooltip"!==s.ai_assistant_onboarding_phase)return;if((0,j().vp)(e,t)){if(!(0,d().O9)(s.ai_sales_assisted_extra_notification_seen_at)||(0,r().Mn)(s.ai_sales_assisted_extra_notification_seen_at)<w)return}else if((0,d().O9)(s.ai_assistant_onboarding_phase_last_set_at)&&(0,r().Mn)(s.ai_assistant_onboarding_phase_last_set_at)<T)return;if("space_for_ai"!==(0,k().V7)())return;if(!(0,p().ZE)(i))return;const l=v().default.state;if("editing"===l.mode){const e=(0,g().H7)(l.multiSelection);if(e&&(0,h().gE)(e.selection)){const t=e.store,i=b().n.findEditableWithStore(t);if(i){const e="block"===t.pointer.table?y().Bv.createChildStore(t,t.pointer):void 0,n=e&&e.getType(),o=Boolean(n&&(0,a().ZW)(n)),s=t.getValue();if(o&&!s)return i}}}}),[e,i,t])}(),[i,c]=(0,n.useState)(!1),m=(0,n.useCallback)((()=>{c(!0)}),[]),f=!i&&Boolean(t);return(0,n.useEffect)((()=>()=>{f&&(0,k().ZI)(e)}),[e,f]),f&&t?(0,_.jsx)(u().k,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,_.jsx)(l().sA,{...I.spaceForAiHeader}),content:(0,_.jsx)(l().sA,{...I.spaceForAiContent}),onCloseClick:m}):null}function M(e){const{originRef:t,openState:i}=e,a=(0,o().v3)(),r=(0,s().K8)((()=>(0,k().V7)()),[]),[d,c]=(0,n.useState)(!1),p=(0,n.useCallback)((()=>{c(!0)}),[]),g="ask_ai_anything"===r&&"initialPrompt"===i.stage&&!d;return(0,n.useEffect)((()=>()=>{!a.device.isMobile&&g&&(0,k().ZI)(a)}),[a,g]),a.device.isMobile||!g?null:(0,_.jsx)(u().k,{origin:t,placementToOrigin:"top",header:(0,_.jsx)(l().sA,{...I.askAiAnythingHeader}),content:(0,_.jsx)(l().sA,{...I.askAiAnythingContent}),onCloseClick:p})}function B(e){const{originRef:t,openState:i,isInputEmpty:a}=e,r=(0,o().v3)(),d=(0,s().K8)((()=>(0,k().V7)()),[]),[c,p]=(0,n.useState)(!1),g=(0,n.useCallback)((()=>{p(!0)}),[]),h="refine_ai_response"===d&&"results"===i.stage&&!i.loading&&"cursor"===i.context.type&&a&&!c;return(0,n.useEffect)((()=>()=>{!r.device.isMobile&&h&&(0,k().ZI)(r)}),[r,h]),r.device.isMobile?null:(0,_.jsx)(u().k,{origin:h?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,_.jsx)(l().sA,{...I.refineAiResponseHeader}),content:(0,_.jsx)(l().sA,{...I.refineAiResponseContent}),onCloseClick:g})}function R(e){const{origin:t}=e,i=(0,o().v3)();(0,n.useEffect)((()=>{c().i(i,{from:"qna_button"}),f().DL(i,{callout_key:"ai_assistant_origin_element_tooltip",placement_key:"Tooltip"})}),[i]);const s=(0,n.useCallback)((()=>{const{currentUserSettingsStore:e}=S().default.state;e&&(c().z(i,{from:"qna_button"}),f().Sq(i,{callout_key:"ai_assistant_origin_element_tooltip",dismiss_type:"tooltip_dismiss",placement_key:"Tooltip"}),(0,A().setQnaOnboardingPhase)(i,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}),m().a(i,"ai_assistant_origin_element_tooltip"))}),[i]);return(0,_.jsx)(u().k,{style:{width:250},pointerLength:25,pointerPosition:"94%",origin:t,placementToOrigin:"top",header:(0,_.jsx)(l().sA,{...I.showAssistantOriginElementLocationHeader}),content:(0,_.jsx)(l().sA,{...I.showAssistantOriginElementLocationContent}),onCloseClick:s})}function E(e){const{origin:t}=e,i=(0,o().v3)();(0,n.useEffect)((()=>{c().i(i,{from:"qna_search"})}),[i]);const s=(0,n.useCallback)((()=>{const{currentUserSettingsStore:e}=S().default.state;e&&(c().z(i,{from:"qna_search"}),(0,A().setQnaOnboardingPhase)(i,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[i]);return(0,_.jsx)(u().k,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,_.jsx)(l().sA,{...I.showAssistantLocationHeader}),content:(0,_.jsx)(l().sA,{...I.showAssistantLocationContent}),onCloseClick:s})}(0,i(466103).exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=S().default.state;t&&i(317909).createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,canUndo:!0,perform:e=>{i(755199).mJ({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},370898:(e,t,i)=>{i.d(t,{O:()=>d});i(296540);var n=()=>i(401497),o=()=>i(493823),s=()=>i(959013),a=()=>i(125565),r=i(474848);function l(e){const{title:t,icon:i,iconStyle:o,disabled:l}=e,d=(0,n().IS)((e=>({container:{display:"flex",alignItems:"center",gap:6},icon:{height:16,width:16,fill:e.icon.secondary,...o},text:{color:l?e.text.secondary:void 0}})),[o,l]);return(0,r.jsxs)("div",{style:d.container,children:[i&&i(d.icon),(0,r.jsx)(a().A,{style:d.text,children:(0,r.jsx)(s().sA,{...t})})]})}function d(e){const{title:t,icon:i,iconStyle:s,right:a,disabled:d,onClick:c,style:u,badge:p}=e,g=(0,n().IS)((()=>({container:{minHeight:32,paddingLeft:8,paddingRight:8,width:"100%",paddingTop:2,paddingBottom:2,...u},titleContainer:{display:"flex",flex:1}})),[u]);return(0,r.jsxs)(o().p,{disabled:d,onClick:c,style:g.container,children:[(0,r.jsxs)("div",{style:g.titleContainer,children:[(0,r.jsx)(l,{title:t,icon:i,iconStyle:s,disabled:d}),p]}),a]})}},413582:(e,t,i)=>{i.d(t,{M:()=>I});var n=i(296540),o=()=>i(484714),s=()=>i(56366),a=()=>i(401497),r=()=>i(971311),l=()=>i(925844),d=()=>i(959013),c=()=>i(284371),u=()=>i(884107),p=()=>i(84817),g=()=>i(623580),h=()=>i(864943),m=()=>i(946548),f=()=>i(859428),b=()=>i(42425),S=()=>i(989423),x=()=>i(972435),y=()=>i(962730),v=()=>i(525700),A=()=>i(40226),j=()=>i(578872),k=()=>i(993502),_=()=>i(370898),T=i(474848);const w=(0,d().YK)({showTitle:{id:"embedSettingsContent.showPageTitle.toggle",defaultMessage:"Show page title"},showFormTitle:{id:"embedSettingsContent.showFormTitle.toggle",defaultMessage:"Show form title"},showTitleTooltip:{id:"embedSettingsContent.showTitleTooltip",defaultMessage:"Show page title & icon in the embedded view"}});function I(e){const t=(0,o().v3)(),{currentBlockStore:i}=e,I=(0,s().K8)((()=>{var e;if(i)return null===(e=(0,j().GN)(i))||void 0===e?void 0:e.getSiteStore()}),[i]),C=(0,s().K8)((()=>{var e;return null==I||null===(e=I.getSettings())||void 0===e?void 0:e.embedSettings}),[I]),M=(0,s().K8)((()=>i?(0,A().R)({store:i,embedded:!0,pageVisitSource:void 0}):""),[i]),B=(0,s().K8)((()=>M?`\n\t\t\t\t<iframe src="${M}"\n\t\t\t\t\twidth="100%"\n\t\t\t\t\theight="600"\n\t\t\t\t\tframeborder="0"\n\t\t\t\t\tallowfullscreen\n\t\t\t\t/>\n\t\t\t\t`.trim().replace(/\s+/g," "):""),[M]),R=n.useCallback((async()=>{const e=await u().R.clipboardActions.load();e.copyString({environment:t,stringValue:B,copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),(0,S().u4)({environment:t,event:{eventName:"copy_embed_code",eventProperties:{target_block_id:i.id}}})}),[B,t,i.id]),E=n.useCallback((()=>{I&&(0,v().E9)({environment:t,siteStore:I,embedSettings:{hideTitle:!(null!=C&&C.hideTitle)}})}),[I,null==C?void 0:C.hideTitle,t]),L=(0,s().K8)((()=>i.isFormBlock()?w.showFormTitle:w.showTitle),[i]),P=(0,a().IS)((e=>({title:{fontWeight:c().Wy.bold,fontSize:25,marginTop:20},copyIcon:{width:16,height:16,marginLeft:0,marginRight:6},primaryButton:{marginLeft:"auto",marginRight:0,width:"fit-content"},titleIcon:{width:16,height:16},container:{paddingLeft:8,paddingRight:8}})),[]);return(0,T.jsxs)(p().Y1,{direction:"vertical",gap:14,style:P.container,children:[(0,T.jsx)(f().A,{renderTooltip:()=>x().A.formatMessage(w.showTitleTooltip),disableTooltip:!1,render:e=>(0,T.jsx)("div",{...e,children:(0,T.jsx)(_().O,{title:L,icon:l().g,iconStyle:P.titleIcon,right:(0,T.jsx)(m().A,{on:!Boolean(null==C?void 0:C.hideTitle),onClick:E}),disabled:!1,onClick:E,style:{marginBottom:-6}})}),placement:y().W.Bottom,alignment:b().C1.Center,textWrap:!0,style:{maxWidth:k().SITE_SETTINGS_TOOLTIP_WIDTH}}),(0,T.jsx)(g().A,{disabled:!0,textarea:!0,textareaSubmitOnEnter:!1,autosize:!0,autosizeMinHeight:50,showClearButton:!1,readOnly:!0,value:B,textareaElementAttributes:{cols:50}}),(0,T.jsx)(h().A,{size:"lg",onClick:R,style:P.primaryButton,icon:e=>(0,r().z)({...e,...P.copyIcon}),children:(0,T.jsx)(d().sA,{id:"embedSettingsContent.copyEmbedCode",defaultMessage:"Copy code"})})]})}},439616:(e,t,i)=>{i.d(t,{A:()=>B});i(944114),i(581454);var n=i(296540),o=()=>i(662303),s=()=>i(484714),a=()=>i(56366),r=()=>i(401497),l=()=>i(869190),d=()=>i(68263),c=()=>i(959013),u=()=>i(720665),p=()=>i(760217),g=()=>i(406699),h=()=>i(928600),m=()=>i(939740),f=()=>i(89924),b=()=>i(125565),S=()=>i(573351),x=()=>i(662971),y=()=>i(186445),v=()=>i(722872),A=()=>i(700250),j=()=>i(991249),k=()=>i(118849),_=()=>i(134217),T=i(474848);function w(e,t){const{permissionItem:n,hideIcon:o,onChange:a,buttonStyle:l}=e,d=(0,s().Y0)(),u=(0,r().IS)((e=>({icon:{margin:0,height:16,width:16,fill:e.icon.secondary},chevronIcon:{height:12,width:12,fill:e.icon.tertiary,transform:"rotate(90deg)"}})),[]);return(0,T.jsx)(i(811979).A,{...e,popupType:d.isMobile?g().z7.SlideUp:g().z7.Popup,renderOrigin:s=>(0,T.jsx)(i(585293).a,{...(0,i(553965).A)(e,s),ref:t,title:(0,T.jsx)(c().sA,{defaultMessage:"Link expires",id:"publishSiteSettings.linkExpiration.settingTitle"}),icon:!o&&(0,i(589982).u)(u.icon),right:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(I,{permissionItem:n}),(0,i(742117).V)(u.chevronIcon)]}),buttonStyle:l}),alignmentToOrigin:A().MY.Center,placementToOrigin:A().UV.Bottom,render:e=>(0,T.jsx)(C,{value:n.expiration_timestamp,onChange:a,onClose:()=>{e.close()}})})}function I(e){const{permissionItem:t}=e,i=(0,c().tz)(),n=(0,r().IS)((e=>({container:{color:e.text.secondary}})),[]);if(!t.expiration_timestamp||(0,d().OA)(t))return(0,T.jsx)(b().A,{style:n.container,children:(0,T.jsx)(c().sA,{defaultMessage:"Never",id:"publishSiteSettings.linkExpiration.never"})});const s=l().jE(t.expiration_timestamp,o().locale,i);return(0,T.jsx)(b().A,{style:n.container,children:s})}function C(e){const{value:t,onChange:i,onClose:l}=e,d=(0,s().v3)(),g=d.device,b=(0,a().K8)((()=>!_().qC()),[]),S=(0,a().K8)((()=>_().Si(d)),[d]),x=(0,n.useCallback)((e=>{void 0!==e&&e<=(new Date).getTime()||(i(e),l())}),[i,l]),y=(0,r().IS)((e=>({disabledContainer:{display:"flex",gap:6},disabledText:{color:e.text.tertiary}})),[]),A=function(){const e=Date.now(),t=e+u().pT,i=e+u().nD,n=e+7*u().nD;return[{key:"none",time:void 0,title:(0,T.jsx)(c().sA,{defaultMessage:"Never",id:"publishSiteSettings.linkExpiration.never"})},{key:"hour",time:t,title:(0,T.jsx)(c().sA,{defaultMessage:"In an hour",id:"publishSiteSettings.linkExpiration.oneHour"}),caption:new Intl.DateTimeFormat(o().locale,{hour:"numeric",minute:"numeric"}).format(t)},{key:"day",time:i,title:(0,T.jsx)(c().sA,{defaultMessage:"In a day",id:"publishSiteSettings.linkExpiration.oneDay"}),caption:new Intl.DateTimeFormat(o().locale,{day:"numeric",month:"long",hour:"numeric",minute:"numeric"}).format(i)},{key:"week",time:n,title:(0,T.jsx)(c().sA,{defaultMessage:"In a week",id:"publishSiteSettings.linkExpiration.oneWeek"}),caption:new Intl.DateTimeFormat(o().locale,{day:"numeric",month:"long",hour:"numeric",minute:"numeric"}).format(n)}]}().map((e=>({key:e.key,action:()=>{x(e.time)},render:t=>(0,T.jsx)(p().A,{...t,title:e.title,titleStyle:b?y.disabledText:{},caption:e.caption,captionStyle:b?y.disabledText:{},disabled:b})}))),w=[{key:"predefined-expiration",render:e=>(0,T.jsx)(f().A,{...e}),items:A},{key:"custom-expiration",render:e=>(0,T.jsx)(f().A,{...e,topBorder:!0}),items:[M(x,t,b,y.disabledText)]}];return S&&b&&w.push({key:"upgrade-for-expiration",render:e=>(0,T.jsx)(f().A,{...e,topBorder:!0}),items:[{key:"upsell",action:()=>{j().K(d,{from:"public_permission_item_expiration",upsell:{type:"product",product:S,limit:{type:"none"}}})},render:e=>(0,T.jsx)(p().A,{...e,focused:e.focused,title:(0,T.jsxs)("div",{style:y.disabledContainer,children:[(0,T.jsx)(c().sA,{defaultMessage:"Unlock link expiration",id:"publishSiteSettings.linkExpiration.upgrade"}),(0,T.jsx)(k().A,{subscriptionTier:S,analyticsName:"public_permission_item_expiration"})]})})}]}),(0,T.jsx)(h().A,{menuType:g.isMobile?v().gu.ActionSheet:v().gu.Popup,width:271,children:(0,T.jsx)(m().Ay,{type:m().Oh.Vertical,initialFocus:void 0,sections:w})})}function M(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{key:"custom",action:()=>{window.parent.close()},render:(o,s)=>(0,T.jsx)(x().A,{...o,renderOrigin:e=>(0,T.jsx)(p().A,{...e,disabled:i,title:(0,T.jsx)(c().sA,{id:"publicPermissionItem.expiration.chooseDate",defaultMessage:"Choose date"}),titleStyle:i?n:{}}),onFocus:s.onFocus,disableDefaultClick:!0,renderExtension:(n,o)=>(0,T.jsx)("div",{style:{padding:"18px 14px 14px"},children:(0,T.jsx)(S().A,{...n,firstDayOfWeek:y().XX.state,value:t||Date.now(),onChange:t=>{e(t),o.close()},disabledDays:i||{before:new Date}})})})}}const B=n.forwardRef(w)},518598:(e,t,i)=>{i.d(t,{K:()=>c});i(296540);var n=()=>i(426388),o=()=>i(959013),s=()=>i(705540),a=()=>i(285790),r=()=>i(745766),l=i(474848);const d=(0,o().YK)({menu:{defaultMessage:"Menu",id:"topbar.appMenuButton.title"}});function c(){const e=(0,o().tz)();return(0,l.jsx)(a().A,{style:{position:"absolute",top:"10px",left:"14px",width:24,height:24,zIndex:1e5,...(0,r().g)({noDrag:!0})},iconStyle:{width:16,height:16},isDarkIconColor:!0,onClick:()=>{s().openAppMenu()},icon:n().S,ariaLabel:e.formatMessage(d.menu)})}},558410:(e,t,i)=>{i.d(t,{A:()=>s});i(898992),i(354520);var n=()=>i(496603);class o extends(()=>i(757695))().default{getInitialState(){return{sites:{},sortAscending:!0,sortColumn:void 0}}initializeSiteResultsForSpace(e,t){this.state.sites[e]=t,this.emit()}getSortedSitesForSpace(e,t){const{sortAscending:o,sortColumn:s}=this.state,a=this.state.sites[e];if(a)switch(s){case"page":return n().My(a,(e=>i(919709).q4_(e.store.getTitleValue()).toLowerCase()),o?"asc":"desc");case"published-by":return n().My(a,(e=>{const n=e.publishedMetadata.publishedBy,o=n?i(630116).sk.createChildStore(e.store,n):void 0;return null==o?void 0:o.getDisplayName(t).toLowerCase()}),o?"asc":"desc");case"published-date":return n().My(a,(e=>e.publishedMetadata.publishedTime),o?"asc":"desc");default:return a}}removeSiteFromSpace(e,t){const i=this.state.sites[e];i&&(this.state.sites[e]=i.filter((e=>e.store.id!==t)),this.emit())}resetSitesForSpace(e){this.state.sites[e]=void 0}}const s=new o},567121:(e,t,i)=>{i.d(t,{EG:()=>a,K5:()=>s,RH:()=>o,Yi:()=>r,ls:()=>n});const n=32,o=202,s=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",r="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},652300:(e,t,i)=>{i.d(t,{A:()=>x});var n=i(296540),o=()=>i(56366),s=()=>i(401497),a=()=>i(584262),r=()=>i(926401),l=()=>i(500066),d=()=>i(296798),c=()=>i(614505),u=()=>i(16006),p=()=>i(492414),g=()=>i(553965),h=()=>i(962730),m=i(474848);function f(e){let{store:t,...o}=e;const s=(0,n.useCallback)((e=>(0,m.jsx)(i(851860).yf,{store:t,events:e})),[t]);return(0,m.jsx)(i(859428).A,{noStyle:!0,delayThreshold:400,placement:h().W.Bottom,alignment:h().C.Start,renderTooltip:s,...o})}const b=n.memo(f);var S=()=>i(404141);function x(e){const{store:t,style:i,hideIcon:h}=e,f=(0,o().K8)((()=>{if(t)return{icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),url:(0,p().J8)({store:t,pageVisitSource:a().y8.SiteSettings})}}),[t]),x=(0,n.useCallback)((e=>{e.metaKey||S().A.setState({...S().A.state,open:!1})}),[]),y=(0,s().IS)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden",cursor:"default"},emptyPageIcon:{height:18,width:18,fill:e.accentColors.gray[500]},iconContainer:{position:"relative",width:20,height:20,marginRight:4},linkBox:{borderRadius:3,maxWidth:"100%"},linkIcon:{position:"absolute",width:10,height:10,right:0,bottom:0},pageRecordContainer:{display:"flex",alignItems:"center",paddingTop:2,paddingBottom:2,paddingRight:4,paddingLeft:4,...i},pageTitle:{wordBreak:"break-word",borderBottom:"0.05em solid rgba(55,53,47,.25)"}})),[i]);if(!t||!f)return null;const v=(0,m.jsxs)("div",{style:y.pageRecordContainer,children:[!h&&(0,m.jsxs)("div",{style:y.iconContainer,children:[f.icon?(0,m.jsx)(c().A,{icon:f.icon,store:t,disabled:!0,size:16,isEmptyPage:f.isEmptyPage,emojiSize:20}):(0,r().n)(y.emptyPageIcon),(0,l().G)(y.linkIcon)]}),(0,m.jsx)(u().A,{store:t,style:y.pageTitle})]});return(0,m.jsx)("div",{style:y.container,children:(0,m.jsx)(b,{store:t,render:e=>(0,m.jsx)(d().A,{href:null==f?void 0:f.url,style:y.linkBox,...(0,g().A)(e,{onClick:x}),children:v})})})}},703875:(e,t,i)=>{i.d(t,{N:()=>s,V:()=>o});var n=()=>i(989423);function o(e){n().vd(e,"view_public_site_click")}function s(e,t){n().vd(e,"share_menu_tab_click",t)}},716979:(e,t,i)=>{i.d(t,{EL:()=>j,KD:()=>v,Ss:()=>x,l2:()=>k,n0:()=>A,rw:()=>y});i(16280),i(944114),i(898992),i(354520),i(296540);var n=()=>i(388821),o=()=>i(179034),s=()=>i(959013),a=()=>i(763824),r=()=>i(449506),l=()=>i(901389),d=()=>i(106628),c=()=>i(321172),u=()=>i(437487),p=()=>i(227440),g=()=>i(630116),h=()=>i(250484),m=()=>i(67805),f=()=>i(558410),b=i(474848);const S=50;function x(e){f().A.resetSitesForSpace(e.id)}async function y(e,t){const{spaceStore:i,currentUserId:s,limit:l}=t;if(!i.id)return;const[d]=await Promise.all([r().callApi({eventName:"getPublishedPagesForUser",environment:e,data:{spaceId:i.id,limit:l||S,fetchPublishedMetadata:!0}}),(0,a().wR)(1500)]);if("failed"===d.type)throw new Error("Failed to fetch published pages.");if(d.data.recordMap){const e=[],t=n().RecordMapWithRole.create(d.data.recordMap),a=d.data.publishedEdits;for(const{model:n}of t)if(n&&n.table===o().ev){const t=g().Bv.createChildStore(i,{table:o().ev,id:n.id}),s=a[t.id],r=s&&s.authors?s.authors[0]:void 0,l={publishedTime:null==s?void 0:s.timestamp,publishedBy:r};e.push({store:t,publishedMetadata:l})}let r=e;return s&&(r=m().X(e,s)),f().A.initializeSiteResultsForSpace(i.id,r),r}}async function v(e,t){const{spaceStore:i}=t,n=e.currentUser.id,o=await y(e,{spaceStore:i,currentUserId:n});return o?o.filter((e=>{var t;return(null===(t=e.publishedMetadata.publishedBy)||void 0===t?void 0:t.id)===n})):[]}function A(e){c().Tk(e),u().Ay.setState({...u().Ay.state,display:u().pP.Publish,tab:u().QC.Publish})}async function j(e){return new Promise(((t,i)=>{l().ui({message:(0,b.jsx)("div",{style:{textAlign:"center"},children:(0,b.jsx)(s().sA,{id:"sites.confirmUnpublish.title",defaultMessage:"Unpublish this site?"})}),description:(0,b.jsx)("div",{style:{textAlign:"center"},children:(0,b.jsx)(s().sA,{id:"sites.confirmUnpublish.caption",defaultMessage:"{pageTitle} will no longer be live on the web.",values:{pageTitle:e}})}),keepFocus:!0,items:[{label:(0,b.jsx)(s().sA,{id:"sites.confirmUnpublish.confirm",defaultMessage:"Unpublish"}),color:"red",onAccept:()=>t(!0)}],showCancel:!0})}))}async function k(e,t){if(!p().A.state.online)return[];const i=await d().T.searchActions.load();return await i.searchPublicPages({environment:t,query:e,source:"public_home_page_menu",limit:h().ZK})}},765974:(e,t,i)=>{i.d(t,{b:()=>o});i(296540);const n={viewBox:"0 0 20 20",svg:(0,i(474848).jsx)("path",{d:"M11.84 3.563c-.817-1.417-2.862-1.417-3.68 0L2.314 13.688c-.818 1.416.205 3.187 1.84 3.187h11.692c1.636 0 2.658-1.77 1.84-3.187zM9.876 6.75c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5"})},o=(0,i(340498).wt)("exclamationMarkTriangleFill",n)},848565:(e,t,i)=>{i.d(t,{FB:()=>p,Ql:()=>g,SM:()=>h,Wv:()=>s,Yz:()=>r,ds:()=>o,e4:()=>n,eQ:()=>a,im:()=>d,jw:()=>l,k2:()=>u,uG:()=>c});const n=8,o=10,s=8,a=24,r=6,l=1.5,d=(a-l)/2,c=a+r,u=`calc(100% + ${s+(n-r)-c}px)`,p=a+8,g=-16;function h(e){return"margin_comments"===e?12:"comment_unfurl"===e?14:16}}}]);