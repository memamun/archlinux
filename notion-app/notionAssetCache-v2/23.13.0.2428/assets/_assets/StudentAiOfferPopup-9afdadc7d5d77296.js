"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[73502],{181804:(t,e,n)=>{n.r(e),n.d(e,{StudentAiOfferPopup:()=>C});var i=()=>n(244641),s=n(296540),o=()=>n(484714),a=()=>n(56366),u=()=>n(543906),r=()=>n(187174),p=()=>n(964996),l=()=>n(959013),d=()=>n(252105),f=()=>n(812182),c=()=>n(317909),_=()=>n(755199),m=()=>n(985395),g=()=>n(94476),A=()=>n(351360),S=()=>n(57605),v=()=>n(749356),b=()=>n(991249),h=()=>n(972418),y=()=>n(450930),x=n(474848);function C(){const t=(0,o().v3)(),e=(0,l().tz)(),{isMobile:n}=(0,o().Y0)(),C=(0,h().UL)("sidebar"),M=(0,m().n)(),{inAppCalloutStore:w,currentUserSettingsStore:D}=(0,a().K8)((()=>({inAppCalloutStore:A().default.state.inAppCalloutStore,currentUserSettingsStore:A().default.state.currentUserSettingsStore})),[]),[{value:I}]=(0,r().Yb)((async()=>{const e=A().default.state.currentSpaceStore;if(!e)return;const n=await S().A.awaitData(t,{spaceId:e.id});return n||void 0}),[t]),K=(0,a().K8)((()=>null==I?void 0:I.subscription),[I]),O=(0,a().K8)((()=>{const t=null==K?void 0:K.startDate;return!!t&&i().c9.now()>t.plus({days:1})}),[K]),U=(0,a().K8)((()=>w.getCalloutVisibility("student_ai_offer_popup").canShow&&C&&!M&&O),[w,C,M,O]),P=(0,a().K8)((()=>{var t;return null==D||null===(t=D.getSettings())||void 0===t?void 0:t.dismissed_student_ai_popup}),[D]),T=Boolean(!P&&U&&!n),j=(0,s.useMemo)((()=>function(t){const{intl:e,environment:n,onDismiss:i}=t;return{presentationType:"persistent",id:"student_ai_offer_toast",title:e.formatMessage({id:"studentAiOfferPopup.title",defaultMessage:"Students get half off unlimited AI"}),icon:p().e,jsxMessage:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(l().sA,{id:"studentAiOfferPopup.description",defaultMessage:"Unlock unlimited use of AI for Q&A, Autofill, Writer, and more"}),(0,x.jsx)(y().B,{tooltipMessage:(0,x.jsx)(l().sA,{id:"studentAiOfferPopup.tooltip",defaultMessage:"You can access this offer again by visiting our plans page in settings"}),tooltipWidth:"216px",overlayContainerZIndex:g().TOASTER_ZINDEX+1})]}),actions:{primary:{title:e.formatMessage({id:"studentAiOfferPopup.buttonLabel",defaultMessage:"Redeem now"}),onAction:()=>{(0,b().K)(n,{from:"student_ai_popup",upsell:{type:"product",product:"ai",limit:{type:"none"}}}),f().UW("student_ai_offer_toast")}}},onDismiss:i}}({intl:e,environment:t,onDismiss:()=>{d().yF(t),w.updateCalloutStatus({calloutId:"student_ai_offer_popup",visible:!1}),D&&c().createAndCommit({userAction:"StudentAiOfferPopup.handleDismiss",environment:t,canUndo:!0,perform:t=>{_().mJ({transaction:t,userSettingsStore:D,data:{dismissed_student_ai_popup:!0}})}})}})),[D,t,w,e]);return(0,u().A)((async()=>{d().hq(t,{from:"student_ai_offer_popup"}),w.updateCalloutStatus({calloutId:"student_ai_offer_popup",visible:!0}),f().HK(j),await(0,v().x3)({environment:t,hasReceived:!1,offerType:"add_on_upgrade_flow",coupon:"ai_fifty_percent"})}),T),null}}}]);