"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[59794],{35394:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();const t={...this.getInitialState()};e.initialDateRange&&(t.temporaryDateRange=e.initialDateRange),e.shouldAlsoUpdateSearchStore&&(t.shouldAlsoUpdateSearchStore=e.shouldAlsoUpdateSearchStore),this.setState(t)}getInitialState(){return{isOpen:!1,focus:"starting",temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,dateFilterType:"lastEditedTime",shouldAlsoUpdateSearchStore:!1}}getFocus(){return this.state.focus}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const r=n},117586:(e,t,o)=>{o.d(t,{Ay:()=>l,dz:()=>r,xQ:()=>n});let n=function(e){return e.StartDate="startDate",e.StartTime="startTime",e.EndDate="endDate",e.EndTime="endTime",e}({}),r=function(e){return e.InvalidDate="Invalid date",e.InvalidTime="Invalid time",e.InvalidRange="Invalid range",e}({});class i extends(()=>o(757695))().default{getInitialState(){return{focus:n.StartDate,inputIsFocused:!1,inputTemporaryValue:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0},error:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0}}}}const l=i},128941:(e,t,o)=>{o.d(t,{$J:()=>R,Nf:()=>B,Ay:()=>P});o(898992),o(354520),o(672577);var n=o(296540),r=()=>o(484714),i=()=>o(56366),l=()=>o(289915),a=()=>o(30626),s=o(474848);const d={viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M9.325 10.466V2.063a.625.625 0 1 1 1.25 0v8.453l1.458-1.458a.625.625 0 1 1 .884.884l-2.5 2.5a.625.625 0 0 1-.884 0l-2.5-2.5a.625.625 0 1 1 .884-.884z"}),(0,s.jsx)("path",{d:"M11.825 6.375H14.5c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-9a.875.875 0 0 1-.875-.875v-7.5c0-.483.392-.875.875-.875h2.575v-1.25H5.5A2.125 2.125 0 0 0 3.375 7.25v7.5c0 1.174.951 2.125 2.125 2.125h9a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 14.5 5.125h-2.675z"})]})},c=(0,o(340498).wt)("squareAndArrowDown",d);var u=()=>o(959013),p=()=>o(496603),g=()=>o(284371),h=()=>o(436696),f=()=>o(187899),m=()=>o(686526),v=()=>o(317909),x=()=>o(493823),y=()=>o(760217),C=()=>o(406699),S=()=>o(928600),b=()=>o(939740),A=()=>o(14235),j=()=>o(89924),F=()=>o(859428),k=()=>o(873050),w=()=>o(722872),M=()=>o(553965),D=()=>o(962730),T=()=>o(497222);let R=function(e){return e[e.FilterBar=0]="FilterBar",e[e.SettingsFilters=1]="SettingsFilters",e[e.SettingsSort=2]="SettingsSort",e}({});const I=o(757695).default.createClass(!1,{name:"ShowMoreStore"});function B(){return(0,s.jsx)(u().sA,{id:"database.filterValue.mergeIntoAdvancedFilter.tooltip",defaultMessage:"Use an advanced filter to group filter rules and use AND/OR conditions."})}const P=function(e){let{collectionContextStore:t,context:l,showHoverActionsStore:d,moreActionsButtonPopupStore:p}=e;const f=(0,o(401497).DP)(),m=(0,r().v3)(),v=(0,u().tz)(),y=(0,r().Y0)(),S=(0,i().uB)(p,o(463830).A),b=(0,i().uB)(void 0,I),j=(0,i().K8)((()=>{const e=t.localStateDiffStore.state;return l===R.SettingsFilters?(e.filters.moved.length>0?1:0)+e.filters.added.length+e.filters.removed.length+e.filters.updated.length:0}),[t,l]),k=(0,n.useCallback)((()=>function(e,t,o){(0,h().X)({environment:e,collectionContextStore:t,action:"click_save_control_more_options_button"}),o.setState(!0)}(m,t,b)),[m,t,b]),w=(0,i().O$)(t.permissionScopesStore),M=(0,i().K8)((()=>t.isFullScreenStore.state||!d||d.state),[t,d]),P=(0,i().O$)(b),G=(0,i().K8)((()=>E(t,l)),[t,l]),q=(0,i().K8)((()=>"collectionSettings"===t.contextType),[t]),Z=(0,i().K8)((()=>t.collectionViewBlockStore()),[t]),$=(0,o(424141).y)(Z);if(l===R.FilterBar)return y.isPhone?w.canConfigureBlock?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x().p,{isOrange:!0,hovered:!0,style:{flexGrow:1,justifyContent:"center",height:32,marginRight:8,fontWeight:g().Wy.semibold},onClick:()=>W(m,t,l),children:(0,s.jsx)(O,{})}),(0,s.jsx)(C().Ay,{popupType:y.isMobile?A().nl.SlideUp:A().nl.Popup,render:e=>(0,s.jsx)(Y,{parent:e,collectionContextStore:t,context:l}),originGap:4,onClick:()=>N(m,t),buttonPopupStore:S,renderOrigin:e=>(0,s.jsx)(o(285790).A,{style:{width:32,height:32},iconStyle:{width:16},hovered:!0,icon:a()._,...e})})]}):(0,s.jsx)(x().p,{style:{flexGrow:1,justifyContent:"center",height:32,marginRight:8,fontWeight:g().Wy.semibold},hovered:!0,isGray:!0,onClick:()=>U(m,t,l),children:(0,s.jsx)(_,{})}):(0,s.jsxs)(o(145214).A,{visible:M,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},style:{display:"flex",alignItems:"center"},children:[!w.canConfigureBlock&&(0,s.jsx)(F().A,{placement:D().W.Bottom,renderTooltip:()=>(0,s.jsx)(u().sA,{defaultMessage:"Changes to filters & sorts in this view are only visible to you.",id:"database.viewSettings.filterAndSortSaveControl.myViewTooltip"}),render:e=>(0,s.jsx)("div",{...e,style:{color:f.mediumTextColor,fontSize:14,fontWeight:g().Wy.medium,cursor:"default",display:"flex",alignItems:"center",position:"relative"},children:(0,s.jsx)("div",{style:{marginRight:2,marginLeft:12,width:7,height:7,borderRadius:"50%",background:"dark"===f.mode?f.accentColors.orange[500]:f.accentColors.orange[300]}})})}),(0,s.jsx)(x().p,{isGray:!0,onClick:()=>U(m,t,l),style:{lineHeight:1.1,fontSize:y.isMobile?16:14},children:(0,s.jsx)(_,{})}),w.canConfigureBlock&&(0,s.jsx)(C().Ay,{popupType:m.device.isMobile?A().nl.SlideUp:A().nl.Popup,render:e=>(0,s.jsx)(Y,{parent:e,collectionContextStore:t,context:l}),originGap:4,onClick:()=>N(m,t),buttonPopupStore:S,renderOrigin:e=>q&&$?(0,s.jsx)(o(59400).it,{workflowStore:$,collectionContextStore:t}):(0,s.jsx)(o(430102).A,{title:(0,s.jsx)(O,{}),color:"orange",onClick:()=>W(m,t,l),onDropdownClick:e.onClick,style:{marginLeft:6,marginRight:y.isMobile?8:void 0,fontSize:y.isMobile?16:14,...y.isMobile?{height:30}:null}})})]});if(l===R.SettingsFilters||l===R.SettingsSort){const e=l===R.SettingsFilters;return(0,s.jsxs)(s.Fragment,{children:[P&&w.canConfigureBlock&&(y.isMobile?(0,s.jsx)(o(678553).A,{style:{fontSize:12,color:f.mediumTextColor},title:(0,s.jsx)(z,{context:l,changeCount:j})}):(0,s.jsx)("div",{style:{fontSize:12,color:f.mediumTextColor,paddingLeft:14,paddingRight:14,paddingTop:8,paddingBottom:8,maxWidth:220},children:(0,s.jsx)(z,{context:l,changeCount:j})})),w.canConfigureBlock&&(0,s.jsx)(T().A,{icon:c,isOrange:!0,title:(0,s.jsx)(O,{}),onClick:()=>W(m,t,l)}),(0,s.jsx)(T().A,{icon:o(454503).D,isGray:!0,title:e?(0,s.jsx)(u().sA,{defaultMessage:"Reset filters",id:"database.viewSettings.filterAndSortSaveControl.resetFilters"}):(0,s.jsx)(u().sA,{defaultMessage:"Reset sorts",id:"database.viewSettings.filterAndSortSaveControl.resetSorts"}),onClick:()=>U(m,t,l)}),w.canConfigureBlock&&!P&&(0,s.jsx)(T().A,{icon:a()._,isGray:!0,title:(0,s.jsx)(u().sA,{defaultMessage:"More options",id:"database.viewSettings.filterAndSortSaveControl.more"}),onClick:k}),w.canConfigureBlock&&P&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T().A,{icon:o(536583).d,isGray:!0,title:(0,s.jsx)(V,{}),onClick:()=>{K(m,t,v)}}),G&&(0,s.jsx)(F().A,{placement:D().W.Left,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,s.jsx)("div",{children:(0,s.jsx)(B,{})}),render:e=>(0,s.jsx)(T().A,{icon:o(170350).S,isGray:!0,title:(0,s.jsx)(L,{}),onClick:()=>{H(m,t,l)},...e})})]})]})}(0,o(534177).HB)(l)};function V(){return(0,s.jsx)(u().sA,{defaultMessage:"Save as new view",id:"database.filterBar.changesControl.saveAsNewView.title"})}function L(){return(0,s.jsx)(u().sA,{defaultMessage:"Merge into advanced filter",id:"database.filterBar.changesControl.mergeIntoAdvancedFilter.title"})}function _(){return(0,s.jsx)(u().sA,{defaultMessage:"Reset",id:"database.filterBar.changesControl.reset.title"})}function O(){return(0,s.jsx)(u().sA,{defaultMessage:"Save for everyone",id:"database.filterBar.changesControl.saveForEveryone.title"})}function E(e,t){const o=e.currentPropertyFiltersStore.state;return(t===R.FilterBar||t===R.SettingsFilters)&&Boolean(o.find((e=>(0,l().yX)(e.filter))))}function W(e,t,o){const n=t.collectionViewStore();n&&((0,h().X)({environment:e,collectionContextStore:t,action:"click_save_control_save_in_current_view"}),v().createAndCommit({userAction:"CollectionSettingsSaveControl.handleSaveInCurrentViewClick",environment:e,canUndo:!0,perform:r=>{f().B$({environment:e,type:o===R.FilterBar?f().Hs.All:o===R.SettingsFilters?f().Hs.Filters:f().Hs.Sorts,collectionContextStore:t,targetCollectionViewStore:n,transaction:r})}}),f().Aq({environment:e,seen:!0}))}function K(e,t,o,n){(0,h().X)({environment:e,collectionContextStore:t,action:"click_save_control_save_as_new_view"}),v().createAndCommit({userAction:"CollectionSettingsSaveControl.handleSaveAsNewViewClick",environment:e,canUndo:!0,perform:n=>{f().RQ({environment:e,collectionContextStore:t,transaction:n,intl:o})}}),null==n||n.close()}function H(e,t,o,n){const r=(0,k().Pi)(t),i=t.currentPropertyFiltersStore.state.filter((e=>(0,k().vu)(e.id)));f().IU({environment:e,collectionContextStore:t,temporaryState:{...t.temporaryStateStore.state,propertyFilters:{value:i},combinatorFilter:{value:r}}});const l=o===R.FilterBar?t.filterBarCombinatorFilterSettingsStore:t.filterOptionsCombinatorFilterSettingsStore;m().R8({collectionSettingsStore:l,item:{type:"filter"}}),(0,h().X)({environment:e,collectionContextStore:t,action:"merge_filter_into_combinator"}),null==n||n.close()}function U(e,t,o,n){(0,h().X)({environment:e,collectionContextStore:t,action:"click_save_control_reset"});const r=t.temporaryStateStore.state,i=o===R.SettingsFilters?{...r,propertyFilters:void 0,combinatorFilter:void 0}:o===R.SettingsSort?{...r,sorts:void 0}:void 0;f().LS({environment:e,collectionContextStore:t,temporaryState:i}),f().Aq({environment:e,seen:!0}),null==n||n.close()}function N(e,t){(0,h().X)({environment:e,collectionContextStore:t,action:"click_save_control_more_options_popup"}),f().Aq({environment:e,seen:!0})}function Y(e){let{parent:t,collectionContextStore:o,context:n}=e;const l=(0,u().tz)(),a=(0,r().v3)(),{device:d}=a,c=(0,r().WS)();let g;g=d.isMobile?{menuType:w().gu.ActionSheet}:{menuType:w().gu.Popup,width:250};const h=(0,i().K8)((()=>E(o,n)),[o,n]),f=p().oE([c&&{key:"reset",render:e=>(0,s.jsx)(y().A,{...e,disabled:!1,title:(0,s.jsx)(_,{})}),action:()=>{U(a,o,n,t)}},{key:"newView",render:e=>(0,s.jsx)(y().A,{...e,disabled:!1,title:(0,s.jsx)(V,{})}),action:()=>{K(a,o,l,t)}},h&&{key:"merge",render:e=>(0,s.jsx)(F().A,{placement:D().W.Left,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,s.jsx)("div",{children:(0,s.jsx)(B,{})}),render:t=>(0,s.jsx)(y().A,{...(0,M().A)(e,t),disabled:!1,title:(0,s.jsx)(L,{})})}),action:()=>{H(a,o,n,t)}}]);return(0,s.jsx)(S().A,{...g,children:(0,s.jsx)(b().Ay,{type:b().Oh.Vertical,sections:[{key:0,render:e=>(0,s.jsx)(j().A,{enableActionSheetTitle:!0,...e}),items:f}],initialFocus:0})})}function z(e){let{context:t,changeCount:o}=e;return t===R.SettingsFilters?(0,s.jsx)(u().sA,{defaultMessage:"{count, plural, one {{count} filter changed from what other people see} other {{count} filters changed from what other people see}}",id:"database.viewSettings.filterAndSortSaveControl.filter.caption",values:{count:o}}):(0,s.jsx)(u().sA,{defaultMessage:"Sort has been changed from what other people see",id:"database.viewSettings.filterAndSortSaveControl.sort.caption"})}},141025:(e,t,o)=>{o.d(t,{Ah:()=>i,Ay:()=>a,yL:()=>r});var n=()=>o(117586);const r={[n().xQ.StartDate]:"starting",[n().xQ.StartTime]:"starting",[n().xQ.EndDate]:"ending",[n().xQ.EndTime]:"ending"},i={starting:n().xQ.StartDate,ending:n().xQ.EndDate};class l extends(()=>o(757695))().default{getInitialState(){return{isOpen:!1,focus:n().xQ.StartDate,temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,showTime:!1}}getFocus(){return this.state.focus}toggleShowTime(){this.setState({...this.state,showTime:!this.state.showTime})}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const a=l},170350:(e,t,o)=>{o.d(t,{S:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M3 4.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zm2.125 5.742h9.75a.625.625 0 1 0 0-1.25h-9.75a.625.625 0 1 0 0 1.25m1.5 3.883c0-.345.28-.625.625-.625h5.5a.625.625 0 1 1 0 1.25h-5.5a.625.625 0 0 1-.625-.625"})},r=(0,o(340498).wt)("filter",n)},187899:(e,t,o)=>{o.d(t,{Hs:()=>D,B$:()=>T,RQ:()=>R,RZ:()=>V,IU:()=>I,Ms:()=>L,Aq:()=>P,LS:()=>B});o(898992),o(354520),o(672577),o(581454),o(296540);var n=()=>o(908006),r=()=>o(289915),i=()=>o(921598),l=()=>o(496603),a=()=>o(534177),s=()=>o(436572),d=()=>o(467676),c=()=>o(914701),u=()=>o(763884),p=()=>o(764670);var g=()=>o(180762),h=()=>o(314660),f=()=>o(484714),m=()=>o(959013),v=()=>o(495262),x=()=>o(104012),y=o(474848);function C(){return(0,y.jsx)(m().sA,{defaultMessage:"Changes saved for everyone.",id:"database.filterBar.saved.title"})}function S(e){const{collectionContextStore:t,temporaryState:o}=e,n=(0,f().v3)();return(0,y.jsx)(x().Ag,{onClick:()=>{v().tN({environment:n,preventSelectText:!0}),s().N2(),I({environment:n,collectionContextStore:t,temporaryState:o})},children:(0,y.jsx)(m().sA,{defaultMessage:"Undo",id:"database.filterBar.undo.title"})})}var b=()=>o(873050),A=()=>o(108944),j=()=>o(351360),F=()=>o(885110),k=()=>o(686526),w=()=>o(317909),M=()=>o(755199);let D=function(e){return e[e.All=0]="All",e[e.Filters=1]="Filters",e[e.Sorts=2]="Sorts",e}({});function T(e){const{environment:t,collectionContextStore:o,targetCollectionViewStore:n,preventSnackbarNotification:r,type:i,transaction:l}=e,a=o.temporaryStateStore.state,d=o.currentPropertyFiltersStore.state,c=n.getPropertyFiltersStore(),u=(0,b().Ml)(o,"persisted");if(i===D.All||i===D.Filters){u.combinatorFilter&&(0,h().f)({collectionViewStore:n,update:{filter:u.combinatorFilter.value||null},transaction:l});for(const e of u.filters.removed)w().applyOperation({store:c,operation:{pointer:c.pointer,command:"keyedObjectListRemove",path:c.path,args:{remove:{id:e}}},transaction:l});for(const{id:e,beforeId:t}of u.filters.moveOps){const o=d.find((t=>t.id===e));o&&(t?w().applyOperation({store:c,operation:{pointer:c.pointer,command:"keyedObjectListBefore",path:c.path,args:{before:{id:t},value:o}},transaction:l}):w().applyOperation({store:c,operation:{pointer:c.pointer,command:"keyedObjectListAfter",path:c.path,args:{value:o}},transaction:l}))}for(const e of u.filters.updated){const t=d.find((t=>t.id===e));t&&w().applyOperation({store:c,operation:{pointer:c.pointer,command:"keyedObjectListUpdate",path:c.path,args:{value:t}},transaction:l})}}i!==D.All&&i!==D.Sorts||!u.sorts||(0,h().f)({collectionViewStore:n,update:{sort:u.sorts.value||null},transaction:l}),B({environment:t,collectionContextStore:o,temporaryState:i===D.All?void 0:i===D.Filters?{...a,combinatorFilter:void 0,propertyFilters:void 0}:{...a,sorts:void 0}}),r||s().D6({label:(0,y.jsx)(C,{}),right:(0,y.jsx)(S,{collectionContextStore:o,temporaryState:a})})}function R(e){const{environment:t,intl:o,collectionContextStore:r,transaction:i}=e,l=r.collectionViewStore(),a=r.isFullScreenStore.state,s=r.isRootChildStore.state,c=r.isInPeekRendererStore.state;if(!l)return;const u=r.collectionViewBlockStore(),p=(0,d().t)({environment:t,collectionViewBlockStore:u,collectionViewStore:l,intl:o,transaction:i});p&&(T({environment:t,type:D.All,collectionContextStore:r,targetCollectionViewStore:p,transaction:i}),p&&("chart"===p.getType()&&F().Z({environment:t,collectionContextStore:r,collectionViewId:p.id,from:"filter_save_as_new_view"}),(0,g().t)({environment:t,collectionContextStore:r,collectionViewId:p.id,isFullScreen:a,isRootChild:s,isInPeekRenderer:c}),n().default.afterNextFlush((()=>{k().Ow({collectionContextStore:r,collectionSettingsStore:r.settingsStore,selectViewNameInitial:!0})}))))}function I(e){B(e),function(e){const{environment:t,collectionContextStore:o}=e,n=o.collectionViewStore(),r=o.collectionViewBlockStore();if(!n||!r)return;(o.isUnlistedViewStore.state&&o.isInlineViewStore.state||(0,A().rD)({environment:t,store:r})&&o.permissionScopesStore.state.canConfigureBlock)&&w().createAndCommit({userAction:"collectionFilterActions.applyTemporaryStateIfPrivate",environment:t,canUndo:!0,perform:e=>{T({environment:t,collectionContextStore:o,type:D.All,targetCollectionViewStore:n,preventSnackbarNotification:!0,transaction:e})}})}(e)}function B(e){var t;const{environment:o,collectionContextStore:n,temporaryState:r}=e,i=n.collectionViewStore();if(!i)return;const l=o.currentUser.id;n.temporaryStateStore.setState(r||{}),function(e){let{currentUserId:t,collectionViewId:o,viewsModuleCurrentPageId:n,temporaryState:r}=e;const i=(0,p().l)({collectionViewId:o,viewsModuleCurrentPageId:n});r?u().A.set({userId:t,key:i,value:JSON.stringify(r)}):u().A.remove({userId:t,key:i})}({currentUserId:l,collectionViewId:i.id,viewsModuleCurrentPageId:n.viewsModuleContextStore.isInLayoutBuilder()||null===(t=n.viewsModuleContextStore.currentPageStore())||void 0===t?void 0:t.id,temporaryState:r}),n.groupsStore.resetAllLimits()}function P(e){const{environment:t,seen:o}=e,{currentUserSettingsStore:n}=j().default.state;n&&w().createAndCommit({userAction:"collectionFilterActions.setSeenFiltersIntroTooltip",environment:t,canUndo:!0,perform:e=>{M().mJ({userSettingsStore:n,transaction:e,data:{seen_filters_tooltip:o}})}})}function V(e){var t;let{transaction:o,newGroups:n,collectionContextStore:s,environment:d}=e;const c=s.collectionViewStore(),u=s.currentCombinatorFilterStore.state,p=(0,l().mg)(u),g=null==p||null===(t=p.filters)||void 0===t?void 0:t.find(r().B9),h=(0,b().I6)(s);if(!(c&&p&&p.filters&&g))return;const f=g.filter.value.filter((e=>"exact"===e.type)).map((e=>e.value)).filter(a().O9),m=n.map((e=>e.value)).filter(i().D1).map((e=>e.value)).filter(i().WO).map((e=>e.id)),v=(0,l().FF)(m,...f);0!==v.length&&(g.filter.value=[...g.filter.value,...v.map((e=>({type:"exact",value:e})))],B({environment:d,collectionContextStore:s,temporaryState:{...s.temporaryStateStore.state,combinatorFilter:{value:p}}}),h||T({environment:d,collectionContextStore:s,type:D.Filters,targetCollectionViewStore:c,preventSnackbarNotification:!0,transaction:o}))}function L(e){var t;const o=null===(t=e.collectionViewStore())||void 0===t?void 0:t.id,n=e.getCurrentUserId();o&&n&&((0,c().E)({userId:n,collectionViewId:o,isOpen:!1}),e.filtersBarOpenStore.setState(!1))}},272630:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(e){let{title:t,disabled:r,innerStyle:i,placeholder:l,onClick:a,disableMargins:s,desktopStyle:d}=e;const c=(0,o(401497).DP)(),u=(0,o(484714).v3)(),{device:p}=u,g=Boolean(t);if(p.isMobile)return(0,n.jsx)(o(760217).A,{showExtensionArrow:!r,focused:!1,title:g?(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",...i},children:t}):(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",color:o(100622).Ay.uiGray,...i},children:l}),onClick:a});{const e="dark"===c.mode?c.lightTextColor:c.mediumTextColor;return(0,n.jsx)(o(44935).H,{action:()=>function(e){e&&e()}(a),disabled:r,render:a=>(0,n.jsxs)(o(864943).A,{...a,hovered:a.focused,size:"lg",backgroundColor:c.buttonBackground,style:{marginRight:8,maxWidth:180,padding:"0 8px",...a.disabled&&{opacity:.5},...s&&{marginRight:0,maxWidth:"100%",justifyContent:"space-between"},...d},children:[(0,n.jsx)("div",{style:{display:"flex",minWidth:0,color:g?c.regularTextColor:e,...i},children:g?t:l}),!r&&(0,o(668725).b)({width:10,marginLeft:6,fill:c.lightIconColor})]})})}}},314660:(e,t,o)=>{o.d(t,{f:()=>r});var n=()=>o(246826);function r(e){const{collectionViewStore:t,update:o,transaction:r}=e;n().zv({store:t.getQueryStore(),data:o,transaction:r})}},320865:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(){return(0,n.jsx)(o(678553).A,{title:(0,n.jsx)(o(331542).A,{})})}},378864:(e,t,o)=>{o.d(t,{A:()=>j,T:()=>F});o(944114),o(898992),o(354520),o(737550);var n=o(296540),r=()=>o(484714),i=()=>o(56366),l=()=>o(401497),a=()=>o(289915),s=()=>o(784892),d=()=>o(164153),c=()=>o(959013),u=()=>o(496603),p=()=>o(436696),g=()=>o(873050),h=()=>o(722872),f=()=>o(831194),m=()=>o(760217),v=()=>o(625830),x=()=>o(928600),y=()=>o(939740),C=()=>o(45552),S=()=>o(89924),b=()=>o(399762),A=o(474848);function j(e){const{propertyFilter:t,schema:o,filter:s,parentStore:f,updateValue:v,onClose:b,desktopTopActions:j,mobileMenuTitle:k,mobileMoreActions:w,collectionContextStore:M}=e,D=(0,r().v3)(),T=(0,r().Y0)(),[R,I]=(0,n.useState)([]),[B,P]=(0,n.useState)(!1),V=(0,i().K8)((()=>(0,g().YF)(o,t,f)),[o,t,f]),L=(0,l().IS)((e=>({checkboxIcon:{fill:e.regularIconColor}})),[]),_=(0,i().K8)((()=>(0,a().gc)(s)?(0,a().V6)(s):[]),[s]),O=(0,i().K8)((()=>{if(!V||"status"!==V.type)return[];const e=V.options??[],t=null==M?void 0:M.collectionStoreResultsInViewOrder();return!B&&t?e.filter((e=>t.some((t=>{var o;return null===(o=e.collectionIds)||void 0===o?void 0:o.includes(t.id)})))):e}),[V,B,M]),E=(0,i().K8)((()=>{if(!V||"status"!==V.type)return[];const e=[],t=V.groups??[],o=V.options??[];for(const n of t){const t=(0,g().Ze)({group:n,options:o,filterValues:_});if("partial"!==t.groupCheckState)continue;const r=o.filter((e=>{var t;return null===(t=n.optionIds)||void 0===t?void 0:t.includes(e.id)})).filter((e=>t.optionCheckedInfo.get(e.id)));e.push(...r)}return e}),[V,_]),W=(0,i().K8)((()=>{if(!V||"status"!==V.type)return[];const e=V.options??[];return R?e.filter((e=>!R.some((t=>t.id===e.id)))):[]}),[V,R]);(0,n.useEffect)((()=>{I((()=>u().hS([...O,...R,...E],"id")))}),[O]);const K=(0,i().K8)((()=>V&&"status"===V.type?F({propertySchema:V,statusFilterValues:_,updateValue:v,isMobile:T.isMobile,styles:{checkboxIcon:L.checkboxIcon},visibleOptions:R,shouldShowHiddenSources:B,setShouldShowHiddenSources:P}):[]),[T.isMobile,V,L.checkboxIcon,v,R,B,P,_]);if(!V||"status"!==V.type)return null;const H=(0,A.jsx)(S().A,{desktopStyle:{paddingBottom:0},children:!T.isMobile&&j});let U;U=T.isMobile?{menuType:h().gu.Modal,title:k,left:w,right:(0,A.jsx)(C().DoneMenuText,{}),onClickRight:b,header:H}:{menuType:h().gu.Popup,maxHeight:a().mi,width:260,header:H,disableHeaderBorder:!0,tokenInputHeader:!0};const N=(0,A.jsx)(y().Ay,{type:y().Oh.Vertical,initialFocus:0,sections:[{key:"groups",items:K,render:e=>(0,A.jsx)(S().A,{...e,title:"",style:{paddingTop:0}})}]}),Y=W&&W.length>0&&!B?(0,A.jsx)(S().A,{topBorder:!0,children:(0,A.jsx)(m().A,{icon:(0,d().T)({width:13,height:13}),title:(0,A.jsx)(c().sA,{id:"collectionFilterValueMenu.statusFilterValueMenu.hiddenStatusOptionsDescription",defaultMessage:"{numHiddenOptions, plural, one {{numHiddenOptions} other status option} other {{numHiddenOptions} other status options}}",values:{numHiddenOptions:W.length}}),focused:!1,onClick:()=>{P(!0),M&&(0,p().X)({environment:D,collectionContextStore:M,action:"expand_property_filter",original_view_type:void 0,property_type:"status"})}})}):null,z=(0,A.jsx)(S().A,{topBorder:!0,children:(0,A.jsx)(m().A,{title:(0,A.jsx)(c().sA,{defaultMessage:"Clear selection",id:"database.filterValue.selectType.clearSelection.message"}),focused:!1,onClick:()=>{v([])}})});return(0,A.jsx)(x().A,{...U,children:(0,a().gc)(s)&&(0,A.jsxs)(A.Fragment,{children:[N,Y,z]})})}function F(e){const{propertySchema:t,statusFilterValues:o,updateValue:n,isMobile:r,styles:i,visibleOptions:l,shouldShowHiddenSources:a}=e,d=t.groups??[],c=t.options??[],u=[];for(const p of d){const e=()=>{const e=(0,g().fe)(d,c,o,{type:"is_group",value:p.name});e&&n(e)},t=(0,g().Ze)({group:p,options:c,filterValues:o}),h=c.filter((e=>{var t;return(null===(t=p.optionIds)||void 0===t?void 0:t.includes(e.id))&&(a||(null==l?void 0:l.some((t=>t.id===e.id))))})),x=[];for(const l of h){const e=()=>{const e=(0,g().fe)(d,c,o,{type:"is_option",value:l.value});e&&n(e)};x.push({key:`option-${l.id}`,action:e,render:o=>(0,A.jsx)(m().A,{...o,icon:(0,A.jsx)(v().A,{checked:t.optionCheckedInfo.get(l.id)??!1,size:14,onClick:e,style:i.checkboxIcon}),title:(0,A.jsx)(b().q,{format:r?s().NY.Large:s().NY.Medium,isSingle:!0,value:l.value,color:l.color,showRemoveButton:!1,groupColor:p.color}),style:{paddingLeft:16}})})}u.push({key:`group-${p.id}`,action:e,render:o=>(0,A.jsx)(m().A,{...o,icon:(0,A.jsx)(v().A,{checked:t.groupCheckState,size:14,onClick:e,style:i.checkboxIcon}),title:(0,A.jsx)(f().RS,{style:{fontWeight:500,marginTop:2},group:p,showIcon:!0,showColor:!0}),textWrapperStyle:{marginLeft:3}})},...x)}return u}},399762:(e,t,o)=>{o.d(t,{O:()=>d,q:()=>c});o(296540);var n=()=>o(401497),r=()=>o(100622),i=()=>o(284371),l=()=>o(288722),a=()=>o(881690),s=o(474848);function d(e){const{value:t,color:o,format:d,showEllipsis:c,onClickRemove:u,showRemoveButton:p,isSingle:g,shouldShrink:h,hideTooltip:f,description:m,tooltipPlacement:v,...x}=e,y=(0,n().DP)(),C=(0,n().IS)((e=>({token:{...c&&i().RC}})),[c]),{textColor:S,backgroundColor:b}=(0,r().LD)(y,o);return t?(0,s.jsx)(a().A,{format:d,value:(0,s.jsx)(l().A,{children:t}),description:m,onClickRemove:u,showRemoveButton:p,isSingle:g,color:S,backgroundColor:b,shouldShrink:h,tooltipPlacement:v,showTooltip:f?"never":"overflow",style:C.token,...x}):null}function c(e){const{value:t,color:o,format:d,showEllipsis:c,onClickRemove:u,showRemoveButton:p,isSingle:g,shouldShrink:h,groupColor:f,tooltipPlacement:m,description:v,hideTooltip:x,...y}=e,C=(0,n().DP)(),S=(0,n().IS)((()=>({token:{...c&&i().RC}})),[c]);if(!t)return null;const{textColor:b,backgroundColor:A}=(0,r().LD)(C,o??f??"gray");let j;return j=o||(f||"gray"),(0,s.jsx)(a().A,{format:d,value:(0,s.jsx)(l().A,{children:t}),description:v,onClickRemove:u,showRemoveButton:p,isSingle:g,color:b,backgroundColor:A,shouldShrink:h,showTooltip:x?"never":"overflow",style:S.token,isRound:!0,showColoredDot:j,tooltipPlacement:m,...y})}},424141:(e,t,o)=>{o.d(t,{y:()=>l});var n=()=>o(56366),r=()=>o(743246),i=()=>o(630116);function l(e){return(0,n().K8)((()=>{var t;if(!e)return;const o=null===(t=e.getFormat())||void 0===t?void 0:t.workflow_id;return o?i().NU.createChildStore(e,{table:r().C0,id:o,spaceId:e.getSpaceId()}):void 0}),[e])}},427711:(e,t,o)=>{o.d(t,{A:()=>D});o(898992),o(354520);var n=o(296540),r=()=>o(484714),i=()=>o(56366),l=()=>o(401497),a=()=>o(289915),s=()=>o(604995),d=()=>o(416504),c=()=>o(959013),u=()=>o(534177),p=()=>o(186445),g=()=>o(972435),h=()=>o(722872),f=()=>o(780865),m=()=>o(513488),v=()=>o(35394),x=()=>o(678553),y=()=>o(45552),C=()=>o(89924),S=()=>o(125565),b=()=>o(712677),A=()=>o(527399),j=()=>o(539320),F=()=>o(903400),k=o(474848);const w={pickerSectionMobile:{paddingTop:16,paddingBottom:8}},M=(0,c().YK)({startingMessage:{defaultMessage:"Starting",id:"search.dateRangeMenu.startingMessage"},endingMessage:{defaultMessage:"Ending",id:"search.dateRangeMenu.endingMessage"}});const D=function(e){let{disableMenuWrap:t,hideDateInputMenuItems:n,value:l,relativeRangePopupStore:a,onUpdateRelativeFilter:s,disabled:d,allowRelativeRangeFilter:u,onUpdate:p,onDismiss:g,title:h,store:f,maxDate:m,minDate:x}=e;const y=(0,r().v3)(),C=(0,c().tz)(),S=(0,i().uB)(f,v().A),{device:b}=y;return t?(0,k.jsxs)(k.Fragment,{children:[!n&&(0,k.jsx)(_,{value:l,relativeRangePopupStore:a,onUpdateRelativeFilter:s,disabled:d,allowRelativeRangeFilter:u,intl:C,onUpdate:p,onDismiss:g,store:S}),(0,k.jsx)(P,{value:l,onUpdate:p,store:S,maxDate:m,minDate:x})]}):(0,k.jsxs)(o(928600).A,{...O(y,h,l,C,p,S,g,a,s,d,u),children:[!b.isMobile&&!n&&(0,k.jsx)(_,{value:l,relativeRangePopupStore:a,onUpdateRelativeFilter:s,disabled:d,allowRelativeRangeFilter:u,intl:C,onUpdate:p,onDismiss:g,store:S}),(0,k.jsx)(P,{value:l,onUpdate:p,store:S,maxDate:m,minDate:x})]})};function T(e){return{type:"date",start_date:s().hp(Date.now(),s().Lm(),e).toFormat(s().tr)}}function R(e){return"custom"===e.value?function(e,t,o){const n=(0,a().k0)(e,t,o,(0,d().P)());switch(e){case"past":return{starting:s().lN(n),ending:s().Ec((0,d().P)())};case"future":return{starting:s().Ec((0,d().P)()),ending:s().lN(n)};default:(0,u().HB)(e)}}(e.direction,e.count,e.unit):"surrounding"===e.value?function(e){const{start:t,end:o}=(0,a().yM)(e,(0,d().P)(),p().XX.state);return{starting:s().lN(t),ending:s().lN(o)}}(e.unit):function(e){switch(e.value){case"this_week":return{starting:(t=(0,d().P)(),{type:"date",start_date:s().iB(Date.now(),s().Lm(),t).toFormat(s().tr)}),ending:T((0,d().P)())};case"the_past_month":return{starting:s().ZG((0,d().P)()),ending:s().Ec((0,d().P)())};case"the_past_week":return{starting:s().t0((0,d().P)()),ending:s().Ec((0,d().P)())};case"the_past_year":return{starting:s().Yz((0,d().P)()),ending:s().Ec((0,d().P)())};case"the_next_month":return{starting:s().Ec((0,d().P)()),ending:s().wc((0,d().P)())};case"the_next_week":return{starting:s().Ec((0,d().P)()),ending:s().En((0,d().P)())};case"the_next_year":return{starting:s().Ec((0,d().P)()),ending:s().le((0,d().P)())};default:(0,u().HB)(e)}var t}(e)}function I(e){let{events:t,onUpdateFilter:o,filter:n}=e;const i=(0,r().v3)();return(0,k.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:i.device.isMobile?"wrap":void 0,padding:"0px 12px"},children:(0,k.jsx)(F().i,{onUpdate:o,filter:n})})}function B(e,t,o){if("type"in o)return{value:{starting:void 0,ending:void 0}};if(t.error)return t;const n=t.value&&"date"!==t.value.type?s().fN(t.value):t.value;return function(e){if(e.starting&&e.ending){const t=s().C6.notionDateToLuxon(e.starting);return s().C6.notionDateToLuxon(e.ending)>=t?{value:e}:{error:m().$.INVALID_RANGE}}return{value:e}}({...o,[e]:n})}function P(e){let{value:t,onUpdate:o,store:n,maxDate:a,minDate:s}=e;const d=(0,l().DP)(),u=(0,r().v3)(),p=(0,i().uB)(n,v().A),{device:g}=u,h=function(e){return{pickerSectionMobile:{background:e.popoverBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}}(d),f={paddingLeft:8,paddingRight:8,paddingBottom:8,paddingTop:4,...g.isMobile&&w.pickerSectionMobile,...g.isMobile&&h.pickerSectionMobile},m=(0,i().K8)((()=>"type"in t?R(t):t),[t]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(C().A,{disableMobilePadding:!0,disableMobileBorders:!0,children:(0,k.jsx)("div",{style:f,children:(0,k.jsx)(j().A,{value:m,store:p,onUpdate:o,validate:(e,o)=>B(e,o,t),readonly:"type"in t,maxDate:a,minDate:s})})}),"type"in t&&(0,k.jsx)(C().A,{disableMobilePadding:!0,disableMobileBorders:!0,topBorder:!0,children:(0,k.jsx)(x().A,{title:(0,k.jsx)(S().A,{isSmall:!0,isSecondaryColor:!0,children:(0,k.jsx)(c().sA,{id:"collectionFilterMenu.dateRangeFilter.relativeDateRangeFilter.description",defaultMessage:"Filter will update with the current date"})})})})]})}function V(e,t){t.setState({...t.state,focus:e})}function L(e){let{events:t,value:o,disabled:l,allowRelativeRangeFilter:a,onUpdate:s,onDismiss:d,store:u}=e;const p=(0,r().v3)(),h=(0,c().tz)(),m=(0,n.useCallback)(((e,t)=>function(e,t,o){t&&t.error||o.setState({...o.state,focus:"ending"})}(0,t,u)),[u]),v=(0,i().K8)((()=>u.getFocus()),[u]),x=function(e,t){if("type"in e)return;return{earliestValidEnding:e.starting&&f().Yq(e.starting,t,"YYYY-MM-DD"),latestValidStarting:e.ending&&f().Yq(e.ending,t,"YYYY-MM-DD")}}(o,h),y="type"in o?{starting:void 0,ending:void 0}:o;return(0,k.jsxs)("div",{...t,style:{display:"flex",flexDirection:a&&!p.device.isMobile?"row":"column",alignItems:"center",gap:8,padding:"1px 12px 8px 12px",width:void p.device.isMobile},children:[(0,k.jsx)(b().A,{disabled:l,placeholder:p.device.isMobile?void 0:g().A.formatMessage(M.startingMessage),focused:"starting"===v,value:y.starting,validate:e=>function(e,t){const o=B("starting",e,t);return o.error?o:{value:o.value.starting}}(e,o),onUpdate:e=>function(e,t){e.error||t({value:{starting:e.value}})}(e,s),onFocus:()=>V("starting",u),onSubmit:m,inputElementAttributes:x?{max:x.latestValidStarting}:void 0,desktopDateFormat:a?"YYYY/MM/DD":void 0,style:{padding:0}}),(0,k.jsx)(b().A,{disabled:l,placeholder:p.device.isMobile?void 0:g().A.formatMessage(M.endingMessage),focused:"ending"===v,value:y.ending,validate:e=>function(e,t){const o=B("ending",e,t);return o.error?o:{value:o.value.ending}}(e,o),onUpdate:e=>function(e,t){e.error||t({value:{ending:e.value}})}(e,s),onFocus:()=>V("ending",u),onSubmit:(e,t)=>function(e,t,o){t&&t.error||o&&o(e)}(e,t,d),inputElementAttributes:x?{min:x.earliestValidEnding}:void 0,textWrapperStyle:a&&!p.device.isMobile?{marginLeft:2}:{},desktopDateFormat:a?"YYYY/MM/DD":void 0,style:{padding:0}})]})}function _(e){let{value:t,relativeRangePopupStore:o,onUpdateRelativeFilter:n,disabled:r,allowRelativeRangeFilter:i,intl:l,onUpdate:a,onDismiss:s,store:d}=e;if(o&&n){const e="type"in t?t:{type:"exact",value:void 0};return(0,k.jsx)(A().A,{type:"daterange",filterValue:e,onUpdate:n,renderOrigin:o=>"exact"===e.type?(0,k.jsx)(L,{value:t,disabled:r,allowRelativeRangeFilter:i,onUpdate:a,onDismiss:s,store:d,events:o}):"relative"!==e.type||"surrounding"!==e.value&&"custom"!==e.value?void 0:(0,k.jsx)(I,{events:o,onUpdateFilter:n,filter:e}),disabled:"exact"===e.type,buttonPopupStore:o})}return(0,k.jsx)(L,{value:t,disabled:r,allowRelativeRangeFilter:i,onUpdate:a,onDismiss:s,store:d})}function O(e,t,o,n,r,i,l,a,s,d,c){const{device:u}=e;if(u.isMobile){return{menuType:h().gu.Modal,title:t,right:(0,k.jsx)(y().DoneMenuText,{}),onClickRight:l,header:(0,k.jsx)(_,{value:o,relativeRangePopupStore:a,onUpdateRelativeFilter:s,disabled:d,allowRelativeRangeFilter:c,intl:n,onUpdate:r,onDismiss:l,store:i})}}return{menuType:h().gu.Popup,onClickOutside:l}}},430102:(e,t,o)=>{o.d(t,{A:()=>u});var n=o(296540),r=o(774963),i=()=>o(668725),l=()=>o(100622),a=()=>o(704152),s=()=>o(859428),d=o(474848);function c(e,t){const{style:r,color:c,title:u,onClick:p,onDropdownClick:g,mainButtonTooltip:h,dropdownTooltip:f,icon:m,iconStyle:v,mainButtonStyle:x,isLoading:y,className:C,disabled:S,disableDropdown:b}=e,{isMobile:A}=(0,o(484714).Y0)(),j=(0,o(401497).IS)((e=>({wrap:{position:"relative",display:"inline-flex",flexShrink:0,borderRadius:6,overflow:"hidden",height:28},mainButton:{display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderTopLeftRadius:6,borderBottomLeftRadius:6,paddingLeft:8,paddingRight:8,fontWeight:o(284371).Wy.medium,..."blue"===c&&{background:l().Ay.blue,color:l().Ay.white},..."orange"===c&&{background:"dark"===e.mode?e.accentColors.orange[100]:e.accentColors.orange[50],color:"dark"===e.mode?e.accentColors.orange[600]:e.accentColors.orange[400]},...x},dropdownButton:{display:"flex",alignItems:"center",justifyContent:"center",width:A?28:24,alignSelf:"stretch",borderTopRightRadius:6,borderBottomRightRadius:6,..."blue"===c&&{background:l().Ay.blue,color:l().Ay.white,boxShadow:`inset 1px 0 0 ${e.darkDividerColor}`},..."orange"===c&&{background:"dark"===e.mode?e.accentColors.orange[100]:e.accentColors.orange[50],color:e.accentColors.orange[400],boxShadow:"dark"===e.mode?`${e.accentColors.orange[200]} 1px 0 0 inset`:`${e.accentColors.orange[100]} 1px 0 0 inset`}},dropdownButtonIcon:{width:10,marginTop:2,..."blue"===c&&{fill:l().Ay.white},..."orange"===c&&{fill:"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]}},buttonHoveredStyle:{..."blue"===c&&{background:e.blueButtonHoveredBackground},..."orange"===c&&{background:"dark"===e.mode?e.accentColors.orange[200]:e.accentColors.orange[100]}},buttonPressedStyle:{..."blue"===c&&{background:e.blueButtonPressedBackground},..."orange"===c&&{background:"dark"===e.mode?e.accentColors.orange[300]:e.accentColors.orange[200]}},icon:{width:12,marginRight:6,..."blue"===c&&{fill:l().Ay.white},..."orange"===c&&{fill:e.accentColors.orange[400]},...v},border:{position:"absolute",pointerEvents:"none",borderRadius:6,top:0,left:0,right:0,bottom:0}})),[c,x,A,v]),F=(0,n.useMemo)((()=>h?(0,d.jsx)(s().A,{renderTooltip:()=>h,render:e=>(0,d.jsxs)(a().A,{ref:t,style:j.mainButton,onClick:p,disabled:S,disabledFeedback:!0,hoveredStyle:j.buttonHoveredStyle,pressedStyle:j.buttonPressedStyle,...e,children:[m&&m(j.icon),u]})}):(0,d.jsxs)(a().A,{ref:t,style:j.mainButton,onClick:p,disabled:S,isLoading:y,disabledFeedback:!0,hoveredStyle:j.buttonHoveredStyle,pressedStyle:j.buttonPressedStyle,children:[m&&m(j.icon),u]})),[h,t,j.mainButton,j.buttonHoveredStyle,j.buttonPressedStyle,j.icon,p,S,y,m,u]),k=(0,n.useMemo)((()=>b||S?null:f?(0,d.jsx)(s().A,{renderTooltip:()=>f,render:e=>(0,d.jsx)(a().A,{ref:t,style:j.dropdownButton,onClick:g,disabledFeedback:!0,hoveredStyle:j.buttonHoveredStyle,pressedStyle:j.buttonPressedStyle,...e,children:(0,i().b)(j.dropdownButtonIcon)})}):(0,d.jsx)(a().A,{ref:t,style:j.dropdownButton,onClick:g,disabledFeedback:!0,hoveredStyle:j.buttonHoveredStyle,pressedStyle:j.buttonPressedStyle,disabled:y,children:(0,i().b)(j.dropdownButtonIcon)})),[b,S,f,y,g,t,j.buttonHoveredStyle,j.buttonPressedStyle,j.dropdownButton,j.dropdownButtonIcon]);return(0,d.jsxs)("div",{style:{...j.wrap,...r},className:C,children:[F,k,(0,d.jsx)("div",{style:j.border})]})}const u=n.memo(n.forwardRef(c),r.bN)},448061:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(e){const{collectionStore:t}=e,r=(0,o(56366).K8)((()=>t.getIcon()),[t]);return(0,n.jsxs)("div",{style:{display:"flex",columnGap:4,alignItems:"center"},children:[(0,n.jsx)(o(614505).A,{disabled:!0,icon:r,isEmptyPage:!1,size:20}),(0,n.jsx)(o(16006).A,{store:t,style:{maxWidth:180}})]})}},497222:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(e){const{icon:t,iconStyle:r,title:i,caption:l,right:a,rightStyle:s,isRed:d,isGray:c,isOrange:u,onClick:p,onMouseDown:g,onMouseEnter:h,onMouseLeave:f,disabled:m,showChevron:v,chevronStyle:x,rotateChevron:y,showDragHandle:C,focused:S,textWrapperStyle:b,shouldWrapCaption:A,desktopIconStyle:j,buttonStyle:F}=e,k=(0,o(700251).y$)(),w=(0,o(401497).IS)((e=>({style:{color:c?e.mediumTextColor:u?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularTextColor,fill:c?e.mediumIconColor:u?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:m?.4:void 0,...F},leftIconStyle:{width:k,height:k,...t===o(30626)._&&{height:3},...r},rightStyle:{display:"flex",alignItems:"center",color:m?e.regularTextColor:e.lightTextColor,fill:m?e.regularIconColor:e.lightIconColor,flexShrink:0,...s},rightIconStyle:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out",...x},rightIconRotatedStyle:{transform:"rotate(90deg)"}})),[c,u,m,r,t,x,s,F,k]),{itemRef:M,isTabbable:D,onKeyDown:T,onFocus:R}=(0,o(804773).e)();return(0,n.jsx)(o(760217).A,{ref:M,icon:null==t?void 0:t(w.leftIconStyle),focused:S||!1,disabled:m,title:i,caption:l,shouldWrapCaption:A,desktopTitleStyle:{flexGrow:1,flexShrink:1},onKeyDown:T,onFocus:R,disallowTabbing:!D,showDragHandle:C,buttonStyle:w.style,rightStyle:w.rightStyle,isRedOnHover:d,ignoreLocalHoverState:!!m||void 0,right:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{...o(284371).RC,display:"flex"},children:a}),!m&&v&&(0,o(742117).V)({...w.rightIconStyle,...y&&w.rightIconRotatedStyle})]}),onClick:p,onMouseDown:g,onMouseEnter:h,onMouseLeave:f,textWrapperStyle:b,desktopIconStyle:j})}},513488:(e,t,o)=>{o.d(t,{$:()=>n,A:()=>i});const n={INVALID_DATE:"Invalid date",INVALID_RANGE:"Invalid range",NOT_SUPPORTED:"Not supported"};class r extends(()=>o(757695))().default{getInitialState(){return{edited:!1,temporary:"",error:void 0}}}const i=r},527399:(e,t,o)=>{o.d(t,{A:()=>f});o(898992),o(354520),o(581454),o(296540);var n=()=>o(484714),r=()=>o(289915),i=()=>o(205098),l=()=>o(972435),a=()=>o(722872),s=()=>o(760217),d=()=>o(406699),c=()=>o(928600),u=()=>o(939740),p=()=>o(14235),g=()=>o(89924),h=o(474848);function f(e){const{filterValue:t,renderOrigin:o,buttonPopupStore:f}=e,m=(0,n().v3)(),v=e=>"relative"===e.filter.type&&"custom"===e.filter.value?l().A.formatMessage(i().IZ[e.filter.value]):"date"===e.type?(0,i().RR)(e.filter):(0,i().kz)(e.filter);return(0,h.jsx)(d().Ay,{popupType:m.device.isMobile?p().nl.SlideUp:p().nl.Popup,buttonPopupStore:f,render:()=>{let o;o=m.device.isMobile?{menuType:a().gu.ActionSheet}:{menuType:a().gu.Popup};const n="date"===e.type?(()=>{const e=r().ty;return[...e.filter((e=>"relative"===e.type)),...e.filter((e=>"exact"===e.type))]})().map((o=>({key:"relative"===o.type?o.value:o.type,render:e=>(0,h.jsx)(s().A,{...e,title:v({type:"date",filter:o}),checkState:o.type===t.type&&(void 0===o.value||o.value===t.value)}),action:()=>{e.onUpdate(o),f.setState({open:!1})}}))):(()=>{const e=(0,r().mM)();return[...e.filter((e=>"relative"===e.type)),...e.filter((e=>"exact"===e.type))]})().map((o=>({key:(0,r().q5)(o),render:e=>(0,h.jsx)(s().A,{...e,title:v({type:"daterange",filter:o}),checkState:o.type===t.type&&(void 0===o.value||o.value===t.value)}),action:()=>{e.onUpdate(o),f.setState({open:!1})}})));return(0,h.jsx)(c().A,{...o,children:(0,h.jsx)(u().Ay,{type:u().Oh.Vertical,sections:[{key:"filterOperators",render:e=>(0,h.jsx)(g().A,{disableMobilePadding:!0,...e}),items:n}],initialFocus:void 0})})},renderOrigin:o,style:{width:240},originGap:2,placementToOrigin:d().sx.Bottom,alignmentToOrigin:d().yP.Center,disabled:e.disabled})}},536583:(e,t,o)=>{o.d(t,{d:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M9.294 2.325h3.103c.484 0 .948.192 1.29.534l2.897 2.898c.343.342.535.806.535 1.29v5.903a1.825 1.825 0 0 1-1.825 1.825H12.53v1.075a1.825 1.825 0 0 1-1.825 1.825h-6A1.825 1.825 0 0 1 2.88 15.85v-8.8c0-1.008.817-1.825 1.825-1.825H7.47V4.15c0-1.008.817-1.825 1.825-1.825M9.1 5.76l2.897 2.897c.342.342.534.806.534 1.29v3.578h2.763a.575.575 0 0 0 .575-.575V7.3h-1.975a1.75 1.75 0 0 1-1.75-1.75V3.575h-2.85a.575.575 0 0 0-.575.575v1.318q.208.12.38.292m6.16.44-2.016-2.016V5.55c0 .359.29.65.65.65zm-10.554.275a.575.575 0 0 0-.575.575v8.8c0 .318.258.575.575.575h6a.575.575 0 0 0 .575-.575V10.2H9.306a1.75 1.75 0 0 1-1.75-1.75V6.475zm3.95.609V8.45c0 .359.291.65.65.65h1.366z"})},r=(0,o(340498).wt)("docOnDoc",n)},539320:(e,t,o)=>{o.d(t,{A:()=>u});o(944114);var n=o(296540),r=()=>o(56366),i=()=>o(604995),l=()=>o(100622),a=()=>o(186445),s=()=>o(141025),d=o(474848);const c={monthControl:{position:"absolute",top:0,right:0,display:"flex"},selectedRange:{backgroundColor:l().Ay.blueWithAlpha(.15)},active:{backgroundColor:l().Ay.blue,color:l().Ay.white},inactive:{backgroundColor:l().Ay.blueWithAlpha(.43)},disabled:{pointerEvents:"none"},today:{fontWeight:o(284371).Wy.regular}};const u=function(e){let{readonly:t,store:u,value:p,validate:g,onUpdate:h,disabled:f,dateTimeStore:m,minDate:v,maxDate:x}=e;const y=(0,o(401497).DP)(),C=(0,n.useRef)(),S=(0,r().K8)((()=>{if(u.state.displayMonth)return u.state.displayMonth.toJSDate();if("starting"===u.getFocus()){if(p.starting)return i().C6.notionDateToJsDate(p.starting);if(p.ending)return i().C6.notionDateToJsDate(p.ending)}if("ending"===u.getFocus()){if(p.ending)return i().C6.notionDateToJsDate(p.ending);if(p.starting)return i().C6.notionDateToJsDate(p.starting)}if(!C.current){const e=i().Ec((0,o(416504).P)());C.current=i().C6.notionDateToJsDate(e)}return C.current}),[C,u,p]),b=(0,r().K8)((()=>a().XX.state),[]),A=(0,r().K8)((()=>function(e){const{store:t,value:o,componentIsDisabled:n,minDate:r,maxDate:l}=e,a=function(e){const{store:t,value:o,componentIsDisabled:n,minDate:r,maxDate:l}=e;if(n)return[!0];const a=[];r&&a.push({before:r.toJSDate()});l&&a.push({after:l.toJSDate()});const s=e=>"ending"===t.getFocus()&&{before:e},d=e=>"starting"===t.getFocus()&&{after:e};if(o.starting){const e=i().C6.notionDateToJsDate(o.starting);a.push(s(e))}if(o.ending){const e=i().C6.notionDateToJsDate(o.ending);a.push(d(e))}return a}({value:o,store:t,componentIsDisabled:n,minDate:r,maxDate:l}),{hovered:s}=t.state;if(n)return{disabled:a};if(o.starting&&o.ending){const e=i().C6.notionDateToJsDate(o.starting),t=i().C6.notionDateToJsDate(o.ending);return{range:{from:e,to:t},start:e,end:t,disabled:a}}if(o.starting){const e=i().C6.notionDateToJsDate(o.starting);return{range:s&&{from:e,to:s},start:e,end:s,disabled:a,selected:[e,s]}}if(o.ending){const e=i().C6.notionDateToJsDate(o.ending);return{range:s&&{from:s,to:e},start:s,end:e,disabled:a,selected:[e,s]}}return{disabled:a}}({store:u,value:p,componentIsDisabled:f,minDate:v,maxDate:x})),[u,p,f,v,x]),j=(0,r().K8)((()=>function(e,t){const o=c,n=function(e){return{disabled:{color:e.lightTextColor},today:{color:l().Ay.white}}}(t),r=e.getFocus(),i=o.selectedRange,a={...o.disabled,...n.disabled},s={...o.today,...n.today};return{range:i,start:"starting"===r?o.active:o.inactive,end:"ending"===r?o.active:o.inactive,disabled:a,today:s}}(u,y)),[u,y]);return(0,d.jsx)(o(541181).n,{className:"notion-calendar-picker",defaultMonth:S,month:S,numberOfMonths:1,weekStartsOn:b,locale:o(662303).locale,showOutsideDays:!0,fixedWeeks:!0,onDayClick:e=>function(e,t,o,n,r,l,a,d){if(l||d)return;const c=t.getFocus(),u=i().C6.toPersistedDate(e.valueOf()),p=n(c,{value:u}),g=p.error?p:{value:{[c]:p.value[c]}};r(g),t.setState({...t.state,hovered:void 0}),a&&a.setState({...a.state,hovered:void 0});if(p.error)return;"starting"!==c||o.ending||(t.setState({...t.state,focus:"ending"}),a&&a.setState({...a.state,focus:s().Ah.ending}));const h="starting"===c?"ending":"starting";t.setState({...t.state,focus:h}),a&&a.setState({...a.state,focus:s().Ah[h]})}(e,u,p,g,h,f,m,t),onDayMouseEnter:e=>function(e,t,o,n,r,l){const a=t.getFocus(),s=i().C6.jsDateToLuxon(e);if(n||l)return;if("starting"===a&&o.ending&&!o.starting){i().C6.notionDateToLuxon(o.ending)>=s&&(t.setState({...t.state,hovered:e}),r&&r.setState({...r.state,hovered:e}))}else if("ending"===a&&o.starting&&!o.ending){i().C6.notionDateToLuxon(o.starting)<=s&&(t.setState({...t.state,hovered:e}),r&&r.setState({...r.state,hovered:e}))}}(e,u,p,f,m,t),onMonthSelected:e=>function(e,t,o){t.setState({...t.state,displayMonth:i().C6.jsDateToLuxon(e)}),o&&o.setState({...o.state,displayMonth:i().C6.jsDateToLuxon(e)})}(e,u,m),modifiers:A,modifiersStyles:j,disabled:!!t||void 0})}},541181:(e,t,o)=>{o.d(t,{n:()=>i});var n=()=>o(645873);const r=new(n().O2)("react-day-picker",(async()=>await Promise.all([o.e(95555),o.e(75831),o.e(68548)]).then(o.bind(o,762290)))),i=(0,n()._h)(r,(e=>e.default))},573351:(e,t,o)=>{o.d(t,{A:()=>i});var n=o(296540),r=o(474848);const i=function(e){let{firstDayOfWeek:t,value:i,selectValue:l=!0,onChange:a,onFocus:s,onBlur:d,disabledDays:c,className:u}=e;const p=(0,n.useMemo)((()=>new Date(i)),[i]),[g,h]=(0,n.useState)(p),f=(0,n.useRef)(i);(0,n.useLayoutEffect)((()=>{f.current!==i&&(h(new Date(i)),f.current=i)}),[i]);const m=(0,n.useCallback)(((e,t,o)=>{a(e.getTime())}),[a]);return(0,r.jsx)("div",{style:{paddingRight:8,paddingBottom:8,paddingLeft:8,paddingTop:4},children:(0,r.jsx)(o(541181).n,{locale:o(662303).locale,className:u??"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:l?{value:p}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:m,onMonthSelected:h,disabled:c,month:g,onDayBlur:d,onDayFocus:s})})}},668766:(e,t,o)=>{o.d(t,{q:()=>i});var n=()=>o(72135),r=()=>o(508496);function i(e,t){return(0,n().$J)(e,r().default.checkGate({gateName:"localized_parse_number"})?t:void 0)}},712677:(e,t,o)=>{o.d(t,{A:()=>y});var n=o(296540),r=()=>o(484714),i=()=>o(56366),l=()=>o(401497),a=()=>o(597777),s=()=>o(604995),d=()=>o(498140),c=()=>o(959013),u=()=>o(534177),p=()=>o(205098),g=()=>o(780865),h=()=>o(513488),f=()=>o(623580),m=()=>o(419357),v=o(474848);const x=(0,c().YK)({invalidDateError:{id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"},invalidDateRangeError:{id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"},notSupportedDateRangeError:{id:"dateInputError.notSupportedDateRangeError.tooltip",defaultMessage:"The date is not supported"}});const y=function(e){const t=(0,c().tz)(),r=(0,i().uB)(void 0,h().A),{value:l}=e;(0,n.useEffect)((()=>{r.reset()}),[l,r]);const a=(0,n.useCallback)((()=>(0,v.jsx)(D,{dateInputMenuItemProps:e,store:r})),[e,r]),s=(0,i().K8)((()=>F(t,r)),[t,r]);return s?(0,v.jsx)(o(859428).A,{renderTooltip:()=>s,forceVisibleState:!0,placement:o(962730).W.Left,render:a,originGap:-8}):(0,v.jsx)(D,{dateInputMenuItemProps:e,store:r})};function C(e,t){const{device:o}=e;return o.isMobile?"YYYY-MM-DD":t??a().vz}function S(e,t){const{device:o}=e;return!!o.isMobile||!t}function b(e){return{inputDefault:{background:e.inputBackground,boxShadow:e.inputBoxShadow},inputFocused:{background:e.inputBackground,boxShadow:e.outlineBlueInputBoxShadow},inputError:{background:e.inputBackground,boxShadow:e.outlineRedInputBoxShadow},placeholder:{color:e.lightTextColor}}}function A(e,t){return{menuItem:{marginBottom:e.device.isMobile?1:0},inputWrapper:{borderRadius:6,height:28,paddingRight:S(e,t)?8:0,position:"relative"},inputEditRegion:{width:S(e,t)?"calc(100% - 14px)":"87%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"},placeholder:{position:"absolute",left:e.device.isIpad?26:12,top:e.device.isIpad?void 0:"50%",transform:"translateY(-50%)"}}}function j(e){let{inputType:t,placeholder:o,value:n,hideClearButton:i}=e;const a=(0,l().DP)(),s=A((0,r().v3)(),i),d=b(a);return"date"!==t||n?null:(0,v.jsx)("div",{style:{...s.placeholder,...d.placeholder},children:o})}function F(e,t){if(t.state.error)switch(t.state.error){case h().$.INVALID_DATE:return e.formatMessage(x.invalidDateError);case h().$.INVALID_RANGE:return e.formatMessage(x.invalidDateRangeError);case h().$.NOT_SUPPORTED:return e.formatMessage(x.notSupportedDateRangeError);default:(0,u().HB)(t.state.error)}}function k(e,t,o,n,r){const i=function(e,t,o,n){if(!o.state.edited)return;if(!o.state.temporary)return{value:void 0};const r=(0,d().yc)(o.state.temporary,e.device.isMobile?s().tr:C(e,n),t);return r?{value:{type:"date",start_date:r}}:{error:h().$.INVALID_DATE}}(e,t,o,r);if(i)return n?n(i):i}function w(e,t,o,n,r){const i=b(e),l=F(n,r);if(!t)return l?i.inputError:o?i.inputFocused:i.inputDefault}function M(e,t,o,n,r,i,l,a){const s=k(e,o,n,i,l);s?(t(s),s.error?n.setState({...n.state,edited:!1,error:s.error}):n.reset()):n.setState({...n.state,edited:!1}),a&&r&&r(a)}function D(e){let{dateInputMenuItemProps:t,store:o}=e;const{store:a,hideClearButton:d,focused:u,value:h,...x}=t,{onBlur:y,onClearButtonClick:b,onFocus:F,onSubmit:D,onUpdate:T,placeholder:R,validate:I,desktopDateFormat:B,inputStyle:P,inputOuterStyle:V,style:L,disabled:_}=t,O=(0,c().tz)(),E=(0,l().DP)(),W=(0,r().v3)(),K=(0,n.useCallback)((e=>M(W,T,O,o,y,I,B)),[W,T,O,o,y,I,B]),H=(0,n.useCallback)((e=>function(e,t,o,n,r,i,l,a){const s=k(t,n,r,l,a);s&&(o(s),s.error?r.setState({...r.state,edited:!1,error:s.error}):r.reset()),i&&i(e,s)}(e,W,T,O,o,D,I,B)),[W,T,O,o,D,I,B]),U=(0,n.useCallback)((e=>function(e,t,o,n,r,i,l,a){const{device:s}=t;r.setState({...r.state,edited:!0,temporary:e.target.value||""}),s.isAndroid&&M(t,o,n,r,i,l,a)}(e,W,T,O,o,y,I,B)),[W,T,O,o,y,I,B]),N=(0,n.useCallback)((()=>function(e,t,o,n,r,i,l){r.setState({...r.state,edited:!0,temporary:"",error:void 0});const a=k(e,n,r,i,l);a&&o(a),r.setState({...r.state,edited:!1}),t&&t()}(W,b,T,O,o,I,B)),[W,b,T,O,o,I,B]),Y=(0,n.useCallback)((e=>function(e,t,o){o.setState({...o.state,edited:!1}),t&&t(e)}(e,F,o)),[F,o]),{device:z}=W,G=z.isMobile&&"relative"!==(null==h?void 0:h.type)?"date":"text",q="date"===G?f().C.Transparent:f().C.Default,Z=z.isMobile?void 0:u,$=(0,i().K8)((()=>function(e,t,o,n,r){const{device:i}=e;if(t&&"relative"===t.type)return(0,p().RR)(t);const l=t&&"date"!==t.type?s().fN(t):t;return i.isMobile?l?g().Yq(l,o,C(e,r)):"":n.state.temporary||n.state.edited?n.state.temporary:l?g().Yq(l,o,C(e,r)):""}(W,h,O,o,B)),[W,h,O,o,B]),J=(0,i().K8)((()=>function(e,t,o,n,r,i,l,a,s,d){const{device:c}=e,u=A(e,d);return{style:{...u.menuItem,...r,marginRight:0},inputOuterStyle:{...w(t,i,l,a,s),...u.inputWrapper,...n},inputStyle:{...u.inputEditRegion,...c.isMobile&&u.inputEditRegionMobile,...o}}}(W,E,P,V,L,_,u,O,o,d)),[W,E,P,V,L,_,u,O,o,d]);return(0,v.jsx)(m().Ay,{...x,type:G,format:q,left:z.isMobile&&(0,v.jsx)(j,{placeholder:R,value:h,hideClearButton:d,inputType:G}),showClearButton:S(W,d),focus:Z,onFocus:Y,onClearButtonClick:N,onChange:U,onSubmit:H,onBlur:K,value:$,disableInput:"relative"===(null==h?void 0:h.type),...J})}},831194:(e,t,o)=>{o.d(t,{RS:()=>x,OR:()=>m});o(296540);var n=()=>o(401497),r=()=>o(254947),i=()=>o(449552),l=()=>o(340498),a=o(474848);const s=(0,l().wt)("statusCompleteGroup",{viewBox:"0 0 17 17",svg:(0,a.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.71094 12.0781C8.00781 12.0781 8.27344 11.9219 8.44531 11.6562L11.8828 6.32031C11.9922 6.14844 12.0781 5.95312 12.0781 5.77344C12.0781 5.35156 11.7109 5.07031 11.3125 5.07031C11.0547 5.07031 10.8281 5.21094 10.6562 5.49219L7.6875 10.2578L6.29688 8.51562C6.10938 8.27344 5.91406 8.17969 5.67188 8.17969C5.25781 8.17969 4.92188 8.50781 4.92188 8.92969C4.92188 9.125 5 9.30469 5.14062 9.48438L6.94531 11.6641C7.16406 11.9375 7.40625 12.0781 7.71094 12.0781Z"})}),d=(0,l().wt)("statusInProgressGroup",{viewBox:"0 0 17 17",svg:(0,a.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.07031 11.4531L11.5938 8.80469C11.9297 8.60938 11.9219 8.125 11.5938 7.92969L7.07031 5.27344C6.71875 5.07031 6.26562 5.24219 6.26562 5.63281V11.0938C6.26562 11.4766 6.69531 11.6719 7.07031 11.4531Z"})}),c=(0,l().wt)("statusTodoGroup",{viewBox:"0 0 17 17",svg:(0,a.jsx)("path",{d:"M8.52344 1.85156C8.97656 1.85156 9.34375 1.49219 9.34375 1.05469C9.34375 0.609375 8.97656 0.234375 8.52344 0.234375C8.08594 0.234375 7.72656 0.609375 7.72656 1.05469C7.72656 1.48438 8.09375 1.85156 8.52344 1.85156ZM10.7969 2.21875C11.2422 2.21875 11.6094 1.85156 11.6094 1.41406C11.6094 0.960938 11.2422 0.601562 10.7969 0.601562C10.3516 0.601562 9.99219 0.960938 9.99219 1.41406C9.99219 1.85156 10.3516 2.21875 10.7969 2.21875ZM6.27344 2.21875C6.71094 2.21875 7.07812 1.85156 7.07812 1.41406C7.07812 0.960938 6.71094 0.601562 6.27344 0.601562C5.82812 0.601562 5.46094 0.960938 5.46094 1.41406C5.46094 1.85156 5.82812 2.21875 6.27344 2.21875ZM12.8359 3.25781C13.2812 3.25781 13.6484 2.89844 13.6484 2.45312C13.6484 2.00781 13.2812 1.64062 12.8359 1.64062C12.3984 1.64062 12.0312 2.00781 12.0312 2.45312C12.0312 2.89062 12.3984 3.25781 12.8359 3.25781ZM4.23438 3.25781C4.67188 3.25781 5.03906 2.89062 5.03906 2.45312C5.03906 2.00781 4.67969 1.64062 4.23438 1.64062C3.78906 1.64062 3.42188 2.00781 3.42188 2.45312C3.42188 2.89844 3.78906 3.25781 4.23438 3.25781ZM14.4609 4.88281C14.9062 4.88281 15.2734 4.51562 15.2734 4.07812C15.2734 3.63281 14.9062 3.26562 14.4609 3.26562C14.0234 3.26562 13.6562 3.63281 13.6562 4.07812C13.6562 4.51562 14.0234 4.88281 14.4609 4.88281ZM2.625 4.88281C3.0625 4.88281 3.42969 4.51562 3.42969 4.07812C3.42969 3.63281 3.0625 3.26562 2.625 3.26562C2.17969 3.26562 1.8125 3.63281 1.8125 4.07812C1.8125 4.51562 2.17969 4.88281 2.625 4.88281ZM15.4922 6.90625C15.9375 6.90625 16.3047 6.54688 16.3047 6.10156C16.3047 5.65625 15.9375 5.28906 15.4922 5.28906C15.0547 5.28906 14.6875 5.65625 14.6875 6.10156C14.6875 6.53906 15.0547 6.90625 15.4922 6.90625ZM1.59375 6.90625C2.02344 6.90625 2.39062 6.53906 2.39062 6.10156C2.39062 5.65625 2.03125 5.28906 1.59375 5.28906C1.14062 5.28906 0.78125 5.65625 0.78125 6.10156C0.78125 6.54688 1.14062 6.90625 1.59375 6.90625ZM15.8828 9.17188C16.3281 9.17188 16.6953 8.80469 16.6953 8.35938C16.6953 7.92188 16.3281 7.55469 15.8828 7.55469C15.4453 7.55469 15.0781 7.92188 15.0781 8.35938C15.0781 8.80469 15.4453 9.17188 15.8828 9.17188ZM1.21094 9.17188C1.64844 9.17188 2.01562 8.80469 2.01562 8.35938C2.01562 7.92188 1.64844 7.55469 1.21094 7.55469C0.765625 7.55469 0.398438 7.92188 0.398438 8.35938C0.398438 8.80469 0.765625 9.17188 1.21094 9.17188ZM15.4922 11.4375C15.9375 11.4375 16.3047 11.0703 16.3047 10.625C16.3047 10.1797 15.9375 9.82031 15.4922 9.82031C15.0547 9.82031 14.6875 10.1875 14.6875 10.625C14.6875 11.0703 15.0547 11.4375 15.4922 11.4375ZM1.59375 11.4375C2.03125 11.4375 2.39062 11.0703 2.39062 10.625C2.39062 10.1875 2.02344 9.82031 1.59375 9.82031C1.14062 9.82031 0.78125 10.1797 0.78125 10.625C0.78125 11.0703 1.14062 11.4375 1.59375 11.4375ZM14.4609 13.4609C14.9062 13.4609 15.2734 13.0938 15.2734 12.6484C15.2734 12.2109 14.9062 11.8438 14.4609 11.8438C14.0234 11.8438 13.6562 12.2109 13.6562 12.6484C13.6562 13.0938 14.0234 13.4609 14.4609 13.4609ZM2.625 13.4609C3.0625 13.4609 3.42969 13.0938 3.42969 12.6484C3.42969 12.2109 3.0625 11.8438 2.625 11.8438C2.17969 11.8438 1.8125 12.2109 1.8125 12.6484C1.8125 13.0938 2.17969 13.4609 2.625 13.4609ZM12.8359 15.0859C13.2812 15.0859 13.6484 14.7188 13.6484 14.2734C13.6484 13.8281 13.2812 13.4688 12.8359 13.4688C12.3984 13.4688 12.0312 13.8359 12.0312 14.2734C12.0312 14.7188 12.3984 15.0859 12.8359 15.0859ZM4.23438 15.0859C4.67969 15.0859 5.03906 14.7188 5.03906 14.2734C5.03906 13.8359 4.67188 13.4688 4.23438 13.4688C3.78906 13.4688 3.42188 13.8281 3.42188 14.2734C3.42188 14.7188 3.78906 15.0859 4.23438 15.0859ZM10.7969 16.125C11.2422 16.125 11.6094 15.7656 11.6094 15.3125C11.6094 14.875 11.2422 14.5078 10.7969 14.5078C10.3516 14.5078 9.99219 14.875 9.99219 15.3125C9.99219 15.7656 10.3516 16.125 10.7969 16.125ZM6.27344 16.125C6.71094 16.125 7.07812 15.7656 7.07812 15.3125C7.07812 14.875 6.71094 14.5078 6.27344 14.5078C5.82812 14.5078 5.46094 14.875 5.46094 15.3125C5.46094 15.7656 5.82812 16.125 6.27344 16.125ZM8.52344 16.4922C8.97656 16.4922 9.34375 16.1172 9.34375 15.6719C9.34375 15.2344 8.97656 14.875 8.52344 14.875C8.09375 14.875 7.72656 15.2422 7.72656 15.6719C7.72656 16.1172 8.08594 16.4922 8.52344 16.4922Z"})});var u=()=>o(959013),p=()=>o(117293),g=()=>o(962730),h=()=>o(132389),f=()=>o(859428);const m={[r().QV]:(0,a.jsx)(u().sA,{...r().oz.statusGroupNameTodo}),[r().jc]:(0,a.jsx)(u().sA,{...r().oz.statusGroupNameInProgress}),[r().P0]:(0,a.jsx)(u().sA,{...r().oz.statusGroupNameComplete}),[r().nX]:(0,a.jsx)(u().sA,{...p().DZ.current}),[r().p7]:(0,a.jsx)(u().sA,{...p().DZ.future})},v={[r().QV]:c,[r().jc]:d,[r().P0]:s};function x(e){const{group:t,disableGroup:o,style:r,showIcon:l,showColor:s}=e,d=(0,n().DP)(),u=v[t.name]??c,p=t.color??"gray";return(0,a.jsxs)("div",{style:{...r,display:"inline-flex",alignItems:"center"},children:[l&&u({display:"inline-block",width:16,height:16,fill:s?d.accentColors[p][400]:d.mediumIconColor}),(0,a.jsx)("span",{style:{paddingLeft:l?6:void 0,color:s?d.accentColors[p][500]:void 0},children:m[t.name]??t.name}),o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h().A,{size:4}),(0,a.jsx)(f().A,{placement:g().W.Bottom,render:e=>(0,a.jsx)("div",{...e,children:(0,i().g)({width:12})}),renderTooltip:e=>(0,a.jsx)("div",{...e,children:o.tooltipCaption}),disableTooltip:void 0===o.tooltipCaption})]}):null]})}},856952:(e,t,o)=>{o.d(t,{Ay:()=>h,le:()=>g,sA:()=>p});var n=o(296540),r=()=>o(484714),i=()=>o(56366),l=()=>o(401497),a=()=>o(496603),s=()=>o(722872),d=()=>o(623580),c=()=>o(545805),u=o(474848);const p="20px";let g=function(e){return e[e.Select=0]="Select",e[e.Person=1]="Person",e[e.Relation=2]="Relation",e[e.FilterValue=3]="FilterValue",e[e.Share=4]="Share",e[e.Group=5]="Group",e}({});const h=n.forwardRef((function(e,t){const{disabled:n,value:r,message:i,right:l,showClearButton:s,format:d,focus:p,dontShowBorderBottom:g,showBorder:h,style:f,onClick:m,inputAndTokenWrapRightStyle:v,tokens:x,hideInput:y,onRemoveLastToken:C,onKeyDown:b,onChange:A,focusInitial:j,focusAfterAnimation:F,preventScrollOnFocus:k,inputFullWidth:w,inputDivStyle:M,inputStyle:D,rightWrapStyle:T,tokenWrapStyle:R,type:I,placeholder:B,onEmptySubmit:P,onSubmit:V,textarea:L,autoComplete:_,onClearButtonClick:O,inputElementAttributes:E,suppressFocusRing:W,onFocus:K,onBlur:H}=e;return(0,u.jsx)(c().A,{debugName:"TokenInputMenuItem",capture:!n,onLeft:a().D_,onRight:a().D_,onSelectAll:a().D_,onRedo:a().D_,onUndo:a().D_,onToggleBold:a().D_,onToggleItalics:a().D_,onToggleCode:a().D_,onCut:a().D_,onCopy:a().D_,onPaste:a().D_,onKeypress:a().D_,children:(0,u.jsx)(c().A,{debugName:"TokenInputMenuItem",capture:!n&&r.length>0,onDelete:a().D_,onBackspace:a().D_,children:(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",flex:1,minWidth:0,gap:i?4:void 0},children:[(0,u.jsx)(S,{ref:t,right:l,showClearButton:s,format:d,focus:p,dontShowBorderBottom:g,disabled:n,showBorder:h,style:f,rightWrapStyle:T,onClick:m,inputAndTokenWrapRightStyle:v,tokens:x,hideInput:y,value:r,onRemoveLastToken:C,onKeyDown:b,onChange:A,focusInitial:j,focusAfterAnimation:F,preventScrollOnFocus:k,inputFullWidth:w,inputDivStyle:M,inputStyle:D,type:I,placeholder:B,onEmptySubmit:P,onSubmit:V,textarea:L,autoComplete:_,onClearButtonClick:O,inputElementAttributes:E,suppressFocusRing:W,onFocus:K,onBlur:H,tokenWrapStyle:R}),i&&(0,u.jsx)(o(125565).A,{isSmall:!0,children:i})]})})})}));function f(e){return e===g.Group}function m(e,t){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",background:t?"none":e.tokenInputMenuItemBackground,cursor:"text",overflow:"hidden",fontSize:14,minHeight:28,padding:4,borderRadius:6}}function v(e){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexShrink:0,minHeight:44,borderBottom:`1px solid ${e.regularDividerColor}`,fontSize:16,background:e.popoverBackground}}const x={borderRadius:4};function y(e){return{[g.Select]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:x,inputDivDesktopFocusStyle:{}},[g.Person]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:x,inputDivDesktopFocusStyle:{}},[g.Relation]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:x,inputDivDesktopFocusStyle:{}},[g.Group]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:x,inputDivDesktopFocusStyle:{}},[g.FilterValue]:{desktopWrapStyleOverride:{padding:"4px 6px",boxShadow:e.inputBoxShadow,background:e.inputBackground},inputDivDesktopStyle:x,inputDivDesktopFocusStyle:{}},[g.Share]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:{margin:"0 0 0 2px",borderTopLeftRadius:4,borderTopRightRadius:4},inputDivDesktopFocusStyle:{}}}}const C=n.forwardRef((function(e,t){let{tokens:o,disabled:i,value:a,onRemoveLastToken:s,onKeyDown:c,onChange:p,focus:g,focusInitial:h,focusAfterAnimation:f,preventScrollOnFocus:m,format:v,inputFullWidth:x,inputDivStyle:y,inputStyle:C,type:S,placeholder:b,onEmptySubmit:j,onSubmit:F,textarea:k,autoComplete:w,inputMenuItemStore:M,onFocus:D,onBlur:T,inputElementAttributes:R,suppressFocusRing:I}=e;const B=(0,l().DP)(),P=(0,r().v3)(),V=(0,n.useCallback)((e=>{"Backspace"===e.key&&0===a.length&&s(),c&&c(e)}),[a,s,c]),L=(0,n.useCallback)((e=>{0===a.length&&j&&j(),F&&F(e)}),[a,j,F]),_=(0,n.useCallback)((()=>{M.setState({focused:!1}),null==T||T()}),[M,T]),O=(0,n.useCallback)((()=>{M.setState({focused:!0}),null==D||D()}),[M,D]),E=0===o.length;return(0,u.jsx)(d().A,{disabled:i,format:d().C.Transparent,onKeyDown:V,onChange:p,value:a,focus:g,focusInitial:h,focusAfterAnimation:f,preventScrollOnFocus:m,style:A(v,P,B,x,y),inputStyle:C||{height:P.device.isMobile?24:20},size:1,ref:t,type:S,placeholder:E?b:"",onSubmit:L,onFocus:O,onBlur:_,textarea:k,autoComplete:w,inputElementAttributes:R,suppressFocusRing:I})})),S=n.forwardRef((function(e,t){const{right:a,showClearButton:d,format:c,focus:p,dontShowBorderBottom:g,disabled:h,showBorder:x,style:S,onClick:A,inputAndTokenWrapRightStyle:j,tokenWrapStyle:F,tokens:k,hideInput:w,value:M,onRemoveLastToken:D,onKeyDown:T,onChange:R,focusInitial:I,focusAfterAnimation:B,preventScrollOnFocus:P,inputFullWidth:V,inputDivStyle:L,inputStyle:_,rightWrapStyle:O,type:E,placeholder:W,onEmptySubmit:K,onSubmit:H,textarea:U,autoComplete:N,onClearButtonClick:Y,onFocus:z,onBlur:G,inputElementAttributes:q,suppressFocusRing:Z}=e,$=(0,l().DP)(),J=(0,r().v3)(),Q=(0,n.useContext)(s().xu),[X,ee]=n.useState(!1),te=(0,i().uB)(void 0,o(995444).A);(0,o(852507).l)((()=>{(p||I)&&te.setState({focused:!0})})),(0,n.useEffect)((()=>{P&&ee(!0),void 0!==p&&te.setState({focused:p})}),[p,te,P]);const oe=(0,i().K8)((()=>te.state.focused),[te]),ne=(0,n.useRef)(null),[re,ie]=(0,o(819121).A)(),le=(0,o(93583).A)(t,ne,re),ae=(0,n.useCallback)((()=>{var e;h||(null===(e=ne.current)||void 0===e||e.focus(),null==A||A())}),[h,A,ne]),se="combobox"===(null==q?void 0:q.role)&&ie&&!Z,de=function(e){let{environment:t,theme:o,format:n,focus:r,dontShowBorderBottom:l,disabled:a,showBorder:d,menuContext:c,showFocusRing:u}=e;return(0,i().K8)((()=>{const{WindowSizeStore:e}=t,i=y(o)[n];return t.device.isMobile?{...v(o),paddingTop:14,paddingBottom:8,paddingLeft:(null==c?void 0:c.menuType)!==s().gu.Popup?e.getSafePaddingLeftCSS(16):16,paddingRight:(null==c?void 0:c.menuType)!==s().gu.Popup?e.getSafePaddingRightCSS(16):16,...l&&{borderBottom:"none"}}:{...m(o,a),...i.desktopWrapStyleOverride,...d&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},...d&&r&&{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"},...r&&i.inputDivDesktopFocusStyle,...u&&{boxShadow:o.outlineBlueInputBoxShadow}}}),[a,l,t,r,n,null==c?void 0:c.menuType,d,o,u])}({environment:J,theme:$,format:c,focus:p,dontShowBorderBottom:g,disabled:h,showBorder:x,menuContext:Q,showFocusRing:se}),{inputElementAttributes:ce,wrapperElementAttributes:ue}=(0,n.useMemo)((()=>{if("combobox"===(null==q?void 0:q.role)){const{role:e,"aria-expanded":t,"aria-haspopup":o,"aria-controls":n,"aria-orientation":r,...i}=q;return{inputElementAttributes:i,wrapperElementAttributes:{role:e,"aria-expanded":t,"aria-haspopup":o,"aria-controls":n,"aria-orientation":r}}}return{inputElementAttributes:q,wrapperElementAttributes:{}}}),[q]);return!J.device.isMobile||a||d?(0,u.jsxs)(o(2143).H,{type:o(756279).A.All,style:{...de,flexWrap:"nowrap",...S},onClick:ae,...ue,children:[(0,u.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,...F,...a||d?j:null},children:[k,!w&&(0,u.jsx)(C,{ref:le,tokens:k,disabled:h,value:M,onRemoveLastToken:D,onKeyDown:T,onChange:R,focus:p,focusInitial:I,focusAfterAnimation:B,preventScrollOnFocus:X,format:c,inputFullWidth:V,inputDivStyle:L,inputStyle:_,type:E,placeholder:W,onEmptySubmit:K,onSubmit:H,textarea:U,autoComplete:N,inputMenuItemStore:te,onFocus:z,onBlur:G,inputElementAttributes:ce,suppressFocusRing:Z})]}),a||d?(0,u.jsx)("div",{style:{flexShrink:0,...O},children:(0,u.jsx)(b,{showClearButton:d,right:a,onClearButtonClick:Y,tokens:k,value:M})}):null]}):(0,u.jsxs)("div",{style:{...de,flexWrap:"nowrap",...S},onClick:ae,tabIndex:-1,role:"none",...ue,children:[(0,u.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,gap:6,overflow:"hidden",marginRight:f(c)?6:0},children:[k,!w&&(0,u.jsx)(C,{ref:le,tokens:k,disabled:h,value:M,onRemoveLastToken:D,onKeyDown:T,onChange:R,focus:p,focusInitial:I,focusAfterAnimation:B,format:c,inputFullWidth:V,inputDivStyle:L,inputStyle:_,type:E,placeholder:W,onEmptySubmit:K,onSubmit:H,textarea:U,autoComplete:N,inputMenuItemStore:te,onFocus:z,onBlur:G,inputElementAttributes:ce,suppressFocusRing:Z})]}),(0,u.jsx)(o(594739).A,{show:oe})]})}));function b(e){let{showClearButton:t,right:n,onClearButtonClick:i,tokens:a,value:s}=e;const d=(0,o(959013).tz)(),c=(0,l().DP)(),p=(0,r().v3)(),{isMobile:g}=p.device;return n?(0,u.jsx)(u.Fragment,{children:n}):t&&(a.length>0||s.length>0)?(0,u.jsx)(o(704152).A,{"aria-label":d.formatMessage({id:"tokenInputMenuItem.clearButton",defaultMessage:"Clear"}),onClick:i,style:{flexShrink:0,flexGrow:0,borderRadius:g?24:20,marginTop:2},children:(0,o(931121).J)({width:g?16:14,height:g?16:14,fill:c.lightIconColor})}):null}function A(e,t,o,n,r){return{flexGrow:1,flexShrink:1,flexBasis:n?"100%":60,minWidth:60,width:"auto",lineHeight:p,...t.device.isMobile?{margin:"0 8px 8px 0"}:y(o)[e].inputDivDesktopStyle,...r}}},859794:(e,t,o)=>{o.d(t,{td:()=>We,mL:()=>_e,r9:()=>Ke});o(944114),o(898992),o(354520),o(672577),o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(56366),l=()=>o(401497),a=()=>o(764880),s=()=>o(289915),d=()=>o(970013),c=()=>o(713998),u=()=>o(784892),p=()=>o(597777),g=()=>o(604995),h=()=>o(467730),f=()=>o(416504),m=()=>o(668725),v=()=>o(30626),x=()=>o(170350),y=()=>o(236262),C=()=>o(799829),S=()=>o(179034),b=()=>o(824862),A=()=>o(869558),j=()=>o(798880),F=()=>o(931075),k=()=>o(959013),w=()=>o(496603),M=()=>o(534177),D=()=>o(284371),T=()=>o(128941),R=()=>o(186445),I=()=>o(873050),B=()=>o(205098),P=()=>o(682146),V=()=>o(522827),L=()=>o(722872),_=()=>o(553965),O=()=>o(668766),E=()=>o(685889),W=()=>o(388487),K=()=>o(857437),H=()=>o(106628),U=()=>o(962730),N=()=>o(756279),Y=()=>o(792415),z=()=>o(351360),G=()=>o(463830),q=()=>o(970585),Z=()=>o(630116),$=()=>o(251126),J=(o(737550),()=>o(29118)),Q=()=>o(854150),X=()=>o(919709),ee=()=>o(436696),te=()=>o(175116),oe=()=>o(108944),ne=()=>o(486130),re=()=>o(448061),ie=()=>o(760217),le=()=>o(625830),ae=()=>o(331542),se=()=>o(928600),de=()=>o(939740),ce=()=>o(64e3),ue=()=>o(45552),pe=()=>o(89924),ge=()=>o(881690),he=()=>o(856952),fe=o(474848);function me(e){const{filter:t,parentStore:o,updateValue:a,onClose:d,desktopTopActions:c,mobileMenuTitle:p,mobileMoreActions:g}=e,f=(0,r().v3)(),m=(0,te().ET)(),[v,x]=(0,n.useState)([]),[y,C]=(0,n.useState)(!1),S=(0,n.useMemo)((()=>(0,s().gc)(t)?(0,s().GK)(t):[]),[t]),b=(0,r().Y0)(),A=(0,i().K8)((()=>w().oE(S.map((e=>{if(e.value)return Z().md.createChildStore(o,{table:"collection",id:e.value})})))),[S,o]),j=(0,i().K8)((()=>A.map((e=>(0,fe.jsx)(ge().A,{format:b.isMobile?u().NY.Large:u().NY.Small,value:(0,fe.jsx)(re().A,{collectionStore:e}),onClickRemove:()=>{const t=S.find((t=>t.value===e.id));if(t){const e=w().FF(S,t);a(e)}},showRemoveButton:!0,isSingle:!1,shouldShrink:!0,backgroundColor:"transparent",showTooltip:"overflow"},e.id)))),[A,S,b.isMobile,a]),[F,M]=(0,n.useState)(""),D=(0,k().tz)(),T=(0,i().K8)((()=>{var e;return null===(e=z().default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]),R=(0,i().K8)((()=>m.collectionStoresStore.state??[]),[m]),I=(0,i().K8)((()=>y?R:m.collectionStoreResultsInViewOrder()),[y,m,R]),B=(0,i().K8)((()=>(0,h().Ay)(F,R,(e=>X().q4_(e.getName()??[])))),[F,R]),P=(0,i().K8)((()=>R.filter((e=>!v.some((t=>t.id===e.id))))),[R,v]),V=(0,i().uB)(void 0,q().A);(0,n.useEffect)((()=>{x((()=>""===F?w().hS([...I,...A,...v],"id"):B))}),[F,y,I,B,A]);const _=(0,l().IS)((e=>({checkboxIcon:{fill:e.regularIconColor}})),[]),O=(0,n.useCallback)(((e,t)=>{const o=Boolean(t.find((t=>"exact"===t.type&&t.value===e.id))),n=()=>{const o=w().Iy(t,[{type:"exact",value:e.id}],(e=>e.value));a(o)};return{key:e.id,render:t=>(0,fe.jsx)(ie().A,{...t,icon:(0,fe.jsx)(le().A,{checked:o,size:14,onClick:n,style:_.checkboxIcon}),title:(0,fe.jsx)(re().A,{collectionStore:e}),isTokenTitle:!0}),action:n}}),[_.checkboxIcon,a]),E=(0,n.useCallback)((()=>({key:"hidden-items-button",render:e=>(0,fe.jsx)(ie().A,{...e,icon:(0,J().K)({width:13,height:13}),title:(0,fe.jsx)(k().sA,{id:"collectionFilterValueMenu.locationFilterValueMenu.hiddenLocationsDescription",defaultMessage:"{numHiddenOptions, plural, one {{numHiddenOptions} other source} other {{numHiddenOptions} other sources}}",values:{numHiddenOptions:P.length}})}),action:()=>{C(!0),(0,ee().X)({environment:f,collectionContextStore:m,action:"expand_property_filter",original_view_type:void 0,property_type:"location"})}})),[P.length,m,f]),W=(0,i().K8)((()=>{const e=[],t={},n=[];for(const o of v){const e=oe().Uo(o);e?T&&e.isMemberOrGuest(T,ne()._.getSpacePermissionGroupIds({userId:T,spaceId:e.getSpaceId()}))&&(t[e.id]=[...t[e.id]??[],o]):n.push(o)}for(const[r,i]of Object.entries(t)){const t=Z().h4.createChildStore(o,{table:Q().yK,id:r});e.push({key:r,items:i.map((e=>O(e,S))),render:e=>(0,fe.jsx)(pe().A,{topBorder:!0,...e,title:(0,fe.jsx)(fe.Fragment,{children:t.getName()??""})})})}return n.length>0&&e.push({key:"private",items:n.map((e=>O(e,S))),render:e=>(0,fe.jsx)(pe().A,{topBorder:!0,...e,title:(0,fe.jsx)(k().sA,{id:"collectionFilterValueMenu.privateLocationSection",defaultMessage:"Private"})})}),P.length>0&&!y&&e.push({key:"hidden",items:[E()],render:e=>(0,fe.jsx)(pe().A,{topBorder:!0,...e})}),e}),[P.length,y,v,T,o,O,S,E]),K=(0,fe.jsx)(he().Ay,{focus:!b.isMobile||void 0,focusAfterAnimation:!0,format:he().le.FilterValue,tokens:j,placeholder:D.formatMessage({defaultMessage:"Search for one or more sources",id:"database.filterValue.locationType.searchPlaceholder"}),onRemoveLastToken:()=>{const e=S.slice(0,S.length-1);a(e)},onClearButtonClick:()=>{a([]),null==d||d()},value:F,onChange:e=>{M(e.target.value)},dontShowBorderBottom:b.isAndroid,showClearButton:!0,style:{maxHeight:"20vh",overflowY:"auto"}}),H=(0,fe.jsxs)(pe().A,{desktopStyle:{paddingBottom:0},children:[!b.isMobile&&c,K]});let U;return U=b.isMobile?{menuType:L().gu.Modal,title:p,left:g,right:(0,fe.jsx)(ue().DoneMenuText,{}),onClickRight:d,header:H}:{menuType:L().gu.Popup,maxHeight:s().mi,width:260,header:H,disableHeaderBorder:!0},(0,fe.jsx)(se().A,{...U,children:(0,s().gc)(t)&&(0,fe.jsxs)(fe.Fragment,{children:[!m&&(0,fe.jsx)(pe().A,{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 0px"},children:(0,fe.jsx)(ae().A,{})}),m&&(0,fe.jsxs)(fe.Fragment,{children:[0===R.length||""!==F&&0===v.length?(0,fe.jsx)(pe().A,{children:(0,fe.jsx)(ce().A,{title:(0,fe.jsx)(k().sA,{defaultMessage:"No results",id:"database.filterValue.selectType.noResults.message"})})}):null,R.length>0&&(0,fe.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:W,store:V,onAccept:()=>{M("")}})]})]})})}var ve=()=>o(378864),xe=()=>o(704152),ye=()=>o(406699),Ce=()=>o(285790),Se=()=>o(419357),be=()=>o(545805),Ae=()=>o(8980),je=()=>o(14235),Fe=()=>o(305390),ke=()=>o(933117),we=()=>o(859428),Me=()=>o(448693),De=()=>o(125565),Te=()=>o(712677),Re=()=>o(527399),Ie=()=>o(573351),Be=()=>o(427711),Pe=()=>o(320865),Ve=()=>o(512052),Le=()=>o(399762);let _e=function(e){return e[e.AdvancedFilter=0]="AdvancedFilter",e[e.PropertyFilter=1]="PropertyFilter",e}({});const Oe=(0,k().YK)({startingMessage:{defaultMessage:"Select or type a date...",id:"search.dateMenu.dateMessage"},chevronDownAriaLabel:{id:"filterDateMenu.chevronDownAriaLabel.ariaLabel",defaultMessage:"Dropdown to select a date relative to today"},pageContainingThisView:{defaultMessage:"Page containing this view",id:"database.filterValue.pageContainingThisView"}}),Ee=o(757695).default.createClass("",{name:"QueryStore"});function We(e){const{schema:t,propertyFilter:o,parentStore:r,onClose:l,onChange:a,onChangeDebounced:s,userCanConfigureFilters:d,onDelete:c,onAddToCombinatorFilter:u,context:p,collectionViewId:g,collectionContextStore:h,allowRelativePersonFilter:f,allowRelativeDateFilter:m}=e,v=(0,i().uB)(void 0,G().A),x=(0,i().uB)(void 0,G().A),y=(0,i().uB)(void 0,q().A),C=(0,i().uB)(void 0,Ee);(0,W().A)({capture:!0,preventType:N().A.Y});const S=(0,n.useCallback)((e=>{null==l||l()}),[l]);return(0,fe.jsx)(be().A,{debugName:"CollectionFilterValueMenu",capture:!0,onEsc:S,children:(0,fe.jsx)(Ct,{propertyFilter:o,schema:t,parentStore:r,onChange:a,onChangeDebounced:s,userCanConfigureFilters:d,onDelete:c,onAddToCombinatorFilter:u,context:p,onClose:l,collectionViewId:g,collectionContextStore:h,allowRelativePersonFilter:f,allowRelativeDateFilter:m,queryStore:C,menuListStore:y,dateFilterPopupStore:x,dateRangeFilterPopupStore:v})})}function Ke(e){const{query:t,propertySchema:o,selectedValues:n,updateValue:r,isMobile:i,styles:l,isFormEditorView:a}=e,s=o.options||[];return(t?(0,h().Ay)(t,s,(e=>e.value)):s).map((e=>{const t=Boolean(n.find((t=>t.value===e.value))),o={key:e.value,render:o=>(0,fe.jsx)(ie().A,{icon:(0,fe.jsx)(le().A,{onClick:o.onClick,checked:t,size:14,style:l.checkboxIcon,disallowTabbing:!0}),title:a?e.value:(0,fe.jsx)(Le().O,{format:i?u().NY.Large:u().NY.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1}),isTokenTitle:!0,...o}),action:()=>{const o=t?n.filter((t=>{let{value:o}=t;return o!==e.value})):[...n,{type:"exact",value:e.value}];r(o)}};return o}))}function He(e){return Array.isArray(e)?0===e.length?{type:"exact",value:void 0}:1===e.length?e[0]:e:e}function Ue(e,t){return Boolean(e.find((e=>w().n4(e,t))))}function Ne(){return(0,fe.jsx)(k().sA,{defaultMessage:"Me",id:"database.filterValue.personType.firstPersonPropertyValue.title"})}function Ye(e,t,o){const{filter:n}=o;(0,s().s1)(n)?null==t||t({...n,subfilter:{...n.subfilter,value:He(e)}}):null==t||t({...n,value:He(e)})}function ze(e,t,o){const{filter:n}=o;(0,s().s1)(n)?null==t||t({...n,subfilter:e}):null==t||t(e)}function Ge(e,t,o,n,r){return()=>{Ye(e?t.filter((e=>!w().n4(e,o))):[...t,o],r,n)}}function qe(e){let{filter:t,onChange:o,propertyFilter:n,onClose:r}=e;return(0,s().t6)(t.value)?null:(0,fe.jsx)(pe().A,{topBorder:!0,children:(0,fe.jsx)(ie().A,{focused:!1,title:(0,fe.jsx)(k().sA,{defaultMessage:"Clear",id:"database.filterValue.clear.message"}),onClick:()=>{Ye({type:"exact",value:void 0},o,n),null==r||r()}})})}function Ze(e){let{filter:t}=e;const o=(0,l().DP)();return(0,fe.jsx)("span",{style:{color:o.lightTextColor},children:(0,B().J)(t.operator).toLocaleLowerCase()})}function $e(e){let{propertySchema:t,propertyFilter:o,onChange:n}=e;const i=(0,l().DP)(),{isMobile:a}=(0,r().Y0)(),d=o.filter;if(!(0,s().gc)(d)||!(0,s().nM)(d))return(0,fe.jsx)(fe.Fragment,{children:t.name});const c={width:190,items:s().$N,selectedItem:(0,s().CY)(d),getKey:e=>e,onSelect:e=>{ze({...d,use_end:(0,s().Zt)(e)},n,o)},renderItem:e=>(0,fe.jsx)(we().A,{renderTooltip:()=>(0,B().WG)(e.value),render:t=>(0,fe.jsx)(ie().A,{title:(0,B().h0)(e.value),...(0,_().A)(e,t)}),placement:U().W.Right,textWrap:!0,style:{width:"260px"}}),renderOrigin:e=>(0,fe.jsx)(xe().A,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:6,flexShrink:0},children:(0,fe.jsxs)("div",{style:{display:"flex",alignItems:"center",...!a&&{color:i.mediumTextColor,fill:i.lightIconColor,fontWeight:500,fontSize:12}},children:[(0,fe.jsx)("span",{style:{marginRight:4},children:(0,B().h0)((0,s().CY)(d))}),(0,m().b)({width:10,height:10,...a&&{marginTop:2}})]})})};return(0,fe.jsx)(ke().A,{...c,mobileActionSheet:!0})}function Je(e){let{propertyFilter:t,onChange:o}=e;const n=(0,k().tz)(),i=(0,l().DP)(),{isMobile:a}=(0,r().Y0)(),{filter:d}=t;if(!(0,s().s1)(d))return null;const c={width:190,items:s().$X,getKey:e=>e,selectedItem:d.operator,onSelect:e=>{null==o||o({...d,operator:e})},renderItem:e=>(0,fe.jsx)(ie().A,{title:(0,B().wE)(e.value,n),...e}),renderOrigin:e=>(0,fe.jsx)(xe().A,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:6,flexShrink:0},children:(0,fe.jsxs)("div",{style:{display:"flex",alignItems:"center",...!a&&{color:i.lightTextColor,fontSize:12}},children:[(0,fe.jsx)("span",{style:{marginRight:4},children:(0,B().wE)(d.operator,n).toLocaleLowerCase()}),(0,m().b)({width:10,height:10,...a&&{marginTop:2}})]})})};return(0,fe.jsx)(ke().A,{...c,mobileActionSheet:!0})}function Qe(e){let{propertyFilter:t,schema:o,parentStore:n,onChange:a}=e;const{isMobile:d}=(0,r().Y0)(),c=(0,l().DP)(),{property:u}=t,p=o[u],g=(0,s().s1)(t.filter)?t.filter.subfilter:t.filter,h=(0,i().K8)((()=>(0,s().HF)({schema:o,property:u,getRecordModel:n.getRecordModel})),[n,u,o]);if((0,s().s1)(g))return null;let f=(0,s().U6)(h);p&&(0,P().i5)(p)&&(f=f.filter((e=>!(0,s().tk)(e))));const v={width:190,items:f,selectedItem:g.operator,getKey:e=>e,onSelect:e=>{ze((0,B().iI)(h,g,e,"propertyFilter"),a,t)},renderItem:e=>(0,fe.jsx)(ie().A,{title:(0,B().J)(e.value),...e}),renderOrigin:e=>(0,fe.jsx)(xe().A,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:6,flexShrink:0},children:(0,fe.jsxs)("div",{style:{display:"flex",alignItems:"center",...!d&&{color:c.mediumTextColor,fill:c.lightIconColor,fontWeight:500,fontSize:12}},children:[(0,fe.jsx)("span",{style:{marginRight:4},children:(0,B().J)(g.operator).toLocaleLowerCase()}),(0,m().b)({width:10,height:10,...d&&{marginTop:2}})]})})};return(0,fe.jsx)(ke().A,{...v,mobileActionSheet:!0})}function Xe(e){let{parent:t,userCanConfigureFilters:o,onDelete:i,onAddToCombinatorFilter:l}=e;const{isMobile:a}=(0,r().Y0)(),d=a?{menuType:L().gu.ActionSheet}:{menuType:L().gu.Popup,maxHeight:s().mi},c=(0,n.useMemo)((()=>[{key:"actions",render:e=>(0,fe.jsx)(pe().A,{disableMobilePadding:!0,...e}),items:o?w().oE([{key:"delete",render:e=>(0,fe.jsx)(ie().A,{...e,title:(0,fe.jsx)(k().sA,{id:"database.filterValue.deleteFilter.title",defaultMessage:"Delete filter"}),icon:(0,fe.jsx)(Ae().I,{icon:y().I}),isRedOnHover:!0}),action:()=>{t.close(),null==i||i()}},{key:"merge",render:e=>(0,fe.jsx)(we().A,{placement:U().W.Right,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,fe.jsx)("div",{children:(0,fe.jsx)(T().Nf,{})}),render:t=>(0,fe.jsx)(ie().A,{...(0,_().A)(e,t),title:(0,fe.jsx)(k().sA,{id:"database.filterValue.mergeIntoAdvancedFilter.title",defaultMessage:"Add to advanced filter"}),icon:(0,fe.jsx)(Ae().I,{icon:x().S})})}),action:()=>{t.close(),null==l||l()}}]):[]}]),[l,i,t,o]);return(0,fe.jsx)(se().A,{...d,children:(0,fe.jsx)(de().Ay,{type:de().Oh.Vertical,sections:c,initialFocus:void 0})})}function et(e){let{propertySchema:t,propertyFilter:o,onChange:n}=e;return(0,s().qK)(t)?(0,fe.jsx)($e,{propertyFilter:o,onChange:n,propertySchema:t}):(0,fe.jsx)(fe.Fragment,{children:t.name})}function tt(e){let{userCanConfigureFilters:t,onDelete:o,onAddToCombinatorFilter:n}=e;const i=(0,r().v3)(),{isMobile:l}=(0,r().Y0)(),a=(0,k().tz)();return(0,fe.jsx)(ye().Ay,{popupType:i.device.isMobile?je().nl.SlideUp:je().nl.Popup,render:e=>(0,fe.jsx)(Xe,{parent:e,userCanConfigureFilters:t,onDelete:o,onAddToCombinatorFilter:n}),renderOrigin:e=>t&&(0,fe.jsx)(Ce().A,{ariaLabel:a.formatMessage({id:"database.filterValue.dotsIcon.ariaLabel",defaultMessage:"More actions"}),icon:v()._,style:{...!l&&{height:20,width:20}},...e}),style:{width:240},originGap:2,placementToOrigin:ye().sx.Right,alignmentToOrigin:ye().yP.Start})}function ot(e){let{propertyFilter:t,onChange:o,schema:n,parentStore:r,userCanConfigureFilters:i,onDelete:a,onAddToCombinatorFilter:d,context:c}=e;const u=(0,l().DP)();if(c!==_e.PropertyFilter)return null;const{property:p}=t,g=n[p];return g?(0,fe.jsxs)("div",{style:{display:"flex",color:u.lightTextColor,fontSize:12,alignItems:"flex-start",paddingTop:4,paddingRight:8,paddingBottom:2,paddingLeft:8},children:[(0,fe.jsx)("span",{style:{flexShrink:1,...D().RC},children:(0,fe.jsx)(et,{propertyFilter:t,onChange:o,propertySchema:g})}),(0,s().s1)(t.filter)&&(0,fe.jsx)(Je,{propertyFilter:t,onChange:o}),(0,fe.jsx)(Qe,{propertyFilter:t,schema:n,parentStore:r,onChange:o}),(0,fe.jsx)("div",{style:{flexGrow:1}}),(0,fe.jsx)(tt,{userCanConfigureFilters:i,onDelete:a,onAddToCombinatorFilter:d})]}):null}function nt(e){let{propertyFilter:t,schema:o,context:n,onChange:r,parentStore:i}=e;const{property:l}=t,a=o[l];return a?n===_e.PropertyFilter?(0,fe.jsxs)("div",{style:{display:"flex"},children:[(0,fe.jsx)("span",{style:{fontWeight:D().Wy.medium,flexShrink:1,marginLeft:8,maxWidth:150,...D().RC},children:(0,fe.jsx)(et,{propertyFilter:t,onChange:r,propertySchema:a})}),(0,s().s1)(t.filter)&&(0,fe.jsx)(Je,{propertyFilter:t,onChange:r}),(0,fe.jsx)(Qe,{propertyFilter:t,schema:o,parentStore:i,onChange:r})]}):(0,fe.jsx)(fe.Fragment,{children:a.name}):null}function rt(e){let{context:t,userCanConfigureFilters:o,onDelete:n,onAddToCombinatorFilter:r}=e;return t!==_e.PropertyFilter?null:(0,fe.jsx)(tt,{userCanConfigureFilters:o,onDelete:n,onAddToCombinatorFilter:r})}function it(e){let{filter:t,onChange:o,propertyFilter:n,schema:i,parentStore:l,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:c,context:u,onClose:p}=e;const g=(0,r().v3)(),h=(0,k().tz)(),{device:f}=g,m=(0,fe.jsx)(Se().Ay,{focus:!0,focusInitial:!0,focusAfterAnimation:!0,value:(0,s().gc)(t)&&t.value.value?t.value.value:"",onChange:e=>{Ye({type:"exact",value:e.target.value},o,n)},onClearButtonClick:()=>{Ye({type:"exact",value:void 0},o,n)},placeholder:h.formatMessage({defaultMessage:"Type a value…",id:"database.filterValue.textType.searchPlaceholder"}),showClearButton:!0,style:{paddingBottom:8}}),v=(0,fe.jsxs)(pe().A,{disableMobileBorders:!0,disableMobilePadding:!0,children:[!f.isMobile&&(0,fe.jsx)(ot,{propertyFilter:n,onChange:o,schema:i,parentStore:l,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:c,context:u}),(0,s().gc)(t)&&m]});let x;return x=f.isMobile?{menuType:L().gu.Modal,title:(0,fe.jsx)(nt,{propertyFilter:n,schema:i,context:u,onChange:o,parentStore:l}),left:(0,fe.jsx)(rt,{context:u,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:c}),right:(0,fe.jsx)(ue().DoneMenuText,{}),onClickRight:p,header:v}:{menuType:L().gu.Popup,maxHeight:s().mi,width:220,header:v},(0,fe.jsx)(se().A,{...x})}function lt(e){let{filter:t,onChange:o,propertyFilter:n,schema:i,parentStore:l,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:c,context:u,onClose:p}=e;const g=(0,r().v3)(),h=(0,k().tz)(),{device:f}=g,m=(0,fe.jsx)(Se().Ay,{focus:!0,focusInitial:!0,focusAfterAnimation:!0,value:(0,s().gc)(t)&&"number"==typeof t.value.value?t.value.value.toString():"",inputLeft:(0,fe.jsx)(Ze,{filter:t}),onChange:e=>{Ye({type:"exact",value:(0,O().q)(e.target.value,h)},o,n)},onClearButtonClick:()=>{Ye({type:"exact",value:void 0},o,n)},placeholder:h.formatMessage({defaultMessage:"Type a value…",id:"database.filterValue.numberType.searchPlaceholder"}),showClearButton:!0,style:{paddingBottom:8}}),v=(0,fe.jsxs)(pe().A,{disableMobileBorders:!0,disableMobilePadding:!0,children:[!f.isMobile&&(0,fe.jsx)(ot,{propertyFilter:n,onChange:o,schema:i,parentStore:l,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:c,context:u}),(0,s().gc)(t)&&m]});let x;return x=f.isMobile?{menuType:L().gu.Modal,title:(0,fe.jsx)(nt,{propertyFilter:n,schema:i,context:u,onChange:o,parentStore:l}),left:(0,fe.jsx)(rt,{context:u,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:c}),right:(0,fe.jsx)(ue().DoneMenuText,{}),onClickRight:p,header:v}:{menuType:L().gu.Popup,maxHeight:s().mi,width:220,header:v},(0,fe.jsx)(se().A,{...x})}function at(e,t,o){t.setState(e),o.setState({focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}function st(e){let{filter:t,schema:o,propertyFilter:a,parentStore:p,onChange:g,onClose:h,userCanConfigureFilters:f,onDelete:m,onAddToCombinatorFilter:v,context:x,queryStore:y,menuListStore:C,collectionContextStore:S}=e;const b=(0,k().tz)(),A=(0,l().DP)(),{isMobile:j,isAndroid:F}=(0,r().Y0)(),M=(0,i().O$)(y),D=(0,i().K8)((()=>(0,I().YF)(o,a,p)),[o,a,p]),[T,R]=(0,K().$)(),B=(0,i().K8)((()=>{const e=null==S?void 0:S.collectionViewStore();return"form_editor"===(null==e?void 0:e.getType())}),[S]),{items:P,tokenizedInput:V}=(0,n.useMemo)((()=>{if(!D||!(0,d().lx)(D))return{items:[],tokenizedInput:null};const e=D.options||[],o=(0,s().gc)(t)?(0,s().v0)(t)?(0,s().Zl)(t):(0,s().SM)(t):[],n=o.map((t=>{if(void 0===t.value)return null;const n=(0,c().jy)(e,t.value);return n?(0,fe.jsx)(Le().O,{format:j?u().NY.Large:u().NY.Small,isSingle:!0,value:n.value,color:n.color,showRemoveButton:!0,onClickRemove:()=>{Ye(w().FF(o,t),g,a)}},n.id):null})),r=(0,fe.jsx)("div",{style:{...!j&&{paddingTop:0,paddingRight:8,paddingBottom:8,paddingLeft:8}},children:(0,fe.jsx)(he().Ay,{focus:!j||void 0,focusAfterAnimation:!0,format:he().le.FilterValue,tokens:B?[]:n,placeholder:b.formatMessage({defaultMessage:"Select one or more options…",id:"database.filterValue.selectType.searchPlaceholder"}),onRemoveLastToken:()=>{Ye(o.slice(0,o.length-1),g,a)},onClearButtonClick:()=>{Ye([],g,a),null==h||h()},value:M,onChange:e=>{at(e.target.value,y,C)},dontShowBorderBottom:F,showClearButton:!0,tokenWrapStyle:{paddingTop:2,gap:4},...T})});return{items:Ke({query:M,propertySchema:D,selectedValues:o,updateValue:e=>{Ye(e,g,a)},isMobile:j,styles:{checkboxIcon:{fill:A.regularIconColor,pointerEvents:"none"}},isFormEditorView:B}),tokenizedInput:r}}),[D,t,j,B,b,M,F,T,A.regularIconColor,g,a,h,y,C]);if(!D||!(0,d().lx)(D))return null;const _=(0,fe.jsxs)(pe().A,{desktopStyle:{paddingBottom:0,marginTop:B?8:0},children:[!j&&!B&&(0,fe.jsx)(ot,{propertyFilter:a,onChange:g,schema:o,parentStore:p,userCanConfigureFilters:f,onDelete:m,onAddToCombinatorFilter:v,context:x}),(0,s().gc)(t)&&V]}),O=j?{menuType:L().gu.Modal,title:(0,fe.jsx)(nt,{propertyFilter:a,schema:o,context:x,onChange:g,parentStore:p}),left:(0,fe.jsx)(rt,{context:x,userCanConfigureFilters:f,onDelete:m,onAddToCombinatorFilter:v}),right:(0,fe.jsx)(ue().DoneMenuText,{}),onClickRight:h,header:_}:{menuType:L().gu.Popup,maxHeight:s().mi,width:260,header:_,disableHeaderBorder:!0,tokenInputHeader:!0};return(0,fe.jsx)(se().A,{...O,children:(0,s().gc)(t)&&(0,fe.jsxs)(fe.Fragment,{children:[0===P.length&&(0,fe.jsx)(pe().A,{children:(0,fe.jsx)(ce().A,{title:(0,fe.jsx)(k().sA,{defaultMessage:"No results",id:"database.filterValue.selectType.noResults.message"})})}),P.length>0&&(0,fe.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,fe.jsx)(pe().A,{...e}),items:P}],store:C,onAccept:()=>{at("",y,C)},comboboxProps:R})]})})}function dt(e){let{filter:t,error:o,results:l,schema:d,propertyFilter:c,parentStore:p,onChange:g,allowRelativePersonFilter:h,onClose:f,userCanConfigureFilters:m,onDelete:v,onAddToCombinatorFilter:x,context:y,queryStore:C,menuListStore:S}=e;const A=(0,r().v3)(),F=(0,k().tz)(),{device:M}=A,D=(0,i().O$)(C),T=(0,i().K8)((()=>(0,I().YF)(d,c,p)),[d,c,p]),[R,B]=(0,K().$)(),P=(0,n.useMemo)((()=>(0,s().gc)(t)?(0,s().Wf)(t):[]),[t]),V=(0,i().K8)((()=>w().oE(P.map(((e,t)=>{if("exact"===e.type&&e.value){const t=(0,a().xC)({pointer:e.value,getRecordValue:p.getRecordValue});return(0,fe.jsx)(Me().Ay,{actor:t,format:M.isMobile?Me().Ay.Format.Large:Me().Ay.Format.Small,showRemoveButton:!0,onClickRemove:()=>{Ye(w().FF(P,e),g,c)},shouldShrink:!0,isSingle:!1},e.value.id)}if("relative"===e.type&&"me"===e.value&&h)return(0,fe.jsx)(ge().A,{format:M.isMobile?u().NY.Large:u().NY.Small,value:(0,fe.jsx)(Ne,{}),onClickRemove:()=>{Ye(w().FF(P,e),g,c)},showRemoveButton:!0,isSingle:!1,shouldShrink:!0,backgroundColor:"transparent",showTooltip:"overflow"},t)})))),[h,P,M.isMobile,g,p.getRecordValue,c]);if(!T)return null;const _=(0,fe.jsx)("div",{style:{...!M.isMobile&&{paddingTop:4,paddingRight:8,paddingBottom:8,paddingLeft:8}},children:(0,fe.jsx)(he().Ay,{focus:!M.isMobile||void 0,focusAfterAnimation:!0,format:he().le.FilterValue,tokens:V,placeholder:F.formatMessage({defaultMessage:"Search for one or more people…",id:"database.filterValue.personType.searchPlaceholder"}),onRemoveLastToken:()=>{Ye(P.slice(0,P.length-1),g,c)},onClearButtonClick:()=>{Ye([],g,c),null==f||f()},value:D,onChange:e=>{at(e.target.value,C,S)},dontShowBorderBottom:M.isAndroid,showClearButton:!0,...R})}),O=(0,fe.jsxs)(pe().A,{desktopStyle:{paddingBottom:0},children:[!M.isMobile&&(0,fe.jsx)(ot,{propertyFilter:c,onChange:g,schema:d,parentStore:p,userCanConfigureFilters:m,onDelete:v,onAddToCombinatorFilter:x,context:y}),(0,s().gc)(t)&&_]});let E;E=M.isMobile?{menuType:L().gu.Modal,title:(0,fe.jsx)(nt,{propertyFilter:c,schema:d,context:y,onChange:g,parentStore:p}),left:(0,fe.jsx)(rt,{context:y,userCanConfigureFilters:m,onDelete:v,onAddToCombinatorFilter:x}),right:(0,fe.jsx)(ue().DoneMenuText,{}),onClickRight:f,header:O}:{menuType:L().gu.Popup,maxHeight:s().mi,width:260,header:O,disableHeaderBorder:!0};const W=w().oE((l&&l.users||[]).map((e=>function(e,t,o,n,r){const{device:i}=n,l=Boolean(t.find((t=>{var o;return"exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id})));return{key:e.id,render:t=>(0,fe.jsx)(ie().A,{...t,title:(0,fe.jsx)(Me().t_,{isSingle:!0,shouldShrink:!0,format:i.isMobile?Me().t_.Format.Large:Me().t_.Format.Medium,userValue:e,showRemoveButton:!1}),isTokenTitle:!0,checkState:l}),action:()=>{Ye(l?t.filter((t=>{var o;return!("exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id)})):[...t,{type:"exact",value:{table:j().oo,id:e.id}}],r,o)}}}(e,P,c,A,g)))),H=["created_by","last_edited_by"].includes(T.type)?w().oE((l&&l.bots||[]).map((e=>function(e,t,o,n,r){const{device:i}=n,l=Boolean(t.find((t=>{var o;return"exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id})));return{key:e.id,render:t=>(0,fe.jsx)(ie().A,{...t,title:(0,fe.jsx)(Me().v7,{isSingle:!0,shouldShrink:!0,format:i.isMobile?Me().v7.Format.Large:Me().v7.Format.Medium,botValue:e,showRemoveButton:!1}),isTokenTitle:!0,checkState:l}),action:()=>{Ye(l?t.filter((t=>{var o;return!("exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id)})):[...t,{type:"exact",value:{table:b().GP,id:e.id}}],r,o)}}}(e,P,c,A,g)))):[];if(h&&l&&(!D||"me".includes(D))){const e=Boolean(P.find((e=>"relative"===e.type&&"me"===e.value)));W.unshift({key:"me",render:t=>(0,fe.jsx)(ie().A,{...t,title:(0,fe.jsx)(Ne,{}),checkState:e,style:M.isMobile?void 0:{fontSize:14}}),action:()=>{Ye(e?P.filter((e=>{let{value:t}=e;return"me"!==t})):[...P,{type:"relative",value:"me"}],g,c)}})}const U=[];return W.length>0&&U.push({key:"user property",render:e=>(0,fe.jsx)(pe().A,{...e}),items:W}),H.length>0&&U.push({key:"bot property",render:e=>(0,fe.jsx)(pe().A,{...e,title:"Pick a bot"}),items:H}),(0,fe.jsx)(se().A,{...E,children:(0,s().gc)(t)&&(0,fe.jsxs)(fe.Fragment,{children:[o&&(0,fe.jsx)(pe().A,{children:(0,fe.jsx)(ce().A,{title:(0,fe.jsx)(k().sA,{defaultMessage:"Something went wrong.",id:"database.filterValue.personType.searchPersonPropertyMenuItem.errorMessage"})})}),0===U.length&&l&&!o&&(0,fe.jsx)(pe().A,{children:(0,fe.jsx)(ce().A,{title:(0,fe.jsx)(k().sA,{defaultMessage:"No results",id:"database.filterValue.personType.noResults.message"})})}),!l&&!o&&(0,fe.jsx)(pe().A,{children:(0,fe.jsx)(Pe().A,{})}),U.length>0&&(0,fe.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:U,store:S,onAccept:()=>{at("",C,S)},comboboxProps:B})]})})}function ct(e){var t;let{filter:o,context:n,propertyFilter:l,schema:a,onChange:d,parentStore:c,userCanConfigureFilters:u,onDelete:p,onAddToCombinatorFilter:g,onClose:h,menuListStore:f,collectionContextStore:m}=e;const v=(0,r().v3)(),{device:x}=v,y=(0,i().K8)((()=>{const e=null==m?void 0:m.collectionViewStore();return"form_editor"===(null==e?void 0:e.getType())}),[m]);let C;C=x.isMobile?{menuType:L().gu.Modal,title:(0,fe.jsx)(nt,{propertyFilter:l,schema:a,context:n,onChange:d,parentStore:c}),left:(0,fe.jsx)(rt,{context:n,userCanConfigureFilters:u,onDelete:p,onAddToCombinatorFilter:g}),right:(0,fe.jsx)(ue().DoneMenuText,{}),onClickRight:h}:{menuType:L().gu.Popup,maxHeight:s().mi,width:220,footer:(0,fe.jsx)(qe,{onChange:d,propertyFilter:l,onClose:h,filter:o})};const S=null===(t=o.value)||void 0===t?void 0:t.value;return(0,fe.jsxs)(se().A,{...C,children:[n===_e.PropertyFilter&&(0,fe.jsx)(pe().A,{disableMobilePadding:!0,children:!x.isMobile&&!y&&(0,fe.jsx)(ot,{propertyFilter:l,onChange:d,schema:a,parentStore:c,userCanConfigureFilters:u,onDelete:p,onAddToCombinatorFilter:g,context:n})}),(0,fe.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,fe.jsx)(pe().A,{style:n===_e.PropertyFilter?{paddingTop:0}:void 0,...e}),items:[{key:"unchecked",render:e=>(0,fe.jsx)(ie().A,{...e,title:(0,fe.jsx)(k().sA,{defaultMessage:"Unchecked",id:"database.filterValue.checkboxType.unchecked.title"}),isTokenTitle:!0,checkState:!1===S}),action:()=>{Ye({type:"exact",value:!1},d,l)}},{key:"checked",render:e=>(0,fe.jsx)(ie().A,{...e,title:(0,fe.jsx)(k().sA,{defaultMessage:"Checked",id:"database.filterValue.checkboxType.checked.title"}),isTokenTitle:!0,checkState:!0===S}),action:()=>{Ye({type:"exact",value:!0},d,l)}}]}],store:f,onAccept:h,captureKeyboardOnlyWhenFocused:!0}),x.isMobile&&(0,fe.jsx)(qe,{onChange:d,propertyFilter:l,onClose:h,filter:o})]})}function ut(e){let{filter:t,error:o,results:l,schema:a,propertyFilter:c,parentStore:p,onChange:g,onClose:h,userCanConfigureFilters:f,onDelete:m,onAddToCombinatorFilter:v,context:x,collectionViewId:y,queryStore:b,menuListStore:j,allowCurrentPageInRelatedCollectionFilter:F}=e;const D=(0,r().v3)(),T=(0,k().tz)(),{device:R}=D,B=(0,i().O$)(b),P=(0,i().K8)((()=>(0,I().YF)(a,c,p)),[a,c,p]),_=(0,i().K8)((()=>function(e,t){if(!e)return;const o=Z().pS.createChildStore(t,{table:A().Gy,id:e}).getParentBlockStore();return o?o.getNearestAncestorTemplateStore():void 0}(y,p)),[y,p]),O=(0,i().K8)((()=>null==_?void 0:_.getAssociatedCollectionId()),[_]),W=(0,n.useMemo)((()=>(0,s().gc)(t)?(0,s().Rh)(t):[]),[t]),H=(0,i().K8)((()=>{const e=(0,I().YF)(a,c,p);return e&&(0,d().nC)(e)?{appConfigUri:(0,E().LQ)(e,p),schema:(0,E().D3)(e,D)}:{}}),[a,c,p,D]),U=(0,i().K8)((()=>function(e,t,o,n,r){const{appConfigUri:i,schema:l}=n;if(!l)return[];if(!i||!(0,V().KN)(l,i))return[];const a=(0,C().qk)(l,i),s=C().n$[i];return w().oE(a.map((n=>{if(!e||n.includes(e)){const e={type:"relative",value:{type:"builtin",variable:n}},i=Ue(t,e);return{key:n,render:e=>(0,fe.jsx)(ie().A,{...e,title:(0,fe.jsx)(k().sA,{...s[n].messageDescriptor}),checkState:i}),action:Ge(i,t,e,o,r)}}})))}(B,W,c,H,g)),[B,W,c,H,g]),N=(0,i().K8)((()=>F?function(e,t,o,n,r){const i=e.formatMessage(Oe.pageContainingThisView);if(!t||i.toLowerCase().includes(t)){const e={type:"relative",value:{type:"current_page_in_related_collection"}},t=Ue(o,e);return{key:e.value.type,render:e=>(0,fe.jsx)(ie().A,{...e,title:i,checkState:t}),action:Ge(t,o,e,n,r)}}}(T,B,W,c,g):void 0),[T,B,W,c,g,F]),[Y,z]=(0,K().$)();if(!P||!(0,d().nC)(P))return null;const G=(0,d().zO)(P);if(!G)return null;const q=w().oE(W.map(((e,t)=>{if(!e.value)return null;const o={format:R.isMobile?u().NY.Large:u().NY.Small,shouldWrap:!1,showRemoveButton:!0,isSingle:!1,shouldShrink:!0,onClickRemove:()=>{Ye(w().FF(W,e),g,c)}},n=e.type;if("exact"===n)return(0,fe.jsx)(Ve().A,{blockId:e.value,parentStore:p,relationPropertySchema:P,...o},e.value);if("relative"===n){var r;const{appConfigUri:n}=H;return"current_page_in_related_collection"===e.value.type?(0,fe.jsx)(ge().A,{value:T.formatMessage(Oe.pageContainingThisView),backgroundColor:"transparent",showTooltip:"overflow",...o},t):n&&"builtin"===e.value.type?(0,fe.jsx)(ge().A,{value:(0,fe.jsx)(k().sA,{...null===(r=C().n$[n])||void 0===r||null===(r=r[e.value.variable])||void 0===r?void 0:r.messageDescriptor}),backgroundColor:"transparent",showTooltip:"overflow",...o},t):null}(0,M().HB)(n)}))),$=(0,fe.jsx)(he().Ay,{focus:!R.isMobile||void 0,focusAfterAnimation:!0,format:he().le.FilterValue,tokens:q,placeholder:T.formatMessage({defaultMessage:"Search for one or more pages…",id:"database.filterValue.relationType.searchPlaceholder"}),onRemoveLastToken:()=>{Ye(W.slice(0,W.length-1),g,c)},onClearButtonClick:()=>{Ye([],g,c),null==h||h()},value:B,onChange:e=>{at(e.target.value,b,j)},dontShowBorderBottom:R.isAndroid,style:{maxHeight:"20vh",overflowY:"auto"},showClearButton:!0,...Y}),J=(0,fe.jsxs)(pe().A,{desktopStyle:{paddingBottom:0},children:[!R.isMobile&&(0,fe.jsx)(ot,{propertyFilter:c,onChange:g,schema:a,parentStore:p,userCanConfigureFilters:f,onDelete:m,onAddToCombinatorFilter:v,context:x}),(0,s().gc)(t)&&$]});let Q;Q=R.isMobile?{menuType:L().gu.Modal,title:(0,fe.jsx)(nt,{propertyFilter:c,schema:a,context:x,onChange:g,parentStore:p}),left:(0,fe.jsx)(rt,{context:x,userCanConfigureFilters:f,onDelete:m,onAddToCombinatorFilter:v}),right:(0,fe.jsx)(ue().DoneMenuText,{}),onClickRight:h,header:J}:{menuType:L().gu.Popup,maxHeight:s().mi,width:260,header:J,disableHeaderBorder:!0},l&&!B&&_&&G&&O===G&&(l=w().sb([_.id,...l]));let X=[];if(l){const e=function(e,t,o,n,r){return e.map((e=>{const i={type:"exact",value:e},l=Ue(t,i),a=Z().Bv.createChildStore(o,{table:S().ev,id:e});return{key:e,action:Ge(l,t,i,n,r),render:e=>(0,fe.jsx)(Fe().A,{store:a,checkState:l,hidePath:!0,...e})}}))}(l,W,p,c,g);X=((0,s().s1)(c.filter)?[]:U).concat(e),N&&(X=[N,...X])}return(0,fe.jsx)(se().A,{...Q,children:(0,s().gc)(t)&&(0,fe.jsxs)(fe.Fragment,{children:[o&&(0,fe.jsx)(pe().A,{children:(0,fe.jsx)(ce().A,{title:(0,fe.jsx)(k().sA,{defaultMessage:"Something went wrong.",id:"database.filterValue.relationType.searchRelationPropertyMenuItem.errorMessage"})})}),0===X.length&&l&&!o&&(0,fe.jsx)(pe().A,{children:(0,fe.jsx)(ce().A,{title:(0,fe.jsx)(k().sA,{defaultMessage:"No results",id:"database.filterValue.relationType.noResults.message"})})}),!l&&!o&&(0,fe.jsx)(pe().A,{children:(0,fe.jsx)(Pe().A,{})}),X.length>0&&(0,fe.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,fe.jsx)(pe().A,{...e}),items:X}],store:j,onAccept:()=>{at("",b,j)},comboboxProps:z})]})})}function pt(e){let{filter:t,schema:o,propertyFilter:n,parentStore:r,onChange:l,allowRelativeDateFilter:a,dateRangeFilterPopupStore:d}=e;const c=(0,i().K8)((()=>(0,I().YF)(o,n,r)),[o,n,r]);if(!c)return null;let u;if((0,s().Cw)(t)&&"exact"===t.value.type&&t.value.value){const e=t.value.value;u={starting:e.start_date?{type:"date",start_date:e.start_date}:void 0,ending:e.end_date?{type:"date",start_date:e.end_date}:void 0}}else u=(0,s().Cw)(t)&&"relative"===t.value.type?t.value:{starting:void 0,ending:void 0};const p={disableMenuWrap:!0,title:c.name,value:u,onUpdate:e=>{var o,r;if(e.error)return null;const i={...u,...e.value},a=null===(o=i.starting)||void 0===o?void 0:o.start_date,s=null===(r=i.ending)||void 0===r?void 0:r.start_date;ze({operator:"date_is_within",use_end:"use_end"in t?null==t?void 0:t.use_end:void 0,value:{type:"exact",value:a||s?{type:"daterange",start_date:a,end_date:s}:void 0}},l,n)},allowRelativeRangeFilter:a,relativeRangePopupStore:d,onUpdateRelativeFilter:e=>{ze({...t,value:e},l,n)}};return(0,fe.jsx)(Be().A,{...p})}function gt(e){let{filter:t,events:o,onChange:n,propertyFilter:i,allowRelativeDateFilter:a,dateFilterPopupStore:s}=e;const d=(0,l().DP)(),c=(0,r().v3)(),u=(0,k().tz)();return(0,fe.jsx)(Te().A,{...o,placeholder:u.formatMessage(Oe.startingMessage),focused:"exact"===t.value.type,value:t.value,onUpdate:e=>{var o;if(e.error)return null;const r=null===(o=e.value)||void 0===o?void 0:o.start_date;ze({...t,value:{type:"exact",value:r?{type:"date",start_date:r}:void 0}},n,i)},inputRight:a&&(0,fe.jsx)(Ce().A,{icon:m().b,iconStyle:{width:12,height:12},ariaLabel:u.formatMessage(Oe.chevronDownAriaLabel),style:{...!c.device.isMobile&&{height:20,width:20},color:d.mediumIconColor},onClick:()=>{s.setState({open:!0})}}),hideClearButton:"relative"===t.value.type||void 0,isRightLastElementOfInput:!0})}function ht(e){let{filter:t,context:o,onChange:n,propertyFilter:i,schema:a,parentStore:d,userCanConfigureFilters:c,onDelete:u,onAddToCombinatorFilter:p,onClose:g,menuListStore:h}=e;const f=(0,l().DP)(),m=(0,r().v3)(),{device:v}=m,x=(0,s().gc)(t)?(0,s().ms)(t):[],y=x.map((e=>{let{value:t}=e;return t})),C=F().FG.map((e=>{const t=y.includes(e);return{key:e,render:o=>(0,fe.jsx)(ie().A,{icon:(0,fe.jsx)(le().A,{checked:t,size:14,style:{fill:f.regularIconColor,pointerEvents:"none"},disallowTabbing:!0}),title:(0,B().w0)({type:"exact",value:e}),...o}),action:()=>{if(t)Ye(x.filter((t=>{let{value:o}=t;return o!==e})),n,i);else{const t={type:"exact",value:e};Ye([...x,t],n,i)}}}}));let S;return S=v.isMobile?{menuType:L().gu.Modal,title:(0,fe.jsx)(nt,{propertyFilter:i,schema:a,context:o,onChange:n,parentStore:d}),left:(0,fe.jsx)(rt,{context:o,userCanConfigureFilters:c,onDelete:u,onAddToCombinatorFilter:p}),right:(0,fe.jsx)(ue().DoneMenuText,{}),onClickRight:g}:{menuType:L().gu.Popup,maxHeight:s().mi,width:220,footer:(0,fe.jsx)(qe,{onChange:n,propertyFilter:i,onClose:g,filter:t})},(0,fe.jsxs)(se().A,{...S,children:[o===_e.PropertyFilter&&(0,fe.jsx)(pe().A,{disableMobilePadding:!0,children:!v.isMobile&&(0,fe.jsx)(ot,{propertyFilter:i,onChange:n,schema:a,parentStore:d,userCanConfigureFilters:c,onDelete:u,onAddToCombinatorFilter:p,context:o})}),(0,fe.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,fe.jsx)(pe().A,{style:{paddingTop:0},...e}),items:C}],store:h})]})}function ft(e){let{filter:t,parentStore:o,schema:n,propertyFilter:l,onChange:a,allowRelativePersonFilter:s,onClose:d,userCanConfigureFilters:c,onDelete:u,onAddToCombinatorFilter:p,context:g,queryStore:h,menuListStore:f}=e;const m=(0,r().v3)(),v=(0,k().tz)(),x=(0,i().O$)(h);return(0,fe.jsx)($().A,{request:x,performRequest:e=>async function(e,t,o,n){const r=await H().T.searchActions.load();let{users:i,bots:l}=await r.searchSpaceActors({environment:o,query:e,membersOnly:!1,userLocale:n});return i=i.slice(0,20),l=l.slice(0,20),await Promise.all([...i.map((async e=>{let{id:o}=e;const n=(0,Z().Oo)(t,{table:j().oo,id:o});await n.load()})),...l.map((async e=>{const o=(0,Z().Oo)(t,{table:b().GP,id:e.id,spaceId:e.space_id});await o.load()}))]),{users:i,bots:l}}(e,o,m,v.locale),render:(e,r)=>(0,fe.jsx)(dt,{schema:n,propertyFilter:l,parentStore:o,onChange:a,allowRelativePersonFilter:s,onClose:d,userCanConfigureFilters:c,onDelete:u,onAddToCombinatorFilter:p,context:g,queryStore:h,menuListStore:f,filter:t,error:e,results:r})})}function mt(e){let{filter:t,schema:o,propertyFilter:n,parentStore:l,onChange:a,onClose:s,userCanConfigureFilters:c,onDelete:u,onAddToCombinatorFilter:p,context:g,collectionViewId:h,queryStore:f,menuListStore:m,allowCurrentPageInRelatedCollectionFilter:v}=e;const x=(0,r().v3)(),y=(0,i().O$)(f),C=(0,i().K8)((()=>z().default.state.currentSpaceStore),[]),b=(0,i().K8)((()=>Y().A.state.publicPageData),[]),A=(0,i().K8)((()=>(0,I().YF)(o,n,l)),[o,n,l]),j=(null==C?void 0:C.id)||(null==b?void 0:b.spaceId);if(!A||!(0,d().nC)(A)||!j)return null;const F=(0,d().zO)(A);return F?(0,fe.jsx)($().A,{request:{query:y,spaceId:j,collectionId:F},performRequest:e=>async function(e,t,o){const{query:n,spaceId:r,collectionId:i}=e;if(!r||!i)return[];const l=await H().T.searchActions.load(),{results:a}=await l.searchPagesInCollection({environment:o,query:n,collectionId:i,limit:20,spaceId:r,excludeTemplates:!0,source:"relation_menu",includePublicPagesWithoutExplicitAccess:!0,boostRecentlyViewedPages:!1});return 0===a.length?[]:(await Promise.all(a.map((async e=>{const o=(0,Z().Oo)(t,{table:S().ev,id:e});await o.load()}))),a)}(e,l,x),render:(e,r)=>(0,fe.jsx)(ut,{schema:o,propertyFilter:n,parentStore:l,onChange:a,onClose:s,userCanConfigureFilters:c,onDelete:u,onAddToCombinatorFilter:p,context:g,collectionViewId:h,queryStore:f,menuListStore:m,filter:t,error:e,results:r,allowCurrentPageInRelatedCollectionFilter:v})}):null}function vt(e){let{filter:t,onChange:o,propertyFilter:n,allowRelativeDateFilter:r,dateFilterPopupStore:l}=e;const a=(0,i().O$)(R().XX);if(!(0,s().gc)(t))return null;const d="exact"===t.value.type?t.value.value:(0,g().fN)(t.value);return d&&!(0,p().$P)(d)?null:(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)(pe().A,{disableMobileBorders:!0,children:(0,fe.jsx)(Ie().A,{firstDayOfWeek:a,selectValue:void 0!==d,value:d?g().C6.notionDateToLuxon(d).toMillis():Date.now(),onChange:e=>{Ye({type:"exact",value:(0,g().p6)(e,(0,f().P)())},o,n)}})}),"relative"===t.value.type&&(0,fe.jsx)(pe().A,{topBorder:!0,children:(0,fe.jsx)(De().A,{isSmall:!0,style:{marginLeft:4,marginTop:4},children:(0,fe.jsx)(k().sA,{id:"collectionFilterMenu.dateFilter.relativeDateFilter.description",defaultMessage:"Filter will update with the current date"})})})]})}function xt(e){let{filter:t,context:o,propertyFilter:n,schema:i,onChange:l,parentStore:a,userCanConfigureFilters:d,onDelete:c,onAddToCombinatorFilter:u,onClose:p,allowRelativeDateFilter:g,dateFilterPopupStore:h,dateRangeFilterPopupStore:f}=e;const m=(0,r().v3)(),{device:v}=m;let x;return x=v.isMobile?{menuType:L().gu.Modal,title:(0,fe.jsx)(nt,{propertyFilter:n,schema:i,context:o,onChange:l,parentStore:a}),left:(0,fe.jsx)(rt,{context:o,userCanConfigureFilters:d,onDelete:c,onAddToCombinatorFilter:u}),right:(0,fe.jsx)(ue().DoneMenuText,{}),onClickRight:p}:{menuType:L().gu.Popup,maxHeight:s().mi},(0,fe.jsxs)(se().A,{...x,children:[(0,fe.jsxs)(pe().A,{disableMobilePadding:!0,disableMobileBorders:!0,isInput:o!==_e.PropertyFilter,children:[!v.isMobile&&(0,fe.jsx)(ot,{propertyFilter:n,onChange:l,schema:i,parentStore:a,userCanConfigureFilters:d,onDelete:c,onAddToCombinatorFilter:u,context:o}),(0,s().gc)(t)&&!(0,s().Cw)(t)&&(0,fe.jsx)(Re().A,{type:"date",filterValue:t.value,onUpdate:e=>{ze({...t,value:e},l,n)},renderOrigin:e=>(0,fe.jsx)(gt,{onChange:l,propertyFilter:n,allowRelativeDateFilter:g,dateFilterPopupStore:h,filter:t,events:e}),disabled:"exact"===t.value.type&&g,buttonPopupStore:h})]}),(0,s().gc)(t)&&((0,s().Cw)(t)?(0,fe.jsx)(pt,{schema:i,propertyFilter:n,parentStore:a,onChange:l,allowRelativeDateFilter:g,dateRangeFilterPopupStore:f,filter:t}):(0,fe.jsx)(vt,{onChange:l,propertyFilter:n,allowRelativeDateFilter:g,dateFilterPopupStore:h,filter:t}))]})}function yt(e){let{filter:t,schema:o,propertyFilter:n,parentStore:l,onChange:a,onClose:d,userCanConfigureFilters:c,onDelete:u,onAddToCombinatorFilter:p,context:g}=e;const h=(0,r().v3)(),{device:f}=h,m=(0,i().K8)((()=>(0,I().YF)(o,n,l)),[o,n,l]);if(!m||"file"!==m.type)return null;const v=(0,fe.jsx)(pe().A,{desktopStyle:{paddingBottom:0},children:!f.isMobile&&(0,fe.jsx)(ot,{propertyFilter:n,onChange:a,schema:o,parentStore:l,userCanConfigureFilters:c,onDelete:u,onAddToCombinatorFilter:p,context:g})});let x;return x=f.isMobile?{menuType:L().gu.Modal,title:(0,fe.jsx)(nt,{propertyFilter:n,schema:o,context:g,onChange:a,parentStore:l}),left:(0,fe.jsx)(rt,{context:g,userCanConfigureFilters:c,onDelete:u,onAddToCombinatorFilter:p}),right:(0,fe.jsx)(ue().DoneMenuText,{}),onClickRight:d,header:v}:{menuType:L().gu.Popup,maxHeight:s().mi,width:260,header:v,disableHeaderBorder:!0,tokenInputHeader:!0},(0,fe.jsx)(se().A,{...x})}function Ct(e){let{propertyFilter:t,schema:o,parentStore:n,onChange:r,onChangeDebounced:l,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:u,context:p,onClose:g,collectionViewId:h,collectionContextStore:f,allowRelativePersonFilter:m,allowRelativeDateFilter:v,queryStore:x,menuListStore:y,dateFilterPopupStore:C,dateRangeFilterPopupStore:S}=e;const{property:b,filter:A}=t,j=(0,i().K8)((()=>(0,s().HF)({schema:o,property:b,getRecordModel:n.getRecordModel})),[n,b,o]),F=o[b],k=(0,i().K8)((()=>!(!f||!F)&&function(e){var t;let{collectionContextStore:o,propertySchema:n}=e;if(void 0===o.viewsModuleContextStore.state)return!1;const r=null===(t=o.viewsModuleContextStore.getCurrentPageCollectionStore())||void 0===t?void 0:t.id;return!!r&&(0,d().nC)(n)&&n.collection_id===r}({collectionContextStore:f,propertySchema:F})),[f,F]),w=(0,s().s1)(A)?A.subfilter:A;return"text"===j?(0,s().YH)(w)?(0,fe.jsx)(it,{onChange:l,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:u,context:p,onClose:g,filter:w}):null:"relation"===j?(0,s().Pq)(w)?(0,fe.jsx)(mt,{schema:o,propertyFilter:t,parentStore:n,onChange:r,onClose:g,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:u,context:p,collectionViewId:h,queryStore:x,menuListStore:y,filter:w,allowCurrentPageInRelatedCollectionFilter:k}):null:"checkbox"===j?(0,s().Ui)(w)?(0,fe.jsx)(ct,{context:p,propertyFilter:t,schema:o,onChange:r,parentStore:n,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:u,onClose:g,menuListStore:y,filter:w,collectionContextStore:f}):null:"select"===j||"multi_select"===j?(0,s().v0)(w)||(0,s().as)(w)?(0,fe.jsx)(st,{schema:o,propertyFilter:t,parentStore:n,onChange:r,onClose:g,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:u,context:p,queryStore:x,menuListStore:y,filter:w,collectionContextStore:f}):null:"status"===j?(0,s().H$)(w)?(0,fe.jsx)(ve().A,{propertyFilter:t,schema:o,filter:w,parentStore:n,updateValue:e=>Ye(e,r,t),onClose:g,desktopTopActions:(0,fe.jsx)(ot,{propertyFilter:t,onChange:r,schema:o,parentStore:n,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:u,context:p}),mobileMenuTitle:(0,fe.jsx)(nt,{propertyFilter:t,schema:o,context:p,onChange:r,parentStore:n}),mobileMoreActions:(0,fe.jsx)(rt,{context:p,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:u}),collectionContextStore:f}):null:"person"===j?(0,s().I_)(w)?(0,fe.jsx)(ft,{parentStore:n,schema:o,propertyFilter:t,onChange:r,allowRelativePersonFilter:m,onClose:g,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:u,context:p,queryStore:x,menuListStore:y,filter:w}):null:"number"===j?(0,s().My)(w)?(0,fe.jsx)(lt,{onChange:l,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:u,context:p,onClose:g,filter:w}):null:"date"===j?(0,s().nM)(w)?(0,fe.jsx)(xt,{context:p,propertyFilter:t,schema:o,onChange:r,parentStore:n,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:u,onClose:g,allowRelativeDateFilter:v,dateFilterPopupStore:C,dateRangeFilterPopupStore:S,filter:w}):null:"file"===j?(0,s().B6)(w)?(0,fe.jsx)(yt,{onChange:r,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:u,context:p,onClose:g,filter:w}):null:"location"===j?(0,s().G)(w)?(0,fe.jsx)(me,{filter:w,parentStore:n,updateValue:e=>Ye(e,r,t),onClose:g,desktopTopActions:(0,fe.jsx)(ot,{propertyFilter:t,onChange:r,schema:o,parentStore:n,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:u,context:p}),mobileMenuTitle:(0,fe.jsx)(nt,{propertyFilter:t,schema:o,context:p,onChange:r,parentStore:n}),mobileMoreActions:(0,fe.jsx)(rt,{context:p,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:u})}):null:"verification"===j?(0,s().uU)(w)?(0,fe.jsx)(ht,{context:p,onChange:r,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:u,onClose:g,menuListStore:y,filter:w}):null:"geo_point"===j?null:void(0,M().HB)(j)}},903400:(e,t,o)=>{o.d(t,{i:()=>k});o(898992),o(354520),o(296540);var n=()=>o(484714),r=()=>o(56366),i=()=>o(401497),l=()=>o(668725),a=()=>o(959013),s=()=>o(720665),d=()=>o(205098),c=()=>o(972435),u=()=>o(722872),p=()=>o(463830),g=()=>o(760217),h=()=>o(406699),f=()=>o(285790),m=()=>o(419357),v=()=>o(928600),x=()=>o(939740),y=()=>o(864943),C=()=>o(14235),S=()=>o(89924),b=()=>o(125565),A=()=>o(272630),j=o(474848);function F(e){const{humanReadableLabel:t,placeholder:o,outlineButtonStyle:n,buttonWrapperStyle:r,renderAsQueryDropdown:a,events:s,isMobile:d}=e,c=(0,i().IS)((e=>({iconStyle:{...!d&&{height:12,width:12},color:e.mediumIconColor},textStyle:{marginLeft:6,color:e.regularTextColor}})),[d]);return a?(0,j.jsx)(A().A,{...s,placeholder:o,title:(0,j.jsx)(b().A,{isMobile:d,children:t}),disableMargins:!0}):(0,j.jsx)("div",{style:r,...s,children:(0,j.jsxs)(y().A,{size:d?"lg":void 0,style:n,children:[(0,j.jsx)("div",{style:c.textStyle,children:t}),(0,j.jsx)(f().A,{disableBackground:!0,icon:l().b,iconStyle:c.iconStyle})]})})}function k(e){const{onUpdate:t,filter:o,renderAsQueryDropdown:l}=e,f=(0,n().Y0)(),y=(0,a().tz)(),b=(0,r().uB)(void 0,p().A),A=(0,r().uB)(void 0,p().A),k="count"in o,w=(0,i().IS)((e=>({directionButtonStyle:{paddingLeft:4,paddingRight:4,width:"100%",justifyContent:"space-between",...f.isMobile&&{marginTop:12,width:"100%",paddingLeft:12,marginBottom:6}},unitButtonStyle:{paddingLeft:4,paddingRight:4,justifyContent:"space-between",width:"100%",...f.isMobile&&{paddingLeft:12,marginTop:6}},directionButtonWrapperStyle:{...f.isMobile&&{width:"100%"},flexGrow:1},unitButtonWrapperStyle:{...f.isMobile&&{width:"100%"},flexGrow:1},inputStyle:{minWidth:35,height:16},inputOuterStyle:{minWidth:60,height:32},container:{display:"flex",justifyContent:"start",alignItems:"center",flexDirection:f.isMobile?"column":"row",width:"100%",gap:8},textWrapper:{marginRight:6,marginLeft:l?16:6}})),[f.isMobile,l]);function M(e){return"this"===e?c().A.formatMessage(d().Cj[e]):c().A.formatMessage(d().zZ[e])}function D(e,t){return t&&t>1?c().A.formatMessage(d().o1[e]):c().A.formatMessage(d().EA[e])}const T=["day","week","month","year"].map((e=>({key:e,render:t=>(0,j.jsx)(g().A,{...t,title:D(e,k?o.count:void 0),checkState:e===o.unit}),action:n=>{t({...o,unit:e}),b.setState({open:!1})}}))),R=["past","future","this"].map((e=>({key:e,render:t=>(0,j.jsx)(g().A,{...t,checkState:"surrounding"===o.value?"this"===e:e===o.direction,title:M(e)}),action:n=>{"this"===e&&"custom"===o.value?t({type:"relative",value:"surrounding",unit:o.unit}):"this"!==e&&"surrounding"===o.value?t({type:"relative",value:"custom",count:1,direction:e,unit:o.unit}):"this"!==e&&"custom"===o.value&&t({...o,direction:e}),A.setState({open:!1})}})));return(0,j.jsxs)("div",{style:w.container,children:[(0,j.jsx)(h().Ay,{buttonPopupStore:A,popupType:f.isMobile?C().nl.SlideUp:C().nl.Popup,renderOrigin:e=>(0,j.jsx)(F,{events:e,placeholder:y.formatMessage(d().Ms.direction),renderAsQueryDropdown:l,isMobile:f.isMobile,outlineButtonStyle:w.directionButtonStyle,buttonWrapperStyle:w.directionButtonWrapperStyle,humanReadableLabel:M("direction"in o?o.direction:"this")}),render:()=>(0,j.jsx)(v().A,{menuType:f.isMobile?u().gu.ActionSheet:u().gu.Popup,children:(0,j.jsx)(x().Ay,{initialFocus:void 0,type:x().Oh.Vertical,sections:[{key:"directionOptions",render:e=>(0,j.jsx)(S().A,{disableMobilePadding:!0,...e}),items:R}]})})}),k&&(0,j.jsx)(m().Ay,{type:"number",style:w.inputStyle,textWrapperStyle:w.textWrapper,inputOuterStyle:w.inputOuterStyle,min:"1",value:o.count.toString(),onChange:e=>{const n=parseInt(e.target.value);!(0,s().Et)(n)||n<1||t({...o,count:n})}}),(0,j.jsx)(h().Ay,{buttonPopupStore:b,popupType:f.isMobile?C().nl.SlideUp:C().nl.Popup,renderOrigin:e=>(0,j.jsx)(F,{events:e,placeholder:y.formatMessage(d().Ms.unit),renderAsQueryDropdown:l,isMobile:f.isMobile,outlineButtonStyle:w.unitButtonStyle,buttonWrapperStyle:w.unitButtonWrapperStyle,humanReadableLabel:D(o.unit,"count"in o?o.count:void 0)}),render:()=>(0,j.jsx)(v().A,{menuType:f.isMobile?u().gu.ActionSheet:u().gu.Popup,children:(0,j.jsx)(x().Ay,{initialFocus:void 0,type:x().Oh.Vertical,sections:[{key:"unitOptions",render:e=>(0,j.jsx)(S().A,{disableMobilePadding:!0,...e}),items:T}]})})})]})}},914701:(e,t,o)=>{o.d(t,{E:()=>i});var n=()=>o(763884),r=()=>o(540022);function i(e){const t=(0,r().N)(e.collectionViewId);n().A.set({userId:e.userId,key:t,value:e.isOpen})}}}]);