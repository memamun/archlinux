"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[11097,92143],{22924:(e,t,o)=>{o.d(t,{A:()=>E});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(156275),l=()=>o(261164),d=o(474848);const c=(0,o(340498).wt)("plusRounded",{viewBox:"0 0 24 24",svg:(0,d.jsx)("path",{d:"M5.46094 11.8594C5.46094 12.1042 5.54688 12.3125 5.71875 12.4844C5.89062 12.651 6.09635 12.7344 6.33594 12.7344H11.125V17.5312C11.125 17.7656 11.2109 17.9688 11.3828 18.1406C11.5547 18.3125 11.7604 18.3984 12 18.3984C12.2448 18.3984 12.4531 18.3125 12.625 18.1406C12.7969 17.9688 12.8828 17.7656 12.8828 17.5312V12.7344H17.6641C17.9036 12.7344 18.1094 12.651 18.2812 12.4844C18.4531 12.3125 18.5391 12.1042 18.5391 11.8594C18.5391 11.6198 18.4531 11.4141 18.2812 11.2422C18.1094 11.0651 17.9036 10.9766 17.6641 10.9766H12.8828V6.19531C12.8828 5.95573 12.7969 5.75 12.625 5.57812C12.4531 5.40625 12.2448 5.32031 12 5.32031C11.7604 5.32031 11.5547 5.40625 11.3828 5.57812C11.2109 5.75 11.125 5.95573 11.125 6.19531V10.9766H6.33594C6.09635 10.9766 5.89062 11.0651 5.71875 11.2422C5.54688 11.4141 5.46094 11.6198 5.46094 11.8594Z"})});var u=()=>o(959013),h=()=>o(899963),p=()=>o(705540),f=()=>o(435009),w=()=>o(109488),g=()=>o(836251),v=()=>o(696746),m=()=>o(665579),C=()=>o(75993),S=()=>o(962730),y=()=>o(351360),k=()=>o(948914),b=()=>o(982254),x=()=>o(655438),j=()=>o(285790),T=()=>o(859428),M=()=>o(730591);const A=(0,u().YK)({tabSpacesButton:{id:"desktopTopbarBrowserHistoryButton.tabSpacesButton.label",defaultMessage:"Tab Spaces"}});function I(){var e;const t=(0,u().tz)(),{tabSpacesState:o}=(0,i().O$)(M().A),{activeTabSectionId:n,tabSpaces:r}=o,a=null===(e=r[n])||void 0===e?void 0:e.icon,s=()=>{p().tabSpacesState.toggleTabSpacesMenuOpen()};return(0,d.jsx)(T().A,{renderTooltip:()=>(0,d.jsx)("div",{style:{display:"flex"},children:t.formatMessage(A.tabSpacesButton)}),placement:S().W.Bottom,alignment:S().C.Center,originGap:6,render:e=>(0,d.jsx)(j().A,{ariaLabel:t.formatMessage(A.tabSpacesButton),icon:e=>a?(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px"},children:a}):(0,x()._)({...e,width:"16px",height:"16px"}),isDarkIconColor:!0,style:{position:"relative",width:24,height:24,marginRight:4},onClick:s,...e})})}var B=()=>o(35392);const _=(0,u().YK)({newTabButton:{id:"desktopTopbarBrowserHistoryButton.newTabButton.label",defaultMessage:"New tab"},goBackButton:{id:"desktopTopbarBrowserHistoryButtons.goBackButton.label",defaultMessage:"Go back"},goForwardButton:{id:"desktopTopbarBrowserHistoryButton.goForwardButton.label",defaultMessage:"Go forward"}}),E=function(e){let{showPlusButton:t=!0}=e;const n=(0,i().K8)((()=>o(712505).default.isCenterPeekOpen()),[]);return(0,d.jsx)(o(14235).Ay,{style:{background:"transparent",borderRadius:0,boxShadow:"none"},origin:(0,d.jsx)(H,{showPlusButton:t}),render:()=>(0,d.jsx)(H,{showPlusButton:t}),placementToOrigin:S().W.Center,alignmentToOrigin:S().C.Center,open:n,disableMouseCapture:!0,preventCaptureEsc:!0,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:o(377586).n.Popup})};function W(){const e=(0,u().tz)(),t=(0,i().K8)((()=>k().A.state.isTabPositionSupported),[]);return(0,d.jsx)(T().A,{renderTooltip:()=>(0,d.jsxs)("div",{style:{display:"flex"},children:[e.formatMessage(_.newTabButton),(0,d.jsx)(B().A,{name:"newTab",style:{opacity:.5,marginLeft:4}})]}),placement:S().W.Bottom,alignment:S().C.Center,originGap:6,render:o=>(0,d.jsx)(j().A,{ariaLabel:e.formatMessage(_.newTabButton),icon:e=>c({...e,width:"24px",height:"24px"}),isDarkIconColor:!0,className:"notion-new-tab-button",style:{position:"relative"},onClick:()=>p().newTab(t),...o})})}function R(e){let{isNavigationHistorySupported:t}=e;const o=(0,u().tz)(),i=(0,r().v3)(),a=(0,n.useCallback)((e=>(0,s().F)({...e,width:"16px",height:"16px"})),[]),l=!(0,g().MX)("back");return(0,d.jsx)(T().A,{renderTooltip:()=>(0,d.jsxs)("div",{style:{display:"flex"},children:[o.formatMessage(_.goBackButton),(0,d.jsx)(B().A,{name:"goBack",style:{opacity:.5,marginLeft:4}})]}),placement:S().W.Bottom,alignment:S().C.Center,originGap:6,render:e=>(0,d.jsx)(j().A,{ariaLabel:o.formatMessage(_.goBackButton),icon:a,isDarkIconColor:!0,className:"notion-history-back-button",disabled:l,style:{position:"relative",width:24,height:24,marginRight:4},onClick:e=>function(e,t,o){var n;h().Lt(t,{type:"back"});const r=e.metaKey||e.ctrlKey,i=null===(n=k().A.state.preferences)||void 0===n?void 0:n.isPinnedTabNewTabEnabled,a=b().A.state.currentTab.isPinned;o&&r?p().handleBackMetaClick():i&&a?p().handleBackPinnedClick():f().aX(t)}(e,i,t),onContextMenu:e=>{!l&&t&&p().handleTabHistoryMenu("back",e.clientX,e.clientY)},...e})})}function L(e){let{isNavigationHistorySupported:t}=e;const o=(0,u().tz)(),i=(0,r().v3)(),a=(0,n.useCallback)((e=>(0,l().o)({...e,width:"16px",height:"16px"})),[]),s=!(0,g().MX)("forward");return(0,d.jsx)(T().A,{renderTooltip:()=>(0,d.jsxs)("div",{style:{display:"flex"},children:[o.formatMessage(_.goForwardButton),(0,d.jsx)(B().A,{name:"goForward",style:{opacity:.5,marginLeft:4}})]}),placement:S().W.Bottom,alignment:S().C.Center,originGap:6,render:e=>(0,d.jsx)(j().A,{ariaLabel:o.formatMessage(_.goForwardButton),icon:a,isDarkIconColor:!0,className:"notion-history-forward-button",disabled:s,style:{position:"relative",width:24,height:24,marginRight:4},onClick:e=>function(e,t,o){var n;h().Lt(t,{type:"forward"});const r=e.metaKey||e.ctrlKey,i=null===(n=k().A.state.preferences)||void 0===n?void 0:n.isPinnedTabNewTabEnabled,a=b().A.state.currentTab.isPinned;o&&r?p().handleForwardMetaClick():i&&a?p().handleForwardPinnedClick():f().sY()}(e,i,t),onContextMenu:e=>{!s&&t&&p().handleTabHistoryMenu("forward",e.clientX,e.clientY)},...e})})}function H(e){let{showPlusButton:t}=e;const o=(0,i().K8)((()=>{var e;return(null===(e=k().A.state.preferences)||void 0===e?void 0:e.isNavigationHistoryEnabled)&&k().A.state.isNavigationHistorySupported}),[]),n=(0,i().K8)((()=>{const{mainEditorCurrentBlockStore:e}=y().default.state;return(0,v().lU)(e)}),[]),r=(0,i().O$)(C().A),s=(0,i().K8)((()=>{var e;return null===(e=k().A.state.preferences)||void 0===e?void 0:e.isTabSpacesEnabled}),[]),l=(0,a().IS)((e=>({container:{position:"relative",display:"flex",flexShrink:0,...n&&{padding:2,marginLeft:-2,marginRight:2}},homeBackground:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:r?0:1,...(0,m().Wh)({isPhone:!1,theme:e,buttonState:"base"}),width:"100%",height:"100%",borderRadius:6,transition:"opacity 0.2s"}})),[r,n]);return(0,d.jsx)(w().A,{capture:!0,render:e=>(0,d.jsxs)("div",{style:l.container,...e,children:[n&&(0,d.jsx)("div",{style:l.homeBackground}),s&&(0,d.jsx)(I,{}),(0,d.jsx)(R,{isNavigationHistorySupported:o}),(0,d.jsx)(L,{isNavigationHistorySupported:o}),t&&(0,d.jsx)(W,{})]})})}},69447:(e,t,o)=>{o.d(t,{Lq:()=>n,WK:()=>i,nh:()=>r});const n=40,r=48,i=60},70191:(e,t,o)=>{o.d(t,{E:()=>s,s:()=>l});o(296540);var n=()=>o(205127),r=()=>o(22924),i=()=>o(573792),a=o(474848);function s(e){const{isElectron:t,isShowingTabBar:o}=e;return t&&!o&&(0,a.jsx)(r().A,{})}function l(e){const{store:t,isInvalidPage:o}=e;return!o&&(0,a.jsx)(n().oK,{store:t,style:(0,i().lx)(),maxAncestorCount:2,ancestorMaxWidth:160,currentPageMaxWidth:240,showCurrentPageControls:!0,isMobile:!1})}},75993:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(757695).default.createValue(!0)},101209:(e,t,o)=>{o.d(t,{v:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("boltFilled",{svg:(0,n.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},156275:(e,t,o)=>{o.d(t,{F:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowLeftRounded",{viewBox:"0 0 16 13",svg:(0,n.jsx)("path",{d:"M0.617188 6.85156C0.617188 6.60677 0.710938 6.39323 0.898438 6.21094L6.03906 1.07812C6.13281 0.984375 6.23177 0.914062 6.33594 0.867188C6.4401 0.820312 6.54948 0.796875 6.66406 0.796875C6.90365 0.796875 7.10417 0.875 7.26562 1.03125C7.42708 1.1875 7.50781 1.38281 7.50781 1.61719C7.50781 1.74219 7.48438 1.85677 7.4375 1.96094C7.39062 2.0599 7.32812 2.14844 7.25 2.22656L5.5 4L2.59375 6.66406L2.3125 6.15625L5.02344 5.99219H14.5156C14.776 5.99219 14.9844 6.07292 15.1406 6.23438C15.3021 6.39062 15.3828 6.59635 15.3828 6.85156C15.3828 7.10156 15.3021 7.30729 15.1406 7.46875C14.9844 7.625 14.776 7.70312 14.5156 7.70312H5.02344L2.3125 7.54688L2.59375 7.04688L5.5 9.70312L7.25 11.4688C7.32812 11.5469 7.39062 11.638 7.4375 11.7422C7.48438 11.8464 7.50781 11.9583 7.50781 12.0781C7.50781 12.3125 7.42708 12.5078 7.26562 12.6641C7.10417 12.8203 6.90365 12.8984 6.66406 12.8984C6.4349 12.8984 6.22917 12.8099 6.04688 12.6328L0.898438 7.49219C0.710938 7.3099 0.617188 7.09635 0.617188 6.85156Z"})})},173019:(e,t,o)=>{o.d(t,{r:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("pencil",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},200562:(e,t,o)=>{o.d(t,{z:()=>i});var n=()=>o(645873);const r=new(n().O2)("topbarSidebarButton",(async()=>await o.e(62033).then(o.bind(o,304012)))),i=(0,n()._h)(r,(e=>e.TopbarSidebarButton))},224011:(e,t,o)=>{o.d(t,{A:()=>i});var n=()=>o(705540);class r extends(()=>o(757695))().default{getInitialState(){return{isFullScreen:window.outerWidth===window.screen.width&&window.outerHeight===window.screen.height}}constructor(){super(),this.updateFromElectronState=async()=>{const e=await n().fullscreen.get();void 0!==e&&this.setState({isFullScreen:e})},n().fullscreen.addListener(this.updateFromElectronState),this.updateFromElectronState()}}const i=new r},261164:(e,t,o)=>{o.d(t,{o:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowRightRounded",{viewBox:"0 0 16 13",svg:(0,n.jsx)("path",{d:"M15.3828 6.85156C15.3828 7.09635 15.2917 7.3099 15.1094 7.49219L9.95312 12.6328C9.77083 12.8099 9.5651 12.8984 9.33594 12.8984C9.09635 12.8984 8.89583 12.8203 8.73438 12.6641C8.57812 12.5078 8.5 12.3125 8.5 12.0781C8.5 11.9583 8.52083 11.8464 8.5625 11.7422C8.60938 11.638 8.67188 11.5469 8.75 11.4688L10.5 9.70312L13.4141 7.04688L13.6875 7.54688L10.9766 7.70312H1.48438C1.22396 7.70312 1.01302 7.625 0.851562 7.46875C0.695312 7.30729 0.617188 7.10156 0.617188 6.85156C0.617188 6.59635 0.695312 6.39062 0.851562 6.23438C1.01302 6.07292 1.22396 5.99219 1.48438 5.99219H10.9766L13.6875 6.15625L13.4141 6.66406L10.5 4L8.75 2.22656C8.67188 2.14844 8.60938 2.0599 8.5625 1.96094C8.52083 1.85677 8.5 1.74219 8.5 1.61719C8.5 1.38281 8.57812 1.1875 8.73438 1.03125C8.89583 0.875 9.09635 0.796875 9.33594 0.796875C9.45052 0.796875 9.5599 0.820312 9.66406 0.867188C9.76823 0.914062 9.86719 0.984375 9.96094 1.07812L15.1094 6.21094C15.2917 6.39323 15.3828 6.60677 15.3828 6.85156Z"})})},281401:(e,t,o)=>{o.d(t,{JK:()=>S,K6:()=>C,US:()=>y,aD:()=>T,c8:()=>j,i_:()=>m,lE:()=>x,mz:()=>b,p_:()=>k});var n=()=>o(819121),r=()=>o(427704),i=()=>o(798880),a=()=>o(452939),s=()=>o(705540),l=()=>o(729283),d=()=>o(780054),c=()=>o(753199),u=()=>o(731320),h=()=>o(299545),p=()=>o(351360),f=()=>o(948914),w=()=>o(508496),g=()=>o(630116),v=()=>o(172079);function m(e){const{store:t,environment:o}=e,n=p().default.state.currentSpaceStore,r=!t||(0,h()._C)(t),{id:a}=o.currentUser,s=a&&n?g().LU.createChildStore(n,{table:i().oo,id:a}):void 0,l=!s||s.isReady();return r&&l}function C(e,t){return!d().A.isAdminMode&&(0,u().qb)(t,e)}function S(){return w().default.checkGate({gateName:"sites_deprecate_edit_and_comment_top_bar"})}r().JZ.signup,r().JZ.product;async function y(e){const{environment:t,route:o,openInNewTab:n}=e;a().LT(t,{variant:"made_with_notion"}),await l().VE(t,{utmContent:"topbar_cta",nextRoute:o,openInNewTab:n})}async function k(e){const{environment:t,route:o,formId:n,spaceId:r,openInNewTab:i}=e;a().LT(t,{variant:"made_with_notion"}),await l()._q(t,{utmContent:"topbar_cta",nextRoute:o,formId:n,spaceId:r,openInNewTab:i})}function b(e){e.target!==e.currentTarget||f().A.state.isShowingTabBar||(0,c().SQ)({event:e,context:c().y$.EditorDoubleClick,callback:s().toggleMaximized})}function x(e){const t=e.target;t instanceof HTMLElement&&(0,n().p)(t)&&v().A.setState(!0)}function j(){v().A.setState(!1)}function T(e){return{iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",marginRight:14,color:e.icon.secondary,width:26},iconStyle:{height:26,width:26,fill:e.icon.primary}}}},282135:(e,t,o)=>{o.d(t,{V:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("connections",{viewBox:"0 0 16 14",svg:(0,n.jsx)("g",{children:(0,n.jsx)("path",{d:"M2.825 5.581A2.32 2.32 0 112.832.939a2.32 2.32 0 01-.007 4.642zm10.343 0A2.32 2.32 0 1113.175.94a2.32 2.32 0 01-.007 4.641zM2.825 4.331c.609 0 1.073-.473 1.073-1.074 0-.602-.464-1.067-1.073-1.067a1.05 1.05 0 00-1.06 1.067c0 .601.465 1.073 1.06 1.073zm10.343 0c.608 0 1.066-.473 1.066-1.074 0-.602-.458-1.067-1.066-1.067-.595 0-1.066.465-1.066 1.067a1.06 1.06 0 001.066 1.073zm-6.89-.466a.595.595 0 110-1.19.595.595 0 010 1.19zm1.722 0a.595.595 0 110-1.19.595.595 0 010 1.19zm1.723 0a.595.595 0 010-1.19.6.6 0 01.594.596.6.6 0 01-.594.594zm1.675 3.131a.594.594 0 01-.595-.588c0-.328.266-.595.595-.595a.592.592 0 010 1.183zm-6.795 0a.594.594 0 01-.595-.588.595.595 0 011.19 0 .594.594 0 01-.595.588zm5.502 1.429a.595.595 0 010-1.19.6.6 0 01.595.595.6.6 0 01-.595.595zm-4.21 0a.595.595 0 010-1.19.6.6 0 01.594.595.6.6 0 01-.594.595zM8 13.196a2.327 2.327 0 01-2.317-2.33 2.32 2.32 0 014.642 0A2.328 2.328 0 018 13.195zm0-1.258c.608 0 1.066-.471 1.066-1.073 0-.595-.458-1.06-1.066-1.06a1.05 1.05 0 00-1.066 1.06A1.06 1.06 0 008 11.938z"})})})},363186:(e,t,o)=>{o.d(t,{$O:()=>d,HH:()=>c,X9:()=>u,_o:()=>l});o(16280);var n=o(296540),r=()=>o(56366),i=()=>o(890754),a=()=>o(847),s=o(474848);const l=(0,n.createContext)(null);function d(){const e=(0,n.useContext)(l);if(!e)throw new Error("useWorkflowEditorContext must be used inside WorkflowEditorContextProvider");return e}function c(){return(0,n.useContext)(l)??void 0}l.displayName="WorkflowEditorContext";const u=n.memo((function(e){let{children:t,store:d}=e;const c=(0,o(484714).v3)(),u=(0,o(424141).y)(d),h=o(985554).K,p=(0,i().useChatSidebarState)(),f=(null==p?void 0:p.chatThreadId)!==i().NEW_CHAT_THREAD_ID?null==p?void 0:p.chatThreadId:void 0,w=null==p?void 0:p.workflowStepId,g=(0,r().K8)((()=>{const{currentSpaceStore:e}=o(351360).default.state;if(e&&f)return o(630116).Ei.createChildStore(e,{table:o(234459).To,id:f,spaceId:e.id})}),[f]),v=(0,n.useCallback)((async e=>{var t;const{threadId:n,stepId:r}=e;if(n===f&&r===w)return;if(g&&"update"===(null===(t=(0,o(900535).t)({threadStore:g,workflowStore:u,clientStore:h,focusedWorkflowStepId:w}))||void 0===t?void 0:t.type)){const{accept:e}=await o(901389).Gh({message:"You have unsaved changes",description:"You can return to this chat to resume editing.",acceptLabel:"Continue without saving",cancelLabel:"Cancel"});if(!e)return}(0,o(118078).openChatSidebar)({environment:c,chatThreadId:n,workflowStepId:r})}),[f,w,g,u,h,c]),m=(0,r().K8)((()=>{if(o(508496).default.checkGate({gateName:"workflows_simple_mode"})){return{type:"simple-workflow"}}return{type:"workflow",workflowBlockId:d.id}}),[d]),C=(0,n.useCallback)((e=>{if(!u)throw new Error("Cannot save trigger without a workflow store");const t=a().saveTrigger({workflowStore:u,trigger:e,environment:c,threadStore:g,clientStore:h});v({threadId:t})}),[h,c,v,g,u]),S=(0,n.useCallback)((e=>{if(!u)throw new Error("Cannot save trigger without a workflow store");const t=a().saveTriggers({workflowStore:u,triggers:e,environment:c,threadStore:g,clientStore:h});v({threadId:t})}),[h,c,v,g,u]),y=(0,n.useCallback)((e=>{if(!u)throw new Error("Cannot save module without a workflow store");const t=a().saveModule({workflowStore:u,module:e,environment:c,threadStore:g,clientStore:h});v({threadId:t})}),[h,c,v,g,u]),k=(0,n.useCallback)((e=>{if(!u)throw new Error("Cannot add module without a workflow store");const t=a().addModule({workflowStore:u,module:e,environment:c,threadStore:g,clientStore:h});v({threadId:t})}),[h,c,v,g,u]),b=(0,n.useCallback)((e=>{const{functionStore:t,fn:o}=e;if(!u)throw new Error("Cannot save function without a workflow store");const n=a().saveFunction({functionStore:t,fn:o,environment:c,threadStore:g,clientStore:h,workflowStore:u});v({threadId:n})}),[h,c,v,g,u]),x=(0,n.useCallback)((e=>{const{functionStore:t,test:o}=e;if(!u)throw new Error("Cannot save test without a workflow store");const n=a().saveTest({functionStore:t,environment:c,test:o,threadStore:g,clientStore:h,workflowStore:u});v({threadId:n})}),[h,c,v,g,u]),j=(0,n.useMemo)((()=>({store:d,workflowStore:u,threadStore:g,clientStore:h,saveTrigger:C,saveTriggers:S,saveModule:y,addModule:k,saveFunction:b,saveTest:x,config:m,onThreadChange:v})),[h,m,C,S,y,k,b,x,d,g,u,v]);return(0,s.jsx)(l.Provider,{value:j,children:t})}))},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>_,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>b,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>k,MAX_RECURRENCE_INTERVAL:()=>v,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>m,RRULE_WEEKDAYS_MAP:()=>g,adjustedStartDateIfPossible:()=>j,areRecurrenceSchedulesEqual:()=>H,convertFromUnpersistedRecurrenceConfig:()=>L,convertToUnpersistedRecurrenceConfig:()=>E,getFormattedEndCondition:()=>B,getFormattedNextRecurrenceTime:()=>I,getNewEndTimestamp:()=>W,getNextDateUtc:()=>A,getRecurrenceAfter:()=>T,isRunningBetweenMidnightAnd3AM:()=>M,isValidRecurrenceInterval:()=>C,isValidRecurrenceNumberOfRuns:()=>S,rruleFromRecurrence:()=>y,templateAncestorsViolateRecurrenceNesting:()=>x});o(898992),o(354520),o(581454);var n=()=>o(244641);o(944114);function r(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];if(0===o.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...r(o[0],...o.slice(1)).map((e=>[a,...e])));return i}var i=()=>o(496603),a=()=>o(534177),s=()=>o(720665),l=()=>o(597777),d=()=>o(869190),c=()=>o(416504),u=()=>o(402390);class h extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>o(912720);const f=(0,o(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),w={day:h.DAILY,week:h.WEEKLY,month:h.MONTHLY,year:h.YEARLY},g={MO:h.MO,TU:h.TU,WE:h.WE,TH:h.TH,FR:h.FR,SA:h.SA,SU:h.SU},v=99,m=999;function C(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function S(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=m}function y(e){const{start_date:t,frequency:o,interval:n,weekdays:i,timezone:s,hour:d,minute:c}=e,u="week"===o&&i?i.map((e=>g[e])):void 0,p={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?p.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?p.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?p.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?p.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,o]=e;return g[t].nth(o)})):(0,a().HB)(e.monthly_restriction)),new h({freq:w[o],dtstart:(0,l().eU)(t),interval:n,byweekday:u,tzid:s,byhour:d??0,byminute:c??0,bysecond:0,...p})}const k=1,b=1;function x(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=n>k,a=o.length>=b;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:r}}function j(e){var t;const{recurrence:o,afterDate:r}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=r)return o;let i=n().c9.fromMillis(o.start_date,{zone:"utc"});const a=n().c9.fromMillis(r,{zone:"utc"});switch(o.frequency){case"year":{const e=Math.floor(a.diff(i,"years").years/o.interval);i=i.plus({years:e*o.interval});break}case"month":{const e=Math.floor(a.diff(i,"months").months/o.interval);i=i.plus({months:e*o.interval});break}case"week":{const e=Math.floor(a.diff(i,"weeks").weeks/o.interval);i=i.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(a.diff(i,"days").days/o.interval);i=i.plus({days:e*o.interval});break}}return{...o,start_date:(0,l().DH)(i.toMillis())}}function T(e){const{recurrence:t,afterDate:o}=e;if((0,p().wt)(t)){const e=(0,l().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=y(j({recurrence:t,afterDate:o})).after((0,l().eU)(o));if(!e)return;return(0,l().h1)(e)}}function M(e){return 0===e.hour||1===e.hour||2===e.hour}function A(e){return y(e).after((0,l().eU)((0,l().Rz)()))||void 0}function I(e){const{recurrence:t,intl:o}=e,r=A(L(t));if(!r)return;const i=M(t),a=n().c9.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(o)).setZone(t.timezone),s=(0,d().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(i)return o.formatMessage(f.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(n().c9.TIME_SIMPLE);return t.timezone!==(0,c().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),o.formatMessage(f.dateAtTime,{date:s,time:e})}}function B(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(f.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,d().Yq)({date:n().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(f.noEndCondition)}const _=100;function E(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function W(e,t,o){return e.plus(o-t)}function R(e,t){const o=n().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(o.toJSDate())}}function L(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?R(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function H(e,t){const o=i().fN(e,(e=>void 0!==e)),n=i().fN(t,(e=>void 0!==e));return i().n4(o,n)}},424141:(e,t,o)=>{o.d(t,{y:()=>a});var n=()=>o(56366),r=()=>o(743246),i=()=>o(630116);function a(e){return(0,n().K8)((()=>{var t;if(!e)return;const o=null===(t=e.getFormat())||void 0===t?void 0:t.workflow_id;return o?i().NU.createChildStore(e,{table:r().C0,id:o,spaceId:e.getSpaceId()}):void 0}),[e])}},513685:(e,t,o)=>{o.d(t,{N:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("commentReply",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M11.2324 7.2832C11.2324 4.95117 9.66211 3.33984 7.00195 3.33984H3.32227L1.96875 3.4043L2.99414 2.53711L4.48242 1.08398C4.59961 0.972656 4.67578 0.826172 4.67578 0.632812C4.67578 0.263672 4.41797 0 4.03711 0C3.87305 0 3.69141 0.0761719 3.5625 0.199219L0.205078 3.50977C0.0703125 3.63867 0 3.81445 0 3.99609C0 4.17188 0.0703125 4.34766 0.205078 4.47656L3.5625 7.78711C3.69141 7.91016 3.87305 7.98633 4.03711 7.98633C4.41797 7.98633 4.67578 7.72266 4.67578 7.35352C4.67578 7.16016 4.59961 7.01953 4.48242 6.90234L2.99414 5.44922L1.96875 4.58789L3.32227 4.64648H7.03125C8.90625 4.64648 9.94336 5.71289 9.94336 7.23633C9.94336 8.75977 8.90625 9.87305 7.03125 9.87305H5.66016C5.27344 9.87305 4.99805 10.166 4.99805 10.5234C4.99805 10.8809 5.27344 11.1738 5.66602 11.1738H7.07812C9.69141 11.1738 11.2324 9.63281 11.2324 7.2832Z"})})},573792:(e,t,o)=>{o.d(t,{DW:()=>a,R1:()=>s,lx:()=>i});var n=()=>o(418135),r=()=>o(175947);function i(){return{height:"100%",flexGrow:0,marginRight:8,fontSize:14,minWidth:0}}function a(e){let{environment:t,isShowingTabBar:o,shouldShowSidebar:i,isSidebarExpanded:a,isSecondarySidebarVisible:s,isBrowserFullScreen:l,shouldRenderTemplateGalleryTopbar:d,allowOverflow:c,isFloatingPersonalHomeTopbar:u,zoom:h}=e;const{device:p}=t,f=p.isElectronMac&&(!i||!a&&!s)&&!l&&!o,w=p.isElectronWindows&&!o,g=w&&(!i||!a&&!s);let v=r().ek(p.isElectronMac);return d?v=r().Hi:u&&(v=r().$C),{display:"flex",justifyContent:"space-between",alignItems:"center",overflow:c?"visible":"hidden",height:v,paddingLeft:f?(0,n().JT)(h):g?46:p.isMobile?4:12,paddingRight:w?(0,n().WS)(h)+4:p.isMobile?4:10}}function s(e){return{flex:"none",width:1,height:16,marginLeft:8,marginRight:8,background:e.darkDividerColor}}},575127:(e,t,o)=>{o.d(t,{c:()=>p});var n=()=>o(513685),r=()=>o(282135),i=()=>o(648403),a=()=>o(366295),s=()=>o(147588),l=()=>o(313784),d=()=>o(901497),c=()=>o(91451),u=()=>o(751109),h=()=>o(654601);function p(e){return"database"===e.type?i().H:"slack"===e.type?u().z:"search"===e.type?d().J:"users"===e.type?c().z:"agent"===e.type?a().L:"recurrence"===e.type?l().S:"files"===e.type?s().Y:"ai"===e.type?h().X:"discussions"===e.type?n().N:r().V}},627238:(e,t,o)=>{o.r(t),o.d(t,{WorkflowEditorTabs:()=>ne,WorkflowEditorTopbar:()=>te});o(898992),o(354520),o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(20039),l=()=>o(84817),d=()=>o(704152),c=()=>o(554509),u=()=>o(13679),h=()=>o(281401),p=()=>o(70191),f=()=>o(863059),w=()=>o(200562),g=()=>o(963589),v=()=>o(644914),m=()=>o(948914),C=()=>o(691093),S=()=>o(564037),y=()=>o(776690),k=()=>o(363186),b=()=>o(952972),x=()=>o(869190),j=()=>o(187174),T=o(474848);const M={viewBox:"0 0 20 20",svg:(0,T.jsx)("path",{d:"M9.558 1.558a.625.625 0 0 1 .884 0l.003.003 5.247 5.247a.625.625 0 1 1-.884.884L10 2.884 5.192 7.692a.625.625 0 1 1-.884-.884zm-.001 16.883-5.249-5.249a.625.625 0 0 1 .884-.884L10 17.116l4.808-4.808a.625.625 0 1 1 .884.884l-5.245 5.245-.005.005a.625.625 0 0 1-.885 0"})},A=(0,o(340498).wt)("arrowChevronDoubleUpAndDown",M);var I=()=>o(918676),B=()=>o(402390),_=()=>o(921997),E=()=>o(758256),W=()=>o(100622),R=()=>o(284371),L=()=>o(959013),H=()=>o(449506),P=()=>o(582524),D=()=>o(464708),z=()=>o(493823),N=()=>o(760217),U=()=>o(406699),V=()=>o(331542),O=()=>o(928600),K=()=>o(939740),F=()=>o(89924),Z=()=>o(777092),$=()=>o(722872),Y=()=>o(941541),G=()=>o(630116),q=()=>o(94522);function X(e){const{version:t,isStandalone:o=!1}=e,n=(0,a().IS)((e=>({container:{display:"flex",gap:4,alignItems:"center"},standalone:{marginRight:8},versionText:{whiteSpace:"nowrap"}})),[]);return(0,T.jsx)("span",{style:n.versionText,children:(0,T.jsx)(c().D,{styleName:"UIRegular-14px/Medium",colorName:"primary",style:{...n.container,...o&&n.standalone},children:(0,T.jsx)(L().sA,{defaultMessage:"Version {version}",id:"workflow.versionPicker.version",values:{version:t}})})})}function J(){const{store:e,workflowStore:t,clientStore:o,threadStore:s,onThreadChange:l}=(0,k().$O)(),d=(0,a().IS)((e=>({title:{color:e.text.primary,maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},checkIcon:{width:14},chevronDownIcon:{width:12,marginLeft:4,fill:e.mediumIconColor,flexShrink:0},loadingStateContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",gap:8,padding:32},clockIcon:{width:24,opacity:.2}})),[]),{artifactIds:c,status:u}=function(e){const{store:t}=e,o=(0,r().v3)(),[i,a]=(0,n.useState)([]),[{status:s},l]=(0,j().Yb)((async()=>{const e=t.pointer.spaceId;if(!e)return;const n=await H().callApi({eventName:"getWorkflowVersions",environment:o,data:{parentPointer:{...t.pointer,spaceId:e}}});"failed"!==n.type&&a(n.data.artifact_ids)}),[t.pointer,o]);return(0,n.useEffect)((()=>{let e=!1;const n=Y().Ay.addListener((0,_().Ch)(t.pointer.id),void 0,(()=>{e?l():e=!0}),void 0,o);return function(){n&&Y().Ay.removeListener(n,o)}}),[o,l,t.pointer.id]),{artifactIds:i,status:s}}({store:e}),h=(0,i().K8)((()=>{var e;return null==t||null===(e=t.getData())||void 0===e||null===(e=e.versionPointer)||void 0===e?void 0:e.id}),[t]),p=(0,n.useCallback)((()=>(0,T.jsx)("div",{style:d.loadingStateContainer,children:(0,T.jsx)(V().A,{})})),[d.loadingStateContainer]),f=(0,n.useCallback)((()=>(0,T.jsx)("div",{style:d.loadingStateContainer,children:(0,I().y)(d.clockIcon)})),[d.loadingStateContainer,d.clockIcon]),w=(0,n.useCallback)((t=>{const n=e=>{t.close(),(0,P().Wq)({clientStore:o}),null==l||l(e)};return"pending"===u?[{key:"loading",render:e=>(0,T.jsx)(F().A,{...e,shouldShowBottomDivider:!1}),items:[{key:"loading-item",action:()=>{},render:()=>(0,T.jsx)(p,{})}]}]:c&&0!==c.length?[{key:"versions",render:e=>(0,T.jsx)(F().A,{...e}),items:c.map((t=>({key:t,action:()=>{},render:o=>(0,T.jsx)(Q,{store:e,artifactId:t,menuItemProps:o,handleThreadClick:n,publishedVersionArtifactId:h})})))}]:[{key:"empty",render:e=>(0,T.jsx)(F().A,{...e}),items:[{key:"empty-item",action:()=>{},render:()=>(0,T.jsx)(f,{})}]}]}),[u,c,p,f,e,o,l,h]),g=(0,r().v3)(),v=(0,i().K8)((()=>{var n,r;const i=null===(n=(0,q().n2)({workflowStore:t,clientStore:o,threadStore:s,environment:g}))||void 0===n?void 0:n.versionPointer;if(!i)return;const a=G().je.createChildStore(e,i);if(!a)return;const l=a.isVersion()?null===(r=a.getData())||void 0===r?void 0:r.version:void 0;return void 0===l?(0,T.jsx)(V().A,{size:"sm"}):l}),[t,s,e,o,g]);return v?c.length<=1?(0,T.jsx)(X,{version:v,isStandalone:!0}):(0,T.jsx)(U().Ay,{popupType:U().z7.Popup,placementToOrigin:U().sx.Bottom,alignmentToOrigin:U().yP.End,originGap:4,renderOrigin:e=>(0,T.jsxs)(z().p,{ariaLabel:"versions",...e,size:"lg",children:[(0,T.jsx)(X,{version:v}),(0,T.jsx)(T.Fragment,{children:A(d.chevronDownIcon)})]}),render:e=>(0,T.jsx)(O().A,{menuType:$().gu.Popup,width:300,children:(0,T.jsx)(K().Ay,{type:K().Oh.Vertical,initialFocus:0,sections:w(e)})})}):null}function Q(e){const{store:t,artifactId:o,menuItemProps:n,handleThreadClick:r,publishedVersionArtifactId:a}=e,s=(0,i().K8)((()=>{const e=t.pointer.spaceId;if(e)return G().je.createChildStore(t,{table:E().U6,id:o,spaceId:e})}),[t,o]),d=(0,i().K8)((()=>{if(s)return s.isVersion()?s.getData():void 0}),[s]),u=null==d?void 0:d.threadMessagePointer,h=(0,i().K8)((()=>{if(!u)return;const e=G().XV.createChildStore(t,u);return e?e.getParentId():void 0}),[t,u]),p=(0,i().K8)((()=>{if(null!=d&&d.savedByActorPointer)return(0,Z().JQ)({parentStore:t,pointer:d.savedByActorPointer})}),[t,null==d?void 0:d.savedByActorPointer]),f=(0,i().K8)((()=>{const e=null!=d&&d.version?`Version ${d.version}`:"Older version",t=o===a;return null!=d&&d.savedAt?(0,T.jsxs)(l().Y1,{direction:"horizontal",gap:8,align:"center-left",children:[(0,T.jsx)(c().D,{styleName:"UIMedium-13px/Medium",colorName:"primary",children:e}),t&&(0,T.jsx)(ee,{})]}):(0,T.jsx)(c().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",children:e})}),[o,a,null==d?void 0:d.savedAt,null==d?void 0:d.version]),w=(0,L().tz)(),g=(0,i().K8)((()=>{if(null==d||!d.savedAt)return null;const e=(0,x().jE)(d.savedAt,(0,B().H)(w),w,void 0,"medium_with_time"),t=null==p?void 0:p.getDisplayName(w),o=t?`${t} published ${e}`:`Published ${e}`;return(0,T.jsx)(c().D,{styleName:"UISmall-12px/Regular",colorName:"tertiary",children:o})}),[null==d?void 0:d.savedAt,p,w]);return u&&h?(0,T.jsx)(N().A,{...n,title:f,caption:g,onClick:()=>r({stepId:u.id,threadId:h})}):null}function ee(){const e=(0,a().IS)((e=>({badge:{fontWeight:R().Wy.medium,letterSpacing:0,fontSize:11,color:e.blueColor,background:"light"===e.mode?W().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content",textTransform:"uppercase"}})),[]);return(0,T.jsx)(D().A,{style:e.badge,content:(0,T.jsx)(L().sA,{id:"publishedBadge.label",defaultMessage:"Published"})})}function te(e){const{store:t,isElectron:o,shouldRenderTemplateGalleryTopbar:n,showSidebarButton:a,handleClickTopbar:s,handleMouseDown:l}=e,d=(0,r().v3)(),{isShowingTabBar:c}=(0,i().O$)(m().A),g=(0,i().K8)((()=>(0,v().Uh)(d)),[d]),C=(0,f().Kh)({shouldRenderTemplateGalleryTopbar:n});return t?(0,T.jsx)(u().A,{store:t,disableRectangularSelection:!0,disableEditNearestBlock:!0,render:()=>(0,T.jsxs)("div",{role:"menubar",tabIndex:0,style:{...C,width:g},onClick:s,onMouseDown:l,onDoubleClick:h().mz,children:[a&&(0,T.jsx)(w().z,{}),(0,p().E)({isElectron:o,isShowingTabBar:c}),(0,T.jsx)(k().X9,{store:t,children:(0,T.jsx)(oe,{})})]})}):null}function oe(){const{store:e}=(0,k().$O)(),t=(0,S().useWorkflowNavigationState)();return t?(0,T.jsxs)(l().Y1,{direction:"horizontal",gap:"auto",align:"center",children:[(0,T.jsx)(l().Y1,{width:140,direction:"horizontal",align:"center-left",children:(0,T.jsx)(c().D,{styleName:"UIRegular-14px/Regular",children:(0,T.jsx)(s().A,{store:e,maxWidth:140,ignoreMaxLength:!1})})}),(0,T.jsx)(l().Y1,{width:"fill",direction:"horizontal",align:"center",children:(0,T.jsx)(ne,{store:e,navigationState:t})}),(0,T.jsxs)(l().Y1,{width:140,direction:"horizontal",align:"center-right",gap:6,children:[(0,T.jsx)(J,{}),(0,T.jsx)(b().G,{})]})]}):null}function ne(e){const{navigationState:t,store:o}=e,s=(0,r().v3)(),u=(0,a().IS)((e=>({container:{backgroundColor:e.accentColors.translucentGray[100]},tab:{padding:"0 24px",borderRadius:8,height:"100%",gap:6,display:"flex",alignItems:"center",justifyContent:"center"},selectedTab:{background:e.buttonBackground},divider:{width:1,background:e.outlineButtonBorder}})),[]),{workflowStore:h,threadStore:p}=(0,k().$O)(),f=(0,y().J)(),w=(0,i().K8)((()=>void 0!==(null==f?void 0:f.views)&&f.views.length>0||o.getCollectionViewStores().length>0),[f,o]),v=void 0!==(null==f?void 0:f.functionPointers)&&f.functionPointers.length>0,m=(0,g().X)("workflows_debug_tools"),S=(0,n.useMemo)((()=>[{label:"Preview",navigationState:{type:"preview"},isVisible:w??!1,isSelected:e=>"preview"===e.type},{label:"Settings",navigationState:{type:"configure"},isVisible:!0,isSelected:e=>"preview"!==e.type&&"runs"!==e.type&&"debug"!==e.type},{label:"Activity",navigationState:{type:"runs"},isVisible:v,isSelected:e=>"runs"===e.type},{label:"Debug",navigationState:{type:"debug"},isVisible:m,isSelected:e=>"debug"===e.type}].filter((e=>e.isVisible))),[w,v,m]),b=(0,n.useCallback)((e=>{(0,C().updateWorkflowNavigationState)({environment:s,navigationState:e.navigationState})}),[s]),x=(0,i().K8)((()=>!(h&&!h.isReady())&&(!(p&&!p.isReady())&&!!o.isReady())),[h,p,o]);return(0,n.useEffect)((()=>{x&&(w||"preview"!==t.type||(0,C().updateWorkflowNavigationState)({environment:s,navigationState:{type:"configure"},redirect:!0}))}),[w,t.type,s,x]),S.length<2?null:(0,T.jsx)(l().Y1,{direction:"horizontal",width:"hug",align:"top-center",height:32,borderRadius:10,padding:2,style:u.container,children:S.map((e=>{const o=e.isSelected(t);return(0,T.jsx)(l().Y1,{direction:"horizontal",width:"hug",height:"fill",align:"center",gap:6,children:(0,T.jsx)(d().A,{style:{...u.tab,...o?u.selectedTab:{}},onClick:()=>b(e),"aria-selected":o,children:(0,T.jsx)(c().D,{styleName:"UIMedium-13px/Medium",colorName:o?"primary":"secondary",children:e.label})})},e.label)}))})}},648403:(e,t,o)=>{o.d(t,{H:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("databaseOutline",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.98145 15.3584C4.38574 15.3584 2 13.9775 2 12.0088V3.78516C2 1.9873 4.39258 0.763672 7.98145 0.763672C11.5771 0.763672 13.9697 1.9873 13.9697 3.78516V12.0088C13.9697 13.9775 11.584 15.3584 7.98145 15.3584ZM7.98145 5.58301C10.7773 5.58301 12.6709 4.83105 12.6709 3.78516C12.6709 2.69141 10.7842 1.91895 7.98145 1.91895C5.18555 1.91895 3.29883 2.69141 3.29883 3.78516C3.29883 4.83105 5.19238 5.58301 7.98145 5.58301ZM7.98145 6.80664C5.97852 6.80664 4.35156 6.42383 3.29883 5.77441V8.69336C4.42676 9.37695 6.19043 9.81445 7.98145 9.81445C9.7793 9.81445 11.543 9.37695 12.6709 8.69336V5.77441C11.6182 6.42383 9.99121 6.80664 7.98145 6.80664ZM7.98145 11.0449C6.23828 11.0449 4.5293 10.6621 3.29883 10.0332V12.0088C3.29883 13.2051 5.11035 14.1348 7.98145 14.1348C10.8594 14.1348 12.6709 13.2051 12.6709 12.0088V10.0332C11.4404 10.6621 9.73145 11.0449 7.98145 11.0449Z"})})},655438:(e,t,o)=>{o.d(t,{_:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("historyStack",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.19458 15.0034C2.48267 15.0034 1.94434 14.8232 1.57959 14.4629C1.21484 14.1025 1.03247 13.5686 1.03247 12.8611V6.08472C1.03247 5.3772 1.21484 4.84326 1.57959 4.48291C1.94434 4.12256 2.48267 3.94238 3.19458 3.94238H12.7988C13.5107 3.94238 14.0491 4.12476 14.4138 4.4895C14.783 4.84985 14.9675 5.38159 14.9675 6.08472V12.8611C14.9675 13.5642 14.783 14.0959 14.4138 14.4563C14.0491 14.821 13.5107 15.0034 12.7988 15.0034H3.19458ZM3.27368 13.7114H12.7197C13.0229 13.7114 13.2559 13.6301 13.4185 13.4675C13.5854 13.3093 13.6689 13.0698 13.6689 12.749V6.19678C13.6689 5.87598 13.5854 5.63647 13.4185 5.47827C13.2559 5.31567 13.0229 5.23438 12.7197 5.23438H3.27368C2.96606 5.23438 2.73096 5.31567 2.56836 5.47827C2.41016 5.63647 2.33105 5.87598 2.33105 6.19678V12.749C2.33105 13.0698 2.41016 13.3093 2.56836 13.4675C2.73096 13.6301 2.96606 13.7114 3.27368 13.7114ZM2.48267 2.86792C2.53101 2.55591 2.63867 2.31421 2.80566 2.14282C2.97705 1.97144 3.23853 1.88574 3.59009 1.88574H12.4099C12.7615 1.88574 13.0208 1.97144 13.1877 2.14282C13.3591 2.31421 13.469 2.55591 13.5173 2.86792H2.48267ZM3.82739 0.962891C3.84497 0.668457 3.93945 0.446533 4.11084 0.297119C4.28662 0.143311 4.53271 0.0664062 4.84912 0.0664062H11.1509C11.4673 0.0664062 11.7112 0.143311 11.8826 0.297119C12.054 0.446533 12.1528 0.668457 12.1792 0.962891H3.82739Z"})})},665579:(e,t,o)=>{o.d(t,{$E:()=>A,$L:()=>s,BZ:()=>c,EC:()=>f,EI:()=>S,Ed:()=>h,Fq:()=>v,Lu:()=>k,Mk:()=>p,O0:()=>T,UO:()=>I,V$:()=>j,VQ:()=>w,Wh:()=>b,Xx:()=>y,Xy:()=>d,YS:()=>g,_g:()=>C,dd:()=>u,pW:()=>l,q3:()=>a,wH:()=>i});var n=()=>o(496603),r=()=>o(534177);const i=160,a=40,s=24,l=20,d=600,c=270,u=405,h=480,p=500,f=void 0,w=16,g=10,v=8,m=(o(69447).nh,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),C=4;function S(e){return{icon:e.mediumIconColor,text:e.mediumTextColor}}function y(e){return{width:48,height:48,fill:e.lightIconColor}}function k(e){let{theme:t,isPhone:o}=e;return o?t.personalHomeBackgroundPhone:t.surface.page}function b(e){let{theme:t,isPhone:o,buttonState:n}=e,r=t.whiteButtonBackground;switch(n){case"hovered":r=t.whiteButtonHoveredBackground;break;case"pressed":r=t.whiteButtonPressedBackground}return o&&(r=void 0),{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",background:r,...m,boxShadow:M({isPhone:o,theme:t,borderOnly:!0}),width:28,height:28,borderRadius:4}}const x=1;function j(e){let{isPhone:t,theme:o}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:o.home.tile.background,boxShadow:M({isPhone:t,theme:o}),...m}}function T(e){let{mode:t,isPhone:o}=e;switch(t){case"dark":return 0;case"light":return x;default:return(0,r().ub)(t),0}}function M(e){let{isPhone:t,theme:o,borderOnly:r}=e;if("dark"===o.mode)return"unset";o.mode;const i=T({mode:o.mode,isPhone:t});return(0,n().oE)([r||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${i}px rgba(0, 0, 0, 0.05)`]).join(", ")}function A(e){return{display:"flex",flexDirection:"column",width:e.isPhone?"100%":700,gap:24}}function I(e){const{isPhone:t,theme:o,borderOnly:n}=e;return{unhoveredBoxShadow:M({isPhone:t,theme:o,borderOnly:n}),hoveredBoxShadow:"light"===o.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):o.homeShadow.card.hovered}}},730591:(e,t,o)=>{o.d(t,{A:()=>i});const n=[];class r extends(()=>o(757695))().default{getInitialState(){return{open:!1,tabSpacesState:{tabSpaces:{},orderedTabSpaceIds:n,ungroupedTabCount:0,activeTabSectionId:"ungrouped"}}}}const i=new r},751109:(e,t,o)=>{o.d(t,{z:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("slackLogo",{viewBox:"0 0 16 16",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M1.68078 11.7915C2.60586 11.7915 3.36156 11.0358 3.36156 10.1107V8.42993H1.68078C0.755701 8.42993 0 9.18563 0 10.1107C0 11.0358 0.755701 11.7915 1.68078 11.7915Z",fill:"#E01E5A"}),(0,n.jsx)("path",{d:"M5.88928 8.42993C4.9642 8.42993 4.2085 9.18563 4.2085 10.1107V14.3192C4.2085 15.2443 4.9642 16 5.88928 16C6.81436 16 7.57006 15.2443 7.57006 14.3192V10.1107C7.57006 9.18563 6.81436 8.42993 5.88928 8.42993Z",fill:"#E01E5A"}),(0,n.jsx)("path",{d:"M4.2085 1.68078C4.2085 2.60586 4.9642 3.36156 5.88928 3.36156H7.57006V1.68078C7.57006 0.755701 6.81436 0 5.88928 0C4.9642 0 4.2085 0.755701 4.2085 1.68078Z",fill:"#36C5F0"}),(0,n.jsx)("path",{d:"M7.57003 5.88928C7.57003 4.9642 6.81433 4.2085 5.88925 4.2085H1.68078C0.755701 4.2085 0 4.9642 0 5.88928C0 6.81436 0.755701 7.57006 1.68078 7.57006H5.88925C6.81433 7.57006 7.57003 6.81436 7.57003 5.88928Z",fill:"#36C5F0"}),(0,n.jsx)("path",{d:"M10.1107 7.57003C11.0358 7.57003 11.7915 6.81433 11.7915 5.88925V1.68078C11.7915 0.755701 11.0358 0 10.1107 0C9.18563 0 8.42993 0.755701 8.42993 1.68078V5.88925C8.42993 6.81433 9.18563 7.57003 10.1107 7.57003Z",fill:"#2EB67D"}),(0,n.jsx)("path",{d:"M14.3192 4.2085C13.3941 4.2085 12.6384 4.9642 12.6384 5.88928V7.57006H14.3192C15.2443 7.57006 16 6.81436 16 5.88928C16 4.9642 15.2443 4.2085 14.3192 4.2085Z",fill:"#2EB67D"}),(0,n.jsx)("path",{d:"M8.42993 10.1107C8.42993 11.0358 9.18563 11.7915 10.1107 11.7915H14.3192C15.2443 11.7915 16 11.0358 16 10.1107C16 9.18563 15.2443 8.42993 14.3192 8.42993H10.1107C9.18563 8.42993 8.42993 9.18563 8.42993 10.1107Z",fill:"#ECB22E"}),(0,n.jsx)("path",{d:"M11.7915 14.3192C11.7915 13.3941 11.0358 12.6384 10.1107 12.6384H8.42993V14.3192C8.42993 15.2443 9.18563 16 10.1107 16C11.0358 16 11.7915 15.2443 11.7915 14.3192Z",fill:"#ECB22E"})]})})},776690:(e,t,o)=>{o.d(t,{J:()=>d});var n=()=>o(484714),r=()=>o(56366),i=o(296540),a=()=>o(496603);var s=()=>o(363186),l=()=>o(94522);function d(){const{workflowStore:e,threadStore:t,clientStore:o}=(0,s().$O)(),d=(0,n().v3)();return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a().n4;const o=(0,i.useRef)(e);return t(o.current,e)||(o.current=e),o.current}((0,r().K8)((()=>(0,l().n2)({workflowStore:e,threadStore:t,clientStore:o,environment:d})),[e,t,o,d]))}},777092:(e,t,o)=>{o.d(t,{JQ:()=>c,d5:()=>u,vt:()=>d});var n=()=>o(764880),r=()=>o(310442),i=()=>o(824862),a=()=>o(798880),s=()=>o(534177),l=()=>o(630116);function d(e){const{parentStore:t,pointer:o}=e,r=(0,l().Oo)(t,o).getValue();if(r)return(0,n().D3)({table:o.table,value:r})}function c(e){const{parentStore:t,pointer:o}=e;return o.table===i().GP?l().vK.createChildStore(t,o):o.table===a().oo?l().LU.createChildStore(t,o):o.table===r().yj?l().pH.createChildStore(t,o):void(0,s().HB)(o)}function u(e){return e.table===i().GP?(0,n().oC)(e.getValue()):e.table===a().oo?(0,n().MR)(e.getValue()):e.table===r().yj?(0,n().w2)(e.getValue()):void(0,s().HB)(e)}},815883:(e,t,o)=>{o.d(t,{N:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("code",{viewBox:"0 0 16 16",svg:(0,n.jsx)("g",{children:(0,n.jsx)("path",{d:"M.056 8.122a.72.72 0 01.07-.306.91.91 0 01.204-.285l3.39-3.05a.745.745 0 01.542-.215.675.675 0 01.505.236c.14.158.202.337.188.537a.737.737 0 01-.264.51L1.855 8.122l2.836 2.573a.737.737 0 01.264.51.716.716 0 01-.188.537.694.694 0 01-.505.242.766.766 0 01-.543-.22L.33 8.708a.87.87 0 01-.204-.274.756.756 0 01-.07-.312zm6.43 5.21a.675.675 0 01-.446-.355.782.782 0 01-.027-.58l2.605-8.942c.068-.226.186-.384.354-.473a.714.714 0 01.559-.054.678.678 0 01.446.344.69.69 0 01.048.553l-2.621 8.98a.738.738 0 01-.35.463.711.711 0 01-.569.064zm9.453-5.21a.695.695 0 01-.065.312.869.869 0 01-.204.274l-3.39 3.056a.773.773 0 01-.547.22.677.677 0 01-.5-.242.707.707 0 01-.193-.537.738.738 0 01.263-.51l2.841-2.573-2.84-2.573a.738.738 0 01-.264-.51.7.7 0 01.193-.537.659.659 0 01.5-.236.75.75 0 01.548.214l3.389 3.051a.91.91 0 01.204.285c.047.1.068.202.064.306z"})})})},863059:(e,t,o)=>{o.d(t,{Hh:()=>j,Kh:()=>y,L1:()=>C,Nq:()=>S,U:()=>k,gQ:()=>T,nh:()=>x,u7:()=>b});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(418135),l=()=>o(340498),d=()=>o(175947),c=()=>o(186445),u=()=>o(696746),h=()=>o(900652),p=()=>o(441199),f=()=>o(644914),w=()=>o(224011),g=()=>o(948914),v=()=>o(150193);const m=10,C=700;function S(){const{isMobile:e,isElectronWindows:t}=(0,r().Y0)(),{isShowingTabBar:o,zoomFactor:a}=(0,i().K8)((()=>({isShowingTabBar:Boolean(g().A.state.isShowingTabBar),zoomFactor:g().A.state.zoomFactor||s().rx})),[]),l=t&&!o;return(0,n.useMemo)((()=>l?(0,s().WS)(a)+4:e?4:m),[e,l,a])}function y(e){let{isFloatingPersonalHomeTopbar:t,shouldRenderTemplateGalleryTopbar:o}=e;const a=(0,r().v3)(),{isShowingTabBar:l,zoomFactor:u}=(0,i().O$)(g().A),h=(0,i().K8)((()=>c().X4(a).shouldShowSidebar),[a]),v=(0,i().K8)((()=>(0,f().KB)(a)),[a]),m=(0,i().K8)((()=>p().default.isPanelPinnedState()),[]),C=(0,i().K8)((()=>w().A.state.isFullScreen),[]),{device:S}=a,y=u||s().rx,k=S.isElectronMac&&(!h||!v&&!m)&&!C&&!l,b=S.isElectronWindows&&!l,x=b&&(!h||!v&&!m);let j=d().ek(S.isElectronMac);o?j=d().Hi:t&&(j=d().$C);return(0,n.useMemo)((()=>({display:"flex",justifyContent:"space-between",alignItems:"center",overflow:"hidden",height:j,paddingLeft:k?(0,s().JT)(y):x?46:S.isMobile?4:12,paddingRight:b?(0,s().WS)(y)+4:S.isMobile?4:10})),[j,k,y,x,S.isMobile,b])}function k(e){let{store:t,shouldRenderTemplateGalleryTopbar:o,isBrowserFullScreen:n}=e;const l=(0,r().v3)(),p=(0,r().Y0)(),w=(0,r().WS)(),m=(0,i().K8)((()=>(0,u().lU)(t)&&0===v().A.state.banners.length),[t]);let S=d().ek(p.isElectronMac);o&&(S=2*d().Hi);const y=(0,i().K8)((()=>h().Z8()),[]),k=(0,i().O$)(c().$o),{zoomFactor:b}=(0,i().O$)(g().A),x=(0,f().Sj)(l),j=d().pz(p.isElectronMac,n,b||s().rx);return(0,a().IS)((e=>({header:{background:m&&!w?"transparent":e.contentBackground,maxWidth:"100vw",zIndex:100,WebkitUserSelect:"none",userSelect:"none"},container:{width:`calc(100% - ${y}px)`,maxWidth:"100vw",height:S,opacity:k?0:1,transition:`\n\t\t\t\t\t\topacity ${C}ms,\n\t\t\t\t\t\tcolor ${C}ms\n\t\t\t\t\t`,position:"relative",left:y},electronTopbarSidebarMousePeekArea:{position:"absolute",top:0,width:`${j}px`,height:`${x}px`}})),[m,w,y,k,S,j,x])}const b=34,x=28;function j(e){return{iconButton:{width:b,height:x,marginRight:2},icon:{height:l().Ev.lg,width:l().Ev.lg,fill:e.icon.primary},tabletIcon:{height:l().lD.lg,width:l().lD.lg,fill:e.icon.primary}}}function T(){return(0,a().IS)(j,[])}},900535:(e,t,o)=>{o.d(t,{t:()=>c});o(16280),o(813451),o(898992),o(354520);var n=()=>o(724639),r=()=>o(496603),i=()=>o(255299),a=()=>o(630116),s=()=>o(94522);function l(e){const{transcript:t,saved:o,toIndex:r}=e,i=r?t.slice(0,r):t,a=i.findLastIndex((e=>"workflow"===e.type&&(void 0===o||e.saved===o)));if(-1===a)return;const s=i[a];if("workflow"!==s.type)return;const l=(0,n().Uj)({workflowStepIndex:a,transcript:t});return{step:s,index:a,mergedWorkflow:(0,n().Kq)({workflowValue:s.value,operationSteps:l}),operationSteps:l}}function d(e){var t,o;const{threadStore:n,versionPointer:r,savedVersionPointer:i}=e,s=a().je.createChildStore(n,r);if(!s.isVersion())return;const l=null===(t=s.getData())||void 0===t?void 0:t.version;if(!l)return;const d=a().je.createChildStore(n,i);if(!d.isVersion())return;const c=null===(o=d.getData())||void 0===o?void 0:o.version;return c?c===l?"equal":l<c?"restore":"update":void 0}function c(e){var t;const{threadStore:o,workflowStore:a,clientStore:c,focusedWorkflowStepId:h}=e;if(c.state.loading)return;const p=(0,i().A3)({clientStore:c,threadStore:o});if(h){var f;const e=p.findIndex((e=>e.id===h));if(-1===e)return;const t=p[e];if("workflow"!==t.type)throw new Error("Focused build step is not a workflow");if(null===(f=t.value)||void 0===f||!f.versionPointer)return;const i=(0,n().Uj)({workflowStepIndex:e,transcript:p}),c=(0,n().Kq)({workflowValue:t.value,operationSteps:i}),w=u(p.slice(e+1));if(!a)return{type:"create",workflowStepToSave:t,newWorkflow:c,threadStore:o,numUnsavedWorkflowOperationSteps:i.length,numUnsavedWorkflowSteps:w};const g=l({transcript:p,saved:!0,toIndex:e});if(!g)return;const v=(0,s().dh)(a);if(!v.versionPointer)return r().n4(v,c)?void 0:{type:"update",baseWorkflow:v,workflowStepToSave:t,newWorkflow:c,threadStore:o,workflowStore:a,numUnsavedWorkflowOperationSteps:i.length,numUnsavedWorkflowSteps:w};const m=d({threadStore:o,versionPointer:t.value.versionPointer,savedVersionPointer:v.versionPointer});if("equal"===m)return;return"restore"===m?{type:"restore",workflowStepToSave:t,newWorkflow:c,threadStore:o,workflowStore:a,numUnsavedWorkflowOperationSteps:i.length,numUnsavedWorkflowSteps:w}:{type:"update",baseWorkflow:g.mergedWorkflow,workflowStepToSave:t,newWorkflow:c,threadStore:o,workflowStore:a,numUnsavedWorkflowOperationSteps:i.length,numUnsavedWorkflowSteps:w}}const w=p.findLastIndex((e=>"workflow"===e.type&&e.saved)),g=u(p.slice(w+1)),v=l({transcript:p});if(null==v||null===(t=v.mergedWorkflow)||void 0===t||!t.versionPointer)return;if(!a)return{type:"create",workflowStepToSave:v.step,newWorkflow:v.mergedWorkflow,threadStore:o,numUnsavedWorkflowOperationSteps:v.operationSteps.length,numUnsavedWorkflowSteps:g};const m=l({transcript:p,saved:!0,toIndex:v.index});if(!m)return;const C=(0,s().dh)(a);if(!C.versionPointer)return r().n4(C,v.mergedWorkflow)?void 0:{type:"update",baseWorkflow:C,workflowStepToSave:v.step,newWorkflow:v.mergedWorkflow,threadStore:o,workflowStore:a,numUnsavedWorkflowOperationSteps:v.operationSteps.length,numUnsavedWorkflowSteps:g};const S=d({threadStore:o,versionPointer:v.mergedWorkflow.versionPointer,savedVersionPointer:C.versionPointer});return"equal"!==S?"restore"===S?{type:"restore",workflowStepToSave:v.step,newWorkflow:v.mergedWorkflow,threadStore:o,workflowStore:a,numUnsavedWorkflowOperationSteps:v.operationSteps.length,numUnsavedWorkflowSteps:g}:{type:"update",baseWorkflow:m.mergedWorkflow,workflowStepToSave:v.step,newWorkflow:v.mergedWorkflow,threadStore:o,workflowStore:a,numUnsavedWorkflowOperationSteps:v.operationSteps.length,numUnsavedWorkflowSteps:g}:void 0}function u(e){return e.filter((e=>"workflow"===e.type&&"user-edit"!==e.tag)).length}},918676:(e,t,o)=>{o.d(t,{y:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("clock",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M6.541 10.919a.53.53 0 0 1-.39-.157.53.53 0 0 1-.157-.39c0-.155.053-.283.157-.383a.53.53 0 0 1 .39-.157h2.905V5.895c0-.15.053-.278.158-.383a.521.521 0 0 1 .382-.158.53.53 0 0 1 .39.158.521.521 0 0 1 .157.383v4.477a.53.53 0 0 1-.157.39.53.53 0 0 1-.39.157H6.541Zm3.452 6.207a6.789 6.789 0 0 1-2.727-.554 7.124 7.124 0 0 1-2.256-1.524 7.277 7.277 0 0 1-1.525-2.256 6.788 6.788 0 0 1-.553-2.727c0-.967.184-1.876.553-2.728a7.241 7.241 0 0 1 3.773-3.78 6.788 6.788 0 0 1 2.728-.554c.971 0 1.882.184 2.735.554.852.369 1.604.88 2.256 1.53a7.136 7.136 0 0 1 1.53 2.25c.37.852.554 1.761.554 2.728 0 .966-.184 1.875-.553 2.727a7.218 7.218 0 0 1-3.787 3.78 6.789 6.789 0 0 1-2.728.554Zm0-1.395c.789 0 1.525-.145 2.208-.437a5.678 5.678 0 0 0 1.805-1.217 5.68 5.68 0 0 0 1.217-1.804c.291-.684.437-1.42.437-2.208a5.55 5.55 0 0 0-.437-2.202 5.66 5.66 0 0 0-3.029-3.028 5.567 5.567 0 0 0-2.208-.438c-.784 0-1.52.146-2.208.438A5.6 5.6 0 0 0 5.98 6.052a5.715 5.715 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.202c0 .788.146 1.524.438 2.208a5.735 5.735 0 0 0 1.21 1.804 5.598 5.598 0 0 0 4.013 1.654Z"})})},952972:(e,t,o)=>{o.d(t,{G:()=>H});o(16280),o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(743176),l=()=>o(576250),d=()=>o(101209),c=()=>o(831310),u=()=>o(742117),h=()=>o(815883),p=()=>o(693954),f=()=>o(985854),w=()=>o(284371),g=()=>o(959013),v=()=>o(317909),m=()=>o(890754),C=()=>o(745266),S=()=>o(519839),y=()=>o(493823),k=()=>o(398208),b=()=>o(957986),x=()=>o(554509),j=()=>o(864943),T=()=>o(204063),M=()=>o(859428),A=()=>o(989423),I=()=>o(847),B=()=>o(94522),_=()=>o(809120),E=()=>o(900535),W=()=>o(575127),R=()=>o(363186),L=o(474848);function H(){var e;const{store:t,workflowStore:o,clientStore:a,threadStore:s}=(0,R().$O)(),l=(0,r().v3)(),d=null===(e=(0,m().useChatSidebarState)())||void 0===e?void 0:e.workflowStepId,u=(0,i().K8)((()=>{if(s)return(0,E().t)({threadStore:s,workflowStore:o,clientStore:a,focusedWorkflowStepId:d})}),[a,s,o,d]),h=(0,n.useCallback)((()=>{if(!u)throw new Error("Shouldn't be able to save without workflow changes");const{performResult:e}=v().createAndCommit({userAction:"WorkflowEditorSaveButton.handleSave",environment:l,canUndo:!0,perform:e=>{if("update"===u.type)return(0,I().saveWorkflowStep)({environment:l,previousWorkflow:u.baseWorkflow,newWorkflow:u.newWorkflow,saveWorkflowStep:u.workflowStepToSave,workflowStore:u.workflowStore,transaction:e});if("restore"===u.type){const o=(0,_().$e)({workflowStore:u.workflowStore,store:t});return(0,I().restoreToWorkflowStep)({environment:l,liveWorkflow:o,newWorkflow:u.newWorkflow,workflowStore:u.workflowStore,threadStore:u.threadStore,transaction:e})}return(0,I().createWorkflowFromWorkflowStep)({environment:l,saveWorkflowStep:u.workflowStepToSave,newWorkflow:u.newWorkflow,workflowBlockId:t.id,transaction:e})}}),{workflowStore:o,parentStore:n}=e;(0,A().u4)({environment:l,event:{eventName:"workflow_save",eventProperties:{workflow_id:o.id,workflow_block_id:n.id,space_id:n.getSpaceId(),type:u.type,has_user_edits:u.numUnsavedWorkflowOperationSteps>0,has_ai_edits:u.numUnsavedWorkflowSteps>0,num_ai_iterations:u.numUnsavedWorkflowSteps}}}),f(!1)}),[l,t,u]),[p,f]=(0,n.useState)(!1),w=(0,n.useCallback)((()=>{f(!0)}),[]),g=(0,n.useCallback)((()=>{f(!1)}),[]),C=(0,i().K8)((()=>a.state.loading||void 0!==(null==s?void 0:s.getCurrentInferenceId())),[a,s]),S=((null==u?void 0:u.newWorkflow.functions)??[]).length>0,y=!C&&!0===(null==u?void 0:u.workflowStepToSave.completed)&&!S;return(0,L.jsxs)(L.Fragment,{children:[p&&u&&(0,L.jsx)(P,{workflowChanges:u,workflowStore:o,store:t,onDismiss:g,onSave:h}),(0,L.jsx)(T().A,{icon:c().o,onClick:w,disabled:!y,size:"lg",children:"restore"===(null==u?void 0:u.type)?"Restore":"Publish"})]})}function P(e){const{workflowChanges:t,workflowStore:o,store:n,onDismiss:r,onSave:s}=e,l=(0,a().IS)((e=>({container:{padding:16,display:"flex",flexDirection:"column",gap:8,maxWidth:"100%",width:460,maxHeight:"100%",height:565},header:{display:"flex",flexDirection:"column",alignItems:"center",borderBottom:`1px solid ${e.stroke.secondary}`,gap:4,paddingBottom:16},footer:{display:"flex",justifyContent:"space-between"},closeButton:{position:"absolute",right:16,top:16},sectionContainer:{display:"flex",flexDirection:"column",gap:2},sectionTitle:{fontSize:14,fontWeight:w().Wy.medium,paddingLeft:6},propertyChangeContainer:{padding:8,border:`1px solid ${e.stroke.secondary}`,borderRadius:4},icon:{width:16,height:16,fill:e.icon.secondary},triggerIcon:{width:16,height:16,fill:e.icon.yellowPrimary},diffContainer:{display:"flex",flexDirection:"column",gap:16,padding:"8px 0",overflowY:"auto",flexGrow:1}})),[]),c=(0,i().K8)((()=>{const e=o?(0,B().dh)(o):f().ZB;let r;return"restore"===t.type?r=(0,_().$e)({workflowStore:t.workflowStore,store:n}):"update"===t.type&&(r=t.baseWorkflow),(0,B().ZE)({savedWorkflow:e,previousWorkflow:r,newWorkflow:t.newWorkflow,store:n})}),[t,o,n]),u=(0,g().tz)();return(0,L.jsx)(b().A,{open:!0,onDismiss:r,render:()=>(0,L.jsxs)("div",{style:l.container,children:[(0,L.jsxs)("div",{style:l.header,children:[(0,L.jsx)(x().D,{styleName:"Heading-17px/Semibold",children:"Save changes?"}),(0,L.jsx)(x().D,{styleName:"UIRegular-14px/Regular",colorName:"tertiary",children:"The following will be updated:"})]}),(0,L.jsx)(k().A,{style:l.closeButton,onClose:r}),(0,L.jsxs)("div",{style:l.diffContainer,children:[c.databaseModules.length>0&&(0,L.jsxs)("div",{style:l.sectionContainer,children:[(0,L.jsx)("div",{style:l.sectionTitle,children:"Databases"}),c.databaseModules.map((e=>(0,L.jsx)(N,{store:n,changes:e},e.module.key)))]}),c.views.length>0&&(0,L.jsxs)("div",{style:l.sectionContainer,children:[(0,L.jsx)("div",{style:l.sectionTitle,children:"Views"}),c.views.map((e=>{let{value:t,diff:o}=e;return(0,L.jsx)(D,{name:t.name||u.formatMessage(S().Xg[t.type]),icon:(0,L.jsx)(C().h,{viewType:t.type,color:"lightGray",size:16}),change:o},t.key)}))]}),c.connections.length>0&&(0,L.jsxs)("div",{style:l.sectionContainer,children:[(0,L.jsx)("div",{style:l.sectionTitle,children:"Connections"}),c.connections.map((e=>{let{value:t,diff:o}=e;return(0,L.jsx)(D,{name:t.name||t.key,icon:(0,W().c)(t)(l.icon),change:o},t.key)}))]}),c.triggers.length>0&&(0,L.jsxs)("div",{style:l.sectionContainer,children:[(0,L.jsx)("div",{style:l.sectionTitle,children:"Automations"}),c.triggers.map((e=>{let{value:t,diff:o}=e;return(0,L.jsx)(D,{name:t.name,icon:(0,d().v)(l.triggerIcon),change:o},t.key)}))]}),c.functions.length>0&&(0,L.jsxs)("div",{style:l.sectionContainer,children:[(0,L.jsx)("div",{style:l.sectionTitle,children:"Functions"}),c.functions.map((e=>{let{value:t,diff:o}=e;return(0,L.jsx)(D,{name:t.name,icon:(0,h().N)(l.icon),change:o},t.key)}))]})]}),(0,L.jsxs)("div",{style:l.footer,children:[(0,L.jsx)(j().A,{size:"lg",onClick:r,children:"Cancel"}),(0,L.jsx)(T().A,{size:"lg",onClick:s,children:"Save changes"})]})]})})}function D(e){const{name:t,icon:o,change:n}=e,r=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",fontSize:14,height:28,paddingLeft:6},name:{marginLeft:10,marginRight:6}})),[]);return(0,L.jsxs)("div",{style:r.container,children:[o,(0,L.jsx)("div",{style:r.name,children:t}),(0,L.jsx)(z,{status:n})]})}function z(e){const{labelOverride:t,status:o}=e,n=(0,a().IS)((e=>({container:{padding:"2px 4px",borderRadius:4,backgroundColor:"added"===o?e.accentColors.green[100]:"removed"===o?e.accentColors.red[100]:e.accentColors.yellow[100],color:"added"===o?e.accentColors.green[600]:"removed"===o?e.accentColors.red[600]:e.accentColors.yellow[600],fontSize:10,fontWeight:500}})),[o]);return(0,L.jsx)("div",{style:n.container,children:t||("added"===o?"Added":"removed"===o?"Removed":"Updated")})}function N(e){const{store:t,changes:o}=e,r=(0,a().IS)((e=>({icon:{width:16,height:16,fill:e.icon.secondary},titleButton:{display:"flex",alignItems:"center",gap:8},propertyChangeContainer:{paddingLeft:20,paddingBottom:8},button:{display:"flex",alignItems:"center",gap:4},chevronIcon:{width:14,height:14,fill:e.lightIconColor,marginLeft:"auto"},schemaChanges:{fontSize:12,color:e.lightIconColor,marginLeft:6},warningIcon:{width:14,height:14,fill:e.accentColors.yellow[400],marginLeft:8}})),[]),s=(0,i().K8)((()=>(0,B().zQ)({module:o.module,store:t})),[o.module,t]),[l,d]=(0,n.useState)(!0),c=(0,n.useCallback)((()=>{d((e=>!e))}),[]);if("removed"===o.diff)return(0,L.jsx)(D,{name:o.module.name||o.module.key,icon:(0,W().c)(o.module)(r.icon),change:o.diff},o.module.key);const h=o.schemaChanges.length>0;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(y().p,{onClick:h?c:void 0,icon:(0,W().c)(o.module),iconStyle:r.icon,style:r.button,children:[(0,L.jsx)("span",{children:o.module.name||o.module.key}),"added"===o.diff?(0,L.jsx)(z,{status:"added"}):h?(0,L.jsx)("span",{style:r.schemaChanges,children:(0,L.jsx)(g().sA,{defaultMessage:"{schemaCount, plural, one {{schemaCount} property} other {{schemaCount} properties}}",id:"workflow.builderModal.databaseChanges.schemaCount.title",values:{schemaCount:o.schemaChanges.length}})}):(0,L.jsx)(z,{status:"changed",labelOverride:"Metadata changed"}),s&&(0,L.jsx)(M().A,{renderTooltip:()=>(0,L.jsx)(g().sA,{defaultMessage:"Database is external to this workflow",id:"workflow.builderModal.databaseChanges.externalDatabase.tooltip"}),render:e=>(0,L.jsx)("div",{...e,children:(0,p().Q)(r.warningIcon)})}),h&&(0,u().V)(r.chevronIcon)]}),l&&(0,L.jsx)("div",{style:r.propertyChangeContainer,children:o.schemaChanges.map((e=>{let{diff:t,value:o}=e;return(0,L.jsx)(D,{name:o.key,icon:(0,L.jsx)(U,{type:o.property.type}),change:t},o.key)}))})]})}function U(e){const{type:t}=e,o=(0,a().DP)();return"content"===t?null:"external_relation"===t?(0,l().y)({width:16,height:16,padding:2,marginRight:6}):(0,L.jsx)(s().Ay,{type:t,icon:void 0,size:16,theme:o})}}}]);