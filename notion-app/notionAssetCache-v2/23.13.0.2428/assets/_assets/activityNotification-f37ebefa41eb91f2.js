"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[43920,56409],{94701:(e,t,i)=>{i.r(t),i.d(t,{checkmarkFillIcon:()=>r,iconDefinition:()=>o});i(296540);const o={viewBox:"0 0 20 20",svg:(0,i(474848).jsx)("path",{d:"M15.913 3.787a.875.875 0 0 1 .3 1.2L9.658 15.914a.875.875 0 0 1-1.415.119l-4.37-5.098a.875.875 0 0 1 1.329-1.14l3.58 4.177 5.93-9.884a.875.875 0 0 1 1.2-.3"})},r=(0,i(340498).wt)("checkmarkFill",o)},126550:(e,t,i)=>{i.d(t,{$:()=>d,t:()=>l});var o=()=>i(792071),r=()=>i(848538),s=()=>i(798880),n=()=>i(436856),a=()=>i(47373);function d(e,t){return e.getKeyStore("settings").getKeyStore("seen_guest_membership_requests").getValue()&&(0,a().nJ)()}function l(e,t){const i=o().Bj6.fromAccessRequest(e);if(!i.isPageAccessRequest())return!1;const a=i.getForActorPointer(t.id);return a.table===s().oo&&!n().V.createChildStore(t,r().i1({userId:a.id,spaceId:t.id})).isMember()}},309049:(e,t,i)=>{i.d(t,{A:()=>r});class o extends(()=>i(757695))().default{getInitialState(){return{count:0}}}const r=new o},350648:(e,t,i)=>{i.d(t,{D2:()=>x,Ip:()=>b,Jk:()=>S,YT:()=>A,e2:()=>f,g:()=>y});i(898992),i(354520);var o=()=>i(584262),r=()=>i(798880),s=()=>i(946141),n=()=>i(449506),a=()=>i(246826),d=()=>i(436572),l=()=>i(426116),c=()=>i(317909),u=()=>i(972435),m=()=>i(437622),g=()=>i(351360),v=()=>i(848237),h=()=>i(263928);const p=(0,i(959013).YK)({joinTeamSuccessMessage:{id:"teamInviteLinkActions.joinTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},requestTeamSuccessMessage:{id:"teamInviteLinkActions.requestAccess.successMessage",defaultMessage:"Successfully requested membership"},requestTeamFailureMessage:{id:"teamInviteLinkActions.requestAccess.failureMessage",defaultMessage:"Failed to request membership"}});async function f(e){let{environment:t,userId:i,teamStore:o,user:r}=e;const n=o.getSpaceId();if(!n)return;await v().rU({environment:t,teamId:o.id,spaceId:n,teamUserInfo:r,isSettingDefaultTeam:!1,inviterId:i})&&(s().vo(t,{store:o,joined_role:"member",from:"team_invite_link"}),await y({environment:t,userId:i,teamStore:o}),d().D6({label:u().A.formatMessage(p.joinTeamSuccessMessage,{teamName:o.getName()})}))}async function y(e){let{environment:t,userId:i,teamStore:r}=e;const s=g().default.state.currentUserRootStore,n=r.getSpaceId();if(!n||!s)return;const a=s.getSpaceViewStores().filter((e=>e.getSpaceId()===n))[0];await l().tR({environment:t,spaceViewStore:a,userSettingsStore:void 0,userRootStore:s,pageVisitSource:o().y8.JoinTeam,navigationType:"switchingToOrLoadingSpace"}),await h().J({environment:t,spaceId:n,userId:i}),v().L0({environment:t,teamStore:r,shouldScroll:!0})}async function b(e){let{environment:t,teamId:i,message:o}=e;if(!t.currentUser.id)return;"success"===(await n().callApi({eventName:"requestAccess",environment:t,data:{type:"current-actor-to-team",teamId:i,message:o}})).type?(s().XQ(t,{teamId:i}),await A({environment:t}),new Promise((e=>setTimeout(e,500))).then((()=>{d().D6({label:u().A.formatMessage(p.requestTeamSuccessMessage)})}))):d().D6({label:u().A.formatMessage(p.requestTeamFailureMessage)})}async function S(e){let{environment:t,teamStore:i,accessRequestStore:o,status:n}=e;const d=o.getForActorId();if(!d)return;const l=o.getRecordModel({table:r().oo,id:d});if(l){if("approved"===n){const e=[{type:"member",entity_type:"user",user_id:l.id}];if(!(await v().Zd({environment:t,teamStore:i,teamMemberInfos:e,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})))return}c().createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:t,canUndo:!0,perform:e=>{a().zv({store:o,transaction:e,data:{resolved_time:Date.now(),resolved_by_table:r().oo,resolved_by_id:t.currentUser.id,status:n}})}}),s().GW(t,{store:i,resolution:n})}}async function A(e){let{environment:t}=e;const{lastVisitedSpaceView:i,userRootStore:r,userSettingsStore:s}=await(0,m().ex)({environment:t,disableRedirectUrl:!1});i?await l().tR({environment:t,spaceViewStore:i,userRootStore:r,userSettingsStore:s,pageVisitSource:o().y8.BackForward,navigationType:"switchingToOrLoadingSpace"}):await l().t9({environment:t,userRootStore:r,userSettingsStore:s,pageVisitSource:o().y8.BackForward})}async function x(e){let{environment:t,teamId:i}=e;const o=await n().callApi({eventName:"getTeamAccessRequestMetadata",environment:t,data:{teamId:i}});if("success"===o.type)return o.data}},384100:(e,t,i)=>{i.d(t,{z:()=>s});var o=()=>i(798880),r=()=>i(630116);function s(e){let{userId:t,currentSpaceStore:i}=e;return r().LU.createChildStore(i,{table:o().oo,id:t})}},400835:(e,t,i)=>{i.d(t,{D:()=>r});i(296540);var o=i(474848);const r=(0,i(340498).wt)("personBadgeQuestionMark",{viewBox:"0 0 15 14",svg:(0,o.jsx)("path",{d:"M12.4551 5.41699C12.8037 5.41699 13.0088 5.19824 13.0088 4.93164V4.84961C13.0088 4.45996 13.2344 4.2207 13.7061 3.90625C14.3691 3.46875 14.8408 3.07227 14.8408 2.25195C14.8408 1.11719 13.8291 0.501953 12.667 0.501953C11.498 0.501953 10.7256 1.0625 10.5342 1.69141C10.5 1.80078 10.4795 1.91016 10.4795 2.02637C10.4795 2.33398 10.7188 2.49805 10.9443 2.49805C11.1836 2.49805 11.3271 2.38867 11.4502 2.22461L11.5732 2.06055C11.8125 1.66406 12.1748 1.43164 12.626 1.43164C13.248 1.43164 13.6514 1.78711 13.6514 2.30664C13.6514 2.77148 13.3643 2.99707 12.7695 3.41406C12.2773 3.75586 11.915 4.11816 11.915 4.78809V4.87695C11.915 5.23242 12.1064 5.41699 12.4551 5.41699ZM5.79004 6.99609C7.25293 6.99609 8.52441 5.68359 8.52441 3.97461C8.52441 2.28613 7.25293 1.03516 5.79004 1.03516C4.32715 1.03516 3.05566 2.31348 3.05566 3.98828C3.05566 5.68359 4.32031 6.99609 5.79004 6.99609ZM12.4414 7.4541C12.8379 7.4541 13.1797 7.13965 13.1797 6.74316C13.1797 6.34668 12.8447 6.03223 12.4414 6.03223C12.0381 6.03223 11.7031 6.35352 11.7031 6.74316C11.7031 7.13281 12.0449 7.4541 12.4414 7.4541ZM1.20312 13.3262H10.3701C11.1016 13.3262 11.5391 12.9844 11.5391 12.417C11.5391 10.6533 9.33105 8.21973 5.7832 8.21973C2.24219 8.21973 0.0341797 10.6533 0.0341797 12.417C0.0341797 12.9844 0.47168 13.3262 1.20312 13.3262Z"})})},568688:(e,t,i)=>{i.d(t,{I:()=>a});var o=()=>i(484714),r=()=>i(187174),s=()=>i(534177),n=()=>i(449506);function a(e){let{spaceId:t}=e;const i=(0,o().v3)(),[{status:a,value:d}]=(0,r().Yb)((async()=>{if(!t)return{requests:{}};const e=await n().callApi({eventName:"getAllUpgradeRequestsForSpace",environment:i,data:{spaceId:t}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,s().HB)(e)}),[i,t],{debounce:300});return{isLoading:"pending"===a,requests:(null==d?void 0:d.requests)??{}}}},683097:(e,t,i)=>{i.d(t,{A:()=>s});var o=i(296540),r=()=>i(484714);function s(e){const t=(0,r().v3)(),{onLongPress:i,hapticsEnabled:s=!0,timeout:n=300}=e,a=(0,o.useCallback)((()=>{var e,o,r;s&&(null!==(e=t.mobileNative)&&void 0!==e&&e.buzz?t.mobileNative.buzz():null===(o=(r=window.navigator).vibrate)||void 0===o||o.call(r,20));i()}),[t.mobileNative,s,i]),d=(0,o.useRef)(),l=(0,o.useRef)(0),c=(0,o.useRef)(0),u=(0,o.useCallback)((()=>clearTimeout(d.current)),[]);(0,o.useEffect)((()=>u),[u]);return{onTouchStart:(0,o.useCallback)((()=>{clearTimeout(d.current),d.current=setTimeout(a,n)}),[n,a]),onTouchMove:(0,o.useCallback)((e=>{const t=e.touches[0].clientX,i=e.touches[0].clientY;(Math.abs(t-l.current)>50||Math.abs(i-c.current)>50)&&clearTimeout(d.current)}),[]),onTouchEnd:u,onTouchCancel:u}}},715392:(e,t,i)=>{i.d(t,{W:()=>r});var o=()=>i(666144);const r=new(i(848776).U)((e=>{let{userId:t,spaceId:i}=e;return`${t}-${i}`}),(async function(e,t){var r;let{userId:s,spaceId:n}=t;const[a,d]=await Promise.all([o().sy({environment:e,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,pointer:{table:i(798880).oo,id:s},userId:s}),o().sy({environment:e,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,pointer:(0,i(848538).i1)({userId:s,spaceId:n}),userId:s})]),l=null===(r=i(351360).default.state.currentSpaceViewStore)||void 0===r||null===(r=r.getModel())||void 0===r?void 0:r.first_joined_space_time,c=null==a?void 0:a.value,u=null==d?void 0:d.value;if(c&&u&&l)return{id:c.id,space_id:u.id,membership_type:u.membership_type,email:c.email,name:c.name,profile_photo:c.profile_photo,onboarding_completed:c.onboarding_completed,first_joined_space_time:l}}));i(604341).exposeDebugValue("UserOnSpaceStore",r)},736980:(e,t,i)=>{i.r(t),i.d(t,{ActivityNotification:()=>Xs});var o=i(296540),r=()=>i(484714),s=()=>i(56366),n=()=>i(813206),a=()=>i(857639),d=()=>i(197959),l=()=>i(963589),c=()=>i(999598),u=(i(18107),i(967357),()=>i(401497)),m=()=>i(692026),g=()=>i(584262),v=()=>i(296344),h=()=>i(179034),p=()=>i(96689),f=()=>i(854150),y=()=>i(798880),b=()=>i(959013),S=()=>i(534177),A=()=>i(284371),x=()=>i(746970),_=()=>i(126550),j=()=>i(972435),R=()=>i(28536),k=()=>i(212326),C=()=>i(630116),M=()=>i(869190),w=()=>i(402390),K=()=>i(563884),I=()=>i(823279),B=()=>i(496603),q=()=>i(572080),T=()=>i(82926),P=()=>i(317909),L=()=>i(38337),N=()=>i(728611),O=()=>i(753199),E=()=>i(553965),U=()=>i(907514),D=()=>i(683097),z=()=>i(575301),F=()=>i(577009),W=()=>i(965351),H=()=>i(770906),V=()=>i(441199),$=()=>i(962730),G=()=>i(606846),Y=()=>i(197190),X=()=>i(406699),J=()=>i(285790),Q=()=>i(614505),Z=()=>i(16006),ee=()=>i(859428),te=()=>i(851860),ie=()=>i(659799),oe=()=>i(709438),re=i(474848);const se=o.createContext((()=>{}));function ne(e){const{disabled:t=!1,children:i}=e,r=(0,o.useContext)(se),s=(0,o.useCallback)((()=>{t||r(!0)}),[r,t]),n=(0,o.useCallback)((()=>{t||r(!1)}),[r,t]);return(0,re.jsx)("div",{style:{display:"contents"},onMouseEnter:s,onMouseLeave:n,children:i})}se.displayName="NestedNotificationButtonContext";const ae=0,de=8,le=24,ce=24+le+de,ue="150ms ease";function me(e){const{notification:t,children:n,rootStore:a,icon:d,isPrivate:l,onArchiveClicked:c,onUnarchiveClicked:m,onMarkAsReadClicked:g,onMarkAsUnreadClicked:v,onNotificationBodyClicked:p,navigableBlockId:f,url:y,showSnapshotButton:b,hidePageTitle:S,header:A,isFirst:x,isLast:_}=e,j=(0,r().v3)(),R=(0,r().Y0)(),k=parseInt(t.end_time),M=(0,s().K8)((()=>{const e=t.navigable_block_id;if(e)return C().sk.createChildStore(a,{table:h().ev,id:e,spaceId:a.id})}),[a,t.navigable_block_id]),w=(0,s().K8)((()=>V().default.isPeekDismissableState()),[]),[K,I]=(0,o.useState)(!1),[B,T]=(0,o.useState)(!1),N=(0,o.useRef)(null),E=(0,D().A)({onLongPress:()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.setOpen(!0)}}),[U,F]=(0,o.useState)(!1),$=K&&!B&&!U,J=(0,s().K8)((()=>"mentions"===G().Ay.state.currentTab),[]),Q=!t||t.read,Z=R.isMobile,ee=(0,s().K8)((()=>{const e=j.WindowSizeStore.state;return{left:e.paddingLeftCSS,right:e.paddingRightCSS}}),[j.WindowSizeStore]),te=(0,u().IS)((e=>({article:{display:"flex",flexDirection:"column"},mainClickTargetButton:{display:"flex",flexDirection:"column",gap:8,paddingTop:14-ae,paddingBottom:14-ae,paddingLeft:Z?ee.left:0,paddingRight:Z?ee.right:0,marginTop:x?0:ae,marginBottom:_?0:ae,marginLeft:ae,marginRight:ae,transition:`background ${ue}`},mainClickTargetButtonHovered:{background:e.state.hover},headerAndAvatar:{display:"flex",paddingLeft:8-ae,paddingRight:20-ae,gap:de,maxWidth:"100%"},avatarAndStatusDot:{display:"flex",gap:8,alignItems:"center",height:le},statusDotSpacer:{width:8,flexShrink:0},privatePageBadge:{marginTop:1,marginBottom:4,marginLeft:8},children:{paddingLeft:ce-ae,paddingRight:20-ae},divider:{height:1,backgroundColor:e.stroke.secondary},buttonPressed:{backgroundColor:K&&B?e.buttonBackground:e.state.pressed}})),[Z,ee.left,ee.right,x,_,K,B]),ie=(0,o.useCallback)((e=>{t&&(U||(!y&&t.read||p(),(0,O().SQ)({event:e,context:O().y$.NotificationClick,callback:()=>{!w||e.metaKey||e.ctrlKey||H().VI({environment:j}),t.read||P().createAndCommit({userAction:"ActivityNotificationSection.handleMarkAsRead",environment:j,canUndo:!0,perform:e=>{q().ZB({notification:t,rootStore:a,transaction:e,read:!0})}})}})))}),[j,U,t,p,w,a,y]),ne=(0,o.useCallback)((e=>{t&&(0,O().SQ)({event:e,context:O().y$.NotificationClick,callback:()=>{t.read?v():g(),P().createAndCommit({userAction:"InboxActionsMenu.toggleNotificationReadStatus",environment:j,canUndo:!0,perform:e=>{q().ZB({notification:t,rootStore:a,transaction:e,read:!t.read})}})}})}),[j,t,g,v,a]),me=(0,o.useCallback)((e=>{t&&(0,O().SQ)({event:e,context:O().y$.NotificationClick,callback:()=>{c(),P().createAndCommit({userAction:"InboxActionsMenu.handleArchive",environment:j,canUndo:!0,perform:e=>{q().s4({notification:t,rootStore:a,transaction:e})}})}})}),[j,t,c,a]),ge=(0,o.useCallback)((e=>{t&&(0,O().SQ)({event:e,context:O().y$.NotificationClick,callback:()=>{m(),P().createAndCommit({userAction:"Activity.handleUnarchive",environment:j,canUndo:!0,perform:e=>{q().JV({notificationId:t.id,visited:!1,rootStore:a,transaction:e})}})}})}),[j,t,m,a]),ve=(0,o.useCallback)((()=>I(!0)),[]),he=(0,o.useCallback)((()=>I(!1)),[]),fe=(0,o.useId)(),ye=(0,z().T4)();return(0,re.jsx)(X().Ay,{ref:N,disabled:!R.isMobile,style:ye.popup,popupType:R.isTablet?X().z7.Popup:X().z7.SlideUp,render:e=>(0,re.jsx)(W().Lk,{blockStore:M,notification:t,handlers:{handleUnarchive:ge,handleArchive:me,toggleNotificationReadStatus:ne},closePopup:()=>e.close()}),renderOrigin:()=>(0,re.jsx)("div",{...R.isMobile&&E,children:(0,re.jsx)("article",{style:te.article,onMouseOver:ve,onMouseLeave:he,children:(0,re.jsxs)(se.Provider,{value:T,children:[(0,re.jsx)(pe,{notification:t,rootStore:a,isMobile:Z,isHovered:K,isFirst:x,onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),onArchiveClicked:c,onUnarchiveClicked:m,onMarkAsReadClicked:g,onMarkAsUnreadClicked:v}),(0,re.jsxs)(Y().A,{href:y,hovered:$,ignoreLocalHoverState:!0,style:te.mainClickTargetButton,onClick:ie,hoveredStyle:te.mainClickTargetButtonHovered,disabled:!Boolean(y),pressedStyle:te.buttonPressed,"aria-labelledby":fe,children:[(0,re.jsxs)("div",{style:te.headerAndAvatar,children:[(0,re.jsxs)("div",{className:L().a9W,style:te.avatarAndStatusDot,children:[J&&!Q?(0,re.jsx)(oe().m,{size:8}):(0,re.jsx)("div",{style:te.statusDotSpacer}),d]}),(0,re.jsx)(Se,{blockStore:M,timestamp:k,header:A,hidePageTitle:Boolean(S),hasChildren:Boolean(n),titleAriaId:fe}),b&&f&&(0,re.jsx)(Ae,{timestamp:k,navigableBlockId:f,rootStore:a}),l&&!t&&(0,re.jsx)(i(365136).A,{style:te.privatePageBadge})]}),n&&(0,re.jsx)("div",{style:te.children,className:L().CyB,children:n})]}),!_&&(0,re.jsx)("div",{style:te.divider})]})})})},t.id)}const ge=12-ae,ve=12-ae,he="100ms ease-out";function pe(e){const{notification:t,rootStore:i,isMobile:o,isHovered:r,isFirst:s,onArchiveClicked:n,onUnarchiveClicked:a,onMarkAsReadClicked:d,onMarkAsUnreadClicked:l,onMouseEnter:c,onMouseLeave:m}=e,g=(0,u().IS)((()=>({container:{display:"flex",alignItems:"flex-start",position:"relative",zIndex:1},body:{transition:`opacity ${he}`,opacity:o||r?1:0,position:"absolute",right:ge,top:ve+(o?-3:0)+(s?0:ae)}})),[o,r,s]);return t?(0,re.jsx)("div",{style:g.container,onMouseEnter:c,onMouseLeave:m,children:(0,re.jsx)("div",{style:g.body,children:(0,re.jsx)(F().hR,{notification:t,rootStore:i,onArchiveClicked:n,onUnarchiveClicked:a,onMarkAsReadClicked:d,onMarkAsUnreadClicked:l})})}):null}const fe=14,ye=12,be=3;function Se(e){const{blockStore:t,timestamp:i,hidePageTitle:n,header:a,hasChildren:d,titleAriaId:l}=e,c=(0,r().Y0)().isMobile,m=!n,[g,v]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),f=(0,U().nl)(i,{useUltraCompactFormat:!0}),y=(0,U().x$)(i),b=(0,s().K8)((()=>{var e;if(t)return null===(e=t.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:t.getRecordModel})}),[t]),S=(0,s().K8)((()=>!!t&&t.isEmptyPage()),[t]),x=(0,s().K8)((()=>null==t?void 0:t.isDefined()),[t]),_=(0,o.useCallback)((()=>{v(!0),p(!1)}),[]),j=B().nF((()=>{p(!0)}),200,{leading:!0}),R=(0,o.useCallback)((()=>{v(!1),p(!1),N().Ol(window,"scroll",j,!0)}),[j]),k=(0,o.useCallback)((e=>(0,re.jsx)(te().yf,{store:t,events:e})),[t]);(0,o.useEffect)((()=>(N().P4(window,"scroll",j,!0),()=>N().Ol(window,"scroll",j,!0))),[j]);const C=(0,u().IS)((e=>({container:{display:"flex",flexDirection:"row",minWidth:0,width:"100%",marginTop:2},headerMobile:{fontSize:fe,minWidth:0},header:{display:"inline-grid",gridAutoFlow:"column",justifyContent:"space-between",fontSize:fe,minWidth:0},headlineMobile:{paddingTop:2,display:"inline",whiteSpace:"pre-wrap",wordBreak:"break-word"},headline:{flexShrink:2,whiteSpace:"pre-wrap",wordBreak:"break-word"},title:{fontSize:fe,marginTop:4,marginBottom:d?8:4},time:{display:"flex",fontSize:ye,color:e.lightTextColor,whiteSpace:"nowrap",...c&&{display:"inline"},paddingLeft:6,marginTop:fe-ye},headerAndPageTitle:{display:"flex",flex:1,flexDirection:"column",gap:be,minWidth:0},pageTitleMockedButton:{maxWidth:"fit-content",display:"flex",alignItems:"center",gap:4,borderRadius:3,paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:5,marginTop:-2,marginBottom:-2,marginLeft:-3,marginRight:-5,background:g&&x?e.state.hover:void 0},recordTitle:{fontSize:14,fontWeight:A().Wy.medium},recordPath:{color:e.text.contrastPrimary}})),[d,c,g,x]),M=!0!==h&&void 0;return(0,re.jsxs)("div",{style:C.container,children:[(0,re.jsxs)("div",{style:C.headerAndPageTitle,children:[(0,re.jsxs)("div",{style:c?C.headerMobile:C.header,children:[(0,re.jsx)("div",{style:c?C.headlineMobile:C.headline,className:L().k2l,id:l,children:a}),(0,re.jsx)("div",{style:C.time,className:L().Cxn,children:(0,re.jsx)(ie().A,{text:f,tooltipText:y,icon:K().k})})]}),t&&m&&(0,re.jsx)(ne,{disabled:!x,children:(0,re.jsx)(ee().A,{originGap:3,disableTooltip:!x,alignment:$().C.Start,placement:$().W.Bottom,renderTooltip:k,closeDelay:0,noStyle:!0,textWrap:!0,forceVisibleState:M,render:e=>(0,re.jsxs)("div",{style:C.pageTitleMockedButton,...(0,E().A)(e,{onMouseEnter:_,onMouseLeave:R}),children:[(0,re.jsx)(Q().A,{disabled:!0,icon:b,isEmptyPage:S,size:16}),(0,re.jsx)(Z().A,{store:t,style:C.recordTitle,underline:!0})]})})})]}),c&&(0,re.jsx)("div",{style:{width:W().UM-ge,flexShrink:0}})]})}function Ae(e){const{timestamp:t,navigableBlockId:i,rootStore:o}=e,s=(0,r().v3)();if(t<new Date("2018-10-26").getTime())return null;const n=j().A.getIntl().formatMessage({defaultMessage:"View version for this update",id:"activitySection.viewVersionForUpdate.tooltip"}),a=()=>{const e=C().Bv.createChildStore(o,{table:h().ev,id:i});T().WE({environment:s,blockStore:e,openSnapshotNearTimestamp:t.toString(),from:"activity"})};return(0,re.jsx)(ee().A,{renderTooltip:()=>n,render:e=>(0,re.jsx)(J().A,{ariaLabel:n,onClick:a,icon:I().L,...e})})}function xe(e){const{children:t}=e,i=(0,u().IS)((e=>({container:{borderRadius:"100%",display:"flex",flexShrink:0,justifyContent:"center",alignItems:"center",height:le,width:le,backgroundColor:e.surface.elevated,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary},icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,re.jsx)("div",{style:i.container,children:t})}const _e=o.memo(me);var je=()=>i(493823);const Re=function(e){const{accessRequestStore:t,teamStore:o}=e,n=(0,r().v3)(),a=(0,b().tz)(),{isRequestResolved:d,resolvedStatus:l,resolvedTime:c}=(0,s().K8)((()=>({isRequestResolved:t.isResolvedTeamMembershipRequest(),resolvedStatus:t.getStatus(),resolvedTime:t.getResolvedTime()})),[t]),m=(0,s().K8)((()=>{const e=t.getResolvedById();if(!e)return;const i=C().LU.createChildStore(t,{table:y().oo,id:e});return i?i.getDisplayName(a):void 0}),[t,a]),g=async e=>{await i(350648).Jk({environment:n,teamStore:o,accessRequestStore:t,status:e})},v=(0,u().IS)((e=>({container:{display:"flex",alignItems:"center"},redesignedContainer:{display:"flex",alignItems:"center",fontSize:14,color:e.mediumTextColor},approveButton:{height:26,paddingLeft:8,paddingRight:8,fontSize:12,marginRight:10,fontWeight:500,boxShadow:e.shadow2XS,color:e.regularTextColor},declineButton:{height:26,paddingLeft:8,paddingRight:8,color:e.regularTextColor}})),[]);return(0,re.jsx)("div",{style:v.container,children:d?(0,re.jsx)("div",{style:v.redesignedContainer,children:"approved"===l?(0,re.jsx)(b().sA,{defaultMessage:"Approved by {grantedBy} on {resolvedTime}",id:"approveTeamMembershipActivityButton.requestApprovedWithTime.title",values:{grantedBy:m,resolvedTime:(0,M().W_)(Math.min(c??0,Date.now()),"medium_with_time",(0,w().H)(a))}}):(0,re.jsx)(b().sA,{defaultMessage:"Denied by {grantedBy} on {resolvedTime}",id:"approveTeamMembershipActivityButton.requestDeniedWithTime.title",values:{grantedBy:m,resolvedTime:(0,M().W_)(Math.min(c??0,Date.now()),"medium_with_time",(0,w().H)(a))}})}):(0,re.jsxs)("div",{children:[(0,re.jsx)(ne,{children:(0,re.jsx)(je().p,{isGray:!0,size:"xs",style:v.approveButton,onClick:()=>g("approved"),children:(0,re.jsx)(b().sA,{defaultMessage:"Approve",id:"approveTeamMembershipActivityButton.approveButton.label"})})}),(0,re.jsx)(ne,{children:(0,re.jsx)(je().p,{isGray:!0,size:"xs",style:v.approveButton,onClick:()=>g("rejected"),children:(0,re.jsx)(b().sA,{defaultMessage:"Deny",id:"approveTeamMembershipActivityButton.denyButton.label"})})})]})})};var ke=()=>i(764880),Ce=()=>i(824862),Me=()=>i(701763),we=()=>i(209660),Ke=()=>i(973189);const Ie=function(e){const{accessRequestStore:t,effectiveAccessRequestType:i,onApprove:o,onReject:n,spaceStore:a}=e,d=(0,r().v3)(),c=(0,s().K8)((()=>t.isDefined()),[t]),m=(0,s().K8)((()=>t.getModel()),[t]),g=(0,s().K8)((()=>a.canAdmin()),[a]),v=(0,s().K8)((()=>a.canEditMembership()),[a]),h=(0,s().K8)((()=>null==m?void 0:m.isResolved()),[m]),p=(0,s().K8)((()=>null==m?void 0:m.isGuestInviteRequest()),[m]),f=(0,l().X)("workspace_member_access_notif_polish"),y=(0,u().IS)((e=>({viewAllButton:{height:26,paddingLeft:8,paddingRight:8,color:e.regularTextColor,fontSize:14},secondaryButtonForGuestInvites:{height:26,paddingLeft:8,paddingRight:8},actionButton:{height:28,paddingLeft:12,paddingRight:12,boxShadow:e.shadow2XS,fontSize:14,color:e.regularTextColor},notifContainer:{display:"flex",alignItems:"center",gap:p||!f?10:8},guestApproveButton:{height:28,paddingLeft:8,paddingRight:8,boxShadow:e.shadow2XS,fontSize:12,color:e.regularTextColor,fontWeight:500}})),[p,f]),S="space_membership_request"===i;return c?h?(0,re.jsx)(Te,{accessRequestStore:t,spaceStore:a}):p&&!g||S&&!v?null:(0,re.jsxs)("div",{style:y.notifContainer,children:[(0,re.jsx)(ne,{children:(0,re.jsx)(je().p,{isGray:!0,size:"xs",onClick:o,style:p||!f?y.guestApproveButton:y.actionButton,children:(0,re.jsx)(b().sA,{defaultMessage:"Approve",id:"approveSpaceMembershipActivityAction.approveButton.label"})})}),(0,re.jsx)(ne,{children:(0,re.jsx)(je().p,{isGray:!0,size:"xs",onClick:n,style:p||!f?y.secondaryButtonForGuestInvites:y.actionButton,children:(0,re.jsx)(b().sA,{defaultMessage:"Deny",id:"approveSpaceMembershipActivityAction.denyButton.label"})})}),!d.device.isMobile&&(0,re.jsx)(ne,{children:(0,re.jsx)(je().p,{isGray:!0,size:"xs",onClick:()=>{Me().Sp(d,{disable_membership_requests:a.getDisableMembershipRequests()}),we().Ow({currentTab:"members",subtab:Ke().d.Requests})},style:p||!f?y.secondaryButtonForGuestInvites:y.viewAllButton,children:p||!f?(0,re.jsx)(b().sA,{defaultMessage:"View all requests",id:"approveSpaceMembershipActivityAction.viewAllRequests.label"}):(0,re.jsx)(b().sA,{defaultMessage:"View all",id:"approveSpaceMembershipActivityAction.viewAll.label"})})})]}):null};function Be(e,t,i){if(e===y().oo){const o=i.getRecordValue({table:e,id:t});if(o)return(0,ke().A7)(o)}if(e===Ce().GP){const o=i.getRecordValue({table:e,id:t});if(o)return(0,ke().qt)(o)}}function qe(e){const{pointer:t,accessRequestStore:i}=e,{table:o,id:r}=t,n=(0,s().K8)((()=>B().oE([Be(o,r,i)])),[o,r,i]),a=(0,s().K8)((()=>(0,c().bD)(n,(0,k()._m)())),[n]);return(0,re.jsx)(re.Fragment,{children:a})}function Te(e){const{accessRequestStore:t,spaceStore:i}=e,o=(0,b().tz)(),r=(0,u().DP)(),n=(0,s().K8)((()=>t.getModel()),[t]),a=(0,s().K8)((()=>t.getStatus()),[t]),d=(0,s().K8)((()=>t.getResolvedTime()),[t]),{isResolved:l,resolveByPointer:c}=(0,s().K8)((()=>({isResolved:(null==n?void 0:n.isResolved())??!1,resolveByPointer:null==n?void 0:n.getResolvedByPointer(i.id)})),[n,i.id]);if(!n)return null;const m=l&&c&&(0,re.jsx)(qe,{accessRequestStore:t,pointer:c});return(0,re.jsx)("div",{style:{fontSize:14,color:r.mediumTextColor},children:"approved"===a?(0,re.jsx)(b().sA,{defaultMessage:"Approved by {grantedBy} on {resolvedTime}",id:"approveSpaceMembershipActivityAction.requestApprovedWithTime.title",values:{grantedBy:m,resolvedTime:(0,M().W_)(Math.min(d??1/0,Date.now()),"medium_with_time",(0,w().H)(o))}}):(0,re.jsx)(b().sA,{defaultMessage:"Denied by {grantedBy} on {resolvedTime}",id:"approveSpaceMembershipActivityAction.requestDenied.title",values:{grantedBy:m,resolvedTime:(0,M().W_)(Math.min(d??1/0,Date.now()),"medium_with_time",(0,w().H)(o))}})})}var Pe=()=>i(125565),Le=()=>i(68263),Ne=()=>i(310442),Oe=()=>i(848259),Ee=()=>i(579627),Ue=()=>i(246826),De=()=>i(731320),ze=()=>i(963575),Fe=()=>i(351360),We=()=>i(715392),He=()=>i(12296),Ve=()=>i(912913);const $e=i(757695).default.createClass(void 0,{name:"RoleStore"});const Ge=function(e){const{accessRequestStore:t,targetBlockStore:i,notification:o,initialRole:r,rootStore:n,activity:a,tabArgs:d}=e,l=(0,s().uB)(void 0,$e),c=(0,s().K8)((()=>t.getValue()),[t]),u=(0,s().K8)((()=>i.canAdmin()),[i]);return c?(0,v().z)(c)?(0,re.jsx)(nt,{accessRequestStore:t,accessRequestValue:c}):u?(0,re.jsx)(st,{accessRequestStore:t,notification:o,targetBlockStore:i,initialRole:r,roleStore:l,accessRequestValue:c,rootStore:n,activity:a,tabArgs:d}):null:null};function Ye(){const e=(0,u().IS)((e=>({banner:{borderRadius:ze().A.borderRadius,padding:"5px 8px",background:e.accentColors.yellow[50],marginBottom:12,fontSize:A().J.UISmall.desktop,lineHeight:A().K_.UISmall.desktop,fontWeight:A().Wy.regular,color:e.accentColors.yellow[500]}})),[]);return(0,re.jsx)("div",{style:e.banner,children:(0,re.jsx)(b().sA,{defaultMessage:"Make sure you trust this external user before sharing any content",id:"grantPageAccessActivityAction.externalWarning"})})}function Xe(e,t){const i=e.getValue();if(!i)return;const o=t.getPermissionItems();for(const r of o){if(i.for_actor_table===y().oo&&(0,Le().B2)(r)&&r.user_id===i.for_actor_id)return r;if(i.for_actor_table===Ce().GP&&(0,Le().P3)(r)&&r.bot_id===i.for_actor_id)return r}}function Je(e){return{tab:Oe().jD(),activityId:null==e?void 0:e.activity_id,notificationId:null==e?void 0:e.id}}function Qe(e,t){const i={height:26,paddingLeft:8,paddingRight:8,boxShadow:t.shadow2XS,fontSize:12,marginRight:10};return e?i:{...i,color:t.regularTextColor,fontWeight:500}}function Ze(e){const{notification:t,accessRequestStore:i,activity:o,tabArgs:s}=e,n=(0,r().v3)();return t?t.visited?null:(0,re.jsx)(ne,{children:(0,re.jsx)(je().p,{isGray:!0,size:"xs",onClick:e=>{(0,He().jU)({...s,environment:n,activity:o}),function(e,t,i,o){o&&(0,O().SQ)({event:e,context:O().y$.NotificationClick,callback:()=>{P().createAndCommit({userAction:"GrantPageAccessActivityAction.handleArchive",environment:i,canUndo:!0,perform:e=>{q().s4({notification:o,rootStore:t,transaction:e})}});const e=t.id,r=Je(o);Me().Fs(i,{...r,requestId:e})}})}(e,i,n,t)},style:{height:26,paddingLeft:8,paddingRight:8},children:(0,re.jsx)(b().sA,{defaultMessage:"Deny",id:"grantPageAccessActivityAction.ignoreButton.label.deny"})})}):null}function et(e,t,i,o){const r=Xe(e,t),s=r&&r.role;return o.state||s||i}function tt(e,t,i,o,r){var s;const n=function(e,t,i,o){const r=e.getValue();if(r)return r.for_actor_table===y().oo?{type:"user_permission",user_id:r.for_actor_id,role:et(e,t,i,o)}:r.for_actor_table===Ce().GP?{type:"bot_permission",bot_id:r.for_actor_id,role:et(e,t,i,o)}:void(r.for_actor_table!==Ne().yj&&(0,S().HB)(r.for_actor_table))}(t,i,o,r);if(!n)return{};if(Xe(t,i))return{permissionItem:n};const a=null===(s=Fe().default.getState().currentSpaceStore)||void 0===s?void 0:s.id;if(!a)return{};if("user_permission"===n.type){const i=We().W.getData(e,{userId:n.user_id,spaceId:a});if(i&&"none"!==i.membership_type){return{type:"existingUser",value:t.getRecordModel({table:y().oo,id:n.user_id}),permissionItem:n}}return{permissionItem:n}}if("bot_permission"===n.type){const e=t.getRecordModel({table:Ce().GP,id:n.bot_id}),i=a&&a===(null==e?void 0:e.space_id)&&e.alive;return e&&!i?{type:"bot",value:e,permissionItem:n}:{permissionItem:n}}(0,S().HB)(n)}function it(e,t,i){if(e===y().oo){const o=i.getRecordModel({table:e,id:t});if(o)return(0,ke().A7)(o)}if(e===Ce().GP){const o=i.getRecordModel({table:e,id:t});if(o)return(0,ke().qt)(o)}}async function ot(e,t,i,o,r,s,n,a){if(o.getKeyStore("for_actor_table").getValue()!==y().oo)return;const d=o.getKeyStore("for_actor_id").getValue(),l=(0,De().zt)({userId:d,store:i}).role,c=tt(t,o,i,r,s);if(!("permissionItem"in c))return;a&&(c.permissionItem.role=a);const u=t.currentUser.id;if(u){if("type"in c&&!a){let e;if("existingUser"===c.type){e=(await Ee().eP({environment:t,store:i,inviteTargets:[c],inviteRole:c.permissionItem.role,isOnboarding:!1,invite:{inviteOrigin:"page_request_access"}})).success}else if("bot"===c.type){e=(await Ee().eP({environment:t,store:i,inviteTargets:[c],inviteRole:void 0,isOnboarding:!1,invite:{inviteOrigin:"page_request_access"}})).success}else(0,S().HB)(c);if(!e)return}(0,O().SQ)({event:e,context:O().y$.NotificationClick,callback:()=>{P().createAndCommit({userAction:"GrantPageAccessActivityAction.handleGrantPageAccess",environment:t,canUndo:!0,perform:e=>{"type"in c||Ee().zP({environment:t,transaction:e,store:i,permissionItems:[c.permissionItem]}),n&&q().ZB({notification:n,rootStore:i,transaction:e,read:!0}),Ue().zv({store:o,transaction:e,data:{granted_time:Date.now(),granted_by_table:y().oo,granted_by_id:u,resolved_time:Date.now(),resolved_by_table:y().oo,resolved_by_id:u,status:"approved"}})}});const e=o.isDefined(),r=o.id,s=o.getKeyStore("created_time").getValue(),a=o.getKeyStore("resolved_time").getValue(),d=e&&s&&a?a-s:void 0;Me().qI(t,{requestId:r,timeElapsedSinceRequest:d,newAccessLevel:c.permissionItem.role,prevAccessLevel:l,...Je(n)})}})}}function rt(e){const{table:t,id:i,accessRequestStore:o}=e,r=(0,s().K8)((()=>{const e=B().oE([it(t,i,o)]);return(0,c().bD)(e,{...(0,k()._m)()})}),[t,i,o]);return(0,re.jsx)(re.Fragment,{children:r})}function st(e){const{accessRequestValue:t,accessRequestStore:i,notification:n,targetBlockStore:a,initialRole:d,roleStore:l,rootStore:c,activity:m,tabArgs:g}=e,f=(0,u().DP)(),S=(0,r().v3)(),A=(0,o.useCallback)((e=>function(e,t,i,o,r){const s=i.id,n=o.state;o.setState(e),Me().Sd(t,{requestId:s,previousAccessLevel:n,newAccessLevel:e,...Je(r)})}(e,S,i,l,n)),[S,i,l,n]),x=t.parent_table===p().NX,j=(0,s().K8)((()=>Xe(i,a)),[i,a]),R=(0,s().K8)((()=>et(i,a,d,l)),[i,a,d,l]),k=(0,v().HH)(t),C=(0,s().K8)((()=>(0,_().t)(t,c)),[t,c]),M=(0,s().K8)((()=>a.getType()),[a]);if(j&&!x){const e=(0,re.jsx)(rt,{accessRequestStore:i,table:t.for_actor_table,id:t.for_actor_id}),o=j.role===R;if(!k||k&&(0,Le().p2)(j.role))return(0,re.jsxs)(re.Fragment,{children:[k?(0,re.jsx)(Pe().A,{isSecondaryColor:!0,isMultiline:!0,style:{marginBottom:6},children:(0,re.jsx)(b().sA,{defaultMessage:"{requestingUser} already has edit access.",id:"grantPageAccessActivityAction.alreadyHasEditAccess.label",values:{requestingUser:e}})}):(0,re.jsx)(Pe().A,{isSecondaryColor:!0,isMultiline:!0,style:{marginBottom:6},children:(0,re.jsx)(b().sA,{defaultMessage:"{requestingUser} already has access.",id:"grantPageAccessActivityAction.alreadyHasAccess.label",values:{requestingUser:e}})}),(0,re.jsx)(ne,{children:(0,re.jsx)(Ve().Ay,{upgradeButtonName:"user_permission_item",role:R,table:h().ev,blockType:M,type:t.for_actor_table===y().oo?"user_permission":"bot_permission",onChange:A,isInvite:!0,buttonStyle:Qe(!0,f)})}),(0,re.jsx)(ne,{children:(0,re.jsx)(je().p,{isGray:!0,size:"xs",onClick:e=>ot(e,S,a,i,d,l,n),style:Qe(o,f),children:(0,re.jsx)(b().sA,{defaultMessage:"Change",id:"grantPageAccessActivityAction.changePermissionButton.label"})})}),(0,re.jsx)(Ze,{notification:n,accessRequestStore:i,activity:m,tabArgs:g})]})}return(0,re.jsxs)(re.Fragment,{children:[C&&(0,re.jsx)(Ye,{}),(0,re.jsx)(ne,{children:!k&&(0,re.jsx)(Ve().Ay,{upgradeButtonName:"user_permission_item",role:R,table:h().ev,blockType:M,type:t.for_actor_table===y().oo?"user_permission":"bot_permission",onChange:A,isInvite:!0,buttonStyle:Qe(!1,f)})}),(0,re.jsx)(ne,{children:k?(0,re.jsx)(je().p,{isGray:!0,size:"xs",onClick:e=>{n&&(0,He().hx)({...g,environment:S,activity:m}),ot(e,S,a,i,d,l,n,"read_and_write")},style:Qe(!1,f),children:(0,re.jsx)(b().sA,{defaultMessage:"Approve",id:"grantPageAccessActivityAction.grantEditAccessButton.label.approve"})}):(0,re.jsx)(je().p,{isGray:!0,size:"xs",onClick:e=>{n&&(0,He().hx)({...g,environment:S,activity:m}),ot(e,S,a,i,d,l,n)},style:Qe(!1,f),children:(0,re.jsx)(b().sA,{defaultMessage:"Approve",id:"grantPageAccessActivityAction.grantAccessButton.label.approve"})})}),(0,re.jsx)(Ze,{notification:n,accessRequestStore:i,activity:m,tabArgs:g})]})}function nt(e){const{accessRequestValue:t,accessRequestStore:i}=e,o=(0,b().tz)(),r=(0,u().DP)(),s=(0,re.jsx)(rt,{accessRequestStore:i,table:t.granted_by_table,id:t.granted_by_id}),n=(0,M().W_)(Math.min(t.granted_time,Date.now()),"medium_with_time",(0,w().H)(o));return(0,re.jsx)("div",{style:{fontSize:12,color:r.text.secondary},children:(0,re.jsx)(b().sA,{defaultMessage:"Approved by {grantedBy} on {time}",id:"grantPageAccessActivityAction.accessGrantedWithTime.title",values:{grantedBy:s,time:n}})})}var at=()=>i(77179),dt=()=>i(360137),lt=()=>i(423213);function ct(e){var t;const i=(null===(t=e.profileEmail)||void 0===t?void 0:t.charAt(0).toUpperCase())??"?",o=(0,u().IS)((e=>({circleStyle:{width:20,height:20,borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",borderColor:e.UIUserAvatarIdleOutline,borderWidth:1,borderStyle:"solid",marginRight:6},letterStyle:{color:e.mediumTextColor,fontWeight:A().Wy.medium,fontSize:12}})),[]);return(0,re.jsx)("div",{style:o.circleStyle,children:(0,re.jsx)("span",{style:o.letterStyle,children:i})})}function ut(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{notification:d,tab:m,source:p}=o,f=(0,r().v3)(),y=(0,s().K8)((()=>t.getEdits()),[t]),b=y[0],S=(0,u().IS)((()=>({message:{marginBottom:8},messageLabel:{whiteSpace:"pre-wrap"},titleStyle:{fontSize:14,display:"flex"}})),[]),A=(0,s().K8)((()=>C().v3.createChildStore(i,{table:v().O,id:t.access_request_id})),[t,i]),x=(0,s().K8)((()=>A.getModel()),[A]),j=(0,s().K8)((()=>Boolean(x&&(0,_().t)(x,i))),[x,i]),k=x&&(0,re.jsx)(gt,{activity:t,accessRequest:x,rootStore:i,tabArgs:o}),M=b.message,w=(0,s().K8)((()=>(0,c().Ln)({edits:y,rootStore:i})),[y,i]),K=(0,s().K8)((()=>{if(null!=x&&x.isGuestInviteRequest()){const e=x.getAttributes().permission_records_and_roles[0],r=e&&C().Bv.createChildStore(i,{table:h().ev,id:e.id}),s=e.role;if(r.isDefined())return;return(0,re.jsx)(lt().A,{titledRecordStore:r,activity:t,tabArgs:o,getRecordModel:i.getRecordModel,permissionRole:s,shouldRenderEmpty:!0})}}),[o,x,t,i]),I=(0,s().K8)((()=>{if(t.navigable_block_id)return C().Bv.createChildStore(i,{table:h().ev,id:t.navigable_block_id})}),[t,i]),B=(0,s().K8)((()=>{if(!I)return;const e=I.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:g().y8.Notification}):void 0}),[I,i,t]),q=(0,R().I)({spaceStore:i,request:x}),T=(0,l().X)("workspace_member_access_notif_polish");return k?(0,re.jsxs)(_e,{header:(0,re.jsx)("span",{children:k}),isFirst:n,isLast:a,isPrivate:!1,rootStore:i,notification:d,icon:(0,re.jsx)(at().H8,{authors:w,size:le,style:{marginTop:0,marginRight:0},iconStyle:{right:-3},showAvatarShadow:!1,showWarningIcon:j}),showSnapshotButton:!1,url:B,...(0,He().$5)({notification:d,activity:t,environment:f,tab:m}),children:[T&&"space_membership_request"===q&&(0,re.jsx)(mt,{rootStore:i,accessRequestModel:x}),M&&(0,re.jsx)("div",{style:S.message,children:(0,re.jsx)(Pe().A,{isMultiline:!0,style:S.messageLabel,children:M})}),K&&(0,re.jsx)("div",{style:S.titleStyle,children:K}),(0,re.jsx)(yt,{activity:t,accessRequestStore:A,rootStore:i,source:p,notification:d,tabArgs:o})]}):null}function mt(e){const{rootStore:t,accessRequestModel:i}=e,o=(0,s().K8)((()=>i.getForActorId()===i.getCreatedById()),[i]),r=(0,s().K8)((()=>i.getForActorPointer(t.id)),[i,t.id]),n=r.table===y().oo?C().LU.createChildStore(t,r):void 0,a=(0,s().K8)((()=>null==n?void 0:n.getModel()),[n]),d=(0,s().K8)((()=>null==a?void 0:a.getEmail()),[a]),l=(0,s().K8)((()=>{if(!o)return d;const e=null==a?void 0:a.getFullName(j().A.getIntl());return e?`${e} (${d})`:d}),[o,a,d]),c=(0,u().IS)((()=>({inviteeBox:{display:"flex",alignItems:"center",marginBottom:8},inviteePhrase:{fontWeight:A().Wy.medium,fontSize:14}})),[]);return(0,re.jsxs)("div",{style:c.inviteeBox,children:[(0,re.jsx)(ct,{profileEmail:l}),(0,re.jsx)("span",{style:c.inviteePhrase,children:l})]})}function gt(e){const{activity:t,accessRequest:i,rootStore:o,tabArgs:r}=e,s=(0,R().I)({spaceStore:o,request:i});if(!s)return null;switch(s){case"guest_invite_request":return(0,re.jsx)(pt,{activity:t,accessRequest:i,rootStore:o});case"space_membership_request":return(0,re.jsx)(ht,{activity:t,accessRequest:i,rootStore:o});case"team_membership_request":return(0,re.jsx)(ft,{activity:t,rootStore:o,tabArgs:r});case"page_access_request":return(0,re.jsx)(vt,{activity:t,tabArgs:r,rootStore:o,accessRequest:i});default:(0,S().HB)(s)}}function vt(e){const{activity:t,rootStore:i,accessRequest:o}=e,r=(0,s().K8)((()=>t.getEdits()),[t]),n=(0,s().K8)((()=>{const e=o.getForActorPointer(i.id),t=e.table===y().oo?C().LU.createChildStore(i,e):void 0,r=null==t?void 0:t.getModel();return null==r?void 0:r.getEmail()}),[o,i]),a=(0,s().K8)((()=>Boolean(o&&(0,_().t)(o,i))),[o,i]),d=(0,s().K8)((()=>(0,c().Ln)({edits:r,rootStore:i})),[r,i]),l=(0,s().K8)((()=>a&&n?(0,c().Jd)(n,(0,k()._m)()):(0,c().bD)(d,(0,k()._m)())),[a,n,d]),u=(0,s().K8)((()=>{if(t.navigable_block_id)return C().Bv.createChildStore(i,{table:h().ev,id:t.navigable_block_id})}),[t,i]),m=(0,s().K8)((()=>o.isEditPageAccessRequest()),[o]);return u?m?(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested edit access to} other {{authorOrAuthors} requested edit access to}}",values:{numberOfAuthors:d.length,authorOrAuthors:l},id:"activity.editAccessRequested.header.short"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested access to} other {{authorOrAuthors} requested access to}}",values:{numberOfAuthors:d.length,authorOrAuthors:l},id:"activity.accessRequested.header.short"}):null}function ht(e){const{activity:t,accessRequest:i,rootStore:o}=e,r=(0,u().IS)((()=>({inviteePhrase:{fontWeight:A().Wy.semibold}})),[]),n=(0,s().K8)((()=>t.getEdits()),[t]),a=(0,s().K8)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=a.table===y().oo?C().LU.createChildStore(o,a):void 0,m=(0,s().K8)((()=>null==d?void 0:d.getModel()),[d]),g=(0,s().K8)((()=>null==m?void 0:m.getEmail()),[m]),v=(0,s().K8)((()=>i.getForActorId()===i.getCreatedById()),[i]),h=(0,s().K8)((()=>(0,c().Ln)({edits:n,rootStore:o})),[n,o]),p=(0,s().K8)((()=>(0,c().bD)(h,(0,k()._m)())),[h]),f=(0,s().K8)((()=>{if(!v)return g;const e=null==m?void 0:m.getFullName(j().A.getIntl());return e?`${e} (${g})`:g}),[v,m,g]),S=(0,l().X)("workspace_member_access_notif_polish");return m&&a.table===y().oo?v?(0,re.jsx)(b().sA,{defaultMessage:"{invitee} requested to become a workspace member",values:{invitee:(0,re.jsx)("span",{style:r.inviteePhrase,children:f})},id:"activity.accessRequestedMembershipFromGuest.header"}):S?(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add a workspace member} other {{authorOrAuthors} requested to add workspace members}}",values:{numberOfAuthors:h.length,authorOrAuthors:p},id:"activity.accessRequestedMembershipNoInvitee.header.short"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add {invitee} as a workspace member} other {{authorOrAuthors} requested to add {invitee} as a workspace member}}",values:{numberOfAuthors:h.length,authorOrAuthors:p,invitee:(0,re.jsx)("span",{style:r.inviteePhrase,children:f})},id:"activity.accessRequestedMembership.header.short"}):null}function pt(e){const{activity:t,accessRequest:i,rootStore:o}=e,r=(0,s().K8)((()=>t.getEdits()),[t]),n=(0,u().IS)((()=>({inviteePhrase:{fontWeight:A().Wy.semibold}})),[]),a=(0,s().K8)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=a.table===y().oo?C().LU.createChildStore(o,a):void 0,l=(0,s().K8)((()=>null==d?void 0:d.getModel()),[d]),m=(0,s().K8)((()=>null==l?void 0:l.getEmail()),[l]),g=(0,s().K8)((()=>(0,c().Ln)({edits:r,rootStore:o})),[r,o]),v=(0,s().K8)((()=>(0,c().bD)(g,{...(0,k()._m)()})),[g]);return(0,s().K8)((()=>i.isGuestInviteRequest()),[i])&&l&&a.table===y().oo?(0,re.jsx)(b().sA,{defaultMessage:"{requestorsPhrase} requested inviting {guestEmail} as a guest",values:{requestorsPhrase:v,guestEmail:(0,re.jsx)("span",{style:n.inviteePhrase,children:m})},id:"activity.guestInviteRequest.header.short"}):null}function ft(e){const{activity:t,rootStore:i,tabArgs:o}=e,r=(0,s().K8)((()=>t.getEdits()),[t]),n=(0,s().K8)((()=>(0,c().Ln)({edits:r,rootStore:i})),[r,i]),a=(0,s().K8)((()=>(0,c().bD)(n,{...(0,k()._m)()})),[n]),d=(0,s().K8)((()=>{if(t.team_id)return C().h4.createChildStore(i,{table:f().yK,id:t.team_id})}),[t,i]);return r&&d?(0,re.jsx)(b().sA,{defaultMessage:"{user} requested to join {teamName}",values:{user:(0,re.jsx)("span",{style:{fontWeight:A().Wy.semibold},children:a}),teamName:(0,re.jsx)(lt().A,{titledRecordStore:d,getRecordModel:i.getRecordModel,activity:t,tabArgs:o})},id:"activity.teamAccessRequest.header.short"}):null}function yt(e){const{activity:t,accessRequestStore:i,rootStore:n,notification:a,tabArgs:d}=e,l=(0,r().v3)(),c=(0,s().K8)((()=>t.getEdits()),[t])[0],g=(0,s().K8)((()=>i.getParentTable()),[i]),v=(0,s().K8)((()=>i.getParentId()),[i]),y=(0,s().K8)((()=>t.navigable_block_id),[t]),b=(0,s().K8)((()=>i.getModel()),[i]),A=(0,s().K8)((()=>b&&(0,m().C)(b)),[b]),_=(0,R().I)({spaceStore:n,request:b}),j=(0,s().K8)((()=>{if("page_access_request"===A){var e;const t=null==b||null===(e=b.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[b,A]),k=(0,o.useCallback)((async()=>{if(A&&_&&b)if("space_membership_request"===_&&"space_membership_request"===A)await x().p4({status:"approved",environment:l,requests:[b],store:n,from:"notification"});else if("space_membership_request"===_&&"guest_invite_request"===A)await x().KB({status:"approved",environment:l,store:n,requests:[b],from:"notification"});else{if("guest_invite_request"!==A)return;await x().aV({status:"approved",environment:l,requests:[b],from:"notification"})}}),[l,b,n,_,A]),M=(0,o.useCallback)((async()=>{if(A&&b)if("space_membership_request"===A)await x().p4({status:"rejected",environment:l,requests:[b],store:n,from:"notification"});else if("guest_invite_request"===A)await x().aV({status:"rejected",environment:l,requests:[b],from:"notification"});else{if("team_membership_request"===A||"page_access_request"===A)return;(0,S().HB)(A)}}),[l,b,n,A]),w=(0,u().IS)((e=>({actionPrimaryContainer:{paddingTop:4,paddingBottom:0,paddingRight:0},actionButton:(0,dt().Ei)(e)})),[]),K=y?C().Bv.createChildStore(n,{table:h().ev,id:y}):void 0,I=(0,s().K8)((()=>g===h().ev&&Boolean(null==K?void 0:K.canAdmin())),[g,K]);if(!(g&&v&&_&&c))return null;if("page_access_request"===_)return I&&K?(0,re.jsx)("div",{style:w.actionPrimaryContainer,children:(0,re.jsx)(Ge,{accessRequestStore:i,targetBlockStore:K,initialRole:j,buttonStyle:w.actionButton,notification:a,rootStore:n,activity:t,tabArgs:d})}):null;if("space_membership_request"===_||"guest_invite_request"===_){const e=C().SL.createChildStore(n,{table:p().NX,id:v});return(0,re.jsx)("div",{style:w.actionPrimaryContainer,children:(0,re.jsx)(Ie,{effectiveAccessRequestType:_,accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:w.actionButton,notification:a,onApprove:k,onReject:M})})}if("team_membership_request"===_){const e=C().h4.createChildStore(n,{table:f().yK,id:v});return(0,re.jsx)("div",{style:w.actionPrimaryContainer,children:(0,re.jsx)(Re,{accessRequestStore:i,teamStore:e})})}(0,S().HB)(_)}const bt=o.memo(ut);function St(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),m=(0,s().K8)((()=>t.getEdits()),[t]),p=(0,s().K8)((()=>C().v3.createChildStore(i,{table:v().O,id:t.access_request_id})),[t,i]),f=(0,s().K8)((()=>{const e=p.getModel();return e&&e.isGuestInviteRequest()&&e.isResolved()||e&&e.isEditPageAccessRequest()&&e.isApproved()?e:void 0}),[p]),y=(0,s().K8)((()=>Boolean(null==f?void 0:f.isEditPageAccessRequest())),[f]),b=(0,s().K8)((()=>(0,c().Ln)({edits:m,rootStore:i})),[m,i]),S=(0,s().K8)((()=>{if(t.navigable_block_id)return C().Bv.createChildStore(i,{table:h().ev,id:t.navigable_block_id})}),[t,i]),A=f&&(0,re.jsx)(At,{activity:t,accessRequest:f,rootStore:i,isEditAccessRequest:y}),x=(0,s().K8)((()=>{if(!S)return;const e=S.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:g().y8.Notification}):void 0}),[S,i,t]);return A&&S?(0,re.jsx)(_e,{header:(0,re.jsx)("span",{children:A}),isFirst:n,isLast:a,isPrivate:!1,rootStore:i,notification:d,icon:(0,re.jsx)(at().H8,{authors:b,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:x,...(0,He().$5)({notification:d,activity:t,environment:u,tab:l})}):null}function At(e){const{accessRequest:t,rootStore:i,isEditAccessRequest:o}=e,r=(0,u().IS)((()=>({inviteePhrase:{fontWeight:A().Wy.medium}})),[]),n=(0,s().K8)((()=>i.getRecordModel({id:t.getForActorId(),table:t.getForActorTable()})),[t,i]),a=(0,s().K8)((()=>null==n?void 0:n.getEmail()),[n]),d=(0,s().K8)((()=>{const e=(null==n?void 0:n.isUser())&&(null==n?void 0:n.getFullName(j().A.getIntl()));return e?`${e} (${a})`:a}),[n,a]),l=(0,s().K8)((()=>i.getRecordModel({id:t.getResolvedById(),table:t.getResolvedByTable()})),[t,i]),m=(0,s().K8)((()=>l&&(0,c().bD)([l],{fontWeight:A().Wy.medium})),[l]),g=(0,s().K8)((()=>t.getStatus()),[t]);return m&&d?o?(0,re.jsx)(b().sA,{defaultMessage:"{resolverPhrase} approved your request to edit the page",values:{resolverPhrase:m},id:"activity.EditAccessRequestResolvedMembership.approved.header.short"}):"approved"===g?(0,re.jsx)(b().sA,{defaultMessage:"{resolverPhrase} approved your request to invite {invitee} as a guest",values:{resolverPhrase:m,invitee:(0,re.jsx)("span",{style:r.inviteePhrase,children:d})},id:"activity.AccessRequestResolvedMembership.approved.header.short"}):"rejected"===g?(0,re.jsx)(b().sA,{defaultMessage:"{resolverPhrase} denied your request to invite {invitee} as a guest",values:{resolverPhrase:m,invitee:(0,re.jsx)("span",{style:r.inviteePhrase,children:d})},id:"activity.AccessRequestResolvedMembership.rejected.header.short"}):void(0,S().HB)(g):null}const xt=o.memo(St);var _t=i.n(i(842838)),jt=i.n(i(42833)),Rt=i.n(i(542922)),kt=()=>i(46220),Ct=()=>i(693954),Mt=()=>i(128713),wt=()=>i(145820),Kt=()=>i(498212),It=()=>i(435009),Bt=()=>i(492414),qt=()=>i(864943);const Tt=(0,b().YK)({errorTitle:{id:"appBuilderNotificationActivityError.formattedHeaderMessage.errorTitle",defaultMessage:"A workflow run has failed {numWorkflows, plural, one {} other {{numWorkflows} times}}"},errorButton:{id:"appBuilderNotificationActivityError.formattedHeaderMessage.errorButton",defaultMessage:"View {numWorkflows, plural, one {} other {last}} failed run"},actionTitle:{id:"appBuilderNotificationActivityError.formattedHeaderMessage.actionTitle",defaultMessage:"{workflowName} has sent you a message"},actionButton:{id:"appBuilderNotificationActivityError.formattedHeaderMessage.actionButton",defaultMessage:"View run"},customActionTitle:{id:"appBuilderNotificationActivityError.formattedHeaderMessage.customActionTitle",defaultMessage:"From {workflowName}: {customTitle}"}});function Pt(e){const{rootStore:t,activity:n,isLast:a,tabArgs:d,isFirst:l}=e,{tab:c,notification:m}=d,v=(0,r().v3)(),p=(0,s().K8)((()=>n.getEdits()),[n]),f=p.at(0),y=(0,s().K8)((()=>{if((0,S().O9)(f))return C().NU.createChildStore(t,{table:i(743246).C0,id:f.workflow_id,spaceId:t.getSpaceId()}).getData()}),[t,f]),{handleNavigateToAutomationRun:x,workflowRunUrl:_,navigableBlockStore:j,navigableBlockUrl:R}=function(e){let{edit:t,rootStore:i}=e;const o=(0,r().v3)(),n=(0,s().K8)((()=>{if((0,S().O9)(t)&&t.automation_run_id)return C().ty.createChildStore(i,{table:wt().QR,id:t.automation_run_id,spaceId:i.getSpaceId()})}),[i,t]),a=(0,s().K8)((()=>{if((0,S().O9)(t)&&t.navigable_block_id)return new(C().Bv)(o,{id:t.navigable_block_id,table:h().ev})}),[t,o]),d=(0,s().K8)((()=>{if(!(0,S().O9)(a))return!0;const e=a.getRole();return!e||!(0,Le().Tt)(e)}),[a]),l=(0,s().K8)((()=>{if((0,S().O9)(a))return(0,Bt().Ay)({store:a,preferPublicLink:!1,pageVisitSource:g().y8.Notification})}),[a]),c=(0,s().K8)((()=>{if(d||!(0,S().O9)(t))return;if(t.workflow_url)return t.workflow_url;const e=(0,S().O9)(n)?`&wfv=runs&wfk=${(0,Kt().Xw)(n.id)}`:"&wfv=runs";return`${l}${e}`}),[n,t,d,l]),u=(0,s().K8)((()=>()=>{a&&l&&c&&It().oo({environment:o,url:c})}),[o,a,l,c]);return{handleNavigateToAutomationRun:u,navigableBlockStore:a,navigableBlockUrl:l,workflowRunUrl:c}}({edit:f,rootStore:t}),k=(0,u().IS)((e=>({notificationContainer:{paddingTop:4,display:"flex",flexDirection:"column",rowGap:8},viewButton:{marginTop:8,height:26,fontWeight:A().Wy.medium},messageContainer:{alignItems:"center",color:e.text.secondary,display:"flex",fontSize:fe,justifyContent:"space-between",lineHeight:A().K_.UIRegular.desktop,paddingInlineEnd:12,position:"relative"},bodyContainer:{fontSize:fe,lineHeight:A().K_.UIRegular.desktop,wordBreak:"break-word"},headerName:{fontWeight:A().Wy.medium,display:"inline-flex"},customTitle:{display:"inline"}})),[]),M=(0,u().eP)(),w=(0,o.useCallback)((e=>{(0,O().SQ)({event:e,context:O().y$.NotificationClick,callback:()=>{P().createAndCommit({userAction:"AutomationTypecheckErrorRaisedActivity.viewError",environment:v,canUndo:!0,perform:e=>{q().ZB({notification:m,rootStore:t,transaction:e,read:!0})}}),x(),Oe().K4({tab:c,notificationId:null==m?void 0:m.id,environment:v,alreadyRead:Boolean(null==m?void 0:m.read),activity:n})}})}),[n,v,x,m,t,c]);if(!f||!y)return null;const K=(0,re.jsx)("div",{style:k.headerName,children:y.name});return(0,re.jsx)(_e,{header:"workflow-error"===f.app_builder_notification_type?(0,re.jsx)(b().sA,{...Tt.errorTitle,values:{numWorkflows:p.length}}):f.header_content?(0,re.jsx)(b().sA,{...Tt.customActionTitle,values:{workflowName:K,customTitle:f.header_content}}):(0,re.jsx)(b().sA,{...Tt.actionTitle,values:{workflowName:K}}),isFirst:l,isLast:a,isPrivate:!1,rootStore:t,notification:m,icon:(0,re.jsx)(Lt,{workflowName:y.name||"W",notificationType:f.app_builder_notification_type}),showSnapshotButton:!1,navigableBlockId:null==j?void 0:j.id,url:"workflow-error"===f.app_builder_notification_type?_:R,...(0,He().$5)({notification:m,activity:n,environment:v,tab:c}),children:"workflow-error"===f.app_builder_notification_type?(0,re.jsx)("div",{children:(0,re.jsx)(qt().A,{style:k.viewButton,onClick:w,size:"sm",children:(0,re.jsx)(b().sA,{...Tt.errorButton,values:{numWorkflows:p.length}})})}):(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{className:"dark"===M?"app-builder-notification-activity--dark":"app-builder-notification-activity--light",style:k.bodyContainer,dangerouslySetInnerHTML:{__html:_t().sanitize(Nt({markdown:f.body_content||""}))}}),(0,re.jsx)("div",{children:(0,re.jsx)(qt().A,{style:k.viewButton,onClick:w,size:"sm",children:(0,re.jsx)(b().sA,{...Tt.actionButton})})})]})})}function Lt(e){let{workflowName:t,notificationType:i}=e;const o=(0,u().IS)((e=>({icon:{fill:e.icon.uiRedPrimary,height:12,left:9,position:"absolute",top:14,width:12},firstLetter:{textTransform:"uppercase",color:e.text.secondary},workflowIcon:{color:e.text.secondary,padding:"3px"},wrapper:{position:"relative"}})),[]);return(0,re.jsx)(xe,{children:(0,re.jsx)("div",{style:o.wrapper,children:"workflow-error"===i?(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{style:o.firstLetter,children:t.charAt(0)}),(0,Ct().Q)(o.icon)]}):(0,kt().S)(o.workflowIcon)})})}function Nt(e){return Mt().uY({MarkdownIt:Rt(),LinkifyIt:jt(),markdown:e.markdown})}i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(898992),i(354520),i(581454);var Ot=()=>i(278132),Et=()=>i(912720),Ut=()=>i(989423),Dt=()=>i(704152);function zt(e){const{rootStore:t,activity:i,isLast:n,tabArgs:a,isFirst:d}=e,{tab:m,notification:v}=a,p=(0,b().tz)(),f=(0,r().v3)(),y=(0,s().K8)((()=>i.getEdits()),[i]),x=y.at(0),_=(0,u().IS)((e=>({notificationContainer:{paddingTop:4,display:"flex",flexDirection:"column",rowGap:8},editAutomation:{marginTop:8,height:26,fontWeight:A().Wy.medium},messageContainer:{alignItems:"center",color:e.text.secondary,display:"flex",fontSize:fe,justifyContent:"space-between",lineHeight:A().K_.UIRegular.desktop,paddingInlineEnd:12,position:"relative"},headerName:{fontWeight:A().Wy.medium,display:"inline-flex"}})),[]),j=(0,o.useMemo)((()=>new Set(y.map((e=>e.automation_id)))),[y]),R=(0,s().K8)((()=>{if(!(0,S().O9)(x))return!1;return!C().dn.createChildStore(t,{table:Et().yB,id:x.automation_id,spaceId:t.getSpaceId()}).getAlive()}),[t,x]),{handleNavigateToAutomation:k,navigableBlockStore:M,navigableBlockUrl:w}=function(e){let{edit:t,rootStore:i,uniqueAutomationIds:o}=e;const n=(0,r().v3)(),a=1===o.size,d=(0,s().K8)((()=>{if(!(0,S().O9)(t))return!1;return!C().dn.createChildStore(i,{table:Et().yB,id:t.automation_id,spaceId:i.getSpaceId()}).getAlive()}),[i,t]),l=(0,s().K8)((()=>{if((0,S().O9)(t))return new(C().Bv)(n,{id:t.automation_navigable_block_id,table:h().ev})}),[t,n]),u=(0,s().K8)((()=>{if(!(0,S().O9)(l))return!0;const e=l.getRole();return!e||!(0,Le().Tt)(e)}),[l]),m=(0,s().K8)((()=>{if((0,S().O9)(l))return(0,Bt().Ay)({store:l,preferPublicLink:!1,pageVisitSource:g().y8.Notification})}),[l]),v=(0,s().K8)((()=>u||!(0,S().O9)(t)?()=>{}:()=>{const e=t.automation_id;l&&m&&((0,Ut().u4)({environment:n,event:{eventName:"click_automation_typecheck_error_notification",eventProperties:{block_id:l.id,automation_id:e}}}),It().oo({environment:n,url:m,callback:async()=>await(0,c()._4)({environment:n,automationNavigableBlockStore:l,automationId:a&&!d?e:void 0,rootStore:i,source:"automation_typecheck_error_raised_notification"})}))}),[d,a,u,t,l,m,n,i]);return{handleNavigateToAutomation:v,navigableBlockStore:l,navigableBlockUrl:m}}({edit:x,rootStore:t,uniqueAutomationIds:j}),K=(0,s().K8)((()=>(0,c().DU)({recordId:null==M?void 0:M.id,recordType:h().ev,tab:m,rootStore:t,environment:f})),[M,m,t,f]),I=(0,s().K8)((()=>{const e=j.values().next().value;if(e){return t.getRecordStore(t,{table:Et().yB,id:e,spaceId:i.spaceId}).getNameWithDefault(p)}return""}),[i.spaceId,p,t,j]),B=(0,s().K8)((()=>[...j].map((e=>{const o=t.getRecordStore(t,{table:Et().yB,id:e,spaceId:i.spaceId}),r=o.getRole();return(0,S().O9)(r)&&(0,Le().Tt)(r)?o.getAlive()?o.getNameWithDefault(p):p.formatMessage(Ot().VS.automationDeletedName):p.formatMessage(Ot().VS.automationPrivateName)}))),[p,t,i,j]),T=(0,o.useCallback)((e=>{(0,O().SQ)({event:e,context:O().y$.NotificationClick,callback:()=>{P().createAndCommit({userAction:"AutomationTypecheckErrorRaisedActivity.viewError",environment:f,canUndo:!0,perform:e=>{q().ZB({notification:v,rootStore:t,transaction:e,read:!0})}}),k(),Oe().K4({tab:m,notificationId:null==v?void 0:v.id,environment:f,alreadyRead:Boolean(null==v?void 0:v.read),activity:i})}})}),[i,f,k,v,t,m]),L=(0,l().X)("automation_updated_error_states");if(!(0,S().O9)(M)||!(0,S().O9)(x)||0===y.length||!L)return null;const N=(0,re.jsx)("div",{style:_.headerName,children:(0,re.jsx)(Ft,{handleAutomationNavigate:T,automationNames:B})}),E=R&&1===j.size;return(0,re.jsx)(_e,{header:(0,re.jsx)(b().sA,{id:"AutomationTypecheckErrorRaisedActivity.formattedHeaderMessage.automationTitle",defaultMessage:"{automationNames} {numAutomationNames, plural, one {is} other {are}} invalid",values:{numAutomationNames:j.size,automationNames:N}}),isFirst:d,isLast:n,isPrivate:K,rootStore:t,navigableBlockId:M.id,notification:v,icon:(0,re.jsx)(Wt,{automationName:I}),showSnapshotButton:!1,url:w,...(0,He().$5)({notification:v,activity:i,environment:f,tab:m}),children:(0,re.jsx)("div",{style:_.notificationContainer,onClick:T,children:!E&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{style:_.messageContainer,children:(0,re.jsx)(b().sA,{id:"AutomationTypecheckErrorRaisedActivity.formattedHeaderMessage.automationMessage",defaultMessage:"Resolve any errors or remove failing steps to enable {numAutomationNames, plural, one {this automation} other {these automations}}",values:{numAutomationNames:j.size}})}),(0,re.jsx)("div",{children:(0,re.jsx)(qt().A,{style:_.editAutomation,onClick:T,size:"sm",children:(0,re.jsx)(b().sA,{id:"AutomationTypecheckErrorRaisedActivity.editAutomation.automationMessage",defaultMessage:"Edit automation"})})})]})})})}function Ft(e){const{automationNames:t,handleAutomationNavigate:i}=e,o=(0,b().tz)(),r=t.at(0),s=t.length,n=s-2,a=o.formatList([...t.slice(0,2),n>0?o.formatMessage({defaultMessage:"{numRemainingAutomations} more",id:"AutomationTypecheckErrorRaisedActivity.wrappedAutomationName.tooltipNumRemainingAutomations"},{numRemainingAutomations:n}):void 0].filter(S().O9),{style:"long",type:"conjunction"}),d={defaultMessage:"{numAutomations, plural, one {{firstAutomationName}} other {{numAutomations} automations}}",values:{firstAutomationName:r,numAutomations:s},id:"AutomationTypecheckErrorRaisedActivity.wrappedAutomationName.automationName",description:"The display name for an automation."},l=e=>(0,re.jsx)(Dt().A,{...e,onClick:i,children:(0,re.jsx)(b().sA,{...d})});return 1===s?l():(0,re.jsx)(ee().A,{renderTooltip:e=>(0,re.jsx)("div",{...e,children:a}),render:e=>l(e)})}function Wt(e){let{automationName:t}=e;const i=(0,u().IS)((e=>({icon:{fill:e.icon.uiRedPrimary,height:12,left:9,position:"absolute",top:14,width:12},firstLetter:{textTransform:"uppercase",color:e.text.secondary},wrapper:{position:"relative"}})),[]);return(0,re.jsx)(xe,{children:(0,re.jsxs)("div",{style:i.wrapper,children:[(0,re.jsx)("div",{style:i.firstLetter,children:t.charAt(0)}),(0,Ct().Q)(i.icon)]})})}i(803949);var Ht=()=>i(107273),Vt=()=>i(921194),$t=()=>i(6533);var Gt=()=>i(713998),Yt=()=>i(400835),Xt=()=>i(413267),Jt=()=>i(161479),Qt=()=>i(983650),Zt=()=>i(774733),ei=()=>i(902731),ti=()=>i(105157),ii=()=>i(712030),oi=()=>i(921855),ri=()=>i(299545),si=()=>i(477293),ni=()=>i(175499),ai=()=>i(296798),di=()=>i(256863),li=()=>i(453697),ci=()=>i(719147),ui=()=>i(447587),mi=()=>i(331132);function gi(e){const{activity:t,tabArgs:i,rootStore:n,isFirst:l,isLast:u}=e,{source:m,tab:v,notification:p}=i,f=(0,s().K8)((()=>t.getEdits()),[t]);let y=f.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":case"suggestion-created":return!0;default:(0,S().HB)(e)}}));const b=(0,s().K8)((()=>"suggestion-created"===f[0].type),[f]);0===y.length&&0!==f.length&&(y=f);const x=y.length>0,_=(0,r().v3)(),j=(0,s().K8)((()=>{const e=n.getRecordStore(n,{table:d().$Y,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,n]),R=(0,s().K8)((()=>j?j.getCommentStores():[]),[j]),k=(0,s().K8)((()=>{const e=null==j?void 0:j.getParentPointer();if(e)return C().Bv.createChildStore(n,e)}),[j,n]),M=(0,s().K8)((()=>Boolean(k&&k.isDefined())),[k]),w="on"===(0,si().r)("inbox_activity_split"),K=(0,s().K8)((()=>{const e=null==k?void 0:k.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,k]),I=C().Bv.createChildStore(n,{table:h().ev,id:K}),q=(0,s().K8)((()=>I.isDefined()),[I]),T=(0,s().K8)((()=>Boolean(!(null!=k&&k.pathIsDead()))),[k]),P=(0,s().K8)((()=>I.canComment()&&T&&!w),[T,I,w]),L=(0,s().K8)((()=>{var e;if(k)return null===(e=k.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:n.getRecordModel,discussionId:t.discussion_id,pageVisitSource:g().y8.Notification})}),[k,n,t]),N=(0,s().K8)((()=>(0,c().Ln)({edits:y,rootStore:n})),[y,n]),O=(0,s().K8)((()=>(0,B().hS)(R.map((e=>e.getCreatedByPointer())).filter(S().O9),"id").map((e=>C().sk.createChildStore(n,e)))),[R,n]),E=(0,s().K8)((()=>O.map((e=>e.getModel())).filter(S().O9)),[O]),{backActorStore:U,frontActorStore:D}=(0,s().K8)((()=>{const e=_.currentUser.id;return e?(0,c()._S)({authorStores:O,currentUserId:e}):{backActorStore:void 0,frontActorStore:void 0}}),[_.currentUser.id,O]),z=T,F=(0,o.useCallback)((e=>{if((0,He().uY)({...i,environment:_,activity:t,mightCloseTab:z}),!T&&k&&j){var o;const r=e.target;ei().IX({environment:_,discussionStore:j,rect:r.getBoundingClientRect(),blockStore:k,discussionLocation:Si({forReplyMenu:!0,source:i.source}),activityId:t.id,notificationId:null===(o=i.notification)||void 0===o?void 0:o.id})}}),[t,T,k,j,_,i,z]),W=(0,o.useCallback)((e=>{"Removed"===e?(0,He().jv)({...i,environment:_,activity:t,mightCloseTab:z}):"Added"===e?(0,He().P)({...i,environment:_,activity:t,mightCloseTab:z}):(0,S().HB)(e)}),[i,_,t,z]),H=(0,s().K8)((()=>(0,c().DU)({recordId:K,recordType:h().ev,tab:v,rootStore:n,environment:_})),[K,v,n,_]),V=(0,s().K8)((()=>Si({source:m,forReplyMenu:!1})),[m]),$=(0,s().K8)((()=>{const e=null==j?void 0:j.getModel();if(e)return(0,c().pN)(e)}),[j]);return x&&q&&M&&j?(0,re.jsxs)(_e,{header:(0,re.jsx)(Ai,{authorCount:N.length,authorPhrase:(0,re.jsx)(Ii,{authorsLength:O.length,frontActorStore:D,backActorStore:U,authorTextStyle:{fontWeight:A().Wy.medium}}),isSuggestionCreatedActivity:b}),isFirst:l,isLast:u,isPrivate:H,rootStore:n,navigableBlockId:K,notification:p,icon:D&&U?(0,re.jsx)(Ki,{frontActorStore:D,backActorStore:U}):E.length>0?(0,re.jsx)(at().H8,{authors:E,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}):(0,re.jsx)(Bi,{}),showSnapshotButton:!1,url:L,...(0,He().$5)({notification:p,environment:_,tab:v,activity:t}),children:[j&&$&&(0,re.jsx)(pi,{discussionStore:j,url:L,onClick:F,rootStore:n,source:m,isSuggestionCreatedActivity:b}),j&&(0,re.jsx)(Ri,{discussionStore:j,discussionLocation:V,onReactionToggle:W}),P&&(0,re.jsx)(bi,{activity:t,rootStore:n,tabArgs:i,isSuggestionCreatedActivity:b}),j&&(0,re.jsx)(hi,{discussionStore:j})]}):(a().log({level:"warning",from:"CommentActivityNotification",type:"invalidNotificationData",data:{ids:[(null==p?void 0:p.id)??"unknown"]}}),null)}const vi=8;function hi(e){const{discussionStore:t}=e,i=(0,s().K8)((()=>t.getResolved()),[t]),o=(0,u().IS)((e=>({container:{display:"flex",alignItems:"center",gap:4,fontSize:12,color:e.text.secondary,marginTop:vi},icon:{height:12,width:12}})),[]);return i?(0,re.jsxs)("div",{style:o.container,children:[(0,Xt().b)(o.icon),(0,re.jsx)(b().sA,{id:"activity.commentActivity.commentStatusResolved",defaultMessage:"Resolved on the page"})]}):null}function pi(e){const{url:t,onClick:i,discussionStore:o,rootStore:r,isSuggestionCreatedActivity:n}=e,a=(0,u().IS)((e=>({linkbox:{display:"flex",alignItems:"center",fontSize:13,color:e.mediumTextColor,paddingTop:2,paddingBottom:8,marginBottom:0}})),[,]),d=(0,s().K8)((()=>o.getType()),[o]);return(0,re.jsx)(ai().A,{href:t,onClick:i,innerStyle:a.linkbox,disabled:!0,children:"suggestion"===d?!n&&(0,re.jsx)(Zt().c4,{discussionStore:o,collapsed:!1}):(0,re.jsx)(fi,{rootStore:r,discussionStore:o})})}function fi(e){const t=(0,r().v3)(),i=(0,u().DP)(),{rootStore:o,discussionStore:n}=e,a=(0,s().K8)((()=>{const e=n.getModel();if(e)return(0,c().pN)(e)}),[n]),d=(0,s().K8)((()=>{var e;const t=null==n||null===(e=n.getParentStore())||void 0===e?void 0:e.getParentStore();if(!t||"collection"!==t.table)return;const i=t.getSchema(),o=n.getPropertyId();return void 0!==o?(0,Gt()._g)({schema:i,property:o}):void 0}),[n]),l=(0,s().K8)((()=>(0,oi().S5)({environment:t,textValue:a?{value:a,spaceId:o.id}:void 0,parentStore:o,disableHover:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!0,disabled:!0,highlightDiscussionId:n.id,theme:i,emojiType:(0,ii().FN)(t),katex:t.KatexStore.getKatex(),formulaValueTypes:[]})),[t,a,o,n.id,i]);return a?(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(mi().A,{}),d&&(0,re.jsx)(ti().A,{propertySchema:d}),(0,re.jsx)("div",{style:A().RC,children:l})]}):null}const yi=8;function bi(e){const{activity:t,rootStore:i,tabArgs:n,isSuggestionCreatedActivity:a}=e,{source:l,notification:c,tab:m}=n,g=(0,s().K8)((()=>{const e=i.getRecordStore(i,{table:d().$Y,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,i]),v=(0,r().v3)(),p=(0,s().K8)((()=>C().sk.createChildStore(i,{table:d().$Y,id:t.discussion_id,spaceId:(0,Jt().e)(i.pointer.spaceId)})),[t,i]),f=(0,s().K8)((()=>null==g?void 0:g.getParentId()),[g]),y=(0,o.useCallback)((e=>{(0,O().SQ)({event:e,context:O().y$.NotificationClick,callback:()=>{if(!f)return;const o=C().Bv.createChildStore(i,{table:h().ev,id:f}),r=e.target,s=null==c?void 0:c.id;ei().IX({environment:v,discussionStore:p,rect:r.getBoundingClientRect(),blockStore:o,discussionLocation:Si({forReplyMenu:!0,source:l}),activityId:t.id,notificationId:s}),"notifications_tab"===l&&Oe().ZP({environment:v,notificationId:s,alreadyRead:Boolean(null==c?void 0:c.read),activity:t,tab:m})}})}),[t,p,v,c,f,i,l,m]),S=(0,u().IS)((e=>({container:{paddingTop:yi},actionButton:(0,dt().Ei)(e)})),[]);return!g||a?null:(0,re.jsx)("div",{style:S.container,children:(0,re.jsx)(ne,{children:(0,re.jsx)(je().p,{isGray:!0,size:"xs",onClick:y,style:S.actionButton,children:(0,re.jsx)(b().sA,{defaultMessage:"Reply",id:"activityNotification.replyButton.label"})})})})}function Si(e){const{forReplyMenu:t,source:i}=e;if("updates_sidebar"===i)return t?"reply_menu_updates_sidebar":"updates_sidebar";return`${t?"reply_menu_":"updates_menu_"}${Oe().jD()}`}function Ai(e){const{authorCount:t,authorPhrase:i,isSuggestionCreatedActivity:o}=e;return o?(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} suggested in} other {{authorOrAuthors} suggested in}}",values:{numberOfAuthors:t,authorOrAuthors:i},id:"activity.commentActivity.standardizedHeader.suggestion"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented in} other {{authorOrAuthors} commented in}}",values:{numberOfAuthors:t,authorOrAuthors:i},id:"activity.commentActivity.standardizedHeader"})}const xi=2,_i=10,ji=4;function Ri(e){const{discussionStore:t,discussionLocation:i,onReactionToggle:n}=e,a=(0,r().v3)(),[d,l]=(0,o.useState)(!1),c=(0,s().K8)((()=>{if(!t)return[];const e=t.getCommentStores();return"suggestion"===t.getType()?e.slice(1):e}),[t]),m=c.length-xi,g=m>0,v="on"===(0,si().r)("inbox_activity_split"),h=1===c.length,p=(0,o.useCallback)((e=>{(0,O().SQ)({event:e,context:O().y$.NotificationClick,callback:()=>{l(!d),Oe().o1(a,{expand:!d,comments_count:c.length,discussion_id:t.id})}})}),[a,d,c.length,t.id]),f=(0,u().IS)((e=>({discussion:{display:"flex",flexDirection:"column",gap:_i},truncateRepliesButton:{display:"flex",gap:8,padding:4,marginLeft:-4,borderRadius:4},avatars:{display:"flex"},truncationText:{display:"flex",alignItems:"center",color:e.lightTextColor,fontSize:12},expandButton:{display:"flex",justifyContent:"start",alignItems:"center",gap:14,borderRadius:6,fontSize:12,padding:6,marginLeft:-6,marginTop:ji-_i,marginBottom:ji-_i,color:e.mediumTextColor,maxWidth:"fit-content",maxHeight:26},divider:{width:20,flexGrow:2,color:e.stroke.secondary}})),[]),y=d?void 0:h?4:3;if(h){const e=c[0];return(0,re.jsx)("div",{style:f.discussion,children:(0,re.jsx)(ki,{commentStore:e,discussionStore:t,discussionLocation:i,onReactionToggle:n,maxLines:y,showAuthor:!1,onMore:p},e.id)})}if(v&&c.length>0){const e=c[c.length-1];return(0,re.jsx)("div",{style:f.discussion,children:(0,re.jsx)(ki,{commentStore:e,discussionStore:t,discussionLocation:i,onReactionToggle:n,maxLines:y,showAuthor:!1,onMore:p},e.id)})}return(0,re.jsxs)("div",{style:f.discussion,children:[c.slice(0,1).map((e=>(0,re.jsx)(ki,{commentStore:e,discussionStore:t,discussionLocation:i,onReactionToggle:n,maxLines:y,onMore:p},e.id))),g&&(0,re.jsx)(ne,{children:(0,re.jsx)(Y().A,{style:f.expandButton,onClick:p,children:d?(0,re.jsx)(b().sA,{id:"CommentGroupingActivity.discussionThread.hidePreviousRepliesCount",defaultMessage:"Hide {previousRepliesCount} {previousRepliesCount, plural, one {comment} other {comments}}",values:{previousRepliesCount:m}}):(0,re.jsx)(b().sA,{id:"CommentGroupingActivity.discussionThread.showPreviousRepliesCount",defaultMessage:"{previousRepliesCount} {previousRepliesCount, plural, one {more comment} other {more comments}}",values:{previousRepliesCount:m}})})}),d&&c.slice(1,-1).map((e=>(0,re.jsx)(ki,{commentStore:e,discussionStore:t,discussionLocation:i,onReactionToggle:n,maxLines:y,onMore:p},e.id))),c.slice(-1).map((e=>(0,re.jsx)(ki,{commentStore:e,discussionStore:t,discussionLocation:i,onReactionToggle:n,maxLines:y,onMore:p},e.id)))]})}function ki(e){const{commentStore:t,discussionStore:i,discussionLocation:n,onReactionToggle:a,maxLines:d,showAuthor:l=!0,onMore:c}=e,m=(0,r().Y0)(),[g,v]=(0,o.useState)(!1),p=(0,s().K8)((()=>{const e=t.getContent(),i=0===e.length;if(e||!i)return e.map((e=>{const i=C().sk.createChildStore(t,{table:h().ev,id:e,spaceId:t.getSpaceId()}).getValue();if(i)return(0,re.jsx)(ni().Ay,{blockValue:i,rootStore:t},e)})).filter(S().O9)}),[t]),f=(0,s().K8)((()=>C().Lk.getUserVisibleReactions(t).length>0),[t]),y=(0,s().K8)((()=>t.getLastEditedTime()>t.getCreatedTime()+100),[t]),x=!f&&m.isMobile,_=!x,j=(0,o.useCallback)((e=>{m.isMobile?e.preventDefault():v(!0)}),[m.isMobile]),R=(0,o.useCallback)((e=>{m.isMobile?e.preventDefault():v(!1)}),[m.isMobile]),k=(0,u().IS)((e=>({avatarCommentReactionBarContainer:{...!f&&!m.isMobile&&{position:"relative"}},avatarAndCommentContainer:{display:"flex",flexDirection:"column"},commentContainer:{display:"flex",justifyContent:"space-between",gap:6,flexGrow:1},commentClampContainer:{lineHeight:A().K_.UIRegular.desktop,color:e.accentColors.gray[500]},toggleOverflowButton:{color:e.accentColors.gray[500],fontSize:14},editedBadge:{fontSize:13,color:e.mediumTextColor,paddingLeft:4},reactionBarMobile:f?{marginTop:4}:{marginRight:-6},reactionBar:{...!f&&{position:"absolute",top:-2,right:-8,opacity:g?1:0,transition:`opacity ${he}`},...f&&{marginTop:4}},newReaction:{borderWidth:1,borderStyle:"solid",borderColor:m.isMobile?"transparent":e.stroke.primary,borderRadius:6,boxShadow:m.isMobile?"unset":"0px 2px 4px 0px rgba(22, 29, 27, 0.02)"}})),[m,f,g]),M=(0,o.useCallback)((e=>{e.preventDefault(),c(e)}),[c]);return(0,re.jsx)("div",{children:(0,re.jsxs)("div",{style:k.avatarCommentReactionBarContainer,onMouseEnter:j,onMouseLeave:R,children:[(0,re.jsxs)("div",{style:k.avatarAndCommentContainer,children:[l&&(0,re.jsx)("div",{children:(0,re.jsx)(Ci,{commentStore:t})}),(0,re.jsxs)("div",{style:k.commentContainer,dir:"auto",children:[(0,re.jsxs)(ui().A,{style:k.commentClampContainer,maxLines:d,onMore:M,moreElement:(0,re.jsxs)(ci().A,{style:k.toggleOverflowButton,disableUnderline:!0,hoverColor:"blue",children:["","",(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{id:"commentActivityNotification.truncated.showMoreLabel",defaultMessage:"more"})})]}),children:[(0,re.jsx)(Mi,{discussionStore:i,commentStore:t}),p,y&&(0,re.jsx)("span",{style:k.editedBadge,children:(0,re.jsx)(b().sA,{id:"CommentGroupingActivity.discussionThreadComment.editedBadge",defaultMessage:"(edited)"})})]}),x&&(0,re.jsx)("div",{style:m.isMobile?k.reactionBarMobile:k.reactionBar,children:(0,re.jsx)(ne,{children:(0,re.jsx)(Zt().fj,{parentStore:t,discussionLocation:n,onReactionToggle:a,newReactionStyle:k.newReaction})})})]})]}),_&&(0,re.jsx)("div",{style:m.isMobile?k.reactionBarMobile:k.reactionBar,children:(0,re.jsx)(ne,{children:(0,re.jsx)(Zt().fj,{parentStore:t,discussionLocation:n,onReactionToggle:a,newReactionStyle:k.newReaction})})})]})})}function Ci(e){const{commentStore:t}=e,i=(0,r().v3)(),o=(0,b().tz)(),n=(0,s().K8)((()=>{const e=t.getCreatedByPointer();if(e)return C().sk.createChildStore(t,e)}),[t]),a=(0,s().K8)((()=>{if(n)return n.getDisplayName(o)}),[n,o]),d=(0,s().K8)((()=>!!n&&i.currentUser.id===n.id),[i,n]),l=(0,u().IS)((e=>({fullName:{fontWeight:A().Wy.regular,fontSize:12,lineHeight:"22px",color:e.text.secondary},you:{fontWeight:A().Wy.regular,fontSize:12,lineHeight:"22px",color:e.text.tertiary}})),[]);return d?(0,re.jsx)(b().sA,{id:"CommentGroupingActivity.discussionThreadComment.authorLabel",defaultMessage:"<author>{fullName}</author> <you>(You)</you>",values:{author:e=>(0,re.jsx)("span",{style:l.fullName,children:e}),fullName:a,you:e=>(0,re.jsx)("span",{style:l.you,children:e})}}):a?(0,re.jsx)("span",{style:l.fullName,children:a}):(0,re.jsx)("span",{style:l.fullName,children:(0,re.jsx)(b().sA,{id:"CommentGroupingActivity.discussionThreadComment.unknownAuthorLabel",defaultMessage:"Unknown author"})})}function Mi(e){const{discussionStore:t,commentStore:i}=e,o=(0,r().v3)(),n=(0,u().DP)(),a=(0,s().K8)((()=>ri().gp(i).getValue()),[i]),d=(0,s().K8)((()=>i.getSpaceId()),[i]),l=(0,s().K8)((()=>{if(!a||!d)return null;const e=(0,Qt().Eh)({textValue:a,currentUserId:o.currentUser.id,getRecordModel:t.getRecordModel,highlightStyle:"text_only"});return(0,oi().S5)({environment:o,textValue:{value:e,spaceId:d},parentStore:t,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableHover:!0,disabled:!0,theme:n,emojiType:(0,ii().FN)(o),katex:o.KatexStore.getKatex(),formulaValueTypes:[]})}),[o,t,n,a,d]),c=(0,u().IS)((e=>({commentText:{whiteSpace:"pre-wrap",wordBreak:"break-word",display:"inline",fontSize:14,color:e.regularTextColor,lineHeight:"22px"}})),[]);return(0,re.jsx)("span",{style:c.commentText,children:l})}const wi=20;function Ki(e){const{frontActorStore:t,backActorStore:i}=e,o=(0,u().IS)((()=>({container:{display:"grid",height:le,width:le},back:{gridColumn:1,gridRow:1,marginLeft:-3,marginTop:-3,maxWidth:wi,minWidth:wi},front:{gridColumn:1,gridRow:1,marginLeft:7,marginTop:7,maxWidth:wi,minWidth:wi}})),[]);return(0,re.jsxs)("div",{style:o.container,children:[(0,re.jsx)("div",{style:o.back,children:(0,re.jsx)(qi,{size:wi,actorStore:i,avatar:void 0})}),(0,re.jsx)("div",{style:o.front,children:(0,re.jsx)(qi,{size:wi,actorStore:t,avatar:void 0})})]})}function Ii(e){const{authorsLength:t,frontActorStore:i,backActorStore:o,authorTextStyle:n}=e,a=(0,r().v3)(),d=(0,b().tz)(),l=a.currentUser.id,c=(0,s().K8)((()=>{if(i)return i.getDisplayName(d)}),[i,d]),u=(0,s().K8)((()=>{if(o)return o.getDisplayName(d)}),[o,d]),m={fontWeight:A().Wy.semibold,...n};return 0===t?(0,re.jsx)("span",{style:m,children:(0,re.jsx)(b().sA,{defaultMessage:"<b>Nobody</b>",id:"activitySection.authorPhraseInboxRedesign.forNoAuthors.label",values:{b:e=>(0,re.jsx)("span",{style:m,children:e})}})}):1===t&&i?i.id===l?(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"<b>You</b>",id:"activitySection.authorPhraseInboxRedesign.forOneAuthorCurrentUser.label",values:{b:e=>(0,re.jsx)("span",{style:m,children:e})}})}):(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"<b>{author}</b>",id:"activitySection.authorPhraseInboxRedesign.forOneAuthor.label",values:{author:c,b:e=>(0,re.jsx)("span",{style:m,children:e})}})}):2===t?o&&o.id===l?(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"<b>{frontActorName} and You</b>",id:"activitySection.authorPhraseInboxRedesign.forTwoAuthorsCurrentUser.label",values:{frontActorName:c,b:e=>(0,re.jsx)("span",{style:m,children:e})}})}):(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"<b>{frontActorName} and {backActorName}</b>",id:"activitySection.authorPhraseInboxRedesign.forTwoAuthors.label",values:{frontActorName:c,backActorName:u,b:e=>(0,re.jsx)("span",{style:m,children:e})}})}):t>2?(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"<b>{frontActorName} and {numberOfOtherAuthors} others</b>",id:"activitySection.authorPhraseInboxRedesign.forMoreThanTwoAuthors.label",values:{frontActorName:c,numberOfOtherAuthors:t-1,b:e=>(0,re.jsx)("span",{style:m,children:e})}})}):null}function Bi(){const e=(0,u().IS)((e=>({icon:{height:14,width:14,fill:e.icon.secondary}})),[]);return(0,re.jsx)(xe,{children:(0,Yt().D)(e.icon)})}function qi(e){const{actorStore:t,avatar:i}=e,o=e.size??28;return t?t.table===Ce().GP?(0,re.jsx)(di().A,{botStore:t,size:o}):t.table===y().oo?(0,re.jsx)(li().A,{userStore:t,size:o}):t.table===Ne().yj?(0,re.jsx)(li().A,{userStore:void 0,size:o}):void(0,S().HB)(t):i?(0,re.jsx)(li().A,{avatar:i,size:o}):(0,re.jsx)(li().A,{userStore:void 0,size:o})}const Ti=o.memo(gi);const Pi=function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{tab:d,notification:l}=o,u=(0,r().v3)(),m=(0,s().K8)((()=>(0,Ht().W9)(t.getEdits())),[t]),g=(0,s().K8)((()=>(0,c().Ln)({edits:m,rootStore:i})),[m,i]),v=(0,s().K8)((()=>{const e=m[0];return e?e.new_email:""}),[m]);return(0,re.jsx)(_e,{header:(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"You updated your email to {newEmail}",values:{newEmail:v},id:"activity.emailEdited.header.short"})}),isFirst:n,isLast:a,isPrivate:!1,rootStore:i,notification:l,icon:(0,re.jsx)(at().H8,{authors:g,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:void 0,...(0,He().$5)({notification:l,activity:t,environment:u,tab:d})})};var Li=()=>i(674020),Ni=()=>i(21140);function Oi(){const e=(0,u().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,re.jsx)(xe,{children:(0,Li().y)(e.icon)})}i(672577);var Ei=()=>i(921940),Ui=()=>i(555555),Di=()=>i(831098),zi=()=>i(115512),Fi=()=>i(37433),Wi=()=>i(466872),Hi=()=>i(848237);const Vi=3;function $i(e){const{userIds:t,remainingAvatarCount:i,shownAvatarCount:o,titledRecordStore:r,isMobile:s}=e,n=(0,u().IS)((e=>({avatarContainer:{display:"flex",flexDirection:"row",justifyContent:"start",overflow:"hidden",paddingRight:2,alignItems:"center"},overlappingAvatar:{marginRight:-5,position:"relative"},rightmostAvatar:{position:"relative"},remainderCount:{paddingLeft:2,color:e.lightTextColor}})),[]);return(0,re.jsxs)("div",{style:n.avatarContainer,children:[t.slice(0,Vi).map(((e,t)=>{const i=C().LU.createChildStore(r,{table:y().oo,id:e}),a=t===o-1;if(i)return(0,re.jsx)(li().A,{userStore:i,size:24,avatarShouldShowShadow:!1,style:a?n.rightmostAvatar:n.overlappingAvatar,isOffline:!1,hasTooltip:!s},e)})),i>0&&(0,re.jsx)("div",{style:n.remainderCount,children:(0,re.jsx)(b().sA,{defaultMessage:"{remainingAvatarCount, plural, one {+{remainingAvatarCount}} other {+{remainingAvatarCount}}}",id:"activity.titleCard.members.otherCount.message",values:{remainingAvatarCount:i}})})]})}function Gi(e){const{titledRecordStore:t,rootStore:n,activity:a,tabArgs:d}=e,l=n.getRecordModel,c=(0,s().K8)((()=>t.getModel()),[t]),m=(0,r().v3)(),v=(0,s().K8)((()=>null==c?void 0:c.getRenderIcon({getRecordModel:l})),[c,l]),b=(0,s().K8)((()=>m.device.isMobile),[m]),x=(0,u().IS)((e=>({container:{display:"block",borderWidth:1,borderStyle:"solid",borderColor:e.tint.regular,borderRadius:8,marginTop:0,padding:12,background:e.contentBackground,boxShadow:"0px 1px 2px 0px "+("light"===e.mode?"rgba(0, 0, 0, 0.03)":"rgba(0, 0, 0, 0.12)"),transition:`background ${ue}`},icon:{...dt().kI,marginRight:10},activityTitle:{fontSize:14,marginRight:void 0!==v?3:0,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,verticalAlign:"top",textAlign:"left",lineHeight:A().K_.UIRegular.desktop,...A().RC,whiteSpace:"normal",...dt().a_},flexRow:{display:"flex",alignItems:"center"},title:{maxWidth:"80%"},spacer:{flexGrow:1},subtitle:{fontSize:12,color:e.lightTextColor}})),[v]),_=(0,s().K8)((()=>{if(c&&c.table!==f().yK)return c.getRenderUrl({getRecordModel:l,pageVisitSource:g().y8.Notification})}),[c,l]),j=(0,o.useCallback)((e=>{const i=t.table;switch(i){case h().ev:case p().NX:(0,He().Qo)({environment:m,activity:a,...d});break;case f().yK:(0,He().uY)({environment:m,activity:a,...d}),Hi().L0({environment:m,teamStore:t,shouldScroll:!0}),Wi().A.setState({...Wi().A.state,open:!1});break;default:(0,S().HB)(i)}}),[a,m,d,t]),R=(0,s().K8)((()=>{const e=t.table,o=(0,i(134217).L)();let r=[],s=0;switch(e){case"space":if(!t.getModel())break;r=o.map((e=>e.userId)),s=Math.max(0,r.length-Vi);break;case"block":const i=t.getCreatedByPointer();(null==i?void 0:i.table)===y().oo&&(r=[i.id]),s=Math.max(0,r.length-Vi);break;case"team":const n=(0,Fi().PF)(t);r=(null==n?void 0:n.sampleMemberUserIds)??[],s=Math.max(0,(null==n?void 0:n.memberCount)??0-Vi);break;default:(0,S().HB)(e)}const n=Math.min(r.length,Vi);return(0,re.jsx)($i,{userIds:r,remainingAvatarCount:s,shownAvatarCount:n,titledRecordStore:t,isMobile:b})}),[b,t]);return c?(0,re.jsx)(ai().A,{href:_,onClick:j,external:!1,innerStyle:x.container,inline:!0,children:(0,re.jsxs)("div",{style:x.flexRow,children:[v&&(0,re.jsx)(Q().A,{disabled:!0,icon:v,isEmptyPage:!1,size:25,style:x.icon}),(0,re.jsx)("div",{style:x.title,children:(0,re.jsx)(Z().A,{store:t,style:x.activityTitle})}),(0,re.jsx)("div",{style:x.spacer}),(0,re.jsx)("div",{children:R})]})}):null}const Yi=o.memo(Gi);function Xi(){const e=(0,u().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,re.jsx)(xe,{children:(0,Ui().n)(e.icon)})}function Ji(){const e=(0,r().v3)(),t=(0,s().K8)((()=>"dark"===e.ThemeStore.state.mode),[e]),i=(0,u().IS)((e=>({icon:{height:18,width:18,marginTop:2,marginRight:2,fill:t?e.primaryBlack:e.blueColor}})),[t]);return(0,re.jsx)(xe,{children:(0,Di().y)(i.icon)})}var Qi=()=>i(101209),Zi=()=>i(722872),eo=()=>i(377586),to=()=>i(463830),io=()=>i(920773),oo=()=>i(928600),ro=()=>i(45552),so=()=>i(128295);function no(e){const{timestamp:t,header:i,hasChildren:o,navigableBlockId:s,rootStore:n,showRecordPath:a,disableJustify:d,onBacklinkClick:l,titleAriaId:c}=e,m=(0,U().nl)(t,{useUltraCompactFormat:!0}),g=(0,r().v3)().device.isMobile,v=(0,U().x$)(t),p=(0,u().IS)((e=>({container:{width:"100%"},header:{width:g?"calc(100% - 98px)":"100%",fontSize:14,lineHeight:1.4,minWidth:0,minHeight:g?28:void 0,display:"flex",alignItems:"baseline",justifyContent:d?void 0:"space-between"},flatIndentHeader:{width:g?"calc(100% - 98px)":"100%",fontSize:14,lineHeight:1.4,minWidth:0,minHeight:g?28:void 0,display:"flex",justifyContent:"space-between",alignItems:"baseline"},title:{fontSize:14,marginTop:4,marginBottom:o?8:4},time:{fontSize:12,color:e.lightTextColor,whiteSpace:"nowrap",display:"inline",paddingLeft:6},path:{marginTop:4,marginBottom:4},separatorDot:{fontSize:12,color:e.lightTextColor,marginLeft:4,marginRight:4}})),[o,g,d]);return(0,re.jsxs)("div",{style:p.container,children:[(0,re.jsxs)("div",{className:L().k2l,style:p.header,children:[(0,re.jsx)("span",{id:c,children:i}),(0,re.jsx)("div",{style:p.time,className:L().Cxn,children:(0,re.jsx)(ie().A,{text:m,tooltipText:v,icon:K().k})})]}),a&&s&&n&&(0,re.jsx)("div",{style:p.path,children:(0,re.jsx)(so().Ay,{isLink:!0,store:C().Bv.createChildStore(n,{table:h().ev,id:s}),onClick:l})})]})}const ao=1;function lo(e){const{rootStore:t,activity:i,isLast:n,tabArgs:a,edits:d,style:l,isFirst:m}=e,{tab:v,notification:p,source:f}=a,y=(0,r().v3)(),b=d.at(0),[x,_]=(0,o.useState)(null),j=(0,o.useMemo)((()=>x&&x.scrollHeight>x.clientHeight),[x]),R=(0,s().K8)((()=>{if(!b)return;const e=C().Bv.createChildStore(t,{table:h().ev,id:b.navigable_block_id});return(0,S().O9)(e)?e:void 0}),[b,t]),k=(0,s().K8)((()=>{const e=null==R?void 0:R.getModel();if(e)return e.getRenderUrl({getRecordModel:t.getRecordModel,pageVisitSource:g().y8.Notification})}),[t,R]),M=(0,s().K8)((()=>(0,c().DU)({recordId:null==R?void 0:R.id,recordType:h().ev,tab:v,rootStore:t,environment:y})),[R,v,t,y]),w=(0,u().IS)((e=>({formattedTitleStyle:{fontSize:A().J.UISmall.desktop,color:e.lightTextColor},container:{paddingBlock:4,display:"flex",flexDirection:"row",columnGap:1.5*Number((0,dt().AG)(e).paddingLeft),alignItems:"center"},unarchiveButton:{marginLeft:-1*Number((0,dt().AG)(e).paddingLeft)}})),[]),K=(0,o.useMemo)((()=>new Set(d.map((e=>e.automation_id)))),[d]),I=1===K.size;return(0,S().O9)(R)&&(0,S().O9)(b)?(0,re.jsx)(_e,{header:(0,re.jsx)(go,{rootStore:t,uniqueAutomations:K,firstEdit:b,spaceId:i.spaceId,environment:y,shortened:!1,titleStyle:{fontWeight:A().Wy.semibold}}),isFirst:m,isLast:n,isPrivate:M,rootStore:t,navigableBlockId:R.id,notification:p,icon:(0,re.jsx)(ho,{}),showSnapshotButton:!1,url:k,...(0,He().$5)({notification:p,activity:i,environment:y,tab:v}),children:(0,re.jsxs)("div",{style:l,children:[d.slice(-1*ao).map(((i,o)=>(0,re.jsxs)("div",{children:[!I&&(0,re.jsx)(go,{rootStore:t,firstEdit:i,uniqueAutomations:new Set([i.automation_id]),shortened:!0,spaceId:i.space_id,environment:y,titleStyle:w.formattedTitleStyle}),(0,re.jsx)(mo,{...e,edit:i,isViewAllMenu:!1,source:f,isLast:d.length>ao?o===d.length-1-ao:o===d.length-1,clampedMessageContainerRef:_})]},o))),(0,re.jsx)("div",{style:w.container,children:(j||d.length>ao)&&(0,re.jsx)(co,{edits:d,rootStore:t,activity:i,navigableBlockStore:R,source:f})})]})}):null}function co(e){const{edits:t,rootStore:i,activity:n,navigableBlockStore:a,source:d}=e,l=(0,r().Y0)(),c=(0,r().v3)(),{handleAnalyticsForPopupMenu:m}=(0,o.useContext)(po),g=(0,s().uB)(void 0,to().A),v=(0,o.useCallback)((()=>g.reset()),[g]),h=(0,o.useMemo)((()=>(0,re.jsx)(b().sA,{defaultMessage:"{numNotifications, plural, one {View more} other {View {numRemainingNotifications}}}",id:"inAppNotificationAutomationActionTriggeredActivity.renderViewAllNotificationsButton.buttonLabel",values:{numNotifications:t.length,numRemainingNotifications:t.length}})),[t.length]);let p;p=l.isMobile?{menuType:Zi().gu.Modal,title:h,right:(0,re.jsx)(ro().DoneMenuText,{}),onClickRight:v,whiteBackground:!0}:{menuType:Zi().gu.Popup,width:420,maxWidth:l.isMobileBrowser?"80vw":"100%"};const f=(0,u().IS)((e=>({actionButton:(0,dt().Ei)(e),divider:{borderBlockEnd:`1px solid ${e.regularDividerColor}`},viewAllMenuNotificationContainer:{display:"flex",flexDirection:"column",padding:12},viewAllMenuHeaderContainer:{display:"flex",flexDirection:"row",gap:de},popupMenu:{marginInlineStart:-2,fontSize:fe}})),[]),y=(0,o.useId)();return(0,re.jsx)(X().Ay,{buttonPopupStore:g,popupType:l.isMobile?eo().n.SlideUp:eo().n.Popup,placementToOrigin:$().W.Bottom,alignmentToOrigin:$().C.Center,originGap:4,onClick:()=>!g.state.open&&m(),renderOrigin:e=>(0,re.jsx)(io().p,{size:"xs",isGray:!0,...e,style:f.actionButton,children:h}),render:()=>(0,re.jsx)(oo().A,{...p,children:(0,re.jsx)("div",{style:f.popupMenu,children:t.map(((o,r)=>(0,re.jsxs)("div",{children:[(0,re.jsxs)("div",{style:f.viewAllMenuNotificationContainer,children:[(0,re.jsxs)("div",{style:f.viewAllMenuHeaderContainer,children:[(0,re.jsx)(ho,{}),(0,re.jsx)(no,{timestamp:o.timestamp,titleAriaId:y,onBacklinkClick:()=>null,hasChildren:!0,disableJustify:!0,header:(0,re.jsx)(go,{rootStore:i,uniqueAutomations:new Set([o.automation_id]),firstEdit:o,spaceId:n.spaceId,environment:c,closeViewAllMenu:v,shortened:!0,titleStyle:{fontWeight:A().Wy.semibold}}),rootStore:i,navigableBlockId:a.id,showRecordPath:!1})]}),(0,re.jsx)(mo,{...e,edit:o,isViewAllMenu:!0,source:d,isLast:r===t.length-1},r)]}),r!==t.length-1&&(0,re.jsx)("div",{style:f.divider})]},r)))})})})}const uo=4;function mo(e){const{edit:t,rootStore:i,source:o,isViewAllMenu:n,clampedMessageContainerRef:a}=e,d=(0,u().DP)(),l=(0,r().v3)(),c=(0,r().Y0)(),{isMobile:m}=c,g=(0,s().K8)((()=>l.KatexStore.getKatex()),[l]),v=(0,ii().Ol)(),h=(0,s().K8)((()=>(0,re.jsx)("div",{children:(0,oi().S5)({environment:l,textValue:t.message.value?{value:t.message.value,spaceId:t.space_id}:void 0,parentStore:i,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disabled:!1,theme:d,emojiType:v,katex:g,parentBlockId:void 0,renderedPageBlockId:void 0,formulaValueTypes:[],stopLinkPropagation:!0})})),[l,v,g,d,t.message.value,i,t.space_id]),p=(0,u().IS)((e=>({container:{paddingInlineStart:n?32:(0,dt().F9)({source:o,isMobile:m}),paddingBlockEnd:4},messageContainer:{position:"relative",display:"flex",justifyContent:"space-between",alignItems:"center"},clampedMessageContainer:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:n?void 0:uo,verticalAlign:"top",textAlign:"left",lineHeight:A().K_.UIRegular.desktop,...A().RC},messageContent:{whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:fe,lineHeight:(0,zi().ks)({device:c},"UIRegular"),paddingInlineEnd:8}})),[m,o,c,n]);return(0,re.jsx)("div",{style:{...n&&p.container,...p.messageContainer},children:(0,re.jsx)("div",{ref:a,style:p.clampedMessageContainer,children:(0,re.jsx)("div",{style:p.messageContent,children:h})})})}function go(e){const{rootStore:t,spaceId:i,environment:o,closeViewAllMenu:r,shortened:n,titleStyle:a,firstEdit:d,uniqueAutomations:l}=e,u=(0,b().tz)(),m=1===l.size,v=(0,s().K8)((()=>!C().dn.createChildStore(t,{table:Et().yB,id:d.automation_id,spaceId:t.getSpaceId()}).getAlive()),[t,d]),p=(0,s().K8)((()=>{const e=new(C().Bv)(o,{id:d.automation_navigable_block_id,table:h().ev}).getRole();return!e||!(0,Le().Tt)(e)}),[d,o]),f=(0,s().K8)((()=>{if(!(v&&m||p))return()=>{const e=d.automation_navigable_block_id,i=d.automation_id,s=C().Bv.createChildStore(t,{table:h().ev,id:e});if(!s)return;r&&r();const n=(0,Bt().Ay)({store:s,preferPublicLink:!1,pageVisitSource:g().y8.Notification});It().oo({environment:o,url:n,callback:async()=>await(0,c()._4)({environment:o,automationNavigableBlockStore:s,automationId:m?i:void 0,rootStore:t,source:"in_app_notification"})})}}),[o,m,d,t,r,v,p]),y=(0,s().K8)((()=>[...l].map((e=>{const o=t.getRecordStore(t,{table:Et().yB,id:e,spaceId:i}),r=o.getRole();return(0,S().O9)(r)&&(0,Le().Tt)(r)?o.getAlive()?o.getNameWithDefault(u):u.formatMessage(Ot().VS.automationDeletedName):u.formatMessage(Ot().VS.automationPrivateName)}))),[u,t,i,l]);return n?(0,re.jsx)("div",{style:{...a,display:"inline-flex"},children:(0,re.jsx)(vo,{handleAutomationNavigate:f,automationNames:y})}):(0,re.jsx)(b().sA,{id:"inAppNotificationAutomationActionTriggeredActivity.formattedHeaderMessage.automationTitle",defaultMessage:"{automationNameWrappedHeader} sent you a message",values:{automationNameWrappedHeader:(0,re.jsx)("div",{style:{...a,display:"inline-flex"},children:(0,re.jsx)(vo,{handleAutomationNavigate:f,automationNames:y})})}})}function vo(e){const{automationNames:t,handleAutomationNavigate:i}=e,o=(0,b().tz)(),r=t.at(0),s=t.length,n=s-2,a=o.formatList([...t.slice(0,2),n>0?o.formatMessage({defaultMessage:"{numRemainingAutomations} more",id:"inAppNotificationAutomationActionTriggeredActivity.wrappedAutomationName.tooltipNumRemainingAutomations"},{numRemainingAutomations:n}):void 0].filter(S().O9),{style:"long",type:"conjunction"}),d={defaultMessage:"{numAutomations, plural, one {{firstAutomationName}} other {{numAutomations} automations}}",values:{firstAutomationName:r,numAutomations:s},id:"inAppNotificationAutomationActionTriggeredActivity.wrappedAutomationName.automationName",description:"The display name for an automation."},l=e=>i?(0,re.jsx)(Dt().A,{...e,onClick:i,children:(0,re.jsx)(b().sA,{...d})}):(0,re.jsx)("div",{...e,children:(0,re.jsx)(b().sA,{...d,...e})});return 1===s?l():(0,re.jsx)(ee().A,{renderTooltip:e=>(0,re.jsx)("div",{...e,children:a}),render:e=>l(e)})}function ho(){const e=(0,u().IS)((e=>({icon:{height:12,width:12,fill:e.icon.secondary}})),[]);return(0,re.jsx)(xe,{children:(0,Qi().v)(e.icon)})}const po=(0,o.createContext)({handleAnalyticsForPopupMenu:()=>{}});function fo(e){const{analyticsInfo:t,children:i}=e,r=(0,o.useCallback)((()=>Oe().mF(t)),[t]);return(0,re.jsx)(po.Provider,{value:{handleAnalyticsForPopupMenu:r},children:i})}po.displayName="InAppNotificationAutomationActionTriggeredAnalyticsContext";var yo=()=>i(641007),bo=()=>i(148832);const So=function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{tab:d,notification:l}=o,u=(0,r().v3)(),m=(0,s().K8)((()=>t.getEdits()),[t]),g=(0,s().K8)((()=>(0,c().Ln)({edits:m,rootStore:i})),[m,i]),v=(0,s().K8)((()=>(0,c().bD)(g,{...(0,k()._m)()})),[g]),p=(0,s().K8)((()=>{const e=C().Bv.createChildStore(i,{table:h().ev,id:t.navigable_block_id});if(e.isDefined())return e}),[t,i]),f=(0,s().K8)((()=>Boolean(p&&(0,c().DU)({recordId:p.id,recordType:h().ev,tab:d,rootStore:i,environment:u}))),[p,d,i,u]),S=m[0],A=(0,s().K8)((()=>(0,c().j1)(S.from_user_id,i)),[S,i]),x=(0,s().K8)((()=>(0,c().j1)(S.to_user_id,i)),[S,i]);if(!(m.length>0&&A&&x&&p))return null;const _=(0,ke().lR)(j().A.getIntl(),(0,ke().D3)({table:y().oo,value:A}));return(0,re.jsx)(_e,{header:(0,re.jsx)(b().sA,{defaultMessage:"{authorPhrase} transferred {fromUserName}{fromUserNameEndsWithS, select, true {} other {s}} private pages to you",values:{authorPhrase:v,fromUserName:_,fromUserNameEndsWithS:"s"===_.slice(-1).toLowerCase()},id:"activity.privateContentTransferred.standardizedHeader.short"}),isPrivate:f,rootStore:i,notification:o.notification,isFirst:n,isLast:a,icon:(0,re.jsx)(at().H8,{authors:g,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:void 0,...(0,He().$5)({notification:l,activity:t,environment:u,tab:d})})};var Ao=()=>i(343666);function xo(e){const{activity:t,tabArgs:o,rootStore:n,isFirst:a,isLast:l}=e,{source:u,tab:m,notification:v}=o,p=(0,s().K8)((()=>t.getEdits()),[t]),f=(0,r().v3)(),y=(0,s().K8)((()=>{const e=t.discussion_id;if(!p||!t.discussion_id)return;const{reacted_comment_id:i}=p[0],o=i?Ao().SN:d().$Y,r=i??e;return n.getRecordStore(n,{table:o,id:r,spaceId:t.space_id})}),[p,t,n]),b=(0,s().K8)((()=>{if(y){if(y.table===Ao().SN){const e=y.getParentStore(),t=null==e?void 0:e.getParentPointer();if(!t)return;return C().Bv.createChildStore(n,t)}if(y.table===d().$Y){const e=y.getParentPointer();if(!e)return;return C().Bv.createChildStore(n,e)}}}),[y,n]),x=(0,s().K8)((()=>{const e=null==b?void 0:b.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,b]),_=(0,s().K8)((()=>{var e;if(b)return null===(e=b.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:n.getRecordModel,discussionId:t.discussion_id,pageVisitSource:g().y8.Notification})}),[b,n,t]),j=(0,s().K8)((()=>{if(!y)return[];const e=(y.getReactionPointers()??[]).map((e=>C().sk.createChildStore(n,e)));let t;var i;y instanceof C().jg&&(t=null===(i=y.getCreatedById)||void 0===i?void 0:i.call(y));if(y instanceof C().cc){const e=y.getParentStore();t=null==e?void 0:e.getCreatedById()}return(0,B().hS)(e.map((e=>e.getActorPointers())).flat().filter(S().O9).filter((e=>e.id!==t)),"id").map((e=>C().sk.createChildStore(n,e)))}),[y,n]),{frontActorStore:R,backActorStore:k}=(0,s().K8)((()=>{const e=f.currentUser.id;if(!e||0===j.length)return{frontActorStore:void 0,backActorStore:void 0};const i=j.map((e=>C().sk.createChildStore(n,{table:e.table,id:e.id,spaceId:t.space_id})));return(0,c()._S)({authorStores:i,currentUserId:e})}),[j,f.currentUser.id,n,t.space_id]),M=(0,s().K8)((()=>(0,c().DU)({recordId:t.navigable_block_id,recordType:h().ev,tab:m,rootStore:n,environment:f})),[t,n,m,f]),w=(0,s().K8)((()=>{const e=null==p?void 0:p[0];if(null==e||!e.reaction_id)return;const o=n.getRecordStore(n,{table:i(204384).ez,id:e.reaction_id,spaceId:t.space_id});return null==o?void 0:o.getIcon()}),[t,n,p]);return(0,re.jsx)(_e,{header:y&&(0,re.jsx)(_o,{authorCount:j.length,authorPhrase:(0,re.jsx)(Ii,{authorsLength:j.length,frontActorStore:R,backActorStore:k,authorTextStyle:{fontWeight:A().Wy.medium}}),targetStore:y}),isFirst:a,isLast:l,isPrivate:M,rootStore:n,navigableBlockId:x,notification:v,icon:w?(0,re.jsx)(i(56086).A,{char:w,size:18}):void 0,showSnapshotButton:!1,url:_,...(0,He().$5)({notification:v,environment:f,tab:m,activity:t}),children:y&&(0,re.jsx)(jo,{targetStore:y,source:u})})}function _o(e){const{authorCount:t,authorPhrase:i,targetStore:o}=e;return(0,s().K8)((()=>o instanceof C().jg),[o])?(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} reacted in} other {{authorOrAuthors} reacted in}}",values:{numberOfAuthors:t,authorOrAuthors:i},id:"activity.reactionActivity.standardizedHeader.comment"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} reacted to} other {{authorOrAuthors} reacted to}}",values:{numberOfAuthors:t,authorOrAuthors:i},id:"activity.reactionActivity.standardizedHeader.discussion"})}function jo(e){const{targetStore:t,source:i}=e,o=(0,r().v3)(),n=(0,r().Y0)(),a=(0,u().DP)(),d=(0,s().K8)((()=>Si({source:i,forReplyMenu:!1})),[i]),l=(0,u().IS)((e=>({linkbox:{display:"flex",alignItems:"center",fontSize:13,color:e.mediumTextColor,paddingTop:2,paddingBottom:8,marginBottom:0},commentText:{whiteSpace:"pre-wrap",wordBreak:"break-word",display:"inline",fontSize:14,color:e.regularTextColor,lineHeight:"22px"},newReaction:{borderWidth:1,borderStyle:"solid",borderColor:n.isMobile?"transparent":e.stroke.primary,borderRadius:6,boxShadow:n.isMobile?"unset":"0px 2px 4px 0px rgba(22, 29, 27, 0.02)"},avatarCommentReactionBarContainer:{...!n.isMobile&&{position:"relative"}},avatarAndCommentContainer:{display:"flex",flexDirection:"column"},commentContainer:{display:"flex",justifyContent:"space-between",gap:6,flexGrow:1}})),[n.isMobile]),c=(0,s().K8)((()=>{if(t&&t.table===Ao().SN)return t}),[t]),m=(0,s().K8)((()=>{if(!c)return null;const e=ri().gp(c).getValue();if(!e)return null;const i=t.getSpaceId();if(!i)return null;const r=(0,Qt().Eh)({textValue:e,currentUserId:o.currentUser.id,getRecordModel:t.getRecordModel,highlightStyle:"text_only"});return(0,oi().S5)({environment:o,textValue:{value:r,spaceId:i},parentStore:t,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableHover:!0,disabled:!0,theme:a,emojiType:(0,ii().FN)(o),katex:o.KatexStore.getKatex(),formulaValueTypes:[]})}),[t,o,a,c]);return(0,re.jsxs)("div",{style:l.avatarCommentReactionBarContainer,children:[c&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{style:l.avatarAndCommentContainer,children:(0,re.jsx)("div",{children:(0,re.jsx)(Ci,{commentStore:c})})}),(0,re.jsx)("div",{style:l.commentContainer,children:(0,re.jsx)("div",{style:A().RC,children:(0,re.jsx)("span",{style:l.commentText,children:m})})})]}),(0,re.jsx)(Zt().fj,{parentStore:t,discussionLocation:d,onReactionToggle:()=>{},newReactionStyle:l.newReaction})]})}var Ro=()=>i(599987);function ko(){const e=(0,u().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,re.jsx)(xe,{children:(0,Ro().P)(e.icon)})}var Co=()=>i(120739),Mo=()=>i(578136);function wo(e){const{titledRecordStore:t,rootStore:i,activity:n,tabArgs:a}=e,d=i.getRecordModel,l=(0,s().K8)((()=>t.getModel()),[t]),c=(0,r().v3)(),m=(0,s().K8)((()=>c.device.isMobile),[c]),g=(0,s().K8)((()=>null==l?void 0:l.getRenderIcon({getRecordModel:d})),[l,d]),v=(0,o.useCallback)((o=>{const r=t.table;switch(r){case h().ev:(0,He().Qo)({environment:c,activity:n,...a});break;case f().yK:(0,He().Qo)({environment:c,activity:n,...a}),Hi().L0({environment:c,teamStore:t,shouldScroll:!0}),Wi().A.setState({...Wi().A.state,open:!1});const s=e.notification;if(!s||s.read)break;(0,O().SQ)({event:o,context:O().y$.NotificationClick,callback:()=>{P().createAndCommit({userAction:"NotificationTitleCard.handleMarkAsRead",environment:c,canUndo:!0,perform:e=>{q().ZB({notification:s,rootStore:i,transaction:e,read:!0})}})}});break;default:(0,S().HB)(r)}}),[n,c,e.notification,i,a,t]),[p,b]=o.useState(!1),[x,_]=o.useState(!1),j=(0,u().IS)((e=>({container:{display:"flex",alignItems:"center",borderRadius:8,background:x?e.state.pressed:p?e.state.hover:"transparent",transition:`background ${ue}`,marginTop:0,padding:12,boxShadow:"0px 1px 2px 0px "+("light"===e.mode?"rgba(0, 0, 0, 0.03)":"rgba(0, 0, 0, 0.12)"),border:"1px",borderStyle:"solid",borderColor:e.tint.regular,cursor:p?"pointer":"default"},icon:{...dt().kI,marginRight:10},activityTitle:{fontSize:14,marginRight:void 0!==g?3:0,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,verticalAlign:"top",textAlign:"left",lineHeight:A().K_.UIRegular.desktop,...A().RC,whiteSpace:"normal",...dt().a_},title:{maxWidth:"80%"},spacer:{flexGrow:1},subtitle:{fontSize:12,color:e.lightTextColor},avatarContainer:{display:"flex",flexDirection:"row",justifyContent:"start",overflow:"hidden",paddingRight:2,alignItems:"center"},overlappingAvatar:{marginRight:-5,position:"relative"},rightmostAvatar:{position:"relative"},remainderCount:{paddingLeft:2,color:e.lightTextColor}})),[g,p,x]),R=(0,s().K8)((()=>{let e=[],i=0;const o=t.table;switch(o){case"block":const r=t.getCreatedByPointer();(null==r?void 0:r.table)===y().oo&&(e=[r.id]),i=Math.max(0,e.length-Vi);break;case"team":const s=(0,Fi().PF)(t);e=(null==s?void 0:s.sampleMemberUserIds)??[],i=Math.max(0,(null==s?void 0:s.memberCount)??0-Vi);break;default:(0,S().HB)(o)}const r=Math.min(e.length,Vi);return(0,re.jsx)($i,{userIds:e,remainingAvatarCount:i,shownAvatarCount:r,titledRecordStore:t,isMobile:m})}),[m,t]);return l?(0,re.jsxs)("div",{style:j.container,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),onMouseDown:()=>_(!0),onMouseUp:()=>_(!1),onClick:v,children:[g&&(0,re.jsx)(Q().A,{disabled:!0,icon:g,isEmptyPage:!1,size:25,style:j.icon}),(0,re.jsx)("div",{style:j.title,children:(0,re.jsx)(Z().A,{store:t,style:j.activityTitle})}),(0,re.jsx)("div",{style:j.spacer}),(0,re.jsx)("div",{children:R})]}):null}const Ko=o.memo(wo);i(430670);var Io=()=>i(232802),Bo=()=>i(762433),qo=()=>i(84817),To=()=>i(8980),Po=()=>i(554509);function Lo(e){const{activity:t,isFirst:o,isLast:n,rootStore:a,tabArgs:d}=e,{tab:l,notification:m}=d,g=(0,u().IS)((e=>({container:{paddingTop:8},actionButton:{height:28,paddingLeft:12,paddingRight:12,boxShadow:e.shadow2XS,fontSize:14,color:e.regularTextColor},getActionButtonStyleWithoutOutline:{height:26,paddingLeft:8,paddingRight:8,color:e.regularTextColor,fontSize:14},approvalIcon:{width:12,height:12},approvalMessageContainer:{fontSize:12,color:e.text.secondary}})),[]),v=(0,r().v3)(),h=(0,i(58293).r)(),p=(0,b().tz)(),f=(0,i(714300).l)({spaceId:null==h?void 0:h.id}),y=(0,s().K8)((()=>(0,Ht().W9)(t.getEdits())),[t]),S=(0,s().K8)((()=>(0,c().Ln)({edits:y,rootStore:a})),[y,a]),{frontActorStore:x,backActorStore:_}=(0,s().K8)((()=>{const e=S.map((e=>C().sk.createChildStore(a,e)));return{frontActorStore:e.at(0),backActorStore:e.at(1)}}),[S,a]),j=y.length>0,R=(0,s().K8)((()=>{var e;const i=null===(e=y[0])||void 0===e?void 0:e.request_id;return a.getRecordModel({table:Io().GU,id:i,spaceId:t.space_id})}),[y,a,t.space_id]),k=(0,s().K8)((()=>R?R.getRequest():null),[R]),M=(0,s().K8)((()=>Bo().N8(null==f?void 0:f.subscription)),[f]),w=(0,i(128265).n)(),K=(0,s().K8)((()=>R?R.getReasonForRequest():null),[R]),I=(0,s().K8)((()=>R?R.getRequestStatus():null),[R]),q=(0,s().K8)((()=>{const e={enterprise:["business"]};const t=(0,Bo().d$)(f).filter((e=>(0,Io().rU)(e))),i=(0,B().R9)((0,B().sb)(t.flatMap((t=>e[t]??[]))),t);return!!k&&((0,Bo().eh)(f,k)||i.includes(k))}),[f,k]);if(!k)return null;const T=(0,i(593524).Y)(k,M,w);if(!R||!j||!T)return null;return(0,re.jsxs)(_e,{header:(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested an upgrade to the workspace} other {{authorOrAuthors} requested an upgrade to the workspace}}",id:"activity.upgradeRequested.standardizedHeader.single",values:{numberOfAuthors:S.length,authorOrAuthors:(0,re.jsx)(Ii,{authorsLength:S.length,frontActorStore:x,backActorStore:_,authorTextStyle:{fontWeight:A().Wy.medium}})}})}),isFirst:o,isLast:n,isPrivate:!1,rootStore:a,notification:m,icon:x&&_?(0,re.jsx)(Ki,{frontActorStore:x,backActorStore:_}):(0,re.jsx)(at().H8,{authors:S,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),url:void 0,showSnapshotButton:!1,...(0,He().$5)({notification:m,activity:t,environment:v,tab:l}),children:[(0,re.jsxs)(qo().Y1,{direction:"vertical",align:"center-left",gap:8,children:[(0,re.jsxs)(qo().Y1,{direction:"horizontal",align:"center-left",gap:4,children:["ai"===k&&(0,re.jsx)(To().I,{icon:i(529099).v}),"ai"!==k&&(0,re.jsx)(To().I,{icon:i(132855).G,color:"uiBluePrimary"}),(0,re.jsx)(Po().D,{styleName:"UIRegular-14px/Semibold",children:(0,re.jsx)(b().sA,{defaultMessage:"Notion {productName}",id:"activityNotification.upgradeRequestCreated.productName",values:{productName:i(979340).v0[k].defaultMessage}})})]}),(0,re.jsx)(Po().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",style:{marginBottom:4},children:K})]}),"pending"===I&&!q&&(0,re.jsx)("div",{style:g.container,children:(0,re.jsxs)(qo().Y1,{direction:"horizontal",align:"center-left",gap:4,children:[(0,re.jsx)(ne,{children:(0,re.jsx)(je().p,{size:"xs",isGray:!0,onClick:async()=>{await(0,i(911964).F)({environment:v,spaceStore:h,billingData:f,product:k,from:"upgrade_request_created_notification"})},style:g.actionButton,children:p.formatMessage(T)})}),(0,re.jsx)(ne,{children:(0,re.jsx)(je().p,{size:"xs",isGray:!0,onClick:()=>{we().Ow({currentTab:"requests",openedFrom:"upgrade_request_created_notification",subtab:"upgrades"})},style:g.getActionButtonStyleWithoutOutline,children:(0,re.jsx)(b().sA,{defaultMessage:"View all",id:"activityNotification.upgradeRequestCreated.viewAllRequestsButton.label"})})})]})}),("approved"===I||"superseded"===I||q)&&(0,re.jsx)("div",{style:g.container,children:(0,re.jsxs)(qo().Y1,{direction:"horizontal",align:"center-left",gap:4,style:g.approvalMessageContainer,children:[(0,Xt().b)(g.approvalIcon),(0,re.jsx)(b().sA,{id:"activityNotification.upgradeRequestCreated.requestApproved",defaultMessage:"This request has been approved."})]})})]})}var No=()=>i(814388),Oo=()=>i(426302),Eo=()=>i(456328),Uo=()=>i(720665);function Do(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),m=(0,s().K8)((()=>t.getEdits()),[t]),v=m[0],h=Ho({rootStore:i,edit:v}),p=function(e){let{data:t,tab:i,rootStore:o}=e;const n=(0,r().v3)();return(0,s().K8)((()=>{if("block"!==(null==t?void 0:t.type))return!1;const e=t.blockStore.id;return(0,c().DU)({recordId:e,recordType:"block",tab:i,rootStore:o,environment:n})}),[t,n,o,i])}({data:h,tab:l,rootStore:i}),f=(0,s().K8)((()=>(0,c().Ln)({edits:m,rootStore:i})),[m,i]),y=(0,s().K8)((()=>{if("block"===(null==h?void 0:h.type))return h.blockStore}),[h]),b=(0,s().K8)((()=>{if(!y)return;const e=y.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification}):void 0}),[y,i.getRecordModel]),S=(0,s().K8)((()=>t.navigable_block_id),[t]);if(0===m.length||!h)return null;const A=0===f.filter(ke().L_).length,x=A?void 0:(0,re.jsx)(at().H8,{authors:f,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1});return(0,re.jsxs)(_e,{header:(0,re.jsx)(Fo,{data:h,authors:f,isFromBot:A}),hidePageTitle:!0,isFirst:n,isLast:a,isPrivate:p,rootStore:i,navigableBlockId:S,notification:d,icon:x,showSnapshotButton:!1,url:b,...(0,He().$5)({notification:d,environment:u,tab:l,activity:t}),children:[(0,re.jsx)(Wo,{...e,edit:v}),(0,re.jsx)(zo,{data:h,rootStore:i,activity:t,tabArgs:o})]})}function zo(e){var t;const{data:i,rootStore:o,activity:r,tabArgs:s}=e,n=(0,u().IS)((e=>({group:{color:e.mediumTextColor,fontSize:14},titleCardWrapper:{display:"contents",pointerEvents:"none"}})),[]);switch(i.type){case"block":return(0,re.jsx)(ne,{children:(0,re.jsx)(Ko,{titledRecordStore:i.blockStore,rootStore:o,activity:r,tabArgs:s})});case"group":return(0,re.jsx)("div",{style:n.group,children:(0,re.jsx)(b().sA,{defaultMessage:"You will now get notifications when @{groupName} is mentioned",id:"activity.userInvitedActivity.groupInviteExplanation",values:{groupName:null===(t=i.group)||void 0===t?void 0:t.name}})});case"space":return(0,re.jsx)(ne,{children:(0,re.jsx)("div",{style:n.titleCardWrapper,children:(0,re.jsx)(Yi,{tabArgs:s,titledRecordStore:i.spaceStore,rootStore:o,activity:r})})});default:(0,S().HB)(i)}}function Fo(e){var t,i;const{data:o,authors:r,isFromBot:n}=e,a=(0,s().K8)((()=>(0,c().bD)(r,{...(0,k()._m)()})),[r]);switch(o.type){case"block":return n?(0,re.jsx)(b().sA,{defaultMessage:"You were invited to a page",id:"activity.userInvitedActivityByBot.standardizedHeader.redesign"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a page} other {{authorOrAuthors} invited you to a page}}",values:{numberOfAuthors:r.length,authorOrAuthors:a},id:"activity.userInvitedActivity.standardizedHeader.redesign"});case"group":return n?(0,re.jsx)(b().sA,{defaultMessage:"You were added to @{groupName}",values:{groupName:null===(t=o.group)||void 0===t?void 0:t.name},id:"activity.userInvitedActivityGroupIdByBot.standardizedHeader.redesign"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to @{groupName}} other {{authorOrAuthors} added you to @{groupName}}}",values:{numberOfAuthors:r.length,authorOrAuthors:a,groupName:null===(i=o.group)||void 0===i?void 0:i.name},id:"activity.userInvitedActivityGroupId.standardizedHeader.redesign"});case"space":return n?(0,re.jsx)(b().sA,{defaultMessage:"You were invited to a workspace",id:"activity.userInvitedActivityOtherInviteByBot.standardizedHeader.redesign"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a workspace} other {{authorOrAuthors} invited you to a workspace}}",values:{numberOfAuthors:r.length,authorOrAuthors:a},id:"activity.userInvitedActivityOtherInvite.standardizedHeader.redesign"});default:(0,S().HB)(o)}}function Wo(e){const{edit:t,activity:i,rootStore:o,tabArgs:n}=e,a=(0,r().v3)(),{isMobile:d}=a.device,{source:l}=n,c=(0,u().IS)((()=>({redesignedInviteMessage:{fontSize:14,paddingTop:8,paddingBottom:8},inviteMessage:{paddingLeft:(0,dt().F9)({source:l,isMobile:d}),paddingTop:8,paddingBottom:8,paddingRight:12,fontSize:14}})),[d,l]),m=Ho({rootStore:o,edit:t}),g=(0,s().K8)((()=>parseInt(i.end_time)),[i]),v=(0,s().K8)((()=>{if("block"!==(null==m?void 0:m.type))return;const e=m.blockStore;return null!=e&&e.isDefined()?e.getModel():void 0}),[m]),h=(0,s().K8)((()=>{if(!v)return{isValid:!1};const e=v&&(0,Eo()._T)(v,i);if(!e)return{isValid:!1};const t=o.getRecordModel({table:Oo().Yx,id:e,spaceId:i.space_id});return t&&t.getMessage()&&t.getCreatedTime()<=g+5*Uo().Xb?{isValid:!0,message:t.getMessage()}:{isValid:!1}}),[i,g,v,o]);return null!=h&&h.isValid?(0,re.jsx)("div",{style:c.redesignedInviteMessage,children:h.message}):null}function Ho(e){let{rootStore:t,edit:i}=e;return(0,s().K8)((()=>{if(i)return i.navigable_block_id?{type:"block",blockStore:C().Bv.createChildStore(t,{table:h().ev,id:i.navigable_block_id})}:i.permission_group_id?{type:"group",group:(0,No().$I)({spaceId:i.space_id,permissionGroupId:i.permission_group_id,getRecordValue:t.getRecordValue})}:{type:"space",spaceStore:C().SL.createChildStore(t,{table:p().NX,id:i.space_id})}}),[i,t])}var Vo=()=>i(66689),$o=()=>i(801634);function Go(e){const{mentionedProperty:t,authorPhrase:i,authors:o}=e;switch(t){case Vo().yx.Assign:return(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} assigned you a task} other {{authorOrAuthors} assigned you a task}}",values:{numberOfAuthors:o.length,authorOrAuthors:i},id:"activity.mentionTaskActivity.standardizedHeader"});case Vo().K4.People:return(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you in} other {{authorOrAuthors} mentioned you in}}",values:{numberOfAuthors:o.length,authorOrAuthors:i},id:"activity.mentionProjectActivity.standardizedHeader.short"});default:return(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you in} other {{authorOrAuthors} mentioned you in}}",values:{numberOfAuthors:o.length,authorOrAuthors:i},id:"activity.mentionActivity.standardizedHeader.short"})}}var Yo=()=>i(372160),Xo=()=>i(519831),Jo=()=>i(931075);function Qo(){const e=(0,u().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,re.jsx)(xe,{children:(0,Yo().E)(e.icon)})}const Zo={"block-property-edited":function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{tab:d,notification:l}=o,u=(0,s().K8)((()=>(0,Ht().W9)(t.getEdits())),[t]),m=u.length>0,v=(0,s().K8)((()=>C().Bv.createChildStore(i,{table:h().ev,id:u[0].navigable_block_id})),[i,u]),p=(0,s().K8)((()=>{const e=v.getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[v,i]),f=(0,s().K8)((()=>(0,c().Ln)({edits:u,rootStore:i})),[u,i]),y=(0,r().v3)(),S=(0,s().K8)((()=>(0,c().bD)(f,{...(0,k()._m)()})),[f]),A=(0,s().K8)((()=>(0,c().DU)({recordId:v.id,recordType:"block",tab:d,rootStore:i,environment:y})),[v,d,i,y]);if(!(0,s().K8)((()=>v.isDefined()),[v])||!m)return null;const x=new Set;return u.forEach((e=>{Object.keys(e.property_updates).forEach((e=>{x.add(e)}))})),(0,re.jsx)(_e,{header:x.size>1?(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated properties} other {{authorOrAuthors} updated properties}}",id:"activity.blockEdited.standardizedHeader.multiple",values:{numberOfAuthors:f.length,authorOrAuthors:S}})}):(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated a property} other {{authorOrAuthors} updated a property}}",id:"activity.blockEdited.standardizedHeader.single",values:{numberOfAuthors:f.length,authorOrAuthors:S}})}),isFirst:n,isLast:a,isPrivate:A,rootStore:i,navigableBlockId:v.id,notification:l,icon:(0,re.jsx)(at().H8,{authors:f,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:p,...(0,He().$5)({notification:l,activity:t,environment:y,tab:d}),children:(0,re.jsx)($t().A,{visible:5,items:u.map(((e,t)=>(0,re.jsx)(Vt().A,{edit:e,rootStore:i},t)))})})},"user-mentioned":function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{tab:d,notification:l}=o,u=(0,r().v3)(),m=(0,s().K8)((()=>t.getEdits()),[t]),v=m.length>0,p=m[0],f=C().Bv.createChildStore(i,{table:h().ev,id:p.navigable_block_id}),y=(0,s().K8)((()=>f.isDefined()),[f]),b=(0,s().K8)((()=>C().xq.createChildStore(i,{table:$o().kz,id:t.id,spaceId:t.space_id}).getStandardizedMentionedPropertyURI()),[t,i]),S=(0,s().K8)((()=>{const e=C().Bv.createChildStore(i,{table:h().ev,id:t.mentioned_block_id}).getModel();return null==e?void 0:e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[t,i]),A=(0,s().K8)((()=>(0,c().Ln)({edits:m,rootStore:i})),[m,i]),x=(0,s().K8)((()=>(0,c().bD)(A,{...(0,k()._m)()})),[A]),_=(0,s().K8)((()=>(0,c().DU)({recordId:f.id,recordType:"block",tab:d,rootStore:i,environment:u})),[f,d,i,u]);return v&&y&&S?(0,re.jsx)(_e,{header:(0,re.jsx)(Go,{mentionedProperty:b,authorPhrase:x,authors:A}),isFirst:n,isLast:a,isPrivate:_,rootStore:i,navigableBlockId:f.id,notification:l,icon:(0,re.jsx)(at().H8,{authors:A,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:S,...(0,He().$5)({notification:l,activity:t,environment:u,tab:d}),children:(0,re.jsx)(Vt().A,{edit:p,rootStore:i,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):null},commented:Ti,"user-invited":o.memo(Do),reminder:function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),m=(0,s().K8)((()=>t.getEdits()),[t]),v=m.length>0,p=C().Bv.createChildStore(i,{table:h().ev,id:m[0].navigable_block_id}),f=(0,s().K8)((()=>p.isDefined()),[p]),y=(0,s().K8)((()=>{const e=C().Bv.createChildStore(i,{table:h().ev,id:t.reminder_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[t,i]),S=(0,s().K8)((()=>(0,c().DU)({recordId:p.id,recordType:h().ev,tab:l,rootStore:i,environment:u})),[p,l,i,u]);return v&&f&&y?(0,re.jsx)(_e,{header:(0,re.jsx)("span",{style:{fontWeight:A().Wy.medium},children:(0,re.jsx)(b().sA,{defaultMessage:"Reminder",id:"activity.reminderInActivity.header.short"})}),isFirst:n,isLast:a,isPrivate:S,rootStore:i,navigableBlockId:p.id,notification:d,icon:(0,re.jsx)(ko,{}),showSnapshotButton:!1,url:y,...(0,He().$5)({notification:d,activity:t,environment:u,tab:l}),children:(0,re.jsx)(Vt().A,{edit:m[0],rootStore:i})}):null},"email-edited":Pi,"access-requested":bt,"access-request-resolved":xt,"team-membership-edited":function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),m=(0,s().K8)((()=>t.getEdits()),[t]),v=m.length>0,h=(0,s().K8)((()=>(0,c().Ln)({edits:m,rootStore:i})),[m,i]),p=(0,s().K8)((()=>(0,c().bD)(h,{...(0,k()._m)()})),[h]),y=m[0],S=C().h4.createChildStore(i,{table:f().yK,id:y.team_id}),A=(0,s().K8)((()=>S.isDefined()),[S]),x=(0,s().K8)((()=>{if((0,Mo().D)({isMobileNative:u.device.isMobileNative}))return(0,Co().a)({teamId:y.team_id,pageVisitSource:g().y8.Notification})}),[y.team_id,u]);return v&&A?(0,re.jsx)(_e,{header:(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a teamspace} other {{authorOrAuthors} invited you to a teamspace}}",values:{numberOfAuthors:h.length,authorOrAuthors:p},id:"activity.userInvitedToTeamActivity.standardizedHeader"}),isFirst:n,isLast:a,isPrivate:!1,rootStore:i,notification:d,icon:(0,re.jsx)(at().H8,{authors:h,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:x,...(0,He().$5)({notification:d,activity:t,environment:u,tab:l}),children:(0,re.jsx)(ne,{children:(0,re.jsx)(Ko,{titledRecordStore:S,rootStore:i,activity:t,tabArgs:o,notification:d})})}):null},"private-content-transferred":So,"permission-group-mentioned":function(e){const{activity:t,rootStore:i,isFirst:o,isLast:n,tabArgs:a}=e,{tab:d,notification:l}=a,u=(0,r().v3)(),m=(0,s().K8)((()=>t.getEdits()),[t]),v=m.length>0,p=m[0],f=C().Bv.createChildStore(i,{table:h().ev,id:p.navigable_block_id}),y=(0,s().K8)((()=>f.isDefined()),[f]),S=(0,s().K8)((()=>{const e=C().Bv.createChildStore(i,{table:h().ev,id:t.mentioned_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[t,i]),A=(0,s().K8)((()=>(0,c().Ln)({edits:t.getEdits(),rootStore:i})),[t,i]),x=(0,s().K8)((()=>(0,c().bD)(A,{...(0,k()._m)()})),[A]),_=(0,s().K8)((()=>(0,c().DU)({recordId:f.id,recordType:h().ev,tab:d,rootStore:i,environment:u})),[f,d,i,u]);return v&&y&&S?(0,re.jsx)(_e,{header:(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned your group} other {{authorOrAuthors} mentioned your group}}",values:{numberOfAuthors:A.length,authorOrAuthors:x},id:"activity.groupMentionActivity.standardizedHeader.short"})}),isFirst:o,isLast:n,isPrivate:_,rootStore:i,navigableBlockId:f.id,notification:l,icon:(0,re.jsx)(at().H8,{authors:A,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:S,...(0,He().$5)({notification:l,activity:t,environment:u,tab:d}),children:(0,re.jsx)(Vt().A,{edit:p,rootStore:i,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):null},"team-mentioned":function(e){const{activity:t,rootStore:i,isFirst:o,isLast:n,tabArgs:a}=e,{tab:d,notification:l}=a,u=(0,r().v3)(),m=(0,s().K8)((()=>t.getEdits()),[t]),v=m.length>0,p=m[0],f=(0,s().K8)((()=>C().Bv.createChildStore(i,{table:h().ev,id:p.navigable_block_id})),[p,i]),y=(0,s().K8)((()=>f&&f.isDefined()),[f]),S=(0,s().K8)((()=>{const e=C().Bv.createChildStore(i,{table:h().ev,id:t.mentioned_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[t,i]),A=(0,s().K8)((()=>(0,c().Ln)({edits:t.getEdits(),rootStore:i})),[t,i]),x=(0,s().K8)((()=>(0,c().bD)(A,{...(0,k()._m)()})),[A]),_=(0,s().K8)((()=>(0,c().DU)({recordId:f.id,recordType:h().ev,tab:d,rootStore:i,environment:u})),[f,d,i,u]);return v&&y&&S?(0,re.jsx)(_e,{header:(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned your teamspace} other {{authorOrAuthors} mentioned your teamspace}}",values:{numberOfAuthors:A.length,authorOrAuthors:x},id:"activity.teamMentionActivity.standardizedHeader.short"})}),isFirst:o,isLast:n,isPrivate:_,rootStore:i,navigableBlockId:f.id,notification:l,icon:(0,re.jsx)(at().H8,{authors:A,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:S,...(0,He().$5)({notification:l,activity:t,environment:u,tab:d}),children:(0,re.jsx)(Vt().A,{edit:p,rootStore:i,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):null},"verification-expired":function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{tab:d,notification:l}=o,m=(0,r().v3)(),v=(0,s().K8)((()=>C().Bv.createChildStore(i,{table:h().ev,id:t.navigable_block_id})),[t,i]),p=(0,s().K8)((()=>v.isDefined()),[v]),f=(0,s().K8)((()=>{const e=v.getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[v,i]),y=(0,s().K8)((()=>t.collection_id?C().md.createChildStore(i,{table:Xo().Vl,id:t.collection_id,spaceId:t.space_id}):void 0),[t,i]),S=(0,s().K8)((()=>!(null==y||!y.isPageTreeCollection())),[y]),x=(0,s().K8)((()=>{let e;if(S){const t=null==y?void 0:y.getSchema();e=(t?Object.keys(t):[]).find((e=>{var i;return!!t&&"verification"===(null===(i=t[e])||void 0===i?void 0:i.type)}))}else e=Jo()._e.Verification;let t=(0,re.jsx)(b().sA,{id:"Activity.author.unknown",defaultMessage:"Unknown"});if(e){const o=v.getPropertyValue(e),r=(0,Jo().U1)(o);if(r){const e=r[0],o=(0,c().T9)(e,i);o&&o.asActor&&(t=(0,c().bD)([o],{...(0,k()._m)()}))}}return t}),[v,y,S,i]),_=(0,s().K8)((()=>(0,c().DU)({recordId:v.id,recordType:"block",tab:d,rootStore:i,environment:m})),[v,d,i,m]),{activityStartTimestamp:j,activityEndTimestamp:R}=(0,s().K8)((()=>({activityStartTimestamp:parseInt(t.start_time),activityEndTimestamp:parseInt(t.end_time)})),[t]),M=(0,u().IS)((e=>({verificationMessage:{fontSize:14,color:e.mediumTextColor}})),[]);return p?(0,re.jsx)(_e,{header:S?(0,re.jsx)(b().sA,{defaultMessage:"<medium>Wiki verification</medium> expired",id:"activity.verificationExpired.header.short",values:{medium:e=>(0,re.jsx)("span",{style:{fontWeight:A().Wy.medium},children:e})}}):(0,re.jsx)(b().sA,{defaultMessage:"<medium>Page verification</medium> expired",id:"activity.verificationExpired.page.header.short",values:{medium:e=>(0,re.jsx)("span",{style:{fontWeight:A().Wy.medium},children:e})}}),isFirst:n,isLast:a,isPrivate:_,rootStore:y??i,navigableBlockId:v.id,notification:l,icon:(0,re.jsx)(Qo,{}),showSnapshotButton:!1,url:f,...(0,He().$5)({notification:l,activity:t,environment:m,tab:d}),children:(0,re.jsx)("div",{style:M.verificationMessage,children:j&&R?(0,re.jsx)(b().sA,{defaultMessage:"Last verified by {person} from {startDate} to {endDate}",values:{person:x,startDate:(0,U().DG)(j),endDate:(0,U().DG)(R)},id:"activity.verificationExpired.contentWithTimestamp"}):(0,re.jsx)(b().sA,{defaultMessage:"Last verified by {person}",values:{person:x},id:"activity.verificationExpired.contentWithoutTimestamp"})})}):null},"export-completed":function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{tab:d,notification:l,source:c}=o,m=(0,r().v3)(),g=m.device.isMobile,{edits:v}=(0,s().K8)((()=>({edits:t.getEdits()})),[t]),h=(0,u().IS)((e=>({container:{paddingLeft:(0,dt().F9)({source:c,isMobile:g}),paddingTop:12,paddingBottom:4},newContainer:{paddingTop:12,paddingBottom:4},actionButton:(0,dt().Ei)(e)})),[g,c]),p=(0,re.jsx)(b().sA,{defaultMessage:"Your workspace export is ready",id:"activity.exportCompleted.header"}),f=(0,re.jsx)(Ni().Ye,{style:{fontSize:12},children:(0,re.jsx)(b().sA,{defaultMessage:"The download link will expire in 7 days.",id:"activity.exportCompleted.downloadLink"})});return(0,re.jsxs)(_e,{header:p,isFirst:n,isLast:a,isPrivate:!0,rootStore:i,notification:l,icon:(0,re.jsx)(Oi,{}),showSnapshotButton:!1,url:void 0,...(0,He().$5)({notification:l,activity:t,environment:m,tab:d}),children:[f,(0,re.jsx)("div",{style:h.newContainer,children:(0,re.jsx)(je().p,{isGray:!0,size:"xs",onClick:()=>{window.open(v[0].link,"_blank")},style:h.actionButton,children:(0,re.jsx)(b().sA,{defaultMessage:"Download",id:"activity.actions.exportCompleted.download"})})})]})},"import-completed":function(e){var t;const{activity:o,rootStore:n,tabArgs:a,isFirst:d,isLast:l}=e,{tab:c,notification:m,source:v}=a,p=(0,r().v3)(),{edits:f}=(0,s().K8)((()=>({edits:o.getEdits()})),[o]),y=null===(t=f[0])||void 0===t?void 0:t.teamspace_id,S=(0,s().K8)((()=>i(988499).A.state.teams.find((e=>e.id===y))),[y]),A=(0,s().K8)((()=>null==S?void 0:S.getName()),[S]),x=p.device.isMobile,_=(0,u().IS)((e=>({linkbox:{...(0,dt().aY)({source:v,isMobile:x}),display:"flex",alignItems:"center",fontSize:zi().ny(p,"UIRegular"),paddingTop:2,paddingBottom:6,marginBottom:0,width:"100%"},newContainerLinkBox:{...(0,dt().aY)({source:v,isMobile:x}),display:"flex",alignItems:"center",fontSize:zi().ny(p,"UIRegular"),paddingTop:2,paddingBottom:6,marginBottom:0,paddingLeft:0,width:"100%"}})),[x,v,p]);if(!f.length)return(0,re.jsx)(re.Fragment,{});const{import_source:j,import_status:R,version:k,landing_page:M,collection_page_ids:w}=f[0],K=(0,re.jsx)(b().sA,{defaultMessage:"Your {importSource} import has failed",id:"activity.importFailed.header",values:{importSource:j,importStatus:R}}),I=(0,re.jsx)(b().sA,{defaultMessage:"Your {importSource} import was successful",id:"activity.importSuccess.header",values:{importSource:j,importStatus:R}}),B=(0,re.jsx)(Ni().Ye,{style:{fontSize:zi().ny(p,"UISmall")},children:(0,re.jsx)(b().sA,{defaultMessage:"View projects and tasks in Notion",id:"activity.importCompleted.projects.redirect"})}),q=(0,re.jsx)(Ni().Ye,{style:{fontSize:zi().ny(p,"UISmall")},children:(0,re.jsx)(b().sA,{defaultMessage:"View boards in Notion",id:"activity.importCompleted.boards.redirect"})}),T=(0,re.jsx)(Ni().Ye,{style:{fontSize:zi().ny(p,"UISmall")},children:(0,re.jsx)(b().sA,{defaultMessage:"View import logs",id:"activity.importCompleted.loggerPage.redirect"})}),P=(0,Ei().A)({pageId:M,pageVisitSource:g().y8.Import});let L="successful"===R?I:K,N=(0,re.jsx)(Ni().Ye,{children:(0,re.jsx)(ai().A,{href:P,innerStyle:_.newContainerLinkBox,children:"successful"===R?"Monday"===j&&"v2"===k?q:B:T})});const O="Jira"===j?(0,re.jsx)(Ji,{}):(0,re.jsx)(Xi,{}),E=null==w?void 0:w[0];if("Jira"===j){const{headerComponent:e,bodyComponent:t}=(()=>{let e,t;if(S&&"successful"===R&&(e=(0,re.jsxs)("div",{children:[(0,re.jsx)(b().sA,{defaultMessage:"Your Jira projects and tasks have been synced to",id:"activity.importCompleted.jira.success.header"})," ",(0,re.jsx)("div",{style:{display:"inline-block",position:"relative"},children:(0,re.jsx)(i(898808).x,{disabled:!0,store:S,size:20})})," ",(0,re.jsx)("span",{children:A})]})),E){const e=C().Bv.createChildStore(n,{id:E.projectCollectionPageId,spaceId:n.id,table:h().ev}),i=C().Bv.createChildStore(n,{id:E.taskCollectionPageId,spaceId:n.id,table:h().ev});t=(0,re.jsxs)("div",{style:{paddingRight:12},children:[(0,re.jsx)(Yi,{titledRecordStore:e,rootStore:n,activity:o,tabArgs:a}),(0,re.jsx)("div",{style:{height:6}}),(0,re.jsx)(Yi,{titledRecordStore:i,rootStore:n,activity:o,tabArgs:a})]})}return{headerComponent:e,bodyComponent:t}})();t&&(N=t),e&&(L=e)}return(0,re.jsx)(_e,{url:void 0,header:L,isPrivate:!0,isFirst:d,isLast:l,rootStore:n,notification:m,icon:O,showSnapshotButton:!1,...(0,He().$5)({notification:m,activity:o,environment:p,tab:c}),children:N})},"in-app-notification-automation-action-triggered":function(e){const{activity:t,tabArgs:i}=e,{tab:o,notification:n}=i,a=(0,r().v3)(),d=(0,s().K8)((()=>t.getEdits()),[t]),l=d.length>0,c={tab:o,notificationId:null==n?void 0:n.id,environment:a,alreadyRead:Boolean(null==n?void 0:n.read),activity:t},m=(0,u().IS)((e=>({notificationContainer:{paddingBlock:"8px 4px",display:"flex",flexDirection:"column",rowGap:8}})),[]);return l?(0,re.jsx)(fo,{analyticsInfo:c,children:(0,re.jsx)(lo,{...e,edits:d,style:m.notificationContainer})}):null},"no-conflicts-found":function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{tab:d,notification:l}=o,c=(0,r().v3)(),u=(0,b().tz)(),m=(0,s().K8)((()=>t.navigable_block_id),[t]),v=(0,s().K8)((()=>{const e=bo().B.createChildStore(i,{table:h().ev,id:t.navigable_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[t,i]),p=(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"<b>{author}</b> did not find conflicts",id:"activity.noConflictsFound.header",values:{author:yo().px.getDisplayName(u),b:e=>(0,re.jsx)("span",{style:{fontWeight:A().Wy.semibold},children:e})}})});return v?(0,re.jsx)(_e,{header:p,isFirst:n,isLast:a,isPrivate:!0,rootStore:i,navigableBlockId:m,notification:l,icon:(0,re.jsx)(at().H8,{authors:[yo().px],size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:v,...(0,He().$5)({notification:l,activity:t,environment:c,tab:d})}):null},"automation-typecheck-error-raised":zt,reacted:xo,"upgrade-request-created":Lo,"app-builder-notification":Pt};function er(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{notification:d,tab:m,source:p}=o,f=(0,r().v3)(),y=(0,s().K8)((()=>t.getEdits()),[t]),b=y[0],S=(0,u().IS)((()=>({message:{marginBottom:8},messageLabel:{whiteSpace:"pre-wrap"},titleStyle:{fontSize:14,display:"flex"}})),[]),A=(0,s().K8)((()=>C().v3.createChildStore(i,{table:v().O,id:t.access_request_id})),[t,i]),x=(0,s().K8)((()=>A.getModel()),[A]),j=(0,s().K8)((()=>Boolean(x&&(0,_().t)(x,i))),[x,i]),k=x&&(0,re.jsx)(ir,{activity:t,accessRequest:x,rootStore:i,tabArgs:o}),M=b.message,w=(0,s().K8)((()=>(0,c().Ln)({edits:y,rootStore:i})),[y,i]),K=(0,s().K8)((()=>{if(null!=x&&x.isGuestInviteRequest()){const e=x.getAttributes().permission_records_and_roles[0],r=e&&C().Bv.createChildStore(i,{table:h().ev,id:e.id}),s=e.role;if(r.isDefined())return;return(0,re.jsx)(lt().A,{titledRecordStore:r,activity:t,tabArgs:o,getRecordModel:i.getRecordModel,permissionRole:s,shouldRenderEmpty:!0})}}),[o,x,t,i]),I=(0,s().K8)((()=>{if(t.navigable_block_id)return C().Bv.createChildStore(i,{table:h().ev,id:t.navigable_block_id})}),[t,i]),B=(0,s().K8)((()=>{if(!I)return;const e=I.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:g().y8.Notification}):void 0}),[I,i,t]),q=(0,R().I)({spaceStore:i,request:x}),T=(0,l().X)("workspace_member_access_notif_polish");return k?(0,re.jsxs)(_e,{header:(0,re.jsx)("span",{children:k}),isFirst:n,isLast:a,isPrivate:!1,rootStore:i,notification:d,icon:(0,re.jsx)(at().H8,{authors:w,size:le,style:{marginTop:0,marginRight:0},iconStyle:{right:-3},showAvatarShadow:!1,showWarningIcon:j}),showSnapshotButton:!1,url:B,...(0,He().$5)({notification:d,activity:t,environment:f,tab:m}),children:[T&&"space_membership_request"===q&&(0,re.jsx)(tr,{rootStore:i,accessRequestModel:x}),M&&(0,re.jsx)("div",{style:S.message,children:(0,re.jsx)(Pe().A,{isMultiline:!0,style:S.messageLabel,children:M})}),K&&(0,re.jsx)("div",{style:S.titleStyle,children:K}),(0,re.jsx)(ar,{activity:t,accessRequestStore:A,rootStore:i,source:p,notification:d,tabArgs:o})]}):null}function tr(e){const{rootStore:t,accessRequestModel:i}=e,o=(0,s().K8)((()=>i.getForActorId()===i.getCreatedById()),[i]),r=(0,s().K8)((()=>i.getForActorPointer(t.id)),[i,t.id]),n=r.table===y().oo?C().LU.createChildStore(t,r):void 0,a=(0,s().K8)((()=>null==n?void 0:n.getModel()),[n]),d=(0,s().K8)((()=>null==a?void 0:a.getEmail()),[a]),l=(0,s().K8)((()=>{if(!o)return d;const e=null==a?void 0:a.getFullName(j().A.getIntl());return e?`${e} (${d})`:d}),[o,a,d]),c=(0,u().IS)((()=>({inviteeBox:{display:"flex",alignItems:"center",marginBottom:8},inviteePhrase:{fontWeight:A().Wy.medium,fontSize:14}})),[]);return(0,re.jsxs)("div",{style:c.inviteeBox,children:[(0,re.jsx)(ct,{profileEmail:l}),(0,re.jsx)("span",{style:c.inviteePhrase,children:l})]})}function ir(e){const{activity:t,accessRequest:i,rootStore:o,tabArgs:r}=e,s=(0,R().I)({spaceStore:o,request:i});if(!s)return null;switch(s){case"guest_invite_request":return(0,re.jsx)(sr,{activity:t,accessRequest:i,rootStore:o});case"space_membership_request":return(0,re.jsx)(rr,{activity:t,accessRequest:i,rootStore:o});case"team_membership_request":return(0,re.jsx)(nr,{activity:t,rootStore:o,tabArgs:r});case"page_access_request":return(0,re.jsx)(or,{activity:t,tabArgs:r,rootStore:o,accessRequest:i});default:(0,S().HB)(s)}}function or(e){const{activity:t,rootStore:i,accessRequest:o}=e,r=(0,s().K8)((()=>t.getEdits()),[t]),n=(0,s().K8)((()=>{const e=o.getForActorPointer(i.id),t=e.table===y().oo?C().LU.createChildStore(i,e):void 0,r=null==t?void 0:t.getModel();return null==r?void 0:r.getEmail()}),[o,i]),a=(0,s().K8)((()=>Boolean(o&&(0,_().t)(o,i))),[o,i]),d=(0,s().K8)((()=>(0,c().Ln)({edits:r,rootStore:i})),[r,i]),l=(0,s().K8)((()=>a&&n?(0,c().Jd)(n,(0,k()._m)()):(0,c().bD)(d,(0,k()._m)())),[a,n,d]),u=(0,s().K8)((()=>{if(t.navigable_block_id)return C().Bv.createChildStore(i,{table:h().ev,id:t.navigable_block_id})}),[t,i]),m=(0,s().K8)((()=>o.isEditPageAccessRequest()),[o]);return u?m?(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested edit access to} other {{authorOrAuthors} requested edit access to}}",values:{numberOfAuthors:d.length,authorOrAuthors:l},id:"activity.editAccessRequested.header.short"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested access to} other {{authorOrAuthors} requested access to}}",values:{numberOfAuthors:d.length,authorOrAuthors:l},id:"activity.accessRequested.header.short"}):null}function rr(e){const{activity:t,accessRequest:i,rootStore:o}=e,r=(0,u().IS)((()=>({inviteePhrase:{fontWeight:A().Wy.semibold}})),[]),n=(0,s().K8)((()=>t.getEdits()),[t]),a=(0,s().K8)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=a.table===y().oo?C().LU.createChildStore(o,a):void 0,m=(0,s().K8)((()=>null==d?void 0:d.getModel()),[d]),g=(0,s().K8)((()=>null==m?void 0:m.getEmail()),[m]),v=(0,s().K8)((()=>i.getForActorId()===i.getCreatedById()),[i]),h=(0,s().K8)((()=>(0,c().Ln)({edits:n,rootStore:o})),[n,o]),p=(0,s().K8)((()=>(0,c().bD)(h,(0,k()._m)())),[h]),f=(0,s().K8)((()=>{if(!v)return g;const e=null==m?void 0:m.getFullName(j().A.getIntl());return e?`${e} (${g})`:g}),[v,m,g]),S=(0,l().X)("workspace_member_access_notif_polish");return m&&a.table===y().oo?v?(0,re.jsx)(b().sA,{defaultMessage:"{invitee} requested to become a workspace member",values:{invitee:(0,re.jsx)("span",{style:r.inviteePhrase,children:f})},id:"activity.accessRequestedMembershipFromGuest.header"}):S?(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add a workspace member} other {{authorOrAuthors} requested to add workspace members}}",values:{numberOfAuthors:h.length,authorOrAuthors:p},id:"activity.accessRequestedMembershipNoInvitee.header.short"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add {invitee} as a workspace member} other {{authorOrAuthors} requested to add {invitee} as a workspace member}}",values:{numberOfAuthors:h.length,authorOrAuthors:p,invitee:(0,re.jsx)("span",{style:r.inviteePhrase,children:f})},id:"activity.accessRequestedMembership.header.short"}):null}function sr(e){const{activity:t,accessRequest:i,rootStore:o}=e,r=(0,s().K8)((()=>t.getEdits()),[t]),n=(0,u().IS)((()=>({inviteePhrase:{fontWeight:A().Wy.semibold}})),[]),a=(0,s().K8)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=a.table===y().oo?C().LU.createChildStore(o,a):void 0,l=(0,s().K8)((()=>null==d?void 0:d.getModel()),[d]),m=(0,s().K8)((()=>null==l?void 0:l.getEmail()),[l]),g=(0,s().K8)((()=>(0,c().Ln)({edits:r,rootStore:o})),[r,o]),v=(0,s().K8)((()=>(0,c().bD)(g,{...(0,k()._m)()})),[g]);return(0,s().K8)((()=>i.isGuestInviteRequest()),[i])&&l&&a.table===y().oo?(0,re.jsx)(b().sA,{defaultMessage:"{requestorsPhrase} requested inviting {guestEmail} as a guest",values:{requestorsPhrase:v,guestEmail:(0,re.jsx)("span",{style:n.inviteePhrase,children:m})},id:"activity.guestInviteRequest.header.short"}):null}function nr(e){const{activity:t,rootStore:i,tabArgs:o}=e,r=(0,s().K8)((()=>t.getEdits()),[t]),n=(0,s().K8)((()=>(0,c().Ln)({edits:r,rootStore:i})),[r,i]),a=(0,s().K8)((()=>(0,c().bD)(n,{...(0,k()._m)()})),[n]),d=(0,s().K8)((()=>{if(t.team_id)return C().h4.createChildStore(i,{table:f().yK,id:t.team_id})}),[t,i]);return r&&d?(0,re.jsx)(b().sA,{defaultMessage:"{user} requested to join {teamName}",values:{user:(0,re.jsx)("span",{style:{fontWeight:A().Wy.semibold},children:a}),teamName:(0,re.jsx)(lt().A,{titledRecordStore:d,getRecordModel:i.getRecordModel,activity:t,tabArgs:o})},id:"activity.teamAccessRequest.header.short"}):null}function ar(e){const{activity:t,accessRequestStore:i,rootStore:n,notification:a,tabArgs:d}=e,l=(0,r().v3)(),c=(0,s().K8)((()=>t.getEdits()),[t])[0],g=(0,s().K8)((()=>i.getParentTable()),[i]),v=(0,s().K8)((()=>i.getParentId()),[i]),y=(0,s().K8)((()=>t.navigable_block_id),[t]),b=(0,s().K8)((()=>i.getModel()),[i]),A=(0,s().K8)((()=>b&&(0,m().C)(b)),[b]),_=(0,R().I)({spaceStore:n,request:b}),j=(0,s().K8)((()=>{if("page_access_request"===A){var e;const t=null==b||null===(e=b.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[b,A]),k=(0,o.useCallback)((async()=>{if(A&&_&&b)if("space_membership_request"===_&&"space_membership_request"===A)await x().p4({status:"approved",environment:l,requests:[b],store:n,from:"notification"});else if("space_membership_request"===_&&"guest_invite_request"===A)await x().KB({status:"approved",environment:l,store:n,requests:[b],from:"notification"});else{if("guest_invite_request"!==A)return;await x().aV({status:"approved",environment:l,requests:[b],from:"notification"})}}),[l,b,n,_,A]),M=(0,o.useCallback)((async()=>{if(A&&b)if("space_membership_request"===A)await x().p4({status:"rejected",environment:l,requests:[b],store:n,from:"notification"});else if("guest_invite_request"===A)await x().aV({status:"rejected",environment:l,requests:[b],from:"notification"});else{if("team_membership_request"===A||"page_access_request"===A)return;(0,S().HB)(A)}}),[l,b,n,A]),w=(0,u().IS)((e=>({actionPrimaryContainer:{paddingTop:4,paddingBottom:0,paddingRight:0},actionButton:(0,dt().Ei)(e)})),[]),K=y?C().Bv.createChildStore(n,{table:h().ev,id:y}):void 0,I=(0,s().K8)((()=>g===h().ev&&Boolean(null==K?void 0:K.canAdmin())),[g,K]);if(!(g&&v&&_&&c))return null;if("page_access_request"===_)return I&&K?(0,re.jsx)("div",{style:w.actionPrimaryContainer,children:(0,re.jsx)(Ge,{accessRequestStore:i,targetBlockStore:K,initialRole:j,buttonStyle:w.actionButton,notification:a,rootStore:n,activity:t,tabArgs:d})}):null;if("space_membership_request"===_||"guest_invite_request"===_){const e=C().SL.createChildStore(n,{table:p().NX,id:v});return(0,re.jsx)("div",{style:w.actionPrimaryContainer,children:(0,re.jsx)(Ie,{effectiveAccessRequestType:_,accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:w.actionButton,notification:a,onApprove:k,onReject:M})})}if("team_membership_request"===_){const e=C().h4.createChildStore(n,{table:f().yK,id:v});return(0,re.jsx)("div",{style:w.actionPrimaryContainer,children:(0,re.jsx)(Re,{accessRequestStore:i,teamStore:e})})}(0,S().HB)(_)}const dr=o.memo(er);function lr(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{notification:d,tab:m,source:p}=o,f=(0,r().v3)(),y=(0,s().K8)((()=>t.getEdits()),[t]),b=y[0],S=(0,u().IS)((()=>({message:{marginBottom:8},messageLabel:{whiteSpace:"pre-wrap"},titleStyle:{fontSize:14,display:"flex"}})),[]),A=(0,s().K8)((()=>C().v3.createChildStore(i,{table:v().O,id:t.access_request_id})),[t,i]),x=(0,s().K8)((()=>A.getModel()),[A]),j=(0,s().K8)((()=>Boolean(x&&(0,_().t)(x,i))),[x,i]),k=x&&(0,re.jsx)(ur,{activity:t,accessRequest:x,rootStore:i,tabArgs:o}),M=b.message,w=(0,s().K8)((()=>(0,c().Ln)({edits:y,rootStore:i})),[y,i]),K=(0,s().K8)((()=>{if(null!=x&&x.isGuestInviteRequest()){const e=x.getAttributes().permission_records_and_roles[0],r=e&&C().Bv.createChildStore(i,{table:h().ev,id:e.id}),s=e.role;if(r.isDefined())return;return(0,re.jsx)(lt().A,{titledRecordStore:r,activity:t,tabArgs:o,getRecordModel:i.getRecordModel,permissionRole:s,shouldRenderEmpty:!0})}}),[o,x,t,i]),I=(0,s().K8)((()=>{if(t.navigable_block_id)return C().Bv.createChildStore(i,{table:h().ev,id:t.navigable_block_id})}),[t,i]),B=(0,s().K8)((()=>{if(!I)return;const e=I.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:g().y8.Notification}):void 0}),[I,i,t]),q=(0,R().I)({spaceStore:i,request:x}),T=(0,l().X)("workspace_member_access_notif_polish");return k?(0,re.jsxs)(_e,{header:(0,re.jsx)("span",{children:k}),isFirst:n,isLast:a,isPrivate:!1,rootStore:i,notification:d,icon:(0,re.jsx)(at().H8,{authors:w,size:le,style:{marginTop:0,marginRight:0},iconStyle:{right:-3},showAvatarShadow:!1,showWarningIcon:j}),showSnapshotButton:!1,url:B,...(0,He().$5)({notification:d,activity:t,environment:f,tab:m}),children:[T&&"space_membership_request"===q&&(0,re.jsx)(cr,{rootStore:i,accessRequestModel:x}),M&&(0,re.jsx)("div",{style:S.message,children:(0,re.jsx)(Pe().A,{isMultiline:!0,style:S.messageLabel,children:M})}),K&&(0,re.jsx)("div",{style:S.titleStyle,children:K}),(0,re.jsx)(pr,{activity:t,accessRequestStore:A,rootStore:i,source:p,notification:d,tabArgs:o})]}):null}function cr(e){const{rootStore:t,accessRequestModel:i}=e,o=(0,s().K8)((()=>i.getForActorId()===i.getCreatedById()),[i]),r=(0,s().K8)((()=>i.getForActorPointer(t.id)),[i,t.id]),n=r.table===y().oo?C().LU.createChildStore(t,r):void 0,a=(0,s().K8)((()=>null==n?void 0:n.getModel()),[n]),d=(0,s().K8)((()=>null==a?void 0:a.getEmail()),[a]),l=(0,s().K8)((()=>{if(!o)return d;const e=null==a?void 0:a.getFullName(j().A.getIntl());return e?`${e} (${d})`:d}),[o,a,d]),c=(0,u().IS)((()=>({inviteeBox:{display:"flex",alignItems:"center",marginBottom:8},inviteePhrase:{fontWeight:A().Wy.medium,fontSize:14}})),[]);return(0,re.jsxs)("div",{style:c.inviteeBox,children:[(0,re.jsx)(ct,{profileEmail:l}),(0,re.jsx)("span",{style:c.inviteePhrase,children:l})]})}function ur(e){const{activity:t,accessRequest:i,rootStore:o,tabArgs:r}=e,s=(0,R().I)({spaceStore:o,request:i});if(!s)return null;switch(s){case"guest_invite_request":return(0,re.jsx)(vr,{activity:t,accessRequest:i,rootStore:o});case"space_membership_request":return(0,re.jsx)(gr,{activity:t,accessRequest:i,rootStore:o});case"team_membership_request":return(0,re.jsx)(hr,{activity:t,rootStore:o,tabArgs:r});case"page_access_request":return(0,re.jsx)(mr,{activity:t,tabArgs:r,rootStore:o,accessRequest:i});default:(0,S().HB)(s)}}function mr(e){const{activity:t,rootStore:i,accessRequest:o}=e,r=(0,s().K8)((()=>t.getEdits()),[t]),n=(0,s().K8)((()=>{const e=o.getForActorPointer(i.id),t=e.table===y().oo?C().LU.createChildStore(i,e):void 0,r=null==t?void 0:t.getModel();return null==r?void 0:r.getEmail()}),[o,i]),a=(0,s().K8)((()=>Boolean(o&&(0,_().t)(o,i))),[o,i]),d=(0,s().K8)((()=>(0,c().Ln)({edits:r,rootStore:i})),[r,i]),l=(0,s().K8)((()=>a&&n?(0,c().Jd)(n,(0,k()._m)()):(0,c().bD)(d,(0,k()._m)())),[a,n,d]),u=(0,s().K8)((()=>{if(t.navigable_block_id)return C().Bv.createChildStore(i,{table:h().ev,id:t.navigable_block_id})}),[t,i]),m=(0,s().K8)((()=>o.isEditPageAccessRequest()),[o]);return u?m?(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested edit access to} other {{authorOrAuthors} requested edit access to}}",values:{numberOfAuthors:d.length,authorOrAuthors:l},id:"activity.editAccessRequested.header.short"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested access to} other {{authorOrAuthors} requested access to}}",values:{numberOfAuthors:d.length,authorOrAuthors:l},id:"activity.accessRequested.header.short"}):null}function gr(e){const{activity:t,accessRequest:i,rootStore:o}=e,r=(0,u().IS)((()=>({inviteePhrase:{fontWeight:A().Wy.semibold}})),[]),n=(0,s().K8)((()=>t.getEdits()),[t]),a=(0,s().K8)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=a.table===y().oo?C().LU.createChildStore(o,a):void 0,m=(0,s().K8)((()=>null==d?void 0:d.getModel()),[d]),g=(0,s().K8)((()=>null==m?void 0:m.getEmail()),[m]),v=(0,s().K8)((()=>i.getForActorId()===i.getCreatedById()),[i]),h=(0,s().K8)((()=>(0,c().Ln)({edits:n,rootStore:o})),[n,o]),p=(0,s().K8)((()=>(0,c().bD)(h,(0,k()._m)())),[h]),f=(0,s().K8)((()=>{if(!v)return g;const e=null==m?void 0:m.getFullName(j().A.getIntl());return e?`${e} (${g})`:g}),[v,m,g]),S=(0,l().X)("workspace_member_access_notif_polish");return m&&a.table===y().oo?v?(0,re.jsx)(b().sA,{defaultMessage:"{invitee} requested to become a workspace member",values:{invitee:(0,re.jsx)("span",{style:r.inviteePhrase,children:f})},id:"activity.accessRequestedMembershipFromGuest.header"}):S?(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add a workspace member} other {{authorOrAuthors} requested to add workspace members}}",values:{numberOfAuthors:h.length,authorOrAuthors:p},id:"activity.accessRequestedMembershipNoInvitee.header.short"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add {invitee} as a workspace member} other {{authorOrAuthors} requested to add {invitee} as a workspace member}}",values:{numberOfAuthors:h.length,authorOrAuthors:p,invitee:(0,re.jsx)("span",{style:r.inviteePhrase,children:f})},id:"activity.accessRequestedMembership.header.short"}):null}function vr(e){const{activity:t,accessRequest:i,rootStore:o}=e,r=(0,s().K8)((()=>t.getEdits()),[t]),n=(0,u().IS)((()=>({inviteePhrase:{fontWeight:A().Wy.semibold}})),[]),a=(0,s().K8)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=a.table===y().oo?C().LU.createChildStore(o,a):void 0,l=(0,s().K8)((()=>null==d?void 0:d.getModel()),[d]),m=(0,s().K8)((()=>null==l?void 0:l.getEmail()),[l]),g=(0,s().K8)((()=>(0,c().Ln)({edits:r,rootStore:o})),[r,o]),v=(0,s().K8)((()=>(0,c().bD)(g,{...(0,k()._m)()})),[g]);return(0,s().K8)((()=>i.isGuestInviteRequest()),[i])&&l&&a.table===y().oo?(0,re.jsx)(b().sA,{defaultMessage:"{requestorsPhrase} requested inviting {guestEmail} as a guest",values:{requestorsPhrase:v,guestEmail:(0,re.jsx)("span",{style:n.inviteePhrase,children:m})},id:"activity.guestInviteRequest.header.short"}):null}function hr(e){const{activity:t,rootStore:i,tabArgs:o}=e,r=(0,s().K8)((()=>t.getEdits()),[t]),n=(0,s().K8)((()=>(0,c().Ln)({edits:r,rootStore:i})),[r,i]),a=(0,s().K8)((()=>(0,c().bD)(n,{...(0,k()._m)()})),[n]),d=(0,s().K8)((()=>{if(t.team_id)return C().h4.createChildStore(i,{table:f().yK,id:t.team_id})}),[t,i]);return r&&d?(0,re.jsx)(b().sA,{defaultMessage:"{user} requested to join {teamName}",values:{user:(0,re.jsx)("span",{style:{fontWeight:A().Wy.semibold},children:a}),teamName:(0,re.jsx)(lt().A,{titledRecordStore:d,getRecordModel:i.getRecordModel,activity:t,tabArgs:o})},id:"activity.teamAccessRequest.header.short"}):null}function pr(e){const{activity:t,accessRequestStore:i,rootStore:n,notification:a,tabArgs:d}=e,l=(0,r().v3)(),c=(0,s().K8)((()=>t.getEdits()),[t])[0],g=(0,s().K8)((()=>i.getParentTable()),[i]),v=(0,s().K8)((()=>i.getParentId()),[i]),y=(0,s().K8)((()=>t.navigable_block_id),[t]),b=(0,s().K8)((()=>i.getModel()),[i]),A=(0,s().K8)((()=>b&&(0,m().C)(b)),[b]),_=(0,R().I)({spaceStore:n,request:b}),j=(0,s().K8)((()=>{if("page_access_request"===A){var e;const t=null==b||null===(e=b.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[b,A]),k=(0,o.useCallback)((async()=>{if(A&&_&&b)if("space_membership_request"===_&&"space_membership_request"===A)await x().p4({status:"approved",environment:l,requests:[b],store:n,from:"notification"});else if("space_membership_request"===_&&"guest_invite_request"===A)await x().KB({status:"approved",environment:l,store:n,requests:[b],from:"notification"});else{if("guest_invite_request"!==A)return;await x().aV({status:"approved",environment:l,requests:[b],from:"notification"})}}),[l,b,n,_,A]),M=(0,o.useCallback)((async()=>{if(A&&b)if("space_membership_request"===A)await x().p4({status:"rejected",environment:l,requests:[b],store:n,from:"notification"});else if("guest_invite_request"===A)await x().aV({status:"rejected",environment:l,requests:[b],from:"notification"});else{if("team_membership_request"===A||"page_access_request"===A)return;(0,S().HB)(A)}}),[l,b,n,A]),w=(0,u().IS)((e=>({actionPrimaryContainer:{paddingTop:4,paddingBottom:0,paddingRight:0},actionButton:(0,dt().Ei)(e)})),[]),K=y?C().Bv.createChildStore(n,{table:h().ev,id:y}):void 0,I=(0,s().K8)((()=>g===h().ev&&Boolean(null==K?void 0:K.canAdmin())),[g,K]);if(!(g&&v&&_&&c))return null;if("page_access_request"===_)return I&&K?(0,re.jsx)("div",{style:w.actionPrimaryContainer,children:(0,re.jsx)(Ge,{accessRequestStore:i,targetBlockStore:K,initialRole:j,buttonStyle:w.actionButton,notification:a,rootStore:n,activity:t,tabArgs:d})}):null;if("space_membership_request"===_||"guest_invite_request"===_){const e=C().SL.createChildStore(n,{table:p().NX,id:v});return(0,re.jsx)("div",{style:w.actionPrimaryContainer,children:(0,re.jsx)(Ie,{effectiveAccessRequestType:_,accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:w.actionButton,notification:a,onApprove:k,onReject:M})})}if("team_membership_request"===_){const e=C().h4.createChildStore(n,{table:f().yK,id:v});return(0,re.jsx)("div",{style:w.actionPrimaryContainer,children:(0,re.jsx)(Re,{accessRequestStore:i,teamStore:e})})}(0,S().HB)(_)}const fr=o.memo(lr);function yr(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{notification:d,tab:m,source:p}=o,f=(0,r().v3)(),y=(0,s().K8)((()=>t.getEdits()),[t]),b=y[0],S=(0,u().IS)((()=>({message:{marginBottom:8},messageLabel:{whiteSpace:"pre-wrap"},titleStyle:{fontSize:14,display:"flex"}})),[]),A=(0,s().K8)((()=>C().v3.createChildStore(i,{table:v().O,id:t.access_request_id})),[t,i]),x=(0,s().K8)((()=>A.getModel()),[A]),j=(0,s().K8)((()=>Boolean(x&&(0,_().t)(x,i))),[x,i]),k=x&&(0,re.jsx)(Sr,{activity:t,accessRequest:x,rootStore:i,tabArgs:o}),M=b.message,w=(0,s().K8)((()=>(0,c().Ln)({edits:y,rootStore:i})),[y,i]),K=(0,s().K8)((()=>{if(null!=x&&x.isGuestInviteRequest()){const e=x.getAttributes().permission_records_and_roles[0],r=e&&C().Bv.createChildStore(i,{table:h().ev,id:e.id}),s=e.role;if(r.isDefined())return;return(0,re.jsx)(lt().A,{titledRecordStore:r,activity:t,tabArgs:o,getRecordModel:i.getRecordModel,permissionRole:s,shouldRenderEmpty:!0})}}),[o,x,t,i]),I=(0,s().K8)((()=>{if(t.navigable_block_id)return C().Bv.createChildStore(i,{table:h().ev,id:t.navigable_block_id})}),[t,i]),B=(0,s().K8)((()=>{if(!I)return;const e=I.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:g().y8.Notification}):void 0}),[I,i,t]),q=(0,R().I)({spaceStore:i,request:x}),T=(0,l().X)("workspace_member_access_notif_polish");return k?(0,re.jsxs)(_e,{header:(0,re.jsx)("span",{children:k}),isFirst:n,isLast:a,isPrivate:!1,rootStore:i,notification:d,icon:(0,re.jsx)(at().H8,{authors:w,size:le,style:{marginTop:0,marginRight:0},iconStyle:{right:-3},showAvatarShadow:!1,showWarningIcon:j}),showSnapshotButton:!1,url:B,...(0,He().$5)({notification:d,activity:t,environment:f,tab:m}),children:[T&&"space_membership_request"===q&&(0,re.jsx)(br,{rootStore:i,accessRequestModel:x}),M&&(0,re.jsx)("div",{style:S.message,children:(0,re.jsx)(Pe().A,{isMultiline:!0,style:S.messageLabel,children:M})}),K&&(0,re.jsx)("div",{style:S.titleStyle,children:K}),(0,re.jsx)(Rr,{activity:t,accessRequestStore:A,rootStore:i,source:p,notification:d,tabArgs:o})]}):null}function br(e){const{rootStore:t,accessRequestModel:i}=e,o=(0,s().K8)((()=>i.getForActorId()===i.getCreatedById()),[i]),r=(0,s().K8)((()=>i.getForActorPointer(t.id)),[i,t.id]),n=r.table===y().oo?C().LU.createChildStore(t,r):void 0,a=(0,s().K8)((()=>null==n?void 0:n.getModel()),[n]),d=(0,s().K8)((()=>null==a?void 0:a.getEmail()),[a]),l=(0,s().K8)((()=>{if(!o)return d;const e=null==a?void 0:a.getFullName(j().A.getIntl());return e?`${e} (${d})`:d}),[o,a,d]),c=(0,u().IS)((()=>({inviteeBox:{display:"flex",alignItems:"center",marginBottom:8},inviteePhrase:{fontWeight:A().Wy.medium,fontSize:14}})),[]);return(0,re.jsxs)("div",{style:c.inviteeBox,children:[(0,re.jsx)(ct,{profileEmail:l}),(0,re.jsx)("span",{style:c.inviteePhrase,children:l})]})}function Sr(e){const{activity:t,accessRequest:i,rootStore:o,tabArgs:r}=e,s=(0,R().I)({spaceStore:o,request:i});if(!s)return null;switch(s){case"guest_invite_request":return(0,re.jsx)(_r,{activity:t,accessRequest:i,rootStore:o});case"space_membership_request":return(0,re.jsx)(xr,{activity:t,accessRequest:i,rootStore:o});case"team_membership_request":return(0,re.jsx)(jr,{activity:t,rootStore:o,tabArgs:r});case"page_access_request":return(0,re.jsx)(Ar,{activity:t,tabArgs:r,rootStore:o,accessRequest:i});default:(0,S().HB)(s)}}function Ar(e){const{activity:t,rootStore:i,accessRequest:o}=e,r=(0,s().K8)((()=>t.getEdits()),[t]),n=(0,s().K8)((()=>{const e=o.getForActorPointer(i.id),t=e.table===y().oo?C().LU.createChildStore(i,e):void 0,r=null==t?void 0:t.getModel();return null==r?void 0:r.getEmail()}),[o,i]),a=(0,s().K8)((()=>Boolean(o&&(0,_().t)(o,i))),[o,i]),d=(0,s().K8)((()=>(0,c().Ln)({edits:r,rootStore:i})),[r,i]),l=(0,s().K8)((()=>a&&n?(0,c().Jd)(n,(0,k()._m)()):(0,c().bD)(d,(0,k()._m)())),[a,n,d]),u=(0,s().K8)((()=>{if(t.navigable_block_id)return C().Bv.createChildStore(i,{table:h().ev,id:t.navigable_block_id})}),[t,i]),m=(0,s().K8)((()=>o.isEditPageAccessRequest()),[o]);return u?m?(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested edit access to} other {{authorOrAuthors} requested edit access to}}",values:{numberOfAuthors:d.length,authorOrAuthors:l},id:"activity.editAccessRequested.header.short"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested access to} other {{authorOrAuthors} requested access to}}",values:{numberOfAuthors:d.length,authorOrAuthors:l},id:"activity.accessRequested.header.short"}):null}function xr(e){const{activity:t,accessRequest:i,rootStore:o}=e,r=(0,u().IS)((()=>({inviteePhrase:{fontWeight:A().Wy.semibold}})),[]),n=(0,s().K8)((()=>t.getEdits()),[t]),a=(0,s().K8)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=a.table===y().oo?C().LU.createChildStore(o,a):void 0,m=(0,s().K8)((()=>null==d?void 0:d.getModel()),[d]),g=(0,s().K8)((()=>null==m?void 0:m.getEmail()),[m]),v=(0,s().K8)((()=>i.getForActorId()===i.getCreatedById()),[i]),h=(0,s().K8)((()=>(0,c().Ln)({edits:n,rootStore:o})),[n,o]),p=(0,s().K8)((()=>(0,c().bD)(h,(0,k()._m)())),[h]),f=(0,s().K8)((()=>{if(!v)return g;const e=null==m?void 0:m.getFullName(j().A.getIntl());return e?`${e} (${g})`:g}),[v,m,g]),S=(0,l().X)("workspace_member_access_notif_polish");return m&&a.table===y().oo?v?(0,re.jsx)(b().sA,{defaultMessage:"{invitee} requested to become a workspace member",values:{invitee:(0,re.jsx)("span",{style:r.inviteePhrase,children:f})},id:"activity.accessRequestedMembershipFromGuest.header"}):S?(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add a workspace member} other {{authorOrAuthors} requested to add workspace members}}",values:{numberOfAuthors:h.length,authorOrAuthors:p},id:"activity.accessRequestedMembershipNoInvitee.header.short"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add {invitee} as a workspace member} other {{authorOrAuthors} requested to add {invitee} as a workspace member}}",values:{numberOfAuthors:h.length,authorOrAuthors:p,invitee:(0,re.jsx)("span",{style:r.inviteePhrase,children:f})},id:"activity.accessRequestedMembership.header.short"}):null}function _r(e){const{activity:t,accessRequest:i,rootStore:o}=e,r=(0,s().K8)((()=>t.getEdits()),[t]),n=(0,u().IS)((()=>({inviteePhrase:{fontWeight:A().Wy.semibold}})),[]),a=(0,s().K8)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=a.table===y().oo?C().LU.createChildStore(o,a):void 0,l=(0,s().K8)((()=>null==d?void 0:d.getModel()),[d]),m=(0,s().K8)((()=>null==l?void 0:l.getEmail()),[l]),g=(0,s().K8)((()=>(0,c().Ln)({edits:r,rootStore:o})),[r,o]),v=(0,s().K8)((()=>(0,c().bD)(g,{...(0,k()._m)()})),[g]);return(0,s().K8)((()=>i.isGuestInviteRequest()),[i])&&l&&a.table===y().oo?(0,re.jsx)(b().sA,{defaultMessage:"{requestorsPhrase} requested inviting {guestEmail} as a guest",values:{requestorsPhrase:v,guestEmail:(0,re.jsx)("span",{style:n.inviteePhrase,children:m})},id:"activity.guestInviteRequest.header.short"}):null}function jr(e){const{activity:t,rootStore:i,tabArgs:o}=e,r=(0,s().K8)((()=>t.getEdits()),[t]),n=(0,s().K8)((()=>(0,c().Ln)({edits:r,rootStore:i})),[r,i]),a=(0,s().K8)((()=>(0,c().bD)(n,{...(0,k()._m)()})),[n]),d=(0,s().K8)((()=>{if(t.team_id)return C().h4.createChildStore(i,{table:f().yK,id:t.team_id})}),[t,i]);return r&&d?(0,re.jsx)(b().sA,{defaultMessage:"{user} requested to join {teamName}",values:{user:(0,re.jsx)("span",{style:{fontWeight:A().Wy.semibold},children:a}),teamName:(0,re.jsx)(lt().A,{titledRecordStore:d,getRecordModel:i.getRecordModel,activity:t,tabArgs:o})},id:"activity.teamAccessRequest.header.short"}):null}function Rr(e){const{activity:t,accessRequestStore:i,rootStore:n,notification:a,tabArgs:d}=e,l=(0,r().v3)(),c=(0,s().K8)((()=>t.getEdits()),[t])[0],g=(0,s().K8)((()=>i.getParentTable()),[i]),v=(0,s().K8)((()=>i.getParentId()),[i]),y=(0,s().K8)((()=>t.navigable_block_id),[t]),b=(0,s().K8)((()=>i.getModel()),[i]),A=(0,s().K8)((()=>b&&(0,m().C)(b)),[b]),_=(0,R().I)({spaceStore:n,request:b}),j=(0,s().K8)((()=>{if("page_access_request"===A){var e;const t=null==b||null===(e=b.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[b,A]),k=(0,o.useCallback)((async()=>{if(A&&_&&b)if("space_membership_request"===_&&"space_membership_request"===A)await x().p4({status:"approved",environment:l,requests:[b],store:n,from:"notification"});else if("space_membership_request"===_&&"guest_invite_request"===A)await x().KB({status:"approved",environment:l,store:n,requests:[b],from:"notification"});else{if("guest_invite_request"!==A)return;await x().aV({status:"approved",environment:l,requests:[b],from:"notification"})}}),[l,b,n,_,A]),M=(0,o.useCallback)((async()=>{if(A&&b)if("space_membership_request"===A)await x().p4({status:"rejected",environment:l,requests:[b],store:n,from:"notification"});else if("guest_invite_request"===A)await x().aV({status:"rejected",environment:l,requests:[b],from:"notification"});else{if("team_membership_request"===A||"page_access_request"===A)return;(0,S().HB)(A)}}),[l,b,n,A]),w=(0,u().IS)((e=>({actionPrimaryContainer:{paddingTop:4,paddingBottom:0,paddingRight:0},actionButton:(0,dt().Ei)(e)})),[]),K=y?C().Bv.createChildStore(n,{table:h().ev,id:y}):void 0,I=(0,s().K8)((()=>g===h().ev&&Boolean(null==K?void 0:K.canAdmin())),[g,K]);if(!(g&&v&&_&&c))return null;if("page_access_request"===_)return I&&K?(0,re.jsx)("div",{style:w.actionPrimaryContainer,children:(0,re.jsx)(Ge,{accessRequestStore:i,targetBlockStore:K,initialRole:j,buttonStyle:w.actionButton,notification:a,rootStore:n,activity:t,tabArgs:d})}):null;if("space_membership_request"===_||"guest_invite_request"===_){const e=C().SL.createChildStore(n,{table:p().NX,id:v});return(0,re.jsx)("div",{style:w.actionPrimaryContainer,children:(0,re.jsx)(Ie,{effectiveAccessRequestType:_,accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:w.actionButton,notification:a,onApprove:k,onReject:M})})}if("team_membership_request"===_){const e=C().h4.createChildStore(n,{table:f().yK,id:v});return(0,re.jsx)("div",{style:w.actionPrimaryContainer,children:(0,re.jsx)(Re,{accessRequestStore:i,teamStore:e})})}(0,S().HB)(_)}const kr=o.memo(yr);function Cr(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{notification:d,tab:m,source:p}=o,f=(0,r().v3)(),y=(0,s().K8)((()=>t.getEdits()),[t]),b=y[0],S=(0,u().IS)((()=>({message:{marginBottom:8},messageLabel:{whiteSpace:"pre-wrap"},titleStyle:{fontSize:14,display:"flex"}})),[]),A=(0,s().K8)((()=>C().v3.createChildStore(i,{table:v().O,id:t.access_request_id})),[t,i]),x=(0,s().K8)((()=>A.getModel()),[A]),j=(0,s().K8)((()=>Boolean(x&&(0,_().t)(x,i))),[x,i]),k=x&&(0,re.jsx)(wr,{activity:t,accessRequest:x,rootStore:i,tabArgs:o}),M=b.message,w=(0,s().K8)((()=>(0,c().Ln)({edits:y,rootStore:i})),[y,i]),K=(0,s().K8)((()=>{if(null!=x&&x.isGuestInviteRequest()){const e=x.getAttributes().permission_records_and_roles[0],r=e&&C().Bv.createChildStore(i,{table:h().ev,id:e.id}),s=e.role;if(r.isDefined())return;return(0,re.jsx)(lt().A,{titledRecordStore:r,activity:t,tabArgs:o,getRecordModel:i.getRecordModel,permissionRole:s,shouldRenderEmpty:!0})}}),[o,x,t,i]),I=(0,s().K8)((()=>{if(t.navigable_block_id)return C().Bv.createChildStore(i,{table:h().ev,id:t.navigable_block_id})}),[t,i]),B=(0,s().K8)((()=>{if(!I)return;const e=I.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:g().y8.Notification}):void 0}),[I,i,t]),q=(0,R().I)({spaceStore:i,request:x}),T=(0,l().X)("workspace_member_access_notif_polish");return k?(0,re.jsxs)(_e,{header:(0,re.jsx)("span",{children:k}),isFirst:n,isLast:a,isPrivate:!1,rootStore:i,notification:d,icon:(0,re.jsx)(at().H8,{authors:w,size:le,style:{marginTop:0,marginRight:0},iconStyle:{right:-3},showAvatarShadow:!1,showWarningIcon:j}),showSnapshotButton:!1,url:B,...(0,He().$5)({notification:d,activity:t,environment:f,tab:m}),children:[T&&"space_membership_request"===q&&(0,re.jsx)(Mr,{rootStore:i,accessRequestModel:x}),M&&(0,re.jsx)("div",{style:S.message,children:(0,re.jsx)(Pe().A,{isMultiline:!0,style:S.messageLabel,children:M})}),K&&(0,re.jsx)("div",{style:S.titleStyle,children:K}),(0,re.jsx)(Tr,{activity:t,accessRequestStore:A,rootStore:i,source:p,notification:d,tabArgs:o})]}):null}function Mr(e){const{rootStore:t,accessRequestModel:i}=e,o=(0,s().K8)((()=>i.getForActorId()===i.getCreatedById()),[i]),r=(0,s().K8)((()=>i.getForActorPointer(t.id)),[i,t.id]),n=r.table===y().oo?C().LU.createChildStore(t,r):void 0,a=(0,s().K8)((()=>null==n?void 0:n.getModel()),[n]),d=(0,s().K8)((()=>null==a?void 0:a.getEmail()),[a]),l=(0,s().K8)((()=>{if(!o)return d;const e=null==a?void 0:a.getFullName(j().A.getIntl());return e?`${e} (${d})`:d}),[o,a,d]),c=(0,u().IS)((()=>({inviteeBox:{display:"flex",alignItems:"center",marginBottom:8},inviteePhrase:{fontWeight:A().Wy.medium,fontSize:14}})),[]);return(0,re.jsxs)("div",{style:c.inviteeBox,children:[(0,re.jsx)(ct,{profileEmail:l}),(0,re.jsx)("span",{style:c.inviteePhrase,children:l})]})}function wr(e){const{activity:t,accessRequest:i,rootStore:o,tabArgs:r}=e,s=(0,R().I)({spaceStore:o,request:i});if(!s)return null;switch(s){case"guest_invite_request":return(0,re.jsx)(Br,{activity:t,accessRequest:i,rootStore:o});case"space_membership_request":return(0,re.jsx)(Ir,{activity:t,accessRequest:i,rootStore:o});case"team_membership_request":return(0,re.jsx)(qr,{activity:t,rootStore:o,tabArgs:r});case"page_access_request":return(0,re.jsx)(Kr,{activity:t,tabArgs:r,rootStore:o,accessRequest:i});default:(0,S().HB)(s)}}function Kr(e){const{activity:t,rootStore:i,accessRequest:o}=e,r=(0,s().K8)((()=>t.getEdits()),[t]),n=(0,s().K8)((()=>{const e=o.getForActorPointer(i.id),t=e.table===y().oo?C().LU.createChildStore(i,e):void 0,r=null==t?void 0:t.getModel();return null==r?void 0:r.getEmail()}),[o,i]),a=(0,s().K8)((()=>Boolean(o&&(0,_().t)(o,i))),[o,i]),d=(0,s().K8)((()=>(0,c().Ln)({edits:r,rootStore:i})),[r,i]),l=(0,s().K8)((()=>a&&n?(0,c().Jd)(n,(0,k()._m)()):(0,c().bD)(d,(0,k()._m)())),[a,n,d]),u=(0,s().K8)((()=>{if(t.navigable_block_id)return C().Bv.createChildStore(i,{table:h().ev,id:t.navigable_block_id})}),[t,i]),m=(0,s().K8)((()=>o.isEditPageAccessRequest()),[o]);return u?m?(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested edit access to} other {{authorOrAuthors} requested edit access to}}",values:{numberOfAuthors:d.length,authorOrAuthors:l},id:"activity.editAccessRequested.header.short"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested access to} other {{authorOrAuthors} requested access to}}",values:{numberOfAuthors:d.length,authorOrAuthors:l},id:"activity.accessRequested.header.short"}):null}function Ir(e){const{activity:t,accessRequest:i,rootStore:o}=e,r=(0,u().IS)((()=>({inviteePhrase:{fontWeight:A().Wy.semibold}})),[]),n=(0,s().K8)((()=>t.getEdits()),[t]),a=(0,s().K8)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=a.table===y().oo?C().LU.createChildStore(o,a):void 0,m=(0,s().K8)((()=>null==d?void 0:d.getModel()),[d]),g=(0,s().K8)((()=>null==m?void 0:m.getEmail()),[m]),v=(0,s().K8)((()=>i.getForActorId()===i.getCreatedById()),[i]),h=(0,s().K8)((()=>(0,c().Ln)({edits:n,rootStore:o})),[n,o]),p=(0,s().K8)((()=>(0,c().bD)(h,(0,k()._m)())),[h]),f=(0,s().K8)((()=>{if(!v)return g;const e=null==m?void 0:m.getFullName(j().A.getIntl());return e?`${e} (${g})`:g}),[v,m,g]),S=(0,l().X)("workspace_member_access_notif_polish");return m&&a.table===y().oo?v?(0,re.jsx)(b().sA,{defaultMessage:"{invitee} requested to become a workspace member",values:{invitee:(0,re.jsx)("span",{style:r.inviteePhrase,children:f})},id:"activity.accessRequestedMembershipFromGuest.header"}):S?(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add a workspace member} other {{authorOrAuthors} requested to add workspace members}}",values:{numberOfAuthors:h.length,authorOrAuthors:p},id:"activity.accessRequestedMembershipNoInvitee.header.short"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add {invitee} as a workspace member} other {{authorOrAuthors} requested to add {invitee} as a workspace member}}",values:{numberOfAuthors:h.length,authorOrAuthors:p,invitee:(0,re.jsx)("span",{style:r.inviteePhrase,children:f})},id:"activity.accessRequestedMembership.header.short"}):null}function Br(e){const{activity:t,accessRequest:i,rootStore:o}=e,r=(0,s().K8)((()=>t.getEdits()),[t]),n=(0,u().IS)((()=>({inviteePhrase:{fontWeight:A().Wy.semibold}})),[]),a=(0,s().K8)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=a.table===y().oo?C().LU.createChildStore(o,a):void 0,l=(0,s().K8)((()=>null==d?void 0:d.getModel()),[d]),m=(0,s().K8)((()=>null==l?void 0:l.getEmail()),[l]),g=(0,s().K8)((()=>(0,c().Ln)({edits:r,rootStore:o})),[r,o]),v=(0,s().K8)((()=>(0,c().bD)(g,{...(0,k()._m)()})),[g]);return(0,s().K8)((()=>i.isGuestInviteRequest()),[i])&&l&&a.table===y().oo?(0,re.jsx)(b().sA,{defaultMessage:"{requestorsPhrase} requested inviting {guestEmail} as a guest",values:{requestorsPhrase:v,guestEmail:(0,re.jsx)("span",{style:n.inviteePhrase,children:m})},id:"activity.guestInviteRequest.header.short"}):null}function qr(e){const{activity:t,rootStore:i,tabArgs:o}=e,r=(0,s().K8)((()=>t.getEdits()),[t]),n=(0,s().K8)((()=>(0,c().Ln)({edits:r,rootStore:i})),[r,i]),a=(0,s().K8)((()=>(0,c().bD)(n,{...(0,k()._m)()})),[n]),d=(0,s().K8)((()=>{if(t.team_id)return C().h4.createChildStore(i,{table:f().yK,id:t.team_id})}),[t,i]);return r&&d?(0,re.jsx)(b().sA,{defaultMessage:"{user} requested to join {teamName}",values:{user:(0,re.jsx)("span",{style:{fontWeight:A().Wy.semibold},children:a}),teamName:(0,re.jsx)(lt().A,{titledRecordStore:d,getRecordModel:i.getRecordModel,activity:t,tabArgs:o})},id:"activity.teamAccessRequest.header.short"}):null}function Tr(e){const{activity:t,accessRequestStore:i,rootStore:n,notification:a,tabArgs:d}=e,l=(0,r().v3)(),c=(0,s().K8)((()=>t.getEdits()),[t])[0],g=(0,s().K8)((()=>i.getParentTable()),[i]),v=(0,s().K8)((()=>i.getParentId()),[i]),y=(0,s().K8)((()=>t.navigable_block_id),[t]),b=(0,s().K8)((()=>i.getModel()),[i]),A=(0,s().K8)((()=>b&&(0,m().C)(b)),[b]),_=(0,R().I)({spaceStore:n,request:b}),j=(0,s().K8)((()=>{if("page_access_request"===A){var e;const t=null==b||null===(e=b.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[b,A]),k=(0,o.useCallback)((async()=>{if(A&&_&&b)if("space_membership_request"===_&&"space_membership_request"===A)await x().p4({status:"approved",environment:l,requests:[b],store:n,from:"notification"});else if("space_membership_request"===_&&"guest_invite_request"===A)await x().KB({status:"approved",environment:l,store:n,requests:[b],from:"notification"});else{if("guest_invite_request"!==A)return;await x().aV({status:"approved",environment:l,requests:[b],from:"notification"})}}),[l,b,n,_,A]),M=(0,o.useCallback)((async()=>{if(A&&b)if("space_membership_request"===A)await x().p4({status:"rejected",environment:l,requests:[b],store:n,from:"notification"});else if("guest_invite_request"===A)await x().aV({status:"rejected",environment:l,requests:[b],from:"notification"});else{if("team_membership_request"===A||"page_access_request"===A)return;(0,S().HB)(A)}}),[l,b,n,A]),w=(0,u().IS)((e=>({actionPrimaryContainer:{paddingTop:4,paddingBottom:0,paddingRight:0},actionButton:(0,dt().Ei)(e)})),[]),K=y?C().Bv.createChildStore(n,{table:h().ev,id:y}):void 0,I=(0,s().K8)((()=>g===h().ev&&Boolean(null==K?void 0:K.canAdmin())),[g,K]);if(!(g&&v&&_&&c))return null;if("page_access_request"===_)return I&&K?(0,re.jsx)("div",{style:w.actionPrimaryContainer,children:(0,re.jsx)(Ge,{accessRequestStore:i,targetBlockStore:K,initialRole:j,buttonStyle:w.actionButton,notification:a,rootStore:n,activity:t,tabArgs:d})}):null;if("space_membership_request"===_||"guest_invite_request"===_){const e=C().SL.createChildStore(n,{table:p().NX,id:v});return(0,re.jsx)("div",{style:w.actionPrimaryContainer,children:(0,re.jsx)(Ie,{effectiveAccessRequestType:_,accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:w.actionButton,notification:a,onApprove:k,onReject:M})})}if("team_membership_request"===_){const e=C().h4.createChildStore(n,{table:f().yK,id:v});return(0,re.jsx)("div",{style:w.actionPrimaryContainer,children:(0,re.jsx)(Re,{accessRequestStore:i,teamStore:e})})}(0,S().HB)(_)}const Pr=o.memo(Cr);function Lr(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:n}=e,a=(0,s().K8)((()=>C().v3.createChildStore(i,{table:v().O,id:t.access_request_id})),[t,i]),d=(0,s().K8)((()=>a.getModel()),[a]),l=(0,R().I)({spaceStore:i,request:d});switch(l){case"guest_invite_request":return(0,re.jsx)(dr,{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:n});case"space_membership_request":return(0,re.jsx)(kr,{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:n});case"team_membership_request":return(0,re.jsx)(Pr,{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:n});case"page_access_request":return(0,re.jsx)(fr,{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:n});case void 0:return null;default:(0,S().HB)(l)}}const Nr=o.memo(Lr);function Or(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),m=(0,s().K8)((()=>t.getEdits()),[t]),p=(0,s().K8)((()=>C().v3.createChildStore(i,{table:v().O,id:t.access_request_id})),[t,i]),f=(0,s().K8)((()=>{const e=p.getModel();return e&&e.isGuestInviteRequest()&&e.isResolved()||e&&e.isEditPageAccessRequest()&&e.isApproved()?e:void 0}),[p]),y=(0,s().K8)((()=>Boolean(null==f?void 0:f.isEditPageAccessRequest())),[f]),b=(0,s().K8)((()=>(0,c().Ln)({edits:m,rootStore:i})),[m,i]),S=(0,s().K8)((()=>{if(t.navigable_block_id)return C().Bv.createChildStore(i,{table:h().ev,id:t.navigable_block_id})}),[t,i]),A=f&&(0,re.jsx)(Er,{activity:t,accessRequest:f,rootStore:i,isEditAccessRequest:y}),x=(0,s().K8)((()=>{if(!S)return;const e=S.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:g().y8.Notification}):void 0}),[S,i,t]);return A&&S?(0,re.jsx)(_e,{header:(0,re.jsx)("span",{children:A}),isFirst:n,isLast:a,isPrivate:!1,rootStore:i,notification:d,icon:(0,re.jsx)(at().H8,{authors:b,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:x,...(0,He().$5)({notification:d,activity:t,environment:u,tab:l})}):null}function Er(e){const{accessRequest:t,rootStore:i,isEditAccessRequest:o}=e,r=(0,u().IS)((()=>({inviteePhrase:{fontWeight:A().Wy.medium}})),[]),n=(0,s().K8)((()=>i.getRecordModel({id:t.getForActorId(),table:t.getForActorTable()})),[t,i]),a=(0,s().K8)((()=>null==n?void 0:n.getEmail()),[n]),d=(0,s().K8)((()=>{const e=(null==n?void 0:n.isUser())&&(null==n?void 0:n.getFullName(j().A.getIntl()));return e?`${e} (${a})`:a}),[n,a]),l=(0,s().K8)((()=>i.getRecordModel({id:t.getResolvedById(),table:t.getResolvedByTable()})),[t,i]),m=(0,s().K8)((()=>l&&(0,c().bD)([l],{fontWeight:A().Wy.medium})),[l]),g=(0,s().K8)((()=>t.getStatus()),[t]);return m&&d?o?(0,re.jsx)(b().sA,{defaultMessage:"{resolverPhrase} approved your request to edit the page",values:{resolverPhrase:m},id:"activity.EditAccessRequestResolvedMembership.approved.header.short"}):"approved"===g?(0,re.jsx)(b().sA,{defaultMessage:"{resolverPhrase} approved your request to invite {invitee} as a guest",values:{resolverPhrase:m,invitee:(0,re.jsx)("span",{style:r.inviteePhrase,children:d})},id:"activity.AccessRequestResolvedMembership.approved.header.short"}):"rejected"===g?(0,re.jsx)(b().sA,{defaultMessage:"{resolverPhrase} denied your request to invite {invitee} as a guest",values:{resolverPhrase:m,invitee:(0,re.jsx)("span",{style:r.inviteePhrase,children:d})},id:"activity.AccessRequestResolvedMembership.rejected.header.short"}):void(0,S().HB)(g):null}const Ur=o.memo(Or);function Dr(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{tab:d,notification:l}=o,u=(0,s().K8)((()=>(0,Ht().W9)(t.getEdits())),[t]),m=u.length>0,v=(0,s().K8)((()=>C().Bv.createChildStore(i,{table:h().ev,id:u[0].navigable_block_id})),[i,u]),p=(0,s().K8)((()=>{const e=v.getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[v,i]),f=(0,s().K8)((()=>(0,c().Ln)({edits:u,rootStore:i})),[u,i]),y=(0,r().v3)(),S=(0,s().K8)((()=>(0,c().bD)(f,{...(0,k()._m)()})),[f]),A=(0,s().K8)((()=>(0,c().DU)({recordId:v.id,recordType:"block",tab:d,rootStore:i,environment:y})),[v,d,i,y]);if(!(0,s().K8)((()=>v.isDefined()),[v])||!m)return null;const x=new Set;return u.forEach((e=>{Object.keys(e.property_updates).forEach((e=>{x.add(e)}))})),(0,re.jsx)(_e,{header:x.size>1?(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated properties} other {{authorOrAuthors} updated properties}}",id:"activity.blockEdited.standardizedHeader.multiple",values:{numberOfAuthors:f.length,authorOrAuthors:S}})}):(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated a property} other {{authorOrAuthors} updated a property}}",id:"activity.blockEdited.standardizedHeader.single",values:{numberOfAuthors:f.length,authorOrAuthors:S}})}),isFirst:n,isLast:a,isPrivate:A,rootStore:i,navigableBlockId:v.id,notification:l,icon:(0,re.jsx)(at().H8,{authors:f,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:p,...(0,He().$5)({notification:l,activity:t,environment:y,tab:d}),children:(0,re.jsx)($t().A,{visible:5,items:u.map(((e,t)=>(0,re.jsx)(Vt().A,{edit:e,rootStore:i},t)))})})}const zr=o.memo(Dr);i(944114);var Fr=()=>i(144986);const Wr=o.createContext((()=>{}));function Hr(e){const{disabled:t=!1,children:i}=e,r=(0,o.useContext)(Wr),s=(0,o.useCallback)((()=>{t||r(!0)}),[r,t]),n=(0,o.useCallback)((()=>{t||r(!1)}),[r,t]);return(0,re.jsx)("div",{style:{display:"contents"},onMouseEnter:s,onMouseLeave:n,children:i})}Wr.displayName="NestedNotificationButtonContext";const Vr=0,$r=8;function Gr(e){const{notification:t,children:i,header:n,subheader:a,body:d,rootStore:l,count:c,onArchiveClicked:m,onUnarchiveClicked:g,onMarkAsReadClicked:v,onMarkAsUnreadClicked:p,onNotificationBodyClicked:f,url:y,isFirst:b,isLast:S}=e,x=(0,r().v3)(),_=(0,r().Y0)(),j=parseInt(t.end_time),R=(0,s().K8)((()=>{const e=t.navigable_block_id;if(e)return C().sk.createChildStore(l,{table:h().ev,id:e,spaceId:l.id})}),[l,t.navigable_block_id]),k=(0,s().K8)((()=>R||e.notificationTitleStore),[R,e.notificationTitleStore]),M=(0,s().K8)((()=>V().default.isPeekDismissableState()),[]),[w,K]=(0,o.useState)(!1),[I,B]=(0,o.useState)(!1),T=(0,o.useRef)(null),L=(0,D().A)({onLongPress:()=>{var e;return null===(e=T.current)||void 0===e?void 0:e.setOpen(!0)}}),[N,E]=(0,o.useState)(!1),U=w&&!I&&!N,F=(0,s().K8)((()=>"mentions"===G().Ay.state.currentTab),[]),$=!t||t.read,J=_.isMobile,Q=(0,s().K8)((()=>{const e=x.WindowSizeStore.state;return{left:e.paddingLeftCSS,right:e.paddingRightCSS}}),[x.WindowSizeStore]),Z=(0,u().IS)((e=>({article:{display:"flex",flexDirection:"column"},mainClickTargetButton:{display:"flex",flexDirection:"column",gap:4,paddingTop:14-Vr,paddingBottom:14-Vr,paddingLeft:J?Q.left:0,paddingRight:J?Q.right:0,marginTop:b?0:Vr,marginBottom:S?0:Vr,marginLeft:Vr,marginRight:Vr,transition:"background 150ms ease"},mainClickTargetButtonHovered:{background:e.state.hover},header:{display:"flex",paddingLeft:16-Vr,paddingRight:20-Vr,maxWidth:"100%"},avatarAndStatusDot:{display:"flex",gap:8,alignItems:"center",height:24},statusDotSpacer:{width:$r,flexShrink:0},privatePageBadge:{marginTop:1,marginBottom:4,marginLeft:8},subheaderAndBody:{display:"flex",flexDirection:"column"},subheader:{paddingLeft:40-Vr,paddingRight:20-Vr,fontSize:14,fontWeight:A().Wy.regular,color:e.text.primary,...A().RC},body:{paddingLeft:40-Vr,paddingRight:20-Vr,fontSize:14,color:e.text.secondary,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden"},children:{paddingTop:8,paddingLeft:40-Vr,paddingRight:20-Vr},divider:{height:1,backgroundColor:e.stroke.secondary},buttonPressed:{backgroundColor:w&&I?e.buttonBackground:e.state.pressed}})),[J,Q.left,Q.right,b,S,w,I]),ee=(0,o.useCallback)((e=>{t&&(N||(!y&&t.read||f(),(0,O().SQ)({event:e,context:O().y$.NotificationClick,callback:()=>{!M||e.metaKey||e.ctrlKey||H().VI({environment:x}),t.read||P().createAndCommit({userAction:"ActivityNotificationSection.handleMarkAsRead",environment:x,canUndo:!0,perform:e=>{q().ZB({notification:t,rootStore:l,transaction:e,read:!0})}})}})))}),[x,N,t,f,M,l,y]),te=(0,o.useCallback)((e=>{t&&(0,O().SQ)({event:e,context:O().y$.NotificationClick,callback:()=>{t.read?p():v(),P().createAndCommit({userAction:"InboxActionsMenu.toggleNotificationReadStatus",environment:x,canUndo:!0,perform:e=>{q().ZB({notification:t,rootStore:l,transaction:e,read:!t.read})}})}})}),[x,t,v,p,l]),ie=(0,o.useCallback)((e=>{t&&(0,O().SQ)({event:e,context:O().y$.NotificationClick,callback:()=>{m(),P().createAndCommit({userAction:"InboxActionsMenu.handleArchive",environment:x,canUndo:!0,perform:e=>{q().s4({notification:t,rootStore:l,transaction:e})}})}})}),[x,t,m,l]),oe=(0,o.useCallback)((e=>{t&&(0,O().SQ)({event:e,context:O().y$.NotificationClick,callback:()=>{g(),P().createAndCommit({userAction:"Activity.handleUnarchive",environment:x,canUndo:!0,perform:e=>{q().JV({notificationId:t.id,visited:!1,rootStore:l,transaction:e})}})}})}),[x,t,g,l]),se=(0,o.useCallback)((()=>K(!0)),[]),ne=(0,o.useCallback)((()=>K(!1)),[]),ae=(0,o.useId)(),de=(0,z().T4)();return(0,re.jsx)(X().Ay,{ref:T,disabled:!_.isMobile,style:de.popup,popupType:_.isTablet?X().z7.Popup:X().z7.BottomSheet,render:e=>(0,re.jsx)(W().Lk,{blockStore:R,notification:t,handlers:{handleUnarchive:oe,handleArchive:ie,toggleNotificationReadStatus:te},closePopup:()=>e.close()}),renderOrigin:()=>(0,re.jsx)("div",{..._.isMobile&&L,children:(0,re.jsx)("article",{style:Z.article,onMouseOver:se,onMouseLeave:ne,children:(0,re.jsxs)(Wr.Provider,{value:B,children:[(0,re.jsx)(Qr,{notification:t,rootStore:l,isMobile:J,isHovered:w,isFirst:b,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),onArchiveClicked:m,onUnarchiveClicked:g,onMarkAsReadClicked:v,onMarkAsUnreadClicked:p}),(0,re.jsxs)(Y().A,{href:y,hovered:U,ignoreLocalHoverState:!0,style:Z.mainClickTargetButton,onClick:ee,hoveredStyle:Z.mainClickTargetButtonHovered,disabled:!Boolean(y),pressedStyle:Z.buttonPressed,"aria-labelledby":ae,children:[(0,re.jsx)("div",{style:Z.header,children:n?(0,re.jsx)(is,{icon:n.icon,header:n.title,timestamp:j,titleAriaId:ae,showBlueDot:F&&!$,count:c}):(0,re.jsx)(is,{notificationTitleStore:k,timestamp:j,titleAriaId:ae,showBlueDot:F&&!$,count:c})}),(0,re.jsxs)("div",{style:Z.subheaderAndBody,children:[a&&(0,re.jsx)("div",{style:Z.subheader,children:a}),d&&(0,re.jsx)("div",{style:Z.body,children:d}),i&&(0,re.jsx)("div",{style:Z.children,children:i})]})]}),!S&&(0,re.jsx)("div",{style:Z.divider})]})})})},t.id)}const Yr=12-Vr,Xr=12-Vr,Jr="100ms ease-out";function Qr(e){const{notification:t,rootStore:i,isMobile:o,isHovered:r,isFirst:s,onArchiveClicked:n,onUnarchiveClicked:a,onMarkAsReadClicked:d,onMarkAsUnreadClicked:l,onMouseEnter:c,onMouseLeave:m}=e,g=(0,u().IS)((()=>({container:{display:"flex",alignItems:"flex-start",position:"relative",zIndex:1},body:{transition:`opacity ${Jr}`,opacity:o||r?1:0,position:"absolute",right:Yr,top:Xr+(o?-3:0)+(s?0:Vr)}})),[o,r,s]);return t?(0,re.jsx)("div",{style:g.container,onMouseEnter:c,onMouseLeave:m,children:(0,re.jsx)("div",{style:g.body,children:(0,re.jsx)(F().hR,{notification:t,rootStore:i,onArchiveClicked:n,onUnarchiveClicked:a,onMarkAsReadClicked:d,onMarkAsUnreadClicked:l})})}):null}const Zr=14,es=12,ts=8;function is(e){const{notificationTitleStore:t,icon:i,header:n,timestamp:a,showBlueDot:d,count:l}=e,c=(0,r().Y0)(),m=(0,b().tz)(),g=c.isMobile,[v,h]=(0,o.useState)(!1),[p,f]=(0,o.useState)(!1),y=(0,U().nl)(a,{useUltraCompactFormat:!0}),S=(0,U().x$)(a),x=(0,s().K8)((()=>{if(t instanceof C().Bv)return t}),[t]),{actorStore:_,actorName:j}=(0,s().K8)((()=>{if(t instanceof C().LU||t instanceof C().vK||t instanceof C().pH){return t?{actorStore:t,actorName:t.getDisplayName(m)}:{actorStore:void 0,actorName:void 0}}return{actorStore:void 0,actorName:void 0}}),[t,m]),R=(0,s().K8)((()=>{if(!(t instanceof C().pS||t instanceof C().LU||t instanceof C().vK||t instanceof C().pH))return t}),[t]),k=(0,s().K8)((()=>{var e;if(R)return null===(e=R.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:R.getRecordModel})}),[R]),M=(0,s().K8)((()=>!!x&&x.isEmptyPage()),[x]),w=(0,s().K8)((()=>null==x?void 0:x.isDefined()),[x]),I=(0,o.useCallback)((()=>{h(!0),f(!1)}),[]),q=B().nF((()=>{f(!0)}),200,{leading:!0}),T=(0,o.useCallback)((()=>{h(!1),f(!1),N().Ol(window,"scroll",q,!0)}),[q]),P=(0,o.useCallback)((e=>(0,re.jsx)(te().yf,{store:x,events:e})),[x]);(0,o.useEffect)((()=>(N().P4(window,"scroll",q,!0),()=>N().Ol(window,"scroll",q,!0))),[q]);const O=(0,u().IS)((e=>({container:{display:"flex",flexDirection:"row",minWidth:0,width:"100%",marginTop:2},iconHeaderOverride:{display:"flex",flexDirection:"row",gap:8,alignItems:"center"},headerMobile:{fontSize:Zr,minWidth:0},header:{display:"inline-grid",gridAutoFlow:"column",justifyContent:"space-between",fontSize:Zr,minWidth:0},headlineMobile:{paddingTop:2,display:"inline",whiteSpace:"pre-wrap",wordBreak:"break-word"},headline:{flexShrink:2,whiteSpace:"pre-wrap",wordBreak:"break-word"},time:{display:"flex",gap:8,fontSize:es,color:e.lightTextColor,whiteSpace:"nowrap",...g&&{display:"inline"},marginTop:Zr-es},pageTitleAndTimestamp:{display:"flex",flex:1,flexDirection:"column",gap:ts,minWidth:0},pageTitleMockedButton:{maxWidth:"fit-content",display:"flex",alignItems:"center",gap:8,borderRadius:3,paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:5,marginTop:-2,marginBottom:-2,marginLeft:-3,marginRight:-5,background:v&&(w||t)?e.state.hover:void 0},recordTitle:{fontSize:14,fontWeight:A().Wy.medium},recordPath:{color:e.text.contrastPrimary},statusDotContainer:{display:"flex",alignItems:"center"},statusDotSpacer:{width:$r,flexShrink:0},count:{fontSize:12,color:e.text.secondary}})),[g,v,t,w]),D=!0!==p&&void 0;return(0,re.jsxs)("div",{style:O.container,children:[(0,re.jsx)("div",{style:O.pageTitleAndTimestamp,children:(0,re.jsxs)("div",{style:g?O.headerMobile:O.header,children:[i&&n&&(0,re.jsxs)("div",{style:O.iconHeaderOverride,children:[i,(0,re.jsx)("div",{style:O.recordTitle,children:n})]}),(x||t)&&!i&&!n&&(0,re.jsx)(Hr,{disabled:!w&&!t,children:(0,re.jsx)(ee().A,{originGap:3,disableTooltip:!w,alignment:$().C.Start,placement:$().W.Bottom,renderTooltip:P,closeDelay:0,noStyle:!0,textWrap:!0,forceVisibleState:D,render:e=>(0,re.jsxs)("div",{style:O.pageTitleMockedButton,...(0,E().A)(e,{onMouseEnter:I,onMouseLeave:T}),children:[_&&j?(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(os,{actorStore:_,avatar:void 0,size:16}),(0,re.jsx)("div",{style:O.recordTitle,children:j})]}):R?(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(Q().A,{disabled:!0,icon:k,isEmptyPage:M,size:16}),(0,re.jsx)(Z().A,{store:R,style:O.recordTitle,underline:!0})]}):null,l&&(0,re.jsx)("div",{style:O.count,children:l})]})})}),(0,re.jsxs)("div",{style:O.time,className:L().Cxn,children:[(0,re.jsx)(ie().A,{text:y,tooltipText:S,icon:K().k}),d?(0,re.jsx)("div",{style:O.statusDotContainer,children:(0,re.jsx)(oe().m,{size:$r})}):(0,re.jsx)("div",{style:O.statusDotSpacer})]})]})}),g&&(0,re.jsx)("div",{style:{width:W().UM-Yr,flexShrink:0}})]})}function os(e){const{actorStore:t,avatar:i}=e,o=e.size??28;return t?t.table===Ce().GP?(0,re.jsx)(di().A,{botStore:t,size:o}):t.table===y().oo?(0,re.jsx)(li().A,{userStore:t,size:o}):t.table===Ne().yj?(0,re.jsx)(li().A,{userStore:void 0,size:o}):void(0,S().HB)(t):i?(0,re.jsx)(li().A,{avatar:i,size:o}):(0,re.jsx)(li().A,{userStore:void 0,size:o})}const rs=o.memo(Gr);function ss(e){const{activity:t,tabArgs:o,rootStore:n,isFirst:l,isLast:c}=e,{tab:m,notification:v}=o,p=(0,b().tz)(),f=(0,s().K8)((()=>t.getEdits()),[t]);let y=f.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":case"suggestion-created":return!0;default:(0,S().HB)(e)}}));0===y.length&&0!==f.length&&(y=f);const x=y.length>0,_=(0,r().v3)(),j=(0,s().K8)((()=>{const e=n.getRecordStore(n,{table:d().$Y,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,n]),R=(0,s().K8)((()=>{const e=null==j?void 0:j.getParentPointer();if(e)return C().Bv.createChildStore(n,e)}),[j,n]),k=(0,s().K8)((()=>Boolean(R&&R.isDefined())),[R]),M=(0,s().K8)((()=>{const e=null==R?void 0:R.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,R]),w=C().Bv.createChildStore(n,{table:h().ev,id:M}),K=(0,s().K8)((()=>w.isDefined()),[w]),I=(0,s().K8)((()=>{var e;if(R)return null===(e=R.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:n.getRecordModel,discussionId:t.discussion_id,pageVisitSource:g().y8.Notification})}),[R,n,t]),B=(0,s().K8)((()=>_.currentUser.id),[_.currentUser.id]),{value:q}=(0,i(645873).fJ)(Zt().commentsDependency),T=(0,s().K8)((()=>q&&w?q.discussionHelpers.getDiscussionsForSidebar({blockStore:w,currentUserId:B,ignoreAfterTime:0}):[]),[q,w,B]),P=(0,s().K8)((()=>B&&w?(0,i(756214).R)({userId:B,blockStore:w,discussionStores:T,groupIdsUserIsIn:i(486130)._.getSpacePermissionGroupIds({userId:B,spaceId:w.getSpaceId()})}):[]),[B,w,T]),L=(0,s().K8)((()=>{const e=P.map((e=>{const t=e.getSpaceId(),i=_.currentUser.id;if(!t||!i)return{userSeenRecordStore:void 0,discussionStore:e};return{userSeenRecordStore:n.getRecordStore(n,{table:Fr().WQ,id:(0,Fr().e9)({parent_table:d().$Y,parent_id:e.id,user_id:i}),spaceId:t}),discussionStore:e}})),t=e.filter((e=>{let{userSeenRecordStore:t,discussionStore:i}=e;if(!t)return!1;if(!t.isReady())return!1;const o=t.getLastSeenAt(),r=i.getCommentStores().at(-1);if(!r)return!1;if(!o)return!0;return r.getCreatedTime()>o})),i=t.length;if(0!==i)return i}),[P,_.currentUser.id,n]),N=(0,s().K8)((()=>{const e=new Set,t=[];P.forEach((i=>{i.getCommentStores().forEach((i=>{const o=i.getCreatedByPointer();o&&!e.has(o.id)&&(e.add(o.id),t.push(o))}))}));return t.map((e=>C().sk.createChildStore(n,e).getModel())).filter(S().O9).map((e=>e.getDisplayName(p)))}),[P,n,p]),O=(0,s().K8)((()=>{let e,t,i=0;return P.forEach((o=>{o.getCommentStores().forEach((r=>{const s=r.getCreatedTime();s>i&&(i=s,e=r,t=o)}))})),e&&t?{commentStore:e,discussionStore:t}:{author:void 0,commentStore:void 0,discussionStore:void 0}}),[P]),E=(0,u().IS)((e=>({authorsContainer:{fontSize:14,fontWeight:A().Wy.medium,color:e.text.secondary,...A().RC},latestComment:{fontSize:14,color:e.text.secondary,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden"}})),[]);return x&&K&&k&&j?(0,re.jsx)(rs,{isFirst:l,isLast:c,rootStore:n,navigableBlockId:M,notification:v,count:L,url:I,subheader:`${N.join(", ")}`,body:O.commentStore&&O.discussionStore&&(0,re.jsx)(ns,{discussionStore:O.discussionStore,commentStore:O.commentStore,style:E.latestComment}),...(0,He().$5)({notification:v,environment:_,tab:m,activity:t})}):(a().log({level:"warning",from:"CommentPageGroupActivityNotification",type:"invalidNotificationData",data:{ids:[(null==v?void 0:v.id)??"unknown"]}}),null)}function ns(e){const{discussionStore:t,commentStore:i,style:o}=e,n=(0,r().v3)(),a=(0,u().DP)(),d=(0,s().K8)((()=>ri().gp(i).getValue()),[i]),l=(0,s().K8)((()=>i.getSpaceId()),[i]),c=(0,s().K8)((()=>{if(!d||!l)return null;const e=(0,Qt().Eh)({textValue:d,currentUserId:n.currentUser.id,getRecordModel:t.getRecordModel,highlightStyle:"text_only"});return(0,oi().S5)({environment:n,textValue:{value:e,spaceId:l},parentStore:t,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableHover:!0,disabled:!0,theme:a,emojiType:(0,ii().FN)(n),katex:n.KatexStore.getKatex(),formulaValueTypes:[]})}),[n,t,a,d,l]),m=(0,u().IS)((e=>({commentText:{whiteSpace:"pre-wrap",wordBreak:"break-word",display:"inline",fontSize:14,color:e.regularTextColor,lineHeight:"22px",...o}})),[o]);return(0,re.jsx)("span",{style:m.commentText,children:c})}const as=o.memo(ss);var ds=()=>i(94701);function ls(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{tab:d,notification:l}=o,c=(0,r().v3)(),u=(0,s().K8)((()=>(0,Ht().W9)(t.getEdits())),[t]),m=(0,s().K8)((()=>{const e=u[0];return e?e.new_email:""}),[u]);return(0,re.jsx)(rs,{header:{icon:(0,ds().checkmarkFillIcon)({width:16,height:16}),title:(0,re.jsx)(b().sA,{defaultMessage:"Email updated",id:"activity.emailEdited.header"})},body:(0,re.jsx)(b().sA,{defaultMessage:"Updated to {newEmail}",values:{newEmail:m},id:"activity.emailEdited.subheader.short"}),isFirst:n,isLast:a,rootStore:i,notification:l,url:void 0,...(0,He().$5)({notification:l,activity:t,environment:c,tab:d})})}const cs=o.memo(ls);function us(e){const{activity:t,rootStore:i,tabArgs:n,isFirst:a,isLast:d}=e,{tab:l,notification:c}=n,u=(0,r().v3)(),m=(0,s().K8)((()=>t.getEdits()),[t]),g=(0,o.useCallback)((()=>{window.open(m[0].link,"_blank")}),[m]);return(0,re.jsx)(rs,{header:{icon:(0,ds().checkmarkFillIcon)({width:16,height:16}),title:(0,re.jsx)(b().sA,{defaultMessage:"Your workspace export is ready",id:"activity.exportCompleted.header"})},body:(0,re.jsx)(b().sA,{defaultMessage:"The download link will expire in 7 days.",id:"activity.exportCompleted.downloadLink"}),isFirst:a,isLast:d,rootStore:i,notification:c,url:void 0,...(0,He().$5)({notification:c,activity:t,environment:u,tab:l}),children:(0,re.jsx)(qt().A,{size:"md",onClick:g,children:(0,re.jsx)(b().sA,{defaultMessage:"Download",id:"activity.actions.exportCompleted.download"})})})}const ms=o.memo(us);function gs(e){const{activity:t,rootStore:i,isFirst:o,isLast:n,tabArgs:a}=e,{tab:d,notification:l}=a,u=(0,r().v3)(),m=(0,s().K8)((()=>t.getEdits()),[t]),v=m.length>0,p=m[0],f=C().Bv.createChildStore(i,{table:h().ev,id:p.navigable_block_id}),y=(0,s().K8)((()=>f.isDefined()),[f]),S=(0,s().K8)((()=>{const e=C().Bv.createChildStore(i,{table:h().ev,id:t.mentioned_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[t,i]),A=(0,s().K8)((()=>(0,c().Ln)({edits:t.getEdits(),rootStore:i})),[t,i]),x=(0,s().K8)((()=>(0,c().bD)(A,{...(0,k()._m)()})),[A]),_=(0,s().K8)((()=>(0,c().DU)({recordId:f.id,recordType:h().ev,tab:d,rootStore:i,environment:u})),[f,d,i,u]);return v&&y&&S?(0,re.jsx)(_e,{header:(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned your group} other {{authorOrAuthors} mentioned your group}}",values:{numberOfAuthors:A.length,authorOrAuthors:x},id:"activity.groupMentionActivity.standardizedHeader.short"})}),isFirst:o,isLast:n,isPrivate:_,rootStore:i,navigableBlockId:f.id,notification:l,icon:(0,re.jsx)(at().H8,{authors:A,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:S,...(0,He().$5)({notification:l,activity:t,environment:u,tab:d}),children:(0,re.jsx)(Vt().A,{edit:p,rootStore:i,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):null}const vs=o.memo(gs);const hs={viewBox:"0 0 20 20",svg:(0,re.jsx)("path",{d:"M15.869 5.369A.875.875 0 0 0 14.63 4.13L10 8.763 5.369 4.13A.875.875 0 1 0 4.13 5.37L8.763 10 4.13 14.631a.875.875 0 1 0 1.24 1.239L10 11.237l4.631 4.632a.875.875 0 1 0 1.238-1.238L11.237 10z"})},ps=(0,i(340498).wt)("xMarkFill",hs);function fs(e){const{activity:t,rootStore:o,tabArgs:n,isFirst:a,isLast:d}=e,{tab:l,notification:c}=n,u=(0,r().v3)(),m=(0,s().K8)((()=>t.getEdits()),[t]),v=(0,s().K8)((()=>{var e;const t=null===(e=m[0])||void 0===e?void 0:e.teamspace_id;if(t)return C().sk.createChildStore(o,{table:f().yK,id:t,spaceId:o.id})}),[o,m]),p=(0,s().K8)((()=>null==v?void 0:v.getName()),[v]),{import_source:y,import_status:S,version:A,landing_page:x,collection_page_ids:_}=m[0],j=(0,Ei().A)({pageId:x,pageVisitSource:g().y8.Import}),R="successful"===S?(0,ds().checkmarkFillIcon)({width:16,height:16}):ps({width:16,height:16}),{body:k,header:M,children:w}=(0,s().K8)((()=>{const e=Boolean(y)?(0,i(484392).A)(y):void 0,t=(0,re.jsx)(b().sA,{defaultMessage:"{importSource, select, false {External} other {{importSource}}} import failed",id:"importCompletedActivity.importFailed.header",values:{importSource:e,importStatus:S}}),r=(0,re.jsx)(b().sA,{defaultMessage:"{importSource, select, false {External} other {{importSource}}} import was successful",id:"importCompletedActivity.importSuccess.header",values:{importSource:e,importStatus:S}}),s=(0,re.jsx)(b().sA,{defaultMessage:"View projects and tasks in Notion",id:"importCompletedActivity.projects.redirect"}),n=(0,re.jsx)(b().sA,{defaultMessage:"View boards in Notion",id:"importCompletedActivity.boards.redirect"}),a=(0,re.jsx)(b().sA,{defaultMessage:"View import logs",id:"importCompletedActivity.loggerPage.redirect"}),d=null==_?void 0:_[0];let l,c="successful"===S?r:t;if("Jira"===e&&(v&&"successful"===S&&(c=(0,re.jsx)(b().sA,{defaultMessage:"Your Jira projects and tasks have been synced to {teamName}",id:"importCompletedActivity.jiraSuccess.header",values:{teamName:p}})),d)){const e=C().Bv.createChildStore(o,{id:d.projectCollectionPageId,spaceId:o.id,table:h().ev}),t=C().Bv.createChildStore(o,{id:d.taskCollectionPageId,spaceId:o.id,table:h().ev});l=(0,re.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,re.jsx)(qt().A,{size:"md",onClick:()=>{var t;const i=null===(t=e.getModel())||void 0===t?void 0:t.getRenderUrl({pageVisitSource:g().y8.Import,getRecordModel:e.getRecordModel});i&&It().oo({environment:u,url:i})},children:(0,re.jsx)(b().sA,{defaultMessage:"View project",id:"importCompletedActivity.project.redirect"})}),(0,re.jsx)(qt().A,{size:"md",onClick:()=>{var e;const i=null===(e=t.getModel())||void 0===e?void 0:e.getRenderUrl({pageVisitSource:g().y8.Import,getRecordModel:t.getRecordModel});i&&It().oo({environment:u,url:i})},children:(0,re.jsx)(b().sA,{defaultMessage:"View task",id:"importCompletedActivity.task.redirect"})})]})}return{header:c,body:"successful"===S?"Monday"===e&&"v2"===A?n:s:a,children:l}}),[_,S,y,A,v,p,o,u]);return m.length?(0,re.jsx)(rs,{header:{icon:R,title:M},body:k,isFirst:a,isLast:d,rootStore:o,notification:c,url:j,...(0,He().$5)({notification:c,activity:t,environment:u,tab:l}),children:w}):null}const ys=o.memo(fs);function bs(e){const{activity:t,tabArgs:i}=e,{tab:o,notification:n}=i,a=(0,r().v3)(),d=(0,s().K8)((()=>t.getEdits()),[t]),l=d.length>0,c={tab:o,notificationId:null==n?void 0:n.id,environment:a,alreadyRead:Boolean(null==n?void 0:n.read),activity:t},m=(0,u().IS)((e=>({notificationContainer:{paddingBlock:"8px 4px",display:"flex",flexDirection:"column",rowGap:8}})),[]);return l?(0,re.jsx)(ws,{analyticsInfo:c,children:(0,re.jsx)(As,{...e,edits:d,style:m.notificationContainer})}):null}const Ss=1;function As(e){const{rootStore:t,activity:i,isLast:n,tabArgs:a,edits:d,style:l,isFirst:m}=e,{tab:v,notification:p,source:f}=a,y=(0,r().v3)(),b=d.at(0),[x,_]=(0,o.useState)(null),j=(0,o.useMemo)((()=>x&&x.scrollHeight>x.clientHeight),[x]),R=(0,s().K8)((()=>{if(!b)return;const e=C().Bv.createChildStore(t,{table:h().ev,id:b.navigable_block_id});return(0,S().O9)(e)?e:void 0}),[b,t]),k=(0,s().K8)((()=>{const e=null==R?void 0:R.getModel();if(e)return e.getRenderUrl({getRecordModel:t.getRecordModel,pageVisitSource:g().y8.Notification})}),[t,R]),M=(0,s().K8)((()=>(0,c().DU)({recordId:null==R?void 0:R.id,recordType:h().ev,tab:v,rootStore:t,environment:y})),[R,v,t,y]),w=(0,u().IS)((e=>({formattedTitleStyle:{fontSize:A().J.UISmall.desktop,color:e.lightTextColor},container:{paddingBlock:4,display:"flex",flexDirection:"row",columnGap:1.5*Number((0,dt().AG)(e).paddingLeft),alignItems:"center"},unarchiveButton:{marginLeft:-1*Number((0,dt().AG)(e).paddingLeft)}})),[]),K=(0,o.useMemo)((()=>new Set(d.map((e=>e.automation_id)))),[d]),I=1===K.size;return(0,S().O9)(R)&&(0,S().O9)(b)?(0,re.jsx)(_e,{header:(0,re.jsx)(Rs,{rootStore:t,uniqueAutomations:K,firstEdit:b,spaceId:i.spaceId,environment:y,shortened:!1,titleStyle:{fontWeight:A().Wy.semibold}}),isFirst:m,isLast:n,isPrivate:M,rootStore:t,navigableBlockId:R.id,notification:p,icon:(0,re.jsx)(Cs,{}),showSnapshotButton:!1,url:k,...(0,He().$5)({notification:p,activity:i,environment:y,tab:v}),children:(0,re.jsxs)("div",{style:l,children:[d.slice(-1*Ss).map(((i,o)=>(0,re.jsxs)("div",{children:[!I&&(0,re.jsx)(Rs,{rootStore:t,firstEdit:i,uniqueAutomations:new Set([i.automation_id]),shortened:!0,spaceId:i.space_id,environment:y,titleStyle:w.formattedTitleStyle}),(0,re.jsx)(js,{...e,edit:i,isViewAllMenu:!1,source:f,isLast:d.length>Ss?o===d.length-1-Ss:o===d.length-1,clampedMessageContainerRef:_})]},o))),(0,re.jsx)("div",{style:w.container,children:(j||d.length>Ss)&&(0,re.jsx)(xs,{edits:d,rootStore:t,activity:i,navigableBlockStore:R,source:f})})]})}):null}function xs(e){const{edits:t,rootStore:i,activity:n,navigableBlockStore:a,source:d}=e,l=(0,r().Y0)(),c=(0,r().v3)(),{handleAnalyticsForPopupMenu:m}=(0,o.useContext)(Ms),g=(0,s().uB)(void 0,to().A),v=(0,o.useCallback)((()=>g.reset()),[g]),h=(0,o.useMemo)((()=>(0,re.jsx)(b().sA,{defaultMessage:"{numNotifications, plural, one {View more} other {View {numRemainingNotifications}}}",id:"inAppNotificationAutomationActionTriggeredActivity.renderViewAllNotificationsButton.buttonLabel",values:{numNotifications:t.length,numRemainingNotifications:t.length}})),[t.length]);let p;p=l.isMobile?{menuType:Zi().gu.Modal,title:h,right:(0,re.jsx)(ro().DoneMenuText,{}),onClickRight:v,whiteBackground:!0}:{menuType:Zi().gu.Popup,width:420,maxWidth:l.isMobileBrowser?"80vw":"100%"};const f=(0,u().IS)((e=>({actionButton:(0,dt().Ei)(e),divider:{borderBlockEnd:`1px solid ${e.regularDividerColor}`},viewAllMenuNotificationContainer:{display:"flex",flexDirection:"column",padding:12},viewAllMenuHeaderContainer:{display:"flex",flexDirection:"row",gap:de},popupMenu:{marginInlineStart:-2,fontSize:fe}})),[]),y=(0,o.useId)();return(0,re.jsx)(X().Ay,{buttonPopupStore:g,popupType:l.isMobile?eo().n.SlideUp:eo().n.Popup,placementToOrigin:$().W.Bottom,alignmentToOrigin:$().C.Center,originGap:4,onClick:()=>!g.state.open&&m(),renderOrigin:e=>(0,re.jsx)(je().p,{isGray:!0,size:"xs",...e,style:f.actionButton,children:h}),render:()=>(0,re.jsx)(oo().A,{...p,children:(0,re.jsx)("div",{style:f.popupMenu,children:t.map(((o,r)=>(0,re.jsxs)("div",{children:[(0,re.jsxs)("div",{style:f.viewAllMenuNotificationContainer,children:[(0,re.jsxs)("div",{style:f.viewAllMenuHeaderContainer,children:[(0,re.jsx)(Cs,{}),(0,re.jsx)(no,{timestamp:o.timestamp,titleAriaId:y,onBacklinkClick:()=>null,hasChildren:!0,disableJustify:!0,header:(0,re.jsx)(Rs,{rootStore:i,uniqueAutomations:new Set([o.automation_id]),firstEdit:o,spaceId:n.spaceId,environment:c,closeViewAllMenu:v,shortened:!0,titleStyle:{fontWeight:A().Wy.semibold}}),rootStore:i,navigableBlockId:a.id,showRecordPath:!1})]}),(0,re.jsx)(js,{...e,edit:o,isViewAllMenu:!0,source:d,isLast:r===t.length-1},r)]}),r!==t.length-1&&(0,re.jsx)("div",{style:f.divider})]},r)))})})})}const _s=4;function js(e){const{edit:t,rootStore:i,source:o,isViewAllMenu:n,clampedMessageContainerRef:a}=e,d=(0,u().DP)(),l=(0,r().v3)(),c=(0,r().Y0)(),{isMobile:m}=c,g=(0,s().K8)((()=>l.KatexStore.getKatex()),[l]),v=(0,ii().Ol)(),h=(0,s().K8)((()=>(0,re.jsx)("div",{children:(0,oi().S5)({environment:l,textValue:t.message.value?{value:t.message.value,spaceId:t.space_id}:void 0,parentStore:i,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disabled:!1,theme:d,emojiType:v,katex:g,parentBlockId:void 0,renderedPageBlockId:void 0,formulaValueTypes:[],stopLinkPropagation:!0})})),[l,v,g,d,t.message.value,i,t.space_id]),p=(0,u().IS)((e=>({container:{paddingInlineStart:n?32:(0,dt().F9)({source:o,isMobile:m}),paddingBlockEnd:4},messageContainer:{position:"relative",display:"flex",justifyContent:"space-between",alignItems:"center"},clampedMessageContainer:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:n?void 0:_s,verticalAlign:"top",textAlign:"left",lineHeight:A().K_.UIRegular.desktop,...A().RC},messageContent:{whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:fe,lineHeight:(0,zi().ks)({device:c},"UIRegular"),paddingInlineEnd:8}})),[m,o,c,n]);return(0,re.jsx)("div",{style:{...n&&p.container,...p.messageContainer},children:(0,re.jsx)("div",{ref:a,style:p.clampedMessageContainer,children:(0,re.jsx)("div",{style:p.messageContent,children:h})})})}function Rs(e){const{rootStore:t,spaceId:i,environment:o,closeViewAllMenu:r,shortened:n,titleStyle:a,firstEdit:d,uniqueAutomations:l}=e,u=(0,b().tz)(),m=1===l.size,v=(0,s().K8)((()=>!C().dn.createChildStore(t,{table:Et().yB,id:d.automation_id,spaceId:t.getSpaceId()}).getAlive()),[t,d]),p=(0,s().K8)((()=>{const e=new(C().Bv)(o,{id:d.automation_navigable_block_id,table:h().ev}).getRole();return!e||!(0,Le().Tt)(e)}),[d,o]),f=(0,s().K8)((()=>{if(!(v&&m||p))return()=>{const e=d.automation_navigable_block_id,i=d.automation_id,s=C().Bv.createChildStore(t,{table:h().ev,id:e});if(!s)return;r&&r();const n=(0,Bt().Ay)({store:s,preferPublicLink:!1,pageVisitSource:g().y8.Notification});It().oo({environment:o,url:n,callback:async()=>await(0,c()._4)({environment:o,automationNavigableBlockStore:s,automationId:m?i:void 0,rootStore:t,source:"in_app_notification"})})}}),[o,m,d,t,r,v,p]),y=(0,s().K8)((()=>[...l].map((e=>{const o=t.getRecordStore(t,{table:Et().yB,id:e,spaceId:i}),r=o.getRole();return(0,S().O9)(r)&&(0,Le().Tt)(r)?o.getAlive()?o.getNameWithDefault(u):u.formatMessage(Ot().VS.automationDeletedName):u.formatMessage(Ot().VS.automationPrivateName)}))),[u,t,i,l]);return n?(0,re.jsx)("div",{style:{...a,display:"inline-flex"},children:(0,re.jsx)(ks,{handleAutomationNavigate:f,automationNames:y})}):(0,re.jsx)(b().sA,{id:"inAppNotificationAutomationActionTriggeredActivity.formattedHeaderMessage.automationTitle",defaultMessage:"{automationNameWrappedHeader} sent you a message",values:{automationNameWrappedHeader:(0,re.jsx)("div",{style:{...a,display:"inline-flex"},children:(0,re.jsx)(ks,{handleAutomationNavigate:f,automationNames:y})})}})}function ks(e){const{automationNames:t,handleAutomationNavigate:i}=e,o=(0,b().tz)(),r=t.at(0),s=t.length,n=s-2,a=o.formatList([...t.slice(0,2),n>0?o.formatMessage({defaultMessage:"{numRemainingAutomations} more",id:"inAppNotificationAutomationActionTriggeredActivity.wrappedAutomationName.tooltipNumRemainingAutomations"},{numRemainingAutomations:n}):void 0].filter(S().O9),{style:"long",type:"conjunction"}),d={defaultMessage:"{numAutomations, plural, one {{firstAutomationName}} other {{numAutomations} automations}}",values:{firstAutomationName:r,numAutomations:s},id:"inAppNotificationAutomationActionTriggeredActivity.wrappedAutomationName.automationName",description:"The display name for an automation."},l=e=>i?(0,re.jsx)(Dt().A,{...e,onClick:i,children:(0,re.jsx)(b().sA,{...d})}):(0,re.jsx)("div",{...e,children:(0,re.jsx)(b().sA,{...d,...e})});return 1===s?l():(0,re.jsx)(ee().A,{renderTooltip:e=>(0,re.jsx)("div",{...e,children:a}),render:e=>l(e)})}function Cs(){const e=(0,u().IS)((e=>({icon:{height:12,width:12,fill:e.icon.secondary}})),[]);return(0,re.jsx)(xe,{children:(0,Qi().v)(e.icon)})}const Ms=(0,o.createContext)({handleAnalyticsForPopupMenu:()=>{}});function ws(e){const{analyticsInfo:t,children:i}=e,r=(0,o.useCallback)((()=>Oe().mF(t)),[t]);return(0,re.jsx)(Ms.Provider,{value:{handleAnalyticsForPopupMenu:r},children:i})}Ms.displayName="InAppNotificationAutomationActionTriggeredAnalyticsContext";const Ks=o.memo(bs);function Is(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{tab:d,notification:l}=o,c=(0,r().v3)(),u=(0,b().tz)(),m=(0,s().K8)((()=>t.navigable_block_id),[t]),v=(0,s().K8)((()=>{const e=bo().B.createChildStore(i,{table:h().ev,id:t.navigable_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[t,i]),p=(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"<b>{author}</b> did not find conflicts",id:"activity.noConflictsFound.header",values:{author:yo().px.getDisplayName(u),b:e=>(0,re.jsx)("span",{style:{fontWeight:A().Wy.semibold},children:e})}})});return v?(0,re.jsx)(_e,{header:p,isFirst:n,isLast:a,isPrivate:!0,rootStore:i,navigableBlockId:m,notification:l,icon:(0,re.jsx)(at().H8,{authors:[yo().px],size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:v,...(0,He().$5)({notification:l,activity:t,environment:c,tab:d})}):null}const Bs=o.memo(Is);function qs(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{tab:d,notification:l}=o,u=(0,r().v3)(),m=(0,b().tz)(),v=(0,s().K8)((()=>t.getEdits()),[t]),p=v[0],f=(0,s().K8)((()=>(0,c().Ln)({edits:v,rootStore:i})),[v,i]),S=(0,s().K8)((()=>(0,c().bD)(f,{fontWeight:A().Wy.regular})),[f]),x=C().sk.createChildStore(i,{table:h().ev,id:t.navigable_block_id,spaceId:i.id}),_=C().sk.createChildStore(i,{table:y().oo,id:p.from_user_id,spaceId:i.id}),j=(0,s().K8)((()=>_.getDisplayName(m)),[_,m]),R=(0,s().K8)((()=>{var e;return null===(e=x.getModel())||void 0===e?void 0:e.getRenderUrl({pageVisitSource:g().y8.Notification,getRecordModel:x.getRecordModel})}),[x]);return v.length>0?(0,re.jsx)(rs,{header:{icon:(0,ds().checkmarkFillIcon)({width:16,height:16}),title:(0,re.jsx)(b().sA,{defaultMessage:"Private content transfer",id:"activity.privateContentTransferred.header"})},body:(0,re.jsx)(b().sA,{defaultMessage:"{authorPhrase} transferred {fromUserName}{fromUserNameEndsWithS, select, true {} other {s}} private pages to you",values:{authorPhrase:S,fromUserName:j,fromUserNameEndsWithS:"s"===j.slice(-1).toLowerCase()},id:"activity.privateContentTransferred.standardizedHeader.short"}),rootStore:i,notification:o.notification,isFirst:n,isLast:a,url:R,...(0,He().$5)({notification:l,activity:t,environment:u,tab:d})}):null}const Ts=o.memo(qs);function Ps(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{notification:d,tab:l}=o,c=(0,r().v3)(),u=(0,s().K8)((()=>t.getEdits()),[t]),m=u.length>0,v=C().Bv.createChildStore(i,{table:h().ev,id:u[0].navigable_block_id}),p=(0,s().K8)((()=>v.isDefined()),[v]),f=(0,s().K8)((()=>{const e=C().Bv.createChildStore(i,{table:h().ev,id:t.reminder_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[t,i]);return m&&p&&f?(0,re.jsx)(rs,{subheader:(0,re.jsx)(b().sA,{defaultMessage:"Reminder",id:"activity.reminderInActivity.header.short"}),body:(0,re.jsx)(Vt().A,{edit:u[0],rootStore:i}),isFirst:n,isLast:a,rootStore:i,navigableBlockId:v.id,notification:d,url:f,...(0,He().$5)({notification:d,activity:t,environment:c,tab:l})}):null}const Ls=o.memo(Ps);function Ns(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),m=(0,s().K8)((()=>t.getEdits()),[t]),v=m.length>0,h=(0,s().K8)((()=>(0,c().Ln)({edits:m,rootStore:i})),[m,i]),p=(0,s().K8)((()=>(0,c().bD)(h,{...(0,k()._m)()})),[h]),y=m[0],S=(0,s().K8)((()=>C().h4.createChildStore(i,{table:f().yK,id:y.team_id})),[i,y.team_id]),A=(0,s().K8)((()=>S.isDefined()),[S]),x=(0,s().K8)((()=>{if((0,Mo().D)({isMobileNative:u.device.isMobileNative}))return(0,Co().a)({teamId:y.team_id,pageVisitSource:g().y8.Notification})}),[y.team_id,u]);return v&&A&&S?(0,re.jsx)(rs,{notificationTitleStore:S,subheader:p,body:(0,re.jsx)(b().sA,{defaultMessage:"Invited you to the teamspace",id:"activity.teamMembershipEdited.body"}),isFirst:n,isLast:a,rootStore:i,notification:d,url:x,...(0,He().$5)({notification:d,activity:t,environment:u,tab:l})}):null}const Os=o.memo(Ns);function Es(e){const{activity:t,rootStore:i,isFirst:o,isLast:n,tabArgs:a}=e,{tab:d,notification:l}=a,u=(0,r().v3)(),m=(0,s().K8)((()=>t.getEdits()),[t]),v=m.length>0,p=m[0],f=(0,s().K8)((()=>C().Bv.createChildStore(i,{table:h().ev,id:p.navigable_block_id})),[p,i]),y=(0,s().K8)((()=>f&&f.isDefined()),[f]),S=(0,s().K8)((()=>{const e=C().Bv.createChildStore(i,{table:h().ev,id:t.mentioned_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[t,i]),A=(0,s().K8)((()=>(0,c().Ln)({edits:t.getEdits(),rootStore:i})),[t,i]),x=(0,s().K8)((()=>(0,c().bD)(A,{...(0,k()._m)()})),[A]),_=(0,s().K8)((()=>(0,c().DU)({recordId:f.id,recordType:h().ev,tab:d,rootStore:i,environment:u})),[f,d,i,u]);return v&&y&&S?(0,re.jsx)(_e,{header:(0,re.jsx)("span",{children:(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned your teamspace} other {{authorOrAuthors} mentioned your teamspace}}",values:{numberOfAuthors:A.length,authorOrAuthors:x},id:"activity.teamMentionActivity.standardizedHeader.short"})}),isFirst:o,isLast:n,isPrivate:_,rootStore:i,navigableBlockId:f.id,notification:l,icon:(0,re.jsx)(at().H8,{authors:A,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:S,...(0,He().$5)({notification:l,activity:t,environment:u,tab:d}),children:(0,re.jsx)(Vt().A,{edit:p,rootStore:i,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):null}const Us=o.memo(Es);function Ds(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),m=(0,b().tz)(),v=(0,s().K8)((()=>t.getEdits()),[t]),h=Fs({spaceStore:i,edit:v[0]}),p=(0,s().K8)((()=>(0,c().Ln)({edits:v,rootStore:i})),[v,i]),f=(0,s().K8)((()=>{if("block"===(null==h?void 0:h.type))return h.blockStore}),[h]),y=(0,s().K8)((()=>{if(!f)return;const e=f.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification}):void 0}),[f,i.getRecordModel]),S=(0,s().K8)((()=>t.navigable_block_id),[t]),A=function(e){const{edit:t,activity:i,spaceStore:o}=e,r=Fs({spaceStore:o,edit:t}),n=(0,s().K8)((()=>parseInt(i.getEndTime())),[i]),a=(0,s().K8)((()=>{if("block"!==(null==r?void 0:r.type))return;const e=r.blockStore;return null!=e&&e.isDefined()?e.getModel():void 0}),[r]);return(0,s().K8)((()=>{if(!a)return{isValid:!1};const e=a&&(0,Eo()._T)(a,i);if(!e)return{isValid:!1};const t=o.getRecordModel({table:Oo().Yx,id:e,spaceId:i.space_id});return t&&t.getMessage()&&t.getCreatedTime()<=n+5*Uo().Xb?{isValid:!0,message:t.getMessage()}:{isValid:!1}}),[i,n,a,o])}({edit:v[0],activity:t,spaceStore:i}),x=(0,s().K8)((()=>{if(h){if("block"===h.type)return h.blockStore;if("group"===h.type){const e=p[0];if(!e)return;return C().sk.createChildStore(i,e.pointer)}return"space"===h.type?h.spaceStore:void 0}}),[p,h,i]);return 0!==v.length&&h&&x?(0,re.jsx)(rs,{notificationTitleStore:x,subheader:"block"===h.type?p.map((e=>e.getDisplayName(m))).join(", "):void 0,body:(0,re.jsx)(zs,{data:h,inviteMessage:A,authors:p,isFromBot:p[0].isBot()}),isFirst:n,isLast:a,rootStore:i,navigableBlockId:S,notification:d,url:y,...(0,He().$5)({notification:d,environment:u,tab:l,activity:t})}):null}function zs(e){var t,i;const{data:o,inviteMessage:r,authors:n,isFromBot:a}=e,d=(0,s().K8)((()=>(0,c().bD)(n,{fontWeight:A().Wy.regular})),[n]);switch(o.type){case"block":return a?(0,re.jsx)(b().sA,{defaultMessage:"You were invited to a page",id:"activity.userInvitedActivityByBot.standardizedHeader.redesign"}):(0,re.jsx)(b().sA,{defaultMessage:'Invited you to the page{hasMessage, select, true {, "{message}"} other {}}',id:"activity.userInvitedActivity.body",values:{hasMessage:r.isValid&&r.message?"true":"false",message:r.isValid?r.message:""}});case"group":return a?(0,re.jsx)(b().sA,{defaultMessage:"You were added to @{groupName}",values:{groupName:null===(t=o.group)||void 0===t?void 0:t.name},id:"activity.userInvitedActivityGroupIdByBot.standardizedHeader.redesign"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to @{groupName}} other {{authorOrAuthors} added you to @{groupName}}}",values:{numberOfAuthors:n.length,authorOrAuthors:d,groupName:null===(i=o.group)||void 0===i?void 0:i.name},id:"activity.userInvitedActivityGroupId.standardizedHeader.redesign"});case"space":return a?(0,re.jsx)(b().sA,{defaultMessage:"You were invited to a workspace",id:"activity.userInvitedActivityOtherInviteByBot.standardizedHeader.redesign"}):(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a workspace} other {{authorOrAuthors} invited you to a workspace}}",values:{numberOfAuthors:n.length,authorOrAuthors:d},id:"activity.userInvitedActivityOtherInvite.standardizedHeader.redesign"});default:(0,S().HB)(o)}}function Fs(e){const{spaceStore:t,edit:i}=e;return(0,s().K8)((()=>{if(i)return i.navigable_block_id?{type:"block",blockStore:C().Bv.createChildStore(t,{table:h().ev,id:i.navigable_block_id})}:i.permission_group_id?{type:"group",group:(0,No().$I)({spaceId:i.space_id,permissionGroupId:i.permission_group_id,getRecordValue:t.getRecordValue})}:{type:"space",spaceStore:C().SL.createChildStore(t,{table:p().NX,id:i.space_id})}}),[i,t])}const Ws=o.memo(Ds);function Hs(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{tab:d,notification:l}=o,u=(0,r().v3)(),m=(0,s().K8)((()=>t.getEdits()),[t]),v=m.length>0,p=m[0],f=C().Bv.createChildStore(i,{table:h().ev,id:p.navigable_block_id}),y=(0,s().K8)((()=>f.isDefined()),[f]),b=(0,s().K8)((()=>C().xq.createChildStore(i,{table:$o().kz,id:t.id,spaceId:t.space_id}).getStandardizedMentionedPropertyURI()),[t,i]),S=(0,s().K8)((()=>{const e=C().Bv.createChildStore(i,{table:h().ev,id:t.mentioned_block_id}).getModel();return null==e?void 0:e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[t,i]),A=(0,s().K8)((()=>(0,c().Ln)({edits:m,rootStore:i})),[m,i]),x=(0,s().K8)((()=>(0,c().bD)(A,{...(0,k()._m)()})),[A]),_=(0,s().K8)((()=>(0,c().DU)({recordId:f.id,recordType:"block",tab:d,rootStore:i,environment:u})),[f,d,i,u]);return v&&y&&S?(0,re.jsx)(_e,{header:(0,re.jsx)(Vs,{mentionedProperty:b,authorPhrase:x,authors:A}),isFirst:n,isLast:a,isPrivate:_,rootStore:i,navigableBlockId:f.id,notification:l,icon:(0,re.jsx)(at().H8,{authors:A,size:le,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:S,...(0,He().$5)({notification:l,activity:t,environment:u,tab:d}),children:(0,re.jsx)(Vt().A,{edit:p,rootStore:i,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):null}function Vs(e){const{mentionedProperty:t,authorPhrase:i,authors:o}=e;switch(t){case Vo().yx.Assign:return(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} assigned you a task} other {{authorOrAuthors} assigned you a task}}",values:{numberOfAuthors:o.length,authorOrAuthors:i},id:"activity.mentionTaskActivity.standardizedHeader"});case Vo().K4.People:return(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you in} other {{authorOrAuthors} mentioned you in}}",values:{numberOfAuthors:o.length,authorOrAuthors:i},id:"activity.mentionProjectActivity.standardizedHeader.short"});default:return(0,re.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you in} other {{authorOrAuthors} mentioned you in}}",values:{numberOfAuthors:o.length,authorOrAuthors:i},id:"activity.mentionActivity.standardizedHeader.short"})}}function $s(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:a}=e,{tab:d,notification:l}=o,m=(0,r().v3)(),v=(0,s().K8)((()=>C().Bv.createChildStore(i,{table:h().ev,id:t.navigable_block_id})),[t,i]),p=(0,s().K8)((()=>v.isDefined()),[v]),f=(0,s().K8)((()=>{const e=v.getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[v,i]),y=(0,s().K8)((()=>t.collection_id?C().md.createChildStore(i,{table:Xo().Vl,id:t.collection_id,spaceId:t.space_id}):void 0),[t,i]),S=(0,s().K8)((()=>!(null==y||!y.isPageTreeCollection())),[y]),x=(0,s().K8)((()=>{let e;if(S){const t=null==y?void 0:y.getSchema();e=(t?Object.keys(t):[]).find((e=>{var i;return!!t&&"verification"===(null===(i=t[e])||void 0===i?void 0:i.type)}))}else e=Jo()._e.Verification;let t=(0,re.jsx)(b().sA,{id:"Activity.author.unknown",defaultMessage:"Unknown"});if(e){const o=v.getPropertyValue(e),r=(0,Jo().U1)(o);if(r){const e=r[0],o=(0,c().T9)(e,i);o&&o.asActor&&(t=(0,c().bD)([o],{...(0,k()._m)()}))}}return t}),[v,y,S,i]),_=(0,s().K8)((()=>(0,c().DU)({recordId:v.id,recordType:"block",tab:d,rootStore:i,environment:m})),[v,d,i,m]),{activityStartTimestamp:j,activityEndTimestamp:R}=(0,s().K8)((()=>({activityStartTimestamp:parseInt(t.start_time),activityEndTimestamp:parseInt(t.end_time)})),[t]),M=(0,u().IS)((e=>({verificationMessage:{fontSize:14,color:e.mediumTextColor}})),[]);return p?(0,re.jsx)(_e,{header:S?(0,re.jsx)(b().sA,{defaultMessage:"<medium>Wiki verification</medium> expired",id:"activity.verificationExpired.header.short",values:{medium:e=>(0,re.jsx)("span",{style:{fontWeight:A().Wy.medium},children:e})}}):(0,re.jsx)(b().sA,{defaultMessage:"<medium>Page verification</medium> expired",id:"activity.verificationExpired.page.header.short",values:{medium:e=>(0,re.jsx)("span",{style:{fontWeight:A().Wy.medium},children:e})}}),isFirst:n,isLast:a,isPrivate:_,rootStore:y??i,navigableBlockId:v.id,notification:l,icon:(0,re.jsx)(Gs,{}),showSnapshotButton:!1,url:f,...(0,He().$5)({notification:l,activity:t,environment:m,tab:d}),children:(0,re.jsx)("div",{style:M.verificationMessage,children:j&&R?(0,re.jsx)(b().sA,{defaultMessage:"Last verified by {person} from {startDate} to {endDate}",values:{person:x,startDate:(0,U().DG)(j),endDate:(0,U().DG)(R)},id:"activity.verificationExpired.contentWithTimestamp"}):(0,re.jsx)(b().sA,{defaultMessage:"Last verified by {person}",values:{person:x},id:"activity.verificationExpired.contentWithoutTimestamp"})})}):null}function Gs(){const e=(0,u().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,re.jsx)(xe,{children:(0,Yo().E)(e.icon)})}const Ys={"block-property-edited":zr,"user-mentioned":o.memo(Hs),commented:as,"user-invited":Ws,reminder:Ls,"email-edited":cs,"access-requested":Nr,"access-request-resolved":Ur,"team-membership-edited":Os,"private-content-transferred":Ts,"permission-group-mentioned":vs,"team-mentioned":Us,"verification-expired":o.memo($s),"export-completed":ms,"import-completed":ys,"in-app-notification-automation-action-triggered":Ks,"no-conflicts-found":Bs,"automation-typecheck-error-raised":zt,reacted:xo,"upgrade-request-created":Lo,"app-builder-notification":Pt};function Xs(e){const t=(0,r().v3)();return(0,o.useEffect)((()=>{!function(e,t){if("commented"===e.type){const o=t.getRecordStore(t,{table:d().$Y,id:e.discussion_id,spaceId:e.space_id});if(o.isDefined()){const e=o.getCommentStores();for(const t of e){var i;null===(i=t.getCreatedByStore())||void 0===i||i.load()}}}}(e.activity,e.rootStore),t.KatexStore.loadIfNeeded((()=>function(e,t){const i=(0,c().U6)({activity:e,rootStore:t});if(!i)return;return i.context}(e.activity,e.rootStore)))}),[t.KatexStore,e.activity,e.rootStore]),(0,re.jsx)("div",{children:(0,re.jsx)(Js,{...e})})}function Js(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:d}=e,c=(0,s().K8)((()=>t.type),[t]),u=(0,l().X)("inbox_page_grouping"),m=e.overrideUsePageGroupRedesign??u;if(!(0,n().Jc)(c))return a().log({level:"error",from:"ActivityNotification",type:"unsupportedActivityType",data:{message:`Activity type ${c} is not supported for ActivityNotification`}}),null;if(m){const e=Ys[c];return(0,re.jsx)(e,{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:d})}const g=Zo[c];return(0,re.jsx)(g,{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:d})}},746970:(e,t,i)=>{i.d(t,{KB:()=>b,Wy:()=>A,aV:()=>S,p4:()=>y,si:()=>x});i(18107),i(967357),i(898992),i(354520),i(581454);var o=()=>i(296344),r=()=>i(96689),s=()=>i(798880),n=()=>i(496603),a=()=>i(134696),d=()=>i(966505),l=()=>i(449506),c=()=>i(579627),u=()=>i(246826),m=()=>i(317909),g=()=>i(680074),v=()=>i(592674),h=()=>i(630116),p=()=>i(309049),f=()=>i(224701);async function y(e){const{environment:t,store:i,status:o,requests:r}=e,a=t.currentUser.id;d().qQ(t,{status:o,user_count:r.length,from:e.from,request_type:"member"});const l=await Promise.all(r.map((e=>_(t,{id:e.getForActorId(),table:s().oo})))).then((e=>(0,n().oE)(e)));if("approved"===o){const e=l.map((e=>({type:"existingUser",value:e.__IM_SORRY__getValue(),spaceRole:"read_and_write"})));if(!(await c().eP({environment:t,store:i,inviteTargets:e,inviteRole:"read_and_write",isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return{failedUsers:l,resolvedUsers:[]}}return m().createAndCommit({userAction:"accessRequestActions.resolveMembershipRequests",environment:t,canUndo:!0,perform:n=>{r.map((r=>{const l=new(h().v3)(t,r.pointer);u().zv({store:l,transaction:n,data:{granted_time:Date.now(),granted_by_table:s().oo,granted_by_id:a,resolved_time:Date.now(),resolved_by_table:s().oo,resolved_by_id:a,status:o}}),d().vn(t,{status:o,request_id:r.id,from:e.from,for_actor_id:r.for_actor_id,space_role:i.getRole()})}))}}),{failedUsers:[],resolvedUsers:l}}async function b(e){const{environment:t,store:i,status:o,requests:r}=e,l=t.currentUser.id;d().qQ(t,{status:o,user_count:r.length,from:e.from,request_type:"member"});const g=await Promise.all(r.map((e=>_(t,{id:e.getForActorId(),table:s().oo})))).then((e=>(0,n().oE)(e)));if("approved"===o){const e=g.map((e=>({type:"existingUser",value:e.__IM_SORRY__getValue(),spaceRole:"read_and_write"})));if(!(await c().eP({environment:t,store:i,inviteTargets:e,inviteRole:"read_and_write",isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return{failedUsers:g,resolvedUsers:[]};const o=i.id,r=await v().A.awaitData(t,{spaceId:o}),s=r?r.map((e=>e.domain.url)):[];a().hp(t,{invite_flow_id:void 0,invite_origin:"membership_request",user_ids:g.map((e=>e.id)),internal_domains:s})}return m().createAndCommit({userAction:"accessRequestActions.resolveMembershipRequests",environment:t,canUndo:!0,perform:e=>{r.map((i=>{const r=new(h().v3)(t,i.pointer);u().zv({store:r,transaction:e,data:{granted_time:Date.now(),granted_by_table:s().oo,granted_by_id:l,resolved_time:Date.now(),resolved_by_table:s().oo,resolved_by_id:l,status:o,type:"space_membership_request"}})}))}}),{failedUsers:[],resolvedUsers:g}}async function S(e){const{environment:t,status:i,requests:o,from:r}=e;d().qQ(t,{status:i,user_count:o.length,from:r,request_type:"guest"});const c=await Promise.all(o.map((async e=>{var o,n,c;const u=await _(t,{id:e.getForActorId(),table:s().oo});if(!u)return{type:"failed",user:void 0};if(!e.isGuestInviteRequest())return{type:"failed",user:u};const m=await l().callApi({eventName:"resolveAccessRequest",environment:t,data:{accessRequestId:e.id,status:i,spaceId:e.getParentId()}}),v=null===(o=e.getAttributes().permission_records_and_roles.at(0))||void 0===o?void 0:o.role,h=null===(n=e.getAttributes().permission_records_and_roles.at(0))||void 0===n?void 0:n.id,p=(null===(c=e.getAttributes().invite_message)||void 0===c?void 0:c.length)??0;return"success"===m.type&&"approved"===i&&a().Jg(t,{role:v,is_space:!1,invite_targets:[{type:"existingUser",value:{id:u.id,version:0,email:u.getEmail()},spaceRole:"none"}],is_onboarding:!1,invite_origin:"guest_invite_request",permission_items:[{type:"user_permission",role:v,user_id:u.id}],invite_message_length:p,domainType:(0,g().FX)()}),"success"===m.type&&d().AE(t,{status:i,request_id:e.id,for_actor_id:e.getForActorId(),created_by_id:e.getCreatedById(),requested_page_id:h,requested_role:v,from:r}),{type:m.type,user:u}})));await f().Ow(t);const u=c.filter((e=>"failed"===e.type)).map((e=>e.user)),m=c.filter((e=>"success"===e.type)).map((e=>e.user));return{failedUsers:(0,n().oE)(u),resolvedUsers:(0,n().oE)(m)}}async function A(e){if(p().A.reset(),!e.canAdmin)return;const{environment:t,spaceId:i}=e,o=await l().callApi({eventName:"getUnreadAccessRequestCount",environment:t,data:{parentTable:r().NX,parentId:i,size:1}});"success"===o.type&&p().A.setState({spaceId:i,count:o.data.count})}async function x(e,t,i){const r=function(e){return Object.values((0,n().$z)(e,(e=>function(e){if(e.isGuestInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${e.getCreatedById()}`}return e.isSpaceMembershipRequest()?`space_membership_${e.getForActorId()}:${e.getCreatedById()}}`:e.isTeamMembershipRequest()?void 0:void e.isPageAccessRequest()}(e)))).map((e=>{const t=(0,n().Ul)(e,(e=>e.getCreatedTime()));return t[t.length-1]}))}(await Promise.all(i.map((async t=>{const i=o().O,r=new(h().v3)(e,{table:i,id:t});return await r.load(),r.getModel()}))).then((e=>(0,n().oE)(e)))),a=await function(e,t){const i=Object.values((0,n().$z)(t,(e=>function(e){if(e.isGuestInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${null==t?void 0:t.role}`}return e.isSpaceMembershipRequest()?`space_membership_${e.getForActorId()}`:e.isTeamMembershipRequest()?void 0:void e.isPageAccessRequest()}(e))));return Promise.all(i.map((async t=>{const i=(0,n().Ul)(t,(e=>e.getCreatedTime())),o=i[0];return{createdByActorsWithReason:await Promise.all(i.map((async t=>{const i=await _(e,{id:t.created_by_id,table:s().oo});if(i)return{actor:i,reason:t.message}}))).then((e=>(0,n().oE)(e))),accessRequest:o}})))}(e,r);return Promise.all(a.map((async t=>{const i=await _(e,{id:t.accessRequest.getForActorId(),table:s().oo});if(i)return{forActor:i,...t}}))).then((e=>(0,n().oE)(e)))}async function _(e,t){const i=new(h().LU)(e,t);return await i.load(),i.getModel()}}}]);