"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[70605],{3197:(e,t,o)=>{o.d(t,{t:()=>s});var n=o(296540),r=()=>o(183558),a=()=>o(248064),i=()=>o(384130),l=()=>o(937199);function s(e){const{setModuleSelection:t,layoutStore:o}=(0,l().LH)(),s=(0,a().h)(),{dismissTooltip:c}=(0,i().J)();return(0,n.useCallback)((()=>{var n;"form"===(null===(n=o.getModel())||void 0===n?void 0:n.getLayoutType())&&"form_conditional_modules"!==e.area?s({layoutModule:{type:"placeholder",id:(0,r().Ay)()},position:e.afterModuleId?{type:"module_relative",area:e.area,direction:"below",relativeToModuleId:e.afterModuleId}:void 0}):(t({type:"new_module",isDragging:!1,..."views_main_tab_modules"===e.area?{area:"views_main_tab_modules",viewsMainTabId:e.viewsMainTabId}:{area:e.area}}),"page_main"===e.area&&c())}),[o,e,s,t,c])}},156275:(e,t,o)=>{o.d(t,{F:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowLeftRounded",{viewBox:"0 0 16 13",svg:(0,n.jsx)("path",{d:"M0.617188 6.85156C0.617188 6.60677 0.710938 6.39323 0.898438 6.21094L6.03906 1.07812C6.13281 0.984375 6.23177 0.914062 6.33594 0.867188C6.4401 0.820312 6.54948 0.796875 6.66406 0.796875C6.90365 0.796875 7.10417 0.875 7.26562 1.03125C7.42708 1.1875 7.50781 1.38281 7.50781 1.61719C7.50781 1.74219 7.48438 1.85677 7.4375 1.96094C7.39062 2.0599 7.32812 2.14844 7.25 2.22656L5.5 4L2.59375 6.66406L2.3125 6.15625L5.02344 5.99219H14.5156C14.776 5.99219 14.9844 6.07292 15.1406 6.23438C15.3021 6.39062 15.3828 6.59635 15.3828 6.85156C15.3828 7.10156 15.3021 7.30729 15.1406 7.46875C14.9844 7.625 14.776 7.70312 14.5156 7.70312H5.02344L2.3125 7.54688L2.59375 7.04688L5.5 9.70312L7.25 11.4688C7.32812 11.5469 7.39062 11.638 7.4375 11.7422C7.48438 11.8464 7.50781 11.9583 7.50781 12.0781C7.50781 12.3125 7.42708 12.5078 7.26562 12.6641C7.10417 12.8203 6.90365 12.8984 6.66406 12.8984C6.4349 12.8984 6.22917 12.8099 6.04688 12.6328L0.898438 7.49219C0.710938 7.3099 0.617188 7.09635 0.617188 6.85156Z"})})},248064:(e,t,o)=>{o.d(t,{h:()=>s});var n=o(296540),r=()=>o(484714),a=()=>o(56366),i=()=>o(978846),l=()=>o(937199);function s(){const{layoutStore:e,currentModuleSelection:t,setModuleSelection:o,sessionId:s}=(0,l().LH)(),c=(0,r().v3)(),d=(0,a().K8)((()=>{var t;return null===(t=e.getModel())||void 0===t?void 0:t.getLayoutType()}),[e]),p="form"===d?"form_layout_schema":"new_module"===(null==t?void 0:t.type)?t.area:void 0;return(0,n.useCallback)((n=>{const{layoutModule:r,transaction:a}=n;if(!e.getModel()||!p||"form_conditional_modules"===p)return;let l;if("form"===d)l=n.position??{type:"area_relative",area:"form_layout_schema",location:"end_moveable"};else{if("new_module"!==(null==t?void 0:t.type))return;if("form_conditional_modules"===t.area)return;l="views_main_tab_modules"===t.area?{type:"area_relative",area:t.area,viewId:t.viewsMainTabId,location:"end_moveable"}:{type:"area_relative",area:t.area,location:"end_moveable"}}(0,i().UQ)({environment:c,sessionId:s,layoutStore:e,position:l,module:r,transaction:a,isPropertyCreation:!1}),o({type:"existing_module",moduleId:r.id,isDragging:!1})}),[p,t,c,e,d,s,o])}},261164:(e,t,o)=>{o.d(t,{o:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowRightRounded",{viewBox:"0 0 16 13",svg:(0,n.jsx)("path",{d:"M15.3828 6.85156C15.3828 7.09635 15.2917 7.3099 15.1094 7.49219L9.95312 12.6328C9.77083 12.8099 9.5651 12.8984 9.33594 12.8984C9.09635 12.8984 8.89583 12.8203 8.73438 12.6641C8.57812 12.5078 8.5 12.3125 8.5 12.0781C8.5 11.9583 8.52083 11.8464 8.5625 11.7422C8.60938 11.638 8.67188 11.5469 8.75 11.4688L10.5 9.70312L13.4141 7.04688L13.6875 7.54688L10.9766 7.70312H1.48438C1.22396 7.70312 1.01302 7.625 0.851562 7.46875C0.695312 7.30729 0.617188 7.10156 0.617188 6.85156C0.617188 6.59635 0.695312 6.39062 0.851562 6.23438C1.01302 6.07292 1.22396 5.99219 1.48438 5.99219H10.9766L13.6875 6.15625L13.4141 6.66406L10.5 4L8.75 2.22656C8.67188 2.14844 8.60938 2.0599 8.5625 1.96094C8.52083 1.85677 8.5 1.74219 8.5 1.61719C8.5 1.38281 8.57812 1.1875 8.73438 1.03125C8.89583 0.875 9.09635 0.796875 9.33594 0.796875C9.45052 0.796875 9.5599 0.820312 9.66406 0.867188C9.76823 0.914062 9.86719 0.984375 9.96094 1.07812L15.1094 6.21094C15.2917 6.39323 15.3828 6.60677 15.3828 6.85156Z"})})},290966:(e,t,o)=>{o.d(t,{E_:()=>T,HQ:()=>A,I5:()=>P,ZQ:()=>k});o(16280),o(898992),o(823215),o(354520),o(581454),o(296540);var n=()=>o(662303),r=()=>o(428045),a=()=>o(134025),i=()=>o(912720),l=()=>o(179034),s=()=>o(519831),c=()=>o(869558),d=()=>o(144081),p=()=>o(921515),u=()=>o(959013),m=()=>o(496603),y=()=>o(534177),f=()=>o(284371),v=()=>o(966759),w=()=>o(235191),_=()=>o(901389),g=()=>o(317909),h=()=>o(67103),C=()=>o(16006),b=()=>o(972435),S=()=>o(470928),I=()=>o(630116),L=()=>o(913454),M=()=>o(204067),x=o(474848);function k(e){let{transaction:t,collectionStore:o,templateId:n,instance:r,logger:u}=e;u.debug(`Creating/updating ${p().rM} record for "${n}".`);const m=o.getSpaceId(),f=r.id;if("automation"===r.type){const e={table:i().yB,id:f,spaceId:m};g().applyOperation({store:I().dn.createChildStore(o,e),operation:a().op.set({pointer:e,path:["properties","workflow_template_instance"],args:{template_id:n}}),transaction:t})}else if("block"===r.type){const e={table:l().ev,id:f,spaceId:m};g().applyOperation({store:I().Bv.createChildStore(o,e),operation:a().op.set({pointer:e,path:["format","workflow_template_instance"],args:{template_id:n}}),transaction:t})}else if("collection"===r.type){const e={table:s().Vl,id:f,spaceId:m};g().applyOperation({store:o,operation:a().op.set({pointer:e,path:["format","workflow_template_instance"],args:{template_id:n}}),transaction:t})}else if("collection_view"===r.type){const e={table:c().Gy,id:f,spaceId:m};g().applyOperation({store:I().pS.createChildStore(o,e),operation:a().op.set({pointer:e,path:["format","workflow_template_instance"],args:{template_id:n}}),transaction:t})}else if("layout"===r.type){const e={table:d().zx,id:f,spaceId:m};g().applyOperation({store:I().K_.createChildStore(o,e),operation:a().op.set({pointer:e,path:["format","workflow_template_instance"],args:{template_id:n}}),transaction:t})}else if("compound"===r.type){if(r.instancePointers.length<2)throw new Error(`Compound template instance ${r.id} must contain 2 or more instances`);const e=r.instancePointers.map((e=>{switch(e.type){case"automation":return{type:"automation",id:e.id};case"block":return{type:"block",id:e.id};case"collection_view":return{type:"collection_view",id:e.id};case"layout":return{type:"layout",id:e.id};case"property":return{type:"property",id:e.id}}(0,y().HB)(e)}));g().applyOperation({store:o,operation:{command:"keyedObjectListUpdate",pointer:o.pointer,path:["format","compound_workflow_template_instances"],args:{value:{template_id:n,id:r.id,instance_pointers:e}}},transaction:t})}else"property"===r.type?g().applyOperation({store:o,operation:a().op.update({pointer:o.pointer,path:["schema",r.id],args:{workflow_template_instance:{template_id:n}}}),transaction:t}):(0,y().HB)(r)}function T(e){let{environment:t,collectionStore:o,propertyId:n,compoundTemplateInstancesToDelete:a,collectionContextStore:i,from:l}=e;if(!a.every((e=>e.templateId===r().z$)))return!1;if(!(0,S().Io)())return!1;const s=(0,M().aL)({environment:t,collectionStore:o,compoundTemplateInstancesToDelete:a}),c=m().sb(s.filter((e=>"property"===e.type)).map((e=>e.id))),d=o.getSchema(),p=c.map((e=>{var t;if(e===n)return;const o=d[e];if(!o)throw new Error(`Property ${e} not found`);if(o.name)return o.name;const r=null===(t=o.workflow_template_instance)||void 0===t?void 0:t.template_id;if(!r)throw new Error(`Property ${e} has no workflow template id`);const a=L().globalWorkflowTemplates.fromId(r);return(0,L().getWorkflowTemplateName)(a)})).filter(y().O9);return j({environment:t,collectionStore:o,propertyIds:c,otherPropertyNames:p,collectionContextStore:i,from:l}),!0}function P(e){let{environment:t,collectionStore:o,propertyId:n,collectionContextStore:r,from:a}=e;const i=o.getSchema(),l=Object.keys(i).filter((e=>(0,S().Do)({collectionStore:o,propertyId:e})||(0,S().k$)(e))),s=l.map((e=>{var t;if(e===n)return;const r=null===(t=i[e])||void 0===t?void 0:t.name;if(r)return r;if((0,S().Do)({collectionStore:o,propertyId:e}))return b().A.formatMessage(h().Gl.verificationPropertyName);if((0,S().k$)(e))return b().A.formatMessage(h().Gl.ownerPropertyName);throw new Error(`Property ${e} must be a verification or owner property`)})).filter(y().O9);return j({environment:t,collectionStore:o,propertyIds:l,otherPropertyNames:s,collectionContextStore:r,from:a}),!0}function j(e){let{environment:t,collectionStore:o,propertyIds:r,otherPropertyNames:a,collectionContextStore:i,from:l}=e;const s=[{label:(0,x.jsx)(u().sA,{id:"workflowTemplateInstanceActions.deleteRequiredProperty.deleteOption",defaultMessage:"{count, plural, one {Delete {count} property} other {Delete {count} properties}}",values:{count:r.length}}),color:"red",onAccept:()=>function(e){let{environment:t,collectionStore:o,collectionContextStore:n,propertyIds:r,from:a}=e;g().createAndCommit({userAction:"workflowTemplateInstanceActions.handleDeleteAccept",environment:t,canUndo:!0,perform:e=>{const i=o.getSchema();for(const l of r){w().BJ({environment:t,collectionStore:o,schema:i,property:l,transaction:e});const r=i[l];r&&(0,v().i)({environment:t,collectionContextStore:n,property_type:r.type,from:a,property:l})}}})}({environment:t,collectionStore:o,collectionContextStore:i,propertyIds:r,from:l})}],c=new Intl.ListFormat(n().locale,{style:"long",type:"conjunction"}),d=(0,x.jsx)(u().sA,{id:"workflowTemplateInstanceActions.deleteRequiredProperty.deletePropertyFromDb",defaultMessage:"Delete this property from <bold>{databaseName}</bold>? {otherPropertyNames} will also be deleted",values:{bold:e=>(0,x.jsx)("span",{style:{fontWeight:f().Wy.bold},children:e}),databaseName:(0,x.jsx)(C().A,{style:{display:"inline",fontWeight:f().Wy.bold},shouldWrap:!0,store:o}),otherPropertyNames:c.format(a)}});_().ui({message:(0,x.jsx)("span",{children:d}),showCancel:!0,keepFocus:!0,innerStyle:{width:400},items:s})}function A(e){const{environment:t,transaction:o,collectionStore:n,instance:r}=e;(0,M().aI)({environment:t,instancePointer:r,inMemoryRecordCache:n.inMemoryRecordCache})||g().applyOperation({store:n,operation:{pointer:n.pointer,command:"keyedObjectListRemove",path:["format","compound_workflow_template_instances"],args:{remove:{id:r.id}}},transaction:o})}},384130:(e,t,o)=>{o.d(t,{J:()=>u,v:()=>p});var n=o(296540),r=()=>o(484714),a=()=>o(56366),i=()=>o(317909),l=()=>o(755199),s=()=>o(186445),c=()=>o(351360);function d(e){let{userSettingsDismissibleKey:t}=e;const o=(0,r().v3)(),d=(0,a().K8)((()=>c().default.state.currentUserSettingsStore),[]),p=(0,a().K8)((()=>{const e=null==d?void 0:d.getSettings();return!e||Boolean(e[t])}),[t,d]),u=(0,a().K8)((()=>{const e=(0,s()._m)(o),t=null==d?void 0:d.getSettings();return Boolean(e)&&Boolean(t)&&!o.device.isMobile&&!p}),[o,d,p]),m=n.useCallback((()=>{d&&!p&&u&&i().createAndCommit({environment:o,userAction:"LayoutInfoPanelButtonEducationTooltip.dismiss",canUndo:!1,perform:e=>{l().mJ({userSettingsStore:d,transaction:e,data:{[t]:Date.now()}})}})}),[o,u,t,d,p]);return{shouldShowTooltip:u,dismissTooltip:m}}function p(){return d({userSettingsDismissibleKey:"layout_info_panel_button_education_tooltip_dismissed_at"})}function u(){return d({userSettingsDismissibleKey:"layout_builder_add_module_button_education_tooltip_dismissed_at"})}},402137:(e,t,o)=>{o.d(t,{w:()=>s});o(18107),o(967357),o(814603),o(147566),o(198721);const n="://",r="www.",a=/.+\..+\..+/,i=/\.{2,}/,l=/.+\..+/;function s(e){const t=e.trim();if(0===t.length)return!1;if(-1===t.indexOf(".")&&-1===t.indexOf("localhost"))return!1;if("."===t.at(t.length-1)||-1!==t.indexOf(" "))return!1;let o,s=`${-1===t.indexOf(n)?"http://":""}${t}`;try{o=new URL(s)}catch(d){const e=-1===s.indexOf(r),[t,a]=s.split(n);s=`${t}${n}${e?"www.":""}${a}`;try{o=new URL(s)}catch(d){return!1}}const c=o.hostname;return!i.test(c)&&(!(t.includes(r)&&"localhost"!==c&&!a.test(c))&&!("localhost"!==c&&!l.test(c)))}},404085:(e,t,o)=>{o.d(t,{l:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M9.381 13.619a.875.875 0 0 0 1.238 0l5.4-5.4A.875.875 0 1 0 14.78 6.98L10 11.763 5.219 6.98A.875.875 0 1 0 3.98 8.22z"})},r=(0,o(340498).wt)("arrowChevronSingleDownFill",n)},412532:(e,t,o)=>{o.d(t,{l:()=>r});o(296540);const n={viewBox:"0 0 16 16",svg:(0,o(474848).jsx)("path",{d:"M13.165 12.75a.8.8 0 0 0 .69-1.203L8.692 2.693a.8.8 0 0 0-1.382 0l-5.165 8.854a.8.8 0 0 0 .691 1.203z"})},r=(0,o(340498).wt)("arrowCaretUpFillSmall",n)},498474:(e,t,o)=>{o.d(t,{q:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowUp",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 14.5586C8.44434 14.5586 8.74512 14.251 8.74512 13.7998V5.30957L8.69043 3.83984L10.4951 5.84961L12.0469 7.38086C12.1836 7.51074 12.3682 7.59961 12.5801 7.59961C12.9902 7.59961 13.291 7.28516 13.291 6.86816C13.291 6.66992 13.2158 6.49219 13.0586 6.32812L8.55371 1.81641C8.40332 1.66602 8.20508 1.57715 8 1.57715C7.79492 1.57715 7.59668 1.66602 7.44629 1.81641L2.94141 6.32812C2.78418 6.49219 2.70898 6.66992 2.70898 6.86816C2.70898 7.28516 3.0166 7.59961 3.42676 7.59961C3.63184 7.59961 3.82324 7.51074 3.95312 7.38086L5.50488 5.84961L7.30957 3.83301L7.25488 5.30957V13.7998C7.25488 14.251 7.5625 14.5586 8 14.5586Z"})})},607810:(e,t,o)=>{o.d(t,{s:()=>i});var n=o(296540),r=()=>o(120997),a=o(474848);const i=n.memo((function(e){let{area:t,viewsMainTabId:i,children:l,className:s,style:c}=e;const{layoutBuilderModuleSelectionStore:d,layoutStore:p}=(0,o(937199).LH)(),u=(0,n.useCallback)((()=>{const e=d.state;if(null==e||!e.isDragging)return;const o=e.moduleId,n=p.getModuleById(o);n&&(0,r().p)(n,t)&&("page_main"===t&&p.isTabbedPageLayout()||d.setState({...e,draggingModuleFinalArea:{..."views_main_tab_modules"===t?{area:t,viewsMainTabId:i}:{area:t}}}))}),[t,d,p,i]),m=(0,n.useCallback)((()=>{const e=d.state;if(null==e||!e.isDragging)return;const o=e.moduleId,n=p.getModuleById(o);n&&(0,r().p)(n,t)&&d.setState({...e,draggingModuleFinalArea:e.draggingModuleInitialArea})}),[t,d,p]);return(0,a.jsx)("div",{onMouseEnter:u,onMouseLeave:m,className:s,style:c,children:l})}))},612900:(e,t,o)=>{o.d(t,{u:()=>a});var n=()=>o(645873);const r=new(n().O2)("PulsingWrapper",(async()=>o.e(45248).then(o.bind(o,673962)))),a=(0,n().jQ)(r,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},984318:(e,t,o)=>{o.r(t),o.d(t,{ViewsMainBuilderModules:()=>u});var n=o(296540),r=()=>o(484714),a=()=>o(753199),i=()=>o(204521),l=()=>o(937199),s=()=>o(817942),c=()=>o(421682),d=()=>o(607810),p=o(474848);function u(e){const t=(0,r().v3)(),{setModuleSelection:o,layoutStore:u,sessionId:m}=(0,l().LH)(),{viewsMainTabId:y,pageLayoutType:f}=e,v=(0,n.useCallback)((e=>{(0,a().SQ)({event:e,context:a().y$.EditorClick,callback:()=>{var e;o(void 0),(0,i().L3)({environment:t,layoutId:u.id,collectionId:null===(e=u.getCollectionModel())||void 0===e?void 0:e.id,sessionId:m,from:"background_click"})}})}),[t,u,m,o]);return(0,p.jsx)("div",{role:"presentation",onClick:v,children:(0,p.jsx)(d().s,{area:"views_main_tab_modules",viewsMainTabId:y,children:(0,p.jsx)(s().Mx,{type:f,style:{"--margin-width":"0px"},children:(0,p.jsx)(c().J,{area:"views_main_tab_modules",viewsMainTabId:y})})})})}}}]);