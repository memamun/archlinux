"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[29945,34208,35599,71204,92222],{346:(e,t,o)=>{o.d(t,{MG:()=>g,T1:()=>m,a1:()=>y,dt:()=>f,kg:()=>h,lC:()=>v,n_:()=>b});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(187174),s=()=>o(645873),l=()=>o(941463),d=()=>o(441199),c=()=>o(749687),u=()=>o(737230),p=()=>o(756114);const m=new(s().O2)("PerformanceToolbar",(()=>Promise.all([o.e(23806),o.e(16471),o.e(47123),o.e(17989),o.e(56985),o.e(48680),o.e(45624)]).then(o.bind(o,140401)))),g=(0,s()._h)(m,(e=>e.PerformanceToolbar)),f=(0,s()._h)(m,(e=>e.PerformanceToolbarSettings));function h(){const e=(0,r().v3)();return(0,i().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function b(){const e=(0,r().v3)(),t=S("PerformanceToolbarStore"),o=S("isPerformanceToolbarVisible");return(0,i().K8)((()=>!(!t||!o)&&o(e,e.RouterStore.state,t.state)),[o,e,t])}function v(){const e=S("PerformanceToolbarStore");return(0,i().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function y(){const e=(0,r().v3)(),t=S("createPerformanceToolbarMouseListeners"),o=S("PerformanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:m,updateSidebarExpanded:g,updateSidebarWidth:f}=(0,i().K8)((()=>({sidebarExpanded:c().sidebarExpandedStore.state,sidebarWidth:c().sidebarWidthStore.state,secondarySidebarExpanded:d().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,n.useEffect)((()=>{if(o&&t)return t(e,(e=>o.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,p,m,g,f)}),[t,e,o,a,s,p,m,g,f])}function S(e){const t=h(),[{value:o}]=(0,a().Yb)((()=>t?m.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return o}},42120:(e,t,o)=>{o.d(t,{Dl:()=>ee,U2:()=>G,Zk:()=>te,_R:()=>W,bE:()=>oe,c:()=>$,cJ:()=>X,eN:()=>J,e_:()=>H,g4:()=>q,qy:()=>Y});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(803949),o(581454),o(737550);var n=()=>o(244641),r=()=>o(584262),i=()=>o(66689),a=()=>o(890409),s=()=>o(970013),l=()=>o(597777),d=()=>o(604995),c=()=>o(206267),u=()=>o(433847),p=()=>o(912720),m=()=>o(199378),g=()=>o(179034),f=()=>o(519831),h=()=>o(96689),b=()=>o(854150),v=()=>o(950914),y=()=>o(864779),S=()=>o(919709),I=()=>o(374562),C=()=>o(313892),x=()=>o(813297),R=()=>o(465364),P=()=>o(654062),w=()=>o(601734),k=()=>o(989423),M=()=>o(594794),_=()=>o(972435),A=()=>o(351360),j=()=>o(630116),T=()=>o(908447),D=()=>o(966759),L=()=>o(449506),B=()=>o(235191),E=()=>o(686526),F=()=>o(896628),O=()=>o(246826),V=()=>o(867201),N=()=>o(317909),U=()=>o(345913),Q=()=>o(755199);const z="week";function W(e){var t;const{environment:o,transaction:n,tasksBlockStore:r,sprintsBlockStore:i}=e,a=null===(t=i.getFormat())||void 0===t?void 0:t.collection_pointer,s=r.getFormat().collection_pointer;if(!a||!s)return;const l=j().md.createChildStore(i,a),d=l.getRole()??"none";if(!(0,u().q_)(d,"editor"))return;l.getAutomationStores().some((e=>e.isCompleteSprintAutomation()))||K({environment:o,transaction:n,sprintCollectionStore:l,taskCollectionStore:j().md.createChildStore(r,s),sprintSettingsConfig:v().AL})}function K(e){const{environment:t,sprintSettingsConfig:o,transaction:n,sprintCollectionStore:r,taskCollectionStore:i}=e,a=r.getSpaceId(),s=(0,M().Z1)({environment:t,table:p().yB,spaceId:a}),l=(0,M().Z1)({environment:t,table:m().SC,spaceId:a});O().eC({environment:t,table:p().yB,inMemoryRecordCache:r.inMemoryRecordCache,value:{id:s,parent_id:r.id,parent_table:r.table,alive:!0,space_id:a,status:o.autoCompleteSprints?"active":"disabled",trigger:{id:c().JW(),type:"recurrence",recurrence:re(o)},action_ids:[l]},transaction:n}),F().zA({stores:[r],update:{automation_ids:[...r.getFormat().automation_ids??[],s]},transaction:n}),O().eC({environment:t,table:m().SC,inMemoryRecordCache:r.inMemoryRecordCache,transaction:n,value:{id:l,parent_id:s,parent_table:p().yB,type:"complete_sprint",alive:!0,space_id:a,config:{sprint_collection:r.getSpaceShardedPointer(),task_collection:i.getSpaceShardedPointer(),complete_sprint_action:o.actionConfig.complete_sprint_action}}})}function H(e){const{environment:t,automationStore:o,transaction:n,newDuration:r,currentSprintBlockStore:i}=e;O().zv({store:o.getTriggerStore().getKeyStore("recurrence"),data:{interval:r},transaction:n}),Z({environment:t,transaction:n,automationStore:o,currentSprintBlockStore:i})}function q(e){const{environment:t,automationStore:o,transaction:n,newWeekday:r,currentSprintBlockStore:i}=e;O().zv({store:o.getTriggerStore().getKeyStore("recurrence"),data:{weekdays:[r]},transaction:n}),Z({environment:t,transaction:n,automationStore:o,currentSprintBlockStore:i})}function G(e){const{environment:t,actionStore:o,automationStore:n,transaction:r,newAutocompleteStatus:i,currentSprintBlockStore:s}=e;O().zv({store:n,data:{status:i?"active":"disabled"},transaction:r}),Z({environment:t,transaction:r,automationStore:n,currentSprintBlockStore:s});const l=n.getParentPointer();if(!l||l.table!==f().Vl)return;const d=(0,k().ik)(t),c={automation_id:n.id,automation_actions:[{automation_action_id:o.id,type:"complete_sprint"}],automation_triggers:[{type:"recurrence"}],collection_id:l.id};i?(0,a().Ah)(d,c):(0,a().vN)(d,c)}function Z(e){const{automationStore:t,currentSprintBlockStore:o,transaction:r,environment:a}=e;if(!t.isActive())return;const s=t.getRecurrence();if(!s)return;const d=(0,y().Vv)(s);if(!d)return;const c=o.getPropertyValue(i().Hx.Dates);if(!c)return;const u=(0,S().Cok)(c)[0];if(!u||"daterange"!==u.type)return;const p=u.start_date,{start_date:m,end_date:g}=(0,y().Me)({currentSprintStartDate:p,sprintSchedule:d});O().zv({store:t.getTriggerStore().getKeyStore("recurrence"),data:{start_date:(0,l().Rz)(n().c9.fromISO(m).plus({minutes:1}).toJSDate())},transaction:r}),R().D5({store:o,propertyId:i().Hx.Dates,transaction:r,environment:a,type:"dateValue",dateValue:{type:"daterange",start_date:p,end_date:g}})}function Y(e){const{transaction:t,newRemainingTasksBehavior:o,actionStore:n}=e;O().zv({store:n.getConfigStore(),data:{complete_sprint_action:o},transaction:t})}async function $(e){var t;const{appTemplatesSetupActions:o,appTemplatesSprintBoardActions:n,appConfigs:a}=await w().Aw.load(),{environment:s,collectionContextStore:l,from:d}=e,{currentSpaceViewStore:c}=A().default.state,u=l.collectionStore(),p=null==u?void 0:u.getParentBlockStore(),m=null==p?void 0:p.getParentStore(),f=null==u||null===(t=u.getFormat())||void 0===t?void 0:t.app_config_uri,v=f&&(0,C().lS)(a(),f);if(!u||!p||!m||!c||m.table!==h().NX&&m.table!==g().ev&&m.table!==b().yK||!v)return;const y=p.getFormat().app_id,S=y?await L().callApi({eventName:"getCollectionViewBlocksByAppId",environment:s,data:{spaceId:p.getSpaceId(),appId:y}}):void 0,x="success"===(null==S?void 0:S.type)&&S.data.result.length?S.data.result.map((e=>j().Bv.createChildStore(m,{table:g().ev,id:e.blockId,spaceId:p.getSpaceId()}))):[p];await ne({environment:s,taskCollectionStore:u,executeFn:()=>{const e=N().createAndCommit({userAction:"sprintSettingsActions.handleTurnOnSprints",environment:s,canUndo:!0,perform:e=>{const t=(0,I().We)(),r=o.applyTypedFeatures({environment:s,spaceViewStore:c,appParentStore:m,appUri:v.uri,features:[{type:"simple",featureUri:t.uri}],transaction:e,createOrModify:"modify",appCollectionViewBlockStores:x}),a=n.createSprintPage({environment:s,spaceViewStore:c,appParentStore:m,transaction:e,blockStores:r,creationEntryPoint:{type:"sprint_settings"}});if(E().os({collectionSettingsStore:l.settingsStore}),!a)return;const u=d?{feature:{id:i().yx.TaskToSprintRelation,from:d,type:"notion://projects/tasks_with_sprints_feature"}}:{};return(0,T().Z)({environment:s,collectionContextStore:l,from:"view_settings",property:i().yx.TaskToSprintRelation,property_type:"relation",is_suggested_property:!0,...u}),a}});e.serverCommitResult.then((()=>{const t=e.performResult;t&&V().Y({environment:s,store:t,pageVisitSource:r().y8.Create})}))}})}async function J(e){const{environment:t,collectionContextStore:o,sprintSettingsContext:n,sprintBoardViewBlockIds:a}=e,{sprintCollectionStore:s,automationContext:l,currentCollectionViewBlockStore:d,sprintCollectionViewBlockStore:c,taskCollectionStore:u,taskCollectionViewBlockStore:p}=n;if(!s||!c||!l)return;const m=p.getSpaceId(),f=[c,...a.map((e=>new(j().Bv)(t,{id:e,table:g().ev,spaceId:m})))];d.id===p.id?E().os({collectionSettingsStore:o.settingsStore}):V().Y({environment:t,store:p,pageVisitSource:r().y8.LeaveOrRemove});const{automationActions:h}=await x().QV.automations.load(),{automationStore:b}=l;await ne({environment:t,taskCollectionStore:u,executeFn:()=>{N().createAndCommit({userAction:"sprintSettingsActions.handleTurnOffSprints",environment:t,canUndo:!0,perform:e=>{!function(e){const{transaction:t,blocksToDelete:o,environment:n,taskCollectionStore:r,sprintCollectionStore:a}=e;O().zv({store:a,transaction:t,data:{alive:!1}}),B().BJ({environment:n,collectionStore:r,schema:r.getSchema(),property:i().yx.TaskToSprintRelation,transaction:t,permanentlyDelete:!0}),U().oD({environment:n,blocks:o,transaction:t,permanentlyDelete:!0})}({environment:t,transaction:e,blocksToDelete:f,sprintCollectionStore:s,taskCollectionStore:u}),h.disableAutomation({automationStore:b,environment:t,transaction:e}),h.deleteAutomation({automationStore:b,environment:t,transaction:e})}}),(0,D().i)({environment:t,collectionContextStore:o,property_type:"relation",from:"view_settings",property:i().yx.TaskToSprintRelation})}})}function X(e){const{environment:t,userSettingsStore:o}=e;N().createAndCommit({userAction:"sprintSettingsActions.handleSeenSprintsEngagementBanner",environment:t,canUndo:!0,perform:e=>{Q().mJ({userSettingsStore:o,data:{seen_sprint_settings_engagement_banner:!0},transaction:e})}})}function ee(e){e.settingsStore.setState({open:!0,stack:[{type:"main"},{type:"sprintSettings"}]})}function te(e){const{environment:t,collectionContextStore:o,currentViewBlockStore:n,taskCollectionViewBlockStore:r}=e,a=o.collectionViewStore();if(!a)return;const s=a.getFormat(),l=a.getRawQuery();N().createAndCommit({userAction:"sprintSettingsActions.handleManageSprintFromThisView",environment:t,canUndo:!0,perform:e=>{if((0,P().F)({collectionViewStore:a,transaction:e,update:{name:_().A.formatMessage(I().DZ.tasksCurrentSprintV2ViewName),query2:{...l,filter:void 0},format:{...s,collection_view_icon:"/icons/playback-play-button_gray.svg",property_filters:I().Wo,app_config_uri:i().Lu,hide_linked_collection_name:!0}}}),n.id===r.id){var t;const o=(null===(t=n.getFormat())||void 0===t?void 0:t.app_uri_map)??{},l=s.app_config_uri;l&&delete o[l],F().zA({stores:[r],update:{app_uri_map:{...o,[i().Lu]:a.id}},transaction:e})}}})}function oe(e){const{environment:t,sprintSettingsContext:o}=e;if(!o)return;const n=o.sprintCollectionStore,r=(null==n?void 0:n.getRole())??"none";n&&(0,u().q_)(r,"editor")&&o.automationContextLoaded&&!o.automationContext&&N().createAndCommit({userAction:"sprintSettingsActions.ensureCompleteSprintAutomation",environment:t,canUndo:!0,perform:e=>{K({environment:t,transaction:e,sprintCollectionStore:n,taskCollectionStore:o.taskCollectionStore,sprintSettingsConfig:v().AL})}})}async function ne(e){const{executeFn:t,environment:o,taskCollectionStore:n}=e;await async function(e){var t;const{environment:o,taskCollectionStore:n}=e,r=n.getFormat().app_uri_map,a=i().yx.TaskToSprintRelation,l=n.getSchema(),d=(null==r?void 0:r[a])??a,c=l[d];if(!c||!(0,s().nC)(c))return;const u=null===(t=(0,s().Nv)(c))||void 0===t?void 0:t.id;if(!u)return;const p=new Set([d]);Object.entries(l).forEach((e=>{var t;let[o,n]=e;n&&(0,s().nC)(n)&&(null===(t=(0,s().Nv)(n))||void 0===t?void 0:t.id)===u&&p.add(o)}));const{serverCommitResult:m}=N().createAndCommit({userAction:"sprintSettingsActions.clearSprintRelationDataFromTaskCollection",environment:o,canUndo:!0,perform:e=>{for(const t of p)B().BJ({environment:o,transaction:e,permanentlyDelete:!0,collectionStore:n,schema:l,property:t});null==r||delete r[a],r&&F().zA({stores:[n],transaction:e,update:{app_uri_map:r}})}});await m}({environment:o,taskCollectionStore:n}),t()}function re(e){return{frequency:z,interval:e.recurrenceConfig.interval,weekdays:e.recurrenceConfig.weekdays,start_date:(0,l().Rz)(n().c9.local().set({hour:0,minute:0,second:0,millisecond:0}).toJSDate()),timezone:(0,d().dB)(),hour:0,minute:0}}},50651:(e,t,o)=>{o.d(t,{default:()=>_});o(898992),o(354520),o(672577),o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(743176),l=()=>o(851979),d=()=>o(987555),c=()=>o(959013),u=()=>o(496603),p=()=>o(284371),m=()=>o(989423);var g=()=>o(27732),f=()=>o(896628),h=()=>o(317909),b=()=>o(722872),v=()=>o(685889),y=()=>o(962730),S=()=>o(736767),I=()=>o(41459),C=()=>o(760217),x=()=>o(439264),R=()=>o(285790),P=()=>o(928600),w=()=>o(939740),k=()=>o(89924),M=o(474848);const _=function(e){let{collectionStore:t,targetCollectionStore:s,property:l,disabled:d,rowType:u}=e;const p=(0,a().DP)(),g=(0,r().v3)(),f=(0,i().uB)(void 0,o(970585).A),{format:h}=(0,n.useContext)(o(655424).t),b=(0,i().K8)((()=>{const e=v().B7({collectionStore:t,property:l}),o=Object.keys(s.getSchema()).map((t=>e.find((e=>e.property===t))??{property:t,visible:!1})),n=e.map((e=>e.property)),r=e=>{const t=n.indexOf(e);return-1!==t?t:1/0};return o.sort(((e,t)=>r(e.property)-r(t.property))),o}),[t,s,l]),S=(0,n.useCallback)((e=>(0,M.jsx)(D,{parent:e,collectionStore:t,property:l,disabled:d,targetCollectionStore:s,menuListStore:f,allRelatedTargetProperties:b})),[t,l,d,s,f,b]);return(0,r().WS)()&&"section"!==u||h===I().j.FormEditor||h===I().j.FormViewer?null:(0,M.jsx)(o(859428).A,{renderTooltip:()=>(0,M.jsx)(c().sA,{id:"database.RelationCustomizeLayoutMenu.tooltip.button.message",defaultMessage:"Customize shown properties"}),placement:"section"===u?y().W.Top:y().W.Right,render:e=>(0,M.jsx)(o(406699).Ay,{popupType:o(14235).nl.Popup,alignmentToOrigin:y().C.Start,...e,renderOrigin:t=>(0,M.jsx)(R().A,{icon:o(30626)._,iconStyle:{width:16,color:p.mediumIconColor,fill:p.mediumIconColor},...t,...e}),onClick:()=>{!function(e,t){m().vd(e,"relation_customize_displayed_properties",t)}(g,{from:"section"===u?"relation_section":"configure_relation_modal"})},originGap:16,render:S})})};function A(e){const{props:t,children:o}=e;return(0,M.jsx)(k().A,{...t,noTextOverflow:!0,title:(0,M.jsx)(c().sA,{defaultMessage:"Hidden in relation",id:"database.relationMenu.hiddenInRelationTitle"}),desktopTitleStyle:{height:19},children:o,disableDesktopPadding:!0})}function j(e,t,o,n,r,i,a){const{properties:c,visibility:m}=e;return u().oE(c.map((e=>function(e,t,o,n,r,i,a){const{propertyFormat:c,visibility:u}=e,m=!u,f=r.getSchema();if(!f)return;const h=f[c.property];return h?{key:c.property,render:e=>(0,M.jsx)(C().A,{...e,showDragHandle:!a,title:(0,M.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,M.jsx)(s().Ay,{icon:h.icon,type:h.type,size:16,theme:o,style:{fill:o.regularIconColor}}),(0,M.jsx)("span",{style:{marginLeft:8,...p().RC},children:h.name})]}),right:(0,M.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,M.jsx)(R().A,{icon:m?d().T:l().h,iconStyle:{width:16,height:16},isDarkIconColor:!m,onClick:()=>{g().xI({propertyFormat:c,visibility:u,collectionStore:n,property:i,environment:t})},disabled:a||"title"===c.property})})}),action:()=>{}}:void 0}({propertyFormat:e,visibility:m},t,o,n,r,i,a))))}function T(e){const t=(0,r().v3)(),{collectionStore:o,property:n,menuListStore:i,disabled:a,visibleProperties:s,hiddenProperties:l,children:d}=e,c=u().oE([...s.map((e=>e.property)),s.length>0&&l.length>0&&{key:"group-header-hidden-property",draggable:!1},...l.map((e=>e.property))]);return(0,M.jsx)(x().Ay,{direction:"vertical",keys:c,renderKey:(e,t)=>d[t],onDrop:e=>{!function(e,t,o,n,r){const{newPropertyKeys:i}=e,a=v().B7({collectionStore:o,property:n}),s=i.indexOf("group-header-hidden-property"),l=u().oE(i.filter((e=>!e.startsWith("group-header-"))).map(((e,t)=>{const o=a.find((t=>t.property===e));return o?s>0?"title"===e&&t>=s?o:{...o,visible:Boolean(t<s)}:o:{property:e,visible:!(s>0)||Boolean(t<s)}}))),d=a.filter((e=>!i.includes(e.property))),c={...v().TA(o)};c[n]||(c[n]={}),c[n].related_properties=[...l,...d],h().createAndCommit({userAction:"RelationPropertyCustomizeLayoutMenu.handlePropertyReorder",environment:t,canUndo:!0,perform:e=>{f().zA({stores:[o],update:{collection_relation_options:c},transaction:e})}}),r.reset()}({newPropertyKeys:e},t,o,n,i)},disabled:a})}function D(e){let{parent:t,collectionStore:o,property:n,disabled:s,targetCollectionStore:l,menuListStore:d,allRelatedTargetProperties:p}=e;const m=(0,a().DP)(),g=(0,r().v3)(),f=p.filter((e=>e.visible)),h=p.filter((e=>!e.visible)),v=(0,i().K8)((()=>j({properties:f,visibility:!0},g,m,o,l,n,s)),[f,g,m,o,l,n,s]),y=(0,i().K8)((()=>j({properties:h,visibility:!1},g,m,o,l,n,s)),[h,g,m,o,l,n,s]);return p?(0,M.jsxs)(P().A,{menuType:b().gu.Popup,maxWidth:240,maxHeight:500,children:[0===p.length&&(0,M.jsx)(k().A,{children:(0,M.jsx)(S().A,{caption:(0,M.jsx)(c().sA,{defaultMessage:"No properties",id:"database.relationMenu.noProperties"})})}),p.length>0&&(0,M.jsx)(w().Ay,{type:w().Oh.Vertical,store:d,initialFocus:void 0,sections:u().oE([f.length>0&&{key:"visible_and_hidden_properties",render:e=>(0,M.jsx)(k().A,{...e,noTextOverflow:!0,title:(0,M.jsx)(c().sA,{defaultMessage:"Shown in relation",id:"database.relationMenu.shownInRelationTitle"}),desktopTitleStyle:{height:18},children:(0,M.jsx)(T,{collectionStore:o,property:n,disabled:s,menuListStore:d,visibleProperties:f,hiddenProperties:h,children:e.children})}),items:u().oE([...v,h.length>0&&{key:"group-header-hidden-property",render:e=>(0,M.jsx)(A,{props:e,children:(0,M.jsx)(M.Fragment,{})}),action:()=>{}},...y])},0===f.length&&h.length>0&&{key:"hidden_properties",render:e=>(0,M.jsx)(A,{props:e,children:(0,M.jsx)(T,{collectionStore:o,property:n,disabled:s,menuListStore:d,visibleProperties:f,hiddenProperties:h,children:e.children})}),items:y}])})]}):null}},51194:(e,t,o)=>{o.d(t,{a:()=>i});var n=o(296540),r=()=>o(525128);function i(){const e=(0,n.useRef)(!1);return(0,r().E)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},63467:(e,t,o)=>{o.d(t,{y:()=>c});var n=()=>o(637997),r=()=>o(267419);const i={ko:()=>o.e(2268).then(o.bind(o,224434)),es:()=>o.e(95264).then(o.bind(o,196425)),de:()=>o.e(35390).then(o.bind(o,653703)),fr:()=>o.e(3272).then(o.bind(o,94677)),pt:()=>o.e(27315).then(o.bind(o,766869)),zh:()=>o.e(69945).then(o.bind(o,516814)),ja:()=>o.e(77757).then(o.bind(o,824432)),da:()=>o.e(9423).then(o.bind(o,440761)),fi:()=>o.e(59337).then(o.bind(o,462135)),nb:()=>o.e(2040).then(o.bind(o,937314)),nl:()=>o.e(51106).then(o.bind(o,530897)),sv:()=>o.e(53631).then(o.bind(o,895222))};let a=!1,s=!1;async function l(e){for(const[o,r]of Object.entries(e.emojiLocaleKeywords)){var t;n().fB[o]={...n().fB[o],keywords:[...r,...(null===(t=n().fB[o])||void 0===t?void 0:t.keywords)||[]]}}await r().A.waitUntilLoaded(),r().A.update((t=>{let{emojiByName:o,...n}=t;return{...n,emojiByName:{...o,...e.emojiByName}}}))}async function d(){if(a)return;const[e]=o(662303).locale.split("-");e in i&&(await l(await i[e]()),a=!0)}const c=(0,o(279900).A)((async()=>{await async function(){s||(await l(await o.e(51872).then(o.bind(o,443716))),s=!0)}(),await d()}))},64901:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(e){const t=(0,o(484714).v3)(),r=(0,o(401497).DP)();return(0,n.jsx)(o(187485).A,{style:{display:"flex",alignSelf:"stretch",width:36,...e.isRight?{marginRight:-8}:{marginLeft:-8}},external:!0,href:e.href,onClick:()=>o(148024).FH(t,{from:e.analyticsFrom}),children:(0,n.jsx)(o(704152).A,{mobileFeedback:!0,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,o(133033).$)({width:18,marginTop:1,fill:r.lightIconColor})})})}},87043:(e,t,o)=>{o.d(t,{Ev:()=>D,Bj:()=>L,Ay:()=>U});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(584262),l=()=>o(142748),d=()=>o(433847),c=()=>o(68263),u=()=>o(179034),p=()=>o(519831),m=()=>o(854150),g=()=>o(959013),f=()=>o(100622),h=()=>o(534177),b=()=>o(761652),v=()=>o(296798),y=()=>o(125565),S=()=>o(912913),I=()=>o(492414),C=()=>o(299545),x=()=>o(976721),R=()=>o(632709),P=()=>o(630116),w=()=>o(848237),k=()=>o(265665),M=()=>o(484578),_=()=>o(663590),A=()=>o(623275),j=o(474848);const T=function(e){const{store:t,isDisabled:o,isCurrentUserPermission:n}=e;return o?n?(0,j.jsx)(g().sA,{defaultMessage:"Your access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.tooltip",values:{inlineIconAndName:(0,j.jsx)(b().A,{store:t,useInvertedColors:!0})}}):(0,j.jsx)(g().sA,{defaultMessage:"This access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissions.tooltip",values:{inlineIconAndName:(0,j.jsx)(b().A,{store:t,useInvertedColors:!0})}}):n?(0,j.jsx)(g().sA,{defaultMessage:"Your access is based on {inlineIconAndName}. Changing your access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.canEdit.tooltip",values:{inlineIconAndName:(0,j.jsx)(b().A,{store:t,useInvertedColors:!0,maxLength:26})}}):(0,j.jsx)(g().sA,{defaultMessage:"This access is based on {inlineIconAndName}. Changing this access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissions.canEdit.tooltip",values:{inlineIconAndName:(0,j.jsx)(b().A,{store:t,useInvertedColors:!0,maxLength:26})}})},D=32,L=40,B=(0,g().YK)({fromLinkBox:{defaultMessage:"From {linkBoxWithPageTitle}",id:"pagePermissionItem.fromInheritedRecordPermissions.setting"}});function E(e){const{from:t,store:s,onClick:l,permissionItem:d,ignoreLocalHoverState:c,nonInheritedTooltip:g,inheritedTooltip:f,shouldDisable:b,isCollapsible:v,openRoleSelectMenuOnRender:y}=e,S=(0,r().Y0)(),I=(0,r().v3)(),C=(0,i().uB)(void 0,o(463830).A),x=(0,i().K8)((()=>{const e=t.table;return e===u().ev?P().Bv.createChildStore(s,{table:u().ev,id:t.blockId}):e===m().yK?P().h4.createChildStore(s,{table:m().yK,id:t.teamId}):e===p().Vl?P().md.createChildStore(s,{table:p().Vl,id:t.collectionId}):void(0,h().HB)(e)}),[t,s]),R=(0,i().K8)((()=>(0,_().FI)()),[]),[w,k]=(0,n.useState)(!1),D=(0,n.useCallback)((()=>{C.setState({...C.state,open:!0}),k(!0)}),[C]),L=(0,n.useCallback)((()=>{k(!1)}),[]);(0,n.useEffect)((()=>{y&&!C.state.open&&requestAnimationFrame((()=>{D()}))}),[y,D,C]);const B=R&&w,E=(0,i().K8)((()=>b||(0,M().dK)({permissionItem:d,store:s})),[b,d,s]),O=(0,i().K8)((()=>x.id!==s.id),[x,s]),V=(0,o(649145).L)((e=>{l?l(e):E||C.setState({...C.state,open:!0})}),[C,l,E],o(753199).y$.PermissionItemClick),N=(0,i().K8)((()=>{const e=I.currentUser.id;return"user_permission"===d.type&&d.user_id===e}),[I,d]),U=(0,i().K8)((()=>B?null:R?O?f||(0,j.jsx)(T,{store:x,isDisabled:E,isCurrentUserPermission:N}):g:(0,M().YY)(d)||(0,M().rC)(d)?null:O?(0,j.jsx)(T,{store:x,isDisabled:E,isCurrentUserPermission:N}):g),[R,d,O,g,f,x,E,N,B]),Q=(0,a().IS)((t=>{const o=R?{...(0,A().wo)({isMobile:S.isMobile}),...e.menuListItemProps?{width:"unset"}:{}}:{};return{disabledButton:{...o,cursor:"not-allowed"},button:o,pressedButton:{background:t.buttonPressedBackgroundLight},tooltip:{maxWidth:240}}}),[S.isMobile,R,e.menuListItemProps]);return(0,j.jsx)(o(859428).A,{delayThreshold:0,renderTooltip:()=>U,textWrap:!0,disableTooltip:!Boolean(U)||B,forceRenderTooltipPopupComponent:R&&Boolean(U),style:Q.tooltip,render:t=>{const n=(0,o(553965).A)(t,{onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave});return e.menuListItemProps?(0,j.jsx)(o(760217).A,{...e.menuListItemProps,onClick:V,disabled:E,ignoreLocalHoverState:c,pressed:!1,buttonStyle:E&&!R?Q.disabledButton:Q.button,textWrapperStyle:{marginLeft:0,marginRight:0},style:{padding:0},title:(0,j.jsx)(F,{...e,isDisabled:E,fromStore:x,buttonPopupStore:C,isInherited:O,onOpenMenu:D,onClose:L}),...n}):(0,j.jsx)(o(704152).A,{disabled:E&&!v,mobileFeedback:S.isMobile,ignoreLocalHoverState:c,style:E&&!R?Q.disabledButton:Q.button,pressedStyle:R?Q.pressedButton:void 0,onClick:V,...n,children:(0,j.jsx)(F,{...e,isDisabled:E,fromStore:x,buttonPopupStore:C,isInherited:O,onOpenMenu:D,onClose:L})})},placement:o(962730).W.Left})}function F(e){const{permissionItem:t,fromStore:o,isCompact:s,iconStyle:l,icon:d,title:c,tag:u,subtitle:p,showInherited:m,isInherited:g,permissionRoleSelect:f,hideRoleSelectButton:b,renderTitleWithoutUILabelWrapper:v,onClose:S,style:I}=e,C=(0,r().v3)(),x=C.device.isMobile,R=(0,i().K8)((()=>function(e){return"user_permission"===e.type}(t)),[t]),w=(0,i().K8)((()=>(0,_().FI)()),[]),{paddingLeft:M,paddingRight:T}=(0,i().K8)((()=>({paddingLeft:C.WindowSizeStore.getSafePaddingLeftCSS(w?x?0:8:14),paddingRight:C.WindowSizeStore.getSafePaddingRightCSS(w?x?0:8:14)})),[C.WindowSizeStore,x,w]),D=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",minHeight:s?44:w?void 0:52,...w?{height:x?void 0:A().CJ}:void 0,paddingTop:x&&w?12:8,paddingBottom:x&&w?12:8,paddingLeft:M,paddingRight:T,...I},icon:{flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",width:w&&x?40:32,height:w&&x?40:32,marginRight:(0,A().qj)({isMobile:x}),...l},title:{marginRight:"auto",minWidth:0},labelWrapper:{display:"flex",flexDirection:"row"},label:{fontWeight:400},tag:{marginLeft:4},roleSelect:{display:"flex",alignItems:"center",flexShrink:0,marginLeft:8},button:{color:e.mediumTextColor,fontSize:x?14:12}})),[s,M,T,x,l,w,I]),L=(0,n.useMemo)((()=>b?null:function(e){return"display_only_overview_permission"===e.type||"display_only_hidden_permission"===e.type||"display_only_inherited_permission"===e.type||"display_only_group_member_permission"===e.type}(t)?f:e.store instanceof P().Bv?(0,j.jsx)(O,{...e,onClose:S,permissionItem:t}):e.store instanceof P().md?(0,j.jsx)(V,{...e,store:e.store,onClose:S,permissionItem:t}):void(0,h().HB)(e.store)),[b,t,e,f,S]);return(0,j.jsxs)("div",{className:"notranslate",style:D.container,children:[(0,j.jsx)("div",{style:D.icon,children:d}),(0,j.jsxs)("div",{style:D.title,children:[(0,j.jsxs)("div",{style:D.labelWrapper,children:[v?c:(0,j.jsx)(y().A,{style:R?void 0:D.label,children:(0,j.jsx)(k().j,{children:c})}),u&&(0,j.jsx)("div",{style:D.tag,children:u})]}),p&&(0,j.jsx)(y().A,{style:e.subtitleStyle,isSmall:!0,children:p}),m&&g&&(0,j.jsx)(N,{store:o})]}),L?(0,j.jsx)("div",{style:D.roleSelect,children:L}):null]})}function O(e){const{isInherited:t,permissionItem:o,store:s,from:p,isDisabled:m,sudoModeStore:g,location:f,fromPermissionWrapper:h,onUpgradeButtonClick:b,onChange:v,onClose:y,onOpenMenu:I,upgradeButtonName:C,buttonPopupStore:R,isRemovableOverride:w,onChangeSuccess:k}=e,M=(0,r().v3)(),T=(0,i().K8)((()=>{var e;const t=s.getModel(),n=null===(e=s.getParentStore())||void 0===e?void 0:e.getModel();return(0,d().tp)({record:t,parent:n,from:p,permissionItem:o})?(0,d().SK)({ancestors:l().Yn(s.pointer,s.getRecordModel),from:p}):o.role}),[p,o,s]),D=(0,i().K8)((()=>(0,_().FI)()),[]),L=(0,i().K8)((()=>s instanceof P().Bv?s.getType():void 0),[s]),B=(0,i().K8)((()=>{const e=M.currentUser.id;return c().B2(o)&&o.user_id===e}),[M,o]),E=(0,n.useCallback)((async e=>{let n=!1;const r={...o};r.role=T,n=v?await v(e):await(0,x().o5)({oldPermissionItem:r,newRole:e,wasInherited:t,environment:M,store:s,sudoModeStore:g,location:f,fromPermissionWrapper:h}),n&&(null==k||k(e))}),[o,T,t,M,s,g,f,h,v,k]),F=(0,a().IS)((e=>({button:{color:e.mediumTextColor,fontSize:(0,A().kx)({environment:M,isRedesignEnabled:D})}})),[M,D]);return(0,j.jsx)(S().Ay,{role:T,table:u().ev,blockType:L,type:o.type,disabled:m,isUserPermission:B,onChange:E,onClick:D?I:void 0,onClose:D?y:void 0,onUpgradeButtonClick:b,upgradeButtonName:C,buttonPopupStore:R,buttonStyle:F.button,showPermissionOverrideWarning:t&&!e.selectFooter,isRemovableOverride:w,footer:e.selectFooter,roleItemOverrides:e.roleItemOverrides,from:"shareMenu",header:e.selectHeader})}function V(e){const{isInherited:t,permissionItem:o,store:s,from:u,isDisabled:m,sudoModeStore:g,location:f,fromPermissionWrapper:h,onUpgradeButtonClick:b,onChange:v,onClose:y,onOpenMenu:I,upgradeButtonName:C,buttonPopupStore:R,isRemovableOverride:P,onChangeSuccess:w}=e,k=(0,r().v3)(),M=(0,i().K8)((()=>{var e;const t=s.getModel(),n=null===(e=s.getParentStore())||void 0===e?void 0:e.getModel();return(0,d().tp)({record:t,parent:n,from:u,permissionItem:o})?(0,d().SK)({ancestors:l().Yn(s.pointer,s.getRecordModel),from:u}):o.role}),[u,o,s]),T=(0,i().K8)((()=>(0,_().FI)()),[]),D=(0,i().K8)((()=>{const e=k.currentUser.id;return c().B2(o)&&o.user_id===e}),[k,o]),L=(0,n.useCallback)((async e=>{let n=!1;const r={...o};r.role=M,n=v?await v(e):await(0,x().o5)({oldPermissionItem:r,newRole:e,wasInherited:t,environment:k,store:s,sudoModeStore:g,location:f,fromPermissionWrapper:h}),n&&(null==w||w(e))}),[o,M,t,k,s,g,f,h,v,w]),B=(0,a().IS)((e=>({button:{color:e.mediumTextColor,fontSize:(0,A().kx)({environment:k,isRedesignEnabled:T})}})),[k,T]);return(0,j.jsx)(S().Ay,{role:M,table:p().Vl,blockType:void 0,type:o.type,disabled:m,isUserPermission:D,onChange:L,onClick:T?I:void 0,onClose:T?y:void 0,onUpgradeButtonClick:b,upgradeButtonName:C,buttonPopupStore:R,buttonStyle:B.button,showPermissionOverrideWarning:t&&!e.selectFooter,isRemovableOverride:P,footer:e.selectFooter,roleItemOverrides:e.roleItemOverrides,from:"shareMenu",header:e.selectHeader})}function N(e){const{store:t}=e,o=(0,r().v3)(),l=(0,g().tz)(),d=(0,i().K8)((()=>{if(t.table===u().ev)return(0,I().Ay)({store:t,fullyQualified:!1,pageVisitSource:s().y8.LinkInPage})}),[t]),c=(0,i().K8)((()=>(0,C().$R)(t)),[t]),p=(0,n.useCallback)((()=>{w().F2({environment:o,teamId:t.id,tab:R().p.Members,from:"permission_item"})}),[t.id,o]),m=(0,a().IS)((e=>({label:{lineHeight:1.4},linkBox:{display:"inline-flex",alignItems:"center",borderBottom:`0.5px solid ${f().Ay.mediumTextColor}`}})),[]);return(0,j.jsx)(y().A,{isSmall:!0,style:m.label,children:l.formatMessage(B.fromLinkBox,{linkBoxWithPageTitle:(0,j.jsx)(v().A,{inline:!0,href:d,onClick:c?p:void 0,innerStyle:m.linkBox,children:(0,j.jsx)(b().A,{store:t,useInvertedColors:!1})})})})}const U=n.memo(E)},99756:(e,t,o)=>{o.d(t,{A:()=>d});var n=o(296540),r=()=>o(401497),i=()=>o(87043),a=o(474848);function s(e){let{type:t,isMobile:n,containerStyle:s,iconSize:d,...c}=e;const u=d??20,p=(0,r().IS)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"center",...(0,o(623275).iM)({theme:e,size:d??(n?i().Bj:i().Ev),useLargeBorderRadius:!0,useLightBackgroundColor:!0}),..."circle"===t&&{borderRadius:"100%"},...s}})),[s,n,t,d]);return(0,a.jsx)("div",{style:p.container,children:"function"===c.iconType?(0,a.jsx)(l,{iconFn:c.iconFn,iconStyle:c.iconStyle,innerIconSize:u}):"emoji"===c.iconType?(0,a.jsx)(o(56086).A,{char:c.emoji,size:u}):"recordIcon"===c.iconType?(0,a.jsx)(o(614505).A,{icon:c.icon,disabled:!0,isEmptyPage:!1,size:u,defaultIcon:(0,o(658985).$)()}):c.element})}function l(e){let{iconFn:t,iconStyle:o,innerIconSize:n}=e;return t((0,r().IS)((e=>({icon:{width:n,height:n,fill:e.mediumIconColor,...o}})),[o,n]).icon)}const d=n.memo(s)},132456:(e,t,o)=>{o.d(t,{J4:()=>x,kw:()=>C,lf:()=>R});o(16280),o(816573),o(878100),o(177936),o(748140),o(821903),o(491134),o(128845),o(237467),o(444732),o(979577),o(581454);var n=o.n(o(883503)),r=()=>o(496603),i=()=>o(720665),a=()=>o(416845),s=()=>o(628536),l=()=>o(96689);const d={version:8,notion_version:0,variant:2},c={version:8,notion_version:1,variant:2},u=0,p=1,m=6,g=8,f=10,h=Date.UTC(2024,0,1);function b(e,t){if(e)return t[u]=255,t[u+1]=240|15&t[u+1],t;const o=Math.floor(((new Date).getTime()-h)/i().nD);if(o>=4096||o<0)throw new Error("Invalid offsetInDays.");return t[u]=o>>4,t[u+1]=o<<4&240|15&t[u+1],t}function v(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[p]=240&t[p]|e/2**32&15;for(let o=0;o<4;o++)t[p+1+o]=e/2**(24-8*o)&255;return t}function y(e,t){const o=e?1:0;return t[m]=d.version<<4&240|d.notion_version<<1&14|1&o,t[g]=d.variant<<6&192|63&t[g],t}function S(e,t){if("block"===e)return t[f]=(0,s().vi)(e)|63&t[f],t;const o=(0,s().vi)(e);return t[f]=o>>8&127,t[f+1]=255&o,t}function I(e,t){const o=(0,s().TG)(e);return t[f]=127&o|128&t[f],t}function C(e,t,o,n){const r=new Uint8Array(16),i=globalThis.crypto.getRandomValues(r);return o!==l().NX&&b(e,i),v(t,i),y(n,i),S(o,i),k(i)}function x(e,t,o,n){return C(e,t,o,n)}function R(e,t,o){return P(e,t,o)}function P(e,t,o){const i=n()(o),l=r().iv(i,2).map((e=>parseInt(e.join(""),16)));if((0,s().ep)(t)){if(void 0===e)throw new(a().Um)(`Deterministic ID for '${t}' must specify a space short id`)}else if(void 0!==e)throw new(a().Um)(`Deterministic ID for '${t}' should not provide a space short id`);const d=new Uint8Array(l);return e&&v(e,d),I(t,d),function(e){e[m]=240&c.version<<4|14&c.notion_version<<1|1&e[m],e[g]=192&c.variant<<6|63&e[g]}(d),k(d)}const w=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function k(e){let t=0;return w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]}},135599:(e,t,o)=>{o.d(t,{W:()=>z});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454),o(737550);var n=o(296540),r=()=>o(395361),i=()=>o(484714),a=()=>o(56366),s=()=>o(721908),l=()=>o(474424),d=()=>o(591779),c=()=>o(206267),u=()=>o(207289),p=()=>o(519831),m=()=>o(245241),g=()=>o(959013),f=()=>o(496603),h=()=>o(973647),b=()=>o(534177),v=()=>o(720665),y=()=>o(449506),S=()=>o(518362),I=()=>o(989423),C=()=>o(148777),x=()=>o(825972),R=()=>o(71304),P=()=>o(780865),w=()=>o(470928),k=()=>o(722038),M=()=>o(406792),_=()=>o(106628),A=()=>o(361330),j=()=>o(109054),T=()=>o(351360),D=()=>o(227440),L=()=>o(508496),B=()=>o(968172),E=()=>o(20199),F=()=>o(558407),O=()=>o(630116),V=()=>o(645873),N=()=>o(963589),U=()=>o(531770);function Q(){return{query:void 0,localResults:[],numTotalLocalResults:0,serverResults:[],numTotalServerResults:0,searchSessionId:(0,c().JW)(),isResultsLoading:!1}}function z(e){var t;const{searchQuery:o,limit:c,source:z,type:H,ancestorId:q,disable:G,overrideSpaceStore:Z,overrideSearchSessionId:Y,usePrefetch_EXPERIMENTAL:$,isTitleOnly:J=!0}=e,X=(0,i().v3)(),ee=(0,g().tz)(),te=(0,d().ZC)(o),oe=(0,d().ZC)(e.filters),ne=(0,n.useRef)({number:0,query:""}),re=(0,n.useCallback)((e=>{const t=ne.current.query.trim(),o=e.trim();""!==o&&t!==o&&(ne.current.number+=1,ne.current.query=o)}),[]),ie=(0,r().Y)(re,A().ab),ae=(0,n.useRef)(!0),se=(0,a().K8)((()=>D().A.state.online),[]),le=(0,a().K8)((()=>e.isLocalOnlyMode||!se),[se,e.isLocalOnlyMode]),de=(0,k().y)(),[ce,ue]=(0,n.useState)(Q()),pe=(0,a().K8)((()=>Y&&Y!==ce.searchSessionId?(ue((e=>({...e,searchSessionId:Y}))),Y):ce.searchSessionId),[ce,Y]),me=(0,N().X)("unified_find_cache_query_gen"),ge=(0,N().X)("quick_find_highlights_enabled"),{searchLocalResults:fe,searchServerResults:he,isResultsLoading:be,numTotalLocalResults:ve,numTotalServerResults:ye}=(0,a().K8)((()=>({searchLocalResults:ce.localResults,searchServerResults:ce.serverResults,isResultsLoading:ce.isResultsLoading,numTotalLocalResults:ce.numTotalLocalResults,numTotalServerResults:ce.numTotalServerResults})),[ce]),Se=(0,a().K8)((()=>{if(le||be&&ae.current)return fe;let e=function(e){const{localResults:t,serverResults:o}=e,n=t.map((e=>e.store.id)),r=new Set(n),i=o.filter((e=>!r.has(e.store.id)));return[...t,...i]}({localResults:fe,serverResults:he});return H===m().Vz.CollectionsInSpace&&(e=K(e)),e}),[le,be,fe,he,H]),Ie=(0,a().K8)((()=>Z||T().default.state.currentSpaceStore),[Z]),Ce=(0,a().K8)((()=>"on"===L().default.getEligibleGroup({experimentId:"search-use-local-reranker-layered",parameter:"shouldUseLocalReranker",defaultGroup:"control"})),[]),xe=(0,a().K8)((()=>le&&se&&Boolean($)),[le,se,$]),Re=(0,a().K8)((()=>(0,P().Er)(X).hasPublicAccessPermission),[X]),Pe=(0,n.useMemo)((()=>{const t={navigableBlockContentOnly:J,...e.filters};return(0,m().N2)(t)}),[e.filters,J]),we=(0,n.useMemo)((()=>{var t;return function(e){const{blockTypes:t,queryType:o}=e;switch(o){case m().Vz.CollectionsInSpace:return["collection_view","collection_view_page"];case m().Vz.BlocksInCollection:return["page","collection_view_page"];case m().Vz.BlocksInSpace:default:return[...t??[]]}}({blockTypes:null===(t=e.filters)||void 0===t?void 0:t.blockTypes,queryType:H})}),[null===(t=e.filters)||void 0===t?void 0:t.blockTypes,H]),ke=(0,n.useCallback)(((e,t)=>{const{isSuccess:o,totalResultsCount:n,localCacheMetadata:r,query:i}=t;M().default.measure(e,{environment:X,data:{start_time:e.startTime,success:o,surface:z,num_results:n,search_session_id:pe,local_cache_metadata:r,local_cache_readiness_timings:(0,C().Yp)(),query_length:i.length}})}),[X,z,pe]),Me=(0,n.useCallback)(((e,t)=>{const{isSuccess:o,totalResultsCount:n,query:r}=t;M().default.measure(e,{environment:X,data:{start_time:e.startTime,success:o,surface:z,num_results:n,search_session_id:pe,search_session_flow_number:ne.current.number,query_length:r.length}})}),[X,z,pe]),_e=(0,a().K8)((()=>E().A.state.localSearchableBlocksCache),[]),Ae=(0,V().fJ)(_().T.searchActions),je=(0,n.useCallback)((e=>{const t=M().default.mark("rum.local_quick_search_query"),{query:o,spaceStore:n}=e,r=de&&!se&&(0,b().Xk)(m().Iy,z);if("resolved"!==Ae.status)return;const i=H===m().Vz.CollectionsInSpace;let a=[];0===o.length&&i&&(a=function(e){const{spaceStore:t,environment:o}=e,n=(0,S().F)({currentUserId:o.currentUser.id,spaceId:t.id}).map((e=>{const o=O().md.createChildStore(t,{table:p().Vl,id:e}).getParentBlockStore();if(null==o?void 0:o.pathIsAccessibleAndAlive())return o}));return(0,f().oE)(n)}({environment:X,spaceStore:n}).map(((e,t)=>({store:e,originalPosition:t,id:e.id,score:0,spaceId:e.getSpaceId(),sources:[m().Ni.Local],featureGroups:[],serverEventProperties:void 0}))));const s=(0,C().PE)({environment:X,overrideCurrentUserId:X.currentUser.id,overrideSpaceId:n.id,overrideLocalSearchableBlocksCache:_e}),l=(0,U().S6)({environment:X,parentStore:n,isOnline:se,requestInput:{query:{text:o,filters:{...Pe,blockTypes:we,isOfflineOnly:r},sort:{field:"relevance"}},limit:le?c:Math.min(c,5)},localSearchCache:_e,shouldUseNewRerankerDebugOverrideEnabled:Ce,shouldLimitLocalResultsWhenOnline:!le,hasPublicAccessPermission:Re}),d=xe?W({query:o,serverResults:Ke.current}):[],u=l&&h().Q.unwrapOr(l,void 0),g=(null==u?void 0:u.results)??[],v=(null==u?void 0:u.total)??0;let y=f().hS([...a,...g,...d],(e=>e.id));y=i?K(y):y,ue((e=>e.query!==o?e:(qe.current=y.map((e=>e.id)),ke(t,{query:o,isSuccess:Boolean(u),totalResultsCount:v,localCacheMetadata:s}),ie(o),{...e,localResults:y,isResultsLoading:!le&&e.isResultsLoading,numTotalLocalResults:v})))}),[de,se,z,Ae.status,H,X,Pe,we,le,c,Ce,Re,xe,ke,ie,_e]),Te="mini_quick_find"===z?40:A().GR,De=(0,r().Y)(je,Te),Le=(0,n.useCallback)((e=>{y().callApi({eventName:"warmSearchQueryCache",environment:X,data:{spaceId:(null==Ie?void 0:Ie.id)??"",query:e.query,searchSessionId:pe}})}),[X,Ie,pe]),Be=(0,r().Y)(Le,200),Ee=(0,n.useCallback)((e=>{const{result:t,isMetaClick:n,context:r}=e,i=(0,R().Qe)(t.store,ee,X,!1),a=(0,j().u)({query:o,resultText:i??"",isLastQueryTermPartialMatchOK:!0}),s=T().default.state.currentSpaceStore,l=Boolean(null==s?void 0:s.getSettings().enable_ai_training);(0,I().u4)({environment:X,event:{eventName:"select_search_item",eventProperties:{sources:t.sources,localSources:Array.from(t.localSource||new Set),searchSessionId:pe,aiSessionId:void 0,searchSessionFlowNumber:ne.current.number,context:r,queryStringLength:o.length,isTitleMatch:a,queryIfLeap:l?o:void 0,totalSearchResultCount:ve+ye,numLocalResults:fe.length,numTotalLocalResults:ve,isMobile:X.device.isMobile,isMetaClick:n,hasFilters:Boolean(Pe),originalPosition:t.originalPosition,selectedItemIndex:t.originalPosition,selectedSearchResultMetadata:{blockId:t.id,blockType:t.store.getModel().type},searchSource:z,verificationState:(0,w().i1)(t.store)}}})}),[X,ve,ye,fe,o,pe,ne,Pe,z,ee]),Fe=te===o,Oe=f().n4(oe,e.filters),Ve=Boolean(te&&!o),Ne=Oe&&Fe,Ue=!G&&Ie&&!Ne,Qe=Ve||!Oe,ze=(0,n.useRef)(!1),We=(0,n.useRef)([]),Ke=(0,n.useRef)([]),He=(0,n.useRef)([]),qe=(0,n.useRef)([]),Ge=(0,a().K8)((()=>{if("mention_menu"!==z)return;return F().A.getMentionedIds(X.currentUser.id)}),[X.currentUser.id,z]),Ze=(0,n.useCallback)((async e=>{const t=M().default.mark("rum.server_quick_search_query"),{query:o,spaceStore:n,size:r}=e,i=n.id;if(le&&!xe)return;const a=!ae.current&&Oe?We.current:[],s=xe?W({query:o,serverResults:Ke.current}):[];if(xe&&(o.length<=1||s.length>=5||He.current.some((e=>e===o))))return;He.current.push(o);const d=await y().callApi({eventName:"search",environment:X,data:{...H===m().Vz.BlocksInAncestor?{type:H,ancestorId:q??"",spaceId:i}:{type:H,collectionId:(null==Pe?void 0:Pe.parentId)??"",spaceId:i},query:o,spaceId:i,limit:"mini_quick_find"===z?10:r+1,filters:Pe,sort:{field:"relevance"},source:z,searchSessionId:pe,searchSessionFlowNumber:ne.current.number,recentlyMentionedPageIds:Ge,recentPagesForBoosting:(0,x().cs)(B().A.getWithoutSubscribing(i)),excludedBlockIds:f().sb([...a.map((e=>e.id)),...qe.current||[],...Ke.current.map((e=>e.id))]),ignoresHighlight:!ge||"mini_quick_find"!==z}});if(!d||"failed"===d.type)return;const c=d.data.total,p=(0,v().MU)((0,b().WP)(d.data.trackEventProperties).map((e=>{let[t,o]=e;return[`server-${t}`,o]}))),g=d.data.results.slice(0,r).map(((e,t)=>{const o=O().Bv.createChildStore(n,{id:e.id,spaceId:e.spaceId,table:"block"}),r=xe?function(e){const{result:t,store:o,environment:n}=e;if(t.terms)return t.terms;const r=o.getModel();if(!r)return[];const i=n.defaultRecordCache.inMemoryRecordCache.makeGetRecordValueFn(n.currentUser.id),a=(0,u().KM)((0,l().g)({blockValue:r,getRecordValue:i}).text);if(!a)return[];return(0,j().N)(a)}({environment:X,store:o,result:e}):e.terms;return{store:o,originalPosition:t,...e,serverEventProperties:p,terms:r}}));ze.current=!(c<=r);const h=[...a,...g];We.current=h,Ke.current=f().hS([...xe?g:[],...Ke.current],(e=>e.id)),xe||(ue((e=>e.query!==o?e:(Me(t,{query:o,isSuccess:"success"===d.type,totalResultsCount:c}),{...e,serverResults:h,isResultsLoading:!1,numTotalServerResults:c}))),ie(o))}),[le,xe,Oe,X,H,q,Pe,z,pe,Ge,qe,ie,Me,ge]),Ye=(0,n.useCallback)((e=>{!G&&Ie&&ze.current&&!be&&se&&(ue((e=>({...e,isResultsLoading:!0}))),ze.current=!1,ae.current=!1,Ze({query:o,spaceStore:Ie,size:e??20}))}),[Ie,G,Ze,se,be,o]),$e="mini_quick_find"===z?100:A().ab,Je=(0,s().d)(Ye,$e),Xe=(0,r().Y)(Ze,xe?0:A().ab);return(0,n.useEffect)((()=>{Qe&&(ue((e=>({...Q(),searchSessionId:e.searchSessionId}))),Ke.current=[],He.current=[]),Ue&&(ae.current=!0,ue((e=>({...e,isResultsLoading:!0,query:o}))),De({query:o,spaceStore:Ie}),Xe({query:o,spaceStore:Ie,size:c}),"mini_quick_find"===z&&me&&Be({query:o}))}),[Ie,De,Xe,Be,c,o,Ue,Qe,z,me]),{results:Se,isResultsLoading:be,searchSessionId:pe,fetchAdditionalServerResultsOnChange:!G&&!le&&ze.current&&Ne?Je:void 0,searchSessionFlowNumber:ne.current.number,hasMoreResults:ze.current,searchAnalytics:{trackSelectSearchItem:Ee}}}function W(e){const{query:t,serverResults:o}=e;return t?o.filter((e=>(0,j().u)({query:t,resultText:(e.terms??[]).join(" "),isLastQueryTermPartialMatchOK:!0}))):[]}function K(e){const t=new Set;return e.filter((e=>{const o=e.store.getCollectionViewSourceCollectionStore();return!(!o||t.has(o.id))&&(t.add(o.id),!0)}))}},155090:(e,t,o)=>{o.d(t,{default:()=>Mo});o(944114),o(898992),o(354520),o(672577),o(803949),o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(584262),l=()=>o(66689),d=()=>o(31503),c=()=>o(970013),u=()=>o(713998),p=()=>o(329199),m=()=>o(921940),g=()=>o(617871),f=()=>o(416504),h=()=>o(187174),b=()=>o(689094),v=()=>o(179034),y=()=>o(96689),S=()=>o(245241),I=()=>o(441738),C=()=>o(959013),x=()=>o(299709),R=()=>o(970330),P=()=>o(989423);function w(e,t){P().vd(e,"relation_add_block",t)}function k(e,t){P().vd(e,"relation_database_click",t)}var M=()=>o(727395),_=()=>o(846156),A=()=>o(449506),j=()=>o(884107),T=()=>o(901389),D=()=>o(870578),L=()=>o(435009),B=()=>o(606952),E=()=>o(317909),F=()=>o(633457),O=()=>o(655424),V=()=>o(41459),N=()=>o(760217),U=()=>o(297872),Q=()=>o(419357),z=()=>o(928600),W=()=>o(64e3),K=()=>o(14235),H=()=>o(614505),q=()=>o(16006),G=()=>o(89924),Z=()=>o(64901),Y=()=>o(287531),$=o(474848);function J(e){const{targetCollectionStore:t,title:o,onClick:s,focused:l,isSection:d,index:c,parentBlockStore:u}=e,p=(0,i().K8)((()=>t.canEdit()),[t]),m=(0,i().K8)((()=>t.isSyncedCollection()),[t]),g=(0,i().K8)((()=>u.canEdit()),[u]),f=(0,r().Y0)(),h=(0,a().IS)((e=>({wrapper:{borderTop:`1px solid ${e.lightDividerColor}`,paddingTop:4,paddingBottom:4},row:{fontSize:f.isMobile?16:14,minHeight:f.isMobile?44:32}})),[f]),{format:b}=(0,n.useContext)(O().t);if(b===V().j.FormEditor||b===V().j.FormViewer)return null;if(!p||!g)return null;const v=(0,$.jsx)(Y().A,{targetCollectionStore:t,pageName:o,onClick:()=>s(c),style:h.row,focused:l});return m?(0,$.jsx)($.Fragment,{}):d?(0,$.jsx)(G().A,{style:h.wrapper,disableDesktopPadding:!0,disableMobilePadding:!0,children:v}):v}var X=()=>o(175116),ee=()=>o(886680),te=()=>o(572088),oe=()=>o(476492),ne=()=>o(594794),re=()=>o(972435),ie=()=>o(722872),ae=()=>o(685889),se=()=>o(836251),le=()=>o(780865),de=()=>o(806401),ce=()=>o(135599),ue=()=>o(963589),pe=()=>o(406792),me=()=>o(361330),ge=()=>o(562800),fe=()=>o(351360),he=()=>o(508496),be=()=>o(53137),ve=()=>o(630116),ye=()=>o(749240);const Se=(0,C().YK)({syncedCollectionInputPlaceholder:{defaultMessage:"Link a page",id:"relationPropertyMenuInput.syncedCollection.searchPlaceholder"},connectedRelationInputPlaceholder:{defaultMessage:"Find a page",id:"relationPropertyMenuInput.connectedRelation.searchPlaceholder"},connectedRelationGoogleDriveInputPlaceholder:{defaultMessage:"Select a file from your Google Drive",id:"relationPropertyMenuInput.connectedRelationGoogleDrive.searchPlaceholder"},connectedRelationFigmaInputPlaceholder:{defaultMessage:"Paste in https://figma.com/...",id:"relationPropertyMenuInput.connectedRelationFigma.searchPlaceholder"},connectedRelationGithubInputPlaceholder:{defaultMessage:"Paste in https://github.com/...",id:"relationPropertyMenuInput.connectedRelationGithub.searchPlaceholder"}}),Ie=(0,C().YK)({inputPlaceholderEditable:{defaultMessage:"Link or create a page…",id:"relationPropertyMenuInput.placeholder.defaultEditable"},formInputPlaceholderEditable:{defaultMessage:"Search…",id:"relationPropertyMenuInput.placeholder.form"},inputPlaceholderUneditable:{defaultMessage:"Search linked pages…",id:"relationPropertyMenuInput.placeholder.defaultUneditable"}}),Ce=(0,C().YK)({inputPlaceholder:{defaultMessage:"Search {propertyName}...",id:"relationPropertyMenuInput.placeholder.sharing"}}),xe=(0,C().YK)({inputPlaceholder:{defaultMessage:"Search...",id:"relationPropertyMenuInput.placeholder.sprint"}});function Re(e){let{intl:t,connectedRelationFlags:o,overlayMode:n,disabled:r,format:i}=e;const a=function(e){const{isSyncedCollectionRelation:t,isGithubPrRelation:o,isGoogleDriveRelation:n,isFigmaRelation:r,isConnectedRelation:i}=e;if(t)return Se.syncedCollectionInputPlaceholder;if(o)return Se.connectedRelationGithubInputPlaceholder;if(n)return Se.connectedRelationGoogleDriveInputPlaceholder;if(r)return Se.connectedRelationFigmaInputPlaceholder;if(i)return Se.connectedRelationInputPlaceholder}(o);return a?t.formatMessage(a):"view"===(null==n?void 0:n.type)||r?t.formatMessage(Ie.inputPlaceholderUneditable):i&&(0,ee().NN)(i)?t.formatMessage(Ie.formInputPlaceholderEditable):t.formatMessage(Ie.inputPlaceholderEditable)}function Pe(e,t){return e.formatMessage(Ce.inputPlaceholder,t)}o(16280),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var we=()=>o(857639),ke=()=>o(229833),Me=()=>o(106628),_e=()=>o(122724);async function Ae(e){let{environment:t,query:o,targetCollectionStore:n,blockPointers:r}=e;try{const e=await Me().T.searchActions.load(),{results:i}=await e.searchPagesInCollection({environment:t,query:o.query,collectionId:n.id,limit:o.limit,spaceId:n.getSpaceId(),excludeTemplates:!0,source:"relation_menu",includePublicPagesWithoutExplicitAccess:!0,boostRecentlyViewedPages:!0,ignoresHighlight:!0});return Te({results:i,targetCollectionStore:n,blockPointers:r})}catch(i){return we().log({level:"error",from:"relationPropertySearchRequest",type:"performDefaultSearchRequest",error:(0,ke().n6)(i)}),[]}}async function je(e){const{environment:t,query:o,targetCollectionStore:n,blockPointers:r}=e;try{const e=await async function(e){const{environment:t,sprintCollectionStore:o,searchQuery:n}=e,r=o.getPropertyMapping(),i=null==r?void 0:r[l().Hx.StatusV2],a=null==r?void 0:r[l().Hx.Dates];if(!i||!a)throw new Error("Sprints database does not have the required properties");const s="results",d={userTimeZone:(0,f().P)(),searchQuery:n,sort:[{property:i,direction:"ascending"},{property:a,direction:"ascending"}],reducers:{[s]:{type:"results",limit:100}}},c=o.getParentBlockStore();if(!c)return[];await c.load();const u=c.getCollectionViewStores()[0];if(!u)return[];const p=o.getSpaceId(),m=await A().callApi({eventName:"queryCollection",environment:t,data:{source:{type:"collection",id:o.id,spaceId:p},collectionView:{id:u.id,spaceId:p},loader:d},tracking:{src:"relation_property_menu"}});if("success"!==m.type)return[];const g=m.data.result.reducerResults[s];if("results"!==g.type)return[];return g.blockIds}({environment:t,sprintCollectionStore:n,searchQuery:o.query});return Te({results:e,targetCollectionStore:n,blockPointers:r})}catch(i){we().log({level:"error",from:"relationPropertySearchRequest",type:"performSprintSearchRequest",error:(0,ke().n6)(i)});return await Ae(e)}}function Te(e){let{results:t,targetCollectionStore:o,blockPointers:n}=e;const r=new Set(n.map((e=>e.id))),i=[];return t.forEach((e=>{const t={spaceId:o.getSpaceId(),id:e,table:v().ev},n=ve().Bv.createChildStore(o,t);if(r.has(e)){const t={key:e,type:_e().M7.SelectedPage,store:n};i.push(t)}else{const t={key:e,type:_e().M7.SearchPage,store:n};i.push(t)}})),i}const De=(0,n.createContext)(void 0);function Le(e){const{children:t,relationPropertyMenuStore:o,property:r,targetCollectionStore:i,propertySchema:a,targetParentUrl:s,connectedRelationFlags:l}=e,d=(0,n.useMemo)((()=>({relationPropertyMenuStore:o,property:r,targetCollectionStore:i,propertySchema:a,targetParentUrl:s,connectedRelationFlags:l})),[o,r,i,a,s,l]);return(0,$.jsx)(De.Provider,{value:d,children:t})}De.displayName="RelationPropertyMenuContext";var Be=()=>o(768627),Ee=()=>o(284371),Fe=()=>o(522986),Oe=()=>o(623580),Ve=()=>o(296798);function Ne(e){const{showTargetDatabase:t,inputPlaceholder:o,addPage:s}=e,{analyticsFrom:l,blockPropertyValueOverlayStore:d,blockStore:c,insertChar:u}=(0,n.useContext)(O().t),p=(0,n.useContext)(De),m=(0,r().v3)(),g=(0,r().Y0)(),{searchQuery:f,searchPopupOpen:h}=(0,i().K8)((()=>(null==p?void 0:p.relationPropertyMenuStore.state)??{searchQuery:u??"",searchPopupOpen:!1}),[null==p?void 0:p.relationPropertyMenuStore,u]),b=(0,i().K8)((()=>null==p?void 0:p.targetCollectionStore.getIcon()),[null==p?void 0:p.targetCollectionStore]),v=(0,a().IS)((e=>({regular:{color:e.mediumTextColor,whiteSpace:"nowrap",marginLeft:4},headerWrap:{display:"flex",width:"100%",position:"relative",zIndex:2,padding:"6px 10px",fontSize:14,background:e.inputBackground,boxShadow:`\n\t\t\t\t\t0 1px 0 ${e.darkDividerColor}\n\t\t\t\t`},recordTitle:{fontWeight:Ee().Wy.semibold,fontSize:14,marginLeft:_e().g1*(g.isRetina?.5:1)},searchIcon:{fill:e.mediumIconColor,width:14,height:14,marginRight:10},input:{flexGrow:1},targetDatabase:{display:"flex",marginLeft:10,alignItems:"center"},linkBoxOuterStyle:{marginLeft:_e().g1},linkBoxInnerStyle:{display:"flex"}})),[g.isRetina]);if(!c||!d||!p)return null;const{relationPropertyMenuStore:y,targetCollectionStore:S,targetParentUrl:I}=p;return(0,$.jsxs)("div",{style:v.headerWrap,children:[(0,$.jsx)(Oe().A,{style:v.input,value:f,placeholder:o,forceShowClearButton:Boolean(f||h),focus:!0,onChange:e=>{const t=e.target.value;y.setState({...y.state,searchQuery:t,searchPopupOpen:!!t,searchLimit:Be().A.limitIncrement})},onClearButtonClick:()=>{y.setState(y.getInitialState())},onClick:()=>{y.setState({...y.state,searchQuery:f,searchPopupOpen:!0,searchLimit:Be().A.limitIncrement})},onKeyDown:e=>{"Escape"===e.key&&y.setState(y.getInitialState())},format:Oe().C.Transparent,onSubmit:()=>{if(!s)return;const e=S.getFormat().integration_id,t=be().A.integrations.state.find((t=>t.id===e)),o=S.getFormat().pattern_name;if(!t||!o)return;(0,ae().WK)({integration:t,patternName:o,url:f})&&s()}}),t&&(0,$.jsx)("div",{style:v.targetDatabase,children:(0,$.jsx)(C().sA,{id:"database.relationProperty.newRelation.targetDatabase",defaultMessage:"<regular>In</regular> {databaseWithIcon}",values:{regular:e=>(0,$.jsx)("span",{style:v.regular,children:e}),databaseWithIcon:(0,$.jsxs)(Ve().A,{href:I,style:v.linkBoxOuterStyle,innerStyle:v.linkBoxInnerStyle,onClick:()=>{l&&k(m,{from:l}),Fe().VN({environment:m,blockPropertyValueOverlayStore:d})},children:[(0,$.jsx)(H().A,{disabled:!0,icon:b,isEmptyPage:!1,size:_e().$w}),(0,$.jsx)(q().A,{store:S,underline:!0,style:v.recordTitle,maxLength:25})]})}})})]})}var Ue=()=>o(591779),Qe=()=>o(496603),ze=()=>o(176072),We=()=>o(439264),Ke=()=>o(364280),He=()=>o(710149),qe=()=>o(331542),Ge=()=>o(678553),Ze=()=>o(939740),Ye=()=>o(204063),$e=()=>o(2143),Je=()=>o(228927),Xe=()=>o(662971),et=()=>o(729650);function tt(e){const{targetCollectionStore:t,onClick:o,focused:s,isSection:l,index:d,onMouseEnter:c,blockPropertyValueOverlayStore:u}=e,p=(0,i().K8)((()=>t.canEdit()),[t]),m=(0,i().K8)((()=>t.isSyncedCollection()),[t]),g=(0,r().Y0)(),f=(0,a().IS)((e=>({medium:{fontWeight:Ee().Wy.medium},wrapper:{borderTop:`1px solid ${e.lightDividerColor}`},icon:{width:14,fill:"#A6A299",marginRight:-2,marginLeft:0},row:{fontSize:g.isMobile?16:14,minHeight:g.isMobile?44:32}})),[g]),h=(0,$.jsx)(N().A,{focused:s,onMouseEnter:c,icon:(0,et().M)(f.icon),style:f.row,onClick:(0,n.useCallback)((()=>{o(d),u.setState({isOpen:!1})}),[d,o,u]),title:(0,$.jsx)(C().sA,{id:"database.searchRelation.MoveToBacklogFooter",defaultMessage:"<medium>Move to backlog</medium>",values:{medium:e=>(0,$.jsx)("span",{style:f.medium,children:e})}})}),b=l?(0,$.jsx)(G().A,{style:f.wrapper,disableDesktopPadding:!0,disableMobilePadding:!0,children:h}):h;return p?m?null:b:null}var ot=()=>o(50651),nt=()=>o(86499),rt=()=>o(728611),it=()=>o(891368),at=()=>o(219249),st=()=>o(928074),lt=()=>o(756279),dt=()=>o(726360),ct=(o(430670),()=>o(244641)),ut=()=>o(869190),pt=()=>o(604995),mt=()=>o(498140),gt=()=>o(513416),ft=()=>o(464699),ht=()=>o(206267),bt=()=>o(792071),vt=()=>o(983650),yt=()=>o(506391),St=()=>o(100622),It=()=>o(720665),Ct=()=>o(510683),xt=()=>o(816559),Rt=()=>o(859428),Pt=()=>o(780054),wt=()=>o(267419),kt=()=>o(106352),Mt=()=>o(753199),_t=()=>o(553965),At=()=>o(299545),jt=()=>o(962730),Tt=()=>o(444768);function Dt(){const e=(0,r().v3)(),t=function(){const e=(0,r().Y0)().isMobile;return(0,a().IS)((t=>({figmaResults:{display:"flex",flexDirection:"column",alignItems:"flex-start",fontSize:e?16:12,padding:16,paddingBottom:4},figmaResultsCopyWrapper:{marginTop:0,color:t.lightTextColor}})),[e])}();return e.device.isMobile?(0,$.jsx)($.Fragment,{}):(0,$.jsx)("div",{style:t.figmaResults,children:(0,$.jsx)("p",{style:t.figmaResultsCopyWrapper,children:(0,$.jsx)(C().sA,{defaultMessage:"To link, paste the Figma File URL above",id:"connectedRelationPropertyMenuResults.figmaRelationUserEducationPasteUrl.description"})})})}var Lt=()=>o(716016),Bt=()=>o(925907),Et=()=>o(133033),Ft=()=>o(843141),Ot=()=>o(908447),Vt=()=>o(84448),Nt=()=>o(235191),Ut=()=>o(755636),Qt=()=>o(895876),zt=()=>o(283860),Wt=()=>o(704152),Kt=()=>o(802790),Ht=()=>o(132389);const qt=(0,C().YK)({githubCopyIdAria:{defaultMessage:"Copy the ID value.",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.copyIdAria"},githubAddIdAria:{defaultMessage:"Add a unique id property to the database.",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.addIdAria"},githubLearnMoreAria:{defaultMessage:"Learn more about the GitHub Pull Requests feature.",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.learnMoreAria"}});function Gt(e){const{pageBlockStore:t,blockPropertyValueOverlayStore:o}=e,n=(0,r().v3)(),a=(0,C().tz)(),s=Zt(),l=(0,X().ET)(),d=(0,i().K8)((()=>l.collectionStore()),[l]),c=(0,i().K8)((()=>l.databaseType),[l]),p=(0,i().K8)((()=>{var e;return d&&(null===(e=d.getRecordKeyStore())||void 0===e?void 0:e.getRecordKey())}),[d]),{uniqueIdPropertyId:m,uniqueIdValue:f}=(0,i().K8)((()=>{const e=t.getSchema(),o=(0,Lt().yP)(e);if(1!==o.length)return{uniqueIdPropertyId:void 0,uniqueIdValue:void 0};const n=t.getPropertyValue(o[0]);return{uniqueIdPropertyId:o[0],uniqueIdValue:(0,u().On)(n)}}),[t]),h=(0,i().K8)((()=>(0,Lt().H4)(p,f)),[p,f]),v=(0,i().K8)((()=>!Boolean(p)||!Boolean(f)),[p,f]);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)("div",{style:s.githubResults,children:[(0,$.jsx)(Yt,{}),(0,$.jsx)("p",{style:s.githubResultsCopyWrapper,children:v?(0,$.jsx)(C().sA,{defaultMessage:"Create a prefixed ID property to paste in the GitHub PR title.",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.badIdError"}):(0,$.jsx)(C().sA,{defaultMessage:"Copy the {singleItemName} ID and paste it into the title of your PR in GitHub.",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducationLinkPastingOn.description",values:{singleItemName:(0,Qt().$O)(c)}})}),(0,$.jsx)(zt().A,{width:"100%",uniqueIdPrefix:p,uniqueIdValue:f})]}),(0,$.jsxs)("div",{style:s.githubResultsButtonsWrapper,children:[(0,$.jsxs)(Wt().A,{style:s.githubResultsLearnMore,ariaLabel:a.formatMessage(qt.githubLearnMoreAria),onClick:e=>{e.preventDefault(),Ut().f({environment:n,url:(0,se().xS)("guides.githubRelation"),targetSelf:!1})},children:[(0,Et().$)({width:n.device.isMobile?16:12}),(0,$.jsx)(Ht().A,{size:4}),(0,$.jsx)(C().sA,{defaultMessage:"Learn more",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.learnMore"})]}),v?(0,$.jsxs)(Wt().A,{style:s.githubResultsCTAButton,ariaLabel:a.formatMessage(qt.githubAddIdAria),onClick:async e=>{e.preventDefault(),d&&(await Vt().c({environment:n,collectionStore:d}),E().createAndCommit({userAction:"CollectionSettingsAutoIncrementIdPropertyCreateNewIdProperty",environment:n,canUndo:!0,perform:e=>{Nt().IL({environment:n,collectionStore:d,collectionViewArgs:void 0,propertyType:"auto_increment_id",transaction:e})}}),(0,Ot().Z)({environment:n,collectionContextStore:l,from:"github_relation_menu",property_type:"auto_increment_id",integration_id:g().ob}))},children:[(0,b().W)({width:n.device.isMobile?16:12}),(0,$.jsx)(Ht().A,{size:4}),(0,$.jsx)(C().sA,{defaultMessage:"Add ID property",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.addId"})]}):(0,$.jsxs)(Wt().A,{style:s.githubResultsCTAButton,ariaLabel:a.formatMessage(qt.githubCopyIdAria),onClick:async e=>{e.preventDefault();const r=await j().R.clipboardActions.load();await r.copyString({stringValue:h,environment:n,copiedMessage:r.clipboardMessages.copiedPropertyToClipboard}),m&&(0,Ft().E)(n,l,{block_id:t.id,property:m,property_type:"auto_increment_id",github_relation_menu:!0}),o.setState({isOpen:!1})},children:[(0,Bt().n)({width:n.device.isMobile?16:12}),(0,$.jsx)(Ht().A,{size:4}),(0,$.jsx)(C().sA,{defaultMessage:"Copy {singleItemName} ID",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.copyId",values:{singleItemName:(0,Qt().$O)(c)}})]})]})]})}function Zt(){const e=(0,r().Y0)().isMobile;return(0,a().IS)((t=>({githubResults:{display:"flex",flexDirection:"column",alignItems:"flex-start",fontSize:e?16:12,padding:16,paddingBottom:4},githubResultsCopyWrapper:{marginTop:0,color:t.lightTextColor},githubResultsErrorWrapper:{marginTop:0,color:St().Ay.red},githubResultsButtonsWrapper:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",fontSize:e?16:12,padding:"10px"},githubResultsLearnMore:{display:"flex",flexDirection:"row",alignItems:"center",padding:4,borderRadius:5,color:t.lightTextColor},githubResultsCTAButton:{display:"flex",flexDirection:"row",alignItems:"center",padding:4,borderRadius:5,color:t.blueColor},githubLinkPastingSeparator:{border:t.tableDividerColor,width:"100%"},githubLinkPastingContainer:{width:"100%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",margin:"8px 0px"},githubLinkPastingSeparatorText:{position:"absolute",backgroundColor:t.popoverBackground,color:t.lightTextColor,padding:"0px 8px"}})),[e])}function Yt(){const e=Zt();return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("p",{style:e.githubResultsCopyWrapper,children:(0,$.jsx)(C().sA,{defaultMessage:"To link, paste the GitHub PR URL above",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducationPasteUrl.description"})}),(0,$.jsxs)("div",{style:e.githubLinkPastingContainer,children:[(0,$.jsx)(Kt().A,{size:1,style:e.githubLinkPastingSeparator}),(0,$.jsx)("div",{style:e.githubLinkPastingSeparatorText,children:"or"})]}),(0,$.jsx)(Ht().A,{size:8})]})}var $t=()=>o(619400);function Jt(e){const t=(0,r().v3)(),o=function(){const e=(0,r().Y0)().isMobile;return(0,a().IS)((t=>({googleDriveResults:{display:"flex",flexDirection:"column",alignItems:"flex-start",fontSize:e?16:12,padding:16,paddingBottom:4,paddingTop:4},googleDriveResultsCopyWrapper:{marginTop:0,color:t.lightTextColor,marginBottom:0},googleDriveResultsLearnMore:{display:"flex",flexDirection:"row",alignItems:"center",padding:4,borderRadius:5},googleDriveResultsAccount:{fontSize:12,margin:0},googleDriveLinkPastingSeparator:{border:t.tableDividerColor,width:"100%"},googleDriveLinkPastingContainer:{width:"100%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",margin:"8px 0px"},googleDriveLinkPastingSeparatorText:{position:"absolute",backgroundColor:t.cardContentBackground,color:t.lightTextColor,padding:"0px 8px"}})),[e])}(),n=(0,ue().X)("gdrive_scope_migration_gate"),s=(0,i().K8)((()=>be().A.externalAuthentications.state.filter((e=>{let{integration_id:t}=e;return t===g().Hd}))),[]);return t.device.isMobile?(0,$.jsx)($.Fragment,{}):(0,$.jsxs)("div",{style:o.googleDriveResults,children:[!n&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("p",{style:o.googleDriveResultsCopyWrapper,children:(0,$.jsx)(C().sA,{defaultMessage:"To link, paste the Google Drive File URL above",id:"connectedRelationPropertyMenuResults.googleDriveRelationUserEducationPasteUrl.description"})}),(0,$.jsxs)("div",{style:o.googleDriveLinkPastingContainer,children:[(0,$.jsx)(Kt().A,{size:1,style:o.googleDriveLinkPastingSeparator}),(0,$.jsx)("div",{style:o.googleDriveLinkPastingSeparatorText,children:"or"})]}),(0,$.jsx)(Ht().A,{size:2})]}),(0,$.jsx)("p",{style:o.googleDriveResultsCopyWrapper,children:(0,$.jsx)(C().sA,{defaultMessage:"Select an account below to browse files on your Google Drive",id:"connectedRelationPropertyMenuResults.googleDriveRelationUserEducationSourcePicker.description"})}),(0,$.jsx)(Ht().A,{size:2}),s.map(((n,r)=>(0,$.jsx)(Wt().A,{style:o.googleDriveResultsLearnMore,onClick:async o=>{o.preventDefault(),await(async(o,n)=>{const r=await F().Nl({environment:t,externalAuthenticationValue:n}),i=be().A.integrations.state.find((e=>e.id===n.integration_id));if(!i)return;const{id:a,name:s,info:l}=i,{icon:d,dark_icon:c,accent_color:u,accent_icon:p}=l,m="dark"===t.ThemeStore.state.mode&&c?c:d;m&&u&&p&&r&&"failed"!==r.type&&await(0,$t().openGoogleDriveFilePicker)({environment:t,accessToken:r.data.access_token,callback:(t,r)=>{e.onFileSelect(o,r,n.id)},integration:{id:a,name:s,icon:m,accentColor:u,accentIcon:p},from:"connected_relation_property_value"})})(o,n)},children:(0,$.jsx)("p",{style:o.googleDriveResultsAccount,children:(0,$.jsx)(C().sA,{defaultMessage:"{account}",id:"connectedRelationPropertyMenuResults.googleDriveRelation.googleDriveAccount.description",values:{account:n.account_name}})})},r)))]})}function Xt(){const e=(0,r().v3)(),t=function(){const e=(0,r().Y0)().isMobile;return(0,a().IS)((t=>({salesforceResults:{display:"flex",flexDirection:"column",alignItems:"flex-start",fontSize:e?16:12,padding:16,paddingBottom:4,paddingTop:4},salesforceResultsCopyWrapper:{marginTop:0,color:t.lightTextColor,marginBottom:0},salesforceResultsLearnMore:{display:"flex",flexDirection:"row",alignItems:"center",padding:4,borderRadius:5}})),[e])}();return e.device.isMobile?(0,$.jsx)($.Fragment,{}):(0,$.jsx)($.Fragment,{children:(0,$.jsx)("div",{style:t.salesforceResults,children:(0,$.jsx)("p",{style:t.salesforceResultsCopyWrapper,children:(0,$.jsx)(C().sA,{defaultMessage:"To link, paste the Salesforce URL above",id:"connectedRelationPropertyMenuResults.salesforceRelationUserEducationPasteUrl.description"})})})})}function eo(e){let{patternName:t}=e;const o=(0,r().v3)(),n=function(){const e=(0,r().Y0)().isMobile;return(0,a().IS)((t=>({slackResults:{display:"flex",flexDirection:"column",alignItems:"flex-start",fontSize:e?16:12,padding:16,paddingBottom:4},slackResultsCopyWrapper:{marginTop:0,color:t.lightTextColor}})),[e])}();return o.device.isMobile?null:(0,$.jsx)("div",{style:n.slackResults,children:(0,$.jsx)("p",{style:n.slackResultsCopyWrapper,children:"slack_channel"===t?(0,$.jsx)(C().sA,{defaultMessage:"To link, paste the Slack channel URL above",id:"connectedRelationPropertyMenuResults.slackChannelRelationUserEducationPasteUrl.description"}):(0,$.jsx)(C().sA,{defaultMessage:"To link, paste the Slack URL above",id:"connectedRelationPropertyMenuResults.slackRelationUserEducationPasteUrl.description"})})})}function to(e){var t;const{sections:o,targetCollectionStore:n,search:s,property:l,propertySchema:d,pageRecordStore:c,blockPropertyValueOverlayStore:p}=e,m=(0,a().IS)((e=>({settingsMenu:{display:"flex",flexGrow:1,flexDirection:"column",padding:"8px 16px 16px 8px"},settingsMenuSearchBox:{background:e.contentBackground,marginBottom:10},addPageButton:{width:"100%",display:"flex",justifyContent:"center"},suggestionBox:{display:"flex",alignItems:"center",fontSize:12,color:St().Ay.white,background:St().Ay.blue,borderRadius:6,padding:10,boxShadow:e.shadowMD,alignSelf:"center",maxWidth:"80%"},errorMessage:{alignSelf:"center",padding:10,fontSize:14,color:e.errorText},addingPage:{width:"100%",padding:10,display:"flex",justifyContent:"flex-start",fontSize:14,color:e.mediumTextColor},enterText:{color:e.lightTextColor}})),[]),b=u().di(d),y=u().H6(d),S=u().KF(d),I=u().V5(d),x=u().uv(d),R=(0,i().K8)((()=>{if(!n)return;const e=n.getFormat().integration_id;return be().A.integrations.state.find((t=>t.id===e))}),[n]),P=(0,i().K8)((()=>R?(0,te().jw)(R.id):[]),[R]),w=(0,r().v3)(),k=(0,C().tz)(),M=(0,a().DP)(),_=(0,i().K8)((()=>{const e=be().A.state;return e.loaded?e.integrations:[]}),[]),j=(0,i().K8)((()=>{var e;return Boolean(null===(e=fe().default.state.currentSpaceStore)||void 0===e?void 0:e.canAdmin())}),[]),T=(0,i().K8)((()=>{var e;return!(!(null===(e=fe().default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit())||!(0,te().fY)(w))}),[w]),D=(0,i().K8)((()=>{const e=be().A.state;return e.loaded&&R?e.externalAuthentications.filter((e=>e.integration_id===R.id)):[]}),[R]),L=(0,i().K8)((()=>D.length?D[0]:null),[D]),[{value:B,status:E}]=(0,h().Yb)((async()=>{if(!L||!R||!(0,g().a1)(R.id))return;const e=L.parent_id;return A().callApi({eventName:"listExternalObjects",environment:w,data:{bot_id:e,query:s}})}),[w,L,s,R],{debounce:1e3}),F=(0,i().K8)((()=>n.getFormat().pattern_name),[n]),O=(0,ue().X)("gdrive_scope_migration_gate"),V=(0,i().K8)((()=>{if(R&&s)return(0,ae().WK)({integration:R,patternName:F,url:s})}),[F,R,s]),U=(0,At()._p)(c)?c:void 0,Q=(0,i().K8)((()=>(0,At()._p)(c)?c.getPropertyStore(l):void 0),[c,l]),z=(0,i().K8)((()=>null==n?void 0:n.getIcon()),[n]),W=(0,i().K8)((()=>{var e;return null===(e=fe().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),K=(0,wt()._)(),H={key:"githubPrRelationUserEducation",render:e=>void 0!==U&&(0,$.jsx)(Gt,{pageBlockStore:U,blockPropertyValueOverlayStore:p}),items:[]},q={key:"googleDriveRelation",render:t=>(0,$.jsx)(Jt,{onFileSelect:(t,o,n)=>{(0,Mt().SQ)({context:Mt().y$.ButtonMouseDown,callback:()=>{e.addPage(o,n)},event:t})}}),items:[]},Z={key:"figmaRelation",render:e=>(0,$.jsx)(Dt,{}),items:[]},Y={key:"salesforceRelation",render:e=>(0,$.jsx)(Xt,{}),items:[]},J={key:"slackRelation",render:e=>(0,$.jsx)(eo,{patternName:F}),items:[]};if(!Q||!R)return(0,$.jsx)(Ze().Ay,{type:Ze().Oh.Vertical,style:{padding:"4px 0px"},initialFocus:0,sections:o});if(!((0,g().mj)(null==R?void 0:R.id)?null===(t=P[0])||void 0===t?void 0:t.id:null==L?void 0:L.parent_id)){const e=function(e){const{collectionIcon:t,integration:o,environment:n,spaceId:r,isAdmin:i,userAllowedToAuth:a}=e,s=o.id===g().ob,l=()=>{r&&(Ct().Jq({environment:n,integration:o,spaceId:r,from:"connected_relation_property_menu"}),Tt().A.reset())},d=!s&&o.id!==g().io;if(d){if(e.environment.device.isMobile)return{key:"askUseBrowserOrDesktopForAuth",render:e=>(0,$.jsx)(G().A,{...e,disableMobilePadding:!0,title:(0,$.jsx)("div",{style:{whiteSpace:"normal",paddingTop:8},children:(0,$.jsx)(C().sA,{defaultMessage:"Please authorize this integration in the browser or a desktop app.",id:"connectedRelationProperty.mobile.guide.title"})})}),items:[]};if(!a)return{key:"askGuestToGetMemberAccess",render:e=>(0,$.jsx)(G().A,{...e,disableMobilePadding:!0,title:(0,$.jsx)("div",{style:{whiteSpace:"normal",paddingTop:8},children:(0,$.jsx)(C().sA,{defaultMessage:"To use {integration} integration, request the workspace admin to add you as a member",id:"connectedRelationProperty.guest.auth.guide",values:{integration:o.name}})})}),items:[]}}const c=!s||i&&a?{key:"authenticateButton",render:e=>(0,$.jsx)(N().A,{...e,title:(0,$.jsx)(C().sA,{defaultMessage:"Connect to {integration}",id:"connectedRelationPropertyMenuResults.authenticateButton.title",values:{integration:o.name}}),icon:(0,$.jsx)(xt().Ay,{src:null==t?void 0:t.icon,style:{width:14}})}),action:()=>l()}:{key:"askAdminToAuthenticateButton",render:e=>(0,$.jsx)(N().A,{...e,title:(0,$.jsx)("div",{style:{whiteSpace:"normal"},children:(0,$.jsx)(C().sA,{defaultMessage:"Ask your workspace admin to configure the GitHub (Workspace) connection.",id:"connectedRelationPropertyMenuResults.askAdminToAuthenticateButton.title"})}),icon:(0,$.jsx)(xt().Ay,{src:null==t?void 0:t.icon,style:{width:14}}),hoveredStyle:{cursor:"default",background:void 0},pressedStyle:{background:void 0}}),action:()=>{}};return{key:"authenticateIntegration",render:e=>(0,$.jsx)(G().A,{...e,disableMobilePadding:!0,title:(0,$.jsx)(C().sA,{defaultMessage:"Connect to {integration}",id:"connectedRelationPropertyMenuResults.authenticateHeader.title",values:{integration:o.name}})}),items:[c]}}({environment:w,integration:R,collectionIcon:z,spaceId:W,isAdmin:j,userAllowedToAuth:T});return(0,$.jsx)(Ze().Ay,{type:Ze().Oh.Vertical,style:{padding:"4px 0px"},initialFocus:0,sections:[...o,e]})}const X=("success"===(null==B?void 0:B.type)&&"data"in B.data?B.data.data:[]).map((e=>{const t=e.attributes.flatMap((e=>{const t=(0,yt().q8)(e);return(0,gt().PX)(t)?[t]:(console.error(t),[])})),o=(0,It().MU)(t.flatMap((e=>[[e.id,e]])));return{uri:e.uri,attributes:t,attributesById:o}}));function ee(){let e=(0,$.jsx)(C().sA,{id:"connectedRelationPropertyMenuResults.addPageButton.label",defaultMessage:"Link page"});return(null==R?void 0:R.id)===g().Hd||(null==R?void 0:R.id)===g().e1?e=(0,$.jsx)(C().sA,{id:"connectedRelationPropertyMenuResults.addFileButton.label",defaultMessage:"Link file"}):(null==R?void 0:R.id)===g().k0?e=(0,$.jsx)(C().sA,{id:"connectedRelationPropertyMenuResults.addTicketButton.label",defaultMessage:"Link ticket"}):(null==R?void 0:R.id)===g().ob?e=(0,$.jsx)(C().sA,{id:"connectedRelationPropertyMenuResults.addPRButton.label",defaultMessage:"Link PR"}):(null==R?void 0:R.id)===g().mn?e=(0,$.jsx)(C().sA,{id:"connectedRelationPropertyMenuResults.addObjectButton.label",defaultMessage:"Link Object"}):(null==R?void 0:R.id)===g().zG&&"slack_channel"===F?e=(0,$.jsx)(C().sA,{id:"connectedRelationPropertyMenuResults.addChannelButton.label",defaultMessage:"Link channel"}):(null==R?void 0:R.id)===g().zG&&(e=(0,$.jsx)(C().sA,{id:"connectedRelationPropertyMenuResults.addMessageButton.label",defaultMessage:"Link message"})),e}const oe={key:"thirdPartySearchResults",render:e=>(0,$.jsx)(G().A,{...e,disableMobilePadding:!0}),items:[{key:"addPage",render:e=>(0,$.jsx)(N().A,{...e,title:ee(),icon:(0,ft().b)({width:14}),right:(0,$.jsx)(C().sA,{id:"connectedRelationPropertyMenuResults.linkPageButton.enter",defaultMessage:"Enter"}),rightStyle:m.enterText}),action:t=>{(0,Mt().SQ)({event:t,context:Mt().y$.ButtonMouseDown,callback:()=>{e.addPage()}})}}]},ne={key:"noResultsFoundInThirdParty",render:e=>(0,$.jsx)(G().A,{...e,disableMobilePadding:!0,title:(0,$.jsx)(C().sA,{defaultMessage:"No results found in {integration}.",id:"connectedRelationPropertyMenuResults.notMatched.help",values:{integration:R.name}})}),items:[]},re=[];R&&(0,g().a1)(R.id)&&re.push(...function(e){const{environment:t,intl:o,theme:n,externalIntegrations:r,emojiData:i}=e,a=e.results.flatMap((e=>{const t=e.attributesById.start;if(t&&(0,yt().RD)(t)){const n=(0,pt().AA)(t.values[0],(0,f().P)(),o.locale);return[{...e,dateTime:n.start}]}return[]})),s=Qe().$z(a,(e=>e.dateTime.toFormat(pt().tr))),l=Qe().Ul(Object.keys(s),(e=>ct().c9.fromFormat(e,pt().tr).valueOf())).flatMap((a=>{const l=s[a],d=Qe().Ul(l,(e=>e.dateTime.valueOf())),c=(0,mt().Z$)(a);if(!c)return[];let u;(Qe().n4(c,(0,pt().Ec)((0,f().P)()))||Qe().n4(c,(0,pt().uf)((0,f().P)())))&&(u="relative");const p=(0,ut().ZF)({value:c,intl:o,allowRelativeDates:Boolean(u),date_format:u});return[{key:p,items:d.flatMap((a=>{const s=new(ve().Bv)(t,{table:v().ev,id:ht().JW(),spaceId:ht().JW()}),l={id:s.id,type:"external_object_instance",alive:!0,format:{bot_id:"",external_object_id:"",uri:a.uri,attributes:a.attributes},version:0,space_id:"",parent_id:"",parent_table:"block"};let d=null,c=null;const u=a.attributesById.title,p=a.attributesById.start,m=a.attributesById.end;return p&&m&&(0,yt().RD)(p)&&(0,yt().RD)(m)&&(d=(0,$.jsx)("div",{children:(0,$.jsxs)("span",{children:[(0,$.jsx)(kt().gY,{style:{color:void 0,display:"inline"},attribute:p,dateStyle:"exact_time"})," - ",(0,$.jsx)(kt().gY,{attribute:m,dateStyle:"exact_time",style:{color:void 0,display:"inline"}})]})}),c=(0,$.jsxs)("div",{children:[(0,$.jsx)("span",{children:(0,$.jsx)(kt().Ic,{style:{color:void 0,display:"inline"},store:s,attribute:u})}),d]})),{key:a.uri,render:e=>(0,$.jsx)(Rt().A,{renderTooltip:()=>c,placement:jt().W.Left,textWrap:!0,render:a=>(0,$.jsx)(N().A,{...(0,_t().A)(a||{},e),title:(0,vt().gA)({blockModel:bt().Bj6.fromBlock(l),intl:o,index:0,style:{},disableHover:!0,disableLinks:!0,isAndroid:!1,classNames:[],theme:n,baseUrl:Pt().A.domainBaseUrl,emojiType:"raw",currentUserId:t.currentUser.id,getRecordModel:s.getRecordModel,externalIntegrations:r,emojiData:i}),caption:d})}),action:t=>{(0,Mt().SQ)({event:t.event,context:Mt().y$.ButtonMouseDown,callback:()=>{e.addPage(a.uri)}})}}})),render:e=>(0,$.jsx)(G().A,{...e,disableMobilePadding:!0,title:p})}]}));return l}({environment:w,intl:k,theme:M,externalIntegrations:_,results:X,addPage:e.addPage,emojiData:K}));const ie={key:"loadingSpinner",render:t=>(0,$.jsx)(G().A,{...t,disableMobilePadding:!0,title:(0,$.jsxs)("div",{style:{...m.addingPage,justifyContent:e.addingPage?"center":"flex-start"},children:[(0,$.jsx)(qe().A,{}),(0,$.jsx)("span",{style:{marginLeft:10},children:(0,$.jsx)(C().sA,{id:"connectedRelationPropertyMenuResults.fetchingData",defaultMessage:"Fetching data..."})})]})}),items:[]},se=[];return"pending"===E||e.addingPage?se.push(ie):y&&O?se.push(q):V?se.push(oe):re.length>0?se.push(...re):y?se.push(q):S?se.push(Z):I?se.push(Y):x?se.push(J):b&&0===o.length?se.push(H):b&&o.length>0||se.push(ne),(0,$.jsx)(Ze().Ay,{type:Ze().Oh.Vertical,style:{padding:"4px 0px"},initialFocus:0,sections:[...o,...se]})}function oo(){return(0,$.jsx)("div",{style:{height:"100%",padding:_e().iw,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,$.jsx)(qe().A,{style:{margin:"0 auto"}})})}function no(e){const{collectionStore:t,targetCollectionStore:o,schema:n,property:r,showRight:a,disabled:s,style:l}=e,d=(0,i().K8)((()=>o.isSyncedCollection()),[o]),u=(0,i().K8)((()=>{const e=n[r];return Boolean(e&&c().UU(e))}),[n,r]);return(0,$.jsx)(G().A,{...e,noTextOverflow:!0,right:a&&!d&&!u&&t&&(0,$.jsx)(ot().default,{collectionStore:t,targetCollectionStore:o,property:r,disabled:s}),style:{paddingTop:0,paddingBottom:4,...l},desktopTitleStyle:{height:19,alignItems:"center",marginTop:6,marginBottom:6,paddingLeft:12,paddingRight:9}})}const ro=function(e){const t=(0,r().Y0)(),a=(0,i().uB)(void 0,o(970585).A),s=(0,i().uB)(void 0,o(170253).A),l=(0,Ue().ZC)(e.searchQuery);return(0,n.useEffect)((()=>{!e.searchQuery||(0,Qe().n4)(l,e.searchQuery)||t.isMobile||a.setState({...a.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}),[t.isMobile,a,l,e.searchQuery]),t.isMobile?(0,$.jsx)(vo,{relationPropertyMenuResultProps:e,menuListStore:a,draggableListStore:s}):(0,$.jsx)(fo,{relationPropertyMenuResultProps:e,menuListStore:a,draggableListStore:s})};function io(e,t){const o=t[e];return Boolean(o&&"relation"===o.type&&1===o.limit)}function ao(e){const{result:t,pointer:o,environment:n,relationPropertyMenuResultProps:r,canDragRow:i,isSharingEnabled:a,limitReached:s,propertyLimit:l}=e,{disabled:d,parentStore:c,collectionStore:u,collectionId:p,schema:m,targetCollectionStore:g,onAccept:f,property:h,propertySchema:b,blockPropertyValueOverlayStore:v,onClickActionButton:y,disableClickToNavigateToPage:S}=r,I=ve().Bv.createChildStore(c,o);return{key:I.id,render:(e,r)=>{let{ref:f,...C}=e;const x=(0,$.jsx)(nt().q,{...C,canDrag:i,limitReached:s,collectionStore:u,collectionId:p,schema:m,targetCollectionStore:g,relatedPageStore:I,disabled:d,isSelected:t.type===_e().M7.SelectedPage,pageStore:c,property:h,propertySchema:b,rowType:"popup",onActionButtonClick:()=>y(t),blockPropertyValueOverlayStore:v,propertyLimit:l,onOpenPageButtonClick:()=>{D().k({relationPointers:[o],relatedPageStore:I,environment:n,from:"relation_property"})},disableClickToNavigateToPage:S});return a?(0,$.jsx)(so,{originElement:x,pageStore:I,result:t,focused:C.focused,isSelected:t.type===_e().M7.SelectedPage,onFocus:r.onFocus,onClickActionButton:y}):x},action:e=>{a&&t.type!==_e().M7.SelectedPage||f(t,rt().Vr(e.event))}}}function so(e){let{originElement:t,pageStore:o,result:s,focused:l,onFocus:d,isSelected:c,onClickActionButton:u}=e;const p=(0,r().v3)(),m=(0,r().Y0)(),g=(0,dt().H)(),f=(0,i().K8)((()=>st().dR({store:o,environment:p,trustedDomainsStore:g})),[o,p,g]),[h,b]=(0,n.useState)(!1),v=(0,a().IS)((e=>({unselectedHeader:{paddingRight:10,paddingLeft:10,paddingTop:6,paddingBottom:6,borderRadius:6,color:e.text.uiYellowPrimary,backgroundColor:e.tint.uiYellow,fontSize:14,fontWeight:400},selectedHeader:{paddingRight:8,paddingLeft:8,paddingTop:4,color:e.mediumTextColor,fill:e.mediumIconColor,fontSize:14,fontWeight:400},pageTitleWrapper:{display:"inline",padding:2},icon:{display:"inline-block",marginRight:4,width:12,height:12},title:{display:"inline",overflow:"hidden",wordBreak:"break-word",textWrap:"balance",fontWeight:500},popupContainer:{padding:16,display:"flex",flexDirection:"column",height:"100%"},permissionsListContainer:{flex:1,overflow:"auto"},generalAccessPermissionListContainer:{borderTop:`0.5px solid ${e.darkDividerColor}`,paddingTop:8},confirmButton:{width:"100%"}})),[]);return m.isPhone?(0,$.jsxs)("div",{onClick:e=>{c||b(!0)},children:[t,(0,$.jsx)(K().Ay,{popupType:K().nl.SlideUp,enableOutsideClickDismiss:!0,onDismiss:()=>b(!1),open:h,style:{borderTopLeftRadius:24,borderTopRightRadius:24,maxHeight:"66%"},originRect:new DOMRect(0,0,0,0),render:()=>(0,$.jsxs)("div",{style:v.popupContainer,children:[(0,$.jsx)(it().jV,{children:c?(0,$.jsx)("div",{style:v.selectedHeader,children:(0,$.jsx)(C().sA,{id:"relationPropertyMenu.sharingEnabled.permissionsList.selectedHeader",defaultMessage:"This task is currently shared with everyone who has access to {title}",values:{title:(0,$.jsxs)("div",{style:v.pageTitleWrapper,children:[(0,$.jsx)(H().A,{icon:o.getIcon(),isEmptyPage:!1,size:12,disabled:!0,style:v.icon}),(0,$.jsx)(q().A,{store:o,style:v.title})]})}})}):(0,$.jsx)("div",{style:v.unselectedHeader,children:(0,$.jsx)(C().sA,{id:"relationPropertyMenu.sharingEnabled.permissionsList.unselectedHeader",defaultMessage:"By selecting this project, only the people below will have access to this task:"})})}),(0,$.jsx)("div",{style:v.permissionsListContainer,children:(0,$.jsx)(at().Ay,{store:o,showFooter:!1,showPermissionInheritanceBanner:!1,calculatedPermissions:{...f,showRestrictedPermissionBanner:!1,showSitePublicPermission:!1,showPublicShareLinkPermission:!1,showTeamPermission:!0,showSpacePermission:!0},buttonPopupStore:void 0,permissionItemArgs:{location:"relation_menu",shouldDisable:!0}})}),(0,$.jsx)("div",{style:v.generalAccessPermissionListContainer,children:(0,$.jsx)(at().T5,{store:o,calculatedPermissions:f,permissionItemArgs:{location:"relation_menu",shouldDisable:!0}})}),(0,$.jsx)(Ye().A,{size:"lg",style:v.confirmButton,onClick:()=>u(s),children:(0,$.jsx)(C().sA,{id:"relationPropertyMenu.sharingEnabled.confirmButton",defaultMessage:"Confirm"})})]})})]}):(0,$.jsx)(Xe().A,{focused:l,onFocus:d,disableDefaultClick:!0,renderOrigin:(e,o)=>(0,$.jsx)(Ge().A,{...e,ref:o,title:t,textWrapperStyle:{margin:0},showExtensionArrow:!1}),renderExtension:e=>(0,$.jsxs)("div",{...e,children:[(0,$.jsx)(it().jV,{children:c?(0,$.jsx)("div",{style:v.selectedHeader,children:(0,$.jsx)(C().sA,{id:"relationPropertyMenu.sharingEnabled.permissionsList.selectedHeader",defaultMessage:"This task is currently shared with everyone who has access to {title}",values:{title:(0,$.jsxs)("div",{style:v.pageTitleWrapper,children:[(0,$.jsx)(H().A,{icon:o.getIcon(),isEmptyPage:!1,size:12,disabled:!0,style:v.icon}),(0,$.jsx)(q().A,{store:o,style:v.title})]})}})}):(0,$.jsx)("div",{style:v.unselectedHeader,children:(0,$.jsx)(C().sA,{id:"relationPropertyMenu.sharingEnabled.permissionsList.unselectedHeader",defaultMessage:"By selecting this project, only the people below will have access to this task:"})})}),(0,$.jsx)(at().Ay,{store:o,showFooter:!1,showPermissionInheritanceBanner:!1,calculatedPermissions:{...f,showRestrictedPermissionBanner:!1,showSitePublicPermission:!1,showPublicShareLinkPermission:!1,showTeamPermission:!0,showSpacePermission:!0},buttonPopupStore:void 0,permissionItemArgs:{location:"relation_menu",shouldDisable:!0}})]})})}function lo(e){const{canDrag:t,property:o,schema:n,totalRelatedPages:r}=e;return t&&!io(o,n)&&r>1}function co(e){const{numRelatedPages:t,integrationId:o,limit:n}=e;return n&&1===n?(0,$.jsx)(C().sA,{id:"database.relationProperty.relatedPages.limit.subHeader",defaultMessage:"Selected"}):o===g().Hd||o===g().e1?(0,$.jsx)(C().sA,{id:"database.relationProperty.relatedGoogleDriveOrFigmaFiles.subHeader",defaultMessage:"{count, plural, one {{count} linked file} other {{count} linked files}}",values:{count:t}}):o===g().ob?(0,$.jsx)(C().sA,{id:"database.relationProperty.relatedGithubPages.subHeader",defaultMessage:"{count, plural, one {{count} linked PR} other {{count} linked PRs}}",values:{count:t}}):(0,$.jsx)(C().sA,{id:"database.relationProperty.relatedPages.subHeader",defaultMessage:"{count} selected",values:{count:t}})}function uo(e){const{loading:t,numRelatedPages:o,numUnrelatedPages:n,limit:r}=e;if(!t||0!==o||0!==n)return 0===n?(0,$.jsx)(C().sA,{id:"database.relationProperty.noResults.subHeader",defaultMessage:"No results"}):0===o?void 0:r&&1===r?(0,$.jsx)(C().sA,{id:"database.relationProperty.changeSelection.subHeader",defaultMessage:"Change selection"}):(0,$.jsx)(C().sA,{id:"database.relationProperty.selectMore.subHeader",defaultMessage:"Select more"})}const po=(0,C().YK)({selected:{id:"database.relationProperty.sharing.selected.subHeader",defaultMessage:"Selected"},unselected:{id:"database.relationProperty.sharing.unselected.subHeader",defaultMessage:"Possible choices"}});function mo(e){const{targetCollectionStore:t,collectionStore:o,schema:n,property:r,canConfigureCollection:i,numRelatedPages:a,handleClearProperty:s,overlayMode:l,index:d,blockPropertyValueOverlayStore:c}=e;return{key:"backlog",render:e=>(0,$.jsx)(no,{...e,collectionStore:o,schema:n,targetCollectionStore:t,property:r,showRight:0===a||"add"===(null==l?void 0:l.type),disabled:!i,style:{paddingBottom:0,paddingTop:0}}),items:[{key:"sprints_backlog",render:e=>(0,$.jsx)(tt,{focused:e.focused,onMouseEnter:e.onMouseEnter,targetCollectionStore:t,onClick:s,isSection:!1,index:d,blockPropertyValueOverlayStore:c}),action:()=>{s&&s()}}]}}function go(e){let{relationPropertyMenuResultProps:t,menuListStore:o,draggableListStore:a}=e;const{results:s,onDrag:c,parentStore:u,collectionStore:p,targetCollectionStore:m,property:g,canDrag:f,canConfigureCollection:h,loading:b,onCreatePage:v,overlayMode:y,disabled:S,schema:I,searchQuery:x,index:R,handleClearProperty:P,blockPropertyValueOverlayStore:w,relationPropertyMenuStore:k,addPage:M,addingPage:_}=t,A=(0,r().v3)(),j=(0,n.useCallback)(((e,t)=>function(e,t,o,n){n&&n(e),ze().pl({store:o,focus:{section:0,indexLocal:t.endPosition,indexGlobal:t.endPosition,footerFocused:!1}})}(e,t,o,c)),[o,c]),{device:T}=A,D=(0,C().tz)(),L=I[g],B=Boolean("relation"===(null==L?void 0:L.type)&&L.connectedRelation),E=(0,de().D)(L),F=(0,i().K8)((()=>function(e,t,o){const n=e.getDatabaseType()===l().av;return t?{getCanDragRow:()=>!1,getRelatedSectionHeaderTitle:()=>o.formatMessage(po.selected),getUnrelatedSectionHeaderTitle:()=>o.formatMessage(po.unselected),getFooterSection:()=>{}}:n?{getCanDragRow:()=>!1,getRelatedSectionHeaderTitle:()=>{},getUnrelatedSectionHeaderTitle:()=>{},getFooterSection:mo}:{getCanDragRow:lo,getRelatedSectionHeaderTitle:co,getUnrelatedSectionHeaderTitle:uo,getFooterSection:()=>{}}}(m,E,D)),[E,m,D]),O=(0,i().K8)((()=>{var e;if(w.state.isOpen)return(0,d().hm)(L,null===(e=w.state.formQuestionStore)||void 0===e?void 0:e.getModel())}),[L,w]),[V,N]=(0,i().K8)((()=>{const e=[],o=[],n=s.filter((e=>e.type===_e().M7.SelectedPage)).length;for(const r of s)if(r.type===_e().M7.SearchPage){const e=r.store,i=Boolean(O&&n>=O);e.isTemplate()||o.push(ao({environment:A,isSharingEnabled:E,result:r,pointer:e.pointer,relationPropertyMenuResultProps:t,canDragRow:!1,limitReached:i,propertyLimit:O}))}else if(r.type===_e().M7.SelectedPage){const o=F.getCanDragRow({canDrag:f,property:g,schema:I,totalRelatedPages:n});e.push(ao({environment:A,result:r,pointer:r.store.pointer,relationPropertyMenuResultProps:t,canDragRow:o,isSharingEnabled:E}))}return[e,o]}),[s,A,t,F,f,g,I,E,O]),U=(0,i().K8)((()=>m.getFormat().integration_id),[m]),Q=F.getRelatedSectionHeaderTitle({numRelatedPages:V.length,integrationId:U,limit:O}),z=[];if(V.length>0){const e=V.map((e=>e.key.toString()));z.push({key:"results",render:t=>(0,$.jsx)(no,{...t,title:Q,collectionStore:p,schema:I,targetCollectionStore:m,property:g,showRight:"add"!==(null==y?void 0:y.type),disabled:!h,style:{paddingBottom:void 0===Q?0:4},children:f&&!io(g,I)&&e.length>1?(0,$.jsx)(We().Ay,{direction:"vertical",keys:e,renderKey:o=>t.children[e.indexOf(o)],onDrop:j,store:a}):t.children}),items:V})}if(!B&&(0===N.length&&0===V.length||N.length>0)){const e=F.getUnrelatedSectionHeaderTitle({loading:b,numRelatedPages:V.length,numUnrelatedPages:N.length,limit:O}),t=!b&&0===N.length&&!T.isMobile&&!B&&Boolean(null==x?void 0:x.trim());let o;t&&N.push({key:"empty",render:e=>(0,$.jsx)(J,{targetCollectionStore:m,parentBlockStore:u,title:x||"",focused:e.focused,onClick:v,isSection:!1,index:R}),action:()=>{v&&v()}}),(t||void 0===e)&&(o={paddingBottom:0});const n={key:"unrelated",render:t=>(0,$.jsx)(no,{...t,title:e,collectionStore:p,schema:I,targetCollectionStore:m,property:g,showRight:0===V.length||"add"===(null==y?void 0:y.type),disabled:!h,style:o}),items:N};"add"===(null==y?void 0:y.type)?z.unshift(n):z.push(n)}if(!T.isMobile&&V.length>0&&!S){const e=F.getFooterSection({targetCollectionStore:m,collectionStore:p,schema:I,property:g,canConfigureCollection:h,numRelatedPages:V.length,handleClearProperty:P,overlayMode:y,index:R,blockPropertyValueOverlayStore:w});e&&z.push(e)}return B?(0,$.jsx)(to,{blockPropertyValueOverlayStore:w,targetCollectionStore:m,sections:z,propertySchema:L,property:g,pageRecordStore:u,search:x,relationPropertyMenuStore:k,addPage:M,addingPage:_}):(0,$.jsx)(Ze().Ay,{type:Ze().Oh.Vertical,store:o,style:{padding:"4px 0px"},initialFocus:A.device.isMobile?void 0:0,sections:z})}function fo(e){let{relationPropertyMenuResultProps:t,menuListStore:o,draggableListStore:n}=e;const{results:r,loading:a,onScrollOffsetChange:s}=t,l=(0,i().K8)((()=>"on"===he().default.getEligibleGroup({experimentId:"search_surfaces_relation_search",defaultGroup:"unassigned"})&&a),[a]),d=0===r.length;return(0,$.jsxs)($e().H,{style:{width:"100%",maxHeight:300,position:"relative",...d&&{marginTop:0}},type:lt().A.Y,children:[d&&l&&(0,$.jsx)(ho,{}),(0,$.jsx)(go,{relationPropertyMenuResultProps:t,menuListStore:o,draggableListStore:n}),s&&(0,$.jsx)(Je().A,{onChange:s}),a?l?(0,$.jsx)(bo,{}):(0,$.jsx)(oo,{}):null]})}function ho(){const e=(0,a().IS)((e=>({sectionName:{height:12,borderRadius:4,width:"20%",marginTop:15,marginLeft:13,marginBottom:6}})),[]);return(0,$.jsx)(He().A,{style:e.sectionName})}const bo=(0,n.memo)((function(e){const{count:t=10}=e,o=(0,a().IS)((e=>({wrapper:{marginRight:8,marginLeft:12},icon:{height:16,width:16,borderRadius:4},pageName:{height:15,borderRadius:4,marginLeft:-1}})),[]),n=Array.from({length:t},(()=>!0));return(0,$.jsx)("div",{style:o.wrapper,children:(0,$.jsx)(Ke().VP,{gap:12,children:n.map(((e,t)=>(0,$.jsx)("div",{children:(0,$.jsxs)(Ke().fI,{gap:8,alignItems:"center",children:[(0,$.jsx)(He().A,{style:o.icon}),(0,$.jsx)(He().A,{style:{...o.pageName,width:Qe().XM(["30%","40%","43%","45%","48%","50%","54%","55%","60%"])}})]})},`relation-result-shimmer-${t}`)))})})}));function vo(e){let{relationPropertyMenuResultProps:t,menuListStore:o,draggableListStore:r}=e;const{results:i,loading:a,resultsType:s,schema:l,property:d,blockPropertyValueOverlayStore:c,targetCollectionStore:u,parentStore:p,searchQuery:m,relationPropertyMenuStore:g,addPage:f,addingPage:h}=t,b=0===i.length,v=l[d];return Boolean("relation"===(null==v?void 0:v.type)&&v.connectedRelation)&&b?(0,$.jsx)("div",{style:{marginTop:20},children:(0,$.jsx)(to,{blockPropertyValueOverlayStore:c,targetCollectionStore:u,sections:[],propertySchema:v,property:d,pageRecordStore:p,search:m,relationPropertyMenuStore:g,addPage:f,addingPage:h})}):(0,$.jsxs)(n.Fragment,{children:[b&&!a&&"existing"===s?void 0:(0,$.jsx)(go,{relationPropertyMenuResultProps:t,menuListStore:o,draggableListStore:r}),a&&(0,$.jsx)(oo,{})]})}const yo=(0,o(340498).wt)("questionMarkFilled",{viewBox:"0 0 14 14",svg:(0,$.jsx)("path",{d:"M7 14C6.04379 14 5.14248 13.817 4.29608 13.451C3.45425 13.085 2.71078 12.5794 2.06569 11.9343C1.42059 11.2892 0.915033 10.5458 0.54902 9.70392C0.183007 8.85752 0 7.95621 0 7C0 6.04379 0.183007 5.14477 0.54902 4.30294C0.915033 3.45654 1.4183 2.71078 2.05882 2.06569C2.70392 1.42059 3.44739 0.915033 4.28922 0.54902C5.13562 0.183007 6.03693 0 6.99314 0C7.94935 0 8.85065 0.183007 9.69706 0.54902C10.5435 0.915033 11.2892 1.42059 11.9343 2.06569C12.5794 2.71078 13.085 3.45654 13.451 4.30294C13.817 5.14477 14 6.04379 14 7C14 7.95621 13.817 8.85752 13.451 9.70392C13.085 10.5458 12.5794 11.2892 11.9343 11.9343C11.2892 12.5794 10.5435 13.085 9.69706 13.451C8.85523 13.817 7.95621 14 7 14ZM6.86275 8.46863C7.04118 8.46863 7.18072 8.42059 7.28137 8.32451C7.38203 8.22386 7.43235 8.10261 7.43235 7.96078C7.43235 7.94706 7.43235 7.93333 7.43235 7.91961C7.43235 7.90131 7.43235 7.88758 7.43235 7.87843C7.43235 7.67712 7.49183 7.50556 7.61078 7.36373C7.72974 7.21732 7.91275 7.06405 8.1598 6.90392C8.50294 6.67974 8.78431 6.44412 9.00392 6.19706C9.22811 5.95 9.3402 5.61373 9.3402 5.18824C9.3402 4.79477 9.23497 4.46536 9.02451 4.2C8.81405 3.93007 8.53726 3.72647 8.19412 3.58922C7.85556 3.45196 7.48497 3.38333 7.08235 3.38333C6.46928 3.38333 5.97059 3.50458 5.58627 3.74706C5.20654 3.98954 4.96634 4.27549 4.86569 4.6049C4.84739 4.6598 4.83137 4.71699 4.81765 4.77647C4.8085 4.83595 4.80392 4.89543 4.80392 4.9549C4.80392 5.11046 4.85654 5.2317 4.96176 5.31863C5.06699 5.40098 5.17909 5.44216 5.29804 5.44216C5.41699 5.44216 5.51765 5.41699 5.6 5.36667C5.68235 5.31177 5.75556 5.24314 5.81961 5.16078L5.94314 4.98922C6.03007 4.85196 6.12843 4.73529 6.23824 4.63922C6.34804 4.54314 6.46928 4.46993 6.60196 4.41961C6.73464 4.36928 6.87876 4.34412 7.03431 4.34412C7.35458 4.34412 7.61078 4.42647 7.80294 4.59118C7.99967 4.75588 8.09804 4.9732 8.09804 5.24314C8.09804 5.48562 8.02255 5.68464 7.87157 5.8402C7.72059 5.99118 7.48954 6.17418 7.17843 6.38922C6.9268 6.56765 6.71634 6.76209 6.54706 6.97255C6.37778 7.18301 6.29314 7.46438 6.29314 7.81667C6.29314 7.83039 6.29314 7.84641 6.29314 7.86471C6.29314 7.87843 6.29314 7.89216 6.29314 7.90588C6.29314 8.28105 6.48301 8.46863 6.86275 8.46863ZM6.84216 10.5755C7.04804 10.5755 7.22647 10.5046 7.37745 10.3627C7.53301 10.2209 7.61078 10.0471 7.61078 9.84118C7.61078 9.63529 7.53529 9.46144 7.38431 9.31961C7.23333 9.1732 7.05261 9.1 6.84216 9.1C6.63627 9.1 6.45784 9.1732 6.30686 9.31961C6.15588 9.46601 6.08039 9.63987 6.08039 9.84118C6.08039 10.0471 6.15588 10.2209 6.30686 10.3627C6.46242 10.5046 6.64085 10.5755 6.84216 10.5755Z"})});var So=()=>o(365683),Io=()=>o(919709),Co=()=>o(755199),xo=()=>o(625830),Ro=()=>o(285790),Po=()=>o(957986),wo=()=>o(887480);function ko(e){let{onConfirm:t,onClosed:o,currentBlockTitle:s,blockWithExistingRelationTitle:l,canAccessBlockWithExistingRelation:d}=e;const c=s?Io().k4p(s):void 0,u=d&&l?Io().k4p(l):void 0,p=(0,r().v3)(),m=(0,i().K8)((()=>{const{currentUserSettingsStore:e}=fe().default.state;return e}),[]),[g,f]=n.useState(!1),h=(0,Ue().wb)(g,100,((e,t)=>e===t));n.useEffect((()=>{if(!m)return;const e=h?Date.now():null;E().createAndCommit({environment:p,userAction:"twoWayWithLimitAddRelationConfirmationDialog.setDismissModalForever",canUndo:!0,perform:t=>{Co().mJ({userSettingsStore:m,transaction:t,data:{relation_limit_confirmation_dialog_dismissed_at:e}})}})}),[h,m,p]);const b=(0,n.useCallback)((()=>{t(),o()}),[t,o]),v=(0,a().IS)((e=>({checkBoxContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:4,flexGrow:0,alignSelf:"center",marginTop:24,color:e.text.secondary,fontSize:14,lineHeight:"20px"},questionMarkButton:{display:"inline-block",width:14,height:14,marginLeft:4,paddingTop:2},questionMarkIcon:{fill:e.icon.secondary}})),[]),y=(0,C().tz)();return(0,$.jsx)(Po().A,{open:!0,render:()=>(0,$.jsx)($.Fragment,{children:(0,$.jsx)(wo().Ay,{width:300,title:(0,$.jsx)(C().sA,{defaultMessage:"Are you sure you want to link this page to {currentBlockTitleText}",id:"twoWayLimitAddRelationConfirmationDialog.title",values:{currentBlockTitleText:c}}),subtitle:(0,$.jsxs)($.Fragment,{children:[d&&u?(0,$.jsx)(C().sA,{defaultMessage:"This will unlink it from {blockWithExistingRelationTitleText}.",id:"twoWayLimitAddRelationConfirmationDialog.subtitle",values:{blockWithExistingRelationTitleText:u}}):(0,$.jsx)(C().sA,{defaultMessage:"This will unlink it from another page in this database.",id:"twoWayLimitAddRelationConfirmationDialog.subtitleWithNoAccessToOtherPage"}),(0,$.jsx)(Rt().A,{renderTooltip:()=>(0,$.jsx)(C().sA,{defaultMessage:"Pages from this database can only be linked to one record.",id:"twoWayLimitAddRelationConfirmationDialog.tooltip.noAccess"}),render:e=>(0,$.jsx)(Ro().A,{...e,style:v.questionMarkButton,ariaLabel:y.formatMessage({defaultMessage:"Pages from this database can only be linked to one record.",id:"twoWayLimitAddRelationConfirmationDialog.subtitle.questionMark.ariaLabel"}),icon:yo,iconStyle:v.questionMarkIcon})})]}),confirmText:(0,$.jsx)(C().sA,{defaultMessage:"Continue",id:"twoWayLimitAddRelationConfirmationDialog.primaryButton.text"}),onConfirm:b,onDismiss:o,radioOptions:[],icon:So().H,footer:(0,$.jsxs)("div",{style:v.checkBoxContainer,children:[(0,$.jsx)(xo().A,{checked:g,onClick:()=>f(!g),size:14,id:"twoWayLimitAddRelationConfirmationDialog.doNotShowAgain"}),(0,$.jsx)("label",{htmlFor:"twoWayLimitAddRelationConfirmationDialog.doNotShowAgain",children:(0,$.jsx)(C().sA,{defaultMessage:"Don't ask again",id:"twoWayLimitAddRelationConfirmationDialog.dontAskAgain.checkbox.label"})})]})})})})}function Mo(){const{blockStore:e,schema:t,property:o,format:a}=(0,n.useContext)(O().t),s=(0,r().v3)(),d=(0,n.useMemo)((()=>new(Be().A)),[]),p=(0,i().K8)((()=>function(e){const{environment:t,blockStore:o,schema:n,property:r}=e;if(!o)return;const i=n[r];if("relation"!==(null==i?void 0:i.type))return;const a=c().Nv(i);if(!a)return;const s=ve().md.createChildStore(o,a);if(!s)return;const l=s.getParentId();if(!l)return;const d=ve().Bv.createChildStore(s,{table:v().ev,id:l});if(!d)return;const p=d.isDefined()?ge().E2(t,d):void 0,g=(0,m().A)({pageId:d.id,pageModel:d.getModel(),baseUrl:p,pageVisitSource:void 0});return{property:r,propertySchema:i,targetCollectionStore:s,targetParentUrl:g,connectedRelationFlags:{isSyncedCollectionRelation:s.isSyncedCollection(),isGithubPrRelation:u().di(i),isGoogleDriveRelation:u().H6(i),isFigmaRelation:u().KF(i),isZendeskRelation:u().up(i),isSalesforceRelation:u().V5(i),isSlackRelation:u().uv(i),isConnectedRelation:c().UU(i)}}}({environment:s,blockStore:e,schema:t,property:o})),[s,e,t,o]),g=(0,de().D)(t[o]),f=(0,i().K8)((()=>null==p?void 0:p.targetCollectionStore.getDatabaseType()),[null==p?void 0:p.targetCollectionStore]),h=(0,i().K8)((()=>g?"sharing":f===l().av?"sprint":"default"),[f,g]);return p?(0,$.jsx)(Le,{relationPropertyMenuStore:d,property:p.property,propertySchema:p.propertySchema,targetCollectionStore:p.targetCollectionStore,targetParentUrl:p.targetParentUrl,connectedRelationFlags:p.connectedRelationFlags,children:(0,$.jsx)(U().A,{capture:!0,allowMenuList:!0,allowEsc:!0,allowUndo:!0,allowTabUntab:!0,render:()=>(0,$.jsx)(_o,{type:h})})}):(0,$.jsx)(G().A,{children:(0,ee().NN)(a)?(0,$.jsx)(W().A,{title:(0,$.jsx)(C().sA,{defaultMessage:"You may not have access to the related database. Contact the form creator.",id:"database.relationPropertyMenu.formViewer.noAccess.message"})}):(0,$.jsx)(W().A,{title:(0,$.jsx)(C().sA,{defaultMessage:"You may not have access to the related database.",id:"database.relationPropertyMenu.noAccess.message"})})})}function _o(e){let{type:t}=e;const{blockStore:o,blockPropertyValueOverlayStore:a,overlayMode:s,isDisabled:l,schema:d,property:c,insertChar:u,format:p,onChange:m,analyticsFrom:g}=(0,n.useContext)(O().t),f=(0,n.useContext)(De),b=(0,r().v3)(),v=(0,r().Y0)(),I=(0,C().tz)(),x=(0,i().K8)((()=>null==f?void 0:f.relationPropertyMenuStore),[null==f?void 0:f.relationPropertyMenuStore]),R=Lo(),{relationSearchLimit:k,relationSearchQuery:M}=(0,i().K8)((()=>({relationSearchQuery:null==x?void 0:x.state.searchQuery,relationSearchLimit:null==x?void 0:x.state.searchLimit})),[x]);(0,n.useEffect)((()=>{x&&0===R.length&&x.setState({searchPopupOpen:v.isMobile,searchQuery:u??"",searchLimit:Be().A.limitIncrement,addingPage:!1})}),[]);const _=(0,i().K8)((()=>"on"===he().default.getEligibleGroup({experimentId:"search_surfaces_relation_search",defaultGroup:"unassigned"})),[]),A=Boolean(_&&M&&M.length>0&&"sprint"!==t&&"sharing"!==t),j=(0,i().K8)((()=>(0,le().Er)(b).hasPublicAccessPermission),[b]),T=(0,i().K8)((()=>{const e=null==f?void 0:f.targetCollectionStore.getSpaceId();if(o&&e)return ve().SL.createChildStore(o,{table:y().NX,id:e})}),[o,null==f?void 0:f.targetCollectionStore]),{results:D,isResultsLoading:L,fetchAdditionalServerResultsOnChange:B,searchSessionId:E,searchSessionFlowNumber:F}=(0,ce().W)({disable:!A,searchQuery:M??"",limit:k??20,type:S().Vz.BlocksInCollection,source:"relation_menu",overrideSpaceStore:j?T:void 0,filters:{parentId:null==f?void 0:f.targetCollectionStore.id,includePublicPagesWithoutExplicitAccess:p===V().j.FormViewer}}),N="sprint"===t?je:Ae,{searchResults:U,searchSessionFlowNumber:Q,isSearchLoading:z}=function(e){const{forceDisable:t,getSearchResults:o}=e,{blockPointers:a,isDisabled:s}=(0,n.useContext)(O().t),l=(0,r().v3)(),d=(0,n.useContext)(De),c=(0,n.useRef)(void 0),u=(0,X().Ks)(),p=(0,n.useRef)(0),m=(0,ue().X)("collections_cached_relation_search"),{searchQuery:g,searchLimit:f}=(0,i().K8)((()=>({searchQuery:(null==d?void 0:d.relationPropertyMenuStore.state.searchQuery)??"",searchLimit:(null==d?void 0:d.relationPropertyMenuStore.state.searchLimit)??0})),[null==d?void 0:d.relationPropertyMenuStore]),b=(0,i().K8)((()=>g===c.current),[c,g]),[{status:v,value:y}]=(0,h().Yb)((async()=>{if(s||t)return[];if(null==d||!d.propertySchema||null==d||!d.targetCollectionStore)return[];if(null!=d&&d.connectedRelationFlags.isGoogleDriveRelation||null!=d&&d.connectedRelationFlags.isFigmaRelation)return[];if(m&&u){const e=u.relationResultsCacheStore.getState(),t=e.get(d.property)??{},n=t[g];if(!n||Date.now()-n.timestamp>Be().A.resultsCacheTTL||n.results.length<f){const n=await o({environment:l,query:{query:g,limit:f},targetCollectionStore:null==d?void 0:d.targetCollectionStore,propertySchema:null==d?void 0:d.propertySchema,blockPointers:a}),r=n.slice(0,f);return e.set(d.property,{...t,[g]:{timestamp:Date.now(),results:r}}),u.relationResultsCacheStore.emit(),n}return n.results}const e=await o({environment:l,query:{query:g,limit:f},targetCollectionStore:null==d?void 0:d.targetCollectionStore,propertySchema:null==d?void 0:d.propertySchema,blockPointers:a});return b||(c.current=g,p.current+=1),e}),[s,t,null==d?void 0:d.propertySchema,null==d?void 0:d.targetCollectionStore,null==d?void 0:d.connectedRelationFlags.isGoogleDriveRelation,null==d?void 0:d.connectedRelationFlags.isFigmaRelation,null==d?void 0:d.property,m,u,o,l,g,f,a,b],{debounce:me().tu}),S=(0,i().K8)((()=>"pending"===v),[v]);return{searchResults:y,searchSessionFlowNumber:p.current,isSearchLoading:S}}({getSearchResults:N,forceDisable:A}),W=(0,n.useRef)(E),K=(0,n.useRef)(0);K.current=Q+F,(0,n.useEffect)((()=>{W.current=E,K.current=F}),[b,E,F]),(0,n.useEffect)((()=>(P().u4({environment:b,event:{eventName:"collections_relation_property_menu_open",eventProperties:{search_session_id:W.current,using_secondary_search_surfaces_hook:_}}}),()=>{P().u4({environment:b,event:{eventName:"collections_relation_property_menu_close",eventProperties:{search_session_id:W.current,search_session_flow_number:K.current}}})})),[b,_]);const H=(0,i().K8)((()=>D.map((e=>({type:_e().M7.SearchPage,store:e.store,key:e.id})))),[D]),q=(0,i().K8)((()=>(0,se().w6)(b)),[b]),G=_&&M&&M.length>0&&"default"===t?H:U,Z=(0,n.useRef)(void 0);(0,n.useEffect)((()=>{if(Boolean(null==M?void 0:M.length))return;const e=z;!e||Z.current?!e&&Z.current&&G&&(pe().default.measure(Z.current,{environment:b,data:{search_session_id:E}}),Z.current=void 0):Z.current=pe().default.mark("collection_relation_search_initial_results_loaded")}),[G,b,E,null==M?void 0:M.length,z]);const Y=!(((0,ee().NN)(p)&&q||(null==f?void 0:f.connectedRelationFlags.isFigmaRelation)||(null==f?void 0:f.connectedRelationFlags.isGoogleDriveRelation))??!1)&&"default"===t,[J,te]=n.useState(null),ne=(0,X().Ks)(),re=(0,n.useMemo)((()=>{if(!J)return null;const{blockWithExistingRelationTitle:e,currentBlockTitle:t,canAccessBlockWithExistingRelation:o}=J;return(0,$.jsx)(ko,{onConfirm:()=>{m(J.update),g&&w(b,{from:g,...(0,oe().sl)(ne),target_collection_id:null==f?void 0:f.targetCollectionStore.id}),1===(null==f?void 0:f.propertySchema.limit)&&(null==a||a.setState({isOpen:!1}))},onClosed:()=>{te(null)},currentBlockTitle:t,blockWithExistingRelationTitle:e,canAccessBlockWithExistingRelation:o})}),[g,a,J,ne,b,null==f?void 0:f.propertySchema.limit,null==f?void 0:f.targetCollectionStore.id,m]);if(!(f&&x&&d&&o&&a))return null;const ie={searchSessionId:E,shouldShowShimmers:_&&(L||z),onScrollSearchHookFn:B,searchSessionFlowNumber:K.current};if(v.isMobile)return(0,ee().NN)(p)?(0,$.jsx)(Do,{searchResults:G,isDefaultSearchLoading:z,searchHookData:{...ie,shouldShowShimmers:!1},showChangeConfirmationDialog:te}):(0,$.jsxs)(Ao,{showChangeConfirmationDialog:te,children:[(0,$.jsx)(Do,{searchResults:G,isDefaultSearchLoading:z,searchHookData:{...ie,shouldShowShimmers:!1},showChangeConfirmationDialog:te}),re]});let ae;switch(t){case"sharing":ae=Pe(I,{propertyName:f.propertySchema.name});break;case"sprint":ae=function(e){return e.formatMessage(xe.inputPlaceholder)}(I);break;default:ae=Re({intl:I,connectedRelationFlags:f.connectedRelationFlags,overlayMode:s,disabled:l,format:p})}return(0,$.jsxs)(jo,{header:(0,$.jsx)(Ne,{inputPlaceholder:ae,showTargetDatabase:Y,addPage:()=>Bo({environment:b,menuStore:x,blockPropertyValueOverlayStore:a,blockStore:o,schema:d,property:c,targetCollectionStore:f.targetCollectionStore})}),footer:(0,$.jsx)(To,{hasSearchResults:Boolean(null==G?void 0:G.length)}),children:[(0,$.jsx)(Do,{searchResults:G,isDefaultSearchLoading:z,searchHookData:ie,showChangeConfirmationDialog:te}),re]})}function Ao(e){const{children:t,showChangeConfirmationDialog:o}=e,{collectionStore:s,property:l,schema:d,blockStore:c,blockPropertyValueOverlayStore:u,isDisabled:p,canConfigureCollection:m,blockPointers:f,analyticsFrom:h,overlayMode:v,onChange:y,onDismiss:S,format:I}=(0,n.useContext)(O().t),x=(0,n.useContext)(De),R=(0,r().v3)(),P=(0,X().Ks)(),w=Lo(),M=(0,a().IS)((e=>({input:{color:e.mediumTextColor},menuTitle:{display:"flex"},databaseIcon:{display:"flex",marginLeft:2*_e().g1},databaseTitle:{marginLeft:_e().g1},addPageButton:{display:"flex",alignItems:"center"},plusIcon:{marginRight:8,width:16,height:16}})),[]),_=(0,i().K8)((()=>null==x?void 0:x.targetCollectionStore.getIcon()),[null==x?void 0:x.targetCollectionStore]),A=(0,i().K8)((()=>{const e=Boolean(be().A.bots.state.find((e=>e.integration_id===g().ob))),t=Boolean(be().A.bots.state.find((e=>e.integration_id===g().Hd))),o=Boolean(be().A.bots.state.find((e=>e.integration_id===g().e1)));return(null==x?void 0:x.connectedRelationFlags.isGithubPrRelation)&&!e||(null==x?void 0:x.connectedRelationFlags.isGoogleDriveRelation)&&!t||(null==x?void 0:x.connectedRelationFlags.isFigmaRelation)&&!o}),[null==x?void 0:x.connectedRelationFlags.isGithubPrRelation,null==x?void 0:x.connectedRelationFlags.isGoogleDriveRelation,null==x?void 0:x.connectedRelationFlags.isFigmaRelation]),j=(0,i().K8)((()=>Boolean(null==x?void 0:x.relationPropertyMenuStore.state.addingPage)),[null==x?void 0:x.relationPropertyMenuStore]),T=(0,i().K8)((()=>Boolean(null==x?void 0:x.relationPropertyMenuStore.state.searchPopupOpen)),[null==x?void 0:x.relationPropertyMenuStore]),D=(0,de().D)(d[l]);if(!(s&&c&&u&&x))return null;const{relationPropertyMenuStore:B,propertySchema:E,targetCollectionStore:F,targetParentUrl:V,connectedRelationFlags:{isConnectedRelation:U}}=x,Q=(0,$.jsx)("div",{style:M.menuTitle,children:(0,$.jsx)(C().sA,{id:"database.relationProperty.newRelation.targetDatabase",defaultMessage:"<regular>In</regular> {databaseWithIcon}",values:{regular:e=>e,databaseWithIcon:(0,$.jsxs)("div",{style:M.databaseIcon,children:[(0,$.jsx)(H().A,{disabled:!0,icon:_,isEmptyPage:!1,size:_e().$w}),(0,$.jsx)(q().A,{store:F,underline:!0,style:M.databaseTitle,maxLength:25})]})}})});return(0,$.jsxs)(z().A,{menuType:ie().gu.Modal,title:E.name,right:(0,$.jsx)(C().sA,{defaultMessage:"Done",id:"relationPropertyMenu.mobileMenuDone.button"}),onClickRight:S,children:[!U&&(0,$.jsx)(G().A,{disableMobilePadding:!0,children:(0,$.jsx)(N().A,{focused:!1,title:Q,showExtensionArrow:!1,onClick:()=>function(e){const{environment:t,targetParentUrl:o,analyticsFrom:n}=e;L().oo({environment:t,url:o}),n&&k(t,{from:n})}({environment:R,targetParentUrl:V,analyticsFrom:h})})}),!A&&(0,$.jsx)(G().A,{topBorder:!0,disableMobilePadding:!1,children:(0,$.jsx)(K().Ay,{popupType:K().nl.SlideUp,open:T,origin:(0,$.jsx)(N().A,{focused:!1,title:(0,$.jsxs)("span",{style:M.addPageButton,children:[(0,b().W)(M.plusIcon),D?(0,$.jsx)(C().sA,{defaultMessage:"Select {name}",id:"relationPropertyMenu.add.button",values:{name:E.name}}):(0,$.jsx)(C().sA,{defaultMessage:"Add a page",id:"relationPropertyMenu.addAPage.button"})]}),onClick:()=>{var e;(e=B).setState({...e.state,searchPopupOpen:!0,searchLimit:Be().A.limitIncrement})},style:M.input}),render:()=>t,trapFocus:!1})}),(0,$.jsx)(ro,{collectionStore:s,collectionId:s.id,targetCollectionStore:F,results:w,resultsType:"existing",property:l,schema:d,propertySchema:E,parentStore:c,disabled:p,canConfigureCollection:m,loading:!1,canDrag:!1,blockPropertyValueOverlayStore:u,onAccept:(e,t)=>function(e){const{environment:t,analyticsFrom:o,result:n,openInNew:r}=e;n.type===_e().M7.SelectedPage&&Oo({environment:t,analyticsFrom:o,result:n,openInNew:r})}({environment:R,analyticsFrom:h,result:e,openInNew:t}),onClickActionButton:e=>Fo({environment:R,collectionContextStore:P,blockPropertyValueOverlayStore:u,result:e,blockPointers:f,onChange:y,analyticsFrom:h,overlayMode:v,propertySchema:E,targetCollectionStore:F,showChangeConfirmationDialog:o}),onCreatePage:e=>Eo({environment:R,collectionContextStore:P,relationPropertyMenuStore:B,blockPointers:f,onChange:y,index:e,propertySchema:E,targetCollectionStore:F}),handleClearProperty:()=>y({newValues:[],oldValues:f}),relationPropertyMenuStore:B,addPage:(e,t)=>Bo({environment:R,menuStore:B,blockPropertyValueOverlayStore:u,blockStore:c,schema:d,property:l,targetCollectionStore:F,uri:e,overrideBotId:t}),addingPage:j,format:I})]})}function jo(e){const{children:t,header:o,footer:r}=e,s=(0,n.useContext)(De),l=(0,i().K8)((()=>{var e;const t=Boolean(be().A.bots.state.find((e=>e.integration_id===g().ob))),o=(null==s?void 0:s.connectedRelationFlags.isGoogleDriveRelation)||(null==s?void 0:s.connectedRelationFlags.isFigmaRelation)||(null==s?void 0:s.connectedRelationFlags.isZendeskRelation)||(null==s?void 0:s.connectedRelationFlags.isSalesforceRelation)||(null==s?void 0:s.connectedRelationFlags.isSlackRelation),n=null===(e=fe().default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit();return(null==s?void 0:s.connectedRelationFlags.isGithubPrRelation)&&!t||o&&!n}),[null==s?void 0:s.connectedRelationFlags.isGithubPrRelation,null==s?void 0:s.connectedRelationFlags.isGoogleDriveRelation,null==s?void 0:s.connectedRelationFlags.isFigmaRelation,null==s?void 0:s.connectedRelationFlags.isZendeskRelation,null==s?void 0:s.connectedRelationFlags.isSalesforceRelation,null==s?void 0:s.connectedRelationFlags.isSlackRelation]),d=(0,a().IS)((e=>({menuContent:{overflow:"hidden",maxHeight:"70vh"}})),[]);return(0,$.jsx)(z().A,{menuType:ie().gu.Popup,header:!l&&o,footer:r,children:(0,$.jsx)("div",{style:d.menuContent,children:t})})}function To(e){const{hasSearchResults:t}=e,o=(0,n.useContext)(De),{blockPointers:a,onChange:s,overlayMode:l,isDisabled:d,insertChar:c,blockStore:u}=(0,n.useContext)(O().t),p=(0,r().v3)(),m=(0,X().Ks)(),g=(0,i().K8)((()=>(null==o?void 0:o.relationPropertyMenuStore.state.searchQuery)??c??""),[null==o?void 0:o.relationPropertyMenuStore,c]),f=Boolean(null==g?void 0:g.trim());if(!o)return null;const{relationPropertyMenuStore:h,propertySchema:b,targetCollectionStore:v}=o;return b.connectedRelation?null:!d&&v&&u&&f&&t?(0,$.jsx)(J,{targetCollectionStore:v,title:g,parentBlockStore:u,onClick:e=>Eo({environment:p,collectionContextStore:m,relationPropertyMenuStore:h,blockPointers:a,onChange:s,index:e,propertySchema:b,targetCollectionStore:v}),focused:!1,isSection:!0,index:"add"===(null==l?void 0:l.type)?null==l?void 0:l.index:void 0}):null}function Do(e){const{searchResults:t,isDefaultSearchLoading:o,searchHookData:{shouldShowShimmers:s,onScrollSearchHookFn:l,searchSessionId:d,searchSessionFlowNumber:c},showChangeConfirmationDialog:u}=e,{blockPointers:m,collectionStore:g,collectionId:h,property:b,schema:y,blockStore:S,blockPropertyValueOverlayStore:I,isDisabled:x,canConfigureCollection:R,analyticsFrom:k,overlayMode:M,onChange:A,insertChar:j,format:T,onDismiss:L}=(0,n.useContext)(O().t),B=(0,n.useContext)(De),E=(0,r().v3)(),F=(0,r().Y0)(),V=(0,C().tz)(),N=(0,X().Ks)(),U=(0,de().D)(y[b]),{searchQuery:W,addingPage:K}=(0,i().K8)((()=>(null==B?void 0:B.relationPropertyMenuStore.state)??{searchQuery:j??"",addingPage:!1}),[null==B?void 0:B.relationPropertyMenuStore,j]),H=(0,a().IS)((e=>({inputMenu:{...F.isAndroid&&{borderBottom:"none"}}})),[F.isAndroid]),q=Lo(),G=(0,i().K8)((()=>S?W?q.filter((e=>{const t=e.store,o=t.getModel();if(o)return(0,p().Pt)({block:o,query:W,getRecordModel:t.getRecordModel,userTimeZone:(0,f().P)(),schema:y,intl:re().A.getIntl(),onlyPropertyIds:["title"]})})):q:[]),[S,y,W,q]),Y=(0,i().K8)((()=>!t&&0===G.length||s),[G.length,s,t]),te=(0,i().K8)((()=>S?S.getSpaceId():void 0),[S]),oe=n.useRef(void 0);if(n.useEffect((()=>{Y&&""!==W&&(oe.current=pe().default.mark("rum.relation_search_query"))}),[Y,W]),n.useEffect((()=>{!Y&&""!==W&&oe.current&&(pe().default.measure(oe.current,{environment:E,data:{search_session_id:d}}),oe.current=void 0)}),[Y,E,d,W]),!(S&&te&&I&&B))return null;const{relationPropertyMenuStore:ne,propertySchema:ae,targetCollectionStore:le,connectedRelationFlags:ce}=B,ue=[...G];t&&t.forEach((e=>{if((e.type===_e().M7.SelectedPage||e.type===_e().M7.SearchPage)&&G.find((t=>(t.type===_e().M7.SelectedPage||t.type===_e().M7.SearchPage)&&t.store.id===e.store.id)))return;const t=ae.limit?m.slice(0,1):m,o=e.type!==_e().M7.NewPage?t.map((e=>e.id)).includes(e.store.id):void 0;o&&!W&&"add"===(null==M?void 0:M.type)||(e.type===_e().M7.SearchPage&&o?ue.push({...e,type:_e().M7.SelectedPage}):e.type!==_e().M7.SelectedPage||o?ue.push(e):ue.push({...e,type:_e().M7.SearchPage}))}));const me=ue.filter((e=>e.type===_e().M7.SearchPage)),ge=e=>{if(e.type===_e().M7.SearchPage){const t=me.indexOf(e);if(-1===t)return;const o=1/(t+1),n={index:t,search_session_id:d,query_length:W.length,reciprocal_rank:o,search_session_flow_number:c};P().u4({environment:E,event:{eventName:"collections_relation_search_item_click",eventProperties:n}}),he().default.logEvent("collections_relation_search_mrr",o,n)}},be=(0,$.jsx)(ro,{collectionStore:g,collectionId:h,targetCollectionStore:le,results:ue,resultsType:0===ue.length&&0===q.length?"existing":"search",property:b,schema:y,propertySchema:ae,parentStore:S,disabled:x,canConfigureCollection:R,loading:Y,canDrag:!x&&0===W.length&&!(0,ee().NN)(T),disableClickToNavigateToPage:(0,ee().NN)(T),blockPropertyValueOverlayStore:I,onAccept:(e,t)=>{!function(e){const{environment:t,collectionId:o,collectionContextStore:n,blockPointers:r,result:i,analyticsFrom:a,isDisabled:s,onChange:l,overlayMode:d,openInNew:c,propertySchema:u,targetCollectionStore:p,blockPropertyValueOverlayStore:m,showChangeConfirmationDialog:g}=e;if(s)return;if(!p||!u)return;const{mainEditorCurrentBlockStore:f}=fe().default.state;if(!f)return;if(i.type===_e().M7.SearchPage){const e=i.store,s={newValues:u.limit?[i.store.pointer]:"add"===(null==d?void 0:d.type)?[...r.slice(0,d.index),e.pointer,...r.slice(d.index)]:[...r,e.pointer],oldValues:r};D().N({environment:t,store:m,update:s,collectionStore:null==n?void 0:n.collectionStore(),propertySchema:u}).then((e=>{var r,i;e?g(e):(l(s),a&&w(t,{from:a,collection_id:o,collection_view_id:null==n||null===(r=n.collectionViewStore())||void 0===r?void 0:r.id,collection_view_block_id:null==n||null===(i=n.collectionViewBlockStore())||void 0===i?void 0:i.id,target_collection_id:null==p?void 0:p.id}))})).catch((e=>{console.error(e)}))}else i.type===_e().M7.SelectedPage&&Oo({environment:t,analyticsFrom:a,result:i,openInNew:c})}({environment:E,collectionId:h,collectionContextStore:N,blockPointers:m,result:e,analyticsFrom:k,isDisabled:x,onChange:A,overlayMode:M,openInNew:t,propertySchema:ae,targetCollectionStore:le,showChangeConfirmationDialog:u,blockPropertyValueOverlayStore:I}),ge(e)},onClickActionButton:e=>{Fo({environment:E,collectionContextStore:N,blockPropertyValueOverlayStore:I,result:e,blockPointers:m,onChange:A,analyticsFrom:k,overlayMode:M,propertySchema:ae,targetCollectionStore:le,showChangeConfirmationDialog:u}),ge(e)},onScrollOffsetChange:e=>function(e){const{offsetFromBottom:t,store:o,isLoading:n,searchResults:r,onScrollSearchHookFn:i}=e,a=o.state.searchLimit+Be().A.limitIncrement;if(t<Be().A.incrementScrollOffset&&!n&&((null==r?void 0:r.length)??0)>=o.state.searchLimit){if(i)return void i(Be().A.limitIncrement);o.setState({...o.state,searchLimit:a})}}({offsetFromBottom:e,store:ne,isLoading:o,searchResults:t,onScrollSearchHookFn:l}),onDrag:e=>function(e){const{newPageIds:t,blockPointers:o,spaceId:n,onChange:r,analyticsFrom:i,environment:a}=e;r({newValues:t.map((e=>({id:e,spaceId:n,table:v().ev}))),oldValues:o}),i&&(0,_().F)(a,{from:i})}({environment:E,newPageIds:e,blockPointers:m,spaceId:te,onChange:A,analyticsFrom:k}),onCreatePage:e=>Eo({environment:E,collectionContextStore:N,relationPropertyMenuStore:ne,blockPointers:m,onChange:A,index:e,propertySchema:ae,targetCollectionStore:le}),handleClearProperty:()=>A({newValues:[],oldValues:m}),searchQuery:W,overlayMode:M,relationPropertyMenuStore:ne,addPage:(e,t)=>Bo({environment:E,menuStore:ne,blockPropertyValueOverlayStore:I,blockStore:S,schema:y,property:b,uri:e,targetCollectionStore:le,overrideBotId:t}),addingPage:K,format:T});if(!F.isMobile)return be;let ve;return ve=U?Pe(V,{propertyName:ae.name}):Re({connectedRelationFlags:ce,overlayMode:M,disabled:x,format:T,intl:V}),(0,$.jsx)(z().A,{menuType:ie().gu.Modal,title:(0,$.jsx)(C().sA,{defaultMessage:"Relation",id:"relationPropertyMenu.mobileRelationMenu.title"}),left:(0,$.jsx)(Z().A,{href:(0,se().xS)("guides.relations"),analyticsFrom:"relation_menu"}),right:(0,$.jsx)(C().sA,{defaultMessage:"Done",id:"relationPropertyMenu.mobileDoneButton"}),header:(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(Q().Ay,{value:W,disabled:x,onChange:e=>{const t=e.target.value;ne.setState({...ne.state,searchQuery:t,searchLimit:Be().A.limitIncrement})},placeholder:ve,showClearButton:!0,focusInitial:!0,style:H.inputMenu}),W&&!x&&!ce.isConnectedRelation&&(0,$.jsx)(J,{targetCollectionStore:le,title:W,parentBlockStore:S,onClick:e=>Eo({environment:E,collectionContextStore:N,relationPropertyMenuStore:ne,blockPointers:m,onChange:A,index:e,propertySchema:ae,targetCollectionStore:le}),focused:!1,isSection:!0})]}),onClickRight:()=>(0,ee().NN)(T)?L():ne.reset(),children:be})}function Lo(){const e=(0,n.useContext)(De),{blockStore:t,blockPointers:o,overlayMode:r}=(0,n.useContext)(O().t),a=(0,i().K8)((()=>(null==e?void 0:e.relationPropertyMenuStore.state.searchQuery)??""),[null==e?void 0:e.relationPropertyMenuStore]);return(0,i().K8)((()=>t&&null!=e&&e.propertySchema&&null!=e&&e.targetCollectionStore&&(a||"add"!==(null==r?void 0:r.type))?u().bG({relationValue:o,propertySchema:null==e?void 0:e.propertySchema,getRecordModel:t.getRecordModel,includeDeleted:he().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:he().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:he().default.checkGate({gateName:"relations_show_no_access"})}).map((e=>{const o=ve().Bv.createChildStore(t,e);return{key:e.id,type:_e().M7.SelectedPage,store:o}})):[]),[t,o,r,a,null==e?void 0:e.propertySchema,null==e?void 0:e.targetCollectionStore])}async function Bo(e){const{environment:t,menuStore:o,blockPropertyValueOverlayStore:n,blockStore:r,schema:i,property:a,uri:s,overrideBotId:l,targetCollectionStore:d}=e;if(!d)return;const c=await j().R.clipboardActions.load(),p=d.getFormat().integration_id,m=be().A.externalAuthentications.state.filter((e=>e.integration_id===p))[0],f=d.getFormat().pattern_name,h=be().A.integrations.state.find((e=>e.id===p)),b=r instanceof ve().Bv?r:void 0,y=r instanceof ve().Bv?r.getPropertyStore(a):void 0;o.setState({...o.state,addingPage:!0});try{var S,w;if(!h||!b||!y)return;const e=u().n(y.getValue()),r=s||o.state.searchQuery||"";if(!(0,ae().WK)({integration:h,patternName:f,url:r}))return void T().ui({items:[{label:(0,$.jsx)(C().sA,{id:"connectedRelationPropertyMenuResults.unsupportedUrlErrorDialog.copyDebuggingInformation",defaultMessage:"Copy debugging information"}),color:"blue",onAccept:()=>{c.copyString({environment:t,stringValue:JSON.stringify({botId:null==m?void 0:m.parent_id,url:r},null,2),copiedMessage:c.clipboardMessages.copiedToClipboard})}},{label:(0,$.jsx)(C().sA,{id:"connectedRelationPropertyMenuResults.unsupportedUrlErrorDialog.closeButton",defaultMessage:"Close"}),onAccept:()=>{}}],showCancel:!1,keepFocus:!1,message:(0,$.jsx)(C().sA,{id:"connectedRelationPropertyMenuResults.unsupportedUrlErrorDialog.title",defaultMessage:"This source is currently not supported. Please try a different source."})});const p=i[a],k=u().di(p),M=k?y.id:void 0,_=u().H6(p),j=u().KF(p),D=u().up(p),L=u().sP(p),O=u().V5(p),V=u().uv(p),N=L&&he().default.checkGate({gateName:"cron_connected_relation"}),U=D&&he().default.checkGate({gateName:"zendesk_ai_enabled"}),Q=O&&he().default.checkGate({gateName:"salesforce_connected_relation"}),z=V&&he().default.checkGate({gateName:"slack_connected_relation"}),W=(0,te().jw)(h.id),K=(null==h?void 0:h.id)===g().ob?null===(S=W[0])||void 0===S?void 0:S.id:null==m?void 0:m.parent_id;let H=k||_||D||N||j||Q||z?W.map((e=>e.id)):[K];_&&l&&(H=[l]);const q=await F().pP({environment:t,url:r,botIds:H,userDefinedExternalCollectionStore:d,relatedPageId:M});if(!q)return;const G=(null===(w=ye().subscriptionDataStoreInstance.state)||void 0===w?void 0:w.addOns)??[];U&&(0,I().GI)(G)&&(A().callApi({eventName:"getZendeskTicketConversation",environment:t,data:{ticketUrl:r,spaceId:q.getSpaceId(),botId:H[0],pageId:y.id}}),P().vd(t,"zendesk_unfurl_ai")),E().createAndCommit({userAction:"connectedRelationPropertyMenuResults.createRelationPage",environment:t,canUndo:!0,perform:o=>{const r={id:q.id,table:v().ev,spaceId:q.getSpaceId()},i=null!=p&&p.limit?[r]:[...e,r],s=u().Ap(i);B().KY({environment:t,store:y,value:s,transaction:o}),n&&n.state.isOpen&&n.state.collectionContextStore&&((0,x().E)({environment:t,collectionContextStore:n.state.collectionContextStore,block_id:b.id,property:a,property_type:"relation",from:"relation_section",isFromBulkActionsToolbar:!1,integration_id:h.id,action:"add",value_count:i.length}),R().v(t,{...(0,oe().sl)(n.state.collectionContextStore),from:"relation_menu",type:"page",integration_id:h.id,creating_block_id:b.id}))}}),o.reset()}finally{o.setState({...o.state,addingPage:!1})}}function Eo(e){const{environment:t,collectionContextStore:o,relationPropertyMenuStore:n,blockPointers:r,onChange:i,index:a,propertySchema:s,targetCollectionStore:l}=e,d=null==l?void 0:l.getSpaceId(),c=null==s?void 0:s.limit,u=(0,ne().zP)({environment:t,table:v().ev,spaceId:d}),p=u.id,m=c?[u]:a?[...r.slice(0,a),u,...r.slice(a)]:[...r,u];i({newPage:{id:p,spaceId:d,name:n.state.searchQuery},newValues:m,oldValues:r}),R().v(t,{...(0,oe().sl)(o),from:"relation_menu",type:"page",target_collection_id:null==l?void 0:l.id,new_page_id:p,creating_block_id:p})}function Fo(e){var t;const{environment:o,collectionContextStore:n,blockPropertyValueOverlayStore:r,result:i,blockPointers:a,onChange:s,analyticsFrom:l,overlayMode:c,propertySchema:u,targetCollectionStore:p,showChangeConfirmationDialog:m}=e,{mainEditorCurrentBlockStore:g}=fe().default.state;if(!g||!r.state.isOpen)return;const f=e=>{s(e),l&&w(o,{from:l,...(0,oe().sl)(n),target_collection_id:null==p?void 0:p.id}),v&&(null==r||r.setState({isOpen:!1}))},h=null==u?void 0:u.limit,b=(0,ee().NN)(r.state.format),v=b?(0,d().hm)(u,null===(t=r.state.formQuestionStore)||void 0===t?void 0:t.getModel()):h;if(i.type===_e().M7.SearchPage){let e;if(1===v)e={newValues:[i.store.pointer],oldValues:a};else if(void 0===v||v&&a.length+1<=v){const t="add"===(null==c?void 0:c.type)?[...a.slice(0,c.index),i.store.pointer,...a.slice(c.index)]:[...a,i.store.pointer];e={newValues:t,oldValues:a}}e&&(b?f(e):D().N({environment:o,store:r,update:e,collectionStore:null==n?void 0:n.collectionStore(),propertySchema:u}).then((t=>{t?m(t):f(e)})).catch((e=>{console.error(e)})))}else if(i.type===_e().M7.SelectedPage){const e=a.filter((e=>e.id!==i.store.id));f({newValues:e,oldValues:a})}}function Oo(e){const{environment:t,result:o,openInNew:n,analyticsFrom:r}=e,{mainEditorCurrentBlockStore:i}=fe().default.state;if(!i)return;let a;const l=o.store;if(n){const e=l.isDefined()?ge().E2(t,l):void 0;a=(0,m().A)({pageId:l.id,pageModel:l.getModel(),baseUrl:e,pageVisitSource:s().y8.LinkInPage})}else{const e=i.isDefined()?ge().E2(t,i):void 0;a=(0,m().A)({pageId:i.id,pageModel:i.getModel(),baseUrl:e,peekViewBlockId:l.id,pageVisitSource:s().y8.LinkInPage})}L().oo({environment:t,url:a,openInNew:n}),r&&(0,M()._)(t,{from:r,meta_click:Boolean(n)})}},158359:(e,t,o)=>{o.d(t,{P:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowDown",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},174723:(e,t,o)=>{o.d(t,{$Y:()=>g,AF:()=>c,Px:()=>m,Up:()=>u,dY:()=>p});o(898992),o(354520);var n=()=>o(662303),r=()=>o(427704),i=()=>o(534177),a=()=>o(939768),s=()=>o(780054),l=()=>o(22102),d=()=>o(630116);async function c(e,t){const o=await l().k.load();return e.filter((e=>{const n=e.getCopiedFromPointer();return Boolean(n&&o.isTemplate(n)&&Boolean(t&&t(n.id)))}))}function u(e){const t=window.location.href;return a().O$(t,{tg:e.templateGalleryItem})}function p(e){let t;return e instanceof d().$x?t=e.getBlockId():"type"in e?"preset"===e.type?t=void 0:"pageTemplate"===e.type?t=e.template.rootId:(0,i().HB)(e):t=e.rootId,t}function m(e){const t=n().locale&&"en-us"!==n().locale.toLocaleLowerCase()?`/${n().locale.toLowerCase()}`:"",o=void 0!==e?`${t}${r().JZ.templates}/${encodeURIComponent(e)}`:`${t}${r().JZ.templates}`;return`${s().A.domainBaseUrl}${o}`}function g(e){if(!e)return"";try{const o=JSON.parse(e);if("text"===o.content[0].content[0].nodeType){var t;const e=(null==o||null===(t=o.content)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.content)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value)||"";return e.replace(/^(#{2,6})\s+/gm,"# ")}}catch(o){return""}}},175213:(e,t,o)=>{o.d(t,{G:()=>i});var n=()=>o(989423),r=()=>o(508496);function i(e,t){n().vd(e,"delete_property",t),r().default.logEvent("delete_property")}},183607:(e,t,o)=>{o.d(t,{X:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowsDiverging",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M6 11.2891C6.42188 11.2891 6.63281 11.0469 6.63281 10.5625V7.3457C6.63281 7.00586 6.71875 6.64062 6.89062 6.25C7.06641 5.85938 7.29492 5.47266 7.57617 5.08984C7.86133 4.70703 8.16992 4.35547 8.50195 4.03516C8.83789 3.71484 9.16406 3.45312 9.48047 3.25L9.95508 2.94531C10.1621 2.81641 10.2656 2.63281 10.2656 2.39453C10.2656 2.21875 10.2109 2.07227 10.1016 1.95508C9.99219 1.83789 9.8418 1.7793 9.65039 1.7793C9.4668 1.7793 9.29102 1.83398 9.12305 1.94336L8.81836 2.14844C8.51367 2.34766 8.20898 2.58984 7.9043 2.875C7.59961 3.15625 7.31641 3.45508 7.05469 3.77148C6.79297 4.08398 6.56836 4.39258 6.38086 4.69727C6.19727 4.99805 6.07227 5.26953 6.00586 5.51172H5.98828C5.91797 5.26953 5.79102 4.99805 5.60742 4.69727C5.42383 4.39258 5.19922 4.08398 4.93359 3.77148C4.67188 3.45508 4.38867 3.15625 4.08398 2.875C3.7832 2.58984 3.48047 2.34766 3.17578 2.14844L2.87109 1.94336C2.69922 1.83398 2.52344 1.7793 2.34375 1.7793C2.14844 1.7793 1.99609 1.83984 1.88672 1.96094C1.78125 2.08203 1.72852 2.22461 1.72852 2.38867C1.72852 2.62695 1.83203 2.8125 2.03906 2.94531L2.51367 3.25C2.83008 3.45312 3.1543 3.71484 3.48633 4.03516C3.81836 4.35547 4.12695 4.70703 4.41211 5.08984C4.69727 5.47266 4.92773 5.85938 5.10352 6.25C5.2793 6.64062 5.36719 7.00586 5.36719 7.3457V10.5625C5.36719 11.0469 5.57812 11.2891 6 11.2891ZM1.81641 3.9707L3.71484 1.52734C3.85547 1.33984 3.88281 1.17578 3.79688 1.03516C3.71484 0.890625 3.55469 0.814453 3.31641 0.806641L0.808594 0.712891C0.613281 0.705078 0.466797 0.763672 0.369141 0.888672C0.271484 1.00977 0.251953 1.16406 0.310547 1.35156L1.02539 3.75391C1.0918 3.98438 1.20312 4.125 1.35938 4.17578C1.51953 4.22656 1.67188 4.1582 1.81641 3.9707ZM10.0898 3.95898C10.2266 4.1543 10.375 4.23047 10.5352 4.1875C10.6992 4.14062 10.8164 4.00391 10.8867 3.77734L11.6777 1.39258C11.7402 1.20508 11.7246 1.04883 11.6309 0.923828C11.541 0.798828 11.3984 0.736328 11.2031 0.736328L8.68945 0.753906C8.45117 0.753906 8.28711 0.824219 8.19727 0.964844C8.10742 1.10156 8.13086 1.26562 8.26758 1.45703L10.0898 3.95898Z"})})},198048:(e,t,o)=>{o.d(t,{C:()=>a});var n=o(296540),r=()=>o(51194),i=()=>o(610104);function a(){const e=(0,r().a)(),[t,o]=(0,n.useState)(0),a=(0,n.useCallback)((()=>{e.current&&o(t+1)}),[t]);return[(0,n.useCallback)((()=>i().Gt.postRender(a)),[a]),t]}},203066:(e,t,o)=>{o.d(t,{N:()=>d});var n=o(296540);class r extends n.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function i({children:e,isPresent:t}){const o=(0,n.useId)(),i=(0,n.useRef)(null),a=(0,n.useRef)({width:0,height:0,top:0,left:0});return(0,n.useInsertionEffect)((()=>{const{width:e,height:n,top:r,left:s}=a.current;if(t||!i.current||!e||!n)return;i.current.dataset.motionPopId=o;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${o}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${n}px !important;\n            top: ${r}px !important;\n            left: ${s}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[t]),n.createElement(r,{isPresent:t,childRef:i,sizeRef:a},n.cloneElement(e,{ref:i}))}const a=({children:e,initial:t,isPresent:r,onExitComplete:a,custom:l,presenceAffectsLayout:d,mode:c})=>{const u=(0,o(328601).M)(s),p=(0,n.useId)(),m=(0,n.useMemo)((()=>({id:p,initial:t,isPresent:r,custom:l,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;a&&a()},register:e=>(u.set(e,!1),()=>u.delete(e))})),d?void 0:[r]);return(0,n.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[r]),n.useEffect((()=>{!r&&!u.size&&a&&a()}),[r]),"popLayout"===c&&(e=n.createElement(i,{isPresent:r},e)),n.createElement(o(786719).t.Provider,{value:m},e)};function s(){return new Map}const l=e=>e.key||"";const d=({children:e,custom:t,initial:r=!0,onExitComplete:i,exitBeforeEnter:s,presenceAffectsLayout:d=!0,mode:c="sync"})=>{(0,o(285238).V)(!s,"Replace exitBeforeEnter with mode='wait'");const u=(0,n.useContext)(o(29473).L).forceRender||(0,o(198048).C)()[0],p=(0,o(51194).a)(),m=function(e){const t=[];return n.Children.forEach(e,(e=>{(0,n.isValidElement)(e)&&t.push(e)})),t}(e);let g=m;const f=(0,n.useRef)(new Map).current,h=(0,n.useRef)(g),b=(0,n.useRef)(new Map).current,v=(0,n.useRef)(!0);if((0,o(525128).E)((()=>{v.current=!1,function(e,t){e.forEach((e=>{const o=l(e);t.set(o,e)}))}(m,b),h.current=g})),(0,o(757491).l)((()=>{v.current=!0,b.clear(),f.clear()})),v.current)return n.createElement(n.Fragment,null,g.map((e=>n.createElement(a,{key:l(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:d,mode:c},e))));g=[...g];const y=h.current.map(l),S=m.map(l),I=y.length;for(let o=0;o<I;o++){const e=y[o];-1!==S.indexOf(e)||f.has(e)||f.set(e,void 0)}return"wait"===c&&f.size&&(g=[]),f.forEach(((e,o)=>{if(-1!==S.indexOf(o))return;const r=b.get(o);if(!r)return;const s=y.indexOf(o);let v=e;if(!v){const e=()=>{f.delete(o);const e=Array.from(b.keys()).filter((e=>!S.includes(e)));if(e.forEach((e=>b.delete(e))),h.current=m.filter((t=>{const n=l(t);return n===o||e.includes(n)})),!f.size){if(!1===p.current)return;u(),i&&i()}};v=n.createElement(a,{key:l(r),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:d,mode:c},r),f.set(o,v)}g.splice(s,0,v)})),g=g.map((e=>{const t=e.key;return f.has(t)?e:n.createElement(a,{key:l(e),isPresent:!0,presenceAffectsLayout:d,mode:c},e)})),n.createElement(n.Fragment,null,f.size?g:g.map((e=>(0,n.cloneElement)(e))))}},279900:(e,t,o)=>{function n(e){let t,o,n;return async function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t?(n=i,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...i),t)}}o.d(t,{A:()=>n})},283860:(e,t,o)=>{o.d(t,{A:()=>c});o(296540);var n=()=>o(484714),r=()=>o(401497),i=()=>o(148307),a=()=>o(959013),s=()=>o(284371),l=()=>o(132389),d=o(474848);function c(e){const t=(0,a().tz)(),o=function(e){const{isMobile:t}=(0,n().Y0)(),o=t?18:14,i=1,a=6,l=20;return(0,r().IS)((t=>({githubContainer:{display:"flex",alignSelf:"center",flexDirection:"column",width:e||"90%",padding:l,border:`${i}px solid ${t.tableDividerColor}`,borderRadius:a,borderBottomRightRadius:6,cursor:"default"},githubPrTitleRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:`calc(100% + ${l}px)`,overflow:"hidden"},githubPrTitle:{display:"inline-flex",fontSize:o,fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",background:t.whiteButtonBackground,padding:"2px 4px",borderTopLeftRadius:5,borderBottomLeftRadius:5,borderLeft:`2px solid ${t.blueColor}`,borderTop:`2px solid ${t.blueColor}`,borderBottom:`2px solid ${t.blueColor}`,width:"100%"},githubTask:{background:"light"===t.mode?t.accentColors.blue[50]:t.accentColors.blue[400]},githubPrInfoRow:{display:"inline-flex"},githubPrInfoPill:{display:"flex",flexDirection:"row",alignItems:"center",width:"fit-content",padding:"4px 10px",borderRadius:"2em",background:"#238636",flexShrink:0,...s().RC},githubPrInfoOpenText:{color:"white",fontSize:o-2,fontWeight:500},githubPrInfoMergeInto:{display:"inline-flex",alignItems:"center",fontSize:o-2,color:t.lightTextColor,...s().RC},githubPrInfoMain:{padding:"0px 4px",fontFamily:s().Tf.githubMono,background:t.cardPressedBackground,borderRadius:a,color:t.regularTextColor,verticalAlign:"text-bottom",...s().RC}})),[o,e])}(e.width),c=(0,d.jsx)("div",{id:"github-preview-github-pr-title-row",style:o.githubPrTitleRow,children:(0,d.jsxs)("div",{id:"github-preview-github-pr-title-wrapper",style:o.githubPrTitle,children:[(0,d.jsx)(l().A,{size:2}),"[",(0,d.jsxs)("div",{id:"github-preview-github-pr-task",style:o.githubTask,children:[e.uniqueIdPrefix||t.formatMessage(u.idPrefix),e.uniqueIdValue?`-${e.uniqueIdValue}`:"-1"]}),"]",(0,d.jsx)(l().A,{size:2}),t.formatMessage(u.prTitle)]})}),p=(0,d.jsxs)("div",{id:"github-preview-github-pr-info-row",style:o.githubPrInfoRow,children:[(0,d.jsxs)("div",{id:"github-preview-github-open-pr-pill",style:o.githubPrInfoPill,children:[(0,d.jsx)("img",{src:i().A.images.externalIntegrations.githubPullOpenIconWhitePng,style:{width:16,height:16}}),(0,d.jsx)(l().A,{size:2}),(0,d.jsx)("div",{style:o.githubPrInfoOpenText,children:t.formatMessage(u.open)})]}),(0,d.jsx)(l().A,{size:8}),(0,d.jsx)("div",{id:"github-preview-github-merge-into-main",style:o.githubPrInfoMergeInto,children:(0,d.jsxs)("span",{style:o.githubPrInfoMergeInto,children:[t.formatMessage(u.mergeInto),(0,d.jsx)(l().A,{size:4}),(0,d.jsx)("span",{style:o.githubPrInfoMain,children:t.formatMessage(u.main)})]})})]});return(0,d.jsxs)("div",{id:"github-preview-github-container",style:o.githubContainer,children:[c,(0,d.jsx)(l().A,{size:12}),p]})}const u=(0,a().YK)({dismissButtonAriaLabel:{defaultMessage:"A button to dismiss the user education preview.",id:"database.viewSettings.githubConfigTab.preview.dismissButtonAriaLabel"},idPrefix:{defaultMessage:"TASK",id:"database.viewSettings.githubConfigTab.preview.idPrefix"},prTitle:{defaultMessage:"GitHub PR Title",id:"database.viewSettings.githubConfigTab.preview.prTitle"},open:{defaultMessage:"Open",id:"database.viewSettings.githubConfigTab.preview.open"},mergeInto:{defaultMessage:"Merge into",id:"database.viewSettings.githubConfigTab.preview.mergeInto"},main:{defaultMessage:"main",id:"database.viewSettings.githubConfigTab.preview.main"}})},287531:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(296540),r=o(474848);function i(e){const{pageName:t,targetCollectionStore:n,...i}=e,a=(0,o(484714).Y0)(),s=(0,o(56366).K8)((()=>n.getIcon()),[n]),l=(0,o(401497).IS)((e=>({medium:{color:e.mediumTextColor},dbName:{display:"flex",alignItems:"center",marginLeft:4},title:{marginLeft:o(246219).g1*(a.isRetina?.5:1)},icon:{width:16,fill:e.mediumIconColor}})),[a.isRetina]),d=(0,r.jsxs)("div",{style:l.dbName,children:[(0,r.jsx)(o(614505).A,{disabled:!0,icon:s,isEmptyPage:!1,size:a.isMobile?24:20}),(0,r.jsx)(o(16006).A,{store:n,style:l.title})]});return(0,r.jsx)(o(760217).A,{title:(0,r.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,r.jsx)(o(959013).sA,{id:"database.searchRelation.createNewPageFooter",defaultMessage:"<medium>New</medium> {pageName} <medium> in</medium> {databaseNameWithIcon}",values:{medium:e=>(0,r.jsx)("span",{style:l.medium,children:e}),pageName:(0,r.jsx)("span",{style:{marginLeft:4,marginRight:4},children:t}),databaseNameWithIcon:d}})}),icon:(0,o(689094).W)(l.icon),...i})}const a=n.memo(i)},299177:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{}}}const r=new n;o(604341).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},320865:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(){return(0,n.jsx)(o(678553).A,{title:(0,n.jsx)(o(331542).A,{})})}},370360:(e,t,o)=>{o.d(t,{u:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("showDeletedPages",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.89551 8.5498C1.89551 11.9404 4.61621 14.668 8 14.668C11.3838 14.668 14.1045 11.9404 14.1045 8.5498C14.1045 5.16602 11.4043 2.45898 8.02051 2.45898C7.66504 2.45898 7.31641 2.49316 7.01562 2.55469L8.66992 0.920898C8.78613 0.797852 8.85449 0.640625 8.85449 0.462891C8.85449 0.09375 8.56738 -0.207031 8.20508 -0.207031C8.01367 -0.207031 7.84961 -0.138672 7.7334 -0.00878906L4.93066 2.8418C4.79395 2.97852 4.71875 3.15625 4.71875 3.33398C4.71875 3.51855 4.78711 3.68262 4.93066 3.82617L7.7334 6.65625C7.84961 6.7793 8.00684 6.84082 8.20508 6.84082C8.56738 6.84082 8.85449 6.55371 8.85449 6.17773C8.85449 6 8.78613 5.85645 8.66309 5.72656L6.80371 3.88086C7.15234 3.80566 7.56934 3.77148 8.02051 3.77148C10.666 3.77148 12.7646 5.88379 12.7646 8.5498C12.7646 11.2021 10.6455 13.3281 8 13.3281C5.35449 13.3281 3.23535 11.2021 3.23535 8.5498C3.23535 8.14648 2.97559 7.85938 2.5791 7.85938C2.17578 7.85938 1.89551 8.14648 1.89551 8.5498Z"})})},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>j,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>x,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>C,MAX_RECURRENCE_INTERVAL:()=>b,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>v,RRULE_WEEKDAYS_MAP:()=>h,adjustedStartDateIfPossible:()=>P,areRecurrenceSchedulesEqual:()=>E,convertFromUnpersistedRecurrenceConfig:()=>B,convertToUnpersistedRecurrenceConfig:()=>T,getFormattedEndCondition:()=>A,getFormattedNextRecurrenceTime:()=>_,getNewEndTimestamp:()=>D,getNextDateUtc:()=>M,getRecurrenceAfter:()=>w,isRunningBetweenMidnightAnd3AM:()=>k,isValidRecurrenceInterval:()=>y,isValidRecurrenceNumberOfRuns:()=>S,rruleFromRecurrence:()=>I,templateAncestorsViolateRecurrenceNesting:()=>R});o(898992),o(354520),o(581454);var n=()=>o(244641);o(944114);function r(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];if(0===o.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...r(o[0],...o.slice(1)).map((e=>[a,...e])));return i}var i=()=>o(496603),a=()=>o(534177),s=()=>o(720665),l=()=>o(597777),d=()=>o(869190),c=()=>o(416504),u=()=>o(402390);class p extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>o(912720);const g=(0,o(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),f={day:p.DAILY,week:p.WEEKLY,month:p.MONTHLY,year:p.YEARLY},h={MO:p.MO,TU:p.TU,WE:p.WE,TH:p.TH,FR:p.FR,SA:p.SA,SU:p.SU},b=99,v=999;function y(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=b}function S(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function I(e){const{start_date:t,frequency:o,interval:n,weekdays:i,timezone:s,hour:d,minute:c}=e,u="week"===o&&i?i.map((e=>h[e])):void 0,m={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,o]=e;return h[t].nth(o)})):(0,a().HB)(e.monthly_restriction)),new p({freq:f[o],dtstart:(0,l().eU)(t),interval:n,byweekday:u,tzid:s,byhour:d??0,byminute:c??0,bysecond:0,...m})}const C=1,x=1;function R(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=n>C,a=o.length>=x;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:r}}function P(e){var t;const{recurrence:o,afterDate:r}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=r)return o;let i=n().c9.fromMillis(o.start_date,{zone:"utc"});const a=n().c9.fromMillis(r,{zone:"utc"});switch(o.frequency){case"year":{const e=Math.floor(a.diff(i,"years").years/o.interval);i=i.plus({years:e*o.interval});break}case"month":{const e=Math.floor(a.diff(i,"months").months/o.interval);i=i.plus({months:e*o.interval});break}case"week":{const e=Math.floor(a.diff(i,"weeks").weeks/o.interval);i=i.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(a.diff(i,"days").days/o.interval);i=i.plus({days:e*o.interval});break}}return{...o,start_date:(0,l().DH)(i.toMillis())}}function w(e){const{recurrence:t,afterDate:o}=e;if((0,m().wt)(t)){const e=(0,l().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=I(P({recurrence:t,afterDate:o})).after((0,l().eU)(o));if(!e)return;return(0,l().h1)(e)}}function k(e){return 0===e.hour||1===e.hour||2===e.hour}function M(e){return I(e).after((0,l().eU)((0,l().Rz)()))||void 0}function _(e){const{recurrence:t,intl:o}=e,r=M(B(t));if(!r)return;const i=k(t),a=n().c9.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(o)).setZone(t.timezone),s=(0,d().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(i)return o.formatMessage(g.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(n().c9.TIME_SIMPLE);return t.timezone!==(0,c().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),o.formatMessage(g.dateAtTime,{date:s,time:e})}}function A(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(g.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,d().Yq)({date:n().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(g.noEndCondition)}const j=100;function T(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function D(e,t,o){return e.plus(o-t)}function L(e,t){const o=n().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(o.toJSDate())}}function B(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?L(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function E(e,t){const o=i().fN(e,(e=>void 0!==e)),n=i().fN(t,(e=>void 0!==e));return i().n4(o,n)}},413677:(e,t,o)=>{o.r(t),o.d(t,{accept:()=>O,close:()=>F,createTemplateInstance:()=>N,loadAndDuplicatePageTemplate:()=>V,openWithItem:()=>B,previewItem:()=>E,setTemplateVisited:()=>U});o(16280);var n=()=>o(584262),r=()=>o(857639),i=()=>o(763884),a=()=>o(388821),s=()=>o(179034),l=()=>o(665344),d=()=>o(94830),c=()=>o(973647),u=()=>o(449506),p=()=>o(857783),m=()=>o(71584),g=()=>o(34542),f=()=>o(989423),h=()=>o(972435),b=()=>o(108944),v=()=>o(174723),y=()=>o(869562),S=()=>o(351360),I=()=>o(508496),C=()=>o(75368),x=()=>o(714818),R=()=>o(630116),P=()=>o(160568),w=()=>o(624550),k=()=>o(246826),M=()=>o(666144),_=()=>o(778417),A=()=>o(185544),j=()=>o(317909),T=()=>o(345913);const D="LastViewedTemplateId",L=(0,o(959013).YK)({clientCopyError:{defaultMessage:"Client copy could not be created.",id:"spaceActions.createGettingStartedPage.copyNotCreated.error"}});function B(e){const{environment:t,item:o,createNewPage:n,isPrivate:r,disablePointerEvents:a,isCheckout:s=!1}=e;_().IU({environment:t}),x().A.setState({open:!0,item:o,createNewPage:n,isPrivate:r,isLoading:!1,disablePointerEvents:a,isCheckout:s}),i().A.set({userId:t.currentUser.id,key:D,value:o.rootId}),P().oO(t,{template_id:(0,v().dY)(o),from:n?"sidebar":"newPage"})}function E(e){let{templateItem:t,currentUserId:o}=e;const n=x().A.state.item;x().A.setState({...x().A.state,item:t}),n!==t&&i().A.set({userId:o,key:D,value:t.rootId})}function F(e){x().A.setState({item:x().A.state.item,open:!1}),_().IU({environment:e})}async function O(e){const{acceptFrom:t,item:o,environment:r,spaceStore:i,initializeStore:a,...s}=e;x().A.state.open&&x().A.setState({...x().A.state,isLoading:!0}),I().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&C().A.state.open&&C().A.setState({open:!1});const l=a?{...{...s,item:o,environment:r,spaceStore:i},initializeStore:a,type:"inExistingStore",useMinimalTemplates:!1}:{...{...s,item:o,environment:r,spaceStore:i},type:"inSpace",useMinimalTemplates:!1,isOnboarding:!1};let d=!1;const c=Date.now();let u;try{var m;u=await N(l),d=!0;const e=null===(m=S().default.state.mainEditorCurrentBlockStore)||void 0===m?void 0:m.id;!u||e&&e===u.id||p().uK({environment:r,store:u,pageVisitSource:n().y8.Create,showMoveTo:!0}),F(r),r.device.isMobile&&(y().close(),C().A.setState({open:!1}))}finally{var g;const n=Date.now()-c,a=e.initializeStore?b().Uo(e.initializeStore):void 0,s=e.initializeStore?!a:e.isPrivate;P().BX(r,{destination:s?"private":"team",template_block_id:o.rootId,template_duplication_duration_ms:n,team_id:null==a?void 0:a.id,created_page_id:null===(g=u)||void 0===g?void 0:g.id}),P().hB(r,{from:"mobileApp",success:d,context:t,template_block_id:o.rootId,target_space_id:i.id,template_duplication_duration_ms:n,public_template_name:o.name,template_id:o.id})}}async function V(e){const{environment:t,initializeStore:o,item:n,isPrivate:r,useMinimalTemplates:i,spaceStore:s,spaceViewStore:l}=e,d=i?n.rootId:n.previewRootId,c=await u().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:d,spaceId:n.spaceId},shallow:!1}});let p;"success"===c.type&&(p=a().RecordMapWithRole.create(c.data.subtreeRecordMap));const g="pageTemplateModalActions.loadAndDuplicatePageTemplate",{performResult:b}=j().createAndCommit({userAction:g,environment:t,canUndo:!0,perform:e=>{const n=o||A().IT({environment:t,spaceStore:s,spaceViewStore:l,isPrivate:r,loading:!0,transaction:e});M()._O({environment:t,inMemoryRecordCache:n.inMemoryRecordCache,recordMap:p,debugSource:g});const i=m().loadLocalSubtree(t,{blockId:d,inMemoryRecordCache:n.inMemoryRecordCache,allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!1,allowCopyExternalObjectInstances:!0}).recordMap;if(!i)throw new Error(h().A.getIntl().formatMessage(L.clientCopyError));return m().localDuplicate({environment:t,sourceBlockId:d,targetBlockPointer:n.pointer,sourceBlockSubtree:i,targetInMemoryRecordCache:n.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0}),n}}),v=b.getCollectionPointer();return(0,f().u4)({environment:t,event:{eventName:"create_app_templates",eventProperties:{target_page_ids:[b.id],template_label:n.name,collection_ids:v?[v.id]:[]}}}),b}async function N(e){var t;const{environment:o,item:n,useRecordCache:i,useMinimalTemplates:a,spaceStore:u,isOnboarding:p,from:m,type:f,initializeStore:h,teamStore:b,onSuccess:v,onError:y}=e,S=i&&!a?n.previewRootId:n.rootId,C={id:S,table:s().ev,spaceId:n.spaceId},x=p?"onboarding":null!==(t=n.marketplaceTemplateMetadata)&&void 0!==t&&t.isMobileMarketplaceTemplate?"mobile_app":"homepage_team"===m?"team_home":void 0,P=await(0,g().oC)(o,S),k=x?{context:"",source:x,isListedTemplate:!!P,isFirstPartyPaidTemplate:void 0!==P&&(0,d().Z1)(P)}:void 0;let M=!1,_=u;const A=new(R().Bv)(o,{table:s().ev,id:C.id,spaceId:C.spaceId});if("inExistingStore"===f&&h){if(_=h,h.isEmptyPage()){const e=h.getParentStore();e&&e.canEdit()&&("block"===e.table||"space"===e.table||"team"===e.table)&&(M=!0,_=e)}}else"inTeam"===f&&b&&(_=b);k||r().log({level:"warning",from:"pageTemplateModalActions.createTemplateInstance",type:"templateInstallationMetadataNotSet",data:{miscDataToConvertToString:{template_id:n.id,template_block_id:n.rootId,target_space_id:u.id,public_template_name:n.name,isOnboarding:p,from:m,type:f}}});const D=I().default.checkGate({gateName:"enable_local_duplication_for_non_marketplace_templates"}),L=await w().Jx({environment:o,store:A,newParentStore:_,addCopyName:!1,duplicateOnlyCollectionSchema:!1,unlockPage:!0,templateInstallationMetadata:k,shouldAttemptServerBackedLocalDuplication:!(0,l().Fe)(null==k?void 0:k.source)&&D});if(L){if(c().Q.isSuccess(L)&&L.value.length>0){const e=L.value[0];if(M&&h){const t=h;try{await t.waitUntil((()=>t.isDefined()));const{serverCommitResult:n}=j().createAndCommit({userAction:"pageTemplateModalActions.initializePageTemplateInPlace",environment:o,canUndo:!0,perform:e=>{T().oD({environment:o,blocks:[t],transaction:e,permanentlyDelete:!0})}});return await n,e}catch(B){r().log({level:"error",from:"pageTemplateModalActions.initializePageTemplateInPlace",type:"transactionError",data:{miscDataToConvertToString:{error:B}}})}}return null==v||v(e),e}return null==y||y(),void r().log({level:"error",from:"pageTemplateModalActions.initializePageTemplate",type:"duplicateTemplateError",data:{miscDataToConvertToString:{error:L.error,template_id:n.id,template_block_id:n.rootId,target_space_id:u.id,public_template_name:n.name}}})}}function U(e){const{item:t,transaction:o,spaceViewStore:n}=e;if(n){const e=n.getVisitedTemplateIds();if(e.indexOf(t.rootId)<0){const r=e.concat([t.rootId]);k().zv({store:n,data:{visited_templates:r},transaction:o})}}}},425736:(e,t,o)=>{o.d(t,{s:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("privateTeam",{viewBox:"0 0 28 28",svg:(0,n.jsx)("path",{d:"M20.6455 21.2744C20.9092 21.5469 21.3311 21.5645 21.6035 21.2744C21.8936 20.9844 21.8672 20.5889 21.6035 20.3164L6.9082 5.62988C6.64453 5.36621 6.21387 5.36621 5.94141 5.62988C5.68652 5.88477 5.68652 6.33301 5.94141 6.58789L20.6455 21.2744ZM13.8076 6.13086C12.2783 6.13086 10.8896 6.39453 9.59766 6.8252L10.7578 7.97656C11.7246 7.68652 12.7178 7.51953 13.8076 7.51953C19.5908 7.51953 24.2754 12.6172 24.2754 13.6631C24.2754 14.375 22.7373 16.291 20.3027 17.7852L21.3838 18.8662C24.1611 17.0645 25.8135 14.7002 25.8135 13.6631C25.8135 11.8613 20.9092 6.13086 13.8076 6.13086ZM13.8076 21.1953C15.4424 21.1953 16.9365 20.9053 18.2988 20.4395L17.1475 19.2881C16.1016 19.6133 14.9941 19.8066 13.8076 19.8066C8.01562 19.8066 3.33105 14.9023 3.33105 13.6631C3.33105 13.0479 4.95703 11 7.5498 9.44434L6.45996 8.35449C3.5332 10.165 1.79297 12.5996 1.79297 13.6631C1.79297 15.4561 6.79395 21.1953 13.8076 21.1953ZM18.3164 15.5879C18.5889 14.999 18.7383 14.3398 18.7383 13.6631C18.7383 10.9121 16.541 8.74121 13.8076 8.74121C13.1133 8.74121 12.4629 8.89062 11.874 9.14551L18.3164 15.5879ZM13.8076 18.585C14.5811 18.585 15.3105 18.3916 15.9609 18.0752L9.36914 11.4834C9.04395 12.1338 8.85938 12.8721 8.85938 13.6631C8.86816 16.3438 11.0566 18.585 13.8076 18.585Z"})})},438265:(e,t,o)=>{o.d(t,{d:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("expandThin",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.992.61c.156 0 .3.033.43.1.13.069.27.16.422.274l5.265 4.25a.948.948 0 01.368.774 1 1 0 01-.149.547c-.099.156-.229.28-.39.375a1.013 1.013 0 01-.508.133 1.07 1.07 0 01-.399-.079 1.6 1.6 0 01-.375-.226L7.992 3.016 3.336 6.758a1.74 1.74 0 01-.383.226 1.056 1.056 0 01-.906-.055 1.145 1.145 0 01-.383-.374 1 1 0 01-.148-.547c0-.318.122-.576.367-.774L7.148.984C7.3.87 7.44.78 7.57.711a.9.9 0 01.422-.102zm0 14.85a.901.901 0 01-.422-.1 2.288 2.288 0 01-.422-.274l-5.265-4.25a.962.962 0 01-.367-.774 1.055 1.055 0 01.531-.914 1.01 1.01 0 01.906-.062c.125.052.253.128.383.226l4.656 3.743 4.664-3.742a1.6 1.6 0 01.375-.227c.13-.052.263-.078.399-.078a.97.97 0 01.508.14 1.036 1.036 0 01.539.915c0 .312-.123.57-.368.773l-5.265 4.258a2.512 2.512 0 01-.422.265.917.917 0 01-.43.102z"})})},464699:(e,t,o)=>{o.d(t,{b:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("plusThick",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},465364:(e,t,o)=>{o.d(t,{$N:()=>_,D5:()=>A,GB:()=>w,M9:()=>R,Pt:()=>M,eW:()=>k,jo:()=>j,v7:()=>P});o(944114),o(898992),o(803949),o(581454);var n=()=>o(244641),r=()=>o(787626),i=()=>o(713998),a=()=>o(597777),s=()=>o(604995),l=()=>o(416504),d=()=>o(519831),c=()=>o(496603),u=()=>o(534177),p=()=>o(299709),m=()=>o(317001),g=()=>o(520861),f=()=>o(878060),h=()=>o(44729),b=()=>o(246826),v=()=>o(606952),y=()=>o(519839),S=()=>o(695625),I=()=>o(397248),C=()=>o(630116),x=()=>o(747671);function R(e){const{environment:t,droppedStores:o,duplicate:i,calendarBy:c,transaction:u,collectionContextStore:f}=e,b=n().c9.fromMillis(e.startOfDay);let v=!0;for(const n of o){const t=e.collectionStore?e.collectionStore:(0,y().Dj)({store:n,collectionContextStore:f});if(n.getParentTable()===d().Vl||!t){v=!1;break}h().X$({childStore:n,parentStore:t,transaction:u})||(v=!1)}const S=(0,g().T)({environment:t,droppedStores:o,duplicate:i,transaction:u,collectionStore:e.collectionStore});for(const n of S){const o=e.collectionStore?e.collectionStore:(0,y().Dj)({store:n,collectionContextStore:f});if(!o)continue;const i=o.getMappedProperty(c),d=n.getPropertyStore(i),g=(0,r().b)(d.getValue())||s().Ec((0,l().P)()),h=s().kW(g,(0,l().P)()),S=b.toFormat(s().tr);let I;if("date"===h.type||"datetime"===h.type)I={...h,start_date:S};else{const e=s().AA(h,(0,l().P)());if(!e.end)return;const t={...h,start_date:S},o=s().AA(t,(0,l().P)()).start.diff(e.start,"days"),n=e.end.plus(o).toFormat(s().tr);I={...h,start_date:S,end_date:n}}const C=s().kW(I,a().$K(g)||(0,l().P)());(0,m().j)({environment:t,store:n,collectionStore:o,collectionContextStore:f,shouldCoerce:!0,groupsPointer:[],transaction:u,alreadyMovedToCollection:v}),A({environment:t,type:"dateValue",propertyId:i,store:n,transaction:u,dateValue:C}),(0,p().E)({environment:t,collectionContextStore:f,block_id:n.id,property:i,property_type:"date",from:"calendar"})}}function P(e){const{calendarStore:t,direction:o,targetStore:n}=e;t.setState({...t.state,isDragging:!0,targetStore:n,direction:o,temporaryValue:void 0})}function w(e){const{calendarStore:t,x:o,y:i,calendarBy:d}=e,u=t.state;if(u.isDragging){const e=(0,r().b)(u.targetStore.getPropertyStore(d).getValue());if(!e)return;const p=s().kW(e,(0,l().P)()),m=u.temporaryValue||e,g=s().kW(m,(0,l().P)()),f=[];u.dayStoreMap.forEach(((e,t)=>{f.push({store:e,timestamp:t})}));const h=f.find((e=>{let{store:t}=e;const n=S().T.getRectFromStore(t);return Boolean(n&&I().ux(n,o,i))}));let b;if(h){const e=n().c9.fromMillis(h.timestamp),t=e.endOf("day"),o=e.toFormat(s().tr);if(p){const r=s().AA(p,(0,l().P)());if(u.direction===x().Q.Left)if(n().IX.fromDateTimes(e,t).contains(r.start))b=p;else{let e;e="datetimerange"===p.type||"daterange"===p.type?{...p,start_date:o,end_date:p.end_date}:"datetime"===p.type?{type:"datetimerange",start_date:o,start_time:p.start_time,end_date:p.start_date,end_time:p.start_time,time_zone:p.time_zone,reminder:p.reminder}:{type:"daterange",start_date:o,end_date:p.start_date,reminder:p.reminder};const t=s().AA(e,(0,l().P)());b=!r.end&&t.start>r.start||r.end&&t.start>r.end?g:e}else if(r.end?n().IX.fromDateTimes(e,t).contains(r.end):n().IX.fromDateTimes(e,t).contains(r.start))b=p;else{let e;e="date"===p.type?{...p,type:"daterange",end_date:o}:"datetime"===p.type?{...p,type:"datetimerange",end_date:o,end_time:"00:00"}:{...p,end_date:o};const t=s().AA(e,(0,l().P)());b=t.end&&t.end<t.start?g:e}}}if(b&&!c().n4(g,b)){const e=s().kW(b,a().$K(m)||(0,l().P)());t.setState({...u,temporaryValue:e})}}}function k(e){const{environment:t,calendarStore:o,calendarBy:n,transaction:r}=e,i=o.state;i.isDragging&&i.temporaryValue&&(A({type:"dateValue",environment:t,dateValue:i.temporaryValue,propertyId:n,store:i.targetStore,transaction:r}),o.setState({...o.state,isDragging:!1}))}function M(e){const{calendarStore:t}=e,o=t.state;o.isDragging&&t.setState({...o,isDragging:!1})}function _(e){const{environment:t,store:o,collectionStore:r,collectionContextStore:a,startDayOfWeek:d,transaction:c}=e,u=a.dateRangeStartStore.state,p=(0,l().P)(),g=a.normalizedQueryStore.state;if(!g||!g.calendar_by)return;const f=(null==r?void 0:r.getMappedProperty(g.calendar_by))??g.calendar_by,h=s().hp(u,d,p),v=h.startOf("month"),y=h.endOf("month"),S=n().c9.now().startOf("day");let I;return I=n().IX.fromDateTimes(v,y).contains(S)?s().p6(S.valueOf(),p):s().p6(s().iB(u,d,p).valueOf(),p),b().zv({store:o.getPropertiesStore(),data:{[f]:i().m5(I)},transaction:c}),(0,m().j)({environment:t,store:o,collectionStore:r,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:c}),o}function A(e){const{environment:t,store:o,propertyId:n,transaction:r}=e;let a;"timestamp"===e.type?a=s().p6(e.timestampMs.valueOf(),(0,l().P)()):"dateValue"===e.type?a=e.dateValue:(0,u().HB)(e);const d=o.getPropertyValue(n),c=i().m5(a);b().zv({store:o.getPropertiesStore(),data:{[n]:c},transaction:r}),f().O({environment:t,store:o,dateProperty:{id:n,oldValue:d,newValue:c}})}function j(e){const{environment:t,collectionStore:o,calendarBy:n,store:r,insertStores:i,collectionContextStore:a,transaction:s}=e,l=r.getPropertyStore(n).getValue();for(const d of i)(0,m().j)({environment:t,store:d,collectionStore:o,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:s}),v().KY({environment:t,store:d.getPropertyStore(n),value:l,transaction:s});return i.map((e=>C().Bv.createChildStore(o,e.pointer)))}},484578:(e,t,o)=>{o.d(t,{QX:()=>u,YY:()=>d,dK:()=>s,ek:()=>l,rC:()=>c});var n=()=>o(68263),r=()=>o(534177),i=()=>o(337567),a=()=>o(630116);function s(e){let{permissionItem:t,store:o}=e;return"display_only_inherited_permission"!==t.type&&(o instanceof a().md?o.pathIsDead():o instanceof a().Bv?o.pathIsDead()||!d(t)&&!o.canAdmin()||(0,i().dL)(o):void(0,r().HB)(o))}function l(e){let{permissionItem:t,store:o}=e;const r=(0,n().Yi)(t.from);return t.from.table!==o.table||r!==o.id}function d(e){return"display_only_overview_permission"===e.type}function c(e){return"display_only_inherited_permission"===e.type}function u(e){const t=e&&"from"in e?e.permissionItem:e;if(!t||!(0,n().Tt)(t.role))return"private";return(0,n().Ni)(t)&&"none"!==t.role?"unlisted":"open"}},511303:(e,t,o)=>{o.d(t,{$:()=>c,N:()=>d});var n=o(296540),r=()=>o(221844),i=()=>o(484714),a=()=>o(388821),s=()=>o(351360),l=o(474848);const d=(0,n.createContext)({organizationOwnerRecordCache:void 0,updateCacheWithRecordMap:e=>{}});function c(e){let{children:t}=e;const o=(0,i().v3)(),[r,c]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{const e=u(o);c(e)}),[o]);const p=(0,n.useCallback)((e=>{var t;const n=null===(t=s().default.state.currentUserStore)||void 0===t?void 0:t.id;if(!n||!e.data.organizationOwnerRecordMap)return;if(!e.data.organizationOwnerRecordMap)return;const r=a().RecordMap.create(e.data.organizationOwnerRecordMap);c((e=>{if(!e)return u(o);for(const{pointer:t,model:o}of r)e.setModelAndRole({pointer:t,userId:n},o,"editor");return u(o,e.data)}))}),[o]);return r?(0,l.jsx)(d.Provider,{value:{organizationOwnerRecordCache:r,updateCacheWithRecordMap:p},children:t}):null}function u(e,t){const o=new(r().A)({name:"organizationSettingsConsoleCache",data:t});return o.addCacheFallback(e.defaultRecordCache.inMemoryRecordCache),o}d.displayName="OrganizationCacheContext"},520861:(e,t,o)=>{o.d(t,{T:()=>r});o(944114),o(898992),o(908872);var n=()=>o(415651);function r(e){const{environment:t,collectionStore:o,duplicate:r,droppedStores:i,transaction:a}=e,{movedStores:s,reparentedStores:l}=i.reduce(((e,t)=>(r||t.getAssociatedCollectionId()!==(null==o?void 0:o.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...s,...n().MS({environment:t,droppedStores:l,duplicate:r,transaction:a,resolveTemplateVariables:!1})]}},529316:(e,t,o)=>{o.d(t,{dy:()=>h,wA:()=>b,yG:()=>f});o(898992),o(430670),o(581454);var n=()=>o(679927),r=()=>o(544008);const i={sources:{"en-US":{previewRootId:"e950a58c-0d6f-42c3-8225-9e7adc5d4182",rootId:"e950a58c-0d6f-42c3-8225-9e7adc5d4182",spaceId:n().rQ}},nameMessage:r().DZ.getStartedPage},a={sources:{"en-US":{previewRootId:"89ba9061-3275-4d76-966f-11691fdfd72f",rootId:"89ba9061-3275-4d76-966f-11691fdfd72f",spaceId:n().rQ},"ko-KR":{previewRootId:"0eb824c6-f768-47bc-9204-d94dbb912c6e",rootId:"0eb824c6-f768-47bc-9204-d94dbb912c6e",spaceId:n().rQ},"ja-JP":{previewRootId:"09f3541c-8edb-4603-9bc3-02bd22cd7836",rootId:"09f3541c-8edb-4603-9bc3-02bd22cd7836",spaceId:n().rQ},"fr-FR":{previewRootId:"b13cc3bd-a0a3-4b61-b482-63051d7804b5",rootId:"b13cc3bd-a0a3-4b61-b482-63051d7804b5",spaceId:n().rQ},"de-DE":{previewRootId:"b2b10be2-1b2f-4a48-a453-532657bd8e92",rootId:"b2b10be2-1b2f-4a48-a453-532657bd8e92",spaceId:n().rQ},"es-ES":{previewRootId:"a00ebb82-58f2-4b40-89ee-a65be3befabf",rootId:"a00ebb82-58f2-4b40-89ee-a65be3befabf",spaceId:n().rQ},"es-LA":{previewRootId:"6d1f21ba-36cf-4c90-9ecb-d5e377942f3a",rootId:"6d1f21ba-36cf-4c90-9ecb-d5e377942f3a",spaceId:n().rQ},"pt-BR":{previewRootId:"50a76940-a26e-443a-b752-1412855e6ad7",rootId:"50a76940-a26e-443a-b752-1412855e6ad7",spaceId:n().rQ},"nb-NO":{previewRootId:"4c0f8e8c-3967-43ab-a0a8-a3a8ae837714",rootId:"4c0f8e8c-3967-43ab-a0a8-a3a8ae837714",spaceId:n().rQ},"fi-FI":{previewRootId:"555c9896-0c2d-4af7-a951-1d81f051de2e",rootId:"555c9896-0c2d-4af7-a951-1d81f051de2e",spaceId:n().rQ},"sv-SE":{previewRootId:"751d20c2-e2be-4e61-921a-adb553651c8c",rootId:"751d20c2-e2be-4e61-921a-adb553651c8c",spaceId:n().rQ},"da-DK":{previewRootId:"8e0ffb71-86cb-46bf-abf2-720dcb4378f9",rootId:"8e0ffb71-86cb-46bf-abf2-720dcb4378f9",spaceId:n().rQ},"nl-NL":{previewRootId:"53da1632-5152-4b4f-b440-19b82802360b",rootId:"53da1632-5152-4b4f-b440-19b82802360b",spaceId:n().rQ},"zh-CN":{previewRootId:"a2ca886e-3537-47e1-823b-57633cb94702",rootId:"a2ca886e-3537-47e1-823b-57633cb94702",spaceId:n().rQ},"zh-TW":{previewRootId:"ed24d770-243d-4ef4-b469-0187beadf16e",rootId:"ed24d770-243d-4ef4-b469-0187beadf16e",spaceId:n().rQ}},nameMessage:r().DZ.getStartedPage},s={sources:{"en-US":{previewRootId:"30fa18a6-609e-4f5b-af3d-31906c46fe23",rootId:"30fa18a6-609e-4f5b-af3d-31906c46fe23",spaceId:n().rQ},"ko-KR":{previewRootId:"3afd60d5-3ce7-431a-b812-2c836b7596a3",rootId:"3afd60d5-3ce7-431a-b812-2c836b7596a3",spaceId:n().rQ},"ja-JP":{previewRootId:"dd2f1d05-d4ef-48a0-899c-10fe0346a447",rootId:"dd2f1d05-d4ef-48a0-899c-10fe0346a447",spaceId:n().rQ},"fr-FR":{previewRootId:"ac411712-ee48-4589-828d-b4e5827efc17",rootId:"ac411712-ee48-4589-828d-b4e5827efc17",spaceId:n().rQ},"de-DE":{previewRootId:"0c5be7d7-cfcf-417b-824a-1a280254a58e",rootId:"0c5be7d7-cfcf-417b-824a-1a280254a58e",spaceId:n().rQ},"es-ES":{previewRootId:"35c18cd6-99a8-47f3-91ee-40dbfec922fa",rootId:"35c18cd6-99a8-47f3-91ee-40dbfec922fa",spaceId:n().rQ},"es-LA":{previewRootId:"017372b2-9d34-4118-ad13-9b8e15c30ebd",rootId:"017372b2-9d34-4118-ad13-9b8e15c30ebd",spaceId:n().rQ},"pt-BR":{previewRootId:"035cfcde-4292-4905-82b2-6517e58a28b9",rootId:"035cfcde-4292-4905-82b2-6517e58a28b9",spaceId:n().rQ},"nb-NO":{previewRootId:"42a8570d-5be6-4be4-9ca3-0569f54863bf",rootId:"42a8570d-5be6-4be4-9ca3-0569f54863bf",spaceId:n().rQ},"fi-FI":{previewRootId:"5f103e1f-2659-4c6a-bb30-705d2dae0774",rootId:"5f103e1f-2659-4c6a-bb30-705d2dae0774",spaceId:n().rQ},"sv-SE":{previewRootId:"811aca42-41c0-4f83-9e08-e795d7a5f803",rootId:"811aca42-41c0-4f83-9e08-e795d7a5f803",spaceId:n().rQ},"da-DK":{previewRootId:"7643a79b-68c8-46af-ae10-f089cb1ae62b",rootId:"7643a79b-68c8-46af-ae10-f089cb1ae62b",spaceId:n().rQ},"nl-NL":{previewRootId:"6e5d9018-2dc0-4dc7-802c-be95d99f1660",rootId:"6e5d9018-2dc0-4dc7-802c-be95d99f1660",spaceId:n().rQ},"zh-CN":{previewRootId:"289fe37a-a3fc-4cec-b690-a6f99dec65a8",rootId:"289fe37a-a3fc-4cec-b690-a6f99dec65a8",spaceId:n().rQ},"zh-TW":{previewRootId:"a9fef1fc-6a95-45fc-9a7f-137790c06105",rootId:"a9fef1fc-6a95-45fc-9a7f-137790c06105",spaceId:n().rQ}},nameMessage:r().DZ.getStartedPage},l={sources:{"en-US":{previewRootId:"bd0b93b9-a0e9-4582-a164-98acdc7a5b45",rootId:"bd0b93b9-a0e9-4582-a164-98acdc7a5b45",spaceId:n().rQ},"ko-KR":{previewRootId:"ecdfe65a-28ee-46d2-a82b-99573e3dd63d",rootId:"ecdfe65a-28ee-46d2-a82b-99573e3dd63d",spaceId:n().rQ},"ja-JP":{previewRootId:"56dd4a06-5073-46d2-8aca-8e37d90e5610",rootId:"56dd4a06-5073-46d2-8aca-8e37d90e5610",spaceId:n().rQ},"fr-FR":{previewRootId:"1f8febec-2e84-4be2-a67d-7b5165845a4b",rootId:"1f8febec-2e84-4be2-a67d-7b5165845a4b",spaceId:n().rQ},"de-DE":{previewRootId:"ee67a0e4-8343-4dd6-9636-9504cae6c573",rootId:"ee67a0e4-8343-4dd6-9636-9504cae6c573",spaceId:n().rQ},"es-ES":{previewRootId:"eabf4d1f-9a77-441f-88fb-de9e9e0dc26e",rootId:"eabf4d1f-9a77-441f-88fb-de9e9e0dc26e",spaceId:n().rQ},"es-LA":{previewRootId:"56ba9c1f-2a28-4d05-910c-e89fb051327d",rootId:"56ba9c1f-2a28-4d05-910c-e89fb051327d",spaceId:n().rQ},"pt-BR":{previewRootId:"07ffa801-adfb-41f3-809b-87f69ae9e9cd",rootId:"07ffa801-adfb-41f3-809b-87f69ae9e9cd",spaceId:n().rQ},"nb-NO":{previewRootId:"62f63581-5683-49a3-8812-32e2de74a6a6",rootId:"62f63581-5683-49a3-8812-32e2de74a6a6",spaceId:n().rQ},"fi-FI":{previewRootId:"f01bdcc5-d573-4790-b605-988df0f3a5ea",rootId:"f01bdcc5-d573-4790-b605-988df0f3a5ea",spaceId:n().rQ},"sv-SE":{previewRootId:"e404919f-5dda-4fc3-a28f-6550e70cee12",rootId:"e404919f-5dda-4fc3-a28f-6550e70cee12",spaceId:n().rQ},"da-DK":{previewRootId:"cee1de64-79f4-45b4-85d5-1ffae9624a8e",rootId:"cee1de64-79f4-45b4-85d5-1ffae9624a8e",spaceId:n().rQ},"nl-NL":{previewRootId:"86ecfb21-c0ed-42cb-864c-83890d49cb51",rootId:"86ecfb21-c0ed-42cb-864c-83890d49cb51",spaceId:n().rQ},"zh-CN":{previewRootId:"244bca5a-9931-40fb-91cd-bbcd97f1e8be",rootId:"244bca5a-9931-40fb-91cd-bbcd97f1e8be",spaceId:n().rQ},"zh-TW":{previewRootId:"802eb5a0-67f1-4f31-a058-938206b68f1c",rootId:"802eb5a0-67f1-4f31-a058-938206b68f1c",spaceId:n().rQ}},nameMessage:r().DZ.getStartedPage},d={sources:{"en-US":{previewRootId:"19717954-d9c2-8038-9ac1-fdb4dd0783f1",rootId:"19717954-d9c2-8038-9ac1-fdb4dd0783f1",spaceId:n().rQ},"nb-NO":{previewRootId:"19717954-d9c2-8116-9ff5-ea5bdbaeb0fd",rootId:"19717954-d9c2-8116-9ff5-ea5bdbaeb0fd",spaceId:n().rQ},"fi-FI":{previewRootId:"19717954-d9c2-817d-8676-cee61d880bca",rootId:"19717954-d9c2-817d-8676-cee61d880bca",spaceId:n().rQ},"sv-SE":{previewRootId:"19717954-d9c2-810f-8a80-d3ace368f1e2",rootId:"19717954-d9c2-810f-8a80-d3ace368f1e2",spaceId:n().rQ},"da-DK":{previewRootId:"19717954-d9c2-816c-9cc0-debe4fc4026a",rootId:"19717954-d9c2-816c-9cc0-debe4fc4026a",spaceId:n().rQ},"nl-NL":{previewRootId:"19717954-d9c2-8144-9909-f762a951b76b",rootId:"19717954-d9c2-8144-9909-f762a951b76b",spaceId:n().rQ},"pt-BR":{previewRootId:"19717954-d9c2-81a0-a6aa-e46e9ca55fb3",rootId:"19717954-d9c2-81a0-a6aa-e46e9ca55fb3",spaceId:n().rQ},"es-LA":{previewRootId:"19717954-d9c2-812c-9e10-e853d888029a",rootId:"19717954-d9c2-812c-9e10-e853d888029a",spaceId:n().rQ},"es-ES":{previewRootId:"19717954-d9c2-81bf-82c3-c9d40480251b",rootId:"19717954-d9c2-81bf-82c3-c9d40480251b",spaceId:n().rQ},"fr-FR":{previewRootId:"19717954-d9c2-818a-84c2-e56eb27fbd5d",rootId:"19717954-d9c2-818a-84c2-e56eb27fbd5d",spaceId:n().rQ},"de-DE":{previewRootId:"19717954-d9c2-8111-807c-e0e495589978",rootId:"19717954-d9c2-8111-807c-e0e495589978",spaceId:n().rQ},"ja-JP":{previewRootId:"19717954-d9c2-81c0-b213-f4e883d06519",rootId:"19717954-d9c2-81c0-b213-f4e883d06519",spaceId:n().rQ},"ko-KR":{previewRootId:"19717954-d9c2-812e-b804-f95a30ccf4fe",rootId:"19717954-d9c2-812e-b804-f95a30ccf4fe",spaceId:n().rQ},"zh-CN":{previewRootId:"19717954-d9c2-81d2-9d4c-f806f8829dec",rootId:"19717954-d9c2-81d2-9d4c-f806f8829dec",spaceId:n().rQ},"zh-TW":{previewRootId:"19717954-d9c2-81e6-9d71-c9806241a2d1",rootId:"19717954-d9c2-81e6-9d71-c9806241a2d1",spaceId:n().rQ}},nameMessage:r().DZ.getStartedPage},c={sources:{"en-US":{previewRootId:"19717954-d9c2-8086-8914-f7f64fefc788",rootId:"19717954-d9c2-8086-8914-f7f64fefc788",spaceId:n().rQ},"nb-NO":{previewRootId:"19717954-d9c2-8147-bdcb-e2c1bb859201",rootId:"19717954-d9c2-8147-bdcb-e2c1bb859201",spaceId:n().rQ},"fi-FI":{previewRootId:"19717954-d9c2-8191-a224-f1609f6e2443",rootId:"19717954-d9c2-8191-a224-f1609f6e2443",spaceId:n().rQ},"sv-SE":{previewRootId:"19717954-d9c2-81ff-b208-ddb7484c6dfa",rootId:"19717954-d9c2-81ff-b208-ddb7484c6dfa",spaceId:n().rQ},"da-DK":{previewRootId:"19717954-d9c2-819f-8fdd-e28c0dcca9e5",rootId:"19717954-d9c2-819f-8fdd-e28c0dcca9e5",spaceId:n().rQ},"nl-NL":{previewRootId:"19717954-d9c2-8127-a9a3-fdbfb56c9743",rootId:"19717954-d9c2-8127-a9a3-fdbfb56c9743",spaceId:n().rQ},"pt-BR":{previewRootId:"19717954-d9c2-8180-a3be-cd1d5581612c",rootId:"19717954-d9c2-8180-a3be-cd1d5581612c",spaceId:n().rQ},"es-LA":{previewRootId:"19717954-d9c2-81c0-8552-e95036eca313",rootId:"19717954-d9c2-81c0-8552-e95036eca313",spaceId:n().rQ},"es-ES":{previewRootId:"19717954-d9c2-817b-8d2b-c3d0b40c5519",rootId:"19717954-d9c2-817b-8d2b-c3d0b40c5519",spaceId:n().rQ},"fr-FR":{previewRootId:"19717954-d9c2-81ae-86df-dd5798d53d1e",rootId:"19717954-d9c2-81ae-86df-dd5798d53d1e",spaceId:n().rQ},"de-DE":{previewRootId:"19717954-d9c2-8100-a2ed-f088a5e87ac5",rootId:"19717954-d9c2-8100-a2ed-f088a5e87ac5",spaceId:n().rQ},"ja-JP":{previewRootId:"19717954-d9c2-8192-8dbc-c9633c2eb406",rootId:"19717954-d9c2-8192-8dbc-c9633c2eb406",spaceId:n().rQ},"ko-KR":{previewRootId:"19717954-d9c2-81a1-bec4-fcde3b7e141a",rootId:"19717954-d9c2-81a1-bec4-fcde3b7e141a",spaceId:n().rQ},"zh-CN":{previewRootId:"d5972e6b-0a4c-402d-b5a5-283f0debceff",rootId:"d5972e6b-0a4c-402d-b5a5-283f0debceff",spaceId:n().rQ},"zh-TW":{previewRootId:"19717954-d9c2-81e1-8b80-fcfc79719dd7",rootId:"19717954-d9c2-81e1-8b80-fcfc79719dd7",spaceId:n().rQ}},nameMessage:r().DZ.getStartedPage},u={sources:{"en-US":{previewRootId:"fff17954-d9c2-805b-9d0a-eb8a6aab4228",rootId:"fff17954-d9c2-805b-9d0a-eb8a6aab4228",spaceId:n().rQ}},nameMessage:r().DZ.getStartedPage},p={sources:{"en-US":{previewRootId:"fff17954-d9c2-8029-a07e-c769f10e8ac6",rootId:"fff17954-d9c2-8029-a07e-c769f10e8ac6",spaceId:n().rQ}},nameMessage:r().DZ.getStartedPage},m={sources:{"en-US":{previewRootId:"cfc33008-28e6-4dbb-b383-6ffb498bcedd",rootId:"cfc33008-28e6-4dbb-b383-6ffb498bcedd",spaceId:n().rQ}},nameMessage:r().DZ.getStartedPage},g={sources:{"en-US":{previewRootId:"416e0fd3-2f94-477d-9058-0a06bcb55cf3",rootId:"416e0fd3-2f94-477d-9058-0a06bcb55cf3",spaceId:n().rQ}},nameMessage:r().DZ.getStartedPage},f={desktopPersonal:a,desktopTeamCreate:s,desktopTeamJoin:l,desktopTeamCreateWithComment:u,desktopTeamJoinWithComment:p,desktopTeamJoinWithMention:g,desktopTeamCreateWithMention:m,mobile:{sources:{"en-US":{previewRootId:"27fa9add-6ec7-433a-88c9-58279f5055c3",rootId:"27fa9add-6ec7-433a-88c9-58279f5055c3",spaceId:n().rQ},"ko-KR":{previewRootId:"24c31e38-d546-423f-b3cb-a0533e711d02",rootId:"24c31e38-d546-423f-b3cb-a0533e711d02",spaceId:n().rQ},"ja-JP":{previewRootId:"6e87073b-2877-44d1-9df7-2dd266bb35e3",rootId:"6e87073b-2877-44d1-9df7-2dd266bb35e3",spaceId:n().rQ},"fr-FR":{previewRootId:"d6367cec-2e43-4558-882d-fb9a00545fef",rootId:"d6367cec-2e43-4558-882d-fb9a00545fef",spaceId:n().rQ},"de-DE":{previewRootId:"172fd543-704b-489a-8d2e-7d1255f51bef",rootId:"172fd543-704b-489a-8d2e-7d1255f51bef",spaceId:n().rQ},"es-ES":{previewRootId:"8f27f9ff-57f2-4c07-ad65-55c7f7f7501f",rootId:"8f27f9ff-57f2-4c07-ad65-55c7f7f7501f",spaceId:n().rQ},"es-LA":{previewRootId:"24f220ca-372b-4003-8e74-13291220c778",rootId:"24f220ca-372b-4003-8e74-13291220c778",spaceId:n().rQ},"pt-BR":{previewRootId:"e16c2241-0f08-4946-908e-c5e6612b0a8c",rootId:"e16c2241-0f08-4946-908e-c5e6612b0a8c",spaceId:n().rQ},"nb-NO":{previewRootId:"2021f38b-f367-4f6c-8232-73387a4dcfb6",rootId:"2021f38b-f367-4f6c-8232-73387a4dcfb6",spaceId:n().rQ},"fi-FI":{previewRootId:"b40e41dc-6c0f-4d74-b3ad-3df012f49b01",rootId:"b40e41dc-6c0f-4d74-b3ad-3df012f49b01",spaceId:n().rQ},"sv-SE":{previewRootId:"5759d5ff-246c-4daf-85f3-7fc9884a4bf7",rootId:"5759d5ff-246c-4daf-85f3-7fc9884a4bf7",spaceId:n().rQ},"da-DK":{previewRootId:"b89fffe8-2e2d-4574-84e1-f81b26df5c1e",rootId:"b89fffe8-2e2d-4574-84e1-f81b26df5c1e",spaceId:n().rQ},"nl-NL":{previewRootId:"2bfc9604-0e06-4ff2-90cf-c382d6bf341b",rootId:"2bfc9604-0e06-4ff2-90cf-c382d6bf341b",spaceId:n().rQ},"zh-CN":{previewRootId:"686c7f32-593a-460d-921c-cd2d646c35ba",rootId:"686c7f32-593a-460d-921c-cd2d646c35ba",spaceId:n().rQ},"zh-TW":{previewRootId:"5ce840a9-8e51-4699-af63-64d49b1eba14",rootId:"5ce840a9-8e51-4699-af63-64d49b1eba14",spaceId:n().rQ}},nameMessage:r().DZ.getStartedPageMobile},evernote:{sources:{"en-US":{previewRootId:"2e568628-70b1-4f35-934e-81ea4263d0e8",rootId:"2e568628-70b1-4f35-934e-81ea4263d0e8",spaceId:n().rQ},"ko-KR":{previewRootId:"3d8c8d33-f904-41f7-a3ff-b6272c633079",rootId:"3d8c8d33-f904-41f7-a3ff-b6272c633079",spaceId:n().rQ},"ja-JP":{previewRootId:"9aefc3b4-f172-4917-b1c7-495c26ec37f9",rootId:"9aefc3b4-f172-4917-b1c7-495c26ec37f9",spaceId:n().rQ},"fr-FR":{previewRootId:"4453c56e-831c-4203-83fc-9736e276b7dc",rootId:"4453c56e-831c-4203-83fc-9736e276b7dc",spaceId:n().rQ},"de-DE":{previewRootId:"6239e7bb-e6a6-4cb4-b4fa-236035bad7f7",rootId:"6239e7bb-e6a6-4cb4-b4fa-236035bad7f7",spaceId:n().rQ},"es-ES":{previewRootId:"95dafcd5-6243-4838-bea1-8e19b0596f6f",rootId:"95dafcd5-6243-4838-bea1-8e19b0596f6f",spaceId:n().rQ},"es-LA":{previewRootId:"34d8ae09-8161-49ec-ae2d-c188c477bb90",rootId:"34d8ae09-8161-49ec-ae2d-c188c477bb90",spaceId:n().rQ},"pt-BR":{previewRootId:"cb2a5d30-074f-4c07-97b5-61147e0ea504",rootId:"cb2a5d30-074f-4c07-97b5-61147e0ea504",spaceId:n().rQ},"zh-CN":{previewRootId:"72e66598-65f8-47ec-ba84-000d7321b482",rootId:"72e66598-65f8-47ec-ba84-000d7321b482",spaceId:n().rQ},"zh-TW":{previewRootId:"ec8b7591-22e8-41e6-9342-b44c1190b855",rootId:"ec8b7591-22e8-41e6-9342-b44c1190b855",spaceId:n().rQ}},nameMessage:r().DZ.getStartedPageEvernote},desktopPersonalNoSlashMenu:d,desktopTeamCreateNoSlashMenu:s,desktopTeamJoinNoSlashMenu:c,web:i,mobileVariant1:{sources:{"en-US":{previewRootId:"16017954-d9c2-806e-8eba-d994c71414b9",rootId:"16017954-d9c2-806e-8eba-d994c71414b9",spaceId:n().rQ},"ko-KR":{previewRootId:"1a817954-d9c2-80ee-a7cc-f06b312607c6",rootId:"1a817954-d9c2-80ee-a7cc-f06b312607c6",spaceId:n().rQ},"ja-JP":{previewRootId:"1a817954-d9c2-80ab-b876-ce0540bcbc50",rootId:"1a817954-d9c2-80ab-b876-ce0540bcbc50",spaceId:n().rQ},"de-DE":{previewRootId:"1a817954-d9c2-809c-be16-eada2bec6449",rootId:"1a817954-d9c2-809c-be16-eada2bec6449",spaceId:n().rQ},"fr-FR":{previewRootId:"1a817954-d9c2-80e4-a2f7-cbc04084b700",rootId:"1a817954-d9c2-80e4-a2f7-cbc04084b700",spaceId:n().rQ},"es-ES":{previewRootId:"1a817954-d9c2-80ba-a1d2-f116653c87e7",rootId:"1a817954-d9c2-80ba-a1d2-f116653c87e7",spaceId:n().rQ},"es-LA":{previewRootId:"1a817954-d9c2-8009-ace4-c7a8be973d30",rootId:"1a817954-d9c2-8009-ace4-c7a8be973d30",spaceId:n().rQ},"pt-BR":{previewRootId:"1a817954-d9c2-8013-97f7-c8514ce9ca72",rootId:"1a817954-d9c2-8013-97f7-c8514ce9ca72",spaceId:n().rQ},"nb-NO":{previewRootId:"1b417954-d9c2-802c-8aad-ead5bdae042e",rootId:"1b417954-d9c2-802c-8aad-ead5bdae042e",spaceId:n().rQ},"nl-NL":{previewRootId:"1b417954-d9c2-8040-99cd-f6f24a7b664e",rootId:"1b417954-d9c2-8040-99cd-f6f24a7b664e",spaceId:n().rQ},"da-DK":{previewRootId:"1b417954-d9c2-8000-bc82-e5b055b64bfd",rootId:"1b417954-d9c2-8000-bc82-e5b055b64bfd",spaceId:n().rQ},"sv-SE":{previewRootId:"1b417954-d9c2-8083-934b-e38126f120e2",rootId:"1b417954-d9c2-8083-934b-e38126f120e2",spaceId:n().rQ},"fi-FI":{previewRootId:"1b417954-d9c2-8011-b27a-e0ad995bd435",rootId:"1b417954-d9c2-8011-b27a-e0ad995bd435",spaceId:n().rQ},"zh-CN":{previewRootId:"1b417954-d9c2-8014-bc84-cf44da811cf8",rootId:"1b417954-d9c2-8014-bc84-cf44da811cf8",spaceId:n().rQ},"zh-TW":{previewRootId:"1a817954-d9c2-80a9-bb6f-f39ba79e7dcc",rootId:"1a817954-d9c2-80a9-bb6f-f39ba79e7dcc",spaceId:n().rQ}},nameMessage:r().DZ.getStartedPageMobile}},h=["desktopTeamCreateWithComment","desktopTeamJoinWithComment","desktopTeamCreateWithMention","desktopTeamJoinWithMention"],b=([u,p,m,g].flatMap((e=>Object.values(e.sources))).map((e=>e.rootId)),{teamsHomepage:{emoji:"🏠",nameMessage:r().DZ.teamsHomepage,sources:{"en-US":{previewRootId:"4cd0eced-e273-46c2-84f5-a7efd7fbdd2f",rootId:"4cd0eced-e273-46c2-84f5-a7efd7fbdd2f",spaceId:n().rQ},"ko-KR":{previewRootId:"82be252e-5184-44cd-a91b-a7d6ffdefac6",rootId:"82be252e-5184-44cd-a91b-a7d6ffdefac6",spaceId:n().rQ},"ja-JP":{previewRootId:"bea8efd0-61d7-495b-a255-5c1f40753cf7",rootId:"bea8efd0-61d7-495b-a255-5c1f40753cf7",spaceId:n().rQ},"fr-FR":{previewRootId:"12a6eaa5-30f7-419b-aee7-1be2dbc7278c",rootId:"12a6eaa5-30f7-419b-aee7-1be2dbc7278c",spaceId:n().rQ},"de-DE":{previewRootId:"75db54d0-46ad-43b1-8ef0-7556ce0e9069",rootId:"75db54d0-46ad-43b1-8ef0-7556ce0e9069",spaceId:n().rQ},"es-ES":{previewRootId:"9ac64262-cad7-44f3-bfae-96dabec9e770",rootId:"9ac64262-cad7-44f3-bfae-96dabec9e770",spaceId:n().rQ},"es-LA":{previewRootId:"5b51de44-604b-4a96-b421-9f3e3cf470d2",rootId:"5b51de44-604b-4a96-b421-9f3e3cf470d2",spaceId:n().rQ},"pt-BR":{previewRootId:"b9626438-4451-441c-9608-35ab50e3b182",rootId:"b9626438-4451-441c-9608-35ab50e3b182",spaceId:n().rQ}}}})},535845:(e,t,o)=>{o.d(t,{B:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("chevronUpRounded",{viewBox:"0 0 15 9",svg:(0,n.jsx)("path",{d:"M1.258 6.5L7.203.422a.946.946 0 01.719-.32.99.99 0 01.726.32L14.586 6.5a.89.89 0 01.266.648c0 .524-.407.93-.922.93a.921.921 0 01-.672-.281L7.93 2.32 2.586 7.797a.926.926 0 01-.672.281.915.915 0 01-.922-.93c0-.25.094-.476.266-.648z"})})},541181:(e,t,o)=>{o.d(t,{n:()=>i});var n=()=>o(645873);const r=new(n().O2)("react-day-picker",(async()=>await Promise.all([o.e(95555),o.e(75831),o.e(68548)]).then(o.bind(o,762290)))),i=(0,n()._h)(r,(e=>e.default))},555267:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),r=()=>o(401497),i=()=>o(62856),a=()=>o(331542),s=o(474848);function l(e){let{loadingMessage:t}=e;const o=(0,r().DP)(),l=(0,i().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l&&(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(a().A,{}),t&&(0,s.jsx)("div",{style:{marginLeft:8,color:o.text.secondary},children:t})]})})}},566910:(e,t,o)=>{o.d(t,{e:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"m4.897 3.086-.122-.143a.625.625 0 0 0-.95.814l1.347 1.57c-1.762.91-3.195 2.304-4.083 3.997a1.47 1.47 0 0 0 0 1.362c1.61 3.07 5.011 5.155 8.911 5.155 1.282 0 2.51-.225 3.637-.637l1.588 1.853a.625.625 0 0 0 1.042-.67L4.989 3.229a.6.6 0 0 1-.093-.143M2.194 9.905c.807-1.538 2.15-2.807 3.816-3.599L7.4 7.928a3.326 3.326 0 0 0 4.252 4.961l1.107 1.292a9.4 9.4 0 0 1-2.76.41c-3.459 0-6.42-1.848-7.805-4.486a.22.22 0 0 1 0-.2m6.696.097q0-.151.039-.29l1.194 1.393q-.06.007-.124.007a1.11 1.11 0 0 1-1.109-1.11m7.012 4.038a9.4 9.4 0 0 0 3.01-3.354 1.47 1.47 0 0 0 0-1.362C17.302 6.254 13.9 4.169 10 4.169c-.805 0-1.588.089-2.339.257l.94 1.096a9.5 9.5 0 0 1 1.4-.103c3.458 0 6.42 1.848 7.804 4.486a.22.22 0 0 1 0 .2 8.14 8.14 0 0 1-2.722 2.98z"}),(0,n.jsx)("path",{d:"M13.205 10.893a3.33 3.33 0 0 0-3.596-4.194z"})]})},i=(0,o(340498).wt)("eyeSlash",r)},573351:(e,t,o)=>{o.d(t,{A:()=>i});var n=o(296540),r=o(474848);const i=function(e){let{firstDayOfWeek:t,value:i,selectValue:a=!0,onChange:s,onFocus:l,onBlur:d,disabledDays:c,className:u}=e;const p=(0,n.useMemo)((()=>new Date(i)),[i]),[m,g]=(0,n.useState)(p),f=(0,n.useRef)(i);(0,n.useLayoutEffect)((()=>{f.current!==i&&(g(new Date(i)),f.current=i)}),[i]);const h=(0,n.useCallback)(((e,t,o)=>{s(e.getTime())}),[s]);return(0,r.jsx)("div",{style:{paddingRight:8,paddingBottom:8,paddingLeft:8,paddingTop:4},children:(0,r.jsx)(o(541181).n,{locale:o(662303).locale,className:u??"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:a?{value:p}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:h,onMonthSelected:g,disabled:c,month:m,onDayBlur:d,onDayFocus:l})})}},578194:(e,t,o)=>{o.d(t,{r:()=>n});const n=(0,o(583835).Dv)("importEvernote")},589982:(e,t,o)=>{o.d(t,{u:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("basicClock",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.541 7.919a.53.53 0 01-.39-.157.53.53 0 01-.157-.39c0-.155.053-.282.157-.383a.53.53 0 01.39-.157h2.905V2.895c0-.15.053-.278.158-.383a.521.521 0 01.382-.158.53.53 0 01.39.158.521.521 0 01.157.383v4.477a.53.53 0 01-.157.39.53.53 0 01-.39.157H4.541zm3.452 6.207a6.789 6.789 0 01-2.727-.554 7.124 7.124 0 01-2.256-1.524 7.277 7.277 0 01-1.525-2.256 6.788 6.788 0 01-.553-2.728c0-.966.184-1.875.553-2.727A7.241 7.241 0 015.258.557 6.788 6.788 0 017.987.003c.971 0 1.882.184 2.735.554.852.369 1.604.88 2.256 1.53a7.136 7.136 0 011.53 2.25c.37.852.555 1.761.555 2.727 0 .967-.185 1.876-.554 2.728a7.218 7.218 0 01-3.787 3.78 6.789 6.789 0 01-2.728.554zm0-1.395c.789 0 1.525-.145 2.208-.437a5.678 5.678 0 001.805-1.217 5.68 5.68 0 001.217-1.805c.291-.683.437-1.42.437-2.208a5.55 5.55 0 00-.437-2.2 5.66 5.66 0 00-3.029-3.029 5.567 5.567 0 00-2.208-.438c-.784 0-1.52.146-2.208.438A5.6 5.6 0 003.98 3.052a5.715 5.715 0 00-1.21 1.811 5.55 5.55 0 00-.437 2.201c0 .789.146 1.525.438 2.208a5.735 5.735 0 001.21 1.805 5.598 5.598 0 004.013 1.654z"})})},623275:(e,t,o)=>{o.d(t,{$D:()=>d,CJ:()=>p,Sg:()=>l,iM:()=>v,kJ:()=>m,kx:()=>f,qj:()=>b,rL:()=>i,sH:()=>g,u6:()=>a,wo:()=>h,zr:()=>c});var n=()=>o(278238),r=()=>o(115512);const i=16,a=20,s=10,l=12,d=456,c=24,u=24,p=48;function m(e){let{theme:t,inheritanceBannerEnabled:o,isMobile:n}=e;return{background:t.tint.regular,borderRadius:8,paddingTop:8,paddingBottom:8,paddingLeft:8,paddingRight:8,marginLeft:n?0:i,marginRight:n?0:i,marginTop:4,marginBottom:8}}function g(e){let{isRedesignEnabled:t,isMobile:o}=e;return t?{...h({isMobile:o}),width:"unset",height:p,paddingTop:6,paddingBottom:6}:{}}function f(e){let{environment:t,isRedesignEnabled:o}=e;return o?(0,r().ny)(t,t.device.isMobile?"UISmall":"UIRegular"):(0,r().ny)(t,"UISmall")}function h(e){let{isMobile:t}=e;return{borderRadius:s,transition:"background 150ms ease-out"}}function b(e){let{isMobile:t}=e;return t?12:10}function v(e){let{theme:t,colorOverride:o,size:r=u,useLargeBorderRadius:i,useLightBackgroundColor:a,icon:s}=e;return{background:o||(s&&(0,n().T8)(s)?(0,n().ez)({icon:s,mode:t.mode,useLightGrayColor:a}):a?t.lightDividerColor:t.regularDividerColor),width:r,height:r,borderRadius:i?6:"0.25em"}}},649145:(e,t,o)=>{o.d(t,{L:()=>i});var n=o(296540),r=()=>o(753199);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;return(0,n.useCallback)((t=>{(0,r().SQ)({event:t,context:o,callback:()=>e(t)})}),[...t,o])}},652631:(e,t,o)=>{o.d(t,{X:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("openTeam",{viewBox:"0 0 28 28",svg:(0,n.jsx)("path",{d:"M3.24121 21.4326C3.24121 22.4082 3.80371 23.0322 4.7002 23.0322H22.4629C23.3506 23.0322 23.9131 22.4082 23.9131 21.4326V10.2178C23.9131 9.24219 23.3506 8.61816 22.4629 8.61816H17.2334V5.89355C17.2334 4.91797 16.6709 4.29395 15.7832 4.29395H4.7002C3.80371 4.29395 3.24121 4.91797 3.24121 5.89355V21.4326ZM4.65625 21.1074V6.21875C4.65625 5.86719 4.81445 5.70898 5.16602 5.70898H15.3174C15.6602 5.70898 15.8184 5.86719 15.8184 6.21875V21.1074C15.8184 21.4502 15.6602 21.6172 15.3174 21.6172H13.2959V19.0244C13.2959 18.2686 12.9619 17.917 12.2412 17.917H8.2334C7.5127 17.917 7.17871 18.2686 7.17871 19.0244V21.6172H5.16602C4.81445 21.6172 4.65625 21.4502 4.65625 21.1074ZM7.31934 9.5498H9.0332C9.24414 9.5498 9.39355 9.40918 9.39355 9.18945V7.52832C9.39355 7.31738 9.24414 7.16797 9.0332 7.16797H7.31934C7.1084 7.16797 6.97656 7.31738 6.97656 7.52832V9.18945C6.97656 9.40918 7.1084 9.5498 7.31934 9.5498ZM11.4414 9.5498H13.1465C13.3574 9.5498 13.5068 9.40918 13.5068 9.18945V7.52832C13.5068 7.31738 13.3574 7.16797 13.1465 7.16797H11.4414C11.2217 7.16797 11.0898 7.31738 11.0898 7.52832V9.18945C11.0898 9.40918 11.2217 9.5498 11.4414 9.5498ZM17.2334 21.4326V10.0332H21.9971C22.3398 10.0332 22.498 10.2002 22.498 10.543V21.1074C22.498 21.4502 22.3398 21.6172 21.9971 21.6172H17.2246C17.2334 21.5557 17.2334 21.4941 17.2334 21.4326ZM7.31934 13.0303H9.0332C9.24414 13.0303 9.39355 12.8896 9.39355 12.6699V11.0088C9.39355 10.7979 9.24414 10.6484 9.0332 10.6484H7.31934C7.1084 10.6484 6.97656 10.7979 6.97656 11.0088V12.6699C6.97656 12.8896 7.1084 13.0303 7.31934 13.0303ZM11.4414 13.0303H13.1465C13.3574 13.0303 13.5068 12.8896 13.5068 12.6699V11.0088C13.5068 10.7979 13.3574 10.6484 13.1465 10.6484H11.4414C11.2217 10.6484 11.0898 10.7979 11.0898 11.0088V12.6699C11.0898 12.8896 11.2217 13.0303 11.4414 13.0303ZM19.1582 13.4521H20.5732C20.749 13.4521 20.8721 13.3291 20.8721 13.1533V11.7822C20.8721 11.6064 20.749 11.4834 20.5732 11.4834H19.1582C18.9736 11.4834 18.8682 11.6064 18.8682 11.7822V13.1533C18.8682 13.3291 18.9736 13.4521 19.1582 13.4521ZM7.31934 16.5107H9.0332C9.24414 16.5107 9.39355 16.3613 9.39355 16.1504V14.4893C9.39355 14.2695 9.24414 14.1289 9.0332 14.1289H7.31934C7.1084 14.1289 6.97656 14.2695 6.97656 14.4893V16.1504C6.97656 16.3613 7.1084 16.5107 7.31934 16.5107ZM11.4414 16.5107H13.1465C13.3574 16.5107 13.5068 16.3613 13.5068 16.1504V14.4893C13.5068 14.2695 13.3574 14.1289 13.1465 14.1289H11.4414C11.2217 14.1289 11.0898 14.2695 11.0898 14.4893V16.1504C11.0898 16.3613 11.2217 16.5107 11.4414 16.5107ZM19.1582 16.8096H20.5732C20.749 16.8096 20.8721 16.6865 20.8721 16.5107V15.1396C20.8721 14.9639 20.749 14.8408 20.5732 14.8408H19.1582C18.9736 14.8408 18.8682 14.9639 18.8682 15.1396V16.5107C18.8682 16.6865 18.9736 16.8096 19.1582 16.8096ZM19.1582 20.167H20.5732C20.749 20.167 20.8721 20.0439 20.8721 19.8682V18.4971C20.8721 18.3213 20.749 18.1982 20.5732 18.1982H19.1582C18.9736 18.1982 18.8682 18.3213 18.8682 18.4971V19.8682C18.8682 20.0439 18.9736 20.167 19.1582 20.167ZM8.33008 19.3496C8.33008 19.165 8.42676 19.0684 8.61133 19.0684H11.8633C12.0566 19.0684 12.1445 19.165 12.1445 19.3496V21.6172H8.33008V19.3496Z"})})},658985:(e,t,o)=>{o.d(t,{$:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("membersFilled",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M20.31 14.731c2.22 0 4.097-1.967 4.097-4.513 0-2.485-1.887-4.391-4.098-4.391-2.2 0-4.097 1.937-4.087 4.411 0 2.526 1.866 4.493 4.087 4.493zm-11.725.233c1.937 0 3.57-1.724 3.57-3.935 0-2.17-1.653-3.823-3.57-3.823-1.917 0-3.57 1.683-3.56 3.844 0 2.19 1.633 3.914 3.56 3.914zm-5.588 9.21h7.606c-1.085-1.552.082-4.615 2.374-6.42-1.116-.72-2.566-1.248-4.392-1.248-4.533 0-7.464 3.337-7.464 6.085 0 1.004.507 1.582 1.876 1.582zm10.994-.01h12.637c1.673 0 2.251-.508 2.251-1.44 0-2.607-3.316-6.198-8.57-6.198-5.263 0-8.57 3.59-8.57 6.197 0 .933.578 1.44 2.252 1.44z"})})},736767:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(296540),r=o(474848);function i(e,t){return(0,r.jsx)(o(678553).A,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const a=(0,n.forwardRef)(i)},747671:(e,t,o)=>{o.d(t,{Q:()=>n,a:()=>r});let n=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class r extends(()=>o(757695))().default{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},748539:(e,t,o)=>{o.d(t,{f:()=>n});const n=new(o(645873).O2)("pageCovers",(async()=>o.e(40198).then(o.bind(o,193645))))},756114:(e,t,o)=>{o.d(t,{D:()=>n});function n(e,t){t.route.name;return!1}},757491:(e,t,o)=>{o.d(t,{l:()=>r});var n=o(296540);function r(e){return(0,n.useEffect)((()=>()=>e()),[])}},768627:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{searchQuery:"",searchLimit:n.limitIncrement,searchPopupOpen:!1,addingPage:!1}}}n.limitIncrement=20,n.resultsCacheTTL=2*o(720665).Xb,n.incrementScrollOffset=200;const r=n},820635:(e,t,o)=>{o.d(t,{Q:()=>f});o(581454),o(296540);var n=()=>o(484714),r=()=>o(56366),i=()=>o(401497),a=()=>o(187174),s=()=>o(959013),l=()=>o(284371),d=()=>o(296206),c=()=>o(449506),u=()=>o(698449),p=()=>o(351360),m=()=>o(994006),g=o(474848);function f(e){const{group:t,limit:o,noMembersMessage:f,color:h,trackHover:b}=e,v=(0,i().IS)((e=>({container:{marginBottom:4,..."white_background"===h?{fontSize:l().J.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}:{}},userContainer:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},user:{flexGrow:1},moreMessage:{marginLeft:2,marginTop:4,..."white_background"===h?{fontSize:l().J.UISmall.desktop,color:e.mediumTextColor}:{color:e.text.contrastSecondary}}})),[h]),y=(0,r().K8)((()=>p().default.state.currentSpaceStore),[]),S=(0,n().v3)();(0,r().K8)((()=>{b&&d().ZX(S,{group_id:t.group_id})}),[b,t,S]);const[{value:I}]=(0,a().Yb)((async()=>{if(!y)return;const e=await c().callApi({eventName:"getSpacePermissionGroupMembers",environment:S,data:{groupIds:[t.group_id],spaceId:y.id}});if("success"===e.type){var n;const r=null===(n=e.data.groupUsersMap[t.group_id])||void 0===n?void 0:n.userIds;return(0,u().gA)({userIds:r,limit:o,spaceStore:y})}}),[y,S,t,o]);return 0===(null==I?void 0:I.limitedUserStores.length)?(0,g.jsx)(g.Fragment,{children:f}):(0,g.jsxs)("div",{style:v.container,children:[null==I?void 0:I.limitedUserStores.map((e=>(0,g.jsx)("div",{style:v.userContainer,children:(0,g.jsx)(m().A,{style:v.user,userStore:e,avatarSize:18})},e.id))),I&&I.countRemainingUsers>0&&(0,g.jsx)("div",{style:v.moreMessage,children:(0,g.jsx)(s().sA,{id:"blockPermissionsSettings.groupPermissionUsers.tooltip",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:I.countRemainingUsers}})})]})}},851979:(e,t,o)=>{o.d(t,{h:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("eye",{viewBox:"0 0 32 32",svg:(0,n.jsx)("path",{d:"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z"})})},864779:(e,t,o)=>{o.d(t,{Me:()=>s,Vv:()=>r,Z3:()=>i,wI:()=>a});var n=()=>o(244641);function r(e){if("week"===e.frequency&&e.weekdays&&1===e.weekdays.length)return{weekday:e.weekdays[0],duration:e.interval}}function i(e){const{currentSprintEndDate:t,sprintSchedule:o}=e;return l({startDate:c({dateToAdjust:n().c9.fromISO(t),weekday:o.weekday,wrapForEqualDays:!0}),duration:o.duration})}function a(e){const{userTimeZone:t,sprintSchedule:o}=e;return l({startDate:n().c9.local({zone:t}),duration:o.duration})}function s(e){const{currentSprintStartDate:t,sprintSchedule:o}=e,r=c({dateToAdjust:n().c9.fromISO(t),weekday:o.weekday,wrapForEqualDays:!1}),{end_date:i}=l({startDate:r,duration:o.duration});let a=n().c9.fromISO(i);const s=n().c9.now().startOf("day");for(;a.diff(s,"days").days<0;)a=a.plus({weeks:1});return{type:"daterange",start_date:a.plus({days:1}).minus({weeks:o.duration}).toISODate(),end_date:a.toISODate()}}function l(e){const{startDate:t,duration:o}=e,n=t.plus({weeks:o}).minus({days:1});return{type:"daterange",start_date:t.toISODate(),end_date:n.toISODate()}}const d={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6};function c(e){const{dateToAdjust:t,weekday:o,wrapForEqualDays:n}=e,r=u({currentWeekday:t.weekday%7,nextWeekday:d[o],wrapForEqualDays:n});return t.plus({days:r})}function u(e){const{currentWeekday:t,nextWeekday:o,wrapForEqualDays:n}=e,r="number"==typeof t?t:d[t],i="number"==typeof o?o:d[o];if(r===i)return n?7:0;let a=r,s=0;for(;a!==i;)a===d.SA?a=0:a+=1,s+=1;return s}},888325:(e,t,o)=>{function n(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>n})},893627:(e,t,o)=>{o.d(t,{K:()=>a});var n=o.n(o(440537)),r=()=>o(132456),i=()=>o(206267);class a{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=o(851941).Yf[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e){const{enableTestDateOffset:t,enableIdSchema:n}=this.getSettings();return n&&e!==o(867178).wI?(this.idCreatorLogger(void 0,e,t?"id_schema_test":"id_schema"),(0,r().J4)(t,this.mainShortId,e,this.isServerOriginated)):this.legacyId(e,"disabled")}pointerInMain(e){return{table:e,id:this.idInMain(e)}}async idWithSpaceId(e,t){const{enableTestDateOffset:o,enableIdSchema:i}=this.getSettings();if(!i||"space"===t)return this.legacyId(t,"disabled");const a=this.mapSpaceIdToShortId(e),s=n().types.isPromise(a)?await a:a;return s?(this.idCreatorLogger(e,t,o?"id_schema_test":"id_schema"),(0,r().kw)(o,s,t,this.isServerOriginated)):this.legacyId(t,"missing_short_id")}async pointerWithSpaceId(e,t){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t)}}idWithSpaceShortId(e,t){const{enableTestDateOffset:o,enableIdSchema:n}=this.getSettings();return n&&"space"!==t?(this.idCreatorLogger(void 0,t,o?"id_schema_test":"id_schema"),(0,r().kw)(o,e,t,this.isServerOriginated)):this.legacyId(t,"disabled")}legacyId(e,t){return this.idCreatorLogger(void 0,e,t),i().JW()}async deterministicIdWithSpaceId(e,t,o){const{enableTestDateOffset:a,enableIdSchema:s}=this.getSettings();if(!s)return this.idCreatorLogger(e,t,"disabled"),i().gB(o);const l=this.mapSpaceIdToShortId(e),d=n().types.isPromise(l)?await l:l;return d?(this.idCreatorLogger(e,t,a?"id_schema_test":"id_schema"),(0,r().lf)(d,t,o)):(this.idCreatorLogger(e,t,"missing_short_id"),i().gB(o))}deterministicIdWithSpaceShortId(e,t,o){const{enableTestDateOffset:n,enableIdSchema:a}=this.getSettings();return a?(this.idCreatorLogger(void 0,t,n?"id_schema_test":"id_schema"),(0,r().lf)(e,t,o)):(this.idCreatorLogger(void 0,t,"disabled"),i().gB(o))}async getSpaceIdCreator(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const o=this.mapSpaceIdToShortId(e),r=n().types.isPromise(o)?await o:o;return this.getSpaceShortIdCreator(e,r)}getSpaceIdCreatorSync(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const o=this.mapSpaceIdToShortId(e),r=n().types.isPromise(o)?void 0:o;return this.getSpaceShortIdCreator(e,r)}getSpaceShortIdCreator(e,t){const{enableIdSchema:o}=this.getSettings();return o&&t?new l(e,this,t):new s(e,this.idCreatorLogger)}async getSpaceIdCreatorFromModel(e){return e.getShortIdStr()?this.getSpaceShortIdCreator(e.id,Number(e.getShortIdStr())):await this.getSpaceIdCreator(e.id)}}class s{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e){return this.idCreatorLogger(void 0,e,"disabled"),i().JW()}idInMain(e){return this.idCreatorLogger(void 0,e,"disabled"),i().JW()}deterministicIdInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled"),i().gB(t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class l{constructor(e,t,o){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=o}idInSavedSpace(e){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e)}idInMain(e){return this.idCreator.idInMain(e)}deterministicIdInSavedSpace(e,t){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}},950914:(e,t,o)=>{o.d(t,{AL:()=>i,Q6:()=>s,vt:()=>a});o(898992),o(672577);var n=()=>o(66689),r=()=>o(254947);const i={autoCompleteSprints:!1,actionConfig:{complete_sprint_action:"complete_sprint_and_move_incomplete_tasks_to_next_sprint"},recurrenceConfig:{interval:2,weekdays:["MO"]}};function a(e){const{eventTracker:t,properties:o}=e;t.DO_NOT_USE_commonTrackEvent({eventName:"complete_sprint_action",properties:o})}function s(e,t){var o;return null===(o=t.groups)||void 0===o||null===(o=o.find((t=>t.id===n().nl||(null==t?void 0:t.name)===r().P0||(null==t?void 0:t.name)===e.formatMessage(r().oz.statusGroupNameComplete))))||void 0===o?void 0:o.name}},966759:(e,t,o)=>{o.d(t,{i:()=>i});var n=()=>o(476492),r=()=>o(175213);function i(e){const{environment:t,collectionContextStore:o,property_type:i,from:a,property:s,...l}=e,d=(0,n().sl)(o)||{};(0,r().G)(t,{property:s,property_type:i,from:a,...l,...d})}},973633:(e,t,o)=>{o.d(t,{P:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("peopleFillCheckmark",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M14.5391 10.3174C14.4115 10.3174 14.2975 10.29 14.1973 10.2354C14.097 10.1807 13.999 10.0964 13.9033 9.98242L12.29 8.01367C12.1715 7.86328 12.1123 7.70833 12.1123 7.54883C12.1123 7.38021 12.1693 7.23665 12.2832 7.11816C12.4017 6.99967 12.5452 6.94043 12.7139 6.94043C12.8141 6.94043 12.9053 6.96322 12.9873 7.00879C13.0739 7.0498 13.1582 7.12272 13.2402 7.22754L14.5117 8.84082L17.2188 4.51367C17.3555 4.28581 17.5309 4.17188 17.7451 4.17188C17.9046 4.17188 18.0482 4.22428 18.1758 4.3291C18.3034 4.42936 18.3672 4.56608 18.3672 4.73926C18.3672 4.81673 18.349 4.89648 18.3125 4.97852C18.2806 5.05599 18.2419 5.12891 18.1963 5.19727L15.1406 9.97559C14.9948 10.2035 14.7943 10.3174 14.5391 10.3174ZM2.85645 16.2441C2.47363 16.2441 2.17285 16.1576 1.9541 15.9844C1.73535 15.8112 1.62598 15.5742 1.62598 15.2734C1.62598 14.8314 1.75814 14.3688 2.02246 13.8857C2.29134 13.4027 2.67643 12.9492 3.17773 12.5254C3.68359 12.1016 4.29199 11.7575 5.00293 11.4932C5.71387 11.2288 6.51139 11.0967 7.39551 11.0967C8.28418 11.0967 9.08398 11.2288 9.79492 11.4932C10.5059 11.7575 11.112 12.1016 11.6133 12.5254C12.1191 12.9492 12.5065 13.4027 12.7754 13.8857C13.0443 14.3688 13.1787 14.8314 13.1787 15.2734C13.1787 15.5742 13.0693 15.8112 12.8506 15.9844C12.6318 16.1576 12.3311 16.2441 11.9482 16.2441H2.85645ZM7.40234 9.87988C6.9056 9.87988 6.44759 9.74544 6.02832 9.47656C5.61361 9.20768 5.27865 8.84538 5.02344 8.38965C4.77279 7.93392 4.64746 7.4235 4.64746 6.8584C4.64746 6.30241 4.77279 5.80111 5.02344 5.35449C5.27865 4.90332 5.61589 4.54557 6.03516 4.28125C6.45443 4.01693 6.91016 3.88477 7.40234 3.88477C7.89909 3.88477 8.3571 4.01465 8.77637 4.27441C9.19564 4.53418 9.5306 4.88965 9.78125 5.34082C10.0365 5.78743 10.1641 6.28874 10.1641 6.84473C10.1641 7.41439 10.0365 7.92936 9.78125 8.38965C9.5306 8.84538 9.19564 9.20768 8.77637 9.47656C8.3571 9.74544 7.89909 9.87988 7.40234 9.87988Z"})})},976721:(e,t,o)=>{o.d(t,{Dw:()=>I,Hc:()=>S,o5:()=>y});o(16280),o(296540);var n=()=>o(857639),r=()=>o(183607),i=()=>o(433847),a=()=>o(161479),s=()=>o(959013),l=()=>o(496603),d=()=>o(701763),c=()=>o(901389),u=()=>o(579627),p=()=>o(317909),m=()=>o(125565),g=()=>o(247123),f=()=>o(406792),h=()=>o(630116),b=()=>o(663590),v=o(474848);async function y(e){let{newRole:t,...o}=e;const n=o.oldPermissionItem,r=(0,l().o8)(n);return r.role=t,await S({newPermissionItem:r,...o})}async function S(e){const{oldPermissionItem:t,newPermissionItem:o,wasInherited:r,environment:s,store:l,sudoModeStore:c,restrictingVisibility:m,fromPermissionWrapper:g,trustedDomainsLoggingData:v}=e,y=(0,b().FI)();if(!(0,i().nK)(t,o))throw new Error("Permission type mismatch.");const S=!!c&&c.shouldSaveTransactionWithSudoMode(l),C=(0,i().$q)(t.role,o.role);if(r&&C!==o.role||m){return await I({environment:s,useSudoMode:S,store:l,permissionItem:o,fromPermissionWrapper:g,isRedesignEnabled:y,shouldInherit:!0,trustedDomainsLoggingData:v})}return l instanceof h().Bv&&!l.isTopLevel()&&t.role!==o.role&&C!==t.role&&d().MR(s),p().createAndCommit({userAction:"PermissionItem.handlePermissionItemChange",environment:s,canUndo:!0,useSudoMode:S,perform:t=>{const n=f().default.DO_NOT_USE_markLegacy("share_menu.update_page_permission_lag");u().wd({environment:s,store:l,permissionItems:[o],transaction:t,pagePermissionChangeLocation:e.location,metric:n,fromPermissionWrapper:g})}}),"trusted_domain_permission"===o.type&&n().log({level:"warning",from:"shareMenu.handlePermissionItemChange",type:"TrustedDomainPermissionChange",spaceId:(0,a().e)(l.pointer.spaceId),data:{miscDataToConvertToString:{message:"shareMenu.handlePermissionItemChange updating trusted domain permission",blockId:l.id,oldPermissionItem:t,newPermissionItem:o,trustedDomainsLoggingData:v}}}),!0}async function I(e){const{environment:t,useSudoMode:o,store:n,permissionItem:i,fromPermissionWrapper:a,isRedesignEnabled:l,shouldInherit:d,trustedDomainsLoggingData:f}=e,h="none"===(null==i?void 0:i.role)?{type:"remove",permissionItem:i}:{type:"restrict"};return!!("user_permission"===(null==i?void 0:i.type)&&(null==i?void 0:i.user_id)===t.currentUser.id||(l?await c().Gh({message:(0,g().r6)(h,l),description:(0,v.jsx)(m().A,{isSmall:!0,isMultiline:!0,children:(0,v.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.footer.whisperTextV2",defaultMessage:"Changing this will unlink this page from its parent, so it will no longer inherit share settings. Admins can still restore settings on unlinked pages."})}),acceptLabel:(0,g().QU)(h,l),icon:(0,r().X)({height:24,width:24})}):await c().Gh({message:(0,g().r6)(h),acceptLabel:(0,g().QU)(h),cancelLabel:(0,v.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,v.jsx)(m().A,{isSmall:!0,isMultiline:!0,children:(0,v.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.footer.whisperText",defaultMessage:"Admins will still be able to restore permissions from restricted pages."})})})).accept)&&(p().createAndCommit({userAction:"PermissionItem.onAccept",environment:t,canUndo:!0,useSudoMode:o,perform:e=>{u().wW({environment:t,store:n,permissionItem:i,shouldInherit:d,transaction:e,fromPermissionWrapper:a,trustedDomainsLoggingData:f})}}),!0)}}}]);