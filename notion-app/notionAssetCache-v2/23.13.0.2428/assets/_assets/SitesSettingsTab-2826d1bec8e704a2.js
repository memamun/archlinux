"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[78171],{67805:(e,t,i)=>{i.d(t,{X:()=>a,cT:()=>r,sL:()=>l});i(898992),i(672577);var s=()=>i(68263),n=()=>i(731320),o=()=>i(508496);function a(e,t){return e.sort(((e,i)=>{const s=e.store.canAdmin();if(s===i.store.canAdmin()){var n,o;const s=null===(n=e.publishedMetadata.publishedBy)||void 0===n?void 0:n.id,a=e.publishedMetadata.publishedTime,r=null===(o=i.publishedMetadata.publishedBy)||void 0===o?void 0:o.id,l=i.publishedMetadata.publishedTime;if(t){if(s===t&&r===t&&a&&l)return l-a;if(s===t)return-1;if(r===t)return 1}return a&&l?l-a:0}return s?-1:1}))}function r(e){const{environment:t,store:i}=e;if(!i.pathIsAccessibleAndAlive())return!1;if(!n().i0(i).find((e=>(0,s().W8)(e.permissionItem))))return!1;if(n().qb(t,i))return!1;return!("on"===o().default.getEligibleGroup({experimentId:"sites_disable_banner",defaultGroup:"control"}))}function l(e){const{environment:t,store:i}=e;if(!i.pathIsAccessibleAndAlive())return!1;if(!n().i0(i).find((e=>(0,s().FP)(e.permissionItem)&&"none"!==e.permissionItem.role)))return!1;if(n().qb(t,i))return!1;return"on"===o().default.getEligibleGroup({experimentId:"sites_disable_banner",defaultGroup:"control"})}},315841:(e,t,i)=>{i.d(t,{Js:()=>a,Ns:()=>n,d:()=>o});var s=()=>i(645873);const n={publishSite:new(s().O2)("PublishSite",(async()=>await Promise.all([i.e(9304),i.e(81141),i.e(72915),i.e(69689),i.e(16345)]).then(i.bind(i,791328)))),publishedSiteSettings:new(s().O2)("PublishedSiteSettings",(async()=>await Promise.all([i.e(23806),i.e(75134),i.e(9304),i.e(37353),i.e(55373),i.e(29151),i.e(16908),i.e(48315),i.e(847),i.e(5887),i.e(21627),i.e(82472),i.e(96345),i.e(75659),i.e(47858),i.e(81141),i.e(65638),i.e(72915),i.e(69689),i.e(2409),i.e(39301)]).then(i.bind(i,69857))))},o=(0,s()._h)(n.publishedSiteSettings,(e=>e.default)),a=(0,s()._h)(n.publishSite,(e=>e.default))},454531:(e,t,i)=>{i.d(t,{W:()=>p});var s=()=>i(867772),n=()=>i(681810),o=()=>i(901389),a=()=>i(896628),r=()=>i(383594),l=()=>i(317909),d=()=>i(892632);const c=1500,u=(0,i(959013).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image linkâ€¦",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function p(e){let{environment:t,intl:i,store:s,rect:n}=e;r().W(t,{originGap:3,originRect:n,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:i.formatMessage(u.pageCover),onDelete:()=>{!function(e){let{environment:t,store:i}=e;r().I(),l().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{a().PT({store:i,transaction:e})}})}({environment:t,store:s})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:i,position:n}=e;g({environment:t,store:s,url:i,position:n})}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:i.formatMessage(u.fileTypeCaption,{idealImageWidth:c}),onUpload:e=>{r().I(),d().QM({environment:t,file:e[0],bucket:"secure",record:s.pointer,onStart:m,onProgress:f,onComplete:e=>{var i;i={environment:t,store:s,url:e},h({...i,position:.5})},onError:()=>{o().f1(i.formatMessage(u.uploadFailed))}})}},{type:"embed",title:i.formatMessage(u.embedTitle),inputPlaceholder:i.formatMessage(u.embedPlaceholder),caption:i.formatMessage(u.embedCaption),buttonText:i.formatMessage(u.embedSubmit),onChange:e=>{var i;i={environment:t,store:s,url:e},h({...i,position:.5}),r().I()}},{type:"unsplash",onChange:e=>{let{url:i,position:n}=e;g({environment:t,store:s,url:i,position:n})}}]})}async function h(e){const{environment:t,store:i,url:o,position:r}=e,{serverCommitResult:d}=l().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{a().fg({store:i,url:o,position:r||.5,transaction:e})}});await d,n().A.state.loadingMode===s().vS&&n().A.setState({loadingMode:s().Gi,dataURL:n().A.state.dataURL,uploadProgress:100})}function g(e){h(e),e.environment.device.isMobile&&r().I()}function m(e){const{file:t,name:i,size:o}=e;if(r().I(),n().A.setState({loadingMode:s().Wc,file:t,name:i,size:o}),t instanceof File&&t.type.indexOf("image")>=0){const e=new FileReader;e.onload=e=>{n().A.state.loadingMode===s().Wc&&n().A.setState({...n().A.state,uploadProgress:0,loadingMode:s().vS,dataURL:e.target.result})},e.readAsDataURL(t)}}function f(e){const{progressPercent:t}=e;n().A.state.loadingMode===s().vS&&n().A.setState({...n().A.state,uploadProgress:t})}},466094:(e,t,i)=>{i.r(t),i.d(t,{SitesSettingsTab:()=>ye});var s=i(296540),n=()=>i(401497),o=()=>i(959013),a=()=>i(284371),r=()=>i(802790),l=()=>i(690197),d=()=>i(843878),c=()=>i(8178),u=()=>i(645873);const p=new(u().O2)("SitesDomainsSection",(async()=>await Promise.all([i.e(98497),i.e(87982),i.e(1066),i.e(27229)]).then(i.bind(i,108912)))),h=(0,u()._h)(p,(e=>e.DomainsSection));var g=()=>i(836251),m=(i(944114),i(581454),()=>i(244641)),f=()=>i(484714),b=()=>i(56366),y=()=>i(869190),x=()=>i(126158),S=()=>i(133033),v=()=>i(704152),A=()=>i(710149),C=()=>i(859428),j=()=>i(125565),w=()=>i(994006),I=()=>i(317182),M=()=>i(578872),k=()=>i(962730),P=()=>i(630116),B=()=>i(716979),T=()=>i(562800),R=()=>i(558410),U=()=>i(890874),F=()=>i(652300),W=()=>i(568625),L=()=>i(406699),_=()=>i(285790),D=()=>i(107683),z=()=>i(380682),E=()=>i(584262),K=()=>i(846899),N=()=>i(278768),V=()=>i(884107),G=()=>i(760217),O=()=>i(928600),H=()=>i(939740),$=()=>i(89924),J=()=>i(722872),q=()=>i(525700),Y=()=>i(40226),Q=i(474848);function X(e){const{store:t,parent:i,isSettingsDisabled:s,onSettingsClick:o}=e,a=(0,f().v3)(),r=(0,n().IS)((()=>({actionIcon:{width:14,height:14}})),[]),l=[{key:"view",render:e=>(0,Q.jsx)(Z,{...e,iconStyle:r.actionIcon}),action:()=>{q().uY({environment:a,store:t,pageVisitSource:E().y8.SiteSettings}),N().ym(a,{action:"view_site"}),i.close()}},{key:"copy",render:e=>(0,Q.jsx)(ee,{...e,iconStyle:r.actionIcon}),action:()=>{!async function(e,t){const i=Y().R({store:t,pageVisitSource:E().y8.SiteSettings}),s=await V().R.clipboardActions.load();s.copyString({environment:e,stringValue:i,copiedMessage:s.clipboardMessages.copiedLinkToClipboard})}(a,t),N().ym(a,{action:"copy_site_link"}),i.close()}}],d={key:"settings",render:e=>(0,Q.jsx)(te,{...e,iconStyle:r.actionIcon,disabled:s}),action:()=>{o(t.id),N().ym(a,{action:"configure_site"}),i.close()}};return(0,Q.jsx)(O().A,{menuType:J().gu.Popup,width:160,children:(0,Q.jsx)(H().Ay,{initialFocus:void 0,type:H().Oh.Vertical,sections:[{key:"link",render:e=>(0,Q.jsx)($().A,{...e}),items:l},{key:"settings",render:e=>(0,Q.jsx)($().A,{...e,topBorder:!0}),items:[d]}]})})}const Z=s.forwardRef(((e,t)=>{const{iconStyle:s}=e;return(0,Q.jsx)(G().A,{...e,ref:t,icon:(0,i(328347).h)(s),title:(0,Q.jsx)(o().sA,{id:"sites.siteActions.viewSite",defaultMessage:"View site"})})}));Z.displayName="ViewAction";const ee=s.forwardRef(((e,t)=>{const{iconStyle:s}=e;return(0,Q.jsx)(G().A,{...e,ref:t,icon:(0,i(212439).V)(s),title:(0,Q.jsx)(o().sA,{id:"sites.siteActions.copySiteLink",defaultMessage:"Copy site link"})})}));ee.displayName="CopyAction";const te=s.forwardRef(((e,t)=>{const{iconStyle:s,disabled:n}=e;return n?(0,Q.jsx)(C().A,{renderTooltip:()=>(0,Q.jsx)(o().sA,{id:"sites.siteActions.noEditAccess",defaultMessage:"You do not have access to update the settings for this published site."}),placement:k().W.Bottom,render:n=>(0,Q.jsx)(G().A,{...(0,i(553965).A)(n,e),ref:t,icon:(0,K().B)(s),title:(0,Q.jsx)(o().sA,{id:"sites.siteActions.settings",defaultMessage:"Settings"})})}):(0,Q.jsx)(G().A,{...e,ref:t,icon:(0,K().B)(s),title:(0,Q.jsx)(o().sA,{id:"sites.siteActions.settings",defaultMessage:"Settings"})})}));te.displayName="SettingsAction";var ie=()=>i(149375),se=()=>i(954845),ne=()=>i(179034),oe=()=>i(120303),ae=()=>i(928074),re=()=>i(315841);function le(e){let{spaceStore:t,blockId:i,onClose:s,onUnpublish:n}=e;const o=(0,f().v3)(),a=P().Bv.createChildStore(t,{table:ne().ev,id:i}),r=(0,b().K8)((()=>ae().dR({store:a,environment:o}).mostPermissivePublicItem),[o,a]);return"none"===r.permissionItem.role?(s(),null):(0,Q.jsx)(de,{store:a,mostPermissivePublicItem:r,onClose:s,onUnpublish:n})}function de(e){const{store:t,mostPermissivePublicItem:i,onClose:r,onUnpublish:l}=e,d=(0,b().K8)((()=>"seo"===z().A.state.siteSettingContentType),[]),c=(0,s.useCallback)((()=>{q().Bp("initial")}),[]),u=(0,n().IS)((()=>({container:{flex:1,paddingBottom:8},titleContainer:{display:"flex",alignItems:"center",gap:4,padding:20,fontSize:14,lineHeight:1.25,fontWeight:a().Wy.semibold,paddingLeft:d?8:20},publishIcon:{height:16,width:16}})),[d]);return(0,Q.jsxs)("div",{style:u.container,children:[(0,Q.jsxs)("div",{style:u.titleContainer,children:[d&&(0,Q.jsx)(ce,{onClick:c}),(0,Q.jsx)(j().A,{children:(0,Q.jsx)(o().sA,{defaultMessage:"Publish settings",id:"publishSiteSettings.settings.title"})}),(0,se().J)(u.publishIcon),(0,Q.jsx)(oe().R,{onClick:r})]}),(0,Q.jsx)(re().d,{store:t,mostPermissivePublicItem:i,sudoModeStore:void 0,location:"published_site_settings",showManageAllDomains:!1,showAllPublishedSites:!1,onUnpublish:l,shouldAskForConfirmationOnPublish:!0})]})}function ce(e){const{onClick:t}=e,i=(0,o().tz)(),s=(0,n().IS)((()=>({topContainer:{display:"flex",alignItems:"center",width:"max-content"},backButtonPressedStyle:{backgroundColor:"transparent"},iconButton:{marginRight:6,height:24,width:24},arrowIcon:{height:16,width:16,strokeWidth:a().Wy.semibold}})),[]);return(0,Q.jsx)("div",{style:s.topContainer,children:(0,Q.jsx)(_().A,{icon:ie().v,iconStyle:s.arrowIcon,style:s.iconButton,onClick:t,ariaLabel:i.formatMessage({id:"publishSiteSettings.settings.backbutton.ariaLabel",defaultMessage:"Go back to publish settings."})})})}function ue(e){const t=(0,o().tz)(),{spaceStore:i,store:a,isSettingsDisabled:r}=e,[l,d]=(0,s.useState)(void 0),c=(0,s.useCallback)((e=>{d(e)}),[d]),u=(0,s.useCallback)((()=>{d(void 0),z().A.reset()}),[d]),p=(0,n().IS)((()=>({settingButtonIcon:{width:18,height:18}})),[]);return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(L().Ay,{alignmentToOrigin:k().C.End,renderOrigin:e=>(0,Q.jsx)(_().A,{...e,ariaLabel:t.formatMessage({id:"sites.siteActionsButtonPopup.siteSettings",defaultMessage:"Site settings"}),icon:W().L,iconStyle:p.settingButtonIcon}),popupType:L().z7.Popup,render:e=>(0,Q.jsx)(X,{store:a,parent:e,isSettingsDisabled:r,onSettingsClick:c})}),(0,Q.jsx)(D().s,{isOpen:Boolean(l),onDismiss:u,areaConstraint:{width:{type:"fixed",length:480}},render:()=>l?(0,Q.jsx)(le,{spaceStore:i,blockId:l,onClose:u,onUnpublish:()=>{R().A.removeSiteFromSpace(i.id,l)}}):null})]})}const pe=5e3;function he(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"3px 5px":0;return[{key:"page",header:(0,Q.jsx)(o().sA,{id:"sites.header.pageColumnHeader",defaultMessage:"Page"}),style:{width:"32%",padding:e}},{key:"domain",header:(0,Q.jsx)(o().sA,{id:"sites.header.domainColumnHeader",defaultMessage:"Domain"}),style:{width:"28%"}},{key:"published-by",header:(0,Q.jsx)(o().sA,{id:"sites.home.publishedByColumnHeader",defaultMessage:"Published by"}),style:{width:"20%",padding:e}},{key:"published-date",header:(0,Q.jsx)(o().sA,{id:"sites.home.publishedDateColumnHeader",defaultMessage:"Published date"}),style:{width:"16%",padding:e}},{key:"edit",header:(0,Q.jsx)(Q.Fragment,{}),style:{width:"4%"}}]}function ge(e){let{column:t,onSortableColumnClick:i,header:s}=e;const o=(0,n().IS)((e=>({wrapper:{display:"flex"},text:{fontSize:a().J.UISmall.desktop,fontWeight:a().Wy.regular,color:e.mediumTextColor},sortButton:{display:"flex",alignItems:"center",padding:"3px 5px",overflow:"hidden",maxWidth:"100%",borderRadius:4},sortIcon:{fill:e.mediumTextColor,width:12,height:12,marginLeft:4}})),[]),{sortColumn:r,sortAscending:l}=(0,b().K8)((()=>{const{sortColumn:e,sortAscending:t}=R().A.state;return{sortColumn:e,sortAscending:t}}),[]),d=["page","published-or-created-by","published-date"].includes(t),c=()=>{if(t===r)return(0,x().m)({...o.sortIcon,...!l&&{transform:"rotate(180deg)"}})};return s&&d?(0,Q.jsx)("div",{style:o.wrapper,children:(0,Q.jsxs)(v().A,{style:o.sortButton,onClick:()=>i(t),children:[s,c()]})}):s?(0,Q.jsx)("div",{style:o.wrapper,children:s}):(0,Q.jsx)(Q.Fragment,{children:s})}function me(e){const{spaceStore:t}=e,i=(0,f().v3)(),a=i.currentUser.id,r=(0,o().tz)();(0,s.useEffect)((()=>(B().rw(i,{spaceStore:t,currentUserId:a,limit:pe}),()=>{B().Ss(t)})),[i,t,a]);const l=(0,n().IS)((e=>({headerContainer:{display:"flex",alignItems:"center",gap:4,marginBottom:12},helpIcon:{height:14,width:15,color:e.icon.tertiary},tableBox:{tableLayout:"fixed"},cell:{paddingRight:12,height:44},shimmerBox:{height:12,gap:16,display:"flex",borderRadius:6}})),[]),d=(0,b().K8)((()=>{const e=R().A.getSortedSitesForSpace(t.id,r);if(!e)return;const i=[];for(const s of e){const{store:e,publishedMetadata:n}=s,o=e.id,a=e.canAdmin(),l=M().UP(e),d=T().Ue(e.getSpaceStore(),l),c=n.publishedTime?(0,y().eV)({value:m().c9.fromMillis(n.publishedTime),preset:"medium"}):"",u=n.publishedBy,p=u?P().sk.createChildStore(e,u):void 0,h=null==p?void 0:p.getDisplayName(r),g=p instanceof P().LU?(0,Q.jsx)(w().A,{userStore:p,avatarSize:20,style:{width:"fit-content",maxWidth:"98%"}},`${o}-published-by`):(0,Q.jsx)(fe,{text:h},`${o}-published-by`);i.push({key:o,columns:[(0,Q.jsx)(F().A,{store:e},o),(0,Q.jsx)(U().A,{spaceStore:t,domainId:null==d?void 0:d.id,isRelative:!0},`${o}-domain`),g,(0,Q.jsx)(fe,{text:c},`${o}-published-on`),(0,Q.jsx)(ue,{spaceStore:t,store:e,isSettingsDisabled:!a},`${o}-actions`)]})}return i}),[t,r]),u=(0,s.useMemo)((()=>Array.from({length:9}).map(((e,t)=>({columns:Array.from({length:5}).map(((e,t)=>(0,Q.jsx)(A().A,{style:l.shimmerBox},t))),key:`shimmerRow-${t}`})))),[l.shimmerBox]),p=!d,h=d&&0===d.length,g=(0,s.useCallback)((e=>{const{sortColumn:t,sortAscending:i}=R().A.state,s=e!==t||!i;R().A.setState({...R().A.state,sortAscending:s,sortColumn:e})}),[]);return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(c().A,{style:l.headerContainer,children:[(0,Q.jsx)(o().sA,{id:"sites.home.title",defaultMessage:"All published sites"}),(0,Q.jsx)(C().A,{renderTooltip:()=>(0,Q.jsx)(o().sA,{id:"sites.home.tooltip",defaultMessage:"Notion pages that have been published as a site"}),render:e=>(0,Q.jsx)("div",{...e,children:(0,S().$)(l.helpIcon)}),placement:k().W.Bottom,alignment:k().C.Center})]}),p?(0,Q.jsx)(I().A,{columns:he(!0),rows:u,tableStyle:l.tableBox,cellStyle:l.cell}):(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(I().A,{columns:he(!1).map((e=>({key:e.key,header:(0,Q.jsx)(ge,{column:e.key,onSortableColumnClick:g,header:e.header}),style:e.style}))),rows:d,tableStyle:l.tableBox,cellStyle:l.cell}),h&&(0,Q.jsx)(be,{})]})]})}function fe(e){const{text:t}=e,i=(0,n().IS)((()=>({text:{width:"fit-content",maxWidth:"98%",...a().RC}})),[]);return t?(0,Q.jsx)("div",{style:i.text,children:t}):null}function be(){const e=(0,n().IS)((e=>({message:{textAlign:"center",marginTop:12,marginBottom:12,color:e.text.tertiary}})),[]);return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(j().A,{style:e.message,children:(0,Q.jsx)(o().sA,{id:"sites.results.empty",defaultMessage:"You have no published sites in this workspace"})}),(0,Q.jsx)(r().A,{size:1})]})}function ye(e){const{spaceStore:t}=e,i=(0,n().IS)((()=>({headerContainer:{display:"flex"},titleContainer:{flex:1},learnMoreButton:{fontWeight:a().Wy.regular}})),[]);return(0,Q.jsxs)(d().Ay,{children:[(0,Q.jsx)(c().A,{large:!0,divider:"full",children:(0,Q.jsxs)("div",{style:i.headerContainer,children:[(0,Q.jsx)("div",{style:i.titleContainer,children:(0,Q.jsx)(o().sA,{id:"sites.heading.title",defaultMessage:"Sites"})}),(0,Q.jsx)(l().A,{buttonStyle:i.learnMoreButton,title:(0,Q.jsx)(o().sA,{id:"sites.heading.learnMore",defaultMessage:"Learn more"}),href:(0,g().xS)("guides.autogeneratedDomains"),analyticsFrom:"sites_settings"})]})}),(0,Q.jsx)(h,{spaceStore:t}),(0,Q.jsx)(r().A,{size:20,isHidden:!0}),(0,Q.jsx)(me,{spaceStore:t})]})}},558410:(e,t,i)=>{i.d(t,{A:()=>o});i(898992),i(354520);var s=()=>i(496603);class n extends(()=>i(757695))().default{getInitialState(){return{sites:{},sortAscending:!0,sortColumn:void 0}}initializeSiteResultsForSpace(e,t){this.state.sites[e]=t,this.emit()}getSortedSitesForSpace(e,t){const{sortAscending:n,sortColumn:o}=this.state,a=this.state.sites[e];if(a)switch(o){case"page":return s().My(a,(e=>i(919709).q4_(e.store.getTitleValue()).toLowerCase()),n?"asc":"desc");case"published-by":return s().My(a,(e=>{const s=e.publishedMetadata.publishedBy,n=s?i(630116).sk.createChildStore(e.store,s):void 0;return null==n?void 0:n.getDisplayName(t).toLowerCase()}),n?"asc":"desc");case"published-date":return s().My(a,(e=>e.publishedMetadata.publishedTime),n?"asc":"desc");default:return a}}removeSiteFromSpace(e,t){const i=this.state.sites[e];i&&(this.state.sites[e]=i.filter((e=>e.store.id!==t)),this.emit())}resetSitesForSpace(e){this.state.sites[e]=void 0}}const o=new n},652300:(e,t,i)=>{i.d(t,{A:()=>x});var s=i(296540),n=()=>i(56366),o=()=>i(401497),a=()=>i(584262),r=()=>i(926401),l=()=>i(500066),d=()=>i(296798),c=()=>i(614505),u=()=>i(16006),p=()=>i(492414),h=()=>i(553965),g=()=>i(962730),m=i(474848);function f(e){let{store:t,...n}=e;const o=(0,s.useCallback)((e=>(0,m.jsx)(i(851860).yf,{store:t,events:e})),[t]);return(0,m.jsx)(i(859428).A,{noStyle:!0,delayThreshold:400,placement:g().W.Bottom,alignment:g().C.Start,renderTooltip:o,...n})}const b=s.memo(f);var y=()=>i(404141);function x(e){const{store:t,style:i,hideIcon:g}=e,f=(0,n().K8)((()=>{if(t)return{icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),url:(0,p().J8)({store:t,pageVisitSource:a().y8.SiteSettings})}}),[t]),x=(0,s.useCallback)((e=>{e.metaKey||y().A.setState({...y().A.state,open:!1})}),[]),S=(0,o().IS)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden",cursor:"default"},emptyPageIcon:{height:18,width:18,fill:e.accentColors.gray[500]},iconContainer:{position:"relative",width:20,height:20,marginRight:4},linkBox:{borderRadius:3,maxWidth:"100%"},linkIcon:{position:"absolute",width:10,height:10,right:0,bottom:0},pageRecordContainer:{display:"flex",alignItems:"center",paddingTop:2,paddingBottom:2,paddingRight:4,paddingLeft:4,...i},pageTitle:{wordBreak:"break-word",borderBottom:"0.05em solid rgba(55,53,47,.25)"}})),[i]);if(!t||!f)return null;const v=(0,m.jsxs)("div",{style:S.pageRecordContainer,children:[!g&&(0,m.jsxs)("div",{style:S.iconContainer,children:[f.icon?(0,m.jsx)(c().A,{icon:f.icon,store:t,disabled:!0,size:16,isEmptyPage:f.isEmptyPage,emojiSize:20}):(0,r().n)(S.emptyPageIcon),(0,l().G)(S.linkIcon)]}),(0,m.jsx)(u().A,{store:t,style:S.pageTitle})]});return(0,m.jsx)("div",{style:S.container,children:(0,m.jsx)(b,{store:t,render:e=>(0,m.jsx)(d().A,{href:null==f?void 0:f.url,style:S.linkBox,...(0,h().A)(e,{onClick:x}),children:v})})})}},681810:(e,t,i)=>{i.d(t,{A:()=>s});const s=new(i(867772).Ay)},716979:(e,t,i)=>{i.d(t,{EL:()=>C,KD:()=>v,Ss:()=>x,l2:()=>j,n0:()=>A,rw:()=>S});i(16280),i(944114),i(898992),i(354520),i(296540);var s=()=>i(388821),n=()=>i(179034),o=()=>i(959013),a=()=>i(763824),r=()=>i(449506),l=()=>i(901389),d=()=>i(106628),c=()=>i(321172),u=()=>i(437487),p=()=>i(227440),h=()=>i(630116),g=()=>i(250484),m=()=>i(67805),f=()=>i(558410),b=i(474848);const y=50;function x(e){f().A.resetSitesForSpace(e.id)}async function S(e,t){const{spaceStore:i,currentUserId:o,limit:l}=t;if(!i.id)return;const[d]=await Promise.all([r().callApi({eventName:"getPublishedPagesForUser",environment:e,data:{spaceId:i.id,limit:l||y,fetchPublishedMetadata:!0}}),(0,a().wR)(1500)]);if("failed"===d.type)throw new Error("Failed to fetch published pages.");if(d.data.recordMap){const e=[],t=s().RecordMapWithRole.create(d.data.recordMap),a=d.data.publishedEdits;for(const{model:s}of t)if(s&&s.table===n().ev){const t=h().Bv.createChildStore(i,{table:n().ev,id:s.id}),o=a[t.id],r=o&&o.authors?o.authors[0]:void 0,l={publishedTime:null==o?void 0:o.timestamp,publishedBy:r};e.push({store:t,publishedMetadata:l})}let r=e;return o&&(r=m().X(e,o)),f().A.initializeSiteResultsForSpace(i.id,r),r}}async function v(e,t){const{spaceStore:i}=t,s=e.currentUser.id,n=await S(e,{spaceStore:i,currentUserId:s});return n?n.filter((e=>{var t;return(null===(t=e.publishedMetadata.publishedBy)||void 0===t?void 0:t.id)===s})):[]}function A(e){c().Tk(e),u().Ay.setState({...u().Ay.state,display:u().pP.Publish,tab:u().QC.Publish})}async function C(e){return new Promise(((t,i)=>{l().ui({message:(0,b.jsx)("div",{style:{textAlign:"center"},children:(0,b.jsx)(o().sA,{id:"sites.confirmUnpublish.title",defaultMessage:"Unpublish this site?"})}),description:(0,b.jsx)("div",{style:{textAlign:"center"},children:(0,b.jsx)(o().sA,{id:"sites.confirmUnpublish.caption",defaultMessage:"{pageTitle} will no longer be live on the web.",values:{pageTitle:e}})}),keepFocus:!0,items:[{label:(0,b.jsx)(o().sA,{id:"sites.confirmUnpublish.confirm",defaultMessage:"Unpublish"}),color:"red",onAccept:()=>t(!0)}],showCancel:!0})}))}async function j(e,t){if(!p().A.state.online)return[];const i=await d().T.searchActions.load();return await i.searchPublicPages({environment:t,query:e,source:"public_home_page_menu",limit:g().ZK})}},867772:(e,t,i)=>{i.d(t,{Ay:()=>l,Gi:()=>o,Wc:()=>s,pF:()=>a,vS:()=>n});const s="loadingLocalImage",n="uploading",o="downloading",a="loaded";class r extends(()=>i(757695))().default{getInitialState(){return{loadingMode:a}}}const l=r},890874:(e,t,i)=>{i.d(t,{A:()=>l});i(296540);var s=()=>i(56366),n=()=>i(401497),o=()=>i(284371),a=()=>i(562800),r=i(474848);function l(e){const{spaceStore:t,domainId:i,isRelative:l}=e,d=(0,s().K8)((()=>a().Ix({spaceStore:t,domainId:i})),[t,i]),c=(0,n().IS)((e=>({tag:{width:"fit-content",maxWidth:"98%",paddingLeft:6,paddingRight:6,borderRadius:3,background:e.buttonHoveredBackground,...o().RC},relativeUrl:{color:e.text.tertiary}})),[]);return(0,r.jsxs)("div",{style:c.tag,children:[d,l&&(0,r.jsx)("span",{style:c.relativeUrl,children:"/..."})]})}},954845:(e,t,i)=>{i.d(t,{J:()=>n});i(296540);var s=i(474848);const n=(0,i(340498).wt)("blueCircleDot",{viewBox:"0 0 16 16",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("circle",{cx:"8",cy:"8",r:"8",fill:"none",stroke:"#2383E2",children:[(0,s.jsx)("animate",{attributeName:"r",from:"3",to:"8",dur:"1s",begin:"0s",repeatCount:"indefinite"}),(0,s.jsx)("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0s",repeatCount:"indefinite"})]}),(0,s.jsx)("circle",{cx:"8",cy:"8",r:"3",fill:"#2383E2"})]})})}}]);