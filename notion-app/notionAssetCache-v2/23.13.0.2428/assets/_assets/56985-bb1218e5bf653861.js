"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[5834,56985],{47218:(e,t,a)=>{a.d(t,{C:()=>o});a(296540);const n={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M11.14 4.485h3.491l-4.073 4.073a.625.625 0 1 0 .884.884l4.073-4.073v3.49a.625.625 0 1 0 1.25 0v-5a.625.625 0 0 0-.625-.624h-5a.625.625 0 1 0 0 1.25M4.485 14.631l4.07-4.07a.625.625 0 0 1 .884.884l-4.07 4.07H8.86a.625.625 0 1 1 0 1.25h-5a.625.625 0 0 1-.625-.625v-5a.625.625 0 1 1 1.25 0z"})},o=(0,a(340498).wt)("arrowExpandDiagonalBottomLeftToTopRight",n)},163580:(e,t,a)=>{a.d(t,{VT:()=>r,b0:()=>c,gz:()=>l});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520),a(581454);var n=()=>a(799288),o=()=>a(332393),i=()=>a(351360),s=()=>a(630116);function r(e,t){const a=t.getAlive(),o=(0,n().hu)(t),i=!c(t),s=c(t),r=Boolean(e.currentUser.id===t.getParentId());return a&&o&&(s&&r||i)}function c(e){if(!e.getAlive||!(0,n().hu)(e))return!1;const{currentUserRootStore:t}=i().default.state,a=e.getIntegrationId();if(!t||!a)return!1;const r=(0,s().Oo)(t,{id:a,table:o().Li}).getKeyStore("type").getValue();return!e.isInternalBot(r?{type:r}:void 0)}function l(e){const{externalIntegrationStoreState:t,integrationId:a}=e;if(!t.loaded)return;const o=t.externalAuthentications.map((e=>{let{parent_id:t}=e;return t})),i=new Set(o),s=t.bots.filter((e=>e.alive&&i.has(e.id)&&(0,n().Sd)(e)&&e.integration_id===a));return s.length?s[0]:void 0}},173614:(e,t,a)=>{a.d(t,{c:()=>o});a(296540);const n={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M7.663 5.794a2.77 2.77 0 1 1-5.539 0 2.77 2.77 0 0 1 5.539 0m-1.25 0a1.52 1.52 0 1 0-3.039 0 1.52 1.52 0 0 0 3.039 0m2.497-.55a.55.55 0 1 0 0 1.1h.098a.55.55 0 0 0 0-1.1zm2.054 0a.55.55 0 1 0 0 1.1h.098a.55.55 0 0 0 0-1.1zm2.602 4.329a.55.55 0 0 0-.952-.552l-.049.085a.55.55 0 0 0 .952.55zm-6.208-.552a.55.55 0 0 0-.952.552l.049.084a.55.55 0 0 0 .952-.551zm5.182 2.324a.55.55 0 0 0-.952-.552l-.05.085a.55.55 0 1 0 .953.551zm-4.156-.551a.55.55 0 0 0-.951.55l.048.085a.55.55 0 1 0 .952-.551zm6.722-2.231a2.77 2.77 0 1 0 0-5.538 2.77 2.77 0 0 0 0 5.538m0-1.25a1.52 1.52 0 1 1 0-3.038 1.52 1.52 0 0 1 0 3.038m-2.336 7.343a2.77 2.77 0 1 1-5.54 0 2.77 2.77 0 0 1 5.54 0m-1.25 0a1.52 1.52 0 1 0-3.04 0 1.52 1.52 0 0 0 3.04 0"})},o=(0,a(340498).wt)("integration",n)},354406:(e,t,a)=>{a.d(t,{LQ:()=>l});a(296540);var n=()=>a(495262),o=()=>a(878377),i=()=>a(416726),s=a(474848);const r=(0,i().Ls)({key:"mobile undo",displayName:i().AY.undoName,analyticsName:i().AY.undoName.defaultMessage,svg:a(454503).D,validators:[o().M3g,o().tpB,o().BBM,o().AU6(o().ctY),o().AU6(o().Pnk)],closeParentMenu:!0,track:{actionName:"undo"},action:(e,t,a)=>{let{environment:o}=t;return n().tN({environment:o,callback:e})}}),c=(0,i().Ls)({key:"mobile redo",displayName:i().AY.redoName,analyticsName:i().AY.redoName.defaultMessage,svg:a(638616).W,validators:[o().tpB,o().fHN,o().AU6(o().ctY),o().AU6(o().Pnk)],closeParentMenu:!0,track:{actionName:"redo"},action:(e,t,a)=>{let{environment:o}=t;return n().ZS({environment:o,callback:e})}}),l=(0,i().gy)({key:"mobile revision actions",render:e=>(0,s.jsx)(a(89924).A,{...e}),actions:[r,c]})},356985:(e,t,a)=>{a.d(t,{_J:()=>$e,qQ:()=>Ze,JS:()=>qt,SH:()=>Yt,bH:()=>Qt,tA:()=>Le,O5:()=>Ie,qI:()=>je,fg:()=>Oe,Fh:()=>qe,cy:()=>We,TD:()=>He,wy:()=>tt,Zk:()=>et,oq:()=>Ye,b2:()=>Pe});a(18107),a(967357),a(898992),a(823215),a(354520),a(430670),a(803949),a(581454),a(737550),a(296540);var n=()=>a(700500),o=()=>a(651124),i=()=>a(857639),s=()=>a(340498),r=a(474848);const c={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M3 2.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zM5.125 7.5c0-1.174.951-2.125 2.125-2.125h5.5c1.174 0 2.125.951 2.125 2.125v5a2.125 2.125 0 0 1-2.125 2.125h-5.5A2.125 2.125 0 0 1 5.125 12.5zm2.125-.875a.875.875 0 0 0-.875.875v5c0 .483.392.875.875.875h5.5a.875.875 0 0 0 .875-.875v-5a.875.875 0 0 0-.875-.875zM2.375 16.5c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625"})},l=(0,s().wt)("alignCenter",c),d={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M3 2.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zM2.375 7.5c0-1.174.951-2.125 2.125-2.125H10c1.174 0 2.125.951 2.125 2.125v5A2.125 2.125 0 0 1 10 14.625H4.5A2.125 2.125 0 0 1 2.375 12.5zM4.5 6.625a.875.875 0 0 0-.875.875v5c0 .483.392.875.875.875H10a.875.875 0 0 0 .875-.875v-5A.875.875 0 0 0 10 6.625zM2.375 16.5c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625"})},u=(0,s().wt)("alignLeft",d),m={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M3 2.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zM7.875 7.5c0-1.174.951-2.125 2.125-2.125h5.5c1.174 0 2.125.951 2.125 2.125v5a2.125 2.125 0 0 1-2.125 2.125H10A2.125 2.125 0 0 1 7.875 12.5zM10 6.625a.875.875 0 0 0-.875.875v5c0 .483.392.875.875.875h5.5a.875.875 0 0 0 .875-.875v-5a.875.875 0 0 0-.875-.875zM2.375 16.5c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625"})},g=(0,s().wt)("alignRight",m);var p=()=>a(519143),f=()=>a(955363);const v={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M4.665 17.22a.625.625 0 0 0 .805.365 7.96 7.96 0 0 0 4.528-4.353 7.94 7.94 0 0 0 4.533 4.353.625.625 0 0 0 .438-1.17 6.69 6.69 0 0 1-4.344-6.268V4.509l2.683 2.683a.625.625 0 0 0 .884-.884l-3.75-3.75a.625.625 0 0 0-.884 0l-3.75 3.75a.625.625 0 0 0 .884.884l2.683-2.683v5.625a6.71 6.71 0 0 1-4.345 6.281.625.625 0 0 0-.365.805"})},b=(0,s().wt)("arrowMergeUp",v);var M=()=>a(3284);const y={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 1 0-15.25 7.625 7.625 0 0 1 0 15.25m-1.046-4.769 3.834-2.236a.718.718 0 0 0 0-1.24L8.954 7.144a.718.718 0 0 0-1.079.62v4.472c0 .554.6.9 1.08.62"})},k=(0,s().wt)("arrowTriangleRightCircleFill",y);var S=()=>a(202017);const A={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M5.625 2a.625.625 0 1 0-1.25 0v2.375H2a.625.625 0 1 0 0 1.25h2.375V13.5c0 1.174.951 2.125 2.125 2.125h7.875V18a.625.625 0 1 0 1.25 0v-2.375H18a.625.625 0 1 0 0-1.25h-2.375V6.5A2.125 2.125 0 0 0 13.5 4.375H5.625zm0 3.625H13.5c.483 0 .875.392.875.875v7.875H6.5a.875.875 0 0 1-.875-.875z"})},h=(0,s().wt)("crop",A);var N=()=>a(742852),C=()=>a(90907);const L={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M13.594 4.125a.625.625 0 1 0 0 1.25H17a.625.625 0 1 0 0-1.25zM3 14.625a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zm-.625-2.875c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625m11.219-4.125a.625.625 0 1 0 0 1.25H17a.625.625 0 1 0 0-1.25zM2.5 7a2.75 2.75 0 0 1 2.75-2.75h.321a.5.5 0 0 1 0 1H5.25a1.75 1.75 0 0 0-1.746 1.638A1.786 1.786 0 1 1 4.929 9.75 2.43 2.43 0 0 1 2.5 7.32zm5.143 0a2.75 2.75 0 0 1 2.75-2.75h.321a.5.5 0 1 1 0 1h-.321a1.75 1.75 0 0 0-1.747 1.638 1.786 1.786 0 1 1 1.425 2.862 2.43 2.43 0 0 1-2.428-2.43z"})},w=(0,s().wt)("quoteText",L);const I={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"m4.897 3.085-.122-.142a.625.625 0 0 0-.95.814l3.18 3.71h-3.98a.625.625 0 0 0-.367 1.13L6.6 11.462l-1.506 4.636a.625.625 0 0 0 .962.699L10 13.932l3.943 2.865a.625.625 0 0 0 .903-.183l1.215 1.418a.625.625 0 1 0 .95-.814l-.495-.576a.6.6 0 0 1-.127-.113l-11.4-13.3a.6.6 0 0 1-.093-.144m.051 5.632h3.129l5.018 5.853.027.085-2.755-2.001a.625.625 0 0 0-.734 0l-2.755 2 1.052-3.237a.625.625 0 0 0-.227-.7zm8.633 2.613 3.762-2.733a.625.625 0 0 0-.367-1.13H12.1L10.594 2.83a.625.625 0 0 0-1.188 0L8.55 5.463l.953 1.112L10 5.046l1.052 3.239a.625.625 0 0 0 .595.432h3.404l-2.287 1.662z"})},P=(0,s().wt)("starSlash",I),x=(0,s().wt)("timeBy",{viewBox:"0 0 30 30",svg:(0,r.jsx)("path",{d:"M14 25H16V15H14C13.919 15.164 13.209 15.698 12 15.909V17.94C12.743 17.85 13.416 17.652 14 17.388V25ZM25 4C25 2.343 23.657 1 22 1C20.343 1 19 2.343 19 4H11C11 2.343 9.657 1 8 1C6.343 1 5 2.343 5 4H1V29H29V4H25ZM21 4C21 3.449 21.448 3 22 3C22.552 3 23 3.449 23 4V6C23 6.551 22.552 7 22 7C21.448 7 21 6.551 21 6V4ZM7 4C7 3.449 7.448 3 8 3C8.552 3 9 3.449 9 4V6C9 6.551 8.552 7 8 7C7.448 7 7 6.551 7 6V4ZM27 27H3V13H27V27ZM27 11H3V6H5C5 7.657 6.343 9 8 9C9.657 9 11 7.657 11 6H19C19 7.657 20.343 9 22 9C23.657 9 25 7.657 25 6H27V11Z"})});var j=()=>a(763884),U=()=>a(919709),T=()=>a(959013),_=()=>a(496603),R=()=>a(522986),F=()=>a(899038),B=()=>a(901389),V=()=>a(675074),D=()=>a(896628),z=()=>a(383594),E=()=>a(246826),H=()=>a(778417),O=()=>a(317909),q=()=>a(633457),W=()=>a(161479),K=()=>a(496414),G=()=>a(972435);const X=(0,T().YK)({importingCSV:{id:"databaseViewActions.importingCSV.loadingMessage",defaultMessage:"Importing"},uploadingCSV:{id:"databaseViewActions.uploadingCSV.loadingMessage",defaultMessage:"Uploading"},importFailed:{id:"databaseViewActions.importFailedError.message",defaultMessage:"Import failed."}});function Y(e){const{store:t,environment:n}=e,o=async(e,o,i)=>{K().m({message:X.importingCSV});const s=t.getCollectionStore();if(!s)return;if(!a(129522).K.findCollectionViewBlockFromStore(t))return;const r=(0,a(416504).P)(),c=a(357625).UT(n,a(609316).V,{importType:"MergeIntoCollection",fileURL:e,fileName:o,collection:{id:s.id,spaceId:(0,W().e)(s.pointer.spaceId)},spaceId:(0,W().e)(s.pointer.spaceId),userTimeZone:r,signedToken:i}),l=a(508496).default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"});let d=!1;for await(const t of c){if(t.error)throw B().f1(G().A.formatMessage(X.importFailed)),K().V(),t.error;!d&&l&&"status"in t.value&&"updated_collection"===t.value.status.message&&(d=!0,K().V())}K().V()};let s;const r={},c=performance.now();a(892632).Bz({environment:n,bucket:"temporary",onStart:e=>{s=e,K().m({message:X.uploadingCSV})},onCompleteWithToken:e=>{r.uploadTimeTaken=performance.now()-c,r.firstTimeNavigateToCollection=r.uploadTimeTaken,o(e[0].fileUrl,s[0].name,e[0].signedToken),r.overallTimeTaken=performance.now()-c;for(const[t,o]of Object.entries(r))(0,a(989423).u4)({environment:n,event:{eventName:"import_file_finished",eventProperties:{importUploadType:"csv",importType:"MergeIntoCollection",importLatency:o,importSource:"file",importLatencyType:t,importFileCount:1}}});i().log({level:"info",from:"mergeWithCSV",type:"mergeWithCSVFinished",data:{miscDataToConvertToString:{data:{uploadType:"csv",importType:"MergeIntoCollection",importLatencies:r,importSource:"file",fileNames:[s[0].name]}}}})},onError:e=>{K().V(),B().f1(G().A.formatMessage(X.importFailed))}})}var Q=()=>a(519839),Z=()=>a(89924),$=()=>a(250202),J=()=>a(375078),ee=()=>a(878377),te=()=>a(943846),ae=()=>a(792609),ne=()=>a(486666),oe=()=>a(869562),ie=()=>a(919878),se=()=>a(178687),re=()=>a(351360),ce=()=>a(522200),le=()=>a(164575),de=()=>a(599364),ue=()=>a(254452),me=()=>a(654056),ge=()=>a(416726),pe=()=>a(773458),fe=()=>a(137743),ve=()=>a(668491),be=()=>a(22913),Me=()=>a(287133),ye=()=>a(843005);const ke=(0,T().YK)({fixLegacyTransclusion:{id:"action.fixLegacyTransclusion.name",defaultMessage:"Fix legacy transclusion"},insertBelowName:{id:"action.insertBelow.name",defaultMessage:"Insert below"},startPresentationName:{id:"action.startPresentation.name",defaultMessage:"Start presentation"},copyDirectLinkName:{id:"action.copyDirectLink.name",defaultMessage:"Copy link to original"},openasPageName:{id:"action.openasPage.name",defaultMessage:"Open as page"},copyLinksName:{id:"action.copyLinks.name",defaultMessage:"Copy links to all"},viewOriginalName:{id:"action.viewOriginal.name",defaultMessage:"View original"},openInBrowserName:{id:"action.openInBrowser.name",defaultMessage:"Open in browser"},downloadName:{id:"action.download.name",defaultMessage:"Download"},replaceName:{id:"action.replace.name",defaultMessage:"Replace"},turnSimpleTableIntoCollection:{id:"action.turnIntoCollection.title",defaultMessage:"Turn into database"},viewAsSpreadsheetPrototype:{id:"action.viewAsSpreadsheetPrototype.title",defaultMessage:"View as spreadsheet"},editPropertyName:{id:"action.editProperty.name",defaultMessage:"Edit property"},clearDateName:{id:"action.clearDate.name",defaultMessage:"Clear date"},turnintoInlineName:{id:"action.turnintoInline.name",defaultMessage:"Turn into inline database"},turnintoPageName:{id:"action.turnintoPage.name",defaultMessage:"Turn into database page"},turnCollectionIntoSimpleTable:{id:"action.turnintoSimpleTable.name",defaultMessage:"Turn into simple table"},mergewithCSVName:{id:"action.mergewithCSV.name",defaultMessage:"Merge with CSV"},mergewithCSVCaption:{id:"action.mergewithCSV.caption",defaultMessage:"Header row required"},openIn:{id:"action.openIn.name",defaultMessage:"Open in"},lockDatabaseName:{id:"action.lockDatabaseName.name",defaultMessage:"Lock database"},unlockDatabaseName:{id:"action.unlockDatabaseName.name",defaultMessage:"Unlock database"},lockDatabaseViewsName:{id:"action.lockDatabaseViewsName.name",defaultMessage:"Lock views"},unlockDatabaseViewsName:{id:"action.unlockDatabaseViews.name",defaultMessage:"Unlock views"},lockWikiName:{id:"action.lockWikiName.name",defaultMessage:"Lock wiki"},reloadPreview:{id:"action.reloadPreview",defaultMessage:"Reload preview"},unlockWikiName:{id:"action.unlockWikiName.name",defaultMessage:"Unlock wiki"},turnPreviewIntoMention:{id:"action.turnPreviewIntoMention",defaultMessage:"Turn into mention"},reloadSyncedPage:{id:"action.reloadSyncedPage",defaultMessage:"Sync page"},addtoFavoritesName:{id:"action.addtoFavorites.name",defaultMessage:"Add to Favorites"},removefromFavoritesName:{id:"action.removefromFavorites.name",defaultMessage:"Remove from Favorites"},configureName:{id:"action.configure.name",defaultMessage:"Configure"},editIconName:{id:"action.editIcon.name",defaultMessage:"Icon"},editIconNameFeatureGated:{id:"action.editIcon.nameFeatureGated",defaultMessage:"Edit icon"},wrapCodeKeywords:{id:"action.wrapCode.fuzzySearchKeywords",defaultMessage:"Wrap Code"},wrapCodeLabel:{id:"action.wrapCode.label",defaultMessage:"Wrap code"},languageModeName:{id:"action.languageMode.name",defaultMessage:"Set language"},formatCodeLabel:{id:"action.formatCode.label",defaultMessage:"Format code"},openInBrowserLabel:{id:"action.openInBrowser.label",defaultMessage:"Open in browser"},workAtNotion:{id:"action.workAtNotion.name",defaultMessage:"Work at Notion"},quoteSizeSection:{id:"action.section.quoteSize",defaultMessage:"Quote size"},quoteSizeDefault:{id:"action.quoteSize.default",defaultMessage:"Default"},quoteSize:{id:"action.quoteSize.name",defaultMessage:"Quote size"},quoteSizeLarge:{id:"action.quoteSize.large",defaultMessage:"Large"},listFormatDefault:{id:"action.listFormat.letters.default",defaultMessage:"Default"},listFormatSection:{id:"action.listFormat.sectionName",defaultMessage:"List format"},listFormat:{id:"action.listFormat.name",defaultMessage:"List format"},listFormatNumbers:{id:"action.listFormat.numbers.name",defaultMessage:"Numbers"},listFormatLetters:{id:"action.listFormat.letters.name",defaultMessage:"Letters"},listFormatRoman:{id:"action.listFormat.letters.roman",defaultMessage:"Roman numerals"},listFormatDisc:{id:"action.listFormat.disc.name",defaultMessage:"Disc"},listFormatCircle:{id:"action.listFormat.circle.name",defaultMessage:"Circle"},listFormatSquare:{id:"action.listFormat.square.name",defaultMessage:"Square"},alignmentName:{id:"action.alignment.name",defaultMessage:"Align"},cropImage:{id:"action.cropImage",defaultMessage:"Crop image"},turnTableIntoDatabaseWarning:{id:"action.turnTableIntoDatabaseWarning",defaultMessage:"All suggestions in the table must be resolved before the table can be turned into a database."},linkToImportModal:{id:"action.linkToImportModal",defaultMessage:"Import data"}}),Se=[ee().ecY,ee().AU6(ee().xqI),ee().AU6(ee().p9k),ee().or([ee().Cuf,ee().AU6(ee().vEP)]),...ge().uo],Ae=(0,ge().Ls)({key:"fixLegacyTransclusion",displayName:ke.fixLegacyTransclusion,analyticsName:ke.fixLegacyTransclusion.defaultMessage,svg:p().D,validators:[ee().VxA,ee().vXb,...Se],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:n}=e;(await a(764061).l.legacyTransclusionActions.load()).fixLegacyTransclusion({environment:n,store:t[0]})}}),he=(0,ge().uk)({key:"turn into section",displayName:ge().AY.turnIntoName,analyticsName:ge().AY.turnIntoName.defaultMessage,svg:M().Q,validators:[ee().p2L,ee().AU6(ee().vEP),ee().pLL,ae().Y,ee().P5O],subActions:()=>[{key:0,title:void 0,render:e=>(0,r.jsx)(Z().A,{...e}),actions:ye().t3.actions}]}),Ne=(0,ge().Ls)({key:"insert below",displayName:ke.insertBelowName,analyticsName:ke.insertBelowName.defaultMessage,svg:a(655923).v,validators:[ee().p2L,ee().AU6(ee().vEP),ee().AU6(ee().pe1),ee().ctY,ee().FrL],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;O().createAndCommit({userAction:"actionRegistry.insertBelow",environment:n,canUndo:!0,perform:e=>{a(87017).insertTextBelow({environment:n,blocks:t,transaction:e})}})}}),Ce=(0,ge().Ls)({key:"start presentation",displayName:ke.startPresentationName,analyticsName:ke.startPresentationName.defaultMessage,validators:[ee().vXb,ee().Xjv(n().xd.slide)],closeParentMenu:!0,svg:k,action:e=>{let{blocks:t}=e;a(447934).V_({slideBlockStore:t[0]})}}),Le=(0,ge().Ls)({key:"copy direct link to content housed within block",displayName:ke.copyDirectLinkName,analyticsName:ke.copyDirectLinkName.defaultMessage,svg:N().w,validators:[ee().M3g,ee().vXb,ee().AU6(ee().Rde),ee().AU6(ee().wHP),ee().or([ee().ISA,ee().ka$,ee().Xjv(n().xd.bookmark),ee().Xjv(n().xd.externalObjectInstance),ee().Xjv(n().xd.externalObjectInstancePage),ee().IW,ee().tpG]),ee().AU6(ee().IuJ)],closeParentMenu:!0,track:{actionName:"copy_original_link"},action:(e,t,a)=>{let{lazyDependencies:n,...o}=t;const{clipboardActions:s}=n;s?s.copyDirectLinkToContent({...o,event:a,callback:e}):i().log({data:{miscDataToConvertToString:{actionKey:"copy direct link to content housed within block"}},from:"blockActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),we=(0,ge().Ls)({key:"open collection as page",displayName:ke.openasPageName,analyticsName:ke.openasPageName.defaultMessage,svg:a(47218).C,validators:[ee().lOb,ee().AU6(ee().Cuf),ee().AU6(ee().hLE)],closeParentMenu:!0,action:e=>a(797265).mP(e)}),Ie=(0,ge().Ls)({key:"copy links to blocks",displayName:ke.copyLinksName,analyticsName:ke.copyLinksName.defaultMessage,svg:N().w,validators:[ee().M3g,ee().FEq,ee().AU6(ee().oy3)],closeParentMenu:!0,track:{actionName:"copy_multiple_block_links"},action:(e,t,a)=>{let{lazyDependencies:n,...o}=t;const{clipboardActions:s}=n;s?s.copyLinksToBlocks({...o,event:a,callback:e}):i().log({data:{miscDataToConvertToString:{actionKey:"copy links to blocks"}},from:"blockActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),Pe=(0,ge().Ls)({key:"view original",displayName:ke.viewOriginalName,analyticsName:ke.viewOriginalName.defaultMessage,svg:f().N,validators:[ee().AU6(ee().b8R),ee().vXb,ee().or([ee().ISA,ee().ka$])],closeParentMenu:!0,track:{actionName:"view_original"},action:(e,t,a)=>{let{blocks:n,environment:o}=t;const i=n.at(0);i&&(0,te().hg)(i)&&V().oD(o,{store:i,from:"view_original",callback:e})}}),xe=(0,ge().Ls)({key:"view in browser",displayName:ke.openInBrowserName,analyticsName:ke.openInBrowserName.defaultMessage,svg:f().N,validators:[ee().b8R,ee().vXb,ee().or([ee().ISA,ee().ka$])],closeParentMenu:!0,track:{actionName:"view_original"},action:(e,t,a)=>{let{blocks:n,environment:o}=t;const i=n.at(0);i&&(0,te().hg)(i)&&V().oD(o,{store:i,from:"view_original",callback:e})}}),je=(0,ge().Ls)({key:"download source",displayName:ke.downloadName,analyticsName:ke.downloadName.defaultMessage,svg:a(973238).G,validators:[ee().vXb,ee().or([ee().ka$,ee().ISA]),ee().or([ee().bIL,ee().Rde]),ee().AU6(ee().wHP)],closeParentMenu:!0,track:{actionName:"download"},action:(e,t,a)=>{let{blocks:n,environment:o}=t;const i=n[0];i&&(0,te().hg)(i)&&V().qI({environment:o,store:i,callback:e})}}),Ue=(0,ge().Ls)({key:"replace source",displayName:ke.replaceName,analyticsName:ke.replaceName.defaultMessage,svg:p().D,validators:[ee().p2L,ee().AU6(ee().vEP),ee().vXb,ee().or([ee().ka$,ee().ISA])],closeParentMenu:!0,action:e=>{let{blocks:t}=e;V().wA({store:t[0]})}}),Te=(0,ge().Ls)({key:"view as spreadsheet prototype",displayName:ke.viewAsSpreadsheetPrototype,analyticsName:ke.viewAsSpreadsheetPrototype.defaultMessage,svg:a(421559).T,validators:[()=>!1,ee().SQN("spreadsheet_prototype"),ee().p2L,ee().AU6(ee().wFE),ee().zVC,ae().Y,ee().AU6(ee().Y8P)],closeParentMenu:!0,action:e=>{let{blocks:t}=e;const a=t[0];ce().A.setState({...ce().A.getState(),[a.id]:!0})}}),_e=(0,ge().Ls)({key:"link to import modal",displayName:ke.linkToImportModal,analyticsName:ke.linkToImportModal.defaultMessage,svg:a(820579).f,validators:[ee().p2L,ee().AU6(ee().wFE),ee().zVC,ee().HOV()],closeParentMenu:!0,action:e=>{let{environment:t}=e;a(209660).Ow({currentTab:"imports",openedFrom:"block_action_import"}),(0,a(160475).t)({environment:t,action:"click",from:"block_action_import"}),a(559926).kY(t,{from:"block_action_import"})}}),Re=(0,ge().Ls)({key:"turn into collection",displayName:ke.turnSimpleTableIntoCollection,analyticsName:ke.turnSimpleTableIntoCollection.defaultMessage,svg:M().Q,validators:[ee().p2L,ee().AU6(ee().wFE),ee().zVC,ae().Y,ee().AU6(ee().Y8P)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;return O().createAndCommit({userAction:"actionRegistry.turnSimpleTableIntoCollection",environment:n,canUndo:!0,perform:e=>{const o=t[0];o.getContentStores().flatMap((e=>{const t=Object.values(e.getProperties()).flat().filter(a(534177).O9);return(0,U().vSn)(t)})).length>0?B().rG({message:(0,r.jsx)(T().sA,{...ke.turnTableIntoDatabaseWarning})}):(ie().cP({environment:n,simpleTableStore:o,transaction:e}),H().IU({environment:n}),ie().wr())}})}}),Fe=[ee().p2L,ee().AU6(ee().ln6),ee().$Mx,ee().AU6(ee().PfK),ee().AU6(ee().Kq2),function(e){return e.blocks.some((e=>e.getAssociatedCollectionStore()))}];const Be=(0,ge().uk)({key:"edit property",displayName:ke.editPropertyName,analyticsName:ke.editPropertyName.defaultMessage,svg:S().n,validators:Fe,subActions:e=>{let{blocks:t}=e;const n=t.at(0);if(!n)return[];const i=(0,Q().UH)(n),s=n.getAssociatedCollectionStore();if(!s)return[];const c=(null==i?void 0:i.normalizedSchemaStore.state)??s.getSchema(),l=s.getFormat(),d=(0,a(390066).L)(l,c,void 0,o().jf.Collection);if(!d.collection_page_properties)return[];d.collection_page_properties.unshift({property:"title"});const u=_().oE(d.collection_page_properties.map((e=>{const n=c[e.property];if(n&&(0,a(682146).g2)({propertySchema:n,property:e.property,blockStores:t,collectionSchema:c,collectionStore:s,spaceStore:re().default.state.currentSpaceStore}))return function(e){const{property:t,propertySchema:n}=e,o=n.name;return{key:`Edit Property ${o} ${t}`,displayName:o,analyticsName:"Edit property",searchName:o,validators:Fe,closeParentMenu:!0,action:e=>{let{blocks:o,originRect:i,environment:s}=e;"checkbox"===n.type?O().createAndCommit({userAction:"actionRegistry.createEditPropertyAction",environment:s,canUndo:!0,perform:e=>{R().qS({stores:o,property:t,transaction:e})}}):i&&R().ho({environment:s,store:o[0],additionalStores:o.slice(1),property:t,format:a(41459).j.Page,rect:{..._().VP(i),width:200},preventClearSelection:!0,blockPropertyValueOverlayStore:a(186445).jQ(),collectionContextStore:(0,Q().UH)(o[0])})},render:e=>(0,r.jsx)($().G,{...e,propertySchema:n,format:$().e.Name})}}({property:e.property,propertySchema:n})})));return[{key:0,title:void 0,render:e=>(0,r.jsx)(Z().A,{...e}),actions:u}]}}),Ve=(0,ge().Ls)({key:"clear date",displayName:ke.clearDateName,analyticsName:ke.clearDateName.defaultMessage,svg:x,validators:[ee().p2L,ee().AU6(ee().vEP),ee().or([ee().Bb5("timeline"),ee().Bb5("calendar")])],closeParentMenu:!0,action:e=>{let{environment:t,blocks:n}=e;const o=(0,Q().UH)(n[0]);if(!o)return;const i=null==o?void 0:o.collectionViewStore();if(!i)return;const s=o.normalizedSchemaStore.state;O().createAndCommit({userAction:"actionRegistry.clearDate",environment:t,canUndo:!0,perform:e=>{a(717989).MQ({stores:n,collectionViewStore:i,schema:s,transaction:e})}})}}),De=(0,ge().Ls)({key:"view collection view inline",displayName:ke.turnintoInlineName,analyticsName:ke.turnintoInlineName.defaultMessage,svg:M().Q,validators:[ee().BAy,ee().AU6(ee().Cuf),ee().Xmj,ee().AU6(ee().wFE),ee().AU6(ee().Afv),ee().P5O],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;return O().createAndCommit({userAction:"actionRegistry.viewCollectionViewInline",environment:a,canUndo:!0,perform:e=>{J().transformBlocks({environment:a,blocks:t,blockType:"collection_view",transaction:e}),H().IU({environment:a})}})}}),ze=(0,ge().Ls)({key:"view collection view as page",displayName:ke.turnintoPageName,analyticsName:ke.turnintoPageName.defaultMessage,svg:M().Q,validators:[ee().lOb,ee().AU6(ee().Cuf),ee().Xmj,ee().AU6(ee().wFE),ee().AU6(ee().vEP),ee().AU6(ee().IW)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;return O().createAndCommit({userAction:"actionRegistry.turnCollectionViewIntoCollectionViewPage",environment:a,canUndo:!0,perform:e=>{J().transformBlocks({environment:a,blocks:t,blockType:"collection_view_page",transaction:e})}})}}),Ee=(0,ge().Ls)({key:"turn into simple table",displayName:ke.turnCollectionIntoSimpleTable,analyticsName:ke.turnCollectionIntoSimpleTable.defaultMessage,svg:M().Q,validators:[ee().lOb,ee().Efw("table"),ee().AU6(ee().Cuf),ee().Xmj,ee().AU6(ee().wFE),ee().ed0,ee().P_F,ee().AU6(ee().IW)],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:n}=e;const o=t[0],s=o.useCrdt(),r=await a(980914).Bp({environment:n,collectionViewBlockStore:o});if(r.some((e=>e.useCrdt()!==s)))return a(436572).D6({label:s?"Cannot turn database with non-CRDT pages into simple table on CRDT page":"Cannot turn database with CRDT pages into simple table on non-CRDT page"}),void i().log({level:"info",from:"blockActionRegistry",type:"crdt:turnCollectionIntoSimpleTableUseCrdtMismatch",data:{miscDataToConvertToString:{collectionViewBlockUseCrdt:s}}});O().createAndCommit({userAction:"actionRegistry.turnCollectionIntoSimpleTable",environment:n,canUndo:!0,perform:e=>{ie().GD({environment:n,collectionViewBlockStore:o,pageStores:r,transaction:e}),H().IU({environment:n}),ie().wr()}})}}),He=(0,ge().Ls)({key:"merge with csv",displayName:ke.mergewithCSVName,analyticsName:ke.mergewithCSVName.defaultMessage,validators:[ee().Kq2,ee().Xmj,ee().sc7,ee().IRu,ee().AU6(ee().vEP),ee().AU6(ee().BUc),ee().AU6(ee().Qp$),ee().AU6(ee().IW),ee().AU6(ee().oy3)],closeParentMenu:!0,render:e=>(0,r.jsx)(a(575143).A,{...e,svg:b,title:(0,r.jsx)(T().sA,{...ke.mergewithCSVName}),tooltipText:(0,r.jsx)(T().sA,{...ke.mergewithCSVCaption})}),action:e=>{let{blocks:[t],environment:a}=e;Y({environment:a,store:t})}}),Oe=(0,ge().fi)({key:"database lock",displayName:ke.lockDatabaseName,label:G().A.formatMessage(ke.lockDatabaseName),svg:e=>(0,C().h)(e),isEnabled:e=>e.isLocked(),validators:[ee().Kq2,ee().an_,ee().AU6(ee().Afv),ee().Xmj,ee().AU6(ee().oy3)],action:(e,t,a)=>E().zv({store:t.getFormatStore(),data:{block_locked:!t.isLocked(),block_locked_by:e.currentUser.id},transaction:a}),afterAction:()=>null}),qe=(0,ge().fi)({key:"database views lock",displayName:ke.lockDatabaseViewsName,label:G().A.formatMessage(ke.lockDatabaseViewsName),svg:e=>(0,C().h)(e),isEnabled:e=>e.isLocked(),validators:[ee().Kq2,ee().AU6(ee().an_),ee().Xmj,ee().AU6(ee().oy3)],action:(e,t,a)=>E().zv({store:t.getFormatStore(),data:{block_locked:!t.isLocked(),block_locked_by:e.currentUser.id},transaction:a}),afterAction:()=>null}),We=(0,ge().fi)({key:"wiki lock",displayName:ke.lockWikiName,label:G().A.formatMessage(ke.lockWikiName),svg:e=>(0,C().h)(e),isEnabled:e=>e.isLocked(),validators:[ee().Kq2,ee().an_,ee().Afv,ee().Xmj,ee().AU6(ee().oy3)],action:(e,t,a)=>E().zv({store:t.getFormatStore(),data:{block_locked:!t.isLocked(),block_locked_by:e.currentUser.id},transaction:a}),afterAction:()=>null}),Ke=(0,ge().Ls)({key:"wiki unlock",displayName:ke.unlockWikiName,analyticsName:ke.unlockWikiName.defaultMessage,svg:a(701751).p,validators:[ee().Kq2,ee().an_,ee().Afv,ee().Xmj,ee().ln6],closeParentMenu:!1,action:e=>{let{blocks:t,environment:n}=e;const o=t[0];a(222299).X6({environment:n,store:o,lock:!1})}});function Ge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[ee().p2L,ee().AU6(ee().vEP),ee().AU6(ee().PaP),ee().vXb,e?ee().or([ee().bLC("external_object_instance"),ee().tpG]):ee().bLC("external_object_instance"),ee().AU6(ee().SoP)]}const Xe=(0,ge().Ls)({key:"reload link preview",displayName:ke.reloadPreview,analyticsName:ke.reloadPreview.defaultMessage,svg:p().D,validators:Ge(!1),closeParentMenu:!0,action:e=>{let{environment:t,blocks:a}=e;if(0===a.length)return;const n=a[0];n.isExternalObjectInstanceBlockStore()&&q().lf({environment:t,from:"page_more_menu",store:n,spaceId:n.getSpaceId()})}}),Ye=(0,ge().Ls)({key:"turn preview into mention",displayName:ke.turnPreviewIntoMention,analyticsName:ke.turnPreviewIntoMention.defaultMessage,svg:M().Q,validators:Ge(!0),closeParentMenu:!0,action:e=>{let{environment:t,blocks:n}=e;0!==n.length&&O().createAndCommit({userAction:"actionRegistry.turnPreviewIntoMention",environment:t,canUndo:!0,perform:e=>{n[0].isType("alias")?a(813743).O8({blockStore:n[0],transaction:e}):q().PO({environment:t,block:n[0],transaction:e})}})}});function Qe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,ge().Ls)({key:"add to favorites",displayName:ke.addtoFavoritesName,analyticsName:ke.addtoFavoritesName.defaultMessage,svg:a(877788).w,validators:[...e,ee().M3g,ee()._fc,ee().vXb,ee().AU6(ee().WWi),ee().AU6(ee().Pnk),ee().AU6(ee().mDl)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;const{currentSpaceViewStore:n}=re().default.state;if(n){const e=t[0];O().createAndCommit({userAction:"actionRegistry.addToFavorites",environment:a,canUndo:!0,perform:t=>{oe().bookmarkPage({spaceViewStore:n,store:e,transaction:t})}})}}})}const Ze=Qe([ee().FrL]),$e=Qe();function Je(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,ge().Ls)({key:"remove from favorites",displayName:ke.removefromFavoritesName,analyticsName:ke.removefromFavoritesName.defaultMessage,svg:P,validators:[...e,ee().WWi,ee().vXb],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;const{currentSpaceViewStore:n}=re().default.state;n&&O().createAndCommit({userAction:"actionRegistry.removeFromFavorites",environment:a,canUndo:!0,perform:e=>{oe().unbookmarkPage({spaceViewStore:n,store:t[0],transaction:e})}})}})}const et=Je([ee().FrL]),tt=Je(),at=(0,ge().Ls)({key:"reload synced page",displayName:ke.reloadSyncedPage,analyticsName:ke.reloadSyncedPage.defaultMessage,svg:p().D,validators:[ee().p2L,ee().AU6(ee().vEP),ee().AU6(ee().PaP),ee().vXb,ee().bLC("external_object_instance_page")],closeParentMenu:!0,action:e=>{let{environment:t,blocks:a}=e;if(0===a.length)return;const n=a[0];n.isExternalObjectInstancePageBlockStore()&&q().lf({environment:t,from:"page_more_menu",store:n,spaceId:n.getSpaceId(),bypassCache:!0})}}),nt=it(!1),ot=it(!0);function it(e){return(0,ge().Ls)({key:"edit icon",displayName:e?ke.editIconNameFeatureGated:ke.editIconName,analyticsName:e?ke.editIconNameFeatureGated.defaultMessage:ke.editIconName.defaultMessage,svg:a(424139).emojiFaceIcon,validators:[ee().p2L,ee().AU6(ee().vEP),ee().or([ee().ZCq,ee().Uo6([ee().ibx,ee().h1w])])],closeParentMenu:!0,track:{actionName:"init_edit_icon"},action:(e,t,n)=>{const{environment:i,originRect:s}=t;let c=t.blocks;if(ee().ibx(t)&&ee().h1w(t)){const e=c[0].getParentStore();e instanceof a(630116).Bv&&(c=[e])}const l=e=>{var t;return e.isType("button")?null===(t=e.getAutomationStore())||void 0===t?void 0:t.getIconStore():e.getIconStore()},d=(e,t)=>{var n;c.forEach((t=>{const a=l(t);a&&O().createAndCommit({userAction:"actionRegistry.editIcon",environment:i,canUndo:!0,perform:t=>{E().KY({store:a,value:e,transaction:t})}})})),"url"!==(null===(n=(0,o().WO)(e))||void 0===n?void 0:n.type)&&c.some((e=>e.isType("callout")))&&j().A.set({userId:i.currentUser.id,key:a(492696).c,value:e??""}),t&&t.keepVisible||z().I()},u=c.some((e=>{var t;return e.isType("button")?null===(t=l(e))||void 0===t?void 0:t.getValue():e.hasIcon()})),m=c.every((e=>e.isType("callout"))),g=[{type:"emoji",title:(0,r.jsx)(T().sA,{defaultMessage:"Emoji",id:"recordIcon.emojiTab.title"}),onChange:d},{type:"icon",title:(0,r.jsx)("div",{style:{display:"flex",gap:4},children:(0,r.jsx)(T().sA,{defaultMessage:"Icons",id:"recordIcon.iconTab.title"})}),onChange:d}];z().W(i,{recordIconLoggingData:{source:"bulk_block_selection"},originGap:4,originRect:s,popupWidth:ne().jv,popupHeight:ne().GF,isSmallWidth:!1,title:G().A.getIntl().formatMessage({defaultMessage:"Page icon",id:"recordIcon.emojiModalMenu.title"}),onDelete:u?()=>{c.forEach((e=>{const t=l(e);t&&O().createAndCommit({userAction:"actionRegistry.editIcon",environment:i,canUndo:!0,perform:e=>{E().KY({store:t,value:void 0,transaction:e})}})})),z().I()}:void 0,currentTab:"emoji",isCallout:m,tabs:g,disableClearSelection:!0}),e()}})}const st=(0,ge().fi)({key:"code wrap",displayName:ke.wrapCodeKeywords,label:G().A.formatMessage(ke.wrapCodeLabel),isEnabled:e=>Boolean(e.getFormat().code_wrap),validators:[ee().vXb,ee().Xjv("code")],track:{actionName:"set_text_wrap"},action:(e,t,a)=>D().zA({stores:[t],update:{code_wrap:!t.getFormat().code_wrap},transaction:a}),afterAction:(e,t)=>{j().A.set({userId:t.currentUser.id,key:se().j.localCodeWrapPreferenceKey,value:e})}}),rt=(0,T().YK)({ABAP:{id:"action.languageMode.abap",defaultMessage:"ABAP"},Agda:{id:"action.languageMode.agda",defaultMessage:"Agda"},Arduino:{id:"action.languageMode.arduino",defaultMessage:"Arduino"},"ASCII Art":{id:"action.languageMode.asciiart",defaultMessage:"ASCII Art"},Assembly:{id:"action.languageMode.nasm",defaultMessage:"Assembly"},Bash:{id:"action.languageMode.bash",defaultMessage:"Bash"},BASIC:{id:"action.languageMode.basic",defaultMessage:"Basic"},BNF:{id:"action.languageMode.bnf",defaultMessage:"BNF"},C:{id:"action.languageMode.c",defaultMessage:"C"},"C#":{id:"action.languageMode.csharp",defaultMessage:"C#"},"C++":{id:"action.languageMode.cplusplus",defaultMessage:"C++"},Clojure:{id:"action.languageMode.clojure",defaultMessage:"Clojure"},CoffeeScript:{id:"action.languageMode.coffeescript",defaultMessage:"CoffeeScript"},Coq:{id:"action.languageMode.coq",defaultMessage:"Coq"},CSS:{id:"action.languageMode.css",defaultMessage:"CSS"},Dart:{id:"action.languageMode.dart",defaultMessage:"Dart"},Dhall:{id:"action.languageMode.dhall",defaultMessage:"Dhall"},Diff:{id:"action.languageMode.diff",defaultMessage:"Diff"},Docker:{id:"action.languageMode.docker",defaultMessage:"Docker"},EBNF:{id:"action.languageMode.ebnf",defaultMessage:"EBNF"},Elixir:{id:"action.languageMode.elixir",defaultMessage:"Elixir"},Elm:{id:"action.languageMode.elm",defaultMessage:"Elm"},Erlang:{id:"action.languageMode.erlang",defaultMessage:"Erlang"},"F#":{id:"action.languageMode.fsharp",defaultMessage:"F#"},Flow:{id:"action.languageMode.flow",defaultMessage:"Flow"},Fortran:{id:"action.languageMode.fortran",defaultMessage:"Fortran"},Gherkin:{id:"action.languageMode.gherkin",defaultMessage:"Gherkin"},GLSL:{id:"action.languageMode.glsl",defaultMessage:"GLSL"},Go:{id:"action.languageMode.go",defaultMessage:"Go"},GraphQL:{id:"action.languageMode.graphql",defaultMessage:"Graphql"},Groovy:{id:"action.languageMode.groovy",defaultMessage:"Groovy"},Haskell:{id:"action.languageMode.haskell",defaultMessage:"Haskell"},HCL:{id:"action.languageMode.hcl",defaultMessage:"HCL"},HTML:{id:"action.languageMode.html",defaultMessage:"HTML"},Idris:{id:"action.languageMode.idris",defaultMessage:"Idris"},Java:{id:"action.languageMode.java",defaultMessage:"Java"},JavaScript:{id:"action.languageMode.javascript",defaultMessage:"JavaScript"},JSON:{id:"action.languageMode.json",defaultMessage:"JSON"},Julia:{id:"action.languageMode.julia",defaultMessage:"Julia"},Kotlin:{id:"action.languageMode.kotlin",defaultMessage:"Kotlin"},LaTeX:{id:"action.languageMode.latex",defaultMessage:"LaTeX"},Less:{id:"action.languageMode.less",defaultMessage:"LESS"},Lisp:{id:"action.languageMode.lisp",defaultMessage:"Lisp"},LiveScript:{id:"action.languageMode.livescript",defaultMessage:"LiveScript"},"LLVM IR":{id:"action.languageMode.llvm",defaultMessage:"LLVM IR"},Lua:{id:"action.languageMode.lua",defaultMessage:"Lua"},Makefile:{id:"action.languageMode.makefile",defaultMessage:"Makefile"},Markdown:{id:"action.languageMode.markdown",defaultMessage:"Markdown"},Markup:{id:"action.languageMode.markup",defaultMessage:"Markup"},MATLAB:{id:"action.languageMode.matlab",defaultMessage:"MATLAB"},Mathematica:{id:"action.languageMode.mathematica",defaultMessage:"Mathematica"},Mermaid:{id:"action.languageMode.mermaid",defaultMessage:"Mermaid"},Nix:{id:"action.languageMode.nix",defaultMessage:"Nix"},"Notion Formula":{id:"action.languageMode.notionFormula",defaultMessage:"Notion Formula"},NotionScript:{id:"action.languageMode.notionScript",defaultMessage:"NotionScript"},"Objective-C":{id:"action.languageMode.objectiveC",defaultMessage:"Objective-C"},OCaml:{id:"action.languageMode.ocaml",defaultMessage:"OCaml"},Pascal:{id:"action.languageMode.pascal",defaultMessage:"Pascal"},Perl:{id:"action.languageMode.perl",defaultMessage:"Perl"},PHP:{id:"action.languageMode.php",defaultMessage:"PHP"},"Plain Text":{id:"action.languageMode.plaintext",defaultMessage:"Plain Text"},PowerShell:{id:"action.languageMode.powershell",defaultMessage:"Powershell"},Prolog:{id:"action.languageMode.prolog",defaultMessage:"Prolog"},Protobuf:{id:"action.languageMode.protobuf",defaultMessage:"Protobuf"},PureScript:{id:"action.languageMode.purescript",defaultMessage:"PureScript"},Python:{id:"action.languageMode.python",defaultMessage:"Python"},R:{id:"action.languageMode.r",defaultMessage:"R"},Racket:{id:"action.languageMode.racket",defaultMessage:"Racket"},Reason:{id:"action.languageMode.reason",defaultMessage:"Reason"},Ruby:{id:"action.languageMode.ruby",defaultMessage:"Ruby"},Rust:{id:"action.languageMode.rust",defaultMessage:"Rust"},Sass:{id:"action.languageMode.sass",defaultMessage:"Sass"},Scala:{id:"action.languageMode.scala",defaultMessage:"Scala"},Scheme:{id:"action.languageMode.scheme",defaultMessage:"Scheme"},Scss:{id:"action.languageMode.scss",defaultMessage:"SCSS"},Shell:{id:"action.languageMode.shell",defaultMessage:"Shell"},Smalltalk:{id:"action.languageMode.smalltalk",defaultMessage:"Smalltalk"},Solidity:{id:"action.languageMode.solidity",defaultMessage:"Solidity"},SQL:{id:"action.languageMode.sql",defaultMessage:"SQL"},Swift:{id:"action.languageMode.swift",defaultMessage:"Swift"},TOML:{id:"action.languageMode.toml",defaultMessage:"TOML"},TypeScript:{id:"action.languageMode.typescript",defaultMessage:"TypeScript"},"VB.Net":{id:"action.languageMode.vbdotnet",defaultMessage:"VB.Net"},Verilog:{id:"action.languageMode.verilog",defaultMessage:"Verilog"},VHDL:{id:"action.languageMode.vhdl",defaultMessage:"VHDL"},"Visual Basic":{id:"action.languageMode.visualbasic",defaultMessage:"Visual Basic"},WebAssembly:{id:"action.languageMode.webassembly",defaultMessage:"WebAssembly"},XML:{id:"action.languageMode.xml",defaultMessage:"XML"},YAML:{id:"action.languageMode.yaml",defaultMessage:"YAML"},"Java/C/C++/C#":{id:"action.languageMode.cstyle",defaultMessage:"Java/C/C++/C#"}}),ct=[ee().p2L,ee().AU6(ee().vEP),ee().ctY,ee().bLC("code"),ee().AU6(ee().Cuf)],lt=(0,ge().gy)({key:"code block languageMode actions",title:ke.languageModeName,render:e=>(0,r.jsx)(Z().A,{...e}),actions:a(15440).Dm.map((e=>(0,ge().Ls)({key:`set language ${e} action`,displayName:rt[e],analyticsName:`set language ${e}`,validators:ct,closeParentMenu:!0,track:{actionName:"set_language"},action:(t,a,n)=>{let{environment:o,blocks:i}=a;j().A.set({userId:o.currentUser.id,key:se().j.localLanguagePreferenceKey,value:e});const{serverCommitResult:s}=O().createAndCommit({userAction:"actionRegistry.languageModeActions",environment:o,canUndo:!0,perform:t=>{F().IA({language:e,blocks:i,transaction:t})}});s.then(t)},render:t=>(0,r.jsx)(a(760217).A,{...t,title:e})})))}),dt=(0,ge().uk)({key:"languageMode section",displayName:ke.languageModeName,analyticsName:ke.languageModeName.defaultMessage,validators:ct,subActions:()=>[lt]}),ut=(0,ge().Ls)({key:"format code",displayName:ke.formatCodeLabel,closeParentMenu:!0,analyticsName:ke.formatCodeLabel.defaultMessage,validators:[ee().vXb,ee().Xjv("code"),ee().Wfp],action:async e=>{let{blocks:t,environment:a}=e;const n=t[0];await F().aZ({codeBlockStore:n,environment:a})}}),mt=(0,ge().Ls)({key:"open html in browser",displayName:ke.openInBrowserLabel,closeParentMenu:!0,analyticsName:ke.openInBrowserLabel.defaultMessage,validators:[ee().vXb,ee().Xjv("code"),ee().Ozi,ee().d0C],action:e=>{let{blocks:t,environment:a}=e;const n=t[0].getTitleValue(),o=(0,U().q4_)(n),i=window.open();i&&i.document.write(o)}}),gt=(0,ge().Ls)({key:"work at notion",analyticsName:ke.workAtNotion.defaultMessage,closeParentMenu:!0,displayName:ke.workAtNotion,validators:[ee().Xjv("code"),ee().gII],action:()=>{window&&window.open(a(427704).JZ.careers)}}),pt=[ee().p2L,ee().AU6(ee().vEP),ee().bLC("quote")];function ft(e){return(t,a)=>{j().A.set({userId:a.environment.currentUser.id,key:se().w.localSizePreferenceKey,value:e});const{serverCommitResult:n}=O().createAndCommit({userAction:"actionRegistry.createQuoteSizeAction",environment:a.environment,canUndo:!0,perform:t=>{D().zA({stores:a.blocks,update:{quote_size:e},transaction:t})}});n.then(t)}}const vt=(0,ge().gy)({key:"quote size actions",title:ke.quoteSizeSection,render:e=>(0,r.jsx)(Z().A,{...e}),actions:[(0,ge().Ls)({key:"quote size default",displayName:ke.quoteSizeDefault,analyticsName:ke.quoteSizeDefault.defaultMessage,validators:pt,closeParentMenu:!0,track:{actionName:"set_size"},action:ft(void 0)}),(0,ge().Ls)({key:"quote size large",displayName:ke.quoteSizeLarge,analyticsName:ke.quoteSizeLarge.defaultMessage,validators:pt,closeParentMenu:!0,track:{actionName:"set_size"},action:ft("large")})]}),bt=(0,ge().uk)({key:"quote size",displayName:ke.quoteSize,analyticsName:ke.quoteSize.defaultMessage,svg:w,validators:pt,subActions:()=>[vt]}),Mt=[ee().p2L,ee().AU6(ee().vEP),ee().bLC("numbered_list"),ee().ctQ("numbered_list")],yt=[ee().p2L,ee().AU6(ee().vEP),ee().bLC("bulleted_list"),ee().ctQ("bulleted_list")],kt=(0,ge().uk)({key:"number format",displayName:ke.listFormat,analyticsName:ke.listFormat.defaultMessage,svg:S().n,validators:Mt,subActions:()=>[At]});function St(e){return(t,a)=>{const{serverCommitResult:n}=O().createAndCommit({userAction:"actionRegistry.createListFormatAction",environment:a.environment,canUndo:!0,perform:t=>{D().zA({stores:a.blocks,update:{list_format:e},transaction:t})}});n.then(t)}}const At=(0,ge().gy)({key:"text color actions",title:ke.listFormatSection,render:e=>(0,r.jsx)(Z().A,{...e}),actions:[(0,ge().Ls)({key:"list format default",displayName:ke.listFormatDefault,analyticsName:ke.listFormatDefault.defaultMessage,validators:Mt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:St(void 0)}),(0,ge().Ls)({key:"list format numbers",displayName:ke.listFormatNumbers,analyticsName:ke.listFormatNumbers.defaultMessage,validators:Mt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:St("numbers")}),(0,ge().Ls)({key:"list format letters",displayName:ke.listFormatLetters,analyticsName:ke.listFormatLetters.defaultMessage,validators:Mt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:St("letters")}),(0,ge().Ls)({key:"list format roman numerals",displayName:ke.listFormatRoman,analyticsName:ke.listFormatRoman.defaultMessage,validators:Mt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:St("roman")})]});function ht(e){return(t,a)=>{const{serverCommitResult:n}=O().createAndCommit({userAction:"actionRegistry.createBulletListFormatAction",environment:a.environment,canUndo:!0,perform:t=>{D().zA({stores:a.blocks,update:{bullet_list_format:e},transaction:t})}});n.then(t)}}const Nt=(0,ge().gy)({key:"bullet list format actions",title:ke.listFormatSection,render:e=>(0,r.jsx)(Z().A,{...e}),actions:[(0,ge().Ls)({key:"list format default",displayName:ke.listFormatDefault,analyticsName:ke.listFormatDefault.defaultMessage,validators:yt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:ht(void 0)}),(0,ge().Ls)({key:"list format disc",displayName:ke.listFormatDisc,analyticsName:ke.listFormatDisc.defaultMessage,validators:yt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:ht("disc")}),(0,ge().Ls)({key:"list format circle",displayName:ke.listFormatCircle,analyticsName:ke.listFormatCircle.defaultMessage,validators:yt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:ht("circle")}),(0,ge().Ls)({key:"list format square",displayName:ke.listFormatSquare,analyticsName:ke.listFormatSquare.defaultMessage,validators:yt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:ht("square")})]}),Ct=(0,ge().uk)({key:"bulleted format",displayName:ke.listFormat,analyticsName:ke.listFormat.defaultMessage,svg:S().n,validators:yt,subActions:()=>[Nt]}),Lt=[ee().M3g,ee().p2L,ee().AU6(ee().vEP),ee().Uo6([ee().vXb,ee().ISA,ee().WoS])],wt=(0,ge().uk)({key:"alignment",displayName:ke.alignmentName,analyticsName:ke.alignmentName.defaultMessage,svg:u,validators:Lt,subActions:()=>[xt]});function It(e){return(t,a)=>{const{serverCommitResult:n}=O().createAndCommit({userAction:"actionRegistry.createAlignmentFormatAction",environment:a.environment,canUndo:!0,perform:t=>{if(a.blocks&&a.blocks.length>0)for(const n of a.blocks)D().TP({environment:a.environment,store:n,alignment:e,transaction:t})}});n.then(t)}}const Pt=(0,T().YK)({leftAlign:{id:"action.alignment.left.name",defaultMessage:"Left"},centerAlign:{id:"action.alignment.center.name",defaultMessage:"Center"},rightAlign:{id:"action.alignment.right.name",defaultMessage:"Right"}}),xt=(0,ge().gy)({key:"alignment format actions",title:ke.alignmentName,render:e=>(0,r.jsx)(Z().A,{...e}),actions:[(0,ge().Ls)({key:"alignment format left",displayName:Pt.leftAlign,analyticsName:"Align left",validators:Lt,closeParentMenu:!0,svg:u,track:{actionName:"set_alignment"},action:It("left")}),(0,ge().Ls)({key:"alignment format center",displayName:Pt.centerAlign,analyticsName:"Align center",validators:Lt,closeParentMenu:!0,svg:l,track:{actionName:"set_alignment"},action:It("center")}),(0,ge().Ls)({key:"alignment format right",displayName:Pt.rightAlign,analyticsName:"Align right",validators:Lt,closeParentMenu:!0,svg:g,track:{actionName:"set_alignment"},action:It("right")})]}),jt=(0,ge().Ls)({key:"edit image",displayName:ke.cropImage,analyticsName:ke.cropImage.defaultMessage,svg:h,validators:[ee().p2L,ee().JZE,ee().IRu,ee().SQN("image_cropping"),ee().AU6(ee().vEP)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;const o=t[0],i=o.getOriginalImageSource();i&&(a(471266).A.openModal({blockStore:o,originalSource:i}),a(799750).h(n,{from:"blockmenu"}))}}),Ut={key:"block menu primary",render:e=>(0,r.jsx)(Z().A,{...e}),actions:[a(316221).KV,ue().z,me().As,me().nK,Ae,he,Ne,a(546692).$]},Tt={key:"block menu navigation",render:e=>(0,r.jsx)(Z().A,{...e}),actions:[Le,we,...ve().YO,de().ko,de().oc,Ie]},_t={key:"block menu presentation",render:e=>(0,r.jsx)(Z().A,{...e}),actions:[Ce]},Rt={key:"block menu secondary",render:e=>(0,r.jsx)(Z().A,{...e}),actions:[Oe,qe,We,Ke,a(982257).i,xe,Pe,je,Ue,Me().Zm,Me().Lc,Re,_e,Te,be().U,be().H,Be,Ve,De,ze,Ee,He,Xe,Ye,de().LN,at,fe().t,$e]},Ft={key:"block menu dictate",render:e=>(0,r.jsx)(Z().A,{...e}),actions:[a(621327).qp]},Bt={key:"block menu comment",render:e=>(0,r.jsx)(Z().A,{...e}),actions:[le().Im,le().pG,le().R5,(0,a(363019).F)("block_action_menu")]},Vt={key:"block menu color",render:e=>(0,r.jsx)(Z().A,{...e,topBorder:!0}),actions:[nt,a(443616).Rw]},Dt={key:"code block menu style",render:e=>(0,r.jsx)(Z().A,{...e}),actions:[st,dt,ut,gt,mt]},zt={key:"block menu quote",render:e=>(0,r.jsx)(Z().A,{...e}),actions:[bt]},Et={key:"block menu number",render:e=>(0,r.jsx)(Z().A,{...e}),actions:[kt]},Ht={key:"block menu bullet",render:e=>(0,r.jsx)(Z().A,{...e}),actions:[Ct]},Ot={key:"block alignment",render:e=>(0,r.jsx)(Z().A,{...e}),actions:[wt,jt,pe().N,pe().S]},qt=[a(354406).LQ,Bt,Ot,ye().PE,Ut,Ft,Tt,Rt,_t,Vt,Dt,zt,Et,Ht],Wt=(0,ge().uk)({key:"open in (group)",svg:f().N,displayName:ke.openIn,analyticsName:ke.openIn.defaultMessage,validators:[ee().vXb,ee().AU6(ee().FrL),ve().kf],subActions:()=>[{key:0,title:void 0,render:e=>(0,r.jsx)(Z().A,{...e}),actions:ve().Wq}]}),Kt={key:"collection menu tertiary",render:e=>(0,r.jsx)(Z().A,{...e}),actions:[le().Im,Wt]},Gt={key:"collection menu secondary",render:e=>(0,r.jsx)(Z().A,{...e}),actions:[ot,Be]},Xt={key:"collection menu primary",render:e=>(0,r.jsx)(Z().A,{...e}),actions:[$e,tt,de().oc,Ie,me().As,fe().t,ue().z]},Yt=[Xt,Gt,Kt],Qt=[Xt,Gt,{key:"collection menu tertiary",render:e=>(0,r.jsx)(Z().A,{...e}),actions:[Wt]}]},375078:(e,t,a)=>{a.r(t),a.d(t,{maybeTurnCollectionViewIntoCollectionViewPage:()=>h,transformBlocks:()=>A,transformIntoColumnList:()=>N});a(581454);var n=()=>a(908006),o=()=>a(700500),i=()=>a(179034),s=()=>a(496603),r=()=>a(722101),c=()=>a(44729),l=()=>a(863168),d=()=>a(246826),u=()=>a(797265),m=()=>a(778417),g=()=>a(725614),p=()=>a(317909),f=()=>a(62287),v=()=>a(87017),b=()=>a(594794),M=()=>a(299545),y=()=>a(508496),k=()=>a(630116),S=()=>a(65269);function A(e){const{environment:t,blocks:a,blockType:S,transaction:A}=e;if(S!==o().xd.transclusionContainer)if(S===o().xd.callout&&y().default.checkGate({gateName:"create_v2_callouts"}))!function(e){const{environment:t,blocks:a,transaction:n}=e,s=a[0];if(!s)return;const r=s.getRecordStoreUIParent();if(!r||!(0,M().iU)(r))return;const u=r.getRecordStoreUIParent();if(!(u&&u instanceof k().Bv))return;const p=(0,b().Z1)({environment:t,table:i().ev,spaceId:u.getSpaceId()}),f=d().Wv({environment:t,id:p,type:o().xd.callout,inMemoryRecordCache:r.inMemoryRecordCache,transaction:n,spaceId:u.getSpaceId(),format:{callout_version:2}});c().NI({parentStore:r,childStore:f,after:s.id,transaction:n});C({newParentStore:f.getContentStore(),blocks:a,transaction:n}),l().s4({store:f,transaction:n}),g().clear({environment:t}),m().IU({environment:t}),m().td({environment:t,stores:[f]})}({environment:t,blocks:a,transaction:A});else if(S!==o().xd.columnList)if(S!==o().xd.slide)if((0,o().ZK)(S)){const e=parseInt(S.replace("column","").replace("block","")),o=s().oE(s().Hn(e-1,(()=>v().insertTextBelow({environment:t,blocks:a,transaction:A})))),i=[...a,...o],r=N({environment:t,blocks:i,transaction:A});n().default.afterNextFlush((()=>{g().setSelectionAtStart({store:r[0].getBlockTitleStore()})}))}else for(const o of a)if(o.isCalloutV2()){const e=o.getParentBlockStore();if(e){const i=o.getContentStores();p().applyOperation({store:e,operation:{pointer:e.pointer,path:["content"],command:"insertChildrenAfter",args:{ids:i.map((e=>e.id)),after:o.id}},transaction:A}),c().zz({parentStore:e.getContentStore(),childStore:o,transaction:A});for(const e of i)f().pd({environment:t,block:e,blockType:S,transaction:A,isMultiBlockTransformation:a.length>1});n().default.afterNextFlush((()=>{u().dL(t,i.map((e=>e.id)))}))}}else f().pd({environment:t,block:o,blockType:S,transaction:A,isMultiBlockTransformation:a.length>1});else!function(e){const{environment:t,blocks:a,transaction:n}=e,s=a[0];if(!s)return;const r=s.getRecordStoreUIParent();if(!r||!(0,M().iU)(r))return;const l=r.getRecordStoreUIParent();if(!(l&&l instanceof k().Bv))return;const u=(0,b().Z1)({environment:t,table:i().ev,spaceId:l.getSpaceId()}),p=d().Wv({environment:t,id:u,type:o().xd.slide,inMemoryRecordCache:r.inMemoryRecordCache,transaction:n,spaceId:l.getSpaceId()});c().NI({parentStore:r,childStore:p,after:s.id,transaction:n});C({newParentStore:p.getContentStore(),blocks:a,transaction:n}),g().clear({environment:t}),m().IU({environment:t}),m().td({environment:t,stores:[p]})}({environment:t,blocks:a,transaction:A});else N({environment:t,blocks:a,transaction:A});else!function(e){const{environment:t,blocks:a,transaction:n}=e,s=a[0];if(!s)return;const c=s.getRecordStoreUIParent();if(!c||!(0,M().iU)(c))return;const l=c.getRecordStoreUIParent();if(!l||!(0,M()._p)(l))return;if(!l.isDefined())return;const u=(0,b().Z1)({environment:t,table:i().ev,spaceId:l.getSpaceId()}),p=d().Wv({environment:t,id:u,type:o().xd.transclusionContainer,inMemoryRecordCache:c.inMemoryRecordCache,transaction:n,spaceId:l.getSpaceId()});r().WH({parentStore:c,insertStore:p,afterStore:s,transaction:n});C({newParentStore:p.getContentStore(),blocks:a,transaction:n}),g().clear({environment:t}),m().IU({environment:t}),m().td({environment:t,stores:[p]})}({environment:t,blocks:a,transaction:A})}function h(e){let{environment:t,blocks:a,transaction:n}=e;(function(e){return 1===e.length&&"collection_view"===e[0].getType()})(a)&&A({environment:t,blocks:a,blockType:"collection_view_page",transaction:n})}function N(e){const{environment:t,blocks:a,transaction:n}=e,s=a[0];if(!s)return[];const c=s.recordStoreUIParentStore;if(null==c||!c.valueIs(S()._))return[];const l=(0,b().Z1)({environment:t,table:i().ev,spaceId:s.getSpaceId()}),u=d().Wv({environment:t,id:l,type:o().xd.columnList,inMemoryRecordCache:s.inMemoryRecordCache,transaction:n,spaceId:s.getSpaceId()}),{childStore:m}=r().nc({parentStore:c,insertStore:u,beforeStore:s,transaction:n});return a.map((e=>{const a=(0,b().Z1)({environment:t,table:i().ev,spaceId:s.getSpaceId()}),l=d().Wv({environment:t,id:a,type:o().xd.column,inMemoryRecordCache:s.inMemoryRecordCache,transaction:n,spaceId:s.getSpaceId()}),{childStore:u}=r().TF({parentStore:c,childToRemoveStore:e,transaction:n}),{childStore:g}=r().WH({parentStore:m.getContentStore(),insertStore:l,transaction:n}),{childStore:p}=r().WH({parentStore:g.getContentStore(),insertStore:u,transaction:n});return p}))}function C(e){const{newParentStore:t,blocks:a,transaction:n}=e;for(const o of a){const e=o.getRecordStoreUIParent();null!=e&&e.valueIs(S()._)&&(r().TF({parentStore:e,childToRemoveStore:o,transaction:n}),r().BC({parentStore:t,appendStore:o,transaction:n}))}}},487494:(e,t,a)=>{a.d(t,{A:()=>o});var n=function(e){return e[e.Preview=0]="Preview",e[e.Mention=1]="Mention",e[e.Link=2]="Link",e}(n||{});const o=n},546692:(e,t,a)=>{a.d(t,{A:()=>nt,$:()=>at});var n=a(296540),o=()=>a(959013),i=()=>a(484714),s=()=>a(56366),r=()=>a(401497),c=()=>a(584262),l=a(474848);const d=(0,a(340498).wt)("disconnect",{viewBox:"0 0 16 16",svg:(0,l.jsx)("path",{d:"M6.45508 4.50977L7.28906 5.34375L8.7041 3.4707L7.67871 5.7334L9.45605 7.51074H11.083L10.3857 8.43359L11.2539 9.30859L12.7852 7.36035C12.9082 7.20996 12.9697 7.06641 12.9697 6.90234C12.9697 6.61523 12.751 6.41016 12.4502 6.41016H8.54688L10.5703 1.05078C10.8506 0.298828 10.0645 -0.0976562 9.58594 0.517578L6.45508 4.50977ZM12.874 13.6631C13.0859 13.875 13.4346 13.875 13.6396 13.6631C13.8516 13.458 13.8584 13.1025 13.6396 12.8906L3.10547 2.35645C2.90039 2.15137 2.53809 2.14453 2.33301 2.35645C2.12793 2.56152 2.12793 2.92383 2.33301 3.12891L12.874 13.6631ZM3.0166 9.12402C3.0166 9.4043 3.23535 9.61621 3.53613 9.61621H7.44629L5.41602 14.9688C5.13574 15.7207 5.92188 16.1172 6.40039 15.5088L9.52441 11.5166L8.69043 10.6895L7.28223 12.5488L8.30078 10.293L6.5166 8.51562H4.89648L5.60059 7.59277L4.72559 6.71777L3.20801 8.65918C3.08496 8.81641 3.0166 8.95996 3.0166 9.12402Z"})});var u=()=>a(212727),m=()=>a(498212),g=()=>a(939768),p=()=>a(427704);function f(e,t){const a=t.trim().toLowerCase(),n=(0,g().d9)(a).replace(/\./g,"-");return n?`${n}-${e}`:e}var v=()=>a(388693),b=()=>a(179034),M=()=>a(857783),y=()=>a(351360),k=()=>a(760217),S=()=>a(256863);function A(e,t){const{bot:n}=e,o=(0,s().K8)((()=>y().default.state.currentUserRootStore),[]);return n&&o?(0,l.jsx)(k().A,{...e,icon:(0,l.jsx)(S().A,{botValue:n}),title:(0,a(799288).Hg)(n),ref:t}):null}const h=n.forwardRef(A);var N=()=>a(575143),C=()=>a(419357),L=()=>a(331542),w=()=>a(678553),I=()=>a(64e3),P=()=>a(614505),x=()=>a(16006),j=()=>a(859428),U=()=>a(192421),T=()=>a(148307),_=()=>a(751109),R=()=>a(553965),F=()=>a(878079),B=()=>a(962730),V=()=>a(103448);function D(e){return(0,s().K8)((()=>{var t;return{isDefined:e.isDefined(),channel:null===(t=e.getKeyStore("channel").getValue())||void 0===t?void 0:t.replace(/^#/,"")}}),[e])}function z(){return(0,l.jsx)(V().A,{imageURL:T().A.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:(0,l.jsx)(o().sA,{defaultMessage:"Connect a Slack channel to get updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.tooltip"})})}function E(){return(0,l.jsx)(V().A,{imageURL:T().A.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:(0,l.jsx)(o().sA,{defaultMessage:"Disconnect a Slack channel to stop getting updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.disconnectTooltip"})})}const H=(0,n.forwardRef)((function(e,t){const{blockStore:n,...i}=e,{blockStore:r,slackIntegrationStore:d}=(0,F().x2)(n),{isDefined:u,channel:m}=D(d),g=(0,s().K8)((()=>(0,a(492414).Ay)({store:r,pageVisitSource:c().y8.LinkInPage})),[r]);return u?(0,l.jsx)(j().A,{placement:B().W.Left,render:e=>(0,l.jsx)(N().A,{...(0,R().A)(e,i),svg:_().z,title:m,caption:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o().sA,{defaultMessage:"Based on",id:"topbar.updatesButton.slackIntegrationButton.activeTitle"})," ",(0,l.jsx)(a(719147).A,{href:g,children:(0,l.jsx)(x().A,{store:r,style:{display:"inline"}})})]}),ref:t}),renderTooltip:E}):null})),O=(0,n.forwardRef)((function(e,t){const{blockStore:a,...n}=e,{slackIntegrationStore:i}=(0,s().K8)((()=>(0,F().x2)(a)),[a]),{isDefined:r,channel:c}=D(i);return r?(0,l.jsx)(j().A,{placement:B().W.Left,render:e=>(0,l.jsx)(N().A,{ref:t,svg:_().z,title:c,caption:(0,l.jsx)(o().sA,{defaultMessage:"Connected to Slack channel",id:"topbar.updatesButton.slackIntegrationButton.connectedCaption"}),...(0,R().A)(e,n)}),renderTooltip:E}):null}));var q=()=>a(722872),W=()=>a(452558),K=()=>a(928600),G=()=>a(45552),X=()=>a(89924),Y=()=>a(662971);const Q=(0,n.forwardRef)((function(e,t){const{context:a,parent:o,isSharedDirectly:r,botStore:c,botPermissionSourcePage:d,originConnectionLabel:u,...m}=e,g=(0,i().v3)(),p=(0,s().K8)((()=>y().default.state.currentSpaceStore),[]),f=a.blocks[0],v=(0,s().K8)((()=>f.canAdmin()&&(null==p?void 0:p.canRead())),[f,p]),{botCapabilities:b,botName:M}=(0,s().K8)((()=>({botCapabilities:c.getCapabilities(),botName:c.getName()})),[c]);return(0,n.createElement)(Y().A,{...m,key:c.id,renderOrigin:e=>(0,l.jsx)(k().A,{...e,title:u,icon:(0,l.jsx)(S().A,{botStore:c,showActiveDot:!0,style:{position:"relative"}})}),renderExtension:(e,t)=>{let n;return n=g.device.isPhone?{menuType:q().gu.Modal,right:(0,l.jsx)(G().DoneMenuText,{}),onClickRight:t.close,...e}:{menuType:q().gu.Popup,width:220,...e},(0,l.jsx)(K().A,{...n,children:(0,l.jsx)(W().A,{context:a,initialFocus:0,onAccept:o.onAccept,sections:[Z({isSharedDirectly:r,botCapabilities:b,botPermissionSourcePage:d}),...v?[$({isSharedDirectly:r,botId:c.id,botName:M})]:[]]})})},onFocus:o.onFocus,focused:m.focused,openOnFocus:!1,ref:t,placementToOrigin:B().W.Left})}));function Z(e){const{botCapabilities:t,isSharedDirectly:n,botPermissionSourcePage:o}=e,i=(0,a(433847).MD)(t);return{key:"active connection capabilities section",render:e=>(0,l.jsx)(X().A,{...e,topBorder:!1}),actions:[...n?[]:[Oe(o)],qe(i)]}}function $(e){const{isSharedDirectly:t,botId:a,botName:n}=e;return{key:"active connection disconnect section",render:e=>(0,l.jsx)(X().A,{...e}),actions:t?[We(a,n)]:[Ke(a)]}}a(16280),a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520),a(581454);var J=()=>a(792071),ee=()=>a(824862),te=()=>a(332393),ae=()=>a(534177);function ne(e){a(989423).vd(e,"open_more_connections_menu")}var oe=()=>a(163580),ie=()=>a(972435),se=()=>a(437622),re=()=>a(106628),ce=()=>a(630116);const le=(0,o().YK)({noConnectionsLabel:{defaultMessage:"None",id:"topbarMenu.subActions.addConnections.none"},activeConnectionsLabel:{defaultMessage:"Active connections",id:"topbarMenu.subActions.addConnections.activeConnections"}}),de=(0,n.forwardRef)((function(e,t){const{context:o,parent:c,alreadyConnectedIntegrationIds:d,alreadyConnectedBotIds:u,originButtonLabel:m,connectedActionsToShow:g,...p}=e,f=o.blocks[0],b=(0,i().v3)(),M=(0,s().K8)((()=>y().default.state.currentSpaceStore),[]),k=(0,s().K8)((()=>null==M?void 0:M.getBotSettingsStore().getValue()),[M]),S=(0,s().K8)((()=>null!=k&&k.integration_restrictions&&null!=k&&k.integration_approval_statuses?Object.keys(k.integration_approval_statuses):[]),[k]),[A,h]=(0,n.useState)(""),[C,L]=(0,n.useState)({status:"loading"}),w=(0,a(645873).fJ)(re().T.searchActions);(0,n.useEffect)((()=>{if("resolved"!==w.status)return;const e=w.value;const{currentUserRootStore:t}=y().default.state;Promise.all([async function(t){return await e.searchSpaceBots({environment:b,query:t})}(A),async function(e){const t=await re().T.searchActions.load();return await t.searchInstallableIntegrations({query:e,environment:b,spaceId:null==M?void 0:M.id,botSettings:k})}(A)]).then((e=>{let[a,n]=e;const o=new Set,i=function(e){const{alreadyConnectedBotIds:t,alreadyConnectedIntegrationIds:a,botValues:n,environment:o}=e,i=[],{currentUserRootStore:s}=y().default.state;if(!s)throw new Error("currentUserStore not defined");for(const r of n){const e=r.id;let n=!Boolean(r.integration_id);if(r.integration_id){const e=(0,ce().Oo)(s,{id:r.integration_id,table:te().Li}).getKeyStore("type").getValue();(0,te().SF)(e?{type:e}:void 0)&&(n=!0)}const c=t.has(e)||r.integration_id&&!n&&a.has(r.integration_id),l=J().Bj6.fromValue(ee().GP,r),d=(0,oe().VT)(o,l)||(0,se().s7)(o)&&(0,oe().b0)(l);!c&&d&&i.push(r)}return i}({alreadyConnectedBotIds:u,alreadyConnectedIntegrationIds:d,botValues:a,environment:b}).map((e=>{if(e.integration_id&&t){const a=(0,ce().Oo)(t,{id:e.integration_id,table:te().Li}).getKeyStore("type").getValue();J().Bj6.fromValue(ee().GP,e).isInternalBot(a?{type:a}:void 0)&&o.add(e.integration_id)}return{table:ee().GP,value:e}}));let s=n.map((e=>{if(M){const t=ce().sk.createChildStore(M,{id:e,table:te().Li}),a=t.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:a}=e;return a(t)}));if(a&&!(0,v().v_)(a)){return{table:te().Li,value:a}}}})).filter(ae().O9).filter((e=>!(o.has(e.value.id)||d.has(e.value.id))));if(v().Gk.name.toLowerCase().includes(A.toLowerCase())){const e={table:"legacy_integration",value:v().Gk};s=[...s,e]}const r=[...i,...s].sort(((e,t)=>{var a,n;const o=null===(a=e.value.name)||void 0===a?void 0:a.toLowerCase(),i=null===(n=t.value.name)||void 0===n?void 0:n.toLowerCase();return o&&i?o<i?-1:o>i?1:0:0}));L({results:r,status:"ready"})})).catch((e=>L({status:"error"})))}),[A,M,u,k,S,b,d,f,w.status,w.value]);const I=(0,r().IS)((e=>({rightStyle:{color:e.lightTextColor,marginRight:5}})),[]),[P,x]=(0,a(857437).$)();return(0,l.jsx)(Y().A,{...p,renderOrigin:(e,t)=>(0,l.jsx)(N().A,{...e,ref:t,title:m,svg:a(173614).c}),renderExtension:(e,t)=>{const a=b.device.isMobile?{menuType:q().gu.Modal,right:(0,l.jsx)(G().DoneMenuText,{}),onClickRight:t.close,...e}:{menuType:q().gu.Popup,width:220,...e},n=b.device.isMobile?{menuType:q().gu.Modal,topbarStyle:{height:0}}:{menuType:q().gu.Popup,width:220,maxHeight:"16vh",...e},i=Boolean(f.canAdmin()&&(null==M?void 0:M.canRead()));return(0,l.jsx)(K().A,{...a,onClick:e=>{e.stopPropagation()},children:(0,l.jsx)(W().A,{initialFocus:0,context:o,onAccept:()=>{ne(b)},comboboxProps:i?x:void 0,sections:[...i?[ue(A,h,P),""===A?me({searchResults:C,resultsMenuProps:n}):pe({searchResults:C,resultsMenuProps:n})]:[],fe(i,v().Gk),(s=g||[],{key:"existing connections section",title:ie().A.formatMessage(le.activeConnectionsLabel),render:e=>(0,l.jsx)(X().A,{...e}),actions:s})]})});var s},onFocus:c.onFocus,focused:p.focused,openOnFocus:!0,ref:t,right:(0,l.jsx)(l.Fragment,{children:d.size+u.size||ie().A.formatMessage(le.noConnectionsLabel)}),rightStyle:I.rightStyle})}));function ue(e,t,a){return{key:"search connections section",render:e=>(0,l.jsx)(X().A,{...e,isInput:!0}),actions:[Fe(e,t,a)]}}function me(e){const{searchResults:t,resultsMenuProps:a}=e,n=new Set;return{key:"search initial connections section",render:e=>(0,l.jsx)(ge,{...e,resultsMenuProps:a}),actions:[..."ready"===t.status?t.results.map((e=>"bot"===e.table?(e.value.integration_id&&n.add(e.value.integration_id),Ve(e.value)):Qe(e)?(0,F().Qi)()&&!(0,F().yP)()?void 0:ze(e.value):De(e.value))).filter(ae().O9):"loading"===t.status?[Re()]:[Be()]]}}function ge(e){const{resultsMenuProps:t,...a}=e,o=(0,n.useRef)(null),i=(0,n.useCallback)((()=>{var e;const t=null===(e=o.current)||void 0===e||null===(e=e.querySelector('[role="menuitem"]'))||void 0===e?void 0:e.clientHeight,a=window.innerHeight<600?3:7;o.current&&t&&(o.current.style.maxHeight=a*t+.5*t+"px")}),[]);return(0,n.useEffect)((()=>(i(),window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)})),[i]),(0,l.jsx)(K().A,{...t,innerRef:o,children:(0,l.jsx)(X().A,{...a,isInput:!0,topBorder:!1,style:{margin:0,paddingTop:0,paddingBottom:0}})})}function pe(e){const{searchResults:t,resultsMenuProps:a}=e;let n=[];return n="error"===t.status?[Be()]:"loading"===t.status?[Re()]:"ready"===t.status&&t.results.length>0?t.results.map((e=>e.table===ee().GP?Ve(e.value):Qe(e)?(0,F().Qi)()&&!(0,F().yP)()?void 0:ze(e.value):De(e.value))).filter(ae().O9):[{key:"connections search error",displayName:ie().A.formatMessage(Te.connectionNoSearchResultsLabel),analyticsName:Te.connectionNoSearchResultsLabel.defaultMessage,searchName:Te.connectionNoSearchResultsLabel.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,_e],render:e=>(0,l.jsx)(I().A,{title:ie().A.formatMessage(Te.connectionNoSearchResultsLabel)}),action:()=>{}}],{key:"connections search results",render:e=>(0,l.jsx)(ge,{...e,resultsMenuProps:a}),actions:n}}function fe(e,t){const a=e,n=!(0,F().Qi)()||(0,F().yP)();return{key:"manage connections section",render:t=>(0,l.jsx)(X().A,{...t,style:{marginTop:e?6:0}}),actions:[...!a&&n?[ze(t)]:[],{key:"manage connections",displayName:ie().A.formatMessage(Te.manageConnectionsLabel),analyticsName:Te.manageConnectionsLabel.defaultMessage,searchName:Te.manageConnectionsLabel.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,ve().AU6(ve().FrL)],render:e=>(0,l.jsx)(N().A,{...e,title:ie().A.formatMessage(Te.manageConnectionsLabel),svg:u().gearIcon}),action:()=>{ye().Ow({currentTab:"connected_apps",openedFrom:"topbar"})}}]}}var ve=()=>a(878377),be=()=>a(908928),Me=()=>a(901389),ye=()=>a(209660),ke=()=>a(579627),Se=()=>a(755636),Ae=()=>a(861017),he=()=>a(780054),Ne=()=>a(725951),Ce=()=>a(898563),Le=()=>a(705540),we=()=>a(957416),Ie=()=>a(246826),Pe=()=>a(464510),xe=()=>a(317909);const je=(0,o().YK)({somethingWentWrong:{defaultMessage:"Something went wrong.",id:"slackActions.dialogError.loginWithSlack.errorMessage"},titleMessage:{defaultMessage:"Slack login",id:"slackActions.loginPopupModal.title"},removeIntegrationMessage:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.prompt",defaultMessage:"Are you sure you want to remove Slack integration?"},removeIntegrationConfirmationLabel:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.removeButton.label",defaultMessage:"Remove"}});async function Ue(e){let{environment:t,blockId:a,intl:n}=e;Ce().FY(t),await async function(e){const{environment:t,blockId:a,intl:n}=e,o=(0,Ne().LX)(t);let i=(0,Ae().Hs)(he().A.domainBaseUrl,{blockId:a,authType:o,userId:t.currentUser.id});if(i=o.redirectToAuth?i:await(0,Ne().YN)(t,i),t.device.isElectron)return void Le().openExternalUrl(i);const s=await we().P(t,{width:530,height:530,url:i,titleMessage:je.titleMessage});if(!s)return void Me().f1(n.formatMessage(je.somethingWentWrong));const r=(0,Ae().parseRoute)({url:s,isMobile:t.device.isMobile,baseUrl:he().A.domainBaseUrl,publicDomainName:he().A.publicDomainName,protocol:he().A.protocol,currentUrl:window.location.href});"slackAuthCallback"===r.name&&Pe().KY({route:r,environment:t})}({environment:t,blockId:a,intl:n})}const Te=(0,o().YK)({connectionLoadingLabel:{id:"topbar.connectionsSection.connectionLoading.label",defaultMessage:"Connections loading"},connectionSearchPlaceholderLabel:{id:"topbar.connectionsSection.topbarMoreConnectionsSubMenu.label",defaultMessage:"Search for connections..."},connectionSearchErrorLabel:{id:"topbar.connectionsSection.connectionSearchError.label",defaultMessage:"Something went wrong"},connectionNoSearchResultsLabel:{id:"topbar.connectionsSection.noSearchResults.label",defaultMessage:"No results"},connectionSearchResultLabel:{id:"topbar.connectionsSection.connectionSearchResult.label",defaultMessage:"{name}"},slackEmptyLabel:{id:"topbar.connectionSection.slackEmpty.label",defaultMessage:"Slack"},slackConnectedLabel:{id:"topbar.connectionSection.slackConnected.label",defaultMessage:"Connected to Slack channel"},manageConnectionsLabel:{id:"topbar.connectionsSection.manageConnections.label",defaultMessage:"Manage connections"},connectionsLabel:{id:"topbar.connectionsSection.connections.label",defaultMessage:"Connections"},addConnectionsLabel:{id:"topbar.connectionsSection.addConnections.label",defaultMessage:"Add connections"},fromParentPageLabel:{id:"topbar.connectionsSection.fromParenPage.label",defaultMessage:"From"},capabilitiesLabel:{id:"topbar.connectionsSection.capabilities.label",defaultMessage:"Capabilities"},disconnectLabel:{id:"topbar.connectionSection.disconnectIntegration.label",defaultMessage:"Disconnect"},disconnectConfirmationLabel:{id:"topbar.connectionSection.disconnectIntegrationConfirmation.label",defaultMessage:"{botName} will be removed from this page and all child pages. Continue?"},restrictionLabel:{id:"topbar.connectionSection.restrictIntegration.label",defaultMessage:"Restrict"},restrictionConfirmationLabel:{id:"topbar.connectionSection.restrictIntegrationConfirmation.label",defaultMessage:"Are you sure you want to remove this permission and restrict access? This page will no longer share settings from the parent page."},restrictionAcceptLabel:{id:"topbar.connectionSection.restrictAccept.label",defaultMessage:"Restrict access"},connectionLabel:{id:"topbar.connectionSection.connectionIntegration.label",defaultMessage:"{connectionName}"},connectionBotConfirmlabel:{id:"topbar.connectionSection.connectBotConfirmation.label",defaultMessage:"{botName} will have access to this and all child pages. Continue?"},connectionIntegrationConfirmlabel:{id:"topbar.connectionSection.connectIntegrationConfirmation.label",defaultMessage:"{integrationName} is developed by a third party partner and you will be redirected outside of Notion to authorize this connection. Continue?"}}),_e=ve().AU6(ve().Uo6([ve().FrL,ve().AU6(ve().Uo6([ve().Km9,ve().p2L]))]));function Re(){return{key:"connections loading",displayName:ie().A.formatMessage(Te.connectionLoadingLabel),analyticsName:Te.connectionLoadingLabel.defaultMessage,searchName:Te.connectionLoadingLabel.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,_e],render:e=>(0,l.jsx)(w().A,{...e,icon:(0,l.jsx)(L().A,{}),title:ie().A.formatMessage(Te.connectionLoadingLabel)}),action:()=>{}}}function Fe(e,t,a){return{key:"search connections input",analyticsName:Te.connectionSearchPlaceholderLabel.defaultMessage,displayName:ie().A.formatMessage(Te.connectionSearchPlaceholderLabel),searchName:Te.connectionSearchPlaceholderLabel.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,_e],render:()=>(0,l.jsx)(C().Ay,{value:e,onChange:e=>t(e.target.value),placeholder:ie().A.formatMessage(Te.connectionSearchPlaceholderLabel),focus:!0,...a}),action:()=>{}}}function Be(){return{key:"connections search error",displayName:ie().A.formatMessage(Te.connectionSearchErrorLabel),analyticsName:Te.connectionSearchErrorLabel.defaultMessage,searchName:Te.connectionSearchErrorLabel.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,_e],render:e=>(0,l.jsx)(I().A,{title:ie().A.formatMessage(Te.connectionSearchErrorLabel)}),action:()=>{}}}function Ve(e){const{id:t,name:a}=e,n=ie().A.formatMessage(Te.connectionSearchResultLabel,{name:a});return{key:`${t}`,displayName:n,analyticsName:n,searchName:a,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,_e],render:(t,a)=>(0,l.jsx)(h,{...t,bot:e,focused:t.focused,onClick:async()=>{await Xe(a.blocks[0],a.environment,e)},ref:t.ref}),action:async t=>{await Xe(t.blocks[0],t.environment,e)}}}function De(e){const{id:t,name:a,info:n}=e,o=ie().A.formatMessage(Te.connectionLabel,{connectionName:a});return{key:`${t}`,displayName:o,analyticsName:o,searchName:a,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,_e,ve().AU6(ve().FrL)],render:e=>(0,l.jsx)(k().A,{...e,title:o,icon:(0,l.jsx)("img",{src:n.icon,style:{width:18,height:"auto"},ref:e.ref})}),action:async t=>{let{environment:a}=t;e.id!==v().Jc&&await async function(e,t){const{id:a,name:n}=e,{accept:o}=await Me().Gh({message:ie().A.formatMessage(Te.connectionIntegrationConfirmlabel,{integrationName:n})}),i=function(e,t){if(!(0,m().uj)(e))return`${p().JZ.integrations}/${e}`;const a=f(e,void 0===t?"":t);return`${p().JZ.integrations}/${a}`}(a,n);o&&Se().f({environment:t,url:i,targetSelf:!1})}(e,a)}}}function ze(e){const t=ie().A.formatMessage(Te.slackEmptyLabel);return{key:"slack empty",displayName:t,analyticsName:Te.slackEmptyLabel.defaultMessage,searchName:t,closeParentMenu:!0,validators:[ve().sc7,ve().p2L,ve().D4X,ve().LO$,ve().lG8,ve().AU6(ve().wHP)],render:a=>(0,l.jsx)(j().A,{placement:B().W.Left,render:n=>(0,l.jsx)(k().A,{...(0,R().A)(n,a),title:t,icon:(0,l.jsx)("img",{src:e.info.icon,style:{height:18}})}),renderTooltip:z}),action:e=>{var t;Ue({environment:e.environment,blockId:null===(t=e.blocks)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.id,intl:ie().A.getIntl()})}}}function Ee(){const e=ie().A.formatMessage(Te.slackConnectedLabel);return{key:"slack connected inherited",displayName:e,analyticsName:Te.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[ve().sc7,ve().p2L,ve().geu,ve().AU6(ve().wHP)],render:(e,t,a)=>(0,l.jsx)(H,{blockStore:t.blocks[0],...e}),action:e=>{}}}function He(){const e=ie().A.formatMessage(Te.slackConnectedLabel);return{key:"slack connected on block",displayName:e,analyticsName:Te.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[ve().sc7,ve().p2L,ve().qFS,ve().AU6(ve().wHP)],render:(e,t,a)=>(0,l.jsx)(O,{blockStore:t.blocks[0],...e}),action:e=>{const{slackIntegrationStore:t}=(0,F().x2)(e.blocks[0]);!function(e,t,a){Me().ui({message:a.formatMessage(je.removeIntegrationMessage),showCancel:!0,keepFocus:!0,items:[{label:a.formatMessage(je.removeIntegrationConfirmationLabel),color:"red",onAccept:()=>{Ce().oI(e),xe().createAndCommit({userAction:"slackActions.handleRemoveSlackIntegration",environment:e,canUndo:!0,perform:e=>{Ie().zv({store:t,data:{enabled:!1},transaction:e})}})}}]})}(e.environment,t,ie().A.getIntl())}}}function Oe(e){const t=ie().A.formatMessage(Te.fromParentPageLabel);return{key:"from parent page",displayName:t,analyticsName:t,searchName:t,closeParentMenu:!1,validators:[ve().sc7,ve().p2L],action:()=>{},render:(t,a)=>{let{blocks:n}=a;const o=n[0],i=ce().Bv.createChildStore(o,{table:b().ev,id:e.blockId});return(0,l.jsx)(Ye,{parentBlockStore:i})}}}function qe(e){const t=ie().A.formatMessage(Te.capabilitiesLabel);return{key:"capabilities",displayName:t,analyticsName:t,searchName:t,closeParentMenu:!1,validators:[ve().sc7,ve().p2L],action:()=>{},render:()=>(0,l.jsx)(U().F,{role:e})}}function We(e,t){const a=ie().A.formatMessage(Te.disconnectLabel);return{key:"disconnect integration",displayName:a,analyticsName:a,searchName:Te.disconnectLabel.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L],action:async a=>{let{blocks:n,environment:o}=a;const i=n[0];await async function(e,t,a,n){const{accept:o}=await Me().Gh({message:ie().A.formatMessage(Te.disconnectConfirmationLabel,{botName:n})});o&&be().oG({botId:a,store:e,environment:t})}(i,o,e,t)},render:e=>(0,l.jsx)(N().A,{...e,svg:d,title:a,focused:!0})}}function Ke(e){const t=ie().A.formatMessage(Te.disconnectLabel),a=ie().A.formatMessage(Te.restrictionLabel);return{key:"restrict page from permission model",displayName:a,analyticsName:a,searchName:Te.restrictionLabel.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L],action:async t=>{let{blocks:a,environment:n}=t;const o=a[0];await async function(e,t,a){const{accept:n}=await Me().Gh({message:ie().A.formatMessage(Te.restrictionConfirmationLabel),acceptLabel:ie().A.formatMessage(Te.restrictionAcceptLabel)});if(n){const n={type:"bot_permission",role:"none",bot_id:e};xe().createAndCommit({userAction:"TopbarMoreConnections.restrictPagePermissions",environment:a,canUndo:!0,perform:e=>{ke().wW({environment:a,store:t,permissionItem:n,shouldInherit:!0,transaction:e})}})}}(e,o,n)},render:e=>(0,l.jsx)(N().A,{...e,svg:d,title:t,focused:!0})}}function Ge(e){const{botStore:t,botPermissionSourcePage:a}=e,{id:n}=t,o=t.getName(),i=ie().A.formatMessage(Te.connectionLabel,{connectionName:o});return{key:`${n}`,displayName:i,analyticsName:i,searchName:i,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,ve().AU6(ve().oy3)],action:()=>{},render:(e,n,o)=>{const s=n.blocks[0].id===a.blockId;return(0,l.jsx)(Q,{...e,context:n,parent:o,isSharedDirectly:s,botStore:t,botPermissionSourcePage:a,originConnectionLabel:i})}}}async function Xe(e,t,a){const{accept:n}=await Me().Gh({message:ie().A.formatMessage(Te.connectionBotConfirmlabel,{botName:a.name})});n&&be().sK({botValue:a,store:e,environment:t})}function Ye(e){const{parentBlockStore:t}=e,a=(0,s().K8)((()=>t.getIcon()),[t]),d=(0,s().K8)((()=>t.isEmptyPage()),[t]),u=(0,i().v3)(),m=(0,r().DP)(),[g,p]=(0,n.useState)("transparent"),f=u.device.isMobile?{fontSize:14,paddingLeft:4}:{fontSize:12,paddingLeft:4};return(0,l.jsx)(I().A,{...e,title:(0,l.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[(0,l.jsx)(o().sA,{id:"topbar.connectionSection.parentPage.label",defaultMessage:"From"}),(0,l.jsxs)("span",{style:{display:"flex",alignItems:"center",padding:2,borderRadius:2,marginLeft:2,cursor:"pointer",backgroundColor:g,color:m.regularTextColor,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},onClick:()=>{M().uK({environment:u,store:t,pageVisitSource:c().y8.LinkInPage})},onMouseEnter:()=>{p(m.selectLightGray[100])},onMouseLeave:()=>{p("transparent")},onMouseDown:()=>{p(m.selectLightGray[200])},onMouseUp:()=>{p(m.selectLightGray[100])},children:[(0,l.jsx)(P().A,{disabled:!0,icon:a,isEmptyPage:d,size:12,style:{margin:"0px 2px"}}),(0,l.jsx)(x().A,{store:t})]})]}),textWrapperStyle:f})}function Qe(e){return"legacy_integration"===e.table&&e.value.id===v().Gk.id}a(823215);var Ze=()=>a(68263),$e=()=>a(310001),Je=()=>a(731320);function et(e){const t=function(e){var t;const a=e.blocks[0],n=(0,Je().i0)(a).filter((0,ae().u0)((e=>(0,Ze().P3)(e.permissionItem)?{true:{...e,permissionItem:e.permissionItem}}:{false:e})));if(0===n.length)return{status:"no bots"};const o=new Map,i=null===(t=y().default.state.currentSpaceStore)||void 0===t?void 0:t.id,s=n.map((e=>{let{from:t,permissionItem:n}=e;const s=ce().sk.createChildStore(a,{table:ee().GP,id:n.bot_id,spaceId:i});if("block"===t.table)return o.set(n.bot_id,t),s})).filter(ae().O9);if(!s.every((e=>e.isReady())))return{status:"loading"};const r=s.filter((t=>t.isDefined()&&Boolean((0,oe().VT)(e.environment,t.getModel()))));if((0,se().s7)(e.environment)){const e=r.map((e=>e.getIntegrationId())),t=new Set(e),a=s.filter((e=>!(!e.isDefined()||t.has(e.getIntegrationId())||!Boolean((0,oe().b0)(e.getModel()))||(t.add(e.getIntegrationId()),0))));r.push(...a)}return{status:"ready",botStores:r,botIdToSharedPageIds:o}}(e),{alreadyConnectedBotIds:a,alreadyConnectedIntegrationIds:n,botActionsState:o}=function(e){const{status:t}=e;if("no bots"===t||"loading"===t)return{botActionsState:e,alreadyConnectedIntegrationIds:new Set,alreadyConnectedBotIds:new Set};const{botStores:a,botIdToSharedPageIds:n}=e,o=(0,$e().R7)(a),i=new Set,s=new Array;for(const r of a)if(r.isDefined()){const e=n.get(r.id);e&&(i.add(r.id),s.push(Ge({botStore:r,botPermissionSourcePage:e})))}return{alreadyConnectedIntegrationIds:o,alreadyConnectedBotIds:i,botActionsState:{status:"ready",botActions:s}}}(t),i=function(e,t,a){const n=Te.connectionsLabel,o=ie().A.formatMessage(n),i="ready"===(null==a?void 0:a.status)?a.botActions:[];return{key:"add connections action",displayName:o,analyticsName:n.defaultMessage,searchName:n.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,_e,ve().AU6(ve().oy3)],action:()=>{},render:(a,n,s)=>(0,l.jsx)(de,{...a,context:n,parent:s,alreadyConnectedIntegrationIds:e,alreadyConnectedBotIds:t,originButtonLabel:o,connectedActionsToShow:i})}}(n,a,o);return"loading"===o.status?{loadingAction:[Re()],connectedActions:[],searchSubMenu:i}:{loadingAction:[],connectedActions:[],searchSubMenu:i}}const tt=(0,o().YK)({copyPublicApiObject:{id:"action.copyPublicApiObject",defaultMessage:"Copy API object (Dev)"}}),at=(0,a(416726).Ls)({key:"copy public API object",displayName:tt.copyPublicApiObject,analyticsName:tt.copyPublicApiObject.defaultMessage,validators:[ve().vXb,ve().SQN("public_api_dev_mode")],closeParentMenu:!1,svg:a(536583).d,action:async e=>{let{environment:t,blocks:n}=e;const o=await a(449506).callApi({eventName:"getPublicApiObject",environment:t,data:{id:n[0].id}});let i;i="success"===o.type?JSON.stringify(o.data,void 0,2):JSON.stringify(o.error,void 0,2);const s=await a(884107).R.clipboardActions.load();s.copyString({environment:t,stringValue:i,copiedMessage:s.clipboardMessages.copiedApiObjectToClipboard})}});function nt(e){const{loadingAction:t,connectedActions:a,searchSubMenu:n}=et(e);return{key:"topbar connections",render:e=>(0,l.jsx)(X().A,{...e,style:{marginTop:1},topBorder:!0}),actions:[...t,...[Ee(),He()],...a,n,at]}}},655923:(e,t,a)=>{a.d(t,{v:()=>o});a(296540);const n={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M10.625 3a.625.625 0 1 0-1.25 0v12.491l-4.333-4.333a.625.625 0 1 0-.884.884l5.4 5.4a.62.62 0 0 0 .884 0l5.4-5.4a.625.625 0 0 0-.884-.884l-4.333 4.333z"})},o=(0,a(340498).wt)("arrowStraightDown",n)},701751:(e,t,a)=>{a.d(t,{p:()=>i});a(296540);var n=a(474848);const o={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 1 0 1.1 0z"}),(0,n.jsx)("path",{d:"M15.4 1.95a3.48 3.48 0 0 0-3.48 3.48v1.92H6.4a2.425 2.425 0 0 0-2.425 2.425v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.425 2.425 0 0 0 13.6 7.35h-.43V5.43a2.23 2.23 0 1 1 4.46 0v2.095a.625.625 0 1 0 1.25 0V5.43a3.48 3.48 0 0 0-3.48-3.48M5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},i=(0,a(340498).wt)("lockOpen",o)},813743:(e,t,a)=>{a.d(t,{O8:()=>_,Yf:()=>U,fS:()=>T});var n=()=>a(221844),o=()=>a(496506),i=()=>a(700500),s=()=>a(792071),r=()=>a(861017),c=()=>a(179034),l=()=>a(197959),d=()=>a(161479),u=()=>a(919709),m=()=>a(534177),g=()=>a(246826),p=()=>a(778417),f=()=>a(725614),v=()=>a(780054),b=()=>a(97270),M=()=>a(299545),y=()=>a(906537),k=()=>a(110955),S=()=>a(487494),A=()=>a(176106),h=()=>a(525112),N=()=>a(375447),C=()=>a(630116),L=()=>a(292167),w=()=>a(437219),I=()=>a(722101),P=()=>a(666144),x=()=>a(606952),j=()=>a(317909);function U(e){const{environment:t,textStore:a,blockStore:i,url:s,oldTextValue:u,urlSelection:m}=e;if(k().A.state.open||b().A.state.open||N().A.state.open||A().A.state.open)return!1;const g=y().get();if(!g)return!1;const p=y().getRect(g);if(!p)return!1;const f=(0,r().parseRoute)({url:s,baseUrl:v().A.domainBaseUrl,publicDomainName:v().A.publicDomainName,isMobile:t.device.isMobile,protocol:v().A.protocol,currentUrl:window.location.href});if("page"===f.name&&!!f.discussionId&&f.discussionId){const e=f.discussionId,r=f.blockId;if(!r)return!1;const g=i.getParentBlockStore();if(!g)return!1;const v=(0,C().Oo)(g,{table:c().ev,id:r,spaceId:(0,d().e)(g.pointer.spaceId)}),b=(0,C().Oo)(v,{table:l().$Y,id:e,spaceId:(0,d().e)(i.pointer.spaceId)});if("none"===b.getRole())return!1;const y=new(o().default)((()=>M().wc(b)[0]),{debugName:"firstCommentStore"}),k=new(n().A)({name:"internalUnfurlingMenuActions.activate",isTemporaryData:!0});t.defaultRecordCache.inMemoryRecordCache.addCacheOverride(k);const A=i.clone(k),N=a.clone(k),L=g.clone(k);return h().A.setState({args:{commentStore:y},stores:{blockStore:i,textStore:a,parentStore:g},temporaryStores:{blockStore:A,textStore:N,parentStore:L},temporaryRecordCache:k,focusedIndex:S().A.Preview,selectionRect:p,oldTextValue:u,open:!0,url:s,urlSelection:m}),w().wQ(t,{url:s}),!0}return!1}function T(e){const{actionType:t,environment:a,commentStore:n,useTempStores:o}=e,i=h().A.state;if(!i.open)return;const{oldTextValue:r}=i,c=o?i.temporaryStores:i.stores,{textStore:l,blockStore:g,parentStore:v}=c,b=a.currentUser.id;if(b){if(o){i.temporaryRecordCache.clearCache();for(const e in i.temporaryStores){const t=i.temporaryStores[e],n={userId:b,pointer:t.pointer},o=a.defaultRecordCache.inMemoryRecordCache.getRecord(n);o?P().PC({environment:a,inMemoryRecordCache:i.temporaryRecordCache,pointer:t.pointer,model:s().Bj6.fromValue(t.pointer.table,o.value),role:o.role,updatePaths:[[]],userId:b,force:!0,debugSource:"setUnfurlType"}):P().oX({environment:a,inMemoryRecordCache:i.temporaryRecordCache,persistedRecordCache:void 0,pointer:t.pointer,userId:b})}}else a.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(i.temporaryRecordCache);switch(t){case S().A.Link:p().hc({environment:a,store:i.stores.blockStore}),f().setSelection({store:i.stores.textStore,selection:{startIndex:i.urlSelection.endIndex,endIndex:i.urlSelection.endIndex}}),h().A.setState({...i,focusedIndex:S().A.Link});break;case S().A.Mention:if(!n)return;const e=(0,d().e)(l.pointer.spaceId);if(!e)return;const o=n.id;j().createAndCommit({environment:a,userAction:"internalUnfurlingMenuActions.mention",canUndo:!0,perform:t=>{x().KY({environment:a,store:l,value:r,transaction:t}),x().Gf({environment:a,editorMode:"default",store:l,selection:{startIndex:i.urlSelection.startIndex,endIndex:i.urlSelection.startIndex},annotation:u().hiQ(o,e),transaction:t,analyticsFrom:"block"})}}),h().A.setState({...i,focusedIndex:S().A.Mention});break;case S().A.Preview:if(!n)return;j().createAndCommit({environment:a,userAction:"internalUnfurlingMenuActions.preview",canUndo:!0,perform:e=>{x().KY({environment:a,store:l,value:r,transaction:e});const t=M().eK(n);if(!t)return;if(!M().No(t)||!v||!t.getParentId())return;const o=L().s({environment:a,parentBlockStore:v,targetStore:n,transaction:e});if(I().WH({parentStore:v.getContentStore(),insertStore:o,afterStore:g,transaction:e}),0===u().q4_(i.oldTextValue).trim().length){const t=C().Bv.createChildStore(v.getContentStore(),i.stores.blockStore.pointer);I().TF({parentStore:v.getContentStore(),childToRemoveStore:t,transaction:e})}}}),h().A.setState({...i,focusedIndex:S().A.Preview});break;default:throw(0,m().HB)(t)}o||h().A.setState({open:!1})}}function _(e){var t,a;const{blockStore:n,transaction:o}=e,s=n.getType(),r=n.getFormat(),c=n.getSpaceId();if(!n.isDefined()||s!==i().xd.alias||null==r||null===(t=r.alias_pointer)||void 0===t||!t.id)return;const l=[u().wmz(u().hiQ(null==r||null===(a=r.alias_pointer)||void 0===a?void 0:a.id,c))];g().zv({store:n,data:{type:i().xd.text},transaction:o}),g().zv({store:n.getFormatStore(),data:{alias_pointer:null},transaction:o}),x().KY({environment:n.environment,store:n.getBlockTitleStore(),value:l,transaction:o})}},877788:(e,t,a)=>{a.d(t,{w:()=>o});a(296540);const n={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M10 2.399c.27 0 .51.174.594.432l1.507 4.636h4.874a.625.625 0 0 1 .367 1.13L13.4 11.462l1.506 4.636a.625.625 0 0 1-.962.699L10 13.932l-3.943 2.865a.625.625 0 0 1-.962-.699L6.6 11.462 2.658 8.597a.625.625 0 0 1 .367-1.13h4.874L9.406 2.83A.625.625 0 0 1 10 2.399m0 2.647L8.948 8.285a.625.625 0 0 1-.595.432H4.95l2.754 2c.22.16.31.442.227.7l-1.052 3.238 2.755-2.001a.625.625 0 0 1 .734 0l2.755 2-1.052-3.237a.625.625 0 0 1 .227-.7l2.754-2h-3.405a.625.625 0 0 1-.594-.432z"})},o=(0,a(340498).wt)("star",n)}}]);