"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[5999],{195821:(e,t,a)=>{a.d(t,{A:()=>n,O:()=>o});a(296540);var i=()=>a(401497),s=()=>a(100622),l=()=>a(284371),r=a(474848);function o(e){const{name:t,htmlLabel:a,children:l,errorMessage:o,hideLabel:n,style:c={},labelStyle:u={},errorMessageStyle:m={},required:g}=e,p=(0,i().IS)((e=>({formInputContainer:{display:"flex",flexDirection:"column",gap:6,width:"100%"},formLabel:{color:e.darkTextColor,visibility:n?"hidden":"inherit"},errorMessage:{fontSize:12,color:e.errorText,...m},wrapper:{display:"flex",alignItems:"center"},required:{color:s().Ay.red,marginLeft:2}})),[n,m]);return(0,r.jsxs)("div",{style:{...p.formInputContainer,...c},children:[(0,r.jsxs)("div",{style:p.wrapper,children:[(0,r.jsx)(d,{htmlFor:a,style:{...p.formLabel,...u},children:t}),g&&(0,r.jsx)("div",{style:p.required,children:"*"})]}),l,o&&(0,r.jsx)("div",{role:"alert",style:p.errorMessage,children:o})]})}const n=o;function d(e){const{children:t,htmlFor:a,style:s}=e,o=(0,i().IS)((e=>({base:{lineHeight:l().K_.UISmall.desktop,fontSize:l().J.UISmall.desktop,color:e.regularTextColor}})),[]);return(0,r.jsx)("label",{htmlFor:a,style:{...o.base,...s},children:t})}},610064:(e,t,a)=>{a.r(t),a.d(t,{MarketplaceReviewModal:()=>P});var i=a(296540),s=()=>a(484714),l=()=>a(56366),r=()=>a(591779),o=()=>a(534177),n=()=>a(107683),d=()=>a(989423),c=()=>a(508496),u=()=>a(743071),m=(a(16280),a(504294),a(898992),a(803949),()=>a(401497)),g=()=>a(187174),p=()=>a(959013),h=()=>a(623580),f=()=>a(195821),x=()=>a(351360),b=()=>a(226098),v=()=>a(619418),y=()=>a(327684),M=a(474848);function k(){const e=(0,p().tz)(),t=(0,s().v3)(),a=(0,m().IS)((e=>({body:{display:"flex",flexDirection:"column",width:"100%",gap:"16px"}})),[]),[r,o]=(0,i.useState)(""),[n,d]=(0,i.useState)(),[c,k]=(0,i.useState)(""),[R,T]=(0,i.useState)(),[I,A]=(0,i.useState)(""),[B,L]=(0,i.useState)(),D=(0,l().K8)((()=>{var t;return null===(t=x().default.state.currentUserStore)||void 0===t?void 0:t.getDisplayName(e,!0)}),[e]);(0,i.useEffect)((()=>{D&&A(D)}),[D]);const{acquisitionId:z,rating:N,source:P}=(0,l().O$)(u().A),{trackRateListing:_,trackReviewListing:O}=(0,y().o)(z),E=(0,l().K8)((()=>u().A.getReviewId(z)),[z]),[Y,q]=(0,g().V$)((async()=>{const e={title:r,description:c,name:I};return E?(0,b().TG)({environment:t,reviewId:E,...e}):(0,b().Df)({environment:t,acquisitionId:z,rating:N,...e})}),[t,E,z,N,r,c,I]);return(0,M.jsx)("form",{method:"dialog",children:(0,M.jsx)(v().Y,{title:e.formatMessage(C.modalTitle),subTitle:e.formatMessage(C.modalSubTitle),body:(0,M.jsxs)("div",{style:a.body,children:[(0,M.jsx)(f().O,{name:e.formatMessage(C.title),htmlLabel:w,errorMessage:n,children:(0,M.jsx)(h().A,{id:w,placeholder:e.formatMessage(C.titlePlaceholder),value:r,onChange:e=>{o(e.target.value),d(void 0)},"aria-invalid":Boolean(n),autoComplete:"off"})}),(0,M.jsx)(f().O,{name:e.formatMessage(C.review),htmlLabel:j,errorMessage:R,children:(0,M.jsx)(h().A,{id:j,placeholder:e.formatMessage(C.reviewPlaceholder),value:c,onChange:e=>{k(e.target.value),T(void 0)},textarea:!0,autosize:!0,autosizeMinHeight:50,textareaSubmitOnEnter:!1,showClearButton:!0,"aria-invalid":Boolean(R),autoComplete:"off"})}),(0,M.jsx)(f().O,{name:e.formatMessage(C.name),htmlLabel:S,errorMessage:B,children:(0,M.jsx)(h().A,{id:S,placeholder:e.formatMessage(C.namePlaceholder),value:I,onChange:e=>{A(e.target.value),L(void 0)},showClearButton:!0,"aria-invalid":Boolean(B)})})]}),actions:[{type:"primary",text:e.formatMessage(C.submit),onClick:async()=>{try{await q(),O({type:"add",source:P}),N&&_({type:"add",surface:"emptyState",rating:N,source:P}),u().A.updateState({stage:"success"})}catch(e){e instanceof AggregateError&&e.errors.forEach((e=>{"title"===e.cause?d(e.message):"description"===e.cause?T(e.message):"name"===e.cause&&L(e.message)}))}},isDisabled:Boolean(n||R),isLoading:"pending"===Y.status},{type:"plain",text:e.formatMessage(C.skip),onClick:()=>u().A.closeModal()}]})})}const w="marketplace-review-title",j="marketplace-review-review",S="marketplace-review-name",C=(0,p().YK)({modalTitle:{id:"marketplace.submitRatingModal.details.modalTitle",defaultMessage:"Share your thoughts"},modalSubTitle:{id:"marketplace.submitRatingModal.details.modalSubTitle",defaultMessage:"Leave a review for the Notion community"},title:{id:"marketplace.submitRatingModal.details.title",defaultMessage:"Title"},titlePlaceholder:{id:"marketplace.submitRatingModal.details.titlePlaceholder",defaultMessage:"My review"},review:{id:"marketplace.submitRatingModal.details.review",defaultMessage:"Review"},reviewPlaceholder:{id:"marketplace.submitRatingModal.details.reviewPlaceholder",defaultMessage:"This template is..."},name:{id:"marketplace.submitRatingModal.details.name",defaultMessage:"Name shown on review"},namePlaceholder:{id:"marketplace.submitRatingModal.details.namePlaceholder",defaultMessage:"Your name"},submit:{id:"marketplace.submitRatingModal.details.submit",defaultMessage:"Submit"},skip:{id:"marketplace.submitRatingModal.details.skip",defaultMessage:"Skip"}});var R=()=>a(332661),T=()=>a(36338);function I(){const e=(0,p().tz)(),{acquisitionId:t,source:a}=(0,l().O$)(u().A),{onRatingConfirmed:i,onSubmit:s,isLoading:r,error:o}=(0,T()._)({acquisitionId:t,source:a});return(0,M.jsx)("form",{method:"dialog",children:(0,M.jsx)(v().Y,{title:(0,M.jsx)("div",{id:A,children:e.formatMessage(B.rateThisTemplate)}),body:(0,M.jsx)(R().v,{labelledBy:A,error:o,onRatingConfirmed:i}),actions:[{type:"primary",text:e.formatMessage(B.submit),onClick:async()=>{try{await s(),u().A.updateState({stage:"details"})}catch(e){}},isDisabled:Boolean(o),isLoading:r},{type:"plain",text:e.formatMessage(B.cancel),onClick:()=>u().A.closeModal()}]})})}const A="rate-this-template",B=(0,p().YK)({rateThisTemplate:{id:"marketplace.submitRatingModal.rateThisTemplate",defaultMessage:"Rate this template"},submit:{id:"marketplace.submitRatingModal.submit",defaultMessage:"Submit"},cancel:{id:"marketplace.submitRatingModal.cancel",defaultMessage:"Cancel"}});const L=(0,a(340498).xh)("bubbleElipses",{default:{loader:()=>a.e(27691).then(a.bind(a,427691))},small:{loader:()=>a.e(62997).then(a.bind(a,162997))},mini:{loader:()=>a.e(85731).then(a.bind(a,685731))},large:{loader:()=>a.e(11897).then(a.bind(a,11897))}});var D=()=>a(460292);function z(){const e=(0,p().tz)();return(0,M.jsx)(v().Y,{icon:(0,M.jsx)(D().Q,{iconGroup:L,colorName:"secondary",variantName:"large",overrideSize:()=>36}),title:e.formatMessage(N.title),subTitle:e.formatMessage(N.subTitle),actions:[{type:"outline",text:e.formatMessage(N.done),onClick:()=>u().A.closeModal()}],width:300})}const N=(0,p().YK)({title:{id:"marketplace.submitRatingModal.success.title",defaultMessage:"Reviewing your submission"},subTitle:{id:"marketplace.submitRatingModal.success.subTitle",defaultMessage:"Your review will be visible after itâ€™s been approved by our team"},done:{id:"marketplace.submitRatingModal.success.gotIt",defaultMessage:"Got it"}});function P(){const e=(0,s().v3)(),{isOpen:t,stage:a,source:m}=(0,l().O$)(u().A),g=(0,r().ZC)(a);(0,i.useEffect)((()=>{if(t){const t={stage:a,previous_stage:g!==a?g:void 0,source:m};(0,d().u4)({environment:e,event:{eventName:"view_marketplace_review_modal",eventProperties:t}}),c().default.logEvent("view_marketplace_review_modal",a,t)}}),[e,t,a,g,m]);const p=(0,i.useCallback)((()=>{u().A.closeModal()}),[]),h=(0,i.useCallback)((()=>{switch(a){case"rating":return(0,M.jsx)(I,{});case"details":return(0,M.jsx)(k,{});case"success":return(0,M.jsx)(z,{});default:(0,o().HB)(a)}}),[a]);return(0,M.jsx)(n().s,{isOpen:t,onDismiss:p,showCloseIcon:"success"!==a,render:h,animateSizeTransition:!1})}},619418:(e,t,a)=>{a.d(t,{Y:()=>u});a(581454),a(296540);var i=()=>a(401497),s=()=>a(534177),l=()=>a(284371),r=()=>a(493823),o=()=>a(554509),n=()=>a(864943),d=()=>a(204063),c=a(474848);function u(e){let{icon:t,title:a,subTitle:s,body:r,actions:n,width:d,style:u}=e;const g=function(e){let{width:t=406,style:a={}}=e;return(0,i().IS)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:`${t}px`,padding:"20px",gap:"24px",...a},header:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"8px",fontWeight:l().Wy.semibold,fontSize:"16px"},headerPadding:{paddingTop:"16px"},actions:{display:"flex",flexDirection:"column",gap:"6px",width:"100%"}})),[t,a])}({width:d,style:u});return(0,c.jsxs)("div",{style:g.container,children:[(0,c.jsxs)("div",{style:{...g.header,...!t&&g.headerPadding},children:[t,a,s?(0,c.jsx)(o().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:s}):null]}),r,(0,c.jsx)("div",{style:g.actions,children:null==n?void 0:n.map(((e,t)=>(0,c.jsx)(m,{...e},`marketplace-modal-action-${t}`)))})]})}function m(e){const t=(0,i().IS)((()=>({plainButton:{justifyContent:"center"},actionError:{textAlign:"center"}})),[]);return(0,c.jsxs)(c.Fragment,{children:[(()=>{switch(e.type){case"primary":return(0,c.jsx)(d().A,{size:"lg",onClick:e.onClick,disabled:e.isDisabled,isLoading:e.isLoading,children:e.text});case"outline":return(0,c.jsx)(n().A,{size:"lg",onClick:e.onClick,children:(0,c.jsx)(o().D,{styleName:"UIRegular-14px/Medium",children:e.text})});case"plain":return(0,c.jsx)(r().p,{size:"lg",onClick:e.onClick,isBlue:e.isBlue,isGray:!e.isBlue,style:t.plainButton,children:(0,c.jsx)(o().D,{styleName:"UIRegular-14px/Medium",children:e.text})});default:(0,s().HB)(e)}})(),e.error&&(0,c.jsx)(o().D,{styleName:"UIRegular-14px/Regular",colorName:"redTertiary",customStyles:t.actionError,children:e.error})]})}}}]);