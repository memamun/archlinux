"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[77718],{9658:(e,t,o)=>{o.d(t,{Z:()=>i,t:()=>a});var r=()=>o(645873);const n=new(r().O2)("outlinerViewAll",(async()=>{const{OutlinerViewAllButton:e}=await Promise.all([o.e(23806),o.e(51609)]).then(o.bind(o,341628)),{OutlinerViewAllPopup:t}=await Promise.all([o.e(23806),o.e(51609)]).then(o.bind(o,499960));return{OutlinerViewAllButton:e,OutlinerViewAllPopup:t}})),i=(0,r()._h)(n,(e=>e.OutlinerViewAllButton)),a=(0,r()._h)(n,(e=>e.OutlinerViewAllPopup))},79275:(e,t,o)=>{o.d(t,{X:()=>n});o(296540);var r=o(474848);const n=(0,o(340498).wt)("newSidebarHome",{viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M10.1416 3.77299C10.0563 3.71434 9.94368 3.71434 9.85837 3.77299L3.60837 8.06989C3.54053 8.11653 3.5 8.19357 3.5 8.2759V14.2499C3.5 14.9402 4.05964 15.4999 4.75 15.4999H7.5L7.5 10.7499C7.5 10.0595 8.05964 9.49987 8.75 9.49987H11.25C11.9404 9.49987 12.5 10.0595 12.5 10.7499L12.5 15.4999H15.25C15.9404 15.4999 16.5 14.9402 16.5 14.2499V8.2759C16.5 8.19357 16.4595 8.11653 16.3916 8.06989L10.1416 3.77299ZM9.00857 2.53693C9.60576 2.12636 10.3942 2.12636 10.9914 2.53693L17.2414 6.83383C17.7163 7.1603 18 7.69963 18 8.2759V14.2499C18 15.7687 16.7688 16.9999 15.25 16.9999H12.25C11.5596 16.9999 11 16.4402 11 15.7499L11 10.9999H9L9 15.7499C9 16.4402 8.44036 16.9999 7.75 16.9999H4.75C3.23122 16.9999 2 15.7687 2 14.2499V8.2759C2 7.69963 2.2837 7.1603 2.75857 6.83383L9.00857 2.53693Z"})})},91511:(e,t,o)=>{o.d(t,{w:()=>h});o(898992),o(672577),o(581454);var r=o(296540),n=()=>o(484714),i=()=>o(56366),a=()=>o(496603),s=()=>o(955930),l=()=>o(439264),d=()=>o(667193),c=()=>o(351360),u=()=>o(929450),p=()=>o(846955),m=()=>o(754527),S=o(474848);function h(e){let{teams:t,reorderable:o,onNavigate:h,id:b,teamOutlinerType:v,shouldPersistToggleState:y,from:g}=e;const f=(0,n().v3)(),w=(0,d().p)(),{currentSpaceViewStore:A,currentSpaceStore:x}=(0,i().K8)((()=>{const{currentSpaceViewStore:e,currentSpaceStore:t}=c().default.state;return{currentSpaceViewStore:e,currentSpaceStore:t}}),[]),I=(0,i().K8)((()=>t.map((e=>e.id))),[t]),T=(0,i().K8)((()=>a().pY(t,"id")),[t]),[M,C]=(0,r.useState)({});(0,r.useEffect)((()=>{(null==x?void 0:x.id)&&C((e=>u().s({teamIds:I,oldState:e,spaceId:x.id,userId:f.currentUser.id})))}),[null==x?void 0:x.id,f.currentUser.id,I]);const _=(0,i().K8)((()=>{const e=p().default.state.initialTeamStoreId;return I.find((t=>t===e))??a().$1(I)}),[I]);return A&&w?(0,S.jsx)(l().Ay,{id:b,direction:"vertical",keys:I,disabled:!o,hoverCursorStyleOverride:"pointer",renderKey:e=>M[e]&&(0,S.jsx)(m().Q,{initialToggleState:y?void 0:"hidden",shouldPersistToggleState:Boolean(y),teamStore:T[e],sidebarState:w,isLastTeam:a().HV(I)===e,teamOutlinerType:v,customToggleStore:M[e],onNavigate:h,sidebarTourStep:_===e?"prebuilt_templates":void 0,from:g},e),onDrop:(e,t)=>{s().br({environment:f,currentSpaceViewStore:A,orderedTeamIds:e,userAction:"SidebarOutliner.SidebarOutliner",isExplicitUserAction:!0,dropArgs:t})}}):(0,S.jsx)(S.Fragment,{})}},97059:(e,t,o)=>{o.d(t,{W:()=>h,w:()=>S});o(944114);var r=()=>o(585515),n=()=>o(577449),i=()=>o(161479),a=()=>o(545285),s=()=>o(763824),l=()=>o(780054),d=()=>o(870618),c=()=>o(670631),u=()=>o(227440),p=()=>o(508496),m=()=>o(540758);async function S(e){const{environment:t}=e;return(await s().lX(Object.keys(c().A.state.offlinePages||{}),100,(e=>async function(e){const{environment:t,pageId:o}=e,s={page:{id:o,spaceId:(0,i().e)(void 0)},limit:1/0,cursor:{stack:[]},verticalColumns:!1},c=[];return await r().T({...s,baseUrl:l().A.domainBaseUrl,publicDomainName:l().A.publicDomainName,shouldTraverseToggleBlocks:!0},n().h.sideEffect((e=>((0,a().u)(e)&&c.push(e.id),Promise.resolve())),n().h.fromMonomorphicFunctionUnsafe((async e=>{const o=await d().h7({environment:t,pointer:e,useInMemoryCacheOnly:!1,skipAccessWrites:!0});return null==o?void 0:o.model})))),c}({environment:t,pageId:e})))).flat()}function h(e,t){return!u().A.state.online&&(e.device.isElectron||e.device.isMobileNative)&&p().default.checkGate({gateName:"download_for_offline"})&&!(0,m().B)(t)}},180566:(e,t,o)=>{o.d(t,{Q:()=>n});o(296540);var r=o(474848);const n=(0,o(340498).wt)("newSidebarTrash",{viewBox:"0 0 20 20",svg:(0,r.jsx)("g",{children:(0,r.jsx)("g",{id:"Layer_1",children:(0,r.jsx)("path",{d:"M16.5,5.25h-2.75v-1.25c0-.9648438-.7851562-1.75-1.75-1.75h-4c-.9648438,0-1.75.7851562-1.75,1.75v1.25h-2.75c-.4140625,0-.75.3359375-.75.75s.3359375.75.75.75h.7835083l.3805542,8.375c.0668945,1.4716797,1.2739258,2.625,2.7470703,2.625h5.1777344c1.4736328,0,2.6796875-1.1533203,2.7470703-2.625l.3809814-8.375h.7830811c.4140625,0,.75-.3359375.75-.75s-.3359375-.75-.75-.75ZM7.75,4c0-.1376953.1123047-.25.25-.25h4c.1376953,0,.25.1123047.25.25v1.25h-4.5v-1.25ZM13.8378906,15.0566406c-.03125.6689453-.5791016,1.1933594-1.2490234,1.1933594h-5.1777344c-.6699219,0-1.2182617-.5244141-1.2490234-1.1933594l-.3774414-8.3066406h8.4301758l-.3769531,8.3066406ZM8.875,8.5v6c0,.3447266-.2797852.625-.625.625s-.625-.2802734-.625-.625v-6c0-.3452148.2797852-.625.625-.625s.625.2797852.625.625ZM12.375,8.5v6c0,.3447266-.2802734.625-.625.625s-.625-.2802734-.625-.625v-6c0-.3452148.2802734-.625.625-.625s.625.2797852.625.625Z"})})})})},224011:(e,t,o)=>{o.d(t,{A:()=>i});var r=()=>o(705540);class n extends(()=>o(757695))().default{getInitialState(){return{isFullScreen:window.outerWidth===window.screen.width&&window.outerHeight===window.screen.height}}constructor(){super(),this.updateFromElectronState=async()=>{const e=await r().fullscreen.get();void 0!==e&&this.setState({isFullScreen:e})},r().fullscreen.addListener(this.updateFromElectronState),this.updateFromElectronState()}}const i=new n},240562:(e,t,o)=>{o.d(t,{p:()=>i});var r=()=>o(645873);const n=new(r().O2)("HelpButtonContent",(async()=>await o.e(42481).then(o.bind(o,667667)))),i=(0,r()._h)(n,(e=>e.HelpButtonContent))},277201:(e,t,o)=>{o.d(t,{I:()=>f,i:()=>A});var r=o(296540),n=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(420767),l=()=>o(959013),d=()=>o(186445),c=()=>o(38337),u=()=>o(869562),p=()=>o(749687),m=()=>o(962730),S=()=>o(948914),h=()=>o(145214),b=()=>o(285790),v=()=>o(35392),y=()=>o(859428),g=o(474848);function f(e){const t=(0,n().v3)(),o=(0,n().Y0)(),r=(0,l().tz)(),a=(0,i().O$)(p().sidebarMouseEnteredStore),c=(0,i().K8)((()=>S().A.state.isShowingTabBar||!1),[]),m=(0,i().O$)(d().$o),h=r.formatMessage({defaultMessage:"Close sidebar",id:"sidebarUnexpandButton.closeSidebar.tooltip"}),b=(!o.isElectronMac||!m)&&!c&&a;return(0,g.jsx)(A,{isVisible:b,icon:s().B,caption:h,onClick:()=>{u().closeSidebarFromTopbarUnexpandButton(t)},keyboardShortcutName:"toggleSidebar",style:e.style,hoveredStyle:e.hoveredStyle})}const w={width:16,height:16,fill:"inherit"};function A(e){const t=(0,n().Y0)(),o=(0,a().IS)((t=>({keyboardShortcut:{color:t.text.contrastSecondary},button:{fill:t.mediumIconColor},enterAnimation:{opacity:e.isVisible?0:1},animation:{opacity:e.isVisible?1:0}})),[e.isVisible]),i=(0,r.useMemo)((()=>({position:"relative",marginLeft:10,...t.isMobile&&{height:"100%"},...o.button,...e.style})),[e.style,o.button,t.isMobile]);return(0,g.jsx)(y().A,{renderTooltip:()=>(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{children:e.caption}),e.keyboardShortcutName&&(0,g.jsx)(v().A,{style:o.keyboardShortcut,name:e.keyboardShortcutName})]}),originGap:6,placement:t.isElectron?m().W.Right:m().W.Bottom,render:o=>(0,g.jsx)(h().A,{tag:b().A,animate:{opacity:e.isVisible?1:0},ariaLabel:e.caption,disabled:!e.isVisible,icon:e.icon,style:i,hoveredStyle:e.hoveredStyle,iconStyle:w,mobileFeedback:t.isMobile,onClick:e.onClick,className:c().P7S,...o})})}},305837:(e,t,o)=>{o.d(t,{H:()=>n});o(296540);var r=o(474848);const n=(0,o(340498).wt)("settingsUpgradeFilled",{viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M10 19c4.935 0 9.009-4.073 9.009-9 0-4.926-4.082-9-9.018-9C5.065 1 1 5.074 1 10c0 4.927 4.074 9 9 9zm0-4.422c-.47 0-.818-.33-.818-.8v-4.23l.087-1.863-.81 1.01-1 1.053a.762.762 0 01-.558.235c-.435 0-.757-.314-.757-.74 0-.218.07-.392.218-.549l2.994-3.029c.2-.217.4-.313.644-.313.261 0 .461.104.662.313l2.976 3.03a.73.73 0 01.227.548c0 .426-.322.74-.758.74a.73.73 0 01-.557-.235l-.992-1.045-.818-1.027.087 1.871v4.23c0 .47-.348.801-.827.801z"})})},327300:(e,t,o)=>{o.d(t,{ML:()=>l,qn:()=>d,w4:()=>u});var r=()=>o(56366),n=()=>o(715256),i=()=>o(351360),a=()=>o(597898),s=()=>o(477293);const l=["control",...n().pF],d=["control",...n().zD];class c{constructor(e){this.sidebarVariant=e,this.sidebarVariant=e}get showOldAiSidebarItem(){return{control:!0,unified_home:!1,separate_home_and_ai:!1,separate_home_and_ai_with_home_module:!1}[this.sidebarVariant]}get showNewAiSidebarItem(){return{control:!1,unified_home:!1,separate_home_and_ai:!0,separate_home_and_ai_with_home_module:!0}[this.sidebarVariant]}get showAiFaceInHomeIcon(){return{control:!1,unified_home:!0,separate_home_and_ai:!1,separate_home_and_ai_with_home_module:!1}[this.sidebarVariant]}get showAiChatModuleInHome(){return{control:!1,unified_home:!0,separate_home_and_ai:!1,separate_home_and_ai_with_home_module:!0}[this.sidebarVariant]}}function u(){const e=(0,r().K8)((()=>{var e;return null===(e=i().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),t=(0,r().K8)((()=>{var e;return null===(e=i().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),o=(0,a().P9)({name:"ai_usage",spaceId:e,userId:t,amount:1})??!1,n=(0,s().r)("ai_sidebar_v2");return new c(o?n:"control")}},345578:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var r=()=>o(449552),n=()=>o(959013),i=()=>o(859428),a=()=>o(962730),s=o(474848);function l(e){let{iconStyle:t}=e;return(0,s.jsx)(i().A,{textWrap:!0,style:{width:210},placement:a().W.Bottom,renderTooltip:()=>(0,s.jsx)(n().sA,{id:"teamLockIcon.tooltip",defaultMessage:"Private teamspaces can only be accessed or joined by invitation"}),render:e=>(0,s.jsx)("div",{...e,children:(0,r().g)(t)})})}},360088:(e,t,o)=>{o.d(t,{p:()=>p});var r=()=>o(484714),n=()=>o(56366),i=()=>o(762433),a=()=>o(600871),s=()=>o(155959),l=()=>o(324561),d=()=>o(176983),c=()=>o(240865),u=()=>o(58293);function p(){const e=(0,r().v3)(),t=(0,d().J)(),o=(0,c().V)(),p=(0,u().r)(),m=(0,l().f_)({spaceId:null==p?void 0:p.id});return(0,n().K8)((()=>!!(0,a().mM)({environment:e})&&(!(!m||!t||1!==o)&&((0,s().T)("supportsAiIAP")?(0,l().UU)(m)||!(0,i().Fq)(m):!(0,l().UU)(m)&&!(0,i().Fq)(m)))),[e,m,t,o])}},388601:(e,t,o)=>{o.d(t,{W:()=>h,o:()=>S});var r=o(296540),n=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(396301),l=()=>o(963589),d=()=>o(351360),c=()=>o(620149),u=()=>o(578392),p=()=>o(33194),m=o(474848);function S(e){const{state:t,sidebarState:o,onNavigate:S,additionalOutlinerProps:h,id:b,isHeaderless:v,from:y}=e,g=(0,i().K8)((()=>d().default.state.currentSpaceStore),[]),f=(0,i().K8)((()=>d().default.state.currentSpaceViewStore),[]),w=(0,n().v3)(),{isMobile:A,isTablet:x}=(0,n().Y0)(),I=(0,l().X)("tablet_refresh_gate"),T=(0,i().K8)((()=>!c().l.state),[]),M=(0,i().K8)((()=>(null==g?void 0:g.canEdit())&&T),[g,T]),C=t,_="shared"===C.type&&o.showCrossWorkspaceGuestPagesPrototype,j=(0,i().K8)((()=>{if(f)return(0,s().o_)({currentSpaceViewStore:f,typeWithTeam:C,sidebarState:o})}),[f,o,C]),B=(0,i().K8)((()=>{if(f&&g&&!_)return(0,s().rE)({currentSpaceStore:g,currentSpaceViewStore:f,typeWithTeam:C})}),[g,f,_,C]),P=(0,r.useCallback)((e=>{(0,s().xy)({environment:w,store:e,type:C.type}),null==S||S()}),[w,S,C]),L=(0,a().IS)((()=>({outliner:{display:"block"},outlinerItem:{paddingTop:5,paddingBottom:x&&I?3.5:5,paddingLeft:"team"===C.type?16:8,...A&&"team"===C.type?{paddingLeft:p().ph+p().RD}:void 0}})),[A,C.type,x,I]);return g&&f&&j?(0,m.jsx)(u().A,{from:y,type:C.type,disabled:!M,itemDepth:0,childStores:j,parentStore:B,style:L.outliner,itemStyle:L.outlinerItem,onNavigate:P,id:b,"aria-labelledby":e["aria-labelledby"],isHeaderless:v,...h}):null}const h=r.memo((e=>{const{type:t,sidebarState:o,contentsAriaId:n,labelAriaId:i,isHeaderless:a}=e,s=(0,r.useMemo)((()=>({type:t})),[t]);return(0,m.jsx)(S,{state:s,sidebarState:o,id:n,"aria-labelledby":i,isHeaderless:a,from:"main_sidebar"})}));h.displayName="MemoizedTopLevelSidebarOutliner"},420767:(e,t,o)=>{o.d(t,{B:()=>n});o(296540);var r=o(474848);const n=(0,o(340498).wt)("doubleChevronLeft",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M7.07031 13.8887C7.2207 14.0391 7.40527 14.1211 7.62402 14.1211C8.06836 14.1211 8.41699 13.7725 8.41699 13.3281C8.41699 13.1094 8.32812 12.9043 8.17773 12.7539L3.37207 8.05762L8.17773 3.375C8.32812 3.21777 8.41699 3.0127 8.41699 2.80078C8.41699 2.35645 8.06836 2.00781 7.62402 2.00781C7.40527 2.00781 7.2207 2.08984 7.07031 2.24023L1.73828 7.44922C1.56055 7.62012 1.46484 7.8252 1.46484 8.06445C1.46484 8.29688 1.55371 8.49512 1.73828 8.67969L7.07031 13.8887ZM13.1748 13.8887C13.3252 14.0391 13.5098 14.1211 13.7354 14.1211C14.1797 14.1211 14.5283 13.7725 14.5283 13.3281C14.5283 13.1094 14.4395 12.9043 14.2891 12.7539L9.4834 8.05762L14.2891 3.375C14.4395 3.21777 14.5283 3.0127 14.5283 2.80078C14.5283 2.35645 14.1797 2.00781 13.7354 2.00781C13.5098 2.00781 13.3252 2.08984 13.1748 2.24023L7.84961 7.44922C7.66504 7.62012 7.57617 7.8252 7.56934 8.06445C7.56934 8.29688 7.66504 8.49512 7.84961 8.67969L13.1748 13.8887Z"})})},477293:(e,t,o)=>{o.d(t,{r:()=>i});var r=()=>o(56366),n=()=>o(508496);function i(e){return(0,r().K8)((()=>n().default.getGroup(e)),[e])}},556048:(e,t,o)=>{o.d(t,{C8:()=>p,Dz:()=>l,GC:()=>S,GL:()=>h,YY:()=>m,dM:()=>c,h9:()=>d,jX:()=>s,oF:()=>u,uj:()=>a});var r=()=>o(645873);const n={JiraSyncInfoPopup:new(r().O2)("JiraSyncInfoPopup",(async()=>await Promise.all([o.e(75134),o.e(68744)]).then(o.bind(o,408453)))),ImproveJiraSyncPopup:new(r().O2)("ImproveJiraSyncPopup",(async()=>await Promise.all([o.e(75134),o.e(2686)]).then(o.bind(o,484967)))),JiraDCAuthModal:new(r().O2)("JiraDCAuthModal",(async()=>await o.e(28763).then(o.bind(o,992567)))),ExternalImportAndSyncIndicator:new(r().O2)("ExternalImportAndSyncIndicator",(async()=>await o.e(98288).then(o.bind(o,984289)))),JiraSyncedAllProjectsTooltip:new(r().O2)("JiraSyncedAllProjectsTooltip",(async()=>await Promise.all([o.e(23806),o.e(21446)]).then(o.bind(o,470020)))),JiraSyncedAllIssuesTooltip:new(r().O2)("JiraSyncedAllIssuesTooltip",(async()=>await Promise.all([o.e(23806),o.e(21446)]).then(o.bind(o,470020)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(r().O2)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await Promise.all([o.e(23806),o.e(21446)]).then(o.bind(o,470020)))),JiraSyncSourceTooltip:new(r().O2)("JiraSyncSourceTooltip",(async()=>await Promise.all([o.e(23806),o.e(21446)]).then(o.bind(o,470020)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(r().O2)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await Promise.all([o.e(23806),o.e(21446)]).then(o.bind(o,470020))))},i={JiraSyncTeamSpaceModal:new(r().O2)("JiraSyncTeamSpaceModal",(async()=>Promise.all([o.e(23806),o.e(56188)]).then(o.bind(o,604698))))},a=(0,r()._h)(i.JiraSyncTeamSpaceModal,(e=>e.default)),s=(0,r()._h)(n.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),l=(0,r()._h)(n.JiraDCAuthModal,(e=>e.default)),d=(0,r()._h)(n.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),c=(0,r()._h)(n.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),u=(0,r()._h)(n.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),p=(0,r()._h)(n.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),m=(0,r()._h)(n.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),S=(0,r()._h)(n.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),h=(0,r()._h)(n.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator));(0,o(340498).xh)("jira",{default:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:20},small:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:16},mini:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:14},large:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:24}})},640945:(e,t,o)=>{o.d(t,{X:()=>v});o(898992),o(354520),o(672577),o(803949),o(581454);var r=o(296540),n=()=>o(484714),i=()=>o(56366),a=()=>o(187174),s=()=>o(921997),l=()=>o(519831),d=()=>o(763824),c=()=>o(963589),u=()=>o(941541),p=()=>o(351360),m=()=>o(630116),S=()=>o(634157);const h=new(o(299919).Y)((e=>new b(e)));class b extends(()=>o(757695))().default{constructor(e){super(),this.collectionStore=void 0,this.collectionStore=e}getInitialState(){return{createdTime:-1/0,createdById:void 0}}getLatestPostCreatedTime(){return this.state.createdTime}getLatestPostCreatedById(){return this.state.createdById}async refresh(e){const{environment:t}=e;if(!t.currentUser.id)return;if(await this.collectionStore.load(),!this.collectionStore.isDefined())return;const r=await o(449506).callApi({eventName:"getLatestPostCreated",environment:t,data:{spaceId:this.collectionStore.getSpaceId(),collectionId:this.collectionStore.id}});"success"===r.type&&r.data&&this.setState(r.data)}}function v(){const e=(0,c().X)("posts_feed_on_home"),t=(0,c().X)("posts_unread_badge"),o=(0,i().K8)((()=>{var e;return null===(e=p().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),b=function(e){const t=(0,n().v3)(),o=(0,i().K8)((()=>{var t;return null==e||null===(t=e[0])||void 0===t?void 0:t.getSpaceId()}),[e]),l=(0,r.useMemo)((()=>e.map((e=>h.get(e)))),[e]);return(0,a().Yb)((async()=>await d().lX(l,10,(e=>e.refresh({environment:t})))),[l,t]),(0,r.useEffect)((()=>{if(!o)return;const e=l.map((e=>u().Ay.addListener((0,s().eG)(e.collectionStore.id),void 0,(0,u().AY)((async(o,r)=>await e.refresh({environment:t}))),void 0,t)));return()=>{e.forEach((e=>{e&&u().Ay.removeListener(e,t)}))}}),[l,o,t]),l}((0,i().K8)((()=>{if(!e||!t)return[];const r=p().default.state.currentSpaceStore;if(!o||!r)return[];return S().A.getJoinedTeamStores({userId:o,spaceStore:r}).map((e=>m().md.createChildStore(e,{table:l().Vl,id:e.id,spaceId:r.id}))).filter((e=>e.isDefined()))}),[e,t,o]));return(0,i().K8)((()=>{var e;if(!p().default.state.currentSpaceStore)return!1;const t=(null===(e=p().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getKeyStore("settings").getKeyStore("last_opened_aggregated_feed").getValue())??0;return b.find((e=>!!e.getLatestPostCreatedById()&&(!(e.getLatestPostCreatedTime()<=t)&&e.getLatestPostCreatedById()!==o)))}),[b,o])}},667193:(e,t,o)=>{o.d(t,{p:()=>a});var r=()=>o(484714),n=()=>o(56366),i=()=>o(186445);function a(){const e=(0,r().v3)();return(0,n().O$)((0,i().rp)(e))}},679915:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var r=()=>o(401497),n=()=>o(305837),i=()=>o(959013),a=()=>o(541258),s=o(474848);const l=function(e){let{hasActivePlan:t}=e;const r=(0,o(484714).v3)(),n=t?(0,s.jsx)(i().sA,{id:"upgradeMobileButton.manageButton.label",defaultMessage:"Manage Plan"}):(0,s.jsx)(i().sA,{id:"upgradeMobileButton.upgradeButton.label",defaultMessage:"Upgrade Plan"});return(0,s.jsx)(o(704152).A,{mobileFeedback:!0,onClick:d(r),children:(0,s.jsx)(o(490044).A,{left:(0,s.jsx)(c,{}),disableMobileBorder:!0,children:n})})};function d(e){return()=>{const{mobileNative:t}=e;t&&t.openUpgradeModal(a().LU(),"mobile_sidebar")}}function c(){const e=(0,r().DP)();return(0,n().H)({fill:e.mediumIconColor,width:16})}},754527:(e,t,o)=>{o.d(t,{Q:()=>b});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454);var r=o(296540),n=()=>o(484714),i=()=>o(56366),a=()=>o(854150),s=()=>o(959013),l=()=>o(629875),d=()=>o(836251),c=()=>o(351360),u=()=>o(633892),p=()=>o(998109),m=()=>o(768148),S=()=>o(962877),h=o(474848);function b(e){let{teamStore:t,sidebarState:o,isLastTeam:r,initialToggleState:b,shouldPersistToggleState:y,customToggleStore:g,teamOutlinerType:f,onNavigate:w,sidebarTourStep:A,from:x}=e;const{currentSpaceStore:I,currentSpaceViewStore:T,currentUserSettingsStore:M}=(0,i().K8)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:t,currentUserSettingsStore:o}=c().default.state;return{currentSpaceStore:e,currentSpaceViewStore:t,currentUserSettingsStore:o}}),[]),C=(0,i().uB)(void 0,u().A),_=g??C,j=(0,i().K8)((()=>t.getTeamPagesStores()),[t]),B=(0,n().v3)(),P=(0,n().Y0)(),L=(0,i().K8)((()=>{const e=c().default.state.mainEditorCurrentBlockStore;return(null==e?void 0:e.getParentTable())===a().yK&&(null==e?void 0:e.getParentId())===t.id&&!P.isMobile&&_.state.isHidden}),[P.isMobile,t.id,_]),k=(0,i().K8)((()=>L||(0,d().Gn)({teamStore:t,environment:B})),[B,L,t]);return I&&T&&M?(0,h.jsx)(l().Ay,{type:"team",from:"main_sidebar",outlinerToggleButtonStore:_,forceHoveredButtonStyle:L,initialToggleState:b,shouldPersistToggleState:y,teamHeaderLabel:(0,h.jsx)(m().j,{teamStore:t,withSelectedStyle:k}),teamStore:t,spaceStore:I,spaceViewStore:T,showAddButton:!1,isLastTeam:r,teamOutlinerType:f,labelTooltip:(0,h.jsx)(s().sA,{defaultMessage:"One of your teams",id:"sidebar.teamSection.tooltip"}),marginBottomOverrideWhenExpanded:P.isMobile?0:16,marginBottomOverrideWhenCollapsed:P.isMobile?0:1,renderSidebar:e=>{let{labelAriaId:r,contentsAriaId:n}=e;if(!t)return;const i=new Set(j.map((e=>e.id))),a=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(v,{teamSectionType:f,sidebarState:o,teamStore:t,onNavigate:w,labelAriaId:r,contentsAriaId:n,from:x}),(0,h.jsx)(S().c,{numTeamPages:i.size,teamStore:t})]});return A?(0,h.jsx)(p().n,{step:A,children:a}):a}}):null}const v=r.memo((function(e){const{teamSectionType:t,teamStore:n,sidebarState:i,contentsAriaId:a,onNavigate:s,labelAriaId:l,from:d}=e,c=(0,r.useMemo)((()=>({type:"team",teamSectionType:t,teamStore:n})),[t,n]),u=(0,r.useMemo)((()=>({id:a,"aria-labelledby":l})),[a,l]);return(0,h.jsx)(o(388601).o,{state:c,sidebarState:i,onNavigate:s,additionalOutlinerProps:u,from:d})}))},768148:(e,t,o)=>{o.d(t,{j:()=>u});o(296540);var r=()=>o(484714),n=()=>o(56366),i=()=>o(401497),a=()=>o(284371),s=()=>o(554509),l=()=>o(37433),d=()=>o(345578),c=o(474848);function u(e){let{teamStore:t,withSelectedStyle:o,style:u,shouldUseStyledText:p}=e;const m=(0,r().Y0)(),S=(0,n().K8)((()=>{var e;return{teamName:t.getName()??"",shouldShowLock:(0,l().tM)(null==t||null===(e=t.getSettingsStore())||void 0===e?void 0:e.getValue())}}),[t]),h=(0,i().IS)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden"},lockIcon:{width:15,marginLeft:6,marginBottom:1,fill:e.mediumIconColor},labelText:{...a().RC,color:o?e.regularTextColor:e.darkTextColor,fontWeight:a().Wy.medium,fontSize:m.isMobile?a().J.UIRegular.mobile:a().J.UIRegular.desktop,...u}})),[m.isMobile,o,u]);return S?(0,c.jsxs)("div",{style:h.container,children:[p?(0,c.jsx)(s().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:S.teamName}):(0,c.jsx)("div",{style:h.labelText,children:S.teamName}),S.shouldShowLock&&(0,c.jsx)(d().A,{iconStyle:h.lockIcon})]}):null}},837822:(e,t,o)=>{o.d(t,{ke:()=>T,xw:()=>M,Ay:()=>_,aQ:()=>C});var r=o(296540),n=()=>o(56366),i=()=>o(401497),a=()=>o(79275),s=()=>o(959013),l=()=>o(35392),d=()=>o(296798),c=()=>o(859428),u=()=>o(490044),p=()=>o(694874),m=()=>o(696746),S=()=>o(962730),h=()=>o(351360),b=()=>o(551694),v=()=>o(487941),y=()=>o(846955),g=()=>o(644914),f=()=>o(645873);const w={LazyAiLandingPageExperimentSwitcher:new(f().O2)("LazyAiLandingPageExperimentSwitcher",(()=>o.e(66169).then(o.bind(o,651591))))},A=(0,f()._h)(w.LazyAiLandingPageExperimentSwitcher,(e=>e.AiLandingPageExperimentSwitcher));var x=o(474848);function I(e){const{styles:t}=e,b=(0,o(484714).v3)(),f=(0,s().tz)(),w=(0,n().K8)((()=>{const{currentSpaceViewStore:e}=h().default.state;if(e)return m().x$(e)}),[]),I=(0,n().K8)((()=>{const e=h().default.state.mainEditorCurrentBlockStore;return!!e&&m().Nh(e.id)}),[]),T=(0,n().K8)((()=>"home_available"===y().default.getState().type),[]),_=(0,n().K8)((()=>{var e;return null==w||null===(e=w.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:null==w?void 0:w.getRecordModel,pageVisitSource:o(584262).y8.SidebarHome})}),[w]),j=(0,o(640945).X)(),B=(0,o(327300).w4)(),P=(0,n().O$)(o(430483).ts),[L,k]=(0,r.useState)(!1),[V,O]=(0,r.useState)(!1),H=(0,r.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,o(819121).p)(t)&&O(!0)}),[]),J=(0,r.useCallback)((()=>{O(!1)}),[]),K=(0,r.useCallback)((()=>{o(353643).A.state.isDragging||k(!0)}),[]),E=(0,r.useCallback)((()=>{k(!1)}),[]),N=(0,n().uB)(void 0,v().A),U=(0,n().uB)(void 0,v().A),F=(0,n().K8)((()=>U.state.focused||U.state.hovered),[U]),D=(0,r.useCallback)((()=>{(0,p().Wy)(b),(0,o(162674).ZL)({environment:b,from:"sidebar"}),T&&(0,p().tL)(b),o(441199).default.isVisible()&&(0,o(770906).VI)({environment:b})}),[b,T]),W=(0,g().ab)(),z=(0,i().IS)((e=>({tooltip:{width:200},leftContainer:{position:"relative"},shortcutLabel:{color:e.text.contrastSecondary},linkBoxStyle:{...W.baseSidebarItem,...I&&W.currentSelectedSidebarItem},homeIconStyle:{...W.topButtonIcon,...I&&W.currentSelectedSidebarIcon}})),[I,W]),R=(0,r.useMemo)((()=>B.showAiFaceInHomeIcon?P?(0,o(366295).L)(W.topButtonIcon):(0,o(654601).X)({width:16}):(0,a().X)(z.homeIconStyle)),[B.showAiFaceInHomeIcon,P,z.homeIconStyle,W.topButtonIcon]),X=(0,r.useCallback)((()=>F?"":(0,x.jsxs)("div",{style:z.tooltip,children:[(0,x.jsx)("div",{children:f.formatMessage(C.tooltip)}),(0,x.jsx)(l().A,{style:z.shortcutLabel,name:"openHome"})]})),[F,f,z.shortcutLabel,z.tooltip]);return(0,x.jsx)(c().A,{store:N,renderTooltip:X,disableTooltip:T,originGap:6,textWrap:!0,placement:S().W.Right,render:e=>(0,x.jsx)(d().A,{...e,style:z.linkBoxStyle,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,href:_,onClick:D,"aria-current":I?"page":void 0,children:(0,x.jsx)(u().A,{left:(0,x.jsxs)("div",{style:z.leftContainer,children:[R,j&&(0,x.jsx)(M,{})]}),disableMobileBorder:!0,right:(0,x.jsx)(A,{isHovered:L,isFocused:V,tooltipStore:U,parentTooltipStore:N}),onMouseMove:K,onMouseLeave:E,onFocus:H,onBlur:J,children:f.formatMessage(C.label)})})})}function T(e){const{styles:t}=e,o=(0,n().K8)((()=>"home_available"===y().default.getState().type),[]),r=(0,g().ab)(),p=(0,i().IS)((e=>({tooltip:{width:200},shortcutLabel:{color:e.text.contrastSecondary}})),[]);return(0,x.jsx)(c().A,{renderTooltip:()=>(0,x.jsxs)("div",{style:p.tooltip,children:[(0,x.jsx)("div",{children:(0,x.jsx)(s().sA,{id:"sidebarPersonalHomeButton.tooltip",defaultMessage:"View recent pages and more"})}),(0,x.jsx)(l().A,{style:p.shortcutLabel,name:"openHome"})]}),disableTooltip:o,originGap:6,textWrap:!0,placement:S().W.Right,render:e=>(0,x.jsx)(d().A,{...e,style:r.baseSidebarItem,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,onClick:()=>{b().A.open()},children:(0,x.jsx)(u().A,{left:(0,a().X)(r.topButtonIcon),disableMobileBorder:!0,children:(0,x.jsx)(s().sA,{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"})})})})}function M(e){const{top:t=0,right:o=-3}=e,r=(0,i().IS)((e=>({unreadBadge:{backgroundColor:e.redBadgeBackground,position:"absolute",top:t,right:o,width:8,height:8,borderRadius:4,border:`1px solid ${e.surface.wash}`}})),[t,o]);return(0,x.jsx)("div",{style:r.unreadBadge})}const C=(0,s().YK)({tooltip:{id:"sidebarPersonalHomeButton.tooltip",defaultMessage:"View recent pages and more"},label:{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"}}),_=r.memo(I)},913507:(e,t,o)=>{o.d(t,{A:()=>A,B:()=>M});var r=o(296540),n=()=>o(484714),i=()=>o(56366),a=()=>o(180566),s=()=>o(959013),l=()=>o(797265),d=()=>o(317909),c=()=>o(989423),u=()=>o(553965),p=()=>o(362749),m=()=>o(644914),S=()=>o(496067),h=()=>o(718807),b=()=>o(351360),v=()=>o(704152),y=()=>o(406699),g=()=>o(199896),f=()=>o(490044),w=o(474848);const A=function(e){let{store:t,onClick:o,onMouseEnter:a,onMouseLeave:s,buttonStyles:l,isMobile:d}=e;const c=(0,n().v3)(),u=(0,r.useCallback)((e=>(0,w.jsx)(T,{store:t,onClick:o,onMouseEnter:a,onMouseLeave:s,buttonStyles:l,isMobile:d,buttonPopupEvents:e})),[t,o,a,s,l,d]),{device:p,mobileNative:m}=c,h=(0,i().K8)((()=>(null==m?void 0:m.supportsNativeHomeOnPhone())||!1),[m]);return(0,w.jsx)(y().Ay,{popupType:p.isMobile?y().z7.SlideUp:y().z7.Popup,hidesMobileNativeBottomBar:h,preventSlideUpTransition:h,buttonPopupStore:S().A,alignmentToOrigin:y().yP.Start,placementToOrigin:y().sx.Right,originGap:0,onClick:e=>I(e,c),isFullWidthOnMobile:!0,render:()=>(0,w.jsx)(x,{}),preventScaleTransition:!0,renderOrigin:u})};function x(){return(0,i().K8)((()=>b().default.state.currentSpaceStore),[])?(0,w.jsx)(p().V2,{}):null}function I(e,t){h().Ay.setState({...h().Ay.state,currentTab:"all_pages"}),function(e){c().vd(e,"open_trash",(0,m().hX)({environment:e}))}(t)}function T(e){let{store:t,buttonPopupEvents:o,onClick:c,onMouseEnter:p,onMouseLeave:h,buttonStyles:b,isMobile:y}=e;const A=(0,n().v3)(),{onClick:x,...T}=(0,r.useMemo)((()=>(0,u().A)(o,{onClick:c,onMouseEnter:p,onMouseLeave:h})),[o,c,p,h]),M=(0,r.useMemo)((()=>t.clone()),[t]),C=(0,i().O$)(S().A),_=(0,m().ab)();return(0,w.jsx)(g().A,{store:M,canDropOnto:!0,onSelectableDrop:e=>function(e,t){const{droppedStores:o,duplicate:r}=e;r||d().createAndCommit({userAction:"SidebarTrashButton.handleDrop",environment:t,canUndo:!0,perform:e=>{l().ZL({environment:t,blocks:o,transaction:e})}})}(e,A),analyticsName:"sidebar_trash",shouldShowDropZone:!0,children:(0,w.jsx)(v().A,{...T,style:{..._.baseSidebarItem,...C.open&&_.currentSelectedSidebarItem},hoveredStyle:null==b?void 0:b.hoveredStyle,onClick:x||(e=>I(0,A)),mobileFeedback:y,children:(0,w.jsx)(f().A,{left:(0,a().Q)(_.bottomButtonIcon),disableMobileBorder:!0,isBottomItem:!0,children:(0,w.jsx)(s().sA,{defaultMessage:"Trash",id:"sidebarTrashButton.text"})})})})}function M(e){const{buttonStyles:t,isMobile:o,...r}=e,n=(0,m().ab)();return(0,w.jsx)(v().A,{...r,style:{...n.baseSidebarItem},hoveredStyle:null==t?void 0:t.hoveredStyle,mobileFeedback:o,children:(0,w.jsx)(f().A,{left:(0,a().Q)(n.bottomButtonIcon),disableMobileBorder:!0,isBottomItem:!0,children:(0,w.jsx)(s().sA,{defaultMessage:"Trash",id:"sidebarTrashButton.text"})})})}},966711:(e,t,o)=>{o.d(t,{m:()=>i});var r=()=>o(56366),n=()=>o(396301);function i(){return(0,r().K8)((()=>(0,n().VR)()),[])}}}]);