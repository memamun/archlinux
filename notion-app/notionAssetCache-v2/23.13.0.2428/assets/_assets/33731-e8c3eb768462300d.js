"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[33731],{14243:(e,t,s)=>{s.r(t),s.d(t,{SpaceSettings:()=>kh,UserName:()=>mh});s(16280);var i=s(296540),n=()=>s(804773),a=()=>s(484714),o=()=>s(852507),r=()=>s(56366),l=()=>s(401497),d=()=>s(449552),c=()=>s(901497),u=()=>s(206267),g=()=>s(762433),p=()=>s(979340),m=()=>s(959013),f=()=>s(496603),h=()=>s(284371),S=()=>s(746970),x=()=>s(881738),v=()=>s(559926),y=()=>s(278768),b=()=>s(901389),j=()=>s(209660),A=()=>s(755636),C=()=>s(426116),w=()=>s(804411),M=()=>s(72234),T=()=>s(317909),k=()=>s(755199),I=(s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(803949),()=>s(604995)),D=()=>s(416845),P=()=>s(386164),R=()=>s(348564),_=()=>s(824862),B=()=>s(798880),U=()=>s(449506),E=()=>s(898486),L=()=>s(972435),O=()=>s(106628),W=()=>s(230357),z=()=>s(757695);class q extends z().default{getInitialState(){return{spaceId:void 0,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set}}isUserOrBotRemoved(e){return Boolean(e&&(this.state.removedUserIds.has(e)||this.state.removedBotIds.has(e)))}}const F=new q;class N extends z().default{getInitialState(){return{cachedResponses:{}}}getCursor(e,t,s){if(s<=1||this.state.spaceId!==e)return;const i=(0,W()._)(t);if(this.state.filterStr!==i)return;const n=this.state.cachedResponses[s-1];return"success"===n.status?null==n?void 0:n.nextCursor:void 0}startLoading(e,t){this.updateResultHelper(e,t,{status:"loading"})}updateLoadedResult(e,t,s){this.updateResultHelper(e,t,{...s,status:"success",loadedAt:Date.now()})}updateError(e,t){this.updateResultHelper(e,t,{status:"error"})}updateResultHelper(e,t,s){const i=(0,W()._)(t);1!==t.pageNum&&this.state.spaceId===e&&this.state.filterStr===i?this.setState({spaceId:e,filterStr:i,cachedResponses:{...this.state.cachedResponses,[t.pageNum]:{...s}}}):this.setState({spaceId:e,filterStr:i,cachedResponses:{[t.pageNum||1]:{...s}}})}}const K=new N,G=(0,m().YK)({loadCurrentAuditLogError:{id:"auditlog.error.loadCurrentAuditLogError",defaultMessage:"Failed to load audit logs"}});async function V(e){const{environment:t,spaceId:s}=e,i=await U().callApi({eventName:"getHistoricalAuditLogUsers",environment:t,data:{spaceId:s}});return"success"!==i.type?[]:i.data.results}async function H(e){const{environment:t,spaceId:s}=e;if(F.getState().spaceId!==s&&F.reset(),!s)return;const i=await O().T.searchActions.load(),[n,a]=await Promise.all([i.searchSpaceActorIds({environment:t,membersOnly:!1}),V({environment:t,spaceId:s})]),o={spaceId:s,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set};n.userIds.forEach((e=>{o.allUserIds.add(e)})),n.botIds.forEach((e=>{o.allBotIds.add(e)})),a.forEach((e=>{var t;(t=e.actorId)!==_().eR.id&&t!==B().BF.id&&t!==B().mc.id||o.allUserIds.has(e.actorId)?e.actorType!==B().oo||o.allUserIds.has(e.actorId)?e.actorType!==_().GP||o.allBotIds.has(e.actorId)||(o.allBotIds.add(e.actorId),o.removedBotIds.add(e.actorId)):(o.allUserIds.add(e.actorId),o.removedUserIds.add(e.actorId)):o.allUserIds.add(e.actorId)})),F.setState(o)}var $=()=>s(416504),Y=()=>s(821879),Q=()=>s(46413),J=(s(354520),s(581454),()=>s(764880)),X=()=>s(824160),Z=()=>s(457688),ee=()=>s(630116),te=()=>s(30731),se=s(474848);const ie=(0,m().j4)((function(e){const{parentStore:t,auditLogHistoricalUserStore:n,selectedActors:o,onChange:r,intl:l}=e,d=(0,a().v3)(),[c,u]=(0,i.useState)(new Set(o.map(te().Ht))),g=(0,se.jsx)(m().sA,{id:"auditlogActorFilter.title",defaultMessage:"User"}),p=(0,i.useCallback)((()=>{const e=Array.from(c).map(te().Hl).filter((e=>void 0!==e));r(e)}),[c,r]),f=(0,i.useCallback)((()=>{const e=o.map(te().Ht);u(new Set(e))}),[o]),h=(0,i.useCallback)((e=>{"applyButton"!==e?f():p()}),[p,f]);return(0,se.jsx)(Y().A,{mode:Y().C.Pill,title:g,icon:s(91451).z,iconStyles:{marginRight:2},items:Array.from(c),hasItemsSelected:(null==o?void 0:o.length)>0,onChange:e=>{u(new Set(e))},renderFooter:!0,allowApplyBatchSelection:!0,keepInputOnItemConfirm:!0,onMenuDismiss:h,labelText:{title:g,tokenInputPlaceholder:l.formatMessage({defaultMessage:"Search user...",id:"auditlogActorFilter.searchActor.placeholder"}),resultSectionTitle:l.formatMessage({defaultMessage:"Select users",id:"auditlogActorFilter.searchActor.resultsTitle"}),componentDebugName:"SearchActorFilter"},performRequest:e=>async function(e){let{args:t,auditLogHistoricalUserStore:s,selectedActors:i,environment:n}=e;const{query:a}=t,{allUserIds:o,allBotIds:r}=s.getState(),l=100,d=await O().T.searchActions.load(),c=await d.searchActorsById({environment:n,query:a,userIds:[...o],botIds:[...r]}),u=[...c.users.map((e=>`notion_user:${e.id}`)),...c.bots.map((e=>`bot:${e.id}`))];if(a.length>0)return u.slice(0,l);const g=i.map(te().Ht),p=new Set(g),m=u.filter((e=>!p.has(e)));return[...g,...m].slice(0,Math.max(g.length,l))}({args:e,auditLogHistoricalUserStore:n,selectedActors:o,environment:d}),renderResultMenuItem:(e,s)=>{var i;const a=function(e,t){const s=(0,te().Hl)(e);if(!s)return(0,J().MR)(void 0);if("notion_user"===s.actorType)return(0,J().MR)(function(e,t){const s=ee().LU.createChildStore(t,{table:B().oo,id:e});return s.getModel()}(s.actorId,t));return(0,J().oC)(function(e,t){const s=ee().vK.createChildStore(t,{table:_().GP,id:e});return s.getModel()}(s.actorId,t))}(e,t);return(0,se.jsx)(ne,{...s,item:e,tempActorSelections:c,showRemovedBadge:n.isUserOrBotRemoved(null===(i=a.asActor)||void 0===i?void 0:i.id),actor:a,intl:l})},renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})})),ne=(0,i.forwardRef)(((e,t)=>{const{item:s,intl:i,tempActorSelections:n,showRemovedBadge:a,actor:o}=e,l=(0,r().K8)((()=>(0,J().lR)(i,o)),[i,o]);return(0,se.jsx)(Z().A,{...e,ref:t,actor:o,useEmailAsTooltip:!0,checkState:n.has(s),userTitle:(0,se.jsxs)("div",{style:{display:"flex",gap:4},children:[l,a&&(0,se.jsx)(X().A,{children:(0,se.jsx)(m().sA,{id:"auditlogActorFilter.removed_user",defaultMessage:"Removed"})})]})})}));ne.displayName="ResultMenuItem";const ae=(0,m().YK)({auditLogNotSupportedDateRangeError:{id:"auditLog.dateTimeRangeMenu.notSupportedDateRange",defaultMessage:"Audit Log retains events from the past year."}});const oe=(0,m().j4)((function(e){const{spaceStore:t,intl:i}=e,[n,a]=(0,r().$y)(W().A),[o,l,d]=(0,r().$y)(F),c=(0,r().uB)(void 0,Q().D),u=(0,r().uB)(void 0,Q().D),g=(0,I().ah)((0,$().P)());return(0,se.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,se.jsx)(s(873066).A,{mode:Y().C.Pill,focused:!1,title:(0,se.jsx)(m().sA,{id:"auditlogDateFilter.title",defaultMessage:"Date"}),icon:s(563884).k,value:n.timeRange,showButtons:"footer",onChange:e=>{a({...n,timeRange:e,pageNum:1})},minDate:g.minus({years:1}),maxDate:g.endOf("day"),customErrorMessage:e=>{if(e===s(609989).$.NOT_SUPPORTED)return i.formatMessage(ae.auditLogNotSupportedDateRangeError)}}),(0,se.jsx)(ie,{parentStore:t,auditLogHistoricalUserStore:d,selectedActors:n.actors,onChange:e=>{a({...n,actors:e,pageNum:1})}}),(0,se.jsx)(s(237824).A,{lastSelectionStore:c,componentStore:u,onChange:e=>{a({...n,actions:e,pageNum:1})}})]})}));var re=()=>s(8178);function le(){return(0,se.jsx)(re().A,{large:!0,style:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:h().Wy.medium,display:"flex",justifyContent:"space-between"},children:(0,se.jsx)("div",{style:{gap:8,display:"flex"},children:(0,se.jsx)(m().sA,{id:"auditlog.title",defaultMessage:"Audit log"})})})}var de=()=>s(326346),ce=()=>s(884107),ue=()=>s(641300),ge=()=>s(704152),pe=()=>s(859428),me=()=>s(125565),fe=()=>s(47373),he=()=>s(962730),Se=()=>s(508496),xe=()=>s(623742);function ve(e){const{auditLogEntry:t,spaceStore:s,id:n}=e,a=(0,m().tz)(),o=(0,r().K8)((()=>{if(t.actor.actorType===B().oo){const e=ee().LU.createChildStore(s,{id:t.actor.actorId,table:B().oo});if(e.isDefined()&&!e.getIsDeleted())return{actorStore:e};if(t.actor.email)return{avatar:{name:t.actor.name,email:t.actor.email}}}else if(t.actor.actorType===_().GP){const e=ee().vK.createChildStore(s,{id:t.actor.actorId,table:_().GP});return e.isDefined()?{actorStore:e}:{avatar:{name:t.actor.name,email:t.actor.actorId}}}return{actorStore:void 0}}),[s,t]),d=(0,r().K8)((()=>{var e,t;if(o)return(null===(e=o.actorStore)||void 0===e?void 0:e.getDisplayName(a))??(null===(t=o.avatar)||void 0===t?void 0:t.name)}),[o,a]),c=(0,r().K8)((()=>{var e,t;if(o)return(null===(e=o.actorStore)||void 0===e?void 0:e.getDetail())??(null===(t=o.avatar)||void 0===t?void 0:t.email)}),[o]),u=(0,i.useMemo)((()=>{var e;if(t.actor.actorType===B().oo)return(0,xe().v)(null===(e=t.actor.meta)||void 0===e?void 0:e.spaceRole)}),[t]),g=(0,l().IS)((()=>({container:{display:"block",width:"100%",paddingBlock:6}})),[]),p=(0,i.createRef)();return(0,se.jsx)(pe().A,{disableTooltip:ye(p.current),renderTooltip:()=>(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{children:d}),(0,se.jsx)("div",{children:c})]}),placement:he().W.Bottom,render:e=>(0,se.jsx)("div",{...e,style:g.container,children:(0,se.jsx)(xe().A,{id:n,...o,spaceRole:u})})})}function ye(e){return!!e&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}var be=()=>s(617842);const je={id:"actor",headerTitle:(0,se.jsx)(m().sA,{id:"auditlog.logTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`;return(0,se.jsx)(ve,{spaceStore:e.spaceStore,auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:30},sortable:!1},Ae={id:"event",headerTitle:(0,se.jsx)(m().sA,{id:"auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,se.jsx)(s(17297).m,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:40},sortable:!1},Ce={id:"dateTimeAndMenu",headerTitle:(0,se.jsx)(m().sA,{id:"auditlog.logTable.dateColumn.header",defaultMessage:"Date"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`,i=`event-${e.auditLogEntry.actionName}-${e.id}`,n=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(s(829351).V,{auditLogEntry:e.auditLogEntry,id:n}),(0,se.jsx)(Te,{auditLogEntry:e.auditLogEntry,ids:{actorColumnId:t,eventColumnId:i,dateTimeColumnId:n}})]})},widthData:{width:25},sortable:!0},we=[je,Ae,Ce];function Me(){return(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40vh",flexDirection:"column"},children:[(0,se.jsx)("div",{children:(0,se.jsx)(me().A,{isSecondaryColor:!0,style:{fontWeight:500},children:(0,se.jsx)(m().sA,{id:"auditlog.logTable.noResults",defaultMessage:"No results"})})}),(0,se.jsx)(me().A,{isSecondaryColor:!0,children:(0,se.jsx)(m().sA,{id:"auditlog.logTable.noResultsHelpText",defaultMessage:"Try different filters. Logs may take some time to show up."})})]})}function Te(e){const{auditLogEntry:t,ids:i}=e,n=(0,r().K8)((()=>(0,fe().Qd)()),[]),o=(0,r().K8)((()=>Se().default.checkGate({gateName:"audit_log_event_name_column"})?de().HW:de().Gb),[]),d=(0,m().tz)(),c=(0,a().v3)(),u=(0,l().DP)(),g=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%"},button:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:28,borderRadius:6}})),[]);return(0,se.jsx)(pe().A,{delayThreshold:80,placement:he().W.Bottom,render:e=>(0,se.jsx)("div",{style:g.container,...e,children:(0,se.jsx)(ge().A,{style:g.button,onClick:async()=>{const e=await ce().R.clipboardActions.load();var s;e.copyString({environment:c,stringValue:(0,de().ZM)({auditLogEntry:t,intl:d,getAuditLogEventText:(s=i.eventColumnId,e=>{var t;return null===(t=document.getElementById(s))||void 0===t?void 0:t.textContent}),isTeamGuestsEnabled:n,csvColumnNames:o}),copiedMessage:e.clipboardMessages.copiedToClipboard})},children:(0,s(536583).d)({width:16,height:16,fill:u.mediumIconColor})})}),renderTooltip:()=>(0,se.jsx)(m().sA,{id:"AuditLogSettings.copyAuditLogEvent",defaultMessage:"Copy row"})})}const ke=(0,m().j4)((function(e){const{searchResponse:t,spaceStore:s}=e,[n,a]=(0,r().$y)(W().A),o=t.results||[],d=t.hasMoreResults,c=Boolean(o.length),u=e=>{const t={...n,pageNum:e};a(t)},g=(0,l().IS)((e=>(0,ue().rC)({columnRenderInfo:we,theme:e,containerMarginTop:0})),[]),p=o.map(((e,t)=>({id:t.toString(),auditLogEntry:e,spaceStore:s,isClickable:!1}))),f=(0,i.useCallback)((()=>{const e=n.sortOrder===R().K7.CreatedOldest?R().K7.CreatedNewest:R().K7.CreatedOldest;a({...n,sortOrder:e,pageNum:1})}),[n,a]),h=(0,i.useMemo)((()=>({column:Ce,sortAscending:n.sortOrder===R().K7.CreatedOldest})),[n]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ue().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:we,rows:p,sortState:h,onSortStateChanged:f,renderNoRowsComponent:Me,styles:g}),c?(0,se.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:[(0,se.jsx)(be().M,{onClick:()=>{u(n.pageNum-1)},disabled:1===n.pageNum,children:(0,se.jsx)(m().sA,{id:"auditlog.logTable.previousPage",defaultMessage:"Previous"})}),(0,se.jsx)(be().M,{disabled:!d,onClick:()=>{u(n.pageNum+1)},children:(0,se.jsx)(m().sA,{id:"auditlog.logTable.nextPage",defaultMessage:"Next"})})]}):null]})}));const Ie=(0,m().j4)((function(e){const{spaceStore:t}=e,n=(0,a().v3)(),o=null==t?void 0:t.id,[l]=(0,r().$y)(K),[d]=(0,r().$y)(W().A),c=(0,W()._)(d)!==l.filterStr?void 0:l.cachedResponses[d.pageNum];return(0,i.useEffect)((()=>{o&&async function(e){var t,s;const{environment:i,spaceId:n}=e,a=W().A.getState();K.startLoading(n,a);const{sortOrder:o,pageSize:r,pageNum:l}=a,d={spaceId:n,limit:r,cursor:K.getCursor(n,a,l),filters:{timeRange:{starting:a.timeRange.starting?I().C6.toUnixMs(a.timeRange.starting):void 0,ending:a.timeRange.ending?I().C6.toUnixMs(a.timeRange.ending):void 0},...(null===(t=a.actors)||void 0===t?void 0:t.length)>0?{actors:a.actors}:void 0,...(null===(s=a.actions)||void 0===s?void 0:s.length)>0?{actions:a.actions}:void 0},sort:o||R().K7.CreatedNewest},c=await U().callApi({eventName:"searchAuditLog",environment:i,data:d,headers:(0,P().WS)({spaceId:d.spaceId})});if("success"!==c.type)if(K.updateError(n,a),(0,D().op)(c.body)){const e=(0,E().Hu)(L().A.getIntl(),c);b().f1(e)}else b().f1(L().A.formatMessage(G.loadCurrentAuditLogError));else K.updateLoadedResult(n,a,c.data)}({environment:n,spaceId:o})}),[n,o,d]),(0,i.useEffect)((()=>{H({environment:n,spaceId:o})}),[n,o]),(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(le,{}),(0,se.jsxs)("div",{style:{justifyContent:"space-between",display:"flex",paddingTop:12,paddingBottom:12},children:[(0,se.jsx)(oe,{spaceStore:t}),(0,se.jsx)(s(652399).A,{parentStore:t})]}),"loading"===(null==c?void 0:c.status)&&(0,se.jsx)(s(366951).A,{}),"success"===(null==c?void 0:c.status)&&(0,se.jsx)(ke,{searchResponse:c,spaceStore:t})]})}));var De=()=>s(645873);const Pe=new(De().O2)("collectionDebugSettings",(()=>s.e(26403).then(s.bind(s,917682)))),Re=(0,De()._h)(Pe,(e=>e.CollectionDebugSettings)),_e={settingsTab:new(De().O2)("customEmojiSettings",(()=>s.e(10408).then(s.bind(s,656301))))},Be=(0,De()._h)(_e.settingsTab,(e=>e.CustomEmojiSettings)),Ue=new(De().O2)("SitesSettingsTab",(async()=>await Promise.all([s.e(23806),s.e(17989),s.e(56985),s.e(51860),s.e(43647),s.e(25700),s.e(78171)]).then(s.bind(s,466094)))),Ee=(0,De()._h)(Ue,(e=>e.SitesSettingsTab));var Le=()=>s(186445),Oe=()=>s(38337),We=()=>s(87878),ze=()=>s(310795),qe=()=>s(836251),Fe=()=>s(141966),Ne=()=>s(470928),Ke=()=>s(691298),Ge=()=>s(722038),Ve=()=>s(578150);const He=new(De().O2)("offlineModeDebugSettings",(()=>s.e(3551).then(s.bind(s,819494)))),$e=(0,De()._h)(He,(e=>e.OfflineModeDebugSettings));var Ye=()=>s(346),Qe=()=>s(287978),Je=()=>s(351360),Xe=()=>s(227440),Ze=()=>s(423219),et=()=>s(522094);class tt extends z().default{getInitialState(){return{status:"unconfigured",emailDomains:[],domainVerifications:[],spaces:[],createAccount:!1,useMetadataUrl:!0}}}const st=tt;var it=()=>s(132813),nt=()=>s(311670);class at extends z().default{getInitialState(){return{emailDomains:[],spaceCreation:"admins_only",settings:{}}}async updateValueForSpace(e){const{environment:t,spaceId:s,store:i}=e,n=await U().callApi({eventName:"getEmailDomainsForSpace",environment:t,data:{spaceId:s}});if("failed"===n.type)return void b().Qg(n);const{data:a}=n,o=Object.keys(a);return 0!==o.length?i.setState({emailDomains:o,spaceCreation:a[o[0]].spaceCreationEnum,settings:a[o[0]].settings}):i.setState(this.getInitialState()),i.state}}const ot=at;var rt=()=>s(678894),lt=()=>s(404141),dt=()=>s(309049),ct=()=>s(762299),ut=()=>s(224701),gt=()=>s(340498);const pt=(0,gt().xh)("paperPlane",{default:{loader:()=>s.e(88568).then(s.bind(s,588568))},small:{loader:()=>s.e(75694).then(s.bind(s,575694))},mini:{loader:()=>s.e(22390).then(s.bind(s,622390))},large:{loader:()=>s.e(80070).then(s.bind(s,480070))}});var mt=()=>s(366295),ft=()=>s(654601),ht=()=>s(84817),St=()=>s(460292),xt=()=>s(554509),vt=()=>s(864943),yt=()=>s(430483),bt=()=>s(19575),jt=()=>s(991249),At=()=>s(65250),Ct=()=>s(324561),wt=()=>s(183819),Mt=()=>s(749240),Tt=()=>s(847554);function kt(e){let{currentSettingsTab:t}=e;const s=(0,a().v3)(),n=(0,l().IS)((e=>({aiIcon:{width:16,height:16,color:e.icon.purplePrimary},assistantIcon:{width:16,height:16},buttonStyle:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:6,borderRadius:6,border:`1px solid ${e.stroke.primary}`}})),[]),o=(0,At().QD)()&&!["plans","billing"].includes(t),d=(0,r().O$)(yt().ts),c=function(){const e=(0,wt().q)(),t=(0,r().K8)((()=>{var e;return null===(e=Je().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),s=(0,Ct().f_)({spaceId:t}),i=(0,r().O$)(Mt().subscriptionDataStoreInstance),n=(0,Tt().b)(i);return"eligible"===e&&(s&&(0,g().Fq)(s)&&!(0,p().sP)((0,g().AI)(s))||n>5)}(),u=i.useMemo((()=>c?{onClick:()=>(0,bt().lK)({openedFrom:"settings_sidebar"}),text:(0,se.jsx)(m().sA,{id:"settingsUpsellButton.contactSales",defaultMessage:"Chat with Sales"}),icon:(0,se.jsx)(St().Q,{iconGroup:pt,colorName:"primary",variantName:"default"})}:o?{onClick:()=>{jt().K(s,{from:"ai_upsell_settings",upsell:{type:"product",product:"ai",limit:{type:"none"}}})},text:(0,se.jsx)(m().sA,{id:"AddOnUpsellNudge.title",defaultMessage:"Get unlimited AI"}),icon:d?(0,mt().L)(n.assistantIcon):(0,ft().X)(n.aiIcon)}:void 0),[c,o,d,n,s]);return u?(0,se.jsx)(ht().Y1,{direction:"vertical",padding:16,align:"center-left",children:(0,se.jsxs)(vt().A,{size:"lg",onClick:u.onClick,style:n.buttonStyle,children:[u.icon,(0,se.jsx)(xt().D,{styleName:"UIRegular-14px/Medium",children:u.text})]})}):null}var It=()=>s(354229),Dt=()=>s(843878),Pt=()=>s(452317),Rt=()=>s(493823);const _t=(0,m().YK)({apply_credit:{id:"spaceSubscriptionBilling.applyCreditButton.label",defaultMessage:"Apply credit"},update:{id:"spaceSubscriptionBilling.updateButton.label",defaultMessage:"Update"},add:{id:"spaceSubscriptionBilling.addButton.label",defaultMessage:"Add"},apply:{id:"spaceSubscriptionBilling.apply.label",defaultMessage:"Apply"}});const Bt=(0,m().j4)((function(e){const t=(0,l().DP)(),s={marginLeft:18,marginRight:-4,fontWeight:h().Wy.medium},{title:i,caption:n,buttonArgs:a}=e,o=(0,se.jsx)(m().sA,{..._t[a.buttonPurpose]});return(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:14},children:[(0,se.jsx)("div",{style:{marginRight:"auto"},children:i}),(0,se.jsx)("div",{style:{color:t.mediumTextColor},children:n}),(0,se.jsx)("div",{style:{minWidth:110,display:"flex",justifyContent:"flex-end"},children:a.showButton&&(0,se.jsx)(Rt().p,{isBlue:!0,onClick:a.onClick,style:s,children:o})})]})}));const Ut={workspaceBalance:(0,se.jsx)(m().sA,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.workspaceSubscriptionBalance.title",defaultMessage:"Workspace balance"}),applyCoupon:(0,se.jsx)(m().sA,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.applyCoupon.title",defaultMessage:"Apply coupon"}),discount:(0,se.jsx)(m().sA,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.discount.title",defaultMessage:"Discount"})};var Et=()=>s(714300),Lt=()=>s(517492);const Ot={height:"100%",padding:"36px 60px"},Wt={display:"flex",flexDirection:"column",height:"100%"};const zt=function(e){let{data:t,spaceStore:i}=e;const n=(0,a().v3)(),l=(0,r().uB)(void 0,s(23954).A),d=(0,m().tz)(),c=(0,r().O$)(Xe().A),u=(0,r().O$)(l),g=(0,Et().l)({spaceId:i.id});return(0,o().l)((()=>{ut().Ow(n),ut().L1(n,l)})),c.online?(0,se.jsx)("div",{style:Wt,children:(0,se.jsxs)(s(2143).H,{style:Ot,type:s(756279).A.Y,children:[(0,se.jsx)(re().A,{large:!0,divider:"full",children:(0,se.jsx)(m().sA,{...Pt().DZ.billingTab})}),(0,se.jsx)(qt,{data:t,billingData:g}),(0,se.jsx)(Ft,{}),(0,se.jsx)(s(883373).g,{spaceStore:i,events:u.billingEvents,upcomingInvoiceData:void 0})]})}):(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(me().A,{isSmall:!0,style:{textAlign:"center"},children:d.formatMessage(It().D.offline)})})};function qt(e){let{data:t,billingData:s}=e;const i=(0,g().Ry)(s);if(!i)return null;const n=-Math.min(0,t.accountBalance);return(0,se.jsx)(Bt,{title:Ut.workspaceBalance,caption:(0,se.jsx)("div",{children:(0,se.jsx)(Lt().v,{cost:{amount:n,currencyCode:i},trailingZeroDisplay:"stripIfInteger"})}),buttonArgs:{showButton:!1,buttonPurpose:"apply_credit",onClick:f().lQ}})}function Ft(){return(0,se.jsx)("div",{style:{flex:"none",marginTop:30}})}var Nt=()=>s(807778),Kt=()=>s(134217),Gt=()=>s(972418),Vt=()=>s(58293);var Ht=()=>s(660723),$t=()=>s(128265),Yt=()=>s(479314),Qt=()=>s(742117),Jt=()=>s(706024),Xt=()=>s(946548),Zt=()=>s(21140),es=()=>s(459401),ts=()=>s(721672),ss=()=>s(573660),is=()=>s(477657),ns=()=>s(238453),as=()=>s(989423),os=()=>s(118849),rs=()=>s(870092),ls=()=>s(568688);var ds=()=>s(383716);const cs=4;function us(e){let{securitySettingsStore:t,spaceStore:s}=e;const i=(0,m().tz)(),n=(0,l().IS)((()=>({horizontalScrollWrapper:{minWidth:750}})),[]);return(0,se.jsxs)(ht().Y1,{direction:"vertical",padding:"36px 60px",style:n.horizontalScrollWrapper,children:[(0,se.jsxs)(ht().Y1,{direction:"vertical",gap:16,children:[(0,se.jsx)(ds().n,{title:i.formatMessage(xs.title)}),(0,se.jsxs)(ht().Y1,{direction:"horizontal",gap:14,children:[s&&(0,se.jsx)(ps,{spaceStore:s}),s&&(0,se.jsx)(ms,{spaceStore:s})]})]}),(0,se.jsx)(gs,{securitySettingsStore:t,spaceStore:s})]})}function gs(e){let{securitySettingsStore:t,spaceStore:s}=e;const n=(0,m().tz)(),{setPage:a}=(0,i.useContext)(Yt().K),o=(0,l().IS)((e=>({button:{padding:"3px 0 0 0",height:"100%"},icon:{height:14,width:14,fill:e.icon.tertiary},headerContainer:{marginTop:32}})),[]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:o.headerContainer,children:(0,se.jsx)("span",{style:{fontSize:16,fontWeight:500},children:n.formatMessage(xs.permissionsTitle)})}),(0,se.jsxs)(es().L,{children:[(0,se.jsx)(Rt().p,{style:o.button,onClick:()=>a("people_invitation_settings"),ignoreLocalHoverState:!0,children:(0,se.jsx)(ss().y,{title:n.formatMessage(xs.membersAndGuestsSettingTitle),byline:n.formatMessage(xs.memberAndGuestsSettingByline),onClick:()=>a("people_invitation_settings"),item:(0,Qt().V)(o.icon)})}),(0,se.jsx)(fs,{securitySettingsStore:t,spaceStore:s})]})]})}function ps(e){let{spaceStore:t}=e;const s=(0,m().tz)(),{setPage:n}=(0,i.useContext)(Yt().K),{requestsSize:o,requestedUserStores:l,totalRequestedUsersSize:d}=function(e){let{spaceStore:t,userStoreLimit:s}=e;const{requests:i,isLoading:n}=(0,ls().I)({spaceId:t.id});return(0,r().K8)((()=>{let e=0;if(!i)return{requestsSize:e,requestedUserStores:[],totalRequestedUsersSize:0,isLoading:n};const a=new Set;for(const t of Object.values(i)){for(const e of t)a.add(e.created_by_id);e+=t.length}return{requestsSize:e,requestedUserStores:Array.from(a).slice(0,s).map((e=>rs().L.createChildStore(t,{table:B().oo,id:e}))),totalRequestedUsersSize:a.size,isLoading:n}}),[t,i,n,s])}({spaceStore:t,userStoreLimit:cs}),c=(0,a().v3)();return(0,se.jsx)(ts().A,{headerText:s.formatMessage(xs.upgradesTitle),mainText:(0,se.jsx)(m().sA,{id:"requestsHomePage.upgradeRequests.pending",defaultMessage:"{requestsSize} pending",values:{requestsSize:o}}),bottom:(0,se.jsx)(Ss,{avatarProps:{users:l,totalMemberCount:d},requestsLength:o,pendingText:xs.noPlanOrAddOnRequests}),onClick:()=>{n("upgrades"),(0,as().u4)({environment:c,event:{eventName:"request_tab_upgrades_clicked",eventProperties:{number_of_requests:o}}})}})}function ms(e){let{spaceStore:t}=e;const s=(0,m().tz)(),i=(0,ns().e6)({spaceStore:t,requestType:"member_or_guest"}),n=new Set;for(const o of i)for(const{actor:e}of o.createdByActorsWithReason)n.add(e.id);const a=[...n].slice(0,cs).map((e=>ee().LU.createChildStore(t,{table:B().oo,id:e})));return(0,se.jsx)(ts().A,{headerText:s.formatMessage(xs.peoplesTitle),mainText:(0,se.jsx)(m().sA,{id:"requestsHomePage.peopleRequests.pending",defaultMessage:"{requestsSize} pending",values:{requestsSize:i.length}}),bottom:(0,se.jsx)(Ss,{avatarProps:i.length?{users:a,totalMemberCount:n.size}:void 0,requestsLength:i.length,pendingText:xs.noGuestOrMemberRequests}),onClick:()=>{j().Ow({currentTab:"members",subtab:"requests"})}})}function fs(e){let{securitySettingsStore:t,spaceStore:s}=e;const i=(0,m().tz)(),n=(0,a().v3)(),o=(0,r().K8)((()=>t.state),[t]),l=(0,Ct().f_)({spaceId:s.id}),d=(0,g().eh)(l,"enterprise");return(0,se.jsx)(ss().y,{title:(0,se.jsx)(hs,{showUpsell:!d}),byline:i.formatMessage(xs.purchaseRequestsMemberSettingsByline),item:(0,se.jsx)(Xt().A,{disabled:!d,on:!o.disableMemberUpgradeRequests,onClick:()=>{Jt().X(n,{spaceStore:s,securitySettingsStore:t,fields:{disableMemberUpgradeRequests:!o.disableMemberUpgradeRequests}})}})})}function hs(e){let{showUpsell:t}=e;const s=(0,m().tz)(),i=(0,a().v3)();return(0,se.jsxs)(ht().Y1,{direction:"horizontal",gap:4,children:[s.formatMessage(xs.purchaseRequestsMemberSettingsTitle),t&&(0,se.jsx)(os().A,{subscriptionTier:"enterprise",analyticsName:"upgrade_requests_page",onClick:async()=>{await jt().K(i,{from:"upgrade_requests_page",upsell:{type:"product",product:"enterprise",limit:{type:"none"}}})}})]})}function Ss(e){let{avatarProps:t,requestsLength:s,pendingText:i}=e;const n=(0,m().tz)();return(0,se.jsxs)(Zt().wt,{justifyContent:"end",style:{minHeight:24},children:[t&&(0,se.jsx)(is().t,{users:t.users,totalMemberCount:t.totalMemberCount,isLoading:!1}),!s&&(0,se.jsx)(xt().D,{styleName:"UISmall-12px/Regular",colorName:"tertiary",children:n.formatMessage(i)})]})}const xs=(0,m().YK)({title:{id:"RequestsSettingsPage.title",defaultMessage:"Requests"},upgradesTitle:{id:"RequestsSettingsPage.UpgradesTileTitle",defaultMessage:"Upgrades"},peoplesTitle:{id:"RequestsSettingsPage.PeopleTileTitle",defaultMessage:"People"},permissionsTitle:{id:"RequestsSettingsPage.permissionsTitle",defaultMessage:"Permissions"},membersAndGuestsSettingTitle:{id:"RequestsSettingsPage.membersAndGuestsSettingTitle",defaultMessage:"Inviting guests and members"},memberAndGuestsSettingByline:{id:"RequestsSettingsPage.memberAndGuestsSettingByline",defaultMessage:"Configure who can send and approve member additions"},purchaseRequestsSettingTitle:{id:"RequestsSettingsPage.purchaseRequestsSettingTitle",defaultMessage:"Purchase requests"},purchaseRequestsSettingByline:{id:"RequestsSettingsPage.purchaseRequestsSettingByline",defaultMessage:"Configure who can send and approve requests"},memberAndGuestsSettingAriaLabel:{id:"RequestsSettingsPage.memberAndGuestsSettingAriaLabel",defaultMessage:"Configure who can send and approve member additions"},purchaseRequestsSettingsAriaLabel:{id:"RequestsSettingsPage.purchaseRequestsSettingsAriaLabel",defaultMessage:"Configure who can send and approve requests"},purchaseRequestsMemberSettingsTitle:{id:"RequestsSettingsPage.purchaseRequestsMemberSettingsTitle",defaultMessage:"Allow members to request upgrades"},purchaseRequestsMemberSettingsByline:{id:"RequestsSettingsPage.purchaseRequestsMemberSettingsByline",defaultMessage:"Users in your workspace can send purchase requests to the workspace owner"},noPlanOrAddOnRequests:{id:"RequestsSettingsPage.upgradeRequests.noPlanOrAddOnRequests",defaultMessage:"No plan or add-on requests"},noGuestOrMemberRequests:{id:"RequestsSettingsPage.peopleRequests.noGuestOrMemberRequests",defaultMessage:"No guest or member requests"}});var vs=()=>s(534177),ys=()=>s(966505),bs=()=>s(126550),js=()=>s(657328),As=()=>s(809730),Cs=()=>s(37433),ws=()=>s(274184),Ms=()=>s(287882),Ts=()=>s(76118),ks=()=>s(204063),Is=()=>s(690197);function Ds(e){let{title:t,byline:s,settingItem:i,style:n}=e;const a=(0,l().IS)((e=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",...n||{}},settingLeft:{width:"60%"},settingTitle:{fontWeight:h().Wy.regular},settingByline:{marginBottom:4}})),[n]);return(0,se.jsxs)("div",{style:a.settingContainer,children:[(0,se.jsxs)("div",{style:a.settingLeft,children:[(0,se.jsx)(re().A,{smallMarginBottom:!0,style:a.settingTitle,children:t}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:a.settingByline,children:s})]}),i]})}var Ps=()=>s(558094),Rs=()=>s(597898),_s=()=>s(265665),Bs=()=>s(624090),Us=()=>s(735384),Es=()=>s(197190),Ls=()=>s(623580),Os=()=>s(107683),Ws=()=>s(484595),zs=()=>s(106261);const qs=(0,m().YK)({deleteFromTrashLayoutTitle:{defaultMessage:"Auto-delete from Trash",id:"updateRetentionWindowModal.layoutTitle.deleteFromTrash."},deleteFromTrashTitle:{defaultMessage:"Auto-delete from Trash",id:"updateRetentionWindowModal.title.deleteFromTrash"},deleteFromTrashDescription:{defaultMessage:"Customize how long pages stay in Trash before being automatically deleted",id:"updateRetentionWindowModal.description.deleteFromTrash"},deleteFromTrashDefaultOptionTitle:{defaultMessage:"30 days, then delete from Trash",id:"updateRetentionWindowModal.defaultOption.title.deleteFromTrash"},deleteFromTrashDefaultOptionDescription:{defaultMessage:"Pages deleted from Trash are retained for an additional period of time. Retained pages can be restored by workspace owners",id:"updateRetentionWindowModal.defaultOption.description.deleteFromTrash"},deleteFromTrashImmediateEffect:{defaultMessage:"Reducing this retention setting may lead to pages being deleted from Trash immediately. Please type your workspace name to continue",id:"updateRetentionWindowModal.immediateEffect.deleteFromTrash"},purgeLayoutTitle:{defaultMessage:"Retaining deleted pages",id:"updateRetentionWindowModal.layoutTitle.purge"},purgeTitle:{defaultMessage:"Retaining deleted pages",id:"updateRetentionWindowModal.title.purge"},purgeDescription:{defaultMessage:"Pages deleted from Trash are retained for a period of time. Only workspace owners can view and restore retained pages.",id:"updateRetentionWindowModal.description.purge"},purgeDefaultOptionTitle:{defaultMessage:"30 days, then permanently delete",id:"updateRetentionWindowModal.defaultOption.title.purge"},purgeDefaultOptionDescription:{defaultMessage:"Pages are removed from Notion's servers and cannot be restored",id:"updateRetentionWindowModal.defaultOption.description.purge"},purgeImmediateEffect:{defaultMessage:"Reducing the retain period could lead to pages being deleted from Notion server. Please type your workspace name to continue ",id:"updateRetentionWindowModal.immediateEffect.purge"}});var Fs=()=>s(702723);const Ns=(0,m().YK)({days:{defaultMessage:"days",id:"customRetentionWindow.relativeDates.days"},years:{defaultMessage:"years",id:"customRetentionWindow.relativeDates.years"}}),Ks=(0,m().YK)({inputPlaceholder:{defaultMessage:"...",id:"customRetentionWindow.timeNum.inputPlaceholder"}}),Gs=(0,vs().uv)(Ms().Vl).map((e=>({key:e,label:(0,se.jsx)(me().A,{children:L().A.formatMessage(Ns[e])})})));function Vs(e){const{isDropdownEnabled:t,timeNumString:s,timeUnit:i,setTimeNumString:n,setTimeUnit:a}=e,o=(0,m().tz)(),r=(0,l().IS)((e=>({dropdownRow:{display:"flex"},input:{width:70,marginRight:4,marginLeft:6},dropdown:{marginTop:0,marginBottom:0,marginRight:4,borderRadius:4,border:`1px solid ${e.lightDividerColor}`}})),[]);return(0,se.jsxs)("span",{style:r.dropdownRow,children:[(0,se.jsx)(Ls().A,{style:r.input,value:s,onChange:e=>n(e.target.value),placeholder:o.formatMessage(Ks.inputPlaceholder),disabled:!t}),(0,se.jsx)(Fs().m,{buttonStyle:r.dropdown,disabled:!t,type:"dropdown",currentOption:i,options:Gs,onSelectOption:e=>t&&a(e),isMobile:!1})]})}const Hs=(0,m().YK)({invalidNumber:{defaultMessage:"Please enter a valid number",id:"updateRetentionWindow.error.invalidNumber"},outOfRangeTrash:{defaultMessage:"Pages can't be in Trash for longer than 10 years",id:"updateRetentionWindow.error.outOfRangeTrash"},outOfRangeRetained:{defaultMessage:"Pages can't be retained for longer than 10 years",id:"updateRetentionWindow.error.outOfRangeRetained"},lowerBoundTrash:{defaultMessage:"Pages can't be in Trash for less than 1 day",id:"updateRetentionWindow.error.lowerBoundTrash"},lowerBoundRetained:{defaultMessage:"Pages can't be retained for less than 1 day",id:"updateRetentionWindow.error.lowerBoundRetained"}});function $s(e){let{isSelected:t,retentionType:s,hasChosenRetentionWindow:n,currentRetentionWindowInSeconds:a,errorMessage:o,onNextRetentionWindowInSecondsChange:r,onClick:d,setErrorMessage:c,style:u}=e;const g=(0,m().tz)(),p=(0,l().IS)((e=>({rowStyles:{display:"flex",fontSize:14,background:t?e.lightBlueBannerBackground:"inherit",...u,alignItems:"flex-start",flexFlow:"column"},centeredRow:{display:"flex",flexFlow:"row",alignItems:"center"},dropdownRow:{marginTop:6},dropdown:{marginTop:0,marginBottom:0,marginRight:4,borderRadius:4,border:`1px solid ${e.lightDividerColor}`},errorMessageStyle:{marginTop:8,width:"100%",display:"flex",paddingLeft:28,color:e.errorText,fontWeight:h().Wy.regular}})),[u,t]),[f,S]=(0,i.useState)((0,Ms().sV)(a)),[x,v]=(0,i.useState)(`${(0,Ms().Uw)(a,f)}`),y=Number(x)*Ms().Vl[f],b=!n&&t;return(0,i.useEffect)((()=>{r(y)}),[r,y]),(0,i.useEffect)((()=>{if(t){if(void 0===x)return void c(g.formatMessage(Hs.invalidNumber));const e=parseInt(x);if(isNaN(e)||e.toString()!==x)return void c(g.formatMessage(Hs.invalidNumber));const t=Ms().Vl[f]*e;if(t>Ms().J1){const e="delete_from_trash"===s?Hs.outOfRangeTrash:Hs.outOfRangeRetained;return void c(g.formatMessage(e))}if(t<Ms().PL){const e="delete_from_trash"===s?Hs.lowerBoundTrash:Hs.lowerBoundRetained;return void c(g.formatMessage(e))}c(void 0)}}),[x,f,t,c,g,s]),(0,se.jsxs)(Rt().p,{style:p.rowStyles,onClick:d,children:[(0,se.jsxs)("div",{style:p.centeredRow,children:[(0,se.jsx)(Ws().A,{isSelected:t}),(0,se.jsx)(me().A,{style:p.centeredRow,children:"delete_from_trash"===s?(0,se.jsx)(m().sA,{defaultMessage:"<dropdownpicker></dropdownpicker>, then delete from trash",id:"updateRetentionWindowModal.custom.deleteFromTrash",values:{dropdownpicker:e=>(0,se.jsx)(Vs,{isDropdownEnabled:b,timeNumString:x,timeUnit:f,setTimeNumString:v,setTimeUnit:S})}}):(0,se.jsx)(m().sA,{defaultMessage:"<dropdownpicker></dropdownpicker>, then permanently delete",id:"updateRetentionWindowModal.custom.permanentlyDelete",values:{dropdownpicker:e=>(0,se.jsx)(Vs,{isDropdownEnabled:b,timeNumString:x,timeUnit:f,setTimeNumString:v,setTimeUnit:S})}})})]}),o?(0,se.jsx)(me().A,{style:p.errorMessageStyle,children:o}):null]})}const Ys=(0,m().YK)({invalidWorkspaceName:{id:"updateRetentionWindow.error.invalidWorkspaceName",defaultMessage:"Must type in workspace name correctly"}});function Qs(e){let{isOpen:t,closeModal:s,currentRetentionWindowInSeconds:n,spaceStore:o,retentionType:d,onSaveRetentionWindow:c}=e;const u=(0,a().v3)(),g=(0,l().IS)((e=>({contentStyle:{display:"flex",flexFlow:"column",alignItems:"center",paddingTop:24,paddingLeft:15,paddingRight:15},headerStyle:{display:"flex",flexFlow:"column",alignItems:"center",marginBottom:16},headerTitleStyle:{fontWeight:h().Wy.semibold,fontSize:17,marginBottom:8},headerDescriptionStyle:{width:"100%",textAlign:"center",fontSize:14},defaultOptionStyle:{display:"flex",flexFlow:"column",paddingLeft:8},defaultOptionTitleStyle:{fontSize:13,fontWeight:h().Wy.medium},defaultOptionDescriptionStyle:{width:350,fontSize:12,whiteSpace:"normal",lineHeight:"16px",fontWeight:h().Wy.regular},iconStyle:{color:e.lightIconColor,width:36,marginBottom:12},saveButtonStyles:{width:"100%",marginBottom:4,marginTop:16},errorMessageStyle:{marginTop:4,color:e.errorText},cancelButtonStyles:{width:"100%",paddingTop:5,paddingBottom:5,display:"flex",justifyContent:"center",marginBottom:16,borderRadius:4},optionStyle:{width:"100%",height:void 0,marginBottom:4,paddingTop:8,paddingBottom:8,fontWeight:h().Wy.medium,display:"flex",flexFlow:"row"},confirmationContainerStyle:{marginTop:16,width:"100%",paddingTop:14,paddingBottom:14,padingLeft:14,paddingRight:14,backgroundColor:e.accentColors.red[100],display:"flex",flexFlow:"column",alignItems:"center",borderRadius:4},confirmationDescription:{color:e.accentColors.red[800],fontSize:14,paddingBottom:6},confirmationContentStyle:{width:"90%"}})),[]),p=(0,r().K8)((()=>o.getName()),[o]),[f,S]=(0,i.useState)(void 0),[x,v]=(0,i.useState)(void 0===n),[b,j]=(0,i.useState)(n),A=x?void 0:b,[C,w]=(0,i.useState)(!1),[M,T]=(0,i.useState)(""),k=A===n||(0,vs().O9)(f),I=M!==p,D=(0,i.useCallback)((()=>{f||(y().kF(u,{type:d,value:A}),c(A),T(""),w(!1),s())}),[u,d,c,A,f,s]),P=(0,i.useCallback)((()=>{C?M===p?D():S(L().A.formatMessage(Ys.invalidWorkspaceName)):!function(e){let{nextRetentionWindowValue:t,currentRetentionWindowValue:s,retentionType:i}=e;const n=Js(s,i),a=Js(t,i);if(a<n)return!0;return!1}({nextRetentionWindowValue:A,retentionType:d,currentRetentionWindowValue:n})?D():w(!0)}),[C,M,p,A,d,n,D]),R=(0,i.useCallback)((()=>{C||x||(w(!1),v(!0),S(void 0))}),[C,x,w,v,S]),_=(0,i.useCallback)((()=>{C||x&&(w(!1),v(!1))}),[C,x,w,v]),B=function(e){return(0,i.useMemo)((()=>"delete_from_trash"===e?{layoutTitle:qs.deleteFromTrashLayoutTitle,title:qs.deleteFromTrashTitle,description:qs.deleteFromTrashDescription,defaultOptionTitle:qs.deleteFromTrashDefaultOptionTitle,defaultOptionDescription:qs.deleteFromTrashDefaultOptionDescription,immediateEffect:qs.deleteFromTrashImmediateEffect}:"purge"===e?{layoutTitle:qs.purgeLayoutTitle,title:qs.purgeTitle,description:qs.purgeDescription,defaultOptionTitle:qs.purgeDefaultOptionTitle,defaultOptionDescription:qs.purgeDefaultOptionDescription,immediateEffect:qs.purgeImmediateEffect}:void(0,vs().HB)(e)),[e])}(d);return(0,se.jsx)(Os().s,{isOpen:t,onDismiss:s,areaConstraint:{width:{type:"max",length:460}},render:e=>{let{displayMode:t}=e;return(0,se.jsx)(zs().B,{displayMode:t,title:(0,se.jsx)(m().sA,{...B.layoutTitle}),children:(0,se.jsxs)("div",{style:g.contentStyle,children:[(0,se.jsxs)("div",{style:g.headerStyle,children:[(0,se.jsx)("div",{children:(0,Us().I)(g.iconStyle)}),(0,se.jsx)(me().A,{style:g.headerTitleStyle,children:(0,se.jsx)(m().sA,{...B.title})}),(0,se.jsx)(me().A,{style:g.headerDescriptionStyle,isSecondaryColor:!0,isMultiline:!0,children:(0,se.jsx)(m().sA,{...B.description})})]}),(0,se.jsxs)(Rt().p,{style:g.optionStyle,onClick:R,children:[(0,se.jsx)(Ws().A,{isSelected:x}),(0,se.jsxs)("div",{style:g.defaultOptionStyle,children:[(0,se.jsx)(me().A,{style:g.defaultOptionTitleStyle,children:(0,se.jsx)(m().sA,{...B.defaultOptionTitle})}),(0,se.jsx)(me().A,{isSecondaryColor:!0,isMultiline:!0,style:g.defaultOptionDescriptionStyle,children:(0,se.jsx)(m().sA,{...B.defaultOptionDescription})})]})]}),(0,se.jsx)($s,{style:g.optionStyle,isSelected:!x,retentionType:d,hasChosenRetentionWindow:C,currentRetentionWindowInSeconds:n,errorMessage:f,onClick:_,onNextRetentionWindowInSecondsChange:j,setErrorMessage:S}),C?(0,se.jsxs)("div",{style:g.confirmationContainerStyle,children:[(0,se.jsx)(me().A,{isMultiline:!0,style:{...g.confirmationContentStyle,...g.confirmationDescription},children:(0,se.jsx)(m().sA,{...B.immediateEffect})}),(0,se.jsx)(Ls().A,{style:g.confirmationContentStyle,value:M,placeholder:p,onChange:e=>T(e.target.value)})]}):null,(0,se.jsx)(ks().A,{onClick:P,disabled:C?I:k,style:g.saveButtonStyles,size:"lg",children:(0,se.jsx)(m().sA,{id:"updateRetentionWindowModal.save",defaultMessage:"Save"})}),(0,se.jsx)(Es().A,{onClick:s,style:g.cancelButtonStyles,children:(0,se.jsx)(me().A,{isSecondaryColor:!0,children:(0,se.jsx)(m().sA,{id:"updateRetentionWindowModal.cancel",defaultMessage:"Cancel"})})})]})})}})}function Js(e,t){return e||("delete_from_trash"===t?Bs().I4:Bs().qI)}function Xs(e){const{spaceStore:t}=e,s=(0,a().v3)(),n=(0,m().tz)(),o=(0,l().IS)((e=>({genericSetting:{width:"100%",paddingTop:24},settingItem:{display:"flex",alignItems:"center"},currentSettingLabel:{fontWeight:h().Wy.medium},changeButtonStyle:{fontSize:12,marginLeft:8},lockIconStyle:{color:e.lightTextColor,width:20,marginLeft:4}})),[]),c=(0,Rs()._X)({name:"configurable_retention",spaceId:t.id,userId:s.currentUser.id}),[u,g]=i.useState({isOpen:!1,retentionType:"delete_from_trash"}),{saveDeleteFromTrashDelay:p,savePurgeDelay:f}=function(e){let{environment:t,spaceStore:s}=e;return{saveDeleteFromTrashDelay:(0,i.useCallback)((e=>{T().createAndCommit({userAction:"securitySettingsActions.saveDataRetentionSettings",environment:t,canUndo:!0,perform:t=>{T().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings"],command:"update",args:{delete_from_trash_delay_seconds:e??null}},transaction:t})}})}),[s,t]),savePurgeDelay:(0,i.useCallback)((e=>{T().createAndCommit({userAction:"securitySettingsActions.saveDataRetentionSettings",environment:t,canUndo:!0,perform:t=>{T().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings"],command:"update",args:{purge_delay_seconds:e??null}},transaction:t})}})}),[s,t])}}({environment:s,spaceStore:t}),{currentDeleteFromTrashDelayInSeconds:S,currentPurgeDelayInSeconds:x}=(0,r().K8)((()=>({currentDeleteFromTrashDelayInSeconds:(0,Ts().e2)(c)?t.getSettings().delete_from_trash_delay_seconds:void 0,currentPurgeDelayInSeconds:(0,Ts().e2)(c)?t.getSettings().purge_delay_seconds:void 0})),[t,c]);return(0,se.jsxs)("div",{children:[u.isOpen&&(0,se.jsx)(Qs,{isOpen:u.isOpen,closeModal:()=>g({...u,isOpen:!1}),spaceStore:t,currentRetentionWindowInSeconds:u.currentRetentionWindowInSeconds,retentionType:u.retentionType,onSaveRetentionWindow:"delete_from_trash"===u.retentionType?p:f}),(0,se.jsx)(Zs,{dataRetentionAvailability:c}),(0,se.jsx)(Ds,{style:o.genericSetting,title:(0,se.jsx)(m().sA,{id:"securitySettings.dataRetention.deleteFromTrash.title",defaultMessage:"Once pages are moved to Trash, delete them after"}),byline:(0,se.jsx)(m().sA,{id:"securitySettings.dataRetention.deletedFromTrash.byline",defaultMessage:"Anyone with edit or full access will be able to restore or manually delete pages in Trash"}),settingItem:(0,se.jsxs)("div",{style:o.settingItem,children:[(0,se.jsx)(me().A,{style:o.currentSettingLabel,children:(0,se.jsx)(m().sA,{id:"securitySettings.dataRetention.deleteFromTrash.currentSetting",defaultMessage:"{duration}",values:{duration:(0,Ms().rN)(S,n)}})}),(0,Ts().e2)(c)?(0,se.jsx)(vt().A,{size:"lg",disabled:!1,style:o.changeButtonStyle,onClick:()=>g({isOpen:!0,retentionType:"delete_from_trash",currentRetentionWindowInSeconds:S}),children:(0,se.jsx)(m().sA,{defaultMessage:"Change",id:"securitySettings.dataRetention.deleteFromTrash.button"})}):(0,se.jsx)("div",{children:(0,d().g)(o.lockIconStyle)})]})}),(0,se.jsx)(Ds,{style:o.genericSetting,title:(0,se.jsx)(m().sA,{id:"securitySettings.dataRetention.purge.title",defaultMessage:"After pages are deleted from Trash, retain them for"}),byline:(0,se.jsx)(m().sA,{id:"securitySettings.dataRetention.purge.byline",defaultMessage:"During the retention period, only workspace owners can view or restore the page from Content search. After the retention period, the page will be permanently deleted from Notion's servers"}),settingItem:(0,se.jsxs)("div",{style:o.settingItem,children:[(0,se.jsx)(me().A,{style:o.currentSettingLabel,children:(0,se.jsx)(m().sA,{id:"securitySettings.dataRetention.purge.currentSetting",defaultMessage:"{duration}",values:{duration:(0,Ms().rN)(x,n)}})}),(0,Ts().e2)(c)?(0,se.jsx)(vt().A,{size:"lg",disabled:!1,style:o.changeButtonStyle,onClick:()=>g({isOpen:!0,retentionType:"purge",currentRetentionWindowInSeconds:x}),children:(0,se.jsx)(m().sA,{defaultMessage:"Change",id:"securitySettings.dataRetention.purge.button"})}):(0,se.jsx)("div",{children:(0,d().g)(o.lockIconStyle)})]})})]})}function Zs(e){const{dataRetentionAvailability:t}=e,s=(0,l().IS)((e=>({bannerStyle:{borderRadius:4,padding:15,width:"100%",backgroundColor:e.lightBlueBannerBackground,flexFlow:(0,Ts().e2)(t)?"column":"row",display:"flex",overflow:"hidden"},bannerLabelStyle:{marginBottom:8},bannerImage:{width:75,display:"flex",alignItems:"center",paddingRight:15},bannerTitleBold:{fontWeight:h().Wy.bold},b:{fontWeight:h().Wy.medium},helpIcon:{fill:"inherit"}})),[t]),i=(0,a().v3)();return(0,Ts().e2)(t)?(0,se.jsxs)("div",{style:s.bannerStyle,children:[(0,se.jsx)(me().A,{style:s.bannerLabelStyle,children:(0,se.jsx)(m().sA,{id:"securitySettings.dataRetention.disclaimer.title",defaultMessage:"How page deletion and retention works in Notion"})}),(0,se.jsx)(me().A,{style:s.bannerLabelStyle,isMultiline:!0,isSmall:!0,children:(0,se.jsx)(m().sA,{id:"securitySettings.dataRetention.disclaimer.description",defaultMessage:"A page can be moved to Trash by anyone with edit or full access. The page can then be restored or deleted. Workspace owners can customize whether pages in Trash are automatically deleted after a period of time, and how long deleted pages are retained on Notion's servers."})}),(0,se.jsx)(Is().A,{title:(0,se.jsx)(_s().j,{children:(0,se.jsx)(m().sA,{defaultMessage:"Learn more about data retention in Notion",id:"securitySettings.dataRetention.learnMore"})}),iconStyle:s.helpIcon,buttonStyle:{maxWidth:"100%",overflow:"hidden"},href:(0,qe().xS)("guides.customDataRetentionRules"),analyticsFrom:"security_settings"})]}):(0,se.jsxs)("div",{style:s.bannerStyle,children:[(0,se.jsx)("div",{style:s.bannerImage,children:(0,se.jsx)(Ps().X,{product:"enterprise"})}),(0,se.jsxs)("div",{children:[(0,se.jsx)(me().A,{style:{...s.bannerLabelStyle,...s.bannerTitleBold},children:(0,se.jsx)(m().sA,{id:"securitySettings.dataRetention.upsell.title",defaultMessage:"Upgrade to the Enterprise plan to customize your workspaceâ€™s data retention policy"})}),(0,se.jsx)(me().A,{style:s.bannerLabelStyle,isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m().sA,{id:"securitySettings.dataRetention.upsell.description",defaultMessage:"Workspaces on the Enterprise plan also get SAML SSO, custom guest limits, audit logging, and other advanced security controls"})}),(0,se.jsx)(ks().A,{onClick:()=>{null!=t&&t.upsell&&(0,jt().K)(i,{from:"space_settings_cdrr_settings",upsell:t.upsell})},size:"lg",children:(0,se.jsx)(m().sA,{defaultMessage:"Upgrade to Enterprise",id:"securitySettings.upgradeButton.text"})})]})]})}var ei=()=>s(973189),ti=()=>s(10984),si=()=>s(802790),ii=()=>s(331542),ni=()=>s(662303),ai=()=>s(957986),oi=function(e){return e[e.Keep=0]="Keep",e[e.Remove=1]="Remove",e}(oi||{});function ri(e){return(0,se.jsx)(ai().A,{open:e.isOpen,onDismiss:e.onDismiss,render:()=>(0,se.jsx)(li,{...e})})}function li(e){const{onDismiss:t,onSave:s,guestCount:n}=e,[a,o]=(0,i.useState)(oi.Keep),r=(0,l().IS)((e=>({container:{width:350,padding:30,borderRadius:5,height:400,alignItems:"center"},title:{fontFamily:h().vc(ni().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center"},subtitle:{fontFamily:h().vc(ni().locale).sans,fontSize:14,fontWeight:300,lineHeight:"19px",margin:10,textAlign:"center"},radioContainer:{display:"flex",flexDirection:"column"},button:{justifyContent:"space-between",marginTop:10,height:70,borderRadius:5},buttonText:{display:"flex",flexDirection:"column"},optionSubtitle:{whiteSpace:"break-spaces"},actionButtonsContainer:{display:"flex",flexDirection:"column",marginTop:20},cancelButton:{justifyContent:"center",margin:"8px auto 0"}})),[]),d=(0,i.useCallback)((()=>{const e=a===oi.Keep;s(e)}),[s,a]);return(0,se.jsxs)("div",{style:r.container,children:[(0,se.jsx)(me().A,{style:r.title,children:(0,se.jsx)(m().sA,{id:"disableGuestsConfig.title",defaultMessage:"Disable inviting guests?"})}),(0,se.jsx)(me().A,{isSmall:!0,style:r.subtitle,isMultiline:!0,children:(0,vs().O9)(n)?(0,se.jsx)(m().sA,{id:"disableGuestsConfig.description",defaultMessage:"Your workspace currently has {guestCount, plural, one {1 guest} other {{guestCount} guests}}. You can choose to:",values:{guestCount:n}}):(0,se.jsx)(m().sA,{id:"disableGuestsConfig.description.noGuestCount",defaultMessage:"You are turning off guests in this workspace. You can choose to:"})}),(0,se.jsxs)("div",{style:r.radioContainer,children:[(0,se.jsxs)(vt().A,{size:"lg",onClick:()=>o(oi.Keep),style:r.button,children:[(0,se.jsx)(Ws().A,{isSelected:a===oi.Keep}),(0,se.jsxs)("div",{style:r.buttonText,children:[(0,se.jsx)(me().A,{children:(0,se.jsx)(m().sA,{id:"disableGuestsConfig.keepExistingGuests.title",defaultMessage:"Keep existing guests"})}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:r.optionSubtitle,children:(0,se.jsx)(m().sA,{id:"disableGuestsConfig.keepExistingGuests.description",defaultMessage:"Guests will still be able to access the pages they've been invited to"})})]})]}),(0,se.jsxs)(vt().A,{size:"lg",onClick:()=>o(oi.Remove),style:r.button,children:[(0,se.jsx)(Ws().A,{isSelected:a===oi.Remove}),(0,se.jsxs)("div",{style:r.buttonText,children:[(0,se.jsx)(me().A,{children:(0,se.jsx)(m().sA,{id:"disableGuestsConfig.removeExistingGuests.title",defaultMessage:"Remove existing guests"})}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:r.optionSubtitle,children:(0,se.jsx)(m().sA,{id:"disableGuestsConfig.removeExistingGuests.description",defaultMessage:"All guests will be removed from your workspace"})})]})]})]}),(0,se.jsxs)("div",{style:r.actionButtonsContainer,children:[(0,se.jsx)(ks().A,{size:"lg",onClick:d,children:(0,se.jsx)(m().sA,{id:"disableGuestsModal.saveChanges",defaultMessage:"Disable inviting guests"})}),(0,se.jsx)(Rt().p,{onClick:t,style:r.cancelButton,children:(0,se.jsx)(m().sA,{id:"disableGuestsModal.cancel",defaultMessage:"Cancel"})})]})]})}var di=()=>s(719147),ci=()=>s(127955),ui=()=>s(987017);const gi={security:(0,se.jsx)(m().sA,{id:"securityTabs.security.title",defaultMessage:"Security"}),data_retention:(0,se.jsxs)("div",{style:{display:"flex"},children:[(0,se.jsx)(m().sA,{id:"securityTabs.dataRetention.title",defaultMessage:"Data retention"}),(0,se.jsx)(s(147294).E,{newBadgeKey:"data_retention_settings",didUserEngage:!1})]})},pi=(0,vs().uv)(gi),mi=pi.map((e=>gi[e])),fi=.5;const hi=function(e){let{securitySettingsStore:t,spaceStore:s,organizationOverrides:n}=e;const o=(0,a().v3)(),d=(0,l().IS)((()=>({tabMenu:{marginBottom:24}})),[]),c=(0,r().K8)((()=>Xe().A.state.online),[]),u=(0,r().K8)((()=>lt().A.getState().defaultSubtab),[]),[g,p]=(0,i.useState)((()=>u&&pi.includes(u)?pi.indexOf(u):0)),f=(0,i.useCallback)((e=>{y()._J(o,{tab:pi[e]}),p(e)}),[p,o]);return c?(0,se.jsx)(Dt().Ay,{children:(0,se.jsxs)("div",{children:[(0,se.jsx)(re().A,{large:!0,divider:"full",children:(0,se.jsx)(m().sA,{id:"securitySettings.securityAndData.title",defaultMessage:"Security & data"})}),(0,se.jsx)(ui().Ay,{tabs:mi,selectedIndex:g,onChange:f,style:d.tabMenu}),0===g?(0,se.jsx)(_i,{securitySettingsStore:t,spaceStore:s,organizationOverrides:n}):(0,se.jsx)(Xs,{spaceStore:s})]})}):(0,se.jsx)(Si,{})};function Si(){return(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,se.jsx)(m().sA,{defaultMessage:"Please go online to manage security settings.",id:"securitySAMLSettings.offline.message"})})})}function xi(e,t,s,i){Jt().X(i,{spaceStore:s,securitySettingsStore:t,fields:e})}function vi(e){return{fontWeight:h().Wy.medium,fontSize:18,borderBottom:`1px solid ${e.regularDividerColor}`,paddingBottom:6,marginBottom:12,display:"flex",alignItems:"center"}}function yi(e,t){const{subscriptionTier:s="enterprise"}=t||{};jt().K(e,{from:"space_saml",upsell:{type:"product",product:s,limit:{type:"none"}}})}function bi(e,t,s,i){const{name:n,isToggleEnabled:a,showUpgradeIfDisabled:o}=e;if(!a)return o?yi(i):void 0;xi({[n]:!t.state[n]},t,s,i)}function ji(e){let{style:t,subscriptionTier:s="enterprise"}=e;const i=(0,a().v3)();return(0,se.jsx)(os().A,{subscriptionTier:s,analyticsName:"space_saml",onClick:()=>yi(i,{subscriptionTier:s}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3,...t}})}function Ai(e){let{requestTogglesAvailableForTier:t,spaceStore:s,securitySettingsStore:i,organizationOverrides:n,isShownInRequestsTab:o=!1}=e;const d=(0,a().v3)(),c=(0,r().K8)((()=>(0,bs().$)(s,d)),[s,d]),u=(0,r().K8)((()=>t&&!Boolean(i.state.disableMembershipRequests)),[t,i]),g=(0,r().K8)((()=>t&&!Boolean(i.state.disableExternalMembershipRequests)),[t,i]),p=(0,r().K8)((()=>t&&!Boolean(i.state.disableGuestMembershipRequests)),[t,i]),m=(0,l().DP)();return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ci().AJ,{environment:d,toggleOn:u,onClick:()=>bi({name:"disableMembershipRequests",isToggleEnabled:t,showUpgradeIfDisabled:!1},i,s,d),isReadOnly:!1,upsellOrigin:"space_saml",style:{marginBottom:o?0:24},shouldShowUpsell:!t,isControlledByOrganization:Boolean(n.disable_membership_requests)}),o?(0,se.jsx)(si().A,{size:0,dividerColor:m.stroke.secondary}):null,(0,se.jsx)(ci().fm,{environment:d,toggleOn:g,onClick:()=>bi({name:"disableExternalMembershipRequests",isToggleEnabled:t,showUpgradeIfDisabled:!1},i,s,d),isReadOnly:!1,upsellOrigin:"space_saml",style:{marginBottom:o?0:24},shouldShowUpsell:!t,isControlledByOrganization:Boolean(n.disable_external_membership_requests)}),c&&o?(0,se.jsx)(si().A,{size:0,dividerColor:m.stroke.secondary}):null,c&&(0,se.jsx)(ci().Ck,{environment:d,toggleOn:p,onClick:()=>bi({name:"disableGuestMembershipRequests",isToggleEnabled:t,showUpgradeIfDisabled:!1},i,s,d),isReadOnly:!1,upsellOrigin:"space_saml",style:{marginBottom:o?0:24},shouldShowUpsell:!t,isControlledByOrganization:Boolean(n.disable_guest_membership_requests)})]})}function Ci(e){let{toggleAvailableForTier:t,guestCount:s,securitySettingsStore:i,spaceStore:n,publicAccessRequestsExpEnabled:o,isControlledByOrganization:l,showDivider:d}=e;const c=(0,a().v3)(),u=(0,r().O$)(i),g=(0,r().K8)((()=>!t||o&&!i.state.disablePublicAccessRequests),[t,i,o]),p=(0,r().K8)((()=>t?g||l?()=>{}:()=>async function(e,t,s){const i=e.state.disableGuests,n=e.state.enableGuestInviteRequests;if(i)xi({disableGuests:!i,...n&&{enableGuestInviteRequests:!n}},e,t,s);else{if(Se().default.checkGate({gateName:"show_keep_existing_guests_modal"}))return void e.setState({...e.state,disableGuestsModalOpen:!0});{const{accept:e}=await b().Gh({message:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.disableGuests.confirmationModal.message",defaultMessage:"Are you sure? All guests in this workspace will be removed."}),acceptLabel:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.disableGuests.confirmationModal.confirmButton.label",defaultMessage:"Yes"})});if(!e)return}xi({disableGuests:!i},e,t,s)}}(i,n,c):()=>yi(c)),[c,t,i,n,g,l]);return(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,se.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,se.jsx)(m().sA,{id:"securitySAMLSettings.guestsSection.allowGuests.label",defaultMessage:"Allow members to invite guests to pages"}),!t&&(0,se.jsx)(ji,{}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.guestsSection.disableGuests.caption",defaultMessage:"Your workspace currently has <gueststablink> {guestCount, plural, one {1 guest} other {{guestCount} guests}}</gueststablink>",values:{gueststablink:e=>(0,se.jsx)(di().A,{onClick:()=>{ys().Gq(c,{source_tab:lt().A.state.currentTab,destination_tab:"members",destination_subtab:ei().d.Guests}),lt().A.setState({...lt().A.state,currentTab:"members",defaultSubtab:ei().d.Guests})},children:e}),guestCount:s}})})]}),(0,se.jsx)("div",{onClick:p,style:{marginTop:5,opacity:g?fi:void 0},children:(0,se.jsx)(Xt().A,{on:!u.disableGuests,disabled:g,isLocked:l,lockedTooltip:(0,js().C)()})})]}),d?(0,se.jsx)(si().A,{size:24,style:{opacity:0}}):null,(0,se.jsx)(ri,{isOpen:Boolean(u.disableGuestsModalOpen),onDismiss:()=>{i.setState({...i.state,disableGuestsModalOpen:!1})},onSave:e=>{xi({disableGuests:!0,keepExistingGuests:e},i,n,c),i.setState({...i.state,disableGuestsModalOpen:!1})},guestCount:s})]})}function wi(e){let{toggleAvailableForTier:t,securitySettingsStore:s,spaceStore:i,publicAccessRequestsExpEnabled:n,isControlledByOrganization:o,showDivider:l=!0}=e;const d=(0,a().v3)(),c=(0,r().K8)((()=>!t||!s.state.disableGuests||n&&!s.state.disablePublicAccessRequests),[s,t,n]),u=(0,r().K8)((()=>t&&c?()=>{}:()=>{o||bi({name:"enableGuestInviteRequests",isToggleEnabled:t,showUpgradeIfDisabled:!0},s,i,d)}),[d,t,s,i,c,o]),g=(0,r().K8)((()=>(0,fe().x3)()),[]),p=(0,r().K8)((()=>!t||s.state.disableGuests),[s,t]);return(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,se.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,se.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[(0,se.jsx)(m().sA,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.label",defaultMessage:"Allow members to request adding guests"}),t&&(0,se.jsx)(Is().A,{style:{marginLeft:0},href:(0,qe().xS)("guides.guestRequests"),analyticsFrom:"space_saml"}),!t&&(0,se.jsx)(ji,{style:{marginTop:0}})]}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.caption",defaultMessage:"{hasRequestTab, select, true {Requests must be approved by a workspace owner. You can view all requests <requeststablink>here</requeststablink>} other {Requests must be approved by a workspace owner}}",values:{hasRequestTab:g,requeststablink:e=>(0,se.jsx)(di().A,{onClick:()=>{ys().Gq(d,{source_tab:lt().A.state.currentTab,destination_tab:"members",destination_subtab:ei().d.Requests}),lt().A.setState({...lt().A.state,currentTab:"members",defaultSubtab:ei().d.Requests})},children:e})}})})]}),(0,se.jsx)(pe().A,{render:e=>(0,se.jsx)("div",{onClick:u,style:{marginTop:5,opacity:c?fi:void 0},...e,children:(0,se.jsx)(Xt().A,{on:s.state.enableGuestInviteRequests,disabled:c,isLocked:o,lockedTooltip:(0,js().C)()})}),renderTooltip:()=>(0,se.jsx)("div",{style:{},children:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.disabled.label",defaultMessage:"Disable inviting guests to use this feature"})}),disableTooltip:p,placement:he().W.Top})]}),l?(0,se.jsx)(si().A,{size:24,style:{opacity:0}}):null]})}function Mi(e){let{disableGuestsAvailableForTier:t,enableGuestInviteRequestAvailableForTier:s,enableExternalAccessRequestSettingForTier:i,securitySettingsStore:n,spaceStore:a,organizationOverrides:o}=e;return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(re().A,{large:!0,divider:"full",children:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.guestsSection.title",defaultMessage:"Inviting members & guests"})}),(0,se.jsx)(Ti,{securitySettingsStore:n,spaceStore:a,disableGuestsAvailableForTier:t,enableGuestInviteRequestAvailableForTier:s,enableExternalAccessRequestSettingForTier:i,organizationOverrides:o,isShownInRequestsTab:!1})]})}function Ti(e){let{disableGuestsAvailableForTier:t,enableGuestInviteRequestAvailableForTier:s,enableExternalAccessRequestSettingForTier:i,securitySettingsStore:n,spaceStore:a,organizationOverrides:o,isShownInRequestsTab:d=!1}=e;const c=(0,r().O$)(Mt().subscriptionDataStoreInstance),u=(0,r().K8)((()=>(0,fe().x3)()),[]),g=(0,r().K8)((()=>Se().default.checkGate({gateName:"allow_public_page_access_request",disableExposureLogging:!0})),[]),p=(0,ws().T)(c),m=(0,l().DP)();return void 0===p?(0,se.jsx)(ii().A,{}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Ri,{spaceStore:a,securitySettingsStore:n,toggleAvailableForTier:i,publicAccessRequestsExpEnabled:g,showDivider:!d}),d?(0,se.jsx)(si().A,{size:0,dividerColor:m.stroke.secondary}):null,(0,se.jsx)(Ci,{securitySettingsStore:n,spaceStore:a,toggleAvailableForTier:t,guestCount:p,publicAccessRequestsExpEnabled:g,isControlledByOrganization:Boolean(o.disable_guests),showDivider:!d}),d?(0,se.jsx)(si().A,{size:0,dividerColor:m.stroke.secondary}):null,(0,se.jsx)(wi,{securitySettingsStore:n,spaceStore:a,toggleAvailableForTier:s,publicAccessRequestsExpEnabled:g,isControlledByOrganization:Boolean(o.enable_guest_invite_requests),showDivider:!d}),d?(0,se.jsx)(si().A,{size:0,dividerColor:m.stroke.secondary}):null,(0,se.jsx)(Ai,{spaceStore:a,securitySettingsStore:n,requestTogglesAvailableForTier:u,organizationOverrides:o,isShownInRequestsTab:d})]})}function ki(e){let{enable:t,featureUpsellButton:s,securitySettingsStore:i,spaceStore:n,isControlledByOrganization:o}=e;const l=(0,a().v3)(),d=(0,r().K8)((()=>i.state.disablePublicAccess),[i]);return(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:t?()=>{o||async function(e,t,s){const i=e.state.disablePublicAccess;if(!i){const{accept:e}=await b().Gh({message:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.message",defaultMessage:"Are you sure you want to disable publishing sites and forms?"}),description:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.description",defaultMessage:"This will remove access for anyone who is not a member or guest of the workspace from all pages in this workspace."}),acceptLabel:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.confirmButton.label",defaultMessage:"Yes"})});if(!e)return}xi({disablePublicAccess:!i},e,t,s)}(i,n,l)}:()=>yi(l),children:[(0,se.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,se.jsx)(m().sA,{id:"securitySAMLSettings.securitySection.preventPublicSharing.label",defaultMessage:"Disable publishing sites and forms"}),!t&&s,(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.securitySection.preventPublicSharing.caption",defaultMessage:"Disable the Share to web option in the Share menu on every page and form in this workspace."})})]}),(0,se.jsx)("div",{style:{marginTop:5,opacity:t?void 0:fi},children:(0,se.jsx)(Xt().A,{on:d,disabled:!t,isLocked:o,lockedTooltip:(0,js().C)()})})]}),(0,se.jsx)(si().A,{size:24,style:{opacity:0}})]})}function Ii(e){let{enable:t,featureUpsellButton:s,securitySettingsStore:i,spaceStore:n}=e;const o=(0,a().v3)(),l=(0,r().K8)((()=>i.state.disableSpacePageEdits),[i]);return(0,r().K8)((()=>(0,Cs().zI)()>0),[])?null:(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>bi({name:"disableSpacePageEdits",isToggleEnabled:t,showUpgradeIfDisabled:!0},i,n,o),children:[(0,se.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,se.jsx)(m().sA,{id:"securitySAMLSettings.securitySection.disableSpacePageEdits.label",defaultMessage:"Prevent members from editing the Workspace section"}),!t&&s,(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"},children:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.securitySection.disableSpacePageEdits.caption",defaultMessage:"Disable the ability for members to create, move, reorder, and delete top-level Workspace pages."})})]}),(0,se.jsx)("div",{style:{marginTop:5,opacity:t?void 0:fi},children:(0,se.jsx)(Xt().A,{on:l,disabled:!t})})]}),(0,se.jsx)(si().A,{size:24,style:{opacity:0}})]})}function Di(e){let{enable:t,spaceStore:s,securitySettingsStore:i,featureUpsellButton:n,isControlledByOrganization:o}=e;const l=(0,a().v3)(),d=(0,r().K8)((()=>i.state.disableMoveToSpace),[i]);return(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>{o||bi({name:"disableMoveToSpace",isToggleEnabled:t,showUpgradeIfDisabled:!0},i,s,l)},children:[(0,se.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,se.jsx)(m().sA,{id:"securitySAMLSettings.securitySection.disableMovingPages.label",defaultMessage:"Disable duplicating pages to other workspaces"}),!t&&n,(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.securitySection.disableMovingPages.caption",defaultMessage:"Prevent anyone from duplicating pages to other workspaces via the Move To or Duplicate To actions."})})]}),(0,se.jsx)("div",{style:{marginTop:5,opacity:t?void 0:fi},children:(0,se.jsx)(Xt().A,{on:d,disabled:!t,isLocked:o,lockedTooltip:(0,js().C)()})})]}),(0,se.jsx)(si().A,{size:24,style:{opacity:0}})]})}function Pi(e){let{enable:t,securitySettingsStore:s,spaceStore:i,featureUpsellButton:n,isControlledByOrganization:o}=e;const l=(0,a().v3)(),d=(0,r().K8)((()=>s.state.disableExport),[s]);return(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>{o||bi({name:"disableExport",isToggleEnabled:t,showUpgradeIfDisabled:!0},s,i,l)},children:[(0,se.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,se.jsx)(m().sA,{id:"securitySAMLSettings.securitySection.disableExport.label",defaultMessage:"Disable export"}),!t&&n,(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.securitySection.disableExport.caption",defaultMessage:"Prevent anyone from exporting as Markdown, CSV, or PDF."})})]}),(0,se.jsx)("div",{style:{marginTop:5,opacity:t?void 0:fi},children:(0,se.jsx)(Xt().A,{on:d,disabled:!t||o,isLocked:o,lockedTooltip:(0,js().C)()})})]}),(0,se.jsx)(si().A,{size:24,style:{opacity:0}})]})}function Ri(e){let{securitySettingsStore:t,spaceStore:s,publicAccessRequestsExpEnabled:i,toggleAvailableForTier:n,isControlledByOrganization:o,showDivider:l=!1}=e;const d=(0,a().v3)(),c=(0,r().K8)((()=>t.state.disablePublicAccessRequests),[t]),u=(0,r().K8)((()=>{if(!n)return()=>yi(d,{subscriptionTier:"plus"});const e=!t.state.disablePublicAccessRequests,i=!e;return()=>{o||xi({disablePublicAccessRequests:e,...i&&{disableGuests:!1,enableGuestInviteRequests:!1}},t,s,d)}}),[d,s,t,n,o]);return i?(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:u,children:[(0,se.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,se.jsx)(m().sA,{id:"securitySAMLSettings.securitySection.disablePublicAccessRequests.label",defaultMessage:"Allow page access requests from non-members"}),!n&&(0,se.jsx)(ji,{subscriptionTier:"plus"}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.securitySection.disablePublicAccessRequests.caption",defaultMessage:"This allows anyone with the link to a page to request access. Workspace members can always request access."})})]}),(0,se.jsx)("div",{style:{marginTop:5,opacity:n?void 0:fi},children:(0,se.jsx)(Xt().A,{on:!c,disabled:!n,isLocked:o,lockedTooltip:(0,js().C)()})})]}),l?(0,se.jsx)(si().A,{size:24,style:{opacity:0}}):null]}):null}function _i(e){let{securitySettingsStore:t,spaceStore:s,organizationOverrides:n}=e;const a=(0,l().DP)(),o=(0,Gt().lh)({spaceId:s.id}),d=(0,r().K8)((()=>(0,As().e)({billingData:o})),[o]),c=(0,r().O$)(t),u=(0,r().K8)((()=>(0,ti().OX)()),[]),g=(0,r().K8)((()=>(0,ti().jR)()),[]),p=(0,se.jsx)(ji,{});return d?(0,se.jsxs)(i.Fragment,{children:[(0,se.jsx)(re().A,{large:!0,divider:"full",children:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.generalSection.title",defaultMessage:"General"})}),(0,se.jsx)(ki,{enable:!0,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_public_access)}),(0,se.jsx)(Ii,{enable:!0,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p}),(0,se.jsx)(Di,{enable:!0,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_move_to_space)}),(0,se.jsx)(Pi,{enable:!0,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_export)}),(0,se.jsx)(Mi,{securitySettingsStore:t,spaceStore:s,disableGuestsAvailableForTier:!0,enableGuestInviteRequestAvailableForTier:u,enableExternalAccessRequestSettingForTier:g,organizationOverrides:n}),(0,se.jsx)("div",{style:{height:36}})]}):(0,se.jsxs)(i.Fragment,{children:[(0,se.jsx)("div",{style:vi(a),children:(0,se.jsx)("span",{style:{marginRight:8},children:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.generalSection.title",defaultMessage:"General"})})}),(0,se.jsx)(ki,{enable:c.disablePublicAccess,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_public_access)}),(0,se.jsx)(Ii,{enable:c.disableSpacePageEdits,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p}),(0,se.jsx)(Di,{enable:c.disableMoveToSpace,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_move_to_space)}),(0,se.jsx)(Pi,{enable:c.disableExport,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_export)}),(0,se.jsx)(Mi,{securitySettingsStore:t,spaceStore:s,disableGuestsAvailableForTier:c.disableGuests,enableGuestInviteRequestAvailableForTier:c.enableGuestInviteRequests,enableExternalAccessRequestSettingForTier:g,organizationOverrides:n}),(0,se.jsx)("div",{style:{height:32}})]})}var Bi=()=>s(638743);function Ui(e){let{spaceStore:t}=e;const s=(0,m().tz)(),{setPage:n}=(0,i.useContext)(Yt().K);return(0,se.jsxs)(ht().Y1,{height:"fill",direction:"vertical",gap:16,padding:"36px 60px",children:[(0,se.jsx)(ds().n,{title:s.formatMessage(Li.title),goBack:()=>n("home")}),(0,se.jsx)(Ei,{spaceStore:t})]})}function Ei(e){let{spaceStore:t}=e;const s=(0,Et().l)({spaceId:t.id}),i=(0,r().K8)((()=>(0,As().e)({billingData:s})),[s]),n=(0,r().uB)(void 0,it().A);(0,o().l)((()=>{const e=n.getValueForSpace(t);e&&n.setState(e)}));const a=(0,r().O$)(n),{organizationOverrides:l}=(0,Bi().n)({spaceId:t.id}),d=(0,g().AI)(s),c=(0,r().K8)((()=>(0,p().OX)(d)),[d]),u=(0,r().K8)((()=>(0,p().jR)(d)),[d]);return i?(0,se.jsx)(Ti,{securitySettingsStore:n,spaceStore:t,disableGuestsAvailableForTier:!0,enableExternalAccessRequestSettingForTier:u,enableGuestInviteRequestAvailableForTier:c,organizationOverrides:l,isShownInRequestsTab:!0}):(0,se.jsx)(Ti,{securitySettingsStore:n,spaceStore:t,disableGuestsAvailableForTier:a.disableGuests,enableExternalAccessRequestSettingForTier:u,enableGuestInviteRequestAvailableForTier:a.enableGuestInviteRequests,organizationOverrides:l,isShownInRequestsTab:!0})}const Li=(0,m().YK)({title:{id:"RequestsSettingPage.PeopleInvitationSettings.title",defaultMessage:"Inviting guests and members"}});var Oi=()=>s(593524);function Wi(e){let{spaceStore:t,securitySettingsStore:s}=e;const n=(0,r().K8)((()=>"requests"===lt().A.state.currentTab&&lt().A.state.defaultSubtab||"home"),[]),[a,o]=(0,i.useState)(n),l=(0,$t().n)();return(0,se.jsx)(Yt().K.Provider,{value:{currentPage:a,setPage:o,isSalesEligible:l},children:(0,se.jsx)(zi,{securitySettingsStore:s,spaceStore:t})})}function zi(e){let{spaceStore:t,securitySettingsStore:s}=e;const{currentPage:n}=(0,i.useContext)(Yt().K);switch(n){case"home":return(0,se.jsx)(us,{securitySettingsStore:s,spaceStore:t});case"people_invitation_settings":return(0,se.jsx)(Ui,{spaceStore:t});case"upgrades":return(0,se.jsx)(Oi().Z,{spaceStore:t});default:return null}}var qi=()=>s(406965);const Fi={VerifiedPagesSettings:new(De().O2)("VerifiedPagesSettings",(()=>Promise.all([s.e(23806),s.e(5887),s.e(6463),s.e(11740),s.e(46413),s.e(35599),s.e(16006)]).then(s.bind(s,541616))))},Ni=(0,De()._h)(Fi.VerifiedPagesSettings,(e=>e.VerifiedPagesSettings));var Ki=()=>s(710967),Gi=()=>s(404302),Vi=()=>s(495427);var Hi=()=>s(701144),$i=()=>s(837503),Yi=()=>s(518658),Qi=()=>s(459173),Ji=()=>s(497799),Xi=()=>s(223544);function Zi(e){let{spaceStore:t,sharedWithFilterItems:s,setSharedWithFilter:n,runNewSearch:a,includeGroups:o,includeGuests:r}=e;const l=(0,Ji().H)({spaceStore:t}),d=(0,i.useMemo)((()=>l.loading?[]:r?[...l.members,...l.guests]:l.members),[l,r]),c=(0,i.useMemo)((()=>l.loading?new Set:new Set(l.guests.map((e=>e.id)))),[l]);return(0,se.jsx)(Xi().Jo,{isMultiSelect:!0,includePermissionGroups:o,userStores:d,title:(0,se.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.filters.sharedWith.title",defaultMessage:"Shared with"}),selectedItems:s??[],setSelectedItems:function(e){const t=e.map((e=>{let{id:t,type:s}=e;return{type:s,id:t}}));n(t.length>0?t:void 0)},onMenuClose:a,guestUserIdSet:c})}var en=()=>s(333046);function tn(e){let{spaceStore:t,filters:s,runNewSearch:n,setFilters:o,hasUserConfirmedAcknowledgement:d}=e;const c=function(e){const[t,s]=(0,i.useState)([]),n=(0,a().v3)(),o=(0,r().K8)((()=>(null==e?void 0:e.spaceStore)??Je().default.state.currentSpaceStore),[null==e?void 0:e.spaceStore]),l=(0,r().K8)((()=>{var e;return null===(e=Je().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]);return(0,i.useEffect)((()=>{!async function(){const e=await(0,Cs().S)({spaceStore:o,currentUserId:l,includeArchived:!1,minRoleOnTeamStores:"editor",environment:n});s(e)}()}),[o,l,n]),t}(),u=(0,l().IS)((e=>({container:{margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItemsCenter:"center"}})),[]);return(0,se.jsxs)("div",{style:u.container,children:[(0,se.jsx)(Vi().nv,{mode:Vi().Ke.Button,query:s.query,setQueryFilter:function(e){o({query:e},{runSearchAfter:!0})},disabled:!d}),d?(0,se.jsxs)("div",{style:u.filterPillsContainer,children:[(0,se.jsx)(Qi().MC,{spaceStore:t,selectedPageStatus:s.pageStatus,setSelectedPageStatus:function(e){o({pageStatus:e})},onMenuClose:n}),(0,se.jsx)(Yi().Z,{lastEditedTime:s.lastEditedTime,createdTime:s.createdTime,setLastEditedTime:function(e){o({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){o({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}}),(0,se.jsx)(en().j,{selectedTeamIds:s.teamIds,setSelectedTeamIds:function(e){o({teamIds:e})},onMenuClose:n,teamStores:c}),(0,se.jsx)(Zi,{spaceStore:t,sharedWithFilterItems:s.sharedWith,setSharedWithFilter:function(e){o({sharedWith:e})},runNewSearch:n,includeGroups:!0,includeGuests:!0}),(0,se.jsx)(Hi().tE,{selectedAudience:s.audience,setSelectedAudience:function(e){o({audience:e})},onMenuClose:n,audienceValues:Gi().p}),(0,se.jsx)($i().Q,{spaceStore:t,createdByFilterIds:s.createdBy,setCreatedByFilter:function(e){o({createdBy:e})},runNewSearch:n,includeGuests:!0})]}):null]})}function sn(e){let{spaceStore:t,filters:s,pageStores:i,hasUserConfirmedAcknowledgement:n}=e;const a=(0,r().K8)((()=>t.getName()),[t]);return(0,se.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:24},children:[(0,se.jsx)(me().A,{isMultiline:!0,style:{marginBottom:20},isSecondaryColor:!0,children:(0,se.jsx)(m().sA,{id:"adminContentSearchTab.description.dataRetentionPolicy",defaultMessage:"Workspace owners can search for any page in <b>{workspaceName}</b>. This includes private pages and deleted pages retained per the <link>data retention policy</link>",values:{workspaceName:a,b:e=>(0,se.jsx)("b",{children:e}),link:e=>(0,se.jsx)(di().A,{onClick:()=>lt().A.setState({openedFrom:"content_search",open:!0,currentTab:"security",highlightedSetting:void 0,defaultSubtab:"data_retention"}),children:e})}})}),(0,se.jsx)(Ki().t,{spaceId:t.id,disabled:0===i.length||!n,filters:s})]})}const nn=function(e){let{spaceStore:t,userStore:i}=e;const n=(0,a().v3)(),o=(0,r().K8)((()=>Xe().A.state.online),[]),l=(0,r().K8)((()=>{const e=Je().default.state.currentSpaceViewStore,t=null==e?void 0:e.getSettings();return(null==t?void 0:t.admin_content_search_acknowledgement)??!1}),[]),{showSuggestions:d,loadNextPage:c,pageStores:u,loading:g,error:p,runNewSearch:f,filters:h,setFilters:S,refreshSearchResult:x}=(0,s(583521).I)({spaceStore:t,userStore:i,hasUserConfirmedAcknowledgement:l});return o?(0,se.jsxs)(Dt().Ay,{children:[(0,se.jsx)(re().A,{large:!n.device.isMobile||void 0,divider:n.device.isMobile?void 0:"full",children:(0,se.jsx)(m().sA,{id:"adminContentSearchTab.title",defaultMessage:"Content search"})}),(0,se.jsx)(sn,{spaceStore:t,pageStores:u,filters:h,hasUserConfirmedAcknowledgement:l}),(0,se.jsx)(tn,{spaceStore:t,runNewSearch:f,setFilters:S,filters:h,hasUserConfirmedAcknowledgement:l}),(0,se.jsx)(s(793571).r,{loading:g,error:p,pageStores:u,loadNextPage:c,filters:h,setFilters:S,showSuggestions:d,runNewSearch:f,hasUserConfirmedAcknowledgement:l,refreshSearchResult:x})]}):(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,se.jsx)(m().sA,{defaultMessage:"Please go online to access content search.",id:"adminContentSearchTab.offline.message"})})})};var an=()=>s(96689),on=()=>s(908928),rn=()=>s(515402),ln=()=>s(633457),dn=()=>s(235195),cn=()=>s(963589),un=()=>s(40851),gn=(s(944114),s(908872),s(737550),()=>s(148307)),pn=()=>s(972261),mn=()=>s(576250),fn=()=>s(473346),hn=()=>s(388693),Sn=()=>s(322769),xn=()=>s(20498),vn=()=>s(246826),yn=()=>s(174636),bn=()=>s(310001),jn=()=>s(291075),An=()=>s(992237),Cn=()=>s(561585),wn=()=>s(955054),Mn=()=>s(53137),Tn=()=>s(756315),kn=()=>s(99254),In=()=>s(779795),Dn=()=>s(981046),Pn=()=>s(689094),Rn=()=>s(100622),_n=()=>s(377586),Bn=()=>s(617871),Un=()=>s(332393),En=()=>s(498212),Ln=()=>s(780054),On=()=>s(722872),Wn=()=>s(361330),zn=()=>s(251126),qn=()=>s(760217),Fn=()=>s(928600),Nn=()=>s(678553),Kn=()=>s(939740),Gn=()=>s(614505),Vn=()=>s(89924),Hn=()=>s(320865);function $n(e){const{query:t}=e,s=(0,a().v3)(),n=(0,r().K8)((()=>Je().default.state.currentSpaceStore),[]),o=(0,r().K8)((()=>null==n?void 0:n.getBotSettingsStore().getValue()),[n]),l="approved_or_built_by_notion"===(null==o?void 0:o.integration_restrictions),d=(0,r().K8)((()=>null!=o&&o.integration_approval_statuses?Object.keys(o.integration_approval_statuses):[]),[o]),c=(0,r().K8)((()=>Object.keys(Bn().Nu).map((e=>{const t=null==n?void 0:n.getRecordModel({id:e,table:Un().Li});if("published"===(null==t?void 0:t.status))return e})).filter(vs().O9)),[n]),u=(0,i.useMemo)((()=>c.some((e=>e===Bn().Hd))),[c]),g=(0,r().K8)((()=>c.filter((e=>!d.includes(e))).slice(0,5)),[d,c]);return(0,se.jsx)(Fn().A,{menuType:On().gu.Popup,width:255,header:Jn(t,g,l),children:(0,se.jsx)(zn().A,{request:t,performRequest:e=>async function(e){const{query:t,integrationType:s,environment:i,spaceId:n,approvedIntegrationIds:a,popularIntegrationIds:o,autoApproveBuiltByNotion:r}=e;if(!Xe().A.state.online||!n)return[];if((0,En().uj)(t)||(0,En().c_)(t))return[t];if(""===t&&!r)return o;const l=await U().callApi({eventName:"searchIntegrations",environment:i,data:{query:t,type:s,spaceId:n}});if("success"===l.type){const e=l.data.integrationIds.filter((e=>!a.includes(e))),t="production";if(!r){return e.sort(((e,s)=>(0,Bn().CX)({integrationId:e,env:t})===(0,Bn().CX)({integrationId:s,env:t})?0:(0,Bn().CX)({integrationId:e,env:t})?-1:1)).slice(0,5)}return e.filter((e=>!(0,Bn().CX)({integrationId:e,env:t}))).slice(0,5)}if("failed"===l.type)throw l.error;return(0,vs().HB)(l)}({query:e,environment:s,spaceId:null==n?void 0:n.id,approvedIntegrationIds:d,popularIntegrationIds:g,autoApproveBuiltByNotion:l}),debounce:Wn().tu,render:(i,a,r)=>{if(!a||!r)return(0,se.jsx)(Vn().A,{children:(0,se.jsx)(Hn().A,{})});const l=hn().Gw.filter((e=>t&&e.name.toLowerCase().includes(t.toLowerCase())&&!d.includes(e.id)&&(e.id!==hn().IQ||!u))),c=[];if(0===a.length&&0===l.length)c.push({key:"no_results",render:()=>(0,se.jsx)(me().A,{isSmall:!0,style:{marginLeft:8},children:(0,se.jsx)(m().sA,{id:"adminIntegrationSettings.search.label.noResults",defaultMessage:"No results"})}),action:()=>{}});else{const t=a.map((t=>{const i={table:Un().Li,id:t};if(!n)return;const a=ee().CX.createChildStore(n,i);if("internal"===a.getType())return;const r=a.getInfo(),l=null==r?void 0:r.icon;return{key:`${t}`,render:e=>(0,se.jsx)(qn().A,{...e,title:(0,se.jsx)(me().A,{style:{fontWeight:h().Wy.semibold},children:a.getName()}),icon:l&&(0,se.jsx)(Gn().A,{disabled:!0,icon:{pointer:i,icon:l},isEmptyPage:!1,size:20}),style:l?{paddingBottom:12}:{paddingLeft:30,paddingBottom:12},shouldWrapCaption:!0,caption:(0,se.jsx)(Xn,{tagline:null==r?void 0:r.tagline,isNotionIntegration:(0,Bn().CX)({integrationId:a.id,env:"production"})}),className:"notranslate"}),action:()=>{e.closeDropdown(),Qn({environment:s,currentSpaceStore:n,botSettings:o,integrationId:t})}}})).filter(vs().O9),i=l.map((t=>{const i=t.info;return{key:`${t.id}`,render:e=>(0,se.jsx)(qn().A,{...e,title:(0,se.jsx)(me().A,{style:{fontWeight:h().Wy.semibold},children:t.name}),icon:(0,se.jsx)("img",{src:i.icon,style:{height:20}}),caption:i.tagline,style:{paddingBottom:12},shouldWrapCaption:!0,className:"notranslate"}),action:()=>{e.closeDropdown(),Qn({environment:s,currentSpaceStore:n,botSettings:o,integrationId:t.id})}}})).filter(vs().O9);c.push(...t,...i)}return(0,se.jsx)(Kn().Ay,{type:Kn().Oh.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,se.jsx)(Vn().A,{...e}),items:c}]})}})})}function Yn(e){const{query:t}=e,s=(0,a().v3)(),i=(0,r().K8)((()=>Je().default.state.currentSpaceStore),[]);return i?(0,se.jsx)(Fn().A,{menuType:On().gu.Popup,width:255,header:Jn(t,[],!1),children:(0,se.jsx)(zn().A,{request:t,performRequest:e=>async function(e){const{query:t,environment:s,spaceId:i}=e;if(!Xe().A.state.online||!i)return[];if((0,En().uj)(t)||(0,En().c_)(t))return[t];const n=await U().callApi({eventName:"searchIntegrations",environment:s,data:{query:t,type:"compliance",spaceId:i}});if("success"===n.type)return n.data.integrationIds;if("failed"===n.type)throw n.error;return(0,vs().HB)(n)}({query:e,environment:s,spaceId:null==i?void 0:i.id}),debounce:Wn().tu,render:(t,s,n)=>{if(!s||!n)return(0,se.jsx)(Vn().A,{children:(0,se.jsx)(Hn().A,{})});const a=[];if(0===s.length)a.push({key:"no_results",render:()=>(0,se.jsx)(me().A,{isSmall:!0,style:{marginLeft:8},children:(0,se.jsx)(m().sA,{id:"adminIntegrationSettings.search.label.noResults",defaultMessage:"No results"})}),action:()=>{}});else{const t=An().A.state.loaded&&Mn().A.state.loaded?An().A.state.webhookSubscriptions.map((e=>{var t;return null===(t=Mn().A.getBotsAsRecordMap().getValue({table:_().GP,id:e.bot_id}))||void 0===t?void 0:t.integration_id})):[],n=s.map((s=>{var n;const a=ee().CX.createChildStore(i,{id:s,table:Un().Li});if(t.includes(s))return;const o={table:Un().Li,id:s},r=ee().CX.createChildStore(i,o),l=null===(n=r.getInfo())||void 0===n?void 0:n.icon,d=(0,xn().Hr)(r.id);return{key:`${s}`,render:e=>(0,se.jsx)(qn().A,{...e,title:(0,se.jsxs)("div",{style:{display:"flex",float:"left",alignItems:"center"},children:[(0,se.jsx)(me().A,{style:{fontWeight:h().Wy.semibold},children:r.getName()}),(null==d?void 0:d.type)&&(0,se.jsx)("div",{style:{marginLeft:4},children:(0,se.jsx)(X().A,{children:d.type})})]}),icon:l&&(0,se.jsx)(Gn().A,{disabled:!0,icon:{pointer:o,icon:l},isEmptyPage:!1,size:20}),style:null!=d&&d.icon?{paddingBottom:12}:{paddingLeft:30,paddingBottom:12},shouldWrapCaption:!0,caption:(0,se.jsx)(Xn,{tagline:null!=d&&d.tagline?L().A.formatMessage(null==d?void 0:d.tagline):"A SIEM or DLP partner",isNotionIntegration:!1})}),action:()=>{var t;e.closeDropdown();a.getModel()&&(null!=d&&null!==(t=d.oauth)&&void 0!==t&&t.accountInfoPropertyNames||"dlp"===(null==d?void 0:d.type))?wn().A.setState({open:!0,integrationId:r.id}):Cn().A.setState({open:!0,integrationId:r.id})}}})).filter(vs().O9);a.push(...n)}return(0,se.jsx)(Kn().Ay,{type:Kn().Oh.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,se.jsx)(Vn().A,{...e}),items:a}]})}})}):null}function Qn(e){const{environment:t,currentSpaceStore:s,botSettings:i,integrationId:n}=e;if(s&&!(0,xn().NV)(n)){const e={...null==i?void 0:i.integration_approval_statuses,[n]:{type:"integration",status:"approved"}};T().createAndCommit({userAction:"AdminIntegrationSettingsSearchResults.handleIntegrationSelection",environment:t,canUndo:!0,perform:t=>{vn().zv({store:s,data:{bot_settings:{...i,integration_approval_statuses:e}},transaction:t})}})}}function Jn(e,t,s){return!e&&!s&&t.length>0&&(0,se.jsx)(Nn().A,{title:(0,se.jsx)(me().A,{isSmall:!0,style:{marginTop:4,fontWeight:h().Wy.medium},children:(0,se.jsx)(m().sA,{defaultMessage:"Popular integrations",id:"adminIntegrationSettings.search.title.popularIntegrations"})})})}function Xn(e){const{tagline:t,isNotionIntegration:s}=e,i=(0,l().DP)(),n=s?{}:{maxHeight:52,overflow:"auto"};return t?(0,se.jsxs)("div",{style:n,children:[t,s&&(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:8},children:[(0,se.jsx)(m().sA,{defaultMessage:"Developed by Notion",id:"adminIntegrationSettings.search.subtitle.notionBuilt"}),(0,fn().m)({marginLeft:3,width:12,height:12,fill:i.invoiceGreen})]})]}):null}var Zn=()=>s(14235);const ea=(0,m().YK)({searchInputPlaceholder:{id:"adminConnectionsSettings.search.input.placeholder",defaultMessage:"Add by name or integration ID"},complianceIntegrationSearchInputPlaceholder:{id:"adminConnectionsSettings.search.input.complianceIntegrationPlaceholder",defaultMessage:"Add by name"}});function ta(){const e=(0,a().WS)(),t=(0,l().DP)(),[s,n]=(0,i.useState)(!0),[o,r]=(0,i.useState)(!1),[d,c]=(0,i.useState)(""),u=(0,i.useRef)(null);return s?(0,se.jsx)(ge().A,{style:{display:"flex",alignItems:"center",height:28,fontWeight:h().Wy.medium,fontSize:h().J.UIRegular.desktop,color:Rn().Ay.blue,padding:"0px 6px"},onClick:()=>{n(!1)},children:(0,se.jsx)(m().sA,{id:"adminConnectionsSettings.search.button.label",defaultMessage:"{plusIcon}Â Add approved connection",values:{plusIcon:(0,Pn().W)({fill:Rn().Ay.blue,width:14,height:14,flexGrow:0,flexShrink:0})}})}):(0,se.jsx)(Zn().Ay,{alignmentToOrigin:he().C.Start,keepFocus:e,onDismiss:()=>{var e;const t=null===(e=window)||void 0===e?void 0:e.document.activeElement;u.current&&t===u.current&&u.current.blur(),n(!0),r(!1)},origin:(0,se.jsx)(Ls().A,{type:"text",style:{width:255},left:(0,Pn().W)({fill:t.lightIconColor,width:14,height:14,marginRight:8,flexGrow:0,flexShrink:0}),ref:u,value:d,onFocus:()=>{r(!0)},placeholder:L().A.formatMessage(ea.searchInputPlaceholder),onChange:e=>c(e.target.value)}),open:o,popupType:_n().n.Popup,style:{width:255},render:()=>(0,se.jsx)($n,{query:d,closeDropdown:()=>r(!1)})})}function sa(){const e=(0,a().WS)(),t=(0,l().DP)(),[s,n]=(0,i.useState)(!0),[o,r]=(0,i.useState)(!1),[d,c]=(0,i.useState)(""),u=(0,i.useRef)(null);return s?(0,se.jsx)(Rt().p,{isBlue:!0,style:{display:"flex",alignItems:"center",height:28,fontWeight:h().Wy.medium,fontSize:h().J.UIRegular.desktop,color:Rn().Ay.blue,padding:"0px 6px"},onClick:()=>{var e;n(!1),null===(e=u.current)||void 0===e||e.focus()},children:(0,se.jsx)(m().sA,{id:"adminConnectionsSettingsAddComplianceMenu.search.button.label",defaultMessage:"{plusIcon}Â Add connection",values:{plusIcon:(0,Pn().W)({fill:Rn().Ay.blue,width:14,height:14,flexGrow:0,flexShrink:0})}})}):(0,se.jsx)(Zn().Ay,{alignmentToOrigin:he().C.Start,keepFocus:e,onDismiss:()=>{var e;const t=null===(e=window)||void 0===e?void 0:e.document.activeElement;u.current&&t===u.current&&u.current.blur(),n(!0),r(!1)},origin:(0,se.jsx)(Ls().A,{type:"text",style:{width:255},left:(0,Pn().W)({fill:t.lightIconColor,width:14,height:14,marginRight:8,flexGrow:0,flexShrink:0}),focus:!0,ref:u,value:d,onFocus:()=>{r(!0)},placeholder:L().A.formatMessage(ea.complianceIntegrationSearchInputPlaceholder),onChange:e=>c(e.target.value)}),open:o,popupType:_n().n.Popup,style:{width:255},render:()=>(0,se.jsx)(Yn,{query:d,closeDropdown:()=>{n(!0),r(!1)}})})}var ia=()=>s(541229),na=()=>s(974679),aa=()=>s(949734),oa=()=>s(515918);const ra=["member_connections","workspace_connections"];function la(e){const t=(0,a().v3)(),{isMobile:s}=t.device,{guestBotIds:n,organizationOverrides:o}=e,d=(0,r().K8)((()=>Je().default.state.currentSpaceStore),[]),c=(0,r().K8)((()=>An().A.webhookSubscriptions.state.reduce(((e,t)=>{const s=t.getBotId();return s&&(e[s]=t.id),e}),{})),[]),g=(0,r().K8)((()=>Se().default.checkGate({gateName:"webhooks_beta"})||Se().default.checkGate({gateName:"e_discovery"})),[]),p=(0,cn().X)("ai_connector_discoverability");let S=p?function(e){const t=[];return t.push({id:pn().e5,appName:"Slack",account:void 0,caption:"Get answers about public Slack channels and conversations using Notion AI",logo:gn().A.images.externalIntegrations.slackIconPng,capabilities:null,canSelectPageAccess:!1,onDisconnect:function(){throw new Error("Function not implemented.")},shouldShowNewBadge:!0,shouldHideConnectAccount:!1,shouldHideInDiscover:!1,onConnect:async function(){var t;const s=await(0,Rs().Bw)(e,{name:"ai_connectors",spaceId:null===(t=Je().default.state.currentSpaceStore)||void 0===t?void 0:t.id,userId:e.currentUser.id});if("unavailable"===s.type)return void jt().K(e,{from:"slack_connect_button",upsell:s.upsell});const i=u().JW();yn().R.setState({...yn().R.state,currentScreen:"introduction",analyticsFrom:"connection_settings",sessionId:i})},integrationTypes:["aiConnector"]}),t.push({id:pn()._u,appName:"Google Drive",account:void 0,caption:"Get answers about Google Docs, Slides and Sheets using Notion AI",logo:gn().A.images.googleDriveLogoPng,capabilities:null,canSelectPageAccess:!1,onDisconnect:function(){throw new Error("Function not implemented.")},shouldShowNewBadge:!0,shouldHideConnectAccount:!1,shouldHideInDiscover:!1,onConnect:async function(){var t;const s=await(0,Rs().Bw)(e,{name:"ai_connectors",spaceId:null===(t=Je().default.state.currentSpaceStore)||void 0===t?void 0:t.id,userId:e.currentUser.id});if("unavailable"===s.type)return void jt().K(e,{from:"google_drive_connect_button",upsell:s.upsell});const i=u().JW();Tn().d.setState({...Tn().d.state,analyticsFrom:"connection_settings",sessionId:i,screenToShow:"info_screen"})},integrationTypes:["aiConnector"]}),t.push({id:pn().Fl,appName:"GitHub",account:void 0,caption:"Get answers about GitHub PRs, issues and code repositories using Notion AI",logo:gn().A.images.externalIntegrations.githubIconPng,capabilities:(0,se.jsx)("div",{style:{display:"none"}}),canSelectPageAccess:!1,onDisconnect:function(){throw new Error("Function not implemented.")},shouldShowNewBadge:!0,shouldHideConnectAccount:!1,shouldHideInDiscover:!1,onConnect:async function(){var t;const s=await(0,Rs().Bw)(e,{name:"ai_connectors",spaceId:null===(t=Je().default.state.currentSpaceStore)||void 0===t?void 0:t.id,userId:e.currentUser.id});if("unavailable"===s.type)return void jt().K(e,{from:"github_connect_button",upsell:s.upsell});const i=u().JW();jn().o.setState({...jn().o.state,analyticsFrom:"connection_settings",sessionId:i,currentScreen:"introduction"})},integrationTypes:["aiConnector"]}),t.push({id:pn().S,appName:"Jira",account:void 0,caption:"Get answers about Jira projects, issues and boards using Notion AI",logo:gn().A.images.externalIntegrations.jiraPng,capabilities:(0,se.jsx)("div",{style:{display:"none"}}),canSelectPageAccess:!1,onDisconnect:function(){throw new Error("Function not implemented.")},shouldShowNewBadge:!0,shouldHideConnectAccount:!1,shouldHideInDiscover:!1,onConnect:async function(){var t;const s=await(0,Rs().Bw)(e,{name:"ai_connectors",spaceId:null===(t=Je().default.state.currentSpaceStore)||void 0===t?void 0:t.id,userId:e.currentUser.id});if("unavailable"===s.type)return void jt().K(e,{from:"jira_connect_button",upsell:s.upsell});const i=u().JW();kn().y.setState({...kn().y.state,analyticsFrom:"connection_settings",sessionId:i,screenToShow:"info_screen"})},integrationTypes:["aiConnector"]}),t}(t):[];const x=(0,r().K8)((()=>d?(0,f().sb)([...n,...Mn().A.bots.state.map((e=>e.id))]).map((e=>{const t=ee().vK.createChildStore(d,{table:_().GP,id:e,spaceId:d.id});return t.getAlive()?t:void 0})).filter(vs().O9):[]),[d,n]),v=(0,r().K8)((()=>(0,bn().Mo)(x)),[x]),y=(0,r().K8)((()=>dn().A.state.appsConnectionData),[]),b=(0,r().K8)((()=>function(e){return e.filter((e=>e.isInternalBot())).map((e=>e.id))}(x)),[x]),j=(0,r().K8)((()=>function(e,t){if(!t)return{};return e.reduce(((e,s)=>{const i=rs().L.createChildStore(t,{table:B().oo,id:s.getCreatedById()}),n=s.getIntegrationId();return n?e[n]=n in e?[...e[n],i]:[i]:e[s.id]=[i],e}),{})}(x,d)),[x,d]),C=(0,r().K8)((()=>null==d?void 0:d.getBotSettingsStore().getValue()),[d]),w=(0,r().K8)((()=>Object.keys(v.nonCompliance).length+b.length),[v.nonCompliance,b]);let M=(0,r().K8)((()=>Object.values(v.compliance).flat().length),[v.compliance]);M+=y.length;const T=(0,r().K8)((()=>null!=C&&C.integration_approval_statuses?Object.keys(C.integration_approval_statuses).length+b.length:b.length),[C,b]),k={member_connections:(0,se.jsx)(m().sA,{id:"admin.connections.tabs.member_connections",defaultMessage:"Member{numberOfIntegrations}",values:{numberOfIntegrations:0!==w&&(0,se.jsx)(me().A,{isSecondaryColor:!0,style:{marginLeft:6},children:w+hn().Ei.length})}}),workspace_connections:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(m().sA,{id:"admin.connections.tabs.workspace_connections",defaultMessage:"Workspace{numberOfIntegrations}",values:{numberOfIntegrations:0!==M&&(0,se.jsx)(me().A,{isSecondaryColor:!0,style:{marginLeft:6},children:M})}}),(0,se.jsx)(oa().A,{})]})},I=ra.map((e=>k[e])),D=(0,r().K8)((()=>"integrations"===lt().A.state.currentTab?lt().A.state.defaultSubtab:void 0),[]),P=(0,r().K8)((()=>An().A.integrations.state),[]),[R,U]=(0,i.useState)(D||"member_connections"),E=(0,r().K8)((()=>(0,ti().OX)()),[]),L=Boolean(o.integration_restrictions),O=Boolean(o.disallow_webhook_automation_action),W=(0,l().IS)((e=>({connectedSection:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative"},connectedSectionDescription:{fontSize:14,marginRight:8,color:e.lightTextColor,fontWeight:400,marginBottom:12},addMenu:{position:"absolute",right:0,top:0},discoverSectionUpsell:{backgroundColor:e.accentColors.uiBlue[100],padding:16,borderRadius:6},discoverSectionHeader:{display:"flex",justifyContent:"space-between",marginBottom:8},discoverSectionTitle:{fontSize:16,fontWeight:510},discoverSectionButtons:{display:"flex"},learnMoreButton:{padding:"0px 8px",borderRadius:4,display:"flex",alignItems:"center",color:e.blueColor},upgradeButton:{marginLeft:12,padding:"0px 14px"},alias:{marginLeft:6,width:"0.9em",height:"0.9em",padding:1,border:"1px solid",borderRadius:2}})),[]),z={member_connections:()=>(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(da,{isIntegrationRestrictionsControlledByOrganization:L}),(null==C?void 0:C.integration_restrictions)&&(0,se.jsx)("div",{style:{marginTop:"19px"},children:(0,se.jsx)(ca,{isIntegrationRestrictionsControlledByOrganization:L})}),(0,se.jsx)("div",{style:{marginTop:"19px"},children:(0,se.jsx)(ua,{isDisallowWebhookAutomationsControlledByOrganization:O})}),(0,se.jsx)(si().A,{size:s?32:18,isHidden:!s}),Boolean(null==C?void 0:C.integration_restrictions)?(0,se.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:19},children:[(0,se.jsx)(me().A,{style:{fontWeight:h().Wy.medium,display:"flex",alignItems:"center",height:28},children:(0,se.jsx)(m().sA,{id:"adminConnectionsSettings.table.allowIntegrations.title",defaultMessage:"Approved connections{numberOfIntegrations}",values:{numberOfIntegrations:0!==T&&(0,se.jsx)(me().A,{isSecondaryColor:!0,style:{marginLeft:6},children:T})}})}),(0,se.jsx)(ta,{})]}):(0,se.jsx)(me().A,{style:{fontWeight:h().Wy.medium,display:"flex",height:28,alignItems:"center",marginBottom:"19px"},children:(0,se.jsx)(m().sA,{id:"adminConnectionsSettings.table.default.title",defaultMessage:"All connections{numberOfIntegrations}",values:{numberOfIntegrations:0!==w&&(0,se.jsx)(me().A,{isSecondaryColor:!0,style:{marginLeft:6},children:w+hn().Ei.length})}})}),(0,se.jsx)(ia().Ay,{integrationIdToBotIds:v.nonCompliance,internalIntegrationIds:b,integrationIdToUsers:j}),(0,se.jsx)("div",{style:{marginTop:16,marginBottom:32,display:"grid",gridTemplateColumns:"1fr",gap:4},children:(0,se.jsx)(aa().A,{})})]}),workspace_connections:()=>{const e=Object.keys(v.compliance),s=e.length>0||p&&y.length>0,i=function(e){const{allIntegrations:t,connectedIntegrationIds:s,isEnterprise:i}=e,n=[];for(const a of t)if(!s.includes(a.id)){const e=(0,xn().Hr)(a.id);if(!e)continue;if("internal"===a.type)continue;n.push({id:a.id,appName:a.name,account:void 0,caption:a.getInfo().tagline,logo:a.getInfo().icon,shouldHideInDiscover:!1,shouldShowNewBadge:!1,shouldHideConnectAccount:!0,shouldShowUpsell:!i,integrationTypes:[e.type],capabilities:(0,se.jsx)(se.Fragment,{}),canSelectPageAccess:!1,onConnect:()=>{var t;null!=e&&null!==(t=e.oauth)&&void 0!==t&&t.accountInfoPropertyNames||"dlp"===(null==e?void 0:e.type)||"ediscovery"===(null==e?void 0:e.type)?wn().A.setState({open:!0,integrationId:a.id}):Cn().A.setState({open:!0,integrationId:a.id})},onDisconnect:()=>{}})}return n}({allIntegrations:P,connectedIntegrationIds:e,isEnterprise:E});S=S.filter((e=>!y.some((t=>t.id===e.id)))),E&&i.unshift(...S);const n=i.length>0||S.length>0;return(0,se.jsx)(se.Fragment,{children:g?(0,se.jsxs)(se.Fragment,{children:[s&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("span",{style:W.connectedSectionDescription,children:(0,se.jsx)(m().sA,{id:"admin.connections.tab.workspace_connections.description",defaultMessage:"These integrations connect your workspace to external apps, or improve security and compliance. Only workspace owners can install them"})}),(0,se.jsxs)("div",{style:W.connectedSection,children:[(0,se.jsx)("div",{style:W.addMenu,children:(0,se.jsx)(sa,{})}),(0,se.jsx)(ia().KM,{botIdToWebhookSubscriptionId:c,complianceIntegrationsIdToBotIds:v.compliance,aiConnectedApps:y})]})]}),n&&(0,se.jsxs)("div",{children:[!E&&p&&0!==S.length&&(0,se.jsx)("div",{style:{marginBottom:10,marginTop:10},children:(0,se.jsx)(na().A,{apps:S,numberOfConnectedApps:0,title:(0,se.jsx)("div",{style:W.discoverSectionTitle,children:(0,se.jsx)(m().sA,{id:"connectionsSettings.discoverNewConnectionsSection.title",defaultMessage:"Discover new connections"})})})}),(0,se.jsx)("div",{style:{...E?{}:W.discoverSectionUpsell,marginTop:s?32:void 0},children:(0,se.jsx)(na().A,{apps:i,numberOfConnectedApps:e.length,numberOfDisplayRows:2,title:(0,se.jsxs)("div",{style:W.discoverSectionHeader,children:[(0,se.jsx)("div",{style:W.discoverSectionTitle,children:E?(0,se.jsx)(m().sA,{id:"connectionsSettings.discoverNewConnectionsSection.title",defaultMessage:"Discover new connections"}):(0,se.jsx)(m().sA,{id:"connectionsSettings.discoverNewConnectionsSection.titleUpsell",defaultMessage:"Upgrade to Enterprise to use these connections"})}),!E&&(0,se.jsxs)("div",{style:W.discoverSectionButtons,children:[(0,se.jsxs)(Es().A,{onClick:()=>{A().f({environment:t,url:"https://www.notion.so/integrations/collections/security-and-compliance"})},style:W.learnMoreButton,children:[(0,se.jsx)(m().sA,{defaultMessage:"Learn more",id:"connectionsSettings.discoverNewConnectionsSection.learnMore"}),(0,mn().y)(W.alias)]}),(0,se.jsx)(ks().A,{style:W.upgradeButton,onClick:async()=>{d&&(In().$W({environment:t,spaceId:d.id}),await Dn().A.waitUntilReady()),jt().K(t,{from:"workspace_connections",upsell:{type:"product",product:"enterprise",limit:{type:"none"}},dontOpenPlansOnCancel:!0})},children:(0,se.jsx)(m().sA,{defaultMessage:"Upgrade",id:"connectionsSettings.discoverNewConnectionsSection.upgrade"})})]})]})})})]})]}):null})}},q=e=>z[e];return g?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ui().Ay,{tabs:I,selectedIndex:ra.findIndex((e=>e===R)),onChange:e=>(e=>{U(ra[e])})(e),style:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabTitleStyle:{fontSize:16}}),q(R)()]}):q("member_connections")()}function da(e){let{isIntegrationRestrictionsControlledByOrganization:t}=e;const s=(0,a().v3)(),i=(0,r().K8)((()=>Je().default.state.currentSpaceStore),[]),{isMobile:n}=s.device,o=(0,r().K8)((()=>(0,ti().OX)()),[]),l=(0,r().K8)((()=>null==i?void 0:i.getBotSettingsStore().getValue()),[i]);return(0,se.jsx)(Fs().A,{isMobile:n,isLocked:t,lockedTooltip:(0,js().C)(),title:(0,se.jsx)(m().sA,{id:"adminConnectionsSettings.requireApprovalSetting.title",defaultMessage:"Restrict members from adding connections"}),caption:(0,Sn().az)(l)?(0,se.jsx)(m().sA,{id:"adminConnectionsSettings.requireApprovalSetting.allowList.workspaceOwner.caption",defaultMessage:"Workspace members can only install connections pre-approved by workspace owners."}):(0,se.jsx)(m().sA,{id:"adminConnectionsSettings.requireApprovalSetting.off.caption",defaultMessage:"Workspace members can install any new connection."}),upsellOptions:{shouldUpsell:!o,subscriptionTier:"enterprise",analyticsName:"integration_settings"},type:"dropdown",currentOption:(0,Sn().az)(l)?"allow_list":"any_integrations",options:[{key:"any_integrations",label:(0,se.jsx)(m().sA,{id:"adminIntegrationSettings.integrationRestrictions.off.title",defaultMessage:"No restrictions"}),caption:(0,se.jsx)(m().sA,{id:"adminConnectionsSettings.connectionRestrictions.off.caption",defaultMessage:"Workspace members can install any connection."})},{key:"allow_list",label:(0,se.jsx)(m().sA,{id:"adminIntegrationSettings.integrationRestrictions.allowList.title",defaultMessage:"Only from approved list"}),caption:(0,se.jsx)(m().sA,{id:"adminConnectionsSettings.connectionRestrictions.allowList.caption",defaultMessage:"Workspace members can only install connections pre-approved by a workspace owner."})}],onSelectOption:e=>{t||function(e){const{environment:t,currentSpaceStore:s,botSettings:i,setting:n}=e;if(s){if("allow_list"===n&&(0,Sn().az)(i))return;const e="allow_list"===n?"approved_only":void 0;T().createAndCommit({userAction:"AdminIntegrationSettings.handleIntegrationRestrictionSelect",environment:t,canUndo:!0,perform:t=>{vn().zv({store:s,data:{bot_settings:{...i,integration_restrictions:e}},transaction:t})}})}}({environment:s,currentSpaceStore:i,botSettings:l,setting:e})},info:[{key:"learn_more",label:(0,se.jsx)(m().sA,{id:"adminConnectionsSettings.connectionRestrictions.info.title",defaultMessage:"Workspace owners can always install and approve new connections."})}]})}function ca(e){const{isIntegrationRestrictionsControlledByOrganization:t}=e,s=(0,a().v3)(),i=(0,l().DP)(),n=(0,r().K8)((()=>Je().default.state.currentSpaceStore),[]),{isMobile:o}=s.device,d=(0,r().K8)((()=>(0,ti().OX)()),[]),c=(0,r().K8)((()=>null==n?void 0:n.getBotSettingsStore().getValue()),[n]);return(0,se.jsx)(Fs().A,{isMobile:o,title:(0,se.jsx)(m().sA,{id:"adminConnectionsSettings.autoApproveBuiltByNotion.title",defaultMessage:"Auto-approve <builtbynotion>Built by Notion</builtbynotion> connections",values:{builtbynotion:e=>(0,se.jsxs)("span",{style:{color:i.invoiceGreen,marginRight:4,marginLeft:4},children:[(0,fn().m)({width:14,display:"inline",verticalAlign:"bottom",marginRight:2}),e]})}}),caption:(0,se.jsx)(m().sA,{defaultMessage:"Toggle this on to approve all workspace members to install connectionsÂ <helpcenterlink>built by Notion</helpcenterlink>.",id:"adminConnectionsSettings.autoApproveBuiltByNotion.caption",values:{helpcenterlink:e=>(0,se.jsx)(di().A,{href:(0,qe().xS)("guides.enterpriseIntegrationSettings"),children:e})}}),upsellOptions:{shouldUpsell:!d,subscriptionTier:"enterprise",analyticsName:"integration_settings"},type:"toggle",isOn:"approved_or_built_by_notion"===(null==c?void 0:c.integration_restrictions),onToggle:()=>{t||function(e){const{environment:t,currentSpaceStore:s,botSettings:i}=e;if(s){const e="approved_or_built_by_notion"===(null==i?void 0:i.integration_restrictions)?"approved_only":"approved_or_built_by_notion";T().createAndCommit({userAction:"AdminIntegrationSettings.handleAutoApproveBuiltByNotionToggle",environment:t,canUndo:!0,perform:t=>{vn().zv({store:s,data:{bot_settings:{...i,integration_restrictions:e}},transaction:t})}})}}({environment:s,currentSpaceStore:n,botSettings:c})},isLocked:t,lockedTooltip:(0,js().C)()})}function ua(e){let{isDisallowWebhookAutomationsControlledByOrganization:t}=e;const s=(0,a().v3)(),{isMobile:n}=s.device,o=(0,r().K8)((()=>Je().default.state.currentSpaceStore),[]),l=(0,r().K8)((()=>(0,ti().OX)()),[]),d=(0,r().K8)((()=>Boolean(null==o?void 0:o.getSettingsStore().getKeyStore("disallow_webhook_automation_action").getValue())),[o]),c=!d,u=(0,i.useCallback)((()=>{o&&!t&&T().createAndCommit({userAction:"AdminIntegrationSettings.handleAutoApproveBuiltByNotionToggle",environment:s,canUndo:!0,perform:e=>{vn().zv({store:o.getSettingsStore(),data:{disallow_webhook_automation_action:!d},transaction:e})}})}),[o,d,s,t]);return(0,se.jsx)(Fs().A,{isMobile:n,isLocked:t,lockedTooltip:(0,js().C)(),title:(0,se.jsx)(m().sA,{id:"adminConnectionsSettings.allowWebRequestsInAutomations.title",defaultMessage:"Allow webhooks in automations"}),caption:(0,se.jsx)(m().sA,{defaultMessage:"Allow webhooks to third-party tools in database automations and buttons.",id:"adminConnectionsSettings.allowWebRequestsInAutomations.caption"}),upsellOptions:{shouldUpsell:!l,subscriptionTier:"enterprise",analyticsName:"integration_settings"},type:"toggle",isOn:c,onToggle:u})}var ga=()=>s(378765);const pa=function(e){let{spaceStore:t,userStore:n,organizationOverrides:o}=e;const l=(0,a().v3)(),d=(0,r().uB)(void 0,un().A),{device:c}=l,u=(0,r().K8)((()=>(0,s(437622).s7)(l)),[l]);return(0,i.useEffect)((()=>{u||j().Ow({currentTab:"members"})}),[u]),u?(0,se.jsxs)(Dt().Ay,{children:[(0,se.jsx)(re().A,{large:!c.isMobile||void 0,divider:c.isMobile?void 0:"full",style:{paddingBottom:12},children:(0,se.jsx)(m().sA,{id:"spaceConnectionsSettings.title",defaultMessage:"Connections"})}),(0,se.jsx)(fa,{spaceStore:t,userStore:n,requestStore:d,organizationOverrides:o})]}):null};function ma(e){let{error:t,result:s,ready:i,organizationOverrides:n}=e;return(0,r().K8)((()=>Je().default.state.currentSpaceStore),[])?(0,se.jsxs)(ga().A,{loaded:i,spinnerSize:"sm",showSpinnerTimeout:600,children:[t&&(0,se.jsx)("div",{children:(0,se.jsx)(m().sA,{id:"spaceIntegrationSettings.error",defaultMessage:"Something went wrongâ€¦"})}),s&&(0,se.jsx)(la,{...s,organizationOverrides:n})]}):null}function fa(e){let{spaceStore:t,userStore:s,requestStore:i,organizationOverrides:n}=e;const o=(0,a().v3)(),l=(0,r().uB)(i,un().A),d=(0,cn().X)("ai_connector_discoverability");return(0,se.jsx)(zn().A,{requestStore:l,request:{spaceId:t.id,userId:s.id},performRequest:async e=>(d&&await async function(e,t){let{spaceId:s}=e;const i=await U().callApi({eventName:"getConnectedAppsForUniversalQna",environment:t,data:{spaceId:s},headers:(0,P().WS)({spaceId:s})});var n;return"success"===i.type&&dn().A.setState({...dn().A.state,appsConnectionData:(null===(n=i.data)||void 0===n?void 0:n.appsData)||[]}),[]}(e,o),async function(e,t){let{spaceId:s}=e;return{guestBotIds:(await Promise.all([on().Ju({environment:t,table:an().NX,id:s,type:"guest"}),on().Ju({environment:t,table:an().NX,id:s,type:"external"}),ln().oX({environment:t}),rn().g({environment:t})]))[0].botIds}}(e,o)),render:(e,t,s)=>(0,se.jsx)(ma,{error:e,result:t,ready:s,organizationOverrides:n})})}var ha=()=>s(297872),Sa=()=>s(453697),xa=()=>s(580635),va=()=>s(382055),ya=()=>s(319625),ba=()=>s(532313);const ja=10,Aa=[50,100,200,500,1e3],Ca=50;function wa(e){var t;let{spaceStore:s,samlConfigStore:n,memberCountFilter:o,isPrimarySpace:l}=e;const d=(0,a().v3)(),c=(0,r().K8)((()=>n.state.emailDomains),[n]),[u,g]=(0,i.useState)({spaces:[],nextEarliestCreatedAt:Date.now(),numPagesLoaded:0,hasNextPage:!1,loading:!1,error:void 0}),p=(0,Rs().P9)({name:"claimable_spaces",spaceId:s.id,userId:null===(t=d.currentUser)||void 0===t?void 0:t.id}),m=(0,i.useCallback)((async e=>{if(p&&0!==c.length&&l&&u.nextEarliestCreatedAt&&!u.loading&&!(e&&u.numPagesLoaded>0||u.error)){g((e=>({...e,loading:!0})));try{const{spaces:e,earliestCreatedAt:t,hasMoreSpaces:i}=await(0,ba().L5)({fn:async()=>await async function(e,t,s,i,n){const a=await U().callApi({eventName:"getSpacesCreatedByUserWithDomains",environment:e,data:{spaceId:t,emailDomains:s,spacesLimit:ja,memberCountFilter:n,spaceCreatedTimeUpperBound:i}});if("failed"===a.type)throw a.error;return{spaces:a.data.results.map((e=>({id:e.id,name:e.spaceName,icon:e.spaceIcon,createdAt:e.spaceCreatedTime,memberCount:e.memberCount,subscriptionTier:e.subscriptionTier,creatorEmailDomain:e.spaceCreatedByDomain,creator:e.spaceCreator,admins:e.admins,spaceRequest:e.spaceRequest,isDelinquent:e.isDelinquent,isPendingBilling:e.isPendingBilling,isActorInSpace:e.isActorInSpace}))),earliestCreatedAt:a.data.hasMoreSpaces?a.data.earliestCreatedAt:void 0,hasMoreSpaces:a.data.hasMoreSpaces}}(d,s.id,c,u.nextEarliestCreatedAt?u.nextEarliestCreatedAt-1:Date.now(),o),handleError:(e,t)=>t?{status:"throw",error:e}:{status:"retry"},retryAttemptsMS:Aa,retryAttemptRandomOffsetMS:Ca,initialInput:void 0});g((s=>{const n=[...s.spaces],a=new Set(s.spaces.map((e=>e.id)));for(const t of e)a.has(t.id)||n.push(t);return{spaces:n,nextEarliestCreatedAt:t,numPagesLoaded:s.numPagesLoaded+1,hasNextPage:i,loading:!1,error:void 0}}))}catch(t){const e=(0,ya().A)(t);g((t=>({...t,loading:!1,error:e})))}}}),[d,p,o,l,s,c,u.nextEarliestCreatedAt,u.numPagesLoaded,u.loading,u.error]);const f=(0,i.useCallback)((async()=>{await m(!1)}),[m]),h=(0,i.useCallback)((async()=>{await m(!0)}),[m]),S=(0,i.useCallback)((async()=>{g({spaces:[],nextEarliestCreatedAt:Date.now(),numPagesLoaded:0,hasNextPage:!1,loading:!1,error:void 0}),await m(!0)}),[m]);return{claimableSpaces:u.spaces,loading:u.loading,error:u.error,hasNextPage:u.hasNextPage,loadFirstPage:h,loadNextPage:f,resetFirstPage:S,setSpaceRequest:function(e,t){g((s=>{const i=s.spaces.map((s=>s.id===e?{...s,spaceRequest:t}:s));return{...s,spaces:i}}))},removeClaimableSpace:function(e){g((t=>{const s=t.spaces.filter((t=>t.id!==e));return{...t,spaces:s}}))}}}var Ma=()=>s(187174);async function Ta(e){var t;const{environment:s,spaceId:i,store:n}=e;if(!(await(0,Rs().Se)(s,{name:"saml",spaceId:i,userId:null===(t=Je().default.state.currentUserStore)||void 0===t?void 0:t.id})))return n.reset(),{};const a=await U().callApi({eventName:"getSamlConfigForSpace",environment:s,data:{spaceId:i}});if("failed"===a.type)b().Qg(a);else if(a.data&&a.data.samlConfig){const e={...a.data.samlConfig,useMetadataUrl:!Boolean(a.data.samlConfig.idpMetadata)};return n.setState(e),a.data}return n.reset(),{}}const ka={SettingsPage:"settings-page",WorkspacesPage:"workspaces-page",ManagedUsersPage:"managed-users-page"};let Ia=function(e){return e[e.Single=0]="Single",e[e.Multi=1]="Multi",e}({});const Da=(0,i.createContext)(null);function Pa(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:n,children:o}=e;const l=(0,a().v3)(),[d,c]=(0,i.useState)(ka.SettingsPage),[u,g]=(0,i.useState)(Ia.Single),m=(0,r().K8)((()=>s.state.emailDomains),[s]),f=(0,r().K8)((()=>Boolean(s.state.id)&&s.state.id===t.id),[s,t]),{loading:h,error:S,loaded:x}=function(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:i}=e;const n=(0,a().v3)(),[{status:o,error:r}]=(0,Ma().Yb)((async()=>{const e=await Ta({environment:n,spaceId:t.id,store:s});return(0,D().US)(e)?e:e.samlConfig?{samlResponse:e,domainResponse:await i.updateValueForSpace({environment:n,spaceId:t.id,store:i})}:{samlResponse:e,domainResponse:void 0}}),[n,s,t,i]);return{loading:"pending"===o,loaded:"resolved"===o,error:r}}({spaceStore:t,samlConfigStore:s,domainSettingsStore:n}),{loading:v,error:y,claimableSpaces:b,setSpaceRequest:j,removeClaimableSpace:A,hasNextPage:C,loadNextPage:w,loadFirstPage:M,resetFirstPage:T}=wa({spaceStore:t,samlConfigStore:s,isPrimarySpace:f,memberCountFilter:"single"}),{loading:k,error:I,claimableSpaces:P,setSpaceRequest:R,removeClaimableSpace:_,hasNextPage:B,loadNextPage:E,loadFirstPage:L,resetFirstPage:O}=wa({spaceStore:t,samlConfigStore:s,isPrimarySpace:f,memberCountFilter:"multi"}),W=b.length+P.length>0,[z,q,F,N,K,G,V,H]=u===Ia.Single?[v,y,b,j,A,C,w,M,T]:[k,I,P,R,_,B,E,L,O],{loading:$,error:Y,domainVerifications:Q}=function(e){let{spaceStore:t}=e;const s=(0,a().v3)(),[n,o]=(0,i.useState)([]),[{status:r,error:l}]=(0,Ma().Yb)((async()=>{if(!(0,p().HO)(t.getSubscriptionTier()))return void o([]);const e=await U().callApi({eventName:"getDomainVerificationCodesForSpace",environment:s,data:{spaceId:t.id,verifiedOnly:!0}});"success"===e.type?o(e.data.domainVerifications):o([])}),[s,t]);return{loading:"pending"===r,domainVerifications:"resolved"===r?n:[],error:l}}({spaceStore:t,emailDomains:m});(0,i.useEffect)((()=>{M(),L()}),[F,M,L]);const J={page:d,navigateTo:function(e){c(e),0===b.length&&P.length>0&&g(Ia.Multi),"workspaces-page"===e&&va().Vp(l,{verifiedDomains:m,tab:u===Ia.Single?"single":"multi"})},loadingSaml:h,loadingSpaces:z,loadingVerifications:$,errorSaml:S,errorClaimableSpaces:q,errorVerifications:Y,loadedSaml:x,domainVerifications:Q,hasBrowsableSpaces:W,claimableSpaces:F,setSpaceRequest:N,removeClaimableSpace:K,resetInitialClaimableSpaces:H,hasMoreClaimableSpaces:G,loadMoreClaimableSpaces:V,tab:u,setSelectedTab:function(e){g(e),"workspaces-page"===d&&va().Vp(l,{verifiedDomains:m,tab:e===Ia.Single?"single":"multi"})},verifiedDomains:m};return(0,se.jsx)(Da.Provider,{value:J,children:o})}var Ra=()=>s(133033),_a=()=>s(285790),Ba=(s(672577),()=>s(560838)),Ua=()=>s(818044),Ea=()=>s(173019),La=()=>s(640479),Oa=()=>s(370360),Wa=()=>s(412632),za=()=>s(436572);const qa={managedUsers:[],filters:{query:"",multiFactorStatus:void 0,workspaceId:void 0},numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0};function Fa(e){let{spaceStore:t,samlConfigStore:s,userStatus:n}=e;const o=(0,a().v3)(),[l,d]=(0,i.useState)(qa),c=(0,i.useRef)(void 0),u=(0,r().K8)((()=>Boolean(s.state.id)&&s.state.id===t.id),[s,t]),g=(0,r().K8)((()=>s.state.emailDomains),[s]),p=(0,i.useCallback)((async e=>{if(0===g.length)return;if(!u)return;let s=l.loading,i=l.error,a=l.hasNextPage,r=l.paginationToken;if(e.restartSearch&&(d((e=>({...qa,filters:e.filters}))),s=qa.loading,i=qa.error,a=qa.hasNextPage,r=qa.paginationToken),a&&!s&&!i){d((e=>({...e,loading:!0}))),c.current=l.filters;try{var p;const e=await U().callApi({eventName:"getManagedUsers",environment:o,data:{spaceId:t.id,emailDomains:g,query:l.filters.query,multiFactorStatus:l.filters.multiFactorStatus,workspaceId:l.filters.workspaceId,paginationToken:r,userStatus:n}});if(ys().F2(o,{filters:{multiFactorStatus:l.filters.multiFactorStatus,workspaceId:l.filters.workspaceId},query_length:(null===(p=l.filters.query)||void 0===p?void 0:p.length)??0,current_page:r,user_status:n}),"failed"===e.type)throw e.error;const s=e.data.nextPaginationToken,i=e.data.results;d((e=>{const t=[...e.managedUsers],n=new Set(e.managedUsers.map((e=>e.userId)));for(const s of i)n.has(s.userId)||t.push(s);return{...e,managedUsers:t,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:s,hasNextPage:Boolean(s)}}))}catch(m){const e=(0,ya().A)(m);d((t=>({...t,loading:!1,error:e})))}}}),[o,t,g,u,l.loading,l.error,l.hasNextPage,l.paginationToken,l.filters,n]);(0,i.useEffect)((()=>{f().n4(c.current,l.filters)||p({restartSearch:!0})}),[l.filters,p]);const m=(0,i.useCallback)((()=>p({restartSearch:!1})),[p]),h=(0,i.useCallback)((e=>{d((t=>({...t,filters:{...t.filters,...e}})))}),[]),S=(0,i.useCallback)(((e,t)=>{d((s=>({...s,managedUsers:s.managedUsers.map((s=>s.userId===e?{...s,workspaces:s.workspaces.filter((e=>e.id!==t))}:s))})))}),[]),x=(0,i.useCallback)((e=>{d((t=>({...t,managedUsers:[...t.managedUsers,e]})))}),[]),v=(0,i.useCallback)((e=>{d((t=>({...t,managedUsers:t.managedUsers.filter((t=>t.userId!==e))})))}),[]);return{managedUsers:l.managedUsers,filters:l.filters,loading:l.loading,error:l.error,removeWorkspaceFromUser:S,addUserToManagedUsers:x,removeUserFromManagedUsers:v,setFilters:h,hasNextPage:l.hasNextPage,loadNextPage:m}}let Na=function(e){return e[e.NotSuspended=0]="NotSuspended",e[e.Suspended=1]="Suspended",e}({});function Ka(e){switch(e){case Na.Suspended:return"suspended";case Na.NotSuspended:return"notSuspended";default:(0,vs().HB)(e)}}var Ga=()=>s(738418),Va=()=>s(625383),Ha=()=>s(368332);function $a(e){let{workspace:t}=e;const s=(0,m().tz)(),i=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}})),[]);return(0,se.jsxs)("div",{style:i.container,children:[t.name??(0,Ha().a)(s),t.isExternal?(0,se.jsx)(Ya,{}):null]})}function Ya(){const e=(0,l().IS)((e=>({icon:{marginLeft:4,height:14,width:14,opacity:.5}})),[]);return(0,se.jsx)(pe().A,{render:t=>(0,se.jsx)("div",{...t,children:(0,Ga().G)(e.icon)}),renderTooltip:()=>(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.userAccess.externalSpaceNameTooltipText",defaultMessage:"This is an external workspace that does not belong to this user."})})}function Qa(e){let{workspaceSummaries:t}=e;const s=(0,m().tz)(),i=(0,l().IS)((e=>({title:{marginRight:8},noWorkspaces:{paddingInline:8,opacity:.5},workspaceName:{maxWidth:"80%"},plusMore:{opacity:.5,marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",marginLeft:4}})),[]);if(t.length<=0)return(0,se.jsx)(me().A,{style:i.noWorkspaces,children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.userAccess.noWorkspaces",defaultMessage:"No workspaces"})});const n=t.find((e=>e.name)),a=n?n.name:(0,Ha().a)(s),o=t.length-1;return(0,se.jsxs)("div",{style:i.titleContainer,children:[(0,se.jsx)(me().A,{isInline:!0,style:i.workspaceName,children:a}),!n||n.isExternal?(0,se.jsx)(Ya,{}):null,o>0?(0,se.jsxs)(me().A,{isInline:!0,style:i.plusMore,children:[(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.userAccess.additionalCount",defaultMessage:"+{numRemainingWorkspaces}",values:{numRemainingWorkspaces:o}}),""]}):null]})}var Ja=()=>s(30626),Xa=()=>s(463830),Za=()=>s(575143),eo=()=>s(406699),to=()=>s(962036);const so=(0,m().YK)({menuAriaLabel:{defaultMessage:"Open action menu for this user.",id:"identityAndProvisioning.managedUsers.table.menu.ariaLabel"}});function io(e){let{managedUser:t,managedUserActionSections:s}=e;const i=(0,r().uB)(void 0,Xa().A),n=(0,m().tz)(),a=(0,l().IS)((()=>({container:{minWidth:265}})),[]);return(0,se.jsx)(eo().Ay,{popupType:Zn().nl.Popup,style:a.container,buttonPopupStore:i,renderOrigin:e=>(0,se.jsx)(_a().A,{ariaLabel:n.formatMessage(so.menuAriaLabel),icon:Ja()._,...e}),render:()=>(0,se.jsx)(no,{managedUser:t,popupStore:i,managedUserActionSections:s})})}function no(e){let{managedUser:t,popupStore:s,managedUserActionSections:i}=e;const n=[],a=(0,l().IS)((()=>({destructiveIcon:{fill:Rn().Ay.red,color:Rn().Ay.red}})),[]);for(const[o,r]of i.entries()){const e=r.map(((e,s)=>({key:s,render:s=>{var i,n;return(0,se.jsx)(Za().A,{...s,shouldWrapCaption:!0,svg:t=>e.icon(e.isDestructive?{...t,...a.destructiveIcon}:t),title:e.title,style:{paddingTop:8,paddingBottom:8,...e.isDestructive?a.destructiveIcon:{}},disabled:null===(i=e.getDisabledState)||void 0===i?void 0:i.call(e,t),disabledFeedback:null===(n=e.getDisabledState)||void 0===n?void 0:n.call(e,t)})},action:()=>e.onClick(t)}))),s={key:`section-${o}`,render:e=>(0,se.jsx)(Vn().A,{topBorder:o>0,...e}),items:e};n.push(s)}return(0,se.jsxs)(Fn().A,{menuType:On().gu.Popup,children:[(0,se.jsx)(Kn().Ay,{type:Kn().Oh.Vertical,initialFocus:void 0,sections:n,onAccept:()=>{s.setState({open:!1})}}),(0,se.jsx)(Vn().A,{topBorder:!0,children:(0,se.jsx)(to().A,{title:(0,se.jsx)(m().sA,{defaultMessage:"Learn about user suspension",id:"managedUsersDashboard.userActionsMenu.helpButton"}),href:(0,qe().xS)("guides.managedUsers"),analyticsFrom:"managed_users_dashboard_user_actions_menu"})})]})}var ao=()=>s(236527),oo=function(e){return e.ManagedUser="managed-user",e.Loading="loading",e}(oo||{});const ro={marginLeft:4,height:14,width:14,opacity:.5},lo=[{id:"user",headerTitle:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.user",defaultMessage:"Users"}),renderCell:e=>e.type===oo.ManagedUser?(0,se.jsx)(ao()._,{userId:e.managedUser.userId}):(0,se.jsx)(ao().a,{}),widthData:{width:70},sortable:!1},{id:"access",headerTitle:(0,se.jsx)("span",{style:{paddingInline:8},children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.access",defaultMessage:"Workspaces"})}),renderCell:e=>e.type===oo.ManagedUser?(0,se.jsx)(Qa,{workspaceSummaries:e.managedUser.workspaces}):(0,se.jsx)(s(75491).Kb,{}),widthData:{width:60},sortable:!1},{id:"lastActive",headerTitle:(0,se.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},children:[(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.lastActive",defaultMessage:"Last active"}),(0,se.jsx)(pe().A,{render:e=>(0,se.jsx)("div",{...e,children:(0,Ga().G)(ro)}),renderTooltip:()=>(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.lastActive.tooltip",defaultMessage:"This may be delayed by several hours."})})]}),renderCell:e=>e.type===oo.ManagedUser?(0,se.jsx)(s(893468).F,{lastActiveAt:e.managedUser.lastActiveAt,containerStyle:{opacity:.5}}):(0,se.jsx)(Va().h,{}),widthData:{width:60},sortable:!1},{id:"menu",headerTitle:null,renderCell:e=>e.type===oo.ManagedUser?(0,se.jsx)(io,{managedUser:e.managedUser,managedUserActionSections:e.managedUserActionSections}):null,widthData:{width:15},sortable:!1,hasClickableContents:!0}],co=[{id:"1",isClickable:!1,type:oo.Loading},{id:"2",isClickable:!1,type:oo.Loading},{id:"3",isClickable:!1,type:oo.Loading}];function uo(e){let{managedUsers:t,loadMoreManagedUsers:s,onEditDetails:i,loading:n,managedUserActionSections:a}=e;const o=t.map((e=>({id:e.userId,type:oo.ManagedUser,managedUser:e,isClickable:!0,managedUserActionSections:a}))),r=(0,l().IS)((e=>(0,ue().rC)({columnRenderInfo:lo,theme:e,containerMarginTop:0})),[]);const d=n?[...o,...co]:o;return(0,se.jsx)(ue().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:lo,rows:d,onRowClick:function(e){e.type===oo.ManagedUser&&i(e.managedUser)},renderNoRowsComponent:()=>(0,se.jsx)(go,{loading:n}),styles:r,loadMoreMethod:s?{type:"scroll",onLoadMore:s}:void 0})}function go(e){const t=(0,l().IS)((()=>({text:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]);return(0,se.jsx)(me().A,{isSmall:!0,style:t.text,children:!e.loading&&(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.empty",defaultMessage:"No users found."})})}var po=()=>s(771495),mo=()=>s(869190),fo=()=>s(402390),ho=()=>s(920949),So=()=>s(907514),xo=()=>s(145214),vo=()=>s(139125),yo=()=>s(101919);function bo(e){let{title:t,byline:s,isOn:i,onToggle:n,disabled:a,tooltipForDisabled:o}=e;function r(){a||n()}return(0,se.jsx)(pe().A,{placement:he().W.Top,alignment:he().C.End,disableTooltip:!o||!a,renderTooltip:()=>o,render:e=>(0,se.jsx)("div",{...e,children:(0,se.jsx)(Ds,{title:t,byline:s,settingItem:(0,se.jsx)(Xt().A,{on:i,disabled:a,onClick:r})})})})}var jo=()=>s(721249),Ao=()=>s(555893);function Co(e){const{userId:t,workspaces:s,spaceStore:n,removeWorkspaceFromUser:a}=e,o=(0,l().IS)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:8,marginTop:12}})),[]);return(0,se.jsx)("div",{style:o.container,children:s.map(((e,o)=>(0,se.jsxs)(i.Fragment,{children:[(0,se.jsx)(wo,{userId:t,spaceId:n.id,workspace:e,removeWorkspaceFromUser:a}),o<s.length-1?(0,se.jsx)(si().A,{size:8}):null]},e.id)))})}function wo(e){const{userId:t,spaceId:s,workspace:i,removeWorkspaceFromUser:n}=e,o=(0,m().tz)(),r=(0,a().v3)(),d=Mo(i),c=(0,l().IS)((()=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:12,overflow:"hidden"},workspaceContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",gap:12,overflow:"hidden"},iconContainer:{alignSelf:"center"},textContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},name:{fontSize:14,fontWeight:500},nameUntitled:{fontSize:14,fontWeight:500,opacity:.25},byline:{lineHeight:1.3,fontSize:12,opacity:.5}})),[]);async function u(){ys().PG(r,{external_space_id:i.id});const{accept:e}=await b().Gh({message:(0,se.jsx)(me().A,{style:b().xh.title,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.message",defaultMessage:"Remove user from workspace?"})}),description:(0,se.jsx)(me().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.description",defaultMessage:"This user will no longer have access to the workspace you are removing them from. This action is not reversible."})}),acceptLabel:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.acceptLabel",defaultMessage:"Remove"}),cancelLabel:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.cancelLabel",defaultMessage:"Go back"})});if(!e)return;const a=await U().callApi({eventName:"removeManagedUserFromSpace",environment:r,data:{userId:t,targetSpaceId:i.id,requestingSpaceId:s}});ys().st(r,{external_space_id:i.id}),"success"===a.type?(n(t,i.id),za().D6({label:(0,se.jsx)(m().sA,{defaultMessage:"Successfully removed user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceConfirmation",values:{workspaceName:i.name}})})):za().D6({label:(0,se.jsx)(m().sA,{defaultMessage:"Failed to remove user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceFailure",values:{workspaceName:i.name}})})}const g=i.icon?{pointer:{table:an().NX,id:i.id,spaceId:i.id},icon:i.icon}:void 0;return(0,se.jsx)("div",{style:c.container,children:(0,se.jsxs)("div",{style:c.workspaceContainer,children:[(0,se.jsx)("div",{style:c.iconContainer,children:(0,se.jsx)(Gn().A,{disabled:!0,icon:g,isEmptyPage:!1,size:28,title:i.name,isLarge:!0,emojiSize:24,isRaw:!1})}),(0,se.jsxs)("div",{style:c.textContainer,children:[(0,se.jsx)(me().A,{style:c.name,isMultiline:!0,children:(0,se.jsx)($a,{workspace:i})}),(0,se.jsx)(me().A,{style:c.byline,children:(0,se.jsx)(To,{workspace:i,intl:o})})]}),(0,se.jsx)("div",{children:(0,se.jsx)(pe().A,{render:e=>(0,se.jsx)(Rt().p,{isRed:!0,onClick:u,disabled:d,disabledFeedback:d,...e,children:(0,se.jsx)(m().sA,{defaultMessage:"Remove",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace"})}),renderTooltip:()=>(0,se.jsx)(m().sA,{defaultMessage:"You cannot remove this user from the workspace because they are the only user in the workspace. To remove this user, delete the workspace instead.",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace.disableTooltip"}),disableTooltip:!d,placement:he().W.Bottom})})]})})}function Mo(e){const t=e.membersCount;return"number"==typeof t?1===t:1===t.length&&1===t[0]}function To(e){const{workspace:t,intl:s}=e;return Mo(t)?(0,se.jsx)(m().sA,{defaultMessage:"{plan} Â· 1 member",id:"identityAndProvisioning.managedUsers.table.userAccess.oneMemberWorkspace",values:{plan:(0,p().u2)(t.plan,s)}}):Array.isArray(t.membersCount)?1===t.membersCount.length?(0,se.jsx)(m().sA,{defaultMessage:"{plan} Â· {lowerEnd}+ members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersLowerEndRange",values:{plan:(0,p().u2)(t.plan,s),lowerEnd:t.membersCount[0]}}):(0,se.jsx)(m().sA,{defaultMessage:"{plan} Â· {lowerEnd} - {higherEnd} members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersRange",values:{plan:(0,p().u2)(t.plan,s),lowerEnd:t.membersCount[0],higherEnd:t.membersCount[1]}}):(0,se.jsx)(m().sA,{defaultMessage:"{plan} Â· {numMembers} {numMembers, plural, one {member} other {members}}",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembers",values:{plan:(0,p().u2)(t.plan,s),numMembers:t.membersCount}})}const ko=(0,m().YK)({namePlaceholder:{defaultMessage:"Display name",id:"identityAndProvisioning.managedUsers.table.userAccess.namePlaceholder"},emailPlaceholder:{defaultMessage:"Email",id:"identityAndProvisioning.managedUsers.table.userAccess.emailPlaceholder"},supportAccessFailed:{defaultMessage:"Failed to load user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.supportAccessFailed"}});function Io(e){let{spaceStore:t,managedUser:s,onClose:i,removeWorkspaceFromUser:n}=e;const a=Boolean(s),{isAccessGranted:o,toggleDataAccessConsent:r,loading:l}=(0,Ao().e)({userId:null==s?void 0:s.userId,spaceId:t.id});return(0,se.jsx)(ai().A,{open:a,onDismiss:i,preventHideChildrenWhileOpening:!0,render:()=>s?(0,se.jsx)(Do,{managedUser:s,isAccessGranted:o,toggleDataAccessConsent:r,loadingSupportAccess:l,renderWorkspacesOverview:()=>(0,se.jsx)(Co,{spaceStore:t,userId:s.userId,workspaces:s.workspaces,removeWorkspaceFromUser:n})}):null})}function Do(e){let{managedUser:t,renderWorkspacesOverview:s,isAccessGranted:i,toggleDataAccessConsent:n,loadingSupportAccess:o}=e;const d=(0,m().tz)(),c=(0,a().v3)(),u=(0,r().K8)((()=>new(ee().LU)(c,{id:t.userId,table:B().oo})),[t,c]),{hasStagedChanges:g,resetState:p,saveChanges:f,loading:h,profilePhoto:S,name:x,email:v}=(0,jo().u)({userStore:u}),y=(0,r().K8)((()=>u.getIsSuspended()?{type:"suspended"}:(0,vo().qh)({profilePhoto:S.value,name:x.value,email:v.value})),[u,S.value,x.value,v.value]),b=function(e){const{loadingSupportAccess:t}=e;return(0,l().IS)((e=>({container:{position:"relative",display:"flex",flexDirection:"column",background:e.popoverBackground,width:420,maxHeight:520,overflow:"hidden",borderRadius:8},innerContainer:{position:"relative",display:"flex",flexDirection:"column",width:"100%",height:"100%",overflowY:"auto",padding:"36px 24px",gap:16},label:{color:e.mediumTextColor},horizontalLabel:{color:e.mediumTextColor,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:4},value:{color:e.regularTextColor},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:e.modalBackground},avatarContainer:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},iconStyle:{border:`1px solid ${e.tableDividerColor}`,color:e.lightTextColor,fontWeight:500},inputContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%",gap:8},inputRow:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},icon:{color:e.lightIconColor,fill:"currentColor",width:14,height:14},supportAccessRow:{position:"relative",width:"100%",opacity:t?.5:1},infoContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},infoRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},footer:{position:"absolute",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",paddingInline:4,boxShadow:e.shadow2XS,background:e.popoverBackground,left:0,right:0,bottom:0,height:48},button:{height:30,marginInline:4}})),[t])}({loadingSupportAccess:o}),j=(0,fo().H)(d),A=(0,r().K8)((()=>!Xe().A.state.online),[]),C=t.mfaMethods.filter((e=>"backup_code"!==e)),w=d.formatList(C.map((e=>(0,ho().YX)(e))),{type:"conjunction"});return(0,se.jsxs)("div",{style:b.container,children:[(0,se.jsxs)("div",{style:b.innerContainer,children:[(0,se.jsx)("div",{style:b.avatarContainer,children:(0,se.jsx)(vo().Ay,{size:56,avatarType:y,isOffline:A,loading:S.loading,onUploadProfilePhoto:S.set,onRemoveProfilePhoto:S.remove})}),(0,se.jsxs)("div",{style:b.inputContainer,children:[(0,se.jsxs)("div",{style:b.inputRow,children:[(0,se.jsx)(yo().A,{children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.details.nameLabel",defaultMessage:"Name"})}),(0,se.jsx)(Ls().A,{style:b.input,disabled:h,value:x.value,placeholder:d.formatMessage(ko.namePlaceholder),onChange:e=>{x.set(e.target.value)}})]}),(0,se.jsxs)("div",{style:b.inputRow,children:[(0,se.jsx)(yo().A,{children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.details.emailLabel",defaultMessage:"Email"})}),(0,se.jsx)(Ls().A,{style:b.input,disabled:h,value:v.value,placeholder:d.formatMessage(ko.emailPlaceholder),onChange:e=>{v.set(e.target.value)}})]})]}),(0,se.jsxs)("div",{style:b.infoContainer,children:[(0,se.jsxs)("div",{style:b.infoRow,children:[(0,se.jsx)(me().A,{style:b.label,isSmall:!0,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.details.accountCreatedLabel",defaultMessage:"Account created"})}),t.accountCreatedAt?(0,se.jsx)(me().A,{isSmall:!0,style:b.value,children:(0,mo().W_)(t.accountCreatedAt,"medium",j)}):(0,se.jsx)(me().A,{isSecondaryColor:!0,isSmall:!0,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.details.emptyAccountCreated",defaultMessage:"Incomplete"})})]}),(0,se.jsx)(si().A,{size:16}),(0,se.jsxs)("div",{style:b.infoRow,children:[(0,se.jsx)(me().A,{style:b.label,isSmall:!0,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.details.lastActiveLabel",defaultMessage:"Last active"})}),t.lastActiveAt?(0,se.jsx)(me().A,{isSmall:!0,style:b.value,children:(0,So().DG)(t.lastActiveAt)}):(0,se.jsx)(me().A,{isSecondaryColor:!0,isSmall:!0,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.details.emptyLastActive",defaultMessage:"No activity"})})]}),(0,se.jsx)(si().A,{size:16}),(0,se.jsxs)("div",{style:b.infoRow,children:[(0,se.jsx)(me().A,{style:b.label,isSmall:!0,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.details.mfaLabel",defaultMessage:"2-step verification method"})}),C.length>0?(0,se.jsx)(me().A,{isSmall:!0,style:b.value,children:w}):(0,se.jsx)(me().A,{isSecondaryColor:!0,isSmall:!0,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.details.emptyMfa",defaultMessage:"Not configured"})})]}),(0,se.jsx)(si().A,{size:16}),(0,se.jsx)("div",{style:b.supportAccessRow,children:(0,se.jsx)(bo,{title:(0,se.jsxs)(me().A,{style:b.horizontalLabel,isSmall:!0,children:[(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage",defaultMessage:"Support access"}),(0,se.jsx)(pe().A,{placement:he().W.Bottom,render:e=>(0,se.jsx)("div",{...e,children:(0,Ra().$)(b.icon)}),renderTooltip:()=>(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage.tooltip",defaultMessage:"Grant Notion support temporary access to this account so we can troubleshoot problems or recover content on its behalf"})})]}),byline:null,isOn:i,onToggle:n,disabled:o})})]}),(0,se.jsx)("div",{children:t.workspaces.length>0?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(yo().A,{children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.details.workspacesLabel",defaultMessage:"Workspaces"})}),s()]}):null})]}),(0,se.jsxs)(xo().A,{visible:g||h,initial:{translateY:48,opacity:0},animate:{opacity:1,translateY:0},exit:{translateY:48,opacity:0},style:b.footer,children:[(0,se.jsx)(vt().A,{size:"lg",color:"uiRed",disabled:h,style:b.button,onClick:p,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.details.cancelButton",defaultMessage:"Cancel"})}),(0,se.jsx)(ks().A,{disabled:h,style:b.button,onClick:()=>f(),children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.details.saveButton",defaultMessage:"Save changes"})})]})]})}var Po=()=>s(296746);const Ro=(0,m().YK)({placeholder:{id:"identityProvisioningSettings.managedUsers.searchInput.placeholder",defaultMessage:"Search name, email, or user ID"}});function _o(e){let{spaceStore:t,samlConfigStore:s}=e;const{navigateTo:n}=(0,i.useContext)(Da),o=(0,a().v3)(),d=(0,m().tz)(),c=(0,l().IS)((e=>({link:{fontSize:14,fontWeight:400,color:e.mediumTextColor,textDecoration:"none"},title:{marginTop:21,fontWeight:h().Wy.semibold,fontSize:17,display:"flex",justifyContent:"flex-start",alignItems:"center"},byline:{fontSize:14,fontWeight:h().Wy.regular,color:e.mediumTextColor,paddingBottom:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"},filters:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px"}})),[]),u=(0,r().K8)((()=>s.state.spaces),[s]),{managedUsers:g,filters:p,loadNextPage:f,setFilters:S,removeWorkspaceFromUser:x,loading:v,selectedTab:y,setSelectedTab:j,onOpenDetailsModal:C,onCloseDetailsModal:w,selectedUser:M,managedUserActionSections:T}=function(e){let{spaceStore:t,samlConfigStore:s}=e;const n=(0,a().v3)(),o=(0,m().tz)(),[l,d]=(0,i.useState)(),[c,u]=(0,i.useState)(Na.NotSuspended),g=(0,r().K8)((()=>n.currentUser.id),[n]),p=(0,i.useCallback)(((e,t)=>{ys().Si(n,{user_status:Ka(c),from:t}),d(e.userId)}),[n,c]),f=Fa({userStatus:"notSuspended",spaceStore:t,samlConfigStore:s}),h=Fa({userStatus:"suspended",spaceStore:t,samlConfigStore:s});let S;S=c===Na.NotSuspended?f:h;const x=(0,i.useCallback)((async e=>{ys().th(n);const{accept:s}=await b().Gh({message:(0,se.jsx)(me().A,{style:b().xh.title,children:(0,se.jsx)(m().sA,{defaultMessage:"Suspend this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.title"})}),acceptLabel:(0,se.jsx)(m().sA,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.acceptLabel"}),description:(0,se.jsx)(me().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m().sA,{defaultMessage:"This user will not be able to log into Notion and their Notion integrations will stop working. They can be unsuspended at any time from the Managed Users dashboard.",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.description"})})});if(!s)return;const i=await U().callApi({eventName:"updateUserSuspension",environment:n,data:{userId:e.userId,spaceId:t.id,suspend:!0}});ys().Az(n,{suspended_user_id:e.userId}),"failed"===i.type&&b().f1((0,E().Hu)(L().A.getIntl(),i)),h.addUserToManagedUsers(e),f.removeUserFromManagedUsers(e.userId)}),[n,t.id,h,f]),v=(0,i.useCallback)((async e=>{ys().fv(n);const{accept:s}=await b().Gh({message:(0,se.jsx)(me().A,{style:b().xh.title,children:(0,se.jsx)(m().sA,{defaultMessage:"Log out this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.title"})}),acceptLabel:(0,se.jsx)(m().sA,{defaultMessage:"Log out user",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.acceptLabel"}),description:(0,se.jsx)(me().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.description",defaultMessage:"You are about to log out this user from their current session. They will need to re-authenticate to log back into Notion."})})});if(!s)return;const i=await U().callApi({eventName:"logoutManagedUsers",environment:n,data:{spaceId:t.id,target:{type:Wa().u.User,userId:e.userId}}});if(ys().uL(n),"failed"===i.type)return b().f1((0,E().Hu)(L().A.getIntl(),i)),void za().D6({label:(0,se.jsx)(m().sA,{id:"managedUsers.toastMessage.logout.failed",defaultMessage:"Failed to logged out user"})});za().D6({label:(0,se.jsx)(m().sA,{id:"managedUsers.toastMessage.logout.success",defaultMessage:"Successfully logged out user"})})}),[n,t.id]),y=(0,i.useCallback)((async e=>{ys().HD(n);const{accept:s}=await b().Gh({message:(0,se.jsx)(me().A,{style:b().xh.title,children:(0,se.jsx)(m().sA,{defaultMessage:"Reset password for this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.title"})}),acceptLabel:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.acceptLabel",defaultMessage:"Reset passwords for user"}),description:(0,se.jsx)(me().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.description",defaultMessage:"You are about to reset the password for this user. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}This user will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:(0,se.jsx)("br",{})}})})});if(!s)return;const i=await U().callApi({eventName:"resetPasswordsForManagedUsers",environment:n,data:{spaceId:t.id,target:{type:Wa().u.User,userId:e.userId}}});if(ys().CF(n),"failed"===i.type)return b().f1((0,E().Hu)(o,i)),void za().D6({label:(0,se.jsx)(m().sA,{id:"managedUsers.toastMessage.forcePasswordReset.fail",defaultMessage:"Failed to reset password for user"})});za().D6({label:(0,se.jsx)(m().sA,{id:"managedUsers.toastMessage.forcePasswordReset.success",defaultMessage:"Successfully reset password for user"})})}),[n,o,t.id]),j=(0,i.useCallback)((async e=>{const s=await U().callApi({eventName:"updateUserSuspension",environment:n,data:{userId:e.userId,spaceId:t.id,suspend:!1}});ys().P4(n),"failed"===s.type&&b().c1(s.error.message),h.removeUserFromManagedUsers(e.userId),f.addUserToManagedUsers(e)}),[n,t.id,h,f]),A=(0,i.useCallback)((async e=>{ys().KB(n,{user_status:Ka(c)});const{accept:s}=await b().Gh({message:(0,se.jsx)(me().A,{style:b().xh.title,children:(0,se.jsx)(m().sA,{defaultMessage:"Delete this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.title"})}),acceptLabel:(0,se.jsx)(m().sA,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.acceptLabel"}),description:(0,se.jsx)(me().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m().sA,{defaultMessage:"This action cannot be undone. This will permanently delete the user's entire account. All private workspaces will be deleted, and they will be removed from all shared workspaces.",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.description"})})});if(!s)return;const i=await U().callApi({eventName:"deleteManagedUser",environment:n,data:{userId:e.userId,spaceId:t.id}});ys().$W(n,{user_status:Ka(c)}),"success"===i.type?(h.removeUserFromManagedUsers(e.userId),f.removeUserFromManagedUsers(e.userId)):b().f1((0,E().Hu)(L().A.getIntl(),i))}),[n,c,t.id,h,f]),C=(0,i.useMemo)((()=>S.managedUsers.find((e=>{let{userId:t}=e;return t===l}))),[l,S.managedUsers]),w=(0,i.useMemo)((()=>{let e;const t={onClick:e=>p(e,"dropdown_menu"),icon:Ea().r,title:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.userDetails",defaultMessage:"Edit details"})},s={onClick:e=>A(e),icon:Us().I,title:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser",defaultMessage:"Delete user"}),isDestructive:!0};switch(c){case Na.NotSuspended:e=[[t,{onClick:v,icon:Ua().k,title:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.logout",defaultMessage:"Log out"})},{onClick:y,icon:La().r,title:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.passwordReset",defaultMessage:"Reset password"})}],[{onClick:x,icon:Ba()._,title:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser",defaultMessage:"Suspend user"}),getDisabledState:e=>e.userId===g},s]];break;case Na.Suspended:e=[[t],[{onClick:e=>j(e),icon:Oa().u,title:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.unSuspendUser",defaultMessage:"Reactivate user"})},s]];break;default:(0,vs().HB)(c)}return e.filter((e=>e.length>0))}),[p,g,c,A,x,j,v,y]);return{...S,selectedTab:c,setSelectedTab:u,selectedUser:C,managedUserActionSections:w,onOpenDetailsModal:p,onCloseDetailsModal:function(){d(void 0)}}}({spaceStore:t,samlConfigStore:s}),k=(0,i.useCallback)((e=>C(e,"row_click")),[C]);return(0,se.jsxs)(Dt().Ay,{children:[(0,se.jsx)(di().A,{style:c.link,onClick:()=>n(ka.SettingsPage),children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.breadcrumb",defaultMessage:"â† Identity & Provisioning"})}),(0,se.jsxs)(re().A,{large:!0,style:c.title,children:[(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.title",defaultMessage:"User management"}),(0,se.jsx)(_a().A,{icon:Ra().$,ariaLabel:d.formatMessage({defaultMessage:"Managed users settings help button",id:"identityProvisioningSettings.managedUsers.helpButton.label"}),onClick:()=>A().f({environment:o,url:(0,qe().xS)("guides.managedUsers")})})]}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:c.byline,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.byline",defaultMessage:"Manage and view users that are using your verified domains"})}),(0,se.jsx)(ui().Ay,{tabs:[(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.table.notSuspendedTab.title",defaultMessage:"Active"},"notSuspended.title"),(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.table.suspendedTab.title",defaultMessage:"Suspended"},"suspended")],selectedIndex:y,onChange:e=>j(e),style:c.tabBarMenu}),(0,se.jsx)(Vi().nv,{mode:Vi().Ke.Button,query:p.query,setQueryFilter:e=>{S({query:e})},placeholderText:L().A.formatMessage(Ro.placeholder)}),(0,se.jsxs)("div",{style:c.filters,children:[(0,se.jsx)(Po().f,{selectedSpaceId:p.workspaceId,setSelectedSpaceId:e=>{S({workspaceId:e})},spaceData:u}),(0,se.jsx)(po().M,{selectedMfaMethod:p.multiFactorStatus,setSelectedMfaMethod:e=>{S({multiFactorStatus:e})}})]}),(0,se.jsx)(uo,{managedUsers:g,loading:v,loadMoreManagedUsers:f,onEditDetails:k,managedUserActionSections:T},y),(0,se.jsx)(Io,{spaceStore:t,managedUser:M,onClose:w,removeWorkspaceFromUser:x})]})}var Bo=()=>s(177167);function Uo(e){var t;let{environment:s,samlConfigStore:i,spaceStore:n}=e;const a=(0,Rs().P9)({name:"saml",spaceId:n.id,userId:null===(t=s.currentUser)||void 0===t?void 0:t.id});return(0,r().K8)((()=>i.state.emailDomains.length>0||a),[i,a])}var Eo=()=>s(151059),Lo=()=>s(179030),Oo=()=>s(926110),Wo=()=>s(511303);var zo=()=>s(689216);function qo(e){var t;let{spaceStore:s,samlConfigStore:n,domainSettingsStore:o}=e;const l=(0,a().v3)(),d=(0,r().K8)((()=>n.state.emailDomains),[n]),c=(0,r().K8)((()=>"disabled"!==n.state.status&&"unconfigured"!==n.state.status),[n]),u=(0,Rs().P9)({name:"domain_settings",spaceId:s.id,userId:null===(t=l.currentUser)||void 0===t?void 0:t.id})??!1,g=Uo({environment:l,samlConfigStore:n,spaceStore:s})??!1,p=(0,r().K8)((()=>g&&(!n.state.id||n.state.id===s.id)),[g,n,s]),m=(0,r().K8)((()=>o.state.emailDomains.length>0&&u),[o,u]),f=(0,r().K8)((()=>d.length>0),[d]),h=(0,i.useCallback)((async()=>{if(n.state.emailDomains.length>0)return(0,zo().n)({onRequest:()=>U().callApi({eventName:"updateWorkspaceCreationForEmailDomains",environment:l,data:{emailDomains:n.state.emailDomains,workspaceCreationEnum:o.state.spaceCreation,spaceId:s.id}}),onSuccess:()=>{o.setState({...o.state,emailDomains:n.state.emailDomains})}})}),[l,s,o,n]),S=(0,i.useCallback)((async()=>{if(n.state.emailDomains.length>0)return(0,zo().n)({onRequest:()=>U().callApi({eventName:"updateEmailDomainSettings",environment:l,data:{emailDomains:n.state.emailDomains,spaceId:s.id,preventProfileEdits:o.state.settings.prevent_profile_edits,preventMembersJoiningExternalWorkspace:o.state.settings.prevent_members_joining_external_workspace,customSessionDuration:(0,Ha().k)(o.state.settings.custom_session_duration),preventGrantingSupportAccess:o.state.settings.prevent_granting_support_access,disableNotionMail:o.state.settings.disable_notion_mail}}),onSuccess:()=>{o.setState({...o.state,emailDomains:n.state.emailDomains})}})}),[l,s,o,n]),x=(0,r().K8)((()=>g&&u),[g,u]);return{verifiedDomains:d,isSamlStatusEnabled:c,isSamlAvailable:g,isSamlEditable:p,isDomainSettingsAvailable:m,isClaimSpacesAvailable:x,canSaveWorkspaceCreationSetting:f,saveWorkspaceCreationSetting:h,saveEmailDomainSettings:S}}function Fo(e){let{title:t,byline:s,targetTier:n}=e;const o=(0,a().v3)(),r=(0,i.useCallback)((()=>jt().K(o,{from:"space_saml",upsell:{type:"product",product:n,limit:{type:"none"}}})),[o,n]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsxs)(re().A,{smallMarginBottom:!0,style:{fontWeight:h().Wy.regular,display:"flex",alignItems:"center"},children:[(0,se.jsx)("span",{style:{marginRight:8},children:t}),(0,se.jsx)(os().A,{subscriptionTier:n,analyticsName:"space_saml",onClick:r})]}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,children:s})]})}const No={browseWorkspaces:(0,se.jsx)(m().sA,{defaultMessage:"Browse workspaces",id:"identityAndProvisioning.claimWorkspaces.button"}),noWorkspaces:(0,se.jsx)(m().sA,{defaultMessage:"No workspaces",id:"identityAndProvisioning.claimWorkspaces.buttonEmpty"}),loadingError:(0,se.jsx)(m().sA,{defaultMessage:"Error loading workspaces.",id:"identityAndProvisioning.claimWorkspaces.errorByline"})};function Ko(e){let{promptUpgrade:t}=e;const{navigateTo:s,loadingSpaces:n,hasBrowsableSpaces:a,errorClaimableSpaces:o}=(0,i.useContext)(Da),r=Boolean(o),d=!a||n,c=!a&&!n,u=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.title",defaultMessage:"Claim workspaces"}),g=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.message",defaultMessage:"Claim workspaces created by users with a verified domain or require owners to use an external domain."}),p=(0,l().IS)((e=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:d?.5:1,minWidth:160},settingErrorByline:{color:e.errorText,marginTop:8,fontSize:13}})),[d]);if(t)return(0,se.jsx)(Fo,{title:u,byline:g,targetTier:"enterprise"});let f;return f=n?(0,se.jsx)(ii().A,{}):a?No.browseWorkspaces:No.noWorkspaces,(0,se.jsx)("div",{style:p.settingContainer,children:(0,se.jsx)(Ds,{title:u,byline:g,settingItem:(0,se.jsxs)("div",{style:p.buttonAndErrorContainer,children:[(0,se.jsx)(pe().A,{placement:he().W.Top,alignment:he().C.End,render:e=>(0,se.jsx)(vt().A,{disabled:d,size:"lg",style:p.button,onClick:()=>s(ka.WorkspacesPage),...e,children:f}),disableTooltip:!c,renderTooltip:()=>(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.tooltip",defaultMessage:"There are no available workspaces to claim"})}),r?(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:p.settingErrorByline,children:No.loadingError}):null]})})})}var Go=()=>s(543649),Vo=()=>s(375243);function Ho(e){let{spaceStore:t,samlConfigStore:s,promptUpgrade:n,disabled:o,saveWorkspaceCreationSetting:d,renderOverrideAddDomainButton:c}=e;const u=(0,a().v3)(),g=(0,r().uB)(void 0,Go().A),p=(0,l().IS)((()=>({flex:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",margin:"18px 0px"},button:{position:"relative",marginLeft:"auto",marginRight:0,opacity:o?.5:1},plusIcon:{width:14,height:14,fill:"inherit",marginRight:"6px"}})),[o]),f=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.emailDomainsSection.title",defaultMessage:"Verified domains"}),S=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.emailDomainsSection.byline",defaultMessage:"Verify ownership of an email domain to access advanced security features including single sign-on."}),x=[...(0,r().K8)((()=>s.state.emailDomains.map(Vo().vv)),[s]),...(0,r().K8)((()=>s.state.domainVerifications.filter((e=>!s.state.emailDomains.includes(e.domain))).sort(((e,t)=>e.createdAt-t.createdAt)).map(Vo().W0)),[s])],v=(0,i.useCallback)((async()=>{await Ta({environment:u,spaceId:t.id,store:s})}),[u,t,s]),{resetInitialClaimableSpaces:y}=(0,i.useContext)(Da),b=(0,i.useCallback)((async e=>{switch(e.type){case"verified":return(0,zo().n)({onRequest:()=>U().callApi({eventName:"setSamlConfig",environment:u,data:{spaceId:t.id,removedEmailDomains:[e.domain]}}),onSuccess:async()=>{await v(),y()}});case"unverified":case"invalid":return(0,zo().n)({onRequest:()=>U().callApi({eventName:"deleteDomainVerificationCode",environment:u,data:{id:e.id}}),onSuccess:()=>v()})}}),[u,t,v,y]),j=(0,i.useCallback)((()=>(0,zo().n)({onRequest:()=>U().callApi({eventName:"setSamlConfig",environment:u,data:{spaceId:t.id}}),onSuccess:()=>v()})),[u,v,t]),A=(0,i.useCallback)((async()=>{await v(),await d()}),[d,v]);return n?(0,se.jsx)(Fo,{title:f,byline:S,targetTier:"business"}):(0,se.jsx)(Vo().Ay,{disabled:o,domains:x,onRemoveDomain:b,domainVerificationStore:g,verificationType:"saml_config",verificationTargetId:t.id,refreshDomains:A,onClickAddDomain:j,renderOverrideAddDomainButton:e=>c?c():(0,se.jsxs)("div",{style:p.flex,children:[(0,se.jsxs)("div",{children:[(0,se.jsx)(re().A,{smallMarginBottom:!0,style:{fontWeight:h().Wy.medium},children:f}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:{marginBottom:4},children:S})]}),(0,se.jsx)("div",{children:(0,se.jsx)(Rt().p,{isBlue:!0,style:p.button,icon:e=>(0,Pn().W)({...e,...p.plusIcon}),disabled:o,onClick:e,children:(0,se.jsx)(m().sA,{defaultMessage:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"})})})]})})}function $o(e){let{domainSettingsStore:t,samlConfigStore:s,disabled:n,promptUpgrade:o,verifiedDomains:d,tooltip:c,saveWorkspaceCreationSetting:u}=e;const g=(0,a().v3)(),p=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"}})),[]),f=(0,r().K8)((()=>{const e=s.state.id;if(!e)return;return new(ee().SL)(g,{table:an().NX,id:e}).getName()}),[g,s]),h=(0,i.useCallback)((async e=>{t.setState({...t.state,spaceCreation:e}),await u(),va().XL(g,{workspace_creation:e})}),[t,u,g]),S=(0,r().K8)((()=>d.length>0?t.state.spaceCreation:"admins_only"),[t,d]),x=(0,se.jsx)(m().sA,{id:"domainSettings.workspaceCreation.title",defaultMessage:"Workspace creation"}),v=(0,se.jsx)(m().sA,{id:"domainSettings.workspaceCreation.byline",defaultMessage:"Customize who can create new workspaces."}),y=(0,se.jsx)(m().sA,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.titleWithSpaceName",defaultMessage:"{primaryWorkspaceName} workspace owners",values:{primaryWorkspaceName:f}}),b=(0,se.jsx)(m().sA,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.title",defaultMessage:"Only workspace owners"});return o?(0,se.jsx)("div",{style:p.settingContainer,children:(0,se.jsx)(Fo,{title:x,byline:v,targetTier:"enterprise"})}):(0,se.jsx)(pe().A,{placement:he().W.Top,alignment:he().C.End,render:e=>(0,se.jsx)("div",{...e,style:p.settingContainer,children:(0,se.jsx)(Fs().A,{isMobile:g.device.isMobile,disabled:n,title:x,caption:v,type:"dropdown",currentOption:S,options:[{key:"unrestricted",label:(0,se.jsx)(m().sA,{id:"domainSettings.workspaceCreation.unrestricted.title",defaultMessage:"Anyone"}),caption:(0,se.jsx)(m().sA,{id:"domainSettings.workspaceCreation.unrestricted.caption",defaultMessage:"Any user can create new workspaces."})},{key:"admins_only",label:f?y:b,caption:(0,se.jsx)(m().sA,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.captionWithSpaceName",defaultMessage:"Only workspace owners of this workspace can create new workspaces."})}],onSelectOption:h})}),disableTooltip:!c,renderTooltip:()=>c})}function Yo(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:i,isCurrentSpaceEnterprise:n}=e;const{verifiedDomains:a,isSamlAvailable:o,saveWorkspaceCreationSetting:r,isSamlEditable:l,isDomainSettingsAvailable:d,canSaveWorkspaceCreationSetting:c,isClaimSpacesAvailable:u}=qo({spaceStore:t,samlConfigStore:s,domainSettingsStore:i}),g=d&&l;return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Ho,{disabled:!l,promptUpgrade:!o,spaceStore:t,samlConfigStore:s,saveWorkspaceCreationSetting:r}),(0,se.jsx)($o,{disabled:!g||!c,promptUpgrade:!n,verifiedDomains:a,samlConfigStore:s,domainSettingsStore:i,tooltip:0===a.length?(0,se.jsx)(m().sA,{id:"domainSettings.workspaceCreation.disabledTooltip",defaultMessage:"There must be at least one verified domain to configure the workspace creation setting."}):void 0,saveWorkspaceCreationSetting:r}),(0,se.jsx)(Ko,{promptUpgrade:!u})]})}var Qo=()=>s(326399);function Jo(e){let{domainSettingsStore:t,saveEmailDomainSettings:s,promptUpgrade:n,disabled:o}=e;const d=(0,a().v3)(),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),u=(0,i.useMemo)((()=>Object.entries(Qo().iI).map((e=>{let[t,s]=e;return{key:t,label:(0,se.jsx)(me().A,{children:(0,So().OH)(0,s)})}}))),[]),g=(0,r().K8)((()=>(0,Ha().k)(t.state.settings.custom_session_duration)??Qo().DP),[t]),p=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.customSessionDuration.title",defaultMessage:"Session duration"}),f=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.customSessionDuration.message",defaultMessage:"Control how long your managed users can be logged in for before they must re-authenticate."});return n?(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Fo,{title:p,byline:f,targetTier:"enterprise"})}):(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Fs().A,{isMobile:d.device.isMobile,disabled:o,title:p,caption:f,type:"dropdown",currentOption:g,options:u,onSelectOption:async function(e){const i=t.state.settings.custom_session_duration??Qo().iI[Qo().DP],n=Qo().iI[e];if(void 0===n)return;ys().m4(d,{custom_session_duration_ms:i});const{accept:a}=await b().Gh({message:(0,se.jsx)(me().A,{style:b().xh.title,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.message",defaultMessage:"Confirm change"})}),description:(0,se.jsxs)(me().A,{isMultiline:!0,isSecondaryColor:!0,children:[(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.description",defaultMessage:"You are about to change the session duration for all of your managed users from <b>{oldDuration}</b> to <b>{newDuration}.</b>",values:{oldDuration:(0,So().OH)(0,i),newDuration:(0,So().OH)(0,n),b:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,se.jsx)("b",{children:t})}}}),(0,se.jsx)("br",{}),(0,se.jsx)("br",{}),(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.secondDescription",defaultMessage:"This may log some users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})]}),acceptLabel:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.acceptLabel",defaultMessage:"Confirm change"}),cancelLabel:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.cancelLabel",defaultMessage:"Cancel"})});a&&(t.setState({...t.state,settings:{...t.state.settings,custom_session_duration:n}}),ys().JN(d,{new_session_duration_ms:n}),await s())}})})}function Xo(e){let{domainSettingsStore:t,saveEmailDomainSettings:s,promptUpgrade:n,hasVerifiedDomains:o,disabled:d}=e;const c=(0,a().v3)(),u=(0,cn().X)("enable_notion_mail_settings_toggle"),g=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),p=(0,r().K8)((()=>Boolean(!t.state.settings.disable_notion_mail)),[t]),f=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.enableNotionMail.title",defaultMessage:"Notion Mail"}),h=(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.enableNotionMail.message",defaultMessage:"Enable Notion Mail for all members under your company domains."}),(0,se.jsx)("br",{}),(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.enableNotionMail.terms",defaultMessage:"By using Notion Mail, you agree to the Notion Mail and Notion AI Supplementary Terms."})]}),S=(0,i.useCallback)((async()=>{const e=Boolean(!t.state.settings.disable_notion_mail);t.setState({...t.state,settings:{...t.state.settings,disable_notion_mail:e}}),ys().R_(c,{new_value:e}),await s()}),[c,t,s]);return u?n?(0,se.jsx)("div",{style:g.settingContainer,children:(0,se.jsx)(Fo,{title:f,byline:h,targetTier:"enterprise"})}):(0,se.jsx)("div",{style:g.settingContainer,children:(0,se.jsx)(bo,{title:(0,se.jsx)("div",{style:g.settingsTitle,children:f}),byline:h,isOn:p,onToggle:S,disabled:d||!o})}):null}function Zo(e){let{spaceId:t,domainSettingsStore:s,promptUpgrade:i,verifiedDomains:n,disabled:o}=e;const r=n.length>0,d=(0,a().v3)(),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!o&&r?1:.5}})),[o,r]),u=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.forcePasswordReset.title",defaultMessage:"Reset passwords for all users"}),g=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.forcePasswordReset.message",defaultMessage:"Force reset the passwords for all managed users and require them to create a new one the next time they log in."});async function p(){ys().m6(d,{email_domains:n});const{accept:e}=await b().Gh({message:(0,se.jsx)(me().A,{style:b().xh.title,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.message",defaultMessage:"Reset passwords for your managed users?"})}),description:(0,se.jsx)(me().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.description",defaultMessage:"You are about to reset the passwords for of your managed users, including you. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}The affected users will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:(0,se.jsx)("br",{})}})}),acceptLabel:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.acceptLabel",defaultMessage:"Reset passwords for all managed users"}),cancelLabel:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!e)return;const i=s.state.emailDomains;await U().callApi({eventName:"resetPasswordsForManagedUsers",environment:d,data:{spaceId:t,target:{type:Wa().u.Domains,emailDomains:i}}}),za().D6({label:(0,se.jsx)(m().sA,{id:"managedUsers.toastMessage.forcePasswordReset.all.success",defaultMessage:"Successfully reset passwords for all managed users"})}),ys().Jm(d,{email_domains:i})}return i?(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Fo,{title:u,byline:g,targetTier:"enterprise"})}):(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Ds,{title:u,byline:g,settingItem:(0,se.jsx)("div",{style:c.buttonAndErrorContainer,children:(0,se.jsx)(pe().A,{placement:he().W.Top,alignment:he().C.End,render:e=>(0,se.jsx)(Rt().p,{isRed:!0,disabled:o||!r,style:c.button,onClick:p,...e,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.logoutButton",defaultMessage:"Reset passwords for all users"})}),disableTooltip:r,renderTooltip:()=>(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})})})})})}function er(e){let{spaceId:t,domainSettingsStore:s,promptUpgrade:i,verifiedDomains:n,disabled:o}=e;const r=n.length>0,d=(0,a().v3)(),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!o&&r?1:.5}})),[o,r]),u=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.logoutAllUsers.title",defaultMessage:"Log out all users"}),g=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.logoutAllUsers.message",defaultMessage:"Force log out all managed users and require them to re-authenticate."});async function p(){ys().V6(d,{email_domains:n});const{accept:e}=await b().Gh({message:(0,se.jsx)(me().A,{style:b().xh.title,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.message",defaultMessage:"Log out all of your managed users?"})}),description:(0,se.jsx)(me().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.description",defaultMessage:"You are about to log all of your managed users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})}),acceptLabel:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.acceptLabel",defaultMessage:"Log out all managed users"}),cancelLabel:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!e)return;const i=s.state.emailDomains;await U().callApi({eventName:"logoutManagedUsers",environment:d,data:{spaceId:t,target:{type:Wa().u.Domains,emailDomains:i}}}),za().D6({label:(0,se.jsx)(m().sA,{id:"managedUsers.toastMessage.logout.all.success",defaultMessage:"Logging out managed users. This may take a few minutes to complete."})}),ys().wE(d,{email_domains:i})}return i?(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Fo,{title:u,byline:g,targetTier:"enterprise"})}):(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Ds,{title:u,byline:g,settingItem:(0,se.jsx)("div",{style:c.buttonAndErrorContainer,children:(0,se.jsx)(pe().A,{placement:he().W.Top,alignment:he().C.End,render:e=>(0,se.jsx)(Rt().p,{isRed:!0,disabled:o||!r,style:c.button,onClick:p,...e,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.logoutButton",defaultMessage:"Log out all users"})}),disableTooltip:r,renderTooltip:()=>(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})})})})})}function tr(e){let{promptUpgrade:t,hasVerifiedDomains:s,disabled:n}=e;const{navigateTo:o}=(0,i.useContext)(Da),r=(0,a().v3)(),d=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.title",defaultMessage:"Managed users dashboard"}),c=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.message",defaultMessage:"Manage and view users that are using your verified domains"}),u=(0,l().IS)((e=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!n&&s?1:.5}})),[s,n]);return t?(0,se.jsx)("div",{style:u.settingContainer,children:(0,se.jsx)(Fo,{title:d,byline:c,targetTier:"enterprise"})}):(0,se.jsx)("div",{style:u.settingContainer,children:(0,se.jsx)(Ds,{title:d,byline:c,settingItem:(0,se.jsx)("div",{style:u.buttonAndErrorContainer,children:(0,se.jsx)(pe().A,{placement:he().W.Top,alignment:he().C.End,render:e=>(0,se.jsx)(vt().A,{disabled:n||!s,size:"lg",style:u.button,onClick:()=>{ys().ud(r),o(ka.ManagedUsersPage)},...e,children:(0,se.jsx)(m().sA,{defaultMessage:"View dashboard",id:"identityAndProvisioning.managedUsers.button"})}),disableTooltip:s,renderTooltip:()=>(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})})})})})}function sr(e){let{domainSettingsStore:t,saveEmailDomainSettings:s,promptUpgrade:i,verifiedDomains:n,disabled:o}=e;const d=(0,a().v3)(),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),u=n.length>0,g=(0,r().K8)((()=>Boolean(t.state.settings.prevent_granting_support_access)),[t]),p=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.preventGrantingSupportAccess.title",defaultMessage:"Prevent managed users from granting support access"}),f=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.preventGrantingSupportAccess.message",defaultMessage:"Control if managed users can enable support access on their accounts."});return i?(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Fo,{title:p,byline:f,targetTier:"enterprise"})}):(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(bo,{title:(0,se.jsx)("div",{style:c.settingsTitle,children:p}),byline:f,isOn:g,onToggle:async function(){const e=Boolean(!t.state.settings.prevent_granting_support_access);t.setState({...t.state,settings:{...t.state.settings,prevent_granting_support_access:e}}),ys().R_(d,{new_value:e}),await s()},disabled:o||!u})})}function ir(e){let{domainSettingsStore:t,saveEmailDomainSettings:s,promptUpgrade:i,disabled:n}=e;const o=(0,a().v3)(),d=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),c=(0,r().K8)((()=>Boolean(t.state.settings.prevent_members_joining_external_workspace)),[t]),u=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.preventMembersJoiningExternalSpaces.title",defaultMessage:"External workspace access"}),g=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.preventMembersJoiningExternalSpaces.message",defaultMessage:"Control if managed users are able to join workspaces that aren't owned by your organization."});if(i)return(0,se.jsx)("div",{style:d.settingContainer,children:(0,se.jsx)(Fo,{title:u,byline:g,targetTier:"enterprise"})});const p=c?"on":"off";return(0,se.jsx)("div",{style:d.settingContainer,children:(0,se.jsx)(Fs().A,{isMobile:o.device.isMobile,disabled:n,title:u,caption:g,type:"dropdown",currentOption:p,options:[{key:"on",label:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.enabled.titleGeneric",defaultMessage:"Only workspace owners"}),caption:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.enabled.caption",defaultMessage:"Only workspace owners of your connected workspaces can join external workspaces."})},{key:"off",label:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.disabled.titleWithSpaceName",defaultMessage:"Anyone"}),caption:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.disabled.caption",defaultMessage:"All users can join any workspace."})}],onSelectOption:async function(){const e=Boolean(!t.state.settings.prevent_members_joining_external_workspace);t.setState({...t.state,settings:{...t.state.settings,prevent_members_joining_external_workspace:e}}),ys().Y1(o,{new_value:e}),await s()}})})}function nr(e){let{domainSettingsStore:t,saveEmailDomainSettings:s,promptUpgrade:i,hasVerifiedDomains:n,disabled:o}=e;const d=(0,a().v3)(),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),u=(0,r().K8)((()=>Boolean(t.state.settings.prevent_profile_edits)),[t]),g=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.preventProfileEdits.title",defaultMessage:"Allow managed users to change profile information"}),p=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.preventProfileEdits.message",defaultMessage:"Control if managed users can change their preferred name, email address, and profile photo."});return i?(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Fo,{title:g,byline:p,targetTier:"enterprise"})}):(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(bo,{title:(0,se.jsx)("div",{style:c.settingsTitle,children:g}),byline:p,isOn:!u,onToggle:async function(){const e=Boolean(!t.state.settings.prevent_profile_edits);t.setState({...t.state,settings:{...t.state.settings,prevent_profile_edits:e}}),ys().R_(d,{new_value:e}),await s()},disabled:o||!n})})}function ar(e){var t;let{spaceStore:s,samlConfigStore:i,domainSettingsStore:n}=e;const{verifiedDomains:o,isDomainSettingsAvailable:d,isSamlEditable:c,saveEmailDomainSettings:u}=qo({spaceStore:s,samlConfigStore:i,domainSettingsStore:n}),g=(0,l().IS)((e=>({byline:{fontSize:14,fontWeight:h().Wy.regular,color:e.mediumTextColor},helpButton:{marginTop:18,marginBottom:16}})),[]),p=(0,a().v3)(),f=d&&c,S=(0,Rs().P9)({name:"managed_users",spaceId:s.id,userId:null===(t=p.currentUser)||void 0===t?void 0:t.id}),x=(0,r().K8)((()=>s.id),[s]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{children:(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:g.byline,children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.byline",defaultMessage:"These settings apply to all users with a verified domain, even if they are not a member of this workspace."})})}),(0,se.jsx)(Is().A,{title:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.managedUsers.helpButton",defaultMessage:"Learn about managed users"}),href:(0,qe().xS)("guides.managedUsers"),style:g.helpButton,analyticsFrom:"managed_users_section"}),(0,se.jsx)(tr,{promptUpgrade:!S,hasVerifiedDomains:o.length>0,disabled:!f}),(0,se.jsx)(nr,{promptUpgrade:!S,hasVerifiedDomains:o.length>0,domainSettingsStore:n,saveEmailDomainSettings:u,disabled:!f}),(0,se.jsx)(ir,{promptUpgrade:!S,domainSettingsStore:n,saveEmailDomainSettings:u,disabled:!f}),(0,se.jsx)(sr,{promptUpgrade:!S,verifiedDomains:o,domainSettingsStore:n,saveEmailDomainSettings:u,disabled:!f}),(0,se.jsx)(Jo,{promptUpgrade:!S,domainSettingsStore:n,saveEmailDomainSettings:u,disabled:!f}),(0,se.jsx)(er,{spaceId:x,promptUpgrade:!S,domainSettingsStore:n,verifiedDomains:o,disabled:!f}),(0,se.jsx)(Zo,{spaceId:x,promptUpgrade:!S,domainSettingsStore:n,verifiedDomains:o,disabled:!f}),(0,se.jsx)(Xo,{promptUpgrade:!S,hasVerifiedDomains:o.length>0,domainSettingsStore:n,saveEmailDomainSettings:u,disabled:!f})]})}function or(e){let{spaceStore:t,samlConfigStore:s}=e;const n=(0,a().v3)();return{updateSamlIdpUrl:(0,i.useCallback)((async e=>{let i=!1;return await(0,zo().n)({onRequest:()=>U().callApi({eventName:"setSamlConfig",environment:n,data:{spaceId:t.id,idpMetadataUrl:e}}),onSuccess:()=>{i=!0,s.setState({...s.state,useMetadataUrl:!0,idpMetadataUrl:e,idpMetadata:void 0})}}),i}),[s,t,n]),updateSamlIdpXml:(0,i.useCallback)((async e=>{let i=!1;return await(0,zo().n)({onRequest:()=>U().callApi({eventName:"setSamlConfig",environment:n,data:{spaceId:t.id,idpMetadata:e}}),onSuccess:()=>{i=!0,s.setState({...s.state,useMetadataUrl:!1,idpMetadataUrl:void 0,idpMetadata:e})}}),i}),[s,t,n]),updateStatus:(0,i.useCallback)((e=>(0,zo().n)({onRequest:()=>U().callApi({eventName:"setSamlConfig",environment:n,data:{spaceId:t.id,status:e}}),onSuccess:()=>{s.setState({...s.state,status:e})}})),[s,t,n]),updateCreateAccount:(0,i.useCallback)((e=>(0,zo().n)({onRequest:()=>U().callApi({eventName:"setSamlConfig",environment:n,data:{spaceId:t.id,createAccount:e}}),onSuccess:()=>{s.setState({...s.state,createAccount:e})}})),[s,t,n])}}function rr(e){let{spaceStore:t,samlConfigStore:s,disabled:i}=e;const{updateCreateAccount:n}=or({samlConfigStore:s,spaceStore:t}),o=(0,a().v3)(),d=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),c=(0,r().K8)((()=>s.state.createAccount),[s]);return(0,se.jsx)("div",{style:d.settingContainer,children:(0,se.jsx)(bo,{title:(0,se.jsxs)("div",{style:d.settingsTitle,children:[(0,se.jsx)(m().sA,{id:"identityAndProvisioning.createAccount.title",defaultMessage:"Automatic account creation"}),(0,se.jsx)(_a().A,{icon:Ra().$,onClick:()=>A().f({environment:o,url:(0,qe().xS)("guides.samlJIT")})})]}),byline:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.createAccount.byline",defaultMessage:"Automatically create Notion accounts for new users who log in via SAML SSO."}),isOn:c,onToggle:async function(){await n(!s.state.createAccount)},disabled:i})})}function lr(e){let{spaceStore:t,samlConfigStore:s,promptUpgrade:i,disabled:n}=e;const o=(0,a().v3)(),{updateStatus:d}=or({samlConfigStore:s,spaceStore:t}),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"}})),[]),u=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.accountAuth.title",defaultMessage:"Login method"}),g=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.accountAuth.byline",defaultMessage:"Customize how users access workspaces that have SAML SSO enabled. Workspace owners can always log in with a password or passkey."}),p=(0,r().K8)((()=>"enforced"===s.state.status?"enforced":"enforced_for_domain"===s.state.status?"enforced_for_domain":"not_enforced"),[s]);if(i)return(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Fo,{title:u,byline:g,targetTier:"business"})});const f=[{key:"enforced",label:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.accountAuth.option.enforced",defaultMessage:"Only SAML SSO"})},{key:"not_enforced",label:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.accountAuth.option.notEnforced",defaultMessage:"Any method"})}];return"enforced_for_domain"===p?(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Fs().A,{isMobile:o.device.isMobile,disabled:!0,title:u,caption:g,type:"custom",customButton:(0,se.jsx)(Rt().p,{disabled:!0,disabledFeedback:!0,children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.accountAuth.option.enforcedForDomain",defaultMessage:"Enforced for domain"})})})}):(0,se.jsx)("div",{style:c.settingContainer,children:(0,se.jsx)(Fs().A,{isMobile:o.device.isMobile,title:u,caption:g,type:"dropdown",currentOption:p,options:f,onSelectOption:async function(e){"enforced"===e?await d("enforced"):"enforced_for_domain"===e?await d("enforced_for_domain"):await d("configured")}})})}var dr=()=>s(925907),cr=()=>s(693954),ur=()=>s(564766);function gr(e){let{isOpen:t,...s}=e;const i=(0,r().K8)((()=>({active:s.samlConfigStore.state.useMetadataUrl?"url":"xml",url:s.samlConfigStore.state.idpMetadataUrl||"",xml:s.samlConfigStore.state.idpMetadata||""})),[s.samlConfigStore]);return(0,se.jsx)(ai().A,{open:t,onDismiss:s.onClose,render:()=>(0,se.jsx)(pr,{...s,initialConfiguration:i})})}function pr(e){let{onSaveChanges:t,initialConfiguration:s,samlConfigStore:n,spaceStore:o,onClose:d}=e;const[c,u]=(0,i.useState)(s),g=(0,a().v3)(),p=(0,l().IS)((e=>({container:{background:e.popoverBackground,width:450,padding:24,borderRadius:4,transition:"all 500ms ease"},title:{fontFamily:h().vc(ni().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center"},subtitle:{fontFamily:h().vc(ni().locale).sans,fontSize:14,fontWeight:500,lineHeight:"19px",margin:"20px 0 0"},copyButton:{borderRadius:4,padding:"4px 8px",display:"flex",alignItems:"center",justifyContent:"center",color:e.lightTextColor,fontFamily:h().vc(ni().locale).sans,fontSize:12,fontWeight:500,lineHeight:"14px"},copyIcon:{width:16,height:16,marginRight:4,fill:e.mediumIconColor},url:{width:"100%",color:e.mediumTextColor,fontFamily:h().vc(ni().locale).sans,fontSize:14,fontWeight:400,lineHeight:"18px"},readonlyInput:{display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${e.outlineButtonBorder}`,height:32,paddingLeft:12,paddingRight:12,borderRadius:4},divider:{margin:"20px auto 20px"},radioContainer:{display:"flex",justifyContent:"space-evenly",flexDirection:"column",height:60},radioOption:{display:"flex",alignItems:"center"},caption:{margin:"4px 0 8px"},centeredCaption:{margin:"4px 24px 8px",textAlign:"center"},buttonContainer:{display:"flex",alignItems:"center",justifyContent:"flex-end",marginTop:24},buttonSpacing:{marginRight:8},feedback:{color:"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400],display:"flex",flexDirection:"row",alignItems:"center",fontSize:"14px",height:20}})),[]),f=(0,i.useMemo)((()=>fr(c)),[c]),S=(0,r().K8)((()=>"unconfigured"===n.state.status),[n]),x=(0,r().K8)((()=>(0,ur().zW)(o.id,Ln().A.domainBaseUrl)),[o]),v=(0,i.useCallback)((async()=>{const e=await ce().R.clipboardActions.load();e.copyString({environment:g,stringValue:x,copiedMessage:e.clipboardMessages.copiedLinkToClipboard})}),[g,x]),y=(0,i.useCallback)((()=>{u((e=>({...e,active:"url"})))}),[]),b=(0,i.useCallback)((()=>{u((e=>({...e,active:"xml"})))}),[]),j=(0,l().IS)((e=>({input:{transition:"all 200ms ease-in-out",boxShadow:"none",margin:"12px 0",width:"100%",background:e.popoverBackground,border:`1px solid ${e.outlineButtonBorder}`}})),[]),A=(0,i.useMemo)((()=>"url"===c.active?{placeholder:"https://...",value:c.url,onChange:e=>{const t=e.target.value;u((e=>({...e,url:t})))},style:{height:32,...j.input}}:{placeholder:'<md:EntityDescriptor entityID="...',value:c.xml,onChange:e=>{const t=e.target.value;u((e=>({...e,xml:t})))},textarea:!0,style:{height:118,...j.input},inputStyle:{width:"100%",height:"100%"}}),[c,j]),C=(0,i.useCallback)((()=>{t(c)}),[t,c]);return(0,se.jsxs)("div",{style:p.container,children:[(0,se.jsx)(me().A,{style:p.title,children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.editSamlConfig.title",defaultMessage:"SAML SSO Configuration"})}),(0,se.jsx)(me().A,{isSmall:!0,style:p.centeredCaption,isMultiline:!0,children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.editSamlConfig.byline",defaultMessage:"Configure SAML SSO for your Notion workspace with your Identity Provider (IDP). <guidelink>Learn more</guidelink>.",values:{guidelink:e=>(0,se.jsx)(di().A,{href:(0,qe().xS)("guides.samlSettings"),external:!0,children:e})}})}),(0,se.jsx)(me().A,{style:p.subtitle,children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.editSamlConfig.acsTitle",defaultMessage:"Assertion Consumer Service (ACS) URL"})}),(0,se.jsx)(me().A,{isSmall:!0,style:p.caption,isMultiline:!0,children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.editSamlConfig.acsByline",defaultMessage:"Enter this in your IDP's SAML configuration."})}),(0,se.jsxs)("div",{style:p.readonlyInput,children:[(0,se.jsx)(me().A,{style:p.url,children:x}),(0,se.jsxs)(ge().A,{onClick:v,style:p.copyButton,children:[(0,dr().n)(p.copyIcon),(0,se.jsx)(m().sA,{id:"verifyDomainModal.editSamlConfig.copy",defaultMessage:"Copy"})]})]}),(0,se.jsx)(me().A,{style:p.subtitle,children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.editSamlConfig.idpTitle",defaultMessage:"Identity Provider Details"})}),(0,se.jsx)(me().A,{isSmall:!0,style:p.caption,children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.editSamlConfig.idpUrlByline",defaultMessage:"Enter the value provided by your IDP."})}),(0,se.jsxs)("div",{style:p.radioContainer,children:[(0,se.jsxs)(Rt().p,{style:p.radioOption,onClick:y,children:[(0,se.jsx)(Ws().A,{isSelected:"url"===c.active}),(0,se.jsx)(me().A,{children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.editSamlConfig.idpUrl",defaultMessage:"Identity Provider URL"})})]}),(0,se.jsxs)(Rt().p,{style:p.radioOption,onClick:b,children:[(0,se.jsx)(Ws().A,{isSelected:"xml"===c.active}),(0,se.jsx)(me().A,{children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.editSamlConfig.idpXml",defaultMessage:"Identity Provider Metadata XML"})})]})]}),(0,se.jsx)(Ls().A,{...A}),(0,se.jsx)("div",{style:p.feedback,children:(0,se.jsx)(mr,{validation:f})}),(0,se.jsxs)("div",{style:p.buttonContainer,children:[(0,se.jsx)(vt().A,{size:"lg",style:p.buttonSpacing,onClick:d,children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.editSamlConfig.cancel",defaultMessage:"Cancel"})}),(0,se.jsx)(ks().A,{size:"lg",disabled:"invalid"===f.type,onClick:C,children:S?(0,se.jsx)(m().sA,{id:"identityAndProvisioning.editSamlConfig.enableSaml",defaultMessage:"Enable SAML"}):(0,se.jsx)(m().sA,{id:"identityAndProvisioning.editSamlConfig.saveChanges",defaultMessage:"Save changes"})})]})]})}function mr(e){let t,{validation:s}=e;if("valid"===s.type)return null;switch(s.reason){case"empty":t=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.editSamlConfig.feedback.empty",defaultMessage:"You cannot leave this field blank"});break;case"signed_request":t=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.editSamlConfig.feedback.signed_request",defaultMessage:"Requests cannot be signed"})}return(0,se.jsxs)(se.Fragment,{children:[(0,cr().Q)({height:16,width:16,margin:"0 4px 0 8px"}),(0,se.jsx)("span",{children:t})]})}function fr(e){return"url"===e.active?(0,ur().vU)(e.url):"xml"===e.active?(0,ur().$W)(e.xml):void(0,vs().HB)(e.active)}function hr(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:n,isSamlStatusEnabled:a,promptUpgrade:o,disabled:r}=e;const[d,c]=(0,i.useState)({isOpened:!1,enableSamlOnSave:!1}),{updateStatus:u,updateSamlIdpUrl:g,updateSamlIdpXml:p}=or({samlConfigStore:s,spaceStore:t}),{verifiedDomains:f}=qo({spaceStore:t,samlConfigStore:s,domainSettingsStore:n}),S=(0,l().IS)((()=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",cursor:r?"default":"pointer"},settingTitle:{fontWeight:h().Wy.medium},settingByline:{marginBottom:4},configButton:{marginTop:14}})),[r]),x=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.samlToggle.title",defaultMessage:"Enable SAML SSO"}),v=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.samlToggle.byline",defaultMessage:"Workspace members can log in with SAML SSO if their email address uses a verified domain."});return o?(0,se.jsx)(Fo,{title:x,byline:v,targetTier:"business"}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(bo,{title:x,byline:v,isOn:a,disabled:r,tooltipForDisabled:0===f.length?(0,se.jsx)(m().sA,{id:"identityAndProvisioning.samlToggle.disabledTooltipNoVerifiedDomains",defaultMessage:"Verify a domain to enable SAML."}):void 0,onToggle:function(){if(r)return;const{useMetadataUrl:e,idpMetadata:t,idpMetadataUrl:i}=s.state,n=e&&i||!e&&t;switch(s.state.status){case"disabled":n?u("configured"):c({isOpened:!0,enableSamlOnSave:!0});break;case"unconfigured":c({isOpened:!0,enableSamlOnSave:!0});break;case"configured":case"enforced":u("disabled");break;case"enforced_for_domain":break;default:(0,vs().HB)(s.state.status)}}}),(0,se.jsx)(vt().A,{disabled:r,disabledFeedback:r,size:"lg",style:S.configButton,onClick:function(){r||c({isOpened:!0,enableSamlOnSave:!1})},children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.samlToggle.configure",defaultMessage:"Edit SAML SSO configuration"})}),(0,se.jsx)(gr,{isOpen:d.isOpened,onClose:()=>c({isOpened:!1,enableSamlOnSave:!1}),onSaveChanges:async function(e){if("invalid"===fr(e).type)return;let t=!1;switch(e.active){case"url":t=await g(e.url);break;case"xml":t=await p(e.xml)}if(t){switch(s.state.status){case"disabled":d.enableSamlOnSave&&await u("configured");break;case"unconfigured":await u("configured");break;case"enforced":case"enforced_for_domain":case"configured":break;default:(0,vs().HB)(s.state.status)}c({isOpened:!1,enableSamlOnSave:!1})}},spaceStore:t,samlConfigStore:s})]})}var Sr=()=>s(994877);const xr={id:"name",headerTitle:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.secondaryWorkspaces.table.name",defaultMessage:"Name"}),renderCell:e=>(0,se.jsx)(Cr,{space:e.space,isCurrentSpace:e.isCurrentSpace}),widthData:{width:50},sortable:!0},vr={id:"memberCount",headerTitle:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.secondaryWorkspaces.table.memberCount",defaultMessage:"Members"}),renderCell:e=>(0,se.jsx)(me().A,{children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.secondaryWorkspaces.table.members",defaultMessage:"{count} members",values:{count:e.space.memberCount}})}),widthData:{width:20},sortable:!0},yr={id:"createdAt",headerTitle:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.secondaryWorkspaces.table.plan",defaultMessage:"Created at"}),renderCell:e=>{const t=e.space.createdTime;return(0,se.jsx)(me().A,{children:t&&(0,mo().W_)(t,"medium",ni().locale)})},widthData:{width:20},sortable:!0},br=[xr,vr,yr];function jr(e){let{spaceStore:t,spaces:s}=e;const[n,a]=(0,i.useState)({column:xr,sortAscending:!1}),o=(0,r().K8)((()=>s.map((e=>({id:e.id,isClickable:!1,isCurrentSpace:t.id===e.id,space:e})))),[s,t]),d=(0,l().IS)((e=>(0,ue().rC)({columnRenderInfo:br,theme:e,containerMarginTop:12})),[]);return(0,se.jsx)(ue().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:br,rows:Ar(o,n),sortState:n,onSortStateChanged:a,renderNoRowsComponent:()=>(0,se.jsx)(me().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.secondaryWorkspaces.empty",defaultMessage:"No linked workspaces."})}),styles:d})}function Ar(e,t){let{column:s,sortAscending:i}=t,n=[];switch(s.id){case"name":n=f().Ul(e,(e=>e.space.name));break;case"createdAt":n=f().Ul(e,(e=>e.space.createdTime));break;case"memberCount":n=f().Ul(e,(e=>e.space.memberCount))}return i?n:n.reverse()}function Cr(e){const t=(0,l().IS)((()=>({container:{display:"flex",justifyContent:"center",alignItems:"center",gap:4}})),[]);return(0,se.jsxs)(me().A,{style:t.container,children:[e.space.name,e.isCurrentSpace?(0,se.jsx)(X().A,{children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.secondaryWorkspaces.table.name.currentBadge",defaultMessage:"Current"})}):null]})}function wr(e){let{spaceStore:t,spaces:s}=e;const n=(0,a().v3)(),o=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"}})),[]),d=(0,i.useCallback)((()=>{Sr().SI({environment:n,from:"saml_settings",prepopulatedContent:`Request to add or remove a workspace for SAML single sign-on on workspace ${t.id}.`})}),[t,n]),c=(0,r().K8)((()=>(0,p().bp)(t.getSubscriptionTier())),[t]);return(0,se.jsxs)("div",{style:o.settingContainer,children:[(0,se.jsx)(Ds,{title:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.secondaryWorkspaces.title",defaultMessage:"Linked workspaces"}),byline:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(m().sA,{id:"identityAndProvisioning.secondaryWorkspaces.description",defaultMessage:"This SAML SSO configuration applies to the following other workspaces."}),c&&(0,se.jsxs)(se.Fragment,{children:[" ",(0,se.jsx)(m().sA,{id:"identityAndProvisioning.secondaryWorkspaces.contact",defaultMessage:"<contactlink>Contact support</contactlink> to add or remove a workspace.",values:{contactlink:e=>(0,se.jsx)(di().A,{onClick:d,children:e})}})]})]}),settingItem:null}),(0,se.jsx)(jr,{spaceStore:t,spaces:s})]})}function Mr(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:i}=e;const{verifiedDomains:n,isSamlAvailable:a,isSamlEditable:o,isSamlStatusEnabled:l}=qo({spaceStore:t,samlConfigStore:s,domainSettingsStore:i}),d=!o||!a||!l,c=(0,r().K8)((()=>s.state.spaces),[s]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Is().A,{title:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.samlToggle.learnMore",defaultMessage:"Learn about SAML SSO"}),href:(0,qe().xS)("guides.samlSettings"),style:{marginTop:18,marginBottom:16},analyticsFrom:"saml_settings"}),(0,se.jsx)(hr,{disabled:!o||0===n.length,promptUpgrade:!a,isSamlStatusEnabled:l,spaceStore:t,samlConfigStore:s,domainSettingsStore:i}),(0,se.jsx)(lr,{disabled:d,promptUpgrade:!a,spaceStore:t,samlConfigStore:s}),(0,se.jsx)(rr,{disabled:d,spaceStore:t,samlConfigStore:s}),(0,se.jsx)(wr,{spaceStore:t,spaces:c})]})}var Tr=()=>s(122555),kr=()=>s(364280);function Ir(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:n,organizationOnboardingInfo:o}=e;const d=(0,a().v3)(),{saveWorkspaceCreationSetting:c}=qo({spaceStore:t,samlConfigStore:s,domainSettingsStore:n}),u=(0,l().IS)((()=>({iconArrow:{height:14,width:14,fill:"currentColor",transform:"rotate(90deg)",marginTop:4},button:{margin:"4px 0px 16px",width:"fit-content",display:"flex",alignItems:"center",justifyContent:"center",gap:4}})),[]),{buttonLabel:g,onClick:p}=(0,Oo().gO)({environment:d,organizationOnboardingInfo:o}),f=(0,i.useCallback)((()=>(0,se.jsxs)(Rt().p,{isBlue:!0,onClick:p,style:u.button,children:[g,(0,Tr().p)(u.iconArrow)]})),[g,p,u.button,u.iconArrow]),h=(0,i.useCallback)((()=>(0,se.jsx)(Ds,{title:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.emailDomainsSection.organization.title",defaultMessage:"Verified domains"}),byline:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.emailDomainsSection.organization.byline",defaultMessage:"Verify ownership of an email domain to access advanced security features including single sign-on."}),settingItem:f()})),[f]),S=(0,r().K8)((()=>s.state.emailDomains.length+s.state.domainVerifications.length>0),[s]);return(0,se.jsxs)(kr().VP,{gap:16,children:[S?(0,se.jsx)(Ho,{disabled:!0,promptUpgrade:!1,spaceStore:t,samlConfigStore:s,saveWorkspaceCreationSetting:c,renderOverrideAddDomainButton:h}):h(),(0,se.jsx)(Ds,{title:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.saml.organization.title",defaultMessage:"Enable SAML SSO"}),byline:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.saml.organization.byline",defaultMessage:"Workspace members can log in with SAML SSO if their email address uses a verified email domain."}),settingItem:f()})]})}var Dr=()=>s(978604),Pr=()=>s(799288),Rr=()=>s(792071),_r=()=>s(384100);const Br={container:{display:"flex",alignItems:"center",fontSize:h().J.UIRegular.desktop,overflow:"hidden"},userAvatar:{paddingRight:6},userName:{flexShrink:1,...h().RC}};function Ur(e,t){const s=Rr().Bj6.fromValue(_().GP,e);return s.getCreatedByTable()===B().oo&&s.getCreatedById()===t}const Er={buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20,marginRight:1},menuItemButton:{minWidth:200}};function Lr(e){let{onRevokeToken:t}=e;const s=(0,l().DP)();return(0,se.jsx)(pe().A,{textWrap:!1,renderTooltip:()=>(0,se.jsx)(m().sA,{defaultMessage:"Revoke this token.",id:"revokeTokenButton.tooltip"}),placement:he().W.Right,render:e=>(0,se.jsx)(eo().Ay,{popupType:eo().z7.Popup,placementToOrigin:eo().sx.Right,renderOrigin:t=>(0,se.jsx)(ge().A,{className:Oe().hqd,style:Er.buttonStyle,mobileFeedback:!1,...e,...t,children:(0,Us().I)({fill:s.mediumIconColor,width:12,height:12})}),onClick:()=>{b().Gh({mode:"wide",message:(0,se.jsx)(m().sA,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.message",defaultMessage:"Revoke this token?"}),description:(0,se.jsx)(m().sA,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.description",defaultMessage:"Existing SCIM configurations that use this token will no longer work once the token is revoked, and you'll have to provide them with a new token."}),acceptLabel:(0,se.jsx)(m().sA,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.acceptButton.label",defaultMessage:"Revoke token"}),cancelLabel:(0,se.jsx)(m().sA,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.cancelButton.label",defaultMessage:"Cancel"})}).then((e=>e.accept)).then((e=>e&&t()))},render:e=>(e.close(),(0,se.jsx)(se.Fragment,{}))})})}function Or(){const e=(0,l().DP)();return(0,se.jsx)(pe().A,{textWrap:!1,renderTooltip:()=>(0,se.jsx)(m().sA,{defaultMessage:"Outdated token. Revoke this token and generate a new one to view its contents.",id:"manageScimTokenTable.OutdatedWarningIcon.tooltip"}),placement:he().W.Right,render:t=>(0,se.jsx)("div",{...t,style:{paddingLeft:"4px"},children:(0,cr().Q)({fill:(0,Rn().k5)("orange",e).fill,width:12,height:12})})})}function Wr(e){let{clipboardTextFn:t}=e;const s=(0,a().v3)();const i=(0,l().DP)(),n={height:25,background:i.whiteButtonBackground,color:i.regularTextColor,fontWeight:h().Wy.regular,padding:"4px 6px",fontSize:11.5};return(0,se.jsxs)(Rt().p,{isGray:!0,size:"xs",onClick:async function(){const e=await t();if(void 0!==e){const t=await ce().R.clipboardActions.load();t.copyString({environment:s,stringValue:e,copiedMessage:t.clipboardMessages.copiedTokenToClipboard,showCopyModal:!!s.device.isSafari||void 0})}},style:n,children:[(0,dr().n)({height:16,width:16,paddingRight:4}),(0,se.jsx)(m().sA,{defaultMessage:"Copy",id:"codeBlock.copyToClipboard.button"})]})}const zr="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢";function qr(){return(0,se.jsx)(pe().A,{textWrap:!1,renderTooltip:()=>(0,se.jsx)(m().sA,{defaultMessage:"This token can only be viewed by its creator.",id:"manageScimTokenTable.renderTokenThatCannotBeViewed.tooltip"}),placement:he().W.Right,render:e=>(0,se.jsx)("div",{...e,children:zr})})}function Fr(e){let{row:t}=e;const s=(0,a().v3)();return t.legacy?(0,se.jsxs)(se.Fragment,{children:[zr,(0,se.jsx)(Or,{})]}):t.ownedByCurrentUser?(0,se.jsxs)(se.Fragment,{children:[zr,(0,se.jsx)(Wr,{clipboardTextFn:()=>on().dA({environment:s,botId:t.id})})]}):(0,se.jsx)(qr,{})}const Nr={id:"token",headerTitle:(0,se.jsx)(m().sA,{id:"manageScimTokenTable.columnTitle.token",defaultMessage:"Token"}),renderCell:e=>(0,se.jsx)(Fr,{row:e}),widthData:{width:40},sortable:!1,hasClickableContents:!0};function Kr(){const e=Br;return(0,se.jsx)(pe().A,{textWrap:!1,renderTooltip:()=>(0,se.jsx)(m().sA,{defaultMessage:"This token was created by a user who is no longer an admin in the workspace.",id:"scimTableLegacyUserCell.tooltip"}),placement:he().W.Right,render:t=>(0,se.jsx)("div",{...t,children:(0,se.jsxs)("div",{style:e.container,children:[(0,se.jsx)(Sa().A,{style:e.userAvatar,avatarShouldShowShadow:!0,size:20}),(0,se.jsx)("div",{style:e.userName,children:(0,se.jsx)("i",{children:"Deactivated user"})})]})})})}const Gr={id:"addedBy",headerTitle:(0,se.jsx)(m().sA,{id:"manageScimTokenTable.columnTitle.addedBy",defaultMessage:"Added by"}),renderCell:e=>{if(e.legacy)return(0,se.jsx)(Kr,{});{const t=e.ownedByCurrentUser?(0,se.jsx)(me().A,{isSecondaryColor:!0,style:{marginLeft:4,textAlign:"center"},children:(0,se.jsx)(m().sA,{id:"manageSCIMTokenTable.colums.addedBy.selfIndicator",defaultMessage:"(you)"})}):(0,se.jsx)(se.Fragment,{});return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(s(317131).l,{isClickable:!1,userStores:[e.ownerUserStore]}),t]})}},widthData:{width:40},sortable:!1,hasClickableContents:!1},Vr={id:"created",headerTitle:(0,se.jsx)(m().sA,{id:"manageScimTokenTable.columnTitle.created",defaultMessage:"Created"}),renderCell:e=>(0,se.jsx)(Va().d,{includeTime:!0,dateTs:e.createdAt}),widthData:{width:40},sortable:!0,hasClickableContents:!1},Hr=[Nr,Gr,Vr,{id:"revokeToken",headerTitle:void 0,renderCell:e=>(0,se.jsx)(Lr,{onRevokeToken:()=>{e.onRevokeToken()}}),widthData:{width:10},sortable:!1,hasClickableContents:!0}];function $r(e,t){let{column:s,sortAscending:i}=t;const n=null==s?void 0:s.id;let a=e=>e.id;switch(n){case"name":a=e=>e.name;break;case"created":a=e=>e.createdAt;break;case"token":case"addedBy":case"revokeToken":case void 0:break;default:(0,vs().HB)(n)}const o=f().Ul(e,a);return i||o.reverse(),o}function Yr(e){let{botStores:t,onRevokeToken:s}=e;const n=(0,r().K8)((()=>Je().default.state.currentUserStore),[]),a=(0,r().K8)((()=>Je().default.state.currentSpaceStore),[]),o=(0,m().tz)(),d=(0,r().K8)((()=>{if(!a)return[];const e=null==n?void 0:n.id;return f().oE(t.map((t=>{const i=t.getModel();if(!i||!(0,Pr().SZ)(i))return;const n={id:i.id,isClickable:!1,createdAt:i.getCreatedAt(),userLocale:o.locale,name:i.getName(),onRevokeToken:()=>{s(i.id)}},r=function(e){const t=Rr().Bj6.fromValue(_().GP,e);return"notion_user"===t.getCreatedByTable()&&t.getCreatedById()===B().BF.id}(i);return r?{...n,legacy:r}:{...n,legacy:r,ownedByCurrentUser:Ur(i,e),ownerUserStore:"notion_user"===i.getCreatedByTable()?(0,_r().z)({userId:i.getCreatedById(),currentSpaceStore:a}):void 0}})))}),[t,a,n,o.locale,s]),[c,u]=(0,i.useState)({column:Vr,sortAscending:!1}),g=(0,l().IS)((e=>(0,ue().rC)({columnRenderInfo:Hr,theme:e,containerMarginTop:0})),[]);return(0,se.jsx)(ue().WE,{columnRenderInfo:Hr,rows:$r(d,c),sortState:c,onSortStateChanged:u,onRowClick:()=>(0,se.jsx)(se.Fragment,{}),renderNoRowsComponent:()=>(0,se.jsx)(me().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,se.jsx)(m().sA,{id:"manageSCIMTokenTable.noTokensFound.message",defaultMessage:"No active SCIM tokens."})}),styles:g})}async function Qr(e){let{environment:t,spaceId:s}=e;return(await on().Ju({environment:t,table:an().NX,id:s,type:"scim"})).botIds}const Jr=function(e){let{botIds:t,setBotIds:s,spaceStore:n}=e;const o=(0,a().v3)(),r=n.id;if((0,i.useEffect)((()=>{void 0===t&&Qr({environment:o,spaceId:r}).then(s)}),[t,o,s,r]),t){const e=t.map((e=>ee().sk.createChildStore(n,{table:_().GP,id:e,spaceId:r})));return(0,se.jsx)(Yr,{botStores:e,onRevokeToken:e=>{on().KA({environment:o,botId:e,onSuccess:()=>{Qr({environment:o,spaceId:r}).then(s)}})}})}return(0,se.jsx)(ii().A,{})};function Xr(e){let{userStore:t,spaceStore:s,promptUpgrade:n}=e;const[o,l]=(0,i.useState)(void 0),d=(0,a().v3)(),c=(0,r().K8)((()=>function(e){let{botIds:t,spaceStore:s,environment:i}=e;if(void 0===t)return"Undefined";const n=t.map((e=>ee().sk.createChildStore(s,{table:_().GP,id:e,spaceId:s.id}))).filter((e=>e.isDefined()));if(n.some((e=>e.getCreatedByTable()===B().oo&&e.getCreatedById()===B().BF.id)))return"SpaceHasExistingToken";const a=n.some((e=>e.getCreatedByTable()===B().oo&&e.getCreatedById()===i.currentUser.id));if(a)return"UserHasExistingToken";return"Able"}({botIds:o,spaceStore:s,environment:d})),[o,d,s]),u=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.scim.title",defaultMessage:"SCIM tokens"}),g=(0,se.jsx)(m().sA,{id:"identityAndProvisioning.scim.byline",defaultMessage:"Generate a token to configure SCIM."});return n?(0,se.jsx)(Fo,{title:u,byline:g,targetTier:"enterprise"}):(0,se.jsxs)("div",{children:[(0,se.jsx)(Ds,{title:u,byline:g,settingItem:(0,se.jsx)(Dr().K,{onNewScimToken:e=>l((t=>[...t??[],e])),spaceStore:s,userStore:t,tokenCreationAbility:c})}),(0,se.jsx)(Is().A,{title:(0,se.jsx)(m().sA,{id:"securitySAMLSettings.SCIMSection.helpButton.label",defaultMessage:"Learn about SCIM"}),style:{marginTop:18,marginBottom:24},href:(0,qe().xS)("guides.scim"),analyticsFrom:"scim_settings"}),(0,se.jsx)(Jr,{spaceStore:s,userStore:t,botIds:o,setBotIds:l})]})}var Zr=()=>s(675801);function el(e){let{userStore:t,spaceStore:s}=e;const i=(0,a().v3)(),n=(0,Rs().P9)({name:"scim",spaceId:s.id,userId:t.id}),o=(0,r().K8)((()=>Boolean(s.getSettings().are_scim_invite_emails_suppressed)),[s]),d=(0,l().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:16}})),[]);return(0,se.jsxs)("div",{style:d.container,children:[(0,se.jsx)(Xr,{promptUpgrade:!n,userStore:t,spaceStore:s}),n?(0,se.jsx)(Zr().S,{isEnabled:o,onToggle:()=>{(0,Zr().i)({environment:i,spaceStore:s,areScimInviteEmailsSuppressed:!o})}}):null]})}function tl(e){let{primarySpaceName:t}=e;const s=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",gap:8,width:"100%",padding:"18px 24px",borderRadius:12,marginBlock:12,background:e.onboardingPreviewBackground},title:{fontSize:14,fontWeight:500,color:e.text.primary,width:"100%"},text:{fontSize:14,fontWeight:400,color:e.text.secondary,width:"100%"}})),[]);return(0,se.jsxs)("div",{style:s.container,children:[(0,se.jsx)(me().A,{style:s.title,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.secondaryWorkspace.uneditableTitle",defaultMessage:"The primary workspace is <bold>{primaryWorkspaceName}</bold>.",values:{primaryWorkspaceName:t,bold:e=>(0,se.jsx)("span",{style:{fontWeight:h().Wy.semibold},children:e})}})}),(0,se.jsx)(me().A,{style:s.text,isMultiline:!0,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.secondaryWorkspace.uneditableMessage",defaultMessage:"The domain management settings and SAML SSO configuration are being managed by the workspace <bold>{primaryWorkspaceName}</bold>. Please navigate there or contact an admin of that workspace to edit the verified domains or SSO configuration.",values:{primaryWorkspaceName:t,bold:e=>(0,se.jsx)("span",{style:{fontWeight:h().Wy.semibold},children:e})}})})]})}var sl=()=>s(234695);function il(e){let{userStore:t,spaceStore:s,samlConfigStore:n,domainSettingsStore:o}=e;const{organizationInfo:r,isOrganizationOwner:l}=(0,Bi().n)({spaceId:s.id}),{onboardingInfo:d}=function(e){let{spaceId:t,allowSecondaryWorkspace:s}=e;const n=(0,a().v3)(),{updateCacheWithRecordMap:o}=(0,i.useContext)(Wo().N),[{status:r,value:l},d]=(0,Ma().Yb)((async()=>{const e=await U().callApi({eventName:"getOrganizationOnboardingInfo",environment:n,data:{spaceId:t,allowSecondaryWorkspace:s}});return"success"===e.type?(o({data:e.data}),e.data.result):"failed"===e.type?{onboardingStatus:"ineligible"}:(0,vs().HB)(e)}),[n,t,o,s]);return{loading:"pending"===r||"idle"===r,onboardingInfo:l,refresh:d}}({spaceId:s.id,allowSecondaryWorkspace:!0});return(0,se.jsx)(nl,{userStore:t,spaceStore:s,samlConfigStore:n,domainSettingsStore:o,organizationInfo:r,isOrganizationOwner:l,organizationOnboardingInfo:d})}function nl(e){let{userStore:t,spaceStore:s,samlConfigStore:n,domainSettingsStore:o,organizationInfo:d,isOrganizationOwner:c,organizationOnboardingInfo:u}=e;const g=(0,a().v3)(),p=(0,r().K8)((()=>Xe().A.state.online),[]),{loadingSaml:f,loadedSaml:h,errorSaml:S}=(0,i.useContext)(Da),x=void 0!==d,v=function(e){let{environment:t,samlConfigStore:s,spaceStore:i}=e;const n=Uo({environment:t,samlConfigStore:s,spaceStore:i}),a=(0,r().K8)((()=>!s.state.id||s.state.id===i.id),[s,i]);return n&&a}({environment:g,samlConfigStore:n,spaceStore:s}),y=u&&("not_started"===u.onboardingStatus||"domain_verified"===u.onboardingStatus),j=x&&u&&"ineligible"===(null==u?void 0:u.onboardingStatus),A=u&&"ineligible"!==(null==u?void 0:u.onboardingStatus),C=A||x,w=A,M=x&&!c,T=(0,cn().X)("organization_console_ga_enabled"),k=(0,r().K8)((()=>n.state.id?Eo().A.getData(g,{spaceId:n.state.id}):void 0),[g,n]),I=(0,l().IS)((e=>({header:{marginTop:36},byline:{color:e.text.contrastSecondary},title:{display:"flex",alignItems:"center",gap:6}})),[]),D=(0,r().K8)((()=>(0,ti().OX)()),[]);return(0,i.useEffect)((()=>{p&&!f&&S&&b().c1(S.message)}),[S,f,p]),p?f?(0,se.jsx)(Dt().Ay,{centerContent:!0,children:(0,se.jsx)(ii().A,{})}):S?null:h?(0,se.jsxs)(Dt().Ay,{children:[y?(0,se.jsx)(Oo().s,{organizationOnboardingInfo:u}):j&&c?(0,se.jsx)(Oo().s,{organizationOnboardingInfo:{onboardingStatus:"completed",organizationId:null==d?void 0:d.id}}):null,d&&!c?(0,se.jsx)(Lo().l,{display:"inline",tint:"blue",iconGroup:Bo().x,label:(0,se.jsx)(m().sA,{id:"workspaceSettingsModal.organizationsBanner.member.title",defaultMessage:"Settings that can only be managed by organization owners have been moved to the organization console."}),description:(0,se.jsx)(m().sA,{id:"workspaceSettingsModal.organizationsBanner.member.tooltip",defaultMessage:"Verifying domains and managing accounts can only be done by organization owners. Organization owners can manage all workspaces in {organizationName}.",values:{organizationName:d.name}})}):null,v||T||!k?null:(0,se.jsx)(tl,{primarySpaceName:k.name}),C?null:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(re().A,{large:!0,divider:"full",children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.domain.title",defaultMessage:"Domain management"})}),(0,se.jsx)(Yo,{spaceStore:s,samlConfigStore:n,domainSettingsStore:o,isCurrentSpaceEnterprise:D})]}),C?null:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(re().A,{large:!0,divider:"full",style:I.header,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.userManagement.title",defaultMessage:"User management"})}),(0,se.jsx)(ar,{spaceStore:s,samlConfigStore:n,domainSettingsStore:o})]}),M?null:w?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(re().A,{large:!0,divider:"full",style:"completed"===(null==u?void 0:u.onboardingStatus)&&T?void 0:I.header,children:(0,se.jsxs)("div",{style:I.title,children:[(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.saml.title",defaultMessage:"SAML single sign-on (SSO)"}),(0,se.jsx)(Is().A,{href:(0,qe().xS)("guides.samlSettings"),analyticsFrom:"saml_settings"})]})}),(0,se.jsx)(Ir,{spaceStore:s,samlConfigStore:n,domainSettingsStore:o,organizationOnboardingInfo:u})]}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(re().A,{large:!0,divider:"full",style:I.header,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.saml.title",defaultMessage:"SAML single sign-on (SSO)"})}),(0,se.jsx)(Mr,{spaceStore:s,samlConfigStore:n,domainSettingsStore:o})]}),(0,se.jsx)(re().A,{large:!0,divider:"full",style:I.header,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.scim.title",defaultMessage:"SCIM provisioning"})}),(0,se.jsx)(el,{userStore:t,spaceStore:s}),(0,se.jsx)(re().A,{large:!0,divider:"full",style:I.header,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.setupInfo.title",defaultMessage:"Setup information"})}),(0,se.jsx)(sl().K,{spaceStore:s})]}):null:(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,se.jsx)(m().sA,{defaultMessage:"Please go online to manage identity and provisioning settings.",id:"identityProvisioningSettings.offline.message"})})})}var al=()=>s(818211),ol=()=>s(604341),rl=()=>s(183607),ll=()=>s(545274),dl=()=>s(720665),cl=()=>s(201549),ul=()=>s(365002),gl=()=>s(506090);function pl(){return(0,se.jsx)(pe().A,{renderTooltip:()=>(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.table.pendingWorkspaceClaim.Explanation",defaultMessage:"Workspace claim request is being processed."}),render:e=>(0,se.jsx)(me().A,{...e,children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.table.pendingClaim",defaultMessage:"Pending"})})})}var ml=()=>s(695608);function fl(e){let{admin:t}=e;const s=(0,m().tz)();return(0,se.jsx)(pe().A,{renderTooltip:()=>(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.table.pendingWorkspaceTransferExplanation",defaultMessage:"Waiting for {name} to transfer the workspace to an external account.",values:{name:(0,ml().c6)(s,t)}}),render:e=>(0,se.jsx)(me().A,{...e,children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.table.pendingTransfer",defaultMessage:"Pending"})})})}let hl=function(e){return e.Single="single",e.Multi="multi",e}({});function Sl(e){const{space:t,mode:s}=e,i=(0,r().uB)(void 0,Xa().A),n=(0,l().IS)((()=>({container:{minWidth:325}})),[]);return s===hl.Single?(0,se.jsx)(vl,{action:e.action,space:t}):(0,se.jsx)(eo().Ay,{popupType:Zn().nl.Popup,style:n.container,buttonPopupStore:i,renderOrigin:e=>(0,se.jsx)(_a().A,{icon:Ja()._,...e}),render:()=>(0,se.jsx)(xl,{space:t,actions:e.actions,popupStore:i})})}function xl(e){let{space:t,actions:s,popupStore:i}=e;const n={key:"workspace-actions",render:e=>(0,se.jsx)(Vn().A,{...e}),items:s.map((e=>{const s=!!e.getDisabledState&&e.getDisabledState(t),i=e.getTooltip?e.getTooltip(t):null;return{key:e.id,render:t=>(0,se.jsx)(pe().A,{render:i=>(0,se.jsx)(Za().A,{...t,...i,shouldWrapCaption:!0,svg:t=>e.getIcon(t),title:e.name,caption:e.caption,style:{paddingTop:8,paddingBottom:8,opacity:s?.5:1},disabled:s}),renderTooltip:()=>i,disableTooltip:!Boolean(i),placement:he().W.Left}),action:()=>e.onAction(t)}}))};return(0,se.jsx)(Fn().A,{menuType:On().gu.Popup,children:(0,se.jsx)(Kn().Ay,{type:Kn().Oh.Vertical,initialFocus:void 0,sections:[n],onAccept:()=>{i.setState({open:!1})}})})}function vl(e){const{action:t,space:s}=e,n=(0,l().IS)((e=>({button:{paddingLeft:5,paddingRight:5}})),[]),a=i.useCallback((()=>{t.onAction(s)}),[t,s]);return(0,se.jsx)(Rt().p,{size:"sm",style:n.button,onClick:a,children:t.name})}var yl=()=>s(379990),bl=()=>s(254437);function jl(e){let{users:t,deletedUserEmailDomain:s}=e;const i=(0,r().uB)(void 0,Xa().A),n=(0,l().IS)((()=>({container:{minWidth:275}})),[]);return(0,se.jsx)(eo().Ay,{popupType:Zn().nl.Popup,style:n.container,buttonPopupStore:i,renderOrigin:e=>(0,se.jsx)(wl,{users:t,deletedUserEmailDomain:s,...e}),render:()=>(0,se.jsx)(Al,{users:t,popupStore:i})})}function Al(e){let{users:t,popupStore:s}=e;const i=(0,a().v3)(),n={key:"workspace-users-menu",render:e=>(0,se.jsx)(Vn().A,{...e}),items:t.map((e=>({key:e.id,render:t=>(0,se.jsx)(Cl,{user:e,...t}),action:()=>A().f({environment:i,url:`mailto:${e.email}`})})))};return(0,se.jsx)(Fn().A,{menuType:On().gu.Popup,children:(0,se.jsx)(Kn().Ay,{type:Kn().Oh.Vertical,initialFocus:0,sections:[n],onAccept:()=>{s.setState({open:!1})}})})}function Cl(e){let{user:t,...s}=e;const i=(0,m().tz)(),n=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",height:"auto",paddingTop:8,paddingBottom:8,margin:"0 6px"},avatarContainer:{display:"flex",justifyContent:"center",alignItems:"center"},copyContainer:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"auto",opacity:.5},nameContainer:{marginLeft:8,marginRight:8},name:{fontSize:14,lineHeight:1.2,maxWidth:300},email:{fontSize:12,lineHeight:1.2,opacity:.5,maxWidth:300}})),[]);return(0,se.jsxs)(Rt().p,{style:n.container,...s,children:[(0,se.jsx)("div",{style:n.avatarContainer,children:(0,se.jsx)(Sa().A,{userValue:t,size:24})}),(0,se.jsxs)("div",{style:n.nameContainer,children:[(0,se.jsx)(me().A,{style:n.name,children:(0,ml().c6)(i,t)}),(0,se.jsx)(me().A,{style:n.email,children:t.email})]}),(0,se.jsx)("div",{style:n.copyContainer,children:(0,bl().F)({height:18,width:18})})]})}function wl(e){let{users:t,deletedUserEmailDomain:s,...i}=e;const n=(0,m().tz)(),a=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginLeft:"-8px",maxWidth:"100%"},empty:{fontSize:14,maxWidth:150,opacity:.5},name:{fontSize:14,maxWidth:150},plusMore:{opacity:.5,display:"inline"}})),[]);return 0===t.length?(0,se.jsx)(pe().A,{render:e=>(0,se.jsx)(Rt().p,{style:a.container,disabled:!0,...i,...e,children:(0,se.jsx)(me().A,{style:a.empty,children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.users.empty",defaultMessage:"Deleted user"})})}),disableTooltip:!s,renderTooltip:()=>(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.users.emptyTooltip",defaultMessage:"Deleted user from {domain}",values:{domain:`@${s}`}})}):(0,se.jsx)(Rt().p,{style:a.container,...i,children:(0,se.jsx)(me().A,{children:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.users.name",defaultMessage:"{remainingCount, plural, =0 {{firstUser}} one {{firstUser} <gray>+{remainingCount}</gray>} other {{firstUser} <gray>+{remainingCount}</gray>}}",values:{firstUser:(0,ml().c6)(n,t[0]),remainingCount:t.length-1,gray:e=>(0,se.jsx)(me().A,{style:a.plusMore,children:e})}})})})}const Ml=[{id:"spaces",headerTitle:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.table.name",defaultMessage:"Workspaces"}),renderCell:e=>(0,se.jsx)(yl().H,{id:e.space.id,name:e.space.name,icon:e.space.icon,subscriptionTier:e.space.subscriptionTier,memberCount:e.space.memberCount}),widthData:{width:60},sortable:!1},{id:"admins",headerTitle:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.table.admins",defaultMessage:"Workspace owners"}),renderCell:e=>(0,se.jsx)(jl,{users:e.space.admins}),widthData:{width:40},sortable:!1},{id:"createdBy",headerTitle:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.table.createdBy",defaultMessage:"Created by"}),renderCell:e=>e.space.creator?(0,se.jsx)(jl,{users:[e.space.creator]}):(0,se.jsx)(jl,{users:[],deletedUserEmailDomain:e.space.creatorEmailDomain}),widthData:{width:40},sortable:!1},{id:"createdAt",headerTitle:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.table.createdAt",defaultMessage:"Created date"}),renderCell:e=>(0,se.jsx)(me().A,{style:{opacity:.5},children:(0,So().DG)(e.space.createdAt)}),widthData:{width:30},sortable:!1},{id:"action",headerTitle:null,renderCell:e=>{if((0,Sn().D1)(e.space.spaceRequest))return(0,se.jsx)(fl,{admin:e.space.admins[0]});if((0,Sn().me)(e.space.spaceRequest))return(0,se.jsx)(pl,{});if((0,Sn().kF)(e.space.spaceRequest)){const t=e.actions.find((e=>"recover-space"===e.id));return t&&(0,se.jsx)(Sl,{space:e.space,action:t,mode:hl.Single})}return e.actions.length>0?(0,se.jsx)(Sl,{space:e.space,actions:e.actions.filter((e=>"recover-space"!==e.id)),mode:hl.Multi}):null},widthData:{width:15},sortable:!1}];function Tl(e){let{claimableSpaces:t,spaceActions:s,loadMoreClaimableSpaces:i,loading:n}=e;const a=t.map((e=>({id:e.id,isClickable:!1,space:e,actions:s}))),o=(0,l().IS)((e=>(0,ue().rC)({columnRenderInfo:Ml,theme:e,containerMarginTop:0})),[]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ue().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Ml,rows:a,renderNoRowsComponent:()=>(0,se.jsx)(me().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:!n&&(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.table.empty",defaultMessage:"No claimable workspaces."})}),styles:o,getStyleForRow:function(e){if((0,Sn().D1)(e.space.spaceRequest)||(0,Sn().me)(e.space.spaceRequest)||(0,Sn().kF)(e.space.spaceRequest))return{opacity:.5}},loadMoreMethod:i?{type:"scroll",onLoadMore:i}:void 0}),n&&(0,se.jsx)(ii().A,{style:{margin:"24px auto 24px"}})]})}var kl=()=>s(842599),Il=()=>s(66913),Dl=()=>s(889154),Pl=()=>s(413267),Rl=()=>s(187485);const _l=(0,m().YK)({emailPlaceholder:{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.placeholder",defaultMessage:"it@example.com"}});function Bl(e){let{onDismiss:t,spaceQueuedForTransfer:s,currentSpaceId:n}=e;const[o,r]=(0,i.useState)(),[d,c]=(0,i.useState)(!1),{setSpaceRequest:u}=(0,i.useContext)(Da),g=(0,a().v3)(),p=(0,l().IS)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{fill:e.mediumIconColor,height:24,width:24},title:{fontWeight:h().Wy.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:h().Wy.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},dividerContainer:{marginTop:20},dividerInner:{borderBottomColor:e.regularDividerColor},contactEmailContainer:{position:"relative",width:"100%",minHeight:56,marginTop:13},contactEmailTitle:{fontWeight:h().Wy.medium,fontSize:14,marginBottom:8,letterSpacing:-.15,display:"inline-flex",alignItems:"center"},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},primaryButton:{width:"100%",marginTop:32},buttonCaption:{color:e.mediumTextColor,marginTop:8,textAlign:"center",fontSize:12},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:h().Wy.medium,color:e.lightTextColor},buttonCaptionError:{color:e.errorText,marginTop:8,fontSize:13}})),[]),f=Boolean(s);return(0,se.jsx)(ai().A,{open:f,innerStyle:p.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:p.closeIconContainer,children:(0,se.jsx)(Rt().p,{size:"sm",onClick:t,ignoreLocalHoverState:!0,children:(0,Il().V)(p.closeIcon)})}),(0,se.jsx)("div",{children:(0,Dl().G)(p.modalIcon)}),(0,se.jsxs)(me().A,{style:p.title,children:[(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.selfServe.title",defaultMessage:"Require account change"}),(0,se.jsx)(Rl().A,{href:(0,qe().xS)("guides.domainManagement"),children:(0,se.jsx)(_a().A,{icon:Ra().$})})]}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:p.description,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.byline",defaultMessage:"Youâ€™re about to require the Workspace Owner of 1 workspace to use an external Notion accounts. They will be unable to use the workspace until the change is made."})}),(0,se.jsxs)("div",{style:p.workspaceContainer,children:[s?(0,se.jsx)(yl().H,{id:s.id,name:s.name,icon:s.icon,subscriptionTier:s.subscriptionTier,memberCount:s.memberCount}):null,(0,se.jsx)("div",{style:p.checkContainer,children:(0,Pl().b)(p.check)})]}),(0,se.jsx)(si().A,{size:"100%",innerStyle:p.dividerInner,style:p.dividerContainer}),(0,se.jsxs)("div",{style:p.contactEmailContainer,children:[(0,se.jsxs)(me().A,{style:p.contactEmailTitle,children:[(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.title",defaultMessage:"Send request from"}),(0,se.jsx)(pe().A,{renderTooltip:()=>(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.table.pendingExplanation",defaultMessage:"The Workspace Owner can contact this email for inquiries"}),render:e=>(0,se.jsx)("span",{...e,children:(0,Ra().$)(p.helpIcon)})})]}),(0,se.jsx)(Ls().A,{value:o,placeholder:L().A.formatMessage(_l.emailPlaceholder),onChange:e=>{c(!1),r(e.target.value)}}),d&&(0,se.jsx)(me().A,{isSmall:!0,style:p.buttonCaptionError,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.error",defaultMessage:"Invalid email address"})})]}),(0,se.jsx)(ks().A,{size:"lg",style:p.primaryButton,onClick:async()=>{const e=(0,kl().qh)(o);var i;if((0,kl().DT)(e)){if(s&&e){const a=await U().callApi({eventName:"initiateWorkspaceTransfer",environment:g,data:{requestingSpaceId:n,targetSpaceId:s.id,contactEmail:e}});if("failed"===a.type)b().f1((0,E().Hu)(L().A.getIntl(),a));else{const n=a.data.workspaceTransfer;u(s.id,n),va().FL(g,{contactEmail:e,currentOwners:s.admins.map((e=>e.id)),targetSpaceId:s.id,verifiedDomain:s.creatorEmailDomain,subscriptionTier:s.subscriptionTier}),t(),i=s.name,za().D6({label:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.toast",defaultMessage:"Account change successfully requested for â€œ{spaceName}â€œ",values:{spaceName:i}})})}}}else c(!0)},children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.confirm",defaultMessage:"Confirm change"})}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:p.buttonCaption,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.buttonCaption",defaultMessage:"This cannot be undone"})}),(0,se.jsx)(Rt().p,{style:p.secondaryButton,onClick:t,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.cancel",defaultMessage:"Cancel"})})]})})}function Ul(e){let{onDismiss:t,spaceQueuedForClaiming:s,requestingSpaceId:n}=e;const o=(0,a().v3)(),{setSpaceRequest:r}=(0,i.useContext)(Da),d=(0,l().IS)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},title:{fontWeight:h().Wy.medium,fontSize:16,marginBottom:8,display:"inline-flex",alignItems:"center",justifyContent:"center"},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},description:{fontWeight:h().Wy.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",marginTop:32},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:h().Wy.medium,color:e.lightTextColor},buttonCaption:{color:e.mediumTextColor,marginTop:8,textAlign:"center",fontSize:12}})),[]),c=Boolean(s),u=async()=>{if(!s)return;const e=await U().callApi({eventName:"requestClaimAndUpgrade",environment:o,data:{requestingSpaceId:n,targetSpaceId:s.id}});var i;"failed"===e.type?b().Qg(e):(va().AQ(o,{currentOwners:s.admins.map((e=>e.id)),targetSpaceId:s.id,verifiedDomain:s.creatorEmailDomain,memberCount:s.memberCount}),r(s.id,e.data.spaceRequest),i=s.name,za().D6({label:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.toast",defaultMessage:"Workspace claim successfully requested for â€œ{spaceName}â€œ",values:{spaceName:i}})})),t()};return(0,se.jsx)(ai().A,{open:c,innerStyle:d.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:d.closeIconContainer,children:(0,se.jsx)(Rt().p,{size:"sm",onClick:t,children:(0,Il().V)(d.closeIcon)})}),(0,se.jsxs)(me().A,{style:d.title,children:[(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.title",defaultMessage:"Request workspace claim"}),(0,se.jsx)(Rl().A,{href:(0,qe().xS)("guides.domainManagement"),children:(0,se.jsx)(_a().A,{icon:Ra().$})})]}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:d.description,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.byline",defaultMessage:"Youâ€™re about to take ownership of {currentWorkspaceName} and upgrade it to an Enterprise plan. Youâ€™ll become the Workspace owner and the existing owners will be downgraded to members.",values:{currentWorkspaceName:s?s.name:"the workspace below"}})}),(0,se.jsxs)("div",{style:d.workspaceContainer,children:[s?(0,se.jsx)(yl().H,{id:s.id,name:s.name,icon:s.icon,subscriptionTier:s.subscriptionTier,memberCount:s.memberCount}):null,(0,se.jsx)("div",{style:d.checkContainer,children:(0,Pl().b)(d.check)})]}),(0,se.jsx)(ks().A,{size:"lg",style:d.primaryButton,onClick:u,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.sendRequest",defaultMessage:"Send request"})}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:d.buttonCaption,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.buttonCaption",defaultMessage:"This request may take a few days to process. For more information, contact your <accountmanageremail>Account Management team</accountmanageremail>.",values:{accountmanageremail:e=>(0,se.jsx)(di().A,{href:"mailto:am@makenotion.com",children:e})}})}),(0,se.jsx)(Rt().p,{style:d.secondaryButton,onClick:t,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.cancel",defaultMessage:"Cancel"})})]})})}function El(e){let{onDismiss:t,spaceQueuedForClaiming:s}=e;const i=(0,l().IS)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{fill:e.mediumIconColor,height:24,width:24},title:{fontWeight:h().Wy.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},description:{fontWeight:h().Wy.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",marginTop:32},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:h().Wy.medium,color:e.lightTextColor}})),[]),n=Boolean(s);return(0,se.jsx)(ai().A,{open:n,innerStyle:i.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:i.closeIconContainer,children:(0,se.jsx)(Rt().p,{size:"sm",onClick:t,ignoreLocalHoverState:!0,children:(0,Il().V)(i.closeIcon)})}),(0,se.jsx)("div",{children:(0,ll().m)(i.modalIcon)}),(0,se.jsxs)(me().A,{style:i.title,children:[(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.title",defaultMessage:"Claim workspace"}),(0,se.jsx)(Rl().A,{href:(0,qe().xS)("guides.domainManagement"),children:(0,se.jsx)(_a().A,{icon:Ra().$})})]}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:i.description,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.byline",defaultMessage:"Youâ€™re about to take ownership of {currentWorkspaceName} and upgrade it to an Enterprise plan. Youâ€™ll become the Workspace owner and the existing owners will be downgraded to members.",values:{currentWorkspaceName:s?s.name:"the workspace below"}})}),(0,se.jsxs)("div",{style:i.workspaceContainer,children:[s?(0,se.jsx)(yl().H,{id:s.id,name:s.name,icon:s.icon,subscriptionTier:s.subscriptionTier,memberCount:s.memberCount}):null,(0,se.jsx)("div",{style:i.checkContainer,children:(0,Pl().b)(i.check)})]}),(0,se.jsx)(ks().A,{size:"lg",style:i.primaryButton,onClick:async()=>{s&&await ut().zo(s)},children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.reviewAndPay",defaultMessage:"Review and pay"})}),(0,se.jsx)(Rt().p,{style:i.secondaryButton,onClick:t,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.cancel",defaultMessage:"Cancel"})})]})})}var Ll=()=>s(751735),Ol=()=>s(625830);const Wl=(0,m().YK)({emailPlaceholder:{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.placeholder",defaultMessage:"it@example.com"}});function zl(e){let{onDismiss:t,spaceQueuedForDeletion:s,currentSpaceId:n}=e;const[o,r]=(0,i.useState)({email:void 0,didError:!1}),[d,c]=(0,i.useState)(!1),[u,g]=(0,i.useState)(!1),{setSpaceRequest:p}=(0,i.useContext)(Da),f=(0,l().IS)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{fill:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500],height:24,width:24},title:{fontWeight:h().Wy.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:h().Wy.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},checkboxContainer:{display:"inline-flex",marginTop:8,alignItems:"center"},checkbox:{color:"dark"===e.mode?e.accentColors.gray[400]:e.accentColors.gray[200],marginRight:8},primaryButton:{width:"100%",marginTop:32,background:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500],justifyContent:"center",fontWeight:h().Wy.medium,color:Rn().Ay.white},primaryButtonHovered:{background:"dark"===e.mode?(0,Ll().e$)(e.accentColors.red[700],.3):(0,Ll().e$)(e.accentColors.red[500],.3)},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:h().Wy.medium,color:e.lightTextColor},checkboxCaption:{color:e.mediumTextColor,textAlign:"center",fontSize:12},dividerContainer:{marginTop:18},divider:{borderBottomColor:e.regularDividerColor}})),[]),S=(0,a().v3)(),x=(0,i.useCallback)((()=>{r({email:void 0,didError:!1}),c(!1),g(!1),t()}),[t]),v=(0,i.useCallback)((e=>{r({didError:!1,email:e.target.value})}),[]),y=(0,i.useCallback)((()=>c((e=>!e))),[]),j=(0,i.useCallback)((async()=>{const e=(0,kl().qh)(o.email);if(!(0,kl().DT)(e))return void r({...o,didError:!0});if(!s)return;g(!0);const t=await U().callApi({eventName:"deleteSpaceForDomain",environment:S,data:{requestingSpaceId:n,targetSpaceId:s.id,contactEmail:e}});if("failed"===t.type)g(!1),b().f1((0,E().Hu)(L().A.getIntl(),t));else{const n=t.data.spaceDeletion;p(s.id,n),va().$3(S,{contactEmail:e,currentOwners:s.admins.map((e=>e.id)),targetSpaceId:s.id,verifiedDomain:s.creatorEmailDomain,targetSubscriptionTier:s.subscriptionTier}),x(),i=s.name,za().D6({label:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.toast",defaultMessage:"Successfully deleted â€œ{spaceName}â€œ",values:{spaceName:i}})})}var i}),[x,o,n,S,p,s]),A=Boolean(s);return(0,se.jsx)(ai().A,{open:A,innerStyle:f.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:x,render:()=>(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:f.closeIconContainer,children:(0,se.jsx)(Rt().p,{size:"sm",onClick:x,ignoreLocalHoverState:!0,children:(0,Il().V)(f.closeIcon)})}),(0,se.jsx)("div",{children:(0,Us().I)(f.modalIcon)}),(0,se.jsxs)(me().A,{style:f.title,children:[(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.title",defaultMessage:"Delete workspace"}),(0,se.jsx)(Rl().A,{href:(0,qe().xS)("guides.domainManagement"),children:(0,se.jsx)(_a().A,{icon:Ra().$})})]}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:f.description,children:s?(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.byline",defaultMessage:"Youâ€™re about to permanently delete {currentWorkspaceName} and all of its contents. The workspace owner will be notified.",values:{currentWorkspaceName:s.name}}):void 0}),(0,se.jsxs)("div",{style:f.workspaceContainer,children:[s?(0,se.jsx)(yl().H,{id:s.id,name:s.name,icon:s.icon,subscriptionTier:s.subscriptionTier,memberCount:s.memberCount}):void 0,(0,se.jsx)("div",{style:f.checkContainer,children:(0,Pl().b)(f.check)})]}),(0,se.jsx)(si().A,{size:0,style:f.dividerContainer,innerStyle:f.divider}),(0,se.jsx)(ql,{value:o.email,placeholder:L().A.formatMessage(Wl.emailPlaceholder),onChange:v,labelMessage:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.title",defaultMessage:"Contact email"}),helpMessage:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.deleteWorkspaces.deletionModal.tooltipExplanation",defaultMessage:"The Workspace Owner of the deleted workspace can contact this email for inquiries"}),errorMessage:o.didError?(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.error",defaultMessage:"Invalid email address"}):void 0}),(0,se.jsx)(Rt().p,{disabled:!d||!o.email||u,disabledFeedback:!0,size:"lg",style:f.primaryButton,hoveredStyle:f.primaryButtonHovered,onClick:j,children:u?(0,se.jsx)(ii().A,{}):(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.deleteButton",defaultMessage:"Delete workspace"})}),(0,se.jsxs)("div",{style:f.checkboxContainer,children:[(0,se.jsx)(Ol().A,{style:f.checkbox,size:14,checked:d,onClick:y}),(0,se.jsx)(me().A,{isSmall:!0,style:f.checkboxCaption,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.checkboxLabel",defaultMessage:"I'm sure I want to delete this workspace"})})]}),(0,se.jsx)(Rt().p,{style:f.secondaryButton,onClick:x,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.cancel",defaultMessage:"Cancel"})})]})})}function ql(e){const t=(0,l().IS)((e=>({emailInputTitle:{fontWeight:h().Wy.medium,fontSize:14,marginBottom:8,letterSpacing:-.15,display:"inline-flex",alignItems:"center"},emailContainer:{position:"relative",width:"100%",minHeight:56,marginTop:13},inputCaptionError:{color:e.errorText,marginTop:8,fontSize:13},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16}})),[]);return(0,se.jsxs)("div",{style:t.emailContainer,children:[(0,se.jsxs)(me().A,{style:t.emailInputTitle,children:[e.labelMessage,e.helpMessage&&(0,se.jsx)(pe().A,{renderTooltip:()=>e.helpMessage,render:e=>(0,se.jsx)("span",{...e,children:(0,Ra().$)(t.helpIcon)})})]}),(0,se.jsx)(Ls().A,{value:e.value,placeholder:e.placeholder,onChange:e.onChange}),e.errorMessage&&(0,se.jsx)(me().A,{isSmall:!0,style:t.inputCaptionError,children:e.errorMessage})]})}function Fl(e){let{onDismiss:t,onAccept:s,spaceQueued:i,descriptionMessage:n,divider:a,modalIcon:o,title:r,acceptMessage:d,isLoading:c}=e;const u=(0,l().IS)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{height:24,width:24,fill:e.mediumIconColor},title:{fontWeight:h().Wy.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:h().Wy.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",marginTop:32,justifyContent:"center",fontWeight:h().Wy.medium},secondaryButton:{margin:"8px auto 0",width:"100%",justifyContent:"center",fontWeight:h().Wy.medium,color:e.lightTextColor},dividerContainer:{marginTop:18},divider:{borderBottomColor:e.regularDividerColor}})),[]),g=Boolean(i);return(0,se.jsx)(ai().A,{open:g,innerStyle:u.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:u.closeIconContainer,children:(0,se.jsx)(Rt().p,{size:"sm",onClick:t,ignoreLocalHoverState:!0,children:(0,Il().V)(u.closeIcon)})}),o&&(0,se.jsx)("div",{children:o(u.modalIcon)}),(0,se.jsxs)(me().A,{style:u.title,children:[r,(0,se.jsx)(Rl().A,{href:(0,qe().xS)("guides.domainManagement"),children:(0,se.jsx)(_a().A,{icon:Ra().$})})]}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:u.description,children:n}),(0,se.jsxs)("div",{style:u.workspaceContainer,children:[i?(0,se.jsx)(yl().H,{id:i.id,name:i.name,icon:i.icon,subscriptionTier:i.subscriptionTier,memberCount:i.memberCount}):void 0,(0,se.jsx)("div",{style:u.checkContainer,children:(0,Pl().b)(u.check)})]}),a&&(0,se.jsx)(si().A,{size:0,style:u.dividerContainer,innerStyle:u.divider}),(0,se.jsx)(ks().A,{size:"lg",style:u.primaryButton,onClick:s,disabled:c,children:c?(0,se.jsx)(ii().A,{}):d}),(0,se.jsx)(Rt().p,{style:u.secondaryButton,onClick:t,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimableSpaceConfirmationModal.cancel",defaultMessage:"Cancel"})})]})})}function Nl(e){let{onDismiss:t,spaceQueuedForRecovery:s,currentSpaceId:n}=e;const{setSpaceRequest:o}=(0,i.useContext)(Da),r=(0,a().v3)(),[l,d]=(0,i.useState)(!1),c=(0,i.useCallback)((()=>{d(!1),t()}),[t]),u=(0,i.useCallback)((async()=>{if(!n||!s)return;d(!0);const e=await U().callApi({eventName:"cancelSpaceDeletionForDomain",environment:r,data:{requestingSpaceId:n,targetSpaceId:s.id}});if("failed"===e.type)return d(!1),void b().f1((0,E().Hu)(L().A.getIntl(),e));var t;o(s.id,void 0),va().nY(r,{targetSpaceId:s.id,verifiedDomain:s.creatorEmailDomain}),c(),t=s.name,za().D6({label:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.table.recoverSpace.toast",defaultMessage:"Successfully recovered â€œ{spaceName}â€œ",values:{spaceName:t}})})}),[o,n,r,s,c]);return(0,se.jsx)(Fl,{onDismiss:c,onAccept:u,spaceQueued:s,modalIcon:Oa().u,title:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.title",defaultMessage:"Recover workspace"}),descriptionMessage:s?(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.byline",defaultMessage:"Restore workspace content and the workspace owner's access.",values:{currentWorkspaceName:s.name}}):void 0,acceptMessage:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.deleteButton",defaultMessage:"Recover"}),isLoading:l,divider:!1})}let Kl=!1;function Gl(e){let{spaceStore:t,subscriptionDataStore:s}=e;const{claimableSpaces:n,domainVerifications:o,loadingSpaces:d,errorClaimableSpaces:c,errorVerifications:u,navigateTo:f,removeClaimableSpace:S,loadMoreClaimableSpaces:x,tab:v,setSelectedTab:y,verifiedDomains:j}=(0,i.useContext)(Da),A=(0,a().v3)(),C=(0,Et().l)({spaceId:null==t?void 0:t.id}),w=(0,r().K8)((()=>!gl().A.state.open&&Boolean(gl().A.state.succeeded)),[]),[M,T]=(0,i.useState)(),[k,I]=(0,i.useState)(),[D,P]=(0,i.useState)(),[R,_]=(0,i.useState)(),B=(0,ul().Y)(C,s);function U(){T(void 0),I(void 0),P(void 0),_(void 0)}(0,i.useEffect)((()=>{w&&M&&(S(M.id),T(void 0),gl().A.reset())}),[w,M,S,T]);const E=(0,g().bO)(C),L=(0,l().IS)((e=>({link:{fontSize:14,fontWeight:400,color:e.mediumTextColor,textDecoration:"none"},title:{marginTop:21,fontWeight:h().Wy.semibold,fontSize:17},byline:{fontSize:14,fontWeight:h().Wy.regular,color:e.mediumTextColor,marginRight:"auto",paddingRight:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"}})),[]);if((0,i.useEffect)((()=>{c?b().c1(c.message):u&&b().c1(u.message)}),[c,u]),c)return null;if(u)return null;const O=n.filter((e=>(0,al().Av)(e.spaceRequest,e.memberCount))),W=n.filter((e=>!(0,al().Av)(e.spaceRequest,e.memberCount))),z=[{id:"external-transfer",getIcon:e=>(0,rl().X)({...e,height:14,width:14}),name:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.externalTransfer",defaultMessage:"Require account change"}),caption:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.externalTransferCaption",defaultMessage:"Owner will be prompted to change workspace ownership to a personal account."}),onAction:e=>I(e)},{id:"space-deletion",getIcon:e=>(0,Us().I)({...e,height:14,width:14}),name:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace",defaultMessage:"Delete workspace"}),caption:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpaceCaption",defaultMessage:"Owner will lose access to the workspace immediately."}),onAction:e=>P(e),getDisabledState:e=>{const{isEligible:t}=Vl(o,e.creatorEmailDomain);return!t||e.isDelinquent||e.isPendingBilling||!(0,p().dL)(e.subscriptionTier)},getTooltip:e=>{const t=Vl(o,e.creatorEmailDomain);return t.isEligible?!(0,p().dL)(e.subscriptionTier)||e.isDelinquent||e.isPendingBilling?(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace.ineligibleTooltip",defaultMessage:"The workspace is ineligible for deletion."}):void 0:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace.disabledTooltip",defaultMessage:"You're in the 14-day notification period after verifying a domain.{br} This feature will be enabled in {numDays, plural, one {{numDays} day} other {{numDays} days}}.",values:{numDays:t.daysUntilEligible,br:(0,se.jsx)("br",{})}})}},{id:"recover-space",getIcon:()=>{},name:(0,se.jsx)(m().sA,{id:"identityAndProvisioning.claimWorkspaces.actions.recoverSpace",defaultMessage:"Recover"}),caption:void 0,onAction:e=>_(e)}],q=[{id:"claim-and-upgrade",getIcon:e=>(0,ll().m)({...e,height:14,width:14}),name:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimAndUpgrade",defaultMessage:"Claim and upgrade"}),caption:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimAndUpgradeCaption",defaultMessage:"Take ownership of the workspace and upgrade it to an Enterprise plan"}),onAction:e=>T(e),getDisabledState:e=>{const{isEligible:t}=Vl(o,e.creatorEmailDomain);return E||!t||e.isDelinquent||e.isPendingBilling},getTooltip:e=>{const t=Vl(o,e.creatorEmailDomain);return e.isDelinquent||e.isPendingBilling?(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimSpace.ineligibleTooltip",defaultMessage:"The workspace is ineligible for claiming."}):t.isEligible?void 0:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.disabledTooltip",defaultMessage:"You're in the 14-day notification period after verifying a domain.{br} This feature will be enabled in {numDays, plural, one {{numDays} day} other {{numDays} days}}.",values:{numDays:t.daysUntilEligible,br:(0,se.jsx)("br",{})}})}}];return(0,se.jsxs)(Dt().Ay,{children:[(0,se.jsx)(di().A,{style:L.link,onClick:()=>f(ka.SettingsPage),children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.breadcrumb",defaultMessage:"â† Identity & Provisioning"})}),(0,se.jsx)(re().A,{large:!0,style:L.title,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.title",defaultMessage:"Manage workspaces"})}),(0,se.jsxs)(kr().fI,{children:[(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:L.byline,children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.byline",defaultMessage:"Claim verified-domain workspaces to your Enterprise plan or require Owners to use an external domain."})}),(0,se.jsx)(vt().A,{size:"lg",onClick:()=>{cl().U6({environment:A,data:{spaceId:t.id,emailDomains:j}})},children:(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.exportClaimableWorkspaces.button",defaultMessage:"Export to CSV"})})]}),(0,se.jsx)(ui().Ay,{tabs:[(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.singleSpaces",defaultMessage:"Single-member"},"single"),(0,se.jsx)(m().sA,{id:"identityProvisioningSettings.claimWorkspaces.multiSpaces",defaultMessage:"Multi-member"},"multi")],selectedIndex:v,onChange:e=>y(e),style:L.tabBarMenu}),(0,se.jsx)(Bl,{onDismiss:U,spaceQueuedForTransfer:k,currentSpaceId:t.id}),v===Ia.Single?(0,se.jsx)(Tl,{claimableSpaces:O,spaceActions:z,loadMoreClaimableSpaces:x,loading:d},"single"):(0,se.jsx)(Tl,{claimableSpaces:W,spaceActions:q,loadMoreClaimableSpaces:x,loading:d},"multi"),B?(0,se.jsx)(Ul,{onDismiss:U,spaceQueuedForClaiming:M,requestingSpaceId:t.id}):(0,se.jsx)(El,{onDismiss:U,spaceQueuedForClaiming:M}),(0,se.jsx)(zl,{onDismiss:U,spaceQueuedForDeletion:D,currentSpaceId:t.id}),(0,se.jsx)(Nl,{onDismiss:U,spaceQueuedForRecovery:R,currentSpaceId:t.id})]})}function Vl(e,t){if(Kl)return{isEligible:!0};const s=e.find((e=>{let{domain:s}=e;return t===s}));if(!s||!s.verified_at)return{isEligible:!0};const i=(Date.now()-s.verified_at)/dl().nD;return i>=14?{isEligible:!0}:{isEligible:!1,daysUntilEligible:Math.ceil(14-i)}}function Hl(e){let{userStore:t,spaceStore:s,samlConfigStore:n,domainSettingsStore:a}=e;const{page:o}=(0,i.useContext)(Da);switch(o){case ka.SettingsPage:return(0,se.jsx)(il,{userStore:t,spaceStore:s,samlConfigStore:n,domainSettingsStore:a});case ka.WorkspacesPage:return(0,se.jsx)(Gl,{spaceStore:s,subscriptionDataStore:Mt().subscriptionDataStoreInstance});case ka.ManagedUsersPage:return(0,se.jsx)(_o,{spaceStore:s,samlConfigStore:n})}}["local","development","staging"].includes("production")&&(0,ol().exposeDebugValue)("bypassDomainVerificationWaitingPeriod",(function(){Kl=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}));const $l=function(e){let{userStore:t,spaceStore:s,samlConfigStore:i,domainSettingsStore:n}=e;return(0,se.jsx)(Pa,{spaceStore:s,samlConfigStore:i,domainSettingsStore:n,children:(0,se.jsx)(Hl,{userStore:t,spaceStore:s,samlConfigStore:i,domainSettingsStore:n})})};var Yl=()=>s(276082),Ql=()=>s(863569),Jl=()=>s(899687),Xl=()=>s(789148),Zl=()=>s(942906),ed=()=>s(113474);function td(e){let{isMobile:t}=e;const s=(0,a().v3)(),i=L().A.getIntl(),n=(0,r().K8)((()=>Je().default.state.currentUserSettingsStore),[]),{currentTimeZone:o,auto_update_disabled:l}=(0,r().K8)((()=>{const e=null==n?void 0:n.getSettings();return{currentTimeZone:null!=e&&e.time_zone&&(0,Xl().PJ)(null==e?void 0:e.time_zone)?e.time_zone:void 0,auto_update_disabled:null==e?void 0:e.disable_auto_set_timezone}}),[n]),d=!l||!o;return n?(0,se.jsx)(Fs().A,{isMobile:t,type:"timezonePicker",currentTimeZone:o,title:(0,se.jsx)(m().sA,{id:"dateAndTimeSettings.timeZone.title",defaultMessage:"Timezone"}),caption:(0,se.jsx)(m().sA,{id:"dateAndTimeSettings.timeZone.caption",defaultMessage:"Current timezone setting."}),renderOrigin:e=>(0,se.jsx)(ed()._,{focused:!1,disabled:d,buttonStyle:{width:void 0,margin:0},title:o?(0,Jl().Dy)(i,o):(0,se.jsx)(m().sA,{id:"dateAndTimeSettings.timeZone.error",defaultMessage:"Error finding timezone"}),...e}),disabled:d,onSelect:e=>{Zl().Lj({environment:s,userSettingsStore:n,timeZone:e})}}):null}function sd(e){let{isMobile:t}=e;const s=(0,a().v3)(),n=(0,r().K8)((()=>Je().default.state.currentUserSettingsStore),[]),o=(0,r().K8)((()=>{var e;return null==n||null===(e=n.getSettings())||void 0===e?void 0:e.disable_auto_set_timezone}),[n])??!1,l=(0,i.useCallback)((e=>{const t=!o;Zl().W2({environment:s,userSettingsStore:e,disableAutoSetTimezone:t}),t||Zl().xw({environment:s,userSettingsStore:e})}),[s,o]),d=(0,se.jsx)(m().sA,{id:"dateAndTimeSettings.autoTimeZone.title",defaultMessage:"Set timezone automatically using your location"}),c=(0,se.jsx)(m().sA,{id:"dateAndTimeSettings.autoTimeZone.caption",defaultMessage:"Reminders, notifications and emails are delivered based on your time zone."});return(n&&(0,se.jsx)(Fs().A,{isMobile:t,title:d,caption:c,type:"toggle",isOn:!o,onToggle:()=>l(n)}))??null}var id=()=>s(89244),nd=()=>s(537296),ad=()=>s(857639),od=()=>s(668725),rd=()=>s(229833),ld=()=>s(700250);const dd=function(e){const[t,n]=i.useState([]),[o,d]=i.useState([]),c=(0,a().v3)(),u=(0,r().uB)(void 0,Xa().A),g=(0,l().IS)((e=>({span:{color:e.mediumTextColor},plainButton:{paddingLeft:8,paddingRight:8,marginLeft:-8},icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);function p(e){return o.some((t=>t.code===e.code))}(0,i.useEffect)((()=>{const e=c.SpellCheckStore;e&&(e.getAvailableLanguages().then(n).catch((e=>{ad().log({level:"error",from:"SpellcheckerLanguagesPicker",type:"getAvailableLanguages",error:(0,rd().n6)(e)})})),e.getLanguages().then(d).catch((e=>{ad().log({level:"error",from:"SpellcheckerLanguagesPicker",type:"getLanguages",error:(0,rd().n6)(e)})})))}),[c]),(0,i.useEffect)((()=>{const e=c.SpellCheckStore;if(!e)return;const t=o.map((e=>{let{code:t}=e;return t}));e.setLanguages(t)}),[o,c.SpellCheckStore]);const f=o.length>0?o.slice(0,3).map((e=>{let{name:t}=e;return t})).join(", ")+(o.length>3?"â€¦":""):(0,se.jsx)(m().sA,{id:"languageRegionSettings.spellchecker.picker.label",defaultMessage:"Select languages"});return(0,se.jsx)(eo().Ay,{popupType:eo().z7.Popup,buttonPopupStore:u,renderOrigin:e=>(0,se.jsxs)(Rt().p,{style:g.plainButton,...e,children:[f,(0,od().b)(g.icon)]}),placementToOrigin:ld().UV.Bottom,alignmentToOrigin:ld().MY.Start,render:e=>{const i=[{key:"spellcheckerlanguages",render:e=>(0,se.jsx)(Vn().A,{...e,topBorder:0!==e.index}),items:t.map((e=>{const t={key:e.code,render:t=>function(e){const t=e.language.name||e.language.code;return(0,se.jsx)(qn().A,{...e.props,title:(0,se.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,se.jsx)("div",{style:{marginRight:0},children:t})}),shouldWrapCaption:!0,right:p(e.language)?(0,s(982615).$)({width:12,height:12}):void 0})}({language:e,props:t}),action:()=>{p(e)?d(o.filter((t=>t.code!==e.code))):d([...o,e])}};return t}))}],n={menuType:On().gu.Popup,width:240};return(0,se.jsx)(Fn().A,{className:Oe().jtA,...n,children:(0,se.jsx)(Kn().Ay,{type:Kn().Oh.Vertical,initialFocus:void 0,sections:i})})}})};const cd=function(e){const t=(0,a().v3)();return t.device.isElectron&&t.device.isWindows?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(si().A,{size:24,isHidden:!0}),(0,se.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto"},children:(0,se.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",width:"100%"},children:[(0,se.jsxs)("div",{style:{flex:1},children:[(0,se.jsx)(me().A,{children:(0,se.jsx)(m().sA,{id:"languageRegionSettings.spellchecker.label",defaultMessage:"Spellchecker languages"})}),(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,se.jsx)(m().sA,{id:"languageSettings.spellcheckerSwitcher.subtitle",defaultMessage:"Change the languages used by the spellchecker."})})]}),(0,se.jsx)(dd,{})]})})]}):null};const ud=function(){return(0,r().K8)((()=>Xe().A.state.online),[])?(0,se.jsx)(pd,{}):(0,se.jsx)(gd,{})};function gd(){return(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(me().A,{isSmall:!0,style:{textAlign:"center"},children:(0,se.jsx)(m().sA,{defaultMessage:"Please go online to manage your language and region.",id:"languageSettings.offline.message"})})})}function pd(){const e=(0,r().K8)((()=>Je().default.state.currentUserSettingsStore),[]),t=(0,r().K8)((()=>{var t;return(null==e||null===(t=e.getSettings())||void 0===t?void 0:t.preferred_locale)||fo().q}),[e]),s=(0,a().v3)(),{isMobile:i}=(0,a().Y0)(),n=(0,r().K8)((()=>(0,Nt().xu)(s)),[s]);if(!e)return null;const o=[{key:"timezone-auto",renderSettingsItem:()=>(0,se.jsx)(sd,{isMobile:i})},{key:"timezone-manual",renderSettingsItem:()=>(0,se.jsx)(td,{isMobile:i})}].filter(vs().O9);return n?(0,se.jsxs)("div",{style:{paddingTop:48},children:[(0,se.jsx)(re().A,{large:!0,divider:"full",children:(0,se.jsx)(m().sA,{id:"languageSettings.languageAndTimeSection.title",defaultMessage:"Language & Time"})}),(0,se.jsx)(id().A,{locale:t,userSettingsStore:e}),(0,se.jsx)(cd,{}),(0,se.jsx)(si().A,{size:18,isHidden:!0}),(0,se.jsx)(Ql().A,{}),(0,se.jsx)(si().A,{size:18,isHidden:!0}),(0,se.jsx)(nd().U,{items:o})]}):(0,se.jsxs)(Dt().Ay,{children:[(0,se.jsx)(re().A,{large:!0,divider:"full",children:(0,se.jsx)(m().sA,{id:"languageSettings.languageSection.title",defaultMessage:"Language & region"})}),(0,se.jsx)(id().A,{locale:t,userSettingsStore:e}),(0,se.jsx)(cd,{}),(0,se.jsx)(si().A,{size:24}),(0,se.jsx)(Ql().A,{})]})}var md=()=>s(739793),fd=()=>s(878079),hd=()=>s(332381),Sd=()=>s(388450);function xd(){const{isElectron:e,isElectronMac:t,isMobile:s,desktopAppId:i}=(0,a().Y0)(),n=(0,a().v3)(),o=(0,r().K8)((()=>Xe().A.state.online),[]),l=(0,r().K8)((()=>(0,fd().Z5)()),[]),d=(0,r().K8)((()=>(0,Nt().xu)(n)),[n]),c=(0,r().K8)((()=>{const n=(0,fd().fb)();return function(e){const{isMobile:t,isElectron:s,isElectronMac:i,desktopAppId:n,slackFeatureGateChecks:{showSlackNotificationSetting:a,showNotionActivityNotificationsToSlackSetting:o}}=e,r=!t&&s,l=r&&i&&Boolean(n);return[{key:"notify_mobile",renderSettingsItem:()=>(0,se.jsx)(hd().L,{target:"notify_mobile"})},r?{key:"notify_desktop",renderSettingsItem:()=>(0,se.jsx)(hd().L,{target:"notify_desktop"})}:void 0,l?{key:"desktop_badge",renderSettingsItem:()=>(0,se.jsx)(hd().L,{target:"desktop_badge"})}:void 0,a&&!o?{key:"notify_slack",renderSettingsItem:()=>(0,se.jsx)(Sd().R,{target:"notify_slack"})}:void 0].filter(vs().O9)}({isMobile:s,isElectron:e,isElectronMac:t,desktopAppId:i,slackFeatureGateChecks:{showSlackNotificationSetting:n,showNotionActivityNotificationsToSlackSetting:l}})}),[s,e,t,i,l]),u=(0,r().K8)((()=>{var e;const t=(0,fd().fb)();return function(e){const{isSlackNotificationSettingEnabled:t,showSlackNotificationSetting:s,showNotionActivityNotificationsToSlackSetting:i}=e;if(!s||!i)return[];return[{key:"notify_slack",renderSettingsItem:()=>(0,se.jsx)(Sd().R,{target:"notify_slack"})},t?{key:"notify_slack_all_activity",renderSettingsItem:()=>(0,se.jsx)(Sd().R,{target:"notify_slack_all_activity"})}:void 0,t?{key:"notify_slack_mention",renderSettingsItem:()=>(0,se.jsx)(Sd().R,{target:"notify_slack_mention"})}:void 0].filter(vs().O9)}({isSlackNotificationSettingEnabled:Boolean(null===(e=Je().default.state.currentSpaceViewStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.notify_slack),showSlackNotificationSetting:t,showNotionActivityNotificationsToSlackSetting:l})}),[l]),g=(0,r().K8)((()=>{var e;return function(e){const{showNotifyEmailAlwaysSetting:t}=e;return[{key:"notify_email",renderSettingsItem:()=>(0,se.jsx)(hd().L,{target:"notify_email"})},t?{key:"notify_email_always",renderSettingsItem:()=>(0,se.jsx)(hd().L,{target:"notify_email_always"})}:void 0,{key:"notify_email_digest",renderSettingsItem:()=>(0,se.jsx)(hd().L,{target:"notify_email_digest"})},{key:"notify_home_digest_email",renderSettingsItem:()=>(0,se.jsx)(hd().L,{target:"notify_home_digest_email"})},{key:"marketing_emails",renderSettingsItem:()=>(0,se.jsx)(hd().L,{target:"marketing_emails"})}].filter(vs().O9)}({showNotifyEmailAlwaysSetting:(null===(e=Je().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getNotifyEmail())||!1})}),[]),p=(0,r().K8)((()=>n.WindowSizeStore.state.paddingBottomCSS),[n.WindowSizeStore]);return o?(0,se.jsxs)(Dt().Ay,{disableScroller:s,children:[(0,se.jsx)(re().A,{large:!s,divider:"full",children:d?(0,se.jsx)(m().sA,{id:"notificationSettings.notificationsSection.title.v2",defaultMessage:"Notifications"}):(0,se.jsx)(m().sA,{id:"notificationSettings.notificationsSection.title",defaultMessage:"My notifications"})}),(0,se.jsx)(nd().U,{items:c}),(0,se.jsx)(si().A,{size:48,isHidden:!0}),l?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(re().A,{large:!s,divider:"full",children:(0,se.jsx)(m().sA,{id:"notificationSettings.slackNotificationsSection.title",defaultMessage:"Slack notifications"})}),(0,se.jsx)(nd().U,{items:u}),(0,se.jsx)(si().A,{size:48,isHidden:!0})]}):void 0,(0,se.jsx)(re().A,{large:!s,divider:"full",children:(0,se.jsx)(m().sA,{id:"notificationSettings.emailNotificationsSection.title",defaultMessage:"Email notifications"})}),(0,se.jsx)(nd().U,{items:g}),(0,se.jsx)(si().A,{size:48,isHidden:!0}),(0,se.jsx)("div",{style:{marginTop:4,marginBottom:s?p:void 0},children:(0,se.jsx)(Is().A,{title:(0,se.jsx)(m().sA,{id:"myNotificationSettings.helpButton.caption",defaultMessage:"Learn about notifications"}),href:(0,qe().xS)("guides.notificationSettings"),analyticsFrom:"notifications_settings"})})]}):(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(me().A,{isSmall:!0,style:{textAlign:"center"},children:(0,se.jsx)(m().sA,{defaultMessage:"Please go online to manage your notification settings.",id:"myNotificationsSettings.goOnline.prompt"})})})}var vd=()=>s(471327);const yd={whiteSpace:"normal",paddingTop:5,paddingBottom:5,height:"auto"};function bd(e){const t=(0,a().v3)(),{onView:s}=e,n=(0,m().tz)();(0,i.useEffect)((()=>{s(t)}),[t,s]);const o=n.formatMessage({id:"settingsPrompt.learnMore.button",defaultMessage:"Learn more"});return(0,se.jsxs)("div",{children:[(0,se.jsx)(si().A,{size:0}),(0,se.jsx)(vd().X,{icon:e.icon,title:e.title,description:e.descriptionMessage,onDismiss:e.onDismiss,primaryAction:{text:e.buttonText,onClick:t=>(e.onDismiss(),e.onClick(t)),ariaLabel:e.buttonAriaLabel},secondaryAction:{icon:e=>(0,Ra().$)(e),text:o,ariaLabel:o,onClick:e.onClickLearnMore},customPrimaryButtonStyles:yd})]})}const jd=function(e){const t=(0,l().IS)((t=>({style:{display:"flex",height:"100%",flexDirection:e.isReversed?"row-reverse":"row"},sidebarStyle:{height:"100%",background:t.cardSidebarBackground,flexGrow:0,flexShrink:0,width:240,overflowY:"auto"},childrenStyle:{flexGrow:1,position:"relative",zIndex:1,height:"100%",overflow:"hidden"}})),[e.isReversed]);return(0,se.jsxs)("div",{style:t.style,onMouseDown:e.onMouseDown,onClick:e.onClick,onDoubleClick:e.onDoubleClick,onContextMenu:e.onContextMenu,tabIndex:-1,role:"presentation",children:[(0,se.jsx)("div",{style:t.sidebarStyle,children:e.sidebar}),(0,se.jsx)("div",{style:t.childrenStyle,role:e.contentRole,"aria-labelledby":e.contentLabelledBy,id:e.contentId,children:e.children})]})};var Ad=()=>s(76590),Cd=()=>s(593467),wd=()=>s(591779),Md=()=>s(301608),Td=()=>s(5347),kd=()=>s(452864),Id=()=>s(305961),Dd=()=>s(687646),Pd=()=>s(997583),Rd=()=>s(249117),_d=()=>s(655546),Bd=()=>s(175458),Ud=()=>s(733815);const Ed=640;function Ld(e){let{data:t,loading:s,error:n,daysFilter:o,setDaysFilter:r}=e;const[d,c]=(0,Pd().z)(),u=(0,l().IS)((e=>({title:{fontWeight:h().Wy.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:1},titleText:{flexShrink:1},infoIcon:{marginLeft:4,flexShrink:0},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{pageViews:g,uniquePageViews:p,pagesCreated:f,pageEdits:S}=t,x=(0,a().v3)(),v=(0,i.useCallback)((e=>{Ad().Y5(x,{daysFilter:e}),r(e)}),[x,r]);return(0,se.jsxs)("div",{style:u.container,ref:d,children:[(0,se.jsxs)("div",{style:u.titleContainer,children:[(0,se.jsxs)(me().A,{style:u.title,children:[(0,se.jsx)("div",{style:u.titleText,children:(0,se.jsx)(m().sA,{id:"workspaceAnalytics.content.contentEngagement.title",defaultMessage:"Content engagement"})}),(0,se.jsx)(pe().A,{placement:he().W.Bottom,render:e=>(0,se.jsx)(Is().A,{...e,href:(0,qe().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:u.infoIcon}),renderTooltip:()=>"all_time"!==o?(0,se.jsx)(m().sA,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all workspace pages (includes private and shared) over the {dateRange}",values:{dateRange:L().A.formatMessage(Md().Yr[o])}}):(0,se.jsx)(m().sA,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace (includes private and shared)"})})]}),(0,se.jsx)(Ud().Z,{currentFilter:o,onChangeFilter:v})]}),(0,se.jsxs)(Rd().xA,{gap:16,children:[(0,se.jsx)(Rd().LX,{row:1,col:1,children:(0,se.jsx)(Bd().a,{style:u.cardContainer,textStyles:u.cardTextContainer,loading:s,error:n,icon:Id().d,iconStyles:{height:48,width:48},title:(0,se.jsx)(m().sA,{id:"workspaceAnalytics.content.contentEngagement.totalViews",defaultMessage:"{pageViews} total views",values:{pageViews:(0,se.jsx)(_d()._,{abbreviateNumber:c<Ed,num:g})}}),byline:(0,se.jsx)(me().A,{isSecondaryColor:!0,children:(0,se.jsx)(m().sA,{id:"workspaceAnalytics.content.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,se.jsx)(_d()._,{abbreviateNumber:c<Ed,num:p})}})})})}),(0,se.jsx)(Rd().LX,{row:1,col:2,children:(0,se.jsx)(Bd().a,{style:u.cardContainer,textStyles:u.cardTextContainer,loading:s,error:n,icon:Dd().k,iconStyles:{height:36,width:36},title:(0,se.jsx)(m().sA,{id:"workspaceAnalytics.content.contentEngagement.pagesCreated",defaultMessage:"{pagesCreated} pages created",values:{pagesCreated:(0,se.jsx)(_d()._,{abbreviateNumber:c<Ed,num:f})}}),byline:(0,se.jsx)(me().A,{isSecondaryColor:!0,children:(0,se.jsx)(m().sA,{id:"workspaceAnalytics.content.contentEngagement.pageEdits.byline",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,se.jsx)(_d()._,{abbreviateNumber:c<Ed,num:S})}})})})})]})]})}var Od=()=>s(108944),Wd=()=>s(994776),zd=()=>s(773290),qd=()=>s(882690);const Fd=(0,m().YK)({views:{id:"workspaceAnalytics.contentTab.contentTable.viewsColumn.tooltip",defaultMessage:"Number of times users have viewed the page"},uniqueViews:{id:"workspaceAnalytics.contentTab.contentTable.uniqueViewsColumn.tooltip",defaultMessage:"Total number of users that have viewed page in the selected period"}}),Nd={id:"page",headerTitle:(0,se.jsx)(Xd,{message:Md().bo.page}),renderCell:e=>(0,se.jsx)(s(744766).oc,{blockStore:e.navigableBlockStore,rightIcon:(0,se.jsx)(s(663484).r,{blockStore:e.navigableBlockStore})}),widthData:{width:320,maxWidth:320},sortable:!1},Kd={id:"location",headerTitle:(0,se.jsx)(m().sA,{id:"settings.workspaceAnalytics.contentTab.allPages.table.location.name",defaultMessage:"Location"}),renderCell:e=>(0,se.jsx)(s(421645).E,{blockStore:e.navigableBlockStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},Gd={id:"audience",headerTitle:(0,se.jsx)(Xd,{message:Md().bo.audience}),renderCell:e=>(0,se.jsx)(me().A,{children:(0,s(592010).Z)(e.audience)}),widthData:{width:140},sortable:!1},Vd={id:"views",headerTitle:(0,se.jsx)(qd().Z,{tooltipMessageDescriptor:Fd.views,columnHeader:Md().bo.allViews}),renderCell:e=>(0,se.jsx)(me().A,{children:e.views.toLocaleString()}),widthData:{width:100},sortable:!0},Hd={id:"uniqueViews",headerTitle:(0,se.jsx)(qd().Z,{tooltipMessageDescriptor:Fd.uniqueViews,columnHeader:Md().bo.uniqueViews}),renderCell:e=>(0,se.jsx)(me().A,{children:e.uniqueViews.toLocaleString()}),widthData:{width:100},sortable:!0},$d={id:"createdBy",headerTitle:(0,se.jsx)(Xd,{message:Md().bo.createdBy}),renderCell:e=>e.createdById?(0,se.jsx)(zd().T,{blockStore:e.navigableBlockStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},Yd={id:"createdTime",headerTitle:(0,se.jsx)(Xd,{message:Md().bo.createdAt}),renderCell:e=>(0,se.jsx)(Va().d,{dateTs:e.createdTime}),widthData:{width:100},sortable:!1},Qd=[Nd,Vd,Hd,Kd,Gd,{id:"lastEditedBy",headerTitle:(0,se.jsx)(Xd,{message:Md().bo.lastEditedBy}),renderCell:e=>e.lastEditedById?(0,se.jsx)(zd().T,{blockStore:e.navigableBlockStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1},{id:"lastEditedTime",headerTitle:(0,se.jsx)(Xd,{message:Md().bo.lastEditedAt}),renderCell:e=>(0,se.jsx)(Va().d,{dateTs:e.lastEditedTime}),widthData:{width:100},sortable:!1},$d,Yd];function Jd(e){let{navigableBlockStores:t,analyticsByPageId:s,runNewSearch:n,sort:a,setSort:o,loadNextPage:d,loading:c,error:u}=e;const g=(0,r().K8)((()=>t.map((e=>{var t,i,n;return{id:e.id,isClickable:!1,navigableBlockStore:e,teamStore:(0,Od().Uo)(e),views:(null===(t=s.get(e.id))||void 0===t?void 0:t.pageViews)||0,uniqueViews:(null===(i=s.get(e.id))||void 0===i?void 0:i.uniquePageViews)||0,createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),audience:(null===(n=s.get(e.id))||void 0===n?void 0:n.audience)||"private"}}))),[t,s]),p=(0,i.useMemo)((()=>function(e){const t=Qd.find((t=>"pageViews"===e.field&&"views"===t.id||"uniquePageViews"===e.field&&"uniqueViews"===t.id)),s=t?{column:t,sortAscending:"asc"===e.direction}:void 0;return s}(a)),[a]),f=(0,l().IS)((e=>(0,ue().rC)({columnRenderInfo:Qd,theme:e,containerMarginTop:0})),[]),h=(0,l().IS)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return u?(0,se.jsx)(Wd().t,{error:u,runNewSearch:n}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ue().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:Qd,rows:g,sortState:p,onSortStateChanged:e=>{o(function(e){const t="views"===e.column.id?"pageViews":"uniquePageViews",s=e.sortAscending?"asc":"desc";return{field:t,direction:s}}(e))},loadMoreMethod:{type:"scroll",onLoadMore:d},renderNoRowsComponent:()=>(0,se.jsx)(me().A,{isSmall:!0,style:h.emptyQuery,children:!c&&0===t.length&&(0,se.jsx)(m().sA,{id:"settings.workspaceAnalytics.contentTab.allPages.table.empty",defaultMessage:"No pages found with your query."})}),styles:f}),c?(0,se.jsx)(ii().A,{style:h.loadingSpinner}):null]})}function Xd(e){let{message:t}=e;const s=(0,m().tz)();return(0,se.jsx)(se.Fragment,{children:s.formatMessage(t)})}var Zd=()=>s(179034);const ec={query:"",createdBy:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[]},tc={field:"pageViews",direction:"desc"},sc=Cd().Jb,ic={filters:ec,sort:tc,timeRange:sc,navigableBlockIds:[],analyticsByPageId:new Map,numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};var nc=()=>s(988499);function ac(e){let{spaceStore:t,teamStores:s,timeRange:i,filters:n,runNewSearch:a,setFilters:o,setTimeRange:d}=e;const c=(0,r().K8)((()=>s??nc().A.state.teams),[s]),u=(0,l().IS)((e=>({container:{width:"100%",margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItems:"center"},timeRangeContainer:{display:"flex",flexDirectionRow:"row",alignItems:"center",justifyContent:"center",gap:4,borderRight:`1px solid ${e.tableDividerColor}`,marginRight:12,paddingRight:6}})),[]);return(0,se.jsxs)("div",{style:u.container,children:[(0,se.jsx)(Vi().nv,{mode:Vi().Ke.OnChange,query:n.query,setQueryFilter:function(e){o({query:e},{runSearchAfter:!0})},placeholderText:L().A.formatMessage(Vi().Jj.titleOnlyPlaceholder)}),(0,se.jsxs)("div",{style:u.filterPillsContainer,children:[(0,se.jsxs)("div",{style:u.timeRangeContainer,children:[(0,se.jsx)(me().A,{isSecondaryColor:!0,children:(0,se.jsx)(m().sA,{id:"settings.workspaceAnalytics.contentTab.timeRange",defaultMessage:"Views from"})}),(0,se.jsx)(Ud().Z,{currentFilter:i,onChangeFilter:d})]}),(0,se.jsx)(en().j,{selectedTeamIds:n.teamIds,setSelectedTeamIds:function(e){o({teamIds:e})},onMenuClose:a,teamStores:c}),(0,se.jsx)($i().Q,{spaceStore:t,createdByFilterIds:n.createdBy,setCreatedByFilter:function(e){o({createdBy:e})},runNewSearch:a,includeGuests:!1}),(0,se.jsx)(Yi().Z,{lastEditedTime:n.lastEditedTime,createdTime:n.createdTime,setLastEditedTime:function(e){o({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){o({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}})]})]})}function oc(e){var t;let{spaceStore:s,teamStores:n,contentEngagement:o}=e;const d=(0,wd().ZC)(s.id),c=(0,i.useRef)(!1),{loadNextPage:u,navigableBlockStores:g,analyticsByPageId:p,runNewSearch:m,setFilters:h,setTimeRange:S,timeRange:x,filters:v,sort:y,setSort:b,loading:j,error:A}=function(e){let{spaceStore:t}=e;const s=(0,a().v3)(),[n,o]=(0,i.useState)(ic),r=(0,i.useRef)(ec),l=(0,i.useRef)(tc),d=(0,i.useRef)(sc),c=(0,i.useCallback)((async e=>{let{fetchFromFirstPage:i,ignoreSearchInputComparison:a}=e;const c=!f().n4(n.filters,r.current)||!f().n4(n.sort,l.current)||!f().n4(n.timeRange,d.current);if(!a&&!c)return;r.current=n.filters,l.current=n.sort,d.current=n.timeRange;let u=n.loading,g=n.error,p=n.hasNextPage,m=n.paginationToken;if(i&&(o((e=>({...ic,filters:e.filters,timeRange:e.timeRange,sort:e.sort}))),u=ic.loading,g=ic.error,p=ic.hasNextPage,m=ic.paginationToken),!p||u)return;if(g)return;o((e=>({...e,loading:!0})));const h=await U().callApi({eventName:"loadContentAnalytics",environment:s,data:{spaceId:t.id,sort:n.sort,titleQuery:n.filters.query,filters:{inTeams:n.filters.teamIds,lastEditedTime:(0,te().ES)(n.filters.lastEditedTime),createdTime:(0,te().ES)(n.filters.createdTime),createdBy:n.filters.createdBy},timeRange:n.timeRange,startCursor:m}});if("failed"===h.type)return void o((e=>({...e,loading:!1,error:h.error})));const S=h.data.results;o((e=>{const t=[],s=new Set(e.navigableBlockIds),i=new Map(e.analyticsByPageId);for(const a of S){const e=a.id,n=a.analytics;s.has(e)||(t.push(e),i.set(e,n))}const n=[...e.navigableBlockIds,...t];return{...e,navigableBlockIds:n,analyticsByPageId:i,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:h.data.nextCursor,hasNextPage:Boolean(h.data.nextCursor)}}))}),[s,t,n.filters,n.sort,n.timeRange,n.loading,n.error,n.hasNextPage,n.paginationToken]),u=(0,i.useMemo)((()=>n.navigableBlockIds.map((e=>new(ee().Bv)(s,{id:e,table:Zd().ev})))),[n.navigableBlockIds,s]);(0,i.useEffect)((()=>{n.shouldReRunSearch&&(o((e=>({...e,shouldReRunSearch:!1}))),c({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[n.shouldReRunSearch,c]);const g=(0,i.useCallback)((async()=>{n.shouldReRunSearch||await c({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[n.shouldReRunSearch,c]),p=(0,i.useCallback)((async e=>{await c({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[c]),m=(0,i.useCallback)(((e,t)=>{o((s=>({...s,filters:{...s.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})));for(const i of(0,vs().uv)(e))f().n4(e[i],ec[i])||Ad().Tm(s,{filter:i,value:"createdBy"===i||"teamIds"===i?e[i]:void 0})}),[s]),h=(0,i.useCallback)((e=>{o((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),Ad().$s(s,{daysFilter:e})}),[s]),S=(0,i.useCallback)((e=>{o((t=>({...t,sort:e,shouldReRunSearch:!0}))),Ad().PH(s,{column:e.field,isAscending:"asc"===e.direction})}),[s]);return{filters:n.filters,sort:n.sort,timeRange:n.timeRange,analyticsByPageId:n.analyticsByPageId,loading:n.loading,error:n.error,navigableBlockStores:u,loadNextPage:g,runNewSearch:p,setFilters:m,setTimeRange:h,setSort:S}}({spaceStore:s}),C=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:16}})),[]),w=(0,r().K8)((()=>{const e=Se().default.checkGate({gateName:"allow_space_member_to_export_analytics"});return Boolean(s.canAdmin())||e&&s.canRead()}),[s]),M=(0,i.useMemo)((()=>void 0!==d&&s.id!==d),[s.id,d]);(0,i.useEffect)((()=>{c.current&&!M||(m(!0),c.current=!0)}),[m,M]);const T=(0,r().K8)((()=>s.getName()),[s]);if("NotFoundError"===(null==o||null===(t=o.error)||void 0===t?void 0:t.name))return(0,se.jsx)(kd().H,{type:"empty",spaceName:T});const k={...v,daysFilter:x,lastEditedTime:(0,te().ES)(v.lastEditedTime),createdTime:(0,te().ES)(v.createdTime)};return(0,se.jsxs)("div",{style:C.container,children:[(0,se.jsx)(Ld,{data:o.data,loading:o.loading,error:o.error,daysFilter:o.daysFilter,setDaysFilter:o.setDaysFilter}),(0,se.jsx)(rc,{canExport:w,filters:k}),(0,se.jsx)(ac,{spaceStore:s,teamStores:n,runNewSearch:m,setFilters:h,filters:v,timeRange:x,setTimeRange:S}),(0,se.jsx)(Jd,{navigableBlockStores:g,analyticsByPageId:p,runNewSearch:m,sort:y,setSort:b,loadNextPage:u,loading:j,error:A})]})}function rc(e){const t=(0,l().IS)((()=>({sectionTitle:{fontWeight:h().Wy.semibold,fontSize:16},sectionTitleSection:{display:"flex",flexFlow:"row",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:12},exportButton:{marginLeft:5}})),[]),{canExport:s,filters:i}=e,{daysFilter:n}=i,a=(0,se.jsxs)("div",{style:t.sectionTitleSection,children:[(0,se.jsx)(me().A,{style:t.sectionTitle,children:(0,se.jsx)(m().sA,{id:"settings.workspaceAnalytics.contentTab.allPages.title",defaultMessage:"Pages"})}),(0,se.jsx)(pe().A,{placement:he().W.Bottom,render:e=>(0,se.jsx)(Is().A,{...e,href:(0,qe().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:t.helpInfo}),renderTooltip:()=>"all_time"!==n?(0,se.jsx)(m().sA,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.lastDays",defaultMessage:"Activity from the {dateRange} on pages you have access to",values:{dateRange:L().A.formatMessage(Md().Yr[n])}}):(0,se.jsx)(m().sA,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.allTime",defaultMessage:"All time activity on pages you have access to in the workspace"})})]});return(0,se.jsxs)("div",{style:t.wrapper,children:[a,s&&(0,se.jsx)(Td().L,{style:t.exportButton,analyticsType:nt().e.Content,filters:i})]})}var lc=()=>s(957963),dc=()=>s(385527),cc=()=>s(374255);const uc=640;function gc(e){let{data:t,loading:s,error:n,daysFilter:o,setDaysFilter:d}=e;const c=(0,a().v3)(),{organizationOwnerRecordCache:u}=(0,i.useContext)(Wo().N),g=(0,l().IS)((e=>({title:{fontWeight:h().Wy.medium,fontSize:16,marginBlock:"9px 4px",display:"flex",alignItems:"center",overflow:"hidden"},titleText:{...h().RC,flexShrink:1},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},overviewCard:{width:"fit-content"}})),[]),[p,f]=(0,Pd().z)(),{pageViews:S,uniquePageViews:x,pageEdits:v,topPages:y}=t,b=(0,r().K8)((()=>y.map((e=>{let{pageId:t,pageViews:s}=e;return{store:new(ee().Bv)(c,{id:t,table:Zd().ev},{inMemoryRecordCache:u}),caption:(0,se.jsx)(m().sA,{id:"workspaceAnalytics.overview.contentEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,se.jsx)(_d()._,{abbreviateNumber:!1,num:s})}})}}))),[c,y,u]),j=(0,i.useCallback)((e=>{d(e),Ad().n_(c,{filter:"content_engagement",daysFilter:e})}),[c,d]);return(0,se.jsxs)("div",{style:g.container,ref:p,children:[(0,se.jsxs)("div",{style:g.titleContainer,children:[(0,se.jsxs)(me().A,{style:g.title,children:[(0,se.jsx)("div",{style:g.titleText,children:(0,se.jsx)(m().sA,{id:"workspaceAnalytics.overview.contentEngagement.title",defaultMessage:"Content engagement"})}),(0,se.jsx)(pe().A,{placement:he().W.Bottom,render:e=>(0,se.jsx)(Is().A,{...e,href:(0,qe().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:g.helpInfo}),renderTooltip:()=>"all_time"!==o?(0,se.jsx)(m().sA,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all pages in the workspace over the {dateRange}",values:{dateRange:L().A.formatMessage(Md().Yr[o])}}):(0,se.jsx)(m().sA,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace"})})]}),(0,se.jsx)(Ud().Z,{currentFilter:o,onChangeFilter:j})]}),(0,se.jsxs)(Rd().xA,{gap:16,children:[(0,se.jsx)(Rd().LX,{row:1,col:1,colEnd:3,children:(0,se.jsx)(Bd().a,{loading:s,error:n,icon:Id().d,textStyles:g.overviewCard,title:(0,se.jsx)(m().sA,{id:"workspaceAnalytics.overview.contentEngagement.views",defaultMessage:"{pageViews} total views",values:{pageViews:(0,se.jsx)(_d()._,{abbreviateNumber:f<uc,num:S})}})})}),(0,se.jsx)(Rd().LX,{row:2,col:1,colEnd:3,children:(0,se.jsx)(Bd().a,{loading:s,error:n,icon:dc().h,textStyles:g.overviewCard,iconStyles:{height:18,width:18},title:(0,se.jsx)(m().sA,{id:"workspaceAnalytics.overview.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,se.jsx)(_d()._,{abbreviateNumber:f<uc,num:x})}})})}),(0,se.jsx)(Rd().LX,{row:3,col:1,colEnd:3,children:(0,se.jsx)(Bd().a,{loading:s,error:n,icon:lc().j,textStyles:g.overviewCard,iconStyles:{height:18,width:18},title:(0,se.jsx)(m().sA,{id:"workspaceAnalytics.overview.contentEngagement.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,se.jsx)(_d()._,{abbreviateNumber:f<uc,num:v})}})})}),(0,se.jsx)(Rd().LX,{row:1,rowEnd:4,col:3,colEnd:5,children:(0,se.jsx)(cc().N,{loading:s,error:n,title:(0,se.jsx)(m().sA,{id:"workspaceAnalytics.overview.contentEngagement.popularPages",defaultMessage:"Most popular pages"}),items:b})})]})]})}var pc=()=>s(188668);function mc(e){var t,s;let{onUserTabFilterChange:i,spaceStore:n,contentEngagement:a,userEngagement:o}=e;const d=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:24}})),[]),c=(0,r().K8)((()=>n.getName()),[n]);if("NotFoundError"===(null===(t=a.error)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(s=o.error)||void 0===s?void 0:s.name))return(0,se.jsx)(kd().H,{type:"empty",spaceName:c});return(0,se.jsxs)("div",{style:d.container,children:[(0,se.jsx)(pc().R,{data:o.data,loading:o.loading,error:o.error,daysFilter:o.daysFilter,setDaysFilter:function(e){i({graphFilter:"all_time"===e?"last_90_days":e}),o.setDaysFilter(e)}}),(0,se.jsx)(gc,{data:a.data,loading:a.loading,error:a.error,daysFilter:a.daysFilter,setDaysFilter:a.setDaysFilter})]})}var fc=()=>s(63964),hc=()=>s(254685);const Sc={[nt().e.Overview]:(0,se.jsx)(m().sA,{id:"workspaceAnalyticsTabs.overview.title",defaultMessage:"Overview"}),[nt().e.Users]:(0,se.jsx)(m().sA,{id:"workspaceAnalyticsTabs.members.title",defaultMessage:"Members"}),[nt().e.Content]:(0,se.jsx)(m().sA,{id:"workspaceAnalyticsTabs.content.title",defaultMessage:"Content"}),[nt().e.Search]:(0,se.jsx)(m().sA,{id:"workspaceAnalyticsTabs.search.title",defaultMessage:"Search"})};function xc(e){const{currentTab:t,spaceAnalyticsStoreState:s,onUserTabFilterChange:i,spaceStore:n}=e;switch(t){case nt().e.Content:return(0,se.jsx)(oc,{spaceStore:n,contentEngagement:e.contentEngagementData});case nt().e.Users:return(0,se.jsx)(hc().A,{spaceStore:n,usersTabData:s.usersTabData,onUserTabFilterChange:i,userEngagement:e.userEngagementData});case nt().e.Overview:return(0,se.jsx)(mc,{contentEngagement:e.contentEngagementData,userEngagement:e.userEngagementData,spaceStore:n,onUserTabFilterChange:i});case nt().e.Search:return(0,se.jsx)(fc().A,{spaceStore:n});default:(0,vs().HB)(t)}}const vc=function(e){let{spaceStore:t}=e;const n=(0,l().IS)((e=>({headingStyle:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:h().Wy.medium,display:"flex",justifyContent:"space-between"},title:{display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},tabsStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14}})),[]),o=(0,a().v3)(),d=(0,r().K8)((()=>{var e;return null===(e=Je().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),c=(0,s(23534).M)({spaceId:t.id}),u=(0,s(807106)._)({spaceStore:t,userId:d}),[g,p]=(0,r().$y)(nt().A),f=(0,r().K8)((()=>Boolean(null==t?void 0:t.getSettings().disable_page_analytics)),[t]),S=(0,r().K8)((()=>null==t?void 0:t.getName()),[t]),x=(0,i.useCallback)((async e=>{await Cd().OJ({environment:o,spaceStore:t,currentTab:g.currentTab,currentSpaceId:g.currentSpaceId,usersTabData:g.usersTabData,setState:p,graphFilter:e.graphFilter,tableFilter:e.tableFilter})}),[o,t,g,p]),v=(0,i.useCallback)((e=>{Ad().Wt(o,{tab:e}),p({...g,currentTab:e})}),[p,g,o]),y=(0,r().K8)((()=>{const e=[];return function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(nt().e.Overview),function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(nt().e.Users),e.push(nt().e.Content),function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(nt().e.Search),e}),[t]),b=(0,r().K8)((()=>y.length>1),[y]),j=g.currentTab||y[0];(0,i.useEffect)((()=>{!async function(){const e=t.id;e&&nt().A.shouldRefreshState(e)&&(j===nt().e.Users?await x({graphFilter:"last_90_days",tableFilter:"last_90_days"}):j===nt().e.Content||j===nt().e.Overview||j===nt().e.Search||(0,vs().HB)(j))}()}));const C=(0,i.useCallback)((()=>{A().f({environment:o,url:(0,qe().xS)("guides.workspaceAnalytics")})}),[o]),w=y.map((e=>Sc[e])),M=f?(0,se.jsx)(kd().H,{type:"disabled",spaceName:S}):(0,se.jsxs)(se.Fragment,{children:[b&&(0,se.jsx)(ui().Ay,{tabs:w,selectedIndex:y.indexOf(j),onChange:e=>{v(y[e])},style:n.tabsStyle}),xc({currentTab:j,spaceAnalyticsStoreState:g,onUserTabFilterChange:x,spaceStore:t,contentEngagementData:c,userEngagementData:u})]});return(0,se.jsxs)(Dt().Ay,{children:[(0,se.jsxs)(re().A,{large:!0,style:n.headingStyle,children:[(0,se.jsxs)("div",{style:n.title,children:[(0,se.jsx)(m().sA,{id:"settings.workspaceAnalytics.title",defaultMessage:"Workspace analytics"}),(0,se.jsx)(pe().A,{placement:he().W.Right,render:e=>(0,se.jsx)(Is().A,{...e,href:(0,qe().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:n.helpInfo}),renderTooltip:()=>(0,se.jsx)(m().sA,{id:"settings.workspaceAnalytics.dataDisclaimerTooltip",defaultMessage:"Data available from the start date of your Enterprise Plan"})})]}),(0,se.jsx)(vt().A,{size:"sm",onClick:C,icon:Ra().$,children:(0,se.jsx)(m().sA,{id:"workspaceAnalytics.title.helpButton",defaultMessage:"Learn more"})})]}),(0,Dt().J_)(),M]})};var yc=()=>s(160867),bc=()=>s(892632),jc=()=>s(876853),Ac=()=>s(959098),Cc=()=>s(464708);function wc(e,t){as().vd(e,"change_email",t)}var Mc=()=>s(965378);let Tc=function(e){return e.Password="Password",e.CurrentEmail="TemporaryPasscode",e}({});class kc extends z().default{getInitialState(){return{open:!1,authorized:!1,authorizationType:void 0}}}const Ic=kc;var Dc=()=>s(688149);const Pc={modal:{width:460,padding:32,borderRadius:4,fontSize:14},loadingSpinner:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},paragraph:{marginTop:12,marginBottom:14},error:{color:Rn().Ay.red,fontSize:12,marginTop:4,marginLeft:8},bold:{fontWeight:h().Wy.bold},input:{padding:"4px 8px"},button:{marginTop:14,width:"100%"},educationPlanWarning:{display:"flex",marginTop:14,paddingTop:14},claimedEmailDomainWarning:{marginTop:14,marginBottom:14}},Rc=(0,m().YK)({dialogLabel:{id:"profileSettings.accountSecuritySection.emailSetting.dialogLabel",defaultMessage:"Change email"}});const _c=function(e){let{userValue:t,hasEducationPlan:s,areProfileEditsDisabled:n}=e;const o=(0,a().v3)(),l=(0,m().tz)(),d=(0,r().uB)(void 0,Ic),c=(0,i.useCallback)((()=>(0,se.jsx)(Zc,{userValue:t,hasEducationPlan:s,emailChangeStore:d})),[t,s,d]),u=(0,i.useCallback)((()=>zc(o,s,d)),[o,s,d]),g=(0,r().K8)((()=>d.state.open),[d]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Fs().A,{type:"custom",isMobile:!1,title:(0,se.jsx)(m().sA,{id:"profileSettings.accountSecuritySection.emailSetting.label",defaultMessage:"Email"}),caption:t&&t.email,customButton:(0,se.jsx)(Nc,{userValue:t,areProfileEditsDisabled:n,emailChangeStore:d})}),(0,se.jsx)(ai().A,{ariaLabel:l.formatMessage(Rc.dialogLabel),open:g,onDismiss:u,render:c})]})};function Bc(e){let{userValue:t}=e;return t?(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.currentEmail",defaultMessage:"Your current email is {currentEmail}.",values:{currentEmail:(0,se.jsx)("span",{style:Pc.bold,children:t&&t.email})}}):null}function Uc(e){let{state:t}=e;return(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,style:Pc.claimedEmailDomainWarning,children:(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.claimedEmailDomainWarning",defaultMessage:"The email domain {newEmailDomain} has been claimed by an organization. If you continue with changing this email address, any workspaces created by this account can be managed by the organization. See <domainclaimlink>this page</domainclaimlink> for more info.",values:{newEmailDomain:(0,kl().zN)(t.newEmail)??t.newEmail,domainclaimlink:e=>(0,se.jsx)(di().A,{href:(0,qe().xS)("guides.domainManagement"),external:!0,children:e})}})})}function Ec(e){return{modal:{background:e.contentBackground},educationPlanWarning:{color:e.lightTextColor,borderTop:`1px solid ${e.regularDividerColor}`}}}function Lc(e){let{hasEducationPlan:t}=e;const s=(0,l().DP)(),i=(0,a().v3)();return t?(0,se.jsxs)("div",{style:{...Pc.educationPlanWarning,...Ec(s).educationPlanWarning},children:[(0,Ra().$)({width:14,marginTop:4,marginRight:6,fill:s.lightIconColor})," ",(0,se.jsx)("div",{children:(0,se.jsx)(m().sA,{defaultMessage:"Changing your email may downgrade your workspace on a Free Education Plan to the basic Free Plan. You won't lose any data, but you'll need to upgrade to re-access paid features. Have questions about this? <sendmessagelink>Message support</sendmessagelink>.",id:"emailChangeSettings.downgradeEducationPlan.warning.message",values:{sendmessagelink:e=>(0,se.jsx)(di().A,{onClick:()=>function(e){Sr().SI({environment:e,from:"change_email_student"})}(i),children:e})}})})]}):null}function Oc(e,t,s){if(e)return e.email;s.setState({open:s.state.open,authorized:!1,authorizationType:void 0,error:t.formatMessage({id:"profileSettings.changeEmailModal.errorNoUserValue",defaultMessage:"User value is undefined."})})}async function Wc(e,t,s){if(!s.state.authorized)return;const i=(0,kl().zN)(s.state.newEmail);s.setState({...s.state,loading:!0});const[n,a]=await Promise.all([await U().callApi({eventName:"sendEmailVerification",environment:e,data:{email:s.state.newEmail}}),i?await U().callApi({eventName:"getVerifiedEmailDomain",environment:e,data:{emailDomain:i}}):void 0]);if("success"===n.type){const e=(0,vs().O9)(a)&&"failed"===a.type?(0,E().Hu)(t,a):void 0;s.setState({...s.state,newEmailPasscodeSent:!0,newEmailPasscode:"",error:e,loading:!1,newEmailContainsVerifiedDomain:(0,vs().O9)(a)&&"success"===a.type&&void 0!==a.data.id})}else s.setState({...s.state,loading:!1,error:(0,E().Hu)(t,n)})}async function zc(e,t,s){s.reset(),t&&await ut().Ow(e)}async function qc(e,t,s,i){if(!i.state.authorized)if(i.state.authorizationType===Tc.Password){if(!Oc(t,s,i))return;i.setState({...i.state,loading:!0});const n=await U().callApi({eventName:"authVerifyPassword",environment:e,data:{password:i.state.password}});if("failed"===n.type)return void i.setState({...i.state,loading:!1,error:(0,E().Hu)(s,n)});i.setState({...i.state,authorized:!0,newEmail:"",newEmailPasscode:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0,loading:!1})}else i.state.authorizationType===Tc.CurrentEmail&&i.setState({...i.state,authorized:!0,newEmail:"",newEmailPasscode:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0,loading:!1})}async function Fc(e,t,s,i){if(!i.state.authorized)return;const n=i.state.authorizationType===Tc.Password?{type:"Password",password:i.state.password,newEmail:i.state.newEmail,newEmailPasscode:i.state.newEmailPasscode}:{type:"CurrentEmail",currentEmailPasscode:i.state.currentEmailPasscode,newEmail:i.state.newEmail,newEmailPasscode:i.state.newEmailPasscode};i.setState({...i.state,loading:!0});const a=await U().callApi({eventName:"changeEmail",environment:e,data:n});if("success"===a.type)wc(e,{new_email:i.state.newEmail,error:void 0}),i.setState({...i.state,loading:!1}),await zc(e,t,i);else{const t=(0,E().Hu)(s,a);wc(e,{new_email:i.state.newEmail,error:t}),i.setState({...i.state,loading:!1,error:t})}}function Nc(e){let{userValue:t,areProfileEditsDisabled:s,emailChangeStore:n}=e;const a=(0,i.useCallback)((()=>function(e){e.setState({open:!0,authorized:!1,authorizationType:void 0})}(n)),[n]),o=(0,se.jsx)(vt().A,{size:"lg",onClick:s?()=>{}:a,disabled:s,disabledFeedback:s,children:(0,se.jsx)(m().sA,{id:"profileSettings.accountSecuritySection.emailSetting.changeEmailButton.label",defaultMessage:"Change email"})});return s?(0,se.jsx)(pe().A,{renderTooltip:()=>(0,se.jsx)(m().sA,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:t?(0,kl().zN)(t.email):""}}),placement:he().W.Bottom,alignment:he().C.Center,render:e=>(0,se.jsx)("div",{...e,children:o})}):o}function Kc(e){let{state:t,userValue:s,emailChangeStore:n}=e;const o=(0,a().v3)(),r=(0,m().tz)(),l=(0,i.useCallback)((()=>qc(o,s,r,n)),[o,s,r,n]),d=(0,i.useCallback)((()=>function(e){e.setState({open:!0,authorized:!1,authorizationType:Tc.Password,password:""})}(n)),[n]),c=(0,i.useCallback)((e=>function(e,t){t.setState({open:!0,authorized:!1,authorizationType:Tc.Password,password:e.currentTarget.value,error:void 0})}(e,n)),[n]);return s?(0,se.jsxs)(i.Fragment,{children:[(0,se.jsx)("p",{style:{margin:0},children:(0,se.jsx)(Bc,{userValue:s})}),(0,se.jsx)("p",{style:Pc.paragraph,children:(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.enterPasswordInstructions",defaultMessage:"Please enter your password."})}),(0,se.jsx)(Ls().A,{style:{display:"none"},type:"text",value:s.email,autoComplete:"username",disabled:!0}),(0,se.jsx)(Ls().A,{type:"password",disabled:t.authorized,value:t.password,onChange:c,showClearButton:!0,onClearButtonClick:d,onSubmit:l,placeholder:r.formatMessage({id:"profileSettings.changeEmailModal.passwordInput.label",defaultMessage:"Password"}),style:Pc.input,focusInitial:!0,autoComplete:"current-password"}),!t.authorized&&t.error&&(0,se.jsx)("div",{style:Pc.error,children:t.error}),!t.authorized&&(0,se.jsx)(ks().A,{size:"lg",style:Pc.button,onClick:l,disabled:t.loading,children:t.loading?(0,se.jsx)(ii().A,{}):(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.continueButton.label",defaultMessage:"Continue"})})]}):null}function Gc(e){let{userValue:t,emailChangeStore:s}=e;const n=(0,a().v3)(),o=(0,m().tz)(),l=(0,i.useCallback)((()=>async function(e,t,s,i){if(!t)return;i.setState({...i.state,loading:!0});const n=await U().callApi({eventName:"sendEmailVerification",environment:e,data:{email:t.email}});"success"===n.type?i.setState({...i.state,currentEmailPasscodeSent:!0,currentEmailPasscode:"",error:void 0,loading:!1}):i.setState({...i.state,currentEmailPasscodeSent:!0,loading:!1,error:(0,E().Hu)(s,n)})}(n,t,o,s)),[n,t,o,s]),d=(0,r().K8)((()=>s.state.loading),[s]);return(0,se.jsx)(ks().A,{size:"lg",onClick:l,disabled:d,children:d?(0,se.jsx)(ii().A,{}):(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.sendCurrentEmailVerificationCode.label",defaultMessage:"Send verification code"})})}function Vc(e){let{state:t,userValue:s,emailChangeStore:n}=e;const o=(0,a().v3)(),r=(0,m().tz)(),l=(0,i.useCallback)((()=>qc(o,s,r,n)),[o,s,r,n]),d=(0,i.useCallback)((e=>function(e,t){t.setState({...t.state,currentEmailPasscode:e.currentTarget.value,error:void 0})}(e,n)),[n]);return(0,se.jsxs)(i.Fragment,{children:[(0,se.jsx)(Ls().A,{value:t.currentEmailPasscode,onChange:d,onSubmit:l,placeholder:r.formatMessage({id:"profileSettings.changeEmailModal.enterCurrentEmailVerificationCodeInput.placeholder",defaultMessage:"Enter verification code"}),focusInitial:!0,style:Pc.input}),!t.authorized&&(0,se.jsx)(ks().A,{size:"lg",style:Pc.button,onClick:l,disabled:t.loading,children:t.loading?(0,se.jsx)(ii().A,{}):(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.continueButton.label",defaultMessage:"Continue"})})]})}function Hc(e){let{emailChangeStore:t}=e;const s=(0,a().v3)(),n=(0,m().tz)(),o=(0,i.useCallback)((()=>function(e){e.setState({...e.state,newEmail:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0})}(t)),[t]),l=(0,i.useCallback)((()=>Wc(s,n,t)),[s,n,t]),d=(0,i.useCallback)((e=>function(e,t){t.setState({...t.state,newEmail:e.currentTarget.value,error:void 0})}(e,t)),[t]),c=(0,r().O$)(t);return c.authorized?(0,se.jsx)(Ls().A,{value:c.newEmail,onChange:d,onSubmit:l,showClearButton:!0,onClearButtonClick:o,placeholder:n.formatMessage({id:"profileSettings.changeEmailModal.newEmailInput.placeholder",defaultMessage:"Enter new email"}),style:Pc.input,focusInitial:!0}):null}function $c(e){let{state:t,emailChangeStore:s}=e;const n=(0,a().v3)(),o=(0,m().tz)(),r=(0,i.useCallback)((()=>Wc(n,o,s)),[n,o,s]);return(0,se.jsxs)(i.Fragment,{children:[t.error&&(0,se.jsx)("div",{style:Pc.error,children:t.error}),(0,se.jsx)(ks().A,{size:"lg",style:Pc.button,onClick:r,disabled:t.loading,children:t.loading?(0,se.jsx)(ii().A,{}):(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.sendVerificationCodeButton.label",defaultMessage:"Send verification code"})})]})}function Yc(e){let{state:t,userValue:s,emailChangeStore:n}=e;return(0,se.jsxs)(i.Fragment,{children:[(0,se.jsxs)("p",{style:{...Pc.paragraph,marginTop:0},children:[(0,se.jsx)(Bc,{userValue:s})," ",t.currentEmailPasscodeSent?(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.sentVerificationCodeToCurrentEmail",defaultMessage:"We've sent a temporary verification code to this email."}):(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.sendVerificationCodeToCurrentEmail",defaultMessage:"We'll send a temporary verification code to this email."})]}),t.currentEmailPasscodeSent?(0,se.jsx)(Vc,{userValue:s,emailChangeStore:n,state:t}):(0,se.jsx)(Gc,{userValue:s,emailChangeStore:n})]})}function Qc(e,t,s,i,n){if(!n.state.authorized)return()=>{};if(n.state.newEmailContainsVerifiedDomain&&(0,kl().zN)(n.state.newEmail)!==(0,kl().zN)((null==t?void 0:t.email)||"")){const t=n.state.newEmail;return async()=>{const a=await function(e){return b().Gh({mode:"wide",message:(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.confirmationModal.title",defaultMessage:"Change your email?"}),description:(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.confirmationModal.description",defaultMessage:"If you continue changing this email address to this domain, any workspaces created by this account can be managed by the organization.",values:{verifiedDomain:(0,kl().zN)(e)}}),acceptLabel:(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.confirmationModal.acceptButton.label",defaultMessage:"Change email"}),cancelLabel:(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.confirmationModal.cancelButton.label",defaultMessage:"Go back"})}).then((e=>e.accept))}(t);a&&await Fc(e,s,i,n)}}return()=>Fc(e,s,i,n)}function Jc(e){let{state:t,userValue:s,hasEducationPlan:n,store:o}=e;const l=(0,a().v3)(),d=(0,m().tz)(),c=(0,i.useCallback)((e=>function(e,t){t.setState({...t.state,newEmailPasscode:e.currentTarget.value,error:void 0})}(e,o)),[o]),u=(0,r().K8)((()=>Qc(l,s,n,d,o)),[l,s,n,d,o]);return(0,se.jsxs)(i.Fragment,{children:[(0,se.jsx)("p",{style:Pc.paragraph,children:(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.verificationCodeSentMessage",defaultMessage:"We just sent you a temporary verification code to {newEmail}.",values:{newEmail:(0,se.jsx)("span",{style:Pc.bold,children:t.newEmail})}})}),(0,se.jsx)(Ls().A,{value:t.newEmailPasscode,onChange:c,onSubmit:u,placeholder:d.formatMessage({id:"profileSettings.changeEmailModal.enterVerificationCodeInput.placeholder",defaultMessage:"Enter verification code"}),focusInitial:!0,style:Pc.input}),t.error&&(0,se.jsx)("div",{style:Pc.error,children:t.error}),(0,se.jsx)(ks().A,{size:"lg",style:Pc.button,onClick:u,disabled:t.loading,children:t.loading?(0,se.jsx)(ii().A,{}):(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.changeEmailButton.label",defaultMessage:"Change email"})})]})}function Xc(e){let{state:t,userValue:s,hasEducationPlan:n,emailChangeStore:a}=e;const o=(0,r().O$)(a);if(!o.authorized)return null;const{newEmail:l,newEmailContainsVerifiedDomain:d,newEmailPasscodeSent:c}=o;return(0,se.jsxs)(i.Fragment,{children:[(0,se.jsx)("p",{style:Pc.paragraph,children:(0,se.jsx)(m().sA,{id:"profileSettings.changeEmailModal.newEmailInstructions",defaultMessage:"Please enter a new email and we will send you a verification code."})}),(0,se.jsx)("div",{children:(0,se.jsx)(Hc,{emailChangeStore:a})}),d&&(0,kl().zN)(l)!==(0,kl().zN)((null==s?void 0:s.email)||"")&&(0,se.jsx)(Uc,{state:t}),c?(0,se.jsx)(Jc,{userValue:s,hasEducationPlan:n,store:a,state:t}):(0,se.jsx)($c,{emailChangeStore:a,state:t}),(0,se.jsx)(Lc,{hasEducationPlan:n})]})}function Zc(e){let{userValue:t,hasEducationPlan:s,emailChangeStore:n}=e;const o=(0,m().tz)(),d=(0,l().DP)(),c=(0,a().v3)(),u=(0,i.useCallback)((()=>async function(e,t,s,i){const n=Oc(s,t,i);if(!n)return;const a=await Mc().V({environment:e,userEmail:n});a.error?i.setState({open:i.state.open,authorized:!1,authorizationType:void 0,error:t.formatMessage({id:"profileSettings.changeEmailModal.errorFetchingAccountData",defaultMessage:"Could not fetch account information for {currentEmail}."},{currentEmail:n})}):a.value.isSamlEnforced||!a.value.hasPassword?i.setState({open:!0,authorized:!1,authorizationType:Tc.CurrentEmail,currentEmailPasscodeSent:!1,currentEmailPasscode:""}):i.setState({open:!0,authorized:!1,authorizationType:Tc.Password,password:""})}(c,o,t,n)),[c,o,t,n]),g=(0,r().O$)(n);return(0,se.jsx)("div",{style:{...Pc.modal,...Ec(d).modal},children:(0,se.jsx)(Dc().A,{fetch:u,loading:e=>e?(0,se.jsx)("div",{style:Pc.loadingSpinner,children:(0,se.jsx)(ii().A,{})}):null,render:()=>(0,se.jsxs)(i.Fragment,{children:[g.authorizationType===Tc.Password?(0,se.jsx)(Kc,{userValue:t,emailChangeStore:n,state:g}):g.authorizationType===Tc.CurrentEmail?(0,se.jsx)(Yc,{userValue:t,emailChangeStore:n,state:g}):void 0,g.authorized&&(0,se.jsx)(Xc,{userValue:t,hasEducationPlan:s,emailChangeStore:n,state:g})]})})})}var eu=()=>s(158359),tu=()=>s(126158),su=()=>s(498474);const iu=(0,gt().wt)("cellPhone",{viewBox:"0 0 12 18",svg:(0,se.jsx)("path",{d:"M2.938 17.398c-.672 0-1.217-.197-1.633-.593-.412-.39-.617-.912-.617-1.563V2.461c0-.646.205-1.167.617-1.563.416-.395.96-.593 1.633-.593h6.148c.667 0 1.2.198 1.601.593.407.396.61.917.61 1.563v12.781c0 .646-.203 1.167-.61 1.563-.4.396-.934.593-1.601.593H2.937zm.265-1.578h5.594c.307 0 .544-.08.71-.242.173-.161.259-.39.259-.687V2.812c0-.291-.086-.518-.258-.68-.167-.166-.404-.25-.711-.25H3.203c-.312 0-.555.082-.726.243-.167.161-.25.39-.25.688V14.89c0 .296.083.526.25.687.171.162.414.242.726.242zm1.11-.61a.398.398 0 01-.282-.108.368.368 0 01-.117-.282c0-.12.04-.216.117-.289a.398.398 0 01.282-.11h3.375a.38.38 0 01.28.11c.074.073.11.17.11.29a.38.38 0 01-.11.28.38.38 0 01-.28.11H4.313zm.703-11.546a.583.583 0 01-.43-.172.583.583 0 01-.172-.43.57.57 0 01.172-.421.57.57 0 01.43-.18h1.96a.56.56 0 01.422.18c.12.114.18.255.18.421a.583.583 0 01-.172.43.583.583 0 01-.43.172h-1.96z"})});(0,gt().wt)("exitDoor",{viewBox:"0 0 20 20",svg:(0,se.jsx)("path",{d:"M4.121 17.468q-1.1 0-1.661-.568-.56-.567-.56-1.674V4.91q0-1.101.56-1.668.56-.574 1.661-.574h7.28q1.101 0 1.662.574.56.567.56 1.668v3.2h-1.34V4.998q0-.479-.246-.731-.246-.26-.745-.26H4.237q-.498 0-.745.26-.246.252-.246.731v10.145q0 .472.246.724.247.253.745.253h7.055q.5 0 .745-.253.246-.252.246-.724V12.02h1.34v3.206q0 1.107-.56 1.674-.561.568-1.662.568zm4.41-6.775a.6.6 0 0 1-.438-.184.6.6 0 0 1-.185-.444q0-.26.185-.445a.59.59 0 0 1 .437-.191h6.884l1.019.054-.506-.423-1.012-.964a.54.54 0 0 1-.191-.431q0-.233.15-.396a.51.51 0 0 1 .396-.165.55.55 0 0 1 .404.185l2.215 2.297a.7.7 0 0 1 .164.24.62.62 0 0 1 0 .478.8.8 0 0 1-.164.239l-2.215 2.297a.56.56 0 0 1-.403.178.51.51 0 0 1-.397-.165.6.6 0 0 1-.15-.403q0-.253.191-.424l1.012-.957.506-.424-1.019.048H8.53Z"})});var nu=()=>s(823274),au=()=>s(28755),ou=()=>s(782398);class ru extends z().default{getInitialState(){return{open:!1,singleDeviceLogout:!1,deviceName:void 0}}}const lu=new ru;const du=new(s(848776).U)((e=>{let{userId:t,paginationInfo:s}=e;return`getUserDevices/${t}/limit=${null==s?void 0:s.limit}`}),(async(e,t)=>{let{paginationInfo:i}=t;const n=await Promise.resolve().then(s.bind(s,449506)),a=await n.callApi({eventName:"getUserDevices",environment:e,data:{paginationInfo:i}});if("success"===a.type)return a.data}));ol().exposeDebugValue("DevicesStore",du);const cu=du;class uu extends z().default{getInitialState(){return{deviceListLoadingState:"init",nextCursor:void 0,currentDevice:void 0,allDevices:[],viewDevices:[],sortColumn:void 0,sortAscending:!1}}async fetchDevices(e,t){this.setState({...this.state,deviceListLoadingState:"loading",sortColumn:void 0});const s=await cu.awaitData(e,t);var i,n;s&&s.devices&&s.currentDevice&&(this.setDevices(s.devices),this.setCurrentDevice(s.currentDevice),this.setNextCursor(null===(i=s.devices[s.devices.length-1])||void 0===i?void 0:i.id));s&&s.devices&&!s.currentDevice&&(this.setDevices(s.devices),this.setNextCursor(null===(n=s.devices[s.devices.length-1])||void 0===n?void 0:n.id));void 0!==s?this.setViewDevices():this.setState({...this.state,deviceListLoadingState:"error"})}setCurrentDevice(e){this.setState({...this.state,currentDevice:e})}setViewDevices(){var e;let t=this.state.allDevices.slice(0,3);const s=t.findIndex((e=>{var t;return e.id===(null===(t=this.state.currentDevice)||void 0===t?void 0:t.id)}));-1===s&&this.state.currentDevice?t=[this.state.currentDevice,...t.slice(0,2)]:s>0&&(t=[t[s],...t.slice(0,s),...t.slice(s+1)]);const i=null===(e=this.state.allDevices[t.length-1])||void 0===e?void 0:e.id;this.setNextCursor(i),this.setState({...this.state,deviceListLoadingState:"loaded",viewDevices:t})}setDevices(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return void this.setState({...this.state,allDevices:e,viewDevices:e.slice(0,3)});let t=e;this.state.currentDevice&&(t=[this.state.currentDevice,...e.filter((e=>{var t;return e.id!==(null===(t=this.state.currentDevice)||void 0===t?void 0:t.id)}))]),this.setState({...this.state,allDevices:e,viewDevices:t})}setSorting(e,t){switch(this.setState({...this.state,sortColumn:e,sortAscending:t}),e){case"device-name":this.sortDevicesByName();break;case"last-seen-time":this.sortDevicesByLastSeenTime();break;case"last-login-geographic-location":this.sortDevicesByLocation()}}sortDevicesByLastSeenTime(){const e=this.state.currentDevice,t=this.state.allDevices.filter((t=>t.id!==(null==e?void 0:e.id))),s=f().My(t,(e=>e.last_seen_time??e.last_login_at),this.state.sortAscending?"asc":"desc");this.setState({...this.state,viewDevices:e?[e,...s]:s})}sortDevicesByName(){const e=this.state.currentDevice,t=this.state.allDevices.filter((t=>t.id!==(null==e?void 0:e.id))),s=f().My(t,(e=>e.device_name.toLowerCase()),this.state.sortAscending?"asc":"desc");this.setState({...this.state,viewDevices:e?[e,...s]:s})}sortDevicesByLocation(){const e=this.state.currentDevice,t=this.state.allDevices.filter((t=>t.id!==(null==e?void 0:e.id))),s=f().My(t,(e=>{var t;return(null===(t=e.last_login_geographic_location)||void 0===t?void 0:t.toLowerCase())||"unknown"}),this.state.sortAscending?"asc":"desc");this.setState({...this.state,viewDevices:e?[e,...s]:s})}setNextCursor(e){this.setState({...this.state,nextCursor:e})}loadMoreDevices(){var e;if(void 0===this.state.nextCursor)return;const t=this.state.allDevices.slice(0,3),s=this.state.allDevices.slice(t.length);let i=[...t,...s];this.state.currentDevice&&(i=[this.state.currentDevice,...i.filter((e=>{var t;return e.id!==(null===(t=this.state.currentDevice)||void 0===t?void 0:t.id)}))]);const n=null===(e=this.state.allDevices[i.length-1])||void 0===e?void 0:e.id;this.setNextCursor(n),this.setState({...this.state,viewDevices:i})}}const gu=new uu;var pu=()=>s(710149),mu=()=>s(317182);function fu(){var e;const t=(0,a().v3)(),s=(0,l().IS)((e=>({tableBox:{tableLayout:"fixed"},cell:{paddingRight:12,height:44},allDevicesContainer:{display:"flex",flexDirection:"column",marginTop:16},noSessionsMessage:{height:120,width:"100%",fontSize:12,color:e.lightTextColor,display:"flex",alignItems:"center",justifyContent:"center",borderBottom:`1px solid ${e.lightDividerColor}`},shimmerRow:{height:12,gap:16,display:"flex",borderRadius:6},tooltips:{color:e.icon.tertiary,height:14,width:15,marginLeft:4},lastActiveTimeContainer:{display:"flex",alignItems:"center"}})),[]),[n]=(0,Ma().Yb)((async()=>{const e=t.currentUser.id;if(!e)return Promise.reject("User ID is not available");try{return await gu.fetchDevices(t,{userId:e}),Promise.resolve()}catch(o){return Promise.reject(o)}}),[t]),o="rejected"===n.status,d=(0,r().O$)(gu),c=(null===(e=d.currentDevice)||void 0===e?void 0:e.id)??"",u=(0,i.useMemo)((()=>o?[]:d.viewDevices.map((e=>function(e){let{userDevicePointer:t,storeState:s,currentUserDevicePk:i}=e;const n=t.id,a=s.viewDevices.find((e=>e.id===n));if(!a)return;const o=i===a.id,{device_name:r,last_seen_time:l,last_login_geographic_location:d,last_login_at:c}=a;return{key:n,columns:[(0,se.jsx)(Iu,{deviceName:r,isCurrentDevice:o},"device-name"),(0,se.jsx)(Tu,{lastSeenTime:l??c,isCurrentDevice:o},"last-seen-time"),(0,se.jsx)(ku,{location:d},"location"),(0,se.jsx)(wu,{deviceId:a.id,isCurrentDevice:o},"action")]}}({userDevicePointer:{id:e.id,table:ou().S},storeState:d,currentUserDevicePk:c}))).filter((e=>void 0!==e))),[c,o,d]),g=(0,i.useMemo)((()=>Array.from({length:3}).map(((e,t)=>({columns:Array.from({length:4}).map(((e,t)=>(0,se.jsx)(pu().A,{style:s.shimmerRow},t))),key:`device-loading-shimmer-${t}`})))),[s.shimmerRow]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(xu,{deviceRows:u,styles:s,storeState:d,shimmerRows:g}),(0,se.jsx)(Au,{})]})}function hu(e){let{column:t,onSortableColumnClick:s,header:i}=e;const n=(0,l().IS)((e=>({wrapper:{display:"flex"},text:{fontSize:h().J.UISmall.desktop,fontWeight:h().Wy.regular,color:e.mediumTextColor},sortButton:{display:"flex",alignItems:"center",padding:"3px 5px",overflow:"hidden",maxWidth:"100%",borderRadius:4},sortIcon:{fill:e.mediumTextColor,width:12,height:12,marginLeft:4}})),[]),{sortColumn:a,sortAscending:o}=(0,r().K8)((()=>{const{sortColumn:e,sortAscending:t}=gu.state;return{sortColumn:e,sortAscending:t}}),[]),d=["device-name","last-seen-time","last-login-geographic-location"].includes(t),c=()=>{if(a===t)return(0,tu().m)({...n.sortIcon,...o?{transform:"rotate(180deg)"}:{}})};return i&&d?(0,se.jsx)("div",{style:n.wrapper,children:(0,se.jsxs)(ge().A,{style:n.sortButton,onClick:()=>s(t),children:[i,c()]})}):i?(0,se.jsx)("div",{style:n.wrapper,children:i}):(0,se.jsx)(se.Fragment,{children:i})}function Su(e){let{isLoadingState:t,styles:s}=e;const i=t?"3px 5px":0;return[{key:"device-name",header:(0,se.jsx)("div",{children:(0,se.jsx)(m().sA,{id:"manageActiveSessions.table.nameColumn.title",defaultMessage:"Device Name"})}),style:{width:"30%",minWidth:200,padding:i}},{key:"last-seen-time",header:(0,se.jsxs)("div",{style:s.lastActiveTimeContainer,children:[(0,se.jsx)(m().sA,{id:"manageActiveSessions.table.lastSeenColumn.title",defaultMessage:"Last Active"}),(0,se.jsx)(pe().A,{renderTooltip:()=>(0,se.jsx)(m().sA,{id:"manageActiveSessions.table.lastSeenColumn.tooltip",defaultMessage:"This may be delayed by several hours."}),render:e=>(0,se.jsx)("div",{...e,children:(0,Ra().$)(s.tooltips)}),placement:he().W.Top,alignment:he().C.Start})]}),style:{width:"25%",padding:i}},{key:"last-login-geographic-location",header:(0,se.jsx)(m().sA,{id:"manageActiveSessions.table.locationColumn.title",defaultMessage:"Location"}),style:{width:"30%",padding:i}},{key:"logout",header:(0,se.jsx)(se.Fragment,{}),style:{width:"10%",padding:i}}]}function xu(e){const{deviceRows:t,styles:s,storeState:n,shimmerRows:a}=e,o="loading"===n.deviceListLoadingState&&!t.length,r=!o&&!t.length,l=!o&&!r,d=(0,i.useCallback)((e=>{const{sortColumn:t,sortAscending:s}=gu.state,i=t!==e||!s;gu.setSorting(e,i)}),[]);return(0,se.jsxs)(se.Fragment,{children:[o?(0,se.jsx)(mu().A,{columns:Su({isLoadingState:!0,styles:s}),rows:a,tableStyle:s.tableBox,cellStyle:s.cell}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(mu().A,{columns:Su({isLoadingState:!1,styles:s}).map((e=>({key:e.key,header:(0,se.jsx)(hu,{column:e.key,header:e.header,onSortableColumnClick:d}),style:e.style}))),rows:t,tableStyle:s.tableBox,cellStyle:s.cell}),r&&(0,se.jsx)("div",{style:s.noSessionsMessage,children:(0,se.jsx)(m().sA,{id:"manageActiveSessions.noActiveSessions",defaultMessage:"No active sessions found."})})]}),l&&(0,se.jsx)(Pu,{...e})]})}function vu(e,t){lu.setState({...lu.state,open:!0,singleDeviceLogout:e??!1,deviceName:t})}function yu(){lu.setState({...lu.state,open:!1,singleDeviceLogout:!1,deviceName:void 0})}function bu(){gu.loadMoreDevices()}function ju(){gu.setViewDevices()}function Au(){const e=(0,r().K8)((()=>lu.state.open),[]),t=(0,r().K8)((()=>lu.state.singleDeviceLogout),[]),s=(0,r().K8)((()=>lu.state.deviceName),[]),n=(0,r().K8)((()=>function(){let e;const{currentUserStore:t}=Je().default.state;return t&&(e=t.getEmail()),e}()),[]),a=(0,l().IS)((e=>({container:{width:350,padding:24,display:"flex",flexDirection:"column",alignItems:"center"},descriptionText:{marginBottom:20,textAlign:"center"},button:{width:"100%"},bold:{fontWeight:h().Wy.semibold}})),[]),o=(0,i.useCallback)((e=>(0,se.jsx)("span",{style:a.bold,children:e})),[a]);return(0,se.jsx)(ai().A,{open:e,onDismiss:yu,render:()=>(0,se.jsxs)("div",{style:a.container,children:[(0,se.jsx)("div",{style:a.descriptionText,children:t?(0,se.jsx)(m().sA,{id:"manageActiveSessions.confirmationModal.singleDevice",defaultMessage:"You have been logged out from {br}<bold>{deviceName}</bold>",values:{deviceName:s,bold:o,br:(0,se.jsx)("br",{})}}):n?(0,se.jsx)(m().sA,{id:"manageActiveSessions.confirmationModal.withEmail",defaultMessage:"You have been logged out from other active sessions for <bold>{email}</bold>",values:{email:n,bold:o}}):(0,se.jsx)(m().sA,{id:"manageActiveSessions.confirmationModal.withoutEmail",defaultMessage:"You have been logged out from other active sessions for your account."})}),(0,se.jsx)(ks().A,{style:a.button,onClick:yu,size:"lg",children:(0,se.jsx)(m().sA,{id:"manageActiveSessions.confirmationModal.close",defaultMessage:"Close"})})]})})}function Cu(){const e=(0,a().v3)(),t=(0,r().O$)(gu),{device:s}=e,n=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:8,alignItems:"center",justifyContent:"center"},descriptionText:{textAlign:"center"},button:{color:"dark"===e.mode?Rn().Ay.whiteWithAlpha(.81):e.mediumTextColor,fontSize:12,fontWeight:500,padding:"6px 8px",height:28},personBadgeExclamationMarkIcon:{fill:e.icon.tertiary,width:24,height:24,marginBottom:8}})),[]),o=(0,i.useCallback)((async()=>{const s=(0,se.jsxs)("div",{style:n.container,children:[(0,Dl().G)(n.personBadgeExclamationMarkIcon),(0,se.jsx)(m().sA,{id:"manageActiveSessions.handleLogoutAllDevicesClick.confirmationMessage",defaultMessage:"<bold>Log out of all devices?</bold>",values:{bold:e=>(0,se.jsx)("span",{style:{fontWeight:h().Wy.semibold},children:e})}})]}),i=(0,se.jsx)(m().sA,{id:"manageActiveSessions.handleLogoutAllDevicesClick.acceptLabel",defaultMessage:"Log out"}),a=(0,se.jsx)(m().sA,{id:"manageActiveSessions.handleLogoutAllDevicesClick.cancelLabel",defaultMessage:"Cancel"}),o=(0,se.jsx)("div",{style:n.descriptionText,children:(0,se.jsx)(m().sA,{id:"manageActiveSessions.handleLogoutAllDevicesClick.description",defaultMessage:"You will be logged out of all other active sessions on other devices <bold>except</bold> this one.",values:{bold:e=>(0,se.jsx)("span",{style:{fontWeight:h().Wy.semibold},children:e})}})}),{accept:r}=await b().Gh({message:s,acceptLabel:i,cancelLabel:a,description:o});if(!r)return;y().hy(e),await U().callApi({eventName:"logoutActiveSessions",environment:e,data:{}});const l=t.allDevices.filter((e=>{var s;return e.id===(null===(s=t.currentDevice)||void 0===s?void 0:s.id)}));gu.setDevices(l,!0),vu(!1)}),[t,e,n]),d=(0,se.jsx)(m().sA,{id:"manageActiveSessions.logOutAllDevices.title",defaultMessage:"Log out of all devices"}),c=(0,se.jsx)(m().sA,{id:"manageActiveSessions.logOutAllDevices.label",defaultMessage:"Log out of all other active sessions on other devices besides this one."});return(0,se.jsx)(Fs().A,{type:"custom",isMobile:s.isMobile,disableSettingsItemClick:!0,title:d,caption:c,customButton:(0,se.jsx)(vt().A,{size:"lg",onClick:o,style:n.button,children:(0,se.jsx)(m().sA,{id:"manageActiveSessions.logOutAllDevices.button",defaultMessage:"Log out of all devices"})})})}function wu(e){const t=(0,r().O$)(gu),s=(0,r().K8)((()=>gu),[]),n=(0,a().v3)(),o=(0,l().IS)((e=>({button:{color:"dark"===e.mode?Rn().Ay.whiteWithAlpha(.81):e.mediumTextColor,fontSize:12,fontWeight:500,padding:"6px 8px",height:28,display:"inline-flex",margin:0},container:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,justifyContent:"center"},descriptionText:{textAlign:"center"},confirmationIcon:{fill:e.icon.tertiary,width:24,height:24,marginBottom:8}})),[]),d=(0,i.useCallback)((e=>(0,se.jsx)(Mu,{...e})),[]),c=(0,i.useCallback)((async e=>{const i=t.allDevices.find((t=>t.id===e)),a=(0,se.jsx)(d,{deviceName:(null==i?void 0:i.device_name)??"Unknown Device",containerStyles:o.container,iconStyles:o.confirmationIcon}),r=(0,se.jsx)(m().sA,{id:"manageActiveSessions.handleLogoutDeviceClick.acceptLabel",defaultMessage:"Log out"}),l=(0,se.jsx)(m().sA,{id:"manageActiveSessions.handleLogoutDeviceClick.cancelLabel",defaultMessage:"Cancel"}),c=(0,se.jsx)("div",{style:o.descriptionText,children:(0,se.jsx)(m().sA,{id:"manageActiveSessions.handleLogoutDeviceClick.description",defaultMessage:"You will be logged out of this device."})}),{accept:u}=await b().Gh({message:a,acceptLabel:r,cancelLabel:l,description:c});if(u&&i){y().hy(n),await U().callApi({eventName:"logoutSingleDeviceSession",environment:n,data:{deviceId:e}});const a=t.allDevices.filter((t=>t.id!==e));s.setDevices(a),vu(!0,i.device_name)}}),[s,t,n,o,d]);return e.isCurrentDevice?null:(0,se.jsx)(vt().A,{size:"lg",onClick:()=>c(e.deviceId),style:o.button,children:(0,se.jsx)(m().sA,{id:"manageActiveSessions.logOutSingleDevice.button",defaultMessage:"Log out"})})}function Mu(e){return(0,se.jsxs)("div",{style:e.containerStyles,children:[(0,Dl().G)(e.iconStyles),(0,se.jsx)(m().sA,{id:"manageActiveSessions.handleLogoutDeviceClick.confirmationMessage",defaultMessage:"<bold>Log out of {deviceName}?</bold>",values:{bold:e=>(0,se.jsx)("span",{style:{fontWeight:h().Wy.semibold},children:e}),deviceName:e.deviceName}})]})}function Tu(e){const t=(0,m().tz)(),s=(0,i.useMemo)((()=>e.isCurrentDevice?t.formatMessage({id:"manageActiveSessions.lastSeenTime.currentDevice",defaultMessage:"Now"}):function(e,t){const s=Number(e);return mo().jE(s,ni().locale,t)}(e.lastSeenTime,t)),[e.lastSeenTime,t,e.isCurrentDevice]);return(0,se.jsx)(me().A,{className:"notranslate",isSmall:!0,children:s})}function ku(e){const t=(0,i.useMemo)((()=>{return""===(t=e.location)?"Unknown Location":t;var t}),[e.location]);return(0,se.jsx)(me().A,{isSmall:!0,children:(0,se.jsx)(m().sA,{id:"manageActiveSessions.location",defaultMessage:"{location}",values:{location:t}})})}function Iu(e){const{deviceName:t,isCurrentDevice:s}=e,n=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",gap:8,marginLeft:4},stack:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},thisDeviceBadge:{color:e.blueColor,fontSize:11,fontWeight:400,margin:0}})),[]),a=(0,i.useMemo)((()=>function(e){const t=e.toLowerCase(),s={mac:"Mac OS X",macintosh:"Mac OS X",windows:"Windows Device",iphone:"iPhone",ipad:"iPad",ipod:"iPod",android:"Android Device",cros:"Chrome OS",ubuntu:"Ubuntu",linux:"Linux",unknown:"Unknown Device",motorola:"Motorola Device",intel:"Mac OS X"},i=Object.keys(s);for(const n of i)if(t.includes(n))return s[n];return e}(t)),[t]);return(0,se.jsxs)("div",{style:n.container,children:[Du({deviceName:t}),(0,se.jsxs)("div",{style:n.stack,children:[(0,se.jsx)(me().A,{className:"notranslate",style:{fontSize:12,fontWeight:400},children:(0,se.jsx)(m().sA,{id:"manageActiveSessions.deviceName",defaultMessage:"{deviceName}",values:{deviceName:a}})}),s?(0,se.jsx)("p",{style:n.thisDeviceBadge,children:(0,se.jsx)(m().sA,{id:"manageActiveSessions.deviceName.currentDeviceBadge",defaultMessage:"This Device"})}):void 0]})]})}function Du(e){const t=(0,l().IS)((e=>({iconStyle:{width:24,height:24,fill:e.lightIconColor}})),[]),s={intel:()=>(0,nu().k)(t.iconStyle),iphone:()=>iu(t.iconStyle),ipad:()=>iu(t.iconStyle),pixel:()=>iu(t.iconStyle),unknown:()=>(0,au().z)(t.iconStyle),windows:()=>(0,nu().k)(t.iconStyle)},i=e.deviceName.toLowerCase();for(const n in s)if(i.includes(n))return(0,se.jsx)(se.Fragment,{children:s[n]()});return(0,se.jsx)(se.Fragment,{children:s.unknown()})}function Pu(e){const t=(0,l().IS)((e=>({loadMoreButton:{display:"flex",alignItems:"center",height:30,whiteSpace:"break-spaces",borderBottom:`1px solid ${e.lightDividerColor}`,color:e.lightTextColor,fontSize:14,opacity:.7},arrowIcon:{width:14,height:14,marginLeft:4,marginRight:6,fill:e.lightIconColor}})),[]),s=e.deviceRows.length<=3,i=e.deviceRows.length===e.storeState.allDevices.length;return(0,se.jsxs)(ge().A,{style:t.loadMoreButton,onClick:s?bu:ju,children:[i?null:s?(0,eu().P)(t.arrowIcon):(0,su().q)(t.arrowIcon),(0,se.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginLeft:s?4:8,fontSize:12},children:s?(0,se.jsx)(m().sA,{id:"manageActiveSessions.loadMoreButton",defaultMessage:"{numberOfDevicesLeft, plural, =0 {All devices loaded} one {Load # more device} other {Load # more devices}}",values:{numberOfDevicesLeft:e.storeState.allDevices.length-e.deviceRows.length}}):(0,se.jsx)(m().sA,{id:"manageActiveSessions.retractLoadMoreButton",defaultMessage:"Show fewer devices"})})]})}var Ru=()=>s(30580),_u=()=>s(461857),Bu=()=>s(364671),Uu=()=>s(955302),Eu=()=>s(318575),Lu=()=>s(538669),Ou=()=>s(334711);function Wu(e){let{status:t,numMfaSettings:s,onReloadSettings:n,regenerateBackupCodes:o}=e;const d=(0,a().v3)(),[{rootStateMachine:c,settingsStateMachine:u,totpStateMachine:g,smsStateMachine:p,backupCodesStateMachine:f}]=(0,i.useState)((()=>{const e=new(_u().q)(d),t={totpStore:new(Ou().$),settingsStore:new(Eu().r),smsStore:new(Lu().N),backupCodesStore:new(Ru().Y),rootStore:new(Uu().y)};return{mfaService:e,rootStateMachine:new(Uu().J)(t.rootStore),settingsStateMachine:new(Eu().U)(t.settingsStore,e),totpStateMachine:new(Ou().U)(t.totpStore,e),smsStateMachine:new(Lu().G)(t.smsStore,e),backupCodesStateMachine:new(Ru().b)(t.backupCodesStore,e)}})),S=d.device.isMobile,x=(0,l().IS)((e=>({configureButton:{marginTop:S?12:0,marginBottom:S?4:0},regenerateBackupCodesBadge:{fontWeight:h().Wy.medium,letterSpacing:0,fontSize:11,color:e.blueColor,background:"light"===e.mode?Rn().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content"}})),[S]),v=(0,r().K8)((()=>lt().A.state.highlightedSetting===lt().r.TwoStepVerification),[]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Fs().A,{type:"custom",customButton:(0,se.jsx)("div",{style:{marginTop:12},children:(0,se.jsx)(vt().A,{size:"lg",onClick:()=>{!function(e){let{rootStateMachine:t,settingsStateMachine:s}=e;t.rootShowSettings({refresh:!1,startConfirmIdentity:()=>s.settingsConfirmIdentityForSettings()})}({rootStateMachine:c,settingsStateMachine:u})},style:x.configureButton,disabled:"disabled"===t,children:"on"===t?(0,se.jsx)(m().sA,{id:"profileSettings.accountSecuritySection.changeTwoStepVerificationSettingButton.label",defaultMessage:"Change verification methods"}):(0,se.jsx)(m().sA,{id:"profileSettings.accountSecuritySection.addTwoStepVerificationSettingButton.label",defaultMessage:"Add verification method"})})}),isMobile:!1,title:(0,se.jsx)(m().sA,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.label",defaultMessage:"2-step verification"}),caption:"on"===t?(0,se.jsx)(m().sA,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.settingConfigured.message",defaultMessage:"You have {numMfaSettings} verification methods turned on.",values:{numMfaSettings:s}}):(0,se.jsx)(m().sA,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.message",defaultMessage:"Add an additional layer of security to your account during login."}),tooltipLabel:(0,se.jsx)(m().sA,{id:"profileSettings.accountSecuritySection.twoStepVerificationSettingButton.tooltip",defaultMessage:"A password is required to enable 2-step verification"}),disableTooltip:"disabled"!==t,badge:o&&(0,se.jsx)(Cc().A,{style:x.regenerateBackupCodesBadge,content:(0,se.jsx)(m().sA,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.regenerateBackupCodes.badge",defaultMessage:"Regenerate backup codes"})}),shouldHighlight:v}),(0,se.jsx)(Bu().A,{onReloadSettings:n,rootStateMachine:c,settingsStateMachine:u,totpStateMachine:g,smsStateMachine:p,backupCodesStateMachine:f})]})}var zu=()=>s(862961),qu=()=>s(243923),Fu=()=>s(289251);const Nu=z().default.createClass(!1,{name:"IsEducationStore"});const Ku=function(e){let{spaceProfileSettingsStore:t,isEducationPlan:s}=e;const n=(0,m().tz)(),o=(0,a().v3)(),l=(0,r().uB)(void 0,Nu);return(0,i.useEffect)((()=>{!async function(){const{currentUserStore:e,currentUserSettingsStore:s,currentUserRootStore:i,currentSpaceStore:a}=Je().default.state;if(e&&s){const i=t.getValueForUser(e,s,n);i&&t.setState({...t.state,...i})}if(i&&a){const e=await(0,Kt().eq)({environment:o,userRootStore:i}),t=a.canAdmin()&&(e||[]).some((e=>"student"===e));l.setState(t)}await w().Q(o,t)}()}),[o,n,l,t]),(0,i.useEffect)((()=>()=>{lt().A.state.highlightedSetting&&lt().A.setState({...lt().A.state,highlightedSetting:void 0})}),[]),(0,r().K8)((()=>Xe().A.state.online),[])?(0,se.jsx)(Xu,{spaceProfileSettingsStore:t,isEducationPlan:s,isEducationStore:l}):(0,se.jsx)(Gu,{})};function Gu(){return(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(me().A,{isSmall:!0,style:{textAlign:"center"},children:(0,se.jsx)(m().sA,{defaultMessage:"Please go online to manage your profile.",id:"profileSettings.offline.message"})})})}function Vu(e){const{emailDomainForUser:t,spaceProfileSettingsStore:s,areProfileEditsDisabled:i}=e,n=(0,r().K8)((()=>{var e;return Boolean(null===(e=s.state.emailDomainSettings)||void 0===e?void 0:e.isDomainVerified)}),[s]),o=(0,a().v3)(),l=(0,r().K8)((()=>(0,Nt().xu)(o)),[o]);return(0,se.jsxs)(re().A,{large:!0,divider:"full",children:[n?(0,se.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",margin:"0 0 8px"},children:[(0,se.jsx)(Cc().A,{style:{fontWeight:h().Wy.medium,letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",margin:0},content:(0,se.jsx)(m().sA,{id:"profileSettings.myProfile.managedByline",defaultMessage:"Your account is managed by {domain}",values:{domain:t}})}),i?(0,se.jsx)(pe().A,{render:e=>(0,se.jsx)("div",{...e,children:(0,Ga().G)({marginLeft:4,height:14,width:14,opacity:.5})}),renderTooltip:()=>(0,se.jsx)(m().sA,{id:"profileSettings.myProfile.managedByTooltip",defaultMessage:"Contact your organization's administrator to change your profile information."})}):null]}):null,l?(0,se.jsx)(m().sA,{id:"profileSettings.myAccount.title",defaultMessage:"Account"}):(0,se.jsx)(m().sA,{id:"profileSettings.myProfile.title",defaultMessage:"My profile"})]})}function Hu(e){let{spaceProfileSettingsStore:t}=e;const s=(0,l().IS)((e=>({allDevicesHelpIcon:{height:14,width:15,color:e.icon.tertiary},headerContainer:{display:"flex",alignItems:"center",gap:4}})),[]),[i,n]=(0,r().K8)((()=>{var e;return[(null===(e=t.state.emailDomainSettings)||void 0===e?void 0:e.settings)??{},t.state.emailDomainSettings]}),[t]),o=(0,a().v3)(),d=(0,r().K8)((()=>(0,Nt().xu)(o)),[o]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(re().A,{large:!0,divider:"full",children:(0,se.jsx)(m().sA,{id:"profileSettings.support.title",defaultMessage:"Support"})}),(0,se.jsx)(Fu().A,{emailDomainSettings:i}),(0,se.jsx)(si().A,{size:18,isHidden:!0}),(0,se.jsx)(Ac().A,{userEmailDomainSettings:n}),(0,se.jsx)(si().A,{size:d?48:14,isHidden:!0}),(0,se.jsx)(re().A,{large:!0,divider:"full",children:(0,se.jsxs)("div",{style:s.headerContainer,children:[(0,se.jsx)(m().sA,{id:"profileSettings.devices.title",defaultMessage:"Devices"}),(0,se.jsx)(pe().A,{renderTooltip:()=>(0,se.jsx)(m().sA,{id:"profileSettings.devices.tooltip",defaultMessage:"All devices logged in to your Notion account."}),render:e=>(0,se.jsx)("div",{...e,children:(0,Ra().$)(s.allDevicesHelpIcon)}),placement:he().W.Top,alignment:he().C.Start})]})}),(0,se.jsx)(Cu,{}),(0,se.jsx)(si().A,{size:20,isHidden:!0}),(0,se.jsx)(fu,{})]})}function $u(e,t){y().EA(t),bc().Bz({environment:t,onStart:()=>function(e){e.setState({...e.state,uploadingProfilePhoto:!0})}(e),bucket:"public",onError:()=>function(e){e.setState({...e.state,uploadingProfilePhoto:!1}),b().f1((0,se.jsx)(m().sA,{id:"profileSettings.profilePhotoSection.uploadProfilePhotoError.message",defaultMessage:"Upload failed."}))}(e),onComplete:s=>function(e,t,s){const i=e[0];t.setState({...t.state,profilePhoto:i,uploadingProfilePhoto:!1}),T().createAndCommit({userAction:"SpaceProfileSettings.handleUploadComplete",environment:s,canUndo:!0,perform:e=>{const{currentUserStore:t}=Je().default.state;t&&x().b({userStore:t,data:{profilePhoto:i},transaction:e})}})}(s,e,t),accept:"image/*"})}function Yu(e){const t=(0,a().v3)(),{userName:s,emailDomainForUser:i,areProfileEditsDisabled:n,spaceProfileSettingsStore:o}=e;return n?(0,se.jsx)(pe().A,{renderTooltip:()=>(0,se.jsx)(m().sA,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:i}}),placement:he().W.Bottom,alignment:he().C.Center,render:e=>(0,se.jsx)("div",{...e,style:{opacity:.4},children:(0,se.jsx)(Ls().A,{disabled:!0,value:s})})}):(0,se.jsx)(Ls().A,{value:s,onChange:e=>function(e,t,s){const i=e.target.value;(0,jc().r)(i)&&(y().x8(s,{from:t.state.name,to:i}),t.setState({...t.state,name:i}),T().createAndCommit({userAction:"SpaceProfileSettings.handleNameChange",environment:s,canUndo:!0,perform:e=>{const{currentUserStore:t}=Je().default.state;t&&x().b({userStore:t,data:{name:i},transaction:e})}}))}(e,o,t)})}function Qu(e){let{currentUserValue:t,spaceProfileSettingsStore:s,isEducationPlan:n,isEducationStore:o}=e;const l=(0,a().v3)(),d=(0,r().K8)((()=>s.state.accountSettings),[s]),c=(0,r().K8)((()=>{var e;return Boolean(null===(e=s.state.emailDomainSettings)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.prevent_profile_edits)}),[s]),u=(0,i.useCallback)((()=>{w().Q(l,s)}),[l,s]),g=(0,r().O$)(o);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(re().A,{large:!0,divider:"full",children:(0,se.jsx)(m().sA,{id:"profileSettings.accountSecurity.title",defaultMessage:"Account security"})}),(0,se.jsx)(_c,{userValue:t,hasEducationPlan:g,areProfileEditsDisabled:c}),(0,se.jsx)(si().A,{size:18,isHidden:!0}),(0,se.jsx)(qu().A,{hasPassword:d.hasPassword,hasPasswordActions:d.canConfigurePassword,isEducationPlan:n,samlEnforced:d.isSamlEnforced,email:t.email,isError:Boolean(d.error),onReloadSettings:u,mfaStatus:d.mfaStatus}),(0,se.jsx)(si().A,{size:18,isHidden:!0}),(0,se.jsx)(Wu,{status:d.mfaStatus,numMfaSettings:d.numMfaSettings,onReloadSettings:u,regenerateBackupCodes:d.regenerateBackupCodes}),(0,se.jsx)(si().A,{size:18,isHidden:!0}),(0,se.jsx)(zu().A,{samlEnforced:d.isSamlEnforced,hasPasskeys:d.hasPasskeys})]})}function Ju(e){const{userName:t,currentUserStore:s,currentUserValue:i,spaceProfileSettingsStore:n,isEducationPlan:o,isEducationStore:l}=e,d=(0,a().v3)(),c=(0,m().tz)(),u=(0,r().K8)((()=>(0,vo().Ew)(s,c)),[s,c]),g=(0,kl().zN)(i.email),p=(0,r().K8)((()=>{var e;return Boolean(null===(e=n.state.emailDomainSettings)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.prevent_profile_edits)}),[n]),f=(0,r().K8)((()=>Xe().A.state.online),[]),h=(0,r().K8)((()=>(0,Nt().xu)(d)),[d]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Vu,{spaceProfileSettingsStore:n,emailDomainForUser:g,areProfileEditsDisabled:p}),(0,se.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,se.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,se.jsx)(vo().Ay,{size:60,avatarType:u,isOffline:!f,onUploadProfilePhoto:()=>$u(n,d),onRemoveProfilePhoto:()=>function(e,t){e.setState({...e.state,profilePhoto:void 0}),T().createAndCommit({userAction:"SpaceProfileSettings.handleRemoveProfilePhoto",environment:t,canUndo:!0,perform:e=>{const{currentUserStore:t}=Je().default.state;t&&x().b({userStore:t,data:{profilePhoto:null},transaction:e})}})}(n,d),disabled:p,disabledTooltipMessage:(0,se.jsx)(m().sA,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:g}})}),(0,se.jsxs)("div",{style:{marginLeft:20,width:250},children:[(0,se.jsx)(yo().A,{children:(0,se.jsx)(m().sA,{id:"profileSettings.personalInfoSection.nameInput.label",defaultMessage:"Preferred name"})}),(0,se.jsx)(Yu,{spaceProfileSettingsStore:n,userName:t,emailDomainForUser:g,areProfileEditsDisabled:p})]})]}),(0,se.jsx)(Zu,{avatarType:u,spaceProfileSettingsStore:n,areProfileEditsDisabled:p})]}),(0,se.jsx)(si().A,{size:48,isHidden:!0}),(0,se.jsx)(Qu,{spaceProfileSettingsStore:n,isEducationPlan:o,isEducationStore:l,currentUserValue:i}),(0,se.jsx)(si().A,{size:h?48:12,isHidden:!0}),(0,se.jsx)(Hu,{spaceProfileSettingsStore:n})]})}function Xu(e){let{spaceProfileSettingsStore:t,isEducationPlan:s,isEducationStore:i}=e;const n=(0,r().K8)((()=>Je().default.state.currentUserStore),[]),a=(0,r().K8)((()=>n?n.getValue():void 0),[n]),o=(0,r().K8)((()=>t.state.name),[t]);return n&&a?(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(Ju,{spaceProfileSettingsStore:t,isEducationPlan:s,isEducationStore:i,currentUserStore:n,currentUserValue:a,userName:o})}):null}function Zu(e){const{avatarType:t,spaceProfileSettingsStore:s,areProfileEditsDisabled:i}=e,n=(0,l().DP)(),o=(0,a().v3)(),r=(0,cn().X)("enable_add_notion_face_in_setting");return"photo"===t.type||i||r?"photo"!==t.type&&!i&&r?(0,se.jsx)("div",{style:{color:n.mediumIconColor,fontSize:14,marginTop:8},children:(0,se.jsx)(m().sA,{id:"editableUserAvatar.profilePhoto.addPhotoWithNotionFace",defaultMessage:"<addphoto>Add photo</addphoto> or <createface>Create your portrait</createface>",values:{addphoto:e=>(0,se.jsx)(di().A,{color:n.blueColor,disableUnderline:!0,disableHover:!0,onClick:()=>{$u(s,o)},children:e}),createface:e=>(0,se.jsx)(di().A,{color:n.blueColor,disableUnderline:!0,disableHover:!0,external:!0,href:"https://faces.notion.com",children:e})}})}):!i&&r?(0,se.jsx)("div",{style:{color:n.mediumIconColor,fontSize:14,marginTop:8},children:(0,se.jsx)(m().sA,{id:"editableUserAvatar.profilePhoto.addNotionFace",defaultMessage:"<createface>Create your portrait</createface>",values:{createface:e=>(0,se.jsx)(di().A,{color:n.blueColor,disableUnderline:!0,disableHover:!0,external:!0,href:"https://faces.notion.com",children:e})}})}):null:(0,se.jsx)("div",{style:{color:n.mediumIconColor,fontSize:14,marginTop:8},children:(0,se.jsx)(m().sA,{id:"editableUserAvatar.profilePhoto.addPhoto",defaultMessage:"Add photo"})})}var eg=()=>s(701763),tg=()=>s(605402),sg=()=>s(910609),ig=()=>s(334992),ng=()=>s(709438),ag=()=>s(792223),og=()=>s(583705),rg=()=>s(731320),lg=()=>s(970209),dg=()=>s(280161);function cg(e){let{spaceStore:t,spacePermissionsSettingsStore:s}=e;const{canUseGroups:i,canEditGroups:n,isSpaceStoreDefined:a}=function(e){let{spaceStore:t}=e;const s=(0,ag().zh)(),{canEditMembership:i,isSpaceStoreDefined:n}=(0,r().K8)((()=>({canEditMembership:t.canEditMembership(),isSpaceStoreDefined:t.isDefined()})),[t]),a=(0,r().K8)((()=>i&&s),[i,s]);return{canUseGroups:s,canEditMembership:i,canEditGroups:a,isSpaceStoreDefined:n}}({spaceStore:t}),o=(0,r().K8)((()=>0!==(0,Cs().zI)()),[]),l=(0,r().K8)((()=>0!==(0,rg().Qo)()),[]);return a?(0,se.jsxs)("div",{children:[i?!l&&(0,se.jsx)(me().A,{isMultiline:!0,style:{marginTop:17,marginBottom:17},children:o?(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})}):(0,se.jsx)(lg().A,{subscriptionTier:"plus",from:"permission_groups",icon:og().$,title:(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",defaultMessage:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),(0,se.jsx)(dg().r,{spaceStore:t,permissionsSettingsStore:s,canEdit:n,containerMarginTop:i?0:void 0})]}):null}var ug=()=>s(592674),gg=()=>s(278238),pg=()=>s(205224),mg=()=>s(568625);class fg extends z().default{getInitialState(){return{isModalOpen:!1,guests:[],handleClickDecline:()=>{}}}}const hg=new fg;function Sg(e){let{guest:t,spaceStore:s,shouldDisableInteraction:n}=e;const{environment:o,styles:d,isSubscribed:c,handleConvertToMemberClick:u,handleRemoveClick:g}=function(e){let{guest:t,spaceStore:s,shouldDisableInteraction:n}=e;const o=(0,l().IS)((e=>({container:{width:"100%",display:"flex",justifyContent:"flex-end",opacity:n?.5:1},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:20,height:20,fill:e.icon.secondary},upgradeButton:{padding:"0px 6px 0px 8px",width:257},removeMenuDivider:{paddingTop:4,paddingBottom:4,borderTop:`1px solid ${e.stroke.secondary}`},removeButton:{width:257,padding:"0px 6px 0px 8px",color:gg().l8[e.mode].red},upgradeIcon:{width:17,height:17}})),[n]),d=(0,r().K8)((()=>{const e=Mt().subscriptionDataStoreInstance.state;return Boolean(e&&Kt().Fq(e))}),[]),c=(0,a().v3)(),u=(0,i.useCallback)((()=>{const e=ee().LU.createChildStore(s,{table:B().oo,id:t.userId}),i=d?"read_and_write":"editor";pg().P({environment:c,guestUserStore:e,role:i,store:s,isConvertToAdmin:!d,origin:"guest_pages_popup"})}),[d,s,c,t.userId]),g=(0,i.useCallback)((()=>{hg.setState({...hg.state,isModalOpen:!0,guests:[t.userId],handleClickDecline:()=>{eg().jR(c,{from:"guest",button_name:"confirm_in_dialog",count:1});const e=ee().LU.createChildStore(s,{table:B().oo,id:t.userId});pg().D({environment:c,guestUserStore:e,store:s})}})}),[s,c,t]);return{environment:c,styles:o,isSubscribed:d,handleConvertToMemberClick:u,handleRemoveClick:g}}({guest:t,spaceStore:s,shouldDisableInteraction:n});return(0,se.jsx)("div",{style:d.container,children:(0,se.jsx)(eo().Ay,{popupType:eo().z7.Popup,renderOrigin:e=>(0,se.jsx)(Rt().p,{style:d.button,...e,children:(0,se.jsx)(se.Fragment,{children:(0,mg().L)(d.buttonIcon)})}),onClick:()=>{eg().jR(o,{from:"guest",button_name:"actions"})},disabled:n,render:()=>(0,se.jsx)("div",{children:(0,se.jsx)(Kn().Ay,{type:Kn().Oh.Vertical,initialFocus:void 0,sections:[{key:"upgrade",render:e=>(0,se.jsx)(Vn().A,{...e}),items:[{key:"upgrade",render:e=>(0,se.jsx)(qn().A,{...e,buttonStyle:d.upgradeButton,icon:(0,ll().m)(d.upgradeIcon),title:(0,se.jsx)(m().sA,{id:"peopleSectionguestsTab.upgradeToAdmin",defaultMessage:"Upgrade to {isSubscribed, select, true {member} other {admin}}",values:{isSubscribed:c}})}),action:()=>{u(),eg().jR(o,{from:"guest",button_name:"upgrade"})}}]},{key:"remove",render:e=>(0,se.jsx)(Vn().A,{...e,style:d.removeMenuDivider}),items:[{key:"remove",render:e=>(0,se.jsx)(qn().A,{...e,buttonStyle:d.removeButton,icon:(0,Ba()._)(d.upgradeIcon),title:(0,se.jsx)(m().sA,{id:"peopleSectionguestsTab.remove",defaultMessage:"Remove from workspace"})}),action:()=>{g(),eg().jR(o,{from:"guest",button_name:"remove"})}}]}]})})})})}const xg=(0,gt().wt)("peopleFillXmark",{viewBox:"0 0 20 20",svg:(0,se.jsx)("path",{d:"M12.2061 6.75684C12.0374 6.75684 11.8916 6.69531 11.7686 6.57227C11.6501 6.44922 11.5908 6.30339 11.5908 6.13477C11.5908 5.96615 11.6523 5.82259 11.7754 5.7041L13.5801 3.89258L11.7754 2.08105C11.6523 1.96257 11.5908 1.81901 11.5908 1.65039C11.5908 1.47721 11.6501 1.33366 11.7686 1.21973C11.8916 1.10124 12.0374 1.04199 12.2061 1.04199C12.3838 1.04199 12.5319 1.10352 12.6504 1.22656L14.4551 3.02441L16.2803 1.21973C16.4033 1.09212 16.5469 1.02832 16.7109 1.02832C16.8841 1.02832 17.0299 1.08984 17.1484 1.21289C17.2669 1.33138 17.3262 1.47493 17.3262 1.64355C17.3262 1.80762 17.2646 1.95117 17.1416 2.07422L15.3369 3.89258L17.1348 5.69727C17.2624 5.82031 17.3262 5.96615 17.3262 6.13477C17.3262 6.30339 17.2646 6.44922 17.1416 6.57227C17.0231 6.69531 16.8796 6.75684 16.7109 6.75684C16.5332 6.75684 16.3828 6.69303 16.2598 6.56543L14.4551 4.76758L12.6572 6.56543C12.5387 6.69303 12.3883 6.75684 12.2061 6.75684ZM1.89746 13.2441C1.51465 13.2441 1.21387 13.1576 0.995117 12.9844C0.776367 12.8112 0.666992 12.5742 0.666992 12.2734C0.666992 11.8314 0.799154 11.3688 1.06348 10.8857C1.33236 10.4027 1.71745 9.94922 2.21875 9.52539C2.72461 9.10156 3.33301 8.75749 4.04395 8.49316C4.75488 8.22884 5.55241 8.09668 6.43652 8.09668C7.3252 8.09668 8.125 8.22884 8.83594 8.49316C9.54688 8.75749 10.153 9.10156 10.6543 9.52539C11.1602 9.94922 11.5475 10.4027 11.8164 10.8857C12.0853 11.3688 12.2197 11.8314 12.2197 12.2734C12.2197 12.5742 12.1104 12.8112 11.8916 12.9844C11.6729 13.1576 11.3721 13.2441 10.9893 13.2441H1.89746ZM6.44336 6.87988C5.94661 6.87988 5.48861 6.74544 5.06934 6.47656C4.65462 6.20768 4.31966 5.84538 4.06445 5.38965C3.8138 4.93392 3.68848 4.4235 3.68848 3.8584C3.68848 3.30241 3.8138 2.80111 4.06445 2.35449C4.31966 1.90332 4.6569 1.54557 5.07617 1.28125C5.49544 1.01693 5.95117 0.884766 6.44336 0.884766C6.9401 0.884766 7.39811 1.01465 7.81738 1.27441C8.23665 1.53418 8.57161 1.88965 8.82227 2.34082C9.07747 2.78743 9.20508 3.28874 9.20508 3.84473C9.20508 4.41439 9.07747 4.92936 8.82227 5.38965C8.57161 5.84538 8.23665 6.20768 7.81738 6.47656C7.39811 6.74544 6.9401 6.87988 6.44336 6.87988Z"})});function vg(e){let{isModalOpen:t,handleDismiss:s,handleConfirm:i,title:n,description:a,ctaText:o}=e;const{styles:r}=function(){const e=(0,l().IS)((e=>({modal:{width:300,overflow:"hidden",borderRadius:5},container:{display:"flex",padding:"20px 20px 12px 20px",flexDirection:"column",width:299,justifyContent:"center",alignItems:"flex-start",gap:20},iconAndTitle:{display:"flex",flexDirection:"column",alignItems:"center",gap:9,width:"100%"},iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:36,height:36},icon:{color:e.icon.secondary,fontSize:24,fontWeight:510},title:{color:e.text.primary,textAlign:"center",fontSize:17,fontWeight:590,width:"100%",wordBreak:"break-word"},description:{color:e.text.secondary,textAlign:"center"},footer:{display:"flex",flexDirection:"column",gap:8,alignItems:"center",width:"100%"},declineButton:{height:32,padding:"0 12px",borderRadius:6,width:"100%",textAlign:"center",alignItems:"center",justifyContent:"center",background:gg().l8[e.mode].red},declineButtonHovered:{background:e.tint.uiRedPressed},declineText:{fontWeight:590,color:e.text.contrastPrimary},cancelButton:{display:"flex",height:24,padding:"0px 6px",justifyContent:"center",alignItems:"center",gap:4,textAlign:"center"}})),[]);return{styles:e}}();return(0,Ke().A)({shouldPreserveTextSelection:!0,shouldPreserveBlockSelection:!0,shouldRestoreSelection:!0}),(0,se.jsx)(ai().A,{open:t,innerStyle:r.modal,showCloseIcon:!0,onDismiss:s,render:()=>(0,se.jsx)(ha().A,{capture:!0,allowEsc:!0,render:()=>(0,se.jsxs)("div",{style:r.container,children:[(0,se.jsxs)("div",{style:r.iconAndTitle,children:[(0,se.jsx)("div",{style:r.iconContainer,children:(0,se.jsx)("div",{style:r.icon,children:xg({width:24,height:24})})}),(0,se.jsx)("div",{style:r.title,children:n})]}),(0,se.jsx)("div",{style:r.description,children:a}),(0,se.jsxs)("div",{style:r.footer,children:[(0,se.jsx)(Rt().p,{style:r.declineButton,onClick:()=>{i(),s()},hoveredStyle:r.declineButtonHovered,children:(0,se.jsx)("div",{style:r.declineText,children:o})}),(0,se.jsx)(Rt().p,{style:r.cancelButton,onClick:s,children:(0,se.jsx)("div",{children:(0,se.jsx)(m().sA,{id:"BulkDeclineConfirmationDialog.cancel",defaultMessage:"Cancel"})})})]})]})})})}function yg(){const{isModalOpen:e,handleClickDecline:t,handleDismiss:s,guests:n,firstGuestName:o}=function(){const{isModalOpen:e,guests:t,handleClickDecline:s}=(0,r().K8)((()=>{const{isModalOpen:e,guests:t,handleClickDecline:s}=hg.state;return{isModalOpen:e,guests:t,handleClickDecline:s}}),[]),n=(0,m().tz)(),o=(0,r().K8)((()=>{const{currentSpaceStore:e}=Je().default.state;if(0===t.length||!e)return;return ee().LU.createChildStore(e,{table:B().oo,id:t[0]}).getDisplayName(n)}),[t,n]),l=(0,a().v3)(),d=(0,i.useCallback)((()=>{hg.reset(),eg().jR(l,{from:"guest",button_name:"confirm_in_dialog",count:t.length})}),[l,t]);return{isModalOpen:e,guests:t,firstGuestName:o,handleClickDecline:s,handleDismiss:d}}();return 0===n.length?null:(0,se.jsx)(vg,{isModalOpen:e,handleDismiss:s,handleConfirm:t,title:(0,se.jsx)(m().sA,{id:"GuestBulkRemoveConfirmationDialog.title",defaultMessage:"Remove {numberOfGuests, plural, one {{firstGuestName}} other {{numberOfGuests} guests}} from the workspace?",values:{numberOfGuests:n.length,firstGuestName:o}}),description:(0,se.jsx)(m().sA,{id:"GuestBulkRemoveConfirmationDialog.description",defaultMessage:"They will lose access to all shared pages. To add them as a guest in the future, a request must be submitted, or an admin must invite them."}),ctaText:(0,se.jsx)(m().sA,{id:"GuestBulkRemoveConfirmationDialog.remove",defaultMessage:"Remove"})})}var bg=()=>s(584262),jg=()=>s(433847),Ag=()=>s(435009),Cg=()=>s(492414),wg=()=>s(305390);function Mg(e){let{guestUserId:t,pageIds:s}=e;const{menuListItems:i,styles:n}=function(e){let{guestUserId:t,pageIds:s}=e;const i=(0,l().IS)((()=>({container:{width:256},chevron:{marginLeft:8,width:16,height:16}})),[]),n=(0,a().v3)(),o=(0,m().tz)(),d=(0,r().K8)((()=>s.map((e=>{var s;const i=new(ee().Bv)(n,{table:Zd().ev,id:e}),a=null===(s=i.getPermissionItems().find((e=>"user_permission"===e.type&&e.user_id===t)))||void 0===s?void 0:s.role;return{key:e,render:e=>(0,se.jsx)(wg().A,{...e,store:i,placeholder:(0,se.jsx)(m().sA,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"}),caption:a?o.formatMessage((0,jg().an)(a,"block")):void 0}),action:()=>{const e=(0,Cg().Ay)({store:i,fullyQualified:!1,pageVisitSource:bg().y8.LinkInPage});Ag().oo({environment:n,url:e,openInNew:"tab"})}}}))),[s,t,n,o]);return{menuListItems:d,styles:i}}({guestUserId:t,pageIds:s});return(0,se.jsx)("div",{style:n.container,children:(0,se.jsx)(Kn().Ay,{type:Kn().Oh.Vertical,initialFocus:void 0,sections:[{key:"pages",render:e=>(0,se.jsx)(Vn().A,{...e}),items:i}]})})}function Tg(e){let{from:t,guestUserId:s,pageIds:i,shouldDisableInteraction:n}=e;const{styles:o}=function(e){let{shouldDisableInteraction:t}=e;const s=(0,l().IS)((e=>({button:{opacity:t?.5:1,color:e.text.secondary},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[t]);return{styles:s}}({shouldDisableInteraction:n}),r=(0,a().v3)(),d=i.length;return 0===d?(0,se.jsx)(Rt().p,{disabled:!0,style:o.button,children:(0,se.jsx)(m().sA,{id:"peopleSectionguestsTab.GuestPagesButton.noPages",defaultMessage:"No pages"})}):(0,se.jsx)(eo().Ay,{popupType:eo().z7.Popup,onClick:()=>{eg().jR(r,{from:t,button_name:"open_pages"})},renderOrigin:e=>(0,se.jsxs)(Rt().p,{...e,style:o.button,children:[(0,se.jsx)(m().sA,{id:"GuestPagesButton.button",defaultMessage:"{numOfPages, plural, one {{numOfPages} page} other {{numOfPages} pages}}",values:{numOfPages:d}}),(0,od().b)(o.chevron)]}),disabled:n,render:()=>(0,se.jsx)(Mg,{pageIds:i,guestUserId:s})})}function kg(e){let{guest:t,shouldDisableInteraction:s}=e;return(0,se.jsx)(Tg,{pageIds:t.guestPageIds,guestUserId:t.userId,shouldDisableInteraction:s,from:"guest"})}const Ig=10,Dg=10,Pg=5;var Rg=()=>s(762286),_g=()=>s(868146);function Bg(e){let{userId:t,spaceStore:n,restorationStatus:a,isInternalGuest:o,isForSuggestionsTable:d}=e;const c=(0,m().tz)().formatMessage({id:"peopleSettings.userCell.guest",defaultMessage:"Guest"}),{name:u,email:g,userStore:p,styles:f}=function(e){let{userId:t,spaceStore:s,isForSuggestionsTable:i}=e;const n=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",fontSize:h().J.UIRegular.desktop,width:"100%",justifyContent:"space-between"},titleContainer:{maxWidth:i?210:163},userAvatarWrapper:{position:"relative"},userAvatarIcon:{position:"absolute",left:17,top:18},userName:{height:17,alignSelf:"stretch",fontSize:h().J.UIRegular.desktop,fontStyle:"normal",fontWeight:510,lineHeight:"18px",...h().RC},userEmail:{height:17,alignSelf:"stretch",fontSize:h().J.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px",color:e.text.secondary,...h().RC},nameContainer:{display:"flex",alignItems:"center",gap:10,marginTop:4,marginBottom:4}})),[i]),a=(0,m().tz)(),o=ee().LU.createChildStore(s,{table:B().oo,id:t}),{name:d,email:c}=(0,r().K8)((()=>({name:o.getDisplayName(a),email:o.getEmail()})),[o,a]);return{name:d,email:c,styles:n,userStore:o}}({userId:t,spaceStore:n,isForSuggestionsTable:d}),[S,x]=(0,i.useState)(!1);return(0,se.jsxs)("div",{style:f.container,children:[(0,se.jsxs)("div",{style:f.nameContainer,children:[(0,se.jsxs)("div",{style:f.userAvatarWrapper,children:[(0,se.jsx)(Sa().A,{userStore:p,size:28}),o&&(0,se.jsx)(pe().A,{style:{width:250},textWrap:!0,placement:he().W.Right,alignment:he().C.Start,render:e=>(0,se.jsx)("div",{...e,style:f.userAvatarIcon,children:(0,se.jsx)(St().Q,{iconGroup:_g().u,colorName:"secondary",variantName:"mini"})}),renderTooltip:()=>(0,se.jsxs)("div",{children:[(0,se.jsx)(xt().D,{styleName:"Body-12px/Medium",colorName:"contrastPrimary",children:(0,se.jsx)(m().sA,{id:"userCell.internalGuest.tooltip.title",defaultMessage:"Using an email domain associated with your workspace"})}),(0,se.jsx)(xt().D,{styleName:"Body-12px/Medium",colorName:"contrastSecondary",children:(0,se.jsx)(m().sA,{id:"userCell.internalGuest.tooltip.description",defaultMessage:"You'll see this icon for users who have a workspace owner email domain, verified domain, or allowed email domain"})})]})})]}),(0,se.jsxs)("div",{style:f.titleContainer,children:[(0,se.jsx)("div",{style:f.userName,title:d?g:u,children:d?g:u}),(0,se.jsx)("div",{style:f.userEmail,title:d?c:g,children:d?c:g}),a&&(0,se.jsx)(s(881753).A,{spaceStore:n,restorationStatus:a,didAttemptRecovery:S})]})]}),!S&&"canBeRestored"===(null==a?void 0:a.status)&&(0,se.jsx)(s(266324).A,{spaceId:n.id,userStore:p,onSubmit:()=>x(!0)})]})}function Ug(e){let{guests:t,spaceStore:s,domainFilterValues:n,internalDomains:o}=e;const{environment:d,tableStyles:c,styles:u,sortState:g,setSortState:p,selectedRowIds:f,setSelectedRowIds:h,rows:S,searchQuery:x,onClickApprove:v,onClickDecline:y,isApproveButtonLoading:b,canEditMembership:j,columnRenderInfo:A,isSubscribed:C,shouldHideActions:w,shouldShowRequest:M,canAdmin:T,guestsCount:k,shouldShowLoadMore:I,onLoadMore:D}=function(e){let{guests:t,spaceStore:s,domainFilterValues:n,internalDomains:o}=e;const d=(0,ns().fC)({spaceStore:s}),c=(0,ag().r1)({spaceStore:s}),u=(0,a().v3)(),g=(0,l().IS)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},emptyDivider:{height:1,backgroundColor:e.stroke.secondary},headerContainer:{display:"flex",justifyContent:d&&c?"space-between":"flex-end"},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},actionLeftButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},buttonContainerDecline:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:gg().l8[e.mode].red},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonDivider:{width:1,background:e.stroke.secondary},actionRightButton:{borderRadius:"0px 4px 4px 0px",paddingLeft:0,paddingRight:0,height:30}})),[d,c]),p=(0,ag().k4)({spaceStore:s}),f=(0,r().K8)((()=>p?[Eg,Lg,Og]:[Eg]),[p]),h=(0,l().IS)((e=>({...(0,ue().rC)({columnRenderInfo:f,theme:e,containerMarginTop:0})})),[f]),S=(0,r().K8)((()=>f[0]),[f]),[x,v]=(0,i.useState)({column:S,sortAscending:!0}),[y,b]=(0,i.useState)([]),j=(0,m().tz)(),A=(0,r().K8)((()=>Rg().A.state.searchQuery),[]),C=(0,r().K8)((()=>t.map((e=>{const t=ee().LU.createChildStore(s,{table:B().oo,id:e.userId}),i=t.getEmail(),n=null==i?void 0:i.split("@")[1],a=o.some((e=>e.url===n));return{spaceStore:s,user:e,email:i,userName:t.getDisplayName(j),id:e.userId,shouldDisableInteraction:y.includes(e.userId),isClickable:!1,isInternalGuest:a}})).filter((e=>{var t;if(A){var s;if(!((null===(s=e.email)||void 0===s?void 0:s.includes(A))||e.userName.includes(A)))return!1}if(!n||0===n.length)return!0;const i=null===(t=e.email)||void 0===t?void 0:t.split("@")[1];return null==n?void 0:n.some((e=>"other"===e?!(null!=o&&o.some((e=>e.url===i))):i===e))}))),[s,t,j,A,y,o,n]),w=(0,r().K8)((()=>{const e=Mt().subscriptionDataStoreInstance.state;return Boolean(e&&Kt().Fq(e))}),[]),M=(0,i.useCallback)((()=>{eg().jR(u,{from:"guest",button_name:"bulk_upgrade",count:y.length}),y.forEach((e=>{const t=ee().LU.createChildStore(s,{table:B().oo,id:e}),i=w?"read_and_write":"editor";pg().P({environment:u,guestUserStore:t,role:i,store:s,isConvertToAdmin:!w,origin:"guest_actions"}),b([])}))}),[y,u,w,s]),T=(0,i.useCallback)((()=>{eg().jR(u,{from:"guest",button_name:"bulk_remove",count:y.length}),hg.setState({...hg.state,isModalOpen:!0,guests:y,handleClickDecline:()=>{eg().jR(u,{from:"guest",button_name:"confirm_in_dialog",count:y.length}),y.forEach((e=>{const t=ee().LU.createChildStore(s,{table:B().oo,id:e});pg().D({environment:u,guestUserStore:t,store:s})})),b([])}})}),[y,u,s]),k=!C.some((e=>y.includes(e.id))),[I,D]=(0,i.useState)(Dg),P=(0,i.useCallback)((()=>{D(I+Dg)}),[I]),R=I<C.length,_=C.slice(0,I);return{environment:u,tableStyles:h,styles:g,sortState:x,setSortState:v,selectedRowIds:y,setSelectedRowIds:b,rows:_,searchQuery:A,onClickApprove:M,onClickDecline:T,isApproveButtonLoading:!1,canEditMembership:p,columnRenderInfo:f,isSubscribed:w,shouldHideActions:k,shouldShowRequest:d,canAdmin:c,guestsCount:C.length,shouldShowLoadMore:R,onLoadMore:P}}({guests:t,spaceStore:s,domainFilterValues:n,internalDomains:o});return(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:u.headerContainer,children:[M&&T&&(0,se.jsxs)("div",{style:u.titleContainer,children:[(0,se.jsx)("span",{children:(0,se.jsx)(m().sA,{id:"peopleSectionguestsTab.activeguests.title",defaultMessage:"Active"})}),(0,se.jsx)("span",{style:u.titleNumber,children:k})]}),f.length>0&&!w&&(0,se.jsxs)("div",{style:u.actionsContainer,children:[(0,se.jsx)(Rt().p,{style:u.actionLeftButton,onClick:v,isLoading:b,children:(0,se.jsxs)("div",{style:u.buttonContainerApprove,children:[(0,se.jsx)("div",{style:u.buttonIcon,children:(0,ll().m)({width:20,height:16})}),(0,se.jsx)("div",{style:u.buttonText,children:(0,se.jsx)(m().sA,{id:"spaceSettings.peopleSection.guestsTable.bulkUpgrade",defaultMessage:"Upgrade {numberOfRequests, plural, one {1 guest} other {{numberOfRequests} guests}} to {isSubscribed, select, true {member} other {admin}}",values:{numberOfRequests:f.length,isSubscribed:C}})})]})}),(0,se.jsx)("div",{style:u.buttonDivider}),(0,se.jsx)(Rt().p,{style:u.actionRightButton,onClick:y,children:(0,se.jsxs)("div",{style:u.buttonContainerDecline,children:[(0,se.jsx)("div",{style:{...u.buttonIcon,paddingTop:3},children:(0,Ba()._)({width:20,height:16})}),(0,se.jsx)("div",{style:u.buttonText,children:(0,se.jsx)(m().sA,{id:"spaceSettings.peopleSection.guestsTable.bulkDecline",defaultMessage:"Remove from workspace"})})]})})]})]}),(0,se.jsxs)("div",{style:{marginTop:M&&T?4:-1},children:[(0,se.jsx)(ue().WE,{allowHorizontalScroll:j,setStickyHeaderRow:!0,columnRenderInfo:A,rows:Wg(S,g),showRowBorders:!0,hideHeaderRowPadding:!0,sortState:g,onSortStateChanged:p,loadMoreMethod:I?{type:"button",onLoadMore:D}:void 0,renderNoRowsComponent:()=>(0,se.jsx)(me().A,{isSmall:!0,style:u.emptyMessage,children:x?(0,se.jsx)(m().sA,{id:"peopleSectionGuestsTab.emptySearch",defaultMessage:"No search results"}):(0,se.jsx)(m().sA,{id:"peopleSectionGuestsTab.emptyRow",defaultMessage:"No guests"})}),styles:c,multiselect:j?{header:{isDisabled:0===S.length,isSelected:f.length>0&&f.length===S.length,onClick:()=>{f.length===S.length?(h([]),eg().Y1(d,{from:"guests",action:"deselect_all",row_count:f.length})):(h(S.map((e=>e.id))),eg().Y1(d,{from:"guests",action:"select_all",row_count:S.length}))}},row:{getDisabledState:()=>!1,getSelectedState:e=>f.includes(e.id),onClick:e=>{h((t=>t.includes(e.id)?(eg().Y1(d,{from:"guests",action:"deselect_row",row_count:1}),t.filter((t=>t!==e.id))):(eg().Y1(d,{from:"guests",action:"select_row",row_count:1}),t.concat(e.id))))}}}:void 0}),(0,se.jsx)(yg,{})]})]})}const Eg={id:"user",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m().sA,{id:"peopleSectionGuestsTab.user",defaultMessage:"User"})}),renderCell:e=>(0,se.jsx)(Bg,{userId:e.user.userId,spaceStore:e.spaceStore,isInternalGuest:e.isInternalGuest}),widthData:{width:210},sortable:!0},Lg={id:"access",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,se.jsx)(m().sA,{id:"peopleSectionGuestsTab.access",defaultMessage:"Access"})}),renderCell:e=>(0,se.jsx)(kg,{guest:e.user,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{width:180},sortable:!1},Og={id:"actions",headerTitle:(0,se.jsx)(se.Fragment,{}),renderCell:e=>(0,se.jsx)(Sg,{guest:e.user,spaceStore:e.spaceStore,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{width:300},sortable:!1};function Wg(e,t){let{sortAscending:s}=t;const i=f().Ul(e,(e=>e.email));return s||i.reverse(),i}var zg=()=>s(42476),qg=()=>s(353147);const Fg=(0,gt().wt)("checkMarkShield",{viewBox:"0 0 10 11",svg:(0,se.jsx)("path",{d:"M5.08789 10.4893C5.03906 10.4893 4.9821 10.4795 4.91699 10.46C4.85514 10.4437 4.79167 10.4193 4.72656 10.3867C4.02669 10.0189 3.43262 9.68522 2.94434 9.38574C2.45931 9.08952 2.06868 8.79655 1.77246 8.50684C1.47624 8.21712 1.25977 7.90462 1.12305 7.56934C0.989583 7.23405 0.922852 6.84831 0.922852 6.41211V2.8623C0.922852 2.52051 0.986328 2.26335 1.11328 2.09082C1.24023 1.91829 1.45345 1.77018 1.75293 1.64648C1.84733 1.60742 1.98405 1.55534 2.16309 1.49023C2.34212 1.42188 2.54069 1.35026 2.75879 1.27539C2.98014 1.19727 3.19987 1.12077 3.41797 1.0459C3.63932 0.971029 3.83789 0.904297 4.01367 0.845703C4.19271 0.787109 4.32617 0.743164 4.41406 0.713867C4.52148 0.681315 4.63379 0.655273 4.75098 0.635742C4.87142 0.616211 4.98372 0.606445 5.08789 0.606445C5.19206 0.606445 5.30436 0.616211 5.4248 0.635742C5.5485 0.655273 5.66243 0.681315 5.7666 0.713867C5.85449 0.743164 5.98633 0.787109 6.16211 0.845703C6.34115 0.904297 6.53971 0.971029 6.75781 1.0459C6.97591 1.12077 7.19564 1.19727 7.41699 1.27539C7.63835 1.35026 7.83854 1.42025 8.01758 1.48535C8.19661 1.55046 8.33333 1.60417 8.42773 1.64648C8.72721 1.77018 8.9388 1.91829 9.0625 2.09082C9.18945 2.26335 9.25293 2.52051 9.25293 2.8623V6.41211C9.25293 6.84831 9.1862 7.23568 9.05273 7.57422C8.92253 7.91276 8.70931 8.23014 8.41309 8.52637C8.12012 8.81934 7.73112 9.11393 7.24609 9.41016C6.76107 9.70638 6.16374 10.0319 5.4541 10.3867C5.389 10.4193 5.32389 10.4437 5.25879 10.46C5.19694 10.4795 5.13997 10.4893 5.08789 10.4893ZM4.55078 7.73047C4.6582 7.73047 4.75586 7.70605 4.84375 7.65723C4.9349 7.60514 5.01302 7.5319 5.07812 7.4375L7.34863 3.9707C7.3877 3.90885 7.41862 3.84538 7.44141 3.78027C7.46745 3.71517 7.48047 3.65169 7.48047 3.58984C7.48047 3.4401 7.4235 3.31641 7.30957 3.21875C7.19889 3.12109 7.07031 3.07227 6.92383 3.07227C6.73177 3.07227 6.57064 3.17643 6.44043 3.38477L4.54102 6.40723L3.68652 5.3623C3.62142 5.28092 3.55306 5.22233 3.48145 5.18652C3.41309 5.15072 3.33333 5.13281 3.24219 5.13281C3.0957 5.13281 2.96875 5.18652 2.86133 5.29395C2.75391 5.39811 2.7002 5.52507 2.7002 5.6748C2.7002 5.74642 2.71322 5.81478 2.73926 5.87988C2.7653 5.94499 2.80599 6.01172 2.86133 6.08008L4.00391 7.44727C4.08203 7.54167 4.16504 7.61328 4.25293 7.66211C4.34082 7.70768 4.4401 7.73047 4.55078 7.73047Z"})}),Ng=(0,gt().wt)("globe4",{viewBox:"0 0 12 12",svg:(0,se.jsx)("path",{d:"M5.99512 10.5156C5.64355 10.5156 5.31315 10.4001 5.00391 10.1689C4.69792 9.94108 4.42773 9.62207 4.19336 9.21191C3.96224 8.7985 3.77995 8.31673 3.64648 7.7666C3.51302 7.21647 3.44629 6.6224 3.44629 5.98438C3.44629 5.3431 3.51302 4.7474 3.64648 4.19727C3.77995 3.64388 3.96224 3.16211 4.19336 2.75195C4.42448 2.33854 4.69466 2.01628 5.00391 1.78516C5.31315 1.55404 5.64355 1.43848 5.99512 1.43848C6.34993 1.43848 6.68197 1.55404 6.99121 1.78516C7.30046 2.01628 7.57064 2.33854 7.80176 2.75195C8.03613 3.16211 8.21842 3.64388 8.34863 4.19727C8.47884 4.7474 8.54395 5.3431 8.54395 5.98438C8.54395 6.6224 8.47721 7.21647 8.34375 7.7666C8.21354 8.31673 8.03125 8.7985 7.79688 9.21191C7.56576 9.62207 7.29557 9.94108 6.98633 10.1689C6.68034 10.4001 6.34993 10.5156 5.99512 10.5156ZM5.99512 2.15137C5.76725 2.15137 5.5459 2.25553 5.33105 2.46387C5.11947 2.6722 4.92904 2.95703 4.75977 3.31836C4.59375 3.67643 4.46191 4.08496 4.36426 4.54395C4.2666 5.00293 4.21777 5.48307 4.21777 5.98438C4.21777 6.48242 4.2666 6.95931 4.36426 7.41504C4.46191 7.87077 4.59375 8.27767 4.75977 8.63574C4.92904 8.99382 5.11947 9.27702 5.33105 9.48535C5.5459 9.69368 5.76725 9.79785 5.99512 9.79785C6.22624 9.79785 6.44759 9.69368 6.65918 9.48535C6.87402 9.27702 7.06445 8.99382 7.23047 8.63574C7.39974 8.27767 7.5332 7.87077 7.63086 7.41504C7.72852 6.95931 7.77734 6.48242 7.77734 5.98438C7.77734 5.48307 7.72852 5.00293 7.63086 4.54395C7.5332 4.08496 7.39974 3.67643 7.23047 3.31836C7.06445 2.95703 6.87402 2.6722 6.65918 2.46387C6.44759 2.25553 6.22624 2.15137 5.99512 2.15137ZM5.61914 1.50684H6.37598V10.4229H5.61914V1.50684ZM5.99512 7.47363C6.51921 7.47363 7.01562 7.51432 7.48438 7.5957C7.95312 7.67708 8.37142 7.79427 8.73926 7.94727C9.1071 8.10026 9.40007 8.2793 9.61816 8.48438L9.04199 8.96289C8.84017 8.8099 8.58464 8.67806 8.27539 8.56738C7.9694 8.45671 7.62272 8.3737 7.23535 8.31836C6.84798 8.25977 6.43457 8.23047 5.99512 8.23047C5.55892 8.23047 5.14714 8.25977 4.75977 8.31836C4.3724 8.3737 4.02409 8.45671 3.71484 8.56738C3.40885 8.67806 3.15332 8.8099 2.94824 8.96289L2.37207 8.48438C2.59342 8.2793 2.88802 8.10026 3.25586 7.94727C3.6237 7.79427 4.04199 7.67708 4.51074 7.5957C4.97949 7.51432 5.47428 7.47363 5.99512 7.47363ZM10.4189 5.59375V6.35059H1.57617V5.59375H10.4189ZM5.99512 4.5C5.47428 4.5 4.97949 4.45931 4.51074 4.37793C4.04199 4.29329 3.6237 4.17611 3.25586 4.02637C2.88802 3.87337 2.59342 3.69434 2.37207 3.48926L2.94824 3.00586C3.15332 3.16211 3.41048 3.29557 3.71973 3.40625C4.02897 3.51367 4.37728 3.59668 4.76465 3.65527C5.15202 3.71387 5.56217 3.74316 5.99512 3.74316C6.43457 3.74316 6.84798 3.71387 7.23535 3.65527C7.62272 3.59668 7.9694 3.51367 8.27539 3.40625C8.58464 3.29557 8.84017 3.16211 9.04199 3.00586L9.61816 3.48926C9.40007 3.69434 9.1071 3.87337 8.73926 4.02637C8.37142 4.17611 7.95312 4.29329 7.48438 4.37793C7.01562 4.45931 6.51921 4.5 5.99512 4.5ZM5.99512 11.1309C5.28874 11.1309 4.62467 10.9958 4.00293 10.7256C3.38118 10.4587 2.83268 10.0876 2.35742 9.6123C1.88216 9.1403 1.50944 8.59342 1.23926 7.97168C0.972331 7.34993 0.838867 6.68424 0.838867 5.97461C0.838867 5.26823 0.972331 4.60417 1.23926 3.98242C1.50944 3.36068 1.88053 2.81217 2.35254 2.33691C2.8278 1.86165 3.3763 1.49056 3.99805 1.22363C4.62305 0.953451 5.28874 0.818359 5.99512 0.818359C6.7015 0.818359 7.36556 0.953451 7.9873 1.22363C8.6123 1.49056 9.16081 1.86165 9.63281 2.33691C10.1081 2.81217 10.4808 3.36068 10.751 3.98242C11.0212 4.60417 11.1562 5.26823 11.1562 5.97461C11.1562 6.68424 11.0212 7.34993 10.751 7.97168C10.4808 8.59342 10.1081 9.1403 9.63281 9.6123C9.16081 10.0876 8.61393 10.4587 7.99219 10.7256C7.37044 10.9958 6.70475 11.1309 5.99512 11.1309ZM5.99512 10.1396C6.56803 10.1396 7.10514 10.0306 7.60645 9.8125C8.10775 9.5944 8.55046 9.29492 8.93457 8.91406C9.31868 8.52995 9.61816 8.08724 9.83301 7.58594C10.0511 7.08138 10.1602 6.54427 10.1602 5.97461C10.1602 5.40495 10.0511 4.86947 9.83301 4.36816C9.61816 3.86361 9.31868 3.4209 8.93457 3.04004C8.55046 2.65592 8.10612 2.35482 7.60156 2.13672C7.10026 1.91862 6.56478 1.80957 5.99512 1.80957C5.42546 1.80957 4.88835 1.91862 4.38379 2.13672C3.88249 2.35482 3.43978 2.65592 3.05566 3.04004C2.6748 3.4209 2.37533 3.86361 2.15723 4.36816C1.94238 4.86947 1.83496 5.40495 1.83496 5.97461C1.83496 6.54427 1.94238 7.08138 2.15723 7.58594C2.37533 8.08724 2.6748 8.52995 3.05566 8.91406C3.43978 9.29492 3.88249 9.5944 4.38379 9.8125C4.88835 10.0306 5.42546 10.1396 5.99512 10.1396Z"})});var Kg=()=>s(785606),Gg=()=>s(567865);const Vg=(0,m().YK)({infoTitle:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.title",defaultMessage:"Find teammates more easily by filtering to your workspace's email domains"},infoDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.description",defaultMessage:"Upgrade these guests to members for better collaboration and reduced page-by-page permissions."},emailDomainTooltip:{defaultMessage:"Your workspaceâ€™s email domains include allowed email domains, verified domains, and workspace owner email domains.",id:"spacePermissionsSettings.guestsTab.internalGuestBanner.tooltip"},overLimitTitle:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.title",defaultMessage:"Your workspace is over the {limit}-guest limit"},upsellDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.upselldescription",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, <upgradelink>upgrade your plan</upgradelink> or <saleslink>reach out to sales</saleslink>."},contactSalesDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.contactSales.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, <saleslink>reach out to sales</saleslink>."},salesAssistedDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.salesAssisted.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, reach out to your account manager."},nonAdminTooltip:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.nonAdmin.tooltip",defaultMessage:"New users can continue to be added as members. To resume adding guests, contact your workspace owner to upgrade or remove existing guests from your workspace."}}),Hg={warning_upsell:{iconGroup:zg().A,tint:"yellow",label:Vg.overLimitTitle,description:Vg.upsellDescription,tooltip:Vg.emailDomainTooltip},warning_contact_sales:{iconGroup:zg().A,tint:"yellow",label:Vg.overLimitTitle,description:Vg.contactSalesDescription,tooltip:Vg.emailDomainTooltip},warning_sales_assisted:{iconGroup:zg().A,tint:"yellow",label:Vg.overLimitTitle,description:Vg.salesAssistedDescription,tooltip:Vg.emailDomainTooltip},warning_nonadmin:{iconGroup:zg().A,tint:"yellow",label:Vg.overLimitTitle,tooltip:Vg.nonAdminTooltip},info:{iconGroup:_g().u,tint:"gray",label:Vg.infoTitle,description:Vg.infoDescription,tooltip:Vg.emailDomainTooltip}};function $g(e){let{spaceStore:t,internalDomains:s,domainFilterValues:i,setDomainFilterValues:n}=e;const a=(0,ag().r1)({spaceStore:t}),o=s.length>0;if(!o)return null;const r=o&&a,l=(0,se.jsx)(Yg,{spaceStore:t});return r||l?(0,se.jsxs)(ht().Y1,{padding:"16px 0px",gap:16,children:[l,r&&(0,se.jsx)(Qg,{internalDomains:s,domainFilterValues:i??[],setDomainFilterValues:n})]}):null}function Yg(e){let{spaceStore:t}=e;const s=function(e){let{spaceStore:t}=e;const s=(0,a().v3)(),i=(0,ag().r1)({spaceStore:t}),n=s.currentUser.id,o=t.id,r=(0,Rs()._X)({name:"internal_guests",spaceId:o,userId:n,amount:0});if(!r)return null;return(0,Ts().N9)(r,{available:()=>i?{...Hg.info,messageValues:{}}:null,unavailable:e=>{let{limit:t,upsell:s}=e;return i?"product"===s.type?{...Hg.warning_upsell,messageValues:{limit:t.total,saleslink:e=>(0,se.jsx)(di().A,{onClick:()=>(0,bt().lK)({initialQuestion:"manage_guests",openedFrom:"people_guest_limit_banner"}),children:e}),upgradelink:e=>(0,se.jsx)(di().A,{onClick:()=>{lt().A.setState({...lt().A.state,currentTab:"plans",defaultSubtab:void 0})},children:e})}}:"contact_sales"===s.type?{...Hg.warning_contact_sales,messageValues:{limit:t.total,saleslink:e=>(0,se.jsx)(di().A,{onClick:()=>(0,bt().lK)({initialQuestion:"manage_guests",openedFrom:"people_guest_limit_banner"}),children:e})}}:"contact_account_manager"===s.type?{...Hg.warning_sales_assisted,messageValues:{limit:t.total}}:(0,vs().HB)(s):{...Hg.warning_nonadmin,messageValues:{limit:t.total}}}})}({spaceStore:t});if(!s)return null;const i=(0,se.jsx)(pe().A,{style:{width:250},textWrap:!0,renderTooltip:()=>(0,se.jsx)(m().sA,{...s.tooltip}),originGap:6,placement:he().W.Bottom,alignment:he().C.Start,render:e=>(0,se.jsx)("div",{style:{paddingLeft:3,display:"inline-block",verticalAlign:"text-bottom"},...e,children:(0,Ra().$)({width:14})})});return(0,se.jsx)(Kg().I,{children:(0,se.jsx)(Lo().l,{iconGroup:s.iconGroup,display:"inline",tint:s.tint,label:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(m().sA,{...s.label,values:s.messageValues}),s.description?void 0:i]}),description:s.description&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(m().sA,{...s.description,values:s.messageValues}),i]})})})}function Qg(e){let{internalDomains:t,domainFilterValues:s,setDomainFilterValues:i}=e;const n=[...t.map((e=>({key:e.url,value:`${e.url}`,title:Jg({domain:`${e.url}`})}))),{key:"other",value:"other",title:Jg({domain:"other"})}];return(0,se.jsx)(Gg().uI,{pillIcon:qg().b,pillTitle:s?(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.guestsTab.internalDomainFilter.filtered",defaultMessage:"Email domain: {domainFilter}",values:{domainFilter:s.join(", ")}}):(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.guestsTab.internalDomainFilter.placeholder",defaultMessage:"Email domain"}),selectedItems:s,setSelectedItems:e=>{i(e)},items:n})}function Jg(e){let{domain:t}=e;return(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:["other"===t?(0,se.jsx)(m().sA,{defaultMessage:"Other",id:"spacePermissionsSettings.guestsTab.internalDomainFilter.other"}):`@${t}`,(0,se.jsx)("div",{style:{paddingLeft:5},children:"other"===t?Ng({width:14}):Fg({width:14})})]})}var Xg=()=>s(973633),Zg=()=>s(196131),ep=()=>s(920773);function tp(e){let{request:t,shouldDisableInteraction:s,requestType:n,handleApprove:o,handleDecline:r}=e;const d=function(e){let{shouldDisableInteraction:t}=e;return(0,l().IS)((e=>({approveButton:{background:e.outlineBlueButtonHoveredBackground,color:e.blueColor,fontWeight:510,fontSize:14,borderRadius:4,paddingLeft:10,paddingRight:10},declineButton:{marginRight:10,borderRadius:4,paddingLeft:10,paddingRight:10,color:e.text.secondary},container:{opacity:t?.5:1,display:"flex",width:"100%",justifyContent:"flex-end"}})),[t])}({shouldDisableInteraction:s}),[c,u]=(0,i.useState)(!1),g=(0,a().v3)(),p=(0,i.useCallback)((()=>{eg().jR(g,{from:`${n}_request`,button_name:"decline"}),r(t)}),[g,n,t,r]),f=(0,i.useCallback)((async()=>{u(!0),eg().jR(g,{from:`${n}_request`,button_name:"approve"}),await o(t),u(!1)}),[g,t,n,o]);return(0,se.jsxs)("div",{style:d.container,children:[(0,se.jsx)("div",{children:(0,se.jsx)(Rt().p,{style:d.declineButton,onClick:p,disabled:s,children:(0,se.jsx)(m().sA,{id:"spaceSettings.peopleSection.requestsTable.Decline",defaultMessage:"Decline"})})}),(0,se.jsx)("div",{children:(0,se.jsx)(Rt().p,{style:d.approveButton,onClick:f,isLoading:c,disabled:s,children:(0,se.jsx)(m().sA,{id:"spaceSettings.peopleSection.requestsTable.approve",defaultMessage:"Approve"})})})]})}function sp(e){const{isModalOpen:t,handleClickDecline:s,handleClickDismiss:n,requestType:o,requests:l}=e,d=function(e,t,s){const n=(0,a().v3)();return(0,i.useCallback)((()=>{s(),eg().jR(n,{from:"member"===e?"member_request":"guest_request",button_name:"dismiss_in_dialog",count:t.length})}),[s,n,t,e])}(o,l,n),c=(0,m().tz)(),u=(0,r().K8)((()=>{var e;return null===(e=l[0])||void 0===e||null===(e=e.createdByActorsWithReason[0])||void 0===e?void 0:e.actor.getDisplayName(c)}),[l,c]),g=(0,r().K8)((()=>{var e;return null===(e=l[0])||void 0===e?void 0:e.forActor.email}),[l]);return 0===l.length?null:(0,se.jsx)(vg,{isModalOpen:t,handleDismiss:d,handleConfirm:()=>s(l),title:(0,se.jsx)(m().sA,{id:"RequestBulkDeclineConfirmationDialog.title",defaultMessage:"Decline {numberOfRequests, plural, one {{requestType} request for {firstRequestEmail}} other {{numberOfRequests} {requestType} requests}}?",values:{numberOfRequests:l.length,requestType:o,firstRequestEmail:g}}),description:(0,se.jsx)(m().sA,{id:"RequestBulkDeclineConfirmationDialog.description",defaultMessage:"{numberOfRequests, plural, one {To add them as a {requestType} in the future, {inviter} must resubmit a request, or an admin must invite them} other {Requests must be resubmitted, or an admin must add them as {isMemberRequest, select, true {members} other {guests}} in the future}}.",values:{numberOfRequests:l.length,requestType:o,isMemberRequest:"member"===o,inviter:u}}),ctaText:(0,se.jsx)(m().sA,{id:"RequestBulkDeclineConfirmationDialog.decline",defaultMessage:"Decline"})})}function ip(e){let{createdByActorsWithReason:t,latestRequestTime:s}=e;return(0,se.jsx)("div",{style:{width:241,maxHeight:600,overflowY:"auto",whiteSpace:"pre-wrap",padding:"12px 12px 12px 12px"},children:t.map((e=>(0,se.jsx)(np,{createdByActorWithReason:e,latestRequestTime:s},e.actor.id)))})}function np(e){let{createdByActorWithReason:t,latestRequestTime:s}=e;const{requestorName:i,reason:n,actor:a,styles:o}=function(e){let{createdByActorWithReason:t}=e;const{actor:s,reason:i}=t,n=(0,m().tz)(),a=(0,r().K8)((()=>s.getDisplayName(n)),[n,s]),o=(0,l().IS)((e=>({avatar:{width:24,height:24},metadata:{display:"flex",alignItems:"center",gap:6,flex:"1 0 0"},userName:{textOverflow:"ellipsis",fontSize:14,fontWeight:510,overflow:"hidden",width:100,whiteSpace:"nowrap"},timestamp:{color:e.text.tertiary,textAlign:"right",fontSize:12,fontWeight:400,lineHeight:"15px"},header:{display:"flex",alignItems:"center",gap:10},reason:{paddingLeft:30,fontSize:14,fontWeight:400,color:e.text.primary,letterSpacing:"-0.154px",display:"inline-block",overflowWrap:"break-word",inlineSize:200},noReason:{color:e.text.quaternary}})),[]);return{requestorName:a,reason:i,actor:s,styles:o}}({createdByActorWithReason:t});return(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{style:o.header,children:[(0,se.jsx)(Sa().A,{hasTooltip:!0,userValue:a,style:o.avatar,size:24,avatarShouldShowShadow:!1}),(0,se.jsxs)("div",{style:o.metadata,children:[(0,se.jsx)("div",{style:o.userName,children:i}),(0,se.jsx)(me().A,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:o.timestamp,children:(0,So().nl)(s)})]})]}),(0,se.jsx)("span",{style:o.reason,children:n||(0,se.jsx)("div",{style:o.noReason,children:(0,se.jsx)(m().sA,{id:"requestReasonContent.noReason",defaultMessage:"No message"})})})]})}function ap(e){let{request:t,shouldDisableInteraction:s,requestType:i}=e;const{styles:n,firstRequestorName:o,numberOfRequestors:d}=function(e){let{request:t,shouldDisableInteraction:s}=e;const i=(0,l().IS)((e=>({firstRequestorName:{color:e.text.secondary,opacity:s?.5:1,maxWidth:118,...h().RC},buttonSuffix:{color:e.text.tertiary,paddingLeft:4},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[s]),n=(0,a().v3)(),o=(0,m().tz)(),d=(0,r().K8)((()=>{if(0===t.createdByActorsWithReason.length)return;return new(ee().LU)(n,{table:B().oo,id:t.createdByActorsWithReason[0].actor.id}).getDisplayName(o)}),[n,o,t.createdByActorsWithReason]);return{styles:i,firstRequestorName:d,numberOfRequestors:t.createdByActorsWithReason?t.createdByActorsWithReason.length:0}}({request:t,shouldDisableInteraction:s}),c=(0,a().v3)();return void 0===o||0===d?null:(0,se.jsx)(eo().Ay,{popupType:eo().z7.Popup,onClick:()=>{eg().jR(c,{from:`${i}_request`,button_name:"open_requested_by"})},renderOrigin:e=>(0,se.jsx)(Rt().p,{...e,disabled:s,children:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("span",{style:n.firstRequestorName,title:o,children:o}),(0,se.jsx)("span",{style:n.buttonSuffix,children:d>1?(0,se.jsxs)("div",{children:["+",d-1]}):null}),(0,od().b)(n.chevron)]})}),render:()=>(0,se.jsx)(ip,{createdByActorsWithReason:t.createdByActorsWithReason,latestRequestTime:t.accessRequest.created_time})})}function op(e){let{request:t,spaceStore:s,shouldDisableInteraction:i}=e;const{accessRequest:n,forActor:a}=t,o=function(e){let{accessRequest:t}=e;return(0,r().K8)((()=>t.isGuestInviteRequest()?t.getAttributes().permission_records_and_roles.map((e=>e.id)):[]),[t])}({accessRequest:n});return(0,se.jsx)(Tg,{pageIds:o,guestUserId:a.id,shouldDisableInteraction:i,from:"guest_request"})}var rp=()=>s(854150),lp=()=>s(632709),dp=()=>s(848237),cp=()=>s(898808),up=()=>s(452558),gp=()=>s(419357);const pp=(0,m().YK)({filterTeams:{defaultMessage:"Filter teamspacesâ€¦",id:"teamsDropdownForMember.filterForTeams.placeholder"},privateTeamspace:{defaultMessage:"Private teamspace",id:"teamsDropdownForMember.privateTeamspace"}});function mp(e){const t=(0,a().v3)(),[s,n]=(0,i.useState)(""),o=(0,i.useCallback)((e=>dp().F2({environment:t,teamId:e,tab:lp().p.Members,from:"teams_dropdown_space_settings_people"})),[t]),d=(0,l().IS)((e=>({teamName:{color:e.text.primary,fontSize:14},teamMemberCount:{color:e.text.secondary,fontSize:12}})),[]),c=(0,r().K8)((()=>[{key:"teams for member",render:e=>(0,se.jsx)(Vn().A,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName()??L().A.formatMessage(pp.privateTeamspace),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var s;return(0,se.jsx)(qn().A,{style:{padding:4},textWrapperStyle:{marginLeft:0,marginRight:0},title:(0,se.jsxs)("div",{style:{display:"flex",padding:"4px 6px 4px 8px",alignItems:"flex-start",gap:8,alignSelf:"stretch"},children:[(0,se.jsx)(cp().x,{disabled:!0,store:e,size:20,style:{borderRadius:4}}),(0,se.jsxs)("div",{children:[(0,se.jsx)("div",{style:d.teamName,children:e.getName()??L().A.formatMessage(pp.privateTeamspace)}),(0,se.jsx)("div",{style:d.teamMemberCount,children:(0,se.jsx)(m().sA,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:(null===(s=(0,Cs().PF)(e))||void 0===s?void 0:s.memberCountWithGuests)??0}})})]})]}),disabled:!Boolean(e.getName()),inline:!0,...t})},action:()=>{o(e.id)},closeParentMenu:!1};return t}))}]),[e.teamStores,o,d.teamMemberCount,d.teamName]),u=s,g=(0,se.jsx)(Vn().A,{isInput:!0,children:(0,se.jsx)(gp().Ay,{value:u,onChange:(0,i.useCallback)((e=>{n(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:L().A.formatMessage(pp.filterTeams)})}),p={menuType:On().gu.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?g:void 0};return(0,se.jsx)(Fn().A,{...p,children:(0,se.jsx)(up().A,{filter:u,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:void 0,sections:c})})}function fp(e){let{from:t,teamStores:s}=e;const{styles:n,onClickButton:o}=function(e){let{from:t}=e;const s=(0,l().IS)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor},teamspaceName:{color:e.text.secondary,maxWidth:70,...h().RC},teamspaceNameSuffix:{color:e.text.tertiary,paddingLeft:4}})),[]),n=(0,a().v3)(),o=(0,i.useCallback)((()=>{eg().jR(n,{from:t,button_name:"open_teamspaces"})}),[n,t]);return{styles:s,onClickButton:o}}({from:t}),r=s.length;return(0,se.jsx)(eo().Ay,{popupType:eo().z7.Popup,onClick:o,renderOrigin:e=>(0,se.jsx)(Rt().p,{disabled:0===r,style:0===r?n.noTeams:n.button,...e,children:0===r?(0,se.jsx)(m().sA,{id:"teamsDropdownForMember.teamsCountNone.label",defaultMessage:"No access"}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("span",{style:n.teamspaceName,title:s[0].getName(),children:s[0].getName()}),(0,se.jsx)("span",{style:n.teamspaceNameSuffix,children:r>1?(0,se.jsxs)("div",{children:["+",r-1]}):null}),(0,od().b)(n.chevron)]})}),render:()=>(0,se.jsx)(mp,{teamStores:s})})}function hp(e){let{spaceStore:t,request:s}=e;const{teamStores:i}=function(e){let{request:{accessRequest:t},spaceStore:s}=e;const i=(0,r().K8)((()=>{var e,i;const n=nc().A.state.teams.filter((e=>e.isDefault())),a=null===(e=t.getAttributes())||void 0===e?void 0:e.origin_table,o=null===(i=t.getAttributes())||void 0===i?void 0:i.origin_id;if(a&&o){const e=ee().h4.createChildStore(s,{table:rp().yK,id:o});n.includes(e)||n.push(e)}return n}),[t,s]);return{teamStores:i}}({request:s,spaceStore:t});return(0,se.jsx)(fp,{teamStores:i,from:"member_request"})}function Sp(e){let{request:t,spaceStore:s}=e;const{relativeDate:i,email:n,userStore:a,styles:o}=function(e){let{request:{accessRequest:t,forActor:s},spaceStore:i}=e;const n=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",fontSize:h().J.UIRegular.desktop,gap:10,flex:"1 0 0",maxWidth:50},userAvatar:{},title:{height:17,alignSelf:"stretch",fontSize:h().J.UIRegular.desktop,fontStyle:"normal",fontWeight:510,lineHeight:"18px",maxWidth:160,...h().RC},subtitle:{height:17,alignSelf:"stretch",fontSize:h().J.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px",color:e.text.secondary,maxWidth:160,...h().RC}})),[]),a=ee().LU.createChildStore(i,{table:B().oo,id:s.id}),{email:o}=(0,r().K8)((()=>({email:a.getEmail()})),[a]),d=(0,m().tz)(),c=(0,r().K8)((()=>t.created_time),[t]),u=I().KQ(c,(0,$().P)()),g=(0,mo().ZF)({value:u,date_format:"relative",userTimeZone:(0,$().P)(),intl:d,allowRelativeDates:!0});return{email:o,styles:n,userStore:a,relativeDate:g}}({request:t,spaceStore:s});return(0,se.jsxs)("div",{style:o.container,children:[(0,se.jsx)(Sa().A,{style:o.userAvatar,userStore:a,size:28}),(0,se.jsxs)("div",{children:[(0,se.jsx)("div",{style:o.title,title:n,children:n}),(0,se.jsx)("div",{style:o.subtitle,title:i,children:i})]})]})}function xp(e){let{spaceStore:t,requests:s,requestType:n,domainFilterValues:o,internalDomains:d}=e;const c=(0,a().v3)(),[u,g]=(0,i.useState)(Pg),[p,h]=(0,i.useState)({column:vp,sortAscending:!0}),S=(0,r().K8)((()=>Rg().A.state.searchQuery),[]),[x,v]=(0,i.useState)([]),{rows:y,hasMore:b}=function(e){let{spaceStore:t,requestType:s,requests:i,searchQuery:n,domainFilters:a=[],internalDomains:o=[],limit:l,selectedRowIds:d,sortState:c}=e;const u=(0,r().K8)((()=>i.map((e=>{const i=ee().LU.createChildStore(t,{table:B().oo,id:e.forActor.id});return{id:e.accessRequest.id,spaceStore:t,isClickable:!1,request:e,requestType:s,email:i.getEmail(),shouldDisableInteraction:d.includes(e.accessRequest.id)}}))),[t,s,i,d]),g=(0,f().oE)(a),p=u.filter((e=>{var t;const s=e.email?(0,kl().zN)(e.email):void 0,i=(0,Zg().C7)(e.email,o);return!(n&&(null===(t=e.email)||void 0===t||!t.includes(n)))&&(!(g.length>0)||g.some((e=>"other"===e?!i:s===e)))})),m=function(e,t){let{sortAscending:s}=t;const i=(0,f().Ul)(e,(e=>e.email));s||i.reverse();return i}(p,c),h=m.length>l;return{rows:m.slice(0,l),hasMore:h}}({spaceStore:t,requestType:n,requests:s,domainFilters:(0,f().oE)(o),internalDomains:d,searchQuery:S,limit:u,sortState:p,selectedRowIds:x}),j=(0,i.useMemo)((()=>s.filter((e=>x.includes(e.accessRequest.id)))),[s,x]),[A,C]=(0,i.useState)(!1),[w,M]=(0,i.useState)(void 0),T=!y.some((e=>x.includes(e.id))),k=(0,i.useCallback)((async()=>{C(!0),eg().jR(c,{from:`${n}_request`,button_name:"bulk_approve",count:j.length});const e=await Cp({environment:c,spaceStore:t,requests:j.map((e=>e.accessRequest)),requestType:n,status:"approved"});C(!1),e&&v([])}),[c,t,j,n]),I=(0,i.useCallback)((()=>{eg().jR(c,{from:`${n}_request`,button_name:"bulk_decline",count:j.length}),M(j)}),[c,n,M,j]),D=(0,i.useCallback)((()=>M(void 0)),[M]),P=function(e){let{requestType:t,onClickApprove:s,onClickDecline:i}=e;return"member"===t?[vp,yp,jp,Ap({onClickApprove:s,onClickDecline:i})]:[vp,bp,jp,Ap({onClickApprove:s,onClickDecline:i})]}({requestType:n,onClickApprove:e=>Cp({environment:c,spaceStore:t,requests:[e.accessRequest],requestType:n,status:"approved"}),onClickDecline:e=>M([e])}),R=(0,l().IS)((e=>({container:{paddingBottom:30},headerContainer:{display:"flex",justifyContent:"space-between"},titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,minHeight:30,paddingTop:10},titleNumber:{color:e.text.tertiary},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},actionLeftButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},buttonContainerDecline:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.secondary},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonDivider:{width:1,background:e.stroke.secondary},actionRightButton:{borderRadius:"0px 4px 4px 0px",paddingLeft:0,paddingRight:0,height:30},noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},noRowText:{color:e.text.secondary,fontSize:14,fontWeight:400,textAlign:"center"}})),[]),_=function(e){return(0,l().IS)((t=>({...(0,ue().rC)({columnRenderInfo:e,theme:t,containerMarginTop:0})})),[e])}(P);return 0===s.length?null:(0,se.jsxs)("div",{style:R.container,children:[(0,se.jsxs)("div",{style:R.headerContainer,children:[(0,se.jsxs)("div",{style:R.titleContainer,children:[(0,se.jsx)("div",{children:(0,se.jsx)(m().sA,{id:"peopleSectionMembersTab.memberRequests.title",defaultMessage:"Requests"})}),(0,se.jsx)("span",{style:R.titleNumber,children:s.length})]}),x.length>0&&!T&&(0,se.jsxs)("div",{style:R.actionsContainer,children:[(0,se.jsx)(ep().p,{style:R.actionLeftButton,onClick:k,isLoading:A,children:(0,se.jsxs)("div",{style:R.buttonContainerApprove,children:[(0,se.jsx)("div",{style:R.buttonIcon,children:(0,Xg().P)({width:20,height:20})}),(0,se.jsx)("div",{style:R.buttonText,children:(0,se.jsx)(m().sA,{id:"spaceSettings.peopleSection.requestsTable.bulkApprove",defaultMessage:"Approve {numberOfRequests, plural, one {1 request} other {{numberOfRequests} requests}}",values:{numberOfRequests:x.length}})})]})}),(0,se.jsx)("div",{style:R.buttonDivider}),(0,se.jsx)(ep().p,{style:R.actionRightButton,onClick:I,isLoading:!1,children:(0,se.jsxs)("div",{style:R.buttonContainerDecline,children:[(0,se.jsx)("div",{style:{...R.buttonIcon,paddingTop:3},children:xg({width:20,height:20})}),(0,se.jsx)("div",{style:R.buttonText,children:(0,se.jsx)(m().sA,{id:"spaceSettings.peopleSection.requestsTable.bulkDecline",defaultMessage:"Decline"})})]})})]})]}),(0,se.jsx)("div",{style:{marginTop:4},children:(0,se.jsx)(ue().WE,{allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:P,rows:y,showRowBorders:!0,hideHeaderRowPadding:!0,sortState:p,onSortStateChanged:h,renderNoRowsComponent:()=>(0,se.jsx)("div",{style:R.noRowContainer,children:(0,se.jsx)("div",{style:R.noRowText,children:(0,se.jsx)(m().sA,{id:"peopleSectionRequestTable.emptySearch",defaultMessage:"No search results"})})}),styles:_,getStyleForRow:e=>{if(e.shouldDisableInteraction)return{backgroundColor:"rgba(35, 131, 226, 0.07)"}},loadMoreMethod:b?{type:"button",onLoadMore:()=>g(u+Pg)}:void 0,multiselect:s.length>0?{header:{isDisabled:0===y.length,isSelected:x.length>0&&x.length===y.length,onClick:()=>{x.length===y.length?(v([]),eg().Y1(c,{from:`${n}_request`,action:"deselect_all",row_count:x.length})):(v(y.map((e=>e.id))),eg().Y1(c,{from:`${n}_request`,action:"select_all",row_count:y.length}))}},row:{getDisabledState:e=>!1,getSelectedState:e=>x.includes(e.id),onClick:e=>{v((t=>t.includes(e.id)?(eg().Y1(c,{from:`${n}_request`,action:"deselect_row",row_count:1}),t.filter((t=>t!==e.id))):(eg().Y1(c,{from:`${n}_request`,action:"select_row",row_count:1}),t.concat(e.id))))}}}:void 0})}),(0,se.jsx)(sp,{isModalOpen:(0,vs().O9)(w),requestType:n,requests:w??[],handleClickDecline:async e=>{await Cp({environment:c,spaceStore:t,requests:e.map((e=>e.accessRequest)),requestType:n,status:"rejected"})&&v([]),M(void 0)},handleClickDismiss:D})]})}const vp={id:"user",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m().sA,{id:"peopleSectionRequestsTable.user",defaultMessage:"User"})}),renderCell:e=>(0,se.jsx)(Sp,{request:e.request,spaceStore:e.spaceStore}),widthData:{width:219},sortable:!0},yp={id:"teamspaces",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,se.jsx)(m().sA,{id:"peopleSectionRequestsTable.teamspaces",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,se.jsx)(hp,{spaceStore:e.spaceStore,request:e.request}),widthData:{width:175},sortable:!1},bp={id:"pages",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14,minWidth:175,textAlign:"left"},children:(0,se.jsx)(m().sA,{id:"peopleSectionRequestsTable.pages",defaultMessage:"Access"})}),renderCell:e=>(0,se.jsx)(op,{request:e.request,spaceStore:e.spaceStore,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{width:175},sortable:!1},jp={id:"requestBy",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14,minWidth:160,textAlign:"left"},children:(0,se.jsx)(m().sA,{id:"peopleSectionRequestsTable.requestBy",defaultMessage:"Requested by"})}),renderCell:e=>(0,se.jsx)(ap,{request:e.request,shouldDisableInteraction:e.shouldDisableInteraction,requestType:e.requestType}),widthData:{width:120},sortable:!1};function Ap(e){let{onClickApprove:t,onClickDecline:s}=e;return{id:"actions",headerTitle:(0,se.jsx)("div",{style:{minWidth:155}}),renderCell:e=>(0,se.jsx)(tp,{request:e.request,shouldDisableInteraction:e.shouldDisableInteraction,requestType:e.requestType,handleApprove:t,handleDecline:s}),widthData:{width:100},sortable:!1}}async function Cp(e){let t,{environment:s,spaceStore:i,requests:n,requestType:a,status:o}=e;if(0===n.length)return!0;if("member"===a){const e=n.filter((e=>"guest_invite_request"!==e.getType())),a=n.filter((e=>"guest_invite_request"===e.getType())),r=await S().p4({environment:s,store:i,requests:e,status:o,from:"requests_center"}),l=await S().KB({environment:s,store:i,requests:a,status:o,from:"requests_center"});t={failedUsers:r.failedUsers.concat(l.failedUsers),resolvedUsers:r.resolvedUsers.concat(l.resolvedUsers)}}else"guest"===a?t=await S().aV({environment:s,requests:n,status:o,from:"requests_center"}):(0,vs().HB)(a);const r=function(e){let{requestType:t,result:{resolvedUsers:s,failedUsers:i},status:n}=e;if("guest"===t&&"approved"===n&&s.length>0)return{label:(0,se.jsx)(m().sA,{id:"PeopleSectionRequestsTable.bulkApproveToast.guests",defaultMessage:"Approved {numberOfSuccesses, plural, one {guest request for {userEmail}} other {{numberOfSuccesses} guest requests}}",values:{numberOfSuccesses:s.length,userEmail:s[0].getEmail()}})};if("guest"===t&&"approved"===n&&i.length>0)return{label:(0,se.jsx)(m().sA,{id:"PeopleSectionRequestsTable.bulkApproveToast.guests.failed",defaultMessage:"Failed approve {numberOfRequests, plural, one {guest request for {userEmail}} other {{numberOfRequests} guest requests}}, please try again.",values:{numberOfRequests:i.length,userEmail:i[0].getEmail()}})};if("guest"===t&&"rejected"===n&&s.length>0)return{label:(0,se.jsx)(m().sA,{id:"PeopleSectionRequestsTable.bulkDeclineToast.guests.success",defaultMessage:"Declined {numberOfSuccesses, plural, one {guest request for {userEmail}} other {{numberOfSuccesses} guest requests}}",values:{numberOfSuccesses:s.length,userEmail:s[0].getEmail()}})};if("guest"===t&&"rejected"===n&&i.length>0)return{label:(0,se.jsx)(m().sA,{id:"PeopleSectionRequestsTable.bulkDeclineToast.guests.failed",defaultMessage:"Failed decline {numberOfSuccesses, plural, one {guest request for {userEmail}} other {{numberOfSuccesses} guest requests}}, please try again.",values:{numberOfSuccesses:i.length,userEmail:i[0].getEmail()}})};if("member"===t&&"approved"===n&&s.length>0)return{label:(0,se.jsx)(m().sA,{id:"PeopleSectionRequestsTable.bulkApproveToast.members.success",defaultMessage:"Approved {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}",values:{numberOfRequests:s.length,userEmail:s[0].getEmail()}})};if("member"===t&&"approved"===n&&i.length>0)return{label:(0,se.jsx)(m().sA,{id:"PeopleSectionRequestsTable.bulkApproveToast.members.failed",defaultMessage:"Failed to approve {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}, please try again.",values:{numberOfRequests:i.length,userEmail:i[0].getEmail()}})};if("member"===t&&"rejected"===n&&s.length>0)return{label:(0,se.jsx)(m().sA,{id:"PeopleSectionRequestsTable.bulkDeclineToast.members.success",defaultMessage:"Declined {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}",values:{numberOfRequests:s.length,userEmail:s[0].getEmail()}})};if("member"===t&&"rejected"===n&&i.length>0)return{label:(0,se.jsx)(m().sA,{id:"PeopleSectionRequestsTable.bulkDeclineToast.members.failed",defaultMessage:"Failed to decline {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}, please try again.",values:{numberOfRequests:i.length,userEmail:i[0].getEmail()}})};return}({requestType:a,result:t,status:o});return r&&za().D6(r),0===t.failedUsers.length}function wp(e){let{spaceStore:t}=e;const[s,n]=(0,i.useState)(),o=(0,a().v3)(),l=(0,r().K8)((()=>(0,Kt().r8)()),[]),d=(0,r().K8)((()=>{const e=ug().A.getData(o,{spaceId:t.id});return e?e.filter((e=>e.hasGuests)).map((e=>e.domain)):[]}),[o,t]),c=(0,ns().fC)({spaceStore:t}),u=(0,ag().r1)({spaceStore:t}),g=(0,ns().e6)({spaceStore:t,requestType:"guest"});return(0,ns().Wz)({requestType:"guest",spaceStore:t}),(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)($g,{spaceStore:t,internalDomains:d,domainFilterValues:s,setDomainFilterValues:n}),c&&u&&(0,se.jsx)(xp,{requests:g,spaceStore:t,requestType:"guest",domainFilterValues:s,internalDomains:d}),(0,se.jsx)(Ug,{guests:l,spaceStore:t,domainFilterValues:s??[],internalDomains:d})]})}var Mp=()=>s(569892),Tp=()=>s(68263),kp=()=>s(763392);function Ip(e){let{user:t,spaceStore:s,shouldDisableAction:n}=e;const{styles:o,handleRemoveMemberFromWorkspace:d,environment:c,isCurrentUser:u}=function(e){let{user:t,spaceStore:s}=e;const n=(0,l().IS)((e=>({container:{width:"100%",display:"flex",justifyContent:"flex-end"},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:20,height:20,fill:e.icon.secondary},upgradeButton:{},removeMenuDivider:{borderTop:e.stroke.secondary},removeButton:{color:gg().l8[e.mode].red},upgradeIcon:{width:17,height:17}})),[]),o=(0,a().v3)(),d=(0,i.useCallback)((async()=>{const{currentUserSettingsStore:e}=Je().default.state;return e?await(0,kp().Vr)({user:t,spaceStore:s,environment:o,userSettingStore:e}):()=>{}}),[s,o,t]),c=(0,r().K8)((()=>{var e;return(null===(e=Je().default.state.currentUserStore)||void 0===e?void 0:e.id)===t.userId}),[t]);return{styles:n,handleRemoveMemberFromWorkspace:d,environment:o,isCurrentUser:c}}({user:t,spaceStore:s}),g=new(Xa().A);return(0,se.jsx)("div",{style:o.container,children:(0,se.jsx)(eo().Ay,{buttonPopupStore:g,popupType:eo().z7.Popup,renderOrigin:e=>(0,se.jsx)(Rt().p,{style:o.button,...e,children:(0,se.jsx)(se.Fragment,{children:(0,mg().L)(o.buttonIcon)})}),onClick:()=>{eg().jR(c,{from:"member",button_name:"actions"})},disabled:n,render:()=>(0,se.jsx)("div",{children:(0,se.jsx)(Kn().Ay,{type:Kn().Oh.Vertical,initialFocus:void 0,sections:[{key:"remove",render:e=>(0,se.jsx)(Vn().A,{...e,style:o.removeMenuDivider}),items:[{key:"remove",render:e=>(0,se.jsx)(qn().A,{...e,buttonStyle:o.removeButton,icon:(0,Ba()._)(o.upgradeIcon),title:(0,se.jsx)(m().sA,{id:"peopleSectionmembersTab.removeMember",defaultMessage:"{isCurrentUser, select, true {Leave workspace} other {Remove from workspace}} ",values:{isCurrentUser:u}})}),action:async()=>{g.setState({open:!1}),await d(),eg().jR(c,{from:"member",button_name:"remove"})}}]}]})})})})}var Dp=()=>s(698449);function Pp(e){let{shouldShowSearchHeader:t,sections:s,filterPlaceholder:n}=e;const o=(0,a().v3)(),[r,l]=(0,i.useState)(""),d=r,c=(0,se.jsx)(Vn().A,{isInput:!0,children:(0,se.jsx)(gp().Ay,{value:d,onChange:(0,i.useCallback)((e=>{l(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:n&&L().A.formatMessage(n)})}),u={menuType:On().gu.Popup,maxWidth:350,maxHeight:300,header:t?c:void 0};return(0,se.jsx)(Fn().A,{...u,children:(0,se.jsx)(up().A,{filter:d,context:{blocks:[],environment:o,publicEditMode:void 0},initialFocus:0,sections:s})})}const Rp=(0,m().YK)({filterGroups:{defaultMessage:"Filter groups...",id:"GroupPopupContent.filterGroups"}});function _p(e){let{groups:t,spaceStore:s,spacePermissionsSettingsStore:i}=e;const n=t.map((e=>({group:e.group,numberOfGroupMembers:e.memberCount}))),a=(0,l().IS)((e=>({buttonTitle:{display:"flex",padding:"4px 6px 4px 8px",alignItems:"flex-start",gap:8,alignSelf:"stretch"},groupName:{color:e.text.primary,fontSize:14},groupMemberCount:{color:e.text.secondary,fontSize:12}})),[]),o=t.length>5;return(0,se.jsx)(Pp,{shouldShowSearchHeader:o,sections:[{key:"groups for member",render:e=>(0,se.jsx)(Vn().A,{...e}),actions:n.map((e=>{const{group:t,numberOfGroupMembers:n}=e;return{key:t.group_id,displayName:t.name,analyticsName:t.name??"unknown group",searchName:t.name,render:e=>(0,se.jsx)(qn().A,{style:{padding:4},textWrapperStyle:{marginLeft:0,marginRight:0},title:(0,se.jsxs)("div",{style:a.buttonTitle,children:[(0,se.jsx)(Gn().A,{disabled:!0,bucket:"public",icon:t.icon?{pointer:s.pointer,icon:t.icon}:void 0,size:20,isEmptyPage:!1,title:t.name}),(0,se.jsxs)("div",{children:[(0,se.jsx)("div",{style:a.groupName,children:t.name}),(0,se.jsx)("div",{style:a.groupMemberCount,children:(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:n}})})]})]}),...e}),action:()=>{i.setState({...i.state,currentTab:ei().d.Groups})},closeParentMenu:!1}}))}],filterPlaceholder:Rp.filterGroups})}function Bp(e){let{user:t,spaceStore:s,spacePermissionsSettingsStore:n,spacePermissionGroupIds:o}=e;const{styles:d,groups:c,numberOfGroups:u,firstGroupName:g,onClick:p}=function(e){let{spacePermissionGroupIds:t}=e;const s=(0,a().v3)(),n=(0,i.useCallback)((()=>{eg().jR(s,{from:"member",button_name:"open_groups"})}),[s]),o=(0,l().IS)((e=>({button:{marginRight:8},noGroups:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor},noneGroupText:{color:e.text.tertiary},groupNameText:{color:e.text.secondary,maxWidth:100,...h().RC},groupNumberText:{color:e.text.secondary}})),[]),d=(0,m().tz)(),c=(0,r().K8)((()=>f().oE(t.map((e=>tg().A.state.permissionGroupsAndMemberCounts.find((t=>t.group.group_id===e)))))),[t]),u=c.length,g=u>0?(0,Dp().Pf)({groupName:c[0].group.name,intl:d}):void 0;return{styles:o,groups:c,numberOfGroups:u,firstGroupName:g,onClick:n}}({spacePermissionGroupIds:o});return(0,se.jsx)(eo().Ay,{popupType:eo().z7.Popup,onClick:p,renderOrigin:e=>(0,se.jsx)(Rt().p,{disabled:0===u,style:0===u?d.noGroups:d.button,...e,children:0===u?(0,se.jsx)("span",{style:d.noneGroupText,children:(0,se.jsx)(m().sA,{id:"userGroupsCell.noGroups",defaultMessage:"None"})}):1===u?(0,se.jsx)("span",{style:d.groupNameText,title:g,children:g}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:d.groupNumberText,children:u}),(0,od().b)(d.chevron)]})}),render:()=>(0,se.jsx)(_p,{groups:c,spaceStore:s,spacePermissionsSettingsStore:n})})}var Up=()=>s(912913);function Ep(e){let{user:t,spaceStore:s,maxWidth:n,shouldShowRemoveUserInRoleDropdown:o}=e;const d=(0,l().IS)((e=>({button:{color:e.text.secondary,maxWidth:n}})),[n]),c=(0,a().v3)(),{isPermissionSelectDisabled:u,currentUserId:g}=(0,r().K8)((()=>{let e=!0;return(s.canAdmin()||s.canEditMembership()&&(Tp().NB(t.role)||t.userId===c.currentUser.id))&&(e=!1),{isPermissionSelectDisabled:e,currentUserId:c.currentUser.id}}),[s,c,t.role,t.userId]),p=(0,r().K8)((()=>Je().default.state.currentUserSettingsStore),[]),h=(0,m().tz)(),S=(0,r().K8)((()=>{const e=h.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),t="enterprise"===s.getSubscriptionTier();return f().oE(Tp().Gb.filter((e=>!!o||"none"!==e)).map((i=>{if(t||"membership_admin"!==i)return{role:i,disabledInfo:!s.canAdmin()&&Tp().EH(i)?{isDisabled:!0,disabledMessage:e}:void 0}})))}),[h,s,o]),x=(0,i.useCallback)((async()=>{const{currentUserSettingsStore:e}=Je().default.state;if(e)return await(0,kp().Vr)({user:t,spaceStore:s,environment:c,userSettingStore:e})}),[t,s,c]);return p?(0,se.jsx)(Up().Ay,{role:t.role,table:an().NX,type:"user_permission",disabled:u,isUserPermission:t.userId===g,upgradeButtonName:"space_permission_item",availableRoleItems:S,buttonStyle:d.button,onChange:async e=>{await kp().qb({member:t,newRole:e,currentUserSettingsStore:p,spaceStore:s,environment:c})},onClick:()=>{eg().jR(c,{from:"member",button_name:"open_role"})},onRemoveMemberClick:async()=>{await x()},onRemoveSelfClick:async()=>{await x()},from:"spaceSettings"}):null}function Lp(e){let{user:t,spaceStore:s,shouldShowRemoveUserInRoleDropdown:i}=e;return(0,se.jsx)("div",{children:(0,se.jsx)(Ep,{user:t,spaceStore:s,maxWidth:148,shouldShowRemoveUserInRoleDropdown:i})})}function Op(e){let{user:t,userPermissionGroupIds:s}=e;const{userTeamStores:i}=function(e){let{user:t,userPermissionGroupIds:s}=e;const i=(0,r().K8)((()=>nc().A.state.teams.filter((e=>e.isMemberOrGuest(t.userId,s)))),[t.userId,s]);return{userTeamStores:i}}({user:t,userPermissionGroupIds:s});return(0,se.jsx)(fp,{teamStores:i,from:"member"})}function Wp(e){let{spaceStore:t,spacePermissionsSettingsStore:s,shouldShowHeading:n}=e;const o=(0,r().K8)((()=>"on"===Se().default.getEligibleGroup({experimentId:"members_tab_remove_users_in_role_dropdown",defaultGroup:"control"})),[]),d=(0,r().K8)((()=>(0,Kt().L)()),[]),{tableStyles:c,styles:u,sortState:g,setSortState:p,rows:h,membersCount:S,searchQuery:x,columnRenderInfo:v,shouldShowLoadMore:y,onLoadMore:b}=function(e){let{members:t,spaceStore:s,spacePermissionsSettingsStore:n,shouldShowRemoveUserInRoleDropdown:o}=e;const d=(0,a().v3)(),c=(0,r().K8)((()=>(0,Nt().AK)()),[]),u=(0,ag().k4)({spaceStore:s}),g=(0,r().K8)((()=>s.canAdmin()),[s]),p=(0,r().K8)((()=>f().oE([zp,qp,Fp,Np,c?Gp:void 0,u&&!o?Kp:void 0])),[u,c,o]),h=(0,l().IS)((e=>({...(0,ue().rC)({columnRenderInfo:p,theme:e,containerMarginTop:0})})),[p]),S=(0,l().IS)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`}})),[]),[x,v]=(0,i.useState)({column:Np,sortAscending:!1}),y=(0,m().tz)(),b=(0,r().K8)((()=>Rg().A.state.searchQuery),[]),j=(0,ag().BV)({spaceStore:s,members:t}),A=(0,r().K8)((()=>s.getSpaceId()),[s]),[{value:C}]=(0,Ma().Yb)((async()=>{const e=await U().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:d,data:{spaceId:A,userIds:t.map((e=>e.userId))},headers:(0,P().WS)({cellId:void 0,spaceId:A})});return"success"===e.type?e.data.userToGroupMap:{}}),[d,A,t],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3}),w=(0,r().K8)((()=>t.map((e=>{const t=ee().LU.createChildStore(s,{table:B().oo,id:e.userId}),i=null==j?void 0:j.find((t=>t.userId===e.userId));return{spaceStore:s,user:e,email:t.getEmail(),userName:t.getDisplayName(y),id:e.userId,isClickable:!1,userRole:e.role,spacePermissionsSettingsStore:n,firstJoinedSpaceTime:e.firstJoinedSpaceTime,shouldDisableAction:!(g||!u||"editor"!==e.role&&"membership_admin"!==e.role),restorationStatus:null==i?void 0:i.restorationStatus,spacePermissionGroupIds:(null==C?void 0:C[e.userId])||[],shouldShowRemoveUserInRoleDropdown:o}})).filter((e=>{var t,s;return void 0===b||(((null===(t=e.email)||void 0===t?void 0:t.includes(b))||(null===(s=e.userName)||void 0===s?void 0:s.includes(b)))??!1)}))),[s,t,y,b,g,u,n,j,C,o]),M=w.length,T=(0,r().K8)((()=>function(e,t){let{sortAscending:s,column:i}=t,n=e;switch(i.id){case"user":n=f().Ul(e,(e=>e.email));break;case"roles":n=f().Ul(e,(e=>Tp().TE[e.userRole]))}s||n.reverse();return n}(w,x)),[w,x]),[k,I]=(0,i.useState)(Ig),D=(0,i.useCallback)((()=>{I(k+Ig)}),[k]),R=k<T.length,_=T.slice(0,k);return{tableStyles:h,styles:S,sortState:x,setSortState:v,rows:_,searchQuery:b,membersCount:M,columnRenderInfo:p,onLoadMore:D,shouldShowLoadMore:R}}({members:d,spaceStore:t,spacePermissionsSettingsStore:s,shouldShowRemoveUserInRoleDropdown:o});return(0,se.jsxs)(se.Fragment,{children:[n&&(0,se.jsxs)("div",{style:u.titleContainer,children:[(0,se.jsx)("span",{children:(0,se.jsx)(m().sA,{id:"peopleSectionMembersTab.activeMembers.title",defaultMessage:"Active"})}),(0,se.jsx)("span",{style:u.titleNumber,children:S})]}),(0,se.jsx)("div",{style:{marginTop:n?4:-1},children:(0,se.jsx)(ue().WE,{allowHorizontalScroll:!0,setStickyHeaderRow:!0,columnRenderInfo:v,rows:h,showRowBorders:!0,hideHeaderRowPadding:!0,sortState:g,onSortStateChanged:p,loadMoreMethod:y?{type:"button",onLoadMore:b}:void 0,renderNoRowsComponent:()=>(0,se.jsx)(me().A,{isSmall:!0,style:u.emptyMessage,children:x?(0,se.jsx)(m().sA,{id:"peopleSectionMembersTab.emptySearch",defaultMessage:"No search results"}):(0,se.jsx)(m().sA,{id:"peopleSectionMembersTab.emptyRow",defaultMessage:"No members"})}),styles:c})})]})}const zp={id:"user",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m().sA,{id:"peopleSectionMembersTab.user",defaultMessage:"User"})}),renderCell:e=>(0,se.jsx)(Bg,{userId:e.user.userId,restorationStatus:e.restorationStatus,spaceStore:e.spaceStore}),widthData:{width:219},sortable:!0},qp={id:"teamspaces",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,se.jsx)(m().sA,{id:"teamspaces",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,se.jsx)(Op,{user:e.user,userPermissionGroupIds:new Set(e.spacePermissionGroupIds)}),widthData:{width:175},sortable:!1},Fp={id:"groups",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,se.jsx)(m().sA,{id:"groups",defaultMessage:"Groups"})}),renderCell:e=>(0,se.jsx)(Bp,{user:e.user,spaceStore:e.spaceStore,spacePermissionsSettingsStore:e.spacePermissionsSettingsStore,spacePermissionGroupIds:e.spacePermissionGroupIds}),widthData:{width:118.5},sortable:!1},Np={id:"roles",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,se.jsx)(m().sA,{id:"peopleSectionMembersTable.userTable.role",defaultMessage:"Role"})}),renderCell:e=>(0,se.jsx)(Lp,{user:e.user,spaceStore:e.spaceStore,shouldShowRemoveUserInRoleDropdown:e.shouldShowRemoveUserInRoleDropdown}),widthData:{width:118.5},sortable:!0},Kp={id:"actions",headerTitle:void 0,renderCell:e=>(0,se.jsx)(Ip,{user:e.user,spaceStore:e.spaceStore,shouldDisableAction:e.shouldDisableAction}),widthData:{width:51},sortable:!1},Gp={id:"joined",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m().sA,{id:"role",defaultMessage:"Date added"})}),renderCell:e=>e.firstJoinedSpaceTime?(0,mo().W_)(Number(e.firstJoinedSpaceTime),"medium",ni().locale):"",widthData:{width:118},sortable:!0};const Vp={viewBox:"0 0 16 16",svg:(0,se.jsx)("path",{d:"M9.372 3.238a.625.625 0 1 0-.884.884l3.253 3.253H2.75a.625.625 0 0 0 0 1.25h8.991l-3.253 3.253a.625.625 0 0 0 .884.884l4.32-4.32a.625.625 0 0 0 0-.884z"})},Hp=(0,gt().wt)("arrowStraightRightSmall",Vp);var $p=()=>s(97835);function Yp(e){let{isPrimary:t,leftIcon:s,rightIcon:i,onClick:n,content:a,style:o,titleStyle:r}=e;const d=(0,l().IS)((e=>({container:{display:"flex",width:"100%",padding:8,justifyContent:"flex-start",alignItems:"center",borderRadius:8,background:e.onboardingPreviewBackground,...o},iconContainer:{display:"flex",width:20,height:20,paddingTop:1,flexDirection:"column",alignItems:"center",justifyContent:"center",gap:10},title:{display:"flex",fontSize:14,fontWeight:500,color:t?e.text.primary:e.text.secondary,paddingLeft:6,paddingRight:2,height:18,cursor:n?"pointer":"default",width:"100%",...r},ctaIconContainer:{display:"flex",width:16,height:16,paddingTop:1,flexDirection:"column",alignItems:"center",gap:10,paddingLeft:2,paddingRight:0,cursor:n?"pointer":"default"}})),[n,t,o,r]);return(0,se.jsxs)("div",{style:d.container,children:[s&&(0,se.jsx)("div",{style:d.iconContainer,onClick:n,children:s}),(0,se.jsx)("div",{style:d.title,onClick:n,children:a}),i&&(0,se.jsx)("div",{style:d.ctaIconContainer,onClick:n,children:i})]})}function Qp(e){let{currentTab:t}=e;const s=(0,l().IS)((e=>({icon:{fontSize:14,fontWeight:510,fill:e.icon.secondary,cursor:"pointer"},ctaIcon:{fontSize:12,fill:e.icon.secondary,fontWeight:510}})),[]),n=(0,a().v3)(),o=(0,i.useCallback)((()=>{lt().A.setState({...lt().A.state,currentTab:"security",defaultSubtab:void 0}),eg().pf(n,{current_tab:t})}),[n,t]);return(0,i.useEffect)((()=>{eg().W2(n,{current_tab:t})}),[n,t]),(0,se.jsx)(Yp,{leftIcon:(0,$p().x)(s.icon),content:(0,se.jsx)(m().sA,{id:"PeopleSectionSecurityBanner.title",defaultMessage:"Some invite settings have moved, make changes in Security tab"}),rightIcon:Hp(s.ctaIcon),onClick:o})}var Jp=()=>s(987555);const Xp=3;function Zp(e){let{guests:t,spaceStore:s,internalDomains:n}=e;const{environment:o,tableStyles:d,sortState:c,setSortState:u,selectedRowIds:g,setSelectedRowIds:p,rows:f,searchQuery:h,canEditMembership:S,columnRenderInfo:x,guestsCount:v,onClickApprove:y,isSubscribed:b}=function(e){let{guests:t,spaceStore:s,internalDomains:n}=e;const o=(0,a().v3)(),d=(0,ag().k4)({spaceStore:s}),c=(0,r().K8)((()=>d?[sm,im,nm]:[sm]),[d]),u=(0,l().IS)((e=>({...(0,ue().rC)({columnRenderInfo:c,theme:e,containerMarginTop:0})})),[c]),g=(0,r().K8)((()=>c[0]),[c]),[p,f]=(0,i.useState)({column:g,sortAscending:!0}),[h,S]=(0,i.useState)([]),x=(0,m().tz)(),v=(0,r().K8)((()=>Rg().A.state.searchQuery),[]),y=(0,r().K8)((()=>{const e=Mt().subscriptionDataStoreInstance.state;return Boolean(e&&Kt().Fq(e))}),[]),b=(0,r().K8)((()=>t.map((e=>{const t=ee().LU.createChildStore(s,{table:B().oo,id:e.userId}),i=t.getEmail(),a=null==i?void 0:i.split("@")[1],o=n.some((e=>e.url===a));return{spaceStore:s,user:e,email:i,userName:t.getDisplayName(x),guestUserStore:t,id:e.userId,shouldDisableInteraction:h.includes(e.userId),isClickable:!1,isInternalGuest:o,isSubscribed:y}})).filter((e=>{if(v){var t;if(!((null===(t=e.email)||void 0===t?void 0:t.includes(v))||e.userName.includes(v)))return!1}return e.isInternalGuest})).slice(0,Xp)),[t,s,n,x,h,y,v]),j=(0,i.useCallback)((()=>{eg().jR(o,{from:"guest_suggestions",button_name:"bulk_upgrade",count:h.length}),h.forEach((e=>{const t=ee().LU.createChildStore(s,{table:B().oo,id:e}),i=y?"read_and_write":"editor";pg().P({environment:o,guestUserStore:t,role:i,store:s,isConvertToAdmin:!y,origin:"suggested_guest_table"}),S([])}))}),[h,o,y,s]),A=!b.some((e=>h.includes(e.id)));return{environment:o,tableStyles:u,sortState:p,setSortState:f,selectedRowIds:h,setSelectedRowIds:S,rows:b,searchQuery:v,isApproveButtonLoading:!1,canEditMembership:d,columnRenderInfo:c,isSubscribed:y,shouldHideActions:A,guestsCount:b.length,onClickApprove:j}}({guests:t,spaceStore:s,internalDomains:n}),j=(0,m().tz)(),C=function(){const e=(0,l().IS)((e=>({suggestions:{transition:"opacity 1s",marginTop:12},suggestionsHidden:{transition:"opacity 1s",opacity:0},titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},emptyDivider:{height:1,backgroundColor:e.stroke.secondary},headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},suggestionsMenu:{width:265},hideSuggestionIcon:{height:20,width:20},learnMoreIcon:{height:20,width:20},learnMoreMenuItem:{color:e.text.secondary},learnMoreSection:{paddingTop:4,paddingBottom:4,borderTop:`1px solid ${e.stroke.secondary}`},optionsContainer:{display:"flex",alignItems:"center"},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},approveButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30}})),[]);return e}(),[w,M]=(0,i.useState)(!0),T=(0,i.useCallback)((()=>{A().f({environment:o,url:(0,qe().xS)("guides.invitePerson")})}),[o]);if(0===n.length)return null;if(0===f.length)return null;if(!w)return null;const k=g.length>0;return(0,se.jsxs)("div",{style:w?C.suggestions:C.suggestionsHidden,children:[(0,se.jsxs)("div",{style:C.headerContainer,children:[(0,se.jsxs)("div",{style:C.titleContainer,children:[(0,se.jsx)("span",{children:(0,se.jsx)(m().sA,{id:"peopleSectionguestsTab.suggestions.title",defaultMessage:"Suggestions"})}),(0,se.jsx)("span",{style:C.titleNumber,children:v})]}),(0,se.jsx)("div",{style:C.optionsContainer,children:k?(0,se.jsx)("div",{style:C.actionsContainer,children:(0,se.jsx)(Rt().p,{style:C.approveButton,onClick:y,children:(0,se.jsxs)("div",{style:C.buttonContainerApprove,children:[(0,se.jsx)("div",{style:C.buttonIcon,children:(0,ll().m)({width:20,height:16})}),(0,se.jsx)("div",{style:C.buttonText,children:(0,se.jsx)(m().sA,{id:"spaceSettings.peopleSection.guestsTable.bulkUpgrade",defaultMessage:"Upgrade {numberOfRequests, plural, one {1 guest} other {{numberOfRequests} guests}} to {isSubscribed, select, true {member} other {admin}}",values:{numberOfRequests:g.length,isSubscribed:b}})})]})})}):(0,se.jsx)(eo().Ay,{popupType:eo().z7.Popup,renderOrigin:e=>(0,se.jsx)(_a().A,{icon:mg().L,ariaLabel:j.formatMessage({id:"peopleSectionSuggestionsTable.ellipsisButton.ariaLabel",defaultMessage:"More"}),style:{height:24,width:24},iconStyle:{width:20,height:20},...e}),onClick:()=>{eg().jR(o,{from:"guest_suggestions",button_name:"upgrade"})},render:()=>(0,se.jsx)("div",{children:(0,se.jsx)(Kn().Ay,{type:Kn().Oh.Vertical,initialFocus:void 0,style:C.suggestionsMenu,sections:[{key:"hide_suggestions",render:e=>(0,se.jsx)(Vn().A,{...e}),items:[{key:"hide_suggestions",render:e=>(0,se.jsx)(qn().A,{...e,icon:(0,Jp().T)(C.hideSuggestionIcon),title:(0,se.jsx)(m().sA,{id:"peopleSectionguestsTab.hideSuggestions",defaultMessage:"Hide Suggestions"})}),action:()=>{M(!1),eg().jR(o,{from:"guest_suggestions",button_name:"hide_suggestions"})}}]},{key:"learn_more",render:e=>(0,se.jsx)(Vn().A,{...e,style:C.learnMoreSection}),items:[{key:"learn_more",render:e=>(0,se.jsx)(qn().A,{...e,icon:(0,Ra().$)(C.learnMoreIcon),title:(0,se.jsx)(m().sA,{id:"peopleSectionguestsTab.learnMore",defaultMessage:"Learn more"}),style:C.learnMoreMenuItem}),action:()=>{T(),eg().jR(o,{from:"guest_suggestions",button_name:"suggestions_learn_more"})}}]}]})})})})]}),(0,se.jsx)("div",{style:{marginBottom:36,marginTop:4},children:(0,se.jsx)(ue().WE,{allowHorizontalScroll:S,setStickyHeaderRow:!0,columnRenderInfo:x,rows:am(f,c),showRowBorders:!0,hideHeaderRowPadding:!0,sortState:c,onSortStateChanged:u,renderNoRowsComponent:()=>(0,se.jsx)(me().A,{isSmall:!0,style:C.emptyMessage,children:h?(0,se.jsx)(m().sA,{id:"peopleSectionGuestsTab.emptySearch",defaultMessage:"No search results"}):(0,se.jsx)(m().sA,{id:"peopleSectionGuestsTab.emptyRow",defaultMessage:"No guests"})}),styles:d,multiselect:S?{header:{isDisabled:0===f.length,isSelected:g.length>0&&g.length===f.length,onClick:()=>{g.length===f.length?(p([]),eg().Y1(o,{from:"guest_suggestions",action:"deselect_all",row_count:g.length})):(p(f.map((e=>e.id))),eg().Y1(o,{from:"guest_suggestions",action:"select_all",row_count:f.length}))}},row:{getDisabledState:()=>!1,getSelectedState:e=>g.includes(e.id),onClick:e=>{p((t=>t.includes(e.id)?(eg().Y1(o,{from:"guest_suggestions",action:"deselect_row",row_count:1}),t.filter((t=>t!==e.id))):(eg().Y1(o,{from:"guest_suggestions",action:"select_row",row_count:1}),t.concat(e.id))))}}}:void 0})})]})}function em(){const e=(0,l().DP)();return(0,se.jsx)("div",{style:{color:e.text.secondary},children:(0,se.jsx)(m().sA,{id:"peopleSectionguestsTab.suggestions.reason.approvedEmailDomain",defaultMessage:"Approved email domain"})})}function tm(e){let{spaceStore:t,upgradeMember:s,guestUserStore:n,disabled:o}=e;const r=(0,l().DP)(),d=(0,a().v3)(),[c,u]=(0,i.useState)(!1);return(0,se.jsx)(Rt().p,{disabled:o,style:{background:r.tint.uiBlue,color:r.text.uiBluePrimary,fontWeight:510,fontSize:14,borderRadius:4,paddingTop:4,paddingBottom:4,paddingLeft:12,paddingRight:12,marginLeft:24,...o&&{color:r.text.uiBlueTertiary}},hoveredStyle:{background:r.tint.uiBlueHover},onClick:async()=>{u(!0),eg().jR(d,{from:"guest_suggestions",button_name:"upgrade"}),await s({environment:d,store:t,guestUserStore:n}),u(!1)},isLoading:c,children:(0,se.jsx)(m().sA,{id:"spaceSettings.peopleSection.suggestionsTable.upgrade",defaultMessage:"Upgrade"})})}const sm={id:"user",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m().sA,{id:"peopleSectionGuestsTab.guest",defaultMessage:"User"})}),renderCell:e=>(0,se.jsx)(Bg,{userId:e.user.userId,spaceStore:e.spaceStore,isInternalGuest:e.isInternalGuest,isForSuggestionsTable:!0}),widthData:{width:210},sortable:!0},im={id:"access",headerTitle:(0,se.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,se.jsx)(m().sA,{id:"peopleSectionGuestsTab.access",defaultMessage:"Access"})}),renderCell:e=>(0,se.jsx)("div",{style:{display:"flex"},children:(0,se.jsx)(kg,{guest:e.user,shouldDisableInteraction:e.shouldDisableInteraction})}),widthData:{width:120},sortable:!1},nm={id:"reason",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m().sA,{id:"peopleSectionguestsTab.suggestions.reason",defaultMessage:"Reason"})}),renderCell:e=>(0,se.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center"},children:[(0,se.jsx)(em,{}),(0,se.jsx)(tm,{upgradeMember:async t=>{await pg().P({origin:"suggested_guest_table",isConvertToAdmin:!1,role:e.isSubscribed?"read_and_write":"editor",...t})},spaceStore:e.spaceStore,guestUserStore:e.guestUserStore,disabled:e.shouldDisableInteraction})]}),widthData:{width:256},sortable:!1};function am(e,t){let{sortAscending:s}=t;const i=f().Ul(e,(e=>e.email));return s||i.reverse(),i}function om(e){let{spaceStore:t,spacePermissionsSettingsStore:s}=e;const i=(0,a().v3)(),n=(0,r().K8)((()=>(0,Kt().r8)()),[]),o=(0,r().K8)((()=>{const e=ug().A.getData(i,{spaceId:t.id});return(null==e?void 0:e.filter((e=>e.hasMembers)).map((e=>e.domain)))??[]}),[i,t]),l=(0,ns().fC)({spaceStore:t}),d=(0,ag().r1)({spaceStore:t}),c=(0,ns().e6)({spaceStore:t,requestType:"member"});(0,ns().Wz)({requestType:"member",spaceStore:t});const u=(0,ns().zA)({spaceStore:t,guests:n,internalDomains:o}),g=l&&0!==c.length,p=g||u;return(0,se.jsxs)(se.Fragment,{children:[u&&!g&&(0,se.jsx)(Zp,{guests:n,spaceStore:t,internalDomains:o}),g&&(0,se.jsxs)("div",{style:{paddingTop:16,paddingBottom:16},children:[d&&(0,se.jsx)(Qp,{currentTab:"members"}),(0,se.jsx)(xp,{requests:c,spaceStore:t,requestType:"member"})]}),(0,se.jsx)(Wp,{spaceStore:t,spacePermissionsSettingsStore:s,shouldShowHeading:p}),u&&g&&(0,se.jsx)(Zp,{guests:n,spaceStore:t,internalDomains:o})]})}function rm(e){let{recentRecoverableUser:t,spaceStore:n}=e;const{environment:o,styles:r,handleReprovisionToUserChange:d,userId:c,selectedTransferToUser:u}=function(e){let{recentRecoverableUser:t,spaceStore:s}=e;const n=(0,l().IS)((e=>({container:{display:"flex",width:"100%",justifyContent:"flex-end"},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:20,height:20,fill:e.icon.secondary},removeMenuDivider:{borderTop:e.stroke.secondary},upgradeIcon:{width:17,height:17}})),[]),o=(0,a().v3)(),[r,d]=(0,i.useState)(),c=(0,i.useCallback)((async(e,i)=>{const{accept:n}=await b().Gh({message:(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Transfer their private pages?"}),description:(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationDescription",defaultMessage:"This action cannot be undone."}),acceptLabel:(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})});if(!n)return;d(i);const a=await U().callApi({eventName:"transferSpaceUserContent",environment:o,data:{spaceId:s.id,fromUserId:e,toUserId:i}});"failed"===a.type?b().Qg(a):(t.privatePagesCount=0,Rg().A.setState({...Rg().A.state,recentRecoverableUsers:[...Rg().A.state.recentRecoverableUsers.filter((t=>t.userId!==e)),t]}))}),[o,s,t]);return{environment:o,styles:n,handleReprovisionToUserChange:c,userId:t.userId,selectedTransferToUser:r}}({recentRecoverableUser:t,spaceStore:n});return c?(0,se.jsx)("div",{style:r.container,children:(0,se.jsx)(eo().Ay,{popupType:eo().z7.Popup,onClick:()=>{eg().jR(o,{from:"recently_left",button_name:"actions"})},renderOrigin:e=>(0,se.jsx)(Rt().p,{style:r.button,...e,children:(0,se.jsx)(se.Fragment,{children:(0,mg().L)(r.buttonIcon)})}),render:()=>(0,se.jsx)("div",{children:(0,se.jsx)(Kn().Ay,{type:Kn().Oh.Vertical,initialFocus:void 0,sections:[{key:"transfer",render:e=>(0,se.jsx)(Vn().A,{...e,style:r.removeMenuDivider}),items:[{key:"transfer",render:e=>(0,se.jsx)(s(140828).A,{mode:Y().C.Button,focused:!1,title:(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.reprovision.toUser.title",defaultMessage:"Transfer private pages"}),parentStore:n,userIds:u?[u]:[],onChange:e=>{let[t]=e;d(c,t)}}),action:()=>{eg().jR(o,{from:"recently_left",button_name:"open_transfer_ownership"})}}]}]})})})}):null}function lm(e){let{spaceStore:t,recentRecoverableUsers:s}=e;const i=(0,l().IS)((e=>({icon:{fontSize:14,fontWeight:510,fill:e.icon.secondary}})),[]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,se.jsx)(Yp,{leftIcon:(0,Ga().G)(i.icon),content:(0,se.jsx)(m().sA,{id:"peopleSectionReprovisioningTab.settingsDeeplinkBannerTitle",defaultMessage:"People left the workspace in the past 30 days and had private pages appear here"})})}),(0,se.jsx)(dm,{recentRecoverableUsers:s,spaceStore:t})]})}function dm(e){let{spaceStore:t,recentRecoverableUsers:s}=e;const{rows:n,sortState:a,setSortState:o,tableStyles:d}=function(e){let{recentRecoverableUsers:t,spaceStore:s}=e;const n=(0,l().IS)((e=>(0,ue().rC)({columnRenderInfo:um,theme:e,containerMarginTop:0})),[]),[a,o]=(0,i.useState)({column:um[0],sortAscending:!0}),d=(0,r().K8)((()=>t.map((e=>{const t=ee().LU.createChildStore(s,{table:B().oo,id:e.userId});return{spaceStore:s,reprovisioningUser:e,email:t.getEmail(),id:e.userId,isClickable:!1}}))),[s,t]);return{rows:d,sortState:a,setSortState:o,tableStyles:n}}({recentRecoverableUsers:s,spaceStore:t}),c=(0,l().IS)((e=>({noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`}})),[]);return(0,se.jsx)("div",{style:{marginTop:4},children:(0,se.jsx)(ue().WE,{setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:um,rows:gm(n,a),showRowBorders:!0,hideHeaderRowPadding:!0,sortState:a,onSortStateChanged:o,renderNoRowsComponent:()=>(0,se.jsx)(me().A,{isSmall:!0,style:c.noRowContainer,children:(0,se.jsx)(m().sA,{id:"peopleSectionReprovisioningTab.noUser",defaultMessage:"No recent left user"})}),styles:d})})}function cm(e){let{userLeftTime:t}=e;const s=(0,m().tz)(),i=(0,r().K8)((()=>{const e=I().KQ(t,(0,$().P)());return(0,mo().ZF)({value:e,date_format:"relative",userTimeZone:(0,$().P)(),intl:s,allowRelativeDates:!0})}),[t,s]);return(0,se.jsx)(me().A,{isSmall:!0,children:i})}const um=[{id:"user",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m().sA,{id:"peopleSectionReprovisioningTab.user",defaultMessage:"User"})}),renderCell:e=>(0,se.jsx)(Bg,{userId:e.reprovisioningUser.userId,spaceStore:e.spaceStore}),widthData:{width:220},sortable:!0},{id:"pageCount",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m().sA,{defaultMessage:"Private pages",id:"peopleSectionReprovisioningTab.privatePages"})}),renderCell:e=>(0,se.jsx)(me().A,{isSmall:!0,children:e.reprovisioningUser.privatePagesCount}),widthData:{width:100},sortable:!1},{id:"leftTime",headerTitle:(0,se.jsx)("div",{style:{fontSize:14},children:(0,se.jsx)(m().sA,{defaultMessage:"Left workspace",id:"peopleSectionReprovisioningTab.leftTime"})}),renderCell:e=>(0,se.jsx)(cm,{userLeftTime:e.reprovisioningUser.userLeftTime}),widthData:{width:100},sortable:!1},{id:"actions",headerTitle:"",renderCell:e=>(0,se.jsx)(rm,{recentRecoverableUser:e.reprovisioningUser,spaceStore:e.spaceStore}),widthData:{width:100},sortable:!1}];function gm(e,t){let{sortAscending:s}=t;const i=f().Ul(e,(e=>e.email));return s||i.reverse(),i}var pm=()=>s(467730),mm=()=>s(437607),fm=()=>s(190106);const hm=(0,gt().wt)("arrowDownPage",{viewBox:"0 0 14 18",svg:(0,se.jsx)("path",{d:"M7.67969 9.39844V11.7891L7.61719 13.0078L8.21875 12.3828L8.8125 11.7656C8.875 11.7031 8.94531 11.6536 9.02344 11.6172C9.10677 11.5755 9.19271 11.5547 9.28125 11.5547C9.45312 11.5547 9.59635 11.612 9.71094 11.7266C9.83073 11.8411 9.89062 11.9844 9.89062 12.1562C9.89062 12.2552 9.8724 12.3411 9.83594 12.4141C9.79948 12.487 9.74479 12.5573 9.67188 12.625L7.51562 14.6016C7.42708 14.6849 7.34115 14.7448 7.25781 14.7812C7.17969 14.8177 7.09375 14.8359 7 14.8359C6.90104 14.8359 6.8125 14.8177 6.73438 14.7812C6.65625 14.7448 6.57031 14.6849 6.47656 14.6016L4.32031 12.625C4.2474 12.5573 4.19271 12.487 4.15625 12.4141C4.11979 12.3411 4.10156 12.2552 4.10156 12.1562C4.10156 11.9844 4.15885 11.8411 4.27344 11.7266C4.39323 11.612 4.54167 11.5547 4.71875 11.5547C4.79688 11.5547 4.8776 11.5755 4.96094 11.6172C5.04427 11.6536 5.11719 11.7031 5.17969 11.7656L5.77344 12.3828L6.375 13.0078L6.32031 11.7891V9.39844C6.32031 9.21615 6.38542 9.0625 6.51562 8.9375C6.65104 8.80729 6.8125 8.74219 7 8.74219C7.18229 8.74219 7.34115 8.80729 7.47656 8.9375C7.61198 9.0625 7.67969 9.21615 7.67969 9.39844ZM2.83594 17.3203C1.9974 17.3203 1.36458 17.1042 0.9375 16.6719C0.510417 16.2396 0.296875 15.6016 0.296875 14.7578V2.96875C0.296875 2.13021 0.510417 1.49479 0.9375 1.0625C1.36458 0.625 1.9974 0.40625 2.83594 0.40625H6.60156C6.92969 0.40625 7.21615 0.429688 7.46094 0.476562C7.70573 0.518229 7.93229 0.598958 8.14062 0.71875C8.34896 0.833333 8.5625 1.0026 8.78125 1.22656L12.875 5.39062C13.1042 5.61979 13.276 5.84115 13.3906 6.05469C13.5104 6.26302 13.5911 6.49479 13.6328 6.75C13.6745 7 13.6953 7.30729 13.6953 7.67188V14.7578C13.6953 15.5964 13.4818 16.2318 13.0547 16.6641C12.6276 17.1016 11.9948 17.3203 11.1562 17.3203H2.83594ZM2.96094 15.7812H11.0312C11.4115 15.7812 11.6953 15.6849 11.8828 15.4922C12.0703 15.2995 12.1641 15.0234 12.1641 14.6641V7.88281H7.95312C7.39583 7.88281 6.97917 7.74479 6.70312 7.46875C6.43229 7.19271 6.29688 6.77604 6.29688 6.21875V1.9375H2.96875C2.58854 1.9375 2.30469 2.03646 2.11719 2.23438C1.92969 2.43229 1.83594 2.71094 1.83594 3.07031V14.6641C1.83594 15.0234 1.92969 15.2995 2.11719 15.4922C2.30469 15.6849 2.58594 15.7812 2.96094 15.7812ZM8.10156 6.53125H11.9531L7.64844 2.14844V6.07031C7.64844 6.23177 7.68229 6.34896 7.75 6.42188C7.82292 6.49479 7.9401 6.53125 8.10156 6.53125Z"})});function Sm(e){let{spaceStore:t}=e;const{styles:s,shouldEnableExportGuests:n,handleExportGuestsClick:o}=function(e){let{spaceStore:t}=e;const s=(0,l().IS)((e=>({button:{display:"flex",width:28,height:28,justifyContent:"center",gap:10,alignItems:"center"},buttonIcon:{width:20,height:20,fontSize:16,fontStyle:"normal",flexDirection:"column",flexShrink:0,fontWeight:510,fill:e.icon.secondary}})),[]),n=(0,r().K8)((()=>{const{currentSpaceStore:e}=Je().default.state,t=Mt().subscriptionDataStoreInstance.state;return Boolean(e&&t&&"subscribed_admin"===t.type&&Se().default.checkGate({gateName:"enable_guest_export"}))}),[]),o=(0,a().v3)(),d=(0,m().tz)(),c=(0,i.useCallback)((()=>{const e=Mt().subscriptionDataStoreInstance.state;if(t&&e&&"subscribed_admin"===e.type){const s=(0,Kt().oe)(e);cl().s6(o,{intl:d,spaceStore:t,guests:s})}}),[o,d,t]);return{styles:s,shouldEnableExportGuests:n,handleExportGuestsClick:c}}({spaceStore:t});return n?(0,se.jsx)(pe().A,{render:e=>(0,se.jsx)(Rt().p,{style:s.button,onClick:o,...e,children:hm(s.buttonIcon)}),renderTooltip:()=>(0,se.jsx)(m().sA,{id:"exportGuestsButton.label",defaultMessage:"Export guests as CSV"})}):null}var xm=()=>s(496414),vm=()=>s(347930),ym=()=>s(562866),bm=()=>s(716730),jm=()=>s(559183),Am=()=>s(998109);function Cm(e){let{spaceStore:t,origin:s,requestFrom:n,inviteFrom:o}=e;const{shouldShowRequestMemberButtion:l,canEditMembership:d}=(0,r().K8)((()=>({shouldShowRequestMemberButtion:!t.canEditMembership()&&!t.getDisableMembershipRequests()&&(0,fe().x3)(),canEditMembership:t.canEditMembership()})),[t]),c=(0,r().K8)((()=>{const e=Mt().subscriptionDataStoreInstance.state;return Boolean(e&&Kt().Fq(e))}),[]),{isMobile:u}=(0,a().Y0)(),g=(0,r().K8)((()=>{var e;return null===(e=Je().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),p=(0,Rs().P9)({name:"slack_imports_invite",spaceId:t.id,userId:g}),f=(0,r().K8)((()=>(0,jm().shouldEnableSlackImportsInvite)({canEditPermission:d,isMobile:u,hasAccessToFeature:p??!1})),[d,u,p]),h=(0,i.useCallback)((()=>{const e=(0,m().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updatingâ€¦"}});xm().m({message:e.updatingPermissions})}),[]),S=(0,i.useCallback)((()=>{xm().V()}),[]),x=(0,a().v3)(),v=(0,i.useCallback)((()=>{(0,bm().q)(x)}),[x]);return l?(0,se.jsx)(ym().cx,{store:t,analyticsFrom:n,origin:s?(0,se.jsx)("div",{onClick:v,children:s}):(0,se.jsx)(ks().A,{size:"lg",onClick:v,children:(0,se.jsx)(m().sA,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,se.jsx)(Am().n,{step:"collaborate_add_member",isFullWidth:!1,showContentOverlays:!1,children:(0,se.jsx)(vm().H,{disabled:!d,store:t,onInviteClick:h,onInviteComplete:S,isSubscribed:c,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,enableInviteDropdown:f,origin:s,analyticsFrom:o})})}function wm(e){let{spaceStore:t,currentTab:s,spacePermissionsSettingsStore:n}=e;return(0,i.useEffect)((()=>()=>{Rg().A.reset()}),[]),(0,se.jsxs)("div",{style:{display:"flex",height:34,paddingBottom:0,justifyContent:"flex-end",alignItems:"center",gap:10},children:[(0,se.jsxs)("div",{style:{display:"flex",height:28,justifyContent:"flex-end",alignItems:"center",gap:4},children:[(0,se.jsx)(fm().A,{handleSearchQueryChange:e=>{Rg().A.setState({...Rg().A.state,searchQuery:e}),s===ei().d.Groups&&n.setState({...n.state,groupsFilter:e??""})},currentTab:s,isSearchBarAlwaysOpen:!0}),s===ei().d.Guests?(0,se.jsx)(Sm,{spaceStore:t}):null]}),(0,se.jsx)("div",{style:{paddingBottom:2},children:(0,se.jsx)(Mm,{spaceStore:t,currentTab:s,spacePermissionsSettingsStore:n})})]})}function Mm(e){let{spaceStore:t,currentTab:s,spacePermissionsSettingsStore:n}=e;const{canUseGroups:o,canCreateGroups:l,handleCreateGroupClick:d,shouldShowRequestMemberButtion:c,canEditMembership:u}=function(e){let{spaceStore:t,currentTab:s,spacePermissionsSettingsStore:n}=e;const o=(0,ag().zh)(),l=(0,ag().k4)({spaceStore:t}),d=(0,a().v3)(),c=(0,i.useCallback)((()=>{T().createAndCommit({userAction:"PeopleSectionGroupsTab.handleCreateGroupClick",environment:d,canUndo:!0,perform:e=>{const s=C().np({spaceStore:t,transaction:e});if(s){n.setState({...n.state,editingNameGroupId:s.getGroupId(),groupNameInputValue:""});const e=Rr().Bj6.fromValue(mm().n,s.getValue()),t=[...tg().A.state.permissionGroupsAndMemberCounts,{group:e,memberCount:0}],i=(0,pm().Ay)(n.state.groupsFilter,t,(e=>e.group.name||""));tg().A.setState({...tg().A.state,permissionGroupsAndMemberCounts:i})}}})}),[d,t,n]),u=(0,r().K8)((()=>!t.canEditMembership()&&!t.getDisableMembershipRequests()&&(0,fe().x3)()),[t]),g=(0,ag().k4)({spaceStore:t});return{canUseGroups:o,canCreateGroups:l,shouldShowRequestMemberButtion:u,canEditMembership:g,handleCreateGroupClick:c}}({spaceStore:t,currentTab:s,spacePermissionsSettingsStore:n});return s===ei().d.Groups&&o?l?(0,se.jsx)(pe().A,{renderTooltip:()=>!l&&(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",defaultMessage:"Only membership admins and workspace owners can add a permission group."}),render:e=>(0,se.jsx)(ks().A,{size:"lg",onClick:d,...e,children:(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"})})}):null:c||u?(0,se.jsx)(Cm,{spaceStore:t,requestFrom:"space_settings_add_members",inviteFrom:"space_settings_add_members"}):null}var Tm=()=>s(480822);function km(){const e=(0,r().K8)((()=>{const e=Je().default.state.currentSpaceStore;if(null!=e&&e.isDefined())return e}),[]),t=(0,r().K8)((()=>Xe().A.state.online),[]),s=(0,r().O$)(Mt().subscriptionDataStoreInstance),i=(0,sg().o)({spaceId:null==e?void 0:e.id}),n=(0,r().uB)(void 0,ei().A);return e&&s?t?(0,se.jsxs)(Dt().Ay,{children:[(0,se.jsx)(Mp().Ay,{spaceStore:e,inviteLinkCode:i,spacePermissionsSettingsStore:n}),(0,se.jsx)(Dm,{subscriptionData:s,spaceStore:e,spacePermissionsSettingsStore:n})]}):(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(me().A,{isSmall:!0,style:{textAlign:"center"},children:(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."})})}):(0,se.jsx)(Im,{})}function Im(){return(0,se.jsx)(Dt().Ay,{centerContent:!0,children:(0,se.jsx)(ii().A,{})})}function Dm(e){var t;let{subscriptionData:s,spaceStore:n,spacePermissionsSettingsStore:o}=e;(0,i.useEffect)((()=>{if(lt().A.state.open&&"members"===lt().A.state.currentTab&&lt().A.state.defaultSubtab){const e=lt().A.state.defaultSubtab!==ei().d.Requests?lt().A.state.defaultSubtab:ei().d.Members;o.setState({...o.state,currentTab:e})}}),[o]);const{memberCount:d,recentRecoverableUsers:c,currentTab:u,canReprovisionContent:g,tabs:p,currentTabs:f,environment:h,billingData:S}=function(e){let{subscriptionData:t,spaceStore:s,spacePermissionsSettingsStore:i}=e;const n=(0,a().v3)(),o=(0,Tt().b)(t),d=(0,ws().T)(t);(0,ag().rl)({spaceStore:s,subscriptionData:t});const c=(0,r().K8)((()=>{const{recentRecoverableUsers:e}=Rg().A.state;return e.filter((e=>e.privatePagesCount>0))}),[]),u=(0,r().K8)((()=>i.state.currentTab),[i]),g=(0,ag().t1)({spaceStore:s,subscriptionData:t}),p=(0,ns().U4)({spaceStore:s,requestType:"guest"}),f=(0,ns().U4)({spaceStore:s,requestType:"member"}),h=(0,l().IS)((e=>({activeTabStyle:{color:e.regularTextColor},inactiveTabStyle:{color:e.lightTextColor},redDot:{background:e.redBadgeBackground,marginLeft:6,marginTop:6}})),[]),S=(0,r().K8)((()=>{const e=tg().A.state.permissionGroupsAndMemberCounts.length;return o?{[ei().d.Members]:(0,se.jsx)(_m,{text:(0,se.jsx)("div",{children:(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members"})}),number:o,isCurrentTab:u===ei().d.Members,styles:h,unread:(f??0)>0}),[ei().d.Guests]:(0,se.jsx)(_m,{text:(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests"}),number:d,isCurrentTab:u===ei().d.Guests,styles:h,unread:(p??0)>0}),[ei().d.Groups]:(0,se.jsx)(_m,{text:(0,se.jsx)(m().sA,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),number:e,isCurrentTab:u===ei().d.Groups,styles:h}),[ei().d.Reprovisioning]:(0,se.jsx)(_m,{text:(0,se.jsx)(m().sA,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"}),number:c.length,isCurrentTab:u===ei().d.Reprovisioning,styles:h}),[ei().d.Requests]:(0,se.jsx)(m().sA,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests"})}:{}}),[o,d,u,h,f,p,c.length]),x=Rm(g),v=(0,Gt().lh)({spaceId:s.id}),y=x.map((e=>S[e]));return{billingData:v,memberCount:o,recentRecoverableUsers:c,currentTab:u,canReprovisionContent:g,tabs:y,currentTabs:x,environment:n}}({subscriptionData:s,spaceStore:n,spacePermissionsSettingsStore:o}),x=(0,ig().A)(n),v=(0,Ct().Q7)(n.id,S,d),y=x&&u===ei().d.Members&&(null==S?void 0:S.subscription);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ui().Ay,{tabs:p,selectedIndex:f.indexOf(u),onChange:e=>function(e){let{newSelectedIndex:t,environment:s,spacePermissionsSettingsStore:i,currentTab:n,canReprovisionContent:a}=e;const o=Rm(a)[t];switch(o){case ei().d.Members:eg().K4(s,{tab:"members"});break;case ei().d.Groups:eg().K4(s,{tab:"groups"});break;case ei().d.Guests:eg().K4(s,{tab:"guests"});break;case ei().d.Reprovisioning:eg().K4(s,{tab:"reprovisioning"});break;case ei().d.Requests:eg().K4(s,{tab:"requests"});break;default:(0,vs().HB)(o)}n===ei().d.Requests&&o!==ei().d.Requests&&dt().A.reset();i.setState({...i.state,currentTab:o})}({newSelectedIndex:e,environment:h,spacePermissionsSettingsStore:o,currentTab:u,canReprovisionContent:g}),style:{paddingLeft:0,paddingRight:0,marginTop:-6},tabTitleStyle:{fontSize:16,fontWeight:400},tabBorderStyle:{left:0,right:0},right:(0,se.jsx)(wm,{spaceStore:n,currentTab:u,spacePermissionsSettingsStore:o})}),y?(0,se.jsx)("div",{style:{margin:"20px 0 20px 0"},children:(0,se.jsx)(Tm().x,{quantityOfPaidSeats:v,quantityOfSpaceMembers:d,nextBillingDate:(null===(t=S.subscription)||void 0===t?void 0:t.currentPeriodEnd.toLocaleString({month:"short",day:"numeric",year:"numeric"}))??""})}):null,(0,se.jsx)(Pm,{currentTab:u,spaceStore:n,spacePermissionsSettingsStore:o,recentRecoverableUsers:c})]})}function Pm(e){let{currentTab:t,spaceStore:s,spacePermissionsSettingsStore:i,recentRecoverableUsers:n}=e;switch(t){case ei().d.Members:return(0,se.jsx)(om,{spaceStore:s,spacePermissionsSettingsStore:i});case ei().d.Guests:return(0,se.jsx)(wp,{spaceStore:s});case ei().d.Groups:return(0,se.jsx)(cg,{spaceStore:s,spacePermissionsSettingsStore:i});case ei().d.Reprovisioning:return(0,se.jsx)(lm,{spaceStore:s,recentRecoverableUsers:n});default:return null}}function Rm(e){return[ei().d.Members,ei().d.Guests,ei().d.Groups,...e?[ei().d.Reprovisioning]:[]]}function _m(e){let{text:t,number:s,isCurrentTab:i,unread:n,styles:a}=e;return(0,se.jsxs)("div",{style:{display:"flex",fontSize:h().J.UIRegular.desktop,fontWeight:h().Wy.medium,lineHeight:"18px",...i?a.activeTabStyle:a.inactiveTabStyle},children:[t,s&&s>0?(0,se.jsx)("div",{style:{fontSize:h().J.UIRegular.desktop,lineHeight:"18px",paddingLeft:4,...a.inactiveTabStyle},children:s}):void 0,n&&(0,se.jsx)(ng().m,{style:a.redDot,size:6})]})}var Bm=()=>s(782649),Um=()=>s(499446),Em=()=>s(812941),Lm=()=>s(284230),Om=()=>s(21497),Wm=()=>s(912979),zm=()=>s(344417);const qm={viewBox:"0 0 16 16",svg:(0,se.jsx)("path",{d:"M8 1.675a3.7 3.7 0 0 0-1.825 6.92v4.092c0 .094.04.183.111.245l1.5 1.313a.325.325 0 0 0 .428 0l1.5-1.313a.325.325 0 0 0 .033-.456l-.944-1.101.944-1.1a.33.33 0 0 0 .078-.213V8.595A3.7 3.7 0 0 0 8 1.674M8 3.75A.875.875 0 1 1 8 5.5a.875.875 0 0 1 0-1.75"})},Fm=(0,gt().wt)("keyFillSmall",qm);var Nm=()=>s(946141),Km=()=>s(56394),Gm=()=>s(933117);function Vm(e){let{selectItems:t,currentSelectedItem:s,onChange:i,icon:n}=e;const a=(0,l().IS)((()=>({filterWrap:{marginRight:0}})),[]);return(0,se.jsx)(Gm().A,{items:t,getKey:e=>e.key,selectedItem:s,onSelect:i,renderItem:e=>(0,se.jsx)(qn().A,{title:e.value.name,...e,checkState:s.key===e.value.key}),renderOrigin:e=>(0,se.jsx)(Km().A,{...e,title:s.originName??s.name,on:!s.showFilterAsOffWhenSelected,icon:n,wrapStyle:a.filterWrap})})}const Hm={[Om().J2]:{key:Om().J2,name:(0,se.jsx)(m().sA,{id:"manageTeamsAccessFilter.accessFilter.filterAllTeams",defaultMessage:"Any"}),originName:(0,se.jsx)(m().sA,{id:"manageTeamsAccessFilter.accessSelectPlaceolder",defaultMessage:"Access"}),showFilterAsOffWhenSelected:!0},[Om().b4]:{key:Om().b4,name:(0,se.jsx)(m().sA,{id:"manageTeamsAccessFilter.accessFilter.filterOpenTeams",defaultMessage:"Open"})},[Om().lX]:{key:Om().lX,name:(0,se.jsx)(m().sA,{id:"manageTeamsAccessFilter.accessFilter.filterClosedTeams",defaultMessage:"Closed"})},[Om().OD]:{key:Om().OD,name:(0,se.jsx)(m().sA,{id:"manageTeamsAccessFilter.accessFilter.filterPrivateTeams",defaultMessage:"Private"})}},$m=f().oE([Hm[Om().J2],Hm[Om().b4],Hm[Om().lX],Hm[Om().OD]]);function Ym(e){let{manageTeamsStore:t}=e;const s=(0,a().v3)(),n=(0,r().K8)((()=>t.state.filterAccess),[t]),o=(0,l().IS)((e=>({keyIcon:{width:gt().Ev.sm,height:gt().Ev.sm,marginRight:2,...n!==Om().J2?{fill:Rn().Ay.blue}:{fill:e.mediumIconColor}}})),[n]),d=(0,i.useCallback)((e=>{t.update((t=>({...t,filterAccess:e.key}))),Nm().hj(s,{filter:"access",value:e.key})}),[t,s]),c=Hm[n];return(0,se.jsx)(Vm,{selectItems:$m,currentSelectedItem:c,onChange:d,icon:Fm(o.keyIcon)})}const Qm={viewBox:"0 0 16 16",svg:(0,se.jsx)("path",{d:"M2.5 3.4a.9.9 0 0 1 .9-.9h9.2a.9.9 0 0 1 .9.9v1.2a.9.9 0 0 1-.9.9H3.4a.9.9 0 0 1-.9-.9zm.8 3.1h9.4v6.1a.9.9 0 0 1-.9.9H4.2a.9.9 0 0 1-.9-.9zM6.4 8a.5.5 0 0 0 0 1h3.2a.5.5 0 1 0 0-1z"})},Jm=(0,gt().wt)("archiveBoxFillSmall",Qm),Xm="showArchived",Zm="hideArchived",ef={[Zm]:{key:Zm,name:(0,se.jsx)(m().sA,{id:"manageTeamsArchivedFilter.archivedFilter.hideArchivedTeams",defaultMessage:"Active"}),originName:(0,se.jsx)(m().sA,{id:"manageTeamsArchivedFilter.archivedSelectPlaceolder",defaultMessage:"Active"}),showFilterAsOffWhenSelected:!0},[Xm]:{key:Xm,name:(0,se.jsx)(m().sA,{id:"manageTeamsArchivedFilter.archivedFilter.showArchivedTeams",defaultMessage:"Archived"})}};function tf(e){let{manageTeamsStore:t}=e;const s=(0,a().v3)(),n=(0,r().K8)((()=>t.state.showOnlyArchivedTeams),[t]),o=(0,l().IS)((e=>({archiveIcon:{width:gt().Ev.sm,height:gt().Ev.sm,marginRight:4,...n?{fill:Rn().Ay.blue}:{fill:e.mediumIconColor}}})),[n]),d=[ef[Zm],ef[Xm]],c=(0,i.useCallback)((e=>{t.update((t=>({...t,showOnlyArchivedTeams:e.key===Xm}))),Nm().hj(s,{filter:"archived",value:e.key})}),[t,s]),u=ef[n?Xm:Zm];return(0,se.jsx)(Vm,{selectItems:d,currentSelectedItem:u,onChange:c,icon:Jm(o.archiveIcon)})}s(430670);const sf={viewBox:"0 0 16 16",svg:(0,se.jsx)("path",{d:"M8 1.85c-.925 0-1.673.382-2.179 1.012-.495.617-.73 1.435-.73 2.29 0 .856.235 1.674.73 2.291.506.63 1.255 1.012 2.18 1.012.924 0 1.672-.382 2.178-1.012.495-.617.73-1.435.73-2.29 0-.856-.235-1.674-.73-2.291C9.673 2.232 8.925 1.85 8 1.85m0 7.403c-2.175 0-4.115 1.06-4.94 2.672-.3.585-.165 1.179.19 1.594.34.396.873.63 1.43.63h6.64c.557 0 1.09-.234 1.43-.63.355-.415.49-1.01.19-1.594-.825-1.612-2.765-2.672-4.94-2.672"})},nf=(0,gt().wt)("personFillSmall",sf),af="ShowTeamsWithNoOwnersId";function of(e){let{teamStores:t,manageTeamsStore:s}=e;const n=(0,a().v3)(),o=(0,r().K8)((()=>s.state.filterByOwner),[s]),d=function(e){switch(e.type){case Om().wf:return;case Om().wA:return e.id;case Om().qG:return af;default:(0,vs().HB)(e)}}(o),c=(0,r().K8)((()=>Je().default.state.currentSpaceStore),[]),u=(0,m().tz)(),g=(0,r().K8)((()=>{const e=t.flatMap((e=>e.getOwnerUserIds()));return f().sb(e)}),[t]),p=(0,l().IS)((e=>({icon:{marginRight:2,fill:e.mediumIconColor},blueFill:{fill:Rn().Ay.blue}})),[]),h=(0,i.useCallback)((e=>{if(c)return(0,_r().z)({userId:e,currentSpaceStore:c}).getValue()}),[c]),S=(0,i.useCallback)((e=>{const t=e[e.length-1];let i;i=t===d||void 0===t?{type:Om().wf}:t===af?{type:Om().qG}:{type:Om().wA,id:t},s.update((e=>({...e,filterByOwner:i}))),Nm().hj(n,{filter:"owner",value:i.type})}),[d,s,n]),x=(0,De().fJ)(O().T.searchActions),v=(0,i.useCallback)((async e=>{let{query:t}=e;if(!c||"resolved"!==x.status)return[];const s=x.value,i=(await s.searchUsers({environment:n,query:t,parentStore:c,userIds:g})).map((e=>e.id));return""===t?[af,...i]:i}),[n,c,g,x.status,x.value]),y=(0,i.useCallback)(((e,t)=>{if(!c)return null;if(e===af)return(0,se.jsx)(qn().A,{...t,title:(0,se.jsx)(m().sA,{id:"manageTeamsOwnerFilter.noOwnersFilterOption",defaultMessage:"No owners"}),checkState:o.type===Om().qG,className:"notranslate"});const s=h(e);return s?(0,i.createElement)(Z().A,{...t,key:e,actor:(0,J().MR)(s),checkState:d===e}):null}),[c,h,d,o.type]),b=(0,r().K8)((()=>{if(o.type!==Om().wA)return;const e=h(o.id);return e?(0,ml().c6)(u,e):void 0}),[o,h,u]);let j;return j=o.type===Om().qG?(0,se.jsx)(m().sA,{id:"manageTeamsOwnerFilter.filterTitle.onlyOrphanedTeams",defaultMessage:"Owner: None"}):b?(0,se.jsx)(m().sA,{id:"manageTeamsOwnerFilter.filterTitle.withSpecifiedOwner",defaultMessage:"Owner: {teamOwnerName}",values:{teamOwnerName:b}}):(0,se.jsx)(m().sA,{id:"manageTeamsOwnerFilter.filterTitle.unset",defaultMessage:"Owner"}),(0,se.jsx)(Y().A,{mode:Y().C.Pill,title:j,disabled:0===t.length,icon:nf,iconStyles:{...p.icon,...o.type!==Om().wf&&p.blueFill},items:f().oE([d]),hasItemsSelected:(0,vs().O9)(d),onChange:S,labelText:{title:j,tokenInputPlaceholder:u.formatMessage({defaultMessage:"Search teamspace owner...",id:"manageTeamsOwnerFilter.searchOwner.placeholder"}),resultSectionTitle:u.formatMessage({defaultMessage:"Select users",id:"manageTeamsOwnerFilter.searchOwner.resultsTitle"}),componentDebugName:"ManageTeamsSearchOwnerFilter"},performRequest:v,renderResultMenuItem:y,renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})}const rf={viewBox:"0 0 16 16",svg:(0,se.jsx)("path",{d:"M7.755 2.26a.55.55 0 0 1 .49 0l.962.482a7.3 7.3 0 0 0 3.277.774h.11c.302 0 .547.244.547.547v4.333a4.92 4.92 0 0 1-2.983 4.524l-1.943.833a.55.55 0 0 1-.43 0l-1.943-.833A4.92 4.92 0 0 1 2.86 8.396V4.062c0-.302.245-.546.547-.546h.11c1.138 0 2.26-.265 3.277-.774zm2.567 4.123a.55.55 0 0 0-.944-.566L7.371 9.163 6.268 7.875a.55.55 0 1 0-.836.716l1.6 1.867a.55.55 0 0 0 .89-.075z"})},lf=(0,gt().wt)("checkmarkShieldFillSmall",rf),df="showAll",cf="showTeamsWithSecurityOverrides",uf={[df]:{key:df,name:(0,se.jsx)(m().sA,{id:"ManageTeamsSecurityOverridesFilter.showAllOption",defaultMessage:"Show all"}),originName:(0,se.jsx)(m().sA,{id:"ManageTeamsSecurityOverridesFilter.showAllPlaceholder",defaultMessage:"Security"}),showFilterAsOffWhenSelected:!0},[cf]:{key:cf,name:(0,se.jsx)(m().sA,{id:"ManageTeamsSecurityOverridesFilter.showTeamsWithSecurityOverrides",defaultMessage:"Has overrides"})}};function gf(e){let{manageTeamsStore:t}=e;const s=(0,a().v3)(),n=(0,r().K8)((()=>t.state.showTeamsWithSecurityOverrides),[t]),o=(0,l().IS)((e=>({securityIcon:{width:gt().Ev.sm,height:gt().Ev.sm,marginRight:4,fill:e.mediumIconColor},blueFill:{fill:Rn().Ay.blue}})),[]),d=[uf[df],uf[cf]],c=(0,i.useCallback)((e=>{t.setState({...t.state,showTeamsWithSecurityOverrides:e.key===cf}),Nm().hj(s,{filter:"securityOverrides",value:e.key})}),[t,s]),u=uf[n?cf:df];return(0,se.jsx)(Vm,{selectItems:d,currentSelectedItem:u,onChange:c,icon:lf({...o.securityIcon,...n&&o.blueFill})})}const pf=16,mf=5;function ff(e){let{manageTeamsStore:t,teamStores:s}=e;const n=(0,l().IS)((()=>({container:{display:"flex",alignItems:"center",marginTop:20,flexWrap:"wrap",gap:`${pf}px ${mf}px`},searchContainer:{maxWidth:250,marginRight:"auto"},archivedTeamsSwitch:{display:"flex",alignItems:"center",marginLeft:15,marginRight:15},archivedTeamsLabel:{marginLeft:10},dropdownContainer:{display:"flex",alignContent:"stretch",flexWrap:"wrap",gap:`${pf}px ${mf}px`}})),[]),a=(0,r().K8)((()=>t.state.searchQuery),[t]),o=(0,i.useCallback)((e=>{t.update((t=>({...t,searchQuery:e})))}),[t]);return(0,se.jsxs)("div",{style:n.container,children:[(0,se.jsx)(hf,{style:n.searchContainer,onChange:o,value:a}),(0,se.jsxs)("div",{style:n.dropdownContainer,children:[(0,se.jsx)(tf,{manageTeamsStore:t}),(0,se.jsx)(of,{teamStores:s,manageTeamsStore:t}),(0,se.jsx)(Ym,{manageTeamsStore:t}),(0,se.jsx)(gf,{manageTeamsStore:t})]})]})}function hf(e){let{style:t,value:s,onChange:n}=e;const a=(0,m().tz)(),o=(0,l().IS)((e=>({input:{boxShadow:e.inputBoxShadow,borderRadius:100,fontSize:12},searchIcon:{width:gt().Ev.sm,height:gt().Ev.sm,marginRight:2,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]),r=(0,i.useCallback)((e=>n(e.target.value)),[n]);return(0,se.jsx)(Ls().A,{placeholder:a.formatMessage({defaultMessage:"Search teamspaces...",id:"manageTeamsFilterRow.searchFilter.placeholder"}),style:{...o.input,...t},value:s,onChange:r,left:(0,zm().u)(o.searchIcon),format:Ls().C.Small,showClearButton:!0})}var Sf=()=>s(468006),xf=()=>s(753199),vf=()=>s(553965);function yf(e){let{teamStore:t,accessLevel:i,isTeamOwner:n,isArchivedTeam:o,onChangeAccessLevel:d,width:c}=e;const u=(0,a().v3)(),g=function(e){return(0,r().K8)((()=>e.isDefault()),[e])}(t),p=(0,s(209592).Z)({teamStore:t,onChange:d,isDefault:g}),f=g?"default":i,S=p.find((e=>e.key===f)),x=!n||o||Boolean(null==S?void 0:S.disableAllOptionsTooltip);let v;x&&(null!=S&&S.disableAllOptionsTooltip||!n?v=(0,se.jsx)(m().sA,{id:"manageTeamsAccessCell.onlyTeamOwnersCanChangeAccessLevel",defaultMessage:"Only teamspace owners can change teamspace access levels"}):o&&(v=(0,se.jsx)(m().sA,{id:"manageTeamsAccessCell.archivedTeamCannotChangeAccessLevel",defaultMessage:"Cannot change access level for archived team"})));const y=(0,s(233510).c)(),b=(0,l().IS)((e=>{const t=e.lightTextColor;return{selectButton:{paddingLeft:8,marginLeft:-8,maxWidth:c},label:{...x&&{color:t},fontSize:h().J.UIRegular.desktop,fontWeight:h().Wy.regular},chevron:{width:10,marginLeft:4,fill:e.mediumIconColor,...x&&{fill:t}},tooltip:{width:200}}}),[x,c]);if(!S)throw new Error(`Selected access level is not an option found in team access level option: ${f}`);return(0,se.jsx)(Gm().A,{items:p,getKey:e=>e.key,selectedItem:S,onSelect:e=>"private"!==e.key||y?e.onSelect():jt().K(u,{from:"team_security_settings",upsell:{type:"product",product:"business",limit:{type:"none"}}}),renderItem:e=>(0,se.jsx)(pe().A,{textWrap:!0,style:b.tooltip,placement:he().W.Bottom,disableTooltip:!e.value.tooltip,renderTooltip:()=>e.value.tooltip,render:t=>(0,se.jsx)(qn().A,{title:e.value.title,...(0,vf().A)(e,t)})}),disabled:x,renderOrigin:e=>(0,se.jsx)(pe().A,{textWrap:!0,style:b.tooltip,disableTooltip:!v,renderTooltip:()=>v,alignment:he().C.Center,placement:he().W.Left,render:t=>(0,se.jsxs)(Rt().p,{style:b.selectButton,disabled:x,...(0,vf().A)(e,t),children:[(0,se.jsx)(_s().j,{style:b.label,children:S.level}),(0,od().b)(b.chevron)]})})})}function bf(e){let{teamOwnerIds:t,manageTeamsStore:n}=e;const a=(0,r().K8)((()=>Je().default.state.currentSpaceStore),[]),o=(0,m().tz)(),{userIds:d,groupIds:c}=t,u=(0,i.useMemo)((()=>[...d,...c]),[c,d]),{userStore:g,groupStore:p}=(0,r().K8)((()=>{if(!a)return{userStore:void 0,groupStore:void 0};const{filterByOwner:e}=n.state;let t=d[0]||c[0];if(e.type===Om().wA){const s=e.id;u.includes(s)&&(t=s)}return t?d.includes(t)?{userStore:(0,_r().z)({userId:t,currentSpaceStore:a}),groupStore:void 0}:{userStore:void 0,groupStore:(0,s(510473).E)({groupId:t,spaceStore:a})}:{userStore:void 0,groupStore:void 0}}),[a,c,n,u,d]),f=(0,r().K8)((()=>null!=g&&g.isDefined()?(0,ml().c6)(o,g.getModel()):null!=p&&p.isDefined()?p.getName():void 0),[g,p,o]),S=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",fontSize:h().J.UIRegular.desktop,overflow:"hidden"},userAvatar:{paddingRight:6},nMoreOwnersText:{paddingLeft:3,color:e.mediumTextColor},noOwners:{marginRight:8,color:e.lightTextColor},userName:{flexShrink:1}})),[]);return u.length<1?(0,se.jsx)("div",{style:S.noOwners,children:(0,se.jsx)(m().sA,{id:"manageTeamsOwnersCell.noOwners",defaultMessage:"No owners"})}):(0,se.jsxs)("div",{style:S.container,children:[(0,se.jsx)(Sa().A,{style:S.userAvatar,avatarShouldShowShadow:!0,userStore:g,size:20}),(0,se.jsx)(_s().j,{style:S.userName,children:f}),u.length>1&&(0,se.jsx)("div",{style:S.nMoreOwnersText,children:(0,se.jsx)(m().sA,{id:"manageTeamsOwnersCell.nMoreOwnersLabel",defaultMessage:"+{numAdditionalOwners}",values:{numAdditionalOwners:u.length-1}})})]})}const jf=[Om().o6,Om().xT,Om().p2,Om().MQ,Om().rN],Af={[Om().p2]:{headerTitle:(0,se.jsx)(m().sA,{id:"manageTeamsTable.columnTitle.access",defaultMessage:"Access"}),renderCell:e=>{let{data:t,environment:s}=e;return(0,se.jsx)(yf,{teamStore:t.store,accessLevel:t.accessLevel,isTeamOwner:t.isCurrentUserOwnerOfTeam,isArchivedTeam:t.isArchivedTeam,onChangeAccessLevel:(e,i)=>dp().qH({environment:s,store:t.store,accessLevel:e,isDefault:i,teamName:t.name,from:"manage_teams_table"}),width:90})},colWidth:{width:90},hasClickableContents:!0},[Om().o6]:{headerTitle:(0,se.jsx)(m().sA,{id:"manageTeamspacesTable.columnTitle.teamspace",defaultMessage:"Teamspace"}),renderCell:e=>{let{data:t}=e;return(0,se.jsx)(Cf,{teamStore:t.store,isArchivedTeam:t.isArchivedTeam,name:t.name})},colWidth:{minWidth:30,widthPercent:35}},[Om().xT]:{headerTitle:(0,se.jsx)(m().sA,{id:"manageTeamsTable.columnTitle.owners",defaultMessage:"Owners"}),renderCell:e=>{let{data:t,manageTeamsStore:s}=e;return(0,se.jsx)(bf,{teamOwnerIds:t.owners,manageTeamsStore:s})},colWidth:{minWidth:60,widthPercent:25}},[Om().MQ]:{headerTitle:(0,se.jsx)(m().sA,{id:"manageTeamsTable.columnTitle.updated",defaultMessage:"Updated"}),renderCell:e=>{let{data:t}=e;return t.lastUpdated&&(0,se.jsx)(wf,{lastUpdatedMillis:t.lastUpdated})},colWidth:{minWidth:50,widthPercent:15}},[Om().rN]:{headerTitle:void 0,renderCell:e=>{let{data:t}=e;return(0,se.jsx)(s(693386).OutlinerTeamOverflow,{teamStore:t.store,from:"manage_teams_table"})},colWidth:{width:30},hasClickableContents:!0}};function Cf(e){let{teamStore:t,name:i,isArchivedTeam:n}=e;const o=(0,a().v3)(),r=(0,s(211825).G)(t),d=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden"},teamIcon:{marginRight:12},nameAndMembersContainer:{display:"flex",flexDirection:"column",minWidth:0},nameAndArchivedPillContainer:{display:"flex"},nameText:{lineHeight:"18px",fontWeight:h().Wy.regular},smallText:{fontSize:(0,s(115512).ny)(o,"UISmall"),color:e.mediumTextColor,fontWeight:h().Wy.regular},archivedTag:{marginLeft:5}})),[o]),c=`${(0,s(192940).h)(t)}`;return(0,se.jsxs)("div",{style:d.container,children:[(0,se.jsx)(cp().x,{style:d.teamIcon,size:28,store:t,disabled:!0}),(0,se.jsxs)("div",{style:d.nameAndMembersContainer,children:[(0,se.jsxs)("div",{style:d.nameAndArchivedPillContainer,children:[(0,se.jsx)(_s().j,{style:d.nameText,children:i}),n&&(0,se.jsx)(X().A,{desktopStyle:d.archivedTag,mobileStyle:d.archivedTag,children:(0,se.jsx)(m().sA,{id:"manageTeamsTable.archivedTag",defaultMessage:"Archived"})})]}),(0,se.jsxs)(_s().j,{style:d.smallText,children:[(0,se.jsx)(m().sA,{id:"manageTeamsTableColumnData.numMembersLabel",defaultMessage:"{numMembers, plural, one {1 member} other {{numMembers} members}}",values:{numMembers:c}}),r?(0,se.jsxs)(se.Fragment,{children:[" â€¢ ",(0,se.jsx)(m().sA,{id:"manageTeamsTableColumnData.joinedLabel",defaultMessage:"Joined"})]}):void 0]})]})]})}function wf(e){let{lastUpdatedMillis:t}=e;return(0,se.jsx)(_s().j,{children:(0,mo().W_)(t,"very_short",ni().locale)})}function Mf(e){let{teamStores:t,manageTeamsStore:s}=e;const n=(0,a().v3)(),o=(0,r().K8)((()=>Je().default.state.currentUserStore),[]),{sortAscending:d,sortColumn:c}=(0,r().K8)((()=>{const{sortAscending:e,sortColumn:t}=s.state;return{sortAscending:e,sortColumn:t}}),[s]),u=(0,r().K8)((()=>{const e=null==o?void 0:o.id;return e?f().oE(t.map((t=>{if(!t.canRead()||!t.isReady())return;const{ownerUserIds:s,ownerGroupIds:i}=t.getAllOwnerIds();return{store:t,name:t.getName()??"",owners:{userIds:s,groupIds:i},isCurrentUserOwnerOfTeam:Boolean(t.isOwner(e)),hasSecurityOverrides:t.hasSecurityOverrides(),accessLevel:t.getTeamAccessLevel(),isArchivedTeam:(0,Sf().Sh)({archived_by:t.getArchivedBy()}),lastUpdated:t.getLastEditedTime()}}))):[]}),[null==o?void 0:o.id,t]),g=(0,r().K8)((()=>{const{showOnlyArchivedTeams:e,filterByOwner:t,showTeamsWithSecurityOverrides:i,filterAccess:n}=s.state;return u.filter((t=>e?t.isArchivedTeam:!t.isArchivedTeam)).filter((e=>!i||e.hasSecurityOverrides)).filter((e=>{if(n===Om().b4&&"open"!==e.accessLevel)return!1;if(n===Om().lX&&"closed"!==e.accessLevel)return!1;if(n===Om().OD&&"private"!==e.accessLevel)return!1;switch(t.type){case Om().qG:return e.owners.userIds.length+e.owners.groupIds.length===0;case Om().wA:return[...e.owners.userIds,e.owners.groupIds].includes(t.id);case Om().wf:return!0;default:(0,vs().HB)(t)}}))}),[s,u]),p=(0,r().K8)((()=>{const{sortAscending:e,sortColumn:t}=s.state;return(0,Um().WQ)({data:g,sortAscending:e,sortColumn:t})}),[s,g]),m=(0,r().K8)((()=>(0,pm().Ay)(s.state.searchQuery,p,(e=>e.name))),[s,p]),h=(0,i.useCallback)((e=>dp().F2({environment:n,teamId:e,tab:lp().p.Members,from:"manage_teams_table"})),[n]),S=(0,l().IS)((e=>({container:{marginTop:17,tableLayout:"fixed",borderCollapse:"collapse",width:"100%",minWidth:jf.reduce(((e,t)=>e+Bf(Af[t].colWidth)+Rf),0)},tableHeaderRow:{borderTop:`1px solid ${e.tableDividerColor}`,borderBottom:`1px solid ${e.tableDividerColor}`},noTeamsLabel:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]),x=(0,i.useCallback)((e=>{const{sortColumn:t,sortAscending:i}=s.state,a=e===t&&!i;s.setState({...s.state,sortAscending:a,sortColumn:e}),Nm().xl(n,{sortBy:e,sortOrder:i?"ascending":"descending"})}),[s,n]),v=(0,i.useCallback)((()=>{s.reset()}),[s]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsxs)("table",{style:S.container,children:[(0,se.jsx)("thead",{children:(0,se.jsx)("tr",{style:S.tableHeaderRow,children:jf.map((e=>(0,se.jsx)(kf,{column:e,onSortableColumnClick:x,sortAscending:d,sortColumn:c},`header_${e}`)))})}),(0,se.jsxs)("tbody",{children:[(0,se.jsx)("tr",{children:jf.map((e=>(0,se.jsx)("td",{},`padding_row_${e}`)))}),m.map((e=>(0,se.jsx)(Tf,{onShowTeamSettings:h,teamData:e,manageTeamsStore:s},`${e.store.id}_row`)))]})]}),(0,se.jsx)(Df,{style:S.noTeamsLabel,numItemsAfterFilter:m.length,numItemsBeforeFilter:t.length,onResetFilters:v})]})}function Tf(e){let{teamData:t,manageTeamsStore:s,onShowTeamSettings:n}=e;const[a,o]=(0,i.useState)(!1),r=(0,i.useCallback)((()=>o(!0)),[]),d=(0,i.useCallback)((()=>o(!1)),[]),c=(0,i.useCallback)((e=>{Pf(e,(()=>n(t.store.id)))}),[n,t.store.id]),u=!t.isArchivedTeam,g=(0,l().IS)((e=>({teamRow:{cursor:u?"pointer":"default",borderBottom:`1px solid ${e.tableDividerColor}`}})),[u]);return(0,se.jsx)("tr",{onMouseLeave:u?d:void 0,onMouseEnter:u?r:void 0,style:g.teamRow,onClick:u?c:void 0,children:jf.map((e=>(0,se.jsx)(If,{isRowHovered:a,teamData:t,columnData:Af[e],manageTeamsStore:s},`${t.store.id}_${e}`)))})}function kf(e){let{column:t,onSortableColumnClick:s,sortColumn:i,sortAscending:n}=e;const a=Af[t],o=(0,l().IS)((e=>({th:Uf(a),innerDiv:{display:"flex",alignItems:"center",minWidth:Bf(a.colWidth),height:32},text:{fontSize:h().J.UISmall.desktop,fontWeight:h().Wy.regular,color:e.mediumTextColor},sortButton:{padding:5,margin:-5,overflow:"hidden",maxWidth:"100%"},sortIcon:{fill:e.mediumTextColor,width:12,height:12,marginLeft:4}})),[a]),r=(0,se.jsx)(_s().j,{style:o.text,children:a.headerTitle}),d=(c=t,Om().LR.includes(c)?(0,se.jsxs)(Rt().p,{style:o.sortButton,onClick:()=>s(t),children:[r,(()=>{if(t===i)return(0,tu().m)({...o.sortIcon,...n&&{transform:"rotate(180deg)"}})})()]}):r);var c;return(0,se.jsx)("th",{style:o.th,children:(0,se.jsx)("div",{style:o.innerDiv,children:d})})}function If(e){let{teamData:t,columnData:s,isRowHovered:i,manageTeamsStore:n}=e;const o=(0,a().v3)(),r=(0,l().IS)((e=>({td:{...Uf(s),...i&&{background:e.buttonHoveredBackground}},innerDiv:{minWidth:Bf(s.colWidth),fontSize:h().J.UIRegular.desktop,color:e.regularTextColor,height:56,display:"flex",alignItems:"center"}})),[s,i]),d=Pf,c=Boolean(s.hasClickableContents);return(0,se.jsx)("td",{style:r.td,children:(0,se.jsx)("div",{style:r.innerDiv,onClick:c?d:void 0,children:s.renderCell({environment:o,data:t,manageTeamsStore:n})})})}function Df(e){let{style:t,numItemsBeforeFilter:s,numItemsAfterFilter:i,onResetFilters:n}=e;if(0!==i)return null;let a;return a=0!==s?(0,se.jsx)(m().sA,{id:"manageTeamsTable.emptyManageTeamTableDisclaimer.teamsFilteredOut",defaultMessage:"Could not find any teamspaces. <linkbutton>Reset your filters</linkbutton>",values:{linkbutton:e=>(0,se.jsx)(di().A,{onClick:n,children:e})}}):(0,se.jsx)(m().sA,{id:"manageTeamsTable.emptyManageTeamTableDisclaimer.noTeamsExist",defaultMessage:"Could not find any teamspaces."}),(0,se.jsx)(me().A,{isSmall:!0,style:t,children:a})}function Pf(e,t){(0,xf().SQ)({event:e,context:xf().y$.ManageTeamsRowClick,callback:t})}const Rf=10,_f={paddingLeft:Rf/2,paddingRight:Rf/2};function Bf(e){return"minWidth"in e?e.minWidth:e.width}function Uf(e){let t={};return t="width"in e.colWidth?{width:e.colWidth.width}:{width:`${e.colWidth.widthPercent}%`,minWidth:e.colWidth.minWidth},{..._f,...t}}function Ef(e){let{}=e;const{isMobile:t=!1}=(0,a().Y0)(),s=(0,a().v3)(),n=(0,r().uB)(Om()._5),o=(0,l().IS)((()=>({container:{marginTop:8},header:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},subheader:{display:"flex",flexDirection:"column",flexShrink:1,overflow:"hidden"}})),[]),{unarchivedTeamIds:d,archivedTeamIds:c,isLoading:u}=(0,r().K8)((()=>{const e=Wm().A.state;return"loaded"!==e.loadingState?{unarchivedTeamIds:[],archivedTeamIds:[],isLoading:!0}:{unarchivedTeamIds:e.unarchivedTeamIds,archivedTeamIds:e.archivedTeamIds,isLoading:!1}}),[]),g=(0,r().K8)((()=>u?[]:(0,Um().Gd)({environment:s,teamIds:[...d,...c]})),[c,s,u,d]),p=(0,i.useCallback)((()=>dp().vn("workspace_settings")),[]);return(0,se.jsxs)("div",{style:o.container,children:[(0,se.jsxs)(re().A,{large:!t,style:o.header,small:!0,children:[(0,se.jsxs)("div",{style:o.subheader,children:[(0,se.jsx)(m().sA,{id:"manageTeamsBrowser.title",defaultMessage:"Manage teamspaces"}),(0,se.jsx)(me().A,{isSmall:!0,style:{marginTop:3},children:(0,se.jsx)(m().sA,{id:"manageTeamsBrowser.subtitle",defaultMessage:"Manage all teamspaces you have access to here"})})]}),(0,se.jsx)(ks().A,{onClick:p,size:"lg",className:Oe().e6S,children:(0,se.jsx)(m().sA,{id:"manageTeamsBrowser.newTeamButton.text",defaultMessage:"New teamspace"})})]}),u?(0,se.jsx)(ii().A,{}):(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ff,{teamStores:g,manageTeamsStore:n}),(0,se.jsx)(Mf,{teamStores:g,manageTeamsStore:n})]})]})}var Lf=()=>s(941541);function Of(){const e=(0,a().v3)(),{currentSpaceStore:t,currentUserStore:n}=(0,r().K8)((()=>{const{currentSpaceStore:e,currentUserStore:t}=Je().default.state;return{currentSpaceStore:e,currentUserStore:t}}),[]);return(0,i.useEffect)((()=>{if("loading"===Wm().A.state.loadingState||!t||!n)return;qi().P({environment:e,messageStoreEmitValue:-1});const i=Lf().Ay.addListener((0,s(921997).Li)({userId:n.id,spaceId:t.id}),void 0,((t,s)=>{qi().P({environment:e,messageStoreEmitValue:s})}),void 0,e);return function(){i&&Lf().Ay.removeListener(i,e)}}),[t,n,e]),null}const Wf=i.memo(Of);var zf=()=>s(885067);function qf(){const e=(0,a().Y0)();return(0,se.jsx)(re().A,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full",children:(0,se.jsx)(m().sA,{id:"teamsWorkspaceSettings.title",defaultMessage:"Teamspace settings"})})}function Ff(){const e=(0,a().v3)(),t=(0,r().K8)((()=>Je().default.state.currentSpaceStore),[]),s=(0,r().uB)(void 0,it().A),n=(0,r().K8)((()=>t&&s.getValueForSpace(t)),[t,s]),o=(0,r().K8)((()=>(0,fe().Qd)()),[]),l=(null==n?void 0:n.disableTeamCreation)??!1,d=(null==n?void 0:n.disableTeamGuests)??!1,c=void 0===n,u=(0,i.useCallback)((()=>{const s=l?"allowTeamCreation":"disableTeamCreation";t&&n&&(0,Um().zY)({newSettingValue:s,environment:e,spaceStore:t,workspaceSecuritySettings:n})}),[t,l,e,n]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(zf().y,{disabled:c,onChange:u,title:(0,se.jsx)(m().sA,{id:"teamWorkspacesSettings.disableTeamCreation.workspaceOwners.title",defaultMessage:"Limit teamspace creation to only workspace owners"}),description:(0,se.jsx)(m().sA,{id:"teamWorkspacesSettings.disableTeamCreation.workspaceOwners.caption",defaultMessage:"Only allow workspace owners to create teamspaces"}),selected:l}),(0,se.jsx)(si().A,{size:34}),o&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(zf().y,{disabled:c,onChange:async function(){if(t&&n){if(!Boolean(n.disableTeamGuests)){const{accept:e}=await b().Gh({message:(0,se.jsx)(m().sA,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.message",defaultMessage:"Are you sure you want to disable teamspace guests?"}),description:(0,se.jsx)(m().sA,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.description",defaultMessage:"This action will remove all teamspace guests from the workspace."}),acceptLabel:(0,se.jsx)(m().sA,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.acceptButton",defaultMessage:"Disable and remove teamspace guests"})});if(!e)return}Jt().V(e,{securitySettingsState:{...n,disableTeamGuests:!n.disableTeamGuests},spaceStore:t})}},title:(0,se.jsx)(m().sA,{id:"teamWorkspacesSettings.disableTeamGuests.workspaceOwners.title",defaultMessage:"Allow teamspace owners to add teamspace guests"}),description:(0,se.jsx)(m().sA,{id:"teamWorkspacesSettings.disableTeamGuests.workspaceOwners.caption",defaultMessage:"This will allow teamspace owners with membership admin permissions to add teamspace guests. Disabling will remove all teamspace guests."}),selected:!d}),(0,se.jsx)(si().A,{size:34})]})]})}function Nf(e){let{}=e;const t=(0,l().IS)((()=>({learnMoreLinkContainer:{paddingTop:6,paddingBottom:20}})),[]),s=(0,a().v3)(),n=(0,r().K8)((()=>Je().default.state.currentSpaceStore),[]),o=(0,i.useCallback)((async e=>{let{addedTeams:t,removedTeams:i}=e;n&&await(0,Um().R6)({environment:s,addedTeams:t,removedTeams:i,spaceStore:n})}),[n,s]),{unarchivedTeams:d,isLoaded:c}=(0,Cs().NA)(),u=0===d.length?null:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Lm().A,{unarchivedTeams:d,onUpdate:o,description:(0,se.jsx)(me().A,{isSmall:!0,isMultiline:!0,children:(0,se.jsx)(m().sA,{id:"teamsWorkspaceSettings.defaultTeams.caption",defaultMessage:"Choose teamspaces that all new and current workspace members will automatically join"})})}),(0,se.jsx)(si().A,{size:34})]});return(0,se.jsxs)(Dt().Ay,{children:[(0,se.jsx)(qf,{}),(0,se.jsx)(Em().A,{helpCenterLocation:"settingsAndPermissions",analyticsFrom:"teams_learn_more_workspace_settings",containerStyle:t.learnMoreLinkContainer}),(0,se.jsx)(Wf,{}),c?(0,se.jsxs)(se.Fragment,{children:[u,(0,se.jsx)(Ff,{}),(0,se.jsx)(Ef,{})]}):null]})}var Kf=()=>s(885475),Gf=()=>s(705540),Vf=()=>s(948914),Hf=()=>s(675910),$f=()=>s(441977);function Yf(){const e=(0,r().K8)((()=>{var e;return null===(e=Vf().A.state.preferences)||void 0===e?void 0:e.onStartup}),[]);if(!e)return null;const t=[{key:"continue",label:(0,se.jsx)(m().sA,{id:"OnDesktopAppStartupSetting.continue.label",defaultMessage:"Continue where you left off"}),renderIcon:e=>(0,Hf().M)({width:20,height:20,...e})},{key:"default_page",label:(0,se.jsx)(m().sA,{id:"OnDesktopAppStartupSetting.defaultPage.label",defaultMessage:"Your default page"}),renderIcon:e=>(0,$f().J)({width:20,height:20,...e})}];return(0,se.jsx)(Fs().A,{isMobile:!1,title:(0,se.jsx)(m().sA,{id:"onStartup.title",defaultMessage:"On startup"}),caption:(0,se.jsx)(m().sA,{id:"onStartup.description",defaultMessage:"Choose what to show when the Notion app starts."}),type:"dropdown",currentOption:e,options:t,onSelectOption:e=>{Gf().electronAppFeatures.setPreference("onStartup",e)}})}var Qf=()=>s(420844);const Jf=function(){const e=(0,r().K8)((()=>{var e;return null===(e=Vf().A.state.preferences)||void 0===e?void 0:e.onStartup}),[]),t=(0,a().v3)(),i=(0,Qf().OC)({environment:t}),n=(0,r().K8)((()=>!t.device.isMobile&&Boolean("on"===Se().default.getEligibleGroup({experimentId:"settings_refresh_2025",defaultGroup:"control"}))),[t]),o=[...(0,r().K8)((()=>n&&Array.isArray(i)?i:[]),[n,i]),e?{key:"on-startup",renderSettingsItem:()=>(0,se.jsx)(Yf,{})}:void 0,{key:"default-page",renderSettingsItem:()=>(0,se.jsx)(s(993342).A,{isMobile:!1})}].filter(vs().O9);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(re().A,{large:!0,divider:"full",children:n?(0,se.jsx)(m().sA,{id:"desktopAppSettings.settingsSection.title",defaultMessage:"Desktop app"}):(0,se.jsx)(m().sA,{id:"desktopAppStartupSettings.settingsSection.title",defaultMessage:"Startup"})}),(0,se.jsx)(nd().U,{items:o}),(0,se.jsx)(si().A,{size:48,isHidden:!0})]})};var Xf=()=>s(704444);const Zf=function(e){let{isMobile:t}=e;const s=(0,a().v3)(),n=(0,r().K8)((()=>Je().default.state.currentUserSettingsStore),[]),o=(0,r().K8)((()=>{var e;return null==n||null===(e=n.getSettings())||void 0===e?void 0:e.profile_discoverable}),[n])??!0,l=(0,i.useCallback)((e=>{const t=!o;T().createAndCommit({userAction:"ProfileDIscoverabilitySettings.onToggleOption",environment:s,canUndo:!0,perform:e=>{n&&k().mJ({userSettingsStore:n,data:{profile_discoverable:t},transaction:e})}})}),[s,o,n]),d=(0,se.jsx)(m().sA,{id:"profileDiscoverabilitySettings.title",defaultMessage:"Profile discoverability"}),c=(0,se.jsx)(m().sA,{id:"profileDiscoverabilitySettings.caption",defaultMessage:"Users with your email can see your name and profile picture when inviting you to a new workspace. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,se.jsx)(di().A,{external:!0,href:(0,qe().xS)("guides.profileSettings"),onClick:e=>{e.stopPropagation()},children:e})}});return(0,se.jsx)(Fs().A,{isMobile:t,title:d,caption:c,isOn:o,type:"toggle",onToggle:()=>l(n)})};const eh=(0,s(149397).k)((function(e){let{passwordRequestStore:t,userEmailDomainSettings:n,billingData:l}=e;const{isPhone:d,isMobile:c,isElectron:u,isMobileNative:g}=(0,a().Y0)(),p=(0,a().v3)(),f=(0,r().K8)((()=>Xe().A.state.online),[]),h=(0,Qf().OC)({environment:p}),S=(0,Qf().jo)(),x=(0,r().uB)(void 0,rt().A);(0,o().l)((()=>{w().Q(p,x)}));const v=(0,r().K8)((()=>x.state.accountSettings),[x]),y=(0,Ge().y)(),b=(0,r().K8)((()=>(0,Nt().xu)(p)),[p]),j=(0,r().K8)((()=>c&&t?(0,Qf().xF)({isPhone:d,isMobileNative:g,showOfflineSettings:y,passwordRequestStore:t,userEmailDomainSettings:n,billingData:l,accountSettings:v}):b?S:h),[h,c,d,g,y,t,n,v,l,S,b]);(0,i.useEffect)((()=>(u&&Gf().setGlobalShortcutsEnabled(!1),()=>{u&&Gf().setGlobalShortcutsEnabled(!0)})),[u]);const A=[{key:"timezone-auto",renderSettingsItem:()=>(0,se.jsx)(sd,{isMobile:c})},{key:"timezone-manual",renderSettingsItem:()=>(0,se.jsx)(td,{isMobile:c})}].filter(vs().O9),C=[(0,r().K8)((()=>(0,Xf().y)(p)),[p])?{key:"cookies",renderSettingsItem:()=>(0,se.jsx)(Xf().A,{isMobile:c})}:void 0,{key:"view-history",renderSettingsItem:()=>(0,se.jsx)(s(991627).L,{isMobile:c})},{key:"profile-discoverability",renderSettingsItem:()=>(0,se.jsx)(Zf,{isMobile:c})}].filter(vs().O9);return f?(0,se.jsxs)(Dt().Ay,{disableScroller:c,children:[(0,se.jsx)(re().A,{large:!c,divider:"full",children:b?(0,se.jsx)(m().sA,{id:"preferences.settingsSection.title",defaultMessage:"Preferences"}):(0,se.jsx)(m().sA,{id:"mySettings.settingsSection.title",defaultMessage:"My settings"})}),(0,se.jsx)(nd().U,{items:j}),b?(0,se.jsx)(ud,{}):null,(0,se.jsx)(si().A,{size:48,isHidden:!0}),(0,se.jsx)(Jf,{}),b?null:(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(re().A,{large:!c,divider:"full",children:(0,se.jsx)(m().sA,{id:"notificationAndPersonalSettings.dateAndTimeSection.title",defaultMessage:"Date & time"})}),(0,se.jsx)(nd().U,{items:A}),(0,se.jsx)(si().A,{size:48,isHidden:!0})]}),(0,se.jsx)(re().A,{large:!c,divider:"full",children:(0,se.jsx)(m().sA,{id:"mySettings.privacySection.title",defaultMessage:"Privacy"})}),(0,se.jsx)(nd().U,{items:C})]}):(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(me().A,{isSmall:!0,style:{textAlign:"center"},children:(0,se.jsx)(m().sA,{defaultMessage:"Please go online to manage settings.",id:"mySettings.goOnline.prompt"})})})}));var th=()=>s(271084);function sh(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?(0,tu().m)({...s,transform:"rotate(180deg)"}):(0,tu().m)(s)}function ih(e){let{users:t,store:s,extraColumns:n,initialSort:a,tableStyle:o}=e;const[l,d]=(0,i.useState)(a),c=(0,m().tz)();function u(e,t){return(0,se.jsxs)(ge().A,{disabled:!t.sortable,ignoreLocalHoverState:!0,onClick:()=>{!function(e){d({column:e,asc:(null==l?void 0:l.column)===e&&!(null!=l&&l.asc)})}(e)},style:{display:"flex",alignItems:"center"},children:[t.title,t.sortable&&l&&l.column===e&&sh({up:l.asc})]},e)}const g=(0,i.useMemo)((()=>({title:(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"60%"},sortable:!0,renderer:e=>(0,se.jsx)(xe().A,{actorStore:e}),getValue:e=>e.getDisplayName(c)})),[c]),p=(0,i.useMemo)((()=>({name:g,...n})),[n,g]),h=f().HP(p).map((e=>({key:e,header:u(e,p[e]),style:p[e].style}))),S=(0,r().K8)((()=>{const e=t.map((e=>ee().LU.createChildStore(s,{table:B().oo,id:e.userId}))).filter((e=>e.isDefined()));return l?e.sort(((e,t)=>{const s=p[l.column].getValue(e),i=p[l.column].getValue(t),n=s<i?-1:s>i?1:0;return l.asc?n:-1*n})):e}),[t,s,p,l]);return(0,se.jsx)(mu().A,{columns:h,rows:S.map((e=>{const t=Object.values(p).map(((t,s)=>t.renderer?t.renderer(e):(0,se.jsx)(i.Fragment,{children:t.getValue(e)},s)));return{key:e.id,columns:t}})),tableStyle:o})}function nh(e){const{store:t}=e,{isOnline:s,subscriptionDataStoreData:i,userSimilarityData:n,visibleUsersLoaded:a,visibleUsers:o}=(0,r().K8)((()=>{const e=Mt().subscriptionDataStoreInstance.state,s=e?(0,Kt().Be)(e):[],i=f().Si(s.map((e=>ee().LU.createChildStore(t,{table:B().oo,id:e.userId}).isReady())));return{isOnline:Xe().A.state.online,subscriptionDataStoreData:e,userSimilarityData:th().k.state||{},visibleUsersLoaded:i,visibleUsers:s}}),[t]);if(!s)return(0,se.jsx)(me().A,{isSmall:!0,style:{textAlign:"center"},children:(0,se.jsx)(m().sA,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."})});if(!i)return(0,se.jsx)(ii().A,{style:{margin:"calc(50% - 1em) auto"}});if(!a)return(0,se.jsx)(ii().A,{style:{margin:"calc(50% - 1em) auto"}});const l={style:{},title:(0,se.jsx)(se.Fragment,{children:"Similarity Score"}),sortable:!0,renderer:e=>{var t;return(0,se.jsx)(se.Fragment,{children:(null===(t=n[e.id])||void 0===t?void 0:t.toFixed(3))||0})},getValue:e=>n[e.id]||0};return(0,se.jsxs)("div",{style:{width:"100%"},children:[(0,se.jsx)(re().A,{large:!0,divider:"full",style:{marginBottom:16,paddingBottom:4,display:"flex"},children:"User Similarity Scores"}),(0,se.jsx)(ih,{users:o,store:t,extraColumns:{similarityColumn:l},initialSort:{column:"similarityColumn",asc:!1},tableStyle:{borderTop:void 0}})]})}const ah={overflow:"auto",paddingTop:10,paddingBottom:12},oh={display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between",paddingLeft:4,paddingRight:4},rh="user_settings",lh={user_settings:{},profile:{},notifications:{},notifications_and_settings:{},connected_apps:{},language_and_region:{},offline:{},settings:{},teams:{adminOnly:!0,membersOnly:!0},members:{membersOnly:!0},analytics:{membersOnly:!0,enterpriseOnly:!0},plans:{membersOnly:!0},billing:{},subscription:{},requests:{adminOnly:!0},security:{adminOnly:!0},identity_provisioning:{adminOnly:!0},admin_content_search:{adminOnly:!0,enterpriseOnly:!0},integrations:{adminOnly:!0},imports:{},audit_log:{adminOnly:!0,enterpriseOnly:!0},sites:{membersOnly:!0},custom_emoji:{membersOnly:!0},verified_pages:{membersOnly:!0},experiments:{},performance_toolbar:{},user_similarity_scores:{},collection_debug:{},offline_mode_debug:{}},dh=(0,m().YK)({dialogLabel:{id:"spaceSettings.dialogLabel",defaultMessage:"Settings & members"}});function ch(e){let{spaceStore:t,userStore:n}=e;const d=(0,a().v3)(),{open:c,currentTab:u,openedFrom:g,upsellType:p}=(0,r().K8)((()=>{const{open:e,currentTab:t,openedFrom:s,upsellType:i}=lt().A.state;return{open:e,currentTab:t,openedFrom:s,upsellType:i}}),[]),m=(0,r().uB)(void 0,s(194763).A),f=(0,r().uB)(void 0,rt().A),h=(0,r().uB)(void 0,it().A),x=(0,r().uB)(void 0,st),v=(0,r().uB)(void 0,ot);(0,o().l)((()=>{const e=h.getValueForSpace(t);e&&h.setState(e)})),(0,o().l)((()=>{w().Q(d,f)})),(0,i.useEffect)((()=>{c&&y().bt(d,{tab:u,from:g,upsell_type:p})}),[c]);const b=(0,i.useCallback)((()=>{ut().Ow(d),ph(),S().Wy({environment:d,spaceId:t.id,canAdmin:t.canAdmin()})}),[d,t]),j=(0,i.useCallback)((()=>{Ah((()=>{lt().A.setState({...lt().A.state,open:!1}),s(189157).A.reset(),v.reset(),ph(),dt().A.reset()}),d,t,m,f,h)}),[d,t,m,f,h,v]),A=(0,l().IS)((()=>({modalInner:{width:1150,maxWidth:"calc(100vw - 100px)",height:"calc(100vh - 100px)",overflow:"hidden",borderRadius:12,maxHeight:715}})),[]);return(0,se.jsx)(ai().A,{ariaLabel:L().A.formatMessage(dh.dialogLabel),open:c,innerStyle:A.modalInner,onOpen:b,onDismiss:j,render:()=>(0,se.jsx)(Th,{spaceStore:t,userStore:n,spaceBasicSettingsStore:m,spaceProfileSettingsStore:f,securitySettingsStore:h,samlSettingsStore:x,spaceDomainSettingsStore:v}),className:Oe().w7$})}function uh(e,t){const s=lh[e];return!(s.adminOnly&&!t.canAdmin())&&(!(s.membersOnly&&!t.canRead())&&!(s.enterpriseOnly&&!(0,p().OX)(t.getSubscriptionTier())))}function gh(e,t){return!!Xe().A.state.online||(!(!t||"offline"!==e)||e===rh)}function ph(){W().A.reset(),K.reset()}function mh(e){let{userStore:t}=e;const s=(0,m().tz)(),i=(0,r().K8)((()=>t.getFullName(s)),[s,t]);return i?(0,se.jsx)(me().A,{style:{fontWeight:h().Wy.medium},children:i}):null}function fh(e,t,s){const{disablePublicAccess:i,disableGuests:n,disableMoveToSpace:a,disableExport:o,disableSpacePageEdits:r,disablePublicAccessRequests:l,disableTeamCreation:d,disableMembershipRequests:c,disableExternalMembershipRequests:u,disableGuestMembershipRequests:g,enableAiFeature:p,disableTeamGuests:m,enableGuestInviteRequests:f,enableAiTraining:h,zeroRetentionEnabled:S,disableMemberUpgradeRequests:x}=e.state;T().createAndCommit({userAction:"SpaceSettings.attemptCloseCurrentTab",environment:s,canUndo:!0,perform:e=>{C().l3({environment:s,disablePublicAccess:i,disableGuests:n,disableMoveToSpace:a,disableExport:o,disableSpacePageEdits:r,disablePublicAccessRequests:l,transaction:e,spaceStore:t,disableTeamCreation:d,disableMembershipRequests:c,disableExternalMembershipRequests:u,disableGuestMembershipRequests:g,enableAiFeature:Boolean(p),disableTeamGuests:m,enableGuestInviteRequests:f,enableAiTraining:Boolean(h),zeroRetentionEnabled:Boolean(S),disableMemberUpgradeRequests:Boolean(x)})}})}function hh(e){let{spaceStore:t}=e;const s=(0,a().v3)(),i=(0,r().K8)((()=>(0,fe().bW)(s)),[s]),n=(0,r().K8)((()=>dt().A.state.count),[]);return i?(0,se.jsx)(km,{}):(0,se.jsx)(Qe().A,{store:t,unreadAccessRequests:n})}function Sh(e){let{spaceStore:t}=e;const s=(0,a().v3)(),i=(0,r().O$)(Mt().subscriptionDataStoreInstance),n=(0,Ct()._3)({spaceId:t.id}),o=(0,r().K8)((()=>ct().A.getData(s,{spaceId:t.id})),[t,s]);if(n){if((0,g().Fq)(n)){const e=Kt().XK(i),s=Kt().BA(i);return s&&e?(0,se.jsx)(It().A,{spaceStore:t,billingData:n,subscriptionData:e,upcomingInvoiceData:o,customerData:s}):null}return"unsubscribed_admin"!==(null==i?void 0:i.type)?null:(0,se.jsx)(zt,{spaceStore:t,data:i})}return null}function xh(){const e=(0,r().K8)((()=>(0,ze().LB)()),[]),t=(0,r().K8)((()=>(0,ze().jw)()),[]);return(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(Yl().A,{genericImporterEnabled:e,zipImporterEnabled:t})})}function vh(e){return{fontSize:12,lineHeight:1,marginBottom:1,color:e.mediumTextColor,fontWeight:h().Wy.semibold,alignItems:"center",display:"flex",height:24,paddingLeft:12,paddingRight:11,textOverflow:"ellipsis",overflow:"hidden"}}function yh(){const e=(0,l().DP)(),t=(0,a().v3)(),s=(0,r().K8)((()=>(0,Le()._m)(t)),[t]),i=(0,r().K8)((()=>null==s?void 0:s.getEmail()),[s]),n={size:20,hasTooltip:!0,avatarShouldShowShadow:!0,userStore:s};return(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",height:44,paddingLeft:12,paddingRight:12},children:[(0,se.jsx)("div",{"aria-hidden":!0,style:(0,Pt().P6)(e),children:(0,se.jsx)(Sa().A,{...n})}),s?(0,se.jsxs)("div",{children:[(0,se.jsx)(mh,{userStore:s}),i&&(0,se.jsx)(me().A,{isSmall:!0,children:i})]}):(0,se.jsx)(m().sA,{id:"spaceSettings.sidebar.personalSettingsSection.userDetails.title",defaultMessage:"Me"})]})}function bh(e){let{tab:t}=e;const s=(0,l().DP)(),i=(0,a().v3)(),n=(0,r().K8)((()=>Je().default.state.currentSpaceStore),[]);return(0,r().K8)((()=>"members"===t&&i.device.isDesktop&&(null==n?void 0:n.canEditMembership())&&(0,fe().x3)()&&!(0,fe().bW)(i)&&dt().A.state.count>0),[t,i,n])?(0,se.jsx)(ng().m,{color:s.redBadgeBackground}):null}function jh(e){let{spaceProfileSettingsStore:t,billingData:s}=e;const i=(0,g().eh)(s,"student");return(0,se.jsx)(Ku,{isEducationPlan:i,spaceProfileSettingsStore:t})}async function Ah(e,t,s,i,n,a){const{currentUserStore:o,currentUserSettingsStore:r}=Je().default.state;if(!o||!r)throw new Error("No user or settings store.");const l=(0,se.jsx)(m().sA,{id:"spaceSettings.closeSettingsDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Save changes?"}),d=(0,se.jsx)(m().sA,{id:"spaceSettings.closeSettingsDialog.confirmationButton.label",defaultMessage:"Yes"}),c=(0,se.jsx)(m().sA,{id:"spaceSettings.closeSettingsDialog.cancelationButton.label",defaultMessage:"No"}),{currentTab:u}=lt().A.state;if("profile"===u){if(!f().n4(n.state,n.getValueForUser(o,r,L().A.getIntl()))){const{profilePhoto:s,name:i,startDayOfWeek:a}=n.state;return i?b().ui({message:l,showCancel:!0,keepFocus:!0,items:[{label:(0,se.jsx)(m().sA,{id:"spaceSettings.closeSettingsDialog.updateSettingsButton.label",defaultMessage:"Update"}),color:"blue",onAccept:()=>{T().createAndCommit({userAction:"SpaceSettings.attemptCloseCurrentTab",environment:t,canUndo:!0,perform:e=>{const{currentUserStore:t}=Je().default.state;if(t&&x().b({userStore:t,data:{name:i,profilePhoto:s},transaction:e}),r){const t=r.getSettings();(null==t?void 0:t.start_day_of_week)!==a&&k().mJ({userSettingsStore:r,data:{start_day_of_week:a},transaction:e})}}}),e()}}],handleCancel:()=>{e()}}):b().f1((0,se.jsx)(m().sA,{id:"profileSettings.personalInfoSection.nameMissing.message",defaultMessage:"Please fill in name."})),!0}e()}else if("settings"===u&&s.canEdit()){const n=!f().n4(a.state,a.getValueForSpace(s)),o=!f().n4(i.state,i.getValueForSpace(s));if(n||o){const{accept:r}=await b().Gh({message:l,acceptLabel:d,cancelLabel:c});return r?(o&&C().Ef({environment:t,spaceStore:s,spaceBasicSettingsStore:i}),n&&fh(a,s,t),e()):e(),!0}e()}else if("audit_log"===u)ph(),e();else if("analytics"===u)nt().A.reset(),e();else if("plans"===u&&s.canAdmin()){const i=a.getValueForSpace(s);!f().n4(a.state,a.getValueForSpace(s))&&i&&(a.setState(i),fh(a,s,t)),e()}else"teams"===u?(qi().U(),e()):e();return!1}function Ch(e){let{tab:t,spaceStore:s,spaceBasicSettingsStore:i,spaceProfileSettingsStore:o,securitySettingsStore:d,spaceDomainSettingsStore:c}=e;const u=(0,l().DP)(),g=(0,a().v3)(),{itemRef:p,onKeyDown:m,onFocus:f,isTabbable:S}=(0,n().e)(),x=(0,r().K8)((()=>lt().A.state.currentTab===t),[t]),v=(0,r().K8)((()=>uh(t,s)),[s,t]),b=(0,r().K8)((()=>Pt().ug[t](g,u)),[g,t,u]),j=(0,r().K8)((()=>Pt().j$[t](g)),[g,t]),A=(0,r().K8)((()=>Pt().pG[t](g)),[g,t]),C=(0,Ge().y)(),w=(0,r().K8)((()=>!gh(t,C)),[t,C]),M=(0,Gt().EF)(Mt().subscriptionDataStoreInstance),T="plans"===t&&!M,k=x&&!T,I=(0,l().IS)((e=>({icon:{...(0,Pt().P6)(e,T),...w?{fill:e.text.quaternary}:{}},title:w?{color:e.text.quaternary}:T?{color:e.text.uiBluePrimary}:{}})),[w,T]);return v?(0,se.jsxs)(ge().A,{ref:p,onKeyDown:m,onFocus:f,disallowTabbing:!S,role:"tab","aria-selected":x,"aria-controls":x?`settings-tabpanel-${t}`:void 0,id:`settings-tab-${t}`,disabled:w,hovered:x,style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:12,paddingRight:12,borderRadius:4,marginTop:1,marginBottom:1,minHeight:27,position:"relative"},onClick:e=>{if(x)return null;Ah((()=>{lt().A.setState({...lt().A.state,currentTab:t,defaultSubtab:void 0}),c.reset(),y().Y7(g,{tab:t})}),g,s,i,o,d)},testId:`settings-tab-${t}`,children:[(0,se.jsxs)("div",{style:{display:"flex",alignItems:"center",...k&&{fontWeight:h().Wy.semibold}},children:[(0,se.jsx)("div",{style:I.icon,children:b}),(0,se.jsx)(me().A,{style:I.title,isMultiline:!0,children:j}),A]}),(0,se.jsx)(bh,{tab:t})]}):null}function wh(e){let{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:n,spaceDomainSettingsStore:o,renderBelowPrompt:u}=e;const g=(0,l().DP)(),p=(0,a().v3)(),f=(0,m().tz)(),h=(0,r().K8)((()=>function(e){var t,s;const{currentSpaceViewStore:i,currentSpaceStore:n,currentUserStore:a}=Je().default.state;if(!n||!uh("analytics",n))return!1;if(null==a||!a.id)return!1;if(null==n||!n.isDefined())return!1;const o=null==i?void 0:i.getSettings();return"dismissed"!==(null==o||null===(t=o.space_analytics_settings_prompt)||void 0===t?void 0:t.status)&&"hidden"!==(null==o||null===(s=o.space_analytics_settings_prompt)||void 0===s?void 0:s.status)&&(M().OV(e),!0)}(p)),[p]),S=(0,r().K8)((()=>Je().default.state.currentSpaceStore),[]),x=(0,r().K8)((()=>null==S?void 0:S.canAdmin()),[S]),v=(0,r().K8)((()=>function(e,t){var s,i;const{currentSpaceViewStore:n,currentSpaceStore:a,currentUserStore:o}=Je().default.state;if(null==o||!o.id)return!1;if(null==a||!a.isDefined())return!1;const r=null==n?void 0:n.getSettings();return"dismissed"!==(null==r||null===(s=r.mfa_settings_prompt)||void 0===s?void 0:s.status)&&"hidden"!==(null==r||null===(i=r.mfa_settings_prompt)||void 0===i?void 0:i.status)&&"off"===t.state.accountSettings.mfaStatus&&(M().EB(e),!0)}(p,i)),[p,i]);if(h){const e=x?(0,se.jsx)(m().sA,{id:"enterpriseSpaceAnalyticsSettingsPrompt.caption.workspaceOwner",defaultMessage:"Explore how members & guests are engaging with this workspace, common searches that are made, and content engagement metrics with workspace analytics."}):(0,se.jsx)(m().sA,{id:"enterpriseSpaceAnalyticsSettingsPrompt.caption.member",defaultMessage:"See how your content is performing by reviewing metrics like number of views or unique visitors using workspace analytics."});return(0,se.jsx)(bd,{onDismiss:()=>M().Jm(p),onClick:()=>{Ah((()=>{lt().A.setState({...lt().A.state,currentTab:"analytics",defaultSubtab:void 0}),o.reset(),y().Y7(p,{tab:"analytics"}),M().p$(p)}),p,t,s,i,n)},onView:e=>{"enterprise"===(null==S?void 0:S.getSubscriptionTier())&&M().p$(e)},onClickLearnMore:()=>{const e=(0,qe().xS)("guides.workspaceAnalytics");A().f({environment:p,url:e})},descriptionMessage:e,title:(0,se.jsx)(m().sA,{id:"enterpriseSpaceAnalyticsSettingsPrompt.title",defaultMessage:"New workspace analytics"}),buttonText:(0,se.jsx)(m().sA,{id:"enterpriseSpaceAnalyticsSettingsPrompt.cta",defaultMessage:"View metrics"}),buttonAriaLabel:f.formatMessage({id:"enterpriseSpaceAnalyticsSettingsPrompt.cta",defaultMessage:"View metrics"}),icon:(0,c().J)((0,Pt().uF)(g))})}return v?(0,se.jsx)(bd,{onClick:()=>{Ah((()=>{lt().A.setState({...lt().A.state,open:!0,currentTab:"profile",defaultSubtab:void 0,highlightedSetting:lt().r.TwoStepVerification}),y().Y7(p,{tab:"profile"})}),p,t,s,i,n)},onView:M().VW,onDismiss:()=>M().FJ(p),onClickLearnMore:()=>{const e=(0,qe().xS)("guides.mfa");A().f({environment:p,url:e})},descriptionMessage:(0,se.jsx)(m().sA,{id:"mfaSettingsPrompt.description",defaultMessage:"2-step verification, also known as 2FA or MFA, is now available. Add a secondary method of verification used during login."}),title:(0,se.jsx)(m().sA,{id:"mfaSettingsPrompt.title",defaultMessage:"Add an extra layer of security to your account."}),buttonText:(0,se.jsx)(m().sA,{id:"mfaSettingsPrompt.button.label",defaultMessage:"Enable 2-step verification"}),buttonAriaLabel:f.formatMessage({id:"mfaSettingsPrompt.button.ariaLabel",defaultMessage:"Enable 2-step verification"}),icon:(0,d().g)((0,Pt().uF)(g))}):u}function Mh(e){let{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d}=e;const c=(0,l().DP)(),f=(0,a().v3)(),h=f.device.isMobileNative,S=(0,Ct().f_)({spaceId:t.id}),x=(0,r().K8)((()=>lt().A.state.currentTab),[]),y=(0,g().et)(S),b=function(e,t){const s=(0,r().O$)(Mt().subscriptionDataStoreInstance),i=(0,Ct()._3)({spaceId:t.id});return!(!s||!i||e||!((0,g().Fq)(i)||i.paymentMethod||s.hasPaidNonzero))}(y,t),j=(0,r().K8)((()=>t.canAdmin()),[t]),A=function(){const e=(0,a().v3)(),t=(0,Vt().r)(),s=(0,Ct().f_)({spaceId:null==t?void 0:t.id});return(0,r().K8)((()=>{if(!t)return!1;const i=t.canAdmin(),n=(0,g().AI)(s);return(0,Nt().Gy)(e)&&i&&(0,p().jR)(n)}),[s,e,t])}(),C=Boolean((0,g().KH)(S,"plan")),w=(0,Ge().y)(),[M,T,k,I]=(0,r().K8)((()=>{const e=(0,Fe().l)();return[e,e,e,e&&Se().default.checkGate({gateName:"download_for_offline"})]}),[]),D=(0,Ye().kg)(),P=(0,r().K8)((()=>{const e=Ze().A.getData(f,{spaceId:t.id}),s=e&&(null==e?void 0:e.pointers.length)>0;return!f.device.isMobile&&((0,We().wA)({spaceStore:t})||s)}),[f,t]);(0,Ke().A)({shouldPreserveTextSelection:!0,shouldPreserveBlockSelection:!0,shouldRestoreSelection:!0});const R=(0,r().K8)((()=>(0,Ne().Ur)({environment:f,spaceStore:t})),[f,t]),_=(0,r().K8)((()=>(0,Nt().xu)(f)),[f]);return(0,se.jsxs)("div",{style:oh,children:[(0,se.jsx)("div",{style:ah,children:(0,se.jsx)(n().Y,{direction:"vertical",children:(0,se.jsxs)("div",{role:"tablist","aria-orientation":"vertical",children:[(0,se.jsx)("div",{style:vh(c),children:(0,se.jsx)(m().sA,{id:"spaceSettings.sidebar.personalSettingsSection.title",defaultMessage:"Account"})}),_?null:(0,se.jsx)(yh,{}),(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"profile"}),(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"user_settings"}),(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"notifications"}),(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"connected_apps"}),_?null:(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"language_and_region"}),w&&(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"offline"}),(0,se.jsx)(si().A,{size:18,isHidden:!0}),(0,se.jsx)("div",{style:vh(c),children:(0,se.jsx)(m().sA,{id:"spaceSettings.sidebar.workspaceSettingsSection.title",defaultMessage:"Workspace"})}),C||_||h?null:(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"plans"}),C||!b||_?null:(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"billing"}),(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"settings"}),A&&!_?(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"requests"}):null,_?null:(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"teams"}),(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"members"}),_?(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"teams"}):null,_?(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"security"}):null,_?(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"identity_provisioning"}):null,!f.device.isMobile&&(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"analytics"}),!f.device.isMobile&&_&&(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"admin_content_search"}),!f.device.isMobile&&_&&(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"audit_log"}),_?(0,se.jsx)(si().A,{size:16,dividerColor:c.stroke.secondary}):null,y&&(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"subscription"}),R&&(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"verified_pages"}),(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"sites"}),P&&(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"custom_emoji"}),_?null:(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"security"}),_?null:(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"identity_provisioning"}),!f.device.isMobile&&!_&&(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"admin_content_search"}),(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"integrations"}),!f.device.isMobile&&(0,se.jsx)("span",{onClick:()=>{const e=u().JW();et().A.setState({flowId:e}),v().kY(f,{from:"settings",flowId:e})},children:(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"imports"})}),!f.device.isMobile&&!_&&(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"audit_log"}),_?(0,se.jsx)(si().A,{size:16,dividerColor:c.stroke.secondary}):null,A&&_?(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"requests"}):null,b?(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"billing"}):null,!_&&!C||h?null:(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"plans"}),M&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(si().A,{size:18,isHidden:!0}),(0,se.jsx)("div",{style:vh(c),children:(0,se.jsx)(m().sA,{id:"spaceSettings.sidebar.developmentSettingsSection.title",defaultMessage:"Development"})}),T&&(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"experiments"}),D&&(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"performance_toolbar"}),k&&(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"user_similarity_scores"}),T&&(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"collection_debug"}),I&&(0,se.jsx)(Ch,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,tab:"offline_mode_debug"})]})]})})}),(0,se.jsx)(wh,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:o,spaceDomainSettingsStore:d,renderBelowPrompt:j?(0,se.jsx)(kt,{currentSettingsTab:x}):null})]})}function Th(e){let{spaceStore:t,userStore:s,spaceBasicSettingsStore:i,spaceProfileSettingsStore:n,securitySettingsStore:a,samlSettingsStore:o,spaceDomainSettingsStore:l}=e;const{organizationOverrides:d}=(0,Bi().n)({spaceId:t.id}),c=(0,r().K8)((()=>lt().A.state.currentTab),[]),u=(0,Ct()._3)({spaceId:t.id}),g=(0,Ge().y)(),p=(0,r().K8)((()=>function(e,t,s,i,n,a,o,r,l,d,c){const u={profile:()=>(0,se.jsx)(jh,{spaceProfileSettingsStore:n,billingData:d}),notifications_and_settings:()=>(0,se.jsx)(md().A,{isMobile:!1,isMobileNative:!1,billingData:d}),user_settings:()=>(0,se.jsx)(eh,{billingData:d}),notifications:()=>(0,se.jsx)(xd,{}),language_and_region:()=>(0,se.jsx)(ud,{}),connected_apps:()=>(0,se.jsx)(Kf().A,{location:"settings-page"}),offline:()=>(0,se.jsx)(Ve().x,{}),settings:()=>(0,se.jsx)(yc().Ay,{spaceStore:t,spaceBasicSettingsStore:i,securitySettingsStore:a,organizationOverrides:l}),requests:()=>(0,se.jsx)(Wi,{securitySettingsStore:a,spaceStore:t}),teams:()=>(0,se.jsx)(Nf,{}),members:()=>(0,se.jsx)(hh,{spaceStore:t}),analytics:()=>(0,se.jsx)(vc,{spaceStore:t}),plans:()=>(0,se.jsx)(Ht().o3,{}),billing:()=>(0,se.jsx)(Sh,{spaceStore:t}),subscription:()=>(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(Bm().L,{})}),security:()=>(0,se.jsx)(hi,{spaceStore:t,userStore:s,securitySettingsStore:a,organizationOverrides:l}),identity_provisioning:()=>(0,se.jsx)($l,{spaceStore:t,userStore:s,samlConfigStore:o,domainSettingsStore:r}),admin_content_search:()=>(0,se.jsx)(nn,{spaceStore:t,userStore:s}),integrations:()=>(0,se.jsx)(pa,{spaceStore:t,userStore:s,organizationOverrides:l}),audit_log:()=>(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(Ie,{spaceStore:t})}),imports:()=>(0,se.jsx)(xh,{}),sites:()=>(0,se.jsx)(Ee,{spaceStore:t}),custom_emoji:()=>(0,se.jsx)(Be,{spaceStore:t}),verified_pages:()=>(0,se.jsx)(Ni,{spaceStore:t}),experiments:()=>(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(xa().F,{})}),performance_toolbar:()=>(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(Ye().dt,{})}),user_similarity_scores:()=>(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(nh,{store:t})}),collection_debug:()=>(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)(Re,{})}),offline_mode_debug:()=>(0,se.jsx)(Dt().Ay,{children:(0,se.jsx)($e,{})})};let g=e;return gh(g,c)||(g=rh),uh(g,t)||(g=j().Yp(t)),g!==e&&j().Ow({currentTab:g}),u[g]}(c,t,s,i,n,a,o,l,d,u,g)),[c,o,a,i,l,n,t,s,d,u,g]);return(0,se.jsx)(ha().A,{capture:!0,allowEsc:!0,render:e=>(0,se.jsx)(jd,{sidebar:(0,se.jsx)(Mh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:n,securitySettingsStore:a,spaceDomainSettingsStore:l}),contentId:`settings-tabpanel-${c}`,contentLabelledBy:`settings-tab-${c}`,contentRole:"tabpanel",...e,children:p()})})}const kh=i.memo(ch)},26440:(e,t,s)=>{s.d(t,{w:()=>a});s(296540);var i=s(474848);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M3.442 13.102a.625.625 0 0 1-.884 0L.304 10.848a.625.625 0 0 1 .884-.884l1.187 1.187V10a7.625 7.625 0 1 1 2.303 5.46.625.625 0 1 1 .872-.895A6.375 6.375 0 1 0 3.625 10v1.151l1.187-1.187a.625.625 0 1 1 .884.884z"}),(0,i.jsx)("path",{d:"M9.375 5.725a.625.625 0 0 1 1.25 0v3.65H13.6a.625.625 0 0 1 0 1.25H10A.625.625 0 0 1 9.375 10z"})]})},a=(0,s(340498).wt)("clockArrowBack",n)},89244:(e,t,s)=>{s.d(t,{A:()=>h,i:()=>f});s(296540);var i=()=>s(56366),n=()=>s(994310),a=()=>s(959013),o=()=>s(278768),r=()=>s(449506),l=()=>s(901389),d=()=>s(705540),c=()=>s(589994),u=()=>s(404141),g=()=>s(554509),p=()=>s(843878),m=s(474848);async function f(e){let{locale:t,environment:s,origin:i}=e;o().wG(s,{locale:t,origin:i});const a=await r().callApi({eventName:"setlocale",environment:s,data:{locale:t}});"success"===a.type?(n().A.set("preferredLocale",t),await c().transactionQueue.drain(),s.device.isElectron?d().refreshAll({includeFocusedWindow:!0}):window.location.reload(!0)):l().Qg(a)}const h=function(e){const t=(0,s(484714).v3)(),n=(0,s(722872).Tf)(),{device:o,WindowSizeStore:r}=t,l=(0,i().K8)((()=>r.state.paddingLeftCSS),[r]),d=(0,i().K8)((()=>r.state.paddingRightCSS),[r]),c=(0,i().K8)((()=>u().A.state.highlightedSetting===u().r.LanguageSetting),[]),h=(0,s(141966).H)(o.isMobile,n),S=(0,s(401497).IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"auto",height:"auto",paddingLeft:o.isMobile?l:0,paddingRight:o.isMobile?d:0,...c?{backgroundColor:e.buttonHoveredBackground,marginLeft:-1*(0,p().AL)(o.isMobile),marginRight:-1*(0,p().AL)(o.isMobile),paddingLeft:(0,p().AL)(o.isMobile),paddingRight:(0,p().AL)(o.isMobile),marginTop:-1*h,marginBottom:h+5,paddingTop:h/2,paddingBottom:h/2}:{}}})),[o.isMobile,h,l,d,c]);return(0,m.jsx)("div",{style:S.container,children:(0,m.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",width:"100%"},children:[(0,m.jsxs)(s(84817).Y1,{direction:"vertical",gap:6,children:[(0,m.jsx)(g().D,{id:"languageRegionSettings.language.label",styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,m.jsx)(a().sA,{id:"languageRegionSettings.language.label",defaultMessage:"Language"})}),(0,m.jsx)(g().D,{id:"languageSettings.languageSwitcher.subtitle",styleName:"UIMedium-13px/Regular",colorName:"secondary",children:(0,m.jsx)(a().sA,{id:"languageSettings.languageSwitcher.subtitle",defaultMessage:"Change the language used in the user interface."})})]}),(0,m.jsx)(s(850369).A,{confirm:!0,onChange:e=>f({locale:e,environment:t,origin:"languageSettings"}),currentLocale:e.locale,origin:"languageSettings"})]})})}},104077:(e,t,s)=>{s.d(t,{r:()=>n});s(296540);const i={viewBox:"0 0 20 20",svg:(0,s(474848).jsx)("path",{d:"M10 2.355a2.35 2.35 0 0 0-2.253 1.686 5.06 5.06 0 0 0-2.803 4.527v1.189c0 .919-.334 1.806-.939 2.498l-.818.935c-.881 1.007-.166 2.583 1.173 2.583h3.02a2.65 2.65 0 0 0 5.24 0h3.02c1.339 0 2.054-1.576 1.173-2.583l-.818-.935a3.8 3.8 0 0 1-.939-2.498v-1.19a5.06 5.06 0 0 0-2.803-4.526A2.35 2.35 0 0 0 10 2.355m1.5 13.418a1.55 1.55 0 0 1-2.998 0zM8.909 4.564A1.104 1.104 0 0 1 10 3.605c.556 0 1.017.415 1.091.96l.049.353.329.138a3.81 3.81 0 0 1 2.337 3.512v1.189c0 1.221.444 2.401 1.248 3.32l.818.936a.307.307 0 0 1-.232.51H4.36a.308.308 0 0 1-.232-.51l.818-.935a5.04 5.04 0 0 0 1.248-3.321v-1.19c0-1.58.963-2.936 2.337-3.511l.33-.138z"})},n=(0,s(340498).wt)("bell",i)},112665:(e,t,s)=>{s.d(t,{J:()=>a});s(296540);var i=s(474848);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M12.806 8.074a.625.625 0 1 0-1.072-.643l-2.512 4.185-1.407-1.642a.625.625 0 1 0-.95.814l1.973 2.3a.625.625 0 0 0 1.01-.085z"}),(0,i.jsx)("path",{d:"M10.405 1.724a.625.625 0 0 0-.81 0L7.36 3.628l-2.926.233a.625.625 0 0 0-.573.574L3.628 7.36 1.724 9.595a.624.624 0 0 0 0 .81l1.904 2.234.233 2.926a.625.625 0 0 0 .574.573l2.926.234 2.234 1.904a.624.624 0 0 0 .81 0l2.234-1.904 2.926-.234a.625.625 0 0 0 .573-.573l.234-2.926 1.904-2.234a.624.624 0 0 0 0-.81L16.372 7.36l-.234-2.926a.625.625 0 0 0-.573-.573l-2.926-.234zM8.017 4.711 10 3.02l1.983 1.69c.1.085.224.136.355.147l2.597.207.207 2.597c.01.13.062.255.147.355L16.98 10l-1.69 1.983a.63.63 0 0 0-.147.355l-.207 2.597-2.597.207a.63.63 0 0 0-.355.147L10 16.98l-1.983-1.69a.63.63 0 0 0-.355-.147l-2.597-.207-.207-2.597a.63.63 0 0 0-.147-.355L3.02 10l1.69-1.983a.63.63 0 0 0 .147-.355l.207-2.597 2.597-.207a.63.63 0 0 0 .355-.147"})]})},a=(0,s(340498).wt)("badgeCheck",n)},238453:(e,t,s)=>{s.d(t,{U4:()=>b,Wz:()=>j,e6:()=>x,fC:()=>v,zA:()=>y});s(898992),s(354520),s(581454),s(737550);var i=s(296540),n=()=>s(484714),a=()=>s(56366),o=()=>s(187174),r=()=>s(798880),l=()=>s(196131),d=()=>s(496603),c=()=>s(720665),u=()=>s(746970),g=()=>s(449506),p=()=>s(317909),m=()=>s(47373),f=()=>s(28536),h=()=>s(351360),S=()=>s(630116);function x(e){let{spaceStore:t,requestType:s}=e;const i=v({spaceStore:t}),r=(0,n().v3)(),[{value:l=[]}]=(0,o().Yb)((async()=>{if(!i)return;const e=await g().callApi({eventName:"getAccessRequests",environment:r,data:{parentTable:"space",parentId:t.id,size:100,status:"pending"}});if("failed"===e.type)throw e.error;const s=e.data.accessRequestIds;return u().si(r,t,s)}),[t,r,i]),c=(0,a().K8)((()=>l.filter((e=>"pending"===e.accessRequest.status))),[l]),p=(0,f().T)({spaceStore:t,requests:c}),m=(0,a().K8)((()=>(0,d().yU)(c,p??[]).filter((e=>{const[t,i]=e;return"member"===s&&"space_membership_request"===i||("guest"===s&&"guest_invite_request"===i||"member_or_guest"===s&&("guest_invite_request"===i||"space_membership_request"===i))})).map((e=>{let[t]=e;return t}))),[s,p,c]);return(0,d().oE)(m)}function v(e){let{spaceStore:t}=e;return(0,a().K8)((()=>t.canEditMembership()&&(0,m().x3)()),[t])}function y(e){let{spaceStore:t,guests:s,internalDomains:i}=e;return(0,a().K8)((()=>{const e=s.map((e=>S().LU.createChildStore(t,{table:r().oo,id:e.userId}).getModel())).some((e=>(0,l().JD)(e,i)));return t.canEditMembership()&&e&&"enterprise"!==t.getSubscriptionTier()}),[s,i,t])}function b(e){let{requestType:t,spaceStore:s}=e;const i=x({spaceStore:s,requestType:t});return(0,a().K8)((()=>{const{currentSpaceViewStore:e}=h().default.state;if(e)return i.filter((s=>{const i=function(e){var t,s;let{requestType:i,currentSpaceViewStore:n}=e;const a=Date.now()-10*c().Gq,o="member"===i?null===(t=n.getSettings())||void 0===t?void 0:t.last_opened_member_request_tab:null===(s=n.getSettings())||void 0===s?void 0:s.last_opened_guest_request_tab;return o??a}({requestType:t,currentSpaceViewStore:e});return i<s.accessRequest.created_time})).length}),[t,i])}function j(e){let{requestType:t,spaceStore:s}=e;const a=(0,n().v3)(),o=v({spaceStore:s});(0,i.useEffect)((()=>{const{currentSpaceViewStore:e}=h().default.state;e&&o&&"member"!==t&&p().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:a,canUndo:!0,perform:t=>{p().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_guest_request_tab"],command:"set",args:Date.now()},transaction:t})}})}),[t,a,o]),(0,i.useEffect)((()=>()=>{const{currentSpaceViewStore:e}=h().default.state;e&&o&&"guest"!==t&&p().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:a,canUndo:!0,perform:t=>{p().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_member_request_tab"],command:"set",args:Date.now()},transaction:t})}})}),[t,a,o])}},344417:(e,t,s)=>{s.d(t,{u:()=>n});s(296540);const i={viewBox:"0 0 16 16",svg:(0,s(474848).jsx)("path",{d:"M7.1 1.975a5.125 5.125 0 1 0 3.155 9.164l3.107 3.107a.625.625 0 1 0 .884-.884l-3.107-3.107A5.125 5.125 0 0 0 7.1 1.975M3.225 7.1a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"})},n=(0,s(340498).wt)("magnifyingGlassSmall",i)},370360:(e,t,s)=>{s.d(t,{u:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("showDeletedPages",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M1.89551 8.5498C1.89551 11.9404 4.61621 14.668 8 14.668C11.3838 14.668 14.1045 11.9404 14.1045 8.5498C14.1045 5.16602 11.4043 2.45898 8.02051 2.45898C7.66504 2.45898 7.31641 2.49316 7.01562 2.55469L8.66992 0.920898C8.78613 0.797852 8.85449 0.640625 8.85449 0.462891C8.85449 0.09375 8.56738 -0.207031 8.20508 -0.207031C8.01367 -0.207031 7.84961 -0.138672 7.7334 -0.00878906L4.93066 2.8418C4.79395 2.97852 4.71875 3.15625 4.71875 3.33398C4.71875 3.51855 4.78711 3.68262 4.93066 3.82617L7.7334 6.65625C7.84961 6.7793 8.00684 6.84082 8.20508 6.84082C8.56738 6.84082 8.85449 6.55371 8.85449 6.17773C8.85449 6 8.78613 5.85645 8.66309 5.72656L6.80371 3.88086C7.15234 3.80566 7.56934 3.77148 8.02051 3.77148C10.666 3.77148 12.7646 5.88379 12.7646 8.5498C12.7646 11.2021 10.6455 13.3281 8 13.3281C5.35449 13.3281 3.23535 11.2021 3.23535 8.5498C3.23535 8.14648 2.97559 7.85938 2.5791 7.85938C2.17578 7.85938 1.89551 8.14648 1.89551 8.5498Z"})})},382055:(e,t,s)=>{s.d(t,{$3:()=>u,AQ:()=>d,Ae:()=>l,BL:()=>c,FL:()=>r,FX:()=>n,Vp:()=>o,XL:()=>a,nY:()=>g});var i=()=>s(989423);function n(e,t){i().vd(e,"workspace_creation_ability",t)}function a(e,t){i().vd(e,"workspace_creation_setting_updated",t)}function o(e,t){i().vd(e,"claimable_spaces_viewed",t)}function r(e,t){i().vd(e,"space_transfer_requested",t)}function l(e,t){i().vd(e,"space_transfer_completed",t)}function d(e,t){i().vd(e,"space_claim_upgrade_requested",t)}function c(e,t){i().vd(e,"space_claim_upgrade_completed",t)}function u(e,t){i().vd(e,"space_claim_deletion_started",t)}function g(e,t){i().vd(e,"space_claim_deletion_canceled",t)}},406965:(e,t,s)=>{s.d(t,{P:()=>u,U:()=>c});s(581454);var i=()=>s(945382),n=()=>s(534177),a=()=>s(37433),o=()=>s(646736),r=()=>s(351360),l=()=>s(134206),d=()=>s(912979);function c(){l().A.reset(),d().A.reset()}async function u(e){let{environment:t,messageStoreEmitValue:s,spaceStore:l}=e;if(!function(e){const t=d().A.state;switch(t.loadingState){case"uninitialized":return!0;case"loading":return!1;case"loaded":return-1===e||e!==t.messageStoreEmitValue;default:(0,n().HB)(t)}}(s))return!1;const{currentSpaceStore:c,currentUserStore:u}=r().default.state,g=c||l;if(!g||!u)return!1;"uninitialized"===d().A.state.loadingState&&d().A.setState({loadingState:"loading"});const p=await async function(e){let{environment:t,currentSpaceStore:s,currentUserStore:n}=e;const r=s.getModel(),l=n.id,d=(0,o().dp)(s,l).getModel();if(void 0===r||void 0===d)return;if((0,i().fK)({space:r,spaceUser:d})){return await(0,a().S)({environment:t,spaceStore:s,includeArchived:!0,currentUserId:l,minRoleOnTeamStores:"reader"})}const{teams:c}=await(0,a().qd)({fromCache:!1,environment:t,spaceStore:s,includeArchived:!0,currentUserId:l});return c}({environment:t,currentSpaceStore:g,currentUserStore:u});if(!(0,n().O9)(p))return d().A.setState({loadingState:"uninitialized"}),!1;const{archivedTeams:m,unarchivedTeams:f}=(0,a().vd)(p);return d().A.setState({loadingState:"loaded",archivedTeamIds:m.map((e=>e.id)),unarchivedTeamIds:f.map((e=>e.id)),messageStoreEmitValue:s}),!0}},452317:(e,t,s)=>{s.d(t,{lR:()=>G,P6:()=>W,uF:()=>z,pG:()=>K,ug:()=>q,j$:()=>N,DZ:()=>O});s(296540);var i=()=>s(340498),n=s(474848);const a={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M6.575 10A3.425 3.425 0 0 1 10 6.575v-.64c0-.445.533-.664.847-.35l1.328 1.329a.49.49 0 0 1 0 .7l-1.328 1.329a.495.495 0 0 1-.847-.35v-.918A2.325 2.325 0 1 0 12.325 10a.55.55 0 1 1 1.1 0 3.425 3.425 0 0 1-6.85 0"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},o=(0,i().wt)("arrowInCircleClockwiseInCircle",a);var r=()=>s(973238);const l={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.875 7c0-.345.28-.625.625-.625H13c.345 0 .625.28.625.625v4.5a.625.625 0 1 1-1.25 0V8.509l-5.12 5.12a.625.625 0 1 1-.884-.883l5.12-5.121H8.5A.625.625 0 0 1 7.875 7"}),(0,n.jsx)("path",{d:"M3.125 5.25c0-1.174.951-2.125 2.125-2.125h9.5c1.174 0 2.125.951 2.125 2.125v9.5a2.125 2.125 0 0 1-2.125 2.125h-9.5a2.125 2.125 0 0 1-2.125-2.125zm2.125-.875a.875.875 0 0 0-.875.875v9.5c0 .483.392.875.875.875h9.5a.875.875 0 0 0 .875-.875v-9.5a.875.875 0 0 0-.875-.875z"})]})},d=(0,i().wt)("arrowUpRightSquare",l);const c={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v6.04l-1.25-.632V7.5H3.625v6.25c0 .483.392.875.875.875h7.213l.454 1.25H4.5a2.125 2.125 0 0 1-2.125-2.125zm2.258.184a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25m2.625-.625a.625.625 0 1 0-1.25 0 .625.625 0 0 0 1.25 0m1.375.625a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25"}),(0,n.jsx)("path",{d:"m17.426 14.65.474-.17a.433.433 0 0 0 .047-.796l-5.644-2.85a.433.433 0 0 0-.604.533l2.268 6.239a.435.435 0 0 0 .815.007l.574-1.509 2.225 2.433a.758.758 0 1 0 1.122-1.022l-2.287-2.501z"})]})},u=(0,i().wt)("browserClick",c);const g={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M5.5 11.031a.5.5 0 0 0-.5.5v1.219a.5.5 0 0 0 .5.5h2.011a.5.5 0 0 0 .5-.5v-1.219a.5.5 0 0 0-.5-.5z"}),(0,n.jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zM4.5 5.375a.875.875 0 0 0-.875.875v.825h12.75V6.25a.875.875 0 0 0-.875-.875zm-.875 8.375c0 .483.392.875.875.875h11a.875.875 0 0 0 .875-.875V8.175H3.625z"})]})},p=(0,i().wt)("creditCard",g);const m={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.86 6.61a.969.969 0 1 0 0-1.938.969.969 0 0 0 0 1.937"}),(0,n.jsx)("path",{d:"M9.86 1.625a4.984 4.984 0 0 0-2.563 9.26v5.17c0 .18.078.351.213.47l1.938 1.695a.625.625 0 0 0 .823 0l1.937-1.695a.625.625 0 0 0 .063-.877l-1.104-1.289 1.104-1.288a.63.63 0 0 0 .15-.407v-1.779a4.984 4.984 0 0 0-2.563-9.26M6.124 6.609a3.734 3.734 0 1 1 5.394 3.347.63.63 0 0 0-.347.56v1.917l-1.303 1.52c-.2.234-.2.58 0 .813l1.05 1.226-1.06.927-1.312-1.148v-5.255a.63.63 0 0 0-.347-.56 3.73 3.73 0 0 1-2.075-3.347"})]})},f=(0,i().wt)("key",m);const h={viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"m3.246 16.825 4.42-1.895 4.41 1.89a.63.63 0 0 0 .514 0l4.656-1.995a.63.63 0 0 0 .379-.575V3.75a.625.625 0 0 0-.871-.574l-4.42 1.894-4.421-1.894a.63.63 0 0 0-.493 0l-4.666 2a.63.63 0 0 0-.379.574v10.5a.625.625 0 0 0 .871.575m9.713-1.523v-9.14l3.416-1.464v9.14zm-1.25-9.14v9.14l-3.417-1.464v-9.14zm-8.084 0 3.417-1.464v9.14l-3.417 1.464z"})},S=(0,i().wt)("map",h);var x=()=>s(835607);const v={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.755 6.169C8.277 5.519 9.05 5.125 10 5.125s1.723.393 2.245 1.044c.51.635.75 1.474.75 2.346s-.24 1.71-.75 2.346c-.522.65-1.294 1.044-2.245 1.044-.95 0-1.723-.394-2.245-1.044-.51-.635-.75-1.474-.75-2.346s.24-1.711.75-2.346m.975.782c-.293.365-.475.909-.475 1.564s.182 1.198.475 1.564c.281.35.694.576 1.27.576s.989-.226 1.27-.576c.294-.366.475-.909.475-1.564s-.181-1.199-.475-1.564c-.281-.35-.693-.576-1.27-.576-.576 0-.989.225-1.27.576"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 0 0-4.087 11.267c.789-1.397 2.333-2.33 4.087-2.33s3.298.933 4.087 2.33A6.375 6.375 0 0 0 10 3.625M13.049 15.6c-.547-1.049-1.697-1.789-3.05-1.789-1.351 0-2.501.74-3.048 1.789a6.35 6.35 0 0 0 3.049.775 6.34 6.34 0 0 0 3.049-.775"})]})},y=(0,i().wt)("personCircle",v),b={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.975 5.175a.55.55 0 1 0 0 1.1h4.05a.55.55 0 1 0 0-1.1zm-.55 2.692a.55.55 0 0 1 .55-.55h4.05a.55.55 0 1 1 0 1.1h-4.05a.55.55 0 0 1-.55-.55"}),(0,n.jsx)("path",{d:"M2.4 4.861c0-1.092.883-1.975 1.975-1.975h8.55c1.092 0 1.975.883 1.975 1.975v7.889h2.075c.345 0 .625.28.625.625v1.8a1.973 1.973 0 0 1-1.975 1.975h-8.55A1.973 1.973 0 0 1 5.1 15.175V7.25H3.025a.625.625 0 0 1-.625-.625zM9.554 15.9h6.07a.723.723 0 0 0 .726-.725V14H9.5v1.175c0 .256-.049.5-.137.725zm-2.025 0c.4-.002.72-.325.72-.725v-1.8c0-.345.28-.625.626-.625h4.775V4.861a.723.723 0 0 0-.725-.725H6.213c.088.224.137.469.137.725v10.314c0 .402.323.725.725.725zM5.1 4.861a.723.723 0 0 0-.724-.725.723.723 0 0 0-.725.725V6H5.1z"})]})},j=(0,i().wt)("scroll",b);var A=()=>s(735790);const C={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M8.387 5.933c.115-.523.861-.523.976 0l.202.918a1.75 1.75 0 0 0 1.334 1.334l.918.202c.523.115.523.861 0 .976l-.918.202a1.75 1.75 0 0 0-1.334 1.334l-.202.918c-.115.523-.861.523-.976 0l-.202-.918a1.75 1.75 0 0 0-1.334-1.334l-.918-.202c-.523-.115-.523-.861 0-.976l.918-.202a1.75 1.75 0 0 0 1.334-1.334z"}),(0,n.jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})]})},w=(0,i().wt)("sparkleMagnifyingGlass",C);var M=()=>s(959013),T=()=>s(186445),k=()=>s(47373),I=()=>s(972435),D=()=>s(807778),P=()=>s(134217),R=()=>s(749240),_=()=>s(401497),B=()=>s(171347),U=()=>s(238453);function E(){const e=(0,s(56366).K8)((()=>s(351360).default.state.currentSpaceStore),[]);return e?(0,n.jsx)(L,{spaceStore:e}):null}function L(e){let{spaceStore:t}=e;const s=((0,U().U4)({spaceStore:t,requestType:"guest"})??0)+((0,U().U4)({spaceStore:t,requestType:"member"})??0),i=(0,_().IS)((e=>({container:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",right:6,top:6},badge:{top:-3,right:-5}})),[]);return 0===s?null:(0,n.jsx)("div",{style:i.container,children:(0,n.jsx)(B().A,{count:s,style:i.badge,color:B().g.Red})})}const O=(0,M().YK)({offlineModeDebugTab:{id:"spaceSettingsSidebar.offlineModeDebugTab.title",defaultMessage:"Offline Mode"},offlineTab:{id:"spaceSettingsSidebar.offlineTab.title",defaultMessage:"Offline"},accountTab:{id:"spaceSettingsSidebar.accountTab.title",defaultMessage:"My account"},generalTab:{id:"spaceSettingsSidebar.generalTab.title",defaultMessage:"General"},settingsTab:{id:"spaceSettingsSidebar.settingsTab.title",defaultMessage:"Settings"},teamsTab:{id:"spaceSettingsSidebar.teamsTab.title",defaultMessage:"Teamspaces"},peopleTab:{id:"spaceSettingsSidebar.peopleTab.title",defaultMessage:"People"},membersTab:{id:"spaceSettingsSidebar.membersTab.title",defaultMessage:"Members"},explorePlansTab:{id:"spaceSettingsSidebar.explorePlansTab.title",defaultMessage:"Explore plans"},upgradePlanTab:{id:"spaceSettingsSidebar.upgradePlanTab.title",defaultMessage:"Upgrade plan"},billingTab:{id:"spaceSettingsSidebar.billingTab.title",defaultMessage:"Billing"},subscriptionTab:{id:"spaceSettingsSidebar.subscriptionTab.title",defaultMessage:"Subscription"},connectedAppsTab:{id:"spaceSettingsSidebar.connectedAppsTab.title",defaultMessage:"My connected apps"},connectionsTab:{id:"spaceSettingsSidebar.connectionsTab.title",defaultMessage:"Connections"},userConnectionsTab:{id:"spaceSettingsSidebar.userConnectionsTab.title",defaultMessage:"My connections"},securityTab:{id:"spaceSettingsSidebar.securityTab.title",defaultMessage:"Security"},securityAndDataTab:{id:"spaceSettingsSidebar.securityAndDataTab.title",defaultMessage:"Security & data"},identityTab:{id:"spaceSettingsSidebar.identityTab.title",defaultMessage:"Identity"},identityProvisioningTab:{id:"spaceSettingsSidebar.identity&ProvisioningTab.title",defaultMessage:"Identity & provisioning"},sitesTab:{id:"spaceSettingsSidebar.sites.title",defaultMessage:"Sites"},customEmojiTab:{id:"spaceSettingsSidebar.emoji.title",defaultMessage:"Emoji"},adminContentSearchTab:{id:"spaceSettingsSidebar.adminContentSearch.title",defaultMessage:"Content search"},languageAndRegionTab:{id:"spaceSettingsSidebar.languageAndRegionTab.title",defaultMessage:"Language & region"},integrationsTab:{id:"spaceSettingsSidebar.integrationsTab.title",defaultMessage:"Integrations"},spaceConnectionsTab:{id:"spaceSettingsSidebar.spaceConnectionsTab.title",defaultMessage:"Connections"},auditLogTab:{id:"spaceSettingsSidebar.auditLogTab.title",defaultMessage:"Audit log"},notificationsAndSettings:{id:"spaceSettingsSidebar.notificationsAndSettings.title",defaultMessage:"My notifications & settings"},preferences:{id:"spaceSettingsSidebar.preferences.title",defaultMessage:"Preferences"},mySettings:{id:"spaceSettingsSidebar.mySettings.title",defaultMessage:"My settings"},notifications:{id:"spaceSettingsSidebar.notifications.title",defaultMessage:"Notifications"},myNotifications:{id:"spaceSettingsSidebar.myNotifications.title",defaultMessage:"My notifications"},analyticsTab:{id:"spaceSettingsSidebar.analyticsTab.title",defaultMessage:"Analytics"},importTab:{id:"spaceSettingsSidebar.importsTab.title",defaultMessage:"Import"},verifiedPagesTab:{id:"spaceSettingsSidebar.verifiedPagesTab.title",defaultMessage:"Verified pages"},requestsTab:{id:"spaceSettingsSidebar.requestsTab.title",defaultMessage:"Requests"},experimentsTab:{id:"spaceSettingsSidebar.experimentsTab.title",defaultMessage:"Experiments"},performanceToolbarTab:{id:"spaceSettingsSidebar.performanceToolbarTab.title",defaultMessage:"Performance Toolbar"},userSimilarityScoresTab:{id:"spaceSettingsSidebar.userSimilarityScoresTab.title",defaultMessage:"User Similarity Scores"},collectionsDebugTab:{id:"spaceSettingsSidebar.collectionsDebug.title",defaultMessage:"Collections"}});function W(e,t){return{width:20,height:20,marginRight:8,color:t?e.text.uiBluePrimary:e.regularIconColor,fill:t?e.text.uiBluePrimary:e.regularIconColor}}function z(e){return{width:14,height:14,color:e.regularIconColor}}const q={profile:(e,t)=>{const i=(0,T()._m)(e);return(0,D().xu)(e)&&i?(0,n.jsx)("div",{style:W(t),children:(0,n.jsx)(s(453697).A,{size:20,hasTooltip:!0,avatarShouldShowShadow:!0,userStore:i})}):y()},notifications_and_settings:()=>(0,A().M)(),user_settings:()=>(0,A().M)(),notifications:()=>(0,s(104077).r)(),connected_apps:()=>d(),language_and_region:()=>(0,s(12193).D)(),offline:()=>(0,r().G)(),settings:()=>(0,s(212727).gearIcon)(),teams:()=>(0,s(737693).V)(),members:()=>(0,x().F)(),plans:e=>{const t=R().subscriptionDataStoreInstance.state;return t&&P().Fq(t)?S():(0,D().xu)(e)?(0,s(132855).G)():(0,s(911259).F)()},billing:()=>p(),subscription:()=>o(),requests:()=>(0,s(898615).F)(),security:()=>f(),identity_provisioning:()=>(0,s(15936).g)(),admin_content_search:()=>(0,s(207207).J)(),integrations:()=>(0,s(858141).p)(),audit_log:()=>j(),analytics:()=>w(),imports:()=>(0,s(820579).f)(),sites:()=>u(),custom_emoji:()=>(0,s(424139).emojiFaceIcon)(),experiments:()=>(0,s(824375).X)(),performance_toolbar:()=>(0,s(200582).m)(),user_similarity_scores:()=>(0,x().F)(),collection_debug:()=>(0,s(62616).c)(),offline_mode_debug:()=>(0,r().G)(),verified_pages:()=>(0,s(112665).J)()};function F(e){const t=(0,T()._m)(e);return(0,D().xu)(e)?t?(0,n.jsx)(s(14243).UserName,{userStore:t}):(0,n.jsx)(M().sA,{id:"spaceSettings.sidebar.personalSettingsSection.userDetails.title",defaultMessage:"Me"}):`${I().A.formatMessage(O.accountTab)}`}const N={profile:e=>F(e),notifications_and_settings:()=>I().A.formatMessage(O.notificationsAndSettings),user_settings:e=>(0,D().xu)(e)?I().A.formatMessage(O.preferences):I().A.formatMessage(O.mySettings),notifications:e=>(0,D().xu)(e)?I().A.formatMessage(O.notifications):I().A.formatMessage(O.myNotifications),connected_apps:e=>(0,D().xu)(e)?I().A.formatMessage(O.connectionsTab):I().A.formatMessage(O.userConnectionsTab),language_and_region:()=>I().A.formatMessage(O.languageAndRegionTab),offline:()=>I().A.formatMessage(O.offlineTab),settings:e=>(0,D().xu)(e)?I().A.formatMessage(O.generalTab):I().A.formatMessage(O.settingsTab),teams:()=>I().A.formatMessage(O.teamsTab),members:e=>(0,k().Qd)()||(0,k().bW)(e)?I().A.formatMessage(O.peopleTab):I().A.formatMessage(O.membersTab),plans:()=>function(){const e=R().subscriptionDataStoreInstance.state;if(P().Fq(e))return I().A.formatMessage(O.explorePlansTab);return I().A.formatMessage(O.upgradePlanTab)}(),billing:()=>I().A.formatMessage(O.billingTab),subscription:()=>I().A.formatMessage(O.subscriptionTab),requests:()=>I().A.formatMessage(O.requestsTab),security:e=>(0,D().xu)(e)?I().A.formatMessage(O.securityTab):I().A.formatMessage(O.securityAndDataTab),identity_provisioning:e=>(0,D().xu)(e)?I().A.formatMessage(O.identityTab):I().A.formatMessage(O.identityProvisioningTab),admin_content_search:()=>I().A.formatMessage(O.adminContentSearchTab),integrations:()=>I().A.formatMessage(O.spaceConnectionsTab),audit_log:()=>I().A.formatMessage(O.auditLogTab),analytics:()=>I().A.formatMessage(O.analyticsTab),imports:()=>I().A.formatMessage(O.importTab),sites:()=>I().A.formatMessage(O.sitesTab),custom_emoji:()=>I().A.formatMessage(O.customEmojiTab),verified_pages:()=>I().A.formatMessage(O.verifiedPagesTab),experiments:()=>I().A.formatMessage(O.experimentsTab),performance_toolbar:()=>I().A.formatMessage(O.performanceToolbarTab),user_similarity_scores:()=>I().A.formatMessage(O.userSimilarityScoresTab),collection_debug:()=>I().A.formatMessage(O.collectionsDebugTab),offline_mode_debug:()=>I().A.formatMessage(O.offlineModeDebugTab)},K={profile:()=>null,notifications_and_settings:()=>null,user_settings:()=>null,notifications:()=>null,connected_apps:()=>null,language_and_region:()=>null,offline:()=>null,settings:()=>null,teams:()=>null,members:e=>(0,k().bW)(e)&&(0,n.jsx)(E,{}),plans:()=>null,billing:()=>null,subscription:()=>null,requests:()=>null,security:()=>null,identity_provisioning:()=>null,sites:()=>null,custom_emoji:()=>null,admin_content_search:()=>null,integrations:()=>null,audit_log:()=>null,analytics:()=>null,imports:()=>null,verified_pages:()=>null,experiments:()=>null,performance_toolbar:()=>null,user_similarity_scores:()=>null,collection_debug:()=>null,offline_mode_debug:()=>null};function G(e){switch(e){case"profile":case"notifications_and_settings":case"user_settings":case"notifications":case"connected_apps":case"language_and_region":case"offline":case"settings":case"members":case"plans":case"billing":case"subscription":case"security":case"identity_provisioning":case"admin_content_search":case"integrations":case"imports":case"teams":case"audit_log":case"analytics":case"sites":case"custom_emoji":case"verified_pages":case"requests":case"experiments":case"performance_toolbar":case"user_similarity_scores":case"collection_debug":case"offline_mode_debug":return e;default:return}}},545274:(e,t,s)=>{s.d(t,{m:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("arrowUpCircled",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.993 15.126c.966 0 1.875-.185 2.728-.554a7.218 7.218 0 003.787-3.78 6.788 6.788 0 00.553-2.728c0-.966-.184-1.875-.553-2.727a7.136 7.136 0 00-1.531-2.25 7.219 7.219 0 00-2.256-1.53 6.805 6.805 0 00-2.735-.554c-.966 0-1.875.185-2.727.554a7.241 7.241 0 00-3.774 3.78 6.788 6.788 0 00-.553 2.727c0 .967.184 1.876.553 2.728.37.852.878 1.604 1.525 2.256a7.124 7.124 0 002.256 1.524 6.77 6.77 0 002.727.554zm0-1.395a5.598 5.598 0 01-4.013-1.654 5.735 5.735 0 01-1.21-1.804 5.567 5.567 0 01-.437-2.209c0-.783.146-1.517.438-2.2a5.715 5.715 0 011.21-1.812 5.6 5.6 0 011.797-1.217 5.599 5.599 0 012.208-.438c.789 0 1.525.146 2.208.438a5.66 5.66 0 013.029 3.028 5.55 5.55 0 01.437 2.201c0 .789-.146 1.525-.437 2.209a5.68 5.68 0 01-1.217 1.804 5.68 5.68 0 01-1.805 1.217 5.567 5.567 0 01-2.208.437zM8 11.51a.597.597 0 00.43-.164.584.584 0 00.172-.431V7.688L8.547 6.28l.622.78.759.793a.53.53 0 00.417.177c.16 0 .291-.052.396-.157a.518.518 0 00.164-.39.595.595 0 00-.164-.417L8.485 4.783A.664.664 0 008 4.558c-.173 0-.333.075-.479.225L5.26 7.066a.593.593 0 00-.157.417.538.538 0 00.554.547.557.557 0 00.416-.177l.766-.8.615-.766-.055 1.401v3.227c0 .173.057.317.171.43.114.11.258.165.431.165z"})})},578150:(e,t,s)=>{s.d(t,{x:()=>p});s(296540);var i=()=>s(959013),n=()=>s(802790),a=()=>s(843878),o=()=>s(8178),r=()=>s(963589),l=()=>s(454529),d=()=>s(931404),c=()=>s(682817),u=()=>s(413107),g=s(474848);function p(){const e=(0,i().tz)(),t=(0,r().X)("offline_clear_cache");return(0,g.jsxs)(a().Ay,{children:[(0,g.jsx)(o().A,{large:!0,divider:"full",children:e.formatMessage(l().y.offlineSettingsTitle)}),(0,g.jsx)(n().A,{size:24,isHidden:!0}),t?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u().L,{}),(0,g.jsx)(n().A,{size:80})]}):null,(0,g.jsx)(d().N,{}),(0,g.jsx)(n().A,{size:80}),(0,g.jsx)(c().v4,{})]})}},605685:(e,t,s)=>{s.d(t,{c:()=>c});s(898992),s(354520),s(581454);var i=()=>s(484714),n=()=>s(56366),a=()=>s(433847),o=()=>s(534177),r=()=>s(351360),l=()=>s(847554),d=()=>s(749240);function c(){const e=(0,i().v3)().currentUser.id,t=(0,n().K8)((()=>r().default.state.currentSpaceViewStore),[]),s=(0,n().O$)(d().subscriptionDataStoreInstance),c=(0,l().b)(s);return(0,n().K8)((()=>!(!e||null==t||!t.isDefined())&&(0,a().z8)({userId:e,teamsThatUserIsANonGuestMemberOf:t.getNonGuestTeamsStores().map((e=>e.getModel())).filter(o().O9),spaceMembersCount:c})),[e,t,c])}},638743:(e,t,s)=>{s.d(t,{n:()=>l});var i=()=>s(484714),n=()=>s(187174),a=()=>s(534177),o=()=>s(449506);const r={};function l(e){let{spaceId:t}=e;const s=(0,i().v3)(),[{status:l,error:d,value:c}]=(0,n().Yb)((async()=>{if(!t)return{overrides:{},organizationInfo:void 0,isOrganizationOwner:!1};const e=await o().callApi({eventName:"getOrganizationSettingsOverrides",environment:s,data:{spaceId:t}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,a().HB)(e)}),[s,t]);return{organizationOverrides:(null==c?void 0:c.overrides)??r,organizationInfo:null==c?void 0:c.organizationInfo,isOrganizationOwner:null==c?void 0:c.isOrganizationOwner,loading:"pending"===l||"idle"===l,error:d}}},689216:(e,t,s)=>{s.d(t,{n:()=>r});var i=()=>s(534177),n=()=>s(901389),a=()=>s(898486),o=()=>s(972435);async function r(e){let{onRequest:t,onSuccess:s}=e;const r=await t();switch(r.type){case"success":s&&await s(r);break;case"failed":n().f1((0,a().Hu)(o().A.getIntl(),r));break;default:(0,i().HB)(r)}}},693386:(e,t,s)=>{s.r(t),s.d(t,{OutlinerTeamOverflow:()=>oe,TeamOverflowMenu:()=>re});s(898992),s(354520),s(581454);var i=s(296540),n=()=>s(484714),a=()=>s(56366),o=()=>s(401497),r=()=>s(934999),l=()=>s(26440),d=()=>s(764781),c=()=>s(126617),u=()=>s(212727),g=()=>s(340498),p=s(474848);const m={viewBox:"0 0 20 20",svg:(0,p.jsx)("path",{d:"M6.7 3.115a1.828 1.828 0 0 0-2.558 2.151 1.828 1.828 0 0 0-.882 2.93l.084.1q-.269.106-.502.301a1.827 1.827 0 0 0-.222 2.575l3.616 4.298a6.291 6.291 0 0 0 10.73-6.193l-1.762-4.868a1.863 1.863 0 0 0-3.612.54L9.737 2.747a1.828 1.828 0 0 0-3.038.369m-1.174 1.2a.58.58 0 0 1 .814.07l2.828 3.362a.625.625 0 1 0 .957-.805L7.897 4.295a.578.578 0 0 1 .884-.744l3.729 4.431a.625.625 0 0 0 1.072-.598l-.71-2.149a.612.612 0 0 1 1.156-.4l1.763 4.867a5.042 5.042 0 0 1-8.598 4.963l-3.617-4.297a.577.577 0 1 1 .885-.744l1.627 1.934a.625.625 0 0 0 .956-.805L4.216 7.392a.578.578 0 0 1 .884-.744l2.228 2.648a.625.625 0 0 0 .956-.805L5.456 5.13a.58.58 0 0 1 .07-.814"})},f=(0,g().wt)("handWave",m),h={viewBox:"0 0 20 20",svg:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242m0 9.255c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h5.845A4.6 4.6 0 0 1 11.4 16c0-1.508.726-2.846 1.846-3.685A7.9 7.9 0 0 0 10 11.629"}),(0,p.jsx)("path",{d:"M16 19.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7m2.594-3.469a.625.625 0 0 0-.625-.625h-1.375v-1.375a.625.625 0 0 0-1.25 0v1.375h-1.375a.625.625 0 0 0 0 1.25h1.375v1.375a.625.625 0 1 0 1.25 0v-1.375h1.375c.345 0 .625-.28.625-.625"})]})},S=(0,g().wt)("inviteMemberFill",h);var x=()=>s(835607);const v=(0,g().wt)("personAdmin",{viewBox:"0 0 15 16",svg:(0,p.jsx)("path",{d:"M6.082 7.215a2.71 2.71 0 001.504-.438c.451-.296.811-.69 1.08-1.182a3.352 3.352 0 00.403-1.634 3.21 3.21 0 00-.403-1.6 3.059 3.059 0 00-1.08-1.141A2.776 2.776 0 006.082.796c-.547 0-1.048.143-1.504.43a3.153 3.153 0 00-1.087 1.156 3.195 3.195 0 00-.403 1.593 3.39 3.39 0 00.41 1.627c.269.487.629.88 1.08 1.175a2.71 2.71 0 001.504.438zm0-1.19c-.314 0-.606-.088-.875-.266a1.974 1.974 0 01-.636-.738 2.247 2.247 0 01-.239-1.046c0-.379.08-.718.24-1.019.159-.3.37-.538.635-.71.264-.179.556-.267.875-.267.319 0 .61.086.875.26.264.172.476.41.636.71.16.296.239.634.239 1.012 0 .387-.08.738-.24 1.053-.159.31-.37.556-.635.738a1.508 1.508 0 01-.875.273zm-4.266 7.54h5.948a3.113 3.113 0 01-.082-.752v-.43H1.59c-.082 0-.141-.014-.178-.041-.032-.027-.048-.073-.048-.137 0-.26.105-.56.315-.902.21-.342.512-.673.909-.992.4-.323.893-.59 1.476-.8.588-.213 1.26-.32 2.017-.32a5.648 5.648 0 011.92.328c.17-.42.466-.732.89-.937a6.605 6.605 0 00-1.313-.417 6.856 6.856 0 00-1.497-.157c-.92 0-1.75.139-2.488.417-.739.273-1.372.631-1.9 1.073-.525.442-.928.918-1.21 1.429-.279.51-.418.998-.418 1.463 0 .784.584 1.175 1.75 1.175zm6.843-.731c0 .438.091.804.274 1.1.182.297.469.58.861.848.392.274.907.588 1.545.944a.6.6 0 00.294.082.62.62 0 00.335-.082c.638-.36 1.153-.675 1.545-.944.392-.269.679-.551.861-.847.182-.297.274-.664.274-1.101v-2.468a.979.979 0 00-.137-.54c-.087-.141-.24-.26-.458-.355a17.47 17.47 0 00-.417-.15c-.182-.069-.38-.14-.595-.213-.21-.077-.403-.145-.581-.205a13.002 13.002 0 01-.403-.15 1.263 1.263 0 00-.417-.055c-.146 0-.292.028-.438.082-.077.028-.205.07-.383.13l-.574.198c-.205.073-.399.144-.58.212-.183.064-.32.114-.411.15-.219.096-.374.215-.465.356a1.02 1.02 0 00-.13.54v2.468zm2.598 1.326a.601.601 0 01-.212-.04.416.416 0 01-.178-.124l-1.155-1.244a.671.671 0 01-.096-.178.492.492 0 01-.034-.178c0-.145.048-.264.144-.355a.492.492 0 01.341-.13.485.485 0 01.363.15l.793.869 1.613-2.229a.484.484 0 01.41-.219c.132 0 .246.048.342.144.1.091.15.205.15.342 0 .04-.009.086-.027.136a.463.463 0 01-.075.15l-1.983 2.722c-.086.123-.218.184-.396.184z"})});var y=()=>s(617668),b=()=>s(979340),j=()=>s(468006),A=()=>s(959013),C=()=>s(534177),w=()=>s(416726),M=()=>s(946141),T=()=>s(575143),k=()=>s(452558),I=()=>s(704152),D=()=>s(406699),P=()=>s(928600),R=()=>s(8980),_=()=>s(89924),B=()=>s(859428),U=()=>s(986863),E=()=>s(38337),L=()=>s(722872),O=()=>s(37433),W=()=>s(632709),z=()=>s(962730),q=()=>s(351360),F=()=>s(463830),N=()=>s(205618),K=()=>s(486130),G=()=>s(406965),V=()=>s(475355),H=()=>s(848237);s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698);function $(e){let{adminStatus:t,accessLevel:s,isArchivedTeam:i}=e;if("adminThatCanPerformPrivilegedActions"===t)return new Set(["join","joinAsOwner"]);if(i)switch(t){case"none":return new Set;case"admin":return new Set("open"===s?["join"]:[]);default:(0,C().HB)(t)}switch(s){case"open":return new Set(["join"]);case"closed":case"private":return new Set;default:(0,C().HB)(s)}}var Y=()=>s(931956),Q=()=>s(605685),J=()=>s(685781),X=()=>s(233510),Z=()=>s(976519),ee=()=>s(211825),te=()=>s(418426);const se=["join","view","add","duplicate","leave","archive","restore"],ie=["add"],ne=["join","joinAsOwner","upgradeSelfToOwner","leave"],ae=(0,A().YK)({add:{defaultMessage:"Add members",id:"sidebar.outlinerTeamToggleButton.addLabel"},leave:{defaultMessage:"Leave teamspace",id:"sidebar.outlinerTeamToggleButton.leaveLabel"},joinAsOwner:{defaultMessage:"Join as owner",id:"sidebar.outlinerTeamToggleButton.joinAsOwnerLabel"},joinAsMember:{defaultMessage:"Join as member",id:"sidebar.outlinerTeamToggleButton.joinAsMemberLabel"},joinTeamspace:{defaultMessage:"Join teamspace",id:"sidebar.outlinerTeamToggleButton.joinLabel"},upgradeSelfToOwner:{defaultMessage:"Become owner",id:"sidebar.outlinerTeamToggleButton.upgradeSelfToOwnerLabel"},archive:{defaultMessage:"Archive teamspace",id:"sidebar.outlinerTeamToggleButton.archiveLabel"},restore:{defaultMessage:"Restore teamspace",id:"outlinerTeamOverflow.teamActions.restoreLabel"},duplicate:{defaultMessage:"Duplicate teamspace",id:"sidebar.outlinerTeamToggleButton.duplicateLabel"},teamspaceSettings:{defaultMessage:"Teamspace settings",id:"sidebar.outlinerTeamToggleButton.ownerViewLabel"},viewMembers:{defaultMessage:"View members",id:"sidebar.outlinerTeamToggleButton.unjoinedMemberViewLabel"}});function oe(e){let{teamStore:t,style:s,from:i,hideJoin:r,onPopupClick:l,onPopupClose:d}=e;const u=(0,n().Y0)(),g=(0,A().tz)(),m=(0,a().uB)(void 0,N().A),f=(0,a().K8)((()=>q().default.state.currentSpaceStore),[]),h=(0,a().uB)(void 0,F().A),S=(0,o().IS)((e=>({buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20,...s}})),[s]),x=g.formatMessage({defaultMessage:"Teamspace settings and members...",id:"sidebar.outlinerTeamToggleButton.tooltip"});return f?u.isMobile?null:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(B().A,{textWrap:!1,renderTooltip:()=>x,placement:z().W.Bottom,render:e=>(0,p.jsx)(D().Ay,{popupType:D().z7.Popup,buttonPopupStore:h,alignmentToOrigin:D().yP.Start,originGap:2,renderOrigin:t=>(0,p.jsx)(I().A,{ariaLabel:x,className:E()._Oc,style:S.buttonStyle,mobileFeedback:!1,...e,...t,children:(0,p.jsx)(R().I,{icon:c().Y,size:"sm",color:"secondary"})}),render:e=>(0,p.jsx)(re,{teamStore:t,permissionsInviteStore:m,onDismiss:e.close,from:i,hideJoin:r,buttonPopupStore:h}),onClick:l,onClose:d})}),(0,p.jsx)(U().u,{permissionsInviteStore:m,store:t})]}):null}function re(e){const{teamStore:t,permissionsInviteStore:s,onDismiss:c,from:g,hideJoin:m,buttonPopupStore:h}=e,I=(0,o().DP)(),D=(0,n().v3)(),U=(0,o().IS)((()=>({menuItemButton:{minWidth:200},caption:{minWidth:230}})),[]),F=(0,a().K8)((()=>q().default.state.currentSpaceStore),[]),N=(0,ee().G)(t),oe=(0,a().K8)((()=>(0,j().Sh)({archived_by:t.getArchivedBy()})),[t]),re=D.currentUser.id,le=(0,a().K8)((()=>K()._.getSpacePermissionGroupIds({userId:re,spaceId:null==F?void 0:F.id})),[re,F]),de=(0,a().K8)((()=>re?t.getTeamRoleForUser(re,le)??"none":"none"),[re,t,le]),ce=(0,a().K8)((()=>!(!t.isDefined()||!re)&&Boolean(t.isOwner(re))),[re,t]),ue=(0,Z().q)(t.id),ge=(0,Y().X)(t),{id:pe,name:me,isDefault:fe}=(0,a().K8)((()=>({id:t.id,name:t.getName(),isDefault:t.isDefault()})),[t]),he=(0,Q().c)(),Se=(0,a().K8)((()=>(0,O().sx)({environment:D,spaceStore:F})),[F,D]),xe=(0,J().a)(g),ve=function(e){const{isDefault:t,accessLevel:s,settings:i}=(0,a().K8)((()=>({isDefault:e.isDefault(),accessLevel:e.getTeamAccessLevel(),settings:e.getSettings()})),[e]),n="private"===s,o=(0,X().c)(),r=n&&!o?"business":void 0,l=(null==i?void 0:i.disable_public_access)||(null==i?void 0:i.disable_export)||(null==i?void 0:i.disable_guests),d=(0,X().Z)(),c=l&&!d?"enterprise":void 0,u=(0,b().hW)([c,r]);if(t)return"isDefault";if(u)return u}(t),ye="isDefault"===(be=ve)?(0,p.jsx)(A().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateDefaultTeamspace",defaultMessage:"Cannot duplicate a default teamspace"}):"business"===be?(0,p.jsx)(A().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithBusinessFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Business plans or above"}):"enterprise"===be?(0,p.jsx)(A().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithEnterpriseFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Enterprise plans or above"}):void 0===be?void 0:(0,C().HB)(be);var be;const je=(0,a().K8)((()=>t.getTeamAccessLevel()),[t]),Ae=(0,te().$)(t),Ce=(0,i.useCallback)((e=>{M().ks(D,{store:t,from:g,option:e})}),[D,t,g]),we=ue&&!he,Me=(0,a().K8)((()=>Boolean(null==F?void 0:F.canAdmin())),[F]),{joinLeaveOptionsToShow:Te,leaveOptionDisabledState:ke}=function(e){let{teamRole:t,adminStatus:s,isDefaultTeam:i,accessLevel:n,isArchivedTeam:a}=e;switch(t){case"owner":case"member":const e=new Set,o=!a;return o&&e.add("leave"),"owner"!==t&&"adminThatCanPerformPrivilegedActions"===s&&e.add("upgradeSelfToOwner"),{joinLeaveOptionsToShow:e,leaveOptionDisabledState:o&&i?{disabled:!0,disabledReasonKey:"defaultTeam"}:void 0};case"team_level_guest":return{joinLeaveOptionsToShow:new Set,leaveOptionDisabledState:void 0};case"none":return{joinLeaveOptionsToShow:$({adminStatus:s,accessLevel:n,isArchivedTeam:a}),leaveOptionDisabledState:void 0};default:(0,C().HB)(t)}}({teamRole:de,adminStatus:xe?"adminThatCanPerformPrivilegedActions":Me?"admin":"none",isArchivedTeam:oe,isDefaultTeam:fe,accessLevel:je}),Ie=Te.has("joinAsOwner"),De=xe&&!(1===Te.size&&Te.has("leave")),Pe=(0,a().K8)((()=>(0,O().mN)(t)),[t]),Re={add:{type:"action",show:!oe&&ge,handle:()=>{s.update((e=>({...e,modalOpen:!0})))},title:ae.add,icon:(0,p.jsx)(R().I,{icon:S})},leave:{type:"action",...De&&{colorOverride:I.redBadgeBackground},show:Te.has("leave"),handle:()=>{H().JC({environment:D,teamStore:t,from:g,userGroupsInTeam:Ae})},title:ae.leave,disabled:Boolean(null==ke?void 0:ke.disabled),icon:(0,p.jsx)(R().I,{icon:f}),disabledTooltipText:"defaultTeam"===(null==ke?void 0:ke.disabledReasonKey)&&(0,p.jsx)(A().sA,{id:"sidebar.outlinerTeamToggleButton.cannotLeaveDefaulTeamTooltip",defaultMessage:"Cannot leave a default teamspace"})},join:{type:"action",show:!m&&Te.has("join"),handle:async()=>{if(F)switch(je){case"open":await H().e2({environment:D,teamStore:t,currentSpaceStore:F,from:g,andNavigateToTeamHome:!1});break;case"closed":case"private":await H().z9({environment:D,teamStore:t,currentSpaceStore:F,from:g,action:"joinClosedOrPrivateTeamAsMember"});break;default:(0,C().HB)(je)}},title:Ie?ae.joinAsMember:ae.joinTeamspace,icon:(0,p.jsx)(R().I,{icon:y().plusIcon,color:"secondary"})},joinAsOwner:{type:"action",show:Ie,handle:()=>H().z9({environment:D,teamStore:t,currentSpaceStore:F,from:g,action:"joinTeamAsOwner"}),title:ae.joinAsOwner,icon:(0,p.jsx)(R().I,{icon:v})},upgradeSelfToOwner:{type:"action",show:Te.has("upgradeSelfToOwner"),handle:()=>H().z9({environment:D,teamStore:t,currentSpaceStore:F,from:g,action:"upgradeToOwner"}),title:ae.upgradeSelfToOwner,icon:(0,p.jsx)(R().I,{icon:v})},archive:{type:"action",show:!oe&&ce,colorOverride:I.redBadgeBackground,handle:async()=>{we||(await H().mm({teamStore:t,environment:D,from:g}),G().P({environment:D,messageStoreEmitValue:-1}))},title:ae.archive,disabled:we,disabledTooltipText:(0,p.jsx)("div",{style:{whiteSpace:"normal"},children:(0,p.jsx)(A().sA,{id:"sidebar.outlinerTeamToggleButton.cannotArchiveTooltip.moreThanOneMember",defaultMessage:"There must only be one member in the workspace to archive this teamspace"})}),icon:(0,p.jsx)(R().I,{icon:r().B})},restore:{type:"action",show:oe,handle:async()=>{ce&&Pe&&(await H().Q8({environment:D,teamStore:t,teamName:me,from:g}),G().P({environment:D,messageStoreEmitValue:-1}))},title:ae.restore,icon:(0,p.jsx)(R().I,{icon:l().w}),disabled:!Pe||!ce,disabledTooltipText:Pe?(0,p.jsx)(A().sA,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText.notOwner",defaultMessage:"Only teamspace owners can restore archived teamspaces."}):(0,p.jsx)(A().sA,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText.noDefaultTeam",defaultMessage:"You must have an active default teamspace to restore this {accessLevel} teamspace.",values:{accessLevel:je}})},duplicate:{type:"action",show:!oe&&Se,handle:()=>{V().hX({environment:D,teamStore:t,from:g,buttonPopupStore:h})},title:ae.duplicate,disabled:void 0!==ve,icon:(0,p.jsx)(R().I,{icon:d().V}),disabledTooltipText:ye,caption:(0,p.jsx)(A().sA,{id:"sidebar.outlinerTeamToggleButton.duplicateCaption",defaultMessage:"Duplicates permissions and other settings but not pages and members"})},view:{type:"action",show:!oe,handle:()=>H().F2({environment:D,teamId:pe,tab:W().p.Members,from:g}),title:N&&!oe?ae.teamspaceSettings:ae.viewMembers,icon:N?(0,p.jsx)(R().I,{icon:u().gearIcon}):(0,p.jsx)(R().I,{icon:x().F})}},_e=(De?[{sectionName:"join/leave section",orderedOptions:ne},{sectionName:"other actions",orderedOptions:se.filter((e=>!ne.includes(e)))}]:[{sectionName:"add section",orderedOptions:ie},{sectionName:"other actions section",orderedOptions:se.filter((e=>!ie.includes(e)))}]).map((e=>{const t=e.orderedOptions.filter((e=>Re[e].show));if(0!==t.length)return{sectionName:e.sectionName,filteredOptions:t}})).filter(C().O9).map((e=>{const t=e.filteredOptions.map((e=>{const t=Re[e],{type:s}=t;return"action"===s?(0,w().Ls)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,validators:[],closeParentMenu:!0,action:()=>{c(),Ce(e),t.handle()},render:e=>(0,p.jsx)(B().A,{placement:z().W.Left,textWrap:!1,disableTooltip:!(t.disabled&&t.disabledTooltipText),renderTooltip:()=>t.disabledTooltipText,render:s=>(0,p.jsx)(T().A,{...e,...s,svg:()=>t.icon,title:(0,p.jsx)(A().sA,{...t.title}),buttonStyle:{...U.menuItemButton,...!t.disabled&&t.colorOverride?{fill:t.colorOverride,color:t.colorOverride}:{fill:I.regularIconColor,color:I.regularTextColor}},disabled:t.disabled,disabledFeedback:t.disabled,caption:t.caption,captionStyle:U.caption,shouldWrapCaption:!0})})}):"extensionAction"===s?(0,w().uk)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,width:250,validators:[],subActions:()=>t.subActionSections.map((t=>({...t,actions:t.actions.map((t=>({...t,action:s=>{c(),Ce(e),t.action(s)}})))})))}):void(0,C().HB)(s)}));return(0,w().gy)({key:e.sectionName,render:e=>(0,p.jsx)(_().A,{...e}),actions:t})}));return(0,p.jsx)(P().A,{className:E()._En,menuType:L().gu.Popup,minWidth:"100%",children:(0,p.jsx)(k().A,{context:{blocks:[],environment:D,publicEditMode:void 0},sections:_e,initialFocus:void 0})})}},735790:(e,t,s)=>{s.d(t,{M:()=>a});s(296540);var i=s(474848);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M3 7.375h6.829a2.501 2.501 0 0 0 4.842 0H17a.625.625 0 1 0 0-1.25h-2.329a2.501 2.501 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25M12.25 5.5a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5"}),(0,i.jsx)("path",{fillRule:"evenodd",d:"M7.75 15.75a2.5 2.5 0 0 0 2.421-1.875H17a.625.625 0 1 0 0-1.25h-6.829a2.5 2.5 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25h2.329A2.5 2.5 0 0 0 7.75 15.75m0-1.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})]})},a=(0,s(340498).wt)("sliders",n)},818044:(e,t,s)=>{s.d(t,{k:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("logout",{viewBox:"0 0 30 30",svg:(0,i.jsx)("path",{d:"M17,24l9-9l-9-9l-1.406,1.406L22.188,14H8v2h14.188l-6.594,6.594L17,24z M6,4h16V2H4v26h18v-2H6V4z"})})},824375:(e,t,s)=>{s.d(t,{X:()=>n});s(296540);const i={viewBox:"0 0 20 20",svg:(0,s(474848).jsx)("path",{d:"M13.217 7.07a.63.63 0 0 0-1.26 0c0 1.115-.524 2.228-1.367 3.07-.843.843-1.956 1.367-3.07 1.367a.63.63 0 0 0 0 1.26c1.114 0 2.227.525 3.07 1.367.843.843 1.367 1.956 1.367 3.07a.63.63 0 1 0 1.26 0c0-1.114.524-2.227 1.367-3.07.842-.842 1.956-1.367 3.07-1.367a.63.63 0 1 0 0-1.26c-1.114 0-2.228-.524-3.07-1.366-.843-.843-1.367-1.956-1.367-3.07m-1.736 3.961a6.2 6.2 0 0 0 1.106-1.496c.29.552.668 1.059 1.106 1.496s.944.816 1.497 1.106a6.2 6.2 0 0 0-1.497 1.106 6.2 6.2 0 0 0-1.106 1.497 6.2 6.2 0 0 0-1.106-1.497 6.2 6.2 0 0 0-1.497-1.106 6.2 6.2 0 0 0 1.497-1.106M6.35 2.796a.63.63 0 1 0-1.26 0c0 .54-.34 1.233-.926 1.819s-1.279.926-1.82.926a.63.63 0 1 0 0 1.26c.541 0 1.234.34 1.82.925.586.586.926 1.279.926 1.82a.63.63 0 0 0 1.26 0c0-.541.34-1.234.926-1.82.585-.585 1.278-.925 1.819-.925a.63.63 0 1 0 0-1.26c-.54 0-1.234-.34-1.82-.926-.585-.586-.925-1.279-.925-1.82m-1.295 2.71c.243-.244.47-.52.665-.816A5.2 5.2 0 0 0 7.2 6.17a5.15 5.15 0 0 0-1.48 1.48 5.15 5.15 0 0 0-1.48-1.48c.296-.194.572-.421.815-.664"})},n=(0,s(340498).wt)("sparkles",i)},850369:(e,t,s)=>{s.d(t,{A:()=>f});s(581454),s(296540);var i=()=>s(56366),n=()=>s(401497),a=()=>s(950705),o=()=>s(959013),r=()=>s(209199),l=()=>s(901389),d=()=>s(700250),c=()=>s(760217),u=()=>s(406699),g=()=>s(939740),p=()=>s(824160),m=s(474848);const f=function(e){let{currentLocale:t,pickerLabel:a,confirm:c,onChange:f,origin:x,showGlobeIcon:v}=e;const y=(0,n().DP)(),b=(0,s(484714).v3)(),j=(0,o().tz)(),A=(0,i().uB)(void 0,s(463830).A),{device:C}=b,w=(0,i().K8)((()=>"ja-JP"===t),[t]),M=(0,s(963589).X)("polyglot");return C.isMobile?null:(0,m.jsx)(u().Ay,{onClick:()=>{s(278768).Kn(b,{origin:x})},popupType:u().z7.Popup,buttonPopupStore:A,renderOrigin:e=>(0,m.jsxs)(s(493823).p,{style:{marginLeft:-8,paddingLeft:8,paddingRight:8,display:"flex",alignItems:"center",...v&&{color:y.icon.secondary}},...e,children:[v&&(0,s(328347).h)({width:16,height:16,fill:y.icon.secondary,marginRight:4}),a||h(t,j).label,(0,r().Hx)(t)&&!w&&(0,m.jsx)(p().A,{desktopStyle:{marginLeft:4},children:(0,m.jsx)(o().sA,{id:"languagePicker.betaBadge",defaultMessage:"Beta"})}),(0,s(668725).b)({width:10,marginLeft:4,fill:v?y.icon.secondary:y.lightIconColor})]}),placementToOrigin:d().UV.Bottom,alignmentToOrigin:d().MY.Start,render:e=>{let i;i=M?[...r().fy,...r().Tf]:[...r().fy];const n=[{key:"languages",render:e=>(0,m.jsx)(s(89924).A,{...e,topBorder:0!==e.index}),items:i.map((s=>{const i={key:s,render:e=>function(e,t,s,i){const{label:n,caption:a}=h(e,i);return(0,m.jsx)(S,{label:n,caption:a,focused:t,props:s,locale:e})}(s,e.focused,e,j),action:()=>{!function(e,t,s,i,n){t!==e&&function(e,t,s,i){const{label:n}=h(e,t);if(s){const t=()=>{i(e)};l().ui({showCancel:!0,keepFocus:!1,message:(0,m.jsx)(o().sA,{id:"languagePicker.changeLanguage.confirmationMessage",defaultMessage:"Are you sure you want to update the language to {language}?",values:{language:n}}),items:[{label:(0,m.jsx)(o().sA,{id:"languagePicker.changeLanguage.updateButton.label",defaultMessage:"Update"}),color:"red",onAccept:t}]})}else i(e)}(e,s,i,n)}(s,t,j,c,f),e.close()}};return i}))}],a={menuType:s(722872).gu.Popup,width:240};return(0,m.jsx)(s(928600).A,{className:s(38337).jtA,...a,children:(0,m.jsx)(g().Ay,{type:g().Oh.Vertical,initialFocus:void 0,sections:n})})}})};function h(e,t){return(0,a().V)(t)[e]}function S(e){const{locale:t}=e,s=(0,n().DP)(),a=(0,i().K8)((()=>"ja-JP"===t),[t]);return(0,m.jsx)(c().A,{...e.props,title:(0,m.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,m.jsx)("div",{style:{...e.style,marginRight:0},children:e.label})}),caption:e.caption&&(0,m.jsx)("span",{style:{color:s.mediumTextColor},children:e.caption}),shouldWrapCaption:!0,right:(0,r().Hx)(e.locale)&&!a&&(0,m.jsx)(p().A,{children:(0,m.jsx)(o().sA,{id:"languagePicker.betaBadge",defaultMessage:"Beta"})})})}},868146:(e,t,s)=>{s.d(t,{u:()=>i});const i=(0,s(340498).xh)("checkmarkShieldFill",{default:{loader:()=>s.e(93213).then(s.bind(s,193213))},small:{loader:()=>s.e(50335).then(s.bind(s,850335))},mini:{loader:()=>s.e(43249).then(s.bind(s,243249))},large:{loader:()=>s.e(56823).then(s.bind(s,956823))}})},885067:(e,t,s)=>{s.d(t,{y:()=>o});s(296540);var i=()=>s(946548),n=()=>s(125565),a=s(474848);function o(e){let{title:t,description:s,disabled:o=!1,selected:r,onChange:l=(()=>{})}=e;return(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>!o&&l(!r),children:[(0,a.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[t,s&&(0,a.jsx)(n().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:s})]}),(0,a.jsx)("div",{style:{marginTop:5},children:(0,a.jsx)(i().A,{on:r,disabled:o})})]})}},926110:(e,t,s)=>{s.d(t,{ei:()=>b,s:()=>v,gO:()=>y,jw:()=>w,Ox:()=>C});s(296540);var i=()=>s(484714),n=()=>s(401497),a=()=>s(148307),o=()=>s(122555),r=()=>s(449552),l=()=>s(234748),d=s(474848);const c=(0,s(340498).wt)("typesPersonOutline",{viewBox:"0 0 20 20",svg:(0,d.jsx)("g",{children:(0,d.jsx)("path",{d:"M9.303 16.45q-1.743 0-1.743-1.177 0-.696.417-1.463.423-.765 1.21-1.428.793-.663 1.9-1.073 1.107-.417 2.481-.417 1.375 0 2.482.417 1.114.409 1.9 1.073t1.203 1.428q.424.767.424 1.463 0 1.176-1.75 1.176H9.303Zm-.226-1.183h8.976q.123 0 .17-.041.055-.042.055-.137 0-.396-.307-.902-.307-.513-.916-.992-.602-.485-1.484-.8-.874-.32-2.003-.32-1.134 0-2.01.32-.874.315-1.476.8-.601.48-.916.992-.308.506-.308.902 0 .096.048.137.056.04.171.04Zm4.491-5.175a2.73 2.73 0 0 1-1.503-.438 3.2 3.2 0 0 1-1.08-1.169 3.34 3.34 0 0 1-.404-1.627 3.2 3.2 0 0 1 .403-1.592 3.2 3.2 0 0 1 1.08-1.156q.684-.43 1.504-.43.834 0 1.511.424.684.423 1.08 1.141a3.2 3.2 0 0 1 .404 1.6q0 .895-.404 1.634a3.2 3.2 0 0 1-1.087 1.175 2.7 2.7 0 0 1-1.504.438m0-1.19q.486 0 .882-.273t.636-.738q.24-.472.24-1.046 0-.56-.24-1.012a1.9 1.9 0 0 0-.636-.71 1.58 1.58 0 0 0-.882-.26 1.5 1.5 0 0 0-.868.266 1.9 1.9 0 0 0-.635.718q-.24.45-.24 1.011 0 .575.24 1.04.238.464.635.738.405.266.868.266M1.886 16.45q-.732 0-1.1-.307-.37-.308-.37-.923 0-.848.403-1.627.411-.787 1.128-1.395a5.5 5.5 0 0 1 1.668-.957 5.8 5.8 0 0 1 2.03-.355q.534 0 1.06.095.526.089 1.019.274.498.184.936.451a3.2 3.2 0 0 0-.882.861 3.3 3.3 0 0 0-.65-.28 5 5 0 0 0-.724-.178A4.6 4.6 0 0 0 4.1 12.3a4.5 4.5 0 0 0-1.285.691q-.553.43-.875.985-.314.546-.314 1.134 0 .096.041.137.048.04.15.041h4.806q-.035.342.13.67.164.335.444.492zm3.766-6.282q-.717 0-1.312-.383a2.84 2.84 0 0 1-.944-1.025 3 3 0 0 1-.348-1.436A2.83 2.83 0 0 1 4.34 4.917a2.38 2.38 0 0 1 1.312-.383q.718 0 1.306.376.594.376.943 1.005.356.63.356 1.401 0 .78-.356 1.436a2.8 2.8 0 0 1-.943 1.032 2.34 2.34 0 0 1-1.306.383Zm0-1.169q.39 0 .718-.226.328-.225.526-.601a1.8 1.8 0 0 0 .199-.855 1.7 1.7 0 0 0-.199-.82q-.19-.37-.519-.581a1.3 1.3 0 0 0-.725-.212q-.396 0-.724.219a1.6 1.6 0 0 0-.52.58q-.19.37-.191.821 0 .465.191.848.198.383.527.608.328.219.717.219"})})});var u=()=>s(734459),g=()=>s(713996),p=()=>s(959013),m=()=>s(534177),f=()=>s(435009),h=()=>s(554509),S=()=>s(204063),x=()=>s(216441);function v(e){let{organizationOnboardingInfo:t}=e;const s=(0,i().v3)(),n=C(),r=(0,p().tz)();if(!t||"ineligible"===t.onboardingStatus)return null;const{buttonLabel:l,onClick:c}=y({environment:s,organizationOnboardingInfo:t});return(0,d.jsxs)("div",{style:n.bannerContainer,children:[(0,d.jsxs)("div",{style:n.title,children:[(0,d.jsx)("img",{src:a().A.images.onboarding.planTypeForWorkSplitIntentDarkmodePng,style:{height:77,width:77},alt:"Organization onboarding icon"}),(0,d.jsx)(h().D,{styleName:"UITitle-22px/Semibold",children:r.formatMessage(w.title)}),(0,d.jsx)(h().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:r.formatMessage(w.byline)})]}),(0,d.jsx)(b,{}),(0,d.jsxs)(S().A,{size:"lg",style:n.button,onClick:c,children:[l,(0,o().p)(n.iconArrow)]})]})}function y(e){let{environment:t,organizationOnboardingInfo:s}=e;switch(s.onboardingStatus){case"not_started":return{buttonLabel:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.startSetUpButton",defaultMessage:"Set up organization"}),onClick:()=>{f().oo({environment:t,openInNew:"tab",makeTabActive:!0,url:(0,u().re)({organizationId:u().Zf,tabRoute:g()._P,queryParams:{[x().ge]:s.spaceId}})})}};case"domain_verified":return{buttonLabel:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.finishSetUpButton",defaultMessage:"Finish set up"}),onClick:()=>{f().oo({environment:t,openInNew:"tab",makeTabActive:!0,url:(0,u().re)({organizationId:s.organizationId,tabRoute:g()._P})})}};case"completed":return{buttonLabel:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.orgSettingsButton",defaultMessage:"Go to organization console"}),onClick:()=>{f().oo({environment:t,openInNew:"tab",makeTabActive:!0,url:(0,u().re)({organizationId:s.organizationId,tabRoute:g().Vo})})}};default:(0,m().HB)(s)}}function b(){const e=C();return(0,d.jsxs)("div",{style:e.features,children:[(0,d.jsx)(A,{icon:r().g,description:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.owner.item.organizationOwnerRole",defaultMessage:"<blue>A new organization owner role</blue> manages all workspace settings and owner permissions.",values:{blue:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.jsx)(j,{chunks:t})}}})}),(0,d.jsx)(A,{icon:l().I,description:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.owner.item.organizationWideVisibility",defaultMessage:"<blue>Organization-wide visibility</blue> of people, sharing and security settings, and audit logs all in one place.",values:{blue:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.jsx)(j,{chunks:t})}}})}),(0,d.jsx)(A,{icon:c,description:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.owner.item.simplifiedSettingsManagement",defaultMessage:"<blue>Simplified settings management</blue> across organization, workspace, and teamspace levels.",values:{blue:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.jsx)(j,{chunks:t})}}})})]})}function j(e){return(0,d.jsx)(h().D,{styleName:"UIRegular-14px/Medium",colorName:"uiBluePrimary",as:"span",children:e.chunks})}function A(e){const t=(0,n().IS)((e=>({container:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexDirection:"row",gap:8},icon:{fill:e.icon.uiBluePrimary,height:16,width:16}})),[]);return(0,d.jsxs)("div",{style:t.container,children:[e.icon(t.icon),(0,d.jsx)(h().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:e.description})]})}function C(){return(0,n().IS)((e=>({bannerContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:20,padding:24,borderRadius:12,marginBlock:12,background:"dark"===e.mode?e.cardBackground:"#F0F6FD"},title:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:6,width:"100%"},features:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",gap:10,width:"100%"},icon:{height:16,width:16,fill:e.icon.secondary},button:{display:"flex",alignItems:"center",justifyContent:"center",gap:4},iconArrow:{height:14,width:14,fill:"currentColor",transform:"rotate(90deg)",marginTop:4}})),[])}const w=(0,p().YK)({title:{id:"organization.onboarding.modal.title",defaultMessage:"Get more from your Enterprise plan"},byline:{id:"organization.onboarding.modal.byline",defaultMessage:"Get a birdâ€™s-eye view of members, guests, and security settings across all your workspaces."}})},931956:(e,t,s)=>{s.d(t,{X:()=>l});var i=()=>s(56366),n=()=>s(534177),a=()=>s(10984),o=()=>s(211825),r=()=>s(43450);function l(e){const t=(0,r().R)(e),s=(0,o().G)(e);return(0,i().K8)((()=>{if(!(0,a().El)())return!1;const i=e.getSetting("invite_access");switch(i){case void 0:return!1;case"team_members":return s;case"team_owners":return t;default:(0,n().HB)(i)}}),[e,t,s])}},934999:(e,t,s)=>{s.d(t,{B:()=>a});s(296540);var i=s(474848);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M8 9.875a.625.625 0 1 0 0 1.25h4a.625.625 0 1 0 0-1.25z"}),(0,i.jsx)("path",{d:"M3.125 4.75c0-.897.728-1.625 1.625-1.625h10.5c.898 0 1.625.728 1.625 1.625v1.57c0 .676-.413 1.256-1 1.5v7.43c0 .898-.727 1.625-1.625 1.625h-8.5a1.625 1.625 0 0 1-1.625-1.625V7.82c-.587-.244-1-.824-1-1.5zm11.5 3.195h-9.25v7.305c0 .207.168.375.375.375h8.5a.375.375 0 0 0 .375-.375zm1-1.625V4.75a.375.375 0 0 0-.375-.375H4.75a.375.375 0 0 0-.375.375v1.57c0 .205.164.372.369.375h10.512a.375.375 0 0 0 .369-.375"})]})},a=(0,s(340498).wt)("archiveBox",n)},955054:(e,t,s)=>{s.d(t,{A:()=>n});class i extends(()=>s(757695))().default{getInitialState(){return{open:!1}}}const n=new i},973633:(e,t,s)=>{s.d(t,{P:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("peopleFillCheckmark",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M14.5391 10.3174C14.4115 10.3174 14.2975 10.29 14.1973 10.2354C14.097 10.1807 13.999 10.0964 13.9033 9.98242L12.29 8.01367C12.1715 7.86328 12.1123 7.70833 12.1123 7.54883C12.1123 7.38021 12.1693 7.23665 12.2832 7.11816C12.4017 6.99967 12.5452 6.94043 12.7139 6.94043C12.8141 6.94043 12.9053 6.96322 12.9873 7.00879C13.0739 7.0498 13.1582 7.12272 13.2402 7.22754L14.5117 8.84082L17.2188 4.51367C17.3555 4.28581 17.5309 4.17188 17.7451 4.17188C17.9046 4.17188 18.0482 4.22428 18.1758 4.3291C18.3034 4.42936 18.3672 4.56608 18.3672 4.73926C18.3672 4.81673 18.349 4.89648 18.3125 4.97852C18.2806 5.05599 18.2419 5.12891 18.1963 5.19727L15.1406 9.97559C14.9948 10.2035 14.7943 10.3174 14.5391 10.3174ZM2.85645 16.2441C2.47363 16.2441 2.17285 16.1576 1.9541 15.9844C1.73535 15.8112 1.62598 15.5742 1.62598 15.2734C1.62598 14.8314 1.75814 14.3688 2.02246 13.8857C2.29134 13.4027 2.67643 12.9492 3.17773 12.5254C3.68359 12.1016 4.29199 11.7575 5.00293 11.4932C5.71387 11.2288 6.51139 11.0967 7.39551 11.0967C8.28418 11.0967 9.08398 11.2288 9.79492 11.4932C10.5059 11.7575 11.112 12.1016 11.6133 12.5254C12.1191 12.9492 12.5065 13.4027 12.7754 13.8857C13.0443 14.3688 13.1787 14.8314 13.1787 15.2734C13.1787 15.5742 13.0693 15.8112 12.8506 15.9844C12.6318 16.1576 12.3311 16.2441 11.9482 16.2441H2.85645ZM7.40234 9.87988C6.9056 9.87988 6.44759 9.74544 6.02832 9.47656C5.61361 9.20768 5.27865 8.84538 5.02344 8.38965C4.77279 7.93392 4.64746 7.4235 4.64746 6.8584C4.64746 6.30241 4.77279 5.80111 5.02344 5.35449C5.27865 4.90332 5.61589 4.54557 6.03516 4.28125C6.45443 4.01693 6.91016 3.88477 7.40234 3.88477C7.89909 3.88477 8.3571 4.01465 8.77637 4.27441C9.19564 4.53418 9.5306 4.88965 9.78125 5.34082C10.0365 5.78743 10.1641 6.28874 10.1641 6.84473C10.1641 7.41439 10.0365 7.92936 9.78125 8.38965C9.5306 8.84538 9.19564 9.20768 8.77637 9.47656C8.3571 9.74544 7.89909 9.87988 7.40234 9.87988Z"})})}}]);