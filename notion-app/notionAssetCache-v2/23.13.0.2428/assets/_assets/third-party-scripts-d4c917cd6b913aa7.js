"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[1978],{63620:(e,t,a)=>{a.r(t),a.d(t,{InjectThirdPartyScripts:()=>R,useThirdPartyScripts:()=>D});var i=a(296540),s=()=>a(484714),n=()=>a(56366),o=(a(944114),()=>a(498212)),r=()=>a(283699),c=()=>a(591779),l=()=>a(299917);const d={siteId:"a2a8e2144b2bbbb4074a",orgId:"901895b8-45c7-40c8-ba91-626cfc6739b3"};function u(){var e,t,a;if(!window._cio)for(window._cio=[],e=function(e){return function(){window._cio.push([e].concat(Array.prototype.slice.call(arguments,0)))}},t=["load","identify","sidentify","track","page","on","off","reset"],a=0;a<t.length;a++)window._cio[t[a]]=e(t[a])}var g=()=>a(116225),p=()=>a(902052),f=()=>a(435009),m=()=>a(780054),v=()=>a(680074),y=()=>a(150749),S=()=>a(836251),w=()=>a(875856),_=()=>a(792415),b=()=>a(351360),I=()=>a(438754),k=()=>a(762014),A=()=>a(508496),h=()=>a(445155),C=()=>a(645873);var E=()=>a(240865);function D(){const e=(0,s().v3)(),t=(0,E().V)()||0,a=(0,s().Y0)(),{currentUser:D}=e,R=(0,n().K8)((()=>{var e;return null===(e=b().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),{siteGoogleAnalyticsId:L,requestedOnPublicDomain:K}=(0,n().K8)((()=>{if(!(0,S().w6)(e))return{siteGoogleAnalyticsId:void 0,requestedOnPublicDomain:!1};const{publicPageData:t}=_().A.state,{siteGoogleAnalyticsId:a}=t||{};return a&&a.match(/[0-9A-Z]+/)?{siteGoogleAnalyticsId:`G-${a}`,requestedOnPublicDomain:!0}:{siteGoogleAnalyticsId:void 0,requestedOnPublicDomain:!0}}),[e]);!function(e){let{isEnabled:t,cookieService:a,siteGoogleAnalyticsId:s}=e;(0,i.useEffect)((()=>{(async function(){return!(!t||!s||!(await r().nQ({service:"google_tag_manager",cookieService:a}))||"dataLayer"in window)})().then((e=>{if(e)return(0,l().Ay)(`https://www.googletagmanager.com/gtag/js?id=${s}`,{id:"notion-site-google-analytics"}).catch((e=>{console.error("GA script failed to load",e)})).then((()=>{if(window.dataLayer){function e(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",s)}}))}))}),[t,a,s])}({isEnabled:Boolean(K),siteGoogleAnalyticsId:L,cookieService:e.cookieService}),function(e){let{isEnabled:t,isLoggedIn:a,userId:s,onMessageOpened:n,onMessageDismissed:g,onMessageError:p,onMessageAction:f,cookieService:m}=e;(0,i.useEffect)((()=>{(async function(){return!!t&&!!(await r().nQ({service:"customer_io",cookieService:m}))&&!("cio-tracker"in window)})().then((e=>{if(e)return u(),(0,l().Ay)("https://assets.customer.io/assets/track.js",{id:"cio-tracker",attributes:{"data-site-id":d.siteId,"data-use-array-params":"true","data-in-app-org-id":d.orgId,"data-use-in-app":"true","data-auto-track-page":"false"}}).catch((e=>{console.warn("Customer.io failed to load",e)}))}))}),[t,m]);const v=(0,c().ZC)(s);(0,i.useEffect)((()=>{v!==s&&(u(),a&&void 0!==s?(window._cio.identify({id:(0,o().Xw)(s)}),n&&window._cio.on("in-app:message-opened",n),g&&window._cio.on("in-app:message-dismissed",g),f&&window._cio.on("in-app:message-action",f),window._cio.on("in-app:message-error",p)):window._cio.reset())}),[a,s,v,n,g,p,f])}({isEnabled:(0,n().K8)((()=>D.isLoggedIn()),[D]),isLoggedIn:D.isLoggedIn(),userId:D.id,onMessageOpened:t=>{k().A.state.suppressReason?p().pO(e,{message_id:t.detail.messageId,reason:k().A.state.suppressReason}):(k().A.setState({...k().A.state,isVisible:!0}),p().v4(e,{message_id:t.detail.messageId}))},onMessageDismissed:t=>{k().A.setState({...k().A.state,isVisible:!1}),p().gQ(e,{message_id:t.detail.messageId})},onMessageError:t=>{p().gr(e,{message_id:t.detail.messageId})},onMessageAction:t=>{if(t.detail.actionValue.startsWith("relative_url=")){const a=t.detail.actionValue.split("relative_url=")[1];f().oo({environment:e,url:a})}t.detail.message.dismiss()},cookieService:e.cookieService}),(0,g().LW)({...(0,n().K8)((()=>{var e;const i=w().default.state.isSprigEnabled&&I().A.state.permission.performance&&A().default.checkGate({gateName:"sprig"})&&a.isDesktop,{currentUserSettingsStore:s,currentSpaceStore:n,currentUserStore:o}=b().default.state,r=null==o?void 0:o.getEmail(),c=s?(0,v().iZ)(s):null,l=Boolean(null==n?void 0:n.canAdmin()),d=null==n||null===(e=n.getModel())||void 0===e?void 0:e.getDaysSinceCreated();return{isEnabled:i,userEmail:r,userDaysSinceSignup:c??0,userDomainType:(0,v().FX)(),daysSinceSpaceCreated:d,isSpaceAdmin:l,spaceMemberCount:t}}),[a,t]),isLoggedIn:D.isLoggedIn(),userId:D.id,spaceId:R,sprigConfig:m().A.sprig}),function(e){var t;const{userId:a,spaceId:s,...n}=e,o=(0,C().fJ)(h().E);(0,i.useEffect)((()=>{if(!o.value)return;const{Sentry:e,sentryInitializeFull:t}=o.value;t({Sentry:{...e,isFullSDK:!0},config:m().A,...n})}),[o.value,n]);const r=null===(t=o.value)||void 0===t?void 0:t.Sentry;(0,i.useEffect)((()=>{r&&r.setUser(a?{id:a}:null)}),[r,a]),(0,i.useEffect)((()=>{r&&r.setTag("space.id",s)}),[r,s])}({userId:D.id,spaceId:R,getErrorsSampleRate:(0,i.useCallback)((()=>A().default.getConfigKey("sentry","errorsSampleRate")),[]),getTracesSampleRate:(0,i.useCallback)((()=>A().default.getConfigKey("sentry","tracesSampleRate-v0")),[]),getReplaysSessionSampleRate:(0,i.useCallback)((()=>A().default.getConfigKey("sentry","replaysSessionSampleRate-v0")),[]),getReplaysOnErrorSampleRate:(0,i.useCallback)((()=>A().default.getConfigKey("sentry","replaysOnErrorSampleRate-v0")),[]),getIsProfilingEnabled:(0,i.useCallback)((()=>"sentry"===(0,y().getProfilingToolForSession)()),[]),getProfilesSampleRate:(0,i.useCallback)((()=>A().default.getConfigKey("sentry","profilesSampleRate")),[])})}function R(){return D(),null}},240865:(e,t,a)=>{a.d(t,{V:()=>n});var i=()=>a(56366),s=()=>a(351360);function n(){return(0,i().K8)((()=>{const{currentSpaceStore:e}=s().default.state;return(null==e?void 0:e.getMemberCountFromPublicSpaceData())||null}),[])}},902052:(e,t,a)=>{a.d(t,{_C:()=>s,gQ:()=>c,gr:()=>l,jr:()=>n,pO:()=>r,v4:()=>o});var i=()=>a(989423);function s(e,t){const{name:a,...s}=t;i().vd(e,"click_link",{...s,click_name:a})}function n(e,t){i().vd(e,"scroll",t)}function o(e,t){i().vd(e,"customer_io_in_app_callout_show",t)}function r(e,t){i().vd(e,"customer_io_in_app_callout_suppress",t)}function c(e,t){i().vd(e,"customer_io_in_app_callout_dismiss",t)}function l(e,t){i().vd(e,"customer_io_in_app_callout_error",t)}}}]);