"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[10399,11097,21475,71204],{33218:(e,t,o)=>{o.d(t,{UQ:()=>m,gL:()=>_});o(16280),o(898992),o(672577),o(803949);var r=()=>o(651124),n=()=>o(792071),i=()=>o(688728),a=()=>o(369186),l=()=>o(475140),s=()=>o(235692),d=()=>o(778781),p=()=>o(696706),c=()=>o(896628),u=()=>o(317909);function m(e){let{environment:t,transaction:o,layoutStore:r,position:s,updatedModule:d,sessionId:p}=e;const c=i().Zm[s.area],m=r.getRawModules();if("form_conditional_modules"===c){const e=null==m?void 0:m[c];if(!(null==e?void 0:e[s.moduleId]))throw new Error("Unable to find module being updated.");return void u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){u().applyOperation({transaction:e,store:r,operation:n().N4X.updateModuleInArea({pointer:r.pointer,area:c,module:(0,a().Lv)(d)})})},userAction:"BuilderLayoutModules.updateModule"})}if(!m)throw new Error("Unable to find modules");const y=(0,l().LC)(m,(e=>e.id===s.moduleId));if(!y||y.area!==c)throw new Error("Unable to find module being updated.");u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){u().applyOperation({transaction:e,store:r,operation:n().N4X.updateModuleInArea({pointer:r.pointer,module:(0,a().Lv)(d),..."views_main_tab_modules"===y.area?{area:y.area,viewId:y.viewId}:{area:y.area}})})},userAction:"BuilderLayoutModules.updateModule"})}function y(e){var t,o,r;let{collectionStore:n,layoutStore:i}=e;const a=new Map,l=n.getFormat(),s=[...null===(t=i.getModules())||void 0===t?void 0:t.page_main,...null===(o=i.getModules())||void 0===o?void 0:o.page_details],p=new Map;null===(r=l.property_visibility)||void 0===r||r.forEach((e=>{p.set(e.property,e)})),s.forEach((e=>{if(!(0,d()._Q)(e))return(0,d().gx)(e)?(a.set(e.propertyId,{property:e.propertyId}),void p.set(e.propertyId,{property:e.propertyId,visibility:"show"})):void 0;e.propertyIds.forEach((e=>{a.set(e,{property:e}),p.set(e,{property:e,visibility:"show"})}))}));const c=n.getNormalizedPropertyGroups();var u;c?c.forEach((e=>{var t;null===(t=e.propertyIds)||void 0===t||t.forEach((e=>{a.has(e)||a.set(e,{property:e})}))})):null===(u=l.collection_page_properties)||void 0===u||u.forEach((e=>{a.has(e.property)||a.set(e.property,e)}));return{propertiesFormat:Array.from(a.values()),propertyVisibility:Array.from(p.values())}}function _(e){let{environment:t,transaction:o,collectionStore:i,layoutStore:a}=e;const{propertiesFormat:l,propertyVisibility:m}=y({collectionStore:i,layoutStore:a});u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){const t=a.getBlockChildrenPointers(),o=a.getFormat(),y=a.firstModuleOfType("viewsMain");y&&(0,d().y6)(y)&&t.find((e=>p().L3.isEqual(e,y.collection_view_block_pointer)))&&u().applyOperation({transaction:e,store:a,operation:n().N4X.removeBlockChild(a.pointer,y.collection_view_block_pointer.id)});const _=null==o?void 0:o.previousViewsMainCollectionViewBlockPointer,f=_&&t.find((e=>p().L3.isEqual(e,_)));f&&u().applyOperation({transaction:e,store:a,operation:n().N4X.removeBlockChild(a.pointer,f.id)}),u().applyOperation({transaction:e,store:a,operation:n().N4X.setModulesByAreas(a.pointer,(0,s().K5)())}),u().applyOperation({transaction:e,store:a,operation:n().N4X.deleteFormat(a.pointer)});const v=i.getFormat(),{page_section_visibility:w}=v;c().zA({stores:[i],update:{property_groups:void 0,collection_page_properties:l,property_visibility:m,...w?{page_section_visibility:r().Zi}:void 0},transaction:e})},userAction:"BuilderLayoutModules.resetLayoutToDefault"})}},155185:(e,t,o)=>{o.d(t,{I:()=>a,_:()=>i});const r={normalizedTitleWithIcon:!0,properties:!0,property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,views:!0,viewsMain:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,deleted_property:!1,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1},n={properties:!0,property:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,titleWithIcon:!0,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,views:!0,viewsMain:!0,collectionView:!0,collectionViewV2:!0};function i(e){return r[e.type]}function a(e){return n[e.type]}},173019:(e,t,o)=>{o.d(t,{r:()=>n});o(296540);var r=o(474848);const n=(0,o(340498).wt)("pencil",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},175213:(e,t,o)=>{o.d(t,{G:()=>i});var r=()=>o(989423),n=()=>o(508496);function i(e,t){r().vd(e,"delete_property",t),n().default.logEvent("delete_property")}},211619:(e,t,o)=>{o.r(t),o.d(t,{handleWorkflowTemplatesDeeplink:()=>k});o(898992),o(354520),o(430670),o(581454);var r=()=>o(584262),n=()=>o(428045),i=()=>o(427704),a=()=>o(854150),l=()=>o(294712),s=()=>o(919709),d=()=>o(496603),p=()=>o(763824),c=()=>o(534177),u=()=>o(214006),m=()=>o(351360),y=()=>o(630116),_=()=>o(227157),f=()=>o(839754),v=()=>o(338907),w=()=>o(913454),g=()=>o(32454),S=()=>o(896326),h=()=>o(458097),I=()=>o(433052),b=()=>o(426116),M=()=>o(840153),A=()=>o(857783),E=()=>o(435009);async function k(e){const{nextRoute:t}=e,o=await async function(e){var t;let{environment:o,nextRoute:n}=e;if(!o.currentUser.id)return{error:"no_user_id",newEnvironment:o};const i=await async function(e){let{environment:t,nextRoute:o}=e;const{spaceId:r}=await I().wA(t),n=t.currentUser.id,i=o.spaceId??r,a=o.userId??n,s=t.currentUser.loggedInUserIds.map((e=>{const o={table:l().GD,id:e};return new(y().dZ)(t,o,{userId:e})}));await(0,p().lX)(s,25,(e=>e.load()));const c=s.flatMap((e=>e.getSpaceViewStores()));await(0,p().lX)(c,25,(e=>e.load()));const m=u().A.getAllSpaceViewStores(t).filter((e=>{var t;return null===(t=e.getSpaceStore())||void 0===t?void 0:t.canEdit()}));return(0,d().Ul)(m,(e=>e.getSpaceId()===i&&e.getParentId()===a?0:e.getParentId()===a&&e.getSpaceId()===r?1:e.getParentId()===a?2:e.getParentId()===n&&e.getSpaceId()===r?3:e.getParentId()===n?4:e.getSpaceId()===i?5:e.getSpaceId()===r?6:7))[0]}({environment:o,nextRoute:n}),a=null==i?void 0:i.getParentId();if(!i)return{error:"no_space_view_store",newEnvironment:o};if(!a)return{error:"no_space_view_user_id",newEnvironment:o};let s=o;a!==o.currentUser.id&&(s=await M().T({environment:o,newCurrentUserId:a}),s&&(o=s));await i.load();const c=i.getSpaceId();i.id!==(null===(t=m().default.state.currentSpaceViewStore)||void 0===t?void 0:t.id)&&(n.autoCreateDatabase?await b().yV({environment:o,spaceViewStore:i}):await b().tR({environment:s,spaceViewStore:i,userSettingsStore:m().default.state.currentUserSettingsStore,userRootStore:m().default.state.currentUserRootStore,pageVisitSource:r().y8.WorkflowTemplatesDeeplink,navigationType:"switchingToOrLoadingSpace"}));await m().default.waitUntil((()=>{var e;return(null===(e=m().default.state.currentSpaceStore)||void 0===e?void 0:e.id)===c}));const _=m().default.state.currentSpaceStore;if(!_||_.id!==c||!_.canEdit())return{error:"no_valid_space_store",newEnvironment:s};return{value:{newSpaceStore:_},newEnvironment:s}}(e);if(o.error)return void E().oo({environment:o.newEnvironment,url:i().JZ.root,redirect:!0});const k=o.newEnvironment,T=o.value.newSpaceStore,C=await async function(e){let{currentSpaceStore:t,nextRoute:o}=e;if("private"===o.location.type)return t;if("team"===o.location.type){const e=y().h4.createChildStore(t,{table:a().yK,id:o.location.teamId,spaceId:t.id});await e.load();return e.canAddOrRemoveTopLevelPages()&&e.getParentId()===t.id?e:t}(0,c().HB)(o.location)}({currentSpaceStore:T,nextRoute:t});let R;var D;t.autoCreateDatabase&&(R=await(0,_().my)({environment:k,parentStore:C}),null!==(D=R)&&void 0!==D&&D.collectionViewBlockStore&&A().uK({environment:k,store:R.collectionViewBlockStore,pageVisitSource:r().y8.WorkflowTemplatesDeeplink}));const U=w().globalWorkflowTemplates.fromIdOfType({templateId:n().MH,type:"collection"}),x=(0,S().XM)({origin:"workflow_templates_deeplink",parentStore:C}),O="aiBuilder"===t.modalType;h().A.setState({open:!0,isSaving:!1,isPackagingM3_3Enabled:(0,v().Te)(),...x,...O?{version:"build_with_ai",collectionTemplate:U,userCustomizations:{featureTemplateSelections:[],recordTitles:[]},previewCollectionInfo:void 0,setupGenerator:(0,g().getSetupGeneratorForTemplate)({isForInAppFlows:!0,environment:k,template:U,parentStore:C,initialAiPrompt:t.prompt?(0,s().x9d)(t.prompt):void 0,analyticsArgs:{origin:"workflow_templates_deeplink",hadSelectionModalSearchEntered:!1,workflowTemplatesFlowId:x.flowId}})}:{version:"select_and_customize_template"},currentStepIndex:0,parentStore:C,existingCollectionInfo:R,relationInfos:[],navigateToOnFinish:t.autoCreateDatabase?"skip":"created_collection",collectionTemplatesSearchQuery:void 0,onClose:e=>{var t;(0,f().ZM)({environment:k,userAction:"workflowDeeplinkActions.handleWorkflowTemplatesDeeplink",result:e,existingCollectionViewBlockStore:null===(t=R)||void 0===t?void 0:t.collectionViewBlockStore})}})}},235692:(e,t,o)=>{o.d(t,{K5:()=>c,_u:()=>d,oP:()=>u,wC:()=>s,xN:()=>p});o(898992),o(354520),o(581454);var r=()=>o(183558),n=()=>o(155185),i=()=>o(778781),a=()=>o(369186);const l={page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"properties",type:"properties"},{id:"discussions",type:"discussions"},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},s={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},d={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyLabels:"hide",propertyIds:[]},{id:"editor",type:"editor"},{id:"discussions",type:"discussions"}],page_details:[],form_layout_schema:[]};function p(e){return(0,a().jr)({modulesByArea:l,collectionSchema:null==e?void 0:e.collectionSchema,collectionFormat:null==e?void 0:e.collectionFormat})}function c(){return{page_layout_schema:(0,a().ke)(l.page_main).map((e=>{if(!(0,i().cn)(e))return(0,n().I)(e)?{...e,id:(0,r().Ay)()}:e})).filter((e=>void 0!==e)),page_info_layout_schema:(0,a().ke)(l.page_details).map((e=>{if(!(0,i().cn)(e))return(0,n().I)(e)?{...e,id:(0,r().Ay)()}:e})).filter((e=>void 0!==e)),form_layout_schema:void 0}}function u(e,t){const o=void 0===t?[{id:(0,r().Ay)(),type:"formQuestion",formQuestionId:e}]:[{id:(0,r().Ay)(),type:"formQuestion",formQuestionId:e},{id:(0,r().Ay)(),type:"formQuestion",formQuestionId:t}];return{page_layout_schema:void 0,page_info_layout_schema:void 0,form_layout_schema:[{id:(0,r().Ay)(),type:"cover"},{id:(0,r().Ay)(),type:"formTitle"},...o,{id:(0,r().Ay)(),type:"formSubmit"}]}}},299177:(e,t,o)=>{o.d(t,{A:()=>i});class r extends(()=>o(757695))().default{getInitialState(){return{}}}const n=new r;o(604341).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",n);const i=n},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>D,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>b,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>I,MAX_RECURRENCE_INTERVAL:()=>v,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>w,RRULE_WEEKDAYS_MAP:()=>f,adjustedStartDateIfPossible:()=>A,areRecurrenceSchedulesEqual:()=>L,convertFromUnpersistedRecurrenceConfig:()=>B,convertToUnpersistedRecurrenceConfig:()=>U,getFormattedEndCondition:()=>R,getFormattedNextRecurrenceTime:()=>C,getNewEndTimestamp:()=>x,getNextDateUtc:()=>T,getRecurrenceAfter:()=>E,isRunningBetweenMidnightAnd3AM:()=>k,isValidRecurrenceInterval:()=>g,isValidRecurrenceNumberOfRuns:()=>S,rruleFromRecurrence:()=>h,templateAncestorsViolateRecurrenceNesting:()=>M});o(898992),o(354520),o(581454);var r=()=>o(244641);o(944114);function n(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];if(0===o.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...n(o[0],...o.slice(1)).map((e=>[a,...e])));return i}var i=()=>o(496603),a=()=>o(534177),l=()=>o(720665),s=()=>o(597777),d=()=>o(869190),p=()=>o(416504),c=()=>o(402390);class u extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>o(912720);const y=(0,o(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12â€“3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),_={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},f={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},v=99,w=999;function g(e){return(0,l().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function S(e){return(0,l().Et)(e)&&Number.isInteger(e)&&e>0&&e<=w}function h(e){const{start_date:t,frequency:o,interval:r,weekdays:i,timezone:l,hour:d,minute:p}=e,c="week"===o&&i?i.map((e=>f[e])):void 0,m={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,s().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=n(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,o]=e;return f[t].nth(o)})):(0,a().HB)(e.monthly_restriction)),new u({freq:_[o],dtstart:(0,s().eU)(t),interval:r,byweekday:c,tzid:l,byhour:d??0,byminute:p??0,bysecond:0,...m})}const I=1,b=1;function M(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),r=e.length,n=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=r>I,a=o.length>=b;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:r,immediateAncestorRecurrenceType:n}}function A(e){var t;const{recurrence:o,afterDate:n}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=n)return o;let i=r().c9.fromMillis(o.start_date,{zone:"utc"});const a=r().c9.fromMillis(n,{zone:"utc"});switch(o.frequency){case"year":{const e=Math.floor(a.diff(i,"years").years/o.interval);i=i.plus({years:e*o.interval});break}case"month":{const e=Math.floor(a.diff(i,"months").months/o.interval);i=i.plus({months:e*o.interval});break}case"week":{const e=Math.floor(a.diff(i,"weeks").weeks/o.interval);i=i.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(a.diff(i,"days").days/o.interval);i=i.plus({days:e*o.interval});break}}return{...o,start_date:(0,s().DH)(i.toMillis())}}function E(e){const{recurrence:t,afterDate:o}=e;if((0,m().wt)(t)){const e=(0,s().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=h(A({recurrence:t,afterDate:o})).after((0,s().eU)(o));if(!e)return;return(0,s().h1)(e)}}function k(e){return 0===e.hour||1===e.hour||2===e.hour}function T(e){return h(e).after((0,s().eU)((0,s().Rz)()))||void 0}function C(e){const{recurrence:t,intl:o}=e,n=T(B(t));if(!n)return;const i=k(t),a=r().c9.fromJSDate(n).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,c().H)(o)).setZone(t.timezone),l=(0,d().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(i)return o.formatMessage(y.dateBetweenMidnightAnd3AM,{date:l});{let e=a.toLocaleString(r().c9.TIME_SIMPLE);return t.timezone!==(0,p().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),o.formatMessage(y.dateAtTime,{date:l,time:e})}}function R(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(y.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,d().Yq)({date:r().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(y.noEndCondition)}const D=100;function U(e){return{...e,start_date:(0,s().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,s().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function x(e,t,o){return e.plus(o-t)}function O(e,t){const o=r().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,s().Rz)(o.toJSDate())}}function B(e){return{...e,start_date:(0,s().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?O(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function L(e,t){const o=i().fN(e,(e=>void 0!==e)),r=i().fN(t,(e=>void 0!==e));return i().n4(o,r)}},447934:(e,t,o)=>{o.d(t,{$L:()=>A,Fv:()=>x,HD:()=>O,V_:()=>R,bV:()=>D,jP:()=>C,nh:()=>T,w8:()=>U});o(16280),o(18107),o(967357),o(898992),o(354520);var r=()=>o(206267),n=()=>o(792071),i=()=>o(688728),a=()=>o(475140),l=()=>o(235692),s=()=>o(924329),d=()=>o(778781),p=()=>o(144081),c=()=>o(334261),u=()=>o(661920),m=()=>o(435009),y=()=>o(317909),_=()=>o(519839),f=()=>o(594794),v=()=>o(869562),w=()=>o(351360),g=()=>o(712505),S=()=>o(630116),h=()=>o(449476),I=()=>o(640868),b=()=>o(204521),M=()=>o(33218);function A(e){let{environment:t,transaction:o,collectionStore:r,userId:i,modules:a}=e;const s=(0,f().zP)({environment:t,spaceId:r.getSpaceId(),table:p().zx}),d=S().sk.createChildStore(r,s),{model:c,operations:[u]}=n().wfN.create({pointer:s,parent:r.pointer,createdByUserId:i,modules:a??(0,l().K5)()});y().applyOperation({transaction:o,store:d,operation:u});const m=n().BnK.setLayout(r.pointer,s);return y().applyOperation({transaction:o,store:r,operation:m}),{model:c,store:d}}function E(e){let t;return e?t=e:g().default.state.open&&g().default.state.targetStore?t=g().default.state.targetStore:w().default.state.mainEditorCurrentBlockStore&&(t=w().default.state.mainEditorCurrentBlockStore),t}function k(e){v().setUpdateExpand({environment:e,isExpanded:!1,from:"keyboard_default",saveDetailsSidebarPreference:!1}),u().VN({environment:e,from:"open_page_layout_editor",preventAnimation:!0})}function T(e){var t,o;let{environment:n,blockStore:i,collectionStore:a,collectionViewStore:l,from:s,initialSelectedModuleType:d}=e;const p=function(e){var t;let o=E(e);if(null!==(t=o)&&void 0!==t&&t.isCollectionView()){const e=(0,_().UH)(o);o=e?e.resultsInViewOrder(1).at(0):void 0}return o}(i),c=window.location.href;k(n);const u=r().JW();h().A.setState({isOpen:!0,mode:"layout-editor",collectionStore:a,pageStore:p,siteRootBlockStore:void 0,sessionId:u,initialSelectedModuleId:null==p||null===(t=p.getAssociatedCollectionStore())||void 0===t||null===(t=t.getLayoutStore())||void 0===t||null===(t=t.getModel())||void 0===t||null===(t=t.firstRawModuleOfType(d??"titleWithIcon"))||void 0===t?void 0:t.id,urlOnOpen:c}),(0,b().Ko)({environment:n,from:s,context:"layout",sessionId:u,collectionId:null==a?void 0:a.id,existingLayoutId:null==a||null===(o=a.getLayoutStore())||void 0===o?void 0:o.id,collectionViewId:null==l?void 0:l.id})}function C(e){let{environment:t,store:o,siteRootBlockStore:n,from:i}=e;const a=E(o);k(t);const l=r().JW();h().A.setState({isOpen:!0,mode:"site-settings-editor",pageStore:a,siteRootBlockStore:n,sessionId:l}),(0,b().Ko)({environment:t,context:"site",from:i,sessionId:l,collectionId:void 0,existingLayoutId:void 0})}function R(e){let{slideBlockStore:t}=e;const o=t.getNavigableBlockStore(),n=r().JW();h().A.setState({isOpen:!0,mode:"presentation",pageStore:o,currentSlideStore:t,sessionId:n}),window.document.documentElement.requestFullscreen()}function D(e){let{slideBlockStore:t}=e;h().A.setState({isOpen:!1}),window.document.fullscreenElement&&window.document.exitFullscreen()}function U(e){h().A.getState().isOpen&&x(e)}function x(e){let{environment:t}=e;const o=h().A.getState();if(!o.isOpen)throw new Error("Cannot close page layout editor. Page layout editor is not open.");"layout-editor"===o.mode&&o.urlOnOpen&&window.location.href!==o.urlOnOpen&&m().aX(t),h().A.setState({isOpen:!1})}function O(e){var t;let{environment:o,transaction:r,property:n,layoutStore:l}=e;const p=h().A.getSessionId(),u=null===(t=l.getModel())||void 0===t?void 0:t.getRawModules(),m=l.getCollectionModel();if(!u||!m)return;const y=S().md.createChildStore(l,m.pointer),_=(0,a().yn)(u,(e=>"titleWithIcon"===e.type));if(_&&(0,d().Mj)(_.module)){var f;const{module:e,position:t}=_,a={...e,type:"titleWithIcon",propertyIds:null===(f=e.propertyIds)||void 0===f?void 0:f.filter((e=>e!==n))};(0,M().UQ)({environment:o,sessionId:p,transaction:r,layoutStore:l,position:{area:(0,i().Fw)(t.area),moduleId:e.id},updatedModule:(0,s().X)(a)})}const v=(0,a().LP)(u,(e=>"property"===e.type&&e.propertyId===n));for(const{module:a,position:s}of v){const e=a.id,t=(0,i().Fw)(s.area);(0,I().U)({environment:o,sessionId:p,transaction:r,layoutStore:l,position:{area:t,moduleId:e}})}const w=m.getFormat().collection_page_sections;if(w){const e=w.filter((e=>e.section!==n));c().LK({store:y,pageSectionFormats:e,transaction:r,environment:o})}}},640868:(e,t,o)=>{o.d(t,{U:()=>c});o(16280);var r=()=>o(454984),n=()=>o(688728),i=()=>o(475140),a=()=>o(789280),l=()=>o(778781),s=()=>o(317909),d=()=>o(204521),p=()=>o(658616);function c(e){let{environment:t,transaction:o,layoutStore:c,position:u,sessionId:m,beforePerformDeleteModule:y}=e;const _=c.getModules();if(!_)throw new Error("[deleteModuleAtPosition] modules by area not found for layout store");const f=(0,i().EX)(_,(e=>e.id===u.moduleId));if(!f)return;const{module:v,position:w}=f;if(!(0,a().Fe)(v))throw new Error("[deleteModuleAtPosition] module to delete is not removeable");var g;(s().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){!function(e){const{transaction:t,layoutStore:o,moduleLocation:i,moduleToDelete:a,beforePerformDeleteModule:d}=e;d&&d(t);(0,l().V6)(a)&&(0,p().deleteViewsModuleDependencies)({layoutStore:o,viewsModule:a,transaction:t});if("form_conditional_modules"===i.area){const e=r().N4.removeChildModule({pointer:o.pointer,modulesByArea:o.getModules(),module:a});for(const r of e)s().applyOperation({transaction:t,store:o,operation:r})}else{const e="views_main_tab_modules"===i.area?{area:i.area,viewId:i.viewId}:{area:n().Zm[i.area]};s().applyOperation({transaction:t,store:o,operation:r().N4.deleteModuleInArea({...e,pointer:o.pointer,moduleId:a.id})})}}({environment:t,transaction:e,layoutStore:c,moduleLocation:w,moduleToDelete:v,beforePerformDeleteModule:y})},userAction:"pageLayout.deleteActions.deleteModuleAtPosition"}),m)&&d().PS({environment:t,module:v,sessionId:m,collectionId:null===(g=c.getCollectionModel())||void 0===g?void 0:g.id,layoutId:c.id,context:(0,n().We)(u.area),area:u.area})}},658616:(e,t,o)=>{o.r(t),o.d(t,{deleteViewsModuleDependencies:()=>a});var r=()=>o(220719),n=()=>o(44729),i=()=>o(630116);function a(e){const{layoutStore:t,viewsModule:o,transaction:a}=e,l=(0,r().o9)(i().Bv.createChildStore(t,o.collection_view_block_pointer));n().zz({childStore:l,parentStore:t,transaction:a})}},789280:(e,t,o)=>{o.d(t,{Fe:()=>i,wm:()=>a});const r={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,relationsGroup:!0,formSubmit:!0,formQuestion:!0,formTitle:!0,placeholder:!0,transcript:!0,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,views:!0,viewsMain:!1},n={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,formSubmit:!1,formQuestion:!1,formTitle:!1,placeholder:!1,transcript:!1,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,relationsGroup:!0,editor:!1,views:!1,viewsMain:!1};function i(e){return r[e.type]}function a(e){return n[e.type]}},888325:(e,t,o)=>{function r(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>r})},966759:(e,t,o)=>{o.d(t,{i:()=>i});var r=()=>o(476492),n=()=>o(175213);function i(e){const{environment:t,collectionContextStore:o,property_type:i,from:a,property:l,...s}=e,d=(0,r().sl)(o)||{};(0,n().G)(t,{property:l,property_type:i,from:a,...s,...d})}}}]);