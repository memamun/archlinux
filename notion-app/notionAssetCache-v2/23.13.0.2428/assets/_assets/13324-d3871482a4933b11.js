"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[13324],{3079:(e,t,o)=>{o.d(t,{H:()=>a});var n=o(296540),r=o(474848);const a=n.forwardRef((function(e,t){const{children:n,property:a,store:i}=e,l=(0,o(171722).y)({propertyId:a,store:i})||[];return(0,r.jsx)("div",{ref:t,className:l.length?l.join(" "):void 0,children:n})}))},53528:(e,t,o)=>{o.d(t,{OH:()=>l,T2:()=>s,do:()=>c});var n=()=>o(597777),r=()=>o(869190),a=()=>o(604995),i=()=>o(416504);function l(e){const{dateTime:t,intl:o,shortenDateAndRange:n}=e,i=a().C6.toPersistedDate(t.valueOf());return r().ZF({value:i,allowRelativeDates:!0,intl:o,shortenDateAndRange:n,displayInUserTimezone:!0})}function s(e){const{dateTime:t,intl:o,userTimeZone:n,displayInUserTimezone:i,alwaysIncludeTimezone:l}=e,s=a().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return r().ZF({value:s,allowRelativeDates:!0,intl:o,userTimeZone:n,displayInUserTimezone:i,alwaysIncludeTimezone:l})}function c(e){const{luxonRange:t,intl:o}=e,l=a().C6.toPersistedDateRange(t),s=r().ZF({value:l,allowRelativeDates:!1,shortenDateAndRange:!0,intl:o,displayInUserTimezone:!0}),c=t.end.setZone((0,i().P)()),d=r().fU({start_time:c.toFormat(n().GE),humanReadable:!1,intl:o});return o.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:s,formattedEndTime:d})}},63473:(e,t,o)=>{o.d(t,{B:()=>a});var n=()=>o(449412);const r={};function a(e){const{throttleSeconds:t,...o}=e,a=`${e.from}:${e.type}`,i=r[a],l=Date.now();(!i||l-i>1e3*t)&&(r[a]=l,function(e){const{error:t,...o}=e;(0,n().O8)(t,o)}(o))}},67775:(e,t,o)=>{o.d(t,{l:()=>g,z:()=>m});o(296540);var n=()=>o(401497),r=()=>o(72135),a=()=>o(496603),i=()=>o(720665),l=()=>o(886680),s=()=>o(972435),c=()=>o(78901),d=()=>o(162010),u=o(474848);const p=21;function g(e){const{numberValue:t,numberFormat:o,numberPrecision:g,numberShowAs:f,shouldRenderTooltip:h,withComma:y,style:v,ringWidth:S,className:b,barHeight:C}=e,x=(0,n().DP)();if(a().yr(t)||i().pN(t))return null;const _=e.progressSize??p,M=(null==f?void 0:f.showValue)??!0,k=M&&r().ZV(t,o,s().A.getIntl(),void 0,g);let A;if("bar"===(null==f?void 0:f.type)||"ring"===(null==f?void 0:f.type)){const n=r().XK(t,f.maxValue),{filledColor:a,gapColor:i,unfilledColor:s}=m({theme:x,color:f.color}),p=h?l().lh({numberValue:t,numberFormat:o,numberShowAs:f}):void 0;A="bar"===f.type?(0,u.jsx)(c().z,{percentage:n,filledColor:a,gapColor:i,unfilledColor:s,height:C,style:{height:_,...e.barStyle,...M?{}:{flexBasis:"100%"}},tooltip:p}):(0,u.jsx)(d().C,{percentage:n,filledColor:a,gapColor:i,unfilledColor:s,size:_,ringWidth:S,tooltip:p})}return(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:"6px 8px",...v},className:b,children:[k,A,y?", ":null]})}function m(e){let{theme:t,color:o}=e;const n="default"===o?t.selectLightGray:t.accentColors[o];return{filledColor:"dark"===t.mode?n[500]:n[400],gapColor:n[50],unfilledColor:"dark"===t.mode?n[200]:t.selectLightGray[200]}}},68350:(e,t,o)=>{o.d(t,{I:()=>S});var n=o(296540),r=()=>o(484714),a=()=>o(56366),i=()=>o(401497),l=()=>o(970013),s=()=>o(452862),c=()=>o(645873);const d=new(c().O2)("PagePropertiesRowNameMenu",(async()=>Promise.all([o.e(96346),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(38664),o.e(24587),o.e(28271),o.e(17254),o.e(1423)]).then(o.bind(o,686)))),u=(0,c()._h)(d,(e=>e.PagePropertiesRowNameMenu));var p=()=>o(795963),g=()=>o(962730),m=()=>o(735372),f=()=>o(59364),h=()=>o(14235),y=()=>o(717402),v=o(474848);const S=n.memo((function(e){const{property:t,schema:c,disabled:d,locked:m,canConfigureCollection:y,isInPeekRenderer:S,labelComponent:C,hideDragHandle:x,pagePropertiesStore:_,styleVariants:M,disableRowNameInteractivity:k,dragHandleStyle:A,layoutModule:w,forceHighlight:I,forceFocusedHighlight:P,hideIcon:R,propertyNameAriaId:T,showDragHandleAsIcon:j}=e,L=(0,n.useRef)(null),B=(0,o(175116).Ks)(),D=(0,r().v3)(),V=(0,r().Y0)(),[F,N]=(0,n.useState)(!1),O=c[t],E=(0,a().K8)((()=>_.state.hoveredProperty===t),[_,t]),K=(0,a().K8)((()=>!V.isMobile&&E&&!o(732770).A.state.isKeyboardMode&&!x),[V.isMobile,x,E]),z=(0,a().K8)((()=>_.state.openProperty),[_]),H=(0,o(806401).D)(O),W=(0,a().K8)((()=>null==B?void 0:B.collectionStore()),[B]),U=(0,i().IS)((e=>{const{size:t="medium",width:n={variant:"fixed",widthMobile:p().yN,widthDesktop:p().OQ},height:r,color:a="default"}=M||{},i="medium"!==(null==r?void 0:r.variant)&&(null!=r&&r.variant||"medium"!==t)?24:34;let l;if("fixed"===n.variant){const e=V.isMobile?n.widthMobile||p().yN:n.widthDesktop||p().OQ;l={width:e,maxWidth:e,minWidth:0}}else if("hug-content"===n.variant){l={width:"min-content",maxWidth:V.isMobile?n.maxWidthMobile||"100%":n.maxWidthDesktop||"100%",minWidth:0}}else(0,o(534177).HB)(n);return{propertyLabelContainerStyles:{display:"flex",alignItems:"center",color:"primary"===a?e.text.primary:e.text.secondary,height:i,...l},tooltipLockedIcon:{width:12,fill:e.text.contrastPrimary,marginLeft:2,display:"inline-block",verticalAlign:"middle",paddingBottom:3},tooltipDescription:{color:e.text.contrastSecondary},tooltipAutoUpdatedByAi:{color:e.text.contrastSecondary},sharingEnabledTooltip:{marginTop:8,color:e.text.contrastSecondary}}}),[V.isMobile,M]),q=(0,n.useCallback)((()=>{_.setState({..._.state,hoveredProperty:void 0})}),[_]),G=(0,n.useCallback)((()=>{_.setState({..._.state,hoveredProperty:t})}),[_,t]),Q=(0,n.useMemo)((()=>!V.isMobile&&!d&&!(m||!y)&&!x&&!e.showDragHandleAsIcon&&(0,v.jsx)(o(145214).A,{animate:{opacity:K?1:0},initial:{opacity:0},exit:{opacity:0},style:{width:f().Z+4,marginLeft:-(f().Z+4)},onMouseMove:G,onMouseLeave:q,children:(0,v.jsx)(o(348501).A,{role:"cell",disallowTabbing:!0,onClick:t=>function(e,t,n,r){o(592678).Zm()||r.setState({...r.state,openProperty:{property:t,isInPeekRenderer:n}})}(0,e.property,e.isInPeekRenderer,_)})})),[y,V.isMobile,d,x,m,_,e.isInPeekRenderer,e.property,e.showDragHandleAsIcon,K,q,G]),Y=(0,n.useCallback)((e=>{if(!B)return;const n=B.permissionScopesStore.state,r={onClick:!k&&n.canConfigureBlock?()=>function(e,t,n,r){o(725614).clear({environment:n}),o(778417).IU({environment:n}),(0,o(404779).y)(),r.setState({...r.state,openProperty:{property:e,isInPeekRenderer:t}})}(t,S,D,_):o(496603).D_};return(0,v.jsx)(b,{hideIcon:Boolean(R),showDragIcon:!R&&j&&K,dragHandleStyle:A,schema:c,property:t,disabled:d||Boolean(k),locked:m,canConfigureCollection:y,events:(0,o(553965).A)(r,e),propertyNameAriaId:T,setIsDescriptionIconTooltipHovered:e=>N(e),styleVariants:M,layoutModule:w,forceHighlight:I,forceFocusedHighlight:P,isSharingEnabled:H})}),[B,D,w,I,P,A,t,c,S,d,m,y,k,_,M,K,T,j,R,H]),Z=Boolean(z&&!d&&z.property===t&&z.isInPeekRenderer===S),$=(0,n.useCallback)((()=>{if(!B)return;_.setState({..._.state,openProperty:void 0});const e=B.settingsStore;o(686526).os({collectionSettingsStore:e})}),[B,_]),X=(0,n.useCallback)((()=>{const t=null==B?void 0:B.settingsStore;if(B&&t)return(0,v.jsx)("div",{ref:L,children:t.state.open?(0,v.jsx)(o(59400).m$,{context:o(525432).Bd.TopbarFilterPopup,collectionContextStore:B,collectionSettingsStore:t,hideDesktopHeader:!0}):(0,v.jsx)(u,{...e,popupContainerRef:L})})}),[B,e]),J=(0,n.useCallback)((e=>{if(!B||!O)return null;const t=(0,l().$M)(O)&&(0,l().om)(O);return(0,v.jsxs)("div",{...e,style:o(673730).Q$,children:[(0,v.jsxs)("div",{children:[O.name,W&&"relation"===O.type&&H&&(0,v.jsx)(s().F,{propertySchema:O,collectionStore:W,style:U.sharingEnabledTooltip}),m&&(0,o(315564).S)(U.tooltipLockedIcon)]}),void 0!==(null==O?void 0:O.description)&&O.description.length>0?(0,v.jsx)("div",{style:U.tooltipDescription,children:O.description}):null,t&&t.auto_update_on_edit&&(0,v.jsx)("div",{style:U.tooltipAutoUpdatedByAi,children:(0,v.jsx)(o(959013).sA,{defaultMessage:"Auto-updated by AI",id:"database.tableHeaderCell.tooltipAiAutofillDescription"})})]})}),[B,W,m,O,U.tooltipAutoUpdatedByAi,U.tooltipDescription,U.tooltipLockedIcon,U.sharingEnabledTooltip,H]);return B&&O?(0,v.jsx)(o(859428).A,{disableTooltip:V.isMobile,renderTooltip:J,delayThreshold:F?0:500,placement:g().W.Left,render:e=>(0,v.jsxs)("div",{style:U.propertyLabelContainerStyles,onMouseMove:G,onMouseLeave:q,children:[Q,(0,v.jsx)(h().Ay,{popupType:V.isMobile?h().nl.SlideUp:h().nl.Popup,originGap:1,alignmentToOrigin:g().C.Start,render:X,open:Z,onDismiss:$,origin:C??Y(e)})]},t)}):null})),b=n.memo((function(e){var t;const{schema:n,property:l,disabled:c,locked:d,canConfigureCollection:u,events:p,styleVariants:g,forceHighlight:f,forceFocusedHighlight:h,showDragIcon:S,isSharingEnabled:b}=e,C=(null==g?void 0:g.color)||"default",x=(null==g?void 0:g.size)||"medium",_=null==g?void 0:g.fontWeight,M=n[l],{isMobile:k}=(0,r().Y0)(),A=(0,a().K8)((()=>{if(h)return!0;const e=m().wb.state;return!(!e||"page_property_name"!==e.type)&&e.propertyId===l}),[l,h]),w=(0,a().K8)((()=>{var e;if(f)return!0;const t=m().qu.state,o=null===(e=n[l])||void 0===e?void 0:e.name;if(!t||!o)return!1;return o.toLowerCase().includes(t.toLowerCase())}),[l,n,f]),I=(0,i().IS)((t=>{const n=A?t.findHighlightMatch.selectedBackground:t.findHighlightMatch.unselectedBackground;return{button:{display:"flex",alignItems:"center",height:"100%",width:(0,o(778781).gx)(e.layoutModule)?void 0:"100%",borderRadius:4,padding:"0 6px",maxWidth:"100%"},property:{backgroundColor:w?n:void 0,outline:w?`5px solid ${n}`:void 0,borderRadius:w?4:void 0,color:A?"black":void 0,..."medium"===x?{fontSize:14,lineHeight:"20px"}:{fontSize:13,lineHeight:"18px"},..._?{fontWeight:o(284371).Wy[_]}:{}},icon:{marginRight:2,..."primary"===C?{fill:t.icon.primary}:A?{fill:"black"}:{}}}}),[C,A,x,_,e.layoutModule,w]);return M?(0,v.jsx)(o(704152).A,{role:"cell",id:e.propertyNameAriaId,style:I.button,disabled:c||d||!u,...p,onContextMenu:e=>{e.preventDefault(),p.onClick(e)},children:(0,v.jsx)(y().Ay,{propertySchema:M,showIcon:!e.hideIcon,showDragIcon:S,badge:(0,v.jsxs)(v.Fragment,{children:["relation"===M.type&&b&&(0,v.jsx)(s().z,{style:{width:20,height:20,marginLeft:4}}),(0,v.jsx)(y().Jv,{propertySchema:M}),!k&&!(null===(t=M.description)||void 0===t||!t.length)&&(0,v.jsx)(o(769068).g,{setIsHovered:e.setIsDescriptionIconTooltipHovered})]}),style:I.property,property:l,className:A?o(643707).wT:void 0,labelSizeVariant:x,iconSize:"medium"===x?16:14,iconStyle:I.icon,dragHandleStyle:e.dragHandleStyle})}):null}))},86499:(e,t,o)=>{o.d(t,{q:()=>a});var n=()=>o(645873);const r=new(n().O2)("RelationMenuRow",(async()=>{const{RelationMenuRow:e}=await Promise.all([o.e(43380),o.e(18766)]).then(o.bind(o,525174));return{RelationMenuRow:e}})),a=(0,n()._h)(r,(e=>e.RelationMenuRow))},93549:(e,t,o)=>{o.d(t,{j:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("parentItem",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.29662 5.47368L7.33167 4.11653L6.30839 5.24265L4.22625 7.32458C4.16064 7.39019 4.0821 7.43856 3.99288 7.47024C3.90958 7.5013 3.82192 7.51646 3.73089 7.51646C3.54036 7.51646 3.37427 7.45062 3.24187 7.31823L3.23992 7.31628C3.11249 7.18353 3.04999 7.01804 3.04999 6.82921C3.04999 6.63758 3.12598 6.46746 3.2656 6.32285L3.26711 6.32129L7.4749 2.10083C7.62016 1.9509 7.79567 1.87 7.99651 1.87C8.19734 1.87 8.37284 1.95089 8.51809 2.10079L12.7355 6.32457C12.8705 6.46954 12.943 6.63917 12.943 6.82921C12.943 7.01927 12.8775 7.18502 12.7458 7.31725C12.617 7.45083 12.4522 7.51646 12.2621 7.51646C12.1706 7.51646 12.0814 7.50115 11.995 7.47068L11.9926 7.4698C11.9069 7.43769 11.8313 7.38908 11.7668 7.32458L9.6802 5.238L8.65635 4.11153L8.69652 5.47736L8.69011 9.81896C8.69011 10.5736 8.80303 11.157 9.01808 11.5793C9.2312 11.9935 9.55909 12.2887 10.0079 12.4675L10.0088 12.4678C10.4652 12.6536 11.062 12.7499 11.8051 12.7499C11.952 12.7499 12.0793 12.7478 12.1871 12.7436C12.303 12.7393 12.417 12.7372 12.5287 12.7372C12.7186 12.7372 12.8855 12.7955 13.0191 12.9179C13.1612 13.0441 13.2287 13.2138 13.2287 13.4117C13.2287 13.5394 13.2018 13.6569 13.1388 13.7556C13.0846 13.8467 13.0093 13.919 12.9157 13.9718C12.8317 14.0256 12.7415 14.0631 12.6459 14.0833C12.5373 14.1068 12.4035 14.12 12.2469 14.1243C12.0973 14.1286 11.931 14.1307 11.748 14.1307C10.2678 14.1307 9.14333 13.8104 8.40142 13.144C7.6536 12.4723 7.29657 11.3702 7.29657 9.87609L7.29662 5.47368Z"})})},98205:(e,t,o)=>{o.d(t,{DG:()=>s,Yg:()=>l,Yx:()=>c,fY:()=>d,wG:()=>i});o(944114),o(898992),o(803949);var n=()=>o(31503),r=()=>o(131448),a=()=>o(597368);const i="forms_add_conditional_logic_tooltip";function l(e){let{currentModule:t,nestedModules:o,includePlaceholders:n}=e;const r=[{currentModule:t,depth:1}],a=[];let i=0;for(;r.length>0;){const e=r.shift();if(!e)continue;const{currentModule:t,depth:s}=e;var l;if(a.push(t),s>i&&(i=s),"formQuestion"===t.type)null===(l=t.conditionalGroups)||void 0===l||l.forEach((e=>{const t=e.children??[];for(const a of t){const e=o[a];e&&("formQuestion"===e.type||n&&"placeholder"===e.type)&&r.push({currentModule:e,depth:s+1})}}))}return{formQuestionDescendants:a,maxDepth:i}}function s(e){let{isConditionalLogicEnabled:t,mouseEntered:o,currentQuestionModule:r,modulesByArea:a,featureAvailable:i,inputFocused:l,isDragging:s,showTutorialTooltip:c}=e;if(void 0===a)return!1;const d=(0,n().Cg)({moduleId:null==r?void 0:r.id,modulesByArea:a}).length>=n().mh,u=t&&(o||c)&&!d&&!l&&!s;return u}function c(e){const{formQuestionId:t,isConditionalLogicEnabled:o,formAddConditionalLogicTooltipStore:n}=e;if(a().A.state.open||!t||!o||!n)return!1;if("multi_select"===e.type){const o=e.optionValue;if(!o||n.state.openTooltip!==d({formQuestionId:t,optionValue:o}))return!1}else if(n.state.openTooltip!==d({formQuestionId:t}))return!1;return r().default.isVisible(i)}function d(e){let{formQuestionId:t,optionValue:o}=e;return o?`fqid:${t} value:${o}`:`fqid:${t}`}},130636:(e,t,o)=>{o.d(t,{T:()=>a,m:()=>r});var n=()=>o(645873);const r=new(n().O2)("formPropertyRenderer",(()=>o.e(59111).then(o.bind(o,843190)))),a=(0,n().jQ)(r,(e=>e.default))},163194:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(672577);class n extends(()=>o(959180))().A{findRow(e,t,o){return this.find((n=>n.relatedPageStoreId===e&&n.rowType===t&&n.property===o))}}const r=new n},164124:(e,t,o)=>{o.d(t,{W:()=>u});o(296540);var n=()=>o(56366),r=()=>o(401497),a=()=>o(970013),i=()=>o(807831),l=()=>o(284371),s=()=>o(519839),c=()=>o(405417),d=o(474848);function u(e){let{blockStore:t,collectionContextStore:o,wrapperStyle:u}=e;const p=(0,n().O$)(o.currentSubitemFormatStoreForCollectionStore),g=(0,n().K8)((()=>(0,s().Dj)({store:t,collectionContextStore:o})),[o,t]),m=(0,n().K8)((()=>{if(!p||!g)return;const e=g.getSchema()[p.property];return void 0!==e&&(0,a().nC)(e)?e:void 0}),[g,p]),f=(0,r().IS)((e=>({subItemIcon:{color:e.mediumIconColor,width:14,height:14,marginRight:2},wrapper:{display:"inline-flex",alignItems:"center",verticalAlign:" text-top",paddingRight:8,...u},numSubitemsSpan:{fontSize:l().J.UISmall.desktop,fontWeight:l().Wy.medium,color:e.lightTextColor}})),[u]),h=(0,n().K8)((()=>p&&m?(0,c().rt)({store:t,subitemFormat:p,propertySchema:m}):[]),[t,p,m]);return(0,n().K8)((()=>(0,c().Kk)({collectionContextStore:o,blockStore:t})),[o,t])&&0!==h.length?(0,d.jsxs)("span",{style:f.wrapper,children:[(0,i().V)(f.subItemIcon),(0,d.jsx)("span",{style:f.numSubitemsSpan,children:h.length})]}):null}},171559:(e,t,o)=>{o.d(t,{ML:()=>l,Pe:()=>a});var n=()=>o(645873);const r=new(n().O2)("formEditorActionButtons",(()=>Promise.all([o.e(23806),o.e(75134),o.e(9304),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(47858),o.e(51860),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(72915),o.e(69689),o.e(77169),o.e(2409),o.e(31185),o.e(69095)]).then(o.bind(o,275011)))),a=(0,n().jQ)(r,(e=>e.default)),i=new(n().O2)("conditionalLogicTooltip",(()=>o.e(16130).then(o.bind(o,879022)))),l=(0,n()._h)(i,(e=>e.ConditionalLogicTooltip))},265665:(e,t,o)=>{o.d(t,{j:()=>d});var n=o(296540),r=()=>o(484714),a=()=>o(401497),i=()=>o(284371),l=()=>o(859428);var s=()=>o(962730),c=o(474848);function d(e){let{children:t,style:o,tooltipStyle:d,placement:u=s().W.Bottom}=e;const{isSafari:p}=(0,r().Y0)(),g=(0,n.useRef)(null),m=function(e){const[t,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const{current:t}=e;if(!t)return void o(!1);const n="ResizeObserver"in window?new ResizeObserver((e=>{let[t]=e;o(t.target.scrollWidth>t.target.clientWidth)})):void 0;return null==n||n.observe(t),()=>null==n?void 0:n.unobserve(t)}),[]),t}(g),f=(0,a().IS)((()=>({overflowText:{...i().RC,...o}})),[o]);return(0,c.jsx)(l().A,{delayThreshold:500,placement:u,textWrap:!0,style:d,forceVisibleState:!(p||!m)&&void 0,renderTooltip:()=>m?t:void 0,render:e=>(0,c.jsx)("div",{ref:g,style:f.overflowText,...e,children:t})})}},289190:(e,t,o)=>{o.d(t,{m:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){var t;const{propertySchema:n,stores:r,sessionIdForAnalytics:a}=e,i=r[0].getAssociatedCollectionId()??(null===(t=r[0].getCollectionStore())||void 0===t?void 0:t.id),l=a||o(206267).JW();return this.setState({type:"filling",propertySchema:n,collectionId:i,numBlocksToAutofill:r.length,numBlocksAutofilled:0,sessionId:l,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),l}}const r=new n},310188:(e,t,o)=>{o.d(t,{K:()=>a});var n=()=>o(713998),r=()=>o(641007);function a(e){let{type:t,store:o,textValue:a}=e;if(!a||!t)return{linkHref:void 0,shouldShowMaliciousContentDialog:!1};const i=(null==o?void 0:o.getCreatedById())===r().xY.id&&"url"===t;return{linkHref:(0,n().UY)(t,a),shouldShowMaliciousContentDialog:i}}},348241:(e,t,o)=>{o.d(t,{Q1:()=>i,cJ:()=>a,zi:()=>r});o(16280);var n=o(296540);const r=(0,n.createContext)(null);function a(){const e=(0,n.useContext)(r);if(!e)throw new Error("useFormLayoutEditorContext must be used inside FormLayoutEditorContext.Provider");return(0,n.useMemo)((()=>e),[e])}function i(){return(0,n.useContext)(r)}r.displayName="FormLayoutEditorContext"},349150:(e,t,o)=>{o.d(t,{y:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("branchFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M14.508 4.271a.33.33 0 0 0 0-.543l-2.84-1.968a.33.33 0 0 0-.518.272V3.45h-.5c-.783 0-1.442.315-2.007.732-.548.405-1.045.936-1.501 1.422l-.019.02c-.476.508-.91.969-1.37 1.308-.452.333-.886.518-1.353.518H1.9a.55.55 0 0 0 0 1.1h2.5c.467 0 .901.184 1.353.517.46.34.894.8 1.37 1.309l.019.02c.456.486.953 1.016 1.501 1.421.565.417 1.224.733 2.007.733h.5v1.418a.33.33 0 0 0 .518.271l2.84-1.968a.33.33 0 0 0 0-.543l-2.84-1.968a.33.33 0 0 0-.518.272v1.418h-.5c-.468 0-.902-.184-1.353-.518-.46-.34-.894-.8-1.371-1.308l-.018-.02c-.456-.486-.954-1.017-1.502-1.422A5 5 0 0 0 6.142 8q.135-.088.264-.183c.548-.405 1.046-.935 1.502-1.422l.018-.02c.477-.508.91-.968 1.37-1.308.452-.333.886-.517 1.354-.517h.5v1.418a.33.33 0 0 0 .518.271z"})})},358167:(e,t,o)=>{o.d(t,{v:()=>a});var n=()=>o(56366),r=()=>o(116008);function a(e){const{blockId:t,propertyId:o}=e;return(0,n().K8)((()=>r().A.isPropertyWithDraftDiscussion({blockId:t,propertyId:o})),[t,o])}},360525:(e,t,o)=>{o.d(t,{A:()=>f});o(296540);var n=()=>o(484714),r=()=>o(56366),a=()=>o(310442),i=()=>o(824862),l=()=>o(798880),s=()=>o(53528),c=()=>o(959013),d=()=>o(534177),u=()=>o(630116),p=()=>o(427636),g=()=>o(994006),m=o(474848);function f(e){const{isMobile:t}=(0,n().Y0)();return(0,m.jsx)("div",{style:t?{padding:"12px 20px",fontSize:14}:{fontSize:12,display:"flex",alignItems:"center"},children:(0,m.jsx)(h,{...e})})}function h(e){const{verificationState:t,blockStore:o}=e,n=(0,c().tz)();switch(t.type){case"none":return null;case"verified":return t.isIndefinite?(0,m.jsx)(c().sA,{defaultMessage:"Verified by {user} on {date}",id:"VerificationSummary.verifiedIndefinitely",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),date:(0,s().OH)({dateTime:t.startDateTime,intl:n})}}):(0,m.jsx)(c().sA,{defaultMessage:"Verified by {user} from {dateTimeRange}",id:"VerificationSummary.verified",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,s().do)({luxonRange:t.dateTimeRange,intl:n})}});case"expired":return(0,m.jsx)(c().sA,{defaultMessage:"Last verified by {user} from {dateTimeRange}",id:"VerificationSummary.verificationExpired",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,s().do)({luxonRange:t.dateTimeRange,intl:n})}});default:(0,d().HB)(t)}}function y(e){const{actorPointer:t,blockStore:o}=e,n=(0,r().K8)((()=>u().sk.createChildStore(o,t)),[o,t]),s={display:"flex",marginLeft:4,marginRight:4};return n.table===l().oo?(0,m.jsx)(g().A,{userStore:n,inline:!0,style:s,avatarSize:16,avatarMarginRight:4}):n.table===i().GP?(0,m.jsx)(p().A,{botStore:n,style:s,avatarSize:16}):n.table===a().yj?(0,m.jsx)(g().A,{userStore:void 0,inline:!0,style:s,avatarSize:16,avatarMarginRight:4}):void(0,d().HB)(n)}},367312:(e,t,o)=>{o.d(t,{M:()=>de});o(944114),o(898992),o(354520),o(581454),o(908872);var n=o(296540),r=()=>o(908006),a=()=>o(484714),i=()=>o(56366),l=()=>o(401497),s=()=>o(66689),c=()=>o(700500),d=()=>o(970013),u=()=>o(713998),p=()=>o(743176),g=()=>o(784892),m=()=>o(729650),f=()=>o(689094),h=()=>o(636494),y=()=>o(381138),v=()=>o(179034),S=()=>o(919709),b=()=>o(959013),C=()=>o(284371),x=()=>o(970330),_=()=>o(989423);var M=()=>o(846156);var k=()=>o(522986),A=()=>o(27732),w=()=>o(557281),I=()=>o(176072),P=()=>o(44729),R=()=>o(246826),T=()=>o(870578),j=()=>o(606952),L=()=>o(725614),B=()=>o(317909),D=()=>o(895876),V=()=>o(175116),F=()=>o(86499),N=()=>o(645873);const O=new(N().O2)("RelationPropertyCustomizeLayoutMenu",(async()=>{const{default:e}=await Promise.all([o.e(43380),o.e(92222)]).then(o.bind(o,50651));return{RelationPropertyCustomizeLayoutMenu:e}})),E=(0,N()._h)(O,(e=>e.RelationPropertyCustomizeLayoutMenu));var K=()=>o(886680),z=()=>o(476492),H=()=>o(594794),W=()=>o(478726),U=()=>o(299545),q=()=>o(685889),G=()=>o(963589),Q=()=>o(671891),Y=()=>o(163194),Z=()=>o(170253),$=()=>o(508496),X=()=>o(970585),J=()=>o(630116),ee=()=>o(41459),te=()=>o(317958),oe=()=>o(704152),ne=()=>o(439264),re=()=>o(939740),ae=()=>o(89924),ie=()=>o(859428),le=()=>o(68350),se=o(474848);const ce={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0};function de(e){const t=(0,n.useContext)(V().p2),o=(0,i().uB)(void 0,X().A),r=(0,i().uB)(void 0,Z().A),[c,p]=(0,n.useState)(10),{schema:y,format:S,locked:C,property:x,collectionStore:k,store:w,disabled:P,visibility:R,isInPeekRenderer:j,topBorder:D,pagePropertiesStore:N,blockPropertyValueOverlayStore:O}=e,E=(0,a().v3)(),z=(0,i().K8)((()=>{const e=y[x];if(!e||"relation"!==e.type)return[];const t=w.getPropertyValue(x);return u().bG({relationValue:u().n(t),propertySchema:e,getRecordModel:w.getRecordModel,includeDeleted:$().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:$().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:$().default.checkGate({gateName:"relations_show_no_access"})})}),[y,x,w],{useDeepEqual:!0}),H=(0,i().K8)((()=>z.length),[z.length]),q=(0,n.useCallback)(((e,t)=>function(e,t,o,n,r,a,i,l){const s=r[a];if(!s||"relation"!==s.type)return;const c=d().Nv(s);if(!c)return;const p=J().md.createChildStore(i,c);if(!(0,U()._p)(i)||!a)return;const g=i.getPropertyValue(a),m=u().bG({relationValue:u().n(g),propertySchema:s,getRecordModel:i.getRecordModel,includeDeleted:$().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:$().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:$().default.checkGate({gateName:"relations_show_no_access"})}),f=[...e.map((e=>({id:e,spaceId:n.pointer.spaceId,table:v().ev}))),...m.slice(e.length)];ye({newValues:f,oldValues:m},p,i,a,o),(0,M().F)(o,{from:"relation_section"}),I().pl({store:l,focus:{section:0,indexLocal:t.endPosition,indexGlobal:t.endPosition,footerFocused:!1}})}(e,t,E,k,y,x,w,o)),[E,k,y,x,w,o]),Y=(0,n.useCallback)(((o,n,r)=>be(o,n,r,E,e.blockPropertyValueOverlayStore,w,x,t,ie)),[t,E,x,e.blockPropertyValueOverlayStore,w]),ie=(0,n.useRef)(null),de=(0,a().Y0)(),me=y[x],Ce=(0,i().K8)((()=>null==t?void 0:t.permissionScopesStore.state),[t]),xe=(0,i().K8)((()=>{if("relation"===(null==me?void 0:me.type)&&t)return me}),[t,me]),_e=(0,i().K8)((()=>{if(!xe)return;const e=d().Nv(xe);return e?J().md.createChildStore(w,e):void 0}),[xe,w]),Me=(0,i().K8)((()=>(null==_e?void 0:_e.canEdit())??!1),[_e]),ke=(0,i().K8)((()=>{const e=k.getSchema()[x];return Boolean(e&&d().UU(e))}),[k,x]),Ae=(0,i().K8)((()=>w.canEdit()),[w]),we=(0,i().K8)((()=>(0,W().fc)(w)),[w]),Ie=(0,l().IS)((e=>({addNewRelationButtonWrapper:fe(e),addNewRelationButtonIcon:he(e,de.isMobile),replacePageSprint:{color:e.mediumTextColor}})),[de.isMobile]),Pe=(0,n.useMemo)((()=>z.slice(0,c)),[z,c]),Re=(0,i().K8)((()=>(null==_e?void 0:_e.getFormatStore().getKeyStore("app_config_uri").getValue())===s().av),[_e]),Te=1===(null==xe?void 0:xe.limit),je=!(de.isMobile||P||C||Te),Le=(0,Q().l)(w),Be=(0,i().K8)((()=>{var e;return"hide"===(null==Le||null===(e=Le.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[Le]),De=(0,G().X)("relations_show_no_access"),Ve=(0,n.useCallback)((()=>{_e&&xe&&(Re?ve(_e,e.store,e.property,z,E):ke||Te?Y(!0):Se(z.length>=c?c:z.length+1,_e,"relation_section_footer",E,w,x,k,c,p,t,xe))}),[t,k,c,E,Y,Te,ke,Re,x,e.property,e.store,xe,z,w,_e]),Fe=(0,i().K8)((()=>{if(!_e||!xe||!k)return[];const e=_e.getFormatStore().getKeyStore("app_config_uri").getValue()===s().av;return Pe.reduce(((n,r,a)=>{const i=J().Bv.createChildStore(w,r),l=i.getAssociatedCollectionStore(),s=!i.canRead()&&De;if((null==l?void 0:l.id)===d().zO(xe)||s){const r={key:i.id,render:n=>{let{ref:r,...l}=n;return(0,se.jsx)(F().q,{...l,canDrag:je&&1!==xe.limit&&w.canEdit(),schema:y,propertySchema:xe,collectionStore:k,collectionId:k.id,targetCollectionStore:_e,relatedPageStore:i,disabled:P,locked:C,isSelected:!0,pageStore:w,property:x,rowType:"section",onActionButtonClick:()=>function(e,t,o,n,r,a,i,l,s,c){const d=a[i];if("relation"!==(null==d?void 0:d.type)||!c)return;if((0,W().fc)(r))return;const u=d.limit,p=u?[]:e.filter((e=>e.id!==t.id));B().createAndCommit({userAction:"RelationSection.handleRemoveRelationClick",environment:n,canUndo:!0,perform:e=>{A().Iq({store:r,propertyId:i,value:p,environment:n,relatedPageId:t.id,propertySchema:d,transaction:e,collectionContextStore:c,analyticsData:{isFromBulkActionsToolbar:K().pi(l),analyticsFrom:K().zP(ee().j.Page)},isUnthrottled:!1})}}),function(e,t){_().vd(e,"relation_remove_block",t)}(n,{from:"relation_section",collection_id:null==s?void 0:s.id,target_collection_id:null==o?void 0:o.id})}(z,i,_e,E,w,y,x,O,k,t),onMouseLeave:()=>o.unsetFocus(),onSecondaryButtonClick:()=>Se(a+1,_e,"relation_section_inline",E,w,x,k,c,p,t,xe),onInsertInline:e?()=>{L().clear({environment:E})}:()=>Se(a+1,_e,"relation_section_inline",E,w,x,k,c,p,t,xe),onTitleEsc:()=>{var e;0===(null===(e=i.getTitleStore())||void 0===e||null===(e=e.getValue())||void 0===e?void 0:e.length)&&"relation"===xe.type?function(e,t,o){if((0,W().fc)(o))return;B().createAndCommit({userAction:"RelationSection.handleDeleteRelatedPage",environment:t,canUndo:!0,perform:t=>{const o={pointer:e.pointer,command:"update",path:[],args:{alive:!1}};B().applyOperation({store:e,operation:o,transaction:t})}})}(i,E,w):L().clear({environment:E})},onOpenPageButtonClick:s?void 0:()=>{T().k({relationPointers:z,relatedPageStore:i,environment:E,from:"relation_section_inline"})},index:a+1,propertyLimit:xe.limit})},action:e=>{}};n.push(r)}return n}),[])}),[_e,xe,k,Pe,w,De,je,y,P,C,x,z,E,O,t,o,c]);if(!("section_hide"!==R&&xe&&_e&&t&&Ce))return null;if("minimal"===R)return(0,se.jsx)(pe,{property:x,propertySchema:xe,numberOfRelations:H,onHandleOpenProperty:Y,onHandleRelationPropertyPageSectionRefMount:e=>{e&&(ie.current=e)},schema:y,format:S,disabled:P,locked:C,canConfigureCollection:Ce.canConfigureCollection,blockStore:w,collectionStore:k,collectionContextStore:t,isInPeekRenderer:j,targetCollectionStore:_e,pagePropertiesStore:N,shouldHideIcon:Be});const Ne=Fe.map((e=>e.key.toString())),Oe=(0,se.jsx)(re().Ay,{type:re().Oh.Vertical,store:o,initialFocus:void 0,disableKeyboard:!0,style:{width:"100%"},sections:[{key:"section",render:e=>(0,se.jsx)(ae().A,{...e,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,children:je?(0,se.jsx)(ne().Ay,{direction:"vertical",keys:Ne,renderKey:t=>e.children[Ne.indexOf(t)],onDrop:q,store:r}):e.children}),items:Fe}]});return(0,se.jsx)(ge,{collectionContextStore:t,isConnectedRelation:ke,title:e.propertyRowName??(0,se.jsx)(le().I,{schema:y,format:S,property:x,blockStore:w,collectionStore:k,disabled:P,locked:C,canConfigureCollection:Ce.canConfigureCollection,styleVariants:ue,isInPeekRenderer:j,pagePropertiesStore:N,hideIcon:Be}),collectionStore:k,targetCollectionStore:_e,property:x,showRight:!0,disabled:P,schema:y,format:S,locked:C,canEditTargetCollection:Me,canConfigureCollection:Ce.canConfigureCollection,canEditCurrentPage:Ae,handleMouseMove:e.handleMouseMove,onHandleOpenProperty:()=>{be(!1,void 0,void 0,E,O,w,x,t,ie)},onHandleRelationPropertyPageSectionRefMount:e=>{e&&(ie.current=e)},onTitleEnter:()=>Se(void 0,_e,"relation_section_inline",E,w,x,k,c,p,t,xe),handleClearProperty:()=>ve(_e,w,x,z,E),topBorder:D,children:(0,se.jsxs)("div",{style:{flex:1,minWidth:0,display:"flex",flexWrap:"wrap",flexDirection:"column",width:"100%",...de.isMobile&&{paddingLeft:"none"}},onMouseMove:e.handleMouseMove,onMouseLeave:e.handleMouseLeave,children:[Oe,z.length>c&&(0,se.jsx)(oe().A,{style:{width:"100%",display:"flex",alignItems:"center",borderRadius:3,fontSize:14,minHeight:30,margin:0,padding:"6px 8px 7px 8px"},onClick:()=>p(c+10),children:(0,se.jsx)(te().A,{count:z.length-c,format:g().NY.Medium,style:{margin:void 0},fixedHeight:!1,isCompact:!1})}),Me&&Ae&&!C&&!we&&(0,se.jsx)(oe().A,{style:Ie.addNewRelationButtonWrapper,onClick:Ve,disabled:P||C,children:0===H?(0,se.jsxs)(se.Fragment,{children:[(0,f().W)({...Ie.addNewRelationButtonIcon,marginLeft:6,marginRight:6}),(0,se.jsx)(b().sA,{id:"RelationPropertyPageSection.button.addPage",defaultMessage:"New"})]}):(0,se.jsxs)(se.Fragment,{children:[Re?(0,m().M)({width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:"#868682"}):1===xe.limit?(0,h().A)(Ie.addNewRelationButtonIcon):(0,f().W)(Ie.addNewRelationButtonIcon),(0,se.jsxs)("div",{style:ce,children:[Re&&(0,se.jsx)("span",{style:Ie.replacePageSprint,children:(0,se.jsx)(b().sA,{id:"RelationPropertyPageSection.button.replacePageSprint",defaultMessage:"Move to backlog"})}),!Re&&(1===xe.limit?(0,se.jsx)(b().sA,{id:"RelationPropertyPageSection.button.replacePage",defaultMessage:"Replace"}):(0,se.jsx)(b().sA,{id:"RelationPropertyPageSection.button.addPage",defaultMessage:"New"}))]})]})})]})},x)}const ue={width:{variant:"hug-content"},height:{variant:"small"},fontWeight:"medium",size:"small"};function pe(e){const{property:t,propertySchema:o,numberOfRelations:r,schema:a,format:c,disabled:d,locked:u,canConfigureCollection:g,blockStore:m,collectionStore:f,onHandleOpenProperty:h,onHandleRelationPropertyPageSectionRefMount:y,isInPeekRenderer:v,targetCollectionStore:S,pagePropertiesStore:x,shouldHideIcon:_}=e,M=(0,l().IS)((e=>({hoverButton:{display:"flex",alignItems:"baseline",justifyContent:"normal",color:e.mediumTextColor,width:"100%"},minimalButton:{display:"flex",alignItems:"center",flexShrink:0,whiteSpace:"nowrap",height:28,borderRadius:4,fontSize:14,lineHeight:1.2,minWidth:0,paddingLeft:6,paddingRight:8,fontWeight:C().Wy.regular,color:e.lightTextColor},minimalButtonWrapper:{width:"100%",maxWidth:"100%",fontWeight:C().Wy.regular,color:e.lightTextColor},iconStyle:{width:14,height:14,fill:e.lightIconColor,marginRight:6,alignItems:"baseline"},minmalButtonLabelStyle:{...C().RC}})),[]),k=(0,l().DP)(),A=(0,n.useCallback)((e=>{d||u||!g||(e.preventDefault(),x.setState({...x.state,openProperty:{property:t,isInPeekRenderer:v}}))}),[d,u,g,x,t,v]),w=(0,n.useCallback)((e=>{h(!0)}),[h]),I=(0,n.useMemo)((()=>({size:"medium",fontWeight:"regular",width:{variant:"hug-content",maxWidthDesktop:300,maxWidthMobile:300}})),[]),P=(0,n.useCallback)((()=>{x.setState({...x.state,hoveredProperty:t})}),[t,x]),R=(0,n.useCallback)((()=>{x.setState({...x.state,hoveredProperty:void 0})}),[x]),T=(0,i().K8)((()=>S.getFormatStore().getKeyStore("app_config_uri").getValue()),[S]),j=(0,D().$O)(s().av),L=(0,D().oj)(s().av);return(0,se.jsx)("div",{style:M.hoverButton,onMouseMove:P,onMouseLeave:R,children:(0,se.jsx)(le().I,{schema:a,format:c,property:t,blockStore:m,collectionStore:f,disabled:d,locked:u,canConfigureCollection:g,styleVariants:I,pagePropertiesStore:x,labelComponent:(0,se.jsx)("div",{ref:y,style:M.minimalButtonWrapper,children:(0,se.jsxs)(oe().A,{style:M.minimalButton,onClick:w,onContextMenu:A,children:[(0,se.jsx)(p().Ay,{size:14,style:M.iconStyle,theme:k,type:o.type??"relation",icon:o.icon}),(0,se.jsx)("div",{style:M.minmalButtonLabelStyle,children:T===s().av?(0,se.jsx)(b().sA,{id:"RelationPropertyPageSection.sprints.showSprintRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {singleTypedItemName}} other {{numberOfRelations} {pluralTypedItemName}}}",values:{numberOfRelations:r,propertyName:o.name,singleTypedItemName:j,pluralTypedItemName:L}}):(0,se.jsx)(b().sA,{id:"RelationPropertyPageSection.showRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {propertyName}} other {{numberOfRelations} {propertyName}}}",values:{numberOfRelations:r,propertyName:o.name}})})]},`minimal-section-${t}`)}),hideDragHandle:!0,isInPeekRenderer:v,hideIcon:_})})}function ge(e){const{collectionStore:t,targetCollectionStore:o,property:r,showRight:l,disabled:c,style:d,children:u,canConfigureCollection:p,isConnectedRelation:g,canEditCurrentPage:m,handleMouseMove:f,onHandleOpenProperty:h,onHandleRelationPropertyPageSectionRefMount:v,topBorder:S,collectionContextStore:C}=e,x=(0,i().K8)((()=>o.isSyncedCollection()),[o]),_=(0,i().K8)((()=>o.getFormatStore().getKeyStore("app_config_uri").getValue()===s().av),[o]),M=(0,i().K8)((()=>C.permissionScopesStore.state),[C]),k=(0,a().v3)(),[A,w]=(0,n.useState)(!1),I=k.device.isMobile?l:l&&A;return(0,se.jsx)("div",{style:{width:"100%"},ref:v,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:(0,se.jsx)(ae().A,{...e,topBorder:S,children:u,noTextOverflow:!1,disableMobilePadding:!0,right:I&&!x&&!M.isExternallyImportedAndSyncedCollection&&!g&&(0,se.jsxs)("div",{style:{height:"100%",display:"flex",alignItems:"center",width:"100%"},children:[m&&(0,se.jsx)(me,{disabled:c,handleMouseMove:f,onClick:h,icon:y().q,tooltipMessage:_?(0,se.jsx)(b().sA,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButtonSprints.message",defaultMessage:"Search for a sprint"}):(0,se.jsx)(b().sA,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButton.message",defaultMessage:"Link a page"})},`searchIcon-${r}`),(0,se.jsx)(E,{collectionStore:t,targetCollectionStore:o,property:r,disabled:c||!p,rowType:"section"})]}),style:{paddingTop:0,paddingBottom:0,width:"100%",...d},mobileStyle:{boxShadow:"none"},desktopTitleStyle:{marginTop:0,marginBottom:4,paddingLeft:0,paddingRight:8,fontWeight:"normal"},mobileTitleStyle:{paddingLeft:0,alignItems:"center",fontWeight:"normal"}})})}function me(e){const{disabled:t,handleMouseMove:o,onClick:n,icon:r,tooltipMessage:a}=e,i=(0,l().IS)((e=>({buttonStyle:{width:24,height:24,borderRadius:4,display:"inline-flex",alignItems:"center",justifyContent:"center",marginRight:4},iconStyle:{width:14,height:14,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]);return(0,se.jsx)(ie().A,{renderTooltip:()=>a,render:e=>(0,se.jsx)(oe().A,{style:i.buttonStyle,onMouseMove:o,onClick:n,disabled:t,...e,children:r(i.iconStyle)})})}function fe(e){return{display:"flex",alignItems:"center",color:e.lightTextColor,borderRadius:4,paddingRight:4,height:32,width:"100%",fontSize:14}}function he(e,t){return{width:16,height:16,marginRight:t?7:11,marginTop:1,marginLeft:5,fill:e.lightIconColor}}function ye(e,t,o,n,a){if(!(0,U()._p)(o)||!n)return;let i;B().createAndCommit({userAction:"RelationToken.handleRelationPropertyMenuUpdate",environment:a,canUndo:!0,perform:r=>{const l=t.id;if(e.newPage&&l){const n=S().x9d(e.newPage.name);i=R().Wv({environment:a,id:e.newPage.id,type:c().xd.page,properties:{title:n},spaceId:e.newPage.spaceId,inMemoryRecordCache:t.inMemoryRecordCache,transaction:r}),P().X$({childStore:i,parentStore:t,transaction:r});const l=J().Bv.createChildStore(o,i.pointer),s=t.getDefaultTemplatePageStore();s&&w().n5({title:{text:n},environment:a,store:l,templateStore:s,isKeyboard:!1,isCreateIn:!1,transaction:r,from:"relation_property_page_section"})}if(e.newValues){const t=u().Ap(e.newValues),i=o.getPropertyStore(n);j().KY({environment:a,store:i,value:t,transaction:r})}}}),r().default.afterNextFlush((()=>{if(!i)return;const e=Y().A.findRow(i.id,"section",n);if(!e)return;const t=e.relationTokenBlockStoreRef.current;if(!t)return;const o=t.getBlockTitleStore(),r={start:{index:0,store:o},end:{index:0,store:o}};L().setMultiSelection({multiSelection:r})}))}function ve(e,t,o,n,r){ye({newValues:[],oldValues:n},e,t,o,r)}function Se(e,t,o,n,r,a,i,l,s,c,d){if(!d||"relation"!==d.type)return;if(!r.canEdit())return;if((0,W().fc)(r))return;const p=i.pointer.spaceId,g=d.limit,m=(0,H().zP)({environment:n,table:v().ev,spaceId:p}),f=m.id;if(!(0,U()._p)(r)||!a)return;const h=r.getPropertyValue(a),y=u().bG({relationValue:u().n(h),propertySchema:d,getRecordModel:r.getRecordModel,includeDeleted:$().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:$().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:$().default.checkGate({gateName:"relations_show_no_access"})});e&&e+1>l&&s(e+1);ye({newPage:{id:f,spaceId:p,name:""},newValues:g?[m]:e?[...y.slice(0,e),m,...y.slice(e)]:[m,...y],oldValues:y},t,r,a,n),x().v(n,{...(0,z().sl)(c),from:o,type:"page",target_collection_id:null==t?void 0:t.id,new_page_id:f,creating_block_id:f})}function be(e,t,o,n,r,a,i,l,s){const c=s.current;if(!(c&&c instanceof Element))return;if((0,W().fc)(a))return;const d=o?null==o?void 0:o.getBoundingClientRect():c.getBoundingClientRect(),u=e?d.top+q().d0:d.top+5,p=new DOMRect(d.left,u,d.width,d.height);k().ho({environment:n,blockPropertyValueOverlayStore:r,store:a,property:i,rect:p,format:ee().j.Page,mode:t,collectionContextStore:l}),function(e,t){_().vd(e,"relation_section_link_pages",t)}(n,{from:"relation_section"})}},452862:(e,t,o)=>{o.d(t,{F:()=>a,z:()=>i});var n=()=>o(645873);const r=new(n().O2)("SharingEnabled",(async()=>{const[{default:e},{default:t}]=await Promise.all([o.e(47307).then(o.bind(o,883358)),o.e(14227).then(o.bind(o,893244))]);return{SharingEnabledIcon:e,SharingEnabledPropertyNameTooltip:t}})),a=(0,n()._h)(r,(e=>e.SharingEnabledPropertyNameTooltip)),i=(0,n()._h)(r,(e=>e.SharingEnabledIcon))},464778:(e,t,o)=>{o.d(t,{x:()=>r});var n=()=>o(989423);function r(e,t){n().vd(e,"click_block_property_url",t)}},465274:(e,t,o)=>{o.d(t,{z:()=>G});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(581454),o(737550);var n=o(296540),r=()=>o(908006),a=()=>o(484714),i=()=>o(852507),l=()=>o(56366),s=()=>o(401497),c=()=>o(970013),d=()=>o(713998),u=()=>o(349150),p=()=>o(236262),g=()=>o(475140),m=()=>o(959013),f=()=>o(496603),h=()=>o(901952),y=()=>o(596359),v=()=>o(436572),S=()=>o(725614),b=()=>o(317909),C=()=>o(755199),x=()=>o(832857),_=()=>o(171559),M=()=>o(740840),k=()=>o(348241),A=()=>o(98205),w=()=>o(753199),I=()=>o(972435),P=()=>o(963589),R=()=>o(176983),T=()=>o(465425),j=()=>o(11978),L=()=>o(937199),B=()=>o(962730),D=()=>o(351360),V=()=>o(991249),F=()=>o(597898),N=()=>o(348501),O=()=>o(285790),E=()=>o(805751),K=()=>o(623580),z=()=>o(505108),H=()=>o(859428),W=()=>o(234359),U=()=>o(41459),q=o(474848);const G=(0,n.forwardRef)((function(e,t){const{property:r,propertySchema:i,format:s}=(0,n.useContext)(W().L8),{collectionStore:u,disabled:p,locked:g,store:m,formQuestionStore:f,formDataStore:h}=e,{isMobile:y}=(0,a().Y0)(),v=(0,l().K8)((()=>{var e;return"multi_select"===(null==i?void 0:i.type)?null==f||null===(e=f.getPropertyTypeSpecificConfig("multi_select"))||void 0===e?void 0:e.maxSelectionCount:void 0}),[f,i]),S=(0,o(465741).Vm)({formQuestionStore:f,propertySchema:i}),b=(0,l().K8)((()=>i&&(0,c().lx)(i)?i.options??[]:[]),[i]),C=(0,l().K8)((()=>{var e;const t=null==h||null===(e=h.getFormState())||void 0===e?void 0:e.draftFormBlockStore;if(!r||!t)return new Set;const o=null==t?void 0:t.getPropertyValue(r),n=(0,d().J4)(o,b);return new Set(n.map((e=>e.id)))}),[h,b,r]),x=(0,l().K8)((()=>`form-question-${null==f?void 0:f.id}`),[f]);return s!==U().j.FormEditor||g?(0,q.jsx)("div",{style:{marginTop:8,marginLeft:y?void 0:-8,display:"flex",gap:y?4:0,flexDirection:"column"},children:b.map((e=>{let t=p;return v&&C.size>=v&&!S&&(C.has(e.id)||(t=!0)),(0,q.jsx)(Z,{store:m,disabled:t,option:e,allOptions:b,showRadioButtonSelector:S,questionName:x},e.id)}))}):(0,q.jsx)(Q,{options:b,collectionStore:u,showRadioButtonSelector:S,formQuestionStore:f})}));function Q(e){const t=(0,a().v3)(),[r,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),{options:g,collectionStore:h,showRadioButtonSelector:v,formQuestionStore:S}=e,{property:b}=(0,n.useContext)(W().L8),C=(0,l().K8)((()=>h.getSchema()),[h]),x=(0,s().IS)((e=>({addOptionButtonStyle:{color:e.lightTextColor,fill:e.lightTextColor},selectOptionList:{marginTop:g.length>0?4:0},newSelectOption:{marginTop:g.length>0?0:4}})),[g]);return b?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(o(439264).Ay,{direction:"vertical",style:x.selectOptionList,keys:null==g?void 0:g.map((e=>e.value)),disabled:c,onDragStart:()=>p(!0),onDragEnd:()=>p(!1),renderKey:e=>{const t=g.find((t=>t.value===e));return t?(0,q.jsx)($,{type:"persisted",option:t,options:g,showRadioButtonSelector:v,isDragging:u,collectionStore:h,setNewOptionInput:i,setDisableDragging:d,formQuestionStore:S},t.id):null},onDrop:e=>{y().gc({newValues:e,property:b,schema:C,collectionStore:h,environment:t})}}),r?(0,q.jsx)("div",{style:x.newSelectOption,children:(0,q.jsx)($,{type:"temporary",collectionStore:h,options:g,showRadioButtonSelector:v,isDragging:u,setNewOptionInput:i,setDisableDragging:d,formQuestionStore:S})}):null,(0,q.jsx)(o(493823).p,{onMouseDown:e=>{(0,w().SQ)({event:e,context:w().y$.EditorMouseDown,callback:f().D_})},icon:e=>(0,o(689094).W)({...e,width:18,marginLeft:1,marginRight:11,fill:x.addOptionButtonStyle.fill}),style:{color:x.addOptionButtonStyle.color,marginLeft:6,marginTop:4},onClick:e=>{i(!0)},children:(0,q.jsx)(m().sA,{id:"questionModule.formSelectMultiSelectProperty.addOption",defaultMessage:"Add option"})})]}):null}const Y=6;function Z(e){const{option:t,allOptions:r,store:i,disabled:u,showRadioButtonSelector:p,questionName:g}=e,m=(0,a().v3)(),{isMobile:f}=(0,a().Y0)(),{format:h,property:y,propertySchema:v}=(0,n.useContext)(W().L8),S=(0,l().K8)((()=>null==v?void 0:v.type),[v]),C=(0,l().K8)((()=>{if(!y||!v||!(0,c().lx)(v))return!1;const e=i.getPropertyValue(y);let o=[];if("select"===v.type){const t=(0,d().fF)(e,r);o=t?[t]:[]}else o=(0,d().J4)(e,r);return o.some((e=>e.value===t.value))}),[i,t,r,v,y]),x=(0,s().IS)((e=>({selectorButton:{width:"calc(100% + 16px)",borderRadius:Y},selectorButtonInner:{border:"none",padding:"4px 8px",borderRadius:Y,...f?{backgroundColor:"light"===e.mode?e.accentColors.gray[30]:e.accentColors.gray[100]}:{}},selectorButtonPressed:{backgroundColor:e.buttonPressedBackground},selectorButtonHovered:{backgroundColor:e.buttonHoveredBackground},rowPadding:{padding:h===U().j.FormEditor?"0px 0px 0px 16px":void 0}})),[h,f]),_=(0,n.useCallback)((()=>{y&&v&&(0,c().lx)(v)&&("multi_select"!==v.type||p?b().createAndCommit({userAction:"FormSelectProperty.handleSelectQuestionSelectOption",environment:m,canUndo:!0,perform:e=>{t&&o(606952).KY({environment:m,store:i.getPropertyStore(y),value:(0,o(919709).x9d)(t.value),transaction:e})}}):b().createAndCommit({userAction:"FormSelectProperty.handleMultiSelectQuestionSelectOption",environment:m,canUndo:!0,perform:e=>{C?b().applyOperation({transaction:e,store:i.getPropertyStore(y),operation:{path:["properties",y],pointer:i.pointer,command:"removeSelectOption",args:{option:t.value}}}):b().applyOperation({transaction:e,store:i.getPropertyStore(y),operation:{path:["properties",y],pointer:i.pointer,command:"addSelectOptionAfter",args:{option:t.value}}})}}))}),[m,t,C,v,y,i,p]);return v&&(0,c().lx)(v)?(0,q.jsx)("div",{style:{display:"flex",alignItems:"center",wordBreak:"break-word"},children:(0,q.jsx)(o(84817).Y1,{direction:"horizontal",padding:x.rowPadding.padding,children:(0,q.jsx)(o(704152).A,{hoveredStyle:x.selectorButtonHovered,pressedStyle:x.selectorButtonPressed,style:x.selectorButton,disallowTabbing:!0,children:(0,q.jsx)(z().a,{style:x.selectorButtonInner,name:g,isDisabled:u,label:t.value,onChange:_,selectorSize:"large",isSelected:h===U().j.FormViewer&&C,value:"select_option",selectType:"select"===S||p?"radio":"checkbox",selectAlignYAxis:"center"})})})}):null}function $(e){var t;const o=(0,a().v3)(),d=(0,m().tz)(),{type:b,collectionStore:w,formQuestionStore:U,option:G,options:Q,isDragging:Y,setNewOptionInput:Z,setDisableDragging:$,showRadioButtonSelector:J}=e,[ee,te]=n.useState((null==G?void 0:G.value)??""),[oe,ne]=(0,n.useState)(!1),[re,ae]=(0,n.useState)(!1),[ie,le]=(0,n.useState)(!1),se=(0,P().X)("forms_conditional_logic"),ce=(0,L().v$)(),de=(0,j().O)(),ue=(0,k().Q1)(),{currentUserSettingsStore:pe}=(0,l().K8)((()=>D().default.state),[]);(0,i().l)((()=>{"temporary"===b&&(le(!0),ae(!0))}));const{property:ge,propertySchema:me,collectionContextStore:fe}=(0,n.useContext)(W().L8),he=(0,l().K8)((()=>null==U?void 0:U.getParentStore()),[U]),{currentQuestionModuleAndArea:ye,modulesByArea:ve}=(0,l().K8)((()=>{const e=null==he?void 0:he.getModules();if(!e||!U)return{undefined:void 0,normalizedModulesByArea:e};return{currentQuestionModuleAndArea:(0,g().Ib)({modulesByArea:e,find:e=>"formQuestion"===e.type&&e.formQuestionId===U.id}),modulesByArea:e}}),[U,he]),Se=(0,n.useMemo)((()=>{if(null==G||!G.value||!me)return!1;const e=null==ye?void 0:ye.module.conditionalGroups,t="select"===me.type?{property:ge,filter:{operator:"enum_is",value:{type:"exact",value:G.value}}}:{property:ge,filter:{operator:"enum_contains",value:{type:"exact",value:G.value}}},o=null==e?void 0:e.some((e=>f().n4(e.trigger,t)));return Boolean(o)}),[ye,G,ge,me]),be=(0,n.useCallback)((()=>{if(!ge||!me||!(0,c().lx)(me))return;const e=ee.trim();if(e){"alphabetical"===me.auto_sort_options||"reverse_alphabetical"===me.auto_sort_options?y().Uk({modification:{type:"autoSortInsert",newValue:e},property:ge,propertySchema:me,options:Q,environment:o,collectionStore:w}):y().Uk({modification:{type:"keyedObjectListAfter",newValue:e},property:ge,propertySchema:me,options:Q,environment:o,collectionStore:w}),Z(!1);const t=null==pe?void 0:pe.getSettingsStore().getKeyStore("seen_forms_add_conditional_logic_tooltip").getValue(),n=null==ye?void 0:ye.module.formQuestionId;se&&n&&!t&&(null==ue||ue.formAddConditionalLogicTooltipStore.setState({openTooltip:(0,A().fY)({formQuestionId:n,optionValue:e})}),T().HH(o,A().wG)),fe&&(0,h().V)({environment:o,collectionContextStore:fe,property:ge,from:"form_editor",action:"select_add_option"})}else Z(!1);le(!1)}),[ge,Z,fe,me,Q,o,ee,w,null==ye?void 0:ye.module.formQuestionId,se,pe,ue]),Ce=(0,n.useCallback)((e=>{ge&&G&&me&&(0,c().lx)(me)?(e?y().r$({environment:o,option:G,property:ge,propertySchema:me,collectionStore:w,deleteMessage:Se?I().A.formatMessage(X.deleteModalWithConditionalLogic):void 0}):y().Uk({modification:{type:"keyedObjectListRemove",id:G.id},property:ge,propertySchema:me,environment:o,collectionStore:w}),fe&&(0,h().V)({environment:o,collectionContextStore:fe,property:ge,from:"form_editor",action:"select_delete_option"}),Z&&Z(!1),le(!1),ae(!1),$(!1),C().p$({environment:o}),T().a(o,A().wG)):Z&&Z(!1)}),[ge,Z,fe,Se,me,G,ae,$,o,w]),xe=(0,n.useCallback)((()=>{if(!(ge&&G&&me&&(0,c().lx)(me)))return;const e=ee.trim();e?(e&&e!==(null==G?void 0:G.value)&&(y().Uk({modification:{type:"keyedObjectListUpdate",option:G,newValue:e},property:ge,propertySchema:me,options:Q,environment:o,collectionStore:w}),fe&&(0,h().V)({environment:o,collectionContextStore:fe,property:ge,from:"form_editor",action:"select_rename_option"})),le(!1),ae(!1),$(!1)):Ce()}),[ge,fe,Ce,me,o,ae,$,G,Q,ee,w]),_e=(0,n.useCallback)((()=>{ge&&me&&(0,c().lx)(me)&&ye&&he&&G&&(x().lF({environment:o,layoutStore:he,currentQuestionModule:ye.module,area:ye.area,property:ge,filterValue:{type:me.type,value:G},setModuleSelection:null==ce?void 0:ce.setModuleSelection,sessionId:(null==ce?void 0:ce.sessionId)??""}),C().p$({environment:o}),T().a(o,A().wG))}),[ge,o,ye,he,G,ce,me]),Me=f().sg((()=>ne(!0)),5),ke=Me,Ae=(0,n.useCallback)((()=>{ne(!1),Me.cancel()}),[Me]),we=(0,n.useMemo)((()=>oe&&!re),[oe,re]),Ie=(0,l().K8)((()=>(0,A().Yx)({type:"multi_select",formQuestionId:null==ye?void 0:ye.module.formQuestionId,optionValue:null==G?void 0:G.value,isConditionalLogicEnabled:se,formAddConditionalLogicTooltipStore:null==ue?void 0:ue.formAddConditionalLogicTooltipStore})),[G,null==ye?void 0:ye.module.formQuestionId,se,ue]),Pe=(0,R().J)(),Re=(0,F()._X)({name:"forms_conditional_logic",spaceId:de,userId:null===(t=o.currentUser)||void 0===t?void 0:t.id}),Te=null==Re?void 0:Re.upsell,je=(0,n.useMemo)((()=>(0,A().DG)({isConditionalLogicEnabled:se,mouseEntered:oe,currentQuestionModule:null==ye?void 0:ye.module,modulesByArea:ve,featureAvailable:"available"===(null==Re?void 0:Re.type),isDragging:Y,inputFocused:re,showTutorialTooltip:Ie})),[se,oe,null==ye?void 0:ye.module,ve,null==Re?void 0:Re.type,Ie,Y,re]),Le=(0,n.useMemo)((()=>(oe||Ie&&je)&&!re&&!Y),[re,Y,oe,Ie,je]),Be=(0,s().IS)((e=>({container:{display:"flex",alignItems:"center",width:"calc(100% + 16px)",marginLeft:-8,padding:"2px 4px",borderRadius:6,backgroundColor:oe?e.buttonHoveredBackground:void 0,cursor:"grab"},dragHandle:{position:"absolute",zIndex:2,marginLeft:"-2px"},innerContainer:{display:"flex",alignItems:"center",padding:"0px 0px 0px 16px",width:"100%"},conditionalButtonBorder:{outlineStyle:"solid",outlineWidth:2,outlineColor:e.icon.uiBlueTertiary,borderRadius:4}})),[oe]),De=(0,n.useRef)(null);return ge&&me&&(0,c().lx)(me)?(0,q.jsxs)("div",{style:Be.container,onMouseMove:ke,onMouseLeave:Ae,children:[we&&(0,q.jsx)(N().A,{width:16,height:24,disallowTabbing:!0,disableDrag:re,tooltipPlacement:B().W.Left,hideClickMessage:!0,style:Be.dragHandle}),(0,q.jsxs)("div",{style:Be.innerContainer,children:[(0,q.jsx)(z().a,{style:{border:"none",padding:0,cursor:"grab",flexGrow:0},isDisabled:!0,label:null,isSelected:!1,selectorSize:"large",value:"select_option",selectType:"select"===me.type||J?"radio":"checkbox"}),(0,q.jsx)(E().A,{debugName:"Form question option",capture:re,allowMenuList:!0,allowEsc:!0,allowCopyPaste:!0,allowUndo:!0,children:(0,q.jsx)(K().A,{value:ee,style:{padding:"2px 0px",paddingRight:3,maxWidth:Le?"calc(100% - 50px)":"100%",flexGrow:1,overflowX:"hidden"},focus:re,format:K().C.Transparent,onMouseDown:e=>e.stopPropagation(),onFocus:()=>{$(!1),ie||S().clear({environment:o})},onClick:()=>ae(!0),onChange:e=>{le(!1);const t=/,/g;t.test(e.target.value)&&v().D6({label:(0,q.jsx)(m().sA,{id:"questionModule.formSelectMultiSelectProperty.commaWarning",defaultMessage:"Commas are currently not supported."})});const o=e.target.value.replace(t,"").trim();te(o)},onKeyDown:e=>{"Backspace"===e.key&&""===ee&&Ce()},onBlur:"temporary"===b?be:xe,onSubmit:e=>{"temporary"===b?be():xe(),r().default.afterNextFlush((()=>{Z(!0)}))}})}),je&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(H().A,{placement:B().W.Top,textWrap:!0,renderTooltip:()=>(0,q.jsx)(_().ML,{featureAvailability:Re,isAdmin:Pe}),disableTooltip:Ie,render:e=>(0,q.jsx)(O().A,{ref:De,style:{width:24,height:24,flexGrow:0,marginRight:3,...Ie&&Be.conditionalButtonBorder},onClick:()=>{if("unavailable"===(null==Re?void 0:Re.type)&&"product"===(null==Te?void 0:Te.type))V().K(o,{upsell:Te,from:"forms_conditional_logic"});else if("available"===(null==Re?void 0:Re.type))return _e()},icon:u().y,iconStyle:{width:16,height:16},ariaLabel:d.formatMessage({defaultMessage:"Add conditional logic",id:"FormMultiSelectProperty.ConditionalLogicIcon.title"}),...e})}),Ie&&(0,q.jsx)(M().O,{buttonRef:De})]}),Le&&(0,q.jsx)(O().A,{style:{width:24,height:24,flexGrow:0},iconStyle:{width:18,height:18},onClick:()=>Ce(!0),icon:p().I,ariaLabel:d.formatMessage({defaultMessage:"Delete option",id:"BlockPropertyRouter.FormSelectProperty.TrashIcon.title"})})]})]}):null}const X=(0,m().YK)({deleteModalWithConditionalLogic:{id:"FormMultiSelectProperty.deleteModalWithConditionalLogic.prompt",defaultMessage:"Are you sure you want to delete this option? The conditional logic that depends on this option will also be removed."}})},477660:(e,t,o)=>{function n(e){switch(null==e?void 0:e.type){case"url":case"email":case"phone_number":return e;default:return}}o.d(t,{z:()=>n})},512397:(e,t,o)=>{o.d(t,{T:()=>i});o(296540);var n=()=>o(35622),r=()=>o(360083),a=o(474848);function i(e){const{imageRef:t,url:o,blockStore:i,environment:l}=e;return e=>{if(e.stopPropagation(),e.preventDefault(),!t.current)return;const s=t.current.getBoundingClientRect(),c=s.width/s.height;n().o9({environment:l,renderFullScreenNode:()=>(0,a.jsx)(r().A,{url:o,isAuthenticated:!0,permissionRecord:i.pointer,width:window.innerWidth,render:(e,t)=>(0,a.jsx)("img",{src:t,style:{position:"relative",maxHeight:"100%",maxWidth:"100%",margin:0,alignSelf:"center",width:"100%"}})}),fullScreenNodeRect:s,contentAspectRatio:c,imageUrl:o,blockStore:i})}}},519745:(e,t,o)=>{o.d(t,{F:()=>r,n:()=>l});var n=()=>o(963589);const r=Symbol("loading"),a=Object.freeze({recomputeSchedule:{type:"debounce",debounceMs:250,maxWaitMs:500,initialValue:r}}),i=Object.freeze({});function l(){return(0,n().X)("experimental_computed_store_defer_debounce")?a:i}},529854:(e,t,o)=>{o.d(t,{C:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowUpDown",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M10 16.8662C9.89518 16.8662 9.79492 16.848 9.69922 16.8115C9.60807 16.7751 9.52604 16.7181 9.45312 16.6406L5.90527 13.0244C5.75488 12.874 5.67969 12.6986 5.67969 12.498C5.67969 12.2839 5.74577 12.1107 5.87793 11.9785C6.01009 11.8464 6.18099 11.7803 6.39062 11.7803C6.49544 11.7803 6.58887 11.8008 6.6709 11.8418C6.75293 11.8828 6.82585 11.9352 6.88965 11.999L8.33203 13.4756L9.33008 14.6514L9.26855 13.1133V7.01562L9.33008 5.47754L8.33203 6.64648L6.88965 8.12988C6.82585 8.19368 6.75293 8.24609 6.6709 8.28711C6.58887 8.32357 6.49544 8.3418 6.39062 8.3418C6.18099 8.3418 6.01009 8.27799 5.87793 8.15039C5.74577 8.01823 5.67969 7.84277 5.67969 7.62402C5.67969 7.42806 5.75488 7.25488 5.90527 7.10449L9.45312 3.48828C9.52604 3.41081 9.60807 3.35384 9.69922 3.31738C9.79492 3.28092 9.89518 3.2627 10 3.2627C10.0957 3.2627 10.1891 3.28092 10.2803 3.31738C10.376 3.35384 10.4626 3.41081 10.54 3.48828L14.0879 7.10449C14.2383 7.25488 14.3135 7.42806 14.3135 7.62402C14.3135 7.84277 14.2451 8.01823 14.1084 8.15039C13.9762 8.27799 13.8076 8.3418 13.6025 8.3418C13.4977 8.3418 13.4043 8.32357 13.3223 8.28711C13.2402 8.24609 13.165 8.19368 13.0967 8.12988L11.6611 6.64648L10.6562 5.47754L10.7246 7.01562V13.1133L10.6562 14.6514L11.6611 13.4756L13.0967 11.999C13.165 11.9352 13.2402 11.8828 13.3223 11.8418C13.4043 11.8008 13.4977 11.7803 13.6025 11.7803C13.8076 11.7803 13.9762 11.8464 14.1084 11.9785C14.2451 12.1107 14.3135 12.2839 14.3135 12.498C14.3135 12.6986 14.2383 12.874 14.0879 13.0244L10.54 16.6406C10.4626 16.7181 10.376 16.7751 10.2803 16.8115C10.1891 16.848 10.0957 16.8662 10 16.8662Z"})})},548218:(e,t,o)=>{o.d(t,{E:()=>O,V:()=>H});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577);var n=()=>o(908006),r=()=>o(716016),a=()=>o(787626),i=()=>o(970013),l=()=>o(713998),s=()=>o(597777),c=()=>o(869190),d=()=>o(604995),u=()=>o(977345),p=()=>o(416504),g=()=>o(72135),m=()=>o(919709),f=()=>o(983650),h=()=>o(496603),y=()=>o(534177),v=()=>o(720665),S=()=>o(606952),b=()=>o(634224),C=()=>o(14235),x=()=>o(780054),_=()=>o(267419),M=()=>o(862292),k=()=>o(989423),A=()=>o(886680),w=()=>o(921855),I=()=>o(476492),P=()=>o(909470),R=()=>o(761408),T=()=>o(972435),j=()=>o(508496),L=()=>o(843141),B=()=>o(299709),D=()=>o(522986),V=()=>o(884107),F=()=>o(620689),N=()=>o(317909);async function O(e){const{environment:t,theme:o,store:n,schema:i,property:c,collectionContextStore:g}=e,h=t.device,S=i[c],b=await V().R.clipboardActions.load();if(S){switch(S.type){case"formula":{const e=await M().T.formulas.load();"v2"===S.version?function(e){const{clipboardActions:t,environment:o,store:n,propertySchema:r,property:a,formulasModule:i}=e,l=n.getModel();if(!r.formula2||!l)return;const s=T().A.getIntl(),c=(0,p().P)(),d=i.evaluateCollectionFormula2({block:l,property:a,formulaCode:r.formula2.code,getRecordModel:n.getRecordModel,intl:s,userTimeZone:c,depth:0,visitedProperties:new Set,resultCache:new Map,regExpCache:new Map,experimentService:j().default,collectionFeatureGates:(0,P().i)()});if(!d)return;const g=(0,u().Ht)(d),m=(0,w().r4)(g,n);t.copyString({stringValue:m,environment:o,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}({clipboardActions:b,environment:t,store:n,propertySchema:S,property:c,formulasModule:e}):function(e){var t;const{clipboardActions:o,environment:n,store:r,schema:a,property:i,propertySchema:l,formulasModule:c}=e,d=r.getValue();if(!d)return;const u=c.evaluateFormulaProperty({property:i,schema:a,block:d,getRecordValue:r.getRecordValue,collectionRequestContext:{userId:void 0,userTimeZone:(0,p().P)(),depth:0,intl:T().A.getIntl(),resultCache:new Map,regExpCache:new Map,visitedProperties:new Set,experimentService:j().default,collectionFeatureGates:(0,P().i)()}}),g=null==l||null===(t=l.formula)||void 0===t?void 0:t.result_type;switch(g){case"number":v().Et(u)&&K({clipboardActions:o,value:u,propertySchema:l,environment:n});break;case"date":u&&s().kC(u)&&z({clipboardActions:o,date:u,environment:n});break;case"text":u&&o.copyString({stringValue:u.toString(),environment:n,copiedMessage:o.clipboardMessages.copiedPropertyToClipboard});break;case"checkbox":case void 0:return;default:(0,y().HB)(g)}}({clipboardActions:b,environment:t,store:n,schema:i,property:c,propertySchema:S,formulasModule:e});break}case"person":{const e=n.getPropertyValue(c);E({actors:l().e5({textValue:e,propertySchema:S,blockCreatorPointer:n.getCreatedByPointer()}),clipboardActions:b,environment:t,store:n});break}case"created_by":{const e=n.getCreatedByPointer();e&&E({actors:[e],clipboardActions:b,environment:t,store:n});break}case"last_edited_by":{const e=n.getLastEditedByPointer();e&&E({actors:[e],clipboardActions:b,environment:t,store:n});break}case"number":K({clipboardActions:b,environment:t,propertySchema:S,value:l().Me(n.getPropertyValue(c))});break;case"text":{const e=n.getPropertyValue(c);if(!e)return;const r=f().$e({textValue:{value:e,spaceId:n.getSpaceId()},getRecordModel:n.getRecordModel,getRecordRole:n.getRecordRole,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!0,disableSuggestionAnnotations:!1,disableLinks:!1,disabled:!1,userTimeZone:(0,p().P)(),isClient:!0,isAndroid:h.isAndroid,isSafariOrIOS:h.isSafari||h.isIOS,isWindows:h.isWindows,showEmojiInline:h.isWindows,emojiType:"raw",theme:o,baseUrl:x().A.domainBaseUrl,publicDomainName:x().A.publicDomainName,currentUserId:t.currentUser.id,intl:T().A.getIntl(),katex:void 0,getPublicBaseUrlForPage:void 0,externalIntegrations:[],formulaValueTypes:[],emojiData:_().A.state,isMobileNative:h.isMobileNative,isMobileNativeExternalLinkFixEnabled:j().default.checkGate({gateName:"mobile_native_external_link_fix"})}),a=(0,w().r4)(n.getPropertyValue(c),n);b.copyHtml({stringValue:a,htmlValue:r,environment:t,copiedMessage:b.clipboardMessages.copiedPropertyToClipboard});break}case"url":case"email":case"phone_number":{const e=m().k4p(n.getPropertyValue(c));b.copyString({stringValue:e,environment:t,copiedMessage:b.clipboardMessages.copiedPropertyToClipboard});break}case"date":{const e=n.getPropertyValue(c),o=(0,a().b)(e);o&&z({clipboardActions:b,date:o,environment:t,dateFormat:S.date_format,timeFormat:S.time_format});break}case"last_edited_time":case"created_time":{const e=n.getKeyStore(S.type).getValue();if(e){z({clipboardActions:b,date:d().KQ(e,(0,p().P)()),environment:t,dateFormat:S.date_format,timeFormat:S.time_format})}break}case"auto_increment_id":{const e=n.getPropertyValue(c);!function(e){const{clipboardActions:t,value:o,environment:n,collectionContextStore:a}=e;if(o&&a){var i;const e=(null===(i=a.collectionStore())||void 0===i||null===(i=i.getRecordKeyStore())||void 0===i?void 0:i.getRecordKey())??"";t.copyString({stringValue:(0,r().H4)(e,o),environment:n,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}}({clipboardActions:b,value:l().On(e),environment:t,collectionContextStore:g});break}}(0,L().E)(t,g,{block_id:n.id,property:c,property_type:S.type})}}function E(e){const{actors:t,clipboardActions:o,environment:n,store:r}=e,a=l().AH(t);o.copyString({stringValue:(0,w().r4)(a,r),environment:n,copiedMessage:o.clipboardMessages.copiedPropertyToClipboard})}function K(e){const{clipboardActions:t,value:o,propertySchema:n,environment:r}=e;if(!h().yr(o)&&!v().pN(o)){const e=(null==n?void 0:n.number_format)||g().C4,a=g().ZV(o,e,T().A.getIntl());t.copyString({stringValue:a,environment:r,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}}function z(e){const{clipboardActions:t,date:o,environment:n,dateFormat:r,timeFormat:a}=e,i=(0,c().ZF)({value:o,date_format:r??s().vz,time_format:a??s().CE,allowRelativeDates:!0,intl:T().A.getIntl()});t.copyString({stringValue:i,environment:n,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}async function H(e){const{element:t,rect:o,environment:r,onClick:a,store:s,additionalStores:c=[],property:d,format:u,collectionStore:p,blockPropertyValueOverlayStore:g,disableHorizontalEdgeScroll:m,collectionContextStore:f,collectionSchema:h,mouseStore:y,setMouseEntered:v,statusSetCheckbox:x,preventClearSelection:_,collectionsBulkActionsToolbarStore:M,scrollerContext:w,sizing:P,formQuestionStore:j,onClose:L}=e,{device:V,WindowSizeStore:O}=r,E=f&&A().br({store:s,additionalStores:c,collectionContextStore:f});let K=p.getSchema();E&&(K=f.normalizedSchemaStore.state),h&&(K=h);const z=(0,R().L)({collectionStore:p,collectionContextStore:f,property:d}),H=K[z],W=null==H?void 0:H.type;if(!W)return;if(A().F1({property:d,collectionStore:p}))return;const U=s.getPropertyStore(z);if("checkbox"===W)U&&N().createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:r,canUndo:!0,perform:e=>{D().qS({stores:[s,...c],property:z,transaction:e})}}),f&&(0,B().E)({environment:r,collectionContextStore:f,block_id:U.id,property:z,property_type:W,from:A().zP(u),isFromBulkActionsToolbar:Boolean(M)});else if("status"===W&&"status"===H.type&&x){const e=s.getPropertyValue(z),t=l().MC(e,H,T().A.getIntl());U&&N().createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:r,canUndo:!0,perform:e=>{const o=H.groups??[],n=!0===t?o[0]:o[o.length-1],a=(H.options??[]).find((e=>{var t;return e.id===(null==n||null===(t=n.optionIds)||void 0===t?void 0:t[0])}));if(a)for(const t of[s,...c])S().KY({environment:r,store:t.getPropertyStore(z),value:l().wb(a.value),transaction:e})}})}else{if(-1===i().dA.indexOf(W)&&(null==v||v(!1),y&&y.setState({...y.state,mouseEntered:!1}),t&&w&&V.isMobileNative&&b().Pp[W]===C().nl.Popup&&(F().hT({element:t,environment:r,scrollerContext:w,vertical:{reveal:"bottom",paddingToTopEdge:4,paddingToBottomEdge:O.getSafePaddingBottomPx(320)},horizontal:{reveal:"closest"}}),await n().default.afterNextFlush()),D().ho({environment:r,blockPropertyValueOverlayStore:g,store:s,additionalStores:c,property:z,format:u,rect:o,disableHorizontalEdgeScroll:m,collectionContextStore:f,collectionSchema:h,preventClearSelection:_,collectionsBulkActionsToolbarStore:M,sizing:P,formQuestionStore:j,onClose:L}),f)){const e=(0,I().sl)(f)||{};k().vd(r,"collection_open_block_property_overlay",{property:z,property_type:W,property_context:void 0,from:A().zP(u),isFromBulkActionsToolbar:Boolean(M),...e})}}a&&a()}},555439:(e,t,o)=>{o.d(t,{_:()=>a});var n=()=>o(645873);const r=new(n().O2)("FilePropertyModule",(async()=>await o.e(5938).then(o.bind(o,637360)))),a=(0,n()._h)(r,(e=>e.FilePropertyModule))},573451:(e,t,o)=>{o.d(t,{C:()=>r});var n=()=>o(945895);function r(e){const{store:t,transient:o}=e;n().A.setState({isActive:!0,store:t,transient:Boolean(o)})}},596359:(e,t,o)=>{o.d(t,{Uk:()=>u,gc:()=>p,r$:()=>m});o(944114),o(898992),o(672577);var n=()=>o(970013),r=()=>o(183558),a=()=>o(831566),i=()=>o(519839),l=()=>o(972435),s=()=>o(630116),c=()=>o(901389),d=()=>o(317909);function u(e){const{modification:t,property:o,propertySchema:i,options:u,groupIndex:p,environment:m,collectionStore:f}=e;let h,y;if("keyedObjectListRemove"===t.type)h={pointer:f.pointer,command:"keyedObjectListRemove",path:["schema",o,"options"],args:{remove:{id:t.id}}},void 0!==p&&"status"===i.type&&(y={pointer:f.pointer,command:"listRemove",path:["schema",o,"groups",p,"optionIds"],args:{id:t.id}});else{if(u){if(u.find((e=>e.value===t.newValue)))return void c().f1(l().A.formatMessage(g.optionAlreadyExists))}if("keyedObjectListUpdate"===t.type)h={pointer:f.pointer,command:"keyedObjectListUpdate",path:["schema",o,"options"],args:{value:{...t.option,value:t.newValue}}};else{const e=i.options||[];let a=(0,n().Zd)(e);if("status"===i.type&&void 0!==p){var v;const e=null===(v=i.groups)||void 0===v||null===(v=v[p])||void 0===v?void 0:v.color;e&&(a=e)}const l={id:(0,r().Ay)(),value:t.newValue,color:a};if("autoSortInsert"===t.type){if(!(0,n().lx)(i))return;h=(0,n().og)({collectionId:f.id,property:o,propertySchema:i,newOption:l,isAscending:"alphabetical"===i.auto_sort_options})}else"keyedObjectListBefore"===t.type?(h={pointer:f.pointer,command:"keyedObjectListBefore",path:["schema",o,"options"],args:{value:l,before:t.beforeOption}},void 0!==p&&"status"===i.type&&(y={pointer:f.pointer,command:"listBefore",path:["schema",o,"groups",p,"optionIds"],args:{id:l.id}})):"keyedObjectListAfter"===t.type&&(h={pointer:f.pointer,command:"keyedObjectListAfter",path:["schema",o,"options"],args:{value:l,after:t.afterOption}},void 0!==p&&"status"===i.type&&(y={pointer:f.pointer,command:"listBefore",path:["schema",o,"groups",p,"optionIds"],args:{id:l.id}}))}}(0,a().p)({environment:m,collectionStore:f,performTransaction:e=>{d().applyOperation({store:f,operation:h,transaction:e}),y&&d().applyOperation({store:(0,s().Oo)(f,y.pointer),operation:y,transaction:e})}})}function p(e){const{newValues:t,property:o,schema:r,collectionStore:l,environment:c}=e,u=r[o];let p;if("status"===(null==u?void 0:u.type)){p=[[]];for(const e of t)e.startsWith("group-header-")?p.push([]):p[p.length-1].push(e)}else p=t;const g=(0,i().os)({newOptions:p,collectionId:l.id,property:o,schema:r});if(g){if(u&&(0,n().lx)(u)){"manual"!==(u.auto_sort_options||"manual")&&g.push({pointer:l.pointer,command:"update",path:["schema",o],args:{auto_sort_options:"manual"}})}(0,a().p)({environment:c,collectionStore:l,performTransaction:e=>{for(const t of g)d().applyOperation({store:(0,s().Oo)(l,t.pointer),operation:t,transaction:e})}})}}const g=(0,o(959013).YK)({deleteModalPrompt:{id:"database.selectPropertyOptionEditMenu.deleteModal.prompt",defaultMessage:"Are you sure you want to delete this option?"},acceptButtonLabel:{id:"database.selectPropertyOptionEditMenu.deleteModal.confirmButton",defaultMessage:"Delete"},preventDefaultStatusOptionDelete:{defaultMessage:"Cannot delete default option.",id:"database.editProperty.errorDialog.forbidDeleteDefaultOption.message"},optionAlreadyExists:{defaultMessage:"Option already exists.",id:"database.optionExistsAlreadyError.message"}});function m(e){const{option:t,propertySchema:o,property:r,collectionStore:a,statusGroup:i,environment:s,deleteMessage:d}=e;"status"!==o.type||t.value!==o.defaultOption?c().ui({showCancel:!0,keepFocus:!1,message:d??l().A.formatMessage(g.deleteModalPrompt),items:[{label:l().A.formatMessage(g.acceptButtonLabel),color:"red",onAccept:()=>{if((0,n().lx)(o)||"status"===o.type)if("status"===o.type&&i){const e=(o.groups??[]).findIndex((e=>e.id===i.id));u({modification:{type:"keyedObjectListRemove",id:t.id},property:r,propertySchema:o,environment:s,collectionStore:a,groupIndex:e})}else u({modification:{type:"keyedObjectListRemove",id:t.id},property:r,propertySchema:o,environment:s,collectionStore:a})}}]}):c().f1(l().A.formatMessage(g.preventDefaultStatusOptionDelete))}},636494:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("replace",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.26465 3.96094C2.95996 4.26562 2.979 4.66553 3.23291 4.8877C3.49316 5.12256 3.86133 5.12256 4.16602 4.83057C5.11182 3.80225 6.48291 3.15479 8 3.15479C10.6851 3.15479 12.856 5.12891 13.2051 7.66162H12.2466C11.7642 7.66162 11.6309 8.01709 11.9102 8.41064L13.4209 10.5435C13.6494 10.8608 13.9985 10.8608 14.2334 10.5435L15.7441 8.41699C16.0298 8.02344 15.8965 7.66162 15.4077 7.66162H14.519C14.1445 4.44336 11.3516 1.85986 8 1.85986C6.13379 1.85986 4.43262 2.68506 3.26465 3.96094ZM0.249512 8.42334C-0.0297852 8.81689 0.097168 9.17871 0.585938 9.17871H1.4873C1.85547 12.397 4.64844 14.9805 8 14.9805C9.87256 14.9805 11.5737 14.1553 12.748 12.873C13.0464 12.5684 13.0273 12.1685 12.7734 11.9399C12.5132 11.7051 12.1514 11.7114 11.8403 12.0034C10.9009 13.0381 9.52979 13.6855 8 13.6855C5.32129 13.6855 3.14404 11.7178 2.79492 9.17871H3.74707C4.22949 9.17871 4.36279 8.82324 4.0835 8.42969L2.57275 6.29688C2.34424 5.97949 1.99512 5.97949 1.7666 6.29688L0.249512 8.42334Z"})})},671891:(e,t,o)=>{o.d(t,{l:()=>r});var n=()=>o(56366);function r(e){const t=(0,n().K8)((()=>function(e){if(!e)return;const t=null==e?void 0:e.getAssociatedCollectionStore();return null==t?void 0:t.getLayoutStore()}(e)),[e]);return t}},675592:(e,t,o)=>{o.d(t,{DV:()=>s,PD:()=>l,Pr:()=>r,UB:()=>c,Wm:()=>i,Z6:()=>a});var n=o(296540);const r=n.createContext(void 0);r.displayName="ColumnVirtualizerContext";const a=n.createContext(!1);a.displayName="ColumnVirtualizerExistenceContext";const i=n.createContext({propertiesInRange:[],propertiesInRangeIndices:[],beforeWidth:0,afterWidth:0});function l(){return(0,n.useContext)(r)}function s(){return(0,n.useContext)(a)}function c(){return(0,n.useContext)(i)}i.displayName="ColumnVirtualizerVisiblePropertiesContext"},677195:(e,t,o)=>{o.d(t,{R:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,n.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})},714574:(e,t,o)=>{o.d(t,{P:()=>r});var n=()=>o(996494);function r(e){const{store:t}=e;"new"===n().A.state.editMode&&n().A.state.store.id===t.id&&n().A.reset()}},722372:(e,t,o)=>{o.d(t,{SE:()=>f,Y9:()=>x,cx:()=>S,fp:()=>y,jA:()=>v,o_:()=>b,rv:()=>_,zI:()=>C,zY:()=>g});var n=()=>o(148307),r=()=>o(67657),a=()=>o(597777),i=()=>o(869190),l=()=>o(72135),s=()=>o(959013),c=()=>o(496603),d=()=>o(534177),u=()=>o(972435);const p=(0,s().YK)({show_unique:{defaultMessage:"Show unique values",id:"database.aggregationFullName.unique_values"},count:{defaultMessage:"Count all",id:"database.aggregationFullName.count"},count_values:{defaultMessage:"Count values",id:"database.aggregationFullName.count_values"},unique:{defaultMessage:"Count unique values",id:"database.aggregationFullName.unique"},empty:{defaultMessage:"Count empty",id:"database.aggregationFullName.empty"},not_empty:{defaultMessage:"Count not empty",id:"database.aggregationFullName.not_empty"},percent_empty:{defaultMessage:"Percent empty",id:"database.aggregationFullName.percent_empty"},percent_not_empty:{defaultMessage:"Percent not empty",id:"database.aggregationFullName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationFullName.sum"},average:{defaultMessage:"Average",id:"database.aggregationFullName.average"},median:{defaultMessage:"Median",id:"database.aggregationFullName.median"},min:{defaultMessage:"Min",id:"database.aggregationFullName.min"},max:{defaultMessage:"Max",id:"database.aggregationFullName.max"},range:{defaultMessage:"Range",id:"database.aggregationFullName.range"},earliest_date:{defaultMessage:"Earliest date",id:"database.aggregationFullName.earliest_date"},latest_date:{defaultMessage:"Latest date",id:"database.aggregationFullName.latest_date"},date_range:{defaultMessage:"Date range",id:"database.aggregationFullName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationFullName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationFullName.unchecked"},percent_checked:{defaultMessage:"Percent checked",id:"database.aggregationFullName.percent_checked"},percent_unchecked:{defaultMessage:"Percent unchecked",id:"database.aggregationFullName.percent_unchecked"},count_per_group:{defaultMessage:"Count per group",id:"database.aggregationFullName.count_per_group"},percent_per_group:{defaultMessage:"Percent per group",id:"database.aggregationFullName.percent_per_group"},count_aggregations:{defaultMessage:"Count",id:"database.aggregationBucket.count"},percent_aggregations:{defaultMessage:"Percent",id:"database.aggregationBucket.percent"},statistics_aggregations:{defaultMessage:"More options",id:"database.aggregationBucket.more_options"},date_aggregations:{defaultMessage:"Date",id:"database.aggregationBucket.date"},rollup_aggregations:{defaultMessage:"Rollup",id:"database.aggregationBucket.rollup"}}),g={count:u().A.formatMessage(p.count),count_values:u().A.formatMessage(p.count_values),unique:u().A.formatMessage(p.unique),show_unique:u().A.formatMessage(p.show_unique),empty:u().A.formatMessage(p.empty),not_empty:u().A.formatMessage(p.not_empty),percent_empty:u().A.formatMessage(p.percent_empty),percent_not_empty:u().A.formatMessage(p.percent_not_empty),sum:u().A.formatMessage(p.sum),average:u().A.formatMessage(p.average),median:u().A.formatMessage(p.median),min:u().A.formatMessage(p.min),max:u().A.formatMessage(p.max),range:u().A.formatMessage(p.range),earliest_date:u().A.formatMessage(p.earliest_date),latest_date:u().A.formatMessage(p.latest_date),date_range:u().A.formatMessage(p.date_range),checked:u().A.formatMessage(p.checked),unchecked:u().A.formatMessage(p.unchecked),percent_checked:u().A.formatMessage(p.percent_checked),percent_unchecked:u().A.formatMessage(p.percent_unchecked),count_per_group:u().A.formatMessage(p.count_per_group),percent_per_group:u().A.formatMessage(p.percent_per_group)},m=(0,s().YK)({count:{defaultMessage:"Count",id:"database.aggregationShortName.count"},count_values:{defaultMessage:"Values",id:"database.aggregationShortName.count_values"},unique:{defaultMessage:"Unique",id:"database.aggregationShortName.unique"},show_unique:{defaultMessage:"Show unique",id:"database.aggregationShortName.showUnique"},empty:{defaultMessage:"Empty",id:"database.aggregationShortName.empty"},not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.not_empty"},percent_empty:{defaultMessage:"Empty",id:"database.aggregationShortName.percent_empty"},percent_not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationShortName.sum"},average:{defaultMessage:"Average",id:"database.aggregationShortName.average"},median:{defaultMessage:"Median",id:"database.aggregationShortName.median"},min:{defaultMessage:"Min",id:"database.aggregationShortName.min"},max:{defaultMessage:"Max",id:"database.aggregationShortName.max"},range:{defaultMessage:"Range",id:"database.aggregationShortName.range"},earliest_date:{defaultMessage:"Earliest",id:"database.aggregationShortName.earliest_date"},latest_date:{defaultMessage:"Latest",id:"database.aggregationShortName.latest_date"},date_range:{defaultMessage:"Range",id:"database.aggregationShortName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationShortName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.unchecked"},percent_checked:{defaultMessage:"Checked",id:"database.aggregationShortName.percent_checked"},percent_unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.percent_unchecked"},count_per_group:{defaultMessage:"Count",id:"database.aggregationShortName.count_per_group"},percent_per_group:{defaultMessage:"Percent",id:"database.aggregationShortName.percent_per_group"}}),f={count:u().A.formatMessage(m.count),count_values:u().A.formatMessage(m.count_values),unique:u().A.formatMessage(m.unique),show_unique:u().A.formatMessage(m.show_unique),empty:u().A.formatMessage(m.empty),not_empty:u().A.formatMessage(m.not_empty),percent_empty:u().A.formatMessage(m.percent_empty),percent_not_empty:u().A.formatMessage(m.percent_not_empty),sum:u().A.formatMessage(m.sum),average:u().A.formatMessage(m.average),median:u().A.formatMessage(m.median),min:u().A.formatMessage(m.min),max:u().A.formatMessage(m.max),range:u().A.formatMessage(m.range),earliest_date:u().A.formatMessage(m.earliest_date),latest_date:u().A.formatMessage(m.latest_date),date_range:u().A.formatMessage(m.date_range),checked:u().A.formatMessage(m.checked),unchecked:u().A.formatMessage(m.unchecked),percent_checked:u().A.formatMessage(m.percent_checked),percent_unchecked:u().A.formatMessage(m.percent_unchecked),count_per_group:u().A.formatMessage(m.count_per_group),percent_per_group:u().A.formatMessage(m.percent_per_group)},h=(0,s().YK)({count:{defaultMessage:"Counts the total number of pages, including blank pages.",id:"database.aggregationDescription.count"},count_values:{defaultMessage:"Counts the number of non-empty values for this property. For a type that can contain multiple values like multi-select or person, this will count the number of selected values for each page.",id:"database.aggregationDescription.count_values"},unique:{defaultMessage:"Counts the number of unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.unique"},show_unique:{defaultMessage:"Shows the unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.show_unique"},empty:{defaultMessage:"Counts the number of pages with an empty value for this property.",id:"database.aggregationDescription.empty"},not_empty:{defaultMessage:"Counts the number of pages with a non-empty value for this property.",id:"database.aggregationDescription.not_empty"},percent_empty:{defaultMessage:"Displays the percentage of pages that have an empty value for this property.",id:"database.aggregationDescription.percent_empty"},percent_not_empty:{defaultMessage:"Displays the percentage of pages that have a non-empty value for this property.",id:"database.aggregationDescription.percent_not_empty"},sum:{defaultMessage:"Computes the sum of a numeric property.",id:"database.aggregationDescription.sum"},average:{defaultMessage:"Computes the average of a numeric property.",id:"database.aggregationDescription.average"},median:{defaultMessage:"Finds the median of a numeric property.",id:"database.aggregationDescription.median"},min:{defaultMessage:"Finds the minimum of a numeric property.",id:"database.aggregationDescription.min"},max:{defaultMessage:"Finds the maximum of a numeric property.",id:"database.aggregationDescription.max"},range:{defaultMessage:"Computes the range (maximum - minimum) of a numeric property.",id:"database.aggregationDescription.range"},earliest_date:{defaultMessage:"Finds the earliest date in time of a date property.",id:"database.aggregationDescription.earliest_date"},latest_date:{defaultMessage:"Finds the latest date in time of a date property.",id:"database.aggregationDescription.latest_date"},date_range:{defaultMessage:"Computes the date range (latest date - earliest date) of a date property.",id:"database.aggregationDescription.date_range"},checked:{defaultMessage:"Counts the number of pages with a checked checkbox for this property.",id:"database.aggregationDescription.checked"},unchecked:{defaultMessage:"Counts the number of pages with an unchecked checkbox for this property.",id:"database.aggregationDescription.unchecked"},percent_checked:{defaultMessage:"Displays the percentage of pages that have a checked checkbox for this property.",id:"database.aggregationDescription.percent_checked"},percent_unchecked:{defaultMessage:"Displays the percentage of pages that have an unchecked checkbox for this property.",id:"database.aggregationDescription.percent_unchecked"},count_per_group:{defaultMessage:"Counts the total number of pages that have this Status Group.",id:"database.aggregationDescription.count_per_group"},percent_per_group:{defaultMessage:"Displays the percentage of pages that have this Status Group",id:"database.aggregationDescription.percent_per_group"}}),y={count:u().A.formatMessage(h.count),count_values:u().A.formatMessage(h.count_values),unique:u().A.formatMessage(h.unique),show_unique:u().A.formatMessage(h.show_unique),empty:u().A.formatMessage(h.empty),not_empty:u().A.formatMessage(h.not_empty),percent_empty:u().A.formatMessage(h.percent_empty),percent_not_empty:u().A.formatMessage(h.percent_not_empty),sum:u().A.formatMessage(h.sum),average:u().A.formatMessage(h.average),median:u().A.formatMessage(h.median),min:u().A.formatMessage(h.min),max:u().A.formatMessage(h.max),range:u().A.formatMessage(h.range),earliest_date:u().A.formatMessage(h.earliest_date),latest_date:u().A.formatMessage(h.latest_date),date_range:u().A.formatMessage(h.date_range),checked:u().A.formatMessage(h.checked),unchecked:u().A.formatMessage(h.unchecked),percent_checked:u().A.formatMessage(h.percent_checked),percent_unchecked:u().A.formatMessage(h.percent_unchecked),count_per_group:u().A.formatMessage(h.count_per_group),percent_per_group:u().A.formatMessage(h.percent_per_group)},v={count_aggregations:u().A.formatMessage(p.count_aggregations),percent_aggregations:u().A.formatMessage(p.percent_aggregations),statistics_aggregations:u().A.formatMessage(p.statistics_aggregations),date_aggregations:u().A.formatMessage(p.date_aggregations)},S={count:n().A.images.aggregations.countPng,count_values:n().A.images.aggregations.countValuesPng,unique:n().A.images.aggregations.uniquePng,show_unique:void 0,empty:n().A.images.aggregations.emptyPng,not_empty:n().A.images.aggregations.notEmptyPng,percent_empty:n().A.images.aggregations.percentEmptyPng,percent_not_empty:n().A.images.aggregations.percentNotEmptyPng,sum:n().A.images.aggregations.sumPng,average:n().A.images.aggregations.averagePng,median:n().A.images.aggregations.medianPng,min:n().A.images.aggregations.minPng,max:n().A.images.aggregations.maxPng,range:n().A.images.aggregations.rangePng,earliest_date:n().A.images.aggregations.earliestDatePng,latest_date:n().A.images.aggregations.latestDatePng,date_range:n().A.images.aggregations.dateRangePng,checked:n().A.images.aggregations.checkedPng,unchecked:n().A.images.aggregations.uncheckedPng,percent_checked:n().A.images.aggregations.percentCheckedPng,percent_unchecked:n().A.images.aggregations.percentUncheckedPng,count_per_group:n().A.images.aggregations.countPng,percent_per_group:n().A.images.aggregations.percentCheckedPng};function b(e,t){switch(e){case"earliest_date":case"show_unique":case"latest_date":case"date_range":return;case"percent_empty":case"percent_not_empty":case"percent_checked":case"percent_unchecked":return"percent";case"count":case"empty":case"not_empty":case"unique":case"count_values":case"checked":case"unchecked":return"number";case"sum":case"average":case"median":case"min":case"max":case"range":return t??"number";default:switch(e.operator){case"count_per_group":return;case"percent_per_group":return"percent";default:(0,d().HB)(e.operator)}}}function C(e,t){switch(e){case"earliest_date":case"show_unique":case"latest_date":case"date_range":case"count":case"empty":case"not_empty":case"unique":case"count_values":case"checked":case"unchecked":return;case"percent_empty":case"percent_not_empty":case"percent_checked":case"percent_unchecked":case"average":return t??"precision_2";case"sum":case"median":case"min":case"max":case"range":return t??void 0;default:switch(e.operator){case"count_per_group":return;case"percent_per_group":return t??"precision_2";default:(0,d().HB)(e.operator)}}}function x(e){const{aggregationType:t,value:o,userTimeZone:n,dateFormat:s,numberPrecision:d}=e;if("date"===o.type){if(!(0,r().Y)(t))return;if(!o.value)return;return"date_range"===t?(0,i().a3)(o.value,n,u().A.getIntl()):(0,i().ZF)({value:a().pp(o.value),date_format:s??a().vz,userTimeZone:n,allowRelativeDates:!0,intl:u().A.getIntl()})}if((0,r().Y)(t))return;if("show_unique"===t)return;if("object"==typeof o.value)return;if("string"==typeof o.value)return o.value;let p;p=void 0===d||"precision_uncapped"===d?void 0===o.value?void 0:c().LI(o.value,5):o.value;const g=b(t,e.numberFormat);return(0,l().ZV)(p,g,u().A.getIntl(),void 0,d)}function _(e){const{aggregation:t,value:o,numberFormat:n,dateFormat:a,numberPrecision:i}=e,l=x({numberFormat:n,dateFormat:a,aggregationType:t?t.aggregator:"count",userTimeZone:e.userTimeZone,value:o,numberPrecision:i});if(null!=t&&t.enforceMaxAggregationLimit){const e=Number(l);if(e&&e>=r().iY)return r().iY-1+"+"}return l}},727395:(e,t,o)=>{o.d(t,{_:()=>r});var n=()=>o(989423);function r(e,t){n().vd(e,"relation_navigate_block",t)}},729650:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("collectionInbox",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M11.0918,0 C11.5383,0 11.9307,0.295898 12.0533,0.725586 L13.9615,7.40332 C13.9871,7.49316 14,7.58594 14,7.67871 L14,13 C14,13.5527 13.5522,14 13,14 L1,14 C0.447754,14 0,13.5527 0,13 L0,7.67871 C0,7.58594 0.0129395,7.49316 0.0384521,7.40332 L1.94666,0.725586 C2.06934,0.295898 2.46167,0 2.9082,0 L11.0918,0 Z M4.27271,1.5 C3.83728,1.5 3.45178,1.78223 3.31982,2.19727 L1.91455,6.61328 C1.70947,7.25879 2.1908,7.91699 2.86755,7.91699 L4.70837,7.91699 C4.70837,8.93652 5.16663,10.168 7,10.168 C8.83337,10.168 9.29163,8.93652 9.29163,7.91699 L11.1478,7.89355 C11.8201,7.88477 12.2927,7.22852 12.0876,6.58887 L10.681,2.19531 C10.5485,1.78125 10.1635,1.5 9.72864,1.5 L4.27271,1.5 Z"})})},736230:(e,t,o)=>{o.d(t,{V:()=>r});var n=()=>o(56366);function r(e){let{collectionContextStore:t,blockId:o,property:r,featureEnabled:a=!1}=e;return(0,n().K8)((()=>{if(!(a&&o&&r&&t))return!1;const e=t.virtualizedModule.getBlockHeightsCache();return e&&e.propertyCanExpandStore(o,r).state}),[t,o,r,a])}},739041:(e,t,o)=>{o.d(t,{u:()=>r});var n=()=>o(989423);function r(e,t,o){n().vd(e,t,o)}},740840:(e,t,o)=>{o.d(t,{O:()=>f});var n=o(296540),r=()=>o(484714),a=()=>o(401497),i=()=>o(755199),l=()=>o(515918),s=()=>o(953006),c=()=>o(972435),d=()=>o(465425),u=()=>o(962730),p=()=>o(98205),g=o(474848);const m=(0,o(959013).YK)({tryConditionalLogicTooltip:{defaultMessage:"Try conditional logic",id:"ConditionalLogicIcon.tutorialTooltip.title"}});function f(e){const t=(0,r().v3)(),o=(0,n.useCallback)((()=>{i().p$({environment:t}),(0,d().a)(t,p().wG)}),[t]),f=(0,a().IS)((e=>({badge:{color:"rgba(102, 179, 255, 1)",background:"rgba(35, 131, 226, 0.3)",whiteSpace:"nowrap",display:"inline"},tutorialTooltipContent:{whiteSpace:"nowrap",margin:0,color:e.text.contrastPrimary},tutorialTooltip:{padding:"0 2px 4px 8px",borderRadius:8,marginBottom:4}})),[]),{buttonRef:h}=e,y=(0,g.jsxs)("div",{style:f.tutorialTooltipContent,children:[c().A.formatMessage(m.tryConditionalLogicTooltip),(0,g.jsx)("span",{children:(0,g.jsx)(l().A,{style:f.badge})})]});return(0,g.jsx)(s().k,{origin:h,hideCloseButton:!0,style:f.tutorialTooltip,hideActions:!0,placementToOrigin:"top",alignmentToOrigin:u().C.Center,showPointer:!1,content:y,onCloseClick:o,shouldDismissUponOutsideClick:!0})}},743147:(e,t,o)=>{o.d(t,{n:()=>C});o(296540);var n=()=>o(484714),r=()=>o(56366),a=()=>o(401497),i=()=>o(970013),l=()=>o(416504),s=()=>o(93549),c=()=>o(959013),d=()=>o(284371),u=()=>o(870578),p=()=>o(405417),g=()=>o(962730),m=()=>o(148832),f=()=>o(704152),h=()=>o(859428),y=o(474848);const v=200,S=75,b=75;function C(e){let{blockStore:t,collectionContextStore:o,columnWidth:C}=e;const x=(0,r().O$)(o.currentSubitemFormatStoreForCollectionStore),_=(0,r().K8)((()=>t.getAssociatedCollectionStore()),[t]),M=(0,r().K8)((()=>{var e;return null===(e=o.collectionViewStore())||void 0===e?void 0:e.getType()}),[o]),k=(0,r().K8)((()=>{if(!x||!_)return;const e=_.getSchema()[x.property];return void 0!==e&&(0,i().nC)(e)?e:void 0}),[_,x]),A="table"===M||"list"===M||"timeline"===M,w=(0,n().v3)(),I=(0,c().tz)(),P=w.device.isMobile?S:v,R=(0,a().IS)((e=>({parentItemIcon:{color:e.mediumIconColor,width:14,height:14,marginRight:2},button:{height:20,display:"flex",alignItems:"center",color:e.lightTextColor,borderRadius:6,padding:"0 6px"},parentTitle:{...A?{maxWidth:C?Math.min(P,C-b):P}:{},fontWeight:d().Wy.medium,fontSize:d().J.UISmall.desktop,...d().RC}})),[C,A,P]),T=(0,r().K8)((()=>x&&k?(0,p().eO)({store:t,subitemFormat:x,propertySchema:k}):[]),[t,x,k]),j=(0,r().K8)((()=>{if(0===T.length)return;const e=T[0];return m().B.createChildStore(t,e)}),[t,T]),L=(0,r().K8)((()=>{var e;return null==j||null===(e=j.getModel())||void 0===e?void 0:e.getRenderTitleWithPlaceholder({getRecordModel:j.getRecordModel,userTimeZone:(0,l().P)(),intl:I})}),[j,I]);return(0,r().K8)((()=>(0,p().xC)({collectionContextStore:o,blockStore:t})),[o,t])&&j?(0,y.jsx)(h().A,{renderTooltip:()=>(0,y.jsx)("div",{children:L}),alignment:g().C.Start,delayThreshold:300,render:e=>(0,y.jsxs)(f().A,{ariaLabel:I.formatMessage({id:"parentItemIndicator.button.openParentSidePeek.ariaLabel",defaultMessage:"Open parent in side peek"}),onClick:()=>{u().k({relationPointers:T,relatedPageStore:j,environment:w,from:"relation_property",peekMode:"side_peek"})},style:R.button,...e,children:[(0,s().j)(R.parentItemIcon),(0,y.jsx)("div",{style:R.parentTitle,children:L})]})}):null}},761408:(e,t,o)=>{o.d(t,{L:()=>a,y:()=>i});var n=()=>o(56366),r=()=>o(175116);function a(e){let{collectionStore:t,collectionContextStore:o,property:n}=e;return null!=o&&o.isMultiSourceView?t.getMappedProperty(n):n}function i(e){let{collectionStore:t,property:o}=e;const i=(0,r().Ks)();return(0,n().K8)((()=>a({collectionStore:t,collectionContextStore:i,property:o})),[t,i,o])}},769068:(e,t,o)=>{o.d(t,{g:()=>s});var n=o(296540),r=()=>o(401497),a=()=>o(738418),i=()=>o(554283),l=o(474848);function s(e){let{setIsHovered:t}=e;const[o,s]=(0,i().B)();(0,n.useEffect)((()=>{t(s)}),[s,t]);const c=(0,r().IS)((e=>({container:{display:"inline-flex",alignItems:"center"},icon:{width:14,fill:s?e.mediumIconColor:e.lightIconColor,marginLeft:5,marginTop:1}})),[s]);return(0,l.jsx)("div",{ref:o,style:c.container,children:(0,a().G)(c.icon)})}},795963:(e,t,o)=>{o.d(t,{Ge:()=>l,OQ:()=>r,aG:()=>s,yN:()=>i});var n=()=>o(864994);const r=160,a=120,i=120;function l(e){let{isMobile:t,stackPropertyLabelAndValue:o,isPropertyInPageDetails:l}=e;if(o||!l)return;const s=a/n().b*100;return t?i:`min(max(${s}%, ${a}px), ${r}px)`}function s(e){let{stackPropertyLabelAndValue:t}=e;return t?{variant:"hug-content"}:{variant:"fixed"}}},802975:(e,t,o)=>{o.d(t,{B:()=>g});o(16280),o(898992),o(354520);var n=()=>o(792071),r=()=>o(37165),a=()=>o(235191),i=()=>o(686526),l=()=>o(317909),s=()=>o(989423),c=()=>o(640868),d=()=>o(630116),u=()=>o(465741),p=()=>o(98205);function g(e){let{environment:t,module:o,sessionId:n,layoutStore:r,collectionSettingsStore:a,isCollectionEmpty:l,collectionContextStore:s,area:c,transaction:d,updateParentModule:u}=e;const g=s.collectionStore();if(!g)throw new Error("Could not find collection store");const f=r.getModules().form_conditional_modules??{},h=(0,p().Yg)({currentModule:o,nestedModules:f,includePlaceholders:!0}).formQuestionDescendants.filter((e=>e.id!==o.id)),y=s.normalizedSchemaStore.state;for(const i of h)m({environment:t,module:i,sessionId:n,layoutStore:r,isCollectionEmpty:l,collectionContextStore:s,collectionStore:g,area:c,transaction:d,schema:y,updateParentModule:!1});m({environment:t,module:o,sessionId:n,layoutStore:r,isCollectionEmpty:l,collectionContextStore:s,collectionStore:g,area:c,transaction:d,schema:y,updateParentModule:u}),i().os({collectionSettingsStore:a})}function m(e){let t,{environment:o,module:i,sessionId:p,layoutStore:g,isCollectionEmpty:m,collectionContextStore:f,collectionStore:h,area:y,transaction:v,updateParentModule:S,schema:b}=e;if("formQuestion"===i.type){if(t=d().c7.createChildStore(g,{table:r().lo,id:i.formQuestionId,spaceId:g.getSpaceId()??""}).getPropertyId(),!t)return}if(S?(0,c().U)({environment:o,position:{area:y,moduleId:i.id},layoutStore:g,sessionId:p,transaction:v}):l().applyOperation({transaction:v,store:g,operation:n().N4X.deleteModuleInArea({pointer:g.pointer,area:"form_conditional_modules",moduleId:i.id})}),t){var C;const e=null===(C=b[t])||void 0===C?void 0:C.type;m&&e&&"title"!==e&&a().BJ({environment:o,collectionStore:h,schema:b,property:t,transaction:v}),(0,s().u4)({environment:o,event:{eventName:"delete_form_question",eventProperties:(0,u().YA)({collectionContextStore:f,propertyId:t,questionId:i.id})}})}}},806401:(e,t,o)=>{o.d(t,{D:()=>u});var n=o(296540),r=()=>o(484714),a=()=>o(56366),i=()=>o(970013),l=()=>o(630053),s=()=>o(798880),c=()=>o(351360),d=()=>o(508496);function u(e){const t=function(){const e=(0,r().v3)();return(0,a().K8)((()=>{var t;return(0,l().Sf)({experimentService:d().default,actor:{table:s().oo,id:e.currentUser.id??""},spaceId:(null===(t=c().default.state.currentSpaceStore)||void 0===t?void 0:t.id)??""})}),[e.currentUser])}();return(0,n.useMemo)((()=>{var o;if(!t)return!1;if(!e)return!1;if(!i().nC(e))return!1;return Boolean(null===(o=e.permissions_data)||void 0===o?void 0:o.shared_by_enabled)}),[e,t])}},807831:(e,t,o)=>{o.d(t,{V:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("subItem",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.88642 2.43778C1.98215 2.3846 2.09567 2.35999 2.22362 2.35999C2.41846 2.35999 2.58374 2.42299 2.71309 2.55179C2.84789 2.67678 2.91386 2.84079 2.91386 3.03655C2.91386 3.161 2.90926 3.28545 2.90008 3.40989C2.8956 3.52687 2.89335 3.66669 2.89335 3.82952C2.89335 4.6672 2.99989 5.34012 3.20906 5.85192C3.42107 6.35987 3.76386 6.73052 4.23921 6.9683C4.72178 7.20285 5.37665 7.32288 6.20897 7.32288H10.9303L12.4002 7.41264L10.2433 5.44074L8.72396 3.8939C8.66786 3.83269 8.6225 3.76177 8.58753 3.68184L8.58532 3.67681C8.55515 3.59133 8.54022 3.50307 8.54022 3.41252C8.54022 3.22504 8.60443 3.06601 8.73414 2.94147C8.86699 2.81372 9.02934 2.74963 9.21678 2.74963C9.40179 2.74963 9.5677 2.81976 9.71223 2.95431L9.71419 2.95614L14.2523 7.49436C14.4062 7.63869 14.4871 7.81019 14.4871 8.00627C14.4871 8.20241 14.4062 8.37593 14.2528 8.52459L9.72696 13.0436C9.57465 13.191 9.40407 13.2698 9.21678 13.2698C9.03026 13.2698 8.86827 13.2086 8.73525 13.0858L8.73305 13.0838C8.60434 12.9551 8.54022 12.7943 8.54022 12.6069C8.54022 12.5163 8.55535 12.4281 8.58551 12.3426C8.61631 12.2554 8.66304 12.1796 8.72601 12.1166L10.2463 10.5689L12.3938 8.61275L10.9258 8.69663L6.14745 8.69651C4.516 8.69651 3.32454 8.32105 2.59311 7.55211C1.86303 6.77991 1.50604 5.55355 1.50604 3.89104C1.50604 3.68942 1.51062 3.50571 1.51983 3.34C1.52904 3.17413 1.54527 3.03558 1.56915 2.92552C1.58898 2.82668 1.62376 2.73465 1.67362 2.64989C1.72566 2.56142 1.79795 2.48982 1.88642 2.43778Z"})})},831566:(e,t,o)=>{o.d(t,{p:()=>a});var n=()=>o(317909),r=()=>o(724456);function a(e){const{environment:t,collectionStore:o,performTransaction:a}=e;return n().createAndCommit({userAction:"collectionViewActions.createSchemaUpdateTransaction",environment:t,canUndo:!0,perform:e=>{const n=o.getSchema(),i=a(e),l=o.getSchema();return(0,r().H)({environment:t,collectionStore:o,oldSchema:n,newSchema:l,transaction:e}),i}}).performResult}},832857:(e,t,o)=>{o.d(t,{FG:()=>y,Is:()=>h,Ix:()=>v,jD:()=>S,lF:()=>f});o(944114),o(898992),o(354520),o(672577),o(581454);var n=()=>o(289915),r=()=>o(792071),a=()=>o(500993),i=()=>o(183558),l=()=>o(534177),s=()=>o(317909),c=()=>o(909470),d=()=>o(978846),u=()=>o(640868),p=()=>o(33218),g=()=>o(508496),m=()=>o(802975);function f(e){const{environment:t,layoutStore:o,currentQuestionModule:n,area:r,property:a,filterValue:l,setModuleSelection:c,sessionId:u}=e;s().createAndCommit({userAction:"FormSelectProperty.handleAddConditionalLogic",environment:t,canUndo:!0,perform:e=>{if(!o.getModel())return;const s=(0,i().Ay)(),g=(0,i().Ay)(),m=function(e){var t,o;switch(e.type){case"select":return{operator:"enum_is",value:{type:"exact",value:null===(t=e.value)||void 0===t?void 0:t.value}};case"multi_select":return{operator:"enum_contains",value:{type:"exact",value:null===(o=e.value)||void 0===o?void 0:o.value}};case"checkbox":return{operator:"checkbox_is",value:{type:"exact",value:e.value}}}}(l);(0,p().UQ)({environment:t,transaction:e,layoutStore:o,position:{area:r,moduleId:n.id},updatedModule:{...n,conditionalGroups:[...n.conditionalGroups??[],{id:s,trigger:{property:a,filter:m},children:[]}]}});const f={id:g,type:"placeholder",parentModuleId:n.id,parentConditionalGroupId:s};(0,d().UQ)({environment:t,transaction:e,layoutStore:o,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:s,parentModuleId:n.id},module:f,sessionId:u,isPropertyCreation:!1}),c&&c({type:"existing_module",moduleId:g,isDragging:!1})}})}function h(e){var t;const{environment:o,layoutStore:n,module:r,conditionalGroupId:i,newValue:l}=e,c=(0,a().A)(r.id,n.getModules()),d={...r,conditionalGroups:null===(t=r.conditionalGroups)||void 0===t?void 0:t.map((e=>e.id===i?{...e,trigger:{...e.trigger,filter:l}}:e))};s().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.updateTriggerFilter",environment:o,canUndo:!0,perform:e=>{(0,p().UQ)({environment:o,transaction:e,layoutStore:n,position:{area:c.area,moduleId:r.id},updatedModule:d})}})}function y(e){const{environment:t,parentModule:o,groupId:n,layoutStore:a,collectionContextStore:i,isCollectionEmpty:l,sessionId:c}=e,d=a.getModules().form_conditional_modules??{};s().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.deleteConditionalGroup",environment:t,canUndo:!0,perform:e=>{var u,g;const f=null==a?void 0:a.getModel();if(!a||!f)return;const h=null===(u=o.conditionalGroups)||void 0===u?void 0:u.filter((e=>e.id!==n)),y=null===(g=o.conditionalGroups)||void 0===g?void 0:g.find((e=>e.id===n));if(void 0!==y){for(const o of y.children??[]){const n=d[o];n&&("placeholder"!==n.type?(0,m().B)({environment:t,module:n,sessionId:c,transaction:e,layoutStore:a,collectionContextStore:i,collectionSettingsStore:i.settingsStore,isCollectionEmpty:l,area:"form_conditional_modules",updateParentModule:!1}):s().applyOperation({transaction:e,store:a,operation:r().N4X.deleteModuleInArea({pointer:a.pointer,area:"form_conditional_modules",moduleId:o})}))}(0,p().UQ)({environment:t,transaction:e,layoutStore:a,position:{area:Object.keys(d).includes(o.id)?"form_conditional_modules":"form_layout_schema",moduleId:o.id},updatedModule:{...o,conditionalGroups:h}})}}})}function v(e){const{environment:t,layoutStore:o,formQuestionModule:n,sessionId:r}=e;s().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.deleteConditionalGroup",environment:t,canUndo:!0,perform:e=>{(0,u().U)({environment:t,transaction:e,layoutStore:o,position:{area:"form_conditional_modules",moduleId:n.id}}),(0,d().UQ)({environment:t,transaction:e,layoutStore:o,position:{area:"form_layout_schema",type:"area_relative",location:"end_moveable"},module:{...n,parentModuleId:void 0,parentConditionalGroupId:void 0},sessionId:r,isPropertyCreation:!1})}})}function S(e){const{questionModulesToVisit:t,draftSubmissionPageStore:o,collectionSchema:r,nestedQuestionModules:a,intl:i}=e,s=[],d=o.getModel();if(!d)return[];for(const p of t){s.push(p);const e=p.conditionalGroups;if(e)for(const t of e){var u;const e=t.trigger;if(!(0,n().ts)({filter:e.filter,property:e.property,propertyMapping:void 0,context:{schema:r,userId:void 0,userTimeZone:"",userStartOfWeek:0,relativeVariableResult:void 0,currentPageInRelatedCollection:void 0,intl:i,collectionFeatureGates:(0,c().i)()},depth:0})({block:d,getRecordModel:o.getRecordModel,propertyMapping:void 0,resultCache:new Map,regExpCache:new Map,experimentService:g().default,formulasModule:void 0}))continue;const p=null===(u=t.children)||void 0===u?void 0:u.map((e=>{const t=a[e];if(t&&"formQuestion"===t.type)return t})).filter(l().O9);if(!p||0===p.length)continue;const m=S({questionModulesToVisit:p,draftSubmissionPageStore:o,collectionSchema:r,nestedQuestionModules:a,intl:i});s.push(...m)}}return s}},843141:(e,t,o)=>{o.d(t,{E:()=>i});var n=()=>o(534177),r=()=>o(989423),a=()=>o(476492);function i(e,t,o){var i,l,s;let c="page_properties";const d=(0,a().sl)(t);switch(d.view_type){case void 0:case"page":case"table":c="table";break;case"list":c="list";break;case"gallery":c="gallery";break;case"board":c="board";break;case"calendar":c="calendar";break;case"timeline":c="timeline";break;case"chart":case"form_editor":case"feed":case"map":case"chat":case"custom":break;default:(0,n().HB)(d.view_type)}const u={...o,collection_id:null==t||null===(i=t.collectionStore())||void 0===i?void 0:i.id,collection_view_id:null==t||null===(l=t.collectionViewStore())||void 0===l?void 0:l.id,collection_view_block_id:null==t||null===(s=t.collectionViewBlockStore())||void 0===s?void 0:s.id,from:c};r().vd(e,"copy_property",u)}},846156:(e,t,o)=>{o.d(t,{F:()=>r});var n=()=>o(989423);function r(e,t){n().vd(e,"relation_reorder",t)}},864994:(e,t,o)=>{o.d(t,{b:()=>a,g:()=>i});var n=()=>o(548821),r=()=>o(154807);const a=r().YG;function i(e){let{environment:t,layoutArea:o,moduleType:i,pageViewBlockContext:l}=e;return("page_main"===o||"views_main_tab_modules"===o)&&"properties"===i||"properties"===i&&"page_details"===o&&(0,r().Wi)({environment:t,isInPeek:l===n().Rr.PeekView})>=a}},870578:(e,t,o)=>{o.d(t,{N:()=>f,k:()=>m});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577);var n=()=>o(584262),r=()=>o(970013),a=()=>o(713998),i=()=>o(921940),l=()=>o(562800),s=()=>o(351360),c=()=>o(508496),d=()=>o(712505),u=()=>o(630116),p=()=>o(727395),g=()=>o(435009);function m(e){let{relationPointers:t,relatedPageStore:o,environment:r,from:a,peekMode:c,openInNew:m}=e;const{mainEditorCurrentBlockStore:f}=s().default.state;if(!f)return;const h=t.find((e=>e.id===o.id));if(!h)return;let y;if(m){const e=u().Bv.createChildStore(f,h),t=e.getModel(),o=l().E2(r,e);y=(0,i().A)({pageId:h.id,pageModel:t,baseUrl:o,pageVisitSource:n().y8.MentionInPage})}else{const e=f.getModel(),t=l().E2(r,f);y=(0,i().A)({pageId:f.id,pageModel:e,baseUrl:t,peekViewBlockId:h.id,peekMode:(0,d().getUrlParamFromPeekMode)("full_page"===c?void 0:c??d().default.state.mode),pageVisitSource:n().y8.MentionInPage}),(0,p()._)(r,{from:a,meta_click:Boolean(m)})}g().oo({environment:r,url:y,openInNew:m})}async function f(e){var t,o;const{update:n,environment:i,store:l,collectionStore:d,propertySchema:p}=e,g=l.state.isOpen?l.state:null,m=new Set(n.oldValues),f=n.newValues.filter((e=>!m.has(e)));if(!c().default.checkGate({gateName:"relation_two_way_limit_of_1_add_relation_confirmation_dialog"}))return!1;const h=s().default.state.currentUserSettingsStore;if(Boolean(null==h?void 0:h.getSettingsStore().getKeyStore("relation_limit_confirmation_dialog_dismissed_at").getValue()))return!1;if(1!==f.length||!g)return!1;const y=g.property,v=(null===(t=g.collectionContextStore)||void 0===t?void 0:t.collectionViewStore())||(null==d||null===(o=d.getParentBlockStore())||void 0===o?void 0:o.getCollectionViewStores()[0]);if(!d||!v||!p)return!1;const S=await async function(e){const{collectionStore:t,property:o,environment:n,targetCollectionStore:a}=e,i=t.getSchema()[o];if(!i||"relation"!==i.type)return!1;const l=r().Nv(i),s=i.property;if(!l||!s)return!1;const c=a??new(u().md)(n,l);await c.load();const d=c.getSchema();if(!(0,r().rd)({propertySchema:i,property:o,sourceCollectionId:t.id,targetCollectionSchema:d}))return!1;const p=d[s];return!(!p||"relation"!==p.type)&&Boolean(p.limit)}({collectionStore:d,property:y,environment:i});if(!S)return!1;const b=await async function(e){const{collectionStore:t,relationPointer:o,environment:n,property:r}=e,i=new(u().Bv)(n,o);await i.load();const l=t.getSchema()[r];if(!l||"relation"!==l.type)return;const s=l.property;if(!s)return;const c=i.getPropertyValue(s);if(!c)return;const[d]=a().n(c);return d}({collectionStore:d,relationPointer:f[0],property:y,environment:i});if(!b)return!1;const C=new(u().Bv)(i,b);await C.load();return{blockWithExistingRelationTitle:C.getPropertyValue("title"),currentBlockTitle:g.store.getPropertyValue("title"),update:n,canAccessBlockWithExistingRelation:C.canRead()}}},880298:(e,t,o)=>{o.d(t,{r:()=>m});var n=o(296540),r=()=>o(401497),a=()=>o(372160),i=()=>o(677195),l=()=>o(53528),s=()=>o(931075),c=()=>o(959013),d=()=>o(534177),u=()=>o(284371),p=()=>o(425497),g=o(474848);function m(e){const{verificationValue:t,fontSize:o=p().Mi}=e,m=(0,c().tz)(),f=(0,n.useMemo)((()=>s().B2(t)),[t]),h=f.type,y=(0,r().IS)((e=>({icon:{width:"expired"===h?8:14,height:"expired"===h?9:14,fill:"verified"===h?e.blueColor:e.mediumIconColor},caption:{fontVariantNumeric:"normal",fontWeight:u().Wy.regular,color:e.regularTextColor,textTransform:"none",letterSpacing:0,marginLeft:6,marginRight:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:o,lineHeight:p().$g},expiredIconContainer:{width:14,height:14,borderRadius:6,border:"1px dashed",borderColor:e.mediumIconColor,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0}})),[h,o]);if("none"===h)return null;let v=null,S=null;const b=y.caption;switch(h){case"verified":v=(0,a().E)({...y.icon}),S=f.isIndefinite?(0,g.jsx)(c().sA,{defaultMessage:"Verified",id:"VerificationPropertyButton.verifiedIndefinitely"}):(0,g.jsx)(c().sA,{defaultMessage:"Until {date}",id:"VerificationPropertyButton.verifiedUntil",values:{date:l().OH({dateTime:f.dateTimeRange.end,intl:m})}});break;case"expired":v=(0,g.jsx)("div",{style:y.expiredIconContainer,children:(0,i().R)({...y.icon})}),S=(0,g.jsx)(c().sA,{defaultMessage:"Expired {timeFromMoment}",id:"VerificationPropertyButton.expired.text",values:{timeFromMoment:s().F7(f.dateTimeRange.end.setLocale(m.locale))}});break;default:(0,d().HB)(h)}return(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[v,(0,g.jsx)("div",{style:b,children:S})]})}},886680:(e,t,o)=>{o.d(t,{B2:()=>j,zP:()=>C,EI:()=>P,UY:()=>_,w_:()=>x,lA:()=>w,lh:()=>k,Kc:()=>M,F1:()=>A,NN:()=>T,br:()=>R,pi:()=>b});o(898992),o(737550);var n=()=>o(584262),r=()=>o(443239),a=()=>o(970013),i=()=>o(713998);o(296540);const l={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M4.485 8.86V5.369l4.073 4.073a.625.625 0 0 0 .884-.884L5.369 4.485H8.86a.625.625 0 0 0 0-1.25h-5a.625.625 0 0 0-.625.625v5a.625.625 0 1 0 1.25 0m10.146 6.655-4.07-4.07a.625.625 0 1 1 .884-.884l4.07 4.07V11.14a.625.625 0 1 1 1.25 0v5c0 .345-.28.625-.625.625h-5a.625.625 0 1 1 0-1.25z"})},s=(0,o(340498).wt)("arrowExpandDiagonal",l);var c=()=>o(415566),d=()=>o(177256),u=()=>o(72135),p=()=>o(919709),g=()=>o(496603),m=()=>o(534177),f=()=>o(939768),h=()=>o(720665),y=()=>o(41459),v=()=>o(492414),S=()=>o(972435);function b(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function C(e){switch(e){case y().j.Table:return"table";case y().j.Board:return"board";case y().j.ListView:return"list";case y().j.GalleryView:return"gallery";case y().j.Relation:case y().j.RelationSection:return"relation_section";case y().j.Timeline:return"timeline";case y().j.Calendar:return"calendar";case y().j.Page:return"page_properties";case y().j.CompactPage:return"compact_page";case y().j.Mini:return"mini_peek";case y().j.FormEditor:case y().j.FormViewer:case y().j.PropertyModule:return"property_module";default:(0,m().HB)(e)}}function x(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function _(e){const{store:t,property:o,propertySchema:r}=e,a=null==r?void 0:r.type;if("title"===a)return(0,v().Ay)({store:t,fullyQualified:!1,pageVisitSource:n().y8.LinkInPage});{const e=t.getPropertyValue(o);return i().UY(a,e)}}function M(e){let t=(0,p().k4p)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=f().qg(t),n=o.host;if(o.protocol&&n||(o=f().qg(`http://${t}`),n=o.host),!n)return{domain:void 0,restOfUrl:void 0};n&&(n=n.replace(/^www./i,""));const r=t.toLowerCase().indexOf(n.toLowerCase());if(-1===r)return{domain:void 0,restOfUrl:void 0};n=t.slice(r,r+n.length);return{domain:n,restOfUrl:t.slice(r+n.length)}}function k(e){const{numberValue:t,numberFormat:o,numberShowAs:n}=e;if(!(g().yr(t)||h().pN(t)||"bar"!==(null==n?void 0:n.type)&&"ring"!==(null==n?void 0:n.type))){const e=S().A.getIntl();return"percent"===o?u().ZV(t,"percent",e):`${t} / ${n.maxValue}`}}function A(e){const{property:t,collectionStore:o}=e,n=o.isSyncedCollection();return Boolean(n)&&(0,r().u)(t)}function w(e,t){switch(e){case"side_peek":return{icon:d().A,tooltip:S().A.formatMessage(I.openInSidePeekTooltip),caption:t?"":S().A.formatMessage(I.openAsPageTitle)};case"center_peek":return{icon:c().q,tooltip:S().A.formatMessage(I.openInCenterPeekTooltip),caption:t?"":S().A.formatMessage(I.openAsPageTitle)};case"full_page":return{icon:s,tooltip:S().A.formatMessage(I.openAsPageTooltip),caption:t?"":S().A.formatMessage(I.openAsPageTitle)};default:(0,m().HB)(e)}}const I=(0,o(959013).YK)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function P(e){const t=e.getSchema();if(t)for(const[n,r]of Object.entries(t)){var o;if(r&&"text"===r.type&&"summarize"===(null===(o=r.ai_inference)||void 0===o?void 0:o.type)){const t=e.getPropertyValue(n);if(t)return t}}}function R(e){const{store:t,additionalStores:o,collectionContextStore:n}=e,r=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==n?void 0:n.contextType)||!r)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==r.id}))}function T(e){return e===y().j.FormEditor||e===y().j.FormViewer}function j(e){return Boolean(e&&!a().dA.includes(e.type))}},913687:(e,t,o)=>{o.d(t,{A:()=>n});const n=(0,o(959013).YK)({inputPlaceholder:{defaultMessage:"Property name",id:"database.viewSettings.propertyTab.propertyName"},autofillOffLabel:{defaultMessage:"Off",id:"database.viewSettings.propertyTab.autofillOffLabel"},autofillOnLabel:{defaultMessage:"On",id:"database.viewSettings.propertyTab.autofillOnLabel"},keptUpToDateWithNotionAITooltip:{defaultMessage:"Auto-updated by AI",id:"database.tableHeaderCell.tooltipAiAutofillDescription"},buttonPropertyErrorTooltip:{defaultMessage:"Button property has an error",id:"database.tableHeaderCell.tooltipButtonPropertyError"}})},937199:(e,t,o)=>{o.d(t,{LH:()=>a,Op:()=>r,bi:()=>s,sf:()=>l,v$:()=>i});o(16280);var n=o(296540);const r=(0,n.createContext)(null);function a(){const e=(0,n.useContext)(r);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function i(){return(0,n.useContext)(r)}r.displayName="BaseLayoutEditorContext";const l=(0,n.createContext)(null);function s(){const e=(0,n.useContext)(l);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}l.displayName="PageLayoutEditorContext"},961529:(e,t,o)=>{o.d(t,{a:()=>a});var n=()=>o(645873);const r=new(n().O2)("PropertyModulePersonProperty",(async()=>await Promise.all([o.e(23806),o.e(74562),o.e(59794),o.e(6463),o.e(82120)]).then(o.bind(o,444823)))),a=(0,n()._h)(r,(e=>e.PersonPropertyModule))},963912:(e,t,o)=>{o.d(t,{A:()=>_,O:()=>b});o(581454),o(296540);var n=()=>o(56366),r=()=>o(401497),a=()=>o(584262),i=()=>o(987555),l=()=>o(449552),s=()=>o(234194),c=()=>o(959013),d=()=>o(100622),u=()=>o(906719),p=()=>o(565049),g=()=>o(108944),m=()=>o(630116),f=()=>o(898808),h=()=>o(614505),y=o(474848);const v=(0,c().YK)({shared:{defaultMessage:"Shared",id:"CollectionLocation.SidebarTitle.sectionShared"},private:{defaultMessage:"Private",id:"CollectionLocation.SidebarTitle.sectionPrivate"},noAccess:{defaultMessage:"No access",id:"CollectionLocation.noAccess"},emptyCollectionName:{id:"CollectionLocation.EmptyCollectionName",defaultMessage:"Untitled"}});function S(e){return(0,y.jsx)("span",{style:{paddingTop:4,paddingLeft:4,...e.style},children:"/"})}function b(e){const{collectionForLocationStore:t,collectionContextStore:o}=e,a=(0,c().tz)(),u=(0,n().K8)((()=>{const e=g().fU(t);return e.reverse(),e}),[t]),{collectionIsInPrivate:p,collectionIsInRestricted:m,collectionIsInShared:f}=(0,n().K8)((()=>{const e=o.groupsForTypedDatabasesStore.state;return{collectionIsInPrivate:Boolean(null==e?void 0:e.privateDatabases[t.id]),collectionIsInRestricted:Boolean(null==e?void 0:e.restrictedDatabases[t.id]),collectionIsInShared:Boolean(null==e?void 0:e.sharedDatabases[t.id])}}),[o.groupsForTypedDatabasesStore,t.id],{useDeepEqual:!0}),h=(0,n().K8)((()=>(0,d().O4)({theme:"light"})),[]),b=(0,r().IS)((e=>({textStyle:{color:h.popoverWaxPaperBackground,fontWeight:"normal"},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:h.accentColors.gray[100],borderRadius:3}})),[h]),x=p||m||f;let _=null;return p?_=(0,y.jsxs)(y.Fragment,{children:[(0,l().g)(b.shareTypeIndicatorIcon),(0,y.jsx)("span",{children:a.formatMessage(v.private)})]}):m?_=(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{style:{...b.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,i().T)({...b.shareTypeIndicatorIcon,margin:0,background:void 0})}),(0,y.jsx)("span",{children:a.formatMessage(v.noAccess)})]}):f&&(_=(0,y.jsxs)(y.Fragment,{children:[(0,s().M)(b.shareTypeIndicatorIcon),(0,y.jsx)("span",{children:a.formatMessage(v.shared)})]})),(0,y.jsxs)("div",{style:{display:"flex"},children:[x&&(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4,...b.textStyle},children:[_,!m&&(0,y.jsx)(S,{style:{marginTop:-4,...b.textStyle}})]}),u.length>3?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(C,{ancestorStore:u[0],showDivider:!0}),(0,y.jsx)("span",{style:{paddingLeft:2,paddingTop:4,...b.textStyle},children:"..."}),(0,y.jsx)(S,{style:b.textStyle}),!(p||f)&&(0,y.jsx)(C,{ancestorStore:u[u.length-2],showDivider:!0}),(0,y.jsx)(C,{ancestorStore:u[u.length-1],showDivider:!1})]}):u.map(((e,t)=>(0,y.jsx)(C,{ancestorStore:e,showDivider:t<u.length-1},e.id)))]})}function C(e){const{ancestorStore:t,showDivider:o}=e,a=(0,n().K8)((()=>(0,d().O4)({theme:"light"})),[]),i=(0,r().IS)((e=>({teamIconStyle:{background:e.popoverWaxPaperBackground},textStyle:{color:a.popoverWaxPaperBackground,fontWeigth:"normal"}})),[a]);return t instanceof m().h4?(0,y.jsxs)("div",{style:{display:"flex"},children:[(0,y.jsx)(p().A,{store:t,showDivider:!1,maxWidth:160,iconSize:16,iconStyle:i.teamIconStyle,titleStyle:i.textStyle}),o&&(0,y.jsx)(S,{style:i.textStyle})]}):(0,y.jsxs)("div",{style:{display:"flex"},children:[(0,y.jsx)(u().A,{store:t,showDivider:!1,emojiSize:18,maxWidth:160,titleStyle:i.textStyle},t.id),o&&(0,y.jsx)(S,{style:i.textStyle})]})}function x(e){const{teamStore:t,collectionStore:o}=e,a=(0,n().K8)((()=>o.getIcon()),[o]),i=(0,r().IS)((e=>({miniTeamSpaceIcon:{background:e.home.tile.background,position:"absolute",bottom:-3,right:-3,borderRadius:2},teamSpaceIcon:{borderRadius:2,marginRight:2}})),[]);return a?(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative",marginRight:2},children:[(0,y.jsx)(h().A,{icon:a,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),(0,y.jsx)(f().x,{store:t,disabled:!0,size:12,style:i.miniTeamSpaceIcon},"icon")]}):(0,y.jsx)(f().x,{store:t,disabled:!0,size:20,style:i.teamSpaceIcon},"icon")}const _=function(e){const{collectionContextStore:t,collectionForLocationStore:d}=e,u=(0,o(484714).v3)(),p=(0,c().tz)(),{collectionIsInPrivate:m,collectionIsInRestricted:f,collectionIsInShared:S}=(0,n().K8)((()=>{const e=t.groupsForTypedDatabasesStore.state;return{collectionIsInPrivate:Boolean(null==e?void 0:e.privateDatabases[d.id]),collectionIsInRestricted:Boolean(null==e?void 0:e.restrictedDatabases[d.id]),collectionIsInShared:Boolean(null==e?void 0:e.sharedDatabases[d.id])}}),[t.groupsForTypedDatabasesStore,d.id],{useDeepEqual:!0}),b=(0,n().K8)((()=>g().Uo(d)),[d]),C=(0,n().K8)((()=>(0,o(921855).r4)(d.getName(),d)??p.formatMessage(v.emptyCollectionName)),[d,p]),_=(0,n().K8)((()=>d.getIcon()),[d]),M=(0,n().K8)((()=>{var e;return null===(e=t.collectionViewBlockStore())||void 0===e?void 0:e.id}),[t]),k=(0,n().K8)((()=>{let e=a().y8.LocationProperty;return M?((0,o(186445).sj)(M)&&(e=t.isInHomeWidgetStore.state?a().y8.PersonalHomeTileTasks:a().y8.PersonalHomePageTasks),e):e}),[M,t]),A=(0,r().IS)((e=>({button:{color:e.accentColors.gray[800],cursor:"pointer"},inner:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:e.fill.lightGraySecondary,borderRadius:3},miniShareTypeIndicatorIcon:{position:"absolute",bottom:-3,right:-3,width:12,height:12,color:e.mediumIconColor,backgroundColor:e.fill.grayPrimary,borderRadius:3,paddingTop:1,paddingBottom:1},collectionTitleTextStyle:{lineHeight:1,fontWeight:o(284371).Wy.medium,marginTop:2,marginLeft:2,whiteSpace:"nowrap",...(0,o(886680).w_)(e)}})),[]);if(!(b||m||f||S))return null;const w=m||f||S;let I=(0,s().M)(A.shareTypeIndicatorIcon);return _?I=(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},children:[(0,y.jsx)(h().A,{icon:_,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),m?(0,l().g)(A.miniShareTypeIndicatorIcon):(0,s().M)(A.miniShareTypeIndicatorIcon)]}):f?I=(0,y.jsx)("div",{style:{...A.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,i().T)({...A.shareTypeIndicatorIcon,margin:0,background:void 0})}):m&&(I=(0,l().g)(A.shareTypeIndicatorIcon)),(0,y.jsx)(o(704152).A,{hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},style:A.button,onClick:e=>{const t=d.getParentBlockStore();if(t){const n=(0,o(728611).Vr)(e);o(857783).uK({environment:u,store:t,pageVisitSource:k,openInNew:n})}},children:(0,y.jsxs)("div",{style:A.inner,children:[b&&(0,y.jsx)(x,{teamStore:b,collectionStore:d}),w&&I,(0,y.jsx)("div",{style:A.collectionTitleTextStyle,children:C})]})})}},991114:(e,t,o)=>{o.d(t,{C:()=>i});var n=()=>o(56366),r=()=>o(508496);const a=1*o(720665).Xb;function i(){return(0,n().K8)((()=>r().default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs")??a),[])}},996494:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{editMode:void 0,store:void 0}}cloneState(){return o(496603).o8(this.state)}}const r=new n}}]);