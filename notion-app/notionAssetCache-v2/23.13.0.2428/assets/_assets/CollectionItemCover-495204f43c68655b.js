"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[79883],{513439:(e,t,r)=>{r.d(t,{CollectionItemCover:()=>A,t:()=>O});r(944114),r(898992),r(354520),r(672577),r(581454);var o=r(296540),n=()=>r(807005),i=()=>r(484714),l=()=>r(56366),a=()=>r(401497),d=()=>r(496506),s=()=>r(700500),c=()=>r(713998),v=()=>r(304740),y=()=>r(591779),u=()=>r(179034),m=()=>r(534177),h=()=>r(519839),p=()=>r(963575),g=()=>r(494043),S=()=>r(62856),C=()=>r(630116),x=()=>r(344051),b=()=>r(816559),f=()=>r(298697),k=()=>r(360083),F=()=>r(794959),j=r(474848);function B(e){return"number"==typeof e}function A(e){const{store:t,coverFormat:r,coverContentFadedOverlay:n,coverContentFadedOverlayStyle:a,coverHeight:c,coverWidth:v,coverAspectFormat:m,coverSizeFormat:p,coverPosition:g,imageCoverWrapStyle:S,onLoadProxiedImage:x,showEmptyGalleryCover:b,showLoadingShimmer:f,loadingShimmerStyle:k,emptyGalleryCoverStyle:F,style:B,rendererBlockStyle:A,contentWrapStyle:P,renderAdditionalBlocks:W=!1,isInHomeWidget:w,variant:L,startBlockId:H}=e,{ThemeStore:G}=(0,i().v3)();(0,y().$x)(null==r?void 0:r.type,((e,t)=>e!==t&&(x(),!0)));const R=(0,o.useCallback)((()=>W&&H?"table":"image"),[W,H]),z=(0,l().K8)((()=>{const e=H?(0,h().Oq)({rootStore:t,renderAdditionalBlocks:W,startBlockId:H,tableRenderMode:R()}):(0,h().aK)({rootStore:t,renderAdditionalBlocks:W,theme:G.state.mode});return e.image?e.image:!(f&&0===e.blockIds.length&&!e.isDefined)&&e.blockIds}),[G,t,W,H,f,R]),O=new(d().default)((()=>{const e=(0,h().Oq)({rootStore:t,renderAdditionalBlocks:W,startBlockId:H,tableRenderMode:R()});return e.image?void 0:e.blockIds}),{debugName:"restrictedContentStore"}),D=new(d().default)((()=>{const e=[];if(Array.isArray(z)){let r=0;for(;r<z.length;){let o=z[r],n=C().Bv.createChildStore(t,{table:u().ev,id:o});if(n.getType()===s().xd.numberedList){const i=[{blockId:o,idx:1}],l=[{id:o,format:void 0,depth:i.length-1,index:i[0].idx}];for(r+=1;r<z.length&&(o=z[r],n=C().Bv.createChildStore(t,{table:u().ev,id:o}),n.getType()===s().xd.numberedList);){{const e=n.getParentId();if(n.getParentId()===i[i.length-1].blockId)i.push({blockId:o,idx:1});else{let t=i[i.length-1].idx;for(;i.length>0&&i[i.length-1].blockId!==e;)t=i[i.length-1].idx,i.pop();i.push({blockId:o,idx:t+1})}l.push({id:o,format:void 0,depth:i.length-1,index:i[i.length-1].idx})}r+=1}e.push(l)}else r+=1}}return e}),{debugName:"numberedListsStore"});return"page_cover"===r.type?(0,j.jsx)(U,{store:t,coverHeight:c,coverSizeFormat:p,imageCoverWrapStyle:S,coverWidth:v,onLoadProxiedImage:x,style:B,variant:L,coverAspectFormat:m,coverPosition:g,showEmptyGalleryCover:b,emptyGalleryCoverStyle:F}):"page_content"===r.type?(0,j.jsx)(I,{coverData:z,restrictedContentStore:O,renderAdditionalBlocks:W,numberedListsStore:D,store:t,coverHeight:c,coverSizeFormat:p,coverContentFadedOverlay:n,coverContentFadedOverlayStyle:a,contentWrapStyle:P,coverPosition:g,coverWidth:v,coverAspectFormat:m,isInHomeWidget:w,loadingShimmerStyle:k,showEmptyGalleryCover:b,emptyGalleryCoverStyle:F,variant:L,onLoadProxiedImage:x,imageCoverWrapStyle:S,style:B,rendererBlockStyle:A}):"property"===r.type?(0,j.jsx)(N,{store:t,coverHeight:c,coverSizeFormat:p,imageCoverWrapStyle:S,onLoadProxiedImage:x,coverWidth:v,style:B,variant:L,coverAspectFormat:m,coverPosition:g,showEmptyGalleryCover:b,emptyGalleryCoverStyle:F,property:r.property},r.property):null}function I(e){const{coverData:t,restrictedContentStore:r,numberedListsStore:o,renderAdditionalBlocks:n,store:i,coverHeight:l,coverSizeFormat:a,coverContentFadedOverlay:d,coverContentFadedOverlayStyle:s,contentWrapStyle:c,coverPosition:v,coverWidth:y,coverAspectFormat:u,isInHomeWidget:m,loadingShimmerStyle:h,showEmptyGalleryCover:p,emptyGalleryCoverStyle:g,variant:S,onLoadProxiedImage:C,imageCoverWrapStyle:x,style:b,rendererBlockStyle:f}=e;return!1===t?(0,j.jsx)(D,{coverHeight:l,coverSizeFormat:a,loadingShimmerStyle:h}):t?(0,j.jsx)(W,{coverData:t,restrictedContentStore:r,renderAdditionalBlocks:n,store:i,coverHeight:l,coverSizeFormat:a,coverContentFadedOverlay:d,coverContentFadedOverlayStyle:s,contentWrapStyle:c,coverPosition:v,coverWidth:y,coverAspectFormat:u,isInHomeWidget:m,showEmptyGalleryCover:p,emptyGalleryCoverStyle:g,variant:S,onLoadProxiedImage:C,imageCoverWrapStyle:x,style:b,rendererBlockStyle:f,numberedListsStore:o}):p?(0,j.jsx)(O,{coverHeight:l,coverSizeFormat:a,emptyGalleryCoverStyle:g}):null}function P(e){const{store:t,renderAdditionalBlocks:r,rendererBlockStyle:o,blockId:i,blockIdsToRender:s,restrictedContentStore:c,numberedListsStore:v}=e,y=(0,a().IS)((e=>({renderer:{fontSize:12,opacity:.8,pointerEvents:"none",...o}})),[o]),m=C().Bv.createChildStore(t,{table:u().ev,id:i}),h=(0,l().K8)((()=>m.getType()),[m]),p=(0,l().K8)((()=>{const e="table_row"===h?m.getParentBlockStore():m;return r&&void 0!==h?e&&(0,F().F)({store:e,restrictedBlockIds:s,tableRenderMode:"table"}):(0,x().B)(m)}),[r,h,m,s]),S=new(d().default)((()=>({depth:0,numberedListBlockIdsWithFormat:V(i,v)})),{debugName:"numberedListCounterStore"}),b=(0,l().K8)((()=>(0,g().BN)(m)),[m]);return p?(0,j.jsx)(n().v,{value:c,children:(0,j.jsx)(p,{store:m,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,hideContent:b,style:y.renderer,isQuickFind:!0,numberedListCounterStore:S})},i):null}function W(e){const{coverData:t,restrictedContentStore:r,numberedListsStore:o,renderAdditionalBlocks:n,store:d,coverHeight:s,coverSizeFormat:c,coverContentFadedOverlay:v,coverContentFadedOverlayStyle:y,contentWrapStyle:u,coverPosition:m,coverWidth:h,coverAspectFormat:p,isInHomeWidget:g,showEmptyGalleryCover:S,emptyGalleryCoverStyle:C,variant:x,onLoadProxiedImage:f,imageCoverWrapStyle:F,style:B,rendererBlockStyle:A}=e,I=(0,i().v3)(),W=(0,a().DP)(),H=(0,l().K8)((()=>({contentWrapStyle:_(x,I,W,s,c,v,u,g),coverContentFadedOverlay:T(W,y),imageBox:{...L(),...q({renderCollectionImage:!0},x,W,s,c),...R(),objectPosition:`center ${100*(1-w(d,m))}%`},imageCoverWrap:z(s,c,F),proxiedImageBox:{...L(B),...q({renderCollectionImage:!1},x,W,s,c),...R(p),objectPosition:`center ${100*(1-w(d,m))}%`}})),[x,I,W,s,m,c,v,y,p,d,B,u,g,F]),D=(0,l().O$)(r),K=(0,l().K8)((()=>t&&Array.isArray(t)?t.filter((e=>!D||D.includes(e))):[]),[t,D]),E=(0,l().K8)((()=>{var e;return n&&d.isCollectionView()&&!(null===(e=d.getModel())||void 0===e?void 0:e.hasWikiBlockUri())}),[n,d]);return Array.isArray(t)?t.length>0?(0,j.jsxs)("div",{style:H.contentWrapStyle,children:[D?t.filter((e=>D.indexOf(e)>=0)).map((e=>(0,j.jsx)(P,{store:d,renderAdditionalBlocks:n,rendererBlockStyle:A,blockId:e,blockIdsToRender:K,restrictedContentStore:r,numberedListsStore:o},e))):t.map((e=>(0,j.jsx)(P,{store:d,renderAdditionalBlocks:n,rendererBlockStyle:B,blockId:e,blockIdsToRender:K,restrictedContentStore:r,numberedListsStore:o},e))),v&&(0,j.jsx)("div",{style:H.coverContentFadedOverlay})]}):S?(0,j.jsx)(O,{coverHeight:s,coverSizeFormat:c,emptyGalleryCoverStyle:C??H.contentWrapStyle}):null:E?(0,j.jsxs)("div",{style:H.contentWrapStyle,children:[(0,j.jsx)(k().A,{url:t.url,onFinishedLoadingProxyUrl:e=>f(e),isAuthenticated:!0,permissionRecord:t.pointer,width:G(),render:(e,t)=>{if(t)return(0,j.jsx)(b().Ay,{style:H.imageBox,placeholderLoadedStyle:{display:"flex",justifyContent:"center",alignItems:"end"},src:t})}}),(0,j.jsx)($,{variant:x}),(0,j.jsx)("div",{style:H.coverContentFadedOverlay})]}):(0,j.jsxs)("div",{style:H.imageCoverWrap,children:[(0,j.jsx)(k().A,{url:t.url,onFinishedLoadingProxyUrl:e=>f(e),isAuthenticated:!0,permissionRecord:t.pointer,width:G(h,c),render:(e,t)=>{if(t)return(0,j.jsx)(b().Ay,{style:H.proxiedImageBox,src:t})}}),(0,j.jsx)($,{variant:x})]})}function w(e,t){if(B(t))return t;if(e.getFormatStore().isDefined()){const{page_cover_position:t,card_cover_position:r}=e.getFormat();if(B(r))return r;if(B(t))return t}return.5}function L(e){return e||{}}function H(e,t){if(e)return e;switch(t){case"large":return p().A.card.desktop.large.height;case"small":return p().A.card.desktop.small.height;default:return p().A.card.desktop.medium.height}}function G(e,t){return e||(0,h().rq)(t)}function R(e){return{objectFit:void 0===e?"cover":e}}function z(e,t,r){return{height:H(e,t),position:"relative",pointerEvents:"none",overflow:"hidden",...r}}function O(e){let{coverHeight:t,coverSizeFormat:r,emptyGalleryCoverStyle:o}=e;return(0,j.jsx)("div",{style:{height:H(t,r),...o}})}function D(e){let{coverHeight:t,coverSizeFormat:r,loadingShimmerStyle:o}=e;const n=(0,S().A)(!0,100,0);return(0,j.jsx)("div",{style:{height:H(t,r),...o},children:n?(0,j.jsx)(f().A,{paragraphs:[{lineHeight:12,lineMargin:6,sectionWidths:[100,100,50],repeat:1,sectionMargin:0}]}):null})}function K(e,t,r,o,n){const{ThemeStore:i}=t,l="dark"===i.state.mode,a=n?r.lightDividerColor:r.regularDividerColor;switch(e){case"default":return{};case"gallery":return{background:r.collectionGalleryPreviewCardCover,padding:"8px 8px 0",boxShadow:l?"transparent":`inset 0 -1px 0 0 ${a}`,...o};default:(0,m().HB)(e)}}function T(e,t){return{width:"100%",height:40,position:"absolute",bottom:0,left:0,background:`linear-gradient(to bottom, transparent, ${e.accentColors.gray[30]} 100%)`,...t}}function E(e,t){switch(e){case"default":return{border:`1px solid ${t.stroke.primary}`,borderTopLeftRadius:6,borderTopRightRadius:6,borderBottomRightRadius:6,borderBottomLeftRadius:6};case"gallery":return{borderRadius:0,borderTopLeftRadius:1,borderTopRightRadius:1};default:(0,m().HB)(e)}}function $(e){let{variant:t}=e;const r=(0,a().DP)();switch(t){case"default":return null;case"gallery":return(0,j.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:0,borderBottom:`1px solid ${r.regularDividerColor}`}});default:(0,m().HB)(t)}return null}function _(e,t,r,o,n,i,l,a){return{height:H(o,n),pointerEvents:"none",overflow:"hidden",position:i?"relative":"static",...K(e,t,r,l,a),...l}}function M(e,t,r,o){return{width:"100%",height:H(r,o),...E(e,t),objectPosition:"center"}}function U(e){let{store:t,coverHeight:r,coverSizeFormat:o,imageCoverWrapStyle:n,coverWidth:i,onLoadProxiedImage:d,style:s,variant:c,coverAspectFormat:v,coverPosition:y,showEmptyGalleryCover:u,emptyGalleryCoverStyle:m}=e;const h=(0,a().DP)(),p=(0,l().K8)((()=>{var e;return null===(e=t.getCover())||void 0===e?void 0:e.cover}),[t]),g=(0,l().K8)((()=>t.pointer),[t]),S=(0,l().K8)((()=>w(t,y)),[y,t]);return p?(0,j.jsxs)("div",{style:z(r,o,n),children:[(0,j.jsx)(k().A,{url:p,isAuthenticated:!0,permissionRecord:g,width:G(i,o),onFinishedLoadingProxyUrl:e=>d(e),render:(e,t)=>{if(t)return(0,j.jsx)(b().Ay,{style:{...L(s),...M(c,h,r,o),...R(v),objectPosition:`center ${100*(1-S)}%`},src:t})}}),(0,j.jsx)($,{variant:c})]}):u?(0,j.jsx)(O,{coverHeight:r,coverSizeFormat:o,emptyGalleryCoverStyle:{background:h.collectionGalleryPreviewCardCover,...m}}):null}function N(e){let{property:t,store:r,coverHeight:o,coverSizeFormat:n,imageCoverWrapStyle:i,onLoadProxiedImage:d,coverWidth:s,style:y,variant:u,coverAspectFormat:m,coverPosition:h,showEmptyGalleryCover:p,emptyGalleryCoverStyle:g}=e;const S=(0,a().DP)(),C=(0,l().K8)((()=>(0,c().pJ)(r.getPropertyValue(t)).find((e=>(0,v().rS)({url:e.url})))),[t,r]),x=(0,l().K8)((()=>r.pointer),[r]),f=(0,l().K8)((()=>w(r,h)),[h,r]);return C?(0,j.jsxs)("div",{style:z(o,n,i),children:[(0,j.jsx)(k().A,{onFinishedLoadingProxyUrl:e=>d(e),url:C.url,isAuthenticated:!0,permissionRecord:x,width:G(s,n),render:(e,t)=>{if(t)return(0,j.jsx)(b().Ay,{style:{...L(y),...M(u,S,o,n),...R(m),objectPosition:`center ${100*(1-f)}%`},src:t})}}),(0,j.jsx)($,{variant:u})]}):p?(0,j.jsx)(O,{coverHeight:o,coverSizeFormat:n,emptyGalleryCoverStyle:g}):null}function q(e,t,r,o,n){const{renderCollectionImage:i}=e;return{...M(t,r,o,n),objectPosition:"center center",...i&&{height:void 0,border:`1px solid ${r.lightDividerColor}`,borderBottom:"none",borderBottomLeftRadius:0,borderBottomRightRadius:0}}}function V(e,t){const r=t.state;for(const o of r)if(o.find((t=>t.id===e)))return o;return[]}}}]);