"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[38911],{6208:(t,e,n)=>{n.d(e,{L:()=>l,y:()=>s});var o=()=>n(56366),r=()=>n(798880),a=()=>n(959013),i=()=>n(351360),c=()=>n(630116);function s(t){const e=(0,a().tz)();return(0,o().K8)((()=>{const{currentSpaceStore:n}=i().default.state;if(!n||!t)return;return c().LU.createChildStore(n,{table:r().oo,id:t}).getDisplayName(e)}),[e,t])}function l(){const t=(0,a().tz)();return(0,o().K8)((()=>{const{currentUserStore:e}=i().default.state,n=null!=e&&e.isDefined()?e.getModel():void 0;return n?n.getDisplayName(t):void 0}),[t])}},42120:(t,e,n)=>{n.d(e,{Dl:()=>tt,U2:()=>G,Zk:()=>et,_R:()=>q,bE:()=>nt,c:()=>H,cJ:()=>$,eN:()=>Y,e_:()=>J,g4:()=>Q,qy:()=>X});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(803949),n(581454),n(737550);var o=()=>n(244641),r=()=>n(584262),a=()=>n(66689),i=()=>n(890409),c=()=>n(970013),s=()=>n(597777),l=()=>n(604995),d=()=>n(206267),u=()=>n(433847),p=()=>n(912720),m=()=>n(199378),f=()=>n(179034),S=()=>n(519831),v=()=>n(96689),g=()=>n(854150),y=()=>n(950914),_=()=>n(864779),C=()=>n(919709),k=()=>n(374562),w=()=>n(313892),b=()=>n(813297),h=()=>n(465364),A=()=>n(654062),D=()=>n(601734),I=()=>n(989423),V=()=>n(594794),T=()=>n(972435),P=()=>n(351360),B=()=>n(630116),x=()=>n(908447),O=()=>n(966759),R=()=>n(449506),F=()=>n(235191),E=()=>n(686526),M=()=>n(896628),z=()=>n(246826),K=()=>n(867201),U=()=>n(317909),W=()=>n(345913),N=()=>n(755199);const L="week";function q(t){var e;const{environment:n,transaction:o,tasksBlockStore:r,sprintsBlockStore:a}=t,i=null===(e=a.getFormat())||void 0===e?void 0:e.collection_pointer,c=r.getFormat().collection_pointer;if(!i||!c)return;const s=B().md.createChildStore(a,i),l=s.getRole()??"none";if(!(0,u().q_)(l,"editor"))return;s.getAutomationStores().some((t=>t.isCompleteSprintAutomation()))||j({environment:n,transaction:o,sprintCollectionStore:s,taskCollectionStore:B().md.createChildStore(r,c),sprintSettingsConfig:y().AL})}function j(t){const{environment:e,sprintSettingsConfig:n,transaction:o,sprintCollectionStore:r,taskCollectionStore:a}=t,i=r.getSpaceId(),c=(0,V().Z1)({environment:e,table:p().yB,spaceId:i}),s=(0,V().Z1)({environment:e,table:m().SC,spaceId:i});z().eC({environment:e,table:p().yB,inMemoryRecordCache:r.inMemoryRecordCache,value:{id:c,parent_id:r.id,parent_table:r.table,alive:!0,space_id:i,status:n.autoCompleteSprints?"active":"disabled",trigger:{id:d().JW(),type:"recurrence",recurrence:rt(n)},action_ids:[s]},transaction:o}),M().zA({stores:[r],update:{automation_ids:[...r.getFormat().automation_ids??[],c]},transaction:o}),z().eC({environment:e,table:m().SC,inMemoryRecordCache:r.inMemoryRecordCache,transaction:o,value:{id:s,parent_id:c,parent_table:p().yB,type:"complete_sprint",alive:!0,space_id:i,config:{sprint_collection:r.getSpaceShardedPointer(),task_collection:a.getSpaceShardedPointer(),complete_sprint_action:n.actionConfig.complete_sprint_action}}})}function J(t){const{environment:e,automationStore:n,transaction:o,newDuration:r,currentSprintBlockStore:a}=t;z().zv({store:n.getTriggerStore().getKeyStore("recurrence"),data:{interval:r},transaction:o}),Z({environment:e,transaction:o,automationStore:n,currentSprintBlockStore:a})}function Q(t){const{environment:e,automationStore:n,transaction:o,newWeekday:r,currentSprintBlockStore:a}=t;z().zv({store:n.getTriggerStore().getKeyStore("recurrence"),data:{weekdays:[r]},transaction:o}),Z({environment:e,transaction:o,automationStore:n,currentSprintBlockStore:a})}function G(t){const{environment:e,actionStore:n,automationStore:o,transaction:r,newAutocompleteStatus:a,currentSprintBlockStore:c}=t;z().zv({store:o,data:{status:a?"active":"disabled"},transaction:r}),Z({environment:e,transaction:r,automationStore:o,currentSprintBlockStore:c});const s=o.getParentPointer();if(!s||s.table!==S().Vl)return;const l=(0,I().ik)(e),d={automation_id:o.id,automation_actions:[{automation_action_id:n.id,type:"complete_sprint"}],automation_triggers:[{type:"recurrence"}],collection_id:s.id};a?(0,i().Ah)(l,d):(0,i().vN)(l,d)}function Z(t){const{automationStore:e,currentSprintBlockStore:n,transaction:r,environment:i}=t;if(!e.isActive())return;const c=e.getRecurrence();if(!c)return;const l=(0,_().Vv)(c);if(!l)return;const d=n.getPropertyValue(a().Hx.Dates);if(!d)return;const u=(0,C().Cok)(d)[0];if(!u||"daterange"!==u.type)return;const p=u.start_date,{start_date:m,end_date:f}=(0,_().Me)({currentSprintStartDate:p,sprintSchedule:l});z().zv({store:e.getTriggerStore().getKeyStore("recurrence"),data:{start_date:(0,s().Rz)(o().c9.fromISO(m).plus({minutes:1}).toJSDate())},transaction:r}),h().D5({store:n,propertyId:a().Hx.Dates,transaction:r,environment:i,type:"dateValue",dateValue:{type:"daterange",start_date:p,end_date:f}})}function X(t){const{transaction:e,newRemainingTasksBehavior:n,actionStore:o}=t;z().zv({store:o.getConfigStore(),data:{complete_sprint_action:n},transaction:e})}async function H(t){var e;const{appTemplatesSetupActions:n,appTemplatesSprintBoardActions:o,appConfigs:i}=await D().Aw.load(),{environment:c,collectionContextStore:s,from:l}=t,{currentSpaceViewStore:d}=P().default.state,u=s.collectionStore(),p=null==u?void 0:u.getParentBlockStore(),m=null==p?void 0:p.getParentStore(),S=null==u||null===(e=u.getFormat())||void 0===e?void 0:e.app_config_uri,y=S&&(0,w().lS)(i(),S);if(!u||!p||!m||!d||m.table!==v().NX&&m.table!==f().ev&&m.table!==g().yK||!y)return;const _=p.getFormat().app_id,C=_?await R().callApi({eventName:"getCollectionViewBlocksByAppId",environment:c,data:{spaceId:p.getSpaceId(),appId:_}}):void 0,b="success"===(null==C?void 0:C.type)&&C.data.result.length?C.data.result.map((t=>B().Bv.createChildStore(m,{table:f().ev,id:t.blockId,spaceId:p.getSpaceId()}))):[p];await ot({environment:c,taskCollectionStore:u,executeFn:()=>{const t=U().createAndCommit({userAction:"sprintSettingsActions.handleTurnOnSprints",environment:c,canUndo:!0,perform:t=>{const e=(0,k().We)(),r=n.applyTypedFeatures({environment:c,spaceViewStore:d,appParentStore:m,appUri:y.uri,features:[{type:"simple",featureUri:e.uri}],transaction:t,createOrModify:"modify",appCollectionViewBlockStores:b}),i=o.createSprintPage({environment:c,spaceViewStore:d,appParentStore:m,transaction:t,blockStores:r,creationEntryPoint:{type:"sprint_settings"}});if(E().os({collectionSettingsStore:s.settingsStore}),!i)return;const u=l?{feature:{id:a().yx.TaskToSprintRelation,from:l,type:"notion://projects/tasks_with_sprints_feature"}}:{};return(0,x().Z)({environment:c,collectionContextStore:s,from:"view_settings",property:a().yx.TaskToSprintRelation,property_type:"relation",is_suggested_property:!0,...u}),i}});t.serverCommitResult.then((()=>{const e=t.performResult;e&&K().Y({environment:c,store:e,pageVisitSource:r().y8.Create})}))}})}async function Y(t){const{environment:e,collectionContextStore:n,sprintSettingsContext:o,sprintBoardViewBlockIds:i}=t,{sprintCollectionStore:c,automationContext:s,currentCollectionViewBlockStore:l,sprintCollectionViewBlockStore:d,taskCollectionStore:u,taskCollectionViewBlockStore:p}=o;if(!c||!d||!s)return;const m=p.getSpaceId(),S=[d,...i.map((t=>new(B().Bv)(e,{id:t,table:f().ev,spaceId:m})))];l.id===p.id?E().os({collectionSettingsStore:n.settingsStore}):K().Y({environment:e,store:p,pageVisitSource:r().y8.LeaveOrRemove});const{automationActions:v}=await b().QV.automations.load(),{automationStore:g}=s;await ot({environment:e,taskCollectionStore:u,executeFn:()=>{U().createAndCommit({userAction:"sprintSettingsActions.handleTurnOffSprints",environment:e,canUndo:!0,perform:t=>{!function(t){const{transaction:e,blocksToDelete:n,environment:o,taskCollectionStore:r,sprintCollectionStore:i}=t;z().zv({store:i,transaction:e,data:{alive:!1}}),F().BJ({environment:o,collectionStore:r,schema:r.getSchema(),property:a().yx.TaskToSprintRelation,transaction:e,permanentlyDelete:!0}),W().oD({environment:o,blocks:n,transaction:e,permanentlyDelete:!0})}({environment:e,transaction:t,blocksToDelete:S,sprintCollectionStore:c,taskCollectionStore:u}),v.disableAutomation({automationStore:g,environment:e,transaction:t}),v.deleteAutomation({automationStore:g,environment:e,transaction:t})}}),(0,O().i)({environment:e,collectionContextStore:n,property_type:"relation",from:"view_settings",property:a().yx.TaskToSprintRelation})}})}function $(t){const{environment:e,userSettingsStore:n}=t;U().createAndCommit({userAction:"sprintSettingsActions.handleSeenSprintsEngagementBanner",environment:e,canUndo:!0,perform:t=>{N().mJ({userSettingsStore:n,data:{seen_sprint_settings_engagement_banner:!0},transaction:t})}})}function tt(t){t.settingsStore.setState({open:!0,stack:[{type:"main"},{type:"sprintSettings"}]})}function et(t){const{environment:e,collectionContextStore:n,currentViewBlockStore:o,taskCollectionViewBlockStore:r}=t,i=n.collectionViewStore();if(!i)return;const c=i.getFormat(),s=i.getRawQuery();U().createAndCommit({userAction:"sprintSettingsActions.handleManageSprintFromThisView",environment:e,canUndo:!0,perform:t=>{if((0,A().F)({collectionViewStore:i,transaction:t,update:{name:T().A.formatMessage(k().DZ.tasksCurrentSprintV2ViewName),query2:{...s,filter:void 0},format:{...c,collection_view_icon:"/icons/playback-play-button_gray.svg",property_filters:k().Wo,app_config_uri:a().Lu,hide_linked_collection_name:!0}}}),o.id===r.id){var e;const n=(null===(e=o.getFormat())||void 0===e?void 0:e.app_uri_map)??{},s=c.app_config_uri;s&&delete n[s],M().zA({stores:[r],update:{app_uri_map:{...n,[a().Lu]:i.id}},transaction:t})}}})}function nt(t){const{environment:e,sprintSettingsContext:n}=t;if(!n)return;const o=n.sprintCollectionStore,r=(null==o?void 0:o.getRole())??"none";o&&(0,u().q_)(r,"editor")&&n.automationContextLoaded&&!n.automationContext&&U().createAndCommit({userAction:"sprintSettingsActions.ensureCompleteSprintAutomation",environment:e,canUndo:!0,perform:t=>{j({environment:e,transaction:t,sprintCollectionStore:o,taskCollectionStore:n.taskCollectionStore,sprintSettingsConfig:y().AL})}})}async function ot(t){const{executeFn:e,environment:n,taskCollectionStore:o}=t;await async function(t){var e;const{environment:n,taskCollectionStore:o}=t,r=o.getFormat().app_uri_map,i=a().yx.TaskToSprintRelation,s=o.getSchema(),l=(null==r?void 0:r[i])??i,d=s[l];if(!d||!(0,c().nC)(d))return;const u=null===(e=(0,c().Nv)(d))||void 0===e?void 0:e.id;if(!u)return;const p=new Set([l]);Object.entries(s).forEach((t=>{var e;let[n,o]=t;o&&(0,c().nC)(o)&&(null===(e=(0,c().Nv)(o))||void 0===e?void 0:e.id)===u&&p.add(n)}));const{serverCommitResult:m}=U().createAndCommit({userAction:"sprintSettingsActions.clearSprintRelationDataFromTaskCollection",environment:n,canUndo:!0,perform:t=>{for(const e of p)F().BJ({environment:n,transaction:t,permanentlyDelete:!0,collectionStore:o,schema:s,property:e});null==r||delete r[i],r&&M().zA({stores:[o],transaction:t,update:{app_uri_map:r}})}});await m}({environment:n,taskCollectionStore:o}),e()}function rt(t){return{frequency:L,interval:t.recurrenceConfig.interval,weekdays:t.recurrenceConfig.weekdays,start_date:(0,s().Rz)(o().c9.local().set({hour:0,minute:0,second:0,millisecond:0}).toJSDate()),timezone:(0,l().dB)(),hour:0,minute:0}}},83848:(t,e,n)=>{n.d(e,{b:()=>i});var o=()=>n(56366),r=()=>n(351360),a=()=>n(134217);function i(t){return(0,o().K8)((()=>a().GU({billingData:t,spaceStore:r().default.state.currentSpaceStore})),[t])}},86089:(t,e,n)=>{n.d(e,{o:()=>s});var o=n(296540),r=()=>n(484714),a=()=>n(56366),i=()=>n(351360),c=()=>n(779795);function s(){const t=(0,r().v3)(),[e,n]=(0,o.useState)([]),s=(0,a().K8)((()=>{var t;return null===(t=i().default.state.currentSpaceStore)||void 0===t?void 0:t.id}),[]);return(0,o.useEffect)((()=>{(async()=>{if(s){const e=await(0,c().p_)({environment:t,spaceId:s});n(e)}})()}),[t,s]),e}},141273:(t,e,n)=>{n.d(e,{g:()=>s});var o=n(296540),r=()=>n(484714),a=()=>n(56366),i=()=>n(351360),c=()=>n(749356);function s(t){const e=(0,r().v3)(),[n,s]=(0,o.useState)(),l=(0,a().K8)((()=>{var t;return null===(t=i().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId()}),[]);return(0,o.useEffect)((()=>{!async function(){l&&s(await(0,c().L6)({environment:e,spaceId:l,offerCampaign:t}))}()}),[e,l,t]),n}},175213:(t,e,n)=>{n.d(e,{G:()=>a});var o=()=>n(989423),r=()=>n(508496);function a(t,e){o().vd(t,"delete_property",e),r().default.logEvent("delete_property")}},240865:(t,e,n)=>{n.d(e,{V:()=>a});var o=()=>n(56366),r=()=>n(351360);function a(){return(0,o().K8)((()=>{const{currentSpaceStore:t}=r().default.state;return(null==t?void 0:t.getMemberCountFromPublicSpaceData())||null}),[])}},246760:(t,e,n)=>{n.d(e,{G:()=>o});const o=(0,n(340498).xh)("questionMarkCircled",{default:{loader:()=>n.e(35839).then(n.bind(n,835839))},small:{loader:()=>n.e(83633).then(n.bind(n,183633))},mini:{loader:()=>n.e(58431).then(n.bind(n,658431))},large:{loader:()=>n.e(38405).then(n.bind(n,838405))}})},314907:(t,e,n)=>{n.d(e,{E:()=>a});var o=()=>n(56366),r=()=>n(134217);function a(t){return(0,o().K8)((()=>r().Fq(t.state)),[t])}},465364:(t,e,n)=>{n.d(e,{$N:()=>T,D5:()=>P,GB:()=>D,M9:()=>h,Pt:()=>V,eW:()=>I,jo:()=>B,v7:()=>A});n(944114),n(898992),n(803949),n(581454);var o=()=>n(244641),r=()=>n(787626),a=()=>n(713998),i=()=>n(597777),c=()=>n(604995),s=()=>n(416504),l=()=>n(519831),d=()=>n(496603),u=()=>n(534177),p=()=>n(299709),m=()=>n(317001),f=()=>n(520861),S=()=>n(878060),v=()=>n(44729),g=()=>n(246826),y=()=>n(606952),_=()=>n(519839),C=()=>n(695625),k=()=>n(397248),w=()=>n(630116),b=()=>n(747671);function h(t){const{environment:e,droppedStores:n,duplicate:a,calendarBy:d,transaction:u,collectionContextStore:S}=t,g=o().c9.fromMillis(t.startOfDay);let y=!0;for(const o of n){const e=t.collectionStore?t.collectionStore:(0,_().Dj)({store:o,collectionContextStore:S});if(o.getParentTable()===l().Vl||!e){y=!1;break}v().X$({childStore:o,parentStore:e,transaction:u})||(y=!1)}const C=(0,f().T)({environment:e,droppedStores:n,duplicate:a,transaction:u,collectionStore:t.collectionStore});for(const o of C){const n=t.collectionStore?t.collectionStore:(0,_().Dj)({store:o,collectionContextStore:S});if(!n)continue;const a=n.getMappedProperty(d),l=o.getPropertyStore(a),f=(0,r().b)(l.getValue())||c().Ec((0,s().P)()),v=c().kW(f,(0,s().P)()),C=g.toFormat(c().tr);let k;if("date"===v.type||"datetime"===v.type)k={...v,start_date:C};else{const t=c().AA(v,(0,s().P)());if(!t.end)return;const e={...v,start_date:C},n=c().AA(e,(0,s().P)()).start.diff(t.start,"days"),o=t.end.plus(n).toFormat(c().tr);k={...v,start_date:C,end_date:o}}const w=c().kW(k,i().$K(f)||(0,s().P)());(0,m().j)({environment:e,store:o,collectionStore:n,collectionContextStore:S,shouldCoerce:!0,groupsPointer:[],transaction:u,alreadyMovedToCollection:y}),P({environment:e,type:"dateValue",propertyId:a,store:o,transaction:u,dateValue:w}),(0,p().E)({environment:e,collectionContextStore:S,block_id:o.id,property:a,property_type:"date",from:"calendar"})}}function A(t){const{calendarStore:e,direction:n,targetStore:o}=t;e.setState({...e.state,isDragging:!0,targetStore:o,direction:n,temporaryValue:void 0})}function D(t){const{calendarStore:e,x:n,y:a,calendarBy:l}=t,u=e.state;if(u.isDragging){const t=(0,r().b)(u.targetStore.getPropertyStore(l).getValue());if(!t)return;const p=c().kW(t,(0,s().P)()),m=u.temporaryValue||t,f=c().kW(m,(0,s().P)()),S=[];u.dayStoreMap.forEach(((t,e)=>{S.push({store:t,timestamp:e})}));const v=S.find((t=>{let{store:e}=t;const o=C().T.getRectFromStore(e);return Boolean(o&&k().ux(o,n,a))}));let g;if(v){const t=o().c9.fromMillis(v.timestamp),e=t.endOf("day"),n=t.toFormat(c().tr);if(p){const r=c().AA(p,(0,s().P)());if(u.direction===b().Q.Left)if(o().IX.fromDateTimes(t,e).contains(r.start))g=p;else{let t;t="datetimerange"===p.type||"daterange"===p.type?{...p,start_date:n,end_date:p.end_date}:"datetime"===p.type?{type:"datetimerange",start_date:n,start_time:p.start_time,end_date:p.start_date,end_time:p.start_time,time_zone:p.time_zone,reminder:p.reminder}:{type:"daterange",start_date:n,end_date:p.start_date,reminder:p.reminder};const e=c().AA(t,(0,s().P)());g=!r.end&&e.start>r.start||r.end&&e.start>r.end?f:t}else if(r.end?o().IX.fromDateTimes(t,e).contains(r.end):o().IX.fromDateTimes(t,e).contains(r.start))g=p;else{let t;t="date"===p.type?{...p,type:"daterange",end_date:n}:"datetime"===p.type?{...p,type:"datetimerange",end_date:n,end_time:"00:00"}:{...p,end_date:n};const e=c().AA(t,(0,s().P)());g=e.end&&e.end<e.start?f:t}}}if(g&&!d().n4(f,g)){const t=c().kW(g,i().$K(m)||(0,s().P)());e.setState({...u,temporaryValue:t})}}}function I(t){const{environment:e,calendarStore:n,calendarBy:o,transaction:r}=t,a=n.state;a.isDragging&&a.temporaryValue&&(P({type:"dateValue",environment:e,dateValue:a.temporaryValue,propertyId:o,store:a.targetStore,transaction:r}),n.setState({...n.state,isDragging:!1}))}function V(t){const{calendarStore:e}=t,n=e.state;n.isDragging&&e.setState({...n,isDragging:!1})}function T(t){const{environment:e,store:n,collectionStore:r,collectionContextStore:i,startDayOfWeek:l,transaction:d}=t,u=i.dateRangeStartStore.state,p=(0,s().P)(),f=i.normalizedQueryStore.state;if(!f||!f.calendar_by)return;const S=(null==r?void 0:r.getMappedProperty(f.calendar_by))??f.calendar_by,v=c().hp(u,l,p),y=v.startOf("month"),_=v.endOf("month"),C=o().c9.now().startOf("day");let k;return k=o().IX.fromDateTimes(y,_).contains(C)?c().p6(C.valueOf(),p):c().p6(c().iB(u,l,p).valueOf(),p),g().zv({store:n.getPropertiesStore(),data:{[S]:a().m5(k)},transaction:d}),(0,m().j)({environment:e,store:n,collectionStore:r,collectionContextStore:i,shouldCoerce:!0,groupsPointer:[],transaction:d}),n}function P(t){const{environment:e,store:n,propertyId:o,transaction:r}=t;let i;"timestamp"===t.type?i=c().p6(t.timestampMs.valueOf(),(0,s().P)()):"dateValue"===t.type?i=t.dateValue:(0,u().HB)(t);const l=n.getPropertyValue(o),d=a().m5(i);g().zv({store:n.getPropertiesStore(),data:{[o]:d},transaction:r}),S().O({environment:e,store:n,dateProperty:{id:o,oldValue:l,newValue:d}})}function B(t){const{environment:e,collectionStore:n,calendarBy:o,store:r,insertStores:a,collectionContextStore:i,transaction:c}=t,s=r.getPropertyStore(o).getValue();for(const l of a)(0,m().j)({environment:e,store:l,collectionStore:n,collectionContextStore:i,shouldCoerce:!0,groupsPointer:[],transaction:c}),y().KY({environment:e,store:l.getPropertyStore(o),value:s,transaction:c});return a.map((t=>w().Bv.createChildStore(n,t.pointer)))}},477401:(t,e,n)=>{n.d(e,{U:()=>v});var o=n(296540),r=()=>n(484714),a=()=>n(56366),i=()=>n(786508),c=()=>n(166386),s=()=>n(449506),l=()=>n(58293),d=()=>n(437622),u=()=>n(985395),p=()=>n(240865),m=()=>n(351360),f=()=>n(10984),S=()=>n(141273);function v(t){const e=(0,r().v3)(),[n,v]=(0,o.useState)(!1),g=function(t){const e=(0,S().g)("ai_fifty_percent_upgrade"),n=(0,u().n)(),o=(0,p().V)();return(0,a().K8)((()=>{const r=e&&!n&&(0,f().wb)()&&1===o,a=(0,d().aB)(m().default.state.currentSpaceStore);return Boolean(r&&(!a||"sidebar"!==t||a>=7))}),[e,n,o,t])}(t),y=(0,l().r)(),_=(0,a().K8)((()=>null==y?void 0:y.canAdmin()),[y]),C=(0,a().K8)((()=>null==y?void 0:y.getSpaceId()),[y]);return(0,o.useEffect)((()=>{!async function(){if(g&&C&&_)try{const n=await s().callApi({eventName:"getCustomerOffer",environment:e,data:{spaceId:C,offerCampaign:"ai_fifty_percent_upgrade"}});if("failed"===n.type)return;if("offer"in n.data){var t;const e=(0,i().RS)(null===(t=n.data)||void 0===t?void 0:t.offer);v((0,c().J5)(e))}}catch(n){return}}()}),[e,g,C,_]),n}},520861:(t,e,n)=>{n.d(e,{T:()=>r});n(944114),n(898992),n(908872);var o=()=>n(415651);function r(t){const{environment:e,collectionStore:n,duplicate:r,droppedStores:a,transaction:i}=t,{movedStores:c,reparentedStores:s}=a.reduce(((t,e)=>(r||e.getAssociatedCollectionId()!==(null==n?void 0:n.id)?t.reparentedStores.push(e):t.movedStores.push(e),t)),{movedStores:[],reparentedStores:[]});return[...c,...o().MS({environment:e,droppedStores:s,duplicate:r,transaction:i,resolveTemplateVariables:!1})]}},747671:(t,e,n)=>{n.d(e,{Q:()=>o,a:()=>r});let o=function(t){return t[t.Left=0]="Left",t[t.Right=1]="Right",t}({});class r extends(()=>n(757695))().default{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},749356:(t,e,n)=>{n.d(e,{VY:()=>p,Qm:()=>m,z6:()=>u,OC:()=>v,L6:()=>f,Zc:()=>g,x3:()=>S});var o=()=>n(857639),r=()=>n(386164);const a={plans_page:["lic_25","lic_50","resurrection_offer","ai_fifty_percent_upgrade"],sidebar_upsell:["lic_25","lic_50"]};var i=()=>n(229833),c=()=>n(449506),s=()=>n(901389),l=()=>n(989423),d=()=>n(351360);async function u(t,e){var n;const{spaceId:o,offerCampaign:r}=e;if(!o||!r||null===(n=d().default.state.currentSpaceStore)||void 0===n||!n.canAdmin())return;const a=await c().callApi({eventName:"getCustomerOffer",environment:t,data:{spaceId:o,offerCampaign:r}});return"failed"!==a.type&&"offer"in a.data&&a.data.offer?a.data.offer:void 0}async function p(t){const{environment:e,spaceId:n,offerCampaign:o,entrypoint:r}=t,a=await c().callApi({eventName:"applyCustomerOffer",environment:e,data:{spaceId:n,offerCampaign:o,entrypoint:r??"unknown"}});if("failed"!==a.type)return a;s().Qg(a)}async function m(t,e){const n=await c().callApi({eventName:"applyCustomerOffer",environment:t,data:{...e}});if("failed"!==n.type)return n;s().Qg(n)}async function f(t){const{environment:e,spaceId:n,offerCampaign:o}=t;return void 0!==await u(e,{spaceId:n,offerCampaign:o})}async function S(t){var e;const{environment:n,hasReceived:a,offerType:s,newPlan:l,coupon:u}=t,p=null===(e=d().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId();if(!p)return;const m=await c().callApi({eventName:"updateCustomerOffer",environment:n,data:{spaceId:p,hasReceived:a,offerType:s,newPlan:l,coupon:u},headers:(0,r().WS)({cellId:void 0,spaceId:p})});"failed"===m.type&&o().log({level:"error",from:"offerActions",type:"updateLegacyCustomerOfferFailed",error:(0,i().n6)(m.error)})}async function v(t,e,n){const o=function(t){if(a.hasOwnProperty(t))return a[t]}(n);if(o)for(const r of o){const n=await u(t,{spaceId:e,offerCampaign:r});if((null==n?void 0:n.campaign)===r)return n}}function g(t){let{environment:e,spaceName:n,offerCampaign:o}=t;if(n)switch(o){case"lic_25":case"lic_50":(0,l().WU)(e,"lic_offer_eligible","lic_offer_eligible",3600,{workspace_name:n,lic_25:"lic_25"===o,lic_50:"lic_50"===o});break;case"resurrection_offer":(0,l().WU)(e,"resurrection_offer_eligible","resurrection_offer_eligible",3600,{workspace_name:n});break;default:return}}},864779:(t,e,n)=>{n.d(e,{Me:()=>c,Vv:()=>r,Z3:()=>a,wI:()=>i});var o=()=>n(244641);function r(t){if("week"===t.frequency&&t.weekdays&&1===t.weekdays.length)return{weekday:t.weekdays[0],duration:t.interval}}function a(t){const{currentSprintEndDate:e,sprintSchedule:n}=t;return s({startDate:d({dateToAdjust:o().c9.fromISO(e),weekday:n.weekday,wrapForEqualDays:!0}),duration:n.duration})}function i(t){const{userTimeZone:e,sprintSchedule:n}=t;return s({startDate:o().c9.local({zone:e}),duration:n.duration})}function c(t){const{currentSprintStartDate:e,sprintSchedule:n}=t,r=d({dateToAdjust:o().c9.fromISO(e),weekday:n.weekday,wrapForEqualDays:!1}),{end_date:a}=s({startDate:r,duration:n.duration});let i=o().c9.fromISO(a);const c=o().c9.now().startOf("day");for(;i.diff(c,"days").days<0;)i=i.plus({weeks:1});return{type:"daterange",start_date:i.plus({days:1}).minus({weeks:n.duration}).toISODate(),end_date:i.toISODate()}}function s(t){const{startDate:e,duration:n}=t,o=e.plus({weeks:n}).minus({days:1});return{type:"daterange",start_date:e.toISODate(),end_date:o.toISODate()}}const l={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6};function d(t){const{dateToAdjust:e,weekday:n,wrapForEqualDays:o}=t,r=u({currentWeekday:e.weekday%7,nextWeekday:l[n],wrapForEqualDays:o});return e.plus({days:r})}function u(t){const{currentWeekday:e,nextWeekday:n,wrapForEqualDays:o}=t,r="number"==typeof e?e:l[e],a="number"==typeof n?n:l[n];if(r===a)return o?7:0;let i=r,c=0;for(;i!==a;)i===l.SA?i=0:i+=1,c+=1;return c}},950914:(t,e,n)=>{n.d(e,{AL:()=>a,Q6:()=>c,vt:()=>i});n(898992),n(672577);var o=()=>n(66689),r=()=>n(254947);const a={autoCompleteSprints:!1,actionConfig:{complete_sprint_action:"complete_sprint_and_move_incomplete_tasks_to_next_sprint"},recurrenceConfig:{interval:2,weekdays:["MO"]}};function i(t){const{eventTracker:e,properties:n}=t;e.DO_NOT_USE_commonTrackEvent({eventName:"complete_sprint_action",properties:n})}function c(t,e){var n;return null===(n=e.groups)||void 0===n||null===(n=n.find((e=>e.id===o().nl||(null==e?void 0:e.name)===r().P0||(null==e?void 0:e.name)===t.formatMessage(r().oz.statusGroupNameComplete))))||void 0===n?void 0:n.name}},966759:(t,e,n)=>{n.d(e,{i:()=>a});var o=()=>n(476492),r=()=>n(175213);function a(t){const{environment:e,collectionContextStore:n,property_type:a,from:i,property:c,...s}=t,l=(0,o().sl)(n)||{};(0,r().G)(e,{property:c,property_type:a,from:i,...s,...l})}},972418:(t,e,n)=>{n.d(e,{lh:()=>i().l,bw:()=>c().b,UL:()=>s().U,lI:()=>p,IU:()=>y,Wo:()=>m().W,EF:()=>_().E,o2:()=>C().o});var o=()=>n(484714),r=()=>n(187174),a=()=>n(449506);var i=()=>n(714300),c=()=>n(83848),s=()=>n(477401),l=()=>n(56366),d=()=>n(176983),u=()=>n(975971);function p(t){let{spaceId:e}=t;const n=(0,o().v3)(),r=(0,d().J)();return(0,l().K8)((()=>{if(!e||!r)return;const t=u().A.getData(n,{spaceId:e});return null==t?void 0:t.billingData}),[n,e,r])}var m=()=>n(987427),f=()=>n(762433),S=()=>n(351360),v=()=>n(134217),g=()=>n(847554);function y(t,e){const n=(0,l().O$)(t),o=(0,g().b)(n),c=(0,l().K8)((()=>{var t;return null===(t=S().default.state.currentSpaceStore)||void 0===t?void 0:t.id}),[]),s=(0,i().l)({spaceId:c}),d=(0,l().K8)((()=>v().GU({billingData:s,spaceStore:S().default.state.currentSpaceStore})),[s]),[{value:u}]=(0,r().Yb)((()=>a().callApi({eventName:"isEmailEducation",environment:e,data:{}})),[e]);return!!u&&("failed"!==u.type&&(!!u.data.isEligible&&(!!n&&(!!s&&(!Boolean((0,f().KH)(s,"plan"))&&(d&&1===o))))))}var _=()=>n(314907),C=()=>n(86089)},985395:(t,e,n)=>{n.d(e,{n:()=>i});var o=()=>n(56366),r=()=>n(441738),a=()=>n(749240);function i(){return(0,o().K8)((()=>{var t;const e=(null===(t=a().subscriptionDataStoreInstance.state)||void 0===t?void 0:t.addOns)??[];return(0,r().GI)(e)}),[])}},987427:(t,e,n)=>{n.d(e,{W:()=>a});var o=n(296540),r=()=>n(854418);function a(){const t=(0,r().t)(),[e,n]=(0,o.useState)();return(0,o.useEffect)((()=>{n(!(!t||!("company_employee_count"in t))&&parseInt(t.company_employee_count)>99)}),[t]),e}}}]);