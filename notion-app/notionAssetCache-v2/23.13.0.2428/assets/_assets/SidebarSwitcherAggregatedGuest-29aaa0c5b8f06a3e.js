"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[77869],{75846:(e,t,n)=>{n.d(t,{u:()=>i});const i=(0,n(340498).xh)("globe",{default:{loader:()=>n.e(88865).then(n.bind(n,788865))},small:{loader:()=>n.e(60219).then(n.bind(n,60219))},mini:{loader:()=>n.e(29485).then(n.bind(n,629485))},large:{loader:()=>n.e(31331).then(n.bind(n,431331))}})},97059:(e,t,n)=>{n.d(t,{W:()=>h,w:()=>S});n(944114);var i=()=>n(585515),o=()=>n(577449),a=()=>n(161479),r=()=>n(545285),s=()=>n(763824),c=()=>n(780054),d=()=>n(870618),l=()=>n(670631),p=()=>n(227440),u=()=>n(508496),m=()=>n(540758);async function S(e){const{environment:t}=e;return(await s().lX(Object.keys(l().A.state.offlinePages||{}),100,(e=>async function(e){const{environment:t,pageId:n}=e,s={page:{id:n,spaceId:(0,a().e)(void 0)},limit:1/0,cursor:{stack:[]},verticalColumns:!1},l=[];return await i().T({...s,baseUrl:c().A.domainBaseUrl,publicDomainName:c().A.publicDomainName,shouldTraverseToggleBlocks:!0},o().h.sideEffect((e=>((0,r().u)(e)&&l.push(e.id),Promise.resolve())),o().h.fromMonomorphicFunctionUnsafe((async e=>{const n=await d().h7({environment:t,pointer:e,useInMemoryCacheOnly:!1,skipAccessWrites:!0});return null==n?void 0:n.model})))),l}({environment:t,pageId:e})))).flat()}function h(e,t){return!p().A.state.online&&(e.device.isElectron||e.device.isMobileNative)&&u().default.checkGate({gateName:"download_for_offline"})&&!(0,m().B)(t)}},556048:(e,t,n)=>{n.d(t,{C8:()=>u,Dz:()=>c,GC:()=>S,GL:()=>h,YY:()=>m,dM:()=>l,h9:()=>d,jX:()=>s,oF:()=>p,uj:()=>r});var i=()=>n(645873);const o={JiraSyncInfoPopup:new(i().O2)("JiraSyncInfoPopup",(async()=>await Promise.all([n.e(75134),n.e(68744)]).then(n.bind(n,408453)))),ImproveJiraSyncPopup:new(i().O2)("ImproveJiraSyncPopup",(async()=>await Promise.all([n.e(75134),n.e(2686)]).then(n.bind(n,484967)))),JiraDCAuthModal:new(i().O2)("JiraDCAuthModal",(async()=>await n.e(28763).then(n.bind(n,992567)))),ExternalImportAndSyncIndicator:new(i().O2)("ExternalImportAndSyncIndicator",(async()=>await n.e(98288).then(n.bind(n,984289)))),JiraSyncedAllProjectsTooltip:new(i().O2)("JiraSyncedAllProjectsTooltip",(async()=>await Promise.all([n.e(23806),n.e(21446)]).then(n.bind(n,470020)))),JiraSyncedAllIssuesTooltip:new(i().O2)("JiraSyncedAllIssuesTooltip",(async()=>await Promise.all([n.e(23806),n.e(21446)]).then(n.bind(n,470020)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(i().O2)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await Promise.all([n.e(23806),n.e(21446)]).then(n.bind(n,470020)))),JiraSyncSourceTooltip:new(i().O2)("JiraSyncSourceTooltip",(async()=>await Promise.all([n.e(23806),n.e(21446)]).then(n.bind(n,470020)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(i().O2)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await Promise.all([n.e(23806),n.e(21446)]).then(n.bind(n,470020))))},a={JiraSyncTeamSpaceModal:new(i().O2)("JiraSyncTeamSpaceModal",(async()=>Promise.all([n.e(23806),n.e(56188)]).then(n.bind(n,604698))))},r=(0,i()._h)(a.JiraSyncTeamSpaceModal,(e=>e.default)),s=(0,i()._h)(o.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),c=(0,i()._h)(o.JiraDCAuthModal,(e=>e.default)),d=(0,i()._h)(o.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),l=(0,i()._h)(o.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),p=(0,i()._h)(o.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),u=(0,i()._h)(o.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),m=(0,i()._h)(o.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),S=(0,i()._h)(o.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),h=(0,i()._h)(o.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator));(0,n(340498).xh)("jira",{default:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:20},small:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:16},mini:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:14},large:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:24}})},870214:(e,t,n)=>{n.d(t,{c:()=>i});const i=(0,n(340498).xh)("ellipsis",{default:{loader:()=>n.e(37217).then(n.bind(n,537217))},small:{loader:()=>n.e(19131).then(n.bind(n,419131))},mini:{loader:()=>n.e(30189).then(n.bind(n,630189))},large:{loader:()=>n.e(8675).then(n.bind(n,808675))}})},916614:(e,t,n)=>{n.r(t),n.d(t,{SidebarSwitcherGuestWorkspaces:()=>F});n(944114),n(581454);var i=n(296540),o=()=>n(484714),a=()=>n(56366),r=()=>n(401497),s=()=>n(452540),c=()=>n(870214),d=()=>n(75846),l=()=>n(959013),p=()=>n(496603),u=()=>n(760217),m=()=>n(406699),S=()=>n(811979),h=()=>n(439264),y=()=>n(939740),g=()=>n(460292),b=()=>n(554509),I=()=>n(89924),w=()=>n(125565),f=()=>n(553965),v=()=>n(437622),A=()=>n(214006),x=()=>n(667787),T=()=>n(930561),j=()=>n(584262),P=()=>n(179034),k=()=>n(284371),J=()=>n(426116),M=()=>n(864943),C=()=>n(108944),O=()=>n(115512),D=()=>n(351360),B=()=>n(90873),L=()=>n(630116),V=()=>n(33194),N=()=>n(320460),_=n(474848);function z(e){const{spaceViewStore:t,onClose:n,userId:s}=e,c=(0,o().Y0)(),d=(0,o().v3)(),u=(0,a().K8)((()=>{const{currentSpaceStore:e}=D().default.state;return(null==e?void 0:e.id)===t.getSpaceId()}),[t]),m=(0,i.useCallback)((()=>{n(),N().A.setState({...N().A.state,open:!1})}),[n]),S=(0,i.useCallback)((()=>{u||J().tR({environment:d,spaceViewStore:t,userSettingsStore:D().default.state.currentUserSettingsStore,userRootStore:D().default.state.currentUserRootStore,pageVisitSource:j().y8.SwitchSpace,navigationType:"switchingToOrLoadingSpace"}),n(),N().A.setState({...N().A.state,open:!1})}),[u,d,t,n]),h=(0,a().K8)((()=>{const e=t.getSpaceStore();if(!e)return[];const n=B().A.getSharedPagesState({spaceId:e.id,userId:s}),i=n&&n.currentPageIds?n.currentPageIds:[];return p().oE(i.map((t=>{const n=L().Bv.createChildStore(e.getPagesStore(),{table:P().ev,id:t,spaceId:e.id});if(n.canRead()&&n.isNavigableBlock()&&!(0,C().ze)(n))return n})))}),[t,s]),g=(0,r().IS)((e=>({container:{width:300,margin:4},menuItem:{},menuItemText:{margin:0},item:{borderRadius:0},header:{color:e.mediumTextColor,fontSize:(0,O().ny)(d,"UISmall"),lineHeight:(0,O().ks)(d,"UISmall"),fontWeight:k().Wy.medium,paddingLeft:12,paddingTop:6,paddingBottom:6},buttonContainer:{padding:8},button:{margin:8}})),[d]),b=[...h.map(((e,n)=>({key:e.id,render:()=>(0,_.jsx)(V().Ay,{from:"secondary_sidebar",variant:"primary",type:"shared",disabled:!1,store:e,spaceViewStore:t,itemIndex:n,itemDepth:1,onNavigate:m},e.id),action:()=>{}}))),{key:"open-workspace",render:e=>(0,_.jsx)(M().A,{size:"lg",onClick:e.onClick,style:g.button,children:(0,_.jsx)(l().sA,{id:"sidebarSwitcher.guestDocuments.openWorkspaceButton",defaultMessage:"Open workspace"})}),action:()=>{S()}}],w=[{key:"shared-pages",render:e=>(0,_.jsx)(I().A,{...e,disableMobilePadding:!0,topBorder:c.isMobile}),items:b}];return(0,_.jsxs)("div",{style:g.container,children:[(0,_.jsx)("div",{style:g.header,children:(0,_.jsx)(l().sA,{defaultMessage:"Shared with you",id:"sidebarSwitcher.guestDocuments.header"})}),(0,_.jsx)(y().Ay,{type:y().Oh.Vertical,sections:w,initialFocus:void 0})]})}const R=3;function F(e){const{userId:t}=e,n=(0,o().v3)(),x=(0,o().Y0)(),[j,P]=(0,i.useState)(!1),k=(0,r().IS)((e=>({container:{},menuList:x.isMobile?{paddingTop:10}:{},bottomGap:{paddingBottom:8},header:{marginRight:6,marginLeft:11,paddingTop:6,paddingBottom:6,color:e.text.secondary,display:"flex",flexDirection:"row",gap:2,alignItems:"center"},viewMoreButton:{height:32,display:"flex",flexDirection:"row",width:"100%",alignItems:"center",padding:"6px 12px",transition:"background 150ms ease",marginLeft:0,marginRight:0,borderRadius:0},viewMoreButtonItem:{gap:12},viewMoreLabel:{color:e.text.secondary},viewMoreIcon:{margin:0}})),[x]),[J,M]=(0,a().K8)((()=>p().jB(A().A.getSpaceViewStores(n,t),(e=>(0,v().IL)(e.getSpaceStore())))),[n,t]),C=(0,a().K8)((()=>J.map((e=>({id:e.id,spaceId:e.getSpaceId()}))).map(s().sZ)),[J]);if(0===J.length)return null;const O=[];for(const i of J){if(!j&&O.length===R){O.push({key:"view-more",render:e=>(0,_.jsx)(u().A,{...e,style:k.viewMoreButtonItem,buttonStyle:k.viewMoreButton,title:(0,_.jsx)(w().A,{isMobile:x.isMobile,style:k.viewMoreLabel,children:(0,_.jsx)(l().sA,{defaultMessage:"View {number} more",id:"guestWorkspaces.viewMore.text",values:{number:J.length-R}})}),icon:(0,_.jsx)(g().Q,{colorName:"graySecondary",iconGroup:c().c,variantName:"small"}),desktopIconStyle:k.viewMoreIcon}),action:()=>{P(!0)}});break}O.push({key:i.id,render:e=>(0,_.jsx)(S().A,{...e,popupType:x.isMobile?m().z7.BottomSheet:m().z7.Popup,alignmentToOrigin:m().yP.Start,placementToOrigin:m().sx.Right,renderOrigin:n=>(0,_.jsx)(K,{spaceViewStore:i,userId:t,onClick:n.onClick,menuListItemProps:(0,f().A)(n,e)}),render:e=>(0,_.jsx)(z,{onClose:()=>e.close(),spaceViewStore:i,userId:t})}),action:()=>{}})}const D=[{key:"spaces",render:e=>(0,_.jsx)(I().A,{...e,disableMobilePadding:!0,topBorder:x.isMobile,children:x.isMobile?e.children:(0,_.jsx)(h().Ay,{direction:"vertical",keys:C,renderKey:t=>e.children[C.indexOf(t)],onDrop:(0,T().ro)({userId:t,environment:n,prependSpaceViewStores:M}),style:{marginBottom:1}})}),items:O}];return(0,_.jsxs)("div",{style:k.container,children:[(0,_.jsxs)("div",{style:k.header,children:[(0,_.jsx)(g().Q,{colorName:"graySecondary",iconGroup:d().u,variantName:"small"}),(0,_.jsx)(b().D,{colorName:"secondary",styleName:"UISmall-12px/Regular",children:(0,_.jsx)(l().sA,{defaultMessage:"Shared Documents",id:"guestWorkspaces.sharedDocuments.header"})})]}),(0,_.jsx)("div",{style:k.menuList,children:(0,_.jsx)(y().Ay,{type:y().Oh.Vertical,sections:D,initialFocus:void 0,captureKeyboardOnlyWhenFocused:!0,resetFocusOnMouseOut:!0})})]})}function K(e){const{spaceViewStore:t,userId:n,onClick:i,menuListItemProps:r}=e,s=(0,o().v3)(),c=(0,l().tz)(),d=(0,a().K8)((()=>(0,T().Oy)(s,n)),[s,n]),{spaceStore:p,spaceName:u,memberCount:m,subscriptionTierLabel:S,spaceIcon:h}=(0,a().K8)((()=>{const e=t.getSpaceStore();if(!e)return{};const n=(0,v().GK)(s,e),{memberCount:i,subscriptionTierLabel:o}=(0,T().rY)(s,c,e);return{spaceStore:e,spaceName:n,memberCount:i,subscriptionTierLabel:o,spaceIcon:(0,v().c2)(s,e)}}),[s,c,t]);return p?(0,_.jsx)(x().A,{id:p.id,menuListItemProps:r,onClick:i,focused:r.focused,icon:h,spaceName:u,title:u,memberCount:m,subscriptionTierLabel:S,isRightArrow:!0,disabled:d}):null}}}]);