"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[51226],{11978:(e,t,i)=>{i.d(t,{O:()=>r});var n=()=>i(56366),o=()=>i(351360);function r(){const{currentSpaceStore:e}=(0,n().K8)((()=>o().default.state),[]);return null==e?void 0:e.id}},34293:(e,t,i)=>{i.d(t,{A:()=>s});i(296540);var n=()=>i(959013),o=()=>i(824160),r=i(474848);function s(e){return(0,r.jsx)(o().A,{...e,children:"membership_admin"===e.role?(0,r.jsx)(n().sA,{id:"spacePermissionsSettings.user.membershipAdmin",defaultMessage:"Membership admin"}):(0,r.jsx)(n().sA,{id:"spacePermissionsSettings.user.workspaceOwner",defaultMessage:"Workspace owner"})})}},83848:(e,t,i)=>{i.d(t,{b:()=>s});var n=()=>i(56366),o=()=>i(351360),r=()=>i(134217);function s(e){return(0,n().K8)((()=>r().GU({billingData:e,spaceStore:o().default.state.currentSpaceStore})),[e])}},86089:(e,t,i)=>{i.d(t,{o:()=>l});var n=i(296540),o=()=>i(484714),r=()=>i(56366),s=()=>i(351360),a=()=>i(779795);function l(){const e=(0,o().v3)(),[t,i]=(0,n.useState)([]),l=(0,r().K8)((()=>{var e;return null===(e=s().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]);return(0,n.useEffect)((()=>{(async()=>{if(l){const t=await(0,a().p_)({environment:e,spaceId:l});i(t)}})()}),[e,l]),t}},141273:(e,t,i)=>{i.d(t,{g:()=>l});var n=i(296540),o=()=>i(484714),r=()=>i(56366),s=()=>i(351360),a=()=>i(749356);function l(e){const t=(0,o().v3)(),[i,l]=(0,n.useState)(),c=(0,r().K8)((()=>{var e;return null===(e=s().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);return(0,n.useEffect)((()=>{!async function(){c&&l(await(0,a().L6)({environment:t,spaceId:c,offerCampaign:e}))}()}),[t,c,e]),i}},157501:(e,t,i)=>{i.d(t,{V:()=>r});i(296540);var n=()=>i(959013),o=i(474848);function r(e){let{totalInviteCount:t}=e;return 0===t?(0,o.jsx)(n().sA,{id:"invite.contacts_imports.button.title.no_selected",defaultMessage:"Add members",values:{totalInviteCount:t}}):(0,o.jsx)(n().sA,{id:"invite.contacts_imports.button.title.selected",defaultMessage:"Add {totalInviteCount} {totalInviteCount, plural, one {member} other {members}}",values:{totalInviteCount:t}})}},159026:(e,t,i)=>{i.d(t,{Ay:()=>s,NJ:()=>n,d5:()=>o});i(898992),i(354520),i(581454),i(737550);let n=function(e){return e.unselected="unselected",e.workspace_member="workspace_member",e.request_workspace_member="request_workspace_member",e.page_guest="page_guest",e.closed="closed",e}({}),o=function(e){return e[e.closed=0]="closed",e[e.share_page=1]="share_page",e[e.share_workspace=2]="share_workspace",e[e.request_workspace=3]="request_workspace",e}({});class r extends(()=>i(757695))().default{getInitialState(){return{inviteStage:o.closed,selection:n.workspace_member,order:[n.workspace_member,n.page_guest],invitedUsers:[],invitedEmailToUserIdMap:{},flowId:i(206267).JW()}}startWorkspaceInvite(){this.setState({...this.state,inviteStage:o.share_workspace,order:[n.workspace_member,n.page_guest],selection:n.workspace_member})}startRequestMembership(){this.setState({...this.state,inviteStage:o.request_workspace,order:[n.request_workspace_member,n.page_guest],selection:n.request_workspace_member})}hasGuests(){return this.state.invitedUsers.some((e=>e.isGuest))}getGuestEmails(){return this.state.invitedUsers.filter((e=>e.isGuest)).map((e=>e.email))}}const s=r},178830:(e,t,i)=>{i.d(t,{s:()=>s});var n=()=>i(857639),o=()=>i(229833),r=()=>i(562866);async function s(e){const{environment:t,onInviteComplete:i,onInviteClick:s,flowId:a,intl:l,spaceStore:c,inviteTargetsStore:u,inviteOrigin:d,onError:p}=e;let v={success:!1};try{const e=await r().uf.personPropertyInviteActions.load();v=await e.inviteToSpaceAsMembers({environment:t,spaceStore:c,from:d,flowId:a,intl:l,inviteTargetsStore:u,onInviteStart:()=>{null==s||s()}})}catch(m){null==p||p(m),n().log({level:"error",from:"contactsImportsInviteActions",type:"handleMemberInvite",error:(0,o().n6)(m)})}finally{null==i||i(v)}}},240865:(e,t,i)=>{i.d(t,{V:()=>r});var n=()=>i(56366),o=()=>i(351360);function r(){return(0,n().K8)((()=>{const{currentSpaceStore:e}=o().default.state;return(null==e?void 0:e.getMemberCountFromPublicSpaceData())||null}),[])}},266324:(e,t,i)=>{i.d(t,{A:()=>w});var n=i(296540),o=()=>i(112452),r=()=>i(959013),s=()=>i(284371),a=()=>i(962730),l=()=>i(285790),c=()=>i(859428),u=()=>i(484714),d=()=>i(56366),p=()=>i(401497),v=()=>i(449506),m=()=>i(901389),g=()=>i(436572),f=()=>i(7674),_=()=>i(107683),y=()=>i(49210),S=()=>i(84817),h=()=>i(364280),I=()=>i(554509),x=()=>i(453697),b=i(474848);function C(e){let{spaceId:t,userStore:i,onDismiss:o,onSubmit:s}=e;const a=(0,u().v3)(),l=i.id,c=(0,r().tz)(),_=(0,d().K8)((()=>i.getDisplayName(c)),[i,c]),y=(0,p().IS)((e=>({secondaryIcon:{fill:e.icon.uiBlueSecondary},primaryIcon:{fill:e.icon.uiBluePrimary},title:{color:e.text.primary,textAlign:"center",fontSize:17,fontWeight:500,lineHeight:"22px"}})),[]),C=(0,n.useCallback)((async()=>{const e=await v().callApi({eventName:"recoverUserContentInSpace",environment:a,data:{spaceId:t,userId:l}});if("failed"===e.type)throw m().Qg(e),e;s(),o(),g().D6({label:(0,b.jsx)(r().sA,{id:"restoreAccessModal.snackbarMessage",defaultMessage:"Initiated restoration of access for{nbsp}{displayName}",values:{displayName:(0,b.jsx)("b",{children:_}),nbsp:(0,b.jsx)(b.Fragment,{children:"Â "})}})})}),[a,t,l,_,o,s]);return(0,b.jsx)(f().tf,{header:(0,b.jsx)(f().YA,{iconAndTitle:(0,b.jsxs)(S().Y1,{align:"top-center",gap:9,children:[(0,b.jsx)(x().A,{userStore:i,size:40}),(0,b.jsx)("div",{style:y.title,children:(0,b.jsx)(r().sA,{defaultMessage:"Restore access",id:"restoreAccessModal.title"})})]}),description:(0,b.jsx)(r().sA,{id:"restoreAccessModal.subtitle",defaultMessage:"Restore additional access for members who were removed and re-added within the last 30 days"})}),footer:(0,b.jsx)(f().aO,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,b.jsx)(r().sA,{defaultMessage:"Restore access",id:"restoreAccessModal.restoreButton"}),onClick:C}],secondaryButtons:[{buttonType:"secondary",label:(0,b.jsx)(r().sA,{defaultMessage:"Cancel",id:"restoreAccessModal.cancelButton"}),onClick:o}]}),children:(0,b.jsxs)(h().VP,{gap:24,children:[(0,b.jsx)(I().D,{styleName:"Body-14px/Regular",colorName:"primary",customStyles:{textAlign:"center"},children:(0,b.jsx)(r().sA,{id:"restoreAccessModal.contextDescription",defaultMessage:"<b>{displayName}</b> already has access to their private pages",values:{b:e=>(0,b.jsx)("b",{children:e}),displayName:_}})}),(0,b.jsx)(I().D,{styleName:"Body-14px/Regular",colorName:"primary",customStyles:{textAlign:"center"},children:(0,b.jsx)(r().sA,{id:"restoreAccessModal.actionDescription",defaultMessage:"Would you like to restore <b>{displayName}</b>'s access to their shared pages, groups, and teamspaces?",values:{b:e=>(0,b.jsx)("b",{children:e}),displayName:_}})})]})})}function w(e){let{spaceId:t,userStore:i,onSubmit:n}=e;const s=(0,r().tz)();return(0,b.jsx)(c().A,{placement:a().W.Right,renderTooltip:()=>(0,b.jsx)(k,{}),render:e=>(0,b.jsx)(l().A,{icon:o()._,ariaLabel:s.formatMessage({id:"restoreAccessButton.aria",defaultMessage:"Restore access"}),onClick:()=>async function(e,t,i){return await y().T.showAsyncModal((n=>(0,b.jsx)(_().s,{isOpen:n.isOpen,onDismiss:n.onDismiss,onClosed:n.onClosed,areaConstraint:{width:{type:"fixed",length:380}},render:()=>(0,b.jsx)(C,{spaceId:e,userStore:t,onDismiss:n.onDismiss,onSubmit:i})})))}(t,i,n),...e})})}function k(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{fontWeight:s().Wy.semibold},children:(0,b.jsx)(r().sA,{id:"userCell.restoreAccessTooltip.label",defaultMessage:"Restore access to teamspaces, groups, and shared pages"})}),(0,b.jsx)("div",{children:(0,b.jsx)(r().sA,{id:"userCell.restoreAccessTooltip.description",defaultMessage:"Only available if a member was removed and re-added in the last 30 days"})})]})}},267155:(e,t,i)=>{i.d(t,{z:()=>a});i(296540);var n=()=>i(401497),o=()=>i(959013),r=()=>i(89924),s=i(474848);function a(e){const t=(0,n().IS)((()=>({container:{paddingBlock:4}})),[]);return(0,s.jsx)(r().A,{title:e.hideTitle?void 0:(0,s.jsx)(o().sA,{id:"inviteUserModal.searchDropdown.selectPersonTitle",defaultMessage:"Select a person"}),style:t.container,...e})}},278407:(e,t,i)=>{i.d(t,{GH:()=>c,JD:()=>u,Kt:()=>l,Ng:()=>s,k_:()=>a,we:()=>d,xC:()=>p,yF:()=>v});var n=()=>i(989423),o=()=>i(680074),r=()=>i(10984);function s(e,t){const i=r().AI(),s=o().FX();(0,n().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_render_button",eventProperties:{subscription_tier:i,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id}}})}function a(e,t){const i=r().AI(),s=o().FX();(0,n().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_render_invite_popup",eventProperties:{subscription_tier:i,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id}}})}function l(e,t){const i=r().AI(),s=o().FX();(0,n().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_click_invite_button",eventProperties:{subscription_tier:i,domain_type:s,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id}}})}function c(e,t){const i=r().AI(),s=o().FX();(0,n().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_completed",eventProperties:{subscription_tier:i,domain_type:s,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id,error:t.error,invite_stage:t.invite_stage}}})}function u(e,t){const i=r().AI(),s=o().FX();(0,n().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_dismiss_popup",eventProperties:{subscription_tier:i,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id}}})}function d(e,t){const i=r().AI(),s=o().FX();(0,n().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_click_select_all",eventProperties:{subscription_tier:i,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_user_count:t.invited_user_count,is_unselect:t.is_unselect,invite_token_query:t.invite_token_query}}})}function p(e,t){const i=r().AI(),s=o().FX();(0,n().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_start_google_contacts_integration",eventProperties:{subscription_tier:i,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from}}})}function v(e,t){const i=r().AI(),s=o().FX();(0,n().u4)({environment:e,event:{eventName:"google_contacts_imports_invite_complete_google_contacts_integration",eventProperties:{subscription_tier:i,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success}}})}},314907:(e,t,i)=>{i.d(t,{E:()=>r});var n=()=>i(56366),o=()=>i(134217);function r(e){return(0,n().K8)((()=>o().Fq(e.state)),[e])}},328347:(e,t,i)=>{i.d(t,{h:()=>o});i(296540);var n=i(474848);const o=(0,i(340498).wt)("globe2",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM3.88477 3.76465C4.56836 3.11523 5.39551 2.61621 6.31836 2.34277C5.83301 2.82812 5.42285 3.51172 5.11523 4.3457C4.63672 4.19531 4.22656 3.99707 3.88477 3.76465ZM9.68848 2.34961C10.6045 2.62305 11.4316 3.11523 12.1084 3.76465C11.7734 4.00391 11.3633 4.19531 10.8848 4.35254C10.5771 3.51172 10.167 2.82812 9.68848 2.34961ZM8.47852 2.56836C9.0459 2.8418 9.56543 3.58008 9.93457 4.58496C9.4834 4.66699 8.99805 4.71484 8.47852 4.73535V2.56836ZM6.06543 4.58496C6.44141 3.58008 6.9541 2.8418 7.52148 2.56836V4.73535C7.00195 4.71484 6.5166 4.66699 6.06543 4.58496ZM2.05273 7.58594C2.14844 6.42383 2.58594 5.35059 3.25586 4.46875C3.67285 4.77637 4.21289 5.04297 4.8418 5.24121C4.66406 5.95215 4.54785 6.74512 4.51367 7.58594H2.05273ZM11.4863 7.58594C11.4521 6.74512 11.3359 5.95215 11.1582 5.24121C11.7871 5.04297 12.3271 4.7832 12.7373 4.46875C13.4141 5.35059 13.8516 6.42383 13.9473 7.58594H11.4863ZM5.49121 7.58594C5.52539 6.84082 5.62793 6.12988 5.78516 5.4873C6.33203 5.59668 6.91309 5.66504 7.52148 5.69238V7.58594H5.49121ZM8.47852 7.58594V5.69238C9.08691 5.66504 9.66797 5.59668 10.2148 5.4873C10.3721 6.12988 10.4746 6.84082 10.5088 7.58594H8.47852ZM2.05273 8.54297H4.51367C4.54785 9.39746 4.66406 10.1973 4.8418 10.915C4.21973 11.1133 3.68652 11.373 3.27637 11.6807C2.59277 10.792 2.14844 9.71191 2.05273 8.54297ZM5.49121 8.54297H7.52148V10.4707C6.91992 10.498 6.33203 10.5664 5.79199 10.6689C5.62793 10.0195 5.51855 9.29492 5.49121 8.54297ZM8.47852 10.4707V8.54297H10.5088C10.4814 9.29492 10.3721 10.0195 10.208 10.6689C9.66797 10.5664 9.08691 10.498 8.47852 10.4707ZM11.1582 10.915C11.3428 10.1973 11.4521 9.39746 11.4863 8.54297H13.9473C13.8516 9.71191 13.4072 10.792 12.7236 11.6807C12.3135 11.373 11.7803 11.1133 11.1582 10.915ZM8.47852 11.4277C8.99121 11.4482 9.47656 11.4961 9.9209 11.5781C9.55176 12.5625 9.03906 13.2939 8.47852 13.5605V11.4277ZM6.0791 11.5781C6.52344 11.4961 7.00879 11.4482 7.52148 11.4277V13.5605C6.96094 13.2939 6.44824 12.5625 6.0791 11.5781ZM3.90527 12.3848C4.24023 12.1523 4.65039 11.9609 5.12207 11.8105C5.42969 12.6309 5.83301 13.3008 6.30469 13.7793C5.40234 13.5059 4.58203 13.0205 3.90527 12.3848ZM10.8779 11.8105C11.3496 11.9609 11.7598 12.1523 12.0947 12.3848C11.418 13.0205 10.5977 13.5059 9.69531 13.7793C10.167 13.3008 10.5703 12.6309 10.8779 11.8105Z"})})},477401:(e,t,i)=>{i.d(t,{U:()=>f});var n=i(296540),o=()=>i(484714),r=()=>i(56366),s=()=>i(786508),a=()=>i(166386),l=()=>i(449506),c=()=>i(58293),u=()=>i(437622),d=()=>i(985395),p=()=>i(240865),v=()=>i(351360),m=()=>i(10984),g=()=>i(141273);function f(e){const t=(0,o().v3)(),[i,f]=(0,n.useState)(!1),_=function(e){const t=(0,g().g)("ai_fifty_percent_upgrade"),i=(0,d().n)(),n=(0,p().V)();return(0,r().K8)((()=>{const o=t&&!i&&(0,m().wb)()&&1===n,r=(0,u().aB)(v().default.state.currentSpaceStore);return Boolean(o&&(!r||"sidebar"!==e||r>=7))}),[t,i,n,e])}(e),y=(0,c().r)(),S=(0,r().K8)((()=>null==y?void 0:y.canAdmin()),[y]),h=(0,r().K8)((()=>null==y?void 0:y.getSpaceId()),[y]);return(0,n.useEffect)((()=>{!async function(){if(_&&h&&S)try{const i=await l().callApi({eventName:"getCustomerOffer",environment:t,data:{spaceId:h,offerCampaign:"ai_fifty_percent_upgrade"}});if("failed"===i.type)return;if("offer"in i.data){var e;const t=(0,s().RS)(null===(e=i.data)||void 0===e?void 0:e.offer);f((0,a().J5)(t))}}catch(i){return}}()}),[t,_,h,S]),i}},495867:(e,t,i)=>{i.d(t,{BY:()=>_,Lg:()=>y,id:()=>x,nE:()=>b,xi:()=>S});i(944114),i(898992),i(430670),i(581454);var n=()=>i(857639),o=()=>i(402390),r=()=>i(68263),s=()=>i(762433),a=()=>i(449506),l=()=>i(579627),c=()=>i(436572),u=()=>i(972435),d=()=>i(351360),p=()=>i(57605),v=()=>i(159026),m=()=>i(597898),g=()=>i(47373),f=()=>i(250064);async function _(e){const{environment:t,spaceStore:i,contextualInviteStore:n}=e;!function(e){const{spaceStore:t,contextualInviteStore:i}=e,n=t.getRole();if(!n||!(0,r().NB)(n))return!1;if(!i.hasGuests())return!1;if(t.getDisableMembershipRequests())return!1;return(0,g().x3)()}({environment:t,spaceStore:i,contextualInviteStore:n})?await async function(e){const{spaceStore:t,contextualInviteStore:i,environment:n}=e,o=t.getRole();if(!o||!(0,r().vp)(o))return!1;if(!i.hasGuests())return!1;return await(0,m().Se)(n,{name:"members",spaceId:t.id,userId:t.userId,amount:1})}({environment:t,spaceStore:i,contextualInviteStore:n})?n.startWorkspaceInvite():n.setState({...n.state,inviteStage:v().d5.closed}):n.startRequestMembership()}async function y(e){const{environment:t,spaceStore:i,contextualInviteStore:o,from:r,intl:s}=e,{selection:a,flowId:u}=o.state;if("page_guest"===a||!o.hasGuests())return o.reset(),!1;const{inviteTargets:d,unknownEmails:p}=await h({environment:t,contextualInviteStore:o}),v={...o.state};o.reset();const g=await(0,m().Se)(t,{name:"non_admin_members",spaceId:i.id,userId:i.userId})?e.inviteRole??"read_and_write":"editor";try{await l().eP({environment:t,store:i,inviteTargets:d,inviteRole:g,isOnboarding:!1,invite:{inviteOrigin:r,inviteFlowId:u,disable_invite_email:!0}})}catch(f){return function(e,t){if(0===t.length)return;c().D6({label:e.formatMessage({id:"contextual_invite.contextual_invite_failure",defaultMessage:"{userCount, plural, one {Failed to invite {users} as member} other {Failed to invite {users} as members}}"},{users:x(t,e),userCount:t.length})})}(s,v.invitedUsers),n().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.inviteTargets",data:{miscDataToConvertToString:{...v,inviteTargets:d}}}),!1}finally{p.length&&n().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.unknownUserId",data:{miscDataToConvertToString:{...v,unknownEmails:p}}})}return!0}async function S(e){const{environment:t,spaceStore:i,originId:o,originType:r,reasonMessage:s,contextualInviteStore:l,intl:u}=e,{selection:d}=l.state;if("page_guest"===d||!l.hasGuests())return l.reset(),!1;const{inviteTargets:p,unknownEmails:v}=await h({environment:t,contextualInviteStore:l}),m={...l.state};l.reset();const g=[];try{const e=p.map((e=>a().callApi({eventName:"requestAccess",environment:t,data:{type:"actor-to-space",forActorId:e.value.id,spaceId:i.id,message:s,attributes:{origin_id:o,origin_type:r,origin_table:"share_menu"===r?"block":"space",add_permissions_on_approval:!1}}}).catch((()=>g.push(e)))));await Promise.all(e)}catch(f){return function(e,t){if(0===t.length)return;c().D6({label:e.formatMessage({id:"contextual_invite.request_members_failure",defaultMessage:"Failed to request {users} to become members"},{users:x(t,e)})})}(u,m.invitedUsers),n().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.inviteTargets",data:{miscDataToConvertToString:{...m,inviteTargetsWithErrors:g}}}),!1}finally{v.length&&n().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.unknownUserId",data:{miscDataToConvertToString:{...m,unknownEmails:v}}})}return!0}async function h(e){const{environment:t,contextualInviteStore:i}=e,{invitedEmailToUserIdMap:n}=i.state,o=[],r=[];for(const s of i.state.invitedUsers){if(!s.isGuest)continue;const e=await I(t,s,n);e?o.push({type:"existingUser",value:{id:e,email:s.email,version:1}}):r.push(s.email)}return{inviteTargets:o,unknownEmails:r}}async function I(e,t,i){const n=await async function(e,t,i){let n=t.id;if(n||(n=i[t.email]),!n){const i=await a().callApi({eventName:"findUser",environment:e,data:{email:t.email}});if("failed"!==i.type){const e=i.data;e.value&&(n=e.value.value.id)}}return n}(e,t,i);if(n)return n;const r=(0,o().H)(u().A.getIntl()),s=await a().callApi({eventName:"createEmailUser",environment:e,data:{email:t.email,preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:r}});return"failed"!==s.type?s.data.userId:void 0}function x(e,t){return(0,f().l)(e.flatMap((e=>e.email||[])))}function b(e,t){var i;const{state:n}=t,o=null===(i=d().default.state.currentSpaceStore)||void 0===i?void 0:i.id,r=o?(0,s().AI)(p().A.getData(e,{spaceId:o})):void 0,a=t.getGuestEmails();return{invite_flow_id:n.flowId,user_count:a.length,user_emails:a,invite_space_role_selection:n.selection,is_bot:!1,subscription_tier:r}}},535279:(e,t,i)=>{i.d(t,{P4:()=>o,U1:()=>s,lW:()=>a});i(944114),i(898992),i(354520),i(737550);var n=()=>i(842599);function o(e){const{target:t,inviteTargetsStore:i}=e;return i.state.inviteTargets.some((e=>"newUser"===t.type?e.type===t.type&&t.value.email===e.value.email:"invalidUser"===t.type?e.type===t.type&&t.value.text===e.value.text:"group"===t.type?e.type===t.type&&e.value.group_id===t.value.group_id:e.type===t.type&&e.value.id===t.value.id))}function r(e){return"invalidUser"!==e.type}function s(e){const{inviteTargetsStore:t,includeInputFieldText:i}=e,s=[...t.state.inviteTargets];if(i){const e=function(e){const t=e.state.tokenQuery.trim();if(!(0,n().DT)(t))return;const i={type:"newUser",value:{email:t},source:"email"};return o({target:i,inviteTargetsStore:e})?void 0:i}(t);e&&s.push(e)}return s.filter(r)}function a(e){const{inviteTargetsStore:t,inviteTarget:i}=e;if(o({target:i,inviteTargetsStore:t})){const e=t.state.inviteTargets.filter((e=>"group"===i.type&&"group"===e.type?i.value.group_id!==e.value.group_id:"existingUser"===i.type&&"existingUser"===e.type?i.value.id!==e.value.id:"newUser"!==i.type||"newUser"!==e.type||i.value.email!==e.value.email));return t.setState({...t.state,inviteTargets:e}),!1}return t.setState({inviteTargets:[...t.state.inviteTargets,i],tokenQuery:""}),!0}},542056:(e,t,i)=>{i.d(t,{Ah:()=>R,D6:()=>D,KW:()=>T,Oo:()=>A,Pp:()=>F,St:()=>B,hQ:()=>E,iS:()=>M,kW:()=>j,l5:()=>k,lf:()=>O});i(16280),i(944114),i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(898992),i(354520),i(803949),i(581454);var n=()=>i(842599),o=()=>i(68263),r=()=>i(179034),s=()=>i(96689),a=()=>i(496603),l=()=>i(763824),c=()=>i(534177),u=()=>i(579627),d=()=>i(495867),p=()=>i(731320),v=()=>i(743260),m=()=>i(299545),g=()=>i(37433),f=()=>i(106628),_=()=>i(351360),y=()=>i(57605),S=()=>i(159026),h=()=>i(406999),I=()=>i(630116),x=()=>i(991249),b=()=>i(475355),C=()=>i(134696),w=()=>i(449506);async function k(e){const{environment:t,store:i,sudoModeStore:a,permissionsInviteStore:l,onInviteStart:d,contextualInviteStore:g,inviteOrigin:f}=e,{tokenQuery:_}=l.state;if((0,n().DT)(_.trim())&&(l.state.isInviteTargetsEmpty||!(0,h().qs)(l.state))){const e={type:"newUser",value:{email:_.trim()},source:"email"};v().mQ({target:e,permissionsInviteStore:l})||l.setState({...l.state,inviteTargets:[...l.state.inviteTargets,e],isInviteTargetsEmpty:!1,tokenQuery:""})}if(!l.state.isInviteTargetsEmpty&&l.state.inviteTargets.length>0){null==d||d();const e=l.state;if((0,h().qs)(e)){if(e.table===r().ev){if(!(0,m()._p)(i))throw new Error("Table mismatch.");const{inviteTargets:n,flowId:o,emailMessage:r}=e;l.reset();const s=await u().eP({environment:t,store:i,sudoModeStore:a,inviteTargets:n,inviteRole:void 0,isOnboarding:!1,invite:{inviteFlowId:o,inviteMessage:r,inviteOrigin:f}});return{success:s.success,requestedUserCount:s.success?Object.keys(s.requestedUsers).length:0}}if(e.table===s().NX){if(!(0,m().Yu)(i))throw new Error("Table mismatch.");const{inviteTargets:n,inviteRole:o,flowId:r}=e;l.reset();return{success:(await u().eP({environment:t,store:i,sudoModeStore:a,inviteTargets:n,inviteRole:o,isOnboarding:!1,invite:{inviteFlowId:r,inviteOrigin:f}})).success,requestedUserCount:0}}(0,c().HB)(e)}else{const{inviteRole:n,flowId:r,emailMessage:s}=e;l.reset();const c=await(0,p().hb)(i,e.inviteTargets);if((0,o().PW)(n)){const e=await u().eP({environment:t,store:i,sudoModeStore:a,inviteTargets:c,inviteRole:n,isOnboarding:!1,invite:{inviteFlowId:r,inviteMessage:s,inviteOrigin:f}});return e.success&&(null==g||g.setState({...null==g?void 0:g.state,invitedEmailToUserIdMap:e.invitedUsers})),{success:e.success,requestedUserCount:e.success?Object.keys(e.requestedUsers).length:0}}if((0,m().$R)(i)&&(0,h().nV)(e)){return{success:await u().sQ({environment:t,store:i,inviteTargets:e.inviteTargets,inviteRole:n,createNewTeamFlowId:r}),requestedUserCount:0}}}}return{success:!0,requestedUserCount:0}}function A(e){e.permissionsInviteStore.setState({...e.permissionsInviteStore.state,modalOpen:!1,flowId:void 0})}function T(e){const{permissionsInviteStore:t,contextualInviteStore:i}=e;if(!i)return;const n=[];t.state.inviteTargets.forEach((e=>{if("newUser"===e.type)n.push({email:e.value.email,isGuest:!0});else if("existingUser"===e.type){const t={...e.value,email:e.value.email,isGuest:"none"===e.spaceRole||"not_in_space"===e.spaceRole};n.push(t)}})),i.setState({...i.state,invitedUsers:n})}async function j(e){const{environment:t,store:i,sudoModeStore:n,permissionsInviteStore:o,contextualInviteStore:r,onInviteClick:a,onInviteComplete:l,inviteOrigin:c,intl:u}=e,p=i.getSpaceId(),v=new(I().SL)(t,{table:s().NX,id:p}),m=p?await y().A.awaitData(t,{spaceId:p}):void 0;if((null==r?void 0:r.state.selection)===S().NJ.workspace_member&&v&&(0,g().Gx)(t,m)){if(!(await b().oH({environment:t,flowId:o.state.flowId||"",trackCreateTeamComplete:!1})))return;T({permissionsInviteStore:o,contextualInviteStore:r}),await(0,d().Lg)({environment:t,spaceStore:v,contextualInviteStore:r,from:c,intl:u})}else T({permissionsInviteStore:o,contextualInviteStore:r});let f={success:!1,requestedUserCount:0};try{f=await k({environment:t,store:i,sudoModeStore:n,permissionsInviteStore:o,contextualInviteStore:r,onInviteStart:()=>{null==a||a()},inviteOrigin:c})}catch(_){}finally{null==l||l(f.success,f.requestedUserCount)}}async function M(e){const{environment:t,permissionsInviteStore:i,from:n}=e;await v().iQ({environment:t,permissionsInviteStoreState:i.state,from:n})||i.reset()}function B(e){const{permissionsInviteStore:t,targetToRemove:i,defaultRoleForNonBot:n}=e;if(!t.state.isInviteTargetsEmpty)if((0,h().qs)(t.state))if((0,h().qs)(t.state)){const e=t.state.inviteTargets.filter((e=>e!==i));0===e.length?t.setState({...t.state,inviteTargets:[],inviteRole:n,isInviteTargetsEmpty:!0}):t.setState({...t.state,inviteTargets:e})}else(0,c().HB)(t.state);else{const e=t.state.inviteTargets.filter((e=>e!==i));0===e.length?t.setState({...t.state,inviteTargets:[],inviteRole:n,isInviteTargetsEmpty:!0}):t.setState({...t.state,inviteTargets:e})}}function D(e){const{environment:t,onUpgradeButtonClick:i,upgradeButtonName:n}=e;x().K(t,{from:n,upsell:{type:"product",product:"plus",limit:{type:"none"}}}),null==i||i()}async function R(e,t){const i=new Set(t),n=Array.from(i).map((async t=>{const i=await w().callApi({eventName:"findUser",environment:e,data:{email:t}});if("success"===i.type){const e=i.data;if(e.value){return{type:"existingUser",value:e.value.value}}}return{type:"newUser",value:{email:t},source:"email"}}));return await Promise.all(n)}async function F(e){const t="invitee",{environment:i,permissionsInviteStore:o,event:r}=e;if(!o.state.isInviteTargetsEmpty&&(0,h().qs)(o.state)){const e=r.target.value;o.setState({...o.state,inputFocus:t,tokenQuery:e})}else{const e=r.target.value,{extractedEmails:s,newInputValue:a}=(0,n().Ct)(e),l=(await R(i,s)).filter((e=>!v().mQ({target:e,permissionsInviteStore:o}))),c=[...o.state.inviteTargets,...l];c.length>0?o.setState({...o.state,inviteTargets:c,isInviteTargetsEmpty:!1,inputFocus:t,tokenQuery:a}):o.setState({...o.state,inviteTargets:[],isInviteTargetsEmpty:!0,inputFocus:t,tokenQuery:a})}}function O(e){const{environment:t,newRole:i,permissionsInviteStore:n}=e,{state:o}=n;C().Jy(t,{...v().oX(t,o),invite_updated_role:i}),!o.isInviteTargetsEmpty&&(0,h().qs)(o)||n.setState({...o,inviteRole:i})}async function E(e){var t;const{query:i,environment:n,sectionLimit:o,intl:r,membersOnly:s,importContactType:c}=e,{currentSpaceStore:u}=_().default.state;if(!u)return{inviteUsers:[],inviteBots:[],inviteGroups:[]};const{userLimit:d,botLimit:p,groupLimit:v,importContactLimit:m}=o,g=await f().T.searchActions.load(),[y,S,h,{user:I,email:x},b]=await Promise.all([d>0?g.searchVisibleSpaceUsers({environment:n,query:i,membersOnly:s}):[],p>0?g.searchSpaceBots({environment:n,query:i}):[],v>0?g.searchSpaceGroups({query:i,intl:r}):[],g.searchEmailUser(n,i),m>0?(0,l().nQ)(1500,w().callApi({eventName:"searchContacts",environment:n,data:{spaceId:u.id,limit:m,query:i,importContactType:c}})):void 0]),C=y.slice(0,d).map((e=>({type:"existingUser",value:e}))),k=S.slice(0,p).map((e=>({type:"bot",value:e}))),A=h.slice(0,v).map((e=>({type:"group",value:e})));I&&C.unshift({type:"existingUser",value:I}),x&&C.unshift({type:"newUser",value:{email:x},source:"email"});let T=[];return"success"===(null==b||null===(t=b.result)||void 0===t?void 0:t.type)&&(T=b.result.data.contacts.map((e=>({type:"newUser",value:{email:e.email,name:e.name,avatar_url:e.profile_photo},source:e.type})))),{inviteUsers:a().hS(C,(e=>e.value.email)),inviteBots:k,inviteGroups:A,importedContacts:T}}},549200:(e,t,i)=>{i.d(t,{f:()=>n});const n=i(496603).sg((e=>{let{environment:t,flowId:n,origin:o,type:r}=e;switch(r){case"slack":i(898563).tr(t,{origin:o,invite_flow_id:n});break;case"google":i(278407).Ng(t,{origin:o,invite_flow_id:n});break;default:(0,i(534177).HB)(r)}}),2e3)},552710:(e,t,i)=>{i.d(t,{O:()=>a});i(296540);var n=()=>i(401497),o=()=>i(831310),r=()=>i(100622),s=i(474848);function a(e){const{checked:t}=e,i=(0,n().IS)((e=>({circleCheckmark:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"50%",borderStyle:"solid",borderWidth:1.75,borderColor:t?r().Ay.blue:e.buttonPressedBackground,backgroundColor:t?r().Ay.blue:"transparent"},checkIcon:{height:12,width:12,color:"white"}})),[t]);return(0,s.jsx)("div",{style:i.circleCheckmark,children:t&&(0,o().o)(i.checkIcon)})}},554605:(e,t,i)=>{i.r(t),i.d(t,{GoogleImportsInviteWithModal:()=>re,default:()=>se,shouldEnableGoogleImportsInvite:()=>ae});var n=i(296540),o=()=>i(484714),r=()=>i(56366),s=()=>i(762433),a=()=>i(278407),l=()=>i(433876),c=()=>i(47373),u=()=>i(11978),d=()=>i(803557),p=()=>i(529183),v=()=>i(972418),m=()=>i(787766),g=()=>i(549200);let f=function(e){return e.SearchInput="search_input",e.NoFocus="no_focus",e}({});class _ extends(()=>i(757695))().default{getInitialState(){return{flowId:i(206267).JW(),modalOpen:!1,focus:f.NoFocus}}}const y=_;i(898992),i(354520);var S=()=>i(617871),h=()=>i(857639),I=()=>i(319625),x=()=>i(229833),b=()=>i(449506),C=()=>i(928600),w=()=>i(38337),k=()=>i(722872),A=()=>i(351360),T=()=>i(53137),j=()=>i(970585),M=(i(581454),()=>i(959013)),B=()=>i(562866),D=()=>i(204063),R=()=>i(178830),F=()=>i(157501),O=i(474848);function E(e){const{googleImportsInviteStore:t,inviteTargetsStore:i,inviteOrigin:s,onInviteComplete:l,onInviteClick:c}=e,u=(0,o().v3)(),d=(0,M().tz)(),p=(0,m().X3)(),v=(0,r().K8)((()=>A().default.state.currentSpaceStore),[]),g=(0,r().K8)((()=>t.state.flowId),[t]),_=(0,r().K8)((()=>i.state.inviteTargets.length),[i]),y=(0,n.useCallback)((async e=>{const{response:i,invitedUserEmails:n}=e;a().GH(u,{invite_stage:"invite_complete",invite_flow_id:g,origin:s,is_success:i.success,invited_user_count:n.length}),i.success&&t.setState({...t.state,modalOpen:!1}),null==l||l(i.success,_);(await B().uf.personPropertyInviteActions.load()).showMessageForInviteComplete({success:i.success,invitedUserEmails:n})}),[s,u,g,l,t,_]),S=(0,n.useCallback)((e=>{const t=(0,I().A)(e);a().GH(u,{invite_stage:"invite_member",invited_user_count:_,invite_flow_id:g,error:t,origin:s,is_success:!1})}),[u,g,s,_]),h=(0,n.useCallback)((async()=>{const e=i.state.inviteTargets.filter((e=>"newUser"===e.type||"existingUser"===e.type)).map((e=>e.value.email));if(!v)return null;await R().s({environment:u,spaceStore:v,flowId:g,intl:d,inviteTargetsStore:i,inviteOrigin:s,onInviteComplete:t=>y({response:t,invitedUserEmails:e}),onInviteClick:c,onError:S}),i.reset()}),[v,u,g,i,d,s,c,y,S]),x=(0,n.useCallback)((async()=>{t.setState({...t.state,focus:f.NoFocus}),a().Kt(u,{invited_user_count:_,origin:s,inviteTargets:i.state.inviteTargets.map((e=>e.type.toString())),inviteTokenQuery:i.state.tokenQuery,invite_flow_id:g}),await h()}),[h,u,g,s,t,i,_]);return(0,O.jsx)("div",{style:p.footerStyle,children:(0,O.jsx)(D().A,{size:"lg",style:{borderRadius:6},onClick:x,disabled:0===_,children:(0,O.jsx)(F().V,{totalInviteCount:_})})})}var U=()=>i(331542),L=()=>i(125565);function W(e){const{isLoading:t}=e,i=(0,m().iO)(),n=t?(0,O.jsx)(U().A,{style:{marginLeft:6}}):null;return(0,O.jsxs)("div",{style:i.topContainer,children:[(0,O.jsx)(L().A,{style:i.sendInviteLabel,children:(0,O.jsx)(M().sA,{id:"invite.google_imports.header_title",defaultMessage:"Import from Google"})}),n]})}var H=()=>i(134696),N=()=>i(856952);function P(e){const{inviteTargetsStore:t,googleImportsInviteStore:i,inviteOrigin:s}=e,a=(0,M().tz)(),l=(0,o().v3)(),{tokenQuery:c}=(0,r().K8)((()=>{const{tokenQuery:e}=t.state;return{tokenQuery:e}}),[t]),{focus:d,flowId:p}=(0,r().K8)((()=>({focus:i.state.focus===f.SearchInput,flowId:i.state.flowId})),[i]),g=(0,m().vG)({focus:d}),_=a.formatMessage({id:"invite.google_imports.search.placeholder",defaultMessage:"Search people, emails..."}),y=(0,u().O)(),S=(0,v().lI)({spaceId:y}),h=(0,n.useCallback)((e=>{t.setState({...t.state,tokenQuery:e.target.value}),V({environment:l,flowId:p,billingData:S,origin:s})}),[t,p,s,l,S]);return(0,O.jsx)("div",{style:g.searchBar,children:(0,O.jsx)(N().Ay,{focus:d,onClick:()=>{i.setState({...i.state,focus:f.SearchInput})},format:N().le.Share,value:c,onChange:h,type:"email",tokens:[],autoComplete:"off",placeholder:_,onRemoveLastToken:()=>{},showBorder:!0,inputFullWidth:!0})})}const V=i(496603).sg((e=>{let{environment:t,flowId:i,billingData:n,origin:o}=e;H().D2(t,{invite_flow_id:i,billingData:n,invite_origin:o})}),1e3);var K=()=>i(187174),G=()=>i(542056),q=()=>i(760217),Q=()=>i(802790),z=()=>i(939740),Z=()=>i(89924),X=()=>i(535279),J=()=>i(10984),Y=()=>i(552710),$=()=>i(788427);function ee(e){const{inviteTargetsStore:t,googleImportsInviteStore:i}=e,n=(0,o().v3)(),s=(0,M().tz)(),a=(0,r().K8)((()=>t.state.tokenQuery),[t]),l=(0,r().K8)((()=>i.state.flowId),[i]),[{value:c,status:u}]=(0,K().Yb)((async()=>G().hQ({query:a,sectionLimit:{userLimit:0,botLimit:0,groupLimit:0,importContactLimit:1e3},environment:n,intl:s,membersOnly:!1,importContactType:"google"})),[n,s,a],{debounce:40});return(0,O.jsx)(te,{...e,tokenQuery:a,ready:"pending"!==u,error:"rejected"===u,result:c,flowId:l,environment:n})}function te(e){const{inviteTargetsStore:t,googleImportsInviteStore:i,tokenQuery:n,error:o,ready:s,result:l,inviteOrigin:c,flowId:u,environment:d}=e,p=(0,m().S3)(),v=(0,r().K8)((()=>(null==l?void 0:l.importedContacts)??[]),[l]),g=(0,r().uB)(e.menuListStore,j().A),_={key:"select all",render:e=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Z().A,{...e,style:p.selectAllSectionStyle}),(0,O.jsx)(Q().A,{size:1,innerStyle:p.dividerInnerStyle,style:p.dividerStyle})]}),items:[{key:"select all item",render:e=>(0,O.jsx)(q().A,{...e,title:(0,O.jsxs)("div",{style:p.selectAllStyle,children:[(0,O.jsx)(M().sA,{id:"invite.google_imports.select_all.title",defaultMessage:"Select all"}),(0,O.jsx)(L().A,{style:p.totalCountsStyle,isSmall:!0,children:`(${v.length})`})]}),right:(0,O.jsx)(Y().O,{checked:(0,m().dE)({filteredImportedContacts:v,inviteTargetsStore:t})})}),action:()=>{!function(e){const{filteredImportedContacts:t,inviteTargetsStore:i,environment:n,origin:o,flowId:r,tokenQuery:s}=e;if(i.state.inviteTargets.length===t.length)return i.setState({...i.state,inviteTargets:[]}),void a().we(n,{origin:o,invite_flow_id:r,invited_user_count:0,is_unselect:!0,invite_token_query:s});a().we(n,{origin:o,invite_flow_id:r,invited_user_count:t.length,is_unselect:!1,invite_token_query:s}),i.setState({...i.state,inviteTargets:t})}({filteredImportedContacts:v,inviteTargetsStore:t,origin:c,flowId:u,environment:d,tokenQuery:n}),i.setState({...i.state,focus:f.NoFocus})}}]},y=(0,m().Mg)({filteredImportedContacts:v}),S=Object.keys(y).sort(((e,t)=>"#"===e?1:"#"===t?-1:e.localeCompare(t))).map((e=>function(e){const{charKey:t,importedContacts:i,inviteTargetsStore:n,googleImportsInviteStore:o,menuListStore:r,style:s,tokenQuery:a,environment:l}=e,c={key:`imported contacts with ${t}`,render:e=>(0,O.jsx)(Z().A,{...e,style:s,title:(0,O.jsx)(M().sA,{id:"invite.google_imports.grouped_section.title",defaultMessage:"{charKey}",values:{charKey:t}})}),items:i.sort(((e,t)=>(e.value.name||"").localeCompare(t.value.name||""))).map(((e,t)=>({key:e.value.email,render:t=>(0,O.jsx)(ie,{...t,invited:!1,inviteTarget:e,isInInviteTargets:X().P4({target:e,inviteTargetsStore:n})}),action:()=>{X().P4({target:e,inviteTargetsStore:n})?n.setState({...n.state,inviteTargets:n.state.inviteTargets.filter((t=>"newUser"!==t.type||e.value.email!==t.value.email))}):(H().kH(l,{invite_token_query:a,selected_user_token:e,selected_user_token_rank:t,from:"google_imports_space_setting",subscription_tier:(0,J().AI)(),type:"google_contacts"}),o.setState({...o.state,focus:f.NoFocus}),n.setState({...n.state,inviteTargets:[...n.state.inviteTargets,e]}),r.unsetFocus())}})))};return c}({charKey:e,importedContacts:y[e],inviteTargetsStore:t,googleImportsInviteStore:i,menuListStore:g,style:p.sectionMenuItem,tokenQuery:n,environment:d})));return o?(0,O.jsx)($().V,{isLoading:!s}):(0,O.jsx)(z().Ay,{type:z().Oh.Vertical,initialFocus:n.length>0?0:void 0,sections:[_,...S],store:g})}const ie=n.forwardRef((function(e,t){const{inviteTarget:i}=e;return(0,O.jsx)(ne,{...e,ref:t,inviteTarget:i})})),ne=n.forwardRef((function(e,t){const{inviteTarget:o,isInInviteTargets:r,...s}=e,a=(0,i(401497).IS)((()=>({cellMemberAvatarContainer:{paddingTop:8,paddingBottom:8},iconBox:{position:"absolute",bottom:-3,right:-3},iconBoxImage:{background:"white",padding:2,borderRadius:"100%"}})),[]),l=(0,n.useMemo)((()=>({actorStore:void 0,avatar:{email:o.value.email,name:"google"===o.source?o.value.name:void 0,avatarUrl:"google"===o.source?o.value.avatar_url:void 0}})),[o]);return(0,O.jsx)(q().A,{...s,ref:t,title:(0,O.jsx)(i(623742).A,{isLarge:!0,...l,containerStyle:a.cellMemberAvatarContainer,avatarBadge:(0,O.jsx)(i(854672).A,{type:"image_url",imageURL:i(148307).A.images.externalIntegrations.googleGIconPng,size:18,style:a.iconBox,imageStyle:a.iconBoxImage})}),right:(0,O.jsx)(Y().O,{checked:r})})}));function oe(e){const{inviteTargetsStore:t,googleImportsInviteStore:i,inviteOrigin:s,onInviteComplete:l,onInviteClick:c}=e,u=(0,o().v3)(),[d,p]=(0,n.useState)(!1),v=(0,r().K8)((()=>T().A.externalAuthentications.state.filter((e=>e.integration_id===S().E8))),[]),m=(0,r().K8)((()=>A().default.state.currentSpaceStore),[]),g=(0,r().K8)((()=>i.state.flowId),[i]),f=(0,r().uB)(void 0,j().A);(0,n.useEffect)((()=>{a().k_(u,{invite_flow_id:g,origin:s})}),[u,s,g]),(0,n.useEffect)((()=>{!async function(){if(m&&!d){for(const e of v)await b().callApi({eventName:"loadContacts",environment:u,data:{botId:e.id,spaceId:m.id,integrationId:S().E8,importContactType:"google"}}).catch((e=>{const t=(0,I().A)(e);a().GH(u,{invite_stage:"load_google_contacts",invited_user_count:0,invite_flow_id:g,error:t,origin:s,is_success:!1}),h().log({level:"error",from:"GoogleImportInvite",type:"loadGoogleContacts",error:(0,x().n6)(e)})}));p(!0)}}()}),[m,v,u,d,s,i,g]);const _=function(e){let{googleImportsInviteStore:t,inviteTargetsStore:i,inviteOrigin:n,isLoading:o}=e;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(W,{isLoading:o}),(0,O.jsx)(P,{inviteTargetsStore:i,googleImportsInviteStore:t,inviteOrigin:n})]})}({inviteTargetsStore:t,googleImportsInviteStore:i,inviteOrigin:s,isLoading:!d}),y=function(e){let{googleImportsInviteStore:t,inviteTargetsStore:i,inviteOrigin:n,onInviteComplete:o,onInviteClick:r}=e;return(0,O.jsx)(E,{googleImportsInviteStore:t,inviteTargetsStore:i,inviteOrigin:n,onInviteComplete:o,onInviteClick:r})}({googleImportsInviteStore:i,inviteTargetsStore:t,inviteOrigin:s,onInviteComplete:l,onInviteClick:c}),M=function(e){let{googleImportsInviteStore:t,inviteTargetsStore:i,inviteOrigin:n,menuListStore:o,isLoading:r}=e;if(r)return null;return(0,O.jsx)(ee,{googleImportsInviteStore:t,inviteTargetsStore:i,inviteOrigin:n,menuListStore:o})}({googleImportsInviteStore:i,inviteTargetsStore:t,inviteOrigin:s,menuListStore:f,isLoading:!d}),B={menuType:k().gu.Popup,width:480,height:"60vh",header:_,footer:y,tokenInputHeader:!1,disableScroller:!1};return(0,O.jsx)(C().A,{...B,className:w().bFE,children:(0,O.jsx)("div",{children:M})})}function re(e){const t=(0,o().v3)(),i=(0,u().O)(),{inviteOrigin:c,canEditPermission:f,onInviteComplete:_,onInviteClick:S,buttonLabel:h,buttonStyle:I,buttonContainerStyle:x}=e,{isMobile:b}=(0,o().Y0)(),C=(0,v().lh)({spaceId:i}),w=(0,s().eh)(C,"enterprise"),k=(0,m().Io)(I,x),A=(0,r().uB)(void 0,y),{modalOpen:T,flowId:j}=(0,r().O$)(A),M=(0,n.useCallback)((()=>{!function(e){e.reset()}(A),a().JD(t,{origin:c,invite_flow_id:j})}),[A,c,t,j]),B=(0,r().K8)((()=>{const e=ae({canEditPermission:f,isMobile:b,hasEnterprise:w});return e&&(0,g().f)({environment:t,flowId:j,origin:c,type:"google"}),e}),[f,b,w,t,j,c]),D=(0,r().uB)(void 0,p().Ay);return B?(0,O.jsx)(l().A,{open:T,onDismiss:M,renderContent:()=>(0,O.jsx)(oe,{googleImportsInviteStore:A,inviteTargetsStore:D,inviteOrigin:c,onInviteComplete:_,onInviteClick:S}),origin:(0,O.jsx)(d().KG,{onClickAuthenticated:()=>function(e){e.setState({...e.state,modalOpen:!0})}(A),hideChevronIcon:!0,containerStyle:k.buttonContainer,buttonStyle:k.button,buttonLabel:h,from:"space_settings",inviteOrigin:c,flowId:j,loadContacts:!1})}):null}const se=re;function ae(e){const{canEditPermission:t,isMobile:i,hasEnterprise:n}=e;if(i||n||!t)return!1;return!!c().MT()}},623742:(e,t,i)=>{i.d(t,{A:()=>_,v:()=>f});var n=i(296540),o=()=>i(56366),r=()=>i(310442),s=()=>i(824862),a=()=>i(798880),l=()=>i(959013),c=()=>i(534177),u=()=>i(256863),d=()=>i(125565),p=()=>i(453697),v=()=>i(351360),m=i(474848);function g(e){const{actorStore:t,avatar:i,isLarge:n}=e,o=n?32:28;return t?t.table===s().GP?(0,m.jsx)(u().A,{botStore:t,size:o}):t.table===a().oo?(0,m.jsx)(p().A,{userStore:t,size:o}):t.table===r().yj?(0,m.jsx)(p().A,{userStore:void 0,size:o}):void(0,c().HB)(t):i?(0,m.jsx)(p().A,{avatar:i,size:o}):(0,m.jsx)(p().A,{userStore:void 0,size:o})}function f(e){return"membership_admin"===e?"membership_admin":"editor"===e||"admin"===e?"admin":"none"===e||"guest"===e?"guest":"team_level_guest"===e?"team_level_guest":void("member"!==e&&"read_and_write"!==e&&"no_access"!==e&&"not_in_space"!==e&&e&&(0,c().HB)(e))}const _=function(e){const t=(0,l().tz)(),{actorStore:r,avatar:s,containerStyle:c,id:u,spaceRole:p,avatarBadge:f,caption:_,isLarge:y,restorationStatus:S,hideRolePill:h}=e,I=!h&&("admin"===p||"membership_admin"===p),x="guest"===p||"team_level_guest"===p,b=!h&&x,C=(0,o().K8)((()=>r?r.getDisplayName(t):null==s?void 0:s.name),[r,s,t]),w=(0,o().K8)((()=>{const{currentUserStore:e}=v().default.state;return!!e&&(!!r&&e.id===r.id)}),[r]),k=(0,i(401497).IS)((e=>({titleYouIndicator:{color:e.mediumTextColor}})),[]),A=(0,o().K8)((()=>Boolean(_)?_:r?r.getDetail():null==s?void 0:s.email),[_,r,s]),T=(0,o().K8)((()=>v().default.state.currentSpaceStore),[]),j=(0,o().K8)((()=>(0,i(663590).FI)()),[]),[M,B]=(0,n.useState)(!1);return(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",maxWidth:y?"unset":300,marginLeft:y&&!j?2:0,...c},children:[(0,m.jsxs)("div",{style:{position:"relative",...!y&&{height:28,width:28}},children:[(0,m.jsx)(g,{actorStore:r,avatar:s,isLarge:y}),f]}),(0,m.jsxs)("div",{style:{minWidth:0,marginLeft:y?10:6,marginRight:y?10:6},children:[(0,m.jsxs)("div",{id:u,style:{display:"flex",gap:4},children:[(0,m.jsx)(d().A,{children:w?(0,m.jsx)(l().sA,{id:"cellMemberAvatar.displayName.title",defaultMessage:"{userFullDisplayName} <youIndicatorText>(You)</youIndicatorText>",values:{userFullDisplayName:C,youIndicatorText:e=>(0,m.jsx)("span",{style:k.titleYouIndicator,children:e})}}):C}),I&&(0,m.jsx)(i(34293).A,{role:p}),b&&(0,m.jsx)(i(919172).Q,{labelType:p,shouldUseTabStyle:j}),T&&S&&(0,m.jsx)(i(881753).A,{spaceStore:T,restorationStatus:S,didAttemptRecovery:M})]}),(0,m.jsx)(d().A,{isSmall:!0,style:{display:"flex"},children:(0,m.jsx)(d().A,{isSmall:!0,children:A})})]}),!x&&!M&&T&&(null==r?void 0:r.table)===a().oo&&C&&"canBeRestored"===(null==S?void 0:S.status)&&(0,m.jsx)(i(266324).A,{userStore:r,spaceId:T.id,onSubmit:()=>B(!0)})]})}},652631:(e,t,i)=>{i.d(t,{X:()=>o});i(296540);var n=i(474848);const o=(0,i(340498).wt)("openTeam",{viewBox:"0 0 28 28",svg:(0,n.jsx)("path",{d:"M3.24121 21.4326C3.24121 22.4082 3.80371 23.0322 4.7002 23.0322H22.4629C23.3506 23.0322 23.9131 22.4082 23.9131 21.4326V10.2178C23.9131 9.24219 23.3506 8.61816 22.4629 8.61816H17.2334V5.89355C17.2334 4.91797 16.6709 4.29395 15.7832 4.29395H4.7002C3.80371 4.29395 3.24121 4.91797 3.24121 5.89355V21.4326ZM4.65625 21.1074V6.21875C4.65625 5.86719 4.81445 5.70898 5.16602 5.70898H15.3174C15.6602 5.70898 15.8184 5.86719 15.8184 6.21875V21.1074C15.8184 21.4502 15.6602 21.6172 15.3174 21.6172H13.2959V19.0244C13.2959 18.2686 12.9619 17.917 12.2412 17.917H8.2334C7.5127 17.917 7.17871 18.2686 7.17871 19.0244V21.6172H5.16602C4.81445 21.6172 4.65625 21.4502 4.65625 21.1074ZM7.31934 9.5498H9.0332C9.24414 9.5498 9.39355 9.40918 9.39355 9.18945V7.52832C9.39355 7.31738 9.24414 7.16797 9.0332 7.16797H7.31934C7.1084 7.16797 6.97656 7.31738 6.97656 7.52832V9.18945C6.97656 9.40918 7.1084 9.5498 7.31934 9.5498ZM11.4414 9.5498H13.1465C13.3574 9.5498 13.5068 9.40918 13.5068 9.18945V7.52832C13.5068 7.31738 13.3574 7.16797 13.1465 7.16797H11.4414C11.2217 7.16797 11.0898 7.31738 11.0898 7.52832V9.18945C11.0898 9.40918 11.2217 9.5498 11.4414 9.5498ZM17.2334 21.4326V10.0332H21.9971C22.3398 10.0332 22.498 10.2002 22.498 10.543V21.1074C22.498 21.4502 22.3398 21.6172 21.9971 21.6172H17.2246C17.2334 21.5557 17.2334 21.4941 17.2334 21.4326ZM7.31934 13.0303H9.0332C9.24414 13.0303 9.39355 12.8896 9.39355 12.6699V11.0088C9.39355 10.7979 9.24414 10.6484 9.0332 10.6484H7.31934C7.1084 10.6484 6.97656 10.7979 6.97656 11.0088V12.6699C6.97656 12.8896 7.1084 13.0303 7.31934 13.0303ZM11.4414 13.0303H13.1465C13.3574 13.0303 13.5068 12.8896 13.5068 12.6699V11.0088C13.5068 10.7979 13.3574 10.6484 13.1465 10.6484H11.4414C11.2217 10.6484 11.0898 10.7979 11.0898 11.0088V12.6699C11.0898 12.8896 11.2217 13.0303 11.4414 13.0303ZM19.1582 13.4521H20.5732C20.749 13.4521 20.8721 13.3291 20.8721 13.1533V11.7822C20.8721 11.6064 20.749 11.4834 20.5732 11.4834H19.1582C18.9736 11.4834 18.8682 11.6064 18.8682 11.7822V13.1533C18.8682 13.3291 18.9736 13.4521 19.1582 13.4521ZM7.31934 16.5107H9.0332C9.24414 16.5107 9.39355 16.3613 9.39355 16.1504V14.4893C9.39355 14.2695 9.24414 14.1289 9.0332 14.1289H7.31934C7.1084 14.1289 6.97656 14.2695 6.97656 14.4893V16.1504C6.97656 16.3613 7.1084 16.5107 7.31934 16.5107ZM11.4414 16.5107H13.1465C13.3574 16.5107 13.5068 16.3613 13.5068 16.1504V14.4893C13.5068 14.2695 13.3574 14.1289 13.1465 14.1289H11.4414C11.2217 14.1289 11.0898 14.2695 11.0898 14.4893V16.1504C11.0898 16.3613 11.2217 16.5107 11.4414 16.5107ZM19.1582 16.8096H20.5732C20.749 16.8096 20.8721 16.6865 20.8721 16.5107V15.1396C20.8721 14.9639 20.749 14.8408 20.5732 14.8408H19.1582C18.9736 14.8408 18.8682 14.9639 18.8682 15.1396V16.5107C18.8682 16.6865 18.9736 16.8096 19.1582 16.8096ZM19.1582 20.167H20.5732C20.749 20.167 20.8721 20.0439 20.8721 19.8682V18.4971C20.8721 18.3213 20.749 18.1982 20.5732 18.1982H19.1582C18.9736 18.1982 18.8682 18.3213 18.8682 18.4971V19.8682C18.8682 20.0439 18.9736 20.167 19.1582 20.167ZM8.33008 19.3496C8.33008 19.165 8.42676 19.0684 8.61133 19.0684H11.8633C12.0566 19.0684 12.1445 19.165 12.1445 19.3496V21.6172H8.33008V19.3496Z"})})},749356:(e,t,i)=>{i.d(t,{VY:()=>p,Qm:()=>v,z6:()=>d,OC:()=>f,L6:()=>m,Zc:()=>_,x3:()=>g});var n=()=>i(857639),o=()=>i(386164);const r={plans_page:["lic_25","lic_50","resurrection_offer","ai_fifty_percent_upgrade"],sidebar_upsell:["lic_25","lic_50"]};var s=()=>i(229833),a=()=>i(449506),l=()=>i(901389),c=()=>i(989423),u=()=>i(351360);async function d(e,t){var i;const{spaceId:n,offerCampaign:o}=t;if(!n||!o||null===(i=u().default.state.currentSpaceStore)||void 0===i||!i.canAdmin())return;const r=await a().callApi({eventName:"getCustomerOffer",environment:e,data:{spaceId:n,offerCampaign:o}});return"failed"!==r.type&&"offer"in r.data&&r.data.offer?r.data.offer:void 0}async function p(e){const{environment:t,spaceId:i,offerCampaign:n,entrypoint:o}=e,r=await a().callApi({eventName:"applyCustomerOffer",environment:t,data:{spaceId:i,offerCampaign:n,entrypoint:o??"unknown"}});if("failed"!==r.type)return r;l().Qg(r)}async function v(e,t){const i=await a().callApi({eventName:"applyCustomerOffer",environment:e,data:{...t}});if("failed"!==i.type)return i;l().Qg(i)}async function m(e){const{environment:t,spaceId:i,offerCampaign:n}=e;return void 0!==await d(t,{spaceId:i,offerCampaign:n})}async function g(e){var t;const{environment:i,hasReceived:r,offerType:l,newPlan:c,coupon:d}=e,p=null===(t=u().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId();if(!p)return;const v=await a().callApi({eventName:"updateCustomerOffer",environment:i,data:{spaceId:p,hasReceived:r,offerType:l,newPlan:c,coupon:d},headers:(0,o().WS)({cellId:void 0,spaceId:p})});"failed"===v.type&&n().log({level:"error",from:"offerActions",type:"updateLegacyCustomerOfferFailed",error:(0,s().n6)(v.error)})}async function f(e,t,i){const n=function(e){if(r.hasOwnProperty(e))return r[e]}(i);if(n)for(const o of n){const i=await d(e,{spaceId:t,offerCampaign:o});if((null==i?void 0:i.campaign)===o)return i}}function _(e){let{environment:t,spaceName:i,offerCampaign:n}=e;if(i)switch(n){case"lic_25":case"lic_50":(0,c().WU)(t,"lic_offer_eligible","lic_offer_eligible",3600,{workspace_name:i,lic_25:"lic_25"===n,lic_50:"lic_50"===n});break;case"resurrection_offer":(0,c().WU)(t,"resurrection_offer_eligible","resurrection_offer_eligible",3600,{workspace_name:i});break;default:return}}},777092:(e,t,i)=>{i.d(t,{JQ:()=>u,d5:()=>d,vt:()=>c});var n=()=>i(764880),o=()=>i(310442),r=()=>i(824862),s=()=>i(798880),a=()=>i(534177),l=()=>i(630116);function c(e){const{parentStore:t,pointer:i}=e,o=(0,l().Oo)(t,i).getValue();if(o)return(0,n().D3)({table:i.table,value:o})}function u(e){const{parentStore:t,pointer:i}=e;return i.table===r().GP?l().vK.createChildStore(t,i):i.table===s().oo?l().LU.createChildStore(t,i):i.table===o().yj?l().pH.createChildStore(t,i):void(0,a().HB)(i)}function d(e){return e.table===r().GP?(0,n().oC)(e.getValue()):e.table===s().oo?(0,n().MR)(e.getValue()):e.table===o().yj?(0,n().w2)(e.getValue()):void(0,a().HB)(e)}},787766:(e,t,i)=>{i.d(t,{Hc:()=>c,Io:()=>d,Mg:()=>v,S3:()=>a,X3:()=>l,dE:()=>p,iO:()=>u,vG:()=>s});i(944114),i(898992),i(803949);var n=()=>i(401497),o=()=>i(100622),r=()=>i(284371);function s(e){const{focus:t}=e;return(0,n().IS)((e=>({searchBar:{padding:16},inputStyle:{minWidth:60,width:"auto",borderTopLeftRadius:4,borderTopRightRadius:4,fontSize:14,fontWeight:r().Wy.regular},inputOuterStyle:{padding:6,borderRadius:6,height:20,alignItems:"center",minHeight:32,background:e.accentColors.gray[30],...t&&{background:"none"}}})),[t])}function a(){return(0,n().IS)((e=>({selectAllSectionStyle:{display:"flex",flexDirection:"column",gap:2,padding:"8px 0px 16px 0px"},sectionMenuItem:{padding:"12px 0px 0px 2px",display:"flex",flexDirection:"column",gap:2},dividerStyle:{margin:"0px 16px"},dividerInnerStyle:{borderBottom:`1px solid ${e.stroke.secondary}`},selectAllStyle:{display:"flex",fontSize:14,color:e.text.primary},totalCountsStyle:{paddingLeft:3,fontSize:14,color:e.text.tertiary}})),[])}function l(){return(0,n().IS)((e=>({footerStyle:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:60,padding:"12px 16px 16px 16px",borderTop:`1px solid ${e.stroke.secondary}`}})),[])}function c(){return(0,n().IS)((e=>({labelContainer:{display:"flex",alignItems:"center",color:o().Ay.uiLightBlack,size:14,gap:6},importListButton:{height:28,borderRadius:4,border:void 0,width:"100%"},importListButtonContainer:{padding:"0 6px",alignItems:"center"}})),[])}function u(){return(0,n().IS)((e=>({topContainer:{display:"flex",alignItems:"center",width:"100%",height:40,padding:"0 16px",borderBottom:`1px solid ${e.stroke.secondary}`},sendInviteLabel:{color:e.text.primary,fontSize:14,fontWeight:r().Wy.medium,textAlign:"left",verticalAlign:"top"}})),[])}function d(e,t){return(0,n().IS)((i=>({buttonContainer:{padding:"0 8px",...t},button:{height:32,borderRadius:4,border:`1px solid ${i.stroke.primary}`,...e}})),[e,t])}function p(e){const{filteredImportedContacts:t,inviteTargetsStore:i}=e,n=i.state.inviteTargets.length;return 0!==n&&n===t.length}function v(e){const{filteredImportedContacts:t}=e,i={};return t.forEach(((e,t)=>{const n=e.value.email[0].toUpperCase(),o=/^[A-Za-z]$/.test(n)?n:"#";i[o]||(i[o]=[]),i[o].push(e)})),i}},788427:(e,t,i)=>{i.d(t,{V:()=>a});i(296540);var n=()=>i(959013),o=()=>i(64e3),r=()=>i(267155),s=i(474848);function a(e){let{isLoading:t}=e;return(0,s.jsx)(r().z,{loading:t,children:(0,s.jsx)(o().A,{title:(0,s.jsx)(n().sA,{id:"contactsImportsInviteSearchRequest.searchInput.errorMessage",defaultMessage:"Something went wrong"})})})}},803557:(e,t,i)=>{i.d(t,{KG:()=>s,Xx:()=>r});var n=()=>i(645873);const o={SlackImportContactsButton:new(n().O2)("SlackImportContactsButton",(()=>i.e(55901).then(i.bind(i,659126)))),GoogleImportContactsButton:new(n().O2)("GoogleImportContactsButton",(()=>i.e(37398).then(i.bind(i,97509))))},r=(0,n()._h)(o.SlackImportContactsButton,(e=>e.default)),s=(0,n()._h)(o.GoogleImportContactsButton,(e=>e.GoogleImportContactsButton))},856952:(e,t,i)=>{i.d(t,{Ay:()=>m,le:()=>v,sA:()=>p});var n=i(296540),o=()=>i(484714),r=()=>i(56366),s=()=>i(401497),a=()=>i(496603),l=()=>i(722872),c=()=>i(623580),u=()=>i(545805),d=i(474848);const p="20px";let v=function(e){return e[e.Select=0]="Select",e[e.Person=1]="Person",e[e.Relation=2]="Relation",e[e.FilterValue=3]="FilterValue",e[e.Share=4]="Share",e[e.Group=5]="Group",e}({});const m=n.forwardRef((function(e,t){const{disabled:n,value:o,message:r,right:s,showClearButton:l,format:c,focus:p,dontShowBorderBottom:v,showBorder:m,style:g,onClick:f,inputAndTokenWrapRightStyle:_,tokens:y,hideInput:S,onRemoveLastToken:h,onKeyDown:x,onChange:b,focusInitial:C,focusAfterAnimation:w,preventScrollOnFocus:k,inputFullWidth:A,inputDivStyle:T,inputStyle:j,rightWrapStyle:M,tokenWrapStyle:B,type:D,placeholder:R,onEmptySubmit:F,onSubmit:O,textarea:E,autoComplete:U,onClearButtonClick:L,inputElementAttributes:W,suppressFocusRing:H,onFocus:N,onBlur:P}=e;return(0,d.jsx)(u().A,{debugName:"TokenInputMenuItem",capture:!n,onLeft:a().D_,onRight:a().D_,onSelectAll:a().D_,onRedo:a().D_,onUndo:a().D_,onToggleBold:a().D_,onToggleItalics:a().D_,onToggleCode:a().D_,onCut:a().D_,onCopy:a().D_,onPaste:a().D_,onKeypress:a().D_,children:(0,d.jsx)(u().A,{debugName:"TokenInputMenuItem",capture:!n&&o.length>0,onDelete:a().D_,onBackspace:a().D_,children:(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",flex:1,minWidth:0,gap:r?4:void 0},children:[(0,d.jsx)(I,{ref:t,right:s,showClearButton:l,format:c,focus:p,dontShowBorderBottom:v,disabled:n,showBorder:m,style:g,rightWrapStyle:M,onClick:f,inputAndTokenWrapRightStyle:_,tokens:y,hideInput:S,value:o,onRemoveLastToken:h,onKeyDown:x,onChange:b,focusInitial:C,focusAfterAnimation:w,preventScrollOnFocus:k,inputFullWidth:A,inputDivStyle:T,inputStyle:j,type:D,placeholder:R,onEmptySubmit:F,onSubmit:O,textarea:E,autoComplete:U,onClearButtonClick:L,inputElementAttributes:W,suppressFocusRing:H,onFocus:N,onBlur:P,tokenWrapStyle:B}),r&&(0,d.jsx)(i(125565).A,{isSmall:!0,children:r})]})})})}));function g(e){return e===v.Group}function f(e,t){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",background:t?"none":e.tokenInputMenuItemBackground,cursor:"text",overflow:"hidden",fontSize:14,minHeight:28,padding:4,borderRadius:6}}function _(e){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexShrink:0,minHeight:44,borderBottom:`1px solid ${e.regularDividerColor}`,fontSize:16,background:e.popoverBackground}}const y={borderRadius:4};function S(e){return{[v.Select]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:y,inputDivDesktopFocusStyle:{}},[v.Person]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:y,inputDivDesktopFocusStyle:{}},[v.Relation]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:y,inputDivDesktopFocusStyle:{}},[v.Group]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:y,inputDivDesktopFocusStyle:{}},[v.FilterValue]:{desktopWrapStyleOverride:{padding:"4px 6px",boxShadow:e.inputBoxShadow,background:e.inputBackground},inputDivDesktopStyle:y,inputDivDesktopFocusStyle:{}},[v.Share]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:{margin:"0 0 0 2px",borderTopLeftRadius:4,borderTopRightRadius:4},inputDivDesktopFocusStyle:{}}}}const h=n.forwardRef((function(e,t){let{tokens:i,disabled:r,value:a,onRemoveLastToken:l,onKeyDown:u,onChange:p,focus:v,focusInitial:m,focusAfterAnimation:g,preventScrollOnFocus:f,format:_,inputFullWidth:y,inputDivStyle:S,inputStyle:h,type:I,placeholder:x,onEmptySubmit:C,onSubmit:w,textarea:k,autoComplete:A,inputMenuItemStore:T,onFocus:j,onBlur:M,inputElementAttributes:B,suppressFocusRing:D}=e;const R=(0,s().DP)(),F=(0,o().v3)(),O=(0,n.useCallback)((e=>{"Backspace"===e.key&&0===a.length&&l(),u&&u(e)}),[a,l,u]),E=(0,n.useCallback)((e=>{0===a.length&&C&&C(),w&&w(e)}),[a,C,w]),U=(0,n.useCallback)((()=>{T.setState({focused:!1}),null==M||M()}),[T,M]),L=(0,n.useCallback)((()=>{T.setState({focused:!0}),null==j||j()}),[T,j]),W=0===i.length;return(0,d.jsx)(c().A,{disabled:r,format:c().C.Transparent,onKeyDown:O,onChange:p,value:a,focus:v,focusInitial:m,focusAfterAnimation:g,preventScrollOnFocus:f,style:b(_,F,R,y,S),inputStyle:h||{height:F.device.isMobile?24:20},size:1,ref:t,type:I,placeholder:W?x:"",onSubmit:E,onFocus:L,onBlur:U,textarea:k,autoComplete:A,inputElementAttributes:B,suppressFocusRing:D})})),I=n.forwardRef((function(e,t){const{right:a,showClearButton:c,format:u,focus:p,dontShowBorderBottom:v,disabled:m,showBorder:y,style:I,onClick:b,inputAndTokenWrapRightStyle:C,tokenWrapStyle:w,tokens:k,hideInput:A,value:T,onRemoveLastToken:j,onKeyDown:M,onChange:B,focusInitial:D,focusAfterAnimation:R,preventScrollOnFocus:F,inputFullWidth:O,inputDivStyle:E,inputStyle:U,rightWrapStyle:L,type:W,placeholder:H,onEmptySubmit:N,onSubmit:P,textarea:V,autoComplete:K,onClearButtonClick:G,onFocus:q,onBlur:Q,inputElementAttributes:z,suppressFocusRing:Z}=e,X=(0,s().DP)(),J=(0,o().v3)(),Y=(0,n.useContext)(l().xu),[$,ee]=n.useState(!1),te=(0,r().uB)(void 0,i(995444).A);(0,i(852507).l)((()=>{(p||D)&&te.setState({focused:!0})})),(0,n.useEffect)((()=>{F&&ee(!0),void 0!==p&&te.setState({focused:p})}),[p,te,F]);const ie=(0,r().K8)((()=>te.state.focused),[te]),ne=(0,n.useRef)(null),[oe,re]=(0,i(819121).A)(),se=(0,i(93583).A)(t,ne,oe),ae=(0,n.useCallback)((()=>{var e;m||(null===(e=ne.current)||void 0===e||e.focus(),null==b||b())}),[m,b,ne]),le="combobox"===(null==z?void 0:z.role)&&re&&!Z,ce=function(e){let{environment:t,theme:i,format:n,focus:o,dontShowBorderBottom:s,disabled:a,showBorder:c,menuContext:u,showFocusRing:d}=e;return(0,r().K8)((()=>{const{WindowSizeStore:e}=t,r=S(i)[n];return t.device.isMobile?{..._(i),paddingTop:14,paddingBottom:8,paddingLeft:(null==u?void 0:u.menuType)!==l().gu.Popup?e.getSafePaddingLeftCSS(16):16,paddingRight:(null==u?void 0:u.menuType)!==l().gu.Popup?e.getSafePaddingRightCSS(16):16,...s&&{borderBottom:"none"}}:{...f(i,a),...r.desktopWrapStyleOverride,...c&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},...c&&o&&{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"},...o&&r.inputDivDesktopFocusStyle,...d&&{boxShadow:i.outlineBlueInputBoxShadow}}}),[a,s,t,o,n,null==u?void 0:u.menuType,c,i,d])}({environment:J,theme:X,format:u,focus:p,dontShowBorderBottom:v,disabled:m,showBorder:y,menuContext:Y,showFocusRing:le}),{inputElementAttributes:ue,wrapperElementAttributes:de}=(0,n.useMemo)((()=>{if("combobox"===(null==z?void 0:z.role)){const{role:e,"aria-expanded":t,"aria-haspopup":i,"aria-controls":n,"aria-orientation":o,...r}=z;return{inputElementAttributes:r,wrapperElementAttributes:{role:e,"aria-expanded":t,"aria-haspopup":i,"aria-controls":n,"aria-orientation":o}}}return{inputElementAttributes:z,wrapperElementAttributes:{}}}),[z]);return!J.device.isMobile||a||c?(0,d.jsxs)(i(2143).H,{type:i(756279).A.All,style:{...ce,flexWrap:"nowrap",...I},onClick:ae,...de,children:[(0,d.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,...w,...a||c?C:null},children:[k,!A&&(0,d.jsx)(h,{ref:se,tokens:k,disabled:m,value:T,onRemoveLastToken:j,onKeyDown:M,onChange:B,focus:p,focusInitial:D,focusAfterAnimation:R,preventScrollOnFocus:$,format:u,inputFullWidth:O,inputDivStyle:E,inputStyle:U,type:W,placeholder:H,onEmptySubmit:N,onSubmit:P,textarea:V,autoComplete:K,inputMenuItemStore:te,onFocus:q,onBlur:Q,inputElementAttributes:ue,suppressFocusRing:Z})]}),a||c?(0,d.jsx)("div",{style:{flexShrink:0,...L},children:(0,d.jsx)(x,{showClearButton:c,right:a,onClearButtonClick:G,tokens:k,value:T})}):null]}):(0,d.jsxs)("div",{style:{...ce,flexWrap:"nowrap",...I},onClick:ae,tabIndex:-1,role:"none",...de,children:[(0,d.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,gap:6,overflow:"hidden",marginRight:g(u)?6:0},children:[k,!A&&(0,d.jsx)(h,{ref:se,tokens:k,disabled:m,value:T,onRemoveLastToken:j,onKeyDown:M,onChange:B,focus:p,focusInitial:D,focusAfterAnimation:R,format:u,inputFullWidth:O,inputDivStyle:E,inputStyle:U,type:W,placeholder:H,onEmptySubmit:N,onSubmit:P,textarea:V,autoComplete:K,inputMenuItemStore:te,onFocus:q,onBlur:Q,inputElementAttributes:ue,suppressFocusRing:Z})]}),(0,d.jsx)(i(594739).A,{show:ie})]})}));function x(e){let{showClearButton:t,right:n,onClearButtonClick:r,tokens:a,value:l}=e;const c=(0,i(959013).tz)(),u=(0,s().DP)(),p=(0,o().v3)(),{isMobile:v}=p.device;return n?(0,d.jsx)(d.Fragment,{children:n}):t&&(a.length>0||l.length>0)?(0,d.jsx)(i(704152).A,{"aria-label":c.formatMessage({id:"tokenInputMenuItem.clearButton",defaultMessage:"Clear"}),onClick:r,style:{flexShrink:0,flexGrow:0,borderRadius:v?24:20,marginTop:2},children:(0,i(931121).J)({width:v?16:14,height:v?16:14,fill:u.lightIconColor})}):null}function b(e,t,i,n,o){return{flexGrow:1,flexShrink:1,flexBasis:n?"100%":60,minWidth:60,width:"auto",lineHeight:p,...t.device.isMobile?{margin:"0 8px 8px 0"}:S(i)[e].inputDivDesktopStyle,...o}}},881753:(e,t,i)=>{i.d(t,{A:()=>g});i(296540);var n=()=>i(662303),o=()=>i(56366),r=()=>i(401497),s=()=>i(869190),a=()=>i(959013),l=()=>i(284371),c=()=>i(777092),u=()=>i(962730),d=()=>i(464708),p=()=>i(859428),v=()=>i(125565),m=i(474848);function g(e){let{spaceStore:t,restorationStatus:i,didAttemptRecovery:n}=e;const o=_();return(0,m.jsx)(p().A,{placement:u().W.Bottom,renderTooltip:()=>(0,m.jsx)(f,{spaceStore:t,restorationStatus:i,didAttemptRecovery:n}),render:e=>(0,m.jsx)("div",{...e,children:(0,m.jsx)(d().A,{content:(0,m.jsx)(v().A,{style:o.recentlyReaddedText,children:(0,m.jsx)(a().sA,{id:"userCell.recentlyReadded.label",defaultMessage:"Recently re-added"})}),style:o.recentlyReaddedBadge})})})}function f(e){let{spaceStore:t,restorationStatus:i,didAttemptRecovery:r}=e;const l=_(),{displayName:u,displayTime:d}=function(e){let{spaceStore:t,restorationStatus:i}=e;const r="restored"===i.status?{table:i.restoredByTable,id:i.restoredById,spaceId:t.id}:void 0,l=r?(0,c().JQ)({parentStore:t,pointer:r}):void 0,u=(0,a().tz)(),{displayName:d}=(0,o().K8)((()=>({displayName:null==l?void 0:l.getDisplayName(u)})),[l,u]),p="restored"===i.status?(0,s().W_)(i.restoredTime,"medium_with_time",n().locale):void 0;return{displayName:d,displayTime:p}}({spaceStore:t,restorationStatus:i});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{style:l.tooltipFirstLine,children:(0,m.jsx)(a().sA,{id:"userCell.recentlyReaddedTooltip.label",defaultMessage:"Member was removed and re-added within the last 30 days"})}),r&&(0,m.jsx)("div",{style:l.tooltipSecondLine,children:(0,m.jsx)(a().sA,{id:"userCell.recentlyReaddedTooltip.inProgress.description",defaultMessage:"Restoration of access is in progress",values:{displayName:u,displayTime:d}})}),!r&&u&&d&&(0,m.jsx)("div",{style:l.tooltipSecondLine,children:(0,m.jsx)(a().sA,{id:"userCell.recentlyReaddedTooltip.description",defaultMessage:"{displayName} restored their access on {displayTime}",values:{displayName:u,displayTime:d}})})]})}function _(){return(0,r().IS)((e=>({recentlyReaddedBadge:{background:e.fill.blueSecondary,marginLeft:0,maxWidth:"max-content"},recentlyReaddedText:{color:e.text.bluePrimary,fontSize:l().J.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px"},tooltipFirstLine:{color:e.text.contrastPrimary,fontWeight:l().Wy.semibold},tooltipSecondLine:{color:e.text.contrastSecondary}})),[])}},898563:(e,t,i)=>{i.d(t,{C6:()=>f,Eu:()=>u,FY:()=>s,MP:()=>m,YT:()=>c,d2:()=>g,fK:()=>_,lL:()=>l,mH:()=>y,oI:()=>a,sD:()=>p,tr:()=>d,yS:()=>v});var n=()=>i(989423),o=()=>i(680074),r=()=>i(10984);function s(e){n().vd(e,"add_slack_integration")}function a(e){n().vd(e,"remove_slack_integration")}function l(e,t){n().vd(e,"slack_notification_create",t)}function c(e,t){n().vd(e,"slack_notification_delete",t)}function u(e,t){n().vd(e,"slack_notification_update",t)}function d(e,t){const i=r().AI(),s=o().FX();n().vd(e,"slack_imports_invite_render_button",{subscription_tier:i,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id})}function p(e,t){const i=r().AI(),s=o().FX();n().vd(e,"slack_imports_invite_render_invite_popup",{subscription_tier:i,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id})}function v(e,t){const i=r().AI(),s=o().FX();n().vd(e,"slack_imports_invite_click_invite_button",{subscription_tier:i,domain_type:s,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id})}function m(e,t){const i=r().AI(),s=o().FX();n().vd(e,"slack_imports_invite_completed",{subscription_tier:i,domain_type:s,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id,error:t.error,invite_stage:t.invite_stage})}function g(e,t){const i=r().AI(),s=o().FX();n().vd(e,"slack_imports_invite_dismiss_popup",{subscription_tier:i,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id})}function f(e,t){const i=r().AI(),s=o().FX();n().vd(e,"slack_imports_invite_click_select_all",{subscription_tier:i,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_user_count:t.invited_user_count,is_unselect:t.is_unselect,invite_token_query:t.invite_token_query})}function _(e,t){const i=r().AI(),s=o().FX();n().vd(e,"slack_imports_invite_start_slack_integration",{subscription_tier:i,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}function y(e,t){const i=r().AI(),s=o().FX();n().vd(e,"slack_imports_invite_complete_slack_integration",{subscription_tier:i,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success})}},972418:(e,t,i)=>{i.d(t,{lh:()=>s().l,bw:()=>a().b,UL:()=>l().U,lI:()=>p,IU:()=>y,Wo:()=>v().W,EF:()=>S().E,o2:()=>h().o});var n=()=>i(484714),o=()=>i(187174),r=()=>i(449506);var s=()=>i(714300),a=()=>i(83848),l=()=>i(477401),c=()=>i(56366),u=()=>i(176983),d=()=>i(975971);function p(e){let{spaceId:t}=e;const i=(0,n().v3)(),o=(0,u().J)();return(0,c().K8)((()=>{if(!t||!o)return;const e=d().A.getData(i,{spaceId:t});return null==e?void 0:e.billingData}),[i,t,o])}var v=()=>i(987427),m=()=>i(762433),g=()=>i(351360),f=()=>i(134217),_=()=>i(847554);function y(e,t){const i=(0,c().O$)(e),n=(0,_().b)(i),a=(0,c().K8)((()=>{var e;return null===(e=g().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),l=(0,s().l)({spaceId:a}),u=(0,c().K8)((()=>f().GU({billingData:l,spaceStore:g().default.state.currentSpaceStore})),[l]),[{value:d}]=(0,o().Yb)((()=>r().callApi({eventName:"isEmailEducation",environment:t,data:{}})),[t]);return!!d&&("failed"!==d.type&&(!!d.data.isEligible&&(!!i&&(!!l&&(!Boolean((0,m().KH)(l,"plan"))&&(u&&1===n))))))}var S=()=>i(314907),h=()=>i(86089)},985395:(e,t,i)=>{i.d(t,{n:()=>s});var n=()=>i(56366),o=()=>i(441738),r=()=>i(749240);function s(){return(0,n().K8)((()=>{var e;const t=(null===(e=r().subscriptionDataStoreInstance.state)||void 0===e?void 0:e.addOns)??[];return(0,o().GI)(t)}),[])}},987427:(e,t,i)=>{i.d(t,{W:()=>r});var n=i(296540),o=()=>i(854418);function r(){const e=(0,o().t)(),[t,i]=(0,n.useState)();return(0,n.useEffect)((()=>{i(!(!e||!("company_employee_count"in e))&&parseInt(e.company_employee_count)>99)}),[e]),t}}}]);