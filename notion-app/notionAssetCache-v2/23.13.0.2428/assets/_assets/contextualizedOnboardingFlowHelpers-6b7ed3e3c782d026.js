"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[11126],{71666:(o,e,n)=>{n.r(e),n.d(e,{onboardingFlowNameToFlowConfig:()=>u});var a=n.n(n(794148)),t=()=>n(677338),i=()=>n(867899),r=()=>n(496414),l=()=>n(989423),s=()=>n(285518),d=()=>n(144114),_=()=>n(351360),b=()=>n(508496),g=()=>n(589994),c=()=>n(151168);var m=()=>n(322920);const u={education_flow:{isEnabledForDesktop:!0,isEnabledForMobile:!1,getDesktopStages:()=>["profile","onboarding_workspace_choose","education_persona_survey","education_category_picker"],onStartFlow:()=>{},shouldShowFlowToUser:o=>!1},ai_onboarding_phase_2:{isEnabledForDesktop:!0,isEnabledForMobile:!1,getDesktopStages:()=>["profile","app_builder","onboarding_plan_type_choose","onboarding_collaborative_intent_choose","team_onboarding_function","team_onboarding_timed_trial_offer","team_onboarding_timed_trial_checkout"],onStartFlow:()=>{},shouldShowFlowToUser:o=>{const e=(0,s().R)(_().default.state.currentUserRootStore);void 0===e&&(0,l().u4)({environment:o,event:{eventName:"onboarding_undefined_space_view_count",eventProperties:{}}});const n=0===(e??0),a=o.device.isMobile;return n&&!a&&!!t().v()&&"on"===b().default.getEligibleGroup({experimentId:"ai_builder_onboarding_flow",defaultGroup:"control"})}},form_response_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile","onboarding_workspace_choose"],getMobileStages:()=>["mobile_profile","mobile_onboarding_workspace_choose"],onStartFlow:()=>{},onCompleteFlow:async(o,e,t)=>{a()("form_response_onboarding"===e.flowName);const{defaultOnboardingComplete:r}=await i().F.contextualizedOnboardingActions.load();await r(o,t),n(464510).V(e.formResponseId,e.secretKey,e.formSpaceId)},shouldShowFlowToUser:()=>0===(0,s().R)(_().default.state.currentUserRootStore)&&(0,n(326406).A)()},mail_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>[],getMobileStages:()=>[],onStartFlow:()=>{},onCompleteFlow:async(o,e,a)=>{const{setAndTrackContextualizedOnboardingComplete:t}=await i().F.contextualizedOnboardingActions.load(),{onboardingData:l,joinableSpaces:s}=e;if(!l)return;const{onboardingStateActions:_}=await n(935370).onboardingActionsDependency.load();if(r().m({message:_.messages.creatingWorkspace}),0===s.length&&l.canUserCreateSpace){const a=n(972435).A.getIntl(),i=l.userStore.getFullName(a),{spaceViewStore:r}=await n(426116).bz({environment:o,planType:"personal",name:(0,d().JR)(i||"",a),userRootStore:l.userRootStore,analyticsFrom:"onboarding",icon:void 0,userPersona:"unfilled"});n(72234).I$(o,r,!0),t({environment:o,onboardingState:e,userStore:l.userStore,spaceJoinOrCreate:"create",permissionLevel:"member"})}await g().transactionQueue.drain(),r().V(),await(0,n(838824).Z)({environment:o,from:"contextualizedOnboarding",targetSelf:!0})},shouldShowFlowToUser:()=>"mail"===(0,t().dY)()},calendar_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile"],getMobileStages:()=>["mobile_profile"],onStartFlow:()=>{},onCompleteFlow:async(o,e,a)=>{await g().transactionQueue.drain(),await(0,n(645200).J7)({environment:o,url:`${n(780054).A.domainBaseUrl}/calendarAuth/`,from:"contextualizedOnboarding",targetSelf:!0})},shouldShowFlowToUser:()=>0===(0,s().R)(_().default.state.currentUserRootStore)&&"calendar"===(0,t().dY)()},performance_marketing_term_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!1,getDesktopStages:()=>["profile","onboarding_workspace_choose","onboarding_plan_type_choose","onboarding_collaborative_intent_choose","team_onboarding_invite"],onStartFlow:()=>{},onCompleteFlow:async(o,e,n)=>{const{defaultOnboardingComplete:a}=await i().F.contextualizedOnboardingActions.load();await a(o,n)},shouldShowFlowToUser:o=>!o.device.isMobile&&("gantt"===(0,c().TQ)()||"crm"===(0,c().TQ)()||"projectManagement"===(0,c().TQ)())},mobile_tutorial_onboarding:{isEnabledForDesktop:!1,isEnabledForMobile:!0,getMobileStages:o=>(0,m().getMobileTutorialStages)(o),onStartFlow:()=>{},onCompleteFlow:async(o,e,n)=>{var a,t;const r=e.onboardingData;if(!r)return;const{redirectAfterContextualizedOnboardingComplete:l}=await i().F.contextualizedOnboardingActions.load(),s=(0,d().sg)(r);await l({environment:o,spaceViewId:null===(a=_().default.state.currentSpaceViewStore)||void 0===a?void 0:a.id,spaceId:null===(t=_().default.state.currentSpaceStore)||void 0===t?void 0:t.id,onboardingData:r,spaceJoinOrCreate:"join",redirectData:s,onboardingFlow:e.flowName,onboardingState:e,permissionLevel:(0,d().S1)(s)})},shouldShowFlowToUser:(o,e)=>!!e},default:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile","onboarding_workspace_choose","onboarding_plan_type_choose","onboarding_collaborative_intent_choose","onboarding_category_survey",..."on"===b().default.getEligibleGroup({experimentId:"onboarding_split_team_survey",defaultGroup:"control",disableExposureLogging:!0})?["team_onboarding_function","team_onboarding_role","team_onboarding_company_size"]:["team_onboarding_persona_survey"],"team_onboarding_use_cases","team_onboarding_workspace_create","team_onboarding_invite","team_onboarding_timed_trial_offer","team_onboarding_timed_trial_checkout"],getMobileStages:o=>[...["mobile_profile","mobile_onboarding_workspace_choose","mobile_onboarding_plan_type_choose","mobile_onboarding_collaborative_intent_choose",..."on"===b().default.getEligibleGroup({experimentId:"onboarding_split_team_survey",defaultGroup:"control",disableExposureLogging:!0})?["mobile_team_onboarding_function","mobile_team_onboarding_role","mobile_team_onboarding_company_size"]:["mobile_team_onboarding_persona_survey"],"mobile_onboarding_category_survey","mobile_team_onboarding_use_cases","mobile_team_onboarding_workspace_create","mobile_team_onboarding_invite"],...(0,m().getMobileTutorialStages)(o)],onStartFlow:()=>{},shouldShowFlowToUser:(o,e)=>(void 0===(0,s().R)(_().default.state.currentUserRootStore)&&(0,l().u4)({environment:o,event:{eventName:"onboarding_undefined_space_view_count",eventProperties:{}}}),!e)},undefined:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>[],getMobileStages:()=>[],onStartFlow:()=>{},onCompleteFlow:async()=>{},shouldShowFlowToUser:()=>!1}}},285518:(o,e,n)=>{n.d(e,{R:()=>t});n(898992),n(354520),n(581454);var a=()=>n(496603);function t(o){return o&&o.isReady()?a().sb(o.getSpaceViewStores().filter((o=>o.getJoined())).map((o=>o.getSpaceId()))).length:void 0}},322920:(o,e,n)=>{n.r(e),n.d(e,{getContextualizedOnboardingFlowName:()=>r,getMobileTutorialStages:()=>l});var a=()=>n(820103),t=()=>n(47373),i=()=>n(71666);function r(o,e){for(const n of a().uL){if(i().onboardingFlowNameToFlowConfig[n].shouldShowFlowToUser(o,e))return n}return a().JT}function l(o){switch((0,t().DV)({environment:o})){case"v1":return["mobile_onboarding_home","mobile_onboarding_creation","mobile_onboarding_share","mobile_onboarding_multi_platform"];case"v2":return["mobile_onboarding_home","mobile_onboarding_creation","mobile_onboarding_share"];case"v3":return["mobile_onboarding_skill_mab","mobile_onboarding_skill_filing","mobile_onboarding_skill_swipe"];default:return["mobile_onboarding_editor","mobile_onboarding_sidebar","mobile_onboarding_desktop","mobile_onboarding_web_clipper","mobile_onboarding_app_download"]}}}}]);