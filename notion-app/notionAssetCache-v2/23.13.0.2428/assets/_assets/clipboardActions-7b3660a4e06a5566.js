"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[5834,22542,69184],{136833:(e,t,o)=>{function n(e){return Date.now()-parseInt(e.timestamp)}o.d(t,{S:()=>n})},375078:(e,t,o)=>{o.r(t),o.d(t,{maybeTurnCollectionViewIntoCollectionViewPage:()=>x,transformBlocks:()=>I,transformIntoColumnList:()=>T});o(581454);var n=()=>o(908006),r=()=>o(700500),i=()=>o(179034),a=()=>o(496603),s=()=>o(722101),l=()=>o(44729),c=()=>o(863168),d=()=>o(246826),u=()=>o(797265),p=()=>o(778417),m=()=>o(725614),f=()=>o(317909),g=()=>o(62287),b=()=>o(87017),v=()=>o(594794),k=()=>o(299545),y=()=>o(508496),h=()=>o(630116),S=()=>o(65269);function I(e){const{environment:t,blocks:o,blockType:S,transaction:I}=e;if(S!==r().xd.transclusionContainer)if(S===r().xd.callout&&y().default.checkGate({gateName:"create_v2_callouts"}))!function(e){const{environment:t,blocks:o,transaction:n}=e,a=o[0];if(!a)return;const s=a.getRecordStoreUIParent();if(!s||!(0,k().iU)(s))return;const u=s.getRecordStoreUIParent();if(!(u&&u instanceof h().Bv))return;const f=(0,v().Z1)({environment:t,table:i().ev,spaceId:u.getSpaceId()}),g=d().Wv({environment:t,id:f,type:r().xd.callout,inMemoryRecordCache:s.inMemoryRecordCache,transaction:n,spaceId:u.getSpaceId(),format:{callout_version:2}});l().NI({parentStore:s,childStore:g,after:a.id,transaction:n});C({newParentStore:g.getContentStore(),blocks:o,transaction:n}),c().s4({store:g,transaction:n}),m().clear({environment:t}),p().IU({environment:t}),p().td({environment:t,stores:[g]})}({environment:t,blocks:o,transaction:I});else if(S!==r().xd.columnList)if(S!==r().xd.slide)if((0,r().ZK)(S)){const e=parseInt(S.replace("column","").replace("block","")),r=a().oE(a().Hn(e-1,(()=>b().insertTextBelow({environment:t,blocks:o,transaction:I})))),i=[...o,...r],s=T({environment:t,blocks:i,transaction:I});n().default.afterNextFlush((()=>{m().setSelectionAtStart({store:s[0].getBlockTitleStore()})}))}else for(const r of o)if(r.isCalloutV2()){const e=r.getParentBlockStore();if(e){const i=r.getContentStores();f().applyOperation({store:e,operation:{pointer:e.pointer,path:["content"],command:"insertChildrenAfter",args:{ids:i.map((e=>e.id)),after:r.id}},transaction:I}),l().zz({parentStore:e.getContentStore(),childStore:r,transaction:I});for(const e of i)g().pd({environment:t,block:e,blockType:S,transaction:I,isMultiBlockTransformation:o.length>1});n().default.afterNextFlush((()=>{u().dL(t,i.map((e=>e.id)))}))}}else g().pd({environment:t,block:r,blockType:S,transaction:I,isMultiBlockTransformation:o.length>1});else!function(e){const{environment:t,blocks:o,transaction:n}=e,a=o[0];if(!a)return;const s=a.getRecordStoreUIParent();if(!s||!(0,k().iU)(s))return;const c=s.getRecordStoreUIParent();if(!(c&&c instanceof h().Bv))return;const u=(0,v().Z1)({environment:t,table:i().ev,spaceId:c.getSpaceId()}),f=d().Wv({environment:t,id:u,type:r().xd.slide,inMemoryRecordCache:s.inMemoryRecordCache,transaction:n,spaceId:c.getSpaceId()});l().NI({parentStore:s,childStore:f,after:a.id,transaction:n});C({newParentStore:f.getContentStore(),blocks:o,transaction:n}),m().clear({environment:t}),p().IU({environment:t}),p().td({environment:t,stores:[f]})}({environment:t,blocks:o,transaction:I});else T({environment:t,blocks:o,transaction:I});else!function(e){const{environment:t,blocks:o,transaction:n}=e,a=o[0];if(!a)return;const l=a.getRecordStoreUIParent();if(!l||!(0,k().iU)(l))return;const c=l.getRecordStoreUIParent();if(!c||!(0,k()._p)(c))return;if(!c.isDefined())return;const u=(0,v().Z1)({environment:t,table:i().ev,spaceId:c.getSpaceId()}),f=d().Wv({environment:t,id:u,type:r().xd.transclusionContainer,inMemoryRecordCache:l.inMemoryRecordCache,transaction:n,spaceId:c.getSpaceId()});s().WH({parentStore:l,insertStore:f,afterStore:a,transaction:n});C({newParentStore:f.getContentStore(),blocks:o,transaction:n}),m().clear({environment:t}),p().IU({environment:t}),p().td({environment:t,stores:[f]})}({environment:t,blocks:o,transaction:I})}function x(e){let{environment:t,blocks:o,transaction:n}=e;(function(e){return 1===e.length&&"collection_view"===e[0].getType()})(o)&&I({environment:t,blocks:o,blockType:"collection_view_page",transaction:n})}function T(e){const{environment:t,blocks:o,transaction:n}=e,a=o[0];if(!a)return[];const l=a.recordStoreUIParentStore;if(null==l||!l.valueIs(S()._))return[];const c=(0,v().Z1)({environment:t,table:i().ev,spaceId:a.getSpaceId()}),u=d().Wv({environment:t,id:c,type:r().xd.columnList,inMemoryRecordCache:a.inMemoryRecordCache,transaction:n,spaceId:a.getSpaceId()}),{childStore:p}=s().nc({parentStore:l,insertStore:u,beforeStore:a,transaction:n});return o.map((e=>{const o=(0,v().Z1)({environment:t,table:i().ev,spaceId:a.getSpaceId()}),c=d().Wv({environment:t,id:o,type:r().xd.column,inMemoryRecordCache:a.inMemoryRecordCache,transaction:n,spaceId:a.getSpaceId()}),{childStore:u}=s().TF({parentStore:l,childToRemoveStore:e,transaction:n}),{childStore:m}=s().WH({parentStore:p.getContentStore(),insertStore:c,transaction:n}),{childStore:f}=s().WH({parentStore:m.getContentStore(),insertStore:u,transaction:n});return f}))}function C(e){const{newParentStore:t,blocks:o,transaction:n}=e;for(const r of o){const e=r.getRecordStoreUIParent();null!=e&&e.valueIs(S()._)&&(s().TF({parentStore:e,childToRemoveStore:r,transaction:n}),s().BC({parentStore:t,appendStore:r,transaction:n}))}}},487494:(e,t,o)=>{o.d(t,{A:()=>r});var n=function(e){return e[e.Preview=0]="Preview",e[e.Mention=1]="Mention",e[e.Link=2]="Link",e}(n||{});const r=n},552484:(e,t,o)=>{o.r(t),o.d(t,{clipboardMessages:()=>Bt,copy:()=>mo,copyDirectLinkToContent:()=>Ho,copyFormattedLinkToBlock:()=>Oo,copyHtml:()=>zo,copyLinkToBlock:()=>Wo,copyLinksToBlocks:()=>Uo,copyString:()=>Xo,copyWithToast:()=>Zo,createSelectedMultiColumnBlockSubtree:()=>ro,cutWithMaybeConfirmation:()=>po,getFormulaEditorInformation:()=>Po,getInlineTextValueFromClipboardData:()=>qo,getInlineTitleValueFromClipboardTextHtml:()=>Io,getNotionSelectionClipboardData:()=>to,htmlToMultiTextSelectionClipboardData:()=>So,insertOrTransformToCodeBlock:()=>Lo,markdownToBlocks:()=>Jo,multiTextSelectionToMarkdown:()=>Go,paste:()=>Vo,pasteFilesForBlocks:()=>fo,pasteMarkdown:()=>yo,serializeMultiTextSelectionToClipboardData:()=>so,serializePagePropertiesAsText:()=>io,triggerBrowserCopy:()=>$o});var n={};o.r(n),o.d(n,{clipboardMessages:()=>Bt,copy:()=>mo,copyDirectLinkToContent:()=>Ho,copyFormattedLinkToBlock:()=>Oo,copyHtml:()=>zo,copyLinkToBlock:()=>Wo,copyLinksToBlocks:()=>Uo,copyString:()=>Xo,copyWithToast:()=>Zo,createSelectedMultiColumnBlockSubtree:()=>ro,cutWithMaybeConfirmation:()=>po,getFormulaEditorInformation:()=>Po,getInlineTextValueFromClipboardData:()=>qo,getInlineTitleValueFromClipboardTextHtml:()=>Io,getNotionSelectionClipboardData:()=>to,htmlToMultiTextSelectionClipboardData:()=>So,insertOrTransformToCodeBlock:()=>Lo,markdownToBlocks:()=>Jo,multiTextSelectionToMarkdown:()=>Go,paste:()=>Vo,pasteFilesForBlocks:()=>fo,pasteMarkdown:()=>yo,serializeMultiTextSelectionToClipboardData:()=>so,serializePagePropertiesAsText:()=>io,triggerBrowserCopy:()=>$o});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(430670),o(803949),o(581454),o(908872),o(737550);var r=o.n(o(842838)),i=()=>o(221844),a=()=>o(908006),s=()=>o(764880),l=()=>o(584262),c=()=>o(700500),d=()=>o(970013),u=()=>o(921940),p=()=>o(304740),m=()=>o(634201),f=()=>o(856197),g=()=>o(683259),b=()=>o(107041),v=()=>o(522419),k=()=>o(80979),y=()=>o(977345),h=()=>o(857639),S=()=>o(236162),I=()=>o(416504),x=()=>o(753514),T=()=>o(206267),C=()=>o(777447),M=()=>o(945778),w=()=>o(997769),A=()=>o(128713),_=()=>o(792071),P=()=>o(134025),R=()=>o(364692),D=()=>o(754199),F=()=>o(388821),B=()=>o(696706),V=()=>o(450648),L=()=>o(861017),E=()=>o(179034),N=()=>o(519831),W=()=>o(343666),O=()=>o(161479),U=()=>o(994310),H=()=>o(919709),z=()=>o(439180),X=()=>o(983650),j=()=>o(173979),$=()=>o(708830),Z=()=>o(445120),G=()=>o(959013),J=()=>o(100622),q=()=>o(496603),K=()=>o(498212),Q=()=>o(183558),Y=()=>o(534177),ee=()=>o(939768),te=()=>o(466614),oe=()=>o(921385),ne=()=>o(450510),re=()=>o(404779),ie=()=>o(413962),ae=()=>o(780054),se=()=>o(518736),le=()=>o(71584),ce=()=>o(375078),de=()=>o(267419),ue=()=>o(186445),pe=()=>o(951177),me=()=>o(909470),fe=()=>o(808237),ge=()=>o(492414),be=()=>o(594794),ve=()=>o(611191),ke=()=>o(972435),ye=()=>o(231722),he=()=>o(962845),Se=()=>o(299545),Ie=()=>o(969197),xe=()=>o(53664),Te=()=>o(906537),Ce=()=>o(792002),Me=()=>o(847463),we=()=>o(129522),Ae=()=>o(301421),_e=()=>o(919878),Pe=()=>o(980914),Re=()=>o(562800),De=()=>o(24973),Fe=()=>o(351360),Be=()=>o(673898),Ve=()=>o(227440),Le=()=>o(77246),Ee=()=>o(508496),Ne=()=>o(53137),We=()=>o(732770),Oe=()=>o(630116),Ue=()=>o(502438),He=()=>o(24157),ze=()=>o(611371),Xe=()=>o(559926),je=()=>o(209660),$e=()=>o(812182),Ze=()=>o(755199),Ge=()=>o(680074),Je=()=>o(160475);function qe(e){var t;const{originalHtmlContentSize:o,environment:n}=e;if(o<500)return;const r=(0,Ge().R$)(n),i=null==r||null===(t=r.getSettings())||void 0===t?void 0:t.adoption_entry_points,a=i?i.import_nudge_on_large_paste:void 0;if(a){const e=Ee().default.getConfigKey("adoption_entry_point_time_delta","import_nudge_on_large_paste"),t=a[a.length-1];if(!(Date.now()-t>e.view_delta))return}"nudge_on_large_paste"===Ee().default.getEligibleGroup({experimentId:"adoption_import_entry_point",defaultGroup:"control"})&&((0,Je().t)({environment:n,action:"view",from:"import_nudge_on_paste"}),$e().Iz({message:ke().A.formatMessage(Ke.triggerNudgeOnPasteDescription),presentationType:"persistent",id:"nudge-on-paste",title:ke().A.formatMessage(Ke.triggerNudgeOnPasteTitle),onUserDismiss:()=>{(0,Je().t)({environment:n,action:"dismiss",from:"import_nudge_on_paste"})},onDismiss:()=>{Ze().pr(n,{entryPoint:"import_nudge_on_large_paste"})},actions:{primary:{title:ke().A.formatMessage(Ke.triggerNudgeOnPastePrimaryAction),onAction:()=>{(0,Je().t)({environment:n,action:"click",from:"import_nudge_on_paste"}),Xe().kY(n,{from:"import_nudge_on_paste"}),$e().UW("nudge-on-paste"),je().Ow({currentTab:"imports",openedFrom:"import_nudge_on_paste"})}}}}))}const Ke=(0,G().YK)({triggerNudgeOnPasteTitle:{id:"adoption.nudgeOnPaste.title",defaultMessage:"Import content directly"},triggerNudgeOnPasteDescription:{id:"adoption.nudgeOnPaste.description",defaultMessage:"Get all your content into Notion with a click"},triggerNudgeOnPastePrimaryAction:{id:"adoption.nudgeOnPaste.primaryAction",defaultMessage:"Import now"}});var Qe=()=>o(970330),Ye=()=>o(989423),et=()=>o(136833);var tt=()=>o(541372),ot=(o(16280),o(672577),()=>o(741237)),nt=()=>o(842989),rt=()=>o(220719),it=()=>o(44729),at=()=>o(534402),st=()=>o(108944),lt=()=>o(20313),ct=()=>o(695625),dt=()=>o(257216),ut=()=>o(606952),pt=()=>o(725614);function mt(e){var t;const{environment:o,clipboardData:n,transaction:r,allowPasteIntoHeaderWithoutChildren:i,selectAll:s,preventLegacyTransclusions:l}=e;if(He().default.isEditingComment()||(0,Ce().X4)())return!1;if(function(e,t){return e.blockSelection.blocks.some((e=>{var o;if(!e.blockSubtree)return!0;const n=null===(o=e.blockSubtree.getModel({id:e.blockId,table:E().ev}))||void 0===o?void 0:o.spaceId;return!!(n&&t&&te().Lw({sourceSpaceId:n,targetSpaceId:t,sourceBlockSubtree:e.blockSubtree}))||void 0}))}(n,null===(t=Fe().default.state.currentSpaceStore)||void 0===t?void 0:t.id))return!1;const d=He().default.state;if("editing"!==d.mode)return!1;const u=d.multiSelection.start.store;if(!u.isTable(E().ev))return!1;const p=(0,Ie().T)(u);if(!p)return!1;if(u!==p.getBlockTitleStore())return!1;const m=p.getType(),f=p.getFormat();if(!m)return!1;if(!((0,c().IU)(m,f)||i&&(0,c().CN)(m)))return!1;if(i&&(0,c().CN)(m)){const e=n.blockSelection.blocks[0],t=null==e?void 0:e.blockId,o=null==e?void 0:e.blockSubtree,r=t&&o?o.getModel({id:t,table:"block"}):void 0;if(Boolean(null==r?void 0:r.getContentLength()))return!1}const g=(0,lt().Ag)({includeNonSelectableListContainer:!0});if(!g)return!1;const b=(0,lt().Xs)(p,[g]);if(!b)return!1;let v=0;for(let a=b.length-1;a>=0;a--){const e=b[a].value.store,t=ct().T.findSelectableFromStore(e),o=e.getModel();if(null!=o&&o.isType(c().U6)||t&&!t.props.canSelect){v=a;break}}const k=b.slice(v);if(0===k.length)return!1;const y=k[0].value.store,h=y.pointer.spaceId,S=y.isInsideTemplate()||y.isInsideFactoryOrDuplicateBlocksAction();r.logDebugMessage("pasteMultiTextSelection: pasting",k,{spaceId:h,pastingIntoTemplate:S,insertionPathRootStore:y});const I=n.blockSelection.blocks.map((e=>{var t;let{blockId:n,blockSubtree:i}=e;if(!i)throw new Error("Missing data for local duplicate block during paste");const a=(null===(t=i.getModel({table:E().ev,id:n}))||void 0===t?void 0:t.getType())===c().xd.factory,s=!(S||a),d=Oe().Bv.createChildStore(y,{table:E().ev,id:n}),u=le().localDuplicate({environment:o,sourceBlockId:n,targetBlockPointer:(0,be().zP)({environment:o,table:E().ev,spaceId:h}),sourceBlockSubtree:i,targetInMemoryRecordCache:y.inMemoryRecordCache,addCopyName:(0,xe().A)(d),deepCopyTransclusionContainers:!1,resolveTemplateVariables:s,transaction:r,preventLegacyTransclusions:l}),m=u.targetBlockStore.getType();return m&&Qe().v(o,{from:"paste",type:m,new_page_id:"page"===m?u.targetBlockStore.id:void 0,creating_block_id:u.targetBlockStore.id,parent_collection_id:p.getParentCollectionIdUpToTwoLevels()}),u})),x=n.multiTextSelection.start.pointerPath,T=n.multiTextSelection.end.pointerPath,C=[],M=[],w=Math.max(x.length,T.length),A=(k[k.length-w]||k[0]).value.store,_=(0,$().v)({node:n.tree,recordStoreParent:A},(e=>{let{node:t,recordStoreParent:o}=e;const n=((e,t)=>{let o;for(const{originalToDuplicate:n}of I)if(o=n.get(t),o)break;if(o)return Oe().Bv.createChildStore(e,o)})(o,t.value),r=C.length<x.length?x[C.length]:void 0,i=M.length<T.length?T[M.length]:void 0;let a=!1;if((null==r?void 0:r.id)===t.value.id&&(a=!0,C.push(n)),(null==i?void 0:i.id)===t.value.id&&(a=!0,M.push(n)),!a)return{value:{store:n}};const s=(null==n?void 0:n.getContentStore())||y;return{value:{store:n},children:t.children.map((e=>({node:e,recordStoreParent:s})))}}));if(C.length!==x.length||0===C.length)throw new Error(`Failed to hydrate start path during paste (found ${C.length} of ${x.length})`);if(M.length!==T.length||0===M.length)throw new Error(`Failed to hydrate end path during paste (found ${M.length} of ${T.length})`);const P=C[C.length-1],R=M[M.length-1];if(!P||!R)throw new Error(`Failed to hydrate position during paste (${P?"":"missing start"} ${R?"":"missing end"})`);const D=(0,$().Qe)([_],(e=>e.value.store===P)),F=(0,$().Qe)([_],(e=>e.value.store===R)),B=D&&F&&nt().W.fromNearestCommonAncestor(D,F);if(!B)throw new Error(`Failed to build range for paths: ${D?"":"missing start"} ${F?"":"missing end"}`);ut().f0({environment:o,multiSelection:d.multiSelection,transaction:r});const V=He().default.state,L="editing"===V.mode?V.multiSelection:d.multiSelection;if((0,Se().P4)(p)&&0===n.multiTextSelection.start.textIndex){const e=P.getType();e&&(0,c().aO)(e)&&ce().transformBlocks({environment:o,blocks:[p],blockType:e,transaction:r})}let N;return y.useCrdt()?(gt({transaction:r,clipboardData:n,startBlockStore:p,duplicateStartStore:P,range:B,insertionPath:k,duplicates:I,insertionPathRootStore:y}),N=ft({environment:o,transaction:r,clipboardData:n,insertionPoint:L,textSelectionState:d,duplicateEndStore:R,pastingIntoTemplate:S}).newSelectionIndex):(N=ft({environment:o,transaction:r,clipboardData:n,insertionPoint:L,textSelectionState:d,duplicateEndStore:R,pastingIntoTemplate:S}).newSelectionIndex,gt({transaction:r,clipboardData:n,startBlockStore:p,duplicateStartStore:P,range:B,insertionPath:k,duplicates:I,insertionPathRootStore:y})),a().default.afterNextFlush((()=>{const e=(0,lt().PY)({rootStore:y,root:g,target:B.end}),t=e&&(0,Ie().aI)(e[e.length-1]);if(!t)return;const o={start:{index:s?L.start.index:N,store:s?L.start.store:t},end:{index:N,store:t}};pt().setMultiSelection({multiSelection:o})})),!0}function ft(e){const{insertionPoint:t,duplicateEndStore:o,pastingIntoTemplate:n,environment:r,transaction:i,clipboardData:a}=e;let s=0;const l=t.end.store,c=t.end.index,d=(0,Ie().aI)(o);if(d){s=H().qAZ(d.getValue()).length;const e=(0,rt().o9)((0,Ie().T)(l)),t=(0,rt().o9)((0,Ie().T)(d));se().Le({store:l,blockStore:e})&&se().Le({store:d,blockStore:t})?(at().X0({sourceBlockStore:e,targetBlockStore:t,splitAtGraphemeIndex:c,transaction:i,moveIntoNewBlock:!1}),i.logDebugMessage("(CRDT) pasted suffix into end",d)):(ut().jN({environment:r,sourceStore:l,sourceIndex:c,targetStore:d,targetIndex:s,transaction:i}),i.logDebugMessage("pasted suffix into end",d))}else ut().jQ({environment:r,transaction:i,store:l,selection:{startIndex:c,endIndex:1/0}}),i.logDebugMessage("no end title store to paste text into");let u=H().Uee(a.multiTextSelection.start.copiedText,{removeSuggestionAnnotationsAndText:!1,removeSuggestionAnnotations:!0,removeDiscussions:!0});return n||(u=(0,j().f$)(u,{currentUserId:r.currentUser.id,currentTimeZone:(0,I().P)()})),ut().yr({environment:r,index:t.start.index,store:t.start.store,tokens:u,transaction:i}),{newSelectionIndex:s}}function gt(e){const{transaction:t,clipboardData:o,startBlockStore:n,duplicateStartStore:r,insertionPath:i,insertionPathRootStore:a,duplicates:s,range:l}=e,c=Ee().default.checkGate({gateName:"prefer_high_level_operations"});for(const p of l.iterateInsertionAt(i))(0,lt().eM)({transaction:t,treeOperation:p,deleteFrom:"tree-parent",preferHighLevelOperations:c}),ot().O.applyMutable(p);if(o.blockSelection.wasContiguousSelection&&o.blockSelection.blocks.length>0&&!n.hasContent())for(const p of r.getContentStores())it().NI({parentStore:n.getContentStore(),childStore:p,transaction:t});const d=new Set;for(const{originalToDuplicate:p}of s){const e=p.getByTable(E().ev);for(const{value:o}of e){var u;if(!o||d.has(o.id))continue;d.add(o.id);const e=Oe().Bv.createChildStore(r,o),n=(0,st().g7)(e),i="transclusion_reference"===a.getType()?null===(u=a.getTransclusionReferenceTargetStore())||void 0===u?void 0:u.id:a.id;n.find((e=>e.id===i))||(t.logDebugMessage("disposing of unwanted duplicated block",e,e.id===r.id),dt().bn({childStore:e,parentStore:a,alive:!1,transaction:t}))}}}var bt=()=>o(899038),vt=()=>o(901389),kt=()=>o(705540),yt=()=>o(675074),ht=()=>o(131581),St=()=>o(813743),It=()=>o(722101),xt=()=>o(246826),Tt=()=>o(797265),Ct=()=>o(778417),Mt=()=>o(436572),wt=()=>o(4319),At=()=>o(538527),_t=()=>o(317909),Pt=()=>o(633457);const Rt=!1;function Dt(){if(Rt){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.log("clipboardActions:",...t)}}const Ft=(0,G().YK)({offlineError:{id:"clipboardActions.offlineError.message",defaultMessage:"Please go online to copy this block."},untitled:{defaultMessage:"Untitled",id:"clipboardActions.untitledMessage"}}),Bt=(0,G().YK)({copiedQnAMessageToClipboard:{id:"action.copiedQnAMessageToClipboard",defaultMessage:"Copied response to clipboard"},copiedHumanMessageToClipboard:{id:"action.copiedHumanMessageToClipboard",defaultMessage:"Copied your message to clipboard"},copiedEmailToClipboard:{id:"action.copiedEmailToClipboard.snackBarMessage",defaultMessage:"Copied email to clipboard"},copiedUserIdToClipboard:{id:"action.copiedUserIdToClipboard.snackBarMessage",defaultMessage:"Copied user ID to clipboard"},copiedLinkToClipboard:{id:"action.copiedLinkToClipboard.snackBarMessage",defaultMessage:"Copied link to clipboard"},copiedPageLinkToClipboard:{id:"action.copiedPageLinkToClipboard.snackBarMessage",defaultMessage:"Copied page link to clipboard"},copiedFormLinkToClipboard:{id:"action.copiedFormLinkToClipboard.snackBarMessage",defaultMessage:"Copied form link to clipboard"},copiedTeamHomeLinkToClipboard:{id:"action.copiedTeamHomeLinkToClipboard.snackBarMessage",defaultMessage:"Copied page link to clipboard"},copiedBlockLinkToClipboard:{id:"action.copiedBlockLinkToClipboard.snackBarMessage",defaultMessage:"Copied block link to clipboard"},copiedLinksToClipboard:{id:"action.copiedLinksToClipboard.snackBarMessage",defaultMessage:"Copied links to clipboard"},copiedPropertyToClipboard:{id:"action.copiedPropertyToClipboard.snackBarMessage",defaultMessage:"Copied property to clipboard"},copiedCodeToClipboard:{id:"action.copiedCodeToClipboard.snackBarMessage",defaultMessage:"Copied code to clipboard"},copiedTokenToClipboard:{id:"action.copiedTokenToClipboard.snackBarMessage",defaultMessage:"Copied token to clipboard"},copiedToClipboard:{id:"action.copiedToClipboard.snackBarMessage",defaultMessage:"Copied to clipboard"},copiedApiObjectToClipboard:{id:"action.copiedApiObjectToClipboard.snackBarMessage",defaultMessage:"Copied API object to clipboard"},copiedImageToClipboard:{id:"action.copiedImageToClipboard.snackBarMessage",defaultMessage:"Copied image to clipboard"},copyImageError:{id:"action.copyImageError.snackBarMessage",defaultMessage:"Failed to copy image to clipboard"},copiedPageToClipboard:{id:"action.copiedPageToClipboard.snackBarMessage",defaultMessage:"Copied page to clipboard"}}),Vt={...o(335098).q,dockerfile:"Docker",javascriptreact:"JavaScript",jsonc:"JSON","objective-c":"Objective-C",proto:"Protobuf",shellscript:"Shell",typescriptreact:"TypeScript",vb:"Visual Basic"},Lt="text/_notion-blocks-v3-production",Et="text/_notion-text-production",Nt="text/_notion-multi-text-production",Wt="text/_notion-page-source-production",Ot="vscode-editor-data",Ut=[Lt,Et,Nt,Wt],Ht=new Set(Ut);const zt={fromJson:e=>e,toJson:e=>e},Xt=zt,jt=zt,$t=zt,Zt={fromJson(e){const t=(0,$().v)(e.tree,(e=>e)),o=Gt.fromJson(e.blockSelection);return{...e,tree:t,blockSelection:o}},toJson(e){const t=Gt.toJson(e.blockSelection);return{...e,blockSelection:t}}},Gt={fromJson:e=>({...e,blocks:e.blocks.map((e=>({...e,blockSubtree:e.blockSubtree?F().RecordMap.create(e.blockSubtree):void 0})))}),toJson:e=>({...e,blocks:e.blocks.map((e=>({...e,blockSubtree:e.blockSubtree?e.blockSubtree.toJson():void 0})))})},Jt="VirtualClipboard:production";let qt;function Kt(e){return e.isAndroid}function Qt(e,t){if(!Kt(t))return e;const o=(0,pe().n8)(e.getData("text/html"));if(o){qt||(qt=U().A.get(Jt));const t=qt;if(o===(null==t?void 0:t.id)){const o=e.types.concat(Object.keys(t.mimeTypes));return{getData(o){const n=e.getData(o);return!n&&function(e){return Ht.has(e)}(o)?t.mimeTypes[o]||"":n},types:[...new Set(o)].filter((o=>{const n=t.mimeTypes[o];return""!==e.getData(o)||n&&""!==n})),items:e.items}}}return e}function Yt(e,t,o,n){if(!e.clipboardData)return;const r=o.toJson(n),i=JSON.stringify(r);e.clipboardData.setData(t,i)}function eo(e,t,o){try{const n=e.getData(t),r=JSON.parse(n);return o.fromJson(r)}catch(n){return}}function to(e){const{clipboardData:t}=e,{text:o,html:n,isFromMicrosoftOffice:r,isHtmlTable:i}=function(e){const{clipboardData:t,tinyMceMicrosoftWordPasteFilter:o}=e,n=t.getData("text/uri-list"),r=t.getData("text/plain").replace(Bo,"\n")||n,i=t.getData("text/html"),a=wo(i),{isHtmlTable:s,htmlContainsRichFormatting:l}=function(e){var t;const o=document.createElement("div");o.innerHTML=Ao(e);const n=Boolean("table"===(null===(t=o.firstElementChild)||void 0===t?void 0:t.nodeName.toLowerCase()));return{htmlContainsRichFormatting:x().HZ({node:o,window,emojiData:de().A.state}),isHtmlTable:n}}({html:i,tinyMceMicrosoftWordPasteFilter:o});if(!l&&!function(e,t){return Fo.test(e)&&Fo.test(t)}(i,r))return{text:r,isFromMicrosoftOffice:a,isHtmlTable:s};return{text:r,html:i,isFromMicrosoftOffice:a,isHtmlTable:s}}(e);return{text:o,html:n,multiTextSelectionData:eo(t,Nt,Zt),textSelectionData:eo(t,Et,Xt),blockSelectionData:eo(t,Lt,Gt),isFromMicrosoftOffice:r,isHtmlTable:i}}function oo(e){const{blocks:t,action:o,environment:n}=e;if(0===t.length)return{action:o,blocks:[],wasContiguousSelection:!1};const r=t[0],i=r.inMemoryRecordCache,a=q().sb(q().oE(t.map((e=>e.id)))),s=r.getParentBlockStore(),l=s?s.getRenderableContentIds():[],c=l.indexOf(r.id),d=Boolean(s&&t.every(((e,t)=>l.indexOf(e.id)===c+t)));if(i.isTemplatePreview){return{blocks:a.map((e=>({blockId:e,blockSubtree:le().loadLocalSubtree(n,{blockId:e,inMemoryRecordCache:i,allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!0,allowCopyExternalObjectInstances:!0,excludeCrdtData:!0,includeLegacyTransclusionBlockValues:(0,ve().$J)()}).recordMap}))),action:o,wasContiguousSelection:d}}if(i.snapshotData){!function(e,t){Ye().vd(e,"history_copy",{ageMs:(0,et().S)(t)})}(n,i.snapshotData);return{blocks:a.map((e=>({blockId:e,blockSubtree:le().loadLocalSubtree(n,{blockId:e,inMemoryRecordCache:i,allowCopyCollections:!0,requireFullSubtree:!0,skipNavigableChildren:!0,skipTransclusionContainerChildren:!0,allowCopyExternalObjectInstances:!0,excludeCrdtData:!0,includeLegacyTransclusionBlockValues:(0,ve().$J)()}).recordMap}))),action:o,wasContiguousSelection:d,wasSelectionFromSnapshot:!0}}{const e=(0,pe().x4)(t),r=e&&ro({environment:n,inMemoryRecordCache:i,multiColumnPasteInfo:e});if(e&&r){let t=!1;const s=[];for(const o of a)e.blockIds.has(o)?t||(s.push({blockId:e.columnListId,blockSubtree:r}),t=!0):s.push({blockId:o,blockSubtree:le().loadLocalSubtree(n,{blockId:o,inMemoryRecordCache:i,allowCopyCollections:!1,requireFullSubtree:!0,skipTransclusionContainerChildren:!0,allowCopyExternalObjectInstances:!0,excludeCrdtData:!0,includeLegacyTransclusionBlockValues:(0,ve().$J)()}).recordMap});return{blocks:s,action:o,wasContiguousSelection:d}}return{blocks:a.map((e=>({blockId:e,blockSubtree:le().loadLocalSubtree(n,{blockId:e,inMemoryRecordCache:i,allowCopyCollections:!1,requireFullSubtree:!0,skipTransclusionContainerChildren:!0,allowCopyExternalObjectInstances:!0,excludeCrdtData:!0,includeLegacyTransclusionBlockValues:(0,ve().$J)()}).recordMap}))),action:o,wasContiguousSelection:d}}}function no(e){const{markdown:t,markdownOptions:o,markdownLinkifyIt:n}=e;if(n)return A().uY({...n,markdown:t,plugin:null==o?void 0:o.plugin})}function ro(e){var t;const{environment:o,multiColumnPasteInfo:n,inMemoryRecordCache:r}=e,{columnListId:i,columnIds:a,spaceId:s}=n,l=F().RecordMap.create(),c=null===(t=r.getEntry({pointer:{table:E().ev,id:i,spaceId:s},userId:o.currentUser.id}))||void 0===t?void 0:t.value.value;if("column_list"!==(null==c?void 0:c.type))return;const d={...c,content:(c.content||[]).filter((e=>a.has(e)))};l.setValue({table:E().ev,id:i,spaceId:s},d);for(const m of a){var u;const e=null===(u=r.getEntry({pointer:{table:E().ev,id:m,spaceId:s},userId:o.currentUser.id}))||void 0===u?void 0:u.value.value;if("column"!==(null==e?void 0:e.type))return;const t={...e,content:(e.content||[]).filter((e=>n.blockIds.has(e)))};l.setValue({table:E().ev,id:m,spaceId:s},t)}const p=[l];for(const m of n.blockIds){const e=le().loadLocalSubtree(o,{blockId:m,inMemoryRecordCache:r,allowCopyCollections:!1,requireFullSubtree:!0,skipTransclusionContainerChildren:!0,allowCopyExternalObjectInstances:!0,excludeCrdtData:!0,includeLegacyTransclusionBlockValues:(0,ve().$J)()}).recordMap;if(!e)return;p.push(e)}return F().RecordMap.merge(p)}function io(e){const{rootBlock:t,getRecordValue:o}=e,n=o(t);if(!n)return;const r=(0,S().zN)({block:n,getRecordValue:o});if(!r)return;const i=(0,pe().M9)({rootBlock:t,getRecordValue:o,formulasModule:k()}),a=(0,d().Dp)(r),s=Object.keys(a),l=q().Ul(s,(e=>{const t=a[e];return t&&t.name||""}));let c="";for(const d of l){const e=a[d];if(e&&"title"!==d){const t=(0,g().sL)({property:d,schema:a,block:n,exportArgs:i,renderers:f().z});t&&(c+=`${e.name}: ${t}\n`)}}return c||void 0}function ao(e){const{treePath:t,textPosition:o,endpoint:n}=e,{store:r,index:i}=o,a=t.map((e=>e.value.store.pointer)),s=se().SL(o.store)?["properties","title"]:o.store.path,l=H().AI5(r.getValue(),i,i);return{copiedText:"end"===n?l.tokensBeforeRange:l.tokensAfterRange,textIndex:i,attributePath:s,pointerPath:a}}function so(e){var t;const{multiSelection:o,action:n,environment:r}=e;(0,ye().KP)(o)&&console.warn("Warning, serializeMultiTextSelectionToClipboardData() was called with a single-store text selection! This function should only be  called with a multi-selection that spans multiple blocks.");const i=null===(t=(0,he().ZS)({filterCommonAncestors:!0,multiSelection:o,focus:void 0}))||void 0===t?void 0:t.stores;if(!i)return;const a=o.start.store.inMemoryRecordCache,s=oo({action:n,blocks:i,environment:r});if(0===s.blocks.length)return;const l=(0,he().Tp)({multiSelection:o,includeNonSelectable:!1});if(!l)return;const{treeRange:c}=l,d=[],u=new Map,p=(e,t)=>{t.forEach((e=>p(e,[])));const o=u.get(e),n=o&&o.length>t.length?o:t;u.set(e,n)},m=Ee().default.checkGate({gateName:"prefer_high_level_operations"});for(const{start:y,end:h}of c.iterateAnalogousNodes()){if(y){const e=y.childrenBeforeRange.slice(-1).concat(y.childrenInsideRange);p(y.parent,e)}if(h)if(p(h.parent,h.childrenInsideRange),m)for(const e of h.childrenAfterRange)d.push({command:"removeChild",path:["content"],pointer:h.parent.value.store.pointer,args:{id:e.value.store.id}});else d.push(P().op.set({pointer:h.parent.value.store.pointer,path:["content"],args:h.childrenInsideRange.map((e=>e.value.store.id))}))}const f=ao({textPosition:o.start,endpoint:"start",treePath:c.startPath}),g=ao({textPosition:o.end,endpoint:"end",treePath:c.endPath});d.push(...(0,pe().Qr)(f),...(0,pe().Qr)(g));for(const y of[null===(b=s.blocks[0])||void 0===b?void 0:b.blockSubtree,null===(v=s.blocks[s.blocks.length-1])||void 0===v?void 0:v.blockSubtree]){var b,v;y&&((0,R().NI)({recordMap:y,operations:d,updateOnly:!0}),m&&lo(r,a,y))}const k=(0,$().v)(c.commonAncestor,(e=>{const t=u.get(e);if(t)return{value:e.value.store.pointer,children:t}}));if(k)return{blockSelection:s,tree:k,multiTextSelection:{start:f,end:g},action:n};Dt("unexpected: trimming tree produced undefined")}function lo(e,t,o){const n=[];for(const{model:r}of o)if(r instanceof _().zgg&&!r.alive){n.push(r.pointer);const o=le().loadLocalSubtree(e,{blockId:r.pointer.id,inMemoryRecordCache:t,allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!0,allowCopyExternalObjectInstances:!0,excludeCrdtData:!0,includeLegacyTransclusionBlockValues:(0,ve().$J)()}).recordMap;if(o)for(const{pointer:e}of o)n.push(e)}for(const r of n)o.delete(r)}function co(e){const{environment:t,event:o}=e,n=T().JW();!function(e){const{environment:t,event:o,markdownLinkifyIt:n}=e;if(!o.clipboardData)return;const r=Ue().default.state.stores,i=He().default.isEditingComment(),a=De().A.state.open,s=Pe().wg(),l="empty"!==He().default.state.mode&&He().default.state.multiSelection,d=t.currentUser.id,u="copy"===o.type?"copy":"cut",p=ue().ZO();p&&(0,B().Yt)(p.pointer,E().ev)&&Yt(o,Wt,jt,p.pointer);const m=l&&(0,ye().H7)(l);if(m&&m.selection.startIndex!==m.selection.endIndex){const e=ke().A.getIntl(),{store:n,selection:r}=m,i=n.inMemoryRecordCache,a=n.getValue();if(Dt("copy: copying single-store text selection"),o.preventDefault(),a&&!Po()){const e=n.table===E().ev?(0,Ie().T)(n):void 0,t=e&&q().n4(n.path,e.getBlockTitleStore().path)?e.getType():void 0,i=t&&(0,c().aO)(t)?t:void 0,s=a.filter((e=>!H().Br(e)));Yt(o,Et,Xt,{blockType:i,editing:s,selection:r,action:u})}const s=H().Ffo(a,r.startIndex,r.endIndex),l=_().b4_.fromGetRecordValueFn(i.makeGetRecordValueFn(d)),p=i.makeGetRecordRoleFn(d),f=(0,V().r4)({intl:e,textValue:s,getRecordModel:l,userTimeZone:(0,I().P)(),externalIntegrations:Ne().A.integrations.state});o.clipboardData.setData("text/plain",(0,pe().Df)(t.device.isWindows,f));const g=X().$e({textValue:s&&{value:s,spaceId:(0,O().e)(n.pointer.spaceId)},getRecordModel:l,getRecordRole:p,userTimeZone:(0,I().P)(),isAndroid:!1,isSafariOrIOS:!1,isWindows:!1,disableLinks:!1,disabled:!0,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,baseUrl:ae().A.domainBaseUrl,publicDomainName:ae().A.publicDomainName,showEmojiInline:!0,emojiType:"raw",theme:(0,J().x0)(),intl:e,katex:void 0,isClient:void 0,currentUserId:void 0,getPublicBaseUrlForPage:ge().QN,externalIntegrations:Ne().A.integrations.state,formulaValueTypes:[],emojiData:de().A.state,isMobileNative:!1});return void o.clipboardData.setData("text/html",(0,pe().Df)(t.device.isWindows,g))}if(l&&!(0,ye().kM)(l)&&!i&&l.start.store.table===E().ev&&l.end.store.table===E().ev){const e=so({environment:t,multiSelection:l,action:u});if(e){Dt("copy: copying multi-text selection"),o.preventDefault(),Yt(o,Nt,Zt,e);const r=l.start.store.inMemoryRecordCache,i=l.start.store.getRecordStoreUIRoot().getValue();if(!i)return;const{markdown:a,html:s}=(0,pe().Ij)({clipboardData:e,rootBlock:{id:i.id,table:E().ev,spaceId:i.space_id},isWindows:t.device.isWindows,fallbackGetRecordValue:r.makeGetRecordValueFn(d),markdownLinkifyIt:n,markdownSerializationOptions:{transformBlockMapping:{image:Ee().default.checkGate({gateName:"docs_clipboard_imagedata"})?uo:void 0}},formulasModule:k()});return a&&o.clipboardData.setData("text/plain",a),void(s&&o.clipboardData.setData("text/html",s))}}if(l&&!(0,ye().kM)(l)&&!i&&l.start.store.table===W().SN&&l.end.store.table===W().SN){Dt("copy: copying comment multi-text selection"),o.preventDefault();const e=(0,he().$W)(l),n=ke().A.getIntl(),r=e.map((e=>{let{store:o,selection:r}=e;if(r.startIndex===r.endIndex)return;const i=o.inMemoryRecordCache,a=_().b4_.fromGetRecordValueFn(i.makeGetRecordValueFn(d)),s=i.makeGetRecordRoleFn(d),l=H().Ffo(o.getValue(),r.startIndex,r.endIndex);return{plainText:(0,V().r4)({intl:n,textValue:l,getRecordModel:a,userTimeZone:(0,I().P)(),externalIntegrations:Ne().A.integrations.state}),htmlContent:X().$e({textValue:l&&{value:l,spaceId:(0,O().e)(o.pointer.spaceId)},getRecordModel:a,getRecordRole:s,userTimeZone:(0,I().P)(),isAndroid:!1,isSafariOrIOS:!1,isWindows:!1,disableLinks:!1,disabled:!0,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,baseUrl:ae().A.domainBaseUrl,publicDomainName:ae().A.publicDomainName,showEmojiInline:!0,emojiType:"raw",theme:(0,J().x0)(),intl:n,katex:void 0,isClient:void 0,currentUserId:void 0,getPublicBaseUrlForPage:Re().SN(t),externalIntegrations:Ne().A.integrations.state,formulaValueTypes:[],emojiData:de().A.state,isMobileNative:!1}),textValue:l}})).filter(Y().O9),i=r.map((e=>e.plainText)).join("\n\n"),a=`<div>${r.map((e=>e.htmlContent)).join("</div><div>")}</div>`;return o.clipboardData.setData("text/plain",(0,pe().Df)(t.device.isWindows,i)),void o.clipboardData.setData("text/html",(0,pe().Df)(t.device.isWindows,a))}if(r.length>0&&!i&&!s&&!a){Dt("copy: copying block selection"),o.preventDefault();const e=r[0],i=e.inMemoryRecordCache,a=oo({blocks:r,environment:t,action:u});if(Yt(o,Lt,Gt,a),!e.isDefined())return;const s=q().oE(r.map((e=>e.computeWithRecordValues((t=>{let{getRecordValueAndSubscribe:o}=t;return o(e)}))))),l=i.makeGetRecordValueFn(d),{markdown:c,html:p}=(0,pe().ZI)({rootBlock:{id:e.id,table:E().ev,spaceId:e.getSpaceId()},blockValues:s,getRecordValue:l,isWindows:t.device.isWindows,markdownLinkifyIt:n,formulasModule:k()});return c&&o.clipboardData.setData("text/plain",c),void(p&&o.clipboardData.setData("text/html",p))}Dt("copy: doing nothing")}(e),(0,pe().dk)(o,n),function(e){let{event:t,device:o,customEventId:n}=e;if(!t.clipboardData||!Kt(o))return;const r={};for(const s of Ut)r[s]=t.clipboardData.getData(s);const i=t.clipboardData.getData("text/html");t.clipboardData.setData("text/html",`${i}${(0,pe().uE)(n)}`),qt={id:n,mimeTypes:r};try{U().A.set(Jt,qt)}catch(a){h().log({level:"error",from:"clipboardActions",type:"setVirtualClipboardData",error:{message:"Unable to persistently store virtual clipboard data."}})}}({event:o,device:t.device,customEventId:n})}function uo(e){const{block:t,exportArgs:o}=e,{getExportedRenderAsset:n}=o,{source:r}=_().Bj6.fromBlock(t).getProperties(),i=H().q4_(r),a=function(e){if(!e.file_ids)return;const t=we().K.findBlockFromId(e.id);if(!t)return;const o=t.getNode();if(!(o instanceof Element))return;const n=o.querySelector("img");if(!n)return;const r=document.createElement("canvas");r.width=n.width,r.height=n.height;const i=r.getContext("2d");if(!i)return;return i.drawImage(n,0,0,n.width,n.height),r.toDataURL()}(t)??n({fromBlockId:o.blockId,toFileURI:i}),s=A().qh(e)||A().Qw({block:t,exportArgs:o})||a;return{text:(0,p().rS)({url:i})?`![${s}](${a})`:`[${s}](${a})`,breakLines:!0,children:A().q5(e)}}async function po(e){const{event:t,environment:o,markdownLinkifyIt:n}=e;pt().syncTextSelection();const r=Ue().default.state.stores,i=He().default.isEditingComment(),a=ue().fI(),s="editing"===He().default.state.mode&&He().default.state.multiSelection,{phase:l}=Ue().default.state;if(mo({environment:o,event:t,disableSyncTextSelection:!0,markdownLinkifyIt:n}),s&&!(0,ye().kM)(s)){const e=s.start.store.getAncestorBlockStoreAtRootPath(),t=e?Le().Uv.getMode(e):"default";_t().createAndCommit({userAction:"clipboardActions.cutWithMaybeConfirmation",environment:o,canUndo:!0,perform:n=>{if("suggest"===t){const t=ie().RR(o,n,e);ie().rY({environment:o,multiSelection:s,transaction:n,discussionStore:t})}else ut().f0({environment:o,multiSelection:s,transaction:n})}})}else(l===Ue().SelectionPhase.Selected||s)&&r.length>0&&!i&&!a&&await Tt().Af({environment:o,blocks:r,shouldCheckSuggestEdit:!0});We().A.setKeyboardMode(!0)}function mo(e){const{environment:t,event:o,disableSyncTextSelection:n,markdownLinkifyIt:r}=e;n||pt().syncTextSelection(),co({environment:t,event:o,markdownLinkifyIt:r}),We().A.setKeyboardMode(!0)}function fo(e){var t;const{environment:o,files:n,transaction:r,insertBelowBlockStore:i}=e,a=Ue().default.getCurrentRecordCache(),s=ue().y0(o);if(!a)return;const l=Ue().default.state.stores,c=yt().$C({environment:o,files:n,inMemoryRecordCache:a,transaction:r,pageWidth:s,spaceId:0!==l.length?l[0].pointer.spaceId:null===(t=ue().ZO())||void 0===t?void 0:t.pointer.spaceId});c.forEach((e=>{const t=e.getType();t&&Qe().v(o,{from:"paste",type:t,creating_block_id:e.id})})),vo({environment:o,blocks:c,transaction:r,replaceEmptyTextBlock:!0,insertBelowBlockStore:i})}function go(e){const{environment:t,store:o,tokens:n,index:r,transaction:i,multiTextSelection:s,disableEmbedMenu:l,selectAll:c}=e,d=(0,ye().H7)(s),u=d?{value:d.store.getValue()}:void 0,p=o.getAncestorBlockStoreAtRootPath(),f=p?Le().Uv.getMode(p):"default";let g=n;(He().default.isEditingComment()||He().default.isEditingCaption())&&(g=function(e){const{environment:t,tokens:o}=e,n=bo(o);if(n&&n.url===n.text){const e=(0,L().parseRoute)({url:n.url,baseUrl:ae().A.domainBaseUrl,publicDomainName:ae().A.publicDomainName,isMobile:t.device.isMobile,protocol:ae().A.protocol,currentUrl:window.location.href});if("page"===e.name&&e.blockId){const t=H().ld4(e.scrollToBlockId??e.blockId,void 0);return[H().wmz(t),H().Ey_(" ")]}}return o}({environment:t,tokens:n})),ut().yr({environment:t,store:o,tokens:g,index:r,transaction:i,selectAll:c,editorMode:f});const b=bo(g);!l&&u&&b&&"suggest"!==f&&function(e){const{environment:t,hyperlink:o,oldTextValue:n}=e,r="editing"===He().default.state.mode&&(0,ye().H7)(He().default.state.multiSelection),i=Ue().default.state;if(r&&i.stores.length>0){const e=r.store.getValue(),i=H().q4_(e),s=m().PE(i.substring(0,i.indexOf(o.text))).length,l=s+m().PE(o.text).length;if(r.store.isTable(E().ev)||r.store.isTable(W().SN)){if(Pt().p6({environment:t,blockStore:Ue().default.state.stores[0],textStore:r.store,textValueBeforePaste:n,url:o.url,urlSelection:{startIndex:s,endIndex:l}}))return;if(St().Yf({environment:t,textStore:r.store,blockStore:Ue().default.state.stores[0],oldTextValue:n,url:o.url,urlSelection:{startIndex:s,endIndex:l}}))return}a().default.afterNextFlush((()=>{const e=o.url;ht().p6({environment:t,textStore:r.store,oldTextValue:n,url:e,urlSelection:{startIndex:s,endIndex:l}})}))}}({environment:t,hyperlink:b,oldTextValue:u.value,transaction:i})}function bo(e){if(1!==e.length)return;const t=e[0];if(!H().BEe(t))return;const[o,n]=t;if(1!==n.length)return;const r=n[0];if(!H().sh$(r))return;return{text:o,url:H().cQR(r)}}function vo(e){const{environment:t,blocks:o,transaction:n,replaceEmptyTextBlock:r,insertBelowBlockStore:i}=e,a=Ue().default.state.stores;if(1===a.length){const e=a[0];if(e.getType()&&e.isType(c().KK)&&function(e){if("editing"!==He().default.state.mode||!He().default.state.multiSelection)return!1;const t=(0,ye().H7)(He().default.state.multiSelection);if(!t)return!1;return t.store===e.getTitleStore()}(e)){const r=e.getContentStore(),i=q().o8(o).reverse().map((e=>It().Hs({parentStore:r,prependStore:e,transaction:n}).childStore));return Ct().td({environment:t,stores:i}),i}}return Tt().LE({environment:t,blocksToInsert:o,target:i?[i]:a,transaction:n,replaceEmptyTextBlock:r})}function ko(e,t,o,n){const r=(0,ue().ZO)();if(!r)return;const i=Ue().default.state.stores,s=0!==i.length?i[0].pointer.spaceId:r.pointer.spaceId,l="suggest"===Le().Uv.getMode(r,!0);let d=function(e,t){if("cut"!==t.action||!Ee().default.checkGate({gateName:"convert_cut_paste_to_move"}))return;const o="suggest"===Le().Uv.getMode(e,!0),n=[];for(const r of t.blocks){const t=Oe().Bv.createChildStore(e,{table:E().ev,id:r.blockId});if(!t.isReady())return;const i=t.getModel();if(!i)return;if(i.getSpaceId()!==e.getSpaceId())return;if(!1!==i.alive)return;o&&!c().ei[i.getType()]||n.push(t)}return n}(r,t);if(!d){const o=JSON.stringify(t).length>Me().vs;d=t.blocks.reduce(((i,a)=>{var d,u,p,m,f,g;let{blockId:b,blockSubtree:v}=a;const k=Oe().Bv.createChildStore(r,{table:E().ev,id:b});let y;if(k.isDefined())y=k.getModel();else{const e=null==v?void 0:v.getValue({table:E().ev,id:b});y=e&&_().Bj6.fromBlock(e)}if(l&&y&&!c().ei[y.getType()])return i;if(null!==(d=y)&&void 0!==d&&d.isCollectionView()&&(null===(u=y)||void 0===u||!u.getCollectionPointer())&&(null===(p=y)||void 0===p?void 0:p.getSpaceId())!==s&&Ee().default.checkGate({gateName:"collections_xws"})){const t=xt().Wv({environment:e,type:c().xd.text,inMemoryRecordCache:k.inMemoryRecordCache,transaction:n,spaceId:s});return ut().yr({environment:e,store:t.getBlockTitleStore(),tokens:[H().wmz(H().ld4(b,y.getSpaceId()))],index:0,transaction:n}),i.push(t),i}const S=!(r.isInsideTemplate()||Ro()||r.isInsideFactoryOrDuplicateBlocksAction()||null!==(m=y)&&void 0!==m&&m.isTemplateVariableContainerBlock()),I=v&&s&&(null===(f=y)||void 0===f?void 0:f.getSpaceId())&&te().Lw({sourceSpaceId:y.getSpaceId(),targetSpaceId:s,sourceBlockSubtree:v});if(v&&!o&&!I){const o=le().localDuplicate({environment:e,sourceBlockId:b,targetBlockPointer:(0,be().zP)({environment:e,table:E().ev,spaceId:s}),sourceBlockSubtree:v,targetInMemoryRecordCache:k.inMemoryRecordCache,addCopyName:(0,xe().A)(k),deepCopyTransclusionContainers:!1,shallowCopyNavigableBlock:!!t.wasSelectionFromSnapshot&&Ee().default.checkGate({gateName:"duplicate_snapshot_navigable_blocks_by_reference"}),resolveTemplateVariables:S,transaction:n,preventLegacyTransclusions:(0,ve().$J)()}).targetBlockStore,r=o.getType();return r&&Qe().v(e,{from:"paste",type:r,new_page_id:"page"===r?o.id:void 0,creating_block_id:o.id,parent_collection_id:k.getParentCollectionIdUpToTwoLevels()}),i.push(o),i}if(t.wasSelectionFromSnapshot)return h().log({level:"warning",from:"clipboardActions",type:"pasteBlockSelection",data:{message:"Unable to locally duplicate pasted block selection from snapshot",miscDataToConvertToString:{blockId:b,blockType:k.getType(),blockSelectionTooBig:o,missingBlockSubtree:!v}}}),i;Ve().A.state.online||vt().f1(ke().A.formatMessage(Ft.offlineError));const[x,T]=le().serverDuplicate({environment:e,sourceBlocks:[{id:b,spaceId:(0,O().e)(null===(g=y)||void 0===g?void 0:g.getSpaceId())}],targetInMemoryRecordCache:k.inMemoryRecordCache,addCopyName:(0,xe().A)(k),transaction:n,deepCopyTransclusionContainers:!1,resolveTemplateVariables:S,targetSpaceId:(0,O().e)(s),convertExternalObjectInstancesToPlaceholders:!1,userActionSuffix:v&&o?" (forceServerSideCopy)":void 0}),C=x[0],M=C.getType();return T.then((o=>{if("error"===o.status){const n=o.error;te().Rk(n)?t.blocks.length>1?te().UK(e,{product:n.clientData.metadata.product}):te().yj({product:n.clientData.metadata.product}):vt().f1(o.errorMessage)}else M&&Qe().v(e,{from:"paste",type:M,new_page_id:"page"===M?C.id:void 0,creating_block_id:C.id,parent_collection_id:k.getParentCollectionIdUpToTwoLevels()})})),i.push(C),i}),[])}if(l){const t=ie().RR(e,n,d[0]),o=[];d.forEach((e=>{const r={type:"insert",id:T().JW(),discussionId:t.id};ie().tM(n,e,r),o.push(e.id)})),n.preEnqueueActions.push((()=>{ie().c3({environment:e,transaction:n,discussionStore:t,addModifiedBlockIdsAfter:o})})),At().Ug({environment:e,blocks:d,annotation:[H().Ifu.SuggestionInsertText,t.id],transaction:n})}vo({environment:e,blocks:d,transaction:n,replaceEmptyTextBlock:!0});const u=Ue().default.state.stores,p=u.length>0?u:[r],m=t.blocks.map((e=>{const t=p.length>0?p[0]:function(e){return e.isCollectionView()?e.getCollectionStore()||e:e.getContentStore()}(r);return Oe().Bv.createChildStore(t,{table:E().ev,id:e.blockId})}));a().default.afterNextFlush((async()=>{await Promise.all(p.map((e=>e.waitUntil((()=>{const t=e.getType();return Boolean(t&&t!==c().xd.copyIndicator)}))))),await Promise.all(m.map((e=>e.load()))),o&&tt().ei({environment:e,blocks:p,pageSource:o,copiedStores:m,action:t.action,wasContiguousSelection:t.wasContiguousSelection,rootStore:r})&&tt().gi({environment:e,copiedStores:m,blocks:p,pageSource:o})}))}function yo(e){const{environment:t,disableEmbedMenu:o,transaction:n,overwrite:r,selectAll:i,markdownOptions:a,markdownLinkifyIt:s,text:l,tinyMceMicrosoftWordPasteFilter:c}=e,d=l.includes("\n"),u=He().default.state,p=_o(u);d&&"inline"!==p||"editing"!==u.mode?r?(n.logDebugMessage("paste: pasting as markdown overwrite"),function(e){const{environment:t,text:o,transaction:n,selectAll:r,markdownOptions:i,markdownLinkifyIt:a,tinyMceMicrosoftWordPasteFilter:s}=e,l=no({markdown:o,markdownOptions:i,markdownLinkifyIt:a});if(!l)return;let c=So({environment:t,html:l,wrapInEmptyBlocks:!1,tinyMceMicrosoftWordPasteFilter:s});c||(c=So({environment:t,html:l,wrapInEmptyBlocks:!0,tinyMceMicrosoftWordPasteFilter:s}));if(!c)return;mt({environment:t,clipboardData:c,transaction:n,allowPasteIntoHeaderWithoutChildren:!0,selectAll:r,preventLegacyTransclusions:(0,ve().$J)()})}({environment:t,text:l,transaction:n,selectAll:i,markdownOptions:a,markdownLinkifyIt:s,tinyMceMicrosoftWordPasteFilter:c})):l&&(n.logDebugMessage("paste: pasting as markdown append"),function(e){const{environment:t,text:o,transaction:n,markdownOptions:r,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:a}=e,s=no({markdown:o,markdownOptions:r,markdownLinkifyIt:i});if(s)To({environment:t,html:s,transaction:n,tinyMceMicrosoftWordPasteFilter:a})}({environment:t,text:l,transaction:n,markdownOptions:a,markdownLinkifyIt:s,tinyMceMicrosoftWordPasteFilter:c})):(n.logDebugMessage("paste: pasting as inline markdown"),function(e){const{environment:t,text:o,disableEmbedMenu:n,transaction:r,selectAll:i,markdownOptions:a,markdownLinkifyIt:s,tinyMceMicrosoftWordPasteFilter:l}=e,c="editing"===He().default.state.mode&&He().default.state.multiSelection;if(c){const e=(0,ye().H7)(c);if(e&&function(e){const t=He().default.state;return"editing"===t.mode&&!(0,ye().kM)(t.multiSelection)&&(0,ye().KP)(t.multiSelection)&&w().t(e,"url")}(o))Do({environment:t,text:o,transaction:r,editingSelection:e,selectAll:i});else if((0,Ce().B1)("c")){const e=(0,Ie().T)(c.start.store);ut().$D({environment:t,editorMode:e?Le().Uv.getMode(e):"default",multiSelection:c,string:o,disableMentions:!0,disableEmojiCommands:!0,disableSlashCommands:!0,transaction:r,selectAll:i})}else{const e=s&&A().Z4({...s,markdown:o,plugin:null==a?void 0:a.plugin});if(!e)return;xo({environment:t,html:e,transaction:r,stripText:!1,stripSurroundingWhitespace:!1,disableEmbedMenu:n,selectAll:i,markdownLinkifyIt:s,tinyMceMicrosoftWordPasteFilter:l})}}}({environment:t,text:l,disableEmbedMenu:o,transaction:n,selectAll:i,markdownOptions:a,markdownLinkifyIt:s,tinyMceMicrosoftWordPasteFilter:c}))}function ho(e,t){const o=e.getValue({table:E().ev,id:t});if(!o)return;const n={table:E().ev,id:t,spaceId:o.space_id},r=(o.content??[]).map((t=>ho(e,t))).filter(Y().O9);return new($().PH)(n,r)}function So(e){var t,o,n,r;const a=ue().ZO(),{html:s,wrapInEmptyBlocks:l,tinyMceMicrosoftWordPasteFilter:c,environment:d}=e,u=Mo({environment:d,html:s,tinyMceMicrosoftWordPasteFilter:c,useCrdt:!1});if(!u)return;const{currentUserStore:p}=Fe().default.state;if(!p)return;let{allOperations:m,rootContentIds:f}=u;if(l){const e=Co(d),t=Co(d);if(!e||!t)return;m=[e.operation,...m,t.operation],f=[e.id,...f,t.id]}const g=F().RecordMap.create();(0,R().NI)({recordMap:g,operations:m,updateOnly:!1});const b=[],v=function(e){const{name:t,userId:o,recordMap:n}=e,r=F().RecordMapWithRole.create();for(const{pointer:i,model:a}of n)r.setModelAndRole(i,a,"reader");return new(i().A)({name:t,data:new(Z().b)({[o]:r})})}({name:"htmlToMultiTextSelectionClipboardData",userId:p.id,recordMap:g});for(const i of f){const e=le().loadLocalSubtree(d,{blockId:i,inMemoryRecordCache:v,allowCopyCollections:!0,requireFullSubtree:!0,skipTransclusionContainerChildren:!0,allowCopyExternalObjectInstances:!0,excludeCrdtData:!0,includeLegacyTransclusionBlockValues:(0,ve().$J)()}).recordMap;b.push({blockId:i,blockSubtree:e})}const k=new($().PH)({...(0,be().zP)({environment:d,table:E().ev,spaceId:null==a?void 0:a.pointer.spaceId})},f.map((e=>ho(g,e))).filter(Y().O9));if(0===k.children.length)return;const y=k.children[0],h=null===(t=(0,$().Qe)([k],(e=>e===y)))||void 0===t?void 0:t.map((e=>e.value)),S=null===(o=g.getValue(y.value))||void 0===o||null===(o=o.properties)||void 0===o?void 0:o.title,I=(0,$().wI)(k),x=null===(n=(0,$().Qe)([k],(e=>e===I)))||void 0===n?void 0:n.map((e=>e.value)),T=null===(r=g.getValue(I.value))||void 0===r||null===(r=r.properties)||void 0===r?void 0:r.title,C=T?H().q4_(T).length:0;return S&&h&&T&&x?{blockSelection:{blocks:b,wasContiguousSelection:!0,action:"copy"},tree:k,multiTextSelection:{start:{textIndex:0,copiedText:S,attributePath:["properties","title"],pointerPath:h},end:{textIndex:C,copiedText:T,attributePath:["properties","title"],pointerPath:x}},action:"copy"}:void 0}function Io(e){const{text:t,html:o,stripText:n,stripSurroundingWhitespace:r,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:a}=e,s=o||(t?no({markdown:t,markdownLinkifyIt:i}):void 0);if(!s)return;if(Ee().default.checkGate({gateName:"paste_links_as_mentions"})){const e=(0,pe().Lj)(s);if(e)return[H().wmz(H().ld4(e.id,e.spaceId),[])]}const l=document.createElement("div");return l.innerHTML=Ao({html:s,tinyMceMicrosoftWordPasteFilter:a}),x().Hw({node:l,window,stripText:n,stripSurroundingWhitespace:r,emojiData:de().A.state})}function xo(e){const{environment:t,html:o,transaction:n,stripText:r,stripSurroundingWhitespace:i,disableEmbedMenu:a,selectAll:s,markdownLinkifyIt:l,tinyMceMicrosoftWordPasteFilter:c}=e,d="editing"===He().default.state.mode&&He().default.state.multiSelection;if(d){const e=Io({html:o,stripText:r,stripSurroundingWhitespace:i,markdownLinkifyIt:l,tinyMceMicrosoftWordPasteFilter:c});if(!e)return;const u=(0,Ie().T)(d.start.store),p=1===e.length;if(p){if(p&&(!e[0][1]||0===e[0][1].length)){n.logDebugMessage("pasteInlineHtml: insertString");const o=e[0][0];return void ut().$D({environment:t,editorMode:u?Le().Uv.getMode(u):"default",multiSelection:d,string:o,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:n,selectAll:s})}const o=(0,ye().H7)(d);if(o&&!(0,ye().kM)(d)){const[,r]=e[0],i=r&&H().VtW(r);if(i){n.logDebugMessage("pasteInlineHtml: pasteLinkOverText");return void Do({environment:t,text:H().cQR(i),transaction:n,editingSelection:o,selectAll:s})}}}n.logDebugMessage("pasteInlineHtml: delete selection and insert"),ut().f0({environment:t,multiSelection:d,transaction:n}),go({environment:t,store:d.start.store,tokens:e,index:d.start.index,transaction:n,disableEmbedMenu:a,multiTextSelection:d,selectAll:s})}}function To(e){const{environment:t,html:o,transaction:n,tinyMceMicrosoftWordPasteFilter:r}=e,i=ue().ZO();if(!i)return;const s=Mo({environment:t,html:o,tinyMceMicrosoftWordPasteFilter:r,useCrdt:i.useCrdt()});if(!s)return;const{allOperations:l,rootContentIds:d}=s;for(const a of l)if((0,z().ph)(a)){const e=Oe().Bv.createChildStore(i,a.pointer);_t().applyCrdtTextOperation({store:e,operation:a,invertedOperation:void 0,transaction:n})}else if((0,P().$Y)(a)){const e=(0,Oe().Oo)(i,a.pointer);_t().applyOperation({store:e,operation:a,transaction:n})}else(0,Y().HB)(a);const u=d.map((e=>Oe().Bv.createChildStore(i,{table:E().ev,id:e})));u.forEach((e=>{const o=e.getType();o&&Qe().v(t,{from:"paste",type:o,creating_block_id:e.id,parent_collection_id:e.getParentCollectionIdUpToTwoLevels()})}));const p=vo({environment:t,blocks:u,transaction:n,replaceEmptyTextBlock:!0}).slice().reverse();return a().default.afterNextFlush((()=>{const e=p.map((e=>{if(e.getType()!==c().xd.text)return;const o=bo(e.getTitleValue());if(!o)return;const n=(0,L().parseRoute)({url:o.url,baseUrl:ae().A.domainBaseUrl,publicDomainName:ae().A.publicDomainName,isMobile:t.device.isMobile,protocol:ae().A.protocol,currentUrl:window.location.href});return"page"===n.name?n:void 0})).filter(Y().O9);tt().T_({environment:t,rootStore:i,blocks:p,copiedLinks:e})||tt().Tw({environment:t,blocks:p})})),u}function Co(e){const{currentUserStore:t}=Fe().default.state,o=ue().ZO();if(!t||!o)return;const n=t.id;if(!n)return;const r=o.id,i=o.pointer.spaceId,a=(0,be().Z1)({environment:e,table:E().ev,spaceId:i});return{operation:{pointer:{table:"block",id:a,spaceId:i},command:"set",path:[],args:{id:a,version:1,type:"text",properties:{title:[[""]]},parent_id:r,parent_table:"block",space_id:i,created_by_table:"notion_user",created_by_id:n,created_time:Date.now(),last_edited_by_table:"notion_user",last_edited_by_id:n,last_edited_time:Date.now(),alive:!0}},id:a}}function Mo(e){const{environment:t,useCrdt:o,...n}=e,r=document.createElement("div");r.innerHTML=Ao(n);const{currentUserStore:i}=Fe().default.state,a=ue().ZO();if(!i||!a)return;const l=i.getValue();if(!l)return;const c=a.getSpaceId(),d=(0,be().Gx)({environment:t,spaceId:c}),u=t.idCreator.getSpaceShortIdCreator(c,d);return x().aH({actor:(0,s().A7)(l),parent:{id:a.id,table:E().ev,spaceId:c},rootNode:r,deps:{importFileMap:{},window,intl:ke().A.getIntl(),randomID:K().Ay,spaceIdCreator:u,randomShortID:Q().Ay,isPhoneNumber:D().W,emojiData:de().A.state},options:{useCrdt:o,ignoreBlockCount:!1}})}function wo(e){return/schemas-microsoft-com:office/.test(e)||/xmlns:m="http:\/\/schemas.microsoft.com\/office\/2004\/12\/omml"/.test(e)}function Ao(e){const{html:t,tinyMceMicrosoftWordPasteFilter:o}=e;return r().sanitize(o&&wo(t)?o(t):t)}function _o(e){const t="editing"===e.mode&&e.multiSelection;if(!t)return;const o=Ae().n.findEditableWithStore(t.start.store),n=null==o?void 0:o.props;return n&&!n.disabled?n.pasteBehavior:void 0}function Po(){var e;if("editing"!==He().default.state.mode)return;const t=He().default.state.multiSelection.start,o=t.store.path;if("formula"!==o[o.length-1])return;const n=t.store.getRecordStoreAtRootPath();if((null==n?void 0:n.table)!==E().ev)return;const r=null==n||null===(e=n.getPropertiesStore())||void 0===e||null===(e=e.getValue())||void 0===e||null===(e=e.collection_id)||void 0===e||null===(e=e[0])||void 0===e?void 0:e[0];if(!r)return;const i={table:N().Vl,id:r,spaceId:n.getSpaceId()},a=n.getRecordModel(i);return a?{parentCollection:a,start:t,getRecordModel:n.getRecordModel}:void 0}function Ro(){const e=Ue().default.state.stores;if("editing"!==He().default.state.mode)return e.length>0&&e[0].isInsideFactoryOrDuplicateBlocksAction();if(0===e.length)return!1;const{multiSelection:t}=He().default.state,o=t.start.store;if(!o.isTable(E().ev))return!1;const n=fe().E(o);return Boolean(n)}function Do(e){const{text:t,transaction:o,environment:n,editingSelection:r,selectAll:i}=e,a=(0,L().parseRoute)({url:t,baseUrl:ae().A.domainBaseUrl,publicDomainName:ae().A.publicDomainName,isMobile:n.device.isMobile,protocol:ae().A.protocol,currentUrl:window.location.href}),s="page"===a.name&&a.blockId?(0,C().wv)({pageId:a.blockId,peekViewBlockId:a.peekViewBlockId,peekMode:a.peekMode,discussionId:a.discussionId,scrollToBlockId:a.scrollToBlockId,collectionViewId:a.collectionViewId}):t,l=ut().di({environment:n,store:r.store,selection:r.selection,transaction:o});ut().gw({environment:n,store:r.store,selection:l,annotationKey:"a",transaction:o,updateSelection:!1}),At().Mw({environment:n,store:r.store,selection:l,annotation:["a",s],transaction:o}),pt().setSelection({store:r.store,selection:{startIndex:i?l.startIndex:l.endIndex,endIndex:l.endIndex}})}const Fo=/\<\!-- wp:/;const Bo=/\u2028/g;function Vo(e){var t;let{environment:o,event:r,disableEmbedMenu:i,transaction:a,onPasteFiles:s,formulasModule:l,markdownLinkifyIt:d,tinyMceMicrosoftWordPasteFilter:u}=e;const p=Ee().default.checkGate({gateName:"allow_cut_copy_comment"});if(r.preventDefault(),pt().syncTextSelection(),!r.clipboardData)return;const f=Qt(r.clipboardData,o.device),g=Array.from(Array((null===(t=f.items)||void 0===t?void 0:t.length)??0).keys()).flatMap((e=>{var t;const o=f.items[e];if("file"!==o.kind)return[];const n=null===(t=o.getAsFile())||void 0===t||null===(t=t.name.match(/\.[^.]+$/))||void 0===t?void 0:t[0];return n?[n]:[]})),b=f.getData("text/html"),v=null==b?void 0:b.length;!function(e,t){let{source:o,types:n,fileExtensions:r,htmlContent:i}=t;const a=[...n];a.sort();const s=r.map((e=>e.toLowerCase()));Ye().vd(e,"paste",{source:o,types:a,file_extensions:s,original_html_content_size:i.length})}(o,{source:"editor",types:f.types||[],fileExtensions:g,htmlContent:b});const{text:k,html:h,multiTextSelectionData:S,textSelectionData:x,blockSelectionData:T,isFromMicrosoftOffice:C,isHtmlTable:M}=to({clipboardData:f,tinyMceMicrosoftWordPasteFilter:u}),w=eo(f,Wt,jt),A=function(e){return e.clipboardData?e.clipboardData.items?q().oE(Array.from(e.clipboardData.items).map((e=>{const t=e.getAsFile();if(t&&t.size>0)return new File([t],t.name??ke().A.formatMessage(Ft.untitled),{type:e.type})}))):m().PE(e.clipboardData.files):[]}(r),_=_o(He().default.state),P=(null==T?void 0:T.action)||(null==S?void 0:S.action)||(null==x?void 0:x.action);a.annotateWithUserAction("cut"===P?"paste.from_cut":pe().Vz);const R=k.includes("\n"),D="body"===(0,Ce().X4)()&&!x;if((A.length>0||T||R&&!D)&&!(0,ze().EF)(o))return;const F=function(e){const t=eo(e,Ot,$t),o=null==t?void 0:t.mode;if(!o)return;return Vt[o]||"Plain Text"}(f),B=R&&F&&"inline"!==_&&!(0,Ce().X4)()?Lo({codeLanguage:F,environment:o,transaction:a}):void 0;Xe().oF(o,{pastedText:k,source:"editor_paste"});const V=Pe().wg(),L=Pe().KR(),E=r.clipboardData.getData(ne().sE),N=Po();if(A.length>0&&!C&&!M)a.logDebugMessage("paste: file/image detected -> onPasteFiles"),s({environment:o,files:A,transaction:a});else if(D)a.logDebugMessage("paste: editing code block contents with no Notion text selection -> pasteRawText"),Eo(o,k,a);else if(B)a.logDebugMessage("paste: pasting code in existing empty text block with no selection or new code block after selection  -> pasteRawText"),Eo(o,k,a);else if(N){a.logDebugMessage("paste: formulaInformation detected, attempting to paste as formula");const{parentCollection:e,start:t}=N,n=[[k]],r=e;if(!r||!l)return void Eo(o,k,a);const i=He().default.state;"multiSelection"in i&&ut().f0({environment:o,multiSelection:i.multiSelection,transaction:a});const s=(0,y().K5)({formulasModule:l,getRecordModel:N.getRecordModel,sourceCollection:r,textValue:n,featureGates:(0,me().i)()});ut().yr({environment:o,tokens:s,store:t.store,index:t.index,transaction:a})}else if("plaintext"===_)a.logDebugMessage("paste: plaintext paste behavior detected, pasting as inline html"),xo({environment:o,html:k,transaction:a,stripText:!0,stripSurroundingWhitespace:!0,disableEmbedMenu:i,markdownLinkifyIt:d,tinyMceMicrosoftWordPasteFilter:u}),qe({environment:o,type:"plaintext",originalHtmlContentSize:v});else if(S){a.logDebugMessage("paste: multiTextSelectionData detected, attempting to paste as textselection");const e=function(e){const{environment:t,transaction:o,multiTextSelectionData:n,disableEmbedMenu:r,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:a}=e,s=e.pasteBehavior||"inline",l=e.html||no({markdown:e.text,markdownLinkifyIt:i});if("editing"===He().default.state.mode)switch(s){case"inline":return!!l&&(xo({environment:t,html:l,transaction:o,stripText:!1,stripSurroundingWhitespace:!0,disableEmbedMenu:r,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:a}),!0);case"block":return mt({environment:t,clipboardData:n,transaction:o,preventLegacyTransclusions:(0,ve().$J)()});default:(0,Y().HB)(s)}}({multiTextSelectionData:S,environment:o,html:h,text:k,transaction:a,disableEmbedMenu:i,pasteBehavior:_,markdownLinkifyIt:d,tinyMceMicrosoftWordPasteFilter:u});e||(a.logDebugMessage("paste: could not paste as textSelection -> paste as blockSelection"),ko(o,S.blockSelection,w,a))}else if(x&&x.editing){a.logDebugMessage("paste: textSelectionData detected, pasting text selection");const e=(0,oe().dr)(),t=(null==w?void 0:w.id)!==(null==e?void 0:e.id);!function(e){const{environment:t,textSelectionData:o,transaction:n,disableEmbedMenu:r,removeDiscussions:i}=e,a=Ue().default.getCurrentRecordCache(),{editing:s,selection:l}=o;let{tokensInsideRange:d}=H().AI5(s,l.startIndex,l.endIndex);d=H().Uee(d,{removeSuggestionAnnotationsAndText:!1,removeSuggestionAnnotations:!0,removeDiscussions:i??!0});const u=(0,ue().ZO)();if(u&&!(u.isInsideTemplate()||Ro()||u.isInsideFactoryOrDuplicateBlocksAction())&&(d=(0,j().f$)(d,{currentUserId:t.currentUser.id,currentTimeZone:(0,I().P)()})),"body"===(0,Ce().X4)()){const e=H().Cc8(d);e&&(d=e)}const p="editing"===He().default.state.mode&&He().default.state.multiSelection;if(p){if(!(0,ye().kM)(p)){const t=(0,ye().H7)(p);if(t){const n=H().Ffo(o.editing,o.selection.startIndex,o.selection.endIndex);if(1===n.length){const[o,r]=n[0],i=r&&H().VtW(r);if(i){const n=H().cQR(i);if([o,`http://${o}`,`https://${o}`].includes(n))return void Do({environment:e.environment,text:n,transaction:e.transaction,editingSelection:t})}}}}const i=(0,Ie().T)(p.start.store),a=i?Le().Uv.getMode(i):"default";if("suggest"===a){const e=ie().RR(t,n,p);ie().rY({environment:t,multiSelection:p,transaction:n,discussionStore:e}),d=H().Mwp({textValue:d,selection:{startIndex:0,endIndex:1/0},annotation:[H().Ifu.SuggestionInsertText,e.id]})}else"default"===a&&ut().f0({environment:t,multiSelection:p,transaction:n});const s=He().default.state;if("editing"===s.mode){const e=s.multiSelection;if(o.blockType&&0===l.startIndex){const r=(0,Ie().T)(e.start.store);r&&"page"!==o.blockType&&(0,Se().P4)(r)&&ce().transformBlocks({environment:t,blocks:[r],blockType:o.blockType,transaction:n})}go({environment:t,store:e.end.store,tokens:d,index:e.end.index,transaction:n,disableEmbedMenu:"suggest"===a||r,multiTextSelection:p})}}else if(a){var m;const e=Ue().default.state.stores,o=xt().Wv({environment:t,type:c().xd.text,inMemoryRecordCache:a,transaction:n,spaceId:0!==e.length?e[e.length-1].pointer.spaceId:null===(m=ue().ZO())||void 0===m?void 0:m.pointer.spaceId}),r=o.getTitleStore();r&&ut().yr({environment:t,store:r,tokens:d,index:0,transaction:n}),vo({environment:t,blocks:[o],transaction:n,replaceEmptyTextBlock:!1}),Qe().v(t,{from:"paste",type:c().xd.text,creating_block_id:o.id,parent_collection_id:o.getParentCollectionIdUpToTwoLevels()})}}({environment:o,textSelectionData:x,transaction:a,disableEmbedMenu:i,removeDiscussions:!p||("copy"===P||t)})}else if(T&&T.blocks.length>0&&"inline"!==_)a.logDebugMessage("paste: blockSelectionData detected, pasting block selection"),ko(o,T,w,a);else if(V&&L&&E){const{simpleTableStore:e}=V.getProps(),{selection:t}=L,i=Pe().$O(e);t&&i&&wt().GZ({clipboardActions:n,environment:o,simpleTableStore:e,selection:t,currentRows:e.getContentStores(),columnOrder:i,event:r,transaction:a,markdownLinkifyIt:d,tinyMceMicrosoftWordPasteFilter:u})}else if(h)if(V&&L){const{simpleTableStore:e}=V.getProps(),{selection:t}=L,i=Pe().$O(e);t&&i&&(a.logDebugMessage("paste: pasting selection into simple table"),wt().GZ({clipboardActions:n,environment:o,simpleTableStore:e,selection:t,currentRows:e.getContentStores(),columnOrder:i,event:r,transaction:a,markdownLinkifyIt:d,tinyMceMicrosoftWordPasteFilter:u}))}else(R||M)&&"inline"!==_?(a.logDebugMessage("paste: pasting as html"),To({environment:o,html:h,transaction:a,tinyMceMicrosoftWordPasteFilter:u}),qe({environment:o,type:"html",originalHtmlContentSize:v})):(a.logDebugMessage("paste: pasting as inline html"),xo({environment:o,html:h,transaction:a,stripText:!1,stripSurroundingWhitespace:!1,disableEmbedMenu:i,markdownLinkifyIt:d,tinyMceMicrosoftWordPasteFilter:u}),qe({environment:o,type:"inline_html",originalHtmlContentSize:v}));else a.logDebugMessage("paste: pasting as markdown"),yo({environment:o,text:k,disableEmbedMenu:i,transaction:a,markdownLinkifyIt:d,tinyMceMicrosoftWordPasteFilter:u}),qe({environment:o,type:"markdown",originalHtmlContentSize:v});We().A.setKeyboardMode(!0)}function Lo(e){const{codeLanguage:t,environment:o,transaction:n}=e,r=He().default.state,i="editing"===r.mode&&r.multiSelection,a=Ue().default.state.stores;if(!i&&0===a.length)return;let s,l,d;if(i?(s=i.start.store,l=i.end.store,d=(0,Ie().T)(l)):(s=a[0],l=a[a.length-1],d=l),!d)return;let u=d;if((0,Se().P4)(d))!function(e){const{blockStore:t,environment:o,transaction:n,codeLanguage:r}=e;ce().transformBlocks({environment:o,blocks:[t],blockType:"code",transaction:n}),bt().IA({blocks:[t],language:r,transaction:n})}({blockStore:d,environment:o,transaction:n,codeLanguage:t});else{const e=(0,Ie().T)(d);if(!e)return;const t=s.inMemoryRecordCache;if(!t)return;u=xt().Wv({environment:o,type:c().xd.code,inMemoryRecordCache:t,transaction:n,spaceId:e.pointer.spaceId}),It().WH({parentStore:e.getContentStore(),afterStore:l,insertStore:u,transaction:n})}Te().clear(o);const p=(0,Ie().aI)(u);return p&&pt().setSelectionAtStart({store:p}),u}function Eo(e,t,o){const n="editing"===He().default.state.mode&&He().default.state.multiSelection;if(n){const r=(0,Ie().T)(n.start.store);ut().$D({environment:e,editorMode:r?Le().Uv.getMode(r):"default",multiSelection:n,string:t,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:o})}}function No(e){const t=e.getNavigableBlockStore();if(t)return(0,ge().J8)({store:t,scrollToBlockId:t.id===e.id?void 0:e.id,fullyQualified:!0,pageVisitSource:l().y8.CopyLink,embedded:!1})}function Wo(e){const{environment:t,blocks:o,callback:n}=e,r=o[0];(0,re().y)(),_e().wr();const i=No(r);if(i){Xo({environment:t,stringValue:i,copiedMessage:r.isPageBlock()||r.isFormBlock()?Bt.copiedLinkToClipboard:Bt.copiedBlockLinkToClipboard}).then(n)}}function Oo(e){const{environment:t,blocks:o,callback:n}=e,r=o[0];(0,re().y)(),_e().wr();const i=No(r),a=function(e,t){var o;const n=No(t);if(!n)return;const r=e.currentUser.id,i=(0,g()._z)({blockId:t.id,intl:ke().A.getIntl(),getRecordValue:t.inMemoryRecordCache.makeGetRecordValueFn(r),userTimeZone:(0,I().P)()}),a=null===(o=t.getBlockIconStore())||void 0===o?void 0:o.getValue(),s=[(0,M().A)(a)?a:void 0,i].filter(Y().O9).join(" ");if(!s)return n;let l=`<a href="${n}"><span>${s}</span></a>`;return Ee().default.checkGate({gateName:"paste_links_as_mentions"})&&(l+=(0,pe().a0)({id:t.id,spaceId:t.getSpaceId()})),l}(t,r);if(i&&a){zo({environment:t,stringValue:i,htmlValue:a,copiedMessage:r.isPageBlock()?Bt.copiedPageLinkToClipboard:r.isFormBlock()?Bt.copiedFormLinkToClipboard:Bt.copiedBlockLinkToClipboard}).then(n)}}function Uo(e){const{environment:t,blocks:o,callback:n}=e;if(o.length<2)return Wo(e);(0,re().y)(),_e().wr();const r=o.map(No).filter(Y().O9);if(r.some(Boolean)){const e=r.length>1?Bt.copiedLinksToClipboard:Bt.copiedLinkToClipboard;Xo({environment:t,stringValue:r.join("\n\n"),copiedMessage:e}).then(n)}}function Ho(e){const{environment:t,blocks:o,callback:n}=e,r=o[0];if(!r.isDefined())return;const i=r.getModel(),a=r.getProperties(),s=r.getFormat();let l;if(r.isType(c().xd.bookmark))l=H().q4_(a.link);else if((0,c().ie)(i.type))l=H().q4_(a.source);else if(r.isType(c().xd.externalObjectInstance)||r.isType(c().xd.externalObjectInstancePage))l=(null==s?void 0:s.original_url)||(null==s?void 0:s.uri);else if(r.isType(c().xd.collectionView)){var d;const e=null===(d=r.getCollectionStore())||void 0===d?void 0:d.getValue();var u;if(e&&(0,b().ek)(e))l=null===(u=e.format)||void 0===u?void 0:u.original_url}else{if(!r.isType(c().xd.alias))return;l=null==s?void 0:s.comment_alias_url}if(!l)return;if(v()._J(l))return void h().log({level:"error",from:"clipboardActions",type:"copyDirectLinkToContent",error:{message:"Attempted to copy a direct signed url for S3-housed content."}});if(l=ee().q7(l),!l)return;(0,re().y)(),_e().wr();Xo({environment:t,stringValue:l,copiedMessage:Bt.copiedLinkToClipboard}).then(n)}function zo(e){return jo(e)}function Xo(e){return jo(e)}async function jo(e){const{environment:t,htmlValue:o,stringValue:n,copiedMessage:r,showCopyModal:i}=e;function a(){Ct().IU({environment:t}),Be().A.setState({...Be().A.state,active:!0,stringValue:n})}if(i)a();else try{var s;if(t.device.isElectron&&null!==(s=kt().electronApi)&&void 0!==s&&null!==(s=s.clipboard)&&void 0!==s&&s.write){const e={text:n};o&&(e.html=o),await kt().electronApi.clipboard.write(e)}else if("undefined"==typeof ClipboardItem)await navigator.clipboard.writeText(n);else{const e={"text/plain":new Blob([n],{type:"text/plain"})};o&&(e["text/html"]=new Blob([o],{type:"text/html"}));const t=new ClipboardItem(e);await navigator.clipboard.write([t])}r&&Mt().D6({label:ke().A.formatMessage(r)})}catch{a()}}function $o(){document.queryCommandSupported("copy")&&document.execCommand("copy")}async function Zo(e,t){let o;o="string"==typeof t?t:JSON.stringify(t),o&&await Xo({environment:e,stringValue:o,copiedMessage:Bt.copiedToClipboard})}function Go(e){const{environment:t,textSelection:o,markdownSerializationOptions:n,markdownLinkifyIt:r}=e,i=(0,ye().H7)(o);if(i&&i.selection.startIndex!==i.selection.endIndex)return function(e){const{environment:t,singleStoreTextSelection:o,markdownSerializationOptions:n}=e,{store:r,selection:i}=o,a=t.currentUser.id,s=r.inMemoryRecordCache,c=ke().A.getIntl(),d=r.getValue(),p=H().Ffo(d,i.startIndex,i.endIndex),m=r.getRecordStoreUIRoot().getValue();if(!m)return;const f={id:m.id,table:E().ev,spaceId:m.space_id},g=s.makeGetRecordValueFn(a);return A().ZR({textValue:p,exportArgs:{root:f,navigableBlockId:f.id,renderParentBlockId:void 0,blockId:f.id,userTimeZone:(0,I().P)(),intl:c,getRecordValue:g,numberedListCache:{},bulletedListCache:{},getRecordsWithParent:()=>[],getExportedPathToFile:e=>{let{toFileURI:t}=e;return t},getExportedRenderAsset:e=>{let{toFileURI:t}=e;return t},getExportedPathToPage:e=>{let{toPageId:t}=e;return(0,u().A)({pageId:t,pageValue:g({table:E().ev,id:t}),baseUrl:ae().A.domainBaseUrl,pageVisitSource:l().y8.Export})},baseUrl:ae().A.domainBaseUrl,publicDomainName:ae().A.publicDomainName,transformAnnotation:null==n?void 0:n.transformAnnotation,transformBlockMapping:null==n?void 0:n.transformBlockMapping,resultCache:new Map,regExpCache:new Map,experimentService:Ee().default,collectionFeatureGates:(0,me().i)(),formulasModule:k()}})}({environment:t,singleStoreTextSelection:i,markdownSerializationOptions:n});const a=so({environment:t,multiSelection:o,action:"copy"});if(!a)return;const s=o.start.store.inMemoryRecordCache,c=o.start.store.getRecordStoreUIRoot().getValue();if(!c)return;const d=t.currentUser.id,{markdown:p}=(0,pe().Ij)({clipboardData:a,rootBlock:{id:c.id,table:E().ev,spaceId:c.space_id},isWindows:t.device.isWindows,fallbackGetRecordValue:s.makeGetRecordValueFn(d),markdownSerializationOptions:n,markdownLinkifyIt:r,formulasModule:k()});return p}function Jo(e){const{environment:t,inMemoryRecordCache:o,text:n,transaction:r,markdownOptions:i,markdownLinkifyIt:a,tinyMceMicrosoftWordPasteFilter:l,parentPointer:c}=e,d=no({markdown:n,markdownOptions:i,markdownLinkifyIt:a});if(!d)return;const u=document.createElement("div");u.innerHTML=Ao({html:d,tinyMceMicrosoftWordPasteFilter:l});const{currentUserStore:p,currentSpaceStore:m}=Fe().default.state;if(!p||!m)return;const f=p.getValue();if(!f)return;const g=(ue().ZO()??m).id,b=m.id,v=(0,be().Gx)({environment:t,spaceId:b}),k=t.idCreator.getSpaceShortIdCreator(b,v),{allOperations:y,rootContentIds:h}=x().aH({actor:(0,s().A7)(f),parent:c??{id:g,table:E().ev,spaceId:m.id},rootNode:u,deps:{importFileMap:{},window,intl:ke().A.getIntl(),randomID:K().Ay,spaceIdCreator:k,randomShortID:Q().Ay,isPhoneNumber:D().W,emojiData:de().A.state},options:{useCrdt:(0,se().D8)(m),ignoreBlockCount:!1}});for(const s of y)if((0,z().ph)(s)){const e=new(Oe().Bv)(t,s.pointer,{inMemoryRecordCache:o,userId:f.id});_t().applyCrdtTextOperation({store:e,operation:s,invertedOperation:void 0,transaction:r})}else if((0,P().$Y)(s)){const e=new(Oe().pm)({environment:t,pointer:s.pointer,recordStoreOptions:{inMemoryRecordCache:o,userId:f.id}});_t().applyOperation({store:e,operation:s,transaction:r})}else(0,Y().HB)(s);return h.map((e=>new(Oe().Bv)(t,{table:E().ev,id:e},{inMemoryRecordCache:o})))}function qo(e){const{event:t,markdownLinkifyIt:o,tinyMceMicrosoftWordPasteFilter:n}=e;if(!t.clipboardData)return;const{text:r,html:i,multiTextSelectionData:a,textSelectionData:s,blockSelectionData:l}=to({clipboardData:t.clipboardData,tinyMceMicrosoftWordPasteFilter:n});if(a)return Io({text:r,html:i,stripText:!1,stripSurroundingWhitespace:!0,markdownLinkifyIt:o,tinyMceMicrosoftWordPasteFilter:n});if(s){const{editing:e,selection:t}=s;return H().Uee(H().AI5(e,t.startIndex,t.endIndex).tokensInsideRange,{removeSuggestionAnnotationsAndText:!1,removeSuggestionAnnotations:!0,removeDiscussions:!0})}return i||r?function(e){const{text:t,html:o,blockSelectionData:n,markdownLinkifyIt:r,tinyMceMicrosoftWordPasteFilter:i}=e,a=t.includes("\n");return a||n&&n.blocks.length>0?H().x9d(t):Io({text:t,html:o,stripText:!1,stripSurroundingWhitespace:!0,markdownLinkifyIt:r,tinyMceMicrosoftWordPasteFilter:i})}({text:r,html:i,blockSelectionData:l,markdownLinkifyIt:o,tinyMceMicrosoftWordPasteFilter:n}):void 0}},563015:(e,t,o)=>{o.d(t,{eJ:()=>g,ew:()=>f,ml:()=>d,rA:()=>p,yI:()=>m,zf:()=>u});o(581454);var n=()=>o(496603),r=()=>o(534177),i=()=>o(708685),a=()=>o(145076),s=()=>o(349835),l=()=>o(977345);function c(e){switch(e){case"checkbox":return"boolean";case"number":return"number";case"text":return"text";case"date":return"date";case"array":return"array";case"block":return"block";case"person":return"person";case"select":return"select";case"function":return"function";case"unknown":return"unknown";case"undefined":return"undefined";default:(0,r().HB)(e)}}function d(e){switch(e.type){case s().M9.InvalidCharacter:return{...a().x0.InvalidCharacter,values:{errorCharacter:e.character}};case s().M9.UnclosedStringLiteral:return a().x0.UnclosedStringLiteral;case s().M9.UnclosedComment:return a().x0.UnclosedComment;case s().M9.TokenExpected:return{...a().x0.TokenExpected,values:{expectedToken:e.token}};case s().M9.StringLiteralContainsToken:return a().x0.StringLiteralContainsToken;case s().M9.ExpressionExpected:return a().x0.ExpressionExpected;case s().M9.PropertyTokenOrFunctionExpected:return a().x0.PropertyTokenOrFunctionExpected;case s().M9.EndOfInputExpected:return a().x0.EndOfInputExpected;case s().M9.UnexpectedError:return a().x0.UnexpectedError;case s().M9.TooDeeplyNested:return a().x0.TooDeeplyNested;default:(0,r().HB)(e)}}function u(e){switch(e.type){case s().IA.FunctionCallArgumentWrongType:case s().IA.FunctionCallUnexpectedArgument:return e.argument;default:return e.node}}function p(e,t){let o;switch(t.type){case s().IA.ThisRowTypeNotFound:o=a().Xz.ThisRowTypeNotFound;break;case s().IA.ThisRowNotBlockWithCollection:o=a().Xz.ThisRowNotBlockWithCollection;break;case s().IA.MissingPropertyOnThisRow:o={...a().Xz.MissingPropertyOnThisRow,values:{propertyName:t.property}};break;case s().IA.MissingContextVariable:{const e=(0,l().ix)(t.token)?t.token.contextValueId:t.token.valueId;o={...a().Xz.MissingContextVariable,values:{valueId:e}}}break;case s().IA.MissingBlock:o={...a().Xz.MissingBlock,values:{blockId:t.token.blockId}};break;case s().IA.CallingNotFunction:o={...a().Xz.CallingNotFunction,values:{expressionType:c(t.callee.type.type)}};break;case s().IA.FunctionCallTooFewArguments:o={...a().Xz.FunctionCallTooFewArguments,values:{minNumParameters:t.minNumParameters,functionName:t.libraryFunction.name,numArguments:t.numArguments}};break;case s().IA.FunctionCallUnexpectedArgument:o={...a().Xz.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case s().IA.FunctionCallArgumentWrongType:o={...a().Xz.FunctionCallArgumentWrongType,values:{argumentType:c(t.argument.type.type),functionName:t.libraryFunction.name}};break;case s().IA.MemberPropertyMismatchCollection:o={...a().Xz.MemberPropertyMismatchCollection,values:{propertyName:t.token.property}};break;case s().IA.MemberPropertyMissing:o={...a().Xz.MemberPropertyMissing,values:{propertyName:t.property}};break;case s().IA.MemberPropertyTargetNotBlock:o=a().Xz.MemberPropertyTargetNotBlock;break;case s().IA.MemberPropertyTypeInvalid:o={...a().Xz.MemberPropertyTypeInvalid,values:{propertyName:t.propertyName,propertyType:t.propertyType}};break;case s().IA.UndefinedIdentifier:o={...a().Xz.UndefinedIdentifier,values:{identifier:t.node.text}};break;case s().IA.UnifiedFunctionCannotFindFunction:o={...a().Xz.UnifiedFunctionCannotFindFunction,values:{functionName:t.name}};break;case s().IA.UnifiedFunctionNoArguments:o={...a().Xz.UnifiedFunctionNoArguments,values:{functionName:t.libraryFunction.name}};break;case s().IA.UnifiedFunctionTargetWrongType:o={...a().Xz.UnifiedFunctionTargetWrongType,values:{functionName:t.libraryFunction.name,targetType:c(t.expression.type.type)}};break;case s().IA.CannotRelativelyCompareTypes:o={...a().Xz.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case s().IA.CannotDoMathOnType:o={...a().Xz.CannotDoMathOnType,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case s().IA.UnaryMinusOnNonNumber:o={...a().Xz.UnaryMinusOnNonNumber,values:{type:c(t.expression.type.type)}};break;case s().IA.IdentifierExpected:o=a().Xz.IdentifierExpected;break;case s().IA.FunctionCallExpected:o={...a().Xz.FunctionCallExpected,values:{functionName:t.functionName}};break;case s().IA.RenamedIdentifier:o={...a().Xz.RenamedIdentifier,values:{identifier:t.identifier,renamedTo:t.renamedTo}};break;case s().IA.RemovedFunction:o={...a().Xz.RemovedFunction,values:{functionName:t.functionName,alternative:t.alternative}};break;case s().IA.ContextVariableNotBlockWithCollection:o={...a().Xz.ContextVariableNotBlockWithCollection,values:{valueId:t.token.contextValueId}};break;case s().IA.MissingPropertyOnContextVariable:o={...a().Xz.MissingPropertyOnContextVariable,values:{propertyName:t.property,valueId:t.token.contextValueId}};break;case s().IA.BlockPropertyTypeInvalid:o={...a().Xz.BlockPropertyTypeInvalid,values:{propertyName:t.propertyName}};break;case s().IA.DisallowedReturnType:{const n=t.allowedReturnTypes.map((t=>e.formatMessage((0,i().getHumanReadableType)(t)).toLocaleLowerCase()));o={...a().Xz.DisallowedReturnType,values:{allowedReturnType:e.formatList(n,{style:"long",type:"conjunction"}),allowedReturnTypeCount:t.allowedReturnTypes.length,returnType:e.formatMessage((0,i().getHumanReadableType)(t.returnType)).toLocaleLowerCase()}};break}case s().IA.CrossSpacePropertyNotSupported:o={...a().Xz.CrossSpacePropertyNotSupported};break;default:(0,r().HB)(t)}return{...o,values:{...o.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}}function m(e,t){let o;switch(t.type){case s().uW.MissingThisRow:o=a().X8.MissingThisRow;break;case s().uW.MissingSchemaPropertyOnThisRow:o={...a().X8.MissingSchemaPropertyOnThisRow,values:{propertyName:t.property}};break;case s().uW.ThisRowBlockPropertyMismatchCollection:o=a().X8.ThisRowBlockPropertyMismatchCollection;break;case s().uW.MissingContextVariable:o={...a().X8.MissingContextVariable,values:{valueId:t.valueId}};break;case s().uW.IdentifierNotFound:o={...a().X8.IdentifierNotFound,values:{identifier:t.node.text}};break;case s().uW.CannotRelativelyCompareTypes:o={...a().X8.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType),rhsType:c(t.rhsType)}};break;case s().uW.CannotDoMathOnType:o={...a().X8.CannotDoMathOnType,values:{valueType:c(t.valueType)}};break;case s().uW.CannotCallNonFunction:o={...a().X8.CannotCallNonFunction,values:{calleeType:c(t.calleeType)}};break;case s().uW.UnifiedFunctionPropertyNotFound:o={...a().X8.UnifiedFunctionPropertyNotFound,values:{functionName:t.node.name}};break;case s().uW.LibraryFunctionExecutionError:const n=t.error instanceof s().x4?t.error:void 0;o=(null==n?void 0:n.info.type)===s().v3.DateInvalidDurationUnit?{...a().gW.DateInvalidDurationUnit,values:{functionName:t.libraryFunction.name,invalidUnit:n.info.invalidUnit}}:(null==n?void 0:n.info.type)===s().v3.CannotUseToNumberOnList?{...a().gW.CannotUseToNumberOnList}:(null==n?void 0:n.info.type)===s().v3.CannotRoundToNonInteger?{...a().gW.CannotRoundToNonInteger,values:{precision:n.info.precision}}:(null==n?void 0:n.info.type)===s().v3.CannotRoundToTooManyDecimalPlaces?{...a().gW.CannotRoundToTooManyDecimalPlaces,values:{precision:n.info.precision}}:{...a().X8.LibraryFunctionExecutionError,values:{functionName:t.libraryFunction.name}};break;case s().uW.FunctionCallTooFewArguments:o={...a().X8.FunctionCallTooFewArguments,values:{functionName:t.libraryFunction.name}};break;case s().uW.FunctionCallUnexpectedArgument:o={...a().X8.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case s().uW.FunctionCallArgumentWrongType:o={...a().X8.FunctionCallArgumentWrongType,values:{functionName:t.libraryFunction.name,argumentType:c(t.argumentType)}};break;case s().uW.AccessingPropertyOnNonBlock:o=a().X8.AccessingPropertyOnNonBlock;break;case s().uW.MissingDataDependencyBlock:o={...a().X8.MissingDataDependencyBlock,values:{blockId:t.blockPointer.id}};break;case s().uW.MissingDataDependencyPerson:o={...a().X8.MissingDataDependencyPerson,values:{personId:t.personPointer.id}};break;case s().uW.MemberPropertyMismatchCollection:o=a().X8.MemberPropertyMismatchCollection;break;case s().uW.MissingPropertyOnSchemaForMemberProperty:o=a().X8.MissingPropertyOnSchemaForMemberProperty;break;case s().uW.UnaryMinusOnNonNumber:o={...a().X8.UnaryMinusOnNonNumber,values:{expressionType:c(t.expressionType)}};break;case s().uW.UnexpectedRecoveryNode:o=a().X8.UnexpectedRecoveryNode;break;case s().uW.UnexpectedError:o=a().X8.UnexpectedError;break;case s().uW.DepthExceeded:o=a().X8.DepthExceeded;break;case s().uW.CycleDetected:o=a().X8.CycleDetected;break;case s().uW.DownstreamParseFailure:o=a().X8.DownstreamParseFailure;break;case s().uW.MaxEvaluationTimeExceeded:o=a().X8.MaxEvaluationTimeExceeded;break;case s().uW.MissingSchemaPropertyOnCollection:o={...a().X8.MissingSchemaPropertyOnCollection,values:{collectionId:t.collectionId,propertyName:t.property}};break;case s().uW.ContextVariableWrongType:o={...a().X8.ContextVariableWrongType,values:{expectedType:t.expectedType,propertyType:t.resultType,valueId:t.valueId}};break;case s().uW.DisallowedValueType:{const n=t.allowedValueTypes.map((t=>e.formatMessage((0,i().getHumanReadableType)(t)).toLocaleLowerCase()));o={...a().Xz.DisallowedReturnType,values:{allowedValueType:e.formatList(n,{style:"long",type:"conjunction"}),allowedValueTypeCount:t.allowedValueTypes.length,valueType:e.formatMessage((0,i().getHumanReadableValueType)(t.expressionValue)).toLocaleLowerCase()}};break}default:(0,r().HB)(t)}return(0,l().li)(t)?{...o,values:{...o.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}:o}function f(e){const t=null==e?void 0:e.values;return[n().cJ(e,"values"),t]}function g(e){return e.type===s().uW.DepthExceeded||e.type===s().uW.CycleDetected||e.type===s().uW.MaxEvaluationTimeExceeded||e.type===s().uW.LibraryFunctionExecutionError}},663199:(e,t,o)=>{o.d(t,{W:()=>i});var n=()=>o(970013),r=()=>o(72135);function i(e){let{intl:t,propertySchema:o,value:i}=e,a=r().C4;return o&&(0,n().AM)(o)&&(a=o.number_format??r().C4),r().ZV(i,a,t)}},673898:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{active:!1,stringValue:""}}}const r=new n},754199:(e,t,o)=>{function n(e){return/^(\+\d{1,2}[\s.-])?\(?\d{3}\)?[\s.-]\d{3}[\s.-]\d{4}$/.test(e)}function r(e){return/^[0-9 .()\-\+]{7,}$/.test(e)}o.d(t,{W:()=>n,e:()=>r})},813743:(e,t,o)=>{o.d(t,{O8:()=>B,Yf:()=>D,fS:()=>F});var n=()=>o(221844),r=()=>o(496506),i=()=>o(700500),a=()=>o(792071),s=()=>o(861017),l=()=>o(179034),c=()=>o(197959),d=()=>o(161479),u=()=>o(919709),p=()=>o(534177),m=()=>o(246826),f=()=>o(778417),g=()=>o(725614),b=()=>o(780054),v=()=>o(97270),k=()=>o(299545),y=()=>o(906537),h=()=>o(110955),S=()=>o(487494),I=()=>o(176106),x=()=>o(525112),T=()=>o(375447),C=()=>o(630116),M=()=>o(292167),w=()=>o(437219),A=()=>o(722101),_=()=>o(666144),P=()=>o(606952),R=()=>o(317909);function D(e){const{environment:t,textStore:o,blockStore:i,url:a,oldTextValue:u,urlSelection:p}=e;if(h().A.state.open||v().A.state.open||T().A.state.open||I().A.state.open)return!1;const m=y().get();if(!m)return!1;const f=y().getRect(m);if(!f)return!1;const g=(0,s().parseRoute)({url:a,baseUrl:b().A.domainBaseUrl,publicDomainName:b().A.publicDomainName,isMobile:t.device.isMobile,protocol:b().A.protocol,currentUrl:window.location.href});if("page"===g.name&&!!g.discussionId&&g.discussionId){const e=g.discussionId,s=g.blockId;if(!s)return!1;const m=i.getParentBlockStore();if(!m)return!1;const b=(0,C().Oo)(m,{table:l().ev,id:s,spaceId:(0,d().e)(m.pointer.spaceId)}),v=(0,C().Oo)(b,{table:c().$Y,id:e,spaceId:(0,d().e)(i.pointer.spaceId)});if("none"===v.getRole())return!1;const y=new(r().default)((()=>k().wc(v)[0]),{debugName:"firstCommentStore"}),h=new(n().A)({name:"internalUnfurlingMenuActions.activate",isTemporaryData:!0});t.defaultRecordCache.inMemoryRecordCache.addCacheOverride(h);const I=i.clone(h),T=o.clone(h),M=m.clone(h);return x().A.setState({args:{commentStore:y},stores:{blockStore:i,textStore:o,parentStore:m},temporaryStores:{blockStore:I,textStore:T,parentStore:M},temporaryRecordCache:h,focusedIndex:S().A.Preview,selectionRect:f,oldTextValue:u,open:!0,url:a,urlSelection:p}),w().wQ(t,{url:a}),!0}return!1}function F(e){const{actionType:t,environment:o,commentStore:n,useTempStores:r}=e,i=x().A.state;if(!i.open)return;const{oldTextValue:s}=i,l=r?i.temporaryStores:i.stores,{textStore:c,blockStore:m,parentStore:b}=l,v=o.currentUser.id;if(v){if(r){i.temporaryRecordCache.clearCache();for(const e in i.temporaryStores){const t=i.temporaryStores[e],n={userId:v,pointer:t.pointer},r=o.defaultRecordCache.inMemoryRecordCache.getRecord(n);r?_().PC({environment:o,inMemoryRecordCache:i.temporaryRecordCache,pointer:t.pointer,model:a().Bj6.fromValue(t.pointer.table,r.value),role:r.role,updatePaths:[[]],userId:v,force:!0,debugSource:"setUnfurlType"}):_().oX({environment:o,inMemoryRecordCache:i.temporaryRecordCache,persistedRecordCache:void 0,pointer:t.pointer,userId:v})}}else o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(i.temporaryRecordCache);switch(t){case S().A.Link:f().hc({environment:o,store:i.stores.blockStore}),g().setSelection({store:i.stores.textStore,selection:{startIndex:i.urlSelection.endIndex,endIndex:i.urlSelection.endIndex}}),x().A.setState({...i,focusedIndex:S().A.Link});break;case S().A.Mention:if(!n)return;const e=(0,d().e)(c.pointer.spaceId);if(!e)return;const r=n.id;R().createAndCommit({environment:o,userAction:"internalUnfurlingMenuActions.mention",canUndo:!0,perform:t=>{P().KY({environment:o,store:c,value:s,transaction:t}),P().Gf({environment:o,editorMode:"default",store:c,selection:{startIndex:i.urlSelection.startIndex,endIndex:i.urlSelection.startIndex},annotation:u().hiQ(r,e),transaction:t,analyticsFrom:"block"})}}),x().A.setState({...i,focusedIndex:S().A.Mention});break;case S().A.Preview:if(!n)return;R().createAndCommit({environment:o,userAction:"internalUnfurlingMenuActions.preview",canUndo:!0,perform:e=>{P().KY({environment:o,store:c,value:s,transaction:e});const t=k().eK(n);if(!t)return;if(!k().No(t)||!b||!t.getParentId())return;const r=M().s({environment:o,parentBlockStore:b,targetStore:n,transaction:e});if(A().WH({parentStore:b.getContentStore(),insertStore:r,afterStore:m,transaction:e}),0===u().q4_(i.oldTextValue).trim().length){const t=C().Bv.createChildStore(b.getContentStore(),i.stores.blockStore.pointer);A().TF({parentStore:b.getContentStore(),childToRemoveStore:t,transaction:e})}}}),x().A.setState({...i,focusedIndex:S().A.Preview});break;default:throw(0,p().HB)(t)}r||x().A.setState({open:!1})}}function B(e){var t,o;const{blockStore:n,transaction:r}=e,a=n.getType(),s=n.getFormat(),l=n.getSpaceId();if(!n.isDefined()||a!==i().xd.alias||null==s||null===(t=s.alias_pointer)||void 0===t||!t.id)return;const c=[u().wmz(u().hiQ(null==s||null===(o=s.alias_pointer)||void 0===o?void 0:o.id,l))];m().zv({store:n,data:{type:i().xd.text},transaction:r}),m().zv({store:n.getFormatStore(),data:{alias_pointer:null},transaction:r}),P().KY({environment:n.environment,store:n.getBlockTitleStore(),value:c,transaction:r})}},856197:(e,t,o)=>{o.d(t,{z:()=>S});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454);var n=()=>o(764880),r=()=>o(713998),i=()=>o(869190),a=()=>o(604995),s=()=>o(663199),l=()=>o(683259),c=()=>o(128713),d=()=>o(792071),u=()=>o(142748),p=()=>o(179034),m=()=>o(919709),f=()=>o(931075);const g=i().ZF;function b(e){return(0,l().vy)({...e,fromString:e=>e}).join("")}function v(e){const{textValue:t}=e;if(t){const o=[];for(const n of t)m().bHQ(n)||o.push(b({...e,textValue:[n]}));return o.join(", ")}return""}const k={[m().Ifu.Page]:e=>{let{annotation:t,exportArgs:o}=e;const{getExportedPathToPage:n}=o,r=m().v55(t),i=(0,l()._z)({intl:o.intl,blockId:r,getRecordValue:o.getRecordValue,userTimeZone:o.userTimeZone}),a=n({toPageId:r});if(i&&a)return`${i} (${a})`},[m().Ifu.CustomEmoji]:e=>{let{annotation:t,exportArgs:o}=e;const{getRecordValue:n}=o,r=m().qS0(t);if(!r)return;const i=d().b4_.fromGetRecordValueFn(n)(r);return i?i.getRenderTitle():void 0},[m().Ifu.Comment]:e=>{let{annotation:t,exportArgs:n}=e;const{getRecordValue:r,baseUrl:i}=n,a=d().b4_.fromGetRecordValueFn(r),s=m().MdE(t);if(!s)return;const l=a(s);if(!l)return;const c=l.getParentId(),p=l.getParentPointer(),f=(0,u().NJ)((0,u().Yn)(p,r));if(!f)return;const g=a(p);let b;if(g){const e=a(g.getParentPointer());b=e&&"table_row"===e.getType()?e.getParentId():g.getParentId()}return(0,o(921940).A)({pageId:f.id,scrollToBlockId:b,pageValue:f,baseUrl:i,discussionId:c,pageVisitSource:o(584262).y8.Export})},[m().Ifu.Link]:e=>{let{annotation:t,exportArgs:n}=e;const{getExportedPathToFile:r,getExportedPathToPage:i,navigableBlockId:a,baseUrl:s,publicDomainName:l}=n,c=m().cQR(t),d=(0,o(777447).lX)({url:c,baseUrl:s,publicDomainName:l});return d?i({toPageId:d}):r({fromBlockId:a,toFileURI:c})},[m().Ifu.User]:e=>{let{annotation:t,exportArgs:n}=e;const{intl:r}=n,i=m().NcG(t),a=n.getRecordValue({table:o(798880).oo,id:i});if(a)return`@${(0,o(695608).c6)(r,a)}`},[m().Ifu.Bot]:e=>{let{annotation:t,exportArgs:n}=e;const r=m().vjW(t),i=n.getRecordValue({table:o(824862).GP,id:r});if(i)return`@${(0,o(799288).Hg)(i)}`},[m().Ifu.Group]:e=>{let{annotation:t,exportArgs:o}=e;const n=(0,l().Pf)({annotation:t,exportArgs:o});if(n)return n},[m().Ifu.Team]:e=>{let{annotation:t,exportArgs:o}=e;const n=(0,l().nZ)({annotation:t,exportArgs:o});if(n)return n},[m().Ifu.ExternalObjectInstance]:e=>{var t;let{annotation:o,exportArgs:n}=e;const r=m().T$c(o);return null===(t=n.getRecordValue({table:p().ev,id:r,spaceId:n.root.spaceId}))||void 0===t||null===(t=t.format)||void 0===t?void 0:t.original_url},[m().Ifu.LinkMention]:e=>{let{annotation:t,exportArgs:o}=e;const{href:n}=m().q1R(t);return n},[m().Ifu.Date]:e=>{let{annotation:t,exportArgs:o}=e;const{date_format:n,time_format:r,...a}=m().K7D(t);return`@${(0,i().ZF)({value:a,date_format:n,time_format:r,userTimeZone:o.userTimeZone,allowRelativeDates:!1,intl:o.intl})}`},[m().Ifu.Equation]:e=>{let{annotation:t,exportArgs:o}=e;const n=(0,c().TG)(t),r=(0,c().oV)(t,o.getExportedPathToPage,o);return`${n}${m().U35(t)}${r}`},[m().Ifu.Bold]:l().if,[m().Ifu.Italic]:l().if,[m().Ifu.Strike]:l().if,[m().Ifu.Code]:l().if,[m().Ifu.Highlight]:l().if,[m().Ifu.Discussion]:l().if,[m().Ifu.Underline]:l().if,[m().Ifu.Inserted]:l().if,[m().Ifu.Deleted]:l().if,[m().Ifu.TemporaryComment]:l().if,[m().Ifu.TemporaryCursor]:l().if,[m().Ifu.TemporaryEquation]:l().if,[m().Ifu.TemporaryPage]:l().if,[m().Ifu.TemporaryInput]:l().if,[m().Ifu.TemporarySelection]:l().if,[m().Ifu.TemporaryFindHighlight]:l().if,[m().Ifu.TemporarySelectedFindHighlight]:l().if,[m().Ifu.TemplateVariable]:l().if,[m().Ifu.FormulaPageProperty]:l().if,[m().Ifu.FormulaContextValue]:l().if,[m().Ifu.FormulaError]:l().if,[m().Ifu.Citation]:l().if,[m().Ifu.SuggestionInsertText]:l().if,[m().Ifu.SuggestionRemoveText]:l().if,[m().Ifu.SuggestionAnnotate]:l().if,[m().Ifu.SuggestionUnannotate]:l().if,[m().Ifu.TemporaryNativeMABFilter]:l().if,[m().Ifu.TemporaryDictation]:l().if,[m().Ifu.TemporaryHighlight]:l().if,[m().Ifu.AssistantInstructionsCollection]:l().if,[m().Ifu.TemporaryCommentHighlight]:l().if,[m().Ifu.TemporarySuggestionUnderline]:l().if,[m().Ifu.GeoPoint]:l().if};function y(){}function h(){return Promise.resolve(void 0)}const S={blockRenderers:{text:y,encrypted_text:y,header:y,sub_header:y,sub_sub_header:y,quote:y,bulleted_list:y,toggle:y,to_do:y,numbered_list:y,code:y,page:y,image:y,video:y,embed:y,bookmark:y,file:y,tweet:y,maps:y,gist:y,framer:y,invision:y,mixpanel:y,drive:y,figma:y,loom:y,pdf:y,typeform:y,codepen:y,audio:y,divider:y,equation:y,collection_view:y,collection_view_page:y,column_list:y,column:y,factory:y,copy_indicator:y,breadcrumb:y,link_to_collection:y,link_to_page:y,table_of_contents:y,callout:y,whimsical:y,miro:y,abstract:y,sketch:y,excalidraw:y,replit:y,alias:y,transclusion_container:y,transclusion_reference:y,external_object_instance:y,table:y,table_row:y,tab:y,hex:y,deepnote:y,external_object_instance_page:y,button:y,ai_block:y,drawing:y,slide:y,personal_home_page:y,form:y,post:y,workflow:y,transcription:y,person_profile:y},asyncBlockRenderers:{text:h,encrypted_text:h,header:h,sub_header:h,sub_sub_header:h,quote:h,bulleted_list:h,toggle:h,to_do:h,numbered_list:h,code:h,page:h,image:h,video:h,embed:h,bookmark:h,file:h,tweet:h,maps:h,gist:h,framer:h,invision:h,mixpanel:h,drive:h,figma:h,loom:h,pdf:h,typeform:h,codepen:h,audio:h,divider:h,equation:h,collection_view:h,collection_view_page:h,column_list:h,column:h,factory:h,copy_indicator:h,breadcrumb:h,link_to_collection:h,link_to_page:h,table_of_contents:h,callout:h,whimsical:h,miro:h,abstract:h,sketch:h,excalidraw:h,replit:h,alias:h,transclusion_container:h,transclusion_reference:h,external_object_instance:h,table:h,table_row:h,tab:h,hex:h,deepnote:h,external_object_instance_page:h,button:h,ai_block:h,drawing:h,slide:h,personal_home_page:h,form:h,post:h,workflow:h,transcription:h,person_profile:h},annotationRenderers:k,propertyRenderers:{title:e=>b(e),text:b,select:e=>{const{textValue:t,propertySchema:o}=e,n=o.options||[];return r().L3(t,n)},multi_select:e=>{const{textValue:t,propertySchema:o}=e,n=o.options||[],i=r().o2(t,n);return i.sort(),i.join(", ")},status:e=>{const{textValue:t,propertySchema:o}=e;return r().RZ(t,o)},relation:e=>{const{textValue:t,propertySchema:o,exportArgs:n}=e;if("relation"!==o.type)return;const i=r().bG({relationValue:r().n(t),getRecordModel:d().b4_.fromGetRecordValueFn(n.getRecordValue),propertySchema:o,includeDeleted:n.collectionFeatureGates.relations_show_deleted,includeInvalidCollection:n.collectionFeatureGates.relations_show_invalid_collection,includeNoAccess:n.collectionFeatureGates.relations_show_no_access}),a=r().Ap(i);return v({...e,textValue:a})},rollup:e=>{const t=e.exportArgs.getRecordValue,n=e.exportArgs.formulasModule,r=d().Bj6.fromValue(p().ev,e.block),i=d().b4_.fromGetRecordValueFn(t);return o(568063).I({...e,block:r,getRecordModel:i,collectionRequestContext:{userId:void 0,userTimeZone:e.exportArgs.userTimeZone,depth:0,intl:e.exportArgs.intl,visitedProperties:new Set,resultCache:e.exportArgs.resultCache,regExpCache:e.exportArgs.regExpCache,experimentService:e.exportArgs.experimentService,collectionFeatureGates:e.exportArgs.collectionFeatureGates},formulasModule:n})},url:e=>{let{textValue:t}=e;return m().k4p(t)},email:e=>{let{textValue:t}=e;return m().k4p(t)},phone_number:e=>{let{textValue:t}=e;return m().k4p(t)},checkbox:e=>{let{textValue:t}=e;return r().wu(t)?"Yes":"No"},person:e=>{let{textValue:t,exportArgs:n,propertySchema:i,block:a}=e;const{intl:s}=n,l=d().Bj6.fromBlock(a),c=r().e5({textValue:t,propertySchema:i,blockCreatorPointer:l.getCreatedByPointer()});return o(496603).oE(c.map((e=>{const t=n.getRecordValue(e),o=t&&d().Bj6.fromValue(e.table,t);return null==o?void 0:o.getDisplayName(s)}))).join(", ")},number:e=>{let{exportArgs:t,property:n,schema:i,textValue:a}=e;const l=i[n],c=r().Me(a);if(!(0,o(534177).O9)(c))return;let d=!0;var u;l&&(0,o(970013).AM)(l)&&(d=(null===(u=l.show_as)||void 0===u?void 0:u.showValue)??!0);return d?(0,s().W)({intl:t.intl,propertySchema:l,value:c}):void 0},date:e=>{let{textValue:t,propertySchema:n,...r}=e;const a=r.exportArgs.userTimeZone,s=(0,o(787626).b)(t),{date_format:l,time_format:c}=n;if(s)return(0,i().ZF)({allowRelativeDates:!1,value:s,date_format:l,time_format:c,userTimeZone:a,intl:r.exportArgs.intl,displayInUserTimezone:r.exportArgs.displayInUserTimezone??!1,alwaysIncludeTimezone:!0})},file:v,formula:e=>{const{property:t,schema:n,block:r,exportArgs:i}=e,{userTimeZone:a,getRecordValue:l,intl:c,resultCache:u,regExpCache:p,formulasModule:m}=i;if(!m)return;const f=n[t],b=m.primitiveFormulaValueFromPropertySchema({schema:n,property:t,blockModel:d().Bj6.fromBlock(r),getRecordModel:d().b4_.fromGetRecordValueFn(l),intl:c,userTimeZone:a,depth:0,resultCache:u,regExpCache:p,experimentService:i.experimentService,collectionFeatureGates:i.collectionFeatureGates});return"boolean"==typeof b?b?"Yes":"No":(0,o(720665).Et)(b)?(0,s().W)({intl:i.intl,propertySchema:f,value:b}):(0,o(597777).kC)(b)?g({value:b,userTimeZone:a,allowRelativeDates:!1,intl:i.intl}):b},created_time:e=>{const{block:t,exportArgs:o}=e,{userTimeZone:n}=o;if(t.created_time)return g({allowRelativeDates:!1,value:(0,a().KQ)(t.created_time,n),userTimeZone:n,intl:o.intl})},last_edited_time:e=>{const{block:t,exportArgs:o}=e,{userTimeZone:n}=o;if(t.last_edited_time)return g({allowRelativeDates:!1,value:(0,a().KQ)(t.last_edited_time,n),userTimeZone:n,intl:o.intl})},created_by:e=>{const{block:t,exportArgs:o}=e,{getRecordValue:r,intl:i}=o;if(t.created_by_table&&t.created_by_id){const e=(0,n().xC)({getRecordValue:r,pointer:{table:t.created_by_table,id:t.created_by_id,spaceId:t.space_id}});if(e.asActor)return(0,n().lR)(i,e)}},last_edited_by:e=>{const{block:t,exportArgs:o}=e,{getRecordValue:r,intl:i}=o;if(t.last_edited_by_table&&t.last_edited_by_id){const e=(0,n().xC)({getRecordValue:r,pointer:{table:t.last_edited_by_table,id:t.last_edited_by_id,spaceId:t.space_id}});if(e.asActor)return(0,n().lR)(i,e)}},button:e=>"",auto_increment_id:e=>{let{textValue:t,block:n,exportArgs:i}=e;const a=r().On(t),{getRecordValue:s}=i;if(void 0!==a){const e=d().Bj6.fromBlock(n),t=e.getParentTable();if(t!==o(519831).Vl)return;const r=s((0,o(835243).aZ)({spaceId:e.getSpaceId(),parentTable:t,parentId:e.getParentId()}));return(0,o(716016).H4)(null==r?void 0:r.record_key,a)}},last_visited_time:e=>"",location:e=>"",verification:e=>{let{textValue:t,exportArgs:o}=e;const n=f().U1(t);if(!n)return"";const r=f().B2(n);return o.intl.formatMessage(f().D6(r.type))},geo_point:()=>""}}}}]);