"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[11097,57869,71204],{26388:(e,t,r)=>{r.r(t),r.d(t,{DO_NOT_USE_setUserPersonaRoleAndUseCases:()=>_e,checkAndApplyTrial:()=>ve,clearAllOnboardingStates:()=>fe,createOrJoinSpace:()=>me,createSpaceAndSetSpaceId:()=>de,createSpaceAsOwner:()=>le,defaultOnboardingComplete:()=>Se,handleExitOnboarding:()=>be,handleUserCanNotCreateSpace:()=>we,joinSpaceAsGuestOrMember:()=>pe,joinSpaceAsGuestOrMemberWithPerformanceTracking:()=>ue,onOnboardingCompletePublicAccess:()=>ye,prefillTeamWorkspaceName:()=>Ie,redirectAfterContextualizedOnboardingComplete:()=>ae,setAndTrackContextualizedOnboardingComplete:()=>se,setMobileContextualizedOnboardingComplete:()=>ie,setProfileData:()=>ce,setUserAndSpaceSurveyData:()=>ge});r(16280),r(898992),r(354520),r(581454),r(296540);var o=()=>r(584262),n=()=>r(428045),a=()=>r(857639),i=()=>r(416845),s=()=>r(763884),c=()=>r(243020),d=()=>r(179034),l=()=>r(854150),p=()=>r(677338),u=()=>r(919709),m=()=>r(959013),g=()=>r(496603),_=()=>r(534177),v=()=>r(382055),f=()=>r(796756),S=()=>r(148024),y=()=>r(449506),b=()=>r(901389),w=()=>r(705540),I=()=>r(433052),h=()=>r(496414),D=()=>r(246826),k=()=>r(857783),A=()=>r(435009),C=()=>r(537941),O=()=>r(426116),T=()=>r(317909),U=()=>r(840153),R=()=>r(755199),E=()=>r(989423),N=()=>r(47373),M=()=>r(972435),P=()=>r(437622),V=()=>r(465425),L=()=>r(719431),x=()=>r(1130),F=()=>r(616385),j=()=>r(144114),W=()=>r(607859),z=()=>r(12145),B=()=>r(406792),J=()=>r(869562),H=()=>r(351360),q=()=>r(508496),X=()=>r(630116),G=()=>r(807778),$=()=>r(655765),K=()=>r(162342),Q=()=>r(151168),Y=()=>r(846955),Z=()=>r(913454),ee=()=>r(32454),te=()=>r(813755),re=()=>r(59424),oe=()=>r(235921),ne=r(474848);async function ae(e){await(0,F().navigateWithRedirectData)(e),e.environment.device.isMobile&&ie({environment:e.environment,userStore:e.onboardingData.userStore}),se({environment:e.environment,onboardingState:e.onboardingState,userStore:e.onboardingData.userStore,spaceJoinOrCreate:e.spaceJoinOrCreate,permissionLevel:e.permissionLevel})}function ie(e){const{environment:t,userStore:r}=e;T().createAndCommit({userAction:"contextualizedOnboardingActions.contextualizedOnboardingActions",environment:t,canUndo:!0,perform:e=>{x().PF({userStore:r,transaction:e})}})}function se(e){const{environment:t,onboardingState:r,userStore:o,spaceJoinOrCreate:n,permissionLevel:a}=e;t.device.isElectron&&w().quickSearchRefresh(),T().createAndCommit({userAction:"contextualizedOnboardingActions.setAndTrackContextualizedOnboardingComplete",environment:t,canUndo:!0,perform:e=>{x().LC({userStore:o,transaction:e})}}),f().IA(t,{...(0,re().getContextualizedOnboardingAnalyticsData)({onboardingState:r,environment:t}),initial_workspace_type:n,permission_level:a}),S().Kc(t)}async function ce(e,t){const{onboardingData:r,profileName:o,profilePhoto:n,password:a,emailOptIn:i}=t;if(!r)return;const s=r.userStore;(0,E().mt)(e,{email_optin_product_updates_and_releases:i,email_optin_product_tips_and_news:i,email_optin_resources_and_events:i,email_optin_sales_outreach:i,email_optin_events_and_resources:i,email_optin_product_education_and_how_tos:i,email_optin_notion_for_startups:i}),T().createAndCommit({userAction:"onboardingHelpers.setProfileData",environment:e,canUndo:!0,perform:e=>{const t={...n&&{profile_photo:n}};t.name=o,D().zv({store:s,data:t,transaction:e})}});const c=await L().shouldCreatePassword(e)&&!function(){var e;const{currentUserSettingsStore:t}=H().default.state;return!(!t||!t.isReady()||"email-password"!==(null===(e=t.getSettings())||void 0===e?void 0:e.mobile_ads_signup_variant))}();a&&c&&await y().callApi({eventName:"setPassword",environment:e,data:{newPassword:a,sendEmail:!1}})}async function de(e){var t;let{onboardingState:r,environment:o,showLoader:n=!0}=e;if(!r.onboardingData)return;const a=j().sg(r.onboardingData),{spaceStore:i,spaceViewStore:s,inviteLinkCode:c,teamStoreId:d}=await le({onboardingState:r,onboardingData:r.onboardingData,redirectData:a,planType:null===(t=r.planTypeAndSurveyInfo)||void 0===t?void 0:t.planType,environment:o,showLoader:n});oe().A.setState({...oe().A.state,spaceId:i.id,spaceViewId:s.id,inviteLinkCode:c,inviteLinkUrl:c?(0,P().X$)(o,i.id,c):void 0,teamStoreId:d})}async function le(e){var t,r,o,n;const{onboardingState:a,onboardingData:i,redirectData:s,planType:c,environment:d,showLoader:l=!0}=e,{currentSpaceStore:p,currentSpaceViewStore:u}=H().default.state;if(p&&u&&p.id===a.spaceId)return{spaceStore:p,spaceViewStore:u,teamStoreId:a.teamStoreId};l&&h().m({message:F().messages.creatingWorkspace});const m=M().A.getIntl(),g=i.userStore.getFullName(m),_=B().default.DO_NOT_USE_markLegacy("onboarding.create_space"),v=a.spaceName||j().JR(g||"",m),{spaceViewStore:f,spaceStore:S,inviteLinkCode:y,redirectData:b,teamStoreId:w}=await F().createSpaceWithTemplates({environment:d,isNewUserOnboarding:!!a.isFirstTimeOnboarding,onboardingData:i,userPersona:(null===(t=a.planTypeAndSurveyInfo)||void 0===t||null===(t=t.surveyResponses)||void 0===t?void 0:t.userPersona)||"unfilled",redirectData:s,spaceName:v,spaceIcon:a.spaceIcon||null,planSelection:c,isPrivate:"team"!==c,useCases:(null===(r=a.planTypeAndSurveyInfo)||void 0===r||null===(r=r.surveyResponses)||void 0===r?void 0:r.useCases)||[],categories:(null===(o=a.planTypeAndSurveyInfo)||void 0===o||null===(o=o.surveyResponses)||void 0===o?void 0:o.categories)||[],hasTrialId:!1,selectedWorkflowTemplates:(null==a?void 0:a.selectedWorkflowTemplateIds)||[],collaborativeIntent:null===(n=a.planTypeAndSurveyInfo)||void 0===n?void 0:n.collaborativeIntent});return B().default.DO_NOT_USE_measureLegacy(_,{environment:d,data:{flow:a.flowName,onboarding_complete_data:{stage:(0,re().getStageName)({flowName:a.flowName,stageIndex:a.currentStageIndex,environment:d}),redirect_data:s,is_new_user:!0,permission_level:"member",plan:c}}}),l&&h().V(),{spaceViewStore:f,spaceStore:S,inviteLinkCode:y,newRedirectData:b,teamStoreId:w}}async function pe(e){const{onboardingData:t,redirectData:r,currentUserRootStore:o,currentUserSettingsStore:n,environment:a}=e;if("guest_redirect"===r.type){const{spaceViewStore:e}=await O().DT({environment:a,spaceId:r.spaceId,userRootStore:o,analyticsFrom:"onboarding",userSettingsStore:n,navigate:!1,redirectPageId:r.pageId,isOnboarding:!0});return{spaceViewStore:e}}{const{spaceViewStore:e}=await F().joinTeamSpaceWithTemplates({environment:a,onboardingData:t,redirectData:r,spaceId:oe().A.state.spaceId,isNewUserOnboarding:!!oe().A.state.isFirstTimeOnboarding});return{spaceViewStore:e}}}async function ue(e){const{onboardingState:t,onboardingData:r,redirectData:o,currentUserRootStore:n,currentUserSettingsStore:a,environment:i}=e;h().m({message:F().messages.joiningWorkspace});const s=B().default.DO_NOT_USE_markLegacy("onboarding.join_space"),{spaceViewStore:c}=await pe({onboardingData:r,redirectData:o,currentUserRootStore:n,currentUserSettingsStore:a,environment:i});return B().default.DO_NOT_USE_measureLegacy(s,{environment:i,data:{flow:t.flowName,onboarding_complete_data:{stage:(0,re().getStageName)({flowName:t.flowName,stageIndex:t.currentStageIndex,environment:i}),redirect_data:o,is_new_user:!0,permission_level:j().S1(o)}}}),h().V(),{spaceViewStore:c}}async function me(e){const{spaceJoinOrCreate:t,onboardingState:r,onboardingData:o,currentUserRootStore:n,currentUserSettingsStore:a,planType:i,environment:s}=e,c=j().sg(o);if("create"===t){const{spaceStore:e,spaceViewStore:t,newRedirectData:n,teamStoreId:a}=await le({onboardingState:r,onboardingData:o,redirectData:c,planType:i,environment:s});return{spaceStore:e,spaceViewStore:t,newRedirectData:n,teamStoreId:a}}if("join"===t){const{spaceViewStore:e}=await ue({onboardingState:r,onboardingData:o,redirectData:c,currentUserRootStore:n,currentUserSettingsStore:a,environment:s});return{spaceViewStore:e}}(0,_().HB)(t)}function ge(e){var t,r,o;const{environment:n,onboardingState:a,planSelection:i,spaceStore:s,spaceViewStore:c}=e,d=null===(t=a.planTypeAndSurveyInfo)||void 0===t?void 0:t.surveyResponses,l=null!=d&&d.educationRole&&"other"!==(null==d?void 0:d.educationRole)?d.educationRole:void 0;j().BH({environment:n,state:{onboardingExperiments:void 0,userPersona:null==d?void 0:d.userPersona,userRole:null==d?void 0:d.userRole,categories:null==d?void 0:d.categories,userEducationRole:l,userEducationLevel:null==d?void 0:d.educationLevel,notionUseFrequency:null==d?void 0:d.notionUseFrequency,companySize:null==d?void 0:d.companySize,useCases:g().sb([...(null==d?void 0:d.useCases)??[],...(null===(r=a.selectedWorkflowTemplateIds)||void 0===r?void 0:r.map((e=>{const t=(0,Z().getCollectionTemplateFromId)(e);return null!=t&&t.category?Z().useCaseByCollectionTemplateCategory[null==t?void 0:t.category]:void 0})).filter((e=>void 0!==e)))??[]]),planSelection:i,collaborativeIntent:null===(o=a.planTypeAndSurveyInfo)||void 0===o?void 0:o.collaborativeIntent},spaceStore:s,spaceViewStore:c})}function _e(e,t){var r,o,n,a;const{onboardingData:i}=t;if(!i)return;const s=null===(r=t.planTypeAndSurveyInfo)||void 0===r||null===(r=r.surveyResponses)||void 0===r?void 0:r.userPersona,c=null===(o=t.planTypeAndSurveyInfo)||void 0===o||null===(o=o.surveyResponses)||void 0===o?void 0:o.userRole,d=null===(n=t.planTypeAndSurveyInfo)||void 0===n||null===(n=n.surveyResponses)||void 0===n?void 0:n.useCases,l=null===(a=t.planTypeAndSurveyInfo)||void 0===a||null===(a=a.surveyResponses)||void 0===a?void 0:a.companySize;T().createAndCommit({userAction:"contextualizedOnboardingStateActions.DO_NOT_USE_setUserPersonaRoleAndUseCases",environment:e,canUndo:!0,perform:e=>{R().mJ({userSettingsStore:i.userSettingsStore,data:{persona:s,team_role:c,use_cases:d,company_size:l,persona_version:{version:"V4",timestamp:(new Date).getTime()}},transaction:e})}})}async function ve(e,t,r){if((0,Q().Os)()&&e&&t){const o=await F().applyPerfmarkTrial(e.id,t,r);o.enableTrialInfoModal&&(0,K().fR)({openedFrom:"onboarding"}),o.enableTrialIneligibleToast&&z().A.setState({open:!0,isExistingUser:!1})}else if(e&&t&&"team"===t&&(0,G().i4)(r)){await(0,$().applyReversePlusTrial)(e.id,r,"onboarding")&&(0,V().UW)(r,"onboarding_reverse_trial_sidebar")}}function fe(e){const{currentUserRootStore:t}=H().default.state;t&&(s().A.set({userId:t.id,key:oe().l,value:void 0}),oe().A.reset(),W().default.setState({isOnboarding:!1,isLoading:!1,currentUserId:e.currentUser.id}),(0,p().$A)())}async function Se(e,t){var r;const{currentUserRootStore:o,currentUserSettingsStore:a}=H().default.state;if(!o)return;const i=oe().A.state;if(!i.onboardingData)throw new Error("onboardingData should not be undefined!");const s=(0,re().getSpaceIntentOverride)(i)??(null===(r=i.planTypeAndSurveyInfo)||void 0===r?void 0:r.planType),{spaceStore:c,spaceViewStore:d,newRedirectData:p,teamStoreId:m}=await me({spaceJoinOrCreate:t,onboardingState:i,onboardingData:i.onboardingData,currentUserRootStore:o,currentUserSettingsStore:a,planType:s,environment:e}),g=j().sg(i.onboardingData);h().m({message:F().messages.navigatingToWorkspace}),"create"===t&&(await ve(c,s,e),"ai_onboarding_phase_2"!==i.flowName&&q().default.checkGate({gateName:"enable_write_survey_data_optimization"})||(ge({environment:e,onboardingState:i,planSelection:s,spaceStore:c,spaceViewStore:d}),_e(e,i))),function(e){var t,r;let{environment:o,onboardingState:a,spaceStore:i,planType:s,teamStoreId:c}=e;const d=a.planTypeAndSurveyInfo,p=a.selectedWorkflowTemplateIds,m=!!(null!=d&&null!==(t=d.surveyResponses)&&void 0!==t&&t.useCases&&(null==d||null===(r=d.surveyResponses)||void 0===r||null===(r=r.useCases)||void 0===r?void 0:r.length)>0),g=!!(p&&p.length>0),_=m||g;if("default"===a.flowName&&"team"===s&&i&&(0,te().d)()){const e=c?X().h4.createChildStore(i,{id:c,table:l().yK,spaceId:i.id}):void 0;(0,ee().openSelectedTemplateOnboardingModalForInAppFlows)({parentStore:e??i,template:n().XK,environment:o,aiPrompt:(0,u().x9d)(""),origin:"new_user_onboarding",version:"new_user_template_onboarding"})}else if("team"===s&&c&&_){"control"!==(0,N().eE)(o)&&(J().setExpand({environment:o,isExpanded:!0,from:"contextualized_onboarding_overlay",saveDetailsSidebarPreference:!1}),Y().default.setState({type:"team_workflow_templates",step:"teamspaces",initialTeamStoreId:c}))}}({environment:e,onboardingState:i,spaceStore:c,planType:s,teamStoreId:m});const _=p??g;await ae({environment:e,onboardingData:i.onboardingData,spaceId:d.getSpaceId(),spaceViewId:d.id,spaceJoinOrCreate:t,redirectData:_,onboardingFlow:i.flowName,onboardingState:i,permissionLevel:j().S1(_)}),h().V()}function ye(e,t,r){if(!e.onboardingData)throw new Error("onboardingData not found!");se({onboardingState:e,environment:r,userStore:e.onboardingData.userStore,spaceJoinOrCreate:void 0,permissionLevel:"public"}),k().uK({environment:r,store:new(X().Bv)(r,{table:d().ev,id:t.pageId}),pageVisitSource:o().y8.Onboarding})}async function be(e,t){if(e.isFirstTimeOnboarding){const{accept:r}=await b().Gh({message:(0,ne.jsxs)("div",{style:{display:"block"},children:[(0,ne.jsx)("div",{style:{fontWeight:600},children:(0,ne.jsx)(m().sA,{defaultMessage:"Cancel new account setup?",id:"contextualizedOnboardingActions.closeOnboardingDialog.newUser.title"})}),(0,ne.jsx)("div",{children:(0,ne.jsx)(m().sA,{defaultMessage:"You'll be taken back to the Notion home page.",id:"contextualizedOnboardingActions.closeOnboardingDialog.newUser.subtitle"})})]}),acceptLabel:(0,ne.jsx)(m().sA,{defaultMessage:"Return to home page",id:"contextualizedOnboardingActions.closeOnboardingDialog.newUser.confirmCloseButton.label"}),cancelLabel:(0,ne.jsx)(m().sA,{defaultMessage:"Continue setup",id:"contextualizedOnboardingActions.closeOnboardingDialog.newUser.continueButton.label"})});if(!r)return;f().rG(t,(0,re().getContextualizedOnboardingAnalyticsData)({onboardingState:e,environment:t})),await L().actuallyLogoutAndDeleteMostLocalData({environment:t,logoutOrigin:c().d.ContextualizedOnboardingExit,userId:t.currentUser.id})}else{const{accept:o}=await b().Gh({message:(0,ne.jsx)(m().sA,{defaultMessage:"Cancel new workspace setup?",id:"onboardingActions.closeOnboardingDialog.existingUser.title"}),description:(0,ne.jsx)(m().sA,{defaultMessage:"You'll be taken back to your previous workspace.",id:"onboardingActions.closeOnboardingDialog.existingUser.subtitle"}),acceptLabel:(0,ne.jsx)(m().sA,{defaultMessage:"Back to previous workspace",id:"onboardingActions.closeOnboardingDialog.existingUser.confirmCloseButton.label"}),cancelLabel:(0,ne.jsx)(m().sA,{defaultMessage:"Continue setup",id:"onboardingActions.closeOnboardingDialog.existingUser.continueButton.label"})});if(!o)return;f().rG(t,(0,re().getContextualizedOnboardingAnalyticsData)({onboardingState:e,environment:t}));const{mainEditorCurrentBlockStore:n}=H().default.state,i=null==n?void 0:n.getSpaceId(),s=i&&(0,P().km)(i);if(s){const e=s.getSpaceStore();t.device.isMobileNative&&a().log({level:"info",from:"onboardingActions",type:"SpaceSwitchingDebug",data:{message:"onboardingActions.handleCloseOnboarding set space",spaceId:null==e?void 0:e.id}}),H().default.setState({...H().default.state,currentSpaceStore:e,currentSpaceViewStore:s})}const{url:c,userId:d}=I().v4(t);let l=t;if(d&&d!==t.currentUser.id&&(l=await U().T({environment:t,newCurrentUserId:d})),c){var r;J().close();const e=()=>{fe(l)};A().oo({environment:l,url:c}),null!==(r=l.mobileNative)&&void 0!==r&&r.supportsNativeHomeOnPhone()?C().navigateToHomeTab(l,e):e()}}}function we(e,t){var r;v().FX(e,{can_user_create_space:!1,is_new_user:!0,has_joinable_spaces:!1,onboarding_stage:(0,re().getStageName)({flowName:t.flowName,stageIndex:t.currentStageIndex,environment:e})});const o=null===(r=t.onboardingData)||void 0===r?void 0:r.userStore.getEmail();throw oe().A.setState({...t,isInvalidRedirect:!0}),new(i().Xg)(o?M().A.formatMessage(F().messages.errorWorkspaceCreationPreventedWithEmail,{userEmailAddress:o}):M().A.formatMessage(F().messages.errorWorkspaceCreationPrevented),{newUser:!0})}function Ie(e){const t=M().A.getIntl(),r=e.userStore.getFullName(t);oe().A.update((e=>({...e,spaceName:j().mi(r||"",t)})))}},33218:(e,t,r)=>{r.d(t,{UQ:()=>m,gL:()=>_});r(16280),r(898992),r(672577),r(803949);var o=()=>r(651124),n=()=>r(792071),a=()=>r(688728),i=()=>r(369186),s=()=>r(475140),c=()=>r(235692),d=()=>r(778781),l=()=>r(696706),p=()=>r(896628),u=()=>r(317909);function m(e){let{environment:t,transaction:r,layoutStore:o,position:c,updatedModule:d,sessionId:l}=e;const p=a().Zm[c.area],m=o.getRawModules();if("form_conditional_modules"===p){const e=null==m?void 0:m[p];if(!(null==e?void 0:e[c.moduleId]))throw new Error("Unable to find module being updated.");return void u().createAndCommitOrAppend({environment:t,transaction:r,canUndo:!0,perform(e){u().applyOperation({transaction:e,store:o,operation:n().N4X.updateModuleInArea({pointer:o.pointer,area:p,module:(0,i().Lv)(d)})})},userAction:"BuilderLayoutModules.updateModule"})}if(!m)throw new Error("Unable to find modules");const g=(0,s().LC)(m,(e=>e.id===c.moduleId));if(!g||g.area!==p)throw new Error("Unable to find module being updated.");u().createAndCommitOrAppend({environment:t,transaction:r,canUndo:!0,perform(e){u().applyOperation({transaction:e,store:o,operation:n().N4X.updateModuleInArea({pointer:o.pointer,module:(0,i().Lv)(d),..."views_main_tab_modules"===g.area?{area:g.area,viewId:g.viewId}:{area:g.area}})})},userAction:"BuilderLayoutModules.updateModule"})}function g(e){var t,r,o;let{collectionStore:n,layoutStore:a}=e;const i=new Map,s=n.getFormat(),c=[...null===(t=a.getModules())||void 0===t?void 0:t.page_main,...null===(r=a.getModules())||void 0===r?void 0:r.page_details],l=new Map;null===(o=s.property_visibility)||void 0===o||o.forEach((e=>{l.set(e.property,e)})),c.forEach((e=>{if(!(0,d()._Q)(e))return(0,d().gx)(e)?(i.set(e.propertyId,{property:e.propertyId}),void l.set(e.propertyId,{property:e.propertyId,visibility:"show"})):void 0;e.propertyIds.forEach((e=>{i.set(e,{property:e}),l.set(e,{property:e,visibility:"show"})}))}));const p=n.getNormalizedPropertyGroups();var u;p?p.forEach((e=>{var t;null===(t=e.propertyIds)||void 0===t||t.forEach((e=>{i.has(e)||i.set(e,{property:e})}))})):null===(u=s.collection_page_properties)||void 0===u||u.forEach((e=>{i.has(e.property)||i.set(e.property,e)}));return{propertiesFormat:Array.from(i.values()),propertyVisibility:Array.from(l.values())}}function _(e){let{environment:t,transaction:r,collectionStore:a,layoutStore:i}=e;const{propertiesFormat:s,propertyVisibility:m}=g({collectionStore:a,layoutStore:i});u().createAndCommitOrAppend({environment:t,transaction:r,canUndo:!0,perform(e){const t=i.getBlockChildrenPointers(),r=i.getFormat(),g=i.firstModuleOfType("viewsMain");g&&(0,d().y6)(g)&&t.find((e=>l().L3.isEqual(e,g.collection_view_block_pointer)))&&u().applyOperation({transaction:e,store:i,operation:n().N4X.removeBlockChild(i.pointer,g.collection_view_block_pointer.id)});const _=null==r?void 0:r.previousViewsMainCollectionViewBlockPointer,v=_&&t.find((e=>l().L3.isEqual(e,_)));v&&u().applyOperation({transaction:e,store:i,operation:n().N4X.removeBlockChild(i.pointer,v.id)}),u().applyOperation({transaction:e,store:i,operation:n().N4X.setModulesByAreas(i.pointer,(0,c().K5)())}),u().applyOperation({transaction:e,store:i,operation:n().N4X.deleteFormat(i.pointer)});const f=a.getFormat(),{page_section_visibility:S}=f;p().zA({stores:[a],update:{property_groups:void 0,collection_page_properties:s,property_visibility:m,...S?{page_section_visibility:o().Zi}:void 0},transaction:e})},userAction:"BuilderLayoutModules.resetLayoutToDefault"})}},47273:(e,t,r)=>{r.d(t,{DS:()=>n,Fe:()=>d,GB:()=>i,Gf:()=>p,V_:()=>l,j1:()=>c,j8:()=>a,yp:()=>u,yw:()=>s});var o=()=>r(762433);function n(e){return(0,o().Fq)({subscription:e})}function a(e){return(0,o().Ry)({subscription:e})}function i(e){let{subscriptionState:t,logFunction:r,spaceId:n}=e;return(0,o().yB)({billingData:{subscription:t},logFunction:r,spaceId:n})}function s(e){return(0,o().q8)({subscription:e})}function c(e){return(0,o().V9)({subscription:e})}function d(e){return(0,o().d$)({subscription:e})}function l(e){return(0,o().ji)({subscription:e})}function p(e){return(0,o().AI)({subscription:e})}function u(e,t){return(0,o().KH)({subscription:e},t)}},66460:(e,t,r)=>{r.d(t,{V_:()=>R,WR:()=>U,eu:()=>T,xE:()=>E});r(16280);var o=()=>r(244641),n=(r(296540),()=>r(857639)),a=()=>r(762433),i=()=>r(323063),s=()=>r(622963),c=()=>r(959013),d=()=>r(229833),l=()=>r(498212),p=()=>r(252105),u=()=>r(449506),m=()=>r(901389),g=()=>r(989423),_=()=>r(351360),v=()=>r(57605),f=()=>r(508496),S=()=>r(613240),y=()=>r(128265),b=()=>r(224701),w=()=>r(749356),I=()=>r(779795),h=()=>r(807778),D=()=>r(134217),k=()=>r(981046),A=()=>r(749240),C=()=>r(151168),O=r(474848);async function T(e){var t,r;const{environment:d,stripe:l,elements:u,trialData:g,trialDays:f,sessionId:S,customerName:y,businessName:w}=e;if(!A().subscriptionDataStoreInstance.state)return void n().log({level:"error",from:"trialUpsellActions",type:"StripeError",error:{miscDataString:"Unable to get subscription data."}});if(!u||!l)return void n().log({level:"error",from:"trialUpsellActions",type:"StripeError",error:{miscDataString:"Stripe elements not initialized when user tried to upgrade"}});const{error:h}=await u.submit();if(h)return void p().$X(d,{error:"could not submit form",error_type:"payment_method"});const T=await l.createPaymentMethod({elements:u});if(T.error)return void p().$X(d,{error:T.error.message,error_type:"payment_method"});if(!T.paymentMethod)return void p().$X(d,{error:"could not create token",error_type:"payment_method"});const U={type:"paymentMethodId",value:T.paymentMethod.id},R=_().default.state.currentSpaceStore;if(!R)return;const E=R.id,N=await I().p_({environment:d,spaceId:E}),M=await v().A.awaitData(d,{spaceId:E});if(!M)throw new Error("Billing data not loaded");const P=(0,a().lQ)(M),V=k().A.state.selectedCurrencyCode??"USD",L=(0,C().Zr)(),x=(0,s().Nw)({prices:N,quantity:1,domainsQuantity:0}),F={product:L,interval:"month",currency:V},j=(0,i().qq)(x,P,F),W=o().c9.now().plus({days:f});return await async function(e){const{environment:t,spaceStore:r,paymentData:o,desiredState:n,stripe:a,trialData:i,customerName:s,businessName:d,addressZip:l,addressCountry:u,sessionId:g}=e,_=await v().A.awaitData(t,{spaceId:r.id});try{const e=await b().nV({environment:t,sessionId:g,spaceStore:r,desiredState:n,paymentData:o,from:"onboarding",trialData:i,billingEmail:(0,D().cs)(_),customerName:s,businessName:d,addressZip:l,addressCountry:u}),p=e.paymentIntentClientSecret,v=e.paymentIntentStatus;if(p&&"requires_action"===v){const{error:e}=await a.handleNextAction({clientSecret:p});e&&(await b().M2({environment:t,spaceStore:r,from:"subscription_upgrade_onboarding_failed_payment"}),m().f1((0,O.jsx)(c().sA,{id:"subscription.upgrade.payment_failed",defaultMessage:"Your payment could not be processed. Please provide an alternate payment method or you will lose access to Notion."})))}return"success"}catch{return void p().AF(t)}}({environment:d,spaceStore:R,desiredState:{...j,trialEnd:W},paymentData:U,stripe:l,subscriptionTier:(0,C().Zr)(),trialData:g,customerName:y,businessName:w,addressZip:(null===(t=T.paymentMethod.billing_details.address)||void 0===t?void 0:t.postal_code)||"",addressCountry:(null===(r=T.paymentMethod.billing_details.address)||void 0===r?void 0:r.country)||"",sessionId:S})}const U=(0,r(496603).sg)(T,1e3,{leading:!0,trailing:!1});async function R(e){let{spaceId:t,environment:r}=e;if(await(0,w().L6)({environment:r,spaceId:t,offerCampaign:"reverse"})&&(0,h().s)(r)){await E(t,r,"going_multiplayer")&&await S().A.resetData(r,{spaceId:t})}}async function E(e,t,r){let o="reverse";try{const n=await(0,y().G)(t),a=Boolean(f().default.checkGate({gateName:"apply_reverse_trial_key"}));n&&(o="reverse_mm_ent");const i=`${e}_timed_trial`,s=a?(0,l().gB)(i):void 0,c=await u().callApi({eventName:"applyReverseTrial",environment:t,data:{spaceId:e,trialData:{id:o,from:r},idempotencyKey:s}});return"success"===c.type?((0,g().u4)({environment:t,event:{eventName:"trial_apply_attempt",eventProperties:{trial_id:o,success:"success"===c.data.status}}}),await b().Ow(t),"success"===c.data.status):(N(o,t,c.error),!1)}catch(n){return N(o,t,n),!1}}function N(e,t,r){(0,g().u4)({environment:t,event:{eventName:"trial_apply_attempt",eventProperties:{trial_id:e,success:!1}}}),n().log({level:"error",from:"trialUpsellActions",type:"applyReverseTrialError",error:(0,d().n6)(r)})}},155185:(e,t,r)=>{r.d(t,{I:()=>i,_:()=>a});const o={normalizedTitleWithIcon:!0,properties:!0,property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,views:!0,viewsMain:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,deleted_property:!1,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1},n={properties:!0,property:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,titleWithIcon:!0,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,views:!0,viewsMain:!0,collectionView:!0,collectionViewV2:!0};function a(e){return o[e.type]}function i(e){return n[e.type]}},162342:(e,t,r)=>{r.d(t,{W$:()=>s,fR:()=>a,iv:()=>i});var o=()=>r(228814),n=()=>r(846199);function a(e){n().A.setState({open:!0,...e})}function i(){n().A.setState({open:!1})}function s(e){o().A.setState({open:!0,...e})}},173019:(e,t,r)=>{r.d(t,{r:()=>n});r(296540);var o=r(474848);const n=(0,r(340498).wt)("pencil",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},228814:(e,t,r)=>{r.d(t,{A:()=>o});const o=r(757695).default.createValue({open:!1},{name:"TrialEndModalStore"})},235692:(e,t,r)=>{r.d(t,{K5:()=>p,_u:()=>d,oP:()=>u,wC:()=>c,xN:()=>l});r(898992),r(354520),r(581454);var o=()=>r(183558),n=()=>r(155185),a=()=>r(778781),i=()=>r(369186);const s={page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"properties",type:"properties"},{id:"discussions",type:"discussions"},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},c={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},d={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyLabels:"hide",propertyIds:[]},{id:"editor",type:"editor"},{id:"discussions",type:"discussions"}],page_details:[],form_layout_schema:[]};function l(e){return(0,i().jr)({modulesByArea:s,collectionSchema:null==e?void 0:e.collectionSchema,collectionFormat:null==e?void 0:e.collectionFormat})}function p(){return{page_layout_schema:(0,i().ke)(s.page_main).map((e=>{if(!(0,a().cn)(e))return(0,n().I)(e)?{...e,id:(0,o().Ay)()}:e})).filter((e=>void 0!==e)),page_info_layout_schema:(0,i().ke)(s.page_details).map((e=>{if(!(0,a().cn)(e))return(0,n().I)(e)?{...e,id:(0,o().Ay)()}:e})).filter((e=>void 0!==e)),form_layout_schema:void 0}}function u(e,t){const r=void 0===t?[{id:(0,o().Ay)(),type:"formQuestion",formQuestionId:e}]:[{id:(0,o().Ay)(),type:"formQuestion",formQuestionId:e},{id:(0,o().Ay)(),type:"formQuestion",formQuestionId:t}];return{page_layout_schema:void 0,page_info_layout_schema:void 0,form_layout_schema:[{id:(0,o().Ay)(),type:"cover"},{id:(0,o().Ay)(),type:"formTitle"},...r,{id:(0,o().Ay)(),type:"formSubmit"}]}}},299177:(e,t,r)=>{r.d(t,{A:()=>a});class o extends(()=>r(757695))().default{getInitialState(){return{}}}const n=new o;r(604341).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",n);const a=n},323063:(e,t,r)=>{r.d(t,{HO:()=>u,V5:()=>s,Vr:()=>c,gL:()=>d,qq:()=>p,vH:()=>l,z2:()=>m});r(16280),r(898992),r(354520),r(672577),r(581454),r(737550);var o=()=>r(720665),n=()=>r(762433),a=()=>r(47273),i=()=>r(979340);function s(e,t){return u(e.items,t.items).some((e=>{let[t,r]=e;return function(e,t){if(!e)return!1;if(!t)return!0;const r=n().xp(e),o=n().xp(t);if(!r||!o)return!1;return i().o3[r]>i().o3[o]}(t,r)}))}function c(e,t,r){let{trialEnd:o,items:n}=t;const a=n.map((t=>{const o=t.price.product,n=t.price.unitAmount.currencyCode,a=function(e,t){let{interval:r,product:o,currency:n}=t;const a=e.find((e=>e.product===o&&e.billingInterval===r&&e.unitAmount.currencyValue.currencyCode===n));return g(a,`Unable to find price with interval: ${r}, product: ${o}, currency: ${n}`)}(e,{interval:r,product:o,currency:n});return{...t,price:a}}));return{trialEnd:o,items:a}}function d(e,t){const r=e.items.filter((e=>n().IE(e)!==t));return{...e,items:r}}function l(e,t){const r=e.items.filter((e=>n().IE(e)!==n().IE(t)));return{...e,items:r.concat([t])}}function p(e,t,r){const{product:o,interval:a,currency:i}=r,s=function(e){if("personal_free"===e||"team_free"===e)return"free";return e}(o),c=t.items.filter((e=>n().IE(e)!==n().Mr(s))),d=function(e,t){let{interval:r,product:o,currency:n}=t;const a=e.find((e=>e.price.product===o&&e.price.billingInterval===r&&e.price.unitAmount.currencyValue.currencyCode===n));return g(a,`Unable to find price with interval: ${r}, product: ${o}, currency: ${n}`)}(e,{interval:a,product:s,currency:i});return{...t,items:c.concat([d])}}function u(e,t){return(0,o().Z4)(e,(e=>n().IE(e)),t,(e=>n().IE(e)))}function m(e){const{prices:t,billingData:r,product:o}=e,i=n().Ry(r),s=n().lQ(r),c=a().yw(s),d=n().q8(r),l=c??d;return t.find((e=>e.product===o&&e.billingInterval===l&&e.unitAmount.currencyValue.currencyCode===i))}function g(e,t){if(null==e)throw new Error(t);return e}},382055:(e,t,r)=>{r.d(t,{$3:()=>p,AQ:()=>d,Ae:()=>c,BL:()=>l,FL:()=>s,FX:()=>n,Vp:()=>i,XL:()=>a,nY:()=>u});var o=()=>r(989423);function n(e,t){o().vd(e,"workspace_creation_ability",t)}function a(e,t){o().vd(e,"workspace_creation_setting_updated",t)}function i(e,t){o().vd(e,"claimable_spaces_viewed",t)}function s(e,t){o().vd(e,"space_transfer_requested",t)}function c(e,t){o().vd(e,"space_transfer_completed",t)}function d(e,t){o().vd(e,"space_claim_upgrade_requested",t)}function l(e,t){o().vd(e,"space_claim_upgrade_completed",t)}function p(e,t){o().vd(e,"space_claim_deletion_started",t)}function u(e,t){o().vd(e,"space_claim_deletion_canceled",t)}},390527:(e,t,r)=>{r.r(t),r.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>R,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>h,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>I,MAX_RECURRENCE_INTERVAL:()=>f,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>S,RRULE_WEEKDAYS_MAP:()=>v,adjustedStartDateIfPossible:()=>k,areRecurrenceSchedulesEqual:()=>V,convertFromUnpersistedRecurrenceConfig:()=>P,convertToUnpersistedRecurrenceConfig:()=>E,getFormattedEndCondition:()=>U,getFormattedNextRecurrenceTime:()=>T,getNewEndTimestamp:()=>N,getNextDateUtc:()=>O,getRecurrenceAfter:()=>A,isRunningBetweenMidnightAnd3AM:()=>C,isValidRecurrenceInterval:()=>y,isValidRecurrenceNumberOfRuns:()=>b,rruleFromRecurrence:()=>w,templateAncestorsViolateRecurrenceNesting:()=>D});r(898992),r(354520),r(581454);var o=()=>r(244641);r(944114);function n(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];if(0===r.length)return e.map((e=>[e]));const a=[];for(const i of e)a.push(...n(r[0],...r.slice(1)).map((e=>[i,...e])));return a}var a=()=>r(496603),i=()=>r(534177),s=()=>r(720665),c=()=>r(597777),d=()=>r(869190),l=()=>r(416504),p=()=>r(402390);class u extends(()=>r(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>r(912720);const g=(0,r(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),_={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},v={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},f=99,S=999;function y(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=f}function b(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=S}function w(e){const{start_date:t,frequency:r,interval:o,weekdays:a,timezone:s,hour:d,minute:l}=e,p="week"===r&&a?a.map((e=>v[e])):void 0,m={};return(0,i().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,c().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,i().HB)(e.end_condition)),"month"===e.frequency&&(0,i().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=n(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,r]=e;return v[t].nth(r)})):(0,i().HB)(e.monthly_restriction)),new u({freq:_[r],dtstart:(0,c().eU)(t),interval:o,byweekday:p,tzid:s,byhour:d??0,byminute:l??0,bysecond:0,...m})}const I=1,h=1;function D(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const r=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),o=e.length,n=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,a=o>I,i=r.length>=h;return{violatesConstraint:a||i,templateNestingExceedsMaxDepth:a,ancestorHasDailyTemplate:i,nestedDepthOfAutomationAncestors:o,immediateAncestorRecurrenceType:n}}function k(e){var t;const{recurrence:r,afterDate:n}=e;if("number"===(null===(t=r.end_condition)||void 0===t?void 0:t.type)||r.start_date>=n)return r;let a=o().c9.fromMillis(r.start_date,{zone:"utc"});const i=o().c9.fromMillis(n,{zone:"utc"});switch(r.frequency){case"year":{const e=Math.floor(i.diff(a,"years").years/r.interval);a=a.plus({years:e*r.interval});break}case"month":{const e=Math.floor(i.diff(a,"months").months/r.interval);a=a.plus({months:e*r.interval});break}case"week":{const e=Math.floor(i.diff(a,"weeks").weeks/r.interval);a=a.plus({weeks:e*r.interval});break}case"day":{const e=Math.floor(i.diff(a,"days").days/r.interval);a=a.plus({days:e*r.interval});break}}return{...r,start_date:(0,c().DH)(a.toMillis())}}function A(e){const{recurrence:t,afterDate:r}=e;if((0,m().wt)(t)){const e=(0,c().l1)(r);return t.start_date>=e?new Date(t.start_date):void 0}{const e=w(k({recurrence:t,afterDate:r})).after((0,c().eU)(r));if(!e)return;return(0,c().h1)(e)}}function C(e){return 0===e.hour||1===e.hour||2===e.hour}function O(e){return w(e).after((0,c().eU)((0,c().Rz)()))||void 0}function T(e){const{recurrence:t,intl:r}=e,n=O(P(t));if(!n)return;const a=C(t),i=o().c9.fromJSDate(n).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,p().H)(r)).setZone(t.timezone),s=(0,d().Yq)({date:i,dateFormat:"relative",allowRelativeDates:!0,intl:r,shortenDate:!0});if(a)return r.formatMessage(g.dateBetweenMidnightAnd3AM,{date:s});{let e=i.toLocaleString(o().c9.TIME_SIMPLE);return t.timezone!==(0,l().P)()&&(e+=` ${i.toFormat("ZZZZ")}`),r.formatMessage(g.dateAtTime,{date:s,time:e})}}function U(e,t){return(0,i().O9)(e)?"number"===e.type?t.formatMessage(g.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,d().Yq)({date:o().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,i().HB)(e):t.formatMessage(g.noEndCondition)}const R=100;function E(e){return{...e,start_date:(0,c().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,c().l1)(e.end_condition.end_at)}:(0,i().HB)(e.end_condition):void 0}}function N(e,t,r){return e.plus(r-t)}function M(e,t){const r=o().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,c().Rz)(r.toJSDate())}}function P(e){return{...e,start_date:(0,c().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?M(e,e.end_condition):(0,i().HB)(e.end_condition):void 0}}function V(e,t){const r=a().fN(e,(e=>void 0!==e)),o=a().fN(t,(e=>void 0!==e));return a().n4(r,o)}},447934:(e,t,r)=>{r.d(t,{$L:()=>k,Fv:()=>N,HD:()=>M,V_:()=>U,bV:()=>R,jP:()=>T,nh:()=>O,w8:()=>E});r(16280),r(18107),r(967357),r(898992),r(354520);var o=()=>r(206267),n=()=>r(792071),a=()=>r(688728),i=()=>r(475140),s=()=>r(235692),c=()=>r(924329),d=()=>r(778781),l=()=>r(144081),p=()=>r(334261),u=()=>r(661920),m=()=>r(435009),g=()=>r(317909),_=()=>r(519839),v=()=>r(594794),f=()=>r(869562),S=()=>r(351360),y=()=>r(712505),b=()=>r(630116),w=()=>r(449476),I=()=>r(640868),h=()=>r(204521),D=()=>r(33218);function k(e){let{environment:t,transaction:r,collectionStore:o,userId:a,modules:i}=e;const c=(0,v().zP)({environment:t,spaceId:o.getSpaceId(),table:l().zx}),d=b().sk.createChildStore(o,c),{model:p,operations:[u]}=n().wfN.create({pointer:c,parent:o.pointer,createdByUserId:a,modules:i??(0,s().K5)()});g().applyOperation({transaction:r,store:d,operation:u});const m=n().BnK.setLayout(o.pointer,c);return g().applyOperation({transaction:r,store:o,operation:m}),{model:p,store:d}}function A(e){let t;return e?t=e:y().default.state.open&&y().default.state.targetStore?t=y().default.state.targetStore:S().default.state.mainEditorCurrentBlockStore&&(t=S().default.state.mainEditorCurrentBlockStore),t}function C(e){f().setUpdateExpand({environment:e,isExpanded:!1,from:"keyboard_default",saveDetailsSidebarPreference:!1}),u().VN({environment:e,from:"open_page_layout_editor",preventAnimation:!0})}function O(e){var t,r;let{environment:n,blockStore:a,collectionStore:i,collectionViewStore:s,from:c,initialSelectedModuleType:d}=e;const l=function(e){var t;let r=A(e);if(null!==(t=r)&&void 0!==t&&t.isCollectionView()){const e=(0,_().UH)(r);r=e?e.resultsInViewOrder(1).at(0):void 0}return r}(a),p=window.location.href;C(n);const u=o().JW();w().A.setState({isOpen:!0,mode:"layout-editor",collectionStore:i,pageStore:l,siteRootBlockStore:void 0,sessionId:u,initialSelectedModuleId:null==l||null===(t=l.getAssociatedCollectionStore())||void 0===t||null===(t=t.getLayoutStore())||void 0===t||null===(t=t.getModel())||void 0===t||null===(t=t.firstRawModuleOfType(d??"titleWithIcon"))||void 0===t?void 0:t.id,urlOnOpen:p}),(0,h().Ko)({environment:n,from:c,context:"layout",sessionId:u,collectionId:null==i?void 0:i.id,existingLayoutId:null==i||null===(r=i.getLayoutStore())||void 0===r?void 0:r.id,collectionViewId:null==s?void 0:s.id})}function T(e){let{environment:t,store:r,siteRootBlockStore:n,from:a}=e;const i=A(r);C(t);const s=o().JW();w().A.setState({isOpen:!0,mode:"site-settings-editor",pageStore:i,siteRootBlockStore:n,sessionId:s}),(0,h().Ko)({environment:t,context:"site",from:a,sessionId:s,collectionId:void 0,existingLayoutId:void 0})}function U(e){let{slideBlockStore:t}=e;const r=t.getNavigableBlockStore(),n=o().JW();w().A.setState({isOpen:!0,mode:"presentation",pageStore:r,currentSlideStore:t,sessionId:n}),window.document.documentElement.requestFullscreen()}function R(e){let{slideBlockStore:t}=e;w().A.setState({isOpen:!1}),window.document.fullscreenElement&&window.document.exitFullscreen()}function E(e){w().A.getState().isOpen&&N(e)}function N(e){let{environment:t}=e;const r=w().A.getState();if(!r.isOpen)throw new Error("Cannot close page layout editor. Page layout editor is not open.");"layout-editor"===r.mode&&r.urlOnOpen&&window.location.href!==r.urlOnOpen&&m().aX(t),w().A.setState({isOpen:!1})}function M(e){var t;let{environment:r,transaction:o,property:n,layoutStore:s}=e;const l=w().A.getSessionId(),u=null===(t=s.getModel())||void 0===t?void 0:t.getRawModules(),m=s.getCollectionModel();if(!u||!m)return;const g=b().md.createChildStore(s,m.pointer),_=(0,i().yn)(u,(e=>"titleWithIcon"===e.type));if(_&&(0,d().Mj)(_.module)){var v;const{module:e,position:t}=_,i={...e,type:"titleWithIcon",propertyIds:null===(v=e.propertyIds)||void 0===v?void 0:v.filter((e=>e!==n))};(0,D().UQ)({environment:r,sessionId:l,transaction:o,layoutStore:s,position:{area:(0,a().Fw)(t.area),moduleId:e.id},updatedModule:(0,c().X)(i)})}const f=(0,i().LP)(u,(e=>"property"===e.type&&e.propertyId===n));for(const{module:i,position:c}of f){const e=i.id,t=(0,a().Fw)(c.area);(0,I().U)({environment:r,sessionId:l,transaction:o,layoutStore:s,position:{area:t,moduleId:e}})}const S=m.getFormat().collection_page_sections;if(S){const e=S.filter((e=>e.section!==n));p().LK({store:g,pageSectionFormats:e,transaction:o,environment:r})}}},616385:(e,t,r)=>{r.r(t),r.d(t,{applyPerfmarkTrial:()=>Ue,completeDesktopOnboardingForTeamPlan:()=>Re,createSpaceWithTemplates:()=>De,getInitialState:()=>de,getRedirectDataUpdate:()=>Ce,getWorkflowTemplateForUseCase:()=>Ne,getWorkflowTemplatesForUseCases:()=>Ee,joinTeamSpaceWithTemplates:()=>ke,messages:()=>ce,navigateWithRedirectData:()=>we,redirectAfterOnboardingComplete:()=>be,timedTrialUpsellNextState:()=>fe,updateAndGetNextState:()=>le,updateAndGetPreviousState:()=>pe});r(16280),r(898992),r(354520),r(581454);var o=()=>r(584262),n=()=>r(660237),a=()=>r(857639),i=()=>r(416845),s=()=>r(206267),c=()=>r(386164),d=()=>r(388821),l=()=>r(179034),p=()=>r(519831),u=()=>r(96689),m=()=>r(84520),g=()=>r(677338),_=()=>r(994310),v=()=>r(496603),f=()=>r(229833),S=()=>r(534177),y=()=>r(337240),b=()=>r(382055),w=()=>r(796756),I=()=>r(148024),h=()=>r(449506),D=()=>r(934839),k=()=>r(705540),A=()=>r(496414),C=()=>r(816074),O=()=>r(666144),T=()=>r(857783),U=()=>r(435009),R=()=>r(426116),E=()=>r(185544),N=()=>r(317909),M=()=>r(755199),P=()=>r(617254),V=()=>r(519839),L=()=>r(26388),x=()=>r(235921),F=()=>r(989423),j=()=>r(186445),W=()=>r(47373),z=()=>r(680074),B=()=>r(972435),J=()=>r(437622),H=()=>r(465425),q=()=>r(406792),X=()=>r(351360),G=()=>r(508496),$=()=>r(150193),K=()=>r(630116),Q=()=>r(224701),Y=()=>r(807778),Z=()=>r(655765),ee=()=>r(162342),te=()=>r(151168),re=()=>r(846955),oe=()=>r(144114),ne=()=>r(607859),ae=()=>r(12145),ie=()=>r(770769),se=()=>r(1130);const ce=(0,r(959013).YK)({joiningWorkspace:{id:"onboardingStateActions.joiningWorkspace.loadingMessage",defaultMessage:"Joining team…"},creatingWorkspace:{id:"onboardingStateActions.creatingWorkspace.loadingMessage",defaultMessage:"Getting ready…"},creatingWorkflowTemplate:{id:"onboardingStateActions.creatingWorkflowTemplate.loadingMessage",defaultMessage:"Getting ready…"},navigatingToWorkspace:{id:"onboardingStateActions.navigatingToWorkspace.loadingMessage",defaultMessage:"Taking you to your workspace…"},errorNoAction:{id:"onboardingStateActions.errorMessage.noActionToPerform",defaultMessage:"No action to perform for {onboardingRedirectType}"},errorWorkspaceCreationPreventedWithEmail:{id:"onboardingStateActions.errorMessage.domainClaim.workspaceCreationPreventedWithEmail",defaultMessage:"You are signed in to {userEmailAddress} and do not have access to any workspaces. Please reach out to your IT department for access to Notion."},errorWorkspaceCreationPrevented:{id:"onboardingStateActions.errorMessage.domainClaim.workspaceCreationPrevented",defaultMessage:"You do not have access to any workspaces. Please reach out to your IT department for access to Notion."},errorWorkspaceDoesNotExist:{id:"onboardingStateActions.errorMessage.spaceDoesNotExist",defaultMessage:"Workspace does not exist."},errorWorkspaceDidNotLoad:{id:"onboardingStateActions.errorMessage.spaceDidNotLoad",defaultMessage:"Failed to load workspace."}});async function de(e){let{environment:t,startOnboardingArgs:r,onboardingData:o,redirectData:a}=e;const c=t.currentUser.id;if(void 0===c)throw new Error("Environment currentUserId not defined.");const{type:d,redirectUrl:l,disableRedirectUrl:p}=r,u=t.device.isMobile,{currentUserRootStore:m}=X().default.state,g=0===(m&&m.isReady()?v().sb(m.getSpaceViewStores().filter((e=>e.getJoined())).map((e=>e.getSpaceId()))).length:0),_=(0,te().Os)()?"perfmark":void 0,f={onboardingData:o,redirectData:a,isOnboarding:!0,isLoading:!1,flowId:s().JW(),currentUserId:c,isNewUser:g,stageNumber:0,spaceId:void 0,historicalStages:void 0,onboardingExperiments:{},stageStats:{startedTimeStampMs:Date.now()},trialId:_,performanceMarketingTerm:o.performanceMarketingTerm};if("new-user"===d){const e=o.joinableSpaceData.results.length>0;let r;r=u?l&&!p?"mobile_redirect":e?"mobile_joinable_spaces":"mobile_cold_start":l&&!p?"desktop_redirect":e?"desktop_joinable_spaces":"desktop_cold_start";const a={...f,flow:r,stage:"profile",uploadingProfilePhoto:!1,profilePhoto:null,prefilled:!1,passwordErrorData:null,emailOptIn:(0,n().eh)(o.countryCode).defaultOptIn},i=oe().TV({userStore:o.userStore});return i?ue({...a,...i},t):a}if("create-or-join"===d){const e=oe().md({onboardingData:o,isNewUserFlow:!1}),r=u?"mobile_join_or_create_space":"desktop_join_or_create_space";if(e.length>0)return{...f,flow:r,stage:"workspace_choose",joinableSpaces:e,prefilled:!1};if(o.canUserCreateSpace)return{...Te(f),...f,flow:r,stage:"workspace_plan_choose",prefilled:!1,spaceJoinOrCreate:"create",useCases:[],collaborativeIntent:void 0};{b().FX(t,{can_user_create_space:!1,is_new_user:!1,has_joinable_spaces:!1,onboarding_stage:void 0});const e=o.userStore.getEmail();throw ne().default.setState({...f,flow:r,stage:"error"}),new(i().Xg)(e?B().A.formatMessage(ce.errorWorkspaceCreationPreventedWithEmail,{userEmailAddress:e}):B().A.formatMessage(ce.errorWorkspaceCreationPrevented),{newUser:!1})}}if("mobile-onboarding"===d)return{...f,flow:"mobile_existing_user",stage:"mobile_editor",spaceJoinOrCreate:"join"};S().HB(d)}async function le(e,t){if(!e.isOnboarding)return{isOnboarding:!1,isLoading:!1,currentUserId:t.currentUser.id};const r={...e,stageNumber:e.stageNumber+1};switch(oe().zX(t),r.stage){case"profile":return ue(r,t);case"workspace_plan_choose":return ge(r,t);case"workspace_collaborative_intent_choose":return function(e,t){return ge({...e,stage:"workspace_plan_choose"},t,!0)}(r,t);case"workspace_choose":return async function(e,t){const{redirectData:r}=e;if("guest_redirect"===r.type)return Oe(e,r,"guest",t);if("create"===e.spaceJoinOrCreate)return{...Te(e),planSelection:void 0,...e,stage:"workspace_plan_choose",useCases:[],collaborativeIntent:void 0};{const r=q().default.DO_NOT_USE_markLegacy("onboarding.join_space"),{spaceStore:o,spaceViewStore:n,...a}=await he(e,t);oe().BH({environment:t,state:{onboardingExperiments:e.onboardingExperiments,userPersona:"userPersona"in e?e.userPersona:void 0,userRole:"userRole"in e?e.userRole:void 0,companySize:void 0,useCases:void 0,planSelection:void 0,categories:void 0,userEducationRole:void 0,userEducationLevel:void 0,notionUseFrequency:void 0,collaborativeIntent:void 0},spaceStore:void 0,spaceViewStore:n});const{spaceId:i,spaceViewId:s,redirectData:c}=a,{flow:d}=e;switch(d){case"desktop_cold_start":case"desktop_join_or_create_space":case"desktop_redirect":case"desktop_joinable_spaces":return await be({environment:t,onboardingData:e.onboardingData,spaceId:i,spaceViewId:s,spaceJoinOrCreate:e.spaceJoinOrCreate,redirectData:c,onboardingFlow:d,onboardingState:e}),q().default.DO_NOT_USE_measureLegacy(r,{environment:t,data:{flow:e.flow,onboarding_complete_data:{stage:e.stage,redirect_data:c,is_new_user:oe().ze(e),permission_level:"guest_redirect"===c.type?"guest":"member"}}}),{isOnboarding:!1,isLoading:!1,currentUserId:t.currentUser.id};case"mobile_join_or_create_space":{const r={...e,...a};return Se(e.onboardingData,r,t)}case"mobile_cold_start":case"mobile_joinable_spaces":case"mobile_redirect":{const o={...e,...a};return q().default.DO_NOT_USE_measureLegacy(r,{environment:t,data:{flow:e.flow,onboarding_complete_data:{stage:e.stage,redirect_data:c,is_new_user:oe().ze(e),permission_level:"guest_redirect"===c.type?"guest":"member"}}}),ye({onboardingState:o,environment:t,flow:d})}default:return S().HB(d)}}}(r,t);case"persona_survey":return me(r,t);case"workspace_create":return _e(r,t);case"invite":return ve(r,t);case"timed_trial_upsell":return fe(r,t);case"template_optout":return function(e,t){return{isOnboarding:!1,isLoading:!1,currentUserId:t.currentUser.id}}(0,t);case"workspace_setup":return async function(e,t){const{flow:r}=e;switch(r){case"desktop_cold_start":case"desktop_join_or_create_space":case"desktop_joinable_spaces":case"desktop_redirect":return await be({environment:t,onboardingData:e.onboardingData,spaceId:e.spaceId,spaceViewId:e.spaceViewId,spaceJoinOrCreate:e.spaceJoinOrCreate,redirectData:e.redirectData,onboardingFlow:e.flow,onboardingState:e}),{isOnboarding:!1,isLoading:!1,currentUserId:t.currentUser.id};case"mobile_join_or_create_space":return Se(e.onboardingData,e,t);case"mobile_cold_start":case"mobile_joinable_spaces":case"mobile_redirect":return U().kc(t),ye({onboardingState:e,environment:t,flow:r});default:return S().HB(r)}}(r,t);case"mobile_editor":return function(e){return{...e,stage:"mobile_sidebar"}}(r);case"mobile_sidebar":return function(e,t){if(oe().FP(t))return{...e,stage:"mobile_app_download"};return{...e,stage:"mobile_desktop"}}(r,t);case"mobile_desktop":return function(e,t){return{...e,stage:"mobile_web_clipper"}}(r);case"mobile_web_clipper":return function(e,t){if("mobile_existing_user"===e.flow)return Ae(e,t);return Se(e.onboardingData,e,t)}(r,t);case"mobile_app_download":return async function(e,t){if("mobile_existing_user"===e.flow)return Ae(e,t);return Se(e.onboardingData,e,t)}(r,t);case"error":return function(e){return{isOnboarding:!1,isLoading:!1,currentUserId:e.currentUser.id}}(t);default:S().HB(r)}}function pe(e,t){if(!e.isOnboarding)throw new Error("Trying to go back on step which is not onboarding.");const r={...e,stageNumber:e.stageNumber-1};if(!ne().onboardingStagesWithBack.includes(e.stage))throw new Error(`Trying to go back in onboarding on step where back is not supported. Stage: ${e.stage}`);switch(r.stage){case"workspace_plan_choose":return function(e){const t=oe().ze(e),r=oe().md({onboardingData:e.onboardingData,isNewUserFlow:t});if(r.length>0)return{...e,joinableSpaces:r,stage:"workspace_choose"};if(t)throw new Error("Trying to go back to profile step from plan choose for new user!");throw new Error("Trying to go back on plan choose step for existing user with no joinable spaces!")}(r);case"workspace_collaborative_intent_choose":return function(e){return{...e,stage:"workspace_plan_choose",collaborativeIntent:void 0}}(r);case"persona_survey":return function(e){return{...e,stage:"workspace_collaborative_intent_choose"}}(r);case"workspace_create":return function(e){const t=oe().ze(e);if("school"===e.planSelection||"personal"===e.planSelection)return{...e,skip:!1,prefilled:e.prefilled,previousStage:"workspace_create",userPersona:e.userPersona,spaceName:e.spaceName,stage:"persona_survey"};return t&&"team"===e.planSelection?{...e,prefilled:e.prefilled,previousStage:"workspace_create",skip:!1,userPersona:e.userPersona,spaceName:e.spaceName,stage:"persona_survey"}:{...e,stage:"workspace_collaborative_intent_choose"}}(r);case"timed_trial_upsell":return function(e){const t=oe().qg(e.onboardingData);return{...e,flow:e.flow,stage:"invite",isChecked:!0,emails:[],spaceSetupCompleted:!0,joinableUserEmailDomain:t,spaceJoinOrCreate:"create",inviteLinkUrl:e.inviteLinkUrl,shouldTriggerPostInviteAnimations:!1,isBulkInvite:!1,planSelection:e.planSelection,collaborativeIntent:e.collaborativeIntent}}(r);case"mobile_editor":return function(e){const t=oe().qg(e.onboardingData);return{...e,flow:e.flow,stage:"invite",isChecked:!0,emails:[],spaceSetupCompleted:!0,joinableUserEmailDomain:t,spaceJoinOrCreate:"create",shouldTriggerPostInviteAnimations:!1,isBulkInvite:!1,teamStoreId:e.teamStoreId,inviteLinkUrl:e.inviteLinkUrl,spaceViewId:e.spaceViewId,planSelection:e.planSelection,collaborativeIntent:e.collaborativeIntent}}(r);case"mobile_sidebar":return function(e){return{...e,stage:"mobile_editor"}}(r);case"mobile_desktop":case"mobile_app_download":return function(e){return{...e,stage:"mobile_sidebar"}}(r);case"mobile_web_clipper":return function(e,t){return{...e,stage:"mobile_desktop"}}(r);case"workspace_choose":case"invite":case"template_optout":case"workspace_setup":case"profile":case"error":return null;default:S().HB(r)}}async function ue(e,t){await oe().cp(e,t);const{password:r,...n}=e,a=_().A.get(oe().Zz),{onboardingData:s,redirectData:c}=n,d=oe().md({onboardingData:s,isNewUserFlow:oe().up(n)});if("guest_redirect"===c.type)return Oe(n,c,"guest",t);if("redirect_page"===c.type||"redirect_space"===c.type)return Oe(n,c,"member",t);if("public_access_page_redirect"===c.type)return function(e,t,r){return Ie({environment:r,permissionLevel:"public",onboardingState:e}),T().uK({environment:r,store:new(K().Bv)(r,{table:l().ev,id:t.pageId}),pageVisitSource:o().y8.Onboarding}),{isOnboarding:!1,isLoading:!1,currentUserId:r.currentUser.id}}(n,c,t);if(a){const e=await h().callApi({eventName:"getPublicSpaceForInvite",environment:t,data:{type:"invite-link",inviteLinkCode:a}});if("success"===e.type){const{data:r}=e,{result:o}=r;if(o)return Oe(n,{type:"team_invite_redirect",spaceId:o.id,inviteCode:a},"member",t);throw new Error(B().A.formatMessage(ce.errorWorkspaceDoesNotExist))}throw new Error(B().A.formatMessage(ce.errorWorkspaceDidNotLoad))}if(d.length>0)return{...n,joinableSpaces:d,stage:"workspace_choose"};if(s.canUserCreateSpace){if(oe().OU({state:n})){return{...n,spaceJoinOrCreate:"create",userPersona:void 0,useCases:[],stage:"workspace_plan_choose",planSelection:void 0,collaborativeIntent:void 0}}return{spaceName:void 0,...n,spaceJoinOrCreate:"create",userPersona:void 0,userRole:void 0,companySize:void 0,useCases:[],categories:[],stage:"persona_survey",skip:!1,previousStage:"profile",planSelection:void 0,collaborativeIntent:void 0}}{b().FX(t,{can_user_create_space:!1,is_new_user:!0,has_joinable_spaces:!1,onboarding_stage:n.stage});const r=s.userStore.getEmail();throw ne().default.setState({...e,stage:"error"}),new(i().Xg)(r?B().A.formatMessage(ce.errorWorkspaceCreationPreventedWithEmail,{userEmailAddress:r}):B().A.formatMessage(ce.errorWorkspaceCreationPrevented),{newUser:!0})}}function me(e,t){!e.skip&&e.isNewUser&&function(e,t){const{onboardingData:r,userPersona:o,userRole:n,useCases:a,companySize:i}=t;N().createAndCommit({userAction:"onboardingStateActions.setUserPersonaRoleAndUseCases",environment:e,canUndo:!0,perform:e=>{M().mJ({userSettingsStore:r.userSettingsStore,data:{persona:o,team_role:n,use_cases:a,company_size:i,persona_version:{version:"V4",timestamp:(new Date).getTime()}},transaction:e})}})}(t,e);const{onboardingData:r}=e,o=B().A.getIntl(),n={spaceIcon:null,uploadingSpaceIcon:!1,...Te(e),...e,spaceJoinOrCreate:"create",userPersona:e.userPersona,stage:"workspace_create"},a=r.userStore.getFullName(o);if("planSelection"in n&&["personal","school"].includes(n.planSelection||"")&&a){const e=r.userStore.getProfilePhoto();return _e({...n,userPersona:n.userPersona||"unfilled",spaceName:oe().JR(a,o),spaceIcon:e||null},t)}return n}function ge(e,t,r){const o="school"===e.planSelection||"personal"===e.planSelection,n=oe().OU({state:e}),a={userRole:void 0,companySize:void 0,spaceName:void 0,categories:[],...e,skip:!1,stage:"persona_survey",previousStage:"workspace_plan_choose"};if(!r)return{...a,collaborativeIntent:void 0,stage:"workspace_collaborative_intent_choose"};if(n||o)return"team"===e.planSelection||o?a:me({...e,skip:!0,userPersona:void 0,userRole:void 0,companySize:void 0,useCases:[],categories:[],previousStage:"workspace_plan_choose",spaceName:void 0,stage:"persona_survey",collaborativeIntent:void 0},t);{if("team"===e.planSelection)return a;const r={userRole:void 0,companySize:void 0,...e,spaceJoinOrCreate:"create",useCases:[],categories:[],stage:"workspace_create",spaceIcon:null,uploadingSpaceIcon:!1},{onboardingData:o}=e,n=B().A.getIntl(),i=o.userStore.getFullName(n),s=o.userStore.getProfilePhoto();if("planSelection"in e&&["personal","school"].includes(e.planSelection||"")&&i){return _e({...r,userPersona:e.userPersona||"unfilled",spaceName:oe().JR(i,n),spaceIcon:s||null,useCases:e.useCases},t)}return r}}async function _e(e,t){const{flow:r,spaceJoinOrCreate:o,onboardingData:n}=e,a=q().default.DO_NOT_USE_markLegacy("onboarding.create_space"),{spaceStore:i,spaceViewStore:s,...c}=await he(e,t);if(oe().BH({environment:t,state:{...e,userEducationRole:void 0,userEducationLevel:void 0,notionUseFrequency:void 0},spaceStore:i,spaceViewStore:s}),"team"===e.planSelection){const r=oe().qg(e.onboardingData),{spaceId:o,inviteLinkCode:n}=c;if(q().default.DO_NOT_USE_measureLegacy(a,{environment:t,data:{flow:e.flow,onboarding_complete_data:{stage:e.stage,redirect_data:e.redirectData,is_new_user:oe().ze(e),permission_level:"guest_redirect"===e.redirectData.type?"guest":"member",plan:e.planSelection}}}),e.collaborativeIntent&&"multiplayer"!==e.collaborativeIntent){return ve({...e,isChecked:!1,stage:"invite",isBulkInvite:!1,spaceSetupCompleted:!0,shouldTriggerPostInviteAnimations:!1,inviteLinkUrl:void 0,emails:[],spaceViewId:s.id,joinableUserEmailDomain:void 0,teamStoreId:void 0},t)}return{...e,...c,isChecked:!0,spaceId:o,emails:[],joinableUserEmailDomain:r,inviteLinkUrl:n&&(0,J().X$)(t,o,n),stage:"invite",isBulkInvite:!1,shouldTriggerPostInviteAnimations:!1,spaceSetupCompleted:!0}}switch(r){case"desktop_cold_start":case"desktop_join_or_create_space":case"desktop_joinable_spaces":case"desktop_redirect":const{spaceId:i,spaceViewId:d,redirectData:l}=c;if(e.collaborativeIntent&&"multiplayer"===e.collaborativeIntent){return{...e,isChecked:!1,stage:"invite",isBulkInvite:!1,spaceSetupCompleted:!0,shouldTriggerPostInviteAnimations:!1,inviteLinkUrl:void 0,emails:[],spaceViewId:s.id,joinableUserEmailDomain:void 0,teamStoreId:void 0}}return A().m({message:ce.navigatingToWorkspace}),await be({environment:t,onboardingData:n,spaceId:i,spaceViewId:d,spaceJoinOrCreate:o,redirectData:l,onboardingFlow:r,onboardingState:e}),A().V(),q().default.DO_NOT_USE_measureLegacy(a,{environment:t,data:{flow:e.flow,onboarding_complete_data:{stage:e.stage,redirect_data:e.redirectData,is_new_user:oe().ze(e),permission_level:"guest_redirect"===e.redirectData.type?"guest":"member",plan:e.planSelection}}}),{...e,spaceId:i,spaceViewId:d,flow:r,stage:"template_optout"};case"mobile_join_or_create_space":return Se(e.onboardingData,{...e,...c},t,a);case"mobile_cold_start":case"mobile_joinable_spaces":case"mobile_redirect":return ye({onboardingState:{...e,...c},environment:t,flow:r});default:return S().HB(r)}}async function ve(e,t){const r=q().default.DO_NOT_USE_markLegacy("invite_next_state");await oe().TM(e,t);const{flow:o,isNewUser:n,trialId:a}=e;switch(o){case"desktop_cold_start":case"desktop_join_or_create_space":case"desktop_joinable_spaces":if("team"!==e.planSelection)return await be({environment:t,onboardingData:e.onboardingData,spaceId:e.spaceId,spaceViewId:e.spaceViewId,spaceJoinOrCreate:e.spaceJoinOrCreate,redirectData:e.redirectData,onboardingFlow:e.flow,onboardingState:e}),q().default.DO_NOT_USE_measureLegacy(r,{environment:t,data:{numInvitesSent:e.emails.length}}),{isOnboarding:!1,isLoading:!1,currentUserId:t.currentUser.id};return n&&"perfmark"===a||(0,Y().i4)(t)?(await be({environment:t,onboardingData:e.onboardingData,spaceId:e.spaceId,spaceViewId:e.spaceViewId,spaceJoinOrCreate:e.spaceJoinOrCreate,redirectData:e.redirectData,onboardingFlow:e.flow,onboardingState:e}),q().default.DO_NOT_USE_measureLegacy(r,{environment:t,data:{numInvitesSent:e.emails.length}}),Re(e,t)):{...e,stage:"timed_trial_upsell"};case"desktop_redirect":return await be({environment:t,onboardingData:e.onboardingData,spaceId:e.spaceId,spaceViewId:e.spaceViewId,spaceJoinOrCreate:e.spaceJoinOrCreate,redirectData:e.redirectData,onboardingFlow:e.flow,onboardingState:e}),q().default.DO_NOT_USE_measureLegacy(r,{environment:t,data:{numInvitesSent:e.emails.length}}),"team"===e.planSelection?Re(e,t):{isOnboarding:!1,isLoading:!1,currentUserId:t.currentUser.id};case"mobile_join_or_create_space":const i=Se(e.onboardingData,e,t);return q().default.DO_NOT_USE_measureLegacy(r,{environment:t,data:{mobileOnboardingState:o}}),i;case"mobile_cold_start":case"mobile_joinable_spaces":case"mobile_redirect":const s=ye({onboardingState:e,environment:t,flow:o});return q().default.DO_NOT_USE_measureLegacy(r,{environment:t,data:{mobileOnboardingState:o}}),s;default:return S().HB(o)}}async function fe(e,t){return await be({environment:t,onboardingData:e.onboardingData,spaceId:e.spaceId,spaceViewId:e.spaceViewId,spaceJoinOrCreate:e.spaceJoinOrCreate,redirectData:e.redirectData,onboardingFlow:e.flow,onboardingState:e}),Re(e,t)}async function Se(e,t,r,o){return await be({environment:r,onboardingData:e,spaceId:t.spaceId,spaceViewId:t.spaceViewId,spaceJoinOrCreate:t.spaceJoinOrCreate,redirectData:t.redirectData,onboardingFlow:t.flow,onboardingState:t}),o&&q().default.DO_NOT_USE_measureLegacy(o,{environment:r,data:{flow:t.flow,onboarding_complete_data:{stage:t.stage,redirect_data:t.redirectData,is_new_user:oe().ze(t),permission_level:"guest_redirect"===t.redirectData.type?"guest":"member"}}}),{isOnboarding:!1,isLoading:!1,currentUserId:r.currentUser.id}}function ye(e){const{onboardingState:t,environment:r,flow:o}=e;if("oauth_authorization_redirect"===t.redirectData.type){const{responseType:e,integrationId:o,redirectUri:n,state:a,owner:i,userId:s,spaceId:c}=t.redirectData;C().t({environment:r,responseType:e,integrationId:o,redirectUri:n,state:a,owner:i,userId:s,spaceId:c})}return{...t,flow:o,stage:"mobile_editor"}}async function be(e){const{environment:t,redirectData:r,spaceViewId:o,spaceId:n,onboardingData:a,spaceJoinOrCreate:i,onboardingFlow:s,onboardingState:c}=e;await we({environment:t,redirectData:r,spaceViewId:o,spaceId:n,onboardingData:a,spaceJoinOrCreate:i,onboardingFlow:s}),Ie({environment:t,spaceJoinOrCreate:i,permissionLevel:"member",onboardingState:c})}async function we(e){const{environment:t,redirectData:r,spaceViewId:n,spaceId:a,onboardingData:i,spaceJoinOrCreate:s,onboardingFlow:u}=e;D().zA({bannerStore:$().A,id:"SubscriptionEditingBlocker"}),t.device.isMobile&&N().createAndCommit({userAction:"onboardingStateActions.navigateWithRedirectData",environment:t,canUndo:!0,perform:e=>{se().PF({userStore:i.userStore,transaction:e})}});const _=n?K().vH.createChildStore(i.userRootStore,{table:m().mu,id:n}):void 0,v=g().dw();if("fork_page"===r.type&&_)await R().tR({environment:t,spaceViewStore:_,redirectPageId:r.pageId,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:o().y8.Onboarding,navigationType:"joiningOrCreatingSpace"});else if(v&&!i.onboardingCompleted)g().dC(),U().oo({environment:t,url:v,redirect:!0});else if("home"===r.type&&null!=_&&_.isDefined()){const e=await h().callApi({eventName:"getUserHomePages",environment:t,data:{spaceViewId:_.id,spaceId:_.getSpaceId()},headers:(0,c().WS)({cellId:void 0,recordId:_.id,spaceId:_.getSpaceId()})}),{recordMap:r,homePageId:n}="success"===e.type?{recordMap:d().RecordMapWithRole.create(e.data.recordMap),homePageId:e.data.homePageId}:{recordMap:void 0,homePageId:void 0},a=_.pointer;r&&O().PC({environment:t,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,pointer:a,model:r.getModel(a),role:r.getRole(a)||"none",updatePaths:[["settings","personal_home"]],debugSource:"onboardingStateActions.navigateWithRedirectData",force:!0}),await R().tR({environment:t,redirectPageId:n,spaceViewStore:_,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:o().y8.Onboarding,navigationType:"joiningOrCreatingSpace"})}else if("redirect_page"===r.type&&r.spaceId===a&&_)await O().sy({environment:t,pointer:{table:l().ev,id:r.pageId},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,userId:t.currentUser.id}),await R().tR({environment:t,spaceViewStore:_,redirectPageId:r.pageId,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:o().y8.Onboarding,navigationType:"joiningOrCreatingSpace"});else if("redirect_space"===r.type&&r.spaceId===a&&_)await R().tR({environment:t,spaceViewStore:_,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:o().y8.Onboarding,navigationType:"joiningOrCreatingSpace"});else if("mobile_native_home"===r.type&&_)await R().tR({environment:t,spaceViewStore:_,redirectPageId:void 0,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:o().y8.Onboarding,navigationType:"joiningOrCreatingSpace"});else if("getting_started_page"!==r.type&&"redirect_space"!==r.type&&"performance_marketing_template"!==r.type||!_)if("oauth_authorization_redirect"===r.type&&"mobile_cold_start"!==u&&"mobile_joinable_spaces"!==u&&"mobile_redirect"!==u){const{responseType:e,integrationId:o,redirectUri:n,state:a,owner:i,userId:s,spaceId:c}=r;C().t({environment:t,responseType:e,integrationId:o,redirectUri:n,state:a,owner:i,userId:s,spaceId:c})}else if(_)await R().tR({environment:t,spaceViewStore:_,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:o().y8.Onboarding,navigationType:"joiningOrCreatingSpace"});else{if(!i.firstSpaceView)throw new Error(B().A.formatMessage(ce.errorNoAction,{onboardingRedirectType:r.type}));await R().tR({environment:t,spaceViewStore:i.firstSpaceView,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:o().y8.Onboarding,navigationType:"joiningOrCreatingSpace"})}else{let e;if("getting_started_page"===r.type&&r.collectionId){const o=K().md.createChildStore(_.getSpaceStore(),{table:p().Vl,id:r.collectionId});e=(await(0,V().VZ)({environment:t,collectionStore:o})).collectionViewBlockStore()}await R().tR({environment:t,spaceViewStore:_,redirectPageId:r.pageId,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:o().y8.Onboarding,navigationType:"joiningOrCreatingSpace",navigateToStore:e})}}function Ie(e){const{environment:t,onboardingState:r}=e;if(t.device.isElectron&&k().quickSearchRefresh(),!r.isOnboarding)return;const{onboardingData:{userStore:o}}=r;N().createAndCommit({userAction:"onboardingStateActions.setAndTrackOnboardingComplete",environment:t,canUndo:!0,perform:e=>{se().LC({userStore:o,transaction:e})}}),w().IA(t,{...oe().M6(r),initial_workspace_type:"public"!==e.permissionLevel?e.spaceJoinOrCreate:void 0,permission_level:e.permissionLevel}),I().Kc(t)}async function he(e,t){if("join"===e.spaceJoinOrCreate){A().m({message:ce.joiningWorkspace});const r=await ke({environment:t,onboardingData:e.onboardingData,redirectData:e.redirectData,spaceId:e.spaceId||"",isNewUserOnboarding:oe().ze(e)});return A().V(),r}{A().m({message:ce.creatingWorkspace});const r=await De({environment:t,isNewUserOnboarding:oe().ze(e),onboardingData:e.onboardingData,userPersona:e.userPersona,redirectData:e.redirectData,spaceName:e.spaceName,spaceIcon:e.spaceIcon,planSelection:e.planSelection,isPrivate:"team"!==e.planSelection,useCases:e.useCases,categories:e.categories,hasTrialId:Boolean(e.trialId),selectedWorkflowTemplates:[]}),o=e.isNewUser&&"perfmark"===e.trialId;if(!o&&(0,Y().i4)(t)&&"team"===e.planSelection){await(0,Z().applyReversePlusTrial)(r.spaceId,t,"onboarding")&&(0,H().UW)(t,"onboarding_reverse_trial_sidebar")}if(o&&e.planSelection&&oe().ze(e)){const o=await Ue(r.spaceId,e.planSelection,t),{enableTrialInfoModal:n,enableTrialIneligibleToast:a}=o;n&&(0,ee().fR)({openedFrom:"onboarding"}),a&&ae().A.setState({open:!0,isExistingUser:!1})}return A().V(),r}}async function De(e){const{environment:t,onboardingData:r,userPersona:o,redirectData:n,spaceName:a,planSelection:i,spaceIcon:s,isPrivate:c,useCases:d,categories:l,isNewUserOnboarding:p,selectedWorkflowTemplates:u,collaborativeIntent:m}=e,g="team"===i?"team":"personal",_=q().default.DO_NOT_USE_markLegacy("create_space_with_templates"),{spaceStore:v,spaceViewStore:f,inviteLinkCode:S,teamStore:y}=await R().bz({environment:t,planType:g,name:a,userRootStore:r.userRootStore,analyticsFrom:"onboarding",icon:s||void 0,userPersona:o,collaborativeIntent:m});let b;ne().default.setState({...ne().default.state,spaceId:v.id}),await Q().$D({environment:t,spaceId:v.id,isNewlyCreatedSpace:!0}),"ai_onboarding_phase_2"!==x().A.state.flowName&&G().default.checkGate({gateName:"enable_write_survey_data_optimization"})&&((0,L().setUserAndSpaceSurveyData)({environment:t,onboardingState:x().A.state,planSelection:i,spaceStore:v,spaceViewStore:f}),(0,L().DO_NOT_USE_setUserPersonaRoleAndUseCases)(t,x().A.state));let I=[],h={};if(oe().sr(g)&&!r.performanceMarketingTerm){let e=[],r=[],o=[];"control"!==(0,W().eE)(t)?(o=[...u??[],...Ee(d)],e=d.includes("wikis")?[P().wikiAppTemplateUri]:[]):(e=(0,P().getAppTemplatePresetsForUseCases)(d),r=(0,ie().getPageTemplatesForUseCases)(d,B().A.getIntl())),h={appTemplates:e,pageTemplates:r,workflowTemplates:o}}else{let e=[];e=r.performanceMarketingTerm?(0,ie().getPerformanceMarketingSearchTermTemplates)(r.performanceMarketingTerm,B().A.getIntl()):ie().getStarterTemplatesForSpace({environment:t,onboardingPlanType:i,categories:l,intl:B().A.getIntl()}),e&&(I=e.map((e=>e.rootId))),h={pageTemplates:e}}b=await ie().createTemplatePagesInSpace({environment:t,redirectData:n,spaceViewStore:f,userSettingsStore:r.userSettingsStore,userRootStore:r.userRootStore,isPrivate:c,templatesToCreateInSpace:h,planType:g,spaceJoinOrCreate:"create",teamStore:y,useCases:d,userPersona:o,isNewUserOnboarding:p}),w().rn(t,{plan_selection:i,user_persona:o,initial_workspace_type:"create",space_id:v.id,onboarding_templates:I}),q().default.DO_NOT_USE_measureLegacy(_,{environment:t,data:{}});const D=Ce(n,b,t),k="pageId"in D?D.pageId:void 0;return x().A.setState({...x().A.state,onboardingData:{...r,redirectPageId:k}}),{redirectData:D,spaceId:v.id,spaceViewId:f.id,inviteLinkCode:S,spaceStore:v,spaceViewStore:f,teamStoreId:null==y?void 0:y.id}}async function ke(e){const{environment:t,onboardingData:r,spaceId:o,redirectData:n,isNewUserOnboarding:a}=e,i="team_invite_redirect"===n.type?n.inviteCode:void 0,{spaceViewStore:s}=await R().DT({environment:t,spaceId:o,userRootStore:r.userRootStore,analyticsFrom:"onboarding",userSettingsStore:r.userSettingsStore,inviteCode:i,isOnboarding:!0});X().default.state.currentSpaceStore||X().default.setState({...X().default.state,currentSpaceStore:s.getSpaceStore()});const c=ie().getStarterTemplatesForSpace({environment:t,onboardingPlanType:"team",categories:[],isJoiner:!0,intl:B().A.getIntl()}),d=await ie().createTemplatePagesInSpace({environment:t,redirectData:n,spaceViewStore:s,isPrivate:!0,userSettingsStore:r.userSettingsStore,userRootStore:r.userRootStore,templatesToCreateInSpace:{pageTemplates:c},planType:"team",spaceJoinOrCreate:"join",useCases:[],userPersona:"unfilled",isNewUserOnboarding:a});w().xs(t,{initial_workspace_type:"join",space_id:o,onboarding_templates:null==c?void 0:c.map((e=>e.rootId))});return{redirectData:Ce(n,d,t),spaceId:o,spaceViewId:s.id,inviteLinkCode:void 0,spaceStore:void 0,spaceViewStore:s,teamStoreId:void 0}}async function Ae(e,t){const r=await async function(e,t){const r="spaceId"in e.redirectData&&e.redirectData.spaceId,{onboardingData:o,redirectData:n}=e;if(r){const a=await ke({environment:t,onboardingData:o,redirectData:n,spaceId:r,isNewUserOnboarding:oe().ze(e)});return{...e,...a,spaceId:r}}if("fork_page"===n.type){const r=j().jU(o.userRootStore);if(r.length>0){const a=r[0].getSpaceId();if(a){const i=K().SL.createChildStore(o.userRootStore,{table:u().NX,id:a}),s=Ce(n,await E().sg({environment:t,userRootStore:o.userRootStore,isPrivate:!0,forkedPageId:n.pageId,spaceStore:i,spaceViewStore:r[0]}),t);return{...e,redirectData:s,spaceViewId:r[0].id,spaceId:a}}}}return e}(e,t);return Se(e.onboardingData,r,t)}function Ce(e,t,r){if(t){if("redirect_space"===e.type)return{type:e.type,pageId:t.id,spaceId:e.spaceId};if("getting_started_page"===e.type)return oe().zX(r)?{type:"mobile_native_home"}:{type:e.type,pageId:t.id};if("fork_page"===e.type)return{type:e.type,pageId:t.id};if("performance_marketing_template"===e.type)return{type:e.type,pageId:t.id}}return e}async function Oe(e,t,r,o){const{onboardingData:n}=e,a=q().default.DO_NOT_USE_markLegacy("onboarding.join_space");if("guest"===r){if(Ie({environment:o,spaceJoinOrCreate:"join",permissionLevel:r,onboardingState:e}),"team_invite_redirect"===t.type)throw new Error("Cannot invite guests to workspace from invite links.");await R().DT({environment:o,spaceId:t.spaceId,userRootStore:n.userRootStore,analyticsFrom:"onboarding",userSettingsStore:n.userSettingsStore,navigate:!0,redirectPageId:t.pageId})}else{const r=await ke({environment:o,onboardingData:n,redirectData:t,spaceId:t.spaceId,isNewUserOnboarding:oe().ze(e)});await be({environment:o,onboardingData:n,spaceId:r.spaceId,spaceViewId:r.spaceViewId,spaceJoinOrCreate:"join",redirectData:r.redirectData,onboardingFlow:e.flow,onboardingState:e})}return q().default.DO_NOT_USE_measureLegacy(a,{environment:o,data:{flow:e.flow,onboarding_complete_data:{stage:e.stage,redirect_data:t,is_new_user:oe().ze(e),permission_level:r}}}),{isOnboarding:!1,isLoading:!1,currentUserId:o.currentUser.id}}function Te(e){let t;e.onboardingData.isEducationPlanEligible&&(t="student");const{function:r}=(0,J().p3)();return r&&(t=r),{userPersona:t}}async function Ue(e,t,r){let o=!1,n=!1;const i=await h().callApi({eventName:"checkAndApplyPerfmarkTrial",environment:r,data:{spaceId:e}});if("success"===i.type){const e="success"===i.data.status;(0,F().u4)({environment:r,event:{eventName:"trial_apply_attempt",eventProperties:{trial_id:"perfmark",success:e,planType:t,..."error"===i.data.status&&{reason:i.data.reason}}}}),y().D$(r,{trial_id:"perfmark",success:e,planType:t,domainType:(0,z().FX)()}),"success"===i.data.status?o=!0:n=!0}else(0,F().u4)({environment:r,event:{eventName:"trial_apply_attempt",eventProperties:{trial_id:"perfmark",success:!1,planType:t,reason:i.error.name}}}),y().D$(r,{trial_id:"perfmark",success:!1,planType:t}),a().log({level:"error",from:"onboardingActions",type:"applyPerfmarkTrialError",error:(0,f().n6)(i.error)});return(0,te().Q8)(),{enableTrialInfoModal:o,enableTrialIneligibleToast:n}}function Re(e,t,r,o){return"create"===e.spaceJoinOrCreate&&e.isNewUser&&!r&&re().default.setState({type:"team_creator",step:"welcome",initialTeamStoreId:e.teamStoreId}),"modal"===r&&(0,ee().fR)({openedFrom:"onboarding"}),"sidebar"===r&&(0,H().UW)(t,"onboarding_reverse_trial_sidebar"),o&&ae().A.setState({open:!0,isExistingUser:!1}),{isOnboarding:!1,isLoading:!1,currentUserId:t.currentUser.id}}function Ee(e){return e.map((e=>Ne(e))).filter((e=>void 0!==e))}function Ne(e){switch(e){case"docs":return"docsCollection";case"project":return"projectsCollection";case"notes":return"meetingNotesCollection";case"goals":return"goalsCollection";default:return}}},640868:(e,t,r)=>{r.d(t,{U:()=>p});r(16280);var o=()=>r(454984),n=()=>r(688728),a=()=>r(475140),i=()=>r(789280),s=()=>r(778781),c=()=>r(317909),d=()=>r(204521),l=()=>r(658616);function p(e){let{environment:t,transaction:r,layoutStore:p,position:u,sessionId:m,beforePerformDeleteModule:g}=e;const _=p.getModules();if(!_)throw new Error("[deleteModuleAtPosition] modules by area not found for layout store");const v=(0,a().EX)(_,(e=>e.id===u.moduleId));if(!v)return;const{module:f,position:S}=v;if(!(0,i().Fe)(f))throw new Error("[deleteModuleAtPosition] module to delete is not removeable");var y;(c().createAndCommitOrAppend({environment:t,transaction:r,canUndo:!0,perform(e){!function(e){const{transaction:t,layoutStore:r,moduleLocation:a,moduleToDelete:i,beforePerformDeleteModule:d}=e;d&&d(t);(0,s().V6)(i)&&(0,l().deleteViewsModuleDependencies)({layoutStore:r,viewsModule:i,transaction:t});if("form_conditional_modules"===a.area){const e=o().N4.removeChildModule({pointer:r.pointer,modulesByArea:r.getModules(),module:i});for(const o of e)c().applyOperation({transaction:t,store:r,operation:o})}else{const e="views_main_tab_modules"===a.area?{area:a.area,viewId:a.viewId}:{area:n().Zm[a.area]};c().applyOperation({transaction:t,store:r,operation:o().N4.deleteModuleInArea({...e,pointer:r.pointer,moduleId:i.id})})}}({environment:t,transaction:e,layoutStore:p,moduleLocation:S,moduleToDelete:f,beforePerformDeleteModule:g})},userAction:"pageLayout.deleteActions.deleteModuleAtPosition"}),m)&&d().PS({environment:t,module:f,sessionId:m,collectionId:null===(y=p.getCollectionModel())||void 0===y?void 0:y.id,layoutId:p.id,context:(0,n().We)(u.area),area:u.area})}},655765:(e,t,r)=>{r.r(t),r.d(t,{applyMultiplayerReverseTrialIfEligible:()=>d().V_,applyReversePlusTrial:()=>d().xE,handleTrialUpgradeFromOnboarding:()=>d().WR,handleTrialUpgradeFromOnboardingImpl:()=>d().eu,isEligibleForBlockLimitTimedTrial:()=>c});var o=()=>r(130382),n=()=>r(762433),a=()=>r(57605),i=()=>r(128265),s=()=>r(749356);async function c(e,t){const r=await a().A.awaitData(e,{spaceId:null==t?void 0:t.id});if("free"!==(0,n().AI)(r))return!1;const c=null==t?void 0:t.getSetting("reach_block_limit_time");if(!c||(0,o().Mn)(c)<3)return!1;if(await(0,i().G)(e))return!1;const d=t.getSpaceId();return!!(await(0,s().L6)({environment:e,spaceId:d,offerCampaign:"default"}))}var d=()=>r(66460)},658616:(e,t,r)=>{r.r(t),r.d(t,{deleteViewsModuleDependencies:()=>i});var o=()=>r(220719),n=()=>r(44729),a=()=>r(630116);function i(e){const{layoutStore:t,viewsModule:r,transaction:i}=e,s=(0,o().o9)(a().Bv.createChildStore(t,r.collection_view_block_pointer));n().zz({childStore:s,parentStore:t,transaction:i})}},789280:(e,t,r)=>{r.d(t,{Fe:()=>a,wm:()=>i});const o={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,relationsGroup:!0,formSubmit:!0,formQuestion:!0,formTitle:!0,placeholder:!0,transcript:!0,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,views:!0,viewsMain:!1},n={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,formSubmit:!1,formQuestion:!1,formTitle:!1,placeholder:!1,transcript:!1,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,relationsGroup:!0,editor:!1,views:!1,viewsMain:!1};function a(e){return o[e.type]}function i(e){return n[e.type]}},813755:(e,t,r)=>{r.d(t,{d:()=>n});var o=()=>r(508496);function n(){return"modal_after_onboarding"===o().default.getEligibleGroup({experimentId:"packaging_ai_setup_generator_in_new_user_onboarding",defaultGroup:"control"})}},846199:(e,t,r)=>{r.d(t,{A:()=>o});const o=r(757695).default.createValue({open:!1},{name:"TrialInfoModalStore"})},888325:(e,t,r)=>{function o(e){return`${e.table}:${e.id}`}r.d(t,{_:()=>o})}}]);