"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[6893,43647,70593],{346:(e,t,i)=>{i.d(t,{MG:()=>m,T1:()=>f,a1:()=>v,dt:()=>g,kg:()=>h,lC:()=>y,n_:()=>b});var o=i(296540),n=()=>i(484714),a=()=>i(56366),s=()=>i(187174),r=()=>i(645873),d=()=>i(941463),l=()=>i(441199),c=()=>i(749687),u=()=>i(737230),p=()=>i(756114);const f=new(r().O2)("PerformanceToolbar",(()=>Promise.all([i.e(23806),i.e(16471),i.e(47123),i.e(17989),i.e(56985),i.e(48680),i.e(45624)]).then(i.bind(i,140401)))),m=(0,r()._h)(f,(e=>e.PerformanceToolbar)),g=(0,r()._h)(f,(e=>e.PerformanceToolbarSettings));function h(){const e=(0,n().v3)();return(0,a().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function b(){const e=(0,n().v3)(),t=S("PerformanceToolbarStore"),i=S("isPerformanceToolbarVisible");return(0,a().K8)((()=>!(!t||!i)&&i(e,e.RouterStore.state,t.state)),[i,e,t])}function y(){const e=S("PerformanceToolbarStore");return(0,a().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function v(){const e=(0,n().v3)(),t=S("createPerformanceToolbarMouseListeners"),i=S("PerformanceToolbarStore"),{sidebarExpanded:s,sidebarWidth:r,secondarySidebarExpanded:p,secondarySidebarWidth:f,updateSidebarExpanded:m,updateSidebarWidth:g}=(0,a().K8)((()=>({sidebarExpanded:c().sidebarExpandedStore.state,sidebarWidth:c().sidebarWidthStore.state,secondarySidebarExpanded:l().default.isOpen(),secondarySidebarWidth:d().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,o.useEffect)((()=>{if(i&&t)return t(e,(e=>i.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),s,r,p,f,m,g)}),[t,e,i,s,r,p,f,m,g])}function S(e){const t=h(),[{value:i}]=(0,s().Yb)((()=>t?f.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return i}},51367:(e,t,i)=>{i.d(t,{DL:()=>s,Sq:()=>d,Y5:()=>r,gc:()=>c,wo:()=>l});var o=()=>i(917629),n=()=>i(989423),a=()=>i(508496);function s(e,t){const i=(0,o().h2)(t.callout_key);i&&(t.placement_key=(0,o().t9)(i)),(0,n().u4)({environment:e,event:{eventName:"callout_show",eventProperties:t}}),a().default.logEvent("callout_show",t.callout_key)}function r(e,t){const i=(0,o().h2)(t.callout_key);i&&(t.placement_key=(0,o().t9)(i)),(0,n().u4)({environment:e,event:{eventName:"callout_click",eventProperties:t}}),a().default.logEvent("callout_click",t.callout_key)}function d(e,t){const i=(0,o().h2)(t.callout_key);i&&(t.placement_key=(0,o().t9)(i)),(0,n().u4)({environment:e,event:{eventName:"callout_dismiss",eventProperties:t}}),a().default.logEvent("callout_dismiss",t.callout_key)}function l(e,t){const{eligible_callouts:i,required_arg_timeout:o,required_args_run_duration:a,eligibility_timeouts:s,blocklist:r}=t;(0,n().u4)({environment:e,event:{eventName:"callout_coordinator_resolved",eventProperties:{eligible_callouts:i,required_arg_timeout:o,required_args_run_duration:a,eligibility_timeouts:s,blocklist:r}}})}function c(e,t){(0,n().u4)({environment:e,event:{eventName:"callout_feature_interaction",eventProperties:t}})}},63467:(e,t,i)=>{i.d(t,{y:()=>c});var o=()=>i(637997),n=()=>i(267419);const a={ko:()=>i.e(2268).then(i.bind(i,224434)),es:()=>i.e(95264).then(i.bind(i,196425)),de:()=>i.e(35390).then(i.bind(i,653703)),fr:()=>i.e(3272).then(i.bind(i,94677)),pt:()=>i.e(27315).then(i.bind(i,766869)),zh:()=>i.e(69945).then(i.bind(i,516814)),ja:()=>i.e(77757).then(i.bind(i,824432)),da:()=>i.e(9423).then(i.bind(i,440761)),fi:()=>i.e(59337).then(i.bind(i,462135)),nb:()=>i.e(2040).then(i.bind(i,937314)),nl:()=>i.e(51106).then(i.bind(i,530897)),sv:()=>i.e(53631).then(i.bind(i,895222))};let s=!1,r=!1;async function d(e){for(const[i,n]of Object.entries(e.emojiLocaleKeywords)){var t;o().fB[i]={...o().fB[i],keywords:[...n,...(null===(t=o().fB[i])||void 0===t?void 0:t.keywords)||[]]}}await n().A.waitUntilLoaded(),n().A.update((t=>{let{emojiByName:i,...o}=t;return{...o,emojiByName:{...i,...e.emojiByName}}}))}async function l(){if(s)return;const[e]=i(662303).locale.split("-");e in a&&(await d(await a[e]()),s=!0)}const c=(0,i(279900).A)((async()=>{await async function(){r||(await d(await i.e(51872).then(i.bind(i,443716))),r=!0)}(),await l()}))},72307:(e,t,i)=>{i.d(t,{A:()=>o});const o={appCursorListener:{sidebar:1,secondarySidebar:2,editor:3,aiChat:3,marketplace:3,teamHome:3}}},77126:(e,t,i)=>{i.d(t,{j:()=>n});class o extends(()=>i(959180))().A{}const n=new o},126617:(e,t,i)=>{i.d(t,{Y:()=>n});i(296540);const o={viewBox:"0 0 16 16",svg:(0,i(474848).jsx)("path",{d:"M3.2 6.725a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55"})},n=(0,i(340498).wt)("ellipsisSmall",o)},132456:(e,t,i)=>{i.d(t,{J4:()=>M,kw:()=>A,lf:()=>k});i(16280),i(816573),i(878100),i(177936),i(748140),i(821903),i(491134),i(128845),i(237467),i(444732),i(979577),i(581454);var o=i.n(i(883503)),n=()=>i(496603),a=()=>i(720665),s=()=>i(416845),r=()=>i(628536),d=()=>i(96689);const l={version:8,notion_version:0,variant:2},c={version:8,notion_version:1,variant:2},u=0,p=1,f=6,m=8,g=10,h=Date.UTC(2024,0,1);function b(e,t){if(e)return t[u]=255,t[u+1]=240|15&t[u+1],t;const i=Math.floor(((new Date).getTime()-h)/a().nD);if(i>=4096||i<0)throw new Error("Invalid offsetInDays.");return t[u]=i>>4,t[u+1]=i<<4&240|15&t[u+1],t}function y(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[p]=240&t[p]|e/2**32&15;for(let i=0;i<4;i++)t[p+1+i]=e/2**(24-8*i)&255;return t}function v(e,t){const i=e?1:0;return t[f]=l.version<<4&240|l.notion_version<<1&14|1&i,t[m]=l.variant<<6&192|63&t[m],t}function S(e,t){if("block"===e)return t[g]=(0,r().vi)(e)|63&t[g],t;const i=(0,r().vi)(e);return t[g]=i>>8&127,t[g+1]=255&i,t}function x(e,t){const i=(0,r().TG)(e);return t[g]=127&i|128&t[g],t}function A(e,t,i,o){const n=new Uint8Array(16),a=globalThis.crypto.getRandomValues(n);return i!==d().NX&&b(e,a),y(t,a),v(o,a),S(i,a),I(a)}function M(e,t,i,o){return A(e,t,i,o)}function k(e,t,i){return N(e,t,i)}function N(e,t,i){const a=o()(i),d=n().iv(a,2).map((e=>parseInt(e.join(""),16)));if((0,r().ep)(t)){if(void 0===e)throw new(s().Um)(`Deterministic ID for '${t}' must specify a space short id`)}else if(void 0!==e)throw new(s().Um)(`Deterministic ID for '${t}' should not provide a space short id`);const l=new Uint8Array(d);return e&&y(e,l),x(t,l),function(e){e[f]=240&c.version<<4|14&c.notion_version<<1|1&e[f],e[m]=192&c.variant<<6|63&e[m]}(l),I(l)}const w=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function I(e){let t=0;return w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]}},191197:(e,t,i)=>{i.d(t,{i:()=>n,z:()=>a});var o=()=>i(989423);function n(e,t){const{from:i}=t;o().vd(e,"show_tooltip",{from:i,time:Date.now()})}function a(e,t){const{from:i}=t;o().vd(e,"dismiss_tooltip",{from:i,time:Date.now()})}},262056:(e,t,i)=>{i.r(t),i.d(t,{GetNotifiedFor:()=>c,InboxActionsMenu:()=>it().Ay,InboxFilterForUnreadButton:()=>nt,InboxMentionsActionButtons:()=>lt,InboxNotificationSettingsButton:()=>Ae,InboxRefreshAllTabButton:()=>ut,MobileInboxPopup:()=>Xe,NotificationGroupActionsMenu:()=>It,NotificationInboxPanelContent:()=>Mt,SidebarInboxButton:()=>pt().SidebarInboxButton,TopbarUpdatesMenu:()=>h,UnreadMentionsBadge:()=>Ct().A,UpdateSidebar:()=>J});var o=i(296540),n=()=>i(56366),a=()=>i(401497),s=()=>i(959013),r=()=>i(284371),d=()=>i(123021),l=i(474848);function c(e){const{navigableBlockStore:t,from:i,buttonPopupStore:o,style:c}=e,u=(0,n().K8)((()=>t.isPageBlock()),[t]),p=(0,a().IS)((e=>({label:{fontSize:r().J.UIRegular.desktop,color:e.regularTextColor,fontWeight:r().Wy.medium},border:{border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,marginTop:8}})),[]);return u?(0,l.jsxs)("div",{style:c,children:[(0,l.jsx)("div",{style:p.label,children:(0,l.jsx)(s().sA,{id:"UpdateSidebarTabUpdatesHeader.pageNotificationSettings.label",defaultMessage:"Page notification settings"})}),(0,l.jsx)("div",{style:p.border,children:(0,l.jsx)(d().O,{blockStore:t,moreProminentStyling:!0,from:i,buttonPopupStore:o})})]}):null}var u=()=>i(60499),p=()=>i(928600),f=()=>i(38337),m=()=>i(722872),g=()=>i(750420);function h(e){const{blockStore:t,spaceStore:i}=e,o=function(e){const{spaceStore:t,blockStore:i}=e,o=(0,n().K8)((()=>{var e,t;return(null==i||null===(e=i.getModel())||void 0===e?void 0:e.isCollectionView())?null===(t=i.getCollectionPointer())||void 0===t?void 0:t.id:void 0}),[i]);if(!t)return;const a=i.id,s=t.id;return{navigableBlockId:a,collectionId:o,spaceId:s}}({blockStore:t,spaceStore:i});return o?(0,l.jsx)(p().A,{menuType:m().gu.Popup,className:f().sql,header:(0,l.jsx)(g().Ay,{navigableBlockStore:t,enablePageAnalytics:!1,noTopMargin:!0,inPeekView:!0}),children:(0,l.jsx)(u().A,{empty:()=>(0,l.jsx)(b,{}),source:"updates_sidebar",navigableBlockStore:t,...o},t.id)}):null}function b(){const e=(0,a().IS)((e=>({container:{marginTop:64,textAlign:"center",paddingLeft:18,paddingRight:18,marginBottom:64},content:{fontSize:14,color:e.mediumTextColor,marginTop:4}})),[]);return(0,l.jsx)("div",{style:e.container,children:(0,l.jsx)("div",{style:e.content,children:(0,l.jsx)("span",{children:(0,l.jsx)(s().sA,{defaultMessage:"No edits in this page yet.",id:"topbar.updatesButton.emptyState"})})})})}i(898992),i(737550);var y=()=>i(484714),v=()=>i(175947),S=()=>i(534177),x=()=>i(899963),A=()=>i(145214),M=()=>i(13679),k=()=>i(77395),N=()=>i(987017),w=()=>i(146594),I=()=>i(112995),C=()=>i(650843),j=()=>i(437622),_=()=>i(963589),T=()=>i(517223),R=()=>i(346),P=()=>i(567121),B=()=>i(326589),L=()=>i(869562),U=()=>i(644914),E=()=>i(737230),V=()=>i(351360),F=()=>i(39341),O=()=>i(548821),D=()=>i(712505),K=()=>i(423817),H=()=>i(386208),W=()=>i(310830),z=()=>i(81119),G=()=>i(119987);function q(e){const{currentTab:t,navigableBlockStore:i}=e,a=(0,n().K8)((()=>V().default.state.renderPhase),[]),[s,r]=(0,o.useState)(!1),d=(0,o.useMemo)((()=>Date.now()),[]),c=(0,n().K8)((()=>E().Ay.state.timeOpenedComments),[]),u=void 0!==c?Math.max(d,c):d,p=(0,_().X)("comment_sidebar_for_you");if((0,o.useEffect)((()=>{s||"rendered"!==a||r(!0)}),[i.id,s,a]),!i||!s)return(0,l.jsx)(K().J,{areaHeight:window.innerHeight});if(p)return(0,l.jsx)(z().B,{navigableBlockStore:i,timeViewed:u});switch(t){case E().tF.Comments:return(0,l.jsx)(H().R,{timeViewed:u,location:"sidebar"});case E().tF.Updates:return(0,l.jsx)(W().f,{enablePageAnalytics:e.enablePageAnalytics});case E().tF.Info:return(0,l.jsx)(w().H,{store:i,context:O().Rr.Frame,disabled:!1,shownAs:"sidebar"});default:return(0,S().ub)(t),(0,l.jsx)(H().R,{timeViewed:u,location:"sidebar"})}}function Z(e){const t=(0,s().tz)(),i=(0,n().K8)((()=>({width:E().Ay.state.width,isAnimating:E().Ay.state.isAnimating,currentTab:E().Ay.state.currentTab})),[]),r=(0,R().n_)(),{shouldLoadSidebarComponents:d,isExpanded:c}=e,u=(0,o.useRef)(null),p=(0,n().K8)((()=>F().p.state.banners.some((e=>"LoggedOutAppBanner"===e.id))?F().p.state.height??0:0),[]),[f,m]=(0,o.useState)(!1);(0,o.useEffect)((()=>{const e=requestAnimationFrame((()=>m(!0)));return()=>cancelAnimationFrame(e)}),[]);const g=(0,a().IS)((e=>({container:{flexGrow:0,flexShrink:0,width:i.width,zIndex:102,borderLeft:c?`1px solid ${e.regularDividerColor}`:"1px solid rgba(0,0,0,0)",alignSelf:"flex-end",position:"absolute",right:0,top:p,height:r?`calc(100vh - ${P().ls-p}px)`:`calc(100vh - ${p}px)`,pointerEvents:"none"},wrap:{height:"100%"},content:{position:"absolute",top:0,bottom:0,display:"flex",flexDirection:"column",overflow:"visible",zIndex:102,width:i.width}})),[i.width,c,r,p]);let h;return i.currentTab===E().tF.Comments?h=t.formatMessage({id:"updateSidebar.commentsAriaLabel",defaultMessage:"Page comments"}):i.currentTab===E().tF.Info?h=t.formatMessage({id:"updateSidebar.infoAriaLabel",defaultMessage:"Info"}):i.currentTab===E().tF.Updates?h=t.formatMessage({id:"updateSidebar.updatesAriaLabel",defaultMessage:"Page updates and analytics"}):(0,S().HB)(i.currentTab),d?(0,l.jsx)(A().A,{tag:"aside",visible:c,initial:{translateX:"100%"},animate:{translateX:0},exit:{translateX:"100%"},skip:!f,onAnimationStart:()=>{E().Ay.setState({...E().Ay.state,isAnimating:!0})},onAnimationEnd:()=>{E().Ay.setState({...E().Ay.state,isAnimating:!1})},ref:u,style:g.container,onMouseMove:()=>{i.isAnimating||E().Ay.setState({...E().Ay.state,mouseEntered:!0})},onMouseLeave:()=>{i.isAnimating||E().Ay.setState({...E().Ay.state,mouseEntered:!1})},"aria-hidden":!c||void 0,"aria-label":h,children:(0,l.jsx)("div",{style:g.wrap,children:(0,l.jsx)("div",{style:g.content,children:(0,l.jsx)(I().K,{from:"UpdateSidebar",fallback:e=>{let{errorId:t}=e;return(0,l.jsx)(C().LargeSurfaceRenderError,{errorId:t})},children:(0,l.jsx)($,{...e})})})})}):null}function Y(e){let{enablePageAnalytics:t,navigableBlockStore:i,onTabChange:o}=e;const s=(0,y().v3)(),r=(0,n().K8)((()=>E().Ay.state.currentTab),[]),d=(0,a().IS)((()=>({commentsHeaderStyle:{position:"relative",pointerEvents:"auto",marginTop:v().ek(s.device.isElectronMac)}})),[s]);if((0,_().X)("comment_sidebar_for_you"))return(0,l.jsx)(G().ze,{navigableBlockStore:i});switch(r){case E().tF.Comments:return(0,l.jsx)("div",{style:d.commentsHeaderStyle});case E().tF.Updates:return(0,l.jsx)(g().Ay,{navigableBlockStore:i,enablePageAnalytics:t,onTabChange:o});case E().tF.Info:return(0,l.jsx)("div",{style:d.commentsHeaderStyle});default:return(0,S().ub)(r),(0,l.jsx)("div",{style:d.commentsHeaderStyle})}}function $(e){const{isResizerHovered:t,isResizing:i,currentTab:s,expanded:r,updatesSubTab:d}=(0,n().K8)((()=>{const{isResizerHovered:e,isResizing:t,currentTab:i,expanded:o,updatesSubTab:n}=E().Ay.state;return{isResizerHovered:e,isResizing:t,currentTab:i,expanded:o,updatesSubTab:n}}),[]),{currentBlockStore:c}=e,u=(0,y().v3)(),{currentTabToRender:p}=(0,n().K8)((()=>({currentTabToRender:c.isCollectionView()&&!c.isCollectionViewPageWithContent()?E().tF.Updates:s})),[c,s]),m=(0,n().K8)((()=>{const{currentSpaceStore:e}=V().default.state;return!(!e||(0,j().IL)(e))}),[]),h=o.useCallback((e=>{x().XI(u,{tab:e===E().VE.Updates?"updates":"analytics",origin:D().default.state.open?"peek_view":"page"}),E().Ay.setState({...E().Ay.state,updatesSubTab:e})}),[u]),b=(0,a().IS)((e=>({pane:{display:"flex",flexDirection:"column",height:"100%",position:"relative",pointerEvents:"none",maxHeight:"100%",backgroundColor:s===E().tF.Comments?void 0:"inherit"},resizerStyle:{position:"absolute",top:0,left:-3,bottom:0,right:0,height:"100vh",width:3,zIndex:-1,display:"block",transition:"box-shadow 300ms ease-in",...(t||i)&&r?{boxShadow:e.sidebarResizerBoxShadow}:{}},tabpanel:{display:"flex",flexDirection:"column",flex:"1 1 0",overflow:"hidden"}})),[s,t,i,r]),v=d?(0,E().aP)(d):(0,E().J)(p),S=(0,l.jsx)(I().K,{from:`UpdateSidebarContent.${v}`,fallback:e=>{let{errorId:t}=e;return(0,l.jsx)(C().LargeSurfaceRenderError,{errorId:t})},children:(0,l.jsx)(q,{navigableBlockStore:c,currentTab:p,enablePageAnalytics:m})});return(0,l.jsxs)("div",{style:b.pane,className:f().YDC,children:[(0,l.jsx)("div",{style:b.resizerStyle}),(0,l.jsx)(Y,{enablePageAnalytics:m,navigableBlockStore:c,onTabChange:h}),m?(0,l.jsx)("div",{style:b.tabpanel,role:"tabpanel",id:(0,N().Jy)(g().Oi,p),"aria-labelledby":(0,N().vU)(g().Oi,p),children:S}):S,r&&(0,l.jsx)(k().A,{type:"update"})]})}function J(e){const{isElectronMac:t,currentBlockStore:i}=e,a=(0,n().K8)((()=>({width:E().Ay.state.width,isAnimating:E().Ay.state.isAnimating,canRender:E().Ay.state.canRender})),[]),s=(0,n().K8)((()=>V().default.state.currentSpaceStore),[]),r=(0,o.useMemo)((()=>null==s?void 0:s.clone()),[s]),d=(0,y().v3)(),{isExpanded:c,closeSidebar:u}=(0,n().K8)((()=>({isExpanded:(0,U().Nk)(d),closeSidebar:()=>L().setUpdateExpand({environment:d,isExpanded:!1,from:"close_for_space",saveDetailsSidebarPreference:!0})})),[d]),[p,f]=(0,o.useState)(!1),[m,g]=(0,o.useState)(void 0);(0,o.useEffect)((()=>{(void 0===m||m===i.id)&&c&&(f(!0),g(i.id))}),[m,i,c]);const h=(0,n().K8)((()=>i.getAssociatedCollectionStore()),[i]);if(!(0,n().K8)((()=>{if(!a.canRender)return!1;if(r)return!0;if((0,B().g)())return!0;if(!h)return!1;const{count:e}=(0,T().pm)({collectionStore:h});return e>0}),[h,a.canRender,r]))return null;const b=()=>(0,l.jsx)(Z,{isElectronMac:t,isFullyExpanded:!a.isAnimating,currentBlockStore:i,isExpanded:c,closeSidebar:u,shouldLoadSidebarComponents:p});return r?(0,l.jsx)(M().A,{store:r,droppable:!0,render:b},(null==r?void 0:r.id)||i.id):b()}var X=()=>i(289313),Q=()=>i(763824),ee=()=>i(848259),te=()=>i(572080),ie=()=>i(297872),oe=()=>i(331542),ne=()=>i(228927),ae=()=>i(688149),se=()=>i(721273),re=()=>i(62856),de=()=>i(155959),le=()=>i(606846),ce=()=>i(212326),ue=()=>i(597682),pe=()=>i(266945),fe=()=>i(920546),me=()=>i(885247),ge=()=>i(285790),he=()=>i(859428),be=()=>i(900652),ye=()=>i(624307),ve=()=>i(404141),Se=()=>i(466872);function xe(e){let{location:t}=e;const n=(0,s().tz)(),r=(0,y().v3)(),d=(0,y().Y0)(),c=(0,o.useCallback)((()=>{const{device:e}=r;ee().fP(r),e.isMobile?ye().A.setState({open:!0,source:ye().C.Updates}):(Se().A.setState({...Se().A.state,open:!1}),ve().A.setState({...ve().A.state,currentTab:"notifications",defaultSubtab:void 0}),ve().A.setState({...ve().A.state,open:!0}))}),[r]),u=(0,be().zg)(),p=(0,a().IS)((e=>({mobileTopBarIcon:{height:18,width:18,fill:e.regularTextColor},webUpdatesModalIcon:{width:16,height:16},button:d.isMobile?{height:30,width:30}:u.button})),[d.isMobile,u.button]);let f;switch(t){case"mobileTopBar":f=p.mobileTopBarIcon;break;case"webUpdatesModal":f=p.webUpdatesModalIcon;break;default:(0,S().HB)(t)}return(0,l.jsx)(he().A,{renderTooltip:()=>(0,l.jsx)(s().sA,{defaultMessage:"Open notifications settings",id:"updatesModal.openNotifications.tooltip"}),render:e=>(0,l.jsx)(ge().A,{style:p.button,icon:i(846899).B,iconStyle:f,onClick:c,ariaLabel:n.formatMessage({id:"updatesModal.openNotifications.tooltipAriaLabel",defaultMessage:"Open notifications settings button"}),...e})})}const Ae=o.memo(xe);i(944114),i(354520),i(803949),i(581454);var Me=()=>i(857639),ke=()=>i(187174),Ne=()=>i(386164),we=()=>i(959044),Ie=()=>i(496603),Ce=()=>i(449506),je=()=>i(317909);function _e(e){let{isScrolledToTopWithStickyHeader:t}=e;const i=(0,a().IS)((e=>({border:{flexShrink:0,width:"100%",boxShadow:t?"0 0 0 transparent":`0 1px 0 ${e.regularDividerColor}`,transition:"box-shadow 300ms",height:2,marginTop:-14,position:"sticky",zIndex:99,top:22,paddingTop:6,backgroundColor:e.contentBackground}})),[t]);return(0,l.jsx)("div",{style:i.border})}var Te=()=>i(645873);const Re=new(Te().O2)("activityNotification",(async()=>await Promise.all([i.e(42838),i.e(35299),i.e(56409)]).then(i.bind(i,736980)))),Pe=(0,Te()._h)(Re,(e=>e.ActivityNotification));var Be=()=>i(299545),Le=()=>i(941541),Ue=()=>i(245865),Ee=()=>i(630116),Ve=()=>i(920498),Fe=()=>i(406792);const Oe={};function De(e){const{groupName:t}=e;switch(t){case"today":return(0,l.jsx)(s().sA,{id:"InboxTimeGroupHeader.today",defaultMessage:"Today"});case"this_week":return(0,l.jsx)(s().sA,{id:"InboxTimeGroupHeader.thisWeek",defaultMessage:"This week"});case"last_week":return(0,l.jsx)(s().sA,{id:"InboxTimeGroupHeader.lastWeek",defaultMessage:"Last week"});case"older":return(0,l.jsx)(s().sA,{id:"InboxTimeGroupHeader.older",defaultMessage:"Older"});default:(0,S().HB)(t)}}function Ke(e){const{groupName:t,shouldStickyHeader:i}=e,{isTablet:o}=(0,y().Y0)(),n=(0,_().X)("tablet_refresh_gate"),s=(0,a().IS)((e=>({headerContainer:{paddingTop:3,paddingBottom:3,paddingLeft:16,paddingRight:16,color:e.text.secondary,fontWeight:o&&n?r().Wy.regular:r().Wy.medium,fontSize:o&&n?"15px":"12px",...i&&{position:"sticky",top:0,backgroundColor:e.contentBackground,zIndex:2,paddingBottom:4,paddingTop:2}}})),[i,o,n]);return(0,l.jsx)("div",{style:s.headerContainer,children:(0,l.jsx)(De,{groupName:t})})}var He=()=>i(929469);const We=new class{constructor(){this.state=new Map,this.noOpListener=()=>{}}cacheInboxPointers(e,t,i){const o=this.state.get(t);if(o)for(const n of o)e.defaultRecordCache.inMemoryRecordCache.removeListenerToRecord(n,this.noOpListener),(0,Ue().unsubscribeAfterDelay)({environment:e,pointer:n,userId:e.currentUser.id});for(const n of i)e.defaultRecordCache.inMemoryRecordCache.addListenerToRecord(n,this.noOpListener),(0,Ue().cancelEviction)({pointer:n,userId:e.currentUser.id});this.state.set(t,i)}getNotificationIds(e){const t=this.state.get(e);if(!t)return;return t.filter((e=>e.table===we()._p)).map((e=>e.id))}};const ze=function(e){const[t,a]=(0,o.useState)(Math.random()),[s,r]=(0,o.useState)(20),d=(0,y().v3)(),c=(0,n().K8)((()=>i(227440).A.state.online),[]),u=(0,n().K8)((()=>{var e;return null===(e=V().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]);return(0,o.useEffect)((()=>{if(u){const e=Ie().nF(((e,t)=>{String(t).includes("unreadCount")||a(Math.random())}),1e3),t=(0,i(921997).dp)(u),o=Le().Ay.addListener(t,void 0,e,void 0,d);if(o)return()=>{Le().Ay.removeListener(o,d)}}}),[u,d]),c?(0,l.jsx)($e,{checkpoint:t,type:e.type,empty:e.empty,source:e.source,tab:e.tab,size:s,setSize:r,scrolledToTop:e.isScrolledToTopFromOtherSidebar}):(0,l.jsx)(qe,{type:e.type})};function Ge(e){const t=(0,y().v3)(),i=(0,y().Y0)();return(0,a().IS)((o=>({placeholder:{...Je(e,t),paddingTop:i.isMobile?64:void 0,minHeight:i.isMobile?void 0:220,display:"flex",textAlign:"center",alignItems:"center",justifyContent:"center",fontSize:14,color:o.regularTextColor,overflow:"hidden"}})),[i.isMobile,t,e]).placeholder}function qe(e){let{type:t}=e;const i=Ge(t);return(0,l.jsx)("div",{style:i,children:(0,l.jsx)("div",{children:(0,l.jsx)(s().sA,{defaultMessage:"Please go online to view your inbox.",id:"notificationInbox.offline.message"})})})}function Ze(e){let{request:t,error:i,result:a,type:r,empty:d,source:c,tab:u,size:p,setSize:f,scrolledToTop:m,requestType:g}=e;const h=(0,y().v3)(),b=(0,y().Y0)(),v=(0,n().K8)((()=>V().default.state.currentSpaceStore),[]),x=a??We.getNotificationIds(g),A=(0,n().O$)(le().Ay),M=(0,o.useContext)(He().B),[k,N]=(0,n().K8)((()=>{if(!x)return[[],[]];const e=[],i=v?x.map((e=>Ee().sk.createChildStore(v,{table:we()._p,id:e}))):[],o=[],n=Ie().oE(i.map((i=>{const n=i.getValue();if(!n)return null;if(n.invalid)return null;if("mentions"===t.type&&n.visited)return null;if("archive"===t.type&&!n.visited)return null;const a=Be().g5(i);if(!a||!a.isReady())return null;const s=a.getModel();if(!s||s.invalid)return o.push(n),null;const r=i.getDiscussionStore();if(null!=r&&r.isReady()&&"none"===(null==r?void 0:r.getRole()))return o.push(n),null;e.push(i.pointer),e.push(a.pointer),r&&e.push(r.pointer);const d=i.getNavigableBlockPointer();if(d&&e.push(d),M){if("inbox"===M&&"commented"!==n.type)return null;if("activity"===M&&"commented"===n.type)return null}return{activity:s,notification:n}}))).sort(((e,t)=>Number(t.notification.end_time)-Number(e.notification.end_time)));return We.cacheInboxPointers(h,g,e),[n,o]}),[x,v,h,g,t.type,M]),w=(0,n().K8)((()=>ce().dl()),[]),I=0===(0,n().K8)((()=>ce().Yz(k,t.type)),[k,t.type]).size,C=(0,_().X)("sticky_inbox_date_buckets"),j=(0,o.useCallback)((()=>{if(!v||i)return null;if(!x)return null;const e=[];let t=[];const n=ce().Ot();let a;return k.forEach(((i,s,r)=>{let{activity:d,notification:p}=i;const f={source:c,tab:u,notification:p},g=Number(p.end_time),h=n.findIndex((e=>{const{cutoffTime:t}=e;return void 0===t||t<=g}));if(h!==a){const i=n[h].name,s=C&&!b.isMobile;s&&0===e.length&&e.push((0,l.jsx)(_e,{isScrolledToTopWithStickyHeader:m},`${i}-sticky-header`)),e.push((0,l.jsx)("div",{children:t},`${i}-section-name`)),t=[(0,l.jsxs)(o.Fragment,{children:[1!==e.length&&(0,l.jsx)("div",{style:{height:8}}),(0,l.jsx)(Ke,{groupName:i,shouldStickyHeader:s})]},`${i}-inbox-group-section`)],a=h}t.push((0,l.jsx)(Pe,{activity:d,rootStore:v,isFirst:!1,isLast:!1,tabArgs:f},d.id))})),e.push((0,l.jsx)("div",{children:t},"time-grouping")),e}),[v,i,x,k,c,u,C,b.isMobile,m]),T=(0,Te().fJ)(Re);(0,o.useEffect)((()=>{if(!v)return;!function(e,t,i){const o=e.filter((e=>!e.read));0!==o.length&&(Me().log({level:"warning",from:"NotificationInbox",type:"invalidNotificationData",data:{ids:o.map((e=>e.id))}}),je().createAndCommit({userAction:"NotificationUpdates.unreadNotificationNotRendered",environment:i,canUndo:!0,perform:e=>{for(const i of o)te().ZB({notification:i,rootStore:t,transaction:e,read:!0})}}))}(N,v,h);const e=k.some((e=>{let{notification:t}=e;return!t.read&&!t.visited})),t=e&&k.some((e=>{let{notification:t}=e;return t.read&&!t.visited}));switch(w){case"unread_and_read":case"unread_only":le().Ay.setState({...A,currentTab:"mentions",isCurrentTabEmpty:I,containsBothReadAndUnreadNotifications:t,containsUnreadNotifications:e,showOnlyUnreadNotifications:"unread_only"===w,unreadNotificationIds:[]});break;case"archived_only":le().Ay.setState({...A,isCurrentTabEmpty:I,currentTab:"archive"});break;case"all_updates":break;default:(0,S().HB)(w)}}),[w,A,I,k,v,h,N]);const R=Ge(r);return!v||i?(0,l.jsx)("div",{style:R,children:(0,l.jsx)(s().sA,{defaultMessage:"Something went wrong.",id:"notificationUpdates.unknownErrorMessage"})}):x&&"resolved"===T.status?(0,l.jsxs)("div",{style:I?R:Je(r,h),children:[I&&d,(0,l.jsx)("section",{role:"feed",className:"notranslate",children:j()}),(0,l.jsx)(ne().A,{onChange:e=>{if(!b.isMobile&&"closed"===ce().I6())return null;e<200&&x.length>=p&&f(x.length+20)}})]}):(0,l.jsx)("div",{style:Je(r,h),children:(0,l.jsx)(K().J,{areaHeight:window.innerHeight})})}function Ye(e){const t=(0,y().v3)();return(0,o.useEffect)((()=>{void 0!==e.requestId&&function(e,t){if(!(e in Oe))return;const i=Oe[e];if(i.measured)return;i.measured=!0;const{startTime:o,size:n,type:a}=i;Fe().default.DO_NOT_USE_measureLegacy({metricName:"notification_render",startTime:o},{environment:t,data:{size:n,type:a}})}(e.requestId,t)}),[e.requestId,t]),(0,l.jsx)(l.Fragment,{children:e.children})}function $e(e){const{type:t,empty:i,source:a,tab:s,size:r,setSize:d,scrolledToTop:c,checkpoint:u}=e,p=(0,y().v3)(),{currentUserStore:f,currentSpaceStore:m}=(0,n().K8)((()=>{const{currentUserStore:e,currentSpaceStore:t}=V().default.state;return{currentUserStore:e,currentSpaceStore:t}}),[]),g=(0,n().K8)((()=>"unread_only"===ce().dl()),[]),[h,b]=(0,o.useState)(u),v=(0,o.useMemo)((()=>function(e,t){switch(e){case"mentions":return t?"unread_only":"unread_and_read";case"archive":return"archived";default:(0,S().HB)(e)}}(t,g)),[t,g]),[x,A]=(0,ke().Yb)((async()=>{if(!f||!m)return null;const e=f.id,i=m.id,o=le().Ay.startLoading();var n,a;a={size:r,type:t},(n=o)in Oe||(Oe[n]={measured:!1,startTime:performance.now(),size:a.size,type:a.type});const s=await Ce().callApi({eventName:"getNotificationLogV2",environment:p,data:{spaceId:i,size:r,type:v,variant:"no_grouping"},userId:e,headers:(0,Ne().WS)({spaceId:i})});if(le().Ay.endLoading(o),"failed"===s.type)throw s.error;return{notificationIds:s.data.notificationIds,requestId:o}}),[m,f,p,v,r,t],{throttle:1e3});if((0,o.useEffect)((()=>{u!==h&&(A(),b(u))}),[u,h,A]),!f||!m||!x)return null;const M=m.id,k=f.id,{value:N,error:w}=x,I={spaceId:M,userId:k,type:t};return Ve().setState({request:I,result:null==N?void 0:N.notificationIds}),(0,l.jsx)(Ye,{requestId:null==N?void 0:N.requestId,children:(0,l.jsx)(Ze,{type:t,requestType:v,empty:i,source:a,tab:s,size:r,setSize:d,request:I,error:w,result:null==N?void 0:N.notificationIds,scrolledToTop:c})})}function Je(e,t){const{device:i}=t;return{minHeight:i.isMobile||"mentions"===e?void 0:"75vh"}}function Xe(e){const t=(0,y().Y0)(),i=(0,y().v3)();(0,o.useEffect)((()=>()=>(ee().L_(i),void te()._V({environment:i,newTab:"mentions",shouldTrack:!1}))),[i]);const n=(0,a().IS)((e=>({chevron:{fill:e.regularTextColor,width:26,height:26},padding:{width:1}})),[]);let s;if(t.isMobile){const i="mobileTopBar";s={menuType:m().gu.Modal,title:(0,l.jsx)(me().R,{}),width:e.format===se().Cn.RenderAsPage?"100vw":void 0,renderAsPage:e.format===se().Cn.RenderAsPage,leftRightButtonStyle:{paddingRight:14},right:[(0,l.jsx)(Ae,{location:i},"InboxNotificationSettingsButton"),(0,l.jsx)("span",{style:n.padding},"paddingSpan2"),(0,l.jsx)(fe().F,{},"InboxFilterButton"),(0,l.jsx)("span",{style:n.padding},"paddingSpan1"),(0,l.jsx)(ue().C,{},"InboxEllipsisButton")],left:[(0,l.jsx)(tt,{},"loading-spinner"),t.isPhone&&(0,de().T)("supportsNativeHome")&&e.format===se().Cn.RenderAsPage&&!(0,de().T)("supportsNativeInbox")?void 0:(0,X().Z)(n.chevron)],onClickLeft:e.onClose,whiteBackground:!0,disableHeaderShadow:!0}}else s={menuType:m().gu.Popup,height:"auto"};return(0,l.jsxs)(p().A,{...s,className:f().e3e,children:[(0,l.jsx)(ne().A,{onChange:(e,t)=>{let{offsetFromTop:i}=t;le().gJ.setState(i<=0)}}),(0,l.jsx)(ie().A,{capture:!0,allowUndo:!0,allowEsc:!0,allowMobileAutoScroll:!0,render:()=>e.format===se().Cn.RenderAsPage?(0,l.jsx)(et,{}):(0,l.jsx)(Qe,{})})]})}function Qe(){const e=(0,n().K8)((()=>{var e;return null===(e=V().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),t=(0,n().K8)((()=>ce().dl()),[]),i={emptyState:{marginTop:100,cursor:"auto"}};return(0,l.jsx)(l.Fragment,{children:"all_updates"!==t?(0,l.jsx)(ze,{type:"archived_only"===t?"archive":"mentions",source:"notifications_tab",tab:"inbox",empty:(0,l.jsx)("div",{style:i.emptyState,children:(0,l.jsx)(pe().x,{})})},t):e&&(0,l.jsx)(u().A,{spaceId:e,source:"notifications_tab",empty:()=>(0,l.jsx)("div",{style:i.emptyState,children:(0,l.jsx)(pe().x,{})})},t)})}function et(){const e=(0,y().v3)();return(0,l.jsx)(ae().A,{fetch:async()=>{await Q().wR(0),await V().default.waitUntil((()=>void 0!==V().default.state.currentSpaceStore))},loading:()=>(0,l.jsx)(o.Fragment,{}),willRender:()=>{var t;null===(t=e.mobileNative)||void 0===t||t.markTransitionReady({type:"updates"})},render:()=>(0,l.jsx)(A().A,{initial:{opacity:0},animate:{opacity:1},children:(0,l.jsx)(Qe,{})})})}function tt(){const e=(0,n().K8)((()=>void 0!==le().Ay.state.loadingId),[]),t=(0,re().A)(e,400,0);return(0,de().T)("supportsNativeHome")?t?(0,l.jsx)(oe().A,{style:{width:14}}):(0,l.jsx)("div",{style:{width:14}}):null}var it=()=>i(965351);function ot(e){let{location:t}=e;const r=(0,s().tz)(),d=(0,y().v3)(),{currentTab:c,showOnlyUnreadNotifications:u,isCurrentTabEmpty:p}=(0,n().K8)((()=>{const{currentTab:e,isCurrentTabEmpty:t}=le().Ay.state;return{currentTab:e,showOnlyUnreadNotifications:"mentions"===e&&le().Ay.state.showOnlyUnreadNotifications,isCurrentTabEmpty:t}}),[]),f=(0,o.useCallback)((async()=>{if(u)le().Ay.update((e=>({...e,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]}))),ee().A2(d,{toggled_to:"off"});else{const e=await te().zc({environment:d});le().Ay.update((t=>({...t,showOnlyUnreadNotifications:!0,unreadNotificationIds:e}))),ee().A2(d,{toggled_to:"on"})}}),[d,u]),m=(0,a().IS)((e=>({mobileTopBarIcon:{height:18,width:18,fill:u?void 0:e.regularTextColor},webUpdatesModalIcon:{height:17,width:17},desktopInboxPanelIcon:{height:18,width:18,...!u&&{fill:e.regularTextColor}}})),[u]);if("mentions"!==c)return null;const g=!u&&p,h=u?(0,l.jsx)(s().sA,{defaultMessage:"Show all notifications",id:"updatesModal.unreadNotificationsFilterButton.allTooltip"}):(0,l.jsx)(s().sA,{defaultMessage:"Show unread notifications only",id:"updatesModal.unreadNotificationsFilterButton.unreadTooltip"}),b=u?r.formatMessage({defaultMessage:"Show all notifications",id:"updatesModal.unreadNotificationsFilterButton.allTooltipAriaLabel"}):r.formatMessage({defaultMessage:"Show unread notifications only",id:"updatesModal.unreadNotificationsFilterButton.unreadTooltipAriaLabel"});let v,x;switch(t){case"mobileTopBar":v=void 0,x=m.mobileTopBarIcon;break;case"webUpdatesModal":v=!!u||void 0,m.webUpdatesModalIcon;break;case"desktopInboxPanel":v=!!u||void 0,x=m.desktopInboxPanelIcon;break;default:(0,S().HB)(t)}return(0,l.jsx)(he().A,{disableTooltip:g,renderTooltip:()=>h,render:e=>(0,l.jsx)(ge().A,{icon:i(316808).g,isBlue:u,hovered:v,iconStyle:x,disabled:g,onClick:f,ariaLabel:b,...e})})}const nt=o.memo(ot);var at=()=>i(609948);const st=(0,i(340498).wt)("mailOpen",{viewBox:"0 0 16 16",svg:(0,l.jsx)("path",{d:"M2.88965 15.9277C2.17415 15.9277 1.63639 15.75 1.27637 15.3945C0.920898 15.0436 0.743164 14.515 0.743164 13.8086V7.00684C0.743164 6.76074 0.756836 6.54427 0.78418 6.35742C0.816081 6.17057 0.863932 6.00423 0.927734 5.8584C0.996094 5.71257 1.08496 5.57812 1.19434 5.45508C1.30371 5.32747 1.43815 5.19987 1.59766 5.07227L6.88184 0.916016C7.12793 0.715495 7.36035 0.558268 7.5791 0.444336C7.80241 0.325846 8.03939 0.266602 8.29004 0.266602C8.54069 0.266602 8.77539 0.325846 8.99414 0.444336C9.21745 0.558268 9.45215 0.715495 9.69824 0.916016L14.9824 5.07227C15.1419 5.19987 15.2764 5.32747 15.3857 5.45508C15.4951 5.57812 15.5817 5.71257 15.6455 5.8584C15.7139 6.00423 15.7617 6.17057 15.7891 6.35742C15.821 6.54427 15.8369 6.76074 15.8369 7.00684V13.8086C15.8369 14.515 15.6569 15.0436 15.2969 15.3945C14.9414 15.75 14.4059 15.9277 13.6904 15.9277H2.88965ZM2.84863 14.8818H13.7314C14.0687 14.8818 14.3285 14.7907 14.5107 14.6084C14.6976 14.4307 14.791 14.1641 14.791 13.8086V6.82227C14.791 6.6582 14.7751 6.51921 14.7432 6.40527C14.7113 6.29134 14.6611 6.19108 14.5928 6.10449C14.529 6.01335 14.4424 5.92448 14.333 5.83789L9.11035 1.76367C8.94173 1.63607 8.80046 1.53809 8.68652 1.46973C8.57259 1.39681 8.44043 1.36035 8.29004 1.36035C8.13965 1.36035 8.00749 1.39681 7.89355 1.46973C7.77962 1.53809 7.63835 1.63607 7.46973 1.76367L2.24707 5.83789C2.1377 5.92448 2.04883 6.01335 1.98047 6.10449C1.91667 6.19108 1.86882 6.29134 1.83691 6.40527C1.80501 6.51921 1.78906 6.6582 1.78906 6.82227V13.8086C1.78906 14.1641 1.88021 14.4307 2.0625 14.6084C2.24479 14.7907 2.50684 14.8818 2.84863 14.8818ZM1.51562 14.6357L6.88184 9.37207C7.11882 9.13509 7.35352 8.96419 7.58594 8.85938C7.82292 8.75456 8.06217 8.70215 8.30371 8.70215C8.54525 8.70215 8.78223 8.75456 9.01465 8.85938C9.24707 8.96419 9.48405 9.13509 9.72559 9.37207L15.085 14.6357L14.374 15.3467L9.13086 10.1787C8.98047 10.0283 8.83691 9.92122 8.7002 9.85742C8.56803 9.78906 8.43587 9.75488 8.30371 9.75488C8.16699 9.75488 8.03027 9.78906 7.89355 9.85742C7.76139 9.92122 7.6224 10.0283 7.47656 10.1787L2.2334 15.3467L1.51562 14.6357ZM5.81543 10.6094L1.5498 6.3916L2.26074 5.68066L6.5332 9.90527L5.81543 10.6094ZM10.0742 9.90527L14.3398 5.68066L15.0508 6.3916L10.7852 10.6094L10.0742 9.90527Z"})});var rt=()=>i(864943);function dt(e){let{}=e;const t=(0,y().Y0)(),r=(0,y().v3)(),d=(0,n().O$)(le().gJ),c=(0,n().K8)((()=>{const{currentTab:e,isCurrentTabEmpty:t}=le().Ay.state;if("mentions"!==e||t)return;const{containsBothReadAndUnreadNotifications:i,containsUnreadNotifications:o,showOnlyUnreadNotifications:n}=le().Ay.state;return{containsBothReadAndUnreadNotifications:i,containsUnreadNotificationsAccordingToUpdatesStore:o,showOnlyUnreadNotifications:n}}),[]),u=(0,n().K8)((()=>i(179534).A.getUnreadCountForCurrentSpace().mentions>0),[]),p=(0,o.useCallback)((()=>{ee().cZ(r),te().hY(r)}),[r]),f=(0,o.useCallback)((()=>{if(!c)return;const{containsBothReadAndUnreadNotifications:e,showOnlyUnreadNotifications:t}=c;let i="none";t?i="unread":e&&(i="read"),ee().xd(r,{readFilter:i}),te().Sy(r,"mentions",i)}),[r,c]),m=(0,a().IS)((e=>{const i={opacity:1,flex:1,height:t.isMobile?32:28,fontSize:14};return{headerWithBottomBorder:{borderBottom:d?void 0:`1px solid ${e.regularDividerColor}`},container:{display:"flex",marginTop:t.isMobile?12:0,marginLeft:16,marginRight:16,paddingBottom:12,gap:8},buttons:i,buttonsWithLoweredOpacity:{...i,opacity:.7}}}),[t.isMobile,d]);if(!c)return null;const{containsBothReadAndUnreadNotifications:g,containsUnreadNotificationsAccordingToUpdatesStore:h,showOnlyUnreadNotifications:b}=c,v=h||u;return(0,l.jsx)("div",{style:m.headerWithBottomBorder,children:(0,l.jsxs)("div",{style:m.container,children:[(0,l.jsx)(he().A,{disableTooltip:v,renderTooltip:e=>(0,l.jsx)("div",{...e,children:(0,l.jsx)(s().sA,{defaultMessage:"All notifications have been marked as read.",id:"updatesModal.spaceUpdatesTab.markAllReadButton.disabledTooltip"})}),render:e=>(0,l.jsx)(rt().A,{onClick:p,style:v?m.buttons:m.buttonsWithLoweredOpacity,size:t.isMobile?"lg":"sm",disabled:!v,icon:st,...e,children:(0,l.jsx)(s().sA,{defaultMessage:"Mark all as read",id:"updatesModal.spaceUpdates.mentionsTab.markAllReadButtonTitle"})})}),(0,l.jsx)(rt().A,{onClick:f,style:m.buttons,size:t.isMobile?"lg":"sm",icon:at().A,children:b?(0,l.jsx)(s().sA,{defaultMessage:"Archive unread",id:"updatesModal.spaceUpdates.mentionsTab.archiveUnreadButtonTitle"}):g?(0,l.jsx)(s().sA,{defaultMessage:"Archive read",id:"updatesModal.spaceUpdates.mentionsTab.archiveReadButtonTitle"}):(0,l.jsx)(s().sA,{defaultMessage:"Archive all",id:"updatesModal.spaceUpdates.mentionsTab.archiveAllButtonTitle"})})]})})}const lt=o.memo(dt);function ct(e){let{location:t,onClick:o}=e;const r=(0,s().tz)(),d=(0,n().K8)((()=>le().Ay.state.currentTab),[]),c=(0,a().IS)((e=>({mobileTopBarIcon:{height:18,width:18,fill:e.regularTextColor},webUpdatesModalIcon:{height:17,width:17}})),[]);if("allPages"!==d)return null;let u;switch(t){case"mobileTopBar":u=c.mobileTopBarIcon;break;case"webUpdatesModal":u=c.webUpdatesModalIcon;break;default:(0,S().HB)(t)}return(0,l.jsx)(he().A,{renderTooltip:()=>(0,l.jsx)(s().sA,{defaultMessage:"Refresh",id:"updatesModal.allUpdatesRefreshButton.refreshButtonDescription"}),render:e=>(0,l.jsx)(ge().A,{icon:i(606641).h,iconStyle:u,onClick:o,ariaLabel:r.formatMessage({defaultMessage:"Refresh",id:"updatesModal.allUpdatesRefreshButton.refreshButtonDescriptionAriaLabel"}),...e})})}const ut=o.memo(ct);var pt=()=>i(693142),ft=()=>i(173019),mt=()=>i(197190),gt=()=>i(2143),ht=()=>i(550125),bt=()=>i(141333),yt=()=>i(313427),vt=()=>i(441199),St=()=>i(756279),xt=()=>i(17090);function At(){const e=(0,a().IS)((e=>({button:{display:"flex",justifyContent:"center",alignItems:"center",gap:6,height:36,width:174,position:"absolute",left:"50%",marginLeft:-87,bottom:12,zIndex:20,borderRadius:18,background:e.blueColor,color:e.white,boxShadow:e.buttonBoxShadow,fontSize:14},hovered:{background:e.blueButtonHoveredBackground},pressed:{background:e.blueButtonPressedBackground},icon:{width:16,height:16}})),[]);return(0,l.jsxs)(mt().A,{style:e.button,hoveredStyle:e.hovered,pressedStyle:e.pressed,href:"https://dev.notion.so/notion/346c06d81dbf4cf188bf44fcef6a6a62?v=fa0376c6fb2a40f0b77d68b683f73e5b&pvs=4",external:!0,children:[(0,ft().r)(e.icon),(0,l.jsx)("div",{children:"Provide Feedback"})]})}function Mt(e){const{titleId:t}=e,i=(0,n().K8)((()=>{const{currentSpaceStore:e}=V().default.state;if(e)return e.id}),[]),s=(0,n().K8)((()=>!1),[]),r=(0,n().K8)((()=>be().n5()),[]),d=(0,n().K8)((()=>vt().default.state.mode),[]),c=(0,n().K8)((()=>ce().dl()),[]),{isTablet:p}=(0,y().Y0)(),f=(0,_().X)("tablet_refresh_gate"),m=(0,a().IS)((e=>({container:{flexDirection:"column",width:"100%",display:"flex",marginTop:p&&f?12:void 0},scroller:{position:"relative",minHeight:0,display:"flex",flexDirection:"column",marginRight:0,pointerEvents:"auto",width:"100%",..."peek"===d?{}:{minWidth:r}},emptyState:{marginTop:100,cursor:"auto"}})),[r,d,p,f]),g=(0,n().uB)(void 0,xt().A),h=(0,n().K8)((()=>g.state.elementRef??{current:null}),[g]),b=0===(0,bt().yE)(h),v=(0,o.useContext)(He().B),S=(0,_().X)("sticky_inbox_date_buckets");return(0,l.jsxs)("div",{style:m.container,children:[(0,l.jsx)(yt().Q,{type:v??"inbox",titleId:t}),!S&&(0,l.jsx)(ht().A,{scrollerStore:g}),(0,l.jsxs)(gt().H,{type:St().A.Y,style:m.scroller,store:g,children:[(0,l.jsx)(ne().A,{onChange:(e,t)=>{let{offsetFromTop:i}=t;le().gJ.setState(i<=0)}}),"all_updates"!==c?(0,l.jsx)(ze,{type:"archived_only"===c?"archive":"mentions",source:"notifications_tab",tab:"inbox",empty:(0,l.jsx)("div",{style:m.emptyState,children:(0,l.jsx)(pe().x,{})}),isScrolledToTopFromOtherSidebar:b},c):i&&(0,l.jsx)(u().A,{spaceId:i,source:"notifications_tab",empty:()=>(0,l.jsx)("div",{style:m.emptyState,children:(0,l.jsx)(pe().x,{})})},c)]}),s&&(0,l.jsx)(At,{})]})}i(823215);var kt=()=>i(753199);function Nt(e){const{notificationActivityPairs:t}=e,d=t.map((e=>{let{notification:t}=e;return t})),c=(0,y().v3)(),u=(0,y().Y0)(),p=(0,s().tz)(),f=d?d[0]:void 0,m=(0,n().K8)((()=>d.every((e=>e.read))),[d]),g=(0,n().K8)((()=>ce().dl()),[]),[h,b]=(0,o.useState)(!1),v=(0,o.useCallback)((e=>{d&&f&&(0,kt().SQ)({event:e,context:kt().y$.NotificationClick,callback:()=>{b(!0);const e=d.map((e=>{let{id:t}=e;return t}));(async()=>{try{await Ce().callApi({eventName:"setNotificationsStatus",environment:c,data:{spaceId:f.space_id,notificationIds:e,archived:!0}})}finally{b(!1)}})();const i=d.filter((e=>!e.read));te().nZ("mentions",f.space_id,(e=>Math.max(e-i.length,0))),ee().Eh(c,{target:"archive",affectedNotificationIds:e,notificationActivityPairs:t})}})}),[c,d,f,t]),S=(0,o.useCallback)((e=>{d&&f&&(0,kt().SQ)({event:e,context:kt().y$.NotificationClick,callback:()=>{let e;if(b(!0),m){const i=d.map((e=>{let{id:t}=e;return t}));e=async()=>{try{await Ce().callApi({eventName:"setNotificationsStatus",environment:c,data:{spaceId:f.space_id,notificationIds:i,read:!1}})}finally{b(!1)}},te().nZ("mentions",f.space_id,(e=>e+i.length)),ee().Eh(c,{target:"mark_as_unread",affectedNotificationIds:i,notificationActivityPairs:t})}else{const i=d.filter((e=>!e.read)).map((e=>{let{id:t}=e;return t}));e=async()=>{try{await Ce().callApi({eventName:"setNotificationsStatus",environment:c,data:{spaceId:f.space_id,notificationIds:i,read:!0}})}finally{b(!1)}},te().nZ("mentions",f.space_id,(e=>Math.max(e-i.length,0))),ee().Eh(c,{target:"mark_as_read",affectedNotificationIds:i,notificationActivityPairs:t})}e()}})}),[c,d,f,m,t]),x=(0,a().IS)((e=>({container:{display:"flex",height:"min-content",padding:u.isMobile?0:2,borderWidth:u.isMobile?0:1,borderStyle:"solid",borderColor:u.isMobile?"transparent":e.stroke.primary,background:u.isMobile?"transparent":e.surface.elevated,borderRadius:6},button:{height:u.isMobile?30:26,width:u.isMobile?30:26},inboxIconBase:{fill:e.icon.secondary,stroke:e.icon.secondary,strokeOpacity:1,strokeWidth:.25},iconStyle:{fill:e.mediumIconColor,padding:2},readIcon:{width:u.isMobile?21:19,height:u.isMobile?22:20},archiveIcon:{width:u.isMobile?24:23,height:u.isMobile?24:23},ellipsisIcon:{width:u.isMobile?24:23,height:u.isMobile?24:23},headerLabel:{paddingLeft:16,paddingRight:16,paddingTop:10,fontWeight:r().Wy.semibold}})),[u]);return f?"archived_only"===g?null:(0,l.jsxs)("div",{style:x.container,children:[(0,l.jsx)(he().A,{renderTooltip:()=>(0,l.jsx)(s().sA,{...wt.archiveNotificationGroup}),render:e=>(0,l.jsx)(ge().A,{ariaLabel:p.formatMessage(wt.archiveNotificationGroup),style:x.button,icon:at().A,iconStyle:{...x.iconStyle,...x.archiveIcon,height:18,width:18,...x.inboxIconBase},onClick:v,disabled:h,...e})}),(0,l.jsx)(he().A,{renderTooltip:()=>m?(0,l.jsx)(s().sA,{...wt.markNotificationGroupAsUnread}):(0,l.jsx)(s().sA,{...wt.markNotificationGroupAsRead}),render:e=>(0,l.jsx)(ge().A,{ariaLabel:m?p.formatMessage(wt.markNotificationGroupAsUnread):p.formatMessage(wt.markNotificationGroupAsRead),style:x.button,icon:m?i(619082).s:i(593249).v,iconStyle:{...x.iconStyle,...x.readIcon,...m?{height:17,width:17}:{height:16,width:16},...x.inboxIconBase},onClick:S,disabled:h,...e})})]}):null}const wt=(0,s().YK)({markNotificationGroupAsRead:{defaultMessage:"Mark notifications in this page as read",id:"NotificationGroupActionsMenu.markNotificationAsRead.tooltipMessage"},markNotificationGroupAsUnread:{defaultMessage:"Mark notifications in this page as unread",id:"NotificationGroupActionsMenu.markNotificationAsUnread.tooltipMessage"},archiveNotificationGroup:{defaultMessage:"Archive notifications in this page",id:"NotificationGroupActionsMenu.handleArchive.tooltipMessage"},changePageNotificationSettings:{defaultMessage:"Change page notification settings",id:"NotificationGroupActionsMenu.notificationSettings.tooltipMessage"}}),It=o.memo(Nt);var Ct=()=>i(105127)},266945:(e,t,i)=>{i.d(t,{x:()=>l});i(296540);var o=()=>i(56366),n=()=>i(959013),a=()=>i(534177),s=()=>i(502176),r=()=>i(212326),d=i(474848);function l(){const e=(0,o().K8)((()=>(0,r().dl)()),[]);switch(e){case"unread_and_read":case"unread_only":return(0,d.jsx)(s().A,{message:(0,d.jsx)(n().sA,{defaultMessage:"You'll be notified here for @mentions, page activity, and page invites",id:"inbox.filterEmptyState.nonArchivedMessage"}),title:(0,d.jsx)(n().sA,{defaultMessage:"You're all caught up",id:"inbox.filterEmptyState.nonArchivedTitle"})});case"archived_only":return(0,d.jsx)(s().A,{message:(0,d.jsx)(n().sA,{defaultMessage:"Any Inbox updates you archived will show up here.",id:"inbox.filterEmptyState.archivedMessage"}),title:(0,d.jsx)(n().sA,{defaultMessage:"No archived updates",id:"inbox.filterEmptyState.archivedTitle"})});case"all_updates":return(0,d.jsx)(s().A,{message:(0,d.jsx)(n().sA,{defaultMessage:"Any activity in the workspace will show up here.",id:"inbox.filterEmptyState.allPagesMessage"}),title:(0,d.jsx)(n().sA,{defaultMessage:"No activity in the workspace",id:"inbox.filterEmptyState.allPagesTitle"})});default:(0,a().HB)(e)}}},279900:(e,t,i)=>{function o(e){let t,i,o;return async function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t?(o=a,i||(i=t.then((()=>(i=void 0,t=e(...o),t))),i)):(t=e(...a),t)}}i.d(t,{A:()=>o})},332390:(e,t,i)=>{i.d(t,{C7:()=>j,Yf:()=>R,k8:()=>_,lN:()=>T,oG:()=>P});var o=i(296540),n=()=>i(484714),a=()=>i(56366),s=()=>i(700500),r=()=>i(130382),d=()=>i(959013),l=()=>i(534177),c=()=>i(191197),u=()=>i(953006),p=()=>i(68465),f=()=>i(231722),m=()=>i(792002),g=()=>i(465425),h=()=>i(51367),b=()=>i(301421),y=()=>i(351360),v=()=>i(411671),S=()=>i(630116),x=()=>i(24157),A=()=>i(576590),M=()=>i(656633),k=()=>i(972911),N=i(474848);const w=1,I=1,C=(0,d().YK)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Ask AI when searching"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"AI can find pages and synthesize a quick, concise answer for you. Try it now."},showAssistantOriginElementLocationHeader:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.header",defaultMessage:"Start by asking a question"},showAssistantOriginElementLocationContent:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.content",defaultMessage:"Notion AI will find pages and compose a concise answer for you. Try it now."}});function j(){const e=(0,n().v3)(),t=function(){const e=(0,n().v3)(),t=(0,a().K8)((()=>{var e;return null===(e=y().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),i=(0,a().K8)((()=>{const t=y().default.state.mainEditorCurrentBlockStore;return t&&v().A.getMode(e,t)}),[e]);return(0,a().K8)((()=>{if(e.device.isMobile)return;const{currentUserSettingsStore:o,inAppCalloutStore:n}=y().default.state;if(!n.getCalloutVisibility("ai_onboarding_tooltip").canShow)return;const a=null==o?void 0:o.getSettings();if(!a)return;if((0,l().O9)(a.last_used_ai_writer_at))return;if("tooltip"!==a.ai_assistant_onboarding_phase)return;if((0,M().vp)(e,t)){if(!(0,l().O9)(a.ai_sales_assisted_extra_notification_seen_at)||(0,r().Mn)(a.ai_sales_assisted_extra_notification_seen_at)<I)return}else if((0,l().O9)(a.ai_assistant_onboarding_phase_last_set_at)&&(0,r().Mn)(a.ai_assistant_onboarding_phase_last_set_at)<w)return;if("space_for_ai"!==(0,k().V7)())return;if(!(0,p().ZE)(i))return;const d=x().default.state;if("editing"===d.mode){const e=(0,f().H7)(d.multiSelection);if(e&&(0,m().gE)(e.selection)){const t=e.store,i=b().n.findEditableWithStore(t);if(i){const e="block"===t.pointer.table?S().Bv.createChildStore(t,t.pointer):void 0,o=e&&e.getType(),n=Boolean(o&&(0,s().ZW)(o)),a=t.getValue();if(n&&!a)return i}}}}),[e,i,t])}(),[i,c]=(0,o.useState)(!1),g=(0,o.useCallback)((()=>{c(!0)}),[]),h=!i&&Boolean(t);return(0,o.useEffect)((()=>()=>{h&&(0,k().ZI)(e)}),[e,h]),h&&t?(0,N.jsx)(u().k,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,N.jsx)(d().sA,{...C.spaceForAiHeader}),content:(0,N.jsx)(d().sA,{...C.spaceForAiContent}),onCloseClick:g}):null}function _(e){const{originRef:t,openState:i}=e,s=(0,n().v3)(),r=(0,a().K8)((()=>(0,k().V7)()),[]),[l,c]=(0,o.useState)(!1),p=(0,o.useCallback)((()=>{c(!0)}),[]),f="ask_ai_anything"===r&&"initialPrompt"===i.stage&&!l;return(0,o.useEffect)((()=>()=>{!s.device.isMobile&&f&&(0,k().ZI)(s)}),[s,f]),s.device.isMobile||!f?null:(0,N.jsx)(u().k,{origin:t,placementToOrigin:"top",header:(0,N.jsx)(d().sA,{...C.askAiAnythingHeader}),content:(0,N.jsx)(d().sA,{...C.askAiAnythingContent}),onCloseClick:p})}function T(e){const{originRef:t,openState:i,isInputEmpty:s}=e,r=(0,n().v3)(),l=(0,a().K8)((()=>(0,k().V7)()),[]),[c,p]=(0,o.useState)(!1),f=(0,o.useCallback)((()=>{p(!0)}),[]),m="refine_ai_response"===l&&"results"===i.stage&&!i.loading&&"cursor"===i.context.type&&s&&!c;return(0,o.useEffect)((()=>()=>{!r.device.isMobile&&m&&(0,k().ZI)(r)}),[r,m]),r.device.isMobile?null:(0,N.jsx)(u().k,{origin:m?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,N.jsx)(d().sA,{...C.refineAiResponseHeader}),content:(0,N.jsx)(d().sA,{...C.refineAiResponseContent}),onCloseClick:f})}function R(e){const{origin:t}=e,i=(0,n().v3)();(0,o.useEffect)((()=>{c().i(i,{from:"qna_button"}),h().DL(i,{callout_key:"ai_assistant_origin_element_tooltip",placement_key:"Tooltip"})}),[i]);const a=(0,o.useCallback)((()=>{const{currentUserSettingsStore:e}=y().default.state;e&&(c().z(i,{from:"qna_button"}),h().Sq(i,{callout_key:"ai_assistant_origin_element_tooltip",dismiss_type:"tooltip_dismiss",placement_key:"Tooltip"}),(0,A().setQnaOnboardingPhase)(i,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}),g().a(i,"ai_assistant_origin_element_tooltip"))}),[i]);return(0,N.jsx)(u().k,{style:{width:250},pointerLength:25,pointerPosition:"94%",origin:t,placementToOrigin:"top",header:(0,N.jsx)(d().sA,{...C.showAssistantOriginElementLocationHeader}),content:(0,N.jsx)(d().sA,{...C.showAssistantOriginElementLocationContent}),onCloseClick:a})}function P(e){const{origin:t}=e,i=(0,n().v3)();(0,o.useEffect)((()=>{c().i(i,{from:"qna_search"})}),[i]);const a=(0,o.useCallback)((()=>{const{currentUserSettingsStore:e}=y().default.state;e&&(c().z(i,{from:"qna_search"}),(0,A().setQnaOnboardingPhase)(i,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[i]);return(0,N.jsx)(u().k,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,N.jsx)(d().sA,{...C.showAssistantLocationHeader}),content:(0,N.jsx)(d().sA,{...C.showAssistantLocationContent}),onCloseClick:a})}(0,i(466103).exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=y().default.state;t&&i(317909).createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,canUndo:!0,perform:e=>{i(755199).mJ({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},518598:(e,t,i)=>{i.d(t,{K:()=>c});i(296540);var o=()=>i(426388),n=()=>i(959013),a=()=>i(705540),s=()=>i(285790),r=()=>i(745766),d=i(474848);const l=(0,n().YK)({menu:{defaultMessage:"Menu",id:"topbar.appMenuButton.title"}});function c(){const e=(0,n().tz)();return(0,d.jsx)(s().A,{style:{position:"absolute",top:"10px",left:"14px",width:24,height:24,zIndex:1e5,...(0,r().g)({noDrag:!0})},iconStyle:{width:16,height:16},isDarkIconColor:!0,onClick:()=>{a().openAppMenu()},icon:o().S,ariaLabel:e.formatMessage(l.menu)})}},518773:(e,t,i)=>{i.d(t,{A:()=>a});var o=()=>i(835338),n=()=>i(534177);function a(e,t){switch(e){case"all":return{following:!0,followSettings:{...(0,o().JY)({explicitly_set_by_user:!0}),feed_setting:t}};case"important":return{following:!0,followSettings:{...(0,o().gK)({explicitly_set_by_user:!0}),feed_setting:t}};case"comments":return{following:!0,followSettings:{...(0,o().lx)({explicitly_set_by_user:!0}),feed_setting:t}};case"none":return{following:!1,followSettings:{...(0,o().gU)({explicitly_set_by_user:!0}),feed_setting:t}};default:(0,n().HB)(e)}}},555267:(e,t,i)=>{i.d(t,{A:()=>d});var o=i(296540),n=()=>i(401497),a=()=>i(62856),s=()=>i(331542),r=i(474848);function d(e){let{loadingMessage:t}=e;const i=(0,n().DP)(),d=(0,a().A)(!0,400);return(0,r.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:d&&(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(s().A,{}),t&&(0,r.jsx)("div",{style:{marginLeft:8,color:i.text.secondary},children:t})]})})}},567121:(e,t,i)=>{i.d(t,{EG:()=>s,K5:()=>a,RH:()=>n,Yi:()=>r,ls:()=>o});const o=32,n=202,a=1e3,s="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",r="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},577466:(e,t,i)=>{i.d(t,{B:()=>a});var o=()=>i(401497),n=()=>i(100622);function a(e){return(0,o().IS)((t=>({wrapper:{background:e?(0,n().qh)(e,t).color:t.surface.wash,borderRadius:5,padding:"8px 12px",userSelect:"none",width:"100%"}})),[e])}},578194:(e,t,i)=>{i.d(t,{r:()=>o});const o=(0,i(583835).Dv)("importEvernote")},608581:(e,t,i)=>{i.d(t,{A:()=>c});i(898992),i(354520),i(581454),i(941795);var o=i(296540),n=()=>i(401497),a=()=>i(451306),s=()=>i(284371),r=()=>i(963575),d=i(474848);function l(e){const{button:t,isLast:i}=e,r=(0,n().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:s().Wy.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return o.cloneElement(t,{...(0,a().AH)(t.props.style,r.button,i&&r.buttonLast),hoveredStyle:(0,a().AH)(r.buttonHovered,i&&r.buttonLast).style,pressedStyle:r.buttonPressed})}const c=function(e){let{children:t,isVisible:c,position:u,style:p}=e;const f=(0,i(484714).v3)(),m=(0,n().IS)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:r().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:f.device.isMobile?"auto":"none",opacity:f.device.isMobile?1:0,fontFamily:s().vc(i(662303).locale).sans,position:"absolute",right:r().A.horizontal.small,bottom:r().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:r().A.vertical.small,bottom:void 0}})),[f]),g=o.Children.toArray(t).filter(i(534177).O9),h=g.length;return(0,d.jsx)(i(145214).A,{animate:{opacity:c?1:0},...(0,a().AH)(m.container,p,c&&m.containerHover,"top"===u&&m.containerTop),children:g.map(((e,t)=>{const n=t===h-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===i(859428).A&&o.isValidElement(e))return o.cloneElement(e,{render:(t,i)=>{const o=e.props.render(t,i);return(0,d.jsx)(l,{isLast:n,button:o},e.key)}});if(e.type===i(704152).A&&o.isValidElement(e))return(0,d.jsx)(l,{isLast:n,button:e},e.key)}}))})}},650843:(e,t,i)=>{i.r(t),i.d(t,{LargeSurfaceRenderError:()=>r});i(296540);var o=()=>i(167355),n=()=>i(840071),a=()=>i(113414),s=i(474848);function r(e){const{errorId:t}=e;return(0,s.jsx)(n().L,{iconGroup:o().F,errorId:t,children:(0,s.jsx)(a().g,{})})}},756114:(e,t,i)=>{i.d(t,{D:()=>o});function o(e,t){t.route.name;return!1}},765974:(e,t,i)=>{i.d(t,{b:()=>n});i(296540);const o={viewBox:"0 0 20 20",svg:(0,i(474848).jsx)("path",{d:"M11.84 3.563c-.817-1.417-2.862-1.417-3.68 0L2.314 13.688c-.818 1.416.205 3.187 1.84 3.187h11.692c1.636 0 2.658-1.77 1.84-3.187zM9.876 6.75c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5"})},n=(0,i(340498).wt)("exclamationMarkTriangleFill",o)},801678:(e,t,i)=>{i.d(t,{A:()=>h});var o=i(296540),n=()=>i(662303),a=()=>i(484714),s=()=>i(56366),r=()=>i(451306),d=()=>i(959013),l=()=>i(100622),c=()=>i(496603),u=()=>i(284371),p=()=>i(720665),f=()=>i(145214),m=i(474848);const g={isRepositioning:!1};const h=function(e){const t=(0,o.useRef)(null),n=(0,a().v3)(),{isMobile:d}=(0,a().Y0)(),[l,u]=(0,o.useState)(g),f=(0,o.useCallback)((()=>{u(g)}),[]),{renderControl:h,onFlushTemporaryPosition:y,style:v,source:S,store:x}=e,{isRepositioning:A,image:M,startDragRenderedPosition:k,startDragImageScreenHeight:N}=l,w=(0,s().K8)((()=>0===i(502438).default.state.stores.length),[]),[I,C]=(0,o.useState)(!1),j=(0,s().uB)(e.mouseStore,i(454305).A),_=(0,s().K8)((()=>j.state.mouseEntered),[j]),T=(0,i(401497).IS)((()=>({dragContainer:{width:"100%",cursor:A?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[A]),R=(0,s().K8)((()=>function(e,t,i){return(0,c().Et)(i)?i:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,c().Et)(e))return e}const i=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,p().pN)(t)?i:t}}const o=t.getFormat(),n=o.page_cover_position;if((0,c().Et)(n))return n;return i}(e,t)}(S,x,l.temporaryPosition)),[l.temporaryPosition,S,x]);(0,o.useEffect)((()=>{const e=e=>{const i=t.current;i&&!i.contains(e.target)&&A&&y({imagePosition:R,reset:()=>{j.reset(),f()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[R,A,j,y,f]),A&&!w&&f();const P=(0,o.useMemo)((()=>(0,c().nF)((e=>{j.setState({...j.state,mouseEntered:!0})}),100)),[j]),B=(0,o.useMemo)((()=>(0,c().sg)((e=>{j.setState({...j.state,mouseEntered:!1})}),100)),[j]),L=(0,o.useCallback)(((e,t)=>{i(778417).IU({environment:n});const o=new Image;o.onload=()=>{u((e=>({...e,isRepositioning:!0,image:o})))},t&&(o.src=t)}),[n]),U=(0,o.useCallback)((e=>{y({imagePosition:R,reset:()=>{f()}})}),[R,y,f]),E=(0,o.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,i(819121).p)(t)&&C(!0)}),[]),V=(0,o.useCallback)((()=>{C(!0)}),[]),F=(0,o.useCallback)((e=>{if(M&&A){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/M.width*M.height;u((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:R})))}}}),[M,R,A]),O=(0,o.useCallback)((e=>{if(A){const t=e.diffY/(N||0)+(k||0);u((e=>({...e,temporaryPosition:(0,c().LI)((0,i(40845).A)(t,0,1),4)})))}}),[A,N,k]),D=(0,o.useCallback)((()=>{u((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),K=(0,s().K8)((()=>h({handleRepositionClick:L,handleSavePositionClick:U,handleCancelClick:f,isVisible:d||_||I||A,isRepositioning:A})),[L,U,I,d,A,_,h,f]);return(0,m.jsxs)("div",{ref:t,onFocus:E,onBlur:V,onMouseEnter:P,onMouseMove:P,onMouseLeave:B,...(0,r().AH)(T.container,v),children:[(0,m.jsx)(i(603820).A,{onDraggableDragStart:F,onDraggableDragMove:O,onDraggableDragEnd:D,onDraggableDragCancel:D,disabled:!A,render:t=>(0,m.jsx)("div",{...(0,r().AH)(T.dragContainer),...t,children:e.render({imagePosition:R,isRepositioning:A})})}),(0,m.jsx)(b,{small:e.small,isRepositioning:A}),K]})};function b(e){let{small:t,isRepositioning:i}=e;if(t)return null;const o={background:l().Ay.blackWithAlpha(.4),borderRadius:4,color:l().Ay.white,fontSize:12,fontFamily:u().vc(n().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,m.jsx)(f().A,{visible:i,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:o,children:(0,m.jsx)(d().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},814388:(e,t,i)=>{i.d(t,{$I:()=>ne,$L:()=>ie,$f:()=>D,Bu:()=>ee,GK:()=>W,IF:()=>re,Ln:()=>U,Nn:()=>K,OM:()=>G,OQ:()=>Q,Ui:()=>L,Uo:()=>se,bD:()=>E,ds:()=>V,dy:()=>F,fk:()=>J,g8:()=>X,kr:()=>ae,sL:()=>te,uj:()=>oe,xt:()=>Z});i(944114),i(898992),i(354520),i(803949),i(581454);var o=()=>i(496603),n=()=>i(534177),a=()=>i(720665),s=()=>i(764880),r=()=>i(278132),d=()=>i(700500),l=()=>i(799288),c=()=>i(787626),u=()=>i(970013),p=()=>i(713998),f=()=>i(597777),m=()=>i(869190),g=()=>i(651124),h=()=>i(80979),b=()=>i(236162),y=()=>i(945778),v=()=>i(792071),S=()=>i(433847),x=()=>i(450648),A=()=>i(296344),M=()=>i(912720),k=()=>i(179034),N=()=>i(824862),w=()=>i(519831),I=()=>i(96689),C=()=>i(437607),j=()=>i(854150),_=()=>i(798880),T=()=>i(919709),R=()=>i(695608),P=()=>i(53528),B=()=>i(931075);const L=(0,i(959013).YK)({defaultPluralizedUserNames:{defaultMessage:"Someone",id:"pushNotification.pluralizedUserNames.defaultLabel"},defaultPermissionGroupName:{defaultMessage:"Deleted group",id:"pushNotification.permissionGroupName.defaultLabel"},defaultPageName:{defaultMessage:"a Notion page",id:"pushNotification.pageName.defaultLabel"},untitledPermissionGroupName:{defaultMessage:"Untitled group",id:"pushNotification.permissionGroupName.untitledLabel"},userEditedPermissionGroup:{defaultMessage:"{userName} edited {permissionGroupName}",id:"pushNotification.userEditedTarget.label"},userDeletedPermissionGroup:{defaultMessage:"{userName} deleted {permissionGroupName}",id:"pushNotification.userDeletedTarget.label"},userCreatedPermissionGroup:{defaultMessage:"{userName} created {permissionGroupName}",id:"pushNotification.userCreatedTarget.label"},unknownAuthor:{defaultMessage:"Unknown author",id:"pushNotification.authorPhrase.unknown"},untitledSpaceName:{defaultMessage:"Untitled",id:"pushNotification.untitledSpaceName.label"},untitledTeamName:{defaultMessage:"Untitled",id:"pushNotification.untitledTeamName.label"},untitledCollectionName:{defaultMessage:"Untitled",id:"pushNotification.untitledCollectionName.placeholder"},untitledBlockTitle:{defaultMessage:"Untitled",id:"pushNotification.untitledBlockTitle.placeholder"},twoUserNames:{defaultMessage:"{firstAuthor} and {secondAuthor}",id:"pushNotification.twoUserNames.label"},threePlusUserNames:{defaultMessage:"{othersCount, plural, one {{firstAuthor} and {othersCount} other} other {{firstAuthor} and {othersCount} others}}",id:"pushNotification.threePlusUserNames.label"},editorPermissionLabel:{defaultMessage:"Full access",id:"pushNotifications.editorPermissionLevel.label"},readerPermissionLabel:{defaultMessage:"Read only",id:"pushNotifications.readerPermissionLevel.label"},editOnlyPermissionLabel:{defaultMessage:"Edit only",id:"pushNotifications.editOnlyPermissionLevel.label"},editPermissionLabel:{defaultMessage:"Edit",id:"pushNotifications.editPermissionLevel.label"},commentOnlyPermissionLabel:{defaultMessage:"Comment only",id:"pushNotifications.commentOnlyPermissionLevel.label"},noAccessPermissionLabel:{defaultMessage:"No access",id:"pushNotifications.noAccessPermissionLevel.label"},publicPermissionRoleLabel:{defaultMessage:"Public ({permissionLevel})",id:"pushNotifications.publicPermissions.label"},userNameWithRole:{defaultMessage:"{userName} ({permissionLevel})",id:"pushNotifications.userPermissionsWithRole.label"},botNameWithRole:{defaultMessage:"{botName} ({permissionLevel})",id:"pushNotifications.botPermissionsWithRole.label"},spaceNameWithRole:{defaultMessage:"{spaceName} ({permissionLevel})",id:"pushNotifications.spacePermissionsWithRole.label"},imageInPushNotification:{defaultMessage:"{imageEmoji} Image",id:"pushNotification.imageInPushNotification.placeholder"},topLevelBlockCreated:{defaultMessage:"{userName} created {targetName} in {spaceName}",id:"pushNotification.userCreatedBlockInSpace.message"},topLevelBlockDeleted:{defaultMessage:"{userName} deleted {targetName} in {spaceName}",id:"pushNotification.userDeletedBlockInSpace.message"},collectionRowCreated:{defaultMessage:"{userName} created {targetName} in {collectionName}",id:"pushNotification.userCreatedRowInCollection.message"},collectionRowDeleted:{defaultMessage:"{userName} deleted {targetName} in {collectionName}",id:"pushNotification.userDeletedRowInCollection.message"},emptyBlockEditedProperty:{defaultMessage:"Empty",id:"pushNotification.emptyBlockPropertyValueEdited.placeholderLabel"},propertyNameAndValueEdited:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationSubject"},propertyNameAndValueNotificationBody:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationBody"},blockDeletedEditBody:{defaultMessage:"[Deleted] {renderedBlock}",id:"pushNotification.deletedBlock.notificationContents"},blockEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockEdited.notificationSubject"},blockPropertyEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockPropertyEdited.notificationSubject"},mobileBlockPropertyEditedNotification:{defaultMessage:"{userName} edited",id:"pushNotification.mobileBlockPropertyEdited.notificationSubject"},userEditedPermissionsFor:{defaultMessage:"{userName} edited permissions for {targetName}",id:"pushNotifications.permissionsEditedForPageOrSpace.notificationSubject"},userMentionedIn:{defaultMessage:"{userName} mentioned you in {targetName}",id:"pushNotifications.userMentionedInPage.notificationSubject"},mobileUserMentionedIn:{defaultMessage:"{userName} mentioned you",id:"pushNotifications.mobileUserMentionedInPage.notificationSubject"},permissionGroupMentionedIn:{defaultMessage:"{userName} mentioned {groupName} in {targetName}",id:"pushNotifications.groupMentionedInPage.notificationSubject"},teamMentionedIn:{defaultMessage:"{userName} mentioned {teamName} in {targetName}",id:"pushNotifications.teamMentionedInPage.notificationSubject"},userDeletedComment:{defaultMessage:"[Deleted]💬 {commentText}",id:"pushNotifications.userDeletedCommentText.notificationContents"},userCommentedSubject:{defaultMessage:"{userName} commented in {targetName}",id:"pushNotifications.userCommentedSubject.notificationSubject"},userSuggestedSubject:{defaultMessage:"{userName} suggested in {targetName}",id:"pushNotifications.userSuggestedSubject.notificationSubject"},mobileUserCommentedSubject:{defaultMessage:"{userName} commented",id:"pushNotifications.mobileUserCommentedSubject.notificationSubject"},mobileUserSuggestedSubject:{defaultMessage:"{userName} commented",id:"pushNotifications.mobileUserSuggestedSubject.notificationSubject"},userAddedToSpace:{defaultMessage:"{userName} added you to {workspaceName}",id:"pushNotifications.userAddedToSpace.notificationSubject"},mobileUserInvited:{defaultMessage:"{userName} invited you",id:"pushNotifications.mobileUserInvited.notificationSubject"},mobileUserInvitedByBot:{defaultMessage:"You have been invited",id:"pushNotifications.mobileUserInvitedByBot.notificationSubject"},userInvitedToSpace:{defaultMessage:"{userName} invited you to {workspaceName}",id:"pushNotifications.userInvitedToSpace.notificationSubject"},userInvitedToSpaceByBot:{defaultMessage:"You have been invited to {workspaceName}",id:"pushNotifications.userInvitedToSpaceByBot.notificationSubject"},userEditedCollectionSubject:{defaultMessage:"{userName} edited {collectionName}",id:"pushNotifications.collectionEdited.notificationSubject"},userEditedCollectionPageLayoutSubject:{defaultMessage:"{userName} edited the layout of {collectionName}",id:"pushNotifications.collectionPageLayoutEdited.notificationSubject"},userCreatedCollectionSubject:{defaultMessage:"{userName} created {collectionName}",id:"pushNotifications.collectionCreated.notificationSubject"},collectionDescriptionDeleted:{defaultMessage:"{userName} deleted the description for {collectionName}",id:"pushNotifications.collectionDescriptionDeleted.notificationSubject"},collectionDescriptionCreated:{defaultMessage:"{userName} added a description for {collectionName}",id:"pushNotifications.collectionDescriptionAdded.notificationSubject"},untitledCollectionView:{defaultMessage:"Untitled",id:"pushNotifications.untitledCollection.label"},collectionViewEditedSubject:{defaultMessage:"{userName} edited view {collectionViewName} in {collectionName}",id:"pushNotifications.collectionViewEdited.notificationSubject"},collectionPropertyEditedUnknown:{defaultMessage:"Unknown",id:"pushNotifications.unknownCollectionPropertyName.label"},collectionPropertyEditedSubject:{defaultMessage:"{userName} edited property {propertyType} in {collectionName}",id:"pushNotifications.collectionPropertyEdited.subject"},reminderSubject:{defaultMessage:"Reminder in {pageName}",id:"pushNotifications.reminderChanged.subject"},pageLockedActivity:{defaultMessage:"{userName} locked {pageName}",id:"pushNotifications.pageLocked.subject"},pageUnlockedActivity:{defaultMessage:"{userName} unlocked {pageName}",id:"pushNotifications.pageUnlocked.subject"},emailEditedActivity:{defaultMessage:"{userName} edited their account settings",id:"pushNotifications.emailAccountSettingsEdited.subject"},emptyPropertyBody:{defaultMessage:"Empty",id:"pushNotifications.emptyPropertyValueInCollection.label"},unknownRelationValueChange:{defaultMessage:"Unknown",id:"pushNotifications.unknownRelationPropertyChanged.label"},unknownAuthorInPropertySchemaChange:{defaultMessage:"Unknown author",id:"pushNotifications.unknownAuthorUpdatedProperty.label"},accessRequestedSubject:{defaultMessage:"{userName} requested access to {pageName}",id:"pushNotifications.accessRequested.subject"},editAccessRequestedSubject:{defaultMessage:"{userName} requested edit access to {pageName}",id:"pushNotifications.editAccessRequested.subject"},accessRequestResolvedApprovedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been approved",id:"pushNotifications.accessRequestResolved.approved.subject"},accessRequestResolvedRejectedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been rejected",id:"pushNotifications.accessRequestResolved.subject"},membershipRequestedSubject:{defaultMessage:"{userName} requested to add a new member to {workspaceName}",id:"pushNotifications.membershipRequested.subject"},guestInviteRequestedSubject:{defaultMessage:"{userName} requested to invite a guest to {workspaceName}",id:"pushNotifications.guestInviteRequested.subject"},blockFormatEditPageIconName:{defaultMessage:"Page Icon",id:"pushNotifications.formatChange.pageIcon.label"},pageIconImagePlaceholder:{defaultMessage:"Image",id:"pushNotifications.formatChange.pageIcon.imagePlaceholder"},pageDeletedActivity:{defaultMessage:"{userName} deleted {pageName}",id:"pushNotifications.pageDeleted.subject"},pageRestoredActivity:{defaultMessage:"{userName} restored {pageName}",id:"pushNotifications.pageRestored.subject"},pagePermanentlyDeletedActivity:{defaultMessage:"{userName} permanently deleted {pageName}",id:"pushNotifications.pagePermanentlyDeleted.subject"},userInvitedToTeam:{defaultMessage:"{userName} invited you to {teamName}",id:"pushNotifications.userInvitedToTeam.notificationSubject"},privateContentTransferred:{defaultMessage:"{author} transferred private content from {fromUserName} to you: {pageName}",id:"pushNotifications.privateContentTransferred.notificationSubject"},verificationExpired:{defaultMessage:"Verification expired for {pageName}",id:"pushNotifications.verificationExpired.notificationSubject"},importSuccessful:{defaultMessage:"Your {importSource} import was successful",id:"pushNotifications.importCompleted.notificationSubject"},importFailed:{defaultMessage:"Your {importSource} import has failed",id:"pushNotifications.importFailed.notificationSubject"},exportCompleted:{defaultMessage:"Your workspace export is ready",id:"pushNotifications.exportCompleted.notificationSubject"},inAppNotificationAutomationActionTriggered:{defaultMessage:"{automationName} sent you a message",id:"pushNotifications.inAppNotificationAutomationActionTriggered.notificationSubject"},noConflictsFound:{defaultMessage:"No conflicts found",id:"pushNotifications.noConflictsFound.notificationSubject"},automationTypecheckErrorRaisedSubject:{defaultMessage:"{automationName} is invalid",id:"pushNotifications.automationTypecheckErrorRaised.notificationSubject"},automationTypecheckErrorRaisedBody:{defaultMessage:"Resolve any errors or remove failing steps to enable this automation",id:"pushNotifications.automationTypecheckErrorRaised.notificationBody"},reactionCreated:{defaultMessage:"{userName} reacted to {targetName}",id:"pushNotifications.reactionCreated.notificationSubject"},upgradeRequestCreated:{defaultMessage:"{userName} requested an upgrade",id:"pushNotifications.upgradeRequestCreated.notificationSubject"},appBuilderWorkflowError:{defaultMessage:"A workflow run has failed",id:"pushNotifications.appBuilderWorkflowError.notificationSubject"},appBuilderWorkflowAction:{defaultMessage:"{workflowName} has sent you a message",id:"pushNotifications.appBuilderWorkflowAction.notificationSubject"},customAppBuilderWorkflowActionTitle:{defaultMessage:"From {workflowName}: {customTitle}",id:"pushNotifications.appBuilderWorkflowAction.customNotificationSubject"}});function U(e){const{activity:t,getRecordValue:i}=e,n=t.getEdits();return o().oE((0,a().qt)(o().Bq(n.map((e=>e.authors||[])))).map((e=>{const t=i(e);if(t)return(0,s().D3)({table:e.table,value:t})})))}function E(e,t){const i=e.map((e=>e?(0,s().lR)(t,e):t.formatMessage(L.unknownAuthor)));return function(e,t){if(1===t.length)return t[0];if(2===t.length)return e.formatMessage(L.twoUserNames,{firstAuthor:t[0],secondAuthor:t[1]});if(t.length>2){const i=t.length-1;return e.formatMessage(L.threePlusUserNames,{othersCount:i,firstAuthor:t[0]})}return e.formatMessage(L.defaultPluralizedUserNames)}(t,i)}function V(e){var t;const{recipientUser:i,authors:o}=e,n=o.filter((e=>e.id!==(null==i?void 0:i.id)));if(0===n.length)return;const a=n[0];var s;return a.table===_().oo&&null!==(t=a.asActor)&&void 0!==t&&t.profile_photo?null===(s=a.asActor)||void 0===s?void 0:s.profile_photo:void 0}function F(e){if(!o().Im(e))return e[0].id}function O(e){const{blockValue:t,getRecordValue:i,userTimeZone:o,intl:n}=e,a=v().Bj6.fromBlock(t),s=v().b4_.fromGetRecordValueFn(i);return a.getRenderTitleWithEmojiOrPlaceholder({getRecordModel:s,userTimeZone:o,intl:n})}function D(e){return function(e){const{activity:t,getRecordValue:i,pageVisitSource:o,userTimeZone:n,intl:a}=e,s=v().b4_.fromGetRecordValueFn(i),r=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;if(r){const d=i({table:k().ev,id:r,spaceId:t.space_id});if(d){return{url:v().Bj6.fromBlock(d).getRenderUrl({getRecordModel:s,baseUrl:e.baseURL,pageVisitSource:o}),title:O({intl:a,blockValue:d,getRecordValue:i,userTimeZone:n})}}return{url:e.baseURL||"/",title:a.formatMessage(L.untitledBlockTitle)}}if(t.collection_id)return q(e);if("user-invited"===t.type){const o=function(e){const{activity:t}=e,i=v().b4_.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel);if(!t.permission_group_id)return;const o=ne({spaceId:t.space_id,permissionGroupId:t.permission_group_id,getRecordModel:i});if(o)return{icon:o.getIcon(),name:o.getName()};return}({activity:t,getRecordValue:i}),n=s({table:I().NX,id:t.space_id});if(n&&o)return{title:ae(a,o),url:n.getRenderUrl({baseUrl:e.baseURL})}}else{if("team-membership-edited"===t.type)return H(e);if("access-requested"===t.type){const i=s({id:t.getAccessRequestId(),table:A().O,spaceId:t.space_id});if(i&&i.isTeamMembershipRequest())return H(e)}}return z(e)}(e).title.replaceAll(/[\r\n]+/g," ")}function K(e){const{activity:t}=e,i=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;return i||(t.collection_id?t.collection_id:void 0)}function H(e){const{activity:t,getRecordValue:i,intl:o}=e,n=v().b4_.fromGetRecordValueFn(i),a=e.baseURL||"/",s=o.formatMessage(L.untitledTeamName);if(!t.team_id)return{url:a,title:s};const r=n({table:j().yK,id:t.team_id}),d=n({table:I().NX,id:t.space_id});return{url:(null==d?void 0:d.getRenderUrl({baseUrl:e.baseURL}))??a,title:(null==r?void 0:r.getRenderTitleWithEmojiOrPlaceholder({intl:o}))??s}}function W(e){return z(e).title}function z(e){const{activity:t,getRecordValue:i,intl:o}=e,n=i({table:I().NX,id:t.space_id});if(n){const t=v().Bj6.fromSpace(n);return{title:t.getRenderTitleWithEmojiOrPlaceholder({intl:o}),url:t.getRenderUrl({baseUrl:e.baseURL})}}return{url:e.baseURL||"/",title:o.formatMessage(L.untitledSpaceName)}}function G(e){return q(e).title}function q(e){const{activity:t,getRecordValue:i,pageVisitSource:o,userTimeZone:n,intl:a}=e;if(t.collection_id){const s=i({table:w().Vl,id:t.collection_id,spaceId:t.space_id});if(s){const t=v().Bj6.fromCollection(s),i=v().b4_.fromGetRecordValueFn(e.getRecordValue),r=t.getRenderTitleWithEmojiOrPlaceholder({getRecordModel:i,userTimeZone:n,intl:a});return{url:t.getRenderUrl({getRecordModel:i,baseUrl:e.baseURL,pageVisitSource:o}),title:r}}return{url:e.baseURL||"/",title:a.formatMessage(L.untitledCollectionName)}}return{url:e.baseURL||"/",title:a.formatMessage(L.untitledCollectionName)}}function Z(e){const{activity:t,getRecordValue:i,intl:o}=e;if("in-app-notification-automation-action-triggered"===t.type||"automation-typecheck-error-raised"===t.type){const e=v().b4_.fromGetRecordValueFn(i),n=e({table:M().yB,id:t.getEdits()[0].automation_id,spaceId:t.space_id});return(null==n?void 0:n.getNameWithDefault(e,o))??(0,r().PK)(o)}}function Y(e){if(e.blockValue.properties)return(0,x().r4)({intl:e.intl,textValue:e.blockValue.properties.title,getRecordModel:v().b4_.fromGetRecordValueFn(e.getRecordValue),userTimeZone:e.userTimeZone})}function $(e,t){const i=(0,S().an)(t,void 0);return e.formatMessage(i)}function J(e){let{userTimeZone:t,activity:i,getRecordValue:n,pageVisitSource:a,intl:s,experimentService:r,collectionFeatureGates:d}=e;const c=i.getEdits();if(c.length){const e=[];c.forEach((t=>{"permission-created"===t.type?e.push(t.permission_data):"permission-deleted"===t.type?e.push({...t.permission_data,role:"none"}):"permission-restriction-created"===t.type||"permission-restriction-deleted"===t.type?(t.permission_data.calculated_changes||[]).forEach((t=>{let[i,o]=t;e.push(o)})):e.push(t.permission_data.after)}));const u=o().oE(e.sort(S().zK).map((e=>{if("user_permission"===e.type){const t=n({table:_().oo,id:e.user_id}),i=(0,R().c6)(s,t),o=$(s,e.role);return s.formatMessage(L.userNameWithRole,{userName:i,permissionLevel:o})}if("space_permission"===e.type){const o=W({intl:s,activity:i,getRecordValue:n,userTimeZone:t,pageVisitSource:a,experimentService:r,collectionFeatureGates:d}),l=$(s,e.role);return s.formatMessage(L.spaceNameWithRole,{spaceName:o,permissionLevel:l})}if("public_permission"===e.type){const t=$(s,e.role);return s.formatMessage(L.publicPermissionRoleLabel,{permissionLevel:t})}if("bot_permission"===e.type){const t=n({table:N().GP,id:e.bot_id}),i=(0,l().Hg)(t),o=$(s,e.role);return s.formatMessage(L.botNameWithRole,{botName:i,permissionLevel:o})}})));return s.formatList(u,{type:"conjunction",style:"narrow"})}}function X(e){const{intl:t}=e;switch(e.blockValue.type){case d().xd.text:case d().xd.encryptedText:case d().xd.header:case d().xd.subHeader:case d().xd.subSubHeader:case d().xd.factory:case d().xd.equation:case d().xd.code:return Y(e);case d().xd.toggle:return`▸ ${Y(e)}`;case d().xd.bulletedList:return`• ${Y(e)}`;case d().xd.numberedList:return`1. ${Y(e)}`;case d().xd.quote:return`“${Y(e)}”`;case d().xd.toDo:return(function(e){let{blockValue:t}=e;return p().wu(t.properties&&t.properties.checked)}(e)?"✓ ":"▢ ")+Y(e);case d().xd.file:case d().xd.bookmark:return`🔗 ${Y(e)}`;case d().xd.embed:case d().xd.framer:case d().xd.whimsical:case d().xd.mixpanel:case d().xd.miro:case d().xd.abstract:case d().xd.sketch:case d().xd.excalidraw:case d().xd.replit:case d().xd.hex:case d().xd.deepnote:case d().xd.tweet:case d().xd.gist:case d().xd.maps:case d().xd.invision:case d().xd.video:case d().xd.audio:case d().xd.image:return t.formatMessage(L.imageInPushNotification,{imageEmoji:"🖼"});case d().xd.drive:return function(e){const{blockValue:t}=e,i=(0,g().v)(v().Bj6.fromBlock(t));return i&&i.title?i.title:O(e)}(e);case d().xd.page:case d().xd.collectionView:case d().xd.collectionViewPage:return O(e);case d().xd.tableRow:return function(e){var t;const{blockValue:i,getRecordValue:o,userTimeZone:n,intl:a}=e,s=o({table:i.parent_table,id:i.parent_id,spaceId:i.space_id});if(!s||!i)return;const r=i.properties,d=(null===(t=s.format)||void 0===t?void 0:t.table_block_column_order)||[];return d&&r?d.map((e=>(0,x().r4)({textValue:r[e],getRecordModel:v().b4_.fromGetRecordValueFn(o),userTimeZone:n,intl:a}))).join(", "):void 0}(e)}}function Q(e){const{getRecordValue:t,baseURL:i,userTimeZone:o,intl:n,collectionFeatureGates:a}=e,s=t({table:k().ev,id:e.blockId});if(s){if("page"===s.type){const r=(0,b().zN)({block:s,getRecordValue:t});if(r){const i=u().Dp(r),o=i[e.property],d=o?o.name:void 0,l=ee({property:e.property,schema:i,block:s,getRecordValue:t,userTimeZone:e.userTimeZone,baseURL:e.baseURL,intl:n,experimentService:e.experimentService,collectionFeatureGates:a})||n.formatMessage(L.emptyPropertyBody);return n.formatMessage(L.propertyNameAndValueNotificationBody,{propertyName:d,propertyValue:l})}return X({intl:n,blockValue:s,getRecordValue:t,baseURL:i,userTimeZone:o})}return X({intl:n,blockValue:s,getRecordValue:t,baseURL:i,userTimeZone:o})}}function ee(e){const{property:t,schema:i,getRecordValue:o,userTimeZone:n,baseURL:r,intl:d,experimentService:l,collectionFeatureGates:c}=e,g=i[t],b=v().Bj6.fromBlock(e.block);if(!b.getProperties()||!g)return;const y=b.getProperties()[t];if("formula"===g.type){const e=v().b4_.fromGetRecordValueFn(o),s=(0,h().primitiveFormulaValueFromPropertySchema)({schema:i,property:t,blockModel:b,getRecordModel:e,intl:d,userTimeZone:n,depth:0,resultCache:new Map,regExpCache:new Map,experimentService:l,collectionFeatureGates:c});return f().kC(s)?(0,m().ZF)({allowRelativeDates:!0,intl:d,value:s,userTimeZone:n}):"boolean"==typeof s?s?u().I1:u().oP:(0,a().Et)(s)?s.toString():s}if("person"===g.type)return d.formatList(p().e5({textValue:y,propertySchema:g,blockCreatorPointer:b.getCreatedByPointer()}).map((e=>{const t=o(e),i=(0,s().D3)({table:e.table,value:t});return(0,s().lR)(d,i)})),{type:"conjunction",style:"narrow"});if("created_by"===g.type){const e=b.getCreatedByPointer();if(!e)return d.formatMessage(L.unknownAuthorInPropertySchemaChange);const t=o(e),i=t&&(0,s().D3)({table:e.table,value:t});return i?(0,s().lR)(d,i):d.formatMessage(L.unknownAuthorInPropertySchemaChange)}return"created_time"===g.type?(0,m().W_)(b.getCreatedTime(),"short",d.locale,n):y?te({propertySchema:g,textValue:y,getRecordValue:o,userTimeZone:n,baseURL:r,intl:d,experimentService:l,collectionFeatureGates:c}):void 0}function te(e){const{propertySchema:t,textValue:i,getRecordValue:o,userTimeZone:a,baseURL:r,intl:d,collectionFeatureGates:l}=e;if("title"===t.type||"text"===t.type||"geo_point"===t.type)return(0,x().r4)({intl:d,textValue:i,getRecordModel:v().b4_.fromGetRecordValueFn(o),userTimeZone:a});if("select"===t.type){const e=t.options||[];return p().L3(i,e)}if("multi_select"===t.type){const e=t.options||[];return d.formatList(p().o2(i,e),{type:"conjunction",style:"narrow"})}if("checkbox"===t.type)return p().wu(i)?u().I1:u().oP;if("date"===t.type){const e=(0,c().b)(i);if(e)return(0,m().ZF)({allowRelativeDates:!0,intl:d,value:e,date_format:t.date_format,time_format:t.time_format,userTimeZone:a})}else{if("person"===t.type)return d.formatList(p().e5({textValue:i,propertySchema:t,blockCreatorPointer:void 0}).map((e=>{const t=o(e),i=(0,s().D3)({table:e.table,value:t});return(0,s().lR)(d,i)})),{type:"conjunction",style:"narrow"});if("relation"===t.type){const e=p().bG({relationValue:p().n(i),getRecordModel:v().b4_.fromGetRecordValueFn(o),propertySchema:t,includeDeleted:l.relations_show_deleted,includeInvalidCollection:l.relations_show_invalid_collection,includeNoAccess:l.relations_show_no_access});return d.formatList(e.map(o).map((e=>e?O({intl:d,blockValue:e,getRecordValue:o,baseURL:r,userTimeZone:a}):d.formatMessage(L.unknownRelationValueChange))),{type:"conjunction",style:"narrow"})}if("number"===t.type){const e=p().Me(i);if(void 0!==e)return e.toString()}else if("auto_increment_id"===t.type){const e=p().On(i);if(void 0!==e)return e.toString()}else{if("file"===t.type)return d.formatList(p().pJ(i).map((e=>e.name||e.url)),{type:"conjunction",style:"narrow"});if("url"===t.type||"phone_number"===t.type||"email"===t.type)return(0,T().k4p)(i);if("created_by"===t.type)return;if("created_time"===t.type)return;if("formula"===t.type)return;if("rollup"===t.type)return;if("last_edited_by"===t.type)return;if("last_edited_time"===t.type)return;if("last_visited_time"===t.type)return;if("button"===t.type)return;if("status"===t.type)return p().RZ(i,t);if("location"===t.type)return;if("verification"===t.type){const e=B().U1(i),t=e?B().B2(e):{type:"none"};if("none"===t.type)return d.formatMessage(B().nl.none);const n=o(t.actorPointer),r=(0,s().D3)({table:t.actorPointer.table,value:n}),l=(0,s().lR)(d,r);return"verified"===t.type&&t.isIndefinite?d.formatMessage(B().nl.verifiedIndefinitely,{actor:l}):d.formatMessage(B().nl.verifiedUntil,{actor:l,datetime:P().T2({dateTime:t.dateTimeRange.end,intl:d,userTimeZone:a,displayInUserTimezone:!1,alwaysIncludeTimezone:!0})})}(0,n().HB)(t)}}}function ie(e){if("page_icon"===e.formatProperty)return e.intl.formatMessage(L.blockFormatEditPageIconName)}function oe(e){const{formatProperty:t,block:i,getRecordValue:o,intl:n}=e;if("page_icon"===t){const e=v().Bj6.fromBlock(i).getRenderIcon({getRecordModel:v().b4_.fromGetRecordValueFn(o)});return e?(0,y().A)(e.icon)?e.icon:n.formatMessage(L.pageIconImagePlaceholder):n.formatMessage(L.emptyBlockEditedProperty)}}function ne(e){const t=v().b4_.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel),{spaceId:i,permissionGroupId:o}=e;return t({table:C().n,id:(0,C().T1)({spaceId:i,spacePermissionGroupId:o}),spaceId:i})}function ae(e,t){if(t){return[(0,y().A)(t.icon)?t.icon:void 0,t.name.length>0?t.name:e.formatMessage(L.untitledPermissionGroupName)].filter(Boolean).join(" ")}return e.formatMessage(L.defaultPermissionGroupName)}function se(e){const t=v().b4_.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel),{spaceId:i,teamId:o}=e;return t({table:j().yK,id:o,spaceId:i})}function re(e){switch(e){case"block-property-edited":case"reacted":case"commented":case"permission-group-mentioned":case"team-mentioned":case"reminder":case"user-invited":case"in-app-notification-automation-action-triggered":case"user-mentioned":case"app-builder-notification":return!0;case"access-requested":case"access-request-resolved":case"email-edited":case"private-content-transferred":case"team-membership-edited":case"verification-expired":case"export-completed":case"import-completed":case"no-conflicts-found":case"automation-typecheck-error-raised":case"block-edited":case"collection-edited":case"collection-page-layout-edited":case"collection-property-edited":case"collection-row-created":case"collection-row-deleted":case"collection-view-edited":case"page-deleted":case"page-locked":case"page-permanently-deleted":case"page-restored":case"page-unlocked":case"permissions-edited":case"top-level-block-created":case"upgrade-request-created":case"top-level-block-deleted":return!1;default:return(0,n().ub)(e),!1}}},840071:(e,t,i)=>{i.d(t,{L:()=>r});i(296540);var o=()=>i(84817),n=()=>i(577466),a=()=>i(434663),s=i(474848);function r(e){let{backgroundColor:t,iconGroup:i,children:r,errorId:d}=e;const l=(0,n().B)(t),c={wrapper:{...l.wrapper,background:t?l.wrapper.background:"initial",height:"100%",padding:"20px 12px"}};return(0,s.jsx)(o().Y1,{style:c.wrapper,align:"center",children:(0,s.jsx)(a().r,{direction:"vertical",iconGroup:i,overrideSize:()=>48,errorId:d,children:r})})}},893627:(e,t,i)=>{i.d(t,{K:()=>s});var o=i.n(i(440537)),n=()=>i(132456),a=()=>i(206267);class s{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=i(851941).Yf[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e){const{enableTestDateOffset:t,enableIdSchema:o}=this.getSettings();return o&&e!==i(867178).wI?(this.idCreatorLogger(void 0,e,t?"id_schema_test":"id_schema"),(0,n().J4)(t,this.mainShortId,e,this.isServerOriginated)):this.legacyId(e,"disabled")}pointerInMain(e){return{table:e,id:this.idInMain(e)}}async idWithSpaceId(e,t){const{enableTestDateOffset:i,enableIdSchema:a}=this.getSettings();if(!a||"space"===t)return this.legacyId(t,"disabled");const s=this.mapSpaceIdToShortId(e),r=o().types.isPromise(s)?await s:s;return r?(this.idCreatorLogger(e,t,i?"id_schema_test":"id_schema"),(0,n().kw)(i,r,t,this.isServerOriginated)):this.legacyId(t,"missing_short_id")}async pointerWithSpaceId(e,t){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t)}}idWithSpaceShortId(e,t){const{enableTestDateOffset:i,enableIdSchema:o}=this.getSettings();return o&&"space"!==t?(this.idCreatorLogger(void 0,t,i?"id_schema_test":"id_schema"),(0,n().kw)(i,e,t,this.isServerOriginated)):this.legacyId(t,"disabled")}legacyId(e,t){return this.idCreatorLogger(void 0,e,t),a().JW()}async deterministicIdWithSpaceId(e,t,i){const{enableTestDateOffset:s,enableIdSchema:r}=this.getSettings();if(!r)return this.idCreatorLogger(e,t,"disabled"),a().gB(i);const d=this.mapSpaceIdToShortId(e),l=o().types.isPromise(d)?await d:d;return l?(this.idCreatorLogger(e,t,s?"id_schema_test":"id_schema"),(0,n().lf)(l,t,i)):(this.idCreatorLogger(e,t,"missing_short_id"),a().gB(i))}deterministicIdWithSpaceShortId(e,t,i){const{enableTestDateOffset:o,enableIdSchema:s}=this.getSettings();return s?(this.idCreatorLogger(void 0,t,o?"id_schema_test":"id_schema"),(0,n().lf)(e,t,i)):(this.idCreatorLogger(void 0,t,"disabled"),a().gB(i))}async getSpaceIdCreator(e){if(!e)return new r(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new r(e,this.idCreatorLogger);const i=this.mapSpaceIdToShortId(e),n=o().types.isPromise(i)?await i:i;return this.getSpaceShortIdCreator(e,n)}getSpaceIdCreatorSync(e){if(!e)return new r(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new r(e,this.idCreatorLogger);const i=this.mapSpaceIdToShortId(e),n=o().types.isPromise(i)?void 0:i;return this.getSpaceShortIdCreator(e,n)}getSpaceShortIdCreator(e,t){const{enableIdSchema:i}=this.getSettings();return i&&t?new d(e,this,t):new r(e,this.idCreatorLogger)}async getSpaceIdCreatorFromModel(e){return e.getShortIdStr()?this.getSpaceShortIdCreator(e.id,Number(e.getShortIdStr())):await this.getSpaceIdCreator(e.id)}}class r{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e){return this.idCreatorLogger(void 0,e,"disabled"),a().JW()}idInMain(e){return this.idCreatorLogger(void 0,e,"disabled"),a().JW()}deterministicIdInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled"),a().gB(t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class d{constructor(e,t,i){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=i}idInSavedSpace(e){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e)}idInMain(e){return this.idCreator.idInMain(e)}deterministicIdInSavedSpace(e,t){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}},920498:(e,t,i)=>{i.r(t),i.d(t,{getNotificationValues:()=>l,getState:()=>d,setState:()=>r});i(581454);var o=()=>i(801634),n=()=>i(959044),a=()=>i(351360);let s={};function r(e){s={...s,...e}}function d(){return s}function l(){const e=s.result;if(!e)return null;const t=a().default.state.currentSpaceStore;return t?e.map((e=>{const i={table:n()._p,id:e,spaceId:t.getSpaceId()},a=t.getRecordValue(i),s=null==a?void 0:a.activity_id;if(s&&a){const e={table:o().kz,id:s,spaceId:t.getSpaceId()};a.activity=t.getRecordValue(e)}return a})):null}},943647:(e,t,i)=>{i.d(t,{A:()=>y});var o=i(296540),n=()=>i(484714),a=()=>i(56366),s=()=>i(959013),r=()=>i(896628),d=()=>i(454531),l=()=>i(317909),c=()=>i(478726),u=()=>i(867772),p=()=>i(681810),f=()=>i(608581),m=()=>i(145214),g=()=>i(704152),h=()=>i(24611),b=i(474848);const y=function(e){let{store:t,disabled:s,paddingRight:d,paddingLeft:c,height:f,proxyWidth:m}=e;const g=(0,n().v3)(),h=(0,a().uB)(void 0,i(454305).A),y=(0,a().K8)((()=>s||"suggest"===i(77246).Uv.getMode(t)),[s,t]),x=(0,a().K8)((()=>t.getCover()),[t]),A=(0,a().O$)(p().A),[M,k]=(0,o.useState)(void 0);if(!x)return null;const N=A.loadingMode!==u().pF&&A.loadingMode!==u().Wc;return(0,b.jsx)(i(801678).A,{mouseStore:h,onFlushTemporaryPosition:e=>function(e,t,i){const{imagePosition:o,reset:n}=e;l().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:i,canUndo:!0,perform:e=>{r().yY({store:t,coverPosition:o,transaction:e}),n()}})}(e,t,g),renderControl:e=>{let{handleRepositionClick:i,handleSavePositionClick:o,handleCancelClick:n,isVisible:a,isRepositioning:s}=e;return(0,b.jsx)(S,{handleRepositionClick:i,handleSavePositionClick:o,handleCancelClick:n,isVisible:a,isRepositioning:s,lastProxiedUrl:M,store:t,disabled:y,paddingRight:d,paddingLeft:c,mouseStore:h})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:f,maxHeight:280,cursor:"default"},render:e=>(0,b.jsxs)(o.Fragment,{children:[(0,b.jsx)(i(360083).A,{url:x.cover,isAuthenticated:!0,permissionRecord:x.pointer,width:m,onFinishedLoadingProxyUrl:k,render:(t,o)=>{const n={width:"100%",height:f,maxHeight:280,objectFit:"cover",opacity:N?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},a={width:"100%",height:f,maxHeight:280};return(0,b.jsx)(i(307440).E,{src:o,placeholderSrc:N?A.dataURL:void 0,placeholderBehavior:N?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:a,imageStyle:n,onLoadComplete:v,testId:"pageCover"})}}),N&&(0,b.jsxs)("div",{style:i(816559).fd,children:[(0,b.jsx)(i(331542).A,{size:"md",style:{marginRight:4}}),(0,b.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:(0,b.jsx)(i(773382).A,{percentage:A.uploadProgress})})]})]})})};function v(){p().A.reset()}function S(e){let{isVisible:t,isRepositioning:i,handleCancelClick:r,handleRepositionClick:l,handleSavePositionClick:y,lastProxiedUrl:v,store:S,disabled:x,paddingRight:A,paddingLeft:M,mouseStore:k}=e;const N=(0,n().v3)(),w=(0,s().tz)(),I=(0,o.useCallback)((e=>function(e,t,i,o,n){n.reset();const a=e.target.getBoundingClientRect();d().W({environment:t,intl:i,store:o,rect:a})}(e,N,w,S,k)),[N,w,S,k]),C=(0,a().K8)((()=>p().A.state.loadingMode),[]),j=(0,a().K8)((()=>function(e){let t;return t=e.isFullWidth()?"100%":c().x6,t}(S)),[S]);if(x||C!==u().pF)return null;const{device:_}=N,{isMobile:T}=_;return(0,b.jsx)(m().A,{animate:{width:j,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,b.jsxs)(f().A,{isVisible:t,position:"bottom",style:{marginRight:A,marginLeft:M},children:[!i&&(0,b.jsx)(g().A,{style:{borderRight:T?"none":void 0,...h().k},onClick:I,children:(0,b.jsx)(s().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!i&&!T&&(0,b.jsx)(g().A,{style:{...h().k,borderRight:"none"},onClick:e=>l(e,v),children:(0,b.jsx)(s().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),i&&!T&&(0,b.jsx)(g().A,{style:h().k,onClick:y,children:(0,b.jsx)(s().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),i&&!T&&(0,b.jsx)(g().A,{style:{...h().k,borderRight:"none"},onClick:r,children:(0,b.jsx)(s().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},965351:(e,t,i)=>{i.d(t,{Ay:()=>P,Lk:()=>R,UM:()=>_});i(581454);var o=i(296540),n=()=>i(484714),a=()=>i(56366),s=()=>i(401497),r=()=>i(609948),d=()=>i(593249),l=()=>i(619082),c=()=>i(413267),u=()=>i(112452),p=()=>i(959013),f=()=>i(534177),m=()=>i(572080),g=()=>i(317909),h=()=>i(760217),b=()=>i(406699),y=()=>i(285790),v=()=>i(928600),S=()=>i(939740),x=()=>i(89924),A=()=>i(859428),M=()=>i(125565),k=()=>i(753199),N=()=>i(722872),w=()=>i(575301),I=()=>i(538075),C=i(474848);const j=(0,p().YK)({changePageNotificationSettings:{defaultMessage:"Change page notification settings",id:"inboxActionsMenu.notificationSettings.tooltipMessage"},markUnread:{defaultMessage:"Mark this notification as unread",id:"inboxActionsMenu.markNotificationAsUnread.tooltipMessage"},markRead:{defaultMessage:"Mark this notification as read",id:"inboxActionsMenu.markNotificationAsRead.tooltipMessage"},archive:{defaultMessage:"Archive this notification",id:"inboxActionsMenu.handleArchive.tooltipMessage"},unarchive:{defaultMessage:"Unarchive",id:"inboxActionsMenu.handleUnarchive.tooltipMessage"}}),_=96;function T(e){const{notification:t,rootStore:c,onArchiveClicked:f,onUnarchiveClicked:h,onMarkAsReadClicked:v,onMarkAsUnreadClicked:S}=e,x=(0,n().v3)(),M=(0,n().Y0)(),N=(0,p().tz)(),_=(0,o.useContext)(i(929469).B),T=(0,a().K8)((()=>!!t&&(0,i(814388).IF)(t.type)),[t]),P=(0,a().K8)((()=>{const e=null==t?void 0:t.navigable_block_id;if(e)return i(630116).Bv.createChildStore(c,{table:i(179034).ev,id:e})}),[c,t]),B=(0,a().K8)((()=>null==P?void 0:P.getFollowSettingsKey()),[P]),L=(0,a().K8)((()=>{if(!B)return[];if(!P)return[];return I().H8({followSettingsKey:B,environment:x,blockStore:P,from:"inbox"})}),[B,x,P]),U=(0,a().K8)((()=>T&&L.length>0),[T,L]),E=(0,o.useCallback)((e=>{t&&(0,k().SQ)({event:e,context:k().y$.NotificationClick,callback:()=>{f(),g().createAndCommit({userAction:"InboxActionsMenu.handleArchive",environment:x,canUndo:!0,perform:e=>{m().s4({notification:t,rootStore:c,transaction:e})}})}})}),[x,t,f,c]),V=(0,o.useCallback)((e=>{t&&(0,k().SQ)({event:e,context:k().y$.NotificationClick,callback:()=>{h(),g().createAndCommit({userAction:"Activity.handleUnarchive",environment:x,canUndo:!0,perform:e=>{m().JV({notificationId:t.id,visited:!1,rootStore:c,transaction:e})}})}})}),[x,t,h,c]),F=(0,o.useCallback)((e=>{t&&(0,k().SQ)({event:e,context:k().y$.NotificationClick,callback:()=>{t.read?S():v(),g().createAndCommit({userAction:"InboxActionsMenu.toggleNotificationReadStatus",environment:x,canUndo:!0,perform:e=>{m().ZB({notification:t,rootStore:c,transaction:e,read:!t.read})}})}})}),[x,t,v,S,c]),O=(0,o.useCallback)((()=>{B&&P&&t&&i(848259).zP({environment:x,notificationId:t.id,pageId:P.pointer.id,isCurrentlyFollowing:(0,i(518773).A)(B).following,from:"inbox"})}),[x,P,B,t]),D=(0,s().IS)((e=>{const o={fill:e.icon.secondary,padding:(M.isMobile,0),width:(M.isMobile,22),height:(M.isMobile,22)};return{container:{display:"flex",gap:1,height:"min-content",padding:2,borderWidth:M.isMobile?0:1,borderStyle:"solid",borderColor:e.stroke.primary,background:e.buttonGroupBackground,borderRadius:6,boxShadow:M.isMobile?void 0:"0px 2px 4px 0px rgba(22, 29, 27, 0.02)"},button:{height:M.isMobile?30:24,width:M.isMobile?30:24},icon:{...o},iconVisited:{...o,...M.isMobile?{height:17.5,width:17.5}:{height:15,width:15}},iconUnvisited:{...o,marginTop:-.5,height:17.75,width:17.75},iconMarkUnread:{...o,...t.read&&{height:21,width:21},...!t.read&&{height:20.5,width:20.5}},headerLabel:{paddingLeft:16,paddingRight:16,paddingTop:10,fontWeight:i(284371).Wy.semibold}}}),[M.isMobile,t.read]),K=(0,w().T4)();return t.visited?(0,C.jsx)("div",{style:D.container,children:(0,C.jsx)(A().A,{renderTooltip:()=>N.formatMessage(j.unarchive),render:e=>(0,C.jsx)(y().A,{ariaLabel:N.formatMessage(j.unarchive),style:D.button,icon:u()._,iconStyle:D.iconVisited,onClick:V,...e})})}):(0,C.jsxs)("div",{style:D.container,children:[U&&(0,C.jsx)(A().A,{renderTooltip:()=>(0,C.jsx)(p().sA,{...j.changePageNotificationSettings}),render:e=>(0,C.jsx)(b().Ay,{style:K.popup,popupType:M.isMobile?b().z7.SlideUp:b().z7.Popup,alignmentToOrigin:b().yP.Start,placementToOrigin:b().sx.Bottom,render:e=>(0,C.jsx)(R,{blockStore:P,notification:t,handlers:{handleUnarchive:V,handleArchive:E,toggleNotificationReadStatus:F},closePopup:()=>e.close()}),renderOrigin:t=>(0,C.jsx)(y().A,{ariaLabel:N.formatMessage(j.changePageNotificationSettings),style:D.button,icon:i(709687).r,iconStyle:D.iconUnvisited,...e,...(0,i(553965).A)(t,{onClick:()=>O()})})})},"pageNotificationSettings"),(0,C.jsx)(A().A,{renderTooltip:()=>N.formatMessage(t.read?j.markUnread:j.markRead),render:e=>(0,C.jsx)(y().A,{ariaLabel:N.formatMessage(t.read?j.markUnread:j.markRead),style:D.button,icon:t.read?l().s:d().v,iconStyle:D.iconMarkUnread,onClick:F,...e})},"markUnread"),"activity"!==_&&(0,C.jsx)(A().A,{renderTooltip:()=>N.formatMessage(j.archive),render:e=>(0,C.jsx)(y().A,{ariaLabel:N.formatMessage(j.archive),style:D.button,icon:r().A,iconStyle:D.icon,onClick:E,...e})},"archive")]})}function R(e){const{blockStore:t,notification:i,handlers:o,closePopup:m}=e,{handleArchive:g,handleUnarchive:b,toggleNotificationReadStatus:y}=o,A=(0,n().v3)(),k=(0,n().Y0)(),_=(0,p().tz)(),T=(0,a().K8)((()=>null==t?void 0:t.getFollowSettingsKey()),[t]),R=(0,a().K8)((()=>{if(!T)return[];if(!t)return[];return I().H8({followSettingsKey:T,environment:A,blockStore:t,from:"inbox"})}),[T,A,t]),P=(0,w().T4)(),B=(0,s().IS)((()=>({iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",...P.icon},icon:{height:24,width:24}})),[P.icon]);return(0,C.jsx)(v().A,{menuType:N().gu.Popup,height:k.isMobile?"50vh":void 0,minWidth:250,maxWidth:k.isMobile?"100vw":void 0,scrollerStyle:P.menuScroller,header:!k.isMobile&&(0,C.jsx)(M().A,{style:P.header,isSmall:!k.isMobile,isSecondaryColor:!k.isMobile,children:(0,C.jsx)(p().sA,{id:"UpdateSidebarTabUpdatesHeader.pageNotificationSettings.label",defaultMessage:"Page notification settings"})}),children:(0,C.jsx)(S().Ay,{type:S().Oh.Vertical,sections:[...k.isMobile?[{key:"Actions title",render:()=>(0,C.jsx)(M().A,{style:P.header,isSmall:!k.isMobile,isSecondaryColor:!k.isMobile,children:(0,C.jsx)(p().sA,{id:"inbox.actionsSectionTitle.label",defaultMessage:"Actions"})}),items:[]},{key:"Actions",render:e=>(0,C.jsx)(x().A,{...e,topBorder:!1,style:P.sectionMenuItem}),items:["markAsReadOrUnread","archive"].map(((e,t)=>{const o=t===R.length-1,n=k.isMobile&&o;return{key:e,render:t=>"archive"===e?(0,C.jsx)(h().A,{...t,style:{...P.buttonMenuItem,...n&&P.transparentButtonMenuItemBorder},pressedStyle:P.buttonMenuItemPressed,icon:i.visited?(0,u()._)({...P.icon,padding:3}):(0,r().A)(P.icon),title:_.formatMessage(i.visited?j.unarchive:j.archive),titleStyle:P.title}):"markAsReadOrUnread"===e?(0,C.jsx)(h().A,{...t,style:{...P.buttonMenuItem,...n&&P.transparentButtonMenuItemBorder},pressedStyle:P.buttonMenuItemPressed,icon:i.read?(0,C.jsx)("div",{style:B.iconContainer,children:(0,l().s)(B.icon)}):(0,C.jsx)("div",{style:B.iconContainer,children:(0,d().v)(B.icon)}),title:_.formatMessage(i.read?j.markUnread:j.markRead),titleStyle:P.title}):void(0,f().HB)(e),action:t=>{let{event:o}=t;"markAsReadOrUnread"===e?y(o):"archive"===e?i.visited?b(o):g(o):(0,f().HB)(e),m()}}}))}]:[],...k.isMobile?[{key:"Page notification settings title",render:()=>(0,C.jsx)(M().A,{style:P.subheader,isSmall:!k.isMobile,isSecondaryColor:!k.isMobile,children:(0,C.jsx)(p().sA,{id:"inbox.notifyMeForSectionTitle.label",defaultMessage:"Notify me for"})}),items:[]}]:[],{key:"Page notification settings",render:e=>(0,C.jsx)(x().A,{...e,topBorder:!1,style:P.sectionMenuItem}),items:R.map(((e,t)=>{const i=t===R.length-1,o=k.isMobile&&i;return{key:e.action.analyticsName,render:t=>(0,C.jsx)(h().A,{...t,style:{...P.buttonMenuItem,...o&&P.transparentButtonMenuItemBorder},pressedStyle:P.buttonMenuItemPressed,title:e.title,titleStyle:P.title,right:e.isSelectedOption?(0,c().b)(P.checkIcon):void 0}),action:()=>{e.action.action({environment:A,blocks:[],publicEditMode:void 0,analyticsFrom:"inbox_long_press_menu",lazyDependencies:{clipboardActions:void 0,formulasModule:void 0,markdownLinkifyIt:void 0,tinyMceMicrosoftWordPasteFilter:void 0}}),m()}}}))}],initialFocus:void 0,onAccept:()=>m()})})}const P=o.memo(T)}}]);